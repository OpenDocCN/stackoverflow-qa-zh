# StackOverflow 问答 11482000-11482999

# php - 我想以 sql 和 php 的形式发送附件 ..？

> ID：11482000
> 
> 赞同：-4
> 
> 时间：2012-07-14T07:47:46.440
> 
> 标签：php, mysql

我想以表格形式发送附件，所以我使用了此代码..！

```
 <form id="form1"  name="form1" autocomplete="off" enctype="multipart/form-data"
    method="post" novalidate action="triprequestexcuton.php">
     <input type="file" name="form_data" size="40"> 
      <p><input type="submit" name="submit" value="submit"> 
```

然后在triprequestexcuton.php

```
 $form_data=$_POST['form_data'];
 $attachment = addslashes(fread(fopen($form_data, "r"), filesize($form_data)));
 $qry="insert into triprequest values('','". $attachment."');"; 
 $resultop=mysql_query($qry); 
```

但是我检查了数据库，发现了像这样的文件 [BLOB - 0B]！我的0B问题！那么我该如何解决呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T07:54:07.810

*通过HTTP*使用 POST 上传的文件的内容不存储在 中`$_POST`，而是存储在另一个名为 的特殊服务器变量`$_FILES`中，这表示您没有做您应该做的事情。

* * *

*   **[PHP：POST 方法上传 - 手动](http://www.php.net/manual/en/features.file-upload.post-method.php)**

# asp.net - 带有 ViewModel 的数据透视表

> ID：11482005
> 
> 赞同：0
> 
> 时间：2012-07-14T07:48:30.857
> 
> 标签：asp.net, sql, sql-server

我正在使用 SQL Server 中的 PIVOT 将行转换为列。将结果集保存在 a 中并将 a与 a`DataTable`绑定。由于我想根据行动态生成列，我正在使用 PIVOT 操作。如果我不想使用并想使用 a代替 DataTable，我该如何进行？`DataTable``GridView``DataTable``ViewModel`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T08:19:23.250

我以前问过这个问题，但对于winforms。我也不得不旋转 sql 数据。答案是利用`System.ComponentModel`.

在此处查看最佳答案： [数据绑定动态数据](https://stackoverflow.com/questions/882214/data-binding-dynamic-data)

# ms-access-2010 - 访问 SQL 查询

> ID：11482006
> 
> 赞同：1
> 
> 时间：2012-07-14T07:48:46.763
> 
> 标签：ms-access-2010

**表 1**：

```
GenericID RelatedGenericID
--------- ----------------
25            1566

220           1570

330           1571 
```

**表2**：

```
GenericID GenericName
--------- -----------
25           a

220          b

330          c

1566         d

1570         e

1571         f 
```

我希望 MSaccess 查询的**结果**是：

```
GenericID GenericName RelatedGenericID  RelatedGenericName
--------  ----------- ----------------  ------------------
25           a          1566               d

220          b          1570               e

330          c          1571               f 
```

任何人都可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T08:18:08.970

这是仅使用 MS Access 中的查询设计窗口构建的。包含名称的 G2 已两次添加到设计网格中。

这是它在 MS Access 2010 SQL 视图中的外观：

```
SELECT g1.GenericID, g2.GenericName, g2_1.GenericName, g1.RelatedGenericID 
FROM (g1 INNER JOIN g2 ON g1.GenericID = g2.GenericID) INNER JOIN g2 AS g2_1 ON g1.RelatedGenericID = g2_1.GenericID; 
```

整理：

```
SELECT g1.genericid,
       g2.genericname,
       g1.relatedgenericid,
       g2_1.genericname
FROM   (g1
        INNER JOIN g2
                ON g1.genericid = g2.genericid)
       INNER JOIN g2 AS g2_1
               ON g1.relatedgenericid = g2_1.genericid; 
```

# php - 存储数据表和检索的最快方法

> ID：11482008
> 
> 赞同：0
> 
> 时间：2012-07-14T07:49:23.803
> 
> 标签：php, mysql, database, arrays, serialization

我在我的网站上存储了一些历史信息，以便将来检索用户。因此，当他们访问某些页面时，它将记录他们访问的页面、时间，然后将其存储在他们的用户 ID 下以供将来添加/检索。

所以我最初的计划是将所有数据存储在一个数组中，然后在每次检索时对其进行序列化/反序列化，然后将其存储回数据库的 TEXT 字段中。问题是：如果用户建立（例如）10k 页的历史记录，我不知道这对于大量数据会有多有效或低效。

编辑：所以我想知道最有效的方法是什么？我还考虑在数据库中为每条历史记录插入一个新行，但这会成为一个用于从中选择内容的大型数据库。

问题是什么是更快/高效、数据库中的大量行或大量序列化数组？显然欢迎任何其他更好的解决方案。我最终会切换到 Python，但现在这必须在 PHP 中完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T07:59:28.057

将数据存储为序列化数组没有任何好处。检索大量数据、反序列化、修改它并重新序列化以进行更新很慢 - 更糟糕的是，数据块越大（正是你担心的）会变得越慢。

数据库是专门为处理大量行而设计的，因此请使用它们。与您提出的方法不同，随着数据的增长，您每次插入都没有额外的成本，并且您仍然存储相同*数量*的数据，因此让数据库做它最擅长的事情，并保持您的代码简单。

将数据存储为数组也使得任何类型的查询和聚合几乎是不可能的。如果系统的目的是（例如）查看特定页面获得了多少次访问，则您必须对每条记录进行反序列化，查找所有匹配的页面等。如果您将数据作为一系列行用户和页面，这是一个简单的 SQL 计数查询。

如果有一天，您发现您有太多行（10,000 行并不是很多行）以至于您开始看到性能问题，请找到优化它的方法，也许是通过聚合和反规范化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T07:58:13.657

您可以检查会话变量并存储一个会话的所有数据，并将其一起转储到数据库中。

您可以在数据库级别进行索引以节省时间。

最后也是最有效的事情是对数据进行操作/操作并将其存储在单独的表中。并且始终从手动表中选择数据。您可以使用 cron 作业或一些计划来实现这一点。

# java - 公开 MYSQL for Java (android)

> ID：11482016
> 
> 赞同：0
> 
> 时间：2012-07-14T07:50:33.890
> 
> 标签：java, android, mysql, web-services, rest

所以我有一个运行 MySql 服务器的网站。现在我想将 MySql 用于我的 android 应用程序。

我的问题是如何做到这一点？我做了一些搜索，似乎我需要创建一个 Web 服务并以某种方式通过 REST 或类似的方式公开 MySql。

你能解释一下我该怎么做吗？有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T07:59:14.283

这方面有很多教程。因为你不是很具体。这里有一些链接，您可以查看相关教程。

[连接到 MySQL 数据库](http://www.helloandroid.com/tutorials/connecting-mysql-database)

[使用 PHP / MYSQL 登录和注册 - Android](http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/)

[连接安卓与 PHP & MySQL](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T07:59:32.037

这取决于您拥有的网站类型。理想的解决方案是提供您所说的 Web 服务，并且只有那些 Web 服务才能访问数据库。如果您让 MySql 直接访问移动应用程序，那么任何人都可以连接到您的数据库，并且可以弄乱您想要避免的数据。

根据您在网站上使用的技术，有大量关于如何开发 REST Web 服务的博客、文章和教程，这些应该很容易理解。

在 android 端，您可以对 REST 请求进行编程，也可以使用提供这些功能的现有库，例如[Spring Mobile](http://www.springsource.org/spring-mobile/)

# mysql - 在mysql中插入条件

> ID：11482026
> 
> 赞同：0
> 
> 时间：2012-07-14T07:52:00.023
> 
> 标签：mysql

在数据库表中，我有：患者表、PatientBasicInfomation 表、PatientImageFindings 表.. 我有多个问题取决于这个设计..（*请注意，我是 DB 的初学者*）1）如果我为每个患者都有一个 ID ..所以根据数据库概念 PatientBasicInfomation，PatientImageFindings 应该有这个键（ID）作为外键？！

2）在患者表中，我应该通过使用他们的私钥来引用 PatientBasicInfomation、PatientImageFindings，以便它们将作为外键在患者表中？！我想对了吗……

3）现在我的大问题：我想在 PatientImageFindings 表中插入一条记录，但条件是 ID + Date（其中 Date 是 PatientImageFindings 表中的一个重要字段，我不知道是否应该将其作为私钥。 .)，我怎么能在我的java类中做这个插入语句..（条件下的插入）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T08:08:17.943

您想要做的是`UNIQUE`跨多个列添加约束。

这个问题提供了一个答案：
[如何为 MySQL 中的多个列指定唯一约束？](https://stackoverflow.com/questions/635937/how-do-i-specify-unique-constraint-for-multiple-columns-in-mysql)

```
alter table votes add unique index(user, email, address); 
```

除非您有其他原因，否则您应该在数据库级别强制执行此操作，并在尝试`INSERT`s 后出现异常时处理它们。

# ruby-on-rails - 解析哈希数组？

> ID：11482027
> 
> 赞同：0
> 
> 时间：2012-07-14T07:52:14.567
> 
> 标签：ruby-on-rails, ruby, parsing, hash, gem

这是一个示例哈希（每个查询最多 10 个）

```
parsed_response = [{"id"=>3, "pic"=>"/images/icons/market.png", "url"=>"https://angel.co/mobile-4", "name"= >"Mobile", "type"=>"MarketTag"}, {"id"=>12, "pic"=>"/images/icons/market.png", "url"=>"https://angel .co/enterprise-software", "name"=>"Enterprise Software", "type"=>"MarketTag"}, {"id"=>10, "pic"=>"/images/icons/market.png ", "url"=>"https://angel.co/saas", "name"=>"SaaS", "type"=>"MarketTag"}, {"id"=>841, "pic"= >"/images/icons/market.png", "url"=>"https://angel.co/software","名称"=>"软件", "类型"=>"MarketTag"}, {"id"=>263, "pic"=>"/images/icons/market.png", "url"=>"https ://angel.co/restaurants-2", "name"=>"Restaurants", "type"=>"MarketTag"}, {"id"=>376, "pic"=>"/images/icons/ market.png", "url"=>"https://angel.co/productivity-software", "name"=>"生产力软件", "type"=>"MarketTag"}, {"id"=> 942, "pic"=>"/images/icons/market.png", "url"=>"https://angel.co/embedded-hardware-and-software", "name"=>"嵌入式硬件和软件”，“类型”=>“市场标签”}，{"id"=>291, "pic"=>"/images/icons/market.png", "url"=>"https://angel.co/meeting-software", "name"=>"会议软件", "type"=>"MarketTag"}, {"id"=>13764, "pic"=>"/images/icons/market.png", "url"=>"https://angel.co /hardware-software", "name"=>"Hardware + Software", "type"=>"MarketTag"}, {"id"=>2983, "pic"=>"/images/icons/market.png" , "url"=>"https://angel.co/software-compliance", "name"=>"软件合规性", "type"=>"MarketTag"}]https://angel.co/meeting-software", "name"=>"会议软件", "type"=>"MarketTag"}, {"id"=>13764, "pic"=>"/images/ icons/market.png", "url"=>"https://angel.co/hardware-software", "name"=>"硬件 + 软件", "type"=>"MarketTag"}, {"id "=>2983, "pic"=>"/images/icons/market.png", "url"=>"https://angel.co/software-compliance", "name"=>"软件合规性", “类型”=>“市场标签”}]https://angel.co/meeting-software", "name"=>"会议软件", "type"=>"MarketTag"}, {"id"=>13764, "pic"=>"/images/ icons/market.png", "url"=>"https://angel.co/hardware-software", "name"=>"硬件 + 软件", "type"=>"MarketTag"}, {"id "=>2983, "pic"=>"/images/icons/market.png", "url"=>"https://angel.co/software-compliance", "name"=>"软件合规性", “类型”=>“市场标签”}], "url"=>"https://angel.co/hardware-software", "name"=>"硬件+软件", "type"=>"MarketTag"}, {"id"=>2983, " pic"=>"/images/icons/market.png", "url"=>"https://angel.co/software-compliance", "name"=>"软件合规性", "type"=>"市场标签"}], "url"=>"https://angel.co/hardware-software", "name"=>"硬件+软件", "type"=>"MarketTag"}, {"id"=>2983, " pic"=>"/images/icons/market.png", "url"=>"https://angel.co/software-compliance", "name"=>"软件合规性", "type"=>"市场标签"}]

```

我在我创建的 gem 中尝试了很多方法。

第一种方法是创建一个特殊的类并将每个数组元素映射到该类：

```
class IDSearch
  attr_accessor :id, :thumbnail, :url, :name, :type
  def initialize(the_hash)
    @id   = the_hash['id']
    @url  = the_hash['url']
    @pic  = the_hash['pic']
    @name = the_hash['name']
    @type = the_hash['type']
  end
end 
```

我将根据尝试列出它们：

```
Attempt 1:
IDSearch.new(parsed_response)

Attempt 2:
parsed_response.map {|t| IDSearch.new(t)}

Attempt 3:
parsed_response.each do |hsh|
SimpleAngel::IDSearch.new(hsh)
end

Attempt 4:
10.times do |i|
  instance_variable_set "@response_#{i}", parsed_response[i]        
end

Attempt 5 (getting desperate)
@response0 = parsed_response[0]
@response1 = parsed_response[1]
@response2 = parsed_response[2]
@response3 = parsed_response[3]
@response4 = parsed_response[4]
@response5 = parsed_response[5]
@response6 = parsed_response[6]
@response7 = parsed_response[7]
@response8 = parsed_response[8]
@response9 = parsed_response[9]

Attempt6: (this time inside of a rails controller)

search_object = SimpleAngel::Search.new
responses = search_object.id_search(params[:query], params[:type])
responses.each_with_index do |response, i|
  u      = Idquery.new
  u.name = response[i]['name']
  u.id   = response[i]['id']
  u.url  = response[i]['url']
  u.type = response[i]['type']
  u.pic  = response[i]['pic']
  u.save
end 
```

这些方法都没有产生可预测的、连贯的、可行的反应。

不仅仅是一个实际的解决方案，我正在寻找关于我的想法如何存在缺陷的线索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T10:17:21.837

在 Attempt1 中，您期望 中的散列`IDSearch.new`并实际传递一个数组。如果您改为：

```
parsed_response.each {|hash| p IDSearch.new(hash)} 
```

它工作得很好。

```
@id=3, @url="https://angel.co/mobile-4", @pic="/images/icons/market.png", @name="Mobile", @type="MarketTag" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T21:34:29.637

```
require 'ostruct'
parsed_response.map {|resp| OpenStruct.new(resp)} 
```

消除了对特定类的需求。

# php - 有没有办法查看某人何时停止使用 PHP 或 JavaScript 观看您的视频？

> ID：11482030
> 
> 赞同：1
> 
> 时间：2012-07-14T07:52:55.000
> 
> 标签：php, video, web-analytics

如果我要在网页上播放视频，并且有人观看但中途停止，有没有办法查看他们停止的位置？（即 42 秒。）是使用 HTML5、PHP、JavaScript 还是它们的任何组合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T08:08:49.403

这可以通过 HTML 5 和 JavaScript 实现。您需要为视频的`pause`事件注册一个事件处理程序，然后读取`currentTime`播放属性：

```
<video id="myVideo" width="320" height="240" controls="controls">
  <source src="movie.mp4" type="video/mp4" />
  Your browser does not support the video tag.
</video>

<script type="text/javascript">
document.getElementById("myVideo").addEventListener("pause", function() {
    alert("Video paused at " + vid.currentTime);
});
</script> 
```

`currentTime`将是视频暂停的时间（以秒为单位）。

当然，`pause`如果他们在视频结束之前离开页面，则不会触发该事件。

# mysql - 在 MySQL 中查找字符串中出现的子字符串？

> ID：11482032
> 
> 赞同：3
> 
> 时间：2012-07-14T07:53:02.690
> 
> 标签：mysql

我正在使用此查询从我的数据库中获取结果：

```
MATCH(`Text2`) AGAINST ('$s') 
```

我只想在字符串完全匹配时获得结果，例如在 google 上搜索引号“”时。

如何使用 Match/MySQL 做到这一点？

EG：查询是“ab cd”

```
ID | Text
1    ab cd
2    aab cda
3    aab a cd 
```

应返回第 1 行和第 2 行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T07:57:02.440

`SELECT FROM your_table WHERE Text2 LIKE '%yourstring%';`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T08:43:00.713

试试这个::如果你需要野外搜索，不管情况如何::

```
SELECT FROM LOWER(mytable) WHERE LOWER(Text2) LIKE LOWER('%yourstring%'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T08:52:53.227

您也可以`REGEXP`用于此目的。

```
SELECT *
FROM `tableName`
WHERE `columnName` REGEXP 'ab cd'; 
```

# c++ - GUI 在此基于对话框的应用程序中几秒钟后冻结

> ID：11482037
> 
> 赞同：0
> 
> 时间：2012-07-14T07:53:26.793
> 
> 标签：c++, winapi

我是一个初学者，试图理解 GUI 在几秒钟后冻结的原因。尝试运行它，看看我的意思.. 它不应该永远打印 Hello1 Hello2 Hello3 Hello4 和 Hello5 吗？需要明确的是：停止工作的是 SetWindowText()，所以冻结的是 GUI。我的意思是，应用程序一直在运行，只是“显示文本”部分崩溃了。我知道这一点，因为我在发布之前对其进行了调试。那我错过了什么？为什么会结冰？你知道吗？提前致谢

这是main.cpp：

```
#define WIN32_LEAN_AND_MEAN
#include <windows.h>
#include "resource.h"

using namespace std;

HINSTANCE hInst;

void sayHello(HWND handle)
{
    BOOL working = true;
    while (working)
    {
        SetWindowText(handle, "Hello1");
        SetWindowText(handle, "Hello2");
        SetWindowText(handle, "Hello3");
        SetWindowText(handle, "Hello4");
        SetWindowText(handle, "Hello5");
    }
}

BOOL CALLBACK DialogProc(HWND hwndDlg, UINT uMsg, WPARAM wParam, LPARAM lParam)
{
    switch(uMsg)
    {
        case WM_INITDIALOG:
            return TRUE;

        case WM_CLOSE:
            EndDialog(hwndDlg, 0);
            return TRUE;

        case WM_COMMAND:
            switch(LOWORD(wParam))
            {
                case IDC_BTN_QUIT:
                    EndDialog(hwndDlg, 0);
                    return TRUE;

                case IDC_BTN_TEST:
                    HWND handle = GetDlgItem(hwndDlg, 1003);
                    sayHello(handle);
                    return TRUE;
            }
    }

    return FALSE;
}

int APIENTRY WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nShowCmd)
{
    hInst = hInstance;

    return DialogBox(hInstance, MAKEINTRESOURCE(DLG_MAIN), NULL, (DLGPROC)DialogProc);
} 
```

这是资源.h：

```
#include <windows.h>

#define DLG_MAIN 101
#define IDC_BTN_TEST 1001
#define IDC_BTN_QUIT 1002
#define ID_CONTROLSTATIC 1003 
```

这是resource.rc：

```
#include "resource.h"

DLG_MAIN DIALOGEX 6, 5, 194, 106

CAPTION "Test Application"

BEGIN
  CONTROL "&Test", IDC_BTN_TEST, "Button", 0x10010000, 138,  5, 46, 15
  CONTROL "TEXT HERE", ID_CONTROLSTATIC, "Static", 0x10010000, 35, 35, 50, 8
  CONTROL "&Quit", IDC_BTN_QUIT, "Button", 0x10010000, 138, 29, 46, 15
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T10:02:26.030

所有 Windows GUI 程序的基本结构都是一个消息循环，类似于：

```
while (GetMessage(&msg, NULL, 0, 0))
{
    TranslateMessage(&msg);
    DispatchMessage(&msg);
} 
```

您的程序在`GetMessage`调用中等待直到消息到达，然后处理该消息（最终在您的窗口或对话框过程中结束），然后返回`GetMessage`等待下一条消息。

在您的程序中，消息循环隐藏在对 的调用中`DialogBox`，但它就在那里。

当您单击`IDC_BUTTON_TEST`该功能时，`sayHello`永远不会返回。所以控制永远不会返回到消息循环，所以你不再处理任何消息，你的程序似乎已经挂起。

如果您想与消息循环并行工作，您至少有两种选择：

1.  创建一个计时器。当您收到一条`WM_TIMER`消息时，您会做一些工作（例如在列表中显示下一个字符串），然后返回消息循环并等待更多消息。您在每个计时器滴答声上所做的工作越多，您的应用程序的响应速度就越慢。
2.  创建另一个线程。这可以在不干扰消息循环的情况下连续运行，但可能会更复杂，因为您必须担心线程之间的同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T08:25:58.690

你在这里有一个无限循环：

```
void sayHello(HWND handle)
{
    BOOL working = true;
    while (working)
    {
        SetWindowText(handle, "Hello1");
        SetWindowText(handle, "Hello2");
        SetWindowText(handle, "Hello3");
        SetWindowText(handle, "Hello4");
        SetWindowText(handle, "Hello5");
    }
} 
```

添加退出循环的条件，例如`if(something) working = false;`

如果您希望它永远保持打印，您至少需要在命令之间添加一个计时器，因为它打印消息的速度非常快，以至于您不会真正告诉它正在发生。

# tfs - 需要多少个团队项目以及选择哪个模板

> ID：11482039
> 
> 赞同：1
> 
> 时间：2012-07-14T07:53:47.870
> 
> 标签：tfs, tfs-2010

我们想使用 TFS2010

在我的公司，有一个团队同时开发多种产品。每个产品都有一个视觉工作室解决方案。我们可以有以下场景：

客户要求 1 涉及在产品 A 中添加多个功能，必须在 5 月交付 客户要求 2 涉及在产品 A 和 B 中添加多个功能，必须在 8 月交付 客户要求 3 涉及在产品 A 和 C 中添加多个功能，必须交付8 月 客户要求 4 涉及在产品 B 中添加多个功能，必须在 10 月交付 客户要求 5 涉及在产品 A 和 B 中添加多个功能，必须在 10 月交付

开发人员团队很小（10 人），可以开发产品 a、b 或 c，即使一些开发人员比产品 B 更了解产品 A 等等。

实际上，我们有近 10 种产品。有时我们有热修复，我必须跟踪所有活动。

你有什么建议吗 ？一个或多个团队项目？如果是一个团队项目，您推荐哪种结构？敏捷还是 CMMI 模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:30:59.550

选择哪个项目模板的决定取决于您的开发过程，因为模板代表它。

CMMI 模板比敏捷模板具有更多的工作项类型（错误、任务）字段，并且更正式。花点时间想想你的实际或未来的发展过程，看看[这里](http://msdn.microsoft.com/en-us/library/ms400752)以获得一个概述。

您所描述的场景是通过分支策略实现的，请查看[ALM Ranger 分支指南](http://vsarbranchingguide.codeplex.com/)

我会制作一个团队项目集合（因为无法对团队项目集合进行分支）。

我会创建一个团队项目，并使用区域、迭代和团队查询来组织产品。

我的决定的原因

*   每个团队项目都有其版本控制和共享点站点
*   你是一个小团队，负责所有项目
*   每个团队项目的管理开销

[在这里](http://blog.hinshelwood.com/project-of-projects-with-team-foundation-server-2010/)，您可以找到一些很好的图片和演练，用于处理不同产品的一个团队项目。

# javascript - 通过 javascript 访问浏览器历史记录以实现自定义后退和前进按钮

> ID：11482041
> 
> 赞同：1
> 
> 时间：2012-07-14T07:53:59.853
> 
> 标签：javascript, jquery

我的页面上有自定义的后退和前进按钮。

仅当 history.back 页面来自我的网站时，才应启用后退按钮。

同样，仅当 history.forward 页面属于我的网站时，才应启用转发按钮。

document.referrer 返回上一页的名称。

如何获取转发页面的名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T08:04:47.310

请参阅此处[http://www.w3schools.com/jsref/obj_history.asp](http://www.w3schools.com/jsref/obj_history.asp)。没有标准的方法来做你想要达到的目标。

一个建议是实现你自己的历史链......

对于跟随的每个链接（不包括后退和前进），您将一个项目添加到后退堆栈并清除前进堆栈。

单击返回时，您从返回堆栈中弹出以获取您的 url。您将此项目推送到前向堆栈。

单击前进时，您会从前进堆栈中弹出以获取您的网址。您将此项推送到后台堆栈。

一种不同的方法可能是使用面包屑导航而不是历史导航。这需要一个更有条理的网站。

# php - Codeigniter 选择框不填充会话值

> ID：11482044
> 
> 赞同：0
> 
> 时间：2012-07-14T07:54:10.070
> 
> 标签：php, codeigniter, session, select

我遇到`session`了 Codeigniter 的问题。

我有一个包含选择框的表单来执行搜索。当表单被提交时，搜索条件存储在会话中，一旦用户返回表单，它将用于填充表单字段。在我的本地机器上，它工作正常。但在服务器中，它不适用于选择框。仅清除浏览器缓存后，它就可以工作。
我刚刚回应了会话变量。在表格之外。它拥有正确的数据。在 Firebug 中，它也显示正确的值 - `<option selected="selected">foobar</option>`。但我在选择框中看不到选定的值。
仅供参考 - 我正在使用以下 CI 表单助手打印选择框。

```
<?php echo form_dropdown('product', $search_options['product_list'], 
      stripslashes($this->session->userdata('qes_product')), 
      'id="qes_product" tabindex="1"'); 
?> 
```

任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T09:47:45.213

1) 确保您为会话使用数据库存储而不是 cookie。Cookie 的大小有限，如果您做错了什么，即不替换值而是不断将它们添加到会话中，那么它可能会被填满。这是您应该研究的其他内容（您在会话中存储的内容）

2) 不要在你的视图中使用 $this->session。将所有内容存储在会话中的数组（如 $formdata）中，然后在控制器中检索它并将其传递给您的视图。

您可以使用您的表单访问它`$formdata['ques_product']`

如果以上没有帮助，请尝试更改`sess_expire_on_close`会话配置中的值。CI中似乎有一个奇怪的错误。

祝你好运！

# objective-c - 无法检测到 MPMoviePlayerDidExitFullscreenNotification

> ID：11482045
> 
> 赞同：6
> 
> 时间：2012-07-14T07:54:14.373
> 
> 标签：objective-c, ios, mpmovieplayercontroller, mpmovieplayer

在我的项目中，我曾经`MPMoviePlayerController`从 http url 流式传输视频。它播放全屏。播放视频时，如果您点击“完成”按钮，视频会停止并消失，但问题是；如果您捏合以关闭视频屏幕，视频屏幕会消失但仍会播放，视频声音会继续播放。

我试图检测退出全屏通知并手动停止视频，但它不起作用。我的`moviePlayerDidExitFullScreen`方法没有调用。

为了控制如果我以正确的方式收到通知，我尝试收到另一个通知：`MPMoviePlayerPlaybackStateDidChangeNotification`，它正在工作。它调用视频启动的方法。

我搜索了许多论坛和 Apple 文档，但找不到足够的信息。

这是我打开全屏视频并检测退出全屏的代码：

```
- (void)openFullVideo
{
    NSString* path = @"http://trtvizyon.mysys.com/test/leyla_ile_mecnun.mp4";
    NSURL *fileURL = [NSURL URLWithString:path];
    MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL:fileURL];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayerDidExitFullScreen:) name:MPMoviePlayerDidExitFullscreenNotification object:nil];

    player.controlStyle = MPMovieControlStyleDefault;
    player.movieSourceType = MPMovieSourceTypeStreaming;

    [self.view addSubview:player.view];

    [player setFullscreen:YES animated:YES];

    [player play];

}

- (void) moviePlayerDidExitFullScreen:(id)sender {
    NSLog(@"moviePlayerDidExitFullScreen");
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-14T09:07:33.580

好的，我用你的代码玩了一会儿，最后把那个小虫子打死了。

您的第一个问题是没有保留播放器对象（假设您使用的是 ARC，如果没有，则跳过此步骤）。因此，只需确保将其保留为实例变量，例如：

```
//Header File
@interface ViewController : UIViewController {
    MPMoviePlayerController* _player;
}

// Implementation File
- (void)openFullVideo {
    // ...
    _player = player;
} 
```

现在，如果这行得通，那就太好了！但是我在苹果方面遇到了一个可怕的未解决的错误：

`An AVPlayerItem can occupy only one position in a player's queue at a time`

要解决此问题，请这样做：

```
NSString* path = @"http://trtvizyon.mysys.com/test/leyla_ile_mecnun.mp4";
NSURL *fileURL = [NSURL URLWithString:path];
MPMoviePlayerController *player = [[MPMoviePlayerController alloc] init];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayerDidExitFullScreen:) name:MPMoviePlayerDidExitFullscreenNotification object:nil];

player.controlStyle = MPMovieControlStyleDefault;
player.movieSourceType = MPMovieSourceTypeStreaming;

[self.view addSubview:player.view];

[player setContentURL:fileURL];
[player setInitialPlaybackTime:-1.f];
[player setFullscreen:YES animated:YES];
[player prepareToPlay];
[player play];

_player = player; 
```

应该这样做！

**其他一些友好的建议：**

*   确保在再次播放电影之前将自己从 NSNotificationCenter 中移除。
*   我建议添加类似的东西`if (_player != nil)`以避免重新创建对象。

# html - z-index 溢出

> ID：11482047
> 
> 赞同：2
> 
> 时间：2012-07-14T07:54:29.150
> 
> 标签：html, css

我有以下 HTML 标记

```
<div id="main">
 <div id="div1" style="position:relative;"></div>
 <div id="div2" style="z-index:-1; position:relative; overflow:auto; height:500px;"></div> 
</div> 
```

在`div2`我动态加载数据时，内容可能会超过 div 的高度，所以我使用了一个`overflow:auto`属性来显示滚动条。问题是滚动条出现在所有浏览器中，但它只在 IE8/9、FireFox 和 Chrome 中工作。在其他浏览器中，您会看到滚动条，但没有功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T08:03:47.070

您的 div2 的 z-index 为 -1。所以它落后了。这就是为什么它不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T07:11:26.053

我有一个类似的问题，发现负 z-index 确实是问题，正 z-index 是解决方案。尝试将 div2 的 z-index 设置为 0 或某个正值 X，然后将其他元素的 z-index 设置为大于 0 或 X 的 z-index。负 z-index 会导致项目“低于” " 鼠标交互的级别，因此新的 z-indicies 将导致 div2 落后于具有更高 z-index 的其他内容，同时仍允许鼠标交互。

有关更多详细信息，请参阅此问题： [阻止鼠标交互的奇怪 z-index 行为：错误还是正常？](https://stackoverflow.com/questions/5024854/weird-z-index-behaviour-preventing-mouse-interactions-bug-or-normal)

# iphone - 来自 UIWebView 中的按钮的 Xcode 4.3 在 safari 中打开相同的 url

> ID：11482053
> 
> 赞同：0
> 
> 时间：2012-07-14T07:55:34.627
> 
> 标签：iphone, ios, xcode, uiwebview

我对 Xcode 比较陌生，我已经开始构建一个使用`UIWebView`. 为了使其符合 App Store 提交，Apple 更喜欢您使用 Safari。为了克服这个问题，我想在我的`UIWebView`导航中添加一个按钮，单击该按钮将在 Safari 中打开相同的 url。在 Twitter 应用程序中可以看到一个例子；他们有一个按钮，可以打开当前`UIWebView`在 Safari 窗口中查看的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T07:59:03.593

您可以使用`UIWebViewDelegate`' 方法

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
    if iWantToOpenThisURLInSafari([request URL]) {
        [UIApplication openUrl:[request URL]];
        return NO; // tell the webView to not navigate to the URL, I'm handling it
    } else {
        return YES;
    }
}

- (BOOL)iWantToOpenThisURLInSafari:(NSURL* url) [
    // you just have to fill in this method.
    return NO;
} 
```

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UIWebViewDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UIWebViewDelegate)

编辑：@PaulGraham 要求的更多细节

```
// You have a pointer to you webView somewhere
UIWebView *myWebView;

// create a class which implements the UIWebViewDelegate protocol
@interface MyUIWebViewDelegate:NSObject<UIWebViewDelegate>

// in this class' @implementation, implement the shouldStartLoad..method

@implementation
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
    if iWantToOpenThisURLInSafari([request URL]) {
        [UIApplication openUrl:[request URL]];
        return NO; // tell the webView to not navigate to the URL, I'm handling it
    } else {
        return YES;
    }
}

// then, set the webView's delegate to an instance of that class

MyUIWebViewDelegate* delegate = [[MyUIWebViewDelegate alloc] init];
webView.delegate = delegate;

// your delegate will now recieve the shouldStartLoad.. messages. 
```

# r - 将数据写入R中的文件

> ID：11482055
> 
> 赞同：-2
> 
> 时间：2012-07-14T07:56:08.230
> 
> 标签：r, file-io

> **可能重复：**
> [将文本行写入 R 中的文件](https://stackoverflow.com/questions/2470248/write-lines-of-text-to-a-file-in-r)

有没有像 Python 或 Java 等其他语言一样将信息写入 R 中的文件？我的意思是首先打开一个要写入的文件，然后逐行写入我所做的内容。实际上，我不想先将所有数据放入矩阵或列表中。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T08:10:42.210

你想要`?connections`。

例如，从帮助`?file`：

```
 zz <- file("ex.data", "w")  # open an output file connection
 cat("TITLE extra line", "2 3 5 7", "", "11 13 17", file = zz, sep = "\n")
 cat("One more line\n", file = zz)
 close(zz)
 readLines("ex.data") 
```

[1]“TITLE 额外行”“2 3 5 7”“”“11 13 17”
[5]“多行”

清理：

```
 unlink("ex.data") 
```

请参阅帮助页面的另请参阅部分中的 、 、 和其他`?cat`几个`?writeLines`。`?writeBin``?connections`

您还可以附加 with `write.table`，使用其`append`参数或写入打开的连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T07:59:05.140

你可以使用`?write`. 您可以使用 逐行编写`append=TRUE`。您也`?sink`可能感兴趣。

# mysql - 如何使用mysql在给定日期按另一列查找列组

> ID：11482057
> 
> 赞同：0
> 
> 时间：2012-07-14T07:56:14.720
> 
> 标签：mysql

如何选择

```
 visiter_ip          page                 date                 page_views
   127.0.0.1           abc.php              12-7-2012                2
   214.21.45.1         daf.php              12-7-2012                1
   545.45.44.12        abc.php              12-7-2012                1
   214.21.45.1         abc.php              12-7-2012                1
   214.21.45.1         xyz.php              12-7-2012                1 
```

“214.21.45.1”，其中日期为今天，总 page_views

**例子**

```
 visiter_ip     =   page_views

         214.21.45.1     =      3             when date is 12-7-2012 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T08:08:46.490

试试这个查询：

```
SELECT visiter_ip AS visiter_ip, 
       SUM(page_views) AS page_views 
FROM <table_name> 
WHERE visiter_ip = '214.21.45.1' 
  AND date = CURDATE(); 
```

让我知道它是否有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T08:06:18.920

您的问题非常不清楚，因为不清楚您是否提供表格布局或示例数据。反正我会试试的。

```
SELECT visiter_ip, page, date, page_views FROM table WHERE visiter_ip = '214.21.45.1' and `date` = DATE(NOW()) ORDER BY page_views DESC; 
```

# jquery - 如何在中继器内使用 jquery Count 插件作为标签？

> ID：11482062
> 
> 赞同：0
> 
> 时间：2012-07-14T07:57:03.283
> 
> 标签：jquery, asp.net, label, repeater, countdown

我在中继器（DataBound 控件）中有标签。现在我想在它上面使用count Down jquery插件。实际上我想在这里做什么我有一个像“12/07/2012”这样的日期我想计算从那个日期到现在的小时数。为此，我找到了 CountDown 插件，它将使用以下代码更新时间：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
<style type="text/css">
    @import "Countdown.countdown.css";
</style>
<%--Scripts Starts from here. --%>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript" src="Countdown/jquery.countdown.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        var longWayOff = new Date();
        //longWayOff.setDate(longWayOff.getDate() + 500);
        longWayOff.setDate(longWayOff.getDate());
        var liftoffTime = new Date();
        var startYear = new Date();
        startYear = new Date(startYear.getFullYear(), 1 - 1, 1, 0, 0, 0);

        //liftoffTime.setDate(liftoffTime.getDate() + 72);
        liftoffTime.setDate(liftoffTime.getHours() + 72);
        // $('#noDays').countdown({ until: liftoffTime, format: 'HMS' });
        $('#noDays').countdown({ since: startYear, compact: true,
            format: 'HMS', description: ''
        });
    });
</script>
</head>
<body>
<form id="form1" runat="server">
<div>
<span id="noDays" class="countdown"></span>
</div> 
```

现在，当我尝试对转发器使用相同的代码时，它无法正常工作，因为它无法找到标签。然后我使用 Firebug 获取运行时 ID 并为该 ID 应用脚本，它工作正常。我的问题是我们如何在中继器内使用倒计时插件作为标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T08:14:41.777

看起来中继器在 Document.Ready 之后可以在 DOM 中搜索！您可以使用 live() 函数的帮助来触发您的计时器。

您还可以尝试查看在 Document.ready 时是否存在中继器：

```
$(document).ready(function()
 {
  jQuery.contains(document.body, $('#Repeater'));
}) 
```

# android - 表格布局视图

> ID：11482065
> 
> 赞同：0
> 
> 时间：2012-07-14T07:57:22.287
> 
> 标签：android, tablelayout

在我的应用程序中，我显示了一个表格布局。请参阅此图像“http://www.freeimagehosting.net/5yhn3”。这是我的输出。我想要的是我需要在值（14362）和那条线之间有一些 5 像素的空间，我也需要在线和 Household 之间（在第 2 列中）。我尝试了类似 textview 的东西（左右边距）但如果这样做这意味着那条线也错位了。

我的表格布局代码是：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tablelayout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:stretchColumns="*" >

    <TableRow android:id="@+id/tablerowhouse" >
        <TextView           
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Income" >
        </TextView>
        <TextView           
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"  
            android:layout_marginLeft="10dp"          
            android:text="Expense" >
        </TextView>
    </TableRow>
    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <View
            android:id="@+id/line1"
            android:layout_width="wrap_content"
            android:layout_height="1dip"
            android:layout_weight="1"
            android:background="#FF909090"
            android:padding="2dip" />
    </TableRow>

    <TableRow android:id="@+id/tablerowhouse" >
        <TextView
            android:id="@+id/text40"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:text="Household:" >
        </TextView>

        <TextView
            android:id="@+id/houseinctot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginRight="2dp"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:gravity="right"
            android:text="Household:"
             >
        </TextView>

        <View
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_marginLeft="2dp"
            android:layout_marginRight="2dp"
            android:background="#FF909090" />      

        <TextView
            android:id="@+id/text41"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"

            android:text="Household:" >
        </TextView>

        <TextView
            android:id="@+id/houseexptot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:gravity="right"
            android:text="Household:" >
        </TextView>
    </TableRow>

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <View
            android:id="@+id/line1"
            android:layout_width="wrap_content"
            android:layout_height="1dip"
            android:layout_weight="1"
            android:background="#FF909090"
            android:padding="2dip" />
    </TableRow>

    <TableRow>

        <TextView
            android:id="@+id/text42"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:text="Travel:" >
        </TextView>

        <TextView
            android:id="@+id/trlinctot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginRight="2dp"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:gravity="right"
            android:text="Travel" >
        </TextView>

        <View
            android:layout_width="1dp"
            android:layout_height="fill_parent"
            android:layout_marginLeft="2dp"
            android:layout_marginRight="2dp"
            android:background="#FF909090" />

        <TextView
            android:id="@+id/text43"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:text="Travel:" >
        </TextView>

        <TextView
            android:id="@+id/trlexptot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:gravity="right"
            android:text="Travel:" >
        </TextView>
    </TableRow>

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <View
            android:id="@+id/line1"
            android:layout_width="wrap_content"
            android:layout_height="1dip"
            android:layout_weight="1"
            android:background="#FF909090"
            android:padding="2dip" />
    </TableRow>

    <TableRow>

        <TextView
            android:id="@+id/text44"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:text="Education:" >
        </TextView>

        <TextView
            android:id="@+id/eduinctot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginRight="2dp"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:gravity="right"
            android:text="Education" >
        </TextView>

        <View
            android:layout_width="1dp"
            android:layout_height="fill_parent"
            android:layout_marginLeft="2dp"
            android:layout_marginRight="2dp"
            android:background="#FF909090" />

        <TextView
            android:id="@+id/text45"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:text="Education:" >
        </TextView>

        <TextView
            android:id="@+id/eduexptot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:gravity="right"
            android:text="Education:" >
        </TextView>
    </TableRow>

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <View
            android:id="@+id/line1"
            android:layout_width="wrap_content"
            android:layout_height="1dip"
            android:layout_weight="1"
            android:background="#FF909090"
            android:padding="2dip" />
    </TableRow>

    <TableRow>

        <TextView
            android:id="@+id/text46"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:text="Group4:" >
        </TextView>

        <TextView
            android:id="@+id/grp4inctot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginRight="2dp"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:gravity="right"
            android:text="group4" >
        </TextView>

        <View
            android:layout_width="1dp"
            android:layout_height="fill_parent"
            android:layout_marginLeft="2dp"
            android:layout_marginRight="2dp"
            android:background="#FF909090" />

        <TextView
            android:id="@+id/text47"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:text="Group4:" >
        </TextView>

        <TextView
            android:id="@+id/grp4exptot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:gravity="right"
            android:text="group4:" >
        </TextView>
    </TableRow>

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <View
            android:id="@+id/line1"
            android:layout_width="wrap_content"
            android:layout_height="1dip"
            android:layout_weight="1"
            android:background="#FF909090"
            android:padding="2dip" />
    </TableRow>

    <TableRow>

        <TextView
            android:id="@+id/text48"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:text="Group5:" >
        </TextView>

        <TextView
            android:id="@+id/grp5inctot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginRight="2dp"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:gravity="right"
            android:text="group5" >
        </TextView>

        <View
            android:layout_width="1dp"
            android:layout_height="fill_parent"
            android:layout_marginLeft="2dp"
            android:layout_marginRight="2dp"
            android:background="#FF909090" />

        <TextView
            android:id="@+id/text49"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:text="Group5:" >
        </TextView>

        <TextView
            android:id="@+id/grp5exptot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:gravity="right"
            android:text="group5:" >
        </TextView>
    </TableRow>

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
        <View
            android:id="@+id/line1"
            android:layout_width="wrap_content"
            android:layout_height="1dip"
            android:layout_weight="1"
            android:background="#FF909090"
            android:padding="2dip" />
    </TableRow>

          <TableRow  android:layout_marginTop="40px">              
              <TextView       
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Total:" >
    </TextView>

    <TextView
        android:id="@+id/totincome"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="right"
        android:layout_marginRight="10dp"
        android:text="total" >
    </TextView>  

    <TextView       
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Total:" 
       >
    </TextView>

    <TextView
        android:id="@+id/totexpense"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="right"
        android:text="total:" >
    </TextView>    
 </TableRow>

               <TableRow  android:layout_marginTop="40px">
 <TextView android:layout_width="0dp" android:layout_height="wrap_content" android:text="Balance:"  android:layout_weight="1" android:layout_marginLeft="130dp"  >
     </TextView>     
      <TextView
           android:id="@+id/balance"
           android:layout_width="0dp" android:layout_height="wrap_content" android:text="balance"  android:layout_weight="1"
        android:gravity="right"  >
     </TextView>  
 </TableRow>

</TableLayout> 
```

请帮我..

我的输出应该是这样的

```
Household:   14326 | Household:  677 
```

但我有的是：

```
Household:  14326|Household:  677 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T08:10:39.653

设置重力=中心，看这个：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tablelayout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:stretchColumns="*" >

    <TableRow android:id="@+id/tablerowhouse" >
        <TextView           
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Income" >
        </TextView>
        <TextView           
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"  
            android:layout_marginLeft="10dp"          
            android:text="Expense" >
        </TextView>
    </TableRow>
    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <View
            android:id="@+id/line1"
            android:layout_width="wrap_content"
            android:layout_height="1dip"
            android:layout_weight="1"
            android:background="#FF909090"
            android:padding="2dip" />
    </TableRow>

    <TableRow android:id="@+id/tablerowhouse" >
        <TextView
            android:id="@+id/text40"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:gravity="center"    //  <--------  Edit  This
            android:text="Household:" >
        </TextView>

        <TextView
            android:id="@+id/houseinctot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginRight="2dp"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:gravity="center"    //  <--------  Edit  This
            android:text="Household:"
             >
        </TextView>

        <View
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_marginLeft="2dp"
            android:layout_marginRight="2dp"
            android:background="#FF909090" />      

        <TextView
            android:id="@+id/text41"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
        android:gravity="center"    //  <--------  Edit  This
            android:text="Household:" >
        </TextView>

        <TextView
            android:id="@+id/houseexptot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:gravity="center"    //  <--------  Edit  This
            android:text="Household:" >
        </TextView>
    </TableRow>

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <View
            android:id="@+id/line1"
            android:layout_width="wrap_content"
            android:layout_height="1dip"
            android:layout_weight="1"
            android:background="#FF909090"
            android:padding="2dip" />
    </TableRow>

    <TableRow>

        <TextView
            android:id="@+id/text42"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:text="Travel:" >
        </TextView>

        <TextView
            android:id="@+id/trlinctot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginRight="2dp"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:gravity="right"
            android:text="Travel" >
        </TextView>

        <View
            android:layout_width="1dp"
            android:layout_height="fill_parent"
            android:layout_marginLeft="2dp"
            android:layout_marginRight="2dp"
            android:background="#FF909090" />

        <TextView
            android:id="@+id/text43"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:text="Travel:" >
        </TextView>

        <TextView
            android:id="@+id/trlexptot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:gravity="right"
            android:text="Travel:" >
        </TextView>
    </TableRow>

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <View
            android:id="@+id/line1"
            android:layout_width="wrap_content"
            android:layout_height="1dip"
            android:layout_weight="1"
            android:background="#FF909090"
            android:padding="2dip" />
    </TableRow>

    <TableRow>

        <TextView
            android:id="@+id/text44"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:text="Education:" >
        </TextView>

        <TextView
            android:id="@+id/eduinctot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginRight="2dp"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:gravity="right"
            android:text="Education" >
        </TextView>

        <View
            android:layout_width="1dp"
            android:layout_height="fill_parent"
            android:layout_marginLeft="2dp"
            android:layout_marginRight="2dp"
            android:background="#FF909090" />

        <TextView
            android:id="@+id/text45"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:text="Education:" >
        </TextView>

        <TextView
            android:id="@+id/eduexptot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:gravity="right"
            android:text="Education:" >
        </TextView>
    </TableRow>

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <View
            android:id="@+id/line1"
            android:layout_width="wrap_content"
            android:layout_height="1dip"
            android:layout_weight="1"
            android:background="#FF909090"
            android:padding="2dip" />
    </TableRow>

    <TableRow>

        <TextView
            android:id="@+id/text46"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:text="Group4:" >
        </TextView>

        <TextView
            android:id="@+id/grp4inctot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginRight="2dp"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:gravity="right"
            android:text="group4" >
        </TextView>

        <View
            android:layout_width="1dp"
            android:layout_height="fill_parent"
            android:layout_marginLeft="2dp"
            android:layout_marginRight="2dp"
            android:background="#FF909090" />

        <TextView
            android:id="@+id/text47"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:text="Group4:" >
        </TextView>

        <TextView
            android:id="@+id/grp4exptot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:gravity="right"
            android:text="group4:" >
        </TextView>
    </TableRow>

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <View
            android:id="@+id/line1"
            android:layout_width="wrap_content"
            android:layout_height="1dip"
            android:layout_weight="1"
            android:background="#FF909090"
            android:padding="2dip" />
    </TableRow>

    <TableRow>

        <TextView
            android:id="@+id/text48"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:text="Group5:" >
        </TextView>

        <TextView
            android:id="@+id/grp5inctot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginRight="2dp"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:gravity="right"
            android:text="group5" >
        </TextView>

        <View
            android:layout_width="1dp"
            android:layout_height="fill_parent"
            android:layout_marginLeft="2dp"
            android:layout_marginRight="2dp"
            android:background="#FF909090" />

        <TextView
            android:id="@+id/text49"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:text="Group5:" >
        </TextView>

        <TextView
            android:id="@+id/grp5exptot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:gravity="right"
            android:text="group5:" >
        </TextView>
    </TableRow>

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
        <View
            android:id="@+id/line1"
            android:layout_width="wrap_content"
            android:layout_height="1dip"
            android:layout_weight="1"
            android:background="#FF909090"
            android:padding="2dip" />
    </TableRow>

          <TableRow  android:layout_marginTop="40px">              
              <TextView       
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Total:" >
    </TextView>

    <TextView
        android:id="@+id/totincome"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="right"
        android:layout_marginRight="10dp"
        android:text="total" >
    </TextView>  

    <TextView       
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Total:" 
       >
    </TextView>

    <TextView
        android:id="@+id/totexpense"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="right"
        android:text="total:" >
    </TextView>    
 </TableRow>
               <TableRow  android:layout_marginTop="40px">
 <TextView android:layout_width="0dp" android:layout_height="wrap_content" android:text="Balance:"  android:layout_weight="1" android:layout_marginLeft="130dp"  >
     </TextView>     
      <TextView
           android:id="@+id/balance"
           android:layout_width="0dp" android:layout_height="wrap_content" android:text="balance"  android:layout_weight="1"
        android:gravity="right"  >
     </TextView>  
 </TableRow>
</TableLayout> 
```

# css - 在 EXTJS 中设置按钮样式

> ID：11482081
> 
> 赞同：2
> 
> 时间：2012-07-14T08:00:39.710
> 
> 标签：css, extjs4, extjs4.1

我有一个按钮。我需要将它向右对齐，使字体大小增加和加粗等。当我用谷歌搜索时，它说我应该使用`CSS`.

我如何使用`CSS`, 来设置我添加的按钮的样式？

我的问题 ：

我应该在我的应用程序中的哪里添加 CSS 文件，以及如何使用它来设置按钮样式？

```
items: [
                 {
                     xtype: 'button',
                     align: 'right',
                     text:'Assign' 
                 }
             ] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T08:22:32.430

```
items: [
                 {
                     xtype: 'button',
                     align: 'right',
                     text:'Assign',
                     cls : 'foo' 
                 }
             ] 
```

在 CSS 文件中：

```
.foo { background:black; } 
```

这会向 Button 的最外层元素添加一个 CSS 类。DOM 标记中可能涉及许多元素，因此请使用 Firebug 找出您想要设置样式的元素。Ext 文档中的更多详细信息：[http ://docs.sencha.com/ext-js/4-0/#!/api/Ext.button.Button-cfg-cls](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.button.Button-cfg-cls)

# php - 使用 PHP 创建 AS2 函数

> ID：11482086
> 
> 赞同：0
> 
> 时间：2012-07-14T08:01:29.413
> 
> 标签：php, flash, actionscript-2

是否可以使用 PHP 创建 AS2 函数？就像从 swf 文件加载 php 文件并让它 [php 文件] 发送一个字符串

```
 function test(){ 
     trace("test"); 
 } 
```

并以某种方式让 AS2 将其作为函数读取。我想这样做的原因是因为我不希望任何人在我的 flash 文件中看到我的两个好功能。我知道 SWF 加密器之类的东西，但没有一个能真正将其拒之门外。谢谢。

抱歉语法错误或这篇文章有任何问题 - 现在是凌晨 4 点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:28:41.480

我不认为这是可能的。我的意思是你可以在 POST 中从 flash 中调用并让 php 向你发送一些代码。但它会作为字符串返回，因此您必须编写一种解析器来将该字符串转换为 AS2 中的实际代码，这可能非常复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T08:32:47.530

不确定，但您可以让服务器使用 PHP 处理外部 .as 文件。因此，您的 .as 字段将作为常规 PHP 运行，并且只要其中的动作脚本代码没有问题，它应该由 Flash 作为常规 .as 与外部代码处理...您可以在 .例如，在.htaccess 文件中，使用与此类似的语句，将 .as 扩展名添加到 PHP5 处理程序：

```
AddHandler x-httpd-php5 .as 
```

# flash - 仅供观看的视频（无法下载，只能播放）

> ID：11482095
> 
> 赞同：1
> 
> 时间：2012-07-14T08:04:22.550
> 
> 标签：flash, html, video, youtube, readonly

我正在创建基于 PHP 的 Web 项目，学生可以在其中登录并观看教程。该服务是付费的，所以我想阻止从网站下载视频文件（并免费共享）。

换句话说，每个用户只能在网站上观看视频，无法下载。

为此，我正在寻找安全的基于 HTML5 或 Flash 的网络视频播放器，它不会缓存视频或在播放后删除所有临时视频文件。

我想要的是，像 youtube 一样：观看视频后删除临时文件。

有什么办法吗？有什么建议么？

从 youtube 嵌入视频并将其设为“只读”（无法下载）怎么样？！那可能吗？

# 或者

这段代码可以帮助我不缓存视频吗？

```
<!-- no cache headers -->
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="no-cache">
<meta http-equiv="Expires" content="-1">
<meta http-equiv="Cache-Control" content="no-cache">
<!-- end no cache headers --> 
```

提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T08:17:18.370

这根本不可能。您可以尝试隐藏该过程......但最终视频数据需要到达用户浏览器并且无法阻止他们存储它。如果 YouTube、Grooveshark 和众多其他大型流媒体网站无法阻止用户翻录内容，那么您将无法提出解决方案。

我的 VPN 甚至内置了一个功能，可以在媒体内容到达我的浏览器之前对其进行抓取。除此之外，还有大量专门用于翻录视频的工具、浏览器插件和网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T08:17:54.060

除了您可以提供的任何代码内保护之外，您显然还需要确保您的网站不能被目录列出！

您可能能够防止下载视频文件本身，但我看不出如何防止像 CamStudio 这样的截屏软件。是的，生成的视频和音频的质量不会很好，但他们仍然能够掌握它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T08:34:47.367

似乎比较困难。. . 用户始终可以使用程序来捕获您的流或使用屏幕捕获。

可能是以下链接可以引起一些兴趣。不确定它们是否适用于您的情况。

[http://www.adobe.com/devnet/flashmediaserver/articles/protecting_video_rtmpe.html](http://www.adobe.com/devnet/flashmediaserver/articles/protecting_video_rtmpe.html)

[http://www.adobe.com/devnet/flashmediaserver/articles/digital_media_protection.html](http://www.adobe.com/devnet/flashmediaserver/articles/digital_media_protection.html)

[http://en.wikipedia.org/wiki/Protected_Streaming](http://en.wikipedia.org/wiki/Protected_Streaming)

编辑：查看相关帖子[禁用缓存 YouTube 视频](https://stackoverflow.com/questions/3840798/disable-caching-youtube-videos)

如果您想阻止视频的非法分发，您可以尝试在视频上添加水印。

# twitter-bootstrap - Dropbox 像引导程序的登陆页面

> ID：11482098
> 
> 赞同：4
> 
> 时间：2012-07-14T08:05:12.023
> 
> 标签：twitter-bootstrap

我对 UI 的东西和 twitter-bootstrap 很陌生。[如果我想设计像Dropbox](https://www.dropbox.com/)这样的登陆页面，有人可以指导我如何从 twitter-bootstrap 开始。我浏览了引导程序的文档和示例。但是，如果有人可以特别指出我应该使用哪种类型的布局/导航/其他 div。

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-14T13:16:24.100

这种类型的布局可以通过堆叠引导网格元素来创建您在页面上看到的三个部分来轻松实现；菜单、内容、页脚。菜单项可以通过使用引导下拉菜单来实现，您只需按照您想要的方式设置它们的样式。

这是该布局的基本细分：

**HTML**

```
<div class="content">
    <div class="container">
        <div class="row">
            <div class="span12">
                ...navbar...
            </div>
        </div>
        <div class="row">
            <div class="span8 offset2">
                ...content...
            </div>
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
        <div class="span2">
            ...list menu...
        </div>
        <div class="span2">
            ...list menu...
        </div>
        <div class="span2">
            ...list menu...
        </div>
        <div class="span2 pull-right">
            ...dropup menu...
        </div>
    </div>
</div> 
```

有了这个，您可以很容易地填充元素，如下所示：

**HTML**

```
<div class="content">
    <div class="container">
        <div class="row">
            <div class="span12">
            <div class="navbar">
                <div class="navbar-inner">
                  <div class="container">
                    <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
                      <span class="icon-bar"></span>
                      <span class="icon-bar"></span>
                      <span class="icon-bar"></span>
                    </a>
                    <div class="nav-collapse">
                        <div class="btn-group pull-right">
                            <a data-toggle="dropdown" class="btn btn-simple dropdown-toggle" href="#"><i class="icon-fire"></i> Dropdown <b class="caret"></b></a>
                            <div class="dropdown-menu" style="padding: 15px; padding-bottom: 0px;">
                                <form>
                                    <input style="margin-bottom: 15px;" type="text">
                                    <input style="margin-bottom: 15px;" type="password">
                                    <input style="float: left; margin-right: 10px;" type="checkbox">
                                    <label for="user_remember_me"> Remember me</label>
                                    <input class="btn btn-primary" style="clear: left; width: 100%; height: 32px; font-size: 13px;" value ="Submit" type="submit">
                                </form>
                            </div>
                        </div>
                    </div><!-- /.nav-collapse -->
                  </div>
                </div><!-- /navbar-inner -->
              </div>
            </div>
        </div>
        <div class="row">
            <div class="span8 offset2">
                <h1>Title</h1>
                <a class="play" href="#">
                    <img src="https://www.dropbox.com/static/images/watch_a_video2.png">
                </a>
                <div class="big-btn">
                    <a href="#" class="btn btn-primary">Download</a>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
        <div class="span2">
            <ul>
                <li>Lorem ipsum dolor sit amet</li>
                <li>Consectetur adipiscing elit</li>
                <li>Integer molestie lorem at massa</li>
                <li>Facilisis in pretium nisl aliquet</li>
                <li>Nulla volutpat aliquam velit</li>
            </ul>
        </div>
        <div class="span2">
            <ul>
                <li>Lorem ipsum dolor sit amet</li>
                <li>Consectetur adipiscing elit</li>
                <li>Integer molestie lorem at massa</li>
                <li>Facilisis in pretium nisl aliquet</li>
                <li>Nulla volutpat aliquam velit</li>
            </ul>
        </div>
        <div class="span2">
            <ul>
                <li>Lorem ipsum dolor sit amet</li>
                <li>Consectetur adipiscing elit</li>
                <li>Integer molestie lorem at massa</li>
                <li>Facilisis in pretium nisl aliquet</li>
                <li>Nulla volutpat aliquam velit</li>
            </ul>
        </div>
        <div class="span2 pull-right">
            <div class="btn-group dropup pull-right">
                <a href="#" data-toggle="dropdown" class="btn btn-simple dropdown-toggle"><i class="icon-globe"></i> Inverse <span class="caret"></span></a>
                <ul class="dropdown-menu">
                    <li><a href="#">Action</a></li>
                    <li><a href="#">Another action</a></li>
                    <li><a href="#">Something else here</a></li>
                    <li><a href="#">Separated link</a></li>
                </ul>
            </div>
        </div>
    </div>
</div> 
```

在混合物中撒上一些 CSS 的爱，你就可以炖了：

**CSS** ^(非常脏的 css，仅用于演示目的)

```
.content {
    text-align:center;
    margin:0 0 60px;
}

.navbar-inner {
    background-color: transparent;
    background-image: none;
    background-repeat: no-repeat;
    box-shadow: none;
    color:black;
}

.navbar .nav > li > a {
    color:black;
    text-shadow:none;
}

.navbar .nav > li > a:hover {
    color:#333;
}

.navbar .nav li.dropdown .dropdown-toggle .caret, .navbar .nav li.dropdown.open .caret {
    border-bottom-color: #000000;
    border-top-color: #000000;
}

.btn-simple {
    background-color:transparent;
    background-image:none;
}

.big-btn {
    margin: 80px 0 108px;
}

.big-btn .btn {
    border-radius: 6px 6px 6px 6px;
    display: inline-block;
    font-size: 30px;
    line-height: 1;
    margin-bottom: 27px;
    padding: 19px 24px;
    text-align: center;
    width: 60%;
}

.navbar-inner {
    padding-left: 0;
    padding-right: 0;
}

.play {
    margin:20px 0;
    display:block;
} 
```

这是此布局运行的演示：[demo](http://jsfiddle.net/andresilich/FwF4y/1/show/) , edit [here](http://jsfiddle.net/andresilich/FwF4y/1/)。

# android - 如何 JUnit 测试 ContentResolver.notifyChange

> ID：11482104
> 
> 赞同：8
> 
> 时间：2012-07-14T08:06:18.723
> 
> 标签：android, android-contentresolver, android-testing

我正在为 a 编写测试`ContentProvider`，在`insert`我通知更改时`getContext().getContentResolver().notifyChange(mUri, null);`

我的测试类扩展了`ProviderTestCase2`。我创建了以下模拟 ContentObserver 类：

```
private class ContentObserverMock extends ContentObserver {
    public boolean changed = false;

    public ContentObserverMock(Handler handler) {
        super(handler);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onChange(boolean selfChange) {
        changed = true;
    }

    @Override
    public boolean deliverSelfNotifications() {
        return true;
    }
} 
```

这是测试用例：

```
public void testInsertNotifyContentChanges() {
    ContentResolver resolver = mContext.getContentResolver();
    ContentObserverMock co = new ContentObserverMock(null);

    resolver.registerContentObserver(CONTENT_URI, true, co);

    ContentValues values = new ContentValues();
    values.put(COLUMN_TAG_ID, 1);
    values.put(COLUMN_TAG_CONTENT, "TEST");

    resolver.insert(CONTENT_URI, values);
    assertTrue(co.changed);
} 
```

似乎`onChange`从未调用过，我也尝试`ContentObserverMock co = new ContentObserverMock(new Handler());`过相同的结果。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T09:59:27.657

`ProviderTestCase2`使用`MockContentResolver`. 检查源代码，它的`notifyChange`方法什么也没做。

```
@Override
public void notifyChange(Uri uri, ContentObserver observer, boolean syncToNetwork) {
} 
```

你的场景不能用`ProviderTestCase2`. 看看[ProviderTestCase3](http://source-android.frandroid.com/packages/apps/Browser/tests/src/com/android/browser/tests/utils/)，但它使用 android 私有包。

**编辑：**我制作了一个由新`ProviderTestCase3`类组成的库作为替代，它保持对注册的观察者的内部`ProviderTestCase2`调用。您可以使用它来测试通知更改。 [https://github.com/biegleux/TestsUtils](https://github.com/biegleux/TestsUtils)`ContentResolver.notifyChanged``ProviderTestCase3.registerContentObserver`

用法：

```
public void testInsertNotifyContentChanges() {
    ContentObserverMock observer = new ContentObserverMock(new Handler()); 
    registerContentObserver(CONTENT_URI, true, observer);
    ContentValues values = new ContentValues();
    values.put(COLUMN_TAG_ID, 1);
    values.put(COLUMN_TAG_CONTENT, "TEST");
    getMockContentResolver().insert(CONTENT_URI, values);
    assertTrue(observer.mChanged);
} 
```

别忘了`extends ProviderTestCase3<YourProvider>`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T21:30:11.017

我在不运行模拟器的情况下尽可能多地使用[Robolectric进行单元测试。](http://pivotal.github.com/robolectric/)我验证了调用 contentResolver 的更新，如下所示：

```
ShadowContentResolver contentResolver = Robolectric.shadowOf(
    service.getContentResolver());
final List<NotifiedUri> notifiedUris = contentResolver.getNotifiedUris();
assertThat(notifiedUris.get(0).uri, is(uriToVerify)); 
```

# iphone - 拉伸由贝塞尔曲线组成的椭圆以适应视图边界

> ID：11482105
> 
> 赞同：0
> 
> 时间：2012-07-14T08:06:33.327
> 
> 标签：iphone, ios, cocoa-touch, geometry, core-graphics

我在 Illustrator 中创建了一个特殊的椭圆，我需要在我的应用程序中绘制它。我使用 Qwarkee 将其转换为核心图形代码，主要使用：

```
void CGPathAddCurveToPoint (CGMutablePathRef path, const CGAffineTransform *m, CGFloat cp1x, CGFloat cp1y, CGFloat cp2x, CGFloat cp2y, CGFloat x, CGFloat y); 
```

这是代码：

```
CGMutablePathRef pPath_0 = CGPathCreateMutable();
CGPathMoveToPoint(pPath_0, NULL, 515.98,258.24);
CGPathAddCurveToPoint(pPath_0, NULL, 515.98,435.61,415.54,515.98,258.24,515.98);
CGPathAddCurveToPoint(pPath_0, NULL, 100.94,515.98,0.50,435.61,0.50,258.24);
CGPathAddCurveToPoint(pPath_0, NULL, 0.50,80.86,100.94,0.50,258.24,0.50);
CGPathAddCurveToPoint(pPath_0, NULL, 415.54,0.50,515.98,80.86,515.98,258.24);
CGPathCloseSubpath(pPath_0); 
```

![在此处输入图像描述](../Images/29cf47db4ac81eeec482da05bfec1aaf.png)

这个比例大小的椭圆的直径是 515.98。现在我想更改代码，以便无论大小如何，椭圆都会被拉伸以适合我的视图边界。端点很明显，我可以使用视图的高度和宽度来确定这一点。但是，我无法理解如何确定控制点。我是否将这些视为视图高度/视图宽度的比例？不确定我是否完全理解贝塞尔路径的数学运算，因此当视图水平或垂直拉伸时，我可以保持相同数量的曲线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T22:03:15.873

我在一个物理论坛上交叉发布了这个，一个好人给了我一个很好的解决方案：

[http://www.physicsforums.com/showthread.php?s=aff26efd9c911d2a8c29118f550b86fb&p=3996775#post3996775](http://www.physicsforums.com/showthread.php?s=aff26efd9c911d2a8c29118f550b86fb&p=3996775#post3996775)

# c# - NHibernate - 脱水属性值错误

> ID：11482106
> 
> 赞同：8
> 
> 时间：2012-07-14T08:06:38.747
> 
> 标签：c#, nhibernate

我在更新期间提交时收到错误错误脱水属性值。我已经搜索过，它看起来类似于[NHibernate: Error dehydrating property - 这到底是什么？](https://stackoverflow.com/questions/10867390/nhibernate-error-dehydrating-property-what-the-heck-is-this)唯一的区别是在提到的问题 NHibernate 抱怨**Unable to resolve property**

IssuingOffice 的值已存在于数据库中，因此它不会是引用未保存记录的问题

以下是详细的错误。

```
Test 'Tests.Services.StickerInvoiceServiceTests.update_sticker_info_succeeds' failed:
NHibernate.PropertyValueException : Error dehydrating property value for
Model.StickerInvoice.StickerIssuingOffice
----> NHibernate.TransientObjectException : object references an unsaved transient 
instance - save the transient instance before flushing or set cascade action for the property to something that would make it autosave. Type: Model.IssuingOffice, Entity: Model.IssuingOffice
at NHibernate.Persister.Entity.AbstractEntityPersister.Dehydrate(Object id, Object[] fields, Object rowId, Boolean[] includeProperty, Boolean[][] includeColumns, Int32 table, IDbCommand statement, ISessionImplementor session, Int32 index)
at NHibernate.Persister.Entity.AbstractEntityPersister.Update(Object id, Object[] fields, Object[] oldFields, Object rowId, Boolean[] includeProperty, Int32 j, Object oldVersion, Object obj, SqlCommandInfo sql, ISessionImplementor session)
at NHibernate.Persister.Entity.AbstractEntityPersister.UpdateOrInsert(Object id, Object[] fields, Object[] oldFields, Object rowId, Boolean[] includeProperty, Int32 j, Object oldVersion, Object obj, SqlCommandInfo sql, ISessionImplementor session)
at NHibernate.Persister.Entity.AbstractEntityPersister.Update(Object id, Object[] fields, Int32[] dirtyFields, Boolean hasDirtyCollection, Object[] oldFields, Object oldVersion, Object obj, Object rowId, ISessionImplementor session)
at NHibernate.Action.EntityUpdateAction.Execute()
at NHibernate.Engine.ActionQueue.Execute(IExecutable executable)
at NHibernate.Engine.ActionQueue.ExecuteActions(IList list)
at NHibernate.Engine.ActionQueue.ExecuteActions()
at NHibernate.Event.Default.AbstractFlushingEventListener.PerformExecutions(IEventSource session)
at NHibernate.Event.Default.DefaultFlushEventListener.OnFlush(FlushEvent event)
at NHibernate.Impl.SessionImpl.Flush()
at NHibernate.Transaction.AdoTransaction.Commit()
UnitOfWork.cs(39,0): at NhRepository.UnitOfWork.Commit()
StickerInvoiceService.cs(73,0): at Services.StickerInvoiceService.UpdateStickerInfo(StickerInvoice entity, IEnumerable`1& brokenRules)
Services\StickerInvoiceServiceTests.cs(131,0): at Tests.Services.StickerInvoiceServiceTests.update_sticker_info_succeeds()
--TransientObjectException
at NHibernate.Engine.ForeignKeys.GetEntityIdentifierIfNotUnsaved(String entityName, Object entity, ISessionImplementor session)
at NHibernate.Type.EntityType.GetIdentifier(Object value, ISessionImplementor session)
at NHibernate.Type.ManyToOneType.NullSafeSet(IDbCommand st, Object value, Int32 index, Boolean[] settable, ISessionImplementor session)
at NHibernate.Persister.Entity.AbstractEntityPersister.Dehydrate(Object id, Object[] fields, Object rowId, Boolean[] includeProperty, Boolean[][] includeColumns, Int32 table, IDbCommand statement, ISessionImplementor session, Int32 index) 
```

发行办公室的映射

```
<class name="IssuingOffice" table="IssuingOffice">
<id name="Id">
  <generator class ="hilo">
    <param name ="table">IdGenerator</param>
    <param name ="column">NextHigh</param>
    <param name ="max_lo">2</param>
    <param name ="where">TableKey = 'IssuingOffice'</param>
  </generator>
</id>
<version name="Version" column="Version" />
<property name ="Name" length="150" not-null="true" unique="true" />
<bag name ="IssuedStickers" table ="StickerInvoice" generic="true" inverse="true">
  <key column ="StickerIssuingOfficeId" />
  <one-to-many class ="StickerInvoice"/>
</bag> 
```

发行办公室的架构

```
CREATE TABLE IssuingOffice(
 Id   int  NOT NULL,
 Name   nvarchar (150) NOT NULL,
 Version   int  NOT NULL,
   CONSTRAINT  PK_IssuingOffice  PRIMARY KEY ( Id  ASC )
 ) 
```

StickerInvoice 的映射

```
<class name="StickerInvoice" table="StickerInvoice">
<id name="Id">
  <generator class ="hilo">
    <param name ="table">IdGenerator</param>
    <param name ="column">NextHigh</param>
    <param name ="max_lo">5</param>
    <param name ="where">TableKey = 'StickerInvoice'</param>
  </generator>
</id>
<version name ="Version" />
<property name ="RefNo" length="50" not-null="true" />
<property name ="Period" not-null="true" />
<property name ="Amount" not-null="true"/>
<property name ="DueDate" not-null="true"/>
<property name ="Penalty" not-null="true"/>
<property name ="InvoiceNo" length="50"/>
<property name ="DateIssued" />
<property name ="ReceiptNo" length="50" />
<property name ="DatePaid" />
<property name ="StickerNo" length="50" />
<many-to-one name ="Vehicle" class="Vehicle" column ="VehicleId" />
<many-to-one name ="StickerIssuedBy" class="User" column ="StickerIssuedById" />
<many-to-one name ="StickerIssuingOffice" class="IssuingOffice" column ="StickerIssuingOfficeId" /> 
```

StickerInvoice 的架构

```
CREATE TABLE StickerInvoice(
    Id int NOT NULL,
RefNo nvarchar(50) NOT NULL,
VehicleId int NOT NULL,
DateIssued datetime NOT NULL,
Period datetime NOT NULL,
Amount decimal(18, 0) NOT NULL,
DueDate datetime NOT NULL,
Penalty decimal(18, 0) NOT NULL,
InvoiceNo nvarchar(50) NULL,
ReceiptNo nvarchar(50) NULL,
DatePaid datetime NULL,
StickerNo nvarchar(50) NULL,
StickerIssuedById int NULL,
StickerIssuingOfficeId int NULL,
Version int NOT NULL,
  CONSTRAINT PK_StickerInvoice PRIMARY KEY ( Id ASC )
) 
```

我尝试了数据类型不匹配或重复属性，但没有找到。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-14T08:54:54.917

如果您更仔细地查看您的异常，您会看到以下错误：

> NHibernate.TransientObjectException ：对象引用了未保存的瞬态实例 - 在刷新之前保存瞬态实例，或将属性的级联操作设置为使其自动保存的内容。类型：Model.IssuingOffice，实体：Model.IssuingOffice

基本上，看起来您正在尝试保存`IssuingOffice`包含一个或多个 unsaved `StickerInvoice`。您需要将[级联选项](http://www.nhforge.org/doc/nh/en/index.html#example-parentchild-cascades)设置为`IssuingOffice`包映射。

```
<bag name="IssuedStickers" table="StickerInvoice" 
     generic="true" inverse="true" cascade="save-update">
  <key column="StickerIssuingOfficeId" />
  <one-to-many class="StickerInvoice"/>
</bag> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-21T07:53:43.587

我通过设置关系的多对一部分的 ReadOnly 标志解决了这个异常：

```
References(x => x.Parent).ReadOnly(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-03-09T18:49:38.103

当您尝试使用 Id = 0 保存对象时出现此错误

# java - Weka 的 PCA 运行时间过长

> ID：11482108
> 
> 赞同：10
> 
> 时间：2012-07-14T08:07:09.723
> 
> 标签：java, algorithm, machine-learning, weka

我正在尝试使用 Weka 使用 PCA 算法进行特征选择。

我的原始特征空间在 2700 个样本中包含约 9000 个属性。
我尝试使用以下代码降低数据的维度：

```
AttributeSelection selector = new AttributeSelection();
PrincipalComponents pca = new PrincipalComponents();
Ranker ranker = new Ranker();
selector.setEvaluator(pca);
selector.setSearch(ranker);
Instances instances = SamplesManager.asWekaInstances(trainSet);
try { 
    selector.SelectAttributes(instances);
    return SamplesManager.asSamplesList(selector.reduceDimensionality(instances));
} catch (Exception e ) {
            ...
} 
```

但是，它并没有在 12 小时内完成运行。它卡在了方法`selector.SelectAttributes(instances);`上。

**我的问题是：** weka 的 PCA 需要这么长的计算时间吗？还是我错误地使用了 PCA？

**如果预计运行时间较长：**
如何调整 PCA 算法以*更快*地运行？你能建议一个替代方案吗？（+ 示例代码如何使用它）？

**如果不是：**
我做错了什么？我应该如何使用 weka 调用 PCA 并获得降维？

**更新：**评论证实了我的怀疑，即花费的时间比预期的要多得多。
**我想知道**：如何在 java 中获取 PCA - 使用 weka 或替代库。
为此添加了赏金。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-03T09:29:49.397

在 WEKA 代码中深入后，瓶颈是创建协方差矩阵，然后计算这个矩阵的特征向量。即使尝试切换到稀疏矩阵实现（我使用[COLT](http://acs.lbl.gov/software/colt/)的[SparseDoubleMatrix2D](http://acs.lbl.gov/software/colt/api/cern/colt/matrix/impl/SparseDoubleMatrix2D.html)）也无济于事。

我想出的解决方案是首先使用第一种快速方法降低维度（我使用了信息增益排序器，以及基于文档频率的过滤），然后在降低的维度上使用 PCA 进一步降低它。

代码更复杂，但本质上归结为：

```
Ranker ranker = new Ranker();
InfoGainAttributeEval ig = new InfoGainAttributeEval();
Instances instances = SamplesManager.asWekaInstances(trainSet);
ig.buildEvaluator(instances);
firstAttributes = ranker.search(ig,instances);
candidates = Arrays.copyOfRange(firstAttributes, 0, FIRST_SIZE_REDUCTION);
instances = reduceDimenstions(instances, candidates)
PrincipalComponents pca = new PrincipalComponents();
pca.setVarianceCovered(var);
ranker = new Ranker();
ranker.setNumToSelect(numFeatures);
selection = new AttributeSelection();
selection.setEvaluator(pca);
selection.setSearch(ranker);
selection.SelectAttributes(instances );
instances = selection.reduceDimensionality(wekaInstances); 
```

然而，当我对估计的准确性进行交叉验证时，这种方法的得分比使用贪婪信息增益和排名器更差。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T00:59:37.587

看起来您正在使用 PCA 的默认配置，从较长的运行时间来看，它可能为您的目的做了太多的工作。

看看[PrincipalComponents](http://weka.sourceforge.net/doc/weka/attributeSelection/PrincipalComponents.html)的选项。

1.  我不确定`-D`他们是否会为您标准化，或者您是否必须自己做。不过，您希望您的数据被标准化（以均值为中心），所以我会先自己手动执行此操作。
2.  `-R`设置您想要考虑的差异量。默认为`0.95`。您的数据中的相关性可能不好，因此请尝试将其设置为较低的值，例如`0.8`.
3.  `-A`设置要包含的最大属性数。我认为默认值是所有这些。同样，您应该尝试将其设置为较低的值。

我建议首先从非常宽松的设置（例如`-R=0.1`和`-A=2`）开始，然后逐步达到可接受的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-07T22:40:23.603

最好的

对于协方差矩阵的构造，您可以使用 matlab 也使用的以下公式。它比 apache 库更快。

[![在此处输入图像描述](../Images/9a5f5c55dd3d4ec6fac4d85290d3f418.png)](https://i.stack.imgur.com/AQzpa.gif)

其中 Matrix 是一个 mxn 矩阵。(m --> #databaseFaces)

# open-source - 你最终能关闭一个开源程序吗？

> ID：11482109
> 
> 赞同：3
> 
> 时间：2012-07-14T08:07:50.763
> 
> 标签：open-source

我正在慢慢开始使用 openGL 和 C++ 构建自己的小型游戏引擎，我认为暂时将其开源会很好，问题是一旦我添加更多独特或详细的功能。我知道大多数开源软件的许可证都规定未来的版本也必须是开源的，但鉴于这将是我的程序，我是否可以最终停止使其开源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T08:14:59.843

取决于您使用的开源许可证以及您设置项目的方式。您可以使用 BSD/MIT 许可证，然后您就没有 GPL/LGPL 的病毒问题（但也没有优势）。您也可以让您的主引擎保持开放和免费，只出售您的独特功能。

有很多方法！

# security - 在 solaris 中隐藏命令的历史记录

> ID：11482110
> 
> 赞同：0
> 
> 时间：2012-07-14T08:07:54.777
> 
> 标签：security, bash, shell, solaris

完全隐藏shell的历史或阻止它记录是完全可能的吗？

我试图找出谁重命名了目录以及何时重命名。问题是我的 dba 重命名了目录并且没有记下目录的时间和日期。它可能有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T08:14:48.493

`bash`将命令条目存储在`HISTFILE`（默认情况下*`~/.bash_history`*）并具有*固定*大小的保留数量 - `HISTFILESIZE`（默认情况下*`500`*）。如果命令（一种类型）超过该数量，则这些命令的历史记录将丢失。

命令也可以被忽略，see`HISTIGNORE`以及以空格开头的命令 -see `HISTCONTROL=ignorespace`。这些永远不会存储在`HISTFILE`.

如果您使用某种日志记录机制，那么避免记录命令或阻止日志条目将取决于该特定软件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T12:31:34.000

这不依赖于 Solaris，而是真正依赖于所使用的 shell。

像传统的 Bourne shell（Solaris 10 和更早版本上的 /bin/sh）这样的一些 shell 根本不记录所有命令历史记录，所以在这种情况下你很不走运。

其他 shell 可能会根据用户配置在磁盘上记录定义数量的命令（使用 csh 的 savehist、使用 ksh 和 bash 的 HISTFILE/HISTSIZE）。ksh 实时记录历史，而 bash 在 shell 退出时记录它，因此如果 shell 突然死亡，您可能会丢失历史。Bash 还有一些设置可以防止某些命令不出现在历史记录中（HISTCONTROL、HISTIGNORE、HISTFILESIZE）。如果您有多个交互式 shell 正在运行，如果没有使用 bash 设置 histappend shell 选项，命令将会丢失。

# android - 如何保存单选按钮的状态

> ID：11482111
> 
> 赞同：3
> 
> 时间：2012-07-14T08:07:54.857
> 
> 标签：android

我制作了 4 个单选按钮，并希望在单击其中任何一个按钮时保存状态，然后想在应用程序中使用该保存的状态。我该怎么做？

```
 myOption1.setChecked(true);
        myOption2.setChecked(true);
        myOption3.setChecked(true);
        myOption4.setChecked(true); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T08:17:22.370

在您的活动中覆盖[onSaveInstanceState()](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29)和[onRestoreInstanceState()](http://developer.android.com/reference/android/app/Activity.html#onRestoreInstanceState%28android.os.Bundle%29)。

```
@Override
public void onSaveInstanceState(Bundle savedInstanceState) {
  super.onSaveInstanceState(savedInstanceState);
  savedInstanceState.putBoolean("myOption1", myOption1.isChecked());
  savedInstanceState.putBoolean("myOption2", myOption2.isChecked());
  savedInstanceState.putBoolean("myOption3", myOption3.isChecked());
  savedInstanceState.putBoolean("myOption4", myOption4.isChecked());
}

@Override
public void onRestoreInstanceState(Bundle savedInstanceState) {
  super.onRestoreInstanceState(savedInstanceState);
  myOption1.setChecked(savedInstanceState.getBoolean("myOption1"));
  myOption2.setChecked(savedInstanceState.getBoolean("myOption2"));
  myOption3.setChecked(savedInstanceState.getBoolean("myOption3"));
  myOption4.setChecked(savedInstanceState.getBoolean("myOption4"));
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-14T08:15:00.990

如果您总共只有 4 个单选按钮，您不妨将它们的“值”存储在`SharedPreferences`（持久存储）中。

例子：

```
SharedPreferences sharedPreferences = PreferenceManager.getDefaultSharedPreferences(this);
SharedPreferences.Editor shEditor = sharedPreferences.edit();

shEditor.putBoolean("checkbox_1", myOptionOne.isChecked());
shEditor.putBoolean("checkbox_2", myOptionTwo.isChecked());
shEditor.putBoolean("checkbox_3", myOptionThree.isChecked());
shEditor.putBoolean("checkbox_4", myOptionFour.isChecked());

shEditor.commit(); 
```

通过执行以下操作来使用它：

```
SharedPreferences sharedPreferences = PreferenceManager.getDefaultSharedPreferences(this);

 myOptionOne.setChecked(sharedPreferences.getBoolean("checkbox_1", false));
 myOptionTwo.setChecked(sharedPreferences.getBoolean("checkbox_2", false));
 myOptionThree.setChecked(sharedPreferences.getBoolean("checkbox_3", false));
 myOptionFour.setChecked(sharedPreferences.getBoolean("checkbox_4", false)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T08:11:48.370

将该值保存在 sharedPreferences 概念中。示例示例已放置在此处，该示例使用名为 addPreferencesFromResource() 的预定义方法，该方法将自动获取复选框值的状态并保存在首选项中。

```
 public class EditPreference extends PreferenceActivity {

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            //setContentView(R.layout.checkboxpref);
            addPreferencesFromResource(R.layout.checkboxpref);
        }
    } 
```

布局代码应该是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"

    android:key="@string/checkbox_pref"

    android:title="@string/eidt_preferences">

<CheckBoxPreference

    android:key="@string/pref_12_time_format"

    android:title="@string/time_formats"

    android:summary="@string/twelve_hour" 

    android:defaultValue="true"/>

<CheckBoxPreference

    android:key="@string/pref_show_current_location"

    android:title="@string/show_current_location"

    android:summary="@string/using_gps_network" 

    android:defaultValue="true"/>

<CheckBoxPreference

    android:key="@string/pref_display_date"

    android:title="@string/display_date"

    android:defaultValue="true"/>

</PreferenceScreen> 
```

现在您已经检索到此存储的复选框值如下：

```
SharedPreferences sharedPreference = PreferenceManager
                .getDefaultSharedPreferences(getApplicationContext());
        mTimeFormat = sharedPreference.getBoolean("pref_12_time_format", false);
        mServiceType = sharedPreference.getBoolean(
                "pref_show_current_location", false);
        mDisplayDate = sharedPreference.getBoolean("pref_display_date", false); 
```

# android - 在安卓手机上计算速度

> ID：11482114
> 
> 赞同：-9
> 
> 时间：2012-07-14T08:08:32.187
> 
> 标签：android

如何使用手机传感器或 GPS 计算速度。使用它我想计算距离和其他东西。我想知道一个人的行驶速度。即使手机在口袋里。我该怎么做呢？如果可能，请提供一些示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T08:51:01.330

这是使用 GPS 计算 Android 手机速度的示例...

```
LocationManager mlocManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        LocationListener mlocListener = new MyLocationListener();
mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,
                mlocListener);

public class MyLocationListener implements LocationListener {

        @Override
        public void onLocationChanged(Location loc) {
            loc.getLatitude();
            loc.getLongitude();

            Geocoder gcd = new Geocoder(getApplicationContext(),
                    Locale.getDefault());
            try {
                mAddresses = gcd.getFromLocation(loc.getLatitude(),
                        loc.getLongitude(), 1);

            } catch (IOException e) {

            }

            String cityName = (mAddresses != null) ? mAddresses.get(0)
                    .getLocality() : TimeZone.getDefault().getID();
            String countryName = (mAddresses != null) ? mAddresses.get(0)
                    .getCountryName() : Locale.getDefault().getDisplayCountry()
                    .toString();

            mCurrentSpeed.setText(loc.getSpeed());
        }

        @Override
        public void onProviderDisabled(String provider) {
            Toast.makeText(getApplicationContext(), "Gps Disabled",
                    Toast.LENGTH_SHORT).show();
        }

        @Override
        public void onProviderEnabled(String provider) {
            Toast.makeText(getApplicationContext(), "Gps Enabled",
                    Toast.LENGTH_SHORT).show();
        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
        }
    } 
```

# javascript - 如果需要，如何使用 css 和 javascript 将文本包装在带有 designMode 的 iframe 中？

> ID：11482115
> 
> 赞同：2
> 
> 时间：2012-07-14T08:08:38.003
> 
> 标签：javascript, css, iframe, word-wrap

有什么简单的方法可以解决这个困境吗？我已经尝试过[这种可能的解决方案](https://stackoverflow.com/questions/1638223/is-there-a-way-to-word-wrap-text-in-a-div)，但它似乎在 iframe 中不起作用。

帮助？

[JSFiddle 链接](http://jsfiddle.net/zzdZ8/)

**编辑：**我在网上搜索过自己，他们都说指定一个百分比。但我最初没有内容，我将 designMode 设置为“开”。只是为了过滤掉无用的答案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-14T09:22:15.263

哈，解决了！使用的javascript：

```
myiframe.document.body.style.wordWrap = 'break-word'; 
```

放入时做到了`window.onload`。

终于解决了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-09T11:46:43.717

在 CSS 中，您可以使用 `word-wrap: break-word;`

# php - 社交引擎中的 PHP 会话

> ID：11482118
> 
> 赞同：10
> 
> 时间：2012-07-14T08:09:02.807
> 
> 标签：php, mysql, session, socialengine

我在 mysql 的 php 页面中有这个查询：

```
mysql_query("INSERT INTO tz_todo SET text='".$text."', 
                                     position = ".$position.", 
                                     user_id=".$_SESSION['user_id'].", 
                                     view_stat=0"); 
```

我试图回显查询，结果是这样的：

```
INSERT INTO tz_todo SET text='trial text', position = 21, user_id=, view_stat=0 
```

似乎无法获取`user_id`.

并且`$_SESSION['user_id']`不在社交引擎中工作。如何纠正这个？我还在我的 xampp 中制作了一个本地主机版本，一切都很好，但是当我将它转换为社交引擎时，会话不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:21:12.180

在您使用会话对象的任何页面中，将此代码放在文件的开头：

```
if(!isset($_SESSION)){session_start();} 
```

这样，如果会话尚未启动，它将启动它；否则，如果会话已经开始，它将忽略会话开始。这很重要，因为如果会话已经启动，调用 session_start() 有时会导致错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-10T10:12:33.977

使用 session 来存储 user_id 是完全错误的。要获得 user_id 试试

`$viewer_id = Engine_Api::_()->user()->getViewer()->getIdentity();`（或 $user->getIdentity 如果您有另一个用户的对象）。

如果您仍然需要使用 session 来存储这些数据，请使用[Zend-approach](http://framework.zend.com/manual/2.1/en/modules/zend.session.storage.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-03T07:29:49.353

这就是我通过会话获取用户 ID 的方式

```
session_start();

$userID = $viewer->getIdentity();

$_SESSION['user_id'] = $userID;

echo $_SESSION['user_id']; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T10:59:05.700

> ```
> session_start(); 
> $_SESSION["test"] = "hello world"; 
> ```

```
session_start();
echo $_SESSION["test"]; 
```

上面的代码有效吗？如果没有，请检查php.ini 中的**session.save_path**

注意：要保留此变量，请记住在从会话中调用变量之前在每个 php 脚本/页面上调用 session_start()。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T07:20:35.303

Yoy 可能会忘记在页面顶部开始您的会话

> `<?php if(!isset($_SESSION)){ session_start(); } ?>`

$_SESSION['user_id'] 可能没有存储值。检查您的登录页面（基本上在登录会话变量将设置之后）或在注册天气后您为该会话变量分配了一个值..

为会话变量设置值：

> $_SESSION['user_id'] = "1234567";

# http - 请求的 URL 长度超过了此服务器的容量限制？

> ID：11482123
> 
> 赞同：2
> 
> 时间：2012-07-14T08:10:00.097
> 
> 标签：http, url

有什么方法可以检测何时超过 URL 的长度？这是在查询字符串中发送大量查询变量后引起的。可以在运行时增加吗？它似乎取决于服务器配置和 URL 的最大长度是多少？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-14T08:27:08.533

1.  在接收端，您通常会收到一个`414 Request-URI Too Long`-header。
2.  不，它不能在运行时增加。在 Apache 中，如果您将其用作网络服务器，则可以将其限制为*低于*默认 8190 字节的内容，但不能限制在*高于*默认值的内容，而无需更改源代码和重新编译。
3.  是的，它是否依赖于服务器，甚至依赖于 UA，如果您使用 运行`Suhusoin`，则`PHP`应用更多可能的规则。
4.  如果您需要询问*“网址的最大长度是多少？”* ，您实际上需要问：*“为什么这些不是 POST 值？”* .

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-08-29T10:43:07.837

如果未设置表单方法并尝试从会话中获取变量，则会出现问题。要解决此问题，请将您的表单方法设置为 method="POST"，它将起作用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-20T09:33:05.657

如果未设置表单方法并尝试从会话中获取变量，则会出现此问题。要解决此问题，请将您的表单方法设置为 method="POST"，它将起作用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-15T11:41:36.073

这个问题可能是由于 Apache 限制了客户端的 HTTP 请求行（例如）的大小和 HTTP 请求头字段的大小。因此，如果请求 URL 如此大，您将需要增加默认值。增加 Apache 配置文件中的 URI 长度限制（默认为 /etc/httpd/conf/httpd.conf ）：

> 限制请求线 16380

> 限制请求字段大小 16380

# php - PHP - 显示当前年份的多年

> ID：11482124
> 
> 赞同：-2
> 
> 时间：2012-07-14T08:10:13.427
> 
> 标签：php

我想知道是否有人可以帮助我。

我想显示一个从当前年份开始的 10 年的下拉（选择）框。

我知道显示年份是通过使用完成的

```
date("Y"); 
```

但我不确定如何自动显示之后的 10 年。

任何帮助将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T08:21:23.077

尝试：

```
 echo('<select name="year">');
    for ( $i = date("Y"); $i < date("Y")+11; $i++ )
    {
      echo('<option value="'.$i.'">'.$i.'</option>');
    }
    echo('</select>'); 
```

在此处查看结果[http://codepad.viper-7.com/8S0Ogi](http://codepad.viper-7.com/8S0Ogi)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T08:23:13.597

PHP 有大量的[日期/时间](http://www.php.net/manual/en/book.datetime.php)函数。

您已经实例化了一个[DateTime Object](http://www.php.net/manual/en/datetime.construct.php)，您将能够使用简单的[`date_add`](http://www.php.net/manual/en/datetime.add.php)或[`date_sub`](http://www.php.net/manual/en/datetime.sub.php)函数来操作任何日期或时间......

* * *

但是，对于您的情况，可以简单地迭代下拉列表中所需的年数，并简单地增加每个选项的值。

```
$yearSpan = 10;
$currentYear = date("Y");
$html = '<select id="foobar">';
for($i = $currentYear; $i<=$yearSpan; $i++) {
  $html .= "<option value='".$i."'>".$i."</option>";
}
$html .= '</select>'; 
```

那应该填充`$html`与此类似的内容-

```
<select id="foobar">
  <option value="2012">2012</option>
  <option value="2013">2013</option>
  <option value="2014">2014</option>
  ...
  <option value="2021">2021</option>
  <option value="2022">2022</option>
</select> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T08:33:03.577

你可以试试这个：

```
<select>
    <option>Select One</option>
    <?php 
        $year = date("Y");
        $yearto = date("Y")+10;
        while ($year <= $yearto)
        {
            echo "<option value='".$year."'>".$year."</option>";
            $year++;
        }
    ?>
</select> 
```

# winapi - 最小化后 TreeView 项目失去高亮颜色

> ID：11482130
> 
> 赞同：1
> 
> 时间：2012-07-14T08:11:17.683
> 
> 标签：winapi, treeview

我有简单的 win32 应用程序（不是对话框）和这个应用程序中的树视图。一切正常，但如果我在树视图中选择了项目，并且我最小化并恢复应用程序，则所选项目会将蓝色高亮颜色更改为灰色。 **如何在不使用自定义绘图的情况下纠正此问题？** 如果我在对话框中有树视图，则所选项目始终为蓝色。

代码：

```
HWND g_hTree;

// Forward declarations of functions included in this code module:
ATOM                MyRegisterClass(HINSTANCE hInstance);
BOOL                InitInstance(HINSTANCE, int);
LRESULT CALLBACK    WndProc(HWND, UINT, WPARAM, LPARAM);
INT_PTR CALLBACK    About(HWND, UINT, WPARAM, LPARAM);

HINSTANCE hInst;

int APIENTRY _tWinMain(HINSTANCE hInstance,
                     HINSTANCE hPrevInstance,
                     LPTSTR    lpCmdLine,
                     int       nCmdShow)
{
    UNREFERENCED_PARAMETER(hPrevInstance);
    UNREFERENCED_PARAMETER(lpCmdLine);

    // TODO: Place code here.
    MSG Msg;

    MyRegisterClass(hInstance);

    // Perform application initialization:
    if (!InitInstance (hInstance, nCmdShow))
    {
        return FALSE;
    }

    while(GetMessage(&Msg, NULL, 0, 0) > 0)
    {
        TranslateMessage(&Msg);
        DispatchMessage(&Msg);
    }

    return (int) Msg.wParam;
}

ATOM MyRegisterClass(HINSTANCE hInstance)
{
    WNDCLASSEX wcex;

    wcex.cbSize = sizeof(WNDCLASSEX);

    wcex.style          = CS_HREDRAW | CS_VREDRAW;
    wcex.lpfnWndProc    = WndProc;
    wcex.cbClsExtra     = 0;
    wcex.cbWndExtra     = 0;
    wcex.hInstance      = hInstance;
    wcex.hIcon          = LoadIcon(hInstance, MAKEINTRESOURCE(IDI_TREEVIEWTEST));
    wcex.hCursor        = LoadCursor(NULL, IDC_ARROW);
    wcex.hbrBackground  = (HBRUSH)(COLOR_WINDOW+1);
    wcex.lpszMenuName   = MAKEINTRESOURCE(IDC_TREEVIEWTEST);
    wcex.lpszClassName  = L"TreeViewTestClass";
    wcex.hIconSm        = LoadIcon(wcex.hInstance, MAKEINTRESOURCE(IDI_SMALL));

    return RegisterClassEx(&wcex);
}

BOOL InitInstance(HINSTANCE hInstance, int nCmdShow)
{
   HWND hWnd;

   InitCommonControls();

   hInst = hInstance; // Store instance handle in our global variable

   hWnd = CreateWindow(L"TreeViewTestClass", L"Tree View Test", WS_OVERLAPPEDWINDOW,
      CW_USEDEFAULT, 0, CW_USEDEFAULT, 0, NULL, NULL, hInstance, NULL);

   if (!hWnd)
   {
      return FALSE;
   }

   ShowWindow(hWnd, nCmdShow);
   UpdateWindow(hWnd);

   return TRUE;
}

void AddItems();

#define TVS_STYLES  (TVS_HASLINES | TVS_LINESATROOT | TVS_HASBUTTONS | TVS_SHOWSELALWAYS | TVS_INFOTIP | TVS_TRACKSELECT | WS_VSCROLL | WS_TABSTOP)
#define ID_TREEVIEW 505

LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    int wmId, wmEvent;
    PAINTSTRUCT ps;
    HDC hdc;

    switch (message)
    {
    case WM_COMMAND:
        wmId    = LOWORD(wParam);
        wmEvent = HIWORD(wParam);
        // Parse the menu selections:
        switch (wmId)
        {
        case IDM_EXIT:
            DestroyWindow(hWnd);
            break;
        default:
            return DefWindowProc(hWnd, message, wParam, lParam);
        }
        break;
    case WM_CREATE:
        {
            g_hTree = CreateWindowEx(0, WC_TREEVIEWW, L"Test_Tree_View", WS_CHILD | WS_VISIBLE | WS_BORDER | TVS_STYLES, 10, 10, 240, 480, hWnd, (HMENU)ID_TREEVIEW, NULL, NULL);
            AddItems();
        }
        break;
    case WM_PAINT:
        hdc = BeginPaint(hWnd, &ps);
        // TODO: Add any drawing code here...
        EndPaint(hWnd, &ps);
        break;
    case WM_DESTROY:
        PostQuitMessage(0);
        break;
    default:
        return DefWindowProc(hWnd, message, wParam, lParam);
    }
    return 0;
}

void AddItems()
{
    TVITEM tvi;
    HTREEITEM htSelected;
    TVINSERTSTRUCT tvinsert;   // struct to config out tree control
    HTREEITEM htParent;           // Tree item handle
    HTREEITEM htBefore;           // .......
    HTREEITEM htRoot;  

    tvinsert.hParent=NULL;          // top most level no need handle
    tvinsert.hInsertAfter=TVI_ROOT; // work as root level
    tvinsert.item.mask=TVIF_TEXT|TVIF_IMAGE|TVIF_SELECTEDIMAGE;
    tvinsert.item.pszText=L"Parent1";
    tvinsert.item.iImage=0;
    tvinsert.item.iSelectedImage=1;

    htParent = TreeView_InsertItem(g_hTree, &tvinsert);

    htRoot = htParent;
    htBefore = htParent;

    tvinsert.hParent=htParent;         // handle of the above data
    tvinsert.hInsertAfter=TVI_LAST;  // below parent
    tvinsert.item.pszText=L"Child 1";

    htParent = TreeView_InsertItem(g_hTree, &tvinsert);

    tvinsert.hParent=htParent;
    tvinsert.item.pszText=L"Child Of Child 1";

    htParent = TreeView_InsertItem(g_hTree, &tvinsert);

    tvinsert.hParent=htBefore;         // handle of the above data
    tvinsert.hInsertAfter=TVI_LAST;  // below parent
    tvinsert.item.pszText=L"Child 2";

    htParent = TreeView_InsertItem(g_hTree, &tvinsert);

    tvinsert.hParent=NULL;          // top most level no need handle
    tvinsert.hInsertAfter=TVI_LAST; // work as root level
    tvinsert.item.pszText=L"Parent2";

    htParent = TreeView_InsertItem(g_hTree, &tvinsert);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T08:45:25.237

当窗口最小化时，您的树视图控件似乎失去了焦点。您可以尝试处理[`WM_ACTIVATE`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646274%28v=vs.85%29.aspx)和使用[`SetFocus`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646312%28v=vs.85%29.aspx)手动将焦点设置到树视图控件。

# c++ - 从 C++ 中的 table.subtable 调用 lua 函数

> ID：11482132
> 
> 赞同：1
> 
> 时间：2012-07-14T08:11:34.563
> 
> 标签：c++, function, lua, lua-table

我试图从 C++ 调用一个 lua 函数，其中函数位于全局表的子表中。我使用从源代码编译的 lua 版本 5.2.*。

**Lua 函数**

```
function globaltable.subtable.hello()
 -- do stuff here
end 
```

**C++ 代码**

```
lua_getglobal(L, "globaltable");
lua_getfield(L, -1, "subtable");
lua_getfield(L, -1, "hello");
if(!lua_isfunction(L,-1)) return;
    lua_pushnumber(L, x);
    lua_pushnumber(L, y);
    lua_call(L, 2, 0); 
```

但是我无法调用它，我总是得到一个错误

> PANIC：调用 Lua API 时出现不受保护的错误（尝试索引 nil 值）

第 3 行：**lua_getfield(L, -1, "hello");**

***我错过了什么？***

附带问题：我也很想知道如何调用比这更深的函数 - 比如**globaltable.subtable.subsubtable.hello()**等。

谢谢！

* * *

这就是我用来创建全局表的方法：

```
int lib_id;
lua_createtable(L, 0, 0);
lib_id = lua_gettop(L);
luaL_newmetatable(L, "globaltable");
lua_setmetatable(L, lib_id);
lua_setglobal(L, "globaltable"); 
```

我如何创建 globaltable.subtable？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T09:20:29.870

`function`是 Lua 中的一个关键字，我猜你是如何编译代码的：

```
-- test.lua
globaltable = { subtable = {} }
function globaltable.subtable.function()
end 
```

运行时：

```
$ lua test.lua
lua: test.lua:2: '<name>' expected near 'function' 
```

也许您更改了此在线演示文稿的标识符，但检查第 2 行是否 `"subtable"`确实存在于 中`globaltable`，因为在第 3 行，堆栈顶部已经是`nil`.

**更新：**

要创建多级表，您可以使用以下方法：

```
lua_createtable(L,0,0); // the globaltable
lua_createtable(L,0,0); // the subtable
lua_pushcfunction(L, somefunction);
lua_setfield(L, -2, "somefunction"); // set subtable.somefunction
lua_setfield(L, -2, "subtable");     // set globaltable.subtable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T10:09:42.270

```
lua_newtable(L);
luaL_newmetatable(L, "globaltable");
lua_newtable(L); //Create table
lua_setfield(L, -2, "subtable"); //Set table as field of "globaltable"
lua_setglobal(L, "globaltable"); 
```

这就是我一直在寻找的。

# php - 设计通知系统

> ID：11482135
> 
> 赞同：-2
> 
> 时间：2012-07-14T08:12:00.670
> 
> 标签：php, database

研究如何创建像 facebook 这样的通知系统。我对可以做什么有一些想法，但我的朋友说了一些关于 Graphs 的使用？我正在使用 PHP，但计划最终切换到 Python 以创建一个更高效的系统，并具有更快的响应时间等。

我不能提供太多细节，因为我还不知道我在寻找什么。任何关于如何制作快速且可扩展的东西的建议都会很棒。如果我知道要研究哪些数据结构，我不介意研究数据结构。

谢谢 ：）

编辑：好的，所以也许我不清楚我想找出什么。我需要帮助弄清楚如何实现这一点的数据库/存储结构。我知道我可以使用很多 AJAX 调用等来获取信息，但我想知道如何在数百万的规模上适当地扩展它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T08:16:41.153

从你所说的看来你正在做一些新的事情。

根据个人经验，您应该尝试尽快使某些东西起作用，然后再进行优化。这样，您可以更快地获得一些东西，并降低对项目失去兴趣的风险。

Donald Knuth 对优化做了以下两个陈述：

> “我们应该忘记小的效率，比如说大约 97% 的时间：过早的优化是万恶之源”。

只需编写与存储无关的通知系统，现在将它们作为关系存储在数据库表中，并在将来替换为更有效的东西，如果有的话。

您不应该在原型设计阶段花费太多精力进行优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T08:24:39.283

我的网站上有一个通知系统。我使用 jquery 和 ajax。它通过我的服务器从 php 页面中提取所有信息，并且不需要刷新页面来获取最新信息。

就像@Prody 说的那样，制作一个小型工作系统，然后向其中添加内容，然后对其进行优化，这就是我所做的，而且效果很好。

我建议先制作一个（设计的）模型，他们认为我想要它做什么？第二次尝试将它们构建到其中，然后如果您不喜欢它，请再试一次？这就是我所做的，但还有很多事情要做。

如果您必须知道我每 3 秒发送一次 ajax 请求以获取好友请求、电子邮件和其他通知

而且这也不是一个真正的问题，可能会得到负票，因为这不是一个“真正的问题”

# java - @EJB 注释使 servlet 崩溃

> ID：11482138
> 
> 赞同：0
> 
> 时间：2012-07-14T08:12:51.147
> 
> 标签：java, servlets, ejb

我的 serlvet 中有这样的 @EJB 注释

```
import javax.ejb.EJB;
import stateless.Staff;
public class DisplayStaff extends HttpServlet 
{
    private static final long serialVersionUID = 1L;

        @EJB
        private StaffBean Staff_bean;
        ....
} 
```

如果没有该注释及其声明，servlet 可以工作并被调用。使用注释我得到错误

```
root cause

com.sun.enterprise.container.common.spi.util.InjectionException: Error creating managed object for class: class controllers.DisplayStaff

root cause

com.sun.enterprise.container.common.spi.util.InjectionException: Exception attempting to inject Remote ejb-ref name=controllers.DisplayStaff/Stud_bean,Remote 3.x interface =stateless.StaffBean,ejb-link=null,lookup=,mappedName=,jndi-name=stateless.StaffBean,refType=Session into class controllers.DisplayStaff: Lookup failed for 'java:comp/env/controllers.DisplayStaff/Stud_bean' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming}

root cause

javax.naming.NamingException: Lookup failed for 'java:comp/env/controllers.DisplayStaff/Stud_bean' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming} [Root exception is javax.naming.NamingException: Exception resolving Ejb for 'Remote ejb-ref name=controllers.DisplayStaff/Stud_bean,Remote 3.x interface =stateless.StaffBean,ejb-link=null,lookup=,mappedName=,jndi-name=stateless.StaffBean,refType=Session' .  Actual (possibly internal) Remote JNDI name used for lookup is 'stateless.StaffBean#stateless.StaffBean' [Root exception is javax.naming.NamingException: Lookup failed for 'stateless.StaffBean#stateless.StaffBean' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming} [Root exception is javax.naming.NameNotFoundException: stateless.StaffBean#stateless.StaffBean not found]]]

root cause

javax.naming.NamingException: Exception resolving Ejb for 'Remote ejb-ref name=controllers.DisplayStaff/Stud_bean,Remote 3.x interface =stateless.StaffBean,ejb-link=null,lookup=,mappedName=,jndi-name=stateless.StaffBean,refType=Session' .  Actual (possibly internal) Remote JNDI name used for lookup is 'stateless.StaffBean#stateless.StaffBean' [Root exception is javax.naming.NamingException: Lookup failed for 'stateless.StaffBean#stateless.StaffBean' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming} [Root exception is javax.naming.NameNotFoundException: stateless.StaffBean#stateless.StaffBean not found]]

root cause

javax.naming.NamingException: Lookup failed for 'stateless.StaffBean#stateless.StaffBean' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming} [Root exception is javax.naming.NameNotFoundException: stateless.StaffBean#stateless.StaffBean not found]

root cause

javax.naming.NameNotFoundException: stateless.StaffBean#stateless.StaffBean not found

note The full stack traces of the exception and its root causes are available in the GlassFish Server Open Source Edition 3.1.2 logs. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T09:28:52.140

[容器在JNDI](http://en.wikipedia.org/wiki/Java_Naming_and_Directory_Interface)中找不到您的 bean 。

您通常应该注入对 bean 的远程或本地接口的引用，而不是 bean 本身：

```
@EJB
private StaffBeanRemote Staff_bean; 
```

但可以肯定的是，使用 JNDI 资源管理器（通常在应用程序服务器的管理控制台上）查看确切的 JNDI 名称是什么。还要确保 bean 本身已部署并运行正常（也可以在管理控制台上检查）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-09-02T10:12:21.343

将您引用的 bean 声明为静态的。

```
@EJB
private static StaffBean Staff_bean; 
```

希望这有效。谢谢

# haskell - 将 Haskell Web 应用程序部署到低规格服务器

> ID：11482140
> 
> 赞同：7
> 
> 时间：2012-07-14T08:13:02.707
> 
> 标签：haskell, debian, ghc, web-deployment, cross-compiling

我正在寻找一种在低规格玩具服务器上部署 Haskell Web 应用程序的方法。服务器规格：

*   操作系统：debian stable（挤压）i386
*   CPU：1 GHz 奔腾 IV
*   内存：512 MB
*   存储：512 MB 闪存（安装在`/var`）、4 GB USB 闪存（安装在`/`）

服务器运行良好，流量不大（主要由我自己、朋友和家人使用），而且我可以在客厅运行它，因为它完全无声且耗电量很少（空闲时大约 10 W , 40 W 峰值）。

很明显，我想避免安装整个 Haskell 平台并在服务器上编译——我很快就会耗尽磁盘空间，而且由于存储速度慢，编译肯定需要很长时间。不过，我不能只从我的开发机器部署二进制文件，因为那个运行 debian 测试 amd64，所以二进制文件不兼容。到目前为止我的想法：

*   安装一个带有 debian/i386 的虚拟机来构建
*   找出一种在 amd64 上构建 i386 二进制文件的方法
*   在开发机器上编译为 C，将 C 源代码复制到服务器，在那里完成构建（在服务器上安装 gcc 或 clang 可能是可以接受的）
*   其他想法？

**哪一个听起来最有前途？选项 2 和 3 甚至可能吗？**

另外，我有点担心图书馆；该应用程序依赖于一些系统库，例如 libcairo；在服务器上安装它们不是问题，但我想知道，特别是对于选项 2，这是否可行（库版本等）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T11:39:25.563

没有尝试过使用haskell，但在过去有类似的要求，我发现只需使用与目标系统相同版本的debian设置一个vm最简单。意味着您无需担心库版本控制等。

# oop - 您如何设计在概念上具有大量“类型”或子类的类？

> ID：11482144
> 
> 赞同：0
> 
> 时间：2012-07-14T08:13:52.557
> 
> 标签：oop, design-patterns

为了详细说明我的问题，具体情况是这样的：

如果我有一个模拟或游戏项目，例如，一个`Monster`具有不同统计数据作为成员数据（、等）的类，`hitPointsRemaining`并且`AttackDamage`我希望拥有任意数量的具有恒定基本统计数据（、、等）的不同类型的怪物`MaxHP`，`Speed`那么我查看需要使用此类的三种方式：

1.  一个具有接口的实际类，用于在整个代码中使用 Monster 对象（例如，“ `Monster`”）
2.  不同类型怪物的实际“数据”。（概念上可能的子类？虽然我确定这不是正确的解决方案）例如：地精、龙、独眼巨人等
3.  当角色在游戏中遇到它们时代表不同怪物的实际实例化`Monster`对象（随时可能有多个相同类型的实例）

我想知道大多数设计师是如何实现这一点的。我的想法如下：

`Monster`-随着开发的进展，为每种类型的怪物创建一个类，然后再创建一个新的子类是没有意义的。这似乎是一个非常混乱且无法维护的解决方案，特别是如果不同怪物类型的数量有数百种差异，并且每种类型之间的差异还不足以保证一个新的子类

-相反，我的解决方案如下： 1\. 有一个文件可以添加到包含所有不同`Monster`类型的数据及其特征的表中。该表可以在项目开发的任何时候添加。

1.  编写一个函数以将表中的数据加载到`Monster`对象中。

2.  在程序开始时编写一个初始化调用，可能在某种`MonsterManager`类中，以解析文件并创建实例化`Monster`对象的静态或成员向量，其中所有“基本”统计信息从文件中的表中填充（即，起始生命值等）

3.  每当我想实例化`Monster`某种类型的新对象以添加到某人的军队或与某人会面时，`Monster`从向量中选择一个（随机或通过某些决定因素）创建一个新`Monster`对象，并将其从向量中复制出来

这作为一个解决方案有意义还是我出去吃午饭？如果这不是一个好的解决方案，还有什么更好的方法？

其他补充问题：

- 为将保存在向量中的怪物数据创建一个不同的类是否有意义？我想我可以有一个名为的类`MonsterData`，它可以通过上面的方法构建到一个向量中`MonsterManager`。我可以将`MonsterData`对象传递给类的构造函数`Monster`以实际创建`Monster`对象，因为许多`Monster`对象的特征将由它们的怪物类型（MaxHP、速度等）决定，而其他东西会有所不同（CurrentHP、任何随机变量， ETC）

- 我认为这种方法是可优化的，因为你可以做一些事情，比如在表中添加一个条目，指示怪物出现在哪个级别，然后让`MonsterManager`初始化函数一次只加载特定级别的所有怪物以减少内存占用） - 由于我没有为此使用，存储文本字符串作为识别对象“类型”`enum`的手段是否有意义？`Monster`也许指向从 ' 向量中复制的`Monster`（或）的指针会更好？`MonsterData``MonsterManager`

我使用游戏类比是因为它在这里对我来说最有意义，但我想知道在任何情况下这种事情的最佳设计模式。

谢谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T08:37:15.970

继承应该用于修改/添加*行为*，而不是用于改变数据值。在您的示例中，似乎每个怪物都由一组属性（HP、攻击等）定义，并且您希望在游戏中实例化不同的怪物类型。你真的不需要继承。

你在`MonsterData`课堂上走在正确的轨道上；这就是我的处理方式（主要是我认为更有意义的类的不同名称）：

```
// This is what you called MonsterData
// It describes how to create a monster of a specific type
public class MonsterDescription {
  private String type;   // eg. "Goblin"
  private int maxHitPoints;
  private int speed;
  ...
}

// This is an "active" instance of a monster
public class Monster {
  private int currentHitPoints;
  ...

  // static factory method
  public static Monster create(MonsterDescription desc) {
    ...
  }
}

// This is kind of what you called MonsterManager
// Contains a collection of MonsterDescription, loaded from somewhere
public class MonsterDescriptionRepository {
  // finds the description for a given type of monster
  public MonsterDescription find(String type) {
    ...
  }
} 
```

然后是你将如何实例化一个新怪物：

```
MonsterDescription desc = repository.find("Goblin");
Monster monster = Monster.create(desc); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T08:38:51.190

数据加载器方法似乎适合您的问题 - 它使其易于扩展。我建议为不同的功能创建子类 - 例如，创建一个 FlyingMonster 子类，它可以处理 Dragon 而不是 Goblin 或 Shark，这样你可以（尝试）避免拥有一个可以飞行/运行/潜水的 Monster 类；）

您的最后一个问题是关于外部数据键控 - 为此我认为指针方法是最好的：

*   这是独一无二的
*   它可以帮助调试
*   您可以选择使用商店中存储的值
*   它将显示与祖先的“is_a”连接

注意：我认为你不应该在这个阶段“关心”任何性能问题（将它们加载到内存中以减少内存占用），因为它通常会破坏设计

# iphone - 地理围栏指标与定位服务指标

> ID：11482146
> 
> 赞同：4
> 
> 时间：2012-07-14T08:14:07.403
> 
> 标签：iphone, ios, objective-c, mapkit, core-location

我有一个应用程序，它显示用户位置的地图并跟踪用户，直到应用程序移到后台。此时，位置管理器被告知停止更新位置，而是监视一个区域（最后一个已知位置周围 100 米半径）。在 iOS 模拟器上，它按预期工作并显示地理围栏指示器（与常规位置服务指示器相同，但只有轮廓）。在 iPhone 上，它似乎按预期工作，但显示常规位置服务图标而不是单独的轮廓。

**是否有任何原因可能会发生这种情况，模拟器和手机之间的这种差异？** 我只是想确保手机真的只使用地理围栏而没有其他服务（即确保最小的电池使用量）。

附加信息：

我需要设置后台模式来接收位置更新——这是在特定情况下（当用户启用它时）而不是一直。但是，我尝试禁用此功能，但问题仍然存在。

我用于后台应用程序的代码：

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    // Only monitor significant changes – unless specified
    if(!self.viewController.userSpecifiedToUseLocationServices)
    {
        // Stop using full location services
        [self.viewController.locationManager stopUpdatingLocation];

        // Create a boundary -- a circle around the current location
        self.viewController.currentBoundary = [[CLRegion alloc] initCircularRegionWithCenter:self.viewController.locationManager.location.coordinate radius:kSignificantLocationChange identifier:@"Current Location Boundary"];

        // Monitor the boundary
        [self.viewController.locationManager startMonitoringForRegion:self.viewController.currentBoundary desiredAccuracy:kCLLocationAccuracyBest];
    }
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
    // Stop monitoring the region
    if(self.viewController.currentBoundary != nil)
    {
        [self.viewController.locationManager stopMonitoringForRegion:self.viewController.currentBoundary];
        self.viewController.currentBoundary = nil;
    }

    // Start full location services again
    [self.viewController.locationManager startUpdatingLocation];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T07:07:36.227

嗯，首先，模拟器上的定位服务从来都不是真实设备的高保真表示。因此，我不一定假设您会在两个测试平台上看到相同的内容。

其次，根据[这个关于 stack overflow 的答案](https://stackoverflow.com/a/11059035/119114)，这听起来像是 iOS 5 上的正常行为（显示不同的指标）。

我还要警告说，地理围栏不是一种神奇的技术。该设备仍然必须使用定位服务，这会耗尽电池电量。我当然会推荐使用 Apple 的`startMonitoringForRegion:`or`startMonitoringForRegion:desiredAccuracy:`并利用他们的实现，而不是自己编写代码。但是，我也不希望电池消耗可以忽略不计。

最后，您将精度指定为`kCLLocationAccuracyBest`，而不是使用 `startMonitoringForRegion:`，或指定较低的精度要求。我不明白这**不会**影响电池性能。更高的准确性意味着操作系统要么必须获得更高质量的修复，要么更定期地轮询，或两者兼而有之。

可悲的是，没有免费的午餐:(

# java - 签署大消息并使用恢复消息进行验证

> ID：11482155
> 
> 赞同：0
> 
> 时间：2012-07-14T08:15:49.523
> 
> 标签：java, digital-signature, bouncycastle

我编写了以下代码来签署消息，然后在 Bouncy Castle 的 java 中验证它。

签名工作正常，但验证不完全工作。使用短输入消息进行验证可以正常工作，但使用大输入消息（大于 106）则无法正常工作。

换言之，当sign的输入文本的长度变大时，验证无法完成。代码打印结果：

```
signature tampered 
```

并返回部分主要消息。

```
public static String sigVer(PublicKey pu, PrivateKey pr, String original) throws Exception{
    //sign
    BigInteger big = ((RSAKey) pu).getModulus();
    byte[] text = original.getBytes();
    RSAKeyParameters rsaPriv = new RSAKeyParameters(true, big,((RSAPrivateKey) pr).getPrivateExponent());
    RSAKeyParameters rsaPublic = new RSAKeyParameters(false, big,((RSAPublicKey) pu).getPublicExponent());
    RSAEngine rsa = new RSAEngine();
    byte[] data;
    Digest dig = new SHA1Digest();
    ISO9796d2Signer eng = new ISO9796d2Signer(rsa, dig, true);
    eng.init(true, rsaPriv);
    eng.update(text[0]);
    eng.update(text, 1, text.length - 1);
    data = eng.generateSignature();

    //verify
    eng = new ISO9796d2Signer(rsa, dig, true);
    eng.init(false, rsaPublic);
    if (!eng.verifySignature(data)) {
        System.out.println("signature tampered");
    }
    try{
        if (eng.hasFullMessage()) {
            eng.updateWithRecoveredMessage(data);
            System.out.println("full");
        }
            eng.updateWithRecoveredMessage(data);
            byte[] message = eng.getRecoveredMessage();
            String ss = new String(message);
            return ss;
    }
    catch (Exception e) {
        System.out.println("can not recover");
        return null;
    }
} 
```

为什么`eng.hasFullMessage()`函数返回 false 应该如何解决这个问题？或者有人可以提出另一种解决方案来毫无问题地接受大量输入吗？

谢谢大家。

# ruby-on-rails - 当表格具有类型列时如何获取标题

> ID：11482158
> 
> 赞同：0
> 
> 时间：2012-07-14T08:16:30.420
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, ruby-on-rails-3.2

我们有一个带有单表继承的简单站点模型，`sites(id, type, title, address)`其中类型可以是“家庭”或“办公室”。当我们在 Rails 2.3.5 上时，我们可以做`Site.last.title`，它会给出标题。但是，在 Rails 3.2.6 上，当我们这样做时`Site.last.title`，我们将值作为类型列代替。

是否可以获取标题的值而不是类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T10:21:19.710

如果要获取表的最新值，最好按`created_at`列查找。默认情况下，使用`Site.last`，Rails 将通过主键 ( `ID`) 进行搜索，这在大多数情况下都可以。但是，如果出于某种原因您需要更改`ID`现有记录的 an，您的 SQL 将不会返回您期望的结果。

因此，最好执行以下操作：

```
Site.order("created_at").last.title 
```

关于您面临的问题，我认为问题与.`type`而不是`title`. 无论如何，我建议你`site`在你的控制器中设置最新的，然后在你的视图中调用它。

```
#controller
@site=Site.order("created_at").last

#view
@site.title 
```

我希望它有帮助...

# android - android manifest 格式不正确

> ID：11482164
> 
> 赞同：0
> 
> 时间：2012-07-14T08:17:22.667
> 
> 标签：android, xml, android-manifest, adt

自从我升级到 ADT 20 以来，我一直在尝试创建新的 Android 项目，但每次都会发生同样的事情：根元素之前的文档中的标记必须格式正确。我的主要活动还有另一个错误。不生成 R。

<<<<<<< 原创

```
<uses-sdk android:minSdkVersion="15" android:targetSdkVersion="15" />

<application android:label="@string/app_name"
    android:icon="@drawable/ic_launcher"
    android:theme="@style/AppTheme">

</application> 
```

```
<uses-sdk android:minSdkVersion="15" android:targetSdkVersion="15" />

<application android:label="@string/app_name"
    android:icon="@drawable/ic_launcher"
    android:theme="@style/AppTheme">

</application> 
```

```
<uses-sdk
    android:minSdkVersion="15"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".Test"
        android:label="@string/title_activity_test" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.testphonegap.MainActivity" />
    </activity>
</application> 
```

```
<application>
    <activity android:name=".Test"
        android:label="@string/title_activity_test">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

=======

```
<application>
    <activity android:name=".Test"
        android:label="@string/title_activity_test">
        <meta-data android:name="android.support.PARENT_ACTIVITY"
            android:value="android.app.ListActivity" />
    </activity>
</application> 
```

> > > > > > > 添加

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:21:28.047

好吧，我想我知道会发生什么。所以我第一次想创建这个新项目时，我错过了一些东西，所以我从 Eclipse 中删除了它，然后从我的电脑上，我重新开始，没有退出 Eclipse，所以它构建在以前的 AndroidManifest.xml 之上（即使它已被删除）。所以我删除了所有内容，进行了清理，然后重新启动 Eclipse，并且知道它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T10:32:42.150

据我所知，您必须升级到 ADT 20.0.1

# javascript - 混合内容警告 IE：重要的是什么；CSS，图像，一切？

> ID：11482171
> 
> 赞同：2
> 
> 时间：2012-07-14T08:18:37.503
> 
> 标签：javascript, image, security, internet-explorer, ssl

[我刚刚将我的网站从 http 移动到 https 并且 IE-9 开始在主页上](https://camba.tv:82)显示非安全内容警告。这个警告是可以理解的，因为我有一个对 googleapi 的 http 调用来获取 jquery 脚本。但是当我登录并进入内页时，尽管大多数图像都是通过 http 协议来自其他服务器，但 IE 没有发出警告。所以问题是：通过 https 访问站点时，通过 http 获取图像是否可以？只有css和js重要吗？还是我必须通过 HTTPS 获取所有数据？如果是这样，我的情况如何合理（通过 http 从 https 页面上的其他服务器获取图像而没有警告）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T14:48:23.877

如果您通过 HTTP 加载 CSS 和 JS，那么攻击者可以注入可执行代码。不幸的是，IE 会在 CSS 中执行 JavaScript。通过 HTTP 从同一域加载图像的问题是浏览器可能会以纯文本形式溢出会话 id，这是违反[OWASP a9](https://www.owasp.org/index.php/Top_10_2010-A9-Insufficient_Transport_Layer_Protection)的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T02:12:20.557

您可以在所有 url 上使用[协议相对 URL](http://paulirish.com/2010/the-protocol-relative-url/)以避免在 IE 中出现此问题。

基本上，不是通过使用协议的完整路径链接到 js/image/css，而是通过省略协议位并仅使用双斜杠//来链接到它。

这将具有上述所有链接从父页面继承协议的效果。

当然，这取决于您在提供不同文件形式的域上是否拥有有效的 SSL 证书。

还要注意的另一件事是，使用数据 URI 完成的页面或 CSS 中的图像也可能导致 IE 中的混合内容警告。

要找出导致问题的文件，我建议使用[Fiddler](http://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFcQFjAA&url=http://www.fiddler2.com/fiddler2/version.asp&ei=dyYCUKKsOu-UiQecjrntBw&usg=AFQjCNE9h32pBsq5Nv000r2subMLAXwJ4A)

还有另一个 SO 用户 Eric Law 写道：

[从http://www.bayden.com/dl/scriptfreesetup.exe](http://www.bayden.com/dl/scriptfreesetup.exe)安装它，您将获得不同的混合内容提示，其中显示页面上第一个不安全资源的确切 URL。该工具基本上是一个原型，你应该在完成后卸载它。它适用于 IE8，您应该以管理员身份安装它。

# html - 在线所见即所得编辑器拖动以更改表格行/列高度

> ID：11482172
> 
> 赞同：0
> 
> 时间：2012-07-14T08:19:04.900
> 
> 标签：html, wysiwyg, rich-text-editor

我正在尝试为我的网站选择一个所见即所得的编辑器，它可以拖动表格行或列的边框来更改宽度/高度，就像一些桌面文字处理器一样。我尝试了很多很棒的编辑器，比如 CKEditor、TinyMCE，但都没有这个功能。顺便说一句，这是一个 PHP 站点，因此基于 ASP 的编辑器将无法工作。有人可以给个建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T10:30:20.123

CKEditor 提供了一个调整列大小的插件：http: [//nightly.ckeditor.com/latest/ckeditor/_samples/tableresize.html](http://nightly.ckeditor.com/latest/ckeditor/_samples/tableresize.html)但高度会根据单元格的内容自动调整。

# javascript - 尝试从 ajax 静态 WebMethod 获取 asp.net(C#) 文本框文本时出错

> ID：11482176
> 
> 赞同：0
> 
> 时间：2012-07-14T08:19:25.340
> 
> 标签：javascript, jquery, asp.net, ajax, pagemethods

我在 asp.net Web 应用程序中使用 ajax htmleditor，所以我试图获取用户在编辑器中输入的文本，然后我将该文本发送回客户端 javascript 函数，该函数将在 div 中显示文本。但我收到此错误“对象引用未设置为对象的实例”。

首先，我尝试通过 javascript 访问与 htmleditorextender 链接的文本框的文本，但它对我不起作用，所以我转向了 ajax webmethod，但这次我也遇到了问题。请帮我。

```
 [System.Web.Services.WebMethod]
    public static string seteditor()
    {
        String x="";
        try
        {
            Content c = new Content();
            x = c.txteditor.Text;
        }
        catch (Exception ex) { x=ex.Message; }
        return x;
    } 
```

这里，txteditor 是与 ajaxcontroltoolkit htmleditorextender 链接的 asp:textbox 的 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T09:44:26.520

您无法将`aspx`控件放入`static`方法中。如果您从 jquery 调用静态方法意味着页面及其控件甚至不存在。您需要为您的问题寻找另一种解决方法。

编辑：

我总是将我的控制值传递给这样的页面方法：

```
Assume I have two text controls: txtGroupName and txtGroupLevel 
```

...我的 Jquery JS 将是：

```
var grpName = $("#<%=txtGroupName.ClientID%>").val();
var grpLevel = $("#<%= txtGroupLevel.ClientID %>").val();

data: "{'groupName':'" + grpName + "','groupLevel':'" +   grpLevel + "'}", 
```

其中 groupName 和 groupRights 是我的 webmethod 参数。

编辑2：

像这样包含您的脚本：

```
<script type="text/javascript" src="<%= ResolveUrl("~/Scripts/jquery-1.4.1.js") %>"></script> 
```

我建议你使用最新的 jquery 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T09:58:25.190

Web 方法不会像这样与页面对象或控件层次结构进行交互。这就是为什么它们首先是静态的。您需要将来自客户端的文本作为参数传递给 Web 方法，而不是从文本框中读取它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T11:44:10.950

这个问题在过去 18 个小时里一直折磨着我
首先，我尝试了 javascript，而不是 webmethod，然后根据 user1042031 的建议，我尝试了 jquery，然后我再次尝试了 javascript，看看用一行代码可以轻松完成它。

```
var a = document.getElementById('<%= txteditor.ClientID %>').value; 
```

阅读这篇stackoverflow文章[Getting Textbox value in Javascript](https://stackoverflow.com/questions/5039544/getting-textbox-value-in-javascript)

我向所有在这个问题上回答我的人道歉，但我在最初的搜索中没有找到那篇文章。

# asp.net - 使用 Rake 创建 IIS 网站

> ID：11482177
> 
> 赞同：5
> 
> 时间：2012-07-14T08:19:57.253
> 
> 标签：asp.net, ruby, iis, rake

我正在使用 rake 和 albacore 构建我的**.net ASP MVC**项目，但是到目前为止我无法自动化的一部分是将构建的项目部署到 IIS。目前在开发人员机器上，我让开发人员手动创建网站并将它们链接到构建生成的已发布输出文件夹。

但是，现在我们有了 CI 框设置（Teamcity），我需要自动将网站设置到 IIS，那么是否有任何 rake 任务可以在 IIS 上创建网站？我记得前一阵子看到过，但找不到。

我可以安装 IIS 6 元脚本的东西（不记得它的确切名称）和任何其他 iis 插件，该框当前运行 IIS 7.5。

== 编辑 ==

我记得不久前看到的是 InetMgr (https://github.com/typesafe/inetmgr)，它似乎有点不稳定，对我不起作用，但似乎不再受支持。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T11:34:22.637

不是最好的答案，但因为我找不到比下面建议的方法更简单的方法，所以我自己使用 appcmd 写了一些东西：

```
def create_web_site(site_name, site_location, site_port)
  delete_command = "#{$file["appcmd"]} delete site #{site_name}"
  result = system delete_command
  puts "Failed to delete site on IIS: #{$?}" unless result

  add_command = "#{$file["appcmd"]} add site /name:#{site_name} /bindings:http/*:#{site_port}: /physicalPath:#{site_location}"
  result = system add_command
  raise "Failed to add site on IIS: #{$?}" unless result

  set_app_pool_command = "#{$file["appcmd"]} set app #{site_name}/ /applicationPool:\"ASP.NET v4.0\""
  result = system set_app_pool_command
  raise "Failed to bind site to .net 4 app pool on IIS: #{$?}" unless result

  start_site_command = "#{$file["appcmd"]} start site #{site_name}"
  result = system start_site_command
  raise "Failed to start site on IIS: #{$?}" unless result
end 
```

`$file["appcmd"]`上面是我的构建脚本的全局文件查找，这是 c:/windows/system32/inetsrv。

我很想找到一个更好的解决方案，所以如果有人遇到更好的方法来添加答案，如果它更好，我会更改正确的答案。我发现的唯一 2 个库是 dolphin deploy 和 7 digital 的 iis rake 脚本，不幸的是，这两个库似乎都没有很好地记录如何使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T11:15:30.207

我建议你去看看[Capistrano](https://github.com/capistrano/capistrano)。Capistrano 是 ruby​​/rails/... 应用程序的部署“框架”。查看文档的[入门](https://github.com/capistrano/capistrano/wiki/2.x-Getting-Started)部分，然后查看有关如何[使用 Capistrano 部署到 Windows Server 的](https://github.com/SciMed/capistrano-windows-server)“教程” 。

# jquery - 在 Ipad 中，上面的 li 的“touchstart”jquery 事件被点击了底层元素

> ID：11482178
> 
> 赞同：0
> 
> 时间：2012-07-14T08:20:14.057
> 
> 标签：jquery, ipad, touch

我有一个下拉列表**li**的 z-index 比应该捕获**touchstart jquery**事件的底层元素更大。但相反，底层元素正在被点击。我也尝试了 alert() **touchstart**事件，但没有发生警报。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T23:52:03.667

也许您正在使用鼠标在设备上进行测试，在这种情况下会触发 mousedown 事件，而不是 touchstart。一些代码可能有助于使事情更加独立于设备：`isiPad = navigator.userAgent.match(/iPad/i) != null;`然后（在 jQuery 中）：`$(element).bind('click',false).bind(isiPad?'touchstart':'mousedown',function(e){...`

# git - 重置而不丢失已提交的文件

> ID：11482180
> 
> 赞同：24
> 
> 时间：2012-07-14T08:20:49.097
> 
> 标签：git, git-reset

当我不小心将文件提交到错误的分支时，我通常使用`git reset --hard HEAD~1`. 但是，使用这种方法我通常会丢失所有提交的文件。有没有办法在不丢失编辑文件的情况下重置提交？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-07-14T08:23:42.397

不要使用`--hard`use`--soft`代替。

因此，如果您想删除最新的提交，您可以这样做：

`git reset --soft HEAD^`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-14T09:57:39.170

虽然亚历克斯非常正确，但我可能想尝试不同的顺序：

如果我想在尚未诞生的分支上提交：

```
git branch newbranch
git reset --hard HEAD^ 
```

如果我想在现有分支上提交：

```
git checkout otherbranch
git cherry-pick firstbranch
git checkout firstbranch
git reset --hard HEAD^ 
```

亚历克斯答案的完整示例

```
git reset --soft HEAD^
git checkout otherbranch
git commit -am "Message" 
```

请注意，如果尝试将更改“浮动”到另一个分支的尝试由于冲突而失败，则最后一个示例将失败。然后，您将需要存储/结帐/申请以解决冲突。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-10-15T06:02:56.260

就我而言`--mixed`，在我找到[这个简单的解释之后，我更喜欢使用](https://davidzych.com/difference-between-git-reset-soft-mixed-and-hard/)

```
git reset --mixed HEAD^ 
```

# javascript - 如何在draw2d的特定位置添加图形？

> ID：11482185
> 
> 赞同：0
> 
> 时间：2012-07-14T08:21:28.873
> 
> 标签：javascript, draw2d-js

我想在连接的开始或结束位置添加标签。但是在这里我没有找到除ManhattanMidpointLocator之外的定位器。那么我该怎么做呢？如何在连接的位置放置标签？
请在下面找到我的代码，

```
draw2d.LabelConnection = function() {
  draw2d.Connection.call(this);
  this.sourcePort = null;
  this.targetPort = null;
  this.lineSegments = [];
  this.setColor(new draw2d.Color(0, 255, 0));
  this.setLineWidth(2);

  var label = new draw2d.Label("Message");
  label.setBackgroundColor(new draw2d.Color(230, 230, 250));
  label.setBorder(new draw2d.LineBorder(1));
  this.addFigure(label, new draw2d.Locator());
};

draw2d.LabelConnection.prototype = new draw2d.Connection();
draw2d.LabelConnection.prototype.type = "draw2d.LabelConnection"; 
```

上面的代码在 (0,0) 位置显示标签。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T05:35:07.063

我不确定您所说的“任何位置”是什么意思，但是如果您实现自己的定位器，那将非常简单。

查看ManhattanMidpointLocator 的代码。在重定位功能中，您了解画布上连接的所有信息。从那里你只需发明一个标签位置的计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T08:12:40.643

现在使用 Graphiti 代替 Draw2D，但定位器的代码应如下所示（未经测试）：

```
draw2d.StartConnectionLocator=function(/*:draw2d.Connection*/ connection)
{
  draw2d.ConnectionLocator.call(this,connection);
};
draw2d.StartConnectionLocator.prototype.relocate=function(/*:draw2d.Figure*/ target)
{
   var conn = this.getConnection();

   var points = conn.getPoints();
   var index = Math.floor((points.getSize() -2) / 2);
   if (points.getSize() <= index+1)
      return; 

   var startPoint = points.get(0);
   var myPosition = new draw2d.Point();
   myPosition.x = startPoint.x +5;
   myPosition.y = startPoint.y +5;

   target.setPosition(myPosition.x,myPosition.y);
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T10:03:51.027

采用：

**Connection.getStartPoint()**来确定连接的起点，而不是检索连接的所有段。

问候

# java - 如何从另一个类的方法访问共享首选项的字符串值

> ID：11482187
> 
> 赞同：0
> 
> 时间：2012-07-14T08:21:30.810
> 
> 标签：java, android, sharedpreferences

标题就是问题。我在共享首选项中保存了一个字符串值，并且能够在该类中访问它。现在我想从另一个类的另一个方法访问它。尝试了一些方法，但没有奏效。

在共享首选项中保存字符串的类：

[http://pastie.org/4254511](http://pastie.org/4254511)

类试图检索以前保存在共享首选项中的用户名：

```
public class testSharedPrefernce extends Activity{
TextView tv;
 @Override
    protected void onCreate(Bundle savedInstanceState){
     super.onCreate(savedInstanceState);
     setContentView(R.layout.lo);
     tv = (TextView)findViewById(R.id.textView1);
     SharedPreferences myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
     String name = myPrefs.getString("NAME", "YourName");
     tv.setText(name);
 } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T08:23:12.607

只需创建一个接受上下文的类的构造函数。例如：

```
class Abc
{
    Context contaxt;
    public Abc(Context context)
    {
        this.context = context;
    }
}
..........
..........
// now use this context to SharedPref..
SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(context); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T08:24:29.860

使用以下代码获取首选项。

```
SharedPreferences myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
boolean cbvalue = myPrefs.getBoolean("CHECKBOX", false);
String name = myPrefs.getString("NAME", "YourName");
String paswrd =myPrefs.getString("PASSWORD", "123"); 
```

使用以下代码保存首选项。

```
SharedPreferences myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
SharedPreferences.Editor prefsEditor = myPrefs.edit();

prefsEditor.putString("NAME", "Dipak");
prefsEditor.putString("PASSWORD", "Dipak123");
prefsEditor.commit(); 
```

# visual-studio-2010 - 在 VS 2010 中过滤警告类型

> ID：11482188
> 
> 赞同：1
> 
> 时间：2012-07-14T08:21:35.257
> 
> 标签：visual-studio-2010, code-contracts, visual-studio-extensions

在 Visual Studio 2010 中，所有警告共享相同的输出窗口：

*   编译器警告
*   代码分析输出
*   代码合约输出

有没有办法过滤这些？例如，我只想单独显示代码分析警告。有什么选择或扩展可以做到这一点吗？

# hibernate - 相互拥有的双向关系（朋友）

> ID：11482193
> 
> 赞同：0
> 
> 时间：2012-07-14T08:22:52.917
> 
> 标签：hibernate, orm, ibatis

我正在写一个 ORM。我很好奇朋友关系通常是如何建模的。他们是在链接表中重复关系，每个用户都是他的朋友关系的所有者，还是引入了相互拥有的关系，其中 orm 查找关系链接，其中关系所有者的 id 可以在关系的子字段中链接表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T16:43:34.833

我从来没有见过 ORM 做你的“共同拥有的关系”，因为它只适用于只读场景，但 ORM 通常用于读写。我会[像这样建模它们](https://stackoverflow.com/a/10834450/671619)

# ios - iOS 5：UILabel 动态改变大小

> ID：11482198
> 
> 赞同：0
> 
> 时间：2012-07-14T08:23:21.577
> 
> 标签：ios, cocoa-touch, uilabel

我正在使用情节提要和自定义单元格。在我的一个标签中，我在自定义单元格上下药，我需要打印日期。如果日期是阿拉伯语，那么我需要使标签更宽并打印两个日期-> 阿拉伯语和基督教。

我的问题是我正在尝试访问我的标签并更改大小：

```
 if(str.length==ARABIC_DATE)
    {
        cell.lblYears.layer.frame = CGRectMake(0.0, 0.0, 50.0, 10.0); 
        cell.lblYears.backgroundColor=[UIColor blackColor];
        cell.lblYears.text=str;
    }
    else 
    {
        cell.lblYears.text=str;
    } 
```

结果是错误位置的附加标签（0.0、0.0..）。如何使该代码不会产生额外的标签，但会改变现有的。

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T08:30:18.650

您没有在此代码中创建第二个标签。您将现有标签放置在 (0,0) 坐标中，并将宽度设置为 50，将高度设置为 10。

我不知道你的问题到底是什么，但是那段代码没有错。

# ruby-on-rails - 为什么此方法的 Rails 自定义路由不起作用

> ID：11482199
> 
> 赞同：0
> 
> 时间：2012-07-14T08:23:29.033
> 
> 标签：ruby-on-rails, routes, rake, custom-routes

我试图了解为什么此方法的此自定义路由会引发异常：

```
tasks_controller.rb
    def run
        @task = Task.find(params[:id])
        @task.run_task
        flash[:notice] = "Running Task #{@task.task_name}in the background, please click     show to see results after a few seconds"
    redirect_to tasks_url
    end 
```

任务模型task.rb

```
 def run_task
    if task.task_name == "game_state_count"
        task.description =  "Running task game_state_count"
    elsif task.task_name == "file_reader"
        task.description"Running task file_reader"
    elsif task.task_name == "copy_dupes_from_listings"
        task.description "Running task copy_dupes_from_listings"
    elsif task.task_name == "remove_dupes_from_listings"
        task.description "Running task remove_dupes_from_listings"
    end
  end 
```

路线.rb

```
 #For Admin Tasks run method
     match "tasks/run/(params[:id])" => "tasks#run", :as => :run_tasks_path 
```

任务/index.html.erb

```
<h1>Tasks</h1>

    <table>
      <tr>
       <th>Name</th>
       <th>Description</th>
       <th>Run</th>
        <th>Status</th>
        <th>Start Time</th>
      </tr>

    <% @tasks.each do |task| %>
      <tr>
       <td><%=task.name %></td>
       <td><%=task.description %></td>
       <td><%= link_to 'Run', run_tasks_path  %></td>
       <td><%=task.Status %></td>
       <td><%=task.start_time %></td>
       <td><%= link_to 'Show', task %></td>

     </tr>
    <% end %>
    </table>

    <br />

 <%= link_to 'New Task', new_task_path %> 
```

例外

```
NameError in Tasks#index

Showing /Users/AM/Documents/RailsWS/appXXX/app/views/tasks/index.html.erb where line #16 raised:

undefined local variable or method `run_tasks_path' for #<# <Class:0x000001028b9ce8>:0x000001028b4450>

Extracted source (around line #16):

13:   <tr>
14:     <td><%=task.name %></td>
15:     <td><%=task.description %></td>
16:     <td><%= link_to 'Run', run_tasks_path  %></td>
17:     <td><%=task.Status %></td>
18:     <td><%=task.start_time %></td>
19:     <td><%= link_to 'Show', task %></td 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T08:29:01.373

像这样重写路线

```
match "tasks/run/:id" => "tasks#run", :as => :run_tasks 
```

**更新：**和改变

```
<td><%= link_to 'Run', run_tasks_path  %></td> 
```

到

```
<td><%= link_to 'Run', run_tasks_path(taks)  %></td> 
```

# java - 如何递归扫描Android中的目录

> ID：11482204
> 
> 赞同：4
> 
> 时间：2012-07-14T08:24:27.877
> 
> 标签：java, android, file-io, android-anr-dialog, directory-traversal

如何递归扫描 Android 中的目录并显示文件名？我正在尝试扫描，但速度很慢（强制关闭或等待）。我正在使用[这个问题](https://stackoverflow.com/questions/2056221/recursively-list-files-in-java)`FileWalker`的单独答案中给出的类。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-14T08:50:52.490

您应该几乎总是只从非 UI 线程访问文件系统。否则，您可能会长时间阻塞 UI 线程并获得 ANR。运行FileWalker 在`AsyncTask`.`doInBackground()`

这是 FileWalker 的略微优化版本：

```
public class Filewalker {

    public void walk(File root) {

        File[] list = root.listFiles();

        for (File f : list) {
            if (f.isDirectory()) {
                Log.d("", "Dir: " + f.getAbsoluteFile());
                walk(f);
            }
            else {
                Log.d("", "File: " + f.getAbsoluteFile());
            }
        }
    }   
} 
```

您可以像这样从后台线程调用它：

```
Filewalker fw = new Filewalker();
fw.walk(context.getFilesDir()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T08:40:38.093

`System.out.println`调用真的很慢（好吧，这并不是函数本身，而是底层的 PrintStream 需要花费大量时间在控制台中写入文本）。

用别的东西代替它们应该没问题。例如，您可以创建并返回包含文件名的数组。

# android - android中单个HttpConnection中的多个请求？

> ID：11482205
> 
> 赞同：0
> 
> 时间：2012-07-14T08:24:29.090
> 
> 标签：android, httpclient

关于 Http 连接的[Apache 指南](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/connmgmt.html#d4e582)提到

> 连接握手的开销可能很大，尤其是对于小型 HTTP 消息。如果可以重新使用打开的连接来执行多个请求，则可以实现更高的数据吞吐量。

我想要做的是，我想发送 20 个类似的发布请求（即相同的标题），但我发送的数据非常小。因此，对于每个请求，我都会一次又一次地发送相同的标头数据。所以我正在寻找一种解决方法。

例如：

*   建立连接（发送和使用标头信息，ONCE）
*   发送 20 个 post 请求
*   关闭连接。

我的问题：是否可以使用[Android`HttpClient`](http://developer.android.com/reference/org/.../http/client/HttpClient.html)实现这一目标？如果是，请提供/指向我的课程/教程/示例。

提前致谢。

PS：我做了一些研究，找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T08:48:12.287

# javascript - 如何使用 javaScript 获取动态创建的表的名称属性值

> ID：11482226
> 
> 赞同：0
> 
> 时间：2012-07-14T08:27:40.090
> 
> 标签：javascript

我想将这个动态创建的表行的所有记录保存到 mysql 数据库中，但我无法获取动态添加的字段的名称值，我可以在 $_POST 方法中使用它。请帮助我。还告诉我如何将 JavaScript var 转换为PHP 变量

```
<?php 
if(isset($_POST['buton_sumit']))
    {
$nav_id =1;
$item1=$_POST['name1'];
$item1=$_POST['name2'];

echo $item1 + $item2; 
    }
?>

<!DOCTYPE HTML>
<HTML>
<HEAD>
<TITLE> Add/Remove dynamic rows in HTML table </TITLE>

</HEAD>
<BODY>

    <table id="extra" width="499" >
    <th width="24">R</th><th width="19">Sr.</th><th width="133">Item-Name</th><th width="144">Quantity</th><th width="145">price</th>
    </table>
    <form action="table1.php" method="post" name="input">
    <TABLE id="dataTable" width="350px" border="1">

        <TR>
            <TD width="24"><INPUT type="checkbox" name="chk"/></TD>
            <TD width="19"> 1 </TD>
            <TD width="133"> <INPUT type="text" name="name1"/> </TD>
            <TD width="133"> <INPUT type="text" name="qty1"/> </TD>
             <TD width="133"> <INPUT type="text" name="price1"/> </TD>
      </TR>
</TABLE>

    <INPUT type="button" value="Add Item" onclick="addRow('dataTable')" />

    <INPUT type="button" value="Remove Item" onclick="deleteRow('dataTable')" />
    <INPUT type="submit" value="End Sale" name="buton_sumit" />
    </form>
<SCRIPT language="javascript">
        function addRow(tableID) {

            var table = document.getElementById(tableID);

            var rowCount = table.rows.length;
            var row = table.insertRow(rowCount);

            var cell1 = row.insertCell(0);
            var element1 = document.createElement("input");
            element1.type = "checkbox";
            cell1.appendChild(element1);

            var cell2 = row.insertCell(1);
            cell2.innerHTML = rowCount + 1;

            var cell3 = row.insertCell(2);
            var element2 = document.createElement("input");
            element2.type = "text";
            element2.name="name"+ cell2.innerHTML;
            var element2id="myid"+cell2.innerHTML;

            element2.setAttribute('id',element2id);

            cell3.appendChild(element2);

            var cell4 = row.insertCell(3);
            var element3 = document.createElement("input");
            element3.type = "text";
            element3.name="qty"+ cell2.innerHTML;

            cell4.appendChild(element3);

            var cell5 = row.insertCell(4);
            var element4 = document.createElement("input");
            element4.type = "text";
            element4.name="price"+ cell2.innerHTML;

            cell5.appendChild(element4);

        }

        function deleteRow(tableID) {
            try {
            var table = document.getElementById(tableID);
            var rowCount = table.rows.length;

            for(var i=0; i<rowCount; i++) {
                var row = table.rows[i];
                var chkbox = row.cells[0].childNodes[0];
                if(null != chkbox && true == chkbox.checked) {
                    table.deleteRow(i);
                    rowCount--;
                    i--;
                }

            }
            }catch(e) {
                alert(e);
            }
        }
javascript:(document.write(document.forms[0].elements[2].name))
var myname2=2;
    </SCRIPT>

</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T17:41:30.087

我使用了相同的代码，我的问题是，当我单击行号 2 的复选框时...在 Php 中，我总是得到结果，因为选中了行号 1 复选框，这是错误的...

```
enter code here
<html><body>
<?php

$col = $_POST['Colname'];
$dtype = $_POST['Datatype'];
$pk = $_POST['Pk'];
$dbname= $_POST['Dbname'];
$space=$_POST['Space'];
$concount=$_POST['Concount'];
$qps=$_POST['Qps']; 

echo "$dbname <br/> $space <br/> $concount <br/> $qps <br/> ";

 $result=count($col);
echo($result);

 while($result!=0)
 {
$result-=1;

echo "<table><tr>";
echo "<td>$col[$result]</td>";
echo "<td>$dtype[$result]</td>";
echo "<td>$pk[$result]</td>";
echo "</tr></table>";   

}
?>

</html></body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T09:29:27.943

你在 echo 上得到的错误/输出是什么？

还使用隐藏字段将行数“rowCount”发送到服务器。此行数将帮助您定义循环的终点

添加到 HTML

```
 <input type="hidden" id="rowCount"/> 
```

在 JS 代码中

```
<script>
var objInputFieldRowCount = docuement.getElemendbyId("rowCount");
var jsRowCount = table.getElementsByTagName("TR").length;
objInputFieldRowCount.value = jsRowCount;
</script> 
```

# linux - Cron 选项卡运行多次

> ID：11482227
> 
> 赞同：1
> 
> 时间：2012-07-14T08:27:46.377
> 
> 标签：linux, cron, crontab

我有许多 crons 同时运行，但其中只有一个运行多次（应该是每小时一次），但它运行 10-12 次，然后停止。

日志看起来不寻常，如下所示：

```
Jul 14 11:01:02 ip-10-76-186-138 crond[829]: (root) CMD (run-parts /etc/cron.hourly)
Jul 14 11:04:02 ip-10-76-186-138 crontab[2971]: (root) BEGIN EDIT (root)
Jul 14 11:05:00 ip-10-76-186-138 crontab[2971]: (root) REPLACE (root)
Jul 14 11:05:00 ip-10-76-186-138 crontab[2971]: (root) END EDIT (root)
Jul 14 11:05:01 ip-10-76-186-138 crond[1211]: (root) RELOAD (cron/root)
Jul 14 11:05:05 ip-10-76-186-138 crontab[3514]: (root) BEGIN EDIT (root)
Jul 14 11:06:51 ip-10-76-186-138 crontab[3962]: (root) BEGIN EDIT (root)
Jul 14 11:07:04 ip-10-76-186-138 crontab[3962]: (root) REPLACE (root)
Jul 14 11:07:04 ip-10-76-186-138 crontab[3962]: (root) END EDIT (root)
Jul 14 11:07:09 ip-10-76-186-138 crontab[4014]: (root) BEGIN EDIT (root)
Jul 14 11:08:01 ip-10-76-186-138 crond[1211]: (root) RELOAD (cron/root)
Jul 14 11:10:01 ip-10-76-186-138 crond[4606]: (root) CMD (/usr/lib64/sa/sa1 1 1) 
```

# ios - 在 UIImageView 中创建滑动功能

> ID：11482234
> 
> 赞同：0
> 
> 时间：2012-07-14T08:28:43.007
> 
> 标签：ios, uiimageview

在我当前的测试应用程序中，我有一个`UITabBarController`, 链接到 a `UINavigationController`，它导致其中`UIViewController`有 6 个按钮，第二个`UIViewController`带有`UIImageView`. 我为每个按钮创建了一个 segue，非常有效。

我希望能够在其中创建滑动图片功能`UIImageView`。源图片位于应用程序的文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T09:05:35.983

我不确定你的问题。

如果您需要创建一种图像滑块，您可以创建一个`UIViewController`以 a`UIScrollView`作为主视图（或作为`UIViewController`'s的子视图`view`）。

设置完成后，您可以创建一个`for-loop`元素`UIImageView`来包装您从应用文件夹加载的图像并将每个元素添加`UIImageView`到滚动视图中。

为了能够在`UIScrollView`集合内拍摄照片，请将其属性设置`pagingEnabled`为`YES`.

有关更多信息，您可以查看Apple 提供的[Scrolling](https://developer.apple.com/library/ios/#samplecode/Scrolling/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008023-Intro-DontLinkElementID_2)示例。

希望这可以帮助。

# sql - 在 exec 语句中比较存储过程中的日期

> ID：11482244
> 
> 赞同：-4
> 
> 时间：2012-07-14T08:31:21.557
> 
> 标签：sql, sql-server, sql-server-2008

我有一个如下所示的存储过程：

```
create stored procedure aaa 
     @columnName nvarchar(10), 
     @comparisonParam nvarchar(10),
     @val nvarchar(100) 
as
    declare @date date
    set @date = convert(@val, date)

    exec('select * from Sheep where ' + @columnName + @comparisonParam  + @date ) 
```

实际上，查询应该是这样的：

```
select * from Sheep where birth_date = 12-12-2000 
```

当我运行该过程时，它不适用于日期值，但可以使用字符串和 int。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T08:38:14.677

必须引用日期值。

在旁注中，我会警告不要这样做。如果您需要构建动态 sql，则需要考虑以下风险：sql 注入攻击、语法错误、语义无效等。

考虑使用现有组件来构建查询。几个例子：

.NET LINQ (to SQL/Entities) [http://msdn.microsoft.com/en-us/library/bb397926.aspx](http://msdn.microsoft.com/en-us/library/bb397926.aspx)

.NET SqlCommandBuilder [http://msdn.microsoft.com/en-us/library /system.data.sqlclient.sqlcommandbuilder.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommandbuilder.aspx)

请参阅[在 C#/.NET3.5 中构建动态 sql 查询的最佳方式？](https://stackoverflow.com/questions/62987/best-way-of-constructing-dynamic-sql-queries-in-c-net3-5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T06:36:15.573

```
create stored procedure aaa 
     @columnName nvarchar(10), 
     @comparisonParam nvarchar(10),
     @val nvarchar(100) 
as
    declare @date date
    set @date = convert(@val, date)

    exec('select * from Sheep where ' + @columnName + @comparisonParam  + @date ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T15:43:47.147

您的日期文字需要用单引号括起来（我通常使用 CHAR(39)，因为它更易于阅读并且不需要转义）。否则你说：

```
WHERE birth_date = (12) - (12) - (2000) 
```

解决为：

```
WHERE birth_date = -2000 
```

哪个解决`DATEADD(DAY, -2000, '1900-01-01')`或：

```
WHERE birth_date = '1894-07-11' 
```

这可能不会产生您想要的结果。

当然，使用典型的 SQL 注入警告，并假设它`@columnName`始终是一个字符串或日期/时间列，这就是我将如何重写您的存储过程（尽管如果可以的话，我可能会尝试完全避免使用动态 SQL） .

```
ALTER PROCEDURE dbo.aaa 
  @columnName       NVARCHAR(10), 
  @comparisonParam  NVARCHAR(10),
  @val              NVARCHAR(100)
AS
BEGIN
  SET NOCOUNT ON;

  DECLARE @sql NVARCHAR(MAX);

  SET @sql = N'SELECT * FROM dbo.Sheep WHERE '
    + QUOTENAME(@columnName) + @comparisonParam + CHAR(39) 
    + REPLACE(@val, CHAR(39), CHAR(39) + CHAR(39)) 
    + CHAR(39);

  EXEC sp_executesql @sql;
END
GO 
```

为了阻止潜在的问题，您可能希望为列和数据类型添加验证，并确保该操作是您所期望的。例如

```
CREATE PROCEDURE dbo.bbb
  @columnName       NVARCHAR(10), 
  @comparisonParam  NVARCHAR(10),
  @val              NVARCHAR(100)
AS
BEGIN
  SET NOCOUNT ON;

  DECLARE @delimiter CHAR(1);

  SELECT @delimiter = CASE 
    WHEN [system_type_id] IN 
      (104,48,52,56,127,59,60,62,106,108,122) THEN '' -- numeric
    WHEN [system_type_id] IN 
      (35,40,41,42,43,58,61,99,167,175,231,239) THEN CHAR(39) -- string
    END FROM sys.columns WHERE [object_id] = OBJECT_ID(N'dbo.Sheep')
    AND name = @columnName;

  IF @delimiter IS NULL
  BEGIN
    RAISERROR('Column ''%s'' was not found or an unexpected data type.', 11, 1, 
      @columnName);
    RETURN;
  END

  IF @comparisonParam NOT IN (N'=', N'>=', N'<=', N'<', N'>', N'LIKE')
  BEGIN
    RAISERROR('Comparison param ''%s'' was not valid.', 11, 1, @comparisonParam);
    RETURN;
  END

  DECLARE @sql NVARCHAR(MAX);

  SET @sql = N'SELECT * FROM dbo.Sheep WHERE '
           + QUOTENAME(@columnName) + ' ' + @comparisonParam + ' ' 
           + @delimiter + REPLACE(@val, CHAR(39), CHAR(39) + CHAR(39)) 
           + @delimiter;

  EXEC sp_executesql @sql;
END
GO 
```

现在确保为字符串文字使用明确的日期格式。`12-12-2000`不是一个好的选择。`20001212`好多了。

在没有动态 SQL 的情况下，可能有一些方法可以做到这一点——我在[这里给出了一个非常简化的答案](https://stackoverflow.com/a/10703750/61305)。这可能是可行的，具体取决于数据类型、潜在列的数量以及您想要支持的操作数量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T20:08:48.040

Build your dynamic SQL using a typed date parameter. Use [`sp_executesql`](http://msdn.microsoft.com/en-us/library/ms188001.aspx) which allows to pass parameter definitions and parameter values to the embedded SQL:

```
create procedure aaa 
   @columnName nvarchar(10), 
   @comparisonParam nvarchar(10),
   @val nvarchar(100)
as
    declare @date date, @sql nvarchar(max);
    set @date = convert(@val, date);

    -- Note how @date is a *variable* in the generated SQL:
    set @sql =N'select * from Sheep where ' + 
            quotename(@columnName) + @comparisonParam  + N'@date';

    -- Use sp_executesql and define the type and value of the variable
    exec sp_executesql @sql, N'@date date', @date; 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-14T08:37:59.763

您需要为此创建表值函数，而不是创建存储过程。

您可以使用任何表值函数，例如

```
SELECT * from dbo.CallMyFunction(parameter1, parameter2 
```

例如。

```
CREATE FUNCTION Sales.ufn_SalesByStore (@storeid int)
RETURNS TABLE
AS
RETURN 
(
    SELECT P.ProductID, P.Name, SUM(SD.LineTotal) AS 'Total'
    FROM Production.Product AS P 
    JOIN Sales.SalesOrderDetail AS SD ON SD.ProductID = P.ProductID
    JOIN Sales.SalesOrderHeader AS SH ON SH.SalesOrderID = SD.SalesOrderID
    JOIN Sales.Customer AS C ON SH.CustomerID = C.CustomerID
    WHERE C.StoreID = @storeid
    GROUP BY P.ProductID, P.Name
);
GO 
```

请参阅此参考[http://msdn.microsoft.com/en-us/library/ms191165(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms191165(v=sql.105).aspx)

**编辑**

而不是使用动态sql尝试考虑一下

```
SELECT * FROM 
FROM    [dbo].[Person]
WHERE   ([PersonID] = @PersonID
         OR @AreaID IS NULL
        )
        AND (([Code] BETWEEN @Code AND CHAR(255))
             OR @Code IS NULL
            )
        AND (([Name] BETWEEN @Name AND CHAR(255))
             OR @Name IS NULL
            )
        AND (([Notes] BETWEEN @Notes AND CHAR(255))
             OR @Notes IS NULL
            ) 
```

# objective-c - 点语法和 valueForKey 的区别

> ID：11482245
> 
> 赞同：0
> 
> 时间：2012-07-14T08:31:20.993
> 
> 标签：objective-c, ios, core-data, key-value-coding, nstimeinterval

*请注意，更新 3 可能是最相关的*

我使用 nsdate 对象设置`NSTimeInterval`托管对象的属性`setValue:forKey:`

当我尝试获取值时，我得到了奇怪的东西，在运行时这个

```
NSLog(@"[managedObject valueForKey:@\"startTime\"] : %@, [NSDate dateWithTimeIntervalSince1970:[managedObject startTime]]: %@",
[managedObject valueForKey:@"startTime"],[NSDate dateWithTimeIntervalSince1970:[managedObject startTime]]); 
```

退货

```
[managedObject valueForKey:@"startTime"] : 2012-07-14 08:13:05 +0000,
[NSDate dateWithTimeIntervalSince1970:[managedObject startTime]]: 1981-07-14 08:13:05 +0000 
```

**更新 1**
返回的值`[managedObject valueForKey:@"startTime"]`是正确的。但是我更喜欢使用`[NSDate dateWithTimeIntervalSince1970:[managedObject startTime]]`或类似的东西，以便它的类型更强大。

我相信`[managedObject startTime]`返回不正确的值 => `363954111.000000`。
但是我用这样的东西设置它：

```
managedObject setValue:1342261311 forKey:@"startTime" 
```

值得注意的是，我不确定这是否不正确，因为`[managedObject valueForKey:@"startTime"]`返回了正确的 NSDate 对象。

**更新 2**
我记录了 KVC 和`.`语法返回的双精度值。

```
managedObject.startTime = 363954111.000000
valueForKey timeIntervalSince1970 = 1342261311.000000 
```

**更新3**
好的，我已经设置了一个测试，开始时间是这样设置的`entity.startTime = [[NSDate dateWithTimeIntervalSince1970:1342261311] timeIntervalSince1970];`，结束时间是这样设置的`[entity setValue:[NSDate dateWithTimeIntervalSince1970:1342261311] forKey:@"endTime"];`

当我将它们写入日志时，我得到了这个`start = 1342261311.000000, end = 363954111.000000`

似乎 NSDate 对象被错误地解包，有没有人见过这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T10:22:46.013

这里的问题是它`valueForKey:`旨在与对象值一起使用，实际上它返回一个`id`.

为方便起见，`valueForKey:`将原始类型（如整数和双精度数）包装在`NSNumber`对应的对象中。

您看到两个不同值的原因是它`valueForKey:`返回一个`id`，它本质上是一个指针，指向`NSNumber`恰好存储在内存中的位置。然后，您的代码只需获取这个任意内存地址，并以某种方式将其解释为双精度，然后从中构造一个`NSDate`。

`startTime`另一方面，直接调用访问器方法会`double`毫不费力地返回 。

如果你想使用`valueForKey:`，你可以做这样的事情来获得真正的价值：

```
NSTimeInterval tiv = [[managedObject valueForKey:@"startTime"] doubleValue]; 
```

然后从那里开始工作。

我实际上有点惊讶编译器没有对此发出警告。Apple 最新的编译器已经非常擅长捕捉此类问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T06:48:47.803

这是时代差异的问题。NSDate 使用 2001 年 1 月 1 日作为纪元。因此，当我获得价值时，我使用的是 unix epoch (1970)。这给了我价值观上的差异。

当 KVC 使用 NSDate 对象解包和包装 NSTimeInterval 时，它使用 NSDate 2001 纪元。

因此，而不是使用`dateWithTimeIntervalSince1970` 我`dateWithTimeIntervalSinceReferenceDate`在获取价值时使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T08:47:52.287

`NSTimeInterval`是 double 的类型定义

```
typedef double NSTimeInterval; 
```

您不能将标量直接存储在核心数据中，但您必须将它们包装在 a`NSNumber` 中，或者在您的情况下使用 a 可能更容易`NSDate`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T09:46:25.387

如果 startTime 是一个 NSTimeInterval （而不是一个 NSDate），你正在比较两个不同的东西，一个双精度对象和一个 NSDAte 对象。

`[managedObject valueForKey:@"startTime"]`将返回一个 NSTimeInterval，一个原语（顺便说一下，你应该用 %f 打印它）。

`[NSDate dateWithTimeIntervalSince1970:[managedObject startTime]]`会给你一个NSDate。

如果你真的想比较两者，你应该使用`[NSDate dateWithTimeIntervalSince1970:[managedObject valueForKey:@"startTime"]]`正确比较两个 NSDate 对象。

# php - 获取用户信息的最有效/安全的方式

> ID：11482248
> 
> 赞同：0
> 
> 时间：2012-07-14T08:32:23.523
> 
> 标签：php, get, store

我正在为网站上的用户制作个人资料系统。我正在尝试找出最有效和最安全的方式来获取并在个人资料页面上显示他们的信息。配置文件将相当大，可能包含数十个文本字段和图像。

我真的不想在每次页面加载时都查询数据库，因为这看起来效率很低。而且我认为在会话中存储太多数据。

所以我的问题是：有哪些方法可以实现这一点，你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T08:36:28.130

虽然我不同意您的观点（数据库查询是有效的），但您可以使用 session 来存储您的数据。在页面开始时启动会话并使用变量 $_SESSION 来存储和使用您喜欢的数据。

第1页（登录什么的）

```
// this starts the session 
session_start(); 

// this sets variables in the session 
$_SESSION['test']='testing'; 
```

第 2 页（个人资料页面）

```
// this starts the session 
session_start(); 

// this echos variables in the session 
echo $_SESSION['test']; //output 'testing' 
```

# internet-explorer-9 - IE9 的最大宽度问题

> ID：11482252
> 
> 赞同：3
> 
> 时间：2012-07-14T08:33:15.200
> 
> 标签：internet-explorer-9, css

这里是新手。

我正在尝试学习响应式设计，并且这样做刚刚遇到了 ie9 的 max-width prob，而它在 Chrome 中按预期工作。当我调整浏览器窗口时，它只是不会调整我试图缩放的图像的最大宽度。让我向您展示 html 代码和 css。

HTML 代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>This is a test</title>
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
<link rel="stylesheet" type="text/css" href="css/resetmin.css" />
<link rel="stylesheet" type="text/css" href="css/test3.css" />  
</head>
<body>
<div style="background-color:black; height:35px;"></div>
<div id="container">
    <div class="content">
        <div class="header">
        <h1>This is my header</h1>
        </div>
        <div class="pic">
            <img src="image001.jpg" alt="Just a picture 815px width and 500px height"></img> 
        </div>
        <div class="imageControl">
        </div>
        <div class="clear"></div>
    </div>
<div class="content">
        <div class="header">
        <h1>This is my header</h1>
        </div>
        <div class="pic">
            <img src="image002.jpg" alt="Just a picture 500px width and 815px height"></img> 
        </div>
        <div class="imageControl">
        </div>
        <div class="clear"></div>
    </div>
    <div class="sideBar"></div>
    <div class="padding"></div>
</div>

<div style="background-color: #555; width: 960px; height: 485px; margin: 0 auto; clear: both;"></div>
</body>
</html> 
```

CSS 代码：test3.css

```
body {
color: #333;
font: 100%/1.5 Cambria, Georgia, serif;
background: #ece6d6 url(_assets/bg-light.png) repeat;
/* margin: 0 auto; */
}

img {
display: block;
max-width: 100%;
}

#container {
width: 960px;
margin: 0 auto;
background-color: #aaa;
}

.header {
height: 40px;
border-top: 1px solid #000;
}

.content {
background-color: grey;
float: left;
margin: 15px 15px 0px 15px;
}

.pic {
width: auto;
padding: 15px;
background-color: #777;
float: left;
/* position: relative;
top: 15px;
left: 15px; */
}   

.imageControl {
width: 85px;
height: 350px;
background-color: #ccc;
float: right;
/* position: relative;
top: 15px;
left: 15px; */
}

.clear {
clear: both;
}

.padding {
padding-bottom: 15px;
clear: both;
}

.sideBar {
width: 300px;
height: 250px;
margin: 15px 15px 0px 0px;
float: right;
background-color: #333;
}

h1 {
font: bold 1.6em Cambria, Georgia, serif;
}

@media screen and (max-width: 980px) {

#container {
    width: 95%;
}

.sidebar {
    width: 30%;
}
.sidebar .widget {
    padding: 8% 7%;
    margin-bottom: 10px;
}

} 
```

请查看并审查它。它仍在进行中，所以当你调整浏览器时请不要介意凌乱的响应式设计（我现在的问题是图像，因为它不会在 ie9 中缩小）。

谢谢。如果仍有不清楚的地方，请询问，我会尽力回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T08:39:35.407

找到了。经过大量的修补，这是我现在的解决方案。这就是我在我的 html 和 css 代码中添加/编辑的内容。

编辑的 HTML 代码：

```
<div class="pic">
   <img class="imageObject" src="image001.jpg" alt="Just a picture 815px width and 500px height"></img> 
</div> 
```

添加CSS代码：

```
img.imageObject {
margin:0 auto;
width:100%;
max-width:50.3975em;
} 
```

至于为什么，我还在寻找原因的解释。但是现在仪式这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-04T17:58:30.790

这是一个可能的修复：

CSS：

```
.scale
{
    max-width:980px;
}
.scale img
{
    display:block;
    max-width:80% //your value
} 
```

HTML：

```
<div class="scale">
    <img src="...."/>
</div> 
```

# java - OpenExchangeRates.org 的任何 java 示例

> ID：11482258
> 
> 赞同：0
> 
> 时间：2012-07-14T08:33:47.120
> 
> 标签：java, android

[openexchangerates.org](http://openexchangerates.org)没有任何 Java 示例来获取我能找到的费率。有一个[占位符](http://openexchangerates.org/documentation#example-java)，但它是空的。我非常希望看到一些可以在 android 应用程序中使用的示例代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T09:54:07.313

看到这个问题：[我需要一个简单的 java 示例来处理通过 HTTP for Android App 的 JSON 响应？](https://stackoverflow.com/questions/3581816/i-need-a-simple-java-example-of-processing-a-json-response-via-http-for-android)

openexchangerates 似乎没有什么特别之处。只需使用 HTTP GET 获取 JSON 数据并从中创建一个对象。您可以为汇率创建一个类并使用[GSON](https://sites.google.com/site/gson/gson-user-guide)实例化该对象。

# android - 为什么应用程序显示 GPS 开始按钮？

> ID：11482259
> 
> 赞同：0
> 
> 时间：2012-07-14T08:33:49.723
> 
> 标签：android, gps

如果您查看 Android 上的 Google Maps 等应用程序，它会显示一个 gps 图标，单击该图标会启动 gps。但是，如果我不单击该图像并且我移动了它，它仍然会跟踪我。那么我们在这么多应用程序中看到的按钮的目的是什么？手机是否仅在按下该按钮时才依赖 GPS，还是使用该按钮，因为它们每 x 分钟启动一次 GPS，因此如果您单击该按钮，它会立即启动它？?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T08:40:57.560

GPS 无线电不会自动启动。

当 GPS 关闭时，手机会使用附近的 WiFi 节点来查找位置。这在有很多已知 WiFi 节点的地区工作得很好，但 GPS 更精确，几乎可以在任何地方工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T08:39:51.720

谷歌地图等应用程序具有 gps 标志，因为您可能希望显示您的位置，通常该应用程序会首先尝试根据 wifi 和网络找到您的位置，然后再使用 gps。该按钮将告诉应用程序您想知道当时和那里的位置，这就是它启动的原因，除此之外它应该自动执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T08:42:00.523

GPS并不是追踪手机的唯一方法。当您没有启用 GPS 时（或者如果您的手机中没有 GPS 芯片），手机可以三角测量它与附近手机信号塔的距离。它也可以对附近的 WiFi 网络做同样的事情。

由于 GPS 占用大量电量，应用程序会要求您自己启用 GPS，而不是在应用程序在后台启动/运行时自动启用它。

您可以在此处阅读有关常见电话跟踪方法的更多信息：[http ://en.wikipedia.org/wiki/Mobile_phone_tracking](http://en.wikipedia.org/wiki/Mobile_phone_tracking)

# android - 为 Android 生成类以与 REST 服务和 WCF2ANDROID 一起使用 - JSON 序列化

> ID：11482263
> 
> 赞同：0
> 
> 时间：2012-07-14T08:35:06.430
> 
> 标签：android, wcf, rest

我正在编写一个使用 WCF RESTful 服务的 Android 应用程序 - 我在使用 LINQ 类从现有数据库生成的 WCF 应用程序中有很多类。在 Android 中，为了简化 REST 的使用，我决定将 SpringSource 与 REST 模板一起使用。但是，当我想使用在服务器端工作的类进行迁移以在 Android 应用程序上使用它们时会出现问题 - wsdl2java(axis) 和表生成器中的 Netbeans 实体类 - 创建了很多不受支持的东西在安卓中

是否有任何其他代码生成器可用于为 Android 生成 Java 类以使用 SpringSource 使用 REST 服务？

另一个问题是 WCF 将 DateTime 格式序列化为：“/Date(1325606580000+0100)/”有什么方法可以设置 RestTemplate 以便将其正确映射到 Java 日期？

提前感谢您的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T08:47:14.090

`DateTime`是模棱两可的结构和实现在任何平台都不同，不要`DateTime`在传输中使用，将其转换为unix时间戳

# android - 如何将应用程序的数据（存储在 sqlite 数据库中）从 Android 应用程序备份（或同步）到 google（或 gmail）？

> ID：11482272
> 
> 赞同：1
> 
> 时间：2012-07-14T08:37:15.690
> 
> 标签：android, gmail, backup, restore, database-backups

我正在开发一个 Android 应用程序，该应用程序需要将存储在 sqlite 数据库中的一些数据备份（和恢复）到（来自）google（或 gmail）。但我不知道从哪里开始。我阅读了[Android 文档](http://developer.android.com/guide/topics/data/backup.html)中的备份指南。但这不是我需要的，因为这种方式的备份操作可能不会立即进行，并且需要设备用户在“设置->隐私”中打开备份选项。
我需要一种方法，首先使用 OAuth 或 OAuth 2.0 对用户的帐户（已经在设备上）进行身份验证，然后在身份验证后，应用程序将数据发送到 gmail，然后可以从 gmail 取回数据以将其恢复到设备。
我该如何实施？
另一个问题：当我将数据发送到 gmail 时，我应该使用什么格式？数据库文件、XML 还是其他？

# javascript - 函数的 JavaScript/jQuery 回调

> ID：11482274
> 
> 赞同：0
> 
> 时间：2012-07-14T08:37:51.737
> 
> 标签：javascript, jquery, asynchronous

我有 2 个功能。

```
function f1() {
    $.ajax(..., success: function(response) {
        // some code executed whenever request is completed.
    }
}

function f2() {
    // my code
} 
```

我需要一个接一个地调用这些函数。

```
f1() // waiting until ajax request in the function is complete.
f2() 
```

我试过`$.when().then()`了，但它似乎没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T08:41:07.630

该`$.ajax`调用返回一个实例，`$.Deferred`该实例用于跟踪调用的进度 - 这是您需要从`f1`函数返回的内容。然后你可以使用`.then()`，`.done()`等等。

**根据评论进行编辑**

如果要在内部`f1`和外部调用回调，可以返回`.pipe`方法的结果。

```
function f1() {
    return $.ajax(/*...*/).pipe(function() {
        //local 'done' handler
    });
}

function f2(resultFromF1Handler) {
    //...
}

f1().done(f2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T08:45:43.817

```
function f1(onsuccess) 
{
    $.ajax(
    { 
        success: function(r) 
        { 
            // some code
            onsuccess(r);
        }
    });
}

function f2() 
{
    // my code
}

f1(f2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T08:39:53.740

我建议在作为 f1() 成功执行的匿名函数中调用 f2()。

这样做有问题吗？

# javascript - 需要 Jquery 滑块

> ID：11482280
> 
> 赞同：-3
> 
> 时间：2012-07-14T08:38:55.497
> 
> 标签：javascript, jquery

[http://www.avenuesocial.com/](http://www.avenuesocial.com/)

请检查这个网站，请帮我找出这个滑块。任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T08:42:58.967

[http://kevinbatdorf.github.com/codaslider/](http://kevinbatdorf.github.com/codaslider/)

# javascript - 如何使用 Rapheal.js 库逐渐为圆形路径设置动画

> ID：11482286
> 
> 赞同：1
> 
> 时间：2012-07-14T08:39:52.180
> 
> 标签：javascript, html, path, svg, raphael

我有一个圆形扇形，我想让扇形逐渐动画成一个完整的圆形，我怎样才能用 Rapheal.js 制作它。

顺便说一句，我是 SVG 新手，我正在使用[svg-editor](http://svg-edit.googlecode.com/svn/branches/2.5.1/editor/svg-editor.html)使用 SVG 绘制形状。

这是我的代码

```
 var arcPath1 = paper.path("m325.30255,127.93972c33.86002,6.238 52.02301,8.85 90.823,49.616l105.53491,-65.494c-44.84491,-59.9466 -101.70261,-109.25547 -201.98761,-108.83956l5.6297,124.71756z");

arcPath1.attr({
    "fill": "#003a60",
    stroke: 'none'
});

arcPath1.rotate(1.0569896697998047 ,420.6666870117177,90.38764953613116);
arcPath1.node.id= "arch1"; 
```

这是我的代码示例[http://jsfiddle.net/v2KeV/](http://jsfiddle.net/v2KeV/)

如何使动画完成路径成为一个**完整的圆圈？**

注意：我制作的动画只是为了测试路径动画..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T18:57:52.993

好吧，首先要做的事情是：为了优雅地为弧段设置动画，我们需要能够以编程方式生成它们。考虑一下这个笨拙的三角函数：

```
// arcPath:
// cx, cy are the center point
// inner_radius and outer_radius describe the distance of the arc segment's inner and outer boundaries from the center point.
// starting_radians describes the offset of the segment start;
// arc_radians describes the width of the arg segment.

function arcPath( cx, cy, inner_radius, outer_radius, starting_radians, arc_radians )
{
    var x1 = cx + Math.cos( starting_radians ) * inner_radius;
    var y1 = cy + Math.sin( starting_radians ) * inner_radius;
    var x2 = cx + Math.cos( starting_radians ) * outer_radius;
    var y2 = cy + Math.sin( starting_radians ) * outer_radius;
    var x3 = cx + Math.cos( starting_radians + arc_radians ) * outer_radius;
    var y3 = cy + Math.sin( starting_radians + arc_radians ) * outer_radius;
    var x4 = cx + Math.cos( starting_radians + arc_radians ) * inner_radius;
    var y4 = cy + Math.sin( starting_radians + arc_radians ) * inner_radius;

    var pathstr = "M" + x1 + "," + y1 + " "
                    + "L" + x2 + "," + y2 + " "
                    + "A" + outer_radius + "," + outer_radius + " " + arc_radians + " " + ( arc_radians > Math.PI ? "1" : "0" ) + " 1 " + x3 + "," + y3 + " "
                    + "L" + x4 + "," + y4 + " "
                    + "A" + inner_radius + "," + inner_radius + " " + ( 0 - arc_radians ) + " " + ( arc_radians > Math.PI ? "1" : "0" ) + " 0 " + x1 + "," + y1 + " z";

     return pathstr;                   
} 
```

使用更简单的几何构造，您可以简单地为从部分弧段到整个弧段的路径设置动画，并让 Raphael 进行提升，如下所示：

```
var arcPath1 = paper.path(arcPath( 150, 150, 75, 125, Math.PI / 2, Math.PI * 0.65 ) )
    .attr({ fill: "#003a60", 'fill-opacity': 0.5, stroke: 'black' });

arcPath1.click(function () 
    {
        arcPath1.animate( { path: arcPath( 150, 150, 75, 125, Math.PI / 2, Math.PI * 2 - 0.0001 ) }, 2000, "<>" );
    }); 
```

不幸的是，Raphael 在这方面做得非常糟糕，所以你会看到大量相交的弧线段将它们自己重新塑造成一个完整的圆，而不是所需的弧线扫描。所以为了让它做你想做的事，我们必须手动执行动画。

```
function arcSweep( arc, x, y, inner, outer, angle_offset, from_sweep, to_sweep, duration )
{
    var steps = 100;
    var current_step = 0;
    var intervalID = setInterval( function()
                 {
                     current_step++;
                     if ( current_step >= steps )
                         clearInterval( intervalID );
                     arc.attr( { path: arcPath( x, y, inner, outer, angle_offset, from_sweep + ( ( to_sweep - from_sweep ) * ( current_step / steps ) ) ) } );
                 }, duration / steps );
} 
```

所以基本上我们只是计算一系列中间弧并依次建立它们，直到我们达到目标角度。除了目标结束角度之外，动画函数还需要弧的所有原始参数（不能是 Math.PI * 2——因为它计算为空弧段！）。可能需要将其抽象为一个类，以便弧段的每个实例都可以跟踪其自己的变量。

这是一个演示成品的[小提琴。](http://jsfiddle.net/kevindivdbyzero/xZbzb/)

# ajax - 使用 jQuery/Ajax 的 Google Plus 连接 API

> ID：11482296
> 
> 赞同：1
> 
> 时间：2012-07-14T08:41:46.527
> 
> 标签：ajax, google-plus

我正在尝试在 jquery/ajax 函数中触发 Google plus 连接 API。我得到的响应是不确定的。Firebug 显示一个空响应。

这是我正在使用的代码：

```
function gPlusConnect ()
{
    console.debug('line 401 ajax gestartet');
    result=$.ajax({
        type: 'POST',
        async: false,   // false
        url: 'https://accounts.google.com/o/oauth2/auth', 
        data: ({
            scope:'https://www.googleapis.com/auth/userinfo.email+https://www.googleapis.com/auth/userinfo.profile',
            state:'/profile',
            redirect_uri:'https://ssl.webpack.de/learnface.de/donation/launchpages',
            response_type:'code',
            client_id:'.........82.apps.googleusercontent.com',
        })
    }).responseText;
    console.debug('index.php 415 ajax ends with '+result+' from g+');
} 
```

萤火虫的结果是：

```
Header      Post      Antwort   HTML
index.php    415        ajax    ends undefined from g+ 
```

有没有人成功做到这一点？你推荐一个更好的替代品吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:37:07.770

通过官方客户端库在 Google 上使用 OAuth 2.0 要容易得多。使用 JavaScript 客户端库以这种方式授权用户非常简单：

```
<script src="https://apis.google.com/js/client.js?onload=handleClientLoad"></script>
<script>
function handleClientLoad() {
  gapi.client.setApiKey(apiKey);
  gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: false}, handleAuthResult);
}
function handleAuthResult(authResult) {
  console.log(authResult);
}
</script> 
```

您可以在客户端库的源代码树中找到更[详细的示例，并在其](https://code.google.com/p/google-api-javascript-client/source/browse/samples/authSample.html)[代码托管项目](https://code.google.com/p/google-api-javascript-client/)中了解有关该库的更多信息。

# c# - 单独访问样式属性

> ID：11482309
> 
> 赞同：1
> 
> 时间：2012-07-14T08:43:48.280
> 
> 标签：c#, html-agility-pack

我`HtmlAgilityPack`在 c# 中使用。我创建了一个具有某些属性的 div 元素，例如，

```
HtmlNode div = HtmlNode.CreateNode("<div></div>");
div.Attributes.Add("style","width:100px;height:100px;color:red;position:absolute;"); 
```

现在我想知道 HtmlAgilityPack 中是否有任何方法可以通过我单独访问样式属性，就像我们在 jQuery 中所做的那样：

```
 $("div").width(); or $("div").css("width"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T12:27:28.653

您可以尝试使用[CsQuery](https://github.com/jamietre/csquery)，它实际上就像 jQuery：

```
CQ div = CQ.Create("<div></div>");

div.CssSet( new {
    width="100px",
    height="100px",
    color="red",
    position="absolute"
});

//.. or

div.Css("width","100px").Css( ... ) ...

string width = div.Css("width");       // width=="100px"

int widthInt = div.Css<int>("width");  // widthInt==100 
```

它实现了jQuery的每一个DOM操作方法，所以API应该很熟悉。它还提供了一个主要模仿浏览器 DOM 的实现，例如

```
var nodeName = div[0].NodeName;         // nodeName=="DIV";

div[0].AppendChild(div.Document.CeateElement("span"));   // add a span child 
```

有几个例外，`CssSet`就是其中之一，javascript 中的重载方法在 C# 中不起作用，因此必须使用不同的方法。（另一种是`AttrSet`从对象设置时）。它还具有广泛的单元测试覆盖率，包括从 jQuery 移植到 C# 的大部分测试套件，并且选择器比 HTML Agility Pack 快得多（更不用说因为它们只是 CSS，所以更容易混淆），这要归功于具有子选择功能指数。

# c# - 返回格式化字符串的 C# 自定义 OCR

> ID：11482314
> 
> 赞同：-1
> 
> 时间：2012-07-14T08:44:43.843
> 
> 标签：c#, ocr

只是出于我个人的兴趣，我从我的研究中看到，开始自己的 OCR 并不容易。但是，我想听听有关如何实现挑战的想法，不仅要识别字符，还要以格式化字符串的形式返回结果。例如，我有一张桌子的图像（想象它是一张图像，其中“|”和“_”被画成直线）：

* * *

|数字，另一个数字|一些文字|

* * *

|1,4 |废话|

* * *

使用静默 OCR 后，我得到的结果为 "|Number, AnotherNumber|SomeText|\n|1,4|Blah|" 关于如何实现这一点以及我可以使用哪些可用工具/库的任何想法？我也想用 Visual Studio 2010 用 C# 编写这个。理想情况下可以使用 PDF，但不同的图像格式都可以。我已经看过一些，但它们似乎不兼容，因为它们使用 C++ 或 C。谢谢。阿丽娜。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T08:48:20.147

获取 ocr 库是相当困难的（当然，如果你不想付钱）你可以试试这个，它不是免费的，但如果你有 Office 2007： http: [//www.codeproject.com/Articles/41709/How -To-Use-Office-2007-OCR-Using-C](http://www.codeproject.com/Articles/41709/How-To-Use-Office-2007-OCR-Using-C)

# 3d - 在等距瓷砖游戏中实现和设计墙壁的最佳方式是什么？

> ID：11482316
> 
> 赞同：11
> 
> 时间：2012-07-14T08:45:16.000
> 
> 标签：3d, isometric

我正在考虑在哪里应用这个解决方案的游戏，是一个可以更改图块的游戏，有点像编辑器。您将需要为 2 种类型的墙壁制作图形：朝西和朝东或朝北/朝西。

在等距瓷砖游戏中，似乎有两种方法可以设置墙壁：

*   将它们稍微画在图块之外（《模拟人生 1》、《主题医院》、《铁血联盟 2》、《僵尸计划》）
*   将它们设为 1x1(tile) 大并将它们绘制在自己的 tile 上（Ultima 8，每个 rougelike）

示例图

![](../Images/a43336b8e25728a62807079b3ee4c9ac.png)

第二种方法似乎是最简单的方法。由于墙壁占据了整个瓷砖，您不必担心重叠到地砖中并且必须围绕其设计图案。但是，如果您想制作与网格不同大小的图案，您确实会遇到另一个问题。就像你想拥有相当纤薄的墙壁一样。然后，您的网格也需要更大。从好的方面来说，只需要 1 个墙片。

第一种方法需要一些代码来检测墙外的变化以进行绘制，并且可能看起来有点奇怪，除非围绕它设计地砖。它还需要至少 4 件。

哪种方法是解决此问题的首选方法，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T08:58:40.627

我建议从最远的对象开始渲染并以最近的对象结束 - 这样你可以获得一个简单的不变量：靠近相机的对象可以覆盖更远的对象（如现实生活中一样）

替代方案：您可以使用对象的“Z”坐标中的细微差别来让深度缓冲区发挥作用——如果使用深度缓冲区，则渲染顺序无关紧要，但最好从最近的开始——这样渲染的texelcount 可以更低

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T09:00:37.467

我会选择第二种选择，让墙占据自己的瓷砖。这是最容易实现的，并且需要艺术家的工作更少。

If you're worried about the ability to do thin walls, just ensure that your tile size is small enough. Your game's tiles don't need to follow the pattern that is drawn on the floor, e.g. a real-life floor tile could consist of 2x2 game tiles.

# javascript - 使标签悬停更改鼠标样式

> ID：11482317
> 
> 赞同：3
> 
> 时间：2012-07-14T08:45:24.707
> 
> 标签：javascript, html, mouseover

> **可能重复：** [当鼠标悬停在 <li> 元素上时，让鼠标指针变成一只手？](https://stackoverflow.com/questions/3087975/make-mouse-pointer-a-hand-when-hover-over-li-element)

基本上，我使用的是一个 javascript 库，它可以通过单击表头来对表进行排序。我自己没有使用 javascript 的经验。唯一的问题是，点击表格并不是最直观的事情。因此，我想让它看起来像一个链接。我已经把它加了下划线，但它仍然不是特别明显，因为当你将鼠标悬停在它上面时，鼠标不会改变它的外观。我想将鼠标图像更改为您将鼠标悬停在链接上时得到的手。目前，我想要看起来像链接的那些只是一个空白（没有href）。有什么方法可以轻松做到这一点，它会涉及 javascript，有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T08:46:47.993

这个问题确实可以通过使用*javascript*来解决，但是你应该求助于*CSS*的力量。

如果您实际上想要*在悬停更改光标上*创建的元素确实是 a`<a>`您最好添加`href`值为*“#”*的属性以使浏览器自动处理光标更改。

```
<a href="#">I'm a real link, but pressing me won't lead to another webpage</a> 
```

* * *

### 示例片段（使用 CSS）

```
<html>
  <head>

    <style>
      th:hover {
        cursor:pointer;
      }   
    </style>

  </head>
  <body>

    <table border="1">
      <tr> <th>Header 1</th> <!-- --> <th>Header 2</th> </tr>
      <tr> <td>value 1 </td> <!-- --> <td>value 2 </td> </tr>
    </table>

  </body>
</html> 
```

^(**[jsFiddle 实例](http://jsfiddle.net/QHeDa/1/)**)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T10:13:14.007

使用 CSS 添加：

```
a {
      cursor: pointer;
} 
```

您还可以考虑使用悬停效果。

再想一想，您一定是`a`错误地使用了标签。href 始终是必需的，不应留空，因此请使用`<a href="#">link</a>`. 这将解决您的问题。

# python - 我怎么知道使用beautifulsoup 的xml 中有多少相同的标签？

> ID：11482320
> 
> 赞同：0
> 
> 时间：2012-07-14T08:45:43.120
> 
> 标签：python, tags, count, beautifulsoup

我有一个这样的xml：

```
<dd class='date'>
0705
</dd>
<dd class='date'>
0707
</dd>
<dd class='date'>
0710
</dd>
<dd class='date'>
0714
</dd> 
```

我想要的输出是（我正在寻找# of ）：

```
4 
```

有没有一种巧妙的方法来完成这项工作？任何帮助都会很棒。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T08:59:57.857

```
soup = BeautifulSoup("xml/html content")
tags = soup.find("some_tag")
print len(tags) 
```

`len(tags)`会给你标签的总数。

# android - 从哪里可以获得 android 电子邮件应用程序的设计文档？

> ID：11482322
> 
> 赞同：-3
> 
> 时间：2012-07-14T08:46:03.393
> 
> 标签：android, email

现在我想阅读[http://androidxref.com/2.3.6/xref/packages/apps/Email/](http://androidxref.com/2.3.6/xref/packages/apps/Email/)中的 android 电子邮件应用程序，但我发现我缺乏消化这个复杂代码的基础。所以我想要一些设计文档作为指导，例如高级设计和低级设计或任何其他概述文档。我是第一次从事电子邮件应用程序开发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T10:57:38.030

> 所以我想要一些设计文档作为指导，例如高级设计和低级设计或任何其他概述文档。

一般来说，公开的 AOSP 设计文档很少。由于电子邮件应用程序缺少`docs/`目录 (AFAICT)，因此可以安全地假设该应用程序没有此类文档可用。

使用几年前从 AOSP 电子邮件应用程序分叉的 K-9 项目可能会更好地为您服务，并且可能有更多已发布的设计文档。

# c++ - 继承：基类的模板容器，包含派生类的实例

> ID：11482323
> 
> 赞同：1
> 
> 时间：2012-07-14T08:46:13.443
> 
> 标签：c++, oop, templates, inheritance

我按以下方式组织了三个班级。`Foo`是一个模板类，`Bar`派生自`Foo`，也`Doo`派生自`Foo`。它们都实现了一个`doX()`定义`Foo`为虚函数的成员函数。

我需要一个`Bar`和`Doo`对象的向量（或任何其他容器）。例如，一个包含两个名为 的对象的向量`vec`，第一个元素应该是 a `Doo`，第二个元素应该是 a `Bar`。当我打电话时`vec[0].doX()` `Doo::doX()`应该打电话。定义指向`Foo`对象的指针向量，完成这项工作。但我不确定实例实际存储在哪里。如果我将指针指向对象，则分配的内存可能会在离开创建对象的范围后被释放。

我准备了一个最小的工作示例来说明问题：

```
#include <iostream>
#include <vector>

using namespace std;

template <typename T>
class Foo
{
public:
    virtual void doX(){cout<<"doX from Foo"<<endl;}
};

template <typename T>
class Bar : public Foo<T>
{
public:
    void doX(){cout<<"doX from Bar"<<endl;}
    void g(string const &input);    // some test function may be used in doX
    int x;                          // some test data may be used in doX
};

template <typename T>
class Doo : public Foo<T>
{
public:
    void doX(){cout<<"doX from Doo"<<endl;}
};

void doSomething(vector<Foo<int>* >& target)
{
    Foo<int> X;
    // do some extreme job to generate X
    target.push_back(&X); // ==> This is problematic
}

int main()
{
    Foo<int> f;
    Bar<int> b;
    Doo<int> d;
    vector<Foo<int> > v;
    v.push_back(f);
    v.push_back(b);
    v.push_back(d);
    v[0].doX();             // doX from Foo
    v[1].doX();             // doX from Foo
    v[2].doX();             // doX from Foo
    vector<Foo<int>*> v2;
    v2.push_back(&f);       // here is no problem, but if `f` is generated inside
                            // a function that receives a reference to `vec` there
                            // will be problems
    doSomething(v2);        // This is problematic
    v2.push_back(&b);
    v2.push_back(&d);
    v2[0]->doX();           // doX from Foo
    v2[1]->doX();           // doX from Foo but dangerous! May crash
    v2[2]->doX();           // doX from Bar
    v2[3]->doX();           // doX from Doo

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T08:56:20.883

您已正确识别问题。您必须确保向量中的指针指向的实例至少与向量本身一样长。您可以存储指向动态分配对象的指针，这意味着您负责控制它们的生命周期。这可以通过存储指向使用`new`或者更好的是其[智能指针](http://en.wikipedia.org/wiki/Smart_pointer)创建的实例的指针来实现。

```
void addElements(vector<Foo<int>* >& target)
{
    target.push_back(new Bar<int>());
    target.push_back(new Doo<int>());
} 
```

在上面的示例中，您必须确保在完成后删除向量的元素（通常在向量超出范围之前）。

带有[std::unique_ptrs](http://en.cppreference.com/w/cpp/memory/unique_ptr)的 C++11 示例：

```
std::vector<std::unique_ptr<Foo<int>> v;
v.push_back(std::unique_ptr<Foo<int>>(new Bar<int>()); // moves the unique_ptr
v.push_back(std::unique_ptr<Foo<int>>(new Doo<int>()); // moves the unique_ptr
v.emplace_back(new Bar<int>()); // constructs the unique_ptr in place 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T08:51:56.047

我不确定我是否正确理解了您的问题，但是执行以下操作有什么问题：

```
Foo<int> *x = new ...; // e.g. new Bar<int>()
target.push_back(x); 
```

这会将 x 的值存储在堆而不是堆栈上。该对象`x`将一直存在，直到您明确删除 if (with `delete x`)。当您不再需要该对象时，您必须调用`delete x`，否则这部分内存将永远不会被释放，因此您将出现内存泄漏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T09:05:58.997

您将实例作为值引用存储在向量中。这将使用隐式复制构造函数从您的和实例构造`Foo`对象。`Bar``Doo`

您似乎正在寻找存储对对象的*引用*（正如您在示例的后面部分中尝试做的那样）。但是，为了做到这一点，您不能从`doSomething`函数中使用堆栈分配的对象，因为一旦函数返回，这些对象就会被释放。

解决此问题的一种方法是使用智能指针：

```
#include <iostream>
#include <vector>
#include <tr1/memory> // assuming g++ now

using namespace std;
using namespace std::tr1;

template <typename T>
class Foo
{
public:
    virtual ~Foo(){}
    virtual void doX(){cout<<"doX from Foo"<<endl;}
};

template <typename T>
class Bar : public Foo<T>
{
public:
    void doX(){cout<<"doX from Bar"<<endl;}
    void g(string const &input);    // some test function may be used in doX
    int x;                          // some test data may be used in doX
};

template <typename T>
class Doo : public Foo<T>
{
public:
    void doX(){cout<<"doX from Doo"<<endl;}
};

void doSomething(vector<shared_ptr<Foo<int> > >& target)
{
    Foo<int> X;
    // do some extreme job to generate X
    shared_ptr<Foo<int> > foo(new Foo<int>);
    target.push_back(foo);
}

int main()
{
    Foo<int> f;
    Bar<int> b;
    Doo<int> d;
    vector<Foo<int> > v;
    v.push_back(f);
    v.push_back(b);
    v.push_back(d);
    v[0].doX();             // doX from Foo
    v[1].doX();             // doX from Foo
    v[2].doX();             // doX from Foo
    vector<shared_ptr<Foo<int> > > v2;
    v2.push_back(shared_ptr<Foo<int> >(new Foo<int>));
    doSomething(v2);
    v2.push_back(shared_ptr<Foo<int> >(new Bar<int>));
    v2.push_back(shared_ptr<Foo<int> >(new Doo<int>));
    v2[0]->doX();           // doX from Foo
    v2[1]->doX();           // doX from Foo
    v2[2]->doX();           // doX from Bar
    v2[3]->doX();           // doX from Doo

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-14T09:22:21.377

由于理论已经解释过了，我再贴一个代码示例

```
#include <iostream>
#include <vector>
#include <boost/shared_ptr.hpp>

using namespace std;

template <typename T>
class Foo
{
public:
    virtual void doX(){cout<<"doX from Foo"<<endl;}
};

template <typename T>
class Bar : public Foo<T>
{
public:
    void doX(){cout<<"doX from Bar"<<endl;}
    void g(string const &input);   
    int x;                        
};

template <typename T>
class Doo : public Foo<T>
{
public:
    void doX(){cout<<"doX from Doo"<<endl;}
};

typedef boost::shared_ptr<Foo<int> >Ptr;

void doSomething(vector<Ptr>& target)
{
    target.push_back(Ptr(new Foo<int>));
}

int main()
{
    Foo<int> f;
    Bar<int> b;
    Doo<int> d;

    vector<Ptr> v;

    v.push_back(Ptr(new Foo<int>()));
    doSomething(v2); 
    v.push_back(Ptr(new Bar<int>(b)));
    v.push_back(Ptr(new Doo<int>(d)));

    v[0]->doX();         
    v[1]->doX();        
    v[2]->doX();       
    v[3]->doX();      

    return 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-14T12:43:56.810

对于多态对象的容器，您有两种选择（现在）：

*   使用 C++11：典型的 stl 容器，具有`unique_ptr`：`std::vector< std::unique_ptr<T> >`
*   或者简单地说，Boost 指针容器：`boost::ptr_vector<T>`

我个人更喜欢这里的 Boost Pointer Containers。它们是为此目的而设计的，并提供额外的保证（例如非无效性）和特定的糖衣（取消引用迭代器会产生 a `T&`，而不是`std::unique_ptr<T>&`您需要再次取消引用的 a ）。

# iphone - 什么触发了 cellForRowAtIndexPath？

> ID：11482324
> 
> 赞同：0
> 
> 时间：2012-07-14T08:46:18.550
> 
> 标签：iphone, xcode, uitableview

我有一个表视图，我正在尝试将数据加载到其中。从`NSLog`显示器上看，数据是正确且存在的。但是没有调用以下方法，例如`NSLog`根本没有出现评论：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *CellIdentifier = @"Cell"; 
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];    
    // UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
}
NSString *cellValue = [listOfStates objectAtIndex:indexPath.row];
cell.textLabel.text = cellValue;
return cell; 
NSLog(@"Passed: cellForRowAtIndexPath"); 
```

}

同样，init 也没有运行。我虽然 init 总是运行，如果存在的话？

```
- (id)init { 
    if ((self = [super init])) {
    listOfStates = [[NSMutableArray alloc] init];
    stateName = [[NSString alloc] init];
    NSLog(@"INIT StateName %@", stateName);
    }
return self;
 NSLog(@"Passed: init");
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T08:49:46.357

如果你把它放在`NSLog`return 之后，它将退出该方法并且 NSLog 不会被调用，每当你调用 return 时它都会退出该方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T09:12:05.730

`tableView:cellForRowAtIndexPath:`当需要一个单元格时，由其数据源上的表格视图调用，这可以是第一次显示单元格时，或者当用户滚动并且单元格将出现时

没有调用您的 init 方法，因为 UITableView 使用`initWithFrame:style:`和 UITableViewController （不清楚您要覆盖哪个 init）使用`initWithStyle:`，而不是“普通” init 方法。如果要进行自定义设置，则应覆盖这些方法

正如其他答案所提到的，您在 return 语句之后放置的任何内容都不会被执行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T08:55:09.243

回答您的问题：`tableView:cellForRowAtIndexPath:`从您的表格视图中作为数据源方法调用。要调用它，您必须将 tableviews 数据源属性设置为实现的类`tableView:cellForRowAtIndexPath:`。另一方面 sujith 是对的：`NSLog`不会在 a 之后调用`return`。

# maven - 增加 IntelliJ java 堆大小

> ID：11482334
> 
> 赞同：6
> 
> 时间：2012-07-14T08:47:41.303
> 
> 标签：maven, intellij-idea, maven-3, javac

经过大量研究，我无法得到结果。我是 IntelliJ IDEA 的新手，我使用 11.1.2 版本。我使用 3 个模块（3 个 eclipse 项目），在每个模块中，我使用以下值设置了**Preferences -> Compiler -> Java Compiler ：**

**最大堆大小 (MB)：** 512

**附加命令行参数：**

-目标 1.6 -XX:MaxPermSize=512M -Xms256m -Xmx512m -XX:PermSize=512m

**并且还配置了 Maven runner 的 VM Options 如下：**

-XX:PermSize=1024m -XX:MaxPermSize=512m -Dfile.encoding=UTF-8 -Duser.language=en

检查跳过测试...

我还更改了**Applications -> IntelliJ IDEA 12 -> Contents -> Info.plist**：

```
 <key>VMOptions</key>
      <string>-ea -Xverify:none -Xbootclasspath/a:../lib/boot.jar</string>

      <key>VMOptions.i386</key>
      <string>-Xms256m -Xmx512m -XX:MaxPermSize=512m -XX:ReservedCodeCacheSize=128m</string>

      <key>VMOptions.x86_64</key>
      <string>-Xms256m -Xmx512m -XX:MaxPermSize=512m -XX:ReservedCodeCacheSize=128m -XX:+UseCompressedOops</string>

      <key>WorkingDirectory</key> 
```

但是在进行这些更改之后，IntelliJ 显示右下角分配了 200-250 MB 的堆空间......出了什么问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-14T15:57:17.530

将`-Xms512m -Xmx1024m`设置添加到 Maven 运行器配置（不是首选项中的设置，而是我为我的项目创建的设置）为我解决了 java 堆空间错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-14T17:31:52.227

尝试将**MAVEN_OPTS as -Xms512 -Xmx1024m 添加到 windows 环境变量**中。右键单击我的计算机-> 高级-> 环境变量并尝试运行 maven 构建，看看它是否有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-20T08:25:36.333

Mac 上问题标题的真正答案在这里：[如何在 Mac 上的 IntelliJ IDEA 中增加 IDE 内存限制？](https://stackoverflow.com/questions/13578062/how-to-increase-ide-memory-limit-in-intellij-idea-on-mac)

引用 CrazyCoder：

现在它可以 `~/Library/Preferences/<appFolder>/idea.vmoptions`从`~/Library/Preferences/<appFolder>/idea.properties`.

# android - Android TabHost 初始选项卡的文本颜色不正确

> ID：11482337
> 
> 赞同：1
> 
> 时间：2012-07-14T08:48:02.970
> 
> 标签：android, android-theme, android-tabs

我在我的 TabHost 上使用 TextViews 作为指标。我为文本视图使用自定义背景，但我对文本颜色不做任何事情。在我的活动的 onCreate 方法中，设置当前选项卡没有问题。

当我启动活动时，所选选项卡的背景显示正确，选项卡的内容也是如此，但两个选项卡的文本颜色最初都是浅灰色的。但是，一旦我单击任一选项卡，从那时起所选选项卡的文本颜色就是黑色。我似乎无法找到一种以编程方式选择选项卡的方法，以将文本颜色更新为黑色，就像您实际单击选项卡时所做的那样。我试过了：

*   在选项卡主机上调用 setCurrentTab
*   在选项卡小部件上调用 setCurrentTab
*   在选项卡小部件上调用 focusCurrentTab
*   在指标文本视图上调用 setSelected(true)
*   在选项卡小部件的子视图上调用 setSelected(true)

总之，我不想应用自定义文本颜色。我只希望它使用默认主题的颜色，但我希望以编程方式选择它后的选项卡状态与单击它后的状态完全相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T13:49:47.307

我在使用 MonoDroid 时也遇到了同样的问题。

```
// Set current tab to ScheduleTab
TabHost.CurrentTab = 1;
// TODO Focus not working completely
TabHost.TabWidget.FocusCurrentTab(1); 
```

正确的选项卡已设置并处于活动状态，但文本颜色为浅灰色而不是黑色。如果使用触摸输入选择选项卡，则文本颜色变为黑色，但以编程方式设置时不会。

底部条形指示器也正确呈现，只是不是文本颜色。

我发现的解决方法是创建并使用显式选择器来设置文本颜色。

可绘制/TabTextColors.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_selected="true" android:color="#444"/>
    <item android:state_focused="true" android:color="#444"/>
    <item android:state_pressed="true" android:color="#444"/>
    <item android:color="#ccc"/>
</selector> 
```

然后从我的标签视图中引用它。

```
 <TextView
        android:id="@+id/tabsText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:padding="10dip"
        android:text="TITLE"
        android:textSize="13dip"
        android:textStyle="bold"
        android:textColor="@drawable/TabTextColors" /> 
```

# python - 在python中逐行读取一个大的压缩文本文件

> ID：11482342
> 
> 赞同：28
> 
> 时间：2012-07-14T08:48:40.477
> 
> 标签：python, stream, zip

我正在尝试使用 zipfile 模块来读取存档中的文件。未压缩文件约为 3GB，压缩文件为 200MB。我不希望它们在内存中，因为我逐行处理压缩文件。到目前为止，我注意到使用以下代码的内存过度使用：

```
import zipfile
f = open(...)
z = zipfile.ZipFile(f)
for line in zipfile.open(...).readlines()
  print line 
```

我使用 SharpZipLib 在 C# 中做到了：

```
var fStream = File.OpenRead("...");
var unzipper = new ICSharpCode.SharpZipLib.Zip.ZipFile(fStream);
var dataStream =  unzipper.GetInputStream(0); 
```

dataStream 未压缩。我似乎找不到在 Python 中做到这一点的方法。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-07-14T08:50:15.013

Python 文件对象提供迭代器，它将逐行读取。[`file.readlines()`](http://docs.python.org/library/stdtypes.html#file.readlines)将它们全部读取并返回一个列表 - 这意味着它需要将所有内容读入内存。更好的方法（应该始终优先于`readlines()`）是只循环对象本身，例如：

```
import zipfile
with zipfile.ZipFile(...) as z:
    with z.open(...) as f:
        for line in f:
            print line 
```

请注意我[对`with`语句](http://www.python.org/dev/peps/pep-0343/)的使用- 文件对象是上下文管理器，而 with 语句让我们可以轻松编写可读的代码，以确保在退出块时（即使出现异常）关闭文件。同样，在处理文件时应该始终使用它。

# linux - 执行“cvs -n update”命令时如何只查看输出中的新文件？

> ID：11482343
> 
> 赞同：0
> 
> 时间：2012-07-14T08:48:41.487
> 
> 标签：linux, repository, command, cvs

当我执行“ `cvs -n update`”命令时，我会得到一长串已修改、丢失或新的文件。在输出中，我只想查看新文件，这意味着我想查看以“？”开头的行。然后我会做“ `cvs add file_name`”并将新文件添加到存储库。我的项目是在Linux环境中。是否有特殊命令可以在屏幕上显示该输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T09:03:48.140

我不认为`cvs`对此有支持，我通常使用`grep`：

```
cvs -qn update | grep '^\?' 
```

# rest - 在 webApi 上带有嵌套 URL 的 RESTful POST

> ID：11482346
> 
> 赞同：1
> 
> 时间：2012-07-14T08:50:02.050
> 
> 标签：rest, post, asp.net-mvc-4

尝试执行 POST 以使用我自己的基于 .Net WebApi 的 REST 服务在嵌套 URL 上创建新的 REST 资源时，我遇到了以下问题。

请想象以下 url ***api/parents/{parentId}/children***我想在其上执行 POST 以添加另一个孩子。

这与中描述的问题非常相似：[Using asp webapi to post a nested resource](https://stackoverflow.com/questions/11145762/using-asp-webapi-to-post-a-nested-resource)。但是在 global.asax 中，我没有成功用*routes.MapHttpRoute(...)*定义一个路由，该路由调用我的父母控制器的方法，其中包含*{parentId}*以及要添加/发布的子对象，例如调用：

```
[HttpPost]
public HttpResponseMessage AddChildToParent(int parentId, Child newChild) {
    //implementation
} 
```

（这也是上述问题答案的不同之处，因为它没有提供任何可以添加的对象。）

我在网上搜索，但不幸的是我找不到解决方案 - 可能也是，因为我什至找不到用作*MapHttpRoute()*方法参数的*默认对象语义的官方文档。*

 *任何人都可以为我的问题建议一个有效的路由定义，或者至少发布一个指向*MapHttpRoute()*中使用的*defaults* -object 的有用文档的链接？非常感谢！

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-05T14:32:04.463

尝试将以下 Web API 路由添加到您的注册函数中。（注册函数默认传入`WebApiApplication`on `Application_Start`，继承自`System.Web.HttpApplication`, 到 function `GlobalConfiguration.Configure(...)`。默认在静态类中定义`WebApiConfig`。）

添加

```
config.Routes.MapHttpRoute(
    name: "PostChild",
    routeTemplate: "api/{controller}/{parentId}/children",
    defaults: new { action = "AddChildToParent" },
    constraints: new
    {
        httpMethod = new HttpMethodConstraint(HttpMethod.Post),
        controller = "Parents"
    }
); 
```

到注册函数，object参数在`config`哪里。`HttpConfiguration`

然后通过 URL调用`api/parents/{parentId}/children`以下方法：`ParentsController`

```
public class ParentsController : ApiController
{
    [HttpPost]
    public HttpResponseMessage Post([FromUri]int parentId, [FromBody] Child child) {
        //implementation
    }
} 
```

请注意，the`defaults`和`constraints`in 参数`MapHttpRoute`都是匿名对象，其属性名称对应于 Web API 变量名称。由于该`action`变量不能通过 URL 设置，因此它会获得一个默认值，该值指向控制器中的 Web API 方法。

该`constraints`对象限制对给定正则表达式的调用。在这种情况下，它是固定的控制器名称，但也可以是多个控制器，例如 by `"(Parents|ParentsAlternative)"`。只有满足所有约束的 Web API 调用才会导致调用 Controller 方法，此处为`AddChildToParent`。

此处的`Child`对象以 JSON 形式在 HTTP 正文中传递，如参数属性中所示`[FromBody]`。**

# iphone - iOS中的四点渐变

> ID：11482349
> 
> 赞同：12
> 
> 时间：2012-07-14T08:50:20.367
> 
> 标签：iphone, ios, core-graphics, gradient

我计划创建一个四点渐变，如下图所示，通过核心图形绘制两个线性渐变并在它们之间使用第三个黑白线性渐变进行遮罩。

有没有更有效的方法来使用核心图形或其他来绘制四点渐变？

![在此处输入图像描述](../Images/819fcf04cbfeafe3499543dd8e81a57a.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-14T15:10:07.747

画四个圆圈：

![界](../Images/70dff751f0cefd40360b186110bc423d.png)

应用径向透明渐变：

![坡度](../Images/f8869c552dfeca8cb274cc442e6b5bd3.png)

结果：

![结果](../Images/526312b0d935939f90396833ef096824.png)

笔记：

*   灰线表示位图大小。
*   圆的直径是位图直径的两倍。
*   每个圆圈都以位图角之一为中心。
*   实际上只绘制了中心部分。
*   其余部分在位图之外。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-14T15:09:41.663

使用 CGBlendMode 时可以保存遮罩渐变。只是更难控制确切的颜色。但是，如果这对您来说并不重要，那么它在代码行数和性能方面可能会更高效一些。

这是一个带有一些随机颜色和 CGBlendModeExclusion 的示例（CGBlendModeDifference 为您提供类似的效果）

```
- (void) drawRect:(CGRect)rect
{
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGContextSetBlendMode(ctx, kCGBlendModeExclusion);
    CGColorSpaceRef space = CGColorSpaceCreateDeviceRGB();

    CGFloat col1[8] = {
        1.0, 0.0, 0.0, 1.0,
        0.0, 0.0, 1.0, 1.0
    };
    CGGradientRef grad1 = CGGradientCreateWithColorComponents (space, col1, NULL, 2);
    CGContextDrawLinearGradient(ctx, grad1, CGPointMake(0, 0), CGPointMake(0, 320), 0);

    CGFloat col2[8] = {
        1.0, 0.5, 0.0, 1.0,
        0.0, 1.0, 0.0, 1.0
    };
    CGGradientRef grad2 = CGGradientCreateWithColorComponents (space, col2, NULL, 2);
    CGContextDrawLinearGradient(ctx, grad2, CGPointMake(0, 0), CGPointMake(320, 0), 0);

    CGGradientRelease(grad1);
    CGGradientRelease(grad2);
    CGColorSpaceRelease(space);
} 
```

# c# - 在字符串中搜索单词并反转字符串以保持大小写而不使用内置函数

> ID：11482353
> 
> 赞同：-6
> 
> 时间：2012-07-14T08:51:32.223
> 
> 标签：c#, c

我真的对这个问题感到困惑。只是为了澄清它不是功课，而是面试时提出的问题。我尝试了很多只是想知道如何做，但无法这样做

这是问题所在

假设它们是一个字符串

```
"Patient Bond is the best bond in the world." 
```

现在我希望在不使用内置函数和维护案例的情况下找到并反转 Patient 和 Bond 这个词。

输出现在应该是

```
"tneitaP dnoB is the best dnob in the world. " 
```

我正在使用 c 但它在我的脑海中如何做到这一点。所以我切换到 C# 但结果是一样的。

所以任何人都可以指导我，或者如果编写代码更好。

我从某个时候开始就成为会员，我知道堆栈溢出并不能为我解决整个解决方案，而只是帮助我解决问题。但真的，我被这个问题困住了，不知道该怎么做。所以请帮帮我

提前致谢。

编辑：

说真的，我不知道该怎么做。好的，不要解决这个问题，但也许有人可以就如何做到这一点给出一个想法。

**编辑 2**

现在，这是一个完美运行的解决方案，但仍然有一些内置功能，我仍在对它们进行编码，但暂时是为了再次打开问题。**现在的问题是可以通过其他方法来完成吗？**这是我想出的。

```
class Program
    {
        static void Main(string[] args)
        {
            string ret = "";
            string ar = "Patient Bond is the best bond";
            foreach (string bar in ar.Split2(" "))
            {
                if (bar.ToLower() == "patient" || bar.ToLower() == "bond")
                    ret = ret + StringExtensions.ReverseMe(bar) + " ";
                else
                {
                    ret = ret + bar + " ";
                }

            }
            Console.WriteLine(ret);
            Console.ReadLine();
        }

    }

    public static class StringExtensions
    {
        public static IEnumerable<string> Split2(this string source, string delim)
        {
            // argument null checking etc omitted for brevity

            int oldIndex = 0, newIndex;
            while ((newIndex = source.IndexOf(delim, oldIndex)) != -1)
            {
                yield return source.Substring(oldIndex, newIndex - oldIndex);
                oldIndex = newIndex + delim.Length;
            }
            yield return source.Substring(oldIndex);
        }

        public static string ReverseMe(string abc)
        {
            StringBuilder sb = new StringBuilder();
            int i = abc.Length - 1;
            while (i != -1)
            {
                sb.Append(abc[i--]);
            }
            string sbstring = sb.ToString();
            return sbstring;
        }
    } 
```

我尊重堆栈溢出，因为它让我学到了很多我无法拥有的东西。我要说的是，如果有人寻求帮助，不要只是嘲笑他们说你没有技能尝试帮助他们。我也这样做，并希望其他人也这样做。如果我听起来有点苛刻，我很抱歉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T09:22:21.477

如果您在面试中这样做，并且他们知道您是应届毕业生或缺乏经验，那么他们正在寻找您分析问题的能力。你没有在你的问题中提供一些分析问题的尝试。

在这里，我描述了一种可能的方法：

如果忽略大小写的问题看起来有点粗糙，请先假设所有字母大小写相同来解决问题。

现在，使用内置函数或标准库解决问题。这将向进行面试的人证明您了解编程语言，并且知道如何使用可用的工具。

完成后，您再查看您使用的功能，并考虑如何自己实现它们。画出每一个的伪代码。

然后，考虑需要进行哪些更改以允许这些功能在混合情况下工作。

# android - 将图像形式 android media Store 设置为图像视图

> ID：11482354
> 
> 赞同：1
> 
> 时间：2012-07-14T08:51:33.017
> 
> 标签：android, xamarin.android

我正在尝试制作一个浏览按钮，供用户选择图像。我使用以下代码：

```
void BrowseButton_Click(object sender, EventArgs e)
{
    Intent intent = new Intent(); intent.SetType("image/*");
    intent.SetAction(Intent.ActionGetContent);
    StartActivityForResult(Intent.CreateChooser(intent, "Select Picture"), 1);
}

protected override void OnActivityResult(int requestCode, Result resultCode, Android.Content.Intent data)
{
    base.OnActivityResult(requestCode, resultCode, data);

    if (resultCode == Result.Ok && requestCode == 1)
    {
        ImageView imageView = FindViewById<ImageView>(Resource.Id.MainimageView);
        Android.Net.Uri selectedImageUri = data.Data;
        var bitmap = MediaStore.Images.Media.GetBitmap(ContentResolver, data.Data);
        SherarClass.Uri = getRealPathFromURI(data.Data);
        BitmapDrawable dd = new BitmapDrawable(bitmap);
        imageView.SetImageDrawable(dd);
        bitmap.Dispose();
    }
} 
```

在它引发 Java.Long.Error 异常之后，它第一次和第二次工作。

堆栈跟踪 ：

```
 at Android.Runtime.JNIEnv.CallStaticObjectMethod (IntPtr jclass, IntPtr jmethod,     Android.Runtime.JValue[] parms) [0x00000] in <filename unknown>:0 
     at Android.Provider.MediaStore+Images+Media.GetBitmap    (Android.Content.ContentResolver cr, Android.Net.Uri url) [0x00000] in <filename unknown>:0 
     at Scannet.Activity1.OnActivityResult (Int32 requestCode, Result resultCode,    Android.Content.Intent data) [0x00000] in <filename unknown>:0 
 --- End of managed exception stack trace ---
     java.lang.OutOfMemoryError
at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:500)
at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:556)
at android.provider.MediaStore$Images$Media.getBitmap(MediaStore.java:706)
at scannet.Activity1.n_onActivityResult(Native Method)
at scannet.Activity1.onActivityResult(Activity1.java:37)
at android.app.Activity.dispatchActivityResult(Activity.java:4649)
at android.app.ActivityThread.deliverResults(ActivityThread.java:2996)
at android.app.ActivityThread.handleSendResult(ActivityThread.java:3043)
at android.app.ActivityThread.access$1100(ActivityThread.java:127)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1188)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4441)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T08:24:07.990

```
void BrowseButton_Click(object sender, EventArgs e)
 {
   Intent intent = new Intent(); intent.SetType("image/*");
   intent.SetAction(Intent.ActionGetContent);
   StartActivityForResult(Intent.CreateChooser(intent, "Select Picture"), 1);
 }

protected override void OnActivityResult(int requestCode, Result resultCode,     Android.Content.Intent data)
{
  base.OnActivityResult(requestCode, resultCode, data);

if (resultCode == Result.Ok && requestCode == 1)
{
   ImageView imageView = FindViewById<ImageView>(Resource.Id.MainimageView);
   Android.Net.Uri selectedImageUri = data.Data;
   BitmapFactory.Options op = new BitmapFactory.Options();
   op.InSampleSize = 2;
   SherarClass.Uri = getRealPathFromURI(data.Data);
   using (Bitmap bitmap = BitmapFactory.DecodeFile(SherarClass.Uri, op))
   {
       imageView.SetImageBitmap(bitmap);
       GC.Collect();
   }
} 
```

}

```
 public String getRealPathFromURI(Android.Net.Uri contentUri)
    {
        String[] projection = new String[] {Android.Provider.MediaStore.MediaColumnsConsts.Data };
        ContentResolver cr = this.ContentResolver;
        Android.Database.ICursor cursor = cr.Query(contentUri, projection,null, null, null);
        if (cursor != null && cursor.Count > 0)
        {
            cursor.MoveToFirst();
            int index =cursor.GetColumnIndex(Android.Provider.MediaStore.MediaColumnsConsts.Data);
            return cursor.GetString(index);
        }
        return null;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T10:32:39.800

尝试使用此代码。getPic 是一个按钮，用户必须单击它才能打开 MediaStore 以查看画廊类型查看器中的所有图像。

```
 getPic.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
        Intent it = new Intent(Intent.ACTION_PICK,
            android.provider.MediaStore.Images.Media.INTERNAL_CONTENT_URI);
        startActivityForResult(it, 101);
        }
    }); 
```

然后在 onActivityResult ：

```
 @Override
   protected void onActivityResult(int requestCode, int resultCode, Intent data) 
   {
    super.onActivityResult(requestCode, resultCode, data);
    switch (requestCode) {
    case 101:
      if (resultCode == RESULT_OK) {
        Uri photoUri = data.getData();
        try {
            Bitmap currentImage = MediaStore.Images.Media.getBitmap
                                      (this.getContentResolver(), photoUri);

            imgView.setImageBitmap(currentImage);
  } 
```

此代码将起作用，因为我已在我的个人项目中使用它。如果出现问题，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T11:17:09.613

我会尝试使用以下活动结果：

```
protected override void OnActivityResult(int requestCode, Result resultCode, Android.Content.Intent data)
{
    base.OnActivityResult(requestCode, resultCode, data);

    if (resultCode == Result.Ok && requestCode == 1)
    {
        ImageView imageView = FindViewById<ImageView>(Resource.Id.MainimageView);
        Android.Net.Uri selectedImageUri = data.Data;
        using (var bitmap = MediaStore.Images.Media.GetBitmap(ContentResolver, selectedImageUri))
        {
            SherarClass.Uri = getRealPathFromURI(selectedImageUri);
            using (var dd = new BitmapDrawable(bitmap))
                imageView.SetImageDrawable(dd);
        }
    }
} 
```

这会同时处理 the`Bitmap`和不再需要的`BitmapDrawable`时候，然后就不需要自己处理了。

# c# - 根据函数执行时间设置定时器间隔

> ID：11482355
> 
> 赞同：0
> 
> 时间：2012-07-14T08:51:38.817
> 
> 标签：c#, timer

如何根据函数的执行时间将我的计时器设置为间隔。

```
int main()
{
Timer t=new Timer();
t.start();
myfunc();
t.stop();
long elapsed=stop-start;
Need to set timer to this interval everytime instead of fixed interval.
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T10:02:45.093

最好的方法是使用[StopWatch 类](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)，它提供了一组方法和属性，您可以使用这些方法和属性来准确测量经过的时间。像这样的一些事情：

```
// Create new stopwatch
Stopwatch stopwatch = new Stopwatch();

// Begin timing
stopwatch.Start();

// Do something
myfunc();

// Stop timing
stopwatch.Stop();

// Write result
Console.WriteLine("Time elapsed: {0}", stopwatch.Elapsed); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T06:41:44.253

```
class Myclass
{
private static Timer newTimer;

static void main()
{
newTimer=new Timer(timercallback,null,0,10000);
}

private static timercallback(Object o)
{
Stopwatch sw=new Stopwatch();
sw.Start();
myfunction();
sw.Stop();
newTimer.change(0,sw.ElapsedMilliseconds);
GC.Collect(); 
```

//这将根据函数执行时间设置定时器间隔。}

# ios - UIView、animateWithDuration 和完成的问题

> ID：11482356
> 
> 赞同：3
> 
> 时间：2012-07-14T08:51:53.933
> 
> 标签：ios, animation, uiview

我不知道这段代码有什么问题。

> ```
> [UIView animateWithDuration:10.0f delay:0.0f options:UIViewAnimationOptionTransitionNone animations:^{
>     CGAffineTransform transform = CGAffineTransformMakeScale(0.1, 0.1);
>     self.transform = transform;
> }
> completion:^(BOOL finished) {
>     if (finished) { 
>         NSLog(@"Animation finished");
>         [[NSNotificationCenter defaultCenter] postNotificationOnMainThreadName:@"NSShowHomeScreen" object:nil ];
>     }
> }]; 
> ```

即使有 10 秒的持续时间，我也会在动画开始时立即收到控制台消息“动画完成”。

我想缩小/缩放我的第一个 UIView，然后我想显示另一个 UIView。但是现在第二个 UIView 在收缩结束之前就很好地显示出来了。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T09:22:36.290

对不起，这是我的错。我还使用了导致问题的 UIPinchGestureRecognizer。无论如何感谢您的快速回复..

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T09:19:04.897

在 UIView 文档中，对于 transform 属性，说：

> 对此属性的更改可以设置动画。使用 beginAnimations:context: 类方法开始动画块，使用 commitAnimations 类方法结束动画块。默认值是中心值（或锚点，如果更改）

所以也许它不能使用块方法进行动画处理，你将不得不在动画周围使用 begin 和 commit 包装器

# algorithm - 如何实现 T9 字典？

> ID：11482359
> 
> 赞同：4
> 
> 时间：2012-07-14T08:52:22.390
> 
> 标签：algorithm, dictionary

我们如何实现在移动设备中使用的字典？（当我们在手机中输入消息时使用）。因为它显示了可以用输入的字符组成的单词列表。

例子：

4663可以好了，走了，回家了。

467 它显示建议的单词很重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T08:59:31.980

一个**简单**的解决方案是预先计算单词并构建一个在节点中具有数字的**特里树**，并且每个叶节点都将具有到可以使用这些字符串形成的链表/数组（或其他一些数据结构）的链接位数。

在任何给定点，例如，用户输入了 4663 -> 转到最后一个节点（示例中的数字为 3）的所有非空子节点，通过各种路径到达叶节点并打印有效单词。

注意：由于位数=10 only ，因此三叉树的大小将受到限制。也可以使用三元搜索树 (TST) 代替 trie 树，但在这里，但由于只有 10 个数字，我猜使用 TST 不会有太大的优势。

*编辑*- 正如 user1168577 所指出的，使用启发式的使用频率，可以按该顺序显示单词。

# javascript - getComputedStyle 不支持“操作”

> ID：11482360
> 
> 赞同：2
> 
> 时间：2012-07-14T08:52:23.020
> 
> 标签：javascript, css, rotation, css-animations

我正在尝试从旋转动画中获取当前度数。可悲的是 Firefox 告诉我以下内容：

```
NotSupportedError: Operation is not supported
[Break On This Error]   

var style = window.getComputedStyle(el); 
```

el 如下：

```
document.getElementById('spinner'); 
```

而#spinner 是由动画旋转的图像：

```
 @-moz-keyframes spinmerightroundbaby{
    0%{ -moz-transform: rotate(0deg); } 
    100%{ -moz-transform: rotate(360deg);}
    }
    #spinner{
        -moz-animation: spinmerightroundbaby 30s linear 0s infinite;
    } 
```

不执行其他 JScode。

你能帮帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T09:07:57.003

[Rob W 提醒我](https://stackoverflow.com/questions/11482360/#comment15163431_11482360)检查 Element 是否为“null”，确实如此。

易于修复：我使用[`$(document).ready()`](http://api.jquery.com/ready/)jQuery 提供的函数来延迟执行。
那工作得很好。

# google-app-engine - 在 GPE 中创建元素失败

> ID：11482362
> 
> 赞同：0
> 
> 时间：2012-07-14T08:52:34.810
> 
> 标签：google-app-engine, gwt, eclipse-plugin

在 Google Plugin for Eclipse (GPE) 中，如果我创建一个新的 Web 应用程序项目并取消选择`Generate project sample code`，我会收到一条`Creation of Element Failed`错误消息，指出`web.xml`已经存在。

如果我选择示例代码生成，一切正常。是否有解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:35:10.843

当我取消选中“使用 Google Web Toolkit SDK”选项时，它对我有用。

# xml - 用于在 XML 中查找和替换标记值的 Perl 代码

> ID：11482365
> 
> 赞同：3
> 
> 时间：2012-07-14T08:53:16.373
> 
> 标签：xml, perl, xml-simple

下面是我将使用的 XML：

`<a>`

`<id>ABC</id>`

`<class />`

`<gender />`

`</a>`

我想编写一个搜索标记“id”并将值“ABC”替换为“DEF”的 Perl 代码。

然而，上述 XML 的嵌套可以改变。因此，我想制作一个通用代码来搜索标签“id”，而与它的确切位置无关。

到现在为止，我能够获得可以替换 ABC 中的值的逻辑，但这会使我的代码静态标记“id”的位置。

```
#!usr/bin/perl
use warnings;
use XML::Simple;
use Spreadsheet::ParseExcel;
use Data::Dumper;
my $FileName = 'sample.xls';
my $xml_file = 'hello.xml';
$par=$ARGV[0];
my $xml = XMLin($xml_file,
    KeepRoot=>1,
    ForceArray=>1,);
$xml->{a}->[0]->{id}='DEF';
XMLout(
    $xml,
    KeepRoot =>1 ,
    NoAttr =>1,
    OutputFile => $xml_file,
        );
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-14T09:25:33.090

XPath 能够找到节点而不需要知道树中的位置。

```
use strictures;
use XML::LibXML qw();
my $dom = XML::LibXML->load_xml(string => <<'XML');
<a>
<id>ABC</id>
<class />
<gender />
</a>
XML

for my $id ($dom->findnodes('//id[string()="ABC"]')) {
    $id->removeChildNodes;
    $id->appendText('DEF');
}

print $dom->toString 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T10:33:51.043

一个简单的 XML::Twig 解决方案是：

```
#!/usr/bin/perl

use strict;
use warnings;

use XML::Twig;

my $FILE= 'id.xml';

XML::Twig->new( twig_handlers => { 'id[string()="ABC"]' => sub { $_->set_text( 'DEF'); } },
                keep_spaces => 1,
              )
          ->parsefile( $FILE)
          ->print_to_file( $FILE); 
```

只是为了好玩：一个高效的 XML::Twig 解决方案有点复杂，主要是因为你不能`string()`使用`twig_roots`. 尽管如此，它仍然非常紧凑，并且它永远不会将整个文件加载到内存中。

```
#!/usr/bin/perl

use strict;
use warnings;

use XML::Twig;

XML::Twig->new( twig_roots =>    { id => sub { $_->flush }, },
                twig_handlers => { 'id[string()="ABC"]' => sub { $_->set_text( 'DEF'); } },
                twig_print_outside_roots => 1,
              )
          ->parsefile_inplace( 'id.xml'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-28T10:25:36.447

perl -i.bak -pe 's/abc/def/g' myfile.xml

你会得到一个新文件 myfile.xml.bak

# linux - 内存映射 i/0 在 linux 中工作

> ID：11482368
> 
> 赞同：1
> 
> 时间：2012-07-14T08:53:48.700
> 
> 标签：linux, operating-system

我是操作系统的新手。当说地址空间的某些部分是为 i/o 保留时，我不明白这到底是什么意思？

这是否意味着如果我有 4GB RAM，该地址的某些部分是为 i/o 保留的？

如果使用了诸如***read***后跟该地址的指令，cpu 是否将其视为 i/o？

如果有人澄清我的理解会很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T09:12:48.870

传统上，一些计算机有单独的 IO 和内存总线。内存总线连接到内存，IO 总线连接到各种外围设备。

然而，由于各种原因（例如访问速度、制造单独 IO 总线的成本等），一些外围设备被映射到内存（例如，视频卡，其中快速访问对于快速图形是必需的）。这意味着即使它们不是（或仅部分）类似内存的设备，它们也连接到内存总线。

例如在微控制器上，它们通常有一个公共总线，用于内存和 IO。原因是这些设备的 CPU 引脚有限，不需要很高的速度（如果你有共享的 IO/内存总线，性能会受到限制）

要回答您的问题：

*   “为 IO 保留”：这意味着对于这些内存地址，您应该将 IO 设备连接到处理器。例如，在 ATMEL 微控制器的情况下，前 64 个字节为 IO 保留，您可以使用特殊指令轻松访问它们（而不是使用内存读/写指令）。

*   4GB 内存：不要混淆内存的逻辑和物理映射。如果是 PC，则有一个翻译设备，您可以对它进行编程以在两者之间进行翻译。这意味着，您的 4GB 物理内存可以映射到逻辑地址空间中的任何位置（远大于 4GB）。这意味着，对于那些为 IO 保留的地址空间（例如上面提到的显卡地址），内存不会丢失，您可以简单地将其映射到地址空间中的其他位置。

*   如果在 IO 地址空间上使用内存读/写操作，这会导致读/写外设。CPU 通常不知道有一个 IO 设备映射到该地址，它只是将请求的地址发送到总线，然后读取该值（在这种情况下由外设而不是内存给出）。

# sql - 需要优化且高效的查询

> ID：11482372
> 
> 赞同：0
> 
> 时间：2012-07-14T08:54:05.683
> 
> 标签：sql, query-optimization

```
PID UID Req Res

1   101 C   to
2   101 A   from
3   101 B   to
4   102 A   from
5   102 B   from 
```

我想编写一个查询来从满足以下条件的表中获取所有记录。

我想获取 Res='to' 的所有记录的 UID。对于这些特定的 UID，我想获取 Req='A' 的记录。我写了一个示例查询，它也有效。请在下面找到查询。

```
SELECT Res,
       UID,
       Req
FROM   TABLE
WHERE  Req = 'A'
       AND UID = (SELECT DISTINCT( UID )
                  FROM   TABLE
                  WHERE  Res = 'to') 
```

上述查询的问题在于，在 SQL Server 2008 中运行时，它仅获取 15-20 条记录就运行了一个多小时。记录总数很大，因为这是一个生产表。我想知道为什么查询运行时间很长，以及我是否可以获得相同的优化查询。

谢谢，普拉巴

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T09:42:01.533

尝试使用 a`JOIN`而不是子查询：

```
SELECT a.Res,
       a.UID,
       a.Req
  FROM TABLE a
  JOIN (SELECT UID FROM TABLE WHERE Res = 'to' GROUP BY UID) b
       ON a.UID = b.UID
 WHERE a.Req = 'A' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T14:36:20.900

我看到其他帖子表明以下内容可能更有效：

```
SELECT Res, UID, Req
FROM TABLE t
WHERE  Req = 'A' and
       exists (select * from table t2 where t2.res = 'to' and t.uid = t2.uid) 
```

从逻辑上讲，它做同样的事情，但在这种情况下，相关子查询可能会产生更好的查询计划。

它还取决于选择性 Req 和 Res 是谁（涉及的行多还是只有几行）。如果表中的许多行满足条件，则有使用 windows 函数的替代公式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T15:16:40.930

您的查询如此缓慢的原因是您的引擎可能正在为*它考虑的每一行*运行该子查询，并且该查询可能是隐式聚合（因为它使用 DISTINCT）。每一行都需要做很多工作，而且当它稍后进入结果集时，它可能会做大量的交换来实现它。

此查询将表连接到自身，条件是连接的行具有相同的 UID*并且*Res = 'to'。根据两个因素过滤行：至少有一个匹配行具有相同的 UID 和 Res='to'，以及 Req='A'。

这将是一个非常快速的解决方案，原因如下： 查询引擎经过优化，可以尽快从结果集中消除行。对于 PID=1、3、&5 的行，由于 Req != 'A'，引擎将立即将它们从考虑中丢弃（甚至不执行连接）。对于 PID=2 行，连接将匹配第 1 行，然后*通常*甚至不会继续连接到第 3 行（因为它通过 DISTINCT 关键字（以及没有选择连接中的列的事实）知道与join 不会改变结果集）。对于 PID=4，它不会匹配任何东西。

```
SELECT DISTINCT main_row.Res,
       main_row.UID,
       main_row.Req
FROM   TABLE AS main_row
JOIN   TABLE AS res_join 
       ON main_row.UID = res_join.UID 
       AND res_join.Res = 'to'
WHERE  main_row.Req = 'A' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T15:45:53.097

由于可能只是您对 DISTINCT 的使用导致了问题，因此这些值得探索。显然它们非常接近您的原始形式。

```
SELECT Res, UID, Req FROM TABLE
WHERE  Req = 'A'
    AND UID = (SELECT t2.UID FROM TABLE as t2 WHERE Res = 'to' GROUP BY t2.UID)

SELECT Res, UID, Req FROM TABLE
WHERE  Req = 'A'
    AND UID = (SELECT MIN(t2.UID) FROM TABLE as t2 WHERE Res = 'to') 
```

# iphone - 在 Xcode 中，info.plist 中的包名称不会更改包名称（.app 文件名）

> ID：11482373
> 
> 赞同：4
> 
> 时间：2012-07-14T08:54:07.473
> 
> 标签：iphone, ios, xcode, macos

我正在开发 iPhone 应用程序。

我`Bundle name`在 info.plist 中进行了更改。
但`.app`不要从`<project name>.app`.

*`.app`文件显示在项目导航器底部（屏幕左侧）的 Products 文件夹中。

我相信`.app`文件被调用`bundle`并且`Bundle name`应该更改`.app`名称。
我错了还是我错过了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-14T09:00:15.657

应用程序名称（也是显示名称）由名为产品名称的变量设置。U 可以在目标的构建设置中更改它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T09:07:22.130

我不知道我的问题是否正确！

但是，如果您只想更改项目的名称，您只需在项目导航器中单击项目名称两次，两次单击之间有一秒钟的间隔！

如果您想更改应用程序的名称，该应用程序将出现在 iPhone 设备中

你可以把它写在 infoPlist.strings 这样

> "CFBundleDisplayName" = "youAPPName";

我希望这会有所帮助

# c# - WPF UserControl 实时刷新

> ID：11482374
> 
> 赞同：1
> 
> 时间：2012-07-14T08:54:15.000
> 
> 标签：c#, wpf, dynamic-data-display

我使用[D3](http://dynamicdatadisplay.codeplex.com/)（动态数据显示）创建了一个显示实时更新折线图的图表窗口。
我正在尝试将其嵌入[WPF MDI](http://wpfmdi.codeplex.com/)

我必须将图表窗口类型从“Window”更改为“UserControl”才能嵌入它，但是当它加载到 MDI Child 中时，图表保持为空并且不显示符合预期的实时更新行。

```
 D3.MyChartControl c = new  D3.MyChartControl();
            MdiChild newWindow = new MdiChild();
            newWindow.Content = c;
            Container.Children.Add(newWindow); 
```

图表每秒更新一次，通过`sendPoint()`绑定到它的 ObservableDataSource 的方法向它添加数据（不在用户控件中时完美工作）

```
List<ObservableDataSource<DatePoint>> srcListLive = new List<ObservableDataSource<DatePoint>>();
public void sendPoint(DatePoint p, int graphIndex)
{          
  srcListLive[graphIndex].AppendAsync(Dispatcher, p);
} 
```

# android - 设备后退按钮如何导致上一个活动？

> ID：11482378
> 
> 赞同：1
> 
> 时间：2012-07-14T08:54:39.167
> 
> 标签：android

朋友们，

我有三项活动

A,B,C

A是主屏幕。

活动按A->B->C展开

在活动 B 中，我正在编写以下代码。

```
 Intent i = new Intent(Intent.ACTION_DIAL);
        String p = "tel:" + getString(R.string.phone_number);
        i.setData(Uri.parse(p));
        startActivity(i); 
```

为此，它会转到 dail pad，然后当按下设备返回按钮时，它会转到 A。我的要求是转到 B。

请帮我 。提前致谢。

```
 Intent i = new Intent(Intent.ACTION_DIAL);
        String p = "tel:" + getString(R.string.phone_number);
        i.setData(Uri.parse(p));
        startActivity(i); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T09:12:54.400

您可以使用 startActivityforResult()。

开始活动时使用。startActivityForResult(intent, requestCode);

```
Intent i = new Intent(Intent.ACTION_DIAL);
    String p = "tel:" + getString(R.string.phone_number);
    i.setData(Uri.parse(p));
    startActivityForResult(i, 0); 
```

方法

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
} 
```

将在返回活动时调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T09:12:41.193

您可以重写 onBackPressed 方法来控制返回按钮的行为：

```
 @Override
    public void onBackPressed() {
         // code to go to Activity B.
    } 
```

# php - 唯一点击数 (php) 计为一对（带逗号）

> ID：11482382
> 
> 赞同：0
> 
> 时间：2012-07-14T08:55:22.310
> 
> 标签：php, ip, unique

这与其说是“天哪，一切都在崩溃”，不如说是“这里发生了什么？”

找到这个 php 代码来计算唯一命中 - 基本上它所做的就是将 IP 放入一个文本文件中，然后计算该文件中有多少个唯一 IP。

```
 $filename = "/XXX/XXX/public_html/XXX.txt";
    if (!file_exists($filename))
    {
    $fd = fopen($filename, "w+");
    fclose($fd);
    }
    $file = file($filename);
    $file = array_unique($file);
    $hits = count($file);
    $fd = fopen($filename, "r");
    $fstring = fread($fd, filesize($filename));
    fclose($fd);
    $fd = fopen($filename, "w");
    $fcounted = $fstring . "
    " . $_SERVER["HTTP_X_FORWARDED_FOR"];
    $fout = fwrite($fd, $fcounted);
    fclose($fd); 
```

但是，在某些情况下，我会注意到一些 IP 以逗号分隔对的形式插入。

通常，它会是：

```
1.1.1.1

2.2.2.2

3.3.3.3 
```

但是，有几行是这样的：

```
1.1.1.1,2.2.2.2 
```

由于代码在 99% 的情况下都可以顺利运行，并且逗号分隔仅在极少数情况下发生，因此我倾向于相信它不是代码。有任何想法吗？（不，XXX 不是文件的名称，也不是文件的路径。）

HTTP_X_FORWARDED_FOR 所以它可以绕过 Cloudflare（否则它只会发布 Cloudflare 的 IP）

# regex - ColdFusion - 输出 JavaScript 以与 Highchart.js 一起使用

> ID：11482385
> 
> 赞同：0
> 
> 时间：2012-07-14T08:55:47.590
> 
> 标签：regex, coldfusion, highcharts

我有一个要传递给函数的 JSON 字符串。该字符串是动态生成的，可能包含不同的“名称”参数。它看起来像这样（格式化以便于阅读）：

```
<cfset x = "
    series: [
       {
           name:inbounds,
           data:
              [
                 [Date.UTC(2012,4,1),0],
                 [Date.UTC(2012,4,2),0],
                 [Date.UTC(2012,4,3),0]
              ]
       },
       {
           name:outbounds,
           data:
              [
                 [Date.UTC(2012,4,1),0],
                 [Date.UTC(2012,4,2),0],
                 [Date.UTC(2012,4,3),0]
              ]
       },
       {
           name:api,
           data:
              [
                 [Date.UTC(2012,4,1),441],
                 [Date.UTC(2012,4,2),441],
                 [Date.UTC(2012,4,3),443]
              ]
       },
       {
           name:excess,
           data:
              [
                 [Date.UTC(2012,4,1),0],
                 [Date.UTC(2012,4,2),0],
                 [Date.UTC(2012,4,3),0]
              ]
       }
    ] 
"> 
```

但是，我需要将“name”参数的值用单引号括起来，例如，我需要用单引号代替 。`name:inbounds`因此`name:'inbounds'` ，我需要一些可以搜索此字符串、找到名称参数并在其值周围加上单引号的东西。

## 编辑

我这样做的原因是因为在我对数组调用 serializeJSON 之后，它会生成以下内容（简称为快照）：

```
[{"NAME":"Excess","DATA":[["Date.UTC(2012,5,1)",0],...... 
```

CF 将所有内容都放在双引号中。我正在使用的 Highcharts API 不希望这样。所以，我摆脱了双引号

```
<cfset x = replace(x, """", "", "all")> 
```

然后我需要在字符串 vars 上加回单引号。

如果有更好的方法，我愿意接受。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T11:50:25.173

> *“字符串是动态生成的”*。

此时添加单引号。

（如果您遇到问题，请发布它的代码，我们可以解决该问题。）

事后使用正则表达式不是理想的解决方案。

**更新：**现在我们有更多关于你实际在做什么的信息......

这是将 CF 数据转换为 JS 字符串以用于 Highcharts 的代码的概念验证。

这是一个*部分*解决方案——我还没有完成整个[Highcharts API](http://highcharts.com/ref)，下面的一些代码只实现了一半，有些部分可能希望以不同的方式完成，但总的来说它应该让你了解它是如何工作的。

如果您（和/或其他任何人）想要获取下面的代码并将其扩展为 highcharts.cfc，我相信这对 CFML 社区可能有用...

* * *

### 代码：

```
<cffunction name="convertToHighchartsJs" returntype="String" output=false >
    <cfargument name="CfData" type="Struct" required />

    <cfif NOT StructKeyExists(Arguments.CfData,'Series')>
        <cfthrow message="Does not look like Highcharts data" />
    </cfif>

    <cfreturn "series:#serializeForHighcharts(Arguments.CfData.Series)#" />
</cffunction>

<cffunction name="serializeForHighcharts" returntype="String" output=false >
    <cfargument name="Data"       type="any"    required />
    <cfargument name="Name"       type="String" optional />
    <cfargument name="ParentName" type="String" optional />

    <cfset var JsString = "UNABLE TO SERIALIZE" />

    <cfif isStruct(Arguments.Data) >
        <cfsavecontent variable="JsString"><cfoutput><!---
            --->{<!---
                ---><cfloop item="local.CurItem" collection=#Arguments.Data#><!---
                    --->,#fixCase(CurItem)#:#serializeForHighcharts(Arguments.Data[CurItem],CurItem)#<!---
                ---></cfloop><!---
            --->}<!---
        ---></cfoutput></cfsavecontent>

        <cfset JsString = rereplace(JsString,'^\{,','{') />

    <cfelseif isArray(Arguments.Data) >

        <cfsavecontent variable="JsString"><cfoutput><!---
            --->[<!---
                ---><cfloop index="local.CurItem" array=#Arguments.Data#><!---
                    --->,#serializeForHighcharts(CurItem)#<!---
                ---></cfloop><!---
            --->]<!---
        ---></cfoutput></cfsavecontent>

        <cfset JsString = rereplace(JsString,'^\[,','[') />

    <cfelseif isSimpleValue(Arguments.Data) >

        <cfset var ShouldBeQuoted = false />

        <cfif StructKeyExists(Arguments,'Name')>
            <cfif ListFindNoCase('name,text,renderTo,type,color,layout,align,verticalalign',Arguments.Name)>
                <cfset ShouldBeQuoted = true />
            </cfif>

        <cfelseif StructKeyExists(Arguments,'ParentName') AND ListFindNoCase('categories',Arguments.ParentName) />
            <cfset ShouldBeQuoted = true />

        </cfif>

        <cfif ShouldBeQuoted >
            <cfset JsString = "'" & JsStringFormat(Arguments.Data) & "'" />
        <cfelse>
            <cfset JsString = Arguments.Data />
        </cfif>

    </cfif>

    <cfreturn JsString />
</cffunction>

<cffunction name="fixCase" returntype="String" output="false" access="private">
    <cfargument name="Text" type="String" required />

    <cfif NOT StructKeyExists(Variables,'Camels')>
        <cflock type="exclusive" name="regen_camels" timeout=10>
            <cfset Variables.Camels = StructNew() />
            <cfloop index="CurCamel" list="dataParser,dataURL,legendIndex,xAxis,yAxis">
                <cfset Variables.Camels[CurCamel] = CurCamel />
            </cfloop>
        </cflock>
    </cfif>

    <cfif StructKeyExists(Variables.Camels,Arguments.Text)>
        <cfreturn Variables.Camels[Arguments.Text] />
    <cfelse>
        <cfreturn Lcase(Arguments.Text) />
    </cfif>

</cffunction> 
```

### 测试：

```
<cfset CfData =
    { 'Series':
        [
            { 'name':'inbounds'
            , 'data':
                [ ['Date.UTC(2012,4,1)',0]
                , ['Date.UTC(2012,4,2)',0]
                , ['Date.UTC(2012,4,3)',0]
                ]
            }
        ,
            { 'name':'outbounds'
            , 'data':
                [ ['Date.UTC(2012,4,1)',0]
                , ['Date.UTC(2012,4,2)',0]
                , ['Date.UTC(2012,4,3)',0]
                ]
            }
        ]
    } />

<cfset Expected = "series:[{name:'inbounds',data:[[Date.UTC(2012,4,1),0],[Date.UTC(2012,4,2),0],[Date.UTC(2012,4,3),0]]},{name:'outbounds',data:[[Date.UTC(2012,4,1),0],[Date.UTC(2012,4,2),0],[Date.UTC(2012,4,3),0]]}]" />

<cfset JsString = convertToHighchartsJs(CfData) />

<cfif JsString EQ Expected>
    <h1 style="color:green">Matches</h1>
<cfelse>
    <h1 style="color:red">different</h1>
</cfif>

<cfdump var=#{Received:JsString,Expected:Expected}# /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T15:00:46.400

如果您必须使用正则表达式，那么这应该可以

```
reReplace(json, "\bname\b.*?:([^,]+)", "name:'\1'", "All") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T08:05:12.450

我认为您的问题的根本原因是您变量中的字符串`x` *不是*JSON：它不符合[JSON 模式](http://en.wikipedia.org/wiki/JSON)。

因此，最好的办法是从一开始就确保它的格式良好，而不是事后修复它。

正如@Peter 所提到的，如果您可以控制字符串的创建，那么就从头开始吧。如果您从第三方获得它，请与他们联系并指出这一点，他们可能会修复它。

您可以随时使用[JSONLint](http://jsonlint.com/)来验证您的字符串，以确保您做对了。

# javascript - 是否可以通过javascript设置文件上传输入的内容（数据）？

> ID：11482391
> 
> 赞同：2
> 
> 时间：2012-07-14T08:56:47.847
> 
> 标签：javascript, html, file-upload, blob

我正在使用 html5 画布来更改图像。我希望能够使用生成的画布图像数据使用***相同的文件上传字段***发送到服务器。（或者，可以通过***在现有表单中添加一个新字段***）。

我已将图像转换为 Blob，但似乎将此类数据发送到服务器的唯一方法是使用 FormData，它需要自己的（单独的）XMLHttpRequest。这对我来说是不可取的。

（**上下文**：我试图在页面上以*任意形式劫持**任意*文件输入字段。因此，我不想更改提交表单的方法，并且我还想*避免更改服务器端的任何内容，*因为好吧。基本上，我认为这样做的唯一方法是重新使用或替换文件字段。可能不可能，但我想我会问。）

# android - 获取 TabHost 默认系统颜色

> ID：11482392
> 
> 赞同：0
> 
> 时间：2012-07-14T08:56:51.547
> 
> 标签：android, colors, android-tabhost, gradient

我不想更改 TabHost 我只想在选择时获得选项卡按钮的第一个渐变颜色（例如三星 TouchWiz 中的浅蓝色）

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T12:19:42.310

好吧，我想我可以用它来获得可绘制的背景......

```
tabWidget.getBackground(); 
```

...但不是颜色本身，因为背景是图像。

# php - PHP不读取文件？

> ID：11482395
> 
> 赞同：0
> 
> 时间：2012-07-14T08:57:07.223
> 
> 标签：php, fread

我不知道我到底哪里错了。我已将问题缩小到 $file 未设置为任何内容，我不知道我哪里出错了。请帮忙 ：）

代码：（$_GET['unit'] 为 1）

```
 $filepathhalf = "http://sureclean.netai.net/data/";
                $date = date("Ymd");
                $unitnum = $_GET['unit'];
                $ext = ".txt";
                $filepath = $filepathhalf.$unitnum.$date.$ext;
                $bool = file_exists($filepath);
                if($bool = true)
                {
                    $fh = fopen($filepath, 'r');
                    $file = fread($fh, 4);
                    fclose($fh);
                }
                else{};
                $file = strval($file);
                echo $file; 
```

你的网站/数据/120120714.txt：

```
true 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T08:59:52.703

### 文件已存在

调用的函数`file_exists`仅适用于**本地**文件，您无法通过此函数检查网络上的资源（通过*HTTP*）是否可用。

这与您在以下代码段中使用分配而不是比较的事实一起提供了脚本的错误行为。

```
if($bool = true) 
  { ... } 
```

* * *

### 开放

`fopen`并不总是允许从外部源读取，但您确定这是必需的吗？如果您的文件确实是本地文件，请不要尝试通过网络阅读它，因为您可以通过更简单的方式访问它。

* * *

### 恐惧

第二个参数`fread`指定要读取的最大字节数，您当前指定的位置`4`。

目前您正在尝试从存储在 中的文件句柄中读取*4*`$fh`个字节，并且您确实在读取这四个字节。

*$file*将仅包含空格，因为这是存储在文件的前四个字节中的内容，如果您`yourwebsite/data/120120714.txt`正确缩进了问题中的内容 - 也就是说。

* * *

### 我如何一次读取整个文件？

PHP 提供了一个名为的函数，该函数`file_get_contents`将读取整个文件并将其作为字符串返回，但如果您真的在寻找一种读取文件的方法，`fread`您应该使用以下内容：

```
$file_data = fread ($fh, filesize ($filename)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T09:03:56.083

if 条件下的矿工错误：

```
if($bool == true)
{
     // do the stuff
}
else{
     // also show some message here if file does not exists.
} 
```

您可以使用其他一些功能来读取文件。比如：file('filename.txt'); 或 file_get_contents('filename.txt');

# c++ - MVS 中的 SDL 奇怪的链接器错误

> ID：11482396
> 
> 赞同：0
> 
> 时间：2012-07-14T08:57:38.317
> 
> 标签：c++, visual-studio-2010, sdl, linker-errors

我很难将 SDL 库与 MVS 2010 中的新 C++ Win32 控制台应用程序链接起来。

我下载了最新的 SDL 开发库，并执行了通常的步骤：

1.  将包含添加到包含路径 ( [pic](http://i.imgur.com/cEPyg.png) ) [这工作正常，因为 MVS 找到 #include 文件]
2.  添加了 SDL 的库路径（[图片](http://i.imgur.com/a8DQW.png)）[这似乎工作正常，因为删除此附加路径会产生错误“错误 LNK1104：无法打开文件'SDL.lib'”]
3.  将 SDL.lib 和 SDLmain.lib 添加到链接器附加依赖项（[图片](http://i.imgur.com/jKaxK.png)）

我编辑了主文件以获得一些测试代码，使其看起来像这样：

```
#include "stdafx.h"
#include <iostream>
#include <stdlib.h>
#include "SDL.h"

int _tmain(int argc, _TCHAR* argv[])
{
int a;

SDL_Init(SDL_INIT_AUDIO|SDL_INIT_VIDEO);

std::cout << "Pong" << std::endl;
std::cin >> a;

return 0;
} 
```

当我编译时，我得到以下链接器错误：

```
Error   1   error LNK2019: unresolved external symbol _SDL_Init referenced in function _wmain   D:\All\Proyects\PFC\RT-Pong\RT-Pong\RT-Pong\RT-Pong.obj RT-Pong
Error   2   error LNK1120: 1 unresolved externals   D:\All\Proyects\PFC\RT-Pong\RT-Pong\Debug\RT-Pong.exe   1   1   RT-Pong 
```

如果我有一个损坏的 .lib，我从 0 开始再次下载了整个东西，并得到了相同的结果。老实说，我被难住了，这似乎是我忽略的一个粗心的简单错误。因此，如果有人对此事有一些新的意见，那真的会让我很开心。

谢谢，詹姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T15:02:20.193

我认为由于“在 SDL 的库路径中定义的路径错误”导致链接错误

在`Project->Properties->Configuration Properties->Linker->General->Additional Library Directories`

从此更改路径：`D:\All\Proyects\PFC\RT-Pong\SDL-1.2.15\lib\x64`

进入这个：`D:\All\Proyects\PFC\RT-Pong\SDL-1.2.15\lib\x86`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T10:52:46.627

尝试删除：

```
#include "stdafx.h"
#include <stdlib.h> 
```

转变：

```
int _tmain(int argc, _TCHAR* argv[]) 
```

到

```
int main(int argc, char* argv[]) 
```

在项目属性中设置为“控制台应用程序”

阅读： http: [//lazyfoo.net/SDL_tutorials/lesson01/windows/msvsnet2010e/index.php](http://lazyfoo.net/SDL_tutorials/lesson01/windows/msvsnet2010e/index.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T14:30:34.753

确保您正在链接到 lib 文件并确保 SDL.dll 在您的 system32 或 sysWOW64（对于 x64 pc）或您正在从文件夹运行程序的目录中，如果您不确定它们是否已链接，您可以使用以下链接它并确保您的项目设置为控制台。

```
#pragma comment(lib, "SDLmain.lib")
#pragma comment(lib, "SDL.lib") 
```

并始终记住在完成后正确关闭 SDL 并释放资源：

```
SDL_Quit();
return 0; 
```

同样，当从您的一般包含文件夹链接时，使用尖括号更安全.. 即：

```
#include <SDL/SDL.h> 
```

这是一个小[示例程序](http://bpaste.net/show/eidCkSLklqjROdm3RPvY/)..所以只要 .dll 位于我上面列出的位置之一，这应该可以工作。

# c - 实际值存储在 pstr 中，但值如何存储在数组“WORD”中

> ID：11482398
> 
> 赞同：-1
> 
> 时间：2012-07-14T08:57:57.130
> 
> 标签：c

我怀疑该值如何存储在“WORD”中，因为 PStr 包含实际输出。？

由于小写到大写字母存储在 Pstr 中，那么在 printf 中如何将其作为“WORD”给出。任何人都可以请。解释？

```
#include<stdio.h>
#define CASE 5

int main (void)
{
    char word[50];
    char *pstr = word;
    char mask;

    printf("enter a word");
    fgets(word,sizeof(word)-1,stdin);
    printf("original string : %s\n",word);

    mask = 1<<CASE;
    mask =~mask;

    while (*pstr != '\n')

    {
        *pstr = *pstr & mask;
        pstr++;
    }

printf("modified string: %s\n",word);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T09:05:22.467

`pstr`是一个指向的指针，`word`因此它们可以互换使用（`word`但是您不应该修改）。

在 C 中，当你声明一个数组时，数组的变量是一个指向数组的指针。

# ruby-on-rails - Rails Form builder选择框问题参数未通过

> ID：11482399
> 
> 赞同：0
> 
> 时间：2012-07-14T08:58:22.787
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

在我的应用程序中，通过称为分配的模型，设置列表包含许多歌曲，反之亦然。在我的表单中，我希望用户能够通过创建新分配从现有库中选择歌曲以添加到设置列表中。我遇到的问题是我想使用多选框，但无论我在其中选择哪首歌曲，歌曲 ID 在保存时都会设置为 1。我目前的表格如下：

```
<div>
  <%=nested_form_for @allocation do|builder|%>
    <%=builder.label :song_id, "Pick a song" %>

     <%= builder.hidden_field :setlist_id, value: @setlist.id %>

     <%= builder.select(:song_id, options_for_select(@selections), 
     {}, {multiple: true, size: 7}) %>

    <%= link_to "Cancel", setlist_path(@setlist), class: "btn btn-large btn-danger" %>

    <%=builder.submit "Add Song", class: "btn btn-large btn-primary", id: "addSongToSet" %>
  <% end %>
</div> 
```

如果我将“：html”添加到多选框，则此表单可以正常工作，即：

```
 <%= builder.select(:song_id, options_for_select(@selections), 
     {}, html: {multiple: true, size: 7}) %> 
```

但这随后会将表单更改回单个下拉框。

当我尝试使用多选框时呈现的 html 是：

```
<select id="allocation_song_id" multiple="multiple" name="allocation[song_id][]"  size="8">
<option value="1">...</option>
<option value="2">...</option> 
```

我知道问题在于 name="allocation[song_id][]" 的行，它似乎传递了一个空值的散列。我只是不知道如何在使用多选框时解决这个问题。

通过以下方式在控制器中找到@selections：

```
@selections = Song.all.collect {|s| [ [s.title, s.artist].join(" by "), s.id] } 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:04:30.537

我正在使用多个选择标签来选择多个产品。

我正在获取一系列产品并显示为，

```
= select_tag "产品", options_from_collection_for_select(@products, :id, :product_name), :multiple => true

```

因此，在 params[:products] 中，您将获得所选产品的 ID。它为我工作。

# javascript - jQuery 插件的自定义事件与回调

> ID：11482402
> 
> 赞同：1
> 
> 时间：2012-07-14T08:59:11.327
> 
> 标签：javascript, jquery

对于我自己的插件，有什么更好的架构解决方案可以扩展它们——回调（就像许多其他插件一样）或自定义事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T09:01:20.337

它们非常相似，但回调有一个明显的缺点：您只能附加一个。

通过事件，您的库使用者可以根据需要绑定任意数量的处理程序。

所以 - 我个人为事件投票。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T09:24:42.237

IMO 在面向公众的插件中使用事件总是更好。但是如果你正在寻找更好的性能并且是一个支持插件，而不是一个独立的插件，那么使用[回调](http://api.jquery.com/jQuery.Callbacks/)总是更好的（因为没有模拟事件冒泡）。

根据文档，最好使用[jQuery.Callbacks](http://api.jquery.com/jQuery.Callbacks/)（从 v1.7 开始）：

> 一个多用途的回调列表对象，它提供了一种强大的方法来管理回调列表。

而不是自定义回调处理程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T09:35:25.850

将[Dojo](http://dojotoolkit.org/reference-guide/dojo/Deferred.html)和[jQuery](http://api.jquery.com/category/deferred-object/)的`Deferred`对象用于允许多个回调的回调。它是`Promise`设计模式的一种实现。

# vb.net - 在刽子手游戏中只接受一次信件（通过文本框输入）VB.NET

> ID：11482406
> 
> 赞同：0
> 
> 时间：2012-07-14T08:59:54.407
> 
> 标签：vb.net, validation, textbox, vb.net-2010

我必须为学校项目制作一个刽子手游戏，其中一个要求是在游戏过程中只接受一封信。我允许用户通过在文本框中输入字母来猜测这个词，所以我只是想知道是否有人知道我如何验证这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T09:05:16.707

您可以将用户已经输入的所有字母存储到某些数据结构中，例如哈希表（更快）/数组（必须遍历整个数组）。然后，当用户在信箱中输入下一个字母时，只需检查存储的先前输入的字符，以查找之前是否输入过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T09:09:02.987

理论上您可以使用任何集合类型，但最好使用具有内置键的集合类型，例如 sortedlist 或字典，这将阻止添加任何重复的字母。显然，如果再次使用相同的字母，您需要处理（或忽略）抛出的异常。

# java - 将一维 JSON 数组解析为普通数组

> ID：11482411
> 
> 赞同：0
> 
> 时间：2012-07-14T09:00:29.697
> 
> 标签：java, json, parsing, getjson

我有来自 php 的字符串，比如说

```
stringName={instruction:["1","2","3"]} 
```

我想把 tat 字符串变成一个数组我试过这个

```
stringName= stringName={instruction:["1","2","3"]}
JSONArray menuitemArray = null;

    String[] result= null;
    try
    {
        jObject = new JSONObject(stringName);
        menuitemArray = jObject.getJSONArray("instruction");

        for (int i=0; i<menuitemArray.length(); i++) 
        {
            result[i] = menuitemArray.getJSONArray(i).toString();
        }
    }
    catch (JSONException e1)
    {
        e1.printStackTrace();
    } 
```

但它给了我错误:(

有人知道正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T09:18:43.167

*menuitemArray*是一个数组，所以使用`getString(index)`方法来读取一个元素，

```
str=menuitemArray.getString(i); 
```

而且你不能使用`result`数组，因为它没有*初始化*。使用`List<String>`而不是数组。

# java - 使用线程池退出线程时的无限循环

> ID：11482412
> 
> 赞同：3
> 
> 时间：2012-07-14T09:00:35.007
> 
> 标签：java, mysql, multithreading

我正在使用多线程的代码。相关代码的结构如下：

```
try {
    ExecutorService threadExecutor = Executors.newFixedThreadPool(10);

    while (resultSet.next()) {
        name = resultSet.getString("hName");
        MyRunnable worker = new Myrunnable(name);
        threadExecutor.execute(worker);
        Counter++;
    }

    //This never appears
    System.out.println("End while with counter" + Counter);

    threadExecutor.shutdown();
    System.out.println("thread shutdown"); //this never appears

    // Wait until all threads are finish
    while (!threadExecutor.isTerminated()) {
        threadExecutor.awaitTermination(1, TimeUnit.SECONDS);
        System.out.println("inside the thread termination loop."); //I have infinite loop

    }

    System.out.println("Finished all threads"); //never appears

} catch (Exception e) {
    e.printStackTrace();
}

System.out.println("END MAIN");

DBConnection.con.close(); 
```

run 函数肯定会结束。我的数据库中的姓氏执行所需的功能，其线程结束。

```
//The constructor
MyRunnable (String name)  {
    this.name=name;
}

public void run() {
    myclass Obj=new myclass();
    try {
        Obj.myFunction(name);
    } catch (Exception e) {
        System.out.println("Got an Exception: "+e.getMessage());
    }
    System.out.println(" thread exiting" + this.name);
} 
```

我的问题是我的程序正确执行了所有内容，除了在最后一个线程中，我看到带有数据库中姓氏的“线程退出”。但是线程执行器永远不会关闭，程序进入无限循环。

**编辑**

这是从数据库中提取名称的主要代码。

```
try {
        st = DBConnection.con.createStatement();

        resultSet = st.executeQuery("select hName from schema1.table1  where checked=1 order by hName");

    } catch (Exception e) {
        System.out.println("DB Error: " + e.getMessage());

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T15:42:12.063

这是我对正在发生的事情的最佳猜测：

首先，我怀疑这两条评论：

```
//This never appears
System.out.println("End while with counter" + Counter);

threadExecutor.shutdown();
System.out.println("thread shutdown"); //this never appears 
```

不正确。我强烈怀疑实际上您确实收到了这些消息，但是它们与您的其他消息混合在一起（例如“线程退出”消息），因此您会错过它们。

其次，我怀疑有时会`Obj.myfunction(name)`挂起。如果`Obj.myfunction`涉及写回数据库，这尤其有可能——它在大多数情况下都能正常工作，但时不时地（更可能是更多的行）你会遇到数据库死锁。因此，事实上，您不会为*每个*名称都收到“线程已退出”消息，但是在列表中间找到一两个没有给您该消息的消息将是困难的。

为了确定是否是这种情况，我将在您的 Java 程序处于无限循环时生成它的线程转储。在 Unix/Mac 上，您可以通过打开另一个窗口并执行 来执行此操作， java 进程的进程 ID`kill -3 PID`在哪里。`PID`在 Windows 中，我认为您需要使用的组合键是 Ctrl-Break。在线程转储中，查看线程池的工作线程是否卡在对`Obj.myfunction`.

`ResultSet`数据库死锁的一种可能来源是您在程序结束时关闭数据库连接本身之前不会关闭您的。我会添加一个电话到

```
resultSet.close(); 
```

在你的`while`循环结束之后，就在你打印出关于`"End while with counter"`. 如果您在添加该语句后仍然看到数据库死锁发生，那么您将不得不提出一个不同的问题，重点是该函数`myfunction`正在做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:43:14.713

您的最后一条评论更有意义：当您运行`executor.execute(..)`它并不意味着该线程将立即运行，即使它立即启动，它也不会打印“线程退出”消息，直到它完成。同时，主线程继续运行并将：

*   打印`System.out.println("End while with counter" + Counter);`
*   运行`threadExecutor.shutdown();`which 应该几乎立即返回
*   `System.out.println("thread shutdown");`也几乎立即打印。

换句话说，如果您的线程正在做的任何事情都需要一点时间，那么这两行将在任何线程完成其任务之前打印出来。

现在，如果您的程序没有退出，正如已经评论过的那样，很可能是因为`Obj.myFunction(name)`正在执行的操作 - 如果由于某种原因该调用永远不会结束，并且您的结果集的记录多于线程池的大小，则`while (!threadExecutor.isTerminated())`循环将永远不会结束。

# objective-c - Cocos2d - 如何使用 Box2d 创建过山车

> ID：11482417
> 
> 赞同：1
> 
> 时间：2012-07-14T09:01:22.493
> 
> 标签：objective-c, cocos2d-iphone, box2d

我想创造像过山车这样的游戏并尝试为它制作火车..

我试过用 boxbody 创建火车

火车代码：

```
-(void)addTrainAtPos:(CGPoint)pos:(int)n:(CCLayer *)Layer
{
    b2BodyDef BodyDef;
    BodyDef.type = b2_dynamicBody;

    b2PolygonShape box;
    b2FixtureDef fixtureDef;

    fixtureDef.density = 0.5f;
    fixtureDef.friction = 0.0f;
    fixtureDef.restitution = 0.0f;

    box.SetAsBox(ptm(15), ptm(10));
    fixtureDef.shape = &box;

    b2Body *Body;
    b2Body *LastBody;

    b2DistanceJointDef Djoint;

    BodyDef.position.Set(ptm(pos.x - (0 * (30 + Spacing))), ptm(pos.y));
    BodyDef.fixedRotation = true;
    Body = world->CreateBody(&BodyDef);
    Body->CreateFixture(&fixtureDef);

    LastBody = Body;

    for (int i=1; i<n; i++) 
    {
        BodyDef.position.Set(ptm(pos.x - (i * (30 + Spacing))), ptm(pos.y));
        BodyDef.fixedRotation = true;
        Body = world->CreateBody(&BodyDef);
        Body->CreateFixture(&fixtureDef);

        //Djoint.Initialize(LastBody, Body, LastBody->GetWorldCenter(), Body->GetWorldCenter());
        //world->CreateJoint(&Djoint);
        //LastBody = Body;

    }

} 
```

我还尝试在火车之间创建关节并尝试使用 continue LinearVelocity 移动它

```
-(void)MoveTrain
{
    for(NSValue *Val in Bodies)
    {
        b2Body *Body = (b2Body *)[Val pointerValue];
        b2Vec2 old = Body->GetLinearVelocity();
        if(old.x < 20)
            Body->SetLinearVelocity(b2Vec2(Speed, old.y));
    }
} 
```

但我的问题是，当我跳火车时，我对第一个引擎施力，但我的整个火车跳得并不完美，而不是我试图对整个火车一个接一个地施力，所有转向架都有一些延迟，但我也没有变得完美，所以请给我任何相关代码来创建火车和移动并完美地跳跃它..

# javascript - 如何将 JavaScript 变量值转换为 PHP 变量

> ID：11482418
> 
> 赞同：1
> 
> 时间：2012-07-14T09:01:35.550
> 
> 标签：javascript

我实际上需要获取 HTML 表格行数（`<tr>`）。使用 JavaScript 我很容易得到表行的计数，但现在我实际上想在我无法做到的 PHP 变量中使用该计数。请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T19:08:38.287

这会将 js 变量转换为 php 变量，将 php 变量转换为 js 变量

```
<script>
function jstophp(){

var javavar=document.getElementById("text").value;  

document.getElementById("rslt").innerHTML="<?php 
$phpvar='"+javavar+"'; 
echo $phpvar;?>";
}

function phptojs(){

var javavar2 = "<?php 

$phpvar2="I am php variable value";
echo $phpvar2;

?>";
alert(javavar2);
}

</script> 
<body>
<div id="rslt">
</div>

<input type="text" id="text" />
<button onClick="jstophp()" >Convert js to php</button>
<button onClick="phptojs()">Convert php to js</button>

PHP variable will appear here:
<div id="rslt2">
</div>

</body> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T09:11:34.390

您的 javascript 在浏览器中。您的 PHP 在服务器上。要将此计数计入服务器上的 PHP，您有多种选择：

1.  您可以对服务器进行 ajax 调用，并将表格行数从浏览器传递到您的服务器。
2.  如果您正在请求一个新页面，您可以使用 URL 末尾的 URL 参数对 URL 中的行数进行编码`?rowCnt=49`，您将在 PHP 中解析出 URL。
3.  如果您只是直接向服务器发出将加载新页面的请求，您还可以执行 Post 并通过 post 发送数据（类似于前面的选项，即 GET 而不是 POST）。
4.  如果行数只是在最初由服务器上的 PHP 生成的 HTML 中，那么您可以使用一些服务器端逻辑来计算该 rowcnt 使用最初生成页面的相同逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T09:19:01.457

我认为您正在尝试读取 PHP 中的行数。因此，您可能想尝试使用输入字段，例如

将此添加到 HTML

```
<input type="hidden" id="rowCount"/> 
```

在 JS 代码中

```
<script>
var objInputFieldRowCount = docuement.getElemendbyId("rowCount");
var jsRowCount = table.getElementsByTagName("TR").length;
objInputFieldRowCount.value = jsRowCount;
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T11:06:46.007

我已经包含一个简单的对象，它允许您将数据发送到 PHP 脚本。POST 同步以保持简单。我还包括一个简单的 php 脚本来读取数据。

```
var phpSend = phpSend || 
{
    sent: false,
    xmlhttp: null,
    xmlhttpstatus:null ,

    // You would call this function when you need to send your data
    sendInfo: function()
    {

            // Your Data
            var tableData = "&tableRowCount=" + yourTableRowCount ;

            // The url where the php file is situated
            var httpstring =  'http://www.mywebsite.com/php/table.php' ;

            phpSend.ContactXMLHttpRequest(httpstring,tableData) ;

            // Check to see if http request for table was OK
            if(phpSend.xmlhttpstatus == true)
            {
                // Do something here

            }

    },

    ContactXMLHttpRequest: function(url,data)
    {
        if (phpSend.xmlhttp)
        {
            phpSend.xmlhttp.onreadystatechange=phpSend.stateChanged;
            phpSend.xmlhttp.open("POST",url,false);
            phpSend.xmlhttp.setRequestHeader('Content-Type','application/x-www-form-urlencoded');
            phpSend.xmlhttp.send(data);
        }
    },

    stateChanged: function()
    {   
        if(phpSend.xmlhttp.readyState==4)
        {
            if (phpSend.xmlhttp.status==200)
            {
                phpSend.xmlhttpstatus = true ;
            }
            else
            { 
                    phpSend.xmlhttpstatus = false ;
            }
        }
    },

    InitXMLHttpRequest: function()
    {
        if (window.XMLHttpRequest)
        {
            // code for IE7+, Firefox, Chrome, Opera, Safari
            return new XMLHttpRequest();
        }

        if (window.ActiveXObject)
        {
            // code for IE6, IE5
            return new ActiveXObject("Microsoft.XMLHTTP");
        }

        alert ('Your browser does not support XMLHTTP!');

        return null;
    }           

} ;

//-----------------------------------------------------------------------------------------------------------------------
//
//  Run on load
//
//-----------------------------------------------------------------------------------------------------------------------
(function()
{   
    phpSend.xmlhttp=phpSend.InitXMLHttpRequest();

})() ;

//-----------------------------------------------------------------------------------------------------------------------
//
//  PHP code that will be sitting on your server (for this example, 'http://www.mywebsite.com/php'  and called 'table.php')
//
//-----------------------------------------------------------------------------------------------------------------------

<?php
        // Pick up the count and do what you need to do
        $count = $_POST["tableRowCount"]; 
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-22T11:48:52.053

将 JavaScript 值转换为 PHP 的最佳示例：

JavaScript

```
<script type="text/javascript">
    var ja =50;
</script> 
```

PHP

```
<?php 
    $dummy = "<script>document.write(ja)</script>";
    echo $dummy; 
?> 
```

# android - 如何增加android应用程序的响应时间？

> ID：11482419
> 
> 赞同：0
> 
> 时间：2012-07-14T09:01:37.737
> 
> 标签：android, listview

我正在开发一个 Android 应用程序，当应用程序从 Web 服务获取一些数据时，它会显示一段时间的空白屏幕。我怎样才能防止这种情况发生？我会很感激帮助。

```
 protected void onListItemClick(ListView l, View v, final int position,
        long id) {
    super.onListItemClick(l, v, position, id);

    progressDialog = ProgressDialog.show(ProjectListActivity.this,
            "Please wait...", "Loading...");

    new Thread() {

        public void run() {

            try {
                String project = titles.get(position - 1);

                performBackgroundProcess(project);

            } catch (Exception e) {

                Log.e("tag", e.getMessage());

            }

            progressDialog.dismiss();
        }

    }.start();

private void performBackgroundProcess(String project) {

    String spaceId = null;
    String spaceName = null;
    /*
     * for (Space space : spaces){
     * if(space.getName().equalsIgnoreCase((String) ((TextView)
     * v).getText())){ spaceId = space.getId(); } }
     */
    for (Space space : spaces) {

        if (project.equals(space.getName())) {

            newSpace = space;
        }

    }

    spaceId = newSpace.getId();
    spaceName = newSpace.getName();

    /*
     * Intent intent = new Intent(this, SpaceComponentsActivity.class);
     * intent.putExtra("spaceId", spaceId); intent.putExtra("tabId", 0);
     * intent.putExtra("className", "TicketListActivity"); TabSettings ts =
     * new TabSettings(); ts.setSelTab(1); this.startActivity(intent);
     */
    Intent intent = new Intent(this, SpaceComponentsActivity.class);
    intent.putExtra("spaceId", spaceId);
    intent.putExtra("tabId", 0);
    intent.putExtra("spaceName", spaceName);

    // intent.putExtra("className", "TicketListActivity");
    TabSettings ts = new TabSettings();
    ts.setSelTab(0);
    ts.setSelTabClass("TicketListActivity");
    this.startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T09:03:07.157

这意味着您正在 UI 线程上运行与网络相关的操作。您应该考虑使用 an`AsyncTask<?, ?, ?>`来在网络线程中运行操作以防止 UI 锁定。

例子：

```
@Override
public void onResume() {
    super.onResume();
    new MyAsyncTask().execute();
}

private class MyAsyncTask extends AsyncTask<Void, Void, Void> {

    @Override
    protected Void doInBackground(Void... params) {

         // Do your network operations here

    }

    @Override
    protected void onPostExecute(Void result) {

       // Add items to your ListView here

    }

} 
```

# c# - 用相同的对象调用 2 个不同的类

> ID：11482420
> 
> 赞同：0
> 
> 时间：2012-07-14T09:01:39.170
> 
> 标签：c#, arrays, class, object

我对 c# 编程真的很陌生，所以如果我的术语有误，请纠正我。

我想问一下，是否可以使用来自同一个对象的 2 个不同的类。代码如下：

```
 //from the Animal Class;
  public void Run()
  {  
     int counter = 0;
     string input = "Beagle";
     string input2 = "Fox Terrier";
    Dog[] al = new Dog[10];
    do
    {
    al[counter] = new Dog();
    al[counter].validateAnimal(input);
    al[counter] = new Breed();
    Breed br = (Breed)al[counter];
    br.validateBreed(input2);
    }while(counter < 10)
 }   
    //Dog Class
    //Dog : Animal
    public void validateDog(string In)
    {
    if(In == "Beagle")
    {
    Console.WriteLine("Ok");
    }
    }

//breed class 
// Breed : Dog
public void validateBreed(string In)
{
if(In == "Fox Terrier")
{
Console.WriteLine("Great");
}
} 
```

我想要做的是在主类中运行 validateDog 和 validateBreed 时同时运行它。我还需要让 Breed 是 Dog 的派生类，而 Dog 是动物的派生类。似乎没有语法错误。但 validateBreed 没有显示。

似乎是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T09:04:40.010

> 需要有 Breed 是 Dog 的派生类

这是一个错误的要求。品种不是一种“狗”，品种是一种`property of Dog`。您应该在类中创建一个属性`Breed`，而不是创建派生`Dog`类。

您可以在一个中列出所有可用的品种`enum`或为其定义一个类。

```
public enum Breed { Beagle, Husky }

public class Dog
{
    public Dog(Breed breed)
    {
        this.Breed = breed;
    }

    public Breed Breed { get; private set; }
} 
```

请注意，品种是在构造函数中传递的，并且不能在`Dog`类外修改，因为狗通常不会改变品种。

更新：

你应该发布你的整个代码。很难说你现在在做什么。从您的示例中，这应该可以工作：

```
var breed = new Breed();
breed.validateDog("");
breed.validateBreed(""); 
```

因为这两种方法都是公开的。

您可能希望将虚拟方法定义`validate`为基类并在派生类中覆盖它。

# javascript - 更改html中的背景图片

> ID：11482421
> 
> 赞同：0
> 
> 时间：2012-07-14T09:01:47.873
> 
> 标签：javascript, html

在文件夹中，我有以下图像 w1.jpg，w2.jpg...... w7.jpg，现在我有此代码用于在我的 html 页面上显示 w1.jpg

```
<html>
<body >
<div style='position:absolute;z-index:0;left:0;top:0;width:100%;height:100%'>
  <img src='w1.jpg' style='width:99%;height:99%' alt='[]' />
</div>

</body>
</html> 
```

我想知道，如何编写脚本，在特定的时间间隔内将图像从 w1.jpg 更改为 w7.jpg，据我所知，javascript 中使用了 setInterval 函数，但你能帮助理解我必须如何在我的代码中使用它？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T09:10:54.983

我认为您应该为此设置背景图像样式。这比在后台创建 z-indexed div 要好得多。

然后通过 javascript 更改 CSS（假设您使用 jQuery 选择 body 元素）：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
  var ii = 1;
  setInterval(function(){
    var image = "w" + ii + ".jpg";
    console.log(image);
    $("body").css("background-image", "url('" + image + "')");
    ii++;
  }, 1000);
</script> 
```

当然，您需要在正确的时间停下来，当最后一张图像出现时。

从下面的评论中编辑：如果您不想使用 jQuery（但我鼓励您熟悉它），您可以将以`$`符号开头的行更改为：

```
document.body.style.backgroundImage = "url('" + image + "')"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T09:23:02.210

您必须定义图像 id

```
var i=2;
function change_image()
{
    if(i==8)
    {
        i=1;
    }

    var img="w"+i+'.jpg'
    document.getElementById("img1").src=img;
    i++;
    setTimeout("change_image()",5000);
} 
```

**HTML 代码**

```
<img id="img1" src="w1.png" /> 
```

调用javascript函数它将在5秒内改变图像

```
<script>
change_image();
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T09:13:06.633

好吧，无需详细说明如何改进代码（避免内联 css 等），最简单的方法是给图像一个 id，然后把它放在 HTML 页面的末尾

```
<div style='position:absolute;z-index:0;left:0;top:0;width:100%;height:100%'>
  <img id="change-me" src='w1.jpg' style='width:99%;height:99%' alt='[]' />
 </div>
<script>
var
    images = [ "w1.jpg", "w2.jpg", "w3.jpg" ] //the list of images
  , imgToCHange = document.getElementById( 'change-me' )
  , interval = 1000 //in ms
  ;

setInterval( function(){
  images.unshift( images.pop() );
  imgToCHange.src = images[0];
 }, interval );

</script>
</body>
</html> 
```

# c++ - 如何强制转换优先于其他转换？

> ID：11482422
> 
> 赞同：4
> 
> 时间：2012-07-14T09:01:50.687
> 
> 标签：c++, type-conversion, operator-precedence

我有课：

```
class IntegerVector:
{
    IntegerVector operator * (const int scalar) const;
};

class RealVector:
{
    RealVector(const IntegerVector &other);
    RealVector operator * (const double scalar) const;
}; 
```

我怎样才能强制表达：`integer_vector*1.5`等同于`RealVector(integer_vector)*1.5`而不是`integer_vector*int(1.5)`现在？

## 编辑

顺便说一句，这些运算符有很多，所以定义`RealVector IntegerVector::operator * (const double scalar) const`不是很令人满意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T10:14:46.867

在 C++11 中，您可以像这样利用内置类型提升：

```
#include <type_traits>

class IntegerVector;
class RealVector;

template <class T> struct VectorForType {};
template <> struct VectorForType<int> {typedef IntegerVector type;};
template <> struct VectorForType<double> {typedef RealVector type;};

// This is where we figure out what C++ would do..
template <class X, class Y> struct VectorForTypes
{
  typedef typename VectorForType<decltype(X()*Y())>::type type;
};

class IntegerVector
{
public:
    template <class T> struct ResultVector
    {
      typedef typename VectorForTypes<int, T>::type type;
    };

    template <class T>
    typename ResultVector<T>::type operator*(const T scalar) const;
};

class RealVector
{
public:
    template <class T> struct ResultVector
    {
      typedef typename VectorForTypes<double, T>::type type;
    };

    RealVector();
    RealVector(const IntegerVector &other);

    template <class T>
    typename ResultVector<T>::type operator*(const T scalar) const;
};

int main()
{
  IntegerVector v;
  auto Result=v*1.5;
  static_assert(std::is_same<decltype(Result), RealVector>::value, "Oh no!");
} 
```

如果你不需要 decltype，你也可以将类型提升结果实现为元函数。我想一个运算符实现看起来像这样：

```
template <class T> inline
typename ResultVector<T>::type IntegerVector::operator*(const T scalar) const
{
  typename ResultVector<T>::type Result(this->GetLength());
  for (std::size_t i=0; i<this->GetLength(); ++i)
    Result[i]=(*this)*scalar;
  return Result;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T10:13:43.247

你可以使用这样的东西......这是解决方案，但很奇怪，但我无法发明更好的东西。

```
#include <iostream>
#include <type_traits>

class IntegerVector;

class RealVector
{
public:
    RealVector(const IntegerVector &other) { }
    RealVector operator * (const double scalar) const { std::cout << "RealV called" << std::endl;  return *this; }
};

class IntegerVector
{
public:
    IntegerVector operator * (const int scalar) const
    {
       std::cout << "IntV called" << std::endl;
       return *this;
    }
    template<typename T>
    typename std::conditional<std::is_same<T, int>::value, IntegerVector, RealVector>::type
    operator * (const T scalar) const
    {
       decltype(operator *<T>(scalar)) object(*this);  
       return object * scalar;
    }
};

int main()
{
   IntegerVector v;
   v * 1.5;
} 
```

[http://liveworkspace.org/code/b72cde05ca287042300f4aff0f185a42](http://liveworkspace.org/code/b72cde05ca287042300f4aff0f185a42)

# eclipse - Juno 的 SICStus Eclipse SPIDER 菜单中的“编译 Prolog 代码”(Alt+K) 发生了什么？

> ID：11482424
> 
> 赞同：0
> 
> 时间：2012-07-14T09:02:19.440
> 
> 标签：eclipse, eclipse-plugin, eclipse-juno, sicstus-prolog

我刚刚从 Eclipse Indigo 升级到 Classic Eclipse 4.2 Juno，通过以下 URL 下载：ftp: [//ftp.uninett.no/pub/eclipse/eclipse/downloads/drops4/R-4.2-201206081400/eclipse-SDK-4.2 -win32-x86_64.zip](ftp://ftp.uninett.no/pub/eclipse/eclipse/downloads/drops4/R-4.2-201206081400/eclipse-SDK-4.2-win32-x86_64.zip)[](ftp://ftp.uninett.no/pub/eclipse/eclipse/downloads/drops4/R-4.2-201206081400/eclipse-SDK-4.2-win32-x86_64.zip)

我在 Eclipse Juno 中安装了 SPIDER，来自这个更新 URL： [http ://www.sics.se/sicstus/update/](http://www.sics.se/sicstus/update/)

现在，当我启动 Juno 时，我不再能够使用快捷键 ALT+K 来编译当前的 Prolog 代码。该选项也从 SPIDER 提供的 SICStus 菜单中删除。

任何人都可以解释为什么会发生这种情况，或者如何处理它？我想编译我的代码而不需要大量输入！谢谢。我尝试过使用与以前相同的工作区和全新的工作区。

编辑：我在 Win7 64 位系统上，安装了全新的 Juno Classic（SPIDER 插件除外）和全新的工作区。

EDIT2：Alt+K 似乎出现在第一个新创建或打开的文件中，但是当我对其他 *.pl 文件执行“文件->打开”时，SICStus 菜单上的 Alt+K 选项“移动”仅适用于这个新文件（不再用于其他文件）。这种行为对我来说似乎很奇怪。

EDIT3：在 Per Mildner 的一些支持答案之后，我能够得到这个“几乎可以工作”，例如对于新打开的文件，一次一个。我现在正在等待他从八月假期回来，或者等待其他人为这个奇怪的问题提供更好和更永久的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T09:56:45.497

该问题是由 Eclipse 4.2 和早期版本之间的不兼容引起的。该问题已在最新版本的 SPIDER (0.0.42) 中得到修复。

（我是SPIDER的作者）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:51:54.090

我浏览了 Per Mildner 的支持检查表，在第 2 项之后，我发现 Alt+K 适用于在新会话中新打开的第一个 prolog 文件，但不适用于以前会话中的文件，或者在第一个会话之后打开的文件.

以下是要尝试的事情，在每一步之后，验证问题是否仍然存在：

1.  重新启动 Eclipse。
2.  在旧工作区中创建一个新的 Prolog 项目，向其中添加一些 prolog 文件。
3.  使用新的工作区。
4.  使用 -clean 选项启动 eclipse，例如[How to run eclipse in clean mode？如果我们这样做会发生什么？](https://stackoverflow.com/questions/2030064/how-to-run-eclipse-in-clean-mode-and-what-happens-if-we-do-so)

我目前在 Windows7（64 位）上的“解决方法”是单击 Eclipse 窗口底部附近的 SICStus-tab 内部。这实际上激活了编辑器中当前文件的 ALT+K 选项。

# android - 使用 API 更改初始 GPS 配置？

> ID：11482425
> 
> 赞同：1
> 
> 时间：2012-07-14T09:02:23.697
> 
> 标签：android, gps, supl

梦梦，

我想在德国北部更改（在 ICS 中）/system/etc/gps.conf 文件中的一些值以获得更好的值，以加快 locationManager/locationProvider 的启动。

是否有可能（无需植根设备）以编程方式使用 android API 读取/设置这些值，甚至暂时用于我的应用程序？

**伊迪丝：**来自 etc/gps/gpsconfig.xml 的 fe

```
- <job id="Assisted_Cold_Starts">
  - <task repeat="1000000">
    <startup ignore_rom_alm="true" ignore_ram_alm="true" /> 
  - <asst>
    - <!-- pos Lat="-30.0" Lon="-50.0" Alt="50" /--> 
      <pos Lat="33.7691" Lon="-84.4062" Alt="300" /> 
    - <!-- pos Lat="37.0" Lon="-122.0" Alt="50" /--> 
    - <!-- pos Lat="37.26533652" Lon="-121.94128855" Alt="51.4" /--> 
    </asst>
    <req_pos_single acc="50" timeout="30" /> 
    </task>
  </job> 
```

并来自 /etc/gps.conf：

```
NTP_SERVER=tw.pool.ntp.org
XTRA_SERVER_1=http://xtra1.gpsonextra.net/xtra.bin
XTRA_SERVER_2=http://xtra2.gpsonextra.net/xtra.bin
XTRA_SERVER_3=http://xtra3.gpsonextra.net/xtra.bin
SUPL_HOST=http://207.114.133.116
SUPL_PORT=59910 
```

想把它改成

```
NTP_SERVER=de.pool.npt.org
SUPL_HOST=supl.google.com
SUPL_PORT=7276 
```

# node.js - Express：如何从配置中读取值

> ID：11482427
> 
> 赞同：0
> 
> 时间：2012-07-14T09:02:27.080
> 
> 标签：node.js, configuration, express

我是 NodeJS 新手，有一个非常简单的问题。

我想将服务器的端口存储在应用程序配置中。我使用这样的东西将它存储在应用程序配置中：

```
app.configure(function(){
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.bodyParser());

  // My configuration:
  app.set('port', 80);
}); 
```

但是如何使用端口的值？[我在Express 文档](http://expressjs.com/guide.html#configuration)中找不到答案。

类似的东西`console.log('Port: ' + app.get('port'));`不起作用（`TypeError: Array.prototype.toString is not generic`）。

有没有更好的/其他方式来使用 express 框架存储一个简单的配置值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T03:19:09.437

更简单：`app.set(setting)`只有一个参数返回`setting`. 这具有不使用依赖于实现的特性的优点，并且在 3.xx 中也可以使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T09:39:39.303

如果你使用 Express 2.xx 那么看看函数 set(key, value) 的定义： [https ://github.com/visionmedia/express/blob/2.5.11/lib/http.js#L436](https://github.com/visionmedia/express/blob/2.5.11/lib/http.js#L436)

`Line 444: this.settings[setting] = val;`

所以这应该有效：

```
console.log(app.setting['port']); 
```

# linq - 使用 linq 连接三个表

> ID：11482438
> 
> 赞同：0
> 
> 时间：2012-07-14T09:04:27.297
> 
> 标签：linq, entity-framework, code-first

我有三个表：

```
 public class Description
    {
        public int DescriptionID { get; set; }

        // Attributes 

        public virtual List<Image> Image { get; set; }     

    }

public class Image
    {
        public int ImageID { get; set; }

        // Attributes       

        [Required]
        public int DescriptionID { get; set; }

        [ForeignKey("DescriptionID")]
        public virtual Description Description { get; set; }

        public virtual List<ImageSection> ImageSection { get; set; }
    }

public class ImageSection
    {
        public int ImageSectionID { get; set; }

        // Attributes

        public int? ImageID { get; set; }

        [ForeignKey("ImageID")]
        public virtual Image Image { get; set; }

     } 
```

我有`DescriptionID`。`ImageSection`获取具有该 DescriptionID 的所有 s 的 linq 将是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T09:17:52.783

```
var result = dbContext.Images.Include(i => i.ImageSections)
                 .Where(j => j.DescriptionID == 1)
                 .SelectMany(im => im.ImageSections).ToList(); 
```

我希望这个能帮上忙

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T09:14:46.047

这应该可以解决问题

```
var descriptions = new List<Description>();

            var descriptionId = 1;

            var result =
                descriptions.Where(d => d.DescriptionID == descriptionId).SelectMany(
                    im => im.Image.SelectMany(ims=> ims.ImageSection)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T05:04:25.783

鉴于您的问题描述，您似乎不需要加入三个表。由于您已经拥有`DescriptionID`要加入的表格，因此可以忽略该`Description`表格。

试试这个：

```
var query1 =
    from i in db.Images
    where i.DescriptionID == descriptionID
    join s in db.ImageSections on i.ImageID equals s.ImageID
    select s; 
```

但是，由于您的表定义已经包含子集合，您可以做一个基本的操作`SelectMany`而不用担心连接本身。

试试这个作为替代方案：

```
var query2 =
    from d in db.Descriptions
    where d.DescriptionID == descriptionID
    from i in d.Image
    from s in i.ImageSection
    select s; 
```

# pthreads - 未定义对“pthread_key_create”的引用

> ID：11482445
> 
> 赞同：3
> 
> 时间：2012-07-14T09:05:49.370
> 
> 标签：pthreads

这是构建日志，有人可以帮忙吗？

```
gcc -DHAVE_CONFIG_H -DHAVE_VERSION_H -DLIBRARY_DIR="\"/usr/local/lib\"" -DSBIN_DIR="\"/usr/local/sbin\"" -I. -I.. -I../zmq/include -g -D_REENTRANT -D__EXTENSIONS__ -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -D_LARGE_FILES  -g -O2 -w -pedantic -std=gnu99 -I../../mysql-connector-c-6.0.2-linux-glibc2.3-x86-32bit/include -c -o dbtool.o dbtool.c
gcc -o dbtool dbtool.o -g  -O2 -Wall -W -Wshadow -pedantic -std=gnu99 -Wl,--export-dynamic  -ldl -lpthread -lstdc++ -lrt -luuid -L../../mysql-connector-c-6.0.2-linux-glibc2.3-x86-32bit/lib -lmysqlclient -lm
../../mysql-connector-c-6.0.2-linux-glibc2.3-x86-32bit/lib/libmysqlclient.a(my_thr_init.c.o): In function `my_thread_global_init':
/export/home2/tmp/cteam/bs/connector-c-32bit/src/mysql-connector-c-6.0.2/mysys/my_thr_init.c:121: undefined reference to `pthread_key_create'
../../mysql-connector-c-6.0.2-linux-glibc2.3-x86-32bit/lib/libmysqlclient.a(my_thr_init.c.o): In function `my_thread_init':
/export/home2/tmp/cteam/bs/connector-c-32bit/src/mysql-connector-c-6.0.2/mysys/my_thr_init.c:317: undefined reference to `pthread_getspecific'
../../mysql-connector-c-6.0.2-linux-glibc2.3-x86-32bit/lib/libmysqlclient.a(my_thr_init.c.o): In function `my_thread_global_init':
/export/home2/tmp/cteam/bs/connector-c-32bit/src/mysql-connector-c-6.0.2/mysys/my_thr_init.c:335: undefined reference to `pthread_setspecific'
../../mysql-connector-c-6.0.2-linux-glibc2.3-x86-32bit/lib/libmysqlclient.a(my_thr_init.c.o): In function `my_thread_destroy_mutex':
/export/home2/tmp/cteam/bs/connector-c-32bit/src/mysql-connector-c-6.0.2/mysys/my_thr_init.c:260: undefined reference to `pthread_getspecific'
../../mysql-connector-c-6.0.2-linux-glibc2.3-x86-32bit/lib/libmysqlclient.a(my_thr_init.c.o): In function `my_thread_init':
/export/home2/tmp/cteam/bs/connector-c-32bit/src/mysql-connector-c-6.0.2/mysys/my_thr_init.c:317: undefined reference to `pthread_getspecific'
/export/home2/tmp/cteam/bs/connector-c-32bit/src/mysql-connector-c-6.0.2/mysys/my_thr_init.c:335: undefined reference to `pthread_setspecific'
../../mysql-connector-c-6.0.2-linux-glibc2.3-x86-32bit/lib/libmysqlclient.a(my_thr_init.c.o): In function `my_thread_end':
/export/home2/tmp/cteam/bs/connector-c-32bit/src/mysql-connector-c-6.0.2/mysys/my_thr_init.c:374: undefined reference to `pthread_getspecific'
/export/home2/tmp/cteam/bs/connector-c-32bit/src/mysql-connector-c-6.0.2/mysys/my_thr_init.c:422: undefined reference to `pthread_setspecific'
/export/home2/tmp/cteam/bs/connector-c-32bit/src/mysql-connector-c-6.0.2/mysys/my_thr_init.c:407: undefined reference to `pthread_setspecific'
../../mysql-connector-c-6.0.2-linux-glibc2.3-x86-32bit/lib/libmysqlclient.a(my_thr_init.c.o): In function `_my_thread_var':
/export/home2/tmp/cteam/bs/connector-c-32bit/src/mysql-connector-c-6.0.2/mysys/my_thr_init.c:428: undefined reference to `pthread_getspecific'
../../mysql-connector-c-6.0.2-linux-glibc2.3-x86-32bit/lib/libmysqlclient.a(my_thr_init.c.o): In function `my_thread_var_mutex_in_use':
/export/home2/tmp/cteam/bs/connector-c-32bit/src/mysql-connector-c-6.0.2/mysys/my_thr_init.c:446: undefined reference to `pthread_getspecific'
../../mysql-connector-c-6.0.2-linux-glibc2.3-x86-32bit/lib/libmysqlclient.a(my_thr_init.c.o): In function `_my_thread_var':
/export/home2/tmp/cteam/bs/connector-c-32bit/src/mysql-connector-c-6.0.2/mysys/my_thr_init.c:428: undefined reference to `pthread_getspecific' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T09:19:42.243

需要在引入依赖的mysql库*之后指定pthreads库。*链接语句是从左到右解析的，如果你在引入依赖的对象之前指定了一个库，它将被丢弃。

# iphone - 请建议我在代码中可能的更正（Iphone 应用程序开发）

> ID：11482449
> 
> 赞同：-1
> 
> 时间：2012-07-14T09:06:19.993
> 
> 标签：iphone, ios, soap, wsdl, sudzc

我从[sudzC](http://sudzc.com/)获得了以下生成的代码，并且生成的代码显示错误。我纠正了一些错误，现在进入以下代码行。

.h 文件

```
- (SoapRequest*) CreateAdvocacyData: (id) target action: (SEL) action oNode: (nil) oNode; 
```

.m 文件

```
- (SoapRequest*) CreateAdvocacyData: (id) _target action: (SEL) _action oNode: (nil) oNode
        {
        NSMutableArray* _params = [NSMutableArray array];

        [_params addObject: [[[SoapParameter alloc] initWithValue: oNode forName: @"oNode"] autorelease]];
        NSString* _envelope = [Soap createEnvelope: @"CreateAdvocacyData" forNamespace: self.namespace withParameters: _params withHeaders: self.headers];
        SoapRequest* _request = [SoapRequest create: _target action: _action service: self soapAction: @"http://www.avectra.com/2005/CreateAdvocacyData" postData: _envelope deserializeTo: nil];
        [_request send];
        return _request;
    } 
```

从其他文件调用

```
[service CreateAdvocacyData:self action:@selector(CreateAdvocacyDataHandler:) oNode: [[ alloc] init]]; 
```

这些都是 sudzc 生成的代码。我有疑问：

*   请建议我更改这行代码。

*   请解释一下的意思 `action:@selector(CreateAdvocacyDataHandler:)`

*   我可以传入 oNode:nil 而不是 [[ alloc] init] （错误）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:57:43.580

生成的代码中存在一些问题，我对其进行了更正（表单 sudzc.com）。

```
- (SoapRequest*) CreateAdvocacyData: (id) target action: (SEL) action oNode: (nil) oNode; 
```

修改为

```
- (SoapRequest*) CreateAdvocacyData: (id) target action: (SEL) action oNode: (id) oNode; 
```

我理解 SEL 的含义（感谢 vittal） [http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocSelectors.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocSelectors.html)

`nil`我通过传递而不是解决了第三个问题`[[ alloc]init]`

# c++ - 同一函数中的“此声明没有类型说明符”和“预期声明”错误

> ID：11482451
> 
> 赞同：-1
> 
> 时间：2012-07-14T09:06:44.770
> 
> 标签：c++, hook, direct3d, direct3d9

我有这个代码：

```
HRESULT __stdcall IDirect3DDevice9Hook::BeginScene()
{
  if(dwD3D9DllBaseAddr && dwD3D9DllSize) 
  {
    dwD3DDev = (DWORD)pD3DDevice;

    _asm mov eax, dwD3DDev
      _asm mov ebx, [eax]
      _asm mov eax, [ebx+164]
      _asm mov dwTestPtr, eax 

      if(dwTestPtr < dwD3D9DllBaseAddr || dwTestPtr > (dwD3D9DllBaseAddr + dwD3D9DllSize)) {
        FORCE_EXIT( 10 );
      }   
  }

  return pD3DDevice->BeginScene();
} 
```

在第 5 行它说“这个声明没有存储类或类型说明符”它在 FORCE_EXIT(10) 处说这个；也。在第二个 if 语句 (if(dwTestPtr....) 上，它说“需要一个声明”。它们有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T12:05:06.387

C 或 C++ 等语言的“问题”是语法并不总是唯一的。如果您查看第五行，您可能会看到一个作业。但是，如果变量 dwD3DDev 不存在，编译器实际上可能会看到一个带有初始化程序的声明，除了这个声明没有指定类型。

因此，错误消息并不总是“正确”的，因为它们不是基于您*打算*做的；相反，它们基于编译器的某些内部状态，当它注意到“嘿，这里不太对劲”时。两者可能并不总是一致的。

因此，您必须在代码的其他地方声明变量（如果它们应该是全局变量或实例变量），或者按照编译器的说明添加类型。

# c# - 在外部存储数据

> ID：11482453
> 
> 赞同：0
> 
> 时间：2012-07-14T09:07:10.773
> 
> 标签：c#, io

我正在寻找一种方法来远程而不是本地存储我的程序生成的数据（小列表）。我目前将数据存储在 .txt 文件中。

问题是我无法为所有用户提供统一的 .txt 文件。

到目前为止，我的想法是在 php 中编写一个具有 mysql 后端的小 api。我只是想在这里问一下您认为完成这种云数据存储的最简单/最快的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T09:12:34.900

你基本上有两个选择：

*   直接存储在数据库中
*   调用 Web 服务并传递数据，然后处理服务逻辑中的存储

选择什么取决于上下文和要求，但是我更喜欢第二种选择，因为这样你就可以将这两件事解耦......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T09:57:59.543

建议的方法是使用**[WCF](http://msdn.microsoft.com/en-us/netframework/aa663324.aspx)**（Windows Communication Foundation）与存储数据的中央系统进行通信。在这个平台上，您的问题有很好的解决方案。

> WCF 是 .NET Framework 的一部分，它提供了一个统一的编程模型，用于快速构建跨 Web 和企业通信的面向服务的应用程序。

# android - 在 Android 上设置 SearchView 宽度

> ID：11482456
> 
> 赞同：0
> 
> 时间：2012-07-14T09:07:32.280
> 
> 标签：android, eclipse, width, searchview

我在 Android 上的字典应用程序中使用 SearchView 小工具，但我需要让这个 searchView 适合所有屏幕宽度，那么如何设置这个 searchview 的宽度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:22:06.957

这应该这样做：

```
android:layout_width="match_parent" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T08:50:44.987

尝试这个..

```
android:layout_width="fill_parent" 
```

# html - 尝试发布数据以保护 FORM

> ID：11482459
> 
> 赞同：0
> 
> 时间：2012-07-14T09:07:48.417
> 
> 标签：html, security, post, login, forms

这是表格： [https](https://is.sce.ac.il/nidp/idff/sso?id=11&sid=0&option=credential&sid=0) : //is.sce.ac.il/nidp/idff/sso?id=11&sid=0&option=credential&sid=0 我使用的代码是：

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
</head>
<body onload="document.forms['asd'].submit();">
<form name="asd" enctype="application/x-www-form-urlencoded" action="https://is.sce.ac.il/nidp/idff/sso?sid=1" method="post">
    <input type="hidden" name="option" value="credential" />
    <input type="hidden" name="Ecom_User_ID" value="XXX" />
    <input type="hidden" name="Ecom_Password" value="XXX" />
</form>
</body>
</html> 
```

但是我进入了一个名为“Novell Access Manager 3.1”的页面。有没有办法进行简单的登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T09:12:15.013

表单操作设置为此链接：[https ://is.sce.ac.il/nidp/idff/sso?sid=1](https://is.sce.ac.il/nidp/idff/sso?sid=1)

这是您希望处理登录功能的页面吗？请从该页面发布代码或更改脚本中的链接。

# c# - C# TextRenderer 文本黑色阴影

> ID：11482461
> 
> 赞同：2
> 
> 时间：2012-07-14T09:08:08.637
> 
> 标签：c#, gdi

我有一个项目，在桌面壁纸上放置随机引号，您可以将它们放置在顶部或底部。无论如何，文本在使用 DrawText 时效果很好，但由于需要自定义对齐方式，左、中或右.. 我转而使用 TextRenderer。

下面是屏幕截图，如果您注意到，屏幕上有一个透明的水平框，上面有文字。 ![在此处输入图像描述](../Images/5e8c1285f2a4bd78195ce36a8bbaae04.png) 但是由于每次上传 HiRes 图像时 Stackoverflow 都会崩溃，所以我只是调整了它的大小，然后向你展示了这个，你
![在此处输入图像描述](../Images/50c19ba5c8cfdcb13ce3874ae84f9ae8.png)
注意到字符周围的黑色阴影了吗？我该如何摆脱它？

-----------------
通过添加解决

```
g.TextRenderingHint = System.Drawing.Text.TextRenderingHint.AntiAlias; 
```

# android - 让我的应用程序运行几个小时会导致 Android 手机死机

> ID：11482466
> 
> 赞同：5
> 
> 时间：2012-07-14T09:09:35.220
> 
> 标签：android, freeze

每当我让我的应用程序运行一段时间（上次约 9 小时）时，手机的任何活动都会停止响应并需要强制关闭，之后向下滑动通知区域下方只有一个黑屏并按下返回或主页更改没有什么。我也无法正常关闭手机，因为它只是在试图关闭手机时无休止地旋转。我需要卸下并重新插入电池。

我的应用程序有一个后台服务，它监控蓝牙设备并运行接受线程，超时时间为 30 秒。我相信我正在正确处理它们，因为我的调试屏幕中只显示了 1 个。我已经看到这种手机在整个过程中连接设备并且根本没有连接时冻结行为。

我尝试将手机连接到 logcat 以查看手机冻结时会发生什么，但它总是在一段时间后停止接收来自手机的更新，最多可能一两个小时？很难估计，因为我通常在等待时做其他事情。

是否有人对可能导致此问题的原因或我如何获得一些额外的反馈有任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T23:00:54.697

如果您的服务在后台运行，操作系统可能会在一段时间后将其杀死，您必须知道如何在服务中处理它。

做大量工作的服务很可能会被杀死。

如果您希望您的服务做长时间的工作（30 秒是相当长的时间），您应该将您的服务设置为[**前台服务**](http://developer.android.com/guide/components/services.html#Foreground)，并带有通知。

如果您不希望您的服务成为前台服务，请尝试在被杀死时恢复您的状态，并尝试进一步优化您的代码。

有关服务如何在 android 上运行的更多信息，请阅读[**此链接**](http://developer.android.com/reference/android/app/Service.html) 。

# python - python - ioctl 数字可以与 C ioctl 数字不同吗？

> ID：11482468
> 
> 赞同：1
> 
> 时间：2012-07-14T09:10:03.287
> 
> 标签：python, ioctl, fcntl

据我所知，ioctl 编号由驱动程序很好地定义并在内核中注册。

我正在使用 python 中的一些代码来查询操纵杆状态。我已经阅读[了这个关于游戏杆 api](http://www.kernel.org/doc/Documentation/input/joystick-api.txt)的文档，[这个关于 ioctl numbers](http://www.mjmwired.net/kernel/Documentation/ioctl-number.txt)的文档，以及[这个来自 python fcntl 模块的](http://docs.python.org/library/fcntl.html)文档。

我创建了一个用于测试和查询值的 C 程序，并且 python 使用我[从这里](http://www.hsg-kl.de/faecher/inf/material/bonsai/util/ppdev.py)获取的用于实现`_IOR()`C 宏的代码进行测试。

## 内核驱动定义：

```
monolith@monolith ~/temp $ grep JSIOCGAXES /usr/include/* -r
/usr/include/linux/joystick.h:#define JSIOCGAXES        _IOR('j', 0x11, __u8) 
```

## C程序

```
#include <stdio.h>
#include <linux/joystick.h>
#include <fcntl.h>

int main() {  
  int fd = open("/dev/input/js0", O_RDONLY);
  printf("Ioctl Number: (int)%d  (hex)%x\n", JSIOCGAXES, JSIOCGAXES);
  char number;
  ioctl(fd, JSIOCGAXES, &number);
  printf("Number of axes: %d\n", number);
  close(fd);
  return 0;
} 
```

## C程序输出：

```
monolith@monolith ~/temp $ ./test 
Ioctl Number: (int)-2147390959  (hex)80016a11
Number of axes: 6 
```

## Python 输出

```
# check if _IOR results in the used ioctl number in C
>>> _IOR(ord('j'), 0x11, 'c')
-2147390959
>>> file = open("/dev/input/js0")
# use that integer
>>> fcntl.ioctl(file, -2147390959)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IOError: [Errno 14] Bad address
# ask what hex value is
>>> "%x" % -2147390959
'-7ffe95ef'
# WHY THIS HEX CONVERSION DIFFERS?
>>> fcntl.ioctl(file, -0x7ffe95ef)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IOError: [Errno 14] Bad address
# Use the hex value from the C program output
>>> fcntl.ioctl(file, 0x80016a11)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IOError: [Errno 14] Bad address 
```

有什么想法为什么我不能用那个 ioctl 号查询文件描述符？`ioctl()`并且`fcntl()`函数采用文件描述符或具有`fileno()`实现方法的对象，因此我从对象中剔除错误`file`。

也许问题来自数字转换和类型，不知道......线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T09:43:16.127

这一切都归结为十六进制转换不同 - 将十六进制 C 插入 Python 会给你一个不同的数字：

```
>>> 0x80016a11
2147576337 
```

我不确定为什么 Python 和 C 给出不同的十六进制，但它可能至少部分与符号有关 - Python`'%x'`给出有*符号*的十六进制值[1](http://docs.python.org/library/stdtypes.html#string-formatting-operations)，`printf`s 给出无符号的[2](http://www.cplusplus.com/reference/clibrary/cstdio/printf/)。

使用 Python 的十六进制值`-7ffe95ef`（

```
op = _IOR(ord('j'), 0x11, 'c')
...
fcntl.ioctl(file, op) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T10:52:38.527

我要回答我自己的问题。

出于某种原因，从 python 获取值的唯一方法`ioctl()`是发出以下代码：

```
>>> buf = array.array('h', [0])
>>> fcntl.ioctl(file.fileno(), 0x80016a11, buf)
0
>>> buf[0]
6 
```

也就是说，使用缓冲区来存储结果。我应该重新阅读文档并了解为什么`fcntl.ioctl(file.fileno(), 0x80016a11)`不起作用。

# iphone - iOS 5：数据加密 AES-256 EncryptWithKey：未找到

> ID：11482470
> 
> 赞同：13
> 
> 时间：2012-07-14T09:10:18.790
> 
> 标签：iphone, ios, ios5

问题是关于 iOS5 应用程序的。我有一个视图控制器，其中有一些 UITextFields。我想使用 AES-256 加密数据。

事实上，我不知道我必须添加哪些必备包才能进行加密和解密。我已经浏览了其他帖子，但太多的解释把它搞砸了。

请让我知道使用 AES-256 加密数据时必须包含的所有包和头文件

钱德拉

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-14T10:50:32.073

参考以下类别。

常见问题解答：什么是类别？

> 简而言之，Cocoa API 添加方法。简要扩展类。

更多信息，

> [自定义现有类](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html#//apple_ref/doc/uid/TP40011210-CH6-SW2)
> 
> [类别](https://developer.apple.com/library/ios/documentation/General/Conceptual/DevPedia-CocoaCore/Category.html)

File-New-Cocoa Touch - Objective-C 类

如果你想使用一个类别，你的类添加一个#import"NSData+Encryption.h"

![在此处输入图像描述](../Images/ff53ef0eac121fbf6c27907d68bcc84b.png)

![在此处输入图像描述](../Images/06e01f17d921e1820f5f05633a07d6a0.png)

//NSData+加密.h

```
@interface NSData (Encryption)
- (NSData *)AES256EncryptWithKey:(NSString *)key;
- (NSData *)AES256DecryptWithKey:(NSString *)key;
@end 
```

* * *

//NSData+加密.m

```
#import "NSData+Encryption.h"
#import <CommonCrypto/CommonCryptor.h>

@implementation NSData (Encryption)
- (NSData *)AES256EncryptWithKey:(NSString *)key {
    // 'key' should be 32 bytes for AES256, will be null-padded otherwise
    char keyPtr[kCCKeySizeAES256+1]; // room for terminator (unused)
    bzero(keyPtr, sizeof(keyPtr)); // fill with zeroes (for padding)

    // fetch key data
    [key getCString:keyPtr maxLength:sizeof(keyPtr) encoding:NSUTF8StringEncoding];

    NSUInteger dataLength = [self length];

    //See the doc: For block ciphers, the output size will always be less than or 
    //equal to the input size plus the size of one block.
    //That's why we need to add the size of one block here
    size_t bufferSize = dataLength + kCCBlockSizeAES128;
    void *buffer = malloc(bufferSize);

    size_t numBytesEncrypted = 0;
    CCCryptorStatus cryptStatus = CCCrypt(kCCEncrypt, kCCAlgorithmAES128, kCCOptionPKCS7Padding,
                                          keyPtr, kCCKeySizeAES256,
                                          NULL /* initialization vector (optional) */,
                                          [self bytes], dataLength, /* input */
                                          buffer, bufferSize, /* output */
                                          &numBytesEncrypted);
    if (cryptStatus == kCCSuccess) {
        //the returned NSData takes ownership of the buffer and will free it on deallocation
        return [NSData dataWithBytesNoCopy:buffer length:numBytesEncrypted];
    }

    free(buffer); //free the buffer;
    return nil;
}

- (NSData *)AES256DecryptWithKey:(NSString *)key {
    // 'key' should be 32 bytes for AES256, will be null-padded otherwise
    char keyPtr[kCCKeySizeAES256+1]; // room for terminator (unused)
    bzero(keyPtr, sizeof(keyPtr)); // fill with zeroes (for padding)

    // fetch key data
    [key getCString:keyPtr maxLength:sizeof(keyPtr) encoding:NSUTF8StringEncoding];

    NSUInteger dataLength = [self length];

    //See the doc: For block ciphers, the output size will always be less than or 
    //equal to the input size plus the size of one block.
    //That's why we need to add the size of one block here
    size_t bufferSize = dataLength + kCCBlockSizeAES128;
    void *buffer = malloc(bufferSize);

    size_t numBytesDecrypted = 0;
    CCCryptorStatus cryptStatus = CCCrypt(kCCDecrypt, kCCAlgorithmAES128, kCCOptionPKCS7Padding,
                                          keyPtr, kCCKeySizeAES256,
                                          NULL /* initialization vector (optional) */,
                                          [self bytes], dataLength, /* input */
                                          buffer, bufferSize, /* output */
                                          &numBytesDecrypted);

    if (cryptStatus == kCCSuccess) {
        //the returned NSData takes ownership of the buffer and will free it on deallocation
        return [NSData dataWithBytesNoCopy:buffer length:numBytesDecrypted];
    }

    free(buffer); //free the buffer;
    return nil;
}
@end 
```

# android - 谷歌任务 API。TasksRequest.setFields(String fields) 方法中使用哪些参数？

> ID：11482471
> 
> 赞同：2
> 
> 时间：2012-07-14T09:10:42.713
> 
> 标签：android, google-tasks

我正在构建一个将任务同步到谷歌任务的 Android 应用程序。我使用了 Google Tasks API。我的问题是我可以在 TasksRequest.setFields(String fields) 中使用哪些参数？我看到示例代码使用“项目/标题”。如果我想获取其他字段或者我想同时获取多个字段怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T18:01:43.543

此字符串的格式在此处描述：[https ://developers.google.com/discovery/v1/performance#partial-response](https://developers.google.com/discovery/v1/performance#partial-response)

API 资源管理器也可以帮助您使用 UI 构建字符串：[https ://developers.google.com/apis-explorer](https://developers.google.com/apis-explorer)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T13:40:22.633

您必须参考适用于 Android 的 Google Tasks API 示例中的这段代码：

```
@Override
protected List<String> doInBackground(Void... arg0) {
try {
  List<String> result = new ArrayList<String>();
  com.google.api.services.tasks.Tasks.TasksOperations.List listRequest = service.tasks().list("@default");

  listRequest.setFields("items/title,items/notes,items/completed");
  //listRequest.setFields("items/title");
  List<Task> tasks = listRequest.execute().getItems();
  if (tasks != null) {
    for (Task task : tasks) {
      result.add(task.getTitle());
    }
  } else {
    result.add("No tasks.");
  }
  return result;
} catch (IOException e) {
  tasksSample.handleGoogleException(e);
  return Collections.singletonList(e.getMessage());
} finally {
  tasksSample.onRequestCompleted();
} 
```

}

[文档](http://javadoc.google-api-java-client.googlecode.com/hg/apis/tasks/v1/com/google/api/services/tasks/Tasks.Tasklists.Insert.html#setFields%28java.lang.String%29)对此非常不清楚，但[这个](http://code.google.com/p/google-plus-platform/issues/detail?id=51)链接给了我一个线索。

请注意，我使用

> “项目/标题，项目/注释，项目/完成”

如果你弄错了字符串，你会得到

> invalidParameter 和 Invalid 字段选择说明

# algorithm - Clojure DAG（贝叶斯网络）

> ID：11482474
> 
> 赞同：14
> 
> 时间：2012-07-14T09:11:02.967
> 
> 标签：algorithm, clojure, functional-programming, directed-acyclic-graphs

我想在 clojure 中建立一个贝叶斯网络，因为我还没有找到任何类似的项目。

我研究了很多 BN 理论，但仍然看不到如何实现网络（我不是人们所说的任何事情的“大师”，但尤其不是函数式编程）。

我确实知道 BN 只不过是一个 DAG 和很多概率表（每个节点一个），但现在我不知道如何实现 DAG。

我的第一个想法是一个带有一些小地图（DAG 的节点）的巨大集合（DAG），每个地图都应该有一个名称（可能是一个：key）一个概率表（另一个地图？）一个父母的向量，最后是一个**非**后代向量。

现在我不知道如何实现父母和非后代的引用（我应该放在两个向量中）。我想指针应该是完美的，但 clojure 缺少它；我可以在向量中放入：另一个节点的名称，但它会很慢，不是吗？

我在想，我可以使用更多集合而不是向量，这样可以更快地找到节点的后代。

概率表的类似问题，我仍然需要在其他节点上进行一些参考。

最后，我还想学习 BN（从数据开始构建网络），这意味着我将对概率表、边和节点**进行大量更改。**

我应该使用可变类型还是它们只会增加复杂性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-17T14:27:22.300

这不是一个完整的答案，但这里是来自[维基百科文章](https://en.wikipedia.org/wiki/Bayesian_network)的示例网络的可能编码。每个节点都有一个名称、一个后继（子）列表和一个概率表：

```
(defn node [name children fn]
  {:name name :children children :table fn}) 
```

此外，这里有一些用于构建真/假概率的小辅助函数：

```
;; builds a true/false probability map
(defn tf [true-prob] #(if % true-prob (- 1.0 true-prob))) 
```

上面的函数返回一个闭包，当给定一个`true`值（resp. `false`value）时，它返回事件的概率`X=true`（对于`X`我们正在编码的概率变量）。

由于网络是一个 DAG，我们可以直接相互引用节点（就像您提到的指针一样），而不必关心循环引用。我们只是按照拓扑顺序构建图：

```
(let [gw (node "grass wet" [] (fn [& {:keys [sprinkler rain]}]
                            (tf (cond (and sprinkler rain) 0.99
                                      sprinkler 0.9
                                      rain 0.8
                                      :else 0.0))))

  sk (node "sprinkler" [gw]
           (fn [& {:keys [rain]}] (tf (if rain 0.01 0.4))))

  rn (node "rain" [sk gw]
           (constantly (tf 0.2)))]

  (def dag {:nodes {:grass-wet gw :sprinkler sk :rain rn}
        :joint (fn [g s r]
                 (*
                  (((:table gw) :sprinkler s :rain r) g)
                  (((:table sk) :rain r) s)
                  (((:table rn)) r)))})) 
```

每个节点的概率表作为父节点状态的函数给出，并返回概率`true`和`false`值。例如，

```
((:table (:grass-wet dag)) :sprinkler true :rain false) 
```

...返回`{:true 0.9, :false 0.09999999999999998}`。

得到的联合函数根据以下公式组合概率：

```
P(G,S,R) = P(G|S,R).P(S|R).P(R) 
```

并`((:joint dag) true true true)`返回 0.0019800000000000004。实际上，由 所返回的每个值`((:table <x>) <args>)`都是围绕 a 的闭包`if`，它返回知道概率变量状态的概率。`true`我们用各自的/值调用每个闭包`false`以提取适当的概率，并将它们相乘。

在这里，我有点作弊，因为我认为应该通过遍历图形来计算联合函数（在一般情况下，宏可能会有所帮助）。这也让人感觉有点混乱，尤其是关于节点的状态，这些状态不一定只有真假：在一般情况下，您很可能会使用地图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-21T23:55:11.057

一般来说，计算BN的联合分布的方法是

```
prod( P(node | parents of node) ) 
```

为了实现这一点，您需要一个节点列表，其中每个节点包含

*   节点名称
*   父母名单
*   概率表
*   孩子名单

当每行值对应于父配置并且每列对应于节点的值时，概率表可能是最容易处理的。这假设您正在使用记录来保存所有值。节点的值也可以包含在节点内。

没有父节点的节点只有一行。

每一行都应该被规范化，之后 P(node|parents) = table[row,col]

您实际上并不需要子列表，但拥有它可以使拓扑排序更容易。DAG 必须能够进行拓扑排序。

最大的问题出现在概率表中的单元格数量是父母和自我的所有维度的乘积。我使用使用行映射的稀疏表在 C++ 中处理了这个问题。

查询 DAG 是另一回事，执行此操作的最佳方法取决于大小以及近似答案是否足够。这里没有足够的空间来覆盖它们。搜索墨菲和贝叶斯网络工具箱可能会有所帮助

我意识到您正在专门寻找一个实现，但是，只需做一些工作，您就可以自己动手。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T09:53:45.017

You may try to go even flatter and have several maps indexed by node ids: one map for probabilities tables, one for parents and one for non-descendants (I'm no BN expert: what's this, how is it used etc. ? It feels like something that could be recomputed from the parents table^W relation^W map).

# jasper-reports - 如何根据几个参数的值隐藏文本字段？

> ID：11482483
> 
> 赞同：2
> 
> 时间：2012-07-14T09:12:33.977
> 
> 标签：jasper-reports, ireport

我试图隐藏我放置在页眉带中的文本字段。字段值由运行报告时传递给报告的几个参数确定。本质上，当参数值为空（或其中一些为空）时，我希望该字段为空白或隐藏。

当我执行我的代码时，我得到`incompatable operand int and integer`. 我已附上以下报告：

```
<?xml version="1.0" encoding="UTF-8"  ?>
<!-- Created with iReport - A designer for JasperReports -->
<!DOCTYPE jasperReport PUBLIC "//JasperReports//DTD Report Design//EN" "http://jasperreports.sourceforge.net/dtds/jasperreport.dtd">
<jasperReport
         name="Date_Register"
         columnCount="1"
         printOrder="Vertical"
         orientation="Landscape"
         pageWidth="842"
         pageHeight="595"
         columnWidth="802"
         columnSpacing="0"
         leftMargin="20"
         rightMargin="20"
         topMargin="20"
         bottomMargin="20"
         whenNoDataType="AllSectionsNoDetail"
         isTitleNewPage="false"
         isSummaryNewPage="false">
    <property name="ireport.zoom" value="1.0" />
    <property name="ireport.x" value="95" />
    <property name="ireport.y" value="3" />
    <property name="ireport.scriptlethandling" value="0" />
    <property name="ireport.encoding" value="UTF-8" />
    <import value="java.util.*" />
    <import value="net.sf.jasperreports.engine.*" />
    <import value="net.sf.jasperreports.engine.data.*" />
    <import value="com.google.common.base.*" />

    <parameter name="date_start" isForPrompting="true" class="java.sql.Timestamp">
        <defaultValueExpression ><![CDATA[new java.sql.Timestamp(0)]]></defaultValueExpression>
    </parameter>
    <parameter name="date_end" isForPrompting="true" class="java.sql.Timestamp">
        <defaultValueExpression ><![CDATA[new java.sql.Timestamp(System.currentTimeMillis())]]></defaultValueExpression>
    </parameter>
    <parameter name="lookup_month" isForPrompting="true" class="java.lang.Integer">
        <defaultValueExpression ><![CDATA[new Integer(-1)]]></defaultValueExpression>
    </parameter>
    <parameter name="lookup_year" isForPrompting="true" class="java.lang.Integer">
        <defaultValueExpression ><![CDATA[new Integer(-1)]]></defaultValueExpression>
    </parameter>
    <parameter name="lookup_quarter" isForPrompting="true" class="java.lang.Integer">
        <defaultValueExpression ><![CDATA[new Integer(-1)]]></defaultValueExpression>
    </parameter>
    <parameter name="lookup_weeks" isForPrompting="true" class="java.lang.Integer">
        <defaultValueExpression ><![CDATA[new Integer(-1)]]></defaultValueExpression>
    </parameter>
    <parameter name="woman_status" isForPrompting="true" class="java.lang.String">
        <defaultValueExpression ><![CDATA["N"]]></defaultValueExpression>
    </parameter>
    <parameter name="industry_group" isForPrompting="true" class="java.lang.Integer">
        <defaultValueExpression ><![CDATA[new Integer(-1)]]></defaultValueExpression>
    </parameter>
    <parameter name="equity_structure" isForPrompting="true" class="java.lang.String">
        <defaultValueExpression ><![CDATA["BUMIPUTERA"]]></defaultValueExpression>
    </parameter>
    <queryString><![CDATA[select distinct convert(varchar(10),a.entered,103) as daterange,
a.org_id,
a.name,
a.business_name_two,
a.organization_type,
c.description as companygroup,lead,
a.industry_temp_code,
b.description,
a.equity_structure,
case when a.sic_description = 1 then 'BUMIPUTERA'
     when a.sic_description = 2 then 'NON BUMIPUTERA' end race,
convert(varchar(10),a.entered,103) as
dateregister
from organization a
left join lookup_industry b on a.industry_temp_code = b.code
left join lookup_company_group c on c.code = a.company_group
left join ticket d on d.org_id = a.org_id
left join lookup_month lm on lm.code =a.operation_date 
left join lookup_weeks lw on lw.code =a.operation_date
left join lookup_quarter lq on lq.code =a.operation_date
left join lookup_year ly on ly.code =a.operation_date
where
a.equity_structure is not null
and
business_name_two is not null
and
c.description is not null
and
((a.business_name_two = $P{woman_status}) or ($P{woman_status} = ' '))
and
((a.industry_temp_code = $P{industry_group}) or($P{industry_group} = -1))
and
(((case when a.sic_description = 1 then 'BUMIPUTERA'
     when a.sic_description = 2 then 'NON BUMIPUTERA' end ) = $P{equity_structure}) or ($P{equity_structure} = ' '))
and
((a.operation_date BETWEEN convert(datetime,$P{date_start},103) AND convert(datetime,$P{date_end},103))
or (convert(datetime,$P{date_start},103) =' ' AND convert(datetime,$P{date_end},103) = ' '))

AND
((lm.code = $P{lookup_month}) or ($P{lookup_month} = -1)) 
AND
((ly.code = $P{lookup_year}) or ($P{lookup_year} = -1))
AND
((lq.code = $P{lookup_quarter}) or ($P{lookup_quarter} = -1))
AND
((lw.code = $P{lookup_weeks}) or ($P{lookup_weeks} = -1))]]></queryString>

    <field name="daterange" class="java.lang.String"/>
    <field name="org_id" class="java.lang.Integer"/>
    <field name="name" class="java.lang.String"/>
    <field name="business_name_two" class="java.lang.String"/>
    <field name="organization_type" class="java.lang.String"/>
    <field name="companygroup" class="java.lang.String"/>
    <field name="lead" class="java.lang.String"/>
    <field name="industry_temp_code" class="java.lang.Integer"/>
    <field name="description" class="java.lang.String"/>
    <field name="equity_structure" class="java.lang.String"/>
    <field name="race" class="java.lang.String"/>
    <field name="dateregister" class="java.lang.String"/>

        <background>
            <band height="0"  isSplitAllowed="true" >
            </band>
        </background>
        <title>
            <band height="0"  isSplitAllowed="true" >
            </band>
        </title>
        <pageHeader>
            <band height="187"  isSplitAllowed="true" >
                <staticText>
                    <reportElement
                        x="0"
                        y="0"
                        width="802"
                        height="18"
                        key="staticText"/>
                    <box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
                    <textElement textAlignment="Center">
                        <font fontName="SansSerif" size="12" isBold="true"/>
                    </textElement>
                <text><![CDATA[Date Registered
]]></text>
                </staticText>
                <textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
                    <reportElement
                        x="0"
                        y="54"
                        width="802"
                        height="42"
                        key="textField-1"
                        isRemoveLineWhenBlank="true"/>
                    <box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
                    <textElement textAlignment="Left" verticalAlignment="Top" rotation="None" isStyledText="true" lineSpacing="1_1_2">
                        <font size="11" isBold="true"/>
                    </textElement>
                <textFieldExpression   class="java.lang.String"><![CDATA[($P{date_start}!= null) && ($P{date_end}!=null) && ($P{lookup_month}!= -1) && ($P{lookup_year}!=-1)&& ($P{lookup_quarter}!= -1) && ($P{lookup_weeks}!=-1) ? "Date Ticket Created From : " + new SimpleDateFormat("dd/MM/yyyy").format($P{date_start}) +"\n" + "Date Ticket Created to : " + new SimpleDateFormat("dd/MM/yyyy").format($P{date_end})
: null]]></textFieldExpression>
                </textField>
                <textField isStretchWithOverflow="true" isBlankWhenNull="true" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
                    <reportElement
                        x="0"
                        y="20"
                        width="802"
                        height="35"
                        key="textField-2"
                        isRemoveLineWhenBlank="true"/>
                    <box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
                    <textElement textAlignment="Center" verticalAlignment="Top" rotation="None" lineSpacing="Single">
                        <font size="12" isBold="true"/>
                    </textElement>
                <textFieldExpression   class="java.lang.String"><![CDATA[($P{date_start}!= null) && ($P{date_end}!=null) && ($P{lookup_month}== -1) && ($P{lookup_year}==-1)&& ($P{lookup_quarter}== -1) && ($P{lookup_weeks}==-1)? " From ( " + new SimpleDateFormat("dd/MM/yyyy").format($P{date_start}) + " - " + new SimpleDateFormat("dd/MM/yyyy").format($P{date_end}) + " )"
:($P{date_start}== null) && ($P{date_end}==null) && ($P{lookup_month}!= -1) && ($P{lookup_year}!=-1)&& ($P{lookup_quarter}== -1) && ($P{lookup_weeks}!=-1)? "For week " + $P{lookup_weeks} +" "+ $P{lookup_month} +" "+ $P{lookup_year}
:($P{date_start}== null) && ($P{date_end}==null) && ($P{lookup_month}!= -1) && ($P{lookup_year}!=-1)&& ($P{lookup_quarter}== -1) && ($P{lookup_weeks}==-1)? "For monthly " +$P{lookup_month} +" "+ $P{lookup_year}
:($P{date_start}== null) && ($P{date_end}==null) && ($P{lookup_month}== -1) && ($P{lookup_year}!=-1)&& ($P{lookup_quarter}!= -1) && ($P{lookup_weeks}==-1)? "For Quarter " + $P{lookup_quarter} +" "+$P{lookup_year}
:($P{date_start}== null) && ($P{date_end}==null) && ($P{lookup_month}== -1) && ($P{lookup_year}!=-1)&& ($P{lookup_quarter}== -1) && ($P{lookup_weeks}==-1)? "For Year " + $P{lookup_year}
: $P{lookup_year}]]></textFieldExpression>
                </textField>
            </band>
        </pageHeader>
        <columnHeader>
            <band height="0"  isSplitAllowed="true" >
            </band>
        </columnHeader>
        <detail>
            <band height="0"  isSplitAllowed="true" >
            </band>
        </detail>
        <columnFooter>
            <band height="0"  isSplitAllowed="true" >
            </band>
        </columnFooter>
        <pageFooter>
            <band height="0"  isSplitAllowed="true" >
            </band>
        </pageFooter>
        <summary>
            <band height="0"  isSplitAllowed="true" >
            </band>
        </summary>
</jasperReport> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:44:02.060

> 本质上，当参数值为空（或其中一些为空）时，我希望该字段为空白或隐藏

为此，我想 Print when Expression 会非常方便。假设 param1 是您的参数，您可以添加类似 (!$P{param1}==null) 的内容。只有当参数有值时，才会显示该字段。最重要的是，当指定默认值时，这将不起作用。因为在指定默认值的情况下，参数永远不能为空或 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T17:53:07.180

您在这里有几个问题：

1）您确实为参数设置了默认值，`date_start`并且`date_end`。这意味着它们永远不会为空。（如果您明确地为参数传入一个空值，这可能会被覆盖，但我不确定是否诚实）。您最好不要为这两个参数设置默认值。

2）如果您想隐藏字段，那么我会在字段上使用 print when 表达式。例如，您的日期范围文本字段最终看起来像：

```
<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
  <reportElement uuid="9bcc0870-adaf-4bb3-bd4d-40bf120a0d1f" key="textField-1" x="0" y="54" width="802" height="42" isRemoveLineWhenBlank="true">
    <printWhenExpression><![CDATA[($P{date_start}!= null) && ($P{date_end}!=null)]]></printWhenExpression>
  </reportElement>
  <box>
    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
    <bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
  </box>
  <textElement textAlignment="Left" verticalAlignment="Top" rotation="None" markup="styled">
    <font size="11" isBold="true"/>
    <paragraph lineSpacing="1_1_2"/>
  </textElement>
  <textFieldExpression><![CDATA["Date Ticket Created From : " + new SimpleDateFormat("dd/MM/yyyy").format($P{date_start}) +"\n" + "Date Ticket Created to : " + new SimpleDateFormat("dd/MM/yyyy").format($P{date_end})]]></textFieldExpression>
</textField> 
```

我也会为您的顶级文本字段做类似的事情：

```
<textField isStretchWithOverflow="true" isBlankWhenNull="true">
  <reportElement uuid="37137d13-5d49-40fb-8627-0ffdfc555ef4" key="textField-2" x="0" y="20" width="802" height="35" isRemoveLineWhenBlank="true">
    <printWhenExpression><![CDATA[(($P{date_start}!= null) && ($P{date_end}!=null)) || ($P{lookup_year}!=-1)]]></printWhenExpression>
  </reportElement>
  <box>
    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
    <bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
  </box>
  <textElement textAlignment="Center" verticalAlignment="Top" rotation="None">
    <font size="12" isBold="true"/>
    <paragraph lineSpacing="Single"/>
  </textElement>
  <textFieldExpression><![CDATA[($P{date_start}!= null) && ($P{date_end}!=null) ? " From ( " + new SimpleDateFormat("dd/MM/yyyy").format($P{date_start}) + " - " + new SimpleDateFormat("dd/MM/yyyy").format($P{date_end}) + " )"
  : ($P{lookup_month}!= -1) && ($P{lookup_year}!=-1) &&  ($P{lookup_weeks}!=-1) ? "For week " + $P{lookup_weeks} +" "+ $P{lookup_month} +" "+ $P{lookup_year}
  : ($P{lookup_month}!= -1) && ($P{lookup_year}!=-1) ? "For monthly " +$P{lookup_month} +" "+ $P{lookup_year}
  : ($P{lookup_year}!=-1) && ($P{lookup_quarter}!=-1) ? "For Quarter " + $P{lookup_quarter} +" "+$P{lookup_year}
  : ($P{lookup_year}!=-1) ? "For Year " + $P{lookup_year}
  : null]]></textFieldExpression>
</textField> 
```

我使用空数据源和不同的参数值运行了带有此修改的报告，它似乎可以按照您的意愿工作。

# android - 单选按钮不可点击

> ID：11482485
> 
> 赞同：2
> 
> 时间：2012-07-14T09:12:35.787
> 
> 标签：android

我用单选按钮做了一个应用程序。`four`问题是最后一个单选按钮最初是不可点击的，直到你点击其他按钮。点击其他单选按钮后，最后一个单选按钮变成可点击的。请告诉我如何解决这个问题。提前致谢。

```
private void uncheckAllOptions()
    {
        myOption1.setChecked(true);
        myOption2.setChecked(true);
        myOption3.setChecked(true);
        myOption4.setChecked(true);

        myOption1.setChecked(false);
        myOption2.setChecked(false);
        myOption3.setChecked(false);
        myOption4.setChecked(false);

} 
```

我正在使用此代码来保存单选按钮的状态，但最后一个单选按钮始终保持不可点击状态，除非单击前 3 个单选按钮中的一个

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T09:25:44.107

> 使用`clearCheck() function of RadioButtonGroup to clear all RadioButtons`.

`myOption4.setChecked(false);`在您检查另一个 RadioButton 之前，下次无法检查使用。

**喜欢，** `radioButtonGroup.clearCheck();`

*   [从 Android 文档中查看](http://developer.android.com/reference/android/widget/RadioGroup.html#clearCheck%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T09:33:22.713

首先在 XMl 中的 RadioButton-4 中放置 prop clickable=false ：

然后假设您想在单击 FIRST RadioButton 后创建可单击的 RadioButton-4，然后在侦听器中设置 RB-4 clickable=True。

请参阅以下内容：

```
rb1.setOnCheckedChangeListener(new OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                if(isChecked)
                    rb4.setClickable(true);
            }
        }); 
```

# php - php：使用 simplexml 和 xpath 解析 rss 提要

> ID：11482490
> 
> 赞同：1
> 
> 时间：2012-07-14T09:13:19.927
> 
> 标签：php, xpath, rss, simplexml, feed

我尝试 [使用 php 解析带有图像的 rss 提要](https://stackoverflow.com/questions/8666440/rss-feed-with-images-using-php)上的链接。

我尝试解析 rss 提要以显示附件标签中的图像。我尝试了该链接上给出的解决方案。但它不起作用。element_attributes 函数尚未定义。

因此，我尝试使用 xPath 获取图像。以下是我的输出（空数组）：

```
Array() 
```

在我的网络服务器错误日志中。

谁能指出我哪里出错了？谢谢你。

```
<?php
if (function_exists("curl_init")){
    $ch=curl_init();
    curl_setopt($ch,CURLOPT_URL, 'http://menmedia.co.uk/manchestereveningnews/news/rss.xml');
    curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
    //curl_setopt($ch,CURLOPT_HEADER,0);
$data=curl_exec($ch);

curl_close($ch);

$doc=new SimpleXmlElement($data,LIBXML_NOCDATA);

function getImage($xml){
    $imgs=$xml->xPath('rss/channel/enclosure[@attributes]');
    print_r($imgs);
    /*foreach ($imgs as $image){
        echo $image->url;
    }*/
}
if (isset($doc->channel)) getImage($doc); 
```

} ?>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T09:32:33.543

```
$imgs=$xml->xPath('//channel/item/enclosure');
foreach($imgs as $img) {
    var_dump($img->attributes());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T19:40:22.737

**这个单一的 XPath 表达式**：

```
/rss/channel/item/enclosure/@* 
```

选择作为顶部元素的子元素`enclosure`的所有元素的子元素的所有元素的所有属性。`channel``rss`

**与使用以下方法相比，这既简单又高效：**

```
//channel/item/enclosure 
```

然后在单独的评估中找到属性。

**请记住**：

`//`以伪运算符开头的 XPath 表达式的求值通常比使用特定路径慢得多——因为这会导致未优化的 XPath 处理器遍历整个文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T00:26:54.910

我让它工作。它正在显示所有图像。正如 Dimitre 所建议的，我正在使用“/rss/channel/item/enclosure”减去“@*”。以下是我的功能：

```
function getImage($xml){
    $encls=$xml->xPath('/rss/channel/item/enclosure'); 
        foreach($encls as $encl) { 
            print_r('<img src='.$encl->attributes()->url.'/>');
            echo('<br>');
            }

}//end function getImage 
```

谢谢你们！

# json - 使用 Newtonsoft 库将 JSON 字符串转换为对象模型

> ID：11482492
> 
> 赞同：0
> 
> 时间：2012-07-14T09:13:28.973
> 
> 标签：json

我有以下 JSON 字符串：

```
{
  "screen": {
    "@id": "12345",
    "@name": "My Screening Questionnaire",
    "@successful": "True",
    "question": [
      {
        "@id": "123",
        "@type": "MultipleChoiceOneAnswer",
        "@text": "What is your current work status?",
        "answer": [
          {
            "@id": "1",
            "@selected": "True",
            "#text": "Australian citizen"
          },
          {
            "@id": "2",
            "#text": "NZ citizen"
          },
          {
            "@id": "3",
            "#text": "Australian permanent resident"
          },
          {
            "@id": "4",
            "#text": "NZ permanent resident"
          },
          {
            "@id": "5",
            "#text": "Australian work visa"
          },
          {
            "@id": "6",
            "#text": "NZ work visa"
          },
          {
            "@id": "7",
            "#text": "Holiday working visa"
          },
          {
            "@id": "8",
            "#text": "Other"
          }
        ]
      },
      {
        "@id": "124",
        "@type": "MultipleChoiceOneAnswer",
        "@text": "When are you available to begin employment?",
        "answer": [
          {
            "@id": "1",
            "@selected": "True",
            "#text": "Now"
          },
          {
            "@id": "2",
            "#text": "2 weeks"
          },
          {
            "@id": "3",
            "#text": "1 month"
          },
          {
            "@id": "4",
            "#text": "1 –2 months"
          },
          {
            "@id": "5",
            "#text": "3 or more months"
          }
        ]
      },
      {
        "@id": "125",
        "@type": "Text",
        "@text": "Why do you consider yourself to be a suitable candidate for this position?",
        "answer": {
          "@id": "1",
          "@selected": "True",
          "#text": "I’m great"
        }
      }
    ]
  }
} 
```

我想使用 Newtonsoft 将其转换为对象模型

JsonConvert.DeserializeObject:T:(JsonStringText)

对象模型的结构是什么？

谢谢。

您可以参考此处返回的 JSON 模型：

[http://developer.seek.com.au/docs/partner-api/api-methods/applicationexport/get-screen](http://developer.seek.com.au/docs/partner-api/api-methods/applicationexport/get-screen)

# android - jQuery Mobile 作为 Android 应用程序 - 如何进行表单处理？

> ID：11482496
> 
> 赞同：0
> 
> 时间：2012-07-14T09:14:02.883
> 
> 标签：android, forms, jquery-mobile, android-webview

我的应用程序基本上是用 jQuery Mobile 制作的几个页面。现在，我只有一个 Android 活动来设置和配置 WebView，启动存储在资产文件夹中的第一个 jQuery Mobile 页面。从那里开始，它只是网络技术。尽管 jQuery Mobile 看起来和工作起来都很好，但我开始感到有限。

最重要的一点是表单处理。如何在没有任何服务器的情况下将输入的信息传输到下一页？是否有 HTML5 或 Ajax 方式，或者我应该尝试将我当前的页面与 Android 更深入地“连接”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T18:08:32.220

您可以使用称为查询字符串的东西在 HTML 页面之间传递参数。不是去form2.html，而是去form2.html?foo=bar。然后，您可以使用 javascript 检索参数并将它们处理到您的网页中。

为此，我使用以下 javscript 函数：

```
function getUrlVars()
{
    var vars = [], hash;
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    for(var i = 0; i < hashes.length; i++)
    {
        hash = hashes[i].split('=');
        vars.push(hash[0]);
        vars[hash[0]] = hash[1];
    }
    return vars;
} 
```

当您在网页之间使用更复杂的参数（想想特殊字符）时，它并非完美无缺，但它可​​以完成基本工作。如果您想要更完整的功能，请看这里：[如何在 JavaScript 中获取查询字符串值？](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T09:21:24.323

如果您想与 Android 进行更深入的交流，请使用默认语言 (java)，但如果您想要一种简单的方法，但也有限制，请使用 WebView。此外，如果您想从服务器获取信息，则更容易通过 ajax 调用获取它，并且它将与您正在使用的 jquery mobile 很好地设置。我已经看到了一些从服务器获取信息到 Android 的示例，它看起来像很多艰苦的工作>（来自对android编程不熟悉的人。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# html - 星级评分★★★☆☆ Outlook 2010 CSS

> ID：11482497
> 
> 赞同：2
> 
> 时间：2012-07-14T09:14:17.550
> 
> 标签：html, css, email, outlook, rating-system

我想为 Outlook 2010（电子邮件）创建一个星级评分系统，我向客户发送一封电子邮件以评估解决方案（带有链接 html 的 5 星评分：差、好、非常好......）

与[http://yefomit.com/internet/simple_css_rater](http://yefomit.com/internet/simple_css_rater)相同，但与 Outlook 2010 兼容（Outlook 块 css）谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T05:44:19.570

我会建议去莎拉的回答。您将需要围绕正常开始创建锚控件，从一颗星、两星到五颗星，当用户点击评级时，您会将他重定向到您自己网站上的某个页面，上面提到的评级...

这将是最简单的方法......

# .net - 填充列表视图多列

> ID：11482501
> 
> 赞同：14
> 
> 时间：2012-07-14T09:14:43.727
> 
> 标签：.net, c#-4.0, listview

关于 Listbox 到 ListView 的迁移。

你好。

我有一个列表框，我将这样的条目添加到：

1;内容

其中 1 始终是 int，而 content 始终是字符串。我可以分别访问每一个。

现在我希望结果降序排序，即：

```
1;content
4;content2
2;content3 
```

=>

```
4;content2
2;content3
1;content 
```

由于这看起来不太好，我想改用 Listview。像这样：

```
Frequency | Content
===============
4 | content2
2 | content3
1 | content 
```

问题是，表格属性似乎不存在，所有条目都被放入资源管理器的列表视图中的类似符号中。我也有“到达”第二列（内容）的问题，即我只看到 4、2、1。

为此，我将如何在 c# .net 4 中准备和填充列表视图？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-07-14T18:44:18.700

要将 ListView 设置为详细信息模式：

```
 listView1.View = View.Details; 
```

然后设置你的两列：

```
 listView1.Columns.Add("Frequency");
        listView1.Columns.Add("Content"); 
```

然后添加您的项目：

```
 listView1.Items.Add(new ListViewItem(new string[]{"1", "content"}));
        listView1.Items.Add(new ListViewItem(new string[]{"4", "content2"}));
        listView1.Items.Add(new ListViewItem(new string[]{"2", "content3"})); 
```

我选择使用 ListViewItem 构造函数的重载，它采用表示列值的字符串数组。但是有22个重载！然后浏览并找到最适合您情况的那个。

要设置项目的自动排序：

```
 listView1.Sorting = SortOrder.Descending; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T08:52:36.973

我意识到这篇文章已经有一年多了，但我认为这可能有用，我几年前写了一篇关于使用 ListView 作为多列 ListBox 的文章，其中包括填充它的代码。该文章可在此处获得（[使用 ListView 作为多列 ListBox](http://satalketo.com/2010/08/multi-column-listbox/)）它是使用 VB.NET 编写的，但 C# 的代码几乎完全相同，我可能会使用 C# 重写它并为此添加一个链接，但这会是另一个时间。

希望这会有所帮助，如果不能随时告诉我:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-13T16:18:08.293

要添加列表视图标题并将项目添加到列表视图，请尝试以下代码：

```
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        Lstv1.Columns.Add("Paramname", CInt(Lstv1.Width / 2))
        Lstv1.Columns.Add("Paramorder", CInt(Lstv1.Width / 2))
    End Sub

Private Sub appendlistview(ByVal Paramname As String, ByVal Paramorder As String)

    Dim newitem As New ListViewItem(Paramname)
    newitem.SubItems.Add(Paramorder)

    Lstv1.Items.Add(newitem)

End Sub

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles BtnAdd.Click

    Call appendlistview(TextBox1.Text, TextBox2.Text)
End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-21T12:40:34.030

[![具有多列填充列表视图的表单](../Images/99f33dffed64b9999bd79c8a15b5a098.png)](https://i.stack.imgur.com/T4I8i.png)

这是完整形式的代码-从命令窗口编译它::

导入 System.Windows.Forms 导入 System.Drawing 公共类 Form1 继承 System.Windows.Forms.Form

```
 Public ListView1 As ListView
  Public Col_Header1 As ColumnHeader
  Public Col_Header2 As ColumnHeader
  Public Col_Header3 As ColumnHeader
  Public Col_Header4 As ColumnHeader

  Public Sub New()
    ListView1 = New ListView
    Col_Header1 = New ColumnHeader
    Col_Header2 = New ColumnHeader
    Col_Header3 = New ColumnHeader
    Col_Header4 = New ColumnHeader
    ListView1.Columns.AddRange(New ColumnHeader() { _
                                       Col_Header1, _
                                       Col_Header2, _
                                       Col_Header3, _
                                       Col_Header4})
        Col_Header1.Text = "Header1"
        Col_Header1.Width = 200
        Col_Header2.Text = "Header2"
        Col_Header2.Width = 200
        Col_Header3.Text = "Header3"
        Col_Header3.Width = 200
        Col_Header4.Text = "Header4"
        Col_Header4.Width = 400
   Dim myItems As String() = New String() { _
                            "Item1", _
                            "Item2", _
                            "Item3", _
                            "Item4"}
   Dim myItems1 As String() = New String() { _
                            "Item11", _
                            "Item12", _
                            "Item13", _
                            "Item14"}
   Dim myItems2 As String() = New String() { _
                            "Item21", _
                            "Item22", _
                            "Item23", _
                            "Item24"}
   Dim myItems3 As String() = New String() { _
                            "Item31", _
                            "Item32", _
                            "Item33", _
                            "Item34"}
   Dim myItems4 As String() = New String() { _
                            "Item41", _
                            "Item42", _
                            "Item43", _
                            "Item44"}
           Dim lvi As ListViewItem = New ListViewItem(myItems)
           ListView1.Items.Add(lvi)
           Dim lvi1 As ListViewItem = New ListViewItem(myItems1)
           ListView1.Items.Add(lvi1)
           Dim lvi2 As ListViewItem = New ListViewItem(myItems2)
           ListView1.Items.Add(lvi2)
           Dim lvi3 As ListViewItem = New ListViewItem(myItems3)
           ListView1.Items.Add(lvi3)
           Dim lvi4 As ListViewItem = New ListViewItem(myItems4)
           ListView1.Items.Add(lvi4)
        ListView1.AllowColumnReorder = True
        ListView1.Font = New System.Drawing.Font("Segoe UI",15.0!, _
                       System.Drawing.FontStyle.Bold, System.Drawing. _
                                     GraphicsUnit.Point,CType(0, Byte))
        ListView1.FullRowSelect = True
        ListView1.HideSelection = False
        ListView1.Dock = DockStyle.Fill
        ListView1.Name = "listView1"            
        ListView1.View = View.Details
        Me.AutoScaleBaseSize = New System.Drawing.Size(5, 13)
        Me.ClientSize = New System.Drawing.Size(800,600)
        Me.Controls.Add(ListView1)
        Me.Text = "Deep_Research_For_ListView_Developement"
        Me.Name = "Research_Form1"            
        Me.ResumeLayout(False)
    End Sub

    Public Shared Sub Main()
      Dim form1 As Form1 = New Form1()
      form1.ShowDialog()
    End Sub 

    Private Sub Research_Form1_Load(ByVal sender As Object, _
                         ByVal e As System.EventArgs) Handles MyBase.Load
        Me.Location = New System.Drawing.Point(0,0) 
```

'''###########################-两个代码都有效-############### ############ ' 对于每个 i 作为 ListViewItem 在 listView1.Items ' i.ForeColor = Color.Green ' i.BackColor = Color.Yellow
' Next

```
 For Each i As ListViewItem In ListView1.Items
              If (i.Index Mod 2) = 1 Then
                 i.BackColor = Color.FromArgb(230, 150, 255)
                 i.UseItemStyleForSubItems = True
              End If
            Next 
```

'''###########################-两个代码都有效-############### ############ 结束子结束类

来自 CMD 的编译器调用：-

vbc.exe -target:exe [路径]\Form1.vb [路径]\Form1.exe

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-14T18:16:34.300

经典使用我们的 ListView GridView。GridView 是添加列的内容。

[网格视图](http://msdn.microsoft.com/en-us/library/ms752213.aspx)

# performance - 如何优化 MATLAB 按位运算

> ID：11482505
> 
> 赞同：3
> 
> 时间：2012-07-14T09:15:40.873
> 
> 标签：performance, matlab, integer, bit-manipulation

我在 MATLAB 中编写了自己的 SHA1 实现，它提供了正确的哈希值。但是，它非常慢（在我的 Core i7-2760QM 上，一个 1000 的字符串`a`需要 9.9 秒），我认为缓慢是由于 MATLAB 如何实现按位逻辑运算（`bitand`, `bitor`, `bitxor`, `bitcmp`）和按位移位（`bitshift`, `bitrol`, `bitror`）整数。

`bitrol`特别是我想知道是否需要为命令和`bitror`使用命令构造定点数字对象`fi`，因为无论如何在 Intel x86 程序集中都有各种大小的寄存器`rol`和`ror`内存地址。但是，`bitshift`它非常快（它不需要任何定点数值结构，常规`uint64`变量可以正常工作），这使情况变得奇怪：为什么在 MATLAB 中`bitrol`需要`bitror`用 构造的定点数值对象`fi`，而`bitshift`在装配级别这一切都归结为`shl`,`shr`和?`rol``ror`

因此，在将这个函数用 C/C++ 编写为 .mex 文件之前，我很高兴知道是否有任何方法可以提高这个函数的性能。我知道 SHA1 有一些特定的优化，但这不是问题，如果按位旋转的基本实现是如此缓慢。

`tic`用and进行一点测试`toc`，很明显是什么让它变慢是用`bitrol`and中的循环`fi`。有两个这样的循环：

```
%# Define some variables.
FFFFFFFF = uint64(hex2dec('FFFFFFFF'));

%# constants: K(1), K(2), K(3), K(4).
K(1) = uint64(hex2dec('5A827999'));
K(2) = uint64(hex2dec('6ED9EBA1'));
K(3) = uint64(hex2dec('8F1BBCDC'));
K(4) = uint64(hex2dec('CA62C1D6'));

W = uint64(zeros(1, 80));

... some other code here ...

%# First slow loop begins here.

for index = 17:80
    W(index) = uint64(bitrol(fi(bitxor(bitxor(bitxor(W(index-3), W(index-8)), W(index-14)), W(index-16)), 0, 32, 0), 1));
end

%# First slow loop ends here.

H = sha1_handle_block_struct.H;

A = H(1);
B = H(2);
C = H(3);
D = H(4);
E = H(5);

%# Second slow loop begins here.

for index = 1:80
    rotatedA = uint64(bitrol(fi(A, 0, 32, 0), 5));

    if (index <= 20)
        % alternative #1.
        xorPart = bitxor(D, (bitand(B, (bitxor(C, D)))));
        xorPart = bitand(xorPart, FFFFFFFF);
        temp = rotatedA + xorPart + E + W(index) + K(1);
    elseif ((index >= 21) && (index <= 40))
        % FIPS.
        xorPart = bitxor(bitxor(B, C), D);
        xorPart = bitand(xorPart, FFFFFFFF);
        temp = rotatedA + xorPart + E + W(index) + K(2);
    elseif ((index >= 41) && (index <= 60))
        % alternative #2.
        xorPart = bitor(bitand(B, C), bitand(D, bitxor(B, C)));
        xorPart = bitand(xorPart, FFFFFFFF);
        temp = rotatedA + xorPart + E + W(index) + K(3);
    elseif ((index >= 61) && (index <= 80))
        % FIPS.
        xorPart = bitxor(bitxor(B, C), D);
        xorPart = bitand(xorPart, FFFFFFFF);
        temp = rotatedA + xorPart + E + W(index) + K(4);
    else
        error('error in the code of sha1_handle_block.m!');
    end

temp = bitand(temp, FFFFFFFF);
E = D;
D = C;
C = uint64(bitrol(fi(B, 0, 32, 0), 30));
B = A;
A = temp;
end

%# Second slow loop ends here. 
```

`tic`使用和进行测量`toc`，消息的 SHA1 哈希的整个计算`abc`在我的笔记本电脑上花费了大约 0.63 秒，其中大约 0.23 秒在第一个慢循环中传递，大约 0.38 秒在第二个慢循环中传递。那么在编写 .mex 文件之前，有什么方法可以优化 MATLAB 中的这些循环吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T11:21:44.353

来自 MATLAB File Exchange的这个[`DataHash`](http://www.mathworks.com/matlabcentral/fileexchange/31272)可以快速计算 SHA-1 哈希值。
我运行了以下代码：

```
x = 'The quick brown fox jumped over the lazy dog';  %# Just a short sentence
y = repmat('a', [1, 1e6]);                           %# A million a's
opt = struct('Method', 'SHA-1', 'Format', 'HEX', 'Input', 'bin');
tic, x_hashed = DataHash(uint8(x), opt), toc
tic, y_hashed = DataHash(uint8(y), opt), toc 
```

并得到以下结果：

> `x_hashed = F6513640F3045E9768B239785625CAA6A2588842`
> `Elapsed time is 0.029250 seconds.`
> 
> `y_hashed = 34AA973CD4C4DAA4F61EEB2BDBAD27316534016F`
> `Elapsed time is 0.020595 seconds.`

我用[随机的在线SHA-1工具](http://www.tools4noobs.com/online_php_functions/sha1/)验证了结果，计算确实是正确的。此外，10 个⁶ a 的散列速度比第一句快约 1.5 倍。

那怎么`DataHash`做的这么快？？？使用`java.security.MessageDigest`图书馆，不少！
如果您对 MATLAB 友好的快速 SHA-1 函数感兴趣，这就是您要走的路。

但是，如果这只是实现快速位级操作的练习，那么 MATLAB 并不能真正有效地处理它们，在大多数情况下，您将不得不求助于 MEX。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T09:43:52.613

> 为什么在 MATLAB 中 bitroll 和 bitror 需要用 fi 构造的定点数值对象，而 bitshift 不需要

bitror 和 bitror 不是适用于 uint 的按位逻辑函数集的一部分。它们是定点工具箱的一部分，其中还包含适用于定点输入的 bitand、bitshift 等变体。

如果您想尝试仅使用 uint 函数，则 bitroll 可以表示为两个位移位，一个 bitand 和一个 bitor。不过，这可能会更慢。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-14T16:14:45.897

与大多数 MATLAB 函数一样，`bitand`, `bitor`,`bitxor`是矢量化的。所以如果你给这些函数向量输入而不是在每个元素上循环调用它们，你会更快

例子：

```
%# create two sets of 10k random numbers
num = 10000;
hex = '0123456789ABCDEF';
A = uint64(hex2dec( hex(randi(16, [num 16])) ));
B = uint64(hex2dec( hex(randi(16, [num 16])) ));

%# compare loop vs. vectorized call
tic
C1 = zeros(size(A), class(A));
for i=1:numel(A)
    C1(i) = bitxor(A(i),B(i));
end
toc

tic
C2 = bitxor(A,B);
toc

assert(isequal(C1,C2)) 
```

时间是：

```
Elapsed time is 0.139034 seconds.
Elapsed time is 0.000960 seconds. 
```

这速度快了一个数量级！

问题是，据我所知，SHA-1 计算不能很好地向量化。因此，您可能无法利用这种矢量化。

作为一个实验，我实现了一个纯基于 MATLAB 的函数来计算这样的位操作：

```
function num = my_bitops(op,A,B)
    %# operation to perform: not, and, or, xor
    if ischar(op)
        op = str2func(op);
    end

    %# integer class: uint8, uint16, uint32, uint64
    clss = class(A);
    depth = str2double(clss(5:end));

    %# bit exponents
    e = 2.^(depth-1:-1:0);

    %# convert to binary
    b1 = logical(dec2bin(A,depth)-'0');
    if nargin == 3
        b2 = logical(dec2bin(B,depth)-'0');
    end

    %# perform binary operation
    if nargin < 3
        num = op(b1);
    else
        num = op(b1,b2);
    end

    %# convert back to integer
    num = sum(bsxfun(@times, cast(num,clss), cast(e,clss)), 2, 'native');
end 
```

不幸的是，这在性能方面更糟：

```
tic, C1 = bitxor(A,B); toc
tic, C2 = my_bitops('xor',A,B); toc
assert(isequal(C1,C2)) 
```

时间是：

```
Elapsed time is 0.000984 seconds.
Elapsed time is 0.485692 seconds. 
```

结论：编写一个 MEX 函数或搜索文件交换以查看是否有人已经这样做了 :)

# objective-c - 调用按钮动作函数

> ID：11482507
> 
> 赞同：1
> 
> 时间：2012-07-14T09:15:54.790
> 
> 标签：objective-c, xcode, cocoa-touch

只是一个简单的问题...假设我创建了一个按钮并为其添加了一些操作：

```
-(IBAction)btnclicked:(id)sender {
        //some code here
} 
```

现在我想打电话给它，所以我可以这样做：

```
[self btnclicked:self]; 
```

所以我的问题是，剧`self`后`btnclicked`扮演什么角色？为什么这样写会出错：

```
[self btnclicked:sender]; 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T09:40:29.743

sender 是类型 id，可以是任何objective-c 对象（或nil）。所以你可以将任何你喜欢的东西传递给方法，编译器会很高兴。

但是，您在该方法中所做的可能会导致某种 UIControl 异常，因此如果您传入 UIView 或 NSString 或其他任何内容，则可能会出现无法识别的选择器或其他崩溃。换句话说，你可以传入你喜欢的，只要你知道你在做什么。

对于您关于传递发件人错误的问题。我猜这是给编译器警告，因为在您使用它的上下文中未定义发件人。sender 是方法内部参数的变量名，它不是可以传递的全局变量或常量

# mysql - Cakephp 动态模型/实现表

> ID：11482508
> 
> 赞同：0
> 
> 时间：2012-07-14T09:15:57.777
> 
> 标签：mysql, database, cakephp, model

我正在尝试在我的应用程序中实现这个结构（我将使用幻想模型名称）：

```
User hasMany Box
Box  hasMany Item
Item hasOne  Itemdata

"Item" have some metadata/info
"Itemdata" has 2 or 3 mediumblobs 
```

如果我想要一个包含 4 个表的数据库，这将非常容易：用户、框、项目、项目数据。

在我的数据库结构中，由于数据量的原因，我想将 Itemdata 拆分为与用户相关的表，如下所示：

```
a) user1_itemdatas, user2_itemdatas ... 
```

或者至少，

```
b) myapp_user1.itemdatas, myapp_user2.itemdatas 
(where myapp_user* are different DB). 
```

在查找/读取属于某些用户的数据时，如何动态更改模型“Itemdatas”中的表？

我应该选择自定义查询吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T10:09:59.543

好的，我找到了一种方法：

我创建了另一个数据库，在 app/Config/database.php 我添加了一个新连接：

```
public $itemsdb = array(
    'datasource' => 'Database/Mysql',
    'persistent' => false,
    'host' => 'localhost',
    'login' => 'myuser',
    'password' => 'mypass',
    'database' => 'myapp_items',
    'prefix' => ''
); 
```

然后在 Itemdata 模型中我输入：

```
class Itemdata extends AppModel {
  public $useDbConfig = 'itemsdb';
  ..
} 
```

最后在执行搜索时：

```
$user_id = $this->getUserByItemId($item_id);
$this->Itemdatas->useTable = 'itemdatas_user_'.$user_id;
$itemdata = $this->Itemdata->find('first',....); 
```

另一种方法是使用取决于用户的表前缀，而不是表名。

# c++ - 如何编译使用源头文件的应用程序？

> ID：11482510
> 
> 赞同：0
> 
> 时间：2012-07-14T09:16:23.837
> 
> 标签：c++, static, linker, libraries

这个问题可能已经被无数次回答了——我读过一些类似的问题，但我还是不明白。

我有 libaiml 项目的源代码——aiml 的 C++ 解释器，一个 chatterbox 程序的规范。

在示例程序的源代码中，它包含对头文件的#include 调用：

```
#include "../src/aiml.h" 
```

头文件在那里，我编译并链接了程序，它指出找不到头文件。

各种答案都表明需要将头文件编译成静态库（.a 文件），但是当 .h 文件未编译成库二进制文件时，程序将如何引用它？

我也尝试用 G++ 和 ar 将 srcs 编译成一个库，但它包含很多错误。我做错什么了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T05:58:44.400

> 我做错什么了吗？

是的：您完全错误地陈述了实际发生在您身上的事情。你说“它说找不到头文件”，“我编译并链接了程序”。

但真正发生的是，你已经编译，链接程序*失败*，错误与头文件*无关；*相反，您在链接时会丢失符号。

要解决您的问题，您*必须*将`libaiml` *库*链接到您的可执行文件（当您在目录中构建时应该已经构建了这个库`../src/`。这样的东西应该可以工作：

```
g++ -I../src -o program program.cc -L../src -laiml 
```

# c - 确定回溯递归算法中的基本条件

> ID：11482511
> 
> 赞同：0
> 
> 时间：2012-07-14T09:16:51.543
> 
> 标签：c, algorithm

我正在解决 N Queen 问题，我们需要在 4 X 4 棋盘上放置 4 个皇后，这样没有两个皇后可以互相攻击。我早些时候尝试过，但我的方法不涉及回溯，所以我再次尝试。代码片段是

```
int size=4,i,j;
int arr[4][4];
int lastjindex[4]; // to store the last location which we may need to backtrack

void placeQueen(int i,int j)
{
    int availableornot=0;

    for(j=0;j<size;j++)
    {
        if(isAvailable(i,j)==1)
        {
            availableornot=1;
            break;
        }
    }

    if(availableornot==1)
    {
        arr[i][j]=1;
        lastjindex[i]=j;

        if((i+1)!=size)
        {
            placeQueen(i+1,0);
        }
    }

    else
    {
        // no column was availabe so we backtrack
        arr[i-1][lastjindex[i-1]]=0;
        placeQueen(i-1,lastjindex[i-1]+1);
    }
} 
```

如果 arr[i][j] 没有受到攻击，isAvailable() 方法返回 1，否则返回 0。

```
int isAvailable(int i,int j)
{
    int m,n,flag=0;

    for(m=0;m<i;m++)
    {
        for(n=0;n<size;n++)
        {
            int k=abs(i-m);
            int l=abs(j-n);

            if(arr[m][j]==0 || arr[k][l]==0)
            {
                flag=1;
                break;
                // means that spot is available
            }
        }
    }
    return flag;
} 
```

* * *

我从 main 调用上述方法

```
placeQueen(0,0); 
```

我的程序编译成功，但打印全为零。

* * *

我的递归有什么问题吗？请帮助我更正我的代码，因为我正在尝试学习如何实现回溯算法！

* * *

我也无法决定结束递归的基本条件。我如何在这里选择它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T13:37:14.300

```
#include <stdio.h>

#define SIZE 4
int size=SIZE;
int arr[SIZE][SIZE] = { 0 };

void placeQueen(int col){
    int r,c;
    if(col == size){//all queen put!
        //print out
        for(r = 0;r<size;++r){
            for(c = 0;c<size;++c)
                printf("%d", arr[c][r]);
            printf("\n");
        }
        printf("\n");
        return ;
    }
    for(r=0;r<size;++r){
        if(isAvailable(col, r)==1){
            arr[col][r]=1;
            placeQueen(col+1);
            arr[col][r]=0;//reset
        }
    }
}

int isAvailable(int col,int row){
    int c;

    for(c=0;c<col;++c){
        int d = col - c;
        if(arr[c][row]==1)
            return 0;//queen already same row
        if(row+d < size && arr[c][row+d]==1 || row-d >= 0 && arr[c][row-d]==1)
            return 0;//queen already same slanting position
    }
    return 1;
}

int main(){
    placeQueen(0);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T09:45:15.190

您发布的代码中没有打印。如果您在回溯后打印，您将回到棋盘上没有皇后的初始状态。在放置 N 个皇后后打印，这也是递归的结束条件。如果您只想打印一个解决方案，请在打印后退出，或者设置一个标志告诉调用者您已完成，以便您一直弹出。如果您打印所有解决方案，那将包括反射和旋转。您可以通过仅在第一级中放置 size/2 以内的皇后来消除一个反射轴。

此外，您的代码中存在一些明显的逻辑错误，例如

```
arr[m][j]==0 || arr[k][l]==0 
```

**只有没有在文件上受到攻击并且**没有沿对角线受到攻击的皇后才能被放置。使用调试器或将 printfs 添加到您的代码中以跟踪它试图放置皇后的位置——这将帮助您找出它做错了什么。

除了错误之外，您`isAvailable`的效率非常低。您想知道 [i,j] 方块是沿文件还是对角线受到攻击。为此，您应该对先前皇后的行进行一个循环`for (m = 0; m < i; m++)`，但您只需要三个测试，而不是一个循环，来检查文件和对角线。一旦您在文件或对角线上找到任何先前的皇后，您就完成了，并且正方形不可用 - 返回 false。（并且忽略那些告诉你一个函数应该只有一个返回值的人——他们错了，这里有冗长的讨论，甚至对代码中错误率的科学研究都证明了这一点。）只有在没有前任女王的情况下发现是可用的正方形。

你`placeQueen`的也是错的。对于一行中的**每个**可用方格，您需要放置一个皇后然后递归，但您只是找到第一个可用方格。只需移除您放置的皇后然后返回即可实现回溯……前一级的 placeQueen 将尝试下一个可用位置。

再次，跟踪代码以查看它在做什么。而且，更重要的是，思考需要什么的逻辑。用文字写下你的算法，说服自己它会解决问题，然后编写代码来执行算法。

# php - 如何从 php/html 检查网站是否已启动？

> ID：11482513
> 
> 赞同：1
> 
> 时间：2012-07-14T09:17:51.403
> 
> 标签：php, javascript, http, google-analytics

我希望我网站的用户检查是否有任何其他网站（http 和/或 https）已启动。有些网站为此使用谷歌分析（如果我理解正确的话）。但我不明白他们是怎么做到的。

**问题 1)**我如何在我的网站上使用 google-analytics 来检查其他网站是否启动？

**问题 2** ) 我自己怎么做？使用 php 还是 javascript？我想知道如果 google-analytics 使用多个服务器位置来检查站点是否在线，与我将使用自己的代码使用的单个位置相比，它们是否更可靠。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T09:19:39.343

您可以使用服务器端 Curl 并监控 http 响应标头、站点超时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T11:42:21.217

可以尝试直接连接到服务器的 http(s) 端口。

```
 $canConnect = FALSE;
    $host = 'www.example.com';
    $service_port = 80; // http, for https use 443;
    $address = gethostbyname ($host);
    $socket = socket_create (AF_INET, SOCK_STREAM, SOL_TCP);
    if ($socket !== FALSE) {
        $result = socket_connect ($socket, $address, $service_port);
        if ($result) {
            $canConnect = TRUE;
        }
        socket_close($socket);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T09:51:15.103

您可以 ping 服务器并监控响应。此链接向您展示 PHP 中的实现：[http ://www.darian-brown.com/php-ping-script-to-check-remote-server-or-website/](http://www.darian-brown.com/php-ping-script-to-check-remote-server-or-website/)

# jakarta-ee - 在 WebLogic 12c 上重新部署应用程序的类加载混淆

> ID：11482516
> 
> 赞同：2
> 
> 时间：2012-07-14T09:18:40.280
> 
> 标签：jakarta-ee, ejb, weblogic, classloader, weblogic12c

我有一个应用程序，它由一个 EJB 模块、一个 Web 模块和一些 JAR（我自己的和第三方的库）组成。它被打包为 EAR 文件。这些库位于“libs”目录中，EJB 清单文件在其类路径中包含这些库。打包 Web 模块时不包含依赖项或指定类路径。

```
The EAR content (simplified):
/libs/model.jar
/libs/other.jar
ejb.jar
web.war 
```

我的 Web 模块中有一个 @Stateless bean，它通过注入 @EJB 从 EJB 模块中查找一个 bean。安全性是通过model.jar 中ActiveUser 类上的ThreadLocal 访问和检查用户角色来实现的。我的@stateless web bean 在一个用@PostConstruct 注释的方法中初始化了一些缓存。为了满足安全模块，它首先在 ActiveUser 中的 ThreadLocal 上设置系统凭据。然后它在注入的 EJB 上调用一个方法，该方法返回缓存的数据（在检查 ActiveUser 上的凭据之后）

当我部署我的应用程序（使用 weblogic maven 插件）时，一切都像一个魅力。

然后我重新部署我的应用程序（再次使用 weblogic maven 插件）。我已经阅读了 WebLogic 文档，这里强调在重新部署时旧的类加载器将被丢弃并实例化新的类加载器（因为无法卸载或更新由类加载器加载的类）。但是我的重新部署失败了，因为 EJB 抱怨当 Web 模块尝试读取 @PostConstruct 中缓存的数据时，用户没有得到正确的身份验证。

调试代码后，我发现Web模块bean仍然使用“旧”类加载器加载的ActiveUser类定义（对象ID与旧类加载器相同）。EJB bean 使用由新类加载器加载的 ActiveUser 类定义。所以 ThreadLocals 当然不再是同一个对象了。我还想象由于这种特定状态，可能会引发许多 ClassCastExceptions。

为什么这个旧的“幽灵”类加载器仍然活跃？我使用 WLS-cat 应用程序检查了我的应用程序的类加载器树，这里只有新的类加载器 - 没有旧类加载器的踪迹。

对行动方案有什么建议吗？有没有人经历过这个？

如果我重新启动托管服务器，应用程序启动时没有任何问题，但我不想在每次重新部署后重新启动：我想每晚重新部署夜间快照构建并自动运行集成测试，而 weblogic maven 插件没有任何目标重新启动服务器。

# html - 固定布局与流体布局与弹性布局与响应式布局之间有什么区别

> ID：11482518
> 
> 赞同：0
> 
> 时间：2012-07-14T09:18:53.150
> 
> 标签：html, css, layout, css-float, fluid-layout

你能详细说明一下两者的区别吗

固定布局与流体布局与弹性布局与响应式布局

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-09-21T15:05:14.347

我将尝试解释这本书[“响应式网页设计 - A. Ertel, K. Laborenz - Galileo Computing”](http://www.amazon.de/Responsive-Webdesign-Das-umfassende-Praxis-Training/dp/3836223120)

> **固定布局**
> 
> 一种布局，其尺寸以像素表示，因此无法适应不同的屏幕尺寸或分辨率。如果屏幕太小，将显示滚动条。 [![在此处输入图像描述](../Images/e4239b781a3a9459bebfaa6b786c064e.png)](https://i.stack.imgur.com/kyiyH.png)

* * *

> **流体和弹性布局**
> 
> 流体布局以视口的*百分比*定义。当窗口大小改变时，布局的尺寸也会相应改变。文字和图片**保持**其大小。
> 
> 固定布局和流动布局之间的混合形式是弹性布局。元素宽度以*em*表示，这取决于字体大小。因此，当窗口大小改变时布局不会改变，而是在字体大小改变时改变。原则上，这是大多数浏览器通过*页面缩放*(CTRL+鼠标滚轮) 提供的行为。

[![在此处输入图像描述](../Images/ea8b91f13ca2887af387b4731d3f6389.png)](https://i.stack.imgur.com/m2YkK.png)

* * *

> **自适应布局**
> 
> 自适应布局原则上是一个固定版本，存在多个版本。根据可用的屏幕尺寸，它会“跳跃”通过这些版本。在断点之间它表现为一个固定的布局。

## [![在此处输入图像描述](../Images/2f42eb61cd0c8ccffeea12412afc9deb.png)](https://i.stack.imgur.com/BgCSH.png)

> **响应式布局**
> 
> 响应式布局结合了流体和自适应布局的属性。它在“断点”上发生很大变化，此外它还像这些断点之间的流体布局一样延伸。它还允许内容缩放，即图片适应可用空间。
> 
> ## [![在此处输入图像描述](../Images/377d996ba3c09f32bd0f64b8b6c45268.png)](https://i.stack.imgur.com/VJQrq.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T10:20:22.187

**流体、弹性和响应式布局**都是相同的......

只有**固定布局**是一种布局，您可以在其中将页面宽度固定为给定大小，例如以像素为单位......

流体布局的宽度为 100%，其元素通过屏幕分辨率排列...

响应式意味着网页元素通过屏幕分辨率排列...

看看这个流体样本：-

1.  [流体样品](http://twitter.github.com/bootstrap/examples/fluid.html)
2.  [响应式](http://twitter.github.com/bootstrap/examples/hero.html)

参考：- [Twitter Bootstrap](http://twitter.github.com/bootstrap/index.html)

# javascript - 通过 jquery.html() 将一组数据传递给 javascript 函数

> ID：11482522
> 
> 赞同：0
> 
> 时间：2012-07-14T09:19:33.367
> 
> 标签：javascript, jquery, arrays, json, function

我的代码中有 2 个函数 - makeData 和 displayData -。

```
<script type="text/javascript">
    function makeData(){
        var myjson = {}; var myarray = [];
        for (var i = 0; i < 10; i++){ 
           myjson[i] = "json"+i; 
           myarray[i] = "array"+i;
        }

        //when i pass myjson[1] and myarray[1] value, it's work for me
        $("#mydiv").html("<input type=\"button\" value=\"display data\" 
              onclick=displayData(\""+myjson[0]+"\",\""+myarray[0]+"\") />");
        /*but when i tried to pass the json and array object, i got problem here.
          displayData() function cannot read those objects*/
        $("#mydiv").html("<input type=\"button\" value=\"display data\" 
              onclick=displayData(\""+myjson+"\",\""+myarray+"\") />");

    }
</script>
<input type="button" value="make some button" onclick="makeData()" />
<div id="mydiv"></div>
<div id="dataDisplay"></div> 
```

我如何将数组/json对象传递给使用innerHTML编写的javascript函数？？？

注意：我的目的是将一组数据传递给 javascript 函数。

编辑：我认为现在更清楚了。对不起之前..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T10:32:57.713

您可以将您的对象或数组转换为字符串表示 (JSON) 以将其写入 DOM（例如，作为您调用 onclick 的函数的参数）。

给我 10 分钟写一个更好的例子。这里是。它并不完美（例如，索引似乎是“字符串”类型，即使实际上是“数字”），但它应该涵盖大多数情况。请注意，您不能使用此示例转换函数或引用：

```
function convertObjectToString( obj )
{
    var stringRep = "{";

    for ( var index in obj)
    {       
        var cIndex;
        if ( typeof index == "number" ) // int index
            cIndex = index;    
        else // string index
            cIndex = "\"" + index + "\"";

        if ( typeof obj[index] == "object" )
            stringRep += cIndex + ":" + convertObjectToString( 
                            obj[index] ) + ","; // convert recursively
        else if ( typeof obj[index] == "number" )
            stringRep += cIndex + ":" + obj[index] + ",";
        else
            stringRep += cIndex + ":\"" + obj[index] + "\","; 

    }
    // remove trailing comma (if not empty)
    if ( stringRep.length > 1 )
        stringRep = stringRep.substr(0, stringRep.length - 1);
    stringRep += "}";
    return stringRep;
} 
```

或者最好只使用 JSON.stringify 函数！[https://developer.mozilla.org/En/Using_native_JSON/](https://developer.mozilla.org/En/Using_native_JSON/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T13:03:49.740

我想我已经找到了我的问题的答案。这是修改后的代码：

```
function buatdata(){
    var myjson={};
    var myarray= [];
    for(var i = 0 ; i < 10 ; i++){
        myjson[i] = "json"+i;
        myarray[i] = "array"+i;
    }
    var arraystring = myarray.toString().replace(\,\g,"&#44;");
    var jsonstring = JSON.stringify(myjson).replace(\"\g,"&quot;");

    /* i changed " to ' to wrap parameter that i passed in tampildata() function 
        and i convert those object to string first.*/

    $("#tombol").html("<input type=\"button\" value=\"display\" 
          onclick=tampildata('"+jsonstring+"','"+arraystring+"') />");
}
function tampildata(getjson,getarray){
    //i changed string that i passed back to object, so i get what i want.
    var myarray = getarray.split(',');
    var myjson = JSON.parse(getjson);
} 
```

使用该功能，我通过数组和 json 对象。但我仍然希望我可以使用其他方法。因为我害怕如果我的数据集非常大，它会减慢散文的速度。

# jquery-ui - slidechange 事件是如何以及在哪里引发的？

> ID：11482525
> 
> 赞同：1
> 
> 时间：2012-07-14T09:20:00.777
> 
> 标签：jquery-ui

我有一个用于 Knockout 的自定义绑定，它附加到 jquery UI 滑块上的“slidechange”事件。

我无法弄清楚这个事件是在哪里引发的——在 jquery UI 源代码中对“slidechange”的文本搜索没有任何结果！

所以我猜这是一种基于约定的方法 - 问题是：jquery UI 的事件约定是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T18:18:33.150

`slidechange`每当用户更改滑块的位置时，都会触发该事件。如果您查看代码中的`_change`方法，`jquery.ui.slider.js`则在代码中是触发事件的代码行。

```
this._trigger( "change", event, uiHash ); 
```

`_trigger`是 jQuery UI 的小部件工厂中的一个方法，它将在第一个参数前面加上小部件的定义`widgetEventPrefix`（在本例中`slide`）。`slidechange`因此，当调用该行代码时，将触发绑定到事件的所有处理程序。

订阅事件有两种方式。一种是`function`在创建`slider`.

```
$('my-selector').slider({
    change: function() {
        console.log('change');
    }
}); 
```

`slidechange`另一种是使用 jQuery 的`bind`or`on`方法订阅事件。

```
$('my-selector').on('slidechange', function() {
    console.log('change');
}); 
```

您可以在此示例中看到这两个事件都被触发 - [http://jsfiddle.net/tj_vantoll/XUyKs/](http://jsfiddle.net/tj_vantoll/XUyKs/)

jQuery UI 的 API 站点记录了每个小部件触发的所有事件，并提供了如何订阅它们的示例。例如，这里是关于`slidechange`事件的文档 - [http://jqueryui.com/demos/slider/#event-change](http://jqueryui.com/demos/slider/#event-change)。

# php - 解析错误：语法错误，我的 PHP 代码中的文件意外结束

> ID：11482527
> 
> 赞同：194
> 
> 时间：2012-07-14T09:20:26.870
> 
> 标签：php, html, parse-error

我收到一个错误：

```
Parse error: syntax error, unexpected end of file in the line 
```

使用此代码：

```
<html>
    <?php
        function login()
        {
            // Login function code
        }
        if (login())
    {?>

    <h2>Welcome Administrator</h2>
    <a href=\"upload.php\">Upload Files</a>
    <br />
    <a href=\"points.php\">Edit Points Tally</a>

    <?php}
        else
        {
            echo "Incorrect login details. Please login";
        }
    ?>
    Some more HTML code
</html> 
```

有什么问题？

* * *

## 回答 #1

> 赞同：353
> 
> 时间：2012-07-14T09:33:21.870

您应该避免这种情况（在代码末尾）：

```
{?> 
```

还有这个：

```
<?php} 
```

你不应该把括号直接靠近打开/关闭`php`标签，而是用空格隔开：

```
{ ?>
<?php { 
```

也避免`<?`和使用`<?php`

* * *

## 回答 #2

> 赞同：107
> 
> 时间：2015-11-03T07:13:16.783

我有同样的错误，但我通过修改`php.ini`文件修复了它。

找到你的 php.ini 文件，看看[老兄，我的 php.ini 呢？](https://stackoverflow.com/questions/8684609/dude-wheres-my-php-ini)

然后用你最喜欢的编辑器打开它。

查找`short_open_tag`属性，并应用以下更改：

```
; short_open_tag = Off ; previous value
short_open_tag = On ; new value 
```

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2016-03-05T16:02:09.000

> 我有同样的错误，但我通过修改 php.ini 和/或编辑 PHP 文件来修复它！

有两种不同的方法可以绕过解析错误语法。

### 方法 1（您的 PHP 文件）

避免在您的 PHP 文件中：

```
<? } ?> 
```

确保你把它像这样

```
<?php ?> 
```

> 您的代码包含`<? ?>`
> 
> ***注意：*** **后面****的缺失！`php``<?`**

### 方法二（php.ini 文件）

还有一种简单的方法可以解决您的问题。搜索`short_open_tag`属性值*（在您的文本编辑器中使用`Ctrl + F`！）*，并应用以下更改：

```
; short_open_tag = Off 
```

到

```
short_open_tag = On 
```

根据[核心 php.ini 指令的描述](https://secure.php.net/manual/en/ini.core.php#ini.short-open-tag)，`short_open_tag`允许您使用短打开标记 ( `<?`)，尽管**这可能会在与 xml 一起使用时导致问题（`<?xml`启用此功能时将不起作用）！**

> ***注意：*** **重新加载您的服务器*（例如：Apache）*并在您的浏览器中重新加载您的 PHP 网页。**

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2015-12-09T19:52:30.230

只需转到 php.ini 然后找到`short_open_tag= Off`设置为`short_open_tag= On`

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2020-04-09T17:41:01.190

# 此外，请注意heredoc 关闭标识符。

**无效示例：**

```
// it's not working!!!

function findAll() {
    $query=<<<SQL
        SELECT * FROM `table_1`;
    SQL; // <-------- THIS IS BAD

    // ...
} 
```

这将引发类似于以下内容的异常：

```
<br />
<b>Parse error</b>:  syntax error, unexpected end of file in <b>[...][...]</b> on line <b>5</b><br /> 
```

其中数字 5 可能是文件的最后一行。

**根据[php手册](https://www.php.net/manual/en/language.types.string.php)：**

> **警告** 请务必注意，带有结束标识符的行不能包含其他字符，分号 (;) 除外。这尤其意味着标识符可能不会缩进，并且分号之前或之后可能没有任何空格或制表符。同样重要的是要认识到结束标识符之前的第一个字符必须是本地操作系统定义的换行符。这是在 UNIX 系统上的 \n，包括 macOS。结束分隔符后还必须跟一个换行符。

***TLDR***：结束标识符不应**缩进**。

**有效示例：**

```
function findAll() {
    $query=<<<SQL
        SELECT * FROM `table_1`;
SQL;
    // closing identifier should not be indented, although it might look ugly

    // ...
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2017-09-05T23:16:36.583

## 查找任何未关闭的循环或语句。

当我离开 php foreach: 标记未关闭时，我遇到了这个麻烦。

```
<?php foreach($many as $one): ?> 
```

使用以下方法关闭它解决了语法错误：`unexpected end of file`

```
<?php endforeach; ?> 
```

希望它可以帮助某人

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2015-12-16T20:12:06.527

检查您是否关闭了课程。

例如，如果您有带有方法的控制器类，并且不小心删除了关闭整个类的最后一个括号，您将收到此错误。

```
class someControler{
private $varr;
public $varu;
..
public function method {
..
} 
..
}// if you forget to close the controller, you will get the error 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2017-01-06T02:35:54.743

另外，寻找一个注释 // 打破右花括号

`if (1==1) { //echo "it is true"; }`

右花括号不会正确关闭条件部分，php 也不会正确处理其余代码。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2016-01-18T06:37:38.933

避免这种情况，`<? } ?>`确保你把`<?php } ?>`

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2012-07-14T09:33:13.733

我看到了一些错误，我在下面修复了这些错误。

这就是我得到的错误：

```
if (login())
{?>
<h2>Welcome Administrator</h2>
<a href=\"upload.php\">Upload Files</a>
<br />
<a href=\"points.php\">Edit Points Tally</a>
<?php}
else
{
echo "Incorrect login details. Please login";
} 
```

我会这样做：

```
<html>
    some code
<?php
function login()
{
    if (empty ($_POST['username']))
    {
        return false;
    }
    if (empty ($_POST['password']))
    {
        return false;
    }
    $username = trim ($_POST['username']);
    $password = trim ($_POST['password']);
    $scrambled = md5 ($password . 'foo');
    $link = mysqli_connect('localhost', 'root', 'password');
    if (!$link)
    {
        $error = "Unable to connect to the database server";
        include 'error.html.php';
        exit ();
    }
    if (!mysqli_set_charset ($link, 'utf8'))
    {
        $error = "Unable to set database connection encoding";
        include 'error.html.php';
        exit ();
    }
    if (!mysqli_select_db ($link, 'foo'))
    {
        $error = "Unable to locate the foo database";
        include 'error.html.php';
        exit ();
    }
    $sql = "SELECT COUNT(*) FROM admin WHERE username = '$username' AND password = '$scrambled'";
    $result = mysqli_query ($link, $sql);
    if (!$result)
    {
        return false;
        exit ();
    }
    $row = mysqli_fetch_array ($result);
    if ($row[0] > 0)
    {
        return true;
    }
    else
    {
        return false;
    }
}
if (login())
{
echo '<h2>Welcome Administrator</h2>
<a href=\"upload.php\">Upload Files</a>
<br />
<a href=\"points.php\">Edit Points Tally</a>';
}
else
{
    echo "Incorrect login details. Please login";
}
?>
some more html code
</html> 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-04-26T09:57:04.037

此外，另一种很难发现的情况是，当你有一个只有一个函数的文件时，我知道这不是一个常见的用例，但它很烦人，必须发现错误。

```
<?php
function () {

} 
```

上面的文件返回错误，`Parse error: syntax error, unexpected end of file in`而下面的文件没有。

```
<?php
function () {

}; 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-02-25T02:06:25.650

就我而言，罪魁祸首是`<?php`文件最后一行中唯一的开始标签。显然，它适用于某些配置而没有问题，但会导致其他配置出现问题。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-07-28T15:15:56.237

对我来说，最常见的原因是省略了 } 字符，因此函数或 if 语句块没有终止。我通过在我最近的编辑后插入一个 } 字符并从那里移动它来解决这个问题。我使用的编辑器可以定位与右括号相对应的左括号，因此该功能也有帮助（它可以定位未正确终止的函数）。

我们可以希望有一天语言解释器和编译器会做一些工作来生成更好的错误消息，因为省略右括号很容易。

如果这对任何人有帮助，请投票给答案。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-06-07T17:30:56.637

为了补充其他答案，如果您使用像 FileZilla 这样的 ftp 客户端，也可能是由于您的 php 脚本的自动缩小。确保传输类型设置为二进制而不是 ASCII 或自动。ASCII 或自动传输类型可以缩小导致此错误的 php 代码。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2021-04-15T10:28:20.530

这不是对您的代码的回答，而是对同一错误消息的回答。它可能对某人有帮助。在我的情况下，我有一个错误“解析错误：语法错误，第 665 行我的 PHP 代码中的文件意外结束”在我的情况下，问题在于关闭“html”

```
 $html = <<<html
....
            html 
```

在 7.2 版本中，结束标记之前应该没有空格

```
 $html = <<<html
....
html 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2021-04-22T22:54:49.200

就我而言，这是一个未封闭的功能。我不得不一一删除和恢复函数，以检查哪个函数影响了代码。

我希望有人受益

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2022-01-09T20:02:19.370

如果你是 linux 用户并且在服务器上运行你的旧 php 网站，那么`apache2`找到这个文件，如果你正在使用这样 `/etc/php/<php version>/apache2/php.in`的方式执行 php 脚本`php cli``php example.php``/etc/php/<php version>/cli/php.ini`

在 apache2 的情况下 设置并`short_open_tag = Off` 重新 启动您的服务`short_open_tag = On``sudo systemctl restart apache2.service`

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-05-30T09:37:36.053

如果您使用 parse_ini_file($file) 或例程正在处理 .ini 文件，请检查您的数据是否在 ini 文件中被引用。未引用的数据将导致此错误。前任; data1=test 会导致错误，data1="test" 不会。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-12-27T08:43:46.967

我开发了一个插件并将它安装在一个运行在 Nginx 上的 Wordpress 站点上，它很好。当我切换到 Apache 时，我只有这个错误，结果 Web 服务器不接受 . `<?`，所以我只是替换了`<?`标签，`<?php`然后它就可以工作了。

* * *

## 回答 #20

> 赞同：-3
> 
> 时间：2019-08-13T07:39:17.287

您不能将 IF/ELSE 指令分成两个单独的块。如果您需要打印 HTML 代码，请使用**echo**。

```
<html>
    <?php
        function login()
        {
            // Login function code
        }
        if (login())
        {
            echo "<h2>Welcome Administrator</h2>
            <a href=\"upload.php\">Upload Files</a>
            <br />
            <a href=\"points.php\">Edit Points Tally</a>";
        }
        else
        {
            echo "Incorrect login details. Please login";
        }
    ?>
    Some more HTML code
</html> 
```

# algorithm - 中值滤波器超高效实现

> ID：11482529
> 
> 赞同：5
> 
> 时间：2012-07-14T09:20:30.453
> 
> 标签：algorithm, median

我正在寻找快速/高效中值滤波器的 Ansi C 实现。任何指针？

到目前为止，我已经找到了[以下](http://www.eetindia.co.in/STATIC/PDF/200011/EEIOL_2000NOV03_EMS_EDA_TA.pdf?SOURCES=DOWNLOAD)实现，这很好，但我对更快的实现很好奇。我只需要一维。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-01T05:11:57.610

我需要从非常嘈杂的 CPU 消耗数据中提取信号。这是 Jeff McClintock 中值滤波器...

将平均值和中值初始化为零，然后对于每个样本“英寸”，中值朝向输入样本增加一个小增量。最终它将稳定在大约 50% 的输入样本大于中值，而 50% 小于中值的点。增量的大小应与实际中位数成比例。由于我们不知道实际的中位数，我使用平均值作为粗略估计。步长计算为估计值的 0.01 倍。较小的步长更准确，但需要更长的时间来解决。

```
float median = 0.0f;
float average = 0.0f;

// for each sample
{
    average += ( abs(sample) - average ) * 0.1f; // rough running average magnitude.
    median += _copysign( average * 0.01, sample - median );
} 
```

![在此处输入图像描述](../Images/c0c46046c0c424b36561ad1f49672ca0.png)

# macos - 在mac上创建一个R函数的键盘快捷键？

> ID：11482530
> 
> 赞同：5
> 
> 时间：2012-07-14T09:20:38.597
> 
> 标签：macos, r, shell, keyboard-shortcuts

我想创建一个键盘快捷键来在现有的 R 会话中运行 R 函数。我怎样才能在 Mac 上做到这一点？

我的第一个想法是使用

% R --slave < foo.R

并使用此命令创建 shell 脚本的键盘快捷方式。

但这会启动一个新的 R 会话。有没有办法从 shell 向现有会话发送命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T07:49:19.547

我可以想到两种类似的方法来做到这一点；两者都不一定优雅，但两者都能完成工作。

*   运行仅包含 R 会话的 tmux 会话，并编写`tmux send-keys`用于发送命令的脚本。

*   同样，您可以设置一个专门的 iTerm2 会话来接收密钥。如果你已经在 iTerm2 中，你可以设置一个键盘快捷键来发送你的命令。在 iTerm2 之外，我认为您正在查看一些 applescript。

# php - 检查数组php中是否存在键时出错？

> ID：11482531
> 
> 赞同：0
> 
> 时间：2012-07-14T09:20:50.903
> 
> 标签：php

我有一个示例代码：

```
$array1 = ("key1", "key3");
$array2 = ("value1", "value3");
$array = array_combine($array1, $array2);
if(!isset($array["key2"])) {
   $array["key2"] = "value2";
} 
```

但结果是错误，如何修复它

```
array("key1"=>"value1", "key2"=>"value2", "key3"=>"value3"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T09:23:15.360

您必须指定您希望当前分配给`$array1`并`$array2`用作数组的参数。

```
$array1 = array ("key1", "key3");
$array2 = array ("value1", "value3"); 
```

* * *

### 完整示例

```
$array1 = array ("key1",     "key3");
$array2 = array ("value1", "value3");

$array  = array_combine($array1, $array2);

if(!isset($array["key2"])) {
  $array["key2"] = "value2";
} 

print_r ($array); 
```

```
Array
(
    [key1] => value1
    [key3] => value3
    [key2] => value2
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T09:23:24.480

你应该像这样定义array1和array2：

```
$array1 = array("key1", "key3");
$array2 = array("value1", "value3"); 
```

看到[这个小提琴](http://codepad.viper-7.com/KNfzbj)。

如果您希望订购它们，只需使用[ksort](http://php.net/ksort)：

```
ksort($array);
// var_dump($array); output:
// array(3) { ["key1"]=> string(6) "value1" ["key2"]=> string(6) "value2" ["key3"]=> string(6) "value3" } 
```

看到[这个小提琴](http://codepad.viper-7.com/r2pttg)。

# iphone - 在已经分配给特定 ivar 时将对象分配给 ivar

> ID：11482538
> 
> 赞同：0
> 
> 时间：2012-07-14T09:21:43.237
> 
> 标签：iphone, objective-c, ios, ipad

在我将对象分配给可能已经分配给该对象的 ivar 的情况下，首先检查它是否已分配给该 ivar 有什么好处。

例如，编码**A**比编码**B**有什么好处吗？

# 一种

```
if (ivar != anObject)
{
    ivar = anObject;
} 
```

# 乙

```
ivar = anObject; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T09:37:28.640

它不是绝对必要的，我相信@property/@synthesize 生成的setter 这样做是为了优化并停止对同一对象的不必要的内存管理调用（对于强属性，旧对象被释放并保留新对象，但是如果它们是相同的指针，最终结果是保留计数不变）

# concurrency - GPars 演员模型是使用用户线程还是本机操作系统线程

> ID：11482540
> 
> 赞同：0
> 
> 时间：2012-07-14T09:21:57.593
> 
> 标签：concurrency, actor, gpars

我知道当没有消息要处理时，演员不会消耗线程，并且仅在消息到达时才将自己附加到线程。但是我的问题是，当演员附加到线程时，它是什么类型的线程 - 用户线程或本机操作系统线程？

我想基本上了解如果演员中有一些阻塞代码会发生什么，比如一些 i/o 调用或等待 Web 服务的响应？线程会保持阻塞还是线程将被释放并可供其他参与者使用？据我所知，如果它是本机线程，那么它将被阻塞。但是，如果它是用户线程，则本机线程可能不会被阻塞

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T06:29:27.170

Actor 主体内的 IO 操作将阻塞当前线程。

# ios - sqlite方法有什么问题

> ID：11482545
> 
> 赞同：0
> 
> 时间：2012-07-14T09:22:22.280
> 
> 标签：ios, sqlite

这是我正在尝试使用的方法：

```
NSString *orario = [NSString new];
int idmed = 0;
fileMgr = [NSFileManager defaultManager];
sqlite3_stmt *stmt=nil;
sqlite3_stmt *stmt1=nil;
sqlite3_stmt *stmt2=nil;
sqlite3 *dbase;
NSString *database = [self.GetDocumentDirectory stringByAppendingPathComponent:@"med.sqlite"];
sqlite3_open([database UTF8String], &dbase);
const char *sql = "delete from orari where date(orario) <= date('now','-2 day','localtime')";
sqlite3_prepare_v2(dbase, sql, -1, &stmt, NULL);
sqlite3_step(stmt);
const char *sql1 = "select orario,idmedicina from orari where date(orario)=date('now','localtime') and forever = 1";
const char *sql2 = "insert into orari (orario,idmedicina,presa,forever) values (datetime('?','+1 day'),?,0,1)";
sqlite3_prepare_v2(dbase, sql1, -1, &stmt1, NULL);

while(sqlite3_step(stmt1) == SQLITE_ROW) {
    orario = [NSString stringWithUTF8String:(char *)sqlite3_column_text(stmt1, 0)];
    idmed = [[NSNumber numberWithInt:(int)sqlite3_column_int(stmt1, 1)] intValue];
    sqlite3_prepare_v2(dbase, sql2, -1, &stmt2, NULL);
    sqlite3_bind_text(stmt2, 1, [orario UTF8String], -1, SQLITE_TRANSIENT);
    sqlite3_bind_int(stmt2, 2, idmed);
    sqlite3_step(stmt2);
}
sqlite3_close(dbase); 
```

3 个查询在我看来是正确的，但最后一个没有插入任何行。第二个，得到一排，所以最后一个应该可以工作（如果我直接使用它就可以）。你觉得哪里不对？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T09:24:47.740

您的`?`. 这将尝试将文字问号字符解析为日期时间。如果要`?`表示参数，则不能将其括在引号中。

```
const char *sql2 = "... VALUES (datetime(?, '+1 day'), ?, 0, 1)";
                                         ^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T09:27:13.043

在您的代码中：

```
const char *sql2 = "insert into orari (orario,idmedicina,presa,forever) values (datetime('?','+1 day'),?,0,1)"; 
```

你在你的周围加上引号`?`（在哪里说`values (datetime('?'`把它改成`values (datetime(?`）。生成的代码应如下所示：

```
const char *sql2 = "insert into orari (orario,idmedicina,presa,forever) values (datetime(?,'+1 day'),?,0,1)"; 
```

# .net - 使用 VC++ 开发的程序何时需要在目标机器上安装 .NET Framework，何时需要 MS VC++ Redistributable Package？

> ID：11482548
> 
> 赞同：3
> 
> 时间：2012-07-14T09:22:56.017
> 
> 标签：.net, visual-c++

背景：我主要使用 Java 进行编程，但有时我会调用一些包含在 VC++ 编译的 .dll 中的函数。我正在尝试制作一个安装程序包来检查我的程序的先决条件。我试图了解目标计算机何时需要 .NET Framework 来运行我的程序以及何时需要 Microsoft Visual C++ Redistributable Package。

我相信以下问题将帮助我理解我的主要问题的答案：

假设我编写并成功编译了一个由一个简单的 'cout << "hi";' 组成的程序 Visual C++ 中的语句。运行程序的机器是否需要安装 .NET Framework？

所谓的 Common Language Runtime 和 Microsoft Visual C++ Redistributable Packages（我理解为另一种运行时）有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T09:31:39.553

如果您正在使用它，则只需要 .NET 框架。一个简单的`cout << "hi";`程序绝对不需要额外的包/框架就可以在任何 DOS/Windows（假设它是一个控制台应用程序）平台上成功运行。

但是，如果您正在使用 .NET 框架的任何功能 - 那么，如预期的那样，您需要它存在于目标计算机上。

至于可再发行 - 这是 MSDN 的摘录：

> 此软件包安装 C 运行时 (CRT)、标准 C++、ATL、MFC、OpenMP 和 MSDIA 库的运行时组件

这意味着如果您将它们用作 DLL，则需要此包中的库 (DLL)。您仍然可以轻松地将大部分需要的组件直接链接到您的可执行文件中，在这种情况下，您不需要 DLL。您可以指定您更愿意为库的代码使用共享 DLL 资源，在这种情况下，您需要目标机器上的 Redistributable 运行时。

# jquery - 当鼠标悬停在 toplink div 上时显示块形式

> ID：11482552
> 
> 赞同：0
> 
> 时间：2012-07-14T09:23:36.983
> 
> 标签：jquery

鼠标将悬停在块 html 上：

```
<div class="toplinks">...</div> 
```

显示块内容 html：

```
<div id="pop-login" style:"display:none;">...some content and a form</div> 
```

我的jQuery代码：

```
$('.toplinks').hover(function(){

    $('#pop-login').toggle();
    $('#pop-login').toggleClass("hpposition");
}); 
```

的CSS：

```
.hpposition{
    position: absolute;
    top: 30px;
    left:500px;
    z-index: 10000;
} 
```

现在，当鼠标移出`toplinks`div 时，出现了问题。我无法在展示表格中填写内容。当鼠标移出 `toplinks`div 时。表格立即消失。如何使用户可以在表单中填写一些内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T16:49:27.013

这应该工作

```
<div class="toplinks">
    <div id="pop-login" style:"display:none;">...some content and a form</div>
</div>
<script>
$('.toplinks').hover(function() {
    $('#pop-login').toggle();
});
</script> 
```

# wordpress - 我可以找出有多少人在使用我的 WP 插件吗？

> ID：11482554
> 
> 赞同：1
> 
> 时间：2012-07-14T09:23:41.033
> 
> 标签：wordpress

我想知道它是否允许，以及跟踪当前有多少用户正在使用和运行您的 WordPress 插件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T16:08:56.817

未经用户许可，实际上是不允许的，最好的办法是检查您的插件统计信息以了解活动版本和下载次数。

> 未经用户知情同意，不得“打电话回家”。这个看似简单的规则实际上涵盖了几个不同的方面：
> 
> *   不得未经授权收集用户数据。例如，未经用户许可，不允许将管理员的电子邮件地址发送回您自己的服务器；但是询问用户一个电子邮件地址并收集他们是否选择提交它是可以的。在这方面采取的所有行动都必须是用户的行为，而不是插件自动完成的。
>     
>     
> *   显示的所有图像和脚本都应该是插件的一部分。这些应该在本地加载。如果插件确实需要从外部站点（例如阻止列表）加载数据，则应在插件的管理屏幕或描述中明确说明。关键是用户必须被告知什么信息被发送到哪里。

来源：[详细的插件指南 - Wordpress.org](http://wordpress.org/extend/plugins/about/guidelines/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T10:58:54.647

为什么不只检查有多少人下载了您的 WP 插件？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T12:34:07.883

您可以对您的服务器进行回调，但许多用户不会喜欢它。

# php - 用php添加必填字段

> ID：11482556
> 
> 赞同：-1
> 
> 时间：2012-07-14T09:23:55.263
> 
> 标签：php

我想使用 php 设计一个动态表单。假设我使用 javascript 创建了一个文本框，如下所示

```
var labels=new Array()
function add(type) {
     var element = document.createElement("input");
     var label=prompt("Enter the name for lable","");
     labels.push(label);
     document.getElementById('raj').innerHTML=document.getElementById('raj').innerHTML+label;

     element.setAttribute("type", type);
     element.setAttribute("name",label);

     var rohit = document.getElementById("raj");
    rohit.appendChild(element);

    document.getElementById('raj').innerHTML=document.getElementById('raj').innerHTML+"<br/>";

} 
```

我想使用 php 将此字段作为必填字段（它是必需的）。我该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T09:31:17.790

在 html5 中，您可以设置一个`required`属性。

```
element.setAttribute("required", "required"); 
```

如果您想使用 PHP，如问题中所述，那将发生在服务器端。您必须验证 php 脚本收到的请求并检查它是否为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T09:28:27.960

目前尚不清楚您想要做什么，但是如果您使用 POST 将其发送到 PHP，那么您可以像这样检查值是否为空

```
<?php 

if(empty($_POST['value_name']))
{
      echo 'value is required';
}
else
{
      // OK 
} 
```

# c# - 正在进行的关于 ASP.NET 的讨论

> ID：11482560
> 
> 赞同：1
> 
> 时间：2012-07-14T09:24:46.593
> 
> 标签：c#, asp.net

我正在尝试做一些类似聊天的事情，但不是聊天。场景如下： 3个人：A、B、C在同一个页面上 A在那个页面上发了东西 B和C看到这个帖子没有刷新（页面部分自行刷新没有回发）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T09:31:45.980

会有某种使用 Javascript 的回调。可以在此处找到完整的示例：[http ://www.geekbeing.com/2012/05/18/implement-live-web-chat-part-1](http://www.geekbeing.com/2012/05/18/implement-live-web-chat-part-1)

# events - 请推荐一些开源的java事件处理库

> ID：11482562
> 
> 赞同：1
> 
> 时间：2012-07-14T09:25:09.993
> 
> 标签：events, orm, event-handling, notifications, soa

我正在寻找可以侦听来自不同应用程序（可能在不同应用服务器上运行）的事件的集中式事件处理实用程序，我正在寻找可以扩展/定制的开源解决方案可能需要。这就是我打算用它做的 -

1.  捕获来自不同应用程序的事件
2.  检查过滤条件
3.  基于过滤条件调用webservice更新数据库或使用hibernate或其他ORM更新数据库

如果你能推荐一些我可以研究的库，那将会很有帮助，

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T18:34:01.140

您可以使用[Esper](http://esper.codehaus.org/about/esper/esper.html)，它是一个可嵌入的开源复杂事件处理库

# android - 创建具有服务功能的应用程序

> ID：11482563
> 
> 赞同：0
> 
> 时间：2012-07-14T09:25:18.353
> 
> 标签：android, android-service

`Service`我在 Android SDK中阅读了这两个文档

[http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html) http://developer.android.com/guide/components/services.html

我想让你解释一下应该如何实现以下架构。

我需要每 X 分钟检查一次`$something`、更新数据库并最终在状态栏上通知更新的服务。

然后我需要一个活动，我必须从同一个数据库中读取以显示更完整的信息集。

该服务基本上必须根据延迟时间运行，即使未使用 Activity 也是如此。

是否可以在单个 apk 中拥有这种“架构”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T10:52:21.917

> 我需要每 X 分钟检查一次 $something、更新数据库并最终在状态栏上通知更新的服务。

使用`AlarmManager`和一个`IntentService`. 如果即使设备处于睡眠状态，您也需要每 X 分钟发生一次逻辑，您将需要使用类似 my [`WakefulIntentService`](https://github.com/commonsguy/cwac-wakeful).

> 是否可以在单个 apk 中拥有这种“架构”？

绝对地。

# ruby-on-rails - 让 Rails 从其他本地 URL 返回响应

> ID：11482565
> 
> 赞同：0
> 
> 时间：2012-07-14T09:25:32.360
> 
> 标签：ruby-on-rails, ruby, routing

我想要一个`/plan`方法来返回一个json对象，该对象本身由另一个本地（但属于java中的另一个Web应用程序）URL返回（`/plan2`为了这个问题，我们称之为）。

我想要的不是重定向，而是真正**返回**由`/plan`返回的数据，我在其中附加了一堆其他键。由于请求是本地的，因此使用会过分吗？考虑到我还想发送一个 HTTP Accept 标头，我有什么选择。**`/plan2``Net::HTTP`**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T13:42:10.247

在这里在黑暗中拍摄，但我假设它`/plan`属于公共 Rails 应用程序，并且是来自 Rails 应用程序可访问但不公开可用的同一服务器上的**另一个 Web 应用程序**（甚至可能不是 Rails）`/plan2`的 URL 。如果是这种情况，那么是的，您可以获得响应，但我建议[您使用 OpenURI](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open-uri/rdoc/OpenURI.html)或[Mechanize](https://github.com/tenderlove/mechanize/)而不是. 如果你把它放在JSON 格式块中，那么标题也应该没问题。**`Net::HTTP``respond_to``Accept`**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T12:08:09.380

我建议封装 /plan2 使用的任何功能，并简单地在 /plan1 中重新使用它

但如果你只是想让它工作......

```
class PlanController < ApplicationController
  def plan1
    plan2(extra_parameter_1: true, extra_parameter_2: 'hello')
  end

  def plan2(extra = {})
    params.merge!(extra)

    # Whatever your code was before...
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T10:06:34.030

你是说重用另一个控制器方法的功能吗？

在rails中没有这样做的标准方法。您可以将通用功能放入模块中并以这种方式包含它，或者如果该功能位于另一个控制器中，则使用继承。如果它是同一个控制器类，你可以调用该方法。

如果它是一个“私人”网址，你将如何通过 http 调用它？！****

# php - 在 PHP 中使用 SimpleXML

> ID：11482572
> 
> 赞同：0
> 
> 时间：2012-07-14T09:26:45.980
> 
> 标签：php, simplexml

我正在使用 SimpleXML 加载远程 XML

我的 PHP 代码如下所示

```
$xml = simplexml_load_file('http://www.abc.om/xml.php');

foreach( $xml as $Product )
    {
        echo 'ProductCode: '.$Product->ProductCode.'<br />';
        echo 'ProductName: '.$Product->ProductName.'<br />';

    } 
```

我的 XML 如下所示

```
<All_Products>
<Product>
<ProductCode>9978H</ProductCode>
<ProductName>abc with Buckle in aBlack</ProductName>
<StockStatus>2</StockStatus>
</Product>
</All_Products> 
```

产品标签重复，因为产品很多

**在阅读了那个 XMLfeed 之后，XML 提要应该在 `<StockStatus>`标签之前显示一些修正，它应该添加一个标签**

```
<ProductURL><ProductURL> 
```

并且该标签应显示为

```
<ProductURL>http://abc.com/abc with Buckle in aBlack-p/9978H.htm<ProductURL> 
```

这意味着每个 ProductURL 都应附加为

```
<ProductURL>http://abc.com/<ProductName>-p/<ProductCode>.htm<ProductURL> 
```

要显示的最终 XML 将如下所示

```
<All_Products>
<Product>
<ProductCode>9978H</ProductCode>
<ProductName>abc with Buckle in aBlack</ProductName>
<ProductURL>http://abc.com/abc with Buckle in aBlack-p/9978H.htm<ProductURL>
<StockStatus>2</StockStatus>
</Product>
</All_Products> 
```

所以我的问题是

1）我是否必须在 foreach( $xml as $Product ) 循环中读取 Product 标签的所有元素，然后附加 ProductURL 元素，或者是否有任何快捷方式可以做到这一点

2）一旦这个数据准备好了，我如何再次以 XML 格式显示数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T09:42:21.757

您可以将[DOM](http://au.php.net/dom)与 SimpleXML 一起使用。

这是你应该做的：

1.  使用[xpath()](http://www.php.net/manual/en/simplexmlelement.xpath.php)运行挑选所有`Product`标签的 xpath 查询。`SimpleXMLElement`这应该返回一个代表每个`Product`标签的 s 数组。

2.  再次使用 xpath() 从每个`Product`标签中选择`ProductCode`and`ProductName`并获取它们的内容。创建您的网址并将其保存到变量中。

3.  使用 xpath() 选择`StockStatus`标签。

4.  使用 DOM 的[dom_import_simplexml()](http://au.php.net/manual/en/function.dom-import-simplexml.php)，将`SimpleXMLElement` `StockStatus`标签转换为`DOMElement`.

5.  `ProductURL`使用 DOM 的[createElement()](http://au.php.net/manual/en/domdocument.createelement.php)创建元素并插入我们之前创建的 url。

6.  `StockStatus`在使用 DOM 的[insertBefore()](http://au.php.net/manual/en/domnode.insertbefore.php)之前插入它。

这个[问题](https://stackoverflow.com/questions/3361036/php-simplexml-insert-node-at-certain-position)应该向您展示如何转换为 a`DOMElement`并最终进行插入。

# xaml - 组合框 SelectedValue 不显示

> ID：11482573
> 
> 赞同：9
> 
> 时间：2012-07-14T09:27:01.787
> 
> 标签：xaml, mvvm, windows-8, viewmodel, windows-runtime

我的 WinRT/C# XAML Metro 应用程序使用 Windows 8 Release Preview（安装了最新补丁）时遇到了一个奇怪的问题。我正在使用`ComboBox`，其值`ItemsSource`和`SelectedValue`绑定到 ViewModel 中的属性：

```
<ComboBox SelectedValue="{Binding MySelectedValue, Mode=TwoWay}"
          ItemsSource="{Binding MyItemsSource, Mode=OneWay}"
          Width="200" Height="30" /> 
```

后面的代码：

```
public MainPage()
{
    this.InitializeComponent();

    DataContext = new TestViewModel();
} 
```

和一个非常简单的定义`TestViewModel`，使用字符串：

```
public class TestViewModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private IEnumerable<string> _myItemsSource = new List<string>
        {
            "Test Item 1",
            "Test Item 2",
            "Test Item 3"
        };
    public IEnumerable<string> MyItemsSource
    {
        get { return _myItemsSource; }
    }

    private string _mySelectedValue = "Test Item 2";
    public string MySelectedValue
    {
        get { return _mySelectedValue; }
        set
        {
            _mySelectedValue = value;
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs("MySelectedValue"));
            }
        }
    }
} 
```

现在我认为这个简单的解决方案应该可以工作......但是当我启动应用程序时，`SelectedValue="Test Item 2"`没有出现，`ComboBox`是空的。通过设置断点，我注意到绑定值`MyItemsSource`和`MySelectedValue`在设置视图时从视图模型中正确检索`DataContext`。在此操作之后，该`ComboBox.SelectedValue`属性实际上设置为`"Test Item 2"`，但它只是不显示！我还注意到，当我通过 UI 上的用户操作更改 ComboBox 中的选定值时，更改的值会显示在 ComboBox 中，并且 View Model 属性也会相应更新。`MySelectedValue`因此，除了View Model 属性的初始可视化之外，一切似乎都运行良好。我真的越来越绝望了……

现在虽然这是最简单的例子，但在原点我想将整个实体绑定到 ComboBox，设置`DisplayMemberPath`和`SelectedValuePath`. 不幸的是，同样的问题发生了。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-14T12:29:19.873

我在示例中发现了问题：在 XAML 标记中，我在`SelectedValue`属性**之前**定义了`ItemsSource`属性。如果我以这种方式交换两个定义，它会起作用：

```
<ComboBox ItemsSource="{Binding MyItemsSource, Mode=OneWay}"
      SelectedValue="{Binding MySelectedValue, Mode=TwoWay}"
      Width="200" Height="30" /> 
```

这真的很奇怪也很烦人。现在我想知道：这是一个错误还是设计使然？我认为这是一个错误，因为无论 XAML 中定义的属性的顺序如何，控件都应该正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T09:45:23.580

这是有效的解决方案：您可以在这里找到[https://skydrive.live.com/?cid=b55690d11b67401d&resid=B55690D11B67401D!209&id=B55690D11B67401D!209](https://skydrive.live.com/?cid=b55690d11b67401d&resid=B55690D11B67401D!209&id=B55690D11B67401D!209)

```
<ComboBox Width="300" Height="32" HorizontalAlignment="Left" DisplayMemberPath="Name"
                  VerticalAlignment="Top" ItemsSource="{Binding PersonCollection}" 
                  SelectedItem="{Binding SelectedPerson, Mode=TwoWay}"></ComboBox> 
```

ViewModle 类是

```
public class ViewModel:BaseViewModel
    {
        private Person selectedPerson;
        public Person SelectedPerson {
            get { return this.selectedPerson; }
            set { this.selectedPerson = value;
            this.RaisePropertyChanged("SelectedPerson");
            }
        }
        public ObservableCollection<Person> PersonCollection { get; set; }

        public ViewModel()
        {
            this.PersonCollection = new ObservableCollection<Person>();
            this.PopulateCollection();

            //setting first item as default one
            this.SelectedPerson = this.PersonCollection.FirstOrDefault();
        }

        private void PopulateCollection()
        {
            this.PersonCollection.Add(new Person { Name="Oscar", Email="oscar@sl.net" });
            this.PersonCollection.Add(new Person { Name = "Jay", Email = "jay@sl.net" });
            this.PersonCollection.Add(new Person { Name = "Viral", Email = "viral@sl.net" });
        }
    } 
```

# jquery - 在 grunt.js 中，在 uglify "jquery" 和 "blockui" 期间出现错误 "Unexpected Character `?`"

> ID：11482577
> 
> 赞同：2
> 
> 时间：2012-07-14T09:27:12.940
> 
> 标签：jquery, blockui, uglifyjs, gruntjs

如果我在 grunt 中“最小化”jquery 和 blockui 文件（带有 uglify.js），我会收到以下错误

```
Unexcpected Character "?" 
```

我该如何解决这个问题？这是一个已知问题吗？

提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T15:51:34.597

啊哈！[我是根据以前的一些经验](https://stackoverflow.com/questions/9146708/less-css-variable-name-error-is-undefined-even-though-variables-less-impo/10639157#10639157)想出来的。

我的一个或多个文件以带有 BOM 的 UTF-8 编码，请尝试在不带 BOM 的情况下以 ANSI 或 UTF-8 重新保存您的文件。

如果您的编辑器没有明显的方法来更改编码，请尝试使用[Notepad++](http://notepad-plus-plus.org/)。

# events - 无法在 gtkmm 中捕获 signal_motion_notify_event

> ID：11482578
> 
> 赞同：0
> 
> 时间：2012-07-14T09:27:22.250
> 
> 标签：events, gtk, gtkmm, notify, motion

我使用以下代码在 Gtk::TreeView 上捕获运动通知事件。

```
// This is the Gtk::Builder from which i read my tree view.
builder_ptr->get_widget("treeview", m_treeview_ptr);

// Connecting that event.
m_treeview_ptr->add_events(Gdk::POINTER_MOTION_MASK |
                           Gdk::POINTER_MOTION_HINT_MASK);
m_treeview_ptr->signal_motion_notify_event().connect(
    sigc::mem_fun(this, &LayoutEditorDialog::_on_motion_notify)); 
```

我的插槽函数如下所示：

```
bool LayoutEditorDialog::_on_motion_notify(GdkEventMotion* event) const
{
    // Just a test.
    std::cout << event->x << " " << event->y << std::endl;
} 
```

Somhow 不会从树视图发送任何运动通知事件。有人可以在这里帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T20:06:10.547

我只需要使用 connect_notify 而不是 notify，因为我的信号来自一个事件。

# c++ - unique_ptr 线程安全吗？

> ID：11482580
> 
> 赞同：38
> 
> 时间：2012-07-14T09:28:13.267
> 
> 标签：c++, multithreading, c++11, thread-safety, unique-ptr

unique_ptr 线程安全吗？下面的代码不可能两次打印相同的数字吗？

```
#include <memory>
#include <string>
#include <thread>
#include <cstdio>

using namespace std;

int main()
{
    unique_ptr<int> work;

    thread t1([&] {
        while (true) {
            const unique_ptr<int> localWork = move(work);
            if (localWork)
                printf("thread1: %d\n", *localWork);
            this_thread::yield();
        }
    });

    thread t2([&] {
        while (true) {
            const unique_ptr<int> localWork = move(work);
            if (localWork)
                printf("thread2: %d\n", *localWork);
            this_thread::yield();
        }
    });

    for (int i = 0; ; i++) {
        work.reset(new int(i));

        while (work)
            this_thread::yield();
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-14T17:30:40.923

正确使用时 unique_ptr 是线程安全的。你打破了不成文的规则：你永远不能通过引用在线程之间传递 unique_ptr。

unique_ptr 背后的理念是它始终只有一个（唯一的）所有者。因此，您始终可以在线程之间安全地传递它而无需同步——但您必须按值传递它，而不是按引用传递。一旦您为 unique_ptr 创建别名，您将失去唯一性属性，并且所有赌注都已取消。不幸的是，C++ 不能保证唯一性，因此您必须遵守一个必须严格遵守的约定。不要为 unique_ptr 创建别名！

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-07-14T09:37:20.127

不，它不是线程安全的。

两个线程都可能`move`在没有显式同步的情况下获得工作指针，因此两个线程都有可能获得相同的值，或者两者都获得一些无效的指针……这是未定义的行为。

如果你想*正确地*做这样的事情，你可能需要使用类似的东西，`std::atomic_exchange`这样两个线程都可以读取/修改具有正确语义的共享工作指针。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-14T09:34:37.947

根据[Msdn](http://msdn.microsoft.com/ru-ru/library/c9ceah3b.aspx)：

> 以下线程安全规则适用于标准 C++ 库中的所有类（shared_ptr 和 iostream 类除外，如下所述）。
> 
> 单个对象是线程安全的，可以从多个线程中读取。例如，给定一个对象 A，从线程 1 和线程 2 同时读取 A 是安全的。
> 
> 如果一个线程正在写入单个对象，则必须保护同一线程或其他线程上对该对象的所有读取和写入。例如，给定一个对象 A，如果线程 1 正在写入 A，那么必须阻止线程 2 读取或写入 A。
> 
> 即使另一个线程正在读取或写入同一类型的不同实例，读取和写入一个类型的实例也是安全的。例如，给定相同类型的对象 A 和 B，如果在线程 1 中写入 A 而在线程 2 中读取 B 是安全的。

# css - 为什么无法更改 css 中的内容？

> ID：11482591
> 
> 赞同：4
> 
> 时间：2012-07-14T09:29:27.410
> 
> 标签：css, w3c

CSS2.1 伪选择器`::after`和`::before`允许向页面添加文本内容。例如 ：

**CSS**

```
 p:after { content:' Batman!' } 
```

**HTML**

```
<p>Na Na Na Na Na Na</p> 
```

**在浏览器中输出**

```
Na Na Na Na Na Na Batman! 
```

* * *

我的问题，使用相同的 HTML 源代码，是为什么这段**CSS**

```
 p { content:'My hero is' }
 p:after { content:' Batman!' } 
```

**不输出这个**

```
My hero is Batman! 
```

**而是输出这个？**

```
Na Na Na Na Na Na Batman! 
```

* * *

关于内容属性的 w3c 规范：http: [//www.w3.org/TR/CSS21/generate.html#propdef-content](http://www.w3.org/TR/CSS21/generate.html#propdef-content)

* * *

**答案**- 我正在查看 CSS2.1 规范。[CSS3 规范表明](http://www.w3.org/TR/css3-content/#inserting3)即使没有伪选择器`::after`也是可能的。`::before`但并不是每个浏览器都实现了它。

*   **铬 20.0.1132.57**：否
*   **Opera 12.00 r1467**：是的
*   **Safari 5.1.7 (7534.57.2)**：否
*   **IE 8.0.7601**：否（甚至没有实现 CSS2 内容属性）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T09:33:50.037

正如规范所指定的，`content:`只能与 *pseudo-elements `:before`and一起使用`:after`，恐怕没有比这更好的答案了。

> ### [12.2 “内容”属性](http://www.w3.org/TR/CSS21/generate.html#propdef-content)
> 
> > 此属性与`:before`和`:after` *伪元素*一起用于在文档中生成内容。

* * *

然而，如果这个问题应该被解释为*为什么不允许我们在任何我们喜欢使用 CSS 的地方添加内容呢？*答案只是理论上的，但很简单：

> CSS 并不是一种提供新内容的方式，它是一种格式化现有内容的方式。

> *“你不应该使用 CSS 更改任何内容，除此之外没有那么多。`:before`和`:after` *伪元素*已经被经常讨论，因为它们打破了格式和内容之间的障碍。”* - 参考

* * *

`:before`/`:after`是一个很好的资源，因为它们允许您以一种在它们出现之前不可能的方式来**格式化您的数据。**请注意，我使用“格式”这个词，因为我仍然认为它是一个*格式化程序*，而不是一个数据*生成器*。

想出一个在格式和内容之间仍然有明确界限的可用替代方案将非常困难（并且令人沮丧），因此（至少在我看来）这是我可以接受的一种可接受的中间方式。

[我必须承认，当它们第一次出现时，我并不是这些*伪元素*的忠实粉丝。]

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-14T09:55:42.370

引用的 CSS 2.1 规范说：“适用于：:before 和 :after 伪元素”。[在CSS3 Generated and Replaced Content Module](http://www.w3.org/TR/css3-content/)的草案中已经放宽了这一限制，该草案是旧的（2003 年）并且已经过时但仍部分实施。Opera 似乎支持`content`普通元素，但使用 URL 值（用于插入图像）除外，而 Chrome 和 Safari*仅对*URL 值支持。所以你的代码实际上可以在 Safari 上运行。

除非模块的规范工作取得一些进展，否则不太可能获得更广泛的支持。在 W3C [CSS 模块状态页面上](http://www.w3.org/Style/CSS/current-work.en.html)，该模块位于“重写”部分，并带有“严重过时”的注释。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T09:49:43.460

实际上，可以`content`直接在元素上使用属性，而不仅仅是在伪元素上。尝试

```
 p { content:'My hero is' } 
```

在 Opera 中，你会看到你想要的结果。问题是其他浏览器还不支持它。

[在CSS3 Generated and Replaced Content Module](http://www.w3.org/TR/css3-content/)中可以找到很多关于生成内容 cat 的其他有趣的东西，但是我们必须等待浏览器供应商实现它。

# sql - PowerBuilder：如果不可用，检查记录并插入 SQL 表

> ID：11482597
> 
> 赞同：0
> 
> 时间：2012-07-14T09:30:26.850
> 
> 标签：sql, sql-server-2008, validation, powerbuilder

我对 PowerBuilder Classic 12 相当陌生。我需要检查记录是否可用，如果没有则从文本框中插入。我可能需要一个 DataStore，因为有人建议使用 SQL 语句。谢谢。这段代码的行为很有趣，请问问题出在哪里？有一次它可以工作，但再次运行程序它会接受已经插入的数据。该程序没有给出任何错误，但我可以看到存储在表中的相同数据。

```
string id, idno
 idno=trim(sle_idno.text)
 if idno="" then
    messagebox("EMPTY","Enter a record")
        return
end if
   SELECT employee.idnumber
    INTO :id  
    FROM employee  ; 
     if idno=id then
        messagebox("AVAILABLE","Record available")
        return
    end if
  INSERT INTO employee 
         ( idnumber )  
  VALUES ( :idno )  ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T02:54:28.667

**修复现有代码**

您缺少 WHERE 子句；这是试图将所有 idnumber 值填充到 id 中。这就是您现有代码失败的原因。

查看 PB 附带的帮助文件。（附带的 PDF 手册也很好，但帮助文件就在 IDE 的菜单上。）那里有很多关于如何编写嵌入式 SQL 语句的示例。您应该检查事务对象的错误属性（在这种情况下它是隐式 SQLCA）以确定事务是否成功执行，是否返回任何行等......

**一种新方法**

有几种方法可以使用 DataStore 来解决这个问题。最简单的方法是针对employee 表创建一个DataWindow 对象，该对象接受一个参数并在WHERE 子句的SQL 语句中使用它。在您的脚本中，使用此对象设置 DataStore 并使用 idnumber 作为参数对其进行 Retrieve()，检查 Retrieve() 的返回值（返回的行数，如果为正或为零，如果为负，则返回错误）以及是否为零，InsertRow() 在您的 DataStore 上，在其上执行您的 SetItem()（您需要加载的不仅仅是 idnumber，对吗？），然后对其执行 Update()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T10:41:29.107

您正在寻找**[合并](http://msdn.microsoft.com/en-us/library/bb522522%28v=sql.105%29.aspx)**。

我将用一个例子来解释它。只需通过存储过程发送数据库中的值？并使用以下技术。

## 示例 DDL

```
CREATE TABLE Employee
(
   EmployeeID INTEGER PRIMARY KEY,
   EmployeeName VARCHAR(15)
)

CREATE TABLE EmployeeSalary
(
    EmployeeID INTEGER ,
    EmployeeSalary INTEGER
) 
```

* * *

## 员工 DML 示例

```
INSERT INTO Employee
VALUES(1,'SMITH')
INSERT INTO Employee
VALUES(2,'ALLEN')
INSERT INTO Employee
VALUES(3,'JONES')
INSERT INTO Employee
VALUES(4,'MARTIN')
INSERT INTO Employee
VALUES(5,'JAMES')
Sample DML For EmployeeDetails

INSERT INTO EmployeeSalary
VALUES(1,23000)
INSERT INTO EmployeeSalary
VALUES(2,25500)
INSERT INTO EmployeeSalary
VALUES(3,20000) 
```

* * *

## 合并查询

```
MERGE EmployeeSalary AS stm
USING (SELECT EmployeeID,EmployeeName FROM Employee) AS sd
ON stm.EmployeeID = sd.EmployeeID
WHEN MATCHED THEN UPDATE SET stm.EmployeeSalary = stm.EmployeeSalary + 12
WHEN NOT MATCHED THEN
INSERT(EmployeeID,EmployeeSalary)
VALUES(sd.EmployeeID,25000); 
```

* * *

## 参考

**[第一参考](http://msdn.microsoft.com/en-us/library/bb522522%28v=sql.105%29.aspx)**

**[第二参考](http://blog.sqlauthority.com/2008/08/28/sql-server-2008-introduction-to-merge-statement-one-statement-for-insert-update-delete/)**

**[第三参考](http://www.codeproject.com/Articles/37172/Merge-Statement-in-SQL-Server-2008)**

**[第四参考](http://weblogs.sqlteam.com/peterl/archive/2007/09/20/Example-of-MERGE-in-SQL-Server-2008.aspx)**

# python - 如何在python中的html页面上运行xpath？

> ID：11482600
> 
> 赞同：0
> 
> 时间：2012-07-14T09:30:53.637
> 
> 标签：python, xpath, lxml

我认为在 python 中使用 lxml 库可以提供帮助，但无法找出如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T09:37:08.333

一个简单的起点...

```
import lxml.html
page = lxml.html.parse('http://www.google.com').getroot()
print page.xpath('//a/@href') 
```

# tcp - 强制删除 WebSocket 连接的最简单方法是什么？

> ID：11482609
> 
> 赞同：3
> 
> 时间：2012-07-14T09:31:50.287
> 
> 标签：tcp, websocket

面对不可靠的客户端连接，我正在尝试测试我的 WebSocket 服务器。

我希望能够在我选择的任何时候在客户端强制删除单个 WebSocket 连接，而无需发送关闭帧或 TCP FIN 握手。浏览器本身不能这样做（对吗？），因为它会在关闭选项卡时优雅地关闭每个 WebSocket。来自同一主机的其他 WebSocket 连接（我在其他浏览器窗口中）不应该受到影响。

我的系统是 Ubuntu Linux 12.04；我的浏览器是 Chrome（但我可以切换到任何与 WebSocket 兼容的浏览器来测试它）。

服务器使用 Ruby 和 em-websocket。

我考虑过的选项：

*   `killall -9 $pid_of_tab`但这有点粗鲁，内核显然仍然关闭了TCP连接
*   `iptables`防火墙规则，但这需要 root，并且很难仅删除一个连接（来自本地主机）同时保持其他连接
*   从另一台机器连接，然后拔下网线或禁用 wifi

最后两个会起作用，但感觉必须有一个更简单的方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T16:32:23.057

我怀疑您可以使用[Fiddler](http://www.fiddler2.com/fiddler2/)或[WebScarab轻松完成此操作](https://www.owasp.org/index.php/Category%3aOWASP_WebScarab_Project)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T12:32:08.043

这是`iptables`版本（假设套接字在 localhost，端口 3000 上提供）：

添加丢弃所有流量的规则：

```
$ sudo iptables -A INPUT -i lo -p tcp --dport 3000 -j DROP 
```

要再次删除该规则：

```
$ sudo iptables -D INPUT -i lo -p tcp --dport 3000 -j DROP 
```

# java - 控制要在运行时抓取的 URL 列表

> ID：11482612
> 
> 赞同：0
> 
> 时间：2012-07-14T09:32:02.500
> 
> 标签：java, web-crawler, crawler4j

在 crawler4j 中，我们可以重写一个函数`boolean shouldVisit(WebUrl url)`并通过返回“true”和“false”来控制是否应该允许抓取特定的 url。

但是我们可以在运行时添加 URL 吗？如果是，有什么方法可以做到这一点？目前我可以在程序开头使用`addSeed(String url)`函数`start(BasicCrawler.class, numberOfCrawlers)`在`CrawlController`类之前添加 URL，如果我尝试使用添加新 url `addSeed(String url)`，它会给出错误。[这](http://imgur.com/bxvKx)是错误图像。

任何帮助将不胜感激，如果需要有关项目的更多详细信息来回答问题，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:39:00.863

你可以这样做。

用于`public void schedule(WebURL url)`将 URL 添加到作为`Frontier.java`类成员的爬虫边界。但为此，您需要拥有 type 的 url `WebURL`。如果你想用`WebURL`你的字符串做一个。请查看类中的`addSeed()`（以下代码），`CrawlController.java`了解它如何将字符串（url）转换为 WebURL。

也使用现有的边界实例。

希望这可以帮助..

```
public void addSeed(String pageUrl, int docId) {
        String canonicalUrl = URLCanonicalizer.getCanonicalURL(pageUrl);
        if (canonicalUrl == null) {
            logger.error("Invalid seed URL: " + pageUrl);
            return;
        }
        if (docId < 0) {
            docId = docIdServer.getDocId(canonicalUrl);
            if (docId > 0) {
                // This URL is already seen.
                return;
            }
            docId = docIdServer.getNewDocID(canonicalUrl);
        } else {
            try {
                docIdServer.addUrlAndDocId(canonicalUrl, docId);
            } catch (Exception e) {
                logger.error("Could not add seed: " + e.getMessage());
            }
        }

        WebURL webUrl = new WebURL();
        webUrl.setURL(canonicalUrl);
        webUrl.setDocid(docId);
        webUrl.setDepth((short) 0);
        if (!robotstxtServer.allows(webUrl)) {
            logger.info("Robots.txt does not allow this seed: " + pageUrl);
        } else {
            frontier.schedule(webUrl); //method that adds URL to the frontier at run time
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T09:37:29.147

大概您可以随心所欲地实现此功能，并使其依赖于不应被抓取的 URL 列表。的实现`shouldVisit`将涉及询问给定的 URL 是否在您的禁止 URL（或允许的 URL）列表中，并在此基础上返回 true 或 false。

# c# - c#数组帮助排序

> ID：11482614
> 
> 赞同：0
> 
> 时间：2012-07-14T09:32:21.470
> 
> 标签：c#, arrays, c#-4.0, c#-3.0

首先很抱歉我的英语错误不是我的主要语言
我有问题，我有一个像下面这样的数组

```
string[] arr1 = new string[] { 
            "Pakistan:4,India:3,USA:2,Iran:1,UK:0",
            "Pakistan:4,India:3,USA:2,Iran:1,UK:0", 
            "India:4,USA:3,Iran:2,UK:1,Pakistan:0" 
        }; 
```

现在我只想知道巴基斯坦有多少次带1，
有多少次带2、3、4，我需要知道所有印度、美国、伊朗、英国的情况

提前谢谢你们，你们是我最后的希望。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T09:42:14.980

我将使用 String.Split(char[]) 方法和 String.SubString(int, int) 方法检查数组中的每个“国家”并获取每个国家/地区的数字后缀。

尝试以下操作：

*（以下代码现已编译和测试。）*

使用简单的数据结构来简化保存操作结果的任务。

```
public struct Result {

    string Country { get; set; }
    int Number { get; set; }
    int Occurrences { get; set; }
}

// define what countries you are dealing with
string[] countries = new string[] { "Pakistan", "India", "USA", "Iran", "UK", } 
```

提供整体结果的方法：

```
public static Result[] IterateOverAllCountries () {

    // range of numbers forming the postfix of your country strings
    int numbersToLookFor = 4;        

    // provide an array that stores all the local results
    // numbersToLookFor + 1 to respect that numbers are starting with 0
    Result[] result = new Result[countries.Length * (numbersToLookFor + 1)];

    string currentCountry;

    int c = 0;

    // iterate over all countries
    for (int i = 0; i < countries.Length; i++) {

        currentCountry = countries[i];

        int j = 0;

        // do that for every number beginning with 0
        // (according to your question)

        int localResult;          

        while (j <= numbersToLookFor) {

            localResult = FindCountryPosition(currentCountry, j);

            // add another result to the array of all results
            result[c] = new Result() { Country = currentCountry, Number = j, Occurrences = localResult };

            j++;
            c++;
        }
    }

    return result;
} 
```

提供本地结果的方法：

```
// iterate over the whole array and search the
    // occurrences of one particular country with one postfix number
    public static int FindCountryPosition (string country, int number) { 

        int result = 0;
        string[] subArray;

        for (int i = 0; i < arr1.Length; i++) {

            subArray = arr1[i].Split(',');

            string current;

            for (int j = 0; j < subArray.Length; j++) {

                current = subArray[j];
                if (
                    current.Equals(country + ":" + number) &&
                    current.Substring(current.Length - 1, 1).Equals(number + "")
                 ) 
                    result++;
            }
        }

        return result;
    } 
```

以下应该使您能够运行算法

```
 // define what countries you are dealing with
    static string[] countries = new string[] { "Pakistan", "India", "USA", "Iran", "UK", };

    static string[] arr1 = new string[] { 
        "Pakistan:4,India:3,USA:2,Iran:1,UK:0",
        "Pakistan:4,India:3,USA:2,Iran:1,UK:0", 
        "India:4,USA:3,Iran:2,UK:1,Pakistan:0" 
    };

    static void Main (string[] args) {

        Result[] r = IterateOverAllCountries();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T10:47:25.570

此 linq 会将数组转换为 Dictionary>，其中外部字典包含国家名称，内部字典将包含出现次数（':' 之后的数字）和每次出现的计数。

```
string[] arr1 = new string[]
                            {
                                "Pakistan:4,India:3,USA:2,Iran:1,UK:0",
                                "Pakistan:4,India:3,USA:2,Iran:1,UK:0",
                                "India:4,USA:3,Iran:2,UK:1,Pakistan:0"
                            };

var count = arr1
    .SelectMany(s => s.Split(new[] { ',' }, StringSplitOptions.RemoveEmptyEntries))
    .GroupBy(s => s.Split(':')[0], s => s.Split(':')[1])
    .ToDictionary(g => g.Key,
         g =>
         {
              var items = g.Distinct();
              var result = new Dictionary<String, int>();
              foreach (var item in items)
                  result[item] = g.Count(gitem => gitem == item);
              return result;
         });

// print the result
foreach(var country in count.Keys)
{
     foreach(var ocurrence in count[country].Keys)
     {
          Console.WriteLine("{0} : {1} = {2}", country, ocurrence, count[country][ocurrence]);
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T09:40:32.087

您使用的数据结构不够丰富，无法为您提供该信息。因此，您需要解析您的字符串并创建一个新的数据结构以便能够提供 ( `sring[][]`)：

```
 string[] arr1 = new string[] { 
        "Pakistan,India,USA,Iran,UK",
        "Pakistan,India,USA,Iran,UK", 
        "India,USA,Iran,UK,Pakistan" 
            };

        string[][] richerArray = arr1.Select(x=> x.Split('\'')).ToArray();
        var countPakistanIsFirst = richerArray.Select(x=>x[0] == "Pakistan").Count(); 
```

# 更新

你似乎改变了你的问题。答案适用于原始问题。

# c# - WCF 上的 X.509 证书？

> ID：11482624
> 
> 赞同：11
> 
> 时间：2012-07-14T09:34:13.577
> 
> 标签：c#, wcf, web-services

问题 ：

我正在一台机器上开发这个程序。

该服务在开发服务器中运行良好，但是当我尝试在 IIS 中托管该服务时，它给了我一个错误：

> 无法使用以下搜索条件找到 X.509 证书：StoreName 'My'、StoreLocation 'CurrentUser'、FindType 'FindBySubjectName'、FindValue 'WCFServer'。

那么无论如何我可以解决这个问题吗？我正在尝试这段代码

[http://www.codeproject.com/KB/WCF/9StepsWCF.aspx](http://www.codeproject.com/KB/WCF/9StepsWCF.aspx)

证书创建

```
makecert.exe -sr CurrentUser -ss My -a sha1 -n CN=WCfServer -sky exchange -pe
makecert.exe -sr CurrentUser -ss My -a sha1 -n CN=WcfClient -sky exchange -pe 
```

证书存在于 MMC 的“个人和受信任的人”文件夹中

服务有一个函数，它接受一个数字并返回字符串并且工作正常

这是我的服务 web.config：

```
<system.serviceModel>
    <bindings>
      <wsHttpBinding>
        <binding name="wsHttpEndpointBinding">
          <security>
            <message clientCredentialType="Certificate" />
          </security>
        </binding>
      </wsHttpBinding>
    </bindings>
    <services>
      <service name="WCFServiceCertificate.Service1" behaviorConfiguration="WCFServiceCertificate.Service1Behavior">
        <!-- Service Endpoints -->
        <endpoint address="" binding="wsHttpBinding" bindingConfiguration="wsHttpEndpointBinding" contract="WCFServiceCertificate.IService1">
          <!--
              Upon deployment, the following identity element should be removed or replaced to reflect the
              identity under which the deployed service runs.  If removed, WCF will infer an appropriate identity
              automatically.
          -->
          <!--<identity>
            <dns value="localhost"/>
          </identity>-->
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="WCFServiceCertificate.Service1Behavior">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
          <serviceCredentials>
            <clientCertificate>
              <authentication certificateValidationMode="PeerTrust"/>
            </clientCertificate>
            <serviceCertificate findValue="WcfServer"
                                storeLocation="CurrentUser"
                                storeName="My"
                                x509FindType="FindBySubjectName" />
          </serviceCredentials>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel> 
```

这是我的客户端配置

```
<system.serviceModel>
                <bindings>
   <wsHttpBinding>
    <binding name="WSHttpBinding_IService1" closeTimeout="00:01:00"
     openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
     bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
     maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text"
     textEncoding="utf-8" useDefaultWebProxy="true" allowCookies="false">
     <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
      maxBytesPerRead="4096" maxNameTableCharCount="16384" />
     <reliableSession ordered="true" inactivityTimeout="00:10:00"
      enabled="false" />
     <security mode="Message">
      <transport clientCredentialType="Windows" proxyCredentialType="None"
       realm="" />
      <message clientCredentialType="Certificate" negotiateServiceCredential="true"
       algorithmSuite="Default" establishSecurityContext="true" />
     </security>
    </binding>
   </wsHttpBinding>
  </bindings>
                <client>
   <endpoint address="http://localhost:1387/Service1.svc" behaviorConfiguration="CustomBehavior"
    binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IService1"
    contract="ServiceReference1.IService1" name="WSHttpBinding_IService1">
    <identity>
     <certificate encodedValue="AwAAAAEAAAAUAAAA9YoGKvsMLFkeO1WjaCLReQuz1ysgAAAAAQAAALUBAAAwggGxMIIBX6ADAgECAhDDvb3bnmzhsERpNTWEBYQXMAkGBSsOAwIdBQAwFjEUMBIGA1UEAxMLUm9vdCBBZ2VuY3kwHhcNMTEwMzA0MDcwNzU3WhcNMzkxMjMxMjM1OTU5WjAUMRIwEAYDVQQDEwlXY2ZTZXJ2ZXIwgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAM9e4DwCDYJ4l6myt1QadHzXoqCH2wa1aUjiab1aK/7d/1LZ00KfPJw8kKB358serjEi9SMg0UeyGtl0+byJ8PqShfv4MUTHZcPaWy99vHaYHwH7T9hVwY5RANBWyFy6nf1rXDh/cB2qm0Q/xN5xElOtheFqUoL8Ua6fcP33BAWPAgMBAAGjSzBJMEcGA1UdAQRAMD6AEBLkCS0GHR1PAI1hIdwWZGOhGDAWMRQwEgYDVQQDEwtSb290IEFnZW5jeYIQBjdsAKoAZIoRz7jUqlw19DAJBgUrDgMCHQUAA0EAKlaHJQNdC9VgPuHlVuniQJd+fHoVOU62nl374iXYdQus5KDgKz9RHWAtjhpToBB4sOXOnwTkJfcyJWBf6J14Mw==" />
    </identity>
   </endpoint>
  </client>
                <behaviors>
                        <endpointBehaviors>
                                <behavior name="CustomBehavior">
                                        <clientCredentials>
                                                <clientCertificate findValue="WcfClient"
                               x509FindType="FindBySubjectName"
                               storeLocation="CurrentUser"
                               storeName="My"/>
                                                <serviceCertificate>
                                                        <authentication certificateValidationMode="PeerTrust"/>
                                                </serviceCertificate>
                                        </clientCredentials>
                                </behavior>
                        </endpointBehaviors>
                </behaviors>
        </system.serviceModel> 
```

并简单地使用这个在客户端调用服务

```
 Service1Client obj = new Service1Client();
            Response.Write(obj.GetData(12)); 
```

现在，当我运行时，一切正常，没有问题。

您可以在开发服务器上运行服务。

但是当我尝试在 IIS 中托管服务时，它给了我一个错误

> 无法使用以下搜索条件找到 X.509 证书：StoreName 'My'、StoreLocation 'CurrentUser'、FindType 'FindBySubjectName'、FindValue 'WCFServer'。

那么无论如何我可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-15T02:23:47.820

正如**x0n 所**提到的，Cassini 将以您当前的用户身份运行，但 IIS 将以 IUSR 身份运行。将带有私钥的证书导入 LocalMachine\Personal (LocalMachine\My)，然后更改您的服务配置：

```
 <serviceCertificate findValue="WcfServer"
                            storeLocation="CurrentUser"
                            storeName="My"
                            x509FindType="FindBySubjectName" /> 
```

对此：

```
 <serviceCertificate findValue="WcfServer"
                            storeLocation="LocalMachine"
                            storeName="My"
                            x509FindType="FindBySubjectName" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-10T09:25:47.250

您可能必须在 client>endopoint >indentity 中设置 dns 值，即证书的名称（如下面的代码中所述）

```
<client>
        <endpoint address="http://localhost/FrontPMWebServiceSetup111/FpmService.svc"
          binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IService"
          contract="FPMServiceReference.IService" name="WSHttpBinding_IService">
          <identity>
            <dns value="WCfServer" />
          </identity>
        </endpoint>
      </client> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T02:07:22.570

在计算机商店的“我的”中安装证书，以便所有用户都可以使用它。您已将它安装在当前用户的“我的”中。开发服务器以当前用户身份运行，这就是它工作的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T10:59:15.760

显然在配置的位置找不到证书。确保您使用哪个用户来运行该服务。也许该服务正在本地系统帐户或本地服务帐户或 IIS 用户上运行，并且您将证书安装为不同的用户？在 MMC 中添加一个管理单元以查看服务帐户或您用于服务的其他帐户（不是当前用户）中的证书。

# objective-c - 搜索时如何忽略 unicode 字符？

> ID：11482630
> 
> 赞同：1
> 
> 时间：2012-07-14T09:35:25.543
> 
> 标签：objective-c, ios, xcode, string, unicode

我正在尝试实现对我的应用程序的搜索。如果您在搜索栏中写了一个确切的单词，那没关系，但是例如，如果我想查找“book”并输入“böök”，变音符号应该无关紧要。我正在使用下面的代码，但它没有用，并且在搜索“New York - Björk”时也失败了。我也尝试了不同的 searchEditedText 组合，但代码变得很恶心。我怎样才能做到这一点？

```
NSString *searchText = [searchBar.text capitalizedString];
NSString *searchEditedText=[searchBar.text capitalizedString];
NSMutableArray *searchArray = [[[NSMutableArray alloc] init] autorelease];
for (NSDictionary *dictionary in listOfItems) {
  NSArray *array = [dictionary objectForKey:@"Names"];
  [searchArray addObjectsFromArray:array];
}
searchEditedText = [searchEditedText stringByReplacingOccurrencesOfString:@"u" withString:@"ü"];
searchEditedText = [searchEditedText stringByReplacingOccurrencesOfString:@"c" withString:@"ç"];
searchEditedText = [searchEditedText stringByReplacingOccurrencesOfString:@"U" withString:@"Ü"];
searchEditedText = [searchEditedText stringByReplacingOccurrencesOfString:@"C" withString:@"Ç"];
searchEditedText = [searchEditedText stringByReplacingOccurrencesOfString:@"o" withString:@"ö"];
searchEditedText = [searchEditedText stringByReplacingOccurrencesOfString:@"O" withString:@"Ö"];
searchEditedText = [searchEditedText stringByReplacingOccurrencesOfString:@"g" withString:@"ğ"];
searchEditedText = [searchEditedText stringByReplacingOccurrencesOfString:@"G" withString:@"Ğ"];
searchEditedText = [searchEditedText stringByReplacingOccurrencesOfString:@"s" withString:@"ş"];
searchEditedText = [searchEditedText stringByReplacingOccurrencesOfString:@"S" withString:@"Ş"];
searchEditedText = [searchEditedText stringByReplacingOccurrencesOfString:@"i" withString:@"ı"];
searchEditedText = [searchEditedText stringByReplacingOccurrencesOfString:@"İ" withString:@"I"];
for (NSString *sTemp in searchArray) {
  NSRange titleResultsRange = [sTemp rangeOfString:searchText options:NSCaseInsensitiveSearch];
  NSRange titleResultsRange2 = [sTemp rangeOfString:searchEditedText options:NSCaseInsensitiveSearch];
  if (titleResultsRange2.length > 0 || titleResultsRange.length > 0) {
    [copyListOfItems addObject:sTemp];
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T09:44:09.780

如果您使用的是 Core Data，则可以使用 NSPredicate 以不区分大小写和变音符号的方式进行搜索。[这个问题](https://stackoverflow.com/questions/2967400/using-nspredicate-to-determine-if-a-string-equals-another-string)的答案是执行不区分大小写的搜索，如果您添加`[cd]`作为比较的一部分，例如`contains[cd]`or `==[cd]`，那么它将执行不区分大小写和变音符号的搜索。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T03:38:13.287

事实上，你可以这样做：

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"Names CONTAINS[cd] %@",searchText];

searchArray = [[listOfItems filteredArrayUsingPredicate:predicate] mutableCopy];

*因为 NSPredicate 可以忽略 unicode，所以 searchArray 就是你想要的。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T18:36:08.230

您是否尝试仅使用现有代码并替换所有实例

```
NSCaseInsensitiveSearch 
```

和

```
NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch|NSWidthInsensitiveSearch 
```

? 这似乎会以最直接的方式解决您的问题。

如果您想`böök`匹配`book`但*不*反之，请参阅[此答案](https://stackoverflow.com/a/1234095/1424877)`böök`，了解在搜索之前去除变音符号的方法。但这很容易出错，而且可能不是你真正想做的。

# objective-c - 如何解决 [NSURL fileURLWithPath:error:]: unrecognized selector sent to class 的运行时错误？

> ID：11482633
> 
> 赞同：0
> 
> 时间：2012-07-14T09:36:15.957
> 
> 标签：objective-c

我是 iPhone 开发的初学者。我要播放声音。所以，这就是我应用此代码的原因

```
(void)viewDidLoad
{
    NSError* err;
    path=[[NSBundle mainBundle] pathForResource:@"Animalfile" ofType:@"plist"];
    dict=[NSDictionary dictionaryWithContentsOfFile:path];
    NSArray *animalaudio=[dict valueForKey:@"audio"];
    NSString *audiolist=[animalaudio objectAtIndex:currentsound];
    AVAudioPlayer *audio=[[AVAudioPlayer alloc]initWithContentsOfURL:[NSURL    fileURLWithPath:audiolist error:&err]];
    audio.delegate=self;
    [audio play];

} 
```

我得到了运行时错误

```
[NSURL fileURLWithPath:error:]: unrecognized selector sent to class 0x182121c
2012-07-14 14:51:21.711 plistdemo[1236:10703] *** Terminating app due to uncaught 
exception 'NSInvalidArgumentException', reason: '+[NSURL fileURLWithPath:error:]:     
unrecognized selector sent to class 0x182121c'
terminate called throwing an exceptionsharedlibrary apply-load-rules all 
```

所以，给出适用于我的代码的任何建议和源代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T09:54:01.277

NSURL 的当前[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html)没有列出任何此类方法，例如 'fileURLWithPath:error:'... 似乎已弃用或不正确。

而是尝试使用类似的东西：

```
[NSURL fileURLWithPath:audioList] 
```

希望能帮助到你...

# jquery - Jquery一切正确但不执行

> ID：11482635
> 
> 赞同：-4
> 
> 时间：2012-07-14T09:36:25.697
> 
> 标签：jquery

以下jquery代码有什么问题？为什么它不起作用？我正在尝试计算表中的列数并使用 id "eDiv" 设置此 div 的宽度，但它不起作用

```
$(document).ready(function () {

    reset();

    function reset() {
        w = $("#eDiv tr:first td").length * 200;
        $('.container1').width(2000);
        alert('i');
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T09:42:59.307

这是因为您的 html id 或类可能未定义。确认它们确实存在。

也许你想用

```
$('#eDiv').width(w); 
```

或者

```
$('.container1').width(w); 
```

或者

```
$('#eDiv').width(2000); 
```

**编辑：** 这**不是**因为事后声明了函数，你可以在这个[fiddle](http://jsfiddle.net/gopi1410/qhYp9/)中验证。*（@Felix Kling 指出）*

# c# - 获取 PropertyInfo 的值

> ID：11482636
> 
> 赞同：3
> 
> 时间：2012-07-14T09:36:26.723
> 
> 标签：c#, .net, validation, reflection

我正在创建一个小型验证框架，我有一个自定义`Validation Attribute`，可分配给类中的方法和`IsValid`属性`ValidationCore`。在`IsValid`方法内部调用时，我`ValidationCore`会找到一个调用方方法并将其属性分配给方法。我的自定义`Validation`属性有一个名为`TypeToValidate`. 因此，当我找到验证属性时，我会在该类型的类范围内查找任何类型。到目前为止我没有任何问题，但问题是当我想获取我必须验证的属性值时，我没有该类的任何实例来获取该属性值。我不知道我该如何处理这种情况，请帮助我。

这是我的样本：

```
public class TestClass
{
    public static TestModel Model { get; set; }
    public static ModelValidator ModelState
    {
        get { return new ModelValidator(); }
    }

    [Validate(typeof(TestModel))]
    public static void DoSomething()
    {
        if (ModelState.IsValid)
        {
            // Do something else....
        }
    }
} 
```

**编辑：**这是我的`IsValid`财产

```
 public virtual Boolean IsValid
    {
        get
        {
            // Get IsValid caller method
            var method = GetCallerMethod();

            // Get method attribute
            var Attrib = GetMethodAttribute(typeof(ValidateAttribute), method);

            // Get model to validate inside class scope
            var modelProperty = GetModelToValidateInClassScope(Attrib, method);

            if (modelProperty != null)
            {
                ValidateModel(modelProperty);
            }

            ....
        }
    } 
```

这是`ValidateModel`方法：

```
 protected virtual void ValidateModel(PropertyInfo modelProperty)
    {
        // Here I've model property
        // But I can't get its value
        var model = modelProperty.GetValue(null, null);
        var properties = model.GetType().GetProperties(
                        BindingFlags.FlattenHierarchy |
                        BindingFlags.Public |
                        BindingFlags.Instance |
                        BindingFlags.DeclaredOnly);

        foreach (var propertyInfo in properties)
        {
            // Add error to error list
            GetPropertyErrors(model, propertyInfo);
        }
    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T09:50:42.533

**回答实际提出的问题**

> 到目前为止我没有任何问题，但问题是当我想获取我必须验证的属性值时，我没有该类的任何实例来获取该属性值。

如果它是一个静态属性，那很好 - 只需`null`用作第一个参数：

```
// First argument is the instance: null as it's a static property
// Second argument is indexer arguments: null as we don't have any
var value = property.GetValue(null, null); 
```

从[文档中](http://msdn.microsoft.com/en-us/library/b05d59ty.aspx)：

> 因为静态属性属于类型，而不是单个对象，所以通过将 null 作为对象参数传递来获取静态属性。

**替代方法**

如果你只是想`TypeToValidate`从属性中获取`Validate`属性，那么你*应该*有一个属性的实例，你可以直接转换`ValidateAttribute`和检索属性。

基本上，尚不清楚属性真正进入您想要做的事情的位置。您的属性在*方法*而不是属性上，并且您的属性没有说明要验证哪些属性...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T21:08:41.013

您需要一个实例来获取其属性值。看起来您需要修改该方法`GetModelToValidateInClassScope`，以便它返回模型本身的实例以及 PropertyInfo。

如果这个方法被改变，它看起来像这样（注意新的**out**参数）：

```
PropertyInfo GetModelToValidateInClassScope(Type attributeType, MethodInfo methodInfo, out object instance)
{
   // same implementation as before ...

   // assign the model to use, 
   // which is likely accessible from somewhere in the is method
   instance = theModelInstanceFromThisMethod;

   // .. or if the property is static, then uncomment the next line:
   // instance = null;

   // same return value as before ...
} 
```

我只是在这里猜测，因为您没有提供此方法的实现。如果`GetModelToValidateInClassScope`无法访问模型实例，那么您将不得不从其他地方获取它。

获得模型实例后，可以像下面这样使用它。请注意，它`ValidateModel`已被修改，以便它接受模型实例作为第一个参数。

```
...   

    // Get model to validate inside class scope 
    object instance;  // <--- will hold the model instance
    var modelProperty = GetModelToValidateInClassScope(Attrib, method, out instance); 

    if (modelProperty != null) 
    { 
        ValidateModel(instance, modelProperty); // <--- make sure to pass the instance along!
    } 

...

protected virtual void ValidateModel(object instance, PropertyInfo modelProperty)         
{         
    // get value of instance property
    var model = modelProperty.GetValue(instance, null);    

    ...

} 
```

# vb.net - Listview 项目或子项目 onchange 事件

> ID：11482643
> 
> 赞同：1
> 
> 时间：2012-07-14T09:37:22.487
> 
> 标签：vb.net, charts, controls

当我有一个包含 46 个项目的列表视图，其中每个项目有 4 个子项目，子项目的值随时间变化时，当使用此代码选择列表视图中的项目时，我使用子项目的值绘制饼图：

```
Chart1.Series("Series1").ChartType = SeriesChartType.Pie
Chart1.Series("Series1").Points.Clear()

If ListView3.FocusedItem.SubItems(1).Text > 0 Then
    Chart1.Series("Series1").Points.AddY(ListView3.FocusedItem.SubItems(1).Text)
End If
If ListView3.FocusedItem.SubItems(2).Text > 0 Then
    Chart1.Series("Series1").Points.AddY(ListView3.FocusedItem.SubItems(2).Text)
End If
If ListView3.FocusedItem.SubItems(3).Text > 0 Then
    Chart1.Series("Series1").Points.AddY(ListView3.FocusedItem.SubItems(3).Text)
End If
If ListView3.FocusedItem.SubItems(4).Text > 0 Then
    Chart1.Series("Series1").Points.AddY(ListView3.FocusedItem.SubItems(4).Text)
End If 
```

有没有办法检测子项值的变化？类似于`onchange`文本框中的事件，但对于项目或子项目，因为我希望饼图在子项目值更改时更新。此代码更改子项目

```
For xx As Integer = 0 To ListView3.Items.Count - 1
                If ListView3.Items(xx).SubItems(0).Text = googleXMLdocument...<s:name>(j).Value Then

                    If j + 1 = 1 Then
                        ListView3.Items(xx).SubItems(1).Text += 1

                    End If
                    If j + 1 = 2 Then
                        ListView3.Items(xx).SubItems(2).Text += 1
                    End If
                    If j + 1 = 3 Then
                        ListView3.Items(xx).SubItems(3).Text += 1
                    End If
                    If j + 1 > 4 Then
                        ListView3.Items(xx).SubItems(4).Text += 1
                    End If
                End If

            Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T02:40:03.750

试试这个代码。这样，如果子项目有任何变化，图表将自动更新。您不需要计时器。

```
For xx As Integer = 0 To ListView3.Items.Count - 1
    If ListView3.Items(xx).SubItems(0).Text = googleXMLdocument...<s:name>(j).Value Then
        If j + 1 = 1 Then
            ListView3.Items(xx).SubItems(1).Text += 1
        End If
        If j + 1 = 2 Then
            ListView3.Items(xx).SubItems(2).Text += 1
        End If
        If j + 1 = 3 Then
            ListView3.Items(xx).SubItems(3).Text += 1
        End If
        If j + 1 > 4 Then
            ListView3.Items(xx).SubItems(4).Text += 1
        End If
    End If
Next 
```

将下面的代码放在上述代码之后的循环中。你也可以取消`FocusedItem`

```
Chart1.Series("Series1").Points.Clear()

Chart1.Series("Series1").Points.AddY (ListView3.FocusedItem.SubItems(1).Text)
Chart1.Series("Series1").Points.AddY (ListView3.FocusedItem.SubItems(2).Text)
Chart1.Series("Series1").Points.AddY (ListView3.FocusedItem.SubItems(3).Text)
Chart1.Series("Series1").Points.AddY (ListView3.FocusedItem.SubItems(4).Text) 
```

# android - 如何为完整的 Android 屏幕分辨率提供位图？

> ID：11482647
> 
> 赞同：0
> 
> 时间：2012-07-14T09:37:29.617
> 
> 标签：android, bitmap, drawable, resolution, pixel

实际上很简单的问题，我花了几个小时寻找答案。

提供填充全屏的位图资源的最佳方式是什么？例如完整的应用程序背景或其他东西。

目前，我将所有图像以中等分辨率放置在 drawable-nodpi 中，显然需要大量自定义缩放。我确实需要将图像填满，或者屏幕宽度的一半或三分之一。什么是最好的方法？

Michael Ellen 指出 ( [https://stackoverflow.com/a/6938345/1162415](https://stackoverflow.com/a/6938345/1162415) ) 例如 drawable-ldpi 有 240 px 的屏幕宽度。虽然我希望这是真的，但我不这么认为。[http://developer.android.com/guide/practices/screens_support.html#testing](http://developer.android.com/guide/practices/screens_support.html#testing)上的表 3清楚地表明 ldpi 可能导致实际 px 分辨率宽度为 240、480 或 600。

我是否应该使用针对屏幕尺寸固定的 drawable-*dpi 构建应用程序，例如 drawable-ldpi-small 等等？我们确实使用了 78 张卡片（如果您有兴趣，[请访问 https://play.google.com/store/apps/details?id=com.pinkwerther.tarot](https://play.google.com/store/apps/details?id=com.pinkwerther.tarot)），它们应该几乎全屏显示。这使得整个应用程序的大小变得非常糟糕。要么是那个，要么是很多不同的apk文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T09:38:37.930

现在有一个我目前正在考虑的可能合适的解决方案。即提供一种低分辨率的默认图像，并让 apk 具有真正高分辨率图像的扩展文件 ( [http://developer.android.com/guide/google/play/expansion-files.html](http://developer.android.com/guide/google/play/expansion-files.html) )，这些图像会被缩放和存储首次使用时。在我深入研究这种可能性之前，我只想确保没有更简单的解决方案......所以请随时提示我到我碰巧不知道的隐藏位置！

# c# - 程序卸载时调用函数/Api

> ID：11482648
> 
> 赞同：0
> 
> 时间：2012-07-14T09:37:30.873
> 
> 标签：c#, .net, c, windows, winapi

如何实现以下场景，

1）应该只有一个exe应该执行一些代码

2）此外，它应该在添加/删除程序中添加一个条目

3）当我从添加/删除程序中卸载条目时，我需要调用一些函数/api来完成卸载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T09:51:38.413

如果您需要的“调用某些函数/api”就像在下次重新启动时删除文件一样简单 - 将其设置为“重新启动时删除”，如下[所述](http://www.daniweb.com/hardware-and-software/microsoft-windows/windows-nt-2000-xp/threads/6577/delete-files-on-restart)：

> Windows 注册表编辑器版本 5.00 [HKEY_CLASSES_ROOT*\shell\Delete on reboot\command] @="CMD /E:OFF /C REG ADD >HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\Currentversion\RunOnce /v \"Del %1 >OnNextReboot \" /d ^\"cmd.exe /c DEL /F /Q \\"%1\\"\" /f\"" [HKEY_CLASSES_ROOT*\shell\Open] [HKEY_CLASSES_ROOT\Folder\shell\重启时删除\command] @="CMD /E:OFF /C REG ADD >HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\Currentversion\RunOnce /v \"Del %1 >OnNextReboot\" /d ^\"cmd.exe /c RD / S /Q \\"%1\\"\" /f\""

要在重新启动时删除注册表项，请使用此（[在此处](http://www.bleepingcomputer.com/forums/topic13777.html)解释）：

> [HKEY_CLASSES_ROOT*\shell\Delete on reboot\command] @="CMD /E:OFF /C REG ADD >HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\Currentversion\RunOnce /v \"Del %1 >OnNextReboot\" /d ^ \"cmd.exe /c DEL /F /Q \\"%1\\"\" /f\"" [HKEY_CLASSES_ROOT*\shell\Open] [HKEY_CLASSES_ROOT\Folder\shell\重启时删除\命令] @= "CMD /E:OFF /C REG ADD >HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\Currentversion\RunOnce /v \"Del %1 >OnNextReboot\" /d ^\"cmd.exe /c RD /S /Q \\ "%1\\"\" /f\""

# css - 动画 jquery 移动可折叠与 css

> ID：11482651
> 
> 赞同：3
> 
> 时间：2012-07-14T09:37:46.067
> 
> 标签：css, jquery-mobile

如何使用 css 过渡使 jquery 移动可折叠内容与动画一起出现？

```
.ui-collapsible {
  -webkit-transition: all 1s;
  -moz-transition: all 1s;
  -ms-transition: all 1s;
  -o-transition: all 1s;
  transition: all 1s;
} 
```

不工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T10:25:15.557

`display: none`通过切换可折叠内容的 div来显示和隐藏 jQuery Mobile 的可折叠元素。据我所知，所有主流浏览器都会在`display`属性更改时禁用 CSS 过渡。

另一种方法是覆盖 jQuery Mobile 的默认 CSS 以始终`display: block`用于可折叠内容 div，然后在`height`or`opacity`属性上进行转换（取决于是否需要从布局中“删除”内容）。

我创建了这个[jsFiddle](http://jsfiddle.net/Fcvps/1/)来演示使用该`opacity`属性的转换。这实际上只是使用以下 CSS 规则的问题：

```
.ui-collapsible-content {
    -webkit-transition: all 1s;
    -moz-transition: all 1s;
    -ms-transition: all 1s;
    -o-transition: all 1s;
    transition: all 1s;
    opacity: 1;
}
.ui-collapsible-content-collapsed {
    display: block;
    opacity: 0
} 
```

由于内容 div 没有设置高度，因此使用该`height`属性进行转换有点棘手。这个[小提琴](http://jsfiddle.net/Fcvps/3/)可以解决问题（另见下面的 CSS），但它需要在内容 div 上设置一个高度。您可以将高度更改为`auto`，但是在我看来，向下滑动的效果看起来不太正确。也许其他人知道更好的方法。

```
.ui-collapsible-content {
    -webkit-transition: all 1s;
    -moz-transition: all 1s;
    -ms-transition: all 1s;
    -o-transition: all 1s;
    transition: all 1s;
    height: 2em; /* or auto */
    overflow: hidden;
}
.ui-collapsible-content-collapsed {
    display: block;
    height: 0;
    padding: 0 16px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T11:57:22.107

```
.ui-collapsible-content {
    -webkit-transition: all 1s;
    -moz-transition: all 1s;
    -ms-transition: all 1s;
    -o-transition: all 1s;
    transition: all 1s;
    opacity: 1;
}
.ui-collapsible-content-collapsed {
    display: block;
    opacity: 0
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T10:15:19.940

我认为您必须创建**基于 CSS 的自定义过渡**：-

[参考这个](http://jquerymobile.com/demos/1.1.0/docs/pages/page-customtransitions.html)

# c# - 如何在mvc中反转列表

> ID：11482653
> 
> 赞同：-1
> 
> 时间：2012-07-14T09:38:16.340
> 
> 标签：c#, asp.net-mvc

在我的过滤中，我想更改顺序以显示列表，如后进先出（逆序）。我的代码在 repository.cs

orderby 候选人。位置升序选择候选人）；

如何更改而不是 orderby 以反转顺序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:38:28.673

它会是这样的：

```
candidates = candidates.OrderBy(c => c.Position).ToList() 
```

对于降序：

```
candidates = candidates.OrderByDescending(c => c.Position).ToList() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T09:43:00.760

我假设您想在运行时执行此操作。

尝试**[动态 Linq](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)**库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-10T16:35:43.060

当我试图颠倒我的数据库或模型中的项目在我的网页上显示的顺序时，我遇到了这个问题。（我想先获取最新的。）

```
@for (int i = Model.Count() - 1; i >= 0; i--)
{
      //input your div with the relevant model fields
} 
```

# ios - 呈现 modalViewController 正在释放调用它的那个

> ID：11482655
> 
> 赞同：0
> 
> 时间：2012-07-14T09:38:31.797
> 
> 标签：ios, xcode, cocoa-touch, uiviewcontroller, modalviewcontroller

我在集成 Greystripe 广告时遇到了一些问题（[在此处](https://stackoverflow.com/questions/11477261/greystripe-sdk-full-screen-ads-removing-modal-view-controller)记录但不重要）。如果像这样展示我的游戏视图，可以解决我的问题

```
iSlideAppDelegate *appDelegate = (iSlideAppDelegate *)[[UIApplication sharedApplication] delegate];
            UIStoryboard *storyboard = self.storyboard;
            Game3ViewController *gameView = (Game3ViewController *)[storyboard instantiateViewControllerWithIdentifier:@"mainGameController"];
            [appDelegate.window addSubview:gameView.view]; 
```

这基本上只是在当前视图控制器之上添加我的游戏视图。

现在从这个视图我想显示另一个像这样的模态视图

```
FullScreenSelfAdViewController *adView = [[FullScreenSelfAdViewController alloc] initWithNibName:@"FullScreenSelfAdViewController" bundle:nil];
        [adView setDismissDelegate:self];
        [self presentModalViewController:adView animated:YES]; 
```

问题是，当显示此视图时，我的 gameView 会取消分配。这意味着当我调用解除它的 AdView 时，它会释放但仍留在屏幕上，因为底层的 gameView 不再存在。

有没有更好的方法来调用这些视图？（我不能通过将它呈现为模态视图来调用我的游戏视图）。或者一种防止gameView被释放的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T15:48:51.640

如果我不得不猜测，你没有一个强大的变量来保留被释放的类。创建该类的人应该有一个强大的 ivar 这样做。当我尝试创建一个对象并在不保留它的情况下使用它时，我遇到了同样的问题。请注意，对于 UIAlerts，系统会在您调用 [alert show] 时保留它，导致您认为您可以使用其他视图控制器执行此操作（您不能！）

祝你好运。

# python - 将单个/多个字符更改为另一个单个字符

> ID：11482662
> 
> 赞同：1
> 
> 时间：2012-07-14T09:39:30.607
> 
> 标签：python, string, replace, character

例如，我有一个这样的字符串：

```
my_string = 'a hello aaaaa hi aaaaaaa bye bbb' 
```

我想将`'a'`or更改`'a'`为`'b'`。所以我想要的输出是：

```
changed_string = 'b hello b hi b bye bbb' 
```

我尝试使用 replace ，然后将多个`'b'`s 设置为 single `'b'`，但它会影响`'b'`最初在字符串中的多个 s。

我不想要像前 n 个字符那样的答案。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T09:45:18.107

```
>>> import re
>>> my_string = 'a hello aaaaa hi aaaaaaa bye bbb'
>>> re.sub(r'a+', 'b', my_string)
'b hello b hi b bye bbb' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T09:48:06.420

使用正则表达式。

根据您的工具，它可能是一行代码或 2-3 行代码。

用 vim

```
s/a+/b/g 
```

--

哦，没有注意到它是python。见贾米拉克的回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T10:05:01.823

不使用正则表达式你可以做到这一点，虽然我宁愿使用正则表达式，因为在这种情况下它更清晰、更快。

```
>>> from itertools import groupby
>>> my_string = 'a hello aaaaa hi aaaaaaa bye bbb'
>>> ''.join(''.join(g) if k != 'a' else 'b' for k, g in groupby(my_string))
'b hello b hi b bye bbb' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T10:06:17.987

```
>>> mystring = 'a hello aaaaa hi aaaaaaa bye bbb'
>>> ' '.join('b' if set(i)==set(['a']) else i for i in mystring.split())
'b hello b hi b bye bbb' 
```

请注意，虽然这适用于您的示例，但它不适用于重复字符是单词一部分的字符串，例如`'aaaaaz'`- 它会使这些单词保持不变，这可能是可取的，也可能不是......

# java - 如何将值存储在传递给 JNI 本机 C 调用的 Java 参数中

> ID：11482663
> 
> 赞同：1
> 
> 时间：2012-07-14T09:39:35.587
> 
> 标签：java, java-native-interface

我正在编写一个执行安全模块（例如加密、签名等）的程序...我用 C 语言编写了具有上述功能的库。现在我使用 jni 从 java 调用这个 C 本机函数。

我面临的问题是我无法将结果（签名数据或加密数据）存储到 java 传递的参数中。我想将结果存储在我收到的参数中。请帮我。提前非常感谢。

以下是我在java中用来调用native函数的API

```
sign("sign",byte[] file,int filelen,byte[] output,int outputlen) 
```

在本机 C 调用中，我将在“文件”上执行签名，这是一个由输入文件内容组成的缓冲区，我想将其存储到输出中。我该怎么做有人可以帮助我我没有找到任何相关信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T22:17:31.113

通常，使用直接 ByteBuffer 调用本机库。

接口是`MyClass.submit(ByteBuffer source, ByteBuffer dest)`

```
static jmethodID ByteBuffer_position;
static jmethodID ByteBuffer_limit;

// Find method id's for ByteBuffer methods.
JNIEXPORT jint JNICALL Java_MyClass_initAPI
    (JNIEnv *env, jclass thisj) {
  jint error = 0;

  ByteBuffer_position = (*env)->GetMethodID(env, byteBufferClass, "position", "()I");
  if (ByteBuffer_position == NULL) error = -1;
  ByteBuffer_limit = (*env)->GetMethodID(env, byteBufferClass, "limit", "()I");
  if (ByteBuffer_limit == NULL) error = -1;

  return error;
}

// Get ByteBuffer pointers and sizes and encrypt
// Expects source buffer's position to indicate end of source
// Expects dest buffer's limit to indicate max output length
JNIEXPORT jint JNICALL Java_MyClass_submit (JNIEnv *env, jobject thisj,
    jobject sourceBuffer, jobject destBuffer ) {
    jint error = 0;

    unsigned char* sourcePtr = (*env)->GetDirectBufferAddress(env, source);
    unsigned char* destPtr = (*env)->GetDirectBufferAddress(env, dest);
    jlong sourceLen = (*env)->CallIntMethod(env, source, ByteBuffer_position);
    jlong destLen = (*env)->CallIntMethod(env, dest, ByteBuffer_limit);

    // Encrypt sourcePtr --> destPtr

    return error;
} 
```

这应该足以传达这个想法。它是从工作代码中转述出来的，但未经当前形式的测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T13:09:28.320

以下代码允许您的本机代码直接访问两个原始字节数组输入的内容。

```
JNIEXPORT void JNICALL Java_*mypackage*_sign(JNIEnv* env, jbytearray input, jint ilen, jbytearray output, jint olen) {
  char* pinput = (*env)->GetByteArrayElements(env, input, NULL);
  char* poutput = (*env)->GetByteArrayElements(env, output, NULL);

  sign(pinput, ilen, poutput, olen);

  (*env)->ReleaseByteArrayElements(env, input, pinput, 0);
  (*env)->ReleaseByteArrayElements(env, output, poutput, 0);
} 
```

根据您的性能考虑（即，如果您想确保避免复制数组数据，或避免并发访问字节数组），[这里有一个](https://stackoverflow.com/questions/6728616/how-to-read-a-bytearray-in-jni)使用`GetPrimitiveArrayCritical`.

仅当您需要在本机代码和 Java 代码之间共享缓冲区的时间超过单个函数调用的持续时间时，才建议使用 NIO/直接缓冲区。

# php - 使用闭包时如何修复 php 模式缩进

> ID：11482667
> 
> 赞同：3
> 
> 时间：2012-07-14T09:39:51.930
> 
> 标签：php, emacs, indentation, php-mode

我在 Emacs 中使用 php-mode，它可以正常工作，除非我使用闭包作为这样的参数：

```
$app->get('/', function() use ($app) {
        echo "foo";
    }); 
```

当函数在函数调用内部时，缩进会加倍。如何解决这个问题？

**编辑**

如何使它看起来像这样（与javascript-mode处理匿名函数相同）。

```
$app->get('/', function() use ($app) {
    echo "foo";
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T02:07:21.317

如果您将 point 放在第一行的末尾并按 Cc Co，您可以看到 cc-mode 认为您处于哪个句法结构的中间，并自定义它如何缩进该结构。我当前的计算机上没有 php-mode，但我认为在我使用 PHP 时将其设置为零效果相当好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T12:34:04.027

在[@amalloy](https://stackoverflow.com/users/625403/amalloy)的帮助下，我设法创建了解决问题的修复程序：

```
(defun unident-closure ()
  (let ((syntax (mapcar 'car c-syntactic-context)))
    (if (and (member 'arglist-cont-nonempty syntax)
             (or
              (member 'statement-block-intro syntax)
              (member 'block-close syntax)))
        (save-excursion
          (beginning-of-line)
          (delete-char c-basic-offset)))))

(add-hook 'php-mode-hook (lambda ()
                           (add-hook 'c-special-indent-hook 'unident-closure)) 
```

不确定是否需要在 php-mode-hook 中

很大的帮助是`C-c C-s`它显示了`c-syntactic-context`当`c-special-indent-hook`被触发时会发生什么变化（并且是在缩进完成之后）。

[CC-Mode 手册](http://www.gnu.org/software/emacs/manual/html_mono/ccmode.html)也有帮助

**更新**

我发现这段代码无效

```
array('tags' => array_map($rows,function($row) {
....    return array(
....        'name' => $row['name'],
....        'size' => $normalize($row['tag_count']);
....    );
....}); 
```

（点是需要去掉的空格）

还有一个

```
return array('tags' =>
             array_map($rows, function($row) use ($normalize) {
             ....    return array(
             ....        'name' => $row['name'],
             ....        'size' => $normalize($row['tag_count']);
             ....    );
             ....}); 
```

所以我需要修改函数，`C-c C-s`显示`arglist-cont-nonempty`出现两次（每个额外`arglist-cont-nonempty`添加更多需要删除的缩进）

```
(defun unident-closure ()
  (let ((syntax (mapcar 'car c-syntactic-context)))
    (if (and (member 'arglist-cont-nonempty syntax)
             (or
              (member 'statement-block-intro syntax)
              (member 'brace-list-intro syntax)
              (member 'brace-list-close syntax)
              (member 'block-close syntax)))
        (save-excursion
          (beginning-of-line)
          (delete-char (* (count 'arglist-cont-nonempty syntax)
                          c-basic-offset)))))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-17T10:04:51.643

我尝试了 jcubic 答案中的代码，它不再是工作人员。基于 amalloy 的有用答案，我已将 jcubic 的解决方法修改为以下，它有效。

```
(defun unident-closure ()
  (let ((syntax (mapcar 'car c-syntactic-context)))
    (if (and (member 'arglist-cont-nonempty syntax)
             (or
              (member 'statement-block-intro syntax)
              (member 'brace-list-intro syntax)
              (member 'brace-list-close syntax)
              (member 'block-close syntax)
              (member 'defun-block-intro syntax)
              (member 'defun-close syntax)))
        (save-excursion
          (beginning-of-line)
          (delete-char (* (count 'arglist-cont-nonempty syntax)
                          c-basic-offset)))))) 
```

# android - 许可：申请退款时间

> ID：11482675
> 
> 赞同：0
> 
> 时间：2012-07-14T09:41:37.167
> 
> 标签：android, android-lvl

如果申请退款时间已过期，有什么方法可以（以编程方式）询问 GooglePlay？

编辑：我想要实现的是，如果用户在退款期内，我确实想跳过许可检查

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T15:35:34.590

不会。Google 不会向开发人员公开此类 API。

如果您的目的是在退款期内使用“严格”许可模式检查，则只需在应用程序首次运行后的前 24 小时内进行检查。是的，即使官方退款窗口是 15 分钟，用户仍然可以在 24 小时内申请退款。

因此，24 小时后，如果用户通过了“严格”​​许可模式检查，那么您可以切换到更轻松的模式、ServerManagedPolicy 或您自己的策略。

# security - 临时存储敏感数据

> ID：11482677
> 
> 赞同：4
> 
> 时间：2012-07-14T09:41:53.240
> 
> 标签：security, cryptography, temporary-files, sensitive-data

场景如下：应该临时存储一个加密密钥，以便应用程序的多个实例可以（顺序地）访问它。使用后，密钥当然应该从系统中移除。然而，这带来了一个问题。我承认只要存储了密钥，系统就容易受到攻击，但我希望系统在存储密钥之前和之后都是安全的。

简单地将密钥写入文件并在之后覆盖它不会在所有情况下都有效：某些文件系统将更改写入磁盘的不同部分，而不是写入相同的位置。在这种情况下，之后仍然可以检索密钥。我不能依赖具有全盘加密的用户。

那么最合乎逻辑的选择似乎是使用另一个将密钥保存在内存中的进程，但是操作系统可能会在某些时候将内存写入磁盘，从而导致与上述相同的问题。

加密密钥是可能的，但这并不更安全。临时存储密钥的全部意义在于用户无需在每次运行程序时都输入它。这意味着用于加密密钥的密钥也必须存储在某个地方，或者它必须基于已知数据。如果存储了密钥，那么当然我们现在遇到了安全存储*该*密钥的问题。如果是基于已知数据，那意味着在必要时可以再次生成密钥，所以加密几乎没有用处。

我知道一些操作系统提供 API 来保护数据，但这通常依赖于根据用户帐户信息生成加密密钥。即使这是特定于会话的，在会话结束之前数据也不会是安全的（这可能在密钥应该被擦除之后很长时间）。

这个问题有没有解决方案（不依赖特殊硬件，不需要全盘加密等）？如果没有，在这种情况下我能做的最好的事情是什么？

**编辑澄清**：当密钥存储在内存中时，它不需要是安全的；此时，用户应保证无法进行物理访问，并且系统没有病毒。使用密钥后，应将其从系统中删除，以便之后具有物理访问权限的任何人或任何程序都可以检查所有内存和磁盘，而不再找到密钥的单个（可用）痕迹。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T10:07:28.867

您可以使用 ramdisk（不是 tmpfs）。请参阅[http://www.kernel.org/doc/Documentation/filesystems/tmpfs.txt](http://www.kernel.org/doc/Documentation/filesystems/tmpfs.txt)：

**“另一个类似的东西是 RAM 磁盘 (/dev/ram*)，它在物理 RAM**中模拟一个固定大小的硬盘，你必须在上面创建一个普通的文件系统**。Ramdisks 不能交换**，你没有可能调整大小他们。”

所以基本上，你需要在 /dev/ram* 上创建一个文件系统，然后将它挂载到某个地方。但是，所有进程都可以访问此挂载点，而不仅仅是特定进程。

# google-maps - 由 PolyMouseEvent 触发时获取光标/鼠标的纬度

> ID：11482679
> 
> 赞同：0
> 
> 时间：2012-07-14T09:42:02.717
> 
> 标签：google-maps, google-maps-api-3

我是 Google Maps API 的新手......所以如果这个问题的答案有点基本，我提前道歉......我花了几个小时试图找到一个解决方案。

**解释：**

我想在多边形中检测到点击时光标所在的点显示一个信息窗口。

我能够打开信息窗口 - 但无法确定要使用的位置。

PolyMouseEvent 对象似乎不允许像 MouseEvent 那样获取 latLng。

在这种情况下，有没有办法获得当前鼠标位置（以 latLng 为单位）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T09:52:01.830

在 PolygonOptions 中设置 clickable:false 并监听地图本身的点击事件。

# objective-c - stringWithCString 中的内存泄漏

> ID：11482680
> 
> 赞同：1
> 
> 时间：2012-07-14T09:42:13.137
> 
> 标签：objective-c, cocoa

我遇到内存泄漏，任何人都可以在函数`stringWithCString`中找到内存泄漏吗？`stringWithCstring`

```
SomeView *detailViewController = [[SomeView alloc] initWithNibName:@"SomeView" bundle:nil];
detailViewController.test = [NSString stringWithCString:"abc" encoding:UTF8_ENCODING]; 
```

SomeView 中测试变量的属性是

```
@property (nonatomic,copy) NSString* test; 
```

我的财产申报正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T10:11:51.343

您是否像这样在方法中释放字符串`[SomeView dealloc]`：

```
- (void)dealloc
{
    self.test = nil;
    [super dealloc];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T09:57:01.767

无论您使用什么来“检测”泄漏，它的可靠性如何？

现在我从来没有使用过属性，但上面的代码看起来很正确——字符串应该被释放。"stringWithCString:" 无论如何都会自动释放字符串，所以没有问题。但是，您的属性中的“副本”似乎表明它会复制字符串（嗯？惊喜！），即使我假设在拥有对象死亡时释放对象类型属性 - 如果拥有对象永远不会死，那么复制的字符串将永远不会被释放。

也许内存泄漏检测器真的意味着该字符串的副本永远不会被释放，因为您忘记释放“detailViewController”？该副本仍将位于同一源代码行中，因此即使内存泄漏检测器可以提供准确的位置但仅提供行号，您也可能会被误导......

# android - Android 我有这个错误“位码不是正确的容器格式（原始或包装）”？

> ID：11482686
> 
> 赞同：0
> 
> 时间：2012-07-14T09:43:01.133
> 
> 标签：android, live-wallpaper, renderscript

您好，我正在尝试使用渲染脚本制作水动态壁纸，但出现此错误。我认为这与 RS 文件有关（该文件应该在原始文件夹中）。

RenderScript“位码的容器格式不正确（原始或包装）”

有谁知道如何解决这个问题？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T03:36:20.057

.rs 文件应与您的其他应用程序源一起放置（而不是在 res/raw 文件夹中）。生成的 .bc 文件将由编译器自动放置在那里。

# c# - ASP.NET MVC Controller 返回视图模型说明

> ID：11482687
> 
> 赞同：1
> 
> 时间：2012-07-14T09:43:03.057
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, validation

以下是提交数据的控制器的两个示例。如果验证失败，一个返回输入模型，另一个则没有。有人能告诉我哪种方法是正确的还是首选的？它们的行为似乎完全相同。

带返回模型

```
 [HttpPost]
    public ActionResult Register(RegisterModel model)
    {
        if (ModelState.IsValid)
        {
    //do stuff
        }

        return View(model);
    } 
```

不返回模型

```
 [HttpPost]
    public ActionResult Register(RegisterModel model)
    {
        if (ModelState.IsValid)
        {
    //do stuff
        }

        return View();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T09:52:41.500

通常您希望用户在他提交的数据无效时显示错误消息（例如，他没有在要求成为电子邮件的字段中输入有效的电子邮件地址 - 请参阅 MVC ModelValidation 了解更多信息）。

您使用 ModelState.IsValid 进行检查。在这种情况下，您通常会向他显示他来自的页面（“Register”），并且您还想显示他在表单字段中输入的数据（= RegisterModel）。但是您想**显示一条错误消息**，告诉他哪些字段不正确。

如果用户的**数据是正确**的并且您的操作成功（在这种情况下他已成功注册），您通常不会再次向他显示注册表单，但您会将他**重定向**到成功页面。

这是一个简单的[示例，如何在成功操作后验证、显示错误和重定向](http://www.asp.net/mvc/tutorials/older-versions/models-%28data%29/validation-with-the-data-annotation-validators-cs)。

您的代码中的示例：

```
[HttpPost]
public ActionResult Register(RegisterModel model)
{
    if (ModelState.IsValid)
    {
       //do stuff
       // redirect to a success page
       return RedirectToAction("Success");
    }

    // data is not valid - show the user his data and error messages
    // using Html Helper methods (see link for details)
    return View(model);
} 
```

在注册视图上（如果没有 - 如果你有一个强类型视图，你可以使用 HTML Helper 重载 - 例如使用 Html.LabelFor、TextboxFor 等方法）：

显示一般错误消息/摘要；

```
...
<%= Html.ValidationSummary("Register was not successfull") %> 
```

在输入旁边显示错误消息：

```
...
<%= Html.TextBox("Email") %>
<%= Html.ValidationMessage("Email", "*") %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T09:46:36.183

你会在没有模型传递给它的情况下查看渲染吗？可能不会，所以第二个会失败。

我建议您阅读有关**Post Redirect Get**模式

[http://en.wikipedia.org/wiki/Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T09:54:49.043

最后的第一个动作是将模型传递给视图，第二个动作是返回一个空视图。所以我建议你去第一个

但是当验证失败时，您应该以这种方式进行错误处理

```
if (ModelState.IsValid)
        {
    //do stuff
        }
   else
   {
      ModelState.AddModelError("RegisterModel Errors", "some error occured");
   } 

       return View(model); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T10:45:44.143

由于您有一个强类型视图，因此在任何一种情况下，您都需要将相应的模型传递给视图（否则您的视图可能会在尝试访问空模型上的属性时崩溃）。成功后，您可以重定向到另一个页面，或者您应该能够在同一页面中向用户发送通知，更新操作是成功还是失败（取决于您是否想要基于 HTML 的常规解决方案或启用 AJAX 的解决方案） . 至于验证，有通常的客户端验证和基于 jQuery 的不显眼的客户端验证选项。

这里有几个有用的链接

[ASP.NET 模型验证](http://weblogs.asp.net/scottgu/archive/2010/01/15/asp-net-mvc-2-model-validation.aspx)（这是基于 MVC2，但对于 MVC3 应该相同）

[MVC3 不显眼的客户端验证](http://duncanmcintyre.net/programming/mvc3-razor-unobtrusive-jquery)

# objective-c - 目标c sqlite没有选择作品

> ID：11482689
> 
> 赞同：-1
> 
> 时间：2012-07-14T09:43:29.050
> 
> 标签：objective-c

我无法在 sqlite 数据库中的表上进行选择。

我有以下代码将 .sqlite 文件复制到用户目录：

```
 // copy the database to the user's directory
- (void)checkAndCreateDB {
    // Check if the SQL database has already been saved to the users phone, if not then copy it over
    BOOL success;

    // Create a FileManager object, we will use this to check the status
    // of the database and to copy it over if required
    NSFileManager *fileManager = [NSFileManager defaultManager];

    // Check if the database has already been created in the users filesystem
    success = [fileManager fileExistsAtPath:databasePath];

    // If the database already exists then return without doing anything
    if(success) return;

    // If not then proceed to copy the database from the application to the users filesystem

    // Get the path to the database in the application package
    NSString *databasePathFromApp = [[NSBundle mainBundle] pathForResource:databaseName ofType:nil];
    // Copy the database from the package to the users filesystem
    [fileManager copyItemAtPath:databasePathFromApp toPath:databasePath error:nil];
    [fileManager release];
} 
```

并在这里选择：

```
sqlite3 *database;

categories = [[NSMutableArray alloc] init];

if(sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK) {
        const char *sqlStatement = "select * from category";
        sqlite3_stmt *compiledStatement;
    NSLog(@"get");
        if(sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatement, NULL) == SQLITE_OK) {
        NSLog(@"test");
        while(sqlite3_step(compiledStatement) == SQLITE_ROW) {
                NSString *cId = [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 1)];
                NSString *cName = [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 2)];

                Category *category = [[Category alloc] initWithId:cId name:cName];
                [categories addObject:category];
                [categories release];
            } 

    }
        // Release the compiled statement from memory
        sqlite3_finalize(compiledStatement);

    }
    sqlite3_close(database); 
```

日志仅显示：“get”。“测试”不存在。

我希望有一个人可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T09:57:15.830

如果指定的数据库不存在，sqlite3_open 将创建一个新的（空）数据库。为了确保这不是正在发生的事情，请尝试使用 sqlite3_open_v2 并使用 SQLITE_OPEN_READWRITE 作为标志参数。这样，如果您尝试打开一个不存在的数据库，您将收到错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T10:07:41.800

我相信您的数据库副本代码在传递`nil`给. 尝试传递正确的文件扩展名并添加代码以检测复制操作的成功或失败（并使您的方法返回）并从那里获取它。`ofType``[NSBundle pathForResource]``checkAndCreateDB``BOOL`

您的数据库选择代码对我来说看起来不错，所以我猜您有一个空数据库，如@Micheal 的回答中所述。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-11T15:22:26.280

这里有一个使用 SQLite 的示例项目，您可以参考：[https ://github.com/AaronBratcher/ABSQLite](https://github.com/AaronBratcher/ABSQLite)

它有用于以更传统的数据库方式访问 SQLite 的类，我觉得这让事情变得更容易。

# jquery - 移动设备（iOS）上的jquery“on”事件

> ID：11482690
> 
> 赞同：1
> 
> 时间：2012-07-14T09:43:33.443
> 
> 标签：jquery, ios, mobile

我在动态生成的跨度上使用“on”事件，如下所示：

```
$("body").on("click", "span", function(e){
    alert('clicked');
}); 
```

它工作得很好。然后我在移动设备上对其进行了测试（目前仅适用于 iOS），但它似乎无法正常工作！！

我在想也许是“点击”未被识别为点击，或者可能是 CSS 错误不会让点击发生，所以我尝试将正常的 javascript 事件附加到其中一个跨度，如下所示：

```
<span onclick="alert('hello');">hello</span> 
```

但这一次，它奏效了！

有人有线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T16:18:16.347

需要安装 jquery mobile 并附加“vclick”事件。

您还需要删除“点击”事件，否则它将被调用两次。

代码示例：

```
$("body").on("vclick", "span", function (e){
    //your function here
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T09:48:47.327

这应该可以正常工作，所以也许你有一些其他代码把它搞砸了。

您也可以尝试像这样绑定到触摸：

```
$("body").on("click touch", "span", function(e){
    alert('clicked');
}); 
```

虽然，它不应该有任何区别。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-14T09:55:59.807

您需要绑定`touchstart`事件：

```
$('span').bind( "touchstart", function(e)
  {
    // Clicked Span
   }); 
```

# javascript - MSIE 如何提醒“未知”？

> ID：11482691
> 
> 赞同：2
> 
> 时间：2012-07-14T09:43:33.203
> 
> 标签：javascript, html, internet-explorer, events

出于某种目的，我想**将 Window.Event 对象缓存在一个变量中**并稍后使用它，但 MSIE 一直告诉我这是“未知”。

只需在 IE 中运行下面的代码，您就会明白我的意思

我只想问怎么会这样？我错过了什么？

**html:**

```
<button id='btn'>Click!!!</button> 
```

**JS：**

```
 var eventObj = null;
    document.getElementById('btn').onclick = function() {
       eventObj = window.event;
       setTimeout(function() {
          alert(typeof eventObj.srcElement);
       }, 1000)
    }​ 
```

**EIDT 1：**

我已经搜索了其他人完成的一些测试，请参见以下内容：

**HTML：**

```
<button id='btn1'>Click 1 !!</button>
<button id="btn2">Click 2 !!</button> 
```

**JS**

```
var btn1EventObj = null;
document.getElementById('btn1').onclick = function() {
    btn1EventObj = window.event;
    alert(btn1EventObj.srcElement.id);
}
document.getElementById('btn2').onclick = function() {
    alert(btn1EventObj === window.event); // output:false;
    alert(btn1EventObj.srcElement === window.event.srcElement); // output: true ; 
    alert(btn1EventObj.srcElement.id); // output: btn2 ;
} 
```

当 btn1 被单击时，我假设我将“事件对象”缓存在**btn1EventObj**中，然后单击 btn2：

测试：

**btn1EventObj === window.event -> false;** // MSIE 中不仅有一个事件对象

**btn1EventObj.srcElement === window.event.srcElement -> true** //我无法理解下面的这个。

**btn1EventObj.srcElement.id -> btn2**

看[小提琴](http://jsfiddle.net/strangeline/3tFwj/1/)

所以以上所有告诉我，也许MSIE中引发的所有事件都是共享属性，当点击btn2时，前面的所有属性都被后面的属性覆盖？

我说得对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T09:52:24.427

`window.event' 是一个全局对象，可以在每个引发的事件上更改。在几毫秒内在浏览器上引发了许多事件。

笔记：

**如果您设置`var y = someObject`对象没有复制到`y`变量中，则该`y`变量只包含内存中对象的地址（您可以谷歌一下：对象引用和指针）。所以您需要将对象复制到`y`，或尝试以下替代解决方案：**

所以你需要使用`function(e){}`样式事件处理程序：

```
var eventObj = null; 
document.getElementById('btn').onclick = function(e) { 
   eventObj = e;
   setTimeout(function() { 
      alert(typeof eventObj.srcElement); 
   }, 1000) 
} 
```

[在jsfiddle](http://jsfiddle.net/jdkJT/9/)上看到这个

编辑1：

在 M$ IE 中，您可以使用以下代码：

```
function copyObject(o){
    return {srcElement: o.srcElement,
           ...
           more attributes ...
            };
}

var eventObj = null; 
document.getElementById('btn').onclick = function(e) { 
   eventObj = copyObject(window.event);
   setTimeout(function() { 
      alert(typeof eventObj.srcElement); 
   }, 1000) 
} 
```

参见[jsfiddle（已编辑）](http://jsfiddle.net/jdkJT/11/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T10:12:26.910

您不能复制`window.event`IE 中实际事件的上下文。换句话说：在脚本中分配处理程序时不存在现有事件。如果要引用`window.event`，则必须内联分配处理程序。

MSDN：

```
The event object is available only during an event—that is,
you can use it in event handlers but not in other code. 
```

HTML：

```
<button id='btn' onclick="clicker(event);">Click!!!</button> 
```

和JS：

```
function clicker(e){
    setTimeout(function (){
        alert(e.srcElement);
    },1000);
    return;
} 
```

[`event`](http://msdn.microsoft.com/en-us/library/ms535863%28v=vs.85%29.aspx)在 MSDN 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T10:40:21.333

```
var eventObj = null;
document.getElementById('btn').onclick = function() {
   eventObj = window.event;
   setTimeout((function(eventObj) {
      alert(typeof eventObj.srcElement);
   })(eventObj), 1000)
} 
```

[**演示。**](http://jsfiddle.net/4nHmz/1/)

事件对象仅在事件期间可用-也就是说，您可以在事件处理程序中使用它，但不能在其他代码中使用`setTimeout`它，因此在事件执行后它不可用，因为为了避免冲突，IE 将其设置为 null 和之后1 秒不可用，因此您可以使用闭包。

# javascript - 控制台中的数组 [0] 显示信息

> ID：11482695
> 
> 赞同：2
> 
> 时间：2012-07-14T09:44:11.223
> 
> 标签：javascript, debugging, console, slickgrid

我正在使用光滑网格并使用订阅功能在编辑单元格时获取通知

```
grid.onCellChange.subscribe(function (e,args) {

        console.log(args);

        var a =  data[args.row];
       // var b =  args.grid.getItem(args.row);
        var c = args.item;
        console.log(a);
      //  console.log(b);
        console.log(c);

        console.log("Field Edited:"+ cols[args.cell ].field);
        $.post('action_updaterow.php',{'args[]':c},function (data){
            alert(data);
        })

    }) 
```

a 和 c 在控制台中都显示为空数组，但是（根据图片）当我在控制台中查看 args 项目时显示为空数组，但显示项目

![在此处输入图像描述](../Images/67694ff1609bb905177fa51dcba829df.png)

当数组被列为空但显示值时，这意味着什么。这里真正的问题是，如果我通过`a`,`c`或`args.item`进入我的回调函数，php 页面不会收到任何数据。

**更新**

事实证明，我以错误的方式构建了我的数据，因此它作为一个空数组返回，其中包含数据的属性。任何东西似乎都不能很好地理解这一点——JSON、Jquery、console.log——我修复了数据结构以使每一行都成为一个对象，一切都很好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T09:56:20.423

看起来`Array`确实是空的。你可以给一个命名属性，`Array`就像给一个`Object`. 意思就是：

```
console.log( item.CanPublish );  // "1"
console.log( item.length );      // 0
console.log( item[0] );          // undefined 
```

通常建议不要这样做，因为它会造成混乱。JavaScript 没有“命名数组”之类的东西。尝试坚持*使用*an`Array` *或*`Object`.

# python - 使用python搜索完全匹配的单词

> ID：11482705
> 
> 赞同：-4
> 
> 时间：2012-07-14T09:45:35.703
> 
> 标签：python

我有段落包含“我有一本很好的 python 书，所以会成为 pythonist”我的目标是只搜索“python”而不是 pythonist 我怎么能用 python 来做它并且前后不带任何额外的字符

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T09:47:55.623

`'python'`这将通过用空格分割所有单词来确定是否与单词完全匹配。

```
>>> text = "I have a good python book so will become pythonist"
>>> 'python' in text.split()
True 
```

# jquery - 如果使用 jQuery 输入为空，则禁用提交按钮

> ID：11482714
> 
> 赞同：5
> 
> 时间：2012-07-14T09:46:45.373
> 
> 标签：jquery, forms, input, submit

在用户填写表单中的输入字段之前，我正在尝试禁用提交按钮。

我在这里找到了[这个](https://stackoverflow.com/questions/1342676/to-disable-a-send-button-if-fields-empty-by-jquery)线程，它有一个非常好的答案。我在填写字段时重新启用提交按钮时遇到了一点问题。

有人可以看看这个功能并帮我弄清楚我错过了什么吗？任何帮助将不胜感激：D 谢谢。

这里还有[一个小提琴](http://jsfiddle.net/stevenschemers/He4Kv/1/)

```
$(document).ready(function() {
var $submit = $("input[type=submit]");

if ( $("input:empty").length > 0 ) {
$submit.attr("disabled","disabled");
} else {
$submit.removeAttr("disabled");
}
});

<form method="POST" action="<%=request.ServerVariables("SCRIPT_NAME")%>">
User Name: <input name="Username" type="text" size="14" maxlength="14" /><br />
Password: <input name="last_name" type="password" size="14" maxlength="14"><br />
<input type="submit" value="Login" name="Submit" id="loggy">
</form> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-14T09:54:50.747

```
$(document).ready(function() {
    var $submit = $("input[type=submit]"),
        $inputs = $('input[type=text], input[type=password]');

    function checkEmpty() {

        // filter over the empty inputs

        return $inputs.filter(function() {
            return !$.trim(this.value);
        }).length === 0;
    }

    $inputs.on('blur', function() {
        $submit.prop("disabled", !checkEmpty());
    }).blur(); // trigger an initial blur
}); 
```

**[工作样本](http://jsfiddle.net/He4Kv/7/)**

除了模糊之外，您还可以使用 keyup ，例如：

```
 $inputs.on('keyup', function() {
        $submit.prop("disabled", !checkEmpty());
    }).keyup();  // trigger an initial keyup 
```

您还可以组合多个事件：

```
 $inputs.on('keyup blur', function() {
        $submit.prop("disabled", !checkEmpty());
    }).keyup();  // trigger any one 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T09:57:26.420

在您的问题中，我没有看到您不断检查输入状态的代码，我认为问题在于。

您可以使用现场活动来做到这一点。以您的代码为例：

```
$(document).ready(function() {
      var $submit = $("input[type=submit]");

      function checkSubmitState()
      {
          if ( $("input:empty").length > 0 ) {
             $submit.attr("disabled","disabled");
          } else {
             $submit.removeAttr("disabled");
          }
      }

      // check the submit state on every change or blur event.
      $("input").live("change blur", checkSubmitState);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T18:42:03.187

在运行条件之前使用 keyup 事件检查值：

```
$(document).ready(function() {
    $('input:text, input:password').keyup(function() {
        if ($(this).val() !== "") {
            $('input:submit').removeAttr('disabled');
        } else {
            $('input:submit').attr('disabled', 'true');
        }
    });
}); 
```

[http://jsfiddle.net/tovic/He4Kv/23/](http://jsfiddle.net/tovic/He4Kv/23/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-25T13:16:30.343

当我正在寻找一个 jQuery 片段时，这里的一些答案已经过时了。我对它们进行了测试，但由于我认为被弃用，它们似乎不再正常工作。

所以我自己做了，这是一种更新的工作方式（jQuery >=3.0），例如监听输入事件。

```
let inp = $('[type=text]'),
    btn = $('[type=button]')
btn.prop('disabled', true)

inp.on('input', () => {
  let empty = []
  inp.map(v => empty.push(inp.eq(v).val()))
  btn.prop('disabled', empty.includes(''))
})
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<form>
	<input type=text><br>
	<input type=text><br>
	<input type=text><br>
	<input type=button value=Send>
</form>
```

一个简单的 JavaScript 示例在[这里](https://stackoverflow.com/questions/46917270/javascript-disable-button-until-all-fields-are-filled/46920654#46920654)。

# jquery - 如何在jQuery中转换为日期时间？

> ID：11482723
> 
> 赞同：2
> 
> 时间：2012-07-14T09:48:17.433
> 
> 标签：jquery, asp.net, datetime

我想将字符串值转换为日期时间。实际上我有一个字符串值（即日期）从后端获取它。现在我想将它转换为日期时间，因为我必须为该值应用倒计时 jquery 插件。并且 Count Down 插件将“**直到**”值作为参数。因此，我想将其转换为日期时间。我尝试了以下代码引用[Jquery 函数来转换日期时间](https://stackoverflow.com/questions/2402386/jquery-function-to-convert-datetime-split-date-time-2010-10-18-1006-to-retur)，

```
 var d1 = Date.parse('2010-10-18, 10:06 AM');
  alert(d1.toString('dd/mm/yyyy HH:mm:ss GMT')); 
```

但它给了我错误“**时间戳：7/14/2012 3:16:05 PM 错误：基数必须是至少 2 且不大于 36 的整数**”。请帮助我摆脱这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-14T10:04:21.247

[我认为这可以帮助你](http://www.mattkruse.com/javascript/date/)

有一个 getDateFromFormat() 函数，你可以稍微调整一下来解决你的问题

或者

```
var sDate = new Date(Date.parse("XXX","ZZZ")); 
```

其中 XXX 是您的日期字符串。ZZZ 是您的 XXX 格式。

IE

如果我想转换“MM/dd/yyyy”格式的字符串“03/20/2012”，那么

```
var sDate = new Date(Date.parse("03/20/2012","MM/dd/yyyy")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T09:55:38.917

为什么要打扰 jQuery？看看[datejs](http://www.datejs.com/category/tutorial/)。

# java - 如何在buttonField黑莓上显示文本标签

> ID：11482724
> 
> 赞同：0
> 
> 时间：2012-07-14T09:48:18.047
> 
> 标签：java, blackberry, blackberry-jde

我是黑莓开发新手。我试图将文本放在按钮上，但它根本不起作用。应该有一个简单的解决方案，但我找不到它。这是我使用的代码

```
public class ProgramListView extends VerticalFieldManager{

    private int _height;
    private int _xPos;

    private ButtonField evaluateButton;

    //height is used to define each item height
    //xPos is used to define each items position on screen
    public ProgramListView(int height, int xPos){
        this._height = height;
        this._xPos = xPos;

        evaluateButton = new ButtonField("Evaluate", ButtonField.CONSUME_CLICK){

            //put methods in here to change the button's position
        };
        super.add(evaluateButton);
    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T09:59:14.900

```
ButtonField btnPreviewTone;
btnPreviewTone = new ButtonField(ButtonField.HIGHLIGHT_SELECT |       ButtonField.CONSUME_CLICK);
btnPreviewTone.setLabel("Preview Ringtone"); 
```

我这样做了，它对我有用。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T12:04:04.200

现在问题已经解决了。解决方案很明显。当我将按钮放在自定义上`VerticalFieldManager`时，在`VerticalFieldManager`子布局方法中我不得不将其中的参数更改为`Display.USE_ALL_WIDTH`. 这解决了问题感谢您的帮助。

# string - 字符串排列秩+数据结构

> ID：11482729
> 
> 赞同：12
> 
> 时间：2012-07-14T09:48:54.407
> 
> 标签：string, algorithm, data-structures, permutation

手头的问题是：

> 给定一个字符串。告诉它在按字典顺序排序的所有排列中的排名。

这个问题可以在数学上尝试，但我想知道是否有其他算法方法来计算它？

此外，如果我们必须按等级存储所有字符串排列，我们如何有效地**生成**它们（以及复杂性是多少）。什么是存储排列的**好数据结构**并且对于检索也是有效的？

编辑

感谢您对排列生成部分的详细回答，有人还可以建议一个好的数据结构吗？我只能想到特里树。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T15:07:17.000

有一个 O(n|Σ|) 算法可以找到长度为 n 的字符串在其排列列表中的排名。这里，Σ 是字母表。

### 算法

每个排在**s**以下的排列都可以*唯一地写成***pcx**形式；在哪里：

*   **p**是**s的适当前缀**
*   **c是排名低于****s中****p**之后出现的字符的字符。并且**c**也是出现在**s**中不包含在**p**中的部分中的字符。
*******   **x**是**s中出现的剩余字符的***任何*排列；即不包括在**p**或**c**中。******

 ******我们可以通过以长度递增的顺序遍历**s的每个前缀来计算每个类中包含的排列，同时保持字符出现在****s**的其余部分的频率以及**x**表示的排列数量。细节留给读者。

这是假设所涉及的算术运算需要恒定时间；它不会；因为所涉及的数字可以有 nlog|Σ| 位数。考虑到这一点，算法将在 O(n ² log|Σ| log(nlog|Σ|)) 中运行。因为我们可以在 O(dlogd) 中对两个 d 位数字进行加减乘除。

### C++ 实现

```
typedef long long int lli;

lli rank(string s){
    int n = s.length();

    vector<lli> factorial(n+1,1);
    for(int i = 1; i <= n; i++)
        factorial[i] = i * factorial[i-1];

    vector<int> freq(26);
    lli den = 1;
    lli ret = 0;
    for(int i = n-1; i >= 0; i--){
        int si = s[i]-'a';
        freq[si]++;
        den *= freq[si];
        for(int c = 0; c < si; c++) 
            if(freq[c] > 0) 
                ret += factorial[n-i-1] / (den / freq[c]);
    }
    return ret + 1;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-14T10:04:07.897

这类似于[快速选择算法](http://en.wikipedia.org/wiki/Selection_algorithm)。在一个未排序的整数数组中，找到某个特定数组元素的索引。分区元素将是给定的字符串。

编辑：

实际上它类似于QuickSort中的**分区方法。**给定的字符串是分区元素。一旦生成了所有排列，找到长度为 k 的字符串的秩的复杂度将是 O(nk)。您可以使用递归生成字符串排列并将它们存储在链表中。您可以将此**链表**传递给分区方法。

这是生成所有字符串排列的java代码：

```
 private static int generateStringPermutations(String name,int currIndex) {

        int sum = 0;

        for(int j=name.length()-1;j>=0;j--) {
            for(int i=j-1;((i<j) && (i>currIndex));i--) {

                String swappedString = swapCharsInString(name,i,j);
                list.add(swappedString);
                //System.out.println(swappedString);
                sum++;
                sum = sum + generateStringPermutations(swappedString,i);
            }
        }
        return sum;

    } 
```

编辑：

生成所有排列的成本很高。如果字符串包含不同的字符，则可以在不生成所有排列的情况下确定排名。[**这是链接**](http://www.careercup.com/question?id=13337667)。

这可以针对有重复字符的情况进行扩展。

而不是 x * (n-1)！这是针对链接中提到的不同情况，

对于重复字符，它将是：

如果有 1 个字符重复两次，

x* (n-1)!/2!

让我们举个例子。对于字符串 abca，组合为：

aabc,aacb,abac,abca,acab,acba,baac,baca, **bcaa** ,caab, **caba** ,cbaa （按排序顺序）

总组合 = 4!/2! = 12

如果我们想找到**'bcaa'的**等级，那么我们知道所有以'a'开头的字符串都在3之前！= 6。

请注意，因为 'a' 是起始字符，所以其余字符是 a,b,c 并且没有重复，所以它是 3!。我们也知道以 'ba' 开头的字符串会在 2 之前！= 2 所以它的**等级是 9**。

另一个例子。如果我们想找到**'caba'**的等级：

所有以 a 开头的字符串都是 before = 6。所有以 b 开头的字符串都是 before = 3!/2! = 3（因为一旦我们选择 b，我们就剩下 a,a,c 并且因为有重复，所以它是 3!/2!。所有以 caa 开头的字符串都在 1 之前

所以最终**排名是 11**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T21:37:10.647

来自[GeeksforGeeks](http://www.geeksforgeeks.org/lexicographic-rank-of-a-string/)：

> 给定一个字符串，找出它在按字典顺序排序的所有排列中的排名。例如，“abc”的等级为 1，“acb”的等级为 2，“cba”的等级为 6。
> 
> 为简单起见，让我们假设字符串不包含任何重复的字符。
> 
> 一种简单的解决方案是将 rank 初始化为 1，按字典顺序生成所有排列。生成排列后，检查生成的排列是否与给定的字符串相同，如果相同，则返回排名，如果不是，则将排名加 1。此解决方案的时间复杂度在最坏情况下将是指数级的。以下是一个有效的解决方案。
> 
> 让给定的字符串为“STRING”。在输入字符串中，'S' 是第一个字符。共有 6 个字符，其中 4 个小于“S”。所以可以有4 * 5！第一个字符小于“S”的较小字符串，如下所示
> 
> RXXXXXXXXXXXNXXXXXGXX XXX
> 
> 现在让我们修复 S' 并找到以 'S' 开头的较小字符串。
> 
> 对 T 重复同样的过程，rank 是 4*5！+ 4 * 4！+…</p>
> 
> 现在修复 T 并对 R 重复相同的过程，秩为 4*5！+ 4 * 4！+ 3 * 3！+…</p>
> 
> 现在修复 R 并为 I 重复相同的过程，等级为 4*5！+ 4 * 4！+ 3 * 3！+ 1*2！+…</p>
> 
> 现在修复 I 并对 N 重复相同的过程，等级为 4*5！+ 4 * 4！+ 3 * 3！+ 1*2！+ 1 * 1！+…</p>
> 
> 现在固定 N 并对 G 重复相同的过程，秩为 4*5！+ 4 * 4 + 3 * 3！+ 1*2！+ 1 * 1！+ 0 * 0！
> 
> 排名 = 4 * 5！+ 4 * 4！+ 3 * 3！+ 1*2！+ 1 * 1！+ 0 * 0！= 597
> 
> 由于rank的值是从1开始的，所以最终的rank = 1 + 597 = 598******

# c# - WPF 组窗口

> ID：11482731
> 
> 赞同：0
> 
> 时间：2012-07-14T09:49:16.907
> 
> 标签：c#, wpf

我有一个 WPF 应用程序，可以在一个窗口中加载实时实时图表，但我最终在我的桌面上打开了 10 多个窗口（与图表一样多的窗口）。

所以我的需要基本上是将所有这些 WPF 窗口分组/嵌入在一个窗口中。

我尝试了[WPF MDI](http://wpfmdi.codeplex.com/)，但我遇到了严重的问题，因为它要求窗口改为用户控件，在这种情况下，我的实时图表显示但保持为空，不刷新也不绘制实时数据。当我将图表控件放在页面而不是窗口中时，行为相同（图表不更新）。这就是为什么我想我现在真的需要坚持使用 Windows。

我欢迎任何简单直接的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T10:18:28.573

您确定要在 WPF 应用程序中使用上世纪的 MDI 吗？我建议切换到其他更便宜且更灵活的内容安排。我会将图表组织在某种可滚动或可滑动的容器中，可能带有某种导航或选项卡工具......如果您的用户真的想在单独的窗口中拥有一个或一些图表，让他们拖动从主容器中取出图表并按需创建单独的窗口（类似于将选项卡拖出 Internet Explorer）。

# android - 如何以编程方式设置微调器的样式？

> ID：11482742
> 
> 赞同：2
> 
> 时间：2012-07-14T09:50:36.653
> 
> 标签：android

我有带有样式选择的微调器（我将微调器样式设置为`strings.xml`），如果我将样式设置为`main.xml`. 但我想知道如何以编程方式设置样式已经在`strings.xml`.

请参阅下面的代码

**主.xml：**

```
 <Spinner
         android:id="@+id/PassengersSpinner1"
         android:layout_width="100dp"
         android:layout_height="40dp"
         android:layout_span="3"
         android:layout_marginTop="6dp" 
         style="@style/SpinnerStyle" /> 
```

**字符串.xml：**

```
 <style
    name="SpinnerStyle" 
    parent="@android:style/Widget.Spinner">     
    <item name="android:background">@android:drawable/btn_default</item>            
 </style> 
```

现在，我想知道如何在没有 的情况下以`strings.xml`编程方式设置它`main.xml`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T12:40:58.023

从我所有的阅读来看，你不能这样做，因为必须在创建视图*之前*设置样式。

如果您在代码中创建视图，则**可以**这样做（从那时起，您可以在创建视图之前设置样式）。

如果你想这样做，[这里](https://stackoverflow.com/q/8369504/1105376)就是一个很好的例子。问题和答案都为您提供了实现目标的方法。

# php - 谷歌允许从指定 IP 或网站进行多少次查询？

> ID：11482747
> 
> 赞同：2
> 
> 时间：2012-07-14T09:51:58.893
> 
> 标签：php, seo

我已经制作了一个 PHP 脚本来计算编号。来自谷歌的给定网站的反向链接。但我的困境是我可以执行多少个查询（因为谷歌对此有限制）？请回答我的问题并尽快给出解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T10:04:01.677

这取决于请求的速度……您可以从单个 ip 发送数千个查询，但您需要像人类一样（慢）执行此操作，而不是像每秒发送 20 个左右查询的机器人一样。

我为自己做了一个类似的脚本，唯一的解决方案是：

*   使用[google search api](https://developers.google.com/custom-search/v1/overview?hl=de#Pricing)，这将花费你一些东西。

或者

*   像你一样刮谷歌，但使用[代理](http://bit.ly/anonymous-proxies)。（这也会让你付出一些代价，我不推荐免费代理，因为它们很慢并且可以改变内容）

或者

*   使用验证码解决服务自动解锁谷歌验证码。

# concurrency - 活动图中的 ArgoUML 信号

> ID：11482750
> 
> 赞同：0
> 
> 时间：2012-07-14T09:52:08.273
> 
> 标签：concurrency, argouml, activity-diagram

我正在制作一个显示模型/视图转换的活动图。我用 ArgoUML 做了很多类图，也想用 ArgoUML 来做。

对于用户输入，我通常会使用输入信号。在 ArgoUML 0.34 中，我无法弄清楚信号是如何工作的。没有输入/输出信号分量。

如何显示诸如用户输入之类的侦听器事件或导致 UI 更新的模型事件？

它应该是这样的：

![在此处输入图像描述](../Images/3197087135b8b57b79ba7ee3678c63e0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T18:27:31.777

有许多元素位于下拉菜单下，而不是直接位于工具栏上。工具栏上 Guard 元素左侧的下拉菜单包含所有事件。默认工具是调用事件，但下面也有一个信号事件。那是你要找的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-18T01:35:43.023

I have the same question. I've been unable to figure out the correct procedure to model input/output signals in ArgoUML.

I've copied the layout from the original post but wasn't able to change the shape of the symbols:

[![enter image description here](../Images/aef4b307eec5215969e7a9ccbeded91a.png)](https://i.stack.imgur.com/2XriQ.png)

# python - 如何用破折号替换所有空格、制表符、换行符、逗号和下划线？

> ID：11482753
> 
> 赞同：3
> 
> 时间：2012-07-14T09:52:26.523
> 
> 标签：python, regex, django

我想编写一个模板标签来用破折号替换空格、制表符、换行符、逗号、下划线，以制作一个 SEO 友好的 URL：

```
re.sub('\s+', '-', str) 
```

这行代码用破折号替换空格，并且：

```
re.sub('(?<=[,.?!\t\n ])+', '-', str) 
```

这行代码应该`?<=[,.?!،`用破折号替换和空格，但事实并非如此。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T09:56:45.603

您是否考虑过使用内置[`slugify`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#slugify)过滤器？

您的第二个表达式的问题是您使用的是积极的后视（`?<=`）。

来自[正则表达式.info](http://www.regular-expressions.info/refadv.html)：

> “零宽度正向后视。如果前瞻内的模式可以匹配到该位置（即该位置的左侧）结束，则匹配该位置。

以下可能是您尝试执行的操作：

```
re.sub('[,.?!\t\n ]+', '-', s) 
```

`,.?!\t\n`这是用单个破折号替换任何字符序列。

# c# - 如何将文件链接/绑定到文件系统上的文件夹

> ID：11482759
> 
> 赞同：0
> 
> 时间：2012-07-14T09:53:12.107
> 
> 标签：c#, file, filesystems, directory

我想将文件绑定到文件夹，以便在移动/复制/删除文件时，该文件夹也会与文件一起自动移动/复制/删除（类似于 html 文件如何链接到包含其资源的文件夹）

目前，此行为仅针对 html 文件及其相应的“htmlFilename_files”文件夹激活。有没有办法为这种行为注册另一个文件扩展名？或者是否有提供类似行为的黑客或功能？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T10:43:21.150

即使对于 HTML，这种行为也是 Explorer 特有的。

问题是文件系统级别没有“复制”操作（移动操作与您在用户模式下看到的不同）。

从技术上讲，您可以创建文件系统过滤器驱动程序并跟踪对某个文件的 RenameOrMove 和 Delete 操作，然后对目录执行一些操作。但这不适用于“读取”+“写入”操作序列的复制，并且您将很难匹配读取和写入（但是，我也可以想到一些使用过滤驱动程序跟踪复制的方法）。您可以自己创建过滤器驱动程序，但这需要 C 编程和特殊知识。您可以自己编写驱动程序（[阅读 MSDN 文章](http://msdn.microsoft.com/en-us/library/windows/hardware/gg462968.aspx)）或使用我们的[CallbackFilter](http://www.eldos.com/cbflt/)产品（它提供了预创建的驱动程序和 .NET API 用于与您的软件集成）。

如果数据文件是您的，则将所有文件保存在一个虚拟容器中是有意义的 - 这可以是 MHT 文件（HTML + 补充文件通过 Internet Explorer 组合成 MHT）、ZIP 存档或 SolFS 存储（SolFS 是我们的虚拟文件系统产品）。然后只有一个文件供用户管理，您的应用程序包含所有文件。

如果您需要让外部应用程序访问容器中的文件，那么可以创建虚拟磁盘——这样的磁盘会暴露容器的内容。使用现已失效的 Dokan 或我们的回调文件系统产品，可以将任何容器的内容公开为虚拟磁盘。

# c#-4.0 - c#中的超时过期错误

> ID：11482760
> 
> 赞同：0
> 
> 时间：2012-07-14T09:53:21.670
> 
> 标签：c#-4.0, c#-3.0

当我尝试通过 c#.net 执行存储过程时出现以下错误

> System.Data.SqlClient.SqlException：超时已过期。在操作完成之前超时时间已过或服务器没有响应。在 Phn.ClsAdminShowContentDB.getProviderContent(Int32 id, String sortby, String sortas, String search) in d:\AspDotNetProjects2010\PrivateHealthNews\App_Code\DataAccess Layer\ClsAdminShowContentDB.cs:line 61 at Phn.clsAdminShowContent.getProviderContent(Int32 id, String sortby ，字符串排序，字符串搜索）在 d:\AspDotNetProjects2010\PrivateHealthNews\App_Code\Business Layer\Logic Layer\clsAdminShowContent.cs: Admin_view_content.Showcontent(String orderby, String strVal) 中的第 33 行在 d:\AspDotNetProjects2010\PrivateHealthNews\Admin\ view_content.aspx.cs：第 117 行

你能告诉我如何解决这个问题吗

# nosql - NOSQL; 这一切是从哪里开始的？

> ID：11482763
> 
> 赞同：0
> 
> 时间：2012-07-14T09:53:49.017
> 
> 标签：nosql

有没有为 NOSQL “开始”的“根源”论文/文章/会议？谁奠定了它的理论基础，何时何地？

把问题说得具体一点：“NOSQL”技术思想的起源是什么？

我想做的是：跟踪它的演变并确定定义这样一个系统的主要功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T09:59:56.530

维基百科：[数据库的演变](http://en.wikipedia.org/wiki/Database#Evolution_of_database_and_DBMS_technology)。

# ios - 任何人在打开 OpenGLES2 和 MultiSampling 的 iOS 4.3.3 上遇到过奇怪的 alpha 混合错误？

> ID：11482764
> 
> 赞同：1
> 
> 时间：2012-07-14T09:53:49.463
> 
> 标签：ios, alpha, blending, multisampling

我在 iOS 4.3.3 上使用 OpenGLES2 启用了多重采样支持，渲染结果很糟糕，好像颜色是 RGB565，而不是 ARGB8888。

问题是，要么关闭多重采样，要么将相同的 ipa 部署到 iOS 5 设备（这表明我确实正确打开了多重采样），不会出现问题，除了关闭多重采样会使其非常难看（这也表示多样本确实适用于大多数情况）。

测试用例很简单，只是用正射投影方式渲染一个贴有纹理的四边形，纹理的颜色格式是RGBA8888。

以前有人遇到过同样的问题吗？这是Apple SDK的错误吗？

顺便说一句，我使用的 SDK 是 Xcode 4.3.2 附带的，ios 部署目标设置为 4.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T08:27:12.143

原来根本原因是 eaglLayer.drawableProperties 设置为 kEAGLColorFormatRGB565。

但是，为什么在打开/关闭多重采样时结果如此不同？

我想知道这是否是由于采样缓冲区（RGBA8）和表面缓冲区（RGB565）的颜色格式不同造成的，然后我将采样缓冲区更改为GL_RGB565，但问题仍然没有解决。

也许这对于 glResolveMultisampleFramebufferAPPLE 没有很好的实现？无论如何，iOS 5 设备上不存在该问题。

# jquery - jQuery自动完成小部件如何将当前值作为参数传递给webservice

> ID：11482765
> 
> 赞同：0
> 
> 时间：2012-07-14T09:53:54.353
> 
> 标签：jquery, jquery-mobile, jquery-autocomplete

我正在尝试在我的 jquery 移动页面中实现 jquery 自动完成小部件以建议城市列表。当用户输入更多 2 个或更多字符时，我想将当前键入的文本传递给 web 服务并返回所有匹配项并将它们显示在选择框中。但是，我不知道如何传递当前键入的文本，结果是为参数“prefixText”传递了一个空字符串，在这种情况下，我的 web 服务只返回所有结果。

每次用户输入新字符时，如何在源调用中更新 prefixText 参数？

```
<div class="demo">
<div class="ui-widget">
    <label for="cities">Cities: </label>
    <input id="cities" type="text" />
</div>
<div class="ui-widget" style="margin-top:2em; font-family:Arial">
    Result:
    <div id="log" style="height: 200px; width: 300px; overflow: auto;" class="ui-widget-content"></div>
</div>
</div><!-- End demo -->

$(function () {
    function log(message) {
        $("<div/>").text(message).prependTo("#log");
        $("#log").scrollTop(0);
    }

    $("#cities").autocomplete({
        source: "http://www.mydomain.com/service.svc/cities/?cid=1&pid=3&prefixText=" + $('#cities').val(),
        minLength: 2,
        select: function (event, ui) {
            log(ui.item ?
            "Selected: " + ui.item.value + " aka " + ui.item.id :
            "Nothing selected, input was " + this.value);*/
        },
        search: function (event, ui) {
            alert($('#cities').val());              
        }

    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T21:04:20.210

您应该通过 将侦听器绑定到您的输入字段`.on(...)`。我给你举了一个例子：http: [//jsfiddle.net/Caavoow/q8RuD/1/](http://jsfiddle.net/Calavoow/q8RuD/1/)

我不太确定 keyup 是否是正确的绑定事件，但它适用于 PC。如果它对您不起作用，您也可以绑定到“更改”。但是它不会更新每个按键。完成后，您可以重新应用自动完成功能。请参阅以下答案： [Jquery：可以动态更改自动完成小部件的来源？](https://stackoverflow.com/questions/3399139/jquery-possible-to-dynamically-change-source-of-autocomplete-widget)

# c++ - 如何在内存数据库中创建多个 SQLite

> ID：11482766
> 
> 赞同：1
> 
> 时间：2012-07-14T09:53:59.750
> 
> 标签：c++, sqlite, in-memory-database

我在我的 C++ 项目的内存数据库中使用 SQLite。在我的项目中，将有多个线程同时读取和写入内存数据库中的 SQLite。但是，不同的线程正在读取和更新不同的表，但我仍然收到 SQLite 数据库表锁定错误。如果我没记错的话，我知道 SQLite 将锁定整个数据库文件，而不是当一位作家编写表时所涉及的表。尽管我不确定，但我认为内存数据库也是如此。所以我实际上想创建多个内存数据库来解决这个问题。所以我的问题是有可能吗？如果可能的话，怎么做？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T11:19:36.820

从整体的角度来看，即使 SQLite 不支持表级或行级锁定（我确信它必须这样做），实现多个数据库只是为了绕过这听起来像是错误的方法。它最终会使您的应用程序变得不必要地复杂，只是为了解决一个技术问题。

例如，您将如何连接多个数据库之间的表？您将如何同步交易？如果您不需要这样做，请问问自己您是否真的需要 RDBMS 的强大功能 - 基于 Boost/STL 的一系列对象/集合是否不能正常工作，并且可能更快？

至于怎么做。一些最好的信息实际上是在 StackOverflow 上。例如，看看[这个答案](https://stackoverflow.com/questions/1680249/how-to-use-sqlite-in-a-multi-threaded-application)。

# asp.net-mvc - 如何将 ASP.NET MVC 区域创建为插件 DLL？

> ID：11482768
> 
> 赞同：17
> 
> 时间：2012-07-14T09:54:03.600
> 
> 标签：asp.net-mvc, asp.net-mvc-3, plugins, razor

这是我想要实现的，我想将 ASP.NET MVC 的区域分离为纯单个 DLL。

1.  博客.DLL
2.  论坛.DLL
3.  FAQ.DLL

它们中的每一个都是单独的 ASP.NET MVC 区域，具有自己的默认 CSHTML 或 ASPX 页面。从长远来看，安装、迁移和维护大量页面（包括资源、javascript 等）是真正的痛苦。因为其中大多数几乎不会改变。

我的最终网站将是这样的。

```
\MvcApplication
   \bin
      \MvcApplication.bin
      \Blog.dll
      \Forums.dll
   \Controllers
      \..
   \Models
      \..
   \Views
      \..
   \Global.asax
   \Web.config 
```

无需添加任何东西，只需删除 Blog.dll，我的应用程序就应该支持 /blog 及其所有页面。如果我想定制一些东西，我可以添加区域，并且只添加 cshtml 页面..

```
\MvcApplication
   \bin
      \MvcApplication.bin
      \Blog.dll
      \Forums.dll
   \Areas
      \Blog
          \Views
              \Shared
                  \BlogLayout.cshtml <-- this will override the look
   \Controllers
      \..
   \Models
      \..
   \Views
      \..
   \Global.asax
   \Web.config 
```

这将有助于重用 ASP.NET 区域插件，只需将 dll 放到 bin 文件夹中即可。但是 web.config 可能需要一些更改，但很可能我们会将配置值保存在数据库中，并且只需要 web.config 中的“实体框架连接字符串”。

我的挑战（问题）

1.  是否可以？它在我看来确实如此，但会有任何反射/许可问题吗？
2.  如何在一个 DLL 中包含 cshtml/aspx 视图？可能是编译版本？我在 codeplex 上看到了几个基于文本模板的视图引擎，但我对如何实际使用它们有点困惑。
3.  以及如何让 ViewEngine 首先检查物理目录文件是否存在，然后将 dll 本身中的 cshtml/aspx 视为资源文件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-14T10:26:51.940

您可以查看[以下文章](http://www.chrisvandesteeg.nl/2010/11/22/embedding-pre-compiled-razor-views-in-your-dll/)，该文章说明了如何使用自定义 VirtualPathProvider 来检索作为资源嵌入到单独程序集中的 Razor 视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T10:35:55.843

也许值得看看 mvccontrib 的便携式区域。自 MVC 2 以来我没有使用过它们，但有人在使用 MVC 3 时遇到了一些问题，发现了以下 SO 问题，并提供了一些可能的解决方案：[ASP.NET MVC 3, Razor Views, and Portable Areas](https://stackoverflow.com/questions/5698219/asp-net-mvc-3-razor-views-and-portable-areas)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T13:31:39.950

[MvcCodeRouting](http://mvccoderouting.codeplex.com/)支持你想要的，以及许多其他很酷的东西。查看[这篇](http://maxtoroq.github.io/2012/02/aspnet-mvc-plugins.html)关于 ASP.NET MVC 插件的文章。

# android - 如何从android的sdcard中的任何特定文件夹中删除最新文件？

> ID：11482771
> 
> 赞同：0
> 
> 时间：2012-07-14T09:54:22.163
> 
> 标签：android, android-camera

我正在创建一个相机应用程序。通过这个我能够捕获图像并将其存储到特定的文件夹中。但是在这个过程中，图像被存储在它的默认位置，比如**sdcard/DCIM/CAMERA**。

文件名是当前日期。当用户单击保存按钮时，会采用当前日期并生成文件名。所以我无法检测到文件名。

**任何人都可以建议我如何访问文件名或如何以编程方式删除最新的图像文件。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T10:25:06.337

我假设您知道如何从要处理的目录中检索**所有**文件作为`File`对象。从那里开始使用此方法检索最后修改的文件：

```
public static File getLastModifiedFile( File[] allFiles ) [
    File result = allFiles[1];
    //you cou also use result = null and uncomment the
    //other if-statement. It's probably the first idea but in that case you might
    //return null while here you'll get an exception which makes debugging easier :)

    for( int i = 0; i < allFiles.length; i++ ) {
        if( result.lastModified() < allFiles[i].lastModified() ) {
        //if( result == null || result.lastModified() < allFiles[i].lastModified() ) {
            result = currentFile;
        }
    ]
    return result;
} 
```

查看[文件文档](http://developer.android.com/reference/java/io/File.html)。在这里您会找到 的解释`lastModified()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T10:14:55.427

我认为最好的方法是用当前基于日期的名称重命名新图像文件。您可以使用此代码重命名文件；立即，保存文件后。

```
File sdcard = Environment.getExternalStorageDirectory();
File from = new File(sdcard,"from.jpg");
File to = new File(sdcard,"to.jpg");
from.renameTo(to); 
```

# php - 如何解析 SOAP 响应

> ID：11482775
> 
> 赞同：0
> 
> 时间：2012-07-14T09:55:12.017
> 
> 标签：php, soap, xml-parsing

我有以下字符串，我想从这个字符串中解析用户名和密码......

```
 $xmlstring='<soap-env:envelope xmlns:ns1="http://back.com/"
            xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
            xmlns:soap-enc="http://schemas.xmlsoap.org/soap/encoding/" 
            xmlns:soap-env="http://schemas.xmlsoap.org/soap/envelope/">
            <soap-env:header></soap-env:header>
            <soap-env:body>
               <ns1:createuserresponse>
                  <username>qqq_d481</username>
                  <password>sdfdssdfds</password>
                  <result>
                     <succeeded>true</succeeded>
                     <errorcode>0</errorcode>
                     <errortext></errortext>
                  </result>
               </ns1:createuserresponse>
            </soap-env:body>
           </soap-env:envelope>'; 
```

请建议。

上面的字符串是 SOAP 响应

但如果我使用：

```
$xmlstring='<soap-env:envelope>
<soap-env:header></soap-env:header>
<soap-env:body>
    <ns1:createuserresponse>
        <username>qqq_d481</username>
        <password>sdfdssdfds</password>
        <result>
            <succeeded>true</succeeded>
            <errorcode>0</errorcode>
            <errortext></errortext>
        </result>
    </ns1:createuserresponse>
</soap-env:body></soap-env:envelope>';

echo $xmltoparse= $xmlstring;
$xml = simplexml_load_string($xmltoparse);
print_r($xml); 
```

然后它工作正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T13:36:17.033

不知道我完全理解你想要做什么，但也许是这样的？

** 未经测试的代码，但可能会有所帮助

```
public function parseLoginResponse($loginResponse)
{
    $match = array(
        'username' => 'username',
        'password' => 'password',
        'succeeded' => 'succeeeded',
        'errortext' => 'errortext'
    );

    $this->_match($match, $loginResponse);

    return array(
        'user' => $this->username,
        'pass' => $this->password,
        'success' => $this->succeeded,
        'error' => $this->errortext
    );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T13:17:21.620

也许您可以使用 PHP5 Soap Client，而不是这里建议的 simple_xml_parser[如何解析 SOAP XML？](https://stackoverflow.com/questions/4194489/how-to-parse-soap-xml)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T08:16:55.697

尝试使用以下 asXML 函数将为您提供一个 xml 格式的字符串

print_r(htmlentities($xmldata->asXML()));

有关更多信息，请查看以下链接

[Simplexml_load_string($string) 返回一个空对象但 $string 包含 xml？下面的代码](https://stackoverflow.com/questions/3165048/simplexml-load-stringstring-returns-an-empty-object-but-string-contains-xml)

# html - 隐藏表格中的列？

> ID：11482789
> 
> 赞同：0
> 
> 时间：2012-07-14T09:57:11.417
> 
> 标签：html, html-table

我正在制作一张桌子：

*   天作为列
*   行数
*   并且表格数据将是空的、样式化的锚点（在点、线和块之间变化）。

当显示器缩小到平板电脑/移动设备尺寸时，我想隐藏除某一天（列）之外的所有时间。

据我了解，因为它很明显是一个表格，我应该使用表格元素。然而隐藏/样式表/列是有问题的。我想避免对每个 td 应用列类，我可能需要支持 ie8，所以 nth-child 不在循环中，而 col 对于我需要做的样式来说太有限了[http://www.quirksmode .org/css/columns.html](http://www.quirksmode.org/css/columns.html)。

所以我的问题是；我应该追求 td 的应用类还是最语义化的选择是什么？

**编辑：**

我想我已经决定使用嵌套的 ul。我确定在语义上它是不正确的，但就可维护性而言，我认为使用表格几乎是不可能的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T11:15:23.820

觉得自己倒霉。只需为列中的所有 td 添加一个类。这是最好的向后兼容解决方案。

在这里，您可以阅读有关Stack Overflow 上“[隐藏第一列的方法”的所有信息。](https://stackoverflow.com/questions/1866907/ways-to-hide-first-column-of-table-through-css)

# android - Android框架修改：添加自定义布局

> ID：11482792
> 
> 赞同：0
> 
> 时间：2012-07-14T09:57:29.807
> 
> 标签：android, layout, frameworks

我正在尝试向框架添加一个新布局，比如 my_layout。

我在这方面取得了部分成功。

我在 xml 中定义了我的布局并将其放入**frameworks/base/core/res/res/layout**

**然后我在frameworks/base/core/res/res/values** **public.xml 和 ids.xml**中提到了 id

 **并在执行完整构建后：

> 制作框架
> 
> 制作更新 API
> 
> 制作

我能够以**android.R.layout.my_layout的身份访问它**

但现在我也想通过 xml 访问它：例如：“ **@android:layout/my_layout”**

我在源代码的哪个地方提到了这个参考？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T10:05:26.683

尝试在布局文件夹中的 my_layout.xml 文件中声明 id。

例如：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/home_layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
    ... 
```

快乐编码:)**

# javascript - 如何访问这个 jQuery 变量？

> ID：11482795
> 
> 赞同：1
> 
> 时间：2012-07-14T09:57:49.643
> 
> 标签：javascript, jquery

我的项目中有以下[代码](http://valums.com/ajax-upload/)，可以帮助我进行一些非常时髦的 AJAX 上传。

```
<script>
    $(function(){
        var uploader = new qq.FileUploader({
            action: "{% url ... %}",
            element: $('#file-uploader')[0],
            multiple: true,
            onComplete: function(id, fileName, responseJSON) {
                if(responseJSON.success) {
                    alert("success!");
                } else {
                    alert("upload failed!");
                }
            },
            onAllComplete: function(uploads) {
                // uploads is an array of maps
                // the maps look like this: {file: FileObject, response: JSONServerResponse}
                alert("All complete!");
            },
            params: {
                'csrf_token': '{{ csrf_token }}',
                'csrf_name': 'csrfmiddlewaretoken',
                'csrf_xname': 'X-CSRFToken',
                'iID': '{{ itemID }}',
                'received': $('letter_received').val(),
                'is_company': $('letter_is_company').val(),
            },
        });
    });
</script> 
```

唯一的问题是我想将额外的 GET 值传递给服务器。我已经尝试了上述方法，但是脚本在页面打开时执行，而不是在值更改时执行。在上面“*发送附加参数*”下的链接中，作者建议在运行时使用以下代码添加附加值：

```
uploader.setParams({
   anotherParam: 'value'
}); 
```

我只是不知道如何访问该`uploader`变量。以以下为例：

```
<button onclick="update_uploader(1,0)">
...
<script>
    function update_uploader(received,is_company) {
        uploader.setParams({
            received: received,
            is_company: is_company
        });
    }
</script> 
```

`uploader`由于范围问题，我无法访问。*[是的，我尝试过在`uploader`外部声明，`$(function(){`但它破坏了上传者:(]*

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T12:14:52.503

更改`var uploader`为`uploader`。这将使您的变量成为全局变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T10:11:18.613

代码中的上传器是一个局部变量，如果你想在 de function() 之外访问这个变量，你必须将 updloader 声明为全局变量（但这几乎从不推荐，但确实超出了这里的范围）。要解决您的问题，只需更改：

```
var uploader = new qq.FileUploader({
        action: "{% url ... %}",
        ....
}); 
```

到

```
window.uploader = new qq.FileUploader({
        action: "{% url ... %}",
        ....
}); 
```

然后上传器将在页面中全局可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T10:54:38.447

您不需要将此代码放在 jQuery $(function(){ 块中。删除代码中的第一行和最后一行应该可以工作。

# javascript - 为什么我的地理编码无法显示地址

> ID：11482800
> 
> 赞同：1
> 
> 时间：2012-07-14T09:58:06.180
> 
> 标签：javascript, google-maps-api-3, geocode, street-address, postal-code

```
var geocoder, map, point, fmtAdd, marker;

function mapLoad() {
geocoder = new google.maps.Geocoder();
var myOptions = {
  zoom: 15,
  mapTypeControl: false, 
  mapTypeId: google.maps.MapTypeId.ROADMAP
}
map = new google.maps.Map(document.getElementById("map"), myOptions);
address="W3 6BY";
if(address){geocoder.geocode({'address':address}, geocodeResult);}
else{alert("Postcode Incorrect");window.close();}
}

function geocodeResult(results, status) {
if (status == 'OK' && results.length > 0) {
    point=results[0].geometry.location;
    map.setCenter(point);
    marker = new google.maps.Marker({map: map, position: point, draggable: true});
    geocoder.geocode({latLng:point},function(results, status){
          if(status == 'OK') {
            if(results.length == 0) {
            fmtAdd = 'None';
            } else {
            fmtAdd = results[0].formatted_address;
            }
          } else {
            fmtAdd = 'Error';
          }
          alert(fmtAdd); // shows the address
        });
          alert(fmtAdd); // says undefined;
} else {
  alert("Error: " + status);
}
}
mapLoad(); 
```

我想显示来自英国用户输入的格式化地址。但我不明白为什么第二个警报未定义？我不是在第一行定义了变量“fmtAdd”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:19:51.190

您的“第二个”警报实际上是您的第一个警报，因为它首先执行（`geocode()`非阻塞 - 它立即返回）。
那时你“定义”`fmtAdd`了，但你没有初始化它。

```
var foo; alert(foo); 
```

警报`undefined`。

* * *

回复评论：

> 我认为它是一个全局变量，一旦地理编码给它一个值，我甚至可以从地理编码函数中检索该值。

这是对的。`geocode()`一旦传递给它的回调函数设置了一个值，该变量就会被初始化。正是这种情况发生了。**在**那个“事件”之后，您也可以在函数之外从全局变量中检索值。

这里的问题是您试图在回调函数完成（甚至被调用）`fmtAddr` **之前检索值。**
这是因为`geocode()`是非阻塞的。这意味着它会立即返回，这就是您将*回调函数*传递给`geocode()`.

## 发生什么了

参考这部分代码：

```
geocoder.geocode({ latLng: point }, function (results, status) {
    if (status == 'OK') {
        if (results.length == 0) {
            fmtAdd = 'None';
        } else {
            fmtAdd = results[0].formatted_address;
        }
    } else {
        fmtAdd = 'Error';
    }
    alert(fmtAdd); // shows the address
});
alert(fmtAdd); // says undefined; 
```

按年代顺序：

1.  你打电话`geocode()`，向它传递一个回调
2.  `geocode()`向谷歌服务器发起异步请求并立即返回
3.  `alert(fmtAdd); // says undefined;`
4.  异步请求完成并调用您的回调函数
5.  你的回调函数集`fmtAddr`

# 你需要做什么

以正确的顺序执行您的应用程序：

*   创建一个函数，它可以对格式化的地址执行任何操作。
*   从您的回调中调用此函数。也就是说，在你设置之后`fmtAdd`

（实际上最好将格式化的地址作为参数直接传递给这个函数，而不使用全局变量）

# html - 使用正则表达式替换结束标签

> ID：11482801
> 
> 赞同：1
> 
> 时间：2012-07-14T09:58:22.070
> 
> 标签：html, regex, tags

我有一些类型的表达式`<h2> text </p>`。

如何搜索`</p>`标签并替换它们以`</h2>`使用正则表达式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T10:32:28.593

使用这个正则表达式

```
<([^>]*)>([^<]*)</[^>]*> 
```

并替换为

```
<$1>$2</$1> 
```

* * *

所以对于示例输入文本

```
<h2> text </p>
<h1> some text </invalidtag> 
```

你的结果是：

```
<h2> text </h2>
<h1> some text </h1> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-14T10:06:55.043

您应该学习javascript 或[HTML5上下文中的](http://www.w3schools.com/html5/att_input_pattern.asp)[正则表达式](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)用法。

# c# - 无法将 lambda 表达式转换为类型“System.Delegate”，因为它不是委托类型

> ID：11482804
> 
> 赞同：4
> 
> 时间：2012-07-14T09:58:38.553
> 
> 标签：c#, wpf, lambda

我正在 VS2008 中开发 WPF 应用程序，并决定重用另一个 WPF 应用程序中的一些代码。但是，我对以下行有一个奇怪的问题：

```
Message.Dispatcher.Invoke(() => { Message.Text = "Looking for orders..."; }); 
```

此代码在原始应用程序中运行良好，但在新应用程序中引发正常的“无法将 lambda 表达式转换为类型 'System.Delegate'，因为它不是委托类型”错误。

我知道我可以将表达式转换为 Action 以使其发挥作用；但我很好奇为什么同一段代码在一个项目中编译和工作，而不是在另一个项目中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T10:26:28.803

在旧项目中的某处可能定义了一个扩展方法来处理转换！

就像是：

```
public static void Invoke(this Dispatcher dispatcher, Action action)
{
    dispatcher.Invoke((Delegate)action);
} 
```

然后，您可以毫无困难地执行以下操作：

```
Message.Dispatcher.Invoke(() => { Message.Text = "Looking for orders..."; }); 
```

更新：
事实证明 .NET Framework 有一组 Dispatcher 的扩展方法，可以处理这些内置的东西。

[http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcherextensions.aspx](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcherextensions.aspx)

# html - HTML5抛开正确使用

> ID：11482805
> 
> 赞同：0
> 
> 时间：2012-07-14T09:58:52.170
> 
> 标签：html

在下面的 HTML 语法中，`meta`div 应该在`header`? 它只包含日期和作者姓名，应该出现在标题下。也是`aside`正确使用还是应该`figure`使用而不是`aside`？

```
<article class="article">
    <header>Heading</header>
    <div class="meta"> date and author info. </div> 
    <div class="wrap">
        <aside class="thumbnail"> <!-- left -->
            <img src="abc.jpg" />
        </aside>        
        <div class="content"> <!-- right -->
            ...
        </div>  
    </div>
</article> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T11:53:55.900

代替

```
<div class="meta"> date and author info. </div> 
```

以下会更好

```
<footer> date and author info. </footer> 
```

[HTML5 规范`<footer>`](http://dev.w3.org/html5/spec/the-footer-element.html#the-footer-element)说：

> footer 元素表示其最近的祖先分段内容或分段根元素的页脚。页脚通常包含有关其部分的信息，例如作者、相关文档的链接、版权数据等。

并且

> 页脚不一定必须出现在部分的末尾...

对于`<aside>`，[HTML5 规范](http://dev.w3.org/html5/spec/the-aside-element.html#the-aside-element)说：

> Aside 元素表示页面的一部分，该部分由与 Aside 元素周围的内容相切相关的内容组成，并且可以被认为与该内容分开。

这有点难以解释，但我会说缩略图是文章内容的一个组成部分，而不是与之相切相关。

事实上，在没有数据的情况下，我根本不认为需要对`<img>`元素进行包装。只需使用：

```
<img src="abc.jpg" class="thumbnail" alt="A B C" /> 
```

如果您需要用于样式的包装器，请使用`<div>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T10:01:59.207

代码之间提到的元标记`<head></head>`...

```
<meta charset="utf-8"> 
```

正确的 html5 代码中的正确过程是......

```
<body><div class="container">
  <header>Header</header>
  <div class="sidebar1">
    <aside>
      <p>Paragraph</p>
      <p>Paragraph</p>
    </aside>
  <!-- end .sidebar1 --></div>
  <article class="content">
    <h1>Instructions</h1>
    <section>
     <p>Paragraph</p>
      <p>Paragraph</p>
      <p>Paragraph</p>
    </section>
  <!-- end .content --></article>

  <footer>Footer</footer>
  <!-- end .container --></div></body> 
```

从中获得帮助...

而旁边是一个新的html5标签，用于页面的左侧或右侧...

CSS 放在一边：

```
aside {
    float: left;
    width: 180px;
    padding: 10px 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T10:03:31.887

如果我在你的位置，我会编写如下代码：

```
<header>Heading</header>
<section class="article">

    <div class="meta"> date and author info. </div> 
    <article class="wrap">
        <div class="thumbnail"> <!-- left -->
            <img src="abc.jpg" />
        </div>        
        <aside class="content"> <!-- right -->
            ...
        </aside>  
    </article>
</section> 
```

# c# - 断开拨号连接的通知

> ID：11482806
> 
> 赞同：1
> 
> 时间：2012-07-14T09:59:03.677
> 
> 标签：c#, .net, c, windows, winapi

我以编程方式创建了一个拨号连接`RASDIAL.exe`，当用户手动断开该连接时，我希望得到通知。

如何以编程方式实现这一目标？请建议我一种方法来做到这一点。

# selenium - 在新窗口中运行 Selenium 测试

> ID：11482808
> 
> 赞同：0
> 
> 时间：2012-07-14T09:59:18.937
> 
> 标签：selenium, selenium-webdriver

我正在尝试使用 Selenium GUI（在 Firefox 中）记录测试。该应用程序使用图像作为超链接，如下所示：

`<a class="mainheading" align="center" target="_blank" href="https://myapps.web.com/prepaid/customer/index.jsp"> <img width="256" height="57" border="0" alt="customer" src="images/customer.jpg"/> </a>`

现在，当我们点击上图时，`a href`标签会打开另一个窗口。新窗口打开后，我需要在该窗口中执行其余测试。问题是当我记录测试时，Selenium GUI 无法理解我正在执行的任何操作都在新窗口中。因此，即使它适当地记录了操作，当我运行预先记录的测试时，我也会收到一个错误，指出找不到元素。我认为发生这种情况是因为 Selenium 仅尝试在原始窗口中查找元素（而不是在由于上述原因打开的新窗口中`a href`）。

我尝试谷歌，但我得到的解决方案与我上面的情况不匹配（即`a href`打开新窗口而不是`window.open`）。有人可以请教吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T20:49:40.940

您可以像这样使用驱动程序窗口句柄：

```
// Get a list of window identities
List<string> windowIdentities = driver.WindowHandles.ToList();

// Switch control over to the other window
driver.SwitchTo().Window(windowIdentities[1]); 
```

这是用 C# 编写的，但如果您用不同的语言编写它，应该不会有太大的不同。让我知道这是否适合您！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T12:56:49.457

在对它执行操作之前，您需要移动到新窗口。为此，如果您使用的是 webdriver，则可以使用 switchTo.window，否则在 ide 中，应该有 selectwindow 移动到适当的窗口，然后在那里继续您的操作。

# sql - 带有别名 Visual Basic 和 SQL 的 Where 子句

> ID：11482809
> 
> 赞同：1
> 
> 时间：2012-07-14T09:59:19.160
> 
> 标签：sql, database, vb.net

我继承了一个 MS 数据库来工作，这个数据库还链接到其他程序，所以我不想更改数据库表本身。我正在使用 Visual Basic 2010，我需要做的是在此表上有一系列过滤器，然后用户输入一个额外的过滤器。

例如，他们输入“50”和范围“5”我需要使用“45 到 55”的范围搜索数据集这是我迄今为止的数据集代码：

```
SELECT [CUTTER NO]
       ,CUTTER_ID
       ,[SIZE-Inches] 
       ,[MM-Across]
       ,[MM-Round]
       ,TYPE 
       ,[LEADING EDGE] 
       ,[CUTTER TYPE]
       ,ACROSS
       ,ROUND
       ,[WIDTH PAPERmm]
       ,[GAPS ACROSSmm]
       ,[GAPS ROUNDmm] 
       ,[Serial Number]
       ,[T G]
       ,Repeat
       ,[Repeat MM] 
       ,[L&G]
       ,Notes
FROM [Cutter List]
WHERE (TYPE <> 'DISCONTINUED') 
  AND (TYPE <> 'SPEC') 
  AND (CUTTER_ID <> NULL) 
  AND ([CUTTER TYPE] = 'MP') 
  AND (TYPE <> 'BUTT')
ORDER BY CUTTER_ID, [MM-Across] 
```

我需要在这个 SQL 中输入的是：

```
WHERE [MM-Across] LIKE @[MM-Across] and [MM-Round] LIKE @[MM-Round] 
```

从我在网上可以看出这是错误的，因为我不能在哪里有 [] 。

我什至尝试过：

```
SELECT        [MM-Across] AS mmacross
FROM            [Cutter List]
WHERE        ('mmacross' LIKE '@mmacross') 
```

它接受但我得到一个不同的错误出现

> “新查询返回的架构与基本查询不同。”

我究竟做错了什么？我不明白最后一个错误或如何避免这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T15:19:43.630

两件事情：

1.  您绝对可以在 WHERE 子句中使用方括号“[..]”，它们只需位于正确的位置（就像其他任何地方一样），并且

2.  您不能在***变量***或***参数***引用中使用方括号，这意味着，与列不同，它们的名称中不能有特殊字符，例如“@MM-Across”中的“-”，因此只需将参数名称更改为“ @MM_Across”。

请注意，**列**名很好，这是您必须更改的**参数**和/或**变量**名称（我不知道这些来自您的代码段）。

所以代替这个：

```
WHERE [MM-Across] LIKE @[MM-Across] and [MM-Round] LIKE @[MM-Round] 
```

试试这个：

```
WHERE [MM-Across] LIKE @MM_Across and [MM-Round] LIKE @MM_Round 
```

当然，您还必须更改声明和传入的参数/变量名称。如果您发布执行此操作的代码，我也可以向您展示如何更改它（尽管现在可能很明显）。

# java - 如何使用 classLoader 动态加载类

> ID：11482810
> 
> 赞同：0
> 
> 时间：2012-07-14T09:59:19.010
> 
> 标签：java, classloader, javassist

我在光盘中有一个 .class 文件。我想使用 javaassist 将它动态加载到 jvm 上。但它抛出异常。以下是我写的代码：

```
ClassPath cp=new ClassClassPath(ExampleImpl.class);
    System.out.println(cp.find(ExampleImpl.class.getName()));

        System.out.println("ExampleImpl.java");
        System.out.println(ExampleImpl.class.getName());
        System.out.println();
    CtClass ctClasz = pool.get("***D:\\ExampleImpl***");
    ctClasz.addInterface(pool.get(MyInterface.class.getName())); 
```

D: 驱动器上有一个 .class 文件，并且它抛出以下异常：

```
 Exception in thread "main" javassist.NotFoundException: D:\ExampleImpl
at javassist.ClassPool.get(ClassPool.java:436)
at javaassist.Demo.main(Demo.java:24) 
```

如何将光盘上的.class文件动态加载到jvm上并执行？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T10:22:30.180

[Java中的动态类加载和重新加载](http://tutorials.jenkov.com/java-reflection/dynamic-class-loading-reloading.html)

确实是一个很棒的学习教程。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T10:10:58.250

这是没有 Eclipse 的东西，我认为这应该可以工作（稍作修改）

```
 Class<?> clazz;
    try {
        clazz = Demo.class.getClassLoader().loadClass("full.package.name.to.MyClass");
    } catch (ClassNotFoundException e) {
        System.out.println("No such class.");
        return;
    }

    MyInterface worker;
    try {
        worker = (MyInterface)clazz.newInstance();
    } catch (InstantiationException | IllegalAccessException e) {
        System.out.println("Error creating actual implementation.");
        return;
    } 
```

# android - 构建Android OS需要多少时间

> ID：11482811
> 
> 赞同：7
> 
> 时间：2012-07-14T09:59:23.503
> 
> 标签：android

我正在尝试为 Galaxy Nexus 构建 Android 操作系统。建造花了6个小时。这是正常的还是与我的机器（MBP Core2Duo）有关还是我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T01:55:36.083

这是一个内存绑定操作。下次编译时尝试使用更多线程

```
make -j8 
```

或者

```
make -j16 
```

凭借 12 GB 的内存，我能够在 40 分钟内编译出 android 源代码。

# image-processing - 如何将二进制代码转换为黑白图像

> ID：11482813
> 
> 赞同：0
> 
> 时间：2012-07-14T09:59:31.307
> 
> 标签：image-processing, binary, image-conversion

是否有任何软件（或在线网站）可用于将二进制代码转换为黑白图像（例如：0 为黑色，1 为白色）。我用谷歌搜索了它，但我没有找到任何软件现在我想自己制作它；我有 c、vb 和 php 方面的经验。是否有一些机构有任何这种语言的脚本（最好是 vb 和 php），有助于将二进制转换为黑白图像。我想制作这样的图像[如何将二维二进制矩阵显示为黑白图？](https://stackoverflow.com/questions/3280705/how-to-convert-2d-binary-matrix-to-black-white-plot)（我没有matlab或有经验）

# php - 需要一些关于照片查看器中数组的 jquery / json 提示

> ID：11482816
> 
> 赞同：2
> 
> 时间：2012-07-14T09:59:50.350
> 
> 标签：php, jquery, json

我正在从头开始制作照片查看器，它工作正常，除了一些事情。

代码如下：

首先，我有当前相册的 ID，并打印属于该照片的所有图像。然后，当用户单击照片时，发生了这种情况：

```
 var loaded = [];
    var albums = [];
        var album_id = ALBUM ID
    var cur_pic = 0;
    var alb_name = ''; 
    $('.photo').click(function(){
    var cover_photo = $(this).attr('id').replace("911","");

        albums[album_id] = [];

        $('#photo_preview .pleft').html('<img src="'+cover_photo+'"/>');
        $('#photo_preview').show();

    $.ajax({
        type: 'POST',
        url: "photo_ajax.php",
        dataType:'json',
        data: 'action=get_info' + $('#aid').val().replace("aid",""),    
        success: function(data){

        loaded[album_id] = true;
        albums[album_id] = data;

    $('#photo_preview .pleft').html('<img src="'+albums[album_id][0]['ImagePath']+'"/>'); // The first photo you click on, will be the first photo to see :)
       $('#photo_preview').show();

            }
        })
//  }       
});

// Loading images and make them visible in the popup...

function loadNextImage(album_id, step){
function loadNextImage(album_id, step){

var next_pic = 0;

        if(step == 0){

            next_pic = 0;

        }else if(step == 'next'){

            next_pic = parseInt(cur_pic, 10)+1;
            cur_pic = next_pic;

        if(next_pic >= albums[album_id].length){
                next_pic = 0;
            }

        }else{

            next_pic = parseInt(cur_pic, 10)-1;

            if(next_pic < 0){
                next_pic = albums[album_id].length - 1;
            }
        }
        cur_pic = next_pic;

        $('#photo_preview .pleft').html('<img src="'+albums[album_id][next_pic]['ImagePath']+'"/>');
    }

// Loading the next image in the JSON array...:

    $(".preview_next").click(function(){

        loadNextImage(album_id, 'next');

    });

// Loading the previous image in the JSON array...:

    $(".preview_prev").click(function(){

        loadNextImage(album_id, 'prev');

    }); 
```

在 photo_ajax.php 中：

```
 $i = 0; $album = array();

    foreach( $aImageInfo as $row ){

            $album[$i] = array();

            $album[$i]['ImageID'] = $row['ImageID'];

            $album[$i]['ImagePath'] = $row['ImagePath'];

            $album[$i]['ImageDate'] = $row['ImageDate'];

            $album[$i]['ImageDescription'] = $row['ImageDescription'];

            $i++;
        }
        echo json_encode($album); 
```

这是有效的，但我现在的问题是：

1.  var cur_pic = 0; 设置为 0，意味着它将开始显示 json 数组中的第一张照片。我需要修复它，以便我可以在数组中找到我刚刚单击的照片的女巫编号，这样它就可以从那个位置开始查看和计数。

2.  这现在只能在专辑中使用。假设我在另一页上可以看到一张照片。如何解决这个问题 - 当我点击它时 - 照片是可见的，我可以获得整个 json 数组，并浏览与我点击的照片属于同一相册的所有图像。

直接的例子。说 Facebook 或 Twitter。你在墙上有一张照片。单击它，您可以浏览整个专辑。

怎么解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:13:53.853

今天早上我有点困惑，但现在答案很清楚了。需要做的第一件事是将图像 ID 发送到打开图像查看器的 jquery 函数中。然后，当我从 AJAX 调用返回结果时，我很简单地这样做：

```
for(var i = 0; i < albums[album_id].length; i++) {

    if(albums[album_id][i]['ImageID'] == imgId){

        var newStep = i;    
    }
} 
```

然后我会在 json 数组中得到正确的位置。然后我可以跟进，并使用以下代码获取正确的照片：

```
albums[album_id][newStep]['ImagePath'] 
```

如果我想在相册外部查看照片时获得相同的结果 - 在单个页面上。解决方案现在应该很清楚了。我同时发送相册的 ID 和照片的 ID。然后我以同样的方式使用 AJAX 并获取 JSON 数组。

并让用户看到照片。用户现在可以在相册中导航而不会看到其他图像，因为它们在数组中。

一点额外的。为了获得这样的导航信息：110 张照片中的第 20 张，我这样做了：

```
$('#PhotoViewerBottomBarContent').html(parseInt(cur_pic+1)+' of '+albums[album_id].length); 
```

我必须 +1，因为数组总是以 0 开头。

所以解决方案很简单:)

# c# - 使用 JavaScript 更新 div 标签而不刷新整个页面

> ID：11482818
> 
> 赞同：1
> 
> 时间：2012-07-14T10:00:09.223
> 
> 标签：c#, javascript, jquery, asp.net, html

我正在使用 HTML 和 JQuery 开发一个可自定义的下拉列表，这个下拉列表包含一个隐藏的 html div 标签和输入文本元素。如果用户单击输入元素，jquery 代码会显示隐藏的 div 标记，并允许他选择嵌入在隐藏 div 标记内的列表项之一。在用户选择他想要的项目后，JavaScript 代码运行并将他选择的项目反映到文本元素。这是html代码：

```
<input type="text" readonly="true" class="reg-content-datacell-textfield" style="cursor:pointer;width:270px;float:left;display:inline-block" id="txtSector" name="txtSector" />
<br />
<div id="ddlSector" style="left:26px;" class="ddlist">
<ul>
    <% 
      MainDatabaseOperationsClass.DatabaseOperations databaseOperations = new MainDatabaseOperationsClass.DatabaseOperations();//db connection class
      string sqlStatement = "select * from Dbtsniper02.dbo.Sectors";//get all database sectors
      System.Data.SqlClient.SqlDataReader sqlDataReader = databaseOperations.getDataFromDBAsSQLDataReader(sqlStatement);//execute sql statement
      while (sqlDataReader.Read())
      {
     %>
     <li class="ddlListSector"><% Response.Write("(" + sqlDataReader[0].ToString() + ") " + sqlDataReader[1].ToString()); %></li>
     <%
       }
     %>
    </ul> 
```

JavaScript 代码：

```
$(document).click(function (event) {
if ($(event.target).parents().index($('#ddlSector')) == -1) {
            if ($('#ddlSector').is(":visible")) {
    $('#ddlSector').slideToggle();
}};
$(document).ready(function () {
$("#txtSector).click(function (e) {
            $("#ddlSector").slideToggle();
            e.stopPropagation();
            return false;
        });
$("#ddlSector").click(function (e) {
            //disallow hide the current drop down list when you click on it direcly
            e.stopPropagation();
            return false;
        });
        $(".ddlListSector").click(function (e) {
            //relect you selection of the drop down list to the parent input text field
            if ($('#ddlSector').is(":visible")) {
                document.getElementById('txtSector').value = '';
                document.getElementById('txtSector').value = $(this).html();
                $('#ddlSector').slideToggle();
            }
        });}); 
```

*现在，我的问题是，如果我有其他类似上述的下拉列表，我如何根据用户从上述下拉列表中的选择更新他们的项目数据。我将通过根据与所需下拉列表关联的文本元素的值更改 sql 语句来做到这一点，但我不知道如果用户选择其中之一，我如何触发事件以仅更新 div 标签内容下拉列表项*

非常感谢，非常感谢您的合作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T11:29:50.163

听起来您想在 ddlListSector 单击事件侦听器中使用 AJAX 调用。创建一个服务器文件，该文件将期望选择的值并返回您想要的值列表（可能使用 sql 命令）。AJAX 可以返回纯文本、JSON 甚至是完整标记，具体取决于您希望前端的参与程度。在 AJAX 调用的成功回调中，更新您拥有的任何其他 drop 的内容。看起来您已经在使用 jQuery，所以我推荐[他们的文档](http://api.jquery.com/jQuery.ajax/)。

# c# - 中继器内的单选按钮总是返回 false

> ID：11482821
> 
> 赞同：3
> 
> 时间：2012-07-14T10:00:51.803
> 
> 标签：c#, asp.net, radio-button, repeater

我有一个带有单选按钮的中继器。

```
 <script type="text/javascript">
    $(document).ready(function () 
{
    $("#test input:radio").attr("name", "yourGroupName");
}); 
</script>
</head>
<body>
<form id="form1" runat="server">
<div>

<div id="test">
 <asp:Repeater runat="server" ID="rep" onitemdatabound="rep_ItemDataBound" 
        onitemcommand="rep_ItemCommand">
<ItemTemplate>   
<asp:RadioButton ID="n"  runat="server" Text='<%# Eval("name") %>'  AccessKey='<%# Eval("id")%>' />   
</ItemTemplate>    
</asp:Repeater>
</div> 
```

我正在使用顶部的 javascript 来修复 .net 中的单选按钮错误。我在页面加载时将一个列表绑定到转发器，并在`(!Page.IsPostback)`其周围加上一个 if。 **编辑：**

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            rep.DataSource = z.Table.ToList();
            rep.DataBind();
        }
    } 
```

然后我有一个按钮，单击该按钮时应该对已选择的单选按钮执行某些操作，这就是现在的问题：

```
 foreach (RepeaterItem i in rep.Items)
        {
            RadioButton erb = i.FindControl("n") as RadioButton;
            if (erb.Checked)
            {
                //do stuff
            }
         } 
```

无论我选择哪个单选按钮，当我单击按钮并调试整个循环时，每个复选框 == false。我正在用代码做更多的事情，但我已经简化了它，因为这是最大的问题。

我已经看到了无数关于这个问题的主题，并且我已经浏览了所有这些主题，但我似乎仍然无法让它发挥作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T10:35:11.093

我认为这完全[取决于 ASP.NET 中的事件序列](http://msdn.microsoft.com/en-us/library/ms972976.aspx)。

尝试将`DataBind`代码放入`Page_Init`过程中，这样单选按钮的状态将在到达`Page_Load`过程时设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T10:27:12.050

请尝试`OnCheckedChanged="RadioButton1_OnCheckedChanged" AutoPostBack="true"` 在您的单选按钮上添加，这将在单击该按钮时触发回发，您将能够找到选中的那个

# google-app-engine - NOSQL“基本操作”

> ID：11482822
> 
> 赞同：0
> 
> 时间：2012-07-14T10:00:58.373
> 
> 标签：google-app-engine, nosql

如果我想为调查性 NOSQL 实现定义一组最小功能，我应该选择哪些？

我喜欢 Google AppEngine API 及其简单的方法（例如，获取类型 X 的所有对象，获取具有属性 Y 的所有对象等），但我想知道是否存在可被视为“所有类似系统预期的调用的基础层” “，一种（便携式？）NOSQL 的基线 API？

这种简单系统是否有指导性的 FOSS 简约实现？我想研究它，看看它如何创建索引、分配存储块、执行查询、分发保存等。

这是出于教育和研究目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T05:03:26.110

那里有大量的“NoSQL”系统，除了“NoSQL”的标签和最基本的操作：插入、更新/替换和删除之外，它们中的许多几乎没有共同之处。存储系统的几乎所有其他属性——索引、数据类型、数据结构、允许的查询等等——因数据库而异。

随着时间的推移，标准可能会出现，但目前你可以确定的关于 NoSQL 数据库的唯一事情是它能够存储数据并再次检索它。

# android - 我想为安卓创建自己的软件键盘

> ID：11482823
> 
> 赞同：0
> 
> 时间：2012-07-14T10:01:00.573
> 
> 标签：android, android-keypad

> **可能重复：**
> [如何为 Android 开发软键盘？](https://stackoverflow.com/questions/3480715/how-to-develop-a-soft-keyboard-for-android)

我想为 android 操作系统创建自己的键盘（软件），谁能指出我正确的方向？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T10:37:25.063

看一下“[软键盘](http://developer.android.com/resources/samples/SoftKeyboard/index.html)”示例。还要寻找输入法。

# matlab - MATLAB中相关矩阵的实现

> ID：11482831
> 
> 赞同：0
> 
> 时间：2012-07-14T10:03:03.237
> 
> 标签：matlab, matrix, correlation

我想在 MATLAB 中实现以下公式，其中 u_i^(k) 表示 i,k 元素。但是，我得到的结果与我手工计算的结果不同……我相信我的 MATLAB 代码有问题。例如，我应该得到：

```
L_ii =

    0.1022         0         0
         0    0.1657         0
         0         0    2.7321

U_ij =

    0.7514    0.3104    0.5823
   -0.6513    0.4901    0.5793
   -0.1055   -0.8145    0.5704

1,1=1-(0.1022*(+0.7514)^2+0.1657*(+0.3104)^2+2.7321*(+0.5823)^2)=-0.000049
2,2=1-(0.1022*(-0.6513)^2+0.1657*(+0.4901)^2+2.7321*(+0.5793)^2)=-0.000015
3,3=1-(0.1022*(-0.1055)^2+0.1657*(-0.8145)^2+2.7321*(+0.5704)^2)=+0.000030 
```

有任何想法吗？？？请先帮我修复 Epsilon（它可能不需要继续 Rho。让我们先修复 Epsilon...）

![在此处输入图像描述](../Images/cde21c1f03b465231bb7f1ac2cd6ff0d.png)

![在此处输入图像描述](../Images/f29821dd4ff78fe94cef55f08b37a24e.png)

编辑：这是一个示例代码：

```
E_squared_ii = ONES_j - diag(L_ii)' * (U_ij'.^ 2) 
```

这是我目前得到的*错误*结果：

```
E_squared_ii =

   1.0e-15 *

   0.444089209850063   0.333066907387547  -0.222044604925031 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T13:50:47.567

如果我使用您的值和代码，我会得到预期的结果：

```
>> L_ii

L_ii =

    0.1022         0         0
         0    0.1657         0
         0         0    2.7321

>> U_ij

U_ij =

    0.7514    0.3104    0.5823
   -0.6513    0.4901    0.5793
   -0.1055   -0.8145    0.5704

>> ONES_j

ONES_j =

     1     1     1

>> E_squared_ii = ONES_j - diag(L_ii)' * (U_ij'.^ 2)

E_squared_ii =

   1.0e-04 *

   -0.4935   -0.1451    0.2985 
```

大概这意味着某些东西不是您认为的价值……

# android - Android 上的 OSGi (Felix)：NoClassDefFoundError: sun/reflect/ConstructorAccessorImpl

> ID：11482832
> 
> 赞同：3
> 
> 时间：2012-07-14T10:03:08.173
> 
> 标签：android, osgi, noclassdeffounderror, apache-felix

我尝试运行一个明显使用 sun.reflect 包的包。

首先是更多背景信息：我在**Android上使用****Apache Felix**。我还添加了 sun.reflect 作为系统额外包。

 **```
String extrapackets =  "sun.reflect; version=\"1.0.0\"";

config.put(Constants.FRAMEWORK_SYSTEMPACKAGES_EXTRA, extrapackets);

config.put("felix.bootdelegation.implicit", "false"); 
```

“sun.reflect”也显示在系统包的导出列表中（使用 headers cmd）。它是由我的捆绑包导入的。它还在导出和导入内容时获得了正确的版本号。

错误消息：

```
java.lang.NoClassDefFoundError: sun/reflect/ConstructorAccessorImpl
at sun.misc.Unsafe.defineClass(Native Method)
at sun.reflect.ClassDefiner.defineClass(ClassDefiner.java:45)
at sun.reflect.MethodAccessorGenerator$1.run(MethodAccessorGenerator.java:381)
at java.security.AccessController.doPrivileged(Native Method)
at sun.reflect.MethodAccessorGenerator.generate(MethodAccessorGenerator.java:377)
at sun.reflect.MethodAccessorGenerator.generateConstructor(MethodAccessorGenerator.java:76)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:30)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-20T06:15:25.337

如果其他人遇到此问题，可能会有更快的解决方案。

在 Sun/Oracle JVM 上运行的 OSGi 中使用反射时，我遇到了这个错误。事实证明[这是一个已知问题](http://bugs.sun.com/view_bug.do?bug_id=6265952)。在 JVM 级别设置的建议修复`-Dsun.reflect.noInflation=true`将导致类不被引用，代价是忽略优化。

我尝试了修复，它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T10:34:33.843

据我所知，sun.* 包是您在计算机上安装的 Oracle JVM 中使用的内部包。另一方面，Android 不使用 Sun（现在是 Oracle）的 JVM 实现。Android 提供了一个类似于 Java SE 的 API，但有自己的 VM 实现（称为 Dalvik VM）。

所以，你不会在 Android 上找到 sun.* 包。您需要获取您使用的包的源代码，并针对 Android 库进行编译（使用 Eclipse 中的 Android 项目，或使用 Ant）。然后，将其重新打包到一个 jar 中，然后您可以在不引用 sun.* 包的情况下部署它。

卡提克

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T12:58:30.620

您是否还在捆绑包中*导入*了包？仅仅将它添加到您的 systembundles.extra 是不够的。**

# wordpress - 媒体不会通过 EC2 实例上传到 Wordpress

> ID：11482834
> 
> 赞同：1
> 
> 时间：2012-07-14T10:03:12.063
> 
> 标签：wordpress, file-upload, amazon-ec2, amazon-web-services

我已经安装了 Wordpress，它可以在 EC2 实例和 RDS 上运行。

我遇到的一个小问题是通过 wp-admin 上的媒体/图像上传器上传图像，它一直在说以下内容：

'“FC1.jpeg”由于错误而无法上传上传的文件无法移动到/var/www/html/wp-content/uploads/2012/06。'

我认为这很可能是该文件夹的权限，因为我昨天使用它并且它有效，但是在我弄乱了 ssh 上的 chmod 命令之后。

我知道 wp-content 文件夹应该是 775，我已经尝试过了，但它不起作用。

有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T14:34:15.830

您使用的权限为所有者提供了完全权限，因此它们应该可以工作。检查所有者和组是谁（在 *nix 系统上使用 ls -l）。

您需要知道网络服务器用户和组。请咨询您的系统管理员（或在 /etc/passwd 中）。在 *nix 系统上，它通常是 ww-data 或 apache。

所有者和组应设置为网络服务器。如果不是，请运行`sudo chown webserverUser:webserverGroup`.

# c - C和linux中的虚拟地址分配

> ID：11482838
> 
> 赞同：0
> 
> 时间：2012-07-14T10:04:03.320
> 
> 标签：c, linux

在下面给出的程序中，两个进程的虚拟地址是相同的。我理解全局变量的原因，但无法理解局部变量。

**运行前如何将虚拟地址分配给局部变量？**

```
int main()
{
  int a;
  if (fork() == 0)
  { 
     a = a + 5; 
    printf(“%d,%d\n”, a, &a); 
  }
  else 
  { 
     a = a –5;
    printf(“%d, %d\n”, a, &a); 
   } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T10:06:18.587

虚拟地址是……虚拟的。这意味着来自两个不同进程（如父进程及其子进程）的相同虚拟地址指向两个不同的物理地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T10:22:37.790

编译时，编译器决定将堆栈或寄存器用于局部变量。在这种情况下，堆栈。

它还决定在（虚拟）地址空间中放置堆栈的位置。

因此，对于这两个进程，堆栈都从相同的（虚拟）地址开始。由于这个特定程序的流程是相当确定的，因此两个进程的堆栈帧看起来完全相同，从而导致“a”在堆栈中的偏移量相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T10:52:39.463

无论`a`fork之前的地址是什么，fork之后肯定是一样的，所以在两个进程中必然是一样的，因为它们的地址`a`都是相同的。在大多数实现中，`a`通过将偏移量（由编译器确定）添加到堆栈指针的内容来获得的地址。堆栈指针的内容被 fork 复制。

# vb.net - 不允许重命名 datagridview 列

> ID：11482840
> 
> 赞同：1
> 
> 时间：2012-07-14T10:04:16.510
> 
> 标签：vb.net

嗨，我将 Datagridview 列命名为“类”，它给了我一条消息“‘类’不是有效的标识符”有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T14:59:44.217

您可以以编程方式完成，而不是在表单设计器中：

```
 Dim dg As New DataGridView
    dg.Columns.Add("Class", "ClassHeader") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T12:23:13.857

我认为您不能在 VB.Net 中将您的列称为“类”，因为它是一个关键字。几乎可以将其命名为其他任何名称。

# asp.net-mvc-3 - 使用元数据的自定义数据注释属性

> ID：11482842
> 
> 赞同：0
> 
> 时间：2012-07-14T10:04:28.150
> 
> 标签：asp.net-mvc-3, c#-4.0, entity-framework-4, metadata

我的要求是为我的项目创建一个自定义数据注释属性。要求是从数据库中验证特定产品的最小/最大长度，这将使用 ProductID 从数据库中检索。我为每个产品都有一个动态页面，其中有两个字段，称为最大长度和最小长度。用户在这两个字段中输入需要从数据库中验证的值。产品表包含所有产品，将通过传递 productId 选择一个。

请提出一些实现上述内容的建议。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T14:16:05.517

这种验证只能在服务器端进行，不能在客户端进行，所以我看到了两个选项。

1.  [远程验证](http://msdn.microsoft.com/en-us/library/gg508808%28v=vs.98%29.aspx)- 当您想要执行验证并通过 ajax 显示错误消息时，您可以使用远程验证。

2.  [IValidatableObject](http://prideparrot.com/blog/archive/2012/4/model_validation_in_asp_net_mvc) - 通过在类中实现此接口，您可以同时进行验证并将所有验证错误消息作为集合返回。通过这种方式，验证将在表单正常提交后进行。

# sql - Delphi中不同区域设置不同格式浮点数

> ID：11482850
> 
> 赞同：3
> 
> 时间：2012-07-14T10:05:29.657
> 
> 标签：sql, delphi, floating-point, format, comma

我想使用 BDE Paradox 在 Delphi 中插入 SQL 语句，它是

```
value_a := 0,123;
value_b := 0,234;
value_c := 0,345;
insert into mst_value values (value_a, value_b, value_c); 
```

它在调试后显示类似'invalid SQL parameter'的错误，它表明sql完整的语法如

```
insert into mst_value values (0,123, 0,234, 0,345) 
```

十进制中应该是点但逗号，所以我使用`formatfloat('#.###`，value_a）格式化它，...`它仍然使用逗号，将控制面板上的区域设置更改为英文后，SQL参数正确，这是因为那里的货币或数字格式就像 123,123,123.00，所以，我如何格式化十进制数字，但来自另一个国家，例如印度尼西亚，格式像 123,123,123,123.00 而不是 123.123.123,00。之前谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T10:15:39.683

试试这样，在调用 formatFloat 函数之前，可以为 Delphi 的变量[ThousandsSeparator](http://www.delphibasics.co.uk/RTL.asp?Name=ThousandSeparator)和[DecimalSeparator](http://www.delphibasics.co.uk/RTL.asp?Name=DecimalSeparator)设置合适的值：

```
FormatFloat( "$##.000", value_a ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T14:04:50.170

你怎么做这样的字符串？"插入 mst_value 值 (0,123, 0,234, 0,345)"

它正在寻求 SQL 注入，这将允许任何人闯入您的程序。

改用 TQuery.Params，并进行严格的数据类型检查。

[在http://issuetracker.delphi-jedi.org/view.php?id=5916](http://issuetracker.delphi-jedi.org/view.php?id=5916)的评论中对此进行更多推理

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T23:24:00.893

我同意 Arioch 的意见。您应该改用参数化查询。这将使数据库引擎为您处理格式，例如：

```
value_a := 0,123; 
value_b := 0,234; 
value_c := 0,345; 

Query.SQL.Text := 'insert into mst_value values (:value_a, :value_b, :value_c)'; 
Query.ParamByName('value_a').AsFloat := value_a;
Query.ParamByName('value_a').AsFloat := value_b;
Query.ParamByName('value_a').AsFloat := value_c;
Query.ExecSQL; 
```

# java - 用于查找具有不同程度特异性的对象的算法

> ID：11482855
> 
> 赞同：0
> 
> 时间：2012-07-14T10:06:51.870
> 
> 标签：java, search

我有大量对象以树状结构排列（树上的每个节点都有父节点和子节点，从一个主节点开始，到许多子节点结束）。每个对象都有自己的字符串形式的 ID，并且有许多重复的 ID，但没有重复的 ID 会在同一个父对象下分开。例子：

家长甲：

*   孩子A
*   孩子B
*   儿童D

家长乙：

*   孩子A
*   儿童C
*   儿童D

这棵树也很深。

我需要一种查找像这样工作的对象的方法（示例基于上一个列表）：

示例 1：

1.  带有字符串 {"childB"} 的 ArrayList 被传递给算法
2.  没有 ID 为“childB”的重复节点，因此返回对 childB 的引用

示例 2：

1.  带有字符串 {"parentA", "childD"} 的 ArrayList 被传递给算法
2.  没有 ID 为“childD”的重复节点和 ID 为“parentA”的父节点，因此返回对给定节点的引用

示例 3：

1.  带有字符串 {"childD"} 的 ArrayList 被传递给算法
2.  存在 ID 为“childD”的重复节点，因此算法要求提供更多信息（父节点的名称）

请记住，可能有许多级别的特异性，例如 {"nodeA", "nodeD", "nodeX", "nodeD"} 所以需要某种循环，或者可能需要递归方法。

那么，有什么想法吗？

更新：我创建了一个深度优先搜索算法来遍历树上的每个节点，并且效果很好。该算法以一个 ArrayList 的形式返回所有节点我现在需要的只是一种基于不同程度的特异性选择一个节点的方法。任何人都可以帮忙吗？上面三个例子说明了我需要什么。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-14T10:19:09.597

[深度优先搜索](https://en.wikipedia.org/wiki/Depth-first_search)算法可能对你有帮助！！！

# python - 如何在 run() 执行之前强制结构连接到远程主机？

> ID：11482859
> 
> 赞同：0
> 
> 时间：2012-07-14T10:07:09.110
> 
> 标签：python, fabric

我正在使用fabric 编写我的rsync 包装器，变量env.host_string 将由execute() 设置以运行任务。要获取 env.host_string，我首先运行（'pwd'），然后运行 ​​rsync。

是否可以在某个检查点到达之前确保用户设置 env.hosts，例如条件 src == env.host_string ？

```
from fabric.api import run, env, task, abort
from string import Template

@task
def sync_to_same_dir(src, path):
    env.host_string
    cmd_template = Template("""rsync --dry-run -e ssh -avr $user@$src_host:$path/ $path/""")
    if path.endswith("/"):
        path = path[:-1]

    run("pwd") # it's a work around
    if src == env.host_string:
        abort("cannot rysnc to the same host")
    cmd = cmd_template.substitute(path=path, user=env.user, src_host=src)
    run(cmd) 
```

* * *

我从fabric的源代码中找到了答案。有一个简单的想法：如何根据需要**运行**检查主机？

```
@needs_host
def put(local_path=None, remote_path=None, use_sudo=False,
    mirror_local_mode=False, mode=None):
    """
    Upload one or more files to a remote host.
    """ 
```

当用户没有分配任何主机时，我会跟踪需求主机，它会提示询问主机：

```
No hosts found. Please specify (single) host string for connection: 
```

我们可以将任务重写为：

```
from fabric.network import needs_host

@task
@needs_host
def the_task_needs_host(): pass 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T20:24:20.177

你想做什么？一个任务知道它正在使用什么主机而没有任何其他结构调用：

```
fab -f host-test.py foo
[98.98.98.98] Executing task 'foo'
98.98.98.98
98.98.98.98

Done. 
```

这是脚本，例如：

```
#!/user/bin/env python

from fabric.api import *

env.user = 'mgoose'

@task
@hosts("98.98.98.98")
def foo():
    print(env.host)
    print(env.host_string) 
```

所以你不需要做任何特别的事情来知道你的任务在哪个主机上。

# iphone - 如何将图像发布到 Facebook 墙上？

> ID：11482863
> 
> 赞同：0
> 
> 时间：2012-07-14T10:07:47.493
> 
> 标签：iphone, ios, xcode, fb-graph

使用这个 Tutorail 我成功登录 Facebook [http://www.raywenderlich.com/1626/how-to-post-to-a-users-wall-upload-photos-and-add-a-like-button-from- your-iphone-app](http://www.raywenderlich.com/1626/how-to-post-to-a-users-wall-upload-photos-and-add-a-like-button-from-your-iphone-app) 但我没有使用 facebook for iOS 的经验。

```
- (IBAction)rateTapped:(id)sender {
     NSURL *url = [NSURL URLWithString:@"YOur Image url"];
     NSData *data = [NSData dataWithContentsOfURL:url];
     UIImage *img  = [[UIImage alloc] initWithData:data];
     [variables setObject:img forKey:@"picture"];
     FbGraphResponse *fb_graph_response = [fbGraph doGraphPost:@"/me/photos" 
    withPostVars:variables];    
  } 
```

但是在这里我很困惑我们如何传递图像 url，bcz 我的图像在同一页面上，而且当我使用这段代码时，它给了我以下四个错误。

![在此处输入图像描述](../Images/01b94f83d62b6b02692df3c207fb257f.png)

我没有运气。怎么了？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T10:37:12.800

请参阅这篇文章 -[如何从当前应用程序通过邮件、推特和脸书分享或发布？](https://stackoverflow.com/questions/10860652/how-to-share-or-post-by-mail-from-current-app/10862865#10862865) 在此您将了解如何分享`UIImage`到**Facebook**、**Twitter**和**电子邮件**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T10:24:52.970

**第一个错误是由于一个 **未声明的变量****。** 您**没有将 Facebook sdk 添加**到您的项目中，这就是您收到**2,3 & 4th 错误**的原因。为了在您的应用程序中使用 Facebook 功能，您需要将 Facebook API 集成到您的项目中。最新的 Facebook API 称为 Graph API。如需进一步参考，请访问[http://developers.facebook.com/docs/reference/api/](http://developers.facebook.com/docs/reference/api/)

如何将 Facebook sdk 集成到您的项目中： [http ://www.raywenderlich.com/77/how-to-post-on-facebook-with-your-iphone-app](http://www.raywenderlich.com/77/how-to-post-on-facebook-with-your-iphone-app)

# java - Eclipse：Android 应用程序中的大量错误

> ID：11482870
> 
> 赞同：0
> 
> 时间：2012-07-14T10:08:46.913
> 
> 标签：java, android, eclipse

我通过 SVN 将我当前的 Android 项目导入到我的（Mac OS）设备上的 Eclipse。代码显示正常，但 Ecipse 显示了大量错误（见屏幕截图），这些错误并没有出现在我第一次使用的设备上 - 我对 Eclipse 不是很有经验，但我猜有些库没有导入？我安装了当前的 JRE(1.7)、Eclipse、Android 插件，它也安装了当前的 Android SDK (4.1)。有什么线索吗？！

![错误显示如下](../Images/2e537f6897ec3f3a453b00fd4432ab58.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T10:12:27.127

1.  **右键单击项目-> Android 工具-> 修复项目属性**
2.  转到**菜单 -> 项目 -> 清洁**

为此，请转到每个 java 文件导入所有必需的包或尝试`CTRL + SHIFT + O`

然后解决`RES`文件夹中的所有错误。

然后它会`R.java`为你生成

然后`import yourpakagename.R;`在需要的地方。

消除`import android.R;`

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T10:23:20.597

将 sdk 路径放在**Window->Preference->android**中。

![在此处输入图像描述](../Images/9b8025a5caf2906e8c0f7d0c704684c8.png) 然后点击应用。如果你已经这样做了。然后右键单击项目并转到**Properties->android->select android version**

# ruby - 如何用红宝石字符串中的单个反斜杠替换字符串中的双反斜杠

> ID：11482871
> 
> 赞同：0
> 
> 时间：2012-07-14T10:09:53.180
> 
> 标签：ruby, string

如何用单个反斜杠替换字符串中的双反斜杠？

我试图用 来做到这一点`"\\a\\b\\c".gsub!("\\\\","\\")`，但这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:58:07.173

[在红宝石字符串中，反斜杠是开始“转义序列”的特殊第一个字符](http://en.wikibooks.org/wiki/Ruby_Programming/Strings "字符串")，因此：

`\\ - means single backslash`

为了更好地理解这个例子可能会有所帮助：

```
 >> s = "\\ha"
  => "\\ha"
  >> s.split(//)
  => ["\\", "h", "a"] 
```

如您所见，您只有 3 个字符，第一个是单个反斜杠，由转义序列表示`\\`

### 现在我们用双反斜杠替换单反斜杠

```
 >> s.gsub!("\\","\\\\\\")
   => "\\\\ha"
   >> s.split(//)
   => ["\\", "\\", "h", "a"] 
```

我们的字符串现在是 4 个字符，第一个和第二个是反斜杠。

### 现在我们通过用单个反斜杠替换双反斜杠来回到原始字符串

```
 >> s.gsub!("\\\\","\\")
   => "\\ha" 
   >> s.split(//)
   => ["\\", "h", "a"] 
```

上面的示例使用以下测试：ruby 1.8.7，irb 0.9.5

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T10:16:36.460

疯狂的猜测，因为我对红宝石一无所知：

可能是反斜杠在字符串中具有特殊含义吗？试试这个：

```
"\a\b\c".gsub!("\\\\","\\") 
```

# ruby - 使用 nokogiri 获取两个标签之间的文本

> ID：11482874
> 
> 赞同：1
> 
> 时间：2012-07-14T10:10:03.663
> 
> 标签：ruby, nokogiri

我的 HTML 结构是

```
<div class="line">
    <h2>Header</h2>
    <h3>Mailing Address</h3>
    2349 Glorem ipsun lorem ipsum  CA 95833<br>
    <br>    

    Phone: 111-111-2111&nbsp;&nbsp;&nbsp;&nbsp;Fax: 111-511-1111<br>
    <a onfocus="blur()" target="_blank&quot;" href="">some text</a><br>
    <a onfocus="blur()" target="_blank" href="">some address</a><br>
    <div><p></p></div>      

    <h3>Contact(s)</h3>
</div> 
```

HTML 页面包含几个`<div class=line></div>`元素。对于每个 div，我需要在包含其他数据的数组中提取**电话和传真**。我尝试使用

```
doc.css("div#ctl00_cphContent_divBrowseByMember").each do |div|
  div.css("div.line").each do |line|
    line.xpath('//text()[preceding-sibling::br and following-sibling::a]').text.strip
  end
end 
```

它不返回任何内容并返回超时错误。如果我尝试 `line.xpath('//text()[preceding-sibling::br and following-sibling::a]')[0].text.strip` 为所有其他 div 返回相同的电话和传真。请提出任何其他对我有帮助的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T10:39:47.757

简单的方法：

```
phone, fax = line.text.scan /\d{3}-\d{3}-\d{4}/ 
```

# iphone - TestFlight 对我们有何帮助

> ID：11482876
> 
> 赞同：0
> 
> 时间：2012-07-14T10:10:44.947
> 
> 标签：iphone, ios, ipa, testflight

我的客户希望我使用 TestFlight 发送文件。但是我是 TestFlight 的新手，我在 TestFlight 中尽可能多地阅读，并且还堆叠了有关 TestFlight 的流程问题。任何人都可以告诉我 TestFlight 的功能。它对我和客户有什么用处？并且可以在 TestFlight 的帮助下制作没有开发人员证书的构建 .ipa 文件（我知道我应该对此投反对票），但我必须很短的时间才能找到答案。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T10:22:16.053

TestFlight 让您可以更轻松地将应用分发给 Beta 测试人员并从他们那里收集反馈。您还可以在您的应用程序中使用他们的 SDK 来放置标记，以查看您的代码或应用程序的某些部分是否被使用。

它不允许您在没有证书的情况下构建应用程序。您需要构建一个 Ad-hoc 发行版，并且您的 beta 测试人员需要使用 TestFlight 帐户注册，并且他们的设备必须使用您的开发人员帐户注册。

# java - 为什么 ical4j 需要这么长时间才能构建？

> ID：11482881
> 
> 赞同：0
> 
> 时间：2012-07-14T10:11:45.757
> 
> 标签：java, android, icalendar, ical4j

我正在尝试在 android 中使用 ical4j 解析谷歌日历 ical (.ics) 文件。但是从输入流构建日历需要 40 多秒。

```
calendar = builder.build(fis); 
```

ical 文件大小只有 150KB。此外，当我使用相同的代码并在 PC 中运行它时，日历的构建会在不到一秒的时间内完成。我还注意到 LogCat 中有大量垃圾收集。谁能帮我？

```
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    TextView = (TextView)findViewById(R.id.Hello_World);

    new Download().execute();

  }

 final class Download extends AsyncTask<Void, Void, Void> {

        @Override
        protected void onPreExecute(){

            TextView.setText("Downloading");

        }

        @Override
        protected Void doInBackground(Void... arg0) {

             try {
                    URL url = new URL(URL);
                    HttpURLConnection c = (HttpURLConnection) url.openConnection();
                    c.setRequestMethod("GET");
                    c.connect();

                    FileOutputStream fos = openFileOutput(fileName, MainActivity.MODE_PRIVATE);

                    InputStream is = c.getInputStream();

                    byte[] buffer = new byte[1024];
                    int length = 0;
                    while ((length = is.read(buffer)) != -1) {
                        fos.write(buffer, 0, length);
                    }
                    fos.close();
                    is.close();
                } catch (IOException e) {
                    Log.d("log_tag", "Error: " + e);
                }

            return null;
        }

        @Override
        protected void onPostExecute(Void Result) {

            TextView.setText("Saved...Loading Data");
             new Loadicaldata().execute();

        }

    }

final class Loadicaldata extends AsyncTask<Void, Void, Void> {

    String Summary = null;

    @Override
    protected Void doInBackground(Void... arg0) {

        FileInputStream fis = null;
        try {
            fis =  openFileInput(fileName);
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        CompatibilityHints.setHintEnabled(CompatibilityHints.KEY_RELAXED_UNFOLDING, true);
        CompatibilityHints.setHintEnabled(CompatibilityHints.KEY_RELAXED_VALIDATION, true);
        CalendarBuilder builder = new CalendarBuilder();

        Calendar calendar = null;   

        try {
            calendar = builder.build(fis);

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ParserException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        b.append(calendar.getProperty("X-WR-CALNAME").getValue());

        ComponentList events = calendar.getComponents(Component.VEVENT);

        VEvent Event = (VEvent) events.get(0);

        Summary = Event.getDescription().getValue();

        /*
        for (Object event : calendar.getComponents(Component.VEVENT)) {
            if (((VEvent) event).getSummary() != null) {
                b.append("\n\n");
                b.append(((VEvent) event).getSummary().getValue());
                b.append(": ");
                b.append(((VEvent) event).getStartDate().getDate());

            }
        }
       */

        return null;
    }

    @Override
    protected void onPostExecute(Void Result) {

        TextView.setText(Summary);

    }

} 
```

LogCat： [http ://dl.dropbox.com/u/35866688/LogCat.txt](http://dl.dropbox.com/u/35866688/LogCat.txt)

此外，我可以安全地排除 IO 错误的可能性，因为 Calendar.load 方法也需要很长时间。

如果有人感兴趣，这是 ical 文件。 [https://www.google.com/calendar/ical/m0es4hhj4g9d69ibak88tvoup0%40group.calendar.google.com/public/basic.ics](https://www.google.com/calendar/ical/m0es4hhj4g9d69ibak88tvoup0%40group.calendar.google.com/public/basic.ics)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T10:27:44.637

一种可能性是您正在从`doInBackground`方法中的无缓冲输入流中读取数据。如果该`CalendarBuilder.build(...)`方法一次读取一个字节，这将产生大量系统调用，并显着减慢速度。

第二种可能性是问题是由垃圾收集引起的。您对此无能为力，但增加堆大小可能*会*有所帮助。（导致 GC 开销过大的一个原因是在堆接近满的情况下运行。如果在每个 GC 周期中无法回收大量内存，GC 的效率就会严重下降......）

# c# - MouseInput 在循环开始时将鼠标向左移动

> ID：11482882
> 
> 赞同：0
> 
> 时间：2012-07-14T10:11:47.613
> 
> 标签：c#

当我这样做时；

```
Point startpoint = Cursor.Position;
startpoint.Y -= 1;
DoMouse(MOUSEEVENTF.MOVE | MOUSEEVENTF.ABSOLUTE, startpoint); 
```

鼠标不仅向上移动.. 它也向左移动一点。但是如果我在一个循环中执行它，它只会在第一次迭代时向左移动。

这是一个完全工作的控制台程序，它提出了这个问题。你必须`Add Reference -> .NET -> System.Drawing`并`System.Windows.Forms`让它编译。

启动程序时键入`start`将鼠标向上移动 5 像素*一次*或键入`start X`（X 是数字）将鼠标向上移动 5 像素 X 次。你会看到每一个新的循环鼠标都会向左移动一点；它根本不应该那样做。

```
using System;
using System.Text.RegularExpressions;
using System.Threading;
using System.Drawing;
using System.Windows.Forms;
using System.Runtime.InteropServices;

namespace mousemove_temp
{
    class Program
    {
        //Capture user input
        static void Main(string[] args)
        {
            while (true)
            {
                string s = Console.ReadLine();

                switch (s)
                {
                    case("start"):
                        moveMouseTest(1);
                        break;
                    default:
                        //Get # of times to run function
                        Match match = Regex.Match(s, @"start (.+)", RegexOptions.IgnoreCase);
                        if (!match.Success || match.Groups.Count != 2) break;

                        //Copy # to int
                        int amnt = -1;
                        try
                        {
                            amnt = Int32.Parse(match.Groups[1].Value);
                        }
                        catch (Exception) { break; } //fail
                        if (amnt <= -1) break; //fail
                        moveMouseTest(amnt); //aaaawww yeah

                        break;
                }

                Thread.Sleep(10);
            }
        }

        //Move the mouse
        static void moveMouseTest(int repeat)
        {
            int countrepeat = 0;

            //Loop entire function X times
            while (countrepeat < repeat)
            {
                Point startpoint = Cursor.Position;
                int amount = 5; //Move 5 pixels
                int counter = 0;

                //Move 1 pixel up each loop
                while (counter < amount)
                {
                    startpoint.Y -= 1;
                    DoMouse(MOUSEEVENTF.MOVE | MOUSEEVENTF.ABSOLUTE, startpoint);

                    counter++;
                    Thread.Sleep(100); //Slow down so you can see it only jumps left the first time
                }

                countrepeat++;
                Console.WriteLine(String.Format("{0}/{1}", countrepeat, repeat));
                Thread.Sleep(1000); //Wait a second before next loop
            }
        }

        /*
         * Function stuff 
        */

        //Control the Mouse
        private static object mouselock = new object(); //For use with multithreading
        public static void DoMouse(MOUSEEVENTF flags, Point newPoint)
        {
            lock (mouselock)
            {
                INPUT input = new INPUT();
                MOUSEINPUT mi = new MOUSEINPUT();
                input.dwType = InputType.Mouse;
                input.mi = mi;
                input.mi.dwExtraInfo = IntPtr.Zero;
                // mouse co-ords: top left is (0,0), bottom right is (65535, 65535)
                // convert screen co-ord to mouse co-ords...
                input.mi.dx = newPoint.X * (65535 / Screen.PrimaryScreen.Bounds.Width);
                input.mi.dy = newPoint.Y * (65535 / Screen.PrimaryScreen.Bounds.Height);
                input.mi.time = 0;
                input.mi.mouseData = 0;
                // can be used for WHEEL event see msdn
                input.mi.dwFlags = flags;
                int cbSize = Marshal.SizeOf(typeof(INPUT));
                int result = SendInput(1, ref input, cbSize);
                if (result == 0)
                    Console.WriteLine("DoMouse Error:" + Marshal.GetLastWin32Error());
            }
        }

        /*
         * Native Methods 
        */

        [DllImport("user32.dll", SetLastError = true)]
        static internal extern Int32 SendInput(Int32 cInputs, ref INPUT pInputs, Int32 cbSize);

        [DllImport("user32.dll")]
        public static extern bool GetAsyncKeyState(Int32 vKey);

        [StructLayout(LayoutKind.Explicit, Pack = 1, Size = 28)]
        internal struct INPUT
        {
            [FieldOffset(0)]
            public InputType dwType;
            [FieldOffset(4)]
            public MOUSEINPUT mi;
            [FieldOffset(4)]
            public KEYBDINPUT ki;
            [FieldOffset(4)]
            public HARDWAREINPUT hi;
        }

        [StructLayout(LayoutKind.Sequential, Pack = 1)]
        internal struct MOUSEINPUT
        {
            public Int32 dx;
            public Int32 dy;
            public Int32 mouseData;
            public MOUSEEVENTF dwFlags;
            public Int32 time;
            public IntPtr dwExtraInfo;
        }

        [StructLayout(LayoutKind.Sequential, Pack = 1)]
        internal struct KEYBDINPUT
        {
            public Int16 wVk;
            public Int16 wScan;
            public KEYEVENTF dwFlags;
            public Int32 time;
            public IntPtr dwExtraInfo;
        }

        [StructLayout(LayoutKind.Sequential, Pack = 1)]
        internal struct HARDWAREINPUT
        {
            public Int32 uMsg;
            public Int16 wParamL;
            public Int16 wParamH;
        }

        internal enum InputType : int
        {
            Mouse = 0,
            Keyboard = 1,
            Hardware = 2
        }

        [Flags()]
        internal enum MOUSEEVENTF : int
        {
            MOVE = 0x1,
            LEFTDOWN = 0x2,
            LEFTUP = 0x4,
            RIGHTDOWN = 0x8,
            RIGHTUP = 0x10,
            MIDDLEDOWN = 0x20,
            MIDDLEUP = 0x40,
            XDOWN = 0x80,
            XUP = 0x100,
            VIRTUALDESK = 0x400,
            WHEEL = 0x800,
            ABSOLUTE = 0x8000
        }

        [Flags()]
        internal enum KEYEVENTF : int
        {
            EXTENDEDKEY = 1,
            KEYUP = 2,
            UNICODE = 4,
            SCANCODE = 8
        }
    }
} 
```

谁能告诉我出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T10:51:56.143

你做错了数学，结果是舍入错误。

例如，65535 / 1920 = 34.1328125。但是截断（因为您将 int 除以 int）得到 34。因此，如果在 1920x1080 的屏幕上，您将鼠标一直放在右侧，您将得到 1920 * (65535 / 1920) = 1920 * 34 = 65280。

这将为您带来更好的结果：

```
 input.mi.dx = (int)((65535.0f * (newPoint.X / (float)Screen.PrimaryScreen.Bounds.Width)) + 0.5f);
            input.mi.dy = (int)((65535.0f * (newPoint.Y / (float)Screen.PrimaryScreen.Bounds.Height)) + 0.5f); 
```

虽然如果你决定使用 P/Invoke 而不是仅仅说

```
Cursor.Position = new Point(newPoint.X, newPoint.Y); 
```

那么你真的应该使用 SetCursorPos - [http://msdn.microsoft.com/en-us/library/windows/desktop/ms648394(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648394(v=vs.85).aspx) - 因为它（连同 GetCursorPos）是 . NET 用于通过 Cursor.Position 获取和设置光标位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T10:22:51.397

对您的项目而言，最简单的方法是在 codeplex 上使用有用的开源库[Windows 输入模拟器（C# SendInput Wrapper - 模拟键盘和鼠标） 。](http://inputsimulator.codeplex.com/)用它！

# jquery-selectors - 在 Jquery 中选择多个类

> ID：11482886
> 
> 赞同：0
> 
> 时间：2012-07-14T10:12:17.967
> 
> 标签：jquery-selectors

我在同一问题上看到了一些帖子，但希望进一步澄清，因为我无法让这些答案中的任何一个起作用，特别是因为我无法从 Jquery 文档中选择答案。

我想组合一些类以方便级联适当的样式。我可以简单地在一个类中复制样式，但我认为那将是不好的做法。

```
<div class="left_Item drop_Down" id="col_1">some stuff</div>

$(".left_Item, .drop_Down#col_1").whatever....; 
// matches every occurrence of class left_Item with the single occurrence of    //drop_Down#col_1   ... this tallies with the multiple selector documentation.

$("#col_1").whatever....;
//obviously does match as the selector is only looking at the id.
//however
$(".drop_Down#col_1").whatever....; 
//does not match  Does this imply that the classes cannot be matched separately? So....
$(".left_Item.drop_Down#col_1").whatever....;
// various posts on so state that this should match it does not for me. Nor does
$(".left_Item .drop_Down#col_1").whatever....;

$(".left_Item").filter(".drop_Down#col_1).whatever....;
// various posts on so state that this should match also but it does not for me. 
```

所以首先我假设我正在使用多个类做正确的事情。如果不是，我将停止尝试使这项工作！

其次，请有人给出正确的 jquery 语法来匹配具有多个类的元素。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T10:16:51.760

语法如下（[对于 CSS 或 jQuery](http://www.w3.org/TR/CSS2/selector.html#class-html)）：

```
.class1.class2 
```

在你的情况下：

```
$(".left_Item.drop_Down").whatever... 
```

如果您想使用 id 以及类选择器，则将 id 放在首位：

```
$("#col_1.left_Item.drop_Down") 
```

虽然由于 id 应该是唯一的，但我不明白你为什么不只是使用`$("#col_1")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T10:23:40.200

如果课程是您的主要关注点，那么试试这个。

```
$('.left_Item.drop_Down').whatever... 
```

但是如果你想要一个`Id`有课程的`left_Item drop_Down`你可以这样做

```
$('#col_1.left_Item.drop_Down').whatever... 
```

# java - 具有固定列数的 GridBagLayout

> ID：11482890
> 
> 赞同：2
> 
> 时间：2012-07-14T10:13:11.733
> 
> 标签：java, swing, grid-layout, gridbaglayout

我只想要一个 GridLayout 来合并单元格。所以我找到了 GridBagLayout。看起来这种布局非常灵活。我不需要这种灵活性。有没有办法告诉 GridBagLayout 它应该在整个宽度和高度上使用 20 列和 10 行？它应该看起来像一个 GridLayout，但具有合并单元格。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T10:43:41.470

据我所知，您可以将相同的高度和宽度用于多个`JComponent`. 但是你必须改变它们，你想要一个合并的单元格。

这是一个[如何使用 GridBagLayout的示例](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)

```
protected void makebutton(String name,
                          GridBagLayout gridbag,
                          GridBagConstraints c) {
    Button button = new Button(name);
    gridbag.setConstraints(button, c);
    add(button);
}

public void init() {
    GridBagLayout gridbag = new GridBagLayout();
    GridBagConstraints c = new GridBagConstraints();
    setFont(new Font("SansSerif", Font.PLAIN, 14));
    setLayout(gridbag);
    c.fill = GridBagConstraints.BOTH;
    c.weightx = 1.0;
    makebutton("Button1", gridbag, c); 
    makebutton("Button2", gridbag, c);
    makebutton("Button3", gridbag, c);
    c.gridwidth = GridBagConstraints.REMAINDER; //end row
    makebutton("Button4", gridbag, c);

    c.weightx = 0.0;                //reset to the default
    makebutton("Button5", gridbag, c); //another row
    .........
} 
```

所以你不需要一直指定高度和宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-05T21:16:54.720

我希望这是可能的，因为它会使我的项目更容易。然而，这就是答案：

> GridBagLayout 没有提供明确定义网格中的行数或列数的方法，也没有定义网格中每个单元格大小的方法。相反，GridBagLayout 通过放置在屏幕上的组件数来计算网格中的行数和列数。如果一个容器有五个水平排列的组件，则网格由五列和一行组成。如果容器有五个垂直排列的组件，那么网格由一列和五行组成。

我从：[http ://www2.sys-con.com/itsg/virtualcd/java/archives/0304/tabbone/index.html](http://www2.sys-con.com/itsg/virtualcd/java/archives/0304/tabbone/index.html)

对于我的项目，我正在考虑创建我的 GridBagLayout 的顶行和左列，其中 x 和 y 数量为 1 像素 x 1 像素透明面板，以手动创建类似 excel 的网格并将对象放入该网格结构中，使用 gridwidth和 gridheight 根据需要合并单元格。这应该让我可以轻松地创建复杂的布局并正确调整所有内容（敲木头）。

# magento - 有没有一种时髦的方法来计算 Magento 商店中的所有产品？getProduct() 想要一个 id

> ID：11482906
> 
> 赞同：3
> 
> 时间：2012-07-14T10:16:01.203
> 
> 标签：magento

```
$product1 = Mage::helper('catalog/product')->getProduct(42, $storeId); 
```

不能使用，因为它需要我提供产品 ID。类别方法也需要类别 ID。

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T10:31:57.330

```
$collection = Mage::getResourceModel('reports/product_collection');
$collection->addStoreFilter();
$total_products_in_store = $collection->getSize(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T10:33:34.687

```
$storeId = 2;

/** @var $collection Mage_Catalog_Model_Resource_Product_Collection */
$collection = Mage::getResourceModel('catalog/product_collection');
$collection->addStoreFilter($storeId);

// Retrieve product count in collection
$size = $collection->count(); // or $collection->getSize() 
```

# php - Sonata Admin：添加自定义触发器/动作到列表/编辑动作

> ID：11482910
> 
> 赞同：11
> 
> 时间：2012-07-14T10:17:11.993
> 
> 标签：php, symfony, symfony-sonata, sonata-admin

我`SonataAdminBundle`用于管理我的应用程序中的实体。该网站的管理员可以添加视频，其中一些首先需要得到演讲者的批准。已经有一个授权系统在工作 - 我有一个工作代码，它将生成一个特殊链接并通知演讲者，演讲者可以批准或不批准视频，并自动通知管理员。

`ask for authorization`我想自定义我的管理部分，所以视频旁边会有一个按钮。我可以将它放在列表操作 ( `/admin/acme/videos/list`) 或右侧导航 ( `/admin/acme/videos/x/edit/`)某处的编辑操作中

这样做的最佳方法是什么？文档中关于块自定义的内容很少，但我发现[这个示例](https://github.com/sonata-project/SonataPageBundle/blob/master/Admin/PageAdmin.php#L220)可能是我正在寻找的东西，但我不知道如何使用它。

一种选择是使用`preUpdate`钩子，并在编辑操作中添加一个复选框，但一个按钮会更好。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-19T07:36:58.990

为编辑表单添加操作

添加到您的管理类：

```
protected function configureSideMenu(MenuItemInterface $menu, $action, Admin $childAdmin = null)
{
    if (!$childAdmin && !in_array($action, array('edit'))) {
        return;
    }
    $admin = $this->isChild() ? $this->getParent() : $this;
    $id = $admin->getRequest()->get('id');
    $menu->addChild('My action', array('uri' => 'http://google.com?id=' . $id));
} 
```

它将为 /admin/acme/videos/x/edit/ 等操作创建左侧菜单。拥有当前项目的 ID 允许您构建任何自定义 URL。

要为列表添加操作：在您的管理文件中添加

```
protected function configureListFields(ListMapper $listMapper)
{
    $listMapper
        ->add('_action', 'actions', array(
            'actions' => array(
                'act' => array('template' => 'AcmeBundle:Video:my_temp.html.twig'),
            )
        ))
    ;
} 
```

它将添加一个带有链接的列，然后您需要为您的列创建一个模板，例如

```
<a href="{{ admin.generateObjectUrl('delete', object) }}" class="delete_link" title="{% trans from 'SonataAdminBundle' %}action_delete{% endtrans %}">
    <img src="{{ asset('bundles/sonataadmin/famfamfam/delete.png') }}" alt="{% trans from 'SonataAdminBundle' %}action_delete{% endtrans %}" />
</a> 
```

所有示例均取自您提供的链接。希望能帮助到你

# actionscript-3 - 如何从当前 swf 中的 moviclip 在服务器上创建新的 swf

> ID：11482912
> 
> 赞同：0
> 
> 时间：2012-07-14T10:17:29.503
> 
> 标签：actionscript-3, flash, runtime, export

我在舞台上有一个movieClip，带有加载的swf 播放动画和声音。我想将影片剪辑导出到 swf。我以为我可以做类似于 jpeg 导出的事情？主 swf 和正在加载的要复制的 swf 在同一台服务器上。

我已经搜索过，但我没有遇到任何概述需要做的事情。关于如何做到这一点的任何更深入的解释的机会？

我在这里确实有一篇关于有人有类似问题的帖子，但主持人觉得有必要删除它:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T12:38:34.060

有一个名为[Ming](http://www.libming.org/)的图书馆可能适合您的需求。

此外，由于服务器端 swf 生成并非易事，您真的需要它吗？如果您需要动态 swf，您还可以创建模板并使用 flashvars 和 PHP 等服务器端语言来创建内容。

# html - 在子 div 上使用 position:absolute 将它们粘在一个地方

> ID：11482920
> 
> 赞同：2
> 
> 时间：2012-07-14T10:18:45.693
> 
> 标签：html, css

我有许多具有相同类的 div，我想在它们的容器 div 内垂直对齐。

html 部分看起来像这个例子：

```
<div id="container">
    <div class="element">
        ........
    </div>

    <div class="element">
        ........
    </div>

    <div class="element">
        ........
    </div>
</div> 
```

我已经将元素（带有 .element 类的 div）“向左”浮动，因此它们都在一行上。到目前为止一切顺利，还没有问题。.element div 的内容各不相同。现在默认情况下，它们顶部对齐，我想使用这个 css 将它们对齐到底部：

```
#container {position:relative;}
#container .element {position:absolute;bottom:0;} 
```

有效并且确实将它们与底部对齐，但不幸的是它也将它们粘在一起，它们看起来都像一个 div 一样在一个地方，一个在另一个之上。

尝试为 .element div 设置宽度、边距、填充等无济于事，它们只是充当一个 div。我需要做什么才能将它们分开？我相信给每个 div 一个单独的类不是正确的解决方案。我也不想使用表格解决方案，除非绝对没有其他办法。我试过 vertical-align:bottom 出于某种原因什么也没做。

我一直在寻找这方面的内容，但网上没有任何相关内容，所以如果它是重复的，我深表歉意。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T10:23:59.123

这就是 position:absolute 的意义所在。我不明白你为什么使用它。

如果我理解正确，您希望将 div 垂直对齐到底部并让它们彼此相邻/并排显示？然后很可能您必须将 div 的显示 css 属性修改为 display:inline-block; 甚至使用 span 标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T10:23:48.587

您可以将 div 与另一个 div 包装`#container`，将其位置设置为相对，并将 #container 的位置设置为绝对值，并在底部`bottom: 0` 查看[我的示例](http://jsfiddle.net/menislici/DSanK/1/)

# html - 如何简化 GMap 位置数组中的重复 HTML？

> ID：11482921
> 
> 赞同：0
> 
> 时间：2012-07-14T10:18:47.737
> 
> 标签：html, arrays, infowindow

我正在尝试在 Google Map (v3 API) 中收紧一些重复的 HTML。

*   该地图包含 50 个标记。
*   每个标记都有一个样式化的 infoWindow。
*   每个 infoWindow 都包含表示文本和图像的 HTML。
*   每个 infoWindow 的文本都是相同的，但图像是唯一的。

我想将文本 HTML 放入一个变量中，然后用它来替换代码中重复的字符串。

这是 infoWindows 的呈现方式：

```
var locations = [
[39.11009, -120.03169, '<same text html><unique image html>'],
[37.77493, -122.41942, '<same text html><unique image html>'],
[48.85320, -119.30206, '<same text html><unique image html>'],
[48.77734, -121.81320, '<same text html><unique image html>']
]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T20:20:00.537

Create a variable containing the html string common to each array [], then use it to replace the common strings. The proper syntax looks like this:

```
var Links ='<div class="photo"><a href="whatever.com/">Shop Here</a> | <a href="whatever.com/">Shop There</a></div>';
var locations = [
[39.19, -12.9, Links + '<img width="300" height="239" src="images/img01.jpg"/>'],
[37.73, -12.4, Links + '<img width="300" height="239" src="images/img02.jpg"/>'],
[48.82, -12.3, Links + '<img width="300" height="239" src="images/img03.jpg"/>'],
[48.74, -12.8, Links + '<img width="300" height="239" src="images/img04.jpg"/>'],
[39.37, -12.7, Links + '<img width="300" height="239" src="images/img05.jpg"/>']
]; 
```

# git - 为开源版本自动重写 git 历史

> ID：11482925
> 
> 赞同：0
> 
> 时间：2012-07-14T10:19:37.333
> 
> 标签：git, open-source, release, code-analysis, revision-history

我目前正在发布几个开源项目。通常，完整的源代码以 ZIP 存档的形式提供或在开源存储库中签入。这使得[ohloh](https://www.ohloh.net/)的分析变得困难。

如果该软件是在非公共存储库中开发的，则可以使用完整的历史记录。但是，我不想发布完整的历史记录。

我想使用 git 来达到两种可能性之一：

**(i) 每个作者一次提交：每个作者** 应该有一个提交（提交日期为最终发布日期）。每个提交都包含代码行，最终成为最终版本。

**(ii) 仅包含最后代码行的原始提交：**在此变体中，保留了提交本身的数量。每次提交的修改方式都是只保留最终进入最终版本的行，而删除所有其他的行。

有没有人实现过其中一种变体？变体 (i) 似乎可以使用[git-blame](http://www.kernel.org/pub/software/scm/git/docs/git-blame.html)和一些脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T12:56:54.093

**(i) 每位作者一次提交**

我想这在逻辑上是不可能的：假设你有一个这样的提交序列：

*   提交：A，作者：Alpha
*   提交：B，作者：Beta
*   提交：C，作者：Alpha

如果提交 C 依赖于 B 中所做的任何事情，则您不能再重新排序和压缩 A 和 C。

**(ii) 只有最后的代码行的原始提交**

为此，您可以使用“git filter-branch --tree-filter”。请注意以下脚本可能会吃掉小猫，因为我只在一个简单的测试存储库上对其进行了测试。您已被警告：

```
git filter-branch --prune-empty --tree-filter '
    # directory which contains the final version of the project
    FINAL_VERSION="$DIRECTORY_WITH_REPOSITORY_OF_FINAL_VERSION"

    # directory which contains the filtered version of the repository
    FILTER_DIR="$(pwd)"

    # apply the current commit in to the final version in reverse mode,
    # ignore the rejects
    cd "$FINAL_VERSION"
    git show "$GIT_COMMIT" > /tmp/original.patch
    cat /tmp/original.patch | patch -p1 -t
    git diff > /tmp/filtered.patch

    # reset the FINAL_VERSION to the original state.
    git reset --hard
    git clean -f -d -x

    # apply the patch which contains the lines which could be reversed on
    # the filtered version
    cd "$FILTER_DIR"
    # revert the last commit
    patch -p1 -t < /tmp/original.patch

    # apply the filtered patch
    patch -p1 -t < /tmp/filtered.patch
    # remove the rejects by the modified patch 
    find -name "*.orig" -o -name "*.rej" | xargs rm -rf
' previousRelease..HEAD 
```

（这假设您已经用“previousRelease”标记了分支点。您还必须调整 FINAL_VERSION 变量。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T20:36:57.210

[git-oss-releaser](https://github.com/koppor/git-oss-releaser)是选项 (i) 的解决方案。

git-oss-releaser 将给定的 git 存储库转换为仅包含上次提交的文件的 git 存储库，并提交类似于`git blame`每个文件的输出。原来的历史已经丢失。

用法：`git-oss-releaser.py [-h] repoDir outDir`

位置参数：

*   `repoDir`：要转换的存储库。也可能是 repo 的子目录。
*   `outDir`：应该在其中创建新仓库的目录。必须是空的。

可选参数：

*   `--name NAME``user.name`用于*提交*文件 。默认为 git 的 global `user.name`。
*   `--email EMAIL``user.email`用于*提交*文件 。默认为 git 的 global `user.email`。
*   `--date DATE` 用于提交的日期。默认为最后一次提交的日期。

请注意，git 在提交时区分作者和提交者。作者取自 using `git blame`，提交者数据取自全局`user.name`and`user.email`或给定配置的`--name`and `--email`。

DEBUG 模式目前只能在代码中启用。

## 限制

*   仅适用于没有任何未跟踪文件的 git 存储库
*   空行分配给“git-oss-releaser”，而不是添加这些空行的第一个或最后一个作者
*   存储库必须包含至少一个非二进制文件
*   提交日期仅来自非二进制文件
*   在 git 下测试仅[适用于 windows](https://git-for-windows.github.io/)

# android - 在android中监视用户安装的应用程序的方法

> ID：11482927
> 
> 赞同：0
> 
> 时间：2012-07-14T10:19:44.243
> 
> 标签：android, android-layout, android-intent, android-service

我正在开发一个应用程序来监控第三方应用程序。我知道如何获取正在运行的应用程序列表，但问题是，我不知道如何记录有关所有正在运行的应用程序的信息。我要记录的是每个正在运行的应用程序的处理器使用情况、内存使用情况和数据使用情况。使用数据库存储记录的应用程序详细信息是否实用。主要是在我选择正在运行的应用程序时获取使用数据。我的问题是，

如何获取正在运行的应用程序的 PID。如何获取正在运行的应用程序的上述详细信息，例如处理器和内存使用情况。

请帮助我，如果有人有源代码或实现这一点的教程，请善意地发表评论！

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T00:10:57.517

您可以定期轮询系统以查找已安装的应用程序。

示例代码。android-sdk-linux/samples/android-15/ApiDemos/src/com/example/android/apis/view/Grid1.java

```
private void loadApps() {
    Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);
    mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);

    mApps = getPackageManager().queryIntentActivities(mainIntent, 0);
} 
```

# makefile - GNU Make 中的仅订购目标 - 用于 Microsoft NMAKE？

> ID：11482929
> 
> 赞同：3
> 
> 时间：2012-07-14T10:20:33.890
> 
> 标签：makefile, gnu-make, nmake

[GNU Make 允许指定*仅订单目标*：](http://www.gnu.org/software/make/manual/html_node/Prerequisite-Types.html#Prerequisite-Types)

> 有时 [...] 您会遇到这样的情况，即您希望对要调用的规则施加特定的顺序，而不是在执行这些规则之一时强制更新目标。在这种情况下，您想要定义*仅订单的先决条件*。可以通过在先决条件列表中放置管道符号 (|) 来指定仅订单先决条件：管道符号左侧的任何先决条件都是正常的；右侧的任何先决条件都是仅订购的：
> 
> ```
> targets : normal-prerequisites | order-only-prerequisites 
> ```

仅订单的先决条件*不*包含在`$^`; 您可以使用`$|`.

我发现这对于将系统库指定为链接的附加依赖项很有用。

```
CXX      = cl
CXXFLAGS = /nologo /W4 /EHsc /MD
RC       = rc
RCFLAGS  = /nologo

# Link executables; $^ = all prerequisites; $| = order-only prerequisites
%.exe: %.obj %.res
    $(CXX) $(CXXFLAGS) /Fe$@ $^ $|

# Compile source files
%.obj: %.cpp
    $(CXX) $(CXXFLAGS) /c /Fo$@ $^

# Compile resource files
%.res: %.rc
    $(RC) $(RCFLAGS) /r /fo$@ $^

# System libraries needed for linking. Specify them as order-only prerequisites
# so their (no-op) rule being executed (due to their absence from the build
# directory) won't make the target appear out of date.
ErrorShow.exe:   | user32.lib
Singleton.exe:   | user32.lib advapi32.lib
ProcessInfo.exe: | user32.lib advapi32.lib gdi32.lib

# Set libraries as no-op targets to satisfy rule existence requirement.
advapi32.lib:
gdi32.lib:
user32.lib: 
```

有没有办法让 Microsoft NMAKE 做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-15T01:36:11.197

不幸的是，没有，Microsoft NMAKE 没有任何类似 GNU make 的仅订购先决条件，并且考虑到他们早已转向其他构建工具（如 MSBuild），微软不太可能添加这样的功能。

但是，[Electric](http://www.electric-cloud.com/downloads/software.php) Cloud 的高性能 GNU make 和 NMAKE 替代品 ElectricAccelerator 确实支持 NMAKE 模式下的仅订购先决条件。你可以试试看。

*（免责声明：我是 ElectricAccelerator 的架构师和首席开发人员）*

# delphi - 为什么 DrawText 只打印字符串的前四个字符？

> ID：11482930
> 
> 赞同：0
> 
> 时间：2012-07-14T10:20:34.490
> 
> 标签：delphi

我有 Canvas DrawText 的问题，我从我想显示的文本中得到了前 4 个字符。

例如，我有文本“离线”，它将显示“离线”。

这段代码有什么问题。

编码

```
procedure TStatusCombo.Paint ;
var DrawRect : TRect ;
    StatusColor : TColor ;
    iTextWidth : Integer ;
    r : TRect ;
begin
DrawRect := ClientRect ;

//colors
Canvas.Brush.Style := bsClear ; //transparent background
Canvas.Brush.Color := Tcolor($4D4D4D) ;
Canvas.Pen.Color :=  Tcolor($4D4D4D)   ;

Canvas.RoundRect(DrawRect.Left , DrawRect.Top ,
            DrawRect.Right , DrawRect.Bottom , 15, 15);

//Drawing
//SetRect(DrawRect, DrawRect.Left+3, DrawRect.Top+3, DrawRect.Right-3, DrawRect.Bottom-3);

case ChatStatus of
  sNormal: StatusColor  :=   TColor($00FF78) ;
  sOnline: StatusColor  :=   TColor($00FF78) ;
  sBusy: StatusColor  :=   TColor($00FF78) ;
  sAway: StatusColor  :=   TColor($00FF78) ;
  sOffline:StatusColor  :=   TColor($00FF78) ;
end;
Canvas.Brush.Color := StatusColor ;

Canvas.RoundRect(DrawRect.Right - 20 , DrawRect.Top +4 ,
            DrawRect.Right -10  , DrawRect.Bottom -4  , 5, 5);

FCaption := FStatusText[ChatStatus];
Canvas.Brush.Style := bsClear ;
Canvas.Font.Color := clWhite ;

DrawText(Canvas.Handle,pchar(FCaption) ,sizeof(FCaption),DrawRect ,DT_VCENTER  or DT_CENTER or DT_SINGLELINE);

end; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-14T10:32:10.507

您必须使用`Length(FCaption)`而不是`SizeOf(FCaption)`.

实际上，`Length(FCaption)`是字符串的长度`FCaption`，而`SizeOf(FCaption)`是变量的大小`FCaption`。因为`FCaption`它是一个字符串，所以它（技术上）是一个指针（指向实际字符），并且一个指针有四个字节长（在 32 位应用程序中）。因此，您只得到了前四个字符。

# javascript - 带有数组错误的jQuery循环

> ID：11482933
> 
> 赞同：0
> 
> 时间：2012-07-14T10:21:05.583
> 
> 标签：javascript, jquery, arrays, loops

我有这个片段。结果我看到一个错误：分配中的左侧无效。

```
var arr = [ "text1", "text2", "text3", "text4" ];
    jQuery.each(arr, function(index, value) {
        this = jQuery("#sc-dialog ."+value).val();
}); 
```

有谁可以指点我如何解决这个问题？谢谢。

**这是一个更新** ，我需要变量“文本”在循环中包含数字：文本 1、文本 2、文本 3 ......我已经做到了：

```
var arr = [ "1", "2", "3", "4" ];
jQuery.each(arr, function(index, value) {
        var text + index = jQuery("#sc-dialog .text"+value).val();
}); 
```

但我收到一个错误：意外的标识符。问题出在这里：var text + index

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T10:26:10.830

试试这样：

```
jQuery.each(arr, function(index, value) {
    arr[index] = jQuery("#sc-dialog ."+value).val();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T10:53:16.283

您不能使用“this”作为变量名。尝试类似：

```
var arr = [ "text1", "text2", "text3", "text4" ];
    jQuery.each(arr, function(index, value) {
        var dialogValue = jQuery("#sc-dialog ."+value).val();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T12:19:08.163

在你的变量名后面放一个`+`是你`var`语句中的语法错误：

```
var text + index = jQuery("#sc-dialog .text"+value).val() 
```

有效的变量声明将是变量名本身：

```
var text; 
```

或者带有赋值的变量名：

```
var text = jQuery("#sc-dialog .text"+value).val(); 
```

被分配的值可以有 a`+`或其他运算符：

```
var x = y + z - 5 * (a + b); 
```

在单个`var`语句中，您可以通过用逗号分隔多个变量来声明带有或不带有值的变量：

```
var i, j = 0, k, text = jQuery("#sc-dialog .text"+value).val(), x = 12 + 4; 
```

`for`当您可以使用标准循环实现相同的目标时，遵循简单模式的数字数组（在本例中为数组元素索引加 1）是毫无意义的。**编辑**：从您的评论看来，您似乎不想处理循环中的值，您想存储这些值以供以后使用。您提到想要`text1`,`text2`等，但是如果您需要单独引用它们，听起来您的各种文本区域并不是真正的组，并且在循环中处理它们根本没有意义。但是，如果您坚持，那么您应该将值存储在一个数组中：

```
var i,
    text = [];
for (i = 1; i <=4; i++) {
    text[i] = jQuery("#sc-dialog .text"+i).val();
}
// later in your code
// text[1] is first value,
// text[2] is second value, etc 
```

请注意，JS 数组索引是从零开始的，并且数组`.length`比最高索引大一，但是您的字段编号从 1 开始 - 如果您稍后循环遍历`text`数组，请记住这一点。

# ubuntu - 无法连接到在 Ubuntu Server 11.10 上运行的 Tomcat6

> ID：11482935
> 
> 赞同：0
> 
> 时间：2012-07-14T10:21:07.940
> 
> 标签：ubuntu, tomcat6

我试图站起来tomcat6，只查看默认页面。一切都已安装并正确运行（或者看起来如此）。我启动服务器

```
sudo /etc/init.d/tomcat6 start 
```

一切都开始正常。

```
 * Starting Tomcat servlet engine tomcat6
   ...done. 
```

当我运行 netstat 时，我可以看到它在端口 8080 上像预期的那样监听。

```
tcp        0      0 127.0.0.1:8005          0.0.0.0:*               LISTEN     
tcp        0      0 0.0.0.0:27017           0.0.0.0:*               LISTEN     
tcp        0      0 127.0.0.1:3306          0.0.0.0:*               LISTEN     
tcp        0      0 0.0.0.0:8080            0.0.0.0:*               LISTEN     
tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN     
tcp        0      0 0.0.0.0:28017           0.0.0.0:*               LISTEN     
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN     
tcp        0      0 127.0.0.1:43521         0.0.0.0:*               LISTEN     
tcp        0      1 192.168.1.65:40912      65.5.149.13:25          SYN_SENT   
tcp        0      0 192.168.1.65:22         99.44.242.76:50769      ESTABLISHED
tcp        0    272 192.168.1.65:22         99.44.242.76:50552      ESTABLISHED
tcp6       0      0 :::22                   :::*                    LISTEN     
udp        0      0 0.0.0.0:68              0.0.0.0:* 
```

但是每当我尝试访问 XXXX:8080 时，页面都会超时，因为服务器没有响应。我查看日志，没有错误。我很乐意发布日志，但它们只是正常启动的东西。所以我知道服务器正在运行，并且我知道我指向了正确的位置，但是在 2 之间配置错误。请指出我正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T10:26:55.710

您是否远程访问该服务器？尝试检查是否有任何代理、子网或其他东西使包裹无法到达目的地。首先尝试在本地访问服务器。

“http://localhost:8080”

然后，从另一台计算机检查 ping 是否有效。如果不是，请检查两者是否在同一个域中

添加：

但是，如果您有权启动 tomcat，则应该在本地对其进行测试：

远程：

```
traceroute -p 8080 your.server.ip 
```

在服务器上：

```
traceroute -p 8080 localhost 
```

# php - 使用 JQuery 通过 ajax 动态发送 json 格式的表单数据

> ID：11482939
> 
> 赞同：2
> 
> 时间：2012-07-14T10:21:54.920
> 
> 标签：php, javascript, ajax, json

我徘徊如何通过 ajax 和 JQuery 动态发送 json 格式的表单数据？例如，我在 JQ 中编写了这样的代码：

```
$.post("test.php", { func: "getNameAndTime" },
    function(data){
      alert(data.name); // John
      console.log(data.time); //  2pm
    }, "json"); 
```

这很好，但是在实时应用程序中经常需要发送巨大的表单数据并且用户可以动态更改字段，所以我不知道会发送多少个func1，func2，func3甚至func[]。q 是如何动态地执行此操作，在 AJAX 的旧世界中，我可以通过将表单发送到服务器来完成它。提前谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T15:53:07.960

是的，我可以将所有数据发送到服务器，无论如何它都会很好地工作，例如：

```
$(function() { // on document load
$('#email_form').submit(function() { // set onsubmit event to the form
  var data = $('#email_form').serialize(); // serialize all the data in the form 
  $.ajax({
    url: 'testJson.php', // php script to retern json encoded string
    data: data,  // serialized data to send on server
    dataType:'json', // set recieving type - JSON in case of a question
    type:'POST', // set sending HTTP Request type
    async:false, 
    success: function(data) { // callback method for further manipulations             
      for (key in data.email) {
        alert(data.email[key]);
      }

    },
    error: function(data) { // if error occured

    }
  });
  return false;
}); 
```

});

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T10:56:49.577

可以为 AJAX 请求构建动态数据，但显然您需要了解检索该动态数据的逻辑。您没有在您的问题中描述这一点，因此在下面的示例中，我假设它基于`.user_input`表单中的字段数（可能是 2、10 或其他）。然后数据由字段名称+字段值组成。

重点是显示数据的动态收集，仅此而已。

```
var ajax_data = {};
$('.user_input').each(function() {
    ajax_data[$(this).attr('name')] = $(this).val();
});
$.post('some/url.php', ajax_ata); //etc 
```

# mysql - mysql在选择中选择一个值

> ID：11482940
> 
> 赞同：1
> 
> 时间：2012-07-14T10:22:05.683
> 
> 标签：mysql, sql, select

我有一个实施消息系统。我的问题是，我想知道一个用户是否已经与另一个用户有一个线程，如果有，中间是什么

我有一个messages_recips 表，看起来像这样

```
---------------------------     
| mid | seq | uid | status|
|--------------------------
| 4   | 1   | 1   | A     |
| 4   | 1   | 2   | A     |
--------------------------- 
```

如果用户 id 1 有一个用户 id 为 2 的线程，我会持有 2 行具有相同中间值的行。我知道我可以创建 2 个 sql 来实现我的要求，但我试图在 1 个 sql 中做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:13:25.963

正如[Waqar Janjua](https://stackoverflow.com/users/826659/waqar-janjua)所指出的，关键是自联接查询：

```
SELECT m1.mid
  FROM messages_recips AS m1
  JOIN messages_recips AS m2 ON m1.mid = m2.mid
 WHERE m1.uid = 1
   AND m2.uid = 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T10:29:17.463

我认为您必须编写一个自联接查询：

```
Select u.uid, u1.uid from tablename u
 INNER JOIN tablename u1 on u.mid = u1.mid 
```

您将获得所有具有相同中间值的用户。

为了只获取 user1 和 user2 记录，您必须像这样在查询末尾放置一个 where 子句。

```
 Select u.uid, u1.uid from tablename u
 INNER JOIN tablename u1 on u.mid = u1.mid
 Where ( u.uid In ( 1,2 ) OR u1.uid In ( 1,2 ) ) ; 
```

# jquery - jquery $.post 和淡出

> ID：11482946
> 
> 赞同：0
> 
> 时间：2012-07-14T10:23:15.817
> 
> 标签：jquery

我对 jQuery 有一个（简单的）问题。我想做的就是使用`fadeOut`动画将新的 HTML 内容附加到 div 中。但是，我看不到它（那是新的 div 仍然具有该`display: none`属性

```
$.post('/Home/Update', {}, function (res) {
  $('<div id="myContent">' + res + '</div>')
    .hide()
    .appendTo('#mainContainer')
    .fadeOut(1000);
});

<div id='mainContainer' style='float:left; width: 900px; height:400px;  border: 1px solid Red; margin-left: 10px;'>

</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T10:25:13.920

您需要使用`fadeIn`而不是`fadeOut`（您想显示新内容，现在将其隐藏）。尝试这个：

```
$.post('/Home/Update', {}, function (res) {
  $('<div id="myContent" style="display:none">' + res + '</div>')
    .appendTo('#mainContainer')
    .fadeIn(1000);
}); 
```

# regex - 使用 grep 从 ifconfig 输出中的一行中提取 IP 地址

> ID：11482951
> 
> 赞同：28
> 
> 时间：2012-07-14T10:23:51.140
> 
> 标签：regex, grep

鉴于从 中提取的特定行`ifconfig`，在我的情况下：

`inet 192.168.2.13 netmask 0xffffff00 broadcast 192.168.2.255`

如何提取`192.168.2.13`部分（本地 IP 地址），大概是使用正则表达式？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-07-14T10:30:59.170

**这是一种使用方法`grep`：**

```
line='inet 192.168.2.13 netmask 0xffffff00 broadcast 192.168.2.256'

echo "$line" | grep -oE "\b([0-9]{1,3}\.){3}[0-9]{1,3}\b" 
```

结果：

```
192.168.2.13
192.168.2.256 
```

* * *

**如果您只想选择有效地址，您可以使用：**

```
line='inet 192.168.0.255 netmask 0xffffff00 broadcast 192.168.2.256'

echo "$line" | grep -oE "\b((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b" 
```

结果：

```
192.168.0.255 
```

* * *

**否则，只需选择您要使用的字段`awk`，例如：**

```
line='inet 192.168.0.255 netmask 0xffffff00 broadcast 192.168.2.256'

echo "$line" | awk -v OFS="\n" '{ print $2, $NF }' 
```

结果：

```
192.168.0.255
192.168.2.256 
```

* * *

* * *

附录：

[字边界](http://www.regular-expressions.info/wordboundaries.html)：`\b`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-14T10:26:30.783

使用这个正则表达式`((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(?=\s*netmask)`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-10T17:15:20.100

只是添加一些替代方式：

```
ip addr | grep -Po '(?!(inet 127.\d.\d.1))(inet \K(\d{1,3}\.){3}\d{1,3})' 
```

它会打印出除 localhost 之外的所有 IP。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-04-08T13:53:39.603

您可以在 egrep 中使用 egrep（与 grep -E 基本相同）
，其中有用于字符类的命名组，例如：“digit”
（在这种情况下会使命令更长 - 但你明白了......）

另一件很高兴知道的事情是您可以使用**括号**来**重复**一个模式

```
ifconfig | egrep '([0-9]{1,3}\.){3}[0-9]{1,3}' 
```

或者

```
ifconfig | egrep '([[:digit:]]{1,3}\.){3}[[:digit:]]{1,3}' 
```

如果您只关心实际 IP 地址，请使用参数**-o**将输出限制为**匹配的模式**而不是整行：

```
ifconfig | egrep -o '([[:digit:]]{1,3}\.){3}[[:digit:]]{1,3}' 
```

...如果你不想要 BCast 地址等，你可以使用这个 grep：

```
ifconfig | egrep -o 'addr:([[:digit:]]{1,3}\.){3}[[:digit:]]{1,3}' | egrep -o '[[:digit:]].*' 
```

*我以为您只是在谈论 IPv4 地址*

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-14T10:25:09.567

`[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-02-19T11:39:11.767

我没有足够的声誉点来发表评论，但我在史蒂夫的“仅选择有效地址”正则表达式中发现了一个错误。我不太明白这个问题，但我相信我已经找到了解决办法。第一个命令演示了这个错误；第二个演示了修复：

```
$ echo "test this IP: 200.1.1.1" |grep -oE "\b(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b"
$ echo "test this IP: 200.1.1.1" |grep -oE "\b((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b"
200.1.1.1
$ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-14T10:45:31.310

一种使用方式`sed`。第一条指令删除行中第一个数字之前的所有字符，第二条指令将第一个 IP 保存在组 1 ( `\1`) 中并用它替换所有行：

```
sed -e 's/^[^0-9]*//; s/\(\([0-9]\{1,3\}\.\)\{3\}[0-9]\{1,3\}\).*/\1/' 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-23T12:40:15.117

这段代码也很好用，也很简单。

```
ifconfig | grep Bcast > /tmp/ip1
cat /tmp/ip1 | awk '{ print $2 }' > /tmp/ip2
sed -i 's/addr://' /tmp/ip2
IPADDRESS=$(cat /tmp/ip2)
echo "$IPADDRESS" 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-01-01T17:27:23.017

此代码适用于我在*树莓派零 w*上。

（从输出中提取**wlan0:inet *192.168.xy***地址）`ifconfig`

*在ifconfig*输出中搜索模式 'inet 192'并使用*空格*分隔符获得第 10 个位置。

```
 $> ifconfig |grep 'inet 192'|cut -d' ' -f10 
```

输出： **192.168.1.6**

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-09-14T09:59:09.780

```
grep -oE "\b([0-9]{1,3}\.?){4}\b" 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-09-10T13:59:49.293

也许这是一个 sed 命令，仅用于运动：

```
 ip -o -4 addr show dev eth0 | sed 's/.* inet \([^/]*\).*/\1/' 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-01-14T07:29:46.237

如果使用支持 Perl 正则表达式的 grep：

```
(your command that pulls mentioned line) | grep -Po 'inet \K[\d\.]+' 
```

# php - PHP GD：我可以只填充透明部分吗？

> ID：11482953
> 
> 赞同：0
> 
> 时间：2012-07-14T10:24:12.173
> 
> 标签：php, gd

有一个具有透明区域的图像。（png 图像） 现在，在进行图像复制时，我们可以只填充那个透明区域吗？

Imagemagick 可以轻松做到这一点。这可能在 php gd 中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T10:44:31.867

分层方法通过`imagecopymerge()`是一种途径。这个概念是将您的源图像合并到具有预设背景图像的新图像上，该背景图像将在合并后通过源图像的透明度显示。

```
//create main image - transparent, with opaque red square in middle
$img = imagecreate(60, 60);
$white = imagecolorallocate($img, 255, 255, 255);
imagecolortransparent($img, $white); //make background transparent
$red = imagecolorallocate($img, 255, 0, 0);
imagefilledrectangle($img, imagesx($img) / 4, imagesy($img) / 4, imagesx($img) - (imagesx($img) / 4), imagesy($img) - (imagesy($img) / 4), $red);

//create new image, with pre-filled background, then merge first image across
$img2 = imagecreate(60, 60);
$blue = imagecolorallocate($img2, 0, 0, 255);
imagecopymerge($img2, $img, 0, 0, 0, 0, imagesx($img), imagesy($img), 100);

//output
imagepng($img2); 
```

所以第一个图像创建了一个透明图像（白色），中间有一个红色方块。第二张图片只是一个蓝色填充。将两者合并，蓝色通过第一张图片的透明部分显示出来，所以我们的红色方块现在位于蓝色填充上。实际上，我们已经填充了透明部分。

这是按顺序排列的三个状态。

![](../Images/c3a5c965f82e7abb740d244e6aa148da.png)

![](../Images/95956d256494045fc23ad659d64ec4c8.png)

![](../Images/15a6119f9d35639763dc55b18f1fec7b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T10:30:30.493

有透明度的地方没有什么可以“填充”的。png（或gif）中的透明度不是没有颜色，而是专门标记为透明的单一颜色。因此，您要删除该标记。

看一下 php gds 函数‘ [imagecolortransparent](http://www.php.net/manual/de/function.imagecolortransparent.php) ’：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-25T02:39:13.167

不，你不能。相反，您可以尝试从彩色矩形创建副本。这段代码对我有用：

```
$input = imagecreatefrompng($file_input);
list($width, $height) = getimagesize($file_input);
$output = imagecreatetruecolor($width, $height);
$white = imagecolorallocate($output,  255, 255, 255);
imagefilledrectangle($output, 0, 0, $width, $height, $white);
imagecopy($output, $input, 0, 0, 0, 0, $width, $height);
imagepng($output, $file_output); 
```

# android - 在android中动画位图图像

> ID：11482955
> 
> 赞同：3
> 
> 时间：2012-07-14T10:24:37.337
> 
> 标签：android, animation, bitmap, geometry

我创建了一个位图图像，它是一个圆形，而不是我想要对其进行动画处理，因此我将其转换为 bitmapdrawable 并将其添加到动画 drawable 中。但由于这个原因，圆形已变为椭圆形...

所以我该怎么做 ？

有没有其他方法可以只为位图文件设置动画。?

提前致谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T10:36:32.027

如果您使用的是 Canvas，我建议持有指向当前位图的指针并将所有其他位图加载到数组中。

说，

```
Bitmap[] frames = new Bitmap[10] //10 frames
Bitmap frame[0] = BitmapFactory.decodeResource(getResources(), R.drawable.circlefram1);
Bitmap frame[1] = BitmapFactory.decodeResource(getResources(), R.drawable.circlefram2);
... 
```

通过指向您感兴趣的帧来选择 currentFrame。

```
Bitmap currentBitmap = frame[3]; // 4th frame 
```

因此，当您调用 drawBitmap(currentBitmap) 时，它只会绘制您感兴趣的帧。您可以通过为帧动画分配 fps 来每隔这么多帧更改位图。

如果您只想缩放或旋转位图（旋转一个圆圈？），调整位图大小的最佳方法是使用 createScaledBitmap，并使用矩阵进行旋转。

对于缩放，您可以像这样将任何位图加载到内存中

```
Bitmap circleBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.circle); 
```

如果您想重新缩放圆圈（或任何位图），您可以执行以下操作：

```
Bitmap scaledCircle = Bitmap.createScaledBitmap(circleBitmap, dstWidth, dstHeight, filter); 
```

其中 dstWidth 和 dstHeight 是目标目标宽度和高度，您可以通过缩放原始宽度和高度来预先计算。

```
int scaledHeight = circleBitmap.getHeight()/2;
int scaledWidth = circleBitmap.getWidth()/2; 
```

最后，您通常会使用这样的画布绘制此位图

```
canvas.drawBitmap(bitmap) 
```

对于旋转，创建一个矩阵

```
Matrix mat;
mat.postRotate(degrees); // Rotate the matrix
Bitmap rotatedBitmap = Bitmap.createBitmap(originalBitmap, x, y, width, height, mat, filter); 
```

最后

```
canvas.drawBitmap(rotatedBitmap); 
```

请记住，画布对于游戏或任何实时的东西来说都很慢！

希望能帮助到你。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-14T10:35:31.317

不，你不能`bitmap`用`android animation framwork`. 您可以直接为`View`s 或s 以及从和`ViewGroup`派生的所有类设置动画。`View``ViewGroup`

调用包含位图的`view`。`ImageView`

```
TranslateAnimation slide = new TranslateAnimation(view.getX(), view.getX()  + 100, view.getY(), view.getY()  + 100 );   
slide.setDuration(1000);
view.startAnimation(slide) 
```

应该从当前位置翻译`ImageView`by`100px`

# c# - 使用 C# 的 MySQL 阿拉伯字符支持

> ID：11482965
> 
> 赞同：2
> 
> 时间：2012-07-14T10:25:20.333
> 
> 标签：c#, mysql, character-encoding, arabic

我使用 C# 和 MySQL 作为数据库服务器。
我遇到了阿拉伯语字符支持的问题！我已经搜索了很长时间，但没有。
最后我得到了这个[解决方案](http://www.codeproject.com/Questions/193480/MySql-and-C-and-arabic)（4号），它似乎工作得很好，但是在运行时我得到了新的错误说：

> 不正确的字符串值：第 1 行的列 'name' 的 '\xD9\x8A\xD8\xB3'

任何人都可以帮助解决这个问题？
提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-21T16:28:10.230

我知道很久以前就有人问过这个问题，但我认为写下答案对于那些与我面临同样问题的人会很有帮助。
像我一样使用 workBench 在 MySQL 中创建新数据库时，或者即使您通过命令创建它，您也应该指定字符排序规则类型，`utf8`如图所示
![使用 MySQL 工作台创建数据库](../Images/04322d6c996f4ebddef5dfcd7ee88d69.png)

并注意应该是`utf8_bin`因为其他人可能无法正常工作！
然后在 C# 中，您还应该告诉连接使用`utf8`字符集，如下
`MySqlConnection sqlconn = new MySqlConnection("datasource=localhost;port=3306;username=root;password=toor;CHARSET=utf8");`
所示 Et volia 它应该可以正常工作;)。

# c# - 无法获得 PC 空闲时间

> ID：11482966
> 
> 赞同：0
> 
> 时间：2012-07-14T10:25:20.533
> 
> 标签：c#

我找到了关于如何获取 PC 空闲时间的[教程。](http://www.geekpedia.com/tutorial210_Retrieving-the-Operating-System-Idle-Time-Uptime-and-Last-Input-Time.html)当我运行示例时，无论我离开我的电脑有多空闲，空闲时间始终为 0！

系统正常运行时间运行良好，但空闲时间始终为 0！知道为什么会这样吗？

*   视窗 7 64 位

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T12:21:10.200

我可能会告诉您您可能已经知道的内容，但是该代码是针对用户空闲时间而不是系统空闲时间的。

使用 Environment.TickCount 是一个有问题的做法，因为该值从 0 开始，上升到 X（大约 25 天后），然后环绕到 -X。所以你不能总是像代码建议的那样使用直接减法。

[http://msdn.microsoft.com/en-us/library/system.environment.tickcount(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/system.environment.tickcount(v=vs.80).aspx)

鉴于您是在 PC 上运行它，这应该没问题（假设您经常重启）。

根据您运行它的方式，您可能还想看看这个：

[如果 Windows 设置为“自动登录”，GetLastInputInfo API 将不起作用](https://stackoverflow.com/questions/6146114/getlastinputinfo-api-doesnt-work-if-windows-is-set-to-automatic-login)

# java - Eclipse 4.2.0 / 调试器非常慢

> ID：11482968
> 
> 赞同：3
> 
> 时间：2012-07-14T10:25:44.653
> 
> 标签：java, eclipse

切换到 Eclipse 4.2.0 后，调试器似乎不负责任或非常慢。我使用的 Java 版本是（与 Eclipse 中使用的相同）：

```
johannes@luna:~/sirix$ java -version
java version "1.7.0_03"
OpenJDK Runtime Environment (IcedTea7 2.1.1pre) (7~u3-2.1.1~pre1-1ubuntu3)
OpenJDK 64-Bit Server VM (build 22.0-b10, mixed mode)` 
```

其他人遇到过同样的行为吗？

编辑：我有太多（旧）断点（可能特别是检查和未检查异常上的断点特别昂贵;-)）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T08:55:02.120

我不知道如何加快 Eclipse 中的调试速度，但是您可以遵循一些通用规则来整体上加快 Eclipse：

1.  禁用防病毒软件，或将您的 JDK & eclipse & workspace & 其他相关文件夹添加到您的防病毒软件的白名单中。

2.  在 Eclipse 参考中禁用不必要的验证和启动操作。

    对于验证：在 Eclipse 菜单 Windows -> Preferences -> Validation 上，单击“Disable All”，然后选择您需要的验证器。我只选择了“Classpath Dependency Validator”。

    对于启动操作：在 Eclipse 菜单 Windows -> Preferences 上，键入“startup”，选择“Startup and Shutdown”，取消选中您不需要的选项。（感谢David的建议，我已经为读者添加了上述2个详细步骤）

3.  修改eclipse.ini设置Xmn(new generation size)、Xms和Xmx，开启parallel GC

    ```
    -vm C:/jdk1.6.0_25/bin
    -startup plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
    –launcher.library plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.100.v20110502
    -product org.eclipse.epp.package.jee.product
    –launcher.defaultAction openFile
    –launcher.XXMaxPermSize 256M
    -showsplash org.eclipse.platform
    –launcher.XXMaxPermSize 256m
    –launcher.defaultAction openFile
    -vmargs
    -server
    -Dosgi.requiredJavaVersion=1.5
    -Xmn128m
    -Xms1024m
    -Xmx1024m
    -Xss2m
    -XX:PermSize=128m
    -XX:MaxPermSize=128m
    -XX:+UseParallelGC 
    ```

4.  在内存上创建一个 ram 磁盘（虚拟磁盘），并将您的 jdk 放在 ram 磁盘上。您可以使用 imdisk 创建 ram 磁盘。首先从[http://www.ltr-data.se/opencode.html/#ImDisk](http://www.ltr-data.se/opencode.html/#ImDisk)下载并安装。

    然后将 ImDisk 驱动程序设置为在具有管理权限的命令提示符下自动加载（例如右键单击，以管理员身份启动），键入：

    ```
    sc config imdisk start= auto
    net start imdisk 
    ```

    通过以下方式创建一个 200m ram 磁盘作为驱动程序 n：

    ```
    imdisk -a -t vm -s 300m -m n: 
    ```

    然后你应该手动格式化 ram 磁盘。

    稍后，如果您想删除 ram 磁盘，只需运行以下命令：

    ```
    imdisk -D -m n: 
    ```

5.  确保您使用的是 Sun JDK，而不是在 Linux 上打开 JDK/GCJ 或其他 JDK。如果您对以上步骤不满意，请安装 jRockit 而不是 Sun JDK，并根据 jRocket 规范更改一些 VM 选项，jRockit 比 Sun JDK 更快。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-06T16:24:22.287

检查您是否没有任何方法断点。这些可能非常慢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-08T20:03:12.423

确保在调试时清除“表达式”窗口中的所有表达式。仅在需要时添加表达式并在使用后删除。

# php - 使用 PHPMyAdmin 拒绝用户 'root'@'localhost' 的访问

> ID：11482970
> 
> 赞同：29
> 
> 时间：2012-07-14T10:26:04.113
> 
> 标签：php, mysql, phpmyadmin, wampserver

当我在 PHPMyAdmin 中设置 root 密码时，我收到此错误：

```
#1045 - Access denied for user 'root'@'localhost' (using password: NO) 
```

我无法打开 PHPMyAdmin 面板。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-07-14T10:37:37.000

编辑您的 phpmyadmin config.inc.php 文件，如果您有密码，请将其插入到以下代码中的密码前面：

```
$cfg['Servers'][$i]['verbose'] = 'localhost';
$cfg['Servers'][$i]['host'] = 'localhost';
$cfg['Servers'][$i]['port'] = '3306';
$cfg['Servers'][$i]['socket'] = '';
$cfg['Servers'][$i]['connect_type'] = 'tcp';
$cfg['Servers'][$i]['extension'] = 'mysqli';
$cfg['Servers'][$i]['auth_type'] = 'config';
$cfg['Servers'][$i]['user'] = '**your-root-username**';
$cfg['Servers'][$i]['password'] = '**root-password**';
$cfg['Servers'][$i]['AllowNoPassword'] = true; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-07T11:02:38.333

以下是必须仔细遵循的几个步骤

1.  首先确保 WAMP 服务器正在运行，如果它没有运行，请启动服务器。
2.  在浏览器的地址栏中输入 URL [http://localhost/phpmyadmin/setup 。](http://localhost/phpmyadmin/setup)
3.  在 C:\wamp\apps\phpmyadmin 内创建一个名为 config 的文件夹，apps 内的文件夹可能有不同的名称，如 phpmyadmin3.2.0.1

4.  在 phpmyadmin 设置选项卡中返回浏览器，然后单击新建服务器。[![新服务器](../Images/94d65a276b00e9316f40a9d6b0701447.png)](https://i.stack.imgur.com/Yy1jl.jpg)

5.  将身份验证类型更改为“cookie”并将用户名和密码字段留空，但如果将身份验证类型更改为“配置”，请输入用户名 root 的密码。

6.  点击保存 [![节省](../Images/5bc60567d2c43a8e595e891cef104e1a.png)](https://i.stack.imgur.com/wu0Qf.png)

7.  再次单击保存在配置文件选项。
8.  现在导航到配置文件夹。在文件夹内会有一个名为 config.inc.php 的文件。复制文件并将其粘贴出文件夹（如果已存在同名文件，则覆盖它），最后删除该文件夹。
9.  现在你完成了。尝试再次连接mysql服务器，这次你不会收到任何错误。——学分 Bibek [Subedi](http://www.programming-techniques.com/2012/04/troubleshooting-mysql-error-1045-using.html)

# javascript - c# linq 对象到 javascript 输出

> ID：11482973
> 
> 赞同：0
> 
> 时间：2012-07-14T10:26:24.667
> 
> 标签：javascript, asp.net-mvc, signalr

在我的信号器应用程序中，我使用以下 Hub 方法发送通知：- C# 代码：-

```
 public void Updatecid(int uid, string connid)
    {
        var ntf = ege.notifications.Where(u => u.UserID == uid).ToList();
        Clients[connid].addData(ntf);
    } 
```

Javascript代码客户端：-

```
connection.addData = function (data) {
            for (var i = 0; i < data.length; i++) {
                var element = data[i];
                $('#notiadd').append("<li>" + element.NotificationTitle + "<a href='" + element.NotificationLink + "'>Click Here</a><input type='hidden' value='" + element.ID + "' /> <a href='#' class='delnoti'>X</a> </li>");
            }
        }; 
```

获取输出：-

safasfasfa 点击这里 X

未定义 点击这里 X

未定义 点击这里 X

未定义 点击这里 X

未定义 点击这里 X

未定义 点击这里 X

未定义 点击这里 X

未定义 点击这里 X

未定义 点击这里 X

未定义 点击这里 X

未定义 点击这里 X

您可以在输出中检查只有第一个通知即将到来，并且未定义。我在发送完整数据的 C# 代码中调试应用程序，但 javascript 会产生一些输出错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T12:22:33.413

将您的代码更改为以下...

```
connection.addData = function (data) {
  // console.log("data", JSON.stringify(data)) // Print the output to the console
  var html = $.map(data, function (i, element) {
    return "<li>" + element.NotificationTitle + "<a href='" + element.NotificationLink + "'>Click Here</a><input type='hidden' value='" + element.ID + "' /> <a href='#' class='delnoti'>X</a> </li>";
  }).join("");

  $("#notiadd").append(html);

}; 
```

在此解决方案中，您预先创建所有 html 并将一次添加到 DOM。这要快得多。

希望这可以解决您遇到的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T05:23:30.850

只需更改 C# 代码：-

```
var ntf = ege.notifications.Where(u => u.UserID == uid).ToList();
        var collection = ntf.Select(x => new
        {
            ntitle = x.NotificationTitle,
            nlink = x.NotificationLink,
            nid = x.ID
        });
        Clients[connid].addData(collection); 
```

# linux - 可以使用 Apple AirPlay 实现自己的 linux 应用程序吗？

> ID：11482979
> 
> 赞同：1
> 
> 时间：2012-07-14T10:26:57.743
> 
> 标签：linux, streaming, airplay

嗨，我正在尝试为我的高保真放大器构建一个带有 toslink 的嵌入式 ARM 板。ARM 采用 720Mhz 构建，运行 ARM 版本的 ubuntu 12.04 linux。

是否有任何开源模块/库来实现 Apple Airplay？这样我就可以将我的音乐流式传输到我的高品质音频到我的板上，最后驱动我的扬声器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T10:19:08.157

我编写了一个支持 AirPlay 的 node.js 模块，你可以在 NPM 或 github 上找到它：

[https://github.com/lperrin/node_airtunes](https://github.com/lperrin/node_airtunes)

我包含了一个将 MP3 文件流式传输到附近服务器的示例。

```
node play_ffmpeg.js --host <Your AirPlay Host> --port <Your AirPlay Port> --file <Your MP3 file> --ffmpeg <Path to FFmpeg> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T07:07:37.447

试试[http://www.flyn.org/projects/libdmapsharing/](http://www.flyn.org/projects/libdmapsharing/)

> Libdmapsharing 还检测音频 AirPlay 服务；再加上 PulseAudio 或 GS​​treamer 中的 AirPlay™ 支持，这可以允许应用程序将音频流式传输到 AirPlay 设备。

# perl - 将散列分配给散列

> ID：11482985
> 
> 赞同：0
> 
> 时间：2012-07-14T10:28:12.640
> 
> 标签：perl, hash

对于给定的键，我希望将散列（由方法返回）分配给另一个散列。

例如，一个方法返回这种形式的哈希：

```
hash1->{'a'} = 'a1';
hash1->{'b'} = 'b1'; 
```

现在，我希望将这些散列值分配给调用方法中的另一个散列，以获得类似：

```
hash2->{'1'}->{'a'} = 'a1';
hash2->{'1'}->{'b'} = 'b1'; 
```

作为 perl 的新手，我不确定最好的方法。但听起来很琐碎...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T10:50:35.130

你的潜艇可能是：

```
#!/usr/bin/env perl
use strict;
use warnings;

sub mystery
{
    my($hashref) = { a => 'a1', b => 'b1' };
    return $hashref;
}

my $hashref1 = mystery;
print "$hashref1->{a} and $hashref1->{b}\n";
my $hashref2 = { 1 => $hashref1 };
print "$hashref2->{1}->{a} and $hashref2->{1}->{b}\n"; 
```

一个关键点是，您使用`->`箭头运算符访问变量的符号是处理哈希引用，而不是普通哈希。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T10:42:28.203

我们有第一个和第二个哈希：

```
my %hash1 = (
  a => 'a1',
  b => 'b1');
my %hash2 = (1 => undef); 
```

我们只能将标量值分配给哈希，但这包括引用。要获取引用，请使用反斜杠运算符：

```
$hash2{1} = \%hash1; 
```

我们现在几乎可以像您的示例一样取消引用这些值：

```
print $hash2{1}->{a}; # prints "a1" 
```

请注意酌情使用正确的印记 ($@%)。使用您期望的数据类型的印记，这不一定是您声明的类型。

“perldoc perlreftut”可能很有趣。

# java - @Schedule 注释每隔几分钟（或几秒钟）运行一次

> ID：11482988
> 
> 赞同：34
> 
> 时间：2012-07-14T10:28:48.220
> 
> 标签：java, ejb, schedule

我想尝试通过以下方式使用 @Schedule 注释：

```
public class MyTestServlet extends HttpServlet {
    private static JcanLogger LOG = JcanLoggerFactory.getLogger(ServiceTestServlet.class);

    @EJB CronService cronService;

    public void service(HttpServletRequest req, HttpServletResponse resp) throws .... {
    ....
    cronService.iLive(); 
}
---
    @Local // because the ejb is in a servlet (there is no other jvm)
public interface CronService {

    public void iLive();
    public void runsEveryMinute();
}
---
@Singleton
public class CronServiceBean implements CronService {
    private static final JcanLogger LOG = JcanLoggerFactory.getLogger(CronServiceBean.class);

    @Schedule(minute="*")
    public void runsEveryMinute() {
        LOG.info(" runs EveryMinute ");
    }

    public void iLive() {
        LOG.info("iLive");

    }
 ---
 LOG
 ... 
 CronServiceBean:34  ] iLive 
```

根据日志，CronService 运行良好，但计划任务“runsEveryMinute”不起作用。

它应该如何使用 EJB 计划任务工作？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-07-14T14:11:39.803

根据注解的[Javadoc](http://docs.oracle.com/javaee/7/api/javax/ejb/Schedule.html)，`@Schedule`默认值为：

*   `*`用于除小时、分钟和秒之外的所有字段；和
*   `0`默认情况下，小时、分钟和秒。

通过指定`minute="*"`hour 并将其保留为默认值`0`，它请求计时器在午夜后每分钟运行一小时（即 00:00、00:01、00:02、...、00:59），然后不再运行直到第二天。相反，使用：

```
@Schedule(hour="*", minute="*") 
```

要每隔几秒（例如，`10`几秒）运行一次，您可以使用类似[cron](https://en.wikipedia.org/wiki/Cron)的语法：

```
@Schedule(hour = "*", minute = "*", second = "*/10", persistent = false) 
```

默认情况下，调度程序持久化事件。如果需要，设置`persistent = false`将防止它们随着时间的推移而累积。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2019-08-01T20:47:16.943

请找到以下调度程序配置的详细信息。

(1) 每 1 分钟运行一次

```
@Schedule(hour = "*", minute = "*/1", persistent = false) 
```

* * *

(2) 每 5 分钟运行一次

```
@Schedule(hour = "*", minute = "*/5", persistent = false) 
```

* * *

(3) 每 30 秒运行一次

```
@Schedule(hour = "*", minute = "*", second = "*/30", persistent = false) 
```

* * *

(4) 每天早上 6:00 运行

```
@Schedule(hour = "6", minute = "0", second = "0", persistent = false) 
```

* * *

(5) 每周五下午 2:00 运行

```
@Schedule(dayOfWeek = "Fri", hour = "14", persistent = false) 
```

* * *

(6) 每个月的第一天早上 5:00 运行

```
@Schedule(dayOfMonth="1", hour = "5", persistent = false) 
```

我希望这些信息可以帮助您根据需要配置调度程序。

# objective-c - IOS 应用程序 - 在单独的文件中定义协议

> ID：11482991
> 
> 赞同：9
> 
> 时间：2012-07-14T10:29:14.393
> 
> 标签：objective-c, ios

我在一个单独的文件 (myProtocol.h) 中定义了一个协议。这是它的代码：

```
#import <Foundation/Foundation.h>

@protocol myProtocol <NSObject>
    -(void) loadDataComplete;
@end 
```

现在我想调用这个方法，所以我做了以下代码：

***firstViewController.h***：

```
#import "myProtocol.h"

@interface firstViewController : UIViewController{
    id <myProtocol> delegate;
}
@property (retain) id delegate;
-(void) mymethod; 
```

***第一视图控制器.m***

```
@implementation firstViewController
@synthesize delegate;

- (void)viewDidLoad {
    [self mymethod];
}

-(void) mymethod {
    //some code here...
    [delegate loadDataComplete];
} 
```

我还有另一个文件，其中也使用了该协议：

***secondViewController.h***：

```
#import "myProtocol.h"
@interface secondViewController : UIViewController<myProtocol>{
} 
```

***secondViewController.m***：

```
-(void) loadDataComplete{
    NSLog(@"loadDataComplete called");
} 
```

但我的 secondViewController 没有调用协议方法。为什么会这样？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-14T11:03:26.317

首先，正如**@Abizern**建议的那样，尝试重新格式化您的代码。类使用大写字母。在这里说这个是您回答的解决方案。

这是协议。我会这样命名它，`FirstViewControllerDelegate`因为实现该对象的类是`FirstViewController`.

```
#import <Foundation/Foundation.h>

@protocol MyProtocol <NSObject>

- (void)doSomething;

@end 
```

这是`SecondViewController`.

```
#import <UIKit/UIKit.h>
#import "MyProtocol.h"

@interface SecondViewController : UIViewController <MyProtocol>

@end

@implementation SecondViewController

// other code here...

- (void)doSomething
{
    NSLog(@"Hello FirstViewController");
}

@end 
```

这是`FirstViewController`.

```
#import <UIKit/UIKit.h>

@interface FirstViewController : UIViewController

// it coud be better to declare these properties within a class extension but for the sake of simplicity you could leave here
// the important thing is to not declare the delegate prop with a strong/retain property but with a weak/assign one, otherwise you can create cycle
@property (nonatomic, strong) SecondViewController* childController;
@property (nonatomic, weak) id<MyProtocol> delegate;

@end

@implementation FirstViewController

// other code here...

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.childController = [[SecondViewController alloc] init];
    self.delegate = self.childController; // here the central point

    // be sure your delegate (SecondViewController) responds to doSomething method
    if(![self.delegate respondsToSelector:@selector(doSomething)]) {

        NSLog(@"delegate cannot respond");
    } else {

        NSLog(@"delegate can respond");
        [self.delegate doSomething];
    }    
}

@end 
```

为了完整起见，请务必了解委托模式的含义。苹果文档是你的朋友。您可以查看[the-basics-of-protocols-and-delegates](http://mobiledevelopertips.com/objective-c/the-basics-of-protocols-and-delegates.html)以了解该论点的基本介绍。此外，SO 搜索允许您找到有关该主题的大量答案。

希望有帮助。

# spring - Spring MVC 下拉框

> ID：11482993
> 
> 赞同：1
> 
> 时间：2012-07-14T10:29:26.133
> 
> 标签：spring, jsp, spring-mvc, jsp-tags

我一直在尝试找出如何在 Spring MVC 中创建一个下拉框。这是我的控制器：

```
@ResourceMapping(value = "availableDataVis")
public String getAvailableDataVis(Model model,
                            @RequestParam("widgetId") String widgetId) {
    HashMap<String,Map<String,String>> hashMapOfDataVis = new HashMap<String,Map<String,String>>();

    Map<String,String> m = new LinkedHashMap<String,String>();
    m.put("pie", "Pie Chart");
    m.put("categorizedVertical", "Column Chart");
    hashMapOfDataVis.put("m", m);

    if (hashMapOfDataVis.containsKey(widgetId))
    {
        model.addAttribute("dataVisArray", hashMapOfDataVis.get(widgetId));
    }

    return "selDataVisComboBox";
} 
```

这是jsp页面：

```
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %>
<form:select path="dataVisArray" items="${dataVisArray}" /> 
```

实际输出：

```
ERROR
Cause: javax.portlet.PortletException: org.apache.jasper.JasperException: java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'dataVisArray' available as request attribute
Message: org.apache.jasper.JasperException: java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'dataVisArray' available as request attribute
StackTrace:
javax.portlet.PortletException: org.apache.jasper.JasperException: java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'dataVisArray' available as request attribute
    at org.jboss.portal.portlet.impl.jsr168.api.PortletRequestDispatcherImpl.dispatch(PortletRequestDispatcherImpl.java:169)
    at org.jboss.portal.portlet.impl.jsr168.api.PortletRequestDispatcherImpl.include(PortletRequestDispatcherImpl.java:84)
... 
```

预期输出：

```
<select id="dataVis" name="dataVis">
   <option value="pie">Pie Chart</option>
   <option value="categorizedVertical">Column Chart</option>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:24:32.527

你试过做这样的事情吗？

```
<form:select path="dataVisArray"><br />
     <form:option label="Select..." value=""/>
     <form:options items="${dataVisArray} itemLabel="label" itemValue="value"/>
</form:select> 
```

# extjs4 - 删除面板中的白色背景

> ID：11482994
> 
> 赞同：2
> 
> 时间：2012-07-14T10:29:28.723
> 
> 标签：extjs4, extjs4.1

我如何摆脱白色背景。这是图像，我需要摆脱白色背景，最后它应该`blue colour`显示`panel`.

![在此处输入图像描述](../Images/715907b6f8c1e60ad4645060127d5f3c.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T14:09:42.843

对我有用的很简单：

```
bodyStyle : 'background:none', // Removes the default white background 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T15:40:00.370

尝试将`plain: true`, 放入面板的配置中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T11:13:25.750

添加配置

```
 bodyCls:'your-css' 
```

或者

```
`cls:'your-css'` 
```

在 default.html 或您的特定样式表中添加 css 样式。

```
.your-css 
{
  background-color:#4169E1 !important;
} 
```

# android - Sherlock 操作栏出现两次

> ID：11482995
> 
> 赞同：1
> 
> 时间：2012-07-14T10:29:38.050
> 
> 标签：android, actionbarsherlock

我正在尝试将 Sherlock 操作栏添加到我的项目中，并且只是复制了示例代码。演示应用在 4.0 之前的设备上运行良好，但我的应用在顶部显示了两次操作栏。由于我将相关代码剥离为示例代码并且我无法发布我的整个项目，所以我的简单问题是：有人看到类似的行为了吗？这可能会引导我走向正确的方向。非常感谢！

清单只是添加

```
 android:theme="@style/Theme.Sherlock" 
```

活动：

```
private ActionBarSherlock mSherlock = ActionBarSherlock.wrap(this);

    mSherlock.getActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_LIST); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T10:47:47.957

```
private ActionBarSherlock mSherlock = ActionBarSherlock.wrap(this); 
```

删除上面的代码行，因为如果您从适当的 Sherlock 风格的活动类（例如，，）继承，则`SherlockActivity`不需要`SherlockFragmentActivity`。例如，该行不会出现在GitHub 上[的列表导航示例活动中。](https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/demos/src/com/actionbarsherlock/sample/demos/ListNavigation.java)

# ruby-on-rails - Rails 教程 11.4.1 - 示例应用程序示例存储库的扩展

> ID：11482998
> 
> 赞同：1
> 
> 时间：2012-07-14T10:29:51.793
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, railstutorial.org, reference-implementation

您是否拥有或知道带有[Rails 教程第 11.4.1 节中](http://ruby.railstutorial.org/book/ruby-on-rails-tutorial#sec%3aextensions_to_the_sample_application)建议的已实现功能扩展的 Github 存储库，您认为这些存储库具有示范性并用作参考？

最好是 3.2 版示例应用程序的扩展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T22:55:43.000

[https://github.com/kltcalamay/sample_app/compare/original-version...master](https://github.com/kltcalamay/sample_app/compare/original-version...master)

# objective-c - 如何使用 AVAudioPlayer 播放声音？

> ID：11482999
> 
> 赞同：0
> 
> 时间：2012-07-14T10:30:03.493
> 
> 标签：objective-c, ios, avaudioplayer

我是初学者 iPhone 开发人员。我想播放声音，但音频文件返回空值。

这是我的代码：

```
-(IBAction)sound
{

    path=[[NSBundle mainBundle] pathForResource:@"Animalfile" ofType:@"plist"];
    dict=[NSDictionary dictionaryWithContentsOfFile:path];

    animalaudio=[dict valueForKey:@"audio"];
    NSLog(@"print:%@",dict);
    NSLog(@"printanimal%@",animalaudio);

    audiolist=[animalaudio objectAtIndex:currentsound];
    NSLog(@"audiolist:%@",audiolist);
    NSURL *audiourl=[NSURL fileURLWithPath:audiolist];
    NSLog(@"audiourl:%@",audiourl);

    AVAudioPlayer *audio=[[AVAudioPlayer alloc]initWithContentsOfURL:audiourl error:NULL];
    NSLog(@"audio:%@",audio);
    audio.delegate=self;
    [audio play];
} 
```

音频返回 null... 给出适用于我们代码的任何建议和源代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T13:17:24.370

```
-(void)primeAudioPlayerWrong {
    NSError *error;
    AVAudioPlayer *audioPlayer;
    if(!audioPlayerWrong){
        NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/wrong.mp3", [[NSBundle mainBundle] resourcePath]]];
        audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
    }
    [audioPlayer stop];
    [audioPlayer setCurrentTime:0];
    [audioPlayer play];
} 
```

试试这个...但在此之前，请确保 file_url 是正确的并且在提供的 url 中存在一些资源...