# StackOverflow 问答 11858000-11858999

# asp.net - 无法将操作重定向到操作

> ID：11858002
> 
> 赞同：0
> 
> 时间：2012-08-08T05:10:38.563
> 
> 标签：asp.net, asp.net-mvc-4

看过这里的所有帖子，但没有一个能解决我的问题。

我点击 URL：/Users/KickOutUser

```
public void KickOutUser()
        {
            TempData["ErrorMessage"] = "You need to be logged in to access that content";
            //Redirect to Login
            RedirectToAction("Login");
        }

        /*user controller*/
        public ActionResult Login()
        {
            //E.G ErrorMessage comes from HandleUnauthenticatedUser 
            ViewData["ErrorMessage"] = TempData["ErrorMessage"] ?? null;
            return View();
        } 
```

通过调试，我可以看到它命中了第一个方法，然后重定向，但重定向调用从不调用 Login 方法，我最终得到一个空白视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T05:14:34.770

```
public void KickOutUser() 
```

此方法不返回任何内容，请阅读[此](https://stackoverflow.com/questions/2048643/asp-net-mvc-controller-actions-that-return-void)

所以在这种情况下，你可以做的是返回`ActionResult`或更好`ViewResult`，如下所示，

```
 public ActionResult KickOutUser()
    {
        TempData["ErrorMessage"] = "You need to be logged in to access that content";
        //Redirect to Login
        return RedirectToAction("Login");
    } 
```

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T05:13:01.250

您必须从操作方法（具有 ActionResult 返回类型）返回 RedirectToAction。单独调用 RedirectToAction 不会做任何事情。

但是，这不是您应该处理安全性的方式。相反，您应该使用 AuthorizationFilter 来控制访问。

# ruby-on-rails - 运行 bundle 切换 Ruby 版本

> ID：11858006
> 
> 赞同：0
> 
> 时间：2012-08-08T05:10:59.700
> 
> 标签：ruby-on-rails, ruby-on-rails-3, bundle

所以我正在使用 RVM 并将其设置为使用 Ruby 1.9.3。我下载了一个教程应用程序，但是在我运行 bundle 和“which ruby​​”之后，我的机器显示我正在将 Ruby 1.8.7 用于所有其他项目。

这可能吗？bundle 实际上在做什么？

它不应该只为那个项目使用 1.8.7 吗？

如何使教程切换到使用 1.9.3 并使其不捆绑 1.8.7？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T05:39:53.680

避免版本切换的最佳方法是使用 .rvmrc，您可以在应用程序的根目录中创建一个 .rvmrc 文件。RVM 识别目录中的 .rvmrc 文件并加载其中指定的 gemset。以下是使用 ruby​​ 1.9.3 为 rails 3.1 创建 .rvmrc 的示例

```
echo "rvm ruby193@rails31" > .rvmrc 
```

使用 .rvmrc 文件意味着当您在本地计算机上运行应用程序时，您将自动使用正确的 Rails 和 gem 版本。如果您专门为您的应用程序创建一个 rvm gemset，这将最有效。

[RVM 最佳实践](https://rvm.io/rvm/best-practices)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T05:51:15.360

[Bundler](http://gembundler.com/rationale.html)只会帮助您管理您的宝石。ruby 版本由 RVM 控制。好像你的 rvm 没有正确安装。检查您的 shell 使用的 ruby​​ 是否是由 rvm 管理的。`$ which ruby`应该返回类似`/home/alexandre/.rvm/rubies/ruby-1.9.3-p194/bin/ruby`

RVM 安装相当复杂。我建议你检查你的。

# utf-8 - 任何实用程序都可以在 utf-8 和 ascii 之间转换绘图框字符？

> ID：11858007
> 
> 赞同：0
> 
> 时间：2012-08-08T05:11:12.730
> 
> 标签：utf-8, character-encoding

ASCII 文档中有一些旧代码。例如

```
/* main process
  ┌─┐  ┌─┐  ┌─┐
  │A├─>│B├─>│C│
  └─┘  └─┘  └─┘
 */ 
```

我想将它从 ascii 转换为 utf-8。我试过uni2ascii，但失败了。

[http://en.wikipedia.org/wiki/Box-drawing_character](http://en.wikipedia.org/wiki/Box-drawing_character)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T05:25:38.053

准确地说：ASCII 字符集不包括那些画线字符。您的文件正在使用其他字符集。您需要弄清楚您的文件是为什么字符集（或“代码页”）编写的。然后您可以使用一个实用程序[`iconv`](http://linux.die.net/man/1/iconv)将其转换为 UTF-8。

例如，如果它是为[代码页 437](http://en.wikipedia.org/wiki/Code_page_437)编写的，您可以将其转换为 UTF-8，如下所示：

```
iconv -f CP437 -t UTF8 < myfile.c > utf8-myfile.c 
```

# java - gcc -x java helloworld.java？

> ID：11858008
> 
> 赞同：1
> 
> 时间：2012-08-08T05:11:29.810
> 
> 标签：java

我是 Java 新手。

我正在尝试连接到数据库，但无法编译我的测试程序 ( `helloworld.java`)

```
[root@localhost my_src]# gcc -v
Using built-in specs.
Target: i386-redhat-linux
........... --enable-languages=c,c++,objc,obj-c++,java,fortran,ada..............
Thread model: posix
gcc version 4.1.2 20080704 (Red Hat 4.1.2-52)

[root@localhost my_src]# gcc -x java helloworld.java
gcc: error trying to exec 'jc1': execvp No such a file or directory 
```

我知道我必须安装 JDK 来编写 Java 类，但 gcc 不足以编译我的 helloworld.java？如果是这样，那上面有什么问题？我有什么遗漏吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T05:15:21.947

GCC 是不够的。你需要有这个：

GCJ - JavaTM 编程语言的 GNU 编译器 [http://gcc.gnu.org/java/](http://gcc.gnu.org/java/)

在你的机器上安装它，它会好的。

Redhat/Fedora 的安装：

```
yum update
yum install gcj (or java-gcj-compat) 
```

# android - 滚动视图在android中滚动到中间

> ID：11858009
> 
> 赞同：1
> 
> 时间：2012-08-08T05:11:38.330
> 
> 标签：android, scrollview

我在一个活动中有一个按钮，在第二个活动中有一个滚动视图滚动视图里面有很多视图。当我单击第一个活动中的按钮时，会调用第二个活动，但滚动视图会自动滚动到滚动视图的中心。我想显示手动向下滚动的第二个视图的顶部。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-22T06:24:24.750

您可以以编程方式将滚动视图滚动到某个位置。只需在第二个活动开始时使用 yourScrollView.scrollTo(0,0) 即可。希望这可以帮助。

# c# - 在 DDL 中未选择任何内容时将空值插入 DB

> ID：11858012
> 
> 赞同：1
> 
> 时间：2012-08-08T05:11:51.090
> 
> 标签：c#, asp.net

我正在将下拉列表中的值插入数据库。如果未选择任何内容，我想输入空值，但如果未选择任何内容 z-SELECT- 此选项未插入数据库。那么如何输入空值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T05:18:28.403

您可以在 select 中再创建一个值为 NULL 的选项。

```
<select>
 <option value="NULL">-SELECT-</option>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T05:17:29.323

在将其插入数据库之前检查选择框的值。你可能需要做这样的事情`

```
if(postedSelectValue=="-SELECT-")

              {
                 //set value to null
                 postedSlectValue=null;
              } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T05:20:12.597

如果您没有将数据源设置为下拉列表（在这种情况下，您会将所选项目转换为您在数据源中设置的类型，如果没有选择，则转换操作将返回 null）您将不得不手动检查是否选择了“-Select-”，然后使用简单的三元向数据库插入空值，如果您满意的话。但是您如何将项目添加到下拉列表中？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T05:37:32.840

您必须在插入时检查`dropdownlist`选择项是否等于`-SELECT-`然后您必须`null`在您的`database`

```
if(dropdownlist1.SelectedItem.Text == "-SELECT-")
{
   // set your database value null here 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T05:38:13.183

您可以使用以下代码..

```
string drpvalue=DropDown1.SelectedIndex==0?System.DBNull.Value:DropDown1.SelectedValue 
```

然后插入`drpvalue`数据库

# c++ - 使用“cvMatMul”时出现断言错误

> ID：11858014
> 
> 赞同：1
> 
> 时间：2012-08-08T05:12:30.003
> 
> 标签：c++, c, opencv, matrix-multiplication

在我的代码中，在某些时候我必须将 2 个矩阵相乘并将结果放入第 3 个矩阵中。我正在`cvMatMul()`为此使用并收到断言失败错误。执行矩阵乘法的代码部分：

```
CvMat* mulMatTt = cvCreateMat(EigenVector->rows,vi->cols,CV_32FC1);
cvMatMul(vi,EigenVector,mulMatTt); 
```

这里，vi 有 1 行和 10000 列，特征向量是一个 1x1 方阵。我相信错误是在分配矩阵的大小时`mulMatTt`。有人可以建议我如何让这个工作吗？

错误：

```
OpenCV Error: Assertion failed ((D.rows == ((flags & CV_GEMM_A_T) == 0 ? A.rows : A.cols)) && (D.cols == ((flags & CV_GEMM_B_T) == 0 ? B.cols : B.rows)) && D.type() == A.type()) in cvGEMM, file C:\opencv\modules\core\src\matmul.cpp, line 29 30 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T05:48:28.700

嗯，这是一个非常可怕的阅读断言。它检查三件事（都在一个断言中，所以我们不知道哪个是错误的）。所以给图书馆作者一些减分。

它检查的三件事是：1）结果矩阵的行数等于第一个矩阵的行数（除非您要求在乘法之前对第一个矩阵进行转置，在这种情况下，它会检查是否行相当于列）。2）结果矩阵的列数等于第二个矩阵的列数（同样，除非它如上所述被转置）。3）您的结果矩阵的类型与您的第一个矩阵的类型相同。

基本上，这是检查矩阵 D = AB 的格式是否正确。我假设还有另一个检查可以确保 A 和 B 兼容以相乘（A.cols == B.rows（除非转置）&& A.type ==B.type）。

所以我们没有正确地制作我们的结果矩阵。我认为这条线：

```
CvMat* mulMatTt = cvCreateMat(EigenVector->rows,vi->cols,CV_32FC); 
```

应该：

```
CvMat* mulMatTt = cvCreateMat(vi->rows, EigenVector->cols,CV_32FC); 
```

我假设类型是正确的。此外，只是编码风格的一个小问题，指针取消引用应该属于变量而不是类型：

```
CvMat *mulMatTt; 
```

否则你可能会落入这个陷阱：

```
CvMat* mulMatTt, identity_matrix; 
```

看起来 identity_matrix 是 CvMat* 类型，但实际上是 CvMat！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T05:36:27.623

在我的书中，如果您将 1x10000 矩阵乘以 1x1 矩阵，则结果是 1x1 矩阵而不是另一个 1x10000 矩阵。所以我认为断言是在抱怨`mulMatTt`乘法的大小错误。我可能完全错了。

# java - 在java中部分针对xsd的xml验证

> ID：11858016
> 
> 赞同：0
> 
> 时间：2012-08-08T05:12:41.173
> 
> 标签：java, xml, validation, xsd

是否可以逐部分验证大型xml？

例如

```
<retail>
<pdt>
</pdt>
<pdt>
</pdt>
<pdt>
</pdt>
</retail> 
```

将其视为一个大型 xml 文件。我需要针对 xsd 进行验证，即使任何一个 pdt 成功验证，我的验证器也应该返回 true，并且还应该给出其他失败的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:30:06.237

JAXP validate() 方法接受 Source，因此您应该能够提供包装 pdt 元素节点的 DOMSource。但是，这假定架构包含元素 pdt 的全局元素声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:03:33.213

首先参考[Java 中的这个 XML 验证](https://stackoverflow.com/questions/15732/whats-the-best-way-to-validate-an-xml-file-against-an-xsd-file?rq=1)。对于您的要求“需要针对 xsd 进行验证，即使任何一个 pdt 已成功验证，我的验证器也应返回 true，并且还应说明其他人失败的原因”

通过实现 org.xml.sax.ErrorHandler 接口创建一个自定义 ErrorHandler，然后在给定示例中将其注册为错误处理程序，如下所示：

```
 validator.setErrorHandler(new CustomValidationErrorHandler()); 
```

确保在调用 validate() 方法之前执行此操作。在您的 CustomErrorHandler 中，您可以记录在验证时将获得的异常，以查看您的 xml 有什么问题，如果您想继续验证，请不要抛出该异常。当你开始实施它时，你会得到它。

# c# - 在标签中获取javascript变量值

> ID：11858023
> 
> 赞同：0
> 
> 时间：2012-08-08T05:13:47.127
> 
> 标签：c#, javascript, c#-4.0

我无法在标签中获取 JavaScript 变量值。我正在尝试使用 Windows 应用程序。无法使用隐藏字段来获取变量的值。我尝试了下面的代码，但标签中没有值。

```
document.getElementsByTagName('label3').Text=checkedIDs;//In java script
string val = label3.Text.Tostring();//This is how i'm trying to get label3 value. 
```

我尝试了所有答案，但我在 label3 中没有得到任何价值。

```
HtmlElement head = webBrowser1.Document.GetElementsByTagName("head")[0];
        HtmlElement scriptEl = webBrowser1.Document.CreateElement("script");
        IHTMLScriptElement element = (IHTMLScriptElement)scriptEl.DomElement;
        element.text = " function sayHello(){var indices = [0,1];var checkedIDs = getCheckedResumeIDs(indices);if(checkedIDs.length == 0){alert('Please select at least one.');return false;}document.getElementById(\"<%=label3.ClientId%>\").value = checkedIDs;}";
        head.AppendChild(scriptEl);
webBrowser1.Document.InvokeScript("sayHello"); 
```

我正在将 JavaScript 注入网页并尝试获取函数的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T05:15:25.537

如果我没听错，您需要更改第一行

```
document.getElementById("<%=label3.ClientId%>").value=checkedIDs; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T05:18:46.483

您将两者`c#`和`javascript`功能混合在同一行中，这是错误的。

您正在使用`getElementsByTagName`需要分配给该名称的名称`Label`。

如果`label3`是`Label`c# 中的 a，那么代码应该是这样的：

```
document.getElementsById('<%= label3.ClientID %>').value = checkedIDs; 
```

现在，您将获得`label3`可以通过 c# 代码访问的值，就像您所做的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T05:32:05.010

错了，你用错了

改变`document.getElementsById`

和

```
document.getElementById 
```

它的元素而不是元素

所以像这样

```
document.getElementById("<%=label3.ClientId%>").value = checkedIDs; 
```

# android - android中res文件夹的优先级？

> ID：11858031
> 
> 赞同：2
> 
> 时间：2012-08-08T05:14:09.877
> 
> 标签：android

我做了一个项目，我在其中使用不同语言的 xml，比如`language_hi.xml`, `language_en.xml`. 所以根据文档，我为每个 xml 创建了不同的文件夹。例如，我为*language_en*制作`es/values-hi`的*language_hi.xml*我制作了*res/values-en*并且在我的每个 xml 中，字符串名称都是相同的，有没有办法在单击一个按钮时选择*language_en.xml*并在另一个事件上选择*language_hi.xml* .

这是我的xml

**res/values-hi/language_hi.xml**

```
<string name="hello">sachit</string>

<string name="app">colon</string> 
```

**res/values-en/language_en.xml**

```
<string name="hello">astro</string>

<string name="app">dev</string> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T05:42:29.390

您可以选择`Locale`在运行时使用；例如，将其设置为英语将导致`res\values-en\...`使用文件夹中的值。

为此，需要以下代码：

```
Resources res = getResources(); // From your context
DisplayMetrics dm = res.getDisplayMetrics();
Configuration conf = res.getConfiguration();
conf.locale = new Locale("en"); // For English
res.updateConfiguration(conf, dm); // Now, update the language 
```

**但是**，我强烈建议不要使用它。当用户运行应用程序时，他们希望它使用默认语言（在许多情况下是英语）或本地化语言。例如，当他们在俄罗斯时，给某人一个印地语应用程序真的不好。

请记住，如果您`en`将整个应用程序用于整个应用程序，那么从中获取价值`languages_hi.xml`是非常困难的，而且实际上在任何情况下都不应该这样做。一个应用程序应该始终使用相同的语言，否则它会开始让用户感到困惑（处理语言之间翻译的应用程序除外）。但是，如果您有兴趣这样做（出于任何深奥的原因），您应该查看[此答案](https://stackoverflow.com/a/6526588/1438733)。

PS：我想你知道这一点，但我还是应该提一下。`res\values\...`如果电话使用的语言环境未使用 指定，则使用文件夹中的任何字符串`res\values-xx\...`。您可以在[此处](http://developer.android.com/guide/topics/resources/localization.html#using-framework)找到相关信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T05:28:32.297

不，那里没有。Android 在运行时根据设备的语言来决定语言。您可以强制更改设备的语言，但这不是一个好的解决方案。相反，您可以生成自己的解决方案，并且可以自己更改每个字符串。例如，您可以根据自己的喜好设置语言选项。然后根据选择的语言，您可以显示该语言的字符串。假设您有一条消息，例如“请输入密码”。您可以编写一个方法 getStringAccordingToLanguage("password_warning")。如果语言是英文，此方法将返回“请输入密码”。你可以用这个方法代替字符串。

# android - 无法在 android 模拟器上使用键盘按钮

> ID：11858034
> 
> 赞同：0
> 
> 时间：2012-08-08T05:14:28.077
> 
> 标签：android, eclipse, android-edittext

现在我创建了一个由一个编辑文本框组成的android项目，这里我的问题是，当我尝试通过键盘在模拟器的编辑文本框中键入一些文本时，我的项目运行后，它不支持，但是，qwerty当我使用光标单击编辑文本框时，触摸键盘支持。与设置选项有什么关系吗？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T05:39:18.300

去**AVD>你的目标>编辑>硬件>新>键盘支持>是**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T05:37:42.993

ADT 20 中存在导致此问题的某种错误（或混乱的功能）。由于某种原因，它删除了通过物理键盘进行的交互，您必须自己重新添加。

我从使用 Mac 的人那里找到了下面的技巧，但是我用我的 Windows 7 机器检查了它，设置过程*应该*是相同的。

1.  首先，关闭您的模拟器并打开 AVD 管理器（`Eclipse -> Window`如果在 Eclipse 中，您可以这样做；否则它应该在您的 SDK 文件夹中）。
2.  您需要选择您正在使用的模拟器（您要修复的那个），然后单击`Edit...`。在下`Hardware:`，选择`New...`，然后搜索下拉菜单并找到`Keyboard Support`，然后点击`OK`。
3.  接下来，`Keyboard support`从该`Hardware:`部分中选择，然后单击（或双击）该`Value`列，并将其更改为`yes`.
4.  最后，单击`Edit AVD`以完成该过程。

您应该`Edit...`再次单击，并确认`Keyboard support`仍设置为`yes`。如果是，请启动您的模拟器，您应该一切顺利！

# java - 访问静态方法时的 Struts 2 动作线程安全

> ID：11858037
> 
> 赞同：2
> 
> 时间：2012-08-08T05:14:38.700
> 
> 标签：java, struts2, thread-safety, static-methods

我知道 Struts 2 Actions 是线程安全的。但是，如果这些 Action 类包含对实用程序静态方法的方法调用，会发生什么？线程安全会受到影响吗？

采用一个实用方法来解析上传的 excel 文件等。如果要声明该方法是静态的，它应该同步吗？

**更新：**

我只是在读取文件，并且文件已提交给操作，因此它本身应该是线程安全的......但是由于解析是在实用程序方法中完成的，我怀疑是否需要同步。但显然，如果您只访问方法范围变量，它应该是线程安全的。但是像 File 这样的参数是否属于该类别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T05:24:42.783

根据我的理解，除非您在线程之间共享数据，否则线程安全不会受到损害。您必须注意原子性、可见性等。

如果在每个线程执行堆栈中复制了任何方法级别的变量，并且如果有任何共享数据，则只会出现竞争条件，为此我们需要注意。

虽然堆栈对于当前线程来说是本地的，但是可以引用该堆栈上的共享对象。

# php - 在 PostgreSQL 中插入带单引号的值

> ID：11858045
> 
> 赞同：7
> 
> 时间：2012-08-08T05:15:54.130
> 
> 标签：php, sql, postgresql

我想使用单引号值运行以下查询。

```
INSERT INTO web_camp_keywords (web_id, keyword) VALUES (195, 'abc'hotels') 
```

我只是想增加`abc'hotels`价值。我使用了反斜杠，但它不起作用。

```
INSERT INTO web_camp_keywords (web_id, keyword) VALUES (195, 'abc\'hotels') 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T05:22:18.703

您可以用另一个单引号转义单引号。

```
INSERT INTO web_camp_keywords (web_id, keyword) 
VALUES (195, 'abc''hotels') 
```

但我个人认为您应该使用[带有绑定参数的准备好的语句](http://php.net/manual/en/pdo.prepared-statements.php)。

除此之外，使用带有绑定参数的准备好的语句是帮助防止[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)的最简单方法之一，SQL 注入是 Web 应用程序中安全漏洞的最大来源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T05:58:19.350

就像 Chris Moutray 和其他人提到的那样，最好使用 pdo 和准备好的语句。这是一个关于如何准备语句、为语句提供值然后执行它的示例。我忽略了连接。

```
$statement = $pdo->prepare("insert into web_camp_keywords (web_id, keyword) values (:id, :keyword)");
$statement->bindValue(':id', 195);
$statement->bindValue(':keyword', "abc'hotels");
$statement->execute(); 
```

# cascading - 使用烫伤从 HBase 读取

> ID：11858049
> 
> 赞同：2
> 
> 时间：2012-08-08T05:16:04.567
> 
> 标签：cascading, scalding

我对 Cascading/Scalding 非常陌生，并且无法弄清楚从 HBase 读取数据的热度。

我在 HBase 中有一张表，其中存储了扑克游戏的手牌历史记录（以非常简单的方式：）`id -> hand, serialized with ProtoBuf`。下面的工作应该遍历整个历史，并建立一个所有玩家的字典：

```
class DictionaryBuilder(args: Args) extends Job(args) {

  val input = new HBaseSource("hand", "localhost", 'hand, Array("d"), Array("blob"))
  val output = TextLine("tutorial/data/output0.txt")

  input
    .read
    .flatMap('hand -> 'player) {
    handBytes: Array[Byte] =>
       HandHistory.parseFrom(handBytes).getPlayerList.map(_.getName)
    }
    .write(output)

} 
```

但是，当我运行上面的作业时，会抛出错误

```
Caused by: com.google.protobuf.InvalidProtocolBufferException: Protocol message end-group tag did not match expected tag.
    at com.google.protobuf.InvalidProtocolBufferException.invalidEndTag(InvalidProtocolBufferException.java:73)
    at com.google.protobuf.CodedInputStream.checkLastTagWas(CodedInputStream.java:106)
    at com.google.protobuf.AbstractMessageLite$Builder.mergeFrom(AbstractMessageLite.java:163)
    at com.google.protobuf.AbstractMessage$Builder.mergeFrom(AbstractMessage.java:661) 
```

，这意味着得到的数据`flatMap`不是我可以直接使用的字节数组。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-20T22:26:56.027

看看这个项目[https://github.com/ParallelAI/SpyGlass](https://github.com/ParallelAI/SpyGlass)，它为 Scalding 提供了一个 HBase tap。顺便说一句，如果你想避免处理Array[Byte]，使用SpyGlass，你可以使用fromBytesWritable方法来转换你需要处理的字段。

# mysql - 一个好奇的 mysql 时间戳插入

> ID：11858050
> 
> 赞同：0
> 
> 时间：2012-08-08T05:16:23.127
> 
> 标签：mysql, insert, timestamp

我偶然发现了日期值大于当前日期的mysql时间戳插入问题，现在以下步骤是

```
CREATE TABLE foo(
`ID` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
`test_time`TIMESTAMP NULL DEFAULT NULL,
PRIMARY KEY (`ID`)
); 

INSERT INTO foo(test_time) VALUES('2038-01-19 11:14:08'); // fail
INSERT INTO foo(test_time) VALUES('2038-01-19 11:14:07'); // ok
INSERT INTO foo(test_time) VALUES('2038-01-18 23:59:00'); // ok
INSERT INTO foo(test_time) VALUES('2039-01-01 00:00:00'); // fail 
```

失败意味着 test_time 值为 0000-00-00 00:00:00 我的时区是 UTC+8 我想知道 2038-01-19 11:14:07 是否是 mysql 支持的最大时间戳，什么是有意义的时刻这次？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T05:18:53.177

要存储更高的日期值，您必须使用`DATETIME`数据类型。

`TIMESTAMP`范围从`'1970-01-01 00:00:01' UTC to '2038-01-19 03:14:07' UTC`

`DATETIME`范围从`'1000-01-01 00:00:00' to '9999-12-31 23:59:59'`

[http://dev.mysql.com/doc/refman/5.5/en/datetime.html](http://dev.mysql.com/doc/refman/5.5/en/datetime.html)

正如@Joachim Isaksson 所建议的那样：[PHP 和 mySQL：2038 年错误：它是什么？如何解决？](https://stackoverflow.com/questions/2012589/php-mysql-year-2038-bug-what-is-it-how-to-solve-it)

# python - Python 3.2 64 位 Numpy 安装 - LaPack 错误

> ID：11858056
> 
> 赞同：4
> 
> 时间：2012-08-08T05:17:12.130
> 
> 标签：python, numpy, python-3.x

我的 Windows 7 笔记本电脑上安装了 python 最新的 3.2.3 64bit。我一直在尝试使用 pip 来安装软件包。

但是我收到一个 Lapack 错误。

> C:\Users\renshaw family\build\numpy\build\py3k\numpy\distutils\system_info.py:13 54：用户警告：
> 
> ```
> Lapack (http://www.netlib.org/lapack/) sources not found.
> 
> Directories to search for the sources can be specified in the
> 
> numpy/distutils/site.cfg file (section [lapack_src]) or by setting
> 
> the LAPACK_SRC environment variable. 
> ```
> 
> **warnings.warn**（LapackSrcNotFoundError.doc ）
> 
> 错误：无法找到 vcvarsall.bat
> 
> ---------------------------------------- 命令 python setup.py egg_info 失败，错误代码1 在 C:\Users\renshaw family\AppData\Roaming\pip\pip.log 中存储完整的日志

我已经到[numpy 下载站点](http://sourceforge.net/projects/numpy/files/NumPy/1.6.2/)通过 exe 进行安装，但是该站点还没有 3.2 的 64 位版本。Python(x,y) 仍然只有 2.7。

我找到[了非官方版本](http://www.lfd.uci.edu/~gohlke/pythonlibs/#numpy)并下载了 numpy-MKL-1.6.2.win-amd64-py3.2.‌exe 这是目前安装非官方版本的唯一解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T08:39:41.283

没有官方方法可以在 Windows 上安装 numpy 64 位。这是由于此平台上的编译问题。但是，有一些非官方版本使用英特尔 MKL 作为 Lapack 的替代品。另一种选择是改用 32 位 Python 安装。但是您将受到 2 Gb 内存限制的影响。

参考 ：

[http://www.scipy.org/Download/#head-f64942d62faddeb27278a2c735e81ef2a7349db0](http://www.scipy.org/Download/#head-f64942d62faddeb27278a2c735e81ef2a7349db0)

[http://www.lfd.uci.edu/~gohlke/](http://www.lfd.uci.edu/~gohlke/)

# gcc - cygwin gcc 优化输出不正确

> ID：11858067
> 
> 赞同：0
> 
> 时间：2012-08-08T05:18:31.840
> 
> 标签：gcc, cygwin

我正在使用 cygwin gcc 4.5.3 版来编译以下代码。

```
 /* recursion.c */
int factorial_aux(int n, int t) {
    if (n <= 1) {
        return t;
    } else {
        return factorial_aux(n-1, n*t);
    }
}

int factorial(int n) {
    factorial_aux(n, 1);
}

int main() {
    int result = factorial(4);
    printf("%d\n", result);
} 
```

运行程序 compile with:`gcc recursion.c -o recursion.exe`打印 24，但一个编译`gcc -O2 recursion.c -o recursion.exe`打印 0。

有人能告诉我为什么不同的结果吗？有什么可能的方法来解决它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T05:24:01.800

您的`factorial`功能缺少一些东西。它没有`return`什么。

# javascript - 在 Javascript/JQuery 中从 REST Web 服务获取图像

> ID：11858080
> 
> 赞同：0
> 
> 时间：2012-08-08T05:19:54.500
> 
> 标签：javascript, jquery

我正在尝试通过从 REST Web 服务获取二进制数据来动态填充我的图像标签 src。我的链接类似于 myhost:port/docId/imageId/file，它返回“application/octet-stream”的内容类型，而 datatType 是二进制的。我的方法是获取这个二进制数据，base64 对其进行编码（使用 jquery.base64.js），然后将 base64 编码的数据放入 src。部分代码如下。

```
 $.ajax({
          url: " myhost:port/docId/imageId/file ",
          datatype: "binary",
          beforeSend: function (xhr) {
              xhr.overrideMimeType("text/plain; charset=x-user-defined");
          },
          success: function(image){
              var imgBase64 = $.base64.encode(image);
              return  imgBase64  ;
          },
          error: function(xhr, text_status){
              console.log("An error again " + text_status);
          }
    }); 
```

我采用的另一种简单的 AJAX 方法是：

```
 req.open('GET', " myhost:port/docId/imageId/file" , false);
  req.overrideMimeType('text\/plain; charset=x-user-defined');
  if (req.status != 200){
          console.log("Status code not 200");
          return '';
      }
  return req.responseText; 
```

我正在覆盖 MIME 类型，因为如果我不这样做，虽然 GET 显示状态 200 OK，但获取会引发一些错误。现在我是 base64 编码 "req.responseText" [var imgBase64 = $.base64.encode( req.responseText );] 并将它放在我图像的 src 中。

这就是我将base64数据放入img的方式： var imageSource = "data:image/png;base64," + imgBase64 ; $('#imageId').attr('src', imageSource);
但是，在这两种情况下编码时，jquery base64 都会向我抛出异常“INVALID_CHARACTER_ERR：DOM Exception 5”。即使我在将 base64 数据放入 src 时通过抑制此异常来对其进行强制编码，它也会在 Firebug 中显示损坏的数据。我的感觉是，当我覆盖 MIME 类型时，二进制数据的编码会以某种方式被篡改，因此在 base64 编码期间会出现一些问题。

谁能建议我哪里出错了，或者可能演示如何从 REST api 获取图像（jpeg/png/gif/有时是 tif）文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T05:29:46.477

也许您不需要对数据进行编码。尝试将确切的 base64 字符串转储到图像标签中，例如

```
<img src="data:image/png;base64,@@BASE64STRING@@"/> 
```

# jquery - 如何防止子元素继承任何父样式？

> ID：11858082
> 
> 赞同：0
> 
> 时间：2012-08-08T05:20:15.353
> 
> 标签：jquery, css

基本上我将我的内容包含在父页面中。我需要确保我没有继承父级中设置的任何样式。

我想确保父级仍然将这些样式应用于内容，但是对于通过 Ajax 调用加载的我的内容，我的样式被应用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T05:36:48.590

您可以尝试以下代码将样式重置为空白...您也可以添加自己的...

```
$('body').find("*").each(function() {
    $this = $(this);
    if($this.attr('style').length > 1){
        $this.attr('style','');
    }
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T05:35:48.417

覆盖父母的每一个风格设置是非常困难的。您必须执行样式重置之类的操作，但如果您通过 CSS 执行此操作，您甚至必须确保您有足够的特异性来确保您应用了覆盖。

你最好的选择可能是使用一个获得完全干净的风格上下文的 iframe。

如果您知道哪些样式值是一个问题，您可以在您自己的内容容器上手动设置每一个，但如果您不知道，则必须涵盖所有样式属性（这将非常低效而且不是很实用）。

# sql - .net MVC 的 tail -f development.log？如何监控我的数据库活动？

> ID：11858083
> 
> 赞同：1
> 
> 时间：2012-08-08T05:20:19.977
> 
> 标签：sql, ruby-on-rails, sql-server, asp.net-mvc, asp.net-mvc-4

**简而言之：我只想能够查看我的 MVC 应用程序读取/写入其数据库的频率，但不知道如何。**. 长篇大论，见下图：

* * *

我正在关注个人使用 Ruby on Rails 和 .Net MVC 4（代码优先，实体框架）的教程。

在 RoR 中，他证明了他编写控制器动作的方式是次优的，因为它将查询数据库约 400 次。为了证明这一点，他在 CLI 中输入了 tail -f log/development.log，果然，当他刷新页面时，他的日志中出现了数百行文本。

.Net MVC 是否有与此等价的功能？有没有办法让我知道我是否从代码中滥用了数据库？我对 SQL 还是很陌生，所以像“使用 SQL Profiler”这样的句子不会有太大帮助，抱歉。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:30:32.413

我假设您使用实体框架。我没有跟上它最近的想法，但是 afaik EF 对日志记录没有简单的支持。有一个示例项目，请参阅[MSDN 代码库上提供的实体框架的跟踪和缓存，](http://blogs.msdn.com/b/jkowalski/archive/2009/06/11/tracing-and-caching-in-entity-framework-available-on-msdn-code-gallery.aspx)它增加了对跟踪的支持。不完全是微不足道的。

如果您使用良好的 ole' LinqToSQL，它*确实*支持日志记录，请参阅[使用 DataContext.Log 属性分析 LINQ to SQL 以](http://mattberseth.com/blog/2008/01/profiling_linq_to_sql_using_th.html)获取示例。

但是，如果您愿意“使用 SQL Profiler”，那么还有一个更好的选择。也许这个简短的教程视频可以提供帮助：[SQL Server Profiler 教程视频](http://sqlserverpedia.com/wiki/Using_SQL_Server_Profiler)

# c# - 系统内存不足异常

> ID：11858085
> 
> 赞同：1
> 
> 时间：2012-08-08T05:20:34.360
> 
> 标签：c#, visual-studio-2010, sockets, out-of-memory

我们正在使用 Visual Studio C# 2010 和 SQL SERVER 进行客户端服务器套接字编程。

该程序运行良好。但是过了一段时间它偶然发现了错误

```
"System out of memory exception" 
```

这里我们使用一个socket包类

```
 public class SocketPacket
 {
        public SocketPacket(System.Net.Sockets.Socket socket, int clientNumber, string ClientIP)
        {
            m_currentSocket = socket;
            m_clientNumber = clientNumber;
            m_ClientIP = ClientIP;
        }
        public System.Net.Sockets.Socket m_currentSocket;
        public int m_clientNumber;
        public byte[] dataBuffer = new byte[10000000];
        public string m_ClientIP;
    } 
```

我认为 dataBuffer 已满

如何释放数据缓冲区？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T05:24:40.733

您`SocketPacket`的类包含`System.Net.Sockets.Socket`实现`IDisposible`接口的类型字段，因此您应该手动处理您的类的实例。另外我建议你在课堂上实现 IDisposible `SocketPacket`。

```
 public class SocketPacket: IDisposable
    {
        public SocketPacket(System.Net.Sockets.Socket socket, int clientNumber, string ClientIP)
        {
            m_currentSocket = socket;
            m_clientNumber = clientNumber;
            m_ClientIP = ClientIP;
        }
        public System.Net.Sockets.Socket m_currentSocket;
        public int m_clientNumber;
        public byte[] dataBuffer = new byte[10000000];
        public string m_ClientIP;
        public void Dispose()
        {
            m_currentSocket.Dispose();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:24:36.407

您应该查看有关如何正确实施 IDisposable 的 MSDN 报告。这可能会解决您的问题。[http://msdn.microsoft.com/en-us/library/ms244737(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms244737(v=vs.80).aspx)

编辑：经过进一步检查，C# 类型的 Socket 也实现了 IDisposable，因此尝试使用 using() 块围绕 Socket 对象的使用。这将确保您正确清理 Socket 对象。

# php - 使用 MySQL 或 NoSQL 数据库

> ID：11858086
> 
> 赞同：2
> 
> 时间：2012-08-08T05:20:52.097
> 
> 标签：php, mysql, sql, performance, nosql

我将启动一个大型 Web 应用程序，该应用程序将由 PHP（YiiFramework）提供支持，我希望在启动应用程序之前构建一个强大且可扩展的架构，能够处理大量流量。

应用程序 SQL 查询大约（80% 读取，20% 在更新和插入之间），我实际上在数据库中有 15 个表，以及许多 mediumtext 列，这将是许多按文本搜索的查询，例如（WHERE `foo`LIKE '%VARS%'）

我将使用 PHP APC 来提高性能，从 Memcached 服务器开始，并使用 Nginx 作为备用代理。

对于数据库：NoSQL 数据库可以替代 MySQL 之类的 RDBMS 吗？

NoSQL 数据库是否比 MySQL 更高效？

对于我的情况，最好的 NoSQL 数据库解决方案是什么（80% 读取，20% 在更新和插入之间），为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T05:50:59.910

LIKE '%term%' 不会缩放。根据表中的行数，查询将始终为 O(N)。添加行时，查询会变慢。

您将需要使用文本索引。看看使用 Sphinx 或 SOLR。

[Sphinx 全文搜索](http://sphinxsearch.com/) [SOLR 全文搜索](http://lucene.apache.org/solr/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T05:53:39.557

很多问题。

nosql DB 可以潜在地替换 RDBMS。这取决于您的基础架构和组织需求。但从技术上讲，它没有问题。我不知道很多你不能用 map reduce 做的查询，你可以用 sql 做。

如果它更有效取决于您的需求。如果您使用大量文本搜索，请尝试使用 lucene (solr) 之类的索引来提高这两种情况下的性能。但也有使用 nosql 和索引的解决方案。所以一个有经验的 rdbms 程序员绝对可以胜过一个没有经验的 nosql 程序员，反之亦然。

I have some experience with couchdb and it is fast for my application. But it depends. And most stable nosql database are fast, also rdbms are fast. It depends so much on the exact queries and setup.

# google-app-engine - GAE ndb 查询！= 标签

> ID：11858087
> 
> 赞同：2
> 
> 时间：2012-08-08T05:20:57.247
> 
> 标签：google-app-engine, google-cloud-datastore

在文档中，它说没有办法查询不包含等于特定值的标签的实体：[https ://developers.google.com/appengine/docs/python/ndb/queries#neq_and_in](https://developers.google.com/appengine/docs/python/ndb/queries#neq_and_in)

我有一组实体，每个实体都有一组标签。我需要找到那些没有特定标签的实体。ndb 查询限制有什么解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:40:24.083

每次创建/更新实体时，它的索引都会根据它的属性值进行更新。

如果属性不存在或列表属性不包含值（在您的情况下为标签），则索引中没有它的条目。由于查询依赖于索引来查找内容，因此不会被找到。

这不是 NDB 查询限制，而是 GAE 数据存储限制，这意味着访问它的所有 API 都具有此限制（Java/Python/Go、低级 API 等）。

AFAIK，没有直接的解决方法。您可以通过获取所有文章然后为缺少标签的人签入代码来围绕它进行编码，但这可能会根据文章的数量而代价高昂。

您可能想创建一个新问题并从应用程序的角度详细描述该问题：您要达到的最终结果是什么？

# c++ - 字符串上的C ++ if语句错误

> ID：11858089
> 
> 赞同：2
> 
> 时间：2012-08-08T05:21:02.827
> 
> 标签：c++, string, if-statement

我知道通过询问这个问题我听起来很像新手，但是我很想知道为什么在通过字符串上的 if 语句使用简单运算符时会出错？这是我为产生错误所做的事情：

```
 void Shift (string updown )
{
    if (updown == "hel")
    {
        //random code
    }
} 
```

我的包括：

```
#include <iostream>
#include <fstream>
#include <Windows.h>
using namespace std; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T05:22:26.303

好吧，你知道，尝试包含`<string>`标题。并且在包含之后写入`std::string`或添加`using std::string`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T05:22:36.277

你忘了

```
#include <string> 
```

其他头文件可能包括提供`std::string`类的内部头文件，但没有关联的函数，例如`==`您缺少的运算符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T05:23:58.537

您正在尝试使用 std::string 类而不实际包含必要的标头。

添加`#include <string>`到您的包含列表。

# time - 应用程序如何跟踪“天数”？

> ID：11858091
> 
> 赞同：1
> 
> 时间：2012-08-08T05:21:22.173
> 
> 标签：time

我正在创建一个需要跟踪已过去天数的应用程序。例如，自首次打开应用程序起 30 天后，显示一条消息。

我敢肯定，这已经做了无数次了……“您的评估期将在 10 天内结束”浮现在脑海中。那么这样的事情有标准方法吗？处理用户更改系统时间/日期的东西？

如果这很重要，我的应用程序在 Qt 中。所以我无权访问操作系统调用。我只是想知道在我发明自己的方法之前是否有一些典型的方法。

# c++ - UDP数据包排列

> ID：11858092
> 
> 赞同：2
> 
> 时间：2012-08-08T05:21:26.147
> 
> 标签：c++, udp, boost-asio, p2p, packet

我已经使用 Boost C++ 实现了一个 P2P 应用程序。如您所知，UDP不保证数据包顺序甚至数据包传递，所以这是我的想法：

将一个请求的所有接收到的 UDP 数据包放入链接列表中并正确排序，以便可以以稳健的方式识别序列和丢失的数据包。链接列表是使用 struct 制作的。

-或者-

我想把它放在一个向量中，并将向量中的数据包安排在一个单独的线程中。

哪一个是最好的方法？或者除了窗口滑动之外，您还有其他最好的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T06:31:04.477

与其实现自己的容器或排序，不如使用标准库中已有的东西？

例如，您可以使用[`std::map`](http://en.cppreference.com/w/cpp/container/map)序列号作为键。它会自动按键排序。

或者您可以使用[`std::priority_queue`](http://en.cppreference.com/w/cpp/container/priority_queue)自己的比较函数来检查序列号。

您还应该查看[UPnP NAT 遍历](http://en.wikipedia.org/wiki/Universal_Plug_and_Play#NAT_traversal)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T05:40:38.923

为了确保正确的顺序并检测丢失的数据包或重复数据，您必须使用序列号或类似方法。当您将数据包放在发送方的链表中时，如何在接收方检查正确的顺序？有关检测丢失和乱序数据包的示例解决方案，请参阅 TCP 协议（​​尽管它做得更多）。

通常在可以接受丢包或重新排序时使用 UDP。如果你想确保这两个属性，即使是 UDP，你也必须自己做一些工作。

# bluetooth - 如何在 iOS 应用程序中从蓝牙 LE 设备获取通知

> ID：11858096
> 
> 赞同：7
> 
> 时间：2012-08-08T05:21:50.740
> 
> 标签：bluetooth, notifications, bluetooth-lowenergy

我正在开发一个 iOS 蓝牙 LE 应用程序。我能够正确且成功地遵循的功能如下：

1.  发现外围设备。
2.  连接外围设备。
3.  获取服务和特征。
4.  能够在单击读取按钮时从特征中读取数据。
5.  能够写入数据。

这里我遇到了一个问题，只有当 BLE 设备将传入的数据传输到应用程序时，我才需要读取它。我正在明确阅读按钮点击的特征。我的 BLE 设备在特定的时间间隔内连续传输一些数据，但我无法得到它。

我在特性上也设置了 setNotify，但也没有成功。

```
[peripheral setNotifyValue:YES forCharacteristic:characteristic]; 
```

BLE 设备事件如何通知我的应用程序（由它发送到应用程序）？请在这里帮助我或给我一些建议。

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-25T15:01:06.413

你正在做的应该工作。从 Peripheral 到达的所有数据都将到达`didUpdateValueForCharacteristic`回调方法。在那里寻找它。

因此，无论您是显式调用该`readCharacteristic`方法还是只是设置外围设备以在有数据可用时通知您（例如警报或心跳），您仍然会在同一个地方收到数据。

**注意**：当您发送`setNotifyValue`消息时，您应该会收到有关该`didUpdateNotificationStateForCharacteristic`方法的回调且没有错误。如果没有，我建议您查看您的外设固件并确保该特性不是只读/可写的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-24T21:04:19.057

在外围设备端，需要设置特性的属性以启用通知。您可以使用 CBCharacteristicPropertyNotify 属性执行此操作。例如，以下是创建特征的方式：

```
CBMutableCharacteristic *alertLevelCharacteristic = 
[[CBMutableCharacteristic alloc] initWithType:alertLevelCharacteristicUUID
                                   properties:CBCharacteristicPropertyRead | CBCharacteristicPropertyNotify
                                        value: nil permissions:CBAttributePermissionsReadable]; 
```

# php - 从 mysql 数据库中检索值 json_encode php 中的值

> ID：11858105
> 
> 赞同：0
> 
> 时间：2012-08-08T05:23:22.083
> 
> 标签：php, mysql, json

我想从 mysql 数据库中检索值并将其转换为 json。

```
 <?php
   $con = mysql_connect("localhost","name","password");
   if (!$con)
   {
       die('Could not connect: ' . mysql_error());
   }
   mysql_select_db("dbname", $con);

   $result = mysql_query("SELECT Inc_number FROM Increment WHERE id=1"); 
   while($row = mysql_fetch_array($result))
   {
  echo $row['Inc_number'];
   echo "<br />";
   }
   mysql_close($con);
   $objJSON['sample'] = $result;
   $objJSON = json_encode($objJSON);
   echo($objJSON);
  ?> 
```

我得到这样的输出，

4

{“样本”：空}

我想要 4 而不是 null。我在这里做错了什么？请帮帮我

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T05:26:58.303

你想要的是`$row['Inc_number']`，不是`$result`。

```
$result = mysql_query("SELECT Inc_number FROM Increment WHERE id=1");
$row = mysql_fetch_array($result);
echo json_encode(array('sample' => $row['Inc_number'])); 
```

# java - 有没有检测文件扩展名的本地方法？

> ID：11858107
> 
> 赞同：0
> 
> 时间：2012-08-08T05:23:28.910
> 
> 标签：java, file-upload, playframework

目前，我正在做以下事情，这不是我想要的。我只是希望能够检测到文件扩展名，并根据该扩展名将其复制到服务器或拒绝它。

```
 MimetypesFileTypeMap mimeTypesMap = new MimetypesFileTypeMap();
    FileInputStream is1 = new FileInputStream(file);
    String mimeType = mimeTypesMap.getContentType(file);

    InputStream is2 = new BufferedInputStream(new FileInputStream(file));
    String content = URLConnection.guessContentTypeFromStream(is2);

    System.out.println(mimeType);
    System.out.println(content); 
```

我得到了 mimetype，但同样，这不是我想要的。`URL.guessContentFromStream()`总是返回 null。

播放是否具有读取文件扩展名的本机方式？还有哪些其他解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T05:28:04.370

`FileTypeDetector`从包装中使用`java.nio.file.spi`

**有关详细信息，请参阅此链接：**

[http://openjdk.java.net/projects/nio/javadoc/java/nio/file/spi/FileTypeDetector.html](http://openjdk.java.net/projects/nio/javadoc/java/nio/file/spi/FileTypeDetector.html)

**/////已编辑//////**

尝试`FileNameExtensionFilter`

**请参阅此链接：**

[http://docs.oracle.com/javase/6/docs/api/javax/swing/filechooser/FileNameExtensionFilter.html](http://docs.oracle.com/javase/6/docs/api/javax/swing/filechooser/FileNameExtensionFilter.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:17:31.910

检测文件扩展名非常简单，这是我通常做的：

```
String filename = "a long.filename.ext";
String extension = filename.substring(filename.lastIndexOf('.') + 1); 
```

# c# - 使用 EPPlus Excel - 如何忽略 Excel 错误检查或删除单元格左上角的绿色标记

> ID：11858109
> 
> 赞同：13
> 
> 时间：2012-08-08T05:23:53.263
> 
> 标签：c#, excel, epplus

我使用 EPPlus 导出 excel 2007 文件。该文件可以正常导出，但我在设置列格式时遇到了一些问题。我的数字样式的字符串列（采购订单号例如 49000001）在每个单元格的左上角用绿色标签导出，我该如何删除它？

我尝试将数字格式设置为“常规”，但它不起作用

请帮忙。

ps我用C#

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-23T15:30:41.613

EPPLus 目前不支持禁用该绿色标签。但是，可以修改项目以抑制它。首先，您需要向项目中添加一个新类 ExcelIgnoredError.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml;

namespace OfficeOpenXml
{
    public class ExcelIgnoredError : XmlHelper
    {
        private ExcelWorksheet _worksheet;

        /// <summary>
        /// Constructor
        /// </summary>
        internal ExcelIgnoredError(XmlNamespaceManager ns, XmlNode node, ExcelWorksheet xlWorkSheet) :
            base(ns, node)
        {
            _worksheet = xlWorkSheet;
        }

        public bool NumberStoredAsText
        {
            get
            {
                return GetXmlNodeBool("@numberStoredAsText");
            }
            set
            {
                SetXmlNodeBool("@numberStoredAsText", value);
            }
        }

        public bool TwoDigitTextYear
        {
            get
            {
                return GetXmlNodeBool("@twoDigitTextYear");
            }
            set
            {
                SetXmlNodeBool("@twoDigitTextYear", value);
            }
        }

        public string Range
        {
            get
            {
                return GetXmlNodeString("@sqref");
            }
            set
            {
                SetXmlNodeString("@sqref", value);
            }
        }
    }
} 
```

接下来您需要修改 ExcelWorkSheet.cs，添加以下代码：

```
public ExcelIgnoredError _ignoredError;

public ExcelIgnoredError IgnoredError
{
    get
    {
        if (_ignoredError == null)
        {
            // Check that ignoredErrors exists
            XmlNode node = TopNode.SelectSingleNode("d:ignoredErrors", NameSpaceManager);

            if (node == null)
            {
                CreateNode("d:ignoredErrors");
            }

            //Check that ignoredError exists
            node = TopNode.SelectSingleNode("d:ignoredErrors/d:ignoredError", NameSpaceManager);

            if (node == null)
            {
                CreateNode("d:ignoredErrors/d:ignoredError");
                node = TopNode.SelectSingleNode("d:ignoredErrors/d:ignoredError", NameSpaceManager);
            }

            _ignoredError = new ExcelIgnoredError(NameSpaceManager, node, this);
        }

        return (_ignoredError);
    }
} 
```

编译 EPPPlus 解决方案，将其包含在您的项目中，您将能够使用与此类似的代码删除标签：

```
//Get a reference to the worksheet
ExcelWorkSheet sheet = package.WorkBook.WorkSheets(0);

//Set the cell range to ignore errors on to the whole sheet
sheet.IgnoredError.Range = Sheet.Dimension.Address;

//Do not display the warning 'number stored as text'
sheet.IgnoredError.NumberStoredAsText = true; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-10-27T14:19:41.613

除了@briddums 的回答，从 EPPlus 版本 5 开始，您可以忽略错误并且无需接触 EPPlus 源。

```
var p = new ExcelPackage();
var ws = p.Workbook.Worksheets.Add("IgnoreErrors");

ws.Cells["A1"].Value = "1";
ws.Cells["A2"].Value = "2";
var ie = ws.IgnoredErrors.Add(ws.Cells["A2"]);
ie.NumberStoredAsText = true;   // Ignore errors on A2 only 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-12T11:01:17.707

此代码有效

```
private void removingGreenTagWarning(ExcelWorksheet template1, string address)
            {
                var xdoc = template1.WorksheetXml;
                //Create the import nodes (note the plural vs singular
                var ignoredErrors = xdoc.CreateNode(System.Xml.XmlNodeType.Element, "ignoredErrors", xdoc.DocumentElement.NamespaceURI);
                var ignoredError = xdoc.CreateNode(System.Xml.XmlNodeType.Element, "ignoredError", xdoc.DocumentElement.NamespaceURI);
                ignoredErrors.AppendChild(ignoredError);

                //Attributes for the INNER node
                var sqrefAtt = xdoc.CreateAttribute("sqref");
                sqrefAtt.Value = address;// Or whatever range is needed....

                var flagAtt = xdoc.CreateAttribute("numberStoredAsText");
                flagAtt.Value = "1";

                ignoredError.Attributes.Append(sqrefAtt);
                ignoredError.Attributes.Append(flagAtt);

                //Now put the OUTER node into the worksheet xml
                xdoc.LastChild.AppendChild(ignoredErrors);
            } 
```

用它作为

```
removingGreenTagWarning(template1, template1.Cells[1, 1, 100, 100].Address); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T05:29:11.953

将采购订单编号值转换为数字，然后存储在单元格中。每个单元格左上角的绿色标签即将出现，因为您将数字作为字符串存储在那里。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-25T15:24:49.073

是的，EPPlus 不能根据数据的值将数据视为数字。如果您的基础数据是字符串数据类型，那么您可以尝试以数字数据类型获取它。例如，如果您从存储过程中获取数据，请尝试将其作为数值获取。我们在实现它时遇到了一个问题。我们对 Web 使用相同的存储过程并生成 excel。出于格式化原因，Web UI 需要它是字符串数据类型，而 EPPlus 显然需要它是数字格式，以便可以将其显示为数字。解决方案是在 C# 代码中使用 EPPlus 导出到 excel 时将所需数据转换为数字。因此，您需要编写一个转换函数，将 DataTable 中的必填字段转换为您需要的数据类型（或在存储过程中使用 cast 或 convert 实现转换逻辑）。

总之： - 编写一个 C# 函数来转换您获得的 DataTable 中列的数据类型，然后使用 EPPlus 将其作为 excel 表发送。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-04-10T12:30:38.667

我以更简单的方式解决了这个问题。例如，如果我将值“123”定义为对象，而不是字符串，那么它将存储到 excel 文件中。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2017-03-30T12:39:37.477

您可以使用

```
worksheet.Cell[1,1].Formula = "TEXT(" + cellvalue ")"; 
```

# xcode - 即使应用程序被杀死，位置服务也不会停止

> ID：11858113
> 
> 赞同：0
> 
> 时间：2012-08-08T05:24:06.027
> 
> 标签：xcode, service, location, mapkit

我有一个应用程序在后台和前台 Mapkit 中使用 CLLocationManager 来显示用户位置。我没有激活 BackgroundModes。因此，如果我的应用程序进入后台，我将停止使用 [mapview setShowsUserLocation:NO] 显示用户位置。在 appDelegate 中，我启动 LocationManager 并每隔 30 秒使用 [locationManager startUpdatingLocation] 和 [locationManager stopUpdatingLocation] 停止它（此时无需担心电池耗尽）以在后台获取用户位置。因此，可以说 locationManager 开启 5 秒，关闭 25 秒。这 25 秒位置服务指示灯应该会消失，对吧？但事实并非如此。即使我没有告诉 LocationManager 启动，指示器也一直存在。杀死该应用程序无济于事，只会在设置中关闭位置服务。

即使在这些帖子中，我也尝试了不同帖子中的所有内容： [Locationservice Indicator保持“开启”](https://stackoverflow.com/questions/4872055/locationservice-indicator-stays-on) [当应用程序终止时位置服务不会停止](https://stackoverflow.com/questions/7413066/location-services-dont-stop-when-application-is-terminated)

而且我永远不会调用 locationManager=nil 或释放它。太疯狂了..每个人都可以帮助我吗？

* * *

更新：所以这让我非常抓狂。几天以来一直坚持这一点。并且只在我真正的 iPhone 上测试过。现在我在 iPad 和 iPhone 模拟器上进行了尝试，在这两种设备上都符合我的预期：当应用程序处于后台时，指示灯亮起 5 秒，指示灯熄灭 25 秒。那么这是我真实手机上的错误还是有人有一些建议？我有 5.1.1 和越狱，但这不应该影响它！？

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T04:41:46.983

好的，我刚刚想通了。[这篇文章](https://stackoverflow.com/a/11056678/1494178 "这个帖子")帮助了我。

> “从您的 iOS 设置中选择常规 | 重置 | 重置位置警告。这会将警告重置到所有应用程序。这意味着下次您启动需要位置的应用程序时，iOS 将通过位置权限对话框提示您。选择操作表中的‘重置警告’。”

我打了几次电话，然后它按我的预期工作（并且一直在模拟器中工作）:-)！现在我可以考虑耗尽电池等...

# android - 使用模拟器检查 Android SD 卡存储

> ID：11858115
> 
> 赞同：0
> 
> 时间：2012-08-08T05:24:06.760
> 
> 标签：android

我将信息存储在 Android 应用程序的 SD 卡中的文件中。我可以在模拟器中检查信息是否正确存储在 SD 卡中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T05:53:48.267

试试这个方法：

1.  首先你需要运行你的应用程序。
2.  然后转到窗口-> ShowView-> 文件资源管理器
3.  打开右侧的文件资源管理器选项卡。
4.  展开树状结构。mnt/sd卡/
5.  选择您的文件，然后在文件资源管理器的 TopMost 栏上，您会发现两个按钮用于“从设备中拉/推文件”。选择那个。

它将在您的计算机上。希望这是你想要的。

# objective-c - 在目标 c 中交换对象

> ID：11858120
> 
> 赞同：1
> 
> 时间：2012-08-08T05:24:19.600
> 
> 标签：objective-c, xcode, oop, object, ownership

我试图在按钮操作时交换两个对象，但我无法让它工作。它是第一次交换，但下次当我单击按钮时，它会因 EXC_BAD_ACCESS 而崩溃。

这是代码

```
-(IBAction)swapLocation
{
    CCLocDTO *tempDto = searchDTO.toDTO;
    searchDTO.toDTO = searchDTO.fromDTO;
    searchDTO.fromDTO = tempDto;

    NSLog(@"From Location is %@",searchDTO.fromDTO.streetAddress); //it becomes empty on next button click
    NSLog(@"To Location is %@",searchDTO.toDTO.streetAddress);
    NSLog(@"From Special Location is %@",searchDTO.fromSpecialDTO.locationName);
    NSLog(@"To Special Location is %@",searchDTO.toSpecialDTO.locationName);

    [self.tableView reloadData];

} 
```

我在 Search DTO(searchDTO) 中分配 fromDTO 和 toDTO。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T05:26:45.783

如果你不使用ARC，则需要`tempDto`在设置为其他内容之前保留`searchDTO.toDTO`；否则旧值可能会被释放，并且您将在`tempDto`. 它应该如下所示：

```
CCLocDTO *tempDto = [searchDTO.toDTO retain];
searchDTO.toDTO = searchDTO.fromDTO;
searchDTO.fromDTO = [tempDto autorelease]; 
```

或像这样：

```
CCLocDTO *tempDto = [searchDTO.toDTO retain];
searchDTO.toDTO = searchDTO.fromDTO;
searchDTO.fromDTO = tempDto;
[tempDto release]; 
```

# java - Java - org.apache.commons.codec.binary.Base64 消除换行符

> ID：11858125
> 
> 赞同：0
> 
> 时间：2012-08-08T05:24:55.057
> 
> 标签：java, certificate, base64

更换时遇到以下`sun.misc.BASE64Encoder`问题`org.apache.commons.codec.binary.Base64`。

我正在使用`X509Certificate`，我需要使用`Base64`它来编码由结果获得的字节数组`java.security.cert.Certificate.getEncoded()`

看起来在保留它的`org.apache.commons.codec.binary.Base64`同时消除了换行符，请参见下面的代码：`sun.misc.BASE64Encoder`

```
String certString =  Base64.encodeBase64(certificate.getEncoded()); 
```

VS

```
sun.misc.BASE64Encoder encoder = new sun.misc.BASE64Encoder();          
String certString = encoder.encode(certificate.getEncoded()); 
```

我知道有一个选项可以使用`encodeBase64Chunked`，但默认值为 76 个字符，此外还有一个选项来定义 lineLength 和 lineSeparator 但我不想使用固定长度而是使用我的输入 -`certificate.getEncoded()`包括行尾字符.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T05:33:10.330

尝试这个：

```
@Test
public void testBase64() {
String str = "a string with some\n\n newlines";
try {
    // To base 64
    String base64 = javax.xml.bind.DatatypeConverter.printBase64Binary(str.getBytes("UTF8"));

    // From base 64
    byte[] clear = javax.xml.bind.DatatypeConverter.parseBase64Binary(base64);
    String clearText = new String(clear, "UTF8");

    assertEquals(str, clearText);
} catch (UnsupportedEncodingException e) {
    e.printStackTrace();
    fail();
}

} 
```

# asp.net-mvc-3 - 如何确定请求是否来自特定的 Windows 域

> ID：11858127
> 
> 赞同：2
> 
> 时间：2012-08-08T05:25:03.980
> 
> 标签：asp.net-mvc-3, windowsdomainaccount

我正在使用 MVC-3 开发一个 Web 应用程序

我想给特定 Windows 域的用户一些特殊权限；因此我必须确定请求是否来自该特定域。

请注意，我使用的是表单身份验证。

我知道我可以通过跟踪用户的 IP 地址来做到这一点。但是**有没有办法直接获取域名呢？**

例如，如果用户`ADomain\AUsername`在 windows 机器上登录，有没有办法得到`ADomain`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T05:32:08.600

答案是，也许，有时。首先，只有 Internet Explorer 将凭据传递到服务器。其次，服务器必须与客户端在同一个域中，第三，两者之间不能有任何代理或其他东西。计算机和客户端也必须在同一网络上。

尽管如此，它仍然只在某些时候有效。什么版本的 IIS？如果是 IIS7 或更高版本，那么还有其他问题，您无法将表单身份验证和 windows 身份验证结合起来。如果您使用的是 IIS6，那么它可能可以完成，但这是一个巨大的痛苦。

实际上，我不会打扰.. 节省用户输入用户名和密码的工作量太大了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-06T18:30:37.980

您可以使用请求对象的 UrlReferrer 获取域名。

```
string Domain Name = Request.UrlReferrer.Host; 
```

此外，如果您想在您的应用程序中检查请求是否来自不同的域，请尝试使用您自己的应用程序 URL 的主机名来验证 URL 引用者的主机名。请使用以下代码

```
(if Request.Url.Host != Request.UrlReferrer.Host)
{
} 
```

# tcl - 使用 nagelfar 工具获取 Tcl 中的代码覆盖率

> ID：11858135
> 
> 赞同：0
> 
> 时间：2012-08-08T05:25:49.680
> 
> 标签：tcl, code-coverage

我正在使用 nagelfar 工具来获取 Tcl 代码的代码覆盖率（它使用 starkit 和 tclkit 捆绑到可执行文件（Windows 上的 exe 和 Linux 上的 bin）中）。我检测了 Tcl 代码并使用 starkit 和 tclkit 构建了一个可执行文件。当我运行这个二进制文件时，它可以正常工作，但我没有得到`filename_log`nagelfar 生成的文件。

有人可以告诉我如何获取该日志文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:58:17.307

nagelfar 工具没有这个选项，至少在 nagelfar 帮助或[项目主页的描述中不存在](http://nagelfar.berlios.de/)

可能你可以使用***-html***标志：

```
-html             : Generate html-output. 
```

# web-applications - 可以从客户端访问 web.xml 吗？

> ID：11858139
> 
> 赞同：1
> 
> 时间：2012-08-08T05:26:27.100
> 
> 标签：web-applications, spring-security, web.xml

我正在开发一个 Web 应用程序，并且在`web.xml`我有一些关于身份验证过程的查询。因此，如果一个人看到查询，他可以轻松访问这些安全表。**是否可以访问我的** `web.xml` **，或者我根本不应该担心？**

更具体地说，我`web.xml`在该安全上下文文件中引入了我的安全配置，在该文件中我有身份验证查询。这是我正在谈论的部分（我正在使用 Spring Security）

```
<sec:authentication-manager alias="authenticationManager">
    <sec:authentication-provider>
        <sec:jdbc-user-service data-source-ref="dataSource"
            group-authorities-by-username-query="
                                    SELECT acg.ID, acg.GROUP_NAME, a.ROLE_NAME AS AUTHORITY 
                                    FROM USER_GROUP acg, USER_GROUP_MAPPING agm, PRINCIPAL_ROLE_MAPPING ga, ROLE a, INVESTOR_USER us
                                    WHERE us.USERNAME = ? and agm.USER_ID = us.ID and acg.ID = ga.PRINCIPAL_ID and acg.ID = agm.USER_GROUP_ID and ga.ROLE_ID = a.ID
                                "
            users-by-username-query="SELECT USERNAME,PASSWORD,IS_ACTIVE FROM INVESTOR_USER where USERNAME = ?"
            authorities-by-username-query="
                                    SELECT ua.PRINCIPAL_ID AS USERNAME, a.ROLE_NAME AS AUTHORITY 
                                    FROM PRINCIPAL_ROLE_MAPPING ua, ROLE a, INVESTOR_USER us 
                                    WHERE us.USERNAME = ? and ua.PRINCIPAL_ID = us.ID and ua.ROLE_ID = a.ID
                                " />

        <sec:password-encoder ref="passwordEncoder"/>                               
        <!-- <<<<<<<<<<<<<<<< Encoding Password >>>>>>>>>>>>>>>> -->
    </sec:authentication-provider>
</sec:authentication-manager> 
```

不好吗？我不应该使用它吗？

**请用一些参考来证明你的答案。**
*当然，请用其他替代方案启发我。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T08:26:48.550

> 可以从客户端访问 web.xml 吗？

**不**，为什么？因为根据[Servlet 规范](http://jcp.org/aboutJava/communityprocess/final/jsr315/index.html)，所有可访问的资源都通过 servlet 公开。如果您没有明确定义 servlet（或过滤器或侦听器）来处理/公开 .xml 资源，则无需担心。

一般来说，保护配置资源是 Web 容器的责任。你可以相当肯定它成功了。

您作为示例给出的代码不是您的 web.xml，而是您的安全命名空间配置。这作为 web.xml 也是你不应该担心的。

一般来说**，一个 servlet 容器不会公开任何东西，除非你特别告诉它**。

> 不好吗？我不应该使用它吗？

一般来说，没有它还不错。您还可以得出结论，如果 Spring Security 在其配置中支持 SQL，那么他们也将其视为正常做法。

但是，作为个人偏好，我倾向于使用自定义`UserDetailsService`和`AuthenticationManager`实现来处理用户身份验证，因为这会将与数据库相关的代码排除在安全定义之外。然而，这只是一种偏好。

# java - 在java中的do while循环中跳过扫描仪输入

> ID：11858140
> 
> 赞同：3
> 
> 时间：2012-08-08T05:26:29.757
> 
> 标签：java, java.util.scanner, do-while

我对这个作业有疑问。该程序应该首先运行`registration()`。如果用户未满 13 岁，它会发出警报并返回`registration()`. 如果用户超过 13 岁，它会运行`displayProfile()`并要求确认，如果答案是肯定的，它会通知它是成功的，程序结束。如果答案是否定的，它应该返回`registration()`并重复处理。如果答案无效，它应该继续提示有效回复。问题出在`registration()`. 在程序开始时，它工作正常，但是当我输入一个 13 岁以下的用户并返回注册时，它会跳过姓氏的输入部分，而是继续打印“名字：” . 它在 do while 循环中，因为我想验证输入是否仅为字符和空格。对于注册中的其他字段，一切正常。只是在下次运行时提示输入姓氏时它不起作用。算法有什么问题？

```
import java.util.Calendar;
import java.util.Scanner;

public class mainExercise{
static Scanner input = new Scanner(System.in);
static String lastName;
static String firstName;
static String email;
static String gender;
static String bday;
static int birthMonth;
static int birthDay;
static int birthYear;
static String confirmation;

static EmailValidator ev = new EmailValidator();
static Calendar cal = Calendar.getInstance();

public static void main(String[] args){

    do{

        do{
            registration();
        }while(validateAge(birthMonth, birthDay, birthYear) != 1);

        displayProfile();

        do{
            confirmation = input.nextLine();
            }while(confirm(confirmation)== -1);

        if(confirm(confirmation)==0){
            break;
        }

    }while(confirm(confirmation)== 1);

    System.out.println("Thank you for registering, " + firstName);

}//end of main

static void registration(){

    System.out.println("Welcome to Old School Facebook");
    System.out.println("To register, please provide the following      information");               

    System.out.print("Last Name: ");
    do{ 
        lastName = input.nextLine();
        }while(validateName(lastName) != 1);

    System.out.print("First Name: ");
    do{
        firstName = input.nextLine();
        }while(validateName(firstName) != 1);

    System.out.print("Email: ");
    do{
        email = input.nextLine();
        }while(validateEmail(email) != 1);

    System.out.print("Gender: ");
    do{
        gender = input.nextLine();
        }while(validateGender(gender) != 1);

    System.out.println("Enter birthdate");
    do{
        System.out.print("Month: ");
        birthMonth = input.nextInt();
        }while(validateBirthInput(birthMonth) != 1);

    do{
        System.out.print("Day: ");
        birthDay = input.nextInt();
        }while(validateBirthInput(birthDay) != 1);

    do{
        System.out.print("Year: ");
        birthYear = input.nextInt();
        }while(validateBirthInput(birthYear) != 1);

}

static int validateName(String s){
    int valid = 1;
    char name[] = s.toCharArray();
    for(int i=0; i<name.length; i++){
        if(Character.isLetter(name[i]) || Character.isWhitespace(name[i])){
            valid = 1;
        }else{
            System.out.println("Invalid input");
            valid = 0;
            break;
        }
    }
    return valid;
}

static int validateEmail(String s){
    int valid = 1;
    if(ev.validate(s)){
        valid = 1;
    }else{
        System.out.println("Invalid email");
        valid = 0;
    }
    return valid;
}

static int validateGender(String s){
    int valid = 1;
    if(s.toLowerCase().compareTo("m") == 0 || s.toLowerCase().compareTo("f") == 0){
        valid = 1;
    }else{
        valid = 0;
    }
    return valid;
}

static int validateBirthInput(int x){
    int valid = 1;
    int birth;
    try{
        birth = x;
    }catch(Exception e){
        System.out.println("Enter numbers 1-12 for month, 1-31 for day, yyyy for year");
        valid = 0;
    }
    return valid;
}

static int validateAge(int bm, int bd, int by){
    int valid = 1;
    int cm = cal.get(Calendar.MONTH);
    int cd = cal.get(Calendar.DAY_OF_MONTH);
    int cy = cal.get(Calendar.YEAR);

    if((cy-by)<=13){
        if(bm>=cm){
            if(bd>cd){
                valid = 0;
                System.out.println("You must be at least 13 years old");
                System.out.println();
            }
        }
    }else{
        valid = 1;
    }
    return valid;
}

static int confirm(String s){
    int reply;
    if(s.toLowerCase().compareTo("yes") == 0){
        reply = 1;
    }else if(s.toLowerCase().compareTo("no") >0){
        reply = 0;
    }else{
        System.out.println("Invalid input. Type yes or no");
        reply = -1;
    }
    return reply;
}

static void displayProfile(){
    System.out.println();
    System.out.println("Last Name: " + lastName);
    System.out.println("First Name: " + firstName);
    System.out.println("Email: " + email);
    System.out.println("Gender: " + gender);
    System.out.printf("Birthday: %d/%d/%d\n\n", birthMonth, birthDay, birthYear);
    System.out.println("(yes or no): ");

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T06:38:25.253

呵呵，这个挺难的。

查看[Scanner.nextInt()](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#nextInt%28%29)的 javadocs ：

> 将输入的下一个标记扫描为 int

现在将其与[Scanner.nextLine()](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#nextLine%28%29)的内容进行比较：

> 将此扫描器前进到当前行并返回被跳过的输入。此方法返回当前行的其余部分，不包括末尾的任何行分隔符。位置设置为下一行的开头。

因此，当您调用时`nextInt()`，您只会从输入中读取一个“int”，当您调用时，您`nextLine()`会一直读取到行尾。您的 Scanner 正在读取，这有点奇怪，因为在**您点击**`System.in`之前它不会向 Scanner 提供任何数据，将您输入的任何内容单独放入一行。当您询问日期/月份/年份时，用户输入了一些数字，但在用户点击 之前什么都没有发生，然后您调用，它会读取输入的数字。**`enter`**`enter``nextInt()`

到目前为止一切顺利，除了扫描仪只读取用户键入的数字，而不是新行。因此，当您`registration()`再次执行该方法时，扫描仪中有一个备用空行，并且`lastName = input.nextLine();`立即读取它，假设它是有效的，然后继续询问名字。

由于这是您的作业，请查看您正在阅读的内容以及用户正在输入的内容，请记住 System.in 在用户点击 之前不会将任何内容交给 Scanner `enter`。您也许可以看看这个[Integer 方法， parseInt(String)](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)而不是使用`nextInt()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:25:00.343

我改变了你的代码。你也可以根据你的改变它..快乐编码.. :)

```
import java.util.Calendar;
import java.util.Scanner;

public class mainExercise{
static Scanner input = new Scanner(System.in);
static String lastName;
static String firstName;
static String email;
static String gender;
static String bday;
static int birthMonth;
static int birthDay;
static int birthYear;
static String confirmation;

//static EmailValidator ev = new EmailValidator();
static Calendar cal = Calendar.getInstance();

public static void main(String[] args){

    do{

        do{
            registration();
        }while(validateAge(birthMonth, birthDay, birthYear) != 1);

        displayProfile();
// this is coming "Invalid input. Type yes or no"  because ist time input.nextLine() return ("") thats why.
        do{
            confirmation = input.nextLine();
            }while(confirm(confirmation)== -1 || confirmation.equals(""));

        if(confirm(confirmation)==1){
            break;
        }

    }while(confirm(confirmation)== 1);

    System.out.println("Thank you for registering, " + firstName);

}//end of main

static void registration(){

    System.out.println("Welcome to Old School Facebook");
    System.out.println("To register, please provide the following      information");               

    System.out.print("Last Name: ");
    do{ 
        lastName = input.nextLine();
        }while(validateName(lastName) != 1);

    System.out.print("First Name: ");
    do{
        firstName = input.nextLine();
        }while(validateName(firstName) != 1);

    System.out.print("Email: ");
    do{
        email = input.nextLine();
        }while(validateEmail(email) != 1);

    System.out.print("Gender: ");
    do{
        gender = input.nextLine();
        }while(validateGender(gender) != 1);

    System.out.println("Enter birthdate");
    do{
        System.out.print("Month: ");
        birthMonth = input.nextInt();
        }while(validateBirthInput(birthMonth) != 1);

    do{
        System.out.print("Day: ");
        birthDay = input.nextInt();
        }while(validateBirthInput(birthDay) != 1);

    do{
        System.out.print("Year: ");
        birthYear = input.nextInt();
        }while(validateBirthInput(birthYear) != 1);

}

static int validateName(String s){
    int valid = 1;
    char name[] = s.toCharArray();
    for(int i=0; i<name.length; i++){
        if(Character.isLetter(name[i]) || Character.isWhitespace(name[i])){
            valid = 1;
        }else{
            System.out.println("Invalid input");
            valid = 0;
            break;
        }
    }
    return valid;
}

static int validateEmail(String s){
    int valid = 1;
    // this is showing error. You have to first initialize ev variable  .
    if(ev.validate(s)){
        valid = 1;
    }else{
        System.out.println("Invalid email");
        valid = 0;
    }
    return valid;
}

static int validateGender(String s){
    int valid = 1;
    // you have to check whith 1st char of that string othrewise it always show false
    if(s.toLowerCase().substring(0, 1).compareTo("m") == 0 || s.toLowerCase().substring(0, 1).compareTo("f") == 0){
        valid = 1;
    }else{
        valid = 0;
    }
    return valid;
}

static int validateBirthInput(int x){
    int valid = 1;
    int birth;
    try{
        birth = x;
    }catch(Exception e){
        System.out.println("Enter numbers 1-12 for month, 1-31 for day, yyyy for year");
        valid = 0;
    }
    return valid;
}

static int validateAge(int bm, int bd, int by){
    int valid = 1;
    int cm = cal.get(Calendar.MONTH);
    int cd = cal.get(Calendar.DAY_OF_MONTH);
    int cy = cal.get(Calendar.YEAR);
// this should also need to change like following 
      if ((cy - by) > 13)
      {
         return valid;
      }
      else if ((cy - by) == 13)
      {
         if (bm>cm)
         {
            return valid; 
         }
         else if (bm==cm && bd>cd ) {
            return valid;
         }
      }
      System.out.println("You must be at least 13 years old");
      System.out.println();
      return 0;

}

static int confirm(String s){
    int reply;
    if(s.toLowerCase().compareTo("yes") == 0){
        reply = 1;
    }else if(s.toLowerCase().compareTo("no") >0){
        reply = 0;
    }else{
        System.out.println("Invalid input. Type yes or no");
        reply = -1;
    }
    return reply;
}

static void displayProfile(){
    System.out.println();
    System.out.println("Last Name: " + lastName);
    System.out.println("First Name: " + firstName);
    System.out.println("Email: " + email);
    System.out.println("Gender: " + gender);
    System.out.printf("Birthday: %d/%d/%d\n\n", birthMonth, birthDay, birthYear);
    System.out.println("(yes or no): ");

}
} 
```

# iphone - 如何在仅单击图像视图的可见部分时调用方法

> ID：11858144
> 
> 赞同：0
> 
> 时间：2012-08-08T05:26:49.960
> 
> 标签：iphone, objective-c, ipad, uiimageview

我的应用程序中有一个`UIImageView`，并且**我已将手势识别器附加到该图像视图。**

我的问题是，**只有在触摸其可见区域时才需要调用它的操作，而不是在其透明部分发生触摸时。**

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T05:42:59.577

这些代码片段应该可以帮助您入门。**第一篇文章是一个类别`UIView`**（我在 SO 上的某个地方，但我不记得在哪里）。`This gets you the color under the touch point.`

```
@interface UIView (ColorOfPoint)

- (UIColor *) colorOfPoint:(CGPoint)point;

@end

- (UIColor *) colorOfPoint:(CGPoint)point
{
    unsigned char pixel[4] = {0};
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef context = CGBitmapContextCreate(pixel, 1, 1, 8, 4, colorSpace, kCGImageAlphaPremultipliedLast);

    CGContextTranslateCTM(context, -point.x, -point.y);

    [self.layer renderInContext:context];

    CGContextRelease(context);
    CGColorSpaceRelease(colorSpace);
    UIColor *color = [UIColor colorWithRed:pixel[0]/255.0 green:pixel[1]/255.0 blue:pixel[2]/255.0 alpha:pixel[3]/255.0];

    return color;
} 
```

第二部分展示了我如何在自定义图像视图类中调用此方法：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [[event allTouches] anyObject];
    CGPoint loc = [touch locationInView:self];
    self.pickedColor = [self colorOfPoint:loc];
    [[NSNotificationCenter defaultCenter] postNotificationName:@"ColorPicked" object:self userInfo:nil];
} 
```

**我在这里使用了一个通知，因为我需要让另一个类知道所选择颜色的值。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T05:12:07.000

您可以使用它来获取接触点的 Alpha

```
-(UIColor*) getPixelColorAtLocation:(CGPoint)point
{

    CGImageRef inImage;
    UIColor *color = nil;

        inImage = [self.imageView.image CGImage];

    CGContextRef context = [self createARGBBitmapContextFromImage:inImage];
    如果（上下文 == NULL）返回零；
    size_t w = CGImageGetWidth(inImage);
    size_th = CGImageGetHeight(inImage);
    CGRect 矩形 = {{0,0},{w,h}};
    // 将图像绘制到位图上下文。一旦我们画画，记忆
    // 分配给渲染的上下文将包含
    // 指定颜色空间中的原始图像数据。
    CGContextDrawImage(context, rect, inImage);
    // 现在我们可以获得一个指向与位图关联的图像数据的指针
    // 语境。
    无符号字符 * 数据 = CGBitmapContextGetData（上下文）；
    如果（数据！= NULL）
    {

        //offset 从 x,y 定位数据中的像素。
        //4代表每像素4字节数据，w为一行数据的宽度。
        整数偏移量；

            偏移量 = 4*((w*round(point.y))+round(point.x));

        int alpha = 数据[偏移量];
        诠释红色=数据[偏移+1]；
        诠释绿色=数据[偏移+2]；
        诠释蓝色=数据[偏移+3]；
        //NSLog(@"%@",name);
        NSLog(@"offset: %i 颜色: RGB A %i %i %i %i ",offset,red,green,blue,alpha);
        color = [UIColor colorWithRed:(red/255.0f) green:(green/255.0f) blue:(blue/255.0f) alpha:(alpha/255.0f)];

    // 完成后，释放上下文
    CGContextRelease(上下文);
    // 为上下文释放图像数据内存
    如果（数据）
    {
        免费（数据）；
    }
    返回颜色；
}
-(CGContextRef) createARGBBitmapContextFromImage:(CGImageRef) inImage
{

    CGContextRef 上下文 = NULL；
    CGColorSpaceRef 颜色空间；
    无效*位图数据；
    整数位图字节计数；
    int bitmapBytesPerRow;

    // 获取图片的宽度，高度。我们将使用整个图像。
    size_t 像素宽度 = CGImageGetWidth(inImage);
    size_t 像素高 = CGImageGetHeight(inImage);

    // 声明每行的字节数。此位图中的每个像素
    //例子用4个字节表示；红、绿、蓝和各 8 位
    // α。
    bitmapBytesPerRow = (pixelsWide * 4);
    bitmapByteCount = (bitmapBytesPerRow * pixelHigh);

    // 使用通用 RGB 颜色空间。
    colorSpace = CGColorSpaceCreateDeviceRGB();//CGColorSpaceCreateWithName(kCGColorSpaceGenericRGB);
    如果（颜色空间 == NULL）
    {
        fprintf(stderr, "分配色彩空间时出错\n");
        返回空值；
    }

    // 为图像数据分配内存。这是记忆中的目的地
    // 任何绘制到位图上下文的地方都会被渲染。
    bitmapData = malloc(bitmapByteCount);
    如果（位图数据 == NULL）
    {
        fprintf (stderr, "内存未分配！");
        CGColorSpaceRelease（颜色空间）；
        返回空值；
    }

    // 创建位图上下文。我们想要预乘 ARGB，8 位
    // 每个组件。无论源图像格式是什么
    //（CMYK、灰度等）它将被转换为格式
    // 这里由 CGBitmapContextCreate 指定。
    上下文 = CGBitmapContextCreate（位图数据，
                                     像素宽，
                                     像素高，
                                     8, // 每个组件的位数
                                     bitmapBytesPerRow,
                                     色彩空间，
                                     kCGImageAlphaPremultipliedFirst);
    如果（上下文 == NULL）
    {
        免费（位图数据）；
        fprintf (stderr, "上下文未创建！");
    }

    // 在返回之前确保并释放颜色空间
    CGColorSpaceRelease（颜色空间）；

    返回上下文；
}

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-05T17:08:49.260

看看 github 上的 OBSHAPED 按钮。它将解决您的问题快乐编码。:)

# string - 如何将多个 Perl 单行代码合并到一个脚本中？

> ID：11858147
> 
> 赞同：1
> 
> 时间：2012-08-08T05:27:30.750
> 
> 标签：string, perl, substitution

我想将几个单行移到一个脚本中。

例如：

```
perl -i.bak -pE "s/String_ABC/String_XYZ/g" Cities.Txt
perl -i.bak -pE "s/Manhattan/New_England/g" Cities.Txt 
```

以上对我来说效果很好，但代价是两个磁盘 I/O 操作。

我想将上述逻辑移动到单个脚本中，以便所有替换都通过文件打开和编辑一次来实现。

EDIT1：根据您的建议，我在一个脚本中编写了这个片段，当从 Windows 批处理文件调用它时，它只会挂起：

```
#!/usr/bin/perl -i.bak -p Cities.Txt
use strict;
use warnings;

while( <> ){
s/String_ABC/String_XYZ/g;
s/Manhattan/New_England/g;
print;
} 
```

EDIT2：好的，这就是我实施您的建议的方式。奇迹般有效！

**批处理文件**：

```
perl -i.bal MyScript.pl Cities.Txt 
```

**MyScript.pl**

```
#!/usr/bin/perl
use strict;
use warnings;

while( <> ){
s/String_ABC/String_XYZ/g;
s/Manhattan/New_England/g;
print;
} 
```

非常感谢所有做出贡献的人。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T06:03:23.983

将`-p`参数包装为`-E`：

```
while( <> ) {
    # argument to -E
    print;
    } 
```

所以，把所有的论点`-E`放到`while`：

```
while( <> ) {
    s/String_ABC/String_XYZ/g;
    s/Manhattan/New_England/g;
    print;
    } 
```

`-i`设置`$^I`变量，它开启了一些特殊的魔法处理`ARGV`：

```
$^I = "bak"; 
```

为那个版本的`-E`Perl 打开了新特性。您可以通过指定版本来做到这一点：

```
use v5.10; 
```

但是，您不会使用任何加载的东西，至少在您向我们展示的内容中。

如果您想查看单线所做的一切，请[`-MO=Deparse`](https://metacpan.org/pod/B::Deparse)在其中输入：

```
% perl -MO=Deparse -i.bak -pE "s/Manhattan/New_England/g" Cities.Txt
BEGIN { $^I = ".bak"; }
BEGIN {
    $^H{'feature_unicode'} = q(1);
    $^H{'feature_say'} = q(1);
    $^H{'feature_state'} = q(1);
    $^H{'feature_switch'} = q(1);
}
LINE: while (defined($_ = <ARGV>)) {
    s/Manhattan/New_England/g;
}
continue {
    die "-p destination: $!\n" unless print $_;
}
-e syntax OK 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T06:01:01.777

您可以将参数放在 #! 线。Perl 会读取它们，即使在 Windows 上也是如此。

```
#!/usr/bin/perl -i.bak -p

s/String_ABC/String_XYZ/g;
s/Manhattan/New_England/g; 
```

或者您可以像@ephemient 在评论中所说的那样将其保留为单行。

```
perl -i.bak -pE "s/String_ABC/String_XYZ/g; s/Manhattan/New_England/g" Cities.Txt 
```

`-i`+`-p`基本上在你的程序周围放置了一个 while 循环。每一行都以 形式出现`$_`，您的代码将运行，并`$_`在最后打印出来。重复。因此，您可以拥有任意数量的语句。

# android - 如何将位图图像添加到 ListAdapter？

> ID：11858154
> 
> 赞同：0
> 
> 时间：2012-08-08T05:28:11.140
> 
> 标签：android, listview

我的适配器

```
ListAdapter adapter = new SimpleAdapter(this, contactList,
    R.layout.news_list_adapter,new String[] {TAG_NAME,  TAG_ADDRESS, R.drawable.news_en2},
    new int[] {R.id.newsHead,  R.id.qisaIzzah ,R.id.newsFontImage}); 
```

我有要添加到列表中的位图图像，我可以写什么而不是 R.drawable.news_en2

示例位图

```
byte[] decodedString = Base64.decode(news.getString("newsimage"),Base64.DEFAULT);
Bitmap decodedByte = BitmapFactory.decodeByteArray(decodedString,0,decodedString.length); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T05:31:02.360

通过扩展 BaseAdapter 类，您可以轻松地在 ListView 中添加位图图像

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {     

        View row = convertView;
     // if it's not recycled, initialize some attributes
        if (row == null) {  
            LayoutInflater li = (LayoutInflater)   mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
            row = li.inflate(R.layout.menucategory, null);          
            //imageView.setLayoutParams(new GridView.LayoutParams(85, 85));         
        }
            // getCategoryItem          
            Category  category = (Category) getItem(position);
            // Get reference to ImageView
            categoryIcon = (ImageView) row.findViewById(R.id.category_image);
            //categoryIcon.setLayoutParams(new GridView.LayoutParams(85, 85));
            categoryIcon.setScaleType(ImageView.ScaleType.CENTER_CROP);
            categoryIcon.setPadding(5, 5, 5, 5);

            categoryName = (TextView) row.findViewById(R.id.category_name);
            //Set category name
            categoryName.setText(category.getCategoryName());           

            if(category.getCategoryPath() != null){             
                    Bitmap bitmap = BitmapFactory.decodeFile(category.getCategoryPath());
                    System.out.println("bitmap2::  "+ bitmap);
                    if(bitmap != null){
                     categoryIcon.setImageBitmap(bitmap);
                    }               
            }                              

        return row;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T05:35:48.263

您还必须定义一个可以采用位图的布局。在 Mohammod Hossain 发布的上述示例中，R.layout.menucategory 指的是该自定义布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:11:47.227

基本上，简单的适配器会自动将一些资源 ID 或 URI 绑定到行布局的图像视图。但它不支持位图。

这是一个问题，因为每个不得不管理位图的人都知道，我们经常不得不减小图片的大小以防止出现 OutOfMemory 异常。但是如果你想将图片添加到listView中，如果你只提供URI，你不能减小图片的大小。所以这是解决方案：

我已经修改了 simpleAdapter 以便能够处理位图。将此类添加到您的项目中，并使用它来代替 simpleAdapter。然后，不要传递图像的 URI 或 ressourceId，而是传递 Bitmap ！

下面是代码：

```
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import android.content.Context;
import android.graphics.Bitmap;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Checkable;
import android.widget.ImageView;
import android.widget.SimpleAdapter;
import android.widget.TextView;

public class ExtendedSimpleAdapter extends SimpleAdapter{
    List<HashMap<String, Object>> map;
    String[] from;
    int layout;
    int[] to;
    Context context;
    LayoutInflater mInflater;
    public ExtendedSimpleAdapter(Context context, List<HashMap<String, Object>> data,
            int resource, String[] from, int[] to) {
        super(context, data, resource, from, to);
        layout = resource;
        map = data;
        this.from = from;
        this.to = to;
        this.context = context;
    }

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    mInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    return this.createViewFromResource(position, convertView, parent, layout);
}

private View createViewFromResource(int position, View convertView,
        ViewGroup parent, int resource) {
    View v;
    if (convertView == null) {
        v = mInflater.inflate(resource, parent, false);
    } else {
        v = convertView;
    }

    this.bindView(position, v);

    return v;
}

private void bindView(int position, View view) {
    final Map dataSet = map.get(position);
    if (dataSet == null) {
        return;
    }

    final ViewBinder binder = super.getViewBinder();
    final int count = to.length;

    for (int i = 0; i < count; i++) {
        final View v = view.findViewById(to[i]);
        if (v != null) {
            final Object data = dataSet.get(from[i]);
            String text = data == null ? "" : data.toString();
            if (text == null) {
                text = "";
            }

            boolean bound = false;
            if (binder != null) {
                bound = binder.setViewValue(v, data, text);
            }

            if (!bound) {
                if (v instanceof Checkable) {
                    if (data instanceof Boolean) {
                        ((Checkable) v).setChecked((Boolean) data);
                    } else if (v instanceof TextView) {
                        // Note: keep the instanceof TextView check at the bottom of these
                        // ifs since a lot of views are TextViews (e.g. CheckBoxes).
                        setViewText((TextView) v, text);
                    } else {
                        throw new IllegalStateException(v.getClass().getName() +
                                " should be bound to a Boolean, not a " +
                                (data == null ? "<unknown type>" : data.getClass()));
                    }
                } else if (v instanceof TextView) {
                    // Note: keep the instanceof TextView check at the bottom of these
                    // ifs since a lot of views are TextViews (e.g. CheckBoxes).
                    setViewText((TextView) v, text);
                } else if (v instanceof ImageView) {
                    if (data instanceof Integer) {
                        setViewImage((ImageView) v, (Integer) data);                            
                    } else if (data instanceof Bitmap){
                        setViewImage((ImageView) v, (Bitmap)data);
                    } else {
                        setViewImage((ImageView) v, text);
                    }
                } else {
                    throw new IllegalStateException(v.getClass().getName() + " is not a " +
                            " view that can be bounds by this SimpleAdapter");
                }
            }
        }
    }
}

private void setViewImage(ImageView v, Bitmap bmp){
    v.setImageBitmap(bmp);
}

} 
```

此类的行为与原始类 (SimpleAdapter) 完全相同

# ruby-on-rails-3 - 无法移除宝石

> ID：11858155
> 
> 赞同：0
> 
> 时间：2012-08-08T05:28:18.490
> 
> 标签：ruby-on-rails-3, gem, uninstallation, breadcrumbs

有一个很奇怪的问题。我有 RVM 和 rails 项目。我使用了'breadcrumbs_on_rails' gem，并将它放在我的 Gemfile 中。一次更新后，我在这个 gem 中遇到了一些错误，所以我尝试回滚到以前的版本。我在 Gemfile 中编写了版本，运行了包更新 - 但没有任何改变，仍然有错误。我尝试从 Gemfile 中完全删除这个 gem，但是......它的助手仍在工作！我通过运行 gem uninstall 完全卸载了所有版本的 gem，清除了项目的 tmp 文件夹，重新启动，但它仍然可以工作。可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T05:52:26.450

您是否尝试过使用

```
bundle exec gem uninstall GEM_NAME 
```

对于 RVM 用户：如果您为特定项目设置了 gemset，则必须使用此方法。

从项目文件夹运行 gem uninstall GEM_NAME 将从您的全局/系统级 gemset 而不是 bundler 中卸载 GEM_NAME。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T10:56:53.960

问题在于两个 gem 的冲突 gem twitter-bootstrap-rails 具有完全相同的方法 - add_breadcrumb 和 render_breadcrumbs。并且面包屑是由这个 gem 渲染的，而不是由 breadcrumbs_on_rails 渲染的。因此，事实证明，该宝石已成功删除

# python - 在每行之后显示没有逗号、方括号等和换行符的 python 2d 列表

> ID：11858159
> 
> 赞同：2
> 
> 时间：2012-08-08T05:28:34.807
> 
> 标签：python, list

我正在尝试显示没有逗号、方括号等的 python 2D 列表，并且我想在列表的每个“行”结束后显示一个新行。

这是我这样做的尝试：

```
ogm = repr(ogm).replace(',', ' ')
ogm = repr(ogm).replace('[', ' ')
ogm = repr(ogm).replace("'", ' ')
ogm = repr(ogm).replace('"', ' ')
print repr(ogm).replace(']', ' ') 
```

这是输入：

```
[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [1, 1, 0, 1, 0, 0, 0, 0, 0, 0], [1, 1, 1, 0, 0, 0, 0, 0, 0, 0], [0, 1, 1, 0, 0, 0, 0, 0, 1, 1], [0, 0, 0, 0, 0, 0, 1, 1, 1, 0], [0, 0, 0, 1, 1, 0, 1, 1, 1, 1], [0, 0, 1, 1, 0, 0, 1, 1, 1, 1], [0, 1, 0, 0, 0, 0, 0, 1, 1, 0], [0, 0, 0, 0, 0, 0, 1, 1, 0, 0], [1, 0, 1, 1, 1, 1, 0, 0, 0, 0]] 
```

这是输出：

```
"'    0  0  0  0  0  0  0  0  0  0    1  1  0  1  0  0  0  0  0  0    1  1  1  0  0  0  0  0  0  0    0  1  1  0  0  0  0  0  1  1    0  0  0  0  0  0  1  1  1  0    0  0  0  1  1  0  1  1  1  1    0  0  1  1  0  0  1  1  1  1    0  1  0  0  0  0  0  1  1  0    0  0  0  0  0  0  1  1  0  0    1  0  1  1  1  1  0  0  0  0    '" 
```

我遇到两个问题：

1.  有我无法摆脱的“和”
2.  我不知道如何换行

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-08T05:33:29.970

简单的方法：

```
for row in list2D:
    print " ".join(map(str,row)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T05:35:39.517

也许加入适合您：

```
print "\n".join(" ".join(str(el) for el in row) for row in ogm)

0 0 0 0 0 0 0 0 0 0
1 1 0 1 0 0 0 0 0 0
1 1 1 0 0 0 0 0 0 0
0 1 1 0 0 0 0 0 1 1
0 0 0 0 0 0 1 1 1 0
0 0 0 1 1 0 1 1 1 1
0 0 1 1 0 0 1 1 1 1
0 1 0 0 0 0 0 1 1 0
0 0 0 0 0 0 1 1 0 0
1 0 1 1 1 1 0 0 0 0 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-08T05:37:06.663

```
print "\n".join(" ".join(map(str, line)) for line in ogm) 
```

如果您想要转置行和列

```
print "\n".join(" ".join(map(str, line)) for line in zip(*ogm)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-19T15:51:25.333

为了使显示更具可读性，您可以使用制表符或用空格填充单元格以对齐列。

```
def printMatrix(matrix):
    for lst in matrix:
        for element in lst:
            print(element, end="\t")
        print("") 
```

它会显示

```
6       8       99
999     7       99
3       7       99 
```

代替

```
6 8 99
999 7 99
3 7 99 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-25T17:59:01.540

```
for row in list2D:
    print(*row) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-02-07T08:34:30.287

```
ogm = [[0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [1, 1, 0, 1, 0, 0, 0, 0, 0, 0], [1, 1, 1, 0, 0, 0, 0, 0, 0, 0], [0, 1, 1, 0, 0, 0, 0, 0, 1, 1], [0, 0, 0, 0, 0, 0, 1, 1, 1, 0], [0, 0, 0, 1, 1, 0, 1, 1, 1, 1], [0, 0, 1, 1, 0, 0, 1, 1, 1, 1], [0, 1, 0, 0, 0, 0, 0, 1, 1, 0], [0, 0, 0, 0, 0, 0, 1, 1, 0, 0], [1, 0, 1, 1, 1, 1, 0, 0, 0, 0]]

s1 = str(ogm)

s2 = s1.replace('], [','\n')

s3 = s2.replace('[','')

s4 = s3.replace(']','')

s5= s4.replace(',','')

print s5 
```

顺便说一句，“实际上是两个”，没有任何间隙

我正在学习python一周。你们已经给出了一些很好的解决方案。这就是我是如何做到的......这也有效...... :)

# php - 使 date() 返回特定于时区的日期/时间，而不使用 date_default_timezone_set()

> ID：11858160
> 
> 赞同：0
> 
> 时间：2012-08-08T05:28:35.787
> 
> 标签：php

有没有办法使用该`date()`函数并让它返回特定时区的当前日期，而不是服务器日期？

我知道我可以使用：

```
date_default_timezone_set('Asia/Tokyo');
date('j F Y'); 
```

但是，我在大型应用程序的上下文中执行此操作，并且执行此`date_default_timezone_set()`操作可能会使脚本其余部分中的其他日期操作表现不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T05:31:58.033

使用[DateTime::createFromFormat](http://www.php.net/manual/en/datetime.createfromformat.php) (>= 5.3.0)，它允许您设置给定日期的时区。这将允许您仅修改给定日期的时区，而不是可能出现在脚本中其他位置的日期。

> 返回根据指定格式格式化的新 DateTime 对象。

**面向对象风格**

```
public static DateTime DateTime::createFromFormat ( string $format , string $time [, DateTimeZone timezone ] ) 
```

**程序风格：**

```
DateTime date_create_from_format ( string $format , string $time [, DateTimeZone $timezone ] ) 
```

如果您不熟悉这些文档，则可以很好地提供每个参数的详细信息，因此我将避免全部发布。

另一种选择是修改[`date format`](http://www.php.net/manual/en/function.date.php). 时区标识符（在 PHP 5.1.0 中添加）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T05:31:25.523

请改用[`DateTime`](http://www.php.net/manual/en/class.datetime.php)该类，它允许您在创建时指定时区（默认为 UTC），或者通过使用`setTimezone()`来更改渲染时区。

# java - Java Swing 应用程序中的登录身份验证

> ID：11858162
> 
> 赞同：-2
> 
> 时间：2012-08-08T05:28:46.333
> 
> 标签：java, swing, session, login, desktop-application

在我的摇摆应用程序中进行“登录”的最佳方式是什么？

在 Java 桌面应用程序中替换会话（Web）的最佳方法是什么？

我知道如何在 jsp 或 php 页面上使用登录，但我如何在 Swing 应用程序中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T05:32:44.247

就个人而言，对于基于 HTTP 会话的管理，我使用[Apache HTTPClient](http://hc.apache.org/httpclient-3.x/)。从我的角度来看，这主要是出于简单性，但效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T05:49:44.173

您可以使用基于 cookie 的登录会话管理来完成此操作，您可以通过查看它轻松找到它。我们对我的产品使用相同的。

# asp.net-mvc-3 - 数据注释，其中两个属性在 mvc 3 中是唯一的

> ID：11858169
> 
> 赞同：0
> 
> 时间：2012-08-08T05:29:15.740
> 
> 标签：asp.net-mvc-3, entity-framework, data-annotations

我有以下类别表，我首先使用实体​​框架模型：

```
ID => int , primary key , unique
CategoryName => varchar(50)
ParentCategoryID => int 
```

我通过执行以下查询为两列 categoryName 和 ParentCategoryID 应用了唯一约束：

```
ALTER TABLE Category
ADD CONSTRAINT UQ_YourTable_ConstraintName UNIQUE(CategoryName, ParentCategoryID) 
```

在这里，我想要的是，如果 categoryName 和 ParentCategoryID 的组合形式使用数据注释是唯一的，则验证输入。因此，我为类别创建了部分类：

```
 [MetadataType(typeof(TestEntityValidation))]
    public partial class Category{
    }

    public class TestEntityValidation{
       //............ data annotation
        public string CategoryName{ get; set; }

       //............ data annotation
        public string ParentCategoryID { get; set; }
    } 
```

什么可以是数据注释的代码，以便 CategoryName 和 ParentCategoryID 的组合始终是唯一的，并且如果用户输入重复数据则显示错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T05:35:58.893

我不认为你可以使用数据注释来做到这一点，但这是你可以做的

```
public ActionResult Validate(SomeModel model)
{
 // check for this condition with db using the 'model'

 if(combination_is_NOT_unique)
 {
  ViewBag.Message = "Not Unique";
  return View("NameOfTheView");
 }

 // else
 do the normal stuff

} 
```

# php - PHP包括不显示

> ID：11858173
> 
> 赞同：0
> 
> 时间：2012-08-08T05:29:33.260
> 
> 标签：php, include, server-side-includes

我有一个 php 包含，路径为`[root]/Edge-animations/splash/publish/web/splash.php`，我的服务器上的有效路径。在我第一次尝试时，我收到一条错误消息，指出路径无效；事实证明，我需要放置完整的服务器路径（沿线`/homepages/3/d426847376/htdocs/Edge-animations/splash/publish/web/splash.php`）。更正链接后，我尝试重新加载我的页面；它没有显示错误，但也没有显示它应该包含的文件。我的 PHP 语法如下：

```
<?php include('/homepages/3/d426847376/htdocs/Edge-animations/splash/publish/web/splash.php'); ?> 
```

并匹配我用于在另一个页面上包含工作的 PHP 的语法。我究竟做错了什么？

*编辑*
包含的文件是Edge输出的HTML文件；我将扩展名从 .html 更改为 .php。这是它的代码：

```
<!DOCTYPE html>

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Untitled</title>
<!--Adobe Edge Runtime-->
<meta http-equiv="X-UA-Compatible" content="chrome=IE8">
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/chrome-          frame/1/CFInstall.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="splash-v1_edgePreload.js">    </script>
    <style>
    .edgeLoad-Splash { display:none; }
</style>
<!--Adobe Edge Runtime End-->

</head>
<body style="margin:0;padding:0;">
<div id="Stage" class="Splash">
</div>
</body>
</html> 
```

我现在还在链接中添加了括号和分号；它仍然不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:21:03.810

仅出于测试目的尝试

```
<?php
$path = '/homepages/3/..........';
ini_set('display_errors', true);
error_reporting(E_ALL);

echo 'path=',$path, "<br />\n";
if ( !file_exists($path) ) {
    die('no such file');
}
else {
    //include $path;
    echo '<p>opening file</p>';
    $fp = fopen($path, 'rb');
    if ( !$fp ) {
        die('open failed');
    }
    echo '<p>reading file</p>';
    $content = stream_get_contents($fp);
    if ( false===$content ) {
        die('read failed');
    }
    echo '<p>strlen(content)=',strlen($content), '<p>';
} 
```

# c# - 使用字典 在 LinQ 查询中

> ID：11858174
> 
> 赞同：0
> 
> 时间：2012-08-08T05:29:36.413
> 
> 标签：c#, sql, linq

我需要执行如下代码：

```
Dictionary<Int64, List<Int64>> types;
// initialization of dictionary
results = (from m in d.Linq() 
           where (filter.Types.Any(x =>
                                 x.Key == m.DocumentType.Code
                                 && x.Value.Contains(m.DocumentPurpose.Code)
                                )
                 )
           select m 
          ).ToList(); 
```

当我执行这个测试时，我收到了`System.NullReferenceException`. 但我确信该对象`types`不是`null`并且至少包含一对（键：26；值：2、4）。

我认为 LINQ 无法将此 Any() 表达式转换为 SQL。我怎样才能重写这个查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T05:32:12.140

尝试这个：

```
results = (from m in d.Linq() 
           where (m.DocumentType != null &&
                  m.DocumentPurpose != null &&
                  filter.Types.Any(x =>
                                 x.Key == m.DocumentType.Code
                                 && x.Value.Contains(m.DocumentPurpose.Code)
                                ) 
```

# java - Phonegap 1.0.0 缩放问题

> ID：11858179
> 
> 赞同：0
> 
> 时间：2012-08-08T05:30:05.107
> 
> 标签：java, android, html, cordova, android-emulator

我有一个基本的 Phonegap 应用程序，它有 2 个页面`index.html`并且`index1.html`彼此之间有链接。

我启用了缩放并进行了测试。当我在第 1 页时，缩放工作正常当我遍历第 2 页或返回第 1 页时，它不会缩放。

大约一年前，当我在 Froyo 上工作时，我从第 1 页遍历到第 2 页并缩放它工作得很好。（没有尝试反向）

我想知道这是 Android Phonegap 问题还是 Android 平台问题

`Current Device : HTC Desire Z`

`Current Phonegap Version : 1.0.0`

`Current Platform : Gingerbread 2.3.3`

我的代码：

[指数](http://paste.ubuntu.com/1135516/)

[索引 1](http://paste.ubuntu.com/1135514/)

[主要活动](http://paste.ubuntu.com/1135517/)

我也想知道我是否可以放大模拟器？有人告诉我，它可以通过使用 CTRL + MOUSE 1 来做到这一点，但它对我来说不起作用。唯一的区别是他们使用的是 Cordova 2.0.0，而我使用的是 Phonegap 1.0.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T06:29:29.230

因为这过去可以完美地工作，`Froyo`并且会在`Gingerbread`以后的版本中出现问题。

我正在结束这个问题，因为我觉得 Cordova Java Script API 似乎与我上面提到的操作系统有问题。

如果科尔多瓦的某个人可以断言这个问题。他可能是真正解决同样问题的合适人选。

# android - 动态更改列表视图的分隔高度？

> ID：11858180
> 
> 赞同：5
> 
> 时间：2012-08-08T05:30:07.237
> 
> 标签：android, listview, dynamic, height, divider

这个问题在这里被问过[一个链接](https://stackoverflow.com/questions/2749551/how-to-change-the-divider-height-of-listview-dynamically)

此外，我想澄清一个问题，我有 10 个列表项，`Listview` 我希望`deviderheight`每个列表项的第一个项目不同，它应该是`setDividerheight(2)`第二个`setDividerheight(4)`这样的..

我制作了一个自定义的 Adapeter，我在其中设置了我的 Layout Like

```
public View getView(int position, View convertView, ViewGroup parent) {
    View v = super.getView(position, convertView, parent);

    if(position ==2)
    {
        if (v != convertView && v != null) {
            ViewHolder holder = new ViewHolder();

            // TextView tv = (TextView) v.findViewById(R.id.artist_albums_textview);
            // holder.albumsView = tv;

            convertView = mInflater.inflate(R.layout.jazz_artist_list_item, null);
            holder.albumsView = (TextView)convertView.findViewById(R.id.artist_albums_textview);

            //   lv.setDividerHeight(8);
            v.setTag(holder);
        }
    }
    else
    {
        if (v != convertView && v != null) {
            ViewHolder holder = new ViewHolder();

            convertView = mInflater.inflate(R.layout.jazz_artist_list_item, null);
            holder.albumsView = (TextView)convertView.findViewById(R.id.artist_albums_textview);

            //  lv.setDividerHeight(2);
            v.setTag(holder);
        }
    }
} 
```

但这似乎无法正常工作。

关于如何动态设置 Listview 的分隔高度的任何想法

问候， 拉克斯米坎特

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T05:51:23.043

```
//set Divider as you like   

listView.setDivider((Drawable) getResources().getDrawable(R.drawable.orange));

//then set the height dynamically

listView.setDividerHeight(1); 
```

在具有 ListView 的 Activity 中。不是适配器类。

如果您在问题中到底写了什么。做这个：

让每个 listView 项目布局包含一个 TextView 和一个视图（每个项目后的分隔符），然后根据您在 getView() 方法中获得的位置参数更改视图的高度。

ListView 项目布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:padding="5dp" >
    <TextView
        android:id="@+id/label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@id/logo"
        android:padding="5dp"
        android:textSize="14dp" >
    </TextView>
    <View
        android:id="@+id/view"
        android:layout_width="fill_parent"
        android:layout_height="1dp"
        android:layout_below="@id/label"
        android:background="@drawable/orange" />
</RelativeLayout> 
```

现在在适配器类中，您的 ViewHolder 包含 TextView 和 View。

所以，

```
Holder.View = (View)convertView.findViewById(R.id.view);
if(position == 0){
     (Holder.View).setHeight(2);
} 
```

等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-21T11:53:16.893

对上面的轻微调整让它对我有用（视图中没有 setHeight() 方法？），谢谢：

```
Holder.View = (View)convertView.findViewById(R.id.view);
if(position == 0){
  (Holder.View).getLayoutParams().height = *your desired height e.g. 20*;
} 
```

# .net - 删除 SQL Server Express 用户实例数据库文件

> ID：11858182
> 
> 赞同：0
> 
> 时间：2012-08-08T05:30:28.707
> 
> 标签：.net, sql-server, sql-server-express

我使用 SQL Server 2005 Express 用户实例进行单元测试。每个测试随机生成一个数据库名称，因此连接字符串如下所示：

```
Data Source=.\SQLEXPRESS2005;Database=MyTest_624332256;User Instance=true;Integrated Security=SSPI; 
```

其中`624332256`是一个随机生成的数字。

最后我想删除所有这些数据库文件（`.MDF`和`.LDF`）。

如果我调用`sp_detach_db`甚至`DROP DATABASE`删除数据库实例`sys.databases`，但数据库文件仍保留在`%LOCALAPPDATA%\Microsoft\Microsoft SQL Server Data\SQLEXPRESS2005`

我如何也删除文件？我以为`DROP DATABASE`应该这样做，但事实并非如此！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T03:46:00.847

我最终编写代码手动执行此操作，查询物理文件名：

```
public static void CleanUpAllTestDbs()
{
        using (var connection = new SqlConnection(connString))
        {
            connection.Open();

            var dbNames = new List<string>();
            using (var command = connection.CreateCommand())
            {
                command.CommandText = @"
USE master

SELECT name FROM sysdatabases WHERE name LIKE 'MyTest_%'";

                using (var reader = command.ExecuteReader())
                {
                    while (reader.Read())
                    {
                        dbNames.Add(reader.GetString(0));
                    }
                }
            }

            foreach (var dbName in dbNames)
            {
                GetDatabaseFiles(connection, dbName, databaseFiles);
                DetachDatabase(connection, dbName);
            }
        }

        // Delete the physical files

        foreach (var filePath in databaseFiles)
        {
            File.Delete(filePath);
        }
}

private static void DetachDatabase(DbConnection connection, string dbName)
{
    using (var command = connection.CreateCommand())
    {
        command.CommandText = string.Format(@"
USE master

ALTER DATABASE [{0}] SET OFFLINE WITH ROLLBACK IMMEDIATE
DROP DATABASE [{0}]", dbName);

        try
        {
            command.ExecuteNonQuery();
        }
        catch (SqlException ex)
        {
            if (!ex.Message.StartsWith("Unable to open the physical file", StringComparison.OrdinalIgnoreCase))
                throw;
        }
    }
}

private static void GetDatabaseFiles(DbConnection connection, string dbName, List<string> results)
{
    using (var command = connection.CreateCommand())
    {
        command.CommandText = "SELECT physical_name FROM [" + dbName + "].sys.database_files";

        using (var reader = command.ExecuteReader())
        {
            while (reader.Read())
            {
                results.Add(reader.GetString(0));
            }
        }
    }
} 
```

# php - 分层数据 MySQL 查询

> ID：11858183
> 
> 赞同：0
> 
> 时间：2012-08-08T05:30:33.413
> 
> 标签：php, mysql, hierarchy, hierarchical-data

我有这个级别的分层数据

```
A 
|_ B
|_ C
|  |_ D
|  |_ E 
|_ F 
```

数据库结构

类别 id、parent_id、类别名称

我想要在这件事上给出结果的 MySQL Query

```
A     NULL NULL NULL
F     B     C   NULL
NULL  NULL  D   E 
```

我在这个查询中主要关心的是在它的父项下显示子数据

# android - 如何在 Android 上通过拖放交换 ListView 中的行？

> ID：11858185
> 
> 赞同：1
> 
> 时间：2012-08-08T05:30:40.237
> 
> 标签：android, listview, drag-and-drop

我想在 ListView 中交换行。是否有任何图书馆或其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T05:34:05.570

你可以检查[`Drag and drop list view on Android`](https://github.com/aleung/tasks365/blob/master/tasks365/src/leoliang/tasks365/DraggableListView.java)

# symfony - Symfony2 应用程序/控制台分段错误与 stock 2.0.16 install

> ID：11858194
> 
> 赞同：1
> 
> 时间：2012-08-08T05:31:43.887
> 
> 标签：symfony

我试图让 Symfony2 在我的共享虚拟主机上工作，但是当我运行 app/console 时，它​​会出现段错误。这是默认的 Symfony2 2.0.16 安装。

```
[kadaan@webhost Symfony]$ php app/console
Segmentation fault
[kadaan@webhost Symfony]$ php -v
PHP 5.3.13 (cgi-fcgi) (built: May  8 2012 17:05:11)
Copyright (c) 1997-2012 The PHP Group
Zend Engine v2.3.0, Copyright (c) 1998-2012 Zend Technologies 
```

我是所有文件的所有者，它们都是全局可读的。我无权访问 apache 日志，因此无法检查其中是否有任何有用的信息。

这是我对 Symfony 的 check.php 的输出，以防万一：

```
** Mandatory requirements **

  OK        Checking that PHP version is at least 5.3.2 (5.3.13 installed)
  OK        Checking that the "date.timezone" setting is set
  OK        Checking that app/cache/ directory is writable
  OK        Checking that the app/logs/ directory is writable
  OK        Checking that the json_encode() is available
  OK        Checking that the SQLite3 or PDO_SQLite extension is available
  OK        Checking that the session_start() is available
  OK        Checking that the ctype_alpha() is available
  OK        Checking that the token_get_all() is available
  OK        Checking that the APC version is at least 3.0.17

** Optional checks **

  OK        Checking that the PHP-XML module is installed
  OK        Checking that the token_get_all() function is available
  OK        Checking that the mb_strlen() function is available
  OK        Checking that the iconv() function is available
  OK        Checking that the utf8_decode() is available
  OK        Checking that the posix_isatty() is available

[[WARNING]] Checking that the intl extension is available: FAILED
            *** Install and enable the intl extension (used for validators) ***

[[WARNING]] Checking that a PHP accelerator is installed: FAILED
            *** Install a PHP accelerator like APC (highly recommended) ***

[[WARNING]] Checking that php.ini has short_open_tag set to off: FAILED
            *** Set short_open_tag to off in php.ini ***

[[WARNING]] Checking that php.ini has magic_quotes_gpc set to off: FAILED
            *** Set magic_quotes_gpc to off in php.ini ***
  OK        Checking that php.ini has register_globals set to off
  OK        Checking that php.ini has session.auto_start set to off

** Optional checks (Doctrine) **

  OK        Checking that PDO is installed
  OK        Checking that PDO has some drivers installed: mysql, sqlite, sqlite2 
```

有没有其他人解决了这个问题，或者可以给我指点检查什么？

# javascript - 如何使用 javascript/jquery 将 xml 文件加载到 jsp/html 页面

> ID：11858198
> 
> 赞同：0
> 
> 时间：2012-08-08T05:31:57.180
> 
> 标签：javascript, xml, jsp, jquery

我在 E 驱动器中创建了一个 xml 文件`E:\xmlData.xml`。
我需要`jsp/html`使用 JavaScript/jQuery 在页面加载时将此 xml 文件加载到文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:11:15.147

一般来说，JavaScript 是客户端技术。它无权访问您的本地文件系统，您无法从那里加载文件。但是 HTML5 提供了文件系统 API。它可以让你解决你的问题。这是一个[例子](http://www.html5rocks.com/en/tutorials/file/dndfiles)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:17:47.783

创建一个基于 Rest API 的服务器。当 Ajax 调用给出请求时，它将返回 xml。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:52:57.187

jQuery 提供了一个 $.get 方法，它可以从 URL 中捕获数据。因此，要“读取”xml 文档，需要通过 URL 访问它。要使用 jQuery，您必须从[http://jquery.com/](http://jquery.com/)下载 jQuery javascript 库 并将其放在当前项目/解决方案文件中。

在 head 标签内使用它：

```
<script src="jquery-1.7.2.min.js" type="text/javascript"></script> 
```

这是一个示例脚本，它将在加载时提醒 xml 文件内容...

```
<script type="text/javascript">
    var localFileUrl = '/Yourdirectory/file.xml';

    $(document).ready(function() {
        $.get(localFileUrl , function(fileContent) {
            alert(fileContent);
        });
    });
</script> 
```

# android - 如果不能可靠地调用 Activity.onDestroy()，为什么要覆盖它？

> ID：11858200
> 
> 赞同：3
> 
> 时间：2012-08-08T05:32:03.917
> 
> 标签：android, android-lifecycle, onpause, ondestroy

我很困惑为什么有人会根据[文档](http://developer.android.com/reference/android/app/Activity.html#onDestroy%28%29)`Activity.onDestroy()`覆盖而不是if ：`onPause()`

> 在某些情况下，系统将简单地终止活动的托管进程，而不在其中调用此方法（或任何其他方法），

`onDestroy()`尽管有这个警告，我还是看到了很多覆盖的代码。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T15:08:55.123

> 如果不能可靠地调用 Activity.onDestroy()，为什么要覆盖它？

并不是说它不*可靠*……只是它不是唯一`Activity`可以杀死的方法。如果您的设备开始缺乏内存资源，Android 系统可能会破坏您的整个进程而没有`ActivityManager`机会调用。`onDestroy()`

出于这个原因，您永远不应该依赖`onDestroy()`被调用，并且应该始终将持久状态保存在`onPause`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T05:45:30.733

如果进程被直接杀死，活动持有的对象将被销毁。如果进程没有被杀死（并且`onDestroy()`被调用），那么如果需要，您将不得不手动释放对象。例如，当进程被杀死时，Cursor 会被销毁，但如果进程没有被销毁，而你反复进入活动，则会出现资源泄漏。

# java - 在android中从HttpURLConnection获取InputStream时获取UnknownLengthHttpInputStream

> ID：11858204
> 
> 赞同：16
> 
> 时间：2012-08-08T05:32:11.983
> 
> 标签：java, android, web-services, inputstream, saxparser

HttpURLConnection.getInputStream() 给出 UnknownLengthHttpInputStream 并且由于此 Document 解析引发 SAX 解析器异常。

以下是代码

```
try{
    URL url = new URL(uri);
    HttpURLConnection connection =
    (HttpURLConnection) url.openConnection();
    connection.setRequestMethod("GET");
    connection.setRequestProperty("Accept", "application/xml");

    InputStream xml = connection.getInputStream();
    System.out.println(connection.getResponseCode());
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    DocumentBuilder db = dbf.newDocumentBuilder();
    Document doc = db.parse(connection.getInputStream());
    doc.getDocumentElement().normalize();

}catch(Exception e){
    e.printStackTrace();
} 
```

任何人都知道 UnknownLengthHttpInputStream 的原因。我只在 android 中收到此错误，并且此代码在 Java Project 中完美运行。

以下是 LogCat 的例外情况：

```
08-08 11:07:40.490: W/System.err(1493): org.xml.sax.SAXParseException: Unexpected end of document
08-08 11:07:40.504: W/System.err(1493): at org.apache.harmony.xml.parsers.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:129)
08-08 11:07:40.510: W/System.err(1493): at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:107)
08-08 11:07:40.510: W/System.err(1493): at com.example.testws.MainActivity.onCreate(MainActivity.java:59)
08-08 11:07:40.520: W/System.err(1493): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-08 11:07:40.520: W/System.err(1493): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
08-08 11:07:40.520: W/System.err(1493): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
08-08 11:07:40.520: W/System.err(1493): at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-08 11:07:40.530: W/System.err(1493): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T19:36:02.053

它可能是 Http 1.0（旧服务器或配置错误）服务器或未配置保持活动状态。在这种情况下，流的长度在从服务器关闭连接时是已知的。尝试在您的请求标头中指定 http1.1 和 keep-alive（一些谷歌搜索会有所帮助）。只有在服务器响应中指定了内容长度属性时，您才会提前知道流长度。

解决方法：将 http 流读入`ByteBufferStream`完全（直到`read()`返回`-1`）。然后将 ByteBufferInputStream 扔到您的库中（现在已知长度）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:25:02.613

要处理响应，请使用此方法，它将处理所有问题！

```
public static ResponseHandler<String> getResponseHandlerInstance(final Handler handler) {
      final ResponseHandler<String> responseHandler = new ResponseHandler<String>() {

         public String handleResponse(final HttpResponse response) {
            Message message = handler.obtainMessage();
            Bundle bundle = new Bundle();
            StatusLine status = response.getStatusLine();
            Log.d(CLASSTAG, " " + HTTPRequestHelper.CLASSTAG + " statusCode - " + status.getStatusCode());
            Log.d(CLASSTAG, " " + HTTPRequestHelper.CLASSTAG + " statusReasonPhrase - " + status.getReasonPhrase());
            HttpEntity entity = response.getEntity();
            String result = null;
            if (entity != null) {
               try {
                  result = HTTPRequestHelper.inputStreamToString(entity.getContent());
                  bundle.putString("RESPONSE", result);
                  message.setData(bundle);
                  handler.sendMessage(message);
               } catch (IOException e) {
                  Log.e(CLASSTAG, " " + HTTPRequestHelper.CLASSTAG, e);
                  bundle.putString("RESPONSE", "Error - " + e.getMessage());
                  message.setData(bundle);
                  handler.sendMessage(message);
               }
            } else {
               Log.w(CLASSTAG, " " + HTTPRequestHelper.CLASSTAG + " empty response entity, HTTP error occurred");
               bundle.putString("RESPONSE", "Error - " + response.getStatusLine().getReasonPhrase());
               message.setData(bundle);
               handler.sendMessage(message);
            }
            return result;
         }
      };
      return responseHandler;
   }

   private static String inputStreamToString(final InputStream stream) throws IOException {
      BufferedReader br = new BufferedReader(new InputStreamReader(stream));
      StringBuilder sb = new StringBuilder();
      String line = null;
      while ((line = br.readLine()) != null) {
         sb.append(line + "\n");
      }
      br.close();
      return sb.toString();
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T09:32:22.023

您是否尝试过为此使用 apache 库？我建议如下：

```
try {
        HttpClient client = new DefaultHttpClient();  
        String getURL = "http://www.google.com";
        HttpGet get = new HttpGet(getURL);
        HttpResponse responseGet = client.execute(get);  
        HttpEntity resEntityGet = responseGet.getEntity();  
        if (resEntityGet != null) {  
                    //do something with the response
                    Log.i("GET RESPONSE",EntityUtils.toString(resEntityGet));
                }
} catch (Exception e) {
    e.printStackTrace();
} 
```

然后获取`HttpEntity`自身的流。喜欢：

```
InputStream st = entity.getContent(); 
```

更多示例：http: [//www.softwarepassion.com/android-series-get-post-and-multipart-post-requests/](http://www.softwarepassion.com/android-series-get-post-and-multipart-post-requests/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T17:40:03.640

当*SAX 解析器*无法获取`InputStream`数据长度时，问题就出现了。`xml`要解决此问题，将从( `InputStream`) 中读取的内容保存到*String*变量中，并`InputStream`从变量中为 的`parse`方法创建一个`DocumentBuilder`。为此，请按如下方式修改您的代码：

```
try {
            URL url = new URL(uri);
            HttpURLConnection connection = (HttpURLConnection) url.openConnection();
            connection.setRequestMethod("GET");
            connection.setRequestProperty("Accept", "application/xml");
            InputStream xml = connection.getInputStream();

            DataInputStream dis = new DataInputStream(xml);
            StringBuilder sb = new StringBuilder();
            int asci = dis.read();
            while (asci > 0) {
                sb.append((char) asci);
                asci = dis.read();
            }
            String inputXML = sb.toString();            
            String predefinedXML = "<?xml version=\"1.0\" encoding=\"UTF-8\"?> <EmotionDB></EmotionDB>";
            InputStream inputStream = new ByteArrayInputStream(inputXML.getBytes());//use predefinedXML.getBytes() instead of inputXML.getBytes() for sample test

            System.out.println(connection.getResponseCode());
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            DocumentBuilder db = dbf.newDocumentBuilder();
            Document doc = db.parse(inputStream);
            doc.getDocumentElement().normalize();

        } catch (Exception e) {
            e.printStackTrace();
        } 
```

在这里，`inputStream`它将具有正确的内容长度，因为它是由`ByteArrayInputStream`具有固定字节数的 a 构建的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T15:37:32.087

一旦像这样尝试

```
if(connection.getResponseCode() ==HttpURLConnection.HTTP_OK){

  InputStream xml = connection.getInputStream();   
  ..........
}else{

//problem in URI/connection .....
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-08-18T03:57:32.810

您需要在服务中正确关闭输出流以避免此异常。如果您使用的是第三方库，请确保您已设置响应标头

```
Content-Type
Content-Length 
```

如果您使用的是 java 服务，您可以从方法获取内容长度

```
File.length() 
```

# iphone - 从 MKMapKit 中的注释标注按钮显示另一个视图控制器

> ID：11858206
> 
> 赞同：0
> 
> 时间：2012-08-08T05:32:22.013
> 
> 标签：iphone, objective-c, uiviewcontroller, mapkit, mkannotation

我正在制作一个将 MKMapKit 用于引脚和注释的应用程序。除了一些文本之外，我还想显示更多信息，所以我在标注中创建了一个按钮，以便将其转到另一个视图控制器。目前，标注中的按钮没有做任何事情，因为没有代码可以让它工作。如果有人可以为按钮编写代码以转到不同的视图控制器，那就太好了！

头文件

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>
#import <CoreLocation/CoreLocation.h>

#define METERS_PER_MILE 1609.344

@interface MSKSecondViewController :UIViewController<MKMapViewDelegate>
{
IBOutlet MKMapView *stillwellMapView;
int difficultyOfTrailOverlay;
}

@property (nonatomic, assign) CLLocationCoordinate2D mainEntranceToStillwellCoordinate;

@end 
```

这是实现文件

```
#import "MSKSecondViewController.h"
@interface MSKSecondViewController ()

@end

@implementation MSKSecondViewController
@synthesize mainEntranceToStillwellCoordinate;

- (void)viewDidLoad
{

[super viewDidLoad];
stillwellMapView.delegate=self;
// Do any additional setup after loading the view, typically from a nib.
[self mainEntrancetoStillwellCoordinate];
[self bambooForestCoordinate];
}

- (void)mainEntrancetoStillwellCoordinate
{
MKPointAnnotation * main = [[MKPointAnnotation alloc]init];
CLLocationCoordinate2D mainLocation;
mainLocation.latitude = 40.831685;
mainLocation.longitude = -73.477453;
[main setCoordinate:mainLocation];
[main setTitle:@"Entrance"];
[main setSubtitle:@"Main"];
[stillwellMapView addAnnotation:main];
}

- (void)bambooForestCoordinate
{
MKPointAnnotation * bambooForest = [[MKPointAnnotation alloc]init];
CLLocationCoordinate2D bambooForestLocation;
bambooForestLocation.latitude = 40.829118;
bambooForestLocation.longitude = -73.466443;
[bambooForest setCoordinate:bambooForestLocation];
[bambooForest setTitle:@"Bamboo Forest"];
[bambooForest setSubtitle:@"Exit to Woodbury"];
[stillwellMapView addAnnotation:bambooForest];
}

-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation 
(id<MKAnnotation>)annotation
{
MKPinAnnotationView * annView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation      
reuseIdentifier:nil];
UIButton *moreInformationButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
[moreInformationButton addTarget:self action:@selector(moreInformationButtonPressed:)     
forControlEvents:UIControlEventTouchUpInside];
annView.rightCalloutAccessoryView = moreInformationButton;
moreInformationButton.frame = CGRectMake(0, 0, 23, 23);
moreInformationButton.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
moreInformationButton.contentHorizontalAlignment = 
UIControlContentHorizontalAlignmentCenter;

annView.pinColor =MKPinAnnotationColorGreen;
annView.animatesDrop = true;
annView.canShowCallout = TRUE;
return annView;
} 
```

我不确定这是否是我需要添加的，以及这里需要进入的内容

```
-(void) moreInformationButtonPressed:(UIButton *)sender
{

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T05:46:00.070

编写以下代码：

```
-(void) moreInformationButtonPressed:(UIButton *)sender
{
     OtherViewController *controller = [[OtherViewController alloc]initWithNibName:@"OtherViewController" bundle:nil];
     [self.navigationController pushViewController:controller animated:YES];
     [controller release];      
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T05:47:36.847

首先你应该做一个标签，你可以知道点击了哪个注释

```
moreInformationButton.tag = someIndex; 
```

然后做你想做的动作

```
-(void) moreInformationButtonPressed:(UIButton *)sender
{
    int index = sender.tag;

    YourController *yc =[[[YourController alloc] initWithIndex:index] autorelease];
    [self.navigationController pushViewController:scanView animated:YES];
} 
```

# asp.net - asp.net 中的浏览器后退按钮和会话状态

> ID：11858208
> 
> 赞同：0
> 
> 时间：2012-08-08T05:32:40.063
> 
> 标签：asp.net, back-button, browser-history

我正在尝试处理用户单击浏览器后退按钮时遇到的问题。

1.  如果我不禁用缓存，则从缓存中加载页面。问题是我在会话对象中保存了数据，并且此数据与页面显示不同步，因此当用户在该页面上发出进一步请求时我会出错。
2.  如果我禁用缓存，我会`Confirm Form Resubmission`在 chrome 上得到一个“”。发生这种情况是因为与 asp.net 页面交互使用 post 请求（为了发送视图状态），因此浏览器询问是否应该重新提交表单。

这两种可能性对我来说都是有问题的。处理这个问题的最佳方法是什么？

> 编辑：

我写了我在下面找到的答案。在我看来，这是一个黑客。如果有人有更好的解决方案，我会很高兴看到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:33:23.627

我最终使用了我在[这里](http://monket.net/blog/2010/02/detecting-when-a-page-is-loaded-from-the-browser-cache/)找到的方法。

我在服务器端写了一个值为“0”的cookie，表明页面是从服务器加载的。在javascript中，我检查cookie值是否为“0”。如果值为“0”，我将 cookie 值覆盖为“1”。如果值为“1”，我会重新加载页面。

# ruby-on-rails - Rails：当控制器完成执行时使用邮件程序发送邮件

> ID：11858212
> 
> 赞同：1
> 
> 时间：2012-08-08T05:33:13.760
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, actionmailer, mailer

我正在使用一个**报告滥用****按钮**，单击哪个**ajax 调用**转到**控制器**，然后在**数据库中****插入****滥用**的帖子后，它返回成功。在成功响应时，它在 UI 主题上显示为滥用。现在我想向管理员**发送有关此的邮件。**我已经**在控制器中集成了邮件程序**，即成功执行邮件程序代码并将邮件发送给管理员。

 ******现在的问题是**发送邮件需要太多时间**，所以我的**ajax 响应时间**也**增加**了。我想要的是**邮件程序代码**应该**在控制器**发送**响应**之后执行，这样响应时间应该会减少。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T05:46:04.977

我们使用 resque mailer - [https://github.com/zapnap/resque_mailer/](https://github.com/zapnap/resque_mailer/)

更多信息：[https ://www.ruby-toolbox.com/projects/resque_mailer](https://www.ruby-toolbox.com/projects/resque_mailer)

这很容易设置。

更多信息：
[http ://blog.zerosum.org/2010/1/9/resque-mailer.html](http://blog.zerosum.org/2010/1/9/resque-mailer.html)
[http://www.scottw.com/simple-resque-mail-queue](http://www.scottw.com/simple-resque-mail-queue)
[http://ku1ik.com/2011 /04/05/resque-mailer-says-put-your-emails-to-background.html](http://ku1ik.com/2011/04/05/resque-mailer-says-put-your-emails-to-background.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T05:43:42.337

处理此问题的一种简单方法是创建一个线程来处理电子邮件。只需这样做：

```
Thread.new do
  SomeMailer.some_method.deliver
end 
```

在单独处理线程时，您的控制器操作将继续并完成 Ajax 响应。请记住，如果您的邮件程序有大量处理，那么它可能会失败（并且它不会记录任何错误，因为没有记录线程）如果仍然处理超过完成主控制器操作的时间。这只会在开发中发生，因为类在完成时未实例化。要解决这个问题，只需在你的 development.rb 中更改它：

```
config.cache_classes = true 
```

您也可以使用后台作业进程，但对于较轻的负载，线程工作得很好并且易于实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T05:37:41.483

你试过使用delayed_job吗？******

# android - 从另一个固定点找到一个点的方向

> ID：11858215
> 
> 赞同：1
> 
> 时间：2012-08-08T05:33:48.333
> 
> 标签：android, directions

我在这里有一个问题，我怎样才能从固定点找到特定点的方向。例如，从我在谷歌地图中的当前位置，我想知道特定点的方向。我怎样才能做到这一点。任何人都可以指导我这一点。提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T05:39:11.700

**试试这个代码::**

```
//calling method from onCreate() method 
```

字符串对[] = getDirectionData(sourceLat,sourceLong,destinationLat,destinationLong);

```
private String[] getDirectionData(String sourceLat, String sourceLong,
            String destinationLat, String destinationLong) {

        String urlString = "http://maps.google.com/maps?f=d&hl=en&" + "saddr="
                + sourceLat + "," + sourceLong + "&daddr=" + destinationLat
                + "," + destinationLong + "&ie=UTF8&0&om=0&output=kml";
        Log.d("URL", urlString);
        Document doc = null;
        HttpURLConnection urlConnection = null;
        URL url = null;
        String pathConent = "";

        try {

            url = new URL(urlString.toString());
            urlConnection = (HttpURLConnection) url.openConnection();
            urlConnection.setRequestMethod("GET");
            urlConnection.setDoOutput(true);
            urlConnection.setDoInput(true);
            urlConnection.connect();
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            DocumentBuilder db = dbf.newDocumentBuilder();
            doc = db.parse(urlConnection.getInputStream());

        } catch (Exception e) {
        }

        NodeList nl = doc.getElementsByTagName("LineString");
        for (int s = 0; s < nl.getLength(); s++) {
            Node rootNode = nl.item(s);
            NodeList configItems = rootNode.getChildNodes();
            for (int x = 0; x < configItems.getLength(); x++) {
                Node lineStringNode = configItems.item(x);
                NodeList path = lineStringNode.getChildNodes();
                pathConent = path.item(0).getNodeValue();
            }
        }
        String[] tempContent = pathConent.split(" ");
        return tempContent;
    } 
```

# c# - 设置默认日期 Html.jQuery().DatePicker()

> ID：11858217
> 
> 赞同：1
> 
> 时间：2012-08-08T05:33:52.060
> 
> 标签：c#, jquery-ui

```
<td colspan="2"><% Html.jQuery().DatePicker()
                        .Name("birth_date")
                        .DateFormat("dd-mm-yy")
                        .MaximumValue(DateTime.Now.AddYears(-15))
                        .MinimumValue(DateTime.Now.AddYears(-100))
                        .NavigationAsDateFormat(true)
                        .Value(Model.birth_date)
                        .Render(); %></td> 
```

默认显示 01-01-001，我想设置默认日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:22:44.663

设置`Model.birth_date`值，它的默认值可能是`DateTime.MinDate`。所以，这就是它显示的原因`01-01-001`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:15:24.703

```
<%Model.birth_date = DateTime.Now.AddYears(-15) ;  %> 
```

这让我得到了想要的结果

# objective-c - 从 UITextField 单击事件 MonoTouch 在 UIDatePicker 中选择日期

> ID：11858221
> 
> 赞同：1
> 
> 时间：2012-08-08T05:34:19.120
> 
> 标签：objective-c, ios, mono, xamarin.ios

首先，我有一个 TextField。当用户单击它时，DatePicker 将出现（在同一文本字段的视图中）。用户选择日期后，DatePicker 应消失，文本字段应显示所选日期。
我在 ViewDidLoad 中试过这段代码：

```
 txtTime.TouchDown += (sender, e) => {
    UIDatePicker picker = new UIDatePicker (new RectangleF (0, 20, this.View.Bounds.Width, 10));  
    picker.Date = DateTime.Now;
    picker.Mode = UIDatePickerMode.Time;
    this.Add(picker);
    txtTime.ResignFirstResponder();             
}; 
```

但我有一些问题：

1.  无法禁用键盘（ResignFirstResponder() 不起作用）
2.  我不知道如何处理选择日期甚至 DatePicker 为文本框设置
3.  DatePicker 出现时没有“关闭”或“完成”按钮，因此无法返回到文本字段视图（我可以在没有操作表的情况下使用 Datepicker 吗？）。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T10:05:55.307

在[“使用 MonoTouch - 2011 为 iPhone 和 iPad 开发 CSharp 应用程序”](https://rads.stackoverflow.com/amzn/click/com/1430231742)一书的第 7 章“标准控件”中，您可以看到如何实现拣货日期的示例。

基本思路是：

*   将 DatePicker 放在 UIActionSheet 上（创建自定义类，它实际上控制 DatePicker 和 UIActionSheet）；
*   在 UIActionSheet 的视图顶部添加标签“选择日期，然后按确定”和按钮“确定”/“取消”；
*   在 textField.EditingDidBegin 事件上显示 UIActionSheet。

截屏：

![它看起来如何](../Images/b0d3348e1b5177d8326c96144490905d.png)

抱歉，俄罗斯语言环境设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T05:52:17.157

```
this.txtTime.shouldreturn += (txtTime) => {
txtTime.resignfirstresponder ();
return true;
} 
```

# objective-c - 如何在不拆分的情况下渲染 BSP 树

> ID：11858222
> 
> 赞同：1
> 
> 时间：2012-08-08T05:34:18.770
> 
> 标签：objective-c, c, algorithm, cocos2d-iphone, bsp-tree

我有一个用于在等距游戏中进行深度排序的 BSP 树（我尝试了无数其他方法），它似乎很接近，但在我的游戏中我无法拆分资产。因此，拦截当前平面的项目，我只需将它们添加到“后面”和“前面”节点（如[http://www.seas.upenn.edu/~cis568/presentations/bsp-techniques.pdf](http://www.seas.upenn.edu/~cis568/presentations/bsp-techniques.pdf)中所建议的） ）。

当我遍历树（从最低深度​​到最高深度）时，我只渲染一次精灵（我第一次接近它），但这似乎将一些精灵在显示顺序中放置得太低。

对此的任何见解将不胜感激。顺便说一句，这是在（主要是）C for iOS 中。

提前谢谢（我试着在这里回答一些问题，但你们都太快了！）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:30:36.547

我认为 BSP 树不会帮助您解决等距平铺渲染中普遍存在的（字面）精灵排序问题。特别是如果你有像门这样的拱门，总会有一个点，角色会突然出现在拱门的下方/上方。BSP 树有助于快速对 3D 世界中的可见区域进行分类，但等轴测图是 2 维分层视图，其中单个平铺图像的大小等其他效果比空间中的位置发挥更大的影响。

事实上，最常见的解决方案是拆分资产，以便根据每个部分到相机的距离，在玩家前面或后面渲染拱门（或任何更大的等距对象）的各个部分。

另一种方法是添加阻挡，以便玩家和其他对象永远不会太靠近精灵渲染通常由于排序问题而失败的区域。但这只有从一开始就内置（瓷砖的大小，世界碰撞的大小）才有效。

# asp.net - 用于 asp.net 的 DHTMLX 调度程序

> ID：11858223
> 
> 赞同：1
> 
> 时间：2012-08-08T05:34:21.053
> 
> 标签：asp.net, dhtmlx

我想将 DHTMLX 用于 asp.net 而不是 mvc。我只能找到在 mvc 中使用它们的教程。是否有任何教程可以指导在 asp.net 3.5 中使用。我正在使用视觉工作室 2008。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T09:03:29.700

在 C# 和 VB.Net 中也有针对 asp.net 的教程

[http://blog.scheduler-net.com/post/2012/07/09/vb-scheduler-tutorial.aspx](http://blog.scheduler-net.com/post/2012/07/09/vb-scheduler-tutorial.aspx)

[http://scheduler-net.com/docs/common_application_with_scheduler.html](http://scheduler-net.com/docs/common_application_with_scheduler.html)

它们是在visual studio 2010中完成的，但我认为不会有问题

# toggleclass - 如何在右侧保持切换 jQuery 内容

> ID：11858224
> 
> 赞同：1
> 
> 时间：2012-08-08T05:34:29.433
> 
> 标签：toggleclass, jquery

我想使用切换 Jquery。我想将主题保留在页面的左侧。当用户点击主题时，该主题的相关内容应显示在页面右侧。请任何人都可以提供有关如何使用切换来执行此操作的详细说明吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T06:13:49.420

```
$('.topic').click(function() {
    $('.related-content', this).toggle();
}); 
```

[http://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

**[演示](http://jsfiddle.net/umEYG/)**

# iphone - 加载视图时的iPhone幻灯片动画

> ID：11858228
> 
> 赞同：0
> 
> 时间：2012-08-08T05:34:57.490
> 
> 标签：iphone, ipad, uiview, uiviewanimation

在 iPhone 应用程序中加载视图时如何执行滑动动画？

我有一个 ViewController，其中有子视图。我希望子视图加载动画，从左向右滑动。

到目前为止我得到了这个代码：

```
-(void) showAnimation{

    [self.view addSubview:geopointView]
    geopointView.frame = CGRectMake(20,150,550,200)// somewhere offscreen, in the direction you want it to appear from
    [UIView animateWithDuration:10.0 
         animations:^{
             geopointView.frame = CGRectMake(20,150,550,200)// its final location
    }];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T05:42:03.700

为什么不？

```
-(void) showAnimation{
[self.view addSubview:geopointView]
geopointView.frame = CGRectMake(-200,150,550,200)// just set a different frame
[UIView animateWithDuration:10.0 
             delay:0.0
             options:UIViewAnimationCurveEaseOut
             animations:^{
                 geopointView.frame = CGRectMake(20,150,550,200)// its final location
             }
             completion:nil];
} 
```

# sql - sql索引优化查询

> ID：11858230
> 
> 赞同：0
> 
> 时间：2012-08-08T05:34:59.893
> 
> 标签：sql, ios, sqlite, indexing

我的应用程序中有许多看起来像这样的查询；

```
SELECT DISTINCT STREET_NUMBER, STREET_NAME
FROM leads
WHERE STREET_NAME || ',' || SUBURB IN (select VAL from streetFilter)
    AND USER_ID IN (%@)
    AND TIMESTAMP >= '%@'
    AND TIMESTAMP <= '%@'
    AND GEO_LAT <> '0'
ORDER BY STREET_NAME, CAST(`STREET_NUMBER` AS SIGNED) ASC 
```

我的问题是，我应该向哪些值或值集添加索引。

到目前为止，我刚刚添加了所有内容，即 CREATE INDEX temp ON 线索（'见下文'）

1.  （STREET_NUMBER，STREET_NAME）
2.  （街道，郊区）
3.  （STREET_NAME || ',' || 郊区）
4.  （用户身份）
5.  （时间戳）
6.  (GEO_LAT)
7.  （街道、郊区、USER_ID、TIMESTAMP、GEO_LAT）
8.  （STREET_NAME || ',' || SUBURB、USER_ID、TIMESTAMP、GEO_LAT）
9.  （街道名称）
10.  （街道号码）
11.  （演员（`STREET_NUMBER`已签名））
12.  （STREET_NAME，STREET_NUMBER）
13.  （STREET_NAME，演员（已`STREET_NUMBER`签名））

但我知道这不可能。谁能指出其中哪些不起作用或不会使我的查询更快，哪些会？

数据库是sqlite

我的创建语句：@“CREATE TABLE IF NOT EXISTS 线索（LEAD_ID BIGINT PRIMARY KEY, USER_ID INTEGER, GEO_LAT, GEO_LONG, CUSTOMER_NAME, UNIT_NUMBER, STREET_NUMBER, STREET_NAME, SUBURB, STATE, POSTCODE INTEGER, NMI, DPI_MIRN, STATUS, STATUS_INT INTEGER, OUTCOME INTEGER, OUTCOME_FULL INTEGER, FINAL_CODE INTEGER, NOTES, NOTES_EXTRA, TIMESTAMP)"];

719130;50;-32.933871;151.774978;Mr David Lee;1;34;LEMNOS PDE;NEWCASTLE;NSW;2300;;;P;0;0;;0;;0:0:0;20120602174036 719233;50;- 32.9307183;151.7803428;Mr Mitch James;1;1-7;TYRRELL ST;THE HILL;NSW;2300;;;P;0;0;;0;;0:0:0;20120602174036 719234;50;-32.933155; 151.777351;Ben Foster 先生;;4;BINGLE ST;NEWCASTLE;NSW;2300;41021027208;52404368858;C;0;0;;0;;0:0:0;20120602174036 719300;50;-32.9291125;151.785025;Mslyn; Rajakulenthiran;U 12;3;KING ST;NEWCASTLE;NSW;2300;;;P;0;0;;0;;0:0:0;20120602174036

查询现在是 SELECT LEAD_ID, USER_ID, UNIT_NUMBER, STREET_NUMBER, STREET_NAME, SUBURB, STATE, POSTCODE, STATUS_INT, OUTCOME, CUSTOMER_NAME, NOTES FROM Leads JOIN resultsFilter ON Leads.OUTCOME = 结果过滤器.VAL JOIN郊区过滤器打开线索.SUBPOST =郊区过滤器.VAL USER_ID IN (%@) AND TIMESTAMP BETWEEN '%@' AND '%@' ORDER BY SUBURB, STREET_NAME, CAST(STREET_NUMBER AS SIGNED)

我最初的情况仍然没有改善。似乎是最慢的顺序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T05:37:56.893

最好的办法是查看查询执行计划并检查返回的建议索引。索引过多和/或在错误的位置实际上会损害性能，这会适得其反。

要访问执行计划：

> 在查询菜单上，单击显示执行计划，然后在查询窗口中运行查询。执行计划和查询结果现在显示在窗口的单独窗格中，因此您可以一起查看它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T05:43:09.547

好吧，您对表中的几乎所有字段都进行了范围扫描。

我建议查看说明，然后查看以下内容是否更好：

```
create index lookup_idx on leads(user_id, timestamp, geo_lat). 
```

如果您使用的是 MySQL，您将无法使用该索引的 geo_lat 部分，因此请使用 (user_id, timestamp)。Oracle 可以在范围内执行 SKIP SCANS，因此如果使用 Oracle，请将 geo_lat 保留在索引中。

让我们确切地知道您正在使用哪个数据库，并发布 EXPLAIN PLAN（但是您为该 RDBMS 获取它）和潜在客户的 CREATE TABLE 以便我们可以看到发生了什么。

*编辑*注意到这是 SQLlite。在这种情况下可能是 (user_id, timestamp)，但我可以稍后再用 SQLfiddle 检查。

再次，请发布 CREATE TABLE 和一些示例数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T05:43:21.720

一般来说，您只需要（也许）在那些涉及*搜索、排序、连接或 WHERE 条件的字段上使用索引。* 您的表中有几个字段不属于任何这些类别；可以安全地消除这些字段的索引，而不会对查询的性能产生负面影响。

运行执行计划将告诉您是否也不需要属于这些类别之一的字段的任何*索引*。例如，如果字段的基数太小（即唯一值很少）以至于索引无济于事，这是可能的。

有关 SQLite 的特定优化和索引使用的更多信息可以在这里找到：[http](http://www.sqlite.org/optoverview.html) ://www.sqlite.org/optoverview.html 。

值得注意的是：SQLite 将最多为查询中的每个表使用一个索引。请参阅[在多个索引之间进行选择](http://www.sqlite.org/optoverview.html#multi_index)。ANALYZE 命令将帮助您确定哪些索引最有价值。

# java - java.lang.OutOfMemoryError:PermGen 空间

> ID：11858236
> 
> 赞同：-1
> 
> 时间：2012-08-08T05:35:56.273
> 
> 标签：java

> **可能重复：**
> [处理“java.lang.OutOfMemoryError: PermGen space”错误](https://stackoverflow.com/questions/88235/dealing-with-java-lang-outofmemoryerror-permgen-space-error)

在 Catalina.out 日志中，我得到了下面提到的异常。申请太慢了。java.lang.OutOfMemoryError:PermGen 空间

我需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T05:46:35.707

尝试增加堆大小。

也许是这样：

`export CATALINA_OPTS="-Xms1024m -Xmx2048m"`

然后使用 VisualVM 跟踪内存使用情况：

[http://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/intro.html](http://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/intro.html)

# firefox-addon - 为什么包裹在 firefox 插件中的用户脚本会比在greasemonkey 中的相同脚本慢？

> ID：11858239
> 
> 赞同：3
> 
> 时间：2012-08-08T05:36:11.617
> 
> 标签：firefox-addon, greasemonkey, firefox-addon-sdk, userscripts

我一直致力于将 Greasemonkey 用户脚本转换为 Firefox 插件。我正在使用 page-mod 模块，它似乎按预期工作。

除了它明显变慢！

第一个较慢的动作是脚本的加载。即使我已将 my 设置`contentScriptWhen`为`ready`，xpi 版本（其中插入了一个用于切换其操作的复选框）需要更长的时间来加载和显示其复选框。

第二个较慢的动作是它的切换动作。切换的影响需要明显更长的时间来执行。

该脚本很长且涉及，因此我没有将其包含在此处。但总的来说，它使用 jQuery（粘贴到引用的 中`contentScriptFile`）对页面进行一些修改。这些模组通过上述切换打开和关闭。

谁能想到为什么相同的用户脚本在通过 XPI 插件加载时会比通过 Greasemonkey 加载相同的脚本时明显慢得多的一般原因？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-03T18:27:18.413

Page-mods 是 UserScripts 的实现方式不同，前者更全代理且更安全，但在某些情况下也较慢。你的 page-mod 写得越好，它就越受益。

# ruby - 偶尔网络解密失败，本地解密OK

> ID：11858240
> 
> 赞同：1
> 
> 时间：2012-08-08T05:36:16.757
> 
> 标签：ruby, encryption, openssl

我正在通过网络发送密码，并在发送它们之前验证它们是否可以被解密，并且它们始终如一地从测试中正常运行，但是当它们通过网络发送时，它们不再正确解密。这不会始终如一地发生。它们比其他方式更常见地被发送并解密，但是它们未能经常解密以产生严重的问题。我猜测密码中使用的某些字符并非旨在通过网络传播，因此它们在某个时候被替换，因此密码从其旅程中以损坏的状态返回。不过，这只是一个猜测。有人有想法么？细节：

```
require 'openssl'
require 'digest/sha1'

cipher = OpenSSL::Cipher::Cipher.new("aes-256-cbc")
cipher.encrypt
key = Digest::SHA1.hexdigest("password")
iv = cipher.random_iv 
```

我收到的错误消息主要是“解密错误”，但也有“iv 长度太短”和“最终块长度错误”。它似乎以某种方式与时间有关，因为我似乎更频繁地得到一连串错误或一连串干净的解密，而不是混合的东西，所以这指向了我脑海中的密码字符问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-05T14:03:51.113

加密文本和 IV 是二进制字符串，因此包含不安全通过网络发送的字符。您可以将二进制字符串解压缩为十六进制并将其发送过来。

```
encrypted.unpack("H*).first 
```

在另一端：

```
encrypted_data = [hex_data].pack("H*") 
```

# php - 将url与特定字符串匹配后如何从url获取用户名？

> ID：11858243
> 
> 赞同：0
> 
> 时间：2012-08-08T05:36:22.933
> 
> 标签：php, regex

在检查 url 的其余部分类似于字符串后，我想从 url 获取用户名。

例如：我需要来自 url 'http://mysite.com/username' 的用户名。在此之前需要检查

网站网址为“http://mysite.com/”，并且用户名部分仅包含字母、数字、

下划线和句号..

怎么可能使用php？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T05:49:06.577

我用 PHP5.4.5 测试过：

```
<?php

$simple = 'http://mysite.com/username';

if ( preg_match('/http:\/\/mysite\.com\/(?:([-\w]+)\/?)/', $simple, $match) > 0){
    echo 'Username is: '.$match[1] . "\n";

}

$complex = 'http://mysite.com.zzz.yyy/john/';
if ( preg_match('/http:\/\/\w+(?:\.\w+)*\/(?:([-\w]+)\/?)/', $complex, $match) > 0){
    echo 'Username is: '.$match[1] . "\n";

}

?> 
```

输出：

```
Username is: username
Username is: john 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T05:52:33.333

有解析 URL 的函数：

[http://php.net/manual/en/function.parse-url.php](http://php.net/manual/en/function.parse-url.php)

如果你这样做：

```
$url = 'http://mysite.com/username';
$array = parse_url($url);
print_r($array); 
```

你会看到这个：

```
Array
(
    [scheme] => http
    [host] => mysite.com
    [path] => /username
) 
```

现在您可以单独处理 URL 的路径。如果还有更多内容，`/username/`那么您将拆分 '/' 并使用返回的第一个项目。

```
 $path_array = explode('/',$array['path']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T05:43:17.000

如果您想使用正则表达式尝试此操作，您可以使用具有两个捕获组的模式，一个用于域名，一个用于用户名，如下所示：

```
^http\:\/\/([^/]+)\/(.+)$ 
```

（我在那里转义了冒号，因为老实说我不记得是否有必要。如果没有，它不需要转义字符）

这将查找 http:// 后跟一个不包含 / 的字符串（因此它会一直抓取直到它到达下一个 /），然后需要一个 / 然后抓取任何其他后续内容直到结束字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T05:47:23.287

这就是你所拥有的：

```
preg_match('/mysite.com//[a-zA-Z0-9-]';, $user_name, $matches); 
```

你没有分隔符，那是什么`;`？试试这个：

```
preg_match('|/mysite.com//[a-zA-Z0-9-]|', $user_name, $matches); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T05:53:59.767

```
$url = "http://mysite.com/username";
$arr = parse_url($url);
if($arr['host'] != "mysite.com"){
    // do something 
}
print_r(trim($arr['path'],'/')); 
```

# svn - Bitnami +Redmine + Subversion（如果我更改 httpd.conf，Apache 不会启动）

> ID：11858248
> 
> 赞同：0
> 
> 时间：2012-08-08T05:36:41.717
> 
> 标签：svn, redmine, bitnami

我正在尝试设置 Bitnami+Redmine 并使其正常工作，但我希望将代码链接到 svn 存储库...感谢您在这方面的帮助。

问题 1：在“已启用 SCM”下的存储库中，我得到....“您可以在 config/configuration.yml 中配置您的 scm 命令。请在编辑后重新启动应用程序。” 我附上了相同的屏幕截图...我应该得到一个 Subversion 和文本框，按照步骤在此处输入 subversion repo 的 url，但我在这里没有选项。

问题 2：

我编辑了 httpd.conf 文件。按照 subversion 中的 README.txt 中的步骤进行操作...但是在此之后 Apache 将无法启动....如果我将其注释掉，它将完美运行。

1.  将 bin/mod_dav_svn.so 和 bin/mod_authz_svn.so 复制到 Apache 模块目录。
2.  将 Subversion/bin 目录添加到 SYSTEM PATH 并重新启动，以便所有 Subversion 支持 dll 对 Apache 服务可见。
3.  编辑 Apache 配置文件 (httpd.conf) 并进行以下更改：

    3a。取消注释以下两行：

    #LoadModule dav_fs_module modules/mod_dav_fs.so
    #LoadModule dav_module modules/mod_dav.so

    3b。将以下两行添加到 LoadModule 部分的末尾：

    LoadModule dav_svn_module modules/mod_dav_svn.so
    LoadModule authz_svn_module modules/mod_authz_svn.so

    3c。将以下行添加到文件末尾。注意：此 Location 指令是一个没有身份验证指令的最小示例。对于其他选项，尤其是身份验证选项，请参阅 Subversion INSTALL 文件、Subversion Book 或 TortoiseSVN 手册。

    DAV svn SVNPath your/repository/path

****__ *_* __ *_* __ *_* _** *httpd.conf* ***_* __ *_* __ *_* __ *_*****

 **```
#
# This is the main Apache HTTP server configuration file.  It contains the
# configuration directives that give the server its instructions.
# See <URL:http://httpd.apache.org/docs/2.2> for detailed information.
# In particular, see 
# <URL:http://httpd.apache.org/docs/2.2/mod/directives.html>
# for a discussion of each configuration directive.
#
# Do NOT simply read the instructions in here without understanding
# what they do.  They're here only as hints or reminders.  If you are unsure
# consult the online docs. You have been warned.  
#
# Configuration and logfile names: If the filenames you specify for many
# of the server's control files begin with "/" (or "drive:/" for Win32), the
# server will use that explicit path.  If the filenames do *not* begin
# with "/", the value of ServerRoot is prepended -- so "logs/foo.log"
# with ServerRoot set to "C:/Program Files/BitNami Redmine Stack/apache2" will be interpreted by the
# server as "C:/Program Files/BitNami Redmine Stack/apache2/logs/foo.log".
#
# NOTE: Where filenames are specified, you must use forward slashes
# instead of backslashes (e.g., "c:/apache" instead of "c:\apache").
# If a drive letter is omitted, the drive on which httpd.exe is located
# will be used by default.  It is recommended that you always supply
# an explicit drive letter in absolute paths to avoid confusion.

#
# ServerRoot: The top of the directory tree under which the server's
# configuration, error, and log files are kept.
#
# Do not add a slash at the end of the directory path.  If you point
# ServerRoot at a non-local disk, be sure to point the LockFile directive
# at a local disk.  If you wish to share the same ServerRoot for multiple
# httpd daemons, you will need to change at least LockFile and PidFile.
#
ServerRoot "C:/Program Files/BitNami Redmine Stack/apache2"

#
# Listen: Allows you to bind Apache to specific IP addresses and/or
# ports, instead of the default. See also the <VirtualHost>
# directive.
#
# Change this to Listen on specific IP addresses as shown below to 
# prevent Apache from glomming onto all bound IP addresses.
#
#Listen 12.34.56.78:80
Listen 80

#
# Dynamic Shared Object (DSO) Support
#
# To be able to use the functionality of a module which was built as a DSO you
# have to place corresponding `LoadModule' lines at this location so the
# directives contained in it are actually available _before_ they are used.
# Statically compiled modules (those listed by `httpd -l') do not need
# to be loaded here.
#
# Example:
# LoadModule foo_module modules/mod_foo.so
#
LoadModule actions_module modules/mod_actions.so
LoadModule alias_module modules/mod_alias.so
LoadModule asis_module modules/mod_asis.so
LoadModule auth_basic_module modules/mod_auth_basic.so
#LoadModule auth_digest_module modules/mod_auth_digest.so
#LoadModule authn_alias_module modules/mod_authn_alias.so
#LoadModule authn_anon_module modules/mod_authn_anon.so
#LoadModule authn_dbd_module modules/mod_authn_dbd.so
#LoadModule authn_dbm_module modules/mod_authn_dbm.so
LoadModule authn_default_module modules/mod_authn_default.so
LoadModule authn_file_module modules/mod_authn_file.so
#LoadModule authnz_ldap_module modules/mod_authnz_ldap.so
#LoadModule authz_dbm_module modules/mod_authz_dbm.so
LoadModule authz_default_module modules/mod_authz_default.so
LoadModule authz_groupfile_module modules/mod_authz_groupfile.so
LoadModule authz_host_module modules/mod_authz_host.so
#LoadModule authz_owner_module modules/mod_authz_owner.so
LoadModule authz_user_module modules/mod_authz_user.so
LoadModule autoindex_module modules/mod_autoindex.so
#LoadModule cache_module modules/mod_cache.so
#LoadModule cern_meta_module modules/mod_cern_meta.so
LoadModule cgi_module modules/mod_cgi.so
#LoadModule charset_lite_module modules/mod_charset_lite.so
LoadModule dav_module modules/mod_dav.so
LoadModule dav_fs_module modules/mod_dav_fs.so
#LoadModule dav_lock_module modules/mod_dav_lock.so
#LoadModule dbd_module modules/mod_dbd.so
LoadModule deflate_module modules/mod_deflate.so
LoadModule dir_module modules/mod_dir.so
#LoadModule disk_cache_module modules/mod_disk_cache.so
#LoadModule dumpio_module modules/mod_dumpio.so
LoadModule env_module modules/mod_env.so
#LoadModule expires_module modules/mod_expires.so
#LoadModule ext_filter_module modules/mod_ext_filter.so
#LoadModule file_cache_module modules/mod_file_cache.so
#LoadModule filter_module modules/mod_filter.so
LoadModule headers_module modules/mod_headers.so
#LoadModule ident_module modules/mod_ident.so
#LoadModule imagemap_module modules/mod_imagemap.so
LoadModule include_module modules/mod_include.so
#LoadModule info_module modules/mod_info.so
LoadModule isapi_module modules/mod_isapi.so
#LoadModule ldap_module modules/mod_ldap.so
#LoadModule logio_module modules/mod_logio.so
LoadModule log_config_module modules/mod_log_config.so
#LoadModule log_forensic_module modules/mod_log_forensic.so
#LoadModule mem_cache_module modules/mod_mem_cache.so
LoadModule mime_module modules/mod_mime.so
#LoadModule mime_magic_module modules/mod_mime_magic.so
LoadModule negotiation_module modules/mod_negotiation.so
LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_ajp_module modules/mod_proxy_ajp.so
LoadModule proxy_balancer_module modules/mod_proxy_balancer.so
LoadModule proxy_connect_module modules/mod_proxy_connect.so
LoadModule proxy_ftp_module modules/mod_proxy_ftp.so
LoadModule proxy_http_module modules/mod_proxy_http.so
#LoadModule proxy_scgi_module modules/mod_proxy_scgi.so
#LoadModule reqtimeout_module modules/mod_reqtimeout.so
LoadModule rewrite_module modules/mod_rewrite.so
LoadModule setenvif_module modules/mod_setenvif.so
#LoadModule speling_module modules/mod_speling.so
#LoadModule ssl_module modules/mod_ssl.so
#LoadModule status_module modules/mod_status.so
#LoadModule substitute_module modules/mod_substitute.so
#LoadModule unique_id_module modules/mod_unique_id.so
#LoadModule userdir_module modules/mod_userdir.so
#LoadModule usertrack_module modules/mod_usertrack.so
LoadModule version_module modules/mod_version.so
#LoadModule vhost_alias_module modules/mod_vhost_alias.so

LoadModule dav_svn_module modules/mod_dav_svn.so
LoadModule authz_svn_module modules/mod_authz_svn.so

<IfModule !mpm_netware_module>
<IfModule !mpm_winnt_module>
#
# If you wish httpd to run as a different user or group, you must run
# httpd as root initially and it will switch.  
#
# User/Group: The name (or #number) of the user/group to run httpd as.
# It is usually good practice to create a dedicated user and group for
# running httpd, as with most system services.
#
User daemon
Group daemon

</IfModule>
</IfModule>

# 'Main' server configuration
#
# The directives in this section set up the values used by the 'main'
# server, which responds to any requests that aren't handled by a
# <VirtualHost> definition.  These values also provide defaults for
# any <VirtualHost> containers you may define later in the file.
#
# All of these directives may appear inside <VirtualHost> containers,
# in which case these default settings will be overridden for the
# virtual host being defined.
#

#
# ServerAdmin: Your address, where problems with the server should be
# e-mailed.  This address appears on some server-generated pages, such
# as error documents.  e.g. admin@your-domain.com
#
ServerAdmin webmaster@example.com

#
# ServerName gives the name and port that the server uses to identify itself.
# This can often be determined automatically, but we recommend you specify
# it explicitly to prevent problems during startup.
#
# If your host doesn't have a registered DNS name, enter its IP address here.
#
ServerName localhost:80

#
# DocumentRoot: The directory out of which you will serve your
# documents. By default, all requests are taken from this directory, but
# symbolic links and aliases may be used to point to other locations.
#
DocumentRoot "C:/Program Files/BitNami Redmine Stack/apache2/htdocs"

#
# Each directory to which Apache has access can be configured with respect
# to which services and features are allowed and/or disabled in that
# directory (and its subdirectories). 
#
# First, we configure the "default" to be a very restrictive set of 
# features.  
#
<Directory />
    Options FollowSymLinks
    AllowOverride None
    Order deny,allow
    Deny from all
</Directory>

#
# Note that from this point forward you must specifically allow
# particular features to be enabled - so if something's not working as
# you might expect, make sure that you have specifically enabled it
# below.
#

#
# This should be changed to whatever you set DocumentRoot to.
#
<Directory "C:/Program Files/BitNami Redmine Stack/apache2/htdocs">
    #
    # Possible values for the Options directive are "None", "All",
    # or any combination of:
    #   Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews
    #
    # Note that "MultiViews" must be named *explicitly* --- "Options All"
    # doesn't give it to you.
    #
    # The Options directive is both complicated and important.  Please see
    # http://httpd.apache.org/docs/2.2/mod/core.html#options
    # for more information.
    #
    Options Indexes FollowSymLinks

    #
    # AllowOverride controls what directives may be placed in .htaccess files.
    # It can be "All", "None", or any combination of the keywords:
    #   Options FileInfo AuthConfig Limit
    #
    AllowOverride None

    #
    # Controls who can get stuff from this server.
    #
    Order allow,deny
    Allow from all

</Directory>

#
# DirectoryIndex: sets the file that Apache will serve if a directory
# is requested.
#
<IfModule dir_module>
    DirectoryIndex index.html index.php
</IfModule>

#
# The following lines prevent .htaccess and .htpasswd files from being 
# viewed by Web clients. 
#
<FilesMatch "^\.ht">
    Order allow,deny
    Deny from all
    Satisfy All
</FilesMatch>

#
# ErrorLog: The location of the error log file.
# If you do not specify an ErrorLog directive within a <VirtualHost>
# container, error messages relating to that virtual host will be
# logged here.  If you *do* define an error logfile for a <VirtualHost>
# container, that host's errors will be logged there and not here.
#
ErrorLog "logs/error.log"

#
# LogLevel: Control the number of messages logged to the error_log.
# Possible values include: debug, info, notice, warn, error, crit,
# alert, emerg.
#
LogLevel warn

<IfModule log_config_module>
    #
    # The following directives define some format nicknames for use with
    # a CustomLog directive (see below).
    #
    LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
    LogFormat "%h %l %u %t \"%r\" %>s %b" common

    <IfModule logio_module>
      # You need to enable mod_logio.c to use %I and %O
      LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" %I %O" combinedio
    </IfModule>

    #
    # The location and format of the access logfile (Common Logfile Format).
    # If you do not define any access logfiles within a <VirtualHost>
    # container, they will be logged here.  Contrariwise, if you *do*
    # define per-<VirtualHost> access logfiles, transactions will be
    # logged therein and *not* in this file.
    #
    CustomLog "logs/access.log" common

    #
    # If you prefer a logfile with access, agent, and referer information
    # (Combined Logfile Format) you can use the following directive.
    #
    #CustomLog "logs/access.log" combined
</IfModule>

<IfModule alias_module>
    #
    # Redirect: Allows you to tell clients about documents that used to 
    # exist in your server's namespace, but do not anymore. The client 
    # will make a new request for the document at its new location.
    # Example:
    # Redirect permanent /foo http://www.example.com/bar

    #
    # Alias: Maps web paths into filesystem paths and is used to
    # access content that does not live under the DocumentRoot.
    # Example:
    # Alias /webpath /full/filesystem/path
    #
    # If you include a trailing / on /webpath then the server will
    # require it to be present in the URL.  You will also likely
    # need to provide a <Directory> section to allow access to
    # the filesystem path.

    #
    # ScriptAlias: This controls which directories contain server scripts. 
    # ScriptAliases are essentially the same as Aliases, except that
    # documents in the target directory are treated as applications and
    # run by the server when requested rather than as documents sent to the
    # client.  The same rules about trailing "/" apply to ScriptAlias
    # directives as to Alias.
    #
    ScriptAlias /cgi-bin/ "C:/Program Files/BitNami Redmine Stack/apache2/cgi-bin/"

</IfModule>

<IfModule cgid_module>
    #
    # ScriptSock: On threaded servers, designate the path to the UNIX
    # socket used to communicate with the CGI daemon of mod_cgid.
    #
    #Scriptsock logs/cgisock
</IfModule>

#
# "C:/Program Files/BitNami Redmine Stack/apache2/cgi-bin" should be changed to whatever your ScriptAliased
# CGI directory exists, if you have that configured.
#
<Directory "C:/Program Files/BitNami Redmine Stack/apache2/cgi-bin">
    AllowOverride None
    Options None
    Order allow,deny
    Allow from all
</Directory>

#
# DefaultType: the default MIME type the server will use for a document
# if it cannot otherwise determine one, such as from filename extensions.
# If your server contains mostly text or HTML documents, "text/plain" is
# a good value.  If most of your content is binary, such as applications
# or images, you may want to use "application/octet-stream" instead to
# keep browsers from trying to display binary files as though they are
# text.
#
DefaultType text/plain

<IfModule mime_module>
    #
    # TypesConfig points to the file containing the list of mappings from
    # filename extension to MIME-type.
    #
    TypesConfig conf/mime.types

    #
    # AddType allows you to add to or override the MIME configuration
    # file specified in TypesConfig for specific file types.
    #
    #AddType application/x-gzip .tgz
    #
    # AddEncoding allows you to have certain browsers uncompress
    # information on the fly. Note: Not all browsers support this.
    #
    #AddEncoding x-compress .Z
    #AddEncoding x-gzip .gz .tgz
    #
    # If the AddEncoding directives above are commented-out, then you
    # probably should define those extensions to indicate media types:
    #
    AddType application/x-compress .Z
    AddType application/x-gzip .gz .tgz

    #
    # AddHandler allows you to map certain file extensions to "handlers":
    # actions unrelated to filetype. These can be either built into the server
    # or added with the Action directive (see below)
    #
    # To use CGI scripts outside of ScriptAliased directories:
    # (You will also need to add "ExecCGI" to the "Options" directive.)
    #
    #AddHandler cgi-script .cgi

    # For type maps (negotiated resources):
    #AddHandler type-map var

    #
    # Filters allow you to process content before it is sent to the client.
    #
    # To parse .shtml files for server-side includes (SSI):
    # (You will also need to add "Includes" to the "Options" directive.)
    #
    #AddType text/html .shtml
    #AddOutputFilter INCLUDES .shtml
</IfModule>

#
# The mod_mime_magic module allows the server to use various hints from the
# contents of the file itself to determine its type.  The MIMEMagicFile
# directive tells the module where the hint definitions are located.
#
#MIMEMagicFile conf/magic

#
# Customizable error responses come in three flavors:
# 1) plain text 2) local redirects 3) external redirects
#
# Some examples:
#ErrorDocument 500 "The server made a boo boo."
#ErrorDocument 404 /missing.html
#ErrorDocument 404 "/cgi-bin/missing_handler.pl"
#ErrorDocument 402 http://www.example.com/subscription_info.html
#

#
# MaxRanges: Maximum number of Ranges in a request before
# returning the entire resource, or one of the special
# values 'default', 'none' or 'unlimited'.
# Default setting is to accept 200 Ranges.
#MaxRanges unlimited

#
# EnableMMAP and EnableSendfile: On systems that support it, 
# memory-mapping or the sendfile syscall is used to deliver
# files.  This usually improves server performance, but must
# be turned off when serving from networked-mounted 
# filesystems or if support for these functions is otherwise
# broken on your system.
#
#EnableMMAP off
#EnableSendfile off

# Supplemental configuration
#
# The configuration files in the conf/extra/ directory can be 
# included to add extra features or to modify the default configuration of 
# the server, or you may simply copy their contents here and change as 
# necessary.

# Server-pool management (MPM specific)
#Include conf/extra/httpd-mpm.conf

# Multi-language error messages
#Include conf/extra/httpd-multilang-errordoc.conf

# Fancy directory listings
#Include conf/extra/httpd-autoindex.conf

# Language settings
#Include conf/extra/httpd-languages.conf

# User home directories
#Include conf/extra/httpd-userdir.conf

# Real-time info on requests and configuration
#Include conf/extra/httpd-info.conf

# Virtual hosts
#Include conf/extra/httpd-vhosts.conf

# Local access to the Apache HTTP Server Manual
#Include conf/extra/httpd-manual.conf

# Distributed authoring and versioning (WebDAV)
#Include conf/extra/httpd-dav.conf

# Various default settings
#Include conf/extra/httpd-default.conf

# Secure (SSL/TLS) connections
#Include conf/extra/httpd-ssl.conf
#
# Note: The following must must be present to support
#       starting without SSL on platforms with no /dev/random equivalent
#       but a statically compiled-in mod_ssl.
#
<IfModule ssl_module>
SSLRandomSeed startup builtin
SSLRandomSeed connect builtin
</IfModule>

# Security 
ServerSignature Off
ServerTokens Prod

Include "C:\Program Files\BitNami Redmine Stack/apache2/conf/ssi.conf"
LoadModule php5_module "C:/PROGRA~1/BITNAM~1/php/php5apache2_2.dll"
AddType application/x-httpd-php .php
PHPIniDir "C:/Program Files/BitNami Redmine Stack/php"

Include "C:/Program Files/BitNami Redmine Stack/apache2/conf/fastcgi.conf"
Include "C:/Program Files/BitNami Redmine Stack/apps/phpmyadmin/conf/phpmyadmin.conf"
Include "C:/Program Files/BitNami Redmine Stack/apps/redmine/conf/redmine.conf"

<Location /svn>
DAV svn
SVNPath "C:/repository/projects"
</Location> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:38:16.397

如果您配置 SCM 存储库，您可以直接在 Redmine 应用程序中显示存储库文件和更改（不确定这是否是您想要的）。必须从管理面板启用 SCM：Administration->Settings->Repositories->Enabled SCM。你能试试吗？**

# android - 在android中创建音频文件的波形

> ID：11858249
> 
> 赞同：8
> 
> 时间：2012-08-08T05:36:47.520
> 
> 标签：android

我想在android中创建音频文件的波形。谁能给我一个示例源代码？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-08T06:18:32.100

创建类并扩展视图。然后为你的类创建监听器接口。

```
public class WaveformCls extends View {
    public interface WaveformListener {
        public void waveformTouchStart(float x);
        public void waveformTouchMove(float x);
        public void waveformTouchEnd();
        public void waveformFling(float x);
        public void waveformDraw();
    }; 
```

根据您的要求创建 Paint 对象。
创建一个初始化所有 Paint 对象的方法。

```
public WaveformView(Context context, AttributeSet attrs) {
        super(context, attrs);

        // We don't want keys, the markers get these
        setFocusable(false);

        mGridPaint = new Paint();
        mGridPaint.setAntiAlias(false);
        mGridPaint.setColor(
            getResources().getColor(R.drawable.grid_line));
        mSelectedLinePaint = new Paint();
        mSelectedLinePaint.setAntiAlias(false);
        mSelectedLinePaint.setColor(
            getResources().getColor(R.drawable.waveform_selected));
        mUnselectedLinePaint = new Paint();
        mUnselectedLinePaint.setAntiAlias(false);
        mUnselectedLinePaint.setColor(
            getResources().getColor(R.drawable.waveform_unselected));
        mUnselectedBkgndLinePaint = new Paint();
        mUnselectedBkgndLinePaint.setAntiAlias(false);
        mUnselectedBkgndLinePaint.setColor(
            getResources().getColor(
                R.drawable.waveform_unselected_bkgnd_overlay));
        mBorderLinePaint = new Paint();
        mBorderLinePaint.setAntiAlias(true);
        mBorderLinePaint.setStrokeWidth(1.5f);
        mBorderLinePaint.setPathEffect(
            new DashPathEffect(new float[] { 3.0f, 2.0f }, 0.0f));
        mBorderLinePaint.setColor(
            getResources().getColor(R.drawable.selection_border));
        mPlaybackLinePaint = new Paint();
        mPlaybackLinePaint.setAntiAlias(false);
        mPlaybackLinePaint.setColor(
            getResources().getColor(R.drawable.playback_indicator));
        mTimecodePaint = new Paint();
        mTimecodePaint.setTextSize(12);
        mTimecodePaint.setAntiAlias(true);
        mTimecodePaint.setColor(
            getResources().getColor(R.drawable.timecode));
        mTimecodePaint.setShadowLayer(
            2, 1, 1,
            getResources().getColor(R.drawable.timecode_shadow));

    mGestureDetector = new GestureDetector(
            context,
        new GestureDetector.SimpleOnGestureListener() {
            public boolean onFling(
                    MotionEvent e1, MotionEvent e2, float vx, float vy) {
            mListener.waveformFling(vx);
            return true;
            }
        });

        mSoundFile = null;
        mLenByZoomLevel = null;
        mValuesByZoomLevel = null;
        mHeightsAtThisZoomLevel = null;
        mOffset = 0;
        mPlaybackPos = -1;
        mSelectionStart = 0;
        mSelectionEnd = 0;
        mDensity = 1.0f;
        mInitialized = false;
    } 
```

您需要覆盖 onTouchEvent

```
@Override
    public boolean onTouchEvent(MotionEvent event) {
    if (mGestureDetector.onTouchEvent(event)) {
        return true;
    }

        switch(event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            mListener.waveformTouchStart(event.getX());
            break;
        case MotionEvent.ACTION_MOVE:
            mListener.waveformTouchMove(event.getX());
            break;
        case MotionEvent.ACTION_UP:
            mListener.waveformTouchEnd();
            break;
        }
        return true;
    }

public void setSoundFile(CheapSoundFile soundFile) {
    mSoundFile = soundFile;
    mSampleRate = mSoundFile.getSampleRate();
    mSamplesPerFrame = mSoundFile.getSamplesPerFrame();
    computeDoublesForAllZoomLevels();
    mHeightsAtThisZoomLevel = null;
} 
```

覆盖在屏幕上绘制波形的 draw 方法。

```
@Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        if (mSoundFile == null)
            return;

        if (mHeightsAtThisZoomLevel == null)
            computeIntsForThisZoomLevel();

        // Draw waveform
        int measuredWidth = getMeasuredWidth();
        int measuredHeight = getMeasuredHeight();
        int start = mOffset;
        int width = mHeightsAtThisZoomLevel.length - start;
        int ctr = measuredHeight / 2;

        if (width > measuredWidth)
            width = measuredWidth;

        // Draw grid
        double onePixelInSecs = pixelsToSeconds(1);
        boolean onlyEveryFiveSecs = (onePixelInSecs > 1.0 / 50.0);
        double fractionalSecs = mOffset * onePixelInSecs;
        int integerSecs = (int) fractionalSecs;
        int i = 0;
        while (i < width) {
            i++;
            fractionalSecs += onePixelInSecs;
            int integerSecsNew = (int) fractionalSecs;
            if (integerSecsNew != integerSecs) {
                integerSecs = integerSecsNew;
                if (!onlyEveryFiveSecs || 0 == (integerSecs % 5)) {
                    canvas.drawLine(i, 0, i, measuredHeight, mGridPaint);
                }
            }
        }

        // Draw waveform
        for (i = 0; i < width; i++) {
            Paint paint;
            if (i + start >= mSelectionStart &&
                i + start < mSelectionEnd) {
                paint = mSelectedLinePaint;
            } else {
                drawWaveformLine(canvas, i, 0, measuredHeight,
                                 mUnselectedBkgndLinePaint);
                paint = mUnselectedLinePaint;
            }
            drawWaveformLine(
                canvas, i,
                ctr - mHeightsAtThisZoomLevel[start + i],
                ctr + 1 + mHeightsAtThisZoomLevel[start + i],
                paint);

            if (i + start == mPlaybackPos) {
                canvas.drawLine(i, 0, i, measuredHeight, mPlaybackLinePaint);
            }
        }

        // If we can see the right edge of the waveform, draw the
        // non-waveform area to the right as unselected
        for (i = width; i < measuredWidth; i++) {
            drawWaveformLine(canvas, i, 0, measuredHeight,
                             mUnselectedBkgndLinePaint);            
        }

        // Draw borders
        canvas.drawLine(
            mSelectionStart - mOffset + 0.5f, 30,
            mSelectionStart - mOffset + 0.5f, measuredHeight,
            mBorderLinePaint);
        canvas.drawLine(
            mSelectionEnd - mOffset + 0.5f, 0,
            mSelectionEnd - mOffset + 0.5f, measuredHeight - 30,
            mBorderLinePaint);

        // Draw timecode
        double timecodeIntervalSecs = 1.0;
        if (timecodeIntervalSecs / onePixelInSecs < 50) {
            timecodeIntervalSecs = 5.0;
        }
        if (timecodeIntervalSecs / onePixelInSecs < 50) {
            timecodeIntervalSecs = 15.0;
        }

        // Draw grid
        fractionalSecs = mOffset * onePixelInSecs;
        int integerTimecode = (int) (fractionalSecs / timecodeIntervalSecs);
        i = 0;
        while (i < width) {
            i++;
            fractionalSecs += onePixelInSecs;
            integerSecs = (int) fractionalSecs;
            int integerTimecodeNew = (int) (fractionalSecs /
                                            timecodeIntervalSecs);
            if (integerTimecodeNew != integerTimecode) {
                integerTimecode = integerTimecodeNew;

                // Turn, e.g. 67 seconds into "1:07"
                String timecodeMinutes = "" + (integerSecs / 60);
                String timecodeSeconds = "" + (integerSecs % 60);
                if ((integerSecs % 60) < 10) {
                    timecodeSeconds = "0" + timecodeSeconds;
                }
                String timecodeStr = timecodeMinutes + ":" + timecodeSeconds;
                float offset = (float) (
                    0.5 * mTimecodePaint.measureText(timecodeStr));
                canvas.drawText(timecodeStr,
                                i - offset,
                                (int)(12 * mDensity),
                                mTimecodePaint);
            }
        }

        if (mListener != null) {
            mListener.waveformDraw();
        }
    } 
```

这是对您有用的完整的 Rindroid
[源代码 波形的源代码](http://ringdroid.googlecode.com/svn/trunk/)

# python - 您可以检索/设置 ttk.Treeview 小部件的边距值吗？

> ID：11858252
> 
> 赞同：1
> 
> 时间：2012-08-08T05:36:50.857
> 
> 标签：python, tkinter, ttk

```
import Tkinter, ttk
root = Tkinter.Tk()
tree_view = ttk.Treeview(root)
tree_view.pack()
test_id = tree_view.insert('', 0, text = "test")
root.mainloop() 
```

这将显示一个窗口：

![在此处输入图像描述](../Images/8dd140f9fcef2d55ed6515a0b16cfe39.png)

注意“测试”的左边距。
是否可以检索/设置此边距的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:12:59.763

“边距”似乎是为树项目显示“加号”和“减号”图标的地方。
隐藏它：

```
import Tkinter, ttk
root = Tkinter.Tk()
tree_view = ttk.Treeview(root, show='headings', columns=('1'))
tree_view.pack()
tree_view.insert('', 'end', values = ('test'))
root.mainloop() 
```

# variables - 如何将变量的值分配给javascript中的另一个方法？

> ID：11858263
> 
> 赞同：0
> 
> 时间：2012-08-08T05:38:49.600
> 
> 标签：variables

我的代码如下

```
 function myFunction(a,b,d)
        {
         var R  = a;
         var G =  b ;
         var B =  d ;
         var L = "(";
         var C = ",";
         var Rp = ")";
         var E = L ;
         var ic = '"';
         var prefix = "RGB";
         var color = ic+prefix + L + R+ C + G + C + B + Rp+ic;
         alert(color)
         var c=document.getElementById("myCanvas");
         var ctx=c.getContext("2d");
         ctx.fillStyle = color;
        } 
```

如果我调用上述函数，例如`myFunction(10,20,30);` `alert(color);`打印“rgb(10,20,30)”，但我不知道如何将颜色值分配给 ctx.fillStyle 因为我想制作动态应用程序，我需要传递不同的颜色值，现在代码不起作用，并`ctx.fillStyle = color;`在执行代码时打印出来。如果有人能告诉我如何将颜色的值分配给 ctx.fillStyle 方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T05:47:47.397

首先，“颜色”在这里是一个字符串变量，并将其用作代码段使用`eval();`函数。其次，在画布中设置一些可见区域，以查看代码是否真正工作，即 ctx.fillRect()。最后，确保您的文档类型声明为`<!DOCTYPE html>`我希望的。

这是代码的工作版本（在 FF 11.0 中适用于我）：

```
<!DOCTYPE html>
<html>
<head>
<script >
function myFunction(a,b,d)
            {
             var R  = a;
             var G =  b;
             var B =  d;
             var L = "(";
             var C = ",";
             var Rp = ")";
             var E = L ;
             var ic = '"';
             var prefix = "RGB";
             var color = ic+prefix + L + R+ C + G + C + B + Rp+ic;

    var c=document.getElementById("myCanvas");
    var ctx=c.getContext("2d");
    ctx.fillStyle=eval(color); //convert string to code.
    ctx.fillRect(0,0,150,75);//any size greater than 0
            }
</script>
<body>
<button  onclick="myFunction(200,0,0);">click me</button>
<canvas id="myCanvas" width="200" height="100" style="border:1px solid #c3c3c3;">
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T05:46:48.383

您可以根据需要引用所需颜色值的变量，只要提供的值是有效的颜色值。

根据您提供的代码，您似乎正在使用`RGB`而不是`rgb`.

# groovy - 如何将节点添加到 groovy MarkupBuilder？

> ID：11858266
> 
> 赞同：2
> 
> 时间：2012-08-08T05:39:02.153
> 
> 标签：groovy

我正在使用 MarkupBuilder 生成 xml，需要知道如何将 NodeChild 添加到 MarkupBuilder 对象

我的代码

```
def fxml=new File("E:\\Projects\\dom.xml")
def xmltext=new XmlSlurper(false,false).parseText(fxml.text)

    or

    def xml=new XmlSlurper(false,false).parse("E:\\Projects\\dom.xml")

def abc = new groovy.xml.MarkupBuilder()
abc.product(name:"Dota"){
  language("Java")
  language("Groovy")
  language("JavaScript")
  domainsinfa{delegate.current.appendNode( xmltext)}
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T08:23:54.027

您可以使用 StreamingMarkupBuilder 将任意节点插入 xml：

```
import groovy.xml.*

def xmltext = '''<node><name short="yes">tim</name><fun>maybe</fun></node>'''

def xml = new XmlSlurper( false, false ).parseText( xmltext )

def newxml = new StreamingMarkupBuilder().bind {
  product(name:"Dota") {
    language("Java")
    language("Groovy")
    language("JavaScript")
    mkp.yield xml 
  }
}

println XmlUtil.serialize( newxml ) 
```

# c# - 无法使滚动查看器水平滚动

> ID：11858270
> 
> 赞同：2
> 
> 时间：2012-08-08T05:39:11.573
> 
> 标签：c#, xaml, microsoft-metro, visual-studio-2012, stackpanel

我有一个 ScrollViewer，其中包含一个 StackedPanel，其中的矩形水平布局。我希望能够水平滚动，但这对我来说并没有发生。这是我的 XAML：

```
<common:LayoutAwarePage
    x:Name="pageRoot"
    x:Class="BlastSwing.GroupedItemsPage"
    DataContext="{Binding DefaultViewModel, RelativeSource={RelativeSource Self}}"
    IsTabStop="false"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:BlastSwing"
    xmlns:data="using:BlastSwing.Data"
    xmlns:common="using:BlastSwing.Common"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Page.Resources>

        <!--
            Collection of grouped items displayed by this page, bound to a subset
            of the complete item list because items in groups cannot be virtualized
        -->
        <CollectionViewSource
            x:Name="groupedItemsViewSource"
            Source="{Binding Groups}"
            IsSourceGrouped="true"
            ItemsPath="TopItems"
            d:Source="{Binding AllGroups, Source={d:DesignInstance Type=data:SampleDataSource, IsDesignTimeCreatable=True}}"/>
    </Page.Resources>

    <!--
        This grid acts as a root panel for the page that defines two rows:
        * Row 0 contains the back button and page title
        * Row 1 contains the rest of the page layout
    -->
    <Grid Style="{StaticResource LayoutRootStyle}">
        <Grid.RowDefinitions>
            <RowDefinition Height="140"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Back button and page title -->
        <TextBlock x:Name="pageTitle" Text="Blast Swing" Style="{StaticResource PageHeaderTextStyle}" Margin="40,0,-10,53"/>

        <ScrollViewer HorizontalAlignment="Left" Height="628" Grid.Row="1" VerticalAlignment="Top" Width="1366" RenderTransformOrigin="0.476999998092651,0.998000025749207" VerticalScrollMode="Disabled" Margin="-22,0,0,0" HorizontalScrollMode="Auto">
            <StackPanel Height="568" Width="1313" RenderTransformOrigin="-0.0179999992251396,0.512000024318695" Orientation="Horizontal">
                <Rectangle Fill="#FF974B55" Height="568" Stroke="Black" VerticalAlignment="Top" Width="371"/>
                <Rectangle Fill="#FF17179C" Height="568" Stroke="Black" VerticalAlignment="Top" Width="371"/>
                <Rectangle Fill="#FF8D2B80" Height="568" Stroke="Black" VerticalAlignment="Top" Width="371"/>
                <Rectangle Fill="#FF301D2F" Height="568" Stroke="Black" VerticalAlignment="Top" Width="371"/>
                <Rectangle Fill="#FFF4F4F5" Height="568" Stroke="Black" VerticalAlignment="Top" Width="371"/>
            </StackPanel>
        </ScrollViewer>

        <!-- Back button and page title -->

        <!-- Horizontal scrolling grid used in most view states -->

        <!-- Vertical scrolling list only used when snapped -->

        <VisualStateManager.VisualStateGroups>

            <!-- Visual states reflect the application's view state -->
            <VisualStateGroup x:Name="ApplicationViewStates">
                <VisualState x:Name="FullScreenLandscape"/>
                <VisualState x:Name="Filled"/>

                <!-- The entire page respects the narrower 100-pixel margin convention for portrait -->
                <VisualState x:Name="FullScreenPortrait"/>

                <!--
                    The back button and title have different styles when snapped, and the list representation is substituted
                    for the grid displayed in all other view states
                -->
                <VisualState x:Name="Snapped">
                    <Storyboard>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="pageTitle" Storyboard.TargetProperty="Style">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SnappedPageHeaderTextStyle}"/>
                        </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
    </Grid>
</common:LayoutAwarePage> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T05:53:06.687

将`HorizontalScrollBarVisibility`ScrollViewer 上的属性设置为`Visible`或`Auto`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T16:31:32.493

您正在手动设置 StackPanel 的宽度，它小于其子项的总数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T16:47:11.843

您正在设置 Scrollviewer 的 Width="1366"，它大于您的子堆栈面板 Width="1313"。

如果您想查看水平滚动条，那么您可能需要将 ScrollViewer 的大小设置为小于 1313，并且它应该能够显示水平滚动条，因为它无法完全显示内容。

# twitter-bootstrap - 如何使用 Bootstrap 在英雄单元中显示两列？

> ID：11858271
> 
> 赞同：4
> 
> 时间：2012-08-08T05:39:11.937
> 
> 标签：twitter-bootstrap, alignment, rows

我试图让引导程序的行在英雄单位内工作。我厌倦了这个例子[如何使用 Bootstrap 在英雄单元中显示缩略图？](https://stackoverflow.com/questions/9388597/how-to-display-a-thumbnail-in-the-hero-unit-with-bootstrap)但它似乎不起作用。我在英雄中只得到 1 列。我的猜测是填充导致列换行，因为在将填充设置为 0 时它似乎正确对齐，但我不确定如何正确解决这个问题。

```
<div class="hero-unit" style="padding: 15px;">
    <div class="page-header">
        <h2>
            Example Page Header
            <small>Example Sub Header</small>
        </h2>
    </div>

    <div class="row">
        <div class="span4">
            <img src="http://placehold.it/360x268" alt="">
        </div>

        <div class="span8">
            test
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-08T08:02:03.363

亚历克斯，

如果您使用的是 bootstrap-responsive.css 或流体模板，则应用以下标记。

```
 <div class="hero-unit">
    <div class="row-fluid">
        <div class="columnA pull-left">
             <h2>Column A</h2>
            <img src="http://placehold.it/500x300.png"/>
        </div>

        <div class="columnB pull-right">
             <h2>Column B</h2>
            <img src="http://placehold.it/500x300.png"/>
        </div>

    </div>
  </div> 
```

然后在头部插入以下样式。

```
 .columnA,
  .columnB{
    width: 500px;

  } 
```

上面的代码应该输出一个类似于下图的文档：

![在此处输入图像描述](../Images/3e4ab45628bb7053a846f80ba4807fe2.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-07T15:23:42.597

您可以使用加起来为 11（而不是 12）的跨度。不需要额外的 CSS：

```
<div class="hero-unit">
    <div class="row">
        <div class="span8"> column A </div>
        <div class="span3"> column B </div>
    </div>
</div> 
```

# android - android 常见的 OnItemClickListener 和单独的按钮监听器

> ID：11858273
> 
> 赞同：1
> 
> 时间：2012-08-08T05:39:25.817
> 
> 标签：android, include, onclick, onitemclicklistener

在我的应用程序中，我有大约 12 个活动。我的活动的第一个布局是列表视图。通过单击每个列表，它会被重定向到其他活动。我已经用 OnItemClickListener 实现了 Listview 并且运行良好。

在所有其他 11 个活动中，我有一个带有徽标的通用标题栏和一个名为 S 的按钮。当用户单击 S 按钮时，我在我的应用程序的第一个活动中显示相同的项目列表，在当前活动通过拆分页面。现在*不是为每个活动编写单独的，而是`OnItemClickListener`如何编写一次并在多个活动中使用*？

就像我已经放置`3 button in include layout`并且我在各种活动中使用它一样，*如何编写一个单独的通用按钮动作，它可以在多个活动中使用。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T06:09:22.323

虽然@SamirMangroliya 的方法有效，但这是您可以使用的另一种方法，也是我已经使用了一段时间的方法。

在另一个类文件中创建你的监听器（比如，`MyClickListener.java`）：

```
public class MyClickListener implements OnItemClickListener {
    // This can be OnClickListener, OnTouchListener, whatever you like.
    // Implement your method here:
    public onItemClick(...) {
        // Your selection process, etc.
    }
} 
```

然后在你的每个`Activity`对象中，你所要做的就是：

```
myObject.setOnItemClickListener(new MyClickListener()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T05:45:58.440

**如何编写一个单独的常用按钮动作，它可以在多个活动中使用。**

您应该创建一个 Activity（称为 BaseActivity），

```
class BaseActivity extends Activity{

@Override
public void setContentView(int layoutResID) {
     super.setContentView(layoutResID);

  Button btn1 = (Button)findViewById(r.id.btn1);
  .
  .
  .  

  //now setonclickListner here...
}

} 
```

然后扩展它...`class MyActivity extends BaseActivity`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T06:26:36.940

听起来您应该实现[ActionBar](http://developer.android.com/guide/topics/ui/actionbar.html)导航。有关如何以 Android 方式执行此操作的更详细说明，请参阅[设计](http://developer.android.com/design/patterns/actionbar.html)指南。要支持 1.6 和 2.3 之间的 Android 版本，请在[ActionBarSherlock](http://actionbarsherlock.com/)库中进行链接。

# objective-c - 为什么我的图像没有传递给我的 ViewController？

> ID：11858275
> 
> 赞同：0
> 
> 时间：2012-08-08T05:40:02.180
> 
> 标签：objective-c, uiimageview, uiimage, uiimagepickercontroller

我设置了我的应用程序，以便有多个图像选择器，每个图像选择器都有自己的图像数组。用户将按下他们希望查看的设置，选择一个图像，然后应用程序将弹回根控制器。我希望他们选择的图像作为子视图添加到我的主视图控制器中。

我在让主 ViewController 检测所选图像时遇到问题。

这是我正在尝试的方法：

在我的图像选择器中：

**编辑**我又遇到了问题。我添加了一个新的 viewController，因此用户将选择他们想要查看的图像数组，而不是直接查看图像数组。我改变了弹出到 viewController 的方式，因为我现在不回到 RootViewController。

```
- (IBAction)buttonClicked:(id)sender
{
    UIButton *button = (UIButton *)sender;
    _selectedImage = [_images objectAtIndex:button.tag];
    AppDelegate *delegate = [[UIApplication sharedApplication] delegate];
    delegate.viewController.stampedImage = _selectedImage;
    NSLog(@"delegate.viewController = %@", delegate.viewController);
    NSLog(@"delegate.viewController.stampedImage = %@", delegate.viewController.stampedImage);
    NSLog(@"_selectedImage = %@", _selectedImage);
    [delegate.navigationController popToViewController:[self.navigationController.viewControllers objectAtIndex:1] animated:YES];
} 
```

我在这里运行了一个 NSLog 并将 selectedImage 设置为图像。

这是我在我希望图像出现的主 ViewController 中所做的事情。我在 viewWillAppear 中运行此代码：

```
//stampedImage = _imagePicker.selectedImage;  --- Not sure if I need this line
_stampedImageView = [[UIImageView alloc] initWithImage:stampedImage];
NSLog(@"ViewController stampedImage = %@", stampedImage);
[_stampedImageView setFrame:CGRectMake(0, 0, 80.0, 80.0)];
[_stampedImageView setMultipleTouchEnabled:YES];
[_stampedImageView setUserInteractionEnabled:YES];
[imageView addSubview:_stampedImageView];
[_stampedImageView release]; 
```

我在这里运行了一个 NSLog，但 stampedImage 总是返回为空。 **stampedImage 总是返回为空**

我将 stampedImage 设置为属性并且正在合成。
我还在 .h 中为我的图像选择器类设置了一个 @class。

有任何想法吗？出于某种原因，我被这个难住了。

# mobile - 任何伪装成移动设备的本地浏览器？

> ID：11858281
> 
> 赞同：1
> 
> 时间：2012-08-08T05:40:36.550
> 
> 标签：mobile, browser

我目前正在开发一个移动网站，我发现通过模拟器使用浏览器非常笨拙。

有什么办法可以让浏览器（在 OSX 上运行）“假装”它是一个移动浏览器，这样我就可以从网站上获取移动 html 我猜想像在 chrome 中检查或在 firefox 上进行 firebug 之类的东西？

注意：我*真的*希望我能接受所有的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T05:43:17.720

我认为您可以更改浏览器的用户代理，然后，如果有移动版本可用，服务器将向您发送 - 这个！比如样式表等。

Firefox 有一个不错的插件，叫做[“用户代理切换器”](https://addons.mozilla.org/en-US/firefox/addon/user-agent-switcher/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T05:47:54.393

对于 Safari；

在普通的 Mac OS X Safari 中，转到首选项/高级并选中“在菜单栏中显示开发菜单”。一个名为“开发”的菜单将显示一个名为“用户代理”的子菜单。您可以选择为 iPhone 和 iPad 发送用户代理字符串。

开发菜单还有一个“Web 检查器”，虽然不如 FireBug 强大，但它非常适合检查结果。

# javascript - 如何在 LimeJS javascript 中为 html5 处理键盘事件

> ID：11858283
> 
> 赞同：1
> 
> 时间：2012-08-08T05:40:40.420
> 
> 标签：javascript, html, limejs

我是limeJS的初学者，我想知道如何在使用limejs for html5的游戏中处理键盘事件。如果有人有它的源链接，请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T03:22:05.583

由于 Lime 是基于 Closure 构建的，因此您可以只使用它的原生事件库。

例如：

```
goog.events.listen(rootLimeNodeObject, goog.events.EventType.KEYUP, function (ev) {
  if (ev.keyCode === 37) { // left arrow
    ...
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T06:01:26.427

指南看起来很晦涩，但我建议您使用单独的库，例如 Keyboard js。这是一个非常好的键盘事件库，它将是最简单的选择。

[http://robertwhurst.github.com/KeyboardJS/](http://robertwhurst.github.com/KeyboardJS/)

演示将是：

```
KeyboardJS.bind.key('a', onDownCallback(), onUpCallback() ); 
```

这对于多个键：

```
KeyboardJS.bind.key('a + b ', onDownCallback(), onUpCallback() ); 
```

# windows - Powershell 脚本仅在某些场景下运行

> ID：11858285
> 
> 赞同：0
> 
> 时间：2012-08-08T05:41:33.640
> 
> 标签：windows, powershell, scripting, powershell-2.0

我有一个只适用于某些场景的功能。

*   它适用于 Powershell ISE，但是当我将相同的内容保存在 .Ps1 文件中并运行它时，它不起作用。
*   我有这个功能作为一个大脚本的一部分。当我在 Windows 7 上运行它但不能在 Windows Server 2008 R2 上运行时，它可以工作并打开窗口。

为什么？

带有函数及其调用的脚本是：

```
Function Get-SaveFileTxt($initialDirectory) 
{ 
[System.Reflection.Assembly]::LoadWithPartialName("System.windows.forms") | 
Out-Null 

$SaveFileDialog = New-Object System.Windows.Forms.SaveFileDialog 
$SaveFileDialog.initialDirectory = $initialDirectory 
$SaveFileDialog.AddExtension = $true 
$SaveFileDialog.DefaultExt = "txt" 
$SaveFileDialog.filter = "Text Files (*.txt)| *.txt" 
$SaveFileDialog.ShowDialog() | Out-Null 
$SaveFileDialog.filename 
} 

Get-SaveFileTxt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:16:01.780

不确定这里是否是这种情况，但我记得打开的对话框没有获得焦点并出现在其他打开的窗口后面的错误。你确定吗？

更新：

将 ShowHelp 属性设置为 $true。

```
$SaveFileDialog.ShowHelp = $true 
```

它可以在 ISE 中工作，因为 ISE 的公寓状态默认为 STA，而您的 powershell 模式为 MTA，您可以通过以下方式进行检查：

```
[System.Threading.Thread]::CurrentThread.ApartmentState 
```

如果您在 STA 模式下打开 powershell，您的代码将起作用：

```
powershell.exe -STA 
```

# java - 如何使用自定义 JTable 单元格编辑器和单元格渲染器

> ID：11858286
> 
> 赞同：10
> 
> 时间：2012-08-08T05:41:51.143
> 
> 标签：java, swing, jtable, tablecellrenderer, tablecelleditor

我创建了一个带有自定义表格渲染和自定义单元格编辑器的 JTable，它在图像中给出了结果

![在此处输入图像描述](../Images/68b1d0197288d589aafd141326abe19d.png)

我使用扩展 JPanel 的单独类创建了第一个表格单元格中显示的面板。并将表值添加为，

```
 tbl.setCellEditor(new customCell());
        tbl.getColumnModel().getColumn(0).setCellRenderer(new customCell());

        DefaultTableModel dtm = (DefaultTableModel) tbl.getModel();

        Vector v = new Vector();
        v.add(new Panel());
        v.add("Test");
        dtm.addRow(v);

        v.clear();
        v.add(new Panel());
        v.add("Test 2");
        dtm.addRow(v); 
```

这是我创建此表的表自定义类，

```
class customCell extends DefaultTableModel implements TableCellRenderer, TableCellEditor {

        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            Panel p = new Panel();            
            table.setRowHeight(row, p.getHeight());
            return p;
        }

        public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {

            return new Panel();
        }

        public Object getCellEditorValue() {
            return "";
        }

        public boolean isCellEditable(EventObject anEvent) {
            throw new UnsupportedOperationException("Not supported yet.");
        }

        public boolean shouldSelectCell(EventObject anEvent) {
            return true;
        }

        @Override
        public boolean isCellEditable(int rowIndex, int columnIndex) {
            return true;
        }

        public boolean stopCellEditing() {
            return true;
        }

        public void cancelCellEditing() {
            throw new UnsupportedOperationException("Not supported yet.");
        }

        public void addCellEditorListener(CellEditorListener l) {
            throw new UnsupportedOperationException("Not supported yet.");
        }

        public void removeCellEditorListener(CellEditorListener l) {
            throw new UnsupportedOperationException("Not supported yet.");
        }
    } 
```

我的问题是我认为面板按预期显示我无法在文本字段中输入或更改复选框或单击按钮。请告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-08T06:06:50.173

我强烈建议重用默认表格渲染器和编辑器中提供的功能，因为您的代码有很多问题

1.  请拆分您的编辑器、渲染器和表格模型。让他们都在同一个班级只是很奇怪
2.  对于您的渲染器，不要`Component`每次都创建 a 的新实例。相反，重用相同的组件并`Component`在`getTableCellRendererComponent`方法中修改它
3.  编辑器也是如此`Component`
4.  扩展默认编辑器，而不是使用`UnsupportedOperationException`s 或仅返回空`String`s来实现方法

[为了支持我的第四点，教程中](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editor)[编辑部分`JTable`](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editor)的一点引用：

> 如果您想指定文本字段、复选框或组合框以外的编辑器怎么办？由于 DefaultCellEditor 不支持其他类型的组件，您必须多做一些工作。您需要创建一个实现 TableCellEditor 接口的类。AbstractCellEditor 类是一个很好的超类。它实现了 TableCellEditor 的超级接口 CellEditor，省去了实现单元格编辑器所需的事件触发代码的麻烦。
> 
> 你的单元格编辑器类至少需要定义两个方法——getCellEditorValue 和getTableCellEditorComponent。CellEditor 所需的 getCellEditorValue 方法返回单元格的当前值。TableCellEditor 所需的 getTableCellEditorComponent 方法应该配置并返回您要用作编辑器的组件。

正如那里清楚解释的那样，您必须实现事件触发代码：

> 省去实现单元格编辑器所需的事件触发代码的麻烦。

你显然忽略了。因此我建议从头开始`AbstractCellEditor`而不是从头开始实现接口

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-08T06:57:27.560

必须为已经可见的添加适当`LayoutManager`的`Editable/non_Editable`属性`JPanel`

让享受

```
import java.awt.*;
import java.awt.event.*;
import java.util.EventObject;
import javax.swing.*;
import javax.swing.table.*;

public class PanelInTable {

    private JFrame frame;
    private JTable compTable = null;
    private PanelTableModel compModel = null;
    private JButton addButton = null;

    public static void main(String args[]) {
        try {
            UIManager.setLookAndFeel("com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel");
            //UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (Exception fail) {
        }
        SwingUtilities.invokeLater(() -> {
            new PanelInTable().makeUI();
        });
    }

    public void makeUI() {
        compTable = CreateCompTable();
        JScrollPane CompTableScrollpane = new JScrollPane(compTable, 
                JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED,
                JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
        JPanel bottomPanel = CreateBottomPanel();
        frame = new JFrame("Comp Table Test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(CompTableScrollpane, BorderLayout.CENTER);
        frame.add(bottomPanel, BorderLayout.SOUTH);
        frame.setPreferredSize(new Dimension(800, 400));
        frame.setLocation(150, 150);
        frame.pack();
        frame.setVisible(true);
    }

    public JTable CreateCompTable() {
        compModel = new PanelTableModel();
        compModel.addRow();
        JTable table = new JTable(compModel);
        table.setRowHeight(new CompCellPanel().getPreferredSize().height);
        table.setTableHeader(null);
        PanelCellEditorRenderer PanelCellEditorRenderer = new PanelCellEditorRenderer();
        table.setDefaultRenderer(Object.class, PanelCellEditorRenderer);
        table.setDefaultEditor(Object.class, PanelCellEditorRenderer);
        return table;
    }

    public JPanel CreateBottomPanel() {
        addButton = new JButton("Add Comp");
        addButton.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent ae) {
                Object source = ae.getSource();
                if (source == addButton) {
                    compModel.addRow();
                }
            }
        });
        JPanel panel = new JPanel(new GridBagLayout());
        panel.add(addButton);
        return panel;
    }
}

class PanelCellEditorRenderer extends AbstractCellEditor implements 
        TableCellRenderer, TableCellEditor {

    private static final long serialVersionUID = 1L;
    private CompCellPanel renderer = new CompCellPanel();
    private CompCellPanel editor = new CompCellPanel();

    @Override
    public Component getTableCellRendererComponent(JTable table, Object value, 
            boolean isSelected, boolean hasFocus, int row, int column) {
        renderer.setComp((Comp) value);
        return renderer;
    }

    @Override
    public Component getTableCellEditorComponent(JTable table, Object value, 
            boolean isSelected, int row, int column) {
        editor.setComp((Comp) value);
        return editor;
    }

    @Override
    public Object getCellEditorValue() {
        return editor.getComp();
    }

    @Override
    public boolean isCellEditable(EventObject anEvent) {
        return true;
    }

    @Override
    public boolean shouldSelectCell(EventObject anEvent) {
        return false;
    }
}

class PanelTableModel extends DefaultTableModel {

    private static final long serialVersionUID = 1L;

    @Override
    public int getColumnCount() {
        return 1;
    }

    public void addRow() {
        super.addRow(new Object[]{new Comp(0, 0, "", "")});
    }
}

class Comp {

    public int type;
    public int relation;
    public String lower;
    public String upper;

    public Comp(int type, int relation, String lower, String upper) {
        this.type = type;
        this.relation = relation;
        this.lower = lower;
        this.upper = upper;
    }
}

class CompCellPanel extends JPanel {

    private static final long serialVersionUID = 1L;
    private JLabel labelWith = new JLabel("With ");
    private JComboBox typeCombo = new JComboBox(new Object[]
    {"height", "length", "volume"});
    private JComboBox relationCombo = new JComboBox(new Object[]
    {"above", "below", "between"});
    private JTextField lowerField = new JTextField();
    private JLabel labelAnd = new JLabel(" and ");
    private JTextField upperField = new JTextField();
    private JButton removeButton = new JButton("remove");

   public CompCellPanel() {
        setLayout(new BoxLayout(this, BoxLayout.X_AXIS));
        relationCombo.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                enableUpper(relationCombo.getSelectedIndex() == 2);
            }
        });
        enableUpper(false);
        removeButton.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                JTable table = (JTable) SwingUtilities.getAncestorOfClass(
                        JTable.class, (Component) e.getSource());
                int row = table.getEditingRow();
                table.getCellEditor().stopCellEditing();
                ((DefaultTableModel) table.getModel()).removeRow(row);
            }
        });
        add(labelWith);
        add(typeCombo);
        add(relationCombo);
        add(lowerField);
        add(labelAnd);
        add(upperField);
        add(Box.createHorizontalStrut(100));
        add(removeButton);
    }

    private void enableUpper(boolean enable) {
        labelAnd.setEnabled(enable);
        upperField.setEnabled(enable);
    }

    public void setComp(Comp Comp) {
        typeCombo.setSelectedIndex(Comp.type);
        relationCombo.setSelectedIndex(Comp.relation);
        lowerField.setText(Comp.lower);
        upperField.setText(Comp.upper);
        enableUpper(Comp.relation == 2);
    }

    public Comp getComp() {
        return new Comp(typeCombo.getSelectedIndex(), 
                relationCombo.getSelectedIndex(), 
                lowerField.getText(), upperField.getText());
    }
} 
```

# asp.net - 数据源绑定到带有实体对象的下拉列表

> ID：11858288
> 
> 赞同：0
> 
> 时间：2012-08-08T05:42:02.740
> 
> 标签：asp.net, entity-framework, c#-4.0, drop-down-menu

我在我的项目中使用实体数据模型，并在几个页面中使用下拉列表。我将数据源分配给所有下拉列表并使用实体对象。到目前为止一切都很好，每个 Dropdownlist 都从实体对象中获取价值。

但问题是，即使我从下拉列表中选择了“选择任何索引值”，它也只是选择了第一个索引值。

这是代码片段：

```
 PAYROLLEntities pe = new PAYROLLEntities();
    drplist_fromDept.DataTextField = "DEPARTMENT_NAME";
    drplist_fromDept.DataValueField = "DEPARTMENT_ID";
    drplist_fromDept.DataSource = pe.HR_DEPARTMENT;
    drplist_fromDept.DataBind(); 
```

这是按钮“FindEmployee”的代码：

```
 GDView_Emplist.DataSource = trans.GetEmployee(drplist_fromDept.SelectedItem.Text,txt_empName.Text);
     GDView_Emplist.DataBind(); 
```

编译后，即使我选择最后一个索引的“部门”并单击`find`按钮，`dropdownlist.selectedItem.text`也只会返回第一个索引值。

# ios - 我在 iOS 4.3 下看不到我的组件

> ID：11858293
> 
> 赞同：0
> 
> 时间：2012-08-08T05:42:29.407
> 
> 标签：ios

我的应用程序在 4.3 之后的 iOS 版本中运行良好，但我在 iOS 4.3 中看不到我的组件。这是我的代码。我的 xib 中有两个 imageview 和一个标签。当我在 iOS 5 模拟器上尝试时，我可以看到我的标签。当我在 iOS 4.2 上尝试时，我看不到我的标签。

```
 [imgLabelStatus setImage:lblSmallImg];
 [imgLabelCity   setImage:lblSmallImg]; 
```

# php - 如何在 symfony2 中将对象转换为 JSON

> ID：11858295
> 
> 赞同：8
> 
> 时间：2012-08-08T05:42:38.527
> 
> 标签：php, doctrine-orm, symfony-2.1

我正在使用这个：

```
 $users = $em->getRepository('UserBundle:User')->getallUsers($search);
    $response = new Response(json_encode($users));
    $response->headers->set('Content-Type', 'application/json');
    return $response; 
```

用户是多个实体而不是单个结果。

但我得到了这个：

```
[{},{},{},{},{},{}] 
```

我想要类似的东西：

```
[ { label: $user.getName(), value: $user.getId() }, ... ] 
```

我怎样才能做到这一点？

**编辑：**我也试过`json_encode($users->toArray())`然后我得到这个错误：

> 调用`toArray()`非对象的成员函数

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T06:34:49.660

您需要有一种方法来序列化您的对象，您不能期望`json_encode`神奇地猜测允许对哪些字段进行编码。

我为此任务推荐的一个好包是[JMSSerializerBundle](http://jmsyst.com/bundles/JMSSerializerBundle)。确保在使用之前仔细阅读文档！

最终结果可能如下所示：

> ```
> $users = $em->getRepository('UserBundle:User')->getallUsers($search);
> $response = new Response($container->get('serializer')->serialize($users, 'json')); 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T11:57:21.467

尝试`{{ your_variable|raw }}`

抱歉我迟到了

# workflow-foundation - 多个用户访问的工作流实例

> ID：11858296
> 
> 赞同：0
> 
> 时间：2012-08-08T05:42:41.653
> 
> 标签：workflow-foundation

我现在正在使用 asp.net 处理工作流，因为我有一个疑问，工作流正在将其实例运行给一个用户，当他提交一个表单时，提交的数据将发送到工作流变量，此时多个人可以调用工作流为他们创建多个实例 ID 的时间以及在他们处理一个工作流时如何处理该实例？1）工作流是否会为不同的用户生成不同的实例ID？2）如何在工作流中将数据存储在变量中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:50:04.960

1.  您可以按照您想要的方式进行配置。这并不完全取决于您的业务场景（工作流程中的逻辑）。

2.  如果您想要长时间运行的工作流程，您可以在工作流程中包含变量，您需要配置持久性存储以将它们保存到某个存储（例如：SQL server DB）

# javascript - 如何在 webworkers 中访问 websockets？

> ID：11858298
> 
> 赞同：3
> 
> 时间：2012-08-08T05:42:57.003
> 
> 标签：javascript, html, websocket, web-worker, fileapi

我需要从 webworkers 发送 websocket 调用，我怎样才能得到它。我不认为用户代理有任何支持。如果支持可用，请给我一个例子来做到这一点。

样品我正在尝试的东西。

```
var ws = new WebSocket(url);
var worker=new Worker(worker.js);

ws.onmessage=function(e){
worker.postMessage({ws:ws,data:e.data});
} 
```

worker.js

```
onmessage=function(e){
  var ws=e.data.ws;
  var data=e.data.data;
  var request=someProcess(data);

  ws.send(request);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T05:47:21.897

在 worker`ws`中是一个~~字符串~~反序列化的 JSON 对象，而不是 WebSocket 对象。您不能将带有方法的对象传递给工作人员，这意味着工作人员需要回复主线程并且主线程执行`ws.send(worker_response)`.

我怀疑您收到的错误是 DATA_CLONE_ERR 异常或类似情况，因为 WebSocket 对象不能通过[结构化克隆算法](https://developer.mozilla.org/en-US/docs/DOM/The_structured_clone_algorithm)进行 JSON 序列化。

# php - 如何在关联数组php中具有最小值索引

> ID：11858303
> 
> 赞同：0
> 
> 时间：2012-08-08T05:43:14.573
> 
> 标签：php, arrays

我有一个像这样的数组：

```
Array([0]=>array('field1'=>aNumber,'field2'=>'something'),
[1]=>array('field1'=>aNumber,'field2'=>'something'),
[2]=>array('field1'=>aNumber,'field2'=>'something'),
[3]=>array('field1'=>aNumber,'field2'=>'something')); 
```

我必须获取具有最小字段的数组索引`aNumber`..

例如：

```
Array([0]=>array('field1'=>10,'field2'=>'something'),
[1]=>array('field1'=>3,'field2'=>'something'),
[2]=>array('field1'=>100,'field2'=>'something'),
[3]=>array('field1'=>9,'field2'=>'something')); 
```

我想要的索引是`1`。

我知道可以使用循环和一些如果存储迭代索引.. 但我想知道是否有一些 php 函数可以缩短算法
我该怎么办？谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T05:49:55.033

据我所知，没有这样的内置功能。但是您可以使用带有回调的其他函数 .. [array_walk](http://php.net/array_walk)，[array_filter](http://php.net/array_filter)

（并且内置函数可能会像您对循环所做的一样，并遍历数组中的项目）

# android - AsyncTask 中是否存在并发错误？

> ID：11858307
> 
> 赞同：2
> 
> 时间：2012-08-08T05:43:37.287
> 
> 标签：android, concurrency, android-asynctask, onpause

我遇到了我的活动被暂停的情况，并且我从`onPause()`方法中取消了我的`AsyncTask`. 但是，我的日志按时间顺序显示以下事件：

1.  `OnPause`叫
2.  `AsyncTask`从 取消`OnPause`。 `cancel(false)`返回`true`指示任务已成功取消。
3.  `onPostExecute`被调用，尽管[合同如果取消它永远不会被调用](http://developer.android.com/reference/android/os/AsyncTask.html#cancel%28boolean%29)。

有人见过这个吗？LogCat 消息是否保证以准确的顺序呈现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T06:05:33.073

据我所知，`LogCat`消息的顺序是正确的。

问题可能是，您`AsyncTask`无法取消。调用不是取消它的保证方式`Cancel()`。`AsyncTask`您可以使用该参数`boolean mayInterruptIfRunning`为 true。但是，即使将其设置为 true，它也从未对我有用。

如果 AsyncTask 被取消，您可以检查`onCancelled()`方法。如果控件到达此方法，则意味着它已被取消。
看看[这个](https://stackoverflow.com/questions/2735102/ideal-way-to-cancel-an-executing-asynctask)和[这个](https://stackoverflow.com/questions/4748964/android-cancel-asynctask-forcefully)问题的答案。

# asp.net - 水晶报表加载问题

> ID：11858311
> 
> 赞同：0
> 
> 时间：2012-08-08T05:44:06.217
> 
> 标签：asp.net, vb.net, crystal-reports

我已经在实时服务器上部署了水晶报表。该报告在我的本地机器上正常工作。

当我通过实时服务器上传时，它要求我提供服务器登录详细信息，因此我按照以下方式编写代码

```
 Dim I As Integer
        Dim LogonInfo As String()
        Dim Server As String = "", Database As String = "", User As String = "", Pwd As String = ""
        LogonInfo = ConfigurationManager.ConnectionStrings("ConnectionString").ConnectionString.Split(";")
        For i = 0 To LogonInfo.Length - 1
            Dim strTemp As String() = LogonInfo(i).Split("=")
            Select Case strTemp(0).ToLower()
                Case "server"
                    Server = strTemp(1)
                    Exit Select
                Case "database"
                    Database = strTemp(1)
                    Exit Select
                Case "user id"
                    User = strTemp(1)
                    Exit Select
                Case "password"
                    Pwd = strTemp(1)
                    Exit Select
            End Select
        Next
        CRViewer.ReportSource = rptName

        Dim myConnectionInfo As ConnectionInfo = New ConnectionInfo()
        myConnectionInfo.DatabaseName = Database
        myConnectionInfo.UserID = User
        myConnectionInfo.Password = Pwd
        myConnectionInfo.IntegratedSecurity = True
        Dim myTableLogOnInfos As TableLogOnInfos = CRViewer.LogOnInfo()
        For Each myTableLogOnInfo As TableLogOnInfo In myTableLogOnInfos
            myTableLogOnInfo.ConnectionInfo = myConnectionInfo
        Next 
```

它仍然要求 credential 。这可能是什么解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:38:55.993

可能这会帮助你。

```
protected void Default()
{
    string _strConn = ConfigurationManager.ConnectionStrings["ConnectionString"].ToString();

    SqlConnectionStringBuilder _sqlcon = new SqlConnectionStringBuilder(_strConn);
    myLogOnInfo.ConnectionInfo.ServerName = _sqlcon.DataSource;
    myLogOnInfo.ConnectionInfo.DatabaseName = _sqlcon.InitialCatalog;
    myLogOnInfo.ConnectionInfo.UserID = _sqlcon.UserID;
    myLogOnInfo.ConnectionInfo.Password = _sqlcon.Password;
    rptClients.LogOnInfo = new TableLogOnInfos();
    rptClients.LogOnInfo.Add(myLogOnInfo);
} 
```

这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T23:04:53.673

我有一些在 VB.Net 中编写的 CR 扩展方法，可能会对您有所帮助。我通常不使用查看器，但只要您可以访问 ReportDocument，就可以解决问题：

使用它们的扩展和示例（通常我使用 ADO 连接这些）：

[http://www.blakepell.com/Main/BlogEntry.aspx?EntryID=e2fcdcf9-312e-4911-8572-20178c94660b](http://www.blakepell.com/Main/BlogEntry.aspx?EntryID=e2fcdcf9-312e-4911-8572-20178c94660b)

# jquery - 列表到达末尾时如何取消动画

> ID：11858312
> 
> 赞同：1
> 
> 时间：2012-08-08T05:44:09.867
> 
> 标签：jquery, jquery-scrollable, jquery-animate

我正在使用 jquery animate 函数滚动列表项 html代码如下

```
<ul>
    <div class="scrollable" id="web_list">
        <div class="updown">
            <a class="up" onclick="scrollUp('web_list')">UP</a>
        </div>
        <div class="items">
            <li>item 1<li>
            <li>item 2</li>
            <li>item 3</li>
            <li>item 4</li>
            <li>item 5</li>
        <div class="updown">
            <a class="down" onclick="scrollDown('web_list')">DOWN</a>
        </div>
</ul> 
```

在 JS 中

```
function scrollDown(scrollDiv){
    $('#'+''+scrollDiv+' .items li').animate({top:'-=43'});
}

function scrollUp(scrollDiv){
    $('#'+''+scrollDiv+' .items li').animate({top:'+=43'});
} 
```

在 CSS 中

```
.scrollable .items li {
  position:relative;
  overflow: hidden;
 } 
```

现在，我可以滚动列表，但问题是我无法停止滚动，它无限滚动，

我希望当最后一项显示在底部时停止滚动（上/下），以便用户可以理解这是最后一项。谁能帮我做这件事。还有一件事是实现列表滚动的好主意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:17:13.353

这个怎么样？

```
 if( $("div.items:first").offset().top + $("div.items:first").height() <= 
     $("div.items:first li.items:last").offset().top + 
     $("div.items:first li.items:last").height()     
    ){
            //stop scrolling
            $("a.down").hide()
    } 
```

# php - 在 zen 购物车中显示下拉菜单

> ID：11858318
> 
> 赞同：0
> 
> 时间：2012-08-08T05:44:44.173
> 
> 标签：php, menu, zen-cart, emmet, zen

我需要你在禅车上的帮助。

我的项目中有这样的菜单

![在我的项目中](../Images/0bed4403959c7268a6aad7724e139075.png)

我在产品中添加了下拉选项菜单，它显示了一些产品，例如

```
New Arrival
product a
product b 
```

和下面一样

![在此处输入图像描述](../Images/451eba9cda4d4e2b25668cdcc1f4793b.png)

我是禅车的新手，我正在尝试自己并在谷歌上搜索，但我没有得到任何适当的帮助

那么应该怎么做呢？怎么可能有任何想法或建议？任何插件或任何帮助可用？有自定义代码吗？？

提前谢谢请帮帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:48:35.080

您可以使用内置插件来创建菜单。

请检查：[http ://www.zen-cart.com/downloads.php?do=file&id=323](http://www.zen-cart.com/downloads.php?do=file&id=323)

谢谢.......p2c

# nginx - Nginx 重定向 - 如何禁用特定 URL 的重定向？

> ID：11858321
> 
> 赞同：0
> 
> 时间：2012-08-08T05:44:49.750
> 
> 标签：nginx, load-balancing

我们在 3 个节点上设置了 nGinx 重定向，node1、node2、node3。现在一切正常。我们有一个小要求。我们只需要从一台服务器加载一个特定的 URL。是否可以通过调整此配置。

## 我将在此处粘贴我们当前的 node1 配置。

```
 upstream project.in {
    server node2:8080 weight=10 max_fails=3 fail_timeout=30s;
    server node3:8080 weight=10 max_fails=3 fail_timeout=30s;
  }

  server {
    listen 80;
    server_name www.example.in;
    location / {
      proxy_pass http://example.in;
    }
  } 
```

* * *

根据上面的配置，到达node1的流量将在node2和node3之间共享。我们的要求是，如果有人访问[http://example.in/test/administrator/](http://example.in/test/administrator/)，它应该只访问 node1。换句话说，我们需要为这个特定的 URL 禁用负载平衡。这可以通过调整配置文件来实现吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T11:04:43.870

您应该使用覆盖的 proxy_pass 添加另一个位置部分

```
地点 / {
    proxy_pass http://project.in; # 用于负载平衡的上游名称
}

location /test/administration/ { # 排除的位置
    proxy_pass http://node1:8080; # 转到另一个后端
}

```

# java - 返回java中的计数值

> ID：11858322
> 
> 赞同：-1
> 
> 时间：2012-08-08T05:44:54.817
> 
> 标签：java, date, jdbc, timestamp

嗨，我已经开发了示例。这是我的代码：

```
public class GetMonthFromDate {
  public int data() {
    int count=0;
    java.sql.Timestamp timeStamp = new Timestamp(System.currentTimeMillis());
    java.sql.Date date = new java.sql.Date(timeStamp.getTime()); 

    //count++;

    try {
      Class.forName("com.mysql.jdbc.Driver");
      Connection con =
        DriverManager.getConnection("jdbc:mysql://localhost:3306/xcart-432pro",
                                    "root", "");

      PreparedStatement statement =
        con.prepareStatement("select * from xcart_order_status_history where date_time='date'");
      ResultSet result = statement.executeQuery();
      while (result.next()) {
        // Do something with the row returned.
        count++; //if the first col is a count.
      }
    } catch(Exception exc) {
      System.out.println(exc.getMessage());
    }

    return count;
  }
} 
```

上面的代码对我不起作用。

在这里我使用了这个代码

```
java.sql.Timestamp timeStamp = new Timestamp(System.currentTimeMillis());
java.sql.Date date = new java.sql.Date(timeStamp.getTime()); 
```

意味着只给出输出`2012-08-08`。所以只有我必须在我的代码中调用日期。但这对我不起作用。显示的返回计数值为`0`. o 是错误的。`2`只有正确。因为匹配的查询在我的数据库中有 2 个值。

```
select * from xcart_order_status_history where date_time='date' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:03:02.943

您尚未将日期值设置为准备好的语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:05:23.077

尝试：

```
PreparedStatement statement = con.prepareStatement("select * from xcart_order_status_history where date_time=?");
statement.setDate(1, date); 
```

如果您只需要计数，您也不应该选择 *。您应该使用 select count(*)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T07:06:11.523

您对 PreparedStatement 的使用是完全错误的。

您不传递变量名，而是传递占位符，然后显式传递它们的值：

```
PreparedStatement statement =
    con.prepareStatement("select * from xcart_order_status_history where date_time=?");
statement.setDate(1, date);
ResultSet result = statement.executeQuery(); 
```

而且您*永远不会*`?`在语句中加上引号。对数据类型的调整将由 JDBC 驱动程序处理。

您可能需要重新阅读 JDBC 教程。您似乎错过了一些基本概念：[http ://docs.oracle.com/javase/tutorial/jdbc/index.html](http://docs.oracle.com/javase/tutorial/jdbc/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T07:06:58.927

```
public class GetMonthFromDate {
    public int data() {
        ...
        java.sql.Timestamp timeStamp = new Timestamp(System.currentTimeMillis());
        ...
        PreparedStatement statement = con.prepareStatement("select * from xcart_order_status_history where date_time=?");
        statement.setTimestamp(1,timeStamp);
        ...

        return count;
    }
} 
```

# javascript - jquery .width(value) 是否调整容器内的图像大小？

> ID：11858323
> 
> 赞同：0
> 
> 时间：2012-08-08T05:45:00.640
> 
> 标签：javascript, jquery

问题很简单，希望答案也一样：

我有一个根据视口尺寸动态调整大小的 div（称为 div A）。div 包含几个图像（大约 3000px * 3000px），我将它们加载到两个 div（称为 div B 和 div C）中，在 Div A 中彼此下方。 Div B 和 Div C 设置为 200px x 200px 和图像设置为 Div B 和 Div C 的 100%。

我想知道以下代码是否也会调整儿童 div B 和 div C 中的图像大小。

```
$('#divA').width(foo) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T06:04:38.613

仅当您修改直接父级的高度和宽度时，图像的大小才会改变。如果 DivB 和 DivC 也是 DivA 的 50% 和 100% 的高度，那么 $('DivA').width(foo) 将改变图像尺寸。

# python - Python urllib2 库是否使用 Windows 上的 IE 代理设置默认值？

> ID：11858329
> 
> 赞同：0
> 
> 时间：2012-08-08T05:45:32.967
> 
> 标签：python, proxy, urllib2

我注意到 urllib2 库使用了我的 IE 代理设置。对此有何官方解释？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T05:57:11.053

请参阅关于 的[`urllib2`部分`ProxyHandler`](http://docs.python.org/library/urllib2.html#urllib2.ProxyHandler)。

> 默认是从环境变量中读取代理列表`<protocol>_proxy`。如果没有设置代理环境变量，在 Windows 环境中，代理设置从注册表的 Internet 设置部分获取，而在 Mac OS X 环境中，代理信息从 OS X 系统配置框架中检索。

# c# - 隐式转换产生不正确的结果

> ID：11858335
> 
> 赞同：0
> 
> 时间：2012-08-08T05:46:00.840
> 
> 标签：c#

你会认为这是一个错误，还是预期的行为？

考虑以下

```
 1 * (2/(1+2))

  equals 0

  1 * ((double)2/(1+2))

  equals 0.6667 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T05:50:00.260

这不是错误。所有操作数都为结果`int`的算术运算。 这也[记录在 MSDN 中](http://msdn.microsoft.com/en-us/library/3b1ff23f%28v=vs.100%29.aspx)：`int`

> 当你将两个整数相除时，结果总是一个整数。例如，7 / 3 的结果是 2。要确定 7 / 3 的余数，请使用余数运算符 (%)。要获得作为有理数或分数的商，请给出被除数或除数类型 float 或类型 double。您可以通过将数字放在小数点右侧将被除数或除数表示为小数来隐式执行此操作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T05:51:47.927

没关系，因为您在表达式中使用了整数。您可以使用双操作数而不是强制转换：

```
1d * (2d/(1d+2d)) 
```

这是链接： http: [//msdn.microsoft.com/en-us/library/678hzkk9 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/678hzkk9(v=vs.71).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T05:51:56.460

如果你想得到这种格式的结果，你应该使用双/浮点数：

```
1 * (2.0/(1+2)) 
```

或者

```
1 * (2f/(1+2)) 
```

或者

```
1 * (2d/(1+2)) 
```

# mercurial - Mercurial 在克隆后显示未跟踪的文件

> ID：11858336
> 
> 赞同：0
> 
> 时间：2012-08-08T05:46:02.230
> 
> 标签：mercurial, tortoisehg

我已经从我们的中央存储库中提取了更改，并从命令行注意到我有未跟踪的文件，尝试添加它们什么都不做，如果它被跟踪，对它们的任何操作都会执行，但 hg 状态总是显示它们是未跟踪的。TortioseHg 显示它们没有被跟踪，它只发生在命令行上。

我从一个干净的克隆重新开始，但在执行 hg 状态时仍然显示文件未跟踪？

我该如何摆脱这个？

# jquery - jquery .next(); 定位接下来的第二个或第三个元素

> ID：11858338
> 
> 赞同：6
> 
> 时间：2012-08-08T05:46:12.070
> 
> 标签：jquery

我们知道 JQuery 函数`.next()`将帮助我们找出下一个元素，但我想知道，我们如何要求 JQuery .next() 帮助我们找出下一个元素甚至`next's next's`下一个元素？

我盲目地尝试`$(this).next().next().val()`并且它有效，它能够获得下一个第二个元素的值。所以如果这样的代码，`$(this).next().next().next().next().next().val()` 它会得到第 5 个元素。

我认为它应该有更好的编码方式，所以有人知道吗？

如果我想获得下一个 100 个元素属性会很有趣！所以我知道你们会问这样的代码需要什么样的编程或使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T05:55:49.143

动用你的想象力 ：

```
var elem = ​$("#elementID")​; //gets the start element
elem.siblings().eq(elem.index()+8).css('color', 'red');// ninth next element 
```

从一个元素开始，获取它的所有兄弟元素并使用[eq()](http://api.jquery.com/eq/)根据开始元素索引以及您希望跳过的许多兄弟元素进行过滤。

[**小提琴**](http://jsfiddle.net/rEWQn/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T05:54:20.490

您可以使用 :eq 选择器，例如：

```
$(".class").eq(2).css("color", "red"); 
```

它可能对你有用

# java - 得到 java.lang.NoClassDefFoundError: groovy/lang/GroovyObject

> ID：11858339
> 
> 赞同：3
> 
> 时间：2012-08-08T05:46:18.270
> 
> 标签：java, groovy

在命令 shelll 中执行 java 类时出现以下异常

```
Exception in thread "main" java.lang.NoClassDefFoundError: groovy/lang/GroovyObj
ect
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:14
1)
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
        at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

因为代码不是我写的，而且我不熟悉 groovy，所以我很难调查问题出在哪里。请给我一个线索。

PS：我已将 groovy-all.jar 添加到我的类路径中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:36:27.320

我遇到的一个问题是 Groovy 的版本不匹配。更具体地说，似乎我在 2.1.1 下运行了一个已编译的 groovy 类，而它在 1.8.6 下编译

将类路径中包含的库更改为 1.8.6 解决了我的问题。

# java - 为什么 List 不简单地定义为抽象类而不是接口？

> ID：11858341
> 
> 赞同：4
> 
> 时间：2012-08-08T05:46:18.567
> 
> 标签：java, collections, interface

我们有类似的东西

```
List lst = new LinkedList(); 
```

这表明 List 是某种类。那么，为什么称它为接口呢？我们可以简单地称它为实现 Collection 的抽象类。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-08T05:51:57.937

接口和抽象类用于不同的目的。看到[这个问题](https://stackoverflow.com/questions/1913098/what-is-the-difference-between-an-interface-and-abstract-class)。

List 定义了我们希望列表类型对象具有的一组行为，而不是数据结构层次结构的基础。它不需要指定任何共享行为或类似的东西。它只是简单地说“所有想要自称为 List 的东西都应该能够做这些事情”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:09:42.903

**如果一个类已经在扩展另一个类它不能在你的情况下扩展 List。**

基本上你必须了解[抽象类和接口之间的区别](https://stackoverflow.com/questions/1474249/abstract-classes-vs-interfaces)。

或者您可以阅读[Effective Java](https://rads.stackoverflow.com/amzn/click/com/0321356683)中的第 18 条以获得更好的理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T07:08:57.207

列表 lst = new LinkedList();

这里的 List 是一个单一类型的集合，其属性不同于其他集合类型。LinkedList 是这些 List 属性的实现，使用自己的数据结构作为 LinkedList。ArrayList 是另一种以自己的方式实现相同属性的数据结构。

集合是 100% 抽象的。不同类型的集合具有不同的属性。例如，List**是**具有允许复制的属性的集合。秩序很重要。等 Set **是一个**集合，其属性为不允许重复。订单可能不重要等

所以由于不同的Collection类型不需要共同的实现逻辑，所以不需要创建Abstract Class。

也列出 lst = new LinkedList(); 提供了运行时多态性的一些好处。您可以有一些将参数作为列表的代码，例如进程（列表 lst）。这里可以通过传递 LinkedList 或 ArrayList 等来使用相同的代码。让我不要详细说明。

通过 Oleksi 指定的接口和抽象类之间的区别。此外，我想简化事情。OOP中的主要概念是抽象，它是广义概念。人是动物。动物是生物。现在，Living Thing 是最高级别的抽象。这里要说明的是，如果接口抽象是 100%。在抽象类的情况下，抽象可以在 0 到 100% 之间变化。

通常，当需要默认提供某些功能时使用抽象类，其余的取决于要扩展它的类。例如，假设 Animal 是抽象类。每个动物都有共同的东西，比如 creatEnergy()，它有共同的东西，比如食物转化为蛋白质、脂肪等，这是很常见的。所以这个实现对所有动物都是一样的。但是对于 Man、Bird、Fish 等动物，moving() 等其他内容可能会有所不同。因此，不同的动物可能会以不同的方式**实现**它。因此，这里的抽象从 0 到 100 % 不等。

同样在 Java 中，Class 只能扩展一个类，但实现不同的接口。所以接口提供了一种方式，让类在不同的时间有接口提供的不同行为。

希望这个解释能消除你的疑惑。如果需要更多解释，请告诉我。

# objective-c - UITapGestureRecognizer 在模拟器上不起作用

> ID：11858342
> 
> 赞同：0
> 
> 时间：2012-08-08T05:46:24.520
> 
> 标签：objective-c, ios, user-interface, ios-simulator

刚开始 iOS 编程，试图让 UITapGestureRecognizer 使用 iOS 5.1 模拟器工作，我在点击时似乎无法获得正确的值。这是我从 nathan eror 对[nathan eror](https://stackoverflow.com/users/100039/nathan-eror)的[How to add a touch event to a UIView?的回答中获取的代码。](https://stackoverflow.com/questions/4660371/how-to-add-a-touch-event-to-a-uiview)

```
- (void)handleSingleTap:(UITapGestureRecognizer *)recognizer {
    CGPoint location = [recognizer locationInView:[recognizer.view superview]];

    NSLog(@"touched points: %g, %g", location.x, location.y);
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    self.view.backgroundColor = [UIColor blackColor];
    NSLog(@"gets in here");
    UITapGestureRecognizer *singleFingerTap =
    [[UITapGestureRecognizer alloc] initWithTarget:self
                                            action:@selector(handleSingleTap:)];
    [self.view addGestureRecognizer:singleFingerTap];
} 
```

每次我在模拟器上点击我的 macbook pro 上的触控板时，我的值都会得到 0.000000。是因为模拟器吗？还是我做错了什么？

PS有谁知道如何在发布这个问题时将代码突出显示为objective-C？提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T06:05:55.373

我可以重现你的问题。它似乎发生是因为`[recognizer.view superview]`是窗口（类`UIWindow`）。虽然`UIWindow`是 的子类`UIView`，但手势识别器似乎无法正确地将位置转换为窗口的坐标系。如果我添加一个子视图`self.view`并将手势识别器放在该子视图上，它会将点`self.view`正确转换为 的坐标系。

[我建议您在http://bugreport.apple.com](http://bugreport.apple.com)提交错误报告。（产品为“iPhone SDK”。）

如果您确实需要获取窗口坐标系中的点，可以这样做：

```
- (void)handleSingleTap:(UITapGestureRecognizer *)recognizer {
    CGPoint location = [recognizer locationInView:recognizer.view];
    location = [recognizer.view convertPoint:location toView:recognizer.view.superview];

    NSLog(@"touched point: %g, %g", location.x, location.y);
} 
```

但是，窗口的坐标系包括状态栏的空间，并且在您旋转设备时不会旋转。这可能不是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T05:55:24.513

试试 NSLog(@"touched point %@", NSStringFromCGPoint(location))

# java - 如何通过svn在eclipse中合并两个或多个java项目

> ID：11858345
> 
> 赞同：1
> 
> 时间：2012-08-08T05:46:48.267
> 
> 标签：java, eclipse, svn, merge

我在一个java项目中工作，而我的同事在不同机器上的另一个java项目中工作。我们通过SVN将我们的两个项目存储在服务器中。问题是如何合并我的项目和同事项目，因为这两个项目作为一个war文件一起工作？ ?如何使用SVN和服务器进行合并？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T05:52:49.340

如果您想将您的代码与您同事的代码合并，您应该都将代码提交到同一个 SVN 存储库中。

如果您都提交到同一个分支，那么您只需要使用`Team -> Synchronize`从存储库中获取最新代码。

如果你们都提交到不同的分支，那么你需要从你同事的分支合并到你的分支（反之亦然）。为此，请确保您拥有分支中的最新代码 - 使用`Team->Synchronize`- 然后使用`Team->Merge`选择您同事的分支作为合并源。然后解决任何冲突，并提交您的更改。

# algorithm - 从 4 或 5 个未知范围的均匀分布随机数中进行最佳选择

> ID：11858346
> 
> 赞同：4
> 
> 时间：2012-08-08T05:47:03.167
> 
> 标签：algorithm, probability

考虑一组从范围中以均匀概率分布选择的隐藏`k`随机数，**其中 N 对我来说是未知的**。在每个时间间隔中，数字都会显示给我，如果我还没有选择，我可以选择作为我的最终数字，或者继续下一个时间间隔。当向我透露时，我无法再选择任何一个。如果在显示时我还没有选择一个数字，那么默认情况下，它变成.`{r1,r2...rk}``[0..N]`**`ri``ri``c``c``ri``r1,r2..r(i-1)``rk``c`**

 ***我想优化 c，在某种意义上最大化它的期望值。*

如果`N`知道，那么答案是显而易见的。同样，如果`k`很大，那么我可以使用 的早期值`ri`来估计`N`。

目前进展：

如果`k = 1`那么没有选择。默认情况下`c=r1`。的期望值`c`为`N/2`。

如果`k = 2`那么所有选择算法都与期望值相同`N/2`。

如果`k = 3`那么最好的算法是

```
if r2/r1 >= 0.75 then 
  c=r2
else
  c=r3 
```

的期望值`c`约为`0.58N`。

如果`k = 4`那么我想出的最好的就是

```
if r2/r1 > 0.920 then
  c=r2
elseif r3/r1 > 0.665 then
  c=r3
else
  c=r4 
```

的期望值`c`约为`0.64N`。`r1`我相信我应该能够通过“使用”的值和`r2`选择是否接受作为我选择的值来做得更好，`r3`但是分析解决方案使我无法理解。

`k=4`任何人都可以为和/或提供更好的算法`k=5`吗？

**关于秘书问题的注释：** 在我能找到的所有版本的 SP 中，只有你有关于候选人与已经出现的候选人的相对等级的信息。但是在这个问题中，每个候选者都有一个值（当然来自未知范围 [0..N]），并且通过利用值的比率，您可以做得更好。例如，k=3 问题的 SP 解决方案（如果 p2 > p1 选择 p2 否则选择 p3）的预期回报为 o.5833N，而我的解决方案（如果 p2/p1 > 0.75 选择 p2 否则选择 p3）有预期回报为 0.5937。

到目前为止，我对任何 k 问题的最佳回报是：

```
 i = 0    
 repeat
    inc(i)
 until (r[i]/Max(r[1]..r[i-1]) > V[i]) or (i=k)
 c=r[i] 
```

其中对于任何选择的 k，v[i]（或者如果您愿意，也可以称之为 v[k,i]）是一个预先选择的实数值数组。秘书问题的标准解决方案仅使用 VV=[inf,...inf,1,...,1] 中的 inf 和 1 的值，而我可以通过在V. 但我相信我的解决方案仍然是次优的，因为我只使用 Max(r1..ri) 的值，而在每个决策点的 r1..ri 值的分布中必须存在“隐藏”信息。

迄今为止的最佳解决方案：

```
k = 3 : v = [inf,0.75]          : cexp = 0.58N
k = 4 : v = [inf,0.92,0.66]     : cexp = 0.665N
k = 5 : v = [inf,inf,0.82,0.63] : cexp = 0.6683N 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T08:01:31.630

它是最优停止理论中“秘书问题”的众多修改之一。对于您的具体问题，我没有现成的答案，但我强烈建议您阅读这个“秘书问题”。有很多关于它的论文，我相信你会为此找到一些东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T08:43:05.450

请注意，您可以做得比`N/2`for更好`k=2`：

*   猜测`N/2`并调用它`m`。
*   如果`r1 > m`接受它作为`c`，否则拒绝并选择`r2`作为`c`。

这是该策略的预期。

*   如果`m ≥ N`, 那么它总是拒绝`r1`和接受`r2`, 的期望值`c`为`N/2`.
*   如果`m < N`，那么它接受：
    *   `r1`有概率`(N-m)/N`
    *   `r2`剩余概率概率`m/N`

在第二种情况下，期望`r1`是`Σ_{m<i≤N} i / (N-m) > N/2`，而期望`r2`是`N/2`。在第二种情况下，整体策略的期望值大于`N/2`。

如果你能很好地猜测 ，这个策略会更好`N/2`，但可爱的事实是你不会出错：即使你错了，这个策略至少会产生`N/2`预期。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T15:53:39.907

为什么最好的解决方案只涉及将 r [i]与 Max(r [1] , r [2] , ..., r [i] ) 进行比较，这可能是有充分理由的：[德国坦克问题](http://en.wikipedia.org/wiki/German_tank_problem)。

假设您刚刚看到倒数第二个数字 r [k-1]。考虑一下你当时的决定是什么。您可以选择 r [k-1]或等待查看尚未公开的 r [k]。什么时候应该选择 r [k-1]？当你认为 r [k-1]大于 r [k] = N/2 的期望值时。但是，如果你不知道 N，你如何估计[rk]的期望值呢？好吧，你可能会做的是估计 N。你是怎么做的？您使用仅依赖于观测值的最大值（和计数）的[德国坦克问题的解决方案之一。](http://en.wikipedia.org/wiki/German_tank_problem)

[计算i] < k-1的 ri 的情况不太简单。例如，当您查看 r [k-2]时，您需要弄清楚您会做什么，因为您还有*两个*数字要查看并且（可能）还有一个选择要做。但是，我怀疑在每种情况下，您正在做的关键事情是对 N 进行一些估计，这仅涉及迄今为止观察到的值的最大值和计数。**

# java - 在 JScrollPane 中重新绘制 JPanel

> ID：11858348
> 
> 赞同：4
> 
> 时间：2012-08-08T05:47:13.563
> 
> 标签：java, swing, jpanel, jscrollpane, paintcomponent

我正在进行的项目是一个用于玩桌面游戏的计算机间实用程序，其中一个关键部分是交互式网格/地图。好吧，我已经内置了用于自定义地图创建的功能，并且希望屏幕能够显示非常大的地图以及非常小的地图。为此，我创建了一系列类，我可以使用它们显示任意大小的网格。但是我想做的是将完成此操作的 JPanel 放入 JScrollPane 中，从而为地图创造无限空间。当我尝试这样做时，完全显示在 JScrollPane 之外的地图根本不会绘制。我怀疑它与 Graphics 上下文有关，但到目前为止还没有找到解决方案。

在下面的代码中，标记滚动线并在初始化中切换 grid.draw 方法调用，看看我希望它是什么样子。

完整代码如下：

```
package pac;

import javax.swing.*;
import javax.swing.text.*;

import java.awt.*;

public class MainScreen extends JFrame
{
int width, height, x, y;
Grid grid;

public static void main(String[] args) 
{
    MainScreen mainScreen = new MainScreen();
    mainScreen.setVisible(true);        
}

public MainScreen()
{
    Dimension dim = Toolkit.getDefaultToolkit().getScreenSize();
    float factor = 1.25f;
    width = (int)(dim.width / factor);
    height = (int)(dim.height / factor);
    x = (int)(dim.width / (factor * 8));
    y = (int)(dim.height / (factor * 8));

    setBounds(x,y,width,height);
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    setTitle("DnD Main Screen");
    setVisible(true);
    grid = new Grid();

    JScrollPane scrollPane = new JScrollPane(grid);
    scrollPane.setBounds(212,0,650,500);
    scrollPane.setViewportView(grid);
    add(scrollPane);
    this.setLayout(null);

    Thread draw = new Thread()
    {
        public void run()
        {
            while(true)
            {
                Graphics g = getGraphics();

                grid.repaint();
                //grid.paintComponents(getGraphics());

                g.setColor(Color.blue);
                g.fillRect(0 + 8, 0 + 30, 212, 200);
                g.fillRect(863 + 8, 0 + 30, 212, 200);

                g.setColor(Color.red);
                g.fillRect(0 + 8, 200 + 30, 212, 375);
                g.fillRect(863 + 8, 200 + 30, 212, 375);

                try {Thread.sleep(1);} catch (InterruptedException e) {e.printStackTrace();}
                Thread.yield();
            }
        }
    };
    draw.start();
}

public class Grid extends JPanel
{
    Tile[][] tiles;
    public int x, y, across, down;
    public int topBar = 30;
    public int skinnyBar = 8;
    public Grid()
    {
        this.setPreferredSize(new Dimension(600,600));

        x=212 + skinnyBar;
        y=0+topBar;
        across = 13;
        down = 9;
        tiles = new Tile[across][down];
        for(int i = 0; i<across; i++)
            for(int j = 0; j<down; j++)
            {
                tiles[i][j] = new Tile(x+(i*50),y+(j*50),50);
            }
        this.setVisible(true);
    }
    public void paintComponents(Graphics g)
    {
        //super.paintComponents(g);
        draw(g);
    }
    public void draw(Graphics g)
    {
        for(int i = 0; i<across; i++)
            for(int j = 0; j<down; j++)
            {
                g.setColor(Color.black);
                for(int k =0; k< 5; k++)
                    g.drawRect(tiles[i][j].x+k, tiles[i][j].y+k, tiles[i][j].side-k*2, tiles[i][j].side-2*k);
            }
    }
    private class Tile
    {
        int x, y, side;
        public Tile(int inX, int inY, int inSide)
        {
            x=inX;
            y=inY;
            side=inSide;
        }
    }
} 
```

}

我已经为此工作了一段时间，但未能找到与我的足够相似的问题来找到修复程序。有什么建议吗？谢谢，麻烦您了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T06:11:23.353

1.不要对 e 使用 null 布局`JScrollPan`，使用一些 Standard `LayoutManager`，

2.不要使用`getGraphics()`，此方法用于打印到打印机或将GUI作为快照保存到文件图像

3.没有使用的理由，事先`draw()`准备好所有的`Objects`东西，把里面的东西都涂上`paintComponent()`

4.大部分例子太老了，基于`Thread`，不要用`Thread`，用`Swing Timer`代替

5.最简单的方法可以

`JFrame`-> `JScrollPane`-> `JPanel`-> 通过使用将`GridLayout`所需数量放在那里，将它们放入某种类型的数组中，并通过使用从数组中提取并更改其`JPanels``Color``JPanels``Swing Timer``JPanel``Backgroung`

例如，必须`Swing Timer`在期间添加绘画

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Random;
import javax.swing.*;

public class TilePainter extends JPanel implements Scrollable {

    private static final long serialVersionUID = 1L;

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame frame = new JFrame("Tiles");
                frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                frame.getContentPane().add(new JScrollPane(new TilePainter()));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }
    private final int TILE_SIZE = 50;
    private final int TILE_COUNT = 100;
    private final int visibleTiles = 10;
    private final boolean[][] loaded;
    private final boolean[][] loading;
    private final Random random;

    public TilePainter() {
        setPreferredSize(new Dimension(TILE_SIZE * TILE_COUNT, TILE_SIZE * TILE_COUNT));
        loaded = new boolean[TILE_COUNT][TILE_COUNT];
        loading = new boolean[TILE_COUNT][TILE_COUNT];
        random = new Random();
    }

    public boolean getTile(final int x, final int y) {
        boolean canPaint = loaded[x][y];
        if (!canPaint && !loading[x][y]) {
            loading[x][y] = true;
            Timer timer = new Timer(random.nextInt(500),
                    new ActionListener() {

                        @Override
                        public void actionPerformed(ActionEvent e) {
                            loaded[x][y] = true;
                            repaint(x * TILE_SIZE, y * TILE_SIZE, TILE_SIZE, TILE_SIZE);
                        }
                    });
            timer.setRepeats(false);
            timer.start();
        }
        return canPaint;
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        Rectangle clip = g.getClipBounds();
        int startX = clip.x - (clip.x % TILE_SIZE);
        int startY = clip.y - (clip.y % TILE_SIZE);
        for (int x = startX; x < clip.x + clip.width; x += TILE_SIZE) {
            for (int y = startY; y < clip.y + clip.height; y += TILE_SIZE) {
                if (getTile(x / TILE_SIZE, y / TILE_SIZE)) {
                    g.setColor(Color.GREEN);
                } else {
                    g.setColor(Color.RED);
                }
                g.fillRect(x, y, TILE_SIZE - 1, TILE_SIZE - 1);
            }
        }
    }

    @Override
    public Dimension getPreferredScrollableViewportSize() {
        return new Dimension(visibleTiles * TILE_SIZE, visibleTiles * TILE_SIZE);
    }

    @Override
    public int getScrollableBlockIncrement(Rectangle visibleRect, int orientation, int direction) {
        return TILE_SIZE * Math.max(1, visibleTiles - 1);
    }

    @Override
    public boolean getScrollableTracksViewportHeight() {
        return false;
    }

    @Override
    public boolean getScrollableTracksViewportWidth() {
        return false;
    }

    @Override
    public int getScrollableUnitIncrement(Rectangle visibleRect, int orientation, int direction) {
        return TILE_SIZE;
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-08T06:08:21.950

你确定吗？

```
public void paintComponents(Graphics g) 
```

你的意思是不是

```
public void paintComponent(Graphics g) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-08T06:08:42.603

除了从不对 之外的 UI 执行更新之外`Event Dispatching Thread`，我还建议以下内容：

确保`Grid`窗格称`super.paintComponent(...)`这很重要，并且您真的，真的，真的必须有充分的理由不这样做。

如果您希望面板是透明的，请`setOpaque(false)`改用。

我还建议您熟悉该`Graphics.drawLine`方法。我觉得会更有效率

您必须记住，您**无法**控制油漆过程。就接受吧。您可以向要更新的图形管道提供请求（`invalidate`, `revalidate`, `repaint`），仅此而已。其余的由操作系统和重绘管理器决定。

`this.setLayout(null);`是一个非常非常糟糕的主意，这可能只是我的意见，但这确实是一个坏主意。如果没有其他人了解`GridBagLayout`或使用复合面板和布局管理器，它只会为您省去很多麻烦

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-08T07:19:52.167

嗯，我做了我自己的小例子，演示了重新绘制 a*包裹*在 a`JPanel`中：*`JScrollPane`*

 *面板有一个自定义方法，该方法`setScrollPane(JSCrollPane jsp)`将在面板之后调用并已`JScrollPane`初始化，这将允许`JPanel`调用*scrollPanes*实例：`repaint()`

 ***PanelPaintTest.java：**

```
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.SwingUtilities;

public class PanelPaintTest extends JFrame {

    public PanelPaintTest() {
        createUI();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new PanelPaintTest().setVisible(true);
            }
        });
    }

    private void createUI() {
        //create frame
        setTitle("JPanel and JScrollPane Paint Test");
        setSize(500, 500);
        setResizable(false);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        //create custom panel
        Panel panel = new Panel(500, 500);    
        //create scrollpane to hold JPanel
        JScrollPane scrollPane = new JScrollPane();
        scrollPane.setViewportView(panel);    
        panel.setScrollPane(scrollPane);
        //custom method to set the panels JScrollPane which will be repainted when ever the panel is    
        getContentPane().add(scrollPane);//add scrollpane to the frame
    }
} 
```

**面板.java**

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.Timer;

class Panel extends JPanel {

    private int width, height, across, down, x = 0, y = 0;
    ;
    private Panel.Tile[][] tiles;
    private Color color = Color.black;
    private JScrollPane scrollPane;

    public Panel(int width, int height) {
        this.setPreferredSize(new Dimension(width * 2, height * 2));//simple to make the scrollbars visible

        this.width = width * 2;
        this.height = height * 2;

        createTiles();

        changePanelColorTimer();//just something to do to check if its repaints fine

    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        for (int i = 0; i < across; i++) {
            for (int j = 0; j < down; j++) {
                g.setColor(color);
                for (int k = 0; k < 5; k++) {
                    g.drawRect(tiles[i][j].x + k, tiles[i][j].y + k, tiles[i][j].side - k * 2, tiles[i][j].side - 2 * k);
                }
            }
        }
        updateScrollPane();//refresh the pane after every paint
    }

    //calls repaint on the scrollPane instance
    private void updateScrollPane() {
        scrollPane.repaint();
    }

    void setScrollPane(JScrollPane scrollPane) {
        this.scrollPane = scrollPane;
    }

    private void createTiles() {
        across = 13;
        down = 9;
        tiles = new Panel.Tile[across][down];

        for (int i = 0; i < across; i++) {
            for (int j = 0; j < down; j++) {
                tiles[i][j] = new Panel.Tile(x + (i * 50), y + (j * 50), 50);//took out x and y values didnt know what 
            }
        }
    }

    //change the color of the grid lines from black to red and vice versa every 2s
    private void changePanelColorTimer() {
        Timer timer = new Timer(2000, new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                if (color == Color.black) {
                    color = Color.red;
                } else {
                    color = Color.black;
                }
            }
        });
        timer.setInitialDelay(2000);
        timer.start();
    }

    private class Tile {

        int x, y, side;

        public Tile(int inX, int inY, int inSide) {
            x = inX;
            y = inY;
            side = inSide;
        }
    }
} 
```

面板将绘制您显示的图块，它们将每 2 秒闪烁一次红色或黑色。

高温高压**

# php - 使用数组作为排序关系对不同的数组进行排序

> ID：11858349
> 
> 赞同：1
> 
> 时间：2012-08-08T05:47:17.177
> 
> 标签：php, arrays, sorting

关于这些元素如何在不同的数组“$sorting_order”中排序，我想对数组“$to_sort”中的元素进行排序。

但是，我不知道如何处理两个数组包含不同元素的情况。

```
$sorting_order[]=[introduction,skills,education,experience]
$to_sort[]=[experience,skills,education] 
```

这是期望的结果：

```
$sorted[]=[skills,education,experience] 
```

**解决方案：我得到了这个解决方案，

```
$sorted = array_intersect($sorting_order, $to_sort);
print_r($sorted); 
```

**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:05:16.590

我会这样处理：

`a`1）使用翻转`array_flip()`；这将创建一个映射，其中字符串值作为键，序数值作为值。

2) 使用 1) 中的地图`usort()`。

```
$amap = array_flip($a);
usort($b, function($str1, $str2) use ($amap) {
    $key1 = $amap[$str1]; // decide what to do if the key doesn't exist
    $key2 = $amap[$str2];

    if ($key1 > $key2) {
        return 1;
    } elseif ($key1 == $key2) {
        return 0;
    } else {
        return -1;
    }
}); 
```

# html - 去除所有 HTML 标签，除了链接和 和

> ID：11858350
> 
> 赞同：0
> 
> 时间：2012-08-08T05:47:18.363
> 
> 标签：html, regex

我正在尝试编写一个正则表达式来去除除链接和之外的所有 HTML`<p>`和`</p>`.

现在，我可以删除所有 HTML 标签`links`，但我不知道如何同时保留`links tag`和`p`标签？

顺便说一句，有人可以推荐一些关于如何学习正则表达式的书吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T05:52:37.253

您**不能**使用正则表达式解析 HTML，（如此处和[此处](https://stackoverflow.com/questions/590747/using-regular-expressions-to-parse-html-why-not)[所示](http://www.codinghorror.com/blog/2009/11/parsing-html-the-cthulhu-way.html)），原因是 HTML 可以并且不能正确形成。

您将需要使用专门的框架来做您需要的事情，如果您使用 Java，您可以尝试[JSoup](http://jsoup.org/)，对于 C#，有[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)，对于 PHP，有[Simple DOM Parser](http://simplehtmldom.sourceforge.net/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T05:49:37.773

标准响应：远离正则表达式并备份。您**不**使用正则表达式来操作 HTML。HTML 不是常规语言，因此无法使用正则表达式可靠地处理。请参阅为什么不这样做的最终答案：[RegEx match open tags except XHTML self-contained tags](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T05:59:22.500

你用什么编程语言编写代码？如果你使用 PHP，它支持一个很好的 API： http: [//php.net/manual/en/function.strip-tags.php](http://php.net/manual/en/function.strip-tags.php)

# java - 在大型团队中使用 Sonar 的最佳方式？

> ID：11858355
> 
> 赞同：1
> 
> 时间：2012-08-08T05:47:43.267
> 
> 标签：java, eclipse, sonarqube

我目前正在为一个拥有大量 Java 代码库的大型（50 多名）开发团队部署 Sonar。我无法使用 Sonar 制定有效的工作流程。这里有一些问题：

1.  如果开发人员使用 sonar-runner 对中央服务器扫描他们的代码：
    1.  他们需要上传大量代码，尽管他们对一小部分类感兴趣
    2.  他们在上传具有不同版本的相同文件时发生冲突
2.  使用 Eclipse 插件在本地运行 Sonar 再次引发问题：
    1.  它分析所有代码，而您只对特定文件感兴趣
    2.  它不知道服务器上定义的误报 - 所以你被不必要的警告淹没了
3.  我在夜间构建中集成了 Sonar，但随后开发人员仅在 T+1 收到代码问题。更糟糕的是 - 开发人员签入未扫描的代码。

我们如何实现以下工作流程：

*   允许开发人员在签入前分析**特定**代码
*   不会通过“重新打开”误报和忽略的文件来给开发人员带来负担
*   开发人员不会“覆盖”彼此对未提交文件的分析
*   与标准构建（Maven、SVN）集成以监控签入的内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:13:34.930

我们在团队中所做的是，我们已将 Jenkins 配置为每次在通用 SVN 上提交代码时调用声纳。

在 Jenkins 上，我们有数千个小项目（少于 20 个类），每个程序员都可以使用他感兴趣的项目创建自己的 Dashboard 页面。

此外，您可以使用 Maven 设置 Jenkins，以便项目相互依赖。如果更改仅发生在其中一个视图项目中（通常是构建过程中的最新版本），它会阻止完全重建。

# java - 将文件片段放入 HashMap - Java

> ID：11858359
> 
> 赞同：0
> 
> 时间：2012-08-08T05:48:00.700
> 
> 标签：java, file, hashmap

我正在阅读一个文件并希望将文件存储到某些单词，在这个例子中“是”到 a`HashMap of < Integer, document >.`但我被困住了`HashMap`，这是我的思路。

```
BufferedReader in = new BufferedReader(new FileReader("filename.txt"));  
String line;     
int i = 0;
     while ((line = in.readLine()) != null) {  
       if (!line.startwith("yes");{
         //add line to hashMap[i]
         i++;
        }

  System.out.println(hashMap[i]);  
} 
```

如何在“是”之前添加我的文本`HashMap`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T05:52:27.620

您使用 HashMap 存储具有唯一键的键、值对。

你当然可以在某事上分道扬镳：

`split_line = line.split(delimiter);`

并存储：

`\** I am being unsafe here. You should probably check for null and type. *\
hashmap.put( new Integer(split_line[0]), split_line[1]);`

但这是你想做的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:02:37.217

我真的不明白你想在 HashMap 中存储什么。你能更具体一点吗？

这是使用**Scanner**的方法 - 我更喜欢它，而不是简单地逐行解析。

```
public class Main {
public static void main(String[] args) throws FileNotFoundException {
    StringBuilder responseBuilder = new StringBuilder();
    File file = new File("/Users/eugene/Desktop/MyFile.txt");
    Scanner scanner = new Scanner(file);
    scanner.useDelimiter("yes");
    while(scanner.hasNext()){
        responseBuilder.append(scanner.next());
        break;   
    }
    System.out.println(responseBuilder.toString());
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T05:57:17.883

如果您在 Map 中的键是整数，其值从 0 到 n，那么您不需要 map 而需要 List。

```
 List<String> goodWords = new ArrayList<String>();
 while ((line = in.readLine()) != null) {  
       String[] words = line.split(" ");
       for (String str : words) {
           if (!"yes".equals(str)) {
               goodWords.add(str);
           }
       }
 } 
```

# javascript - PhoneGap/Cordova 日历 iOS 插件不发送信息

> ID：11858364
> 
> 赞同：0
> 
> 时间：2012-08-08T05:48:54.550
> 
> 标签：javascript, jquery, cordova

我对科尔多瓦很陌生，所以请多多包涵。我正在使用此处找到的插件：[https ://github.com/phonegap/phonegap-plugins/tree/master/iOS/CalendarPlugin](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/CalendarPlugin)

并在示例中实现了它，但它对我不起作用。我得到错误：

```
Uncaught SyntaxError: Unexpected token ( 
```

但看不到这是从哪里来的。

谁能指出我正确的方向？

```
 $(function() {

            $('.calinfo').live('click', function() {
                               var desiredValue = $(this).data('calinfo');

                               var cal;
                               cal = window.plugins.calendarPlugin

                               // function call in Javascript:

                               //createEvent : 
                               function(title,location,notes, startDate, endDate){
                               var title= "My Appt";
                               var location = "Los Felix";
                               var notes = "me testing";
                               var startDate = "2012-11-23 09:30:00";
                               var endDate = "2012-11-23 12:30:00";

                               cal.createEvent(title,location,notes,startDate,endDate);
                               };
            });
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:46:14.737

我对您的代码进行了一些清理，请尝试是否可行：

```
/*global $:true */
$(function() {
  "use strict";

  $('.calinfo').live('click', function() {
    var desiredValue = $(this).data('calinfo');
    var cal = window.plugins.calendarPlugin;

    // function call in Javascript:

    //createEvent : 
    (function createEvent(title, location, notes, startDate, endDate) {
      title= "My Appt";
      location = "Los Felix";
      notes = "me testing";
      startDate = "2012-11-23 09:30:00";
      endDate = "2012-11-23 12:30:00";

      cal.createEvent(title,location,notes,startDate,endDate);
    }());
  });
}); 
```

# java - 更改资产文件夹中的文本文件后项目出错

> ID：11858365
> 
> 赞同：0
> 
> 时间：2012-08-08T05:48:59.307
> 
> 标签：java, android, assets

我在从 android 的 assets 文件夹中读取文本文件时遇到问题。该代码之前工作正常，但在我更改资产文件夹中的文本文件后，它给了我一个错误，说 android 打包问题。

我不能更改资产文件夹中的文本文件吗？为什么它不反映变化？

PS我曾尝试过干净的项目并令人耳目一新

这是我得到的错误

```
[2011-03-16 09:49:50 - p] ERROR: Unknown option '--debug-mode'
[2011-03-16 09:49:50 - p] Android Asset Packaging Tool
[2011-03-16 09:49:50 - p] 
[2011-03-16 09:49:50 - p] Usage:
[2011-03-16 09:49:50 - p]  aapt l[ist] [-v] [-a] file.{zip,jar,apk}
[2011-03-16 09:49:50 - p]    List contents of Zip-compatible archive.
[2011-03-16 09:49:50 - p] 
[2011-03-16 09:49:50 - p]  aapt d[ump] [--values] WHAT file.{apk} [asset [asset ...]]
[2011-03-16 09:49:50 - p]    badging          Print the label and icon for the app declared in APK.
[2011-03-16 09:49:50 - p]    permissions      Print the permissions from the APK.
[2011-03-16 09:49:50 - p]    resources        Print the resource table from the APK.
[2011-03-16 09:49:50 - p]    configurations   Print the configurations in the APK.
[2011-03-16 09:49:50 - p]    xmltree          Print the compiled xmls in the given assets.
[2011-03-16 09:49:50 - p]    xmlstrings       Print the strings of the given compiled xml assets.
[2011-03-16 09:49:50 - p] 
[2011-03-16 09:49:50 - p]  aapt p[ackage] [-d][-f][-m][-u][-v][-x][-z][-M AndroidManifest.xml] \
[2011-03-16 09:49:50 - p]         [-0 extension [-0 extension ...]] [-g tolerance] [-j jarfile] \
[2011-03-16 09:49:50 - p]         [--min-sdk-version VAL] [--target-sdk-version VAL] \
[2011-03-16 09:49:50 - p]         [--app-version VAL] [--app-version-name TEXT] [--custom-package VAL] \
[2011-03-16 09:49:50 - p]         [--rename-manifest-package PACKAGE] \
[2011-03-16 09:49:50 - p]         [--rename-instrumentation-target-package PACKAGE] \
[2011-03-16 09:49:50 - p]         [--utf16] [--auto-add-overlay] \
[2011-03-16 09:49:50 - p]         [-I base-package [-I base-package ...]] \
[2011-03-16 09:49:50 - p]         [-A asset-source-dir]  [-G class-list-file] [-P public-definitions-file] \
[2011-03-16 09:49:50 - p]         [-S resource-sources [-S resource-sources ...]]         [-F apk-file] [-J R-file-dir] \
[2011-03-16 09:49:50 - p]         [raw-files-dir [raw-files-dir] ...]
[2011-03-16 09:49:50 - p] 
[2011-03-16 09:49:50 - p]    Package the android resources.  It will read assets and resources that are
[2011-03-16 09:49:50 - p]    supplied with the -M -A -S or raw-files-dir arguments.  The -J -P -F and -R
[2011-03-16 09:49:50 - p]    options control which files are output.
[2011-03-16 09:49:50 - p] 
[2011-03-16 09:49:50 - p]  aapt r[emove] [-v] file.{zip,jar,apk} file1 [file2 ...]
[2011-03-16 09:49:50 - p]    Delete specified files from Zip-compatible archive.
[2011-03-16 09:49:50 - p] 
[2011-03-16 09:49:50 - p]  aapt a[dd] [-v] file.{zip,jar,apk} file1 [file2 ...]
[2011-03-16 09:49:50 - p]    Add specified files to Zip-compatible archive.
[2011-03-16 09:49:50 - p] 
[2011-03-16 09:49:50 - p]  aapt v[ersion]
[2011-03-16 09:49:50 - p]    Print program version.
[2011-03-16 09:49:50 - p] 
[2011-03-16 09:49:50 - p]  Modifiers:
[2011-03-16 09:49:50 - p]    -a  print Android-specific data (resources, manifest) when listing
[2011-03-16 09:49:50 - p]    -c  specify which configurations to include.  The default is all
[2011-03-16 09:49:50 - p]        configurations.  The value of the parameter should be a comma
[2011-03-16 09:49:50 - p]        separated list of configuration values.  Locales should be specified
[2011-03-16 09:49:50 - p]        as either a language or language-region pair.  Some examples:
[2011-03-16 09:49:50 - p]             en
[2011-03-16 09:49:50 - p]             port,en
[2011-03-16 09:49:50 - p]             port,land,en_US
[2011-03-16 09:49:50 - p]        If you put the special locale, zz_ZZ on the list, it will perform
[2011-03-16 09:49:50 - p]        pseudolocalization on the default locale, modifying all of the
[2011-03-16 09:49:50 - p]        strings so you can look for strings that missed the
[2011-03-16 09:49:50 - p]        internationalization process.  For example:
[2011-03-16 09:49:50 - p]             port,land,zz_ZZ
[2011-03-16 09:49:50 - p]    -d  one or more device assets to include, separated by commas
[2011-03-16 09:49:50 - p]    -f  force overwrite of existing files
[2011-03-16 09:49:50 - p]    -g  specify a pixel tolerance to force images to grayscale, default 0
[2011-03-16 09:49:50 - p]    -j  specify a jar or zip file containing classes to include
[2011-03-16 09:49:50 - p]    -k  junk path of file(s) added
[2011-03-16 09:49:50 - p]    -m  make package directories under location specified by -J
[2011-03-16 09:49:50 - p]    -u  update existing packages (add new, replace older, remove deleted files)
[2011-03-16 09:49:50 - p]    -v  verbose output
[2011-03-16 09:49:50 - p]    -x  create extending (non-application) resource IDs
[2011-03-16 09:49:50 - p]    -z  require localization of resource attributes marked with
[2011-03-16 09:49:50 - p]        localization="suggested"
[2011-03-16 09:49:50 - p]    -A  additional directory in which to find raw asset files
[2011-03-16 09:49:50 - p]    -G  A file to output proguard options into.
[2011-03-16 09:49:50 - p]    -F  specify the apk file to output
[2011-03-16 09:49:50 - p]    -I  add an existing package to base include set
[2011-03-16 09:49:50 - p]    -J  specify where to output R.java resource constant definitions
[2011-03-16 09:49:50 - p]    -M  specify full path to AndroidManifest.xml to include in zip
[2011-03-16 09:49:50 - p]    -P  specify where to output public resource definitions
[2011-03-16 09:49:50 - p]    -S  directory in which to find resources.  Multiple directories will be scanned
[2011-03-16 09:49:50 - p]        and the first match found (left to right) will take precedence.
[2011-03-16 09:49:50 - p]    -0  specifies an additional extension for which such files will not
[2011-03-16 09:49:50 - p]        be stored compressed in the .apk.  An empty string means to not
[2011-03-16 09:49:50 - p]        compress any files at all.
[2011-03-16 09:49:50 - p]    --min-sdk-version
[2011-03-16 09:49:50 - p]        inserts android:minSdkVersion in to manifest.  If the version is 7 or
[2011-03-16 09:49:50 - p]        higher, the default encoding for resources will be in UTF-8.
[2011-03-16 09:49:50 - p]    --target-sdk-version
[2011-03-16 09:49:50 - p]        inserts android:targetSdkVersion in to manifest.
[2011-03-16 09:49:50 - p]    --values
[2011-03-16 09:49:50 - p]        when used with "dump resources" also includes resource values.
[2011-03-16 09:49:50 - p]    --version-code
[2011-03-16 09:49:50 - p]        inserts android:versionCode in to manifest.
[2011-03-16 09:49:50 - p]    --version-name
[2011-03-16 09:49:50 - p]        inserts android:versionName in to manifest.
[2011-03-16 09:49:50 - p]    --custom-package
[2011-03-16 09:49:50 - p]        generates R.java into a different package.
[2011-03-16 09:49:50 - p]    --auto-add-overlay
[2011-03-16 09:49:50 - p]        Automatically add resources that are only in overlays.
[2011-03-16 09:49:50 - p]    --rename-manifest-package
[2011-03-16 09:49:50 - p]        Rewrite the manifest so that its package name is the package name
[2011-03-16 09:49:50 - p]        given here.  Relative class names (for example .Foo) will be
[2011-03-16 09:49:50 - p]        changed to absolute names with the old package so that the code
[2011-03-16 09:49:50 - p]        does not need to change.
[2011-03-16 09:49:50 - p]    --rename-instrumentation-target-package
[2011-03-16 09:49:50 - p]        Rewrite the manifest so that all of its instrumentation
[2011-03-16 09:49:50 - p]        components target the given package.  Useful when used in
[2011-03-16 09:49:50 - p]        conjunction with --rename-manifest-package to fix tests against
[2011-03-16 09:49:50 - p]        a package that has been renamed.
[2011-03-16 09:49:50 - p]    --utf16 
```

# java - 如何使用 Java 在 Selenium WebDriver 的隐藏字段中键入一些文本

> ID：11858366
> 
> 赞同：21
> 
> 时间：2012-08-08T05:49:00.097
> 
> 标签：java, javascript, textfield, selenium-webdriver, hidden-field

我正在使用带有 Java 的 WebDriver 进行测试自动化。对于隐藏的输入字段，我有以下 HTML 代码：

```
<input type="hidden" value="" name="body" id=":6b"> 
```

如何在 Selenium2（WebDriver）的隐藏字段中输入内容？我已将代码编写为：

```
driver.findElement(By.name("body")).sendKeys("test body"); 
```

但显示以下错误：org.openqa.selenium.ElementNotVisibleException：元素当前不可见，因此可能无法与命令持续时间或超时交互：30.04 秒

有人可以帮我在隐藏字段中写/输入一些文本吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-08T08:32:16.663

首先，您必须将 type 属性的值更改为隐藏的文本。以下使用 javascript 的代码适用于此：

```
jse.executeScript("document.getElementsByName('body')[0].setAttribute('type', 'text');"); 
```

现在，您可以使用 WebDriver 在该文本上键入内容。因此，使用 Java 和 Javascript 使用 WebDriver 输入隐藏字段的整体代码如下：

```
WebDriver driver = new FirefoxDriver();
JavascriptExecutor jse = (JavascriptExecutor)driver;
jse.executeScript("document.getElementsByName('body')[0].setAttribute('type', 'text');");
driver.findElement(By.xpath("//input[@name='body']")).clear();
driver.findElement(By.xpath("//input[@name='body']")).sendKeys("Ripon: body text"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-09-04T16:18:27.310

```
WebDriver driver=new FirefoxDriver();
driver.get("http://localhost/login.do");
driver.manage().window().maximize();
RemoteWebDriver r=(RemoteWebDriver) driver;
String s1="document.getElementById('username').value='admin'";
r.executeScript(s1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-25T16:52:43.353

您需要初始化一个 JavascriptExecutor，它将执行一个 javaScript 命令：

```
JavascriptExecutor js = (JavascriptExecutor) driver;
js.executeScript("document.getElementById('ElementId').setAttribute('type','text');");
driver.findElement(By.id("ElementId")).click();
driver.findElement(By.id("ElementId")).clear();
driver.findElement(By.id("ElementId")).sendKeys("theTextYouWant"); 
```

如果你想隐藏它：

```
js.executeScript("document.getElementById('ElementId').setAttribute('type','hidden');"); 
```

# android - 带有意图过滤器的片段

> ID：11858369
> 
> 赞同：2
> 
> 时间：2012-08-08T05:49:20.000
> 
> 标签：android, android-fragments

我正在开发一个 Android 应用程序。我必须将一个活动转换为片段。但是该活动是在清单文件中注册的，带有一些意图过滤器。如何使用意图过滤器将此活动转换为片段。请帮助我的朋友。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T06:29:35.103

片段需要包含在 Activity 中，因此您不能在片段本身上放置意图过滤器。但是，您可以将所需的意图过滤器放置在包含片段的 Activity 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:33:33.197

最后我找到了我怀疑的答案。解决方案是向父 fragmentActivity 注册意图过滤器。

# ios - 如何从 Apple 获得自动更新订阅价格

> ID：11858379
> 
> 赞同：0
> 
> 时间：2012-08-08T05:50:05.120
> 
> 标签：ios, subscription, storekit, auto-renewing

我想问一下是否有办法通过调用苹果服务器上的一些脚本来获得主动自动更新订阅的价格？当我验证收据时，Apple 的服务器响应中没有产品 ID 的价格。我想得到它用于记录和统计目的。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T06:21:14.287

好问题。我知道作为交易过程的一部分，您可以在设备上获得它，但我认为没有办法从您的服务器上做到这一点。

当您发送新收据时，您可以通过将价格从您的应用程序发送到您的服务器来拼凑它。

# jquery-mobile - jquery中的事件目标随机变化

> ID：11858382
> 
> 赞同：1
> 
> 时间：2012-08-08T05:50:09.260
> 
> 标签：jquery-mobile, jquery

我在 a 中有许多超链接`ul`，我想捕获对超链接的点击

div的结构如下，

```
<div style="margin:3%;" id="city-list">
        <ul data-role="listview" data-theme="b"  data-filter="true" data-filter-placeholder="Filter Cities...">
            <?php foreach($cities as $city): ?>
            <li>
                <a id="city_<?php echo $city['city_id'] .'_'. $city['city_name']?>" href="#">
                    <span style="font-size: 14px;"><?php echo $city['city_name']; ?></span><br/>
                </a>
            </li>
            <?php endforeach; ?>
            <li class="no-results" style="display:none;">No results found.</li>
        </ul>
    </div> 
```

捕获点击的`jQuery`代码如下，

```
$("#city-list").delegate('a','click', function(event) {
    event.preventDefault();
     //       console.log(event.target);
    var city_id = event.target.id,
    service_type = "<?php echo $service_type; ?>";
    JE.search_regions(city_id, service_type);
    $.cookies.set('city_id', city_id);
}); 
```

这在大多数情况下都有效，除了在某些随机时间。

那个时候，`event.target`就是标签`span`里面了。`a`我不知道为什么会这样。

请帮我调试一下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T06:54:43.363

`e.target`是实际点击的元素，所以如果你点击`span`元素，`e.target`将是`span`元素，但是点击会冒泡到父元素，所以即使它附加到父元素，函数仍然会运行，这很自然，因为在`span`里面`a`, 并且单击`span`也是对`a`元素的单击，但`e.target`会准确识别实际收到单击的元素。

要引用`a`元素，请改用`this`关键字，它将引用绑定的元素，在本例中为`a`元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:58:09.960

你为什么不使用

```
var city_id = jQuery(this).attr("id"); 
```

而不是

```
var city_id = event.target.id; 
```

干杯!

# node.js - 保存时 Mongoose 检查/处理授权

> ID：11858383
> 
> 赞同：0
> 
> 时间：2012-08-08T05:50:11.297
> 
> 标签：node.js, mongoose, everyauth

在猫鼬模式中，我想检查用户是否保存文件。使用everyauth 我已经让它工作了，但是它会在控制台中抛出一个错误，其中包含完整的堆栈跟踪。

```
SpotSchema.pre('save', function (next) {
   if(!everyauth.user){
        // throws the errror
        next(new Error('Not Logged in'));
        return;
    }
   next();
} 
```

有没有办法更优雅地处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:05:00.973

不要扔 [http://mongoosejs.com/docs/middleware.html](http://mongoosejs.com/docs/middleware.html)

检查错误处理部分并处理保存功能中的错误

# java - JSP 页面可以记住它拥有的旧对象吗？

> ID：11858384
> 
> 赞同：2
> 
> 时间：2012-08-08T05:50:13.427
> 
> 标签：java, html, jsp, web-applications, servlets

我从：

```
JSP1->JSP2-JSP3-JSP1 
```

在**JSP1** - 管理屏幕中，我有存储以下数据的对象`Administrator`：这是**adminPage.jsp**

```
<!DOCTYPE html>
<html>
<head><title>System Administrator Page</title>
<link rel="stylesheet"
      href="./css/styles.css"
      type="text/css"/>
</head>
<body>

<h1>Hello ${name.firstName} ${name.lastName} , You've logged in successfully!</h1>
<h1>
Please choose one of the following options
</h1>

<fieldset>
  <legend>Add a new employee to the bank system</legend> 
  <form action="blablabla">     <!-- THAT ONE forwards to a servlet that's called Admin1.java -->
    <a href="adminAdds1">Press here to continue</a>  
  </form>
</fieldset>

<!-- NOTE THE FORWARDS TO THE SERVLETS -->

<fieldset>
  <legend>Add a new manager to the bank system</legend>
  <form action="blablabla">  <!-- THAT ONE forwards to a servlet that's called Admin2.java -->
    <a href="adminAdds2">Press here to continue</a>
  </form>
</fieldset>

</body></html> 
```

图片：

![在此处输入图像描述](../Images/960026d09384e45bd4ef3a910c85770c.png)

然后我转到下一页 - **JSP2**，即**adminAddNewEmployee.jsp**：

```
<!DOCTYPE html>
<html>
<head><title>System Administrator Page</title>
<link rel="stylesheet"
      href="./css/styles.css"
      type="text/css"/>
</head>
<body>

<h1>Registration Page for Administrator!</h1>
<h1>
Add a new employee to the bank system
</h1>

<!-- Admin adds a new employee -->

<fieldset>
  <legend>Registration</legend>
  <form action="adminOperation1"> 
    First name: <input type="text" name="firstName"><br>
    Last name : <input type="text" name="lastName"><br>
    Address   : <input type="text" name="address"><br>
    ID-number : <input type="text" name="idnumber"><br>
    User-Name : <input type="text" name="userName"><br>
    Password  : <input type="text" name="password"><br>
    Status    : <input type="text" name="status"><br>
    <input type="submit" value="Register">
  </form>
</fieldset>

</body></html> 
```

看起来像这样：

![在此处输入图像描述](../Images/c137d7d2ea592bd332229a6d2a5af1a1.png)

而我，管理员，向系统添加了一个新的管理员。

然后我到达这里 - 到**JSP3**，它是：**adminSuccess.jsp**

```
<!DOCTYPE html>
<html>
<head><title>Database has been updated successfully!</title>
<link rel="stylesheet"
      href="./css/styles.css"
      type="text/css"/>
</head>
<body>
<h1>Congratulations , Database has been updated successfully for the following Manager!</h1>
<h2>Manager's first-Name: ${name.firstName}</h2>
<h2>Manager's last-Name: ${name.lastName}</h2>
<h2>Manager's address: ${name.address}</h2>
<h2>Manager's password: ${name.password}</h2>
<h2>Manager's user-Name: ${name.userName}</h2>
<h2>Manager's id-Number: ${name.idnumber }</h2>

<fieldset>
  <legend>Continue to Admin's transactions page</legend>
  <form action="blablabla"> 
    <a href="adminAdds3">Press here to continue</a>
  </form>
</fieldset>

</body></html> 
```

图片 ：

![在此处输入图像描述](../Images/33f261eccd3a2da780297427cfd1d856.png)

现在，我想回到母库，例如**JSP1**，即**adminPage.jsp**，所以我添加了一个 servlet：

```
/**
 * Servlet implementation class Admin3
 */
@WebServlet("/adminAdds3")
public class Admin3 extends HttpServlet {
    private static final long serialVersionUID = 1L;

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
    {
        request.getRequestDispatcher("/WEB-INF/results/adminPage.jsp").forward(request, response);
    }

} 
```

为了回到**JSP1**，但后来我得到了这个：

![在此处输入图像描述](../Images/1fab6700550b167ec2cc871f2ffa22ba.png)

所以，代替我**原来**的管理员，Jack Reacher，我得到了大卫鲍伊.....

旧管理员未存储。

我怎样才能解决这个问题 ？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:18:45.247

您需要在登录帐户时设置会话变量（已登录的用户的名称和 ID），并且当您需要此 ID 和用户名时，您可以通过访问会话变量来获取它。这肯定会解决您的问题

或者

尝试通过在 jsp2 上将文本框的名称从 firstname 更改为 first_name

# python - 使用正则表达式重复匹配大写姓氏

> ID：11858390
> 
> 赞同：1
> 
> 时间：2012-08-08T05:50:36.070
> 
> 标签：python, regex

我正在尝试将书中的名称与欧洲风格的名称相匹配。OCR 的工作一般，所以姓氏大写这一事实很重要。但是，可以有多个姓氏，例如 Luc ASSELIN DE WILLIENCOURT 或 Marie-Sophie DUFAU-RICHET。

我想出了以下解决方案，但我确信有更好的方法，我想知道是否有人可以做得更好......为了便于阅读，我将正则表达式分成了几行......

```
names = regex.compile("[\p{Lu}][\p{Ll}]+
                     (?:[\p{Pd}][\p{Lu}][\p{Ll}]+ | )
                     (?:[\p{Lu}][\p{Lu}'\p{Pd}]*)
                     (?: [\p{Lu}][\p{Lu}'\p{Pd}]*){0,5}", flag=regex.UNICODE)

ntest = ['Michèle DUBROCARD magistrate', ' Marie-Sara durur Marie-  Sara.Durur@justice.gouv.fr Tél. : 01 70 22 41 71', 
'Jean-Pierre KELCHE, général d\'armée','ÉriC LE CLERCQ DE LANNOY', 'ÉriC LE CLERCQ DE LANNOY, fucker',
 'Éric LE CLERCQ DE LANNOY shlaphead', "john smith proctologist", 'John smith     Proctolog', 'john smith, proctolog', "N...", "GHESTEM", "Bill linebreaker,"
"his honorable Baron VAN BULL and her hc Marie-Eunice DELAGARDE"]

for i in range(0, len(ntest)):
    print(regex.findall(names,ntest[i])) 
```

这产生了我想要的结果，但它非常难看。有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:20:04.847

我不能说我理解你的正则表达式为什么起作用，所以我的第一个建议是使用 re.VERBOSE 标志并稍微记录你的正则表达式（[http://docs.python.org/library/re.html#re .详细](http://docs.python.org/library/re.html#re.VERBOSE)）。

我不知道这是复制粘贴错误，但是当您将正则表达式拆分为多行时，您应该使用三引号。

哦，使用原始字符串 ( `r""" ... """`)。

# webserver - 一次向 2 台服务器发送数据

> ID：11858395
> 
> 赞同：0
> 
> 时间：2012-08-08T05:51:15.230
> 
> 标签：webserver, game-development

假设我有一个用于广播角色在在线游戏中的位置的服务器和一个用于与同一游戏中的一组玩家进行语音聊天的服务器。客户端能否向两台服务器发送数据？他们会连接吗？这行得通吗？会实用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:13:10.110

简短的回答：是的。

长答案：这实际上很常见。例如，您的*浏览器*一直在这样做，使用不同的协议（至少是 HTTP 和 HTTPS）连接到不同的服务器。大多数邮件客户端支持更广泛的协议（POP3、IMAP、SMTP，有时还有 NNTP 及其加密变体），并且可以轻松地并行处理多个服务器。网络游戏客户端在网络协议级别上的工作方式与那些*完全*一样，因此这样做没有什么不寻常或不切实际的。

# jquery - jquery函数的返回值

> ID：11858397
> 
> 赞同：1
> 
> 时间：2012-08-08T05:51:22.287
> 
> 标签：jquery

> **可能重复：**
> [jQuery ajax 返回值](https://stackoverflow.com/questions/4982983/jquery-ajax-return-value)

我有这个 jQuery 脚本：

```
$('#headerSubmit').click(function() {
    var source = $('#header').attr('value');
}); 
```

获取`value`元素的属性并将其存储在`source`变量中。

如何返回`source`变量以在脚本的其余部分中使用？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T05:54:59.447

由于您将`source`在单击后设置变量，因此任何使用该变量的代码都应仅在此类事件之后执行。因此，您应该在其后粘贴您的代码：

```
$('#headerSubmit').click(function() {
    var source = $('#header').attr('value');
    // Rest of the code here
}); 
```

否则，在单击之前不会初始化变量。

**编辑：**请注意所有其他答案都会促使您在全局范围内声明变量。这是没有用的，除非您的代码在单击后执行，因为变量将为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T05:54:30.640

```
var source;
$('#headerSubmit').click(function() {
    source = $('#header').attr('value');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T05:54:37.007

在此单击脚本之外定义 var 源。并像这样使用：

```
var source;
$('#headerSubmit').click(function() {
    source = $('#header').attr('value');
}); 
```

这样，'source' 将具有全局范围，并且以后可以在具有分配值的任何地方使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T05:56:17.447

将“源”声明为全局。

那是..

```
var source;
//your piece of jquery code
$('#headerSubmit').click(function() {
   source = $('#header').attr('value');
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T05:54:00.410

如果您希望在整个脚本中使用源代码，请在函数外部声明它：

```
var source = null;
$('#headerSubmit').click(function() {
    source = $('#header').attr('value');
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T05:54:48.783

您可以返回一个变量

```
 return source; 
```

听起来您可能只是想稍后在脚本中调用该变量。这是范围的问题。如果您取出 var 并声明

```
source = $('#header').attr('value'); 
```

您将能够在脚本的其他部分调用该变量。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-08T05:56:05.623

您使用它的方式是**异步**的。您正在设置在“点击”事件上触发的回调。要将其用于脚本的其余部分，您有两个选择。

1.  使用全局变量。（虽然有时使用它很糟糕）

    ```
    var myGlobalVariable;
    $('#headerSubmit').click(function() {
        var myGlobalVariable = $('#header').attr('value');
    }); 
    ```

2.  在回调中调用需要此值的函数。

    ```
    function myAnotherFunction(val){
         alert("I received" + val + ". I will update my set of"
              +" variables without putting it as global variable");
    }

    $('#headerSubmit').click(function() {
        myAnotherFunction($('#header').attr('value'));
    }); 
    ```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-08T05:56:50.100

```
var source;
$('#headerSubmit').click(function() {
    source = $('#header').attr('value');
   return source;
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-08T05:56:54.710

要在全局范围内声明变量，必须在尝试将其设置在函数中之前对其进行初始化，否则该声明仅适用于局部范围。如果您的范围错误，那么您的参考资料将无效，您可能会面临更大的问题。

在这种情况下，您将无法在脚本中的其他位置引用变量值，因为该变量当前仅存在于您的函数中。

每个[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals)：

> 当您在任何函数之外声明变量时，它被称为全局变量，因为它可用于当前文档中的任何其他代码。在函数中声明变量时，它称为局部变量，因为它仅在该函数中可用。

```
var source;
$('#headerSubmit').click(function() {
    source = $('#header').attr('value');
}); 
```

# android - 我可以在我的应用中接收来自两个或多个 GCM SENDER_ID 的 GCM 消息吗？

> ID：11858398
> 
> 赞同：4
> 
> 时间：2012-08-08T05:51:22.647
> 
> 标签：android, push, google-cloud-messaging

我需要在我的应用程序中接收来自不同发件人的推送通知。它会起作用吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T23:33:47.483

你的问题的答案是*肯定*的！

根据 GCM 的官方文档，您的应用可以接收来自多个发件人的消息（限制为 100 个不同的发件人），并且您的意图代码应该看起来像上面的那样才能正常工作。

```
Intent intent = new Intent(GCMConstants.INTENT_TO_GCM_REGISTRATION);
intent.setPackage(GSF_PACKAGE);
intent.putExtra(GCMConstants.EXTRA_APPLICATION_PENDING_INTENT,
        PendingIntent.getBroadcast(context, 0, new Intent(), 0));
String senderIds = "968350041068,652183961211";
intent.putExtra(GCMConstants.EXTRA_SENDER, senderIds);
ontext.startService(intent); 
```

请随时查看 GCM 页面上关于[多个发件人](http://developer.android.com/guide/google/gcm/adv.html#multi-senders)的官方主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:28:09.803

由于您有 api 密钥和发件人 ID，因此它将起作用。您需要在您的服务器（或服务器）中使用 google 提供的 API 密钥向设备发送消息。

# html - 在iphone中将html文件转换为pdf文件

> ID：11858401
> 
> 赞同：-3
> 
> 时间：2012-08-08T05:51:43.630
> 
> 标签：html, objective-c, ios, ios5, pdf

> **可能重复：**
> [iPhoneSDK 中的 HTML 到 PDF 转换](https://stackoverflow.com/questions/4930499/html-to-pdf-conversion-in-iphonesdk)

我的应用程序中有一个 HTML 文件，但我想将其转换为 PDF 文件。有人可以指出我正确的方向吗？我搜索了很多，但找不到任何有用的...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T06:54:40.723

作为起点，请阅读此处的文档[iOS 绘图和打印指南/生成 PDF 内容](http://developer.apple.com/library/ios/#documentation/2ddrawing/conceptual/drawingprintingios/GeneratingPDF/GeneratingPDF.html#//apple_ref/doc/uid/TP40010156-CH10-SW1) 您还将找到一些示例代码。

# android - Android：写入文件 OnDestroy()

> ID：11858403
> 
> 赞同：0
> 
> 时间：2012-08-08T05:51:53.300
> 
> 标签：android, ondestroy, writefile

这是我目前的情况：
Eclipse
Win7
Samsung SII（用于测试）

我正在编写一个应用程序，它将在启动时从设备上私有存储的文件中读取，然后，我想在`onDestroy()`调用应用程序时写入同一个文件（基本上覆盖）。

我首先尝试用我自己的类扩展应用程序，然后在构造函数中读取和写入该文件并销毁该类，但是，似乎不允许在该类中读取或写入，因为我的应用程序每次都会崩溃开始。所以我想了一会儿，然后辞职在主菜单上做这个，因为这是我唯一不做的活动`"destroy" (or ActivityName.this.finish();)`。但我的程序员大脑希望在应用程序级别而不是活动级别实现这一点。

那么我是否可以从我创建的 Application 类构造函数中的文件中读取文件，并写入 中的文件`onDestroy()`？如果是这样，如何？我的应用程序只是不断崩溃/甚至无法启动......

这是我使用的代码。这有效地读取了一个文件，并将一些字符串存储到全局内存中（请给我“不，不”的意思......全局变量对我非常有用），然后`onDestroy()`在使用全局变量中的值调用时覆盖文件（我知道这一点是因为它在活动级别起作用）：

```
CONSTRUCTOR:
super();

    try 
    {
        String origprefs =",0,1-1";

        File f = new File(this.getFilesDir(),FILENAME);

        if(!f.exists())
        {
            FileOutputStream fos2 = new FileOutputStream(f);
            fos2.write(origprefs.getBytes());
            fos2.close();
        }

        FileInputStream fis;
        fis = openFileInput(FILENAME);
        StringBuffer fileContent = new StringBuffer("");

        byte[] buffer = new byte[1024];
        int length;
        while ((length = fis.read(buffer)) != -1) {
            fileContent.append(new String(buffer));
        }
        fis.close();

        origprefs = fileContent.toString();

        //set our globals
        Username = origprefs.split(",")[0];
        Score = origprefs.split(",")[1];
        Stage = origprefs.split(",")[2];

    } 
    catch (IOException e) 
    {
        throw new RuntimeException("Unable to either Read or Write to Match Two file.");
    }

onDestroy:
if(GameRunning)
    {
        try
        {
            FileOutputStream fis;
                fis = openFileOutput(FILENAME, this.MODE_PRIVATE);
                String fileContent = Username + "," + Score + "," + Stage;
                fis.write(fileContent.getBytes());
                fis.close();
        }
        catch(IOException e)
        {
            throw new RuntimeException("Unable to either Read or Write to Match Two file.");
        }
    } 
```

现在，这是相同的过程，在 MainMenu 类中减去了一些更改以获得正确的上下文。我只是无法理解为什么当我在应用程序级别执行此操作时这会使我的应用程序崩溃？非常感谢您的帮助！

这是我发现的 logcat 条目 logcat 很神秘...

```
08-08 02:03:58.362: E/AndroidRuntime(10360): FATAL EXCEPTION: main
08-08 02:03:58.362: E/AndroidRuntime(10360): java.lang.RuntimeException: Unable to instantiate application maxovrdrv.FirstApp.MatchTwo: java.lang.NullPointerException
08-08 02:03:58.362: E/AndroidRuntime(10360):    at android.app.LoadedApk.makeApplication(LoadedApk.java:466)
08-08 02:03:58.362: E/AndroidRuntime(10360):    at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3268)
08-08 02:03:58.362: E/AndroidRuntime(10360):    at android.app.ActivityThread.access$2200(ActivityThread.java:117)
08-08 02:03:58.362: E/AndroidRuntime(10360):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:973)
08-08 02:03:58.362: E/AndroidRuntime(10360):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-08 02:03:58.362: E/AndroidRuntime(10360):    at android.os.Looper.loop(Looper.java:130)
08-08 02:03:58.362: E/AndroidRuntime(10360):    at android.app.ActivityThread.main(ActivityThread.java:3691)
08-08 02:03:58.362: E/AndroidRuntime(10360):    at java.lang.reflect.Method.invokeNative(Native Method)
08-08 02:03:58.362: E/AndroidRuntime(10360):    at java.lang.reflect.Method.invoke(Method.java:507)
08-08 02:03:58.362: E/AndroidRuntime(10360):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
08-08 02:03:58.362: E/AndroidRuntime(10360):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
08-08 02:03:58.362: E/AndroidRuntime(10360):    at dalvik.system.NativeStart.main(Native Method)
08-08 02:03:58.362: E/AndroidRuntime(10360): Caused by: java.lang.NullPointerException
08-08 02:03:58.362: E/AndroidRuntime(10360):    at android.content.ContextWrapper.getFilesDir(ContextWrapper.java:178)
08-08 02:03:58.362: E/AndroidRuntime(10360):    at maxovrdrv.FirstApp.MatchTwo.<init>(MatchTwo.java:26)
08-08 02:03:58.362: E/AndroidRuntime(10360):    at java.lang.Class.newInstanceImpl(Native Method)
08-08 02:03:58.362: E/AndroidRuntime(10360):    at java.lang.Class.newInstance(Class.java:1409)
08-08 02:03:58.362: E/AndroidRuntime(10360):    at android.app.Instrumentation.newApplication(Instrumentation.java:957)
08-08 02:03:58.362: E/AndroidRuntime(10360):    at android.app.Instrumentation.newApplication(Instrumentation.java:942)
08-08 02:03:58.362: E/AndroidRuntime(10360):    at android.app.LoadedApk.makeApplication(LoadedApk.java:461)
08-08 02:03:58.362: E/AndroidRuntime(10360):    ... 11 more 
```

马特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T06:10:38.770

你应该阅读 onDestroy 的文档。你应该使用 onPause 代替。阅读下文了解更多详情

**不要指望 this(onDestroy()) 方法被称为保存数据的地方！例如，如果一个活动在内容提供者中编辑数据，这些编辑应该在 onPause() 或 onSaveInstanceState(Bundle) 中提交，**

```
protected void onDestroy ()
Since: API Level 1 
```

> > 在销毁活动之前执行任何最终清理。这可能是因为 Activity 正在完成（有人在其上调用了 finish()，或者因为系统正在临时销毁该 Activity 实例以节省空间。您可以使用 isFinishing() 方法区分这两种情况。
> > 
> > 注意：不要指望这个方法被称为保存数据的地方！例如，如果一个活动正在内容提供者中编辑数据，那么这些编辑应该在 onPause() 或 onSaveInstanceState(Bundle) 中提交，而不是在这里。此方法通常用于释放资源，例如与活动相关联的线程，以便被破坏的活动不会在其应用程序的其余部分仍在运行时留下这些东西。在某些情况下，系统会简单地终止 Activity 的宿主进程，而不会在其中调用此方法（或任何其他方法），因此不应使用它来执行打算在进程消失后保留的事情。派生类必须调用该方法的超类实现。如果他们不这样做，将引发异常。

参考链接：- [Android onDestroy](http://developer.android.com/reference/android/app/Activity.html#onDestroy%28%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T06:09:19.327

我认为您对数据存储的选择给您带来的问题超出了它的价值。我不知道有多少情况依赖于即将到来的流程来管理数据流。

通过您的变量名，也许 SharedPreferences 是一个更合适的数据结构？ [http://developer.android.com/reference/android/content/SharedPreferences.html](http://developer.android.com/reference/android/content/SharedPreferences.html)

如果您坚持使用平面文件，那么我认为您仍然应该使用 contentprovider 管理数据存储。

[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

现在 tute 确实使用了 sqlite 支持的内容提供程序。但是无论如何您都可以使用平面文件。

无论如何，应用程序崩溃的原因是与数据流时间不同的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T06:18:25.013

[Pork](https://stackoverflow.com/users/1103704/pork)和[Ankit](https://stackoverflow.com/users/519718/ankit)所说的一切。此外，不要在主 (UI) 线程上执行文件 I/O！除非你坚持大量的信息，否则我认为`SharedPreferences`是要走的路。它非常适合存储重新创建应用程序状态所需的几十个奇数值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T06:34:02.637

[查看此处](http://developer.android.com/reference/android/app/Application.html)的文档，似乎没有`onDestroy`适用于 Application 类的方法，因此这似乎使该想法在那里无法实现。

我不知道您为什么要尝试重新发明轮子，但我会放弃它并使用其他所有人都在使用的标准做法……它们是标准做法是有原因的。:p

# magento - 加载子域时重定向到主域

> ID：11858405
> 
> 赞同：1
> 
> 时间：2012-08-08T05:51:57.170
> 
> 标签：magento, redirect, dns, subdomain

我有一个域及其子域。

在我的主域中有一个 Magento 站点，它的旧版本为 1.4.1.1，所以我在我的服务器中将该站点升级到 1.7.0.2。这意味着我们在客户端的服务器上没有 ssh 登录。我从客户端服务器下载了站点并上传到我的本地服务器。然后我将 Magento 网站升级到最新版本。

然后我在客户端的服务器中创建了子域，并在子域中上传了升级后的 Magento 站点。

但是当我将子域加载为：

```
test.maindomain.com 
```

然后它重定向到主域。

这是什么原因？

如果有任何重定向过程？

这是子域中的 htaccess：

```
############################################
## uncomment these lines for CGI mode
## make sure to specify the correct cgi php binary file name
## it might be /cgi-bin/php-cgi

#    Action php5-cgi /cgi-bin/php5-cgi
#    AddHandler php5-cgi .php

############################################
## GoDaddy specific options

#   Options -MultiViews

## you might also need to add this line to php.ini
##     cgi.fix_pathinfo = 1
## if it still doesn't work, rename php.ini to php5.ini

############################################
## this line is specific for 1and1 hosting

    #AddType x-mapp-php5 .php
    #AddHandler x-mapp-php5 .php

############################################
## default index file

    DirectoryIndex index.php

<IfModule mod_php5.c>

############################################
## adjust memory limit

#    php_value memory_limit 64M
    php_value memory_limit 256M
    php_value max_execution_time 18000

############################################
## disable magic quotes for php request vars

    php_flag magic_quotes_gpc off

############################################
## disable automatic session start
## before autoload was initialized

    php_flag session.auto_start off

############################################
## enable resulting html compression

    #php_flag zlib.output_compression on

###########################################
# disable user agent verification to not break multiple image upload

    php_flag suhosin.session.cryptua off

###########################################
# turn off compatibility with PHP4 when dealing with objects

    php_flag zend.ze1_compatibility_mode Off

</IfModule>

<IfModule mod_security.c>
###########################################
# disable POST processing to not break multiple image upload

    SecFilterEngine Off
    SecFilterScanPOST Off
</IfModule>

<IfModule mod_deflate.c>

############################################
## enable apache served files compression
## http://developer.yahoo.com/performance/rules.html#gzip

    # Insert filter on all content
    ###SetOutputFilter DEFLATE
    # Insert filter on selected content types only
    #AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript

    # Netscape 4.x has some problems...
    #BrowserMatch ^Mozilla/4 gzip-only-text/html

    # Netscape 4.06-4.08 have some more problems
    #BrowserMatch ^Mozilla/4\.0[678] no-gzip

    # MSIE masquerades as Netscape, but it is fine
    #BrowserMatch \bMSIE !no-gzip !gzip-only-text/html

    # Don't compress images
    #SetEnvIfNoCase Request_URI \.(?:gif|jpe?g|png)$ no-gzip dont-vary

    # Make sure proxies don't deliver the wrong content
    #Header append Vary User-Agent env=!dont-vary

</IfModule>

<IfModule mod_ssl.c>

############################################
## make HTTPS env vars available for CGI mode

    SSLOptions StdEnvVars

</IfModule>

<IfModule mod_rewrite.c>

############################################
## enable rewrites

    Options +FollowSymLinks
    RewriteEngine on

############################################
## you can put here your magento root folder
## path relative to web root

    #RewriteBase /magento/

############################################
## uncomment next line to enable light API calls processing

#    RewriteRule ^api/([a-z][0-9a-z_]+)/?$ api.php?type=$1 [QSA,L]

############################################
## rewrite API2 calls to api.php (by now it is REST only)

    RewriteRule ^api/rest api.php?type=rest [QSA,L]

############################################
## workaround for HTTP authorization
## in CGI environment

    RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

############################################
## TRACE and TRACK HTTP methods disabled to prevent XSS attacks

    RewriteCond %{REQUEST_METHOD} ^TRAC[EK]
    RewriteRule .* - [L,R=405]

############################################
## redirect for mobile user agents

    #RewriteCond %{REQUEST_URI} !^/mobiledirectoryhere/.*$
    #RewriteCond %{HTTP_USER_AGENT} "android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile" [NC]
    #RewriteRule ^(.*)$ /mobiledirectoryhere/ [L,R=302]

############################################
## always send 404 on missing files in these folders

    RewriteCond %{REQUEST_URI} !^/(media|skin|js)/

############################################
## never rewrite for existing files, directories and links

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-l

############################################
## rewrite everything else to index.php

    RewriteRule .* index.php [L]

</IfModule>

############################################
## Prevent character encoding issues from server overrides
## If you still have problems, use the second line instead

    AddDefaultCharset Off
    #AddDefaultCharset UTF-8

<IfModule mod_expires.c>

############################################
## Add default Expires header
## http://developer.yahoo.com/performance/rules.html#expires

    ExpiresDefault "access plus 1 year"

</IfModule>

############################################
## By default allow all access

    Order allow,deny
    Allow from all

###########################################
## Deny access to release notes to prevent disclosure of the installed Magento version

    <Files RELEASE_NOTES.txt>
        order allow,deny
        deny from all
    </Files>

############################################
## If running in cluster environment, uncomment this
## http://developer.yahoo.com/performance/rules.html#etags

    #FileETag none 
```

我该如何解决这个问题？

如果有任何解决方案？

**编辑：**

如果我删除了内容`index.php`并替换为`test file now`.

然后我将 url 当作它在浏览器中`test.maindomain.com`显示的那样。`test file now`

内容发生了变化，加载子域后不会进入主域。

那么这里真正的问题是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:04:41.413

这不是子域的问题。您需要一个虚拟主机来监听您的子域并将其放在正确的目录中。

```
<VirtualHost *:80>
    Servername test.maindomain.com
    DocumentRoot /var/www/subdomain
</VirtualHost> 
```

[http://httpd.apache.org/docs/2.2/en/vhosts/](http://httpd.apache.org/docs/2.2/en/vhosts/)
[http://httpd.apache.org/docs/2.2/vhosts/examples.html](http://httpd.apache.org/docs/2.2/vhosts/examples.html)

**编辑：**如果您将被重定向到主页。您可能会编程重定向到旧域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-29T17:15:14.133

重定向可能来自不同的地方，这取决于您如何制作原始项目的副本。对包含所有缓存文件的原始 magento 目录进行完整复制，您应该**清理** `var/cache` **目录**。

`rm -r var/cache/*`在您的子域 magento 目录中应该可以解决问题，或者用您喜欢的其他方式清空它。

如果这没有帮助，您还应该更改**数据库中的 base_url**。这也可以通过多种方式完成，但因此您应该更改`core_config_data`表中的行。命令行方法：

```
update core_config_data set value = 'http://subdomain/' where path = 'web/unsecure/base_url';
update core_config_data set value = 'http://subdomain/' where path = 'web/secure/base_url'; 
```

[用于更改 base_url 的详细说明和其他选项](https://docs.nexcess.net/article/how-to-change-magento-base-urls.html#sthash.z0Crk74D.dpuf)

可能还需要清除浏览器缓存。

# ipad - 如何为不加载图像的 uiimageview 添加 try catch 块？

> ID：11858407
> 
> 赞同：0
> 
> 时间：2012-08-08T05:52:21.857
> 
> 标签：ipad, uiimageview, try-catch, xcode4.4, ios

我正在根据用户从表格视图中选择的内容（表格视图是从在线加载的 plist 填充）从在线服务器（在本例中为 Google 站点）加载图像视图。该代码已经在工作，但我正在尝试为未加载的图像添加警报视图。这是我的表视图控制器。

```
#import "TableViewController.h"
#import "MapViewController.h"

@interface TableViewController ()

@end

@implementation TableViewController
@synthesize trailList;
@synthesize trailView;

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSURL *url = [NSURL URLWithString: @"https://sites.google.com/site/majorprojectgjk/Trails.plist"];
    trailList = [[NSMutableArray alloc] initWithContentsOfURL: url];
    // Do any additional setup after loading the view, typically from a nib.
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [trailList count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellid = @"trailCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier: cellid];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier: cellid];
    }

    cell.textLabel.text = [trailList objectAtIndex: indexPath.row];
    return cell;
}

-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString: @"pushView"])
    {
        NSIndexPath *indexPath = [self.trailView indexPathForSelectedRow];
        MapViewController *mvc = segue.destinationViewController;
        mvc.subjects = [trailList objectAtIndex: indexPath.row];
    }
} 
```

这将是我的地图视图控制器代码。

```
#import "MapViewController.h"

@interface MapViewController ()

@end

@implementation MapViewController
@synthesize map;
@synthesize subjects;

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear: (BOOL)animated];

    NSString *site = @"https://sites.google.com/site/majorprojectgjk/";
    NSLog(@"Display: %@", subjects);
    NSString *mapString = @"Map";
    NSString *png = @".png";
    //NSString *url = [NSString stringWithFormat: @"%@%@%@%@",site, subjects, mapString, png];    

    @try
    {
        NSString *space = subjects;
        if ([space rangeOfString:@" "].location == NSNotFound)
        {
            NSString *url = [NSString stringWithFormat: @"%@%@%@%@",site, subjects, mapString, png];
            map.image = [UIImage imageWithData: [NSData dataWithContentsOfURL: [[NSURL alloc] initWithString: url]]];
            NSLog(@"URL: %@", url);
        }

        else
        {
            NSLog(@"string contains space");
            NSString *removeSpace = [subjects stringByReplacingOccurrencesOfString:@" " withString:@""];
            NSString *url = [NSString stringWithFormat: @"%@%@%@%@",site, removeSpace, mapString, png];
            map.image = [UIImage imageWithData: [NSData dataWithContentsOfURL: [[NSURL alloc] initWithString: url]]];
            NSLog(@"URL %@", url);
        }
    }

    @catch (NSException *ex) {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error!" message:@"The map could not load!" delegate: self cancelButtonTitle:@"Ok" otherButtonTitles: nil];
            [alert show];
    }

} 
```

正如我之前所说，这些代码运行良好。图像从 URL 下载得非常好，数据也从表格视图中解析。我想知道如何使用 @try @catch 块来提醒用户 UIImageView 为空（当 URL 无效且地图尚未加载到服务器时会发生这种情况）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T06:24:20.933

```
`enter code here`@catch(NSException *ex)
{
NSString *str=[ex copy];
//write code for alert
} 
```

# java - 莫雷纳签署了罐子，导致我的罐子出现问题

> ID：11858419
> 
> 赞同：0
> 
> 时间：2012-08-08T05:53:32.807
> 
> 标签：java, security, jar, applet, digital-signature

我使用 Morena API 来使用 Java 扫描仪。然而，Morena jar 使用与我项目的其余部分不同的密钥进行了签名。当我尝试运行我的小程序并给出以下运行时异常时，这会导致问题：

```
"Jar resources in JNLP file are not signed by the same certificate" 
```

我在我的项目中使用 netbeans，那么我怎样才能强制 Morena 使用我的签名而不是它附带的签名呢？

由 netbeans 自动生成的 JNLP 文件：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<jnlp href="launch.jnlp" spec="1.0+">
<information>
    <title>ArFile</title>
    <vendor>Matthew Pigram</vendor>
    <homepage href="http://www.allcarecomputerservices.com"/>
    <description>ArFile is designed to allow users to effectively manage documents through a convenient cloud storage facility</description>
    <description kind="short">ArFile</description>

</information>
<update check="always"/>
<security>
    <all-permissions/>
</security>
<resources>
`<j2se java-vm-args="-Djava.security.policy=applet.policy" version="1.6+"/>
<jar href="ArFile.jar" main="true"/>    
<jar href="lib/commons-codec-1.4.jar"/>
<jar href="lib/jdom.jar"/>
<jar href="lib/security-1.1.jar"/>
<jar href="lib/emcesu.jar"/>
<jar href="lib/commons-io-2.3-javadoc.jar"/>
<jar href="lib/commons-io-2.3-sources.jar"/>
<jar href="lib/commons-io-2.3-test-sources.jar"/>
<jar href="lib/commons-io-2.3-tests.jar"/>
<jar href="lib/commons-io-2.3.jar"/>
<jar href="lib/jodconverter-core-3.0-beta-4.jar"/>
<jar href="lib/juh-3.2.1.jar"/>
<jar href="lib/jurt-3.2.1.jar"/>
<jar href="lib/ridl-3.2.1.jar"/>
<jar href="lib/unoil-3.2.1.jar"/>
<jar href="lib/mail.jar"/>
<jar href="lib/log4j-1.2.16.jar"/>
<jar href="lib/morena.jar"/>
<jar href="lib/morena_windows.jar"/>
</resources>
    <applet-desc height="604" main-class="com.allcare.arfile.ArFileJApplet" name="ArFile" width="756">     
    </applet-desc>
</jnlp>` 
```

还有这个：

```
<?xml version="1.0" encoding="UTF-8"?>
<jnlp spec="1.0+" codebase="${jnlp.codebase.value}">
    <information>
        <title>jnlpcomponent1</title>
        <vendor>JARSIGNI</vendor>
    </information>
    <security>
        <all-permissions/>
    </security>
    <resources>
        <jar href="lib/morena.jar" download="eager"/>
        <jar href="lib/morena_windows.jar" download="eager"/>
    </resources>
    <component-desc/>
</jnlp> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T05:57:15.000

这是 Java Web Start 确保客户端下载的 jar 不受损害的方式。这是一项安全功能。

您可以做的是尝试使用您的证书而不是默认证书对 Morena jar 进行签名。

使用`keytool`并且`jarsigner`您可以在罐子上签名。

编辑：从 Java Web Start 1.5.0 开始，您可以对 jar 进行多重签名，在另一个现有证书链上添加代码签名证书

[http://docs.oracle.com/javase/1.5.0/docs/guide/javaws/developersguide/faq.html#221](http://docs.oracle.com/javase/1.5.0/docs/guide/javaws/developersguide/faq.html#221)

所以你可以用你的签名在 Morena jar 上签名，这将解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T06:11:09.577

这里有两种方法可以解决这个问题：

1.  将 Morena API Jars 移动到 JWS 扩展中。这将是最好的方法，因为它可以声明自己的权限级别，并在其他应用程序中重复使用。
2.  从 Morena 罐子中剥离数字签名并使用您自己的证书对其进行签名。

# git - 使用 Puppet 为 puppet-vcsrepo 管理密钥

> ID：11858420
> 
> 赞同：8
> 
> 时间：2012-08-08T05:53:34.447
> 
> 标签：git, bazaar, private-key, puppet

我正在我的公司设置一些服务器配置，我们有一些内部存储库通过 bzr 运行 ssh，我需要获取这些存储库。我想使用 puppet-vcsrepo 来提取这些内容，我看到它有一种方法可以让我们使用密钥文件来获得我们想要的东西。解决此问题的最佳方法是什么？

我可能会为我们每个人创建一个用户帐户，但是我是否必须将我的私钥作为文件放入 puppet 中，然后将其传输过来？如何管理 puppet 内部的密钥，以便在不使用用户名和密码的情况下签出存储库 ssh？

这是信息的链接：[https ://github.com/puppetlabs/puppetlabs-vcsrepo/blob/master/README.BZR.markdown](https://github.com/puppetlabs/puppetlabs-vcsrepo/blob/master/README.BZR.markdown)

它说用 puppet 管理密钥，但我无法准确找到我需要知道的内容才能正确管理密钥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-26T07:19:25.913

对 BZR 不太了解...会像回答基于 git/github 的问题一样回答

*   如果您基于 github，请使用[部署密钥](https://help.github.com/articles/managing-deploy-keys#deploy-keys)（只读访问，可轻松撤销）而不是开发人员密钥。
*   您可以通过将密钥复制到 ~/.ssh 并配置 ssh 来使用它来管理密钥？

```
 file { '/user/home/.ssh/id_rsa-github-mycompany' :
 ... # access right ....
}

vcsrepo { "/path/to/repo":
  ...
  require => File[ '/user/home/.ssh']
} 您可能还需要调整 .ssh/config 以使用此标识文件并修改 git 存储库的主机名

```
 Host github-mycompany-project
HostName github.com
  User git
  PreferredAuthentications publickey
  IdentityFile ~/.ssh/id_rsa-github-mycompany
  IdentitiesOnly yes 
```

另一种选择是使用 exec 和[git_ssh_wrapper](https://github.com/martinemde/git-ssh-wrapper) gem 而不是 vcsrepo ？

```

# sed - Unix Shell 脚本在子文件夹中的特定文件中查找和替换字符串

> ID：11858426
> 
> 赞同：4
> 
> 时间：2012-08-08T05:53:48.807
> 
> 标签：sed

我想仅在文件夹的子文件夹中存在的 xml 文件中将字符串“解决问题”替换为“选择最佳答案”。我已经编译了一个脚本来帮助我做到这一点，但是有两个问题

1.  它还替换了脚本的内容
2.  它替换了子文件夹的所有文件中的文本（但我只想更改 xml）
3.  如果文本不匹配发生在特定的子文件夹和文件中，我想显示错误消息（最好是文本输出）。

所以你能帮我修改我现有的脚本，这样我就可以解决上述 3 个问题。

我的脚本是：

**查找-type f | xargs sed -i "s/解决问题/选择最佳答案/g"**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-10T17:42:57.310

使用 bash 和 sed：

```
search='Solve the problem'
replace='Choose the best answer'
for file in `find -name '*.xml'`; do
  grep "$search" $file &> /dev/null
  if [ $? -ne 0 ]; then
    echo "Search string not found in $file!"
  else
    sed -i "s/$search/$replace/" $file
  fi  
done 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T05:56:47.953

```
find -type f -name "*.xml" | xargs sed -i "s/Solve the problem/Choose the best answer/g" 
```

不确定我是否理解问题 3。

# capistrano - capistrano 在资产上失败：在 cap deploy:cold 中预编译

> ID：11858427
> 
> 赞同：1
> 
> 时间：2012-08-08T05:53:52.957
> 
> 标签：capistrano

我正在做一个上限部署：冷

使用以下 config/deploy.rb

```
1 require 'bundler/capistrano'
  2 
  3 set :application, "massiveapp"
  4 
  5 set :scm, :git
  6 
  7 set :repository, "git://github.com/deployingrails/massiveapp.git"
  8 
  9 server "localhost", :web, :app, :db, :primary => true
 10 
 11 ssh_options[:port] = 2222
 12 ssh_options[:keys] = "~/.vagrant.d/insecure_private_key"
 13 
 14 set :user, "vagrant"
 15 set :group, "vagrant"
 16 set :deploy_to, "/var/massiveapp"
 17 set :use_sudo, false
 18 
 19 set :deploy_via, :copy
 20 set :copy_strategy, :export
 21 
 22 namespace :deploy do
 23   task :start do ; end
 24   task :stop do ; end
 25   desc "Restart the application"
 26   task :restart, :roles => :app, :except => { :no_release => true } do
 27     run "#{try_sudo} touch #{File.join(current_path,'tmp','restart.txt')}"
 28   end
 29   desc "Copy the database.yml file into the latest release"
 30   task :copy_in_database_yml do
 31     run "cp #{shared_path}/config/database.yml #{latest_release}/config/"
 32   end
 33 end
 34 #before "deploy:copy_in_database_yml"
 35 before "deploy:assets:precompile", "deploy:copy_in_database_yml" 
```

这一切都很好，直到它失败了。

```
* executing "cd /var/massiveapp/releases/20120808053801 && bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile"
    servers: ["localhost"]
    [localhost] executing command
*** [err :: localhost] rake aborted!
*** [err :: localhost] (<unknown>): found character that cannot start any token while scanning for the next token at line 2 column 1
*** [err :: localhost] 
*** [err :: localhost] Tasks: TOP => environment
*** [err :: localhost] (See full trace by running task with --trace)
    command finished in 1196ms
*** [deploy:update_code] rolling back
  * executing "rm -rf /var/massiveapp/releases/20120808053801; true"
    servers: ["localhost"]
    [localhost] executing command
    command finished in 39ms 
```

我只是在学习 capistrano，只是不知道如何调试它来解决它。

任何帮助将非常感激。

轨道 3.2.7 红宝石 1.9.3 capistrano 2.12

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T03:38:07.480

问题是由 database.yml 文件中的制表符引起的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T17:38:06.900

database.yml 文件位于位于`/var/massiveapp/shared/configs/database.yml`.

# mysql - 在aws的ec2实例上部署war和安装mysql的步骤

> ID：11858428
> 
> 赞同：0
> 
> 时间：2012-08-08T05:53:54.563
> 
> 标签：mysql, tomcat, amazon-ec2, amazon-web-services

我已经创建了我的 aws 帐户，并且能够通过 putty 访问 ec2 实例。那么现在如何在这个实例上部署war并安装war将访问的mysql？请任何人都可以给我有关如何进行此操作的步骤吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:19:23.257

[看看 ElasticBeanstalk](http://aws.amazon.com/elasticbeanstalk/)，但要密切注意它的[架构概述。](https://stackoverflow.com/a/11471408/877115)如果没有更多的信息和大量的时间，列出让您的应用程序运行所需的所有步骤将很困难，但这些资源应该让您更接近。如果您有无法找到答案的特定问题（其中许多问题在这个或其他 SE 网站上得到了回答），请随时提问，但请查看[常见问题解答](https://stackoverflow.com/faq)以获取有关构建问题的技巧。

# css - 页脚没有出现在正确的位置

> ID：11858431
> 
> 赞同：0
> 
> 时间：2012-08-08T05:54:10.273
> 
> 标签：css, ruby-on-rails

当我的页面上没有内容时，页脚会上升。我在布局文件中的代码是这样的：

```
<div class="container-fluid">
  <div class="row-fluid">
     <!--<div class="span3">
      <div class="well sidebar-nav">
        <ul class="nav nav-list">
          <li class="nav-header">Sidebar</li>
            <li><%#= link_to "Link1", "/path1"  %></li>
            <li><%#= link_to "Link2", "/path2"  %></li>
            <li><%#= link_to "Link3", "/path3"  %></li>
        </ul>
      </div><!/.well -->
    <!-- </div> -->
    <div class="span9">
      <div id="alert">
          <% flash.each do |key, value| %>
         <%= content_tag :div, :id=>'flash_msg', :class => "alert alert-#{key}" do %>
         <%= value unless value.blank? %>                         
         <a class="close" data-dismiss="alert">×</a>
         <% flash.discard -%> 
       <% end %>
      <% end %>   
      </div>   
      <%= yield %>
    </div>
  </div><!--/row-->
<footer class="footer-fix">
    <p>&copy; <%= Time.now.strftime("%Y") -%> Icicle Technologies Private Limited </p>
</footer>
</div> <!-- /container --> 
```

当我将页脚放在容器流体类之外时，我也会遇到同样的问题。我可以在css中包含什么。有人能帮我吗？对于页脚修复，css 是：

```
.footer-fix{
    text-align: center;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:03:04.330

**使用** **[最小高度](http://www.w3schools.com/cssref/pr_dim_min-height.asp)**属性`which sets the minimum height of an element`..

```
.content-holder //whatever your div is
{
 min-height:500px;
} 
```

**JsFiddle：http:** **[//jsfiddle.net/Cg9YZ/](http://jsfiddle.net/Cg9YZ/)**

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:00:28.443

我认为您应该创建一个页脚作为绝对位置，在任何情况下都不会受到影响。您应该将 css 代码编写为：

```
 .footer-fix
 {
      position:absolute;
      left:0px;
      bottom:0px;
      text-align:center;
      ...
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T07:31:20.180

嘿，有一种叫做粘性页脚的东西。当你用谷歌搜索这个时，你得到的第一个链接是 ryanfait.com。他为同一问题提供了CSS。

结构是这样的：

```
<html>
<head></head>
<body>
<div class="wrapper">Your contents other than footer content go here</div>
<div class="footer">footer content go here</div>
</body> 
```

这将解决您的问题：

```
* {
margin: 0;
}
html, body {
height: 100%;
}
.wrapper {
min-height: 100%;
height: auto !important;
height: 100%;
margin: 0 auto -142px; /* the bottom margin is the negative value of the footer's     height */
}
.footer, .push {
height: 142px; /* .push must be the same height as .footer */
} 
```

# php - Yii 中如何使用 beforeAction 或 slug 麻烦

> ID：11858435
> 
> 赞同：6
> 
> 时间：2012-08-08T05:54:27.340
> 
> 标签：php, yii

绝地武士！

我正在开发一些旧的 Yii 项目，并且必须向它们添加一些功能。Yii 是一个非常合乎逻辑的框架，但它有一些我无法理解的东西。也许我还没有理解 Yii-way。因此，我将逐步描述我的问题。对于不耐烦的人 - 最后简要提问。

**简介：**我想将人类可读的 URL 添加到我的项目中。现在 URL 看起来像：*www.site.com/article/359*
我希望它们看起来像这样：*www.site.com/article/how-to-make-pretty-urls*
非常重要：旧文章必须在旧的可用格式化 URL，以及新的 - 新 URL。

**第 1 步：**首先，我更新了*config/main.php*中的重写规则：

```
'<controller:\w+>/<id:\S+>' => '<controller>/view', 
```

我在文章表中添加了新的*texturl*列。因此，我们将在此处存储新文章*的human-readable-part-of-url*。然后我用*texturl*更新了一篇文章进行测试。

**第 2 步：应用程序在***ArticleController*的*actionView*中显示文章，因此我在此处添加了用于预处理 ID 参数的代码：

```
if (is_numeric($id)) {
    // User try to get /article/359
    $model = $this->loadModel($id); // Article::model()->findByPk($id);
    if ($model->text_url !== null) {
        // If article with ID=359 have text url -> redirect to /article/text-url
        $this->redirect(array('view', 'id' => $model->text_url), true, 301);
    }
} else {
    // User try to get /article/text-url
    $model = Article::model()->findByAttributes(array('text_url' => $id));
    $id = ($model !== null) ? $model->id : null ;
} 
```

然后开始遗留代码：

```
$model = $this->loadModel($id); // Load article by numeric ID
// etc 
```

它完美地**工作**！但...

**第 3 步：**但是我们有很多带有 ID 参数的动作！我们必须做什么？使用该代码更新所有操作？我觉得很丑 我找到了[CController::beforeAction](http://www.yiiframework.com/doc/api/1.1/CController#beforeAction-detail)方法。看起来挺好的！所以我声明了 beforeAction 并在那里进行了 ID 预处理：

```
protected function beforeAction($action) {
    $actionToRun = $action->getId(); 
    $id = Yii::app()->getRequest()->getQuery('id');
    if (is_numeric($id)) {
        $model = $this->loadModel($id);
        if ($model->text_url !== null) {
            $this->redirect(array('view', 'id' => $model->text_url), true, 301);
        } 
    } else {
        $model = Article::model()->findByAttributes(array('text_url' => $id));
        $id = ($model !== null) ? $model->id : null ;
    }
    return parent::beforeAction($action->runWithParams(array('id' => $id)));
} 
```

是的，它适用于两种 URL 格式，但它执行*actionView* **TWICE**并显示页面两次！我能用这个做什么？我完全糊涂了。我是否选择了正确的方法来解决我的问题？

**简而言之：**我可以在执行任何操作之前处理 ID（GET 参数），然后只使用修改的 ID 参数运行请求的操作（一次！）吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-08T06:28:10.770

最后一行应该是：

```
return parent::beforeAction($action); 
```

还要问你我没有得到你的步骤：3。

正如你所说，你有很多控制器，你不需要在每个文件中编写代码，所以你正在使用 beforeAction：但是你只有 text_url 与所有控制器的文章相关？

```
$model = Article::model()->findByAttributes(array('text_url' => $id)); 
```

===== 更新答案 ======

我已经改变了这个功能，现在检查。

如果 $id 不是数字，那么我们将使用模型找到它的 id 并设置 $_GET['id']，因此在进一步的控制器中它将使用该数字 id。

```
protected function beforeAction($action) {          
    $id = Yii::app()->getRequest()->getQuery('id');
    if(!is_numeric($id)) // $id = how-to-make-pretty-urls
    {
        $model = Article::model()->findByAttributes(array('text_url' => $id));
        $_GET['id'] = $model->id ; 
    }
    return parent::beforeAction($action);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T07:23:27.390

抱歉，我没有仔细阅读，但你考虑过使用[这个扩展](http://www.yiiframework.com/extension/pcsimpleslugbehavior/)吗？

# concrete5 - 具体5个搜索结果页面url

> ID：11858443
> 
> 赞同：0
> 
> 时间：2012-08-08T05:55:01.020
> 
> 标签：concrete5

具体 5 搜索结果页面 url 包含一些参数。如何删除该参数并使 url 用户友好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:40:12.487

Short answer: it's probably not worth the trouble.

Long answer... I'm guessing you see three query parameters when using the search block:

1.  query
2.  search_paths[]
3.  submit

The first parameter is required to make the searches work, but the other two can be dropped. When I build concrete5 themes, I usually "hard-code" the html for the search form, so that I can control which parameters are sent (basically, don't provide a "name" to the submit button, and don't include a "search_paths" hidden field).

The "query" parameter, though, is not going to be easy to get rid of. The problem is that for a search, you're *supposed* to have a parameter like that in the URL. You could work around this by using javascript -- when the search form is submitted, use some jquery to rewrite the request so it puts that parameter at the end of the URL (for example, [http://example.com/search?query=test](http://example.com/search?query=test) becomes [http://example.com/search/test](http://example.com/search/test)). Then, as @tuxtimo suggests, you add a rewrite rule to your .htaccess file to take that last piece of the URL and treat it as the ?query parameter that the system expects. But this won't work if the user doesn't have javascript enabled (and hence probably not for Googlebot either, which means that this won't really serve you any SEO purpose -- which I further imagine is the real reason you're asking this question to begin with).

Also, you will run into a lot of trouble if you ever add another page *under* the page that you show the search results on (because you have the rewrite rule that treats everything after the top-level search page path as a search parameter -- so you can never actually reach an address that exists below that path).

So I'd just make a nice clean search form that only sends the ?query parameter and leave it at that -- I don't think those are really that much less user-friendly than /search-term would be.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:00:15.557

在 apache 服务器上，我建议您使用 mod_rewrite 模块来使用 RewriteEngine。使用此模块，您可以为某些内部 URL 指定别名（当然也可以使用参数）。您也可以为此使用 RegEx。

[维基百科上的重写引擎](http://en.wikipedia.org/wiki/Rewrite_engine)

[mod_rewrite 教程](http://net.tutsplus.com/tutorials/other/a-deeper-look-at-mod_rewrite-for-apache/)

# ant - Ant：带有proc的javac：仅来自Ant？

> ID：11858444
> 
> 赞同：3
> 
> 时间：2012-08-08T05:55:11.803
> 
> 标签：ant, javac, annotation-processing

有没有办法强制`javac`任务只调用注释处理，而不进行编译。`-proc:only`根据[javac 文档](http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/javac.html)，javac 选项应该强制执行此类行为。

但是下面的 ant buildfile 片段：

```
<target name="apt">
    <javac srcdir="src" destdir="bin" includeantruntime="false">
        <compilerarg value="-proc:only"/>
    </javac>
</target> 
```

无论如何编译项目。我尝试了其他`<compilerarg>`标签版本（例如`line`，而不是`value`），但没有任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-13T00:27:02.870

避免指定任务的“destdir”属性，或使用空目录作为类文件的目标。Ant“javac”任务然后将在基目录（如果未设置“destdir”）或空目录中查找类文件。因为它不会在那里找到类文件，所以它不会从编译中排除可能是最新的源代码，并对来自“srcdir”属性中指定的目录的源代码执行“javac”。

因此，您的代码将如下所示：

```
<target name="apt">
    <javac srcdir="src" includeantruntime="false">
        <compilerarg value="-proc:only" />
    </javac>
</target> 
```

或者，如果您使用空目录方法，如下所示：

```
<target name="apt">
    <mkdir dir="empty" />
    <javac srcdir="src" destdir="empty" includeantruntime="false">
        <compilerarg value="-proc:only" />
    </javac>
</target> 
```

第二种方法稍微复杂一些，但更干净一些。通常，您的项目将有一个输出目录，您可以在其中放置已编译的类和打包的 jar，因此在其中添加一个额外的空目录不会造成伤害。从 Ant 版本 1.9.4 开始，我没有找到任何其他方法可以独立于编译从 Ant 进行注释处理，即使“javac”任务中的简单“force”属性可以解决这个问题。

# asp.net - 如何将excel中列的输出格式化为1.234,56而不是asp.net中的1,234.56

> ID：11858450
> 
> 赞同：0
> 
> 时间：2012-08-08T05:55:59.333
> 
> 标签：asp.net, export-to-excel

我正在将数据集中的值导出到 Excel。我想为国际用户更改所有货币值的格式。前 - 美国 - 1,234,567.00 但欧洲 - 1.234.567,00。

请建议我怎样才能做到这一点。我在数据网格中设置 DataFormatString 来设置它。

问候五。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:31:06.243

我将用户的文化更改为欧洲格式的 DE，然后导出文件。对 en-US 和 de-DE 文化使用了 {0:n2} 列格式，并且有效。

# python - 验证 os.remove 是否有效

> ID：11858454
> 
> 赞同：4
> 
> 时间：2012-08-08T05:56:27.067
> 
> 标签：python

要[删除 Python 中的文件](https://stackoverflow.com/questions/1995373/deleting-files-in-python)，我使用的是[os.remove](http://docs.python.org/library/os#os.remove)。

[除了OSError](http://docs.python.org/library/exceptions.html#exceptions.OSError)之外，文档（链接）没有给出任何异常的指示：

> 如果 path 是目录，则会引发 OSError

如何检查异常，例如`FileNotFound`,`PermissionToDeleteDenied`等？或者这种错误检查不是由`os.remove`函数完成的（文档似乎`os.remove`并`os.unlink`没有说）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-08T06:00:22.483

`OSError`exceptions 有一个`errno`属性，您可以将其与`errno`模块一起使用，以获取有关发生哪种类型的操作系统错误的更多信息。请参阅[OSError 的文档](http://docs.python.org/library/exceptions.html#exceptions.OSError)。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-08-08T06:06:09.580

使用此代码：

```
import os
if(os.path.exists("c:/randomDirectory/random.txt"):
    # some random code 
```

如果 random.txt 存在，它会运行随机代码。

# c# - c 语言中的加密。和 C# 中的解密

> ID：11858456
> 
> 赞同：1
> 
> 时间：2012-08-08T05:56:37.273
> 
> 标签：c#, c, encryption-symmetric

我在我的服务器端代码中使用了 Rijndael（加密算法），它是用 C 语言编写的。但是我的客户端是用 C# 编写的，C# 提供了自己的 Rijndael 类来加密和解密。

在客户端，我使用相同的密码生成密钥，但客户端应用程序无法解密它。我想在 C 中加密文件并在 .NET (C#) 中解密该文件。

服务器代码：[http ://www.efgh.com/software/rijndael.txt](http://www.efgh.com/software/rijndael.txt)

客户代码：

```
 public static void Encrypt()
    {

        string password = @"4c696e6775614e6578742431302a4c6f63616c697a6174696f6e2a3949505f3030372a"; // Your Key Here
            /*UnicodeEncoding UE = new UnicodeEncoding();
            byte[] key = UE.GetBytes(password);*/
            Rfc2898DeriveBytes  pdb = new Rfc2898DeriveBytes (password, new byte[] { 0x26, 0xdc, 0xff, 0x00, 0xad, 0xed, 0x7a, 0xee, 0xc5, 0xfe, 0x07, 0xaf, 0x4d, 0x08, 0x22, 0x3c });

            string cryptFile = @"F:\Encoding and Decoding\ReadMe_Encrypted.txt";
            FileStream fsCrypt = new FileStream(cryptFile, FileMode.Create);

            RijndaelManaged RMCrypto = new RijndaelManaged();
            RMCrypto.KeySize = 256;
            RMCrypto.BlockSize = 256;               
            byte[] key = pdb.GetBytes(RMCrypto.KeySize / 8);
            byte[] iv = pdb.GetBytes(RMCrypto.BlockSize / 8);  
            CryptoStream cs = new CryptoStream(fsCrypt,
                RMCrypto.CreateEncryptor(key, iv),
                CryptoStreamMode.Write);

            FileStream fsIn = new FileStream(@"F:\Encoding and Decoding\ReadMe.txt", FileMode.Open);

            int data;
            while ((data = fsIn.ReadByte()) != -1)
                cs.WriteByte((byte)data);

            fsIn.Close();
            cs.Close();
            fsCrypt.Close();

    }
    public static void Decrypt()
    {
        string password = @"4c696e6775614e6578742431302a4c6f63616c697a6174696f6e2a3949505f3030372a"; // Your Key Here

       /* UnicodeEncoding UE = new UnicodeEncoding();
        byte[] key = UE.GetBytes(password);*/
       // PasswordDeriveBytes pdb = new PasswordDeriveBytes(password, new byte[] { 0x26, 0xdc, 0xff, 0x00, 0xad, 0xed, 0x7a, 0xee, 0xc5, 0xfe, 0x07, 0xaf, 0x4d, 0x08, 0x22, 0x3c });
        Rfc2898DeriveBytes pdb = new Rfc2898DeriveBytes(password, new byte[] { 0x26, 0xdc, 0xff, 0x00, 0xad, 0xed, 0x7a, 0xee, 0xc5, 0xfe, 0x07, 0xaf, 0x4d, 0x08, 0x22, 0x3c });

        FileStream fsCrypt = new FileStream(@"F:\Encoding and Decoding\ReadMe_Encrypted.txt", FileMode.Open);

        RijndaelManaged RMCrypto = new RijndaelManaged();
        RMCrypto.KeySize = 256;
        RMCrypto.BlockSize = 256;
        byte[] key = pdb.GetBytes(RMCrypto.KeySize / 8);
        byte[] iv = pdb.GetBytes(RMCrypto.BlockSize /8);  
        CryptoStream cs = new CryptoStream(fsCrypt, RMCrypto.CreateDecryptor(key, iv), CryptoStreamMode.Read);
     //   CryptoStream cs = new CryptoStream(fsCrypt, RMCrypto.CreateDecryptor(), CryptoStreamMode.Read);

        FileStream fsOut = new FileStream(@"F:\Encoding and Decoding\ReadMe_Decrypted.txt", FileMode.Create);

        int data;
        while ((data = cs.ReadByte()) != -1)
            fsOut.WriteByte((byte)data);

        fsOut.Close();
        cs.Close();
        fsCrypt.Close();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:13:16.187

在 C# 代码中，您`Rfc2898DeriveBytes`用于将密码字符串转换为 256 位密钥（实际上，这实际上是使用 SHA-1 对密码进行哈希处理），而在 C 代码中，您直接使用密钥。您可能想修改 C# 代码以直接使用密钥（对我来说，它看起来像一个 256 位密钥，而不是 ASCII 密码）。

以下内容就足够了：

```
byte[] key = {0x4c, 0x69, 0x6e, 0x67, ...}; 
```

您还需要修改 C 程序以使用正确的二进制密钥，而不是在命令行上使用一个。您可以使用以下内容：

```
unsigned char key[KEYLENGTH(KEYBITS)] = {0x4c, 0x69, 0x6e, 0x67, ...}; 
```

我也不确定您是否使用相同的模式（[http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation)）。我认为 C# 代码可能使用 CBC，而 C 代码使用 ECB。我建议这样做，因为 C# 代码中有一个 iv（从密码生成），但 C 代码中没有。

您也可以尝试找到一个可以从 C 和 C# 中使用的库，然后改用它，例如 openssl。

# jquery - jQuery 提醒 onclick 元素的孩子？

> ID：11858458
> 
> 赞同：13
> 
> 时间：2012-08-08T05:56:41.777
> 
> 标签：jquery

我正在使用此代码在某个元素上显示警报：

```
$("#resultsBox").click(function (event) {
    console.log('a');
    }); 
```

我只想在您单击“#resultsBox”内的“li”元素时显示警报。

我正在尝试这样做：

```
$("#resultsBox li").click(function (event) {
    console.log('a');
    }); 
```

这是元素的#resultsBox 结构：

```
<div id="resultsBox">
  <ul>
    <li></li>
    <li></li>
  </ul>
</div> 
```

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-08T06:07:12.433

当您绑定一个事件处理程序时，`.click()`它适用于当时与您的选择器匹配的任何元素*，*而不是后来动态添加的元素。

鉴于您的 div 被称为“resultsBox”，假设您实际上是在动态添加内容以显示其他操作的结果似乎是合理的，在这种情况下您需要使用委托事件处理程序：

```
$("#resultsBox").on("click", "li", function (event) {
    console.log('a');
}); 
```

[`.on()`该方法](http://api.jquery.com/on/)的这种语法将处理程序绑定到“#resultsBox”，但是当点击发生时，jQuery 检查它是否在与第二个参数中的“li”选择器匹配的子元素上——如果是，它会调用你的函数，否则不会.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-08T06:01:17.977

像这样的东西应该工作

```
$("#resultsBox").find("li").click(function(){
  alert("You clicked on li " + $(this).text());
}); 
```

现在应该可以工作了：http: [//jsbin.com/ocejar/2/edit](http://jsbin.com/ocejar/2/edit)

但是无论如何，您上面使用的示例也`$("#resultsBox li")`应该可以正常工作。见[这里](http://jsbin.com/ocejar/4/edit)。但是，就性能而言，使用`$("#resultsBox").find("li")`应该会[快一点](http://www.slideshare.net/AddyOsmani/jquery-proven-performance-tips-tricks)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T06:06:15.730

您拥有的代码应该可以正常工作：http: [//jsfiddle.net/GxCCb/](http://jsfiddle.net/GxCCb/)

请务必注意，在评估代码时，您尝试将事件处理程序附加到的元素必须存在。如果稍后添加，则必须使用[`on()`](http://api.jquery.com/on)(v1.7+) 或[`delegate()`](http://api.jquery.com/delegate)(< 1.7)，用于事件委托，并允许稍后添加元素时引用。

使用**on()**：

```
$("#resultsBox").on('click', 'li', function (event) {
    alert(this.innerHTML);
    }); 
```

演示：http: [//jsfiddle.net/7Lz2Y/](http://jsfiddle.net/7Lz2Y/)

使用**委托（）**：

```
$("#resultsBox").delegate('li', 'click', function (event) {
    alert(this.innerHTML);
    }); 
```

演示：http: [//jsfiddle.net/XwYs5/](http://jsfiddle.net/XwYs5/)

但是，还有许多其他方法可以为先前存在的元素附加事件处理程序：

```
$("#resultsBox").find('li').click(function (event) {
    alert(this.innerHTML);
    }); 
```

演示：http: [//jsfiddle.net/74Q7p/](http://jsfiddle.net/74Q7p/)

```
$("#resultsBox ul > li").click(function (event) {
    alert(this.innerHTML);
    }); 
```

演示：http: [//jsfiddle.net/a28U5/](http://jsfiddle.net/a28U5/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T06:06:48.523

这应该有效。

```
$("#resultsBox ul li").click(function (event) {
    console.log('a');
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-08T06:10:19.580

```
$("#resultsBox").click(function (event) {
    if(event.target.tagName.toLowerCase() == "li"){
         console.log('a');
    }
}); 
```

这将适用于动态添加的 li 元素。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T05:58:23.360

问题编辑后更新：

```
<div id="resultsBox">
  <ul id="myList">
    <li></li>
    <li></li>
  </ul>
</div>

$("#myList > li").click(function (event) {

        console.log('a');

        }); 
```

[演示](http://jsfiddle.net/sX2BF/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-08T06:05:14.920

```
$("#resultsBox").find('li').click(function (event) {
    alert($(this).text());
    }); 
```

# ios - 什么iOS框架包含CGImageRelease？

> ID：11858462
> 
> 赞同：1
> 
> 时间：2012-08-08T05:56:50.490
> 
> 标签：ios

什么iOS框架包含CGImageRelease？

[文档](http://developer.apple.com/library/ios/#DOCUMENTATION/GraphicsImaging/Reference/CGImage/Reference/reference.html)说它在 ApplicationFramework 中，但我认为这是一个 OSX 框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T05:56:50.490

它在 QuartzCore 中。`#import <QuartzCore/QuartzCore.h>`刚想问，就知道了。

# python - 使用 Python 2.7 读取文件并将其存储在 App Engine 上

> ID：11858465
> 
> 赞同：1
> 
> 时间：2012-08-08T05:57:05.827
> 
> 标签：python, google-app-engine, memcached

我需要在 Google App Engine (Python 2.7) 上读取一个 5Mb 的文件并经常使用它。

在 GAE 中读取文件并不难：[Read a file on App Engine with Python?](https://stackoverflow.com/questions/2630205/read-a-file-on-app-engine-with-python)

困难的部分是将它存储在某个地方，以便我可以**尽可能快地**经常访问它。它是 5MB，因此超过了 1MB 数据存储项目的限制。

我考虑使用 Blobstore，但我担心它不够快。读取 Blobstore 是否比读取文件更快？

我正在考虑将整个文件放入 memcache 中。是否可以？内存缓存是否足以存储 5MB 的文件？

就像在计算机上一样，我需要将此文件放在内存而不是硬盘中。

有什么建议么？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:34:49.140

如果你的文件没有改变，那么你可以简单地将它放在你的项目目录中，并将它作为一个[静态文件](https://developers.google.com/appengine/docs/python/gettingstarted/staticfiles)。

现在开始提问：

1.  Blobstore 将足够快，因为 GAE 上的所有请求（blobstore 或用户代码）都通过[透明缓存](http://davepeck.org/2011/10/25/a-word-on-app-engine-caching/)。`Cache-control`您可以简单地在 blobstore 响应上设置适当的标头以将其缓存。

2.  Memcache[最大存储值为 1Mb](https://developers.google.com/appengine/docs/java/memcache/overview#Quotas_and_Limits)。此外，memcache 中的数据可以随时消失，因此无论如何您都需要将数据存储在永久存储中。此外，我怀疑它会更快，因为您的前端实例必须从 Memcache 获取数据然后提供它，而 Blobstore 服务的工作方式有点不同（通过拦截响应和在正文中插入数据）。

3.  恕我直言，如果通过透明缓存提供数据，则最快。

此外，如果您想提供图像，那么您可能需要使用图像服务，因为它似乎比[Blobstore 更快](http://www.listry.com/blog/2010/08/app-engines-high-performance-image)。

# python - 两个熊猫列的字符串连接

> ID：11858472
> 
> 赞同：115
> 
> 时间：2012-08-08T05:57:33.220
> 
> 标签：python, string, pandas, numpy, dataframe

我有以下内容`DataFrame`：

```
from pandas import *
df = DataFrame({'foo':['a','b','c'], 'bar':[1, 2, 3]}) 
```

它看起来像这样：

```
 bar foo
0    1   a
1    2   b
2    3   c 
```

现在我想要类似的东西：

```
 bar
0    1 is a
1    2 is b
2    3 is c 
```

我怎样才能做到这一点？我尝试了以下方法：

```
df['foo'] = '%s is %s' % (df['bar'], df['foo']) 
```

但它给了我一个错误的结果：

```
>>>print df.ix[0]

bar                                                    a
foo    0    a
1    b
2    c
Name: bar is 0    1
1    2
2
Name: 0 
```

很抱歉提出一个愚蠢的问题，但是这个[熊猫：在 DataFrame](https://stackoverflow.com/questions/10972410/pandas-combine-two-columns-in-a-dataframe)中组合两列对我没有帮助。

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2012-08-08T06:03:51.577

```
df['bar'] = df.bar.map(str) + " is " + df.foo 
```

* * *

## 回答 #2

> 赞同：117
> 
> 时间：2019-01-21T22:23:14.647

这个问题已经得到了回答，但我相信将一些以前没有讨论过的有用方法混在一起，并比较迄今为止提出的所有方法在性能方面是很好的。

以下是针对此问题的一些有用的解决方案，按性能递增的顺序排列。

* * *

### **[`DataFrame.agg`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.agg.html)**

这是一种[`str.format`](https://pyformat.info)基于简单的方法。

```
df['baz'] = df.agg('{0[bar]} is {0[foo]}'.format, axis=1)
df
  foo  bar     baz
0   a    1  1 is a
1   b    2  2 is b
2   c    3  3 is c 
```

您还可以在此处使用 f 字符串格式：

```
df['baz'] = df.agg(lambda x: f"{x['bar']} is {x['foo']}", axis=1)
df
  foo  bar     baz
0   a    1  1 is a
1   b    2  2 is b
2   c    3  3 is c 
```

* * *

### **[`char.array`](https://docs.scipy.org/doc/numpy-1.15.1/reference/generated/numpy.chararray.html)- 基于连接**

将列转换为连接为`chararrays`，然后将它们相加。

```
a = np.char.array(df['bar'].values)
b = np.char.array(df['foo'].values)

df['baz'] = (a + b' is ' + b).astype(str)
df
  foo  bar     baz
0   a    1  1 is a
1   b    2  2 is b
2   c    3  3 is c 
```

* * *

### **[列表理解](https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions)与[`zip`](https://docs.python.org/3/library/functions.html#zip)**

我不能夸大熊猫中的列表理解被低估的程度。

```
df['baz'] = [str(x) + ' is ' + y for x, y in zip(df['bar'], df['foo'])] 
```

或者，使用`str.join`to concat （也将更好地扩展）：

```
df['baz'] = [
    ' '.join([str(x), 'is', y]) for x, y in zip(df['bar'], df['foo'])] 
```

```
df
  foo  bar     baz
0   a    1  1 is a
1   b    2  2 is b
2   c    3  3 is c 
```

列表推导在字符串操作方面表现出色，因为字符串操作本质上很难向量化，而且大多数 pandas “向量化”函数基本上都是循环的包装器。我在[For loops with pandas - 我什么时候应该关心？](https://stackoverflow.com/questions/54028199/for-loops-with-pandas-when-should-i-care). 一般来说，如果您不必担心索引对齐，请在处理字符串和正则表达式操作时使用列表推导式。

默认情况下，上面的列表 comp 不处理 NaN。但是，如果您需要处理它，您总是可以编写一个包装 try-except 的函数。

```
def try_concat(x, y):
    try:
        return str(x) + ' is ' + y
    except (ValueError, TypeError):
        return np.nan

df['baz'] = [try_concat(x, y) for x, y in zip(df['bar'], df['foo'])] 
```

* * *

### **`perfplot`性能测量**

[![在此处输入图像描述](../Images/37a57daf3837e1507672de5941f9d577.png)](https://i.stack.imgur.com/zVCLi.png)

使用[perfplot](https://github.com/nschloe/perfplot)生成的图表。这是[完整的代码清单](https://gist.github.com/Coldsp33d/f261adea57c70be1ba16caba15daffe4)。

**功能**

> ```
> def brenbarn(df):
>     return df.assign(baz=df.bar.map(str) + " is " + df.foo)
> 
> def danielvelkov(df):
>     return df.assign(baz=df.apply(
>         lambda x:'%s is %s' % (x['bar'],x['foo']),axis=1))
> 
> def chrimuelle(df):
>     return df.assign(
>         baz=df['bar'].astype(str).str.cat(df['foo'].values, sep=' is '))
> 
> def vladimiryashin(df):
>     return df.assign(baz=df.astype(str).apply(lambda x: ' is '.join(x), axis=1))
> 
> def erickfis(df):
>     return df.assign(
>         baz=df.apply(lambda x: f"{x['bar']} is {x['foo']}", axis=1))
> 
> def cs1_format(df):
>     return df.assign(baz=df.agg('{0[bar]} is {0[foo]}'.format, axis=1))
> 
> def cs1_fstrings(df):
>     return df.assign(baz=df.agg(lambda x: f"{x['bar']} is {x['foo']}", axis=1))
> 
> def cs2(df):
>     a = np.char.array(df['bar'].values)
>     b = np.char.array(df['foo'].values)
> 
>     return df.assign(baz=(a + b' is ' + b).astype(str))
> 
> def cs3(df):
>     return df.assign(
>         baz=[str(x) + ' is ' + y for x, y in zip(df['bar'], df['foo'])]) 
> ```

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2012-08-08T23:15:47.073

您的代码中的问题是您希望在每一行上应用该操作。您编写它的方式虽然采用了整个 'bar' 和 'foo' 列，将它们转换为字符串并返回一个大字符串。你可以这样写：

```
df.apply(lambda x:'%s is %s' % (x['bar'],x['foo']),axis=1) 
```

它比其他答案更长，但更通用（可用于非字符串的值）。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-03-28T17:56:36.183

你也可以使用

```
df['bar'] = df['bar'].str.cat(df['foo'].values.astype(str), sep=' is ') 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2017-04-29T10:56:05.710

```
df.astype(str).apply(lambda x: ' is '.join(x), axis=1)

0    1 is a
1    2 is b
2    3 is c
dtype: object 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2020-05-09T01:26:51.897

`series.str.cat`是解决此问题的最灵活方法：

为了 `df = pd.DataFrame({'foo':['a','b','c'], 'bar':[1, 2, 3]})`

```
df.foo.str.cat(df.bar.astype(str), sep=' is ')

>>>  0    a is 1
     1    b is 2
     2    c is 3
     Name: foo, dtype: object 
```

或者

```
df.bar.astype(str).str.cat(df.foo, sep=' is ')

>>>  0    1 is a
     1    2 is b
     2    3 is c
     Name: bar, dtype: object 
```

与`.join()`（用于连接单个系列中包含的列表）不同，此方法用于将 2 个系列连接在一起。它还允许您根据需要忽略或替换`NaN`值。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-10-16T18:29:55.707

@DanielVelkov 答案是正确的，但使用字符串文字更快：

```
# Daniel's
%timeit df.apply(lambda x:'%s is %s' % (x['bar'],x['foo']),axis=1)
## 963 µs ± 157 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)

# String literals - python 3
%timeit df.apply(lambda x: f"{x['bar']} is {x['foo']}", axis=1)
## 849 µs ± 4.28 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-19T04:56:04.330

我认为任意数量的列最简洁的解决方案是[这个答案](https://stackoverflow.com/a/43694761/1397061)的简短版本：

`df.astype(str).apply(' is '.join, axis=1)`

您可以使用 刮掉另外两个字符`df.agg()`，但速度较慢：

`df.astype(str).agg(' is '.join, axis=1)`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-02-03T15:14:16.273

我遇到了一个特殊情况，我的数据框中有 10^11 行，在这种情况下，建议的解决方案都不合适。我使用了类别，当唯一字符串的数量不太大时，这在所有情况下都可以正常工作。这很容易在带有 XxY 和因素的 R 软件中完成，但我在 python 中找不到任何其他方法（我是 python 新手）。如果有人知道实施此操作的地方，我将很高兴知道。

```
def Create_Interaction_var(df,Varnames):
    '''
    :df data frame
    :list of 2 column names, say "X" and "Y". 
    The two columns should be strings or categories
    convert strings columns to categories
    Add a column with the "interaction of X and Y" : X x Y, with name 
    "Interaction-X_Y"
    '''
    df.loc[:, Varnames[0]] = df.loc[:, Varnames[0]].astype("category")
    df.loc[:, Varnames[1]] = df.loc[:, Varnames[1]].astype("category")
    CatVar = "Interaction-" + "-".join(Varnames)
    Var0Levels = pd.DataFrame(enumerate(df.loc[:,Varnames[0]].cat.categories)).rename(columns={0 : "code0",1 : "name0"})
    Var1Levels = pd.DataFrame(enumerate(df.loc[:,Varnames[1]].cat.categories)).rename(columns={0 : "code1",1 : "name1"})
    NbLevels=len(Var0Levels)

    names = pd.DataFrame(list(itertools.product(dict(enumerate(df.loc[:,Varnames[0]].cat.categories)),
                                                dict(enumerate(df.loc[:,Varnames[1]].cat.categories)))),
                         columns=['code0', 'code1']).merge(Var0Levels,on="code0").merge(Var1Levels,on="code1")
    names=names.assign(Interaction=[str(x) + '_' + y for x, y in zip(names["name0"], names["name1"])])
    names["code01"]=names["code0"] + NbLevels*names["code1"]
    df.loc[:,CatVar]=df.loc[:,Varnames[0]].cat.codes+NbLevels*df.loc[:,Varnames[1]].cat.codes
    df.loc[:, CatVar]=  df[[CatVar]].replace(names.set_index("code01")[["Interaction"]].to_dict()['Interaction'])[CatVar]
    df.loc[:, CatVar] = df.loc[:, CatVar].astype("category")
    return df 
```

# iphone - 在 UIWebView 中指定 HTTP 引用

> ID：11858473
> 
> 赞同：1
> 
> 时间：2012-08-08T05:57:38.990
> 
> 标签：iphone, objective-c, ipad, uiwebview, http-referer

我们如何在嵌入式 UIWebView 中设置 HTTP 引用？

我经历了[这个](https://stackoverflow.com/questions/7913305/specifying-http-referer-in-embedded-uiwebview)，但仍然没有成功。

**1.**在`viewDidLoad`，我写了这段代码，

```
[objWebView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"MY_URL"]]]; 
```

**这是我的代码：**

```
- (BOOL) webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType) navigationType 
{
    NSDictionary *headers = [request allHTTPHeaderFields];
    BOOL hasReferer = [headers objectForKey:@"Referer"]!=nil;
    if (hasReferer) {
        // .. is this my referer?
        return YES;
    } else {
        // relaunch with a modified request
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
            dispatch_async(dispatch_get_main_queue(), ^{
                NSURL *url = [request URL];
                NSMutableURLRequest* request = [NSMutableURLRequest requestWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];
                [request setHTTPMethod:@"GET"];
                [request setValue:@"Referer link" forHTTPHeaderField:@"Referer"];
                [objWebView loadRequest:request];
            });
        });
        return NO;
    }
} 
```

**2.**我也试过这个`viewDidLoad`

```
NSMutableURLRequest* request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"MY_URL"]];
[request setValue:@"Referel URL" forHTTPHeaderField:@"Referer"];
[objWebView loadRequest:request]; 
```

但是还没有成功。

请帮我解决这个问题或告诉我这段代码有什么问题吗？

希望我清楚地提出问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T13:04:19.013

您可以使用以下代码设置默认用户代理

```
NSDictionary *dictionary = [[NSDictionary alloc] initWithObjectsAndKeys:@"Safari/528.16", @"UserAgent", nil];
[[NSUserDefaults standardUserDefaults] registerDefaults:dictionary]; 
```

[这里](http://www.cocoanetics.com/2012/06/radar-allow-overriding-of-user-agent-on-uiwebview/)解释得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-14T09:57:25.667

我不确定您的具体情况。但对我来说，只需设置`baseURL`参数 in将自动为HTML 页面下的所有传出请求`-loadHTMLString:baseURL:;`添加 HTTP 标头。`Referer``baseURL`

# c# - Mozilla Firefox 中的 asp 图像和文件上传控件问题

> ID：11858476
> 
> 赞同：0
> 
> 时间：2012-08-08T05:57:43.610
> 
> 标签：c#, asp.net, image, firefox, file-upload

我有一个图像控件，用于在单击按钮时显示图像。代码如下：

**.aspx 代码**

```
<asp:Image ID="imgCorrect" runat="server" Height="175px" Width="150px" ImageUrl="~/_layouts/images/NoPreviewShareHR_Grey.jpg" />

<asp:FileUpload ID="FlUpldImage" runat="server" Width="200px" />

<asp:RegularExpressionValidator runat="server" ID="valUp" ControlToValidate="FlUpldImage"
ErrorMessage="Image Files Only (.jpg, .bmp, .png, .gif)" ValidationGroup="ImageFormat"
ValidationExpression="^(([a-zA-Z]:)|(\\{2}\w+)\$?)(\\(\w[\w].*))(.jpg|.JPG|.gif|.GIF|.jpeg|.JPEG|.bmp|.BMP|.png|.PNG)$" />

<asp:Button ID="btnImageUpload" runat="server" Text="Preview" OnClick="btnImageUpload_Click" CausesValidation="false"/>

<asp:HiddenField ID="HidnLocalImageURL" runat="server" Value=""/> 
```

**C# 代码**

```
protected void btnImageUpload_Click(object sender, EventArgs e)
{
    String fileToUpload = Convert.ToString(FlUpldImage.PostedFile.FileName);
    HidnLocalImageURL.Value = fileToUpload;
    if (fileToUpload != "")
        imgCorrect.ImageUrl = fileToUpload;
    else
        imgCorrect.ImageUrl = "~/_layouts/images/NoPrview.jpg";
} 
```

上面的代码在 IE 上运行良好，但在 Mozilla Firefox 中出现问题：

*   即使选择了正确的图像，文件上传的 RE 验证器也会将错误消息显示为无效图像并且
*   `btnImageUpload`图像控件的 onclick**消失**。此问题仅在 Firefox 浏览器上出现，在 IE 中运行良好。

`fileToUpload` 在 C# 代码中包含图像的属性路径，包括驱动器号。我不想将文件物理存储到应用程序文件夹中，因为这只是为了预览图像。

请帮我解决这两个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T06:04:00.953

尝试记录 FluUpldImage.PostedFile.FileName。

我认为 Firefox 只发送文件名而不是完整路径。如果是这样，最好使用简单的文本框并在其中粘贴路径而不使用对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:05:48.067

作为安全预防措施，禁止从远程网站引用本地计算机上的图像。如果您遇到此限制并且您了解安全隐患，则可以禁用此安全措施。

欲了解更多信息 [http://kb.mozillazine.org/Images_or_animations_don%27t_load](http://kb.mozillazine.org/Images_or_animations_don%27t_load)

# .net - Deleporter 远程服务的 TCP 通道过早关闭

> ID：11858477
> 
> 赞同：1
> 
> 时间：2012-08-08T05:57:51.877
> 
> 标签：.net, selenium, remoting

我们有一个用于 ASP.NET MVC3 网站的 UI 测试套件。我们在测试期间使用 Selenium 和 IIS Express。IIS Express 在第一次测试之前启动，在最后一次测试之后关闭。

因为我们的系统有一些外部依赖项，但是这些与测试 UI 无关，我们一直在尝试使用 Deleporter 来模拟这些依赖项。Deleporter 配置通常在每次测试开始时完成，并且可以正常工作一段时间。但是在执行了一些测试之后，IIS express 进程中的 Deleporter 服务停止工作，客户端无法再访问它。之后，所有后续测试都失败了。有时整个测试套件也会成功执行。

使用 TCPView 查看分配的端口表明，当 Deleporter 服务停止响应时，配置端口上的 TCP 通道实际上已从 IIS Express 进程中消失。知道为什么会这样吗？根据使用的浏览器（Chrome、Firefox、IE），每个测试可能需要 45 秒才能运行，因此调用 Deleporter 服务之间可能有大约 30 多秒的时间。

查看 Deleporter 代码，我可以看到实现了 Deleporter 服务，因此它为 InitializeLifeTimeServices 方法返回 null 并注册为 Singleton 服务。

# .net - 分析使用 TopShelf 的应用程序

> ID：11858479
> 
> 赞同：0
> 
> 时间：2012-08-08T05:57:57.993
> 
> 标签：.net, profiling, topshelf

我正在使用[TopShelf](http://topshelf-project.com/)运行一个 .net 应用程序，其中一部分是处理数据并将其保存到 Sql Server 数据库中。

我发现这个过程很慢，所以我想研究分析应用程序，看看在方法调用等方面是否存在任何主要瓶颈，但是，由于 TopShelf 正在运行应用程序，所以我使用的任何分析工具都只是坐着在主程序中的 Run 方法上，并且不显示其余方法的任何结果。

有没有办法让分析工具继续分析超过 TopShelf 运行应用程序的点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:19:17.773

使用 Topshelf，您可以将服务作为控制台应用程序运行，以进行调试和分析。为此，请确保未安装您的服务，只需从控制台运行它（或将其设置为程序以在您的分析器中进行分析）。然后，一旦您的服务运行了足够的时间以获得良好的配置文件跟踪，请在控制台中使用 Control+C 将其停止，它会优雅地退出，从而使配置文件能够获得良好的跟踪。

我一直在我的系统上使用 dotTRACE 来执行此操作。

# c++ - 编译静态库时出现 GCC 链接器错误

> ID：11858480
> 
> 赞同：2
> 
> 时间：2012-08-08T05:58:17.370
> 
> 标签：c++, gcc, static-linking

我想为我的所有文件创建一个静态库，以便我可以将 mylib.a 文件提供给其他人在他们的系统上执行。我在我的代码中使用 opencv 库。我使用以下命令来编译我的代码。

`g++ index.cpp -o display1 -Wl,-Bdynamic pkg-config --cflags --libs opencv -lglut -lGL -lGLU -Wl,-Bstatic mylib.a`

但它给出了以下错误。

```
/usr/bin/ld: cannot find -lgcc_s
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T07:13:48.310

我相信 Kerrek SB 在评论中是正确的。命令应该是

```
g++ index.cpp -o display1 mylib.a $(pkg-config --cflags --libs opencv) -lglut -lGL -lGLU 
```

解释：

*   `-Wl,-Bdynamic`和`-Wl,-Bstatic`标志是无用的。链接器会根据找到的内容自动选择静态或动态库。如果你给它一个库的路径（就像你做的那样`mylib.a`）它不能选择并且会链接你提供的库。如果你给它一个`-l`*X*标志，它会寻找`lib`*X*`.so`或`lib`*X*`.a`并链接它找到的任何一个，但大多数 Linux 安装不会有系统库的静态变体，所以没有任何选择。
*   更糟糕的是，`-Wl,-Bdynamic`and`-Wl,-Bstatic`是**错误**的。`-Wl,-Bstatic` *禁止*链接共享库。这具有选择静态 libgcc 的副作用，它隐式出现在链接器命令行的最后。而且您似乎没有安装它。大多数Linux系统都没有。
*   每个对象都必须在它引用的库之前列在命令行上*。*我希望`mylib.a`包含需要 opencv 或 opengl 的函数，因此它必须列在这些`-l`标志之前。

# r - R中的滞后xts对象

> ID：11858481
> 
> 赞同：2
> 
> 时间：2012-08-08T05:58:18.977
> 
> 标签：r, time-series, apply, xts, zoo

我无法在文档中找到这个问题的答案，我认为这是有效的，因为`zoo`它是对象的基础，`xts`但是：

1.  可以在对象 上使用通常的`lag`和`diff`功能吗？`xts`
2.  如果我想对某种意义上`rollapply`的`xts`对象使用功能`zoo`-我知道它`xts`具有`period.apply`在非重叠区域上工作的功能-应该只`rollapply`在`xts`对象上使用并且它应该再次工作，因为`zoo`下面有一个？

编辑：我只是查看了详细信息，但似乎这`zoo`实际上并不是`xts`. 有人可以对此发表评论/验证吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-08T07:11:55.937

你***可以***，但你可能不会得到你期望的结果。

`lag`这是应用于`ts`对象的一年滞后（`ldeaths`是一个内置数据集，在帮助文件中用作示例`lag`，因此您也可以尝试）。滞后集从一年前开始（并显示*所有*数据）。

```
ldeaths
#       Jan  Feb  Mar  Apr  May  Jun  Jul  Aug  Sep  Oct  Nov  Dec
# 1974 3035 2552 2704 2554 2014 1655 1721 1524 1596 2074 2199 2512
# 1975 2933 2889 2938 2497 1870 1726 1607 1545 1396 1787 2076 2837
# 1976 2787 3891 3179 2011 1636 1580 1489 1300 1356 1653 2013 2823
# 1977 3102 2294 2385 2444 1748 1554 1498 1361 1346 1564 1640 2293
# 1978 2815 3137 2679 1969 1870 1633 1529 1366 1357 1570 1535 2491
# 1979 3084 2605 2573 2143 1693 1504 1461 1354 1333 1492 1781 1915
lag(ldeaths, 12)
#       Jan  Feb  Mar  Apr  May  Jun  Jul  Aug  Sep  Oct  Nov  Dec
# 1973 3035 2552 2704 2554 2014 1655 1721 1524 1596 2074 2199 2512
# 1974 2933 2889 2938 2497 1870 1726 1607 1545 1396 1787 2076 2837
# 1975 2787 3891 3179 2011 1636 1580 1489 1300 1356 1653 2013 2823
# 1976 3102 2294 2385 2444 1748 1554 1498 1361 1346 1564 1640 2293
# 1977 2815 3137 2679 1969 1870 1633 1529 1366 1357 1570 1535 2491
# 1978 3084 2605 2573 2143 1693 1504 1461 1354 1333 1492 1781 1915 
```

现在，将数据集转换为`xts`对象并尝试。

```
ldeaths.x = as.xts(ldeaths)
head(lag(ldeaths.x, 12), n=14)
#          [,1]
# Jan 1974   NA
# Feb 1974   NA
# Mar 1974   NA
# Apr 1974   NA
# May 1974   NA
# Jun 1974   NA
# Jul 1974   NA
# Aug 1974   NA
# Sep 1974   NA
# Oct 1974   NA
# Nov 1974   NA
# Dec 1974   NA
# Jan 1975 3035
# Feb 1975 2552 
```

哎呀。不是你所期望的。但是你*应该*期待它，因为帮助文件`lag.xts`说：

> ... 已决定 lag 的默认行为应与该运算符的常见时间序列解释相匹配 - 特别是时间 't' 的值应该是时间 't-1' 的值以表示正滞后。这与 lag.zoo 和 lag.ts 不同。

所以，让我们试试吧`k = -12`。

```
head(lag(ldeaths.x, -12), n=14)
#          [,1]
# Jan 1974 2933
# Feb 1974 2889
# Mar 1974 2938
# Apr 1974 2497
# May 1974 1870
# Jun 1974 1726
# Jul 1974 1607
# Aug 1974 1545
# Sep 1974 1396
# Oct 1974 1787
# Nov 1974 2076
# Dec 1974 2837
# Jan 1975 2787
# Feb 1975 3891 
```

为了好玩，`zoo`对象会发生什么？首先，转换为`zoo`然后尝试。

```
ldeaths.z = zoo(ldeaths.x)
head(lag(ldeaths.z, 12), n=14)
# 
# Jan 1974 2933
# Feb 1974 2889
# Mar 1974 2938
# Apr 1974 2497
# May 1974 1870
# Jun 1974 1726
# Jul 1974 1607
# Aug 1974 1545
# Sep 1974 1396
# Oct 1974 1787
# Nov 1974 2076
# Dec 1974 2837
# Jan 1975 2787
# Feb 1975 3891 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T11:19:10.423

xts 对象不是“下面”的动物园对象。`$.zoo`xts 是 zoo 的子类，这意味着如果泛型函数（例如and ）不存在 xts 方法，则调用 zoo 方法`$<-.zoo`。zoo 和 xts 对象都是具有有序索引属性的矩阵。xts 要求索引是基于时间的。

是的，您可以在 xts 对象上使用`lag`和。`diff`正如[mrdwab 所](https://stackoverflow.com/users/1270695/mrdwab) [指出](https://stackoverflow.com/a/11859434/271616)的，`lag.xts`故意的行为与`lag.ts`and不同`lag.zoo`。

您也可以`rollapply`在 xts 对象上使用 zoo 的函数系列，但您可能需要`as.xts`结果。

# android - 在 iOS / Android 应用程序中使用 SIM 的信用政策

> ID：11858483
> 
> 赞同：1
> 
> 时间：2012-08-08T05:58:20.483
> 
> 标签：android, ios, billing

我正在为电信运营商创建一个 iOS 应用程序。我想从他的 SIM（网络服务提供商计费帐户）中收取客户的信用。对于订阅/取消订阅运营商提供的服务，我正在调用一项网络服务，该服务隐含地从他的 SIM 计费帐户中收取客户信用。

是否有任何 Apple 或 Android 政策不允许这种计费流程，因此他们可能会拒绝我的应用程序进入应用程序商店？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:19:10.683

对于在[Google Play](http://play.google.com/about/developer-content-policy.html)上发布，您似乎很安全；

> 应用内购买：在从 Google Play 下载的应用程序中提供额外内容、服务或功能的开发者必须使用 Google Play 的支付系统作为支付方式，但以下情况除外：
> 
> ...
> 
> *   支付可能在应用程序本身之外消费的数字内容或商品（例如购买可以在其他音乐播放器上播放的歌曲）

只要您不销售应用内内容，后者似乎适用于您，但您应该自己阅读条件，并牢记有关应用程序的额外信息。

# java - 用正确的小数位格式化数字

> ID：11858485
> 
> 赞同：1
> 
> 时间：2012-08-08T05:58:49.070
> 
> 标签：java, bigdecimal, decimalformat

我需要格式化一个小数点后 2 位的数字。原始数字可以是整数，也可以是小数点后三位的数字。然而，无论原始数字是整数还是有小数位，结果都应该格式化为有逗号和两位小数。

1.  当原始 num = 56565656.342 ==> 我需要 56,565,656.34
2.  当原始 num = 56565656 ==> 我需要 56,565,656.00
3.  当原始 num = 56565656.7 ==> 我需要 56,565,656.70

我正在使用以下代码格式化代码，但在上述 2 和 3 种情况下未能添加两位小数。

```
String originalNumber = "56565656.7";
BigDecimal b = new BigDecimal(originalNumber).setScale(2, BigDecimal.ROUND_HALF_UP);
String formattedNumber = NumberFormat.getInstance().format(b); 
```

请让我知道是否有任何方法可以有效地完成此操作。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T06:01:00.203

看一下[DecimalFormat](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html)类。

或者，您可以使用 BigDecimal 类的[setScale](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#setScale%28int,%20int%29)方法。

```
 BigDecimal bg1 = new BigDecimal("56565656.342");
        BigDecimal bg2 = new BigDecimal("56565656.00");
        BigDecimal bg3 = new BigDecimal("56565656.70");

        DecimalFormat df = new DecimalFormat("###,###.00");
        System.out.println(df.format(bg1.doubleValue()));
        System.out.println(df.format(bg2.doubleValue()));
        System.out.println(df.format(bg3.doubleValue()));

        System.out.println(bg1.setScale(2, BigDecimal.ROUND_HALF_UP));
        System.out.println(bg2.setScale(2, BigDecimal.ROUND_HALF_UP));
        System.out.println(bg3.setScale(2, BigDecimal.ROUND_HALF_UP)); 
```

产量：

```
56,565,656.34
56,565,656.00
56,565,656.70
56565656.34
56565656.00
56565656.70 
```

编辑：还忘了提及：如果您追求精度，我建议您使用该`setScale`方法，使用该`.doubleValue()`方法会产生一个`double`可能导致精度损失的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T06:15:44.053

只需使用`NumberFormat`并指定小数位数和舍入方法即可打印：

```
String [] originalNumbers = new String[] {
   "56565656.342",
   "56565656.7",
   "56565656"
};

NumberFormat df = NumberFormat.getInstance();
df.setMinimumFractionDigits(2);
df.setMaximumFractionDigits(2);
df.setRoundingMode(RoundingMode.HALF_UP);

for (String number : originalNumbers) {
   String formattedNumber = df.format(new BigDecimal(number));

   System.out.println(formattedNumber);
} 
```

将打印

```
56,565,656.34
56,565,656.70
56,565,656.00 
```

****编辑****

```
DecimalFormat df = new DecimalFormat("#,###.00"); 
```

将使用上面给定的代码产生完全相同的结果。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-08T06:09:11.930

DecimalFormat 类会为您完成...。您将必须指定适当的格式。

# ruby-on-rails - Ruby 的 UUID 库列表

> ID：11858486
> 
> 赞同：1
> 
> 时间：2012-08-08T05:58:53.453
> 
> 标签：ruby-on-rails

我正在寻找 Ruby on Rails 的 UUID gem 列表，有人可以向我推荐几个，最好是那些不太复杂以至于我无法轻松理解它们的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T06:02:04.917

[Ruby 工具箱](https://www.ruby-toolbox.com/search?utf8=%E2%9C%93&q=UUID)是开始搜索的好地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:06:11.470

我强烈建议您使用[UUID 工具](http://rubygems.org/gems/uuidtools)

他们提供的简介：

> UUIDTools 被设计成一个简单的库，用于生成任何各种类型的 UUID。它尽可能符合 RFC 4122。

我一直在将它用于不同的项目，我没有遇到任何问题。此外，文档非常好。查看此内容以获取更多参考[UUID 工具参考](http://uuidtools.rubyforge.org/)

# linux-kernel - 从 linux 设备驱动程序更改 smp_affinity

> ID：11858487
> 
> 赞同：1
> 
> 时间：2012-08-08T05:58:57.650
> 
> 标签：linux-kernel, linux-device-driver, device-driver

如果我检查

```
cat /proc/interrupts 
```

命令，所有的 IRQ 都列在 SMP 系统的 cpu0 下。我可以使用以下命令更改 smp_affinity 掩码以将 IRQ 标记到特定 CPU。

```
 echo "4" > /proc/irq/230/smp_affinity 
```

上述命令将中断 230 的关联掩码设置为 CPU 2。

我想从 linux 内核模块中实现相同的目标。我怎样才能做到这一点？
我看到了 create_proc_entry 方法，它允许创建新的 proc 条目。
有什么方法可以用来编写现有的 proc 条目吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T11:17:56.017

在内核模块中，您可以直接调用内核 API 函数 irq_set_affinity(...)。无需通过/proc。见： http: [//lxr.free-electrons.com/source/kernel/irq/manage.c#L189](http://lxr.free-electrons.com/source/kernel/irq/manage.c#L189)

# performance - Cassandra 缓慢的 get_indexed_slices 速度

> ID：11858488
> 
> 赞同：2
> 
> 时间：2012-08-08T05:59:01.673
> 
> 标签：performance, indexing, cassandra

我们正在使用 Cassandra 进行日志收集。每小时大约 150,000 - 250,000 条新记录。我们的列族有几个列，如“host”、“errorlevel”、“message”等，以及特殊的索引列“indexTimestamp”。此列包含四舍五入到小时的时间。

因此，当我们想要获取一些记录时，我们使用 get_indexed_slices() 和第一个 IndexExpression by indexTimestamp（使用 EQ 运算符），然后是其他一些 IndexExpressions - by host、errorlevel 等。

仅通过 indexTimestamp 获取记录时，一切正常。但是，当通过 indexTimestamp 获取记录时，例如，主机 - cassandra 工作时间很长（超过 15-20 秒）并抛出超时异常。

据我了解，在通过索引列和非索引列获取记录时，Cassandra 首先通过索引列获取所有记录，然后通过非索引列过滤它们。

那么，为什么 Cassandra 这么慢呢？通过 indexTimestamp，记录不超过 250,000 条。难道不能在 10 秒内过滤它们吗？

我们的 Cassandra 集群在一台具有 4 个 CPU 和 4 GB 内存的机器（Windows 7）上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:30:46.390

您必须记住，Cassandra 对这种查询非常不利。索引列查询不适用于大表。如果您想围绕此类查询搜索数据，则必须围绕它定制数据模型。

事实上，Cassandra 不是您可以查询的数据库。它是一个键值存储系统。要了解这一点，请去那里快速浏览一下：[http ://howfuckedismydatabase.com/](http://howfuckedismydatabase.com/)

可以帮助您的最基本模式是存储桶行和范围范围切片查询。

假设你有对象

```
user : {
  name : "XXXXX"
  country : "UK"
  city : "London"
  postal_code :"N1 2AC"
  age : "24"
} 
```

当然你想查询`by city`OR `by age`（`and`&`or`是另一种数据模型）。

然后你必须像这样保存你的数据，假设名称是唯一的 id ：

```
write(row = "UK", column_name = "city_XXXX", value = {...}) 
```

和

```
write(row = "bucket_20_to_25", column_name = "24_XXXX", value = {...}) 
```

请注意，我按国家/地区进行城市搜索，按年龄段进行年龄搜索。

年龄 EQ 24 的范围查询将是

```
get_range_slice(row= "bucket_20_to_25", from = "24-", to = "24=") 
```

作为注释`"minus" == "under_score" - 1`和 `"equals" == "under_score" + 1`，有效地为您提供以“24_”开头的所有列

例如，这也允许您查询 21 到 24 之间的年龄。

希望它有用

# php - CakePHP AppController afterFilter 变量继承怪异

> ID：11858492
> 
> 赞同：1
> 
> 时间：2012-08-08T05:59:54.493
> 
> 标签：php, oop, cakephp

我不明白为什么 AppController 中的变量没有改变。我有一个 AppController 的子类，在操作方法中，我正在更改 AppController 的一个变量。但是，这不会反映在 afterFilter 中。

这是 CakePHP 的 AppController

```
<?php

class AppController extends Controller {

    var $xxxx;

    function beforeFilter()
    {
        $this->xxxx = 'this should be changed';
    }

    function afterFilter()
    {
        var_dump($this->xxxx);
        exit;
    }

}
?> 
```

这是我的用户控制器

```
<?php

class UsersController extends AppController {

    function view( $id )
    {
        echo "From the AppController: {$this->xxxx} \n";
        $this->xxxx = 'with this';
    }

}
?> 
```

这是我运行它时的输出：

```
From the AppController: this should be changed
string 'this should be changed' (length=22) 
```

我期待这个：

```
From the AppController: this should be changed
string 'with this' (length=9) 
```

你知道它为什么会这样吗？任何指示如何正确执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T06:09:28.920

您应该使用 beforeRender() 而不是 afterFilter()。

[请求生命周期回调](http://book.cakephp.org/2.0/en/controllers.html#request-life-cycle-callbacks)肯定会帮助您实现相同的目标。

请询问它是否不适合您。

# ajax - 如何在 RSpec 中测试此代码？

> ID：11858499
> 
> 赞同：1
> 
> 时间：2012-08-08T06:00:34.567
> 
> 标签：ajax, ruby-on-rails-3, rspec

这是在 Ruby on Rails 3.2.2 中仅通过 ajax 调用的方法

```
def some_ajax_action
    @user = User.find_by_id(params[:id])
    @user_list = User.find_all_by_parent_id(params[:id])
    respond_to do |format|
      format.js
    end
  end 
```

我想知道是否有必要（或可能）用 RSpec 对其进行测试？有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T06:30:13.210

怎么样：

```
before do
  User.stub(:find_by_id)
  User.stub(:find_all_by_parent)
end

it "finds the user" do
  User.should_receive(:find_by_id).with("37")
  xhr <HTTP VERB>, :some_ajax_action, :id => "37"
end

it "finds the user list" do
  User.should_receive(:find_all_by_parent).with("37")
  xhr <HTTP VERB>, :some_ajax_action, :id => "37"
end 
```

替换为这些 ajax 调用`<HTTP VERB>`中的任何内容`routes.rb`，例如，如果您有

```
get 'some_ajax_action' 
```

那么第一个就是`xhr :get, :some_ajax_action, :id => "37"`.

# cuda - CUDA 5 中的调试器

> ID：11858500
> 
> 赞同：1
> 
> 时间：2012-08-08T06:00:41.080
> 
> 标签：cuda, nsight

Nvidia 已经为 CUDA 5 发布了扩展的 Eclipse。他们也为 VS2010 提供了 Nsight 插件。在 VS2010 中，我们可以在内核断点处停止程序执行，但是如何在 Linux 上的 Eclipse 中实现此功能？我没有看到任何 nsight 特定的键来停止执行。我尝试改变视角，但它作为普通的 C/C++ 应用程序进行调试。我正在使用带有 Linux 的 Intel Xeon 8 内核机器 Tesla C2070。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T16:07:53.500

我来自 Nsight Eclipse Edition 团队。

我们的目标是专门将应用程序作为普通 C/C++ 应用程序进行调试。这意味着无论您是调试主机代码还是设备代码，都可以设置断点、使用“运行到行”等。

基本上，这个过程对于 Eclipse 来说是相当标准的：

1.  创建一个项目（您也可以导入现有的可执行文件）
2.  点击调试按钮
3.  调试器将运行，默认情况下会中断主函数。请注意，设备上没有发布任何设备代码，因此您只会看到主机线程。
4.  在设备代码中设置断点并点击恢复（请注意，断点视图工具栏还允许您在任何 CUDA 内核启动时设置断点）

当设备代码到达断点时，调试器将中断。您可以使用可视化调试器 UI 检查您的应用程序状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T14:16:18.227

几个事情，不知道哪个解决了这个问题。使用 RC5.0 更新到最新的驱动程序，但我选择运行 VNC 服务器而不是本机 X 服务器。然后 CUDA 卡专门用于我的应用程序和调试，它就像一个魅力，现在可以从任何地方访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T01:21:45.560

304.43 NVIDIA 驱动程序不允许 root 以外的用户调试他们的 CUDA 应用程序。

这个问题在过去或未来的任何公开版本中都不存在。CUDA 文档建议仅使用 CUDA DevZone 中列出的驱动程序。304.43 驱动程序不是其中之一。

这可能是也可能不是您遇到的问题。但我认为这值得一提。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T05:48:17.017

你试过 CUDA 5.0 RC1 吗？它现在可用。你可以下载试试看。我已经尝试过其中的 Nsight，它非常适合调试。

此致！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T12:24:28.330

Eugene，我刚刚安装了 Cuda 5，但无法破解任何内核代码。这是一个全新安装的 centos 5.5，全新下载了 cuda-5，我在安装了 gtx260m 的华硕 g71x 笔记本电脑上运行。

我想也许你仍然不能在一台设备上运行 display 和 dedbug，所以我切换到非 nv x 显示器，但仍然有同样的问题，不能在内核代码中停止。

# asp.net - 在c#中单击链接时强制下载

> ID：11858505
> 
> 赞同：0
> 
> 时间：2012-08-08T06:01:02.070
> 
> 标签：asp.net, sql, download

> **可能重复：**
> [单击时下载 href 图像链接](https://stackoverflow.com/questions/2408146/href-image-link-download-on-click)

我创建了一个项目符号列表

```
<asp:BulletedList ID="BulletedList1" runat="server" DisplayMode="HyperLink" 
            DataSourceID="SqlDataSource1" DataTextField="description" 
            DataValueField="link" onclick="BulletedList1_Click">
        </asp:BulletedList>
        <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:chaaapaConnectionString6 %>" 
        SelectCommand="SELECT [description], [link] FROM [quiz]">
    </asp:SqlDataSource> 
```

datavalue 字段包含指向图像文件的链接。单击时，图像会显示在浏览器中。我希望显示一个下载框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:15:10.357

该图像在浏览器中打开，因为您的代码（我认为）只是生成一个超链接，并且浏览器识别 MIME 类型并绘制它（而不是打开下载提示）。您需要设置响应标头以告诉浏览器以不同的方式进行操作。

具体来说，您要设置`content-disposition`.

请参阅：[在 HTTP 响应标头中使用 content-disposition](https://stackoverflow.com/questions/1012437/uses-of-content-disposition-in-an-http-response-header)

最简单的方法可能是创建一个简单的 HTTP 处理程序，该处理程序使用`Response.BinaryWrite()`. 一个空的 ASPX 页面可以是一个处理程序，或者您可以使用一个通用处理程序（ASHX 文件）。

[本教程](http://www.intstrings.com/ramivemula/asp-net/how-to-download-files-from-server-to-client-using-a-generic-handler/)似乎大致涵盖了您正在做/需要做的事情。确保正确获取`content-disposition`值/语法（浏览器可能会使用格式错误的标头做奇怪的事情）。

# jquery - 如何在jquery中选择这个的子div

> ID：11858508
> 
> 赞同：0
> 
> 时间：2012-08-08T06:01:12.140
> 
> 标签：jquery, html

如何在 jquery 中选择“this”的子 div，然后对其应用切换，同时禁用处理点击事件的链接效果？

这是html：

```
<a href="#" class="title">Link</a>   
<div class="data"> content here </div>
<a href="#" class="title">Link</a>    
<div class="data">
    content here
</div> 
```

这是我的jQuery代码：

```
$('a.title').each(function(event){  

    var selection = $(this).find('.data');

    $(this).click(function(event){
        $(div).toggle();
        event.preventDefault();
    });
}); 
```

我把它改成了这个，它起作用了：

```
$('a.title').each(function(){
    $(this).click(function(event){
        var selection = $(this).parent().children('.data');
        $(selection).toggle();
        event.preventDefault()
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T06:07:39.140

```
$('a.title').on('click', function(e){  
    e.preventDefault();
    $(this).next('.data').toggle();
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T06:06:47.493

像这样的东西：

```
$('a.title').click(function(event){

    var $selection = $(this).next('.data');
    event.preventDefault();
    $selection.toggle();              

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T06:05:22.687

你在追求这样的事情吗

[http://jsfiddle.net/pVKcm/1/](http://jsfiddle.net/pVKcm/1/)

```
$('a.title').click(function(event){
            event.preventDefault();
    $(this).next('.data').toggle();
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T06:07:14.790

您不需要使用`each()`函数，jQuery 将事件应用于所有匹配的元素。此外，您的`div`元素不是您的元素的子`a`元素。但是，要选择下一个`div`元素，您可以使用以下`next()`函数：

```
$('a.title').click(function(event){
    var selection = $(this).next('.data');
    selection.toggle(); 

    event.preventDefault();       
}); 
```

# hyperlink - Webdriver 内联编辑：如何处理鼠标悬停和双击

> ID：11858509
> 
> 赞同：0
> 
> 时间：2012-08-08T06:01:16.837
> 
> 标签：hyperlink, webdriver, inline-editing

我需要双击进行内联编辑。如果对象已经填充并且是超链接，我将面临问题。我使用双击的那一刻，链接打开，而不是编辑模式下的字段。这是HTML代码

```
<td class="dataCol ">
<span id="cust_contact"> 
<span ondblclick="if (window.sfPage && window.sfPage.hasRun) 
sfPage.dblClickField(event,this);" onmouseout="if (window.sfPage && window.sfPage.hasRun) sfPage.mouseOutField(event, this);" onclick="if (window.sfPage && window.sfPage.hasRun) sfPage.clickField(event, this);" onmouseover="if (window.sfPage && window.sfPage.hasRun) sfPage.mouseOverField(event, this);" class="inlineEditWrite" style="display:block" id="cust_contact_ilecell">
<span id="cust_contact_ileinner">
<a href="https://XXXXXXXX" id="lookup003" onblur="LookupHoverDetail.getHover('lookup003').hide();" onfocus="LookupHoverDetail.getHover('lookup003', '/003/m?retURL=%2Fapr%2FForceOrderInLineEditPage%3Fid%3Da1bWzo%26sf.override%3D1&amp;isAjaxRequest=1&amp;nocache=1344333834626').show();" onmouseout="LookupHoverDetail.getHover('lookup003').hide();" onmouseover="LookupHoverDetail.getHover('lookup003', '/003/m?retURL=%2Fapr%2FForceOrderInLineEditPage%3Fid%3Da1bWzo%26sf.override%3D1&amp;isAjaxRequest=1&amp;nocache=1344333834626').show();">
Joey Tribbiani</a>
</span></span></span></td> 
```

在鼠标悬停时，它会显示一个可用于单击的图像。但我无法找到相同的定位器，因为它与“类”相关联。
谢谢

# reference - 克隆 - 移除 ReferenceWidget 中的选项

> ID：11858516
> 
> 赞同：1
> 
> 时间：2012-08-08T06:02:08.553
> 
> 标签：reference, widget, plone, field, option

当我将 ReferenceField 与 ReferenceWidget 一起使用时，总会有一些选项指代真实对象，其中一个位于顶部，名为`<No reference>`. 可以隐藏该选项吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:10:14.413

是的，`required`将字段的属性设置为 True。

```
ReferenceField(
    name='references',
    required=True,
    # ...
) 
```

# cocos2d-iphone - Cocos2D Sprite 相对运动

> ID：11858522
> 
> 赞同：0
> 
> 时间：2012-08-08T06:03:04.403
> 
> 标签：cocos2d-iphone, sprite, game-physics, ccsprite

我有一个似乎无法解决的问题。我想根据手指移动在屏幕上移动精灵，但不是让精灵**向**触摸位置移动，我希望精灵以与手指在屏幕上移动**相同**的方式移动。

示例：用户将手指放在屏幕上（任意位置），然后将手指在屏幕上向左拖动 200 像素，精灵也应该向左移动 200 像素。

我的方法是存储玩家在开始时的位置，然后计算开始位置与手指当前位置之间的差异，以添加到精灵本身的开始位置。

这是我的代码

```
-(void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
if([touches count] == 1){
    UITouch *touch = [touches anyObject];
    CGPoint startPos = [touch locationInView:[touch view]];
    startPosition = startPos;
} 
```

}

```
-(void)ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    if([touches count] == 1){
        UITouch *touch = [touches anyObject];
        CGPoint touchPos = [touch locationInView:[touch view]];
        CGPoint playerPos = player.position;

        float yDifference = startPosition.y - touchPos.y;
        playerPos.y = playerPos.y - yDifference;

        // just to change to GL coordinates instead of the ones used by Cocos2D
        // still doesn't work even if I remove this...
        CGPoint convertedPoint = [[CCDirector sharedDirector] convertToGL:playerPos];
        [player setPosition:convertedPoint];
    } 
```

}

我希望我遇到的问题很清楚，但如果不是，请不要犹豫，提出问题或进一步解释。我已经坚持了很长一段时间:'(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:00:33.313

此外，如果您希望它“相对”移动到它开始的位置，而不是触摸的确切位置：

```
-(void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    if([touches count] == 1){
      UITouch *touch = [touches anyObject];
      CGPoint startPos = [touch locationInView:[touch view]];
      startPosition = startPos;
      playerStartPos = playerPos;
    }
 }

-(void)ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    if([touches count] == 1){
      UITouch *touch = [touches anyObject];
      CGPoint touchPos = [touch locationInView:[touch view]];

      CGPoint newPlayerPos;
      newPlayerPos.x = playerStartPos.x + (touchPos.x - startPosition.x);
      newPlayerPos.y = playerStartPos.y + (touchPos.y - startPosition.y);

      // just to change to GL coordinates instead of the ones used by Cocos2D
      // still doesn't work even if I remove this...
      CGPoint convertedPoint = [[CCDirector sharedDirector] convertToGL:newPlayerPos];
      [player setPosition:convertedPoint];
} 
```

您的代码看起来像是通过不断将差异添加到 playerPos.y 来“反馈”到自身

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:45:25.253

所以不要使用差异，使用当前的触摸位置：

```
-(void)ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    if([touches count] == 1){
        UITouch *touch = [touches anyObject];
        CGPoint playerPos = [touch locationInView:[touch view]];

        // just to change to GL coordinates instead of the ones used by Cocos2D
        // still doesn't work even if I remove this...
        CGPoint convertedPoint = [[CCDirector sharedDirector] convertToGL:playerPos];
        [player setPosition:convertedPoint];
    } 
```

# java-me - J2ME Sprite 帧

> ID：11858523
> 
> 赞同：1
> 
> 时间：2012-08-08T06:03:05.717
> 
> 标签：java-me, sprite, midp, lcdui

我正在尝试仅绘制图像的一部分。人类图像的长度为 159x22。

在该图像中，有 8 个人体（2 个左、2 个右等）。如果我尝试将 Frame 设置为，`humanSprite.setFrame(1);`则会收到错误消息，因为我在 Sprite 构造函数中指定了 Image 的大小，因此只有一帧。

好吧，我试图将它除以 8，然后我`ll get`java.lang.IllegalArgumentException`。

这是课程：

```
package org.pack.rhynn;

import java.io.IOException;                     
import javax.microedition.lcdui.game.GameCanvas;
import javax.microedition.lcdui.game.Sprite;                
import javax.microedition.lcdui.Graphics;
import javax.microedition.lcdui.Image;  
import java.util.Random;

public class play extends GameCanvas implements Runnable{

int sleep = 30;
private Image map;
private Sprite mapSprite;

private Image human;
private Sprite humanSprite;
private int humanX = getWidth() /2;
private int humanY = getHeight() /2;

public play(){
    super(false);
}

public void start(){

    try {                           
        map = Image.createImage("/mapas.png");
        human = Image.createImage("/human.PNG");
    } catch (IOException ioex) {                
        System.out.println(ioex);           
    }

    mapSprite = new Sprite(map);                    
    mapSprite.defineReferencePixel(100, 150);                   
    mapSprite.setRefPixelPosition(0, 0);

    humanSprite = new Sprite(human,159,22);                 
    humanSprite.defineReferencePixel(1, 10);                    
    humanSprite.setRefPixelPosition(humanX, humanY);

    Thread thr = new Thread(this);
    thr.start();
}

public void run(){
    while(true){

        updateScreen(getGraphics());

    try{
        Thread.sleep(sleep);

    }catch(Exception e){}
}
    }

private void createBackground(Graphics g){

    g.setColor(0x000000);
    g.fillRect(0, 0, getWidth(), getHeight());

}

private void updateScreen(Graphics g){
    createBackground(g);

    mapSprite.setRefPixelPosition(0, 0);                
    mapSprite.paint(g);

    humanSprite.setRefPixelPosition(humanX, humanY);
    humanSprite.setFrame(0);

    humanSprite.setPosition(50,50);
    humanSprite.paint(g);

    flushGraphics();

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:02:19.730

问题似乎与您的图像有关。所有帧必须具有相同的宽度和高度，并且图像的最终宽度和高度必须是它们的倍数。

例如，假设您的所有帧都在一行中。如果帧宽为 19，而您有 8 帧，则最终图像宽度必须为 152。

# ruby-on-rails - 如何实现类似Airbnb的本地化？

> ID：11858524
> 
> 赞同：1
> 
> 时间：2012-08-08T06:03:09.657
> 
> 标签：ruby-on-rails, heroku, localization

我正在尝试为多个国家/地区本地化我的 Rails 应用程序。我想像 AirBnB 一样实现它。基于区域设置的子域和 www 子域。

```
www.myapp.com
jp.myapp.com
kr.myapp.com 
```

首先，用户输入区域设置子域站点或 www 子域站点。如果用户进入本地化页面或在 www 子域页面中设置他们的语言，设置 cookie 参数 [:locale]。

AirBnB 使用 Ruby on Rails 进行开发，但他们如何操作许多子域？他们为每个区域设置了多个应用程序，还是只有一个应用程序？我可以在 Heroku 上实现这个吗？

我检查了这个 RailsCasts Episode [http://railscasts.com/episodes/123-subdomains-revised?view=asciicast](http://railscasts.com/episodes/123-subdomains-revised?view=asciicast)，但它使用乘客，所以我怀疑我是否可以将此解决方案用于 Heroku。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T07:58:19.133

在 Heroku 上完全可以实现 - 使用通配符域，以便您的应用程序在 *.myapp.com 上可用，然后根据子域设置语言。导轨上的红宝石在[这里](http://guides.rubyonrails.org/i18n.html#setting-the-locale-from-the-domain-name)有一节。总之，您需要执行类似（在您的 application_controller.rb 中）；

```
before_filter :set_locale

def set_locale
  I18n.locale = extract_locale_from_subdomain || I18n.default_locale
end

# Get locale code from request subdomain (like http://it.lvh.me:3000)
# lvh.me is a free service which maps ANY subdomain to 127.0.0.1 so
# en.lvh.me, it.lvh.me etc would all redirect to 127.0.0.1
def extract_locale_from_subdomain
  parsed_locale = request.subdomains.first
  I18n.available_locales.include?(parsed_locale.to_sym) ? parsed_locale : nil
end 
```

# iphone - 预填充 FBGRAPH API 注释文本框

> ID：11858525
> 
> 赞同：0
> 
> 时间：2012-08-08T06:03:11.470
> 
> 标签：iphone, fb-graph

请找到随附的快照。 [http://s17.postimage.org/4jwwze80v/FBTest_Demo.png](http://s17.postimage.org/4jwwze80v/FBTest_Demo.png)

我想要`@"Description"`所需的字段，`comment text box`如图所示。我正在使用`@"message"`字段。但它什么也没做。我得出的结论是 message 字段已关闭`since July 12, 2011`。如果这是真的，这可能是我的问题的原因吗？并且让我知道是否有人对此有建议。

我传递的参数如下.. [fb dialog:@"stream.publish" andParams:params andDelegate:self];

其中 params 包含我的 fbappid 和消息字段

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-08T06:13:34.880

textFieldPassword.placeholder = @"在此处输入评论";请试试这个。

# qt - 如何告诉 cmake/cpack (NSIS) 部署所需的库？

> ID：11858526
> 
> 赞同：4
> 
> 时间：2012-08-08T06:03:15.557
> 
> 标签：qt, cmake, nsis, mingw32

我的程序在 Linux 下编译并运行良好。为 Windows 交叉编译它也没有问题。但现在我想告诉 CPack，它应该将所有必需的库（dll）包含到（NSIS）安装文件中。

对于 Qt 库，我是成功的：

```
IF (WIN32)
    INSTALL(FILES ${QT_LIBRARY_DIR}/libQtCore4.dll.a
                  ${QT_LIBRARY_DIR}/libQtGui4.dll.a
            DESTINATION bin)
ENDIF (WIN32) 
```

但我不知道如何为 libgcc、libstdc++ 实现这一点（无需对路径进行硬编码）。有关如何执行此操作的任何提示（使用 CMake 2.8.8）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T08:37:38.430

如果您不想硬编码路径，那么您应该编写自己的 CMake 模块，该模块会找到这些库并为您设置变量。查看[CMake 维基](http://www.cmake.org/Wiki/CMake%3aHow_To_Find_Libraries)。

# objective-c - MKNetworkKit 和 GCD dispatch_group_t

> ID：11858527
> 
> 赞同：0
> 
> 时间：2012-08-08T06:03:21.597
> 
> 标签：objective-c, ios, objective-c-blocks, grand-central-dispatch, mknetworkkit

我正在尝试使用 MKNetworkKit 从 Web 服务获取链接数组，然后在后台线程上解析每个响应，并使用 GCD 的 dispatch_group_t 等待所有线程完成处理。我卡住的地方是我无法弄清楚为什么我的 dispatch_group_notify 没有等待组中的所有线程完成。运行此代码将打印：

```
results count: 0
added into results, count: 1
added into results, count: 2 
```

调度组没有在其线程上等待。我也试过 dispatch_group_wait 但这让我崩溃了。我不知道 MKNetworkKit 对 NSOperation 的使用是否与这个问题相冲突。谢谢你的帮助！

```
- (MKNetworkOperation *)getABunchOfMovies:(NSArray *)movies onCompletion:(CastResponseBlock)completionBlock onError:(MKNKErrorBlock)errorBlock
{
    MKNetworkOperation *operation;
    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
    dispatch_group_t group = dispatch_group_create();
    block NSMutableArray *results = [[NSMutableArray alloc] initWithCapacity:[movies count]];

    for (NSString *movieTitle in movies) {
        operation = [self operationWithPath:REQUEST_URL(API_KEY, [movieTitle urlEncodedString])];

        [operation onCompletion:^(MKNetworkOperation *completedOperation) {

            dispatch_group_async(group, queue, ^{
                NSDictionary *response = [completedOperation responseJSON];
                id result = [self processResponse:response withMovieTitle:movieTitle];

                @synchronized (results) {
                    [results addObject:result];
                    NSLog(@"added into results, count: %d", [results count]);
                }
            });
        }
                        onError:^(NSError *error) {
                            errorBlock(error);
                        }];

        [self enqueueOperation:operation];
    }

    dispatch_group_notify(group, dispatch_get_main_queue(), ^{

        NSLog(@"results count: %d", [results count]);

        // Return array here
        completionBlock(results);
    });

    dispatch_release(group);

    return operation;
} 
```

编辑：我仍然不知道为什么，但是如果我将其更改为使用 dispatch_group_enter(group); 并将其与 dispatch_group_leave(group) 匹配；在完成块的末尾，它可以工作。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T02:41:47.777

目前 MKNetworkKit 不支持队列完成处理程序。您应该考虑添加操作依赖项而不是此 hack。

```
[lastOperation addDependency:op1];
[lastOperation addDependency:op2]; 
```

并假设当“lastOperation”完成时，队列确实完成了。

另一种方法是对引擎上的“operationCount”键路径进行 KVO 并检查它是否达到零。

MKNetworkEngine 有一个代码块来显示和隐藏网络活动指示器。

# c# - 删除条件格式

> ID：11858529
> 
> 赞同：3
> 
> 时间：2012-08-08T06:03:26.400
> 
> 标签：c#, excel, vsto, conditional-formatting

我正在尝试使用带有以下代码的 C# 添加条件格式。

```
Microsoft.Office.Interop.Excel.FormatCondition formatConditionObj = null;

formatConditionObj = (Microsoft.Office.Interop.Excel.FormatCondition)myRange
.FormatConditions.Add(Excel.XlFormatConditionType.xlExpression, 
Type.Missing, true, Type.Missing, Type.Missing, Type.Missing, 
Type.Missing, Type.Missing);

formatConditionObj.Interior.ColorIndex = 5; 
```

我动态地更改应用这些格式的范围

```
formatConditionObj.ModifyAppliesToRange(NewRange); 
```

现在我想删除这种应用的格式如何实现。

```
formatConditionObj.Delete(); 
```

这对我不起作用。这不会删除应用它的所有单元格的格式。仅删除最后的单元格格式。

我也尝试过使用

```
formatConditionObj.AppliesTo.Delete(); 
```

但它也会删除其他应用于该单元格的 ConditionalFormats。

注意：某些格式已经应用在单元格上，在这些单元格中应用了这种条件格式，例如某些填充颜色。甚至还有一些其他条件格式应用于某些单元格。我只想删除这个特定的 ConditionalFormat(formatConditionObj)。

谁能帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:46:21.700

当单元格中有多个条件时，不能像这样删除格式条件。您必须通过它的编号来处理条件格式才能删除它。

考虑这个例子。（**经过测试和尝试**）

下面的代码创建一个新工作簿，并在工作表 1 中在单元格 A1 中创建 2 个格式条件。在创建 2 个条件后，应用程序将暂停并显示一个消息框。转到 Excel 并手动检查创建的条件格式。（快照 1）。完成后，单击`OK`消息框中的。然后代码将删除条件 1，然后通过显示一个消息框再次暂停。转到 Excel 并手动检查条件格式。您会注意到只剩下一种（准确地说是第二种）条件格式。（快照 2）

```
 private void btnSearch_Click(object sender, EventArgs e)
    {
        Microsoft.Office.Interop.Excel.Application xlexcel;
        Microsoft.Office.Interop.Excel.Workbook xlWorkBook;
        Microsoft.Office.Interop.Excel.Worksheet xlWorkSheet;

        xlexcel = new Excel.Application();
        xlexcel.Visible = true;

        //~~> Add a File
        xlWorkBook = xlexcel.Workbooks.Add();
        xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);

        //~~> Create 2 Conditions
        xlWorkSheet.Cells[1, 1].FormatConditions.Add( 1,5,"=5");
        xlWorkSheet.Cells[1, 1].FormatConditions.Add(1, 5, "=10");

        MessageBox.Show("Wait");
        //~~> Now if you check the Excel file, Cell A1 has two conditional formats.
        //~~> See Snapshot 1

        //~~> Delete the first condition
        xlWorkSheet.Cells[1, 1].formatconditions(1).delete();

        MessageBox.Show("Wait");
        //~~> Now if you check the Excel file, Cell A1 has only 1 conditional format.
        //~~> See Snapshot 2
    } 
```

**快照 1**

![在此处输入图像描述](../Images/805e8b813c58af0705f05ec46fe5e9e8.png)

**快照 2**

![在此处输入图像描述](../Images/dcab116c9e783c323131f71f32a61712.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-13T19:43:53.653

> formatConditionObj.Delete();
> 
> 这对我不起作用。...仅删除最后的单元格格式。

我没有看到。如果我坚持参考我可以打电话`Delete`，它的工作原理。这是我的测试，其中一个范围包含不同的单元格。然后我格式化，等待和删除。

[![测试](../Images/69733264048f07c906493276fb578bb1.png)](https://i.stack.imgur.com/taY3R.gif)

# sql-server-2008 - 我可以使用什么来代替 sql 函数中的#Temp 表

> ID：11858534
> 
> 赞同：16
> 
> 时间：2012-08-08T06:04:12.407
> 
> 标签：sql-server-2008, tsql, temp

这是我的 sql 查询。

```
CREATE FUNCTION UF_GetOrderProducts
(
    @OrderId int
)
RETURNS VARCHAR(500)
AS
BEGIN
    SELECT  Identity(int,1,1) ID, ProductId INTO #Temp  FROM OrderProduct WHERE OrderId = @OrderId

Declare @Id int,
        @Count int,
        @LoopCount int,
        @ProductList VARCHAR(500),
        @ProductListTemp VARCHAR(500)

SET @Count = (Select Count(*) From #Temp)

SET @LoopCount = 1
 SET @ProductList = ''
WHILE @LoopCount <= @Count
BEGIN

     SET @ProductListTemp =( SELECT Name FROM Product WHERE ProductId =(Select ProductId from #Temp Where ID = @LoopCount))
       SET @ProductList +=@ProductListTemp + '<br/>'
       Set @LoopCount=@LoopCount + 1         

END
DROP TABLE #Temp

RETURN @ProductList

END
GO 
```

我必须在#Temp 表中循环。你有什么其他的建议？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-08T06:18:34.317

您可以使用表变量代替临时表。

```
declare @Temp TABLE (ID int identity, ProductId int)

insert into @Temp(ProductId)
select ProductId 
from OrderProduct
where OrderId = @OrderId 
```

但是你可以在没有循环的情况下重写你的函数。

像这样的东西应该做你想做的事。

```
create function IF_GetOrderProducts
(
  @OrderId int
)
returns varchar(500)
as
begin
  return
    (
    select Name+'<br/>'
    from Product as P
      inner join OrderProduct as OP
        on P.ProductId = OP.ProductId
    where OP.OrderId = @OrderId
    for xml path(''), type
    ).value('.', 'varchar(500)')
end 
```

# objective-c - 是否需要发布 CGGradientCreateWithColorComponents？

> ID：11858535
> 
> 赞同：1
> 
> 时间：2012-08-08T06:04:13.683
> 
> 标签：objective-c, uikit, core-graphics, quartz-graphics, quartz-2d

我有自定义`UIView`绘图`drawRect`。

我不太了解 C API，所以我不确定它们需要什么内存规则。Objective-C 规则非常简单，声明您通过`init` `retain`或发布您拥有的任何东西，`copy`但 C 函数`CGGradientCreateWithColorComponents`不是 Objective-C，并且产品 > 分析报告它是潜在的泄漏。

是否需要发布该函数的结果，如果需要，如何发布？总的来说，当涉及到这些 API 时，是否有任何简单的方法可以知道某个函数是否正在分配您需要手动释放的内存？

更新：这是代码，感谢到目前为止答案中的信息。我现在收到`incorrect decrement`错误：

```
CGGradientRef theGradient=[self makeGradient:YES];
//do something with theGradient in my drawing
CGGradientRelease(theGradient); // this line Analyze says incorrect decrement of object not owned by caller 
```

在`makeGradient`我有：

```
 - (CGGradientRef)makeGradient:(BOOL)red{
     CGGradientRef gradient;
     //create my gradient
     return gradient;
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T06:10:25.150

一般规则是，如果调用名称中包含“Create”或“Copy”的函数，则必须释放它返回的对象。这称为“创建规则”。

您使用名称中嵌入了“创建”的函数创建了渐变。这意味着您负责释放渐变。您可以使用`CGGradientRelease`或`CFRelease`。

[*您可以在Core Foundation 的内存管理编程指南*](https://developer.apple.com/library/mac/documentation/CoreFOundation/Conceptual/CFMemoryMgmt/Concepts/Ownership.html#//apple_ref/doc/uid/20001148-103029)中阅读有关创建规则和其他内存管理约定的信息。

您还可以阅读[*Quartz 2D 编程指南*：内存管理：对象所有权](http://developer.apple.com/library/ios/#DOCUMENTATION/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_overview/dq_overview.html#//apple_ref/doc/uid/TP30001066-CH202-TPXREF101)。

### 更新

根据您的新代码示例，我现在看到您需要了解另一种内存管理约定。;^)

Objective-C 方法使用与 Core Foundation 函数略有不同的命名约定。Objective-C 方法的约定不是在名称中添加“Create”或“Copy”，而是名称必须以“alloc”、“new”、“copy”或“mutableCopy”开头，如果它返回一个对象调用者必须释放。（[您可以在此处阅读有关 Objective-C 内存管理约定的信息。](http://developer.apple.com/library/ios/documentation/General/Conceptual/DevPedia-CocoaCore/MemoryManagement.html#//apple_ref/doc/uid/TP40008195-CH27-SW1)）

将您的方法名称从更改为`makeGradient:`，`newGradient:`分析器将停止抱怨。我测试过了！:^)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T06:07:35.427

`CGGradientRelease`简单地说。

# button - extjs 中按钮处理程序中的文件下载

> ID：11858536
> 
> 赞同：0
> 
> 时间：2012-08-08T06:04:25.697
> 
> 标签：button, extjs, onclick, download

我必须在 extjs 中按钮的单击事件中下载文件。对话框应该询问是打开还是保存文件。有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T19:11:12.087

唯一可靠的跨浏览器方法是：

1.  实现服务器端脚本，该脚本将发送带有 Content-Disposition 标头的文件
2.  在 JavaScript 中创建 iframe 元素
3.  将此 iframe src 属性设置为将从步骤 1 激活脚本的 URL

不幸的是，它是特定于实现的，所以关于 Ext JS 方面的事情没有太多可说的。它不适用于 Ajax 请求。

# sql - 如何在 DB2 中查找表的主键的名称和值

> ID：11858553
> 
> 赞同：2
> 
> 时间：2012-08-08T06:05:50.863
> 
> 标签：sql, db2, primary-key

如何找到表的主键列名和值？我尝试查看 SYSCAT 表，但在此找不到任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T06:11:33.667

这应该为您提供大型机所需的内容：

[http://publibz.boulder.ibm.com/cgi-bin/bookmgr_OS390/BOOKS/DSNSQH11/E.8?DT=20010718164132](http://publibz.boulder.ibm.com/cgi-bin/bookmgr_OS390/BOOKS/DSNSQH11/E.8?DT=20010718164132)

DB2 10 Z/OS：

功能：

`SQLPrimaryKeys()`

[http://www.ibm.com/support/knowledgecenter/SSEPEK_10.0.0/odbc/src/tpc/db2z_fnprimarykeys.html](http://www.ibm.com/support/knowledgecenter/SSEPEK_10.0.0/odbc/src/tpc/db2z_fnprimarykeys.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-21T02:00:52.760

```
SELECT TBCREATOR,
       TBNAME,
       NAME,
       KEYSEQ

FROM SYSIBM.SYSCOLUMNS

WHERE TBCREATOR = 'DBSCHEMA'
  AND TBNAME = 'TABLE_NAME'
  AND KEYSEQ > 0

ORDER BY KEYSEQ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T21:35:14.463

您尝试使用 Java/Perl 等编程语言或 db2 命令行来执行此操作吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-24T20:08:55.477

使用以下查询列出数据库上的所有主键和外键：

```
select tbname, pkcolnames, fkcolnames from sysibm.sysrels 
```

对于特定的表，只需限制查询：

```
select tbname, pkcolnames, fkcolnames from sysibm.sysrels where tbname='<table name>' 
```

我在以下位置找到了这些信息：

[http://database.ittoolbox.com/groups/technical-functional/db2-l/how-to-find-a-primary-keys-and-foreign-keys-in-a-db2-table-268422](http://database.ittoolbox.com/groups/technical-functional/db2-l/how-to-find-a-primary-keys-and-foreign-keys-in-a-db2-table-268422)

# macos - 在 OS X 中监听键盘按下

> ID：11858556
> 
> 赞同：4
> 
> 时间：2012-08-08T06:06:00.970
> 
> 标签：macos, events, keyboard

我正在尝试为 OS X 编写一个简单的启动器应用程序。这意味着编写一个可以侦听被按下的键的后台进程。这是如何在 OS X 中完成的？我可以在某处安装监听器，还是可以轮询键盘的当前状态？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T06:53:36.407

如果您想为您的应用创建全局键盘快捷键，请使用 HotKey API。（虽然 HotKey API 是旧的 Carbon/CoreServices API，但它可用于 64 位 Cocoa 应用程序，并且在 10.8 Mountain Lion 中仍然得到完全支持且未弃用。）

[DDHotKey](https://github.com/davedelong/DDHotKey)是 Carbon HotKey API 的一个很好的 Cocoa 包装器。

要监听所有应用程序的所有击键，请使用[+[NSEvent addGlobalMonitorForEventsMatchingMask:handler:]](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/nsevent_Class/Reference/Reference.html#//apple_ref/occ/clm/NSEvent/addGlobalMonitorForEventsMatchingMask%3ahandler%3a)；但是，这不是实现启动器应用程序的正确方法。

# iphone - 在 iPhone 的 UIScrollView 中重复图像

> ID：11858557
> 
> 赞同：-1
> 
> 时间：2012-08-08T06:06:02.967
> 
> 标签：iphone, ipad, uiscrollview, uiimageview, uiimage

我是 iPhone 新手，

我想在 ScrollView 中重复我的 PatternImage。

**逻辑：** `768bg.gif`是我的图像，我添加了这个图像`UIImageView`，然后将 Imageview 添加到`UIScrollView`，但图像没有重复。

这是我的代码片段，

```
 CGRect scrollViewFrame = CGRectMake(0, 0, 1000, 600);
    UIScrollView *scrollVw = [[UIScrollView alloc] initWithFrame:scrollViewFrame];
    [self.view addSubview:scrollVw];
    [scrollVw release];

    UIImage *image1 = [UIImage imageNamed:@"768bg.gif"]; 
    self.imageView = [[UIImageView alloc] initWithImage:image1]; 
    [scrollVw addSubview:self.imageView]; 
    scrollVw.contentSize = CGSizeMake(image1.size.width+100, image1.size.height+100); 
```

**任何帮助都会得到帮助。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T06:09:30.543

您可以`[UIColor colorWithPatternImage:]`从记忆中使用 , 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:11:12.397

你可以参考这个链接....你要创造的是一个无限的`UIScrollview`权利？？ [http://mobiledevelopertips.com/user-interface/creating-circular-and-infinite-uiscrollviews.html](http://mobiledevelopertips.com/user-interface/creating-circular-and-infinite-uiscrollviews.html)

这里有一些示例代码供您理解....

```
for(int i=0; i < [Array count]; i++)
{       
    UIImageView *img = [[UIImageView alloc] init];
    [img setUserInteractionEnabled:YES];
    [img setTag:i];
    UITapGestureRecognizer *ges = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(setImage:)];
    ges.numberOfTapsRequired = 1;
    [img addGestureRecognizer:ges];
    img.bounds = CGRectMake(10, 10, 50, 50);
    img.frame = CGRectMake(0, yOffset, 50, 50);
    img.image = [UIImage imageNamed:[Array objectAtIndex:i]];
    [images insertObject:img atIndex:i];    
    ScrollView.layer.cornerRadius = 11;
    [ScrollView addSubview:[images objectAtIndex:i]];            
    yOffset += 50;
} 
ScrollView.contentSize = CGSizeMake(58,yOffset); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-08T06:14:46.377

1.  使用图形编辑器从您的 gif 中提取所有图像（iphone 无法“播放”gif）

2.  保存结果图像，如 name1.png、name2.png、name3.png（或您需要的任何扩展名）

3.  将图像导入您的项目，然后说：

`UIImageView *myImageView = [UIImageView alloc] bla-bla-create-the-imageview];`

```
 [myImageView setFrame:CGRectMake(bla-bla-whatever)];
            myImageView.animationImages = [NSArray arrayWithObjects:    
                                    [UIImage imageNamed:@"name1.png"],
                                    [UIImage imageNamed:@"name2.png"],
                                    [UIImage imageNamed:@"name3.png"],
                                    [UIImage imageNamed:@"name4.png"],
                                    nil];
    myImageView.animationDuration = 2.0;//or whatever time interval
    myImageView.animationRepeatCount = 0;
    [myImageView startAnimating];
    //add the imageVew to scroll 
```

# node.js - 是否有 nodejs 完整的 webserver 包，提供动态内容？

> ID：11858558
> 
> 赞同：0
> 
> 时间：2012-08-08T06:06:08.317
> 
> 标签：node.js, webserver

我正在构建我的第一个 nodejs 支持的站点。是否有一个单点包来处理：a) HTTP 请求和响应 b) 动态内容创建？

类似于 JSP 框架或 PHP 的 CodeIgniter，只是使用 Nodejs 对标准 Web 服务器操作的单点标准封装。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T06:08:34.663

表达为执行此操作的 cli 工具调用`express`。它非常有用。为拿到它，为实现它

```
sudo npm install express -g 
```

接着

```
express MyAppFolder 
```

# java - 如何在 Java 应用程序日历中设置一周的第一天

> ID：11858565
> 
> 赞同：7
> 
> 时间：2012-08-08T06:06:19.177
> 
> 标签：java, windows, calendar, weekday

我们使用一个 java 应用程序，它有一个日期选择字段，当您单击该字段时，会打开一个小日历。一周的第一天是星期天。但我希望它是星期一。我尝试从日期设置中的 Windows 控制面板更改它。例如，我将 Windows 日历的第一天设置为星期四。但是在 Java 应用程序的日历中，一周的第一天仍然是星期日。是否可以从 Windows 更改 Java 应用程序的一周的第一天，还是仅从 Java 应用程序的代码更改？

问候

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-08T06:18:11.417

您可以使用 setFirstDayOfWeek() 方法来设置一周的第一天。该方法只能影响 WEEK_OF_MONTH 或 WEEK_OF_YEAR 的返回值。对于 DAY_OF_WEEK，它什么也不做。

你可以实现类似的东西：

```
Calendar cal = Calendar.getInstance();
cal.setFirstDayOfWeek(Calendar.MONDAY);
int rec = cal.get(Calendar.WEEK_OF_MONTH);
System.out.println(rec); 
```

[在此处](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html#setFirstDayOfWeek%28int%29)阅读有关 API 的更多信息

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-01-17T06:53:39.363

如果你想设置星期一然后使用

```
Calendar currentCalendar = Calendar.getInstance(new Locale("en","UK")); 
```

如果要设置星期日，请使用

```
Calendar currentCalendar = Calendar.getInstance(new Locale("en","US")); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T06:19:33.677

您的 Java 应用程序使用哪个框架？日期选择字段是什么组件？

在 Java`Calendar`中，默认情况下一周的第一天由系统的区域设置决定。

因此，如果您无法更改应用程序的源代码：

*   您可能想要更改操作系统的区域设置（在您的情况下为 Windows）
*   或者您可以在启动 jvm 时使用各种命令行参数，例如`-Duser.country`或java。`-Duser.region for`看看[这里](http://www.oracle.com/us/technologies/java/locale-140624.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T06:42:25.147

```
Calendar now = Calendar.getInstance();
    System.out.println("Current date : " + (now.get(Calendar.MONTH) + 1) + "-"
        + now.get(Calendar.DATE) + "-" + now.get(Calendar.YEAR));

    String[] strDays = new String[] { "Sunday", "Monday", "Tuesday", "Wednesday", "Thusday",
        "Friday", "Saturday" };
    // Day_OF_WEEK starts from 1 while array index starts from 0
    System.out.println("Current day is : " + strDays[now.get(Calendar.DAY_OF_WEEK) - 1]); 
```

# pdf - 为什么我不能在 Adob e Reader X 中使用 soap.request()？

> ID：11858573
> 
> 赞同：2
> 
> 时间：2012-08-08T06:07:06.807
> 
> 标签：pdf, acrobat, livecycle, adobe-reader

我有一个`soap.request()`用于提交数据的小型 PDF

这在 Adob​​e Acrobat 下运行良好。我已经导出了具有扩展阅读器功能的文件，但是一旦我尝试调用`soap.request()`，我就会收到以下错误

> 安全设置阻止访问此属性或方法

有任何想法吗？

我已经阅读过，似乎我需要使用 Adob​​e Livecycle Reader 扩展来创建具有此功能的 PDF，这是正确的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:13:20.057

我没有在 Adob​​e Reader 中调用 SOAP Web 服务的个人经验，但[这个 forums.adobe.com 线程](http://forums.adobe.com/thread/718355?start=0&tstart=0)证实了您的假设。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-06T13:15:17.230

来自 Adob​​e 文档 (SOAP) - [API 文档](http://help.adobe.com/livedocs/acrobat_sdk/11/Acrobat11_HTMLHelp/wwhelp/wwhimpl/common/html/wwhelp.htm?context=Acrobat11_HTMLHelp&file=JS_API_AcroJS.89.1147.html)

SOAP 仅适用于：“...在**Acrobat Pro**和**Acrobat Standard中以及***在 Adob​​e Reader 6.0 或更高版本中打开的具有表单导出权限*的文档。”

# c++ - 访问被拒绝错误 - CreateFileMApping

> ID：11858583
> 
> 赞同：0
> 
> 时间：2012-08-08T06:08:11.077
> 
> 标签：c++, windows, winapi, windows-7, memory-mapped-files

大家
好，我正在为 CreateFileMapping 函数获取 GetLastError 5（拒绝访问）。任何人都可以帮助我吗？我的代码如下

```
typedef NTSTATUS(WINAPI *NtSetInformationFileNext)(HANDLE FileHandle, PIO_STATUS_BLOCK IoStatusBlock, PVOID FileInformation,
                                                  ULONG Length, FILE_INFORMATION_CLASS FileInformationClass);
NtSetInformationFileNext Real_NtSetInformationFileData = NULL;
NtSetInformationFileNext Real_NtSetInformationFileVar ;

NTSTATUS WINAPI NtSetInformationFileCallback(HANDLE FileHandle, PIO_STATUS_BLOCK IoStatusBlock, PVOID FileInformation,
                                                  ULONG Length, FILE_INFORMATION_CLASS FileInformationClass)
{

if(FileInformationClass == 10)
{

    FILE_RENAME_INFORMATION *pInfo = (PFILE_RENAME_INFORMATION)FileInformation;

            GetFileNameFromHandle(FileHandle);

    MessageBoxW(NULL, pInfo->FileName, L"Renamed To", MB_OK);   
}

return Real_NtSetInformationFileData(FileHandle, IoStatusBlock, FileInformation, Length, FileInformationClass);
} 
```

在上面的 NtSetInformationFile 回调函数中，我通过从 NtSetInformationFile 函数传递 FileHandle 来调用 GetFileNameFromHandle() 函数，因此在 GetFileNameFromHandle 函数中，我使用相同的句柄调用 CreateFileMapping。

如果上述代码有任何问题，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T06:37:34.667

[覆盖应该是评论的初始答案]

好的。您可能遇到以下两个问题之一： 1) 如果此代码在设备驱动程序的上下文中执行，那么它很可能作为具有系统权限的系统进程执行。传入的文件句柄是否来自以用户权限执行的应用程序？这可以解释拒绝访问。

2) 打开文件时没有 FILE_SHARE_READ 和/或 FILE_SHARE_WRITE。

# android - ImageView 不断旋转

> ID：11858585
> 
> 赞同：-1
> 
> 时间：2012-08-08T06:08:23.170
> 
> 标签：android

我在我的指南针应用程序中使用了一个 ImageView，当传感器值发生变化时它会旋转。问题是当设备达到 173 到 186 度角时，我的 ImageView 开始从 0-360 度角连续旋转。这个特殊问题是在我添加一段代码来降低 ImageView 的旋转速度之后开始的，然后这个应用程序运行得很好。

添加降低转速的方法

```
protected float[] lowPass( float[] input, float[] output ) {
    if ( output == null ) return input;

    for ( int i=0; i<input.length; i++ ) {
        output[i] = output[i] + ALPHA * (input[i] - output[i]);
    }
    return output;
} 
```

调用方法的传感器事件侦听器

```
private SensorEventListener mySensorEventListener = new SensorEventListener() {
.
.
.
public void onSensorChanged(SensorEvent event) {
.
.
.
SensorManager.getOrientation(rotationMatrix, orientationValues);

    accelVals = lowPass( orientationValues, accelVals );

    azimuth = (int) Math.toDegrees(accelVals[0]);
    azimuth = (azimuth +360)%360;
    allowRotating=true;
    dialer.post(new RotateRunnable(azimuth));
.
.
.
}
}; 
```

会很高兴如果有人可以帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T23:14:34.963

我的猜测是，当一个轴接近零时，您正在以一种不稳定的方式从笛卡尔坐标转换到极坐标。但也许它是 RotateRunnable 中的东西。

# postgresql - Visual Studio Entity Framework 连接到 Postgres 数据库

> ID：11858586
> 
> 赞同：2
> 
> 时间：2012-08-08T06:08:23.993
> 
> 标签：postgresql, entity-framework-4.1, database-connection

我想使用 EntityFramework 连接到 Postgres 数据库。那可能吗？

我选择：

> 添加>>新建项目>>ADO.Net实体数据模型>>从数据库生成>>新建连接

但我被困在那里。我需要为数据库中的表生成类。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T00:43:49.980

以下问题：

[实体框架 PostgreSQL](https://stackoverflow.com/questions/1211475/entity-framework-postgresql)

与您的极为相似，并且涵盖相同的领域。您将在那里看到对 npgsql 和 Devart 的引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T07:22:54.053

将 PostgreSQL 与 Entity Framework 结合使用的最佳解决方案是 Devart 的 dotConnect 提供程序。

您可以在此处找到 PostgreSQL 提供程序：

[http://www.devart.com/dotconnect/postgresql](http://www.devart.com/dotconnect/postgresql)

# asp.net - 从 asp.net 登录控制中删除本地数据库和成员资格提供程序

> ID：11858589
> 
> 赞同：0
> 
> 时间：2012-08-08T06:08:34.807
> 
> 标签：asp.net, login, asp.net-membership, local-database

我已经使用 Visual Studio 默认网站创建了一个应用程序。它在本地机器上运行良好，但是当我将它托管在服务器 iis 上时。它给出了错误

```
Could not find stored procedure 'dbo.aspnet_CheckSchemaVersion'. 
```

在我的数据库中没有这样的 sp，我也不想使用会员提供程序。所以我试图从 web.config 中删除本地连接，但仍然没有运气。

```
<remove name="LocalSqlServer" />
        <clear />
        <add name="LocalSqlServer" connectionString="Data Source=GGT\NNY;Initial Catalog=VersionControl;User ID=sa;Password=123" providerName="System.Data.SqlClient"/>

        <add name="ConVersionControl" connectionString="Data Source=GGT\NNY;Initial Catalog=VersionControl;User ID=sa;Password=123" providerName="System.Data.SqlClient"/> 
```

> 转换控制

是我在我的应用程序中使用的连接

以下是我用于登录的代码

```
protected void LoginButton_Click(object sender, EventArgs e)
    {
        try
        {
            dtUserDetails = new DataTable();
            if (UserRepositoryBL.ValidateUser(LoginUser.UserName.Trim(), LoginUser.Password.Trim(), out dtUserDetails))
            {

                AuthUser au = new AuthUser();
                if (dtUserDetails.Rows.Count > 0)
                {
                    DataRow DR = dtUserDetails.Rows[0];
                    au.UserID = Convert.ToInt32(DR["UserID"].ToString());
                    au.UserNo = DR["UserNo"].ToString();
                    au.UserName = DR["UserName"].ToString();
                    au.Password = DR["Password"].ToString();
                }
                string userData = au.ToString();
                FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(

             1,                             // Version number

             LoginUser.UserName.Trim(),      // Username

             DateTime.Now,                  // Issue date

             DateTime.Now.AddMinutes(60), // Expiration date

             false,                         // Persistent?

             userData                 // User data

         );

                string eticket = FormsAuthentication.Encrypt(ticket);

                HttpCookie cookie = new HttpCookie

                     (FormsAuthentication.FormsCookieName, eticket);

                Response.Cookies.Add(cookie);

                BasePage.ActivityLog("User Login", LoginUser.UserName.Trim(), true, Request.RawUrl);
                string url = FormsAuthentication.GetRedirectUrl(LoginUser.UserName, false);

                Response.Redirect(url);

            }
            else
            {
                LoginUser.FailureText = "Your login attempt was not successful. Please try again.";
            }

        }
        catch (Exception ex)
        {
            throw ex;
        }
    } 
```

> 请注意，应用程序可以正常登录成功。仅当我尝试使用无效的用户名或密码登录时才会出现上述错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:20:09.473

如果您不想使用 ASP.NET Membership 提供程序，则您可能从 IIS 服务器上的更高级别的 web.config 或 machine.config 继承了提供程序。

尝试在您的网络配置中清除提供程序：

```
<system.web>
    <membership>
        <providers>
            <clear /> ...

    <roleManager>
        <providers>
            <clear /> .. 
```

ETC

但是，如果您确实想使用 Membership，那么如果您的本地数据库中不存在 aspnet Membership 表、procs 等，但您的本地环境可以正常工作，则很可能在您的本地 Dev 环境中[创建了 Membership DDL默认数据库](http://msdn.microsoft.com/en-us/library/ms229862%28v=vs.80%29.aspx)，即`aspnetdb`

配置设置应该在`<membership>`您的 web.config 中。

您有 2 个选项：

1.  `aspnetdb`在生产环境中移动或创建数据库
2.  将`aspnetdb`表、过程等合并到本地数据库中，然后将其重新部署到生产环境中。

您还可以在此处参考如何从头开始将成员资格对象重新创建到数据库中： [找不到存储过程“dbo.aspnet_CheckSchemaVersion”](https://stackoverflow.com/questions/2165908/could-not-find-stored-procedure-dbo-aspnet-checkschemaversion)

# arrays - 什么都可以用数据结构来表示

> ID：11858606
> 
> 赞同：0
> 
> 时间：2012-08-08T06:09:45.807
> 
> 标签：arrays, data-structures, tree, project

# 所有对象都可以使用数据结构来表示或操作吗？

我在大学刚开始的学期被分配了一个小项目，并选择了数据结构作为我的主题。但我发现自己在将任务作为我的“项目工作”时不知所措。

但是，我对用于处理图像（如压缩等）的二维数组和四叉树有一些了解，但我想在开始之前考虑一些替代方案并获取一些标题。

所以，我想知道可以使用数据结构表示或操作的任何对象（现实世界甚至虚拟），或者更确切地说是树、数组等的任何其他实际用途，以便我能够熟练掌握数据结构（在本科阶段）。

欢迎任何关于数据结构实际实现的标题:)。

我有能力使用 C、C++ 和 Java，但如果需要，我已经准备好接受一门新语言，直到初级水平。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T19:56:41.147

通常，当涉及到此类任务时，大多数程序都会有一个可供选择的项目列表。如果您被要求定义您必须做什么，您应该首先确定以下内容：

*   预计或愿意为该项目投入多少时间
*   您是否希望编写工作程序或理论分析是否足够
*   你自己的目标是获得最高分还是学得最多（他们可能是不同的）
*   还要意识到数据结构和算法是紧密相连的。

一般模式可以是衡量可用于实现特定算法的不同数据结构的效率。用于操作大型数据集的数据结构，包括那些整个数据无法放入 RAM 的情况，与现在工业中正在发生的事情非常相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T20:13:36.627

数据结构在系统编程和数据库软件开发领域是必不可少的。

我建议研究不同的数据结构及其在存储小数据与大数据、异构与同质、快速搜索、遍历和查找方面的最优性。

更酷的是，我会编写自己的数据库或仅使用一种或另一种类型的数据结构实现的内存操作系统，然后报告经验。

示例项目：基于堆栈的数据库、面向图形的文件系统、...

# opencl - OpenCL 疑虑；如何将内在函数转换为简单的 c 语言？

> ID：11858610
> 
> 赞同：-1
> 
> 时间：2012-08-08T06:10:00.360
> 
> 标签：opencl

在 OpenCL 中，代码是这样写的

```
void unpack_8bit_to_16bit( const __m128i a, __m128i& b0, __m128i& b1 ) 
{
      __m128i zero = _mm_setzero_si128();
      b0 = _mm_unpacklo_epi8( a, zero );
      b1 = _mm_unpackhi_epi8( a, zero );
} 
```

现在我想把这段代码转换成c语言，可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:04:02.117

As noted in comments, this is not OpenCL code. However, if you meant how to convert this code *to* OpenCL, then the approach to vectorization is to use vector types, such as float4 (four 32-bit floats), double3 (three 64-bit doubles), long8 (eight 64-bit integers), etc... there are even hardcore types built-in like quad (128-bit float), complex doubles, etc...

In your case, what you essentially want is unpacking a bunch of bytes into 16-bit words, separating the low and high quads of the input. You can do this either by swizzling or by explicitly computing each vector, but there is also an alternate way to do this particular computation - OpenCL has a vector splitting mechanism, which splits an arbitrary vector type into its two lower and higher halves. This is done like this:

```
float4 input = (float4)(4.3, 0.71, 9.1, 44.8);
float2 inputLo = input.lo; // = (4.3, 0.71)
float2 inputHi = input.hi; // = (9.1, 44.8) 
```

Clearly this is amenable to your problem, since all you have to do is to split your char16 (sixteen 8-bit bytes) into two lower and higher char8's, and interpret these char8's as short8's (since you are unpacking), either by casting or explicitly converting.

Note that this is kind of a weird problem for OpenCL - this unpacking mechanism arises from the way data must be packed into SSE registers, so you constantly have to shuffle bytes around if you want to switch from 8-bit elements to 16-bit. In OpenCL this is unnecessary as you have vector types which don't assume a particular data arrangement (and you can readily convert from one type to another). If your OpenCL kernel happens to be executed on an SSE-capable processor, the kernel compiler will automatically do the packing and unpacking for you - hopefully optimally, if your code is sane.

You can't use intrinsics in OpenCL because kernels don't run exclusively on x86 and x64 hardware - they also run on GPU's, FPGA's, and custom chips. So instead, you use generic vector types which are automatically translated to the proper SIMD instructions on the platform on which the kernel is compiled (actually, it's a bit more complex, but that's the gist of it).

* * *

In view of your latest comment, I will add this: if you wish to convert the intrinsics into simple C code, all is needed is an understanding of how data is packed into SSE registers. This is how it works, in basic terms: each SSE registers is 128 bits wide, and can therefore hold either 16 bytes, 8 words, 4 longs, etc... you cannot mix these types, so you can't have for instance 2 bytes and 7 words, each intrinsic assumes a particular type (for instance you could be wanting the square root of each 64-bit double in the register, or the square root of each 32-bit float! clearly which type you choose matters).

These types are always contiguous, so say you want to convert an 8-word vector into two 4-long vectors, i.e. "unpacking" it to be able to do 32-bit calculations on it, this means you want to go from:

```
[16-bit][16-bit][16-bit][16-bit][16-bit][16-bit][16-bit][16-bit] 
```

to

```
[32-bit][32-bit][32-bit][32-bit] & [32-bit][32-bit][32-bit][32-bit] 
```

Clearly you cannot just reuse the register, because two 16-bit words would get merged into a single 32-bit value which will produce garbage. Instead, you have to methodically pull each 16-bit word out, cast it to a 32-bit long, and put it into the new register - SSE does all this in hardware (the intrinsic calls the appropriate instruction).

In your particular case, you have a register containing 16 bytes, and you want to "output" data in two other registers, which will instead contain 8 words. So if your input register contains a0..a15 (those are bytes), then you will have:

```
b0 = (word)a_0..(word)a_7
b1 = (word)a_8..(word)a_15 
```

You can do this in C using arrays, and "simulating" an SSE register (you can do the fancy way with an union containing each possible vector that fits in a register, or just hardcode different array types and convert from one another).

For reference, see [this](http://msdn.microsoft.com/en-us/library/xf7k860c%28v=vs.80%29.aspx), which explains it a bit (I also recommend you read up on how SSE registers work, because this is the reason packing exists and why it matters).

# c++ - 内存对齐 - Sparc(Sun) cc 编译器、Intel(Linux) g++ 编译器、Intel(Windows) MVSC 编译器

> ID：11858611
> 
> 赞同：5
> 
> 时间：2012-08-08T06:10:02.373
> 
> 标签：c++, algorithm, architecture, g++, memory-alignment

我的问题由两部分组成。

1.  我注意到带有 cc 编译器的 sparc(sun) 上的 memalign(block_size,bytes) 不会检查字节是 2 的幂，而不是 intel linux 上的 memalign 和带有 mvsc 编译器的 windows 上的 _aligned_malloc 会检查字节是2的幂。

这是太阳中的一个错误，是否有补丁或者我需要自己编写一个 memalign。

1.  另外我有一个结构（不是我的代码）：

    ```
    typedef struct CLHLockStruct {
        volatile CLHLockNode CACHE_ALIGN *Tail ;
        volatile CLHLockNode CACHE_ALIGN *MyNode[N_THREADS] ;
        volatile CLHLockNode CACHE_ALIGN *MyPred[N_THREADS] ;
    } CLHLockStruct; 
    ```

我在 MVSC (visual studio 2008) 下编译：

```
 CACHE_LINE_SIZE = 64
    CACHE_ALIGN = __declspec(align(CACHE_LINE_SIZE)) 
    N_THREADS = 8
    sizeof(CLHLockStruct)=192 
```

该代码最初是为 sparc 架构编写的，我尝试将其迁移到 MVSC 而不更改太多代码。

在他们的代码中，他们使用 memalign(CACHE_LINE_SIZE,sizeof(CLHLockStruct))，我已将其更改为 _aligned_malloc，我的问题是 sizeof(CLHLockStruct) 不是 2 的幂，我可以编写一些函数来查找下一个数字2的幂。

他们是更好的方法吗？

**编辑1**

我如何填充这个结构，使其大小为 2 的幂？

**编辑2**

是否有类似 _aligned_malloc 和 malloc 的函数：返回与 block_size 的倍数对齐但不要求字节为 2 的幂的内存指针？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T07:18:17.567

> in their code they use memalign(CACHE_LINE_SIZE,sizeof(CLHLockStruct)), and i have changed it to _aligned_malloc , my problem is that sizeof(CLHLockStruct) is not a power of 2,

Did you change it to `_aligned_malloc(CACHE_LINE_SIZE,sizeof(CLHLockStruct))`? Yes, that would cause this. [`_aligned_malloc`](http://msdn.microsoft.com/en-us/library/8z34s9c6%28v=vs.100%29.aspx) expects the size as its first argument, and the alignment as the second, the opposite of `memalign`, so you need to swap the arguments. The size does not need to be a power of two.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T06:54:39.230

**答案 1：** POSIX[标准将 memalign 定义](http://pubs.opengroup.org/onlinepubs/009695399/)为返回 2 的幂*和*系统指针大小的倍数。但它也要求 blocksize 参数是 2 的幂。你的代码是这样的吗？在这种情况下，也可能是您的 Win 库不完全符合 POSIX。

**答案 2：** [这篇 SO 帖子](https://stackoverflow.com/questions/1322510/given-an-integer-how-do-i-find-the-next-largest-power-of-two-using-bit-twiddlin)列出了几种确定二的下一个幂的方法，您可以在对齐的 malloc 实现中使用这些方法。

**答案 3：**我（更好：谷歌）找到了另一篇文章，解释[了将结构填充为 2 的幂的倍数](https://stackoverflow.com/questions/1239855/pad-a-c-structure-to-a-power-of-two)。

# c# - 在 WP7 中从服务器获取数据时的进度条

> ID：11858618
> 
> 赞同：0
> 
> 时间：2012-08-08T06:10:26.570
> 
> 标签：c#, windows-phone-7, xaml

如何在wp7中从数据库中获取数据时显示进度条？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T06:32:11.627

获取数据时，将标志 ( `bool`)设置`IsLoading`为`true`。完成后，将相同的标志设置为`false`. 每当更改时执行`onPropertyChanged`-event。

要显示进度条，请将以下内容添加到您的`XAML`：

```
<toolkit:PerformanceProgressBar 
       x:Name="performanceProgressBar" 
         IsIndeterminate="true" 
         Visibility="{Binding IsLoading, Converter={StaticResource VisibilityConverter}}" /> 
```

然后你实现一个`VisibilityConverter`and 把你的`bool`值变成一个`Visibility`-enum。

网上有很多关于这方面的信息，所以我不会重写别人教我的东西。看看这些链接：

*   [http://bit.ly/S1SjTf](http://bit.ly/S1SjTf) <-- 从这里开始
*   [http://www.windowsphonegeek.com/articles/WP7-PerformanceProgressBar-in-depth](http://www.windowsphonegeek.com/articles/WP7-PerformanceProgressBar-in-depth)
*   [http://blogs.msdn.com/b/rickyt/archive/2010/08/18/windows-phone-applications-downloading-images-and-indeterminate-progressbar.aspx](http://blogs.msdn.com/b/rickyt/archive/2010/08/18/windows-phone-applications-downloading-images-and-indeterminate-progressbar.aspx)

# java - MySQL 中的 Java 属性文件

> ID：11858621
> 
> 赞同：2
> 
> 时间：2012-08-08T06:10:43.167
> 
> 标签：java, mysql, properties

是否可以在数据库表中实现属性文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T06:14:55.660

当然。

您可以为此使用 JavaDB、SQL lite、MySQL 等。它也很容易绑定。

以下是一些示例项目：

[http://pure-essence.net/2011/02/10/spring-loading-properties-from-database-with-a-twist/](http://pure-essence.net/2011/02/10/spring-loading-properties-from-database-with-a-twist/)

[http://www.codeproject.com/Articles/28893/Loading-Application-Properties-from-a-Database](http://www.codeproject.com/Articles/28893/Loading-Application-Properties-from-a-Database)

# php - 随机选择一个变量，但所有变量都应从数组中同等选择

> ID：11858622
> 
> 赞同：-3
> 
> 时间：2012-08-08T06:11:08.627
> 
> 标签：php, drupal, web-applications

> **可能重复：**
> [随机选择一个变量，但每个变量都应从数组中同等选择](https://stackoverflow.com/questions/11858330/select-a-variable-randomly-but-each-varaible-should-be-equally-selected-from-an)

我需要一个函数（最好是 PHP），它一次从数组中随机选择一个变量，但满足以下条件。假设我在数组中有 3 个变量。每次它应该选择一个变量。但如果我执行该函数 10 次，则每个变量应至少选择 3 次。IE。最后应该平等地选择所有变量我无法从数组中删除或取消设置任何变量，因为函数的执行发生在页面刷新中，因此数组将包含所有值

见人，我知道我可以在 php 中使用 array_rand 函数来随机选择一个变量。在这里它不能保证我可以实现上述逻辑（如果我执行这个函数 10 次，每个变量应该被选择至少 3 次）。

其他方式我可以利用会话。但我想看看是否有其他方法可以代替使用会话或 cookie。

示例：我执行了此功能 10 次。这里发生的情况就像“1”显示了 5 次，“2”显示了 3 次，“3”显示了 2 次。但是有没有可能让它每次显示3次？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T06:16:13.093

您已经定义了相互排斥的要求：“随机选择”和“均等选择”（或“均匀分布”）！你不能两者都做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T06:16:46.270

[这](http://php.net/manual/fr/function.array-rand.php)就是你需要的：`array_rand`

例子 ：

```
<?php
$input = array("Neo", "Morpheus", "Trinity", "Cypher", "Tank");
$rand_keys = array_rand($input, 1);
echo $input[$rand_keys[0]] . "\n";
?> 
```

# json - node.js 中的 JSON

> ID：11858626
> 
> 赞同：0
> 
> 时间：2012-08-08T06:11:12.933
> 
> 标签：json, node.js

> **可能重复：**
> [Node.js 中的 JSON 数组](https://stackoverflow.com/questions/11911438/json-array-in-node-js)

我对 node.js 有点陌生，我只在服务器端工作以从客户端回答 POST。我需要做的是当使用参数'theArray'在位置'/sort'发出POST请求时，对数组进行排序，删除所有非字符串值并将结果值作为JSON返回。theArray 参数将是一个字符串化的 JSON 数组。我在这里尝试过这段代码：

```
case '/sort':
        if (req.method == 'POST') {
            res.writeHead(200,{
                'Content-Type': 'application/json'
            });
            var fullArr = "";
                req.on('data', function(chunk) {
                    fullArr += chunk;
                    });
                req.on('end', function() {
                            var query = JSON.parse(fullArr);
                            var arr = "";
                            var par = query.theArray;
                            arr += par;
                    console.log(arr); 

                                function censor(key, value) {
                                    if (typeof value == "string") {
                                            return value;
                                        } 
                                        return undefined;
                                        }
                        var jsonString = JSON.stringify(arr, censor);
                        console.log(jsonString);
                });         
                    res.end();

        }; 
```

休息;

但它只是返回相同的东西？我也试过用 JSON.parse 替换 qs.parse 并且它只是返回 undefined？有人可以帮忙吗！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T06:30:45.187

检查这个：

1.  请求块接收的数据。绝对不能保证您会收到第一个块中的所有数据。[只有在 ' end](http://nodejs.org/api/http.html#http_event_end) ' 事件触发后，您才需要解析输入数据。
2.  在审查函数中，您有未定义的变量“i”。你是说“钥匙”吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:30:54.373

等到请求结束..然后解析你的 fullArray

```
var data = ""
req.on('data',function(chunk){data+=chunk})
req.on('end',function(){...parse here....}) 
```

# objective-c - 在xcode中，如何调用返回值的类方法？

> ID：11858628
> 
> 赞同：2
> 
> 时间：2012-08-08T06:11:20.087
> 
> 标签：objective-c, ios, xcode

我是 Objective-C 的新手，我一生都无法克服错误，“没有选择器的类方法”

这是我的 .h 代码：

```
#import <UIKit/UIKit.h>

@interface PhotoCapViewController : UIViewController < UIImagePickerControllerDelegate, UINavigationControllerDelegate > {
    UIImageView * imageView;
    UIButton * choosePhotoBtn;
    UIButton * takePhotoBtn;
}
@property (nonatomic, retain) IBOutlet UIImageView * imageView;
@property (nonatomic, retain) IBOutlet UIButton * choosePhotoBtn;
@property (nonatomic, retain) IBOutlet UIButton * takePhotoBtn;
- (IBAction)getPhoto:(id)sender;

+ (UIImage *)burnTextIntoImage:(NSString *)text :(UIImage *)img;

@end 
```

这是我在 .m 中定义的函数

```
+ (UIImage *)burnTextIntoImage:(NSString *)text :(UIImage *)img {

    ...

    return theImage;
} 
```

这是我调用函数的方式

```
UIImage* image1 = [PhotoCapViewController burnTextIntoImagetext:text1 img:imageView.image]; 
```

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T06:17:03.273

您调用的方法与定义不匹配。

定义是这样的：

```
+ (UIImage *)burnTextIntoImage:(NSString *)text :(UIImage *)img; 
```

所以方法名称是这样的：

```
burnTextIntoImage:: 
```

但是你这样称呼它：

```
UIImage* image1 = [PhotoCapViewController burnTextIntoImagetext:text1 img:imageView.image]; 
```

所以你试图调用一个名为这样的方法：

```
burnTextIntoImagetext:: 
```

你可以这样正确地调用它：

```
UIImage* image1 = [PhotoCapViewController burnTextIntoImage:text1 :imageView.image]; 
```

虽然真的，你的方法应该被调用`burnText:(NSString*)text intoImage:(UIImage*)image`，所以它更像是一个“句子”，像这样：

```
+ (UIImage *)burnText:(NSString *)text intoImage:(UIImage *)image;

...

UIImage *image1 = [PhotoCapViewController burnText:text1 intoImage:imageView.image]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T06:23:09.417

您的方法声明不完整。

改变

```
+ (UIImage *)burnTextIntoImage:(NSString *)text :(UIImage *)img; 
```

到

```
+ (UIImage *)burnTextIntoImage:(NSString *)text img:(UIImage *)img; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-08T06:18:21.633

您的调用代码错误，请尝试使用此代码

```
UIImage* image = [PhotoCapViewController burnTextIntoImage:text1 img:imageView.image]; 
```

# java - 如何在 Jython 中获取 Java 实例的类型？

> ID：11858630
> 
> 赞同：3
> 
> 时间：2012-08-08T06:11:26.343
> 
> 标签：java, python, jython

```
from java.util import LinkedList
type(LinkedList()) 
```

上面的代码只给出“type 'javainstance”作为输出，但是我想知道真正的 Java 实例类型，在这种情况下应该是“LinkedList”。这可能吗？

谢谢！

顺便说一句，我的版本是 jython 2.2.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T06:24:58.620

Howard，如果您使用的是旧版 Jython，请尝试致电

`LinkedList.getClass()`

和

`object.getClass().getName()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:25:06.283

我想你应该可以使用

```
lst =LinkedList()
lst.class 
```

类似于你在java中的方式。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-08T06:20:22.787

昨晚刚安装了最新的jython。让我们来看看...

```
Jython 2.5.3rc1 (2.5:8fd14231e553, Aug 7 2012, 10:29:09)
[Java HotSpot(TM) 64-Bit Server VM (Sun Microsystems Inc.)] on java1.6.0_31
>>> type(LinkedList)
<type 'java.lang.Class'>
>>> l = LinkedList()
>>> type( l )
<type 'java.util.LinkedList'> 
```

你有什么版本的 Jython？我从经验中知道，某些级别的检查只出现在以后的版本中。

# .net - 使用 TeamCity 从 msbuild 2 脚本构建面向 msbuild 4 的项目

> ID：11858634
> 
> 赞同：0
> 
> 时间：2012-08-08T06:11:57.060
> 
> 标签：.net, msbuild, teamcity

我有一个使用 TeamCity 构建多个项目的 msbuild 脚本。它构建了一些 C++ builder 2010 项目和一些 C# 项目。它还为它们创建一个安装程序并将其打包。现在我有一个要添加的新项目，但问题是它是使用 .Net Framework 4 构建的，而其他较旧的项目以及构建脚本本身都以 .Net Framework 2 为目标。

在 TeamCity 的设置中，选择使用 msbuild 2 构建并将其更改为 4（希望它向后兼容）只会导致大量错误。

我想知道是否有一种好方法可以使用 msbuild 4 来构建特定项目，而无需在 TeamCity 中进行新的构建步骤。

我尝试使用 exec 命令从 msbuild 2 调用 msbuild 4，它运行良好。但也许有一些“更好”的方式来做到这一点。

“有效”的示例

```
<Exec Command="C:\Windows\Microsoft.NET\Framework64\v4.0.30319\MSBuild /t:FooBar /p:Configuration=Debug ..\FooBar\FooBar.sln"/> 
```

**更新：**我设法使用 msbuild 和 .Net Framework 4 编译了所有旧的东西。所以这不再是一个真正的问题了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T07:34:04.893

我以“正确”的方式解决了它。确保可以使用较新的 msbuild 构建所有旧的东西，并以它们的目标 .Net 框架为目标。使用*exec*的方法也行得通，但总感觉像个 hack。

# matlab - 如何学习这些matlab语句？

> ID：11858638
> 
> 赞同：1
> 
> 时间：2012-08-08T06:12:10.997
> 
> 标签：matlab, equation-solving

我已被告知我们需要知道哪些陈述，这是我对他们所做的事情的回答。如果我在某处弄错了，请纠正我，并请告诉我如何学习我可能需要的更高级的语句，例如我尚未学习的元素操作的`.*`and 。`.^`

```
%  Mini-Matlab:
%  =============
% 
%  Find out what these statements do!
%  Then you can write a Matlab-program.

% "%" starts a Matlab comment

x=[2 3] 
```

上面就像一个数组，一个在语句之后驻留在内存中的向量。

`y=[4 5]'`

这是一个列向量。

`A=[x; y']`

分号分隔矩阵的行。

`B=sin(A)`

这就像一个常规的数学函数。

`z=x.*y'`

这也就像经典数学/ CS中的一个函数。

`c=A\y`

这很重要，并且可以解决方程组，但是哪个？原方程如何表述？以上解决了Ay=c吗？请明确说明。

`a='Hej'`

以上只是一个变量，就像任何其他计算机语言一样。

a(2)='a'

上面将向量 a 的第二个元素设置为字符串 'a'。

`v=3:2:9`

上面用步骤 2 构造了一个从 3 到 9 的向量。

`w=5:3:15`

上面用第 3 步构造了一个从 5 到 15 的向量。

`t=0:0.05:10;`

t 成为 0 到 10 之间的向量，增量为 0.05。

`f=t.*exp(2*t);`

这就像一个常规的函数定义。

`plot(t,f)`

这将函数绘制在 y 轴上，将 t 绘制在 x 轴上。

`title('Fin kurva');`

这只是设置图表的标题。

`g=3*t.*sin(t);`

这是一个更复杂的函数定义，仍然很容易理解它的作用。

`k=cos(t+2)+sin(t.^2);`

另一个简单的函数定义。

`help XXX % XXX=sin, cos, plot, disp`

访问在线帮助系统。

```
if CONDITION
  STATEMENTS...
end; 
```

不言自明。

```
if CONDITION
  STATEMENTS...
else
  STATEMENTS...
end; 
```

也是不言自明的。

```
for VARIABLE = VECTOR
  SATSER...
end; 
```

一个普通的for循环

```
while VILLKOR
  SATSER...
end; 
```

如果您曾经编程过，很容易理解。

所以我想我理解了大部分陈述，但从这个列表中，似乎与研究最相关的是我需要练习如何使用的方程求解器 c=A\y。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:16:07.113

> `x=[2 3]`
> 
> 上面就像一个数组，一个在语句之后驻留在内存中的向量。

`[ ... ]`创建一个包含您放在括号内的所有内容的矩阵。矩阵可以是标量 ( `1x1`)、行向量 ( `1xN`)、列向量 ( `Nx1`) 或完整的二维矩阵 ( `MxN`)。Matlab 也知道更高维矩阵，但是您不能使用括号表示法输入它们（但是可以输入更高维矩阵的切片（它们本身是 2d））。

> `y=[4 5]'`
> 
> 这是一个列向量。

`[4 5]`创建一个`1x2`向量，`'`是[转置算子](http://www.mathworks.nl/help/techdoc/ref/arithmeticoperators.html)，将其转换为`2x1`向量。

> `A=[x; y']`
> 
> 分号分隔矩阵的行。

确实，并且因为`x`is`1x2`和`y'`also，`A`is`2x2`与它的第一行`x`和第二行`y'`。

> `B=sin(A)`
> 
> 这就像一个常规的数学函数。

[sin](http://www.mathworks.nl/help/techdoc/ref/sin.html) :`Y = sin(X)`返回 的元素的正弦值`X`。因此，您可以输入标量、向量甚至矩阵。输出与输入大小相同。

> `z=x.*y'`
> 
> 这也就像经典数学/ CS中的一个函数。

`.*`是[逐元素乘法运算符](http://www.mathworks.nl/help/techdoc/ref/arithmeticoperators.html)。重要的是`x`和`y`大小相同，否则会出错！的每个元素`x`都与 的对应元素相乘`y`，在这种情况下，结果将是：`[2*4 3*5]`

> `c=A\y`
> 
> 这很重要，并且可以解决方程组，但是哪个？原方程如何表述？以上解决了Ay=c吗？请明确说明。

[文档](http://www.mathworks.nl/help/techdoc/ref/arithmeticoperators.html)：反斜杠或矩阵左除法。如果 A 是方阵，则 A\B 与 inv(A)*B 大致相同，只是计算方式不同。

所以它等于`c=inv(A)*y`，因此它解决了`A*c=y`。如果您不一直使用它们，那么这些斜杠和反斜杠总是很棘手。

> `a='Hej'`
> 
> 以上只是一个变量，就像任何其他计算机语言一样。

`'`不正确，符号中指定的任何文本都被解释为文本，因此`a`将是一个字符数组，您可以使用[whos 函数](http://www.mathworks.nl/help/techdoc/ref/who.html)看到这一点。

> `a(2)='a'`
> 
> 上面将向量 a 的第二个元素设置为字符串 'a'。

正确，这仅是可行的，因为 a 是 char 类型，而 'a' (rhs) 是`1x1`char。结果`a`将包含“Haj”。

> `v=3:2:9`
> 
> 上面用步骤 2 构造了一个从 3 到 9 的向量。

正确，所以结果是：`v = [3 5 7 9]`。注意`3:2:10`产生相同的向量！

> `w=5:3:15`
> 
> 上面用第 3 步构造了一个从 5 到 15 的向量。

正确的

> `t=0:0.05:10;`
> 
> `t`变为 0 到 10 之间的向量，增量为 0.05。

从0到10，包括！

> `f=t.*exp(2*t);`
> 
> 这就像一个常规的函数定义。

与正弦函数相同的事情，加上`t`与`exp(...)`

> `plot(t,f)`
> 
> 这将函数绘制在 y 轴上，将 t 绘制在 x 轴上。

这会`f`在 y 轴和`t`x 轴上绘制向量，因此生成的图将包含`(t(ii), f(ii))`范围`ii`从 1 到向量长度的数据点。`t`并且`f`长度必须相同！

> `title('Fin kurva');`
> 
> 这只是设置图表的标题。

正确的

> `g=3*t.*sin(t);` `k=cos(t+2)+sin(t.^2);`
> 
> 简单的功能。

正确的

> `help XXX % XXX=sin, cos, plot, disp`
> 
> 访问在线帮助系统。

正确，但它不是在线的，它是内置的。例如：'help sin' 会给你一些使用 sin 函数的帮助。

> 如果条件声明...结束；
> 
> 不言自明。
> 
> if 条件语句... else 语句... 结束；
> 
> 也是不言自明的。
> 
> 对于 VARIABLE = VECTOR SATSER... 结束；
> 
> 一个普通的for循环

是的，将按顺序`VARIABLE`获取所有值。`VECTOR`您可以`VECTOR`作为变量传递，也可以直接作为`1:2:10`. 例子：[这里](http://www.mathworks.nl/help/techdoc/learn_matlab/f4-1931.html#brbss8u-1)

在线 matlab 文档通常可以提供您需要的所有信息，对于其他所有信息，都有 SO。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T07:28:18.153

`c=A\y`是解方程的矩阵左除法`Ac=y`。

如果`A`是方阵，则`A\y`等价于或`inv(A)*y`，但它们的计算方式不同。`pinv(A)*y``mldivide(A,y)`

如果 A 是一个矩形矩阵，`inv`则不适用，所以`A\y`等价于`pinv(A)*y`和`mldivide(A,y)`。它们是最小二乘解，`Ac=y`但意义不同。

更多信息[在这里](http://www.mathworks.com/help/techdoc/ref/mldivide.html)

# javascript - 如何 在jquery中用\ n（新行）替换标签

> ID：11858639
> 
> 赞同：0
> 
> 时间：2012-08-08T06:12:11.247
> 
> 标签：javascript, jquery, jsp-tags

我使用此代码片段将`<br/>`标签替换为 jquery 中的“\n”（新行）。但它没有用

```
 $("#UserTextArea").html(data.projectDescription).replace(/\<br\>/g, "\n"); 
```

但它没有工作，这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T06:15:34.843

`.replace()`不会改变内容本身。它返回一个新字符串，所以如果你想使用这个新字符串，你必须把返回值`.replace()`放在某个地方。

`<br\>`如果您通过转义 \ 并将其设为可选来定位，您可能还需要修复您的正则表达式。

仅供参考，在 HTML a`\n`中什么都不做，所以如果您只是想删除 中的所有`<br>`标签`#UserTextArea`，您可以使用 DOM 解析器来执行此操作：

```
$("#UserTextArea br").remove(); 
```

或者，如果您只想将带有`<br>`标签的字符串替换为可用于其他用途的变量，您可以这样做：

```
var str = $("#UserTextArea").html().replace(/\<br\\?>/g, "\n"); 
```

或者，您是要删除`<br>`表单`data.projectDescription`并将其作为 HTML 分配给的字符串`#UserTextArea`，您可以这样做：

```
$("#UserTextArea").html(data.projectDescription..replace(/\<br\\?>/g, "\n")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T06:14:52.363

`$("#UserTextArea").html(data.projectDescription.replace(/\<br[\/]*\>/g, "\n"));`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T06:20:46.290

```
$('#UserTextArea').html(data.projectDescription.replace(/\<br\s*\>/g, '\n')); 
```

或者，搜索和替换元素的内部 HTML：

```
var $element = $('#UserTextArea');
var html = $element.html();
$element.html(html.replace(/\<br\s*\>/g, '\n')); 
```

# qt - Qt 的内存分析工具

> ID：11858642
> 
> 赞同：0
> 
> 时间：2012-08-08T06:12:48.517
> 
> 标签：qt

我想知道除 Valgrind 之外的任何内存分析器工具是否可用于 Qt 4。如果是这样，那么如果您能告诉我如何将它们与 Qt 集成将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:58:08.893

除了 Valgrind ， [Qt Development Network](http://qt-project.org/wiki/Profiling-and-Memory-Checking-Tools)上还有一个页面介绍了其他几个工具。我正在寻找可以帮助您集成到 Qt 的其他站点。

*   非常困 [codersnotes.com]（基于采样的开源 CPU 分析器）
*   Rational Purify [01.ibm.com]（商业）
*   边界检查器 [microfocus.com]
*   视觉泄漏检测器 [codeproject.com]
*   AQTime [smartbear.com]（商业）可以检测内存泄漏，但主要用于分析
*   英特尔 Parallel Inspector [software.intel.com]（商业）
*   Luke Stackwalker [lukestackwalker.sourceforge.net]（基于采样的开源 CPU 分析器）
*   Visual Studio Profiler（最高到 VS 2010 终极版，VS 11 专业版才有）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:42:28.157

从以上选项来看， [Very Sleepy](http://www.codersnotes.com)是开源工具。由于“非常困”是一个独立的分析器，您不必与 Qt 集成。希望这会帮助你。

# jquery-mobile - JQuery Mobile，固定工具栏不起作用

> ID：11858644
> 
> 赞同：0
> 
> 时间：2012-08-08T06:12:51.277
> 
> 标签：jquery-mobile

我正在我的 iPhone 中查看[此](http://jquerymobile.com/test/docs/toolbars/bars-fixed.html)演示页面，但似乎固定工具栏不起作用。在普通浏览器中的 Firefox 中查看时，我可以看到固定的工具栏，但在 iPhone 上的移动浏览器中，这些工具栏不是固定的，它们会在页面滚动时滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:58:25.000

我假设您正在运行 iOS 4 - 它对固定元素的支持充其量是不稳定的。

# c# - Word VSTO 加载项 (VS2010/Word2010) 中的 SEHException

> ID：11858648
> 
> 赞同：0
> 
> 时间：2012-08-08T06:13:07.840
> 
> 标签：c#, .net, visual-studio-2010, ms-word, vsto

我遇到了一个奇怪的问题，我的 .net c# 4.0 插件（一个相对简单的插件，具有大量互操作和自定义任务窗格）导致 word 崩溃：

如果加载项运行时间较长（> 5 分钟），有时会突然出现 Windows 对话框“word 不再工作”。几秒钟后，插件错误对话框打开，我瞥见它显示了 SEHException。但随着 Windows 立即重新启动 Word，我无法仔细查看异常。调试器没有帮助，因为它无法中断。

知道导致 SEHException 的原因以及我可以调查的内容吗？Word/VSTO 具体建议是理想的，但也欢迎有关避免和调查 SEHExceptions 的一般建议。

谢谢查本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T06:17:35.713

获得此异常的一种方法是非托管代码执行操作系统`RaiseException()`或导致故障。如果该异常在堆栈中向上传播到托管代码，我们将尝试将其映射到托管异常。例如，`STATUS_NO_MEMORY`映射到`OutOfMemoryException`和`STATUS_ACCESS_VIOLATION`映射到`NullReferenceException`。

对于所有没有预定义映射的异常代码，我们将它们包装到`SEHException`.

来自[什么是 SEHException？](http://blogs.msdn.com/b/cbrumme/archive/2003/04/15/51332.aspx) *cbrumme：msdn 博客*。

* * *

尝试在每个可能导致或异常`try{} catch{}`的代码上添加块。然后用于获取异常详细信息。`STATUS_NO_MEMORY``STATUS_ACCESS_VIOLATION`[`ExternalException.ErrorCode`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.externalexception.errorcode.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:10:49.980

**我注意到使用Release Configuration**编译时不会发生异常。

如果有人遇到同样的情况，请尝试发布配置。

# maven - 尝试添加链接资源时，build-helper-maven-plugin add-source 不起作用

> ID：11858649
> 
> 赞同：0
> 
> 时间：2012-08-08T06:13:14.397
> 
> 标签：maven, maven-eclipse-plugin

我是 maven 的新手，一开始遇到了一个看起来很容易的问题，但我已经让我忙了一整天，没有办法让它工作。

首先，作为运行 eclipse:eclipse 插件的一部分，我创建了一个链接文件夹，如下所示：

```
<linkedResources>
<linkedResource>
    <name>properties</name>
    <type>2</type>
    <location>${PARENT-2-PROJECT_LOC}/some_other_project/properties</location>
</linkedResource>
<linkedResource>
    <name>properties/messages.properties</name>
    <type>1</type>
    <location>${PARENT-2-PROJECT_LOC}/some_other_project/properties/messages.properties</location>
</linkedResource> 
```

然后我将该文件夹添加为源文件夹，如下所示：

```
<plugin>
<groupId>org.codehaus.mojo</groupId>
<artifactId>build-helper-maven-plugin</artifactId>
<version>1.7</version>
<executions>
  <execution>
    <id>add-source</id>
    <phase>generate-sources</phase>
    <goals>
      <goal>add-source</goal>
    </goals>
    <configuration>
      <sources>
        <source>properties</source>
        <source>some_real_folder</source>
      </sources>
    </configuration>
  </execution>
</executions>
</plugin> 
```

但是，当我在 eclipse 中查看生成的 .classpath 时，“some_real_folder”在那里，但“properties”却没有。看起来默认情况下 build-helper-maven-plugin 将检查文件夹是否存在，如果不存在则不会添加它。

我在 Eclipse 之外使用 maven 3.0.4 来运行构建，我可以在 maven 日志中看到如下内容：

```
[INFO] Source directory: <some path>\properties added. 
```

这是我的项目结构：

```
project1 
  \-- properties (this is the real folder) 

project2
   \-- some_real_folder
   \-- properties (this is the link resource pointing to the project1/properties folder) 
```

我只需要将“some_real_folder”和链接资源“properties”都添加到project2的.classpath

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:02:58.587

将来自人工制品外部的东西直接包含到人工制品中是一种不好的做法。您应该只将文件夹 project2 下的 project2 内容和 project2 依赖项中的内容包含到 project2 中。（我不确定你正在做的事情是否可能。）

所以，如果你想让 project1/properties 在 project2 中可用，你通常将 project1/properties 打包到 project1 的 artefact 中，并将对 project1 的依赖添加到 project2 中。如果由于某种原因这不起作用（例如，因为您想将 project1 的东西移动到 project2 中的另一个位置），您可以使用[maven-dependency-plugin](http://maven.apache.org/plugins/maven-dependency-plugin/) dependency:copy-dependencies 将其解压到 project2 的目标中到某个适当的位置。

# c# - 在 ASP.NET 页面的多次回发期间遇到错误

> ID：11858650
> 
> 赞同：0
> 
> 时间：2012-08-08T06:13:18.043
> 
> 标签：c#, asp.net, exception, autopostback

我制作了一个 ASP.NET 网页，它根据日期（使用日历控件选择）和段（使用下拉列表选择）检索一些数据。更改日期或段会导致页面刷新并重新加载数据。

现在，当我使用 Visual Studio 服务器运行网页时，会发生以下情况：

*1）当我选择一个新的日期（比如从X到Y），然后在刷新页面之前*更改段（比如从A到B），那么日期仍然是X，并且为date = X检索数据并且段=B。

2) 当我选择一个新的段（A 到 B），然后在刷新页面*之前*更改日期（X 到 Y）时，两者都被更改，并且相应地检索日期 = Y 和段 = B 的数据。

现在，我已经使用 IIS 在我的 PC 上托管了这个网页。当我在使用 IIS 托管的网页上进行上述两个操作时，我遇到了异常。如果我重复这两个操作三次，我会得到六个不同的异常！

知道为什么会这样吗？提前致谢！

# iframe - 文本框的 Flex iFrame wmode 问题

> ID：11858658
> 
> 赞同：0
> 
> 时间：2012-08-08T06:14:23.930
> 
> 标签：iframe, flex4, wmode, safari

这是一个老问题，但我已经搜索和搜索，但尚未找到适合该问题的解决方法。

我有一个需要弹出 HTML 的 flex 应用程序（我需要显示的 HTML 是从第 3 方服务器生成的），因此使用了 Flex iFrame 来显示它。我的问题是旧浏览器的分层需要 wmode="opaque"，但是当我这样做时，我的文本框停止在 Safari 中接收键盘输入。

有谁知道这个问题的有效解决方案？

我找到了不同的解决方案，但没有一个对我有用：

1.  将 HTML 输入表单定位在与 Flex 输入表单相同的位置。不幸的是，这不是我正在开发的应用程序的选项，因为它太大并且有数百个文本框。
2.  将焦点重新设置在按键上的应用程序上，没有运气 - > [http://www.igorcosta.org/?tag=flex-hacks](http://www.igorcosta.org/?tag=flex-hacks)
3.  有人在 Stack 上建议也许 MXFTETextInput 可能工作，所以也尝试了这个，没有运气。

谢谢你提供的所有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T02:13:45.983

我将根据我对这个问题的研究来回答我自己的问题：

Adobe 不提供在 Flex 应用程序中嵌入 HTML 的受支持方式。Flex iFrame 是一种流行但不受支持的方式，可通过在 Flash Player 上使用特殊的窗口模式 (wmode opaque) 查看位于应用程序上方的 HTML。opaque wmode 考虑了分层和合成，但是这种 wmode 的一个大问题是 Flash Player 在不同浏览器中的性能不一致。使用此 wmode 时，Firefox 和 Safari 会出现许多记录在案的问题。

这是一篇非常有用且内容丰富的帖子——如果你想花时间实施它们，它还提供了一些理论解决方案——http [://www.deitte.com/archives/2008/07/dont_use_iframe.htm](http://www.deitte.com/archives/2008/07/dont_use_iframe.htm)

# c# - 根据当前时间计算常数

> ID：11858663
> 
> 赞同：-1
> 
> 时间：2012-08-08T06:14:43.977
> 
> 标签：c#, datetime

我想返回一个常量字符串值说

“A”如果当前时间跨度正在下降`between 06:00 – 14:00`并且

“B”如果当前时间下降`between 14:00 – 22:00`。如果两种情况都不满足，那么它应该返回“C”

请提出实现这一目标的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:25:48.353

试试这个：

```
static string GetValue(DateTime date)
{
    var time = date.TimeOfDay;
    if (time.TotalHours >= 6 && time.TotalHours < 14)
    {
        return "A";
    }

    if (time.TotalHours >= 14 && time.TotalHours < 22)
    {
        return "B";
    }

    return null;
} 
```

如果时间是 14:01，此代码将返回“B”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:22:59.900

> [DateTime.]Hour 属性的值始终使用 24 小时制表示。 [MSDN](http://msdn.microsoft.com/en-us/library/system.datetime.hour.aspx)

但是，您的日期必须是 type `DateTime`，而不是`TimeSpan`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T06:43:48.640

尝试使用[Datetime.Compare](http://msdn.microsoft.com/en-us/library/system.datetime.compare.aspx)比较两次。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-08T06:28:01.227

```
if (DateTime.Now.Hour >= 6 && DateTime.Now.Hour <= 14)
    return "A";
else if (DateTime.Now.Hour >= 14 && DateTime.Now.Hour <= 22)
    return "B"; 
```

# c++ - x509 证书主题备用名称

> ID：11858667
> 
> 赞同：0
> 
> 时间：2012-08-08T06:14:58.767
> 
> 标签：c++, openssl, x509certificate

在c++中使用通过函数获得的x509证书时`SSL_get_peer_certificate`，应该使用哪个函数来处理`subject alternative name`证书的字段？有些证书没有多个 CN，但有多个`subject alternative name`. 那应该怎么处理？

我能够得到 x509_EXTENSIONS 结构。

```
typedef struct X509_extension_st
    {
    ASN1_OBJECT *object;
    ASN1_BOOLEAN critical;
    ASN1_OCTET_STRING *value;
    } X509_EXTENSION; 
```

`object`和`value`指针有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:01:28.817

我猜在 OpenSSL 的一些最新版本中，`X509_st`（对等证书的类型）包含一个字段`STACK_OF(GENERAL_NAME) *altname`。如果您能够访问它，它应该可以解决您的问题。

# c# - 我如何为我的应用程序使用键盘上的 Enter 键

> ID：11858669
> 
> 赞同：0
> 
> 时间：2012-08-08T06:15:12.400
> 
> 标签：c#, asp.net, events, button, keyboard

我有一个 ASP.NET 应用程序，用户可以在文本框中输入一个字符串。如果用户点击按钮“发送”，程序会在 Active Directory 中搜索到这个字符串。如果我在键盘上单击 Enter，我希望相同的事件激活“发送”按钮事件的方式。

我这个按钮的cs代码：

```
 protected void btnBenutzerSuchen_Click(object sender, EventArgs e)
        {
            //.... the code if I click Button "send"

        } 
```

我的 ASPX：

```
<th><asp:Button ID="Button2" runat="server" Text="Suchen" 
                                onclick="btnBenutzerSuchen_Click" Width="250" /></th> 
```

我能做些什么？

塔拉索夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T06:19:39.573

Panel 和 HtmlForm 控件上有[DefaultButton属性，您可以将其设置为您的按钮 ID。](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.panel.defaultbutton.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T06:26:35.810

您可以使用默认按钮来执行上述操作。

```
<form runat="server" defaultbutton="myButton">
...
</form> 
```

然后有一个按钮的定义。

```
protected void myButton_Click(object sender, EventArgs e)
{
    Response.Write(myButton.Text);
} 
```

因此，将其应用于您的代码，您会得到如下内容：

```
protected void btnBenutzerSuchen_Click(object sender, EventArgs e)
    {
        //.... the code if I click Button "send"

    } 
```

您的 ASPX：

```
<th><asp:Panel ID="Panel2" runat="server" defaultbutton="Button2">

<asp:Button ID="Button2" runat="server" Text="Suchen" OnClick="btnBenutzerSuchen_Click" Width="250" />

</asp:Panel></th> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T06:29:05.840

如果你没有任何面板/div 做这个

页面加载时

```
if (!Page.IsPostBack) {
tbx_Find.Attributes.Add("onkeypress", "return clickButton(event,'" + btn_Find.ClientID + "')");
} 
```

在 Javascript 中

```
function clickButton(e, buttonid){ 

  var evt = e ? e : window.event;

  var bt = document.getElementById("<%=btn_Find.ClientID %>");

  if (bt){ 

      if (evt.keyCode == 13){ 

            bt.click(); 

            return false; 

      } 

  } 
```

}

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T06:29:51.910

你可以试试这个

Javascript

```
<SCRIPT type=text/javascript>
    function doClick(buttonName,e)
    {
        var key;

         if(window.event)
              key = window.event.keyCode;     //IE
         else
              key = e.which;     //firefox

        if (key == 13)
        {
            var btn = document.getElementById(buttonName);
            if (btn != null)
            { //If we find the button click it
                btn.click();
                event.keyCode = 0
            }
        }
   }
</SCRIPT> 
```

在后面的代码中

```
if (!IsPostBack)
{
   txtboxFirstName.Attributes.Add("onKeyPress", "doClick('" + btnSearch.ClientID + "',event)");

} 
```

# android - android旋转imageview onfling

> ID：11858672
> 
> 赞同：1
> 
> 时间：2012-08-08T06:15:20.043
> 
> 标签：android, rotation, imageview, touch-event

我正在创建一个旋转旋钮，当我顺时针或逆时针方向缓慢旋转它时它工作正常。但是如果我想选择一个精确的值，那么它变得很难。因为我在每次调用 onscroll(ACtion_Move) 时添加了 3 的边距. 我应该怎么办 。

我认为我需要在前一点和当前点之间有一个精确的角度。但是它会减慢旋转速度。假设用户将轮子向右或向左转动，那么我应该添加什么角度才能在各自的方向上平滑地旋转它。

提前感谢您的时间。

```
public class RotaryKnobView extends ImageView {

private float angle = 0f;
private float theta_old = 0f;

// width of imageview
private float width;
// height of imageview
private float height;
private final static int TOTAL_WEIGHT = 26;
private final static double TOTAL_ANGLE = 360;
private final static double MARGIN_BT_WEIGHT = (TOTAL_ANGLE / TOTAL_WEIGHT);
private final static double STARTING_WEIGHT = 5.0d;
private WeightPicker_Activity mContext = null;
private RotaryKnobListener listener;
private static double Weight_Picked = 0d;
private static final String TAG = "RotaryKnobView";
private Bitmap mBitmap = null;
private GestureDetector mDetector = null;

public interface RotaryKnobListener {
    public void onKnobChanged(int arg);

    public void onWeightPicked(double weightPicked);

}

public void setKnobListener(RotaryKnobListener l) {
    listener = l;
}

public RotaryKnobView(Context context) {
    super(context);
    this.mContext = (WeightPicker_Activity) context;
    initialize();
}

public RotaryKnobView(Context context, AttributeSet attrs) {
    super(context, attrs);
    this.mContext = (WeightPicker_Activity) context;
    initialize();
}

public RotaryKnobView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    this.mContext = (WeightPicker_Activity) context;
    initialize();
}

private float getTheta(float x, float y) {
    float sx = x - (width / 2.0f);
    float sy = y - (height / 2.0f);

    float length = (float) Math.sqrt(sx * sx + sy * sy);
    float nx = sx / length;
    float ny = sy / length;
    float theta = (float) Math.atan2(ny, nx);

    final float rad2deg = (float) (180.0 / Math.PI);
    float theta2 = theta * rad2deg;

    return (theta2 < 0) ? theta2 + 360.0f : theta2;
}

public void setBitmap(Bitmap mBitmap) {
    this.mBitmap = mBitmap;
    this.setImageBitmap(this.mBitmap);
}

public void getBitmapWidth() {
    this.mBitmap.getWidth();
}

public void getBitmapHeight() {
    this.mBitmap.getHeight();
}

private boolean isRotationStarted = false;

public void initialize() {

    // this.setImageResource(R.drawable.final_new_a);
    mDetector = new GestureDetector(mContext, new MyGestureRecognizer());
    setOnTouchListener(new OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {

            // reset angle theta after one complete rotation

            int action = event.getAction();
            int actionCode = action & MotionEvent.ACTION_MASK;
            if (actionCode == MotionEvent.ACTION_POINTER_DOWN) {
                float x = event.getX(0);
                float y = event.getY(0);
                theta_old = getTheta(x, y);
                Log.i("theta_old", theta_old + "");
            } else if (actionCode == MotionEvent.ACTION_MOVE) {
                invalidate();

                float x = event.getX(0);
                float y = event.getY(0);

                float theta = getTheta(x, y);
                float delta_theta = theta - theta_old;

                theta_old = theta;

                // here we determine the direction of rotation
                int direction = (delta_theta > 0) ? 1 : -1;

                if (direction > 0) {
                    // Log.i("Direction > 1", direction + "");

                } else {
                    // Log.i("Direction < 1", direction + "");

                }

                angle += 3 * direction;
                mixMixCondition();
                // Log.i("Current Weight",
                // "Weight"
                // + (((-1) * (angle / MARGIN_BT_WEIGHT)) + STARTING_WEIGHT)
                // + "");
                Weight_Picked = (((-1) * (angle / MARGIN_BT_WEIGHT)) + STARTING_WEIGHT);
                Log.i("angle", "angle" + angle);

                notifyListener(direction);
                notifyListener(Weight_Picked);
                RotaryKnobView.this.mContext.zoomImageView
                        .setImageBitmap(cropImage(
                                RotaryKnobView.this.mContext.mWheelRelativeLayout
                                        .getWidth() / 2, 0));

            }
            mDetector.onTouchEvent(event);
            return true;
        }

    });
}

private void mixMixCondition() {

    // stop to rotate behind 5.(min value)
    if (angle >= 0) {
        angle = 0;
    }
    // stop to rotate behind 30.(max value)
    // for anticlockwise rotation
    if (angle < (-360 + MARGIN_BT_WEIGHT)) {
        angle = (float) (-360 + MARGIN_BT_WEIGHT);
        // Toast.makeText(RotaryKnobView.this.mContext,
        // "Complete anticlockwise", Toast.LENGTH_SHORT).show();
    }

    // for clockwise rotation
    if (angle > 360) {
        angle = 0;
        // Toast.makeText(RotaryKnobView.this.mContext,
        // "Complete Clockwise",
        // Toast.LENGTH_SHORT).show();
    }

}

private void notifyListener(int arg) {
    if (null != listener)
        listener.onKnobChanged(arg);
}

private void notifyListener(double weight_picked) {
    if (null != listener) {
        listener.onWeightPicked(weight_picked);
    }
}

protected void onDraw(Canvas c) {
    c.rotate(angle, this.getWidth() / 2, this.getHeight() / 2);
    width = this.getWidth();
    height = this.getHeight();

    // LogInfo.showLogInfo(TAG, "Width = " + width);
    // LogInfo.showLogInfo(TAG, "Height" + height);
    // LogInfo.showLogInfo("ondrawImageView", "ondrawImageView");
    this.mContext.zoomImageView.setImageBitmap(cropImage(
            mContext.mWheelRelativeLayout.getWidth() / 2, 0));
    super.onDraw(c);

}

public Bitmap cropImage(int x, int y) {
    Matrix matrix = new Matrix();
    this.mContext.mWheelRelativeLayout.buildDrawingCache();
    this.mContext.mainBitmap = this.mContext.mWheelRelativeLayout
            .getDrawingCache();
    Bitmap croppedBitmap = Bitmap.createBitmap(this.mContext.mainBitmap,
            x - 50, y + 15, 100, 130, matrix, true);
    // Bitmap croppedBitmap2 = Bitmap.createBitmap(croppedBitmap, x-30,
    // y+15, 100, 120, matrix,true);
    this.mContext.mWheelRelativeLayout.invalidate();
    return croppedBitmap;
}

/**
 * @return The angle of the unit circle with the image view's center
 */
private double getAngle(double xTouch, double yTouch) {
    double x = xTouch - (this.getWidth() / 2d);
    double y = this.getHeight() - yTouch - (this.getHeight() / 2d);

    switch (getQuadrant(x, y)) {
    case 1:
        return Math.asin(y / Math.hypot(x, y)) * 180 / Math.PI;

    case 2:
    case 3:
        return 180 - (Math.asin(y / Math.hypot(x, y)) * 180 / Math.PI);

    case 4:
        return 360 + Math.asin(y / Math.hypot(x, y)) * 180 / Math.PI;

    default:
        // ignore, does not happen
        return 0;
    }
}

/**
 * @return The selected quadrant.
 */
private static int getQuadrant(double x, double y) {
    if (x >= 0) {
        return y >= 0 ? 1 : 4;
    } else {
        return y >= 0 ? 2 : 3;
    }
}

private class MyGestureRecognizer extends SimpleOnGestureListener {

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
            float velocityY) {
        LogInfo.showLogInfo("onFling", "VelocityX" + velocityX);
        LogInfo.showLogInfo("onFling", "VelocityY" + velocityY);
        LogInfo.showLogInfo("onFling", "onFling");

        return super.onFling(e1, e2, velocityX, velocityY);
    }

    @Override
    public boolean onScroll(MotionEvent e1, MotionEvent e2,
            float distanceX, float distanceY) {
        return super.onScroll(e1, e2, distanceX, distanceY);
    }

   }
     }
    } 
```

# javascript - 切换菜单不起作用

> ID：11858674
> 
> 赞同：0
> 
> 时间：2012-08-08T06:15:29.327
> 
> 标签：javascript, html, toggle

我正在为我的网站尝试切换菜单。但它不起作用。我希望当有人点击链接时，会在那里打开一个菜单而不是一个新页面。以下是一个 html 和 java 脚本片段。

```
<div>
 <a href="http://directory/websites.jsp" class="menu_link">Menu</a>
 <ul class="menu" id="websites">
    <li><i>Stackexchange</i> <br/>
     <a href="#">SE</a>
    </li>
 </ul>
</div> 
```

*js：*

```
window.onload = initAll;

function initAll() {
   var allLinks = document.getElementsByTagName("a");
   for( var i=0 ; i<allLinks.length ; i++ ) {
      if(allLinks[i].className.indexOf("menu_link") > -1) {
          allLinks[i].onclick = toggleMenu;
      }
   }
}

function toggleMenu() {
  var start = this.href.lastIndexOf("/") + 1;
  var stop = this.href.lastIndexOf(".");
  var thisMenuName = this.href.substring(start,stop);
  var thisMenu = document.getElementById(thisMenuName).style;

  if(thisMenu.display == "block") {
     thisMenu.display = "none";
  } else {
     thisMenu.display = "block";
  }

  return false;    
} 
```

我在哪里犯错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T06:19:53.443

```
<div>
 <a href="http://directory/websites.jsp" class="menu_link">
 <ul class="menu" id="websites">
    <li><i>Stackexchange</i> <br/>
     <a href="#" class="menu_link">SE</a>
<ul id="menu">
<li>abc...</li>
<li>abc...</li>
</ul>

    </li>
 </ul>
</div> 
```

# c - 结构的成员是否允许是静态的？

> ID：11858678
> 
> 赞同：5
> 
> 时间：2012-08-08T06:15:58.390
> 
> 标签：c, structure

```
#include<stdio.h>
struct str 
{ 
   static int a ;
    int b ;
 } s ;
int main()
{
static int p , k ;
printf("%d %d",sizeof(p),sizeof(s));
getchar();
return 0;
} 
```

上面的代码给出了错误。但是，如果我将结构的第一个成员重新定义为“int”而不是“静态 int”，那么它运行良好。为什么结构中不允许使用静态成员，其意义是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T06:21:29.870

C 语言中根本没有这样的功能。在 C 语言中，这种特性没有有意义的概念框架。

您会看到，在 C++ 术语中，成员变量和普通全局变量之间只有一个相关区别`static`：声明其名称的范围和相应的命名语法。可以调用全局变量`a`，同时调用类的静态成员`SomeClass::a`。除了范围命名之外，没有其他区别。（我故意忽略了其他特定于 C++ 的特性，比如访问控制，因为它们在 C 中不存在，而这个问题实际上是关于 C 的。）

在 C 语言中，结构类型不会引入自己的作用域。没有像 `SomeStruct::a`C 语言那样的命名语法。出于这个原因，根本没有理由在结构中拥有静态成员。您可以改为声明一个全局变量并达到相同的效果。调用您的全局变量`str_a`以传达将其“关联”的意图，`struct str`并将该变量视为`struct str`.

从形式上讲，在C++中也可以这样做，即完全忽略C++语言的这一特性，使用全局函数和变量，而不是类内部的静态函数和变量。但是，这样做会放弃 C++ 的所有成员访问控制功能。而且这些功能真的很值得拥有。C 语言没有访问控制功能，这意味着在 C 语言中 [几乎] 什么都没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:22:36.640

不，不是在 C 中。我相信 C++ 可以做到这一点，这意味着在结构的所有实例之间共享*一个*副本。`a``struct str`

如果你想在 C 中做类似的事情，你有几个选择（可能还有更多，我现在想不出它们）。

首先是使用以下内容分解公共变量：

```
int struct_str_static_a;
struct str {
    int b;
} s; 
```

这样，`a`结构的所有实例只共享一个副本——每个实例仍然有自己的`b`.

对此稍作修改是引入指向该公共变量的指针并初始化指针：

```
int struct_str_static_a;
struct str {
    int *pA;
    int b;
} s;
:
s.pA = &struct_str_static_a; 
```

然后你可以使用`*(s.pA)`where 之前你会使用`s.a`. 因为每个 的实例`struct str`都有自己的`pA`指向单个 的指针`a`，这会给您带来类似的效果。然而，这是一条曲折的道路。

第三种选择是让自己加入下一个 ISO C 工作组，并将其作为对语言的更改提出来。然而，在接下来的十年左右，这需要你自己付出相当多的努力，可能不值得付出努力:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T06:23:00.320

你在这里有很好的答案：http: [//cboard.cprogramming.com/c-programming/123691-static-variable-structure.html](http://cboard.cprogramming.com/c-programming/123691-static-variable-structure.html)

一般来说，将其声明为静态并没有任何好处，但如果您仍然希望它，您可以迁移到 c++ 或将整个结构声明为静态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T06:21:28.277

静态修饰符是在文件的全局范围内声明您的变量，而函数中的静态修饰符会创建一个变量，其持久值仅限于该函数的范围。而且你不能在你的结构实例之间共享这个整数的值。这在 C 中不支持，也不能支持；）

为什么要在结构中使用静态成员？也许有（必须有）更好的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T06:20:59.347

只是语言不允许。除了它不是设计的一部分之外，没有更深层的原因。您始终可以使用单独的全局变量实现相同的行为，如下所示：

```
struct str
{
    int b;
} s;

int str_a; 
```

请注意，在您的结构中使用*非*静态将是完全不同`int a;`的，这将是*每个*type 对象的不同子元素`struct str`。

（另请注意，在从 C 演变而来的语言 C++ 中，静态类成员确实存在并且行为与我上面描述的解决方法完全相同，只是全局变量的名称与类的名称紧密相关。）

# python - 仅在 PyMOL 运行时调用函数

> ID：11858681
> 
> 赞同：2
> 
> 时间：2012-08-08T06:16:30.107
> 
> 标签：python, bioinformatics, pymol

我有一个脚本可以对蛋白质进行一些计算。完成后，一个方法会导入`pymol`模块，并使用`pymol.cmd`API 在 PyMOL 会话中显示结果。该过程类似于以下内容：

```
def display_results(results, protein_fn):
    import pymol
    pymol.cmd.load(protein_fn)
    pymol.cmd.alter(...)
    ...

protein_fn = "1abc.ent"
results = analyze_protein(protein_fn)
display_results(results, protein_fn) 
```

但是，我的脚本不一定*需要*在 PyMOL 中显示结果，我希望仅在安装并运行 PyMOL 时才这样做。

检查是否安装了 PyMOL 很容易（我可以`try: import pymol`），但是有没有办法检查是否有活动的 PyMOL 会话来显示结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T08:26:53.097

我不是 PyMOL 方面的专家（从未编写过脚本），但我看到了 2 种可能的方法：

1.  做一些需要打开 PyMOL 会话并捕获异常的琐碎事情
2.  查看进程名称（类似于`os.system("ps ux | grep -i pymol")`）

第一种方法更好，第二种方法是肮脏的黑客。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T02:35:57.033

我通常只是做类似的事情：

```
try:
    import pymol
    pymol_imported = True
except:
    pymol_imported = False 
```

然后

```
if pymol_imported:
    display_results(...) 
```

我不知道这是否是 Python 的“最佳实践”，但无论如何，在大多数情况下，PyMol 脚本通常只是快速的、一次性的东西。

# python - Pymongo forEach 格式

> ID：11858689
> 
> 赞同：3
> 
> 时间：2012-08-08T06:17:17.570
> 
> 标签：python, mongodb, pymongo

如何格式化 forEach 函数，以便它可以放在多行上而不会导致语法错误？就像是

```
self.request.db.myCollection.find().forEach( 
    function(u) { 
       u.forSong = self.request.db.song.find_one({}, {'_id': 1})
       self.request.db.save(u)
     }) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-08T06:37:31.593

要从 Python 传递 javascript 代码，您需要将其包装在一个[`bson.Code`](http://api.mongodb.org/python/current/api/bson/code.html)对象中，否则 Python 本身（而不是 PyMongo）将尝试解析它。这给了你：

```
import bson
self.request.db.myCollection.find().forEach(bson.Code( '''
    function(u) { 
       u.forSong = self.request.db.song.find_one({}, {'_id': 1})
       self.request.db.save(u)
     }''')) 
```

但是你在那里使用的事实`self`使它看起来像你想在那里使用 Python 代码，而不是 javascript 代码。从[文档](http://api.mongodb.org/python/current/api/pymongo/cursor.html#pymongo.cursor.Cursor)中，它看起来像从`find`实现 Python 的序列协议返回的 Cursor 对象 - 这意味着您应该能够使用常规 Python 循环而不是`forEach`（文档似乎说 PyMongo 无论如何都没有实现）：

```
for u in self.request.db.myCollection.find():
   u.forSong = self.request.db.song.find_one({}, {'_id': 1})
   self.request.db.myCollection.save(u) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-26T13:04:03.960

要在不让 Python 在后台执行任何操作的情况下传递任何 mongo 命令，您需要使用 eval。所以你的例子需要这样调用：

```
self.request.db.eval('db.myCollection.find().forEach( 
    function(u) { 
       u.forSong = db.song.find_one({}, {"_id": 1});
       self.request.db.save(u);
     })') 
```

# objective-c - NSString 到 char（不是 const char）

> ID：11858698
> 
> 赞同：1
> 
> 时间：2012-08-08T06:17:51.540
> 
> 标签：objective-c

我怎样才能转换`NSString`为`char`？注意 -`char`不是`const char`。我有浮点数，我需要对其进行转换，以便之后只剩下 2 个值`.`。所以我使用 NSString 来做到这一点。之后我需要从中制作 NSNumber 。所以我决定将 NSString 转换为 char，然后再转换为 NSNumber。所以我尝试了

```
char* someCharINeed = [SomeString UTF8String]; 
```

它说

```
Cannot initialize a variable of type 'char *' with an rvalue of type 'const char *' 
```

如果这样使用

```
const char* someCharINeed = [SomeString UTF8String]; 
```

它有效，但 NSNumber

```
[NSNumber numberWithChar:someCharINeed]; 
```

说

```
Cannot initialize a parameter of type 'char' with an lvalue of type 'const char *' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:26:00.973

不是转换为字符串，另一种方法是将数字乘以 100，将答案转换为 int，然后除以 100——这将在小数点后给您 2 位。

```
float newValue = floorf(oldValue*100)/100; 
```

# windows - 使用批处理命令打开文件

> ID：11858699
> 
> 赞同：1
> 
> 时间：2012-08-08T06:17:51.090
> 
> 标签：windows, file, batch-file, file-extension

我可以说我有一些文件扩展名为 .abc 的文件，因为您知道可以设置默认程序来打开这些文件。我想知道，是否可以将文件的默认程序设置为 BAT 文件（到目前为止是可能的），并且当我单击它时，将获取与其关联的 .abc 文件的名称作为参数。

我在谷歌上找不到任何相关的东西，以为你可能有线索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:32:27.167

这几乎与编程无关，但无论如何......

首先创建一个批处理文件，以某种方式处理其第一个输入参数`%1`，因为您单击的文件的文件名将作为第一个参数传递。像这样简单的东西：

```
@ECHO OFF
ECHO %1
PAUSE 
```

然后，您需要将批处理程序注册到您喜欢的文件扩展名（例如`.abc`）。可以在[此处](http://support.microsoft.com/kb/307859?ln=en-us)找到如何完成此操作的简单介绍。

希望有帮助

# php - PHP/HTML5 实时音频流

> ID：11858700
> 
> 赞同：-2
> 
> 时间：2012-08-08T06:17:55.707
> 
> 标签：php, sockets, audio-streaming, audio-recording

我想流式传输实时音频（一个人正在对着麦克风讲话），然后音频必须通过网络流式传输才能在其他用户浏览器上播放。我使用过 PHP、HTML、JavaScript、jQuery 或 AJAX。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:14:50.030

我知道在闪存中做到这一点的方法：

```
var radioStream:String='http://stream.fm1079.co.uk:8000/stream';//my local radio station

function openStream(stream){
var s:Sound = new Sound();
var req:URLRequest = new URLRequest(stream);
var context:SoundLoaderContext = new SoundLoaderContext(500, true);
s.load(req, context);
s.play();
}//end of function

openStream(radioStream); 
```

这将流式传输任何流 URL。

# asp.net - 如何将 imagebutton 链接到 url 可视化 Web 开发人员

> ID：11858704
> 
> 赞同：3
> 
> 时间：2012-08-08T06:18:20.527
> 
> 标签：asp.net, webforms, visual-web-developer-2010

我想知道，是否可以将图像按钮链接到网站？如何？我在可视化 Web 开发人员中使用 Web 表单。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T06:35:05.413

你可以试试这个

```
<asp:ImageButton runat="server" ID="ImageButton1" PostBackUrl="http://www.google.com" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T06:27:39.920

单击 ImageButton 将导致回发到服务器，您可以在其中处理“单击”事件。从那里你可以重定向到任何你想要的地方。

```
<asp:ImageButton runat="server" ID="ImageButton1" OnClick="ImageButton1_Click" ...

protected void ImageButton1_Click(object sender, EventArgs e) {
    Response.Redirect("http://www.google.com");
} 
```

您还可以使用 ImageButton 的 OnClientClick 属性从客户端执行重定向：

```
<asp:ImageButton runat="server" ID="ImageButton1" OnClientClick="window.location.href = 'http://www.google.com';" ... 
```

`<img />`或者，您可以通过使用链接包装标准元素或 ASP.NET 图像来避免所有这些复杂性：

```
<a href="http://google.com">
    <img src="/someimage.jpg" alt="" />
</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T06:38:08.967

```
<asp:ImageButton ID="ImageButton1" runat="server" ImageUrl="~/images1.png" 
            onclick="ImageButton1_Click" />

 protected void ImageButton1_Click(object sender, ImageClickEventArgs e)
    {
        Response.Redirect("default1.aspx");
    } 
```

或使用`hyperlink control`

```
 <asp:HyperLink ID="HyperLink1" runat="server" NavigateUrl="~/Default3.aspx" ImageUrl="~/images1.png">HyperLink</asp:HyperLink> 
```

# asp.net-mvc-3 - 当viewbag包含从控制器传递的值时如何为viewbag的文本输入赋值

> ID：11858706
> 
> 赞同：0
> 
> 时间：2012-08-08T06:18:23.460
> 
> 标签：asp.net-mvc-3, viewbag

我是 ASP.NET MVC3 的新手。

我试图将值从控制器传递到视图，然后将该值分配给视图内的文本输入。

我尝试使用 viewbag 和 viewdata。在调试时，我可以在 viewbag 中找到值，但是当我的视图出现在浏览器中时，文本框为空。

但是，如果我从 .cshtml 文件中为 viewbag 分配一些值，它就可以工作。

**控制器**

```
public ActionResult Contact()
{
 ViewBag.fullname = "Hello";
 ........
 return view();
} 
```

**看法**

```
@{ ViewBag.lastname = "Hello";
}
@Html.TextBox("fullname", (string)ViewBag.fullname)
@Html.TextBox("lastname", (string)ViewBag.lastname) 
```

**输出**

第一个文本框 - 空

第二个文本框 - 你好

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T06:24:02.427

试试这个...

**控制器**

```
public ActionResult Contact()
{
 ViewBag.fullname = "Hello";
 ViewBag.lastname = "World";

 return View();
} 
```

**看法**

```
@Html.TextBox("fullname", (string)ViewBag.fullname)
@Html.TextBox("lastname", (string)ViewBag.lastname) 
```

还要检查[这个](http://yassershaikh.com/how-to-pass-values-from-controller-to-view-using-viewbag-in-mvc-3/)

# iphone - 当我在 UItableview 中选择行时如何创建多个单元格

> ID：11858711
> 
> 赞同：0
> 
> 时间：2012-08-08T06:18:36.487
> 
> 标签：iphone, ios, ios5, uitableview

当我单击 tableview 想要重新加载的特定名称并从所选名称添加更多单元格时，我在 tableview 中有一些名称。然后再次单击子单元格并加载更多单元格。我怎么能做到这一点任何人帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T06:28:48.517

以下是当您从表格中选择一个单元格时调用的委托

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

NSLog(@"*****you have selected a cell ********* ");

NSLog(@"selected cell row = %i and section = %i",indexPath.row,indexPath.section);

// Add more data to the array which is populating the table so that to add more cells

[your_Table reloadData]; // This will reload your table with new data which you added to your Array 

} 
```

# java - 如何模块化和自定义 Web 应用程序？

> ID：11858717
> 
> 赞同：2
> 
> 时间：2012-08-08T06:19:21.400
> 
> 标签：java, spring, jakarta-ee, architecture, frontend

我公司有一种产品是根据其中一家客户银行提供的规格定制的。现在，由于该产品取得了成功，另一家银行接洽了同样的产品，我们不得不做一些代码更改，以便为他们提供银行所需的定制。现在的情况是，与我们接洽的银行数量每天都在增加，我的团队期待某种概括，以便在交付时以最少的代码更改配置产品。现在我的问题如下：-

1.  如何将代码模块化以实现完美定制？
2.  前端如何实现定制化，让不同银行根据自己的需求进行配置？
3.  需要哪些模板和后端技术来填补上述要求的空白。
4.  暂时我们使用本地化来根据客户更改标签，但有没有更好的方法？
5.  如果要快速交付应用程序，Drools 或 OSGI 是否有用。
6.  是否还需要验证不同字段和其他 ui 组件，以满足特定银行的需求？他们有哪些可用的解决方案？

注意：我们使用 Spring3 主要是 MVC 模块来构建解决方案，并期待某种可以定制的工业产品，可以轻松交付，甚至过程应该很快，没有陡峭的学习曲线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:48:02.997

没有简单（一刀切）的解决方案。自定义范围从化妆品 UI 样式，到在数据模型级别添加新字段/关系，更改业务逻辑等，更改工作流。

处理这个问题的好方法是弄清楚在不同的实现中什么是不变的，什么需要改变。返回并进行必要的更改，以便通过添加新代码而不是修改现有代码来更轻松地自定义这些内容（打开关闭原则）。选择性地使用工作流引擎、业务规则引擎可以使某种定制变得更容易。

目标应该是努力拥有一个具有 70-80% 核心功能的通用代码库，然后再增加 15-20% 的实现特定定制。

通过使用一些拖放 UI 甚至通过 XML / db 配置来构建可以动态配置的东西的方法通常比您拥有设计良好的核心模块的方法复杂几个数量级，该方法带有钩子以允许通过以下方式进行自定义编写新代码。

您可以查看[OFBiz](http://ofbiz.apache.org/)、[OpenERP](http://www.openerp.com/)等内容，了解如何操作以及它们会变得多么复杂。

您还可以查看[Spring Roo](http://www.springsource.org/spring-roo/)、[Sculptor](https://sites.google.com/site/fornaxsculptor/)等现代代码生成框架，它们可以帮助构建可以通过编写额外代码轻松定制的基础产品。

# php - 从 Facebook 应用程序向用户发送通知

> ID：11858723
> 
> 赞同：0
> 
> 时间：2012-08-08T06:19:49.627
> 
> 标签：php, facebook, notifications

我需要在 facebook 上向我的应用程序的特定用户发送通知。通知是指出现在顶部地球上的红色数字，而不是出现在侧边栏中应用程序旁边的数字。是否可以从我的应用程序发送此类通知？如果是，如何？我使用了 PHP SDK。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:25:27.793

发送点亮地球图标的通知的唯一方法是通过用户对用户的请求：[https ://developers.facebook.com/docs/requests/](https://developers.facebook.com/docs/requests/)

这只能由画布应用程序使用，并且还需要弹出一个对话框，用户可以在其中选择要向其发送请求的收件人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T22:07:18.647

自 2012 年 8 月 31 日起，您可以向用户发送通知：

[https://developers.facebook.com/docs/app_notifications/](https://developers.facebook.com/docs/app_notifications/)

# c# - 封送 IDispatch 时 COM 互操作灾难性故障 (0x8000FFFF)

> ID：11858726
> 
> 赞同：4
> 
> 时间：2012-08-08T06:19:54.787
> 
> 标签：c#, .net, com, exception-handling, marshalling

我正在为 Outlook 2010 开发 IM 提供程序。为此，我必须实现 Outlook 在启动时加载的一些 IMessenger* COM 接口。我想使用 C# 和一个进程外服务器来执行此操作，我在[此处](http://code.msdn.microsoft.com/windowsdesktop/CSExeCOMServer-f2a59967)遵循了 MSDN 示例。

这是我已经实现的：

*   正确注册所有内容（CLSID、类型库等）并配置 Outlook，以便它在启动时尝试加载我的服务器
*   将 COM 服务器实现为本机 ATL/C++ 服务器并确保其正常工作
*   在 C#/.NET 中实现基本接口并确保已加载

现在，我基本上可以启动我的 .EXE 服务器，然后启动 Outlook 并观察我服务器的控制台窗口，同时它会显示来自 COM 子系统的所有方法调用（我已经为每个方法添加了日志记录）。问题是，在某些时候（仅在 .NET 实现中！）我在 Outlook 日志中遇到如下错误：

```
CMsoIMProviderOC20::HrEnsureServiceData !failed!  Line: 402  hr = 0x8000FFFF 
```

我确切地知道这在我的程序中发生的位置，但我对此无能为力（我已经尝试为此寻找解决方案好几天了）。请记住，如果我使用 C++/ATL 实现它，它实际上可以工作，所以我想它一定与 .NET 互操作封送处理的工作方式有关。

以下是详细信息：

基本上有3个接口与这个问题相关：IMessenger、IMessengerServices和IMessengerService：

```
[
    uuid(D50C3186-0F89-48f8-B204-3604629DEE10), // IID_IMessenger
    helpstring("Messenger Interface"),
    helpcontext(0x0000),
    dual,
    oleautomation
]
interface IMessenger : IDispatch
{
    ...
    [id(DISPID_MUAM_SERVICES), propget, helpstring("Returns services list."), helpcontext(0x0000)]
    HRESULT Services([out, retval] IDispatch ** ppdispServices);
    ...
} 
```

而我知道这个 Services 属性实际上应该返回这个接口：

```
[
 uuid(2E50547B-A8AA-4f60-B57E-1F414711007B), // IID_IMessengerServices
 helpstring("Messenger Services Interface"),
 helpcontext(0x0000),
 dual,
 oleautomation
]
interface IMessengerServices : IDispatch
{
    ...
    [id(DISPID_NEWENUM), propget, restricted, helpstring("Enumerates the services."), helpcontext(0x0000)]
    HRESULT _NewEnum([out, retval] IUnknown **ppUnknown);
    ...
} 
```

该接口反过来又有望返回 IMesengerService 接口。但是，这对于这个问题的目的并不重要。

在 C++/ATL 中，我像这样实现属性服务：

```
STDMETHOD(get_Services)(IDispatch ** ppdispServices)
{
    (*ppdispServices) = (IDispatch*)new CComObject<CMessengerServices>();
    (*ppdispServices)->AddRef();
    return S_OK;
} 
```

这是 C# 实现：

```
public object Services
{
    get { return new MessengerServices(); }
} 
```

直到这里，两种实现都一切正常！现在问题开始了……

首先奇怪的是，在 C++/ATL 中`get__NewEnum(IUnknown **pUnkown)`，我的 CMessengerServices 类的函数永远不会被执行。而是调用其他函数。**这很好。**

然而，在 C# 中，调用的 MessengerServices 类的第一个成员是 GetEnumerator() 方法。我可以在那里设置一个断点，并清楚地看到它是 C# 代码中的最后一行（在我的控制下），它在 Outlook 停止启动并在其日志中报告 0x8000FFFF 错误之前执行。之后，我的 .EXE 服务器中没有其他代码行被调用。

MessengerServices 类实现有最重要的部分：

```
[ClassInterface(ClassInterfaceType.None)]
[ComVisible(true), Guid("DF394E2C-38E2-4B70-B707-9749A4F857B0")]
public class MessengerServices : IMessengerServices
{
    IEnumerator IMessengerServices.GetEnumerator()
    {
        return messengerServices.GetEnumerator();
    }

    private readonly ArrayList messengerServices;

    public MessengerServices()
    {
        messengerServices = new ArrayList { new MessengerService() };
    }
    ...
} 
```

这里是 tlbimp.exe 生成的 CCW 代理：

```
[ComVisible(true), Guid("2E50547B-A8AA-4F60-B57E-1F414711007B")]
public interface IMessengerServices : IEnumerable
{
    [TypeLibFunc(TypeLibFuncFlags.FRestricted)]
    [DispId(-4)]
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    [return: MarshalAs(UnmanagedType.CustomMarshaler, MarshalType = "System.Runtime.InteropServices.CustomMarshalers.EnumeratorToEnumVariantMarshaler, CustomMarshalers, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")]
    new IEnumerator GetEnumerator();
    ...
} 
```

最后一个提示是否可能有帮助：当我在 GetEnumerator() 实现中设置断点并按 F10 进行单步执行时，这是 Visual Studio 输出窗口中的最后一行：

> 跨过非用户代码'System.Runtime.InteropServices.CustomMarshalers.EnumeratorToEnumVariantMarshaler.MarshalManagedToNative

另一个*有趣的事情*（至少对我来说）是，如果我从接口声明和我的类定义中完全删除 Enumerator 东西，Outlook 仍然会调用我的接口，但使用另一种方法（为了完整起见，PrimaryService）但基本上有同样的错误。

老实说，我完全不知道如何处理这个错误？提前感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T11:20:08.767

此类故障的标准诊断是您的 [ComVisible] 界面布局错误。当客户端代码调用 IDispatch::GetTypeInfoCount() 时，这会导致执行错误的方法。这是 IMessengerServices v-table 中的第 4 个方法指针，您的 GetEnumerator() 方法是您接口的 v-table 中的第 4 个方法。当 Outlook 收到一个不知道如何处理的奇怪返回值时，它就会崩溃。

我不知道你从哪里得到“CCW 代理”，它看起来不像是 Tlbimp.exe 生成的。缺少的重要属性是`[InterfaceType(ComInterfaceType.InterfaceIsDual)]`. 这就是告诉 CLR 它需要实现 IDispatch 的原因。所以你的界面缺少四个 IDispatch 方法。

除了修复接口声明之外，目前解决这个问题的最好方法是从类型库中导入接口定义，这样就不会出现不匹配的情况。我的机器上没有安装它，你可以通过在注册表中找到它`HKCR\CLSID\{2E50547B-A8AA-4F60-B57E-1F414711007B}`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T08:08:03.453

我现在找到了解决问题的方法。Hans Passants 的回答将我引向了正确的方向（谢谢！），但是，问题在于以下句子是正确的：

**Tlbimp.exe 不保留 vtable 中方法的顺序，就像它们最初在 IDL/TLB 中定义的那样。相反，方法和属性按字母顺序重新排序！**

因此，当您使用 Visual Studio 实现接口并引用类型库时，CCW 创建的 vtable 很可能会被搞砸。解决方案是将 Tlbimp（Visual Studio 生成互操作程序集使用的工具）生成的包装器复制到您自己的代码中，并将方法和属性重新排序以与类型库中的顺序相同。

# java - 从选定对象创建 JSON

> ID：11858728
> 
> 赞同：1
> 
> 时间：2012-08-08T06:20:07.920
> 
> 标签：java, javascript, html, json

我想创建所选选项的 JSON 对象。我已经编写了 java 代码，但它创建了所有数据库值的 JSON。

JSON代码是：

```
rs = stmt.executeQuery("SELECT file_id,fid from nonspatial_data  where file_id=1");

JSONArray jArray = new JSONArray();

while (rs.next())
{  
    String  FileID_json=rs.getString("file_id");
    String fid_json=rs.getString("fid");
    JSONObject jobj = new ``JSONObject();
    jobj.put("file_id", FileID_json);
    jobj.put("fid", fid_json);
    jArray.add(jobj);
}

JSONObject features = new JSONObject();
features.put("features", jArray); 
```

我想创建所选 file_id 的 json。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T15:33:12.377

我不确定您希望 json 采用的格式，但您应该真正使用像 jackson 这样的库（具有帮助的序列化器/映射器）。使用它的方法是：创建一个表示 json 对象的域对象并将它传递给这个序列化程序，你就有了 json.

注意：为了保持代码简洁，我不使用 java 的最佳实践（例如，制作字符串常量等）。我也没有测试过这段代码，但你应该对我的建议有一个很好的了解。

```
public class SomeObject{ 
  Map<String,Object> model;
  public void setFoo( String foo ) {...}
  public String getFoo() {
    return model.get( "foo" );
  }

  // if you have more than one model, consider moving this method to a superclass
  public String toJson() {
    Map<String, Object> result = new HashMap<String, Object>();
    String status;
    List<String> errors = new ArrayList<String>();

    ObjectMapper mapper = new ObjectMapper();
    result.put("status", status);
    result.put("errors", errors);
    StringWriter sw = new StringWriter();
    mapper.writeValue(sw, result);
    return sw.toString();
  }
} 
```

这有助于保持您的代码面向对象......然后您的应用程序逻辑可以引用域对象而不是操作基本字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T00:11:15.533

我经常使用 hibernate 做这件事，然后使用[flexjson将集合对象转换为 json](http://flexjson.sourceforge.net/)

# objective-c - viewDidLoad 每次都被调用

> ID：11858732
> 
> 赞同：0
> 
> 时间：2012-08-08T06:20:21.993
> 
> 标签：objective-c, xcode

我有一个主视图（第一个视图），单击一个按钮将我带到另一个视图（第二个视图），其中包含 tableview ..我在 viewDidLoad 中解析来自我的服务器的数据。问题是如果我使用dismissmodalView关闭我的第二个视图并单击我的 mainview 中的相同按钮。控制器转到 viewDidLoad 而不是 viewDidAppear ..这使得再次加载服务器并填充表视图。

```
-(void)loadFeeds
{
    //Activity Indicator MBProgressHUD
    if(activity == nil){
        activity = [[MBProgressHUD alloc] initWithView:self.view];
        [self.view addSubview:activity];
        [activity hide:YES];
    }

    //Pull to Refresh (Ego refresh header view) Declarations Facebook and Twitter
    if (_refreshHeaderViewTwitter == nil) {
        EGORefreshTableHeaderView *view = [[EGORefreshTableHeaderView alloc] initWithFrame:CGRectMake(0.0f, 0.0f - self.tblTwitter.bounds.size.height, self.view.frame.size.width, self.tblTwitter.bounds.size.height)];
        view.delegate = self;
        [self.tblTwitter addSubview:view];
        _refreshHeaderViewTwitter = view;
        [_refreshHeaderViewTwitter refreshLastUpdatedDate];
    }

    [activity show:YES];
    dispatch_async(dispatch_get_global_queue( DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{

        getTwitterArray = [[NSMutableArray alloc]initWithArray:[Util getJsonArray:Twitter]];

        dispatch_async(dispatch_get_main_queue(), 
                       ^{            
                           [self.tblTwitter reloadData];
                           [activity hide:YES];
                       });
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:29:39.307

解雇 viewcontroller 摆脱它。

您将不得不手动管理持久性。

因此，您需要将视图控制器的最后状态保存在比视图控制器更高的持久性级别。那是在磁盘上还是在 appdelegate 中。这取决于您，但视图控制器工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:18:58.127

如果您希望视图控制器在您关闭其呈现的视图控制器之前一直存在，那么您可以将视图控制器保留为属性

`@property (nonatomic, retain) MyModalViewController *myModalViewController;`

并在它的getter方法中延迟加载它..

```
- (MyModalViewController *)myModalViewController
{
  if (_myModalViewController == nil)
  {
    _myModalViewController = [[MyModalViewController alloc] initWithNibName:nil bundle:nil];
  }
  return _myModalViewController;
} 
```

那么您的视图控制器将挂起，如果/当您收到内存警告时，将属性设置为 nil 并且它将正确卸载。

# google-apps-script - 如何使用默认值填充 Google 电子表格？

> ID：11858734
> 
> 赞同：-3
> 
> 时间：2012-08-08T06:20:35.113
> 
> 标签：google-apps-script

我有一个包含 4 列的 Google 电子表格，我想要一个用默认值填充列的函数和另一个清空所有单元格但保留列标题的函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:46:30.623

此基本功能将在第一列中使用 X 个值填充您的电子表格：

```
function populateSpreadSheet() {
  var ss = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();
  var line=ss.getLastRow()+1;
  var length = 550;
  for(i = 0;i < length;i++){
    ss.getRange("A1:A" + length).setValue("some value");
  }
} 
```

对 clearContent() 的类似调用应该清空单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:30:41.507

这些似乎是非常基本的功能。您必须尝试自己开发它们。您是否阅读过 Apps 脚本[指南](https://developers.google.com/apps-script/overview)和[教程](https://developers.google.com/apps-script/articles)？

Stackoverflow 是你问编程相关疑惑的地方，而不是询问整个程序！

# javascript - 使用 jquery 更改 Input 元素的类型

> ID：11858741
> 
> 赞同：12
> 
> 时间：2012-08-08T06:21:11.493
> 
> 标签：javascript, jquery, html

我正在尝试更改输入类型，特别是在单击输入后我需要更改`type="text"`为`type="date"`.

```
<input type="text" placeholder="DOB" id="dob" name="dob" />
<script>
    $("#dob").click(function () {
        $(this).attr('type', 'date');

    });
</script> 
```

我想为 iphone App 完成此操作。这在 iphone 4 中不起作用。如何做到这一点？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-08T06:40:17.100

使用此代码：

```
<input type="text" placeholder="DOB" id="dob" name="dob"  />
<script>
   $("#dob").click(function(){
        $(this).prop('type', 'date');

  });
</script> 
```

这是小提琴：http: [//jsfiddle.net/HNKkW/](http://jsfiddle.net/HNKkW/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-08T06:24:49.717

这是一个属性，所以[prop()](http://api.jquery.com/prop)会这样做：

```
$("#dob").on('click', function(){
     $(this).prop('type', 'date');
});​ 
```

并记住将其包装在 document.ready 函数中！

[**小提琴**](http://jsfiddle.net/ZMhLP/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T06:29:36.793

**看到这个工作[jsfiddle](http://jsfiddle.net/eqhC2/)。**

由于浏览器中使用`.attr`. 请注意您从控制台收到的警告：

```
Uncaught Error: type property can't be changed 
```

您可以使用[.prop()更改类型](http://api.jquery.com/prop)

```
$("#dob").on('click', function(){
    $(this).prop('type', 'date');
});​ 
```

我认为这里可能存在一些潜在的问题。用户不会对文本框类型的变化感到困惑吗？

如果可能的话，您应该在向用户显示之前尝试更改文本框的类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T06:27:12.763

如果您使用早期版本的 Jquery

```
$('body').delegate('#dob','click',function(){
            $(this).attr('type', 'date');

      }); 
```

或者，如果您使用最新版本，请参阅 @adeno 的答案

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-26T08:36:41.253

我认为您的问题的正确解决方案是使用**.focus**和**.prop**属性。

```
<script>
    $("#dob").focus(function () {
        $(this).prop('type', 'date');

    });
</script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-13T04:53:30.700

对我来说，直接在元素上使用***prop是行不通的，但是经过大量的摆弄，这对我有用，所以我想分享一下，也许可以让别人头疼。***

```
$(document).on('change', '#showPass', function () {
    if ($(this).is(':checked')) {
        $(this).parents('form').find('#passField').prop("type", "text");
    } else {
        $(this).parents('form').find('#passField').prop("type", "password");
    }
}); 
```

# c# - C# Socket Print 有时无响应？

> ID：11858743
> 
> 赞同：2
> 
> 时间：2012-08-08T06:21:15.470
> 
> 标签：c#, sockets, zpl

我在打印到我们的条码打印机时遇到了一些问题。代码运行良好，但我无法立即打印另一个代码，但需要等待几秒钟。我的代码有什么问题吗？

提前感谢任何人。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Text;
using System.Net;
using System.Net.Sockets;

namespace PrintToZebra
{
class Program
{
    public static void Main(string[] args)
    {
        Console.WriteLine("start printing to: 10.160.2.254:9100");
        string text = "^XA" + 
            "^FO335,22,^CI0^A0,14,14^FR^FDConta^FS" +
            "^FO368,22,^CI0^A0,14,14^FR^FDins^FS" +
            "^PQ1" +
            "^XZ";
        printToIP("10.160.2.254", 9100, text);

    }

    public static void printToIP(string ipAddress, int printerPort, string content)
    {
        try
        {
            EndPoint ep = new IPEndPoint(IPAddress.Parse(ipAddress), printerPort);
            //EndPoint ep = new IPEndPoint(parseIP(ipAddress),printerPort);
            Socket sock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
            sock.Connect(ep);
            NetworkStream ns = new NetworkStream(sock);
            byte[] toSend = Encoding.ASCII.GetBytes(content);
            ns.Write(toSend, 0, toSend.Length);
            sock.Close();
        }
        catch(Exception ex)
        {
            Console.WriteLine(ex);
        }

    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T06:09:54.130

谢谢约阿希姆。我已经使用 BeginWrite 而不是 Write 修改了我的代码并解决了问题。

```
 public class PrintToZebra
    {
        public string printerIP { get; set; }
        public int printerPort { get; set; }
        public string myZPL { get; set; }
        private EndPoint ep { get; set; }
        private Socket sock { get; set; }
        private NetworkStream ns { get; set; }
        //private AsyncCallback callbackWrite;

    public PrintToZebra()
    {
        printerIP = "";
        printerPort = 0;
        myZPL = "";
    }

    public PrintToZebra(string anIP, int aPort, string aZPL)
    {
        printerIP = anIP;
        printerPort = aPort;
        myZPL = aZPL;
    }

    public void printToIP()
    {
        ep = new IPEndPoint(IPAddress.Parse(printerIP), printerPort);
        sock = new Socket(ep.AddressFamily, SocketType.Stream, ProtocolType.Tcp);

        try
        {
            sock.Connect(ep);
            ns = new NetworkStream(sock);
            byte[] toSend = Encoding.ASCII.GetBytes(myZPL);
            ns.BeginWrite(toSend, 0, toSend.Length, OnWriteComplete, null);
            ns.Flush(); 
        }
        catch (Exception ex)
        {
            //Console.WriteLine(ex.ToString());
            sock.Shutdown(SocketShutdown.Both);
            sock.Close();
        }

    }

    private void OnWriteComplete(IAsyncResult ar)
    {
        NetworkStream thisNS = ns;
        thisNS.EndWrite(ar);
        sock.Shutdown(SocketShutdown.Both);
        sock.Close();
    }

} 
```

# javascript - 混淆javascript函数的调用方法

> ID：11858751
> 
> 赞同：0
> 
> 时间：2012-08-08T06:21:37.140
> 
> 标签：javascript, function, call

我读了一篇关于[如何加速 javascript](http://www.nczonline.net/blog/2009/01/13/speed-up-your-javascript-part-1/)的文章，我尝试复制它可以提高循环速度的代码：

```
var chunk = function (array, process, context) {
        setTimeout(function(){  
            var item = array.shift();  
            console.log('item', item);//this could show correctly
            process.call(item, context);  

            if (array.length > 0){  
                setTimeout(arguments.callee, 100);  
            }  
        }, 100); 
    } 
```

然后我尝试将我的参数传递给它，但我不知道如何使用该`context`参数，我所做的是：

```
 var dosomething1 = function (item) {
      console.log('this is begin ' + item)
  }

  var dosomething2 = function (item) {
      console.log('this is end ' + item);
  }

  var process = function (item) {
        console.log(item); //this show undefined
        dosomething1(item);
        dosomething2(item);
  }

  var temp = ["a", "b", "c", "d"];
  chunk(temp, process);​ 
```

问题是从进程功能开始，`item`日志`undefined`，项目只能正确显示在`chunk`。

那么我该如何解决这个问题呢？我认为它与`process.call`方法有关？它与上下文参数有关吗？

[你可以在这里](http://jsfiddle.net/hh54188/NrBmD/1/)看到演示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:27:57.443

您将上下文作为第一个参数传递给`call`, `process.call(context, item);`。尽管您从不传递上下文的参数，`chunk`因为您从不使用`this`.

[http://jsfiddle.net/NrBmD/2/](http://jsfiddle.net/NrBmD/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:30:01.457

函数的`call`方法调用具有指定的函数`this`。您传递函数的第一个参数（在这种情况下`item`是在您的调用中`process.call(item, context)`）将可以通过`this`函数内的关键字访问。

因此，进行此更改以正确引用：

```
var process = function () {
    console.log(this);
    dosomething1(this);
    dosomething2(this);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T06:28:48.517

你是对的。.call方法是javascript中继承的概念，.call方法中的第一个参数用于将当前对象传递给其超类，第二个参数用作普通参数。尝试这个，

```
var chunk = function (array, process, context) {
    setTimeout(function(){  
        var item = array.shift();  
        console.log('item', item);//this could show correctly
        process.call(this, item);// the first parameter is the current object
        if (array.length > 0){  
            setTimeout(arguments.callee, 100);  
        }  
    }, 100); 
} 
```

# javascript - 从 JavaScript 值分配模型属性值

> ID：11858755
> 
> 赞同：5
> 
> 时间：2012-08-08T06:22:03.097
> 
> 标签：javascript, asp.net-mvc-3

我有一个具有以下定义的模型：

```
namespace ESimSolChemical.Models
{

    public class Employee
    {        
        public int EmployeeID{ get; set; }
        public string EmployeeName{ get; set; }
        public string Age{ get; set; }
        public string Address{ get; set; }

    } 
```

我有以下 JavaScript：

```
<script type="text/javascript">
    $(function () {
        $('#btnEmployeePiker').click(function () {
            var oParameter = new Object();
            oParameter.MultipleReturn = false;
            var oReturnObject = window.showModalDialog('/Employee/EmployeePiker/', oParameter, 'dialogHeight:470px;dialogWidth:550px;dialogLeft:400;dialogTop:100;center:yes;resizable:no;status:no;scroll:no');           
        });
    });
</script> 
```

我的 Javascript`oReturnObject`包含两个属性，例如：

```
oReturnObject.EmployeeID;
oReturnObject.EmployeeName; 
```

现在我想分配：

```
@Model.employeeID=  oReturnObject.EmployeeID; 
```

我怎样才能完成这项任务？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-08T06:48:01.897

You cannot set server side values with Javascript. You could bind these values to input fields like textboxes or hidden fields and then use Javascript to modify these values of these input fields.

Take a look at these articles, it might help you out:

*   [Setting property on the model object?](https://stackoverflow.com/questions/5181151/setting-property-on-the-model-object)
*   [get value from @Model inside jquery script](https://stackoverflow.com/questions/5770578/get-value-from-model-inside-jquery-script)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:40:23.730

你不能像在 JavaScript 中那样执行服务器端代码。

您需要以某种方式将更新的值发布回服务器以处理它们。

看看[KnockoutJS](http://knockoutjs.com/)，它使这样的事情变得非常容易。基本上，您只需将客户端的模型类序列化为 JavaScript 对象，使用它直到您决定将其保存回来，然后将其作为 JSON 发送到服务器，这将允许您拥有这样的操作方法

```
public ActionResult UpdateEmployee(Employee employee)
{
    // Update the database...
    //
} 
```

上面链接的页面有很多教程可供开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-22T21:40:58.523

This is what I have used:

```
@{
   @Convert.ToString("var refID = " + @Model.RefID + ";alert(refID);")
} 
```

and its working fine.

# java - 使用 Linux 用户权限限制应用程序存储在磁盘中的数据访问

> ID：11858756
> 
> 赞同：0
> 
> 时间：2012-08-08T06:22:05.290
> 
> 标签：java, linux, permissions, file-permissions

我正在开发一个将在 Linux 上运行的 Java SE 应用程序。该应用程序将一些文件和目录存储在磁盘上。

我只需要应用程序本身能够读取/写入这些文件/目录（即当前登录的用户不应该能够使用 OS 文件管理器读取/写入/复制这些文件）。
我试图创建一个用户和一个用户组，并将文件的权限更改为 600，将目录的权限更改为 700。
问题是应用程序以当前登录用户身份运行，因此它以当前用户身份存储文件作为所有者。
如果我`chown`对文件进行操作，那么应用程序将无法再读取文件！

我应该怎么做才能限制对应用程序的文件/目录访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:27:50.637

我认为`setuid`是你的选择。有关详细信息，请参见手册页。这是[wikipage](http://en.wikipedia.org/wiki/Setuid)，也是一个很好的参考。

每个程序都有一个`uid/gid`and `euid/egid`，你应该有它`euid/egid`匹配的文件访问权限。

* * *

详细地说，IIRC，你应该运行你的 Java SE 程序，比如`java mainclass`或`java -jar main.jar`. 在脚本中编写启动命令，例如`run.sh`.

文件开始运行.sh

```
java mainclass # or java -jar main.jar choose one appropriate to you 
```

文件结束

然后`sudo chown root run.sh`然后`sudo chmod ug+s run.sh`。

这假设您在 sudoer 列表中。如果没有，您必须向 SA 寻求帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:23:56.363

那是不可能的。用户和他们运行的程序之间的权限没有区别。

# sql-server - 使用数据透视将行转换为列

> ID：11858759
> 
> 赞同：0
> 
> 时间：2012-08-08T06:22:17.593
> 
> 标签：sql-server, sql-server-2008

这是我的桌子：

```
CaseID                                AttributeName  AttributeValue
03E07546-9C10-4399-B840-04F9CE211FB8  Case Title     deepa04
03E07546-9C10-4399-B840-04F9CE211FB8  Body Part      hand
03E07546-9C10-4399-B840-04F9CE211FB8  Diagnosis      123
E999866E-E8BE-4442-8A87-C419D482022E  Case Title     deep_case
E999866E-E8BE-4442-8A87-C419D482022E  Body Part      leg
E999866E-E8BE-4442-8A87-C419D482022E  Diagnosis      123 
```

我需要将其转换为：

```
CaseID                                Case Title  Body Part  Diagnosis
03E07546-9C10-4399-B840-04F9CE211FB8  deepa04     hand       123
E999866E-E8BE-4442-8A87-C419D482022E  deep_case   leg        123 
```

如何在 SQL Server 2008 中使用动态数据透视函数来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:33:02.473

试试tihis：

```
select CaseID  ,   [Case Title],[Body Part],  Diagnosis
from <your_table>
PIVOT (MAX(AttributeValue) FOR AttributeName IN 
([Case Title],[Body Part],  Diagnosis)) P 
```

**Edit1：** 如果列名称是动态的，您可以这样做

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(AttributeName) 
                    from <your_table>
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT CaseID  , ' + @cols + ' from t_case
             pivot 
            (
                MAX(AttributeValue)
                for AttributeName in (' + @cols + ')
            ) p '
print(@query)
execute(@query) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:31:58.133

这就是你可以使用的方式[`pivot`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)。

```
select P.CaseID, P.[Case Title], P.[Body Part], P.Diagnosis
from (
     select CaseID, AttributeName, AttributeValue
     from YourTable
     ) as T
pivot (
      min(AttributeValue) 
      for AttributeName in ([Case Title], [Body Part], [Diagnosis])
      ) as P 
```

# svn - 从存储库中删除 Thumbs.db 文件

> ID：11858768
> 
> 赞同：2
> 
> 时间：2012-08-08T06:22:54.837
> 
> 标签：svn, tortoisesvn, visualsvn

在我的项目中，有时`Thumbs.db`文件会包含在存储库中。我已经在 中添加`*.db`了全局忽略路径`Tortoise SVN`，但它仍然在`Thumbs.db`文件上显示红色标记。有没有办法可以`Thumbs.db`从存储库中删除所有文件并在将来忽略它们。

我`Tortoise SVN`在客户端机器和`VisualSVN`服务器上使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:22:12.690

您的意思是您已将 Thumbs.db 添加到**TortoiseSVN中的***全局忽略模式*中吗？**设置 | 将军**？`svn:ignore`它与常见的Subversion 属性有点不同。

[请参阅TortoiseSVN 手册](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-settings.html#tsvn-dug-settings-main)的引用：

> 全局忽略模式用于防止**未版本化的文件**出现在提交对话框中。与模式匹配的文件也会被导入忽略。

它表示该模式仅影响**未版本化的项目**，并且仅适用于客户端 PC。如果`thumbs.db`已经添加到 Subversion 甚至已提交，您应该右键单击工作副本中的文件，然后选择**TortoiseSVN | 取消版本并添加到忽略列表**。

进一步阅读[使用 TortoiseSVN 忽略文件和目录](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-ignore.html)。

* * *

如果`thumbs.db`（或任何其他文件）已经提交到 Subversion 存储库——它将永远存在:) 例如，即使您应用`svn:ignore`属性忽略它，`thumbs.db`它仍然会在存储库历史记录中（在旧版本中）。顺便说一句，请参阅相关的[Apache Subversion 常见问题解答条目](http://subversion.apache.org/faq.html#removal)。

# ios - UITextView 在缩放输出时隐藏文本

> ID：11858772
> 
> 赞同：0
> 
> 时间：2012-08-08T06:23:07.497
> 
> 标签：ios, xcode, fonts, uitextfield, uilabel

我正在尝试输出我的 iPhone 界面的高分辨率版本。我正在使用标签 imagesViews 和 textViews 来创建内容。我正在使用 renderInContext 制作主视图的高分辨率图像，并缩放内容以匹配。标签和 imageViews 似乎工作得很好，但是当 textView 正确缩放和定位时，它会隐藏一些文本。

这是基本代码：

```
UIGraphicsBeginImageContext(CGSizeMake(1536, 2048));
myExportView.frame = CGRectMake(0, 0, 1536, 2048);
[myLabel setFrame:CGRectMake(myLabel.frame.origin.x*4.4232, myLabel.frame.origin.y*4.4232, myLabel.frame.size.width*4.4232, myLabel.frame.size.height*4.4232)];
[myLabel setFont:[UIFont fontWithName:@"Arial" size:myLabel.font.pointSize*4.4232]];
[myTextView setFrame:CGRectMake(myTextView.frame.origin.x*4.4232, myTextView.frame.origin.y*4.4232, myTextView.frame.size.width*4.4232, myTextView.frame.size.height*4.4232)];
[myTextView setFont:[UIFont fontWithName:@"Arial" size:myTextView.font.pointSize*4.4232]];
[[myExportView layer] renderInContext:UIGraphicsGetCurrentContext()];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
UIImageWriteToSavedPhotosAlbum(image,nil,nil,nil); 
```

这是界面和输出的视觉效果，左侧是 640 × 960 界面，右侧是我的 1536 × 2048 输出图像（如预期的那样）注意标签和 textView 已正确缩放，但 textView 中的文本离开了。

![在此处输入图像描述](../Images/4a7b78971503b8f8387963abebc806ea.png)

如果您想看一下，这里是项目本身：owolf.net/uploads/StackOverflow/exportTest.zip

![在此处输入图像描述](../Images/9da083c89f4d00bbd5bc397f4578f321.png) 这里的更新是左侧的 textView，以各种方式放大到 4.5，除了在 x 中它只有 *2，在右侧，x 被缩放到 3。注意文本开始被剪裁。

有任何想法吗？非常感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:04:30.320

我对您的代码进行了一些实验：

```
- (IBAction)export:(id)sender {

    UIGraphicsBeginImageContext(CGSizeMake(1536, 2048));

    myExportView.frame = CGRectMake(0, 0, 1536, 2048);

   [myLabel setFrame:CGRectMake(myLabel.frame.origin.x*4.4232, myLabel.frame.origin.y*4.4232, myLabel.frame.size.width*4.4232, myLabel.frame.size.height*4.4232)];

   [myLabel setFont:[UIFont fontWithName:@"Arial" size:myLabel.font.pointSize*4.4232]];

   [myTextView setFrame:CGRectMake(myTextView.frame.origin.x*4.4232, myTextView.frame.origin.y*4.55, myTextView.frame.size.width*4.4232, myTextView.frame.size.height*4.4232)];
    [myTextView setFont:[UIFont fontWithName:@"Arial" size:myTextView.font.pointSize*4.4232]];

   [[myExportView layer] renderInContext:UIGraphicsGetCurrentContext()];
   UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
   UIGraphicsEndImageContext();
   UIImageWriteToSavedPhotosAlbum(image,nil,nil,nil);

       // adding for experiment
   UIScrollView *scroll = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
   scroll.contentSize = CGSizeMake(1536, 2048);
   [self.view addSubview:scroll];
   [scroll addSubview:myExportView];

   [scroll addSubview:myTextView];
   [scroll addSubview:myLabel]; 
```

}

（我已更改 myTextView.frame.origin.y*4.55）

之所以发生这种情况是因为您使用了相同的系数，并且结果文本视图的偏移量比需要的略高，因此文本似乎隐藏了。它被uilabel隐藏。尝试使用系数进行实验，在这种情况下，尺寸的增加不是线性的。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T04:26:24.800

我最终为此使用了一个标签。请参阅此线程以获取解决方案：

[顶部对齐的UILabel，使文本贴在标签视图的顶部-ios](https://stackoverflow.com/questions/11867135/top-aligned-uilabel-make-text-stick-to-top-of-label-view-ios)

# oracle11g - oracle jdeveloper 11g 中的提交按钮

> ID：11858775
> 
> 赞同：0
> 
> 时间：2012-08-08T06:23:39.390
> 
> 标签：oracle11g, jdeveloper, oracle-adf, oracle-xe

我正在使用oracle jdeveloper，我正在通过插入按钮插入行，但它的响应很奇怪，因为它正在更新数据库中的最后一条记录而不是创建新记录。还有一件事是它没有在真实数据库中更新.. ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:35:57.680

您是否在页面中添加了 createInsert 操作？您是否向页面添加了提交操作？如果您刚刚开始，我建议您首先阅读本教程，该教程将向您展示创建这些类型的应用程序的基础知识 - [http://docs.oracle.com/cd/E18941_01/tutorials/jdtut_11r2_55/jdtut_11r2_55_1.html](http://docs.oracle.com/cd/E18941_01/tutorials/jdtut_11r2_55/jdtut_11r2_55_1.html)

# javascript - 从外部数据表引用表单组件

> ID：11858778
> 
> 赞同：1
> 
> 时间：2012-08-08T06:24:00.293
> 
> 标签：javascript, ajax, jsf, xhtml

我想从命令链接中的数据表标记中引用下面表单中的组件 id=contractIdInputText。我想在渲染属性中使用它的 id 而不是@all。我在下面使用@all 只是因为我无法引用 id。数据表位于标签之外和之上。

```
<h:form id="contracts">
   <h:outputScript library="js" name="common.js" target="head"/>
   <h:panelGrid columns="3"   columnClasses="rightalign,leftalign,leftalign">

   <h:outputLabel for="contractIdInputText" rendered="true" value="Contract Nooo.: " />
   <h:inputText id="contractIdInputText" required="true"                                         value="#contractManager.newContractId}" />
</form> 
```

这是数据表的命令链接：

```
 <h:commandLink id="editLink" value="#{bundle.ListUnitEditLink}" 
     action="#{contractManager.updateContract}">
     <f:ajax onevent="disablePK" render="@all" />
 </h:commandLink> 
```

链接中 ajax 的全部目的是在我单击命令链接并填充表单时禁用表单组件。我还注意到，就像使用 @all 做我想要的一样（在禁用 inputText 的情况下填充表单），这导致我需要在数据表中的命令链接上单击命令链接两次，以便用另一个填充表单物品。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:17:34.057

如果它们不在同一个父级中，那么您应该只通过其**绝对**客户端 ID 而不是（无效）相对客户端 ID[`NamingContainer`](http://docs.oracle.com/javaee/6/api/javax/faces/component/NamingContainer.html)引用另一个组件。绝对客户端 ID 是完整的客户端 ID（如您在生成的 HTML 输出中所见），前缀为命名容器分隔符（默认为）。**`:`**

 **所以，这应该做

```
<f:ajax ... render=":contracts:contractIdInputText" /> 
```

*（假设它`<form id="contracts">`本身不在另一个`NamingContainer`父级中，再次，只需检查生成的 HTML 输出以确保）*

至于为什么需要两次单击命令链接，这很可能与[JSF 规范问题 790](http://java.net/jira/browse/JAVASERVERFACES_SPEC_PUBLIC-790)有关。解决方法是在`render`. 另请参阅[包含其他表单的内容的 Ajax 呈现](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#AjaxRenderingOfContentWhichContainsAnotherForm)。**

# vb.net - 使用 Python 或 .NET 将 PDF 转为 Excel

> ID：11858781
> 
> 赞同：-1
> 
> 时间：2012-08-08T06:24:26.997
> 
> 标签：vb.net, excel, pdf, python-2.7

我有一个包含许多表格信息的 PDF 文件，例如

```
1 john maklin testing 20000 
```

我想将此 PDF 文件数据转换为 Excel 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:00:07.480

如果它是一次性的，那么我建议使用市场上已有的软件。我建议在 SO 中查看[此](https://stackoverflow.com/questions/8370014/how-to-convert-pdf-to-html)链接，在那里我回答了类似的查询。

如果这是常规操作，那么您可以尝试将[Xpdf](http://www.foolabs.com/xpdf/download.html)集成到您的代码中以创建一个这样的应用程序。虽然我相信它会很乱:)

我本可以建议安装 Adob​​e Professional，然后在您的程序中使用它，但我已经走过了这条路线，我相信您也不想这样做。Adobe 已经发布了 PDF 规范，但似乎每个程序对 pdf 的解释都有些不同，考虑到每个供应商都遵循不同的指南来创建 pdf，这使得人们很难阅读任何 pdf 文件。

如果你在网上搜索，你会看到[这个](http://www.business-spreadsheets.com/forum.asp?t=884.)链接。他们声称已经成功地将 Xpdf 与 VBA 集成。我从未测试过它，因此您可能想自己检查一下。如果它可以集成到 VBA 中，那么它很有可能也可以集成到 VB.Net 中。我不确定python虽然。

另一种选择是，如果您可以直接将文件输出到 csv 而不是源处的 pdf，则不会出现 pdf 到 Excel 的转换。我不确定您是否可以行使此选项。

# php - 有什么办法可以让很少的表在教义2 mysql中写证明

> ID：11858784
> 
> 赞同：0
> 
> 时间：2012-08-08T06:24:57.103
> 
> 标签：php, mysql, doctrine-orm, symfony-2.1

我正在构建一个 Symfony 2.1 Doctrine 2.3 应用程序。由于我无法对复杂表单进行完全编码，因此我的几个表可能会被更新，这是我不想要的。

有什么方法可以锁定这些表，这样无论发生什么数据都不会在那里更新？只有记录可以只读但不能写入。

在这样做时，学说也不应该显示任何错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T10:46:34.437

如果您使用注释：

```
@Entity(readOnly=true) 
```

有关详细信息，请参阅[文档](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/annotations-reference.html#entity)。

# android - 如何在 ImageView 中添加 EditText

> ID：11858787
> 
> 赞同：0
> 
> 时间：2012-08-08T06:25:01.817
> 
> 标签：android, android-layout

我有一个`ImageView`，我想`EditText`在其中添加一个玩家可以输入他/她的分数的地方。盒子布局已经存在，但它在图像上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:09:30.253

在这里试试这个：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/background">

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:ems="10" >

        <requestFocus />
    </EditText>

</RelativeLayout> 
```

我设置了背景图像而不是`ImageView`. 我希望结果和你期望的一样。它。

# java - 找到数组中可能出现的最大差异，其中较小的整数出现在较早的位置

> ID：11858790
> 
> 赞同：11
> 
> 时间：2012-08-08T06:25:11.283
> 
> 标签：java, algorithm

这是一道面试题：

在整数数组中找到最大可能的差异，使得较小的整数出现在数组的前面。

约束：数字不是唯一的。范围是java的整数范围。（或任何其他语言）

例子：

输入 1：{1, 100, 2, 105, -10, 30, 100}

最大的差异在 -10 和 100 -> 110 之间（这里 -10 位于第 5 个索引处，100 位于第 7 个索引处）

输入 2：{1、100、2、105、-10、30、80}

最大的差异在 1 和 105 -> 104 之间（这里 1 位于第 1 个索引处，105 位于第 4 个索引处）

可能的解决方案：

一种方法是检查所有可能的差异并跟踪迄今为止发现的最大差异 O(n^2) 复杂度。

这可以在 O(n^2) 时间内完成吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-08T06:41:45.707

Dhandeep 的算法很好，Vivek 将代码翻译成 Java 的工作！此外，我们还可以正常扫描数组，而不是反向扫描：

```
int seed[] = {1, 100, 2, 105, -10, 30, 100};
int maxDiff=Integer.MIN_VALUE, minNumber = Integer.MAX_VALUE;

for (int i = 0; i < seed.length ; i++){
    if(minNumber > seed[i]) 
       minNumber = seed[i];

    maxDiff = Math.max(maxDiff, (seed[i]-minNumber));
}
System.out.println(maxDiff); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-08T06:35:03.280

从最后一个元素开始并向后移动。记住迄今为止发生的最大元素。对于每个元素，从最大值中减去并存储在相应的位置。

此外，您可以保留一个元素来存储最大差异并立即提供输出。O(n) 时间，O(1) 空间。

```
int max = INT_MIN;
int maxdiff = 0;

for (i = sizeof(arr) / sizeof(int) - 1; i >= 0; i--) {
  if (max < arr[i]) {
    max = arr[i];
  }
  int diff = max - arr[i];
  if (maxdiff < diff) {
    maxdiff = diff;
  }
}

print maxdiff; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-08T06:52:08.170

感谢@Dhandeep Jain 的回答。有java版本：

```
//int seed[] = {1, 100, 2, 105, -10, 30, 100};
        int seed[] = {1, 100, 2, 105, -10, 30, 80};
        int maxDiff=Integer.MIN_VALUE, maxNumber = Integer.MIN_VALUE;

        for (int i = (seed.length-1); i >=0 ; i--){
            if(maxNumber < seed[i]) 
                maxNumber = seed[i];

            maxDiff = Math.max(maxDiff, (maxNumber - seed[i]));
        }
        System.out.println(maxDiff); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T06:38:54.947

我建议最大的差异总是在那之前的最大数字和最小数字之间或之后的最小数字和最大数字之间。这些可以在线性时间内确定。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-07T11:20:22.497

```
public class Test{

    public static void main(String[] args){

        int arr1[] = {1,2,5,7,9};
        int arr2[] = {20,25,26,35};
        int diff = 0;
        int max = 0;

        for(int i=0;i<arr1.length;i++){
            for(int j=0;j<arr2.length;j++){

                diff =  Math.abs(arr1[i]-arr2[j]);
                if(diff > max){
                    max = diff;
                }
            }
        }
    System.out.println(max);
    }   
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-29T06:56:19.883

```
 // Solution Complexity : O(n)   
    int maxDiff(int a[], int n){
        //  Find difference of adjacent elements
        int diff[n+1];
        for (int i=0; i < n-1; i++)
            diff[i] = a[i+1] - a[i];

        // Now find the maximum sum sub array in diff array
        int max_diff = diff[0];
        for (int i = 1 ; i < n-1 ; i++ ) {
            if( diff[i-1] > 0 ) diff[i] += diff[i-1];
            if( max_diff < diff[i] ) max_diff = diff[i];
        }
        return max_diff;
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-20T07:14:38.207

首先找到数组相邻元素之间的差异，并将所有差异存储在大小为 n-1 的辅助数组 diff[] 中。现在这个问题变成了找到这个差数组的最大和子数组。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-08T02:43:27.460

红宝石解决方案：

```
a = [3, 6, 8, 1, 5]
min = 10**6
max_diff = -10**6
a.each do |x|
  min = x if x < min
  diff = x - min
  max_diff = diff if diff > max_diff
end
puts max_diff 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-07-30T20:06:29.013

```
public static void findDifference(Integer arr[]) {
    int indexStart = 0;
    int indexMin = 0;
    int indexEnd = 1;
    int min = arr[0];
    int diff = arr[1] - arr[0];
    for (int counter = 1; counter < arr.length; counter++) {
        if (arr[counter] - min > diff) {
            diff = arr[counter] - min;
            indexEnd = counter;
            indexStart = indexMin;
        }
        if (arr[counter] < min) {
            min = arr[counter];
            indexMin = counter;
        }
    }
    System.out.println("indexStart = " + indexStart);
    System.out.println("indexEnd = " + indexEnd);
    System.out.println("diff = " + diff);
} 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2018-08-17T09:35:55.670

```
public static void findlargestDifference(int arr[]){

    int max_diff=0;     
    int min_value=Integer.MIN_VALUE;        
    for(int i=0;i<arr.length;i++){

        if(min_value<arr[i]){               
            min_value=arr[i];               
        }           
        int diff=min_value-arr[i];

        if(max_diff<diff){
            max_diff=diff;
        }                   
    }       
    System.out.println("Max Difference is  "+ max_diff);    
} 
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2012-08-08T06:34:31.150

我很确定这应该可以解决您的问题：

```
 int largestNumber = Integer.MIN_VALUE;
    int smallestNumber = Integer.MAX_VALUE; 

    for(int i = 0; i < yourArray.Length; i++)
    {
        if(yourArray[i] > largestNumber)
            largestNumber = yourArray[i];

        if(yourArray[i] < smallestNumber)
            smallestNumber = yourArray[i];

    }

    int biggestDifference = largestNumber - smallestNumber ; 
```

# function - matlab内联函数，对零有特殊处理

> ID：11858794
> 
> 赞同：3
> 
> 时间：2012-08-08T06:25:29.077
> 
> 标签：function, matlab, inline

我有一个奇点为零的函数。结果值应该在该点 1。

但是，我无法理解如何创建一个内联函数，该函数对 x 或 y = 0 处的 x 和 y 值进行特殊处理。

例如，该功能可以是

```
f = @(x,y) ( 1./x + 1./y ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T09:49:47.390

用一个反问来回答你的问题：你为什么希望它是内联的？

作为一般规则，保持内联函数简单。如果需要更多功能，请使用专用功能：

```
function val = f(x,y)

    if ~all(size(x)==size(y))
        error('sizes must match');

    val = zeros(size(x));

    zero_x = x==0;
    zero_y = y==0;

    not_zero = ~zero_x & ~zero_y;
    zero = ~not_zero;

    val(not_zero) = 1./x(not_zero) + 1./y(not_zero);
    val(zero) = 1;           

end 
```

话虽如此，当然有*方法*可以内联（参见其他答案）。

但正如您所指出的，您的实际功能更复杂，所以......为什么内联？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T07:24:59.357

作为*肮脏*的技巧，您可以将 x 替换为`x + (x==0)`

那么如果 x 等于 0，那么分母中就会有 0+1。

* * *

在某些情况下，您还可能滥用“短路”运算符。

喜欢`~isfinite(f(x)) || f(x)`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T08:48:15.853

创建以下`iif.m`函数文件，驻留在您的工作文件夹中，或者如果您在其他函数中使用它甚至作为子函数（脚本当然不能包含子函数）：

```
function val = iif(expr, truepart, falsepart)
    if isscalar(truepart)
        truepart=truepart(ones(size(expr)));
    end
    if isscalar(falsepart)
       falsepart=falsepart(ones(size(expr))); 
    end
    val = arrayfun(@iif_scalar, expr, truepart, falsepart);
end
function val = iif_scalar(expr,truepart,falsepart)
    if expr
        val = truepart;
    else
        val = falsepart;
    end
end 
```

并按如下方式使用它：

```
f = @(x,y) iif(x==0 | y==0, 1, 1./x + 1./y ); 
```

我`iif`尽可能保持函数的通用性，你可以在向量、标量、混合标量和向量，甚至矩阵上使用它。例如，在上面我使用了 2 个向量和一个标量：

```
iif( ...
     x==0 | y==0 ,... % expression if x or y are 0 => vector
     1 , ...          % scalar obviously
     1./x + 1./y ...  % function of x and y => vector
   ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-23T01:22:46.440

我认为这大致是大多数人在这种情况下想要的。

```
1+sum([repmat(nan,~**0**,1) 0]) 
```

答案 = NaN

```
1+sum([repmat(nan,~**1**,1) 0]) 
```

答案 = 1

现在概括：

```
zero2nanElseNum_inline = @(x) x*(1+sum([repmat(nan,~x,1) 0])) 
```

* * *

```
zero2nanElseNum_inline(0) 
```

答案 = NaN

```
zero2nanElseNum_inline(10) 
```

答案 = 10

```
zero2nanElseNum_inline(1) 
```

答案 = 1

* * *

对于手头的特定情况，您可以简单地获取代码片段：

```
sum([repmat(nan,~**0**,1) 0]) 
```

把它喂给isnan：

```
isnan(sum([repmat(nan,~**0**,1) 0])) 
```

并将结果添加到您的原始号码。

# asp.net-mvc-3 - 如何使用外部 MVC 3 应用程序使用 WCF 服务？

> ID：11858796
> 
> 赞同：0
> 
> 时间：2012-08-08T06:25:38.593
> 
> 标签：asp.net-mvc-3, wcf

我创建了一个简单的 WCF 服务，用于显示表详细信息。我的服务准备好了。

现在在我的外部 MVC 3 应用程序中，我需要使用我的 WCF 服务。所以我已经完成了*添加服务参考*。

如何在我的 MVC 3 应用程序中编写代理代码来使用我的服务？我是 WCF 和 ASP.NET MVC 的新手。接下来我应该怎么做才能使用 wcf 服务？

我的代码：

*界面*

```
[ServiceContract]
public interface IBooksService
{
    [OperationContract]
    string GetBooksInfo(int BookId);
} 
```

*班级*

```
public class BooksService:IBooksService
{
    public string GetBooksInfo(int BookId)
    {
        string ConnectionString = "myDB";
        SqlConnection con = new SqlConnection(ConnectionString);
        con.Open();
        SqlCommand cmd = new SqlCommand("Get_BooksInfo", con);
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.Add(new SqlParameter("@BookId", BookId));
        SqlDataReader dr = cmd.ExecuteReader();
        if (dr.Read())
            return dr[0].ToString();
        else
            return "-1";
    }
} 
```

在 mvc 3 应用程序中，我添加了服务引用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T09:06:23.307

最简单的方法是为服务生成一个代理，然后调用该代理上的方法。对于简单的情况，以下代码应该绰绰有余，或者无论如何您都可以将其用作起点：

```
BasicHttpBinding binding = new BasicHttpBinding();
EndpointAddress endpointAddress = new EndpointAddress(//url for the service goes here);
_proxy = ChannelFactory<ImplementedInterface>.CreateChannel(binding, endpointAddress); 
```

请注意，这甚至不需要添加服务引用（只要您有服务实现的接口的副本），它会给您一个代理，您可以像项目中的任何其他类一样使用它。当您在生成的代理上调用方法时，请确保捕获 wcf 错误（FaultException、FaultException、TimeoutException、CommunicationException）而不是通常的 .Net 错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T09:08:24.647

首先，您希望将`using`控制器中的 WCF 服务引用到您在将其添加到应用程序时设置的任何名称。因此，如果您调用它`WCFService`并且您的项目被调用`MyMvcApplication`，那么您将是这样的：`using MyMvcApplication.WCFService`

然后你会在你的控制器中用你的服务类的名字来实例化它，所以如果你的`.svc`类被调用`ServiceClass`，你会做这样的事情：`ServiceClass myService = new ServiceClass();`

然后在您的操作/方法中，您只需调用您创建的方法，`ServiceClass`如下所示：`myService.MyMethod(myParam);`

## 编辑

在你的控制器中，你会有类似的东西：

```
using MyMvcApplication.WCFService

public class MyController : Controller
{
    private BooksServiceClient myService = new BooksServiceClient();

    public ActionResult Details(int id)
    {
        var book = myService.GetBooksInfo(id);

        return View(book);
    }
} 
```

那这行不通吗？由于您的代码看起来不错...

如果这不起作用，那么我建议看一下新`ASP.NET Web API`的，因为它将在未来取代 WCF，并且更容易实现和拨打电话..

# ruby - 将红宝石代码注入块内的块中

> ID：11858799
> 
> 赞同：2
> 
> 时间：2012-08-08T06:25:51.320
> 
> 标签：ruby

我反复使用这种模式：

```
pb= ProgressBar.new("blah_map", wtf.count)
newresult= cache("blah_map") do 
  result.map{ |r| pb.inc; { blah: r[:x] } }
end
pb.finish 
```

或者

```
pb= ProgressBar.new("blah_group", wtf.count)
newresult= cache("blah_group") do 
  result.group_by{ |r| pb.inc; "#{r[:x]}&#{r[:y]}" }
end
pb.finish 
```

所以我很自然地希望能够做到

```
def progress_cache(name, count, &block)
  pb= ProgressBar.new(name, count)
  inject_pb_inc(block) # how??
  # do some caching with yield if cache doesn't exist, don't mind this
  pb.finish
end 
```

并像这样使用它：

```
newresult= progress_cache("lol", result.count) do 
  result.map do |r| 
    # progress_cache magically inserted a pb.inc here for pretty animation!  
    r[:omg] 
  end 
end 
```

问题是，如何将 pb.inc 调用注入到 progress_cache 块内的块（map、group_by 等）中？

编辑：改写问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:00:34.657

有几种方法可以实现这一点，并在表现力方面进行各种权衡：

1.  将进度条作为块参数发送

    ```
    def progress_cache(name, count &block)
      pb = ProgressBar.new(name, count)
      result = block.call(pb)
      pb.finish
      result
    end 
    ```

    并像使用它一样

    ```
    newresult = progress_cache("lol", result.count) do |pb|
      result.map{|r| pb.inc; r[:omg]}
    end 
    ```

2.  创建一个自动增加进度条的新地图函数（您可以直接覆盖 result.map，或提供 result.map_with_progress，但我将由您决定）

    ```
    def map_with_progress(container, name, &block)
      pb = ProgressBar.new(name, container.count)
      result = container.map{|obj| block.call(obj)}
      pb.finish
      result
    end 
    ```

    然后像这样使用它

    ```
    newresult = map_with_progress(result, "lol") { |r| r[:omg] } 
    ```

    当然，由于您同时使用 map 和 group_by，因此您必须在此处使用两个辅助方法，这可能会开始变得混乱。

3.  使用高阶函数

    ```
    def function_with_progress(obj, func_name, name, count, &block)
      pb = ProgressBar.new(name, count)
      result = obj.__send__(func_name) do |param|
        pb.inc
        block.call(param)
      end
      pb.finish
      result
    end 
    ```

    然后像这样使用它

    ```
    newresult = function_with_progress(result, "map", "lol", result.count) do |r|
      r[:omg]
    end 
    ```

    但我不推荐这种方法，因为它太抽象了。它可以在像 javascript 或 clojure 这样的函数式语言中工作，但我认为它不适合 ruby​​。

# javascript - 创建唯一选项，然后使用 JavaScript 填充多个选择

> ID：11858802
> 
> 赞同：0
> 
> 时间：2012-08-08T06:25:55.373
> 
> 标签：javascript, html-select

我正在使用 JavaScript 填充几个选择。对于其中一些，选择选项是相同的，所以我考虑过创建一个选项，然后填充所有相关的选择。

以下是我实际的做法：

```
var option = document.createElement('option');
    option.text = 'please select a journal';
    option.value ='NULL';

    try 
    {
        selectSection.add(option, null);  // standards compliant; doesn't work in IE
    }
    catch(ex) 
    {
        selectSection.add(option);  // IE only
    }

    var option = document.createElement('option');
    option.text = 'please select a journal';
    option.value ='NULL';

    try 
    {
        selectSpecialIssue.add(option, null);  // standards compliant; doesn't work in IE
    }
    catch(ex) 
    {
        selectSpecialIssue.add(option);  // IE only
    }

    var option = document.createElement('option');
    option.text = 'please select a journal';
    option.value ='NULL';

    try 
    {
        selectVolume.add(option, null);  // standards compliant; doesn't work in IE
    }
    catch(ex) 
    {
        selectVolume.add(option);  // IE only
    }

                    .............ETC................ 
```

我试图只创建一个选项（选项相同），然后填充这些选择：

```
var option = document.createElement('option');
    option.text = 'please select a journal';
    option.value ='NULL';

    try 
    {
        selectSection.add(option, null);
                    selectSpecialIssue.add(option, null);
                    selectVolume.add(option, null);
    }
    catch(ex) 
    {
        selectSection.add(option);
                    selectSpecialIssue.add(option);
                    selectVolume.add(option);
    } 
```

这里的代码更好，更容易理解，但问题是只有我的最后一个选择（selectVolume）被填充，我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:44:55.930

我认为这是因为您没有将选项对象初始化为新的。因此，您将元素附加到每个选择，但该选项只有一个对象，因此必须在另一个选择中将其删除。更好的方法是在函数内部执行此操作：

```
function setOptionJournal(selection) {
  var option = document.createElement('option');
  option.text = 'please select a journal';
  option.value ='NULL';

  try 
  {
    selection.add(option, null);
  }
  catch(ex) 
  {
    selection.add(option);
  }
}
setOptionJournal(selectSection);
setOptionJournal(selectSpecialIssue);
setOptionJournal(selectVolume); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T06:52:54.357

您可以将选项创建移动到功能

```
function createOption(text, value) {
            var option = document.createElement('option');
            option.text = text;
            option.value = value == null ? 'NULL' : value;  

            return option;
        } 
```

然后给你写这样的代码

```
 var selectSection = document.getElementById('selectSection');
            var selectSpecialIssue = document.getElementById('selectSpecialIssue');
            var selectVolume = document.getElementById('selectVolume');

            var selectText ='please select a journal';

            selectSection.add(createOption(selectText));
            selectSpecialIssue.add(createOption(selectText));
            selectVolume.add(createOption(selectText)); 
```

这会干净得多

# java - 如何在java中将负双值转换为二进制值？

> ID：11858806
> 
> 赞同：2
> 
> 时间：2012-08-08T06:26:06.550
> 
> 标签：java

以下是双精度值

```
-1.2316741412499997E8 
```

以下是我正在使用的方法：

```
Long.toBinaryString(Double.doubleToRawLongBits(-1.2316741412499997E8))
output: 1100000110011101010111011000101011011000011111111111111111111110 
```

但是，当我尝试使用值 2 执行此操作时，我得到以下输出，如下所示，这是错误的。

```
Long.toBinaryString(Double.doubleToRawLongBits(2.0))
output: 100000000000000000000000000000000000000000000000000000000000000 
```

有人会告诉我如何将负双精度值转换为二进制。在此先感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T06:33:25.917

我不确定你想要什么结果，但[2.0 的结果是绝对正确的](http://www.binaryconvert.com/result_double.html?hexadecimal=4000000000000000)。

请注意，它给出的数字不是零填充的，因此它似乎设置了符号位，但设置的位是指数的最高位。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T07:02:51.363

浮点值（例如双精度）的表示方式与整数值完全不同。从整数值中，您习惯于将它们表示为零填充（对于正数）二进制数，该二进制数表示以 2 为底的相同数字。这不适用于浮点值。

根据定义，浮点值具有浮点小数点，因此二进制数必须对小数点所在位置的信息进行编码。这是通过将数字重塑为以下内容来完成的：

```
(+/-) x * 2^y   whereas 0 <= x < 2 (= 10 base 2) 
```

`(+/-)`是需要一位的符号。`x`是尾数，`y`指数。所以二进制表示最后必须编码三个部分。

因为`0 <= x < 2`, x 总是以 1.something 开头，所以`1.`不需要在表示中。只有小数点后的部分被保存，它被认为是有效位。

在您的示例中， 2.0 被重塑为：

```
+ 1.0 * 2 ^ 1 
```

符号：+ 有效数字：0 指数：1

这恰好表示为

```
0 10000000000 0000000000000000000000000000000000000000000000000000 
```

对于负数，符号是 - 表示为前导`1`：

```
1 10000000000 0000000000000000000000000000000000000000000000000000 
```

请注意，您的原始帖子列出了一个缺少前导 0 的数字，这在数学上是正确的，但在您尝试捕获二进制表示时会产生误导：

```
 10000000000 0000000000000000000000000000000000000000000000000000 =
0 10000000000 0000000000000000000000000000000000000000000000000000 
```

还有一些细节需要理解和记住。例如，指数也可以是负数。[您可以在Floating Point Wikipedia 文章](http://en.wikipedia.org/wiki/Floating_point#IEEE_754%3a_floating_point_in_modern_computers)中找到更详细的解释。Joachim 引用的 binaryconvert.com 也可以帮助您理解表示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T06:36:45.680

这是你想要的吗？

```
System.out.println(Long.toBinaryString(Double.valueOf(2.0).longValue()));
System.out.println(Long.toBinaryString(Double.valueOf(-2.0).longValue())); 
```

# string - 如何在 Clojure 中将字符串转换为布尔值

> ID：11858807
> 
> 赞同：6
> 
> 时间：2012-08-08T06:26:27.013
> 
> 标签：string, clojure, boolean

我有以下陈述

```
(if "true"  (println "working") (println "not working")) 
```

结果是 - 工作

```
(if "false"  (println "working") (println "not working")) 
```

结果是 - 工作

两者的时间结果都是一样的，如何正确地将字符串转换为 clojure 中的布尔值。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-08T06:32:55.647

您可以创建一个新的 java Boolean 对象，该对象有一个接受字符串的方法。如果你然后使用 clojure 的布尔函数，你实际上可以让它在 clojure 中工作。

```
(boolean (Boolean/valueOf "true")) ;;true
(boolean (Boolean/valueOf "false")) ;;false 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-08T06:40:20.053

如果必须将字符串视为布尔值，`read-string`是一个合理的选择。但是，如果您知道输入将是一个格式良好的布尔值（即“true”或“false”），您可以将集合`#{"true"}`用作函数：

```
(def truthy? #{"true"})
(if (truthy? x)
  ...) 
```

或者，如果您想将除 "false" 之外的任何字符串视为真实（大致是 Clojure 如何看待任何事物的真实性），您可以使用`(complement #{"false"})`：

```
(def truthy? (complement #{"false"}))
(if (truthy? x)
  ...) 
```

如果你想做一些像 PHP 的弱类型转换这样卑鄙的事情，你必须自己编写规则。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-08T06:31:51.813

使用`read-string`

```
(if (read-string "false")  (println "working") (println "not working")) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-08T09:21:01.693

您应该始终考虑包装代码以将这种转换为明确命名的函数。这使您可以在代码中更具描述性，并且还允许您在以后需要时更改实现（例如，如果您确定其他字符串也应该被视为真实）。

我建议像：

```
(defn true-string? [s]
  (= s "true")) 
```

将此应用于您的测试用例：

```
(if (true-string? "true")   (println "working") (println "not working"))
=> working

(if (true-string? "false")  (println "working") (println "not working"))
=> not working 
```

# c# - 使用 Eval 从通用列表中创建逗号分隔的字符串

> ID：11858812
> 
> 赞同：3
> 
> 时间：2012-08-08T06:26:41.937
> 
> 标签：c#, asp.net, .net, gridview, repeater

我有一个报告课。报告数据使用转发器控件呈现。有一个部门列表（字符串的通用列表）以逗号分隔显示。我们可以使用 Eval 将其作为中继器中的逗号分隔列表吗？如果我们不能使用 Eval，repeater 中是否还有其他语法？

班级

```
 public class Report
{
    public int ReportID { get; set; }
    public string Title { get; set; }
    public string Recipients { get; set; }
    public string Frequency { get; set; }
    public List<string> DepartmentList { get; set; }

} 
```

ASP.NET 标记

```
<asp:Repeater ID="rptReports" runat="server">
                    <HeaderTemplate>
                        <div>
                        </div>
                    </HeaderTemplate>
                    <ItemTemplate>
                        <div class="repeaterIdentifier">
                            <div class="reportTitle">
                                <%# Eval("Title") +":" %>
                            </div>
                            <div class="reportFrequency">
                                <%# " Frequency - "+ Eval("Frequency") %>
                            </div>
                        </div>
                        <div class="reportContent">
                            <div class="repeaterLine">
                                <%# Eval("Recipients")%></div>
                        </div>
                    </ItemTemplate>
                </asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T06:33:12.230

您可以使用

```
<%#String.Join(",",((Report)Container.DataItem).DepartmentList)%> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T06:39:24.120

尝试这个

```
<ItemTemplate>
   <%# String.Join((List<string>)Eval("DepartmentList")).ToArray()) %>
</ItemTemplate> 
```

注意：代码未经测试

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T06:33:47.517

在您的班级`Report`中，您可能想要添加一个额外的属性

```
public string DepartmentListCommas
{
  get
  {
     return string.Join(", ", DepartmentList);
  }
} 
```

# c# - Excel文件的读取c#

> ID：11858817
> 
> 赞同：0
> 
> 时间：2012-08-08T06:27:38.813
> 
> 标签：c#, excel

![在此处输入图像描述](../Images/25839720767cbfe3b6cc7104968f7452.png)

嗨，大家好！我遇到的一个问题是我很难将这个 Excel 文件读取到数据网格视图中，如上图所示。任何帮助将不胜感激。谢谢。

这些是我读取 Excel 文件的代码，但有一个错误，我很难对其进行故障排除。

```
private void btnSearch_Click(object sender, EventArgs e)
    {
        Excel.Workbook workbook;
        Excel.Worksheet NwSheet;
        Excel.Range ShtRange;
        Microsoft.Office.Interop.Excel.Application ExcelObj = new Microsoft.Office.Interop.Excel.Application();
        OpenFileDialog filedlgExcel = new OpenFileDialog();
        filedlgExcel.Title = "Select file";
        filedlgExcel.InitialDirectory = @"c:\";
        filedlgExcel.FileName = txtFileName.Text;
        filedlgExcel.Filter = "Excel Sheet(*.xlsx)|*.xlsx|All Files(*.*)|*.*";
        filedlgExcel.FilterIndex = 1;
        filedlgExcel.RestoreDirectory = true;
        if (filedlgExcel.ShowDialog() == DialogResult.OK)
        {
           workbook = ExcelObj.Workbooks.Open(filedlgExcel.FileName);
            NwSheet = (Excel.Worksheet)workbook.Sheets.get_Item(1);
        ShtRange = NwSheet.UsedRange; //gives the used cells in sheet
        //Reading Excel file.
        //Creating dataTable to read the containt of the Sheet in File.

        //Set header name
        for (int Cnum = 1; Cnum <= ShtRange.Columns.Count; Cnum++)
        {
            dt.Columns.Add(new DataColumn((ShtRange.Cells[1, Cnum] as Excel.Range).Value2.ToString()));
        }
        dt.AcceptChanges();
        //store coumn names to array
        string[] columnNames = (from dc in dt.Columns.Cast<DataColumn>() select dc.ColumnName).ToArray();

        //populate fields
        for (int Rnum = 2; Rnum <= ShtRange.Rows.Count; Rnum++)
        {
            DataRow dr = dt.NewRow();
            for (int Cnum = 1; Cnum <= ShtRange.Columns.Count; Cnum++)
            {
                dr[Cnum - 1] = (ShtRange.Cells[Rnum, Cnum] as Excel.Range).Value2.ToString();
            }
            dt.Rows.Add(dr);
            dt.AcceptChanges();
        }
        workbook.Close(true, Missing.Value, Missing.Value);
        ExcelObj.Quit();

        foreach (DataRow dr in dt.Rows)
        {
            string strEmployee = dr["Employee Name"].ToString();
            obj1 = new List<employeeschedule>();
            for (int i = 1; i < dt.Columns.Count; i++)
            {
                string period = dr[i].ToString();
                string[] split = period.Split('–');
                employeeschedule es = new employeeschedule();
                string day = columnNames[i];
                if (split[0] == "REST")
                {
                    es.day = day;
                    es.startTime = "0000";
                    es.endTime = "0000";
                    es.restDay = "Yes";
                }
                if (split[0] == "OFF")
                {
                    es.day = day;
                    es.startTime = "0000";
                    es.endTime = "0000";
                    es.restDay = "Yes";
                }
                else
                {
                    es.day = day;
                    es.startTime = split[0];
                    es.endTime = split[1];
                    es.restDay = "No";
                }
                obj1.Add(es);
            }

            dict.Add(strEmployee, obj1);
            dgvEmployeeShift.DataSource = dt;
        }
            }
        } 
```

错误落在这部分：

```
 dt.Columns.Add(new DataColumn((ShtRange.Cells[1, Cnum] as Excel.Range).Value2.ToString())); 
```

它指出“无法对空引用执行运行时绑定”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:04:26.760

我喜欢在自动化 Excel 时使用 Interop，但出于您的要求，为什么不使用`OleDb`呢？它比使用互操作快得多？

**久经考验**

```
 private void btnSearch_Click(object sender, EventArgs e)
    {
        System.Data.OleDb.OleDbConnection MyCon ;
        System.Data.DataSet DtSet ;
        System.Data.OleDb.OleDbDataAdapter MyCommand ;

        //~~> Replace this with relevant file path
        MyCon = new System.Data.OleDb.OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\Sample.xlsx;Extended Properties=\"Excel 12.0 Xml;HDR=YES;IMEX=1\"");

        //~~> Replace this with the relevant sheet name
        MyCommand = new System.Data.OleDb.OleDbDataAdapter("select * from [Sheet1$]", MyCon);

        MyCommand.TableMappings.Add("Table", "MyTable");
        DtSet = new System.Data.DataSet();

        //~~> Fill Dataset
        MyCommand.Fill(DtSet);

        //~~> Set Source
        dataGridView1.DataSource = DtSet.Tables[0];
        MyCon.Close();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-03T09:43:52.220

这对我有用............浏览您的本地文件夹，选择excel，在网格视图中显示。我建议使用 oledb

private void OpenFile_Click(object sender, EventArgs e) { OpenFileDialog openfiledialog1 = new OpenFileDialog(); if (openfiledialog1.ShowDialog()==System.Windows.Forms.DialogResult.OK) { this.textBox_path.Text = openfiledialog1.FileName;

```
 }

    }

    private void LoadExcel_Click(object sender, EventArgs e)
    {
        //string pathConn = @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source="+textBox_path.Text+";Extended Properties='Excel 8.0;HDR=Yes;IMEX=1'";
        string pathConn = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + textBox_path.Text + ";Extended Properties='Excel 12.0;HDR=Yes;IMEX=1'";
        OleDbConnection conn = new OleDbConnection(pathConn);

        conn.Open();
        OleDbDataAdapter mydataadapter = new OleDbDataAdapter("Select * from ["+textBox_sheet.Text+"$]", conn);
        DataTable dt = new DataTable();

        mydataadapter.Fill(dt);
        dataGridView1.DataSource = dt;

        conn.Close();
     } 
```

# c# - 从 WCF 上传和下载大量对象

> ID：11858819
> 
> 赞同：2
> 
> 时间：2012-08-08T06:27:40.887
> 
> 标签：c#, wcf, .net-4.0

我对 .NET、C# 和 WCF 很陌生，我正在尝试创建一个服务，该服务将公开方法以允许上传和下载大量对象（对象数组）。我看过很多关于 WCF 中大文件传输的帖子，但我似乎找不到任何专注于上传和下载大量可序列化对象的内容。

我已经能够“破解” web.config 文件以获取允许的字节数和超时限制等，但我想知道是否实际上有更好的方法来配置`WCF`更好的速度和内存使用以允许此类传输。因为我已经根据我的测试结果配置了 web.settings（如果超时/字节限制超过，用一些疯狂的大数字增加限制等）我怀疑我的配置是否有意义。

其次，我已经看到了一些实现选项，例如具有 binding `TransferMode = Streaming or MTOM`，但我不知道它们是否适用于我的场景。有人可以指出我正确的方向吗？

抱歉，我可能没有很好地构建我的问题，但我们将不胜感激。

以下是我的 web.config 设置：

```
<system.web>
    <httpRuntime maxRequestLength="409600000" executionTimeout="360000"/>
    <compilation debug="true" targetFramework="4.0"  />
  </system.web>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHTTP" closeTimeout="00:01:00" receiveTimeout="01:00:00"
          sendTimeout="01:00:00" maxBufferSize="655360000" maxReceivedMessageSize="655360000"
          messageEncoding="Text" />
      </basicHttpBinding>
    </bindings>
    <services>
      <service behaviorConfiguration="ServiceBehavior" name="WebService.WebService">
        <endpoint address="" behaviorConfiguration="BasicEndPoint" binding="basicHttpBinding"
          bindingConfiguration="BasicHTTP" name="BasicHTTP" contract="WebService.IWebService" />
      </service>
    </services>
    <behaviors>
      <endpointBehaviors>
        <behavior name="BasicEndPoint">
          <dataContractSerializer maxItemsInObjectGraph="65536000" />
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="ServiceBehavior">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true"  />
  </system.serviceModel>
 <system.webServer>
   <security>
     <requestFiltering>
       <requestLimits maxAllowedContentLength="204800000" />
     </requestFiltering>
   </security>
    <modules runAllManagedModulesForAllRequests="true" />
  </system.webServer> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:30:00.677

当您在主机上确实有流并且您确实需要在客户端上接收流时，我建议仅将流模式用于视频/音频流或类似任务。对于任何其他任务，我会使用缓冲模式，因为它真的更容易使用，而且许多有用的 wcf 功能都依赖于缓冲。使用启用了 SOAP 消息级安全性的流式传输（例如）可能会消除流式传输模式的速度优势（如果你曾经有过的话）。

在您的情况下，我建议您执行一些解决方法。检查以下步骤：

*   尝试使用压缩。它可以大大提高速度和资源使用率，但不能保证你的数据量总是一样的。谁知道明年您的阵列是否会扩大 100 倍？所以一年后你可能会回到这一点。
*   将返回一个巨型数组的方法替换为仅返回一个元素或其中一小部分元素的方法。然后将一个*GetAllStuff()*方法调用替换为一次 GetItemsCountForDownload( *)*调用和适当数量的*GetElementAtIndex(int index)*（或*GetElementsRange(int startIndex,int endIndex)*）调用。无论如何，此时您必须在消息大小（每次调用）和执行的调用次数之间找到一些平衡点。
*   如果您的数据不能轻易拆分成小的相等部分（例如数组的第一个元素是 10kb，第二个是 15kb，第三个是 338mb），那么尝试将这两种方法结合在一起：将您的数组序列化到磁盘，使用 splittig 将其压缩到一些尺寸可接受的零件，然后一个接一个地转移它们。
*   尝试使算法的参数可调。将它们放在您的配置文件中，这样就可以根据可用资源在每台部署机器上调整拆分过程和压缩级别。
*   拆分数据和逐块下载的另一个好处是易于构建一些错误处理层。如果连接不稳定并且由于某种原因传输失败，您可以尝试仅重新下载一个 chuk 而不是所有数据。

**关于架构的一些技巧**

*   找到合适的跨平台压缩算法。绝对可以找到满足您需求的一款。查看[C# <-> Python 的 BZip2](https://stackoverflow.com/a/10474294/880156)和[C# <-> Java 的 GZip](https://stackoverflow.com/a/5178174/880156)。
*   试着让你的架构对其他程序员来说足够清晰。您可以为压缩数据传输和未压缩数据（*GetElementsRange*、*GetElementsRangeGZip*、*GetElementsRangeBZip2*）制定不同的方法。或者您可以使用压缩类型参数（*GetElementsRange(int startIndex,int endIndex,string compressionType* ) 创建一种方法。无论如何，其他程序员必须能够理解他正在接收什么数据以及如何控制压缩模式。
*   您可以将数据拆分参数从配置文件移动到方法定义中，这样客户端就可以自己定义它了。
*   您可以更进一步并实现两步架构。第一步：远程客户端定义请求的参数（所有参数，包括压缩模式、拆分模式等）。第二步：接收数据。代币呢？方法应如下所示：

    ```
    string GetTokenForDataRequest(string compressionMode, int maxChunkSize); //additional parameters like dates range, account number an other are defined in this method only
    int GetChunkCount(string token);
    byte[] GetDataChunkAtIndex(string token, int index); 
    ```

这里的*compressionMode* 可能是“None”、“BZip2”或“GZip”；如果*maxChunkSize*为 0 则禁用拆分（所有数据将在一个块中发送），否则将数据拆分为大小等于*maxChunkSize*的块（最后一个将小于另一个）。所以大概的情况是这样的：

1.  远程客户端发送带有所需参数的数据请求。
2.  You generate session id (a token), save parameters for this session and prepare data according to parameters. "Prepare data" means loading data according to request, creating temp folder, serializind data, creating chunk files and persisting paths for further usage.
3.  Client recieves a token, that is used for all other methods for retrieving data.
4.  Every time remote client request data chunk throu your methods you will know where it stored on hard disk, how many chunks left and so on - thanks to provided token and persisted info.
5.  You can easily handle simultaneous data transfer session with several clients at one time with no efforts (just make shure you store data chunks in different temp files and folders)
6.  Client is able to redownload any chunk and you will not have to load data from database (or wherever it comes from).
7.  When transfer is complete, you can wipe temp data and free some resources.

Do not look at this as at only possible solution. Just google around a little bit and you will find your very own way to solve your task!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:20:29.500

您可以使用[流式](http://msdn.microsoft.com/en-us/library/ms731913.aspx)消息传输，但它有一些限制。
如果流式传输不适合您，您可以实现数据分页（或尝试现有实现，如[WCF 数据服务](http://msdn.microsoft.com/en-us/library/ee473424.aspx)）。

# node.js - Node.js 中的 CPU 密集型任务是什么？

> ID：11858821
> 
> 赞同：1
> 
> 时间：2012-08-08T06:27:49.087
> 
> 标签：node.js

我是 Node.js 的新手，对于这个看起来像菜鸟的问题我感到很抱歉，但如果你的建议让我感觉更好。

我想我掌握了 Node.js 的大部分基础知识。我知道它是单线程的，因此所有 I/O 作业都是异步的，以免阻塞事件循环。

我也明白，由于这种单线程特性，Node.js 不太适合会阻塞事件循环的 CPU 密集型任务。

我的问题很简单：我正在开发一个 websocket 应用程序，并且对于大多数请求，我必须执行一个带有一些计算的循环。根据我的测试，这个循环可能需要 30 到 80 毫秒才能完成。我应该将其视为 CPU 密集型任务吗？（如果是，我想我应该尝试将其委​​托给子进程或使用 process.nextTick 将计算分成几个部分）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:39:17.453

这实际上取决于您正在寻找什么样的 QOS。我会说对于个人项目来说这很好。例如，如果您将 websockets 用于游戏，这可能是杀手锏。

模块[集群](http://nodejs.org/api/all.html#all_cluster)可以用来解决这个问题。这是更多的工作，但该模块使获取进程集群和它们之间的通信尽可能容易。

# sql-server - MS SQL Server 2008 脚本生成在使用约束时会创建无效脚本

> ID：11858827
> 
> 赞同：1
> 
> 时间：2012-08-08T06:28:06.243
> 
> 标签：sql-server, sql-server-2008, sql-server-2005

在 MS SQL Server 2008 (10.50.2811.0) Developer Edition（64 位）上，在 Windows 2008 Server 2008 R2 Standard 下运行，从 SQL Server Management Studio 中生成的脚本会创建多次删除相同约束的脚本。

一个简单的示例包括两个表，tParent 和 tChild，其中 tChild 的 ParentID 引用 tParent 的 ID。正在生成的脚本（数据库上下文菜单 => 任务 => 生成脚本...）（用于 DROP AND CREATE）如下所示：

```
USE [TestDb]
GO
/****** Object: ForeignKey [FK_tChild_tParent] Script Date: 08/08/2012 08:11:51 ******/
ALTER TABLE [dbo].[tChild] DROP CONSTRAINT [FK_tChild_tParent]
GO
/****** Object: Table [dbo].[tChild] Script Date: 08/08/2012 08:11:51 ******/
ALTER TABLE [dbo].[tChild] DROP CONSTRAINT [FK_tChild_tParent]
GO
DROP TABLE [dbo].[tChild]
GO
/****** Object: Table [dbo].[tParent] Script Date: 08/08/2012 08:11:52 ******/
DROP TABLE [dbo].[tParent]
GO
/****** Object: Table [dbo].[tParent] Script Date: 08/08/2012 08:11:52 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[tParent](
[ID] [int] IDENTITY(1,1) NOT NULL,
[Name] [varchar](50) NOT NULL,
[Value] [int] NOT NULL,
CONSTRAINT [PK_tParent] PRIMARY KEY CLUSTERED 
(
[ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object: Table [dbo].[tChild] Script Date: 08/08/2012 08:11:51 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[tChild](
[ID] [int] IDENTITY(1,1) NOT NULL,
[ParentID] [int] NOT NULL,
[Name] [varchar](50) NOT NULL,
[Value] [int] NOT NULL,
CONSTRAINT [PK_tChild] PRIMARY KEY CLUSTERED 
(
[ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object: ForeignKey [FK_tChild_tParent] Script Date: 08/08/2012 08:11:51 ******/
ALTER TABLE [dbo].[tChild] WITH CHECK ADD CONSTRAINT [FK_tChild_tParent] FOREIGN KEY([ParentID])
REFERENCES [dbo].[tParent] ([ID])
GO
ALTER TABLE [dbo].[tChild] CHECK CONSTRAINT [FK_tChild_tParent]
GO 
```

为什么有两条相同的行都试图删除 FK_tChild_tParent 约束？为什么两行的评论不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:46:04.087

看来这是一个已知的错误，如[Microsoft Connect](http://connect.microsoft.com/SQLServer/feedback/details/713398/generate-scripts-malfunction)上所引用的。

我可以确认 SQL2012 上不存在重复行为。

# sql - 来自 SQL SERVER 的 UNPIVOT 和 SEARCH FOR 的 Teradata 等效项

> ID：11858831
> 
> 赞同：2
> 
> 时间：2012-08-08T06:28:26.373
> 
> 标签：sql, sql-server, database, teradata, unpivot

我正在尝试将以下查询从基于 SQL 服务器的代码转换为 TERADATA 代码。

```
INSERT INTO #Keyword(Keyword,OmnitureHitsID,Hit_Time_GMT)    
            SELECT  Search, @PrvRowIdentity,Hit_Time_GMT     
            FROM    
            (SELECT     
                Evar02_Search     
            , Hit_Time_GMT     
            , Evar11_End_Keyword     
            , Evar14_End_SrchTrmPassed     
            , Post_Evar02     
            , Post_Evar11     
            , Post_Evar14     
            FROM #MaINTable WHERE ID = @i    
            AND Visid_High =@Visid_High ) p    
            UNPIVOT     
            (SEARCH FOR SearchKeyword IN     
                (Evar02_Search     
                , Evar11_End_Keyword     
                , Evar14_End_SrchTrmPassed     
                , Post_Evar02     
                , Post_Evar11     
                , Post_Evar14 )    
            ) AS unpvt; 
```

谁能告诉我如何在 UNPIVOT 之后转换零件。其实我不确定这`SEARCH FOR SearchKeyword IN`部分是做什么的。

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T11:48:14.407

不幸的是，Teradata 没有`UNPIVOT`函数，但您可以使用`UNION ALL`查询复制它：

```
INSERT INTO #Keyword(Keyword,OmnitureHitsID,Hit_Time_GMT)    
SELECT  Search, @PrvRowIdentity, Hit_Time_GMT     
FROM    
(
  SELECT Hit_Time_GMT, Evar02_Search as Search, 'Evar02_Search' as col
  FROM #MaINTable 
  WHERE ID = @i    
    AND Visid_High =@Visid_High 
  UNION ALL
  SELECT Hit_Time_GMT, Evar11_End_Keyword as Search, 'Evar11_End_Keyword' as col       
  FROM #MaINTable 
  WHERE ID = @i    
    AND Visid_High =@Visid_High 
  UNION ALL
  SELECT Hit_Time_GMT, Evar14_End_SrchTrmPassed as Search, 'Evar14_End_SrchTrmPassed' as col       
  FROM #MaINTable 
  WHERE ID = @i    
    AND Visid_High =@Visid_High 
  UNION ALL
  SELECT Hit_Time_GMT, Post_Evar02 as Search, 'Post_Evar02' as col     
  FROM #MaINTable 
  WHERE ID = @i    
    AND Visid_High =@Visid_High 
  UNION ALL
  SELECT Hit_Time_GMT, Post_Evar11 as Search, 'Post_Evar11' as col     
  FROM #MaINTable 
  WHERE ID = @i    
    AND Visid_High =@Visid_High 
  UNION ALL
  SELECT Hit_Time_GMT, Post_Evar14 as Search, 'Post_Evar14' as col     
  FROM #MaINTable 
  WHERE ID = @i    
    AND Visid_High =@Visid_High 
) x 
```

`Search`当前查询的一部分`UNPIVOT`是获取列出的每个列中的列的值`SearchKeyword`。因此，这可以通过使用`UNION ALL`为每一列获取以下内容的 a 来复制：

*   `Hit_Time_GMT`对于每个字段
*   `Search`每列的值（`Evar02_Search`、`Post_Evar02`等）
*   just中的最后一个字段`UNION ALL`指定值来自哪一列

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-20T02:25:45.413

Teradata 14.10+ 允许这样做：

```
select name, subject, marks
FROM td_unpivot
(
    ON Student
    USING 
    VALUE_COLUMNS('Marks')
    UNPIVOT_COLUMN('Subject')
    COLUMN_LIST('Maths', 'Science', 'English')
) u
; 
```

# java - 开始使用番石榴

> ID：11858832
> 
> 赞同：-1
> 
> 时间：2012-08-08T06:28:32.440
> 
> 标签：java, guava

如何将 Guava 用于我的 Web 应用程序？我想用它来代替 JUnit 进行测试。那可能吗？如果我使用 JSP 和 servlet 构建 webapps，我还能从 Guava 获得什么其他用途？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-08T06:33:44.623

请阅读[https://github.com/google/guava/wiki](https://github.com/google/guava/wiki)

**Guava 不是 JUnit 的替代品。**

# iphone - 如何在 iphone 中实现应用程序多语言选择？

> ID：11858833
> 
> 赞同：0
> 
> 时间：2012-08-08T06:28:42.347
> 
> 标签：iphone, programming-languages

每个人

我需要为仅此应用程序而不是整个设备实现多语言选择应用程序。

请给我一个想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T06:52:49.293

1.  每一个，但每一个包含文本的视觉组件，都应该有一个出口。
2.  制作 2 个 plist 文件，其中包含英语和法语等文本。应用程序中的每个文本都将在 plis 文件中具有它的键。这是我的 plis 文件的示例：

![在此处输入图像描述](../Images/35a65f45999fed8bcf22aeef652e246d.png)

![在此处输入图像描述](../Images/ee16e22d693edae25c7344a4047d2635.png)

现在你必须做一个界面让用户选择语言，并将选择的选项保存在 NSUserDefaults 中。最后，在每个 viewDidLoad（或 viewWillAppear）中，检查该默认对象，并根据所选语言将文本设置为所有出口。您必须知道如何从 plist 中读取，这是另一个问题。干杯!

这里有一些代码：

```
 //suppose you have only English and German:
    NSDictionary *selectedLangDick;
    if ([[[NSUserDefaults standardUserDefaults] objectForKey:@"selected_lang"] isEqualToString:@"german"])
        selectedLangDick = [NSDictionary dictionaryWithContentsOfFile:@"lang_de.plist"];
       else
        selectedLangDick = [NSDictionary dictionaryWithContentsOfFile:@"lang_en.plist"];

//now you set the text to all your outlets within the currently loaded controller:
        [cancelButtonOutlet setTitle:[selectedLangDick objectForKey:@"cancel"]];
        [backButtonOutlet setTitle:[selectedLangDick objectForKey:@"back"]];
        [pleaseWaitLabelOutlet setText:[selectedLangDick objectForKey:@"progress_send_password"]];
blablabla
blablabla 
```

当然，您必须（在第一次应用程序启动时）将默认语言设置为英语（或德语，无论如何，设置它很重要，而不是让它为零）。当然，`[[NSUserDefaults standardUserDefaults] objectForKey:@"selected_lang"]`当用户执行此操作时，您必须设置为所选语言。

# c# - C# 如何禁用 Synaptics 触摸板？

> ID：11858838
> 
> 赞同：3
> 
> 时间：2012-08-08T06:28:58.807
> 
> 标签：c#, mouse

我安装了 Synaptics 驱动程序，因此我可以手动禁用/启用触摸板。

这是我用来通过 C# 启用/禁用触摸板的方式：

```
private void Switch_Mouse(int i = 0) // 1: Enable, 0: Disable
{
    Process.Start("control.exe", "main.cpl");
    Thread.Sleep(1000);
    int iHandle = FindWindow(null, "Mouse Properties");
    SetForegroundWindow(iHandle); // Line ABC
    SendKeys.Send("^+{TAB}");
    if (i == 1)
    {
        SendKeys.Send("%E");
    }
    else
    {
        SendKeys.Send("%D");
        SendKeys.Send("{Enter}");
    }
    SendKeys.Send("%A");
    SendKeys.Send("{Enter}");
} 
```

它将击键发送到鼠标属性。但是在标`// ABC`有（上图）的行之后，鼠标属性应用程序失去焦点并且不起作用。

有没有其他方法可以通过 C# 启用/禁用触控板？

（操作系统：窗口 32 位）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T06:40:43.387

这个论坛有一个主题，显然问题已经解决（这都是 VB，但幸运的是移植到 C# 非常简单）->[控制 Synaptics 触摸板](http://www.autohotkey.com/community/viewtopic.php?t=70834)

看起来所有与触摸板相关的处理都从这里开始：

```
SynAPICtrl1.Initialize
  SynAPICtrl1.Activate ' Activate to receive device notifications
  DeviceHandle = SynAPICtrl1.FindDevice(SE_ConnectionAny, SE_DevicecPad, -1)
  If DeviceHandle = -1 Then
    MsgBox "Unable to find a Synaptics cPad"
    End
  End If

  SynDeviceCtrl1.Select (DeviceHandle)
  SynDeviceCtrl1.Activate 'Activate to receive pointing packets

  ZTouchThreshold = SynDeviceCtrl1.GetLongProperty(SP_ZTouchThreshold) 
```

它取自 Synaptics SDK，正如他们所说，可在此处获取[Synaptics SDK](http://www.synaptics.com/sites/default/files/SynCOMAPIv1_0.zip)以及[开发人员手册](http://www.synaptics.com/developers/manuals)

# haskell - 在数据类型构造函数中使用类

> ID：11858841
> 
> 赞同：4
> 
> 时间：2012-08-08T06:29:17.630
> 
> 标签：haskell

目前我有这样的事情：

```
data MyData = SomeData | MoreData | EvenMore
data DataLists = DataLists [MyData] [MyData] 
```

这让我显然可以做这样的事情：

```
myDataList :: DataLists
myDataList = DataLists [SomeData, MoreData] [EvenMore, SomeData] 
```

但我想做这样的事情：

```
-- Static Module File:

class MyClass b where
    evaluate :: b -> Int

data SomeData = SomeData
data MoreData = MoreData
data EvenMore = EvenMore

instance MyClass SomeData where
    evaluate _ = 2
instance MyClass MoreData where
    evaluate _ = 3
instance MyClass EvenMore where
    evaluate _ = 4

data DataList = DataList [MyClass] [MyClass] -- Obviously this is wrong 
```

我希望我的那部分代码保持静态。因为稍后我想使用该模块添加一些类型以放入数据列表中。我需要这个单独的，因为整个模块将用于 2 个不同的项目，我不想继续编辑它。

```
data MyVeryOwnData = MyVeryOwnData
--I should be able to make up as many datastructures as I want

instance MyClass MyVeryOwnData where
   evaluate _ = 99

myList :: DataList
myList = DataList [MyVeryOwnData, SomeData] [SomeData, EvenMore] 
```

我意识到我可以像这样简单地将 MyVeryOwnData 放在模块文件中：

```
data MyData = SomeData | MyVeryOwnData ...

instance MyClass MyData where
    evaluate SomeData = 2
    evaluate MoreData = 3
    ... etc. 
```

但我不想这样做，因为正如我之前所说，我想添加任意数量的数据类型。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T07:35:50.613

您正在寻找的是所谓的*Heterogenous lists*，haskell 主要以两种方式支持它们，[Existentials](http://www.haskell.org/haskellwiki/Heterogenous_collections#Existential_types)或[GADTs](http://en.wikibooks.org/wiki/Haskell/GADT#Existential_types)。我向您展示了一个可运行的代码示例，它解决了存在主义的问题。

```
{-# LANGUAGE ExistentialQuantification #-}

class Eval b where
    evaluate :: b -> Int

data SomeData = SomeData
data MoreData = MoreData
data EvenMore = EvenMore

instance Eval SomeData where
    evaluate _ = 2
instance Eval MoreData where
    evaluate _ = 3
instance Eval EvenMore where
    evaluate _ = 4

data Evalable = forall a . Eval a => Evalable a

instance Eval Evalable where
    evaluate (Evalable a) = evaluate a

pack :: Eval a => a -> Evalable
pack = Evalable

data DataLists = DataLists [Evalable] [Evalable]

getFirst :: DataLists -> [Evalable]
getFirst (DataLists xs ys) = xs

main = do
  let dl = DataLists [pack SomeData, pack EvenMore] [pack MoreData]
  print . map evaluate . getFirst $ dl 
```

应该清楚的是，您可以添加`instance Eval MyVeryOwnData`外部模块，然后您可以将`pack`这些值变成它们`Evalable`，然后您可以将它们放入您的`Datalists`.

# java - 如何在 Java/Android 中使用 OAuth 通过 Gmail 发送电子邮件？

> ID：11858851
> 
> 赞同：0
> 
> 时间：2012-08-08T06:30:10.530
> 
> 标签：java, android, oauth, google-api

我已经使用 OAuth 1.0a（使用 Signpost）在我的应用程序中成功发送了电子邮件，方法是按照[此处](https://developers.google.com/google-apps/gmail/oauth_protocol#smtp_protocol_exchange)所述构建 XOAUTH 字符串。问题是访问令牌在一小时后过期，此后此 XOAUTH 不会对 SMTP 服务器的用户进行身份验证。

有没有办法在没有用户干预的情况下延长/刷新访问令牌的生命周期？我知道[这个 Android 应用程序](https://play.google.com/store/apps/details?id=com.nilvec.smsforwarder)可以做到这一点，但是怎么做呢？

我设法升级到 OAuth 2.0（使用 Scribe），在那里我也获得了一个刷新令牌，但看起来 Gmail XOAUTH 不支持 OAuth 2.0 令牌。Google 是否提供另一种发送电子邮件的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T01:28:24.140

我只是设法修复它。OAuth 1.0 访问令牌实际上是长期存在的，但 XOAUTH 字符串的有效期很短，因此需要经常创建/签名。

# reporting-services - 如何在 SSRS 2008 中每个月后获得计数

> ID：11858857
> 
> 赞同：0
> 
> 时间：2012-08-08T06:30:37.393
> 
> 标签：reporting-services, ssrs-2008

下面是我的查询输出

```
Milsestone   Date        raised  answered
  M1       1/2/2012      2       1
  M1       2/2/2012      4       2
  M2       2/3/2012      5       1
  M2      12/3/2012      4       2
  M3       5/3/2012      10      5 
```

我需要像下面这样设计报告

```
 Milestone  Date    Raised  Answred
   M1        1/2/2012   2     1
   M1        2/2/2012   4     2
              Feb       6     3
   M2         2/3/2012  5     1
   M2        12/3/2012  4     2
              Mar       9     3
   M3         5/3/2012  10    5
              Mar       10    5 
```

如何在 ssrs 2008 中设计报告

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:54:54.750

1.  在报告中创建表格
2.  为其设置适当的数据集
3.  添加新组（按日期列的月份）
4.  在组中添加下面的总行
5.  根据需要填写您的总行。

如果你愿意，我可以在这里添加一些图片。

**编辑**：

![在此处输入图像描述](../Images/7993e87a4ab67472d1060369fc82842c.png) [在这里查看全文](https://i.stack.imgur.com/lDmbG.png)

结果是：
![在此处输入图像描述](../Images/f85f2a6e1e8d075802d6d0abc0f88dc4.png)

# android - 拖放示例无法解析导入 android.*

> ID：11858859
> 
> 赞同：4
> 
> 时间：2012-08-08T06:30:44.560
> 
> 标签：android

我是 java 和 android 的新手。我正在关注并从[这里](http://www.vogella.com/articles/AndroidDragAndDrop/article.html#dialog)制作应用程序以进行拖放。

以下文件给出了无法解决的错误。

```
import android.view.View.DragShadowBuilder;
import android.view.View.OnDragListener;
import android.view.DragEvent;
import android.content.ClipData; 
```

我知道这意味着上述类不存在于主库中。我应该如何添加它们或者是否有其他方式进行拖放（请举例说明）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T06:43:25.537

右键单击您的项目 --> 属性 --> android ----> 设置目标 4.0

参考这个链接，

[http://www.edumobile.org/android/android-beginner-tutorials/drag-and-drop-ui-element/](http://www.edumobile.org/android/android-beginner-tutorials/drag-and-drop-ui-element/)

[http://techdroid.kbeanie.com/2010/04/simple-drag-n-drop-on-android.html](http://techdroid.kbeanie.com/2010/04/simple-drag-n-drop-on-android.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-05T10:36:46.170

尝试右键单击-> Android 工具-> 修复项目属性，它对我有用。

# windows-8 - 如何在 Windows 8 METRO (C# / XAML) 应用程序中创建分页？

> ID：11858861
> 
> 赞同：1
> 
> 时间：2012-08-08T06:30:47.770
> 
> 标签：windows-8, microsoft-metro, windows-runtime, winrt-xaml

我想为我的列表框创建一个分页/分页。

我有一个列表框，我的列表框中将显示大约 200 个项目，

所以我想在我的列表框上执行分页并每页显示 15 个项目，当用户按下下一个按钮时，它将转到下一页，当用户按下上一个按钮时，它将转到上一页。

请让我知道，我该如何实现这个我的应用程序。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T17:42:48.953

这是您要查找的内容：

讨论： [http ://social.msdn.microsoft.com/Forums/en-AU/winappswithcsharp/thread/9d3cadd3-dc95-4219-9f90-e1aae6ad25c8](http://social.msdn.microsoft.com/Forums/en-AU/winappswithcsharp/thread/9d3cadd3-dc95-4219-9f90-e1aae6ad25c8)

DataFetchSize 方法 [http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.listviewbase.datafetchsize.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.listviewbase.datafetchsize.aspx)

LoadMoreItemsAsync 方法：http: [//msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.listviewbase.loadmoreitemsasync.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.listviewbase.loadmoreitemsasync.aspx)

IncrementalLoadingTrigger 和 IncrementalLoadingThreshold 属性 [http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.listviewbase.incrementalloadingtrigger.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.listviewbase.incrementalloadingtrigger.aspx) [http://msdn.microsoft.com/en-us /library/windows/apps/windows.ui.xaml.controls.listviewbase.incrementalloadingthreshold.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.listviewbase.incrementalloadingthreshold.aspx)

您可以在此处查看使用这些示例（但请注意，该示例基于 Windows 8 BUILD 版本并且 api 有一些更改） [http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread /e71b7036-4fb7-4963-a65d-5bcb9fd8f664](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/e71b7036-4fb7-4963-a65d-5bcb9fd8f664)

并查看 Hamid 的 BUILD 会话，在此处讨论这些问题：http: [//channel9.msdn.com/Events/BUILD/BUILD2011/APP-517T](http://channel9.msdn.com/Events/BUILD/BUILD2011/APP-517T)

# php - 数组与重复的php合并

> ID：11858864
> 
> 赞同：-3
> 
> 时间：2012-08-08T06:30:49.867
> 
> 标签：php, arrays, merge

我想合并两个重复的数组 例如， $n1 = array(0=>'foo', 1=>'bar', 2=>'baz'); $n2 = array(0=>'lorem', 1=>'ipsum', 2=>'foo'); 结果应该是，

```
$result = array(0=>'foo', 1=>'bar', 2=>'baz',3=>'lorem', 4=>'ipsum', 5=>'foo'); 
```

我在 PHP 中有任何可用的**预定义函数**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T06:37:00.050

[array_merge](http://php.net/manual/en/function.array-merge.php)怎么样？它完全符合您的需要。

```
$array = array_merge($n1, $n2); 
```

# php - 如何访问 livequery 检测到的元素的值

> ID：11858866
> 
> 赞同：0
> 
> 时间：2012-08-08T06:31:01.290
> 
> 标签：php, jquery

我正在使用 $_SESSION 在页面重定向的情况下传回一个值。

由于 jquery 无法访问 $_SESSION 我决定使用 PHP 将值输出到隐藏的 div 并在获取值后删除该 div。我希望有一种更简洁的方法可以做到这一点，但我不知道如何将 $_SESSION 变量公开给 jquery。

```
<?php       
    $pass_Back = $session->get_Pass_Back();
    $session->clear_Pass_Back();
?>

<?php
    if (count($pass_Back) != 0){
        echo "<input class=\"field_Input_Left\" id=\"schedule_Description\" type=\"text\" name=\"schedule_Description\" value=\"" . array_shift($pass_Back) . "\"/><br />";
        echo "<div id=\"pass_Back\" style=\"visibilty: hidden;\" ></div>";
    } else {    
        echo "<input class=\"field_Input_Left\" id=\"schedule_Description\" type=\"text\" name=\"schedule_Description\"/><br />";
    }
?> 
```

一旦完成，我需要一个方法让 jquery 知道这个新元素是否以及何时添加到 DOM。因此，我使用插件 livequery 来匹配添加元素的时间。它这样做很棒。

但是当我尝试访问 div 中的值时，它表明它是未定义的。

```
$("#pass_Back").livequery(function(){
    if ($("#class_Name").val() != 0){
        var class_Name = $("#class_Name").val();
        get_Schedule_Data(class_Name);
    } else {
        var class_Name = "ALL";
        get_Schedule_Data(class_Name);
    }   

    $value = $(this).attr("value");
    auto_Fill_Schedule($("#pass_Back").attr("value"));

    // destroy pass back

    $("#pass_Back").remove();
}); 
```

在 firebug 中查看时，我注意到在 livequery 找到添加的元素时没有显示 html。DOM 已准备就绪，否则 livequery 无法运行，但这就是找不到值的原因吗？

任何指导都感激不尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:35:13.713

**不要使用这个：**

```
$value = $(this).attr("value"); 
```

* * *

执行以下操作以获取值（在大多数情况下用于输入）：

*（假设`$(this)`是您的输入）*

```
$value = $(this).val(); 
```

对于`div`情况，没有`value`，但您可以从内部获取`html`or`text`作为值：

*（假设`$(this)`是你的 div）*

```
$value = $(this).html();
//or:
$value = $(this).text(); 
```

* * *

**想知道...**

您可以将 PHP 与 jQuery 混合使用，但请查看我在这篇文章中的回答以便更好地理解：

[基于服务器端逻辑的有条件地回显 Javascript 代码是否被认为是有害的？](https://stackoverflow.com/questions/11658596/is-echoing-javascript-code-condtionally-based-on-server-side-logic-considered-ha/11658716#11658716)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T06:43:17.483

只要您不输出整个 $_SESSION 数组或任何重要的东西，您就可以了：

```
<?php       
    $pass_Back = $session->get_Pass_Back();
    $session->clear_Pass_Back();

    if (count($pass_Back) != 0){
        echo '<div id="passBack" type="text" value="'.implode(",", array_shift($pass_Back)).'" />';
    }
 ?> 
```

JS

```
 $(function() {
     if ($("#passBack").length) {
         //element exists in DOM, get the value
         var passBack_data = this.value;
         //do something with the value
     }
 }); 
```

只需输出元素并确保它是一个字符串，而不是一个数组（我使用过`implode()`），然后在页面加载时查看它是否存在（有长度），然后获取值。

# java - jsp，找不到css属性的来源

> ID：11858872
> 
> 赞同：0
> 
> 时间：2012-08-08T06:31:26.630
> 
> 标签：java, css, jsp

这可能是一个棘手的问题，因为我无法提供太多细节，我正在处理一个大项目（`in jsp`）的遗留代码，我遇到了一个`"styleid = product"`. 当我删除它时它会改变很多东西，但我似乎无法在任何 CSS 文件中找到它，有类似的属性`"tdproduct"`，`"thproduct"`但我似乎找不到任何连接。

谁能告诉我我可能需要寻找的其他地方（`.css`文件除外）。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:36:37.373

您可以在 Firefox/Chrome 浏览器中加载页面吗？如果是这样，您可以看到生成的源代码。由于 JSP 是一种生成一些动态内容的服务器端技术，因此 CSS 也可能会动态生成。

理论上它可以是 JSP 本身、CSS 甚至是 Java Script :) 祝你好运！

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T07:14:33.627

加载页面时会动态加载 css。您的样式类也可以在您包含在父 jsp 中的 jsp 中定义。

在 firefox 中打开页面并使用 firebug 查看加载的样式。您可以找到加载样式的位置。

# class - 为 postgres 生成表类

> ID：11858873
> 
> 赞同：0
> 
> 时间：2012-08-08T06:31:30.707
> 
> 标签：class, postgresql, entity

我有一个 postgres 数据库，我想生成一个表的实体类。我需要这个才能连接到数据库而不使用类似的东西：

```
NpgsqlCommand cmd = new NpgsqlCommand("SELECT * FROM TABLE1", conn); 
```

我怎样才能获得课程？你能提供一些详细的步骤吗？我似乎在任何地方都找不到这个。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:24:36.640

实体类通常是手写的，或者是从模式生成然后手动调整的。在 Java 世界中，NetBeans 和 Eclipse 等许多工具都可以提供帮助，但如果您不使用 Microsoft 数据库和 Microsoft 查询工具，C#/.NET 世界中的事情似乎就不太成熟了。

[这个答案](https://stackoverflow.com/a/2892487/398670)提到了一些有用的工具，快速搜索还发现了[NHibernate 实体生成器](http://www.devart.com/entitydeveloper/nhibernate-entity-generator.html)，它似乎也是支持实体框架和 LINQ 的工具的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:36:33.373

取决于一种语言，但是是的 - 您可以使用 SQLAlchemy、Hybernate、iBatis 等对象关系工具在 Java 或 Python 中执行类似的操作。

他们可以为您生成模式，可以根据对象的定义填充数据。

# javascript - WordPress 切换菜单 - 在当前页面上保持菜单打开

> ID：11858877
> 
> 赞同：0
> 
> 时间：2012-08-08T06:31:55.007
> 
> 标签：javascript, jquery, html, css, wordpress

我在 WordPress 中有一个侧边栏切换菜单，它工作正常，但是当单击切换菜单链接之一并且您被带到该链接的关联当前页面时，切换菜单将关闭。我希望它保持开放。

我找到了一个可行的方法示例，但它更适用于静态站点，我想知道如何使其适应我自己现有的 jQuery 代码，因为我的菜单是在 WordPress 中动态创建的。似乎可行的示例代码方法可以在这里找到：[jsfiddle.net/LcsLr/33/](http://jsfiddle.net/LcsLr/33/)

任何帮助都将受到欢迎！

以下是我当前的html代码：

```
<div class="custom-sidebar">
<div class="nav-section-wrap">
<div class="menu-air-operators-menu-container">

<ul id="menu-custom" class="custom">
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a title="Top Level Link One" href="http://localhost/testsite/top-level-link-one/">TOP LEVEL LINK ONE</a></li>

<li class="menu-item menu-item-type-custom menu-item-object-custom current-menu-ancestor current-menu-parent"><a title="Top Level Link Two" href="#">TOP LEVEL LINK TWO</a>
<ul style="display: none;" class="sub-menu">
<li class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item current_page_item"><a title="Subnav Link One" href="http://localhost/testsite/subnav-link-one/">Subnav Link One</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a title="Subnav Link Two" href="http://localhost/testsite/subnav-link-two/">Subnav Link Two</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a title="Subnav Link Three" href="http://localhost/testsite/subnav-link-three/">Subnav Link Three</a></li>
</ul>
</li>

<li class="menu-item menu-item-type-post_type menu-item-object-page"><a title="Top Level Link Three" href="http://localhost/testsite/top-level-link-three/">TOP LEVEL LINK THREE</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a title="Top Level Link Four" href="http://localhost/testsite/top-level-link-four/">TOP LEVEL LINK FOUR</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a title="Top Level Link Five" href="http://localhost/testsite/top-level-link-five/">TOP LEVEL LINK FIVE</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a title="Top Level Link Six" href="http://localhost/testsite/top-level-link-six/">TOP LEVEL LINK SIX</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a title="Top Level Link Seven" href="http://localhost/testsite/top-level-link-seven/">TOP LEVEL LINK SEVEN</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page"><a title="Top Level Link Eight" href="http://localhost/testsite/top-level-link-eight/">TOP LEVEL LINK EIGHT</a></li>
</ul>

</div>
</div>
</div> 
```

和我的 jQuery 代码：

```
(function($) { 

// Sidebar Navigation
$(document).ready(function() {

    // Hide the sub menu items first
    $("div.custom-sidebar div.custom-links-wrap ul > li > ul").hide();

    // On click
    $('div.custom-sidebar div.custom-links-wrap ul > li > a').click(function() {
        if($('ul', $(this).parent()).children().length) {
            $('ul', $(this).parent()).slideToggle("slow");
            return false;
        } else {
            return true;
        }
    });

    $('div.custom-sidebar div.custom-links-wrap ul > li').click(function(e) {
        if ($(e.target).is("li")) {
            $('ul', this).slideToggle("slow");
            return false;
        } else {
            return true;
        }

    });

    });

})(jQuery); 
```

和我的 CSS：

```
div.custom-sidebar div.custom-links-wrap {background: url('images/links-bgr.png') repeat; padding: 14px 14px 14px 0px;}
div.custom-sidebar div.custom-links-wrap ul li {font-weight: bold; background: none; padding-left: 18px; padding-top: 6px; padding-bottom: 6px;}
div.custom-sidebar div.custom-links-wrap ul li.current-menu-item {background: url('images/links-current.png') no-repeat 0px 2px;}

div.custom-sidebar div.custom-links-wrap ul li ul {margin-left: -18px;}
div.custom-sidebar div.custom-links-wrap ul li ul li {font-weight: normal; padding-left: 36px;}
div.custom-sidebar div.custom-links-wrap ul li ul li:last-child {padding-bottom: 0px;}
div.custom-sidebar div.custom-links-wrap ul li ul li.current-menu-item {background: url('images/links-current.png') no-repeat 0px 2px;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:13:01.647

这应该适用于您的示例：

```
$('.sub-menu').hide();
$("li:has(ul)").click(function(){
  $("ul",this).slideDown();
});

$('#menu-custom ul li ul.sub-menu li a').click(function(e){
  if ($(this).attr('class') != 'active'){
    $('#menu-custom ul li a').removeClass('active');
    $(this).addClass('active');
  }
});

$('a').filter(function(){
  return this.href === document.location.href;
}).addClass('active');

$("ul.sub-menu > li > a").each(function () {
  var currentURL = document.location.href;
  var thisURL = $(this).attr("href");
  if (currentURL.indexOf(thisURL) != -1) {
    $(this).parents("ul.sub-menu").css('display', 'block');
  }
});

$('#menu-custom > ul > li > a').each(function(){
  var currURL = document.location.href;
  var myHref= $(this).attr('href');
  if (currURL.match(myHref)) {
    $(this).parent().find("ul.sub-menu").css('display', 'block');
  }
}); 
```

# javascript - 从 javascript 或 jquery 中添加或删除下拉元素

> ID：11858881
> 
> 赞同：-1
> 
> 时间：2012-08-08T06:32:02.790
> 
> 标签：javascript, jquery, asp.net

我有下拉列表，其值使用另一个下拉列表的值填充。这里的问题是，当第一个值发生变化时，我需要绑定第二个值。我需要从 javascript 中完成。我唯一需要做的就是在第一个下拉列表更改时删除并在第二个下拉列表中添加选择选项。我怎样才能做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:11:34.167

试试[这个](http://www.javascriptkit.com/script/script2/triplecombo.shtml)如果你在客户端尝试

用 asp.net 服务器控件替换你的控件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:38:41.803

通过提供的有限信息不太确定您想要什么，但这是我认为您正在寻找的解决方案：

**HTML：**

```
<select id="primary">
    <option value="one">One</option>
    <option value="two">Two</option>    
</select>
<select id="secondary"></select> 
```

**jQuery：**

```
var opts = {
    'one':['a','b','c'],
    'two':['d','e','f']
};

$('#primary').change(function(){
    var select = [];
    $.each(opts[this.value], function(k, v){
        select.push('<option>'+ v +'</option>');            
    });
    $('#secondary').html(select.join(''));          
}); 
```

演示：http: [//jsfiddle.net/28TQZ/](http://jsfiddle.net/28TQZ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T06:44:29.983

一种简单的方法是只有一个主下拉菜单和一堆开始隐藏的辅助下拉菜单。当您从第一个中选择某些内容时，您会取消隐藏相关的第二个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T06:40:11.747

```
$("#dropdownlist1").change(function () {
    var selected = $("#dropdownlist1 option:selected");
    //clear
    $("#dropdownlist2").html("");
    $("#dropdownlist2").append($("<option/>").text(selected.text()).val(selected.val()));
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T06:42:49.907

*   创建您需要的所有下拉菜单，但只在第一个下拉菜单中添加选项。接下来的只有一个“默认”值。
*   在选择第一个下拉列表时，您使用 jQuery 获取第二个下拉列表的值，基于在第一个下拉列表中选择的值： $.post('ajax/aj_populate2nddropdown.php', $("#firstdropdown") .val(), function(result) { $('div.placedaround2nddropdown').html(result);
    });
*   文件 ajax/aj_populate2nddropdown.php 收集第二个下拉列表的值，并返回它们，作为选项插入到下拉列表中。

# mongodb - mongoid 如何为测试和生产环境创建索引

> ID：11858884
> 
> 赞同：5
> 
> 时间：2012-08-08T06:32:35.310
> 
> 标签：mongodb, mongoid

mongoid 如何为测试和生产环境创建索引？我是说

```
 rake db:mongoid:create_indexes => environment 
```

如何设置环境？

我使用 mongoid 2.4.9 和 rails 3.2.7。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T14:38:41.603

与 Rails 的其他 rake 任务一样，只需指定 RAILS_ENV 即可在命令行上进行 rake，例如，

```
rake db:mongoid:create_indexes RAILS_ENV=test 
```

您可以在另一个窗口中跟踪您的日志文件以观察它的发生。

```
tail -f log/*.log 
```

# css - jQuery Mobile 禁止将 `ui-link` 添加到 ` `

> ID：11858887
> 
> 赞同：8
> 
> 时间：2012-08-08T06:32:58.773
> 
> 标签：css, jquery-mobile

 我注意到我的链接已`ui-link`附加到它上面。干扰 CSS，因为 jQuery Mobile 对它的样式不同。我可以覆盖，但我只需要删除类。是否可以阻止 jQuery Mobile 添加类，而不是在添加后删除？ 

一种方法是[http://forum.jquery.com/topic/as-still-styled-as-ui-link-despite-being-in-a-container-w-data-role-none](http://forum.jquery.com/topic/a-s-still-styled-as-ui-link-despite-being-in-a-container-w-data-role-none)但我不想编辑jQuery 移动源

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T06:54:59.307

只需浏览 v1.1.1 的 jQuery Mobile 源代码...我发现链接在`pagecreate`和`create`事件中得到了增强，但以下内容除外：

```
.not(".ui-btn, .ui-link-inherit, :jqmData(role='none'), :jqmData(role='nojs')") 
```

意思是，您应该能够通过添加`.ui-btn`或`.ui-link-inherit`类或向链接添加`data-role="none"`或`data-role="nojs"`属性来避免增强。

它还在链接上调用 .jqmEnhanceable() ，进而调用 $.mobile.enhanceable() 并检查以确保可以通过遍历父元素来增强。您是否尝试过添加`data-role="none"`链接本身或包装元素？

当然，您可以在 jQuery Mobile 初始化后删除这些类，但是，我建议不要这样做，因为它可能会对 jQM 的某些功能产生负面影响。我冒昧地猜测 jQM 使用 .ui-link 不仅仅是样式。

```
$(document).bind('pageinit', function(event){
    $('.ui-link').removeClass('ui-link');
}); 
```

# windows - 我如何递归重命名Windows中匹配字符串并忽略大小写的文件夹

> ID：11858889
> 
> 赞同：1
> 
> 时间：2012-08-08T06:33:04.270
> 
> 标签：windows, powershell, cmd, file-rename

我有具有名称的子文件夹：

*   原创_优化
*   原始优化
*   原始优化
*   原创_优化

我想将所有这些重命名为：

*   **原创_优化**

有没有一种简单的方法可以在 Windows 中执行此操作（可能使用 powershell 或命令提示符中的其他内容）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:50:22.770

您可以在两个 Rename-Item 调用中做到这一点。第一个会为每个名称添加前缀以避免“源路径和目标路径必须不同”。错误。第二次运行将删除前缀。

```
Get-ChildItem -Filter original_optimize -Recurse | 
Rename-Item -NewName __foo__Original_Optimize -PassThru | 
Rename-Item -NewName {$_.Name -replace '^__foo__'} -PassThru 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-03T02:30:54.150

试试这个。

```
Get-ChildItem C:\path-to-directory -Recurse -Filter *foo* | Rename-Item -NewName { $_.name -replace 'foo', 'bar'} -verbose 
```

# tridion - 如何将 aspx 页面值提交到 Tridion RTF

> ID：11858890
> 
> 赞同：0
> 
> 时间：2012-08-08T06:33:08.007
> 
> 标签：tridion, tridion-2011

我正在创建 Tridion GUI 扩展，在此我在功能区工具栏中创建了一个按钮（“InsertCP”）。场景是：

1.用户从组件的富文本框中选择任何文本
2.用户单击功能区工具栏中的“InsertCP”按钮。
3.当用户单击按钮时，我正在打开我的自定义 aspx 页面。
4.从自定义aspx页面，用户可以选择“组件”和“组件模板”。
5.我将选定的组件和组件模板 tcm id 存储在一个变量中。
6.我在自定义aspx页面中有提交按钮。
7.当用户单击提交按钮时，我需要在富文本框源中格式化所选文本，如下所示。

前任：

```
<a href="componentid=tcm-00-000, componenttemplateid="tcm-00-000-00">Selected Text</a> 
```

我已经完成了第 6 步，我正在尝试第 7 步，当我单击提交按钮时无法提交所选 ID。

![当我在我的 aspx 页面中添加 tridion 控件时出现这些错误](../Images/3ec1cb4793d85b403dba751dba5fd75b.png)

我的 ASPX 页面：

```
<html xmlns="http://www.w3.org/1999/xhtml"     xmlns:c="http://www.sdltridion.com/web/ui/controls"> 
<head runat="server">
<title></title>
<cc:tridionmanager runat="server" editor="ExampleEditor"     isstandaloneview="true">     
<dependencies runat="server">                
<dependency runat="server">Tridion.Web.UI.Editors.CME</dependency>         
 <dependency      runat="server">Tridion.Web.UI.Editors.CME.Controls</dependency>     
</dependencies> 
</cc:tridionmanager> 
</head>

<div>
    <asp:TextBox ID="txttags" runat="server" Width="800px"      ></asp:TextBox>       
    <asp:Button ID="btnsubmit" runat="server" Text="Submit"     onclick="btnsubmit_Click"  /> 

         <c:button id="InsertButton" runat="server" class="customButton greybutton" label="Insert" />         
</div> 
```

CS代码：

```
protected void btnsubmit_Click(object sender, EventArgs e)
    {
txttags.Text = "anyvalue.";
} 
```

和java脚本与退出脚本相同。但是我在运行时遇到错误。我需要在cs页面中添加任何命名空间吗？

我的 CS 页面会有很多像下面这样的事件。我不能在这个页面上使用 tridion 控制按钮。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Tridion.ContentManager.CoreService.Client;
using System.Xml.Linq;
using System.Xml;

namespace Somename
{

public partial class Classname
{

    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void ddSelectOption_SelectedIndexChanged(object sender, EventArgs e)
    {

    }

    protected void lbPublication_SelectedIndexChanged(object sender, EventArgs e)
    {

    }

    protected void lbPubFolders_SelectedIndexChanged(object sender, EventArgs e)
    {

    }

    protected void lbComponent_SelectedIndexChanged(object sender, EventArgs e)
    {

    }

    protected void lbComponentTemplate_SelectedIndexChanged(object sender, EventArgs e)
    {

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:53:44.837

查看您的更新，我收集到您想要的是将基于 ASPX 页面中的信息的锚元素创建到组件的富文本字段的选定文本中。

要构建类似的东西，你最好看看可用的类似东西。我能想到的最简单的示例是“格式”功能区工具栏中的“超链接”按钮。这包括两个项目：

1.  ..\Tridion\WebUI\Editors\CME\Views\Popups\Link\Link.aspx
2.  ..\Tridion\WebUI\Editors\CME\Views\Popups\Link\Link.js

魔法全部发生在 JavaScript 文件中（通常在这些 UI 扩展中完成）。在该`initialize()`方法中，选择的部分是这样提取的：

```
var p = this.properties;
var c = p.controls;

// Get selected acronym
p.OldLink = (window.dialogArguments && window.dialogArguments.link) ? window.dialogArguments.link : {}; 
```

回帖到富文本字段的`_onOkButtonClicked(event)`方法如下：

```
this._buildNewLinkHtml();
this.fireEvent("submit", { link: this.properties.NewLink });
window.close(); 
```

您可以仔细查看 Link.js 文件中的其余代码并重新构建它以满足您的需要。

顺便说一句，看看你想在href中发回的信息，如果你根据某种标准对其进行更多格式化，我会说它更容易，例如你可以像JSON一样将你的URI放在那里：

```
<a href="{'component'='tcm:1-23','componenttemplate'='tcm:1-45-32'}">text</a> 
```

甚至可能滥用组件模板 URI 的 title 属性：

```
<a href="tcm:1-23" title="tcm:1-45-32">text</a> 
```

因为我假设您的组件模板代码将使用这些值对这个超链接结构做一些特殊的事情。

## 编辑

您在添加的图像中显示的*无法识别的标签前缀 c*错误，您可以通过添加正确的命名空间引用来解决，正如我在[此处的回答](https://stackoverflow.com/questions/9890099/how-to-access-tridion-controls-in-code-behind)中指出的那样。因此，只需将其添加到您的 HTML 元素中：

```
<html xmlns:c="http://www.sdltridion.com/web/ui/controls" xmlns="http://www.w3.org/1999/xhtml"> 
```

至于*unrecognized cc tag prefix*，你不应该打扰那个，它似乎在运行时解决得很好，因为你在 Tridion 上下文中运行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T10:00:05.503

我将为您更新的问题提供第二个答案，尽管您仍然让我们有点不知所措，因为您只提到您遇到了运行时错误，而不是具体是什么（如果我不知道你得到什么错误）。

您的 ASPX 页面应如下所示：

```
<%@ Page Language="C#" AutoEventWireup="true" Inherits="Example.MyPopup" ClassName="MyPopup" %>
<%@ Import Namespace="Tridion.Web.UI" %>
<%@ Register TagPrefix="ui" Namespace="Tridion.Web.UI.Editors.CME.Controls" Assembly="Tridion.Web.UI.Editors.CME" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html id="MyPopup" class="tridion popup" xmlns:c="http://www.sdltridion.com/web/ui/controls" xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>My Popup Example</title>
        <cc:TridionManager runat="server" Editor="ExampleEditor" IsStandAloneView="false">
            <dependencies runat="server">        
                <dependency runat="server">Tridion.Web.UI.Editors.CME</dependency>
                <dependency runat="server">Tridion.Web.UI.Editors.CME.Controls</dependency>
            </dependencies>
        </cc:TridionManager>
    </head>
    <body>
        <table id="tblHeight" border="0" cellpadding="0" cellspacing="0">
            <tr>
                <td id="InputField" valign="top">
                    <table>
                        <tr>
                            <td id="NameLabelCell" nowrap="nowrap">My Label</td>
                            <td><input id="txttags" name="txttags" value="" tabindex="1" /></td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr id="FooterRow">
                <td class="footer" align="right">
                    <div class="BtnWrapper">
                        <c:Button ID="BtnOk" runat="server" TabIndex="2" Label="<%$ Resources: Tridion.Web.UI.Strings, OK %>" />
                        <c:Button ID="BtnCancel" runat="server" TabIndex="3" Label="<%$ Resources: Tridion.Web.UI.Strings, Cancel %>" />
                    </div>
                </td>
            </tr>
        </table>
    </body>
</html> 
```

*注意：表格标记是直接从 Anchor 弹出窗口复制的，您可以随意使用 div 并以任何您想要的方式设置样式，该示例旨在向您展示如何重用现有的 Tridion 控件* 您的 CS 将变为：

```
using Tridion.Web.UI.Core;
using Tridion.Web.UI.Controls;
using Tridion.Web.UI.Core.Controls;
using Tridion.Web.UI.Editors.CME.Views.Popups;

namespace Example
{
    [ControlResources("Example.MyPopup")]
    public class MyPopup : PopupView
    {
    }
} 
```

它不包含任何内容，也不需要包含任何内容，因为您将在 JavaScript 中执行所有操作，如前所述。

# java - 无法获取计时器标签以显示时间

> ID：11858891
> 
> 赞同：2
> 
> 时间：2012-08-08T06:33:09.303
> 
> 标签：java, swing, timer, runnable

好的，我现在已经尝试了一切。我仍然无法让我的计时器更新！......这是我到目前为止所拥有的......到目前为止我尝试过的事情：一个单独的线程（有效但我真的必须使用java.swing.Timer）计时器作为在下面看到它不起作用 java.util.timer。任何建议都会有帮助 import sudoku.Sudoku_Board;

```
import java.awt.Color;
import java.awt.Font;
import java.awt.Rectangle;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.BorderFactory;
import javax.swing.InputVerifier;
import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextField;
import javax.swing.Timer;

public class Sudoku_GUI extends JFrame {

    class NumberedField extends JTextField {
        public int row = -1, col = -1;
        public void setRowAndCol(int _row, int _col) {
            row = _row;
            col = _col;
        }
    }

    private static final long serialVersionUID = 1L;
    boolean paused = false;
    Timer timer = null;
    int minutes_elapsed = 0, seconds_elapsed = 0;
    NumberedField field[][];
    Sudoku_Board Puzzle_Board, Solution_Board;
    JLabel time_label, time;
    JButton pause;
    public Sudoku_GUI() {

        super("fokleSudoku");
        setSize(420, 480);
        setResizable(false);

        Solution_Board = new Sudoku_Board();
        Puzzle_Board = new Sudoku_Board();

        time_label = new JLabel("Time: ");
        time_label.setBounds(new Rectangle(20, 8, 100, 20));
        add(time_label);
        time_label.setVisible(false);

        time = new JLabel();
        time.setBounds(new Rectangle(60, 8, 100, 20));
        time.setVisible(false);
        time.setForeground(Color.BLUE);
        add(time);

        JButton new_game = new JButton("New Game");
        new_game.setBounds(new Rectangle(20, 400, 100, 30));
        new_game.setBackground(Color.BLACK);
        new_game.setForeground(Color.WHITE);
        add(new_game);

        new_game.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                Solution_Board.generate();
                Puzzle_Board.random_remove(Solution_Board);
                apply_fields(Puzzle_Board);
                time_label.setVisible(true);
                pause.setVisible(true);
                if(paused)
                    unpause();
                start_timer(0, 0);

            }

        });

        pause = new JButton("Pause");
        pause.setBounds(new Rectangle(280, 400, 100, 30));
        pause.setBackground(Color.red);
        pause.setForeground(Color.WHITE);
        pause.setVisible(false);
        pause.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent arg0) {
                if(paused){
                    unpause();
                    start_timer(minutes_elapsed, seconds_elapsed);
                }
                else {
                    pause();
                }

            }
        });
        add(pause);

        setLayout(null);

        int x = 20, y = 35;
        field = new NumberedField[9][9];
        for (int row = 0; row < 9; row++) {
            for (int col = 0; col < 9; col++) {
                field[row][col] = new NumberedField();
                field[row][col].setBounds(x, y, 40, 40);
                field[row][col].setFont(new Font(Font.MONOSPACED, Font.BOLD, 20));
                field[row][col].setRowAndCol(row, col);
                field[row][col].setHorizontalAlignment(JTextField.CENTER);
                field[row][col].setInputVerifier(new InputVerifier() {
                    public boolean verify(JComponent arg0) {
                        NumberedField curr_field = (NumberedField) arg0;
                        if (curr_field.getText().length() != 1)
                            curr_field.setText("");
                        else if (!(curr_field.getText().charAt(0) >= '0' && curr_field
                                .getText().charAt(0) <= '9'))
                            curr_field.setText("");
                        else if (curr_field.getText().charAt(0) >= '0'
                                && curr_field.getText().charAt(0) <= '9') {
                            final int temp[] = Puzzle_Board.validValue(
                                    Integer.parseInt(curr_field.getText()),
                                    curr_field.row, curr_field.col);
                            if (temp[0] != 808 && temp[1] != -1) {
                                new Thread(new Runnable() {
                                    public void run() {
                                        Color original_color = field[temp[0]][temp[1]]
                                                .getBackground();
                                        field[temp[0]][temp[1]]
                                                .setBackground(Color.RED);
                                        try {
                                            Thread.sleep(2000);
                                        } catch (InterruptedException e) {
                                        }
                                        field[temp[0]][temp[1]]
                                                .setBackground(original_color);
                                    }

                                }).start();

                            } else {
                                Puzzle_Board.setValue(
                                        Integer.parseInt(curr_field.getText()),
                                        curr_field.row, curr_field.col);
                            }
                        }
                        return true;

                    }

                });
                add(field[row][col]);
                x += 40;

                if (col % 3 == 0 && (row) % 3 == 0)
                    field[row][col].setBorder(BorderFactory.createMatteBorder(
                            2, 2, 1, 1, Color.BLACK));
                else if ((col + 1) % 3 == 0 && (row + 1) % 3 == 0)
                    field[row][col].setBorder(BorderFactory.createMatteBorder(
                            1, 1, 2, 2, Color.BLACK));
                else if (col % 3 == 0 && (row + 1) % 3 == 0)
                    field[row][col].setBorder(BorderFactory.createMatteBorder(
                            1, 2, 2, 1, Color.BLACK));
                else if ((col + 1) % 3 == 0 && row % 3 == 0)
                    field[row][col].setBorder(BorderFactory.createMatteBorder(
                            2, 1, 1, 2, Color.BLACK));
                else if (row % 3 == 0)
                    field[row][col].setBorder(BorderFactory.createMatteBorder(
                            2, 1, 1, 1, Color.BLACK));
                else if ((row + 1) % 3 == 0)
                    field[row][col].setBorder(BorderFactory.createMatteBorder(
                            1, 1, 2, 1, Color.BLACK));
                else if (col % 3 == 0)
                    field[row][col].setBorder(BorderFactory.createMatteBorder(
                            1, 2, 1, 1, Color.BLACK));
                else if ((col + 1) % 3 == 0)
                    field[row][col].setBorder(BorderFactory.createMatteBorder(
                            1, 1, 1, 2, Color.BLACK));
                else
                    field[row][col].setBorder(BorderFactory.createMatteBorder(
                            1, 1, 1, 1, Color.BLACK));
                if ((col + 1) % 9 == 0) {
                    y += 40;
                    x = 20;
                }

            }
        }

        setVisible(true);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    }

    public void apply_fields(Sudoku_Board sudoku_board) {
        empty_fields();
        for (int row = 0; row < 9; row++) {
            for (int col = 0; col < 9; col++) {
                if (sudoku_board.getValue(row, col) != -255) {
                    field[row][col].setText(String.valueOf(sudoku_board
                            .getValue(row, col)));
                    field[row][col].setEditable(false);
                }
            }
        }
    }

    public void fill_answer() {
        apply_fields(Solution_Board);
    }

    public void empty_fields() {
        for (int row = 0; row < 9; row++) {
            for (int col = 0; col < 9; col++) {
                field[row][col].setText("");
                field[row][col].setBackground(Color.WHITE);
                field[row][col].setEditable(true);
            }
        }
    }

    public void start_timer(int minutes, int seconds){
        if(timer == null){
             timer = new Timer(0, new ActionListener(){
                public void actionPerformed(ActionEvent e) {
                    time.setText(String.format("%02d:%02d", minutes_elapsed,seconds_elapsed));
                    seconds_elapsed++;
                    if(seconds_elapsed == 60){
                        seconds_elapsed = 0;
                        minutes_elapsed++;
                    }
                }
             });
             timer.setDelay(1000);
             timer.setRepeats(true);
        }
             timer.start();
    }

    public void stop_timer(){
        if(timer != null){
            timer.stop();
        }
    }

    public void pause(){
        if(!paused){
            paused = true;
            pause.setText("Resume");
            stop_timer();
            empty_fields();
        }
    }

    public void unpause(){   // DOES NOT START THE TIMER !! -- NEEDED IN SETTING UP A NEW GAME.
        if(paused){
            paused = false;
            pause.setText("Pause");
            apply_fields(Puzzle_Board);
        }
    }

    public static void main(String... args) throws InterruptedException {
        new Sudoku_GUI();
    }
} 
```

这是数独板文件，如果您想要它进行调试...

```
package sudoku;

import java.util.ArrayList;
import java.util.Random;

public class Sudoku_Board {
    private int Board[][];

    public Sudoku_Board() {
        Board = new int[9][9];
        clear();
    }

    public void print() {

    }

    public int[] validValue(int value, int row, int col) { // (-1,-1) invalid
        int index[] = {-1,-1};
        return index;
    }

    public void random_remove(Sudoku_Board obj) {

    }

    public void clear() {

    }
    public void generate() {

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T06:52:57.607

你有一个`time.setVisible(false);`但没有`time.setVisible(true);`。似乎您正在使显示`Time:`为可见的标签，但显示实际时间的标签从未可见。

# c# - 如何从 SQL 中识别空结果

> ID：11858902
> 
> 赞同：-5
> 
> 时间：2012-08-08T06:33:53.650
> 
> 标签：c#, sql-server-2005

当我的选择命令没有任何结果时，它会引发异常。相反，我想毫无例外地继续这个过程。如何通过检查是否有从 select 语句中检索到的数据来控制这一点？

这是我的查询：

```
sqlid = new SqlCommand("SELECT TOP 1 Proj_id FROM Proj_details WHERE Front_end = '" + strfrontend + "'ORDER BY Date_time desc", con);
id = sqlid.ExecuteScalar().ToString(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T06:44:15.240

使用异常来控制程序流程（如其他答案所建议的）是[错误的解决方案](https://stackoverflow.com/a/729404/453277)。如果可以接受不返回任何结果，请`ExecuteScalar()`在调用`ToString()`它之前检查返回的值。

根据[定义](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)，如果没有结果，ExecuteScalar 将返回 null。

```
object val = sqlid.ExecuteScalar();
if( val != null ){
    id = val.ToString();
}else{
    // do something (or nothing) and continue
} 
```

另请参阅：[ExecuteScalar 抛出 NullReferenceException](https://stackoverflow.com/questions/559632/executescalar-throws-nullreferenceexception)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:45:18.840

尝试使用 ExecuteReader 而不是 ExecuteScalar 并以这种方式处理空结果：

```
SqlCommand sqlid = new SqlCommand("SELECT TOP 1 Proj_id FROM Proj_details WHERE Front_end = '" + strfrontend + "'ORDER BY Date_time desc", con);

SqlDataReader dr = sqlid.ExecuteReader();
if (dr.Read())
{
 id  = dr[0].ToString();
}
else
{
    // handle empty result here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-24T07:24:46.530

这足够了吗？

```
 SqlDataReader rd = cmdLoad4.ExecuteReader();
 if (rd.HasRows)
{
// input what you want.
}
else
{
//input the exception
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-08T06:41:30.990

try-catch 块不起作用吗？

```
 try
    {
        //Execute your SQL-statement here        
    }
    catch(SqlException)
    {
        //If you want something specific to happen when the
        //exception is thrown, put that here.
    } 
```

[http://msdn.microsoft.com/en-us/library/0yd65esw(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/0yd65esw(v=vs.80).aspx)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-08T06:43:00.653

用 try/catch 语句封装它：

```
try
{
    sqlid = new SqlCommand("SELECT TOP 1 Proj_id FROM Proj_details 
                           WHERE Front_end = '" + strfrontend 
                           + "'ORDER BY Date_time desc", con
                           ); 
    id = sqlid.ExecuteScalar().ToString();
}
catch(exception)
{
   // do something with the exception
} 
```

# scala - 可变协变类中Scala字段的下限类型？

> ID：11858910
> 
> 赞同：8
> 
> 时间：2012-08-08T06:34:30.177
> 
> 标签：scala, covariance

我想创建一个可变的协变类，所以我需要添加一个绑定到 setter 方法的较低类型。但是我也希望setter方法设置一个字段，所以我猜这个字段需要绑定相同的类型？

```
class Thing[+F](initialValue: F) {

    private[this] var secondValue: Option[G >: F] = None

    def setSecondValue[G >: F](v: G) = {
        this.secondValue = Some(v)
     }
} 
```

该方法编译得很好。但是名为 secondValue 的字段根本无法编译，并显示错误消息：

```
 Multiple markers at this line
        - ']' expected but '>:' found.
        - not found: type G 
```

我需要做什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-08T07:02:34.990

@mhs 的答案是正确的。

您还可以使用通配符语法（如在 java 中），其含义完全相同：

```
scala> :paste
// Entering paste mode (ctrl-D to finish)

class Thing[+F](initialValue: F) {
  private[this] var secondValue: Option[_ >: F] = None

  def setSecondValue[G >: F](v: G) = {
    this.secondValue = Some(v)
  }

  def printSecondValue() = println(secondValue)
}

// Exiting paste mode, now interpreting.

defined class Thing

scala> val t = new Thing(Vector("first"))
t: Thing[scala.collection.immutable.Vector[java.lang.String]] = Thing@1099257

scala> t.printSecondValue()
None

scala> t.setSecondValue(Seq("second"))

scala> t.printSecondValue()
Some(List(second)) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-08T06:42:55.943

您需要`forSome`构造，它`G`作为存在类型引入：

```
class Thing[+F](initialValue: F) {
  private[this] var secondValue: Option[G] forSome { type G >: F} = None

  def setSecondValue[G >: F](v: G) = {
    this.secondValue = Some(v)
  }
} 
```

在您的原始代码中，`secondValue`,`G`已被无中生有，即没有正确引入。如果`setSecondValue`用户（或编译器）`G`在调用站点绑定，但对于一个不是选项的字段（特别是因为你的字段是私有的）。[在此处](https://stackoverflow.com/questions/9444958/what-does-the-key-word-forsome-mean-in-scala)、[此处](http://www.drmaciver.com/2008/03/existential-types-in-scala/)或[此处](http://existentialtype.net/2008/03/09/higher-rank-impredicative-polymorphism-in-scala/)阅读有关`forSome`Scala 中存在类型的更多信息。

# google-maps - 输入城市名称并获取可能城市列表的 API？

> ID：11858913
> 
> 赞同：30
> 
> 时间：2012-08-08T06:34:41.680
> 
> 标签：google-maps, maps

我需要知道我的用户在哪个城市。

我不能使用常规的文本输入，因为有相似的命名城市，用户可以用不同的名字来称呼同一个城市。

我想让用户输入他们的城市并显示类似结果的列表，我可以使用世界城市数据库、jquery 和 sql 来做到这一点，但我真的不想从头开始做。

是否有任何 api（例如：google）对世界上的每个城市都有唯一的 ID，让您搜索它们？你能发布一个类似实现的链接吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-08T08:59:55.943

有 Google Places Autocomplete API， [https://developers.google.com/places/documentation/autocomplete](https://developers.google.com/places/documentation/autocomplete)

以及位于[https://developers.google.com/maps/documentation/javascript/places#places_autocomplete的地图版本 3 库](https://developers.google.com/maps/documentation/javascript/places#places_autocomplete)

但我不知道它对同一个城市的不同名称的处理效果如何——尽管[尝试过它](https://google-developers.appspot.com/maps/documentation/javascript/examples/places-autocomplete)，它确实将**德国慕尼黑**呈现为*munchen——*看看你的用例的表现如何。

# javascript - 额外的 Sprockets 清单文件？

> ID：11858920
> 
> 赞同：2
> 
> 时间：2012-08-08T06:35:15.980
> 
> 标签：javascript, ruby-on-rails-3, asset-pipeline, sprockets

我正在尝试创建另一个清单文件，名称`app/assets/javascripts/base.js`大致如下：

```
//= require jquery
//= require jquery_ujs
//= require_tree ./backbone/tempaltes 
```

我的计划是将其包含在我的`app/assets/javascripts/application.js`文件之前，该文件具有我的主要主干代码，如下所示：

```
//= require ./backbone/app
// etc... 
```

我的想法是，我可以缓存不会有太大变化的东西（我的模板、jquery、插件等）并缓存我的应用程序代码，这可能会非常频繁地更改，从而减少客户端的页面大小。

我需要`app/views/layouts/application.html.haml`像这样的两个文件：

```
= javascript_include_tag "base"
= javascript_include_tag "application" 
```

但是，当我加载我的开发服务器时，只`application.js`加载了来自的文件；`base.js`没有加载任何文件。我已将这一行添加到`config/application.rb`：

```
config.assets.precompile += %w(base.js) 
```

...但这并没有获得`base.js`在开发中加载所需的任何资产。我该怎么做才能加载这些文件？

# c# - 在 C#.net 中跨 SQL Server 处理事务的最佳方法是什么？

> ID：11858922
> 
> 赞同：0
> 
> 时间：2012-08-08T06:35:34.810
> 
> 标签：c#, sql-server, sql-server-2008

我正在做一个项目，我需要将旧数据从生产服务器传输到存档服务器。如果在传输过程中出现任何故障，我在处理跨服务器的数据一致性时会遇到问题。只不过是执行交易而已。

每当数据传输过程中出现系统故障时，该过程应从存档服务器中删除所有传输的记录，并在系统恢复时重新启动整个传输过程。

注意：由于客户场所的某些权限/设置原因，我无法使用分布式事务来实现。

有没有办法在 C#.net 或 SQL Server 2008 中处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:45:34.263

```
 DECLARE  @TranCounter INT; 

    SET @TranCounter = @@TRANCOUNT; 

    IF @TranCounter > 0 
      SAVE TRANSACTION savepointrb1; 
    ELSE 
      BEGIN TRANSACTION; 

   BEGIN TRY

       -- your code will be here. if you are using multiple stored procedures then                
          apply this code on that

       IF @TranCounter = 0 
        COMMIT TRANSACTION;     

    END TRY 

    BEGIN CATCH 
      IF @TranCounter = 0 
        ROLLBACK TRANSACTION; 
      ELSE 
        IF Xact_state() <> -1 
          ROLLBACK TRANSACTION savepointrb1; 

        END CATCH 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:49:28.063

当整个事务的任何部分失败时，以下代码用于“回滚”到编辑数据库之前。您可以尝试对其进行修改以满足您的需求。

（首先参考 System.Transactions-namespace）

```
 System.Transactions

    using(TransactionScope transaction = new TransactionScope())
    {
        try
        {
            //modify your database here

            transaction.Complete();
        }
        catch(Exception)
        {
            transaction.Dispose();
        }
    } 
```

# vim - 使用 vim 缩写时防止尾随空格

> ID：11858927
> 
> 赞同：14
> 
> 时间：2012-08-08T06:36:04.383
> 
> 标签：vim

我是 vim 的新用户（Windows 中的 gvim），并且发现缩写可以很好地节省时间 - 但是如果我有时可以停止尾随空格，它们会更好。

我有一些我经常使用的目录，所以我在我的 _vimrc 中添加了一些缩写/路径对：

```
:ab diR1 C:/dirA/dira/dir1/
:ab diR2 C:/dirA/dirb/dir2/ 
```

ETC ...

现在，当我键入时，`diR1 <space>`我得到`C:/dirA/dira/dir1/[]|`了空格表示的位置`[]`，光标是`|`字符。我想摆脱`[]`== 空格。

这是一个小问题：但是您似乎可以在 Vim 中自定义其他所有内容，所以我想我会问 - 当一个人在 vim 中使用缩写时，是否可以避免尾随空格？

Vim 中使用的替代工具是一个很好的答案 - 我的目标是节省重新键入经常使用的目录结构，但要方便光标，因为我几乎总是在末尾添加一些东西，例如`myFile.txt`.

我在添加到末尾之前退格的尾随空格（毫无疑问是因为`space`触发了缩写）`myFile.txt`比一遍又一遍地输入整个内容更不烦人，但如果我可以避免这样做，那将是理想的.. .

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-08T13:21:13.187

pb2q 答案正是您在当前场景中想要的，但并未完全回答标题中提出的问题。这个确切的问题在 vim 帮助文件中得到解决。见`:helpgrep Eatchar`。它给出的例子是这样的：

```
You can even do more complicated things.  For example, to consume the space
typed after an abbreviation: >
   func Eatchar(pat)
      let c = nr2char(getchar(0))
      return (c =~ a:pat) ? '' : c
   endfunc
   iabbr <silent> if if ()<Left><C-R>=Eatchar('\s')<CR> 
```

你可以把`Eatchar`函数放在你的`~/.vimrc`文件中，然后在你的缩写中像这样使用：

```
iabbr <silent> diR1 C:/dirA/dira/dir1/<c-r>=Eatchar('\m\s\<bar>/')<cr> 
```

这会“吃掉”任何尾随的空白字符或斜杠。请注意，我使用`iabbr`而不是 just `abbr`，因为实际上很少需要缩写在命令行模式下扩展。您必须[小心命令行模式下的缩写，](https://stackoverflow.com/a/7515418/438329)因为它们会在意想不到的地方扩展，例如搜索和 input() 命令。

有关更多信息，请参阅：

```
:h abbreviations
:helpgrep Eatchar
:h :helpgrep 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-08T06:43:10.247

这是可能的，除了`abbrev`.

如您所知，缩写*是*由空格字符触发的。空格*是非关键字*字符，缩写展开后保留。

但是还有其他触发扩展的方式，比如其他非关键字字符，包括`/`. 因此，如果您改为这样定义缩写词：

```
:ab diR1 C:/dirA/dira/dir1 
```

也就是说，*如果没有*尾随路径分隔符，那么您可以键入`diR1/`，由于斜杠 为您扩展缩写`/`，然后继续键入，将文件名附加到您的路径。

或者，您可以使用`Ctrl-]`. 即，键入缩写：`diR1`，后面没有空格或其他非关键字字符，然后键入`Ctrl-]`。缩写将被展开，您将保持插入模式，并且可以将您的文件名附加到展开的路径中。

看看`:help abbreviations`，那里可能还有其他对你有用的东西，包括更复杂的结构，例如*触发*缩写的空格字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-02T05:01:49.923

您可以使用映射而不是缩写。一旦您键入映射的最后一个字符，它们就会展开，因此不会有尾随空格：

```
:inoremap diR1 c:/dirA/dira/dir1 
```

这种方法的缺点是您在映射可以展开时键入的字母在映射完成之前不会显示。这需要一些习惯。

# qt - 使用 Qt 自定义对话框进行 GUI 编程

> ID：11858929
> 
> 赞同：-1
> 
> 时间：2012-08-08T06:36:17.350
> 
> 标签：qt, user-interface

我是 Qt 的新手，并且有一些玩弄它。

我从“使用 Qt 4 进行 C GUI 编程”中挑选了一个示例代码，找不到任何关于代码的不全面之处，但它运行不正确：

** 项目文件.pro

```
QT       += core gui

TARGET = CustomDialog
TEMPLATE = app

SOURCES += main.cpp \
    finddialog.cpp

HEADERS  += \
    finddialog.h 
```

** 对话框标题：

```
#ifndef FINDDIALOG_H
#define FINDDIALOG_H

#include <QDialog>

class QCheckBox;
class QLabel;
class QLineEdit;
class QPushButton;

class FindDialog : public QDialog
{
    Q_OBJECT
public:
    FindDialog(QWidget *parent = 0);

signals:
    void findNext(const QString &str, Qt::CaseSensitivity cs);
    void findPrevious(const QString &str, Qt::CaseSensitivity cs);

private slots:
    void findClicked();
    void enableFindButton(const QString &text);
private:
    QLabel *label;
    QLineEdit *lineEdit;
    QCheckBox *caseCheckBox;
    QCheckBox *backwardCheckBox;
    QPushButton *findButton;
    QPushButton *closeButton;
};

#endif // FINDDIALOG_H 
```

** 对话 cpp：

```
#include <QtGui>
#include "finddialog.h"

 FindDialog::FindDialog(QWidget *parent)
    : QDialog(parent)
 {
     label = new QLabel(tr("Find &what:"));
     lineEdit = new QLineEdit;
     label->setBuddy(lineEdit);
     caseCheckBox = new QCheckBox(tr("Match &case"));
     backwardCheckBox = new QCheckBox(tr("Search &backward"));
     findButton = new QPushButton(tr("&Find"));
     findButton->setDefault(true);

     connect(lineEdit, SIGNAL(textChanged(const QString &)),
             this, SLOT(enableFindButton(const QString &)));
     connect(findButton, SIGNAL(clicked()),
             this, SLOT(findClicked()));
     connect(closeButton, SIGNAL(clicked()),
             this, SLOT(close()));

     QHBoxLayout *topLeftLayout = new QHBoxLayout;
     topLeftLayout->addWidget(label);
     topLeftLayout->addWidget(lineEdit);
     QVBoxLayout *leftLayout = new QVBoxLayout;
     leftLayout->addLayout(topLeftLayout);
     leftLayout->addWidget(caseCheckBox);
     leftLayout->addWidget(backwardCheckBox);
     QVBoxLayout *rightLayout = new QVBoxLayout;
     rightLayout->addWidget(findButton);
     rightLayout->addWidget(closeButton);
     rightLayout->addStretch();
     QHBoxLayout *mainLayout = new QHBoxLayout;
     mainLayout->addLayout(leftLayout);
     mainLayout->addLayout(rightLayout);
     setLayout(mainLayout);
     setWindowTitle(tr("Find"));
     setFixedHeight(sizeHint().height());
 }

 void FindDialog::findClicked()
 {
     QString text = lineEdit->text();
     Qt::CaseSensitivity cs =
             caseCheckBox->isChecked() ? Qt::CaseSensitive
                                       : Qt::CaseInsensitive;
     if (backwardCheckBox->isChecked()) {
         emit findPrevious(text, cs);
     } else {
         emit findNext(text, cs);
     }
 }

 void FindDialog::enableFindButton(const QString &text)
 {
     findButton->setEnabled(!text.isEmpty());
 } 
```

** 主.cpp：

```
#include <QtGui/QApplication>
#include "finddialog.h"

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    FindDialog w;
    w.show();

    return a.exec();
} 
```

这里有什么问题？？

当我单击运行时，没有显示对话框，但出现此错误：

![在此处输入图像描述](../Images/1be3fd5cd70f76c5cce721957e721da1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:36:13.580

你还没有初始化`closeButton`。添加

```
closeButton = new QPushButton(tr("&Close")); 
```

到您的构造函数（在连接其信号之前）。

# android - 在所有 Android 版本中实现选项卡

> ID：11858931
> 
> 赞同：0
> 
> 时间：2012-08-08T06:36:23.293
> 
> 标签：android, android-layout

我正在尝试在 Android 中实现选项卡。

看了一些网上的教程，貌似是用TabActivity实现的。但 TabActivity 已被弃用。

Android 开发人员参考建议对 HONEYCOMB 以上的版本使用 Fragments，但这显然不支持旧版本（今天大约 60% 的手机）。

那么，实现所有版本都支持的选项卡的最佳方法是什么？手动将选项卡构建到布局中会更容易吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:53:01.940

[http://actionbarsherlock.com/](http://actionbarsherlock.com/)

ActionBarSherlock 允许您像拥有 ~4.0 功能一样进行编程，即。片段和操作栏，但在低至 android 1.6 的设备上保持兼容

支持库很好，但并不完整。从 3.0+ 到更低的 UI，您将拥有一个时代，即使片段支持，也不支持操作栏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:52:56.580

```
TabActivity is deprecated. 
```

=> 那又怎样，还是可以实现的，没有问题。

```
The Android developer reference recommends using Fragments for versions above HONEYCOMB, 
but this is apparently not supported on older versions (about 60% of phones today). 
```

=> 是的，它推荐，但您仍然可以实现和支持较低版本。检查[支持库](http://developer.android.com/tools/extras/support-library.html)和[使用支持库](https://developer.android.com/training/basics/fragments/support-lib.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T02:36:46.413

感谢您的回答，但决定手动实现选项卡会更容易。

采用 RadioGroup，对其进行完全定制，使其外观和行为都像一个选项卡。

然后使用 ViewFlipper 切换屏幕，类似于[此处给出的代码](https://stackoverflow.com/questions/6869180/how-to-use-view-flipper-with-three-layouts)。

添加了我想要切换的布局：

> ```
> <ViewFlipper android:layout_width="match_parent"
>     android:layout_height="match_parent"
>     android:id="@+id/main_frame">
>     <include android:id="@+id/tab1" layout="@layout/tab1_layout"/>
>     <include android:id="@+id/tab2" layout="@layout/tab2_layout"/>
>     <include android:id="@+id/tab3" layout="@layout/tab3_layout"/>
> </ViewFlipper> 
> ```

一个好处是它让我可以轻松地制作更好的标签，轻松地控制和自定义页面更改的工作方式。它在所有手机上看起来都一样。

# android - 使用 android ndk 的你好世界

> ID：11858938
> 
> 赞同：0
> 
> 时间：2012-08-08T06:36:53.667
> 
> 标签：android, android-ndk

我正在尝试编写第一个本机 android 应用程序并获得关注错误 ![在此处输入图像描述](../Images/b8f048990b65e6371c7031b83fb232b8.png) 每个更改的文件都有解决方案包资源管理器照片和源代码： ![在此处输入图像描述](../Images/7215f4ee53872ff9e806bf64a41f08e1.png) ![在此处输入图像描述](../Images/eb755c0f8208988e30ad074f1d06875f.png) 包 ua.org.groupab;

导入android.app.Activity；

导入 android.app.AlertDialog；

导入android.os.Bundle；

公共类 ProjActivity 扩展 Activity {

```
static {

    System.loadLibrary("ndkfoo");

  }
private native String invokeNativeFunction();
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    String hello = invokeNativeFunction();
    new AlertDialog.Builder(this).setMessage(hello).show();
} 
```

}

我的代码有什么问题？请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:51:41.743

在函数声明中的 ndkfoo.c 中，如果函数中的包名必须与您的包名匹配则有效

将 ndkfoo.c 中的声明更改为

```
jstring Java_ua_org_groupab_ProjActivity_invokeNativeFunction()
 {
 } 
```

# android - 同时使用 MediaRecorder 和 SensorManager 时按钮无响应

> ID：11858939
> 
> 赞同：0
> 
> 时间：2012-08-08T06:36:55.090
> 
> 标签：android

我注意到在 Android Jelly Bean 中，在传感器数据记录器程序上记录一分钟后，按钮没有响应。因此，我着手建立自己的。

但是，我遇到了和他们一样的问题。一分钟左右后，我的程序变得无响应。

无论如何在果冻豆中正确地做到这一点？

我试图通过服务和线程在后台运行东西，但无济于事。我可能没有正确使用线程。我的意思是你如何在背景上定义 onChangeSensor ？你每次调用它时都会产生线程吗？似乎过度，并且可能比必要地减慢速度。

有没有办法将媒体记录器和传感器记录器作为单独的线程生成，以保持 UI 的响应性和功能性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T00:35:44.197

第一个解决方案是禁用连续对焦。我通过运行相同的代码发现了这一点，而没有持续关注没有持续关注功能的 Nexus S。我必须将参数设置行注释掉，否则它将返回运行时异常。

更好的解决方案是将 API 设置为 16 并在 Jelly Bean 手机上运行。它在我的 Galaxy Nexus 上对我有用。我猜只是将最低 API 设置设置为更高的值会改变它在 JB 中的运行方式吗？

# java - 使用 POI 读取一系列 Excel 工作表数据

> ID：11858941
> 
> 赞同：2
> 
> 时间：2012-08-08T06:36:59.707
> 
> 标签：java, excel, multidimensional-array, apache-poi

我正在做一些 POC，以单次读取从 Excel 文件到 Java 数组的范围内的数据。

我必须在 Java 中使用 POI 读取一个 excel 文件，其中行数将接近 1,00,000，列数将接近 240。我从互联网上获得的大多数示例都讲述了使用 rowIterator 和cellIterator 用于完成这项工作。但由于行数和列数很大，遍历每个单元格并将数据添加到数组中并不是一个可行的解决方案。

POI API中是否有任何方法可以一次获取一系列单元格并将其传输到java中的数组？

我仍在使用 POI API，但直到现在还没有成功找到解决方案。如果有人知道这种方法，你能用一个小的工作例子来说明它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T06:51:08.513

`CellWalk`可能有帮助。见[http://poi.apache.org/apidocs/org/apache/poi/ss/util/cellwalk/CellWalk.html](http://poi.apache.org/apidocs/org/apache/poi/ss/util/cellwalk/CellWalk.html)

你可以在这里找到一个示例使用：http: [//svn.apache.org/repos/asf/poi/trunk/src/testcases/org/apache/poi/ss/util/cellwalk/TestCellWalk.java](http://svn.apache.org/repos/asf/poi/trunk/src/testcases/org/apache/poi/ss/util/cellwalk/TestCellWalk.java)

# ios - 在 facebook sdk 上分享未找到 FacebookSDK 不见了

> ID：11858944
> 
> 赞同：1
> 
> 时间：2012-08-08T06:37:31.883
> 
> 标签：ios, xcode, facebook

好吧，伙计们，我觉得有点愚蠢，但我花了几个小时试图弄清楚如何做，我就是做不到:(

我去了这里（facebook 开发者网站） [https://developers.facebook.com/docs/getting-started/getting-started-with-the-ios-sdk/#samples](https://developers.facebook.com/docs/getting-started/getting-started-with-the-ios-sdk/#samples)

也可以在这里下载[https://github.com/facebook/facebook-ios-sdk](https://github.com/facebook/facebook-ios-sdk)

问题是，在每一个“教程”中，他们都说，安装 FacebookSDK，你已经下载了 .zip 大约一百万次，而且，首先，你没有安装 zip，所以它不是字面上的“安装” ，无论如何，我浏览了文件夹和文件，找到了我需要的文件之一，FBConnect.bundle 和 FacebookSDKResources.bundle 但是，没有像 FacebookSDK.framework 这样的东西，我确定我已经下载了正确的文件和一切，所以我唯一能说的，我不确定，是文件不完整，我试图运行示例，但他们没有运行，他们说他们找不到 FacebookSDK。框架

请不要给我“按照说明操作”的链接，我已经按照所有说明进行操作，否则我不会在这里，我需要知道的是我是否已经拥有 FacebookSDK.framewok？即使我在 github 的最新版本的文件中都看不到它（聚光灯说我看不到），如果我已经有了它，我怎样才能正确地将它添加到我的项目中（记住我没有任何 FacebookSDK.framework ，所以不像拖放或那些东西那么容易）

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T18:48:49.293

万一有人再次发现这个烦人的问题。

[https://developers.facebook.com/ios/downloads/](https://developers.facebook.com/ios/downloads/)

从谷歌“FacebookSDK-3.0.pkg”中找到它（为什么 facebook 让下载这个变得复杂？）

# php - Paypal 支付专业版错误

> ID：11858948
> 
> 赞同：2
> 
> 时间：2012-08-08T06:37:46.583
> 
> 标签：php, magento, paypal

我正在使用 magento 购物车版本 1.7.0.0

Paypal 快速结帐在我的商店中运行良好

但贝宝专业版给出以下错误

PayPal 网关已拒绝请求。由于商家配置无效（#10501：配置无效），无法处理此交易。

在我的贝宝商业账户中

```
Services            Status
PayPal Payments Pro Live
Virtual Terminal    Live
Fraud Management    Live
PayPal Express Checkout Live 
```

我有这个问题的谷歌，它告诉

由于计费协议被禁用或处于非活动状态，会发生此错误。

如何检查 paypal payment pro 是否启用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:42:36.443

只需关注此线程：[Paypal Website Payments Pro (US) + Sandbox + Magento 1.4.0.1](http://www.magentocommerce.com/boards/viewthread/177550/#t225636)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T16:38:43.050

这是因为您尚未注册 PayPal Website Payments Pro。
如果您在美国、英国或加拿大，您可以致电 PayPal 并要求注册“Website Payments Pro”。

注意：PayPal 已重新命名了他们的一些产品，他们可能会为您提供“PayPal Payments Pro”。为了解决您看到的错误，您*必须*拥有 Website Payments Pro。

# android - 如何使下载的图像显示在设备的图库中？

> ID：11858949
> 
> 赞同：2
> 
> 时间：2012-08-08T06:37:51.210
> 
> 标签：android, ios, blackberry, cordova

我有一个 phonegap 照片画廊应用程序，可以选择将图像下载到设备。

目前，我可以将图像保存到设备的 SDCard 中，但它们不会出现在设备的照片库/图库应用程序中。

这是我正在使用的代码：

```
var remoteFile = encodeURI($("#imageView_content").find("img").attr("src"));
var localFileName = remoteFile.substring(remoteFile.lastIndexOf('/') + 1);

var downloadSuccess = function() {
    alert("Download sucessful!\nFile Saved at: " + localFileName);
};
var handleDownloadedFile = function(entry) {
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, downloadSuccess, fail);
};
var startFileTransfer = function(fileEntry) {
    var localPath = fileEntry.fullPath;
    var ft = new FileTransfer();
    ft.download(remoteFile, localPath, handleDownloadedFile, fail);
};
var createLocalFile = function(dir) {
    dir.getFile(localFileName, {
        create : true,
        exclusive : false
    }, startFileTransfer, fail);
};
var createPhotosDir = function(fileSys) {
    fileSys.root.getDirectory("myAppName", {
        create : true,
        exclusive : false
    }, createLocalFile, fail);
};

window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, createPhotosDir, fail); 
```

我正在使用[https://build.phonegap.com](https://build.phonegap.com)来构建应用程序

**更新：**

我正在尝试根据设备使用路径，但这似乎不起作用：

*   在 iOS（模拟器）上，调用失败 - 路径：`file:///private/var/root/Media/DCIM/100APPLE/myApp/`
*   在 Android 上，下载成功，但在设备重新启动之前，图像仍然不会显示在图库中 - 路径：`dcim/myApp/`
*   我无法在 BlackBerry 上进行测试，但我已将其设置为先尝试`file:///SDCard/BlackBerry/pictures/myApp/`，然后再`file:///store/home/user/pictures/myApp/`失败

这是设备检测代码：

```
var platform = (device.platform || navigator.userAgent).toLowerCase();
if (platform.match(/iphone/i) || platform.match(/ipad/i) || platform.match(/ios/i)) {
    window.resolveLocalFileSystemURI("file:///private/var/root/Media/DCIM/100APPLE/", createPhotosDir_fromDir, callPhotosDir);
} else if (platform.match(/blackberry/i) || navigator.userAgent.toLowerCase().match(/blackberry/i)) {
    window.resolveLocalFileSystemURI("file:///SDCard/BlackBerry/pictures/", createPhotosDir_BB, callPhotosDir);
} else if (platform.match(/android/i)) {
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, createPhotosDir_Droid, callPhotosDir);
} else {
    callPhotosDir();
} 
```

以下是目录选择功能：

```
var callPhotosDir = function() {
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, createPhotosDir, fail);
};
var createPhotosDir_fromDir = function(dir) {
    dir.getDirectory("myApp", {
        create : true,
        exclusive : false
    }, createLocalFile, callPhotosDir);
};
var createPhotosDir_Droid = function(fileSys) {
    fileSys.root.getDirectory("dcim/myApp", {
        create : true,
        exclusive : false
    }, createLocalFile, callPhotosDir);
};
var createPhotosDir_BB = function(dir) {
    dir.getDirectory("myApp", {
        create : true,
        exclusive : false
    }, createLocalFile, function() {
        window.resolveLocalFileSystemURI("file:///store/home/user/pictures/", createPhotosDir_fromDir, callPhotosDir);
    });
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T06:45:29.407

将它们保存到 SDCard 上的正确位置。BlackBerry 设备将 SDCard 安装在 /SDCard，因此完整路径为`/SDCard/BlackBerry/pictures/`

您还可以在图片目录中创建一个子目录，当从照片库应用程序查看时，它将组织照片。

设备也有内置存储，尽管容量比大多数 SDCard 小得多。要将图片保存在那里，请使用路径`/store/home/user/pictures/`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-26T10:22:20.400

当您关闭或停止您的应用程序时，您应该调用此方法。这对我来说适用于 4.4 以及较低的 android sdk 版本。

导入 android.media.MediaScannerConnection；

```
public void addImageIntoGallery() {
    String version = Build.VERSION.RELEASE;
    if(! version.contains("4.4")){
        Intent mediaScanIntent = new Intent(Intent.ACTION_MEDIA_MOUNTED);
        String mCurrentPhotoPath = "file://" + Environment.getExternalStorageDirectory()+"/myDirectory"; 
        File file = new File(mCurrentPhotoPath);
        Uri contentUri = Uri.fromFile(file);
        mediaScanIntent.setData(contentUri);
        sendBroadcast(mediaScanIntent);
    }else{
        MediaScannerConnection.scanFile(this, new String[] { Environment.getExternalStorageDirectory().toString() }, null, new MediaScannerConnection.OnScanCompletedListener() {

            public void onScanCompleted(String path, Uri uri) 
              {
                  Log.i("ExternalStorage", "Scanned " + path + ":");
                  Log.i("ExternalStorage", "-> uri=" + uri);
                  Log.i(TAG, "Scanned ................" + path);
              }
            });
    }

}

@Override
protected void onPause() {
    addImageIntoGallery();
    super.onPause();
} 
```

# java - 如何在android中逐字搜索

> ID：11858952
> 
> 赞同：2
> 
> 时间：2012-08-08T06:38:11.170
> 
> 标签：java, android, string, search

如何在字符串中搜索单词？

例如

```
String text = "Samsung Galaxy S Two"; 
```

如果我使用`text.contains("???");`

它会得到任何相关的字母，即使它不是“银河”中的“axy”等正确的词。

有什么建议或解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:44:36.677

对于最简单的用法，您可以使用 StringTokenizer 查看此链接。 [http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html)

要使用正则表达式，请查看 android 中的模式。 [http://developer.android.com/reference/java/util/regex/Pattern.html](http://developer.android.com/reference/java/util/regex/Pattern.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T06:58:18.743

```
List<String> tokens = new ArrayList<String>();

String text = "Samsung Galaxy S Two";
StringTokenizer st = new StringTokenizer(text);

    //("---- Split by space ------");
    while (st.hasMoreElements()) {
        tokens.add(st.nextElement().toString());
    }

    String search = "axy";
    for(int i=0;i<tokens.size();i++)
    {
        if(tokens.get(i).contains(search))
        {
            System.out.println("Word is "+tokens.get(i));
            break;//=====> Remove Break if you want to continue searching all the words which contains `axy`
        }
    }

output====>Galaxy 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T17:11:22.427

使用`indexOf`：

```
int i= string.indexOf('1'); 
```

或`substring`：

```
String s=string.substring("koko",0,1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T16:59:00.863

试试这个..

```
String string = "madam, i am Adam"; 
```

// 人物

```
// First occurrence of a c
int index = string.indexOf('a');    // 1

// Last occurrence
index = string.lastIndexOf('a');    // 14

// Not found
index = string.lastIndexOf('z');    // -1 
```

// 子字符串

```
// First occurrence
index = string.indexOf("dam");      // 2

// Last occurrence
index = string.lastIndexOf("dam");  // 13

// Not found
index = string.lastIndexOf("z");    // -1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-18T11:14:25.987

我知道这是一个老问题，但我写在这里是为了帮助下一个需要帮助的人。

您可以使用**火柴**。

```
String str = "Hello, this is a trial text";
str1 = str.toLowerCase();
if(str1.matches(".*trial.*")) //this will search for the word "trial" in str1
{
    //Your Code
} 
```

# python - 有效地反转和反转python3.x OrderedDict

> ID：11858960
> 
> 赞同：2
> 
> 时间：2012-08-08T06:38:52.170
> 
> 标签：python, dictionary, python-3.x, reverse, performance

在多次尝试创建将反转键值对并反转 OrderedDict 的单行代码之后，我有这个：

```
 from collections import OrderedDict as OD

    attributes=OD((('brand','asus'), ('os','linux'), ('processor','i5'), ('memory','4G')))
    print(attributes)

    reversed_attributes=OD(reversed(list(attributes.items())))
    print(reversed_attributes)

    inverted_attributes=OD([reversed(item) for item in attributes.items()])
    print(inverted_attributes)

    ''' Prints 
        OrderedDict([('brand', 'asus'), ('os', 'linux'), ('processor', 'i5'), ('memory', '4G')])
        OrderedDict([('memory', '4G'), ('processor', 'i5'), ('os', 'linux'), ('brand', 'asus')])
        OrderedDict([('asus', 'brand'), ('linux', 'os'), ('i5', 'processor'), ('4G', 'memory')])
    ''' 
```

这行得通，但是效率低吗？通过使用 reversed(list(a.items())) 这会产生很多开销，所以不是 pythonic 吗？倒置属性也是如此。

关键是要避免 for 循环等，但是随着我们扩大规模，这会降低性能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T07:44:34.967

有趣的是我还想出了其他方法。

```
>>> from collections import OrderedDict as OD
>>> attributes = OD((('brand','asus'), ('os','linux'), ('processor','i5'), ('memory','4G'))) 
```

如果你想扭转你可以这样做

```
>>> reverse = OD(attributes.items()[::-1]) 
```

或更 Pythonic 的方法：

```
>>> reverse = OD(reversed(attributes.items())) 
```

请注意，您不需要创建`list`项目，它已经是一个列表，而`reversed`生成器`OrderedDict`将简单地迭代它来生成新的字典。

两者都产生相似的时间。

```
$ python -m timeit "from collections import OrderedDict as OD; attributes = OD((('brand','asus'), ('os','linux'), ('processor','i5'), ('memory','4G')))" "reverse = OD(attributes.items()[::-1])"
10000 loops, best of 3: 54.8 usec per loop
$ python -m timeit "from collections import OrderedDict as OD; attributes = OD((('brand','asus'), ('os','linux'), ('processor','i5'), ('memory','4G')))" "reverse = OD(reversed(attributes.items()))"
10000 loops, best of 3: 54.4 usec per loop
$ python -m timeit "from collections import OrderedDict as OD; attributes = OD((('brand','asus'), ('os','linux'), ('processor','i5'), ('memory','4G')))" "reversed_attributes=OD(reversed(list(attributes.items())))"
10000 loops, best of 3: 54.4 usec per loop 
```

如果你想反转：

```
>>> invert = OD(zip(*zip(*attributes.items())[::-1])) 
```

或更多pythonic：

```
>>> invert = OD(map(reversed, attributes.items())) 
```

再次产生相似的时间。

```
$ python -m timeit "from collections import OrderedDict as OD; attributes = OD((('brand','asus'), ('os','linux'), ('processor','i5'), ('memory','4G')));" "invert = OD(zip(*zip(*attributes.items())[::-1]))"
10000 loops, best of 3: 57 usec per loop
$ python -m timeit "from collections import OrderedDict as OD; attributes = OD((('brand','asus'), ('os','linux'), ('processor','i5'), ('memory','4G')));" "invert = OD(map(reversed, attributes.items()))"
10000 loops, best of 3: 56.8 usec per loop
$ python -m timeit "from collections import OrderedDict as OD; attributes = OD((('brand','asus'), ('os','linux'), ('processor','i5'), ('memory','4G')));" "inverted_attributes=OD([reversed(item) for item in attributes.items()])"
10000 loops, best of 3: 55.8 usec per loop 
```

您可以结合使用这两种方法来反转和反转。

> 这行得通，但是效率低吗？通过使用 reversed(list(a.items())) 这会产生很多开销，所以不是 pythonic 吗？倒置属性也是如此。

另一方面，某些东西可能会产生大量开销并且是pythonic，某些东西可能非常非常有效，但不是很pythonic，这个词有点被滥用了，但这只是我的看法

从维基百科发挥：

> Python 社区中一个常见的新词是 pythonic，它可以具有与程序风格相关的广泛含义。说代码是 Pythonic 就是说它很好地使用了 Python 习语，它是自然的或表现出对语言的流利程度。同样，说它是 Pythonic 的接口或语言特性是说它与 Python 习语很好地配合，它的使用与语言的其余部分很好地结合。
> 
> 相比之下，非 Python 代码的一个标志是它试图用 Python 编写 C++（或 Lisp、Perl 或 Java）代码——也就是说，提供粗略的转录，而不是从另一种语言的形式的惯用翻译。pythonicity 的概念与 Python 的可读性极简主义哲学紧密相连，并避免了“有不止一种方法可以做到”的方法。不可读的代码或难以理解的习语是不合 Python 的。

至于：

> 但是随着我们扩大规模，这会降低性能吗？

这很难说，不知道你为什么要进行这样的转换，或者它们是否是你系统的一个组成部分，从根本上说，它们会增加线性时间/空间开销，这可能是好的，也可能不是好的，如果数字条目的数量仍然很小，那么没问题，但是如果在每个请求中，假设这发生在 Web 服务器上，您正在对大型 dicts 执行此操作，这可能非常苛刻，可能需要重新设计以避免这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-19T13:55:17.127

在 Python 3.x 中，最好的方法是避免不必要的中间`list`s。您在所有解决方案中都很接近，但您总是`list()`不必要地使用列表理解或构造函数。在 Python 3.x 中反转和反转的最 Pythonic 的方法是：

```
 reversed_and_inverted = OD((v, k) for k, v in reversed(attributes.items())) 
```

虽然这稍微不那么 Pythonic，但更快（渐近）：

```
 reversed_and_inverted = OD(map(reversed, reversed(attributes.items()))) 
```

这使用生成器表达式`OrderedDict`从旧的初始化新的，没有中间副本（创建反向`tuple`的`v`和`k`无关紧要；CPython`tuple`像这样优化固定长度 s 的使用以避免`malloc`/`free`开销）。

同样，对于只做一个或另一个：

```
# Remove list() wrapper to save copy
reversed_attributes=OD(reversed(attributes.items()))

# Remove list comprehension brackets to generate into the OrderedDict directly
# Explicitly unpack and reverse key and value (repeated calls to reversed
# built-in invoke expensive LEGB and function call machinery)
inverted_attributes=OD((v, k) for k, v in attributes.items())

# Or faster, but slightly less Pythonic in some people's opinions
inverted_attributes=OD(map(reversed, attributes.items())) 
```

从 3.5 开始的一些时间，内置的`OrderedDict`运行速度足够快，以至于方法之间的百分比差异实际上有些重要。我正在使用`ipython`'s 的`%timeit`魔法来简化：

```
# Make a dict large enough that the differences might actually matter

>>> od1 = OrderedDict(enumerate(string.ascii_uppercase))
>>> %timeit -r5 OrderedDict(reversed(od1.items()))
100000 loops, best of 5: 7.29 μs per loop

# Unnecessary list-ification of items view adds ~15% to run time
>>> %timeit -r5 OrderedDict(reversed(list(od1.items())))
100000 loops, best of 5: 8.35 μs per loop

>>> %timeit -r5 OrderedDict((v, k) for k, v in od1.items())
100000 loops, best of 5: 10 μs per loop

# Surprisingly, runs a little faster as a list comprehension; likely a
# coincidence of construction of OrderedDict from an input of known length
# being optimized to presize the output dict (while lists are optimized for
# reading from unknown length input iterable)
>>> %timeit -r5 OrderedDict([(v, k) for k, v in od1.items()])
100000 loops, best of 5: 9.34 μs per loop

# map produces a generator that knows how long it is if the input also knows
# how long it is, so we can beat either one in this case by avoiding repeated
# lookups of reversed and execution of Python level byte code via:
>>> %timeit -r5 OrderedDict(map(reversed, od1.items()))
100000 loops, best of 5: 8.86 μs per loop 
```

# javascript - Opera 扩展脚本和它们之间的通信

> ID：11858963
> 
> 赞同：-1
> 
> 时间：2012-08-08T06:39:00.330
> 
> 标签：javascript, firefox-addon-sdk, opera-extension

我使用 Add-on Builder 工具对 firefox 进行了扩展。扩展结构就像，

1.  主插件代码将运行 2 个内容脚本（1 个处于运行状态，1 个处于文档就绪状态）

2.  内容脚本的结果被发送到主插件代码（使用“内容脚本和插件代码之间的通信”）

3.  主插件代码将此信息发送到另外 1 个内容脚本。

4.  内容脚本将添加结果并在用户单击小部件时显示

例子：

**main.js（插件代码）：**

```
var data = require("self").data;

var paraPanel = require("panel").Panel({

  contentScriptFile: data.url("combine.js")

});

require("page-mod").PageMod({

  contentScriptWhen: 'start',

  contentScriptFile: data.url("content-script1.js"),

  onAttach: function (worker) {

      worker.port.on("para1", function(message) {

      msgfromscript1 = message;

    });

  }

})

require("page-mod").PageMod({

  contentScriptWhen: 'ready',

  contentScriptFile: data.url("content-script2.js"),

  onAttach: function (worker) {

      worker.port.on("para2", function(message) {

     msgfromscript2 = message;

    });

  }

})

require("widget").Widget({

  contentURL: data.url("crack_attack.png"),

  onClick: function() {

    paraPanel.port.emit("add-para", msgfromscript1,msgfromscript2); 

    paraPanel.show();

  }

}); 
```

**combine.js 代码：**

```
self.port.on("add-para", function(msgfromscript1,msgfromscript2) {

  var result=msgfromscript1+msgfromscript2;

  document.body.innerHTML = result;

}); 
```

我想实现与 Opera 扩展相同的功能。如何基于 Opera 浏览器中的单击功能进行这种通信和显示？

是否有任何文档或示例 Opera 扩展可以帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T06:54:34.223

Opera 扩展文档：[http](http://dev.opera.com/addons/extensions/) ://dev.opera.com/addons/extensions/ 这里有两个 github 上的扩展：[https](https://github.com/truthee/opera) ://github.com/truthee/opera和[https://github.com/mywot/opera](https://github.com/mywot/opera) 希望它有帮助。

# php - mysql内部连接错误

> ID：11858964
> 
> 赞同：0
> 
> 时间：2012-08-08T06:39:02.577
> 
> 标签：php, mysql

我有两张桌子`tbl_expense`和`tbl_miscellaneous_category`. 在`tbl_expense`我有一些领域。主要`id`和`category`.In `tbl_miscellaneous_category id and name`。这个名字不过是`category`在`tbl_expense table`. 我需要这样的o/p：id name

```
SELECT te.id,te.category  
FROM tbl_expense te 
         inner join tbl_miscellaneous_category  tmc 
                on te.category=tmc.id 
WHERE te.id= '1' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T06:41:22.470

它不太清楚您在寻找什么，但我相信以下方法会起作用：

```
SELECT 
    te.id, tmc.name 
FROM 
    tbl_expense te inner join tbl_miscellaneous_category tmc 
        on te.category=tmc.id WHERE te.id= '1' 
```

此解决方案将提供由 中的`name`列提供的类别名称`tbl_miscellaneous_category`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:43:26.553

而不是`te`, 使用`tmc`其中包含的名称`category`

```
SELECT   te.id, 
         tmc.name 
FROM     tbl_expense te 
              INNER JOIN tbl_miscellaneous_category tmc 
                 ON te.category = tmc.id 
WHERE    te.id = '1' 
```

# facebook-php-sdk - FQL：查询事件表返回场地.name 而不是场地.id

> ID：11858973
> 
> 赞同：2
> 
> 时间：2012-08-08T06:39:56.007
> 
> 标签：facebook-php-sdk, facebook-fql, fql.multiquery

在进行查询以获取事件详细信息时，我似乎在结果集中获得了场地名称而不是场地 ID。表结构是否发生了未经宣布的更改，或者我做错了什么。Graph API Explorer 提供了venue.id，但在我自己的网站中通过PHP SDK 使用FQL 时，它是我得到的venue.name。

继承人的代码：

```
$fql='{
"event_info": "SELECT name,description, pic_small,pic_big, eid,venue,location FROM event WHERE eid ='.$_GET['id'].'", 
"event_venue":"SELECT name, username, page_id, location FROM page WHERE name IN (SELECT venue.id FROM #event_info)"
}';

    $setup  =   array(
    'method'    => 'fql.multiquery',
    'queries'     => $fql,
    'callback'  => ''
    );

    $result   =   $facebook->api($setup); 
```

这导致“event_venue”结果集为空。

这是转储：

```
Array
(    
    [0] => Array
         (
            [name] => event_info
        [fql_result_set] => Array
            (
                [0] => Array
                    (
                        [eid] => 410351692336116
                        [venue] => Array
                            (
                                [name] => Boothill 
                            )

                        [location] => Boothill
                    )

            )

    )

[1] => Array
    (
        [name] => event_venue
        [fql_result_set] => Array
            (
            )

    )

) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:13:15.387

如果我测试这个查询

```
SELECT name,description, pic_small,pic_big, eid,venue,location
  FROM event WHERE eid ='410351692336116' 
```

使用 Graph API 资源管理器中的 FQL 选项卡（！），我得到

```
"venue": {
  "id": 126049334121592
} 
```

而不是场地的名称。

并做一个像你这样的多重查询，第二个查询是

```
"event_venue":"SELECT name, username, page_id, location FROM page
  WHERE page_id IN (SELECT venue.id FROM #event_info)" 
```

我也在获取场地信息。

如果您不使用 $setup 数组进行查询，能否请您检查是否得到不同的结果

```
'method'    => 'fql.multiquery', 
```

只是

```
$facebook->api('/fql?q='.urlencode('{ "event_info": "…", "event_venue": "… FROM page
  WHERE page_id IN (SELECT venue.id FROM #event_info)" }')); 
```

反而？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T04:42:44.250

我今天遇到了这个问题，并花了很多时间对其进行故障排除。它似乎与访问令牌有关。当我使用我的应用程序的访问令牌请求场地数据时，对于某些场地，我得到的只是场地名称字段。但是，如果我使用 Graph API Explorer 生成不同的令牌，我会按预期获得场地.id 字段。

我什至用我的应用令牌替换了 Graph API Explorer 生成的访问令牌，果然我收到的只是场地名称。

# networking - 配置机器以有效使用无线和有线网络

> ID：11858974
> 
> 赞同：0
> 
> 时间：2012-08-08T06:39:58.207
> 
> 标签：networking, wireless

我的机器有有线和无线互联网连接。它使用windows7。如何配置这台机器（使用第三方软件）以有效地使用这两个网络。

> 我只希望两个网络根据它们的带宽共享流量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:53:03.133

您还没有说明您的操作系统，但无论如何您都需要有一些解复用组件，它将向应用程序公开单个接口。它应该拦截所有流量并根据负载和/或其他考虑将其路由到实际接口之一。在 Windows 中，这通常由位于实际功能驱动程序之上的过滤器驱动程序完成。在其他操作系统中，我认为这个概念是相同的。我认为有一个 3rd-party 软件可用于这些东西，但不能肯定地说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:22:40.107

您可以在 Visual Basic 中编写一个程序来执行此操作（Visual Basic 2010 Express Edition 是免费的！）。我不确定你是否了解 Visual Basic，如果不了解，我可以给你一些更具体的帮助。

使用计时器定期 ping 一个你知道会熬夜的网站。有了这个，您可以判断网络流量是否正在运行。如果 Bool 为 True，那么没关系，如果不是，那么您的网络中有问题。

```
 Dim Bool As Boolean
    Try
        Bool = My.Computer.Network.Ping("[URL]")
    Catch
        Bool = False
    End Try 
```

然后让您的程序编写一个临时批处理文件，该文件将使用 netsh 切换到另一个网络。

```
 IO.File.WriteAllText("[filename].bat", "netsh interface ip set address [device] dhcp") 
```

netsh 在这里更详细地讨论：[http ://www.petri.co.il/configure_tcp_ip_from_cmd.htm](http://www.petri.co.il/configure_tcp_ip_from_cmd.htm)

其中 [device] 是您要连接的设备的名称（您可以通过转到命令提示符并键入 ipconfig /all 来查看）。这必须用引号引起来，可以在 Visual Basic 中使用三引号。意思是 Visual Basic 解释这个...

```
"This is """ quotation """ marks in a string" 
```

作为...

```
This is "quotation" marks in a string 
```

最后，让您的程序运行批处理文件，然后在完成后将其删除。

```
 Dim Bat As New Process
    With Bat.StartInfo
        .FileName = "[filename].bat"
        .UseShellExecute = False
        .Verb = "runas"
        .CreateNoWindow = True
    End With
    Bat.Start()
    While Bat.HasExited = False
        Application.DoEvents()
    End While
    IO.File.Delete("[filename].bat") 
```

# wordpress - 简单的 Wordpress If/Else

> ID：11858976
> 
> 赞同：1
> 
> 时间：2012-08-08T06:40:04.363
> 
> 标签：wordpress, thumbnails, if-statement, featured

我有两种不同的方法来显示 Wordpress 缩略图

我想做的是，显示第一种方法，如果它不可用，则使用第二种方法显示拇指。

以下是显示帖子缩略图的两种方法。

**方法一**

```
<!--Begin WordPress Featured post thumbnail-->
<div class="postthumbcon">
<?php
// check if the post has a featured image assigned to it.
if ( has_post_thumbnail() ) {
// get the src of the large size featured image
$src = wp_get_attachment_image_src( get_post_thumbnail_id($post->ID), 'large' );
$thumbnailSrc = $src[0];
// output image resized with timthumb
?>
<div class="postthumb">
">
<img src="<?php bloginfo('template_directory'); ?>/scripts/timthumb.php?src=<?php echo $thumbnailSrc; ?>&h=125&w=165" alt="">

</div>
<?php } ?>
</div>
<!--end WordPress Featured post thumbnail--> 
```

**这是第二种方法。**

```
<!--Begin Timthumb thumbnail-->
<?php // This will show the image and link the image to the post. Alter the width and height (in both places) to your needs. ?>

<?php if ( get_post_meta($post->ID, 'thumb', true) ) { ?>
<div class="postthumb">
" rel="bookmark" title="Permanent Link to <?php the_title(); ?>"><img src="<?php bloginfo('template_directory'); ?>/scripts/timthumb.php?src=<?php echo get_post_meta($post->ID, "thumb", $single = true); ?>&h=150&w=150&zc=1" alt="<?php the_title(); ?>" width="150" height="150" />
</div>
<?php } ?>

<!--End Timthumb thumbnail--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:50:40.187

尝试这样的事情：

```
<div class="postthumbcon">
<?php
if ( has_post_thumbnail() ) {
    // method one
} else if ( get_post_meta($post->ID, 'thumb', true) ) {
    // Method two
} 
?>
</div> 
```

这将查看帖子是否有您已经在做的缩略图，但如果它不存在，它将运行该`else`子句，这意味着第二个 if 语句只有在第一个失败时才会运行。

此外，您似乎拥有我猜想的第一部分是方法二中的链接，请参见以下行：

```
" rel="bookmark" title="Permanent Link to <?php the_title(); ?>"><img src="<?php bloginfo('template_directory'); ?>/scripts/timthumb.php?src=<?php echo get_post_meta($post->ID, "thumb", $single = true); ?>&h=150&w=150&zc=1" alt="<?php the_title(); ?>" width="150" height="150" /> 
```

以下是您的代码的完整外观：

```
<div class="postthumbcon">
    <?php
    if ( has_post_thumbnail() ) {
        $src = wp_get_attachment_image_src( get_post_thumbnail_id($post->ID), 'large' );
        $thumbnailSrc = $src[0];
    ?>
        <div class="postthumb">
            <img src="<?php bloginfo('template_directory'); ?>/scripts/timthumb.php?src=<?php echo $thumbnailSrc; ?>&h=125&w=165" alt="" />
        </div>
    <?php } else if ( get_post_meta($post->ID, 'thumb', true) ) { ?>
        <div class="postthumb">
            <a href="<?php the_permalink(); ?>" rel="bookmark" title="Permanent Link to <?php the_title(); ?>">
                <img src="<?php bloginfo('template_directory'); ?>/scripts/timthumb.php?src=<?php echo get_post_meta($post->ID, "thumb", $single = true); ?>&h=150&w=150&zc=1" alt="<?php the_title(); ?>" width="150" height="150" />
            </a>
        </div>
    <?php } ?>
</div> 
```

# asp.net-mvc-3 - Rhino Mocks Func 断言测试

> ID：11858981
> 
> 赞同：0
> 
> 时间：2012-08-08T06:40:23.677
> 
> 标签：asp.net-mvc-3, unit-testing, tdd, rhino-mocks

我需要测试在方法列表中调用了特定的 Func，例如：

```
public class ProductController : BaseController
    {
        private readonly Func<IProductRepository> prodRepo;
        public ProductController(Func<IProductRepository> _prodRepo)
       {
            prodRepo = _prodRepo;
       } 
        public ActionResult List(string applicationID)
        {
            var products = prodRepo().GetForApp(applicationID).ToList();
            return PartialView("_List",products);
        }
} 
```

在这种情况下，我需要验证是否调用了**prodRepo().GetForApp(applicationID)**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:23:26.783

我建议您以*Arrange-Act-Assert*风格编写测试。[你可以在Ayende 的博客上](http://ayende.com/blog/3318/rhino-mocks-arrange-act-assert-syntax)阅读更多内容

## 安排阶段

首先定义`MockRepository`和期望：

```
var mockRepository = new MockRepository();

var repository = mockRepository.StrictMock<IProductRepository>();

using(mockRepository.Record())
{
    repository.Expect(x => x.GetForApp(Arg<string>.Is.Anything)).Return(new string[0]).Repeat.Once();
}

      var productController = new ProductController((Func<IProductRepository>)(() => repository)); 
```

## 行动阶段

执行操作：

```
productController.List("testApplicationID"); 
```

## 断言阶段

验证结果：

```
repository.VerifyAllExpectations(); 
```

## 缺少接口`IProductRepository`

```
public interface IProductRepository
{
    IEnumerable<string> GetForApp(string applicationID);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:34:28.923

你真的需要验证 Func 被调用了吗？或者您是否需要验证 ProductController 是否正确检索产品？

如果是后者，只需设置 IProductRepository 的模拟以返回一些产品，通过 lambda 将其传递，并断言您获得的产品是正确的。通常，如果某些东西正在提供信息（act/arrange/assert 中的“arrange”阶段，或者 given/when/then 中的“given”），那么您需要一个[*stub*而不是 mock](http://ayende.com/wiki/Rhino+Mocks+-+Stubs.ashx)。

您真正需要使用模拟并验证是否已调用某些内容的唯一时间是当被测类委派职责时 - 例如，将产品保存在存储库中。

另外，请查看[Moq](http://code.google.com/p/moq/) ...在 Moq IMO 中设置存根要容易一些。

# java - 如何截断小数点前的数字？

> ID：11858983
> 
> 赞同：0
> 
> 时间：2012-08-08T06:40:25.383
> 
> 标签：java, number-formatting

下面的代码截断小数点后的数字

```
 NumberFormat blah= new DecimalFormat("#.##"); 
```

但我想从数字之前的数字中截断额外的零

例如

```
0000000000000.00  -> 0.00
00000100000.00 -> 100000.00
000000175000.00 -> 175000.00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:45:55.860

```
BigDecimal myNumber = new BigDecimal("00000000175000.000000");
BigDecimal truncatedNumber = myNumber.setScale(3, BigDecimal.ROUND_HALF_UP); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T06:48:18.530

除非您想以这种方式打印出来，否则您不需要数字格式。只需获取字符串并使用`Double.parseDouble()`，然后打印格式：

```
// "#.00" always shows 2 digits after decimal, "#.##" is optional if zeros are after decimal
NumberFormat blah = new DecimalFormat("#.00");

String s = "00000100000.00";
System.out.println(blah.format(Double.parseDouble(s))); 
```

# ms-access - 如何在 Access 2000 的子表单（数据表）中将标签作为链接放在列的末尾？

> ID：11858987
> 
> 赞同：1
> 
> 时间：2012-08-08T06:40:48.663
> 
> 标签：ms-access, vb6, ms-access-2007, vba

我有一个在 access 2000 中创建的数据库。一个带有子表单（数据表 - defaultview）的表单。我在子表单的列末尾添加了一个标签，并提供了超链接以打开数据库本身中存在的对象。但是当表格打开时，在列之后什么都看不到？我得到了四列，并通过子表单的 onload 事件隐藏了两列。代码如下

```
Me.SubGroupname.ColumnHidden = True
Me.GroupName.ColumnHidden = True
Me.BNFno.ColumnHidden = False
Me.BNFno.ColumnWidth = -2
Me.SubGroupName1.ColumnWidth = -2 
```

如何使其可见，以便在每一行显示为链接？

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:47:14.503

如果我理解正确，您不能使用数据表视图在行尾显示控件。切换到连续表单视图，它会给您更多控制权，但您必须更加努力才能获得漂亮的布局。

或者，将点击事件添加到现有列之一。

# jenkins - Jenkins：如何使远程提交的作业使用默认参数值？

> ID：11858991
> 
> 赞同：13
> 
> 时间：2012-08-08T06:41:01.950
> 
> 标签：jenkins

我正在使用[远程访问 API](https://wiki.jenkins-ci.org/display/JENKINS/Remote+access+API)远程触发参数化 Jenkins 作业，如下所示：

```
url=http://<ci-host>/job/<jobname>/build
json="{\"parameter\": [{\"name\": \"A_NAME\", \"value\": \"a_value\"}]}"
curl -X POST $url -d token=zorn --data-urlencode json="$json" 
```

我希望 Jenkins 为我的一个参数使用配置的默认值，但它似乎期望所有参数的值。

如果我遗漏了一个参数，作业会将其视为一个空字符串。

有没有办法让它使用为参数配置的默认值？

编辑：解决方案（根据 Daniel S.）`buildWithParameters`如下使用：

```
url=http://<ci-host>/job/<jobname>/buildWithParameters
curl -s -X POST $url 
```

另一个编辑：但现在的问题是它`buildWithParameters`不适用于没有参数的工作。所以它不能用于通用脚本来开始我的所有工作。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-21T11:42:12.413

尝试使用`buildWithParameters`代替`build`，即

```
http://<ci-host>/job/<jobname>/buildWithParameters 
```

# java - 在下面的文本字段控件上显示列表框

> ID：11858995
> 
> 赞同：-1
> 
> 时间：2012-08-08T06:41:38.910
> 
> 标签：java, swing, awt, jpanel, mixing

实际上，我正在创建一个面板`A`并包括文本字段和列表框，然后创建另一个面板`B`并将`A`面板插入到`B`. 现在我必须输入一些文本字段，但下面的列表框在该`B`面板中不可见。

如何在下面的文本字段控件上显示列表框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T06:52:21.907

我的猜测是您正在混合重质和轻质成分。阅读：http: [//java.sun.com/products/jfc/tsc/articles/mixing/](http://java.sun.com/products/jfc/tsc/articles/mixing/)

# php - 通过 AJAX 传输图像

> ID：11858997
> 
> 赞同：0
> 
> 时间：2012-08-08T06:41:56.473
> 
> 标签：php, ajax, json

我正在使用 AJAX 创建设置向导。这是一个多步骤的表单提交，总共 6 个步骤。步骤 1-5 工作正常，它们只是表单字段并且只提交文本。最后一步，第 6 步，将允许用户上传 7 张图片。此步骤不起作用。`I get a 500 Internal Server Error`

我是否通过 JSON 正确传递图像数据？还有什么我做错或忘记的事情吗？

相关代码如下：

HTML（仅适用于第 6 步）

```
<form action="/ajax/wizard.php/<?php echo $userName ?>?step=3" 
class="defaultRequest" enctype="multipart/form-data" method="post">

<input type="hidden" name="token" value="<?php echo $token; ?>"/>

<fieldset>
    <p><label>Profile Picture</label>
    <input type="file" name="pPic" value="" /></p>

    <p><label><a href="#help-username" class="show_helper"><span>(?)</span>
    Pic 1</a></label> <input type="file" name="Album1" value="" />
    </p>

    <p><label><a href="#help-password" class="show_helper"><span>(?)</span>
    Pic 2</a></label><input type="file" name="Album2" value="" />
    </p>

    <p><label>Pic 3</label>
    <input type="file" name="Album3" value="" /></p>

    <p><label>Pic 4</label>
    <input type="file" name="Album4" value="" /></p>

    <p><label>Pic 5</label>
    <input type="file" name="Album5" value="" /></p>

    <p><label>Pic 6</label>
    <input type="file" name="Album6" value="" /></p>

</fieldset>

<fieldset>
     <p><label>&nbsp;</label>
     <button type="submit"><span>Upload Images</span></button></p>
</fieldset> 
```

JS

```
$.ajax({
type: 'POST',
url: requestUrl,
data: $(this).serialize(),
dataType: 'json',
success: function(data) {

            if(data.response){
                $('div.errormsg').remove();
                $(eventHeadline).html(data.eventHeadline);
                console.log(data.eventHeadline);
                //$(eventDate).html(data.eventName);

                if(data.step){
                    openStep(data.step);
                }else{
                        openStep('next');
                }
            }else{
                $('div.errormsg').remove();
                $('<div class="errormsg">'+data.message+"</div>").insertBefore(form);
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:50:23.880

文件字段不能方便地序列化为 JSON，为了上传它们，您需要创建一个可以使用 jQuery 上传的[FormData](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData/Using_FormData_Objects)对象，只要您阻止 jQuery 使用[`processData: false`](http://api.jquery.com/jQuery.ajax/). 不过，这只适用于一些最新的浏览器：http: [//caniuse.com/#search=formdata](http://caniuse.com/#search=formdata)

为了支持使用 jQuery 为旧版浏览器/IE 上传文件，最好的办法是找到一个插件，使用标准 POST 上传文件并将其绑定回 jQuery 回调 - 这应该为您提供一些：[https：/ /www.google.co.uk/search?q=jquery+file+upload+plugin](https://www.google.co.uk/search?q=jquery+file+upload+plugin)

# printing - 将打印数据保存到数据库中

> ID：11858998
> 
> 赞同：0
> 
> 时间：2012-08-08T06:42:05.243
> 
> 标签：printing

在 Windows 中，我希望通过机器中的打印机打印的所有页面都保存到 MYSQL 数据库中。我有设备集成软件，它从设备中读取数据并显示它。我获取数据的唯一方法是打印。每次打印时，我都需要将这些打印数据直接放入我的 MYSQL 数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:40:31.503

您的问题描述得不是很好，但总的来说，我认为最好的选择是安装[虚拟打印机驱动程序](http://en.wikipedia.org/wiki/Virtual_printer)（Windows 有几十个可用的驱动程序，有些是免费的，有些是出售的）。

如果您需要将其保存为图像（因为读数也有图形部分），您最好找到可以生成 PDF 或 TIFF 的东西并相应地设计您的表格。否则，您需要一个模拟“纯文本”打印机的驱动程序。

您还需要一种方法来定期扫描存储打印输出的目录（应该使用简单的轮询机制），以便识别新创建的文件并将这些文件导入数据库。

这看起来主要是一个工作流自动化问题，所以也许你也可以查看 Superuser.com，并可能在那里问同样的问题（但请更具描述性）。

以下是Windows XP 中可用[的标准纯文本虚拟打印机的说明。](http://www.frogmorecs.com/arts/using-the-generic-driver)

这是一个名为[PrintMulti](http://www.lvbprint.de/html/printmulti1.html)的产品，它似乎非常适合。