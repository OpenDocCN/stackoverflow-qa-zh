# StackOverflow 问答 11494000-11494999

# ruby-on-rails - twitter-bootstrap-rails gem 未显示正确的图像图标

> ID：11494005
> 
> 赞同：0
> 
> 时间：2012-07-15T17:19:33.057
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, twitter-bootstrap

在构建了我的 Rails 应用程序并在开发和生产环境中对其进行了全部测试之后，一切都运行良好。

但是在部署应用程序后，整个图标就停止了工作。我在我的移动设备上尝试过，我开始看到我指定的不同类型的图标。大约 24 小时后，整个图标在我的移动设备上停止工作。

为了清楚和更好地理解，您可以查看托管在 www.dep.rzaartz.com/profiles/1 的网站，您会看到我在说什么。我做错了什么或者我能做些什么来解决这个问题？

我正在使用最新的 twitter-bootstrap-rails gem 和 rails 3.2.6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T00:40:38.227

你必须改变`bootstrap_and_overrides.css.less`：

```
* `@fontAwesomeEotPath:  'fontawesome-webfont.eot';`
* `@fontAwesomeWoffPath: 'fontawesome-webfont.woff';`
* `@fontAwesomeTtfPath:  'fontawesome-webfont.ttf';`
* `@fontAwesomeSvgzPath: 'fontawesome-webfont.svgz';`
* `@fontAwesomeSvgPath:  'fontawesome-webfont.svg';` 
```

在此之后，您必须执行：

```
`bundle exec rake assets:precompile --trace` 
```

# html - 居中包含浮动图像的 DIV

> ID：11494006
> 
> 赞同：2
> 
> 时间：2012-07-15T17:19:36.997
> 
> 标签：html, center

我无法将其集中在我的页面上，我已经进行了一些研究，似乎使用“inline-block”可能是要走的路，但我不确定如何实现它。

这是我的代码：

**CSS**

```
.bar img{
    float:left;
    margin: 15px;
    -webkit-transition: margin 0.5s ease-out;
    -moz-transition: margin 0.5s ease-out;
    -o-transition: margin 0.5s ease-out;
}
.bar img:hover {
    margin-top: 2px;
} 
```

**HTML**

```
<div align = "center">
    <img src = "images/wk5title.png">
</div>

<!--THIS IS WHAT IM TRYING TO CENTER-->
<div class = "bar" style="margin : auto; text-align: center">
    <a href = "fb.html"><img src="images/fb.png"></a>
    <a href = "tw.html"><img src="images/tw.png"></a>
    <a href = "li.html"><img src="images/li.png"></a>
    <a href = "da.html"><img src="images/da.png"></a>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T17:28:05.767

定义一个宽度，然后使用`margin:auto`你拥有的。这会自动将元素居中在页面的中心。您还应该真正更改`<body background = "images/wk5bg.png" bgcolor = "#eeeeee">`为使用 CSS。

```
body {
    background-image:url(image/wk5bg.png);
    background-color:#eeeeee;
}
div .bar {
    width:(your width here);
    margin:auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-14T22:58:49.987

我在**.bar**中为**table**和**table-cell**添加了另一个**div**。表格居中，单元格围绕内容缩小。 此外，我用填充替换了图像边距，即使在动画之后也可以悬停，并添加了填充底部来补偿提升。

 ******[http://jsfiddle.net/ZW9YB/](http://jsfiddle.net/ZW9YB/)

```
<div align="center">
    <img src="images/wk5title.png" />
</div>

<!--THIS IS WHAT IM TRYING TO CENTER-->
<div class="bar"><div>
    <a href="fb.html"><img src="images/fb.png" /></a>
    <a href="tw.html"><img src="images/tw.png" /></a>
    <a href="li.html"><img src="images/li.png" /></a>
    <a href="da.html"><img src="images/da.png" /></a>
</div></div>

.bar img {
    float:left;
    display: block;
    padding: 15px;
    -webkit-transition: padding 0.5s ease-out;
    -moz-transition: padding 0.5s ease-out;
    -o-transition: padding 0.5s ease-out;
}

.bar {
    display: table;
    margin: 0 auto;
}

.bar > div {
    display: table-cell;
    background: #faa;
    overflow: hidden;
}

.bar:after {
    clear: both;
}

.bar img:hover {
    padding-top: 2px;
    padding-bottom: 28px;
} 
```******

# php - PHP: Empty/Null 和 if 逻辑查询

> ID：11494008
> 
> 赞同：2
> 
> 时间：2012-07-15T17:19:49.503
> 
> 标签：php

我有一个输入框，用 php 会回显输入的名称。问题是当用户按下空格时，它会回显空白字符。我已经搜索并没有找到绝对答案。我知道`!empty`如果在输入字段中有absoutely anthing但如果有空格则应该使用null。

如果输入中有空格，如何避免得到回声？

```
if (!empty($name['name']) || null ) {
    echo 'Your name is '.$name;

}
{

//do nothing 

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T17:33:28.993

如果未设置、null、空字符串、布尔值 false 或 0，则对函数的调用`empty()`将为 true。我仍然喜欢在条件语句中避免繁重的逻辑......在测试之前拉出修剪和准备字符串。

```
$nameString = empty($name['name'])?null:trim($name['name']);
if(!empty($nameString){
    //go to town here
} 
```

为了提前安抚狂热分子，我还必须补充一点，您应该在打印之前转义任何用户输入。这样你就可以防止 XSS。为了更安全添加试试这个：

```
$nameString = empty($name['name'])?null:trim($name['name']);
$nameString = htmlentities($nameString, ENT_QUOTES);
if(!empty($nameString){
    //go to town here
} 
```

但是，附带说明...该`htmlentities()`调用不能防止 SQL 注入，因此如果此数据进入数据库，您将不得不做更多的工作——因为您的问题并未表明您正在做任何其他事情打印到屏幕上，我们可以将 SQL 注入讨论推迟一天。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T17:23:27.577

您想检查是否有空格，您可能需要这样做：

```
if ($name['name'] != null && trim($name['name']) != "" && !strpos(trim($name['name']), " "))
{
    // work with $name['name']
}
else
{
    // nothing
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T17:36:44.733

小心使用empty()，如果用户输入'0'，它将返回TRUE。

您可能想使用 strlen()

# c++ - 合并应用程序资源 - mac

> ID：11494019
> 
> 赞同：0
> 
> 时间：2012-07-15T17:20:48.203
> 
> 标签：c++, macos, merge

我有一个 mac 应用程序，想隐藏它的资源。在 Windows 上，我只是制作了一个资源文件，但在 Mac 上似乎不存在这些文件。所以我决定遵循[这个](https://stackoverflow.com/questions/5069065/hiding-or-encrypting-app-resources)链接的建议。

在另一个预先准备资源的应用程序中，我要做的是获取我所有的资源（文本文件、图像、声音文件等）并将它们各自转换为`CFData`对象。然后我将它们存储在一个`CFDictionary`以文件名为键的对象中。之后，我要将字典保存到文件中。

问题是，CFDictionary 对象不知道如何归档自己，而且我不能使用 Foundation 对象，只能使用 Core Foundation。有没有办法将 a 转换`CFDictionary`为 a`char*`并保存它？或者我是否必须单独保存键和值并稍后阅读它们以重新创建`CFDictionary`？如果是这样，我将如何转换`CFData`对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T18:48:06.863

我发现[了这个有趣的页面](http://opensource.apple.com/source/libsecurity_utilities/libsecurity_utilities-32566/lib/cfutilities.h?txt)`CFDictionary`，它有一个将 a 转换为的实用方法`CFData`：

```
inline CFDataRef makeCFData(CFDictionaryRef dictionary)
{
    return CFPropertyListCreateXMLData(NULL, dictionary);
} 
```

不过，我不知道它是否适用于图像和声音。您可能必须`CFData`先将它们转换为 s。

# android - Android：RessourcesNotFound 异常

> ID：11494023
> 
> 赞同：0
> 
> 时间：2012-07-15T17:21:03.337
> 
> 标签：android, android-resources

我遇到了一个让我抓狂的问题，因为它看起来很简单......当我尝试使用 findRessourcesById 通过它的资源（我之前做过多次的简单操作）获取视图时，它会抛出 NullPointerException当我访问我的主要活动的 onCreate 时，或者当我在我的 PagerAdapter 中执行此操作时访问 RessourcesNotFoundException。事实上，它在任何地方都不起作用......这是我的 mainActivity ：

```
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.TextView;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.NavUtils;
import android.support.v4.view.ViewPager;

public class MainActivity extends Activity {
ViewPager myPager;
    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Fiche f = new Fiche();
    FicheAdapter adapter;
    adapter = new FicheAdapter(f);
    myPager = (ViewPager) findViewById(R.id.pager);
    myPager.setAdapter(adapter);
    myPager.setCurrentItem(0);

    TextView tv = (TextView) findViewById(R.id.nom);
    // HERE IT THROWNS EXCEPTION
    tv.setText("Hello ?");
} 
```

我的 R.java 文件：

```
public final class R {
        .. ...
public static final class id {
    ... ... ...
    public static final int matricule=0x7f080019;
    public static final int menu_settings=0x7f08001d;
    public static final int nom=0x7f08001a;
    public static final int pager=0x7f080001;
    public static final int prenom=0x7f08001b;
    ... ... 
    }
} 
```

我认为我不需要向您展示我的布局，因为如果 id 错误，Eclipse 会看到它......；）（没关系）我试过“干净”，但没有效果......我有之前导入另一个项目的 R 时出现类似错误，但这里没有导入 R...

我会很感激任何帮助，因为我被困在这里。！！

非常感谢

尼科

编辑：我的日志 => 在 mainactivity 有 CausedBy NUll 指针异常的地方：27，这是我在上面的代码中标记的行...... `07-15 19:54:56.460: E/AndroidRuntime(22836): FATAL EXCEPTION: main 07-15 19:54:56.460: E/AndroidRuntime(22836): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.main.courante.e/com.example.main.courante.e.MainActivity}: java.lang.NullPointerException 07-15 19:54:56.460: E/AndroidRuntime(22836): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1751) 07-15 19:54:56.460: E/AndroidRuntime(22836): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1767) 07-15 19:54:56.460: E/AndroidRuntime(22836): at android.app.ActivityThread.access$1500(ActivityThread.java:122) 07-15 19:54:56.460: E/AndroidRuntime(22836): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1005) 07-15 19:54:56.460: E/AndroidRuntime(22836): at android.os.Handler.dispatchMessage(Handler.java:99) 07-15 19:54:56.460: E/AndroidRuntime(22836): at android.os.Looper.loop(Looper.java:132) 07-15 19:54:56.460: E/AndroidRuntime(22836): at android.app.ActivityThread.main(ActivityThread.java:4028) 07-15 19:54:56.460: E/AndroidRuntime(22836): at java.lang.reflect.Method.invokeNative(Native Method) 07-15 19:54:56.460: E/AndroidRuntime(22836): at java.lang.reflect.Method.invoke(Method.java:491) 07-15 19:54:56.460: E/AndroidRuntime(22836): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844) 07-15 19:54:56.460: E/AndroidRuntime(22836): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602) 07-15 19:54:56.460: E/AndroidRuntime(22836): at dalvik.system.NativeStart.main(Native Method) 07-15 19:54:56.460: E/AndroidRuntime(22836): Caused by: java.lang.NullPointerException 07-15 19:54:56.460: E/AndroidRuntime(22836): at com.example.main.courante.e.MainActivity.onCreate(MainActivity.java:27) 07-15 19:54:56.460: E/AndroidRuntime(22836): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048) 07-15 19:54:56.460: E/AndroidRuntime(22836): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1715)` 和我的 main_layout.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" >

 <fragment android:name="com.example.main.courante.e.DateList"
 android:id="@+id/list_frag"
 android:tag="list"
 android:layout_width="0dip"
 android:layout_height="fill_parent"
 android:layout_weight="1"/> 

<android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="0dip"
        android:layout_height="match_parent"
        android:layout_weight="3" />

</LinearLayout> 
```

这是我的 pageAdapter 中的 InstantiateItem 方法：

```
 public Object instantiateItem(View collection, int position) {

    LayoutInflater inflater = (LayoutInflater) collection.getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    int resId = 0;
    switch (position) {
    case 0:
        resId = R.layout.checks_matin;
        break;
    case 1:
        resId = R.layout.checks_soir;
        break;
    }

    View view = inflater.inflate(resId, null);
    TextView tv = (TextView) view.findViewById(R.id.matricule);    
    tv.setText(fiche.getMatricule());
    tv = (TextView) view.findViewById(R.id.nom);
    tv.setText(fiche.getNom());
    ((ViewPager) collection).addView(view, 0);

    return view;
} 
```

即使在这里，它也会抛出一个异常，而在我的两个布局中，checks_matin/soir，id nom/matricule 等都存在......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T18:10:49.690

`R.id.nom`使用活动映射的 xml 中不存在文本视图`setContentView(R.layout.activity_main);`

因此，当您尝试引用它时`TextView tv = (TextView) findViewById(R.id.nom);`，编译器会查看 activity_main.xml 文件，因此会出现 nullPointerException。

id 映射/存在于您的 R.java 文件中，因为它是在另一个 xml 中定义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T18:27:03.290

您有多个 xml 布局吗？如果你这样做了，那么 findViewById 很可能在错误的 xml 中寻找这个资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T19:23:56.180

好的，我在这里找到了一些有用的链接：[Android ViewPager findViewById not working - Always return null](https://stackoverflow.com/questions/7968573/android-viewpager-findviewbyid-not-working-always-returning-null)

所以这是我的 checks_matin.xml 的开始

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:gravity="center"
android:id="@+id/linear" >

<!--  <include xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    layout="@layout/top_layout"
    android:id="@+id/inc_top" /> -->

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:gravity="center"
    android:id="@+id/top_lin" >

    <TextView
        android:id="@+id/matricule"
        style="@style/textview_info"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="matricule"
        android:layout_marginLeft="25dip" 
        android:layout_marginRight="25dip" /> 
```

我已经评论了要测试的包含...这里是我在 instantiateItem 中的新 java 代码：

```
 LinearLayout view = (LinearLayout)inflater.inflate(resId, null);
    LinearLayout v1 = (LinearLayout)view.findViewById(R.id.linear);
    LinearLayout v2 = (LinearLayout)v1.findViewById(R.id.top_lin);
    TextView tv = (TextView) v2.findViewById(R.id.matricule);    
    tv.setText(fiche.getMatricule()); 
```

但它仍然不起作用！我在这里没有想法......：/

编辑：它确实有效！juste 从上面删除这一行：

```
LinearLayout v1 = (LinearLayout)view.findViewById(R.id.linear); 
```

# linux - 如何更改当前光标位置指示器的颜色？

> ID：11494029
> 
> 赞同：7
> 
> 时间：2012-07-15T17:21:53.913
> 
> 标签：linux, perl, console, terminal, terminal-color

当我打开终端时，我有一个带有白色字符的黑色背景。我还有一个绿色占位符，它向我指示当前光标在哪里。

在终端中运行的任何 perl 脚本中，此行为都是相同的。

如何在脚本中更改光标指示器的颜色（具体来说，我希望它消失一段时间然后回来）？

我正在使用 Linux 和 bash。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T17:30:01.820

没有什么可移植的，但某些终端接受转义序列来改变光标颜色。

例如`xterm`接受`OSC 12`设置颜色

```
$ echo -e "\e]12;red\a" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-12T20:50:46.963

### 简短的回答

```
echo -n -e '\e[?0c'       #DISAPPEAR
echo -n -e '\e[?16;0;64c' #REAPPEAR
echo -n -e '\e[?16;0;80c' #REAPPEAR w/highlighting 
```

* * *

### 长答案

到今天为止， ge **tty***的*当前版本（包含在[util-linux 是提供大多数核心命令的 linux 包，例如, , , , - 仅举几例） - 如果您的 linux 内核版本是>=4.4) 的行为与尚未更新的 kernel.org 文档（[VGA 的软件光标](https://www.kernel.org/doc/Documentation/VGA-softcursor.txt)）中描述的行为不同。**`util-linux 2.27.1``login``su``mount``more``kill`**

 **考虑

`echo -n -e '\e[?`*字节1*`;`*字节2*`;`*字节3*`c'`

字节1：

```
+---------------+---------------+
|  high nibble  |   low nibble  |
+---+-----------+-----------+---+
|msb|           |           |lsb|
+---+---+---+---+---+---+---+---+
| 7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 |
+---+---+---+---+---+---+---+---+
                  |   |   |   |
                  |   |   |   +-+
                  |   |   |     |   These bits specify the 8
                  |   |   +-----+-> possible blinking HW carets
                  |   |         |   
                  |   +---------+
                  |
                  +---------------> When set, this bit enables SW
                                    caret instead of HW caret 
```

字节 2（SW 插入符号）：

```
 +-----------------> A pretty useless mask applied
                |                   to bits in byte3
+---------------+---------------+
|  high nibble  |   low nibble  |
+---+-----------+-----------+---+
|msb|           |           |lsb|
+---+---+---+---+---+---+---+---+
| 7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 |
+---+---+---+---+---+---+---+---+ 
```

字节 3（SW 插入符号）：

```
+---------------+---------------+
|  high nibble  |   low nibble  |
+---+-----------+-----------+---+
|msb|           |           |lsb|
+---+---+---+---+---+---+---+---+
| 7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 |
+---+---+---+---+---+---+---+---+
  |   |   |   |
  |   |   |   +-------------------> Highlighting
  |   |   |
  |   |   +---------------------+
  |   |                         |
  |   +-------------------------+-> Color
  |                             |
  +-----------------------------+ 
```

突出显示：突出显示插入符号下方的字符（例如，将其更改为白色 [真正闪亮的白色] 而不是深白色 [TTY 通常默认的浅灰色]）。

颜色：插入符号的颜色。请注意，与我们都知道和喜爱的 ANSI 颜色代码的通常顺序相比，位是相反的，所以 - 对于这个三元组 - 第 7 个是**L** sb 而第 5 个是**M** sb。

因此，虽然在 70 年代 ANSI 定义了以下颜色代码，但为 TTY、各种 linux 终端、控制台等设置了普遍采用*的事实上的*标准

```
000 (0) black
001 (1) red
010 (2) green
011 (3) yellow or dark yellow
100 (4) blue or dark blue
101 (5) magenta, purple or violet
110 (6) cyan or light blue
111 (7) white or dark white (light gray) 
```

在这种情况下，我们有相反的情况

```
000 (0) black
100 (4) red
010 (2) green
110 (6) yellow or dark yellow
001 (1) blue or dark blue
101 (5) magenta, purple or violet
011 (3) cyan or light blue
111 (7) white or dark white (light gray) 
```

*（括号内为八进制值）*

所以，这里是列表：

```
#Hardware carets (blinking and [dark ]white)
echo -n -e '\e[?0c' #default caret
echo -n -e '\e[?1c' #invisible caret
echo -n -e '\e[?2c' #underscore caret
echo -n -e '\e[?3c' #thicker underscore caret
echo -n -e '\e[?4c' #smaller block caret
echo -n -e '\e[?5c' #small block caret
echo -n -e '\e[?6c' #big block caret
echo -n -e '\e[?7c' #biggest block caret
#On my Linux machine, both 6 and 7 are the big rectangular full-size block caret

#Software carets (non-blinking and colored)
echo -n -e '\e[?16;0;0c'  #00001000 0 00000000 black (thus invisible on black background)
echo -n -e '\e[?16;0;128c'#00001000 0 10000000 red
echo -n -e '\e[?16;0;64c' #00001000 0 01000000 green
echo -n -e '\e[?16;0;192c'#00001000 0 11000000 yellow
echo -n -e '\e[?16;0;32c' #00001000 0 00100000 blue
echo -n -e '\e[?16;0;160c'#00001000 0 10100000 magenta
echo -n -e '\e[?16;0;96c' #00001000 0 01100000 cyan
echo -n -e '\e[?16;0;224c'#00001000 0 11100000 dim white
echo -n -e '\e[?16;0;16c' #00001000 0 00010000 black     + highlighting
echo -n -e '\e[?16;0;144c'#00001000 0 10010000 red       + highlighting
echo -n -e '\e[?16;0;80c' #00001000 0 01010000 green     + highlighting
echo -n -e '\e[?16;0;208c'#00001000 0 11010000 yellow    + highlighting
echo -n -e '\e[?16;0;48c' #00001000 0 00110000 blue      + highlighting
echo -n -e '\e[?16;0;176c'#00001000 0 10110000 magenta   + highlighting
echo -n -e '\e[?16;0;112c'#00001000 0 01110000 cyan      + highlighting
echo -n -e '\e[?16;0;240c'#00001000 0 11110000 dim white + highlighting 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T17:57:44.110

如果更改打印文本的颜色，则可以更改光标的颜色。所以你不能简单地改变光标的颜色而不改变你正在打印的文本的颜色。

但是您可以使光标不可见：

```
system("tput cinvis"); # make cursor invisible
system("tput cnorm");  # make cursor visible 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T17:32:19.897

你有没有尝试过这样的事情？

```
use Term::ANSIColor qw(:constants);

print RED, "Danger, Will Robinson!\n", RESET; 
```**

# wpf - 字体对话框并应用于 TextBox 文本

> ID：11494036
> 
> 赞同：-3
> 
> 时间：2012-07-15T17:22:49.123
> 
> 标签：wpf, vb.net, textbox

如何将在字体对话框中选择的指定字体样式应用于 Visual Basic 中的文本框。我正在尝试实现一个记事本程序，该程序能够选择所需的字体（从可用字体列表中），然后我想将此字体应用于 TextBox 中的文本。到目前为止我已经这样做了

```
 FontDialog1.ShowDialog()
        TextBox1.Font = FontDialog1.Font 
```

但它没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T18:11:07.617

您必须从[FontDialog.Font](http://msdn.microsoft.com/en-us/library/system.windows.forms.fontdialog.font.aspx)`System.Drawing.Font`属性返回的设置 TextBox 的所有字体相关属性：

```
System.Drawing.Font font = fontDialog.Font;
textBox.FontFamily = new FontFamily(font.Name);
textBox.FontSize = font.Size;
textBox.FontWeight = font.Bold ? FontWeights.Bold : FontWeights.Regular;
textBox.FontStyle = font.Italic ? FontStyles.Italic : FontStyles.Normal; 
```

另请参阅[此问题](https://stackoverflow.com/q/637636/1136211)。

# javascript - 在 Web 浏览器中将文件选择器文件提取到数组缓冲区中

> ID：11494037
> 
> 赞同：0
> 
> 时间：2012-07-15T17:22:52.053
> 
> 标签：javascript, xmlhttprequest, arraybuffer, filepicker.io

我正在尝试使用[filepicker.io](https://www.filepicker.io/)来获取二进制数据并将其传递给这样的函数：

```
var doSomething = function(arrayBuffer) {
    var u16 = new Int16Array(arrayBuffer);
} 
```

我不知道如何将二进制文件转换为这样的数组缓冲区：

```
filepicker.getContents(url, function(data){
//convert data into arraybuffer
} 
```

我尝试按照[XMLHttpRequest 上的本教程进行操作，](http://www.html5rocks.com/en/tutorials/file/xhr2/)但不起作用。

```
var xhr = new XMLHttpRequest();
xhr.open('GET', url, true);
xhr.responseType = 'arraybuffer';
xhr.onload = function(e) {
    doSomething(this.response); 
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T17:34:43.903

你没有打电话`.send`给你的`XHR`

```
xhr.send(null); 
```

# c++ - c++ 具有空对象模型的双向链表

> ID：11494039
> 
> 赞同：1
> 
> 时间：2012-07-15T17:23:08.513
> 
> 标签：c++, linked-list, doubly-linked-list, null-object-pattern

我正在尝试使用空对象模型创建一个双向链表。到目前为止，我已经实现了将节点添加到列表开头的方法和显示节点的方法。我的问题是显示功能总是显示0。谁能指出我哪里出了问题以及如何解决？另外，我在这里正确实现空对象模型是否正确？

**注意：**这是一个学校作业。请不要在没有解释的情况下发布解决方案。我想学习和理解这里发生了什么。

**编辑：**修复显示问题后，我有另一个：当使用空列表或具有节点的列表调用 getHead() 或 getTail() 时，它一直想使用节点类中的 self()，而不是 nullNode 类（在空列表的情况下）或 elementNode 类（在具有节点的列表的情况下）。我被困在如何解决这个问题上。

如果我打印出 container.getNext() 和 container 的地址（对于一个空列表），两个地址是相同的，所以不应该将 ->self() 添加到最后调用 nullNode 类中的 self() 方法吗？

```
class node {
public:

    node(){/* Do nothing */}

    node(int e){ element = e; }

    int getData(){ return element; }

    void setData(int e){ element = e; }

    friend class list;
protected:
    node* getNext(){ return next; }

    void setNext(node* n){ next = n; }

    node* getPrev() { return prev; }

    void setPrev(node* n){ prev = n; }

    node* self();

private:

    int element;
    node* next;
    node* prev;
};

class nullNode : public node{
public:
    nullNode(){/* Do nothing */}

    int getData(){ return NULL; }

    void setData(int e){ /* Do Nothing */ }

    node* getNext(){ return head; }

    void setNext(node* n){ head = n; }

    node* getPrev() { return tail; }

    void setPrev(node* n){ tail = n; }

    node* self(){ return NULL; }
private:
    node* head;
    node* tail;
};

class elementNode : public node{
public:
    elementNode(){/* Do nothing */}

    elementNode(int element){
        setData(element);
}

    int getData(){ return node::getData(); }

    void setData(int e){ node::setData(e); }

    node* getNext(){ return node::getNext(); }

    void setNext(node* n){ node::setNext(n); }

    node* getPrev() { return node::getPrev(); }

    void setPrev(node* n){ node::setPrev(n); }

    node* self(){ return this; }
};

class list{
public:

    list();

    node* getHead(){ return (container.getNext())->self(); }

    node* getTail(){ return (container.getPrev())->self(); }

    node* addHeadNode(int e);

    void removeNode(node* n);

    void insertBefore(node* n, int e);

    void insertAfter(node* n, int e);

    void displayNode(node *n);

private:

    nullNode container;
};

list::list()
{
    container.setNext(&container);
    container.setPrev(&container);
}

node* list::addHeadNode(int e)
{
    node* foo = new elementNode(e);

    foo->setPrev(&container);
    foo->setNext(container.getNext());
    container.getNext()->setPrev(foo);
    container.setNext(foo);
    return foo;
}

void list::displayNode(node* n)
{
    cout << "Node Data: " << n->getData() << endl;
}
int main()
{
    list myList;
    node* myNode;
    myNode = myList.addHeadNode(5);
    myList.displayNode(myNode);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T17:28:29.583

```
elementNode(int element)
{
    node e;
    e.setData(element);
} 
```

这段代码在做什么？您创建了 node `e`，但它似乎随后被丢弃并且没有添加到任何列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T17:36:23.487

问题隐藏在

```
elementNode(int element){
    node e;
    e.setData(element);
} 
```

这里发生了什么？首先你创建一个`node`类的实例，然后调用它的`setData`成员函数。果然`e`是用 的值修改的，`element`但是下一刻两者`e`和`element`都消失了，因为它们被初始化的范围已经停止（由 终止`}`），而其中的信息`element`还没有保存在任何地方。

但是，如果将上面的代码替换为

```
elementNode(int element){
    setData(element);
} 
```

它调用继承的`setData`成员函数，值`element`被保存，程序`5`按预期输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T17:38:10.887

您的`elementNode`构造函数正在尝试初始化它的`node`一部分：

```
elementNode(int element){
  node e;
  e.setData(element);
} 
```

您实际上只是构建一个不相关的节点然后丢弃它。

你想要的是调用你的超类构造函数，这可以在子类构造函数的初始化列表中完成：

```
elementNode(int element) : node(element) {
} 
```

# objective-c - 检测触摸是否在屏幕上停止

> ID：11494040
> 
> 赞同：1
> 
> 时间：2012-07-15T17:23:17.017
> 
> 标签：objective-c, ios, cocoa-touch

问题很简单但极其复杂：`UIResponder`有 4 种处理触摸的方法。

```
- touchesEnded:withEvent:event
– touchesBegan:withEvent:
– touchesMoved:withEvent:
– touchesCancelled:withEvent: 
```

如何检测屏幕上的触摸是否停止？

问题是我必须检测是否有东西在静止的触摸下移动（没有取消或结束。它只是没有移动）并且因为它没有移动，所以这些方法都不会被调用。

我的想法是这样的：

我可以将触摸添加到 a`NSMutableArray`但我必须为任何触摸移动更新它（这很多）。这也会产生更多问题，我需要检测哪些触摸停止以及是否结束。而且因为我得到了`NSSet`from `UIResponder`，所以我没有一个有组织的数组，所以......各种问题。

我在等待想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T18:40:44.670

我修好了..还发现了一些很酷的东西`UITouch`

我做了什么：在

```
 – touchesBegan:withEvent:
for(UITouch*touch in touches){
[touchesSet addObject:touch]; } //touchesSet is a set that i store all the touches on the screen 
```

在

```
- touchesEnded:withEvent:

for(UITouch*touch in touches){
[touchesSet removeObject:touch]; } 
```

在

```
– touchesCancelled:withEvent:
[touchesSet removeAllObjects]; 
```

这样做我`NSSet`在任何给定时间都会在屏幕上进行所有触摸，包括位置和`UITouchPhase`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T18:42:14.137

解决方案在一定程度上取决于您要做什么（并且您并没有真正描述您要解决的业务问题或用户体验）。但是假设您只是想检测一个连续手势何时暂停但尚未完成：

您可以`touchesMoved`跟踪上次调用它的位置和时间。例如，如果你有一个子类手势识别器，给它一个`CGPoint lastLocation`你可以查询的属性或类似的东西。

然后，您可以设置一个 NSTimer，它会在一定时间后触发，这将测试您的“停止”条件。例如，如果您的 NSTimer 每 0.1 秒调用一次，并且您正在等待位置没有变化，例如 1 秒，那么这将被视为停止条件。

如果您想查看“某物在静止触摸下是否移动”，您可以将其添加到您的 NSTimer 例程中。

# ruby-on-rails - 无法运行命令“rails server”！

> ID：11494044
> 
> 赞同：0
> 
> 时间：2012-07-15T17:23:30.447
> 
> 标签：ruby-on-rails

我创建了一个测试应用程序，安装了包和所有的 gem。当我 cd 进入应用程序并输入命令“rails s”或“rails server”时，这就是我得到的结果：

```
/Library/Ruby/Gems/1.8/gems/bundler-1.1.1/lib/bundler/runtime.rb:213: warning: Insecure world writable dir /Library/Ruby/Gems/1.8 in PATH, mode 040777
gem install minitest
/Library/Ruby/Gems/1.8/gems/turn-0.9.6/lib/turn/minitest.rb:9:in `require': no such file to load -- minitest/unit (LoadError)
    from /Library/Ruby/Gems/1.8/gems/turn-0.9.6/lib/turn/minitest.rb:9
    from /Library/Ruby/Gems/1.8/gems/turn-0.9.6/lib/turn.rb:13:in `require'
    from /Library/Ruby/Gems/1.8/gems/turn-0.9.6/lib/turn.rb:13
    from /Library/Ruby/Gems/1.8/gems/bundler-1.1.1/lib/bundler/runtime.rb:68:in `require'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.1.1/lib/bundler/runtime.rb:68:in `require'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.1.1/lib/bundler/runtime.rb:66:in `each'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.1.1/lib/bundler/runtime.rb:66:in `require'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.1.1/lib/bundler/runtime.rb:55:in `each'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.1.1/lib/bundler/runtime.rb:55:in `require'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.1.1/lib/bundler.rb:119:in `require'
    from /Applications/MAMP/htdocs/railsTestApp1/config/application.rb:7
    from /Library/Ruby/Gems/1.8/gems/railties-3.2.2/lib/rails/commands.rb:53:in `require'
    from /Library/Ruby/Gems/1.8/gems/railties-3.2.2/lib/rails/commands.rb:53
    from /Library/Ruby/Gems/1.8/gems/railties-3.2.2/lib/rails/commands.rb:50:in `tap'
    from /Library/Ruby/Gems/1.8/gems/railties-3.2.2/lib/rails/commands.rb:50
    from script/rails:6:in `require'
    from script/rails:6 
```

我试图弄清楚缺少什么。绝望地，我尝试将 gem minitest 安装到 /Ruby/Gems/ 以及 /Ruby/Gems/1.8/gems/ 中，但显然我不知道我在这里做什么。所以拜托，我做错了什么？？

# sql - 如何通过关联表检索一组用户共有的关联对象/记录？

> ID：11494046
> 
> 赞同：1
> 
> 时间：2012-07-15T17:24:01.583
> 
> 标签：sql, ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我正在使用 Ruby on Rails 3.2.2，我想检索由两个或多个用户*同时*关联的对象/记录。也就是说，我有一个数据库表，用于存储用户和文章之间的关联数据；我想“构建”一个*SQL 查询*，以便检索两个或多个用户的相关文章。例如，如果我有以下关联对象

```
#<UserArticleAssociation id: 1, user_id: 1, article_id: 1>
#<UserArticleAssociation id: 2, user_id: 1, article_id: 2>
#<UserArticleAssociation id: 3, user_id: 1, article_id: 3>
#<UserArticleAssociation id: 4, user_id: 2, article_id: 1>
#<UserArticleAssociation id: 5, user_id: 2, article_id: 2>    
#<UserArticleAssociation id: 6, user_id: 3, article_id: 1>
#<UserArticleAssociation id: 7, user_id: 3, article_id: 3>
#<UserArticleAssociation id: 8, user_id: 4, article_id: 4> 
```

我会声明/运行一个*范围方法*，以便获得如下内容：

```
@user1.articles.associated_by(@user2)
# => [ #<UserArticleAssociation id: 1, user_id: 1, article_id: 1>,
       #<UserArticleAssociation id: 4, user_id: 2, article_id: 1>]

@user1.articles.associated_by(@user3)
# => [ #<UserArticleAssociation id: 1, user_id: 1, article_id: 1>,
       #<UserArticleAssociation id: 7, user_id: 3, article_id: 3>]

@user1.articles.associated_by(@user4)
# => nil

@user2.articles.associated_by(@user3)
# => [ #<UserArticleAssociation id: 1, user_id: 1, article_id: 1>]

@user1.articles.associated_by([@user2, @user3])
# => [ #<UserArticleAssociation id: 1, user_id: 1, article_id: 1>] 
```

换句话说，*我想通过`user_article_associations`表格*找到一组用户共有的文章。我怎样才能做到这一点？

* * *

涉及的类表示为

```
class User < ActiveRecord::Base
  has_many :article_associations, :class_name  => 'UserArticleAssociation'
  has_many :articles, :through => :article_associations
end

class Article < ActiveRecord::Base
  has_many :user_associations
  has_many :users, :through => :user_associations
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T18:02:53.097

用于[`merge`](http://api.rubyonrails.org/classes/ActiveRecord/SpawnMethods.html#method-i-merge)组合关系：

```
articles = @user1.articles.merge(@user2.articles) 
```

这将为您提供所有`@user1`与`@user2`共享的文章。您可以进一步调用`merge`文章的其他关系，例如：

```
articles = @user1.articles.merge(@user2.articles).merge(@user3.articles) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:54:42.013

您应该在 group_by 中使用 having 子句

```
Article.joins(:user_article_associations).
where('user_article_associations.user_id in (?)', users_ids)).
group('articles.id').
having('COUNT(user_article_associations.user_id in (?)) = ?',users_ids, users_ids.size) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T14:46:29.203

也许这样的事情会起作用：

```
Article.joins(:users).where('users.id in (?)', my_users.map(&:id)).group('articles.id') 
```

# android - restlet odata android客户端发送cookie

> ID：11494052
> 
> 赞同：1
> 
> 时间：2012-07-15T17:24:46.920
> 
> 标签：android, forms-authentication, wcf-data-services, odata, restlet

我有一个简单的 WCF 数据服务，我通过 restlet odata 扩展在 Android 上连接到它。我正在尝试将表单身份验证与我的 WCF 数据服务一起使用，这意味着包括身份验证 cookie，但我似乎看不到如何将 cookie 添加到 org.restlet.ext.odata.Service。在我的 resetlet 客户端服务代理构造函数中，我尝试添加：

```
Request.getCurrent().getCookies().add("test","test"); 
```

我也尝试过我的服务代理实例：

```
*myserviceinstance*.getLatestRequest().getCookies().add("test","test"); 
```

但什么都没有。我通过在我的 WCF 数据服务中向“OnStartProcessingRequest”添加一个断点来进行检查，但我从来没有得到 cookie。

任何帮助或方向表示赞赏。

# android - EditText 上的 ImageSpan（笑脸）。使用 SwiftKey 键盘不起作用

> ID：11494054
> 
> 赞同：6
> 
> 时间：2012-07-15T17:24:58.887
> 
> 标签：android, android-edittext, spannable

我正在做一个简单的聊天应用程序，我想在编写消息时在 edittext 上显示笑脸。

我有这个来确定哪些字符将通过 ImageSpan 替换为 Image （仅当在 EditText 上插入笑脸字符时才调用此方法）：

```
for (index = start; index < start+num_chars; index++) {
        if (index + 1 > editable.length())
            continue;  
          if(emoticons.containsKey(editable.subSequence(index, index + 1).toString())){
            int length=1; 

            Drawable drawable = context.getResources().getDrawable(emoticons.get(editable.subSequence(index, index + 1).toString()));
            Bitmap bitmap = ((BitmapDrawable) drawable).getBitmap();

            int size=Utils.GetDipsFromPixel(context, (int)(textSize*1.3));

            Drawable d = new BitmapDrawable(Bitmap.createScaledBitmap(bitmap, size, size, true));
            int dWidth = d.getIntrinsicWidth();
            int dHeight = d.getIntrinsicHeight();

            d.setBounds(0 , -dHeight, dWidth, 0);
            ImageSpan span;
            span = new ImageSpan(d,ImageSpan.ALIGN_BASELINE);
            editable.setSpan(span, index, index + length,Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);

            index += length - 1;
          }

      } 
```

我正在使用 SPAN_EXCLUSIVE_EXCLUSIVE 标签来设置跨度，但是我在使用 swiftkey 键盘时遇到问题，因为当我在编辑文本中插入笑脸时，我在 imageSpan 之后写的所有内容都保留在图像下方（如 SPAN_EXCLUSIVE_INCLUSIVE）。使用Android默认键盘我没有这个问题。

我只希望 Whatsapp 应用程序与 EditText 上的表情相同。

有什么建议么？我必须对我的代码做任何更改吗？

编辑：“可编辑”变量被传递给方法。它是 txtMessage.getText() 值，其中 txtMessage 是 EditText。

谢谢！

编辑：只跨越一部分代码！这在多行中效果很好！我认为问题在于使用 Drawable->Bitmap->ResizedBitmap->Drawable。

```
public static final HashMap<String, Integer> emoticons = new HashMap();
static {
    emoticons.put("\ue415", R.drawable.e415);
    emoticons.put("\ue056", R.drawable.e056);
    emoticons.put("\ue057", R.drawable.e057);
...
public static Spannable getSmiledText(Context context, Spannable editable,
        int start, int num_chars, float textSize) {

    int index;
    for (index = start; index < start + num_chars; index++) {
        if (index + 1 > editable.length())
            continue;
        if (EmojiLayout.emoticons.containsKey(editable.subSequence(index,
                index + 1).toString())) {
            int length = 1;

            Bitmap smiley = BitmapFactory.decodeResource(context.getResources(), ((Integer) EmojiLayout.emoticons.get(editable.subSequence(index,
                    index + 1).toString())));
            int size = Utils.GetDipsFromPixel(context,
            (int) (textSize * 1.37));

            Bitmap scaledbmp=Bitmap.createScaledBitmap(
                    smiley, size, size, false);
            ImageSpan span;
            span = new ImageSpan(scaledbmp);
            Log.d("EmojiLayout", "Index: " + String.valueOf(index) + "To: "
                    + String.valueOf(index + length));
            editable.setSpan(span, index, index + length,
                    Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
            index += length - 1;
        }
    }
    return editable;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-31T06:48:05.350

使用这个::

```
 public static CharSequence addSmileySpans(Context ch, CharSequence your_recieved_message)
{
    //smilyRegexMap = new HashMap<Integer, String>();

private static final HashMap<String, Integer> smilyRegexMap = new HashMap<String, Integer>();
smilyRegexMap.put( ">:-\\(" , R.drawable.fb_grumpy);
        smilyRegexMap.put( ">:\\(" , R.drawable.fb_grumpy);
        smilyRegexMap.put( ">:-O" , R.drawable.fb_upset);
        smilyRegexMap.put( ":-\\)" , R.drawable.fb_smile);
        smilyRegexMap.put( ":\\)",R.drawable.fb_smile);
        smilyRegexMap.put( ":-\\]" , R.drawable.fb_smile);
        smilyRegexMap.put( ":-\\(", R.drawable.fb_frown);

    System.out.println("==In Spannable Function..........");
    SpannableStringBuilder builder = new SpannableStringBuilder(your_recieved_message);

    System.out.println("==================Size of Smily  : "+ smilyRegexMap.size());

    @SuppressWarnings("rawtypes")
    Iterator it = smilyRegexMap.entrySet().iterator();
    while (it.hasNext()) {
        @SuppressWarnings("rawtypes")
        Map.Entry pairs = (Map.Entry) it.next();

        Pattern mPattern = Pattern.compile((String) pairs.getKey(),Pattern.CASE_INSENSITIVE);
        Matcher matcher = mPattern.matcher(your_recieved_message);

        while (matcher.find()) {

                Bitmap smiley = BitmapFactory.decodeResource(ch.getResources(), ((Integer) pairs.getValue()));
                Object[] spans = builder.getSpans(matcher.start(), matcher.end(), ImageSpan.class);
                if (spans == null || spans.length == 0) {
                    builder.setSpan(new ImageSpan(smiley), matcher.start(), matcher.end(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
                }
        }
    }
    return builder;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T17:35:55.210

您只需使用 ImageSpan 构建一个 Spannable 文本，然后将 Spannable 设置为 TextView 或 EditText，正如[CommonsWare](https://stackoverflow.com/users/115145/commonsware)在这篇[文章](https://stackoverflow.com/questions/3341702/displaying-emoticons-in-android/4302199#4302199)中所建议的那样。您也可以尝试使用[A-IV 的](https://stackoverflow.com/users/523461/a-iv)解决方案：

```
private static final HashMap<String, Integer> emoticons = new HashMap();
    static {
        emoticons.put(":*", R.drawable.emo_im_kiss);
        emoticons.put(":-D", R.drawable.emo_im_glad);
        emoticons.put(":)", R.drawable.emo_im_happy);
        emoticons.put(":-(", R.drawable.emo_im_sad);
        ...
    }

    public static Spannable getSmiledText(Context context, String text) {

    SpannableStringBuilder builder = new SpannableStringBuilder(text);
    int index;

    for (index = 0; index < builder.length(); index++) {
        for (Entry<String, Integer> entry : emoticons.entrySet()) {
            int length = entry.getKey().length();
            if (index + length > builder.length())
                continue;
            if (builder.subSequence(index, index + length).toString().equals(entry.getKey())) {
                builder.setSpan(new ImageSpan(context, entry.getValue()), index, index + length,
                Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
                index += length - 1;
                break;
            }
    }
    }
    return builder;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-21T04:57:54.737

**试试这个方法，希望这能帮助你解决你的问题。**

```
 private static LinkedHashMap<String,Integer> emojisHashMap;

    public static LinkedHashMap<String, Integer> getEmojisHashMap() {
        if (emojisHashMap == null || emojisHashMap.size() == 0) {
            emojisHashMap = new LinkedHashMap<String, Integer>();

            emojisHashMap.put(":=q", R.drawable.smiley1);
            emojisHashMap.put(":=w", R.drawable.smiley2);
            emojisHashMap.put(":=e", R.drawable.smiley3);
            emojisHashMap.put(":=r", R.drawable.smiley4);

            return emojisHashMap;
        } else {
            return emojisHashMap;
        }

    }

    public Spannable getSmiledText(CharSequence text) {
        SpannableStringBuilder builder;

        try {
            builder = (SpannableStringBuilder) text;
        }catch (Exception e){
            builder = new SpannableStringBuilder(text);
        }
        if (getEmojisHashMap().size() > 0) {
            int index;
            for (index = 0; index < builder.length(); index++) {
                if (Character.toString(builder.charAt(index)).equals(":")) {
                    for (Map.Entry<String, Integer> entry : getEmojisHashMap().entrySet()) {
                        int length = entry.getKey().length();
                        if (index + length > builder.length())
                            continue;
                        if (builder.subSequence(index, index + length).toString().equals(entry.getKey())) {
                            builder.setSpan(new ImageSpan(getContext(), entry.getValue()), index, index + length, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
                            index += length - 1;
                            break;
                        }
                    }
                }
            }
        }
        return builder;
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-01T10:42:56.877

# **在笑脸的 XML 文件中放置图像按钮**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#dddddd"
    android:padding="10dp" >

    <ImageButton
        android:id="@+id/btn_smile"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@null"
        android:padding="10dp"
        android:src="@drawable/fb_smile" />

    <ImageButton
        android:id="@+id/btn_kiss"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@null"
        android:padding="10dp"
        android:src="@drawable/fb_kiss" />

    <ImageButton
        android:id="@+id/btn_wink"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@null"
        android:padding="10dp"
        android:src="@drawable/fb_wink" />

    <ImageButton
        android:id="@+id/btn_cry"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@null"
        android:padding="10dp"
        android:src="@drawable/fb_cry" />

    <ImageButton
        android:id="@+id/btn_grumpy"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@null"
        android:padding="10dp"
        android:src="@drawable/fb_grumpy" />

    <ImageButton
        android:id="@+id/btn_upset"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@null"
        android:padding="10dp"
        android:src="@drawable/fb_upset" />
</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#dddddd"
    android:padding="10dp" >

    <ImageButton
        android:id="@+id/btn_frown"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@null"
        android:padding="10dp"
        android:src="@drawable/fb_frown" />

    <ImageButton
        android:id="@+id/btn_tougn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@null"
        android:padding="10dp"
        android:src="@drawable/fb_tounge" />

    <ImageButton
        android:id="@+id/btn_grin"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@null"
        android:padding="10dp"
        android:src="@drawable/fb_grin" />

    <ImageButton
        android:id="@+id/btn_gasp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@null"
        android:padding="10dp"
        android:src="@drawable/fb_gasp" />

    <ImageButton
        android:id="@+id/btn_glasses"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@null"
        android:padding="10dp"
        android:src="@drawable/fb_glasses" />

    <ImageButton
        android:id="@+id/btn_unsure"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@null"
        android:padding="10dp"
        android:src="@drawable/fb_unsure" />
</LinearLayout>
</LinearLayout> 
```

//================================================= ========

**在 Dialog Class 中输入这段代码**

```
 private class SmileyMenu extends Dialog implements android.view.View.OnClickListener{

    private Chat cht;
    Context con;
    public String MyStatus1="";
    public SmileyMenu(Chat cht) {
        super(cht);
        this.con = cht;
        this.cht = cht;
    }

    @Override
    protected void onStart() {
        // TODO Auto-generated method stub
        super.onStart();

        setTitle("Select Smileys :");

        setContentView(R.layout.smily_menu);

        ImageButton btnSmile = (ImageButton)findViewById(R.id.btn_smile);
        ImageButton btnkiss = (ImageButton)findViewById(R.id.btn_kiss);
        ImageButton btnwink = (ImageButton)findViewById(R.id.btn_wink);
        ImageButton btncry = (ImageButton)findViewById(R.id.btn_cry);
        ImageButton btngrupy = (ImageButton)findViewById(R.id.btn_grumpy);
        ImageButton btnupset = (ImageButton)findViewById(R.id.btn_upset);
        ImageButton btnfrown = (ImageButton)findViewById(R.id.btn_frown);
        ImageButton btngrin = (ImageButton)findViewById(R.id.btn_grin);
        ImageButton btngasp = (ImageButton)findViewById(R.id.btn_gasp);
        ImageButton btnglass = (ImageButton)findViewById(R.id.btn_glasses);
        ImageButton btnunsure = (ImageButton)findViewById(R.id.btn_unsure);
        ImageButton btndevil = (ImageButton)findViewById(R.id.btn_devil);
        ImageButton btnheart = (ImageButton)findViewById(R.id.btn_heart);
        ImageButton btnpacman = (ImageButton)findViewById(R.id.btn_pacman);
        ImageButton btn42 = (ImageButton)findViewById(R.id.btn_42);

        btnSmile.setOnClickListener(this);
        btnkiss.setOnClickListener(this);
        btnwink.setOnClickListener(this);
        btncry.setOnClickListener(this);
        btngrupy.setOnClickListener(this);
        btnupset.setOnClickListener(this);
        btnfrown.setOnClickListener(this);
        btngrin.setOnClickListener(this);
        btngasp.setOnClickListener(this);
        btnglass.setOnClickListener(this);
        btnunsure.setOnClickListener(this);
        btndevil.setOnClickListener(this);
        btnheart.setOnClickListener(this);
        btnpacman.setOnClickListener(this);
        btn42.setOnClickListener(this);

    }

    @Override
    public void onClick(View v) {

        switch (v.getId()) {

        case R.id.btn_smile:
            cht.setMyText(":-)");
            break;

        case R.id.btn_kiss:
            cht.setMyText(":-*");
            break;

        case R.id.btn_wink:
            cht.setMyText(";-)");
            break;

        case R.id.btn_cry:
            cht.setMyText(":'(");
            break;

        case R.id.btn_grumpy:
            cht.setMyText(">:-(");
            break;

        case R.id.btn_upset:
            cht.setMyText(">:-O");
            break;

        case R.id.btn_frown:
            cht.setMyText(":-(");
            break;

        case R.id.btn_tougn:
            cht.setMyText(":-p");
            break;

        case R.id.btn_grin:
            cht.setMyText(":-D");
            break;

        case R.id.btn_gasp:
            cht.setMyText(":-O");
            break;

        case R.id.btn_glasses:
            cht.setMyText("8-)");
            break;

        case R.id.btn_unsure:
            cht.setMyText(":-/");
            break;

        case R.id.btn_devil:
            cht.setMyText("3:-)");
            break;

        case R.id.btn_heart:
            cht.setMyText("<3");
            break;

        case R.id.btn_pacman:
            cht.setMyText(":v");
            break;

        case R.id.btn_42:
            cht.setMyText(":42:");
            break;

        default:
            Toast.makeText(con, "Sorryyyyyy", Toast.LENGTH_SHORT).show();
            break;
        }

        dismiss();
    }
} 
```

//==================

**运行时笑脸菜单的“单击时”按钮的图像**

![在此处输入图像描述](../Images/05a7d8b4392bd6612a3a05ac1fc0494a.png)

==================================================== ===

试试这个可能对你有帮助..祝你好运..

# forms - 未使用 HTML5 发布的输入元素

> ID：11494057
> 
> 赞同：1
> 
> 时间：2012-07-15T17:25:46.810
> 
> 标签：forms, html, post

我正在编写一个测试 HTML5 登录表单，并设置表单如下：

```
<form id="login" method="POST" action="<?php echo $_SERVER['PHP_SELF'] ?>">
    <h1>Log In</h1>
    <fieldset id="inputs">
        <input id="username" type="text" placeholder="Username" autofocus required>   
        <input id="password" type="password" placeholder="Password" required>
    </fieldset>
    <fieldset id="actions">
        <input type="submit" id="submit" name="submit_data" value="Log in">
    </fieldset>
</form> 
```

单击提交时，表单将返回到同一页面。当我打印 POSTed 元素的数组时，我只看到一个“submit_data”。“用户名”和“密码”没有通过。

我哪里错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T17:28:40.540

您没有为输入指定名称，例如

```
<form id="login" method="POST" action="<?php echo $_SERVER['PHP_SELF'] ?>">
    <h1>Log In</h1>
    <fieldset id="inputs">
        <input id="username" type="text" name="username" placeholder="Username" autofocus required>   
        <input id="password" name="password" type="password" placeholder="Password" required>
    </fieldset>
    <fieldset id="actions">
        <input type="submit" id="submit" name="submit_data" value="Log in">
    </fieldset>
</form> 
```

这可能会解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T17:31:18.740

你可以只检查 isset($_POST['username']) 和 isset($_POST['password']) 而不是 print_r （我假设你正在使用）？

```
<input type="..." NAME="username" ..>  You haven't set var name. 
```

也代替占位符，设置 value="Username" 和 value="Password"。如果仅使用占位符，则可能不会传递任何值。看到这个测试： [http ://www.w3schools.com/html5/tryit.asp?filename=tryhtml5_input_placeholder](http://www.w3schools.com/html5/tryit.asp?filename=tryhtml5_input_placeholder)

当您不提交任何内容时，不会传递任何值。一旦你输入了一些东西，值就会被传递。

# plugins - 如何使用 JRuby 安装插件？

> ID：11494058
> 
> 赞同：0
> 
> 时间：2012-07-15T17:25:58.233
> 
> 标签：plugins, jqgrid, jruby

我正在尝试安装 jQuery Grid Rails 插件。我正在使用 JRuby 1.7.0。我没有运气尝试了这个命令：

```
jruby -S plugin install git://github.com/ahe/2dc_jqgrid.git
rails plugin install git://github.com/ahe/2dc_jqgrid.git 
```

还有一些...

我知道 JRuby 的一些命令发生了变化。通常我`jruby -S`会在命令前添加，但它不适用于插件安装。有什么建议吗？

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T17:01:49.150

问题解决了，我正在执行命令`jruby -S plugin install git://github.com/ahe/2dc_jqgrid.git`

错误消息说：

```
jruby: No such **file or directory** -- plugin (LoadError) 
```

您可能知道 ../script 文件夹下有一个 rails 文件，因为错误显示*No such file or directory*我想将 jruby 指向正确的目录和文件：

```
jruby script/rails plugin install git://github.com/ahe/2dc_jqgrid.git 
```

这样 jruby 就知道我需要的脚本在哪里。这对于其他 rails 命令的工作方式应该与 generate 和 server 相同。

# jquery - 在 JQuery 中编写隐藏 Div 切换的更好方法？

> ID：11494066
> 
> 赞同：4
> 
> 时间：2012-07-15T17:27:06.947
> 
> 标签：jquery

我终于找到了一种让它工作的方法，但是代码有点冗长，我相信有更好的方法来做到这一点。这是我想要的，但我想将其扩展到 10 个左右的 div 上，如果我使用这种方法，代码会很荒谬。我尝试过使用 .each() 方法，但这只会导致进一步的挫败感。如果有人能指出我正确的方向，我将不胜感激。这是我到目前为止所拥有的 jFiddle：http: [//jsfiddle.net/QbsbD/47/](http://jsfiddle.net/QbsbD/47/)

```
$(document).ready(function() {
    $('#btn1').click(function() {
        if ('#div2:visible') {
            $('#div2').hide('fast');
        }
        if ('#div3:visible') {
            $('#div3').hide('fast');
        }
        $('#div1').slideToggle("slow");
    });
    $('#btn2').click(function() {
        if ('#div1:visible') {
            $('#div1').hide('slow');
        }
        if ('#div3:visible') {
            $('#div3').hide('slow');
        }
        $('#div2').slideToggle("slow");
    });
    $('#btn3').click(function() {
        if ('#div1:visible') {
            $('#div1').slideUp('slow');
        }
        if ('#div2:visible') {
            $('#div2').slideUp('slow');
        }
        $('#div3').slideToggle("slow");
    });
});​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T17:31:00.957

我已经编辑了你的代码。现在就试试：

[http://jsfiddle.net/QbsbD/48/](http://jsfiddle.net/QbsbD/48/)

新JS：

```
$(document).ready(function() {
    $('.buttons').click(function() {
        $('.hdDivs').hide('slow');
        $('#' + $(this).attr('divid')).slideToggle("slow");
    });
});​ 
```

我在 div 和按钮之间添加了一个关联（划分），如下所示：

```
<input type="button" value="Show Div1" class="buttons" id="btn1" divid="div1" />  
<input type="button" value="Show Div2" class="buttons" id="btn2" divid="div2" />
<input type="button" value="Show Div3" class="buttons" id="btn3" divid="div3" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T17:58:02.817

**网页**：

```
<input type="button" value="Show Div1" class="buttons" data-content-id="div1"/>  
<input type="button" value="Show Div2" class="buttons" data-content-id="div2" />
<input type="button" value="Show Div3" class="buttons" data-content-id="div3" /> 
```

**JS**：

```
$('#container').on('click', '.buttons', function() {

    var content = $(this).data('contentId');
    $('.hdDivs').not('#' + content).hide('slow');
    $('#' + content).slideToggle("slow");
}); 
```

​您将使用 data attr 存储要显示的 div，然后在单击按钮时获取它。

[演示](http://jsfiddle.net/QbsbD/51/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T18:05:33.997

**你可以去点击按钮索引！**

```
$('.buttons').click(function(){
    var DIV = $('.hdDivs').eq( $(this).index() );
    DIV.is(':visible') ? DIV.slideToggle() : ($('.hdDivs').slideUp(), DIV.slideDown());
}); 
```

## *[jsFiddle 演示](http://jsfiddle.net/roXon/QbsbD/52/)*

PS ...如果您不喜欢幻灯片效果，只需将其替换为`.show('slow')`and `.hide('slow')`and `.toggle('slow')`：

```
DIV.is(':visible') ? DIV.toggle('slow') : ($('.hdDivs').hide('slow'), DIV.show('slow')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T18:12:12.293

我会使用这个功能：

```
 .siblings() 
```

在 jquery 网站上查看：http: [//api.jquery.com/siblings/](http://api.jquery.com/siblings/)

这是jsfiddle：http: [//jsfiddle.net/mcLyv/2/](http://jsfiddle.net/mcLyv/2/)

```
$(document).ready(function() {

$('.buttons').click(function() {
     var index = $(this).attr('id').substring(3);

     $('.container')
       .find('.hdDivs')
       .eq(index-1)
       .slideToggle("slow")
       .siblings()
       .hide('slow');
      });

});​ 
```

# c++ - 我的最小生成树实现中的错误

> ID：11494067
> 
> 赞同：0
> 
> 时间：2012-07-15T17:27:11.883
> 
> 标签：c++, algorithm, kruskals-algorithm

我正在尝试实现 kruskal 算法，该算法在无向加权图 G(V,E) 上找到最小生成树。我的实现使用不相交集来使算法更快。这是代码：

```
#include <stdio.h>
#include <vector>
#include <algorithm>

using std::sort;
using std::vector;

const int MAXV =  1000;

struct set_union {
  set_union *parent;
  int rank;
} *array[MAXV];

set_union* make_set() {
  set_union *ret = new set_union();
  ret->parent = NULL;
  ret->rank = 1;
  return ret;
}

set_union* find_root(set_union *u) {
  set_union *temp = u;
  while(temp->parent != NULL) {
    temp = temp->parent;
  }
  return temp;
}

void union_sets(set_union *&pa, set_union *&pb) {
  set_union *a = find_root(pa), *b = find_root(pb);
  if(a->rank > b->rank) {
    b->parent = a;
  } else if(a->rank < b->rank) {
    a->parent = b;
  } else {
    a->parent = b;
    a->rank++;
  }
}

bool same_component(set_union *a, set_union *b) {
  return find_root(a) == find_root(b);
}

struct link {
  int v;
  int w;
};

struct edge {
  int v,u;
  int w;
};

bool operator < (const edge& a, const edge& b) {
  if(a.w < b.w) { return true; }
  else { return false; }
}

struct graph {
  vector<vector<link> > adj;
  vector<edge> edges;
  int V,E;
  graph(int v) : adj(v), edges(0), V(v), E(0) {}
};

void insert(graph &g, int a, int b, int c = 1) {
  g.edges.push_back((edge) {a,b,c});
  g.adj[a].push_back((link) {b,c});
  g.adj[b].push_back((link) {a,c});
}

void kruskal(graph g, vector<edge> &tree) {
  printf("Entering kruskal\n");
  tree.clear();
  for(int i = 0; i < g.V; i++) {
    array[i] = make_set();
  }

  printf("sorting edges by weight\n");
  sort(g.edges.begin(), g.edges.end());
  int i;

  printf("Entering while\n");
  while(tree.size() < g.V-1 && i < g.E) {
    if(!same_component(array[g.edges[i].v], array[g.edges[i].u])) { /* Here is the error */
      tree.push_back(g.edges[i]);
      union_sets(array[g.edges[i].v], array[g.edges[i].u]);
     }
    i++;
  }
  printf("Exiting kruskal\n");
}

int main(void) {
  int v,e;
  scanf("%d %d", &v, &e);

  graph g(v);

  for (int i = 0; i < e; ++i) {
    int a,b,c;
    scanf("%d %d %d", &a, &b, &c);
    insert(g,a,b,c);
  }

  vector<edge> tree;
  kruskal(g,tree);

  for ( vector<edge >::iterator it = tree.begin(); it < tree.end(); ++it ) {
    printf("%d %d w = %d\n", it->v, it->u, it->w);
  }

  return 0;
} 
```

它编译没有错误，但它没有给我任何结果。例如，当我给它这个输入时：

```
3 3
0 1 1
1 2 1
2 0 2 
```

它根本不会产生任何输出。谁能帮我？提前致谢。

**编辑：**我发现我认为错误在哪里，并带有评论。由于`tree`是空的，我的结论`if(!same_component(array[g.edges[i].v], array[g.edges[i].u]))`是总是`false`。所以错误一定出在`same_component`函数上，但我无法发现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T17:57:06.997

在`kruskal()`函数中，`i`在使用`while(tree.size() < g.V-1 && i < g.E)`. 它将包含垃圾（无论是在内存中的什么），这可能会导致循环甚至不执行一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T17:53:36.003

错误在于`insert`函数。当我在图形上插入一条边时，我不会增加图形边的总数。所以 Kruscal 函数的 while 循环永远不会执行。

# c++ - 矩阵中的正行

> ID：11494068
> 
> 赞同：0
> 
> 时间：2012-07-15T17:27:14.390
> 
> 标签：c++, matrix, rows

我必须为大学做一个练习，要求我检查（k 次）矩阵是否有正行（我的意思是一行包含所有正元素），我认为 for 循环的索引有问题但我找不到错误。

我尝试使用适用于计数器的 cout 语句进行调试，它给了我“101”，所以编译器似乎将“1”分配给正行，将“0”分配给负行

这是我写的代码：

```
#include <iostream>

using namespace std;

const int N = 3;

bool positive(int a[N][N], int row[N], int x) {
    bool condition = false;

    for(int i = 0; i < N; i++) {
        row[i] = a[x][i];
    }

    int j = 0;

    while(j < N) {
        if(row[j] >= 0) {
            condition = true;
        } else {
            condition = false;
        }

        j++;

    }

    return condition;
}

bool function (int a[N][N], int z, int j, int k) {
    int b[N];
    int c[N];
    int count = 0;

    if(positive(a, b, z) && positive(a, c, j)) {
        count++;
    }

    if(count == k) {
        return true;
    } else {
        return false;
    }
}

int main() {
    int a[N][N] = {
        {
            2, 8, 6
        }, {
            -1, - 3, - 5
        }, {
            6, 10, 9
        }
    };

    int k = 2;

    for(int i = 0; i < N; i++) {
        for(int j = 0; j < N; j++) {
            if(function (a, i, j, k)) {
                cout << "OK";
            } else {
                cout << "NO";
            }

        }
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T18:31:50.820

您可能应该再看一下这个问题并使用不同的解决方案重新启动。目标很简单，但是您的代码非常复杂，其中一些并没有真正的意义。

例如，如果您有这样的矩阵：

```
 1   2   4    --> matrix A
   -1   8  -6
    3   9   2 
```

您有 N=3 行和列。根据您所说的，您唯一需要做的就是获取矩阵，循环遍历 N 行，并且对于每一行，检查它的 N 列以查看是否有任何内容 < 0。

正如您所说，这样做K次是没有意义的。每次比较时矩阵都是相同的，因为您没有更改它，为什么要多次进行比较？我认为你应该重读那里的作业简介。

至于查找哪些行是正数或负数的逻辑，只需像这样简单地做一些事情。

```
//Create array so we have one marker for each row to hold results.
bool rowPositiveFlags[N] = { true, true, true };

//Cycle through each row.
for (int row = 0; row < N; ++row)
    //Cycle through every column in the current row.
    for (int col = 0; col < N; ++col)
        //If the column is negative, set the result for this row to false and break
        //the column for loop as we don't need to check any more columns for this row.
        if (A[row][col] < 0) {
            rowPositiveFlags[row] = false;
            break;
        } 
```

您应该始终命名事物，以便您可以像阅读书一样阅读代码。你的 i's、j's 和 k's 只会让一些简单的事情变得混乱。至于问题，只需计划您的解决方案。

在纸上手工解决问题，在代码中的注释中写下步骤，然后在注释下方编写代码，这样你所做的绝对是有意义的，而且不会矫枉过正。

* * *

*这是一个很棒的网站，但是下一次，请发布一小段代码来显示您的问题。人们不应该在这里给你一个完整的家庭作业解决方案，所以不要寻找一个。只需找到索引损坏的位置并粘贴该组 5 行或任何其他错误。人们很欣赏这一点，你会得到更快、更好的答案来展示你的努力:)*

# java - 从 XML 响应中解析西班牙语字符（á、é、í、ó、ú）时出现问题

> ID：11494069
> 
> 赞同：1
> 
> 时间：2012-07-15T17:27:16.107
> 
> 标签：java, xml, string, parsing

我正在开发一个 Java 应用程序，它从互联网上调用一个 PHP，它给了我一个 XML 响应。

响应中包含这个词：“Próximo”，但是当我解析 XML 的节点并将响应获取到字符串变量中时，我收到这样的词：“Próximo”。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T17:40:26.180

[StringEscapeUtils.unescapeHTML()](http://commons.apache.org/lang/api-2.6/org/apache/commons/lang/StringEscapeUtils.html#unescapeHtml%28java.lang.String%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T18:10:10.423

可能您在 Java 应用程序中使用了不同的编码，然后是 PHP 脚本的编码。尝试设置流的编码，例如这样

```
URL oracle = new URL("http://www.yourpage.com/");
URLConnection yc = oracle.openConnection();
BufferedReader in = new BufferedReader(new InputStreamReader(
                        yc.getInputStream(),"utf-8"));//<-- here you set encoding
                                                     //to the same as in your PHP
String inputLine;
while ((inputLine = in.readLine()) != null) 
    System.out.println(inputLine); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-09T14:58:02.150

我找到了解决这个问题的方法...解析使用“ISO-8859-1”格式并使用 Html.fromHtml(string) 方法，同时将值存储到 bean 中。其中“string”是 XML 响应的每个标记内的值.

# jsf - 类文件中非本机或抽象方法中的 Tomcat 和缺失代码属性

> ID：11494071
> 
> 赞同：1
> 
> 时间：2012-07-15T17:27:22.333
> 
> 标签：jsf, jakarta-ee, tomcat7, netbeans-7, jdk1.6

我使用 Tomcat 7、JSF2.1、JSTL 1.1 JDK 1.6、EcipeLink for JPA 和 Netbeans 7.1.2

我有这个问题。javax.servlet.ServletException：类文件中非本机或抽象的方法中缺少代码属性...

我在许多论坛上读过，只是将库 JavaEE 版本 6 与我尝试导入 NetBeans 的库一起添加是行不通的。谁能告诉我怎么做提前谢谢

# dojo - AMD 和 Dojo 1.7 问题

> ID：11494072
> 
> 赞同：1
> 
> 时间：2012-07-15T17:27:31.257
> 
> 标签：dojo, amd

简单的问题。

AMD DOJO 实现是否支持这些类型的声明？

1.  文本！./plain.html

    ```
    define(["../Widget","text!./plain.html"],
      function(Widget,plain){
      return new Widget({name:"mainApp",template:plain});
    }); 
    ```

2.  加载非模块，比如 underscore.js

    ```
    require(['dir/underscore.js'], function(){
     _.reduce ...
    }); 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T20:08:42.237

是的，但是确切的语法与问题中使用的语法不同。

*   [道场装载机](http://dojotoolkit.org/reference-guide/1.7/loader/)(1.7)
    *   [插件](http://dojotoolkit.org/reference-guide/1.7/loader/amd.html#plugins)
        *   [道场/文本](http://dojotoolkit.org/reference-guide/1.7/dojo/text.html#dojo-text)

加载字符数据的插件是`dojo/text`.

加载 JavaScript 库时不应使用扩展名，并且文件的位置是通过 dojotoolkit 库的相对位置或 dojoConfig 中的*包* 位置声明设置的：

```
require(['underscore'], function( _ ){
 _.reduce ...
}); 
```

在 Dojo 配置中配置命名空间以避免混乱的导入路径 - 请参阅`dojoConfig`加载程序文档。

此外，考虑使用[dojo/global](http://dojotoolkit.org/reference-guide/1.7/dojo/global.html)模块和/或将 Dojo 模块定义为 Underscore.js 的包装器：

```
//_.js
define(['dojo/global', 'underscore'], function(global){
  return global._
}); 
```

考虑到上述考虑，您必须手动加载实际的 .js 文件。如果与 dojo/text 插件结合使用，可以创建一个包装器，该包装器还加载所需的 JS 并对其进行评估，以下可以解决问题。

/var/www/dojo-release-1.7/ext_lib/_.js - 此示例文件分层放置在库名称空间中，与 dojo、dijit、dojox 并排放置

```
define(['dojo/global', 'dojo/text!./Underscore.js'], function(global, scriptContents){
  global.eval(scriptContents);
  return global._ // '_' is the evaluated reference from window['_']
  /** 
   * Alternatively, wrap even further to maintain a closure scope thus hiding _ from global
   *  - so adapt global.eval to simply eval
   *  - remove above return statement
   *  - return a dojo declared module with a getInstance simple method
  */
  function get_ () { return _ };
  var __Underscore = declare('ext_lib._', [/*mixins - none*/], {
        getInstance: get_
  });
  // practical 'static' reference too, callable by 'ext_lib.getInstance' without creating a 'new ext_lib._'
  __Underscore.getInstance = get_;
  return __Underscore;
}); 
```

[使用 declare](https://stackoverflow.com/questions/11329163/dojo-declare-correct-way/11329956#11329956) here 定义自己的模块的示例*注意：此代码未经测试；随时添加更正。*

# php - 创建类似异步 Web 应用程序的 google wave 的技术

> ID：11494076
> 
> 赞同：0
> 
> 时间：2012-07-15T17:27:48.853
> 
> 标签：php, asynchronous, websocket, google-wave

我想尝试创建一个画布，让多个用户可以键入和编辑以进行头脑风暴等。我认为 php 作为后端。它使用了什么技术？例如，让我们说它的纯文本。我们如何更新 google wave(b4) 和 google doc 中的文本？

它只是使用 websocket（或 js 池）并更新文本文件吗？或者有没有更好的逻辑方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T17:46:46.777

Websockets 是解决这个问题的方法。但是，它们很难在 PHP 中实现，并且目前还没有许多浏览器支持。您可以使用 PHP 轻松地对 AJAX 请求进行长轮询，但这可能会非常浪费资源。

这可能不是您想要的，但我建议您更改您的服务器端技术。您可以将[Node.js](http://www.nodejs.org/)与[Socket.IO](http://socket.io/)一起使用，以轻松使用 Websockets（或在不支持它们的浏览器上无缝地模拟它们）。这将为将数据推送给您的用户提供最快的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T18:49:09.017

好吧，这并不像布拉德回答中所说的那么容易，但他是部分正确的。你今天肯定需要 WebSockets 来实现它。但从逻辑上讲，创建协作环境并不是那么简单。存在诸如将每个用户的更改广播给查看同一文档的每个其他用户之类的问题。然后，您必须确保每个用户都能看到完全相同的内容，无论谁在何时更改什么内容。当多个用户协作处理同一个文档时，这会变得很困难。合并彼此的更改时可能会发生冲突。

就 PHP 而言，语言并不是真正的问题。它是如何处理上述问题的。

Google 在 Google Wave 上发布了其研究和工程细节（我猜是在放弃该项目之后）。此链接可能对您有所帮助：[http ://www.waveprotocol.org/whitepapers/](http://www.waveprotocol.org/whitepapers/)

# c++ - 按位运行和

> ID：11494082
> 
> 赞同：-3
> 
> 时间：2012-07-15T17:28:34.500
> 
> 标签：c++, c, bitwise-and

这个问题是在采访中被问到的，有人能说出下面的代码是做什么的吗？它为 150 提供输出 15，为 160 提供 3，为 15 提供 15。它在“n”上执行什么数学运算。

```
int foo(int n) 
{
    int t,count=0;
    t=n;
    while(n)
    {
        count=count+1;
        n=(n-1)&t;
    }
    return count;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:05:29.487

它似乎在计算 number `max(n**2-1, 0)`，其中 n 是`1`数字二进制表示中的位数：

```
 0     0 0b0  
    1     1 0b1  
    2     1 0b10 
    3     3 0b11 
    4     1 0b100
    5     3 0b101
    6     3 0b110
    7     7 0b111
    8     1 0b1000
    9     3 0b1001
   10     3 0b1010
   11     7 0b1011
   12     3 0b1100
   13     7 0b1101
   14     7 0b1110
   15    15 0b1111
   16     1 0b10000
   17     3 0b10001
   18     3 0b10010
   19     7 0b10011
   20     3 0b10100
   21     7 0b10101
   22     7 0b10110
   23    15 0b10111
   24     3 0b11000
   25     7 0b11001
   26     7 0b11010
   27    15 0b11011
   28     7 0b11100
   29    15 0b11101
   30    15 0b11110
   31    31 0b11111
   32     1 0b100000
   33     3 0b100001
   34     3 0b100010
   35     7 0b100011
   36     3 0b100100
   37     7 0b100101
   38     7 0b100110
   39    15 0b100111
   40     3 0b101000
   41     7 0b101001
   42     7 0b101010
   43    15 0b101011
   44     7 0b101100
   45    15 0b101101
   46    15 0b101110
   47    31 0b101111
   48     3 0b110000
   49     7 0b110001
   50     7 0b110010
   51    15 0b110011
   52     7 0b110100
   53    15 0b110101
   54    15 0b110110
   55    31 0b110111
   56     7 0b111000
   57    15 0b111001
   58    15 0b111010
   59    31 0b111011
   60    15 0b111100
   61    31 0b111101
   62    31 0b111110
   63    63 0b111111
   64     1 0b1000000
   65     3 0b1000001
   66     3 0b1000010
   67     7 0b1000011
   68     3 0b1000100
   69     7 0b1000101
   70     7 0b1000110
   71    15 0b1000111
   72     3 0b1001000
   73     7 0b1001001
   74     7 0b1001010
   75    15 0b1001011
   76     7 0b1001100
   77    15 0b1001101
   78    15 0b1001110
   79    31 0b1001111
   80     3 0b1010000
   81     7 0b1010001
   82     7 0b1010010
   83    15 0b1010011
   84     7 0b1010100
   85    15 0b1010101
   86    15 0b1010110
   87    31 0b1010111
   88     7 0b1011000
   89    15 0b1011001
   90    15 0b1011010
   91    31 0b1011011
   92    15 0b1011100
   93    31 0b1011101
   94    31 0b1011110
   95    63 0b1011111
   96     3 0b1100000
   97     7 0b1100001
   98     7 0b1100010
   99    15 0b1100011 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:31:56.290

这是一种被称为[Brian Kernighan 的方法来计算设置位](http://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetKernighan)：

```
unsigned int v; // count the number of bits set in v
unsigned int c; // c accumulates the total bits set in v
for (c = 0; v; c++)
{
  v &= v - 1; // clear the least significant bit set
} 
```

> Brian Kernighan 的方法经历了与设置位一样多的迭代。因此，如果我们有一个仅设置了高位的 32 位字，那么它只会通过循环一次。
> 
> 1988 年出版的 C 程序设计语言第 2 版。（由 Brian W. Kernighan 和 Dennis M. Ritchie 撰写）在练习 2-9 中提到了这一点。2006 年 4 月 19 日，Don Knuth 向我指出，这种方法“由 Peter Wegner 在 CACM 3 (1960), 322 中首次发表。（也由 Derrick Lehmer 独立发现，并于 1964 年在 Beckenbach 编辑的书中发表。）”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T11:09:00.073

当函数更改为递归时，更容易找出“数学运算”：

```
int foo(int n, int t) 
{
    if( n )
        return foo( (n-1) & t ) + 1
    else
        return 0; 
} 
```

所以公式是：

```
F(0,t) = 0
F(n,t) = F( (n-1) & t, t ) + 1

foo(n) = F(n,n) 
```

我不知道，那个著名的计算公式是不是。

您可以从[math.stackexchange.com找到答案](http://math.stackexchange.com)

# ios - 在 AppStore 上更新使用 CoreData 的 iOS 应用程序

> ID：11494084
> 
> 赞同：0
> 
> 时间：2012-07-15T17:28:49.010
> 
> 标签：ios, xcode, core-data, updates

我知道关于这个主题有类似的问题，但没有什么能完全回答我的问题。我知道这是一个新手问题！

我在 AppStore 上有一个应用程序，我很快就会寻求更新。我的二进制文件包含一个预加载的 sqlite 文件，其中包含用户开始使用的数据列表。但是，用户将广泛编辑此信息，并且通过更新维护该数据至关重要。

我根本没有更改 CoreData 结构，因此不会执行任何迁移，但我担心的是，当我上传新的二进制文件时，打包的 sqlite 文件将覆盖用户现有数据。我怀疑情况并非如此，但任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T18:22:00.750

更新应用程序时，文档目录保持不变。大概您的启动代码会检查您是否已经将初始数据库从捆绑包复制到文档目录 - 这将在升级后以相同的方式工作。

无论如何，每次在开发过程中在设备上运行新版本时，您都会对此进行测试——您已经在其中放置了一个全新版本的应用程序包，它不会杀死您的所有数据，是吗？（*是吗？？？*）

# java - 如何在 Java 中创建对象列表

> ID：11494088
> 
> 赞同：6
> 
> 时间：2012-07-15T17:29:17.213
> 
> 标签：java, android

我有一个名为 MarkerCustom 的类文件。MarkerCustom 有一个构造函数，它接受三个不同类型的变量。

```
public MarkerCustom(int myInt, String, myString, BitmapData myBitmap) { 
```

从我的主要主要活动中，我想加载一个 GLSurface 视图，该视图将获取我想要加载到 GLSurface 中的每个 MarkerCustom 实例的 ArrayList 以及将传递到 MarkerCustom 构造函数的每个实例的数据。

让我们调用数组列表`myMarkers`；

我需要`myMarkers`看起来像这样：

```
myMarkers[0] = [1, "hello", bitMapData1]
myMarkers[1] = [66, "johnHandy", bitmapData2] 
```

我对 java 还很陌生，它的铸造 ect 让我有点困惑，因为我来自 AS3

**编辑**

因此，按照下面 AKhill 的回答，我编辑了我`GLSurfaceView`以接受 ArrayList，如下所示。但是需要从构造函数中该 ArrayList 中列出的每个创建类，其`MarkerCustom`方式是可以在`onSurfaceCreate``onDrawFrame``GLSurfaceView`

请参阅下面此类中的这些方法和 for 循环/注释：

```
public class GLLayer extends GLSurfaceView implements SurfaceHolder.Callback, Camera.PreviewCallback, Renderer {

    private Context context;

    ArrayList <MarkerCustom> locationTags;

    private PhoneOrientation phoneOri;

    public GLLayer(Context context, int orientation, ArrayList<MarkerCustom> custMarkers) {
        super(context);
        locationTags = custMarkers;

        this.context = context;

        phoneOri=new PhoneOrientation(context); // sensor manager and interpreter

         for(int i =0; i<locationTags.size(); i++){

            //Need to create a an instance of each MarkerCustom
            // something like MarkerCustom locationTags[i]; = new MarkerCustom (its params);
        }
        this.setEGLConfigChooser(8, 8, 8, 8, 16, 0);
        this.getHolder().setFormat(PixelFormat.TRANSLUCENT);

        this.setRenderer(this);
        phoneOri.start(context, orientation);

    }

    @Override
    public void onDrawFrame(GL10 gl) {
        gl.glEnable(GL10.GL_TEXTURE_2D);

        gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

        gl.glLoadIdentity();

        GLU.gluLookAt(gl,0, 0, 0, 0, 0, 0, 0, 0, 0);

        float floatMat[]=phoneOri.getMatrix();

        gl.glMatrixMode(GL10.GL_MODELVIEW);

        gl.glLoadMatrixf(floatMat, 0);

        for(int i=0;i<loacationTags.size();i++){
            gl.glPushMatrix();

            //locationTags[i].draw(gl);
            gl.glLoadMatrixf(floatMat,0);
        }

         gl.glPushMatrix();

    }

    @Override
    public void onSurfaceChanged(GL10 gl, int width, int height) {
      if(height == 0) {                    
        height = 1;                         
        }
        float ratio = (float) width / height;
        gl.glViewport(0, 0, width, height);     
        gl.glMatrixMode(GL10.GL_PROJECTION);    
        gl.glLoadIdentity();                    

        GLU.gluPerspective(gl, 35.0f, (float)width / (float)height, 5.0f, 200.0f);
        gl.glMatrixMode(GL10.GL_MODELVIEW);     
        gl.glLoadIdentity();                    

        GLU.gluLookAt(gl, 0, 1.0f, 5.0f, 0, 0, 0, 0, 1.0f, 0);

    }

    @Override
    public void onSurfaceCreated(GL10 gl, EGLConfig arg1) {

        for(int i=0;i<locationTags.size();i++){
            //call each MarkerCustom's loadGLTexture Method
                //locationTags[i].loadGLTexture(gl, this.context);
        }

        gl.glEnable(GL10.GL_TEXTURE_2D);            
        gl.glShadeModel(GL10.GL_SMOOTH);            
        gl.glClearColor(0.0f, 0.0f, 0.0f, 0.0f);    
        gl.glClearDepthf(1.0f);                     
        gl.glEnable(GL10.GL_DEPTH_TEST);           
        gl.glDepthFunc(GL10.GL_LEQUAL);             

        gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_SMOOTH);

    }

    @Override
    public void onPreviewFrame(byte[] data, Camera camera) {

    }

} 
```

**仅供参考这里是我的`MarkerCustom`课**

```
public class MarkerCustom {

    public float xPos;
    public float yPos;
    public float zPos;
    public float yaw;
    public float pitch;
    public Bitmap tagImage;

    private FloatBuffer vertexBuffer;   // buffer holding the vertices
    private float vertices[] = {
            0.0f, -10.0f, -10.0f,        // V1 - bottom left
            0.0f, -10.0f, 10.0f,        // V2 - top left
            0.0f, 10.0f, -10.0f,        // V3 - bottom right
            0.0f, 10.0f, 10.0f         // V4 - top right

    };

    private FloatBuffer textureBuffer;  // buffer holding the texture coordinates
    private float texture[] = {
            // Mapping coordinates for the vertices
            0.0f, 1.0f,     // top left     (V2)
            0.0f, 0.0f,     // bottom left  (V1)
            1.0f, 1.0f,     // top right    (V4)
            1.0f, 0.0f      // bottom right (V3)

    };

    public MarkerCustom(float x, float y, float z, float yawAngle, float pitchAngle, Bitmap bitmap) {

        xPos = x;
        yPos = y;
        zPos = z;
        yaw = yawAngle;
        pitch = pitchAngle;
        tagImage = bitmap;

        ByteBuffer byteBuffer = ByteBuffer.allocateDirect(vertices.length * 4);
        byteBuffer.order(ByteOrder.nativeOrder());
        vertexBuffer = byteBuffer.asFloatBuffer();
        vertexBuffer.put(vertices);
        vertexBuffer.position(0);

        byteBuffer = ByteBuffer.allocateDirect(texture.length * 4);
        byteBuffer.order(ByteOrder.nativeOrder());
        textureBuffer = byteBuffer.asFloatBuffer();
        textureBuffer.put(texture);
        textureBuffer.position(0);

    }
    /** The texture pointer */
    private int[] textures = new int[1];

    public void loadGLTexture(GL10 gl, Context context) {
        // loading texture
        // Enable blending using premultiplied alpha.
        gl.glEnable(GL10.GL_BLEND);
        gl.glBlendFunc(GL10.GL_ONE, GL10.GL_ONE_MINUS_SRC_ALPHA);

        // generate one texture pointer
        gl.glGenTextures(1, textures, 0);
        // ...and bind it to our array
        gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);

        // create nearest filtered texture
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_NEAREST);
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);

        // Use Android GLUtils to specify a two-dimensional texture image from our bitmap
        GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, tagImage, 0);

        // Clean up
        tagImage.recycle();
    }
    public void draw(GL10 gl) {
        // bind the previously generated texture
        gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);

        // Point to our buffers
        gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
        gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);

        // Set the face rotation
        gl.glFrontFace(GL10.GL_CW);

        // Point to our vertex buffer
        gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertexBuffer);
        gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, textureBuffer);

        // Draw the vertices as triangle strip
        gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, vertices.length / 3);

        //Disable the client state before leaving
        gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
        gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY);

    }

} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-15T17:31:24.543

试试这个。

```
List<MarkerCustom> myList=new ArrayList<MarkerCustom>();
MarkerCustom entry1=new MarkerCustom(myInt, myString, myBitmap);
MarkerCustom entry2=new MarkerCustom(myInt, myString, myBitmap);

myList.add(entry1);
myList.add(entry2); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-15T17:37:57.830

速记：

```
List<MarkerCustom> markerList = Arrays.asList(
    new MarkerCustom(1, "hello", bitMapData1),
    new MarkerCustom(66, "johnHandy", bitMapData2))
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T17:38:20.683

在这种情况下，我认为创建一个具有三个属性的类 Marker（例如）更容易。例如：

```
class Marker {

int var1;
String var2;
BitmapData var3; } 
```

这样，您就可以存储标记的 ArrayList (ArrayList)，并且可以访问所需的所有信息。

# php - Yii 中的分页

> ID：11494089
> 
> 赞同：0
> 
> 时间：2012-07-15T17:29:22.660
> 
> 标签：php, pagination, yii

我正在实现一个带有分页的简单小部件，但遇到了一个小问题。

当我在页面上有少量项目时，不会生成分页，但是当我有很多项目时，一切都很好。

问题是：如何强制分页呈现，即使只有一页有记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:53:44.700

您基本上只需在数据提供者/活动记录上指定页面大小

```
 $model = new CArrayDataProvider( $dataRow, 
             array('pagination'=> array('pageSize'=>5) )); 
```

# java - JavaMail - 如何显示邮件内容？

> ID：11494092
> 
> 赞同：2
> 
> 时间：2012-07-15T17:30:47.620
> 
> 标签：java, jakarta-mail

所以，我想实际显示从 JavaMail 获得的电子邮件（消息对象）的内容。我怎么能这样做呢？

注意：我不希望能够查看嵌入式视频等，只显示带有图片的电子邮件，最好在 JEditorPane、JTextPane 或 JPanel 中显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T22:22:26.400

JavaMail 带有一个简单的客户端应用程序，如果您想自己完成所有工作，它可以帮助您入门。您可能还想查看[JavaMail 第三方产品](http://www.oracle.com/technetwork/java/javamail/third-party-136965.html)列表中的一些开源项目；其中一些可能具有您可以重用或至少用于指导的代码。

# php - PHP IDE：如何调用该功能

> ID：11494096
> 
> 赞同：0
> 
> 时间：2012-07-15T17:31:03.703
> 
> 标签：php, php-ide

当您的光标位于您的某些方法上并按下（例如）Ctrl + MOUSE CLICK 时，请如何在 IDE 中调用该功能，您将被移至该方法的源代码（我确信 PhpEd 有它）..我正在寻找一些具有此功能的 MAC 的 PHP IDE，但我一无所获：// 我尝试了 Aptana、NetBeans 但缺少此功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T17:39:09.250

它可能被称为`Go to definition/declaration`

# php - 如何在php中每1000个字符换行字符串的单词

> ID：11494101
> 
> 赞同：-4
> 
> 时间：2012-07-15T17:31:39.287
> 
> 标签：php, regex, arrays, preg-replace

我有一些大字符串，以及一些必须用一些更改替换的单词数组，比如包装在链接中。第一个问题是包装整个单词或组合单词。第二个问题是每 1000 个字符至少执行上一步。

```
$string="lalala word lalala blah, blah lalala combination of words lalala lalala...";  
$patterns=array('word','combination of words');  
$replacements=array('<a href="#">word</a>','<a href="#">combination of words</a>'); 
```

例如，我之前必须对片段做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T20:23:52.710

在我看来，您正在寻找[`wordwrap()`](http://us.php.net/manual/en/function.wordwrap.php). 然后，您可以[`preg_replace_callback()`](http://us.php.net/manual/en/function.preg-replace-callback.php)将其应用于您的搜索模式并进行替换：

```
foreach ($patterns as $pattern) {
    $regex = '/' . preg_quote($pattern, '/') . '/';
    $string = preg_replace_callback($regex, function($match) {
        return '<a href="#">'
            . wordwrap(htmlspecialchars($match), 1000, '<br />')
            . '</a>';
    }, $string);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:40:25.247

解决方案：

```
 <?php
        function set_keys_by_words($content, $key, $words,$before,$after) {
        $positions = array();
        $string = '';
        for ($i = 0; $i < count($words); $i++) {

            $string = preg_replace('/\b' . $words[$i] . '\b/ui', $key . $words[$i], $content);
            $position = mb_strpos($string, $key);

            if ($position != '') {
                $positions[(int) $position] = $words[$i];
            }
        }
        ksort($positions);
        $word = '';
        $number = '';
        $i = 0;
        foreach ($positions as $k => $v) {
            $i++;
            if ($i == 1) {
                $number = $k;
                $word = $v;
            }
        }
        if ((int) $number) {
            $word_len = strlen($word);
            $part_after = preg_replace('/\b' . $word . '\b/ui', $before . $word . $after, mb_substr($content, 0, $number + $word_len));
            echo $part_after . mb_substr($content, $number + $word_len, 1000);
            $content = mb_substr($content, $number + $word_len + 1000);
            if ($content != '') {
                set_keys_by_words($content, $key, $words);
            }
        } else if ($number == '' && $content != '') {
            echo $content;
        }
    }
    ?> 
```

# php - 我怎样才能用 , 和 | 爆炸字符串

> ID：11494103
> 
> 赞同：0
> 
> 时间：2012-07-15T17:31:56.590
> 
> 标签：php, explode

我怎么能爆炸这个？`mars@email.com,123,12,1|art@hur.com,321,32,2`

输出应该是：

```
$email = mars@email.com
$score = 123
$street = 12
$rank = 1 
```

然后删除`|`

```
$email = art@hur.com
$score = 321
$street = 32
$rank = 2

$string = mars@email.com,123,12,1|art@hur.com,321,32,2
explode( ',', $string ); 
```

那是对的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T17:34:53.510

```
 foreach(explode('|', $str) as $v){
     $data = explode(',',$v);
     echo '$email = '.$data[0].
     '$score = '.$data[1].
     '$street = '.$data[2].
     '$rank = '.$data[3];
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T17:34:15.463

您可能想要使用 strtok() 而不是 explode()。

[http://www.php.net/manual/en/function.strtok.php](http://www.php.net/manual/en/function.strtok.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T17:40:40.813

```
$arr = preg_split( '"[,|]"', 'mars@email.com,123,12,1|art@hur.com,321,32,2' );
$len = count($arr);
for( $i = 0; $i < $len; $i+=4 ) {
    $email = $arr[$i];
    $score = $arr[$i+1];
    $street = $arr[$i+2];
    $rank = $arr[$i+3];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T17:49:48.400

我想你想要的是这样的

```
 $output = array();

foreach (explode('|', $string) as $person) {
    $output[] = array(
        'email'   =>    $person[0],
        'score'   =>    $person[1],
        'street'  =>    $person[2],
        'rank'    =>    $person[3]
    )
} 
```

这会将所有结果存储在一个多维数组中。例如，要打印人员 1 的电子邮件，您可以使用

```
echo $output[0]['email'];   // mars@email.com 
```

并访问人 2 的街道，你会使用

```
echo $output[1]['street'];   // 32 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-15T17:34:25.390

您需要将新数组存储在变量中 >

```
$arr = explode(',',$string); 
```

我没有得到你想要对第二部分做的事情（在 之后`|`），但你可以通过这样做获得第一个标准 >`$half = explode('|',$string)[0];`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-15T17:35:51.910

你需要以正确的顺序解开它：

*   首先是由分隔的块`|`

*   然后各个单元格由`,`

一个简洁的方法是：

```
$array = array_map("str_getcsv", explode("|", $data)); 
```

会给你一个二维数组。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-15T17:36:42.813

使用 strtok 和爆炸。

```
$tok = strtok($string, "|");

while ($tok !== false) {
    list($email, $score, $street, $rank) = explode(',', $tok);
    $tok = strtok(",");
} 
```

# c# - C# - 使用 Awesomium 与 Gmail 交互

> ID：11494105
> 
> 赞同：3
> 
> 时间：2012-07-15T17:32:47.137
> 
> 标签：c#, awesomium

我可以导航到 gmail，但是我想做一些简单的事情，比如输入凭据并单击登录按钮。

```
private void btnSubmit_Click(object sender, EventArgs e)
{       
    btnSubmit.Enabled = false;        
    webGmail.LoadURL("http://www.gmail.com");

    webGmail.LoadCompleted += ExecuteSomething;
}

private void ExecuteSomething(object sender, EventArgs eventArgs)
{
    webGmail.ExecuteJavascript(@"<script src = 'http://code.jquery.com/jquery-latest.min.js' type = 'text/javascript'></script>");
    webGmail.ExecuteJavascript(@"$('#Email').val('foo');");
    webGmail.ExecuteJavascript(@"$('#Passwd').val('bar');");
    webGmail.ExecuteJavascript(@"$('#signIn').click();");
} 
```

什么都没发生。我知道在 Chrome 中使用开发人员工具时，您无法修改页面上的任何内容。但是有没有填写表格的方法？

**还有其他更好的无头浏览器吗？我实际上需要一个支持 Web 控件的控件，我可以将其放入我的表单中，这样我就可以看到正在发生的事情。这是强制性的**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:51:56.047

问题是脚本标签不是 javascript - 它是 HTML - 所以作为 javascript 执行它只会引发错误。要使用 ExecuteJavascript 方法加载脚本，您需要在 javascript 中创建一个脚本元素并将其注入页面头部。

见这里的例子： [http ://www.kobashicomputing.com/injecting-jquery-into-awesomium](http://www.kobashicomputing.com/injecting-jquery-into-awesomium)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T22:41:21.410

我最近遇到了一个类似的问题。我试过cefsharp、awesomium、open-webkit-sharp、geckofx。奇怪的是，最先进的是WebBrowser。它允许您直接使用 C# 执行几乎所有活动。例如，单击 C# 中的提交按钮，您只能在 WebBrowser 中。如果您仍想使用替代引擎，我推荐 open-webkit-sharp - 它是其中最先进的（尽管单击按钮也有同样的问题）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T13:46:11.113

WatiN 有一个基于 Awesomium 的 Webkit 的 Javascript 实现，源代码是免费的，可以在他们的主页上下载。祝你好运。

也许这个问题也可以帮助你，[使用 awesomium 从 c# 调用 Javascript](https://stackoverflow.com/questions/9762876/calling-javascript-from-c-sharp-using-awesomium)。

# php - XPath 查询有时未显示正确的元素

> ID：11494106
> 
> 赞同：3
> 
> 时间：2012-07-15T17:33:25.290
> 
> 标签：php, xpath

我正在使用 XPath，这是我的查询：

```
$elements = $xpath->query('//div/div/div/div/div/div[@id="con1"]/table/tr/td'); 
```

一切正常。

然后我在中更改条件，`div`查询是这样的：

```
$elements = $xpath->query('//div/div/div/div/div/div[@id="con2"]/table/tr/td'); 
```

我确实看到了我必须看到的。

但后来，如果我这样做：

```
$elements = $xpath->query('//div/div/div/div/div/div[@id="con1" or @id="con2"]/table/tr/td'); 
```

我再次看到的只是`con1`. 这是为什么？

完整代码如下：

```
$elements = $xpath->query('//div/div/div/div/div/div[@id="con1" or @id="con2"]/table/tr/td');
foreach ( $elements as $element ) {
    $str1=$element->getAttribute('class');
    $str2="first-td";
    $str3="status";
    if (strcmp($str1,$str2)==0) {
        var_dump( $element->nodeValue);
    }
    if (strcmp($str1,$str3)==0) {
        echo $element->childNodes->item(0)->getAttribute('class'). "<br />"; 
    }
} 
```

总结一下：如果我的条件是 only `con1`，我会看到正确的结果。如果只是`con2`，我会看到正确的结果。当我使用`or`. 在这种情况下，我只看到来自`con1`. 就像它在满足第一个条件后停止。它们与 DOM 树处于同一级别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:27:27.943

您正在尝试做的是在同一个表达式中检索`<div id="con1">`and `<div id="con2">`，但您实际上正在做的是检索具有属性*id="con1"*或*id="con2"的**div*。条件的第一个表达式返回真，然后你得到节点。这说得通。**`<div id="con1">`**

 **要获得两个节点，您需要以下内容：

```
//div[@id="con1"]|//div[@id="con2" 
```

注意：`//div[@id="con1"]`查找`<div id="con1">`树中的任何节点，并且`id`文档中的 必须是唯一的。没有必要指定所有向下的路径。**

# asp.net-web-api - 如何在 WebApi 中获取 HttpRequestMessage 而不是 HttpContext.Current

> ID：11494108
> 
> 赞同：5
> 
> 时间：2012-07-15T17:33:51.443
> 
> 标签：asp.net-web-api

我发现有几个来源说你不应该在 WebApi 中使用 HttpContext.Current，但没有一个说你应该如何处理我们过去使用 HttpContext.Current 的情况。

例如，我有一个为对象创建链接的 LinkProvider 类。（简化以保持主题）。

```
public abstract class LinkProvider<T> : ILinkProvider<T>
{
  protected ILink CreateLink(string linkRelation, string routeName, RouteValueDictionary routeValues)
  {
    var context = System.Web.HttpContext.Current.Request.RequestContext;

    var urlHelper = new System.Web.Mvc.UrlHelper(context);
    var url = string.Format("{0}{1}", context.HttpContext.Request.Url.GetLeftPart(UriPartial.Authority), urlHelper.RouteUrl(routeName, routeValues));

    ///...

    return new Link(linkRelation, url);
  }
} 
```

并且此类由 MediaTypeFormatter 使用。

此类预计将使用来自原始请求的同一主机构建链接，并利用原始请求中的任何路由值。

但是...我如何获得 HttpRequestMessage？这将由 MediaTypeFormatter 封装 - 但它也没有。

必须有一种简单的方法来获取 HttpRequestMessage - 我忽略了什么？

谢谢

乔恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T19:02:01.103

我最终创建了以下公开请求的基本格式化程序，现在我可以将它传递给 LinkProvider。

```
public class JsonMediaTypeFormatterBase : JsonMediaTypeFormatter
{

  public override MediaTypeFormatter GetPerRequestFormatterInstance(Type type, System.Net.Http.HttpRequestMessage request, MediaTypeHeaderValue mediaType)
  {
    Request = request;
    return base.GetPerRequestFormatterInstance(type, request, mediaType);
  }

  protected HttpRequestMessage Request
  {
    get;
    set;
  }
} 
```

# iphone - 使用 Xcode 4 以美观实用的方式在应用程序中调整 UILabels 和 UIImageViews

> ID：11494116
> 
> 赞同：0
> 
> 时间：2012-07-15T17:34:53.033
> 
> 标签：iphone, xcode, image, view, label

当我将图像和标签加载到我的 DetailViewController 时，有时我填充标签的某些字符串包含比其他字符串更多的单词/更长的句子，并且必须显示一个额外的行来显示整个标签。如果是这样，我希望它下面的标签“向下移动”，以便为上面标签的额外行腾出空间，如果你明白我的意思！与图像相同：如果图像（例如在标题标题下）小于其他图像，则会在图像和文本之间留下很大的差距。

从现在到那时，我也遇到了类似的调整问题，我相信其他初学者也有这些问题。我也确信有办法处理它，所以我不必仅仅因为一个对象在字符串中包含更多的单词和不同的图像尺寸而制作一个全新的 ViewController。

有没有我可以用来处理这种改编的代码，或者我可以在情节提要中进行吗？感谢您提供有关该主题的更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T18:04:50.663

在这些情况下，我以编程方式更改布局。然后 IB 只是一些用于定义它们的工作辅助工具和一个预览工具，对原型和测量视图项的尺寸很有用。

当我的应用程序支持横向和纵向时，我也会这样做。

只有当表格单元格由于对文本和图像项的各个大小的反应而具有不同的高度时，它才会变得有点棘手。然后布局日志分布在两个类中。自定义单元格负责布局单元格的内容，而表格视图控制器中的一些方法负责提供每个单元格的高度。但尽管如此，它几乎是直截了当的。

# android - 我安装了Eclipse ADT，没有任何错误信息，但是重启后，我看不到任何Android插件

> ID：11494117
> 
> 赞同：2
> 
> 时间：2012-07-15T17:35:02.330
> 
> 标签：android, eclipse-plugin, eclipse-adt

我已经用 Eclipse Indigo 开发了半年的 Android 应用程序，没有任何问题。但是，自从我两天前更新到最新版本的 Android SDK 后，事情就开始出错了。我不得不不断地手动进行 Project->Clean 以避免不公平的语法错误，而且一直没有理由。更糟糕的是，我开始在使用导出向导签署最终 APK 时遇到很多麻烦。

所以我决定完全删除 eclipse 并重新安装最新版本 Juno 以及 Android SDK 和 Android ADT 插件。我的问题是，现在我全新的 Eclipse 安装在安装 Android ADT 插件后没有显示任何 Android 选项。

每当我启动 Eclipse 时，都会出现以下错误日志，但我不知道它是否相关：

```
!ENTRY org.eclipse.ui 2 2 2012-07-15 18:14:31.879
!MESSAGE Invalid property category path: ValidationPropertiesPage (bundle: org.eclipse.wst.xml.ui, propertyPage: org.eclipse.wst.xml.ui.propertyPage.project.validation)
!SESSION 2012-07-15 18:14:49.877 -----------------------------------------------
eclipse.buildId=I20120608-1400
java.version=1.5.0_30
java.vendor=Apple Inc.
BootLoader constants: OS=macosx, ARCH=x86, WS=cocoa, NL=es_ES
Framework arguments:  -keyring /Users/XXX/.eclipse_keyring -showlocation
Command-line arguments:  -os macosx -ws cocoa -arch x86 -keyring /Users/XXX/.eclipse_keyring -showlocation

!ENTRY org.eclipse.core.net 1 0 2012-07-15 18:14:53.885
!MESSAGE System property http.nonProxyHosts has been set to local|*.local|169.254/16|*.169.254/16 by an external source. This value will be overwritten using the values from the preferences 
```

我的系统：

MacBookPro MacOS 10.5.8、Eclipse Classic Juno（最新版本）、Android SDK（最新版本）、Eclipse ADT 插件（从 eclipse 本身安装但没有结果）

**编辑**

如果我检查 Eclipse->About->Installation Details->Plug-ins 或 Eclipse->About->Installation Details->Features，则没有 Android 插件应用程序，它应该。但是，它出现在 Eclipse->About->Installation Details-Installed Software 和 Eclipse->About->Installation Details->Installation History 中。另外，如果我去帮助->安装新软件->ADT插件->开发者工具，我得到以下输出：

```
Cannot complete the request.  See the error log for details.
"Tracer for OpenGL ES" will be ignored because it is already installed.
"Android Traceview" will be ignored because it is already installed.
"Android Hierarchy Viewer" will be ignored because it is already installed.
"Android Development Tools" will be ignored because it is already installed.
"Android DDMS" will be ignored because it is already installed. 
```

如果我不能在Eclipse中删除一个插件，我怎么知道安装插件有什么问题？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T00:40:07.837

最后我解决了。

我看到最新版本的 Android SDK（20，让我抓狂的那个）至少需要 MacOS v10.5.8 和 JVM v1.6。对我来说，这没有任何意义，因为 MacOS 的官方 JVM v1.6 更新包需要 v10.6，而不是 v10.5.8，所以我将整个操作系统更新到 10.6，最后一切正常：Eclipse Juno for Mobile Developers + JVM v1.6 + Eclipse ADT + Android SDK v20。

这很奇怪，因为谷歌文档说之前版本的 Android SDK 也需要 JVM v1.6，但我用 v1.5 使用了几个月，完全没有问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T18:24:33.350

当您升级您的 SDK 时，您可能还需要升级您的 ADT 插件。您可以通过转到帮助 > 检查更新来检查是否有插件更新。

Juno 是一个全新的 Eclipse 版本，我不知道它是否（完全）与 ADT 兼容，或者是否会有更新。无论如何，我还不会使用它并且会坚持使用 Indigo。

只要确保您安装了最新的 SDK 和最新的 ADT，否则您会看到像您描述的奇怪问题。

# amazon-web-services - 是否可以将 CloudFront 限制在特定区域？

> ID：11494118
> 
> 赞同：3
> 
> 时间：2012-07-15T17:35:12.893
> 
> 标签：amazon-web-services, amazon-cloudfront

我在 S3 存储桶上使用 CloudFront，主要是为了帮助我降低托管费用。

S3 上的 10000 个 HTTP 请求在美国标准区域花费 0.01 美元，在 CloudFront 的美国区域花费 0.0075 美元。

我看到 CloudFront 自动使用离最终用户最近的区域，因此我看到在某些情况下大量使用了一些昂贵的区域，例如南美、亚洲、澳大利亚等。这是有道理的，因为 CloudFront 的想法是减少加载时间。

关键是，我最初希望将成本降低到我几乎无法达到的水平，而且——可能只看我的数字——我最终可能会支付比以前更多的钱。

我的问题是。有什么办法可以将 CloudFront 的可用性限制在美国区域，这样每个人都会默认使用它？

我阅读了他们的[常见问题解答](http://aws.amazon.com/cloudfront/faqs/)，但找不到任何相关信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T06:37:41.167

> “我看到 CloudFront 自动使用离最终用户最近的区域”

你在这里混淆了你的信息。CloudFront 自动使用离最终用户最近的*边缘站点。*

S3 存储桶仅存在于单个区域中。如果您告诉 CloudFront 为区域中的 S3 存储桶创建分配`us-east-1`，则 CloudFront 将始终从该区域中的该存储桶中提取。

CloudFront 然后将数据从该区域锁定的存储桶*复制*到离最终用户更近的*边缘站点。*

这样，您只需支付存储桶所在区域的 S3 成本，再加上 CloudFront 成本。

有道理？

# c++ - OpenCV 2.4.2 中的错误“OpenCV 错误：错误标志”

> ID：11494119
> 
> 赞同：5
> 
> 时间：2012-07-15T17:35:38.333
> 
> 标签：c++, macos, opencv, computer-vision, homebrew

我刚开始尝试使用 OpenCV，并从一本非常简单的书中编写了一个小程序。问题是当我尝试编译它时，我得到了这个错误。我会给你我所有的信息。我使用 Mac OS X 10.7 的自制软件安装了 openCV。

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>

int main(int argc, char *argv[])
{
cv::Mat image = cv::imread("usf.gif");
cv::namedWindow("My Image");
cv::imshow("My Image", image);
cv::waitKey(5000);

return 1;
} 
```

我编译喜欢这个：

```
g++ -o test opencvtest.cc -lopencv_core -lopencv_imgproc -lopencv_calib3d -lopencv_video -lopencv_features2d -lopencv_ml -lopencv_highgui -lopencv_objdetect -lopencv_contrib -lopencv_legacy 
```

这就是我尝试运行它时得到的结果。

```
OpenCV Error: Bad flag (parameter or structure field) (Unrecognized or unsupported array type) in cvGetMat, file /tmp/homebrew-opencv-2.4.2-oQmu/OpenCV-2.4.2/modules/core/src/array.cpp, line 2482
terminate called throwing an exceptionAbort trap: 6 
```

再次感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-15T17:48:41.067

那是因为 OpenCV 不支持**gif**：

> 函数 imread 从指定文件加载图像并返回。如果无法读取图像（由于缺少文件、权限不当、格式不支持或无效），该函数返回空矩阵（ Mat::data==NULL ）。目前支持以下文件格式：
> 
> Windows 位图 - *.bmp、*.dib（始终支持）
> 
> JPEG 文件 - *.jpeg、*.jpg、*.jpe（见注 2）
> 
> JPEG 2000 文件 - *.jp2（见注 2）
> 
> 便携式网络图形 - *.png（见注 2）
> 
> 便携式图像格式 - *.pbm、*.pgm、*.ppm（始终支持）
> 
> 太阳栅格 - *.sr、*.ras（始终支持）
> 
> TIFF 文件 - *.tiff、*.tif（见注 2）

请参阅[文档](http://opencv.willowgarage.com/documentation/cpp/reading_and_writing_images_and_video.html#cv-imread)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T17:52:20.527

我认为不支持“gifs”

# monodevelop - Monodevelop 中的 Visual-studio 风格页面导航

> ID：11494121
> 
> 赞同：1
> 
> 时间：2012-07-15T17:35:46.947
> 
> 标签：monodevelop

当我通过 MonoDevelop 中打开的脚本文件进行控制选项卡时，我希望它模拟 Visual Studio 的行为。也就是说，当我释放 control-tab 时，下一次按下 control-tab 时，它会将我带到我离开的第一页。

例如，假设我有文档 A 到 Z。我从文档 A 开始，按住控制并在它通过 B、C、D、E、F 时点击“选项卡”。然后我释放控制。现在我再次按下控制，点击“选项卡”，它显示的下一页是 G。我想要发生的是它显示 A，因为那是我之前正在查看的页面。

这就是 Visual Studio 的工作方式，它使遍历代码变得更加容易。有人知道在 Monodevelop 中进行这项工作的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T19:44:54.687

此功能适用于我的 mac (10.5.8) 上运行的版本 2.8.8.4。

干杯

# boost - 无法将 boost 文件系统与 Qt 创建者链接

> ID：11494124
> 
> 赞同：0
> 
> 时间：2012-07-15T17:36:05.277
> 
> 标签：boost, linker, qmake

我需要使用 boost 文件系统，但在 windows(cl 2010 express) 下我有一些链接器错误。我使用 Qt creator 和 qmake 并且不明确链接。我唯一的想法是提供包含和 lib 路径

```
win32 {

    BOOSTHOME = C:/boost

    INCLUDEPATH += $$BOOSTHOME\\boost_1_47

    LIBS += -L$$BOOSTHOME\\boost_1_47\\lib
} 
```

当我尝试构建时，出现此错误：

```
main.obj:-1: error: LNK2019: unresolved external symbol "private: static class std::codecvt<unsigned short,char,int> const * & __cdecl boost::filesystem3::path::wchar_t_codecvt_facet(void)" (?wchar_t_codecvt_facet@path@filesystem3@boost@@CAAAPBV?$codecvt@GDH@std@@XZ) referenced in function "public: static class std::codecvt<unsigned short,char,int> const & __cdecl boost::filesystem3::path::codecvt(void)" (?codecvt@path@filesystem3@boost@@SAABV?$codecvt@GDH@std@@XZ) 
```

我还有两个，类似的。我与 libarchive 有类似的问题，但是当我动态链接时一切都很好我必须做什么才能正确链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:34:01.060

对于 windows 和 msvc 2010 编译器必须添加定义

```
DEFINES += BOOST_ALL_NO_LIB 
```

然后将您的boost lib与

```
LIBS += -lyourboostlib 
```

# ruby-on-rails - Mongoid 3 + Heroku (MongoHQ) 导致 Moped::Errors::OperationFailure

> ID：11494134
> 
> 赞同：36
> 
> 时间：2012-07-15T17:37:27.777
> 
> 标签：ruby-on-rails, mongodb, heroku, mongoid, mongohq

使用 Rails 3，从 Mongoid 2.x 升级到 Mongoid 3.x 后，我的 Heroku + MongoHQ 设置停止工作。有趣的是，我的开发和测试框架以及我的整个测试套件都通过了。

我怀疑问题出在我的 mongoid.yml 文件上，但我尝试搜索文档、google 和 stackoverflow，并使用了所有建议的格式，包括：[heroku mongohq 和 mongoid Mongo::ConnectionFailure](https://stackoverflow.com/questions/2784417/heroku-mongohq-and-mongoid-mongoconnectionfailure)或者实际上是这个：[https：/ /gist.github.com/2900804](https://gist.github.com/2900804)

**7 月 16 日更新：**这是我的 mongoid.yml 文件的外观，在尝试了多种方法之后 +**在 MongoHQ 的 Jason 建议之后**：

```
development:
  sessions:
    default:
      database: development
      hosts:
        - localhost:27017

test:
  sessions:
    default:
      database: test
      hosts:
        - localhost:27017

production:
  sessions:
    default:
      uri: <%= ENV['MONGOHQ_URL'] %>
      options:
        skip_version_check: true
        safe: true 
```

（据我了解，它与上面链接中的基本相同，除了它使用 uri；我尝试了另一种方式，也将 MONGOHQ_URL 拆分为单独的字段，但没有帮助）

我尝试将 mongoid 设置为 3.0.0rc 并在我的 Gemfile 中将版本留空。由于HTTPS证书什么的，使用github版本失败，所以我没有费心尝试多次。

动作控制器说的是：

```
Moped::Errors::OperationFailure in Home#index

Showing /app/app/views/home/index.html.haml where line #2 raised:

The operation: #<Moped::Protocol::Command
  @length=68
  @request_id=4
  @response_to=0
  @op_code=2004
  @flags=[:slave_ok]
  @full_collection_name=".$cmd"
  @skip=0
  @limit=-1
  @selector={:count=>:posts, :query=>{}}
  @fields=nil>
failed with error "db assertion failure" 
```

当我跑步时

```
heroku run console 
```

..我明白了：

```
irb(main):052:0> Location.create!
NoMethodError: undefined method `[]' for nil:NilClass
    from /app/vendor/bundle/ruby/1.9.1/gems/moped-1.1.1/lib/moped/node.rb:74:in `block in command'
    from /app/vendor/bundle/ruby/1.9.1/gems/moped-1.1.1/lib/moped/node.rb:522:in `[]'
    from /app/vendor/bundle/ruby/1.9.1/gems/moped-1.1.1/lib/moped/node.rb:522:in `block (3 levels) in flush'
    from /app/vendor/bundle/ruby/1.9.1/gems/moped-1.1.1/lib/moped/node.rb:521:in `map'
    from /app/vendor/bundle/ruby/1.9.1/gems/moped-1.1.1/lib/moped/node.rb:521:in `block (2 levels) in flush'
    from /app/vendor/bundle/ruby/1.9.1/gems/moped-1.1.1/lib/moped/node.rb:113:in `ensure_connected'
    from /app/vendor/bundle/ruby/1.9.1/gems/moped-1.1.1/lib/moped/node.rb:517:in `block in flush'
    from /app/vendor/bundle/ruby/1.9.1/gems/moped-1.1.1/lib/moped/node.rb:532:in `logging'
    from /app/vendor/bundle/ruby/1.9.1/gems/moped-1.1.1/lib/moped/node.rb:516:in `flush'
    from /app/vendor/bundle/ruby/1.9.1/gems/moped-1.1.1/lib/moped/node.rb:505:in `process'
    from /app/vendor/bundle/ruby/1.9.1/gems/moped-1.1.1/lib/moped/node.rb:70:in `command'
    from /app/vendor/bundle/ruby/1.9.1/gems/moped-1.1.1/lib/moped/node.rb:356:in `refresh'
    from /app/vendor/bundle/ruby/1.9.1/gems/moped-1.1.1/lib/moped/cluster.rb:101:in `block in refresh'
    from /app/vendor/bundle/ruby/1.9.1/gems/moped-1.1.1/lib/moped/cluster.rb:114:in `each'
    from /app/vendor/bundle/ruby/1.9.1/gems/moped-1.1.1/lib/moped/cluster.rb:114:in `refresh'
    from /app/vendor/bundle/ruby/1.9.1/gems/moped-1.1.1/lib/moped/cluster.rb:67:in `nodes'
... 15 levels...
    from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:405:in `__run_callback'
    from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
    from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:81:in `run_callbacks'
    from /app/vendor/bundle/ruby/1.9.1/gems/mongoid-3.0.1/lib/mongoid/callbacks.rb:98:in `run_callbacks'
    from /app/vendor/bundle/ruby/1.9.1/gems/mongoid-3.0.1/lib/mongoid/persistence/insertion.rb:23:in `prepare'
    from /app/vendor/bundle/ruby/1.9.1/gems/mongoid-3.0.1/lib/mongoid/persistence/operations/insert.rb:26:in `persist'
    from /app/vendor/bundle/ruby/1.9.1/gems/mongoid-3.0.1/lib/mongoid/persistence.rb:50:in `insert'
    from /app/vendor/bundle/ruby/1.9.1/gems/mongoid-3.0.1/lib/mongoid/persistence.rb:251:in `block in create!'
    from /app/vendor/bundle/ruby/1.9.1/gems/mongoid-3.0.1/lib/mongoid/threaded/lifecycle.rb:173:in `_creating'
    from /app/vendor/bundle/ruby/1.9.1/gems/mongoid-3.0.1/lib/mongoid/persistence.rb:249:in `create!'
    from (irb):52
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/commands/console.rb:47:in `start'
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/commands/console.rb:8:in `start'
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>'irb(main):053:0> 
```

我想我已经用谷歌搜索了所有内容，遇到了多个 github mongoid 问题，多次阅读了文档……而且我的想法已经用完了。

有什么想起来我接下来应该尝试的吗？

**7 月 16 日更新：这是 Heroku 在我 git push heroku master 时所说的（在做了 MongoHQ 的 Jason 建议之后）：**

```
git push heroku master
Counting objects: 7, done.
Delta compression using up to 16 threads.
Compressing objects: 100% (4/4), done.
Writing objects: 100% (4/4), 372 bytes, done.
Total 4 (delta 3), reused 0 (delta 0)

-----> Heroku receiving push
-----> Ruby/Rails app detected
-----> Installing dependencies using Bundler version 1.2.0.pre
       Running: bundle install --without development:test --path vendor/bundle --binstubs bin/ --deployment
       Using rake (0.9.2.2)
       Using i18n (0.6.0)
       Using multi_json (1.3.6)
       Using activesupport (3.2.6)
       Using builder (3.0.0)
            # ... shortened this #
       Using libv8 (3.3.10.4)
       Using moped (1.1.2)
       Using origin (1.0.4)
       Using mongoid (3.0.0.rc)
       Using omniauth (1.1.0)
       Using quimby (0.4.5)
       Using bundler (1.2.0.pre)
       Using rails (3.2.6)
       Using therubyracer (0.10.1)
       Using thin (1.3.1)
       Your bundle is complete! It was installed into ./vendor/bundle
       Cleaning up the bundler cache.
-----> Writing config/database.yml to read from DATABASE_URL
-----> Preparing app for Rails asset pipeline
       Running: rake assets:precompile
       Asset precompilation completed (31.24s)
-----> Rails plugin injection
       Injecting rails_log_stdout
       Injecting rails3_serve_static_assets
-----> Discovering process types
       Procfile declares types      -> (none)
       Default types for Ruby/Rails -> console, rake, web, worker
-----> Compiled slug size is 18.7MB
-----> Launching... done, v92
       http://xxxxx.herokuapp.com deployed to Heroku

To git@heroku.com:xxxxx.git
   b2d97xy..7b0aczy  master -> master 
```

**7 月 16 日 2 日更新：正如 Jason 和 MrKurt 所说的那样（首先忘记运行 bundle update mongoid，但这也无济于事）。但是，现在错误发生了变化：**

```
NoMethodError in Home#index

Showing /app/app/views/home/index.html.haml where line #2 raised:

undefined method `[]' for nil:NilClass

Extracted source (around line #2):

    1: %h1 Most recent posts
    2: - if @posts.length > 0 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-07-16T02:31:43.267

您将需要使用 Ruby 1.9.3。有关如何使用 1.9.3，请参阅[此处](http://blog.heroku.com/archives/2012/5/9/multiple_ruby_version_support_on_heroku/)的Mongoid 文档和[此处](http://mongoid.org/en/mongoid/docs/tips.html#ruby)的Heroku 文档。

我也遇到了类似的错误，我将 gemfile 更改为包含`ruby '1.9.3'`，一切都按预期工作了。

编辑：@herb 指出您需要最新版本的捆绑程序才能工作（`gem install bundler --pre`）。否则，`ruby '1.9.3'`在您的 Gemfile 中将无法正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T23:49:40.567

尝试将“选项”区域添加到默认会话并添加“skip_version_check：true”作为选项之一。

杰森·蒙戈总部

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T21:49:32.850

作为一种解决方法，从 heroku 配置硬编码 uri 似乎可以解决问题。

前任：

```
production:
  sessions:
    default:
      uri: "mongodb://heroku:xxxx@domain.mongohq.com:000/appyyyy"
      options:
        skip_version_check: true
        safe: true 
```

我猜 nilclass 错误是因为 <%= ENV['MONGOHQ_URL'] %> 返回 nil

# user-interface - 如何在 gtk+ 中连接多个窗口？

> ID：11494145
> 
> 赞同：1
> 
> 时间：2012-07-15T17:39:38.027
> 
> 标签：user-interface, gtk

我在 gtk+ 中创建了一个窗口。在这个窗口中，我正在显示一些文本并有按钮“下一个”，我想通过它移动到下一个窗口，我的前一个窗口应该消失。我的新窗口应该显示一些东西，比如文本。有人可以告诉我如何实现吗？我是 gtk+ 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T00:19:07.550

看来您想使用[GtkAssistant](http://developer.gnome.org/gtk2/2.24/GtkAssistant.html)，它是一个小部件，正好用于您正在寻找的那种交互。在您的系统中运行`gtk-demo`以使用代码检查示例。很可能你已经安装了它。

此外，您可以在[Gtk+ 存储库](http://git.gnome.org/browse/gtk+/tree/demos/gtk-demo/assistant.c)中在线查看代码。（检查您要查看的版本，GTK+2 或 GTK+3）。

# javascript - 两个重叠元素的fadeIn()和fadeOut()发生时页面跳转

> ID：11494153
> 
> 赞同：3
> 
> 时间：2012-07-15T17:40:57.883
> 
> 标签：javascript, jquery

我在 jQuery 中创建了一些东西，但是在单击图像时我遇到了问题。如果您完全向下滚动到页面底部然后单击，您会看到它跳转。我尝试了多种方法来防止跳跃，但它不起作用。

这是我的代码：

```
$('.author').click(function(e) {
    var name = $(this).attr('id') + '-info';

    $('.author-info article').hide();
    $('#' + name).fadeIn();

    $('.author').removeClass('active');
    $(this).addClass('active');

    e.preventDefault();

}); 
```

这是实时链接 - [http://sites.lukespoor.com/author/](http://sites.lukespoor.com/author/)

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T17:44:00.267

它是跳跃的，因为当第一个元素淡出时，页面的高度会发生变化。因此，它滚动到页面底部。你不能用`e.preventDefault`.

为父元素设置固定高度。

```
.author-info {height:200px;} 
```

解决问题。

另一种解决方案是

```
.author-info {position:relative;}
.author-info article {position:absolute;top:0;left:0;opacity:0;} 
```

而不是使用`.fadeIn`将不透明度设置为 1，而不是`.fadeOut`将不透明度设置为 0。您可以使用 CSS 过渡或`.animate`淡化效果。

# .net - 错误：无法找到运行此应用程序的运行时版本

> ID：11494156
> 
> 赞同：0
> 
> 时间：2012-07-15T17:41:55.357
> 
> 标签：.net, frameworks

我的应用程序的一位用户收到错误“无法找到运行此应用程序的运行时版本”。我的应用程序设置为具有针对 v3.5 的 .NET 框架。我已经要求他安装 .NET framework 3.5，但他仍然收到错误消息。

我尝试了几个网站的解决方案，添加了一个配置文件，代码如下：

```
<startup useLegacyV2RuntimeActivationPolicy="true">
  <supportedRuntime version = "v4.0"/>
  <supportedRuntime version ="v2.0.50727" />
</startup> 
```

然而问题似乎并没有消失。同样的事情发生在他的两台电脑（Windows XP 和 Vista）上。其他可能的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-03T16:19:46.483

有类似的问题，由于以下错误而无法运行 RETSCREEN.EXE：

> 解析 c:\WINDOWS\Microsoft.NET\Framework\v2..50727\config\machine.config 时出错 解析器返回错误 0xC00CE556

我遵循了发布的解决方案：http: [//blogs.sits-solutions.com/2010/11/02/parser-returned-error-0xc00ce556/](http://blogs.sits-solutions.com/2010/11/02/parser-returned-error-0xc00ce556/)

> 事实证明，“machine.config”文件（如错误所示）是问题所在。“machine.config”可以在位于“%SystemRoot%\microsoft.NEt\framework\v2.0.50727\config”下的 CONFIG 文件夹中找到。所以：
> 
> ```
> Logon as admin
> Go to “c:\windows\microsoft.NEt\framework\v2.0.50727\config” and rename “machine.config” to something like “machine.config.BAD”
> In the same location create a folder called TEMP
> Copy “machine.config.default” from the CONFIG folder to TEMP folder
> Go into TEMP folder and rename “machine.config.default” to “machine.config”
> Copy “machine.config” from TEMP folder back to CONFIG folder
> Restart your machine 
> ```
> 
> 您的 C00CE556 错误应该得到解决。

实际上我不需要在另一个文件夹中复制：在同一文件夹中复制 machine.config.default 并将其重命名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T18:58:52.200

你的配置说如果你有版本 4.0 然后使用它否则回退到下一个即 v2

但根据 MSDN，属性 useLegacyV2RuntimeActivationPolicy 将用于回退

> **取自 MSDN**
> 
> 指定是启用 .NET Framework 2.0 版运行时激活策略还是使用 .NET Framework 4 版激活策略。

所以我建议你用这种方式

```
<startup useLegacyV2RuntimeActivationPolicy="true">
  <supportedRuntime version = "v4.0"/>
</startup> 
```

# android - 如何围绕 ImageView 对齐 TextView？

> ID：11494158
> 
> 赞同：19
> 
> 时间：2012-07-15T17:42:13.423
> 
> 标签：android, textview, imageview, alignment, spannablestring

![在此处输入图像描述](../Images/e30e3f354150a999f674d1bdc5c935a9.png)

我正在尝试围绕 ImageView 对齐 TextView。我正在使用以下代码：

```
 private void createSpannableText(){
        TextView myTextView = (TextView) findViewById(R.id.textView);
        SpannableStringBuilder builder = new SpannableStringBuilder();
        builder.append(this.getText(R.string.loren__ipsum__max));
        int lengthOfPart1 = builder.length();
        builder.append(" ");
        builder.append(this.getText(R.string.lorem__ipsum));
        Drawable d = getResources().getDrawable(R.drawable.myImage);
        d.setBounds(0, 0, d.getIntrinsicWidth(), d.getIntrinsicHeight()); // <---- Very important otherwise your image won't appear
        ImageSpan myImage = new ImageSpan(d);
        builder.setSpan(myImage, 0, lengthOfPart1, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
        myTextView.setText(builder);
    } 
```

但无法得到确切的结果。我该怎么办？在这种情况下我需要使用 SpannableStringBuilder 还是有其他方法。请帮忙。我使用这篇文章 - [http://majaxandroidtips.blogspot.in/2009/06/how-to-have-few-layout-elements-wrap_17.html](http://majaxandroidtips.blogspot.in/2009/06/how-to-have-few-layout-elements-wrap_17.html) 来获得解决方案。

PS：我还想要 ImageView 周围的 6dp 边距

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-15T17:52:13.667

您可以通过使用`android.text.style.LeadingMarginSpan.LeadingMarginSpan2`API 8 中提供的接口来实现这一点。这是[这篇文章](http://dev.androidteam.ru/snippets/textview/leadingmarginspan2)，虽然不是英文，但请使用您的浏览器进行翻译。此外，您可以直接从[这里](http://dl.dropbox.com/u/1134234/AndroidTeam/dev/examples/MyLeadingMarginSpan2.zip)下载示例的源代码。

你的布局：

```
<?xml version="1.0" encoding="UTF-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:padding="5dp">
    <TextView
        android:textSize="18.0sp"
        android:id="@+id/message_view"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/text" />
    <ImageView
        android:src="@drawable/icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/icon" />
</RelativeLayout> 
```

助手类实现`LeadingMarginSpan.LeadingMarginSpan2`

```
class MyLeadingMarginSpan2 implements LeadingMarginSpan.LeadingMarginSpan2 {
    private int margin;
    private int lines;

    MyLeadingMarginSpan2(int lines, int margin) {
        this.margin = margin;
        this.lines = lines;
    }

    /* Возвращает значение, на которе должен быть добавлен отступ */
    @Override
    public int getLeadingMargin(boolean first) {
        if (first) {
            /*
             * Данный отступ будет применен к количеству строк
             * возвращаемых getLeadingMarginLineCount()
             */
            return margin;
        } else {
            // Отступ для всех остальных строк
            return 0;
        }
    }

    @Override
    public void drawLeadingMargin(Canvas c, Paint p, int x, int dir, 
            int top, int baseline, int bottom, CharSequence text, 
            int start, int end, boolean first, Layout layout) {}

    /*
     * Возвращает количество строк, к которым должен быть 
     * применен отступ возвращаемый методом getLeadingMargin(true)
     * Замечание:
     * Отступ применяется только к N строкам первого параграфа.
     */
    @Override
    public int getLeadingMarginLineCount() {
        return lines;
    }
}; 
```

您的活动代码：

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        String text = getString(R.string.text);

        // Получаем иконку и ее ширину
        Drawable dIcon = getResources().getDrawable(R.drawable.icon);
        int leftMargin = dIcon.getIntrinsicWidth() + 10;

        // Устанавливаем иконку в R.id.icon
        ImageView icon = (ImageView) findViewById(R.id.icon);
        icon.setBackgroundDrawable(dIcon);

        SpannableString ss = new SpannableString(text);
        // Выставляем отступ для первых трех строк абазца
        ss.setSpan(new MyLeadingMarginSpan2(3, leftMargin), 0, ss.length(), 0);

        TextView messageView = (TextView) findViewById(R.id.message_view);
        messageView.setText(ss);
    } 
```

最后是演示结果：

![在此处输入图像描述](../Images/fe5fdbed4a563bb976d271690695e336.png)

# c# - 客户端发现响应内容类型为“application/wsdl+xml”，但预期为“text/xml”

> ID：11494161
> 
> 赞同：0
> 
> 时间：2012-07-15T17:42:21.047
> 
> 标签：c#, api, soap, xmlhttprequest, httprequest

```
b2bHotelSOAPService objsoap = new b2bHotelSOAPService();
        objsoap.Timeout = 20000;
        objsoap.Url = "http://api.hotelspro.com/4.1_test/hotel/b2bHotelSOAP.wsdl";
        string apiKey = Connection.AppSettings("APIKey");
        string destinationId = "LD6J";
        DateTime checkIn = new DateTime(2012, 7, 20);
        DateTime checkOut = new DateTime(2012, 7, 22);
        string strCurrencyCode = "EUR";

        pax[][]rooms=new pax[3][];
        rooms[0] = new pax[3];
        rooms[0][0] = new pax();
        rooms[0][1] = new pax();
        rooms[0][2] = new pax();

        rooms[0][0].paxType = "Adult";
        rooms[0][1].paxType="Adult";
        rooms[0][2].paxType="Child";
        rooms[0][2].age = "6";

        filter[] f = new filter[1];
        f[0] = new filter();
        f[0].filterType = "hotelStar";
        f[0].filterValue = "3";

        getAvailableHotelResponse getres = new getAvailableHotelResponse();

        getres = objsoap.getAvailableHotel(apiKey, destinationId, checkIn, checkOut, strCurrencyCode, "UK", true, rooms, f); 
```

此代码引发以下错误：

```
Client found response content type of 'application/wsdl+xml', but expected 'text/xml'.
The request failed with the error message: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T18:02:28.913

如果您在文本编辑器中打开 WSDL，您将找到要调用的 Web 服务的地址

```
<soap:address location="http://api.hotelspro.com/4.1_test/hotel/b2bHotelSOAP.php"/> 
```

因此，您需要更改您正在调用的 URL。

```
objsoap.Url = "http://api.hotelspro.com/4.1_test/hotel/b2bHotelSOAP.php"; 
```

您调用的 .WSDL 地址是让 .NET 确定要生成的类的原因，但实际调用的是 Web 服务，即上面的 .PHP 地址。

# javascript - 语法 - 变量赋值

> ID：11494164
> 
> 赞同：-1
> 
> 时间：2012-07-15T17:43:41.383
> 
> 标签：javascript

让我们拥有以下功能：

```
function transformMatrix(a, b, c, d, e, f)
{
  this.data = [a, c, e, b, d, f, 0, 0, 1];
}

transformMatrix.prototype.inverse = function()
{
  //..
  this.data = newdata;
  return this.data;
} 
```

和

```
var m1 = new transformMatrix(1, 0, 0, 1, 10, 20); // translate (10, 20) 
```

现在，当我打电话时

```
m1.inverse(); 
```

变量`m1`被改变。

但是当我打电话

```
var m2 = m1.inverse(); 
```

variable`m1`已更改，并且已将更改的内容复制到 variable `m2`。伟大的！

有没有办法在`inverse`不改变原始变量的情况下将结果分配给新变量？

我可以这样做：

```
var m2 = m1;
m2.inverse(); 
```

但我想知道，如果有其他方法，没有事先分配，比如

```
var m2 = {m1}.inverse(); // incorrect syntax 
```

那不会改变`m1`的。

请注意，`inverse`不应更改函数的功能。

任何帮助将不胜感激。谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T17:52:21.733

您需要从中创建一个新对象`m1`并在其上调用`inverse`函数，以避免修改原始对象。理想情况下，您的`transformMatrix`构造函数将能够从传递给它的矩阵创建一个新矩阵。执行此操作的构造函数如下所示：

```
function transformMatrix(a, b, c, d, e, f) {
    if(!(a instanceof transformMatrix)) { // if a, the first variable passed in, is NOT a matrix
        this.data = [a, c, e, b, d, f, 0, 0, 1];
    } else { // otherwise it is a matrix; we need to create a new matrix from its data
        this.data = [
            a.data[0],
            a.data[1],
            a.data[2],
            a.data[3],
            a.data[4],
            a.data[5],
            0,
            0,
            1,
        ]
    }
} 
```

现在，如果您将现有矩阵传递给`transformMatrix`，它将根据传入的矩阵数据创建一个*新*矩阵。修改新矩阵不会影响旧矩阵。新语法看起来像这样：

```
var m2 = new transformMatrix(m1).reverse(); // note the new keyword, because you're creating a new object 
```

`m2`现在将是 的反转版本`m1`，并且`m1`不会受到影响。

### 另一种选择：JSON hack

您还有另一个选项有点 hacky，但不需要修改原始`transformMatrix`构造函数：使用 JSON hack 复制原始矩阵，然后调用`reverse()`复制的对象。它看起来像这样：

```
var m2 = JSON.parse(JSON.stringify(m1)).reverse(); 
```

你甚至可以在你的`reverse()`函数中包含这个 hack，最终看起来像这样：

```
transformMatrix.prototype.inverse = function() {
    var newMatrix = JSON.parse(JSON.stringify(this));
    //..
    newMatrix.data = newdata;
    return newMatrix.data;
} 
```

# bash - 为什么“mkdir -p”会导致 Bash 权限错误？

> ID：11494166
> 
> 赞同：1
> 
> 时间：2012-07-15T17:43:42.287
> 
> 标签：bash, permissions, mkdir

如果我创建一个目录`mkdir -p`，它会导致脚本出现问题

```
$ mkdir -p test2/test2

$ cd test2/test2

$ echo '#!/bin/sh
> echo hello' > hello.sh

$ ./hello.sh
bash: ./hello.sh: Permission denied 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T17:45:26.777

这无关`mkdir`。您根本没有授予`hello.sh`可执行权限。您需要以下内容：

```
chmod +x hello.sh 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T17:49:30.983

### 检查您的权限

检查您的目录和脚本本身的权限。那里可能有问题，尽管不太可能。

```
ls -lad test2/test2
ls -l test2/test2/hello.sh 
```

如果由于某种原因未正确设置您的权限，您始终可以将**--mode**标志与*mkdir一起使用。*有关详细信息，请参阅 chmod(1) 和 mkdir(1)。

### 直接执行文件

只要当前用户可以读取文件，就可以直接使用 Bash 执行脚本，而不是依赖 shebang 行或可执行位。例如：

```
bash test2/test2/hello.sh 
```

### 更改文件权限

如果您可以在使用 Bash 显式调用时执行该文件，那么您只需要确保您的文件设置了执行位。例如：

```
chmod 755 test2/test2/hello.sh 
```

# python - 多个 Heroku 应用程序，不同的端点，而不是子域

> ID：11494168
> 
> 赞同：3
> 
> 时间：2012-07-15T17:43:44.467
> 
> 标签：python, heroku, playframework, subdomain, flask

我有一个使用 python 和烧瓶的 heroku 应用程序。它目前服务于整个域和所有端点。

*   http://*.domain.com/* -> 一个 Heroku 应用

我喜欢探索不同的语言和框架，并想重写网站的不同部分。那可能吗？

它会像

*   [http://www.domain.com/python-stuff（python/flask](http://www.domain.com/python-stuff)应用程序）
*   [http://www.domain.com/ruby-stuff](http://www.domain.com/ruby-stuff)（一个 ruby​​/sinatra 应用程序）
*   [http://www.domain.com/java-play-stuff](http://www.domain.com/java-play-stuff)（一个 java/playframework 应用程序）

我所能看到的只是可能有一个应用程序可以处理 www 和所有子目录，而是重定向到不同的子域。

*   [http://www.domain.com/ruby-stuff](http://www.domain.com/ruby-stuff) -> [http://ruby-stuff.domain.com/ruby-stuff](http://ruby-stuff.domain.com/ruby-stuff)
*   [http://www.domain.com/java-play-stuff](http://www.domain.com/java-play-stuff) -> [http://java-play-stuff.domain.com/java-play-stuff](http://java-play-stuff.domain.com/java-play-stuff)
*   [http://www.domain.com/](http://www.domain.com/) {{ all else }} -> 原始 python 烧瓶应用

我不想这样做，因为那样我就必须重组我所有的 openid 用户以明确指向 www.domain.com 的种子 URL，而不是依赖所有登录都来自同一个子域。（除了cookies等其他原因（这也与open id有关）

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T23:11:02.167

设置 Amazon CloudFront 分配并将特定路径映射到不同的源服务器。

# c# - Roslyn 有内置的“简化”吗？

> ID：11494171
> 
> 赞同：9
> 
> 时间：2012-07-15T17:44:01.800
> 
> 标签：c#, roslyn

是否有任何内置方法可以使用 Roslyn 执行与 C# 编译器相同的编译时转换，例如将迭代器、初始化器、lambda、LINQ 等转换为基本 C# 代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T18:40:41.917

Roslyn 编译器 API 旨在（除了将源代码转换为 IL）允许您构建源代码分析和转换工具。

但是，lambda 和迭代器没有始终可以使用 source 指定的翻译。它们使用内部绑定节点抽象进行建模，其中包括只能使用 IL 表示的额外编译器特定规则。

可以将 LINQ 翻译为 C# 中的源代码，因为它被指定为源代码翻译（无论编译器是否真的这样做）。但是，没有专门执行此操作的编译器 API。如果有，它可能会显示为服务层 API 而不是编译器 API。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T18:51:13.247

AFAIK，不，罗斯林没有这样的事情。但是编译器必须以某种方式进行这些转换，因此您可以通过访问某些`internal`方法来做到这一点。

当然，您可以使用 Roslyn 自己进行这些转换，但这不是您要的。

# php - PHP：为什么人们讨厌全局变量？

> ID：11494173
> 
> 赞同：-1
> 
> 时间：2012-07-15T17:44:13.677
> 
> 标签：php, global-variables

如果你进入`global`谷歌，第一个与 PHP 相关的页面肯定是关于全局变量是如何邪恶的。为什么会这样？我一直在我的很多函数和类中使用它们，并且从未遇到任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T17:47:05.670

第一次尝试谷歌“php global”给我带来了这个： [http ://tjhunt.blogspot.de/2009/04/php-global-variables-are-not.html](http://tjhunt.blogspot.de/2009/04/php-global-variables-are-not.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T17:47:23.627

你可以用谷歌搜索“为什么全球是邪恶的？” 也是。

第一个结果之一：[在 stackexchange 上](https://softwareengineering.stackexchange.com/questions/148108/why-is-global-state-so-evil)

# google-apps-script - 从电子表格中选择并复制一些值，与另一张纸上的另一列进行比较

> ID：11494175
> 
> 赞同：1
> 
> 时间：2012-07-15T17:44:55.357
> 
> 标签：google-apps-script, google-sheets, google-sheets-api

我已经阅读了这两个链接[谷歌脚本：有条件地将行从一个电子表格复制到另一个电子表格](https://stackoverflow.com/q/10907267/1526044)和[https://stackoverflow.com/a/4809413/1526044](https://stackoverflow.com/a/4809413/1526044)并且在尝试后我无法做我需要的事情。

我有一张电子表格，一张纸上有一些数据，另一张纸上有列的关键信息，可以通过这种方式进行比较：

```
KEY Value1 Value2 Value3 
AAA   B      C      D
BBB   Y      Z      W 
```

我需要一个函数来逐行检查我的 DATA 电子表格，以查找键表上列值的值。当找到任何值时，它会在 DATA 电子表格的第一列（在同一行）写下 KEY 值。

示例：DATA 电子表格

```
empty text text text B
empty text text text text
empty text   C  text text
empty text text text Y 
```

因此，在脚本之后，DATA 将如下所示：

```
AAA text text text B
empty text text text text
AAA text   C  text text
BBB text text text Y 
```

任何其他建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T20:37:44.680

我修改了一个我最近回答的类似脚本，它应该可以满足您的需求。我没有测试，但你可以试一试。有一些评论可以解释这个想法......它可能需要一些调试。

**编辑：**我玩弄了这个并对其进行了更多调试;-)所以它现在似乎可以根据需要工作 - 这是[我的测试表的链接](https://docs.google.com/spreadsheet/ccc?key=0AnqSFd3iikE3dFVGSDZuaFVYRGJuR3lQMktsd0l0ckE)

```
function xxx(){ 
/* we have an array 'keysheet'
    and an array datasheet , you get these with something like*/
        var keysheet = SpreadsheetApp.getActiveSpreadsheet().getSheets()[0].getDataRange().getValues();
    // and
        var datasheet = SpreadsheetApp.getActiveSpreadsheet().getSheets()[1].getDataRange().getValues();// if other columns, change index values in the arrays : 0=A, 1=B ...
    // the iteration could be like this :
              for(i=0;i<datasheet.length;++i){ // don't miss any data
                for(j=0;j<keysheet.length;++j){ // iterate through keysheet to find the keys
                  for(k=1;k<keysheet[0].length;++k){ // iterate in keysheet row to check every column except first one
                      var key = keysheet[j][k]
                      Logger.log(k+' '+key+"  "+datasheet[i].toString().match(key))
                 if(datasheet[i].toString().match(key) == key){// check whole rows to find if key is in data
                  var x = datasheet[i].shift();
                   datasheet[i].unshift(keysheet[j][0]) // if match found, replace first element in datasheet with fisrt element in keysheet
                     break  // if found break k loop maybe you should also break j loop ?
                       }
                 }
                   } //loop keysheet
             } // loop datasheet

            /* now you have a modified datasheet array that can directly overwrite the old datasheet 
            using setValues() */
            var sh = SpreadsheetApp.getActiveSpreadsheet().getSheets()[1];// assuming the datasheet sheet is sheet nr2
            Logger.log(datasheet)
           sh.getRange(1,1,datasheet.length,datasheet[0].length).setValues(datasheet);
              }
        // 
```

# java - Java 的 File.toString 或 Path.toString 带有特定的路径分隔符

> ID：11494177
> 
> 赞同：17
> 
> 时间：2012-07-15T17:45:23.293
> 
> 标签：java, file, scala, relative-path, path-separator

我正在 Windows 上开发 Scala 应用程序，我需要将文件路径插入 HTML 模板。我使用 Java`io`并`nio`处理文件和路径。

```
/* The paths actually come from the environment. */
val includesPath = Paths.get("foo\\inc")
val destinationPath = Paths.get("bar\\dest")

/* relativeIncludesPath.toString == "..\\foo\\inc", as expected */
val relativeIncludesPath = destinationPath.relativize(includesPath) 
```

问题是`relativeIncludesPath.toString`包含反斜杠`\`作为分隔符的输出 - 因为应用程序在 Windows 上运行 - 但由于路径要插入 HTML 模板，因此它必须包含正斜杠`/`。

因为我在文档中找不到类似的东西`file/path.toStringUsingSeparator('/')`，所以我目前正在帮助自己`relativeIncludesPath.toString.replace('\\', '/')`，我觉得这很不吸引人。

**问题：**真的没有比使用替换更好的方法吗？

我也尝试过 Java 的`URI`，但它`relativize`是[不完整](https://stackoverflow.com/a/705963/491216)的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T14:50:16.527

Path 接口的 Windows 实现在内部将路径存储为字符串（至少在[OpenJDK 实现中），并在调用](http://hg.openjdk.java.net/jdk7/jdk7-gate/jdk/file/9b8c96f96a0f/src/windows/classes/sun/nio/fs/WindowsPath.java)*toString()*时简单地返回该表示。这意味着不涉及计算，也没有机会“配置”任何路径分隔符。

出于这个原因，我得出结论，您的解决方案是目前解决您的问题的最佳选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-06T18:51:58.550

我刚遇到这个问题。如果你有一个相对路径，你可以使用它`Path`的一个`Iterable<Path>`元素，跟随一个可选的初始根元素，然后可以自己用正斜杠连接这些片段。不幸的是，根元素可以包含斜杠，例如在 Windows 中，您会得到像`c:\`和`\\foo\bar\`（对于 UNC 路径）这样的根元素，因此无论您仍然需要用正斜杠替换什么，似乎都是如此。但是你*可以*做这样的事情......

```
static public String pathToPortableString(Path p)
{
    StringBuilder sb = new StringBuilder();
    boolean first = true;
    Path root = p.getRoot();
    if (root != null)
    {
        sb.append(root.toString().replace('\\','/'));
        /* root elements appear to contain their
         * own ending separator, so we don't set "first" to false
         */            
    }
    for (Path element : p)
    {
       if (first)
          first = false;
       else
          sb.append("/");
       sb.append(element.toString());
    }
    return sb.toString();        
} 
```

当我用这段代码测试它时：

```
static public void doit(String rawpath)
{
    File f = new File(rawpath);
    Path p = f.toPath();
    System.out.println("Path: "+p.toString());
    System.out.println("      "+pathToPortableString(p));
}

static public void main(String[] args) {
    doit("\\\\quux\\foo\\bar\\baz.pdf");
    doit("c:\\foo\\bar\\baz.pdf");
    doit("\\foo\\bar\\baz.pdf");
    doit("foo\\bar\\baz.pdf");
    doit("bar\\baz.pdf");
    doit("bar\\");
    doit("bar");
} 
```

我明白了：

```
Path: \\quux\foo\bar\baz.pdf
      //quux/foo/bar/baz.pdf
Path: c:\foo\bar\baz.pdf
      c:/foo/bar/baz.pdf
Path: \foo\bar\baz.pdf
      /foo/bar/baz.pdf
Path: foo\bar\baz.pdf
      foo/bar/baz.pdf
Path: bar\baz.pdf
      bar/baz.pdf
Path: bar
      bar
Path: bar
      bar 
```

用正斜杠替换反斜杠的文本肯定更容易，但我不知道它是否会破坏一些迂回的边缘情况。（Unix 路径中可以有反斜杠吗？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-02T13:10:59.413

基于这个`iterator`想法（我的问题类似：需要网页的路径，但它必须是相对的并以斜杠开头）

```
StringBuilder foo = new StringBuilder();
relative.iterator().forEachRemaining(part -> foo.append("/").append(part)); 
```

`foo`将包含适当的路径。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-15T18:29:11.873

您可以在 Java 中获取大多数系统属性。看看这个链接：

[http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)

你要这个：

```
Key: "file.separator"
Meaning: Character that separates components of a file path. This is "/" on UNIX and "\" on Windows.

String sep = System.getProperty("path.separator"); 
```

# python - 安装 mlpy 时出现 gsl 错误

> ID：11494179
> 
> 赞同：8
> 
> 时间：2012-07-15T17:45:33.017
> 
> 标签：python, easy-install

我正在尝试安装`mlpy`，但出现以下错误。我不知道从哪里开始。有人有任何线索吗？

```
$ sudo easy_install mlpy-3.5.0.tar.gz
Password:
install_dir /Library/Frameworks/Python.framework/Versions/6.2/lib/python2.6/site-packages/
Processing mlpy-3.5.0.tar.gz
Running mlpy-3.5.0/setup.py -q bdist_egg --dist-dir /tmp/easy_install-lQNT_3/mlpy-3.5.0/egg-dist-tmp-EPgtAi
mlpy/gsl/gsl.c:223:24: error: gsl/gsl_sf.h: No such file or directory
mlpy/gsl/gsl.c:224:39: error: gsl/gsl_statistics_double.h: No such file or directory
error: Setup script exited with error: command 'gcc' failed with exit status 1 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T00:23:37.093

您的系统上没有安装 gsl 的开发包。在 RHEL/Fedora/等上。在 Debian/Ubuntu/etc 上安装 gsl-devel。安装 gsl-dev。

# c++ - 如果字符串不等于 const char 则退出 while 循环

> ID：11494180
> 
> 赞同：2
> 
> 时间：2012-07-15T17:45:46.233
> 
> 标签：c++

我在代码中遇到了这个 while 循环的问题。如果用户完成输入项目，我希望他们按 q 退出。这不起作用，用户输入了 q 并且循环没有中断。如果还有更好的方法来做到这一点，那就太好了。

```
#include <stdio.h>
#include "CashRegister.h"
#include <stdlib.h>
#include <iostream>
#include <string>
using namespace std;

CashRegister::CashRegister(void)
{
}

CashRegister::~CashRegister(void)
{
}

void CashRegister::addItem(void)
{
string temp;
int k = 0;
int exit = 0;
CashRegister item[10];

for(int i = 0; i < 10; ++ i)
{
    item[i].price = 0.00;
}

cout << "Enter price of items. Up to 10 maximum\n" << endl;

while(item[9].price != 0.00 || temp != "q")
{
    cout << "Enter price of item number " << k + 1 << "\n" << endl;
    cin >> temp;
    cout << temp << endl;
    double tempPrice = (double)atof(temp.c_str());
    item[k].price = tempPrice;
    cout << "Price of item number " << k + 1 << " is $" << item[k].price << endl;
    ++k;
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T17:50:36.227

您的 while 循环需要阅读：

```
while(item[9].price != 0.00 && temp != "q") 
```

当两个条件都为真时，循环需要继续，所以你需要说`&&`not `||`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T17:50:21.547

```
while(item[9].price != 0.00 || temp != "q") 
```

考虑一下这是在说什么。”*当价格不是 0**或**温度不是“q”*时循环。“ 现在考虑要停止循环必须发生什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T17:52:30.057

你应该用它来打破循环：

```
while(item[9].price != 0.00 && temp != "q")
{
  // ur stuff
} 
```

循环将迭代，因为**item[9].price**将包含除 0.00 以外的一些值

# php - 如果 rss 提要不起作用，防止 PHP 错误？

> ID：11494182
> 
> 赞同：0
> 
> 时间：2012-07-15T17:45:56.793
> 
> 标签：php, rss

我有一个类，用于在我网站的几个不同页面上提取不同的 RSS 提要。

我的问题是当其中一个提要出现问题时（例如提要暂时关闭），它会给我带来致命的 php 错误，从而破坏我的网站。

```
$rawFeed = @file_get_contents("http://www.website.com/feed");
$xml = new SimpleXmlElement($rawFeed); 
```

这是我用来拉取 rss 提要的基本代码。这`new SimpleXmlElement`是最终导致致命错误的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T17:51:14.660

`file_get_contents`如果这是您唯一关心的问题，则返回错误。

你可以尝试做这样的事情：

```
$rawFeed = @file_get_contents("http://www.website.com/feed");

if ($rawFeed) {
    $xml = new SimpleXmlElement($rawFeed);
} else {
   // Deal with case that the feed wasn't read.
} 
```

您可能还希望将 包装`new SimpleXmlElement($rawFeed)`在 try/catch 块中，并为 SimpleXmlElement 引发解析异常的情况添加处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T17:52:57.680

```
libxml_use_internal_errors(true); 
try
{
    $xml = new SimpleXmlElement('http://www.website.com/feed');
} catch(Exception $e) {
    //nothing
} 
```

# c# - ASP.NET MVC：在不影响性能的情况下路由自定义 slug

> ID：11494184
> 
> 赞同：6
> 
> 时间：2012-07-15T17:46:10.553
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing, asp.net-mvc-4

我想为我的 CMS 中的页面创建自定义 slug，以便用户可以创建自己的 SEO-url（如 Wordpress）。

我曾经在 Ruby on Rails 和 PHP 框架中通过“滥用”404 路由来做到这一点。当找不到请求的控制器时调用此路由，使我能够将用户路由到我的**动态页面控制器**以解析 slug（如果没有找到页面，我将它们重定向到真正的 404）。这样，仅查询数据库以检查请求的 slug。

但是，在 MVC 中，只有当路由不符合`/{controller}/{action}/{id}`.

为了仍然能够解析自定义 slug，我修改了`RouteConfig.cs`文件：

```
public class RouteConfig
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

        RegisterCustomRoutes(routes);

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { Controller = "Pages", Action = "Index", id = UrlParameter.Optional }
        );
    }

    public static void RegisterCustomRoutes(RouteCollection routes)
    {
        CMSContext db = new CMSContext();
        List<Page> pages = db.Pages.ToList();
        foreach (Page p in pages)
        {
            routes.MapRoute(
                name: p.Title,
                url: p.Slug,
                defaults: new { Controller = "Pages", Action = "Show", id = p.ID }
            );
        }
        db.Dispose();
    }
} 
```

这解决了我的问题，但需要`Pages`为每个请求完全查询表。因为重载的显示方法 ( `public ViewResult Show(Page p)`) 不起作用，我还必须再次检索页面，因为我只能传递页面 ID。

1.  有没有更好的方法来解决我的问题？
2.  是否可以将 Page 对象而不是页面 ID 传递给我的 Show 方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T23:01:51.547

即使您的路由注册代码按原样工作，问题也将是路由*仅*在启动时静态注册。添加新帖子时会发生什么 - 您是否必须重新启动应用程序池？

您可以注册一个包含 URL 的 SEO slug 部分的路由，然后在查找中使用该 slug。

`RouteConfig.cs`

```
routes.MapRoute(
    name: "SeoSlugPageLookup",
    url: "Page/{slug}",
    defaults: new { controller = "Page", 
                    action = "SlugLookup",
                  }); 
```

`PageController.cs`

```
public ActionResult SlugLookup (string slug)
{
    // TODO: Check for null/empty slug here.

    int? id = GetPageId (slug);

    if (id != null) {    
        return View ("Show", new { id });
    }

    // TODO: The fallback should help the user by searching your site for the slug.
    throw new HttpException (404, "NotFound");
}

private int? GetPageId (string slug)
{
    int? id = GetPageIdFromCache (slug);

    if (id == null) {
        id = GetPageIdFromDatabase (slug);

        if (id != null) {
            SetPageIdInCache (slug, id);
        }
    }

    return id;
}

private int? GetPageIdFromCache (string slug)
{
    // There are many caching techniques for example:
    // http://msdn.microsoft.com/en-us/library/dd287191.aspx
    // http://alandjackson.wordpress.com/2012/04/17/key-based-cache-in-mvc3-5/
    // Depending on how advanced you want your CMS to be,
    // caching could be done in a service layer.
    return slugToPageIdCache.ContainsKey (slug) ? slugToPageIdCache [slug] : null;
}

private int? SetPageIdInCache (string slug, int id)
{
    return slugToPageIdCache.GetOrAdd (slug, id);
}

private int? GetPageIdFromDatabase (string slug)
{
    using (CMSContext db = new CMSContext()) {
        // Assumes unique slugs.
        Page page = db.Pages.Where (p => p.Slug == requestContext.Url).SingleOrDefault ();

        if (page != null) {
            return page.Id;
        }
    }

    return null;
}

public ActionResult Show (int id)
{
    // Your existing implementation.
} 
```

（仅供参考：未编译或测试的代码 - 目前还没有我的开发环境可用。将其视为伪代码；）

此实现将在每次服务器重新启动时搜索一次 slug。您还可以在启动时预先填充键值 slug-to-id 缓存，因此所有现有的页面查找都很便宜。

# php - 使用 PHPMyAdmin 删除条目后无法将新数据插入 MySQL 数据库

> ID：11494185
> 
> 赞同：1
> 
> 时间：2012-07-15T17:46:17.557
> 
> 标签：php, mysql, pdo, phpmyadmin

我设法运行以下代码以在第一次尝试时插入我的表中。然后，我在 PHPMyAdmin 中删除了该行以进一步测试我的代码。我还注意到它在第一次尝试时没有被删除。只有经过几次尝试。这可能是因为在完成查询后我没有将 $pdoHandle 设置为 NULL。

然后，不幸的是我无法在后续运行中插入新行。我什至尝试更改输入值并利用我无法插入新行。以下是我的 PHP 代码：

```
public function CreateNewCustomer($userId,$password,$name,$email)
{
    $userId = filter_var($userId,FILTER_SANITIZE_STRING);
    $password = filter_var($password,FILTER_SANITIZE_STRING);
    $password = sha1($password);
    $name = filter_var($name,FILTER_SANITIZE_STRING);
    $email = filter_var($email,FILTER_SANITIZE_EMAIL);

    do{
        $customerId = hexdec(bin2hex(openssl_random_pseudo_bytes(4,$isStrong)));
        echo $customerId;
        $result = $this->connObject->exec("SELECT COUNT(id) FROM customer_tbl WHERE id=$customerId");
        var_dump($result);
    }while($result>0);

    $statement = $this->connObject->prepare("INSERT INTO customer_tbl (id,name,email) VALUES ($customerId,:name,:email)");
    $result = $statement->execute(array(':name'=>$name,':email'=>$email ));
    var_dump($result);

    $statement = $this->connObject->prepare("INSERT INTO login_tbl (username,password,customer_id) VALUES (:userName,PASSWORD(:password),$customerId)");
    $result = $statement->execute(array(':userName'=>$userId,':password'=>$password ));
    var_dump($result);
} 
```

我使用以下代码访问上述方法。

```
function Test($userName,$password,$name,$email)
{
try
{
    $dbConnect = new DbConnect();
    $pdoHandle = $dbConnect->Connect();
    $userAccess = new UserAccess($pdoHandle);
    $userAccess->CreateNewCustomer($userName,$password,$name,$email);
}
catch(PDOException $e)
{
    $pdoHandle = null;
    var_dump($e);
}
$pdoHandle = null;
}

Test('tester','password','TestX','test@example.com'); 
```

结果的 var_dump 总是错误的。

我的代码有问题还是数据库有问题？

**更新/解决方案：**

我刚刚阅读了 PDO::exec() 上的 PHP 文档，其中一个用户提供的注释提到您不能使用任何 SELECT 语句（即使上面只返回计数值）和任何可能返回行的语句. PDO::exec() 的返回值是受影响的行数（整数），所以不能使用 PDOStatement::closeCursor() 来解决。即使我设置了 PDO::MYSQL_ATTR_USE_BUFFERED_QUERY=>true，它仍然不起作用。

所以，不要对任何 SELECT 使用 PDO::exec()。我将代码更改为 PDO::query() ，如下所示，

```
 do{
        $customerId = hexdec(bin2hex(openssl_random_pseudo_bytes(4,$isStrong)));
        $statement = $this->connObject->query("SELECT COUNT(id) FROM customer_tbl WHERE id=$customerId");
        $statement->execute();
    }while($statement->fetchColumn(0)>0); 
```

希望这对任何寻找类似问题的解决方案的人有所帮助，并始终记住首先阅读 PHP 文档，包括用户贡献。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T18:47:06.723

也许不是答案，但如果您看不到明显的错误，可以执行以下操作：

如果执行返回 false，您可以通过以下方式**获取**有关所发生错误的更多信息：

```
$arr = $statement->errorInfo(); 
print_r($arr); 
```

或者您可以设置不同的[**错误报告模式**](http://php.net/manual/en/pdo.error-handling.php)（例如抛出异常而不是默认的静默模式）：

```
$dsn = 'mysql:dbname=testdb;host=127.0.0.1';
$user = 'dbuser';
$password = 'dbpass';
$dbh = new PDO($dsn, $user, $password);
$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

这应该可以帮助您找到“真正的”错误。

事实证明（见问题下面的评论），在这种情况下，真正的错误是：

> “在其他无缓冲查询处于活动状态时无法执行查询。考虑使用 PDOStatement::fetchAll()。或者，如果您的代码只针对 mysql 运行，您可以通过设置 PDO::MYSQL_ATTR_USE_BUFFERED_QUERY 来启用查询缓冲”

在这种情况下，您有 2 个选项：

您可以设置使用缓冲查询的选项

```
$dbh = new PDO(’mysql:host=localhost;dbname=test’, ‘root’, ” ,array(PDO::MYSQL_ATTR_USE_BUFFERED_QUERY => true)) 
```

或更改您的代码并关闭打开的游标（可能取决于您使用的数据库驱动程序）。您始终应该阅读涵盖许多默认问题的[文档。](http://www.php.net/manual/en/pdostatement.closecursor.php)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T17:59:51.573

我假设该方法在 UserAccess 类中，并且您传入的连接设置为 local `$this->connObject`。

我怀疑在您删除记录后，在您有趣的 do-while 循环中使用 select 语句将 $customerId 设置为 null。如果数据库中的 id 列是非空主键字段，并且您尝试插入显式空值，它将失败。

此外，无需继续将您的数据库连接设置为空......这不是 C 并且连接不是持久的（除非您明确声明它们）。

# r - 动物园对象和毫秒时间戳

> ID：11494188
> 
> 赞同：2
> 
> 时间：2012-07-15T17:46:58.633
> 
> 标签：r, zoo

关于分时数据的快速问题。我有大量采用这种格式的数据，我认为这些数据非常适合我想要实现的目标。我想保持一定的粒度，以便能够在一秒钟内触发买入/卖出信号。

> 数据

```
 SYMBOL  TIMESTAMP            STAMP   PRICE  SIZE EXCHANGE   BID BIDEX BIDSIZE   ASK ASKEX ASKSIZE
1        SPXU 1330938005 1330938005000000      NA    NA       9.99   PSE       5 10.10   PSE       6
2        SPXU 1330938221 1330938221000000      NA    NA       9.99   PSE       5 10.19   PSE       1
3        SPXU 1330938221 1330938221000001 10.1000   600      PSE    NA        NA    NA        NA
4        SPXU 1330938392 1330938392000000      NA    NA      10.00   PSE     174 10.19   PSE       1
5        SPXU 1330938431 1330938431000000      NA    NA      10.00   PSE     175 10.19   PSE       1
6        SPXU 1330938468 1330938468000000      NA    NA      10.00   PSE       1 10.19   PSE       1
7        SPXU 1330938736 1330938736000000      NA    NA      10.04   PSE      46 10.19   PSE       1
8        SPXU 1330938843 1330938843000000      NA    NA      10.04   PSE      47 10.19   PSE       1
9        SPXU 1330939576 1330939576000000      NA    NA      10.04   PSE       1 10.19   PSE       1
10       SPXU 1330939615 1330939615000000      NA    NA      10.05   PSE     100 10.19   PSE       1
11       SPXU 1330939615 1330939615000001      NA    NA      10.05   PSE     100 10.19   PSE     101
12       SPXU 1330939621 1330939621000000      NA    NA      10.04   PSE       1 10.19   PSE     101
13       SPXU 1330939621 1330939621000001      NA    NA      10.04   PSE       1 10.19   PSE       1
14       SPXU 1330939623 1330939623000000      NA    NA      10.05   PSE      46 10.19   PSE       1
15       SPXU 1330939623 1330939623000001      NA    NA      10.05   PSE      46 10.18   PSE      46
16       SPXU 1330939638 1330939638000000      NA    NA      10.04   PSE       1 10.18   PSE      46
17       SPXU 1330939686 1330939686000000      NA    NA      10.04   PSE       1 10.19   PSE       1
18       SPXU 1330939825 1330939825000000      NA    NA      10.05   PSE     100 10.19   PSE       1
19       SPXU 1330939825 1330939825000001      NA    NA      10.05   PSE     100 10.19   PSE     101
20       SPXU 1330939833 1330939833000000      NA    NA      10.04   PSE       1 10.19   PSE     101
21       SPXU 1330939833 1330939833000001      NA    NA      10.04   PSE       1 10.19   PSE       1
22       SPXU 1330939833 1330939833000002      NA    NA      10.04   PSE     101 10.19   PSE       1
23       SPXU 1330939833 1330939833000003      NA    NA      10.04   PSE     101 10.19   PSE     101
24       SPXU 1330939941 1330939941000000      NA    NA      10.04   PSE     101 10.19   PSE     102
25       SPXU 1330940041 1330940041000000      NA    NA      10.04   PSE       1 10.19   PSE     102 
```

我希望能够创建保持毫秒粒度的动物园对象。我无法将“data$STAMP”转换为日期。我怎样才能做到这一点？

在职的：

```
> as.POSIXlt(data2$TIMESTAMP[3], origin="1970-01-01", tz="EST")
[1] "2012-03-05 04:01:36 EST" 
```

不工作：

```
> as.POSIXlt(data2$STAMP[3], origin="1970-01-01", tz="EST")
[1] "))0'-06-03 15:45:52 EST" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T17:50:08.040

这本质上是一个常见问题解答——您需要`options("digits.secs"=6)`默认显示亚秒级时间信息。

见证：

```
R> Sys.time()                    # using defaults: no milli or micros
[1] "2012-07-15 12:51:17 CDT"
R> options("digits.secs"=6)      # changing defaults: presto!
R> Sys.time()
[1] "2012-07-15 12:51:30.218308 CDT"
R> 
```

现在将它与合适的数字向量结合起来，适当地转换为 R 的日期时间类型：

```
R> vec <- 1330938005000000 + cumsum(runif(1:5)*10)
R> vec
[1] 1.331e+15 1.331e+15 1.331e+15 1.331e+15 1.331e+15
R> as.POSIXct(vec/1e6, origin="1970-01-01")
[1] "2012-03-05 09:00:05.000004 CST"
[2] "2012-03-05 09:00:05.000006 CST"
[3] "2012-03-05 09:00:05.000016 CST"
[4] "2012-03-05 09:00:05.000021 CST"
[5] "2012-03-05 09:00:05.000029 CST"
R> 
```

# php - 谷歌饼图和 PHP

> ID：11494191
> 
> 赞同：0
> 
> 时间：2012-07-15T17:47:08.253
> 
> 标签：php, javascript, mysql, json, google-visualization

我想在我的网站上有一个谷歌饼图。饼图将填充数据库中的数据。我在[https://developers.google.com/chart/interactive/docs/php_example](https://developers.google.com/chart/interactive/docs/php_example)上查看了一些示例，但是在涉及 JSON 格式时我迷失了。

这里有些例子：

```
 <html>
   <head>
<!--Load the AJAX API-->
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript" src="jquery-1.6.2.min.js"></script>
<script type="text/javascript">

// Load the Visualization API and the piechart package.
google.load('visualization', '1', {'packages':['corechart']});

// Set a callback to run when the Google Visualization API is loaded.
google.setOnLoadCallback(drawChart);

function drawChart() {
  var jsonData = $.ajax({
      url: "getData.php",
      dataType:"json",
      async: false
      }).responseText;

  // Create our data table out of JSON data loaded from server.
  var data = new google.visualization.DataTable(jsonData);

  // Instantiate and draw our chart, passing in some options.
  var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
  chart.draw(data, {width: 400, height: 240});
}

</script>
</head>

<body>
  <!--Div that will hold the pie chart-->
  <div id="chart_div"></div>
</body>
</html> 
```

这是我迷路的片段（getData.php）：

```
 <?php 

// This is just an example of reading server side data and sending it to the client.
// It reads a json formatted text file and outputs it.

 $string = file_get_contents("sampleData.json");
 echo $string;

// Instead you can query your database and parse into JSON etc etc

 ?> 
```

我将数据存储在数据库中，而不是 JSON 格式。如何使用 MySQL 数据库查询处理 JSON 格式？如果您有一些示例或演示，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T17:52:27.707

首先要做的是查看有关该[`json_encode()`](http://php.net/manual/en/function.json-encode.php)方法的 PHP 手册。它提供了有关如何使用 PHP 生成 JSON 的示例。

这是[另一个类似 SO 问题](https://stackoverflow.com/questions/383631/json-encode-mysql-results)的简短示例：

```
// Get your data from DB
$sth = mysql_query("SELECT ...");
// Create an array
$rows = array();
// Loop over the DB result and add it to your array
while($r = mysql_fetch_assoc($sth)) {
    $rows[] = $r;
}
// Use json_encode() to turn the array into JSON
print json_encode($rows); 
```

如果您需要重命名数据库列，以便您的 JSON 数据在属性上获得与数据库中使用的名称不同的名称，则可以`AS`在 SQL 中使用。

```
SELECT blog_title as title ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T08:56:46.793

只是 echo php 结果 `var data = new google.visualization.DataTable([<?php echo $result ;?>]);`

您将按照以下格式从数据库中获取数据

```
 ['Task', 'Hours per Day'],
                      ['Work',     11],
                      ['Eat',      2],
                      ['Commute',  2],
                      ['Watch TV', 2],
                      ['Sleep',    7] 
```

我认为这对你有用，我在热图中使用相同的逻辑

# asp.net-mvc-3 - 实体框架：ObjectContext 和继承

> ID：11494193
> 
> 赞同：0
> 
> 时间：2012-07-15T17:47:20.500
> 
> 标签：asp.net-mvc-3, entity-framework, entity-framework-4

我需要对我的班级进行 CRUd 操作（CompetenceSpecific）。Competence 具有三个派生类 - CompetenceFunction、CompetenceArea 和 CompetenceSpecifc

```
The error I recieved: 
  There are no EntitySets defined for the specified entity type 'CompetencyManagement.Domain.Entities.CompetenceFunction'. If 'CompetencyManagement.Domain.Entities.CompetenceFunction' is a derived type, use the base type instead. Parameter name: TEntity 
```

我应该如何纠正这个？请提出一个可以解决我的问题的解决方案。谢谢

请检查下面的代码，为简单起见，我删除了部分代码。

- 模型

```
public class Competence
{
    public int CompetenceID { get; set; }
    public int CourseID { get; set; }
...
}

public class CompetenceFunction : Competence
{

} 
```

--存储库和接口

```
public interface IRepository<T> where T : class
{
    T GetById(object id);
    IEnumerable<T> GetAll();
    IEnumerable<T> Query(Expression<Func<T, bool>> filter);
    void Add(T entity);
    void Remove(T entity);
}

public abstract class Repository<T> : IRepository<T>
    where T : class
{
    protected IObjectSet<T> _objectSet;

    public Repository(ObjectContext context)
    {
        _objectSet = context.CreateObjectSet<T>();
    }
...
}

public class CompetenceFunctionRepository : Repository<CompetenceFunction>
{
    public CompetenceFunctionRepository(ObjectContext context)
        : base(context)
    {
    }

    public override CompetenceFunction GetById(object id)
    {
        return _objectSet.SingleOrDefault(s => s.CompetenceID == (int)id);
    }
} 
```

--工作单位

```
public interface IUnitOfWork
{
    IRepository<CompetenceFunction> CompetenceFunctions { get; }
    IRepository<CompetenceArea> CompetenceAreas { get; }
    IRepository<CompetenceSpecific> CompetenceSpecifics { get; }
    void Commit();
}

public class UnitOfWork : IUnitOfWork, IDisposable
{
    private CompetenceFunctionRepository _competencefunction;
    private CompetenceAreaRepository _competencearea;
    private CompetenceSpecificRepository _competencespecifc;

    public UnitOfWork(ObjectContext context)
    {
        if (context == null)
        {
            throw new ArgumentNullException("Context was not supplied");
        }

        _context = context;
    }

    #region IUnitOfWork Members

    public IRepository<CompetenceFunction> CompetenceFunctions
    {
        get
        {
            if (_competencefunction == null)
            {
                _competencefunction = new CompetenceFunctionRepository(_context);
            }

            return _competencefunction;
        }
    }

    public IRepository<CompetenceArea> CompetenceAreas
    {
        get
        {
            if (_competencearea == null)
            {
                _competencearea = new CompetenceAreaRepository(_context);
            }

            return _competencearea;
        }
    }

    public IRepository<CompetenceSpecific> CompetenceSpecifics
    {
        get
        {
            if (_competencespecifc == null)
            {
                _competencespecifc = new CompetenceSpecificRepository(_context);
            }

            return _competencespecifc;
        }
    } 
```

--我在存储库的这一部分中遇到错误

```
public Repository(ObjectContext context)
    {
        _objectSet = context.CreateObjectSet<T>();
    }

  There are no EntitySets defined for the specified entity type 'CompetencyManagement.Domain.Entities.CompetenceFunction'. If 'CompetencyManagement.Domain.Entities.CompetenceFunction' is a derived type, use the base type instead. Parameter name: TEntity 
```

这是我在控制器中实现的方式

```
 private IUnitOfWork _unitOfWork;
 var a = _unitOfWork.CompetenceFunctions.GetAll();
 return View(a); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T23:47:11.507

您必须通过`OfType`函数获取派生类型，例如

```
context.CreateObjectSet<Competence>().OfType<CompetenceFunction>() 
```

在您的情况下，这意味着只有一个 CompetenceRepository 服务于 Competence 的所有衍生物。

* * *

**编辑**

（在您发表评论之后）
首先，UoW 用于临时存储应该在一批中处理的更改（例如要提交到数据库的更改）。`GetAll`和类似的功能是存储库的东西。

但是你需要存储库吗？我喜欢[这篇文章](https://stackoverflow.com/a/5488947/861716)。当开始了解 EF 时，我会专注于 EF 的来龙去脉，而不会被周围的架构分心。例如，从内部直接与上下文通信的服务开始，并公开 GetCompetenceFunctions、GetCompetenceAreas（使用`OfType`）和 SaveCompetenceFunction 等方法，...。

您可以直接从 MVC 控制器中的操作方法处理这些服务方法。

# performance - 使用 Selenium2 进行性能测试 Knockout、Angular 和 Backbone - Paul Hammant 的博客

> ID：11494194
> 
> 赞同：0
> 
> 时间：2012-07-15T17:47:22.917
> 
> 标签：performance, testing, backbone.js, knockout.js, angularjs

关于这些技术性能的有趣说明。在说？选择做哪个项目？我正在为一个项目寻找其中一种技术

[http://paulhammant.com/2012/04/12/performance-testing-knockout-angular-and-backbone-with-selenium2/](http://paulhammant.com/2012/04/12/performance-testing-knockout-angular-and-backbone-with-selenium2/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T20:39:06.217

由于性能问题，我不认为这篇文章在降级 angular.js 方面是决定性的。所以你的问题基本上是比较这三种技术......

它们解决了非常不同类型的问题，例如，backbone.js 实际上只是一个用于构建基于事件的 MV* 架构的库，而 knockout.js 和 angular.js 是更自以为是的框架。所以它真的将苹果与橙子进行比较......但人们无论如何都会尝试：http: [//codebrief.com/2012/01/the-top-10-javascript-mvc-frameworks-reviewed/](http://codebrief.com/2012/01/the-top-10-javascript-mvc-frameworks-reviewed/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T05:08:02.927

没有一个框架是为性能而设计的。它们被用来为开发人员提供指导。

Backbone 是迄今为止性能最低的，但即使使用 Backbone，如果调整得当，您也可以在平板电脑、手机和台式机上获得高 FPS。

渲染性能意味着：

*   只创建一次 DOM 元素，用新的模型内容更新 DOM
*   尽可能使用对象池
*   尽可能减少图像加载/解析，直到最后一分钟
*   注意触发 CSS 重新布局的 JavaScript
*   将渲染循环与浏览器的绘制循环联系起来
*   何时使用 GPU 层和合成要聪明
*   尽可能选择退出垃圾收集器以保持高帧速率

我在 github 上有一个 PerfView，它扩展了 Backbone 以提高渲染性能。[https://github.com/puppybits/BackboneJS-PerfView](https://github.com/puppybits/BackboneJS-PerfView)通过一些真实世界的例子，它可以在 Chrome 中保持 120FPS，在 iPad 上保持 56FPS。

# c# - 可以在 Asp.Net Web Api 路由中使用句点吗？

> ID：11494200
> 
> 赞同：21
> 
> 时间：2012-07-15T17:48:10.637
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing, asp.net-web-api

我正在从原始 http 处理程序中移动一个 API 项目，我在路径中使用句点：

```
http://server/collection/id.format 
```

我想在 Web Api（自托管）版本中遵循相同的 URL 架构，并尝试了这个：

```
var c = new HttpSelfHostConfiguration(b);
c.Routes.MapHttpRoute(
    name: "DefaultApiRoute",
    routeTemplate: "{controller}/{id}.{format}",
    defaults: new { id = RouteParameter.Optional, format = RouteParameter.Optional },
    constraints: null
); 
```

不幸的是，这似乎没有解决（/foo、/foo/bar 和 /foo/bar.txt 上的一致 404）。在“格式”之前使用斜线的类似模式可以正常工作：

```
var c = new HttpSelfHostConfiguration(b);
c.Routes.MapHttpRoute(
    name: "DefaultApiRoute",
    routeTemplate: "{controller}/{id}/{format}",
    defaults: new { id = RouteParameter.Optional, format = RouteParameter.Optional },
    constraints: null
); 
```

我还没有深入研究 Web Api 的代码，在我想到之前我会在这里询问这是否是 Web Api 中的已知限制，或者甚至是合理的限制。

更新：我没有提到“id”和“format”是字符串，这对于解决这个问题很重要。添加约束以从“id”标记中排除句点可以解决 404 问题。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-11-09T00:07:11.497

我可以通过执行以下操作来实现这一点：在 web.config 中的 system.webServer.handlers 中替换`"*."`为`"*"`，即删除句点。

```
<add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="*" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" /> 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-31T11:35:09.033

小心在 web.config 的 modules 属性中设置 runAllManagedModulesForAllRequests 选项

```
<modules runAllManagedModulesForAllRequests="true">..</modules> 
```

否则它将无法在 IIS 中工作（可能会由非托管处理程序处理）。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-07-15T18:54:37.863

我无法重现该问题。这应该有效。这是我的设置：

1.  创建一个新的 .NET 4.0 控制台应用程序
2.  切换到 .NET Framework 4.0 配置文件
3.  安装`Microsoft.AspNet.WebApi.SelfHost`NuGet
4.  定义一个`Product`

    ```
    public class Product
    {
        public int Id { get; set; }
        public string Name { get; set; }
    } 
    ```

5.  对应的 API 控制器：

    ```
    public class ProductsController : ApiController
    {
        public Product Get(int id)
        {
            return new Product
            {
                Id = id,
                Name = "prd " + id
            };
        }
    } 
    ```

6.  还有一个主持人：

    ```
    class Program
    {
        static void Main(string[] args)
        {
            var config = new HttpSelfHostConfiguration("http://localhost:8080");

            config.Routes.MapHttpRoute(
                name: "DefaultApiRoute",
                routeTemplate: "{controller}/{id}.{format}",
                defaults: new { id = RouteParameter.Optional, format = RouteParameter.Optional },
                constraints: null
            );

            using (var server = new HttpSelfHostServer(config))
            {
                server.OpenAsync().Wait();
                Console.WriteLine("Press Enter to quit.");
                Console.ReadLine();
            }
        }
    } 
    ```

现在，当您运行此控制台应用程序时，您可以导航到`http://localhost:8080/products/123.xml`. 但是当然您可以导航到`http://localhost:8080/products/123.json`并且您仍然会得到 XML。所以问题是：如何使用路由参数启用内容协商？

您可以执行以下操作：

```
 class Program
    {
        static void Main(string[] args)
        {
            var config = new HttpSelfHostConfiguration("http://localhost:8080");
            config.Formatters.XmlFormatter.AddUriPathExtensionMapping("xml", "text/html");
            config.Formatters.JsonFormatter.AddUriPathExtensionMapping("json", "application/json");

            config.Routes.MapHttpRoute(
                name: "DefaultApiRoute",
                routeTemplate: "{controller}/{id}.{ext}",
                defaults: new { id = RouteParameter.Optional, formatter = RouteParameter.Optional },
                constraints: null
            );

            using (var server = new HttpSelfHostServer(config))
            {
                server.OpenAsync().Wait();
                Console.WriteLine("Press Enter to quit.");
                Console.ReadLine();
            }
        }
    } 
```

现在您可以使用以下网址：

```
http://localhost:8080/products/123.xml
http://localhost:8080/products/123.json 
```

现在您可能想知道`{ext}`我们在路由定义中使用的路由参数和`AddUriPathExtensionMapping`方法之间的关系是什么，因为我们没有在任何地方指定它。好吧，你猜怎么着：它在`UriPathExtensionMapping`类中被硬编码`ext`，你不能修改它，因为它是只读的：

```
public class UriPathExtensionMapping
{
    public static readonly string UriPathExtensionKey;

    static UriPathExtensionMapping()
    {
        UriPathExtensionKey = "ext";
    }

    ...
} 
```

这一切都是为了回答你的问题：

> 可以在 Asp.Net Web Api 路由中使用句点吗？

是的。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-07-16T18:06:34.330

我接受了 Darin 的回答（是的，句点可以在路由 url 中使用），因为它对我的示例特别正确，但对我没有帮助。这是我的错，因为没有明确指出“id”是一个字符串，而不是一个整数。

要在字符串参数之后使用句点，路由引擎需要约束形式的提示：

```
var c = new HttpSelfHostConfiguration(b);
c.Routes.MapHttpRoute(
    name: "DefaultApiRoute",
    routeTemplate: "{controller}/{id}.{format}",
    defaults: new { id = RouteParameter.Optional, format = RouteParameter.Optional },
    constraints: new { id = "[^\\.]+" } // anything but a period
); 
```

将约束添加到前面的标记可以正确分解和处理入站 URL。如果没有提示，“id”标记可以被解释为匹配 URL 的剩余范围。这只是通常需要约束来描绘字符串参数之间的边界的特定情况。

是的，句点可以在 Asp.Net Web API 中的 URL 路由中使用，但如果它们遵循字符串参数，请确保对路由应用正确的约束。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-31T13:41:49.430

IIS 以文件下载的形式截取带有句点的请求。在您的 web.config 中，您可以将 IIS 配置为忽略特定的 URL 路径，因为 webapi 将改为处理请求。如果您希望 IIS 处理文件下载以及处理 webapi 调用，您可以在 web.config 中将 ManagedDllExtension 配置添加到 system.webServer.handlers。

```
 <add name="ManagedDllExtension" path="collection/*.*" verb="GET" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" /> 
```

# javascript - 更新现有的 javascript 变量

> ID：11494202
> 
> 赞同：2
> 
> 时间：2012-07-15T17:48:14.700
> 
> 标签：javascript

这可能是一个简单的问题，也可能不是一个简单的问题，因为我的 JavaScript 技能非常有限。我要做的就是修改函数中的变量，然后返回新的变量值，以便再次在函数中使用。

这方面的一个示例是一个简单的按钮，每次单击该按钮都会从变量中扣除 10 分。就像每次点击都会逐渐倒计时一样。问题是变量在每次返回时都没有更新。

也许我开始使用 javascript 的方法是出路，这就是为什么我似乎无法找到很多关于这个的原因。这是代码

```
<html>
<head>
<script type="text/javascript">

/*starting bank account*/
var bank = "200";
/* i want this function to deduct ten from the starting bank account and update the bank variable */
function Bank(bank) {
    var printout = document.getElementById("display_bank_result_here");
    bank = bank - 10;
    printout.innerHTML = bank;
    return bank;
}

</script>
</head>
<body>
<button onclick="Bank(bank)">remove 10 from bank</button>
<p id='display_bank_result_here'></p>
</body>
</html> 
```

先发制人地感谢大家。我希望有一天我能有足够的技能来回报我这个职位的其他人。

罗伯特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T17:56:12.193

这是范围造成的。范围定义了变量和方法的定义/定位。

函数内部的所有内容都在该特定函数的范围内。您的函数`Bank`还定义了相同的变量库。这将覆盖您在该函数的脚本顶部定义的变量 bank。

有两种选择：您可以完全删除函数的银行变量或更改其名称。对于您正在使用的内容，我将其删除。

将您的`Bank`功能更改为此

```
function Bank ()
{
    var printout=document.getElementById("display_bank_result_here");
    bank=bank-10;
    printout.innerHTML =bank;
    // You don't need to return it as it is changed inside the function
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T17:59:37.500

那是因为你[遮蔽](http://en.wikipedia.org/wiki/Variable_shadowing)了变量`bank`。

在函数`Bank`中，`bank`变量指的是局部变量，而不是全局变量。这应该不是问题，只要您使用`return`函数的值来更新全局变量：

```
<button onclick="bank = Bank(bank)">remove 10 from bank</button> 
```

当然，你也可以解决它避免阴影，例如：

```
function Bank () {
    var printout=document.getElementById("display_bank_result_here");
    bank -= 10;

    printout.innerHTML =bank;
} 
```

那么`return`就不需要了。

此外，您可以完全避免全局变量，`printout`输入起始值：

```
<button onclick="decreaseBank()">remove 10 from bank</button>
<p id='display_bank_result_here'>200</p> 
```

你的 JS 会是这样的：

```
function decreaseBank () {
    var printout = document.getElementById("display_bank_result_here");

    // with subtraction the value of `innerHTML` will be converted in Number
    // automatically.
    var bank = printout.innerHTML - 10;

    printout.innerHTML = bank;
} 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T17:51:24.003

在函数中传递参数库是不必要的。只需这样做：

```
function Bank() {
    var printout = document.getElementById("display_bank_result_here");
    bank = bank - 10;
    printout.innerHTML = bank;
} 
```

如果您将局部变量（您的参数）命名为 bank，那么它会隐藏全局变量 bank。对账单银行 = 银行 - 10；只会应用于局部变量而不是全局变量。

# php - 动态 W3C 验证

> ID：11494203
> 
> 赞同：2
> 
> 时间：2012-07-15T17:48:16.627
> 
> 标签：php, javascript, validation, w3c

我的网站上有一个小元素，显示当前页面标记的有效性。目前，它被静态设置为“HTML5 Valid”，因为我不断检查它是否实际上是 HTML5 有效的。如果不是，那么我会修复任何问题，使其保持 HTML5 有效。

不过，我希望这个元素是动态的。那么，有没有办法用当前 URL ping W3C 验证服务，接收结果，然后将结果插入 PHP 或 JavaScript 函数？W3C 是否为此提供了 API，还是您必须手动编写代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-08-05T17:15:50.093

W3C HTML 检查器（又名验证器）的维护者在这里。事实上，检查器确实公开了一个 API，让您可以这样做，例如：

[https://validator.w3.org/nu/?doc=https%3A%2F%2Fgoogle.com%2F&out=json](https://validator.w3.org/nu/?doc=https%3A%2F%2Fgoogle.com%2F&out=json)

…它以 JSON 形式返回结果。还有一个POST接口。

您可以在此处找到更多详细信息：

*   [https://github.com/validator/validator/wiki/Service-»-HTTP-interface](https://github.com/validator/validator/wiki/Service-%C2%BB-HTTP-interface)
*   [https://github.com/validator/validator/wiki/Service-»-Input-»-POST-body](https://github.com/validator/validator/wiki/Service-%C2%BB-Input-%C2%BB-POST-body)
*   [https://github.com/validator/validator/wiki/Service-»-Input-»-GET](https://github.com/validator/validator/wiki/Service-%C2%BB-Input-%C2%BB-GET)
*   [https://github.com/validator/validator/wiki/Output-»-JSON](https://github.com/validator/validator/wiki/Output-%C2%BB-JSON)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T17:51:28.153

他们没有我知道的 API。

因此，我的建议是：

使用页面的 URL（使用或）`GET`向结果页面 ( )发送请求 ( )。解析*有效*消息的响应（或简单的字符串搜索）。`http://validator.w3.org/check?uri=`[`file_get_contents()`](http://php.net/file_get_contents)[`curl`](http://php.net/curl)*[`DOMDocument`](http://php.net/domdocument)*

 ***注意：**这是一个脆弱的解决方案。如果 W3C 方面发生任何变化，则可能会中断。但是，它会起作用，而且这个工具已经使用了好几年了。

此外，如果您真的想要在您的实时站点上使用它，我强烈建议您使用某种缓存。在每个页面请求上都这样做是昂贵的。老实说，这应该是一个开发工具。正在运行并向您报告错误的东西。保持徽章静止。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-21T01:12:45.890

下面是一个如何实现 W3C API 以在 PHP 中验证 HTML 的示例：

```
 $curl = curl_init();
   curl_setopt_array($curl, array(
       CURLOPT_URL => "http://validator.w3.org/nu/?out=json",
       CURLOPT_RETURNTRANSFER => true,
       CURLOPT_ENCODING => "",
       CURLOPT_MAXREDIRS => 10,
       CURLOPT_TIMEOUT => 30,
       CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
       CURLOPT_CUSTOMREQUEST => "POST",
       CURLOPT_POSTFIELDS => '<... your html text to validate ...>',
       CURLOPT_HTTPHEADER => array(
           "User-Agent: Any User Agent",
           "Cache-Control: no-cache",
           "Content-type: text/html",
           "charset: utf-8"
       ),
   ));
   $response = curl_exec($curl);
   $err = curl_error($curl);
   curl_close($curl);
   if ($err) {
      //handle error here
      die('sorry etc...');
   }
   $resJson = json_decode($response, true); 
```

$resJson 看起来像这样：

```
{
    "messages": [
        {
            "type": "error",
            "lastLine": 13,
            "lastColumn": 110,
            "firstColumn": 5,
            "message": "Attribute “el” not allowed on element “link” at this point.",
            "extract": "css\">\n    <link el=\"stylesheet\" href=\"../css/plugins/awesome-bootstrap-checkbox/awesome-bootstrap-checkbox.min.css\">\n    <",
            "hiliteStart": 10,
            "hiliteLength": 106
        },
        {
            "type": "info",
            "lastLine": 294,
            "lastColumn": 30,
            "firstColumn": 9,
            "subType": "warning",
            "message": "Empty heading.",
            "extract": ">\n        <h1 id=\"promo_codigo\">\n     ",
            "hiliteStart": 10,
            "hiliteLength": 22
        },.... 
```

查看[https://github.com/validator/validator/wiki/Service-»-Input-»-POST-body](https://github.com/validator/validator/wiki/Service-%C2%BB-Input-%C2%BB-POST-body)了解更多详情。*

# ios - 多次缩放后图像缩小

> ID：11494217
> 
> 赞同：1
> 
> 时间：2012-07-15T17:49:53.670
> 
> 标签：ios, uiimageview, uiimage, cgaffinetransformscale

我不知道我做错了什么。多次缩放后，我的图像变小了？！？我按如下方式初始化变量：TOTAL_SCALE = 1.0; MIN_SCALE = 1.0；MAX_SCALE = 3.0；

这是我的pinchrecognizermethod：

```
- (void)pinchDetected:(UIPinchGestureRecognizer *)pinchRecognizer
{

CGFloat scale = pinchRecognizer.scale;
if (TOTAL_SCALE + (scale - 1.0) > MAX_SCALE) {
    scale = (MAX_SCALE - TOTAL_SCALE) + 1.0;
    TOTAL_SCALE = MAX_SCALE;
    imageView.transform = CGAffineTransformScale(imageView.transform, scale, scale);
}
else if(TOTAL_SCALE + (scale - 1.0) < MIN_SCALE){
    scale = (TOTAL_SCALE - MIN_SCALE) + 1.0;
    TOTAL_SCALE = MIN_SCALE;
    imageView.transform = CGAffineTransformScale(imageView.transform, scale, scale);
}
else{
    imageView.transform = CGAffineTransformScale(imageView.transform, scale, scale);
    TOTAL_SCALE += (scale - 1.0); 
}
pinchRecognizer.scale = 1.0;

} 
```

有人能找到我的错误吗？预先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T17:58:39.287

想想当`TOTALSCALE`大于时这条线会产生什么`MAXSCALE`：

```
scale = (MAX_SCALE - TOTAL_SCALE) + 1.0; 
```

作为一般指南，您应该乘以比例，而不是添加比例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T20:27:19.973

正如 Mark Ransom 建议的那样，我改变了乘法的加法：

```
CGFloat scale = pinchRecognizer.scale;
if (TOTAL_SCALE*scale > MAX_SCALE) {
    scale = MAX_SCALE/TOTAL_SCALE;
    TOTAL_SCALE = MAX_SCALE;
    imageView.transform = CGAffineTransformScale(imageView.transform, scale, scale);
}
else if(TOTAL_SCALE*scale < MIN_SCALE){
    scale = MIN_SCALE/TOTAL_SCALE;
    TOTAL_SCALE = MIN_SCALE;
    imageView.transform = CGAffineTransformScale(imageView.transform, scale, scale);
}
else{
    imageView.transform = CGAffineTransformScale(imageView.transform, scale, scale);
    TOTAL_SCALE *= scale; 
} 
```

# java - 如何处理 JOptionPane 中的取消按钮

> ID：11494222
> 
> 赞同：13
> 
> 时间：2012-07-15T17:50:13.653
> 
> 标签：java, swing, jbutton, joptionpane

我创建了一个`JOptionPane`类型`showInputDialog`。当它打开它时，它会显示两个按钮：`OK`和`Cancel`。当我按下按钮时，我想处理该动作`Cancel`，但我不知道如何达到它。我怎么才能得到它？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-15T17:55:04.647

例如：

```
int n = JOptionPane.showConfirmDialog(
                            frame, "Would you like green eggs and ham?",
                            "An Inane Question",
                            JOptionPane.YES_NO_OPTION);
if (n == JOptionPane.YES_OPTION) {

} else if (n == JOptionPane.NO_OPTION) {

} else {

} 
```

或者`showOptionDialog`：

```
Object[] options = {"Yes, please", "No way!"};
int n = JOptionPane.showOptionDialog(frame,
                "Would you like green eggs and ham?",
                "A Silly Question",
                JOptionPane.YES_NO_OPTION,
                JOptionPane.QUESTION_MESSAGE,
                null,
                options,
                options[0]);
if (n == JOptionPane.YES_OPTION) {

} else if (n == JOptionPane.NO_OPTION) {

} else {

} 
```

有关更多详细信息，请参阅[如何制作对话框](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)。

编辑：`showInputDialog`

```
String response = JOptionPane.showInputDialog(owner, "Input:", "");
if ((response != null) && (response.length() > 0)) {

} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-09-21T16:12:01.247

这是一个老问题，我是 Java 新手，所以可能有更好的解决方案，但我想知道同样的问题，也许它可以帮助其他人，我所做的是检查响应是否为空。

如果用户单击“取消”，则响应将为空。如果他们在没有输入任何文本的情况下单击“确定”，则响应将是空字符串。

这对我有用：

```
//inputdialog 
    JOptionPane inpOption = new JOptionPane();

    //Shows a inputdialog
    String strDialogResponse = inpOption.showInputDialog("Enter a number: "); 

    //if OK is pushed then (if not strDialogResponse is null)
    if (strDialogResponse != null){

        (Code to do something if the user push OK)  

    }
    //If cancel button is pressed
    else{

        (Code to do something if the user push Cancel)

    } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-15T17:54:36.783

showMessageDialog 不应显示两个按钮，因此您的代码或您对它的解释有问题。无论如何，如果您想给用户一个选择并想要检测该选择，请不要使用 showMessageDialog 而是使用 showConfirmDialog，并获取返回的 int 并测试它是否为 JOptoinPane.OK_OPTION。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-03T04:59:39.153

```
package Joptionpane;

import javax.swing.JOptionPane;

public class Cancle_on_JOptionPane {

    public static void main(String[] args) {
        String s;
        int i;
        for (i=0;i<100;i++){
            s = JOptionPane.showInputDialog(null,"What is your favorite fruit ?");
            try {
                if (s.equals("")) {
                    JOptionPane.showMessageDialog(null," Enter your answer !!!"," ^-^ Information^-^ ",JOptionPane.INFORMATION_MESSAGE);
                    i=2;
                } else {
                    JOptionPane.showMessageDialog(null," s = "+s," ^-^ Information^-^ ",JOptionPane.INFORMATION_MESSAGE);
                    i=100;
                }
            }
            catch (Exception e) {
                JOptionPane.showMessageDialog(null,"Cancle answer !!!"," ^-^ Information^-^ ",JOptionPane.INFORMATION_MESSAGE);
                i=100;
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-03T23:47:46.983

你可以这样做：

```
String val = JOptionPane.showInputDialog("Value: ");
if(val == null){
  // nothing goes here if yo don't want any action when canceled, or
  // redirect it to a cancel page if needed
}else{
  //insert your code if ok pressed
  // JOptionPane return an String, as you was talking about int
  int value = Integer.ParseInt(val);
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-03-25T16:52:42.873

这可能是你的答案：

```
package Joptionpane;

import javax.swing.JOptionPane;

public class Cancle_on_JOptionPane {

    public static void main(String[] args) {
        String s;
        int i;
        for(i=0;i<100;i++){
        s = JOptionPane.showInputDialog(null,"What is your favorite fruit ?");
                        try{
                                 if(s.equals(""))  {
                                                            JOptionPane.showMessageDialog(null," Enter your answer !!!"," ^-^ Information^-^ ",JOptionPane.INFORMATION_MESSAGE);
                                                            i=2;
                                                       }
                                 else  {
                                           JOptionPane.showMessageDialog(null," s = "+s," ^-^ Information^-^ ",JOptionPane.INFORMATION_MESSAGE);
                                           i=100;
                                         }
                            }
        catch(Exception e)
              {
                 JOptionPane.showMessageDialog(null,"Cancle answer !!!"," ^-^ Information^-^ ",JOptionPane.INFORMATION_MESSAGE);
                 i=100;
              }
     }
   }
} 
```

# copy - addToFolder()：文件的副本版本被删除，如果原版本被删除

> ID：11494223
> 
> 赞同：1
> 
> 时间：2012-07-15T17:50:18.097
> 
> 标签：copy, google-apps-script, directory, google-sheets

几天前我开始使用 google 脚本进行开发，最近加入了 stackoverflow。我对 addToFolder() 函数有疑问。我有以下代码将我的新电子表格复制到我的 Google Drive 中的文件夹（测试/表格）中：

```
var ss = SpreadsheetApp.create("test");
var ssID = ss.getId();
DocsList.getFileById(ssID).addToFolder(DocsList.getFolder("test/sheets")); 
```

我的问题是现在我有同一个文件的 2 个版本（一个在我的 Google Drive 文件夹的根目录中，另一个在 test/sheets 文件夹中），每当我尝试删除其中一个副本时，另一个副本也会被删除. 有没有办法删除旧文件并保留新文件，或者有没有办法首先在所需文件夹中创建文件？

* * *

**编辑 ：**

感谢您的快速回复。我玩了几个小时，但仍然无法将文件复制到目标文件夹。问题是，即使我使用文件的 makeCopy 方法，仍然 addToFolder 是提及文件夹的唯一选项。同样，这最终在目标文件夹中具有标记的文件名。我对复制方法有同样的问题。
这是我的新代码：

```
var SetLocationFile = "icompare/sheets/stocks" 
var FolderID = DocsList.getFolder(SetLocationFile); 
var FileID = DocsList.getFileById(ssID); 
FileID.makeCopy("test3").addToFolder(FolderID); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T21:56:14.800

Google Docs\Google Drive 中的文件夹实际上是标签。当您将文件“添加”到文件夹“test/sheets”时，您不会复制文件，只需将标签“test/sheets”附加到它。现在，相同的文件显示在“test/sheets”文件夹（即在所有带有标签“test/sheets”的文件列表中）和根目录中。如果你想复制文件，你应该使用[复制](https://developers.google.com/apps-script/class_docslist#copy)方法。（如果我误解了你的问题，请告诉我。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T22:27:12.763

我意识到这是一个老问题，但您可以简单地使用`.removeFromFolder(DocsList.getRootFolder());`从根文件夹中删除文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T09:38:20.227

我也想知道这个问题的答案.. API 甚至没有提供创建电子表格并将它们放置在某个地图中的方法似乎相当“奇怪”？不，我不想要文件的副本，我希望文件在特定地图中，而不是在其他地图中......

# ruby-on-rails - Ruby on Rails 教程第 10 章帮助 - 失败的测试

> ID：11494229
> 
> 赞同：1
> 
> 时间：2012-07-15T17:51:10.603
> 
> 标签：ruby-on-rails, ruby

我在使用 Michael Hartl 的 Ruby on Rails 教程时遇到了一些问题。我在第 10 章结束时遇到了大量失败的测试。我已经将我的代码与 Michael 放在一起的 github repo 进行了比较，它们排成一行。这是失败的测试报告：

```
 1) Authentication signin with valid information 
     Failure/Error: click_button "Sign in"
     ActionView::Template::Error:
       Missing partial shared/stats with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. Searched in:
         * "/Users/bobbysudekum/Documents/Projects/rails/Secondattempt/sample_app_three/app/views"
     # ./app/views/users/show.html.erb:11:in `_app_views_users_show_html_erb___2309319721249673303_70162631795520'
     # (eval):2:in `click_button'
     # ./spec/requests/authentication_pages_spec.rb:34:in `block (4 levels) in <top (required)>'

  2) Authentication signin with valid information 
     Failure/Error: click_button "Sign in"
     ActionView::Template::Error:
       Missing partial shared/stats with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. Searched in:
         * "/Users/bobbysudekum/Documents/Projects/rails/Secondattempt/sample_app_three/app/views"
     # ./app/views/users/show.html.erb:11:in `_app_views_users_show_html_erb___2309319721249673303_70162631795520'
     # (eval):2:in `click_button'
     # ./spec/requests/authentication_pages_spec.rb:34:in `block (4 levels) in <top (required)>'

  3) Authentication signin with valid information 
     Failure/Error: click_button "Sign in"
     ActionView::Template::Error:
       Missing partial shared/stats with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. Searched in:
         * "/Users/bobbysudekum/Documents/Projects/rails/Secondattempt/sample_app_three/app/views"
     # ./app/views/users/show.html.erb:11:in `_app_views_users_show_html_erb___2309319721249673303_70162631795520'
     # (eval):2:in `click_button'
     # ./spec/requests/authentication_pages_spec.rb:34:in `block (4 levels) in <top (required)>'

     # REMOVED 43 more identical errors 
```

### 从 github 移植的视图

```
<% provide(:title, @user.name) %>
<div class="row">
  <aside class="span4">
    <section>
      <h1>
        <%= gravatar_for @user %>
        <%= @user.name %>
      </h1>
    </section>
    <section>
      <%= render 'shared/stats' %>
    </section>
  </aside>
  <div class="span8">
    <%= render 'follow_form' if signed_in? %>
    <% if @user.microposts.any? %>
      <h3>Microposts (<%= @user.microposts.count %>)</h3>
      <ol class="microposts">
        <%= render @microposts %>
      </ol>
      <%= will_paginate @microposts %>
    <% end %>
  </div>
  </div>
</div> 
```

很抱歉没有包含示例代码 - 超出了字符数限制。请查阅 github 上的其余代码 - [https://github.com/rsudekum/sample_app_three](https://github.com/rsudekum/sample_app_three)

作为 Rails/ruby 的新手，我真的不知道在失败的测试中要寻找什么。如果有人能指出我正确的方向，那将非常感激。

先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T18:54:38.267

请查看我的拉取请求：[https ://github.com/rsudekum/sample_app_three/pull/1](https://github.com/rsudekum/sample_app_three/pull/1)

这是我克隆应用程序并调查错误时的笔记。请注意，我在发布对答案的评论*之前*就开始了调查，因此我可能已经注意到您已经知道的事情。无论如何，所有规格现在都在我的机器上传递。我试图使应用程序类似于第 10 章末尾的教程状态，但我从未遵循过本教程，因此它可能不完全匹配。

第一次迁移 .`20120711232738_create_users.rb`似乎已将其整个文件内容替换为 `20120714233631_create_microposts.rb`. （意外复制粘贴？）恢复到其原始内容可以解决迁移问题。

部分输入`views/shared/_stats.html.erb`丢失了。既然你说你刚刚完成了第 10 章，而这个部分直到第 11 章才介绍，所以我决定注释掉对它的引用而不是更新部分本身，因为部分引用了直到第 11 章才讨论的内容。

部分同上`follow_form`。

根据清单 10.42 和 10.47， the`shared/feed`和`shared/feed_item`partials 不正确。我更正了它们以反映这些列表。

`object: f.object`您忘记在渲染 `error_messages`部分 from时进行分配`users/edit.html.erb`。

你用`confirm: "..."`在`users/_user.html.erb`. 没关系，但已弃用，所以我改为`data: { confirm: "..." }`改为。

同上。`confirm`_`microposts/_microposts.html.erb`

您忘记添加`SessionsController#destroy`. 清单 8.29 对此进行了介绍。我添加了它。

# javascript - 为什么 chrome.browserAction.onClicked 未定义？

> ID：11494232
> 
> 赞同：54
> 
> 时间：2012-07-15T17:51:20.873
> 
> 标签：javascript, google-chrome-extension

我正在编写一个 Chrome 扩展程序，当单击浏览器操作图标时，它会将我重定向到一个 URL。

我正在尝试使用：

```
chrome.browserAction.onClicked.addListener 
```

但我明白了

> 未捕获的类型错误：无法读取未定义的属性“onClicked”

这是我的清单文件：

```
{
    "name": "first extension",
    "version": "2.2.12",
    "description": "redirct to a link icon",
    "browser_action": {
        "default_icon": "icontest.png",
        "default_title": "Do action"
    },
    "permissions": ["tabs", "http://*/*"],
    "content_scripts": [{
        "matches": ["http://*.twitter.com/*", "https://*.twitter.com/*"],
        "js": ["twterland.js"]
    }],
    "icons": {
        "16": "icontest.png",
        "48": "icontest.png",
        "128": "icontest.png"
    }
} 
```

这是我的 js 文件：

```
chrome.browserAction.onClicked.addListener(function(tab) { alert("hi"); }); 
```

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2016-07-12T20:18:15.797

### 经典清单V2

对于那些已经添加了类似

```
"background": {
    "scripts": ["background.js"]
} 
```

仍然得到`Cannot read property 'onClicked' of undefined`- 只需添加

```
"browser_action": {} 
```

进入你的 manifest.json

### 清单V3

manifest.json：`action`不使用`browser_action`，另见[迁移指南](https://developer.chrome.com/docs/extensions/mv3/intro/mv3-migration/)。

```
"background": {"service_worker": "background.js"}
"action": {} 
```

background.js：`chrome.action`不使用`chrome.browserAction`.

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-07-15T18:19:19.317

代码似乎在您的`twterland.js`文件中，这是您的内容脚本。`browserAction`只能在扩展页面中使用，所以不能在内容脚本中使用。

文档：[https ://developer.chrome.com/extensions/content_scripts](https://developer.chrome.com/extensions/content_scripts)

> 但是，内容脚本有一些限制。**他们不能**：
> -**使用 chrome.* API**（chrome.extension 的部分除外）
> - 使用由其扩展页面定义的
> 变量或函数 - 使用由网页或其他内容脚本定义的变量或函数

而是将其放在[背景页面](https://developer.chrome.com/extensions/background_pages.html)上。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2017-02-21T21:52:38.480

如果您没有`"browser_action"`在您的中定义属性，`manifest.json`则可能会发生此错误。@Kirill 的答案有效，但您还必须添加一个空白`icon.png`文件，否则 chrome 会抛出无法找到此类文件的错误。

将此添加到`manifest.json`文件*应该*抑制这是错误：

```
"browser_action": {} 
```

请务必阅读[文档以进一步](https://developer.chrome.com/extensions/browserAction) 了解如何使用该`"browser_action"`设置。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-12-10T23:20:42.500

我也得到了这个，添加

```
"persistent": true 
```

我在 manifest.json 中的背景声明解决了它。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-03-18T23:46:55.327

如果您使用 manifest_version 3，可能会出现同样的问题。在这种情况下

*   “background.scripts”应替换为“background.service_worker”
*   “browser_action”应替换为“action”
*   在 js 代码中 chrome.browserAction 应该替换为 chrome.action

详细信息可以在这里找到：[Manifest version 3 迁移文档](https://developer.chrome.com/docs/extensions/mv3/intro/mv3-migration/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-07-11T17:26:57.540

请注意，您只能在 manifest‎.json 文件中添加`app`、`browser_action`、中的一个。`page_actions`

例如，要使用[chrome.browserAction.setBadgeText](https://developer.chrome.com/extensions/browserAction#method-setBadgeText)，您应该`browser_action`在 manifest‎.json 中有该字段。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2019-04-28T09:36:03.587

确保我们在 manifest.json 的背景脚本数组中的 background.js 之前没有 jquery.js。

```
"background": {
    "scripts": ["background.js","jquery.js"]
} 
```

# google-app-engine - java google ap引擎中的一对多关系导致错误？

> ID：11494240
> 
> 赞同：0
> 
> 时间：2012-07-15T17:52:19.737
> 
> 标签：google-app-engine, servlets, persistence, jdo, datanucleus

我已经实现了一个系统来保存有关用户的信息。所以我在我的班级有聚合所以用户类有来自联系人类的列表......等等在第一页“测试它只是为了通过电话号码注册用户”必须将用户保存在数据库中但是这会导致错误当我在 Google 应用引擎中部署我的项目 < **500 服务器错误**>

另一个页面用于更新先前已注册的现有用户，因此这将添加到用户对象拥有的列表中。

*用户类*

```
@PersistenceCapable
public class User implements Serializable{
@PrimaryKey
@Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
private Key key;

 @Persistent
public String userNumber;

 @Persistent (mappedBy = "userC")
 public List<Contact> UserContacts =new  ArrayList<Contact>();

 public void AddContact(String name,String number) {
     Contact C=new Contact();
     C.ContactName=name;
     C.PhoneNumber=number;
     this.UserContacts.add(C);   }
     } 
```

*接触类*

```
 @PersistenceCapable
public class Contact implements Serializable{
    @PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    private Key key;

     @Persistent
        public String ContactName;

     @Persistent
    public String PhoneNumber;  
             @Persistent
    public User userC; } 
```

**此页面原因注册用户测试将获取用户电话号码并注册应使用此号码** *测试页面创建新用户*

```
@SuppressWarnings("serial") 
```

公共类测试扩展 HttpServlet {

```
public void doGet(HttpServletRequest req, HttpServletResponse resp)
        throws IOException {
        resp.setContentType("text/html");
        resp.getWriter().println("<html><body><form  method = \"POST\"     action=\"/signup\">" + "please enter ur number :"+"<h4><label>name :  <input name =  \"userphoneNUMBER\" type =  \"text \" size =  \"25 \" />  </label>"+"<p> <input type = \"submit\" value = \"Submit\" />"+ "</form></body></html>");

    }
} 
```

**本页取号创建用户**

```
@SuppressWarnings("serial")
public class SignUP extends HttpServlet {
    public void doPost(HttpServletRequest req, HttpServletResponse resp)
            throws IOException {
        resp.setContentType("text/plain");
        String user_PhoneNumber=req.getParameter("userphoneNUMBER");
        User obj = new User();
    obj.userNumber=user_PhoneNumber;
    resp.getWriter().println(obj.userNumber );
        PersistenceManager pm = PMF.get().getPersistenceManager();

        try {
            pm.makePersistent(obj);
        } finally {
            pm.close();

        } }  } 
```

***此页面继续更新已经存在的用户对象的值***

```
 @SuppressWarnings("serial")
public class Testinfo extends HttpServlet {
    public void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws IOException {
        resp.setContentType("text/html");
        resp.getWriter().println("<html><body><form  method = \"POST\" action=\"/saveinfo\">" +
                "<center> <h2>please fill this form :</h2> </br> "+
"<h4><label> ContactName :  <input name =  \"ContactName\" type =  \"text \" size =  \"25 \" />  </label>"
+
"<p> <input type = \"submit\" value = \"Submit\" />"+
                "</form></body></html>");
    } 
```

}

**此页面用于保存导致错误的信息，并且不会在应用引擎中保存任何值**

```
 @SuppressWarnings("serial")
public class SaveInfo extends HttpServlet {
    public void doPost(HttpServletRequest req, HttpServletResponse resp)
            throws IOException {
        resp.setContentType("text/plain");

        String ContactName = req.getParameter("ContactName");
        String ContactNumber = req.getParameter("ContactNumber");
                   PersistenceManager pm = PMF.get().getPersistenceManager();
        Query query = pm.newQuery("select from " + User.class.getName());
        List<User> list = (List<User>) query.execute();
        for (User obj : list) {

            if (obj.userNumber.equals("111")) {
                 pm.currentTransaction().begin();
                                     obj.AddContact(ContactName, ContactNumber);

                pm.makePersistent(obj);

                 pm.currentTransaction().commit(); }
            }
                          pm.close(); }  } 
```

这个*111*用于测试，我之前输入的用户电话号码。

那么我该如何处理列表和聚合问题呢？

**当要更新用户信息时发生此错误**

```
Uncaught exception from servlet
javax.jdo.JDOUserException: Identifier expected at character 1 in "*" at         org.datanucleus.jdo.NucleusJDOHelper.getJDOExceptionForNucleusException(NucleusJDOHelper.java:375)
at org.datanucleus.jdo.JDOQuery.execute(JDOQuery.java:230)
at sstooree.SaveInfo.doPost(SaveInfo.java:44)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:102)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-15T18:20:35.803

查询中的问题

改变这个

```
Query query = pm.newQuery("select from " + User.class.getName()); 
```

至

```
Query query = pm.newQuery("select * from " + User.class.getName()); 
```

您没有选择任何列。导致 sql 语法错误

# javascript - 如果单击另一个链接，则从 ID 中删除类，反之亦然

> ID：11494249
> 
> 赞同：0
> 
> 时间：2012-07-15T17:53:07.763
> 
> 标签：javascript, jquery

我一直在努力寻找 jQuery 问题的解决方案。我有一个包含 2 个 div 和每个链接的父容器。如果在其中一个 div 中单击链接，则会将一个类添加到父容器（以更改背景）。如果单击了另一个链接，我想检查是否已经从另一个链接的单击中添加了一个类并被删除。

发生了什么：当我单击第一个链接时，该类`inside-office`已添加。然后我点击第二个链接，它会在不删除第一个链接的情况下添加它。

这是我到目前为止没有成功的代码：

```
$("a.in-office").click(function() {
    if($('#fullwrap').hasClass('outside-office')) {
    $(this).removeClass('outside-office');
    }
    $('#top_barwrap').parent().addClass('inside-office');
    $('.blockcase').fadeIn();
    $('.lead-title, .subtitle').fadeOut();
    $('#top_barwrap').animate( { height:'150px' }, { queue:false, duration: 500 });
});

$("a.out-office").click(function() {
    if($('#fullwrap').hasClass('inside-office')) {
    $(this).removeClass('inside-office');
    }
    $('#top_barwrap').parent().addClass('outside-office');
    $('.blockcase').fadeIn();
    $('.lead-title, .subtitle').fadeOut();
    $('#top_barwrap').animate( { height:'150px' }, { queue:false, duration: 500 });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T18:03:54.000

将 $(this) 更改为 $('#fullwrap')，因为您正在检查 id 为“fullwrap”的元素上的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T18:32:11.990

这就是你需要的。说明：您的 $(this) 从来没有引用它应该的 $('#fullwrap') 。您的 $(this) 实际上是指 $('a.in-office') 或 $('a.out-office')。

正确代码：

```
$("a.in-office").click(function() {
    var $this = $('#fullwrap');
    if($this.hasClass('outside-office')) {
        $this.removeClass('outside-office');
    }
    $('#top_barwrap').parent().addClass('inside-office');
    $('.blockcase').fadeIn();
    $('.lead-title, .subtitle').fadeOut();
    $('#top_barwrap').animate( { height:'150px' }, { queue:false, duration: 500 });
});

$("a.out-office").click(function() {
    var $this = $('#fullwrap');
    if($this.hasClass('inside-office')) {
        $this.removeClass('inside-office');
    }
    $('#top_barwrap').parent().addClass('outside-office');
    $('.blockcase').fadeIn();
    $('.lead-title, .subtitle').fadeOut();
    $('#top_barwrap').animate( { height:'150px' }, { queue:false, duration: 500 });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T17:56:25.020

使用`toggleClass`. 如果该类存在，它将删除该类，否则添加它。

```
$(this).toggleClass('outside-office'); 
```

如果其中一个类已经存在，您可以使用在两个类之间切换

```
 $(this).toggleClass('outside-office inside-office'); 
```

# ruby-on-rails - 使用 Rails / Spork / TestUnit 运行所有测试

> ID：11494254
> 
> 赞同：3
> 
> 时间：2012-07-15T17:53:46.787
> 
> 标签：ruby-on-rails, testunit, spork

[这里](https://github.com/sporkrb/spork-testunit/)的文档说：

> 然后，一旦 spork 运行，调用 testdrb（例如 testdrb -Itest test/your_test.rb）在 Spork 下运行您的测试。

但这一次只运行一个

如果不指定文件，它会失败：

```
$ testdrb
Exception encountered: #<SystemExit: exit> 
```

我发现我可以做到这一点，这会有所帮助：

```
testdrb -I test test/functional/* 
```

但是仍然不知道如何以我可以使用的方式使用一个简单的命令来运行它们

```
rake test 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T13:43:20.173

我通常*为所有测试*写这个：

```
testdrb -I test ./test/**/*_test.rb 
```

为了简单起见，我将其添加到我的`.bashrc`

```
alias td="testdrb -I test"
alias tdall="testdrb -I test ./test/**/*_test.rb" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T19:12:09.987

这似乎做到了：

```
testdrb -I test $(ls test/**/*_test.rb) 
```

**编辑**

其实这样更好：

```
testdrb -I test test/**/*_test.rb 
```

# java - 从 RAR 文件加载文件

> ID：11494255
> 
> 赞同：0
> 
> 时间：2012-07-15T17:54:02.740
> 
> 标签：java, io, rar

我尝试从 RAR 加载文件。我正在使用

```
sFileName=Thread.currentThread().getContextClassLoader().getResource("common.xml").getFile(); 
```

立即，我的要求是将文件加载到文件 IO。

```
fSettings = new File(sFileName);
if (fSettings.exists() && fSettings.isFile()) { 
```

是否可以从类路径加载文件并创建文件对象？是否可以验证？

分享你的意见。

我收到以下错误：

> 22:44:16,718 错误 [STDERR] **java.io.FileNotFoundException:** file:\C:\Servers\ApplicationServers\jboss-4.2.3.GA\server\XXXX\tmp\deploy\XXX.ear-contents\XXX.rar !\common.xml（文件名、目录名或卷标语法不正确）22:44:16,718 错误 [STDERR] at java.io.FileInputStream.open（本机方法）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T18:09:58.350

您获得的 URL`getResource()`可能不是文件，在这种情况下，这不是因为您`common.xml`在 RAR 文件中。如果您想访问`common.xml`，只需执行`getResourceAsStream()`并阅读`InputStream`.

# android - 为什么 LogCat 将所有项目显示为警告（橙色）？

> ID：11494257
> 
> 赞同：14
> 
> 时间：2012-07-15T17:54:16.100
> 
> 标签：android, eclipse, logcat

Eclipse 表现得很奇怪。它将每个日志项显示为警告（橙色）。此外，每个人的Time是'?:??'，PID是'?'，Tag也是'?'。

下面的截图

![LogCat，什么鬼？](../Images/fdb0e93f3228965acf6111b248c6e146.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-15T18:59:36.413

您的 Eclipse 或 SDK 似乎已过时，只需更新它即可。

您可能正在使用当前 SDK 版本不完全支持的 Android 版本（4.1??）测试您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T18:17:27.710

请确保设备在线并且在 DDMS 中选择了它，并且这是您正在安装应用程序的设备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T13:22:22.613

[我也遇到了这个问题，我在这里](https://stackoverflow.com/questions/11439821/debugging-issues-android-eclipse)找到了解决方案- 尝试更新你的 SDK！在 Eclipse 中，转到“Android SDK 管理器”并尝试更新“Android SDK 工具”和“Android SDK 平台工具”。注意：它可能还会要求您更新 ADT...

顺便说一句，当我将我的 android 设备更新到 4.1 Jelly Beans 时，这发生在我身上

希望有帮助，

干杯!

# vb.net - .Net 中的精确和快速计时器

> ID：11494258
> 
> 赞同：0
> 
> 时间：2012-07-15T17:54:24.897
> 
> 标签：vb.net, timer, precision

我想使用 VB.Net 创建一个程序，它每 200 毫秒以高精度播放声音（让我们说系统哔声，或 100 毫秒长的 wav 文件）。我尝试了 .Net 的 Timer，但它不准确，并且哔声不会在相同的时间间隔内发出。我还尝试了 kernel32.dll 中的 CreateTimerQueueTimer，但仍然遇到同样的问题。

是否有更准确的计时器可以用来在设定的时间间隔内调用函数？同样，重点是精度。

# javascript - 使用 javascript 删除类

> ID：11494266
> 
> 赞同：0
> 
> 时间：2012-07-15T17:55:30.170
> 
> 标签：javascript

我需要从页面中的所有元素中删除特定的类属性。那就是我们需要从当前 html 页面的所有元素中删除特定的类。我们只有类名作为参考（我们需要从该页面中删除），没有别的。

请注意，**我不能使用任何东西作为参考，比如 id 或其他类**，我也不能为此使用任何 JavaScript 库......

对此的任何建议将不胜感激。

另请注意，我们需要删除的类不会超过两次。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-15T18:08:44.090

如果您使用的是现代浏览器：

```
var forEach = Array.prototype.forEach;
var className = "yourclass";

forEach.call(document.querySelectorAll("." + className), function(node) {
    node.classList.remove(className);
}); 
```

请参阅：[forEach](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach)、[querySelectorAll](https://developer.mozilla.org/en/DOM/Document.querySelectorAll)和[classList](https://developer.mozilla.org/en/DOM/element.classList)以获取更多详细信息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-15T18:01:58.760

```
function removeClass(className) {
    // convert the result to an Array object
    var els = Array.prototype.slice.call(
        document.getElementsByClassName(className)
    );
    for (var i = 0, l = els.length; i < l; i++) {
        var el = els[i];
        el.className = el.className.replace(
            new RegExp('(^|\\s+)' + className + '(\\s+|$)', 'g'),
            '$1'
        );
    }
} 
```

并将其用作：

```
removeClass('desired-class-name'); 
```

**更新**：查看现场演示：http: [//jsbin.com/eyuxur](http://jsbin.com/eyuxur)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T18:02:22.363

这是一种在非常大的页面上可能会很慢的方法，但会从所有元素中删除该类。

```
var list = document.getElementsByTagName('*');
for(var i=0; i < list.length; i++){
  list[i].className = list[i].className.replace('YourClassName','');
} 
```

# netbeans - 未找到类 org.datanucleus.jdo.JDOPersistenceManagerFactory

> ID：11494267
> 
> 赞同：2
> 
> 时间：2012-07-15T17:55:34.673
> 
> 标签：netbeans, import, jdo, datanucleus

我的团队将 datanucleus 库用于客户端-服务器应用程序。我们使用了 3.0.0 版本。我们可以通过 NetBeans 成功构建应用程序。问题是，当服务器端应用程序运行时，我们得到了这个错误：

```
Exception in thread "main" javax.jdo.JDOFatalUserException: Class org.datanucleus.jdo.JDOPersistenceManagerFactory was not found. 
```

抛出异常的代码行：

```
mPMF = JDOHelper.getPersistenceManagerFactory(Utilities.SERVER_JDO_CONFIG_FILE); 
```

我们已经包含了 datanucleus-api-jdo-3.0.0-release.jar，它确实包含有问题的 org.datanucleus.jdo.JDOPersistenceManagerFactory，所以我们不知道这里出了什么问题。

以前有人经历过吗？之前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-05T22:36:44.333

如果您使用 SBT，请连接以下设置...

```
val deps_database : Seq[Setting[_]] =
  Seq(
    libraryDependencies ++= Seq(
      "javax.jdo"              %   "jdo-api"                              % "3.1",
      "org.datanucleus"        %   "datanucleus-core"                     % "4.0.6",  //TODO:: Versions.datanucleus,
      "org.datanucleus"        %   "datanucleus-api-jdo"                  % "4.0.5",
      "org.datanucleus"        %   "datanucleus-jdo-query"                % "4.0.4",
      "org.datanucleus"        %   "datanucleus-rdbms"                    % "4.0.11",
      "org.datanucleus"        %   "datanucleus-mongodb"                  % "4.0.5",
      "com.h2database"         %   "h2"                                   % "1.4.185",
      "org.mongodb"            %   "mongo-java-driver"                    % "2.1.3",
      "org.postgresql"         %   "postgresql"                           % "1.4-1200-jdbc41" )) 
```

...在您的项目或子模块中，如下所示：

```
lazy val root =
  project.in(file("."))
    .settings(buildInfoSettings:_*)
    .settings(disablePublishing:_*)
    .aggregate(model, data, headless)

lazy val util =
  project.in(file("util"))
    .settings(publishSettings:_*)
    .settings(librarySettings:_*)
    .settings(paranoidOptions:_*)
    .settings(otestFramework: _*)
    .settings(deps_resolvers:_*)
    .settings(deps_essential:_*)

lazy val model =
  project.in(file("model"))
    .settings(publishSettings:_*)
    .settings(librarySettings:_*)
    .settings(paranoidOptions:_*)
    .settings(otestFramework: _*)
    .settings(deps_resolvers:_*)
    .settings(deps_essential:_*)
    .settings(deps_database:_*)
    .settings(managedSources:_*) 
```

您可以在以下位置查看完整示例：http: [//github.com/frgomes/poc-scala-datanucleus](http://github.com/frgomes/poc-scala-datanucleus)

# javascript - JavaScript：在特定活动时加载脚本

> ID：11494269
> 
> 赞同：0
> 
> 时间：2012-07-15T17:56:12.807
> 
> 标签：javascript

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T18:11:56.977

# 您的问题的标题和正文不同。

## 为什么导航到新链接时脚本不会运行？

您的脚本已为该页面加载并启动，该页面具有您的脚本的`<script>`标签`src`。

但是对于通过单击链接加载的新页面可能并非如此（除非它`<script>`引用了您的脚本及其`src`属性）。

## 在某些事件上加载脚本（例如单击）

要在单击链接时加载脚本，请创建一个`<script>`元素并将其指定为`<src>`.

```
<a href="javascript:loadScript()">Click Me</a>
//or
<a href="#" onclick="loadScript();return false;">Click Me</a>
function loadScript(){
  a = document.createElement('script');
  //if it holds functions which needs to be called explicitly
  a.onload=function(){
    functionFromNewScript()
  }
  a.src = "path/to/JSfile";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T18:15:33.107

假设`<a>`标签通过 AJAX 将内容加载到页面中并且不加载全新的页面，请`AddImageTag()`在`<a>`标签的`click`事件处理程序中包含对的调用。

（另一方面，如果他们加载了一个全新的页面，请将上面的代码包含在新页面中。）

# iphone - 使用 ipad/iphone 时自动对焦不起作用 onkeyup 事件

> ID：11494272
> 
> 赞同：0
> 
> 时间：2012-07-15T17:56:57.650
> 
> 标签：iphone, ipad

我有一个 Web 应用程序，其中的注册表单有一个电话号码字段。事实上，它由三个文本框组成。第一个和第二个文本框允许输入 3 位数字，第三个文本框允许输入 4 位数字作为电话号码。我有 JS 函数检查是否在第一个框中输入了 3 个数字，然后它会自动聚焦到第二个框。如果在第二个框中输入 3 个数字，则它会自动聚焦到第三个框。此功能适用于 IE、Firefox chrome。

但是，当我尝试通过 iPhone 或 Ipad 运行此应用程序时，它无法正常工作，在第一个文本框中输入 3 位数字后，我希望它会自动聚焦到第二个文本框，但它没有。我手动点击第二个框，然后在第二个框中输入数据。

这是它在 iphone 上的工作方式。

在 Iphone 上，前三位数字被输入并且触摸屏键盘保持打开状态。一旦您输入第 4 位数字（期望它移动到下一个字段），键盘就会消失。为了进入下一个字段，您必须点击该字段以使键盘返回，然后光标会转到该字段。同样的事情也发生在下一个领域。

这是我正在使用 onkeyup 的函数的定义

```
function chkLengthPhone(){
    if(document.getElementById('ph_no1').value.length == 3)
{
        document.getElementById('ph_no2').focus();
}
if(document.getElementById('ph_no2').value.length == 3)
{
    document.getElementById('ph_no3').focus();
} 
```

}

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:14:36.357

我使用了 onKeyPress 事件而不是 onKeyUp。

# javascript - 这个脚本标签是什么？

> ID：11494275
> 
> 赞同：6
> 
> 时间：2012-07-15T17:57:10.147
> 
> 标签：javascript, jquery, html

我以前从未见过这样使用它：

```
<script src="{{ file.name_js }}"></script> 
```

这是否更好？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T17:58:44.233

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T17:58:53.880

看起来像是某种[模板语言](http://en.wikipedia.org/wiki/Template_engine_%28web%29)Django 具有相同类型的标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T19:31:29.307

在我看来，它就像某种形式的模板解析，其中`{{ }}`括号内的任何内容都将被替换为服务器端的特定值。

# c# - 多字符串替换

> ID：11494277
> 
> 赞同：0
> 
> 时间：2012-07-15T17:57:39.967
> 
> 标签：c#

我试图在这个程序中用 ascii 文本替换普通文本：

所以a将被替换为â&ETC。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace TextConverter
{
    public partial class TextCoverter : Form
    {
        public TextCoverter()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            string[] normal = { "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z" };
            string[] ascii = { "â", "ß", "ç", "ð", "è", "ƒ", "ģ", "н", "ι", "j", "ќ", "ļ", "м", "и", "ю", "ρ", "Ω", "ѓ", "$", "τ", "ט", "Λ", "ш", "χ", "У", "ź" };

            for (int i = 0;  i < 26; i++)
            {
                textBox2.Text = textBox1.Text.Replace(normal[i], ascii[i]);
            }

        }

    }
} 
```

但它不能用 Ascii 代替。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T18:01:17.857

由于您将结果写入与原始变量不同的变量中，因此仅替换最后一个字母。您应该写入同一个框，或写入临时字符串，然后将其写入最后的第二个框。

```
var tmp = textBox1.Text;
for (int i = 0;  i < 26; i++)
{
    tmp = tmp.Replace(normal[i], ascii[i]);
}
textBox2.Text = tmp; 
```

一般来说，这不是进行替换的最有效算法，因为它对不可变字符串进行操作。您最好创建一个可变字符串构建器，并一次写入一个字符。

```
const string repl = "âßçðèƒģнιjќļмиюρΩѓ$τטΛшχУź";
var res = new StringBuilder();
foreach (char c in textBox1.Text) {
    if (c >= 'a' && c <= 'z') {
        res.Append(repl[c-'a']);
    } else {
        res.Append(c);
    }
}
textBox2.Text = res.ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T18:02:30.133

`textBox2.Text = textBox1.Text.Replace(normal[i], ascii[i]);``textBox1`您一次又一次地 更换，但不保存 previos 状态，所以只工作最后一次循环迭代

# asp.net - 如何确定 td 行数将在 asp.net 中的代码隐藏中增加

> ID：11494281
> 
> 赞同：0
> 
> 时间：2012-07-15T17:58:30.120
> 
> 标签：asp.net, html-table

我正在使用字符串 str =“”在代码隐藏中生成 td；然后浓缩。

字符串 str="";

string msg="你好你好你好你好你好你好你好你好你好你好你好你好你好你好你好你好你好你好你好你好你好你好你好你好你好你好你好你好你好你好你好你好你好你好你你你

+味精+

如果我减少字符串 msg 的长度然后 td 的高度减小并且如果我增加字符串 msg 的字符串长度然后该 td 的高度增加，我将在代码隐藏中生成 td。实际上我希望每当 td 有两行文本时，我希望滚动条出现在我最上面的 div 中。td 中的数据来自数据库，可以是任意大小。也可以有 n 个 td （它是动态的）。我想要最上面的 div 中的滚动条。

为此，我做了一些 RND

```
//first i have find how much lengh the first line can take 
//let say 200 then i have check 

if(len>400)
{
    divid.Attributes.Add("style", "height:50px;overflow:auto;");
} 
```

它给了我我想要的，但在某些情况下它失败了，这不是 100% 的解决方案。我想要一个 100% 的解决方案。我想确定行 td 的数量会增加。请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T18:22:17.923

您可以要求您的客户端浏览器执行此操作，而不是自己计算 td 高度。这更好，因为在不同的网络浏览器和不同的字体大小上，您的 TD 可以有不同的高度。使用 CSS 或 JavaScript 添加滚动条。例如，您可以尝试在 div 上使用 CSS 最大高度和溢出属性（始终不检查长度，例如使用 CSS 类）。在此处查看[CSS 最大高度属性](https://stackoverflow.com/questions/297686/css-max-height-property)以获取某些变体。

例子

```
<html>
<head>
    <style>
    .myDiv {
           max-height: 3em;
           overflow-y: auto;
    }
    </style>
</head>
<body>
    <div class="myDiv">
      <table>
        <tr>
          <td>
             My line of code<br>
             My line of code<br>
             My line of code
          </td>
        </tr>
      </table>
    </div>
</body>
</html> 
```

PS 并在连接字符串时更好地使用 StringBuilder。它会更有效地工作。

# playframework - playframework 1.x 的招摇在哪里？

> ID：11494285
> 
> 赞同：0
> 
> 时间：2012-07-15T17:58:44.530
> 
> 标签：playframework, playframework-1.x, swagger

该模块仍在播放站点上列出，链接已失效，但该项目非常活跃。有没有办法在 play 1.x 中获得该模块或获得 swagger 支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T18:05:53.373

你去：

[https://github.com/wordnik/swagger-core/tree/master/modules/swagger-play](https://github.com/wordnik/swagger-core/tree/master/modules/swagger-play)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-05T13:50:27.777

猜猜它搬到了这里：

[https://github.com/swagger-api/swagger-play-1.2](https://github.com/swagger-api/swagger-play-1.2)

对于较新的播放版本 (2.x)，请在此处查看：

[https://github.com/swagger-api/swagger-play](https://github.com/swagger-api/swagger-play)

# sql - SELECT DISTINCT 的子集

> ID：11494287
> 
> 赞同：3
> 
> 时间：2012-07-15T17:58:55.173
> 
> 标签：sql

我有以下代码将具有最小和最大时间戳的行写入新表：

```
sql_sort_and_delete = """
                CREATE TABLE tmp AS
                SELECT DISTINCT * FROM c2g
                WHERE time = (SELECT max(time) FROM c2g)
                UNION SELECT DISTINCT * FROM c2g
                WHERE time = (SELECT min(time) FROM c2g);;""" 
```

它工作正常，但是 c2g 表中有不同城市的子集，我想更改代码，以便获得每个城市的不同最小/最大结果。是否有捷径可寻？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T21:25:36.640

Maybe over complicating things slightly or maybe a valid way of coding this with `CTE`:

[SQL FIDDLE EXAMPLE](http://sqlfiddle.com/#!3/059ff/4)

```
CREATE TABLE c2g 
    ( 
     CITY varchar(20), 
     TIME INT
    );

INSERT INTO c2g
(CITY, TIME)
VALUES
('A', 1),
('A', 2),
('B', 2),
('B', 2),
('B', 2),
('B', 2),
('C', 1),
('C', 2),
('C', 5),
('C', 20); 
```

To get required records:

```
WITH CITY_cte(CITY, myMAX, myMIN)
AS
(
  SELECT
      CITY
      ,MAX(TIME) 
      ,MIN(TIME) 
  FROM c2g
  GROUP BY CITY
)
SELECT x.* 
FROM  
    c2g x
    INNER JOIN CITY_cte y
        ON x.CITY = y.CITY
WHERE 
  x.TIME = y.myMAX 
  OR
  x.TIME = y.myMIN 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T18:05:22.407

要获取`MIN()/MAX()`每个城市的聚合，请使用`GROUP BY city`. 要从中提取剩余的列`c2g`，您需要`INNER JOIN`针对该子查询的主表中的城市和时间值。

```
SELECT DISTINCT c2g.*
FROM
  c2g
  INNER JOIN (SELECT city, MAX(time) AS time FROM c2g GROUP BY city) maxtime
    ON c2g.city = maxtime.city AND c2g.time = maxtime.time
UNION 
SELECT DISTINCT c2g.*
FROM
  c2g
  INNER JOIN (SELECT city, MIN(time) AS time FROM c2g GROUP BY city) mintime
    ON c2g.city = mintime.city AND c2g.time = mintime.time 
```

我认为这可以简化，并且实际上可以通过在连接条件中`UNION`使用 an来工作：`OR``ON`

```
SELECT DISTINCT c2g.*
FROM
  c2g
  INNER JOIN (SELECT city, MAX(time) AS maxtime, MIN(time) AS mintime FROM c2g GROUP BY city) maxtime
    ON c2g.city = maxtime.city AND (c2g.time = maxtime.time OR c2g.time = maxtime.mintime) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T19:34:04.787

在大多数数据库中，您还可以使用 Windows 函数执行此操作，方法如下：

```
select c.*
from (select cg.*,
             max(time) over (partition by city) as maxtime,
             min(time) over (partition by city) as mintime
      from c2g
     ) c
where time = maxtime or time = mintime 
```

（这绝对不适用于 mysql 或 Access，因为它们不支持 windows 功能。）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-15T23:03:37.773

```
SELECT City, MAX(Time)
FROM cg
GROUP BY City
UNION
SELECT City, MIN(Time)
FROM cg
GROUP BY City 
```

# html - 我可以使用 css3 制作这个面包屑吗？

> ID：11494296
> 
> 赞同：5
> 
> 时间：2012-07-15T18:00:16.280
> 
> 标签：html, css, gradient, psd

我一直在尝试使用 CSS制作这个[PSD ？](http://365psd.com/day/3-12/)

[![在此处输入图像描述](../Images/4e6d9bf46dfad60064712f408820a47f.png)](https://i.stack.imgur.com/jQpa6.jpg)

到目前为止，我已经达到了[这一点](http://jsfiddle.net/EczyZ/)。我可以使用 CSS3 实现这个设计，还是必须使用老派背景图片方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T18:38:07.933

简而言之，是的，[这可以单独使用 CSS](http://css-tricks.com/snippets/css/css-triangle/)（甚至没有 CSS2），但我强烈建议您使用背景图像。

## 咆哮

像这样做 CSS 的问题是阴影。它呈现三角形的方式只是一个在对角线上透明的边框。换句话说，你的影子仍然是一个盒子，看起来不像你想要的那样。

我看到很多人开始使用 CSS3。他们通常希望一切都动态完成，而不是使用背景图像。一旦完成，大量的 CSS 几乎不会为页面做任何美观的事情。实际上，只需要它们最终得到的 10-15% 即可达到与图像相同的效果。

背景图像没有任何问题，它们不会过时，而且它们肯定不会很快停止工作。我的建议是，对于需要图像的东西坚持使用背景图像，并保存 CSS3 以获得特殊效果。这听起来很无聊和老派，但它很有效，而且要容易得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T02:46:09.090

这似乎是一个相对简单的 CSS 项目；简单，这里是相对的，因为我看到人们仅使用 CSS 制作动画 Twitter Fail Whale。
对于三角形边缘（我认为这对您来说是棘手的部分），您将要做的是使用 CSS 矩阵变换（在[W3Schools](http://www.w3schools.com/css3/css3_2dtransforms.asp)详细说明），然后仅`box-shadow`用于边框和`box-shadow: inset`插图影响。之后，只需使用适当的填充和文本对齐来使文本在对象的每个部分居中。

编辑考虑使用`before`和`after`伪元素来实现这一点。`<div>`或者，您可以为每个部分使用两个相互堆叠的倾斜s；然而，这不会给你一个有吸引力的阴影。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-15T18:13:31.453

我认为仅靠 CSS 是不可能的。您将不得不使用背景图像。您将能够使用 :after 和 :before 伪类创建锥形边缘效果。但是会面临内部阴影的问题。

当我在 Google 帮助中心看到面包屑（类似，但使用背景图片）时，我曾经尝试单独使用 css3 创建类似的面包屑，但无法做到。

[http://support.google.com/adsense/bin/answer.py?hl=en&answer=1354760](http://support.google.com/adsense/bin/answer.py?hl=en&answer=1354760)

我尝试使用 CSS（:after 和 :before）伪元素来实现，而不添加任何其他 html 元素。

# javascript - 在 Graphiti 中，如何将编辑器放在附加到图形的标签上

> ID：11494297
> 
> 赞同：1
> 
> 时间：2012-07-15T18:00:25.173
> 
> 标签：javascript

我试图创建一个可编辑的标签，如示例 connection_labeledit_inplace 中的标签。

我遇到的问题是我想将标签附加到自定义 VectorFigure 以代替 Connection。这样做时，标签只是图形的一部分，不要启动编辑器。

```
ivr.shape.menu.MenuItem = graphiti.VectorFigure.extend({

NAME:"ivr.shape.menu.MenuItem",

MyOutputPortLocator : graphiti.layout.locator.Locator.extend({
    init: function(parent)
    {
        this._super(parent);
    },
    relocate:function(index, figure){
        var w = figure.getParent().getWidth();
        var h = figure.getParent().getHeight();

        figure.setPosition(w, h/2);
    }
}),

/**
 * @constructor
 * Creates a new figure element which are not assigned to any canvas.
 *
 */
init: function( width, height) {
    this._super();
    this.setBackgroundColor( new graphiti.util.Color(200,200,200));
    this.setColor(new graphiti.util.Color(50,50,50));

    // set some good defaults
    //
    if(typeof width === "undefined"){
        this.setDimension(100, 15);
    }
    else{
        this.setDimension(width, height);
    }

    // add port
    var outputLocator = new this.MyOutputPortLocator(this);
    this.createPort("output",outputLocator);

    this.label = new graphiti.shape.basic.Label("I'm a Label");
    this.label.setColor("#0d0d0d");
    this.label.setFontColor("#0d0d0d");
    this.addFigure(this.label, new graphiti.layout.locator.LeftLocator(this));

    this.label.installEditor(new graphiti.ui.LabelInplaceEditor());
},

repaint : function(attributes)
{
    if(this.repaintBlocked===true || this.shape===null){
        return;
    }

    if (typeof attributes === "undefined") {
        attributes = {};
    }

    var box = this.getBoundingBox();
    var center = box.getCenter();
    var path = ["M",box.x,",",box.y];
    path.push("l", box.w-10, ",0");
    path.push("l10,", box.h/2);
    path.push("l-10,", box.h/2);
    path.push("L",box.x,",", box.getBottomLeft().y);
    path.push("Z");
    var strPath = path.join("");
    attributes.path = strPath;

    this._super(attributes);
},

/**
 * @method
 * Called by the framework. Don't call them manually.
 *
 * @private
 **/
createShapeElement:function()
{
    // create dummy line
    return this.canvas.paper.path("M0 0L1 1");
} 
```

});

对于此示例，我将标签放在图形的左侧，但显然我会制作一个定位器，将标签放在图形上（以防万一它改变某些东西）

对我来说，问题来自“graphiti.Canvas.getBestFigure()”的工作方式。该函数仅检查直接附加到“graphity.Canvas”的元素此外，该函数缺少一些递归以将事件传播到子级。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T21:41:42.553

Graphiti 提供了一个 CenterLocator。像 dblClick 这样的所有事件都可以被图捕获。

....您使用的是最新版本吗？

# c - C中的浮点输出/输入问题

> ID：11494298
> 
> 赞同：-4
> 
> 时间：2012-07-15T18:00:31.020
> 
> 标签：c, floating-point

我希望您能帮助我理解以下内容：

对于代码：

```
int main() {
    int i=23;
    float f=7.5;

    printf("%f", i);
    return 1;
} 
```

输出是`0.000000`，怎么不是`7.500000`？

对于代码

```
int main() {
    int i=23;
    float f=7.5;

    printf("%d\n",f);
    printf("%f",i);
    return 1;
} 
```

输出是`1455115000, 7.500000`。为什么它不进行错误编译？这个号码 1455115000 是什么？为什么现在要打印 7.500000？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T18:02:17.527

调用中不匹配的格式/参数`printf`会导致未定义的行为。如果您提高警告级别，您的编译器可能会告诉您。例如，`clang`为您的第一个程序发出此警告：

```
example.c:5:10: warning: conversion specifies type 'double' but the argument has
      type 'int' [-Wformat]
printf("%f", i);
        ~^   ~
        %d 
```

这些是你的第二个：

```
example.c:5:10: warning: conversion specifies type 'int' but the argument has
      type 'double' [-Wformat]
printf("%d\n",f);
        ~^    ~
        %f
example.c:6:10: warning: conversion specifies type 'double' but the argument has
      type 'int' [-Wformat]
printf("%f",i);
        ~^  ~
        %d 
```

这根本没有特殊的标志。 `gcc`默认情况下也会在您的程序上发出警告。示例 1：

```
example.c:5: warning: format ‘%f’ expects type ‘double’, but argument 2 has type ‘int’ 
```

示例 2：

```
example.c:5: warning: format ‘%d’ expects type ‘int’, but argument 2 has type ‘double’
example.c:6: warning: format ‘%f’ expects type ‘double’, but argument 2 has type ‘int’ 
```

这两个编译器也警告你的隐式声明`printf`，但我把这些消息去掉了，因为它们与你的问题没有严格的关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T18:02:15.437

> 输出是0.000000，怎么不是7.500000？

因为`%f`告诉`printf`期望 a `float`，但`i`不是 a `float`。所以你正在调用**未定义的行为**。

> 为什么它不进行错误编译？

在 GCC（可能还有其他编译器）中，您会收到一条警告消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T18:02:25.777

1.  在第一种情况下，您尝试打印 , 的值`i`以获取`7.5`您需要打印的值`f`。

2.  在第二种情况下，问题是与格式说明*符*和提供给`printf()`

更多关于 2。

要打印一个`float`值，它需要与`%f`格式说明符配对。对于`int`eger 值，这应该是`%d`。这些是倒退的，这就是为什么您会因为这种不匹配而看到未定义的行为/输出。

如果您以最高警告级别编译程序，您可能会收到有关这些类型的不匹配/错误的警告。

***旁白***：

通常，返回值`0`表示程序成功终止。*非零*值（如`1`）表示存在问题。可能与您的程序无关，但您可能需要记住一些事情。

# android - 在不调整 Activity 大小的情况下短暂隐藏 ActionBar

> ID：11494300
> 
> 赞同：8
> 
> 时间：2012-07-15T18:00:51.753
> 
> 标签：android, android-actionbar

我正在使用 ViewPager 在不同的片段之间滚动。有两种类型的片段，使用两种不同的菜单资源。我正在使菜单无效，以便在必要时在这些资源之间切换。这一切都很好，但是菜单被“重绘”而没有动画。

为了避免弄乱单个菜单项，我希望我可以在新菜单加载时短暂隐藏 ActionBar，并在完成后显示它。这也可以按预期工作，但是在切换 ActionBar 时会调整活动的大小。

有什么办法可以防止这种情况发生，或者隐藏菜单资源之间的丑陋过渡？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-15T19:48:30.813

我没有完全理解您问题的菜单部分，但是有一个简单的解决方案可以防止您的活动在 ActionBar 出现或消失时调整大小。

您可以告诉 ActionBar 在覆盖模式下绘制自己，这意味着它将浮动在活动的顶部，而不是实际成为活动布局的一部分。[`android:windowActionBarOverlay`](http://developer.android.com/reference/android/R.attr.html#windowActionBarOverlay)在您的主题或代码中使用标志[`Window.FEATURE_ACTION_BAR_OVERLAY`](http://developer.android.com/reference/android/view/Window.html#FEATURE_ACTION_BAR_OVERLAY)。

您可能希望将此功能与`actionBarSize`常量一起使用，该常量为布局中的第一个视图指定正确的偏移量。这样，您的内容仍然显示在 ActionBar 下方，但由于 ActionBar 本身是一个覆盖层，因此在隐藏/显示它时，活动不会调整大小。

```
<SomeView
    ...
    android:layout_marginTop="?android:attr/actionBarSize" /> 
```

更多细节可以在[文档](http://developer.android.com/guide/topics/ui/actionbar.html#GeneralStyles)中找到。

# javascript - 通过精美的链接获得一致的跨浏览器行为

> ID：11494302
> 
> 赞同：0
> 
> 时间：2012-07-15T18:01:14.617
> 
> 标签：javascript, cross-browser

我正在开发一个对一些链接做了一些奇怪的事情的网站。

当用户点击一个链接时，一个看起来有点像[这样](http://i.stack.imgur.com/fCCLU.gif)的指示器 GIF出现在链接旁边，并且链接本身被禁用。然后导航到该页面。这是因为担心如果没有立即加载链接，不耐烦的用户可能会重复单击链接，从而给我们的服务器带来额外的负载。

下面是我们如何做到这一点：

```
<a id="link1" href="/target_page"
   onclick="var link = document.getElementById('link1');
            var loc = link.href;
            link.removeAttribute('href');
            link.setAttribute('onclick', 'return false;');
            document.getElementById('link1_img').style.display='';
            window.location = loc;">
  Link Text
  <img id="link1_img" src="/images/indicator.gif" style="display:none;" />
</a> 
```

这就是问题所在。如果用户正常单击链接，或者右键单击链接并从上下文菜单在新窗口或选项卡中打开它，这具有预期的行为，但如果用户中键单击或 Ctrl+，它并不总是正常工作点击链接。

在这种情况下，所需的行为是跳过所有 JavaScript 内容，只需在新选项卡中打开链接。我用每个主流浏览器的最新版本在 Windows 上做了一个快速测试，IE、Firefox 和 Opera 都是这样做的。但是，Chrome 和 Safari 会显示指示器并在*当前*选项卡中打开链接。

关于如何使其在所有浏览器上的行为一致的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T18:33:22.280

您可以使用[此处的代码来](https://stackoverflow.com/questions/1795734/triggering-onclick-event-using-middle-click)处理中间单击，并查看[此处](https://stackoverflow.com/questions/2485345/javascript-or-jquery-event-handlers-for-ctrl-shift-mouse-left-button-click)的 Ctrl+单击。但是，我发现我必须使用 .mousedown 来进行中间点击而不是点击（至少在 Firefox 中）。

如果你使用

```
$('#link').click(function(e) {
    if(e.ctrlKey && e.which == 1 || e.which == 2) { // Ctrl + Click
        console.log("hi");
        $(this).css('color','#aaa');
        $(this).click(function(e) { e.preventDefault(); });
    } 
}); 
```

并且不要添加`e.preventDefault()`，它应该按预期工作。在 Firefox、Chrome 和 IE9 中为我工作。

编辑：没有 jQuery，我会这样做。不过，请查看有关vs的[这篇文章](https://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false)。`preventDefault()``return false;`

```
document.querySelector('#link').onclick = function(e) {
    this.style.color = '#aaa';
    disableLink(this);
}

// middle clicks only captured in mousedown
document.querySelector('#link').onmousedown = function(e) { 
    this.style.color = '#aaa';
    if (e.button == 1) {
        disableLink(this);
    }
}

function disableLink(elem) { 
    elem.onclick = function(e) { console.log("HI"); this.href = '#'; return false;}
    elem.onmousedown = function(e) { console.log("HI"); this.href = '#'; return false;}
} 
```

不幸的是，Chrome 和 Firefox 处理中间点击的方式似乎有所不同。Firefox 仅在 中显示中间点击`onmousedown`，并在`onmousedown`. 这意味着对于 Firefox，我们必须在 onmousedown 之后禁用链接。但是，在 Chrome 中，中间点击显示在`onmousedown`和中`onclick`，但链接仅在 . 之后打开`onclick`。由于我们在鼠标按下时禁用了链接，因此`onclick`永远没有机会运行:(。

不知道如何解决这个问题...

# javascript - 复选框取消选中是否选中了其他复选框

> ID：11494304
> 
> 赞同：0
> 
> 时间：2012-07-15T18:01:32.443
> 
> 标签：javascript, jquery

我有很多城市输入复选框。我给第一个复选框命名为**All**；如果用户选择了，那么只有**所有**复选框被选中，而不是其他城市的复选框。

如果用户选中任何其他城市，则应自动取消选中**All复选框。**我想用 JavaScript 或 jQuery 来做这件事。

```
<input type="checkbox" name="city_pref[]" id="city_all" value="0" checked /><label for="city_all">All</label>
<input type="checkbox" name="city_pref[]" id="city_pref_1" value="Chicago" /><label for="city_pref_1">Chicago</label>
<input type="checkbox" name="city_pref[]" id="city_pref_2" value="Texas" /><label for="city_pref_2">Texas</label> 
```

等等....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T18:16:39.813

试试这个

```
​$(function(){
    var el=$('input:checkbox[name="city_pref[]"]');
    el.on('change', function(e){
        if($(this).is(':checked')) el.not($(this)).prop('checked', false);
    });
});​ 
```

[**演示。**](http://jsfiddle.net/heera/bGwrS/1/)

**更新：（**澄清问题后）

```
$(function(){
    var el=$('input:checkbox[name="city_pref[]"]');
    el.on('change', function(e){
        if($(this).attr('id')!='city_all')
        {
            if($(this).is(':checked')) $('#city_all').prop('checked', false);
        }
        else
        {
            if($(this).is(':checked')) el.not($(this)).prop('checked', false);
        }
    });
});​ 
```

[**演示。**](http://jsfiddle.net/heera/bGwrS/2/)

**更新：(23-07-2012)**

`I want the functionality, when no checkbox is selected, then All will get selected automatically`

[**更新演示。**](http://jsfiddle.net/heera/bGwrS/30/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T18:31:18.777

达林是对的——尽管有人给你一些关于*如何*解决这个问题的提示是个好主意。如果我正确阅读了这个问题，您想要的唯一动态行为是当有人勾选一个不是“全部”的框时；在这种情况下，您希望取消选中“全部”框。

好的，所以您需要将问题分解为多个部分。这是我要做的：

*   将一个函数附加到不是“全部”的所有控件。我会用一个类选择器来做这个，但同样你可以做“不命名”的方法（根据 Yograj Gupta 的回答）
*   在事件处理程序中，有一条`if`语句，仅在发现控件被选中时才运行（即，如果选择“全部”并且您取消选中*一个*城市，则不会发生任何事情）。
*   如果`if`语句运行，请取消选中“全部”控件

现在，这些项目中的每一个都足够小，可以查阅 jQuery 文档。在这种情况下，您当然有一些现成的解决方案，但是如果您想作为程序员进行自我提升，那么分解问题的方法非常重要。

附录：另外 - 以及一般论坛问题的一个很好的提示 - 如果您找到答案可以满足您的要求的 80%，请尝试自己实现另外 20%。我同意这并不总是可能的，因为有时每个人都必须寻求帮助，但从长远来看，这是一种很好的做法，你会发现有助于学习过程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T18:31:33.220

你可以这样做，

**[现场演示](http://jsfiddle.net/rajaadil/xRjke/1/)**

```
$('#city_all').change(function(){   
    if($(this).is(':checked'))
       $('input:checkbox[name^=city_pref]').attr('checked','checked'); 
    else
        $('input:checkbox[name^=city_pref]').removeAttr('checked'); 
});

$('input:checkbox[name^=city_pref]').change(function(){    
    if($('input:checkbox[name^=city_pref]').not(':checked').length > 0)
        $('#city_all').removeAttr('checked'); 
    else
        $('#city_all').attr('checked','checked'); 
}); 
```

注意：要将其他和所有与城市分开，请给它们不同的名称。
​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T18:16:24.340

即使您应该在寻求帮助之前先尝试实现自己的代码，但我认为帮助那些真正不知道如何开始做某事的人是公平的。所以，我做了这个[JSFiddle](http://jsfiddle.net/menislici/EMfcg/)

```
<input type="checkbox" class="all">all</input>
<input type="checkbox" name="city" class="london city">london</input>
<input type="checkbox" name="city" class="rome city">rome</input>
<input type="checkbox" name="city" class="tokio city">tokio</input>

 $('.all').click(function(){

 $('input[name=city]').attr("checked", true)

     })

     $('.city').click(function(){

         $('input[type=checkbox]').attr("checked", false)

         $(this).attr("checked", true)                      

     }) 
```

​</p>

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-15T18:16:44.597

试试这个

```
$('input:checkbox[name^=city_pref]').click(function(){
    if(this.id =="city_all"){
        $(this).siblings("input:checkbox").attr('checked',false);
    }
    else{
        $('#city_all').attr('checked',false);
    }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-15T18:28:55.840

我会把我的扔在这里

```
$(function () {
    $('.checkbox-all .all').attr('disabled', true); //comment out if you want them to be able to toggle the all checkbox, but their input would be overwritten so I just disable it.

    $('.checkbox-all input[type="checkbox"]').change (function () {
        var numSelected = $(this).parent().children(':checked:not(.all)').length;
        $(this).siblings('.all').attr('checked', (numSelected == 0));
    });
}); 
```

使用 HTML：

```
<div class="checkbox-all">
    <input class="all" type="checkbox" name="city_pref[]" id="city_all" value="0" checked /> <label for="city_all">All</label><br/>
    <input type="checkbox" name="city_pref[]" id="city_pref_1" value="Chicago" /> <label for="city_pref_1">Chicago</label><br/>
    <input type="checkbox" name="city_pref[]" id="city_pref_2" value="Texas" /> <label for="city_pref_2">Texas</label>
</div> 
```

仅供参考，您`label`的示例中的元素设置不正确，我已`for`在 HTML 中正确设置了属性。

# debugging - 在我的汇编代码中找不到错误

> ID：11494316
> 
> 赞同：0
> 
> 时间：2012-07-15T16:56:58.513
> 
> 标签：debugging, assembly, compiler-construction, machine-code, 68000

我是汇编语言的初学者。我正在使用“easy 68k editor/assembler”编写 68k 汇编代码，该代码要求用户输入 2 个值，然后将它们汇总在一起并显示出来。问题是我的代码不断停止，我不知道如何解决/调试这个问题。

谁能帮我弄清楚如何追踪错误？我会很感激。先感谢您。

```
*-----------------------------------------------------------
* Program    : Sum of Two Numbers
* Written by : Me
* Date       : July 15, 2012
* Description: This program will read in 2 numbers the user
*inputs and find the sum.
*-----------------------------------------------------------

    org     $8000

    START       movea.l #MSG1, A3
                trap    #3
                clr.w   D2
                JSR     Loop
                trap    #2
                move.w  d2, d4
                movea.l #msg2, a3
                trap    #3
                clr.w   d2
                jsr     loop
                trap    #2
                movea.l #msg3, A3
                trap    #3
                add.w   d4, d2
                JSR     DISP
                trap    #2
                trap    #9
    LOOP        trap    #0
                trap    #1
                cmp.b   #$0D, D1
                BEQ     BREAK
                and.b   #$0F, d1
                mulu    #10, d2
                add.w   d1, d2
                jmp     loop
    Break       rts
    DISP        clr.b   d3
    DISDIV      divu    #10, D2
                move.b  #16, d5
                ror.l   d5, d2
                or.b    #$30, d2
                move.b  d2, -(A7)
                addq    #1, d3
                clr.w   d2
                ror.l   d5, d2
                bne     DISDIV
    DISDIG      move.b  (a7)+, D1
                trap    #1
                subq.b  #1, D3
                bne     DISDIG
                rts
                org     $8100
    MSG1        DC.B    'Please enter the first of two numbers (two digits) ', 0
    MSG2        DC.B    'Please enter the second of two numbers (two digits) ', 0
    MSG3        DC.B    'The sum of the two 2 digit numbers you entered is ', 0
                end     start 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T16:32:19.330

您的代码应以：

```
LEA    MSG1, A1
MOVE.B #14, D0
TRAP   #15 
```

这将向用户显示第一条消息。查看[EASy68K 主页](http://www.easy68k.com)以获取有关调用 I/O 陷阱的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T14:18:02.643

您使用的陷阱很可能不是 Easy68K 使用的陷阱。[在此处](http://www.easy68k.com/QuickStart/TrapTasks.htm)查找Easy68K 使用的陷阱。

陷阱指令的功能*不是*由 68K 汇编语言定义的，而是由操作系统分配的（如果操作系统完全使用陷阱，有些会忽略它们）。如果您执行陷阱指令，68000 只会执行陷阱向量指向的代码。没有分配给任何陷阱的“内置”功能。

# iphone - 使 UIButton 在旋转期间保持附加到页脚

> ID：11494321
> 
> 赞同：1
> 
> 时间：2012-07-15T18:03:49.693
> 
> 标签：iphone, ios, uiimage, uibutton

我希望我的 UIButton 始终保持在屏幕底部，而无需一直调整 X。这是我在水平模式下隐藏按钮的代码。

```
 UIImage *greenBtnImage = [[UIImage imageNamed:@"green-btn-iphone.png"]stretchableImageWithLeftCapWidth:5.0 topCapHeight:0.0];
    bt = [UIButton buttonWithType:UIButtonTypeCustom];
    [bt setBackgroundImage:greenBtnImage forState:UIControlStateNormal];
    bt.frame = CGRectMake(14.0f,406.0f,292.0f,41.0f);
    [bt addTarget:self action:@selector(didClickButton:) 
         forControlEvents:UIControlEventTouchUpInside];
    [bt setTitle:@"OK" forState:UIControlStateNormal];
    bt.autoresizingMask = (UIViewAutoresizingFlexibleWidth);

    bt.autoresizesSubviews = YES;
    [self.view addSubview:bt]; 
```

我很难找到答案如何以编程方式进行。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T18:10:15.683

如果我理解你，这应该会有所帮助：

```
bt.autorezisingMask = UIViewAutoresizingFlexibleTopMargin; 
```

免责声明：到目前为止，我自己从未以编程方式这样做过，仅将自动调整与 Interface Builder 结合使用。

# php - 如果在 smarty .tpl 中为 nth-child list/div 设置其他条件

> ID：11494324
> 
> 赞同：5
> 
> 时间：2012-07-15T18:03:54.883
> 
> 标签：php, css, smarty

我正在与 Smarty 合作。我想在我的文件中为 nth-child li/div 类添加一个`if else`条件。`.tpl`

我有两种图像尺寸。我想在第一个中使用 600px 图像，`li`在第二个和第三个中使用 400px 图像，在第四个中再次使用 600px 图像，`li`依此类推。

目前我正在使用 CSS3`nth-child`选择器并使用缩放的 400 像素图像。但是加载时间很糟糕。我想在需要的地方使用较小的图像。

我想它非常复杂。是吗？

这是我的代码：

```
<img src="{$purl}/thumbs/{$posts[i].pic}" alt="{$posts[i].story|stripslashes}" /> 
```

它存在于循环`{section name=i loop=$posts} {include file="posts.tpl"} {/section}`内部`posts.tpl`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T19:28:19.480

[循环](http://www.smarty.net/docs/en/language.function.cycle.tpl)会有帮助。

假设您有一个数组，其中包含存储在两个字段中的图片路径：`image-600`和`image-400`：

```
{foreach from=$images item=image}
    {capture assign=currentKey}image-{cycle values='600,400,400'}{/capture}
    <li><img src="{$image[$currentKey]}" alt="{$image.title}" /></li>
{/foreach} 
```

在您的情况下，它可能看起来像这样：

```
{section name=i loop=$posts}
   {capture assign=thumbSize}{cycle values='big,small,small'}{/capture}
   <img src="{$purl}/thumbs/{if $thumbSize eq 'big'}{$posts[i].pic}{else}s-{$r[i].pic}{/if}" alt="{$posts[i].story|stripslashes}" />
{/section} 
```

# oscommerce - 向 osCommerce tep_image 函数添加类属性

> ID：11494326
> 
> 赞同：1
> 
> 时间：2012-07-15T18:03:54.950
> 
> 标签：oscommerce

我正在尝试使用 CSS 以某种方式使我的产品图像格式，但我不确定将以下代码添加到`tep_image`函数调用的位置：

```
class="single-product" 
```

我希望生成的图像将额外的类属性包含在其 HTML 中。

我希望我不必在构造函数类中添加 if 语句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T08:36:17.373

该`tep_image`函数位于[`\includes\functions\html_output.php`](https://github.com/osCommerce/oscommerce2/blob/master/catalog/includes/functions/html_output.php#L75).

```
tep_image(DIR_WS_IMAGES . $product_info['products_image'], 
          addslashes($product_info['products_name']), 
          SMALL_IMAGE_WIDTH, SMALL_IMAGE_HEIGHT, 
          'class="single-product"') 
```

您需要添加到图像功能的任何额外属性将在设置图像尺寸之后，因此将 CSS 作为第五个参数。

# ios - 搜索 UITableView 时隐藏索引栏

> ID：11494327
> 
> 赞同：6
> 
> 时间：2012-07-15T18:03:59.203
> 
> 标签：ios, xcode, indexing, uisearchbar

我已经为我的表格视图实现了搜索栏和索引功能。工作得很好。但是，我注意到当我在搜索栏中单击时，索引仍然可用，单击它会导致不可预知的结果。而不是调试，我认为隐藏索引会更简单:)

我在其他地方找到了调用`sectionIndexTitlesForSectionView`和返回 nil 的参考。因此，当我单击搜索框时，`searchBarTextDidBeginEditing`我已明确调用`[self sectionIndexTitlesForSectionView:[self tableView]]`.

结果是`sectionIndexTitlesForSectionView`确实被调用并返回 nil，但索引仍然存在。

任何想法/建议将不胜感激！托尼。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-26T22:16:41.487

`- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView`正如您在帖子中指出的那样，如果您的搜索处于活动状态，则必须返回 nil 。然后，覆盖 中的两个方法`UISearchDisplayDelegate`以刷新索引。

```
- (void)searchDisplayControllerWillBeginSearch:(UISearchDisplayController *)controller {
    [self.tableView reloadSectionIndexTitles];
}

- (void)searchDisplayControllerDidEndSearch:(UISearchDisplayController *)controller {
    [self.tableView reloadSectionIndexTitles];
} 
```

对于`sectionIndexTitlesForTableView`方法，我更喜欢使用：

```
- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView {
    if (self.searchDisplayController.active) {
        return nil;
    } else {
        //Add @"{search}", to beginning to add search icon to top of index
        return @[@"A", @"B", @"C", @"D", @"E", @"F", @"G", @"H", @"I", @"J", @"K", @"L", @"M", @"N", @"O", @"P", @"Q", @"R", @"S", @"T", @"U", @"V", @"W", @"X", @"Y", @"Z", @"#"];
    }
} 
```

注意：我发现你必须`self.searchDisplayController.active`在 if 条件下使用。如果您使用`tableView != self.tableView`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T19:02:42.313

只需在显示搜索结果时`(NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView`返回该方法。`nil`

就我而言，这看起来像这样：

```
- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView {
    if (tableView == [self tableView]) {
        return [[NSArray arrayWithObject:UITableViewIndexSearch] arrayByAddingObjectsFromArray:[collation sectionIndexTitles]];
    }
    // search view, no index:
    else return nil;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-04T09:39:14.527

这是一种简单的方法，如果您不想在 sectionIndexTitlesForTableView 中传递 nil，如果您只需要为搜索文本创建一个索引并且希望将搜索文本显示为节标题。

```
NSArray *subViewsOfTblView = [self.tableView subviews];
if([subViewsOfTblView count] > 0)
{
    UIView *indexVw = (UIView*)subViewsOfTblView[[subViewsOfTblView count] - 1];
    if(isSearchON || isFilterON)
        indexVw.hidden = YES;
    else
        indexVw.hidden = NO;
} 
```

# asp.net - 仅在特定域上加载 iframe

> ID：11494329
> 
> 赞同：5
> 
> 时间：2012-07-15T18:04:21.537
> 
> 标签：asp.net, html, iframe

我想允许一些网站在我的域中嵌入一个 iframe。但是，我不希望任何人能够在未经我许可的情况下使用 iframe 内容。如何仅允许我选择的域能够将 iframe 嵌入页面内容？

我知道 vimeo 会这样做，并允许视频所有者在他们认为不合适的某些网站上阻止视频。

我想要服务器端 ASP.NET 解决方案，因为可以更改 Javascript 代码。但是，如果它可以使用 javascript 代码及其安全来完成，那没关系。

据我所见，我需要以某种方式传递引荐来源网址，但其他网站所有者可以手动更改以包含 iframe 本身，并且它也可以在他们的网站上运行，无需许可。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T18:28:02.170

由于它将是您在评论中提到的独立页面，因此您可以通过检查 referer 属性来做到这一点。

```
Request.UrlReferrer 
```

查看它是否包含您要允许的域。当嵌入器将您的页面放入 IFRAME 的 SRC 属性并且页面首次加载时，此属性可用。

如果用户单击 IFRAME 内的链接，则不能保证将包含页面作为引荐来源网址传递。

如果您想允许 IFRAME 内的多个链接页面允许特定域，那么您将需要坚持[使用基于 JavaScript 的解决方案](https://stackoverflow.com/questions/8169582/protecting-iframe-only-allow-it-to-work-on-one-domain)。

但是请注意，这两种方法都不是万无一失的。

# facebook - 像按钮一样替换实际的 og:url

> ID：11494331
> 
> 赞同：0
> 
> 时间：2012-07-15T18:04:38.463
> 
> 标签：facebook, facebook-graph-api

在我的基于文章的网站上实现类似 Facebook 的按钮时，我似乎遗漏了一些非常重要的东西。

根据 Facebook 调试器，一切似乎都已正确配置。但是当我真正尝试“喜欢”一个帖子时，真正的 url 被替换为 facebook url。例如，我喜欢一个帖子[http://www.mysite.com/post/1](http://www.mysite.com/post/1)，由于某种原因 mysite 被替换为“facebook”，所以我不再喜欢[http://www.facebook.com/post /1](http://www.facebook.com/post/1)。这就是当您在模态框和我的 facebook 墙上点赞时它的显示方式。

这是我的标签

```
<meta property="og:title" content="My Site"/>
<meta property="og:type" content="article"/>
<meta property="og:url" content="<?php echo "http://www.mysite.com/posts/{$post->id}" ?>"/>
<meta property="og:image" content="http://www.mysite.com/media/logo.png"/>
<meta property="og:site_name" content="My Site"/>
<meta property="fb:admins" content="XXXXXXXX"/>
<meta property="fb:app_id" content="XXXXXXXXXXXXXXX"/>
<meta property="og:description" content="<?php echo text::limit_words($post->content, 20, '...'); ?>"/> 
```

Linter 中的所有 url 都显示正确，所以我无法弄清楚。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T18:42:08.117

页面中实际 LIKE 按钮代码中的 data-href="URL" 中是否有相对 URL？例如，我使用 facebook like 按钮代码如下，使用上面设置的 og 标签：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<div class="fb-like" data-href="<?php echo "http://www.mysite.com/posts/{$post->id}" ?>">        data-send="false" data-count="false" data-layout="button_count" data-width="47" data-show-faces="false"></div> 
```

# ruby-on-rails - 如何避免在我切换到 Spork 进行测试时出现的 Duplicate Entry DB 错误

> ID：11494334
> 
> 赞同：0
> 
> 时间：2012-07-15T18:04:54.250
> 
> 标签：ruby-on-rails, spork

我刚开始使用 Spork，我的测试从数据库中产生了随机的“重复输入”错误。我认为这与测试之间刷新数据库的方式发生变化有关吗？我怎样才能解决这个问题？

这些错误在 Spork 之前并没有浮出水面……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T19:11:30.883

您可以使用类似 Database Cleaner ( [https://github.com/bmabey/database_cleaner/](https://github.com/bmabey/database_cleaner/) )

# c - 带强制转换的 C 初始化程序，这很危险吗？

> ID：11494341
> 
> 赞同：1
> 
> 时间：2012-07-15T18:06:09.687
> 
> 标签：c

考虑以下：

```
struct Foo 
{
  char c;
  int i;
};

void Bar(void)
{
  struct Foo f = {0}; // use zero initializer

  // do some stuff

  f = (struct Foo) {'h', 1}; // copy different data into f, is this dangerous?
} 
```

上面的演员会被认为是危险的吗？这是好风格吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-15T18:07:30.363

这不是风格问题。如果没有`(struct Foo)`. 它不是强制转换，它是 C99 功能的语法的一部分，称为*复合文字*。

# python - 如何重新创建 Django 项目的数据库？

> ID：11494342
> 
> 赞同：8
> 
> 时间：2012-07-15T18:06:21.497
> 
> 标签：python, mysql, django, django-models

我错误地删除了我的 Django 项目使用的 MySQL 数据库。幸运的是，这只是我的开发环境。如何重新创建数据库和所有表？

当我这样做`python manage.py syncdb`时，它失败了

```
_mysql_exceptions.OperationalError: (1049, "Unknown database 'myproject'") 
```

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T18:09:17.303

在运行 syncdb 之前，您必须在 MySQL 中创建数据库：

```
mysql> create database myproject; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T18:09:28.523

`syncdb`不会为您创建数据库。您需要进入您的 MySQL shell 并执行`CREATE DATABASE myproject;`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T18:09:58.240

您需要创建一个新数据库并配置权限。[http://www.debuntu.org/how-to-create-a-mysql-database-and-set-privileges-to-a-user](http://www.debuntu.org/how-to-create-a-mysql-database-and-set-privileges-to-a-user)

# java - 模拟器在应用程序中按下按钮时崩溃

> ID：11494343
> 
> 赞同：0
> 
> 时间：2012-07-15T18:06:30.907
> 
> 标签：java, android, xml, android-emulator

我正在关注 Google 网站上的开发指南：http: [//developer.android.com/training/basics/firstapp/starting-activity.html](http://developer.android.com/training/basics/firstapp/starting-activity.html)

但是每当我按下模拟器中的按钮时，应用程序就会崩溃。我在手机上试了一下，结果是一样的。这是我的代码这里的缩进不能正常工作主要活动：

```
package com.example.rishubs.app;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;
public class MainActivity extends Activity {
public final static String EXTRA_MESSAGE = "com.example.myapp.MESSAGE";
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

/** Called when Button is pressed */
public void sendMessage(View view) {
    Intent intent = new Intent(this, DisplayMessageActivity.class);
    EditText editText = (EditText) findViewById(R.id.edit_message);
    String message = editText.getText().toString();
    intent.putExtra(EXTRA_MESSAGE, message);
    startActivity(intent);
} 
```

}

我的 XML：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.rishubs.app"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
         android:minSdkVersion="14"
         android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".DisplayMessageActivity"
        android:label="@string/app_name">

        </activity>
     </application>

</manifest> 
```

我的第二个活动

```
package com.example.rishubs.app;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.TextView;

public class DisplayMessageActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Get Message from intent
        Intent intent = getIntent();
        String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);
        // Create the text view
        TextView textView = new TextView(this);
        textView.setTextSize(40);
        textView.setText(message);

        setContentView(textView);
    }

} 
```

更新的 XML：

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
     package="com.example.rishubs.app"
     android:versionCode="1"
     android:versionName="1.0" >

     <uses-sdk
         android:minSdkVersion="14"
         android:targetSdkVersion="15" />

     <application
         android:icon="@drawable/ic_launcher"
         android:label="@string/app_name"
         android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".DisplayMessageActivity"
        android:label="@string/app_name">

        </activity>
        <activity android:name="DisplayMessageActivity">

        </activity>
    </application>

</manifest> 
```

日志猫：

`07-15 18:48:26.605: E/AndroidRuntime(1454): FATAL EXCEPTION: main 07-15 18:48:26.605: E/AndroidRuntime(1454): java.lang.IllegalStateException: Could not find a method send message(View) in the activity class com.example.rishubs.app.MainActivity for onClick handler on view class android.widget.Button 07-15 18:48:26.605: E/AndroidRuntime(1454): at android.view.View$1.onClick(View.java:3031) 07-15 18:48:26.605: E/AndroidRuntime(1454): at android.view.View.performClick(View.java:3511) 07-15 18:48:26.605: E/AndroidRuntime(1454): at android.view.View$PerformClick.run(View.java:14105) 07-15 18:48:26.605: E/AndroidRuntime(1454): at android.os.Handler.handleCallback(Handler.java:605) 07-15 18:48:26.605: E/AndroidRuntime(1454): at android.os.Handler.dispatchMessage(Handler.java:92) 07-15 18:48:26.605: E/AndroidRuntime(1454): at android.os.Looper.loop(Looper.java:137) 07-15 18:48:26.605: E/AndroidRuntime(1454): at android.app.ActivityThread.main(ActivityThread.java:4424) 07-15 18:48:26.605: E/AndroidRuntime(1454): at java.lang.reflect.Method.invokeNative(Native Method) 07-15 18:48:26.605: E/AndroidRuntime(1454): at java.lang.reflect.Method.invoke(Method.java:511) 07-15 18:48:26.605: E/AndroidRuntime(1454): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 07-15 18:48:26.605: E/AndroidRuntime(1454): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 07-15 18:48:26.605: E/AndroidRuntime(1454): at dalvik.system.NativeStart.main(Native Method) 07-15 18:48:26.605: E/AndroidRuntime(1454): Caused by: java.lang.NoSuchMethodException: send message [class android.view.View] 07-15 18:48:26.605: E/AndroidRuntime(1454): at java.lang.Class.getConstructorOrMethod(Class.java:460) 07-15 18:48:26.605: E/AndroidRuntime(1454): at java.lang.Class.getMethod(Class.java:915) 07-15 18:48:26.605: E/AndroidRuntime(1454): at android.view.View$1.onClick(View.java:3024) 07-15 18:48:26.605: E/AndroidRuntime(1454): ... 11 more`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T16:59:59.973

我看到了你的错误。

```
java.lang.IllegalStateException: Could not find a method send message(View) in the activity class com.example.rishubs.app.MainActivity for onClick handler on view class android.widget.Button 
```

转到您的 layout/activity_main.xml 文件并在您的按钮视图中确保

```
android:onClick="sendMessage" 
```

在那儿。根据 LogCat 你有 android:onClick="send message" 代替。所以有一个不需要的空间 send + message 并且 Message 的第一个字母需要大写。

基本上，您已将方法名称命名为 sendMessage(View v)，但已在 XML 文件中将其引用为“发送消息”。他们不一样 :D

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T18:28:30.697

你有添加

```
<activity
        android:name=".DisplayMessageActivity"
    android:label="@string/app_name">

    </activity>
    <activity android:name="DisplayMessageActivity">

    </activity> 
```

将其替换为

```
<activity
        android:name=".DisplayMessageActivity"
    android:label="@string/app_name"> </activity> 
```

你已经定义了你的`Activity`两次..可能这是崩溃的问题。

编辑根据您的新 LogCat

接缝之类的，冲突在您的 onclick 方法名称中`activity_main.xml`，在您的中`edit_message`，您有属性，例如`android:onClick="send message"`将其替换为`android:onClick="sendMessage"`

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-15T18:11:04.187

代替：

```
Intent intent = new Intent(this, DisplayMessageActivity.class); 
```

试试看，这是在您的 MainActivity 中：

```
Intent intent = new Intent(MainActivity.this, DisplayMessageActivity.class); 
```

# parsing - 在 F# 中同时进行词法分析和解析

> ID：11494347
> 
> 赞同：37
> 
> 时间：2012-07-15T18:07:10.347
> 
> 标签：parsing, f#, fsyacc, fslex

在使用 fslex 和 fsycc 时，是否有一种简单的方法可以让词法分析和解析同时运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-24T11:45:01.523

首先，在实际案例中，词法分析和解析是时间关键的。特别是如果您需要在解析之前处理令牌。例如——过滤和收集评论或解决上下文相关的冲突。在这种情况下，解析器通常会等待一个词法分析器。

一个问题的答案。您可以使用 MailboxProcessor 同时运行词法分析和解析。

思想的核心。您可以在 mailBoxProcessor 中运行词法分析器。Lexer 应该生成新的令牌，处理并发布它们。Lexer 通常比解析器快，有时它应该等待解析器。解析器可以在必要时接收下一个令牌。下面提供的代码。您可以修改超时，traceStep 以找到最适合您的解决方案。

```
[<Literal>]
let traceStep = 200000L

let tokenizerFun = 
    let lexbuf = Lexing.LexBuffer<_>.FromTextReader sr                        
    let timeOfIteration = ref System.DateTime.Now
    fun (chan:MailboxProcessor<lexer_reply>) ->
    let post = chan.Post 
    async {
        while not lexbuf.IsPastEndOfStream do
            lastTokenNum := 1L + !lastTokenNum
            if (!lastTokenNum % traceStep) = 0L then 
                let oldTime = !timeOfIteration
                timeOfIteration := System.DateTime.Now
                let mSeconds = int64 ((!timeOfIteration - oldTime).Duration().TotalMilliseconds)
                if int64 chan.CurrentQueueLength > 2L * traceStep then                                                                                  
                    int (int64 chan.CurrentQueueLength * mSeconds / traceStep)  |> System.Threading.Thread.Sleep      
            let tok = Calc.Lexer.token lexbuf
            // Process tokens. Filter comments. Add some context-depenede information.
            post tok
    }   

use tokenizer =  new MailboxProcessor<_>(tokenizerFun)

let getNextToken (lexbuf:Lexing.LexBuffer<_>) =
    let res = tokenizer.Receive 150000 |> Async.RunSynchronously
    i := 1L + !i 

    if (!i % traceStep) = 0L then 
        let oldTime = !timeOfIteration
        timeOfIteration := System.DateTime.Now
        let seconds = (!timeOfIteration - oldTime).TotalSeconds          
    res

let res =         
    tokenizer.Start()            
    Calc.Parser.file getNextToken <| Lexing.LexBuffer<_>.FromString "*this is stub*" 
```

完整解决方案可在此处获得：[https](https://github.com/YaccConstructor/ConcurrentLexPars) ://github.com/YaccConstructor/ConcurrentLexPars在此解决方案中，我们仅演示所描述想法的完整实现。性能比较不是实际的，因为语义计算非常简单，没有令牌处理。

要了解性能比较结果，请查看完整报告[https://docs.google.com/document/d/1K43g5jokNKFOEHQJVlHM1gVhZZ7vFK2g9CJHyAVtUtg/edit?usp=sharing](https://docs.google.com/document/d/1K43g5jokNKFOEHQJVlHM1gVhZZ7vFK2g9CJHyAVtUtg/edit?usp=sharing) 在这里，我们比较了 T-SQL 子集解析器的顺序和并发解决方案的性能。顺序：27 秒，并发：20 秒。

我们也在生产 T-SQL 翻译器中使用这种技术。

# jquery-plugins - jQuery Star Rating Plugin 和 Google Closure Compiler 的 externs

> ID：11494350
> 
> 赞同：2
> 
> 时间：2012-07-15T18:07:46.180
> 
> 标签：jquery-plugins, extern, google-closure-compiler

我创建了一个 externs 文件，以便能够使用 Google Closure Compiler 的 ADVANCED_OPTIMIZATIONS 编译 jQuery Star Rating Plugin fyneworks.com/jquery/star-rating/#tab-Testing。

但是，即使我引用了标准的 jQuery extern，'$' 也会被重命名，这会破坏插件。

也许相关：如果我使用未修改的插件，“评级”也会被重命名。我可以通过以下方式修复该部分：

```
$.fn['rating'] = function(opts) { 
```

从[谷歌闭包编译jQuery插件](https://stackoverflow.com/questions/1703934/google-closure-compile-jquery-plugin)......但这并不能修复'$'（如果可能的话，使用未修改的插件会很好）。

从我对外部的尝试（这可能是错误的和/或不完整的）：

```
// ??? for '$'

// this one does NOT prevent 'rating' from being renamed
function rating(arg1) {}

// the following seem to work: they prevent the functions from being renamed
rating.focus = function() {}
rating.blur = function() {}
rating.fill = function() {}
... etc. 
```

命令行（和下载中的 rating.sh）：

```
java -jar ../compiler-latest/compiler.jar --formatting pretty_print --compilation_level ADVANCED_OPTIMIZATIONS --externs externs/jquery-1.7.js --externs externs/jquery.rating-extern.js --js original/jquery.rating.js --js_output_file jquery.rating.gcc.js 
```

错误信息：

```
Firefox:
$(".star1").rating is not a function
callback: function (value) {
jquery.ratingSampleCode.js (line 9)

Chrome:
Uncaught TypeError: Object [object Object] has no method 'rating'
jquery.ratingSampleCode.js:8 
```

从我的示例代码：

```
$('.star1').rating({
    callback: function (value) { 
```

测试： http: [//prefabsoftware.com/test/rating-july15/](http://prefabsoftware.com/test/rating-july15/)

下载：prefabsoftware.com/test/rating-july15.zip

一些有用的链接：（我不允许将其指定为降价，因为我无法使用我的旧信誉点登录......）

*   高级编译和外部：developers.google.com/closure/compiler/docs/api-tutorial3#externs
*   示例 externs: contrib: code.google.com/p/closure-compiler/source/browse/#svn%2Ftrunk%2Fcontrib%2Fexterns) 包括 jQuery 本身，但不包括评级插件
*   更多外部人员：code.google.com/p/closure-compiler/source/browse/#svn%2Ftrunk%2Fexterns

外部有一个简单的修复方法吗？还是更好的解决方案？

谢谢！

* * *

好的，这适用于 externs 文件：

```
$.prototype.rating = function(arg1) {}
jQuery.prototype.rating = function(arg1) {}

$.prototype.rating.focus = function() {}
... etc. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T02:36:42.453

根据您的描述，您似乎不正确地使用了外部文件。您的插件的外部文件将允许其他用户编译引用您的插件的代码。它根本不应该用于编译您的实际插件代码。要编译您的代码，您只需要 jQuery extern 文件。

jQuery 代码样式在 Closure-compiler 中存在已知问题。特别是，您需要避免以下情况：

*   `$`别名的任何使用。使用完整的`jQuery`命名空间。编译器不能很好地处理别名命名空间。
*   `jQuery.fn`别名。而是使用`jQuery.prototype`.
*   使用`jQuery.extend`方法添加函数原型或公共方法。相反，将它们直接添加到原型中。（例如：`jQuery.fn.extend({a: 'foo'});`会变成`jQuery.prototype.a = 'foo';`）；

使用 ADVANCED_OPTIMIZATIONS，请记住，您仍然必须导出或引用任何公共方法和原型。这可能意味着 SIMPLE_OPTIMIZATIONS 更适合您的项目。

有关详细信息，请参阅[http://blogs.missouristate.edu/web/2011/02/14/jquery-plugins-and-closure-compiler/](http://blogs.missouristate.edu/web/2011/02/14/jquery-plugins-and-closure-compiler/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T22:39:56.153

查看最新的 externs：[https ://github.com/iplabs/closure-compiler/tree/master/contrib/externs](https://github.com/iplabs/closure-compiler/tree/master/contrib/externs)

# asp.net-mvc - MVC ASP.NET - 让 jtable 调用 httpPost 方法？

> ID：11494352
> 
> 赞同：1
> 
> 时间：2012-07-15T18:07:59.110
> 
> 标签：asp.net-mvc, asp.net-mvc-3, http-post, jquery-jtable

我正在尝试使用 MVC 3 处理 jTables，但遇到了问题。当我的页面加载时，我没有收到任何对我的 [HttpPost] 方法的调用。我想正因为如此，我不断收到“连接到数据库时出错”的消息。

有人可以解释为什么我的 [HttpPost] 方法没有被调用吗？以下是相关代码：

```
 <div id="CompetitionTable""></div>

<script type="text/javascript">

    $(document).ready(function () {

        //Prepare jtable plugin
        $('#CompetitionTable').jtable({
            title: 'The Events List',
            paging: true, //Enable paging
            pageSize: 10, //Set page size (default: 10)
            sorting: true, //Enable sorting
            defaultSorting: 'Name ASC', //Set default sorting
            actions: {
                listAction: '@Url.Action("EventList", "CompetitionController")'
            },
            fields: {
                EventID: {
                    key: true,
                    create: false,
                    edit: false,
                    list: false
                },
                EventName: {
                    title: 'Name',
                    width: '15%'
                },
                CompetitorEmail: {
                    title: 'Email address',
                    list: false
                },
                CompetitorName: {
                    title: 'Competitor',
                    width: '15%',
                },
                Score: {
                    title: 'Score',
                    width: '10%',
                }
            }
        });

        //Load list from server
        $('#CompetitionTable').jtable('load');
    });

</script>

 [HttpPost]
        public JsonResult EventList(int compId)
        {
            try
            {
                //Get data from database
                List<Event> events = Event.getEventsByCompetitionId(compId);

                //Return result to jTable
                return Json(new { Result = "OK", Records = events});
            }
            catch (Exception ex)
            {
                return Json(new { Result = "ERROR", Message = ex.Message });
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:45:03.557

您的 MVC 操作等待一个参数`(compId)`。但是您的 lisAction 没有提供：

列表动作：`'@Url.Action("EventList", "CompetitionController")'`

它必须是这样的：

列表动作：`'@Url.Action("EventList", "CompetitionController")compId=5'`

可能，这个表是为每场比赛动态填充的，并且在服务器端是已知的。所以，它必须是这样的：

列表动作：`'@Url.Action("EventList", "CompetitionController")compId=@ViewBag.compId'`

当然，您必须`compId`在此视图的操作中设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T04:57:57.217

您调用 listAction 的方式是错误的。你应该这样称呼它**'/CompetitionController/EventList'**

# asp.net-mvc - 如何配置aspx视图

> ID：11494354
> 
> 赞同：0
> 
> 时间：2012-07-15T18:08:08.193
> 
> 标签：asp.net-mvc, visual-studio-2010, asp.net-mvc-2, mono, profiling

控制器代码：

```
public ActionResult Index()        {
var start = DateTime.Now;
var view = View(new DetailViewModel());
// var view = new ContentResult() { Content = "Done" };
var endTime = DateTime.Now - start;
return view; 
```

在快速笔记本电脑中将页面返回到 localhost 中的浏览器需要 0.5 秒，而在虚拟服务器中使用 Mono/Apache 的生产服务器中需要 4 秒。endTime 值非常小。看起来延迟发生在返回视图语句之后。

如果视图被替换为

```
var view = new ContentResult() { Content = "Done" }; 
```

页面立即呈现。

与视图关联的 aspx 文件是指 Site.Master nad 包含调用几种业务方法和一些部分视图的代码。

如何找到导致这种缓慢的代码？

使用 Visual Web Developer 2010 Express、C#、MVC2

安德鲁斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T19:23:46.433

您可以使用市场上可用的分析器

我更喜欢 JetBrains Dot Trace

JetBrains 点跟踪内存和性能分析器[http://www.jetbrains.com/profiler/](http://www.jetbrains.com/profiler/)

[红门的蚂蚁分析器](http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/?utm_source=google&utm_medium=cpc&utm_content=unmet_need&utm_campaign=antsmemoryprofiler&gclid=COeQgKeznLECFSgntAodiE4lQA)

[Scitech 的内存分析器](http://memprofiler.com/)

[女士 CLR 探查器](http://www.microsoft.com/en-us/download/details.aspx?id=16273)

# c# - C#的图形库

> ID：11494355
> 
> 赞同：0
> 
> 时间：2012-07-15T18:08:13.827
> 
> 标签：c#, database, controls

我正在寻找一种开源或廉价的方式来绘制/图表数据。我在这里搜索并在github和codeplex上找到了一些，但没有任何屏幕截图。Silverlight 似乎有一个不错的选择，但我陷入了“需要更新 - 已经是最新的”循环。建议？谢谢。

编辑：不幸的是，我使用的是 Visual C# 2010 Express。我认为它不适用于快速版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T18:49:36.427

那么zedgraph呢？

[点我](http://zedgraph.sourceforge.net/samples.html)

我将它用于 xy 图，但它可以做更多的事情:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T18:11:47.067

您没有说您使用的是哪个版本的 VS，但[Chart Controls](http://msdn.microsoft.com/en-us/library/dd456632.aspx)是为 VS2010+ 内置的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T18:54:19.860

如果您正在寻找 Silverlight 库，您可以在[Silverlight Toolkit](http://silverlight.codeplex.com)中找到它。对于 WPF，它包含在[WPF Toolkit](http://wpf.codeplex.com)中。否则，如另一个答案中所述，对于 Windows 窗体，图表库包含在 .NET 4 的标准框架中。

# javascript - 从字符串调用命名空间函数

> ID：11494356
> 
> 赞同：-2
> 
> 时间：2012-07-15T18:08:14.390
> 
> 标签：javascript

现在我使用这个方法来调用命名空间中的函数：

```
eval('Admin.' + section + '.' + action + '()'); 
```

但我不喜欢 use `eval`，我需要调用不同命名空间中的方法，使用 JSON 给我的字符串创建调用，但我认为这不是一个好的系统，因为`eval`它很危险。

还有其他形式可以使它起作用吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T18:09:22.267

您可以使用`[]`运算符来执行此操作：

```
Admin[ section ][ action ](); 
```

# javascript - 如何在没有冲突的情况下进行多个json请求

> ID：11494360
> 
> 赞同：3
> 
> 时间：2012-07-15T18:08:52.360
> 
> 标签：javascript, jquery

我发现了许多与我的问题类似的问题。也许是我，但我很难找到一个真正明确的答案来解释为什么我不能执行多个 json 请求或者为什么这不起作用。

**这是我的 jQuery 代码：**

```
$.getJSON('http://api.espn.com/v1/sports/basketball/nba/teams/16/news?apikey=0001234', function(data) {
    console.log(data.headlines);              
});

$.getJSON('http://api.espn.com/v1/sports/football/nfl/teams/16/news?apikey=0001234', function(data) {
    console.log(data.headlines);
}); 
```

**这是我在控制台日志中收到的错误。**

```
XMLHttpRequest cannot load http://api.espn.com/v1/sports/football/nfl/teams/16/news?apikey=62t2h4tsdmhr2q7aynvjuv2s. Origin null is not allowed by Access-Control-Allow-Origin. 
```

当我自己运行一个 $.getJSON 请求时，它工作正常。所以我假设这是因为我提出了多个请求。我只是不确定如何以不相互冲突的方式编写它。感谢任何帮助。谢谢

**编辑**

所以我猜那个问题..是否可以通过这种方式进行多个请求。我的代码有问题吗？或者它很可能是 ESPN 的 API 的问题。我可以尝试使用 yahoo api，看看是否得到相同的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T18:43:23.590

**你能一个接一个地触发两个 json 请求吗？**

是的。他们不会互相干扰。

**ESPN 会为这两个请求返回数据吗？**

目前没有。您的第二个请求将返回 403 响应。他们可能会在某个时候改变这一点，谁知道......

**为什么我会收到错误消息`Origin null is not allowed by Access-Control-Allow-Origin.`？**

正如您在评论中提到的，您的脚本是从一个以`file://`. 如本[答案所述](https://stackoverflow.com/a/3744697/30007)

> CORS 标头有两种方式表明跨域 XHR 正常。一种是发送 Access-Control-Allow-Origin: * （如果您是通过 $.get 访问 Flickr，他们一定是这样做的），另一种是回显 Origin 标头的内容。但是，file:// URL 会产生一个空的 Origin，无法通过回显授权。

一旦您将文件托管在某个服务器上，即使`localhost`，您也不会收到该错误。作为替代方案，`jsonp`如果 ESPN 支持，您可以尝试使用请求。

试试这个查询，

```
$.getJSON('http://api.espn.com/v1/sports/football/nfl/teams/16/news?apikey=0001234&callback=?',     
function(data) {
    console.log(data.headlines);
}); 
```

请注意`&callback=?`网址末尾的...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T18:30:59.277

`$.getJSON`发出多个调用在概念上没有任何问题。虽然，正如 Amith George 在对原始问题的评论中提到的那样，如果您超出允许的速率限制，您可能会收到 403 回复。（Twitter 使用此响应代码；我不确定 ESPN 是否使用。）

对我来说，当这些 JSON 调用是托管在域（例如 jsfiddle.net）中的 HTML 文件的一部分时，我会将两个对象记录到控制台（请参阅[http://jsfiddle.net/pGBmT/](http://jsfiddle.net/pGBmT/)）。这使用 jquery 1.7.2。

如果我在 HTML 文件中尝试旧版本的 jquery (1.3)，我会收到您注意到的错误。

但是，当我使用 jquery 1.7.2 时，它在本地也可以正常工作（尽管其他人报告了偶尔的问题）。这是我在本地尝试的文件：

```
<!doctype html>
<html>
  <head><meta charset="utf-8"><title>Test</title></head>
  <body>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>
      $.getJSON('http://api.espn.com/v1/sports/basketball/nba/teams/16/news?apikey=62t2h4tsdmhr2q7aynvjuv2s', function(data) {
        console.log(data.headlines);              
      });
      $.getJSON('http://api.espn.com/v1/sports/football/nfl/teams/16/news?apikey=62t2h4tsdmhr2q7aynvjuv2s', function(data) {
        console.log(data.headlines);
      });
    </script>
  </body>
</html> 
```

您可以尝试连续多次重新加载。大多数时候我认为没有问题，但偶尔会收到 403。通常我会得到一个成功的响应，第二个是原始错误。

我最好的猜测是速率限制问题。尝试将其中一个呼叫`setTimeout`延迟 3 或 4 秒。当我尝试这个时：

```
<!doctype html>
<html>
  <head><meta charset="utf-8"><title>Test</title></head>
  <body>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>
      $.getJSON('http://api.espn.com/v1/sports/basketball/nba/teams/16/news?apikey=62t2h4tsdmhr2q7aynvjuv2s', function(data) {
        console.log(data.headlines);              
      });
      setTimeout(function () {$.getJSON('http://api.espn.com/v1/sports/football/nfl/teams/16/news?apikey=62t2h4tsdmhr2q7aynvjuv2s', function(data) {
        console.log(data.headlines);
      })}, 4000);
    </script> 
```

​​​

它连续工作了5次，没有任何问题！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T18:13:01.700

我很难看到即使是单个`getJSON()`请求也可以工作。默认情况下，您不允许进行跨域浏览器请求 - 这就是您的错误消息所述。

要进行跨域请求，您必须使用 JSON-P（如果 API 支持它），或者在您自己的域中设置服务器端代理，您可以使用 Ajax 请求调用它 - 从而避免跨域域请求。

# php - 文件上传期间临时文件名的意义何在？

> ID：11494361
> 
> 赞同：1
> 
> 时间：2012-07-15T18:08:59.737
> 
> 标签：php, file-upload, temporary-files

有什么意义`$_FILES["file"]["tmp_name"]`？

我知道这是存储在服务器上的文件的临时副本的名称，但是为什么我们需要这个`$_FILES["file"]["name"]`？

我认为这与防止名称冲突有关，这是真的吗？还有其他原因吗？我正在使用 PHP 语法，但我猜这个概念将适用于所有语言？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T18:12:38.520

1.  这不是 PHP 语法。
2.  `$_FILES['x']['name']`将文件名存储在用户的文件系统上——这只是浏览器设置的额外信息——就像`$_FILES['x']['type']`.
3.  `$_FILES['x']['tmp_name']`将上传文件的名称存储在服务器上。

### 编辑：

当您上传文件时，它会以物理方式存储在服务器的硬盘上。文件名（不是整个路径）将在 PHP 中的`$_FILES['x']['tmp_name']`变量下可用。您应该使用[`move_uploaded_file()`](http://php.net/manual/en/function.move-uploaded-file.php)函数移动文件。此函数知道存储文件的目录的路径，因此它能够将文件移动到新位置。

`$_FILE['x']['name'] / ['type']`实际上完全没有用，因为在文件上传期间由浏览器设置，因此它们可以存储虚假信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T18:12:47.443

因为当有人上传文件时，除非您将其保存在某处，否则它不会真正以“名称”保存在磁盘上，除非您明确将其保存在其他地方。在那之前，它的内容只能在临时文件中找到。

# backbone.js - 删除相应的 DOM 节点后，主干视图是否仍然存在？

> ID：11494365
> 
> 赞同：0
> 
> 时间：2012-07-15T18:09:28.050
> 
> 标签：backbone.js, garbage-collection

我们的 Web 应用程序中有一些遗留的非主干代码。尽管我们附加`views`到现有的 DOM 元素，但仍有一些*尚未重构的*代码删除某些 DOM 元素，即删除调用不通过视图，但更像是 jQuery 调用`$('#domID').remove();`

我有一种唠叨的感觉，骨干视图可能像僵尸一样徘徊，但我没有办法看到它？这有害吗？我们是否应该优先考虑重构并让所有删除都通过视图和调用`view.remove()`进行`view.unbind()`正确删除？

如果单独删除 DOM 节点，视图是否会被垃圾回收？我想如果不是绑定到某个事件，但如果不是呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T19:09:22.290

只有在某处引用了该视图时，该视图才会持续存在。有四种杂散参考来源需要考虑：

1.  绑定到模型和集合，即`this.collection.on('reset', this.render)`等。
2.  通过视图的`events`.
3.  通过直接`$(...).on(...)`调用绑定到 DOM 对象。
4.  普通的旧变量引用，例如`this.current_view = new V(...)`.

**(1)**通常由视图的[`remove`](http://backbonejs.org/#View-remove)方法处理，您必须`remove`自己调用，Backbone 或 jQuery 中没有任何东西可以为您执行此操作。例如：http: [//jsfiddle.net/ambiguous/e574Z/](http://jsfiddle.net/ambiguous/e574Z/)

**(2)**容易。主干视图使用单个[`delegate`](http://api.jquery.com/delegate/)调用将视图的事件绑定到视图的`el`. 因此，如果您`el`通过简单的方式删除视图，`$(x).remove()`那么事件引用就会消失。但是，如果您将不同的视图附加到同一个视图，则`el`需要调用[`undelegateEvents`](http://backbonejs.org/#View-undelegateEvents)以分离`delegate`; 这通常会在一个`remove`方法中完成：

```
remove: function() {
    this.undelegateEvents();
    return this;
} 
```

但是，再一次，你必须在`remove`某个地方给自己打电话。

**(3)**很少见，但有时在窗口滚动事件、对话框的主体单击事件等情况下是必需的。当然，你必须自己清理这些，因为 Backbone 不知道你在背后做什么，你绑定的元素会在视图之外`el`（或者你会在**(2)**中） . 你会在哪里清理这些？当然是`remove`方法。

**(4)**一如既往，由您决定。通常，这种事情是这样处理的：

```
if(this.current_view)
    this.current_view.remove();
this.current_view = null; 
```

是的，`remove`又来了。

* * *

所以，如果你只有**(2)**之类的东西，那`$('#domID').remove();`就没问题了，不应该留下任何僵尸；事实上，默认[`remove`](http://backbonejs.org/#View-remove)实现是公正`this.$el.remove()`的，文档也说了这么多：

> **消除** `view.remove()`
> 
> 用于从 DOM 中删除视图的便利功能。相当于调用`$(view.el).remove();`

但是，您可能还涉及到**（1）**之类的事情，因此添加/更新所有`remove`方法并调用`view.remove()`以删除视图将是一个好主意。

# php - 如何使用 Abraham 的 twitteroauth 库捕获错误或异常？

> ID：11494367
> 
> 赞同：1
> 
> 时间：2012-07-15T18:09:36.430
> 
> 标签：php, twitter, oauth

使用[https://github.com/abraham/twitteroauth](https://github.com/abraham/twitteroauth)：

```
function getTwitterFeed($token_array){
    require_once('twitteroauth/twitteroauth.php');
    $oauth_token = $token_array['access_token'];
    $oauth_token_secret = $token_array['access_token_secret'];
    $connection = new TwitterOAuth(CONSUMER_KEY, CONSUMER_SECRET, $oauth_token, $oauth_token_secret);
    $response = $connection->get("statuses/user_timeline");

    //...do stuff with the response
} 
```

我想捕获身份验证问题（无效的令牌或令牌机密）和/或“超出速率限制”的错误或异常。

我在任何地方都找不到有关此库的错误处理的任何信息。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T18:17:19.217

查看 PHP 手册的[异常](http://php.net/manual/en/language.exceptions.php)部分，该库广泛使用它们。

基本上它们看起来像这样：

```
try {
    // your code here
} catch (OAuthException $e) {
    // your error handling here
} 
```

该类`OauthException`是库用于每次抛出的内容。

### 编辑0：

不幸的是，从实际 twitter API 返回的错误没有被库转换为异常，因此您必须检查 get() 和其他调用的返回值，并查找“error”键，错误看起来像这样：

```
object(stdClass)[5]
   public 'error' => string 'Could not authenticate you.' (length=27)
   public 'request' => string '/1/account/verify_credentials.json?aauth_consumer_key=CONSUMER_KEY_HERE&oauth_nonce=cfbf6a55b26683750a166f14aeb5ed84&oauth_signature=c96MciQcODQD5jUAkyrAmSxXa0g%3D&oauth_signature_method=HMAC-SHA1&oauth_timestamp=1342379970&oauth_token=alma&oauth_version=1.0' (length=258) 
```

它还将 API 实例的 http_code 代码属性设置为响应的 http 状态，如果不是 200 则表示错误。

### 编辑1：

我创建了一个库的[分支](https://github.com/complex857/twitteroauth/commit/4f497e10a17e90895712250a899f943d14b23512)，它将为每个返回非 200 HTTP 状态的请求生成异常，异常的代码将是 twitter 返回的 http 状态，消息是消息（如果存在），twitter 的[http 错误代码列表](https://dev.twitter.com/docs/error-codes-responses)将帮助解码错误。

为方便起见`TwitterOauthException`，还引入了一个新的 Exception 子类，该子类库抛出的每个异常都是该异常的子类。

# bash - 如何使用 find 递归转换 JPG 图像？

> ID：11494374
> 
> 赞同：2
> 
> 时间：2012-07-15T18:10:17.193
> 
> 标签：bash, recursion, directory, find

基本上我想要做的是递归搜索工作目录，然后使用给定的路径来调整图像的大小。例如，查找所有 *.jpg 文件，将它们调整为 300x300 并重命名为whatever.jpg。

我应该做一些事情`$(find | grep *.jpg)`来获得路径吗？当我这样做时，输出是没有用引号括起来的目录，这意味着我必须先插入它们才能有用，对吧？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-11-19T10:46:14.410

我将*mogrify*与*find*一起使用。

可以说，我需要嵌套文件夹/另一个/文件夹/*.jpg 中的所有内容都在***.png**

`find . -name "*.jpg" -print0|xargs -I{} -0 mogrify -format png {}`

&& 有一点解释：

`find . -name *.jpeg`-- 查找嵌套文件夹中的所有 jpeg。
`-print0`-- 打印所需的文件名而不会有令人讨厌的惊喜（例如：文件名空格分隔） -- 使用*mogrify*
`xargs -I {} -0`一个一个地处理文件

 *最后*那些 {}*只是查找结果的虚拟文件名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T18:19:03.027

你可以在 GNU find 中使用类似的东西：

```
find . -iname \*jpg -exec /your/image/conversion/script.sh {} + 
```

这在引用方面会更安全，并产生更少的进​​程。只要您的脚本可以处理参数列表的长度，此解决方案应该是最有效的选择。

如果您需要处理非常长的文件列表，您可能需要付出代价并产生更多进程。您可以修改 find 以分别处理每个文件。例如：

```
find . -iname \*jpg -exec /your/image/conversion/script.sh {} \; 
```*

# c# - BackgroundWorker DisconnectedContext

> ID：11494375
> 
> 赞同：0
> 
> 时间：2012-07-15T18:10:32.247
> 
> 标签：c#, wpf, backgroundworker

我有以下代码：

```
public static Emgu.CV.Capture _capture;
public static DispatcherTimer _timer; 
```

```
_timer = new DispatcherTimer();
_timer.Interval = _settings.camera_interval;
_timer.Tick += ProcessFrame; 
```

```
BacgroundWorker _bw = new BackgroundWorker
{
    WorkerReportsProgress = true,
    WorkerSupportsCancellation = true
};

_bw.DoWork += (s, e) =>
{
    // Initialize the device in background
    _capture = new Capture();
};

_bw.RunWorkerCompleted += (s, e) =>
{
    _capture.SetCaptureProperty(CAP_PROP.CV_CAP_PROP_FRAME_HEIGHT,
        _settings.camera_height);
    _capture.SetCaptureProperty(CAP_PROP.CV_CAP_PROP_FRAME_WIDTH,
        _settings.camera_width);
    Brightness = _capture
        .GetCaptureProperty(CAP_PROP.CV_CAP_PROP_BRIGHTNESS);

    Contrast = _capture
        .GetCaptureProperty(CAP_PROP.CV_CAP_PROP_CONTRAST);

    // Get images from camera
    _timer.Start();
};

_bw.RunWorkerAsync(); 
```

```
 public override void CleanUp()
 {
     _timer.Stop();            
     _bw.Dispose();
     if (_capture != null) _capture.Dispose();
 } 
```

该应用程序工作正常，但当我关闭应用程序时抛出我：`Message: Context0x23754b0' Disconnected. ...` **如何解决这个问题？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T20:50:34.357

这是一个与 COM 相关的错误，这无疑是因为您在后台线程上创建了 Capture 对象。COM 对象具有线程亲和性，一旦创建它的线程停止运行，COM 对象就死了，不能再使用了。无论如何尝试使用它都会产生警告。

这不会发生在 RunWorkerCompleted 事件处理程序中是非常了不起的，这必须以一种不明显的方式隐藏在 OpenCV 或 Emgu 管道中。这当然并不意味着它不可能在某一天发生。您需要重新考虑这一点，仅在工作线程上创建对象并让其他所有内容都在 UI 线程上运行没有多大意义。对工人做所有事情，包括处置。或者没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T18:48:34.290

我认为这与您的相机捕获库以及它如何可能使用非托管资源有关。

我首先将您的所有代码注释掉，`RunWorkerCompleted`看看该消息是否仍然存在。如果不是，那么它是由一个或多个`GetCaptureProperty`调用引起的。我怀疑它不会。

我在 Egmu.CV.Capture 的[文档](http://www.emgu.com/wiki/files/2.0.0.0/html/18b6eba7-f18b-fa87-8bf2-2acff68988cb.htm)中看到有一种`Capture.DisposeObject()`方法可以谈论释放捕获的对象。我的猜测是，在您实例化`_capture`并完成您需要做的事情之后，您必须进行清理。我建议在您`ProcessFrame`完成后（或在您的应用程序退出时）尝试调用`_capture.DisposeObject()`以查看是否清理并正常退出。

**编辑：**

如果一切都失败了，我建议的方法是尽可能多地注释掉你的代码，以达到可以退出程序而不抛出异常的程度。然后，在部分代码中进行注释，直到您可以准确找到创建或运行的内容，最终导致退出时出现异常。一旦你可以本地化它，你就会更好地了解如何修复它。

# iphone - iOS 中的单词定义

> ID：11494376
> 
> 赞同：1
> 
> 时间：2012-07-15T18:10:34.917
> 
> 标签：iphone, objective-c, ios

> **可能重复：**
> [字典应用程序](https://stackoverflow.com/questions/2771559/dictionary-application)

我的 iOS 程序需要大量的单词定义。有没有办法实时获取定义（作为字符串），或者至少在编译前预先上传它们。UIReferenceLibraryViewController 不允许提取定义...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T18:42:26.133

您可能对[WordNet感兴趣](http://wordnet.princeton.edu/)

还有一个廉价的 iOS 准备适应它：[lexicontext](http://www.lexicontext.com/about.html)（我没有使用它的从属关系或经验）。

# java - 来自 db 的多语言支持数据

> ID：11494377
> 
> 赞同：0
> 
> 时间：2012-07-15T18:10:39.360
> 
> 标签：java, jpa

我的应用程序具有用于英语和德语的 nameEn 和 nameDe 实体。但现在只使用英语。由于有这么多可用的实体，我想要一个可以返回所选语言条目的通用类，但是对于多个条目，我的方法不起作用。

```
 @Entity
 @Table(name="employee")    
 public class Employee  implements java.io.Serializable {
     // Fields
   private Integer id;
   private String nameEn;      
   private String nameDe;    

   //Getter, Setter Methods 
}

@Entity 
@Table(name="address")
public class Address implements 
  java.io.Serializable {

 private String descriptionEn;
 private String descriptionDe;
}

public interface ILabelText {
   String getNameEn();
   String getNameDe();   
   String getDescriptionEn();
   String getDescriptionDe();   
}

public abstract class LabelText implements ILabelText, Serializable {

private static final long serialVersionUID = 1L;

protected String descriptionEn;
protected String descriptionDe;

private Logger log = Logger.getLogger(LabelText.class);
String language = FacesContext.getCurrentInstance().getViewRoot().getLocale().getLanguage();

public String getDescription() {        
    log.info("Language Selected is  " + language);
    if (language.equals("De")) {
        return getDescriptionDe();
    } else {
        return getDescriptionEn();
    }
}

    public String getName() {       
    log.info("Language Selected is  " + language);
    if (language.equals("De")) {
        return getNameDe();
    } else {
        return getNameEn();
    }
}
}

//In Xhtml, based on selected locale, display value accordingly
<h:outputText value="#{emp.getName()}" />
<h:outputText value="#{add.getDescription()}" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:16:50.053

您可以创建这样的`Lang`实体

```
@Entity
public class Lang implements Serializable
{
  @Id @GeneratedValue(strategy=GenerationType.IDENTITY)
  private long id;

  @NotNull
  private String key;

  @NotNull
  private String translation;
} 
```

并`Address`像这样使用它

```
@OneToMany(cascade = CascadeType.ALL, fetch=FetchType.EAGER)
@MapKey(name = "key")
protected Map<String, Lang> name; 
```

然后您就可以在 JSF 中访问正确的语言：

```
<h:outputText value="#{emp.name[userLocale].translation}" /> 
```

表达式`userLocale`应解析为您的语言键 ( `en`, `de`, `...`) 或可以硬编码，例如`#{emp.name['en'].translation}`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T18:16:02.513

创建带有翻译的表更容易：

例如：人员 -> 您的所有人员 PersonTranslations

人 | id Person翻译 | 语言环境；人名；

然后在您的 Person 类上，您为谓词上的所有属性设置语言

Person.description（这将使用 person_id 键和语言环境搜索 PersonTranslation）有些类似于 PersonTranslation.find(1, 'en');

![在此处输入图像描述](../Images/ad3b6e1ec7605ed5ef20db3406affc8c.png)

# c++ - 如何在 C/C++ 中从运行时卸载内存偏移计算？

> ID：11494379
> 
> 赞同：6
> 
> 时间：2012-07-15T18:10:54.760
> 
> 标签：c++, c, offset, virtual-memory, addressing

我正在实现一个简单的 VM，目前我正在使用运行时算法来计算单个程序对象地址作为基指针的偏移量。

我今天就这个主题问了几个问题，但我似乎无处可去。

我从问题一中学到了一些东西—— [对象和结构成员访问以及地址偏移量计算](https://stackoverflow.com/questions/11490085/object-and-struct-member-access-and-address-offset-calculation)——我了解到现代处理器具有虚拟寻址功能，允许计算内存偏移量而无需任何额外的算术周期。

从问题二开始 -[在 C/C++ 编译期间地址偏移是否已解决？](https://stackoverflow.com/questions/11491191/are-address-offsets-resolved-during-compile-time-in-c-c)- 我了解到手动进行偏移时无法保证会发生这种情况。

现在应该很清楚，我想要实现的是利用硬件的虚拟内存寻址特性并从运行时卸载这些特性。

我正在使用 GCC，至于平台 - 我正在 Windows 中的 x86 上进行开发，但由于它是一个 VM，我希望它能够在 GCC 支持的所有平台上有效地运行。

因此，欢迎提供有关该主题的任何信息，并将不胜感激。

提前致谢！

编辑：关于我的程序代码生成的一些概述 - 在设计阶段，程序被构建为树层次结构，然后递归序列化为一个连续的内存块，以及索引对象并计算它们从程序内存块开始的偏移量.

编辑2：这是VM的一些伪代码：

```
switch *instruction
   case 1: call_fn1(*(instruction+1)); instruction += (1+sizeof(parameter1)); break;
   case 2: call_fn2(*(instruction+1), *(instruction+1+sizeof(parameter1));
           instruction += (1+sizeof(parameter1)+sizeof(parameter2); break;
   case 3: instruction += *(instruction+1); break; 
```

情况 1 是一个接受一个参数的函数，该参数在指令之后立即找到，因此它作为指令的 1 个字节的偏移量传递。指令指针递增 1 + 第一个参数的大小以查找下一条指令。

情况 2 是一个接受两个参数的函数，和之前一样，第一个参数作为 1 字节偏移量传递，第二个参数作为 1 字节偏移量加上第一个参数的大小传递。指令指针然后增加指令的大小加上两个参数的大小。

情况 3 是 goto 语句，指令指针增加一个偏移量，该偏移量紧跟 goto 指令。

编辑3：据我了解，操作系统将为每个进程提供自己专用的虚拟内存寻址空间。如果是这样，这是否意味着第一个地址总是......以及零，所以从内存块的第一个字节的偏移实际上就是这个元素的地址？如果内存地址专用于每个进程，并且我知道我的程序内存块的偏移量以及每个程序对象相对于内存块第一个字节的偏移量，那么对象地址是否在编译时解析？

**问题是这些偏移量在 C 代码编译期间不可用，它们在“编译”阶段和转换为字节码期间变得已知。这是否意味着没有办法为“免费”进行对象内存地址计算？**

例如，在 Java 中这是如何完成的，只有虚拟机被编译为机器代码，这是否意味着对象地址的计算会因为运行时算法而降低性能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T20:49:23.853

这里试图阐明链接的问题和答案如何适用于这种情况。

第一个问题的答案混合了两个不同的东西，第一个是 X86 指令中的寻址模式，第二个是虚拟到物理地址的映射。第一个是由编译器完成的，第二个是（通常）由操作系统设置的。在您的情况下，您应该只担心第一个。

X86 汇编中的指令在如何访问内存地址方面具有很大的灵活性。读取或写入内存的指令具有根据以下公式计算的地址：

```
segment + base + index * size + offset 
```

地址的段部分几乎总是默认`DS`段，通常可以忽略。该`base`部分由通用寄存器之一或堆栈指针给出。该`index`部分由通用寄存器之一给出，大小为 1、2、4 或 8。最后，偏移量是嵌入在指令中的常量值。这些组件中的每一个都是可选的，但显然至少必须给出一个。

这种寻址能力通常是指在没有明确的算术指令的情况下计算地址。其中一位评论者提到了一条特殊指令：`LEA`它执行地址计算，但不是读取或写入内存，而是将计算的地址存储在寄存器中。

对于您在问题中包含的代码，编译器很可能会使用这些寻址模式来避免显式算术指令。

例如，`instruction`变量的当前值可以保存在`ESI`寄存器中。此外，每个`sizeof(parameter1)`和`sizeof(parameter2)`都是编译时常量。在标准的 X86 调用约定中，函数参数以相反的顺序推送（因此第一个参数位于堆栈的顶部），因此汇编代码可能看起来像

```
case1: 
  PUSH [ESI+1]
  CALL fn1
  ADD ESP,4 ; drop arguments from stack
  ADD ESI,5
  JMP end_switch
case2: 
  PUSH [ESI+5]
  PUSH [ESI+1]
  CALL fn2
  ADD ESP,8 ; drop arguments from stack
  ADD ESI,9
  JMP end_swtich
case3:
  MOV ESI,[ESI+1]
  JMP end_switch
end_switch: 
```

这是假设两个参数的大小都是 4 个字节。当然，实际代码取决于编译器，只要您要求进行某种级别的优化，编译器就会输出相当高效的代码是合理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T19:04:51.653

您在虚拟机中有一个数据项`X`，位于相对地址`A`，并且有一条指令说（例如）`push X`，对吗？并且您希望能够执行该指令，而无需添加`A`VM 数据区的基地址。

我编写了一个虚拟机，通过将虚拟机的数据区域映射到一个固定的虚拟地址来解决这个问题。编译器知道这个虚拟地址，因此可以`A`在编译时进行调整。这个解决方案对你有用吗？你能自己改变编译器吗？

我的虚拟机在智能卡上运行，并且我可以完全控制操作系统，因此它与您的环境非常不同。但是 Windows 确实有一些用于在固定地址分配内存的工具——例如[VirtualAlloc](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366887%28v=vs.85%29.aspx)函数。你可能想试试这个。如果您尝试一下，您可能会发现 Windows 分配的区域与您的固定地址数据区域冲突，因此您可能必须在分配 VM 的数据区域*后手动加载您使用的任何 DLL。*

但是可能会有无法预料的问题需要克服，而且可能不值得麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T18:33:05.223

使用虚拟地址转换、页表或 TLB 只能在 OS 内核级别完成，并且在平台和处理器系列之间是不可移植的。此外，大多数 CPU ISA 上的硬件地址转换通常仅在某些页面大小的级别上得到支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T20:07:12.517

根据我得到的许多回答来回答我自己的问题。

事实证明，在我的情况下，我想要实现的目标实际上是不可能的，只有在满足特定要求并且需要编译为机器特定指令时，才能免费获得内存地址计算。

我正在为教育目的开发一个视觉元素、乐高风格的拖放编程环境，它依赖于一个简单的 VM 来执行程序代码。我希望最大限度地提高性能，但在我的场景中这是不可能的。这没什么大不了的，因为程序元素也可以生成它们的 C 代码等价物，然后可以按照常规方式对其进行编译以最大限度地提高性能。

感谢所有回复并澄清了我不太清楚的问题的人！

# android - android - android:maxLines="3" 在 2 处截断

> ID：11494387
> 
> 赞同：0
> 
> 时间：2012-07-15T18:12:20.393
> 
> 标签：android, lines

这是我的看法

```
 <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:text="@string/textView1"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:ellipsize="end"
        android:maxLines="3"
        android:textColor="#ffffffff"
        android:background="#ff000000" 
        android:gravity="center"/> 
```

maxLines 为 3 行提供了足够的空间......即使您执行以下操作

```
//Needed code to cast TextView omitted for simplicity
txtView.setLines(3);
//and
txtView.setMaxLines(3); 
```

他们仍然有同样的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T19:48:26.517

这是一个已知的错误。[在此处](http://code.google.com/p/android/issues/detail?id=2254)查看详细信息以及如何解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T18:18:47.483

添加`android:lines="3"`属性可以从 Eclipse 复制工作代码：

```
<TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:ellipsize="end"
        android:maxLines="3"
        android:textColor="#ffffffff"
        android:background="#ff000000" 
        android:gravity="center"  android:lines="3"/> 
```

# xml - OpenSocial 小工具电子邮件客户端支持？

> ID：11494396
> 
> 赞同：0
> 
> 时间：2012-07-15T18:13:33.573
> 
> 标签：xml, email, embed, content-type, opensocial

我正在考虑在电子邮件中使用 OpenSocial 小工具，但找不到任何关于电子邮件客户端支持 Content-Type application/embed+{xml | json}。

有人知道此信息的最新参考资料吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T19:21:12.780

IBM 已宣布，其邮件客户端将支持在其下一个版本（嵌入式体验）中将 OpenSocial 小工具嵌入电子邮件中。这段来自 Lotusphere 2012 的[视频](http://www.youtube.com/watch?v=O7yby_IJqgY)展示了几个业务合作伙伴，展示了他们通过在电子邮件中嵌入小工具完成的一些集成。请记住，您还可以在活动流中嵌入小工具，IBM 和 Jive 也将提供支持。如果您还有其他问题，请告诉我。

# css - CSS 渐变只适合视口

> ID：11494401
> 
> 赞同：0
> 
> 时间：2012-07-15T18:14:14.257
> 
> 标签：css

在下一页中，如果视口高于`#container`(600px)，则 css 渐变正确渲染。但是如果视口只有 400px，那么在底部 200px（视口外）就缺少渐变。

我该如何解决？

```
<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <title>Test-Site for css gradient</title>
  <style type="text/css">
    body {
    margin: 0;
    }

    html, body, #body-wrapper {
        height: 100%
    }

    #body-wrapper {
        background-repeat: no-repeat;
        background-image: -webkit-gradient(
            linear,
            left top, left bottom,
            from(rgba(131,20,20,1)),
            to(rgba(243,172,149,1)),
            color-stop(0.2, rgba(159,19,24,1)),
            color-stop(0.7, rgba(222,0,30,1))
        );
        background-image: 
        -webkit-linear-gradient(
            top,
            rgba(131,20,20,1),
            rgba(159,19,24,1) 20%,
            rgba(222,0,30,1) 70%,
            rgba(243,172,149,1)
        );
        background-image: 
        -moz-linear-gradient(
            top,
            rgba(131,20,20,1),
            rgba(159,19,24,1) 20%,
            rgba(222,0,30,1) 70%,
            rgba(243,172,149,1)
        );
        background-image: 
        -o-linear-gradient(
            top,
            rgba(131,20,20,1),
            rgba(159,19,24,1) 20%,
            rgba(222,0,30,1) 70%,
            rgba(243,172,149,1)
        );
        background-image: 
        linear-gradient(
            top,
            rgba(131,20,20,1),
            rgba(159,19,24,1) 20%,
            rgba(222,0,30,1) 70%,
            rgba(243,172,149,1)
        );
    }

    #container {
        max-width: 900px;
        margin: 0 auto;
        background: #fff;
        border: 1px solid black;
        height: 600px;
    }
  </style>
</head>

<body>

  <div id="body-wrapper">
    <div id="container">

    </div>
  </div>

</webl:context>  
</body>
</html> 
```

编辑：在这里您可以在线查看：[Test-Site](http://betschmann.ch/test.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T18:19:18.617

必须在#container 中尝试这种风格：

```
display:block;
overflow:hidden; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T18:21:07.097

发生这种情况是因为`height: 100%`将文档、`<body>`元素和您的高度设置`<div id="body-wrapper">`为与视口匹配（在这种情况下，视口小于内容的高度）。

添加`min-height: 600px`到`html, body, #body-wrapper`?

# c++ - 可以通过转换为与布局兼容的类型来访问私有成员函数吗？

> ID：11494403
> 
> 赞同：6
> 
> 时间：2012-07-15T18:14:38.160
> 
> 标签：c++, casting, c++11, access-control, private-methods

从这个问题的讨论中，[如何在 C++ 中实现私有变量的访问？](https://stackoverflow.com/q/11486622/819272)我提出了一种变体：可以通过强制转换和依赖布局兼容性来调用私有成员函数，而不是访问私有数据成员吗？

一些代码（灵感来自 Herb Sutter 的专栏[Uses and Abuse of Access Rights](http://www.gotw.ca/gotw/076.htm)）

```
#include <iostream>

class X 
{ 
public:
  X() : private_(1) { /*...*/ }

private: 
  int Value() { return private_; }
  int private_; 
};

// Nasty attempt to simulate the object layout
// (cross your fingers and toes).
//
class BaitAndSwitch
    // hopefully has the same data layout as X
{   // so we can pass him off as one
public:
  int Value() { return private_; }
private:
  int private_;
};

int f( X& x )
{
  // evil laughter here
  return (reinterpret_cast<BaitAndSwitch&>(x)).Value();
}

int main()
{
    X x;
    std::cout << f(x) << "\n"; // prints 0, not 1
    return 0;
}; 
```

注意：这有效（至少在 Ideone 上）！[新的C++11 标准](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/n3242.pdf)有什么方法可以通过依赖布局兼容性和 reinterpret_cast / static_cast提供有**保证**的或至少是**实现定义的方法来规避访问控制？**

**EDIT1**：Ideone 上的[输出](http://ideone.com/eQgi6)

**EDIT2**：在 Sutter 的专栏中，他列出了上述代码不能保证有效的两个原因（尽管它在实践中有效）

> a) X 和 BaitAndSwitch 的对象布局不能保证相同，尽管实际上它们可能总是相同。
> 
> b) reinterpret_cast 的结果是未定义的，尽管大多数编译器会让你尝试按照黑客的意图使用生成的引用。

新的 C++11 标准现在是否提供这些 layout / reinterpret_cast 保证？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T18:26:30.737

是的，您可以创建一个使用与您试图窃取的类型相同的布局的类型，然后`reinterpret_cast`从该类型到您的布局兼容类型。但这只有在源类型和目标类型都是标准布局类型时才受标准保护***（***当然，只有在它们的布局相同时它才真正起作用）。因此，如果源具有虚拟功能，那么您就完蛋了。

这似乎满足了 Sutter 的两个问题。标准布局的规则确保了两种以相同顺序定义相同成员的标准布局的类型是布局兼容的（第 9.2 节，第 17 段）：

> 如果两个标准布局结构（第 9 条）类型具有相同数量的非静态数据成员并且相应的非静态数据成员（按声明顺序）具有布局兼容类型（3.9），则它们是布局兼容的。

以及指定两种标准布局类型之间转换含义的规则`reinterpret_cast`（第 5.2.10 节，第 7 段）：

> 对象指针可以显式转换为不同类型的对象指针。当“pointer to T1”类型的prvalue v转换为“pointer to cv T2”类型时，结果是`static_cast<cv T2*>(static_cast<cv void*>(v))`如果T1和T2都是标准布局类型（3.9）并且T2的对齐要求不比那些更严格T1 的，或者如果任一类型为无效。

# javascript - 如何查看我在 Canvas 上拍摄的子弹？

> ID：11494406
> 
> 赞同：0
> 
> 时间：2012-07-15T18:15:41.187
> 
> 标签：javascript, canvas, html5-canvas, javascript-objects

我的画布再次出现问题。我目前正在编写一个 Javascript Space Shooter。

我创建了一个子弹类，并希望宇宙飞船能够发射子弹。问题是：没有错误，也没有子弹。我不完全确定它们是没有被画出来还是我看不到它们。

如果你能帮助我，你真的会帮助我很多：

我已上传到我的 Git 的相关文件（main.js、hold.js）： [https ://github.com/nemoxdelight/First_Game](https://github.com/nemoxdelight/First_Game)

对不起德国人的评论，但这有时让我更容易：P

我认为问题出在 hold.js 中的某个地方：

```
//Kugeln
this.leerTaste = false;
this.isShooting = false;
this.kugeln = [];
this.aktuelleKugel = 0;
//Wenn wir einen neuen Held erstellen, werden 20 Schuss "geladen"
for (var i = 0; i < 20; i++) {
    this.kugeln[this.kugeln.length] = new Kugel();
}
}
//Held Objekt
Held.prototype.draw = function() {
    this.tasteCheck();
    this.held_nase_x = this.held_x + 10;
    this.held_nase_y = this.held_y;
    this.schussCheck();
    this.kugeln_zeichnen();
    ctx.beginPath();
    ctx.fillStyle = this.farbe_ball;
    ctx.arc(this.held_x, this.held_y, this.groese_ball, 0, Math.PI * 2, true);
    ctx.arc(this.held_x - 17, this.held_y, this.groese_ball - 3, 0, Math.PI * 2, true);
    ctx.shadowBlur = this.blur_ball;
    ctx.shadowColor = this.farbe_blur_ball;
    ctx.closePath();
    ctx.fill();
    ctx.shadowColor = "transparent";
};
Held.prototype.tasteCheck = function() {
    if (this.hochTaste == true) {
        this.held_y -= this.speed;
    }
    if (this.rechtsTaste == true) {
        this.held_x += this.speed;
    }
    if (this.linksTaste == true) {
        this.held_x -= this.speed;
    }
    if (this.runterTaste == true) {
        this.held_y += this.speed;
    }
};
//Da unsere Kugeln nur in x-Richtung vom Held aus fliegen, sind sie alle größer als 0\.          Der Ursprung findet sich beim Held.
Held.prototype.kugeln_zeichnen = function() {
    for (var i = 0; i < this.kugeln.length; i++) {
        if (this.kugeln[i].held_x >= 0) {
            this.kugeln[i].draw();
        }
    }
}
Held.prototype.schussCheck = function() {
    if (this.leerTaste && !this.isShooting) {
        this.isShooting = true;
        this.kugeln[this.aktuelleKugel].geschossen(this.held_nase_x, this.held_nase_y);
        this.aktuelleKugel++;
        //Wiederverwendne der Kugeln
        if (this.aktuelleKugel >= this.kugeln.length) {
            this.aktuelleKugel = 0;
        }
    } else if (!this.leerTaste) {
        this.isShooting = false;
    }
}
//KUGEL FUNKTIONEN
function Kugel() {
    this.groese_kugel = 3;
    //Kugeln aufbewahren
    this.drawX = -20;
    this.drawY = 0;
}
Kugel.prototype.draw = function() {
    this.drawX += 3;
    ctx.beginPath();
    ctx.fillStyle = '#ff99ff';
    ctx.arc(this.drawX, this.drawY, this.groese_kugel, 0, Math.PI * 2, true);
    ctx.closePath();
    ctx.fill();
    if (this.drawX > width) {
        this.drawX = -20;
    }
};
Kugel.prototype.geschossen = function(startX, startY) {
    //Sagt an was erlaubt ist.
    this.drawX = startX;
    this.drawY = startY;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T18:28:03.247

```
Held.prototype.kugeln_zeichnen = function () {
for (var i = 0; i < this.kugeln.length; i++){
    if(this.kugeln[i].held_x >= 0) {
        this.kugeln[i].draw();
       }
   }
} 
```

没有称为 的字段`held_x`，至少在 的构造函数中没有`Kugel`。也许你想使用类似的东西

```
Held.prototype.kugeln_zeichnen = function () {
    for (var i = 0; i < this.kugeln.length; i++){   
        if(this.kugeln[i].drawX - this.held_nase_x > -20){
            this.kugeln[i].draw();
        }
    }
} 
```

顺便说一句，你真的是说`if(laeuft = true){`in`main.js line 46`吗？

# sql - 我怎么知道由于级联或用户而发生在外国列中的更新？

> ID：11494412
> 
> 赞同：1
> 
> 时间：2012-07-15T18:16:38.083
> 
> 标签：sql, sql-server-2005

假设我有 3 个表（_items、_invoiceHeader、_invoiceDetails）我在 _invoiceDetails 上构建了一个更新触发器，因此如果我更新 _itemCode，我可以更新 _items 表中的 _balance 列。但问题是，如果我更新 _items 表中的 _itemCode 列，则 _invoiceDetails 表上的触发器会立即运行，因为 _items 和 _invoiceDetails 表中的 _itemCode 列上的级联规则。那么我怎么知道发生在 _invoiceDetails 表上的更新是由于级联或同一张表 _invoiceDetails 上的更新而完成的。

我将此代码放在 _invoiceDetails 表的更新触发器中：

```
 if(UPDATE(itemCode)) // I need a condition here to prevent the implementation if the update happened because of cascade rule.
   BEGIN
       UPDATE items
           SET balance=balance+d.quantity
       FROM items
       INNER JOIN DELETED d
       ON items.accountsItemCode=d.accountsItemCode       

       UPDATE items
       SET balance=balance-i.quantity
       FROM items
       INNER JOIN INSERTED i
       ON items.itemCode=i.itemCode
  END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T18:21:33.783

我们的表格设计标准之一是在我们想要跟踪更改的表格中包含元列。我们有更新 ID/更新时间戳或其他时间数据源之类的东西。

通常，我们传递调用该​​过程的用户的 corp id 并将其插入到表中，同时使用一些服务帐户名称插入批处理/触发器/任何非用户操作。

在这里应用这样的模式将解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T21:48:13.957

尝试使用[`Trigger_NestLevel`](http://msdn.microsoft.com/en-us/library/ms182737%28v=sql.90%29.aspx)以确定您的其他触发器是否处于活动状态。

# php - 如何在mysql数据库中插入一个php代码片段

> ID：11494415
> 
> 赞同：0
> 
> 时间：2012-07-15T18:17:12.340
> 
> 标签：php, mysql, html-entities

**我有一个如下的 php 代码片段：**

```
function is_ancestor_of( $page_name = null, $post ) {

if(is_null($page_name))
return false;

// does it have a parent?
if (!isset( $post->post_parent ) OR $post->post_parent <= 0 )
return false;

//Get parent page
$parent = wp_get_single_post($post->post_parent);

 if ( $parent->post_name == $page_name ){
echo $parent->post_name.' - '.$page_name;
return true;
} else {
is_ancestor_of( $page_name, $parent );
}
} 
```

我只想在 mysql 数据库表中插入整个代码，然后再次在页面上使用相同的格式重新检索它。当我简单地使用 INSERT INTO 查询将此代码插入数据库时​​，会发生 mysql 语法错误，因为代码由于特殊字符而中断了 sql 查询。有没有办法做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T18:22:34.560

[使用mysql_real_escape_string()](http://php.net/manual/en/function.mysql-real-escape-string.php)转义特殊字符。您可能最好不要使用 mysql_* 函数，例如开始使用[PDO](http://php.net/manual/en/book.pdo.php)或[mysqli_*](http://php.net/manual/en/book.mysqli.php)。

**编辑** 如评论中所述，确保将代码作为字符串放置，并且 DB 字段是正确的数据类型。此外，请确保在整个字符串（或代码）上使用 mysql_real_escape_string()（如果您坚持使用 mysql_*）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T18:25:11.160

是的，你可以这样做。多种方式：

1.  PDO - 这实际上是最好的选择。在 PHP 手册中研究这个主题，因为这比保护 PHP 中的 MySQL 查询不被破坏更有帮助。
2.  addlashes() - 添加斜杠以转义字符。这肯定不会破坏您的 MySQL 查询。
3.  mysql_real_escape_string()
4.  mysql_escape_string()

**与此答案的先前版本相比，已编辑** 强调 PDO，因为 PDO 比其他选项更安全，并且在使用 PHP 和 MySQL 时可以使用更多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T18:34:34.307

您将需要使用 mysql_real_escape_string() 来转义 php 代码，以便在插入时不会引发错误。然后，如果您希望它执行，则在该语句上运行 eval()。如果你有一个混合的 html 和 php 存储在数据库中，你会像这样调用 eval

```
 eval('?>'.$dbresult.'<?php'); 
```

只需确保您在数据库结果上使用 stripslashes()

# c# - 在不知道 coclass 的情况下释放 COM 接口

> ID：11494416
> 
> 赞同：4
> 
> 时间：2012-07-15T18:17:14.137
> 
> 标签：c#, com, interface, interop

我有一个 C# 客户端，它使用来自本机 C++ COM 服务器 dll 的接口。DLL 实现了 4 个接口。这 4 个接口由 DLL 中的 4 个组件类实现。但是只有 1 个 coclass 向客户公开。接口 2,3,4 通过接口 1 中的一种方法返回给客户端。

C++ COM 服务器：

```
interface IFace1: IUnknown{
HRESULT CreateOtherInterface([in] REFIID iidFace, [out, iid_is(iidFace)] void** ppOut);
};

coclass ClassIFace1
{
    [default] interface IFace1;
}; 
```

C#客户端：

```
ClassIFace1 Face1Obj = new ClassIFace1();

IFace1 Face1Ctrl = (IFace1)Face1Obj; 

IFace2 Face2Ctrl = null;
IntPtr Face2IntPtr = new IntPtr();

Face1Ctrl.CreateOtherInterface(Face2Guid, out Face2IntPtr);
Face2Ctrl = (IFace2)Mashal.PtrToStructure(Face2IntPtr);

//Consume Face2Ctrl

if(Face1Obj != null)
{
    Marshal.ReleaseComObject(Face1Obj);
} 
```

由于 IFace2、IFace3 和 IFace4 与 IFace1 不共享相同的 coclass，我怀疑 Marshal.ReleaseComObject(Face1Obj) 行只会破坏 ClassIFace1 对象，但不会破坏 ClassIFace2、ClassIFace3、ClassIFace4 对象并导致内存泄漏。有没有办法解决这个问题？还是 Marshal.ReleaseComObject(Face1Obj) 实际上也破坏了其他 COM 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T02:13:13.350

就像汉斯所说的那样，`CreateOtherInterface`看起来很奇怪。通常，您不需要自己创建它。您需要做的就是确保客户端可以访问所有四个 coclass。然后，`Activator.CreateInstance`或当地人`CoCreateInstance`会为你做正确的事情。另一种选择是公开一个单一的 coclass 并让该单一的 coclass 支持所有四个接口。

但是，由于您提到只有 1 个 coclass 向客户端公开，我想有一些奇怪的原因是客户端使用的 TLB 文件没有看到其他 3 个 coclass，或者其他 3 个 coclass 没有正确注册但被以某些专有方式的第一个 coclass。我还假设您不能修改服务器端实现。

鉴于所有这些假设，这是我的答案。引用计数在 4 个 coclass 中独立维护。因此，释放第一个 coclass 上的引用不会减少其他三个 coclass 中的引用计数。

还有一些你需要注意的事情。您正在使用`Marshal.ReleaseComObject(Face1Obj)`释放第一个 coclass。您可以这样做，因为第一个 coclass 是由 Runtime Callable Wrapper (RCW) 包装的。就像 Martin 所说的那样，即使您不调用`Marshal.ReleaseComObject()`.NET 运行时，也会在发生垃圾收集时为您执行此操作。

但是，*Face2Ctrl*的获取方式不同。它没有被 RCW 包裹。您将返回的指针直接视为结构。这对我来说听起来不对，因为您可能在内存对齐和数据编组方面遇到问题。您想要做的可能是调用`Marshal.GetObjectForIUnknown`它将为您返回 RCW。一旦你拿到你的 RCW，你可以打电话`Marshal.ReleaseComObject()`及时释放你的 RCW。

如果实现`CreateOtherInterface`是 like `QueryInterface`，它总是`AddRef`在返回的接口上，你应该`Marshal.Release`在完成*Face2Obj*后调用返回的接口。 `Marshal.ReleaseComObject()`还不够，因为它只是释放了 RCW 添加的引用计数，但在这种情况下，您需要多次调用`IUnknown.Release`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T20:20:41.767

COM 对象的正常行为是通过它们的接口独占访问它们。coclass 仅在创建 COM 对象的新实例时是必需的，您不能直接访问 coclass。所以我怀疑你的例子应该是这样的：

```
IFace1 face1Ctrl = new ClassIFace1(); 
```

该方法`CreateOtherInterface()`对我来说有点奇怪，它具有与 a 相同的签名`QueryInterface()`，所以我认为它应该做同样的事情（我不熟悉 C++）：

```
IFace2 face2Ctrl;
face1Ctrl.CreateOtherInterface(IFace2, out face2Ctrl); 
```

我觉得应该可以，试试看。如果它是普通的 QueryInterface 方法，你应该能够得到这样的接口：

```
IFace2 face2Ctrl = face1Ctrl as IFace2; 
```

COM 对象是引用计数的，一旦您销毁对接口的最后一个引用，它们就会被释放。一旦垃圾收集器使用对 COM 对象的引用销毁您的变量，COM 对象就会自行释放。这在 C# 中可能是一个问题，因为您必须等待垃圾收集器并且无法确定释放的顺序。如果您需要在给定时刻释放 COM 对象，您可以使用`Marshal.ReleaseComObject()`，但通常您只需等待垃圾收集器递减引用计数器。

只要你不知道 COM 对象的实现，你就不知道每个接口是否有它自己的 coclass，或者一个 coclass 是否实现了多个接口。当您使用 COM 对象时，您应该不需要这些知识。查询接口可以创建一个新的 coclass 并返回它的接口，或者它可以返回自己并增加引用计数器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T07:27:56.097

另外，在如何获取接口上存在一些错误。这是 C# 客户端的完整解决方案：

```
//======Create IFace1 and IFace2 interface===============
Type consoleType = Type.GetTypeFromCLSID(Face1CoCLSID);
Object Face1Obj = Activator.CreateInstance(consoleType);
IFace1 Face1Ctrl = (IFace1)Face1Obj;

Guid IFace2Guid = typeof(IFace2).GUID;
IntPtr Face2IntPtr = IntPtr.Zero;

//Face2 object's ref count will go up 1
Face1Ctrl.CreateOtherInterface(Face2Guid, out Face2IntPtr); 

//Face2 object's ref count will go up 2\. One by "GetObjectForIUnknown()" 
//and one by "as", since the "as" will trigger .Net to call QueryInterface()
IFace2 Face2Ctrl = Marshal.GetObjectForIUnknown(Face2IntPtr) as IFace2; 

//=============Consume Face2Ctrl=========================

//======Destroy IFace1 and IFace2 interface===============

if (Face2Ctrl != null)
{
//Release 3 times as there were 3 RefCount obtained.

    Marshal.Release(Face2IntPtr);
    Marshal.Release(Face2IntPtr);
    Marshal.Release(Face2IntPtr);
    Face2Ctrl = null;     
}

if(Face1Obj != null)
{
//both Face1 object and Face2 object will get FinalRelease() after
//this line.
    Marshal.ReleaseComObject(Face1Obj); 
    Face1Obj = null;
} 
```

# ruby-on-rails - 如何在 Heroku Postgres 中从字符串主键中分离 id

> ID：11494417
> 
> 赞同：1
> 
> 时间：2012-07-15T18:17:16.947
> 
> 标签：ruby-on-rails, activerecord, heroku

我有一个使用字符串作为主键的模型：

```
class Employee < ActiveRecord::Base
   self.primary_key = "employment_id"
end 
```

该表还包含带有唯一性约束的 Rails 默认“id”字段。

当我在本地添加新员工时，一切正常，Rails 会自动生成一个新的唯一 ID。

但是，当我在 Heroku Postgres 上运行它时，它似乎将 'id' 和 'employment_id' 视为同一个字段。我试图通过手动设置一个唯一的 id 来解决这个问题，但仍然得到这种行为：

```
Employee.new do |s|

  max_id = Employee.maximum(:id)  
  puts max_id.to_s             # => 1803 

  s.employment_id = "fred_01"      
  s.id = max_id + 1 

  puts employment_id.to_s      # => 1804

end 
```

我在本地运行 postgres 9.1.3（而 Heroku 在 9.1.4 上）。我在 Rails 3.2.3 上。

知道会发生什么吗？我的一个想法是去掉“id”列，现在它是多余的，但我担心以后会有更多的痛苦。你有什么建议？

# ruby-on-rails - 将 td 元素的值传递给 rails 控制器

> ID：11494419
> 
> 赞同：0
> 
> 时间：2012-07-15T18:17:20.667
> 
> 标签：ruby-on-rails

我正在尝试将元素的值传递给 rails 控制器！

目前，我有这样的事情：

```
<td id="dbname"><%= link_to db, :action => :show %></td> 
```

这表示 html 表中的一行，其中包含一个字符串值，例如“development”。

当用户单击“开发”链接时，<%= link_to ... %> 会从当前单击的值中获取值并将其传递给 rails 控制器动作，在本例中为 show 动作。

这怎么可能实现！？

更新 - 生成链接：

```
<% @dbs.each do |db| %>
<tr>
    <td id="dbname"><%= link_to db, :action => :show %> </td>
</tr> 
```

更新 2：

这是我的索引控制器：

```
conn = Mongo::Connection.new
@dbs = conn.database_names #this returns an array of strings (which are the names of the databases) 
```

现在我希望能够单击这些数据库，然后将单击的文本传递给 rails 控制器的显示操作。我不确定如何为这些链接生成自定义资源路径......但我正在考虑使用 Ajax 或与 javascript 相关的东西来完成它。也许使用 jQuery 获取点击链接的文本，然后将 Ajax 请求发送到 rails 控制器，并将文本作为参数！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T18:46:13.323

我认为您尝试做的事情很奇怪，但解决方案可能是使用 javascript 将 id 作为查询字符串附加到每个链接的 href 中。

如果您能稍微解释一下您要达到的目标，也许我们可以找到更好的解决方案。

希望能帮助到你！

**编辑：**

如果您有一个链接表，我认为您应该将它们视为一种资源并以 REST 方式管理它们。

你的控制器应该有一个索引和显示动作，你应该在路由文件中将链接声明为资源（也许链接它是一个保留字，你必须使用不同的名称，我不确定），索引动作将获取所有链接，当您渲染它们时，您可以在控制器中使用类似于“link_path(link.id)”的内容为每个链接指定链接（请记住，您应该定义一个显示操作）您将收到链接 id因此您可以使用简单的“查找”加载它并将其传递给视图。

我建议您始终寻找 REST 方法来解决 ROR 中的问题。

**编辑2：**

好的，让我们看看这是否适合您：

我想您有一个模型来表示您正在谈论的那些链接，例如：

```
class DataBaseLinks < ActiveRecord:Base

end 
```

此模型由数据库中的表备份，如果您已通过 rails 方式生成它，您还将有一个标识每个数据库链接的 id 列。

在您的控制器中，假设 DataBaseLinksController，您将拥有：

```
class DataBaseLinksController < ApplicationController

  def index
    @dabatase_links = DataBaseLink.all
  end

  def show
    @database_link = DataBaseLink.find(params[:id])
  end

end 
```

（我已经避免了所有的验证和检查）。

您在 index.html.erb 中所要做的就是：

```
<% @database_links.each do |database_link| %>
  <%= link_to database_link.name, database_link_path(database_link.id) %>
<% end %> 
```

这将生成具有正确路径的所有链接到 show 操作（也许路由助手有点不同，但不是很多）。

另请注意，您必须在您的 routes.rb 中添加以下行：

```
resources :database_links, :only => [:index, :show] 
```

你怎么看？

**编辑3：**

（当我们找到正确的答案时，我会删除我编辑的所有答案）

好的，我假设您没有使用类似 mongoid 的东西，因此您没有活动记录类似的对象。

您是否在您的观点中尝试过：

```
<% dbs.each do |dbs_name| %>
  <%= link_to dbs_name, :controller => "your_controller", :action => :show, :dbs_name => dbs_name %>
<% end %> 
```

# wordpress - wordpress主题摘录功能消除-thao工作室主题

> ID：11494421
> 
> 赞同：0
> 
> 时间：2012-07-15T18:17:32.343
> 
> 标签：wordpress, wordpress-theming

我想删除摘录功能或使其无功能，因为我希望查看所有帖子的全部内容。我认为主题有一些跟踪以确保摘录在该行中，因此它必须存在。

```
function excerpt($limit) {
      $excerpt = explode(' ', get_the_excerpt(), $limit);
      if (count($excerpt)>=$limit) {
      array_pop($excerpt);
    $excerpt = implode(" ",$excerpt).'...';
  } else {
    $excerpt = implode(" ",$excerpt);
  } 
  $excerpt = preg_replace('`\[[^\]]*\]`','',$excerpt);
  return $excerpt;
}

function content($limit) {
  $content = explode(' ', get_the_content(), $limit);
  if (count($content)>=$limit) {
    array_pop($content);
    $content = implode(" ",$content).'...';
  } else {
    $content = implode(" ",$content);
  } 
  $content = preg_replace('/\[.+\]/','', $content);
  $content = apply_filters('the_content', $content); 
  $content = str_replace(']]>', ']]&gt;', $content);
  return $content;
} 
```

我只有这两行我知道相关的代码。我不知道 $limit 来自哪里，我试图在所有与主题相关的 php 上找到，没有发现。请帮我。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T18:50:51.670

只需找到要显示完整内容而不是摘录内容的模板文件（可能是 index.php），然后将函数替换`the_excerpt()`为`the_content()`循环内的函数，即

```
<?php if (have_posts()) : ?>
           <?php while (have_posts()) : the_post(); ?>    
           <!-- do other stuff ... -->
            the_content();
           <?php endwhile; ?>
 <?php endif; ?> 
```

关于[**the_content()**](http://codex.wordpress.org/Function_Reference/the_content)和[**循环**](http://codex.wordpress.org/The_Loop)。

# c++ - 默认纯虚析构函数

> ID：11494422
> 
> 赞同：41
> 
> 时间：2012-07-15T18:17:32.517
> 
> 标签：c++, c++11

在 C++11 中，我们可以声明一个自动生成的析构函数：

```
struct X {
  virtual ~X() = default;
}; 
```

此外，我们可以将析构函数声明为纯虚函数：

```
struct X {
  virtual ~X() = 0;
}; 
```

我的问题是：如何声明析构函数*既是*自动生成的*又*是纯虚拟的？看起来下面的语法不正确：

```
struct X {
  virtual ~X() = 0 = default;
}; 
```

这也不是：

```
struct X {
  virtual ~X() = 0, default;
}; 
```

也不是这个：

```
struct X {
  virtual ~X() = 0 default;
}; 
```

编辑：关于问题目的的一些澄清。基本上我希望一个*空*类是不可实例化的基类，但派生类是可实例化的，那么该类必须有一个纯虚析构函数。但另一方面，我不想在 .cpp 文件中提供定义。所以我需要某种与`default`. 我想知道是否有人有解决问题的想法。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-07-15T18:54:55.970

为了定义一个纯虚方法，你需要一个独立于声明的定义。

所以：

```
struct X {
    virtual ~X() = 0;
};

X::~X() = default; 
```

# visual-studio-2010 - 以下 SqlCmd 变量的缺失值：Path1 Path2

> ID：11494423
> 
> 赞同：10
> 
> 时间：2012-07-15T18:17:35.803
> 
> 标签：visual-studio-2010

我得到错误

以下 SqlCmd 变量缺少值：Path1 Path2。

在 Visual Studio 的几个 Sql 项目中。

我试着用谷歌搜索它，但什么也没找到。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-12T19:53:42.357

选择 SQL 项目。转到项目的属性（ALT + Enter）。导航到 SQLCMD 变量并采取相应措施（删除变量或填写默认值）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-02T06:55:07.690

I ran in to this yesterday after tinkering with the project settings for my database project (right-click the database project, click properties, then click the Project Settings).

I had checked the *Create script (.sql file)* option and things continued to work as normal for me. But when another team member checked out the the latest update, they could not build and got the error about missing values for SqlCmd variables. Things still worked for me though until I checked out a fresh version of the source and started getting the same error.

To fix, I simply unchecked the *Create script (.sql file)* setting and all was well again.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-21T14:55:56.280

我遇到了这个问题。我添加了一些 SQLCMD 变量然后删除了它们。SQLCMD 变量不再存在于发布文件或 .sqlproj 文件中。我对项目中的所有文件进行了grep，并且变量在任何地方都不存在。我重新启动了 Visual Studio。但是，我仍然得到 *以下 SqlCmd 变量的缺失值：*错误。

我从项目目录中删除了 *.dbmdl 和 *.sqlproj.vspcc 文件。该项目随后成功发布。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T22:22:04.747

这也发生在我身上，结果发现其他人已经在项目上设置了一些自动日志记录，该项目映射了 sqlcmd 变量中的路径变量。在他们签入 tfs 后，由于此错误，我无法再构建。让他们清除路径并更新项目或匹配您这边的变量值。

# c# - 如何在类中自动生成常量？

> ID：11494425
> 
> 赞同：1
> 
> 时间：2012-07-15T18:18:15.680
> 
> 标签：c#, winforms, code-generation

我在 Winforms 中有一个修改过的面板控件。它会将其上的所有控件的内容保存到文件中。一个示例控件可以是：“CheckBox_OptionA”

现在我希望能够做到这一点： bool optiona = MyForm.MyAutoSavePanel.OptionA;

我知道我可以为此制作一个索引器，但我想保留编译时类型安全。

有没有办法让 Visual Studio 生成的那些字段具有正确的类型？我可以轻松获得所需的类型和所需的所有其他信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T18:57:18.267

您可以查看两种 Microsoft 技术来为您生成代码文件：[CodeDOM](http://msdn.microsoft.com/en-us/library/y2k85ax6.aspx)和[T4](http://msdn.microsoft.com/en-us/library/bb126445.aspx)。CodeDOM 是基于对象模型的，因此您可以用 C# 编写一个应用程序，该应用程序将基于一些输入构建一个对象模型，然后输出一个或多个代码文件。T4 较新，基于代码（或任何其他）文件的文本模板，可以更快地编写，所以先看一下。

# mysql - Rails：使用 has_and_belongs_to_many 关系对找到的对象进行排序

> ID：11494426
> 
> 赞同：0
> 
> 时间：2012-07-15T18:18:22.927
> 
> 标签：mysql, ruby-on-rails

```
Class User

has_many_belongs_to_many :books

end

Class Book

has_many_belongs_to_many :users

end 
```

我正在尝试创建书籍列表并按他们拥有的用户数量对它们进行排序：

```
Book.find(:all,:conditions => ['title LIKE ?', "%#{params[:autocomplete]}%"],
:limit => 5, :include => :users, :order => "users.count DESC") 
```

不幸的是，这会引发一个错误，告诉我没有用户列：

```
<pre>Mysql::Error: Unknown column 'users.count' in 'order clause': SELECT  `books`.*
FROM `books`  WHERE (title LIKE '%pop%') ORDER BY users DESC LIMIT 5</pre> 
```

如果我删除“计数”，我仍然会收到一条错误消息，指出 Mysql 找不到“用户”。知道如何获取这些数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T19:13:38.430

当您调用时`users.count DESC`，rails 会尝试查找该列`users.count`。您需要删除`count`并参考`user.id`。

尝试更改`:order => "users.count DESC"`for `:order => "COUNT(users.id) DESC"`。

我现在无法测试它，但我相信它应该可以解决问题......

**编辑**- 尝试新的查询方式（Rails 3）。应该是这样的：

```
Book.where('title LIKE ?', "%#{params[:autocomplete]}%").includes(:users).order(COUNT(users.id) DESC").limit(5) 
```

# c# - MonoDroid、MonoTouch 常用 UI

> ID：11494429
> 
> 赞同：3
> 
> 时间：2012-07-15T18:18:41.967
> 
> 标签：c#, android, iphone, xamarin.ios, xamarin.android

我记得前段时间看到一个很有前途的框架，它可以让开发人员共享为 MonoDroid 和 MonoTouch 开发的应用程序的 UI 代码。现在找不到了，有人知道它的名字吗？

任何试图实现相同目标的框架的链接将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T18:53:40.027

Monocross是您想要的吗[？](https://stackoverflow.com/questions/3670898/reusing-monotouch-code-in-monodroid-app)如果您要走 XNA 路线，
还是[Monogame ？](http://monogame.codeplex.com/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T02:13:05.623

你也可以试试 Mvvmcross。我认为它是从 monocross 分支的，但使用 mvvm 而不是 mvc。

# clojure - 如何使用 Clojure 读取包含测试数据的文件？

> ID：11494431
> 
> 赞同：6
> 
> 时间：2012-07-15T18:18:50.667
> 
> 标签：clojure

我正在编写一段需要读取包含数据的文本文件的代码。文本文件格式为：

```
name 1 4
name 2 4 5
name 3 1 9 
```

我正在尝试以`[:name Sarah :weight 1 cost :4]`.

当我尝试使用 line-seq 阅读器读取文件时，它会将每一行作为一个项目读取，因此分区不正确。请参阅下面的回复：

```
(let [file-text (line-seq (reader "C://Drugs/myproject/src/myproject/data.txt"))
                       new-test-items (vec (map #(apply struct item %) (partition 3 file-text)))]
     (println file-text)   
     (println new-test-items))

(sarah 1 1 jason 4 5 nila 3 2  jonas 5 6 judy 8 15 denny 9 14 lis 2 2  )
[{:name sarah 1 1, :weight jason 4 5, :value nila 3 2 } {:name jonas 5 6, :weight judy 8 15, :value denny 9 14}] 
```

然后我尝试只取 1 个分区，但结构仍然不正确。

```
=> (let [file-text (line-seq (reader "C://Drugs/myproject/src/myproject/data.txt"))
                                new-test-items (vec (map #(apply struct item %) (partition 1 file-text)))]
              (println file-text)   
              (println new-test-items))
(sarah 1 1 jason 4 5 nila 3 2  jonas 5 6 judy 8 15 denny 9 14 lis 2 2  )
[{:name sarah 1 1, :weight nil, :value nil} {:name jason 4 5, :weight nil, :value nil} {:name nila 3 2 , :weight nil, :value nil} {:name jonas 5 6, :weight nil, :value nil} {:name judy 8 15, :weight nil, :value nil} {:name denny 9 14, :weight nil, :value nil} {:name lis 2 2, :weight nil, :value nil} {:name  , :weight nil, :value nil}]
nil 
```

接下来，我尝试 slurp 文件，但情况更糟：

```
=> (let [slurp-input (slurp "C://Drugs/myproject/src/myproject/data.txt")
            part-items (partition 3 slurp-input)
            mapping (vec (map #(apply struct item %) part-items))]
            (println slurp-input)
            (println part-items)
            (println mapping))
sarah 1 1
jason 4 5
nila 3 2 
jonas 5 6
judy 8 15
denny 9 14
lis 2 2

((s a r) (a h  ) (1   1) ( 
```

请帮忙！在 Java 中这似乎是一件很容易的事情，但在 Clojure 中却让我很生气。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T19:05:34.613

将其拆分为一系列行：

```
(line-seq (reader "/tmp/data")) 
```

将它们中的每一个拆分成一个单词序列

```
(map #(split % #" ") data) 
```

制作一个函数，该函数接受一个数据的向量并将其转换为具有正确键的映射

```
(fn [[name weight cost]] 
   (hash-map :name name 
             :weight (Integer/parseInt weight) 
             :cost (Integer/parseInt cost))) 
```

然后将它们重新嵌套在一起

```
(map (fn [[name weight cost]] 
       (hash-map :name name 
                 :weight (Integer/parseInt weight) 
                 :cost (Integer/parseInt cost))) 
     (map #(split % #" ") (line-seq (reader "/tmp/data"))))

({:weight 1, :name "name", :cost 4} 
 {:weight 2, :name "name", :cost 4} 
 {:weight 3, :name "name", :cost 1}) 
```

您还可以通过使用使其更紧凑`zip-map`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T20:36:55.167

你试图在一个地方做所有事情而不测试中间结果。相反，Clojure 建议将任务分解为多个子任务——这使得代码更加**灵活**和**可测试**。这是您的任务的代码（我假设文件中的记录描述了人）：

```
(defn read-lines [filename]
  (with-open [rdr (clojure.java.io/reader filename)]
    (doall (line-seq rdr))))

(defn make-person [s]
  (reduce conj (map hash-map [:name :weight :value] (.split s " "))))

(map make-person (read-lines "/path/to/file")) 
```

# iphone - 具有多个类的 NSXMLParser

> ID：11494434
> 
> 赞同：0
> 
> 时间：2012-07-15T18:19:17.320
> 
> 标签：iphone, objective-c, nsxmlparser, nsobject

我有一个从 Java 到 XML 文件的对象序列化，我必须使用 Objective-c 为 iOS 应用程序反序列化。

我第一次使用 NSXMLParser 并且在 Objective-c 中有一个给定的对象结构。

这是 XML 文件的示例：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<Content.Project>
  <versionName>0.5.241</versionName>
  <spriteList>
    <Content.Sprite>
      <costumeDataList>
        <Common.CostumeData>
          <costumeFileName>CCE87ECA859D4448BC47A837CF024464_background</costumeFileName>
          <costumeName>background</costumeName>
        </Common.CostumeData>
      </costumeDataList>
      <soundList/>
      <scriptList>
        <Content.StartScript>
          <brickList>
            <Bricks.SetCostumeBrick>
              <costumeData reference="../../../../../costumeDataList/Common.CostumeData"/>
              <sprite reference="../../../../.."/>
            </Bricks.SetCostumeBrick>
          </brickList>
          <sprite reference="../../.."/>
          <name>stageStartScript</name>
        </Content.StartScript>
      </scriptList>
      <name>Background</name>
    </Content.Sprite>
... 
```

然后，我为 XML 的某些部分提供了类（从 NSObject 派生），例如`Level`包含一个数组的a，`Sprites`而`Sprite`该类又包含一个数组，`Costumes`依此类推......

我的问题是 XMLParser 并不真正“知道”该值对应于哪个类。我必须区分不同的类来设置相应的属性。

例如，以下行适用于`Level`对象的所有属性（第一级`<Content.Project>`但不是`<spriteList>`等等）： [self.level setValue:self.currentElementValue forKey:elementName];

所以基本上我的问题是：有没有办法区分 XML 文件中不同的“级别”或“深度”...

```
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName
  namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName 
```

...解析器的方法？

我确信必须有一种简单的方法来实现这一点，但我在谷歌上没有找到。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T18:49:56.210

做一个深度计数器。在 didStartElement 中增加它，在 didEndElement 中减少它:-)

# python - 使用带有命名占位符的 SET 的语法错误

> ID：11494438
> 
> 赞同：0
> 
> 时间：2012-07-15T18:19:38.967
> 
> 标签：python, sqlite

我正在尝试更新表中的任意列：

```
cursor.execute('update table set :n = :v where submitter = :s', 
               {'n':'col1', 'v': 10, 's': 'mike'}) 
```

但它给了我`sqlite3.OperationalError: near ":n": syntax error`。奇怪的是，当我这样做时它工作正常

```
cursor.execute('update table set col1 = :v where submitter = :s', 
               {'n':'col1', 'v': 10, 's': 'mike'}) 
```

为什么我似乎不能以节省注入的方式命名列？还有其他方法可以设置任意列吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T18:23:18.103

Only *values* can be bound; *identifiers* (e.g. column/table names) and other structural syntax cannot be bound with placeholders.

In general a prepared statement *must* have a "known query shape" and allowing dynamic identifiers would prohibit that. (There may be databases and database adapters that don't hold to this, but I have yet to meet one.)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T18:24:19.230

Placeholders cannot, as you have discovered, be used as table or column names. Instead, you have to concatenate in a string for the dynamic table or column name.

It is therefore recommended to check it against a whitelist of available column names to be sure it is safe:

```
# Array of valid values for colname
valid_colnames = ['col1','col2','col3']
# Only do it if you received a safe known value
if colname in valid_colnames:
  cursor.execute('update table set ' + colname + ' = :v where submitter = :s', 
               {'v': 10, 's': 'mike'}) 
```

# php - 如何以编程方式将表单添加到 Drupal 7 中的节点？

> ID：11494439
> 
> 赞同：3
> 
> 时间：2012-07-15T18:20:06.480
> 
> 标签：php, drupal, drupal-7, drupal-fapi, drupal-forms

我需要向 Drupal 7 中的节点添加编程表单。如何将表单附加到节点？

```
function addtabexample_form($node, &$form_state) {
  $type = node_type_get_type($node);

  $form['title'] = array(
    '#type' => 'textfield', 
    '#title' => check_plain($type->title_label), 
    '#default_value' => !empty($node->title) ? $node->title : '', 
    '#required' => TRUE, 
    '#weight' => -5,
  );

  $form['field1'] = array(
    '#type' => 'textfield', 
    '#title' => t('Custom field'), 
    '#default_value' => $node->field1, 
    '#maxlength' => 127,
 );

  return $form;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T08:03:02.170

您可以按照此代码示例，使用[hook_node_view](http://api.drupal.org/api/drupal/modules!node!node.api.php/function/hook_node_view/7) ()

```
function [YOUR_MODULE]_node_view($node, $view_mode, $langcode)
{
    $my_form = drupal_get_form('addtabexample_form', $node);
    $node->content['my_form_attached'] = array(
        '#markup' => drupal_render($my_form),
        '#weight' => 10,
    );
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T22:20:05.253

您的代码存在一些需要重写的问题......首先，我建议阅读[Form API Quickstart](http://drupal.org/node/751826)，这是完成工作的不错来源。

我不确定你是如何得到 $node 对象的。您在函数参数中有 $node 和 $form 作为返回值......

请参阅[http://drupal.org/node/197122](http://drupal.org/node/197122)以获取可以嵌入节点中的表单示例（我添加了 D7 部分）。但这样做是非常糟糕的——你将面临函数重新声明问题、索引问题和一大堆麻烦。

我知道这不是一个实际的答案，但我不知道如何用 500 个字符写这个。

# c++ - 如何访问 MacBook 上的网络摄像头？

> ID：11494440
> 
> 赞同：11
> 
> 时间：2012-07-15T18:20:07.377
> 
> 标签：c++, macos, image, camera, g++

Mac OS X Lion 中访问 MacBook/MacBook Pro 和 iMac 中内置的 FaceTime/iSight 摄像头的正确方法是什么？我不得不想象有一种方法可以在使用 Xcode 之外访问它。我需要向 g++ 提供哪些库以及如何编译它？我知道人们已经这样做了，我只是不确定我将如何去做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T19:47:49.730

在 Mac OS X Lion 上，您需要使用 AV Foundation 框架进行视频捕捉。[AV Foundation Programming Guide](https://developer.apple.com/library/mac/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/04_MediaCapture.html#//apple_ref/doc/uid/TP40010188-CH5-SW2)对如何捕获音频和视频数据有明确的说明。您不必使用 Xcode，但您必须使用一些 Objective-C。如果您主要使用 C++ 进行编程，您通常会使用 Objective-C++ 编译器编译一个 Objective-C 对象，以配置各种 AV Foundation 对象并充当视频帧被发送到的视频捕获委托。收到视频帧后，您可以将它们传递回您的 C++ 代码以随意使用。如果你对 Objective-C 有一定的经验，整个过程并不是特别困难。

请注意，如果您需要针对 Lion (10.7) 之前的 Mac OS X 版本，则必须改用 QTKit。这也需要 Objective-C 并且使用它的技术是相似的，但是这个框架的功能更加有限。

# iphone - 如何在 iPhone iOS 5.0 中禁用表情符号键盘

> ID：11494442
> 
> 赞同：0
> 
> 时间：2012-07-15T18:20:20.460
> 
> 标签：iphone, ios, uikeyboard, emoji

我使用以下代码在 iOS 5.0 设备中启用了表情符号键盘：

```
NSMutableDictionary *dict = [NSMutableDictionary dictionaryWithContentsOfFile:@"/private/var/mobile/Library/Preferences/com.apple.Preferences.plist"];
[dict setObject:[NSNumber numberWithBool:YES] forKey:@"KeyboardEmojiEverywhere"];
[dict writeToFile:PREFS_FILE atomically:NO]; 
```

效果很好，我可以在设置 -> 常规 -> 键盘 -> 国际键盘 -> 添加新键盘中看到表情符号键盘的选项

但是现在，我想像以前一样从国际键盘列表中删除表情符号键盘。为此，我做了：

```
[dict removeObjectForKey:@"KeyboardEmojiEverywhere"]; 
```

但是表情符号键盘仍然可见，我无法让它消失。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T18:24:30.097

Restart your iPhone after removing from Application. You can also install `Emoji keyboard` from Appstore, the delete it, restart. You will get `Emoji keyboard` removed.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T18:28:18.807

您不*删除*密钥，而是将其设置为 NO：

```
[dict setObject:[NSNumber numberWithBool:NO] forKey:@"KeyboardEmojiEverywhere"];
[dict writeToFile:PREFS_FILE atomically:NO]; 
```

# .net - 命令按钮阵列

> ID：11494445
> 
> 赞同：-4
> 
> 时间：2012-07-15T18:20:59.687
> 
> 标签：.net, vb.net, button, control-array

如何在 VB.NET 中创建一组按钮？

```
 cmdButton(0)
 cmdButton(1)
 cmdButoon(2) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T20:32:03.560

你可以像这样创建一个数组

```
Dim btnCommand(2) As Button 
```

但是您必须将它添加到您的表单中并添加一个点击处理程序才能使它做任何有用的事情：

```
Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    Dim y As Integer = 25
    Dim btnCommand(2) As Button
    For i As Integer = 0 To btnCommand.Length - 1
        btnCommand(i) = New Button
        Me.Controls.Add(btnCommand(i))
        With btnCommand(i)
            .Top = y
            .Tag = i
            .Text = "Button " + i.ToString
        End With
        y += 25
        AddHandler btnCommand(i).Click, AddressOf ButtonArray_Click
    Next
End Sub

Private Sub ButtonArray_Click(sender As System.Object, e As System.EventArgs)
    Dim btn As Button = sender
    MsgBox("Button " + btn.Tag.ToString + " was clicked")
End Sub 
```

# ruby - rvm 在使用新 gemset 时不通知

> ID：11494450
> 
> 赞同：0
> 
> 时间：2012-07-15T18:21:29.980
> 
> 标签：ruby, macos, rvm, zsh

我在每个项目中使用 rvmrc 文件。当我`cd`进入我的项目时，终端/rvm 并不表示我正在使用新的 gemset。我该如何设置？

如果有帮助：我正在使用 oh-my-zsh。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T22:58:21.627

`use`它可能取决于您的项目文件，基本上 rvm 不会在省略关键字时打印有关使用的信息：

```
rvm 1.9.3     # will be quiet
rvm use 1.9.3 # will print: Using... 
```

当您将它们放入时，结果相同`.rvmrc`，生成新`.rvmrc`的 with`--rvmrc`也会以相同的方式运行：

```
rvm 1.9.3 --rvmrc     # `cd` will be quiet
rvm use 1.9.3 --rvmrc # `cd` will print: Using... 
```

# asp.net - 您如何使用 MySQL 数据库而不是 MS SQL 来设置 Orchard CMS？

> ID：11494453
> 
> 赞同：1
> 
> 时间：2012-07-15T18:21:54.413
> 
> 标签：asp.net, orchardcms

您究竟需要在 Orchard CMS 中修改什么以使其使用 MySQL 数据库而不是 MS SQL 数据库进行存储？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T23:31:14.433

你需要使用这个 fork： http: [//orchard.codeplex.com/SourceControl/network/forks/RickardP/orchardmysql](http://orchard.codeplex.com/SourceControl/network/forks/RickardP/orchardmysql)

# android - Adobe Flex 获取用户电话号码

> ID：11494458
> 
> 赞同：1
> 
> 时间：2012-07-15T18:22:22.250
> 
> 标签：android, apache-flex

我想知道是否可以获得正在运行应用程序的设备的用户电话号码？我正在使用 4.6 版本。

如果是，请注意我应该如何/应该使用哪些扩展/库。

谢谢你的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T18:28:51.750

**编辑：**

在重新审查这个问题时，您似乎是在专门询问 AIR 和通过 Android 访问电话号码。我根据“android”标签做出这个假设，但请编辑您的问题以具体化，因为在 AIR 上为移动设备构建应用程序可能针对多个平台。

对于 Android 平台上的 AIR 开发，我认为无法通过 Actionscript API直接访问“ [TelephonyManager ”。](http://developer.android.com/reference/android/telephony/TelephonyManager.html)

通常，在将 Java 构建到 Android 时，您会执行以下类似操作：

```
TelephonyManager mTelephonyMgr = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
String myNumber = mTelephonyMgr.getLine1Number(); 
```

但是，由于您使用的是 AIR，因此您需要找到或构建“自定义扩展”以添加到 AIR SDK。这是有关如何执行此操作的教程（[来自此 SO 答案](https://stackoverflow.com/questions/5858151/get-sim-number-programmatically-in-flex)）： [http ://www.jamesward.com/2011/05/11/extending-air-for-android/](http://www.jamesward.com/2011/05/11/extending-air-for-android/)

[有人尝试创建自定义 AIR 扩展来访问 TelephonyManager，但似乎他们没有成功完成 Extension](https://stackoverflow.com/questions/9232859/air-native-android-extension-always-returning-null-device-id)。构建一个简单的扩展来访问管理器和您想要的信息应该非常简单（假设这是用于 Android 设备）。但是，您需要进行防御性编程，因为并非所有电话号码都存储在设备 SIM 卡上。

我希望这会有所帮助，我很抱歉假设这是针对 iOS 环境的。

# c# - 如何将 MainWindow.xaml 拆分为单独的文件？- 外包 ?

[问问题](https://stackoverflow.com/questions/ask)问问题 2012-07-15T18:22:51.8231097 次This question shows research effort; it is useful and clear3This question does not show any research effort; it is unclear or not usefulBookmark this question.Show activity on this post.

Hi I would like to know how i can separate my MainWindow.xaml into different xaml files? I would like to outsource my styles and include them whenever i need them. I searched for some solutions and found some stackoverflow posts but none of them helped me.

I would like to achieve something like this (pseudocode)

```
<Window x:Class="MyApp.MainWindow"
 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
 xmlns:local="clr-namespace:MyApp"
 Title="MyApp" Height="350" Width="525">
<Window.Resources> 
 //Import external xaml file with textbox style here 
 //instead of:
<Style TargetType="{x:Type TextBox}">
 <Style.Triggers>
 //add code here
 </Style.Triggers>
</Style>
</Window.Resources>
<StackPanel>
 <TextBox Width="60"/>
 <Button Content="Button" Height="23" Name="button1" Width="75" />
</StackPanel> 
```

[c#](/tags/c# "show questions tagged 'c#'")[wpf](/tags/wpf "show questions tagged 'wpf'")[xaml](/tags/xaml "show questions tagged 'xaml'")4

## 1 回答 1

This answer is useful10

创建 XAML[`ResourceDictionary`](http://msdn.microsoft.com/en-us/library/system.windows.resourcedictionary.aspx)文件，像这样包含它们：

```
<Window.Resources> <ResourceDictionary> <ResourceDictionary.MergedDictionaries> <ResourceDictionary Source="./Styles/TextBlockStyle.xaml" /> </ResourceDictionary.MergedDictionaries> <!-- other resources here --> </ResourceDictionary> </Window.Resources> 
```

于 2012-07-15T18:27:00.523 回答

#### Related

[2](/questions/17802016 "Question score (upvotes - downvotes)")[python - 在无法容纳内存的大文件中查找出现的字符串](/questions/17802016)[1](/questions/17802020 "Question score (upvotes - downvotes)")[c# - 如何在 WPF 中设置列 表框项目的字体大小写？](/questions/17802020)[3](/questions/17802022 "Question score (upvotes - downvotes)")[javascript - 如何将列表框中的选定项目移动到文本框中？](/questions/17802022)[2](/questions/17802023 "Question score (upvotes - downvotes)")[php - 刷新页面后选择选项重置为默认值](/questions/17802023)[1](/questions/17802027 "Question score (upvotes - downvotes)")[c# - GridView 回发错误](/questions/17802027)[1](/questions/17802030 "Question score (upvotes - downvotes)")[ns2 - AODV 中 HELLO 的最大允许大小](/questions/17802030)[4](/questions/17802035 "Question score (upvotes - downvotes)")[c# - 使用 System.Window.Forms.Invoke(delegate) 从另一个表单调用表单时出现问题](/questions/17802035)[2](/questions/17802036 "Question score (upvotes - downvotes)")[scala - 播放 JSON 组合器](/questions/17802036)[1](/questions/17802040 "Question score (upvotes - downvotes)")[c# - 如何为一对多关系表编写插入语句以使用 dataTable 插入](/questions/17802040)[2](/questions/17802043 "Question score (upvotes - downvotes)")[nutch - nutch如何获取爬取的页面内容和对应的URL？](/questions/17802043)

#### Reference

[php](https://php.github.net.cn) × 1429865[c/c++](https://c-cpp.com) × 756500[nginx](https://nginx.github.net.cn) × 49975[mongodb](https://mongodb.net.cn) × 159057[mybatis](https://mybatis.net.cn) × 3233[anaconda](https://anaconda.org.cn) × 13410[pycharm](https://pycharm.net.cn) × 14671[python](https://python.github.net.cn) × 1902243[vscode](https://vscode.github.net.cn) × 56040[docker](https://dockerdocs.cn) × 110988[github](https://github.net.cn) × 49000[flask](https://flask.github.net.cn) × 49129[ffmpeg](https://ffmpeg.github.net.cn) × 24037[jmeter](https://jmeter.net) × 16910[matplotlib](https://matplotlib.net) × 63493[bootstrap](https://getbootstrap.net) × 54641[](https://stackoverflow.com)

##### [Stack Overflow 中文网](https://stackoverflow.org.cn)

遵从 CC BY-SA 知识共享许可协议。

> ID：11494462
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# windows-phone-7 - Whenever I click a link in the webbrowser control the textbox doesn't update to the new URL

> ID：11494470
> 
> 赞同：1
> 
> 时间：2012-07-15T18:23:57.830
> 
> 标签：windows-phone-7

I have been working on a web browser for windows phone 7 as my first project and everything is going well except this one thing. I cannot seem to find much anywhere to help fix this problem.

# reflection - How to monitor and manage (start, stop, install, uninstall, update) OSGi bundles through a program

> ID：11494471
> 
> 赞同：1
> 
> 时间：2012-07-15T18:23:58.933
> 
> 标签：reflection, osgi

I am working on a project that requires to monitor and manage (start, stop, install, uninstall, update) OSGi bundles in an OSGi based application using pre-programed instructions, similar to java reflections, the OSGi application can reflect upon itself by monitoring itself and its context, it can update or remove some bundle or can add(install and start) a new bundle.

For example, there is a chat application developed using OSGi bundles. In order to add self-managing characteristics to it, there need to be a mechanism to monitor and manage (install/uninstall, start/stop, update) OSGi bundles autonomically (without human intervention or as little human involvement as possible). Any idea how this can be achieved?

I tried to explain the problem, but feel free to ask if you dont understand my question.

P.S. I am using OSGi Equinox framework.

Regards.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T06:59:46.997

OSGi 框架已经包含了这种机制，并让您可以使用最基本的 OSGi 接口完全控制包的生命周期。

如果你想从一个 OSGi 包中控制它，我们称它为管理代理包，你可以使用这个包的 BundleContext 来：

[org.osgi.framework.BundleContext](http://dz.prosyst.com/pdoc/mBS_SDK/um/runtime/osgi/docs/framework/api/framework/index.html)

installBundle(java.lang.String location) 从指定的位置标识符安装包。getBundles() 返回所有已安装捆绑包的列表。getBundle(long id) 返回具有指定标识符的包。

一旦你有了 Bundle 对象，你就可以查找关于这个包的所有内容，比如名称、导入的包等；并启动、停止、更新捆绑包。因此，您可以在那里实现您的零管理策略状态的任何逻辑（例如，在发生错误时重新启动所有插件包，或搜索合适的插件并在必须呈现新内容时安装它，或其他）

现在，如果您想从“外部”OSGi 执行所有这些操作，则必须在管理代理包中为外部发布某种接口。一种可能是网页（OSGi 包含一个简单的嵌入式 Web 服务器，请检查 HTTPService）。还有很多其他的，这取决于您想要实现的目标。

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T20:56:12.657

看看`org.osgi.framework` [javadoc](http://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/package-summary.html)。从包的[包上下文](http://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/BundleContext.html)中，您可以安装和获取包。[捆绑](http://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/Bundle.html)API 允许您停止、启动和更新捆绑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-17T06:14:51.793

您可能想查看 Apache Felix FileInstall 源代码。它可能是最简单的“管理代理”，可用于完全管理 OSGi 框架（包括非常重要的 Configuration Admin）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T06:17:46.750

BundleListener类[也](http://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/BundleListener.html)可能对您有用，它会通知您任何捆绑包开始或停止。

# asp.net - How can I connect NHibernate to multiple database servers within the same HttpRequest?

> ID：11494473
> 
> 赞同：0
> 
> 时间：2012-07-15T18:24:20.833
> 
> 标签：asp.net, nhibernate, fluent-nhibernate

I have an ASP.NET 4 web application (MVC 4 release candidate, NHibernate 3, Fluent-NHibernate) that needs to read data from two different databases (each on a different server) during the same HttpRequest. I have two repositories: IndividualRepository and ProductRepository. The Individual repository is read-only and connects to database A; the products repository is read/write and connects to database B. Both databases have a connection string in web.config.

My strategy before this "multiple database servers" requirement was imposed on me was to wire up an HttpModule with a static `SessionFactoryProvider<WebSessionContext>`. It had a static method "GetCurrentSession" that returns `ISession` via sessionFactoryProvider.GetCurrentSession(). Then on BeginRequest I call `sessionFactoryProvider.Bind()`, and on EndRequest I call `sessionFactoryProvider.Unbind()`.

With the addition of the second database server, my plan was to create a second static `SessionFactoryProvider<WebSessionContext>` and corresponding GetCurrentSession method.

For testing puropses, I have 2 NUnit tests (1 for each repository), and I have a similar setup with session factory providers, this time using `SessionFactoryProvider<ThreadStaticSessionContext>`. I suspect that using ThreadStatic as the session context is part of the problem here, but I can't test both repositories. I haven't been able to get my tests working, so I haven't tried the actual web application.

Am I just writing my tests wrong? Should I be using something other than `ThreadStaticSessionContext` for my integration tests? I've been able to get each of my test methods working in issolation, but only 1 works when both session factory providers are included. Once I get my tests working, will I have a similar problem using two factory providers with the `WebSessionContext` in my web app?

Any help would be greatly appreciated!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:20:00.057

要回答您的问题 - 是的，可以在单个 HTTP 请求中使用 NHibernate 连接到多个数据库服务器。

我自己使用它，但是我显然有与您使用的不同的会话管理。我没有在 中绑定会话`BeginRequest()`，而是使用 IoC 容器并`ISessionBuilder`通过控制器的构造函数检索 a ，然后通过`sessionBuilder.GetSession()`.

也就是说，我怀疑您的问题的解决方案将类似于我已经连接的那个。`ISessionFactory`基本上，我保留了它们的字典（由数据库服务器标识符键入），而不是单个。

如果这不能让您找到可行的解决方案，您可能必须提供您的`SessionFactoryProvider`.

# php - Access Denied for user

> ID：11494476
> 
> 赞同：3
> 
> 时间：2012-07-15T18:24:34.510
> 
> 标签：php, mysql

I've made a php script to access my database...as far as I can see all login details are right but I get this error message: Access denied for user 'a5247024_thesps'@'10.1.1.36' to database 'maininf'

```
<?php
// Make a MySQL Connection
mysql_connect("mysql11.000webhost.com", "a5247024_thesps", "******") or     die(mysql_error());
mysql_select_db("maininf") or die(mysql_error());

// Retrieve all the data from the "maininf" table
$result = mysql_query("SELECT * FROM maininf")
or die(mysql_error());  

// store the record of the "maininf" table into $row
$row = mysql_fetch_array( $result );
// Print out the contents of the entry 

echo "Name: ".$row['PUA_Name'];

?> 
```

Can anybody please help? Many thanks.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T18:28:07.403

您显然可能会将表名与数据库名混淆。除非您的表和数据库都被调用*，*`maininf`否则您的调用`mysql_select_db()`可能需要一个不同的字符串作为数据库的实际名称，而不是表名。

```
// Your database name may not be the same as your table name!
// Substitute the correct value in place of maininf here
mysql_select_db("maininf") or die(mysql_error());

// Retrieve all the data from the "maininf" table
$result = mysql_query("SELECT * FROM maininf")
or die(mysql_error()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T18:27:53.217

我会先尝试使用这些凭据从 bash 访问 MySQL。

然后，尝试添加端口号：

例子：

mysql11.000webhost.com:3306

还要检查用户是否具有对数据库“maininf”的访问权限。您可以使用 MySQL 的[SHOW GRANTS](http://dev.mysql.com/doc/refman/5.6/en/show-grants.html)来查看数据库是否可供读取。

# c# - "Cannot write to the registry key" error while editing the DisableTaskMgr value

> ID：11494478
> 
> 赞同：4
> 
> 时间：2012-07-15T18:25:02.813
> 
> 标签：c#, registry, acl

I'm having difficulty changing the `DisableTaskMgr` value in the registry. Here's what I'm trying so far:

```
RegistryKey taskMgr = Registry.CurrentUser.OpenSubKey("Software").OpenSubKey("Microsoft").OpenSubKey("Windows").OpenSubKey("CurrentVersion").OpenSubKey("Policies");

string[] subKeys = taskMgr.GetSubKeyNames();
bool foundSystemKey = false;
foreach (string s in subKeys)
  if (s == "System")
  {
    foundSystemKey = true;
    break;
  }
if (!foundSystemKey)
{
  taskMgr = taskMgr.CreateSubKey("System"); 
// here is where I'm getting the exception even when I do OpenSubkey("Policies" , true)
}

taskMgr.OpenSubKey("System", true);
taskMgr.SetValue("DisableTaskMgr", 1); // 0 to enable, 1 to disable. 
```

I've also tried the following, am seeing the same error get thrown while executing the last line:

```
RegistrySecurity myRegSecurity = taskMgr.GetAccessControl();
string User = System.Environment.UserName;
myRegSecurity.ResetAccessRule(new RegistryAccessRule(User, RegistryRights.FullControl , AccessControlType.Allow));
taskMgr.SetAccessControl(myRegSecurity); // right here .. 
```

Do you have any explanation as to what's going wrong? Thanks in advance :)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T18:32:20.297

您可能有权限问题。

打开注册表，找到您的密钥（“策略”）右键单击该密钥并选择“权限”

我可以继承权限，但请尝试添加“所有人”并重新运行您的代码。如果可行，请删除“Everyone”并决定一个新的组名，将新组添加到域或本地计算机。然后将新组添加到密钥，然后将需要权限的所有用户添加到新组。

# objective-c - Check if an animation image is in an image view at a given time

> ID：11494481
> 
> 赞同：1
> 
> 时间：2012-07-15T18:25:39.330
> 
> 标签：objective-c, cocoa-touch, uiimageview

I have an image view that has two animation images, occuring in 1-second intervals. I want to run some methods when my image view is displaying one of those two images

I already tried doing:

```
if(self.imageViewThatPerformsAnimation.image == [UIImage imageNamed: @"someImage"])
    [self doSomeMethod]; 
```

but when I tried this and ran it, `[self doSomeMethod];` always ran, and not just when the image view was displaying that one image.

I'm thinking about having a timer that changes a boolean value every one second then saying

```
if (booleanValue==YES)
    [self doSomeMethod] 
```

It's just that I feel there may be a better way.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T20:01:04.753

如果你想使用 a `NSTimer`，它可能看起来像：

```
@interface MyViewController ()
{
    NSTimer *_timer;
    NSArray *_images;
    NSInteger _currentImageIndex;
}
@end

@implementation MyViewController

@synthesize imageview = _imageview;

- (void)viewDidLoad
{
    [super viewDidLoad];

    _images = [NSArray arrayWithObjects:
               [UIImage imageNamed:@"imgres-1.jpg"], 
               [UIImage imageNamed:@"imgres-2.jpg"], 
               [UIImage imageNamed:@"imgres-3.jpg"], 
               [UIImage imageNamed:@"imgres-4.jpg"], 
               nil];

    _currentImageIndex = -1;
    [self changeImage];

    // Do any additional setup after loading the view.
}

- (void)changeImage
{
    _currentImageIndex++;

    if (_currentImageIndex >= [_images count])
        _currentImageIndex = 0;

    self.imageview.image = [_images objectAtIndex:_currentImageIndex];

    if (_currentImageIndex == 0)
        [self doSomething];
}

- (void)startTimer
{
    if (_timer) {
        [_timer invalidate];
        _timer = nil;
    }

    _timer = [NSTimer timerWithTimeInterval:1.0
                                     target:self 
                                   selector:@selector(changeImage)
                                   userInfo:nil
                                    repeats:YES];

    [[NSRunLoop currentRunLoop] addTimer:_timer forMode:NSDefaultRunLoopMode];
}

- (void)stopTimer
{
    [_timer invalidate];
    _timer = nil;
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    [self startTimer];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];

    [self stopTimer];
} 
```

# python - Django 基于类的视图：如何将附加参数传递给 as_view 方法？

> ID：11494483
> 
> 赞同：110
> 
> 时间：2012-07-15T18:26:01.173
> 
> 标签：python, django, django-views, django-generic-views

我有一个基于类的自定义视图

```
# myapp/views.py
from django.views.generic import *

class MyView(DetailView):
    template_name = 'detail.html'
    model = MyModel

    def get_object(self, queryset=None):
        return queryset.get(slug=self.slug) 
```

我想像这样传递 slug 参数（或视图的其他参数）

```
MyView.as_view(slug='hello_world') 
```

我是否需要重写任何方法才能做到这一点？

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2012-07-15T18:54:02.867

如果您的 urlconf 看起来像这样：

```
url(r'^(?P<slug>[a-zA-Z0-9-]+)/$', MyView.as_view(), name = 'my_named_view') 
```

那么 slug 将在您的视图函数（例如“get_queryset”）中可用，如下所示：

```
self.kwargs['slug'] 
```

* * *

## 回答 #2

> 赞同：101
> 
> 时间：2012-07-15T19:04:13.840

传递给该`as_view`方法的每个参数都是 View 类的实例变量。这意味着添加`slug`为参数，您必须在子类中将其创建为实例变量：

```
# myapp/views.py
from django.views.generic import DetailView

class MyView(DetailView):
    template_name = 'detail.html'
    model = MyModel
    # additional parameters
    slug = None

    def get_object(self, queryset=None):
        return queryset.get(slug=self.slug) 
```

那应该可以`MyView.as_view(slug='hello_world')`工作。

如果您通过关键字传递变量，请使用 Erikkson 先生的建议：[https ://stackoverflow.com/a/11494666/9903](https://stackoverflow.com/a/11494666/9903)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-06-19T03:17:32.473

值得注意的是，您无需重写`get_object()`即可根据作为关键字 arg 传递的 slug 查找对象 - 您可以使用`SingleObjectMixin` [https://docs.djangoproject.com/en/1.5/ref/的属性基于类的视图/mixins-single-object/#singleobjectmixin](https://docs.djangoproject.com/en/1.5/ref/class-based-views/mixins-single-object/#singleobjectmixin)

```
# views.py
class MyView(DetailView):
    model = MyModel
    slug_field = 'slug_field_name'
    slug_url_kwarg = 'model_slug'
    context_object_name = 'my_model'

# urls.py
url(r'^(?P<model_slug>[\w-]+)/$', MyView.as_view(), name = 'my_named_view')

# mymodel_detail.html
{{ my_model.slug_field_name }} 
```

（两者都`slug_field`默认`slug_url_kwarg`为`'slug'`）

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-10-08T18:24:18.870

如果要将对象添加到模板的上下文中，您可以覆盖`get_context_data`并添加到其上下文中。如果您需要*request.user*，请求也是*self*的一部分。

 *```
def get_context_data(self, **kwargs):
        context = super(MyTemplateView, self).get_context_data(**kwargs)
        if 'slug' in self.kwargs:
            context['object'] = get_object_or_404(MyObject, slug=self.kwargs['slug'])
            context['objects'] = get_objects_by_user(self.request.user)

        return context 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2015-03-26T21:12:51.887

您可以从 urls.py [https://docs.djangoproject.com/en/1.7/topics/http/urls/#passing-extra-options-to-view-functions传递参数](https://docs.djangoproject.com/en/1.7/topics/http/urls/#passing-extra-options-to-view-functions)

这也适用于通用视图。例子：

```
url(r'^$', views.SectionView.as_view(), { 'pk': 'homepage', 'another_param':'?'}, name='main_page'), 
```

在这种情况下，传递给视图的参数不一定是视图类的实例变量。使用此方法，您无需将默认页面名称硬编码到 YourView 模型中，但您可以将其作为参数从 urlconf 传递。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2015-05-12T19:53:23.690

正如[Yaroslav Nikitenko 所说](https://stackoverflow.com/a/29288952/1218980)，如果您不想将新的实例变量硬编码到 View 类，您可以[传递额外的选项来查看函数](https://docs.djangoproject.com/en/dev/topics/http/urls/#passing-extra-options-to-view-functions)，`urls.py`如下所示：

```
url(r'^$', YourView.as_view(), {'slug': 'hello_world'}, name='page_name') 
```

我只是想从视图中添加如何使用它。您可以实现以下方法之一：

```
# If slug is optional
def the_function(self, request, slug=None):
    # use slug here

# if slug is an optional param among others
def the_function(self, request, **kwargs):
    slug = kwargs.get("slug", None)
    other_param = kwargs.get("other_param", None)

# If slug is required
def the_function(self, request, slug):
    # use slug here 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-05-27T15:46:34.300

对于 django 3.0，这对我有用：

```
# myapp/views.py
from django.views.generic import DetailView

class MyView(DetailView):
    template_name = 'detail.html'
    slug = None

    def get_object(self, queryset=None):
        self.slug = self.kwargs.get('slug', None)
        return queryset.get(slug=self.slug)

# myapp/urls.py
from django.urls import path
from . import views

urlpatterns = [
    path('slug/<slug:slug>/', views.MyView.as_view(), name='myview_by_tag'),
] 
```*

# iphone - 游戏停止后数据的变化

> ID：11494495
> 
> 赞同：0
> 
> 时间：2012-07-15T18:27:52.907
> 
> 标签：iphone, ios, coronasdk

我开始在 Corona SDK 中开发一个类似于 tamagotchi（虚拟宠物之类的东西）的应用程序。我完全被卡住了，对如何获得一个部分一无所知。

游戏角色（比如“宠物”）如何改变其状态，例如在游戏不活动时变得饥饿或死亡？或者也许可以在玩家下次进入游戏时进行更改，也许将其绑定到全局时间（仍然不知道该怎么做）？

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T18:36:08.777

我能想到的最简单的方法是将所有相关数据保存在一个文件中。第一个数据将是游戏最后一次变为非活动状态的时间戳。

每次首次激活游戏时，它都会读取文件以及时间戳。在经过特定时间长度后，宠物会变得饥饿、疲倦等。如果经过非常长的时间，宠物就会死亡。

您可以通过在每个数据旁边放置一个时间戳来更进一步，例如“最后一次喂食”、“最后一次浇水”等，然后您可以通过保持全局“最后一次活动”使各个属性在不同时间过期，包括因无聊而死亡时间，如果很长时间没有运行游戏，宠物就会死亡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T20:47:25.543

我实际上创建了一个这样的应用程序。我在一个枚举中创建了许多状态，然后在一个 checkMoodState 方法中，我硬编码了决定情绪状态的值。

例如

*   时间自上次播放

*   timeSinceLastFeed

管他呢。

将日期写入要跟踪的每个变量的 plist 并在每次检查中或将它们存储在 NSUserDefaults 中（一个函数将它们全部写入，一个函数将它们全部加载），从中减去当前时间。你会得到一个负数，你可以得到它的绝对值。

您决定何时要检查最后一次，因为无论您检查的是什么，例如喂食。创建一个 NSTimer，其中包含检查之间的持续时间，并在计时器调用的方法中，您可以根据需要检查和更新情绪。

# actionscript-3 - 导出到excel datagrid adobe flex3

> ID：11494499
> 
> 赞同：0
> 
> 时间：2012-07-15T18:28:16.887
> 
> 标签：actionscript-3, apache-flex, flex3

我在这里找到了以下代码，只是我在我的 Adob​​e Flex 项目中保持不变，但是在单击导出到 Excel 按钮后，除了我的数据网格正在填充我打算给出的列名之外，我看不到任何 Excel 打开到我的 Excel。

```
 public function roExport_export_Result(e:ResultEvent):void
    {
        if(e.result.length != 0)
        {
            btnExportToExcel.enabled = true;

            var arrExportResult:Array = e.result as Array;

            xlsFile = new ExcelFile();
            var sheet:Sheet = new Sheet();

            sheet.resize(arrExportResult.length+1,14);

            sheet.setCell(0,0,'Id');
            sheet.setCell(0,1,'Full Name');
            sheet.setCell(0,2,'Gender');
            sheet.setCell(0,3,'Birth Date');
            sheet.setCell(0,4,'College Name');
            sheet.setCell(0,5,'Qualification');
            sheet.setCell(0,6,'Email Id');
            sheet.setCell(0,7,'Mobile');
            sheet.setCell(0,8,'Position Applied For');
            sheet.setCell(0,9,'Technology Interested');
            sheet.setCell(0,10,'User Name');
            sheet.setCell(0,11,'Password');
            sheet.setCell(0,12,'Exam Date');
            sheet.setCell(0,13,'Percentage');
            sheet.setCell(0,14,'IsActive');

            for(var i:int=0;i<arrExportResult.length;i++)
            {
                sheet.setCell(i+1, 0, arrExportResult[i].Id);
                sheet.setCell(i+1, 1, arrExportResult[i].FullName);
                if(arrExportResult[i].Gender == 1)
                {
                    arrExportResult[i].Gender = "Male"
                }
                else
                {
                    arrExportResult[i].Gender = "Female";
                }
                sheet.setCell(i+1, 2, arrExportResult[i].Gender);
                var date:String = arrExportResult[i].BirthDate.date.toString();
                var month:String = (arrExportResult[i].BirthDate.month + 1).toString();
                var year:String = arrExportResult[i].BirthDate.fullYear.toString();
                var bDate:String = date + "/" + month + "/" + year;
                arrExportResult[i].BirthDate = bDate;
                sheet.setCell(i+1, 3, arrExportResult[i].BirthDate);
                sheet.setCell(i+1, 4, arrExportResult[i].CollegeId);
                sheet.setCell(i+1, 5, arrExportResult[i].QualificationId);
                sheet.setCell(i+1, 6, arrExportResult[i].EmailId);
                sheet.setCell(i+1, 7, arrExportResult[i].Mobile);
                sheet.setCell(i+1, 8, arrExportResult[i].PositionName);
                sheet.setCell(i+1, 9, arrExportResult[i].TechForTraining);
                sheet.setCell(i+1, 10, arrExportResult[i].UserName);
                sheet.setCell(i+1, 11, arrExportResult[i].Password);
                var date:String = arrExportResult[i].CreatedDate.date.toString();
                var month:String = (arrExportResult[i].CreatedDate.month + 1).toString();
                var year:String = arrExportResult[i].CreatedDate.fullYear.toString();
                var hour:String = arrExportResult[i].CreatedDate.hours.toString();
                var min:String = arrExportResult[i].CreatedDate.minutes.toString();
                var sec:String = arrExportResult[i].CreatedDate.seconds.toString();
                var cDate:String = date + "/" + month + "/" + year + " " + hour + ":" + min + ":" + sec;
                arrExportResult[i].CreatedDate = cDate;
                sheet.setCell(i+1, 12, arrExportResult[i].CreatedDate);
                sheet.setCell(i+1, 13, arrExportResult[i].Percentage);
                sheet.setCell(i+1, 14, arrExportResult[i].IsActive);
            }

            dataGridResult.dataProvider = arrExportResult;

            xlsFile.sheets.addItem(sheet);      
            bytes = xlsFile.saveToByteArray();                  
        }
        else
        {
            arrExportResult = new Array();
            dataGridResult.dataProvider = arrExportResult;
            btnExportToExcel.enabled = false;
            xlsFile = new ExcelFile();
            var sheet:Sheet = new Sheet();
            Alert.show("No Records Found",parentApplication.alertTitle);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T01:42:55.637

After you get the byte Array you have to use a FileReference.save(bytes); call to pop up the window that prompts the user for where to save the data... as Flextras/Jeffry says the data grid is probably changing due to the dataGridResult.dataProvider line. If you're doing this as an AIR based desktop app you can use the File and FileStream class to write out the bytes directly without prompting the user.

So long as you have FP 10+ targetted

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html#save](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html#save)()

For AIR:

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/com/adobe/livecycle/content/File.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/com/adobe/livecycle/content/File.html)

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/FileStream.html#writeBytes](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/FileStream.html#writeBytes)()

# git - Heroku git push heroku master 失败

> ID：11494502
> 
> 赞同：0
> 
> 时间：2012-07-15T18:28:27.613
> 
> 标签：git, heroku, ssh, push

所以，我正在尝试运行`git push heroku master`命令，但我不断得到

`/etc/ssh/ssh_config: line 51: Bad configuration option: AllowUsers` `/etc/ssh/ssh_config: terminating, 1 bad configuration options` `fatal: The remote end hung up unexpectedly`

我做了一些研究并将我的用户名添加到 ssh_config 中的 AllowUsers 字段，`pip`在我的 virtualenv 和我的根目录上安装了 ssh 和 sshd，但没有任何效果。我尝试从 virtualenv（我的意思是 virtualenv 已激活）和 root（作为 root 和作为简单用户）推送，但仍然是同样的错误。

我还能做些什么来解决这个问题？我还读到我应该尝试在 heroku 上登录，然后尝试推送。登录成功，但推送不成功。我不知道还能尝试什么。此外，我在更改 allowedUsers 后重新启动了 ssh。

提前感谢您的任何回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-11-26T18:01:30.200

```
/etc/ssh/ssh_config: line 51: Bad configuration option: AllowUsers 
```

`ssh_config`是错误的文件。“AllowUsers”指令应该`sshd_config`放在这些用户将连接到的服务器上的（注意“d”）文件中。

`/etc/ssh/ssh_config`是系统范围的 OpenSSH*客户端*配置文件的典型名称。`ssh`当与另一台服务器建立 ssh 连接时，程序会读取它。[此处](https://man.openbsd.org/ssh_config)记录了可以进入此文件的选项，“AllowUsers”不是其中之一。

“AllowUsers”是一个 OpenSSH*服务器*配置选项。它应该放在主机上的*服务器*配置文件中，该文件将接收来自这些用户的传入连接。服务器程序被命名[`sshd`](https://man.openbsd.org/sshd)，其配置文件通常为[`/etc/ssh/sshd_config`](https://man.openbsd.org/sshd_config).

# xcode - NSMenuItem setHidden 不起作用？

> ID：11494509
> 
> 赞同：1
> 
> 时间：2012-07-15T18:29:40.220
> 
> 标签：xcode, cocoa, hide, nsmenuitem, nsmenu

我尝试隐藏 a`NSMenuItem`但该方法不起作用。我`NSMenuItem`的不是 nil ( `-setTitle`，`-setEnabled`按预期工作)。IB 中的插座连接正确并`-setAutoEnableItem`设置为 NO。

但`[item setHidden:YES];`不会改变任何东西。您知道如何隐藏 NSMenuItem 吗？

再次删除和添加该项目对我来说是没有选择的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T20:12:37.307

`NSMenuItem`隐藏问题是由于替代项目。如果项目有替代项目或项目，它不能被隐藏。但是你可以像这样解决它：

例如，您想使用备用项目*itemAlt2*和*itemCtrl2隐藏**item2*。所以让*itemAlt2*和*itemCtrl2*不交替并像这样隐藏：

 ***```
[itemAlt2 setAlternate: NO];
[itemAlt2 setHidden: YES];
[itemCtrl2 setAlternate: NO];
[itemCtrl2 setHidden: YES];
[item2 setHidden: YES]; 
```

当您需要可见*item2*时，只需让它们交替且可见，如下所示：

```
[itemAlt2 setAlternate: YES];
[itemAlt2 setHidden: NO];
[itemCtrl2 setAlternate: YES];
[itemCtrl2 setHidden: NO];
[item2 setHidden: NO]; 
```***

# r - 扩展由“from”和“to”列定义的范围

> ID：11494511
> 
> 赞同：22
> 
> 时间：2012-07-15T18:30:15.630
> 
> 标签：r, dataframe

我有一个包含`"name"`美国总统的数据框，他们开始和结束就职的年份，（`"from"`和`"to"`列）。这是一个示例：

```
name           from  to
Bill Clinton   1993 2001
George W. Bush 2001 2009
Barack Obama   2009 2012 
```

...以及来自的输出`dput`：

```
dput(tail(presidents, 3))
structure(list(name = c("Bill Clinton", "George W. Bush", "Barack Obama"
), from = c(1993, 2001, 2009), to = c(2001, 2009, 2012)), .Names = c("name", 
"from", "to"), row.names = 42:44, class = "data.frame") 
```

我想创建具有两列（`"name"`和`"year"`）的数据框，其中一行代表总统在任的每一年。因此，我需要创建一个每年从 " `from`", 到的常规序列`"to"`。这是我的预期：

```
name           year
Bill Clinton   1993
Bill Clinton   1994
...
Bill Clinton   2000
Bill Clinton   2001
George W. Bush 2001
George W. Bush 2002
... 
George W. Bush 2008
George W. Bush 2009
Barack Obama   2009
Barack Obama   2010
Barack Obama   2011
Barack Obama   2012 
```

我知道我可以用它`data.frame(name = "Bill Clinton", year = seq(1993, 2001))`来为单个总统扩展内容，但我不知道如何为每个总统进行迭代。

我该怎么做呢？我觉得我应该知道这一点，但我在画一个空白。

## 更新 1

好的，我已经尝试了这两种解决方案，但我收到了一个错误：

```
foo<-structure(list(name = c("Grover Cleveland", "Benjamin Harrison", "Grover Cleveland"), from = c(1885, 1889, 1893), to = c(1889, 1893, 1897)), .Names = c("name", "from", "to"), row.names = 22:24, class = "data.frame")
ddply(foo, "name", summarise, year = seq(from, to))
Error in seq.default(from, to) : 'from' must be of length 1 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-15T20:00:12.227

这是一个`data.table`解决方案。它有一个很好的（如果是次要的）功能，可以让总统按照他们提供的顺序排列：

```
library(data.table)
dt <- data.table(presidents)
dt[, list(year = seq(from, to)), by = name]
#               name year
#  1:   Bill Clinton 1993
#  2:   Bill Clinton 1994
#  ...
#  ...
# 21:   Barack Obama 2011
# 22:   Barack Obama 2012 
```

**编辑：**要处理具有非连续任期的总统，请改用：

```
dt[, list(year = seq(from, to)), by = c("name", "from")] 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-15T18:36:44.493

您可以使用该`plyr`软件包：

```
library(plyr)
ddply(presidents, "name", summarise, year = seq(from, to))
#              name year
# 1    Barack Obama 2009
# 2    Barack Obama 2010
# 3    Barack Obama 2011
# 4    Barack Obama 2012
# 5    Bill Clinton 1993
# 6    Bill Clinton 1994
# [...] 
```

如果按年份对数据进行排序很重要，则可以使用以下`arrange`功能：

```
df <- ddply(presidents, "name", summarise, year = seq(from, to))
arrange(df, df$year)
#              name year
# 1    Bill Clinton 1993
# 2    Bill Clinton 1994
# 3    Bill Clinton 1995
# [...]
# 21   Barack Obama 2011
# 22   Barack Obama 2012 
```

编辑 1：遵循@edgester 的“更新 1”，更合适的方法是使用`adply`非连续条款来解释总统：

```
adply(foo, 1, summarise, year = seq(from, to))[c("name", "year")] 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-05-04T12:41:25.417

使用和的另一种`tidyverse`方法。 `unnest``map2`

```
library(tidyverse)

presidents %>%
  unnest(year = map2(from, to, seq)) %>%
  select(-from, -to)

#              name  year
# 1    Bill Clinton  1993
# 2    Bill Clinton  1994
...
# 21   Barack Obama  2011
# 22   Barack Obama  2012 
```

编辑：`tidyr v1.0.0`不能再从新变量创建为`unnest()`.

```
presidents %>%
  mutate(year = map2(from, to, seq)) %>%
  unnest(year) %>%
  select(-from, -to) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-06-30T13:22:11.967

这是一个`dplyr`解决方案：

```
library(dplyr)

# the data
presidents <- 
structure(list(name = c("Bill Clinton", "George W. Bush", "Barack Obama"
), from = c(1993, 2001, 2009), to = c(2001, 2009, 2012)), .Names = c("name", 
"from", "to"), row.names = 42:44, class = "data.frame")

# the expansion of the table
presidents %>%
    rowwise() %>%
    do(data.frame(name = .$name, year = seq(.$from, .$to, by = 1)))

# the output
Source: local data frame [22 x 2]
Groups: <by row>

             name  year
            (chr) (dbl)
1    Bill Clinton  1993
2    Bill Clinton  1994
3    Bill Clinton  1995
4    Bill Clinton  1996
5    Bill Clinton  1997
6    Bill Clinton  1998
7    Bill Clinton  1999
8    Bill Clinton  2000
9    Bill Clinton  2001
10 George W. Bush  2001
..            ...   ... 
```

h/t：[https ://stackoverflow.com/a/24804470/1036500](https://stackoverflow.com/a/24804470/1036500)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-10-15T17:32:19.283

另一种`base`解决方案：

```
l <- mapply(`:`, d$from, d$to)
data.frame(name = d$name[rep(1:nrow(d), lengths(l))], year = unlist(l))
#              name year
# 1    Bill Clinton 1993
# 2    Bill Clinton 1994
# ...snip
# 8    Bill Clinton 2000
# 9    Bill Clinton 2001
# 10 George W. Bush 2001
# 11 George W. Bush 2002
# ...snip
# 17 George W. Bush 2008
# 18 George W. Bush 2009
# 19   Barack Obama 2009
# 20   Barack Obama 2010
# 21   Barack Obama 2011
# 22   Barack Obama 2012 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-16T04:09:05.923

这是一个快速的基本`R`解决方案，`Df`您的`data.frame`：

```
do.call(rbind, apply(Df, 1, function(x) {
  data.frame(name=x[1], year=seq(x[2], x[3]))})) 
```

它给出了一些关于行名的警告，但似乎返回了正确的`data.frame`.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-05-04T12:13:25.070

使用的另一个选项`tidyverse`可能是将`gather`数据转换为长格式，并在和日期`group_by` `name`之间创建一个序列。`from``to`

```
library(tidyverse)

presidents %>%
  gather(key, date, -name) %>%
  group_by(name) %>%
  complete(date = seq(date[1], date[2]))%>%
  select(-key) 

# A tibble: 22 x 2
# Groups:   name [3]
#   name          date
#   <chr>        <dbl>
# 1 Barack Obama  2009
# 2 Barack Obama  2010
# 3 Barack Obama  2011
# 4 Barack Obama  2012
# 5 Bill Clinton  1993
# 6 Bill Clinton  1994
# 7 Bill Clinton  1995
# 8 Bill Clinton  1996
# 9 Bill Clinton  1997
#10 Bill Clinton  1998
# … with 12 more rows 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-05-25T13:35:30.200

用于`by`创建一个data.frames`by`列表`L`，每个总统一个 data.frame，然后将`rbind`它们放在一起。不使用任何包。

```
L <- by(presidents, presidents$name, with, data.frame(name, year = from:to))
do.call("rbind", setNames(L, NULL)) 
```

如果您不介意行名，那么最后一行可以简化为：

```
do.call("rbind", L) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-01-28T22:43:48.440

`dplyr`使用and 的另一种解决方案`tidyr`：

```
library(magrittr) # for pipes
df <- data.frame(tata = c('toto1', 'toto2'), from = c(2000, 2004), to = c(2001, 2009))

#    tata from   to
# 1 toto1 2000 2001
# 2 toto2 2004 2009

df %>% 
  dplyr::as.tbl() %>%
  dplyr::rowwise() %>%
  dplyr::mutate(combined = list(seq(from, to))) %>%
  dplyr::select(-from, -to) %>%
  tidyr::unnest(combined)

#   tata  combined
#   <fct>    <int>
# 1 toto1     2000
# 2 toto1     2001
# 3 toto2     2004
# 4 toto2     2005
# 5 toto2     2006
# 6 toto2     2007
# 7 toto2     2008
# 8 toto2     2009 
```

# html - DIV 内 BUTTON 上方的无法解释的空间

> ID：11494512
> 
> 赞同：8
> 
> 时间：2012-07-15T18:30:22.060
> 
> 标签：html, css, rendering, html-rendering

前言：我读过很多关于 div 内的图像的文章，它们周围有一个奇怪的空间，等等。

示例 #1：[不需要的 div 底部填充](https://stackoverflow.com/questions/1518576/unwanted-padding-bottom-of-a-div)
示例 #2：[https](https://developer.mozilla.org/en/Images,_Tables,_and_Mysterious_Gaps)
://developer.mozilla.org/en/Images,_Tables,_and_Mysterious_Gaps 示例 #3：[无法消除包含 div 的 2 个水平 div 之间的空间](https://stackoverflow.com/questions/8283032/cannot-eliminate-space-between-2-horizontal-divs-inside-containing-div)

他们的问题似乎与我的相似但不完全相同。在这个示例文档中，边框、内边距、轮廓等都设置为零......但 Opera 和 Firefox 都在 div 的顶部呈现了一个备用像素。第三个可能会绕着这个空间作弊，但似乎没有人回答为什么它在那里..

编辑：我读过很多文章都非常接近回答这个问题，但它们似乎都与实际问题略有不同。

我错过了什么？这是我的第一个问题，请耐心等待:)

```
<!doctype html>
<html>
  <head>
    <title>Anger</title>
    <style>
      *{
        cursor: default;
        margin: 0;
        outline: 0;
        border: none;
        padding: 0;
        text-decoration: none;
      }
      body{
        background-color: #87cefa;
      }
      div{
        background-color: #ffffff;
      }
      button{
        border-radius: 9px;
        padding: 1px 6px 2px 6px;
        font: 14px monospace;
        color: #ffffff;
        background-color: #1e90ff;
      }
    </style>
  <head>
  <body>
    <div>
      <button>Sample Button</button>
    </div>
  </body>
<html> 
```

是否有一些 CSS3 可以使它全部工作？这是一个实验项目，所以欢迎最新的 CSS3。

**PS：**我只关心 Opera 渲染，虽然 Firefox 会很高兴支持相同的标准兼容代码.. 谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T18:39:57.590

将 div 上的 line-height 更改为零。

```
 div{
      background-color: #ffffff;
      line-height:0;
  } 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/CB8MT/)**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T18:42:44.733

将垂直对齐设置为按钮的顶部。那将解决它。

# java - 如何在字符串末尾添加用户输入数字以选择特定对象

> ID：11494513
> 
> 赞同：1
> 
> 时间：2012-07-15T18:30:51.490
> 
> 标签：java

我正在为一些 Java 代码而苦苦挣扎。

目前我有8个房间

```
 room1 = new Room(1,1);
    room2 = new Room(2,1);
    room3 = new Room(3,1);
    room4 = new Room(4,1);
    room5 = new Room(5,2);
    room6 = new Room(6,2);
    room7 = new Room(7,3);
    room8 = new Room(8,3); 
```

现在我需要让用户输入关于他们需要的房间的数字 1 到 8，然后系统需要将该数字添加到前缀房间，以便我可以调用所需房间的方法。

我目前有这个代码来接收选择

```
roomselect = scan.nextInt(); 
```

然后这就是我卡住的地方，因为我不确定如何将 roomselect 整数添加到前缀“房间”上

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T18:33:46.827

只需使用数组：

```
// Create an array of Rooms
Room rooms[] = new Room[8];
// Now, you have a placeholder for 8 rooms
// Know that it are simply placeholders, the rooms are not initialized.
// Each element of the array is initialized to null

// Assigning
rooms[2] = new Room(3, 2); // Initialize the room at index 2 (which is the 3th 
                           // in spoken language)

// Retrieving
int index = 4; // Indices start at 0
Room room4 = rooms[index];

// Or...
rooms[5].doSomething();

// Getting the length
int numberOfRooms = rooms.length; 
```

因此，要解决您的问题：

```
int roomselect = scan.nextInt();
Room selectedRoom = rooms[roomselect]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T18:33:55.797

如果您将代码更改为：

```
List<Room> rooms = new ArrayList<Room>();    
rooms.add(new Room(1,1));
rooms.add(new Room(2,1));
... 
```

你可以得到你指定的房间

```
rooms.get(roomselect); 
```

请注意，索引将从 0 开始，而不是从 1 开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T18:34:16.077

将您的房间存储在一个数组中，而不是作为单独的变量，然后通过数组索引访问每个房间：

```
Room[] rooms = new Room[8];

rooms[roomNumber].doSomething(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T18:43:03.483

**Java 集合**就是答案...

```
ArrayList<Room> room = new ArrayList<Room>();

Scanner scan = new Scanner(System.in);

for (int i=1 ; i<9 ; i++){

     int r = scan.nextLine();

     if (r<5){

       room.add(new Room(r,1));
   }

    else if ((r>4) && (r<7)){

      room.add(new Room(r,2));
   }

    else if (r>6){

       room.add(new Room(r,3));

   }

} 
```

# pdf - 将 xml ocr/文本信息从一个 pdf 导入/嵌入到另一个 pdf

> ID：11494520
> 
> 赞同：1
> 
> 时间：2012-07-15T18:31:52.430
> 
> 标签：pdf, pdf-generation

我正在尝试优化图像扫描 pdf 的质量/文件大小，同时保持 ocr 质量。

我可以尝试在高质量 pdf 文档的 ocr 之后进行下采样，但与使用 Photoshop 和导出较低 dpi/优化页面并使用这些页面创建相比，我使用的工具（主要是 acrobat）不会创建较小的文件大小.pdf

如果可能的话，一个更好的解决方案是获取一个已经过 ocred 的 image-pdf 文档（当前情况下为 800M）并将 ocr 层应用于较低 rez 的下采样文档。

我可以使用 pdfminer 成功提取坐标为 xml 的 OCR 信息，但我想将其应用到已使用 photoshop 下采样的相同文件中。我以为我读到了 pdftk 可以做到这一点，但我再也找不到这些信息了。

任何建议将不胜感激。

杰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:43:06.730

您能描述一下您目前创建 PDF 的方式吗？

使用 IText 可以[设置添加图像的压缩级别](http://api.itextpdf.com/itext/com/itextpdf/text/Image.html#setCompressionLevel%28int%29)。

可能有用

# macos - 在 Mac 上安装“make”

> ID：11494522
> 
> 赞同：28
> 
> 时间：2012-07-15T18:32:16.130
> 
> 标签：macos, makefile, memcached, installation

我正在尝试使用本教程在 Mac 上安装 Memcached：http: [//tugdualgrall.blogspot.de/2011/11/installing-memcached-on-mac-os-x-and.html](http://tugdualgrall.blogspot.de/2011/11/installing-memcached-on-mac-os-x-and.html) 但是当我尝试 ./configure 时说：配置：错误：当我尝试 make 时在 $PATH 中找不到可接受的 C 编译器说：make sh: make: command not found sh-3.2# yum install make sh: yum: command not found sh-3.2# apt-get安装make sh：apt-get：找不到命令

我必须提到我有 Xcode，但它仍然无法正常工作。我真的是 Mac 的新手，所以请考虑到这一点 :) 非常感谢您的帮助 谢谢！

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-07-15T19:20:36.633

如果您有 Xcode 4.3 或更高版本，则默认情况下不会安装命令行工具，例如 make。在 Xcode 首选项中，转到“下载”选项卡，然后在“组件”下按“命令行工具”旁边的“安装”按钮。成功下载并安装命令行工具后，您还应该在终端中键入以下命令，以确保您的所有 Xcode 命令行工具都切换为使用 4.3 版本：

```
sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer 
```

成功安装所有内容后，您应该会`make`在 /usr/bin 中看到其他命令行开发工具。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T12:50:06.393

从*torrey.lyons*的回答中，在**Xcode --> Preferences --> Downloads**它在**Command Line Tools**下说：

> 在安装之前，**请注意，您可以在终端中使用 XCRUN 工具来启动编译器和嵌入在 Xcode 应用程序中的其他工具。**使用 XCODE-SELECT 工具定义激活的 Xcode 版本。在终端中键入“man xcrun”以了解更多信息。

因此，我能够使用命令运行 make 工具`xcrun make`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-16T00:18:28.180

Mac OS 11 (Big Sur) 中的情况发生了变化。现在有一个命令行工具包。在 Apple 的开发者网络上搜索“Xcode 12.5.1 的命令行工具”（或更新版本）。

# c++ - 避免 dynamic_cast 向下转换为原始类型

> ID：11494524
> 
> 赞同：5
> 
> 时间：2012-07-15T18:32:21.770
> 
> 标签：c++, dynamic-cast

我怎样才能安全地向下转换（即在失败时返回 null）到底层对象的确切类型，而不会导致性能损失`dynamic_cast`，并且不必在我使用的每个类中放置支持代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T18:32:21.770

`dynamic_cast`会遍历整个继承树，看看你想要的转换是否可行。如果您想要的只是直接向下转换为与对象*相同*的类型，并且您不需要交叉转换、跨越虚拟继承或转换为对象实际类型的基类的能力，请使用以下代码将工作：

```
template<class To>
struct exact_cast
{
    To result;

    template<class From>
    exact_cast(From* from)
    {
        if (typeid(typename std::remove_pointer<To>::type) == typeid(*from))
            result = static_cast<To>(from);
        else
            result = 0;
    }

    operator To() const
    {
        return result;
    }
}; 
```

语义与其他强制转换运算符完全相同，即

```
Base* b = new Derived();
Derived* d = exact_cast<Derived*>(b); 
```

**编辑：**我已经在我正在从事的项目中对此进行了测试。我的结果`QueryPerformanceCounter`是：
`dynamic_cast`: 83,024,197
`exact_cast`:78,366,879
加速了 5.6%。这适用于非平凡的 CPU 绑定代码。（它没有 I/O）

# python - 用 Python 编写第一个解释器 - OCaml 语言的选择

> ID：11494533
> 
> 赞同：2
> 
> 时间：2012-07-15T18:33:44.360
> 
> 标签：python, parsing, compiler-construction, ocaml, interpreter

我正在阅读 P. Norvig 用 Python 编写的 Scheme 解释器的代码，我想尝试用 Python 编写一个解释器。这恰好是帖子的主题：[初级程序员可以为它实现解释器的语言是什么？](https://stackoverflow.com/questions/1446065/what-language-can-a-junior-programmer-implement-an-interpreter-for-it). 但是，我长期以来对学习 OCaml 非常感兴趣，如果我下定决心学习 OCaml，那可能是一个合适的时机。

我应该付出很多努力来实现 OCaml 语言的 Python 解释器吗？这只是一个个人项目，我的目标（除了学习 OCaml）主要是练习我在编译器和解释器上阅读的内容。

如果 OCaml 不适合，您个人有什么建议？

您能否暗示 OCaml 的良好参考（甚至：编写 OCaml 解析器/解释器）。

＃＃ 编辑

Lua / Ruby / BASIC 怎么样？（因为我也想学这些）

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T18:41:56.540

您似乎在说您想在 Python 中创建一个 OCaml 解释器（不是 OCaml 中的 Python 解释器，对吗？）。在我看来，OCaml 本身是一种太大的语言，无法为教育项目选择。我会选择一种小得多的语言。这就是为什么 Scheme 是一个不错的选择——核心语言非常小。

使用 OCaml，您还可以进行类型推断，这非常值得学习，但又是一个相当大的话题。

对于一些小的和有点 ML-ish 的东西，你可以从无类型的 lambda 演算开始。这是一个非常常见的测试用例。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-15T23:55:47.113

如果你想很好地介绍 OCaml 的语义基础（一点理论），你应该看看Didier Rémy的《[使用、理解和解开 OCaml 语言》一书。](http://pauillac.inria.fr/~remy/cours/appsem/)

编写一个完整的 OCaml 语言的实现将是相当多的工作，但是编写一个合理的子集的实现是可行的，例如，作为一个学期项目。

鉴于 ML 语言非常擅长符号操作（解释器、编译器、分析器、证明检查器......），在 OCaml 中编写 Python 实现可能比在 Python 中编写 OCaml 实现更有趣——这可能解释了一些混乱你的问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-15T19:14:37.820

你可以从麻省理工学院 Gerald Sussman 的 SICP 开始阅读，在第 4 章中，你将构建一些用于不同目的的解释器。在第 5 章中，您将构建编译器。

另外，尝试阅读 GNU/Emacs 的源代码，它有一个很好的 elisp 解释器。

此外，您可以订阅 coursera.org 的编译器课程，在那里构建一个相当复杂的解释器。

我建议你写一个scheme/lisp的解释器，因为你不必处理解析，而python的工作方式与这些完全一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-10T20:50:13.157

[如何编写解释器（在 Python 中）](http://www.youtube.com/watch?v=1h1mM7VwNGo)

这是我不久前在当地 Python 聚会上发表类似演讲后制作的视频。在视频中，我在一小时内用 Python 实现了一种小型函数式语言。这可能是一个很好的起点。

# android - 为什么 traceview 给出的测量值不一致？

> ID：11494536
> 
> 赞同：1
> 
> 时间：2012-07-15T18:34:03.610
> 
> 标签：android, profiling, android-traceview

我正在尝试加快我的应用程序启动时间（由于 Guice 绑定速度慢，目前约为 5 秒），当我运行 traceview 时，我看到执行相同的测量结果的变化很大（高达 30%）代码。

我会假设这是来自垃圾收集的差异，但`startGC`根据 traceview 花费的时间完全是微不足道的。

这尤其令人恼火，因为当测量值如此多变时，很难确定我的优化会产生什么影响。

为什么会这样？有什么方法可以使测量结果更加一致？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T19:06:45.640

我想您是从代码开始分析而不是手动打开它？但是无论如何，即使您使用`Debug.startMethodTracing`并且`Debug.stopMethodTracing`从代码的特定点开始，您也会收到不同的测量结果。

您可以[在此处](http://developer.android.com/guide/practices/performance.html)看到 Traceview 禁用了 JIT，我相信还有其他一些优化，因此在分析期间您的代码执行速度比没有它时要慢。此外，您的代码性能取决于整体系统负载。如果其他一些应用程序在后台执行任何繁重的操作，您的代码将执行更长时间。所以你肯定会得到稍微不同的结果，所以启动时间不能是一个常数。

通常，与其他方法相比，您的方法执行多长时间并不重要，而是消耗多少 CPU 时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:27:39.530

如果您在启动时进行任何与网络相关的活动，那么此工具可以帮助您了解正在发生的事情以及您如何能够优化连接和缓存。[http://developer.att.com/developer/legalAgreementPage.jsp?passedItemId=9700312](http://developer.att.com/developer/legalAgreementPage.jsp?passedItemId=9700312)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T20:03:08.193

听起来测量不是您的最终目标。你的最终目标是让它更快。

做到这一点的方法是找出哪些活动占用了大部分时间，这样你就可以找到更好的方法来完成它们。我说的是“发现”，而不是“测量”，我说的是“活动”，而不是“惯例”。

为此，只需对程序的状态进行采样。许多分析器收集了大量程序状态的样本，但它们都落入相同的逻辑——他们总结的理论是，你想要的只是测量，而你并不真正关心什么。

实际上，如果您可以详细检查一些示例而不是获取摘要，它会告诉您更多有关程序如何花费时间的信息。

更重要的是，如果在少至两 (2) 个样本上，您可以看到程序追求某个目标，并且您可以显着改进它，您会看到显着的加速。这个过程可以重复多次，这样才能*真正*优化它。

这个过程在这里有更详细的解释，[*这里*](https://stackoverflow.com/a/927773/23771)[*有*](https://stackoverflow.com/a/378024/23771)一个用例。[](https://stackoverflow.com/a/927773/23771)

# ios - 我们可以从印度注册 iOS 开发者计划吗

> ID：11494537
> 
> 赞同：3
> 
> 时间：2012-07-15T18:34:12.113
> 
> 标签：ios

我们可以从印度注册 iOS 开发者计划并销售应用程序吗？在 Android 版 Google Play 中，我无法销售来自印度的应用程序。那么iOS可以吗？我可以用 VISA 借记卡支付 99 美元/年吗？抱歉，我到处搜索，但找不到答案，即使这不是 100% 的编程问题，但如果可以，请务必回答。

提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T18:50:42.077

可以，但不支持印度的在线注册，您需要将表格传真至 Apple。去年四月我也做了同样的事情。是的，它是 99 美元。你需要信用卡。

你可以在这里获得 iOS 开发者证书。[点击这里](https://developer.apple.com/programs/ios/)

在此链接中，单击立即注册按钮并继续，直到您从苹果获得传真表格并按照他们的指南发送传真给苹果。（他们建议全部）

**更新：**现在一天苹果也支持印度在线购买......现在不需要传真......它现在都处于在线模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T18:49:21.360

根据[这篇文章](http://articles.timesofindia.indiatimes.com/2012-03-06/computing/31126609_1_app-stores-google-s-android-market-app-developer)，您可以加入 iOS 开发者计划，并可以在 App Store 上销售您的应用程序。如果这些信息对您来说还不够，您可以[联系 Apple](https://developer.apple.com/contact/)并询问他们。祝你好运！

# java - 持有多个锁的线程进入 wait() 状态。它会释放所有持有的锁吗？

> ID：11494542
> 
> 赞同：6
> 
> 时间：2012-07-15T18:34:49.043
> 
> 标签：java, multithreading

我编写了这个程序来检查线程 t1 是否持有两个不同对象的锁：Lock.class 和 MyThread.class 使用 MyThread.class.wait() 在 MyThread.class 实例上进入等待模式。它不会释放 Lock 上的锁。类实例。为什么这样 ？我一直在想，一旦一个线程进入等待模式或者它死了，它就会释放所有获得的锁。

```
public class Lock {

protected static volatile boolean STOP = true;
public static void main(String[] args) throws InterruptedException {
    MyThread myThread = new MyThread();
    Thread t1 = new Thread(myThread);
    t1.start();
    while(STOP){
    }
    System.out.println("After while loop");
    /*
     * 
     */
    Thread.sleep(1000*60*2);
    /*
     * Main thread should be Blocked.
     */
    System.out.println("now calling Check()-> perhaps i would be blocked. t1 is holding lock on class instance.");
    check();
}

public static synchronized void check(){
    System.out.println("inside Lock.check()");
    String threadName = Thread.currentThread().getName();
    System.out.println("inside Lock.Check() method : CurrrentThreadName : "+ threadName);
}
}

class MyThread implements Runnable{
public MyThread() {
}

@Override
public void run() {
    try {
        System.out.println("inside Mythread's run()");
        classLocking();
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
}

public static synchronized void classLocking() throws InterruptedException{
    System.out.println("inside Mythread.classLocking()");
    String threadName = Thread.currentThread().getName();
    System.out.println("inside MyThread.classLocking() : CurrrentThreadName : "+ threadName);
    /*
     * outer class locking 
     */
    synchronized (Lock.class) {
        System.out.println("I got lock on Lock.class definition");
        Lock.STOP = false;
        /*
         * Outer class lock is not released. Lock on MyThread.class instance is released.
         */
        MyThread.class.wait();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T18:44:42.857

你是对的，它不会释放另一个锁。至于为什么，那是因为这样做不安全。如果在调用内部函数的过程中释放外部锁是安全的，那么为什么调用内部函数时完全持有另一个锁呢？

让函数释放它没有在程序员背后获得的锁会破坏同步函数的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T18:45:21.467

wait() 的语义是调用它的线程注意到一个锁已经被另一个线程获取，被挂起并等待持有锁的线程在后者释放它时通知它（并调用通知）。这并不意味着在等待时它会释放所有获取的锁。您可以将等待的调用视为线程在获取完成操作所需的所有锁的过程中遇到的许多障碍。

关于“为什么一个线程在调用等待时没有释放所有获得的锁”这个问题，我认为答案是，这样做会使其更容易出现饥饿，并且还会减慢多线程应用程序的进度（All线程在调用第一次等待时会放弃所有的锁，而当它们获得当前正在等待的锁时必须重新开始。因此，它们将处于永久的锁争夺战中。实际上，在这样的系统中，唯一的能够完成执行的线程将是在需要时设法找到所有空闲锁的线程。这不太可能发生）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T18:48:01.217

来自方法的JavaDoc`wait()`

> 当前线程必须拥有该对象的监视器。线程释放***此监视器****的所有权***`notify`并等待，直到另一个线程通过调用方法或方法通知在此对象的监视器上等待的线程唤醒`notifyAll`。然后线程等待直到它可以重新获得监视器的所有权并恢复执行。**

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T18:49:31.603

是的，它工作正常。一个线程进入等待状态释放相应的锁而不是所有的锁。否则想一想：如果事情和你想的一样，那么当一个线程等待时，它会丢失所有获得的锁，这使得高级顺序执行变得不可能。**

# ruby-on-rails - 模型方法在他人看来不起作用

> ID：11494544
> 
> 赞同：0
> 
> 时间：2012-07-15T18:35:05.280
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在开发一个涉及“关注/取消关注”功能的应用程序。`Users`可以关注`Objects`并且`Objects`可以有很多`Users`关注他们。这是`has_many :through`通过`Relationships`模型/控制器建立的关系。

`object#show`我在视图中有以下代码段：

```
<% if current_user.following?(@object) %>
  <%= render 'unfollow' %>
<% else %>
  <%= render 'follow' %>
<% end %> 
```

在测试请求规范中的各种功能时，它会显示`undefined method 'following?' for nil:NilClass`并失败所有`object#show`规范。

该`following?`方法在`User`模型中，如下所示：

```
def following?(object)
  relationships.find_by_object_id(object.id)
end 
```

该方法`following?`在`User`模型中（因为它们是唯一执行关注和取消关注的方法）。我认为您可以在 Ruby 中的对象之间使用方法，但也许不能。如果没有，我将如何重构它以便能够使用该方法？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T18:39:30.117

规格中没有`current_user`助手。这就是为什么你得到`nil`. 您应该将测试用户刺入`current_user`变量

# wordpress - 按动态标签显示帖子

> ID：11494545
> 
> 赞同：1
> 
> 时间：2012-07-15T18:35:09.227
> 
> 标签：wordpress, wordpress-theming

虽然我有使用 PHP 的经验，但 WordPress 对我来说还是很新的，我在这里苦苦挣扎。

我正在尝试帮助朋友完成一个主题。他与几位艺术家合作，每位艺术家都有一个以艺术家（即汤姆琼斯）命名的 WP 页面，他只想在该页面上显示有关该艺术家的帖子。我们为每个艺术家（汤姆琼斯）定义了一个标签，比如（汤姆琼斯）

在 Codex 之后，我正在模板中准备循环，如下所示：

```
$tags = get_tags();
//query_posts( array( 'tag' => $tag->slug ) );
query_posts( array( 'tag' => 'tom-jones' ) );

if( have_posts()) : while( have_posts() ) : the_post();
  echo '<li id="feed<?php theID(); ?>" style="border-bottom:1px solid #404040;">';
  echo '<table><tr><td width="40">';
  echo '<img src="<?php echo get_post_meta($post->ID, 'image_path', true); ?>" />';
  echo '</td><td><a href="';
  the_permalink(); 
  echo '">';
  the_title();                            
  echo '</a><br><span class="smTxt">Posted by ';
  the_author();
  echo ' on <em>';
  the_time('F jS, Y');
  echo '</em></span><br>';
  the_excerpt();
  echo '</td></tr></table></li>';
  endwhile;
else:
  echo '<h3>There are no posts.</h3>';
endif; 
```

我原以为被注释掉的 query_post 会抓住艺术家的特定信息，但它会返回“无帖子”。当我像现在这样硬编码时，它按预期工作。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T19:32:59.683

尝试这个

```
query_posts( array( 'tag' => get_query_var('tag') ) ); 
```

[这篇文章可能对你有所帮助](http://wordpress.org/support/topic/need-to-get-the-slug-value-for-use-in-another-data-table)。

**更新：**

正如你所说，这`artist`是一种习惯`texonomy`，所以试试这个

```
$the_tax = get_taxonomy( get_query_var( 'taxonomy' ) );
query_posts( array( 'artist' => $the_tax->labels->name ) ); 
```

使用时必须`wp_reset_query()`在循环后使用`query_posts`

[你可以阅读这篇文章](http://wordpress.org/support/topic/display-current-taxonomy-name-on-taxonomyphp)。

**更新：（**使用 WP_Query）

```
$the_tax = get_taxonomy( get_query_var( 'taxonomy' ) );
$args = array(
'tax_query' => array(
    array(
        'taxonomy' => 'artist',
        'field' => 'slug',
        'terms' => $the_tax->labels->name
    )
)
);
$query = new WP_Query( $args ); 
```

# java - 用纯Java学习JavaCV

> ID：11494546
> 
> 赞同：26
> 
> 时间：2012-07-15T18:35:14.157
> 
> 标签：java, opencv, javacv

我正在尝试学习 JavaCV。众所周知，缺乏这方面的教育材料是一个很大的问题。在 JavCV 主页中，他们为“OpenCV CookBook”一书中的 C++ 示例提供了大量示例。但情况是，它们不是 Java，它们在 SCALA 中！！！！现在我已经疯了！我知道网络上有很多例子，但我想从头到尾学习它，只有我才能正确地做到。“OpenCV CookBook”是一本非常好的书，但它都是关于 C++ 中的 OpenCV，而不是关于 Java。

有人请帮我找到一个更好的地方来学习 JavaCV。提供给我任何东西，URL、书籍等。但它必须是关于用 100% Java 学习 JavaCV，而不是用 Scala、C++、C 或任何其他语言！请帮忙！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-15T18:56:10.140

**<更新>**

时代在变——OpenCV 也是如此。现在，一个纯 Java 包装器（不是 Android）正在快速发展，允许任何人直接在桌面 Java 应用程序中使用 OpenCV 函数/

**</更新>**

您可以在 OpenCV 示例目录中找到一些 Java 教程：`samples/android`.

[您还可以在此处](http://opencv.org/platforms/android.html)找到更多信息。

现在，我很确定你会说你想要 Java，而不是 Android :)。但这需要一个解释。

由于各种原因——主要是**效率**，第二个是对嵌入式平台的**可移植性**，计算机视觉几乎完全用 C/C++ 完成。这是事实上的标准。每个人都使用它，有充分的理由和良好的结果。

C++ 代码库有不同的适配器，如 Python 和 Java，但它们的存在是为了填补一些特定的空白：Python 用于快速原型设计，Java 用于连接 Android 主要语言。但在所有场景中，“真正的”算法开发都是使用 C/C++ 完成的。这就是为什么没有人关心其他语言的教程/书籍/示例。

**结论**：如果您想学习图像处理，请学习 C++ 或 Python。如果您想构建一些应用程序，请从 docs/android 教程中学习 OpenCV java 接口。但不要期望灵活性或对性能的控制。

**更新说明**

这里还有两件事要指定。

**首先**，随着 Android 的发展，以及 Python 越来越受欢迎，两种语言（和其他语言）的可用内容正在急剧增加。但在接下来的几年里，核心开发小组——以及最好的文档——将在 C++ 领域。

**最后但**同样重要的是，你应该记住，在任何工作或编程领域，**如果你坚持一种语言**，你就死定了。原则很重要，你应该能够用各种语言来实现它们，你应该能够阅读和理解各种来源。一个程序员说他不能将伪代码翻译成 Java 怎么办？与其他语言完全一样。

您可以阅读精彩的博客文章**[不要称自己为程序员](http://www.kalzumeus.com/2011/10/28/dont-call-yourself-a-programmer/)**，以了解为什么您应该忘记使用一种语言进行编程。

# php - 简单的sql多表查询

> ID：11494547
> 
> 赞同：0
> 
> 时间：2012-07-15T18:35:41.227
> 
> 标签：php, sql

我正在我的网站上编写一个聊天室，但我对 php 真的很陌生。我希望用户能够与在同一游戏团队中玩过的用户聊天（知道用户可以一起参与到不同团队中）以及在同一区域工作的用户。

假设有三个表：账号用户表、区域表、游戏表

我有一个函数返回我的查询，看起来像

```
function myfunction($userid){

$games_user=mysql_query('select theme from games where games.userid="'.$userid.'"');  
$games_theme = mysql_fetch_array($games_user);

$sql = ("select  userid, username, area.userid 

    from account 
        left join area
            on account.userid = area.userid    

        left join games
            on account.userid = games.userid

    where account.userid <> '".mysql_real_escape_string($userid)."' and '".(in_array(games.theme,$games_theme))."' and area.userid=1 
 );
 return $sql;
} 
```

*重新格式化：*

```
$sql = "
SELECT userid, username, area.userid 
FROM account 
LEFT JOIN area ON account.userid = area.userid    
LEFT JOIN games ON account.userid = games.userid
WHERE account.userid <> '".mysql_real_escape_string($userid)."'
  AND '".(in_array(games.theme,$games_theme))."'
  AND area.userid = 1 
"; 
```

但它真的不起作用，我认为我有语法问题。我真的不明白 in_array 是如何被索引的，我也不知道如何以更简单的方式进行查询

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T18:54:25.960

我仍然不完全确定你在做什么，但我认为这就是你想要的；您可以在单个查询中执行此操作：

```
<?php
function myfunction($userid){
    $id = mysql_real_escape_string($userid);
    $sql = "SELECT  userid, username, area.userid 
        FROM account 
            LEFT JOIN area
                ON account.userid = area.userid    
            LEFT JOIN games
                ON account.userid = games.userid
        WHERE account.userid<>'$id' AND area.userid=1
            AND games.theme IN (SELECT theme FROM games WHERE games.userid='$id')
    ";
    return $sql;
}
?> 
```

# oracle - JDBC Metada 检索约束信息

> ID：11494549
> 
> 赞同：7
> 
> 时间：2012-07-15T18:36:18.837
> 
> 标签：oracle, jdbc, metadata

我需要来自约束名称的有关表名和列名的信息。

是否存在类似于 connection.getMetadata().getX 来检索约束信息的人？

我的测试用例在 Oracle 数据库中，但我只想用 jdbc 解决我的最佳解决方案

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T17:30:37.687

如果您在谈论外键和主键约束。`DatabaseMetaData`确实提供了检索此信息的方法：您可以将[`getImportedKeys(..)`](http://docs.oracle.com/javase/7/docs/api/java/sql/DatabaseMetaData.html#getImportedKeys%28java.lang.String,%20java.lang.String,%20java.lang.String%29)and[`getCrossReference(..)`](http://docs.oracle.com/javase/7/docs/api/java/sql/DatabaseMetaData.html#getCrossReference%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)用于外键和[`getPrimaryKeys(..)`](http://docs.oracle.com/javase/7/docs/api/java/sql/DatabaseMetaData.html#getPrimaryKeys%28java.lang.String,%20java.lang.String,%20java.lang.String%29)and[`getExportedKeys(..)`](http://docs.oracle.com/javase/7/docs/api/java/sql/DatabaseMetaData.html#getExportedKeys%28java.lang.String,%20java.lang.String,%20java.lang.String%29) 用于主键。

请注意如何使用它们：在我`getCrossReference(..)`看来`getExportedKeys`有点违反直觉。

如果您还需要唯一约束，那么您应该能够使用[`getIndexInfo(..)`](http://docs.oracle.com/javase/7/docs/api/java/sql/DatabaseMetaData.html#getIndexInfo%28java.lang.String,%20java.lang.String,%20java.lang.String,%20boolean,%20boolean%29)with 传递`true`参数`unique`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-15T18:46:03.013

您可以从表[`USER_CONSTRAINTS`](http://docs.oracle.com/cd/B13789_01/server.101/b10755/statviews_2510.htm)中获取定义的约束信息。 您需要传递必需的 where 子句字段。 [`ALL_CONSTRAINTS`](http://docs.oracle.com/cd/B13789_01/server.101/b10755/statviews_1037.htm#i1576022)

**示例**：

```
select 
    CONSTRAINT_NAME,
    CONSTRAINT_TYPE,
    TABLE_NAME,
    ...
from
    USER_CONSTRAINTS
where
    CONSTRAINT_NAME like concat(?, '%'); 
```

# android - 使用 BitmapRegionDecoder 加载大图

> ID：11494551
> 
> 赞同：1
> 
> 时间：2012-07-15T18:36:39.947
> 
> 标签：android, bitmap

我正在尝试在 android 平板电脑应用程序中从互联网加载一个非常大的图像。我知道如何加载较小尺寸的样本，但注意到它会影响图像的分辨率。android 文档告诉我有关 BitmapRegionDecoder 的信息，以帮助将图像加载到图块中，但似乎没有太多文档。我正在做这样的事情： -

```
BitmapRegionDecoder decoder = BitmapRegionDecoder.newInstance(inputstream, false); 
```

我知道我必须通过传递不同的 rect 对象来根据需要多次循环下面的代码来获取整个图像

```
 region = decoder.decodeRegion(new Rect(0, 0, 50, 50), null); 
```

但我不明白如何将所有这些位放在一个图像视图中的正确位置。任何例子都会很有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T18:57:32.787

您正在尝试做的事情听起来像是您想挑战区域解码器的目的。您也可以尝试加载整个巨大的位图而不是碎片并将它们连接在一起。最后，无论哪种方式，您都会冒着内存不足错误的风险。区域解码器的重点是从一个巨大的位图中获取一个剪辑。一个用例可能是可以使用滑动手势平移的地图视图。您将仅使用区域解码器计算位图加载的当前可见剪辑并将其显示在您的地图视图中。您需要做的实际上是加载缩放版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-23T10:49:03.583

是的，您可以使用 BitmapRegionDecoder 来查看基于 Tiles 的大图像

这个人在这里实现了一个 TileBitmapDrawable 类，您可以将其挂接到您的图像视图：

[https://github.com/diegocarloslima/ByakuGallery](https://github.com/diegocarloslima/ByakuGallery)

# python - 分层python导入

> ID：11494552
> 
> 赞同：3
> 
> 时间：2012-07-15T18:36:43.567
> 
> 标签：python

所以我有两个模块 A 和 B，以及另一个安装的模块 C。假设我在 A 和 B 中使用了 C 的一些方法。我还需要 B 中的模块 A。所以从逻辑上讲，我的导入将是：

A ：

```
import C 
```

乙：

```
import A 
```

逻辑会告诉我 B 将包含来自 A 和 C 的函数。但是默认情况下这不起作用。从某种意义上说，要在模块 A 中引用 C 中的任何函数，我们需要额外级别的命名空间引用

```
A.C.some_c_module() 
```

我发现我们可以在 A 和 B 中导入 C，而无需使用讨厌的“C 语言之类”ifdef 克隆，并且可以正常工作。我的问题是，两次导入此类模块是否会受到惩罚？从某种意义上说，python 足够聪明，可以知道 ACsome_module == C.some_module？还是我这样做只是一个坏孩子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T18:43:45.073

两次导入一个模块不会导致它被加载两次。Python 会加载一次模块并保留对它的引用。所以是的，Python 足够聪明，知道这两个版本是相同的。您可以根据需要尽可能多地导入模块，而且它只会“花费”您一次。

顺便说一句，“B 将包含来自 A 和 C 的函数”的原因是错误的，因为当您`import C`在 A.py 中执行时，`A`它不会“包含来自 C 的函数”。相反，A 包含对 C 本身的引用。因此，当您从 B 内部导入 A 时，您将获得对 C 的引用，而不是对 C 内部函数的引用。如果您通过 using 将 C 的各个部分直接导入 A 的命名空间`from C import blahBlah`，那么当您导入 A 时，您将可以访问这些函数作为A的成员。

```
# A.py
from C import blah

# B.py
import A
A.blah # this will work 
```

# sass - 你能测试一个mixin是否存在吗？

> ID：11494555
> 
> 赞同：13
> 
> 时间：2012-07-15T18:37:10.370
> 
> 标签：sass, mixins

Sass 快速问题（希望如此）在这里。你能测试一下mixin的存在吗？例如

```
@if thumbnail-mixin {} @else { //define mixin }. 
```

理想情况下，我会使用`@unless`，但这仅存在于分叉上。我知道你可以覆盖一个 mixin，但如果你可以有一个默认的 mixin，我想更多，而不是在每种情况下都指定 N 个变量。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-12-23T04:43:55.257

最新版本的 Sass [(v3.3.0)](http://rubygems.org/gems/sass/)有一个`mixin-exists`功能：

```
.foo {
  @if mixin-exists(mymixin) {
    exists: true;
  }
  @else {
    exists: false;
  }
} 
```

Sass v3.3 还添加了其他存在测试：

```
variable-exists($name)
global-variable-exists($name)
function-exists($name) 
```

[更多关于 Sass v3.3 的信息。](https://github.com/nex3/sass/blob/master/doc-src/SASS_CHANGELOG.md#smaller-improvements)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-31T14:35:18.107

Sass 目前没有原生功能来确定 mixin 是否存在。

[https://github.com/nex3/sass/issues/561#issuecomment-14430978](https://github.com/nex3/sass/issues/561#issuecomment-14430978)

你可以创建一个用 Ruby 编写的 Sass 函数：

```
def mixin_exists(mixin_name)
    if(environment.mixin(mixin_name.value))
      Sass::Script::Bool.new(true)
    else
      Sass::Script::Bool.new(false)
    end
end 
```

或者您可以使用包含此功能的[sass-utilities Compass 扩展。](https://github.com/edwardoriordan/sass-utilities)

# java - 如何制作类似 MIUI 的标签

> ID：11494556
> 
> 赞同：2
> 
> 时间：2012-07-15T18:37:10.353
> 
> 标签：java, android, tabs, styling, android-tabs

我想为我的应用程序制作 MIUI 风格的标签。

我尝试使用选择器，但最终只有彩色标签。我还尝试创建一个 png 作为背景，但再一次，它并没有改变标签大小。

我想制作这样的标签： ![标签](../Images/92dfe8d25111be06dd2501ab66a2613c.png)

我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T16:19:41.797

我决定使用很棒的[ViewPagerExtentions](https://github.com/astuetz/ViewPagerExtensions)库，它允许创建类似的选项卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T19:18:02.360

我认为您可以使用按钮而不是选项卡。按钮的用户背景图像。如果您使用用户按钮，会很难处理吗？

# android - 创建安卓库

> ID：11494559
> 
> 赞同：1
> 
> 时间：2012-07-15T18:37:56.733
> 
> 标签：android

我编写了一个库（游戏引擎），并希望将它用于我将要创建的应用程序和游戏。

我看到有两种方法可以将库添加到您的代码中：

1.  导出到 jar 并将其添加到构建路径
2.  将它作为一个项目文件自己，只需将项目添加到构建路径。

我已经尝试了第二种方法，但我得到了：

> 无法实例化活动错误

**堆栈跟踪：**

> [2012-07-15 21:06:08 - ScienceProject] ------------------------------ [2012-07-15 21:06:08 - ScienceProject] Android 发布！[2012-07-15 21:06:08 - ScienceProject] adb 运行正常。[2012-07-15 21:06:08 - ScienceProject] 执行 com.webstorms.scienceproject.ScienceProjectActivity 活动启动 [2012-07-15 21:06:08 - ScienceProject] 自动目标模式：使用现有模拟器“emulator-5554”运行兼容的 AVD 'HVGA' [2012-07-15 21:06:09 - ScienceProject] 应用程序已经部署。无需重新安装。[2012-07-15 21:06:09 - ScienceProject] 找到项目依赖项，安装：WSGameEngine [2012-07-15 21:06:10 - WSGameEngine] 应用程序已部署。无需重新安装。[2012-07-15 21:06:10 - ScienceProject] 启动活动 com.webstorms.scienceproject。

# html - 不需要的多个背景之前/之后的 CSS

> ID：11494568
> 
> 赞同：1
> 
> 时间：2012-07-15T18:39:33.260
> 
> 标签：html, css

我希望我的按钮在 HTML 中看起来像这样：

```
<a href="page.html" class="button">Link</a> 
```

按钮类如下：

```
.button { background:url("button_bg.png"); height:33px; display:inline-block; font-size:18px; }
.button:before { display:inline-block; content:""; width:23px; height:33px; background:url("button_before.png"); }
.button:after { display:inline-block; content:""; width:23px; height:33px; background:url("button_after.png"); } 
```

但是，我遇到了两个问题：

1.  我想“之前”和“之后”只显示他们自己的背景。他们目前在“按钮”类的顶部显示他们的背景。
2.  文本在底部对齐。我想知道将其集中对齐的最佳方法。考虑到我知道按钮的高度，我确信这在 CSS 中是可能的，但我也在为此苦苦挣扎。

还有一件事需要注意：我希望“之前”和“之后”成为超链接的一部分。我确信可以使用 DIV 来显示这些“之前”和“之后”图像，但它会使它们与超链接分开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T18:45:22.420

您可以这样做以将这些图像添加为超链接的一部分

示例 HTML

```
<a href="#">
<i class="first-image"></i> /**USE BACKGROUND IMAGE HERE**/
<span class="link-text"></span>
<i class="second-image"></i> /** USE BACKGROUND IMAGE HERE**/
</a> 
```

对于垂直居中文本，

`height:33px;`在标签上使用并设置其`display:inline-block;` 和`line-height:33px;`

# jquery - 关闭 Colobox iframe - 提交父表单？

> ID：11494570
> 
> 赞同：1
> 
> 时间：2012-07-15T18:40:03.347
> 
> 标签：jquery, parent-child, colorbox, form-submit

我的表单上有一个 Colorbox。Colorbox 点击会启动一个 iFrame，我在其中嵌入了代码供他们上传内容。

当他们关闭 Colorbox 时，我希望父表单“提交”，这样当他们回到屏幕上时，他们会看到他们在父表单上所做的更改。

感谢 StackOverflow，我发现如何重新加载父窗口没问题。问题是如果他们用户在点击颜色框之前输入了任何内容，它就消失了。

```
$(".iframe").colorbox({iframe:true, width:"80%", height:"80%",**onClosed:function(){ location.reload(true);** }}); 
```

我正在寻找的是在 ColorBox 关闭时触发父表单提交的一些代码。

我尝试了很多东西 - 没有运气。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:18:21.553

你试过这个吗？

```
$(".iframe").colorbox({iframe:true, width:"80%", height:"80%",onClosed:function(){ $('form').submit(); }}); 
```

这应该很简单。如果它不起作用，那么我会说你必须向其他人展示更多你的工作以确定出了什么问题。

# delphi - 在 Imagelist 上显示次要底层图像？

> ID：11494575
> 
> 赞同：3
> 
> 时间：2012-07-15T18:41:15.350
> 
> 标签：delphi, delphi-xe

我有一个分配给列表视图的图像列表以显示透明图像。

关于添加的一些透明图像，这有一个小问题，那就是有时很难在列表视图中看到/找到它们。

请参阅此示例图像：

![在此处输入图像描述](../Images/eafbc7f8ac9c1071d1caf08c6f14ba7a.png)

您会注意到图像（尤其是鼠标）几乎看不到，事实上，如果添加了空图像，您甚至都看不到它，这里的数字标题会起到拯救作用，以显示实际存在的东西。

但我想让图像在视觉上更容易看到。我想也许在透明图像下面放另一个图像会起作用——当然，尽管它不会影响实际图像。

所以考虑到这一点，我制作了一个棋盘格的位图：

![在此处输入图像描述](../Images/51429b99beeb5cfa36f878b051a07ec4.png)

我觉得这将是表示图像透明区域的最合适方式，就像 Paint.NET 等一样。

为了进一步说明这个例子，我修改了原始图像以显示它的外观，如果我们将棋盘位图作为底层图像：

![在此处输入图像描述](../Images/8aced7afe377756fe80bfe1b2c84818f.png)

有棋盘将首先表明那里有一个列表项，并且棋盘网格的位图可能更暗或完全不同的图像。正如我之前所说，如果没有图像，您将什么也看不到，所以显示一个空的国际象棋网格或其他位图总比什么都没有好。

那么，如何使用图像列表在原始图像下方显示第二张图像以提供类似于上面示例的结果？下面的图像可以是任何东西——例如，只是另一个加载的位图。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T19:04:39.097

如果您将棋盘存储为第一个图像（索引为 0）并从事件处理程序中的当前图像*制作*[`OnGetImageIndex`](http://docwiki.embarcadero.com/Libraries/en/Vcl.ComCtrls.TListView.OnGetImageIndex)覆盖图像，它将执行您想要的操作。但是，我不确定每次触发事件时*制作叠加图像的效率如何。*

```
procedure TForm1.ListView1GetImageIndex(Sender: TObject; Item: TListItem);
begin
  // make the overlay (with overlay index 1) from the 
  // image with index Item.Index + 1
  ImageList1.Overlay(Item.Index + 1, 1);
  // use the first image from the list as a background
  Item.ImageIndex := 0;
  // and assign just created overlay index for overlay
  Item.OverlayIndex := 1;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T05:14:58.070

我似乎您需要的是具有额外功能的 TImageList 。

作为一个起点，我建议您考虑**在 Delphi 2006 内部**一书中描述的**[TImageListEx](http://flylib.com/books/en/1.228.1.173/1/)**

 **摘抄：

> TImageListEx 组件是 TImageList 的后代，它可以使用来自另一个图像列表的图像来生成禁用的图像，可以在工具栏和其他用户界面元素上使用。
> 
> TImageListEx 组件是 TImageList 的后代，它可以使用来自另一个图像列表的图像来生成禁用的图像，可以在工具栏和其他用户界面元素上使用。
> 
> TImageListEx 组件有几个好处：
> 
> *   它消除了创建禁用字形的需要。
>     
>     
> *   它消除了在设计时将禁用的字形添加到额外的 TImageList 组件的需要。
>     
>     
> *   它可以显着减小 .dfm 文件和整个应用程序的大小，尤其是在使用大量字形的大型应用程序中。
>     
>     
> *   它非常快，只需几毫秒即可禁用图像列表中的所有图像，即使有图像数量也是如此。
>     
>     
> *   它非常轻巧。（如果将其添加到已经使用标准 TImageList 组件的应用程序中，则根本不会增加可执行文件的大小，如果将其添加到不使用标准 TImageList 组件的应用程序中，则开销为只有 2 KB。）

它与您的要求相去甚远，但足够详细，可以展示如何扩展 TImageList。**

# android - 将内容描述设置为图像按钮时出现问题

> ID：11494576
> 
> 赞同：2
> 
> 时间：2012-07-15T18:41:19.757
> 
> 标签：android, android-widget, android-view

您好，当我尝试访问它时，我正在尝试为我的按钮购买设置内容描述，返回给我的值为空。

这是按钮的代码。

```
//This is the button of the payment.
ImageButton make_pay = new ImageButton(this);
make_pay.setBackgroundResource(R.drawable.add_product);
makePay.addView(make_pay);
makePay.setContentDescription("Precio"); 
```

这是我用来访问的代码：

```
make_pay.setOnClickListener(new View.OnClickListener() {                                        

        @Override
        public void onClick(View makepay) {
            LinearLayout wrap_area = (LinearLayout)findViewById(R.id.division2);
            TextView test = new TextView(FrontActivity.this);
            wrap_area.addView(test);
            if (makepay.getContentDescription() == null){
                    test.setText("Precio:1");
            }else{
                    test.setText(makepay.getContentDescription().toString());
            }
        });
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T18:46:04.447

您正在将内容描述设置为 makePay 对象（不管它是什么，可能是一个 ViewGroup）。但是，您将侦听器设置为 make_pay ImageButton，这是侦听器参数接收到的那个。因此，它的内容描述不是分配给另一个对象的描述。

尝试改变这个：

```
makePay.setContentDescription("Precio"); 
```

有了这个：

```
make_pay.setContentDescription("Precio"); 
```

无论如何，尽量不要以类似的方式命名您的对象。这可能会导致很大的混乱。

# css - CSS最佳方式流体列布局

> ID：11494577
> 
> 赞同：0
> 
> 时间：2012-07-15T18:41:28.473
> 
> 标签：css, less

我正在创建一个围绕 960 像素 12 列网格布局设计的网页，其中每列的宽度最大为 60 像素，每侧的边距最多为 10 像素。“最多”，因为如果页面缩小，列应该缩小。现在我很难让它像素完美。

我的“CSS”（实际上是生成 CSS 的 LESS）看起来像这样

```
.column{
    position: relative;
    float: left;
    margin: 100%*(10/960);
    &.c1{
        max-width: 60px;
        width: 100%*(60/960);
    }
    &.c2{
        max-width: 140px;
        width: 100%*(140/960);
    }
    &.c3{
        max-width: 220px;
        width: 100%*(220/960);
    }
    &.c4{
        max-width: 300px;
        width: 100%*(300/960);
    }
    &.c5{
        max-width: 380px;
        width: 100%*(380/960);
    }
    &.c6{
        max-width: 460px;
        width: 100%*(460/960);
    }
    &.c7{
        max-width: 540px;
        width: 100%*(540/960);
    }
    &.c8{
        max-width: 620px;
        width: 100%*(620/960);
    }
    &.c9{
        max-width: 700px;
        width: 100%*(700/960);
    }
    &.c10{
        max-width: 780px;
        width: 100%*(780/960);
    }

    &.c11{
        max-width: 860px;
        width: 100%*(860/960);
    }
    &.c12{
        max-width: 940px;
        width: 100%*(940/960);
    }
} 
```

现在，我创建了一个页面，其中包含一个元素，一行 12 列宽。在第 2 行有 1 个元素是 9 列宽和一个 3 列宽。在第 3 行，4 个元素，每 3 列宽。

下面是一个截图。如您所见，它们不是像素完美对齐的。我不明白为什么... ![不完美的像素](../Images/5b1176eaee8cb0f352b4a61996624f75.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:40:29.903

我相信您的问题是由浏览器进行舍入的方式引起的。有时你会得到一个额外的像素左右。有时你会错过一个像素左右。

# asp.net - 如何在 ASP.net MVC 中正确执行异步方法？

> ID：11494581
> 
> 赞同：5
> 
> 时间：2012-07-15T18:41:52.923
> 
> 标签：asp.net, asp.net-mvc, threadpool

**如何从控制器方法中执行异步方法并返回 HttpStatusCodeResult(200)，而异步委托不会过早终止其执行？**

我正在开发一个 asp.net 应用程序，我的家庭控制器需要很长时间才能运行（10-30 秒）。我想返回一个 HttpStatusCodeResult(200) 并继续运行我的函数。functoin 不需要返回任何东西，但它仍然不是真正的火灾和忘记的情况，因为我立即使用`HttpStatusCodeResult`.

我尝试使用委托，但似乎一旦我从操作返回状态代码，委托就会停止执行。另一种选择是创建一个 Windows 服务，但这就像使用火箭筒杀死苍蝇一样。我收到的请求很少，所以资源和性能对我来说不是问题。我听说`ThreadPool.QueueUserWorkItem`是一个选项，但哪个最适合我的情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T18:47:06.720

创建一个管理这个长时间运行的操作的静态类。此类将负责创建线程来执行任务，并提供一种检查任何正在进行的操作状态的方法（即，它是否仍在进行中或已完成，如果是，结果是什么）。

然后，您的 MVC 控制器方法使用此类来完成工作并向用户呈现状态信息或完成的处理数据。

像这样的东西：

```
public ActionResult GetSomething(String id) {
    TaskResult result = TaskClass.GetStatus( id );
    if( result == null ) { // the task has not been run, so start it up
        TaskClass.StartNew( id );
        return new View("PleaseWait");
    } else if( !result.IsFinished ) {
        return new View("PleaseWait");
    } else {
        return View("Results", result);
    }
}

public static class TaskClass {
     private static Dictionary<String,TaskResult> _tasks;
     public static TaskResult GetStatus(String id) {
         // TODO: Make this code thread-safe
         if( _tasks.ContainsKey(id) ) return _tasks[id];
         return null;
     }
     public static void Start(String id) {
         _tasks.Add( id, new TaskResult("Working") );
         Thread thread = new Thread( SomeExpensiveOperation );
         thread.Start( id );
     }
} 
```

在 SomeExpensiveOperation 结束时，会有代码将 TaskResult 标记为已完成。

# java - Java字符串值与子字符串后的文本不匹配

> ID：11494585
> 
> 赞同：0
> 
> 时间：2012-07-15T18:42:02.973
> 
> 标签：java, arrays, string, char, substring

遇到了一个奇怪的问题。我有以下代码来对字符串进行一些基本解析：

```
 for (int i = 0; i < lines.size(); i++) {
        String line = lines.get(i);

        //get time
        int firstWhiteSpace = line.indexOf(" ");
        String time = line.substring(0, firstWhiteSpace);

//problem is here vvvv
            line = line.substring(firstWhiteSpace + 1, line.length());
//problem is here ^^^^

        //get client
        int firstColon = line.indexOf(":");
        String client = line.substring(0, firstColon);
        line = line.substring(firstColon + 1, line.length());

        ChatMessage chatMessage = new ChatMessage();
        chatMessage.setTime(time);
        chatMessage.setClient(client);
        chatMessage.setMessage(line);

        messages.add(chatMessage);
    } 
```

所以基本上在我这样做之后，`line = line.substring(a, b)`我希望在`a`（包括）和`b`（不包括）之间得到一个子串。但是，如果我打印，`line`我会在执行子字符串操作之前得到整个字符串。奇怪的是，如果我查看调试器（Eclipse），那么字符串的值是子字符串，但字符数组包含整个字符串。

例如，如果：

```
line = "Hello World" 
```

我这样做：

```
line = line.substring(0, 5); 
```

那么 line 现在的值为：

```
"Hello" 
```

但字符数组是：

```
[H, e, l, l, o, , W, o, r, l, d] 
```

因此，我有点困惑。抱歉，如果我错过了一些可笑的愚蠢。这是很有可能的。

完整的代码，它不是一个非常复杂的类：

公共类 ChatParser { 私有静态 TS3ParserSettings 设置；

```
public static void main(String[] args) {
    ChatParser.setSettings("C:/Users/*****/javaWorkspace/TS3Parser/src/data/settings.txt");
    ChatParser.parseChat();
}

public static void parseChat() {
    ArrayList<String> lines = TextParser.parseTextLines(settings.getSetting("chatLogPath"));
    ArrayList<ChatMessage> messages = new ArrayList<ChatMessage>();

    for (int i = 0; i < lines.size(); i++) {
        String line = lines.get(i);

        //get time
        int firstWhiteSpace = line.indexOf(" ");
        String time = line.substring(0, firstWhiteSpace);
        line = line.substring(firstWhiteSpace + 1, line.length());

        //get client
        int firstColon = line.indexOf(":");
        String client = line.substring(0, firstColon);
        line = line.substring(firstColon + 1, line.length());

        ChatMessage chatMessage = new ChatMessage();
        chatMessage.setTime(time);
        chatMessage.setClient(client);
        chatMessage.setMessage(line);

        messages.add(chatMessage);
    }

    for (int i = 0; i < messages.size(); i++) {
        System.out.println("TIME = " + messages.get(i).getTime() + " CLIENT = " + messages.get(i).getClient() + " MESSAGE = " + messages.get(i).getMessage());
    }
}

public static void setSettings(String path) {
    settings = SettingsParser.parseSettings(path);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T18:47:31.327

由于`String`对象是不可变的，编译器可以自由地共享底层数据。当您执行 a`substring()`时，您将创建一个新的 String 引用对象，该对象指向原始字符串数组，但具有不同的起始偏移量和长度。

至于第一个例子，打印出的值，`firstWhiteSpace`我想一切都会变得清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T19:10:58.907

您的问题与不变性无关：如果您有一个对象集合/数组，则更改包含对对象的引用的局部变量的值对集合/数组没有影响。

此代码演示：

```
ArrayList<String> strings = Arrays.asList("foo", "bar");
String localVar = strings.get(0); // "foo"
localVar = "hello"; // this only affects localVar
// strings is still {"foo", "bar"} 
```

仅供参考，您所说的“数组”是一个*使用*数组的 ，但不是java“数组” `ArrayList`。

# design-patterns - 数据传输对象有助于最大限度地减少对远程对象的调用？

> ID：11494591
> 
> 赞同：0
> 
> 时间：2012-07-15T18:43:00.327
> 
> 标签：design-patterns, architecture

我读过使用 DTO 的主要原因之一是尽量减少服务层和远程前端之间的往返。最小化往返本质上意味着减少服务方法调用的数量，这是通过每次调用传输更多数据来完成的。

a) 但是不能通过具有很多参数的服务方法来减少往返吗？

b) DTO 是否能够比具有大量参数的服务方法更能减少往返次数？如果是，如何？如果不是，那么我不太明白如何减少往返次数是使用 DTO 的主要原因之一？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T19:52:55.437

我们没有任何上下文，所以您所读内容的作者可能有其他意思，但在这种情况下，DTO 确实可以减少从表示层到服务层的往返次数。

假设您有一个页面，您必须在其中列出用户，并为每个用户显示该用户发布的答案数量。假设您的页面列出了 10 个用户。

如果您不使用 DTO，则必须调用一个方法来获取有关 10 个用户的信息。对于每个用户，您必须调用第二种方法来获取他发布的答案的数量。这进行了 11 次方法调用。

如果您使用 DTO 保存有关用户的显示信息，以及他的答案数量，您可以调用一个方法来获取 10 个用户的列表，并一次获取所有信息。

请注意，返回 10 个用户的列表，每个用户都包含其发布的答案列表不是一个选项，因为您将加载大量信息（每个用户的 2453 个答案）只是为了显示答案的数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T05:12:29.047

除了 JB Nizet 在他的回答中提到的之外，我们一直在使用 DTO 来减少客户端和服务器之间传输的数据量。一种这样的情况是当我们需要一些参考数据或查找数据时。例如，如果我们有一个只读的 Country 集合，在视图或某种前端显示国家列表，我们不需要每次都传递国家列表。我们可以缓存集合，而 DTO 可用于仅传递 selectd 值。DTO 可以有国家代码，如“US”、“GB”、“IND”等，或者一些与国家代码相对应的唯一数值。在客户端，您可以有一个映射器，它将代码映射到 UI 小部件的选定值，如下拉列表。

# java - 如何在我的 Web 服务器上在线使用 Java？

> ID：11494593
> 
> 赞同：-1
> 
> 时间：2012-07-15T18:43:21.143
> 
> 标签：java

我刚开始学习Java，我不知道它是如何工作的。在此之前我学习的编程语言是 PHP。

我的问题是，如何在我的网站上使用 Java？我创建了一个 .java 文件，它显示如下（它显示了脚本）：[http ://cpcheats.co/java/learning/index.java](http://cpcheats.co/java/learning/index.java)

我猜我需要将 java 上传到我的网络服务器上。如果可以，请告诉我在哪里下载，在哪里上传？如果我不需要下载 Java，你能告诉我如何在我的网站上使用它吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T18:52:40.467

那么，您首先需要了解 java 的基本概念，以及 java web 应用程序（服务器上的 java）。您需要学习一门课程，这不是编写 Java 入门的地方，因为它已经存在。

我建议您阅读以下内容：

[http://docs.oracle.com/javase/tutorial/getStarted/](http://docs.oracle.com/javase/tutorial/getStarted/)

[http://docs.oracle.com/javaee/1.4/tutorial/doc/WebApp.html](http://docs.oracle.com/javaee/1.4/tutorial/doc/WebApp.html)

几个小时后，您应该对 Java 是什么以及可以用它做什么有更好的理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T18:59:52.777

> 我猜我需要将 java 上传到我的网络服务器上。

好的....
去书店/图书馆购买/借一本关于 Java 的书。花一个周末，*当您有编程问题时*，请在此处发布，我们这里的许多人会尽力帮助您。

# python - 了解 Python struct.pack 和二进制输入

> ID：11494596
> 
> 赞同：1
> 
> 时间：2012-07-15T18:43:32.173
> 
> 标签：python, scapy

以下函数接受二进制 4 字节密钥`key`。`buf`是与 4 字节密钥进行异或的二进制输入。

```
def four_byte_xor(buf, key):
    #key = struct.pack(b">I", key) # removed for binary processing
    buf = bytearray(buf)
    for offset in range(0, len(buf), 4):
        for i, byte in enumerate(key):
            buf[offset + i] = chr(buf[offset + i] ^ ord(byte))
    return str(buf) 
```

为了通过for指定二进制数据，我`key = struct.pack(b">I", key)`从中删除了。如果长度以 4 个字节结尾，这可以正常工作，否则会引发以下错误（请参阅下面的测试）。`four_byte_xor()``str(p.payload.payload.payload)[:4]``key`

以下是一些测试，其中包含一个输入 xor'd 与一个导致 00 的键，第一个成功：

```
'ABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCD'
'ABCD'

bytearray(b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00')
'ABCD' 
```

第二次测试不成功并以 A 或 1 个额外字节结束：

```
'ABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDA'
'ABCD'
Traceback (most recent call last):
  File "./decode.py", line 36, in <module>
    process_packets()
  File "./decode.py", line 34, in process_packets
    out_buf.write(bin_four_byte_xor(pkt_payload, pkt_offset))
  File "./decode.py", line 22, in bin_four_byte_xor
    buf[offset + i] = chr(buf[offset + i] ^ ord(byte))
IndexError: bytearray index out of range 
```

可以`four_byte_xor()`修改以接受不同的`buf`长度吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T04:24:36.323

当然，您可以修改函数以接受不同的密钥长度。例如，像

```
def many_byte_xor(buf, key):
    buf = bytearray(buf)
    for i, bufbyte in enumerate(buf):
        buf[i] = chr(bufbyte ^ ord(key[i % len(key)]))
    return str(buf) 
```

循环遍历键的所有字符（的模数版本`itertools.cycle`）。这产生

```
>>> many_byte_xor("AABAA", "AB")
'\x00\x03\x03\x03\x00'
>>> many_byte_xor("ABCDABCD", "ABCD")
'\x00\x00\x00\x00\x00\x00\x00\x00'
>>> many_byte_xor("ABCDABCDA", "ABCD")
'\x00\x00\x00\x00\x00\x00\x00\x00\x00'
>>> many_byte_xor("ABCDABCDAB", "ABCD")
'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
>>> many_byte_xor("ABCDABCDAB", "ABC")
'\x00\x00\x00\x05\x03\x01\x02\x06\x02\x03' 
```

哪个 IIUC 是你想要的。

# windows - 使用批处理文件脚本查找字符串的子字符串

> ID：11494597
> 
> 赞同：1
> 
> 时间：2012-07-15T18:43:31.810
> 
> 标签：windows, batch-file, substring

我有由数字、空格和名称组成的文件名。例如，`"023 filename1.txt"`。

我想创建一个重命名此类文件的批处理脚本。它需要识别子字符串并删除空格字符之前的所有内容。例如，`"023 filename1.txt"`将重命名为`"filename1.txt"`.

请解释如何在批处理文件中执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T19:10:20.427

```
@echo off
setlocal EnableDelayedExpansion
for %%a in (*.txt) do (
   set newName=%%a
   ren "%%a" "!newName:* =!"
) 
```

这部分：`"!newName:* =!"`意思是“取newName变量，从它的值的开头替换到空无的空格”，即去掉开头直到第一个空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T19:19:37.443

这只会回显它将执行的命令。删除第三行上的 echo 以实际进行重命名。

```
@echo off
for %%F in (*.txt) do (
  for /F "tokens=1,*" %%I in ("%%F") do echo ren "%%F" "%%J"
) 
```

第一个`for`迭代所有`.txt`文件。

第二个`for`将每个文件名拆分为初始编号，其余使用`tokens=1,*`. `%I`获取数字（被忽略）并`%J`获取新文件名。

# python - Numpy/Scipy - 将矩阵类打印为浮点数

> ID：11494599
> 
> 赞同：0
> 
> 时间：2012-07-15T18:44:03.297
> 
> 标签：python, matrix, floating-point, numpy, scipy

我在 numpy （矩阵类）中有一个 8x8 矩阵，它一直以科学记数法打印出来。有没有办法可以强制它以浮点打印所有内容。

先感谢您！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T18:47:14.287

你可以[`set_printoptions`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.set_printoptions.html)：

```
>>> a = numpy.arange(10, dtype='f8')
>>> a /= 100000
>>> a
array([  0.00000000e+00,   1.00000000e-05,   2.00000000e-05,
         3.00000000e-05,   4.00000000e-05,   5.00000000e-05,
         6.00000000e-05,   7.00000000e-05,   8.00000000e-05,
         9.00000000e-05])
>>> numpy.set_printoptions(suppress=True)
>>> a
array([ 0\.     ,  0.00001,  0.00002,  0.00003,  0.00004,  0.00005,
        0.00006,  0.00007,  0.00008,  0.00009]) 
```

# android - android：带有onclick的手势

> ID：11494600
> 
> 赞同：0
> 
> 时间：2012-07-15T18:44:05.713
> 
> 标签：android, onclick, gesture

我有一个布局，上面有很多按钮。我想单独点击它们，我也想让手势起作用，主要是左右甩动。请帮我解决这个问题。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T19:04:24.683

没问题毗湿奴，这是解决这些问题的方法：

1.) 为每个按钮设置 onClickListeners（即：

```
button1.setOnClickListener(new OnClickListener{ ...

button2.setOnClickListener(new OnClickListener{ ... 
```

2.) 对于你的左右甩尾，我建议你看这里，这是一个很好且易于适应的教程，适用于各种甩尾：[http://www.damonkohler.com/2011/07/android-fling-detection。 html](http://www.damonkohler.com/2011/07/android-fling-detection.html)

干杯

# matlab - MATLAB：确定一个值是否在向量中按顺序重复 N 次

> ID：11494603
> 
> 赞同：0
> 
> 时间：2012-07-15T18:44:58.067
> 
> 标签：matlab, vector

我试图确定一个值是否在向量中按顺序重复 N 次。我面临的挑战是它可以在向量内按顺序重复 N 次。目的是确定某些值连续多少次高于平均值。例如：

```
>> return_deltas

return_deltas = 

      7.49828129642663
      11.5098198572327
      15.1776644881294
       11.256677995536
      6.22315734182976
      8.75582103474613
      21.0488849115947
       26.132605745393
      27.0507649089989
      ... 
```

（例如，我只打印了几个值，但向量很大。）

```
>> mean(return_deltas)

ans =

     10.50007490258002

>> sum(return_deltas > mean(return_deltas))

ans =

    50 
```

所以有 50 个实例的值`return_deltas`大于 的平均值`return_deltas`。

我需要依次确定值连续`return_deltas`3 次大于其平均值的次数。换句话说，如果 中的值`return_deltas`连续 3 次大于其平均值，则为一个实例。

例如：

```
---------------------------------------------------------------------
| `return_delta` value | mean        | greater or less | sequence   |
|--------------------------------------------------------------------
|   7.49828129642663   |10.500074902 | LT              | 1          |
|  11.5098198572327    |10.500074902 | GT              | 1          |
|  15.1776644881294    |10.500074902 | GT              | 2          |
|   11.256677995536    |10.500074902 | GT              | 3 *        |
|  6.22315734182976    |10.500074902 | LT              | 1          |
|  8.75582103474613    |10.500074902 | LT              | 2          |
|  21.0488849115947    |10.500074902 | GT              | 1          |
|   26.132605745393    |10.500074902 | GT              | 2          |
|  27.0507649089989    |10.500074902 | GT              | 3 *        |
--------------------------------------------------------------------- 
```

星代表连续 3 个成功的序列。这组的结果将是两个，因为有两次值连续 3 次大于平均值。

我在想的是创建一个新的向量：

```
>> a = return_deltas > mean(return_deltas) 
```

当然，其中包含值`return_deltas`大于平均值的值，并使用它来查找连续多少次，值 in 连续`return_deltas`3 次大于其平均值。我正在尝试使用内置函数（如果有，我还没有发现它）或至少避免循环来做到这一点。

关于我如何接近的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T19:20:36.273

通过一些工作，这个片段找到了每个数字运行的起始索引：

```
[0 find(diff(v) ~= 0)] + 1 
```

一个例子：

```
>> v = [3 3 3 4 4 4 1 2 9 9 9 9 9];           # vector of integers
>> run_starts = [0 find(diff(v) ~= 0)] + 1    # may be better to diff(v) < EPSILON, for floating-point

run_starts =

     1     4     7     8     9 
```

查找每次运行的长度

```
>> run_lengths = [diff(run_starts), length(v) - run_starts(end) + 1] 
```

然后，这个变量可以很容易地查询哪些运行高于某个数字

```
>> find(run_lengths >= 4)

ans =

     5

>> find(run_lengths >= 2)

ans =

     1     2     5 
```

这告诉我们，连续运行至少四个整数的唯一运行是运行 #5。
但是，有 3 次运行至少连续两个整数，特别是运行 #1、#2 和 #5。您可以参考每次运行从`run_starts`变量开始的位置。

# ios - iPhone崩溃日志以及如何理解它

> ID：11494605
> 
> 赞同：0
> 
> 时间：2012-07-15T18:45:16.563
> 
> 标签：ios, crash

这是我从 iTunesConnect 网站下载的一份崩溃日志。

```
Incident Identifier: 20D5CB0F-58BE-41E5-B3F6-9BC8091E518C
Hardware Model:      iPhone4,1
Process:         iPill [2006]
Path:            /var/mobile/Applications/4567191D-1013-40F3-A02A-0B3C2552FCD3/iPill.app/iPill
Identifier:      iPill
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-07-12 20:59:23.716 +0200
OS Version:      iPhone OS 5.1.1 (9B206)
Report Version:  104

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  0

Last Exception Backtrace:
0   CoreFoundation                  0x3558688f __exceptionPreprocess + 163
1   libobjc.A.dylib                 0x3792d259 objc_exception_throw + 33
2   CoreFoundation                  0x354cf9db -[__NSArrayM objectAtIndex:] + 271
3   iPill                           0x0008225b -[ProssimeDosi tableView:cellForRowAtIndexPath:] (ProssimeDosi.m:314)
4   UIKit                           0x3301aefb -[UITableView(UITableViewInternal) _createPreparedCellForGlobalRow:withIndexPath:] + 547
5   UIKit                           0x33019fd9 -[UITableView(_UITableViewPrivate) _updateVisibleCellsNow:] + 1077
6   UIKit                           0x33019763 -[UITableView layoutSubviews] + 207
7   UIKit                           0x32fbdf37 -[UIView(CALayerDelegate) layoutSublayersOfLayer:] + 183
8   CoreFoundation                  0x354e51fb -[NSObject performSelector:withObject:] + 43
9   QuartzCore                      0x323b5aa5 -[CALayer layoutSublayers] + 217
10  QuartzCore                      0x323b56bd  CA::Layer::layout_if_needed(CA::Transaction*) + 217
11  QuartzCore                      0x323b9843 CA::Context::commit_transaction(CA::Transaction*) + 227
12  QuartzCore                      0x323b957f CA::Transaction::commit() + 315
13  QuartzCore                      0x323b14b9 CA::Transaction::observer_callback(__CFRunLoopObserver*, unsigned long, void*) + 57
14  CoreFoundation                  0x3555ab1b __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 19
15  CoreFoundation                  0x35558d57 __CFRunLoopDoObservers + 259
16  CoreFoundation                  0x355590b1 __CFRunLoopRun + 761
17  CoreFoundation                  0x354dc4a5 CFRunLoopRunSpecific + 301
18  CoreFoundation                  0x354dc36d CFRunLoopRunInMode + 105
19  GraphicsServices                0x37178439 GSEventRunModal + 137
20  UIKit                           0x32fe8cd5 UIApplicationMain + 1081
21  iPill                           0x000799b7 main (main.m:16)
22  iPill                           0x0007996c 0x78000 + 6508

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x35e3c32c __pthread_kill + 8
1   libsystem_c.dylib               0x32988208 pthread_kill + 48
2   libsystem_c.dylib               0x32981298 abort + 88
3   libc++abi.dylib                 0x3593ef64 abort_message + 40
4   libc++abi.dylib                 0x3593c346 _ZL17default_terminatev + 18
5   libobjc.A.dylib                 0x3792d350 _objc_terminate + 140
6   libc++abi.dylib                 0x3593c3be _ZL19safe_handler_callerPFvvE + 70
7   libc++abi.dylib                 0x3593c44a std::terminate() + 14
8   libc++abi.dylib                 0x3593d81e __cxa_rethrow + 82
9   libobjc.A.dylib                 0x3792d2a2 objc_exception_rethrow + 6
10  CoreFoundation                  0x354dc506 CFRunLoopRunSpecific + 398
11  CoreFoundation                  0x354dc366 CFRunLoopRunInMode + 98
12  GraphicsServices                0x37178432 GSEventRunModal + 130
13  UIKit                           0x32fe8cce UIApplicationMain + 1074
14  iPill                           0x000799b0 main (main.m:16)
15  iPill                           0x00079964 0x78000 + 6500 
```

我只粘贴了线程 0，因为它似乎是崩溃的那个。这对我来说是全新的，我不知道如何解释这个日志并解决问题。我已经在我的 iPhone 4 和 4s 以及我朋友的 3GS 上测试了我的应用程序，我们没有看到任何崩溃。现在我得到了一些人的 1 星评价，他们说 iPill 经常崩溃。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T18:59:51.180

我想说从你的表格 cellForRowAtIndexpath 方法开始。我冒昧地猜测您的数据模型存在问题，它正在从一个空的数组中调用数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T19:04:06.397

仅从这个崩溃日志来看，您似乎遇到了由 ProssimeDosi.m 的第 314 行触发的越界问题，原因是请求的数据多于可用数据。

请参阅此处接受的答案以获得更详细的解释：[由于未捕获的异常“NSRangeException”而终止应用程序，原因：“*** -[NSMutableArray objectAtIndex:]: index 1 beyond bounds [0 .. 0]”](https://stackoverflow.com/questions/4148395/terminating-app-due-to-uncaught-exception-nsrangeexception-reason-nsm)

# android - 这段关于 url 的代码在 webview 中的位置是什么？

> ID：11494608
> 
> 赞同：0
> 
> 时间：2012-07-15T18:45:23.433
> 
> 标签：android, url, browser, webview

我想将此代码添加到我的 java 文件中：

```
webView.setWebViewClient(new WebViewClient(){
   public boolean shouldOverrideUrlLoading(WebView view, String url) {
       if (url != null && url.startsWith("http://")) {
           view.getContext().startActivity(
               new Intent(Intent.ACTION_VIEW, Uri.parse(url)));
           return true;
       } else {
           return false;
       }
   }
} 
```

但我不知道在哪里。这是我的java文件：package sheddle.donald.duck.app；导入android.app.Activity；导入android.os.Bundle；导入android.view.Window；导入 android.webkit.WebChromeClient；导入 android.webkit.WebView；导入 android.webkit.WebViewClient；公共类 WebPageLoader 扩展 Activity { WebView webview;

```
final Activity activity = this;

@Override
public void onCreate(Bundle savedInstanceState)
{
super.onCreate(savedInstanceState);
this.getWindow().requestFeature(Window.FEATURE_PROGRESS);
setContentView(R.layout.main);
webview = (WebView) findViewById(R.id.webview);
webview.getSettings().setJavaScriptEnabled(true);
webview.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
webview.getSettings().setSupportMultipleWindows(true);
webview.getSettings().setPluginsEnabled(true);

webview.setWebChromeClient(new WebChromeClient() {
    public void onProgressChanged(WebView view, int progress)
    {
        activity.setTitle("Loading...");
        activity.setProgress(progress * 100);

        if(progress == 100)
            activity.setTitle(R.string.app_name);
    }
 });

 webview.setWebViewClient(new WebViewClient() {

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url)
    {
        view.loadUrl(url);
        return true;

    }
   });

 webview.loadUrl("http://www.sherdle.com/apphosting/dd");
 }

 @Override
 public void onBackPressed (){
    if(webview.canGoBack()) webview.goBack();
    else super.onBackPressed();
 }
 } 
```

我是 android 新手，我所做的一切都需要很多帮助。谢谢你的帮助。

我现在已经有了这个：package sheddle.donald.duck.app; 导入android.app.Activity；导入android.os.Bundle；导入android.view.Window；导入 android.webkit.WebChromeClient；导入 android.webkit.WebView；导入 android.webkit.WebViewClient；公共类 WebPageLoader 扩展 Activity { WebView webview;

```
final Activity activity = this;

@Override
public void onCreate(Bundle savedInstanceState)
{
super.onCreate(savedInstanceState);
this.getWindow().requestFeature(Window.FEATURE_PROGRESS);
setContentView(R.layout.main);
webview = (WebView) findViewById(R.id.webview);
webview.getSettings().setJavaScriptEnabled(true);
webview.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
webview.getSettings().setSupportMultipleWindows(true);
webview.getSettings().setPluginsEnabled(true);

 webview.setWebChromeClient(new WebChromeClient() {
    public void onProgressChanged(WebView view, int progress)
    {
        activity.setTitle("Loading...");
        activity.setProgress(progress * 100);

        if(progress == 100)
            activity.setTitle(R.string.app_name);
    }
 });

 webview.setWebViewClient(new WebViewClient() {

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url)
    {
        view.loadUrl(url);
        return true;

    }
 });

 webview.setWebChromeClient(new WebChromeClient(){
   public boolean shouldOverrideUrlLoading(WebView view, String url) {
       if (url != null && url.startsWith("http://")) {
           view.getContext().startActivity(
               new Intent(Intent.ACTION_VIEW, Uri.parse(url)));
           return true;
       } else {
           return false;
       }
   }

  webview.loadUrl("http://www.sherdle.com/apphosting/dd");
  }

 @Override
 public void onBackPressed (){
    if(webview.canGoBack()) webview.goBack();
    else super.onBackPressed();
 }
 } 
```

但我在我的 LoadUrl 行上收到此错误：此行有多个标记 - 语法错误，插入“AssignmentOperator 表达式”以完成表达式 - 语法错误，插入“;” 完成 FieldDeclaration - 语法错误，插入“)” 完成 MethodInvocation - 语法错误，插入“}” 完成 ClassBody - 语法错误，插入“;” 完成语句 - 标记上的语法错误，错误的构造

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T19:23:52.167

以这种方式使用

```
 @Override
public void onCreate(Bundle savedInstanceState)
{
super.onCreate(savedInstanceState);
this.getWindow().requestFeature(Window.FEATURE_PROGRESS);
setContentView(R.layout.main);
webview = (WebView) findViewById(R.id.webview);
webview.getSettings().setJavaScriptEnabled(true);
webview.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
webview.getSettings().setSupportMultipleWindows(true);
webview.getSettings().setPluginsEnabled(true);

 webview.setWebChromeClient(new WebChromeClient() {
    public void onProgressChanged(WebView view, int progress)
    {
        activity.setTitle("Loading...");
        activity.setProgress(progress * 100);

        if(progress == 100)
            activity.setTitle(R.string.app_name);
    }
 });

 webview.setWebViewClient(new WebViewClient() {

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url)
    {
        view.loadUrl(url);
        return true;

    }
 });

 webview.setWebChromeClient(new WebChromeClient(){
   public boolean shouldOverrideUrlLoading(WebView view, String url) {
       if (url != null && url.startsWith("http://")) {
           view.getContext().startActivity(
               new Intent(Intent.ACTION_VIEW, Uri.parse(url)));
           return true;
       } else {
           return false;
       }
   }

  });

webview.loadUrl("http://www.sherdle.com/apphosting/dd");

 }

 @Override
 public void onBackPressed (){
    if(webview.canGoBack()) webview.goBack();
    else super.onBackPressed();
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T18:53:37.863

首先确保你的布局中有 webview。还要确保清单中有以下行。

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

然后你将它添加到你的 onCreate 中。它可能不是最好的，但足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T19:28:24.990

抱歉，但是如果您已经重写了完全相同的方法，您怎么会不明白在哪里插入那段代码呢？看看哪里写的：

```
@Override
public boolean shouldOverrideUrlLoading(WebView view, String url)
{
    view.loadUrl(url);
    return true;
} 
```

如果要更改上述行为，只需替换第一个代码片段中指定的这两行即可。

我有一种感觉，您并不真正了解[匿名内部类](http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html)，因为您还尝试设置`WebChromeClient`两次 - 这真的没有意义。我建议你对这件事做一些阅读。

此外，该[`shouldOverrideUrlLoading(...)`](http://developer.android.com/reference/android/webkit/WebViewClient.html#shouldOverrideUrlLoading%28android.webkit.WebView,%20java.lang.String%29)方法由 a 定义`WebViewClient`，而不是 a `WebChromeClient`。这是一个简单地查阅文档的例子。

# css - Bootstrap 模态在 iPhone 上不起作用

> ID：11494613
> 
> 赞同：24
> 
> 时间：2012-07-15T18:46:44.260
> 
> 标签：css, twitter-bootstrap

我在我的网站上使用 Bootstrap 模式对话框（在桌面上运行良好）。当我尝试在 iPhone 和 iPad 上使用此功能时，模式不起作用。

是否有一个原因？在使用 Bootstrap 的 CSS via 时，有没有人想出解决这个问题的方法`@import`？

我使用 Bootstrap 覆盖文件来更改 Bootstrap CSS。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-09-11T14:05:43.097

这些天我遇到了同样的问题并发现，iOS 上的 safari 与其他浏览器在一件事情上的工作方式不同。模式窗口不会在 safari 上显示，但在许多其他浏览器上，当缺少 href="#" 时。

不适用于 Safari/iOS 但其他浏览器：

```
<li><a data-toggle="modal" data-target="#testModal">Modal</a></li> 
```

在 Safari/iOS 和其他浏览器上工作：

```
<li><a href="#" data-toggle="modal" data-target="#testModal">Modal</a></li> 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-28T10:09:09.137

iPhone 的浏览器似乎不支持模态的“淡入淡出”过渡。从您的模态对话框中完全禁用它，或者如果您想要花哨，请仅在您的站点检测到 iPhone 设备时禁用它：

**这在 iPhone 上不起作用**

```
<div class="modal hide fade" id="deleteConfirmation"> 
```

**这确实**

```
<div class="modal hide" id="deleteConfirmation"> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-02T02:49:02.890

请查看[http://jschr.github.com/bootstrap-modal/](http://jschr.github.com/bootstrap-modal/)因为它修复了一堆模态问题.. 你所要做的就是包含 2 个 js 文件
-- bootstrap-modalmanager.js
- js/bootstrap-modal.js
，它可以正常工作

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-06-19T21:37:24.493

我知道我参加这个聚会有点晚了，但我遇到了同样的问题并且遇到了解决它的解决方案。如果其他人遇到同样的问题并在此处进行搜索发现此问题，则答案是：

将“可点击”类添加到您使用 iOS 设备点击的应该打开模式的任何内容。我假设您使用的是 div 因为标签或按钮应该可以正常工作。然后在你的 CSS 中放这个：

```
 .clickable {
     cursor:pointer;
  } 
```

这不是 Bootstrap 问题，而是 iOS 问题。指针让 iOS 知道您点击的任何内容都是可点击的，通常不包括 div。

我不会把这个答案归功于我，我在这里找到了它： [Bootstrap Modal does not work on iOS devices](https://stackoverflow.com/questions/25354536/bootstrap-modal-does-not-work-on-ios-devices)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-06T10:50:09.543

这仍然是 Bootstrap 项目的一个未解决问题： [https ://github.com/twitter/bootstrap/issues/2130](https://github.com/twitter/bootstrap/issues/2130)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-29T17:46:57.843

这可能是由不正确的对话框定位引起的。尝试使用 .modal 类中的“顶部”设置。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-27T13:37:44.670

非常简单，只需将内联样式“光标”添加到指针即可立即工作。`style="cursor:pointer;"`

```
<li><a data-toggle="modal" data-target="#testModal" style="cursor:pointer;">Modal</a></li> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-21T16:18:52.797

如果您尝试在表单提交期间显示模式，那么您需要确保在提交事件之前激活模式。这是因为 iOS Safari 在表单提交期间不允许动画。

在完成 jquery 验证后，我正在显示我的模式，这为时已晚。因此，我在按钮单击时显示模式，如果在提交事件期间 jquery 验证失败，则将其关闭。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-10-29T09:35:08.633

我也有同样的问题，我的触发 Modal 的按钮在 iPhone 上不起作用。`<a>`我必须用 Rails转换标签`link_to`并提供所有可能的属性。IE。，

```
= link_to "Open Modal", '#', :remote => true, "data-backdrop" => "modal-backdrop", "data-toggle" => "modal", "data-target" => "#myModal" 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-09-11T14:00:07.793

我在我的移动设备（Android 操作系统）上遇到了类似的错误。模态在桌面上工作正常，但在移动设备上不起作用。

问题在于我对网格布局的错误定义。

因此，在布局的任何列中定义**.col-xs ，这对我有用。**

# ruby-on-rails - unescape_javascript() vs Coffeescript 三引号

> ID：11494618
> 
> 赞同：0
> 
> 时间：2012-07-15T18:47:06.813
> 
> 标签：ruby-on-rails, coffeescript

我最近开始使用 CoffeeScript 的三引号语法在 JavaScript 中转义 html 而不是 RoR 的`escape_javascript()`. 但我想知道在切换之前我应该​​知道两者之间是否有任何重大差异。

一个比另一个有什么好处吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T19:34:04.983

CoffeeScript 中的三引号不会转义任何东西，它们只是处理插值，去掉一些前导空格，并将嵌入的换行符转换为`\n`; 当然，`escape_javascript`也不对 H​​TML 做任何事情。例如：

```
s = """
    <p>
        Pancakes & stuff!
        'single quotes'
        "double quotes"
    </p>
""" 
```

变成：

```
var s;
s = "<p>\n    Pancakes & stuff!\n    'single quotes'\n    \"double quotes\"\n</p>"; 
```

单引号在双引号字符串中没有任何意义，所以 CoffeeScript 对它们什么都不做，但是双引号被转义了。但是，嵌入的三引号将被解释为三引号字符串的结尾，因此，如果您的 ERB 出现在您的 CoffeeScript 到 JavaScript 转换之前，您可能会遇到一些麻烦。

我建议不要放弃`escape_javascript`将原始字符串放入 CoffeeScript 三引号字符串中。如果您真的想使用三引号字符串，那么您将同时执行以下操作：

```
s = """<%=j @s %>""" 
```

但这将是毫无意义的使用`"""`since`"""`并且[`escape_javascript`](http://api.rubyonrails.org/classes/ActionView/Helpers/JavaScriptHelper.html#method-i-escape_javascript)做几乎相同的事情（当然`"""`会被嵌入式混淆`"""`）。

# android - Android任务管理器源码

> ID：11494626
> 
> 赞同：3
> 
> 时间：2012-07-15T18:48:23.980
> 
> 标签：android, android-layout, android-intent, android-source

我想知道是否有任何我可以查看的开源 android 任务管理器（流程管理器/流程细化器）项目。我正在为我的 uni 项目开发一个应用程序，这将帮助我了解如何寻找一个好的任务管理器！有谁知道一些我可以阅读或查看源代码的开源项目！我不需要下载源代码。

谢谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-27T15:54:41.020

简而言之，任务杀手通过轮询操作系统来获取当前正在运行的进程列表以及它们正在消耗的内存。然后，通过智能算法或用户输入，Task Killers 向系统发出调用，告诉系统终止进程。有两个 API 可以做到这一点。

他们是 ：

```
Process.killProcess(int pid) 

ActivityManager.killBackgroundProcesses(String packageName) 
```

这首先通过调用 Process.killProcess(int pid) 起作用，其中 pid 是特定进程的唯一标识符。Android 以与 linux 相同的方式杀死进程；但是，用户只能杀死他们拥有的进程。在 Android 中，每个应用程序都使用唯一的 UID (UserID) 运行。使用此 API 的应用程序只能杀死自己的进程，因此 Process.killProcess(int pid) 的文档中有以下解释：

杀死具有给定 PID 的进程。请注意，尽管此 API 允许我们根据其 PID 请求终止任何进程，但内核仍会对您实际能够终止的 PID 施加标准限制。通常这意味着仅运行调用者的包/应用程序的进程以及该应用程序创建的任何其他进程；共享一个公共 UID 的包也将能够杀死彼此的进程。当调用此方法时，信号由操作系统生成并发送到进程。每当进程从操作系统接收到信号时，它必须要么处理该信号，要么立即死亡。SIG_KILL 等信号无法处理并导致接收进程立即死亡。如果你想杀死你没有权限杀死的进程，即它不是你的进程，

第二个 API 通过告诉内置的 ActivityManager 你想杀死与特定包关联的进程来工作。此 API 解决了您的 UID 与进程的 UID 匹配的需要，因为它要求用户接受 KILL_BACKGROUND_PROCESSES 权限。此权限向操作系统发出信号，表明应用已被用户批准为任务杀手。当任务杀手想要杀死一个应用程序时，它会告诉操作系统杀死该进程，从而允许应用程序绕过只能杀死它拥有的进程的问题。

在 Android Docs 中它说这个 API 实际上使用了第一个 Process.killProcess API

让系统立即终止与给定包关联的所有后台进程。这与内核杀死那些进程以回收内存相同；系统将根据需要在未来重新启动这些进程。如果您想了解更多信息，我建议您阅读有关 Posix Signals 和 Linux kill 命令的信息

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T00:10:33.677

你必须看看**Astrid 任务管理器**，它是一个开源的 android 应用程序，你可以在这个[github 存储库](https://github.com/todoroo/astrid)中获取源代码。你也可以对这个[项目](http://code.google.com/p/freetaskmanager/)感兴趣。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-06T08:35:21.663

看看[化石](http://www.fossil-scm.org/)，为了开发你自己的应用程序，它有一个跟踪器和你可能需要的一切都在一个地方。

# ruby-on-rails - 如何将 link_to 标记的路径从控制器传递到视图。

> ID：11494631
> 
> 赞同：0
> 
> 时间：2012-07-15T18:49:04.303
> 
> 标签：ruby-on-rails, ruby-on-rails-3, view, path, controller

现在我正在尝试制作路径标记。

假设它是第 4 级深度目录，那么我做了这样的事情来查看？如何通过变量标签从控制器传递路径来查看？？？

```
 <% if !@FirstDirPath.nil? %>
          <%= @FirstDirPath %> <span class="divider">/</span>
          <% end %>

          <% if !@SecondDirPath.nil? %>
          <%= @SecondDirPath %> <span class="divider">/</span>
          <% end %>

          <% if !@ThirdDirPath.nil? %>
          <%= @ThirdDirPath %> <span class="divider">/</span>
          <% end %>

          <% if !@FourthDirPath.nil? %>
          <%= @FourthDirPath %> <span class="divider">/</span>
          <% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T19:29:18.700

您可以访问当前路径`request.fullpath`

如果你想得到面包屑，那么你可以用'/'分割完整路径。在控制器中：

```
@path = request.fullpath
@breadcrumb = @path.split('/') 
```

在视图中：

```
<% @breadcrumb.each do |crumb| %>
  <%= crumb %>
  <span class="divider">/</span>
<% end %> 
```

未经测试，但我认为它应该工作。

# eclipse - 如何使 ALT+... 快捷方式在 Eclipse Juno 4.2 中工作？

> ID：11494639
> 
> 赞同：1
> 
> 时间：2012-07-15T18:49:47.830
> 
> 标签：eclipse, eclipse-juno

我更新到 Eclipse Juno 4.2，发现我在 3.7 中使用的一些自定义快捷方式不再起作用。

例如，我`Alt+E`在编辑文本时设置为“删除上一个单词”。这不起作用。我怀疑文件菜单有一些干扰（Alt + E 最初会调出编辑菜单）。有人知道如何使此快捷方式起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:16:40.303

Eclipse 4.2 错误归档：[bugs.eclipse.org/bugs/show_bug.cgi?id=385302](http://bugs.eclipse.org/bugs/show_bug.cgi?id=385302)

# vb.net - 组框边框问题

> ID：11494642
> 
> 赞同：0
> 
> 时间：2012-07-15T18:50:06.050
> 
> 标签：vb.net, winforms, groupbox

我有一个 vb 应用程序，我最近注意到其中一个表单上的 Groupboxes 有一个奇怪的问题

问题是，我可以看穿 groupboxes 的边界，所以假设我打开了生成的可执行文件并将其放在我的桌面上，没有任何东西，我可以清楚地看到我拥有的部分壁纸（查看下图）

![在此处输入图像描述](../Images/a82419ce5d0bd5130109b7082a14604d.png)

现在有趣的是，我没有修改这些组框的任何属性，我相信问题是在我将以下内容添加到我的 app.config 后开始的

```
 <startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
  </startup> 
```

为了能够使用 SQLite 编译代码，我添加了该部分。

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T20:12:18.913

我能够复制您显示的内容的唯一方法是将 Forms AllowTransparency 属性设置为`True`并将`TransparencyKey`设置为`ControlLightLight`. 您可能需要仔细检查程序中的类似内容。

# sql - SQLite - 在忽略特殊字符和“The”的同时按字母数字排序

> ID：11494643
> 
> 赞同：3
> 
> 时间：2012-07-15T18:50:08.677
> 
> 标签：sql, ios, sqlite, indexing

我正在开发一个 iOS 应用程序，该应用程序使用 FMDB 存储必须按字母数字排序的书名列表（字母第一，数字第二）。但是，我还必须忽略非字母数字前导字符，例如星号或括号。我也必须忽略“The”。此外，这些排序数据将显示在索引 UITableView 上，因此我需要能够获取前导字符列表以及进入每个部分的书名数量。

例子-

这是书名列表：

```
"A Title 1", "A Title 2", "The A Title 3", "B Title 1", "B Title 2", "B Title 3", 
"*B Title 4", "C Title 1", "(The) C Title 2", "3 Title 1" 
```

从这个列表中，我将计算 4 个部分以将标题放入（'A'、'B'、'C'、'3'）。我还会计算进入每个部分的书的数量（'A'-3 书，'B'-4 书，'C'-2 书，'3'-1 书）。使用[本教程](http://www.iphonedevcentral.com/indexed-uitableview-tutorial/)，我能够设置部分和索引，但在处理“The A Title 3”、“*B Title 4”和“(The) C Title 2”等标题时遇到了麻烦。

目前，这是我正在使用的声明：

```
SELECT DISTINCT UPPER(SUBSTR(BookTitle, 1, 1)) AS Section, 
COUNT(BookTitle) AS SectionCount 
FROM BookTable 
GROUP BY Section ORDER BY IFNULL(Section + 1, 0), Section 
```

这将返回按字母数字排序的章节列表以及进入每个章节的书籍数量。问题是我的“T”部分有太多书籍，因为它正在获取所有以“The”为主角的书籍。更不用说当我想忽略这些特殊字符时，我会得到像 < 或 * 这样的特殊字符部分。我在想我需要剪掉任何非字母数字字符和任何出现的“The”，但我不知道如何将它整合到我的查询中，就像现在这样。

我希望这足够详细。请随时要求我澄清任何事情。与往常一样，提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T19:05:09.420

最好的选择可能是在插入时检查这些条件，并将“The”放在标题的末尾（例如，“A Title 3, The”）。您可以编写一个简单的程序来更新当前数据库并将“The”标记到末尾。

但是，如果您真的想保持这种方式，请查看 case 表达式。这是一个相关主题： [SQLite 是否支持 select 中的任何类型的 IF(condition) 语句](https://stackoverflow.com/questions/1294619/does-sqlite-supports-any-kind-of-ifcondition-statement-in-the-select)

基本上，检查“The”或特殊字符的大小写，并在您的 SUBSTR 中使用该大小写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T19:44:46.917

与其他语言相比，SQL 中的字符串操作通常是“返璞归真”。这是您可能采取的一种方法：

```
select upper(substring(titleclean, 1, 1)) as Section, count(*)
from (select bt.*,
             (case when upper(substring(titletrim, 1, 4)) = 'THE ' or
                        upper(sutring(titletim, 1, 5)) = 'THE) '
                   then substring(titletrim, 5, 1000)
                   else titletrim
              end) as titleclean
      from (select bt.*, ltrim(title, '()*') as titletrim
            from booktable bt
           ) bt
     ) bt
group by upper(substring(titleclean, 1, 1))
order by (case when substring(titleclean, 1, 1) between '0' and '9' then 1
               else 0
          end),
         Section 
```

这是通过在子查询中分配变量来进行字符串操作。我认为这些遵循您想要的规则。最里面的 ltrim() 正在删除您不想要的初始变量。

我将表达式“ifnull(section+1, 0)”更改为更清晰的范围比较。您的版本可能适用于 SQLite。在大多数数据库中，它会为非数字部分生成错误。

# asp.net - 在图像上传时在 SQL Server 上创建目录

> ID：11494645
> 
> 赞同：0
> 
> 时间：2012-07-15T18:50:39.127
> 
> 标签：asp.net, image, file-upload

我想将每个单独的图像存储到它自己的目录中，该目录将在上传操作时创建，具有以下结构

```
/server_img_path/<year>/<month>/<day>/<hour><minutes><seconds><img_id>.png 
```

现在我有以下工作但上传存储一个目录

```
var fn = Server.MapPath("~/Content/img/" + name + ".png");
img.Save(fn, System.Drawing.Imaging.ImageFormat.Png); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T19:08:07.097

试试这个来保存图像，但这不会将每个单独的图像存储到它自己的目录中，因为通过这段代码，您将能够创建一个目录一天。所以一天的所有图像都会放在该文件夹中。

```
var now = DateTime.Now;
var fn = Server.MapPath("~/Content/img/");
var dirPath = Path.Combine(fn, now.Year.ToString(), now.Month.ToString(), now.Day.ToString());
if (!Directory.Exists(dirPath))
    Directory.CreateDirectory(dirPath);
var filename = dirPath+now.Hour.ToString() + now.Minute.ToString() + now.Second.ToString() + name  + ".png";
img.Save(filename, System.Drawing.Imaging.ImageFormat.Png); 
```

# python - Windows 7 上的 Python/Django 环境

> ID：11494648
> 
> 赞同：2
> 
> 时间：2012-07-15T18:51:08.113
> 
> 标签：python, mysql, django, apache, xampp

有人能快速告诉我你是如何在 Windows 上设置 Django 环境的吗？我需要 Apache、MYSQL、SQLite 和 Python。我的计算机上有一个 XAMPP 和 WAMP 服务器，用于 PHP Web 应用程序。我只需要有人告诉我您是如何**在**您的 Windows 机器上亲自设置 DJango 环境的。我对 Python 世界很陌生，所以请原谅我的无知。谢谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T19:07:27.413

Python 有一些安装工具，使安装包变得轻而易举。

首先安装python。有不同版本的可执行文件可用。 [http://www.python.org/getit/releases/2.7.3/](http://www.python.org/getit/releases/2.7.3/)

然后安装python设置工具： http: [//pypi.python.org/pypi/setuptools/](http://pypi.python.org/pypi/setuptools/)

在此之后，您可以安装`pip`：

`easy_install pip`

安装 pip 后，您可以使用`pip install django`. 如果这些命令不在您的路径中，您将不得不从您的 python 目录执行它们！

[http://www.youtube.com/watch?v=rIVwVOpwpsA](http://www.youtube.com/watch?v=rIVwVOpwpsA)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T19:58:30.470

你的开发机器上不需要 apache 或 mysql，django 有一个用于测试的 http 服务器，默认使用 sqlite。

设置项目后，只需使用：

python manage.py 运行服务器

那么你应该能够在浏览器上打开你的 django 项目：`http://localhost:8000/`

我还建议你看看[virtualenv](http://virtualenv.org)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T19:08:15.193

我使用安装了 python、vim 和 rxvt-native 软件包的[cygwin 。](http://cygwin.org)

这在我的 Windows 机器上为我提供了一个类似 Linux 的环境，而无需实际安装 Linux。

# html - 三个按钮居中

> ID：11494650
> 
> 赞同：0
> 
> 时间：2012-07-15T18:51:34.007
> 
> 标签：html, css

我在侧边栏中有以下布局：

```
<div class="sidebar">
    <div class="center">
        <div>button one</div>
        <div>button two</div>
        <div>button three</div>
    </div>
</div> 
```

我可以通过将`center`宽度设置为 100% 并将按钮`divs`设置为 33% 来使这三个按钮居中。

```
.sidebar {
    width: 300px
}
.center {
    width: 100%;
    background: red;
    margin: 0 auto; 
}
.center div {
    width: 33%;
} 
```

但是，当我只有两个按钮时，我想布局保持居中：

```
<div class="sidebar">
    <div class="center">
        <div>button one</div>
        <div>button two</div>
    </div>
</div> 
```

这样两个按钮将位于中心（即，在没有第三个按钮的情况下，两个按钮从左右边缘缩进 16.66%）。

我将如何使用纯 css 解决方案来实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T18:56:03.180

这就是你需要的：http: [//jsfiddle.net/HFaTW/](http://jsfiddle.net/HFaTW/)

HTML：

```
<div class="sidebar">
    <div class="center">
        <div>button one</div>
        <div>button two</div>
        <div>button three</div>
    </div>
</div> 
```

CSS：

```
.sidebar{
    width:400px;
}

.center{
    background-color:#f9f9f9;
    text-align:center;
}

.center div{
    display:inline-block;
    margin-left:5px;
    margin-right:5px;
    color:#FFF;
    background-color:darkgray;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T19:01:08.160

解决方案是`text-align: center`在 .center 元素和`display: inline-block`里面的 div 上设置 - 演示[http://dabblet.com/gist/3118171](http://dabblet.com/gist/3118171)

HTML & CSS（两种情况）：

```
<div class="sidebar">
    <div class="center">
        <div>button one</div><div>button two</div><div>button three</div>
    </div>
</div>

<div class="sidebar">
    <div class="center">
        <div>button one</div><div>button two</div>
    </div>
</div> 
```

.

```
.sidebar {
    width: 40%;
}
.center {
    width: 100%;
    text-align: center;
}
.center div {
    width: 33.33%;
    display: inline-block;
} 
```

**注意**`</div>`：你不应该在结束标签和下一个开始标签之间有任何类型的空格`<div>`

# mysql - MySQL LEFT JOIN 不返回左表中的所有行

> ID：11494653
> 
> 赞同：1
> 
> 时间：2012-07-15T18:52:08.780
> 
> 标签：mysql

我最近一直在做一个博客系统，我遇到了一个问题。我有两张表，一张用于博客文章，另一张用于对这些文章发表评论。这是我目前用于检索所有帖子信息以及评论数量的查询：

```
SELECT bp.*, COUNT(bpc.id) AS post_comments
FROM blog_posts AS bp
LEFT JOIN blog_post_comments AS bpc ON bpc.post_id = bp.id
LIMIT 0, 10 
```

现在，正如我在标题中所说，这只会返回关于一篇文章的数据，尽管它应该返回 10 篇文章。为什么会这样？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T18:55:45.037

您缺少该`GROUP BY`子句，并且由于 MySQL 对未出现在 group by 中的聚合函数和列很宽容`SELECT`，因此它折叠成一行显示总数，但混合了来自其他列的列值。

```
SELECT bp.*, COUNT(bpc.id) AS post_comments
FROM blog_posts AS bp
LEFT JOIN blog_post_comments AS bpc ON bpc.post_id = bp.id
GROUP BY bp.id
LIMIT 0, 10 
```

除了 MySQL 之外，为 RDBMS 执行此操作的更便携的方法是加入一个子查询，该子查询仅返回`post_id`每个 id 的帖子数和帖子数，从而允许选择其余列`blog_posts`而不出现在`GROUP BY`.

```
SELECT
  bp.*,
  bcount.counts
FROM 
  blog_posts AS bp
  LEFT JOIN (
     SELECT post_id, COUNT(*) AS counts 
     FROM blog_post_comments 
     GROUP BY post_id
  ) bcounts ON bp.id = bcounts.post_id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T18:55:46.583

由于您使用 COUNT，它会将所有帖子视为相同。试试这个看看它是否有效：

```
SELECT bp.*, COUNT(bpc.id) AS post_comments
FROM blog_posts AS bp
LEFT JOIN blog_post_comments AS bpc ON bpc.post_id = bp.id 
GROUP BY bp.id
LIMIT 0, 10 
```

我不确定这是否是问题所在。只是猜测。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T18:55:36.690

你得到一条记录，因为[COUNT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_count) () 是一个聚合函数。您应该添加一个 GROUP BY 子句，并且[COUNT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_count) () 将按您的意愿工作。

# ruby - Ruby - 方法属性

> ID：11494654
> 
> 赞同：2
> 
> 时间：2012-07-15T18:52:22.963
> 
> 标签：ruby, methods, attributes

有没有办法将属性分配给方法？我知道你可以用类来做到这一点，但我有一系列类似的方法，如果我可以为每个人分配一个属性，那真的很有帮助。有谁知道如何做到这一点，或者在 Ruby 中是否有可能？

**编辑：**我的意思是当你有一个类时，你可以像这样为它分配属性：

```
 class Person
  attr_accessor :age
  ...
 end 
```

我想知道是否也可以使用这样的方法来做到这一点：

```
class Trucks
 def get_fire_truck_name
   attr_accessor :size
   ...
 end
end 
```

（顺便说一句，这只是一个例子。实际的程序要复杂得多，这解释了为什么我不能简单地将我的方法变成类来赋予它们属性。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T19:43:03.063

由于方法是 Ruby 中的对象，因此您可以像定义`Method`任何其他对象一样在对象上定义方法。如果你特别想使用`attr_accessor`，你可以像这样打开方法的[特征](http://blog.madebydna.com/all/code/2011/06/24/eigenclasses-demystified.html)类：

```
class Person
  attr_accessor :age
end

m = Person.instance_method(:age)
class << m
  attr_accessor :units
end

m.units = 'years'
puts m.units       #=> 'years' 
```

`def`您还可以使用关键字显式定义对象上的方法：

```
def m.units
  @units || 'years'
end

def m.units=(u)
  @units = u
end

puts m.units
m.units = 'decades'
puts m.units 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T19:25:28.220

如果您只是在谈论能够将方法作为对象上的变量调用，那么我知道至少有三个路径...

使用 attr_reader 访问[器](https://stackoverflow.com/questions/5046831/why-use-rubys-attr-accessor-attr-reader-and-attr-writer)

```
attr_reader :your_cool_method_name 
```

您可以在对象上调用发送。请注意，这种方式忽略了范围（公共、受保护、私有）

```
@object.send :your_cool_mehod_name 
```

或者你可以通过 method_missing 调用来实现，但这有点高级，根据你的问题，我会推迟这种方法，直到你对 Ruby 的熟悉程度增加。

# amazon-s3 - Zencoder 的 CloudFront 签名 URL

> ID：11494657
> 
> 赞同：4
> 
> 时间：2012-07-15T18:52:40.343
> 
> 标签：amazon-s3, amazon-web-services, amazon-cloudfront

我对 AWS 和 Zencoder 比较陌生，所以我希望有一起使用这两种服务经验的人可以帮助我解决我遇到的问题。

我正在使用私有 CloudFront 分发进行交付，并且我没有任何运气播放来自 Zencoder 的视频文件的签名 CloudFront url（文件的所有者是 zencodertv）。我收到拒绝访问的 XML 消息。如果我手动将文件上传到作为 CloudFront 分配源的 S3 存储桶（Zencoder 提供的同一存储桶），我的签名文件可以正常播放。我假设问题是由于我不是文件的所有者这一事实 - 这是正确的吗？

我看到 Zencoder 有一个“公开”选项，但我不希望我的视频可以在 S3 或 Cloudfront 中公开访问。也许我需要专门为来自 Zencoder 的转码文件创建一个存储桶，然后使用 copy_object（我正在使用 AWS 的 PHP SDK）将文件移动到最终/私有 S3 存储桶。不过，这似乎有点矫枉过正。想法？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-14T11:46:06.773

找到了解决方案。如果您在 Zencoder 中输入您的 S3 访问凭证，那么它将像您一样将文件上传到您的存储桶，并且 CloudFront 可以正常工作。您还可以删除存储桶策略。

# string - Lua：在分隔字符串中查找标记

> ID：11494661
> 
> 赞同：3
> 
> 时间：2012-07-15T18:53:06.267
> 
> 标签：string, lua

我有一个带有一组分隔标记的字符串，看起来像这样：

```
local str = "foo;bar;baz" 
```

我希望能够**准确**判断给定令牌是否在此字符串中：

```
in_str("foo", str) -- true
in_str("bar", str) -- true
in_str("baz", str) -- true
in_str("ba", str) -- false
in_str("foo;", str) -- false 
```

使用 PHP 和正则表达式，我将通过以下方式实现所需的效果：

```
function in_str($needle, $haystack) {
    return (bool)preg_match('/(^|;)' . preg_quote($needle, '/') . '(;|$)/', $haystack);
} 
```

不过，我不确定如何将此逻辑转换为 Lua。我也宁愿能够在 vanilla Lua 中做到这一点，而无需任何插件/扩展/等。我也希望它相当有效。到目前为止，我设法正确实现这一点的唯一方法是将字符串拆分成一个表，然后对其进行迭代，这显然是非常低效的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T19:14:20.283

这是工作中的代码示例：[LINK](http://codepad.org/AHLCl5MN)

```
local str = "foo;bar;baz;and;some;more;random;data;in;here"
function check(sString, sData)
  print( string.find(";"..sString..";", ";"..sData..";") )
end
check( str, "foo" )
check( str, "bar" )
check( str, "ba" )
check( str, "baz" )
check( str, "random" )
check( str, "stuff" ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T19:16:37.400

Since there's no `|` (logical OR) operator in Lua's pattern-match API, you could do something like this instead:

```
function in_str(needle, haystack)
  return (haystack:find(';' .. needle .. ';') or
          haystack:find('^' .. needle .. ';') or
          haystack:find(';' .. needle .. '$')) ~= nil
end

local str = "foo;bar;baz"

print(in_str("foo", str))  -- true
print(in_str("bar", str))  -- true
print(in_str("baz", str))  -- true
print(in_str("ba", str))   -- false
print(in_str("foo;", str)) -- false 
```

# c# - DataGrid 和 DataTemplate 的数据绑定问题

> ID：11494662
> 
> 赞同：2
> 
> 时间：2012-07-15T18:53:07.817
> 
> 标签：c#, wpf, xaml, data-binding, datagrid

我想这是一个简单的数据绑定问题，但我无法让它工作。我有一个 DataGrid、一个带有 Observable 集合的 ViewModel 和一个表示该集合中对象的类。DataGrid 有两列：DataGridTextColumn 和DataGridTemplateColumn。数据与 DataGridTextColumn 的绑定有效，但与 DataGridTemplateColumn 的绑定无效。相应的列只是保持为空。

这是代码：

这是我的数据网格：

```
<DataGrid x:Name="tdg_Memory" Grid.Column="1" Margin="0" Grid.Row="4" VerticalScrollBarVisibility="Visible" AutoGenerateColumns="False">
    <DataGrid.Columns>
        <DataGridTextColumn x:Name="MemoryIndexColumn" Header="Index"/>
        <DataGridTemplateColumn x:Name="MemorySolutionColumn" CellTemplate="{DynamicResource MemorySolutionCellTemplate}" Header="Solution"/>
    <DataGrid.Columns>
<DataGrid> 
```

这是数据模板：

```
<DataTemplate x:Key="MemorySolutionCellTemplate">
    <Grid x:Name="grd_RootGrid" Height="Auto" Width="Auto" HorizontalAlignment="Left" VerticalAlignment="Top">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
        <Label x:Name="lbl_ValueCaption" Content="Value:" Margin="0" Grid.Row="0" Height="Auto" VerticalAlignment="Top" HorizontalAlignment="Right"/>
        <Label x:Name="lbl_FitnessCaption" Content="Fitness:" Margin="0" Grid.Row="1" HorizontalAlignment="Right" VerticalAlignment="Top"/>
        <Label x:Name="lbl_ValueValue" Content="65665" Grid.Column="1" Height="Auto" Margin="12,0,0,0" VerticalAlignment="Top" HorizontalAlignment="Left"/>
        <Label x:Name="lbl_FitnessValue" Content="121212" Grid.Column="1" Margin="12,0,0,0" Grid.Row="1" HorizontalAlignment="Left" VerticalAlignment="Top"/>
    </Grid>
</DataTemplate> 
```

数据绑定发生在后面的代码中：

```
// setting the itemsSource (seems to work)
jobItem.tdg_Memory.ItemsSource = jobModel.Memory;

// binding of the first column (DataGridTextColumn) seems to work
Binding memoryIndexColumnBinding = new Binding();
memoryIndexColumnBinding.Path = new PropertyPath("Index");
jobItem.MemoryIndexColumn.Binding = memoryIndexColumnBinding; 
```

这是 ViewModel：

```
// the observable collection that holds the data for the DataGrid
private ThreadSafeObservableCollection<MemoryItemRepresentative> _memory;

    public ThreadSafeObservableCollection<MemoryItemRepresentative> Memory {
        get { return _memory; }
        set {
            _memory = value;

            FirePropertyChanged("Memory");
        }
    } 
```

以下是集合中包含的对象：

```
public class MemoryItemRepresentative : ViewModelBase {

        private int _index;

        public int Index {
            get { return _index; }
            set {
                _index = value;

                FirePropertyChanged("Index");
            }
        }

        private MPBILSolution _solution;

        public MPBILSolution Solution {
            get { return _solution; }
            set {
                _solution = value;

                FirePropertyChanged("Solution");
            }
        }

        public MPBILPropabilityVector PropabilityVector;

        public MemoryItemRepresentative () {

        }
    } 
```

MBILSolution 是（但这应该与该问题无关）：

```
public class MPBILSolution : ISolution {

    public int Position { get; set; }
    public BinaryNumber Value { get; set; }
    public double Fitness { get; set; }

} 
```

我现在要做的是将 DataGrid 第一列（DataGridTextColumn）绑定到 MemoryItemRepresentative 类的 Index 属性，该属性可以正常工作。

此外，我想显示 MPBILSolution 对象的内容（由属性位置、值和适应度组成）绑定到第二列（DataGridTemplateColumn）。出于这个原因，我构建了包含 Value 属性标签和 Fitness 属性标签的 DataTemplate。

我没有发布不起作用的实际绑定代码，因为我的问题似乎是 DataGrid 的相应列始终为空。至少 DataTemplate 中的静态标签（用于字幕）应该是可见的？

所以我非常感谢任何帮助。任何进一步的代码请求...

**附录：**

好吧，现在实际的绑定似乎出现了问题：在 DataGrid 中，我现在可以看到列内的 DataTemplate 但 MPBILSolution 对象的值丢失了：

这是我如何将此对象绑定到 DataTemplate：

```
DataTemplate memorySolutionCellTemplate = (DataTemplate)jobItem.FindResource("MemorySolutionCellTemplate");

        DependencyObject o = memorySolutionCellTemplate.LoadContent();

        Label l = (Label)VisualTreeAssistant.FindFrameworkElement(o, "lbl_FitnessValue");

        Binding fitnessValueBinding = new Binding();
        fitnessValueBinding.Path = new PropertyPath("Fitness");
        fitnessValueBinding.Mode = BindingMode.OneWay;
        l.SetBinding(Label.ContentProperty, fitnessValueBinding); 
```

对象 l 似乎得到了正确的 Label 对象，所以问题似乎出在这个绑定块的最后四行？

请再次帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T19:00:33.160

为什么`DynamicResource`？如果你可以`StaticResource`这样做，`DynamicResource`可以对我认为的错误保持安静（可能检查输出窗口）......

# java - 图像移动时图像上的对象不移动

> ID：11494674
> 
> 赞同：0
> 
> 时间：2012-07-15T18:55:04.457
> 
> 标签：java, swing, imageicon, zooming

我有两节课。第一个`JPanelImage`，添加一个`Image`到我的`JPanel`。第二个 ,`myObjet`代表我要添加到我的`Image`. 可以移动，`Image`可以缩放。

问题是当我移动图像时，对象保持固定。

类`JImagePanel`：

```
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.MediaTracker;
import java.awt.Panel;
import java.awt.Toolkit;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.event.MouseMotionAdapter;

class JImagePanel extends Panel{
    private static final long serialVersionUID = 5375994938523354306L;
    private  MediaTracker tracker;
    private Image img;
    private Dimension imgSize,iniSize;
    private int zoom = 0 ;
    private int MouseX;
    private int MouseY;
    int transX=0;
    int transY=0;

    public JImagePanel(String file){
        //setSize(100,200);
        img=Toolkit.getDefaultToolkit().getImage(file);
    setLayout(null);
        tracker=new MediaTracker(this);

        tracker.addImage(img,0);

        addMouseListener(new MouseAdapter() {
            @Override
            public void mousePressed(MouseEvent e) {
                MouseX = e.getX();
                MouseY = e.getY();
            }
        });

        addMouseMotionListener(new MouseMotionAdapter() {
            @Override
            public void mouseDragged(MouseEvent e) {
                transX += e.getX()-MouseX;
                transY += e.getY()-MouseY;
                MouseX = e.getX();
                MouseY = e.getY();

                repaint();
            }
        });

        try{
            tracker.waitForAll();
        }
        catch(Exception ie){}
        imgSize=iniSize=new Dimension(img.getWidth(this),img.getHeight(this));
    }

    public Dimension getPreferredSize(){
        return new Dimension(imgSize);
    }

    public void paint(Graphics g){
        super.paint(g);
        if(imgSize.width<=iniSize.width) {
            imgSize=iniSize; 
        }

        g.drawImage(this.img, (getWidth()-imgSize.width)/2+transX, (getHeight()-imgSize.height)/2+transY, imgSize.width,imgSize.height,this);
    }
    public void zoomIn(){
        int x=10*imgSize.width/100; 
        int y=10*imgSize.height/100;
        imgSize=new Dimension(imgSize.width+x,imgSize.height+y); 
        if(imgSize.width>iniSize.width){
            setSize(imgSize);
            getParent().doLayout();
        }
        repaint();
    }
    public void zoomOut(){
        int x=10*imgSize.width/100;
        int y=10*imgSize.height/100;
        imgSize=new Dimension(imgSize.width-x,imgSize.height-y);
        if(getWidth()>iniSize.width)
        {
            setSize(imgSize);
            getParent().doLayout();

        }
        repaint();
    }

    public int getZoom() {
        return zoom;
    } 
```

类`myObjet`：

```
import java.awt.BorderLayout;

import javax.swing.ImageIcon;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;

public class myObjet extends JPanel {

    JLabel lblName,lblAct,lblSeuil ;
    JPanel panelObjet;

    public myObjet(String NameObjet ,double activite  )
    {
        ImageIcon img = createImageIcon("images/Source.png");
        lblName = new JLabel(img);
        lblAct = new JLabel(String.valueOf(activite));
        panelObjet = new JPanel();
        panelObjet.setToolTipText(NameObjet);
        panelObjet.setLayout(new BorderLayout());
        panelObjet.add("North",lblName);
        panelObjet.add("South",lblAct);
       add(panelObjet);
       isOpaque();
    }

    public ImageIcon createImageIcon(String path) {
        java.net.URL imgURL = getClass().getResource(path);
        if (imgURL != null) {
            return new ImageIcon(imgURL);
        } else {
            JOptionPane.showMessageDialog(null, "Cette image n'existe pas : " + path, "Erreur", JOptionPane.ERROR_MESSAGE);
            //  System.err.println("L'image n'est pas dans : " + path);
            return null;
        }
    }
    public boolean isOpaque()
    {
        return true ; 
    }
} 
```

* * *

MYObject 是单独的，我将此对象添加到此图像的面板中。

这是我如何使用这些类的具体示例

```
public static void (String [] args )
   {
imagePanel = new JImagePanel("/home/Image.png");
p = new JPanel();
        p.setLayout(new FlowLayout());
     //   p.setBounds(0,0,0,0);
        p.add(getImagePanel());
        ple2.add("Center",p);

} 
```

2/ 在行动中执行：

```
public void actionPerformed(ActionEvent ev) {

    Object sourceEv = ev.getSource() ; 

    if(sourceEv == action.jpfI.btnFrame[4])
    {   
        df =  new DecimalFormat("0.00");

        int x = Integer.valueOf(action.jpfI.lblTxt[4].getText());
        int y =Integer.valueOf(action.jpfI.lblTxt[5].getText()) ;
        x =(int)(x/0.26) ;
        y =(int)(y/0.26):

        objet = new myObjet("islem","0.002");
        objet.setBounds(x,y , 50,50);

        action.getImagePanel().addImage(objet);
        action.repaint();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T00:33:31.020

好的，我遇到了三个问题。

首先：图像窗格上没有布局管理器。没什么大不了的，但是如果您不打算使用布局管理器，那么您将负责布置任何子组件。我通过将以下内容添加到“myObjet”类来解决这个问题（并且它在错误的位置）。

```
Dimension size = getPreferredSize();
setBounds(0, 0, size.width, size.height); 
```

这确实应该由 JImagePanel 处理 - 添加布局管理器或检查 doLayout 方法。

其次：JImagePanel 是一个重量级的组件。如果可以的话，您应该避免混合使用重量较重和重量较轻的组件（除此之外还有 Z 顺序问题）。我更新了 JImagePanel 以从 JPanel 扩展。

第三：你应该很少需要重写paint方法。在您的情况下，我可以理解您为什么这样做，但是您最终所做的只是在其他所有内容之上进行绘画（并且与您使用的是重量级组件的事实混合在一起，使问题更加复杂）。

我将“paintComponent”更改为“paintComponent”，它绘制背景并使其能够正常工作。我能够移动图像并让“myObjet”可见且静止。

**更新**

好的...

```
 public void mouseDragged(MouseEvent e) {
            transX += e.getX() - MouseX;
            transY += e.getY() - MouseY;
            MouseX = e.getX();
            MouseY = e.getY();

            // Add this to your code
            for (Component comp : getComponents()) {

                comp.setLocation(transX, transY);

            }

            repaint();
        } 
```

事实上，更好的解决方案是允许父容器处理移动并在图像窗格中静态设置图像和对象（我的窗格设置为静态大小）。您在此处运行的基本想法只需将其移至容器即可。

您需要处理的唯一另一件事是窗格的 Z 顺序。

# coldfusion - 使用 Sybase 和 ColdFusion 拆分列值

> ID：11494675
> 
> 赞同：0
> 
> 时间：2012-07-15T18:55:07.083
> 
> 标签：coldfusion, sybase, coldfusion-8

我需要在我的应用程序的函数调用中从文本字符串中修剪日期。

字符串出来了`text//date`，我想用空格修剪或替换日期。列名是`overall_model`，值是`ford//1911`or `chevy//2011`，但我需要删除日期部分，这样我就可以遍历数组或列表来获得所有模型的准确计数。

问题是，如果有 a`chevy//2011`和 a `chevy//2010`，由于日期的原因，我会在表中返回两行。因此，如果我可以删除日期并循环它们，我可以获得雪佛兰的结果，有 23 个雪佛兰模型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T21:01:15.850

我有一段时间没有使用 Sybase，但我记得它的字符串函数与 MS SQL Server 非常相似。

如果`overall_model`总是包含“//”，则用于`charindex`返回分隔符的位置并`substring`检索它之前的“文本”。然后将其与 COUNT 结合起来。（如果“//”并不总是存在，您还需要添加一个`CASE`语句）。

```
 SELECT SUBSTRING(overall_model, 1, CHARINDEX('/', overall_model)-1) AS Model
          , COUNT(*) AS NumberOfRecords
   FROM  YourTable
   GROUP BY SUBSTRING(overall_model, 1, CHARINDEX('/', overall_model)-1) 
```

但是，理想情况下，“文本”和“日期”应该分开存储。这将提供更大的灵活性和更好的性能。

# sql-server - 管理工作室中的代码模板

> ID：11494678
> 
> 赞同：3
> 
> 时间：2012-07-15T18:55:36.780
> 
> 标签：sql-server, code-snippets, ssms, code-templates

我可以在管理工作室中找到以下功能吗？

我想写一个特定的词，并将其替换为指定的语句。例如：我写“ss”并替换“select * from”或写“johnid”并替换为“where id = '555'”在 Toad for Oracle 中您可能仍在：“选项 - behsvior - 模板代码 - 代码模板" [http://www.toadworld.com/Blogs/tabid/67/EntryId/343/Customizing-Toad-Code-Templates.aspx](http://www.toadworld.com/Blogs/tabid/67/EntryId/343/Customizing-Toad-Code-Templates.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T19:26:44.080

我所知道的 Management Studio 内置的任何东西都不会像您建议的那样运行。您可以在工具 > 选项 > 环境 > 键盘 > 查询快捷方式中使用一些快捷方式，但这些快捷方式*运行*代码而不是将它们粘贴到您的窗口中，因此您不能将它们用作部分语法完成。例如，如果您分配`SELECT * FROM` 给`Ctrl`+ `9`，然后打开一个新的查询窗口并按`Ctrl`+ `9`，您将有一个空的查询窗口和以下错误消息：

```
Msg 102, Level 15, State 1, Line 1
Incorrect syntax near 'FROM'. 
```

Chris 已经提到了模板，所以我不会处理这些。

在 SQL Server 2012 中，您可以使用称为 Snippets 的新功能（嗯，从 Visual Studio 回收的旧功能），我认为它比模板功能强大得多（[我在这里写过它们](http://www.mssqltips.com/sqlservertip/2589/use-sql-server-code-snippets-to-encourage-consistent-conventions/?utm_source=AaronBertrand)，[其他人做得不错在这里](http://blogs.technet.com/b/canitpro/archive/2012/05/02/the-sql-guy-post-27-increasing-developer-productivity-with-snippets.aspx)）。但我仍然认为这不是你所追求的——有一个菜单系统可以插入一个片段，到目前为止，在我的研究中，我一直无法分配一个键盘快捷键——即使有一个Snippet XML`<Shortcut></Shortcut>`中的一个空元素称为工作室没有运气）。

您还可以使用 3rd 方工具，例如 Mladen Prajdic 的免费[SSMS 工具包](http://ssmstoolspack.com/Features)。对于您想要做的事情，我认为这是最合适的，因为它允许您执行真正的扩展片段，其中替换文本根据您输入的关键字放入您的代码中并进一步击键。但是，如果您使用的是 SQL Server 2012，在发布时我们仍在等待该版本 SSMS 的兼容版本。您可能还想查看[Red-Gate 的 SQL Prompt](http://www.red-gate.com/products/sql-development/sql-prompt/)，但如果可以的话，我会先尝试 Mladen 的免费工具。我敢肯定，您可以通过标准搜索找到其他选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T12:48:08.957

此功能存在于这些免费插件中： [SSMSBoost](http://www.ssmsboost.com/Features/ssms-add-in-autoreplacements)或[SSMS 工具包](http://www.ssmstoolspack.com/Features?f=1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T19:03:18.937

使用[模板资源管理器](http://msdn.microsoft.com/en-us/library/ms174169.aspx)

SQL Server 提供了多种模板。模板是包含 SQL 脚本的样板文件，可帮助您在数据库中创建对象。第一次打开模板资源管理器时，模板的副本将放置在用户文件夹 C:\Users 中的 AppData\Roaming\Microsoft\SQL Server Management Studio\110\Templates 下。

您可以在模板资源管理器中浏览可用模板，然后打开模板以将代码合并到代码编辑器窗口中。您还可以创建自定义模板。

# wordpress - 自动将 wordpress 类别分配给帖子类

> ID：11494685
> 
> 赞同：1
> 
> 时间：2012-07-15T18:56:07.300
> 
> 标签：wordpress, wordpress-theming, categories

是否可以创建类似于此的功能

```
function add_category_automatically($post_ID) {  
    global $wpdb;  
    $postsWeWants = $wpdb->get_results("SELECT ID, post_author FROM $wpdb->posts where ID = $post_ID");  
    foreach ($postsWeWants as $postsWeWant) {  
        if(($postsWeWant->post_author != 30) && ($postsWeWant->post_author != 29) && !in_category('bundle')){  
            $cat = array(9547,9742);  
            wp_set_object_terms($post_ID, $cat, 'category', true);  
        }  
    }  
}  
add_action('publish_post', 'add_category_automatically'); 
```

但基于[帖子类](http://codex.wordpress.org/Function_Reference/post_class)而不是作者和类别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T21:21:16.843

像这样的东西应该可以解决问题：

```
function add_category_by_class($post_ID) {  
  if( in_array( 'classToCheckFor' get_post_class('', $post_ID)) ){
    $cat = array(9547,9742);
    wp_set_object_terms($post_ID, $cat, 'category', true); 
  }       
}  
add_action('publish_post', 'add_category_by_class'); 
```

# iphone - 输入类型文本在 iPhone 上不起作用

> ID：11494687
> 
> 赞同：3
> 
> 时间：2012-07-15T18:56:13.183
> 
> 标签：iphone, input, forms

我有一个非常奇怪的问题，在[这个网页上](http://www.5.fishfeedingchart.appspot.com)的文本输入在iPhone 上不起作用，即使用移动 Safari 时 iPhone 键盘不弹出。Safari 调试模式不提供任何消息。

文本框在 Android、标准 IE、Firefox 等上运行良好。

有没有人遇到过这个问题？

# ruby - ruby 中的基本 popen3 语法

> ID：11494688
> 
> 赞同：1
> 
> 时间：2012-07-15T18:56:33.037
> 
> 标签：ruby, asynchronous, popen

的以下两种用法之间有什么区别`popen3`吗？

```
html = ''
stdin, stdout, stderr = Open3.popen3("curl #{url}")
html << stdout.read 
```

和

```
html = ''
Open3.popen3("curl #{url}") do |stdin, stdout, stderr, wait_thr|
  result << stdout.read
end 
```

我想知道第二种语法是否会导致某些线程阻塞。我对异步代码相当陌生，因此非常感谢任何见解！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T19:15:17.960

在第一种形式中，您应该明确关闭`stdin`和。`stdout``stderr`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-15T15:20:30.127

您遇到阻塞行为的原因是因为您没有关闭您打开的程序（curl）的标准输入`popen3`- 所以 curl 仍在等待您的输入。

完成向程序发送数据后，您应该通过显式关闭标准输入`stdin.close`，否则它将继续期待标准输入上的输入，并`popen3`会挂起。

```
 stdin.close    # always close your stdin after you are done sending commands/data
                # or popen3 will appear to hang 
```

# internationalization - 在 J2ME 应用程序中实现多语言支持的最佳方式是什么？

> ID：11494691
> 
> 赞同：0
> 
> 时间：2012-07-15T18:57:39.780
> 
> 标签：internationalization, multilingual, j2mepolish

在 J2ME 应用程序中实现多语言支持的最佳方式是什么？我希望我的应用程序使用不同的语言，但据了解还没有找到任何合适的方法来做到这一点。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T06:47:22.890

嘿，您可以查看 j2me Polish，它支持本地化并且非常易于使用

# java - HttpsURLConnection 和 Cookie

> ID：11494693
> 
> 赞同：8
> 
> 时间：2012-07-15T18:58:27.160
> 
> 标签：java, cookies, http-post, httpsurlconnection

基本上我只想从服务器获取cookie。这是简单的代码，但我想获取每个 cookie 是不够的，例如 sessionID 等。

```
import java.net.*;
import java.util.*;

    public class Cookie {

    public static void main(String[] args) {

        try {
            URL url = new URL("http://www.google.com/");
            URLConnection conn = url.openConnection();
            System.out.println(con.getHeaderField("Set-Cookie"));

        } catch (Exception e) { }
    }
} 
```

结果显示我只得到一个 cookie：

```
NID=61=nNSsAl4g7DfxqHE7t__ghfoCc_J-RmY7PaTNoPOd_khLdvvuqI-fnteHgnQXMzmxj_C5HdMozcGfOTt8PvePLKpbDdUlzdVZiRKwNpQIej6_T69jt9C7Oi6E4F-gWPHD; expires=Mon, 14-Jan-2013 17:16:40 GMT; path=/; domain=.google.pl; HttpOnly 
```

Firefox 获得了 NID 和 PREF，因此无法正常工作。

有什么方法可以获取 PREF cookie？

谁能告诉我这是发送 POST 的正确方式（下面的代码）。

```
import java.io.*;
import java.net.URL;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import javax.net.ssl.HttpsURLConnection;

public class Cookie_Example {

    public static void main(String[] args){

        try{
            String https_url = "https://ssl.filmweb.pl/j_login";
            URL url = new URL(https_url);
            String post = "_login_redirect_url=http%253A%252F%252Fwww.filmweb.pl%252F&j_username=test.filmweb%40gmail.com&j_password=test.filmweb&_rememberMe=on&pass=zaloguj";

            HttpsURLConnection con = (HttpsURLConnection)url.openConnection();
            con.setInstanceFollowRedirects(false);
            con.setDoInput(true);
            con.setDoOutput(true);
            con.setRequestMethod("GET");
            con.setRequestProperty("Host", "ssl.filmweb.pl");
            con.setRequestProperty("User-Agent", "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:13.0) Gecko/20100101 Firefox/13.0.1");
            con.setRequestProperty("Accept","text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8");
            con.setRequestProperty("Accept-Language","pl,en-us;q=0.7,en;q=0.3");
            con.setRequestProperty("Accept-Encoding","gzip, deflate");
            con.setRequestProperty("Connection","keep-alive");
            con.setRequestProperty("Referer","https://ssl.filmweb.pl/login");
            con.setRequestProperty("Content-Type","application/x-www-form-urlencoded");
            con.setRequestProperty("Content-Length",post.length()+"");
            DataOutput output = new DataOutputStream(new BufferedOutputStream(con.getOutputStream()));
            output.write(post.getBytes());

            Map<String, List<String>> hf = con.getHeaderFields();

            Iterator it = hf.entrySet().iterator();
            while (it.hasNext()) {
                Map.Entry pairs = (Map.Entry)it.next();
                System.out.println(pairs.getKey() + " = " + pairs.getValue());
            }
        } catch (Exception e) {
        }
    }
} 
```

结果是空cookie，

```
Set-Cookie = [_artuser_rememberMe=;Path=/;Domain=filmweb.pl;Expires=Thu, 01-Jan-1970 00:00:00 GMT] 
```

[http://img72.imageshack.us/img72/1134/testgof.jpg](http://img72.imageshack.us/img72/1134/testgof.jpg)

来自篡改数据的屏幕

这意味着此代码也不起作用。如何获得 __utma、__utmz 等 cookie？谁能帮我？哪些书会有所帮助？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-08T11:19:43.790

我认为通过您的陈述，`con.getHeaderField("Set-Cookie")"`您只能检索一个标题。但也许服务器会在两个不同的标头中向您发送两个 cookie。

我使用另一个语句来检索 cookie 的所有标头：

```
List<String> cookies = connection.getHeaderFields().get("Set-Cookie"); 
```

要查看您发送到服务器的内容以及服务器发送给您的内容，我建议在您的程序（或 Web 导航器）和服务器之间使用代理。也许`Charles proxy`可以帮助你。

# css - 如何在一行中将固定和 % 元素并排放置

> ID：11494695
> 
> 赞同：2
> 
> 时间：2012-07-15T18:58:36.467
> 
> 标签：css, layout, fixed

我希望通过以下方式将容器填充在一行中：

*   60px 固定黄色

然后是剩余空间：

*   20% 蓝色
*   60% 黑色
*   20% 红色

这是我到目前为止所拥有的（不起作用）：

**CSS**

```
body {
    background-color: #fff;
    padding: 0px;
    margin:100px;
}

.container {
    overflow: hidden;
    padding: 0px;
    margin: 0px auto;
    width: 90%;
    background-color: white;
    border-radius: 10px;
    box-shadow: 0px 0px 6px 0px #ccc;
}

.blue_container {
    background-color: blue;
    width: 20%;
    float:left;
}

.black_container {
    width:60%;
    float:left;
    background-color: black;
}

.red_container {
    width: 20%;
    float:left;
    background-color: red;

}

.fixed_conatiner {
    float:left;
    background-color: yellow;
    width: 60px;
}

.transparent_container[type="fixed"] {
    padding:0px;
    margin:0px;
    width: 60px;

}

.transparent_container[type="avazmishe"] {
    padding:0px;
    margin:0px;
} 
```

**HTML**

```
<div class="container">
    <div class="transparent_container" type="fixed">
        <div class="fixed_container"><br/></div>
    </div>
    <div class="transparent_container" type="resizable">
        <div class="blue_container"><br/></div>
        <div class="black_container"><br/></div>
        <div class="red_container"><br/></div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T19:04:34.917

您在正确的轨道上，您所要做的就是从具有左边距的流体容器中减去固定容器宽度。尝试这个：

```
.transparent_container {
    margin-left: 60px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T19:09:31.877

这是您的回答 Meysam：

[http://jsfiddle.net/EcZ5j/](http://jsfiddle.net/EcZ5j/)

HTML：

```
<div class="container">
            <div class="transparent_container" type="fixed">
                <div class="fixed_conatiner">
                    <br/>
                </div>
            </div>
            <div class="transparent_container transparent_container_2" type="resizable">
                <div class="blue_container">
                    <br/>
                </div>
                <div class="black_container">
                    <br/>
                </div>
                <div class="red_container">
                    <br/>
                </div>
            </div>
        </div> 
```

CSS：

```
.container {
    overflow: hidden;
    padding: 0px;
    margin: 0px auto;
    width: 90%;
    background-color: white;
    border-radius: 10px;
    box-shadow: 0px 0px 6px 0px #ccc;
}

.blue_container {
    background-color: blue;
    display: inline-block;
    width: 20%;
}

.black_container {
    width:60%;
    display:inline-block;
    background-color: black;

}

.red_container {
    width: 20%;
    display:inline-block;
    background-color: red;

}

.fixed_conatiner {
        float:left;
        background-color: yellow;
        width: 60px;
}

.transparent_container[type="fixed"] {
    padding:0px;
    margin:0px;
    width: 60px;

}

.transparent_container_2{
    padding-left: 60px;
    word-spacing: -1em;
}

.transparent_container[type="avazmishe"] {
    padding:0px;
    margin:0px;
} 
```

# git - Git-status，部分文件夹报告

> ID：11494696
> 
> 赞同：0
> 
> 时间：2012-07-15T18:58:39.273
> 
> 标签：git, git-status

从这些文件夹外部调用时，有没有办法告诉`git-status`忽略特定文件夹的内容？

我只想在输入这些文件夹并调用`git-status`. 如果可能的话，我希望有相同的行为，但仅适用于未跟踪的文件。

例子：

```
$ git init foo
$ cd foo
$ mkdir bar
$ git add bar

foo$ touch bar/README
foo$ git status ----> Empty
foo$ cd bar
foo/bar$ git status -----> README is un-tracked 
```

# ssl - javax.net.ssl.SSLPeerUnverifiedException：对等体未使用 Selenium 和 HtmlUnit 进行身份验证

> ID：11494699
> 
> 赞同：1
> 
> 时间：2012-07-15T18:59:06.063
> 
> 标签：ssl, selenium, htmlunit

我正在尝试使用 Selenium 加载页面进行测试，但我不断收到此 javax.net.ssl.SSLPeerUnverifiedException: peer not authenticated 错误。现在我尝试了许多不同的方法来允许它，但它根本行不通！

```
WebDriver driver = new HtmlUnitDriver(){
            protected WebClient modifyWebClient(WebClient client){
                try {                   
                    client = new WebClient(BrowserVersion.FIREFOX_3_6);
                    client.setUseInsecureSSL(true);
                    client.setUseInsecureSSL(true);
                    client.setThrowExceptionOnScriptError( false );
                    client.setPrintContentOnFailingStatusCode( true );
                    client.setThrowExceptionOnFailingStatusCode( true );
                    client.setCssEnabled( true );
                    client.setJavaScriptEnabled( true );
                    XTrustProvider.install(); // Allow all certs
                    SSLUtilities.trustAllHostnames();// to turn off the default hostname verification on HTTPS connection;
                    SSLUtilities.trustAllHttpsCertificates();// to turn off the default certificate validation on HTTPS 
                } catch (GeneralSecurityException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                 return client;
               }
            } ; 
```

有人有建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:58:49.930

我已经想通了。这似乎是 HtmlUnit 中的一个错误，当前可用的 2.9 版本于 2011 年发布。我从源代码构建它，现在它可以工作了！

# php - PHP 将 MySQL 错误写入文件

> ID：11494701
> 
> 赞同：1
> 
> 时间：2012-07-15T18:59:24.023
> 
> 标签：php, mysql

我如何将 MySQL 错误写入文件而不是向用户显示？

这是我到目前为止...

```
if (!mysql_query($sql_query,$connection))
  {
  die('Error: ' . mysql_error());
  }
echo "Success!"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T19:02:53.237

为此，您可以使用 php 中的[error_log 函数](http://php.net/manual/en/function.error-log.php)。

```
error_log("You messed up!", 3, "/var/tmp/my-errors.log"); 
```

编辑：所以在您的情况下，这将如下所示（尽管我会使用不同的 if 语句）

```
if (!mysql_query($sql_query,$connection))
{
    error_log(mysql_error() . "\n", 3, "/var/tmp/my-errors.log");
}
echo "Success!"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T19:23:02.757

使用[error_log](http://www.php.net/manual/en/function.error-log.php)或[fopen](http://us3.php.net/manual/en/function.fopen.php) /fwrite/fclose/etc。

我经常使用PHP 中的[set_error_handler](http://www.php.net/manual/en/function.set-error-handler.php)之类的东西创建自己的错误处理程序，并使用[trigger_error](http://www.php.net/manual/en/function.trigger-error.php)捕获所有错误并将它们写入文件。这对您来说可能是一个更好的方案；无需编写大量 error_log()，您只需创建一个错误处理函数，然后使用 trigger_error。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T19:05:55.197

首先，如果您不想向用户显示错误消息，则不应使用 die。

其次，您必须将错误消息记录到文件中，而不是使用 die。如果你正在使用一些日志库，你可能会将错误输出到一些日志，否则你可能想看看 PHP 中的文件处理。

链接 - [http://davidwalsh.name/basic-php-file-handling-create-open-read-write-append-close-delete](http://davidwalsh.name/basic-php-file-handling-create-open-read-write-append-close-delete)

# android - 跨平台游戏开发

> ID：11494706
> 
> 赞同：2
> 
> 时间：2012-07-15T19:00:00.537
> 
> 标签：android, ios, frameworks

我正在寻找一些跨平台的游戏开发框架。我关注的游戏不需要依赖高端平台的资源。只是一个简单的纸牌游戏。我相信 HTML5 平台可以正常工作，但我不确定是哪一个。

其次，我想在游戏中实现多人功能。有两件事我不确定

1.  如果我想让四个朋友玩一个游戏，我应该怎么做？移动平台是否具有 LAN 或其他一些互连选项？
2.  我也想提供在线多人游戏选项。有没有提供这种功能的服务器/框架？

PS：这是我在任何移动应用程序上的第一个项目。电晕很好，但它不是免费的。

编辑：我正在寻找一些**免费**的框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T20:44:51.133

如果是移动应用程序，请尝试 Corona SDK。您可以使用它为 iOS、Android 以及我认为 NOOK 和 Kindle Fire 制作游戏（或应用程序）。它也很容易学习。我十二岁时开始使用它，一个小时就学会了。一个简单的纸牌游戏可以在几个小时内完成。

至于多人游戏，您可以在本地和在线多人游戏中使用 AutoLAN（[http://developer.coronalabs.com/code/autolan](http://developer.coronalabs.com/code/autolan)或[http://www.mydevelopersgames.com/AutoLAN/](http://www.mydevelopersgames.com/AutoLAN/)），尽管我从未尝试过. 它曾经是 20 美元，但现在它是免费的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T19:21:42.587

**(1)**理论上，你可以构建一个通过 SMS 消息或类似古怪的东西进行通信的网络游戏。但是现在普遍的假设是，在手机上运行应用程序和游戏的人可以通过 3G、4G、WiFi/等方式上网。

*（在一个没有信号的偏远山区编写一个可以通过蓝牙在两部手机上玩的游戏可能是一个有趣的练习……但我不确定这个市场有多大。）*

因此，决定归结为联网应用程序的常见决定。您是否要使其成为[点对点，](https://stackoverflow.com/questions/5041426/peer-to-peer-communication-options)以便所涉及的唯一软件是每个玩家手机上的一个应用程序？或者您是否会在 Internet 上安装一个服务器，每个客户端都连接到该服务器，并且游戏在没有任何玩家直接连接到任何其他人的情况下运行？

*（由于各种原因，后者更容易。点对点纸牌游戏难以进行的一个更有趣的原因与一个客户在没有“游戏大师”的情况下信任另一个客户有关。维基百科关于[心理扑克](http://en.wikipedia.org/wiki/Mental_poker)的文章可能很有启发性.)*

* * *

**(2)**我自己不能保证，但网上的人似乎喜欢安卓上的[法师](http://code.google.com/p/mages/)。iPhone，我不知道。

但是，如果您将此作为学习练习，您可能会尝试从头开始修补，以便更好地处理问题，而不是跳入任何特定框架的细节。使用 JSON 消息并与在您觉得最舒服的任何服务器端环境中编写的简单服务器通信（Node？Rails？Django？ ~~PHP？~~（不！）：P）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T19:25:15.087

cocos2d-x 是最著名的 2D 游戏跨平台游戏引擎。

这是链接：[Cocos2d-x](http://www.cocos2d-x.org/)

这是关于最佳跨平台游戏引擎的一些很好的讨论。[点击这里](http://www.cocos2d-iphone.org/forum/topic/23726)

# android - 在android中现有列表视图的顶部附加元素

> ID：11494707
> 
> 赞同：0
> 
> 时间：2012-07-15T19:00:19.233
> 
> 标签：android

我有一个活动列表视图，我想在它的顶部附加数据。当活动加载时，列表视图被填充。现在当用户单击一个按钮时，我带来了额外的数据，但我希望这些数据附加在顶部的列表视图。我怎样才能做到这一点？

我使用`baseAdapter`.Heres 我的 baseAdapter 类制作了自定义列表视图：

```
public class LazyAdapterUserAdminChats extends BaseAdapter{

private Activity activity;
private ArrayList<HashMap<String,String>> hashmap;
private static LayoutInflater inflater=null;

public LazyAdapterUserAdminChats(Activity activity,ArrayList<HashMap<String,String>> hashMaps)
{
    this.activity=activity;
    this.hashmap=hashMaps;
    LazyAdapterUserAdminChats.inflater=(LayoutInflater)this.activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

@Override
public int getCount() {
    return hashmap.size();
}

@Override
public Object getItem(int position) {
    return position;
}

@Override
public long getItemId(int position) {
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    View view=convertView;

    if(convertView==null)
        view=inflater.inflate(R.layout.useradminchat,null);

    TextView username=(TextView)view.findViewById(R.id.UAC_userNametext);
    TextView messagetext=(TextView)view.findViewById(R.id.UAC_messagetext);
    TextView messageDate=(TextView)view.findViewById(R.id.UAC_dates);

    HashMap<String,String> map=hashmap.get(position);

    username.setText(map.get(HandleJSON.Key_username));
    messagetext.setText(map.get(HandleJSON.Key_messageText));
    messageDate.setText(map.get(HandleJSON.Key_messageDate));

    return view;
}

} 
```

以下是我如何从我的活动中为 listview 功能设置适配器。

```
 private void ShowListView(ArrayList<HashMap<String,String>> chat)
         {
             try
             {

                 ListView lv=(ListView)findViewById(android.R.id.list);
                 adapter = new LazyAdapterLatestChats(this,chat);
                 lv.setAdapter(adapter);
             }
             catch(Exception e)
             {
                Toast.makeText(this, e.getMessage(), Toast.LENGTH_LONG).show();
             }
         } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T19:04:15.367

首先，不要使用哈希图来保存您的数据。您更愿意使用 ArrayList，因为您将进行迭代。哈希图通常用于快速信息检索，通常不用于迭代（不过，这可以通过 来完成`Iterator`）。

接下来，创建一个方法`LazyAdapterUserAdminChats`来将内容添加到数组列表的头部。

最后，`notifyDataSetChanged`在添加到数组列表的头部时调用。

例子：

```
public class LazyAdapterUserAdminChats extends BaseAdapter{

private Activity activity;
private ArrayList<MyObj> al;
private static LayoutInflater inflater=null;

public LazyAdapterUserAdminChats(Activity activity,ArrayList<MyObj> al)
{
    this.activity=activity;
    this.al=al;
    LazyAdapterUserAdminChats.inflater=(LayoutInflater)this.activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

// other methods
....

public void addToHead(MyObj m)
{
    this.al.add(m, 0);
    notifyDataSetChanged();
}

} 
```

您的自定义类可以是您想要的任何东西。例如，

```
public class MyObj 
{
    String hashMapKey, hashMapValue;
} 
```

# javascript - 使用 javascript 将页面从博客重定向到域

> ID：11494708
> 
> 赞同：0
> 
> 时间：2012-07-15T19:00:21.327
> 
> 标签：javascript, html

我想将页面从我的博客重定向到我拥有的域。例如这个网址：

```
the-vampire-diaries.mihanblog.com/post/300 
```

应该重定向到这个：

```
tvdfans.ir/post/300 
```

问题是我只能访问样式代码而不是文件。我想要一个可以做到这一点的 JavaScript 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T19:02:34.123

您不能在样式表中编写 javascript 代码。

如果您有权访问 html 模板，则可以使用

```
<script>
    document.location.hostname = 'example.org';
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T19:07:23.030

是的，您可以使用 javascript 来实现这一点

```
**Example:**
<script langauge="text/javascript">
window.location.replace(someUrl");
</script> 
```

# jquery - iScroll 在重新加载页面之前不会初始化

> ID：11494709
> 
> 赞同：0
> 
> 时间：2012-07-15T19:00:27.847
> 
> 标签：jquery, jquery-mobile, iscroll4

我在我的 jQuery 移动项目中没有正确初始化 iScroll 时遇到问题。iScroll 插件仅在一个子页面中使用，以允许在大图像上水平滚动（需要使其在 Android 上工作，因为他们的浏览器不支持开箱即用）...

如果您直接访问 URL，或者手动刷新它，该插件可以正常工作。但是，当您从另一个起点通过菜单访问它时，它就不起作用了。我猜这与 jQuery mobile 中的 ajax 加载有关，但是将 data-ajax="false" 设置为链接不是一个选项，因为我需要整个事情作为主屏幕应用程序也能正常工作iOs（由于某种奇怪的原因，带有 data-ajax="false" 的链接会在新的 Safari 窗口中打开）。

在头部标签中：

```
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js
</script>
<script type="application/javascript" src="js/iscroll.js"></script>
<script type="text/javascript">
var myScroll;
function loaded() {
    setTimeout(function () {
        myScroll = new iScroll('wrapper');
        refresh();
    }, 100);
}
window.addEventListener('load', loaded, false);
</script> 
```

在内容部分：

```
<div data-role="content">
  <div id="wrapper">
    <div id="scroller">
    <img src="images/turkart.png" />
    </div>
  </div>
</div> 
```

有什么方法可以在加载后强制刷新实际页面，还是有其他方法可以强制 iScroll 正确初始化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T01:43:42.473

To answer you second question, i.e. is there another way: There is a very neat iScroll plugin for jQM at [https://github.com/watusi/jquery-mobile-iscrollview](https://github.com/watusi/jquery-mobile-iscrollview) that is very easy to implement and no need to worry about initialization problems

# asp.net-mvc - BootStrap 导航栏在每次导航点击时重新加载

> ID：11494713
> 
> 赞同：1
> 
> 时间：2012-07-15T19:01:07.837
> 
> 标签：asp.net-mvc, twitter-bootstrap, nav

我有一个 twitter 引导导航栏，但每次我在链接上导航时，它显然会用其他所有内容重新加载导航栏。不应该这样做吗？如果没有，我会喜欢的。我不确定我的 _Layout 是否做错了什么。关于为什么我的导航栏可以重新加载的任何想法？

```
 <link href="../../bootstrap/css/bootstrap.css" rel="stylesheet" type="text/css" />
    <link href="../../bootstrap/css/bootstrap-responsive.css" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/dt-min.js")" type="text/javascript"></script>

    <link href="../../Content/Reflection.css" rel="stylesheet" type="text/css" />
     @Styles.Render("~/Content/themes/base/css", "~/Content/css")
     @Scripts.Render("~/bundles/modernizr")

</head>
<body>
    <header>
        <div class="navbar">
          <div class="navbar-inner">
        <div class="container">
            <div class="float-left" style="width:315px">
                <p class="site-title">@Html.ActionLink("Kinfolk", "Index", "Home", new { @style = "color:Orange" })</p>
            </div>

            <div class="float-center">
                <section id="login">
                    @Html.Partial("_LoginPartial")
                </section>
                <nav>

                    <ul id="menu" class="nav">

                        <li>
                         <div class="reflection">
                        <a href="@Url.Action("AllWallPost", "Home")" title="Home">
                            <img src="../../Images/home (1).ico" />
                        </a>  
                         </div>                        
                        </li>  

                        <li>
                         <div class="reflection">
                         <a href="@Url.Action("UserProfile", "UserProfile")" title="My Profile">
                         <img src="../../Images/user.ico" />
                         </a>                           
                         </div>
                        </li>

                        <li>
                         <div class="reflection">
                         <a href="#" title="Events">
                         <img src="../../Images/calendar_2.ico" />
                         </a>                           
                         </div>
                        </li>

                       </li>
                    </ul>

                </nav>
            </div>

        </div>
        </div>
        </div>
    </header>
    <div id="body">
        @RenderSection("featured", required: false)
        <section class="content-wrapper main-content clear-fix">
            @RenderBody()
        </section>
    </div>
    <footer>
        <div class="content-wrapper">
            <div class="float-left">
                <p>&copy; @DateTime.Now.Year - My ASP.NET MVC Application</p>
            </div>
            <div class="float-right">
                <ul id="social">
                    <li><a href="http://facebook.com" class="facebook">Facebook</a></li>
                    <li><a href="http://twitter.com" class="twitter">Twitter</a></li>
                </ul>
            </div>
        </div>                            
    </footer>

    @Scripts.Render("~/bundles/jquery")
    @RenderSection("scripts", required: false)
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T19:44:32.237

根据您提供的代码，单击链接时页面重新加载是正常的。

如果您希望在不重新加载所有内容的情况下更改页面，则必须使用一些 Ajax (JavaScript) 以及`Request.IsAjaxRequest()`(controller) 和`PartialView`(view) 的组合。

这些关键字有很多资源。

# php - PHP：将图像名称插入数据库时 出现重复/空白值

> ID：11494716
> 
> 赞同：2
> 
> 时间：2012-07-15T19:01:49.707
> 
> 标签：php

我目前将图像名称存储在 MySQL 数据库中，以便更轻松地检索实际图像。我创建的存储名称的 php 代码有问题。未经我的许可，正在向数据库中插入重复和空白的内容。

有没有办法避免在页面刷新时插入重复或空白值的问题？

![在此处输入图像描述](../Images/63eab3474f60859758099520b4946915.png)

```
<?
$images = explode(',', $_GET['i']);

$path = Configuration::getUploadUrlPath('medium', 'target');

if (is_array($images)) {
    try {
        $objDb = new PDO("mysql:host=" . $host . ";dbname=" . $db, $user, $pass);
        $objDb->exec('SET CHARACTER SET utf8');
    } catch (PDOException $e) {
        echo 'There was a problem';
    }

    $sql = "INSERT INTO `urlImage` (`image_name`) VALUES ";

    foreach ($images as $image) {
        $value[] = "('" . $image . "')"; // collect imagenames
    }

    $sql .= implode(',', $value) . ";"; //build query
    $objDb->query($sql);
}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T19:27:50.450

我将内容重新格式化为我认为应该更具可读性并且更容易区分代码中发生的事情的内容。我还更新了您的查询，以展示如何正确“清理”您的输入。

我仍然认为您将数据发送到服务器的过程是错误的，但希望这段代码对您有所帮助。我也会更面向对象地做这件事。但我觉得这让你的问题的范围有点=P。这有点像其他人所说的那样，您的代码逻辑*只是稍微*偏离了。

至于重复的事​​情，在将文件添加到数据库之前检查文件是否已经存在。

```
<?php
$_GET['i'] = 'file1.png, file2.png, file3.png'; // This is just for testing ;].

$images = retrieve_images();
insert_images_into_database($images);

function retrieve_images()
{
    //As someone else pointed out, you do not want to use GET for this and instead want to use POST. But my goal here is to clean up your code
    //and make it work :].

    $images = explode(',', $_GET['i']);
    return $images;
}

function insert_images_into_database($images)
{
    if(!$images)//There were no images to return
        return false;

    $pdo = get_database_connection();

    foreach($images as $image)
    {
        $sql = "INSERT INTO `urlImage` (`image_name`) VALUES ( ? )";
        $prepared = $pdo->prepare($sql);
        $prepared->execute(array($image));
    }
}

function get_database_connection()
{
    $host = 'localhost';
    $db = 'test';
    $user = 'root';
    $pass = '';
    try {
        $pdo = new PDO("mysql:host=" . $host . ";dbname=" . $db, $user, $pass);
        $pdo->exec('SET CHARACTER SET utf8');

        } catch(PDOException $e) {
            die('There was a problem');
        }

    return $pdo;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T19:13:54.867

首先，您应该检查`foreach`语句中的空白名称，例如：

```
foreach ($images as $image) {
    if($image!='') {
        $value[] = "('".$image."')"; // collect imagenames
    }
} 
```

其次，您应该注意`header("Location: ...");`防止用户刷新页面。

第三，您还可以设置会话变量或 cookie 以防止用户两次上传相同的图像。

最后，如果图像名称是唯一的，您可以在图像名称上设置一个[UNIQUE 索引](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)。然后使用`INSERT IGNORE`，这将删除所有重复项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T19:12:41.057

避免刷新时重复的最简单方法是在 POST 之后重定向页面，所以只要这样做就`header("Location: {$_SERVER['PATH_INFO']}");`可以解决这个问题。

为避免空条目尝试`is_array($images) && count($images)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T19:09:27.783

尝试设置会话变量，并在未设置会话变量时告诉它退出或重定向。

例如

```
if (!isset($_SESSION['session_name']))
{
   exit();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-15T19:09:37.510

您可能应该更改以下行：

```
if(is_array($images)){ 
```

对此：

```
if(!empty($images) && is_array($images)){ 
```

即使没有提供“i”参数，explode() 也会返回一个空数组

# jquery - jqplot线的高级风格化

> ID：11494717
> 
> 赞同：1
> 
> 时间：2012-07-15T19:01:59.593
> 
> 标签：jquery, jqplot

我正在尝试对我的 jqplot 线图进行一些高级样式化。我试图让它像一个心脏监视器。

为了做到这一点，我需要完全自定义阴影以提供“发光”效果......但是自定义阴影比 .js 文件允许的范围更远是困难的。

更困难的是——有什么办法可以“脉冲”这条线吗？最好是在给定的时间间隔内通过线路发送脉冲，或者只是闪烁它的颜色/阴影或其他东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:57:59.820

只是一个快速的想法，但是如果您绘制一条基线（以“心脏”脉冲的形状），然后在其顶部绘制第二条带有“发光”效果的线（我在想一条白色/银色线那是 70% 透明的）。然后，您可以一遍又一遍地为“发光”线设置动画。

使用内置动画和 setTimeout，以相同的速度一遍又一遍地调用 replot。

# android - Gps 通知图标不闪烁

> ID：11494720
> 
> 赞同：1
> 
> 时间：2012-07-15T19:02:01.220
> 
> 标签：android, gps

我正在通过以下代码在我的 android 手机上尝试 google maps api。我的应用程序正在定位我的手机并且运行良好，但 gps 通知图标不闪烁。如何在定位我的手机时闪烁 gps 图标。

感谢您的回复。

显现：

```
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/> 
```

和代码：

```
import java.util.List;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.MyLocationOverlay;
import com.google.android.maps.Overlay;
import com.google.android.maps.OverlayItem;

import android.content.Context;
import android.content.Intent;
import android.graphics.drawable.Drawable;
import android.location.Criteria;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.location.LocationProvider;
import android.os.Bundle;
import android.provider.Settings;
import android.widget.EditText;
import android.widget.Toast;

public class main extends MapActivity {

    MapController mControl;
    GeoPoint geoP;
    MapView mapV;
    MyLocationOverlay compass;
    EditText etext;
    String provider;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        etext = (EditText) findViewById(R.id.latLong);
        mapV = (MapView) findViewById(R.id.mapView);
        mapV.displayZoomControls(true);
        mapV.setBuiltInZoomControls(true);

        LocationManager locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        boolean enable = locationManager
                .isProviderEnabled(LocationManager.GPS_PROVIDER);
        if (!enable) {
            startActivity(new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS));
        }

        Criteria criteria = new Criteria();
        //criteria.setAccuracy(Criteria.ACCURACY_FINE);
        provider = locationManager.getBestProvider(criteria, false);

        Location location = locationManager.getLastKnownLocation(provider);
        Double lat = location.getLatitude() * 1E6;
        Double longi = location.getLongitude() * 1E6;
        geoP = new GeoPoint(lat.intValue(), longi.intValue());

        List<Overlay> mapOverlays = mapV.getOverlays();
        Drawable drawable = this.getResources().getDrawable(R.drawable.androidmarker);
        compass = new MyLocationOverlay(this, mapV);

        HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable, this);
        OverlayItem overlayitem = new OverlayItem(geoP, "Hola, Mundo!","I'm in Mexico City!");

        itemizedoverlay.addOverlay(overlayitem);

        mapV.getOverlays().add(compass);
        mapOverlays.add(itemizedoverlay);

        mControl = mapV.getController();
        mControl.animateTo(geoP);
        mControl.setZoom(5);
        mControl.setCenter(geoP);

        locationManager.requestLocationUpdates(provider, 0, 0,
                new LocationListener() {

                    public void onStatusChanged(String provider, int status,
                            Bundle extras) {
                        if (status == LocationProvider.AVAILABLE) {
                            Toast.makeText(getApplicationContext(),
                                    "LocationProvider.AVAILABLE",
                                    Toast.LENGTH_SHORT).show();
                        } else if (status == LocationProvider.TEMPORARILY_UNAVAILABLE) {
                            Toast.makeText(getApplicationContext(),
                                    "LocationProvider.TEMPORARILY_UNAVAILABLE",
                                    Toast.LENGTH_SHORT).show();
                        } else if (status == LocationProvider.OUT_OF_SERVICE) {
                            Toast.makeText(getApplicationContext(),
                                    "LocationProvider.OUT_OF_SERVICE",
                                    Toast.LENGTH_SHORT).show();
                        }

                    }

                    public void onProviderEnabled(String provider) {

                    }

                    public void onProviderDisabled(String provider) {

                    }

                    public void onLocationChanged(Location location) {
                        Toast.makeText(getApplicationContext(),
                                "Location Changed", Toast.LENGTH_SHORT).show();

                    }
                });

        //etext.setText(String.valueOf(lat) + "," + String.valueOf(longi));

    }

    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        compass.disableCompass();
    }

    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
        compass.enableCompass();
    }

    protected boolean isRouteDisplayed() {
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T20:52:56.563

t0mm13b，在我的手机上工作，但 GPS 通知图标不闪烁。虚拟设备是指模拟器。我解决了问题。

代码 ：

```
package com.yunusoksuz.gmapstest;

import android.app.Activity;
import android.location.Criteria;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.widget.TextView;
import android.widget.Toast;

public class YnsmapsActivity extends Activity implements LocationListener {
    /** Called when the activity is first created. */
    private LocationManager locationManager;
    private Location location;
    private String provider;
    private Double lat, longi;
    private Criteria criteria;
    TextView tv;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        tv = (TextView) findViewById(R.id.tv1);
        locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
        criteria = new Criteria();
        criteria.setAccuracy(Criteria.ACCURACY_FINE);
        criteria.setAccuracy(Criteria.ACCURACY_COARSE);
        provider = locationManager.getBestProvider(criteria, false);
        location = locationManager.getLastKnownLocation(provider);
        locationManager.requestLocationUpdates(provider, 0, 0, this);

    }

    public void onLocationChanged(Location location) {
        Toast.makeText(
                this,
                "Lat : " + location.getLatitude() + " LONG : "
                        + location.getLongitude(), Toast.LENGTH_SHORT).show();
        tv.setText("Lat : " + location.getLatitude() + " LONG : "
                + location.getLongitude());
    }

    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        locationManager.removeUpdates(this);
    }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0,
                0, this);
    }
} 
```

现在gps通知闪烁。

# android - 在android上播放音频RTMP流

> ID：11494721
> 
> 赞同：6
> 
> 时间：2012-07-15T19:02:01.993
> 
> 标签：android, audio, streaming, audio-streaming, rtmp

[有没有人使用http://code.google.com/p/android-rtmp-client](http://code.google.com/p/android-rtmp-client)在 Android 上成功播放音频 RTMP 流或知道任何其他非闪存解决方案。android rtmp 源附带的示例将音频记录到文件中，但我正在寻找通过扬声器（或蓝牙）播放的示例代码。

[在 Android 中播放音频 RTMP 流的最简单方法对](https://stackoverflow.com/questions/6349714/the-easiest-way-to-play-an-audio-rtmp-stream-in-android)所需内容进行了部分讨论。

# java - 如何在核心 java 1.4 中存储非唯一键值对

> ID：11494722
> 
> 赞同：2
> 
> 时间：2012-07-15T19:02:21.860
> 
> 标签：java, data-structures

我需要存储非唯一键值对，例如只能使用 java 1.4 编译的应用程序。它应该看起来像：

```
{"key1"=>"value1",
"key2"=>"value2",
"key3"=>"value3",
"key3"=>"value4"
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T19:41:23.620

在核心 java 中，我认为您被困在将数组或列表存储为 Map 接口（哈希图）的值。您也可以在这里考虑答案：[Map implementation with duplicate keys](https://stackoverflow.com/questions/1062960/map-implementation-with-duplicate-keys)

请求重复键的语义是什么？

# forms - 找不到可安装的 ISAM

> ID：11494723
> 
> 赞同：2
> 
> 时间：2012-07-15T19:02:23.650
> 
> 标签：forms, ms-access, asp-classic, database-connection, isam

我想先在我的网页中创建一个搜索功能

```
<form id="form1" name="form1" method="get" action="mySearchResults.asp">
  <label>Enter Keywords:`
  <input type="text" name="searchTerm" />`
  </label>`
  <p>
    <input type="submit" name="Submit" value="Submit" />
  </p>
</form> 
```

然后

```
<% 
'open the connection
Dim Connect, myRecordSet
Set Connect = Server.CreateObject("ADODB.Connection")
Connect.Open = "Provider=Microsoft.Jet.OLEDB.4.0;Database='SVCS.mdb'"
%>

<%
'collect the form input
searchInput = Request.QueryString("searchTerm")`

'check for a match
Set myRecordSet = Connect.Execute ("SELECT * FROM Inventory WHERE myColumn LIKE '%" & searchInput & "%'")

'display the results
if myRecordSet.EOF then
response.write("You searched for: " & searchInput & "<br>")
response.write("A match was not found.<br>Sorry try again.")
else
response.write("You searched for: " & searchInput & "<br>")
response.write("The record was found!<br>The match is: " & myRecordSet("myColumn"))
end if
%>
<br><br>
<a href="mySearchForm.asp">Try Again</a> 
```

错误是

```
Microsoft JET Database Engine error '80004005' 
Could not find installable ISAM. 
/sarah lee video club website/mySearchResults.asp, line 5 
```

请告诉我如何解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T19:07:27.253

您不应该为一件事引用数据库名称，它是数据源，而不是数据库，并且您不需要与 Open 等号。

```
Set con = Server.CreateObject("ADODB.Connection") 
con.Open "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=SVCS.mdb" 
```

另请参阅[http://connectionstrings.com](http://connectionstrings.com)

# java - Filehandler 在目录中创建文件

> ID：11494729
> 
> 赞同：-2
> 
> 时间：2012-07-15T19:03:51.280
> 
> 标签：java, logging, filehandler

如何在现有目录中创建日志文件？..我已经尝试过这段代码：

```
String fileName = "/log/ABC.log";
FileHandler fileHandler = new FileHandler(fileName, true); 
```

但它不起作用。这里的日志是目录......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T19:22:45.663

你应该看看 Logger 类，它是 Java 的一部分（从 1.4 版开始）。FileHandler 类是日志包的一部分，它依赖于 Logger 类将错误实际记录到您创建的 FileHandler 对象中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-03T18:30:10.623

为了在当前目录下创建新的日志文件，文件名前不要加“/”前缀，比如下面的代码：

```
FileHandler fileHandler = new FileHandler("logs/abc.log"); 
```

# backbone.js - 使用 Backbone.js 和 Require.js 循环引用模型中的集合

> ID：11494730
> 
> 赞同：0
> 
> 时间：2012-07-15T19:04:00.003
> 
> 标签：backbone.js

我有以下设置（伪咖啡代码）。模型和集合使用 Require.js 加载。

```
ParentModel = Backbone.Model.extend

ParentCollection = Backbone.Collection.extend

CollectionA = ParentCollection.extend
    model: ModelA

CollectionB = ParentCollection.extend
    model: ModelB

CollectionC = ParentCollection.extend
    model: ModelC

ModelA = ParentModel.extend
    defaults:
        collectionB: new CollectionB()
        collectionC: new CollectionC()

ModelB = ParentModel.extend
    defaults:
        collectionA: new CollectionA()

ModelC = ParentModel.extend
    defaults:
        collectionA: new CollectionA() 
```

ModelA 有两个带有“子”模型的集合。ModelB 和 ModelC 反之亦然：一个带有“父”模型的集合。ModelA 工作正常，但 ModelB 和 ModelC 产生两个错误。Firebug 的 spy.js 的第一个：“尚未为上下文加载模块名称‘modelB’：_”，第二个由 Require.js：“尚未为上下文加载模块名称‘collectionB’：_”。如果我不加载模型 B 和 C 中的集合，则没有错误并且应用程序可以正常工作。我正在尝试解决错误，但我不知道出了什么问题。是 Backbone.js 循环引用问题还是 Require.js 循环依赖或其他问题？

编辑

organization.coffee 的代码 (modelA)

```
define (require) ->
    _ = require 'underscore'
    mGroup = require 'models/object/group/group'
    cDepartement = require 'collections/object/group/departement'
    cProject = require 'collections/object/group/project'

    mGroup.extend
        'urlRoot': '/api/organisation'
        'defaults': _.extend({}, mGroup.prototype.defaults,
            'type': 'organisation'
            'departements': new cDepartement()
            'projects': new cProject()) 
```

project.coffee (modelB) 的代码

```
define (require) ->
    _ = require 'underscore'
    mGroup = require 'models/object/group/group'
    cOrganisation = require 'collections/object/group/organisation'

    mGroup.extend
        'urlRoot': '/api/project'
        'defaults': _.extend({}, mGroup.prototype.defaults,
             'type': 'project'
             'organisations': new cOrganisation()) 
```

如果我注释掉 cOrganisation = require... 和新的 cOrganisation，那么一切正常。项目、部门和组织都是团体，但组织是项目和部门的父母。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:52:33.330

是的。只需将默认值移至`initialize`方法即可。加载所有定义时将使用它。就像是：

```
ModelB = ParentModel.extend
  initialize(options) ->
    options = options || {}
    if options.collectionA
      this.collectionA = options.collectionA
    else
      this.collectionA = new CollectionA() 
```

# string - 处理缓冲区中的每一行

> ID：11494745
> 
> 赞同：0
> 
> 时间：2012-07-15T19:05:29.307
> 
> 标签：string, mono, textview, buffer

我对 c# 很陌生。我正在使用单声道。我想遍历 TextView 对象中的每一行并对每一行进行自己的处理。我已将其范围缩小到包含 Text 属性的 Buffer 属性，但此属性包含整个文本。如何将其分解为单独的行/字符串？

```
 string Line;
    for (int i = 0;i < txtvMain.Buffer.LineCount; i++)
    {
        Line = txtvMain.Buffer.?;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T19:23:03.060

（未经测试）简单的解决方案（也许不是最有效的）：

```
string[] lines = txtvMain.Buffer.Text.split('\n'); 
```

# java - 使用 JPL 查询 Prolog 变量

> ID：11494747
> 
> 赞同：3
> 
> 时间：2012-07-15T19:05:38.473
> 
> 标签：java, prolog, swi-prolog, jpl

我想通过JPL查询在java中使用Prolog，我阅读了文档（http://www.swi-prolog.org/packages/jpl/java_api/getting_started.html）prolog谓词是这些：

```
child_of(joe, ralf).
child_of(mary, joe).
child_of(steve, joe).
child_of(steve, ralf).

descendent_of(X, Y) :-
    child_of(X, Y).
descendent_of(X, Y) :-
    child_of(Z, Y),
descendent_of(X, Z). 
```

我的代码看起来像这样

```
Variable X = new Variable();

        Query q4 =
            new Query(
                "descendent_of",
                new Term[] {X,new Atom("joe")}
            );

        java.util.Hashtable solution;

        while ( q4.hasMoreSolutions() ){
            solution = q4.nextSolution();
            System.out.println( "X = " + solution.get(X));
        } 
```

根据我的序言谓词，我的 java 代码应该检索“mary”和“steve”，但我得到了这个：

```
X = null
X = null 
```

我做错了什么？提前致谢

**编辑**：这是我的整个测试

```
Query q1 =
    new Query(
        "consult",
        new Term[] {new Atom("C:\\Users\\cardozo\\Documents\\fer\\info2\\lore\\test.pl")}
    );

return q1;

System.out.println( "consult " + (q.query() ? "succeeded" : "failed"));

Query q2 =
    new Query(
        "child_of",
        new Term[] {new Atom("joe"),new Atom("X")}
    );
Boolean resp= q2.query();
System.out.println("child_of(joe,X) is " + resp.toString()
);

Query q3 =
    new Query(
        "descendent_of",
        new Term[] {new Atom("steve"),new Atom("ralf")}
    );

System.out.println(
    "descendent_of(joe,ralf) is " +
    ( q3.query() ? "provable" : "not provable" )
);

Variable X = new Variable();

Query q4 =
    new Query(
        "descendent_of",
        new Term[] {X,new Atom("joe")}
    );

java.util.Hashtable solution;

q4.query();

while ( q4.hasMoreSolutions() ){
    solution = q4.nextSolution();
    System.out.println( "X = " + solution.get("X"));
} 
```

这就是我在我的 java 控制台中得到的结果

```
run:
% C:\Users\cardozo\Documents\fer\info2\lore\test.pl compiled 0.00 sec, 8 clauses
consult succeeded
child_of(joe,X) is false
descendent_of(joe,ralf) is provable
X = null
X = null
BUILD SUCCESSFUL (total time: 0 seconds) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T21:33:13.743

我找到了解决方案，我必须像这样使用 Compound 类（包含在 jpl 中）

```
Query q4 = new Query(new Compound("descendent_of", new Term[] { new Variable("X"), new Atom("joe")}));

while ( q4.hasMoreSolutions() ){
            solution = q4.nextSolution();
            System.out.println( "X = " + solution.get("X"));
        } 
```

我得到了解决方案

```
X = mary
X = steve 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T20:00:19.453

我会尝试按名称获取变量：

```
solution.get("X") 
```

**编辑**

使用文字查询，例如

查询 q4 = new Query("descendent_of(X,joe)")

# c++ - " 尝试包装函数返回值时不提供调用运算符”错误

> ID：11494751
> 
> 赞同：9
> 
> 时间：2012-07-15T19:06:27.200
> 
> 标签：c++, templates, boost, boost-function

我正在尝试编写一个函数，该函数将函子作为参数，调用函子，然后返回其包装在`boost::shared_ptr`.

以下拒绝编译，我完全没有想法。我得到“std::vector< std::string > 不提供呼叫运算符”（大致）。我在 Mac OS X 上使用 Clang 3.1。

```
template< typename T >
boost::shared_ptr< T > ReturnValueAsShared(
    boost::function< T() > func )
{
  return boost::make_shared< T >( func() );
} 
```

这是我尝试使用它的上下文：

```
make_shared< packaged_task< boost::shared_ptr< std::vector< std::string > > > >(
   bind( ReturnValueAsShared< std::vector< std::string > >,
      bind( [a function that returns a std::vector< std::string >] ) ) ); 
```

编辑：这是一个完整的独立测试用例。此代码无法编译并出现相同的错误，并且对于我的生活，我看不出有什么问题：

```
#include <boost/make_shared.hpp>
#include <boost/shared_ptr.hpp>
#include <boost/function.hpp>
#include <boost/bind.hpp>

#include <string>
#include <vector>

std::vector< std::string > foo( std::string a )
{
  std::vector< std::string > vec;
  vec.push_back( a );
  return vec;
}

template< typename T >
boost::shared_ptr< T > ReturnValueAsShared(
    boost::function< T() > func )
{
  return boost::make_shared< T >( func() );
}

int main()
{
  auto f = boost::bind( ReturnValueAsShared< std::vector< std::string > >,
                        boost::bind( foo, std::string("a") ) );
  f();

} // main 
```

这是错误输出：

```
In file included from testcase.cpp:3:
In file included from /usr/local/include/boost/function.hpp:64:
In file included from /usr/local/include/boost/preprocessor/iteration/detail/iter/forward1.hpp:47:
In file included from /usr/local/include/boost/function/detail/function_iterate.hpp:14:
In file included from /usr/local/include/boost/function/detail/maybe_include.hpp:13:
/usr/local/include/boost/function/function_template.hpp:132:18: error: type 'std::vector<std::basic_string<char>, std::allocator<std::basic_string<char> > >' does not provide a call operator
          return (*f)(BOOST_FUNCTION_ARGS);
                 ^~~~
/usr/local/include/boost/function/function_template.hpp:907:53: note: in instantiation of member function 'boost::detail::function::function_obj_invoker0<std::vector<std::basic_string<char>, std::allocator<std::basic_string<char> > >, std::vector<std::basic_string<char>, std::allocator<std::basic_string<char> > > >::invoke' requested here
        { { &manager_type::manage }, &invoker_type::invoke };
                                                    ^
/usr/local/include/boost/function/function_template.hpp:722:13: note: in instantiation of function template specialization 'boost::function0<std::vector<std::basic_string<char>, std::allocator<std::basic_string<char> > > >::assign_to<std::vector<std::basic_string<char>, std::allocator<std::basic_string<char> > > >' requested here
      this->assign_to(f);
            ^
/usr/local/include/boost/function/function_template.hpp:1042:5: note: in instantiation of function template specialization 'boost::function0<std::vector<std::basic_string<char>, std::allocator<std::basic_string<char> > > >::function0<std::vector<std::basic_string<char>, std::allocator<std::basic_string<char> > > >' requested here
    base_type(f)
    ^
/usr/local/include/boost/bind/bind.hpp:243:43: note: in instantiation of function template specialization 'boost::function<std::vector<std::basic_string<char>, std::allocator<std::basic_string<char> > > ()>::function<std::vector<std::basic_string<char>, std::allocator<std::basic_string<char> > > >' requested here
        return unwrapper<F>::unwrap(f, 0)(a[base_type::a1_]);
                                          ^
/usr/local/include/boost/bind/bind_template.hpp:20:27: note: in instantiation of function template specialization 'boost::_bi::list1<boost::_bi::bind_t<std::vector<std::basic_string<char>, std::allocator<std::basic_string<char> > >, std::vector<std::basic_string<char>, std::allocator<std::basic_string<char> > > (*)(std::basic_string<char>), boost::_bi::list1<boost::_bi::value<std::basic_string<char> > > > >::operator()<boost::shared_ptr<std::vector<std::basic_string<char>, std::allocator<std::basic_string<char> > > >, boost::shared_ptr<std::vector<std::basic_string<char>, std::allocator<std::basic_string<char> > > > (*)(boost::function<std::vector<std::basic_string<char>, std::allocator<std::basic_string<char> > > ()>), boost::_bi::list0>' requested here
        BOOST_BIND_RETURN l_(type<result_type>(), f_, a, 0);
                          ^
testcase.cpp:27:4: note: in instantiation of member function 'boost::_bi::bind_t<boost::shared_ptr<std::vector<std::basic_string<char>, std::allocator<std::basic_string<char> > > >, boost::shared_ptr<std::vector<std::basic_string<char>, std::allocator<std::basic_string<char> > > > (*)(boost::function<std::vector<std::basic_string<char>, std::allocator<std::basic_string<char> > > ()>), boost::_bi::list1<boost::_bi::bind_t<std::vector<std::basic_string<char>, std::allocator<std::basic_string<char> > >, std::vector<std::basic_string<char>, std::allocator<std::basic_string<char> > > (*)(std::basic_string<char>), boost::_bi::list1<boost::_bi::value<std::basic_string<char> > > > > >::operator()' requested here
  f();
   ^
1 error generated. 
```

这里还有一些线索。以下代码编译得很好，但这对我没有帮助，因为这不是我想要的代码:)

```
#include <boost/make_shared.hpp>
#include <boost/shared_ptr.hpp>
#include <boost/function.hpp>
#include <boost/bind.hpp>

#include <string>
#include <vector>

std::vector< std::string > foo()
{
  std::vector< std::string > vec;
  return vec;
}

template< typename T >
boost::shared_ptr< T > ReturnValueAsShared(
    boost::function< T() > func )
{
  return boost::make_shared< T >( func() );
}

int main()
{
  auto f = boost::bind( ReturnValueAsShared< std::vector< std::string > >,
                        foo );
  f();

} // main 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T08:53:47.150

boost::protect 是要走的路：

```
int main()
{
  auto f = boost::bind( ReturnValueAsShared< std::vector< std::string > >,
                        boost::protect(boost::bind( foo, std::string("a") ) ) );
  f();

} // main 
```

这是尽可能干净的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T20:42:40.603

*完全重写，原来的答案是错误的。*

# 错误分析

由于我一开始不知道这里出了什么问题，所以我做了一些分析。我保留它以供将来参考；请参阅下面的解决方案，了解如何避免该问题。

`bind.hpp`做这个：

```
return unwrapper<F>::unwrap(f, 0)(a[base_type::a1_]); 
```

在我看来是这样翻译的：

```
unwrapper<F>::unwrap(f, 0) = ReturnValueAsShared< std::vector< std::string > >
base_type::a1_ = boost::bind( foo, std::string("a") ) 
```

所以你期望这段代码做的就是将参数传递给函数，就像它一样。但要使其工作，表达式`a[base_type::a1_]`必须是 type `boots:_bi::value<T>`，而它是 unwrapped type `boost::_bi::bind_t`。因此，不是将仿函数作为参数传递，而是调用了一个特殊的重载版本：

```
namespace boost { namespace _bi { class list0 {
    …
    template<class R, class F, class L>
    typename result_traits<R, F>::type
    operator[] (bind_t<R, F, L> & b) const {
        return b.eval(*this);
    }
    …
} } } 
```

这将*评估*空函数，而不是传递它。因此，现在的参数不是返回向量的对象，而是向量。后续步骤将尝试将其转换为 a`boost::function`并失败。

# 典型解决方案

*再次编辑：*
看起来这种对[嵌套绑定](http://www.boost.org/doc/libs/1_50_0/libs/bind/bind.html#nested_binds)的特殊处理旨在作为一项功能。与用户 Zao 和 heller交谈`#boost`，我现在知道有一个`protect`功能可以对抗这些影响。所以这个问题的规范解决方案似乎如下：

```
…
#include <boost/bind/protect.hpp>
…
  auto f = boost::bind( ReturnValueAsShared< std::vector< std::string > >,
    boost::protect ( boost::bind( foo, std::string("a") ) ) );
… 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T22:53:44.860

某些结构（例如`bind`）返回中间“表达式”类型，您实际上并不想在鼻子上捕捉到这些类型。在这种情况下，您不能通过 捕获类型`auto`，并且您可能需要指定显式转换，否则就没有唯一的、单个用户定义的转换链。在您的情况下，将绑定表达式的显式转换添加到`function`：

```
typedef std::vector<std::string> G;
auto f = boost::bind(ReturnValueAsShared<G>,
             static_cast<boost::function<G()>(boost::bind(foo, std::string("a")))
                    ); 
```

（这本身实际上对我不起作用，但如果您使用相应的`std`结构，它确实有效。）

# html - 移动优先和响应式设计

> ID：11494752
> 
> 赞同：0
> 
> 时间：2012-07-15T19:06:29.773
> 
> 标签：html, web-applications, mobile

我正在阅读这些制作网站的新技术。然而，他们所做的一切（至少我发现的那些）都试图在他们相当短的文章中加入很多流行语，但没有人真正展示出很好的例子。

您如何支持响应式调整用户设备的网页？通过响应式设计，您可以使用媒体查询来添加不同的样式表。然而，在许多情况下，移动网页和完整网页之间的内容和标记数量非常不同。那么你如何支持两者？我猜你不使用样式表来隐藏内容，`display:none`因为它仍然需要加载整个页面的内容，并且它对标记进行了限制。那么，您是使用服务器端技术为人们提供不同的页面还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T19:10:06.477

取决于您的架构，您有几种方法：

*   如果没有很多多余的内容，确实可以使用 display:none
*   您可以使用 ajax 从服务器请求不同的内容
*   您可以在服务器上使用诸如标头检测之类的东西 - [http://www.zytrax.com/tech/web/mobile_ids.html](http://www.zytrax.com/tech/web/mobile_ids.html)来弄清楚

一般来说，对于简单的网站，您会使用第一种技术，虽然它可能不是最好的（向移动用户推送额外的内容），但它是最简单的。

# qt - 专注于 Qtreewidget 上的最后一个数据输入

> ID：11494754
> 
> 赞同：0
> 
> 时间：2012-07-15T19:06:39.697
> 
> 标签：qt, qwidget, qtreewidget

我正在尝试使用 Qtreewidget 作为列表视图（如在 C# 中）来显示一些数据。如下图所示，虽然在运行时显示新数据，但小部件不会关注最后一个条目。这就是我想要的，但找不到让它关注最后一个条目的方法。换句话说，我希望它向下滚动到最后一个条目。有什么办法吗，还是我必须使用其他东西来处理这个？

提前致谢。

![在此处输入图像描述](../Images/e329e3aeadf2d98659c1806422e25935.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-11T12:08:10.080

也许这段代码会帮助你：

```
QTreeWidget *mytree = new QTreeWidget(this);
...
mytree->scrollToBottom(); 
```

# iphone - 跨多个视图的 NSTimer

> ID：11494755
> 
> 赞同：0
> 
> 时间：2012-07-15T19:06:42.693
> 
> 标签：iphone

我有一个在视图控制器中启动的 NSTimer，但我希望它在视图之间切换时继续运行。

我怎样才能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T19:09:51.363

创建一个单例方法，以便您可以从任何类调用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T19:08:12.120

把它放在一些常见的类中，比如应用程序委托。只需使用类的委托变量在每个类中传递它的值。

# javascript - jQuery AJAX 将数据重新加载到 DOM 或用新数据刷新 DOM

> ID：11494761
> 
> 赞同：0
> 
> 时间：2012-07-15T19:07:39.207
> 
> 标签：javascript, html, jquery

在用户从另一个页面中选择一个按钮后，我有一段代码使用 jQuery 将内部网页中的内容加载到新页面 DOM 上。我遇到的问题是，无论我单击哪个选项按钮，都会在 DOM 中显示相同的结果。有人告诉我将 Var 更改为 .live，但没有任何区别。除了有人查看我的代码之外，我无法真正解释更多。处理这个问题的最佳方法是什么？

```
<html>
<head>
<meta charset="utf-8">
<title>jQuery Mobile Web App</title>
<link href="../jquery.mobile.theme-1.0.min.css" rel="stylesheet" type="text/css"/>
<link href="../jquery.mobile.structure-1.0.min.css" rel="stylesheet" type="text/css"/>
<script src="../jquery-1.6.4.min.js" type="text/javascript"></script>
<script src="../jquery.mobile-1.0.min.js" type="text/javascript"></script>
</head> 
<body> 

<div data-role="page" id="page">
    <div data-role="header">
        <h1>Page One</h1>
    </div>
    <div data-role="content">   
        <ul data-role="listview">
            <li><a href="#options">Options</a></li>
            <li><a href="#results">results</a></li>
        </ul>       
    </div>
    <div data-role="footer">
        <h4>Page Footer</h4>
    </div>
</div>

<div data-role="page" id="options">
    <div data-role="header">
        <h1>Options</h1>
    </div>
    <div data-role="content">   
        <div id="page-wrap">
            <div id="header">
                <h1>Call a webpage in a DOM</h1>
            </div>

            <div id="load-div" class="functions">
                <span>Value 1</span>
                <input type="submit" value="300GB" id="load" />

<div id="load-div" class="functions">
                <span>Value 2</span>
                <input type="submit" value="500Gb" id="load2" />
            </div>
            <a href="#results">results</a>      

        </div>  
    </div>
    <div data-role="footer">
        <h4>Page Footer</h4>
    </div>
</div>
</div>

<div data-role="page" id="results">
    <div data-role="header">
        <h1>Results</h1>
    </div>
    <div data-role="content">

                    <div id="result"  class="functions">

</div>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript">
    $.ajaxSetup ({
        cache: false
    });
    var ajax_load = "<img class='loading' src='img/load.gif' alt='loading...' />";
//  load() functions
    var loadUrl = "load.html";
    $("#load").live("click",function(){
        $("#result").html(ajax_load).load(loadUrl);
    });

</script>

<script type="text/javascript">
    $.ajaxSetup ({
        cache: false
    });
    var ajax_load = "<img class='loading' src='img/load.gif' alt='loading...' />";
//  load() functions
    var loadUrl = "load2.html";
    $("#load_2").live("click",function(){
        $("#result").html(ajax_load).load(loadUrl);
    });

</script>

<a href="#options">Options</a>  
    </div>
    <div data-role="footer">
        <h4>Page Footer</h4>
    </div>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T19:29:03.820

基本上你会覆盖你在这里的每一个脚本。不要使用`loadUrl`.

**对于`#load`：**

```
$("#load").live("click",function(){
    $('#result').html(ajax_load).load('load.html');
}); 
```

**对于`#load2`：**

```
$("#load_2").live("click",function(){
    $("#result").html(ajax_load).load(`load2.html`);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T20:07:10.417

单独的脚本标签不是独立的。一个中的代码可以与另一个中的代码交互。

您已经在两个块中声明了 var ajax_load 和 loadUrl。第二个块中的那些会覆盖第一个块中的那些。要么给它们不同的名称，要么消除它们并将字符串值直接放在你的函数中。

# svn - SVN合并只是覆盖所有文件

> ID：11494763
> 
> 赞同：3
> 
> 时间：2012-07-15T19:07:57.027
> 
> 标签：svn, version-control

当我尝试使用 SVNTortoise 从分支合并到主干时，它只是用分支副本覆盖所有内容，不要求我解决任何冲突。有人知道为什么吗？“合并非交互式”复选框未选中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T19:10:41.557

我猜您的工作副本中可能有更改，而您期望合并的正是这些更改。但是，如果您从分支合并到主干并将结果存储在工作副本中，则甚至不会考虑工作副本更改；他们只是被覆盖。在合并之前将您的更改提交到主干，*或者*将合并的结果直接存储到主干，而不是存储到您的工作副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:20:12.070

“重新整合分支”算法不同于常规合并。它假定您已经合并了从主干到功能分支的所有内容，从而解决了那里的冲突。因此，重新整合合并（几乎）会将功能分支复制到主干。

[来自http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-merge.html](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-merge.html)的引用

> 在分支开发期间对主干所做的所有更改都必须已合并到分支（或标记为已合并）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-10T03:15:43.323

我猜您尝试合并的分支的修订操作是“已添加”。这就是合并只是覆盖所有文件的原因。 [![在此处输入图像描述](../Images/52fa9c629f3a5f41dc84cadbbfb3c9ab.png)](https://i.stack.imgur.com/NBkUH.png)

这是 SVN 合并覆盖所有文件的修订图： [![在此处输入图像描述](../Images/013eda26c5ed9e4d4f99d598f18f6ee6.png)](https://i.stack.imgur.com/sF4Oa.png)

您应该通过向您的分支提交新内容来将修订的操作从“添加”更改为“修改”。

通过添加空格来更新分支。 [![在此处输入图像描述](../Images/f3cb7bed8e86ce94c72e724a21ed4b64.png)](https://i.stack.imgur.com/3fIxj.png)

[![在此处输入图像描述](../Images/419639e874f6164abf805cfd816e1d50.png)](https://i.stack.imgur.com/tXprl.png)

更新分支后的修订图

[![在此处输入图像描述](../Images/32d383cfb92b8845c2630036c987dc4b.png)](https://i.stack.imgur.com/EjyVC.png)

现在，当您从分支合并时，您应该会看到冲突；SVN 会要求您手动解决。

[![在此处输入图像描述](../Images/e04f59f9fc769c2a542a197156b2c906.png)](https://i.stack.imgur.com/qalmA.png)

# winforms - 何时使用 Windows 应用商店应用程序？

> ID：11494770
> 
> 赞同：4
> 
> 时间：2012-07-15T19:08:27.220
> 
> 标签：winforms, windows-store-apps

我有一个 winforms 应用程序，想知道是否应该尝试将其移动到 Windows 商店应用程序（和 WPF）。我希望 Metro 风格的应用程序具有与桌面应用程序相同的潜力，但让我想知道的是 VS 2012 不是 Metro 应用程序。这并没有让我感到很惊讶，因为到目前为止我看到的每个 Metro 应用程序看起来都像一个不能真正做太多事情的手机应用程序，我无法想象 VS 作为一个 Metro 应用程序会是什么样子。

在我看来，微软想慢慢地将所有东西都转移到 Metro，否则我认为引入全新的视觉体验只是为了在 Metro 和桌面之间切换而陷入困境，但即使记事本仍然是桌面应用程序。所以我的问题是，基本上，每种应用程序都应该可移动到 Metro 还是 Metro 仅适用于类似手机的小型应用程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T19:18:02.590

我不相信微软打算让每个应用程序都成为 Metro。我看到更多轻量级应用程序进入 Metro。重型业务线应用程序将保留在桌面端。

不过，我确实看到了在企业环境中编写桌面和 Metro 风格应用程序的机会。想象一下这个假设场景：

在企业中，我可以看到 Accounts Receivable 在他们的桌面上运行成熟的、单一的桌面应用程序，就像在 Win7 下运行它们一样，因为它们的需求非常广泛。

接待员将运行带有 Metro 应用程序的触控笔记本电脑，该应用程序仅与公司约会相关联。

装卸台上的人将运行 Win8 手机，这些手机具有显示交货时间表的进/出应用程序以及其他什么。

经理和高管拥有 Metro 平板电脑，该平板电脑有一个显示指标的应用程序：许多漂亮的图表和图形显示公司在不同业务领域的运营情况和方式的当前状况。

对于需要复杂性的用户，它是桌面模式，但对于执行较小的特定计算机任务的用户，为他们提供触控的 Metro 应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T19:13:03.320

Metro 风格的应用程序用于内容消费，就像您在平板电脑上看到的那样。

经典桌面应用程序用于内容创建。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T19:18:13.960

我认为 Metro 应用程序是一个附加功能，我不认为它们是桌面应用程序的重要替代品。如果您想将您的应用程序部署到平板电脑、手机或任何其他触摸屏/手持设备，metro style 将是一个不错的选择。目前，Metro 应用程序的消费者并不多，因为 Windows 8 甚至还没有进入市场。

正如您已经提到的，在桌面 PC 上，metro 应用程序非常不舒服，并且不能提供桌面应用程序可以提供的全部功能。

> 所以我的问题是，基本上，每种应用程序都应该可移动到 Metro 还是 Metro 仅适用于类似手机的小型应用程序？

我不这么认为，因为这自动意味着许多使用过 Windows 早期版本的客户必须学习使用 Metro 界面。

Metro 应用程序提供的功能比 Vista 中的桌面小工具要多得多，因为它们可以使用 C# 或其他 .Net 语言进行编程，但 Metro 应用程序占用了太多空间，无法用简单的鼠标进行控制。

# javascript - 在线显示 3D 模型

> ID：11494772
> 
> 赞同：0
> 
> 时间：2012-07-15T19:08:43.117
> 
> 标签：javascript, 3d, webgl, autocad

如何在线显示建筑设计文件、任何格式、ifc 或 collada 的 3D 模型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T19:12:07.327

您可能想研究[WebGL](http://en.wikipedia.org/wiki/WebGL)，一种用于 Javascript 的 3D 渲染 API。[ThreeJS](https://github.com/mrdoob/three.js/)是另一个优秀的浏览器内 3D 渲染库。再次，Javascript。

甚至可以使用 CSS 渲染“3D”内容，如这篇[优秀的文章](http://hacks.mozilla.org/2011/08/rendering-3d-with-css-and-javascript-with-dom3d-guest-post/)所示。

# php - 如何添加[今天的日期+1天]

> ID：11494773
> 
> 赞同：-1
> 
> 时间：2012-07-15T19:08:46.450
> 
> 标签：php, wordpress, date, future

我目前在 wordpress 中使用此代码：

```
// [date]  
function displaydate(){  
return date('l, F jS, Y');  
}  
add_shortcode('date', 'displaydate');  
// end date 
```

--

我想要做的是添加另一个显示今天日期+1天的短代码。

所以我可以写这样的东西：

'...优惠用完 [今天日期 +1 天]'

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T19:18:47.947

PHP 中最简单的方法是使用[strtotime](http://php.net/manual/en/function.strtotime.php)函数。

至于您的代码，您将添加：

```
return date('l, F jS, Y', strtotime('+1 day')); 
```

根据您的原始代码，名为“明天”的“简码”如下所示：

```
// [tomorrow]  
function displaydate_tomorrow(){  
    return date('l, F jS, Y', strtotime('+1 day')); 
}  
add_shortcode('tomorrow', 'displaydate_tomorrow'); 
// end tomorrows date 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T19:15:27.247

PHP 文档在日期操作方面非常全面，因此找到合适的解决方案应该很容易。这是一种可能的解决方案：

```
function displaydate($plus_days) {
  return date('l, F jS, Y', strtotime('+' . $plus_days . ' day'));
} 
```

[http://uk3.php.net/manual/en/function.strtotime.php](http://uk3.php.net/manual/en/function.strtotime.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-20T04:37:57.493

这是我能找到的对该问题的唯一直接答案，非常感谢您提供答案。

我还使用了变量，因为我想显示一个准确的日期，当我在多伦多地区时，通过将日期更改为小时并输入 -5 到格林威治标准时间，它工作得很好！

对于新手，我使用的完整代码如下：

```
 function displaydate(){
     return date('l, F jS, Y', strtotime('-5 hours')); 

 }
 add_shortcode('date', 'displaydate'); 
```

然后，我在希望日期出现在我的 wordpress 页面上的页面上输入以下内容：

```
Last update of this page: [date] 
```

结果是完美的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-29T00:54:55.597

我用这个片段来计算简单的预计交货日期。它基于 dianovich 片段，但他（她）的片段返回错误。这工作正常：

```
function displaydate( $atts ) {
    $atts = shortcode_atts( array(
        'day'   => '0'     
    ), $atts );
    $plus_days = $atts['day'];
    return date_i18n('j F Y', strtotime('+' . $plus_days . ' day'));
}
add_shortcode('delivery_date', 'displaydate'); 
```

要显示的简码：[delivery_date day="5"]

# scala - 如何手动创建 TypeTag？

> ID：11494788
> 
> 赞同：12
> 
> 时间：2012-07-15T19:11:02.063
> 
> 标签：scala

我对手动创建 TypeTag 感兴趣（从 2.10M5 开始）：

```
object X {
  import reflect.runtime.universe._
  def tt[A : TypeTag](a: A) = typeTag[A] // how to do this manually?
  val t = tt(List("")(_))
} 
```

`scalac -Xprint:typer <file>.scala`结果是

```
package <empty> {
  object X extends scala.AnyRef {
    def <init>(): X.type = {
      X.super.<init>();
      ()
    };
    import scala.reflect.runtime.`package`.universe._;
    def tt[A >: Nothing <: Any](a: A)(implicit evidence$1: reflect.runtime.universe.TypeTag[A]): reflect.runtime.universe.TypeTag[A] = scala.reflect.runtime.`package`.universe.typeTag[A](evidence$1);
    private[this] val t: reflect.runtime.universe.TypeTag[Int => String] = X.this.tt[Int => String](((x$1: Int) => immutable.this.List.apply[String]("").apply(x$1)))({
      val $u: reflect.runtime.universe.type = scala.this.reflect.runtime.`package`.universe;
      val $m: $u.Mirror = scala.this.reflect.runtime.`package`.universe.runtimeMirror(this.getClass().getClassLoader());
      $u.TypeTag.apply[Int => String]($m, {
        final class $typecreator1 extends TypeCreator {
          def <init>(): $typecreator1 = {
            $typecreator1.super.<init>();
            ()
          };
          def apply[U >: Nothing <: scala.reflect.base.Universe with Singleton]($m$untyped: scala.reflect.base.MirrorOf[U]): U#Type = {
            val $u: U = $m$untyped.universe;
            val $m: $u.Mirror = $m$untyped.asInstanceOf[$u.Mirror];
            $u.TypeRef.apply($u.ThisType.apply($m.staticModule("scala").asModuleSymbol.moduleClass), $m.staticClass("scala.Function1"), scala.collection.immutable.List.apply[$u.Type]($m.staticClass("scala.Int").asTypeSymbol.asTypeConstructor, $m.staticClass("java.lang.String").asTypeSymbol.asTypeConstructor))
          }
        };
        new $typecreator1()
      })
    });
    <stable> <accessor> def t: reflect.runtime.universe.TypeTag[Int => String] = X.this.t
  }
} 
```

这似乎完全是编译器的魔法，因为类型是硬编码的。不过有没有办法手动做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-16T12:06:59.247

在 M3 中，您可以通过非常简单的方式创建类型标签，例如：`TypeTag[Int](TypeRef(<scala package>, <symbol of scala.Int>, Nil))`. 这基本上意味着一旦创建了类型标记，它就会永远绑定到某个类加载器（即上面示例中用于加载 scala.Int 符号的类加载器）。

那时还不错，因为我们认为我们可以拥有一个可以容纳所有类加载器的万能镜像。这很方便，因为您只需编写代码`implicitly[TypeTag[T]]`，编译器就会使用该全局镜像来实例化您请求的类型。

不幸的是，后来根据反馈，我们意识到这行不通，我们需要多个镜像——每个镜像都有自己的类加载器。

然后很明显类型标签需要灵活，因为一旦你写`implicitly[TypeTag[T]]`了编译器没有足够的信息你想使用什么类加载器。基本上有两种选择：1）使类型标签路径依赖于镜像（这样每次从编译器请求类型标签时都将被迫显式提供镜像），2）将类型标签转换为类型工厂，能够在任何镜像中实例化自己。长话短说，第一个选项不起作用，所以我们就在原地。

因此，目前需要以相当迂回的方式创建类型标签，如[https://github.com/scala/scala/blob/master/src/library/scala/reflect/base/TypeTags.scala#L143](https://github.com/scala/scala/blob/master/src/library/scala/reflect/base/TypeTags.scala#L143)中所述。您调用伴随程序中定义的工厂方法`TypeTag`并提供两个参数：1）默认镜像，类型标签将在其中实例化，2）可以在任意镜像中实例化类型标签的类型工厂。这基本上就是编译器在您上面附加的打印输出中所做的。

我为什么叫这个环形交叉路口？因为要提供类型工厂，您需要手动子类化`scala.reflect.base.TypeFactory`该类。这是 Scala 类型系统在函数和依赖类型方法之间的边界上的不幸限制。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-09-05T17:26:03.997

基于[Get TypeTag[A] from Class[A]](https://stackoverflow.com/questions/22970209/get-typetaga-from-classa/22972751#22972751)：

```
import scala.reflect.runtime.universe._

def typeToTypeTag[T](
  tpe: Type,
  mirror: reflect.api.Mirror[reflect.runtime.universe.type]
): TypeTag[T] = {
  TypeTag(mirror, new reflect.api.TypeCreator {
    def apply[U <: reflect.api.Universe with Singleton](m: reflect.api.Mirror[U]) = {
      assert(m eq mirror, s"TypeTag[$tpe] defined in $mirror cannot be migrated to $m.")
      tpe.asInstanceOf[U#Type]
    }
  })
} 
```

例如，这可用于获取`TypeTag`另一个的一部分`TypeTag`：

```
def inside[A, B](tag: TypeTag[(A, B)]): (TypeTag[A], TypeTag[B]) = {
  val tpes = tag.tpe.asInstanceOf[TypeRefApi].args
  val tagA = typeToTypeTag[A](tpes(0), tag.mirror)
  val tagB = typeToTypeTag[B](tpes(1), tag.mirror)
  return (tagA, tagB)
} 
```

这适用于 Scala 2.10.2：

```
scala> inside(typeTag[(Int, Double)])
res0: (reflect.runtime.universe.TypeTag[Int], reflect.runtime.universe.TypeTag[Double]) = (TypeTag[Int],TypeTag[Double]) 
```

`Mirror`只要您没有多个`ClassLoader`s ，绑定到特定的限制可能不是问题。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-06-21T03:19:44.790

目前，手动创建`TypeTag` **支持泛型**的方法有三种。前两个取决于`scala-compiler`, 使用它们，您可以像在编译时一样进行类型检查，*因为它是实际的代码编译*：

```
import scala.reflect.runtime.universe._
import scala.reflect.runtime.currentMirror
import scala.tools.reflect.ToolBox

val toolbox = currentMirror.mkToolBox()

def createTypeTag(tp: String): TypeTag[_] = {
  val ttree = toolbox.parse(s"scala.reflect.runtime.universe.typeTag[$tp]")
  toolbox.eval(ttree).asInstanceOf[TypeTag[_]]
} 
```

如果您需要可序列化`TypeTag`并且性能不是您主要关心的问题，那么第一种方法是最简洁的。OTOH，如果您的用例需要非常高性能，请注意即时编译可能需要几秒钟才能完成。

第二种方法执行得更好一些：

```
def createTypeTag(tp: String): TypeTag[_] = {
  val ttagCall = s"scala.reflect.runtime.universe.typeTag[$tp]"
  val tpe = toolbox.typecheck(toolbox.parse(ttagCall), toolbox.TYPEmode).tpe.resultType.typeArgs.head

  TypeTag(currentMirror, new reflect.api.TypeCreator {
    def apply[U <: reflect.api.Universe with Singleton](m: reflect.api.Mirror[U]) = {
      assert(m eq mirror, s"TypeTag[$tpe] defined in $mirror cannot be migrated to $m.")
      tpe.asInstanceOf[U#Type]
    }
  }
} 
```

第二种模式创建一个类型树并获取标记在 中的具体类型`TypeTag`，即，如果您的目标是 a `List[String]`，它将被转换为`scala.collection.immutable.List[String]`，因为`scala.List`它只是一个类型别名。这实际上是预期的行为`typeTag[List[String]]`。

最后一种方法是`Type`手动创建一个并使用它来创建`TypeTag`. 此方法容易出错，类型检查有限，并且使用内部 API。但是，这是手动获取`TypeTag`.

```
def createTypeTag(tp: String): TypeTag[_] = {
  val typs = // ... manipulate the string to extract type and parameters
  val typSym = currentMirror.staticClass(typs[0])
  val paramSym = currentMirror.staticClass(typs[1])

  val tpe = universe.internal.typeRef(NoPrefix, typSym, List(paramSym.selfType))

  val ttag = TypeTag(currentMirror, new TypeCreator {
    override def apply[U <: Universe with Singleton](m: Mirror[U]): U#Type = {
      assert(m == currentMirror, s"TypeTag[$tpe] defined in $currentMirror cannot be migrated to $m.")
      tpe.asInstanceOf[U#Type]
    }
  })
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-15T21:34:02.853

函数定义

```
def tt[A : TypeTag](a: A) = typeTag[A] 
```

只是另一种写作方式

```
def tt(a: A)(implicit tag: TypeTag[A]) = tag 
```

这意味着标签的实例是由编译器隐式创建的。这背后的原因是 Scala 编译器通过硬编码原本被擦除的类型信息来解决 JVM 的类型擦除问题。

如果您不熟悉类型擦除问题，那是 JVM 不存储类型参数信息，例如类型`Seq[Set[Int]]`将被简单地视为`Seq[_]`JVM，您将无法找出丢失的用反射输入信息。

# entity-framework-4 - 从表中获取 3 条随机记录

> ID：11494792
> 
> 赞同：7
> 
> 时间：2012-07-15T19:11:30.853
> 
> 标签：entity-framework-4

我已经阅读了一个类似查询的多个答案，但似乎没有一个能达到目的。

想象一下，我有一个包含 10 行的表，如何使用 Entity Framework 从该表中检索 3 个随机行？不只是 1 个随机行，而是 3 个随机行——每一个都不同？

提前致谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-15T19:24:48.393

```
var threeRandomFoos = foos.OrderBy(x => Guid.NewGuid()).Take(3); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-09-27T13:14:13.030

相反，有一种更简单的方法，

```
var threeRandomFoos = foos.OrderBy( x=> SqlFunctions.Rand()).Take(3); 
```

Guid.NewGuid 性能会慢一点，为什么不使用 SqlFunctions 本身指定的 Random 呢？

# python - 如何使用 Flask 提供静态 SVG 文件？

> ID：11494793
> 
> 赞同：10
> 
> 时间：2012-07-15T19:11:31.040
> 
> 标签：python, mime-types, flask

我想用 Flask 提供一个静态 SVG 文件，但是 SVG 文件是在没有`Content-Type`标题的情况下传输的。正确的 mime 类型是`image/svg+xml`. 如何确保 Flask 对 SVG 文件使用正确的 mime 类型并将其发送到浏览器？

我将文件称为`/static/python.svg`，它确实存在。

我在我的`__init__.py`文件中尝试了这个，但没有任何区别：

```
import mimetypes

mimetypes.add_type('images/svg+xml', '.svg') 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-15T20:35:24.043

您的 mime 类型有误。正确的是`image/svg+xml`（注意缺少's'）。

```
import mimetypes

mimetypes.add_type('image/svg+xml', '.svg')
#                        ^ no s 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-30T09:05:17.793

一个简单（但很老套）的方法是为 svgs 添加一条新路由：

```
@app.route('/static/<svgFile>.svg')
def serve_content(svgFile):
    return file('static/'+svgFile+'.svg').read() 
```

# java - ActiveMQ 授权

> ID：11494795
> 
> 赞同：4
> 
> 时间：2012-07-15T19:11:49.973
> 
> 标签：java, authorization, activemq, jaas

如果我想在 Apache ActiveMQ 上实现 JAAS 授权，是否必须使用 activemq.xml 配置文件中的插件？

这种方式确实不好，因为如果我想更改授权，我必须更改 activemq.xml 文件并**重新启动**服务器才能工作。

有什么方法可以通过更改其他属性文件而不是 activemq.xml 文件来使用 JAAS 身份验证？或者我可以自定义我自己的授权插件吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T09:26:27.920

每当我设置 ActiveMQ 安全性时，我发现最好使用带有[通配符的普通](http://activemq.apache.org/wildcards.html)[AuthorizationPlugin](http://activemq.apache.org/security.html)来表示所覆盖的目的地（这就是为什么在队列和主题中使用命名约定非常方便的原因）。这个想法是您定义少数用户组并授予他们访问这些目的地的权限。

从用户名分配组的角色由身份验证插件之一处理 - JAAS 插件对于将这些信息外部化到 LDAP 目录中的 ActiveMQ 配置之外特别有用。

查看 FuseSource 的[ActiveMQ 安全指南](http://fusesource.com/docs/broker/5.5/security/front.html)（需要注册）以获取更多信息。

**更新 2018-07-02** [ActiveMQ 安全指南](https://access.redhat.com/documentation/en-US/Fuse_ESB/4.4.1/html/ActiveMQ_Security_Guide/files/front.html)，现在位于 redhat。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-10T15:01:07.320

我发现一些代码片段最终对开始研究这个主题非常有帮助：

[http://activemq.2283324.n4.nabble.com/Fully-programmatic-authorization-map-tp2344815.html](http://activemq.2283324.n4.nabble.com/Fully-programmatic-authorization-map-tp2344815.html)

这是我最终使用它的方式（可能不是最好的方法）：

```
public class TestAuthorizationPlugin extends AuthorizationPlugin { 
```

然后：

```
@Override
public Broker installPlugin(Broker broker) {
    List<DestinationMapEntry> entries = new ArrayList<DestinationMapEntry>(); 
    try {
        entries.add(makeTopicAuthorization("groupA.topic", "groupA", "groupA", "groupA"));
        entries.add(makeQueueAuthorization("groupA.queue", "groupA", "groupA", "groupA"));
        entries.add(makeQueueAuthorization("groupB.queue", "groupB", "groupB", "groupB"));
        entries.add(makeTopicAuthorization("ActiveMQ.Advisory.>", "all", "all", "all"));
        AuthorizationMap authMap = new DefaultAuthorizationMap(entries);
        return new AuthorizationBroker(broker, authMap);
    } catch (Exception e) {
        LOGGER.error(e);
    } 

    return new AuthorizationBroker(broker, null);
} 
```

把这个罐子塞进去`<activemq_home>/lib/`。

修改activemq.xml：

```
<plugins>
    <!--  use JAAS to authenticate using the login.config file on the classpath to configure JAAS -->
    <jaasAuthenticationPlugin configuration="activemq" />

    <!-- Authorization control -->
    <bean xmlns="http://www.springframework.org/schema/beans" class="com.blackstrype.activemq.security.TestAuthorizationPlugin"/>
</plugins> 
```

有关 autho plugin dev 更多信息的另一个有用链接：

[http://mariuszprzydatek.com/2014/01/04/token-based-authentication-plugin-for-activemq/](http://mariuszprzydatek.com/2014/01/04/token-based-authentication-plugin-for-activemq/)

# javascript - Dart Nodejs 和 Socketio

> ID：11494796
> 
> 赞同：16
> 
> 时间：2012-07-15T19:11:57.827
> 
> 标签：javascript, node.js, socket.io, dart

将 socketio nodejs 应用程序转换为 dart 有哪些选择？是否以某种方式支持使用 dart 的 nodejs 服务器（理想情况下具有 dart 编辑器的所有花哨的调试功能）？socketio 有基于 dart 的库吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-15T20:03:29.667

Dart 有一个服务器端 VM，就像 V8 有一个 node.js 形式的服务器端 VM。

看看 Adam Smith 的[webserver 聊天示例](https://github.com/financeCoding/chat-websocket-dart/)，它使用服务器端的 websockets 与客户端的 websockets 进行通信，这两个部分都是用 Dart 编写的。

服务器端的关键部分如下所示：

```
import "dart:io";

main() {
  HttpServer server = new HttpServer();

  WebSocketHandler wsHandler = new WebSocketHandler();
  server.addRequestHandler((req) => req.path == "/ws", wsHandler.onRequest);

  wsHandler.onOpen = (WebSocketConnection conn) {
     conn.onMessage = (message) {
       print(message);
       conn.send("hello, this is the server");
     };
  };

  server.listen("127.0.0.1",8080);
} 
```

然后在客户端上，类似

```
import "dart:html"; 
main() {
  var ws = new WebSocket("ws://127.0.0.1:8080/ws");
  ws.on.open.add( (a) {
    ws.send("hello, this is the client");
  });
  ws.on.message.add( (messsage) {
    print(message);
  });
} 
```

# html - 如何制作垂直穿过的 twitter 风格的透明方形流体？

> ID：11494798
> 
> 赞同：0
> 
> 时间：2012-07-15T19:12:01.993
> 
> 标签：html, css, twitter-bootstrap

谁能帮我用 bootstrap 实现透明方形流体？（[https://twitter.com/ladygaga](https://twitter.com/ladygaga)）

我也想知道如何在那个透明正方形中实现圆角正方形。
提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T19:23:38.667

似乎他们只是在该 div 上使用半透明背景图像来获得玻璃状纹理。图像或背景颜色（例如`RGBA(0,0,0,0.2)`）需要将其 Alpha 通道设置为 100% 以外的值。他们的 CSS 看起来像这样。

```
.wrapper, .wrapper-narrow, .wrapper-permalink {
    position: relative;
    width: 837px;
    min-height: 100%;
    padding: 54px 14px 15px;
    margin: 0 auto;
    background: url(../img/wash-white-30.png);
} 
```

假设您要使用类似的方法。'wrapper' 类提供透明背景，'whitebg' 类提供纯白色背景：

```
<div class="container-fluid wrapper">
  <div class="row">
    <div class="span2 well whitebg">
      content..
    </div>
  </div>
</div> 
```

使用此 CSS 为您提供课程所需的内容：

```
.whitebg {
  background-color:white;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T19:24:08.953

透明的 DIV（不是方形 :)）是使用具有 alpha 通道的 PNG 图像实现的，如下所示：

```
.wrapper, .wrapper-narrow, .wrapper-permalink {
    background: url("../img/wash-white-30.png") repeat scroll 0 0 transparent;
    margin: 0 auto;
    min-height: 100%;
    padding: 54px 14px 15px;
    position: relative;
    width: 837px;
} 
```

就圆角而言，在该页面上，它们的实现如下：

```
.module, .promptbird {
    background-clip: padding-box;
    border-radius: 6px 6px 6px 6px;
    line-height: 16px;
    margin-bottom: 10px;
    position: relative;
} 
```

对于您在引导程序中的要求，仅使用 div 的 css opacity 属性和内部 div 的边框半径属性就可以解决问题。

```
.transparentDiv { /*make any SQUARE transparent!*/
    background: #fff; /*white*/
    opacity: 0.5 /*will not work in older IE versions, add filter for it!*/
    margin: 0 auto; /* optionally, center it! */
}

.roundedDiv {
    border-radius: 3px 3px 3px 3px; /* 3px looks way cool! */
} 
```

用法：

```
<div class="transparentDiv">I see through you baby!</div>
<div class="roundedDiv ">Love makes the world go round!</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T19:30:18.827

使用透明颜色为您`background-color`使用 rgba 颜色值。这就是你获得透明度的方式。

对于圆角，使用`border-radius`.

这是一个包含所有你想要的东西的小提琴 - [http://tinkerbin.com/j5A3fKHl](http://tinkerbin.com/j5A3fKHl)

# ruby - 迭代调用随机算法，每次调用接收相同的结果

> ID：11494800
> 
> 赞同：1
> 
> 时间：2012-07-15T19:12:21.110
> 
> 标签：ruby, random, graph-algorithm

我正在尝试实现 Kargers min-cut 算法。该算法是一种随机算法，您应该运行`(n(logn))^2`多次以确信您已经找到了最小切割。我已经完成了在 Ruby 中就地实现该算法的新手工作：

```
def karger(graph)
#graph will be an array
#each element of graph is an array
#these subarrays are of the form [[4], 43, 23, 1, 67]
#where the zeroth element is the vertex label
#the other elements represent edges to other vertices.
  while graph.length > 2
    #u & v are the indices of two random vertices that will be merged together
    u = rand(0...graph.length)
    v = rand(0...graph.length)
    #while loop ensures u != v
    while v == u
      u = rand(0...graph.length)
      v = rand(0...graph.length)
    end
    #merge u & v into a single vertex, 
    graph[u] += graph[v][1...graph[v].length]
    graph[u][0].concat(graph[v][0])
    graph.delete_at(v)
  end
  #this nested block eliminates self loops on the two remaining superveticies
  graph.each do |z|
    z.each do |x|
      unless x.class == Array
        if z[0].include?(x)
          z.delete(x)
        end
      end
    end
  end
  return (graph[0].length)-1 #-1 since the first element of both subarrays is the vertex   label
end 
```

我的问题是，当我尝试创建一个块或循环以在必要的`(nlog(n))^2`时间内运行算法时，每个切割都是相同的值。因此，如果第一次调用`karger()`产生 2 的剪切，那么之后的每个调用也将返回 2。但是，如果我`karger()`手动调用，只需在 textmate 中按 cntrl R，我的结果就会有所不同。我第一次在某个输入上运行它时，我得到了 5，下一次，2。因此，我试图生成大量`karger()`调用样本并找到最小结果的尝试不起作用，因为我只会有一个大量的 2 或 5 或其他样本。如果我运行调用`karger()` `(nlog(n))^2`时间的块，我会得到不同的答案，这取决于第一次调用`karger()`返回的内容，因为其他所有调用都返回相同的结果。

希望这很清楚。

这是一个示例图：

```
testgraph1 = [[[1],2,2,3], [[2],1,1,3,4,5], [[3],1,2,4], [[4],2,3], [[5],2]] 
```

* * *

编辑：

我认为如果添加用于迭代调用函数的方法可能会有所帮助：

```
def kargeriterate(graph)
  n = graph.flatten.length
  min = graph.flatten.length
  ((n)*(Math.log(n)))**2.to_i.times do |z|
      a = karger(graph)
      puts a  #this puts is here just to see each output
      if a < min
        min = a
      end
    end
  return min
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T21:07:02.460

方法喜欢`delete`并`delete_at`修改他们的论点。由于在 ruby​​ 中所有内容都是按值传递的，这意味着您调用的第二次（以及第三次、第四次、第五次等）`karger`是在已处理的图形上执行此操作，因此该方法不执行任何操作。

看起来你修改了嵌套在里面的数组`graph`以及它`graph`本身，所以`graph=graph.dup`在你的方法开始时这样做`karger`是不够的。ruby 没有内置标准的深拷贝，但实现此目的的一种简单方法是转储和反序列化您的对象：

```
def karger(graph)
  graph = Marshal.load(Marshal.dump(graph))
  ...
end 
```

# php - 相对 xpath php

> ID：11494801
> 
> 赞同：8
> 
> 时间：2012-07-15T19:12:38.997
> 
> 标签：php, xpath

我正在解析如下所示的 html：

```
 <table class="linesTbl">
        <tr class="linesHeader">
            <td><h3>EventName</h3></td>
        </tr><tr class="linesColumns">
            <td>Date</td><td class="contestLine">Description</td>
        </tr><tr class="linesAlt1">
            <td>Time</td><td>X1</td><td>Price1</td>
        </tr><tr class="linesAlt1">
            <td>&nbsp;</td><td>X2</td><td>Price2</td></tr>
</table> 
```

有多个这样的表，所以我试图遍历它们并获取所有数据。我不确定 xpath 如何处理 php 中的查询。目前我只是想从每个表中提取 EventName 。

```
$doc = new DOMDocument();
@$doc->loadHTML($html);
$xpath = new DOMXPath($doc);

foreach ($xpath->query("//table[@class = 'linesTbl']") as $tableNode){

  $headerTag = $xpath->query(".//h3", $tableNode);
  echo $headerTag->nodeValue;

} 
```

对于 $headerTag 查询，我也尝试过`query("./tr/td/h3", $tableNode)`。我该如何做这个相对查询？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-15T19:17:12.860

您的 xpath 表达式已经是相对的：

```
$headerTag = $xpath->query(".//h3", $tableNode);
                            ^       ^^^^^^^^^^
                            |    relative-to node
                       relative path 
```

但是，这会返回一个节点列表，而不是单个节点，所以如果你这样做：

```
echo $headerTag->item(0)->nodeValue;
               ^^^^^^^^^ 
```

您可以访问所需的元素，查看输出：

```
EventName 
```

我希望这是有帮助的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T19:20:09.227

实际上，您的 html 不正确。

关于 XPATH，您可以通过这种方式专门针对`h3`标记：-

```
/table[@class='linesTbl']/tr[@class='linesHeader']/td/h3 
```

# validation - 在验证时动态切换错误消息？

> ID：11494803
> 
> 赞同：5
> 
> 时间：2012-07-15T19:12:53.623
> 
> 标签：validation, cakephp, cakephp-2.1

使用新的验证器对象 - 是否可以替换触发的验证规则内的验证错误？不仅返回静态错误消息，而且可能是一些动态生成的错误消息？

```
public function validateLength($data) {
    ...
    $length = mb_strlen($data['name']);
    $this->validator()->getField('name')->setRule('validateLength', array('message' => $length . 'chars')); 
    ...
} 
```

当然不起作用（我猜为时已晚）

例如，我想实际返回字符串的长度（您使用了 100 个允许的 111 个字符） - 但为此我需要能够从（自定义）验证方法内部替换消息

```
$this->validate['name']['validateLength']['message'] = $length . 'chars'; 
```

到目前为止也从未工作过。它总是从 $validate 数组返回上一个（静态）错误消息

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-16T12:54:39.340

```
public function customValidator($data) {
    ....
    if ($validates) {
        return true;
    } else { 
        return 'my new error message';
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T05:19:42.343

以下代码段应该可以解决问题：

```
public function validateLength($data) {
    ...
    $length = mb_strlen($data['name']);
    $this->validator()->getField('name')->getRule('validateLength')->message = $length . 'chars';
    ...
} 
```

# jquery - Firefox 4 中不显示 jQuery Mobile 多页

> ID：11494806
> 
> 赞同：0
> 
> 时间：2012-07-15T19:13:21.153
> 
> 标签：jquery, mobile, firefox4

使用最新的 jQuery Mobile 1.1.1，单击多页链接#pgDetail 时，第一页 (#pgHome) 使用不透明度 0 淡出，但链接的第二页 (#pgDetail) 仍然显示：无，计算不透明度为“1 " 并且不会变得可见，什么都不会显示，当然除了在萤火虫中。

我注意到它没有切换页面的“ui-page-active”类，也没有切换样式高度。如果我刷新浏览器，将显示第二页。或者，如果我使用 firebug 手动将 ui-page-active 类从一个页面移动到另一个页面，它会显示。

我只在 Firefox 4 上看到这个问题。（Win7）。

相同的代码在 Firefox 10、IE 8、Chrome、Safari 等中测试良好并按预期工作......

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T13:15:22.677

我今天遇到了同样的问题，IE8可以，但是FF没有。最后证明是地址。我有它在`........\My Documents\Desktop\HelloWorldWebsite` 这个空间混淆了FF。然后我用另一个路径重新定位html文件，没有空间，它适用于FF。

# html - 用内容扩展正文

> ID：11494807
> 
> 赞同：0
> 
> 时间：2012-07-15T19:13:35.277
> 
> 标签：html, css, css-position

我有一个关于相对定位的问题。我希望身体有一个背景颜色，比如蓝色。最初页面的高度应该是 100%（当然，这可能因计算机和笔记本电脑而异，因此我不能指定以像素为单位的固定高度），因此整个页面应该显示为蓝色。在页面的中间是一个元素，它已经通过相对定位设置到那个位置（它不能是绝对的，可以这样，以便随着它的内容扩展）。元素可以垂直扩展。如果高度超过页面边界，页面也应该扩展，扩展部分的背景仍然是蓝色的。

现在我该如何实现呢？我能想到的唯一解决方案是对背景元素使用相对定位（它是蓝色的，展开时应该保持蓝色）。但为此，我必须将其设置为可用高度（相对定位的元素不能通过百分比值分配高度，因此排除`height: 100%`）。但是高度本身会因浏览器、视口大小等而异（我不能使用 Javascript！）。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T19:18:00.927

中间元素的高度是否已知？

您可能想看看这个[http://css-tricks.com/centering-in-the-unknown/](http://css-tricks.com/centering-in-the-unknown/)

一个可能有帮助的现场演示[http://jsfiddle.net/thebabydino/7N4Xx/](http://jsfiddle.net/thebabydino/7N4Xx/)

JavaScript 仅用于更改中间 div 的高度。

# mysql - 如何从 MySQL 中的 SELECT 中排除与 LEFT JOIN 不匹配的记录？

> ID：11494809
> 
> 赞同：3
> 
> 时间：2012-07-15T19:13:47.163
> 
> 标签：mysql, select, left-join

我正在尝试让产品搜索在 MySQL 5.0.88 中正常工作。

基本设置：我有表 A 与产品

```
A.id
A.ean
A.styleNo
A.price
A.seller (ID e.g. 123, 456) 
```

还有一张带有价目表的表 B

```
B.name
B.ean
B.alt_price
B.seller 
```

卖家可以定义可选的价目表，这些价目表与进行搜索的用户相匹配。我的搜索或多或少看起来像这样：

```
 SELECT A.styleNo, A.price, B.price
    FROM arts A
        LEFT JOIN pricelists B ON
                B.seller = A.seller 
            AND B.ean = A.ean 
            AND B.alt_price != 0
    WHERE...
    // pricelists
    AND ( B.name = "some_name" AND B.seller = "123" ) OR ( next applicable seller ) ... 
```

因此，在 LEFT JOIN 之后，我将按名称和卖家包括价格表中的所有商品。

这可以正常工作，因为它同时选择了正常价格 (A) 和 alt_price (B)，并且我可以在显示结果时检查现有的 alt_price 以向用户显示正确的价格。

但是，如果卖家没有为他的所有产品提供**替代价格**，我现在正在展示具有 A 价格的产品，而实际上我不想展示来自该卖家且没有价目表的产品完全进入（想想区域分类）。

因此，如果用户 X 有一个价目表“abc”而卖家 123 有 500 个产品，其中 200 个在价目表“abc”上，我只想显示 200 个产品，而不是 500 个和 200 个的正确价格。

我尝试在 LEFT JOIN 中使用**B.alt_price != 0**，但这无济于事，因为那里的所有物品都有价格。

**问题**
有没有办法在实际搜索中做到这一点，或者我是否必须在结果循环中做到这一点，我并不热衷于这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T20:30:47.877

```
SELECT 
    b.styleNo, b.price, a.alt_price
FROM
    pricelists a
INNER JOIN
    arts b ON a.seller = b.seller AND a.ean = b.ean
WHERE
    a.alt_price <> 0 AND
    a.name = 'name' AND
    a.seller = 123 
```

此处所做的是仅在两个表中的and字段匹配`INNER JOIN`时才返回该行，因此它只会检索在.`seller``ean``WHERE`

`LEFT JOIN`另一方面，无论另一个表中是否存在匹配项，A都会返回所有行。如果匹配，则显示第二个表中的相应值，但如果没有，则这些值将`NULL`来自第二个表，同时仍保留第一个表中的行数据。

因此，如果我们改为这样做`FROM arts a LEFT JOIN pricelists b ON ...`，我们将从 products 表中获取所有行，而不管 pricelist 表中是否存在匹配项。如果价格表不匹配，产品仍会显示，但价格表数据包含`NULL`值。

请注意，*左侧*的表`LEFT JOIN`保留其行数据，而不管*右侧*的表中是否匹配`LEFT JOIN`......因此为“LEFT”。

您可能想看看 Jeff Atwood[*对连接的直观解释，*](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)以了解不同`JOIN`类型的工作原理。

还要了解在连接*后*`WHERE`进行评估，因此您指定的条件过滤将在连接发生后应用。因此，如果您只想要 table2 的行与 a 中 table1 的行*不*匹配的所有行，则应指定.*`WHERE`*`LEFT JOIN``WHERE table2.fieldname IS NULL`**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T19:26:20.350

听起来您想要内部联接而不是外部联接。内连接只返回连接条件成功的那些组合。左连接将始终为左表中的每一行返回至少一行。

要仅获得具有 alt 价格的产品，请执行以下操作：

```
SELECT A.styleNo, A.price, B.price
    FROM arts A
        INNER JOIN pricelists B ON
                B.seller = A.seller 
            AND B.ean = A.ean 
            AND B.alt_price is not null
    WHERE... 
```

或者，您可以添加`AND B.alt_price is not null`到当前查询的 where 子句，尽管除非您的数据库的查询优化器接管，否则效率可能会降低。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T19:37:41.520

好的。终于找到了解决办法。

问题是，搜索将包含多个卖家，其中一些使用价格表，而另一些则不使用。

*   如果我在价格表 B 上进行 INNER JOIN，我将不会获得不使用价格表的卖家的产品，因为他们在 B 中没有任何条目。
*   如果我在价格表 B 上执行 LEFT JOIN，所有条目都将具有 NULL 或价格表 B 值，因此当我搜索对其某些产品使用价格表的卖家时，我将始终获得他的全部范围，而不管**alt_price**指定的
*   如果我尝试过滤这些不需要的记录（卖家使用价目表，排除不在其中的产品），通过将**B.alt_price != 0**添加到 WHERE 子句，我也排除了所有不使用价目表的卖家的产品。

我这样解决了：-无论如何我都必须构建这条线：

```
LEFT JOIN pricelists B ON
       // dynamic construct depending on number of sellers using pricelists matched to user
            B.seller = A.seller 
        AND B.ean = A.ean 
        AND B.alt_price != 0 
```

*   所以我创建了另一个变量，其中包括所有使用价目表并适用于该用户的卖家 ID。看起来像这样：

    123,456,789...

*   我将其添加到 WHERE 子句中：

    AND（如果（A.seller IN（123,456,789...），B.alt_price 不为空，1））

这样，我正在检查
(a) 记录是否来自适用于用户的价目表卖家，以及
(b) 如果是这种情况，则记录在 b.alt_price 中不得有 NULL 值，该记录不是价格表上会有，因为当 LEFT JOINING 时，sql 会将 NULL 添加到不在价格表 B 上的所有记录中。

那很难...**

# objective-c - MVC 和使用 UIButton 动态创建 UI 元素

> ID：11494811
> 
> 赞同：1
> 
> 时间：2012-07-15T19:14:01.080
> 
> 标签：objective-c, ios, model-view-controller

我理解MVC的概念。至少我希望我这样做，但是我最近遇到的一个特殊情况让我觉得我实际上不知道。

**问题：** 我正在尝试创建一个类，该类在应用于现有按钮时会添加编辑该按钮标题的功能。它通过动态生成一个 UITextField 来实现，该 UITextField 将依次填充 Button 的新名称。我持有在一个名为 CustomAnimation 的类中添加 UITextField 并通过以下方式对其进行初始化的逻辑：

```
CustomAnimation *yar = [[CustomAnimation alloc] initWithButton:customButton]; 
```

我遇到的问题是，当我尝试从自定义类（如 CustomAnimation）动态创建 UIButton 并尝试为其分配目标/动作时。由于 UIButton 实际上是从 CustomAnimation 类的 ViewController 内部生成的，因此前者应该获取指向父 ViewController 的指针，然后将其设置为目标。

```
[classButton addTarget:viewController action:@selector(dostuff:) forControlEvents:UIControlEventTouchUpInside]; 
```

一切都很好，除了一件事 - **dostuff**方法应该驻留在 ViewController 中以便对该按钮可见，而这里一切都变成了 hack。

*当您想从类而不是控制器内部生成临时 UI 元素时，正确的方法是什么？*

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T22:49:19.553

您可以通过多种方式查看 MVC 的粒度。如果我正确理解了您的问题，那么您正在尝试在单个控制级别上实现 MVC，在我看来，这在我看来过于精细。我试图瞄准一个更粗略的方法，其中控制器管理一大块 UI 控件，例如视图或窗口。

您可能会争辩说按钮标签的可编辑性是属于按钮（由它封装）的行为，因此它的实现是或应该是按钮整体实现的一部分。一旦您接受了这一点，您就可以将其实现为 UIButton 的子类，并将 CustomAnimation 中的代码移动到您的 UIButton 子类中。或者将 CustomAnimation 封装在 UIButton 的子类中，以更合适者为准。

# c - 与文字混淆，C中的算术

> ID：11494820
> 
> 赞同：2
> 
> 时间：2012-07-15T19:15:14.993
> 
> 标签：c, literals

我写了下面的代码，期望它输出`211`，但是当我编译并运行它时，我看到了`137`。

有人可以解释发生了什么吗？谢谢。

```
‎#include <stdio.h>

int main()
{
    int binary1,binary2;

    binary1 = 0100;
    binary2 = 0111;

    printf("%d\n", binary1 + binary2);

    return 0:
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-15T19:17:39.153

这些不是二进制数，而是[*八进制数*](http://en.wikipedia.org/wiki/Octal)（以 8 为基数）：

```
binary1 = 0100; // = 64
binary2 = 0111; // = 64 + 8 + 1 = 73

printf("%d \n", binary1 + binary2); // = 64 + 73 = 137 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-15T19:23:10.453

因为`%d`以十进制打印出数字。如果要打印八进制数，则需要使用`%o`，这将打印出**211**。

*   `%d`: 十进制 => 137
*   `%o`: 八进制 => 211

`printf()`不知道你用八进制定义了数字。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-15T19:19:05.747

0100 和 0111 中的前导零表示这些数字将被解释为八进制数。八进制的 100 是十进制的 64，八进制的 111 是十进制的 73。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T19:18:02.377

这两个数字都是八进制数，并以 8 为基数相加。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-15T19:25:28.690

在 C 中，以“0”为前缀的数字文字是八进制（以 8 为基数）。这就是为什么它显示结果 137

八进制的 0100 相当于十进制的 64，而 0111 相当于 73，

```
so 64+73 = 137 
```

# c++ - 相同代码在不同设备上的不同行为

> ID：11494827
> 
> 赞同：1
> 
> 时间：2012-07-15T19:15:49.867
> 
> 标签：c++, arduino

我很困惑。我有一个相同的程序被上传到两个不同的 Arduino 板。它在 C++ 中。

这是一个更大的程序，但我将其缩减为仅存在问题的部分。基本上，我有一个“主机”Arduino 和一个“漫游者”Arduino 进行无线通信。有多个流动站单元，但问题只发生在其中一个上。漫游车有需要校准的电机，所以我的`Motor`命名空间中有静态变量来保存这些校准值。为了避免在源代码中更改这些值，每次我想校准它时重新编译和重新上传，我使用无线系统允许主机在运行时向流动站发送校准值。

这就是问题所在：在一个流动站上，如果我调用该`ChangeSpeed`方法，值不会被更新，但如果我直接修改变量，它们会得到更新。

让我强调一下，*它在五分之四的漫游车上运行良好*。问题恰好发生在一台漫游车上。上传到每个流动站的代码是相同的。

以下代码导致问题：

电机.h：

```
namespace Motor
{
    static unsigned char left_speed = 0;
    static unsigned char right_speed = 0;

    void ChangeSpeed(unsigned char, unsigned char);
} 
```

电机.cpp：

```
void Motor::ChangeSpeed(unsigned char l_speed, unsigned char r_speed)
{
    left_speed = l_speed;
    right_speed = r_speed; 

    soft.println("Change speed: " + String(left_speed) + ", " + String(right_speed));
} 
```

主要.cpp：

```
void UpdateSpeedValuesBad(unsigned char l_speed, unsigned char r_speed)
{
    Motor::ChangeSpeed(l_speed, r_speed);
    soft.println("Motor write: " + String(l_speed) + ", " + String(r_speed));
}

void UpdateSpeedValuesGood(unsigned char l_speed, unsigned char r_speed)
{
    Motor::left_speed = l_speed;
    Motor::right_speed = r_speed;
    soft.println("Motor write: " + String(l_speed) + ", " + String(r_speed));
}

void ReturnSpeedValues()
{
    soft.println("Motor read: " + String(Motor::left_speed) + ", " + String(Motor::right_speed));
} 
```

**情况1：**

在**坏**的流动站上，主机调用`UpdateSpeedValuesBad(5, 5)`，然后调用`ReturnSpeedValues`。输出是：

```
Change speed: 5, 5
Motor write: 5, 5
Motor read: 0, 0 
```

**案例二：**

在**坏**的流动站上，主机调用`UpdateSpeedValuesGood(5, 5)`，然后调用`ReturnSpeedValues`。输出是：

```
Motor write: 5, 5
Motor read: 5, 5 
```

**案例3：**

在一个**好的**流动站上，主机调用`UpdateSpeedValuesBad(5, 5)`，然后调用`ReturnSpeedValues`。输出是：

```
Change speed: 5, 5
Motor write: 5, 5
Motor read: 5, 5 
```

* * *

我在做一些根本错误的事情吗？我来自 C# 背景，所以 C++ 对我来说非常陌生。我不知道我是否正在做一些未定义行为的事情。

* * *

**编辑：**如果我将所有内容都放入一个文件中，它可以正常工作。仅当我将其拆分为头文件和 cpp 文件时，它才会失败。

主要.cpp：

```
#include <SoftwareSerial.h>

SoftwareSerial soft(9, 10);

namespace Motor
{
  static int left_speed = 0;

  void ChangeSpeed(unsigned char);
}

void Motor::ChangeSpeed(unsigned char l_speed)
{
  left_speed = l_speed;
  soft.println("Change speed: " + String(left_speed));
}

void setup()
{
  soft.begin(9600);

  soft.println("Before: " + String(Motor::left_speed));

  Motor::ChangeSpeed(5);
  soft.println("Bad attempt: " + String(Motor::left_speed));

  Motor::left_speed = 5;
  soft.println("Good attempt: " + String(Motor::left_speed));
}

void loop()
{
} 
```

输出：

```
Before: 0
Change speed: 5
Bad attempt: 5
Good attempt: 5 
```

* * *

**编辑 2：**我潜入装配中，发现这是坏的情况。它根据我是调用`ChangeSpeed`还是直接更新值使用不同的内存地址。有谁知道为什么会这样？它是编译器错误还是不能保证地址相同？

```
000000a8 <setup>:
{ 
    Motor::ChangeSpeed(5, 6);
  a8:   85 e0           ldi r24, 0x05   ; 5
  aa:   66 e0           ldi r22, 0x06   ; 6
  ac:   0e 94 5f 00     call    0xbe    ; 0xbe <_ZN5Motor11ChangeSpeedEhh>

    Motor::left_speed = 5;
  b0:   85 e0           ldi r24, 0x05   ; 5
  b2:   80 93 00 01     sts 0x0100, r24

    Motor::right_speed = 6;
  b6:   86 e0           ldi r24, 0x06   ; 6
  b8:   80 93 01 01     sts 0x0101, r24
}
  bc:   08 95           ret

000000be <_ZN5Motor11ChangeSpeedEhh>:

void Motor::ChangeSpeed( unsigned char l_speed, unsigned char r_speed )
{
    left_speed = l_speed;
  be:   80 93 02 01     sts 0x0102, r24
    right_speed = r_speed; 
  c2:   60 93 03 01     sts 0x0103, r22
  c6:   08 95           ret 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T20:12:07.947

您不应将这些变量设为静态。静态全局变量意味着该变量是编译单元（通常`.cpp`是正在编译的文件）的本地变量，因此如果您在头文件中声明了静态变量并将该头文件包含在`.cpp`分别编译的 3 个不同文件中，那么您将有该变量的 3 个独立版本，每个`.cpp`文件一个。

相反，在头文件中将它们声明为

```
namespace Motor {
  extern unsigned char left_speed;
  extern unsigned char right_speed;

  void ChangeSpeed(unsigned char, unsigned char);
} 
```

这告诉编译器某些文件将为这些变量提供定义并使用该公共共享定义。

然后，由于变量需要只定义一次（这称为[一个定义规则](http://en.wikipedia.org/wiki/One_Definition_Rule)），您应该将定义添加到`Motor.cpp`：

```
unsigned char Motor::left_speed = 0;
unsigned char Motor::right_speed = 0; 
```

我选择`Motor.cpp`保留定义，因为这是`ChangeSpeed`函数的定义所在。

在 C++ 中，`static`关键字的工作方式与在 C# 中大不相同。在类定义中使用时可能有点相似，但这就是相似之处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T20:06:58.683

通过声明变量`static`，您可以将它们的范围限制为当前代码单元。换句话说，通过在您的 中包含`static`变量`.h`，您会导致`Motor.cpp`并`Main.cpp`拥有这两个变量的单独副本。

您的案例 1 修改了`Motor.cpp`这些变量的副本，同时从`Main.cpp`. 案例 2 仅适用于`Main.cpp`副本，因此可以按预期工作。如果你把所有东西都放在一个文件中，你只会得到这些变量的一个副本。

您应该：

1.  在标头中声明变量`extern unsigned char left_speed, right_speed;`，然后`unsigned char left_speed = 0;`在其中一个`.cpp`文件中声明值；
2.  直接在其中一个文件中声明静态变量`.cpp`（例如`Rotor.cpp`）并使用函数来获取它们的值，就像使用一个来设置它们一样。

# symfony - Symfony/Doctrine 2 - 在实体中使用配置参数

> ID：11494836
> 
> 赞同：0
> 
> 时间：2012-07-15T19:16:47.617
> 
> 标签：symfony, doctrine-orm

我有一个 Employee 对象树（它们处于树状层次结构中，每个人都有一个领导，所有领导都有更多的员工）。所有员工都有一个称为单位的整数参数。

```
/**
 * @ORM\Entity
 * @ORM\Table(name="employees")
 */
class Employee
{
    /**
     * @ORM\Id
     * @ORM\Column(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\OneToMany(targetEntity="Employee", mappedBy="leader")
     */
    protected $employees;

    /**
     * @ORM\ManyToOne(targetEntity("Employee", inversedBy="employees")
     */
    protected $leader;
} 
```

我需要获取最多拥有 N 个单位的所有员工，其中 N 在`config.yml`. 起初，我试图将 $configContainer 推入 $GLOBALS，并在 ArrayCollection::filter() 的闭包中使用它。现在我找到了一个方法，所以我可以`use`在闭包中变量：

```
public function getBestEmployees(&$configContainer)
{
    return $this->getAllEmployees()->filter(
        function bestEmployees($employee) use ($configContainer)
        {
            return ($employee->getUnits() >= $configContainer->getParameter('best_unit_count'));
        }
    );
} 
```

现在我想知道是否有任何其他方法可以从实体访问配置参数，还是我真的必须将整个 configContainer 作为参考传递？还是我做错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T20:29:49.623

您根本不应该在实体内部访问服务容器。值本身应该被传递

```
public function getBestEmployees($bestUnitCount)
{
    return $this->getAllEmployees()->filter(function ($employee) use ($bestUnitCount) {
        return $employee->getUnits()->count() >= $bestUnitCount;
    });
} 
```

当然，我们还没有真正解决这个问题：参数仍然需要从容器的某个地方获取。如果这个方法主要在控制器动作中被调用，我不会费心做任何额外的工作来使事情变得更干净，并且会直接在控制器动作中传递容器参数。

但是，例如，如果需要在 Twig 模板中获取最佳员工，则最好不需要传递参数。一种可能性是使用 setter 方法并预先将参数传递给从数据库中检索到的每个实体。您可以在存储库或实体管理器中执行此操作。最先进的解决方案是监听事件并在[事件监听](http://symfony.com/doc/current/cookbook/doctrine/event_listeners_subscribers.html)`postLoad`器中传递参数。

# .net - 有没有办法为 RichTextBox 中的一段文本指定完整的理由？

> ID：11494842
> 
> 赞同：0
> 
> 时间：2012-07-15T19:17:55.887
> 
> 标签：.net, winforms, richtextbox, rtf

我目前正在使用从 RichTextBox 控件派生的控件生成用于打印的报告。我有几个段落缩进了`.SelectionIndent`and`.SelectionRightIndent`属性，但我也希望使它们完全对齐（带有微妙的子字符间距，就像 Microsoft Word 的做法一样）。

该`.SelectionAlignment`属性可用，但仅提供`Left`、`Center`和`Right`对齐。

有没有办法在 RichTextBox 中指定完全对齐？如有必要，我愿意深入研究底层 RTF 协议（如果协议本身支持此功能），但我不愿意创建格式化为完全正当理由的文本的位图以嵌入到文档中。

对于它的价值，我正在使用来自 msftedit.dll 的 RICHEDIT50W，并且不能依赖安装了任何版本的 Word 的客户端。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T20:24:07.107

[您可以像这样](http://geekswithblogs.net/pvidler/archive/2003/10/15/182.aspx)扩展 RichTextBox 控件并将[PARAFORMAT2 结构的](http://msdn.microsoft.com/en-us/library/windows/desktop/bb787942%28v=vs.85%29.aspx)段落对齐成员`wAlignment`设置为 `PFA_JUSTIFY`. 要使用此成员，`set the PFM_ALIGNMENT flag in the dwMask member`.

**注意：** ***RichEdit 2.0**段落是合理的。RichEdit 3.0 之前的 Rich Edit 控件显示与左边距对齐的文本。*

```
 PARAFORMAT2 fmt = new PARAFORMAT2();
        fmt.cbSize = Marshal.SizeOf( fmt );
        fmt.dwMask = PFM_ALIGNMENT;
        fmt.wAlignment = ( short )value; /// PFA_JUSTIFY here.

        // Set the alignment.
        SendMessage( new HandleRef( this, Handle ),
                     EM_SETPARAFORMAT,
                     SCF_SELECTION, ref fmt ); 
```

[您必须编写 WIN32 api 的相应 P/Invokes，如示例链接中所述]

# android - 在列表视图中保存任何信息而不使用 Android 中的数据库

> ID：11494847
> 
> 赞同：0
> 
> 时间：2012-07-15T19:18:01.737
> 
> 标签：android, android-listview

我想在不使用数据库的情况下制作提醒应用程序。如何在列表视图项目中保存提醒（如提醒 1，提醒 2 最多为 3），以便通过单击任何列表视图项目，我可以打开我之前设置的提醒？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T19:24:30.397

Android中有许多可用的[存储选项。](http://developer.android.com/guide/topics/data/data-storage.html)可能只是存储在文件中对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T20:08:53.737

好吧，只是为了三个提醒，我可能会选择 SharedPreferences

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T04:48:10.107

为此使用共享首选项。

使用以下代码将数据保存到共享首选项中

```
SharedPreferences myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
SharedPreferences.Editor prefsEditor = myPrefs.edit();
prefsEditor.putString(MY_NAME, "Sai");
prefsEditor.putString(MY_WALLPAPER, "f664.PNG");
prefsEditor.commit(); 
```

使用以下代码从共享首选项中获取数据

```
SharedPreferences myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
String prefName = myPrefs.getString(MY_NAME, "nothing");
String wallPaper = myPrefs.getString(MY_WALLPAPER, null); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T04:54:47.660

[共享偏好](http://developer.android.com/guide/topics/data/data-storage.html#pref)

[内部存储](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)

[外置储存](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)

[Sqlite 数据库](http://developer.android.com/guide/topics/data/data-storage.html#db)

[网络存储](http://developer.android.com/guide/topics/data/data-storage.html#netw)

# jquery - jQuery - 'this' 选择器在回调函数中不起作用

> ID：11494848
> 
> 赞同：6
> 
> 时间：2012-07-15T19:18:04.280
> 
> 标签：jquery, jquery-selectors, this

> **可能重复：**
> [$(this) 在函数中不起作用](https://stackoverflow.com/questions/7859558/this-doesnt-work-in-a-function)

我正在用 jQuery 编写删除后的代码，删除本身是通过对支持的后请求进行的，在服务器返回 200 后，我想在客户端删除这篇文章。

```
$('.delete-post').click(function() {
    $.post($(this).attr('href'), {}, function(data) {
        $(this).closest('.post').remove();
    });
    return false;
}); 
```

但是，我注意到里面的 function(data) {...) 选择器 'this' 不起作用。`$('.delete-post')`我需要使用“.post”类删除最接近div 的内容。如何管理这个问题？谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-15T19:19:46.037

`$(this)`存在于`click event`但`function(data) {`不是点击事件的一部分`rather callback function`。因此，将 $(this) 保存在某个变量中以`that`供以后使用。

试试这个：

```
$('.delete-post').click(function(e) {
    e.preventDefault();
    var that = $(this);
    $.post(that.attr('href'), { }, function(data) {
        // $(this).closest('.post').remove();
        that.closest('.post').remove();
    });
}); 
```

# delphi - Delphi 的 MediaInfoList 示例

> ID：11494850
> 
> 赞同：0
> 
> 时间：2012-07-15T19:18:36.253
> 
> 标签：delphi, mediainfo

根据位于[http://mediainfo.sourceforge.net/en/Support/SDK/Doxygen/class_media_info_lib_1_1_media_info_list.html](http://mediainfo.sourceforge.net/en/Support/SDK/Doxygen/class_media_info_lib_1_1_media_info_list.html)的 MediaInfo 文档，MediaInfoList 类用于一次收集有关多个文件的信息。

我遇到的问题是下载包附带的 MediaInfoDLL.pas 文件不包含我访问此类所需的任何信息，而且我在网上找不到任何示例来展示如何在 Delphi 中使用此类。

如果有人对我应该如何访问此类有任何参考或示例，请分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T14:00:22.480

那是Visual C++ 类，它与Delphi 类完全不同。

您可以尝试使用 C++ Builder 编译整个 MediaInfo。或者使用 Visual C++ 在该类上创建 COM 类。

或者最好根本不使用类。最简单的。而且最实用。

制作自己的类包装非类 API

# android - 如果我在 onCreate 期间启动 AsyncTask，它什么时候开始执行？

> ID：11494852
> 
> 赞同：3
> 
> 时间：2012-07-15T19:18:47.207
> 
> 标签：android, android-asynctask, android-lifecycle

我想确保我不会减慢我的应用程序的启动时间并且需要启动与用户输入无关的后台任务——例如，填充缓存。

如果我`AsyncTask`从我`onCreate`的方法开始，该方法何时`doInBackground`真正开始执行？（假设单核设备）

Android是否有可能在`onCreate/onResume`完成之前安排它，或者它是否足够聪明地认识到后台线程不应该在UI线程完全完成之前运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T20:18:33.937

如果您查看`AsyncTask` [源代码](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/os/AsyncTask.java)，您会发现它只是使用`ThreadPoolExecutor`或串行执行器来运行任务。默认内部行为取决于 Android 版本（来自 AsyncTask 文档）：

> 首次引入时，AsyncTask 在单个后台线程上串行执行。从 DONUT 开始，这被更改为允许多个任务并行运行的线程池。从 HONEYCOMB 开始，任务在单个线程上执行，以避免并行执行导致的常见应用程序错误。

但无论如何，`doInBackground`执行与`Activity`生命周期无关，因此`AsyncTask`几乎可以随时执行。这仅取决于您已经启动了多少任务，默认情况下`Executor`由`AsyncTask`线程调度程序使用和使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T21:26:36.013

I usually use `AsyncTask`s in `onCreate()` like this:

```
private MySuperSpecialTask mySuperSpecialTask;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // setContentView(...);
    // [...]

    mySuperSpecialTask = new MySuperSpecialTask();
    mySuperSpecialTask.execute();
}

@Override
protected void onDestroy() {
    super.onDestroy();
    if (mySuperSpecialTask != null) {
        mySuperSpecialTask.cancel(true);
    }
} 
```

This makes sure that everything is initialized before the task gets started.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T21:41:24.253

实际上严格来说，您的 UI 代码没有执行顺序并启动我发现的 asynctask。通常人们不会遇到这种情况，但是，如果您的 UI 线程由于某种原因需要更长的时间，例如等待外部输入等，则 asynctask 可能在 UI 代码完成之前就已启动。

编写 UI 代码只是对 Android 系统的一个请求，它在执行循环中等待。因此，如果 asynctask 在此之前启动，因为有足够的资源（或者如上所述的 UI 线程由于任何原因而延迟），则没有执行顺序保证。

执行此操作的一种简单方法是-如果您不介意并且可以确定它足够了-使用 ScheduledExecutorService 延迟异步任务的启动，或者“更清洁”的方法是实现某种等待的看门人将标志设置为 true，然后启动 asynctask。或者你甚至可能在你的 asynctask 开始时有一个 while 循环，它等待标志设置为 true，就像在许多与外部设备的通信情况下一样。

在您可以（通常）确定您的 UI 已完成之后，该标志将设置为 true。

# asp.net - WinDBG - 分析本地 PC 上的转储文件

> ID：11494857
> 
> 赞同：3
> 
> 时间：2012-07-15T19:19:26.460
> 
> 标签：asp.net, debugging, windbg

我使用以下命令在服务器上创建了 ASP.NET 进程的内存转储：.dump /ma mydump.dmp。我正在尝试识别内存泄漏。

我想在我的本地开发 PC 上更详细地查看转储文件。我在某处读到建议在创建转储文件的同一台机器上进行调试。但是，我也读到一些开发人员确实分析了他们本地开发 PC 上的转储文件。最好的方法是什么？

我注意到当我使用上面的命令创建转储文件时，W3WP 进程内存增加了大约 1.5 倍。这是为什么？我想这应该在实时服务器上避免。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T20:13:40.943

我不是 WinDBG 方面的专家，但我曾经不得不分析我的 ASP.NET 站点上的转储文件以找到一个`StackOverflowException`.

虽然我得到了我的实时站点的转储文件（我别无选择，因为那是失败的原因），最初我试图在我的本地开发 PC 上分析该转储文件，但在尝试从中加载 CLR 数据时遇到了问题。原因是我的开发 PC 和服务器之间的 .NET 框架的确切版本不同 - 两者都是 .NET 4，但我想我的开发 PC 安装了一些服务器没有安装的累积更新。由于这种差异， [SOS 模块](http://msdn.microsoft.com/en-us/library/bb190764.aspx)只是拒绝加载。我实际上写了[一篇](http://inthecodingzone.blogspot.co.uk/2012/05/how-windbg-helped-me-find-my.html)关于我的发现的博客文章。

因此，要回答您的部分问题，您可能别无选择，只能从您的服务器运行 WinDBG，至少您可以确定转储文件将与您的环境匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T03:00:41.777

在同一台机器上进行分析可以使您免于之后的 SOS 加载问题。除非您熟悉 WinDbg 和 SOS，否则您会发现它令人困惑和沮丧。

如果您必须使用另一台机器进行分析，请务必仔细阅读这篇博文，[http://blogs.msdn.com/b/dougste/archive/2009/02/18/failed-to-load-data-access -dll-0x80004005-or-what-is-mscordacwks-dll.aspx](http://blogs.msdn.com/b/dougste/archive/2009/02/18/failed-to-load-data-access-dll-0x80004005-or-what-is-mscordacwks-dll.aspx)，因为它向您展示了如何将必要的文件从源计算机（捕获转储的位置）复制到目标计算机（启动 WinDbg 的计算机）。

对于您的第二个问题，当您使用 WinDbg 直接附加到进程并使用 .dump 命令捕获转储时，不幸的是目标进程被修改了。不容易用几句话来解释。推荐的方法是使用 ADPlus.exe 或 Debug Diag。甚至来自 SysInternals 的 procdump 也更好。这些工具专为转储捕获而设计，它们对目标进程的影响最小。

For memory leak from unmanaged libraries, you should use memory leak rule of Debug Diag. for managed memory leak, you can simply capture hang dumps when memory usage is high.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T20:55:07.737

除非问题很难在您的开发机器上表现出来，否则无需在实际机器上进行调试。

只要您拥有带有私有符号的 pdb，那么应该解析这些符号并正确显示调用堆栈并安装正确版本的 .NET。

在查看内存泄漏方面，您应该启用 Gflags 用户堆栈跟踪并以 2 个间隔进行内存转储，以便您可以比较引起内存泄漏的操作之前和之后的内存使用情况，记住之后禁用 gflags！

您还可以在具有自动内存压力分析脚本的服务器上运行 DebugDiag，该脚本将与 .Net 泄漏一起使用。

# mysql - 如果两个表具有特定相等，如何进行选择连接

> ID：11494863
> 
> 赞同：1
> 
> 时间：2012-07-15T19:20:00.240
> 
> 标签：mysql, join

在两个不同的数据库中有两个表：

可以说我有 Database`users`和 Database `questions`。如果`users`有一个名为的`USER_STATS`表

```
USER_ID,
EDU_INT1,
EDU_INT2,
EDU_INT3 
```

, 并`questions`有一个名为的表`questions`，其中有一列名为 CLASS_SUBJECTS。

我想运行一个查询，该查询将显示 * from `QUESTIONS`where`CLASS_SUBJECTS`等于`EDU_INT1,EDU_INT2,EDU_INT3`其中`EDU_INT`'s 是从特定的`USER_ID`

有任何想法吗？由于两个不同的数据库，这有点困难

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T19:26:30.137

在跨两个数据库进行查询时，您只需在数据库名称前面加上一个`.`表名，如 in `database.table.column`，并且数据库连接用户必须有权访问这两个数据库。

除此之外，这是一个常规的`JOIN`，但使用 3 个条件的更复杂的`ON`子句`OR`一起使用：

```
SELECT
  q.*
FROM 
  questions.questions q
  JOIN users.USER_STATS u ON (
    q.CLASS_SUBJECTS = u.EDU_INT1
    OR q.CLASS_SUBJECTS = u.EDU_INT2
    OR q.CLASS_SUBJECTS = u.EDU_INT3
  )
WHERE u.USER_ID = <some user id> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T19:52:26.420

如果两者都在单个服务器上的同一实例中运行，则数据库名称引用可能会起作用。如果您需要扩展到多台服务器，您可能需要使用复制并可能设置联合表。

*   [http://dev.mysql.com/doc/refman/5.5/en/federated-storage-engine.html](http://dev.mysql.com/doc/refman/5.5/en/federated-storage-engine.html)

# java - Java.lang.Cloneable 接口指南的问题

> ID：11494865
> 
> 赞同：0
> 
> 时间：2012-07-15T19:20:05.380
> 
> 标签：java, clone

按照`java.lang.Cloneable`界面：

的[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Cloneable.html)说`Cloneable`-

> 请注意，此接口不包含 clone 方法。因此，不可能仅凭借实现该接口的事实来克隆对象。即使以反射方式调用 clone 方法，也不能保证它会成功。

但是下面的代码工作正常。我打电话时它没有给出任何错误`ex1.clone`。

```
package com.sriPushpa.thread;

public class exceptionHandling implements Cloneable {
    int a = 10;

    public static void main(String args[]) {
        exceptionHandling ex1 = new exceptionHandling();
        exceptionHandling ex2 = null;
        try {
            ex2 = (exceptionHandling) ex1.clone();

        } catch (CloneNotSupportedException e) {

            e.printStackTrace();
        }
        System.out.println("SUCCESS");
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T19:24:55.053

在您的情况下，`Object`调用方法，因为每个类都继承自`java.lang.Object`该类。此`clone()`实现仅进行逐个字段的复制。

`Cloneable`是一个**标记界面**。标记接口是既没有定义方法也没有定义变量的接口，但用于在运行时提供有关对象的类型信息。

通过将此标记接口添加到您的类定义中，可以保证`CloneNotSupportedException`调用您的类时不会抛出任何错误`clone`。

* * *

一般建议是查看[Copy Constructor 与 Cloning](http://www.artima.com/intv/bloch13.html) (Josh Bloch) 是否真的想使用`clone`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T19:23:19.977

根类`java.lang.Object`包含方法[clone()](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#clone%28%29)。默认情况下，如果具体类实现 Cloneable，则默认类实现会进行浅拷贝。

从方法文档：

> 类 Object 的方法 clone 执行特定的克隆操作。首先，如果该对象的类没有实现接口 Cloneable，则抛出 CloneNotSupportedException。...因此，此方法执行此对象的“浅拷贝”，而不是“深拷贝”操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T19:28:55.097

该`clone()`方法由`java.lang.Object`, 作为受保护的方法实现。您的代码有效，因为您`clone()`从与您克隆的类相同的类中调用该方法。

如果您希望您的对象是可克隆的，您应该重写该`clone()`方法并将其公开：

```
public Object clone() throws CloneNotSupportedException {
    return super.clone();
} 
```

请注意，文档并没有说实现 Cloneable 接口总是会`clone()`失败。它说实施它并不能保证`clone()`会奏效。这是非常不同的。

# shell - CakePhp2 定义了 CAKE_CORE_INCLUDE_PATH，现在 DS 和 CORE_PATH 在 ShellDispatcher 中未定义

> ID：11494867
> 
> 赞同：1
> 
> 时间：2012-07-15T19:20:21.687
> 
> 标签：shell, cakephp, console, cakephp-2.2

为了在多个站点之间共享 CakePhp2 核心，我在 webroot/index.php 中编辑了 CAKE_CORE_INCLUDE_PATH 以指向 cake 目录。那行得通，我可以到达我的欢迎页面。

但是，当我尝试运行 Cake Console 时，我遇到了 ShellDispatcher.php 未定义 DS 和 CORE_PATH 的问题，因为它们仅在未定义 CAKE_CORE_INCLUDE_PATH 时才定义。一旦我从检查 CAKE_CORE_INCLUDE_PATH 是否未定义的 if 语句中定义了它们，我就可以走了。但是，我不想“破解”这个文件，因为我想保持蛋糕核心文件的清洁。有没有更好更清洁的选择？

我还必须定义 CAKE_CORE_INCLUDE_PATH 并使用它在 Console/cake.php 中设置 $dispatcher，这当然是应用程序的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T21:42:18.510

是的，有。首先，永远不要在`Webroot/index.php`. 事实上，你根本不应该接触这个文件。您可以在 中定义变量 `Config/bootstrap.php`。

您收到错误是因为在 Shell 中您根本没有触发`Webroot/index.php`- 您实际上是在运行[PHP 的 CLI](http://php.net/manual/en/features.commandline.php)，而 CakePHP 以不同的方式触发。它当然会通过`bootstrap.php`文件。

[您还应该使用此文件来定义任何全局变量，但在使用PHP 的 $_SERVER 变量的](http://php.net/manual/en/reserved.variables.server.php)Web 服务器相关成员时，这里有一点瓶颈- 例如 HTTP_HOST 和定义：`$myHost = $_SERVER['HTTP_HOST'];`。如果你启动一个 shell，Cake 会尝试设置这个变量，它会失败并抛出一个错误。这是因为如前所述，当调用 CakeShell 时，PHP 将在 CLI 模式下运行。当然有一种方法可以检测到这一点 - 您可以使用 $_SERVER['SCRIPT_FILENAME'] 或 $_SERVER['SCRIPT_NAME']`bootstrap.php`来确定您是否在 CLI 中。:)

# git - 将 git 与 TextMate 一起使用时遇到问题

> ID：11494874
> 
> 赞同：0
> 
> 时间：2012-07-15T19:20:46.183
> 
> 标签：git, textmate

我正在尝试将 git 与 TextMate 一起使用。当我想初始化一个 repo 时，我有这个消息错误，即使我将 TM_GIT shell 变量指向正确的 'which git' ：

/Applications/TextMate.app/Contents/SharedSupport/Bundles/Git.tmbundle/Support/tmvc/../lib/git.rb:382:in `chdir': can't convert nil into String (TypeError) from /Applications/TextMate.app/Contents/SharedSupport/Bundles/Git.tmbundle/Support/tmvc/../lib/git.rb:382:in`init' 来自....

有人有想法吗？

顺便说一句，是否可以像 Aptana IDE 那样将终端集成到 TextMate 环境中？

最好的，迈赫迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T22:00:03.753

我无法回答您问题的第一部分（也是最重要的部分），但第二部分的答案是否定的。您可以运行外部命令，甚至获得不错的可点击输出，但无法将终端仿真器集成到 TextMate 中。也许在 2.0 中？

# linux - Ubuntu 包管理（基础）：sudo apt-get upgrade firefox

> ID：11494877
> 
> 赞同：-4
> 
> 时间：2012-07-15T19:21:21.987
> 
> 标签：linux, ubuntu, package-managers

只是想在最新的 ubuntu 上将 firefox 从 11.0 更新到 13.0，所以执行了以下操作：

$ sudo apt-get 升级火狐

认为我的Firefox会升级。

相反，ubuntu 似乎开始更新整个系统中的每一个包。现在我无法停止该过程，因为担心如果我这样做可能会使系统处于不一致的状态。

在命令行中发出正确的命令以升级单个软件包时，我哪里出错了。OK，幸好15分钟后命令成功返回。

升级和更新有什么区别？

谢谢，

约翰·戈切

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T19:28:28.483

直接取自 apt-get 手册页：

```
update
   update is used to resynchronize the package index files from their
   sources. The indexes of available packages are fetched from the
   location(s) specified in /etc/apt/sources.list. For example, when
   using a Debian archive, this command retrieves and scans the
   Packages.gz files, so that information about new and updated
   packages is available. An update should always be performed before
   an upgrade or dist-upgrade. Please be aware that the overall
   progress meter will be incorrect as the size of the package files
   cannot be known in advance.

upgrade
   upgrade is used to install the newest versions of all packages
   currently installed on the system from the sources enumerated in
   /etc/apt/sources.list. Packages currently installed with new
   versions available are retrieved and upgraded; under no
   circumstances are currently installed packages removed, or packages
   not already installed retrieved and installed. New versions of
   currently installed packages that cannot be upgraded without
   changing the install status of another package will be left at
   their current version. An update must be performed first so that
   apt-get knows that new versions of packages are available. 
```

update 用于更新 apt-get 包列表， upgrade 用于安装*所有*包的更新。要仅更新一个包，请使用 install。

```
sudo apt-get install firefox
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T19:23:55.567

尝试这个：

```
apt-get update
apt-get install firefox 
```

您还必须使用 install 命令来安装和更新软件包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T19:27:18.137

来自`man apt-get`：

> 升级
> 
> upgrade 用于从 /etc/apt/sources.list 中列举的源安装当前安装在系统上的所有软件包的最新版本。检索和升级当前安装的带有可用新版本的软件包
> 
> (...)
> 
> 安装
> 
> install 后跟一个或多个安装或升级所需的软件包。
> 
> (...)

# matlab - 圆与直线的交点

> ID：11494878
> 
> 赞同：0
> 
> 时间：2012-07-15T19:21:23.467
> 
> 标签：matlab, line, geometry

> **可能重复：**
> [线和圆的交点](https://stackoverflow.com/questions/11508932/line-and-circle-intersection)

我将如何找到这个圆和直线的交点。我在 matlab 中使用了带有斜率和截距的 lincirc 命令，但即使它不会完全穿过圆，它也会显示该点。我只想得到交叉的两点。如果线交叉一点，我想要一个交叉点。我不想要那条线的轨迹中的点。谢谢

# javascript - 书签时出现 Javascript 意外标识符

> ID：11494879
> 
> 赞同：1
> 
> 时间：2012-07-15T19:21:26.133
> 
> 标签：javascript, bookmarklet

我有这段代码可以正常工作：

```
if (typeof jQuery === "undefined" || jQuery.fn.jquery !== '1.4.2') {
var script_tag = document.createElement('script');
script_tag.setAttribute("type","text/javascript");
script_tag.setAttribute("src","http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js");
script_tag.onload = main; // Run main() once jQuery has loaded
script_tag.onreadystatechange = function () { // Same thing but for IE
if (this.readyState == 'complete' || this.readyState == 'loaded') main();
}
document.getElementsByTagName("head")[0].appendChild(script_tag);
} else {
    main();
} 
```

但是当我尝试通过书签程序压缩它时，出现“意外标识符”错误

```
javascript:(function(){if(typeof%20jQuery===%22undefined%22%20||%20jQuery.fn.jquery%20!=='1.4.2'){var%20script_tag=document.createElement('script');script_tag.setAttribute(%22type%22,%22text/javascript%22);script_tag.setAttribute(%22src%22,%22http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js%22);script_tag.onload=main;script_tag.onreadystatechange=function(){if(this.readyState=='complete'%20||%20this.readyState=='loaded')main();}document.getElementsByTagName(%22head%22)[0].appendChild(script_tag);}else{main();}})(); 
```

建议？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T19:38:00.790

不确定这是否是书签程序中的错误，但是`document.getElementsByTagName("head")[0].appendChild(script_tag);`如果要像这样将所有内容都挤到一行中，则需要一个分号。

一旦你这样做了，意外的标识符错误就会消失。除非您实际上之前已经定义`main`过，否则您将收到“main is not defined”的新错误。

# nsis - 使用nsdialog将文本文件读入文本框？国家安全情报局

> ID：11494880
> 
> 赞同：0
> 
> 时间：2012-07-15T19:21:27.713
> 
> 标签：nsis

我是 NSIS 脚本安装程序的新手。我需要在自定义页面中创建一个支持多行的文本框。需要读取一个文本文件并将文本内容设置为 TextBox。请在下面找到我的代码块：

```
StrCpy $3 ""
FileOpen $4 "C:\Users\Surya\Desktop\Installer\License.txt" r
loop:
FileRead $4 $1

StrCpy $3 "$3$1" ; append the line and copy it to another variable
IfErrors +1 loop   
FileClose $4

${NSD_SetText} $ctrlTextBox "$3" 
```

上面的代码只能读取 8119 个字符，但我的文件包含 30,000+ 个字符。

请帮我阅读大文件并将内容设置为 TextBox。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T01:07:34.717

如果您使用[EM_SETSEL](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761661%28v=vs.85%29.aspx)（两次）将插入符号移到末尾，然后使用[EM_REPLACESEL](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761633%28v=vs.85%29.aspx)附加文本，则可以在当时（在循环内）用一点文本填充文本框。

如果您可以使用丰富的编辑框而不是使用我很久以前编写的一些代码，您可以在[此处](http://forums.winamp.com/showthread.php?t=288129)找到论坛主题...

编辑：

只要您开始时文本框为空，您就不必处理插入符号：

```
function custcreate
nsDialogs::Create 1018
Pop $0

nsDialogs::CreateControl ${__NSD_Text_CLASS} ${__NSD_Text_STYLE}|${ES_MULTILINE}|${WS_VSCROLL}|${ES_READONLY} ${__NSD_Text_EXSTYLE} 0 0 100% 50u ""
Pop $0

FileOpen $4 ${__FILE__}" r
loop:
    FileRead $4 $1
    SendMessage $0 ${EM_REPLACESEL} 0 "STR:$1"
    IfErrors +1 loop
FileClose $4

nsDialogs::Show
functionend 
```

# objective-c - Objective-c 子类化给出链接错误

> ID：11494881
> 
> 赞同：0
> 
> 时间：2012-07-15T19:21:33.820
> 
> 标签：objective-c, initialization, subclass

我正在尝试将游戏移植到 iOS，但我遇到了问题。我有一个名为 CKSprite 的类，其方法如下：

```
- (id)initWithFile:(NSString *)fileName effect:(GLKBaseEffect *)effect 
{     
    if ((self = [super init])) 
    {
        //some stuff
    }
    return self;
} 
```

然后我有一个名为 CKPLayer 的子类（除了它继承的之外，它目前没有其他方法或属性：

```
@property (strong) CKPlayer *player1; 
```

但是当我尝试使用父方法初始化它时：

```
self.player1 = [[CKPlayer alloc] initWithFile:@"Images/parrot.png" effect:self.effect]; 
```

我收到此错误：

架构 i386 的未定义符号：“_OBJC_CLASS_$_CKPlayer”，引用自：CKViewController.o 中的 objc-class-ref ld：找不到架构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v查看调用）

这是我第一次尝试做这样的事情，所以我可能做了一些愚蠢的事情。

任何帮助将不胜感激。

```
#import "CKSprite.h"

@interface CKPlayer : CKSprite

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T19:34:36.890

链接器缺少 CKPlayer 类的实现。也许您只是忘记实现它，因为它“目前没有其他方法或属性”，在这种情况下，只需添加一个应该如下所示的文件：

```
#import "CKPlayer.h"

@implementation CKPlayer
@end 
```

ld应该很高兴

# matlab - 在两个给定节点/顶点之间的路径中找到最大边

> ID：11494885
> 
> 赞同：0
> 
> 时间：2012-07-15T19:22:48.317
> 
> 标签：matlab, graph-theory, depth-first-search, minimum-spanning-tree

我正在尝试通过在 MST 中添加新顶点来更新 MST。为此，我一直在关注 Chin 和 Houck 的“更新生成树”。 [http://www.computingscience.nl/docs/vakken/al/WerkC/UpdatingSpanningTrees.pdf](http://www.computingscience.nl/docs/vakken/al/WerkC/UpdatingSpanningTrees.pdf)

论文中的一个步骤要求我在两个给定顶点之间的路径中找到最大的边。我的想法是找到顶点之间的所有可能路径，然后从路径中找到最大的边。我一直在尝试在 MATLAB 中实现这一点。然而，到目前为止，我一直没有成功。任何用于查找两个顶点之间的所有路径，甚至是两个给定节点/顶点之间路径中最大边的引导/清除算法都会受到欢迎。

作为参考，我想举一个例子。如果图形具有以下边 1-2、1-3、2-4 和 3-4，则 4 和 4 之间的路径为：

1) 4-2-1-3-4

2) 4-3-1-2-4

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T21:46:03.937

该算法通过降低 t 值来从新的 MST 中排除大边缘。当算法完成时，t 将是为完成 MST 需要插入的最低边。

m 值表示从 r 到 z 的路径上的最大边，在每次 INSERT 运行时都是局部的。如果可能，在循环的每次迭代中降低 m，从而将先前的 m 边缘作为 t 的可能候选者移除。

用文字解释起来并不容易，我建议在纸上运行算法，直到步骤清楚为止。

我快速尝试在这里勾勒出这些步骤：http: [//jacob.midtgaard-olesen.dk/ ?p=140](http://jacob.midtgaard-olesen.dk/?p=140)

但基本上，该算法从旧 MST 中添加边，除非它在新节点 z 和旧 MST 中的另一个节点之间找到要添加的较小边。在示例中，边 (A,B) 不在新树中，因为算法找到了与 B 的更好连接。

请注意，在选择 h 和 k 时，如果 t 和 (w,r) 具有相等的边缘值，我相信您应该选择 (w,r)

最后，您可能应该通过算法的证明来了解算法为何有效。（我没有全部读完:)）

# php - 无法连接到数据库

> ID：11494892
> 
> 赞同：0
> 
> 时间：2012-07-15T19:23:24.220
> 
> 标签：php, mysql

> **可能重复：**
> [无法连接到数据库 mysql？](https://stackoverflow.com/questions/6148588/unable-to-connect-to-the-database-mysql)

我正在为网站[http://astellar.com尝试 PHP 网络爬虫](http://astellar.com)

我一步一步地做了一切，还为 MySQL 创建了用户和数据库。然后也用用户连接到数据库，但它显示一个错误。

```
Warning: mysql_connect() [function.mysql-connect]: Access denied for user 'switsolu_kll'@'localhost' (using password: YES) in /home/switsolu/public_html/crawler/_db.php on line 43
Cannot connect to database server (Reason: Access denied for user 'switsolu_kll'@'localhost' (using password: YES)) 
```

我在哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T20:52:05.540

通常，当您创建用户时，您没有声明正确的主机名，或者请求来自“localhost”以外的主机。您可以为所有主机创建通配符用户，但有时规则的顺序会搞砸。

*   删除用户并重新创建

    授予 switsolu_aaa 上的所有特权。* 到 'switsolu_kll'@'localhost' 由 'abc123abc' 识别；

*   不要忘记刷新权限

    同花顺特权；

并且根据您的应用程序，您可能需要重新启动它或服务器以重置套接字连接并重试，但不必这样做，只需重试即可。

如果 localhost 不起作用，则删除用户并使用 'switsolu_kll'@'%' 重新创建。不要忘记刷新权限；创建用户后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T19:35:45.793

当 MySQL 密码错误时，几乎总是会出现此错误。检查，仔细检查，然后三次检查它是否正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T21:29:26.093

检查用户权限。如果您在本地运行，并且仍然具有 root 权限，请尝试：

```
<?php
$localhost = "localhost";
$mysqlusername  = "root";
$mysqlpassword  = "";
?> 
```

# c - Pygmalion 转换：使用“#define DLL”替代“extern”C”__declspec(dllexport)”

> ID：11494901
> 
> 赞同：1
> 
> 时间：2012-07-15T19:24:18.620
> 
> 标签：c, c-preprocessor, declspec

有没有办法使用细长的#define 将难看的“”extern \“C\”__declspec(dllexport)”转换为一个迷人的术语“DLL”。
即：

```
#define DLL "extern "C" __declspec(dllexport)" 
```

当然，问题在于 C 周围的嵌入式引号。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T19:29:03.163

您不需要包装引号。以下是合法的：

```
#define DLL extern "C" __declspec(dllexport) 
```

# java - 实施秒表

> ID：11494902
> 
> 赞同：0
> 
> 时间：2012-07-15T19:24:29.353
> 
> 标签：java, swing, concurrency, addeventlistener, event-dispatch-thread

谁能解释一下为什么我的开始/停止按钮不起作用？这不是一个完全实现的秒表，但我被困在这里。任何帮助表示赞赏！这是我第一次在论坛发问题，所以如果我的帖子有任何问题，请告诉我。这是我的代码：

```
public class StopWatch {

    private static boolean tiktok;

    public static void setGo(boolean go) {
        tiktok = go;
    }

    public static void main(String[] args) {
        int counter = 0;
        StopWatch stop = new StopWatch();
        ClockFrame window = new ClockFrame("StopWatch");
        JLabel lb = window.init();
        while (true) {
            lb.setText(Integer.toString(counter++));
            if (counter == 61) {
                counter = 0;
            }
            try {
                Thread.sleep(1000);
            } catch (InterruptedException ex) {
            }
        }
    }

}

class ClockFrame extends JFrame {
    JLabel hour, minus, sec;

    public ClockFrame(String title) {
        super(title);
    }

    JLabel init() {
        JFrame frame = new JFrame("Stop Watch");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel time = new JPanel();
        hour = new JLabel("0");
        minus = new JLabel("0");
        sec = new JLabel("0");
        time.add(hour);
        time.add(minus);
        time.add(sec);

        JPanel pane = new JPanel();
        pane.setLayout(new FlowLayout());
        JButton start = new JButton("Start");
        start.addActionListener(new startstopActionListener(true));
        JButton stop = new JButton("Stop");
        stop.addActionListener(new startstopActionListener(false));
        JButton reset = new JButton("Reset");
        pane.add(start);
        pane.add(stop);
        pane.add(reset);

        Container window = frame.getContentPane();
        window.setLayout(new GridLayout(2, 1));
        window.add(pane);
        window.add(time);

        frame.setSize(500, 200);
        frame.setVisible(true);
        return sec;
    }
}

class startstopActionListener implements ActionListener {

    private boolean b;

    public startstopActionListener(boolean b) {
        this.b = b;
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        StopWatch.setGo(b);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T20:27:16.960

如果你想在 Swing 中制作秒表，你最好看看这个[`javax.swing.Timer`](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)类。它使定期更新 Swing 组件（在您的情况下为 a `JLabel`）变得非常容易。使用`Timer`避免`Thread.sleep`调用，你不应该在事件调度线程上调用它，因为它阻塞了 UI。

JB Nizet 已经提供了[Swing 并发教程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)的链接。我建议您还查看本网站[“Swing 信息页面”](https://stackoverflow.com/tags/swing/info)的 Swing 并发部分提供的链接，以及[我](https://stackoverflow.com/questions/11088910/timing-with-swing-animation/11090056#11090056)对相关问题的回答。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T19:38:01.937

你不尊重 Swing 的线程策略：

1.  Swing 组件只能在事件调度线程中使用
2.  长时间运行和阻塞的方法（例如无限循环更新标签的方法）应该在事件调度线程之外用完（但标签的更新必须在 EDT 中进行 - 参见规则 1）

阅读[有关并发的 Swing 教程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)。

# xslt - 子字符串上的 XSL Muenchian 方法

> ID：11494904
> 
> 赞同：2
> 
> 时间：2012-07-15T19:24:31.427
> 
> 标签：xslt, muenchian-grouping

我正在尝试将一些 XML 输出转换为评级表（与水文相关），该表由顶部的百分之一值和下降的十分之一值组成。我遇到的问题是我似乎无法通过在 ht 属性上使用子字符串来对唯一值进行排序。

以下是 XML 输出的示例：

```
<env:Envelope>
<env:Header/>
<env:Body>
<RatingTableUpdate>      
  <Gauge xmlns="" type="STORAGE" id="123">
    <Input input="0">
      <Conv ht="19.76" cap="5040" />
      <Conv ht="19.77" cap="5045" />
      <Conv ht="19.78" cap="5051" />
      <Conv ht="19.79" cap="5057" />
      <Conv ht="19.80" cap="5063" />
      <Conv ht="19.81" cap="5069" />
      <Conv ht="19.82" cap="5074" />
      <Conv ht="19.83" cap="5080" />
      <Conv ht="19.84" cap="5086" />
      <Conv ht="19.85" cap="5092" />
      <Conv ht="19.86" cap="5098" />
      <Conv ht="19.87" cap="5104" />
      <Conv ht="19.88" cap="5109" />
      <Conv ht="19.89" cap="5115" />
      <Conv ht="19.90" cap="5121" />
      <Conv ht="19.91" cap="5127" />
      <Conv ht="19.92" cap="5133" />
      <Conv ht="19.93" cap="5138" />
    </Input>
  </Gauge>
</RatingTableUpdate>
</env:Body>
</env:Envelope> 
```

输出应如下所示：

```
GH    0.00  0.01  0.02  0.03  0.04  0.05  0.06  0.07  0.08  0.09
19.7                                      5040  5045  5051  5057  
19.8  5063  5069  5074  5080  5086  5092  5098  5104  5109  5115
19.9  5121  5127  5133  5138 
```

我能够在正确的列中获取 cap 属性，但无法使 GH 列（删除百分之一值的 ht 属性）每行仅显示一次。我得到这样的东西：

```
GH    0.00  0.01  0.02  0.03  0.04  0.05  0.06  0.07  0.08  0.09
19.7                                      5040  
                                                5045  
                                                      5051  
                                                            5057  
19.8  5063  
            5069  
                  5074  
                        5080  
                              5086  
                                    5092  
                                          5098  
                                                5104  
                                                      5109  
                                                            5115
19.9  5121  
            5127  
                  5133  
                        5138 
```

这是我格式化此部分的 xsl 部分。xsl:choose 似乎适用于列。我已经尝试过 Muenchian 方法，但不能完全正确（很难让它与子字符串键一起工作）。

**这是最好的方法，还是有另一种方法让每一行对给定的子字符串只显示一次（19.7 一次，19.76、19.77、19.78、19.79 值）？** 评分通常像示例一样从非零值开始，所以我不能只使用百分之一的 0 值来开始一个组，而使用 9 来结束一个组。

```
<xsl:for-each select="env:Envelope/env:Body/RatingTableUpdate/Gauge">

<table width="100%">
<tr class="site">                           
  <td width="150px">Site ID: <u><xsl:value-of select="@id" /></u></td>
  <td>Site Name: <u><xsl:value-of select="@idname" /></u></td>
  <td>Type: <u><xsl:value-of select="@type" /></u></td>
</tr>   
</table>        

<table width="100%">
  <tr class="tbldata">
    <th rowspan="1" class="tbldataheader">GH</th>
    <th rowspan="1" class="tbldataheader">0.00</th>
    <th rowspan="1" class="tbldataheader">0.01</th>
    <th rowspan="1" class="tbldataheader">0.02</th>
    <th rowspan="1" class="tbldataheader">0.03</th>
    <th rowspan="1" class="tbldataheader">0.04</th>
    <th rowspan="1" class="tbldataheader">0.05</th>
    <th rowspan="1" class="tbldataheader">0.06</th>
    <th rowspan="1" class="tbldataheader">0.07</th>
    <th rowspan="1" class="tbldataheader">0.08</th>
    <th rowspan="1" class="tbldataheader">0.09</th>
  </tr>  

  <xsl:for-each select="./Input/Conv">
    <tr class="tbldata">

      <xsl:choose>
        <xsl:when test="substring(@ht,string-length(@ht),1) = 0">
          <td class="ifrtext"><xsl:value-of select="substring(@ht,1,string-length(@ht)-1)" /></td>
        </xsl:when>
        <xsl:otherwise>
          <td class="ifrtext"></td>
        </xsl:otherwise>
      </xsl:choose>
       <xsl:choose>
        <xsl:when test="substring(@ht,string-length(@ht),1) = 0">
          <td class="ifrtext"><xsl:value-of select="@cap" /></td>
        </xsl:when>
        <xsl:otherwise>
          <td class="ifrtext"></td>
        </xsl:otherwise>
      </xsl:choose>
      <xsl:choose>
        <xsl:when test="substring(@ht,string-length(@ht),1) = 1">
          <td class="ifrtext"><xsl:value-of select="@cap" /></td>
        </xsl:when>
        <xsl:otherwise>
          <td class="ifrtext"></td>
        </xsl:otherwise>
      </xsl:choose>
      <xsl:choose>
        <xsl:when test="substring(@ht,string-length(@ht),1) = 2">
          <td class="ifrtext"><xsl:value-of select="@cap" /></td>
        </xsl:when>
        <xsl:otherwise>
          <td class="ifrtext"></td>
        </xsl:otherwise>
      </xsl:choose>
      <xsl:choose>
        <xsl:when test="substring(@ht,string-length(@ht),1) = 3">
          <td class="ifrtext"><xsl:value-of select="@cap" /></td>
        </xsl:when>
        <xsl:otherwise>
          <td class="ifrtext"></td>
        </xsl:otherwise>
      </xsl:choose>
      <xsl:choose>
        <xsl:when test="substring(@ht,string-length(@ht),1) = 4">
          <td class="ifrtext"><xsl:value-of select="@cap" /></td>
        </xsl:when>
        <xsl:otherwise>
          <td class="ifrtext"></td>
        </xsl:otherwise>
      </xsl:choose>
      <xsl:choose>
        <xsl:when test="substring(@ht,string-length(@ht),1) = 5">
          <td class="ifrtext"><xsl:value-of select="@cap" /></td>
        </xsl:when>
        <xsl:otherwise>
          <td class="ifrtext"></td>
        </xsl:otherwise>
      </xsl:choose>
      <xsl:choose>
        <xsl:when test="substring(@ht,string-length(@ht),1) = 6">
          <td class="ifrtext"><xsl:value-of select="@cap" /></td>
        </xsl:when>
        <xsl:otherwise>
          <td class="ifrtext"></td>
        </xsl:otherwise>
      </xsl:choose>
      <xsl:choose>
        <xsl:when test="substring(@ht,string-length(@ht),1) = 7">
          <td class="ifrtext"><xsl:value-of select="@cap" /></td>
        </xsl:when>
        <xsl:otherwise>
          <td class="ifrtext"></td>
        </xsl:otherwise>
      </xsl:choose>
      <xsl:choose>
        <xsl:when test="substring(@ht,string-length(@ht),1) = 8">
          <td class="ifrtext"><xsl:value-of select="@cap" /></td>
        </xsl:when>
        <xsl:otherwise>
          <td class="ifrtext"></td>
        </xsl:otherwise>
      </xsl:choose>
      <xsl:choose>
        <xsl:when test="substring(@ht,string-length(@ht),1) = 9">
          <td class="ifrtext"><xsl:value-of select="@cap" /></td>
        </xsl:when>
        <xsl:otherwise>
          <td class="ifrtext"></td>
        </xsl:otherwise>
      </xsl:choose>
    </tr>   
  </xsl:for-each>
</table>
</xsl:for-each> 
```

谢谢，马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T20:08:36.107

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:key name="kValByTenths" match="Conv"
      use="substring(@ht, 1, 4)"/>

 <xsl:key name="kCapFromHt" match="@cap"
      use="../@ht"/>

 <xsl:template match="Input">
  <table>
   <xsl:for-each select=
    "Conv[generate-id()
         =
          generate-id(key('kValByTenths',substring(@ht, 1, 4))[1])
          ]">
     <xsl:variable name="vKey" select="substring(@ht, 1, 4)"/>
     <tr>
      <td><xsl:value-of select="$vKey"/></td>

      <xsl:for-each select=
       "(//node() | //namespace::*)[not(position() > 10)]">
        <xsl:variable name="vPos" select="position()"/>
        <td>
         <xsl:value-of select="key('kCapFromHt', concat($vKey,$vPos -1))"/>
        </td>
      </xsl:for-each>
     </tr>
    </xsl:for-each>
   </table>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于提供的 XML 文档时**（更正为格式良好的 XML 文档）：

```
<env:Envelope xmlns:env="some:env">
    <env:Header/>
    <env:Body>
        <RatingTableUpdate>
            <Gauge xmlns="" type="STORAGE" id="123">
                <Input input="0">
                    <Conv ht="19.76" cap="5040" />
                    <Conv ht="19.77" cap="5045" />
                    <Conv ht="19.78" cap="5051" />
                    <Conv ht="19.79" cap="5057" />
                    <Conv ht="19.80" cap="5063" />
                    <Conv ht="19.81" cap="5069" />
                    <Conv ht="19.82" cap="5074" />
                    <Conv ht="19.83" cap="5080" />
                    <Conv ht="19.84" cap="5086" />
                    <Conv ht="19.85" cap="5092" />
                    <Conv ht="19.86" cap="5098" />
                    <Conv ht="19.87" cap="5104" />
                    <Conv ht="19.88" cap="5109" />
                    <Conv ht="19.89" cap="5115" />
                    <Conv ht="19.90" cap="5121" />
                    <Conv ht="19.91" cap="5127" />
                    <Conv ht="19.92" cap="5133" />
                    <Conv ht="19.93" cap="5138" />
                </Input>
            </Gauge>
        </RatingTableUpdate>
    </env:Body>
</env:Envelope> 
```

**产生想要的（没有装饰），正确的结果：**

```
<table>
   <tr>
      <td>19.7</td>
      <td/>
      <td/>
      <td/>
      <td/>
      <td/>
      <td/>
      <td>5040</td>
      <td>5045</td>
      <td>5051</td>
      <td>5057</td>
   </tr>
   <tr>
      <td>19.8</td>
      <td>5063</td>
      <td>5069</td>
      <td>5074</td>
      <td>5080</td>
      <td>5086</td>
      <td>5092</td>
      <td>5098</td>
      <td>5104</td>
      <td>5109</td>
      <td>5115</td>
   </tr>
   <tr>
      <td>19.9</td>
      <td>5121</td>
      <td>5127</td>
      <td>5133</td>
      <td>5138</td>
      <td/>
      <td/>
      <td/>
      <td/>
      <td/>
      <td/>
   </tr>
</table> 
```

**说明**：

1.  正确使用**[Muenchian 分组方法](http://www.jenitennison.com/xslt/grouping/muenchian.html)**，其中`Conv`元素由其`ht`属性的字符串值的前 4 个字符索引。

2.  正确使用**[Piez 方法](http://www.dpawson.co.uk/xsl/sect2/muench.html#d9944e300)**进行 N 次非递归迭代。

**更新**：

OP 报告说，由于 MSXML3 中的错误，他在使用 IE 8 时无法获得正确的结果。

这是一个修改后的解决方案，它也适用于 MSXML3 / IE 8：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kValByTenths" match="Conv"
      use="substring(@ht, 1, 4)"/>

 <xsl:variable name="vConvs" select="//Conv"/>

 <xsl:template match="Input">
  <table>
   <xsl:for-each select=
    "Conv[generate-id()
         =
          generate-id(key('kValByTenths',substring(@ht, 1, 4))[1])
          ]">
     <xsl:variable name="vKey" select="substring(@ht, 1, 4)"/>
     <tr>
      <td><xsl:value-of select="$vKey"/></td>

      <xsl:for-each select=
       "(//node() | //namespace::*)[not(position() > 10)]">
        <xsl:variable name="vPos" select="position()"/>

        <td>
         <xsl:value-of select=
         "$vConvs[substring-after(@ht, $vKey) = $vPos]/@cap"/>
        </td>
      </xsl:for-each>
     </tr>
    </xsl:for-each>
   </table>
 </xsl:template>
</xsl:stylesheet> 
```

# node.js - Express.js - 当在 MongoDB 中找不到记录时显示自定义 404 页面

> ID：11494905
> 
> 赞同：3
> 
> 时间：2012-07-15T19:24:33.167
> 
> 标签：node.js, mongodb, express

我正在使用[node-mongodb-native](http://mongodb.github.com/node-mongodb-native/)驱动程序。我试过

```
collection.findOne({email: 'a@mail.com'}, function(err, result) {
  if (!result) throw new Error('Record not found!');
}); 
```

但是错误被 mongodb 驱动程序捕获，并且 express 服务器被终止。

这种情况的正确方法是什么？

=== 编辑===

我在 app.js 中有以下代码

```
app.configure('development', function() {
    app.use(express.errorHandler({dumpExceptions: true, showStack: true}));
});

app.configure('production', function() {
    app.use(express.errorHandler());
}); 
```

相关代码在`node_modules/mongodb/lib/mongodb/connection/server.js`

```
connectionPool.on("message", function(message) {
    try {
        ......
    } catch (err) {
      // Throw error in next tick
      process.nextTick(function() {
        throw err; // <-- here throws an uncaught error
      })
    }      
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T20:05:11.433

正确的使用不是抛出错误，而是**传递**给`next`函数。首先定义错误处理程序：

```
app.error(function (err, req, res, next) {
    res.render('error_page.jade');
}) 
```

（关于`error`被弃用的说法是什么？我对此一无所知。但即使那样你也可以使用`use`. 机制仍然是一样的。）。

现在在您的路线中，您将错误传递给处理程序，如下所示：

```
function handler(req, res, next) {
    collection.findOne({email: 'a@mail.com'}, function(err, result) {
        if (!result) {
            var myerr = new Error('Record not found!');
            return next(myerr); // <---- pass it, not throw it
        }
        res.render('results.jade', { results: result });
    });
}; 
```

确保之后没有其他代码（与响应相关）被触发`next(myerr);`（这就是我在`return`那里使用的原因）。

**旁注：** Express 无法很好地处理异步操作中引发的错误（好吧，实际上它们有些处理，但这不是您所需要的）。这可能会使您的应用程序崩溃。捕获它们的唯一方法是使用

```
process.on('uncaughtException', function(err) {
    // handle it here, log or something
}); 
```

but this is a global exception handler, i.e. you cannot use it to send the response to the user.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T19:39:04.730

我猜这个错误没有被捕获。您是否使用 Express 错误处理程序？就像是：

```
app.error(function (err, req, res, next) {
 res.render('error-page', {
  status: 404
 }); 
```

更多关于 Express 中的错误处理：http: [//expressjs.com/guide.html#error-handling](http://expressjs.com/guide.html#error-handling)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T19:45:34.153

在检查 mongodb 的错误方面，使用 '!error' 表示成功，而不是使用 '!result' 表示错误。

```
collection.findOne({email: 'a@mail.com'}, function(err, result) {
    if (!error) {
        // do good stuff;
    } else {
        throw new Error('Record not found!');
    }
}); 
```

至于自定义 404，我还没有在 node 和 express 中这样做，但我想它会涉及“app.router”。

# ocaml - 如何在 _oasis 文件中包含语法扩展？我正在尝试在我的项目中使用 deriving-ocsigen.syntax

> ID：11494912
> 
> 赞同：2
> 
> 时间：2012-07-15T19:25:40.443
> 
> 标签：ocaml

这是我当前的 _oasis 文件：

```
OASISFormat: 0.3
Name:        testing syntax
Version:     0.1
Synopsis:    testing
Authors:     Johnathan Doeman
License:     GPL-3

Executable testmain
  Path:       ./
  BuildTools: ocamlbuild
  BuildDepends: batteries, deriving-ocsigen, deriving-ocsigen.syntax
  MainIs:     main.ml 
```

请注意，我的系统上似乎已正确安装了 ocsigen-deriving。在正确的#requires 之后，我可以在顶层使用它。我也在使用 oasis 0.3 版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T21:05:59.603

在 Oasis 0.3 中可能有更好的方法，我还没有切换到，但之前你必须将它包含在你的 _tags 文件中（在 oasis 自动生成的部分之外）：

```
<*.ml>: syntax_camlp4o 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T20:43:06.730

您是否尝试将此信息放入 _tags 文件中？

AFAIR 在“oasis setup”之后 oasis 只重写了 _tags 文件的一部分，用户编写的部分保持原样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T01:59:27.277

（尚）不支持；见[https://forge.ocamlcore.org/tracker/index.php?func=detail&aid=1050&group_id=54&atid=291](https://forge.ocamlcore.org/tracker/index.php?func=detail&aid=1050&group_id=54&atid=291)

# java - 玩！1.2.5.：对象的枚举集合绑定到模板

> ID：11494913
> 
> 赞同：1
> 
> 时间：2012-07-15T19:25:46.003
> 
> 标签：java, groovy, playframework, playframework-1.x

我正在 Play 中构建一个 Web 应用程序！1.2.5。我有一个模型类，其中一个属性是枚举的 Set 集合：

```
@Entity
@Table(name="AppUser")
public class User extends Model {

    ...

    @Column(name = "industry_id")
    @ElementCollection(targetClass = Industry.class)
    @CollectionTable(name = "Industry", joinColumns = @JoinColumn(name = "AppUser_id"))
    public Set<Industry> industries = new HashSet<Industry>();

} 
```

枚举是：

```
public enum Industry {
    Industry1,
    Industry2
} 
```

如何准确地将`industries`集合绑定到编辑模板，其中`industries`字段表示为复选框列表，并且它们的选中或取消选中会添加它们或将它们从对象集合中删除？

比你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:19:38.953

您可以像这样绑定您的复选框

```
#{form @save()}
<input type="checkbox" value="Industry1" name="user.industries">Industry number 1
<input type="checkbox" value="Industry2" name="user.industries">Industry number 2
<input type="checkbox" value="Industry3" name="user.industries">Industry number 3
<input type="submit" value="Submit">
#{/form} 
```

就我而言，它适用于没有 JPA 注释的模型，但我想它也适用于您的情况

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T06:31:25.020

最近这样做了，我为您提供以下解决方案：

在控制器中，您将 Enum 作为 an`Iterator`传递给视图：

```
Iterator<Attribute> industries = EnumSet.allOf(Industry.class).iterator();
render(industries); 
```

在您的表单视图中，您遍历列表并检查选择的内容：

```
#{list items: industries, as: 'industry' }
<label>
     <input type="checkbox" name="industries" value="${industry.name()}"
        #{if user?.industries?.contains(industry)} checked #{/if}
     />
     &{'industry'}
</label>
#{/list} 
```

要处理未选择字段的情况，您需要以下内容（因为，当未选择任何内容时，将不提交任何值，并且现有选择将保留：

```
<input type="hidden" name="industries" value="" /> 
```

最后，在接收表单输入的控制器方法中，有一个参数就足够了`Set<Industry> industries`，Play 将在其中加载选定的值。

# ios - 使用可重用单元格在 iPhone 上缓慢加载 tableview

> ID：11494914
> 
> 赞同：3
> 
> 时间：2012-07-15T19:26:12.567
> 
> 标签：ios, xcode, tableview

我从 Parse.com 后端加载数据，他们向我发送了使用可重用单元格的解决方案，但现在我仍然遇到加载速度问题，这是我在 tableview 中的编码，我有一个子类来组成我的单元格(ExploreStreamCustomCell.m)

```
 - (ExploreStreamCustomCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
                        object:(PFObject *)object 
{
    static NSString *CellIdentifier = @"ExploreStreamCustomCell";

    ExploreStreamCustomCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[ExploreStreamCustomCell alloc] initWithStyle:UITableViewCellStyleSubtitle 
                                              reuseIdentifier:CellIdentifier];
    }

    // Configure the cell
    cell.listItemTitle.text = [object objectForKey:@"text"];
    cell.checkinsLabel.text = [NSString stringWithFormat:@"%@", [object objectForKey:@"checkins"]];
    cell.descriptionLabel.text = [object objectForKey:@"description"];

    cell.selectionStyle = UITableViewCellSelectionStyleNone;

    PFFile *listThumbnail = [object objectForKey:@"header"];
    cell.listViewImage.image = [UIImage imageNamed:@"loading_image_stream.png"]; // placeholder image
    cell.listViewImage.file = listThumbnail;
    [cell.listViewImage loadInBackground:NULL];

    return cell;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForNextPageAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [super tableView:tableView cellForNextPageAtIndexPath:indexPath];
    cell.textLabel.font = [cell.textLabel.font fontWithSize:kPAWWallPostTableViewFontSize];
    return cell;
} 
```

如果我在单元格 == nil 中有 //configure 单元格的所有内容，它会很快，但它会显示 9 个唯一数据行中的 3 个并重复这 3 个唯一内容单元格 3 次？

在 ExploreStreamCustomCell.m 中编辑额外代码

```
#import "ExploreStreamCustomCell.h"

@implementation ExploreStreamCustomCell

@synthesize listViewImage, 
iconLocation, 
iconPeople, 
iconCheckins, 
listItemTitle, 
locationLabel, 
peopleLabel, 
checkinsLabel, 
descriptionLabel,
listItemView;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier {
    if(self = [super initWithStyle:style reuseIdentifier:reuseIdentifier]){
        //Initialization code
        listItemView = [[UIView alloc] init];
        listViewImage = [[PFImageView alloc] init];
        iconLocation = [[UIImageView alloc] init];
        iconPeople = [[UIImageView alloc] init];
        iconCheckins = [[UIImageView alloc] init];
        listItemTitle = [[UILabel alloc] init];     
        locationLabel = [[UILabel alloc] init]; 
        peopleLabel = [[UILabel alloc] init];
        checkinsLabel = [[UILabel alloc] init]; 
        descriptionLabel = [[UILabel alloc] init];

        listViewImage.image = [UIImage imageNamed:@"nachtwacht_list_formaat.png"];
        iconLocation.image = [UIImage imageNamed:@"icon_magenta_location.png"];
        iconPeople.image = [UIImage imageNamed:@"icon_magenta_people.png"];
        iconCheckins.image = [UIImage imageNamed:@"icon_magenta_checkins.png"];
        listItemTitle.text = @"text";
        locationLabel.text = @"0,7 km";
        peopleLabel.text = @"34";
        checkinsLabel.text = @"61";
        descriptionLabel.text = @"Description text.";

        [self.contentView addSubview:listItemView];
        [self.contentView addSubview:listViewImage];
        [self.contentView addSubview:iconLocation];
        [self.contentView addSubview:iconPeople];
        [self.contentView addSubview:iconCheckins];
        [self.contentView addSubview:listItemTitle];
        [self.contentView addSubview:locationLabel];
        [self.contentView addSubview:peopleLabel];
        [self.contentView addSubview:checkinsLabel];
        [self.contentView addSubview:descriptionLabel];
    }
    return self;
}

- (void)layoutSubviews {
    [super layoutSubviews];
    CGRect contentRect = self.contentView.bounds;
    CGFloat boundsX = contentRect.origin.x;
    CGRect frame;

    frame= CGRectMake(boundsX+0 , 33, 280, 124);
    listViewImage.frame = frame;
    listViewImage.contentMode = UIViewContentModeScaleAspectFill;
    listViewImage.layer.masksToBounds = YES;

    //listViewImage.backgroundColor = [UIColor lightGrayColor];

    frame= CGRectMake(boundsX+20 , 164, 12, 18);
    iconLocation.frame = frame;
    //iconLocation.backgroundColor = [UIColor lightGrayColor];

    frame= CGRectMake(boundsX+102 , 164, 24, 18);
    iconPeople.frame = frame;
    //iconPeople.backgroundColor = [UIColor lightGrayColor];

    frame= CGRectMake(boundsX+193 , 164, 20, 16);
    iconCheckins.frame = frame;
    //iconLocation.backgroundColor = [UIColor lightGrayColor];

    frame= CGRectMake(boundsX+0 , 0, 280, 33);
    listItemView.frame = frame;
    listItemView.backgroundColor = [UIColor colorWithRed:0.749 green:0.000 blue:0.243 alpha:1.000];

    frame= CGRectMake(boundsX+20 , 3, 240, 29);
    listItemTitle.frame = frame;
    //listItemTitle.textColor = [UIColor colorWithRed:250.0f/255.0f green:194.0f/255.0f blue:9.0f/255.0f alpha:0.8f];
    listItemTitle.textAlignment = UITextAlignmentLeft;
    listItemTitle.font = [UIFont boldSystemFontOfSize:15];
    listItemTitle.textColor = [UIColor whiteColor];
    listItemTitle.backgroundColor = [UIColor clearColor];
    listItemTitle.lineBreakMode = UILineBreakModeTailTruncation;
    //listItemTitle.backgroundColor = [UIColor orangeColor];

    frame= CGRectMake(boundsX+40 , 164, 57, 21);
    locationLabel.frame = frame;
    locationLabel.textAlignment = UITextAlignmentLeft;
    locationLabel.font = [UIFont boldSystemFontOfSize:12];
    locationLabel.textColor = [UIColor colorWithRed:0.749 green:0.000 blue:0.243 alpha:1.000];
    locationLabel.backgroundColor = [UIColor clearColor];
    locationLabel.lineBreakMode = UILineBreakModeTailTruncation;
    locationLabel.numberOfLines = 1;
    //locationLabel.backgroundColor = [UIColor redColor];

    frame= CGRectMake(boundsX+134 , 164, 57, 21);
    peopleLabel.frame = frame;
    peopleLabel.textAlignment = UITextAlignmentLeft;
    peopleLabel.font = [UIFont boldSystemFontOfSize:12];
    peopleLabel.textColor = [UIColor colorWithRed:0.749 green:0.000 blue:0.243 alpha:1.000]; 
    peopleLabel.backgroundColor = [UIColor clearColor];
    peopleLabel.lineBreakMode = UILineBreakModeTailTruncation;
    peopleLabel.numberOfLines = 1;

    frame= CGRectMake(boundsX+221 , 164, 51, 21);
    checkinsLabel.frame = frame;
    checkinsLabel.textAlignment = UITextAlignmentLeft;
    checkinsLabel.font = [UIFont boldSystemFontOfSize:12];
    checkinsLabel.textColor = [UIColor colorWithRed:0.749 green:0.000 blue:0.243 alpha:1.000]; 
    checkinsLabel.backgroundColor = [UIColor clearColor];
    checkinsLabel.lineBreakMode = UILineBreakModeTailTruncation;
    checkinsLabel.numberOfLines = 1;

    frame= CGRectMake(boundsX+0 , 189, 280, 55);
    descriptionLabel.frame = frame;
    descriptionLabel.textAlignment = UITextAlignmentLeft;
    descriptionLabel.font = [UIFont systemFontOfSize:13];
    descriptionLabel.backgroundColor = [UIColor clearColor];
    descriptionLabel.lineBreakMode = UILineBreakModeTailTruncation;
    descriptionLabel.numberOfLines = 3;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated {

    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}

/*
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    // Drawing code
}
*/

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T21:40:25.047

探索代码效率低下的一个好方法是使用 Instruments 的 Time Profiler 工具。Time Profiler 将让您在代码中逐行查看每个任务花费了多少时间。

![时间分析器](../Images/15f4ea9608bf8c7234658eea5d753564.png)

* * *

我会推荐以下设置进行分析：

![探查器设置](../Images/c37a4a8cd5dce9c901b7470a7df6781c.png)

* * *

来自 Apple 的人脸检测示例应用程序：

![人脸检测](../Images/edc810ba1d4d53dd49eb88e918c27321.png)

* * *

然后，您可以双击任何一行（较高的百分比意味着更多的时间用于该方法调用）以在代码中查看每个地方花费了多少时间。

![代码分析](../Images/a471786c41a85cc1fa41df143faac1ef.png)

* * *

从这里你可以开始找出你效率低下的地方，并确切地了解是什么占用了这么多时间。祝你好运！

# javascript - 面向对象的 WebGL 上下文包装器失败

> ID：11494918
> 
> 赞同：1
> 
> 时间：2012-07-15T19:26:57.160
> 
> 标签：javascript, webgl

我开始使用 WebGL 进行开发并且对 JavaScript 知之甚少。我正在尝试创建一个类来管理 WebGL 上下文。

我有以下内容： 我的 HTML 页面：

```
<!DOCTYPE html>
<html>
   <head>
      <title> Star WebGL  </title>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
      <link rel="stylesheet" type="text/css" href="estilos/main.css">

      <script type="text/javascript" src="libs/webgl-debug.js"></script>
      <script type="text/javascript" src="libs/clases/Contexto.js"></script>
      <script type="text/javascript" src="libs/applicacion.js"></script>
   </head>

   <body>
      <canvas class="screen" id="screen-canvas"  width="640" height="480">
          </canvas>  
   </body>

</html> 
```

班级`Contexto.js`：

```
function Contexto( Canvas )
{
    this.canvas = Canvas;
    this.contextoGL;
    this.contexto_creado = false;   
}

Contexto.prototype.crearContextoWebGL = function ()
{
   try
   {        
      this.contextoGL  = WebGLDebugUtils.makeDebugContext( this.canvas.getContext( "webgl" ) );
      if( !this.contextoGL )
        this.contexto_creado = false;
      else
        this.contexto_creado = true;
   }
   catch( e)
   {
      console.log( "No se puede crear un contexto gl" );
   }
};

Contexto.prototype.contextoCreado = function ()
{
   return this.contexto_creado;
};

Contexto.prototype.getGL = function ()
{
   return this.contextoGL;
};

Contexto.prototype.setColor = function(  r,g,b,a )
{
   this.contextoGL.clearColor( r,g,b,a );   
}; 
```

班级`applicacion.js`：

```
window.onload = main;

function main()
{
   var canvas = document.getElementById( "screen-canvas");
   var contextoWebGL = new Contexto( canvas );
   contextoWebGL.crearContextoWebGL();
   console.log( contextoWebGL.contextoCreado() );
   contextoWebGL.setColor(  0.5161561076529324, 1, 0.7, 1  );
} 
```

当我尝试改变背景时，

```
 contextoWebGL.setColor(  0.5161561076529324, 1, 0.7, 1  ) 
```

我收到以下错误：

```
 Uncaught TypeError: Object #<Object> has no method 'clearColor' 
```

创建面向对象上下文的正确代码是什么？

在 JavaScript 应用程序中使用面向对象的代码时，效率会受到影响吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T23:31:51.207

这里有两个问题：您没有获得上下文，并且您没有正确处理该故障。

1.  `WebGLDebugUtils.makeDebugContext`不测试是否给定了实际的上下文，因此如果`getContext`返回 null，它会产生一个无用的对象，其行为与您所看到的一样。您应该首先测试您是否成功获得了 WebGL 上下文，然后才使用`makeDebugContext`.

    ```
    this.contextoGL = this.canvas.getContext( "webgl" );
    if( !this.contextoGL ) {
        this.contexto_creado = false;
    } else {
        this.contexto_creado = true;
        this.contextoGL = WebGLDebugUtils.makeDebugContext( this.contextoGL );
    } 
    ```

    这将导致您的代码正确报告它未能获取上下文。这种结构还可以更轻松地选择不使用调试上下文，以获得更好的性能。

2.  为了成功获得 WebGL 上下文，您可能想尝试使用名称“experimental-webgl”以及“webgl”。例如，Chrome 不支持上下文名称“webgl”。

# objective-c - 键盘大小返回错误值？

> ID：11494920
> 
> 赞同：9
> 
> 时间：2012-07-15T19:27:18.183
> 
> 标签：objective-c, ios, cocoa-touch

在 iPad 上，订阅后`UIKeyboardDidShowNotification`

```
NSDictionary* info = [aNotification userInfo];
CGSize kbSize = [[info objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;
NSLog(@"%@", NSStringFromCGSize(kbSize)); 
```

印刷`{352, 1024}`

这不是错的吗？不仅键盘高度这么大，高度怎么会大于宽度呢？还是我错过了什么？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-15T19:44:03.070

我敢打赌，尺寸是以静态方向报告的（“窗口”方向实际上从未改变），所以我建议将其转换为您感兴趣的视图。我的常规技巧是将其转换为窗口的 rootViewController 视图的坐标空间：

```
CGRect rawKeyboardRect = [[info objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue];
CGRect properlyRotatedCoords = [self.view.window convertRect:rawKeyboardRect toView:self.view.window.rootViewController.view]; 
```

或者如果你有一个更合适的视图。关键是窗口坐标空间中报告的任何坐标都不会旋转，即使窗口的 rootVC 的视图是旋转的。

# c# - NHibernate：在每个页面请求中配置（）？

> ID：11494921
> 
> 赞同：2
> 
> 时间：2012-07-15T19:27:25.770
> 
> 标签：c#, sql-server, nhibernate, fluent-nhibernate

我已经阅读了很多关于 NHibernate 的书籍，并注意到 Configure() 是如何实现的。在书中，每次应用程序在控制台应用程序中运行时都会调用该方法。大多数 ASP.NET 示例在线调用 Configure() 在每个页面请求上。我认为这会产生很多开销，因为必须在每个请求上配置 NHibernate。是否在每个页面请求上配置 NHibernate 是否重要？如果没有，有人将如何在 asp.net mvc 中保存配置 - 应用程序范围？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T19:32:50.557

NHibernate 设计为在每次应用程序启动时配置一次。对于控制台程序，每次运行该程序时都是如此。对于 ASP.NET 应用程序，每次应用程序启动时都会触发`Application.Start`事件。

`SessionFactory`NHibernate 创建自在应用程序的`Configure()`生命周期内可以安全地缓存，并且对于重复创建会话是线程安全的。无需对每个请求进行配置。

以最基本的方式，您可以使用延迟初始化的静态属性来安全地为您提供一个单例供您的应用程序使用：

```
public static class NHibernateSessions
{
    private static readonly Lazy<SessionFactory> lazyFactory;

    static NHibernateSessions
    {
        lazyFactory = new Lazy<SessionFactory >(
            () => NHibernateSessions.CreateSessionFactory());
    }

    public static SessionFactory Factory
    {
        get
        {
            return NHibernateSessions.lazyFactory.Value;
        }
    }

    public static void Initialize()
    {
        if(!NHibernateSessions.lazyFactory.IsValueCreated)
        {
            // Access the value to force initialization.
            var factory = lazyFactory.Value;
        }
    }

    private static SessionFactory CreateSessionFactory()
    {
        // Add code here to configure and create factory.
    }
} 
```

此代码使用`Lazy<T>`类型，以确保初始化是线程安全的。然后，您可以调用`NHibernateSessions.Factory`以获取在整个应用程序中重复使用的单例工厂。

默认情况下，工厂在第一次获取`Factory`属性时初始化。这意味着对于 ASP.NET 应用程序，尝试使用 NHibernate 的第一个请求将是一个缓慢的请求。如果这是一个问题，您可以在应用程序启动时通过调用事件处理程序`Initialize()`中的方法来强制初始化。`Application.Start`

# azure - 无法从 Azure 辅助角色中加载证书实例

> ID：11494922
> 
> 赞同：4
> 
> 时间：2012-07-15T19:27:37.410
> 
> 标签：azure, azure-worker-roles

我有一个 Azure 工作者角色，我希望调用管理服务（*例如 REST API*）并收集有关相关服务的信息。但是，当我尝试加载我的证书时，它找不到它。以下是我遵循的步骤：

**1.**我使用 MakeCert 创建了一个证书，并通过门户将其注册为我的管理证书

> makecert -r -pe -a sha1 -n "CN=MyCnName" -ss My -len 2048 -sp "Microsoft Enhanced RSA and AES Cryptographic Provider" -sy 24 MyCert.cer

**2.**在我的本地机器上安装了证书，一切正常。在本地运行 Worker Role 时，我可以毫无问题地调用管理服务。

**3.**从我的机器导出证书并通过门户在目标托管服务下注册导出的证书

**4.**部署角色。当角色启动时，它无法找到证书。

这是我用来查找证书的代码的摘录。

```
// Open the certificate store for the current user.
var certStore = new X509Store(StoreName.My, StoreLocation.CurrentUser); // I also tried localmachine
certStore.Open(OpenFlags.ReadOnly);

// Find the certificate with the specified subject.
X509Certificate2Collection certCollection = certStore.Certificates.Find(
    X509FindType.FindBySubjectName,
    _myConfiguration.SubjectName,
    false);

if (certCollection == null || certCollection.Count < 1)
{
    // Find the certificate with the specified thumbprint.
    certCollection = certStore.Certificates.Find(
        X509FindType.FindByThumbprint,
        _myConfiguration.ThumbPrint,
        false);
}

// Close the certificate store.
certStore.Close();

// Check to see if a matching certificate was found.
if (certCollection.Count == 0)
{
    _logger.Warn("No certificate found");
} 
```

没有例外，只是没有找到证书。谁能告诉我我需要做什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T22:17:20.657

找出问题所在... 除了在门户中配置证书之外，我还需要将证书详细信息（*例如名称、存储和指纹*）添加到选项卡下的 Azure 项目角色设置中`Certificates`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T09:27:51.827

我对网络角色有类似的问题，我已经应用了一种解决方法。

1.  使用远程桌面连接到部署服务和证书的 VM
2.  项目清单
3.  复制您的证书或`pfx`您的 VM 本地磁盘（例如 C:)
4.  单击您的`pfx`或 .cert 文件并将其安装在特定的证书存储“受信任的人”上）
5.  运行您的服务，即使您已配置为在其他商店进行搜索，您也会在受信任的人上找到

如果我强制在“我的商店”位置搜索，但搜索方法从受信任的人员存储中检索信息，我不知道为什么我的网络角色会尝试在该位置查找证书。

此解决方法的问题是，当您删除部署时，证书和任何其他配置都将被擦除。

这段代码可以为您提供一些信息：

```
//the certificate must be in the Trusted People Store
X509Store store = new X509Store(StoreName.My, StoreLocation.LocalMachine);
try
{
    store.Open(OpenFlags.ReadOnly | OpenFlags.OpenExistingOnly);
   //Commented
   //Get the first available match from cert store
   //X509Certificate2 cert = store.Certificates.Find(X509FindType.FindBySubjectName,
                 // subjectname,
                 // false)
                 // .Cast<X509Certificate2>()
                 // .FirstOrDefault();

   X509Certificate2 cert = new X509Certificate2();
   foreach (var ct in store.Certificates)
   {
       //Logger.TraceInformation(string.Format("Cert found: Subject {0} Tumbprt:{1}", ct.FriendlyName, ct.Thumbprint));
       if (ct.SubjectName.Name.ToString().Contains("*.certnamexx.extensionxx"))
       {
           return new X509SecurityToken(ct);
       }

    }
} 
```

# javascript - .hover 和 div 出现干扰

> ID：11494930
> 
> 赞同：0
> 
> 时间：2012-07-15T19:28:46.747
> 
> 标签：javascript, jquery, css

我正在制作一个书签，它将在用户点击时从用户所在的页面上传一张图片，到目前为止一切顺利，但我遇到了一个问题。

我想要发生的是，

1.  用户点击书签
2.  用户将鼠标悬停在页面上的图像上。
3.  一个div出现在悬停
4.  当点击 div 时，它会被带到我的网站。

但是出现的 div 与 .hover 混淆，它来回断断续续。我猜这是因为从技术上讲，用户不再将鼠标悬停在图像上，而是我创建的 div 上。

这是一个例子。 [http://jsfiddle.net/P4b8H/](http://jsfiddle.net/P4b8H/)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T19:44:32.073

这里的问题是，当您的 div 创建时，您**总是离开**图像，即悬停在外面。但是然后在悬停功能中，您隐藏了 div，因此您有点陷入无限循环。

要解决此问题，请考虑将鼠标悬停*在图像上*，将鼠标悬停在*div 上*。

```
$("img").mouseover(function(){});

$('#WRAPPER').mouseleave(function() {}); 
```

我修改了你的小提琴。[http://jsfiddle.net/P4b8H/5/](http://jsfiddle.net/P4b8H/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T19:36:19.383

把图像放在一个盒子里。将 div 附加到同一个框。然后将悬停事件再次应用到同一个框。看看改变的小提琴 - [http://jsfiddle.net/P4b8H/4/](http://jsfiddle.net/P4b8H/4/)

# android - 无法启动服务意图广播接收器Android

> ID：11494934
> 
> 赞同：1
> 
> 时间：2012-07-15T19:29:03.957
> 
> 标签：android, notifications, android-service

像许多其他人一样，我收到以下错误“无法启动服务意图...未找到”

我正在设置一个通知以每天运行一次活动（在我的测试中它设置为 30 秒）。这是通知代码：

```
Intent i = new Intent(this, OnNotificationReceiver.class);
    PendingIntent pi = PendingIntent.getService(this, 0, i, PendingIntent.FLAG_ONE_SHOT);
    AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
    am.cancel(pi); // cancel any existing alarms

    am.setRepeating(AlarmManager.RTC_WAKEUP, notifyTime, AlarmManager.INTERVAL_FIFTEEN_MINUTES/30, pi); 
```

OnNotificationReceiver.class 是：

```
public class OnNotificationReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {

        WakeReminderIntentService.acquireStaticLock(context);
        Intent i = new Intent(context, NotificationService.class);
        context.startService(i);
    } 
```

通知服务是：

```
public class NotificationService extends WakeReminderIntentService {
    public NotificationService() {
        super("ReminderService");
    }

    @Override
    void doNotificationWork(Intent intent) {
                 //Does work here
    }
} 
```

WakeReminderIntentService 是：

```
public abstract class WakeReminderIntentService extends IntentService {
abstract void doNotificationWork(Intent intent);

public static final String LOCK_NAME_STATIC = "com.companionfree.pricewatcher";
private static PowerManager.WakeLock lockStatic = null;

public static void acquireStaticLock(Context context) {
    getLock(context).acquire();
}

synchronized private static PowerManager.WakeLock getLock(Context context) {
    if (lockStatic==null) {
        PowerManager mgr = (PowerManager)context.getSystemService(Context.POWER_SERVICE);

        lockStatic=mgr.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, LOCK_NAME_STATIC);
        lockStatic.setReferenceCounted(true);
    }
    return(lockStatic);
}

public WakeReminderIntentService(String name) {
    super(name);
}

@Override
final protected void onHandleIntent(Intent intent) {
    try {
        doNotificationWork(intent);
    } finally {
        getLock(this).release();
    }
}
} 
```

我的清单显示：

```
<receiver android:name=".OnNotificationReceiver"></receiver>

    <service android:name=".NotificationService"></service>
    <service android:name=".WakeReminderIntentService"></service>
</application> 
```

谁能弄清楚我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T21:48:32.547

如果您也发布了 logcat 错误（带有堆栈跟踪），那将会有所帮助。

在任何情况下，我都可以看到这段代码是错误的，并且可能会给你这个错误：

```
Intent i = new Intent(this, OnNotificationReceiver.class);
PendingIntent pi = PendingIntent.getService(this, 0, i, PendingIntent.FLAG_ONE_SHOT);
AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
am.cancel(pi); // cancel any existing alarms 
```

您正在使用`PendingIntent`a `Service`。但是你需要一个`PendingIntent`for a `BroadcastReceiver`。尝试调用`PendingIntent.getBroadcast()`：

```
Intent i = new Intent(this, OnNotificationReceiver.class);
PendingIntent pi = PendingIntent.getBroadcast(this, 0, i, PendingIntent.FLAG_ONE_SHOT);
AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
am.cancel(pi); // cancel any existing alarms 
```

# android - 在 ICS Preferences 中转义 % - 我真的必须编写特定于版本的字符串处理吗？

> ID：11494940
> 
> 赞同：6
> 
> 时间：2012-07-15T19:29:29.727
> 
> 标签：android, string, escaping, preferences

我有一个在 ICS 上崩溃的应用程序。到那时为止工作得很好（虽然我不确定我是否真的有一个蜂窝平台可以测试，我们所有的测试手机都是姜饼或更低，现在我有几部 ICS 手机可以玩）。

我的首选项页面中的以下代码（从 onResume 和 OnPreferenceChangeListener 调用）运行良好：

```
protected void setBatteryAlarmSummary(String newValue){
    Preference batteryAlarm = (Preference) findPreference( getString(R.string.battery_low_alarm) );
    StringBuilder summary = new StringBuilder();
    summary.append(getString(R.string.battery_alarm_summary_label));
    summary.append(" ");
    summary.append(newValue);
    summary.append("%");
    batteryAlarm.setSummary(summary);
} 
```

这会将首选项摘要设置为“10% 的低电量警报”。现在，使用 ICS，它崩溃了。不是在执行 setSummary 时，也不是在页面显示时，而是当您滚动首选项时，甚至一点点，显然会触发渲染（该项目大约有 8 个左右的项目，所以它在列表中“低于折叠” ）。修复 ICS 很容易，只需避开百分号：

```
summary.append("%%"); 
```

但是，姜饼上的代码显示“10%% 的低电量警报”

我可以编写它以根据版本进行更改，但这很愚蠢。他们真的打破了他们偏好渲染的向后兼容性，还是这只是三星的事情（不幸的是，这是我目前唯一的 ICS 测试平台）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:06:46.250

您可以尝试使用百分号的 Unicode 等价物，例如：

`summary.append("\u0025");`

这应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T07:34:45.020

通常，您在以下方式处理此问题`strings.xml`：

```
<string name="battery_low_alarm_summary" formatted="false">Low Battery Alarm at 10%</string> 
```

`formatted="false"`将使其适用于所有版本的 Android。

但是一旦你本地化了这个字符串，你真的想要一个占位符。我想你必须写：

```
<string name="battery_low_alarm_summary">Low Battery Alarm at %d%%</string> 
```

我没有对此进行测试，但是，我强烈希望使用任何现代版本的 SDK 进行构建都能在这里做正确的事情，即使结果是在旧版本的 Android 上运行。

# maven - yuicompressor maven 插件和 maven-war-plugin

> ID：11494943
> 
> 赞同：17
> 
> 时间：2012-07-15T19:29:52.647
> 
> 标签：maven, plugins, yui-compressor, sonatype

几个小时以来，我一直在努力让这个插件与 maven-war-plugin 很好地配合，我认为是时候寻求帮助了。我的插件定义如下：

```
<plugin>
    <groupId>net.alchim31.maven</groupId>
    <artifactId>yuicompressor-maven-plugin</artifactId>
    <version>1.3.0</version>
    <executions>
        <execution>
            <id>compressyui</id>
            <phase>process-resources</phase>
            <goals>
                <goal>compress</goal>
            </goals>
            <configuration>
                <nosuffix>true</nosuffix>
                <warSourceDirectory>${basedir}/WebContent</warSourceDirectory>
                <jswarn>false</jswarn>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

如果我删除 nosuffix=true ，那么我可以看到压缩/缩小的 -min.js 文件按预期进入战争，但是使用此标志时，它们将被 maven-war-plugin （我假设）覆盖构建战争文件。我真的需要文件名保持不变......有没有人知道我需要更改什么才能使用相同的文件名并且仍然将缩小版本纳入最终战争？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-15T19:40:50.237

好的。我终于想通了。您需要`<webappDirectory>`在 yuicompressor 插件中定义 a ，然后可以`<resource>`在 maven-war-plugin 中将其引用为 a 。在下面的示例中，我正在使用**`<directory>${project.build.directory}/min</directory>`**

```
<plugin>
    <groupId>net.alchim31.maven</groupId>
    <artifactId>yuicompressor-maven-plugin</artifactId>
    <version>1.3.0</version>
    <executions>
        <execution>
            <id>compressyui</id>
            <phase>process-resources</phase>
            <goals>
                <goal>compress</goal>
            </goals>
            <configuration>
                <nosuffix>true</nosuffix>
                <warSourceDirectory>${basedir}/WebContent</warSourceDirectory>
                <webappDirectory>${project.build.directory}/min</webappDirectory>
                <jswarn>false</jswarn>
            </configuration>
        </execution>
    </executions>
</plugin>
<plugin>
    <artifactId>maven-war-plugin</artifactId>
    <executions>
        <execution>
            <id>default-war</id>
            <phase>package</phase>
            <goals>
                <goal>war</goal>
            </goals>
            <configuration>
                <warSourceDirectory>${basedir}/WebContent</warSourceDirectory>
                <encoding>UTF-8</encoding>
            </configuration>
        </execution>
    </executions>
    <configuration>
        <warSourceDirectory>${basedir}/WebContent</warSourceDirectory>
        <encoding>UTF-8</encoding>
        <webResources>
            <resource>
                <directory>${project.build.directory}/min</directory>
            </resource>
        </webResources>
    </configuration>
</plugin> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-03-26T04:42:24.200

只需在 WAR 插件上配置“warSourceExcludes”。

```
<plugin>
    <artifactId>maven-war-plugin</artifactId>
    <version>2.4</version>
    <configuration>
        <warSourceExcludes>**/*.css,**/*.js</warSourceExcludes>
    </configuration>
</plugin> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-03T15:27:53.163

我想添加对我有用的配置：

首先，为了修复 m2e 抱怨“生命周期未涵盖的插件执行”，我在从[这篇文章](https://stackoverflow.com/questions/6352208/how-to-solve-plugin-execution-not-covered-by-lifecycle-configuration-for-sprin)中获取的父 pom 中添加了以下内容：

```
 <pluginManagement>
    <plugins>
        <!--This plugin's configuration is used to store Eclipse 
            m2e settings only. It has no influence on the Maven build itself. -->
        <plugin>
            <groupId>org.eclipse.m2e</groupId>
            <artifactId>lifecycle-mapping</artifactId>
            <version>1.0.0</version>
            <configuration>
                <lifecycleMappingMetadata>
                    <pluginExecutions>
                        <pluginExecution>
                            <pluginExecutionFilter>
                                <groupId>net.alchim31.maven</groupId>                               
                                <artifactId>yuicompressor-maven-plugin</artifactId>
                                <versionRange>[1.0.0,)</versionRange>
                                <goals>
                                    <goal>compress</goal>
                                </goals>
                            </pluginExecutionFilter>
                            <action>
                                <execute />
                            </action>
                        </pluginExecution>
                    </pluginExecutions>
                </lifecycleMappingMetadata>
            </configuration>
        </plugin>
    </plugins>
</pluginManagement> 
```

然后在战争中我放了：

```
<build>
    <plugins>
        <plugin>
        <groupId>net.alchim31.maven</groupId>
        <artifactId>yuicompressor-maven-plugin</artifactId>
        <version>1.4.0</version>
        <executions>
        <execution>
            <goals>
              <goal>compress</goal>
            </goals>
            <configuration>
               <linebreakpos>300</linebreakpos>
               <excludes>
                 <exclude>**/*-min.js</exclude>
                 <exclude>**/*.min.js</exclude>
                 <exclude>**/*-min.css</exclude>
                 <exclude>**/*.min.css</exclude>
               </excludes>              
               <nosuffix>true</nosuffix>
            </configuration>
        </execution>
        </executions>
        </plugin>
        <plugin>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.4</version>
            <configuration>
                <warSourceExcludes>**/*.css,**/*.js</warSourceExcludes>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

这会在项目构建目标目录中生成缩小的 css 和 js 文件，同时排除原始文件。

我希望这可以节省一些时间。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-26T07:51:39.350

这是我的配置，它在我的 Maven Web 项目中运行良好：

```
 <!-- js/css compress -->
<plugin>
    <groupId>net.alchim31.maven</groupId>
    <artifactId>yuicompressor-maven-plugin</artifactId>
    <version>1.3.2</version>
    <configuration>
        <excludes>
            <exclude>**/*-min.js</exclude>
            <exclude>**/*.min.js</exclude>
            <exclude>**/*-min.css</exclude>
            <exclude>**/*.min.css</exclude>
        </excludes>
        <jswarn>false</jswarn>
        <nosuffix>true</nosuffix>
    </configuration>
    <executions>
        <execution>
            <id>compress_js_css</id>
            <phase>process-resources</phase>
            <goals>
                <goal>compress</goal>
            </goals>
        </execution>
    </executions>
</plugin>
<!-- war -->
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-war-plugin</artifactId>
    <version>2.3</version>
    <configuration>
        <webResources>
            <resource>
                <directory>${project.build.directory}/${project.build.finalName}/resources</directory>
                <targetPath>/resources</targetPath>
                <filtering>false</filtering>
            </resource>
        </webResources>
        <webXml>src/main/webapp/WEB-INF/web.xml</webXml>
    </configuration>
</plugin> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-12T16:53:31.200

我使用的方法有点不同。

首先，我已将 IDE 配置为`mvn process-resources` *在编译/打包之前*运行。这样，文件是在组装战争之前创建的。

设置**非常**重要`<nosuffix>false</nosuffix>`，`<outputDirectory>${basedir}/src/main/resources/</outputDirectory>`因此可以在同一目录中创建文件而无需替换原始源文件。

```
 <plugin>
    <groupId>net.alchim31.maven</groupId>
    <artifactId>yuicompressor-maven-plugin</artifactId>
    <version>1.3.2</version>
    <configuration>
        <preProcessAggregates>false</preProcessAggregates>
        <excludes>
            <exclude>**/*-min.js</exclude>
            <exclude>**/*.min.js</exclude>
            <exclude>**/*-min.css</exclude>
            <exclude>**/*.min.css</exclude>
        </excludes>
        <jswarn>false</jswarn>
        <nosuffix>false</nosuffix> <!-- VERY IMPORTANT WILL REPLACE YOUR FILES IF YOU SET nosuffix TO TRUE OR DONT SET IT AT ALL -->
        <outputDirectory>${basedir}/src/main/resources/</outputDirectory> <!-- by default the plugin will copy the minimized version to target directory -->
        <failOnWarning>false</failOnWarning>
    </configuration>

    <executions>
        <execution>
            <id>compress_js_css</id>
                <phase>process-resources</phase>
            <goals>
                <goal>compress</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-22T02:30:44.790

正如 Jakob Kruse 所说，你必须处理 *.js，但没有 *.min.js，所以我的配置如下，请注意 %regex[] 的使用：

```
 <plugin>
			    <groupId>net.alchim31.maven</groupId>
			    <artifactId>yuicompressor-maven-plugin</artifactId>
			    <version>1.4.0</version>
			    <executions>
			        <execution>
			            <id>compressyui</id>
			            <phase>process-resources</phase>
			            <goals>
			                <goal>compress</goal>
			            </goals>
			            <configuration>
			                <nosuffix>true</nosuffix>
			                <warSourceDirectory>${basedir}/WebContent</warSourceDirectory>
			                <webappDirectory>${project.build.directory}/min</webappDirectory>
			                <jswarn>false</jswarn>		
				        <excludes>
				            <exclude>**/*-min.js</exclude>
				            <exclude>**/*.min.js</exclude>
				            <exclude>**/*-min.css</exclude>
				            <exclude>**/*.min.css</exclude>

				            <exclude>**/jquery.window.js</exclude>
				            ......
				            <exclude>**/compile.js</exclude>
				        </excludes>
			            </configuration>
			        </execution>
			    </executions>
			</plugin>

			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-war-plugin</artifactId>
				<version>2.4</version>
				<configuration>
					<warSourceDirectory>WebContent</warSourceDirectory>					
					<packagingExcludes>servlet-api*.jar,target/test-classes/*</packagingExcludes>
					<warSourceExcludes>test/**,%regex[.*(!min).js],%regex[.*(!min).css]</warSourceExcludes>

					<webResources>
 					            <resource>
					                <directory>${project.build.directory}/min</directory>
					            </resource>
					</webResources>

				</configuration>
			</plugin>
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-30T05:05:22.627

**没有 pom.xml 更改**

```
mvn net.alchim31.maven:yuicompressor-maven-plugin:compress 
```

强制压缩每个 js 和 css 文件并在警告时失败

```
mvn net.alchim31.maven:yuicompressor-maven-plugin:compress \
-Dmaven.yuicompressor.force=true \
-Dmaven.yuicompressor.failOnWarning=true \ 
```

更多选项： [http ://davidb.github.io/yuicompressor-maven-plugin/usage_compress.html](http://davidb.github.io/yuicompressor-maven-plugin/usage_compress.html)

# jquery - 在液体父级中拟合图像

> ID：11494948
> 
> 赞同：0
> 
> 时间：2012-07-15T19:30:59.823
> 
> 标签：jquery, css

我正在尝试以液体布局（父级）呈现图像滑块，我不喜欢限制图像的高度和尺寸，而大屏幕显示器（27 英寸）可以将它们请求到像 11 英寸甚至更小的显示器较少的。你能告诉我是否有插件可以帮助我解决这个问题吗？现在我正在使用一个具有固定布局的滑块（插件 - Nivo），我无法将其更改为液体这是我拥有的代码：HTML

```
 <!DOCTYPE HTML>
 <html>
 <head>
 <title>GALLERY</title>
 </head>
 <body>
 <div id="row_1">
 <div class="container"></div>
 </div>
 <div id="row_2">
 <div class="container">
 <div id="slideshow"> 
 <div id="slider"> 
 <img  src="img/1.jpg" title="" style="" /></div>      
 <img  src="img/2.jpg" title="" style="" /></div> 
 <img  src="img/3.jpg" title="" style="" /></div> 
 <img  src="img/4.jpg" title="" style="" /></div>      
 </div> 
 </div>  
 </div>
 </div>
 <div id="row_3">
 <div class="container"></div>
 </div>
 </body>
 </html> 
```

CSS

```
 * {
    margin: 0;
    padding: 0;
    }
 html{
    height:100%;
    width: 100%;
   }
 body {
  background-color: #272321;
  height:100%;
  width: 100%; 
  }
 #row_1 {
  position:relative;
  height:15%;
  width: 100%;
 }
 #row_2{
   position:relative;
   height:77%;
   width: 100%;
  }
  #row_3{
   position:relative;
   height:8%;
   width: 100%;
   background-color: #151110; 
   }
  .container{
   position:relative;
   margin: 0 auto;
   height:100%;
   width: 80%;
  } 
```

您认为我为不同的屏幕尺寸使用多种布局是否是个好主意？有没有办法用 Jquery 解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T19:39:04.903

我不知道预装插件，但你自己的代码并不多处理这个。

您可以将事件处理程序附加到窗口调整大小，检查容器 div 的大小并使用您自己的 javascript 根据新的容器大小为幻灯片选择新的图像大小。

使用轻微的延迟来防止代码在调整大小期间运行数百次，它可能如下所示：

```
(function() {
    var pauseTimer;

    $(window).resize(function() {
        // clear any previous timer running
        if (pauseTimer) {
            clearTimeout(pauseTimer);
        }
        // set new timer
        pauseTimer = setTimeout(function() {
            // user finished or paused resizing, 
            // so now we can recalculate slideshow size
            pauseTimer = null;
            // examine the size of your container div
            // select a new size image for your slideshow and load those images here
        }, 500);
    })
})(); 
```

这是一个演示：http: [//jsfiddle.net/jfriend00/Tucf2/](http://jsfiddle.net/jfriend00/Tucf2/)

# ruby-on-rails-3.1 - “资产组”宝石安装在哪里？

> ID：11494949
> 
> 赞同：1
> 
> 时间：2012-07-15T19:31:15.627
> 
> 标签：ruby-on-rails-3.1

我有一些仅用于资产管道的宝石。一个例子是：

```
gem 'jquery-datatables-rails', github: 'rweng/jquery-datatables-rails' 
```

不幸的是，我找不到这个 gem 的确切安装位置。“gem list --local”甚至没有显示它。

我需要修复它，因为我正在尝试在数据表中使用 Bootstrap 样式，这在最新版本中是允许的。但是 gem 中包含的数据表版本是旧的。

有谁知道这些宝石去哪儿了？我对资产管道非常非常困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T19:33:08.857

在这种情况下，我在 github 上 fork 项目并进行更改，并相应地调整我的 Gemfiles。这也使得它可以在不同的项目中重复使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T19:34:55.253

资产管道和 Bundler 分组与系统上 gem 的安装位置*无关。*您可以随时运行`bundle open gemname`以在 $EDITOR 中打开 Gem 的源代码并进行快速更改（即用于调试）。但是，如果您想在发布中实际包含更改，您将需要派生 Gem 并在那里进行更改，然后`git`在 Gemfile 中指定路径。

附带说明一下，确保在对 Gemfile 进行更改后运行`bundle install`（或者真的只是）运行，以确保所有 Gems 都已安装。`bundle`

# c++ - curl库的内存泄漏

> ID：11494950
> 
> 赞同：2
> 
> 时间：2012-07-15T19:31:15.923
> 
> 标签：c++, curl, openssh

我遇到了麻烦，下面的代码编译得很好，但是当我运行它时，在它输出文件后，我得到了内存泄漏。

```
#include <iostream>
#include "include\curl\curl.h"
int main(void)
{
    CURL *curl;
    CURLcode res;

    curl = curl_easy_init();
    if(curl) {
        curl_easy_setopt(curl, CURLOPT_URL, "https://api.del.icio.us/dt");
        curl_easy_setopt(curl, CURLOPT_SSL_VERIFYPEER, true);
        curl_easy_setopt(curl, CURLOPT_SSL_VERIFYHOST, 2);
        curl_easy_setopt(curl, CURLOPT_CAINFO, "C:\\Users\\bryan\\GeoTrustGlobalCA.crt");
        /* Perform the request, res will get the return code */ 
        res = curl_easy_perform(curl);
        /* Check for errors */ 
        if(res != CURLE_OK)
            fprintf(stderr, "curl_easy_perform() failed: %s\n",
                    curl_easy_strerror(res));

        /* always cleanup */ 
        curl_easy_cleanup(curl);
    }
    return 0;
} 
```

我在 Windows vista 机器上使用 gcc 4.7.0 编译它，使用：

```
g++ -DCURL_STATICLIB testing.cpp -L lib -lcurl -lidn -lwldap32 -lssh2 -lz -lrtm -lcrypto -lgdi32 -lws2_32 -lwinmm -lssl -leay32 -liconv -o testing.exe 
```

知道什么可能导致此内存泄漏吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T19:35:32.960

您应该尝试`curl_global_init`按照此手册页中的说明进行调用。curl_easy_init() 会为您调用它，但在某些情况下可能会导致问题。

[http://curl.haxx.se/libcurl/c/curl_easy_init.html](http://curl.haxx.se/libcurl/c/curl_easy_init.html)

也叫`curl_global_cleanup()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-12T04:42:32.173

这个问题是 3 年前提出的，但问题仍然存在，所以这里是如何处理这个问题的。之后仍然有可访问的内存，并且`curl_global_init`开发[人员意识到了这一点](http://permalink.gmane.org/gmane.comp.web.curl.library/24829)。但是，由于它没有增长，目前没有理由仅仅为了让 valgrind 停止抱怨而修复它。`curl_easy_init`

您可以使用抑制文件中的以下位来抑制来自 curl 的这些错误。

```
{
   <insert_a_suppression_name_here>
   Memcheck:Leak
   match-leak-kinds: reachable
   ...
   fun:curl_global_init
   ...
}

{
   <insert_a_suppression_name_here>
   Memcheck:Leak
   match-leak-kinds: reachable
   ...
   fun:curl_easy_init
   ...
} 
```

然后，您可以像这样使用抑制文件：

```
valgrind --suppressions=my_supp_file.supp my_binary 
```

然后，这些错误将在您的最终报告中显示为已隐藏。例如：

```
==15518== LEAK SUMMARY:
==15518==    definitely lost: 0 bytes in 0 blocks
==15518==    indirectly lost: 0 bytes in 0 blocks
==15518==      possibly lost: 0 bytes in 0 blocks
==15518==    still reachable: 0 bytes in 0 blocks
==15518==         suppressed: 328 bytes in 11 blocks 
```

顺便说一句，如果您有其他要抑制的警告，您可以使用 valgrind 的`--gen-suppressions`参数了解如何抑制它们。有关更多信息，请参阅 valgrind 的联机帮助页。

# database - 无法在 Mac OS X 上启动 Homebrew PostgreSQL 安装 - “权限被拒绝”

> ID：11494955
> 
> 赞同：5
> 
> 时间：2012-07-15T19:31:55.297
> 
> 标签：database, macos, postgresql

我通过 Homebrew 安装了 Postgresql，崩溃后我无法再启动服务器了。

如果我做

```
 $ pg_ctl start 
```

我明白了

```
pg_ctl: no database directory specified and environment variable PGDATA unset 
```

如果我做

```
$ pg_ctl -D /Library/PostgreSQL/data start 
```

我明白了

```
pg_ctl: could not open PID file "/Library/PostgreSQL/data/postmaster.pid": Permission denied 
```

一切都很好，然后......出乎意料，这个。

上面的数据文件夹的权限设置为 postgres 用户的“Everything”和所有人的“None”。

路径看起来不错（在我的 ~/.bash_profile 中）

```
export PATH=/usr/local/bin:$PATH 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T01:24:07.463

当你第一次启动 Pg 时，你是让 homebrew 为你启动它，还是你手动启动它`pg_ctl`？我问是因为我猜您可能需要使用自制脚本和/或使用`launchd`而不是直接通过`pg_ctl`. 我不经常使用自制软件（或 Mac OS X），但快速搜索表明 Pg 的自制软件安装通常通过`launchd`and启动和停止`~/Library/LaunchAgents/org.postgresql.postgres.plist`。

如果要手动管理：

homebrew 通常以什么用户身份运行 PostgreSQL？如果您通过启动 Pg，`pg_ctl`您需要以正确的用户身份运行它。从我在这里看到的关于 homebrew 的其他讨论的模糊记忆中，它可能是一个名为`postgres`or的用户`postgres_`。使用以下命令进行仔细检查：

```
ls -ld /Library/PostgreSQL/data 
```

并查看拥有用户是什么，然后运行：

```
sudo -u postgres_ pg_ctl -D /Library/PostgreSQL/data start 
```

...用数据目录的所有者替换“postgres_”。

我怀疑您收到权限错误的原因是您可能没有递归应用更改。请不要；改为以正确的用户身份运行 Pg。

# php - 从 fancybox iframe 中获取表单字段值并将其返回给 beforeClose 函数

> ID：11494957
> 
> 赞同：2
> 
> 时间：2012-07-15T19:32:32.900
> 
> 标签：php, jquery, iframe, fancybox

我正在使用 jquery fancybox 2 来加载 iframe 表单。表单提交并将数据写入数据库，然后关闭fancybox。所以这一切都很好。但是我想从 iframe 表单中检索隐藏字段值。然后这个值会在父页面上隐藏对应的id。我尝试使用 beforeClose 选项获取隐藏字段值。但是我无法获得隐藏字段值。

隐藏字段有一个页面加载。花式框代码：

```
$(".various").fancybox({
      maxWidth : 800,
      maxHeight   : 700,
      fitToView   : false,
      width    : '70%',
      height      : '90%',
      autoSize : false,
      closeClick  : false,
      openEffect  : 'fade',
      beforeClose : function(){
        var pageload = $('#pageload').val();            
        console.log('var = ' + pageload);
      },
      afterClose : function(){
        if(pageload != 0){
            $('#'+pageload).slideUp('slow');
        } else {
            window.location.reload(true);
        }
      }
    }); 
```

并且fancybox由以下触发：

```
<a href="editcategory.php&pageload=<?php echo $sub_id; ?>" class='various' data-fancybox-type='iframe'>LINK</a> 
```

当 iframe 弹出时：

```
<input type="hidden" value="<?php echo $_GET['pageload']; ?>" id="pageload" name="pageload" /> 
```

我需要做的就是将页面加载值返回给 afterClose 函数。我曾尝试使用 afterLoad 函数来获取值，beforeClose 函数，但除了 null 之外，它们似乎都没有给我答案。然后，这将“滑动”该 ID，然后在索引页面中将其清除。

如果 value = 0，它将重新加载页面。

我整天都在寻找答案，但对于一个简单的 2 行函数来说，它们似乎都非常复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T21:02:45.330

首先，您需要在`pageload`脚本顶部声明变量。现在它只是在`beforeClose`回调函数中有效，所以

```
<script>
 var pageload;
 .
 . 
```

然后你的fancybox回调

```
// we won't use beforeClose but beforeShow
beforeShow: function(){
 // get the value of pageload INSIDE the iframe
 pageload = $('.fancybox-iframe').contents().find('#pageload').val();
},
afterClose : function(){
 if(pageload != 0){
  $('#'+pageload).slideUp('slow');
 } else {
  window.location.reload(true);
 }
} 
```

**注意**：这是为 fancybox v2.0.6+

# jquery - 不使用 .toggle 进行切换

> ID：11494964
> 
> 赞同：0
> 
> 时间：2012-07-15T19:33:09.243
> 
> 标签：jquery

我正在寻找重写以下代码，以便在第一次单击时不仅更改选择器元素的图像 src，第二次单击会将图像 src 更改为 images/spacer.gif，并且任何后续单击都将在之间循环附加图像 src 并用垫片替换它。因为这个函数使用单选按钮和一个（事件），如果可能的话，我想远离 .toggle。下面的代码块仅适用于第一个功能。

```
 $('.item-button').click(function(event) {
    var layerID = $(this).attr('data-layer');
    var itemID = $(this).attr('data-item');
    var selector = '#layer-' + layerID;

          //an itemID of 0 means the item doesn't exist. 
    if (itemID == 0) {
        $('#layer-' + layerID).attr('src', 'images/spacer.gif');
    } else {
        var imageSrc = $(this).parent().find('img').attr('id');
        $(selector).attr('src', imageSrc);
    }
    },
   //a second nonfunctional function to change the src to the spacer in case the same radio button is clicked twice. 
    function(){
      $('#layer-' + layerID).attr('src', 'images/spacer.gif');
      }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T19:58:55.190

我不会查看您的代码，而是给您一个您可以自定义的代码段：

```
//set initial status
$('element').data('status','not_clicked');

$('element').click(function(){
    if( $(this).data('status') == 'clicked' ) {
        $(this).data('status','not_clicked');

        //your code in case of second click
    } else {
        $(this).data('status','clicked');

        //your code in case of first click
    }
}); 
```

**它能做什么：**

1.  设置初始状态 -`not_clicked`
2.  在点击的情况下：
    *   如果当前状态`clicked`设置为`not_clicked`（重置）并运行脚本
    *   else - 将状态更改为`clicked`并运行脚本。

# android - 将整数数组转换为字符串

> ID：11494966
> 
> 赞同：0
> 
> 时间：2012-07-15T19:33:27.127
> 
> 标签：android, arraylist, hashmap, android-activity

首先，我对Java编程完全陌生（3周前才开始），我尽力解决了两天。但没有成功。

我有这个从 SD 卡读取 mp3 文件的类：

```
import java.io.File;
import java.io.FilenameFilter;
import java.util.ArrayList;
import java.util.HashMap;

public class SongsManager {
    // SDCard Path
    final String MEDIA_PATH = new String("/sdcard/audio");
    private ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

    // Constructor
    public SongsManager(){

    }

    /**
     * Function to read all mp3 files from sdcard
     * and store the details in ArrayList
     * */
    public ArrayList<HashMap<String, String>> getPlayList(){
        File home = new File(MEDIA_PATH);

        if (home.listFiles(new FileExtensionFilter()).length > 0) {
            for (File file : home.listFiles(new FileExtensionFilter())) {
                HashMap<String, String> song = new HashMap<String, String>();
                song.put("songTitle", file.getName().substring(0, (file.getName().length() - 4)));
                song.put("songPath", file.getPath());

                // Adding each song to SongList
                songsList.add(song);
            }
        }
        // return songs list array
        return songsList;
    }

    /**
     * Class to filter files which are having .mp3 extension
     * */
    class FileExtensionFilter implements FilenameFilter {
        public boolean accept(File dir, String name) {
            return (name.endsWith(".mp3") || name.endsWith(".MP3"));
        }
    }
} 
```

***问题***：我的应用程序包含 4 个类，并且都在使用`ArrayList< HashMap< String, String >>`. 所以，我需要继续使用`ArrayList< HashMap< String, String >>`.

***必须***：`getPlayList()`返回类型应该总是`ArrayList< HashMap< String, String >>`。因为我在其他类上使用该方法。

***目标***：我想在`SongsManager`类中创建一个音频文件数组（存储在原始文件夹中）：

```
int[] lessonClips = { R.raw.button_1, R.raw.button_2, R.raw.button_3, R.raw.button_4, R.raw.button_5, R.raw.button_6 }; 
```

并让 MusicPlayer 读取这个数组而不是从路径中读取。可以自定义此类以仅播放该**课程剪辑**。

***问题***：如何修改 getPlayList 以操作`LessonClips`并仍然返回 a`songList`类型`ArrayList< HashMap< String, String >>`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T20:02:31.073

我刚刚浏览了您所说的您想要的内容，我觉得将课程剪辑声明为实例变量可能会解决您的目的。这样你就可以在任何你想要的函数中更新课程剪辑，并从函数中返回你想要的任何类型。如下所示：-

```
public class SongManager{
       private int[] lessonclips;

       public ArrayList<HashMap<String, String>> getPlayList(){
           //do whatever you want with lessonclips
           //and return your arraylist which you wanted to return

       }

      public int[] getLessonClips{
         return lessonclips;
        } 
```

# database - 在 CakePHP 中导入数据

> ID：11494970
> 
> 赞同：0
> 
> 时间：2012-07-15T19:34:18.497
> 
> 标签：database, cakephp

我在我的数据库中采用了某种关系系统，当我开始编写模型时，我遇到了一些问题。首先，也许我会展示我的数据库模式。

```
##USERS##
id

##CVS##
id
user_id

##SKILLS##
id
cv_id

user hasOne cv
cv belongsTo user
cv hasMany skill
skill belongsTo cv 
```

这个解决方案似乎是正确的，但是当我试图在技能表中获取 cv_id 时，我不得不写这样的东西：

```
$cv_id = $this->Skill->find('first', array('user_id' => $this->Auth->user('id')));
$this->request->data['Skill']['cv_id'] = $cv_id['CV']['id']; 
```

我发现它非常混乱的解决方案。有没有更好的方法在 cakePHP 中获取这些信息，或者我应该更改表之间的关系？在这种情况下我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:14:11.333

您可以使用以下代码：

```
$this->Skill->virtualFields['cvid'] = 'CV.id';
$cv_id = $this->Skill->find('first', array('user_id' => $this->Auth->user('id')));
$this->request->data['Skill']['cv_id'] = $cv_id['Skill']['cvid'];

---------------------- OR -----------------------------

$this->Skill->virtualFields['cv_title'] = 'CV.title';
$cv_id = $this->Skill->find('first', array('user_id' => $this->Auth->user('id')));
$this->request->data['Skill']['cv_title'] = $cv_id['Skill']['cv_title'];

---------------------- OR -----------------------------

$this->Skill->virtualFields['cv_title'] = 'CV.title';
$this->request->data = $this->Skill->find('first', array('user_id' => $this->Auth->user('id'))); 
```

您可以使用上述语法动态添加虚拟字段。

这是[解释](http://book.cakephp.org/2.0/en/models/virtual-fields.html#limitations-of-virtualfields)。希望它对你有用。

# ruby-on-rails - 如何创建具有突出显示的搜索引擎

> ID：11494972
> 
> 赞同：-1
> 
> 时间：2012-07-15T19:34:24.537
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gem

我想在 Rails 中为我的网站创建一个搜索引擎，其中包含概述（搜索词周围的一些词）和突出显示的词。像谷歌或 github 之类的东西。

这是一个宝石吗？最好的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T20:14:46.183

有各种搜索引擎，如 sphinx 或 solr，它们也有宝石来连接轨道，例如。它们本身就是宝石。他们两个都有railscasts。

当您想突出显示结果时，可以使用 Rails 提供的`excerpt`和`highlight`方法的组合：

[http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html](http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html)

# ruby-on-rails-3 - ActiveRecord：返回属于 Ancestry 节点树的对象

> ID：11494973
> 
> 赞同：0
> 
> 时间：2012-07-15T19:34:32.143
> 
> 标签：ruby-on-rails-3

我有一个 Category 模型，它使用 Ancestry gem 创建树层次结构。如果我有模特关系，

```
Category has_many :posts 
```

我想知道如何返回属于某个类别或该类别子项的帖子。category.subtree 返回一个 ARel 对象，所以我可以这样做：

```
category.subtree.includes(:posts) 
```

它按类别映射帖子，但我只想要帖子。我唯一能想到的就是遍历集合并创建一个新的帖子集合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T22:29:42.573

尝试：

```
Post.where('category_id in (?)', category.subtree_ids) 
```

我现在不记得，如果 subtree_ids 也会返回类别本身的 id。

# c# - ProgressBar 重置为 60%

> ID：11494976
> 
> 赞同：4
> 
> 时间：2012-07-15T19:34:37.650
> 
> 标签：c#, progress-bar

我有这个代码：

```
for(int k = 0; k<11; k++)
{
    pBar.Maximum = 10;
    pBar.Value = k;
    if (pBar.Maximum == k)
        pBar.Value = 0;
} 
```

但是，问题是，进度条在大约 60% 满时会被重置。如何确保进度条在重置之前一直填满？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T19:37:43.460

```
pBar.Maximum = 10;
int count = 0;

Timer timer = new Timer();
timer.Interval = 1000;
timer.Tick += (source, e) =>
{
    pBar.Value = count;
    if (pBar.Maximum == count)
    {
        pBar.Value = 0;
        timer.Stop();
    }
    count++;
}
timer.Start(); 
```

您的问题是您正在使用循环。您需要使用计时器，以便程序有时间执行检查/分配和更新屏幕。

该代码将 for 循环替换为调用循环体的计时器。由于计时器没有索引变量，因此它在计时器之外进行初始化（计数）并随着每个滴答声更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T19:38:06.327

第一：没有任何理由`pBar.Maximum`对*每个 interarion*进行分配。做就是了：

```
pBar.Maximum = 10;
for(int k = 0; k<11; k++)
{
   pBar.Value = k;
   if (pBar.Maximum == k)
      pBar.Value = 0;
} 
```

第二：您的代码导致*阻塞*迭代。它永远无法正确运行。使用多线程并`value`根据 some更改进度`event`，`tick`无论是什么，而不是循环，就像在这里完成的那样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T20:15:21.770

如果你切换到经典模式，这个故障就会消失。在重置之前，进度条将显示为完全绘制。

这是因为在经典模式下，绘画操作是同步的，并且在`Value`setter 返回之前完成，但在主题模式下，当您增加值时会播放某种动画，这需要一些时间才能播放。

相反，当您减小该值时，没有动画；进度条立即缩小。

这就是为什么它只显示大约 60% 的原因：在进度条有时间绘制最后几个增量的动画之前，您减小了值（立即完成）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T23:40:32.297

我终于找到了解决这个问题的方法，并在[这里](http://thestrangertech.blogspot.com/2012/08/c-fix-progressbar-not-updating-fast.html)写了。这个想法来自[THIS](https://stackoverflow.com/a/1214147/1482644) SO question。

```
 progressBar1.Value = e.ProgressPercentage;
     if (e.ProgressPercentage != 0)
         progressBar1.Value = e.ProgressPercentage - 1;
     progressBar1.Value = e.ProgressPercentage;
     if (progressBar1.Maximum == e.ProgressPercentage)
         progressBar1.Value = 0; 
```

# python - Python：为什么这个列表中的一个元素没有被打印出来？

> ID：11494977
> 
> 赞同：-1
> 
> 时间：2012-07-15T19:34:37.027
> 
> 标签：python, list, graph

当给出具有以下内容的边列表时，我试图在图中打印不同的节点：

```
def find_nodes(graph):
    # get the distinct nodes from the edges
    nodes = []
    l = len(graph)
    for i in range(l):
        edge = graph[i]
        n1 = edge[0]
        n2 = edge[1]
        if n1 not in nodes:
            nodes.append(n1)
        if n2 not in nodes:
            nodes.append(n2)
    return nodes

graph = ((1,2),(2,3), (3,1))
print find_nodes(graph) 
```

但我只知道我`(1,2)`怎么错过了`3`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T20:01:42.433

当我查看您插入的文本时，您似乎将制表符和空格混合为左侧空格：

这可以通过查看每一行的 repr 来确认：

```
'    def find_nodes(graph):'
'        # get the distinct nodes from the edges'
'        nodes = []'
'        l = len(graph)'
'        for i in range(l):'
'        \tedge = graph[i]'
'        \tn1 = edge[0]'
'        \tn2 = edge[1]'
'        \tif n1 not in nodes:'
'        \t\tnodes.append(n1)'
'        \tif n2 not in nodes:'
'        \t\tnodes.append(n2)'
'    \treturn nodes' 
```

这可能导致行没有缩进到您认为的级别。这是我将您的输入复制并粘贴到控制台中得到的结果：

```
>>> s = """
...     def find_nodes(graph):
...         # get the distinct nodes from the edges
...         nodes = []
...         l = len(graph)
...         for i in range(l):
...             edge = graph[i]
...             n1 = edge[0]
...             n2 = edge[1]
...             if n1 not in nodes:
...                     nodes.append(n1)
...             if n2 not in nodes:
...                     nodes.append(n2)
...             return nodes
...     
...     graph = ((1,2),(2,3), (3,1))
...     print find_nodes(graph)
... 
... """ 
```

在我看来，这`return nodes`条线执行得太早了。将代码写入文件并使用该`python -tt`选项检查空格问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T19:46:20.057

也为我工作。

一种可能更 Pythonic 的形式，使用 set：

```
def find_nodes(graph):
    return list({element
                 for edge in graph
                 for element in edge}) 
```

# c# - 使用会话来保护用户是否登录时可以访问的 Web 文件。有用还是没用？

> ID：11494978
> 
> 赞同：0
> 
> 时间：2012-07-15T19:34:49.693
> 
> 标签：c#, asp.net

我有一个登录页面和一个全局页面，用户在登录后被重定向到该页面。

我需要知道如果用户未登录，这是否是保护某些要访问的 Web 文件的好方法。

`global.aspx`代码（用户登录后被重定向的受保护页面）

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (Session["Login"] != null)
        {
            if (Session["Login"].Equals("Logged"))
            {
                userName.Text = (string)Session["UserTest"].ToString();
            }
        }
        else
            Response.Redirect("http://localhost:port/Login.aspx");
    } 
```

登录页面代码：

```
Session["Login"] = "Logged";
Session["UserTest"] = "Test123";
Response.Redirect("http://localhost:port/Global.aspx"); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T19:36:27.950

我认为您应该阅读有关[表单身份验证](http://msdn.microsoft.com/en-us/library/ff647070.aspx)的信息。还有[另一篇](http://msdn.microsoft.com/en-us/library/ff648341.aspx)关于它的文章。您编写的代码看起来不错，但我的上帝，您正在重新发明轮子。

表单身份验证的想法是，当前经过身份验证的用户名存储在加密的 cookie 中（除非另有定义）并随每个请求一起发送。表单身份验证模块一旦激活，就会在每个请求中检查此 cookie 的存在，并自动分配该`User`属性以使其可用于您的所有页面。如果有人试图访问受保护的页面，该模块只会将他重定向到在`web.config`. `<location>`另一方面，web.config 中的元素允许您指定应用程序的哪些页面/文件夹需要身份验证。

因此，一旦您激活表单身份验证，您的受保护页面如下所示：

```
protected void Page_Load(object sender, EventArgs e)
{
    userName.Text = User.Identity.Name;
} 
```

`Login`页面（不应受到保护）：

```
public void Login_Click(object sender, EventArgs e) 
{
    if (Membership.ValidateUser(userName.Text, password.Text))
    {
        FormsAuthentication.RedirectFromLoginPage(username.Text, false)
    }
    else
    {
        errorLabel.Text = "Invalid credentials";
    }
} 
```

您还可以签出可以进一步简化此操作的[登录控件。](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.login.aspx)

# django - 启用了 auto_now_add 选项的 DateTimeField 是否必须在夹具中具有值

> ID：11494986
> 
> 赞同：14
> 
> 时间：2012-07-15T19:36:14.207
> 
> 标签：django, django-models, django-fixtures

我的模型创建字段配置如下：

```
created = models.DateTimeField(auto_now_add=True) 
```

在 JSON 固定装置中，我不想为 created 声明值，但是当我尝试加载固定装置 (loadata) 时出现错误：

> created 不能为 NULL

所以我必须在固定装置中提供创造价值还是有其他方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-11-24T10:42:29.957

您可以使用 pre_save 信号来处理 loaddata(fixtures)

```
def pre_save_for_conference_code_fixture(sender, instance, **kwargs):
  if kwargs['raw']:
    instance.updated_at = timezone.now()
      if not instance.id:
        instance.created_at = timezone.now() 
```

[https://docs.djangoproject.com/en/3.1/ref/django-admin/#django-admin-loaddata](https://docs.djangoproject.com/en/3.1/ref/django-admin/#django-admin-loaddata)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-15T20:37:03.303

尝试

```
import datetime
created = models.DateTimeField(default=datetime.datetime.now) 
```

关于为什么会发生这种情况，你可以在这里阅读：[Django auto_now and auto_now_add](https://stackoverflow.com/questions/1737017/django-auto-now-and-auto-now-add) and [Django model field default](https://docs.djangoproject.com/en/dev/ref/models/fields/#default)

# c++ - 使用三元运算符初始化引用变量？

> ID：11494988
> 
> 赞同：18
> 
> 时间：2012-07-15T19:36:20.620
> 
> 标签：c++, reference, ternary-operator

抛开所有的可维护性和阅读问题，这些代码行会产生未定义的行为吗？

```
float  a = 0, b = 0;
float& x = some_condition()? a : b;
x = 5;
cout << a << ", " << b; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-15T19:39:51.127

不，这很好。它不会在此代码中创建未定义的行为。您只需根据条件将 a 或 b 的值更改为 5。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-15T19:42:05.680

这绝对没问题，只要条件的两边都是可用于初始化引用的表达式（例如变量、指针取消引用等）

```
float& x = some_condition()? a : *(&b); // This is OK - it is the same as your code
float& x = some_condition()? a : b+1;   // This will not compile, because you cannot take reference of b+1 
```

# c# - DropNet DropBox登录，如何在控制台应用程序中以编程方式进行？

> ID：11494989
> 
> 赞同：5
> 
> 时间：2012-07-15T19:36:25.747
> 
> 标签：c#, .net, dropbox, dropbox-api, dropnet

问题：

我在这里使用 DropBox csharp API：
[https ://github.com/dkarzon/DropNet](https://github.com/dkarzon/DropNet)

来自单元测试，以及来自这里的唯一工作示例 [https://github.com/dkarzon/DropNet/blob/master/DropNet.Samples/DropNet.Samples.Web/Default.aspx.cs](https://github.com/dkarzon/DropNet/blob/master/DropNet.Samples/DropNet.Samples.Web/Default.aspx.cs)

我认为它是这样工作的：

```
DropNet.DropNetClient client = new DropNet.DropNetClient(strApiKey, strAppSecret);

DropNet.Models.UserLogin login = client.GetToken();
client.UserLogin = login;

var accountInfo = client.AccountInfo();
str = accountInfo.quota_info.quota.ToString(); 
```

问题是，它在 accountinfo 上引发异常。(System.Net.HttpStatusCode.Unauthorized) 一切正常之前，我得到了登录 (usertoken & usersecret) 。

我认为我的问题是示例应用程序的这一部分：

```
var url = _client.BuildAuthorizeUrl(Request.Url.ToString() + "?dropboxcallback=1");
Response.Redirect(url); 
```

它重定向到 Dropbox 以进行登录...我没有 Web 应用程序，所以我没有 URL...

我拥有的是一个控制台应用程序，它应该每天晚上自动备份我的数据库作为一项服务，这肯定是非常糟糕的，需要一个网络浏览器和一个必须输入电子邮件/用户名+密码的用户。

如何通过直接提供硬编码的用户名和密码进行登录？

如果我使用示例应用程序，那么它可以工作，但这需要在 Web 上输入用户名和密码，这对于控制台应用程序来说很耗时......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T21:23:26.973

据我从其他 API（facebook、google、stack exchange 等）了解到，您必须将您的用户重定向到 Dropbox 的网页，在那里它将授予您使用其帐户执行操作的权限。

因此，一般来说**，如果没有 webbrower，就不可能实现这一点**。否则，您将不得不执行非常肮脏的黑客攻击来破解 Dropbox 的权限系统。

请查看谷歌上的“OAuth 2.0 授权流程”。这是我在[雅虎](http://developer.yahoo.com/oauth/guide/oauth-auth-flow.html)找到的一张图表，它展示了它是如何工作的：

[![OAuth 2.0 流程](../Images/102f9280a8407d303161e0dc973c4103.png)](http://developer.yahoo.com/oauth/guide/oauth-auth-flow.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T08:32:27.350

为了使用 DropnetClient 的 4 参数构造函数，我们还需要构建基于 Web 的 url 并允许用户验证他的帐户，这是 compusory 的事情，用户在验证过程中点击允许按钮后会生成 accesstoken

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T00:01:41.120

正如 GameScripting 所解释的，Dropbox API 使用 oauth，它需要用户通过 Dropbox 网站登录来验证访问令牌。

在此处查看文档：http: [//dkdevelopment.net/what-im-doing/dropnet/](http://dkdevelopment.net/what-im-doing/dropnet/)以了解 3 步过程。

您正在构建什么样的应用程序？正常过程是在应用程序中加载浏览器控件并使用它导航到登录 URL。

还可以查看示例 Windows Phone 应用程序，让您了解此过程的工作原理：[https ://github.com/dkarzon/DropNet/blob/master/DropNet.Samples/DropNet.Samples.WP7/MainPage.xaml 。CS](https://github.com/dkarzon/DropNet/blob/master/DropNet.Samples/DropNet.Samples.WP7/MainPage.xaml.cs)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-22T04:41:43.963

您可以硬编码 OAuth 访问令牌，而不是硬编码用户名和密码。

首先，创建一个遵循基于浏览器的标准授权流程的简单程序（使用相同的应用程序密钥）。然后使用它向所需用户授权应用程序。这将为您提供与该用户和您的应用密钥相关联的 OAuth 访问令牌（“令牌”和“令牌机密”）。

然后，在您的服务式应用程序中，只需硬编码 OAuth 访问令牌（使用`DropNetClient`4 参数构造函数）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-21T10:21:28.507

有可能，使用 SharpBox - 经过测试，有效。
需要手动一次性获取AccessToken，之后可以省略登录页面，使用保存的AccessToken。

[http://www.jayway.com/2012/02/06/unboxing-dropbox-and-sharpbox-2/](http://www.jayway.com/2012/02/06/unboxing-dropbox-and-sharpbox-2/)

神奇的线是：

```
Globals.DropBox.Token = AppLimit.CloudComputing.SharpBox.StorageProvider.DropBox.DropBoxStorageProviderTools
.ExchangeDropBoxRequestTokenIntoAccessToken(
      Globals.DropBox.config
    , Globals.DropBox.AppKey, Globals.DropBox.AppSec
    , Globals.DropBox.requestToken
); 
```

# asp.net-mvc - 在 asp.net mvc 中使用单元测试验证重定向

> ID：11494991
> 
> 赞同：15
> 
> 时间：2012-07-15T19:36:33.350
> 
> 标签：asp.net-mvc, unit-testing

是否有一种简单的方法可以在单元测试中验证控制器操作确实重定向到特定页面？

控制器代码：

```
public ActionResult Create(ProductModel newProduct)
{
    this.repository.CreateProduct(newProduct);
    return RedirectToAction("Index");
} 
```

所以在我的测试中，我需要验证控制器实际上是在重定向。

```
ProductController controller = new ProductController(repository);

RedirectToRouteResult result = (RedirectToRouteResult)controller.Create(newProduct);

bool redirected = checkGoesHere;
Assert.True(redirected, "Should have redirected to 'Index'"); 
```

我只是不确定如何进行验证。有任何想法吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-15T19:47:22.220

当然：

```
Assert.AreEqual("Index", result.RouteValues["action"]);
Assert.IsNull(result.RouteValues["controller"]); // means we redirected to the same controller 
```

并使用[MvcContrib.TestHelper](http://mvccontrib.codeplex.com/wikipage?title=TestHelper)您可以以更优雅的方式编写此单元测试（您甚至不需要强制转换为 a `RedirectToRouteResult`）：

```
// arrange
var sut = new ProductController(repository);

// act
var result = sut.Create(newProduct);

// assert
result
    .AssertActionRedirect()
    .ToAction("Index"); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-12-06T14:12:39.197

试试这个...

```
var result = sut.Create(newProduct) as RedirectToRouteResult;
Assert.Equal(result.RouteValues["action"], "Index"); 
```

如果你在重定向中传递一个参数，你可以做这样的事情......

```
var result = sut.Create(newProduct) as RedirectToRouteResult;
Assert.Equal(result.RouteValues["action"], "Index");
Assert.Equal(result.RouteValues["Parameter Name"], "Parameter Value"); 
```

希望这可以帮助 ：）

# javascript - 是否可以使用 Ruby 和 Nokogiri 插入 JavaScript 引擎？

> ID：11494994
> 
> 赞同：1
> 
> 时间：2012-07-15T19:37:02.097
> 
> 标签：javascript, ruby, web-scraping, web-crawler, nokogiri

我正在编写一个应用程序来抓取一些网站并从中抓取数据。我正在使用 Ruby、Curl 和 Nokogiri 来执行此操作。在大多数情况下，这很简单，我只需要 ping 一个 URL 并解析 HTML 数据。设置工作得很好。

但是，在某些情况下，网站会根据用户在某些单选按钮上的输入来检索数据。这会调用一些 JavaScript 从服务器获取更多数据。生成的 URL 和发布的数据由 JavaScript 代码确定。

是否可以使用：

1.  一个 JavaScript 库以及这个设置，它能够为我确定在 HTML 页面中执行 JavaScript？

2.  除了使用不同的库之外，HTML 和 JS 库是否有一些集成或通信方式？例如，如果单击按钮，Nokogiri 需要调用 JavaScript，然后 JavaScript 需要更新 Nokogiri。

如果我的方法看起来不是最好的，那么您的建议是使用 Ruby 在网络上构建一个爬虫 + 爬虫。

编辑：看起来第 1 点可以使用 therubyrace，因为它在您的代码中嵌入了 V8 引擎，但是是否可以替代第 2 点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T19:44:06.223

您正在寻找运行真实浏览器并允许您在网页上执行您能想到的所有操作的[Watir 。](http://watir.com/)有一个类似的项目叫做[Selenium](http://selenium.rubyforge.org/)。

您甚至可以在 Linux 机器上使用 Watir 和所谓的“无头”浏览器。

## Watir 无头示例

假设我们有这个 HTML：

```
<p id="hello">Hello from HTML</p> 
```

和这个Javascript：

```
document.getElementById('hello').innerHTML = 'Hello from JavaScript'; 
```

（演示：http: [//jsbin.com/ivihur](http://jsbin.com/ivihur)）

并且您想获取动态插入的文本。首先，您需要一个装有`xvfb`并`firefox`安装的 Linux 机器，例如在 Ubuntu 上：

```
$ apt-get install xvfb firefox 
```

您还需要`watir-webdriver`和`headless`gems 所以继续安装它们：

```
$ gem install watir-webdriver headless 
```

然后你可以从页面中读取动态内容，如下所示：

```
require 'rubygems'
require 'watir-webdriver'
require 'headless'

headless = Headless.new
headless.start
browser = Watir::Browser.new

browser.goto 'http://jsbin.com/ivihur' # our example
el = browser.element :css => '#hello'
puts el.text

browser.close
headless.destroy 
```

如果一切顺利，这将输出：

```
Hello from JavaScript 
```

我知道这也在后台运行浏览器，但这是我能想到的最简单的解决方案。启动浏览器需要相当长的时间，但随后的请求非常快。`goto`（对于我的 Rackspace 云服务器上的每个请求，多次运行然后获取上述动态文本大约需要 0.5 秒）。

来源：[http ://watirwebdriver.com/headless/](http://watirwebdriver.com/headless/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-14T21:27:49.710

# 水豚 + PhantomJS

我最喜欢的 Ruby 控制的无头浏览器是[PhantomJS](https://rubygems.org/gems/phantomjs)。PhantomJS 是一个基于 WebKit 的无头浏览器。它包括 Poltergeist，它是 Capybara 的驱动程序。

总之，堆栈如下所示：

```
Capybara -> Poltergeist -> PhantomJS -> WebKit 
```

请注意，您可以直接将 PhantomJS 与 selenium-webdriver 一起使用，但 Capybara API 更好（恕我直言）。

作为一个最小的 WebKit 实现，PhantomJS 的启动时间比 Chrome 或 IE 等完整浏览器更快。

抓取谷歌结果链接的示例代码：

```
module Test
  class Google
    include Capybara::DSL

    def get_results
      visit('/')
      fill_in "q", :with => "Capybara"
      click_button "Google Search"
      all(:xpath, "//li[@class='g']/h3/a").each { |a| puts a[:href] }

    end
  end
end

scraper = Test::Google.new
scraper.get_results 
```

除了标准的 Capybara 功能外，Poltergeist 还可以做一些非常方便的事情：

*   `page.evaluate_script`使用and注入并运行你自己的 javascript`page.execute_script`
*   `page.within_frame`和`page.within_window`
*   `page.status_code`和`page.response_headers`
*   `page.save_screenshot`<- 当事情出错时，这真的很好！
*   `page.driver.render_base64(format, options)`
*   `page.driver.scroll_to(left, top)`
*   `page.driver.basic_authorize(user, password)`
*   `element.native.send_keys(*keys)`
*   cookie 处理
*   拖放

这些功能列在 Poltergeist GitHub 页面上：[https](https://github.com/teampoltergeist/poltergeist) ://github.com/teampoltergeist/poltergeist 。

# 迅捷

如果您真的想尽可能地提高性能，并且不介意切换到 JRuby 来这样做，我发现[Celerity](http://celerity.rubyforge.org/)的速度非常快。

Celerity 是 Java 的 HTMLUnit 的包装器。它速度很快，因为 HTMLUnit 不是一个完整的浏览器，它更像是一个执行 JavaScript 的模拟器。缺点是它不支持完整浏览器所支持的所有 JavaScript，因此它不会支持非常重 JS 的网站，但对于大多数网站来说已经足够了，并且一直在变得更好。

另一个优点是 JRuby 的多线程特性。使用[Peach (parallel each) gem](http://peach.rubyforge.org/)，您可以并行启动许多浏览器。我过去曾使用测试套件完成此操作，并大大减少了完成时间。事实上，我们使用 Celerity + Peach 制作了一个负载测试器，它比典型的 JMeter、Grinder、apachebench 等要复杂得多。它真的可以锻炼我们的网站！

# javascript - IE 8 中的“对象不支持此属性或方法”。在调试中执行良好

> ID：11494996
> 
> 赞同：2
> 
> 时间：2012-07-15T19:37:14.013
> 
> 标签：javascript, jquery, internet-explorer, debugging

我不知道我是否愚蠢并遗漏了一些明显的东西，但是：

我有一个包含以下脚本的页面：

```
$(document).ready(function() {
    $('.fsBtn').click(function(e) {
        $("#fullscreenVideo").show();
        player.stopVideo();
        playerFS.playVideo();
    });
}); 
```

在每个浏览器栏 IE8 中都可以正常加载。但是在 IE8 中，调试器会出现 `Object doesn't support this property or method Line 144`：`playerFS.playVideo()`

我检查了它是否已被声明-它已声明。奇怪的是，如果我进入 IE 的脚本调试器并运行`playerFS.playVideo()`它将被 IE 接受。

为什么这个脚本不能在代码中执行，但允许我在调试中很好地执行它？

以下是我到目前为止采取的步骤： - 将脚本放在准备好的文档中，以确保其正常。- 将脚本放置在页面中，而不是外部 JS 文件中。- IE 调试模式手动运行脚本。

任何帮助将不胜感激，这确实让我难过。如有需要可以提供更多信息。

编辑： Player 和 playerFS 都是这样定义的：

```
function onYouTubePlayerAPIReady() {
    player = new YT.Player('player', {
        height: '360',
        width: '640',
        videoId: V_ID,
        playerVars: playerParams,
        events: {
            // 'onReady': onPlayerReady,
            // 'onStateChange': onPlayerStateChange
        }
    });
    //exact Same code again but for playerFS instead of player
} 
```

在另一个 .

播放器的 HTML 页面和 JS：http: [//pastebin.com/ZbBwKg9a](http://pastebin.com/ZbBwKg9a)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:02:03.130

youtube API 很难使用 JSAPI 嵌入到隐藏的 div 中。

尝试在隐藏视频之前添加一段初始化视频的代码，以确保它被正确创建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T19:55:40.820

尝试在玩家准备好 dom 时执行您的代码。
您为玩家的 onReady 事件提供了一个 evemtHandler，因此，您所要做的就是将所有代码包装到一个名为“onPlayerReady”的函数中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T19:52:53.987

你的代码有一大堆只能在 IE 版本小于 9 中运行的东西。我会在那里寻找问题：

```
 <!--[if IE lt 9]>
    <script>
    if($.browser.msie){

        var params = { allowScriptAccess: "always" };
        var atts = { id: "player" };
        swfobject.embedSWF("http://www.youtube.com/v/_4nFh0CRNgo&enablejsapi=1&playerapiid=ytplayer&version=3&cc_load_policy=1&controls=0&modestbranding=0&rel=0&showinfo=0",
                           "player", "640", "360", "8", null, null, params, atts);
        }

        var paramsfs = { allowScriptAccess: "always" };
        var attsfs = { id: "playerFS" };
swfobject.embedSWF("http://www.youtube.com/v/_4nFh0CRNgo&enablejsapi=1&playerapiid=ytplayerFS&version=3&cc_load_policy=1&controls=0&modestbranding=0&rel=0&showinfo=0",
                       "playerFS", "940", "660", "8", null, null, paramsfs, attsfs);

        legacyCode = true;
        subtitlesFromTranscript = true; 
    </script>
    <![endif]--> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T18:13:00.227

这是由未为 HTML5 设置的文档元素标记引起的。对于 !DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"... IE 9+ 等，IE 9+ 会自动将浏览器退回到 HTML4。HTML5 适用于 IE 9+ 文档元素标记必须为 !DOCTYPE HTML。

我将注释添加到 stackoverflow.com 是因为 MS 开发网络不知道为什么 .play 在 IE 9 上无法在其浏览器 IE 9 上运行。

我喜欢 HTML5，但使用部分、导航、页眉、页脚而不是 div 又会带来大量浏览器不兼容问题！谷歌的 html5shiv 不是解决方案。