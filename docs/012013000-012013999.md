# StackOverflow 问答 12013000-12013999

# wordpress - 如何从指向由谷歌应用引擎托管的应用程序的域托管 wordpress 博客？

> ID：12013000
> 
> 赞同：5
> 
> 时间：2012-08-17T20:50:55.723
> 
> 标签：wordpress, google-app-engine, dns, a-records

我有一个由 Google App Engine 托管的 Python Web 应用程序，其中 .com 指向 App Engine 应用程序。我想在 mydomain.com/blog 上创建一个 Wordpress 博客。由于 Wordpress 在 PHP 上运行，我认为使用 cpanel 在我的另一个 Web 主机帐户上托管 Wordpress 博客并更改一些域指针会更容易。实现这一目标的最佳方法是什么？

我想为“博客”设置一个 DNS A 名称记录以指向我的其他网络主机帐户将创建 blog.mydomain.com 并解决这个问题。但是有没有办法让 mydomain.com/blog 指向另一个带有 Wordpress 博客的网络托管帐户？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T20:36:40.657

另一种类似于 renab 的方法：在您的 Wordpress 机器上，您可以将 Apache（或任何其他合理的 http 服务器）配置为在您的 App Engine 应用程序前面为除 /blog 之外的每个 URL （将直接提供）之外的每个 URL 充当代理.

您还可以在 Apache 服务器上启用某种程度的缓存并节省一点处理成本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T20:57:05.033

一个简单的解决方案可能是创建您在问题中提到的 A 记录，然后将 index.html 放在应用引擎上的 blog/ 目录中，其中包含

`window.location = "http://blog.mydomain.com"`

作为body标签的onload函数。

另一种解决方案是添加一个 .htaccess 文件，将[http://www.mydomain.com/blog](http://www.mydomain.com/blog)重定向到[http://blog.mydomain.com](http://blog.mydomain.com)。

编辑：正如下面评论中提到的，appengine 不支持这种方法。我将其保留是因为它可能会帮助那些有与应用程序引擎无关的类似问题的人。

前面没有 www 的域需要类似的重定向。

编辑以获得更好的 htaccess 示例：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^(www\.)?mydomain\.com$
RewriteRule ^blog/(.*) http://blog.mydomain.com/$1 [R=301,L] 
```

您将不得不检查我的 htaccess 语法，因为我不得不编写重写规则已经有一段时间了，而且我没有方便的网络服务器来测试它

# google-maps-api-3 - MBTA Google 地方信息 API

> ID：12013006
> 
> 赞同：0
> 
> 时间：2012-08-17T20:51:31.143
> 
> 标签：google-maps-api-3, google-places-api

也许这是错误的地方，但我似乎找不到其他地方可以找到。有谁知道是否可以访问 Google Places API 中的 MBTA（地铁、T，不管你怎么称呼它 - 非公共汽车/通勤铁路部分）站？我一直在尝试做 transit_station 或 metro_station 但由于某种原因它总是返回而没有结果。然而，当我在谷歌地图上查找波士顿的交通时，它让我可以选择地铁线路。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T21:32:06.060

transit_station 和 metro_station 看起来都可以工作。看起来并非所有这些都在 Places API 中可用：

[http://www.geocodezip.com/v3_GoogleEx_place-search_MBTA.html](http://www.geocodezip.com/v3_GoogleEx_place-search_MBTA.html)

[基于 FusionTables 的 MBTA 地图](http://www.geocodezip.com/v3_FusionTables_MBTA.html)（不是您要找的，但是...）

# multithreading - 在 R 中使用具有多个线程的 data.table

> ID：12013007
> 
> 赞同：8
> 
> 时间：2012-08-17T20:51:33.827
> 
> 标签：multithreading, r, data.table, apply

有没有办法在 R 中利用多个线程进行计算`data.table`？例如，假设我有以下内容`data.table`：

```
dtb <- data.table(id=rep(1:10000, 1000), x=1:1e7)
setkey(dtb, id)
f <- function(m) { #some really complicated function }
res <- dtb[,f(x), by=id] 
```

`f`如果需要一段时间来计算，有没有办法让 R 多线程？在快速的情况下，`f`多线程会有所帮助还是大部分时间都将用于`data.table`将事物分成组？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T00:13:58.387

我不确定这是“多线程”，但也许您打算包含多核解决方案？如果是这样，那么看看这个较早的答案：通过搜索“[r] [data.table] 并行”找到的[R 中的数据子集执行计算](https://stackoverflow.com/questions/11210422/performing-calculations-by-subsets-of-data-in-r)

编辑：（在 4 核机器上速度加倍，但我的系统监视器建议在`mclapply`通话期间仅使用 2 个内核。）从该线程复制的代码：[http ://r.789695.n4.nabble.com/Access-to -local-variables-in-quot-j-quot-expressions-tt2315330.html#a2315337](http://r.789695.n4.nabble.com/Access-to-local-variables-in-quot-j-quot-expressions-tt2315330.html#a2315337)

```
 calc.fake.dt.mclapply <- function (dt) {
     mclapply(6*c(1000,1:4,6,8,10),
              function(critical.age) {
                  dt$tmp <-  pmax((dt$age <  critical.age) * dt$x, 0)
                  dt[, cumsum.lag(tmp), by = grp]$V1})
 } 
 mk.fake.df <- function (n.groups=10000, n.per.group=70) {
    data.frame(grp=rep(1:n.groups, each=n.per.group),
               age=rep(0:(n.per.group-1), n.groups),
               x=rnorm(n.groups * n.per.group),
               ## These don't do anything, but only exist to give
               ## the table a similar size to the real data.
               y1=rnorm(n.groups * n.per.group),
               y2=rnorm(n.groups * n.per.group),
               y3=rnorm(n.groups * n.per.group),
               y4=rnorm(n.groups * n.per.group)) } 
 df <- mk.fake.df 
 df <- mk.fake.df()
 calc.fake.dt.lapply <- function (dt) { # use base lapply for testing
     lapply(6*c(1000,1:4,6,8,10),
            function(critical.age) {
                dt$tmp <-  pmax((dt$age <  critical.age) * dt$x, 0)
                dt[, cumsum.lag(tmp), by = grp]$V1})
 } 
 mk.fake.dt <- function (fake.df) {
    fake.dt <- as.data.table(fake.df)
    setkey(fake.dt, grp, age)
    fake.dt
  } 
 dt <- mk.fake.dt()

require(data.table)
dt <- mk.fake.dt(df)

 cumsum.lag <- function (x) {
    x.prev <- c(0, x[-length(x)])
    cumsum(x.prev)
  } 
 system.time(res.dt.mclapply <- calc.fake.dt.mclapply(dt))
  user  system elapsed 
 1.896   4.413   1.210 

system.time(res.dt.lapply   <- calc.fake.dt.lapply(dt))
   user  system elapsed 
  1.391   0.793   2.175 
```

# jboss7.x - 有没有人让 WS-Trust 在 JBoss 7 中工作？

> ID：12013008
> 
> 赞同：0
> 
> 时间：2012-08-17T20:51:39.893
> 
> 标签：jboss7.x, ws-trust

我确实尝试了*所有*方法来使基于令牌的 WS-Trust Web 服务正常工作，但无济于事。我可以从 STS 获得令牌，但我的一生，我无法弄清楚如何使 WS 服务器安全并使用令牌从外部访问。

所以我想知道的是，是否有人曾经让这个在 JBoss 7 上工作。我对“jboss 上的这个和那个*应该*给你一些信息”不感兴趣。在那里做过 - 不起作用。你能够让它工作吗*？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:06:02.480

I looked at picketlink to secure web services using SAML but it appears to be exposing the SAML authentication using a JAAS security context. So instead I just wrote a custom handler using the picketlink API to secure the WS. The handler essentially does the same thing (i.e. saml assertion expiration and digital signature validation check) as the SAMLTokenCertValidatingCommonLoginModule available in picketlink jars but passes the SAML attributes into WS message context instead of passing it along as a JAAS security context.

Find below the code snippet.

See org.picketlink.identity.federation.bindings.jboss.auth.SAMLTokenCertValidatingCommonLoginModule class of the picketlink-jbas-common source for implementation of methods getX509Certificate, validateCertPath used in the custom handler.

```
public class CustomSAML2Handler<C extends LogicalMessageContext> implements SOAPHandler {

protected boolean handleInbound(MessageContext msgContext) {
    logger.info("Handling Inbound Message");

    String assertionNS = JBossSAMLURIConstants.ASSERTION_NSURI.get();
    SOAPMessageContext ctx = (SOAPMessageContext) msgContext;

    SOAPMessage soapMessage = ctx.getMessage();

    if (soapMessage == null)
        throw logger.nullValueError("SOAP Message");

    // retrieve the assertion
    Document document = soapMessage.getSOAPPart();
    Element soapHeader = Util.findOrCreateSoapHeader(document.getDocumentElement());
    Element assertion = Util.findElement(soapHeader, new QName(assertionNS, "Assertion"));
    if (assertion != null) {
        AssertionType assertionType = null;
        try {
            assertionType = SAMLUtil.fromElement(assertion);
            if (AssertionUtil.hasExpired(assertionType))
                throw new RuntimeException(logger.samlAssertionExpiredError());
        } catch (Exception e) {
            logger.samlAssertionPasingFailed(e);
        }
        SamlCredential credential = new SamlCredential(assertion);
        if (logger.isTraceEnabled()) {
            logger.trace("Assertion included in SOAP payload: " + credential.getAssertionAsString());
        }

        try {
            validateSAMLCredential(credential, assertionType);
            ctx.put("roles",AssertionUtil.getRoles(assertionType, null));
            ctx.setScope("roles", MessageContext.Scope.APPLICATION);

        } catch (Exception e) {
            logger.error("Error: " + e);
            throw new RuntimeException(e);
        }
    } else {
        logger.trace("We did not find any assertion");
    }

    return true;
}

private void validateSAMLCredential(SamlCredential credential, AssertionType assertion) throws LoginException, ConfigurationException, CertificateExpiredException, CertificateNotYetValidException {

    // initialize xmlsec
    org.apache.xml.security.Init.init();

    X509Certificate cert = getX509Certificate(credential);

    // public certificate validation
    validateCertPath(cert);

    // check time validity of the certificate
    cert.checkValidity();

    boolean sigValid = false;
    try {
        sigValid = AssertionUtil.isSignatureValid(credential.getAssertionAsElement(), cert.getPublicKey());
    } catch (ProcessingException e) {
        logger.processingError(e);
    }
    if (!sigValid) {
        throw logger.authSAMLInvalidSignatureError();
    }
    if (AssertionUtil.hasExpired(assertion)) {
        throw logger.authSAMLAssertionExpiredError();
    }

} 
```

}

# visual-studio - Visual Studio 2010 安装时出错

> ID：12013009
> 
> 赞同：-1
> 
> 时间：2012-08-17T20:51:51.503
> 
> 标签：visual-studio, installation

我已经安装了 Service Pack 3 和安装程序 4.5，但在 Visual Studio 安装过程中仍然出现错误。我在互联网上尝试了几本手册，但没有任何效果......这是我的错误日志：

> **[08/17/12,00:10:17] VS 情景：[2]****存在阻塞组件，必须满足才能继续安装* ****[08/17/12,00:10:17] VS 方案：[2] 需要 Windows XP Service Pack 3 [08/17/12,00:10:17] VS 方案：[2] Windows Installer 3.1 或更高版本是必须的。[08/17/12,00:10:17] VS 情景：[2]****阻塞组件列表结束 *** [08/17/12,00:10:35] VS 场景：[2] 未能通过 CVSScenario::Start() 中的警告/块检查 [08/18/12,02:29:47] Microsoft 应用程序错误报告：[2] CMsiComponent::Install() 需要 Microsoft 应用程序错误报告的安装文件，但文件验证失败。[08/18/12,02:29:48] setup.exe: [2] ISetupComponent::Pre/Post/Install() 在 ISetupManager::InternalInstallManager() 中失败，HRESULT -2147467259。[08/18/12,02:29:48] VS70pgui：[2] DepCheck 指示未安装 Microsoft 应用程序错误报告。[08/18/12,02:29:48] VS70pgui：[2] DepCheck 指示未尝试安装 VC 9.0 Runtime (x86)。[08/18/12,02:29:48] VS70pgui：[2] DepCheck 指示未尝试安装 VC 10.0 Runtime (x86)。[08/18/12,02:29:48] VS70pgui：[2] DepCheck 表示 Microsoft 。NET Framework 4 未尝试安装。[08/18/12,02:29:48] VS70pgui：[2] DepCheck 指示 Microsoft Windows Installer 4.5 (x86) - 未尝试安装 Windows XP。[08/18/12,02:29:48] VS70pgui：[2] DepCheck 指示 Microsoft Windows Installer 4.5 更新 (x86) - 未尝试安装 Windows XP。[08/18/12,02:29:48] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Visual F# 2.0 运行时。[08/18/12,02:29:48] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Visual Studio 宏工具。[08/18/12,02:29:48] VS70pgui：[2] DepCheck 指示未尝试安装 TFS 对象模型 (x86)。[08/18/12,02:29:48] VS70pgui：[2] DepCheck 指示未尝试安装 .NET Framework 4 多目标包。[08/18/12,02:29: 48] VS70pgui：[2] DepCheck 指示 Microsoft Visual Studio 2010 Professional - 未尝试安装 ENU。[08/18/12,02:29:48] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Web 部署工具 (x86)。[08/18/12,02:29:48] VS70pgui：[2] DepCheck 指示 Microsoft ASP.NET MVC 2 - 未尝试安装 Visual Studio 2010 工具。[08/18/12,02:29:48] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft ASP.NET MVC 2。[08/18/12,02:29:48] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Silverlight。[08/18/12,02:29:48] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Silverlight 3 SDK。[08/18/12,02:29:48] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Visual Studio 2010 Tools for Office Runtime (x86)。[08/18/12,02:29:48] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Office 开发人员工具 (x86)。[08/18/12,02:29:48] VS70pgui：[2] DepCheck 指示未尝试安装 Dotfuscator Software Services - Community Edition。[08/18/12,02:29:48] VS70pgui：[2] DepCheck 指示未尝试安装 Visual Studio 2010 的 Crystal Reports 模板。[08/18/12,02:29:48] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft SQL Server Compact 3.5 SP2 (x86) ENU。[08/18/12,02:29:48] VS70pgui：[2] DepCheck 指示未尝试安装 Visual Studio 2010 Tools for SQL Server Compact 3.5 SP2 ENU。[08/18/12,02:29:48] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Sync Framework Runtime v1.0 (x86) ENU。[08/18/12,02:29:48] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Sync Services for ADO.NET v2.0 (x86) ENU。[08/18/12,02:29:48] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Sync Framework Services v1.0 (x86) ENU。[08/18/12,02:29:48] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Sync Framework SDK v1.0 (x86) ENU。[08/18/12,02:29:48] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft SQL 发布向导 1.4。[08/18/12,02:29:48] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft SQL Server 系统 CLR 类型。[08/18/12,02:29:48] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft SQL Server 2008 R2 管理对象。[08/18/12,02:29:48] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft SQL Server 2008 Express Service Pack 1 (x86)。[08/18/12,02:29:48] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft SQL Server 2008 R2 数据层应用程序框架。[08/18/12,02:29:48] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft SQL Server 2008 R2 数据层应用程序项目。[08/18/12,02:29:48] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft SQL Server 2008 R2 Transact-SQL 语言服务。[08/18/12,02:29:48] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft SharePoint 开发人员工具。[08/18/12,02:29: 48] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Visual Studio 2010 ADO.NET 实体框架工具。[08/18/12,02:29:48] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Help Viewer 1.0 x86。[08/18/12,02:42:52] Microsoft 应用程序错误报告：[2] CMsiComponent::Install() 需要 Microsoft 应用程序错误报告的安装文件，但该文件未通过验证。[08/18/12,02:42:52] setup.exe: [2] ISetupComponent::Pre/Post/Install() 在 ISetupManager::InternalInstallManager() 中失败，HRESULT -2147467259。[08/18/12,02:42:52] VS70pgui：[2] DepCheck 指示未安装 Microsoft 应用程序错误报告。[08/18/12,02:42:52] VS70pgui：[2] DepCheck 指示未尝试安装 VC 9.0 Runtime (x86)。[08/18/12,02:42:52] VS70pgui：[2] DepCheck 指示未尝试安装 VC 10.0 Runtime (x86)。[08/18/12,02:42:52] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft .NET Framework 4。[08/18/12,02:42:52] VS70pgui：[2] DepCheck 指示 Microsoft Windows Installer 4.5 更新 (x86) - 未尝试安装 Windows XP。[08/18/12,02:42:52] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Visual F# 2.0 运行时。[08/18/12,02:42:52] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Visual Studio 宏工具。[08/18/12,02:42:52] VS70pgui：[2] DepCheck 指示未尝试安装 TFS 对象模型 (x86)。[08/18/12,02:42:52] VS70pgui：[2] DepCheck 指示未尝试安装 .NET Framework 4 多目标包。[08/18/12, 02:42:52] VS70pgui：[2] DepCheck 指示 Microsoft Visual Studio 2010 Professional - 未尝试安装 ENU。[08/18/12,02:42:52] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Web 部署工具 (x86)。[08/18/12,02:42:52] VS70pgui：[2] DepCheck 指示 Microsoft ASP.NET MVC 2 - 未尝试安装 Visual Studio 2010 工具。[08/18/12,02:42:52] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft ASP.NET MVC 2。[08/18/12,02:42:52] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Silverlight。[08/18/12,02:42:52] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Silverlight 3 SDK。[08/18/12,02:42:52] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Visual Studio 2010 Tools for Office Runtime (x86)。[08/18/12,02:42:52] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Office 开发人员工具 (x86)。[08/18/12,02:42:52] VS70pgui：[2] DepCheck 指示未尝试安装 Dotfuscator Software Services - Community Edition。[08/18/12,02:42:52] VS70pgui：[2] DepCheck 指示未尝试安装 Visual Studio 2010 的 Crystal Reports 模板。[08/18/12,02:42:52] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft SQL Server Compact 3.5 SP2 (x86) ENU。[08/18/12,02:42:52] VS70pgui：[2] DepCheck 指示未尝试安装 Visual Studio 2010 Tools for SQL Server Compact 3.5 SP2 ENU。[08/18/12,02:42:52] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Sync Framework Runtime v1.0 (x86) ENU。[08/18/12,02:42:52] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Sync Services for ADO.NET v2.0 (x86) ENU。[08/18/12,02:42:52] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Sync Framework Services v1.0 (x86) ENU。[08/18/12,02:42:52] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Sync Framework SDK v1.0 (x86) ENU。[08/18/12,02:42:52] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft SQL 发布向导 1.4。[08/18/12,02:42:52] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft SQL Server 系统 CLR 类型。[08/18/12,02:42:52] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft SQL Server 2008 R2 管理对象。[08/18/12,02:42:52] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft SQL Server 2008 Express Service Pack 1 (x86)。[08/18/12,02:42:52] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft SQL Server 2008 R2 数据层应用程序框架。[08/18/12,02:42:52] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft SQL Server 2008 R2 数据层应用程序项目。[08/18/12,02:42:52] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft SQL Server 2008 R2 Transact-SQL 语言服务。[08/18/12,02:42:52] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft SharePoint 开发工具。[08/18/12,02:42: 52] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Visual Studio 2010 ADO.NET 实体框架工具。[08/18/12,02:42:52] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Help Viewer 1.0 x86。[08/18/12,02:49:24] Microsoft 应用程序错误报告：[2] CMsiComponent::Install() 需要 Microsoft 应用程序错误报告的安装文件，但该文件未通过验证。[08/18/12,02:49:24] setup.exe: [2] ISetupComponent::Pre/Post/Install() 在 ISetupManager::InternalInstallManager() 中失败，HRESULT -2147467259。[08/18/12,02:49:24] VS70pgui：[2] DepCheck 指示未安装 Microsoft 应用程序错误报告。[08/18/12,02:49:24] VS70pgui：[2] DepCheck 指示未尝试安装 VC 9.0 Runtime (x86)。[08/18/12,02:49:24] VS70pgui：[2] DepCheck 指示未尝试安装 VC 10.0 Runtime (x86)。[08/18/12,02:49:24] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft .NET Framework 4。[08/18/12,02:49:24] VS70pgui：[2] DepCheck 指示 Microsoft Windows Installer 4.5 更新 (x86) - 未尝试安装 Windows XP。[08/18/12,02:49:25] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Visual F# 2.0 运行时。[08/18/12,02:49:25] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Visual Studio 宏工具。[08/18/12,02:49:25] VS70pgui：[2] DepCheck 指示未尝试安装 TFS 对象模型 (x86)。[08/18/12,02:49:25] VS70pgui：[2] DepCheck 指示未尝试安装 .NET Framework 4 多目标包。[08/18/12, 02:49:25] VS70pgui：[2] DepCheck 指示 Microsoft Visual Studio 2010 Professional - 未尝试安装 ENU。[08/18/12,02:49:25] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Web 部署工具 (x86)。[08/18/12,02:49:25] VS70pgui：[2] DepCheck 指示 Microsoft ASP.NET MVC 2 - 未尝试安装 Visual Studio 2010 工具。[08/18/12,02:49:25] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft ASP.NET MVC 2。[08/18/12,02:49:25] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Silverlight。[08/18/12,02:49:25] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Silverlight 3 SDK。[08/18/12,02:49:25] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Visual Studio 2010 Tools for Office Runtime (x86)。[08/18/12,02:49:25] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Office 开发人员工具 (x86)。[08/18/12,02:49:25] VS70pgui：[2] DepCheck 指示未尝试安装 Dotfuscator Software Services - Community Edition。[08/18/12,02:49:25] VS70pgui：[2] DepCheck 指示未尝试安装 Visual Studio 2010 的 Crystal Reports 模板。[08/18/12,02:49:25] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft SQL Server Compact 3.5 SP2 (x86) ENU。[08/18/12,02:49:25] VS70pgui：[2] DepCheck 指示未尝试安装 Visual Studio 2010 Tools for SQL Server Compact 3.5 SP2 ENU。[08/18/12,02:49:25] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Sync Framework Runtime v1.0 (x86) ENU。[08/18/12,02:49:25] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Sync Services for ADO.NET v2.0 (x86) ENU。[08/18/12,02:49:25] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Sync Framework Services v1.0 (x86) ENU。[08/18/12,02:49:25] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Sync Framework SDK v1.0 (x86) ENU。[08/18/12,02:49:25] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft SQL 发布向导 1.4。[08/18/12,02:49:25] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft SQL Server 系统 CLR 类型。[08/18/12,02:49:25] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft SQL Server 2008 R2 管理对象。[08/18/12,02:49:25] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft SQL Server 2008 Express Service Pack 1 (x86)。[08/18/12,02:49:25] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft SQL Server 2008 R2 数据层应用程序框架。[08/18/12,02:49:25] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft SQL Server 2008 R2 数据层应用程序项目。[08/18/12,02:49:25] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft SQL Server 2008 R2 Transact-SQL 语言服务。[08/18/12,02:49:25] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft SharePoint 开发人员工具。[08/18/12,02:49: 25] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Visual Studio 2010 ADO.NET 实体框架工具。[08/18/12,02:49:25] VS70pgui：[2] DepCheck 指示未尝试安装 Microsoft Help Viewer 1.0 x86。****
> 
>  **********

 ***** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T17:26:53.487

对不起，这是因为 ISO 损坏了。当我下载一个新的时它解决了。****

# r - 吸墨纸 R 缓慢

> ID：12013016
> 
> 赞同：0
> 
> 时间：2012-08-17T20:52:20.890
> 
> 标签：r

我正在基于吸墨纸在 R 中进行简单的回测，发现它非常非常慢。有没有办法加快速度？并行处理会有帮助吗？还是该软件包仍在开发中并且将进行改进？

在哪里可以查看blotter的源代码？

谢谢

整个系统：

```
library(quantmod)
library(TTR)
library(blotter) # r-forge revision 193
library(PerformanceAnalytics)

# Set initial values
initDate='2002-07-31'
endDate='2009-10-31'
initEq=100000

# Set currency and instruments
currency("USD")
stock("IEF",currency="USD",multiplier=1)
stock("SPY",currency="USD",multiplier=1)
stock("TLT",currency="USD",multiplier=1)

# Load data with quantmod
print("Loading data")
symbols = c("IEF", "SPY","TLT")
getSymbols(symbols, from=initDate, to=endDate, index.class=c("POSIXt","POSIXct"))

# Adjust prices for splits/dividends (thanks pg)
#IEF = adjustOHLC(IEF)
#SPY = adjustOHLC(SPY)

# Convert data to monthly frequency (to.weekly() needs drop.time=FALSE)
#IEF = to.monthly(IEF, indexAt='endof')
#SPY = to.monthly(SPY, indexAt='endof')
#TLT = to.monthly(TLT, indexAt='endof')

# Set up indicators with TTR
print("Setting up indicators")
IEF$SMA = SMA(Cl(IEF), 200)
SPY$SMA = SMA(Cl(SPY), 200)
TLT$SMA = SMA(Cl(TLT), 200)

# Set up a portfolio object and an account object in blotter
initPortf(name='default', symbols=symbols, initDate=initDate)
initAcct(name='default', portfolios='default', initDate=initDate, initEq=initEq)
verbose = FALSE

# Create trades
for( i in 200:NROW(SPY) ) {
  CurrentDate=time(SPY)[i]
  equity = getEndEq(Account='default', CurrentDate)

  for( symbol in symbols ) {
    sym = get(symbol)
    ClosePrice = as.numeric(Cl(sym[i,]))
    Posn = getPosQty(Portfolio='default', Symbol=symbol, Date=CurrentDate)
    UnitSize = as.numeric(trunc((equity/NROW(symbols))/ClosePrice))

    # Position Entry (assume fill at close)
    if( Posn == 0 ) {
      # No position, so test to initiate Long position
      if( Cl(sym[i,]) > sym[i,'SMA'] ) {
       # Store trade with blotter
        addTxn('default', Symbol=symbol, TxnDate=CurrentDate,
               TxnPrice=ClosePrice, TxnQty=UnitSize, TxnFees=0, verbose=verbose)
      }
    } else {
      # Have a position, so check exit
      if( Cl(sym[i,]) < sym[i,'SMA'] ) {
        # Store trade with blotter
        addTxn(Portfolio='default', Symbol=symbol, TxnDate=CurrentDate,
               TxnPrice=ClosePrice, TxnQty=-Posn, TxnFees=0, verbose=verbose)
      }
    }
  } # End symbols loop

  # Calculate P&L and resulting equity with blotter
  updatePortf(Portfolio='default', Dates=CurrentDate)
  updateAcct(name='default', Dates=CurrentDate)
  updateEndEq(Account='default', Dates=CurrentDate)

} # End dates loop

# Buy and Hold cumulative equity
buyhold = exp(cumsum( ( 0.5*ROC(Cl(IEF)) + 0.5*ROC(Cl(SPY)) )[-1] ))

# Final values
cat('Tactical Asset Allocation Return: ',(getEndEq(Account='default', Date=CurrentDate)-initEq)/initEq,'\n')
cat('Buy and Hold Return: ',tail(buyhold,1)-1,'\n')

# Plot Strategy Summary
png(filename="20091118_blotter_strategy.png", 720, 720)
#charts.PerformanceSummary(ROC(getAccount('default')$TOTAL$End.Eq)[-1],main="Tactical Asset Allocation")
charts.PerformanceSummary(ROC(getAccount('default')$summary$End.Eq)[-1],main="Tactical Asset Allocation")
dev.off()

# Plot Buy and Hold Summary
png(filename="20091118_blotter_buyhold.png", 720, 720)
charts.PerformanceSummary(ROC(buyhold)[-1],main="Buy & Hold")
dev.off() 
```

我的系统：i7-2630 2.0GHz 4GB 内存

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T23:57:55.130

[您引用的博客文章](http://blog.fosstrading.com/2009/11/tactical-asset-allocation-using-blotter.html)中的代码（在评论中）使用月度数据。您的代码使用每日数据。在示例期间，天数是月数的 24 倍，因此预期您的代码花费 24 倍的时间是合理的。

正如[博](http://blog.fosstrading.com/2009/11/tactical-asset-allocation-using-blotter.html)文所说，如果您只想测试交易系统，则应该使用 quantstrat。它甚至提供[了另一个帖子的链接，向您展示如何使用 quantstrat 测试相同的策略](http://blog.fosstrading.com/2011/08/tactical-asset-allocation-using.html)。

# flash - Flash - mp3 编码器/flash.media.Sound 延迟

> ID：12013024
> 
> 赞同：2
> 
> 时间：2012-08-17T20:52:48.060
> 
> 标签：flash, loops, mp3, delay

我正在尝试使用 mp3 文件播放无间隙循环。我已经阅读了一些教程并了解到有类似编码器/装饰延迟之类的东西，并且可以使用一些工具用适当的音乐数据来填补这个空白。它甚至可以正常工作，但是当我尝试在 Flash 中播放该音乐时（实际上是 haxe nme，但我认为这没有任何区别），我发现还有另一个延迟，我猜这是由 flash 造成的.media.Sound（好吧，实际上在互联网的代码中找到了一些这样的评论）。

太好了，因为我有时需要更快或更慢地播放声音，这就是我的播放器的工作方式：

*   提取的字节存储在 bytes var
*   speed 是一个浮点变量，默认 = 1
*   有位置变量以字节表示实际位置（字节由许多声音对象共享，所以我不能轻易使用 bytes.position）
*   当我播放声音时，在 SampleDataEvent 处理程序中，我设置 bytes.position = position * 8，然后读取并播放两个浮点数并更新 position += speed

如果我已经做错了什么 - 请指出。

为了摆脱这种延迟，我尝试：

*   添加延迟变量
*   硬编码从 audacity 读取的声音长度（看起来 flash.media.Sound object.length 不准确，我不确定，但我猜是因为 mp3 解码器/编码器延迟）
*   假设每个声音是 128kbps, 44.1kHz
*   设置 DELAY 所以 flash.media.Sound 对象 bytesTotal - DELAY = 硬编码长度 * 128kbps

它可以播放，但是：

1.  Audacity 的 mp3 仍然有令人讨厌的差距。
2.  mp3 来自填补 mp3 空白的工具（来自这里[http://www.compuphase.com/mp3/mp3loops.htm](http://www.compuphase.com/mp3/mp3loops.htm)）播放效果更好，但开头的声音并不清晰。
3.  停止声音后，我可以听到恼人的“咔哒”声。

您能帮我理解为什么（1）会发生以及如何解决所有 3 个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:07:04.430

使用 Flash 完成无间隙循环很烦人，但这是可能的。

*   尝试制作无缝 MP3 是很困难的，所以完全避免这个问题！将循环导入为 WAV 文件，而不是 MP3。WAV 没有任何编码器延迟，并且可以轻松产生无缝循环。

*   使用[Sound.play()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Sound.html#play%28%29)的 loops 参数循环播放声音。如果音频真的是无缝的，这应该会产生一个无缝的循环。**不要**尝试使用[SOUND_COMPLETE](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/SoundChannel.html#event%3asoundComplete)事件来循环声音。此事件与帧速率相关，并在声音完成后不久触发，而不是在实际完成时触发，因此它总是会导致间隙。

*   正如您所注意到的，Sound.length 通常并不准确。如果您确实需要准确的样本计数，请使用[Sound.extract()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Sound.html#extract%28%29)提取完整的音频数据。它返回提取的样本数。

*   如果由于某种原因您无法嵌入无缝 WAV 文件，或者您必须从外部位置流式传输 MP3，您可以这样做：

    1.  使用 Sound.extract() 提取音频数据。
    2.  切掉数据开头和结尾的静音部分。您可以使用一些硬编码的值来做到这一点，或者通过将样本与一些小 epsilon 进行比较来聪明并切断。
    3.  使用[Sound.loadPCMFromByteArray()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Sound.html#loadPCMFromByteArray%28%29)将裁剪的数据重新加载到声音剪辑中。
    4.  现在可以使用 Sound.play 和 loops 参数循环裁剪的剪辑。

这是一些示例代码：

```
// load our original audio track and extract the samples
var music:Sound = new Music();
var data:ByteArray = new ByteArray();
music.extract(data,99999999);
data.position = 0;

// crop off silent samples from the beginning
// TODO: you should also do this for the end
var i:uint = 0;
const EPSILON:Number = 0.05;
var sample:Number = 0;
// step forward until the magnitude exceeds some threshold
while(data.bytesAvailable > 8 && sample < EPSILON) {
    sample = Math.abs(data.readFloat()) + Math.abs(data.readFloat());
}

// now, data.position is the location where the audio first kicks in
// let's crop it
var croppedData:ByteArray = new ByteArray();
croppedData.writeBytes(data, data.position);
croppedData.position = 0;

// load our newly cropped data and loop
music = new Sound();
music.loadPCMFromByteArray(croppedData, croppedData.length / 8);
music.play(0,99999); 
```

与尝试使用 SampleDataEvent 实时跳过间隙相比，这更容易且处理器密集度更低。如果您确实需要使用 SampleDataEvent 进行动态播放，那么此方法仍然有助于为您提供大量没有间隙的音频数据。

**请注意，上述内容仅适用于 Flash**。由于您使用的是 NME，这增加了一层额外的皱纹，因为 NME 可能会在打包过程中摆弄声音，并且上述功能并非在所有目标上都可用。但是，如果您只是为 Flash 目标发布，这些技术应该仍然有效。

# mysql - 为 MySQL 清空列或使用 JOIN

> ID：12013029
> 
> 赞同：0
> 
> 时间：2012-08-17T20:53:06.420
> 
> 标签：mysql, optimization

我有一个图像表，在图像表中它有拍摄图像的地址。

表中可能有 300k 图像。

很多地址都是空的。

分离地址并对数据进行 JOIN 对我来说更快吗？我的想法是 SELECT 的数据较少，但执行 JOIN 而不是将数据保留在当前表中：

```
select image, address from image_gallery 
```

# html - Sendgrid Newsletter App 自定义标签

> ID：12013032
> 
> 赞同：3
> 
> 时间：2012-08-17T20:53:19.910
> 
> 标签：html, email, tags, sendgrid

任何人都知道具有 Sendgrid 电子邮件模板的默认自定义标签的文档吗？我知道他们有 [UNSUB] 并且我正在使用它。

我想转发给朋友，在浏览器中查看等...

我正在上传自己的模板代码，而不是使用设计编辑器。我必须创建这些吗？为了在浏览器中查看，我是否必须托管我的页面并指向它？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T21:50:46.857

在浏览器中取消订阅和查看的标签应该是`[unsubscribe]`和`[weblink]`。不知道为什么没有记录，但我已经开了一张票来解决这个问题。感谢您的提醒！

**编辑：**

我挖得更深了，得到了完整的内置标签列表：

*   网页链接
*   电子邮件
*   退订

此外，如果您在列表中定义自定义列标题，您可以以相同的方式引用这些标题。（例如，如果您将鞋码添加到列表中的每个人，您可以这样做`[shoe_size]`）

最后的提示是，如果您在 HTML 模式下进行编辑，则需要遵循完整的`href`约定：

```
<a href="[unsubscribe]" ... 
```

# c - 将参数传递给 Oracle 存储过程

> ID：12013033
> 
> 赞同：1
> 
> 时间：2012-08-17T20:53:28.333
> 
> 标签：c, oracle, stored-procedures, oracle-call-interface

以前可能有人问过这个问题，所以如果重复，我很抱歉。如果您可以链接到我可以找到答案的地方，我将不胜感激。我已经查看了其他答案和谷歌，但似乎还没有任何效果。所以...

我在 Oracle 11g 中有一个存储过程（我无法更改），我必须使用 OCI（这里没有选择）。

存储过程声明如下：

```
PROCEDURE GetEmployee(EID IN NUMBER, rcursor IN OUT cursor_type); 
```

我如何在 C 中调用它？

我尝试使用[此处的 OCI 示例](http://asktom.oracle.com/pls/asktom/ASKTOM.download_file?p_file=6551171813078805685)作为基础，对其进行修改：

```
char * query =  "DECLARE \
     EID NUMBER; \
     RCURSOR CORP.EMPASSIST.cursor_type; \
     BEGIN \
       EID:= NULL; \
       RCURSOR := NULL; \
       EMPASSIST.GetEmployee( EID=> EID, RCURSOR => RCURSOR ); \
       :RCURSOR := RCURSOR; --<-- Cursor \
     END;";

OCIError * db_error;
OCIStmt * statement;
OCIEnv * environment;
OCIServer * server;
OCISession * session;
OCISvcCtx * service;

OCIBind * cursor_bind;
OCIBind * eid_bind;
OCIStmt * cursor_stm;
OCIStmt * eid_stm;

retval += OCIStmtPrepare(statement, db_error, (OraText *) query, strlen(query), OCI_NTV_SYNTAX, OCI_DEFAULT);
retval += OCIHandleAlloc(environment, (void **) &eid_stm, OCI_HTYPE_STMT, 0, NULL);
retval += OCIHandleAlloc(environment, (void **) &cursor_stm, OCI_HTYPE_STMT, 0, NULL);
retval += OCIBindByPos(statement, &eid_bind, db_error, 1, &eid_stm, 0, SQLT_NUM, NULL, 0, NULL, 0, 0, OCI_DEFAULT);
retval += OCIBindByPos(statement, &cursor_bind, db_error, 2, &cursor_stm, 0, SQLT_RSET, NULL, 0, NULL, 0, 0, OCI_DEFAULT);

retval += OCIStmtExecute(service, statement, db_error, 1, 0, NULL, NULL, OCI_COMMIT_ON_SUCCESS); 
```

但这似乎对我不起作用。所有句柄分配似乎都工作得很好。没有错误。

但是，它在`OCIStmtExecute`步骤上失败了。之后我必须 BindByPos，它们也失败了，但我猜那是因为语句执行失败。

请帮忙！

**==================================================== =========================**

*已修复：发布答案以防对其他人有所帮助*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T20:03:03.950

如果您发布实际错误会有所帮助。

但是，与命名数据类型一样，绑定 REF 是一个两步过程。首先，调用 OCIBindByName() 或 OCIBindByPos()，然后调用 OCIBindObject()。

REF 使用 SQLT_REF 数据类型绑定。当使用 SQLT_REF 时，被绑定的程序变量必须是 OCIRef * 类型。

通过继承和 REF 可替换性，您可以将 REF 值绑定到子类型实例，在该实例中，需要 REF 到超类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T18:50:18.973

改变：

```
char * query =  "DECLARE \ 
 EID NUMBER; \ 
 RCURSOR CORP.EMPASSIST.cursor_type; \ 
 BEGIN \ 
   EID:= NULL; \ 
   RCURSOR := NULL; \ 
   EMPASSIST.GetEmployee( EID=> EID, RCURSOR => RCURSOR ); \ 
   :RCURSOR := RCURSOR; --<-- Cursor \ 
 END;"; 
```

至

```
int eid = /* whatever value */;
char * query_template = "CALL EMPASSIST.GetEmployee(%d, :RCURSOR)";
char query[1023] =  {'\0'};
snprintf(query, sizeof(query) - 1, query_template, eid); 
```

将其余更改为：

```
OCIError * db_error;   
OCIStmt * statement;   
OCIEnv * environment;   
OCISvcCtx * service;   

OCIBind * cursor_bind;   
OCIStmt * cursor_stm;   

retval += OCIHandleAlloc(environment, (void **) &statement, OCI_HTYPE_STMT, 0, NULL);
retval += OCIStmtPrepare(statement, db_error, (OraText *) query, strlen(query), OCI_NTV_SYNTAX, OCI_DEFAULT);   
retval += OCIHandleAlloc(environment, (void **) &cursor_stm, OCI_HTYPE_STMT, 0, NULL);   
retval += OCIBindByName(statement, &cursorbind, db_error, (OraText *) ":RCURSOR", strlen(":RCURSOR"), &cursor, 0, SQLT_RSET, 0, 0, 0, 0, 0, OCI_DEFAULT);   

retval += OCIStmtExecute(service, statement, db_error, 1, 0, NULL, NULL, OCI_COMMIT_ON_SUCCESS); 
```

# python - 生成序列的“有序子集”的最有效方法

> ID：12013035
> 
> 赞同：7
> 
> 时间：2012-08-17T20:53:31.200
> 
> 标签：python

我需要在 Python 中生成序列的所有“有序子集”（如果我没有使用正确的数学术语，请道歉），用`None`.Given替换省略的元素`[1, 2]`，我想要`[(1, 2), (1, None), (None, 2), (None, None)]`。每个“有序子集”都应该具有这样的属性：在每个位置，它要么与种子序列中的元素完全相同，要么是`None`.

我可以很容易地生成带有以下省略元素的子集：

```
from itertools import combinations
for length in xrange(len(items), 0, -1):
    for combination in combinations(items, length):
        yield combination 
```

不过，我无法弄清楚重建缺失元素的最有效方法是什么。我的第一个想法是做这样的事情：

```
from itertools import combinations
indexes = range(len(items))
for length in xrange(len(items), 0, -1):
    for combination in combinations(indexes, length):
        yield tuple(items[i] if i in combination else None for i in indexes) 
```

只是想知道是否有人可以发现这方面的任何明显缺陷，或者我是否错过了更有效的解决方案。（请注意，这`items`将是一个相当短的列表，通常少于 10 个元素，所以我不关心内部循环中“组合”的 O(N) 搜索）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-17T20:57:14.367

```
from itertools import product, repeat
given = [1, 2]
with_nones = zip(given, repeat(None))
print(list(product(*with_nones))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T01:51:25.297

这是另一个：

```
>>> given=[1,2,3,4]
>>> rtr=[[]]
>>> for t in map(None,*(given,[None])):
...    rtr=[x+[y] for x in rtr for y in t]
... 
>>> rtr
[[1, 2, 3, 4], [1, 2, 3, None], [1, 2, None, 4], [1, 2, None, None], [1, None, 3, 4], [1, None, 3, None], [1, None, None, 4], [1, None, None, None], [None, 2, 3, 4], [None, 2, 3, None], [None, 2, None, 4], [None, 2, None, None], [None, None, 3, 4], [None, None, 3, None], [None, None, None, 4], [None, None, None, None]] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-18T00:45:06.637

另一种选择——如果你想炫耀你不使用 itertools 是多么愚蠢：

```
>>> given=[1,2]
>>> gz=zip(given,[None]*len(given))
>>> [(i,j) for i in gz[0] for j in gz[1]]
[(1, 2), (1, None), (None, 2), (None, None)] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-17T21:15:26.300

您可以从一个空列表开始，对于种子中的每个元素，您可以复制所有最终列表并在末尾添加种子。

例如

```
solutions = []
solutions.append([])
for elem in seed:
    newPartials = []
    for partial in solutions:
        newPartial = partial[:]
        newPartial.append(elem)
        newPartials.append(newPartial)
    solutions.extend(newPartials) 
```

或者，您可以创建可能的解决方案的数量`2^n`，其中`n`是种子列表的长度，并使用模运算，删除元素，如下所示：

```
solutions = []
for i in xrange(2**n):
    solutions.append(seed[:])
seedLen = len(seed)
for i in xrange(2**(n-1)): // % 0 case of following loop
    solutions[i].pop(0)
for elemLoc in xrange(1,seedLen):
    for solutionNum in xrange(2**n):
        if solutionNum % elemLoc = 0:
            solutions[solutionNum].pop(elemLoc) 
```

这个解决方案非常低效，我主要包括它，因为它是解决问题的一种有趣方式。

# iphone - NSMutableArray 中的协议类型

> ID：12013036
> 
> 赞同：0
> 
> 时间：2012-08-17T20:53:39.440
> 
> 标签：iphone, objective-c, ios, oop, protocols

我正在尝试将 .NET 中的一些泛型风格的方法引入到我的 iOS 开发中。我正在检索 Example 类型的自定义对象列表。

我已经定义了 Example 类实现的协议：

```
@protocol ExampleProtocol
@property(nonatomic,assign) int Id;
@property(nonatomic,copy)NSString *Description;
@optional
@property(nonatomic,copy)NSString *Icon;
@end 
```

然后我检索我的 NSMutableArray 示例如下：

```
id<ExampleProtocol> anExample = [arrayOfExampleProtocols objectAtIndex:0]; 
```

我遇到的问题是，`anExample`无论 NSMutableArray 的内容如何，​​它总是空的。我的最终目标是能够使用以下语法引用属性：

```
id<ExampleProtocol> anExample = [arrayOfExampleProtocols objectAtIndex:0];
NSString *test = [anExample Description]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T23:38:17.833

Obj-C 中没有泛型。“协议”是一种消息传递机制。请看这篇文章：[Obj-C 中没有泛型](https://stackoverflow.com/questions/848641/are-there-strongly-typed-collections-in-objective-c)

# listbox - listbox1.SelectedIndex（参数超出范围异常）c#/.net

> ID：12013037
> 
> 赞同：0
> 
> 时间：2012-08-17T20:53:39.783
> 
> 标签：listbox, selectedindex, invalid-argument, outofrangeexception

我正在尝试使用列表框浏览网页，我已经添加了三个链接。所有三个链接都加载良好，但是当第三个链接完成加载时，我得到了这个异常。

例外是：

```
InvelidArguement = value of '3' is not valid for 'SelectedIndex'. Parameter name:
 SelectedIndex 
```

警告是：

```
`The result of the exception is always 'true' since a value of type 'int' is
  never equal to 'null' of type 'int?' 
```

这是我的程序图像：

[![](../Images/85e842d4550ee3c147a1395f29236022.png)](https://i.stack.imgur.com/tDvzP.jpg)

这是我的程序代码：

```
 using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Drawing;
    using System.Text;
    using System.Windows.Forms;

    namespace WindowsFormsApplication1
    {
        public partial class Form1 : Form
        {
            public Form1()
            {
        InitializeComponent();
        listBox1.Items.Add("www.google.com");
        listBox1.Items.Add("www.facebook.com");
        listBox1.Items.Add("www.yahoo.com");
        listBox1.SelectedIndex = 0;
        listBox1.DataSource = listBox1.Items;

    }

    private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
    {

    }

    private void button1_Click(object sender, EventArgs e)
    {
        do
        {
        webBrowser1.Navigate(listBox1.SelectedItem.ToString());
        while (webBrowser1.ReadyState != WebBrowserReadyState.Complete)
        {
            Application.DoEvents();
            if(webBrowser1.ReadyState == WebBrowserReadyState.Complete)
            {
                listBox1.SelectedIndex = listBox1.SelectedIndex+1;
            }
        }
        } while (listBox1.SelectedIndex != null);
    }

    private void Form1_Load(object sender, EventArgs e)
    {

    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T21:10:23.107

此处的此声明引起了问题。当所选索引（在您的示例中为 0 - 2）达到 3 时，它将引发异常，因为没有可用的索引 3。

```
listBox1.SelectedIndex = listBox1.SelectedIndex+1; 
```

您的循环也将永远不会结束，因为 SelectedIndex 返回一个永远不会返回 null 的整数。您需要修改代码以检查长度，而不是使用新的索引整数。请记住，计数将始终返回比索引高一个值（计数从 1 开始，索引从 0 开始）。

# c++ - 将对象添加到 boost::graph

> ID：12013044
> 
> 赞同：2
> 
> 时间：2012-08-17T20:54:10.437
> 
> 标签：c++, object, boost, graph, initialization

我正在尝试创建一个我需要使用一些遍历算法遍历的对象图。此时此刻，我一直在尝试使用我的自定义对象创建图表。我试图完成它的方式如下：

```
#include <boost/graph/adjacency_list.hpp>
#include <boost/graph/depth_first_search.hpp>
#include <iostream>

using namespace std;
typedef boost::adjacency_list<boost::vecS,boost::vecS,boost::directedS> CustomGraph;
typedef boost::graph_traits<CustomGraph>::vertex_descriptor CustomVertex;

class CustomVisitor:public boost::default_dfs_visitor
{
        public:
                void discover_vertex(CustomVertex v,const CustomGraph& taskGraph) const
                {
                        cerr<<v<<endl;
                        return;
                }

};

class CustomObject{
        private:
                int currentId;
        public:
                CustomObject(int id){
                        currentId = id;
                }

};

int main()
{
        CustomGraph customGraph;
        CustomObject* obj0 = new CustomObject(0);
        CustomObject* obj1 = new CustomObject(1);
        CustomObject* obj2 = new CustomObject(2);
        CustomObject* obj3 = new CustomObject(3);

        typedef std::pair<CustomObject*,CustomObject*> Edge;
        std::vector<Edge> edgeVec;
        edgeVec.push_back(Edge(obj0,obj1));
        edgeVec.push_back(Edge(obj0,obj2));
        edgeVec.push_back(Edge(obj1,obj2));
        edgeVec.push_back(Edge(obj1,obj3));
        customGraph(edgeVec.begin(),edgeVec.end());
        CustomVisitor vis;
        boost::depth_first_search(customGraph,boost::visitor(vis));

        return 0;
} 
```

但这似乎不是在顶点内创建对象的正确方法。有人可以指导我创建节点的正确方法是什么，以便我可以在遍历图形时检索我的对象。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T08:31:21.503

嗨，我知道这是一个相当古老的问题，但可能还有其他人可以从答案中受益。

好像您忘记定义您的 Graph 将有一个自定义类作为顶点。您必须为您的 typedef 添加第四个参数并为您的边缘添加一个 typedef：

```
typedef boost::adjacency_list<boost::vecS,boost::vecS,boost::directedS, CustomObject> CustomGraph;
typedef boost::graph_traits<CustomGraph>::vertex_descriptor CustomVertex;
typedef boost::graph_traits<CustomGraph>::edge_descriptor CustomEdge; 
```

然后我通常在将节点与边缘连接之前添加节点：

```
// Create graph and custom obj's
CustomGraph customGraph
CustomObject obj0(0);
CustomObject obj1(1);
CustomObject obj2(2);
CustomObject obj3(3);

// Add custom obj's to the graph 
// (Creating boost vertices)
CustomVertex v0 = boost::add_vertex(obj0, customGraph);
CustomVertex v1 = boost::add_vertex(obj1, customGraph);
CustomVertex v2 = boost::add_vertex(obj2, customGraph);
CustomVertex v3 = boost::add_vertex(obj3, customGraph);

// Add edge
CustomEdge edge; 
bool edgeExists;
// check if edge allready exist (only if you don't want parallel edges)
boost::tie(edge, edgeExists) = boost::edge(v0 , v1, customGraph);
if(!edgeExists)
    boost::add_edge(v0 , v1, customGraph);

// write graph to console
cout << "\n-- graphviz output START --" << endl;
boost::write_graphviz(cout, customGraph);
cout << "\n-- graphviz output END --" << endl; 
```

# facebook-graph-api - 非好友的 Facebook 个人资料图片

> ID：12013046
> 
> 赞同：0
> 
> 时间：2012-08-17T20:54:30.127
> 
> 标签：facebook-graph-api, facebook-fql

我正在创建一个 iPhone 电子邮件客户端，它`UITableViewCell`在收件箱的 s 中显示发件人的个人资料图片，就像 Sparrow 所做的那样。我正在使用以下 FQL 查询来获取这些图像：

```
SELECT 
    pic_big 
FROM 
    user 
WHERE 
    uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) 
        AND 
    strpos(lower(name),'INSERT_FIRST_THREE_LETTERS_OF_FIRST_NAME_HERE') >= 0 
        AND 
    strpos(lower(name),'INSERT_LAST_NAME_HERE') >= 0 
ORDER BY name 
```

我从电子邮件标题中获取发件人的姓名，然后使用完整的姓氏和名字的前三个字母来搜索用户的 Facebook 朋友以解释昵称。这总体上效果很好。

然而，Sparrow 能够从 Facebook 为我什至不是朋友的用户获取个人资料图片。这怎么可能？我虽然查询仅限于特定群体，比如你的朋友。并且搜索电子邮件地址无效？这个对吗？Sparrow 是如何获取这些个人资料照片的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T21:15:20.707

好吧，只要您知道用户的 Facebook ID - 这是一个很长的数字，但将其视为字符串。您可以使用此网址获取他们的个人资料图片：

```
https://graph.facebook.com/[id]/picture 
```

不需要任何更复杂的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T02:26:11.197

您可以通过 API 调用从他们的电子邮件中获取任何已知用户的 user_id：

```
 /search?type=user&q=USER@EMAIL.NET 
```

如果他们的电子邮件在 Facebook 上注册并公开，您将返回一个带有他们的姓名和用户 ID 的 JSON 对象。您需要单独拨打电话（或使用批量请求）从他们的 ID 中获取他们的照片。

# css - 如何忽略父元素的溢出：隐藏在css中

> ID：12013066
> 
> 赞同：57
> 
> 时间：2012-08-17T20:55:25.990
> 
> 标签：css, overflow

我有一个 div 元素包装其他 div 元素，如下所示：

```
<div style="overflow:hidden">
    <div id="a"></div>
    <div id="b"></div>
</div> 
```

我还有其他管理外部 div 尺寸的 CSS 规则。在我的实际代码中，我想将 div#a 定位在外部 div 下方 10 px 处。但是，我希望 div#b 仍然被外部 div 的溢出：隐藏。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2014-04-08T04:15:04.633

**方法一**

一个好的方法是将溢出元素设置为`position:fixed`（这将使其忽略父溢出），然后使用以下技术将其相对于父元素定位：

```
​.parent {
   position: relative;      
   .fixed-wrapper {
       position: absolute;         
       .fixed {
           position: fixed;
       }
   }
} 
```

一个警告是，您不能在固定元素上设置任何顶部、右侧、左侧、底部属性（它们必须都是默认的“自动”）。如果您需要稍微调整位置，您可以使用正/负边距来代替。

**方法二**

我最近发现的另一个技巧是保持`overflow:hidden`元素`position:static`并相对于更高的父级（而不是`overflow:hidden`父级）定位覆盖元素。像这样：

[http://jsfiddle.net/kv0bLpw8/](http://jsfiddle.net/kv0bLpw8/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T21:12:20.073

```
#wrapper {
  width: 400px;
  height: 50px;
  position: relative;
  z-index: 1000;
  left: 0px;
  top: 0px;
}

#wrapper #insideDiv {
  width: 400px;
  height: 50px;
  overflow: hidden;
  position: absolute;
  z-index: 2000;
  left: 0px;
  top: 0px;
}

#wrapper #a {
  position: absolute;
  height: 30px;
  width: 100px;
  bottom: -40px;
  z-index: 1000;
  left: 0px;
}
```

```
<div id="wrapper">
  <div id="a">AAA</div>
  <div id="insideDiv">
    <div id="b">BBB</div>
  </div>
</div>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-24T15:41:15.480

正如人们所说，元素必须在父级之外呈现，以免被裁剪。但是您可以使用 JavaScript 来实现类似的概念，而无需更改您的实际标记：

```
function breakOverflow(elm) {
   var top = elm.offset().top;
   var left = elm.offset().left;
   elm.appendTo($('body'));
   elm.css({
      position: 'absolute',
      left: left+'px',
      top: top+'px',
      bottom: 'auto',
      right: 'auto',
      'z-index': 10000
   });
} 
```

然后传递要从其父项的裁剪中排除的元素：

```
breakOverflow($('#exlude-me')); 
```

# c++ - 模板类中的友元运算符声明

> ID：12013069
> 
> 赞同：3
> 
> 时间：2012-08-17T20:55:45.040
> 
> 标签：c++, c++11

我对在模板类中声明的朋友运算符和类的显式实例有一个很好的问题，如下所示：

```
template<class T>
class IneqCmp{
    friend bool operator!=(T a, T b){
        return !(a==b);
    }
};

struct IntCont{
    int x;
    bool operator==(IntCont that) const{
        return x==that.x;
    }
};
template class IneqCmp<IntCont>;
int main(){
    IntCont a{1}, b{2};
    while(a!=b);
} 
```

我认为 operator!=(IntCont, IntCont) 应该在 IneqCmp<IntCont> 的实例化点进行实例化，但事实并非如此。为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T21:01:40.593

上面代码的问题不在于是否定义，而是查找^*`operator!=`永远找不到它。

当你将一个函数声明为一个类的友元时，这个声明很*奇怪*，因为它声明了一个命名空间级别的函数，但它的声明只能通过 ADL 在封闭类型上获得。因为您`operator!=`不接受`IneqComp`这两个参数中的任何一个，所以实际上不可能通过查找找到。

如果您想要做的是提供`operator!=`可用于一组类型的默认实现，您可以用不同的方式解决问题。

首先，您可以`IneqCmp`使用继承添加到 ADL 集中：

```
struct IntCont : IneqCmp<IntCont> {
   // ...
}; 
```

因为 ADL 在参数的类和基类中查找，这将有效地触发内部查找，从而`IneqCmp<IntCont>`找到`friend`声明并因此找到自由函数。

另一种选择是添加一个命名空间，其中`operator!=`将定义泛型（这样就不会在其他情况下找到它）和一个`tag`类型。然后从该标签继承：

```
namespace inequality_comparable {
   struct tag {};
   template <typename T>
   bool operator!=( T const & a, T const & b ) {
      return !(a==b);
   }
}
struct IntCont : inequality_comparable::tag {
};
bool operator==( IntCont const & a, IntCont const & b ) {
   return ...;
}
int main() {
    IntCont a,b;
    std::cout << a != b << "\n";
} 
```

这里的诀窍是，因为`inequality_comparable::tag`它是您类型的基础，所以它会将命名空间添加`inequality_comparable`到查找中。当编译器遇到它时`a != b`，`main`它会尝试使用`operator!=`当前作用域中定义的类、类`IntCont`及其基类以及定义其基类的命名空间`IntCont`。

* * *

^*如果要验证算子是否真的生成了，尝试添加：

```
bool operator!=(IntCont a, IntCont b){
    return !(a==b);
} 
```

如果由于 then 的实例化而定义了运算符`IneqCmp`，则会触发编译器错误。或者，您可以编译并检查生成的符号目标文件。

# c# - 尝试使用 OLEDB 将数据插入 Excel 文件

> ID：12013071
> 
> 赞同：0
> 
> 时间：2012-08-17T20:55:50.193
> 
> 标签：c#, excel, insert, oledb

我想要一个 C# 表单中的按钮能够将数据插入 Excel 表。

这就是我所做的：

```
try
        {
            System.Data.OleDb.OleDbConnection MyConnection;
            System.Data.OleDb.OleDbCommand myCommand = new System.Data.OleDb.OleDbCommand();
            string sql = null;
            MyConnection = new System.Data.OleDb.OleDbConnection("provider=Microsoft.Jet.OLEDB.4.0;Data Source='C:\\Users\\Miko\\Documents\\WeightWatchers - Copy\\TrackingLoss.xlsx';Extended Properties=Excel 8.0;");
            MyConnection.Open();
            myCommand.Connection = MyConnection;
            sql = "Insert into [Sheet1] (Date,Loss) values(y,x)";
            myCommand.CommandText = sql;
            myCommand.ExecuteNonQuery();
            MyConnection.Close();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
        } 
```

当我尝试它时，[这个](http://social.msdn.microsoft.com/Forums/getfile/153707)窗口是打开的。

有人知道为什么以及该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T20:57:58.330

> `Extended Properties=Excel 8.0`

这意味着 Excel 97 ( `.xls`) 文件，而不是`.xlsx`.

你需要使用`Provider=Microsoft.ACE.OLEDB.12.0; Extended Properties=Excel 12.0 Xml`

# sql - 有效地从日期时间中提取时间（作为十进制或日期时间）

> ID：12013073
> 
> 赞同：0
> 
> 时间：2012-08-17T20:56:08.850
> 
> 标签：sql, datetime, sql-server-2000

我已经能够找到很多信息，用于从像[这样](https://stackoverflow.com/a/7710495/1062992)的 datetime 列中获取时间的字符串表示形式。

我需要以一种可以对其进行数学运算的方式从日期时间中取出时间部分，例如将其添加到另一个日期时间中。所以时间的字符串表示不会帮助我。

但是，我只找到了一个将时间提取为数字类型值的[示例。](http://arjunachith.blogspot.com/2008/01/getting-time-part-only-from-sql.html)IE：

```
SELECT CAST(GETDATE() AS FLOAT) - FLOOR(CAST(GETDATE() AS FLOAT)) 
```

这种方法需要*两次*强制转换，但我必须在超过 10,000 行上运行它。有什么类似于`dateadd`从日期时间列中提取日期部分的方法，即：

```
select DATEADD(dd, DATEDIFF(dd, 0, getdate()), 0) 
```

我可以用来从日期时间列中获取时间并将其作为小数或日期时间返回？也许是使用较少铸造的解决方案？

我正在使用 SQL Server 2000。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T21:01:42.463

您可以以秒为单位获取时间的一种方法是：

```
select cast(datediff(second, DATEADD(dd, DATEDIFF(dd, 0, getdate()), 0), getdate())/(60*60*24.0) as datetime) 
```

这以秒为单位计算时间，然后转换回日期时间。

以小数形式获取：

```
select datediff(second, DATEADD(dd, DATEDIFF(dd, 0, getdate()), 0), getdate())/(60*60*24.0) 
```

如果您更喜欢毫秒精度，或者使用“ms”。

或者，您可以使用更具可读性：

```
select datepart(hh, getdate())/24.0+datepart(mm, getdate())/(24*60.0)+
       datepart(ss, getdate())/(24*60*60.0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T21:07:59.243

得到一个`datetime`：

```
SELECT GetDate() - DateDiff(day, 0, GetDate());
-- returns the time with zero as the datetime part (1900-01-01). 
```

并获得一个代表时间的数字：

```
SELECT DateDiff(millisecond, DateDiff(day, 0, GetDate()), GetDate());
-- time since midnight in milliseconds, use as you wish 
```

如果你真的想要一个字符串，那么：

```
SELECT Convert(varchar(8), GetDate(), 108); -- 'hh:mm:ss'
SELECT Convert(varchar(12), GetDate(), 114); -- 'hh:mm:ss.nnn' where nnn is milliseconds 
```

# php - 使用控制器魔术方法 __call 的 Codeigniter 路由行为

> ID：12013081
> 
> 赞同：2
> 
> 时间：2012-08-17T20:56:50.537
> 
> 标签：php, codeigniter, url, routing, magic-methods

URI 中的段通常遵循 Codeigniter 中的这种模式：

XYZ.com/Class/Method/param1/param2

当在控制器中定义被调用的方法时，这可以按预期工作，但是如果我为 URI 提供一些未定义的方法来调用处理任何未定义方法的 __call 魔术方法，则没有任何作用。

__call 仅在从控制器本身调用时才被调用，而不是当我从 URI 调用某些未定义的方法时

有什么解释吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T21:00:24.950

在 CodeIgniter 中，有[`_remap`](http://codeigniter.com/user_guide/general/controllers.html#remapping). 所以如果你去

> XYZ.com/Class/UndefinedMethod/param1/param2

then`_remap`将被调用（实际上`_remap`总是会被调用，因此我们需要确保正确调用确实存在的方法）。

```
function _remap($method, $params=array()){
    $funcs = get_class_methods($this);
    if(in_array($method, $funcs)){ // We are trying to go to a method in this class
        return call_user_func_array(array($this, $method), $params);
    }
    // else do something else
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T21:01:54.647

查看服务器（Apache？）日志文件。毫无疑问，您会看到导致处理中止的 PHP 错误。除非您通过将未定义的函数重新映射到错误页面来覆盖它们，否则随机 URL 将导致“什么都没有”发生。

# android - 使用 AsyncTask 扫描端口

> ID：12013082
> 
> 赞同：0
> 
> 时间：2012-08-17T20:56:51.813
> 
> 标签：android, android-asynctask

是否可以一次扫描多个端口`AsyncTask`？我对 完全陌生`AsyncTask`，所以我不知道我在做什么。即使在阅读了互联网上所有关于`AsyncTask`（例如 Vogella 等）的教程后，我仍然无法理解如何做到这一点。

这是我目前拥有的代码：

```
public class MainActivity extends Activity {

    EditText et;
    Button b;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        et = (EditText) findViewById(R.id.editText1);
        b = (Button) findViewById(R.id.button1);
    }

    public void start(View view){
        GetPorts task = new GetPorts();
        task.execute(20,53,80,114,140);
    }

    private class GetPorts extends AsyncTask<Integer, Void, Vector<Integer>> {

        Vector<Integer> openPorts = new Vector<Integer>();

        @Override
        protected Vector<Integer> doInBackground(Integer... ports) {

            for(Integer port: ports){

                try {
                    Socket socket = new Socket();
                    socket.connect(new InetSocketAddress("localhost", port), 500);
                    socket.close();
                    openPorts.add(port);
                } catch (Exception ex) {

                }
            }
            return openPorts;
        }
    }
} 
```

端口 20、53、80 等是我要检查的示例端口（最多可能有 65535 个端口）。我认为检查端口并将它们添加到`Vector`然后返回这`Vector`是一个好主意，但我不知道该怎么做。我想知道我的`Vector`“openPorts”是否会在每个要扫描的新端口时重置，这`AsyncTask`是否能够同时扫描多个端口？

我已经使用 Java SE 创建了有效的解决方案，我将把它粘贴在这里以澄清我所追求的。

Java SE 代码：

```
public class Scanner {

    private final String ip;
    private final int sPort, ePort, timeout, poolSize;
    private Vector<Integer> openPorts = new Vector<Integer>();
    private final ExecutorService es;
    private Collection<Future<?>> futures = new LinkedList<Future<?>>();

    public Scanner(String ip, int sPort, int ePort, int timeout, int poolSize) {
        this.ip = ip;
        this.sPort = sPort;
        this.ePort = ePort;
        this.timeout = timeout;
        this.poolSize = poolSize;
        es = Executors.newFixedThreadPool(this.poolSize);

    }

    public Vector<Integer> getPorts() {
        Collections.sort(openPorts);
        return openPorts;
    }

    public void runScanner() {

        for (int startPort = sPort; startPort <= ePort; startPort++) {
            futures.add(es.submit(new Check(ip, startPort, timeout)));
        }

        es.shutdown();

    }

    public void stopScanner(){
        for (Future<?> future : futures) {
            future.cancel(true);
        }
    }

    private class Check implements Runnable {

        private String ip;
        private int port, timeout;

        private Check(String ip, int port, int timeout) {
            this.ip = ip;
            this.port = port;
            this.timeout = timeout;
        }

        public void run() {
            try {
                Socket socket = new Socket();
                socket.connect(new InetSocketAddress(ip, port), timeout);
                socket.close();
                openPorts.add(port);
            } catch (Exception ex) {

            }
        }
    }                                      
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T21:15:17.800

只有当您实例化一个新`GetPorts`类时（像往常一样），您的向量才会被重置。你的代码看起来很好。如果您的问题是检索 的结果`AsyncTask`，您有两种主要方法来实现它。

你可以打电话`Vector<Integer> v = new GetPorts().execute(20,53,80,114,140).get();`，但这通常不是正确的方式。

或者您可以在执行`AsyncTask`后回调中实现回调。

```
@Override
protected void onPostExecute(Vector<Integer> result) {
} 
```

你`AsyncTask`应该是这样的：

```
 private class GetPorts extends AsyncTask<Integer, Void, Vector<Integer>> {

    public interface MyCallbackInterface {
    public void myCallback(Vector<Integer> ports);
    }

    MyCallbackInterface listener;
    Vector<Integer> openPorts = new Vector<Integer>();

    public GetPorts(MyCallbackInterface listener) {
        this.listener = listener;
    }

    @Override
    protected Vector<Integer> doInBackground(Integer... ports) {

        for(Integer port: ports){

            try {
                Socket socket = new Socket();
                socket.connect(new InetSocketAddress("localhost", port), 500);
                socket.close();
                openPorts.add(port);
            } catch (Exception ex) {

            }
        }
        return openPorts;
    }

    @Override
    protected void onPostExecute(Vector<Integer> result) {
         listener.myCallback(result);
    }
} 
```

然后在实现的任务调用者中`MyCallbackInterface`，您可以执行以下操作：

`new GetPorts(this).execute(20,53,80,114,140);`

做你想做的事：

```
 @Override
 public void myCallback(Vector<Integer> ports) {
 } 
```

# c# - 你什么时候会使用嵌套锁定？

> ID：12013089
> 
> 赞同：18
> 
> 时间：2012-08-17T20:57:16.247
> 
> 标签：c#, .net, multithreading

我正在阅读 Albahari 关于线程的优秀电子书，遇到了以下场景，他提到“线程可以以嵌套（可重入）方式重复锁定同一个对象”

```
lock (locker)
  lock (locker)
    lock (locker)
    {
       // Do something...
    } 
```

也

```
static readonly object _locker = new object();

static void Main()
{
  lock (_locker)
  {
     AnotherMethod();
     // We still have the lock - because locks are reentrant.
  }
}

static void AnotherMethod()
{
  lock (_locker) { Console.WriteLine ("Another method"); }
} 
```

根据解释，任何线程都会在第一个（最外层）锁上阻塞，并且只有在外层锁退出后才会解锁。

他说“当一种方法在锁中调用另一种方法时，嵌套锁定很有用”

为什么这很有用？你什么时候需要这样做，它解决了什么问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-17T20:59:53.307

假设您有两个公共方法`A()`和`B()`，它们都需要相同的锁。

此外，假设`A()`调用`B()`

由于客户端也可以`B()`直接调用，所以需要锁定这两个方法。
因此，当`A()`被调用时，`B()`会第二次取锁。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-17T22:57:24.163

这样做并不是很有用，而是被允许这样做很有用。考虑一下您可能经常拥有调用其他公共方法的公共方法。如果公共方法调用锁，并且调用它的公共方法需要锁定它所做的更广泛的范围，那么能够使用递归锁意味着您可以这样做。

在某些情况下，您可能想使用两个锁对象，但您将一起使用它们，因此如果您犯了错误，就会有很大的死锁风险。如果您可以处理赋予锁的更广泛的范围，那么在两种情况下使用相同的对象 - 并在使用这两种对象的情况下递归 - 将消除那些特定的死锁。

**然而...**

这种有用性是值得商榷的。

在第一种情况下，我将引用[Joe Duffy](http://joeduffyblog.com/2006/10/26/concurrency-and-the-impact-on-reusable-libraries/)的话：

> 递归通常表示同步设计中的过度简化，这通常会导致代码可靠性降低。一些设计使用锁递归来避免将函数拆分为那些需要锁的函数和那些假设锁已经被占用的函数。诚然，这可以减少代码大小，从而缩短编写时间，但最终会导致设计更加脆弱。将代码分解到采用非递归锁的公共入口点中总是一个更好的主意，并且持有断言锁的内部工作函数。递归锁调用是导致原始性能开销的冗余工作。但更糟糕的是，依赖递归会使理解程序的同步行为变得更加困难，特别是在不变量应该保持的边界上。通常我们想说，获取锁后的第一行代表一个对象的不变“安全点”，但是一旦引入递归，就不能再自信地做出这个陈述。这反过来又使得在动态组合时确保正确和可靠的行为变得更加困难。

（Joe 在他的博客和[他的关于并发编程的书中](http://amzn.to/N9BOCh)有更多关于这个主题的内容）。

第二种情况与递归锁条目只会导致不同类型的死锁发生的情况相平衡，或者将争用率推高到可能出现死锁的情况（[这个人](http://www.fieryrobot.com/blog/2008/10/14/recursive-locks-will-kill-you/)说他更喜欢它只是为了遇到死锁您第一次递归时，我不同意-我更希望它只是抛出一个大异常，使我的应用程序因良好的堆栈跟踪而崩溃）。

最糟糕的事情之一是它在错误的时间进行了简化：当您编写代码时，使用锁递归可能比将事情更多地拆分并更深入地思考什么时候应该锁定更简单。但是，当您调试代码时，离开锁并不意味着离开该锁这一事实会使事情复杂化。多么糟糕的方法 - 当我们认为我们知道我们在做什么时，复杂的代码是一种诱惑，可以在你的下班时间享受，所以你不要在上班时沉迷，当我们意识到我们搞砸了我们最希望事情变得美好而简单。

[您真的不想将它们与条件变量混合。](http://www.bluebytesoftware.com/blog/2007/09/12/ConditionVariablesAndLockRecursion.aspx)

嘿，POSIX-threads[只因敢于拥有它们！](http://groups.google.com/group/comp.programming.threads/msg/d835f2f6ef8aed99?hl=en)

至少关键字意味着我们避免了每个s 都`lock`没有匹配 s 的可能性，这使得一些风险不太可能发生。直到您需要在该模型之外做一些事情。`Monitor.Exit()``Monitor.Enter()`

使用更新的锁定类，.NET 帮助人们避免使用锁递归，而不会阻止那些使用旧编码模式的人。`ReaderWriterLockSlim`有一个构造函数重载，可以让你使用它递归，但默认是`LockRecursionPolicy.NoRecursion`.

Often in dealing with issues of concurrency we have to make a decision between a more fraught technique that could potentially give us better concurrency but which requires much more care to be sure of correctness vs a simpler technique that could potentially give worse concurrency but where it is easier to be sure of the correctness. Using locks recursively gives us a technique where we will hold locks longer and have less good concurrency, and also be less sure of correctness and have harder debugging.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T21:00:56.073

如果您有一个想要独占控制的资源，但许多方法都对该资源起作用。一个方法可能无法假定它已被锁定，因此它将锁定它在它的方法中。如果它被锁定在外部方法和内部方法中，那么它提供了类似于书中示例的情况。我看不到我想在同一个代码块中锁定两次的时间。

# delphi - TeeChart 库不为 Windows Embedded 7 呈现

> ID：12013090
> 
> 赞同：1
> 
> 时间：2012-08-17T20:57:24.460
> 
> 标签：delphi, teechart, windows-embedded

我有一个用 Delphi 编译的应用程序和 TeeChart 库的链接。它在 Windows 7 的桌面版本上绘制得很好，但在嵌入式 Windows 7 标准版上根本不绘制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:47:58.883

# playframework - 在 Play 2.0+ 中加载初始数据

> ID：12013099
> 
> 赞同：6
> 
> 时间：2012-08-17T20:58:12.533
> 
> 标签：playframework, playframework-2.0

我正在创建一个 Play 框架应用程序，我需要加载一些数据。该框架（我在 1.2.4 时已经使用它做了一些工作，现在我一直在尝试 2.0.3）用于支持文件的创建，该`data.yaml`文件可以在运行时加载。

对此的支持似乎已被放弃。现在进行此操作的最佳做​​法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T21:28:22.113

不，它没有被丢弃，只是被重构了。主要权重被移至[Global 对象](http://www.playframework.org/documentation/2.0.2/JavaGlobal)及其`onStart()`方法。

使用它，您还可以执行常见的数据库操作，还可以加载和遍历**任何** `YAML`文件。查看[Zentasks 示例](https://github.com/playframework/Play20/tree/master/samples/java/zentasks)，了解如何在您自己的应用程序中使用它（尤其是：`app/Global.java`、、`conf/initial-data.yml`）；例如，从[示例中](https://github.com/playframework/Play20/blob/master/samples/java/zentasks/app/Global.java)：

```
Map<String,List<Object>> all = (Map<String,List<Object>>)Yaml.load("initial-data.yml"); 
```

这才刚刚开始！使用`Global object`只取决于你的想象！

# java - 使用 JNDI 从远程客户端调用 EJB：无效用户

> ID：12013103
> 
> 赞同：0
> 
> 时间：2012-08-17T20:58:48.533
> 
> 标签：java, ejb-3.0, jndi, jboss7.x

我正在尝试使用 JBOSS 7.1.1 中的 JNDI 从远程客户端调用，但出现异常：

> 线程“主”javax.ejb.EJBAccessException 中的异常：JBAS013323：org.jboss.as.ejb3.security.SecurityContextInterceptor 的无效用户 $1.run(SecurityContextInterceptor.java:54) at org.jboss.as.ejb3.security.SecurityContextInterceptor $1.run(SecurityContextInterceptor.java:45) at java.security.AccessController.doPrivileged(Native Method) at org.jboss.as.ejb3.security.SecurityContextInterceptor.processInvocation(SecurityContextInterceptor.java:74) at org.jboss.invocation。 InterceptorContext.proceed(InterceptorContext.java:288) at org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:59) at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)在 org.jboss.as.ee.component.NamespaceContextInterceptor。processInvocation(NamespaceContextInterceptor.java:50) at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) at org.jboss.as.ejb3.component.interceptors.AdditionalSetupInterceptor.processInvocation(AdditionalSetupInterceptor.java:43) at org .jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) at org.jboss.as.ee.component.TCCLInterceptor.processInvocation(TCCLInterceptor.java:45) at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java :288) 在 org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:165) 在 org.jboss.as 的 org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)。 ejb3.remote.protocol.versionone.MethodInvocationMessageHandler.invokeMethod(MethodInvocationMessageHandler.java:302）在org.jboss.as.ejb3.remote.protocol.versionone.MethodInvocationMessageHandler.access$200（MethodInvocationMessageHandler.java:64）在org.jboss.as.ejb3.remote.protocol.versionone.MethodInvocationMessageHandler$1.run（MethodInvocationMessageHandler. java:196) 在 java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441) 在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303) 在 java.util.concurrent.FutureTask .run(FutureTask.java:138) 在 java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java. lang.Thread.run(Thread.java:662) at org.jboss.threads.JBossThread.run(JBossThread.java:122) at ...异步调用...(Unknown Source) at org.jboss.ejb.client.remoting.InvocationExceptionResponseHandler$MethodInvocationExceptionResultProducer.getResult(InvocationExceptionResponseHandler.java:99) 在 org.jboss.ejb.client.EJBClientInvocationContext.getResult(EJBClientInvocationContext.java:270) 在 org.jboss.ejb.client.TransactionInterceptor。 handleInvocationResult(TransactionInterceptor.java:47) at org.jboss.ejb.client.EJBClientInvocationContext.getResult(EJBClientInvocationContext.java:272) at org.jboss.ejb.client.ReceiverInterceptor.handleInvocationResult(ReceiverInterceptor.java:132) at org.jboss .ejb.client.EJBClientInvocationContext.getResult(EJBClientInvocationContext.java:260) 在 org.jboss.ejb.client.EJBClientInvocationContext.awaitResponse(EJBClientInvocationContext.java:399) 在 org.jboss.ejb.client.EJBInvocationHandler。doInvoke(EJBInvocationHandler.java:140) 在 org.jboss.ejb.client.EJBInvocationHandler.doInvoke(EJBInvocationHandler.java:121) 在 org.jboss.ejb.client.EJBInvocationHandler.invoke(EJBInvocationHandler.java:104) 在 $Proxy0。 informarDados(Unknown Source) at br.com.ciss.client.service.informacao.InformacaoServiceImpl.informarDados(InformacaoServiceImpl.java:224) at br.com.ciss.client.agente.EnviaInformacaoMaquina.enviarInformacao(EnviaInformacaoMaquina.java:29) br.com.ciss.client.agente.EnviaInformacaoMaquina.main(EnviaInformacaoMaquina.java:49) 1325 [Thread-1] 调试 org.jboss.ejb.client.remoting.AutoConnectionCloser - 关闭远程连接 <1bde4> 1329 [远程“配置-based-ejb-client-endpoint" task-2] 信息 org.jboss.ejb.client.remoting。ChannelAssociation - 远程连接 007bc899 到 localhost/127.0.0.1:4447 的通道通道 ID ec18d75d（出站）不能再处理消息 1426 [Thread-1] 调试 org.jboss.ejb.client.remoting.RemotingConnectionEJBReceiver - 关闭 channelChannel ID ec18d75d（ outbound) 的远程连接 007bc899 到 localhost/127.0.0.1:4447 1427 [Thread-1] DEBUG org.jboss.ejb.client.remoting.ChannelAssociation - 关闭远程连接 007bc899 到 localhost/127.0 的通道通道 ID ec18d75d（出站）。 0.1:4447 1428 [Thread-1] 调试 org.jboss.ejb.client.remoting.ChannelAssociation - 为损坏的通道通道 ID ec18d75d（出站）注册重新连接处理程序 org.jboss.ejb.client.remoting.EJBClientContextConnectionReconnectHandler@a2220f远程连接 007bc899 到 EJB 客户端上下文 org.jboss 中的 localhost/127.0.0.1:4447。ejb.client.EJBClientContext@c8376b 1433 [Thread-1] 调试 org.jboss.ejb.client.remoting.AutoConnectionCloser - 关闭端点“config-based-ejb-client-endpoint”<1ecfe07>

我正在使用 jboss 的安全机制，并且我已经通过 add-user.bat 添加了用户，还有带有用户名和密码的文件 jboss-ejb-client.properties 并且仍然得到异常。我遵循了链接的示例集：[EJB invocations from a remote client using JNDI](https://docs.jboss.org/author/display/AS71/EJB+invocations+from+a+remote+client+using+JNDI)，当我不使用安全机制时同样有效，但是当我使用安全机制时会发生错误

你缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T11:26:01.710

我认为这样的事情[会](https://community.jboss.org/wiki/JndiLoginInitialContextFactory)帮助你。在进行查找之前使用它，以便您登录到 jboss

# node.js - node.js 如何访问已经需要的对象

> ID：12013106
> 
> 赞同：2
> 
> 时间：2012-08-17T20:59:08.790
> 
> 标签：node.js, caching, require

假设我运行了以下代码：

```
var toType = function(obj){
    return ({}).toString.call(obj).match(/\s([a-zA-Z]+)/)[1].toLowerCase();
};
var someModule = require("./path/to/name");
console.log(toType(require.cache["./path/to/name"]));
someModule(); 
```

在位置 ./path/to/name.js 我有以下代码：

```
module.exports = function (){
    console.log("Hell World!");
}; 
```

这两个片段没有运行，所以我想我在这里遗漏了一些东西。输出如下：

```
node: no process found
undefined
Hell World!
[Finished in 0.1s] 
```

*   如何`require("./path/to/name");`映射到`require.cache;`？
*   如何检索模块、删除它并检查它的类型？

带有代码的答案将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T21:51:47.433

至少在节点 0.8.2 上对非系统导出运行以下命令：

```
var http = require ('http');
var util = require ('util');
var b = require('./b');

util.inspect(require.cache);

var loaded = require.cache; 
```

注意 require.cache 是正确的；require.cache() 不是（它是一个属性；0.8.2 不会编译它。）为此我看到：

```
{ '/home/user/node/a.js':
   { id: '.',
     exports: {},
     parent: null,
     filename: '/home/user/node/a.js',
     loaded: false,
     children: [ [Object] ],
     paths:
      [ '/home/user/node/node_modules',
        '/home/user/node_modules',
        '/home/node_modules',
        '/node_modules' ] },
  '/home/user/node/b.js':
   { id: '/home/user/node/b.js',
     exports: [Function],
     parent:
      { id: '.',
        exports: {},
        parent: null,
        filename: '/home/user/node/a.js',
        loaded: false,
        children: [Object],
        paths: [Object] },
     filename: '/home/user/node/b.js',
     loaded: true,
     children: [],
     paths:
      [ '/home/user/node/node_modules',
        '/home/user/node_modules',
        '/home/node_modules',
        '/node_modules' ] } } 
```

我不确定为什么像'http'这样的模块没有出现......

# javascript - 为什么我的函数不遵循我的 if/else 条件？

> ID：12013109
> 
> 赞同：0
> 
> 时间：2012-08-17T20:59:25.637
> 
> 标签：javascript, conditional-statements

这是小提琴：http: [//jsfiddle.net/K5dsh/](http://jsfiddle.net/K5dsh/)

我正在尝试制作一个简单的计算器来评估其给出的数字之间的差异，并据此给出答案。它有两个问题：

1.) 我的脚本给出的答案始终是我的第二条`else if`语句的结果，即使输入与之前的条件匹配。

2.) 即使有一个应该给出不同结果的新输入，答案也不会改变。

有谁看到问题是什么？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T21:04:04.390

正如 Ivan 指出的那样，您永远不会更新 , 的值`high`，`low`并且`common`将值输入到文本框中。您应该在`calculate`函数内部分配值。[请参阅更新的小提琴](http://jsfiddle.net/K5dsh/4/)。

此外，您可能需要花一些时间来学习像[Knockout.js](http://knockoutjs.com/)这样的框架。它使将 HTML 表单元素数据绑定到 JavaScript 视图模型变得异常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T21:05:59.213

您的变量只定义一次。您应该更改它，以便每次单击按钮时，它都会获取新变量。这是一个例子：http: [//jsfiddle.net/Vd8n4/](http://jsfiddle.net/Vd8n4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T21:07:21.530

你的价值观没有被更新。

这就是我将如何去做。我会改变你的功能，让它像这样开始。这样，每次调用它时，它都会更新高、低和常用值。

```
function calculate() {
    var high = document.getElementById('highRi').value;
    var low =  document.getElementById('lowRi').value;
    var common =  document.getElementById('comm').value; 
```

# jquery - 如何将悬停分配给 2 个元素

> ID：12013110
> 
> 赞同：1
> 
> 时间：2012-08-17T20:59:30.897
> 
> 标签：jquery

我正在尝试同时将悬停事件分配给 2 个元素。有没有更好的方法来做到这一点？

```
//I want to assign hover to another element.

$element1=$('hi');
$element2=$('hi2');

//I need to assign element 1 and element 2 to the same hover function... 
   $element1.hover(function(e){

       codes......

   }) 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T21:00:43.153

试试这个，

**[现场演示](http://jsfiddle.net/dPQuB/5/)**

```
$element1.add($element2).hover(function(e){

   codes......

 }); 
```

或者

```
$('hi, hi2').hover(function(e){

   codes......

 }); 
```

或者如果你想通过 ids 而不是 hi

```
 $('#hi, #hi2')hover(function(e){

   codes......

 }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T21:01:59.080

如果 hi 和 hi2 是实际元素，则：

```
$('hi,hi2').hover(... 
```

我的意思是实际元素

```
$('div,p').hover(... 
```

会起作用，但是根据您的示例，我无法分辨是什么`hi`，`hi2`因为它们不是元素、类、ID 或其他可识别的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T21:03:11.107

因此，假设这些是您要将悬停绑定到的元素：

```
<div class="yay-for-hover">a</div>
<div class="yay-for-hover">b</div>
<div class="yay-for-hover">c</div> 
```

你可以在你的 jQuery 中绑定这个选择器：

```
$('.yay-for-hover').hover(function() {
    // Do stuff here.
}); 
```

我只是选择了类选择器，因为对我来说，它们在这里最有意义。如果您希望页面上的元素触发悬停事件，只需将类添加到它。查看[关于选择器的 jQuery 参考以](http://api.jquery.com/category/selectors/)获得更多帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T21:08:19.363

您可以使用[.add()](http://api.jquery.com/add/)方法，它从这些元素的并集和传递给方法的元素构造一个新的 jQuery 对象，这意味着您可以将新的元素集存储在变量中或直接使用它，就像这样：

```
var $element1=$('hi'),
    $element2=$('hi2');

$element1.add($element2).hover(function(e){

   codes......

}); 
```

# html - 为什么这个元素会移动？

> ID：12013111
> 
> 赞同：0
> 
> 时间：2012-08-17T20:59:32.417
> 
> 标签：html, css

我的网站上有一个报名表，点击提交后，它会在 google chrome 中移动，但不会在 firefox 或 ie 中移动。有没有办法让它在铬中也静止不动？我尝试了很多不同的事情，以至于我忘记了以前尝试过的所有事情。

网址是[http://www.readysetpixel.net/contest.html](http://www.readysetpixel.net/contest.html)

如果您无法复制该问题，请告诉我。

更新：

卸载 chrome - 删除历史记录并使用 ccleaner 修复 reg - 重新安装 chrome

仍然有同样的问题 --- 当点击提交时，所有内容向上滑动 20px

固定：在 FORM 本身上设置一个高度，不再向上滑动整个东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T21:44:22.950

onClick 在提交按钮的左上方会出现一个加载图标。这会导致其上方的其余内容向上移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T21:04:13.310

您有自动高度，也许您应该尝试强制固定高度。

```
.content {
width: 800px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T21:31:51.587

固定：在 FORM 本身上设置一个高度，不再向上滑动整个东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T22:03:22.360

我设置了一个断点并单步执行了您的 .submit() 处理程序，看起来这一行导致了跳转：

```
$('#load').append('<center><img src="images/ajax-loader.gif" alt="Currently Loading" id="loading" /></center>').delay('500'); 
```

# php - php新手：需要了解密码保护文件夹/文件

> ID：12013118
> 
> 赞同：0
> 
> 时间：2012-08-17T21:00:27.087
> 
> 标签：php, password-protection

嗨，我对 php 完全陌生（我对它一无所知），但我是一名中高级程序员，需要密码保护服务器上的文件夹或其他单个文件，以便成员访问我运行的非营利组织. 我的服务器提供商刚刚为我在他的服务器上安装了 php（他没有 Apache），但告诉我我必须完成所有的编程工作，因为他不熟悉它。

1）请为我推荐任何好的资源，以获取示例脚本和有关如何实施的指导

2) 或者请提供关于必须采取哪些措施来保护我的服务器上的文件夹或文件的分步“指南”。我希望有一个弹出窗口或其他方式让有限数量的成员输入他们选择的用户名和密码。大多数文件将是一个网页，但有些可能是可下载的 pdf。

我在这里找到的所有东西都是一小段代码，这并不能解释 php 进程的主要内容。

抱歉，如果我的问题对某些信息或信息不足感到困惑。谢谢你的意见。

请理解，我不是服务器所有者，我只是在此服务器空间上拥有我的网站并通过 FTP 访问它的个人。我认为那个人说它是基于微软的，如果这有意义吗？他为我添加了 php，因为我认为这可能会有所帮助，因为他没有 Apache，这将是我所读到的理想选择。我认为这个人不想在成员加入或离开时为添加/删除用户及其密码而烦恼。这个想法是让我拥有那种控制力和能力。

如果除了 php 还有其他方法吗？

@jerrygarciuh 的建议似乎比我能够实施的要复杂得多！;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T21:27:39.587

您可以用来保护文件的一种方法是

1) 将文件存储在文档根目录之上，因此无法直接进行 http 访问

2) 验证您的用户并将他们的状态或访问级别存储在他们的浏览器会话中

3) 使用数据库存储文件名和位置

4) 链接到一个 PHP 脚本，该脚本获取文件的数据库 id 并查找位置，然后将文件传递给批准的用户，而不会透露存储的位置或确实存储的文件的名称。

这是一个小代码片段，显示了以这种方式传递的文件：

```
if ($bd->file) {    
    $file = "$bd->barge/$bd->file";
    if (file_exists($file)) {
        $namePartArray = preg_split('/\./', $bd->file);
        $lastIndex = count($namePartArray) - 1;
        $extension = strtolower($namePartArray[$lastIndex]);
        header('Content-type: application/$extension');
        header('Content-Disposition: attachment; filename="'.$bd->file.'"');
        header('Content-Length: ' . filesize($file));
        readfile($file);
    } else { // if file
        echo "File not found.";
        exit;
    }
} // if file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T21:11:45.820

存在的问题是您不能在加载 pdf 之前直接使用 PHP 脚本检查会话或任何内容。

快速说明是永远不要依赖默默无闻。因此，像将文件放入数据库并随机更改它们这样的答案并不是一个好主意。

您需要阻止他们进入页面，这意味着唯一可行的方法是通过配置文件，如 web.config （如果是 IIS）或将文件放在文档 root 上方。但是，我们确实需要更多关于这方面的信息。

# java - 在jsp中插入多个空格

> ID：12013119
> 
> 赞同：5
> 
> 时间：2012-08-17T21:00:30.967
> 
> 标签：java, html, jsp, jakarta-ee

我正在尝试在 jsp 中的两个单词之间插入多个空格。

有没有办法在不使用`&emsp;&emsp;`多次的情况下插入空格？

请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T21:02:42.497

简而言之，没有。

HTML 定义多个空格的序列与单个空格具有相同的意义。还有不间断的空格，由字符 entity 表示`&nbsp;`。请注意，使用空格不是实现布局和对齐的好方法（如果这是您的实际目标）。

[http://www.w3.org/TR/html401/struct/text.html](http://www.w3.org/TR/html401/struct/text.html)

> 对于除 PRE 之外的所有 HTML 元素，空格**序列**分隔“单词”

*（强调我的）*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T21:05:58.907

将其包含在`<pre>`标签中。例子：

```
out.println("<pre>This text has   multiple      spaces </pre>"); 
```

当您需要不寻常的格式时，您可以使用它。查看[此处](http://www.w3schools.com/tags/tag_pre.asp)的链接以获取有关标签的更多详细信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T21:07:23.553

通常认为在 HTML 中粘贴大量 nbsp 并不明智，因为间距是格式问题，而不是 HTML 或数据本身的语义组件。

相反，我通常尝试使用 CSS 来格式化这样的东西：

```
.spacey { word-spacing: 20px; }

<p class="spacey">This is some text with 20 pixels between each word.</p> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T21:13:39.743

在您选择的 JSP 中，在底部执行以下操作

```
<%!
public String getSpaces(int numSpaces)
{
  StringBuffer buffer = new StringBuffer(numSpaces);
  for(int i = 0; i < numSpaces; i++)
    buffer.append(" ");
  return buffer.toString();
}
%> 
```

然后你想要空间

```
This will have lot of spaces <%= getSpaces(10)%> here 
```

# .net - 打印枚举时出现 ToString 异常

> ID：12013126
> 
> 赞同：6
> 
> 时间：2012-08-17T21:01:20.733
> 
> 标签：.net, f#

鉴于我有一个枚举：

```
type Cool = A = 'a'
          | B = 'b' 
```

我试着像这样打印它

```
printf "%A" Cool.A 
```

我得到以下异常：

> ToString 异常：传入的值必须是枚举基类或枚举的基础类型，例如 Int32。参数名称：值

为什么会发生这种情况以及（如果可能）我如何在枚举级别解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T22:26:48.437

我可以在具有针对 .Net 4.0 的 F# 2.0 编译器的机器上重现此操作，但不能在针对 .Net 3.5 或更低版本的 F# 2 或在 VS2012 (F# 3.0) 机器上（其中 .Net 4.5 取代 4.0）。

我现在不确定原因，但希望此信息可以帮助您或其他人缩小范围或找到解决方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T12:04:22.760

我认为最好不要`char`用作`enum`.
虽然`char`似乎是允许的（[关于 F# 枚举的 MSDN 文章](http://msdn.microsoft.com/en-us/library/dd233216%28v=vs.100%29.aspx)），但 C# 的相应[文章](http://msdn.microsoft.com/en-us/library/sbbt4032%28v=vs.100%29.aspx)却说相反。此外，[一篇较早的文章](http://msdn.microsoft.com/en-us/library/sbbt4032%28VS.71%29.aspx)具体说：

> *base-type （可选）*
> 指定为每个枚举器分配的存储的基础类型。它可以是**除 char 之外**的整数类型之一。默认值为整数。

看[源码](http://typedescriptor.net/System.Enum.ToObject%28Type,Object%29)也`System.Enum.ToObject(Type,Object)`很明显`char`不支持。

因此，*即使 F# 对 执行特殊处理*，`enum<char>`也最好避免它，以免将来出现集成问题。

# netbeans - netbeans 模拟器中的 PIM 测试 [J2ME]

> ID：12013132
> 
> 赞同：1
> 
> 时间：2012-08-17T21:01:40.997
> 
> 标签：netbeans, java-me, jsr75, java-wireless-toolkit, pim

我正在开发一个与 j2me 中的用户手机通讯录非常配合的应用程序，但是因为我使用的模拟器没有任何默认的电话通讯录，我无法调试我的应用程序（或者只是查看应用程序是否工作）。

我搜索了很多，但我没有找到任何可以帮助我的东西。

有没有可能的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T22:35:43.297

查看模拟器附带的**用户指南。**该文档通常位于安装目录的子文件夹`docs`中。

有一个与 PIM API 相关的部分。例如，在[Wireless Toolkit 2.5.2](https://stackoverflow.com/tags/java-wireless-toolkit/info "这是什么？")中，您需要的信息在第 10 章*使用 PIM 和 FileConnection API*的第 10.2 节*PIM API*中提供：

> ...模拟器将联系人、日历和待办事项信息存储在台式计算机硬盘上的标准文件中。所有信息都存储在`workdir\appdb\skin\pim`. 此目录由所有正在运行的模拟器共享。列表存储在`contacts`、`events`和`todo`目录的子目录中。例如，名为 Contacts 的联系人列表包含在：
> 
> ```
> ---
> Windows:   workdir\appdb\skin\pim\contacts\Contacts
> Linux:     workdir/appdb/skin/pim/contacts/Contacts
> --- 
> ```
> 
> 在列表目录中，项目以 vCard ( `.vcs`) 或 vCalendar ( `.vcf`) 格式存储（参见[http://www.imc.org/pdi/](http://www.imc.org/pdi/)）。联系人以 vCard 格式存储，而日历和待办事项均以 vCalendar 格式存储。

# c# - 在 C++ IDL 中定义一个结构，然后在 C# 中适当地定义 MarshalAs()

> ID：12013134
> 
> 赞同：1
> 
> 时间：2012-08-17T21:01:44.500
> 
> 标签：c#, c++, struct, com-interop, idl

我有一个 C++ COM 服务器，它用数据填充 C# 调用者的结构。

该结构在 C++ IDL 中定义，如下所示：

```
interface Icontrol : IDispatch{
    [ 
    uuid(...), 
    version(1.0) ]
    typedef struct testStructure
    { 
        int x;
        int y;
        int z;
        ...
    } testStructure; 

    ...
    [id(9)] HRESULT getStruct([ref,in,out] testStructure * theData);
    ... 
```

然后，在 C# 代码中：

```
EO_Lib.testStructure test = new EO_Lib.testStructure();
EO_Lib.getStruct(ref test); 
```

通过简单地在 C# 结构中为非 C# 本地字段使用 MarshallAs，我可以使用常规 .DLL 使这项工作没有问题。但我不能让它在 COM .DLL 上工作。我怀疑这是因为我对 IDL 缺乏了解。

我需要做的是用我用适当的 MarshallAs() 信息创建的新 C# 类型调用 getStruct()。我该怎么做呢？

如果有帮助，我正在使用 Visual Studio 2010 MFC/ATL C++ 和 C# .NET 4 Framework。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T17:58:15.130

虽然不是该问题的实际解决方案，但以下内容排除了我提出问题的原因。

来自： http: [//msdn.microsoft.com/en-us/library/75dwhxf7 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/75dwhxf7%28v=vs.100%29.aspx)

*从平台调用调用返回的结构必须是 blittable 类型。平台调用不支持非 blittable 结构作为返回类型。*

所以基本上，你不能做我想做的事。

如果您忽略 COM 方面，BrokenGlass 的解决方案**[在这里](https://stackoverflow.com/questions/3798891/c-sharp-convert-struct-to-another-struct)**回答了 convert-one-structure-to-another 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-24T08:08:52.093

听起来您正试图从托管方面解决这个问题。不知道有关您的体系结构的许多细节（例如，这是您的 COM 服务器，就像您编写它/拥有代码一样？）我将不得不做出一些假设，以便提供从 C++ 方面接近的任何解决方案，特别是MIDL (IDL) 方面。

您提到了 IDL，据我所知，至少您可以访问生成类型库的 IDL。因此，暂时忘记 CLR（托管）方面的内容，让它在非托管环境 (COM) 中正常工作。

完成后，确定您希望托管客户端的结构看起来像什么。使用该信息，在您的 C++/MIDL 项目中定义一个新类型。如果您的 IDL 没有 ACF（应用程序配置文件）文件，请创建一个（它只是一个名称完全相同但扩展名为“.acf”而不是“.idl”的 IDL 文件。在 ACF 文件中声明一个 user_marshal 类型，将您的 COM 结构映射到您刚刚定义的新“托管友好”结构。像这样：

```
// ACF file

typedef [user_marshal(testStructure_ForDotNet)] testStructure;

// where testStructure is your "original" struct and "testStructure_ForDotNet" 
// is the one you just defined. 
```

最后，您需要定义转换函数（编组函数）。有关更多信息，请参阅此资源：

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa367296(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367296(v=vs.85).aspx)

无论如何，希望对（任何人）有所帮助。

# java - Mockito 验证不再与任何模拟交互

> ID：12013138
> 
> 赞同：37
> 
> 时间：2012-08-17T21:02:00.670
> 
> 标签：java, mockito

在 Mockito 中，有没有办法验证我创建的任何模拟上没有更多交互？

例如：

```
public void test()
{
  ...
  TestObject obj = mock(TestObject);
  myClass.test();
  verifyNoMoreInteractionsWithMocks();  <-------
} 
```

有没有这样的方法？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-17T21:37:05.420

由于[verifyNoMoreInteractions](http://static.javadoc.io/org.mockito/mockito-core/2.7.9/org/mockito/Mockito.html#verifyNoMoreInteractions(java.lang.Object...))需要一个对象数组，我们必须找到一种方法来获取所有创建的模拟。

您可以创建此类

```
public class MocksCollector {
    private final List<Object> createdMocks;

    public MocksCollector() {
        createdMocks = new LinkedList<Object>();
        final MockingProgress progress = new ThreadSafeMockingProgress();
        progress.setListener(new CollectCreatedMocks(createdMocks));
    }

    public Object[] getMocks() {
        return createdMocks.toArray();
    }
} 
```

然后在您的测试中使用它：

```
 public class ATest {
    private final MocksCollector mocksCollector = new MocksCollector();

    @Test
    public void test() throws Exception {
        A a1 = mock(A.class);
        A a2 = mock(A.class);
        A a3 = mock(A.class);
        assertEquals("wrong amount of mocks", 3, mocksCollector.getMocks().length);
        verifyNoMoreInteractions(mocksCollector.getMocks());
        a3.doSomething();
        verifyNoMoreInteractions(mocksCollector.getMocks()); // fail
    }
} 
```

或带有注释：

```
@RunWith(MockitoJUnitRunner.class)
public class A2Test {
    private final MocksCollector mocksCollector = new MocksCollector();

    @Mock
    private A a1;
    @Mock
    private A a2;
    @Mock
    private A a3;

    @Test
    public void test() throws Exception {
        assertEquals("wrong amount of mocks", 3, mocksCollector.getMocks().length);
        verifyNoMoreInteractions(mocksCollector.getMocks());
        a2.doSomething();
        verifyNoMoreInteractions(mocksCollector.getMocks()); // fail
    }
} 
```

它可以工作，但它增加了对内部模拟的依赖。

# android - 用 BusyBox 挂载 ext2 sd 卡

> ID：12013140
> 
> 赞同：2
> 
> 时间：2012-08-17T21:02:11.267
> 
> 标签：android, busybox

我正在尝试安装我放入平板电脑的 SD 卡。sd卡是ext2格式。我尝试在平板电脑上的终端应用程序中使用带有以下命令的 BusyBox：

```
busybox mkfs.ext2 
```

但似乎我需要在命令中添加一些参数。我需要添加哪些命令？或者有没有更简单的方法来安装 SD 卡？

我不想格式化 SD 卡，因为上面有数据；但无论如何将其读取为 ext2 格式都可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T21:27:31.967

您需要*挂载*ext2 文件系统而不是创建文件系统。

根据您的平板电脑，/dev 中的设备可能与我的示例不同。但通常你想运行一个类似的命令：

```
busybox mount -t ext2 /dev/block/vold/179:2 /data/sd-ext 
```

其中*/dev/block/vold/179:2* 是您尝试挂载的设备。

/ *data/sd-ext*是您要安装 sd 卡的路径。

这是 mount 命令的帮助页面

```
1|shell@android:/ $ busybox mount -t
option requires an argument -- t
BusyBox v1.20.0.git (2012-03-21 01:44:00 GMT) multi-call binary.

Usage: mount [OPTIONS] [-o OPTS] DEVICE NODE

Mount a filesystem. Filesystem autodetection requires /proc.

    -a      Mount all filesystems in fstab
    -f      Dry run
    -i      Don't run mount helper
    -r      Read-only mount
    -w      Read-write mount (default)
    -t FSTYPE[,...] Filesystem type(s)
    -O OPT      Mount only filesystems with option OPT (-a only)
-o OPT:
    loop        Ignored (loop devices are autodetected)
    [a]sync     Writes are [a]synchronous
    [no]atime   Disable/enable updates to inode access times
    [no]diratime    Disable/enable atime updates to directories
    [no]relatime    Disable/enable atime updates relative to modification time
    [no]dev     (Dis)allow use of special device files
    [no]exec    (Dis)allow use of executable files
    [no]suid    (Dis)allow set-user-id-root programs
    [r]shared   Convert [recursively] to a shared subtree
    [r]slave    Convert [recursively] to a slave subtree
    [r]private  Convert [recursively] to a private subtree
    [un]bindable    Make mount point [un]able to be bind mounted
    [r]bind     Bind a file or directory [recursively] to another location
    move        Relocate an existing mount point
    remount     Remount a mounted filesystem, changing flags
    ro/rw       Same as -r/-w

There are filesystem-specific -o flags. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T21:25:58.600

应该是`busybox mount /dev/block/something /mountpoint`。像在 Windows 中`mkfs`一样创建文件系统`format`

[http://www.busybox.net/downloads/BusyBox.html#mount](http://www.busybox.net/downloads/BusyBox.html#mount)

> 或者有没有更简单的方法来安装 SD 卡？

它通常是自动发生的，`busybox mount`不带参数检查它是否已经安装在某个地方。

# css - 列表未在 html5 css 中显示项目符号

> ID：12013142
> 
> 赞同：-2
> 
> 时间：2012-08-17T21:02:21.373
> 
> 标签：css, html

我正在使用 Dreamweaver 编辑 HTML5 CSS 站点，但项目符号拒绝显示在列表中。我不知道问题是 Safari 还是网站的代码。

我尝试了很多建议，但无法找到解决方案。

### 索引.HTML

```
<li id="page_donations">
                     <div class="contPad">
                    <div>
                            <h2>What we Do</h2>
                            <div class="scrollingDiv">
                                <ul class="list">
                                    <li>

                                        <div>
                                            <h5>DESIGN</h5>
           <p>Concept development, graphic design, web design, and logo design.</p>
                                        </div>
                                    </li>
                                    <li>
                                      <div>
                                        <h5>MARKETING</h5>
                                        <ul class="list">
   <li>Identify, segment, or focus on your target market    
     <ul>
   <li>Marketbridge can help you assess and narrow down your target market through a variety of traditional and non-traditional strategies including:
    <ul>            
     <li>Market segmentation, database mining and development, leveraging market intelligence, conducting studies and consumer surveys among some of the strategies applied</li>
   </ul>
   </li>   
             </ul>    
             </li>              

</ul>
                                      </div>
                                  </li>
                                    <li>
                                      <div>
                                        <h5>BRANDING</h5>
                                            <p>Marketbridge's success will help drive our vision of cultivating a more cohesive professional and social network within businesses and communities which helps to fuel commerce and goodwill within our communities.</p>
                                      </div>
                                  </li>
                                    <li>
                                      <div>
                                        <h5>PUBLIC RELATIONS</h5>
                                            <p>Quality and integrity are supported by our strategies to help maximize the return on investment in the least amount of time. </p>
                                      </div>
                                  </li>

      <li>
                                      <div>
                                        <h5>ADDITIONAL SERVICES</h5>
                                            <p>Quality and integrity are supported by our strategies to help maximize the return on investment in the least amount of time. </p>
                                      </div>
                                  </li>                               
                                </ul>
                            </div>
                     </div>
                    </div>
                </li> 
```

### 样式.CSS

```
@import url(http://fonts.googleapis.com/css?family=Open+Sans+Condensed:700,300);
@import url(http://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700);
/* Left & Right alignment */
.left {
float:left;
}
.right {
float:right;
}
.wrapper {
width:100%;
overflow:hidden;
position:relative;
}
.box {
overflow:hidden;
}
.clear {
clear:both;
width: 100%;
}
.last {
background:none !important;
border:none !important;
}
.pad_0 {
padding:0 !important;
}
/* Global properties ======================================================== */
body, html, .extra, #left_bg{
height:100%;
min-width:1220px;
min-height:550px;
}
body {
overflow:hidden;
border:0;
font:14px/20px Arial, sans-serif;
color:#FFF;
background:url(../images/27.jpg) 0 0 repeat;
}
#left_bg{
position:absolute;
width:81px;
background:url(../images/27_left.jpg) 0 0 repeat-y;
z-index:-1;
}
/* Global Structure ============================================================= */
.extra {
overflow:hidden;
margin-bottom:-80px;
}
.main {
position:relative;
}
.page_spinner {
position:fixed;
background: url(../images/main_spinner.gif) 50% 50% no-repeat #fff;
z-index:99;
width:100%;
height:100%;
top:0;
left:0
}
/* ============================= main layout ====================== */
a {
color:#909090;
text-decoration: none;
outline:none;
}
a:hover {
color:#757575
}
h1 {
position:absolute;
padding:0 0 0 0;
}
h2 {
font:35px/35px 'Open Sans Condensed', sans-serif;
color:#FFF;
font-weight:700;
padding-bottom:15px;
text-shadow: 1px 1px 6px #665d58;
}
h3{
font:18px/ 20px 'PT Sans Narrow', sans-serif;
color:#fff;
font-weight:700;
padding-bottom:7px;
text-shadow: 1px 1px 6px #665d58;
}
h4{
font:14px/20px Arial, sans-serif;
font-weight:normal;
text-shadow: 1px 1px 6px #665d58;
}
h5{
font:16px/16px 'Open Sans Condensed', sans-serif;
font-weight:600;
text-shadow: 1px 1px 6px #665d58;
}
h5 a{
font:16px/16px 'Open Sans Condensed', sans-serif;
color:#fff;
text-decoration: none;
outline:none;
font-weight:600;
text-shadow: 1px 1px 6px #665d58;
}
h5 a:hover{
font:16px/16px 'Open Sans Condensed', sans-serif;
color:#757575
font-weight:600;
text-shadow: 1px 1px 6px #665d58;
}
p{
padding-bottom:7px;
text-shadow: 1px 1px 6px #665d58;
}
.color1{
color:#74398e !important;
}
.color2{
color:#bd3274;
}
.color3{
color:#15b3f9;
}
V.color4{
color:#afbf44;
}
.color5{
color:#f8cc07;
}
.color6{
color:#ee8d1b;
}
.color7{
color:#e0191c;
}
.color8{
color:#000;
}
.color8 a {
color:#909090;
text-decoration: none;
outline:none;
}
color8 a:hover {
color:#757575
}
div.scrollingDiv
{
overflow-y:scroll;
height: 350px;
}
/* ============================= header ====================== */
header{
position:relative;
overflow:hidden;
width:1220px;
height:502px;
padding-top:145px;
}
#logo {
display:block;
text-indent: 100%;
white-space: nowrap;
overflow: hidden;
width:235px;
height:153px;
background:url(../images/logo.png) 0 0 no-repeat;
}
/* ============================= menu ====================== */
#leftLines{
float:left;
width:81px;
height:502px;
background:url(../images/left_menu_line.png) 0 0 no-repeat;
}
.menu {
float:left;
width:1139px;
height:502px;
}
#menu{
padding-top:121px;
}
#menu > li {
height:27px;
display:block;
margin-bottom:11px;
}
#menu > li > span{
display:inline-block;
width:50px;
height:27px;
}
#menu > li a {
position:relative;
top:-1px;
left:-3px;
font:34px/28px 'Impact', sans-serif;
text-transform:uppercase;
font-weight:normal;
}
#item1 > span{
background:url(../images/menu_line1.png) 0 0 repeat-x;
}
#item2 > span{
background:url(../images/menu_line2.png) 0 0 repeat-x;
}
#item3 > span{
background:url(../images/menu_line3.png) 0 0 repeat-x;
}
#item4 > span{
background:url(../images/menu_line4.png) 0 0 repeat-x;
}
#item5 > span{
background:url(../images/menu_line5.png) 0 0 repeat-x;
}
#item6 > span{
background:url(../images/menu_line6.png) 0 0 repeat-x;
}
#item7 > span{
background:url(../images/menu_line7.png) 0 0 repeat-x;
}
/* ============================= pages ====================== */
#page_home, #page_privacy, #page_more{
background:url(../images/page1_top_line.png) 0 0 repeat-x;
}
#page_mission{
background:url(../images/page2_top_line.png) 0 0 repeat-x;
}
#page_donations{
background:url(../images/page3_top_line.png) 0 0 repeat-x;
}
#page_news{
background:url(../images/page4_top_line.png) 0 0 repeat-x;
}
#page_reports{
background:url(../images/page5_top_line.png) 0 0 repeat-x;
}
#page_links{
background:url(../images/page6_top_line.png) 0 0 repeat-x;
}
#page_contacts{
background:url(../images/page7_top_line.png) 0 0 repeat-x;
}
/* ============================= content ====================== */
#content {
position:absolute;
top:160px;
padding:5px 0px 12px 0px;
width:711px;
height:453px;
background:url(../images/page_plane.png) 0 0 no-repeat;
z-index:5;
}
#content > ul {
position:relative;
width:100%;
height:100%;
overflow:hidden;
}
#content > ul > li {
position:absolute;
width:100%;
height:584px;
padding-top:24px;
left: -26px;
top: -18px;
}
.contPad{
padding:0px 30px 0 40px;
}
.padBot1{
padding-bottom:40px;
}
.padBot2{
padding-bottom:25px;
}
.padTop1{
padding-top:20px;
}
.rBorder{
background:url(../images/content_step_line.png) right 0 repeat-y;
}
.more1, .more2{
position:relative;
margin-top:12px;
display:inline-block;
color:#fff;
-webkit-border-radius:8px;
-moz-border-radius:8px;
border-radius:8px;
-webkit-transition:color 0.5s ease;
-moz-transition:color 0.5s ease;
-o-transition:color 0.5s ease;
transition:color 0.5s ease;
padding:7px 14px 10px;
font:18px/ 18px 'PT Sans Narrow', sans-serif;
font-weight:700;
text-shadow: 1px 1px 0px #665d58;
border-top:1px solid #646464;
border-right:1px solid #646464;
background:url(../images/more_1.png) 0 0 repeat-x;
}
.more1:hover{
color:#febe3b;
}
.more2{
margin-top:0px;
padding:5px 14px 8px;
font:22px/ 22px 'PT Sans Narrow', sans-serif;
font-weight:300;
letter-spacing:1px;
text-shadow: 1px 1px 0px #14b1f6;
border-top:1px solid #14b1f6;
border-right:1px solid #14b1f6;
background:url(../images/more_2.png) 0 0 repeat-x;
}
.more2:hover{
color:#3b3019;
}
.imgBot{
padding-bottom:16px;
}
#table1{
margin-bottom:35px;
height:253px;
border-bottom:1px solid #a6a6a6;
-webkit-border-radius:10px;
-moz-border-radius:10px;
border-radius:10px; 
}
#tableHeader{
background-color:#15b3fa;
}
#tableHeader, #table1 .col1{
font-size:14px;
color:#151515;
font-weight:bold;
text-transform:uppercase;
}
#table1 #tableHeader td{
height:41px;
}
#table1 .anotherColor{
background-color:#efeff0;
}
#table1 td{
height:30px;
}
#table1 tr{
vertical-align:middle;
}
#table1 .col1{
border-left:1px solid #e9e9e9;
border-right:1px solid #c9c9ca;
width:43px;
text-align:center;
}
#table1 .col2{
width:440px;
text-indent:20px;
}
#table1 .col3{
border-left:1px solid #c9c9ca;
border-right:1px solid #e9e9e9;
width:149px;
text-align:center;
}
#page1_top{
padding:25px 0px 0px 45px;
width:560px;
height:200px;
background:url(../images/page1_pic1.) 0 0 no-repeat;
}
#page1_top > div{
padding-bottom:13px;
font:34px/ 34px 'Open Sans Condensed', sans-serif;
color:#FFF;
font-weight:300;
text-shadow: 1px 1px 6px #665d58;
}
#page1_top > div > span{
display:block;
font:50px/ 50px 'Open Sans Condensed', sans-serif;
color:#FFF;
font-weight:700;
}
.google_map{
float:left;
width: 360px;
height: 180px;
background: #fff;
}
.address {
width:230px;
padding-left:20px;
float:left;
}
.address > span{
display:block;
width:160px;
font:18px/ 20px 'PT Sans Narrow', sans-serif;
color:#757575;
font-weight:700;
padding-bottom:7px;
}
.mailLink{
color:#e0191c;
text-decoration:none;
}
.mailLink:hover{
text-decoration:underline;
}
/* ============================= lists ====================== */
.list1 li{
overflow:hidden;
width:270px;
padding-bottom:20px;
}
.list1 li > img{
float:left;
padding-right:10px;
}
.list1 li > ul{
overflow:hidden;
padding-top:7px;
width:178px;
}
.list2 li{
overflow:hidden;
padding-bottom:8px;
}
.list2 li > img{
float:left;
padding-right:18px;
}
.list2 li > div{
float:left;
overflow:hidden;
width:224px;
}
.list2 li > div a:hover{
text-decoration:underline;
}
.list3 li{
padding-bottom:17px;    
}
.list3 li > img{
padding-bottom:16px;
}
.list3 li a{
font:18px/ 20px 'PT Sans Narrow', sans-serif;
color:#757575;
font-weight:700;
padding-bottom:7px;
}
.list3 li a:hover{
text-decoration:underline;
}
.list4{
margin-bottom:-10px;
}
.list4 li{
overflow:hidden;
padding-bottom:10px;
}
.list4 li > img{
float:left;
padding-right:20px;
}
.list4 li > div{
float:left;
overflow:hidden;
width:354px;
}
.list5 li{
padding-bottom:11px;
}
.list5 p{
line-height:18px;
padding-bottom:8px;
}
.list5 a{
font-size:13px;
font-weight:bold;
color:#ff6400;
}
.list5 a:hover{
text-decoration:underline;
}
.listWithMarker1 li, .listWithMarker2 li {
display:block;
padding-bottom:4px;
}
.listWithMarker1 li a, .listWithMarker2 li a {
display:inline-block;
padding:0 5px 0 17px;
text-decoration:underline;
}
.listWithMarker1 li a, .listWithMarker2 li a {
-webkit-transition:color 0.3s ease;
-moz-transition:color 0.3s ease;
-o-transition:color 0.3s ease;
transition:color 0.3s ease;
}
.listWithMarker1 li a {
color:#ff2a29;
background:url(../images/list_marker_1.png) 0 5px no-repeat;
}
.listWithMarker2 li a {
color:#feb829;
background:url(../images/list_marker_2.png) 0 5px no-repeat;
}
.listWithMarker1 li a:hover, .listWithMarker2 li a:hover {
color:#757575;
}
/* ============================= footer ====================== */
footer{
position:relative;
width:1100px;
font:15px/ 15px 'Open Sans Condensed', sans-serif;
color:#757575;
font-weight:700;
text-align:center;
text-transform:uppercase;
}
footer a{
text-decoration:none;
color:#c2c2c2;
}
footer ul{
padding-top:9px;
}
footer ul li{
display:inline-block;
padding-right:1px;
}
#icon1, #icon2{
display:block;
width:31px;
height:31px;
}
#icon1{
background:url(../images/icon1.png) 0 0 no-repeat;
}
#icon2{
background:url(../images/icon2.png) 0 0 no-repeat;
}
/* ============================= forms ============================= */
#form1 input {
margin:0;
border:1px solid #adadad;
background-color:#fff;
padding:15px 0 15px 17px;
width:252px;
box-shadow:none;
}
#form1 textarea {
resize: none;
margin:0;
border:1px solid #adadad;
background-color:#fff;
padding:14px 0 5px 17px;
width:330px;
height:92px;
overflow:auto;
line-height:18px;
}
#form1 label {
position:relative;
display:inline-block;
min-height:60px;
}
#form1 .error, #form1 .empty {
position:relative;
top: -3px;
display:none;
font-size:10px;
color:#414040;
text-transform:none;
}
.btns{
float:right;
}
.btns a{
margin:18px 0 0 13px;
}
/* Form defaults */
input, select, textarea {
font:14px/20px Arial, sans-serif;
color:#909090;
}
.blacktext {
color: #000;
}
.fb {
vertical-align: middle;
padding:40px 40 40px 40px;
} 
```

### 重置.CSS

```
a, abbr, acronym, address, applet, article, aside, audio,
b, blockquote, big, body,
center, canvas, caption, cite, code, command,
datalist, dd, del, details, dfn, dl, div, dt, 
em, embed,
fieldset, figcaption, figure, font, footer, form, 
h1, h2, h3, h4, h5, h6, header, hgroup, html,
i, iframe, img, ins,
kbd, 
keygen,
label, legend, li, 
meter,
nav,
object, ol, output,
p, pre, progress,
q, 
s, samp, section, small, span, source, strike, strong, sub, sup,
table, tbody, tfoot, thead, th, tr, tdvideo, tt,
u, ul, 
var {
background: transparent;
border: 0 none;
font-size: 100%;
margin: 0;
    padding: 0;
    border: 0;
    outline: 0;
vertical-align: top; }

ol, ul {
list-style-position:inside;
list-style: circle;
}
blockquote, q {
quotes: none;
}
table, table td { 
padding:0;
border:none;
border-collapse:collapse;
}
img {
vertical-align:top; 
}
embed { 
vertical-align:top;
}
* { border:none}
input, textarea{ outline:none !important}

article, aside, audio, canvas, command, datalist, details, embed, figcaption, figure, 
footer, header, hgroup, keygen, meter, nav, output, progress, section, source, video{                     
display: block; }

mark, rp, rt, ruby, summary, time{ display: inline } 
```

### 布局.CSS

```
.grid_1,
.grid_2,
.grid_3,
.grid_4,
.grid_5,
.grid_6,
.grid_7,
.grid_8,
.grid_9,
.grid_10,
.grid_11,
.grid_12,
.grid_13,
.grid_14,
.grid_15,
.grid_16,
.grid_17,
.grid_18,
.grid_19,
.grid_20,
.grid_21,
.grid_22,
.grid_23,
.grid_24 {
float: left;
}

.rightIndent{
padding-right:10px;
}
.rightIndent1{
padding-right:40px;
}
.rightIndent2{
padding-right:50px;
}
.leftIndent1{
padding-left:40px;
}
.leftIndent2{
padding-left:40px;
}

.height1{

}

.grid_1 {
width:30px;
}

.grid_2 {
width:70px;
}

.grid_3 {
width:110px;
}

.grid_4 {
width:150px;
}

.grid_5 {
width:190px;
}

.grid_6 {
width:230px;
}

.grid_7 {
width:270px;
}

.grid_8 {
width:310px;
}

.grid_9 {
width:350px;
}

.grid_10 {
width:390px;
}

.grid_11 {
width:430px;
}

.grid_12 {
width:470px;
}

.grid_13 {
width:510px;
}

.grid_14 {
width:550px;
}

.grid_15 {
width:590px;
}

.grid_16 {
width:630px;
}

.grid_17 {
width:670px;
}

.grid_18 {
width:710px;
}

.grid_19 {
width:750px;
}

.grid_20 {
width:790px;
}

.grid_21 {
width:830px;
}

.grid_22 {
width:870px;
}

.grid_23 {
width:910px;
}

.grid_24 {
width:950px;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-18T00:45:51.303

将您的代码片段粘在一起后，我看到您的项目符号消失的两个原因：首先，确保列表左侧有足够的边距以实际显示项目符号（20px 应该足够了），如果小虫子仍在隐藏（例如您的示例中的情况，白色背景上的白色文本？），给列表一些颜色。像这样的东西：

```
ul.list{
    margin-left: 20px;
    color: deeppink;
} 
```

你仍然会面临子弹没有文字阴影的问题，对此我无法给你一个快速而肮脏的答案。就个人而言，我会隐藏项目符号，给我的列表项一些填充，并在其中粘贴适当样式的背景图像。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-13T22:15:19.150

我知道这是一个老问题，但是由于我遇到了同样的问题并在看到此问题后解决了，所以我想我会为其他人回答这个问题。

如果你使用 CSS3 属性

```
display:block; 
```

对于列表项，list-style / list-style-type 属性将无效。见[http://www.w3schools.com/tags/tag_li.asp](http://www.w3schools.com/tags/tag_li.asp)

删除`display:block;`或重置为`display: list-item;`

# node.js - 如何开始创建自定义 Node Js 驱动程序以访问特定类型的数据

> ID：12013147
> 
> 赞同：0
> 
> 时间：2012-08-17T21:02:52.573
> 
> 标签：node.js

我听说过很多关于 Node 的事情。最近微软发布了一个通过 Node.js 访问 SQL Server 的驱动程序。我想类似地创建一个驱动程序来访问我们拥有的数据源。可以使用它们的 DLL 访问数据源。例如，我可以编写 ac# 程序并访问数据。如何创建驱动程序来访问我们的数据源以便 Node 可以使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T22:07:51.023

您可以按照节点文档的[C/C++ 插件](http://nodejs.org/api/addons.html)部分中的描述用 C 或 C++ 编写驱动程序代码。它必须编译为本机代码，而不是托管的 .NET 代码。

# git - 带有子模块的 Git 重命名目录

> ID：12013149
> 
> 赞同：2
> 
> 时间：2012-08-17T21:03:03.167
> 
> 标签：git

给定一个 git 存储库，其中有一个我已经签出子模块的目录，我如何重命名顶级目录？

```
$ git init
Initialized empty Git repository in /home/work/asdasd/.git/
$ mkdir asd
$ touch asd/.keepme
$ git add asd/.keepme
$ git commit -a -m "asd"
[master (root-commit) 932f011] asd
  0 files changes
  create mode 100644 asd/.keep
$ git submodule add git@github.com:test/test.git asd/subdir
Cloning into 'asd/subdir'...
remote: Counting objects: 800, done.
remote: Compressing objects: 100% (281/281), done.
remote: Total 800 (delta 523), reused 786 (delta 509)
Receiving objects: 100% (800/800), 109.46 KiB, done.
Resolving deltas: 100% (523/523), done.
$ git commit -a -m "submodule"
[master e0fe8e7] submodule
  2 files changed, 4 insertions(+)
  create mode 100644 .gitmodules
  create mode 160000 asd/subdir 
```

现在，如果我尝试重命名`asd`目录，则会出现错误：

```
 $ git mv asd foo
 fatal: source directory is empty, source=asd/subdir, destination=foo/subdir 
```

我该如何重命名它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T22:02:03.730

您是否尝试过`mv asd foo`，然后`git add -u *`（您用于更新）然后您提交并推送更改？

# java - 如何声明方法的泛型类型？

> ID：12013156
> 
> 赞同：0
> 
> 时间：2012-08-17T21:03:56.830
> 
> 标签：java, generics

我已经为 Java 中的选项创建了一个解决方案。

```
public final class Optional<T> {

    private final T reference;

    private Optional(T reference) {
         this.reference = reference;
    }

    public T get() {
        if (!isPresent()) {
            throw new IllegalStateException("Cannot retrieve reference when absent!");
        }
        return reference;
    }

    public boolean isPresent() {
        return reference != null;
    }

    public static <T> Optional<T> of(T reference) {
        return new Optional<T>(reference);
    }

    public static <T> Optional<T> absent() {
        return of(null);
    }

    public static <T> Optional<T> fromNullable(@Nullable T nullableReference) {
        return of(nullableReference);
    }

} 
```

但是当我在生产代码中使用它时，编译器会抱怨。

这是我的生产代码：

```
public final class OnsetSequencer {

    private final Onset onset;
    private final Optional<EventManager> eventManager;

    public OnsetSequencer(Onset onset, Optional<EventManager> eventManager) {
        this.onset = onset;
        this.eventManager = eventManager;
    }

    public OnsetSequencer(Onset onset) {
        this(onset, Optional.absent());
    }

    public void sequence() {
        boolean present = eventManager.isPresent();
        if (present) {
            eventManager.get().dispatchEvent(new OnsetBeginEvent(onset));
        }
        onset.begin();
        if (present) {
            eventManager.get().dispatchEvent(new OnsetEndEvent(onset));
        }
        onset.end();
    }

} 
```

编译器抱怨`this(onset, Optional.absent());`说：*构造函数 OnsetSequencer(Onset, Optional) 未定义*

我试图通过将其更改为`this(onset, Optional<EventManager>.absent());` That syntax is wrong 来解决此问题。

我想知道如何解决这个问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T21:06:57.627

我想你想要：

```
Optional.<EventManager>absent() 
```

我从不喜欢在 Java 中为泛型方法表达类型参数的方式，但这就是生活。有关详细信息，请参阅[JLS 的第 15.12 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T21:12:00.123

你应该使用：

```
Optional.<EventManager>absent() 
```

# php - 如何以编程方式打印用户的图片？此代码不起作用

> ID：12013158
> 
> 赞同：1
> 
> 时间：2012-08-17T21:04:02.667
> 
> 标签：php, variables, drupal-7

到目前为止，我已经在 Drupal 7 安装中尝试过这个：

```
<?php print $user_picture; ?>
<?php print $user->picture ?>
<?php print $node->picture ?> 
```

这些片段都不会让我看到打印在页面上的图片。

我正在使用 Devel 的模块，所以我试图让它给我一些提示。这就是我得到的全部：

```
picture (String, 1 characters ) 0
$...->picture 
```

我读过它来打印一个你刚刚打印或回显它的变量（`echo $var1`例如）。那么为什么这行不通呢？我在我的`node.tpl.php`模板中添加了这个片段。

对此有什么想法吗？感谢您的见解！！

**更新：**这是以下结果`var_dump($user_picture)`：

```
string(0) "" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T23:10:48.690

如果一切都失败了：

```
global $user;
$image = theme('user_picture', array('account' => $user));
print $image; 
```

# c++ - 如何检查 WriteFile 函数是否完成

> ID：12013161
> 
> 赞同：1
> 
> 时间：2012-08-17T21:04:25.197
> 
> 标签：c++, winapi, uart

我想检查 WriteFile 函数是否已完成对 UART 的写入，以便我可以在同一个 ComDev 上调用 ReadFile 而不会导致异常。

似乎[WriteFile 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365747%28v=vs.85%29.aspx)可以在写入完成之前返回。

```
BOOL WriteCommBlock(HANDLE * pComDev, char *pBuffer , int BytesToWrite)
{
while(fComPortInUse){}

fComPortInUse = 1; 

BOOL       bWriteStat   = 0;
DWORD      BytesWritten = 0;
COMSTAT    ComStat      = {0};
OVERLAPPED osWrite      = {0,0,0};

if(WriteFile(*pComDev,pBuffer,BytesToWrite,&BytesWritten,&osWrite) == FALSE)
{
    short Errorcode = GetLastError();
    if( Errorcode != ERROR_IO_PENDING )
        short breakpoint = 5; // Error

    Sleep(1000); // complete write operation TBD

    fComPortInUse = 0; 
    return (FALSE);
}

fComPortInUse = 0; 
return (TRUE);
} 
```

我使用 Sleep(1000) 作为解决方法，但我该如何等待适当的时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T21:14:45.677

您可以创建一个事件，将其存储在您的重叠结构中并等待它发出信号。像这样（未经测试）：

```
BOOL WriteCommBlock(HANDLE * pComDev, char *pBuffer , int BytesToWrite)
{
while(fComPortInUse){}

fComPortInUse = 1; 

BOOL       bWriteStat   = 0;
DWORD      BytesWritten = 0;
COMSTAT    ComStat      = {0};
OVERLAPPED osWrite      = {0,0,0};
HANDLE     hEvent = CreateEvent(NULL, TRUE, FALSE, NULL);

if (hEvent != NULL)
{
    osWrite.hEvent = hEvent;
    if(WriteFile(*pComDev,pBuffer,BytesToWrite,&BytesWritten,&osWrite) == FALSE)
    {
        short Errorcode = GetLastError();
        if( Errorcode != ERROR_IO_PENDING )
            short breakpoint = 5; // Error

        WaitForSingleObject(hEvent, INFINITE);

        fComPortInUse = 0; 
        return (FALSE);
    }
    CloseHandle(hEvent);
}

fComPortInUse = 0; 
return (TRUE);
} 
```

请注意，根据您尝试做的其他事情，简单地调用 WaitForSingleObject() 可能不是最好的主意。INFINITE 超时也不可能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T21:20:10.897

您的问题是重叠 I/O 的使用不正确，无论是 UART 还是任何底层设备。

修复代码的最简单（尽管不一定是最佳）方法是使用事件来处理 I/O 完成。

```
// ...
OVERLAPPED osWrite      = {0,0,0};

osWrite.hEvent = CreateEvent(FALSE, NULL, NULL, FALSE);

if(WriteFile(*pComDev,pBuffer,BytesToWrite,&BytesWritten,&osWrite) == FALSE)
{
    DWORD Errorcode = GetLastError();
    // ensure it's ERROR_IO_PENDING

    WaitForSingleObject(osWrite.hEvent, INFINITE);

}

CloseHandle(osWrite.hEvent); 
```

但是请注意，整个 I/O 是同步的。它由操作系统以异步方式处理，但是您的代码在完成之前不会继续。如果是这样，为什么还要使用重叠 I/O？

应该使用它来实现在同一线程中同时处理多个 I/O（和其他任务）。要正确执行此操作 - 您应该`OVERLAPPED`在堆上分配结构并使用可用的完成机制之一：事件、APC、完成端口等。您的程序流逻辑也应该更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T21:08:17.653

你`Sleep(1000);`没有用，它只会在writefile完成操作后执行。你必须等到WriteFile结束。

```
if(WriteFile(*pComDev,pBuffer,BytesToWrite,&BytesWritten,&osWrite) == FALSE)
{} 
```

您必须知道，条件中的任何内容只有在结果为真时才会执行。在这里，在 WriteFile 例程完成（无论是完成还是错误）后，结果被发送到程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T21:30:04.797

既然你没有说你需要异步 I/O，你应该尝试同步。这更容易。我认为，如果您只是为 OVERLAPPED arg 传递一个空指针，您将获得同步、阻塞、I/O。请参阅我在本文档的“Windows C”部分编写的示例代码：

[http://www.pololu.com/docs/0J40/](http://www.pololu.com/docs/0J40/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T08:30:48.367

好的，我错过了读/写代码中重叠的 I/O OVL 参数，所以我昨天才回复作为评论，否则我会被否决：（

The classic way of handling overlapped I/O is to have an _OVL struct as a data member of the buffer class that is issued in the overlapped read/write call. This makes it easy to have read and write calls loaded in at the same time, (or indeed, multiple read/write calls with separate buffer instances).

For COM posrts, I usually use an APC completion routine whose address is passed in the readFileEx/writeFileEx APIs. This leaves the hEvent field of the _OVL free to use to hold the instance pointer of the buffer so it's easy to cast it back inside the completion routine, (this means that each buffer class instance contains an _OVL memebr that contains an hEvent field that points to the buffer class instance - sounds a but weird, but works fine).

# database - 用于存储 PII 的第三方服务

> ID：12013166
> 
> 赞同：0
> 
> 时间：2012-08-17T21:05:01.853
> 
> 标签：database, pii

客户需要存储一些个人身份信息 (PII)。我想尝试避免将其存储在他们的数据库中的问题。我正在寻找某种可以安全存储这些数据的服务，然后我可以通过 API 访问这些数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T21:16:28.107

没有很好的方法来规避 PII 管理。如果可以的话，我建议从客户那里获得一些存储信息的理由，验证它是否确实需要。我已经看到了对 PII 片段的要求，经过一番讨论，结果证明是不必要的。

假设需要 PII... 将数据保存在内部 - 如果您使用远程服务，那么您将打开一个全新的蠕虫罐 - 您可能仍将对任何数据泄露负责。

当您确实去存储所需的 PII 时，请尽可能将其与严格的安全性保持隔离，并对其进行加密。当您需要读取信息时，对其进行解密、处理并立即摆脱它。处理内存中的数据时，将值设置为一些垃圾文本，然后在完成后释放内存。

祝你好运！

# ios - 具有可达性的旋转网络图标

> ID：12013174
> 
> 赞同：0
> 
> 时间：2012-08-17T21:05:37.880
> 
> 标签：ios, networking, reachability

好的，所以我的问题显然是关于可达性类的。我在 ipad 应用程序中使用它，但实际上并不需要持续连接，只是偶尔将 xml 发送到服务器。我注意到左上角的小网络指示器一直在**旋转**。可达性是导致它的原因吗？我的 appDelegate 类正在监听连接，但我担心额外的电池使用量。有什么想法吗？

```
didfinishlaunchingwithoptions {

  [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(checkNetworkStatus:) name:kReachabilityChangedNotification object:nil];

    hostReachable = [Reachability reachabilityWithHostName: @"www.apple.com"];
    [hostReachable startNotifier];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T23:02:01.883

Reachability 没有任何对显示/隐藏 networkActivityIndi​​cator 的引用，因此它必须来自项目中的其他地方。使用 Xcode 的搜索来搜索整个项目。

# asp.net-mvc-3 - 覆盖 ActionLink Behavior 和参数以根据用户权限处理链接外观（asp.net mvc3）

> ID：12013177
> 
> 赞同：1
> 
> 时间：2012-08-17T21:05:51.073
> 
> 标签：asp.net-mvc-3, razor, actionlink

我想在我的网站中处理用户权限（编辑、读取、新建），我正在考虑传递`MyRoles` 具有用户权限代码的附加参数字节，即：0-只读、1-完全控制、2-编辑和读取

那么我如何覆盖`Html.ActionLink`razor 方法来处理它，我的方法是处理这个问题的最佳方法（用户权限）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T21:22:11.790

> 我的方法是处理此问题的最佳方法（用户权限）吗？

不，将角色作为参数传递给您的操作将代表安全漏洞，因为用户可以传递他喜欢的任何角色。

执行此操作的正确方法是使用角色提供程序。您将角色与用户相关联，然后定义用户需要成为哪个角色才能访问特定操作。

例如：

```
[Authorize(Roles = "Readers")]
public ActionResult SomeAction() 
{
    // only users belonging to the readers role will be able to access this action
} 
```

正确保护服务器端后，您可以有条件地在 Razor 视图中显示/隐藏锚点和内容：

```
@if (User.IsInRole("Readers"))
{
    @Html.ActionLink("read the news", "SomeAction")
} 
```

为了避免编写这些 if，您可以编写一个自定义 HTML 助手：

```
@Html.RoleActionLink("read the news", "Some Action", "Readers") 
```

默认的 Membership 和 Role 提供程序使用默认的 aspnetdb，但您当然可以扩展或编写自定义的提供程序以查询您自己的数据。

# bash - unix bash - 从文件中提取一行

> ID：12013178
> 
> 赞同：0
> 
> 时间：2012-08-17T21:05:52.633
> 
> 标签：bash, unix, scripting, awk, grep

需要你的帮助！！！我试图寻找这个但无济于事。

如何使用 bash 实现以下目标？

我有一个名为“cube.mdl”的平面文件，其中包含：

```
[...]
bla bla bla bla lots of lines above
Cube 8007841 "BILA_" MdcFile "BILA_CO_PM_MKT_BR_CUBE.mdc"
bla bla bla more lines below
[...] 
```

我需要打开该文件，查找单词“MdcFile”并获取引号之间的字符串，即`BILA_CO_PM_MKT_BR_CUBE.mdc`

我知道 AWK 或 grep 足够强大，可以在一行中完成此操作，但我找不到可以帮助我自己完成此操作的示例。

提前致谢！日本医学会

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T21:18:33.733

您可以使用：

```
grep -o -P "MdcFile.*" cube.mdl | awk -F\" '{ print $2 }' 
```

这将使用`grep`' 正则表达式仅返回`MdcFile`当前行中的所有内容。然后，`awk`将使用 the`"`作为分隔符并仅打印第二个单词 - 这将是您的“in-quotes”单词，当然没有引号返回。

选项`-o`，`--only-matching`指定仅返回匹配的文本匹配，而`-P`，`--perl-regexp`指定模式是 Perl-Regex 模式。似乎某些版本的 grep 不包含这些选项。OP 的版本是不包含它们的版本，但以下似乎对他有用：

```
grep "MdcFile.*" cube.mdl | awk -F\" '{ print $2 }' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T21:10:14.020

```
grep MdcFile cube.mdl | awk '{print $5}' 
```

会这样做，假设这些位中的任何一个都没有空格来排除位置计数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T21:12:05.083

这可能会做到。

```
sed -n '/MdcFile / s/.*MdcFile "\(\[^"\]\+\)".*/\1/;/MdcFile / p' INPUTFILE 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T12:27:47.217

使用作为记录分隔符`awk`的整个事情：`"`

```
awk -v RS='"' '/MdcFile/ { getline; print }' cube.mdl 
```

# c# - 计算安装基数的最有效方法是什么？

> ID：12013191
> 
> 赞同：3
> 
> 时间：2012-08-17T21:07:00.207
> 
> 标签：c#, sql, excel, optimization, sql-server-2008-r2

考虑到分配给每个单元的一组特定“退休率”，我需要计算多年来在不同国家具有不同“环境”的不同放置/出货量的单元的安装基数。放置、曲线定义和曲线分配存储在不同的数据库表中（下面有 DDL 和示例数据，也在[SQLFiddle.com](http://sqlfiddle.com/#!3/f0995/2/0 "SQL小提琴")上）。安装基数的计算公式如下：

![在此处输入图像描述](../Images/6f48fd796be61d5bb817c29f2dd1877a.png) 其中 1990 年是我们有安置数据的第一年。

# 问题：

使用包含 3 到 1600 万行单位/国家/环境/年份放置组合的数据集进行这些计算所花费的时间比 30 秒到 1 分钟的目标加载/计算时间要长得多。

## Sql Server 方法

当`PIVOT`ed 使每年成为自己的列时，我会得到 100,000 到 400,000 行返回的原始数据（展示位置 + 费率），这大约需要 8-15 秒。但是，如果我要通过如下所示的 SQL 语句手动计算，则*至少*需要10 分钟。

我们还尝试了一种 SQL 触发器解决方案，该解决方案在每次修改位置或费率时更新安装基础，但这会使数据库更新在批量更新时异常缓慢，而且也不可靠。如果这真的是最好的选择，我想这可能值得更多的调查。

## Excel-VSTO 方法（到目前为止，最快的方法）：

这些数据最终以 C# VSTO 驱动的 Excel 工作簿结束，其中数据是通过`VLOOKUPs`一系列. 当以较小的批次完成并将公式转换为值时，它不会崩溃，但计算时间仍然超过一分钟。`VLOOKUPs``VLOOKUPs``VLOOKUPs`

# 问题：

是否有一些数学或编程构造可以帮助我通过 C# 或 SQL 比我一直在做的更有效地计算这些数据？蛮力迭代也太慢了，所以这也不是一个选择。

```
DECLARE @Placements TABLE 
(
    UnitId int not null,
    Environment varchar(50) not null,
    Country varchar(100) not null,
    YearColumn smallint not null,
    Placement decimal(18,2) not null,
    PRIMARY KEY (UnitId, Environment, Country, YearColumn)
)

DECLARE @CurveAssignments TABLE 
(
    UnitId int not null,
    Environment varchar(50) not null,
    Country varchar(100) not null,
    YearColumn smallint not null,
    RateId int not null,
    PRIMARY KEY (UnitId, Environment, Country, YearColumn)
)

DECLARE @CurveDefinitions TABLE
(
    RateId int not null,
    YearOffset int not null,
    Rate decimal(18,2) not null,
    PRIMARY KEY (RateId, YearOffset)
)

INSERT INTO
    @Placements
    (
        UnitId,
        Country,
        YearColumn,
        Environment,
        Placement
    )
VALUES
    (
        1,
        'United States',
        1991,
        'Windows',
        100
    ),
    (
        1,
        'United States',
        1990,
        'Windows',
        100
    )

INSERT INTO
    @CurveAssignments
    (
        UnitId,
        Country,
        YearColumn,
        Environment,
        RateId
    )
VALUES
    (
        1,
        'United States',
        1991,
        'Windows',
        1
    )

INSERT INTO
    @CurveDefinitions
    (
        RateId,
        YearOffset,
        Rate
    )
VALUES
    (
        1,
        0,
        1
    ),
    (
        1,
        1,
        0.5
    )

SELECT
    P.UnitId,
    P.Country,
    P.YearColumn,
    P.Placement *
    (
        SELECT
            Rate
        FROM
            @CurveDefinitions CD
            INNER JOIN @CurveAssignments CA ON
                CD.RateId = CA.RateId
        WHERE
            CA.UnitId = P.UnitId
            AND CA.Environment = P.Environment
            AND CA.Country = P.Country
            AND CA.YearColumn = P.YearColumn - 0
            AND CD.YearOffset = 0
    )
    +
    (
        SELECT
            Placement
        FROM
            @Placements PP
        WHERE
            PP.UnitId = P.UnitId
            AND PP.Environment = P.Environment
            AND PP.Country = P.Country
            AND PP.YearColumn = P.YearColumn - 1
    )
    *
    (
        SELECT
            Rate
        FROM
            @CurveDefinitions CD
            INNER JOIN @CurveAssignments CA ON
                CD.RateId = CA.RateId
        WHERE
            CA.UnitId = P.UnitId
            AND CA.Environment = P.Environment
            AND CA.Country = P.Country
            AND CA.YearColumn = P.YearColumn
            AND CD.YearOffset = 1
    ) [Installed Base - 1993]
FROM
    @Placements P
WHERE
    P.UnitId = 1
    AND P.Country = 'United States'
    AND P.YearColumn = 1991
    AND P.Environment = 'Windows' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T21:25:00.120

回应以下声明：

> 我们还尝试了一种 SQL 触发器解决方案，该解决方案在每次修改位置或费率时更新安装基础，但这会使数据库更新在批量更新时异常缓慢，而且也不可靠。如果这真的是最好的选择，我想这可能值得更多的调查。

您听说过[SQL 服务代理](http://msdn.microsoft.com/en-us/library/bb522893.aspx)吗？它做得很好的一件事是允许您将数据排队以进行异步处理。如果触发器本身太慢，您可以使用触发器对记录进行排队以进行异步处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T03:26:04.903

看起来这可能是问问题会导致正确答案的情况。事实证明，答案主要在于我上面给出的查询，这完全是低效的。通过如下优化查询，我已经能够获得我正在寻找的附近的加载时间。

```
SELECT
    P.UnitId,
    P.Country,
    P.YearColumn,
    P.Environment,
    P.Placement,
    sum(IBP.Placement * FRR.Rate) InstalledBase
FROM
    @Placements P
    INNER JOIN @Placements IBP ON
        P.UnitId = IBP.UnitId
        AND P.Country = IBP.Country
        AND P.Environment = IBP.Environment
        AND P.YearColumn >= IBP.YearColumn
    INNER JOIN @CurveAssignments RR ON
        IBP.UnitId = RR.UnitId
        AND IBP.Country = RR.Country
        AND IBP.Environment = RR.Environment
        AND IBP.YearColumn = RR.YearColumn
    INNER JOIN @CurveDefinitions FRR ON
        Rr.RateId = FRR.RateId
        AND P.YearColumn - IBP.YearColumn = FRR.YearOffset
GROUP BY
    P.UnitId,
    P.YearColumn,
    P.Country,
    P.Environment,
    P.Placement 
```

# bash - 重击。用法：'./'

> ID：12013192
> 
> 赞同：3
> 
> 时间：2012-08-17T21:07:02.770
> 
> 标签：bash

我确实尝试在网上找到答案，但不幸的是空手而归。结合其他关键字搜索“./”会带来很多点击，但没有任何帮助...

无论如何，你可能会说，我对 MacOs 相当陌生。我正在从 shell 运行 mongo。我 cd 进入 /bin 文件夹并使用以下命令启动 mongo 守护进程：

> './mongod'

.

如果我只是输入“mongod”，我会收到以下错误：

> '-bash: mongod: 找不到命令'

什么是

> './'

在 './mongod' 中代表什么？为什么需要它？为什么我不能通过键入 mongod 来执行 mongo。毕竟，我在正确的目录中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T21:08:39.590

> 毕竟，我在正确的目录中

但该目录不在`PATH`. 问题的要点是，当 shell 想要执行某事时，它会查看目录列表（在名为 的变量中指定`PATH`）。**并且当前目录不在该列表中**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T21:21:20.980

正如[cnicutar](https://stackoverflow.com/users/714501/cnicutar)`PATH`的回答中所解释的那样，shell 会尝试将您输入的命令与环境变量中列出的目录中的可执行文件相匹配。

尽管您**可以**将当前目录添加到 . `PATH`，但这可能**不是**一个好主意。这篇[文章](http://stray-notes.blogspot.com.ar/2010/11/adding-current-directory-to-path.html)给出了 Linux 默认不添加它的一些很好的理由：

> 它是一种堵住可能存在的安全漏洞的措施。您不能在当前目录中运行命令而不专门调用它们。
> 
> 即./myscript.sh
> 
> 为了阻止讨厌的人编写恶意的 shell 脚本，请将脚本放在无害的位置，例如 /tmp 并获取 root 来运行脚本。root 会运行一个邪恶的脚本吗？如果脚本被命名为 'ls' 并且 root 做了一个列表，脚本会自动运行。

# c++ - strcmp 始终为真

> ID：12013194
> 
> 赞同：0
> 
> 时间：2012-08-17T21:07:18.373
> 
> 标签：c++, strcmp

为什么 if 语句总是正确的？

```
char dot[] = ".";
char twoDots[] = "..";
cout << "d_name is " << ent->d_name << endl;
if(strcmp(ent->d_name, dot) || strcmp(ent->d_name, twoDots)) 
```

我用`strcmp`错了吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T21:08:23.960

[`strcmp()`](http://en.cppreference.com/w/c/string/byte/strcmp)`0`当字符串相等且字符串不能同时为`"."`and时返回`".."`。意味着 的一侧`||`将始终为非零，因此条件始终为`true`。

纠正：

```
if(0 == strcmp(ent->d_name, dot) || 0 == strcmp(ent->d_name, twoDots)) 
```

另一种方法是用于`std::string`存储点变量并使用`==`：

```
#include <string>

const std::string dot(".");
const std::string twoDots("..");

if (ent->d_name == dot || ent->d_name == twoDots) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-17T21:08:15.473

`strcmp()`在有差异的情况下返回非零（因此计算结果为`true`）。

还可以查看文档（下面的链接）。还可以看看[`std::string`](http://www.cplusplus.com/reference/string/string/)哪个提供了`operator==()`这样的任务。请参阅[此答案](https://stackoverflow.com/a/12013209/1025391)以*了解如何*。

* * *

> 返回一个整数值，表示字符串之间的关系：零值表示两个字符串相等。大于零的值表示第一个不匹配的字符在 str1 中的值大于在 str2 中的值；小于零的值表示相反。

*   [http://www.cplusplus.com/reference/clibrary/cstring/strcmp/](http://www.cplusplus.com/reference/clibrary/cstring/strcmp/)

* * *

> 每个函数的返回值表示 string1 到 string2 的字典关系。

```
Value   Relationship of string1 to string2

 < 0    string1 less than string2
   0    string1 identical to string2
 > 0    string1 greater than string2 
```

*   [http://msdn.microsoft.com/en-us/library/e0z9k731%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/e0z9k731%28v=vs.80%29.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-17T21:08:25.183

`strcmp`如果字符串在字典顺序上分别在字典顺序上是先于、相等或后，则返回 -1、0 或 1。

要检查字符串是否*相等*，请使用`strcmp(s1, s2) == 0`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T21:15:47.470

因为当相等和不同时`strcmp`返回，至少两个 strcmp 中的一个正在返回，当任何条件不同时将返回 true ，你应该这样做......`0``1 or -1``1 or -1``||``0`

```
if(strcmp(ent->d_name, dot) == 0 || strcmp(ent->d_name, twoDots) == 0) 
```

我`== 0`在每个 strcmp 之后添加

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-18T14:05:17.517

strcmp 本身不返回布尔值。相反，它返回一个 int。如果匹配，则为 0，如果不匹配，则为其他。所以这应该有帮助：

```
if(0 == strcmp(d_name, dot) || 0 == strcmp(d_name, twoDots)) {
    // Other code here
} 
```

# c# - 如何检测 SUB 字符并将其从 C# 中的文本文件中删除？

> ID：12013201
> 
> 赞同：12
> 
> 时间：2012-08-17T21:07:59.337
> 
> 标签：c#, string, text

我正在编写一个程序来处理特殊的文本文件。其中一些文本文件以 SUB 字符（替代字符。它可能是 0x1A）结尾。如何使用 C# 检测此字符并将其从文本文件中删除？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-17T21:18:04.303

如果它在二进制数据中确实是 0x1A，并且如果您将其作为 ASCII 或 UTF-8 文件读取，则在 .NET 中读取时它应该以 U+001A 结尾。因此，您*可以*编写如下内容：

```
string text = File.ReadAllText("file.txt");
text = text.Replace("\u001a", "");
File.WriteAllText("file.txt", text); 
```

请注意，该`"\u001a"`部分是由单个字符组成的字符串：`\uxxxx`是单个 UTF-16 代码点的转义序列，给定的 Unicode 值以十六进制表示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T21:18:02.493

最简单的答案可能是正则表达式：

```
public static string RemoveAll(this string input, char toRemove)
{
   //produces a pattern like "\x1a+" which will match any occurrence
   //of one or more of the character with that hex value
   var pattern = @"\x" + ((int)toRemove).ToString("x") + "+";

   return Regex.Replace(input, pattern, String.Empty);
}

//usage
var cleanString = dirtyString.RemoveAll((char)0x1a); 
```

是的，您可以只传入 int，但这需要知道字符的整数值。使用 char 作为参数可以让您指定一个字面量或 char 变量，减少垃圾。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-17T13:47:27.300

C# 有一种检测控制字符（包括 SUB）的方法。请参阅 msdn：[https ://msdn.microsoft.com/en-us/library/9s05w2k9(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/9s05w2k9(v=vs.110).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T21:19:58.467

你也可以尝试这样的事情它应该工作

```
using (FileStream f = File.OpenRead("path\\file")) //Your filename + extension  
{
    using (StreamReader sr = new StreamReader(f)) 
    {
        string text = sr.ReadToEnd();
        text = text.Replace("\u001a", string.Empty);
    }
} 
```

# c# - 带有 GET 方法的 C# HTTP 正文

> ID：12013204
> 
> 赞同：7
> 
> 时间：2012-08-17T21:08:13.410
> 
> 标签：c#, .net, http

我使用的 API 要求我将方法设置为 GET 并包含消息正文。但是，当我尝试执行此操作时，出现以下错误：“无法发送具有此动词类型的内容主体”。我读到 HttpWebRequest 类不支持这一点，这是异常的原因。有解决办法吗？

这是我当前的代码：数据是一个 json 字符串，编码为字节数组

```
HttpWebRequest request = WebRequest.Create(url) as HttpWebRequest;
request.Method = "GET";
request.ContentType = "application/json";
request.ContentLength = data.Length;
using (Stream requestStream = request.GetRequestStream()) {
    requestStream.Write(data.ToArray(), 0, (int)data.Length);
} 
```

这是我试图模拟的 PHP 代码

```
<?php
$data = array("id" => "1234");
$data_string = json_encode($data);
$ch = curl_init('url');
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "GET");
curl_setopt($ch, CURLOPT_POSTFIELDS, $data_string);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, array(
    'Content-Type: application/json',
    'Content-Length: ' . strlen($data_string))
);
$result = curl_exec($ch);
var_dump($result);
?> 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T21:47:23.867

什么叫做主动违背 REST 的 API？“急速”？“忧虑”？

幸运的是，他们的服务并不关心动词是什么，而 PHP 代码只是碰巧使用 GET 并遇到了服务器没有阻止它的错误，这是一个非常小的错误，只要它行为正确，使用 POST 就可以了。

如果做不到这一点，你最好的办法是看看他们是否有另一种方法（如果它是一个自然适合 GET 的读取请求）接受 URI 中的参数，可能根据 RFC 2616 使用适当的标头，或者可以通过发布、获取等。

如果这不起作用，则必须在 TcpClient 之上构建一个 HTTP 客户端。这将是非常可怕的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-20T08:57:53.660

完全有可能，但您必须使用较新的 HttpClient 类：[https ://stackoverflow.com/a/47902348/70345](https://stackoverflow.com/a/47902348/70345)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-17T21:13:43.273

不建议使用 GET 请求发送内容。有关详细信息，请参阅此帖子：[HTTP GET with request body](https://stackoverflow.com/questions/978061/http-get-with-request-body)

这[就是罗伊菲尔丁要说的话题](http://tech.groups.yahoo.com/group/rest-discuss/message/9962)。

# json - FOSRestBundle，似乎无法弄清楚如何使 JSON 和 HTML 一起工作

> ID：12013213
> 
> 赞同：1
> 
> 时间：2012-08-17T21:08:36.487
> 
> 标签：json, rest, symfony, routing

我有一个博客网站。唯一的实体是博客帖子和用户。我想通过手机的 json GET 使这些博文可见。但我也想要一个默认的 GET 路由，它只返回 HTML（当然还有 CSS）。

当然，我环顾四周，但除了使网站仅输出 JSON 之外，我似乎找不到更深入 FOSRestBundle 的好教程（但当然，我可能做错了可怕的事情）。

现在，当我设置路由时，我只能将 JSON 作为默认路由。我想`.json`在 URL 中获取 JSON 输出，在默认路由时获取 HTML。这是我的路线的样子：

```
_welcome:
    pattern: /
    defaults: { _controller: TestTestingBundle:Main:homepage, _format: json } 
```

这是 MainController.php：

```
<?php

namespace Test\TestingBundle\Controller;
use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use FOS\RestBundle\View\View;  

class MainController extends Controller
{
    public function homepageAction()
    {
        $latestposts = $this->getLatestBlogs();
        $posts = $this->trimContent($latestposts);

        $view = View::create(array('lastblogs' => $posts))
                    ->setStatusCode(200)
                    ->setEngine('twig')
                    ->setTemplate(new TemplateReference('TestTestingBundle', 'Index', 'index'))
                    ->setData($latestposts);

        return $this->get('fos_rest.view_handler')->handle($view); 
    }
} 
```

截至目前，当我访问时，`localhost/Symfony/web/app_dev.php/`我得到了 JSON 输出。但如果我去`localhost/Symfony/web/app_dev.php/.json`. 我该怎么做？

如果您需要更多代码，请发表评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T11:25:31.503

如果您希望能够通过路由更改格式，请为其添加格式占位符：

```
_welcome:
    pattern: /.{_format}
    defaults: { _controller: TestTestingBundle:Main:homepage } 
```

# php - 警告：strtotime() 期望参数 1 是字符串

> ID：12013215
> 
> 赞同：0
> 
> 时间：2012-08-17T21:08:49.993
> 
> 标签：php, arrays, strtotime

您好我收到此错误：警告：strtotime() 期望参数 1 为字符串

当我尝试这样做时：

```
$holidays = array("2008-12-25","2008-12-26","2009-01-01");
$today = date('Y-m-d');
$ticketDate = date('Y-m-d',strtotime($this->getCreateDate()));
$dayCount = $this->getWorkingDays($ticketDate,$today,$holidays);
$dayToHour = $dayCount * 24;
$horas=$cfg->getGracePeriod();
print_r ($holidays); 
```

我明白了：`Array ( [0] => 2008-12-25 [1] => 2008-12-26 [2] => 2009-01-01 )` 但是当我更换

```
$holidays = array("2008-12-25","2008-12-26","2009-01-01"); 
```

有了这个：

```
$holidays = array($cfg->holydays()); 
```

我明白了：

```
Warning: strtotime() expects parameter 1 to be string, array given in file.php on line 262
Array ( [0] => Array ( [0] => 2012-08-21 [1] => 2012-08-20 [2] => 2012-08-10 ) ) 
```

你能帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T21:12:08.090

您将数组包装在数组中。看起来`$cfg->holydays()`已经返回了一个数组，所以一个简单的

```
$holidays = $cfg->holydays() 
```

会成功的

# cors - 如何将 CORS 预检缓存应用于整个域

> ID：12013216
> 
> 赞同：81
> 
> 时间：2012-08-17T21:08:57.573
> 
> 标签：cors

我正在构建一个使用 CORS 的 REST 应用程序。每个 REST 调用都是不同的，我发现在获取预检 OPTIONS 调用时有很大的开销。有没有办法缓存和应用预检 OPTIONS 结果，以便对同一域的任何后续调用都使用缓存的响应？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-08-18T20:25:17.083

预检只能应用于请求，不能应用于整个域。我在邮件列表中提出了同样的问题，并且存在安全问题。这是整个线程： http: [//lists.w3.org/Archives/Public/public-webapps/2012AprJun/0228.html](http://lists.w3.org/Archives/Public/public-webapps/2012AprJun/0228.html)

如果您想限制预检请求的数量，需要考虑一些事项。首先请注意，基于 WebKit/Blink 的浏览器将最大预检缓存设置为 10 分钟：

[https://github.com/WebKit/webkit/blob/master/Source/WebCore/loader/CrossOriginPreflightResultCache.cpp](https://github.com/WebKit/webkit/blob/master/Source/WebCore/loader/CrossOriginPreflightResultCache.cpp) [https://chromium.googlesource.com/chromium/blink/+/master/Source/core/loader/CrossOriginPreflightResultCache .cpp](https://chromium.googlesource.com/chromium/blink/+/master/Source/core/loader/CrossOriginPreflightResultCache.cpp)

（我不确定这是否适用于其他浏览器）。因此，虽然您应该始终设置 Access-Control-Max-Age 标头，但最大值为 10 分钟。

接下来请注意，不可能避免对 PUT/DELETE 请求进行预检。因此，更新/删除 API 至少需要每 10 分钟进行一次预检。

在 GET/POST 上，尽可能避免使用自定义标头，因为这些仍会触发预检。如果您的 API 返回 JSON，请注意“application/json”的 Content-Type 也会触发预检。

如果你愿意改变你的 API 的“RESTful”程度，你可以尝试更多的东西。一种是使用不需要预检的 Content-Type，例如“text/plain”。自定义标头始终触发预检，因此如果您有任何自定义标头，您可以将它们移动到查询参数中。在极端情况下，您可以使用 JSON-RPC 之类的协议，其中所有请求都发送到单个端点。

老实说，由于浏览器的预检缓存限制为 10 分钟，以及 REST 的资源 url，预检缓存相当无用。在长时间运行的应用程序过程中，您几乎无法限制预检。我希望 CORS 规范的作者将来会尝试解决这个问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-11-20T14:55:26.310

尝试使用 xDomain

如果使用 Angular 或 jQuery，我的设置非常简单。在您的应用服务器上，按照以下链接的帮助中的说明添加 proxy.html。在您的“客户端”和中提琴上添加一些引用 js 文件的标签，不再进行预检。这包含在 iframe 中以避免需要进行 cors 检查。

[https://github.com/jpilora/xdomain](https://github.com/jpillora/xdomain)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-26T05:08:28.330

一种方法是您可以将所有 API 调用指向与前端相同的域。在前端服务器上设置 nginx 以仅将 API 调用转发到 API 服务器。这将删除所有飞行前呼叫。

# java - CountDownTimer 和 .setBackgroundColor() / .setTextColor() 的问题

> ID：12013218
> 
> 赞同：1
> 
> 时间：2012-08-17T21:09:03.643
> 
> 标签：java, android, countdowntimer

我到处寻找答案，但找不到适合我情况的答案。我有几个问题，也想知道如何包括毫秒倒计时。我正在尝试获取格式为 00.00（秒.毫秒）的倒数计时器。按钮用于启动计时器。我使用的时间取决于按下的按钮，5、10、15、30 或 90 秒。我只是说它的硬编码为 5000 毫秒，以便现在更简单。

```
long timeSecs = 5000; // really timeSecs is dynamic but for the sake of simplicity 
long countDownInterval = 1000; // this is a static value
TextView TVcountDown = (TextView)findViewById(R.id.TVcountDown);

public void createTimer() {

    new CountDownTimer(timeSecs, countDownInterval) {
        public void onTick(long millisUntilFinished) {
            TVcountDown.setText(millisUntilFinished / 1000); // error here on
//.setText unless I cast to an int, which all values are long so I'm not sure why
        }

        @Override
        public void onFinish() {
            TVcountDown.setBackgroundColor(R.color.solid_red); // error here
            TVcountDown.setTextColor(R.color.white);  // error here
            TVcountDown.setText("Expired"); // it will make it here
      // It doesn't count down, just goes straight to onFinish() and displays "Expired"
        }

    }.start();
} 
```

提前致谢。我已经用头撞桌子有一段时间了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T21:17:43.657

尝试这个。对于 setText

```
TVcountDown.setText("" + (millisUntilFinished / 1000)); 
```

对于颜色

```
Resources res = getResources();
TVcountDown.setBackgroundColor(res.getcolor(R.color.solid_red));
TVcountDown.setTextColor(res.getcolor(R.color.white)); 
```

您应该在设置之前从颜色资源中获取颜色。

# python - Celery 为每个任务创建一个新连接

> ID：12013220
> 
> 赞同：22
> 
> 时间：2012-08-17T21:09:13.760
> 
> 标签：python, django, heroku, redis, celery

我使用 Celery 和 Redis 来运行一些后台任务，但是每次调用任务时，它都会创建一个到 Redis 的新连接。我在 Heroku 上，我的 Redis to Go 计划允许 10 个连接。我很快就达到了这个限制并得到了“达到最大客户数”的错误。

如何确保 Celery 在单个连接上对任务进行排队，而不是每次都打开一个新连接？

**编辑**- 包括完整的追溯

```
File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/handlers/base.py", line 111, in get_response
   response = callback(request, *callback_args, **callback_kwargs)

 File "/app/.heroku/venv/lib/python2.7/site-packages/newrelic-1.4.0.137/newrelic/api/object_wrapper.py", line 166, in __call__
   self._nr_instance, args, kwargs)

 File "/app/.heroku/venv/lib/python2.7/site-packages/newrelic-1.4.0.137/newrelic/hooks/framework_django.py", line 447, in wrapper
   return wrapped(*args, **kwargs)

 File "/app/.heroku/venv/lib/python2.7/site-packages/django/views/decorators/csrf.py", line 77, in wrapped_view
   return view_func(*args, **kwargs)

 File "/app/feedback/views.py", line 264, in zencoder_webhook_handler
   tasks.process_zencoder_notification.delay(webhook)

 File "/app/.heroku/venv/lib/python2.7/site-packages/celery/app/task.py", line 343, in delay
   return self.apply_async(args, kwargs)

 File "/app/.heroku/venv/lib/python2.7/site-packages/celery/app/task.py", line 458, in apply_async
   with app.producer_or_acquire(producer) as P:

 File "/usr/local/lib/python2.7/contextlib.py", line 17, in __enter__
   return self.gen.next()

 File "/app/.heroku/venv/lib/python2.7/site-packages/celery/app/base.py", line 247, in producer_or_acquire
   with self.amqp.producer_pool.acquire(block=True) as producer:

 File "/app/.heroku/venv/lib/python2.7/site-packages/kombu/connection.py", line 705, in acquire
   R = self.prepare(R)

 File "/app/.heroku/venv/lib/python2.7/site-packages/kombu/pools.py", line 54, in prepare
   p = p()

 File "/app/.heroku/venv/lib/python2.7/site-packages/kombu/pools.py", line 45, in <lambda>
   return lambda: self.create_producer()

 File "/app/.heroku/venv/lib/python2.7/site-packages/kombu/pools.py", line 42, in create_producer
   return self.Producer(self._acquire_connection())

 File "/app/.heroku/venv/lib/python2.7/site-packages/celery/app/amqp.py", line 160, in __init__
   super(TaskProducer, self).__init__(channel, exchange, *args, **kwargs)

 File "/app/.heroku/venv/lib/python2.7/site-packages/kombu/messaging.py", line 83, in __init__
   self.revive(self.channel)

 File "/app/.heroku/venv/lib/python2.7/site-packages/kombu/messaging.py", line 174, in revive
   channel = self.channel = maybe_channel(channel)

 File "/app/.heroku/venv/lib/python2.7/site-packages/kombu/connection.py", line 879, in maybe_channel
   return channel.default_channel

 File "/app/.heroku/venv/lib/python2.7/site-packages/kombu/connection.py", line 617, in default_channel
   self.connection

 File "/app/.heroku/venv/lib/python2.7/site-packages/kombu/connection.py", line 610, in connection
   self._connection = self._establish_connection()

 File "/app/.heroku/venv/lib/python2.7/site-packages/kombu/connection.py", line 569, in _establish_connection
   conn = self.transport.establish_connection()

 File "/app/.heroku/venv/lib/python2.7/site-packages/kombu/transport/virtual/__init__.py", line 722, in establish_connection
   self._avail_channels.append(self.create_channel(self))

 File "/app/.heroku/venv/lib/python2.7/site-packages/kombu/transport/virtual/__init__.py", line 705, in create_channel
   channel = self.Channel(connection)

 File "/app/.heroku/venv/lib/python2.7/site-packages/kombu/transport/redis.py", line 271, in __init__
   self.client.info()

 File "/app/.heroku/venv/lib/python2.7/site-packages/newrelic-1.4.0.137/newrelic/api/object_wrapper.py", line 166, in __call__
   self._nr_instance, args, kwargs)

 File "/app/.heroku/venv/lib/python2.7/site-packages/newrelic-1.4.0.137/newrelic/api/function_trace.py", line 81, in literal_wrapper
   return wrapped(*args, **kwargs)

 File "/app/.heroku/venv/lib/python2.7/site-packages/redis/client.py", line 344, in info
   return self.execute_command('INFO')

 File "/app/.heroku/venv/lib/python2.7/site-packages/kombu/transport/redis.py", line 536, in execute_command
   conn.send_command(*args)

 File "/app/.heroku/venv/lib/python2.7/site-packages/redis/connection.py", line 273, in send_command
   self.send_packed_command(self.pack_command(*args))

 File "/app/.heroku/venv/lib/python2.7/site-packages/redis/connection.py", line 256, in send_packed_command
   self.connect()

 File "/app/.heroku/venv/lib/python2.7/site-packages/newrelic-1.4.0.137/newrelic/api/object_wrapper.py", line 166, in __call__
   self._nr_instance, args, kwargs)

 File "/app/.heroku/venv/lib/python2.7/site-packages/newrelic-1.4.0.137/newrelic/api/function_trace.py", line 81, in literal_wrapper
   return wrapped(*args, **kwargs)

 File "/app/.heroku/venv/lib/python2.7/site-packages/redis/connection.py", line 207, in connect
   self.on_connect()

 File "/app/.heroku/venv/lib/python2.7/site-packages/redis/connection.py", line 233, in on_connect
   if self.read_response() != 'OK':

 File "/app/.heroku/venv/lib/python2.7/site-packages/redis/connection.py", line 283, in read_response
   raise response

ResponseError: max number of clients reached 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-01-24T07:23:01.777

我希望我使用的是 Redis，因为有一个特定的选项可以限制连接数：`CELERY_REDIS_MAX_CONNECTIONS`.

*   [http://docs.celeryproject.org/en/3.0/configuration.html#celery-redis-max-connections](http://docs.celeryproject.org/en/3.0/configuration.html#celery-redis-max-connections)（适用于 3.0）
*   [http://docs.celeryproject.org/en/latest/configuration.html#celery-redis-max-connections](http://docs.celeryproject.org/en/latest/configuration.html#celery-redis-max-connections)（适用于 3.1）
*   [http://docs.celeryproject.org/en/master/configuration.html#celery-redis-max-connections](http://docs.celeryproject.org/en/master/configuration.html#celery-redis-max-connections)（用于开发）

`MongoDB`具有类似的后端设置。

鉴于这些后端设置，我不知道`BROKER_POOL_LIMIT`实际做了什么。希望能`CELERY_REDIS_MAX_CONNECTIONS`解决您的问题。

我是使用 CloudAMQP 的人之一，AMQP 后端没有自己的连接限制参数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-05-09T11:04:02.690

我在使用 CloudAMQP 的 Heroku 上遇到了同样的问题。我不知道为什么，但是在为`BROKER_POOL_LIMIT`设置分配低整数时我没有运气。

最终，我发现通过设置`BROKER_POOL_LIMIT=None`或`BROKER_POOL_LIMIT=0`我的问题得到了缓解。根据 Celery 文档，这会禁用连接池。到目前为止，这对我来说不是一个明显的问题，但我不确定它是否适合你。

相关信息链接：[http ://celery.readthedocs.org/en/latest/configuration.html#broker-pool-limit](http://celery.readthedocs.org/en/latest/configuration.html#broker-pool-limit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-19T16:23:46.533

尝试这些设置：

```
CELERY_IGNORE_RESULT = True
CELERY_STORE_ERRORS_EVEN_IF_IGNORED = True 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-03T03:18:40.917

我有一个类似的问题，涉及连接数和 Celery。它不在 Heroku 上，但它是 Mongo 而不是 Redis。

我在任务模块级别启动了任务功能定义之外的连接。至少对于 Mongo 来说，这允许任务共享连接。

希望有帮助。

[https://github.com/instituteofdesign/wander/blob/master/wander/tasks.py](https://github.com/instituteofdesign/wander/blob/master/wander/tasks.py)

```
mongoengine.connect('stored_messages')

@celery.task(default_retry_delay = 61)
def pull(settings, google_settings, user, folder, messageid):
    '''
    Pulls a message from zimbra and stores it in Mongo
    '''

    try:
        imap = imap_connect(settings, user)
        imap.select(folder, True)
    ....... 
```

# java - 将外部数据插入persistence.xml

> ID：12013222
> 
> 赞同：4
> 
> 时间：2012-08-17T21:09:37.163
> 
> 标签：java, xml, spring

我希望我的 persistence.xml 动态设置它的一些属性，具体来说：

```
<property name="hibernate.connection.password" value="password"/>
<property name="hibernate.connection.username" value="username"/> 
```

我可以构建一个可以为我提供所需数据的类，但我不知道如何以如下方式设置该类：

```
<property name="hibernate.connection.password" value="${my.clazz.pass}"/>
<property name="hibernate.connection.username" value="${my.clazz.user}"/> 
```

我试图像这样设置课程

```
public class clazz{

  String pass;
  String user;

  public clazz(){
    //do stuff to set pass and user
  }

  //getter/setter
} 
```

但这不起作用。我在这里或谷歌都没有找到方法，但我已经多次看到 ${my.clazz.smth} 方式。

那么，我该如何设置呢？:)

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T16:26:29.660

所以，前一阵子解决了这个问题，但我仍然没有回答：

Anthony Accioly 为我指出了正确的方向：

我将此添加到我的 applicationContext.xml 的 entityManagerFactory

```
<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceUnitPostProcessors">
        <bean class="my.package.SetupDatabase">
        </bean>
    </property>
    //the other stuff
</bean> 
```

对应的类，在这种情况下我使用hibernate：

```
package my.package;

public class SetupDatabase implements PersistenceUnitPostProcessor {

    private String username;
    private String password;
    private String dbserver;

    public void SetupDatabase(){
        //do stuff to obtain needed information
    }

    public void postProcessPersistenceUnitInfo(MutablePersistenceUnitInfo pui) {
        pui.getProperties().setProperty("hibernate.connection.username", username );
        pui.getProperties().setProperty("hibernate.connection.password", password);
        pui.getProperties().setProperty("hibernate.connection.url", dbserver ); 
    }

} 
```

这种方式在启动整个过程时只需完成一次设置，但所需的数据可能是“外包”的。

再次感谢您为我指明正确的方向！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T21:43:59.730

您引用的值占位符`${my.clazz.smth}`通常是从属性文件中读取的，而不是直接从类中读取的。

这是使用 Spring 的[PropertyPlaceholderConfigurer](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/beans/factory/config/PropertyPlaceholderConfigurer.html)完成的。

这是一个结合了 Hibernate 和 Spring 的项目[示例。](http://codeyard.wordpress.com/2012/07/31/spring-hibernate-end-to-end-integration-using-maven-spring-mvc-jsp-oracle11g-a-step-by-step-guide/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T22:46:07.853

如果您确实需要将配置延迟到运行时（例如，从外部源（例如 Web 服务）获取数据库凭据），您可以使用[Hibernate API Programatic Configuration](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch03.html#configuration-programmatic)来完成，特别是[Ejb3Configuration](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/ejb/Ejb3Configuration.html)用于旧版本的 Hibernate 或[ServiceRegistryBuilder](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/service/ServiceRegistryBuilder.html)（v 4 。X）...

但请注意，据我所知，没有办法动态更新`PersintenceUnit`. 每次需要更改其属性时，您都必须`EntityManagerFactory`从一个新实例（一个非常昂贵的操作）构建另一个。`Configuration`无论如何，除非您有充分的理由，不要从您的应用程序管理数据库凭据，而是将其委托给 JNDI-Bound `DataSource`。

```
Ejb3Configuration cfg = new Ejb3Configuration()
  // Add classes, other properties, etc
  .setProperty("hibernate.connection.password", "xxxx")
  .setProperty("hibernate.connection.username", "yyyy"); 

EntityManagerFactory emf= cfg.buildEntityManagerFactory(); 
```

# perl - 检查模块与不同 Perl 版本的兼容性

> ID：12013232
> 
> 赞同：2
> 
> 时间：2012-08-17T21:10:28.357
> 
> 标签：perl, perl-module

是否有命令行开关或任何其他简单的方法可以检查我的模块与不同版本的 perl 的兼容性？我了解如果我将其放在`use 5.6.1;`脚本的顶部，该脚本将禁用 5.6.1 之后的所有功能。但是如果我有一个模块使用了其他几个模块等等，我需要一种更快的方法来检查我的 Makefile.PL 或 Build.PL 中需要的 Perl 的最低版本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T21:31:52.870

`use v5.6.1`如果使用的 Perl 版本比指定的版本旧，类似的将主要引发编译时错误。此外，启用了相应的功能包，如果版本为 v5.11 或更高版本，则`strict`pragma 也已启用。

`use v5.6.1`不会使 Perl v5.8 的行为与 v5.6.1 一样，并且没有办法实现这一点。即使在以后的版本中，也只有可以使用`feature`编译指示控制的功能被调整到给定版本。

要测试您的模块，您必须安装每个不同版本的 Perl 并单独测试它

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-18T01:07:34.310

针对[`Perl::MinimumVersion`](http://search.cpan.org/perldoc?Perl%3a%3aMinimumVersion).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T21:26:44.897

您可以安装不同版本的 perl 并针对它们进行测试。我将它们手动安装在不同的位置，但如果您想自动化，请使用 perlbrew。

可能有脚本或策略试图找到所需的最低 perl 版本，但几年前我尝试获取和汇总我发现的最低 perl 版本笨重且不可靠。这当然并不意味着它不存在或无法完成，只是我找不到它。

# java - Eclipse 插件项目不显示应用程序模型中添加的窗口

> ID：12013238
> 
> 赞同：2
> 
> 时间：2012-08-17T21:11:30.847
> 
> 标签：java, eclipse, eclipse-plugin, swt, eclipse-rcp

研究 Eclipse 4 RCP。
做了以下事情：

1.  创建了一个`Eclipse Plugin Project`（没有`Rich Client`未选中， `Actvator`未选中），因此没有下的类`/src`
2.  创建了一个`Product Configuration`. 选择的应用是 `E4Application`
3.  创建`Feature Project`并包含我在步骤 1 中创建的插件
4.  在`.product`文件中，我检查了要基于的配置 `features`。在我添加的依赖项选项卡`org.eclipse.e4.rcp`和`feature`我在步骤 3 中创建的（也添加了所需的依赖项）
5.  使用容器创建`Application Model`为步骤 1 的插件项目并添加了一个`New Trimmed Window`

全部保存并尝试启动`Eclipse Application`
No 窗口正在显示，我没有在控制台中看到错误。
知道我在这里缺少什么或如何调试吗？

**更新：**
我正在关注：[10.教程：从插件到 Eclipse 4 应用程序](http://www.vogella.com/articles/EclipseRCP/article.html#plugin_creatinge4)是失败
的`10.6\. Start application`

**更新 2：**
我注意到在**我的工作区之外**创建了一些目录，名称为`runtime-todo.product`（即插件名称）。
进入`runtime-todo.product\.metadata\.plugins\org.eclipse.e4.workbench`并删除`workbench`窗口出现了。
为什么这些目录是在我的工作区之外创建的，这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T22:24:22.370

我按照您的所有步骤在应用程序启动后得到了预期的空窗口，所以这里有些奇怪。

您可以尝试：

*   `.metadata`在运行时工作区的文件夹中查找错误日志文件
*   删除文件`.metadata\.plugins\org.eclipse.e4.workbench\workbench.xmi`
*   `-clean`作为程序参数添加到您的产品启动配置

尝试再次启动应用程序。

如果这没有帮助，您可以设置一个断点`org.eclipse.e4.ui.internal.workbench.swt.E4Application.loadApplicationModel`来查看 Eclipse 尝试加载您的应用程序模型时会发生什么（另请参阅[Eclipse 4 Source](http://www.vogella.com/articles/Eclipse4Source/article.html#source)）。我希望这有帮助！

**[更新]：** 当您启动应用程序时，会创建一个运行时工作区。在这里，存储了应用程序的所有元数据，例如设置和资源。例如，在`.metadata\.plugins\org.eclipse.e4.workbench\workbench.xmi`应用程序模型的用户设置中存储。

有时在开发过程中，此工作区可能会损坏（例如，在保存设置之前调试时停止应用程序等）。

当您查看应用程序的运行配置时，您可以看到运行时工作区的位置。在`Main`选项卡中，您可以查看（并更改）工作区数据位置。您应该将此运行时工作区与您的开发工作区分开。

**[更新 2]：** 关于`workbench.xmi`文件角色的信息可以在这里找到：[构建运行时应用程序模型](http://www.vogella.com/articles/Eclipse4Modularity/article.html#contributecomponents_userchanges)。Lars Vogel 的网页在[Eclipse 插件和 Eclipse RCP 教程中提供了很多有用的 Eclipse 教程](http://www.vogella.com/eclipse.html)。

[Eclipse 帮助](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.use)页面允许您浏览用户和开发人员指南或搜索特定主题。有关 Eclipse 启动器和运行时的信息可以在此处找到`Plug-in Development Environment Guide > Reference > Launchers > Eclipse Application Launcher`。在下面查找`Main Tab`有关工作区数据的说明。

Eclipse 变量在应用程序的运行配置对话框中进行了说明。在主选项卡中，查找`Variables...`按钮。`Variable Description`当您选择一个变量时，会在该字段中给出解释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T15:22:34.637

您可以在*运行配置中检查***Clear**标志或在*产品定义*中指定...如[Lars Vogel 教程中所述](http://www.vogella.com/articles/Eclipse3RCP/article.html#runconfiguration_problems)（在表 2 中搜索问题“***应用程序模型更改未反映在 Eclipse 4 应用程序***中”）。*`-clearPersistedState`*

# c# - 为引用的程序集创建部分类

> ID：12013245
> 
> 赞同：3
> 
> 时间：2012-08-17T21:11:50.930
> 
> 标签：c#, partial-classes

> **可能重复：**
> [是否可以在两个项目中声明部分类](https://stackoverflow.com/questions/8384084/is-it-possible-to-declare-a-partial-class-in-two-projects)

说在我的项目解决方案中，我有两个项目，ProjectA 和 ProjectB。项目A创建：MyClassA

然后 ProjectB 引用了 ProjectA。是否可以在 ProjectB 中为 ProjectA 的 MyClassA 创建部分类？

我的项目 A 的 MyClassA：

```
namespace TestPartial
{
    public class MyClassA
    {
        public string MyName { get; set; }
    }
} 
```

我的项目 B 的 MyClassB：

```
namespace TestPartial
{
    public partial class MyClassA
    {
        public DateTime BirthDate { get; set; }
    }

} 
```

但显然这两个属性都没有合并....所以我猜只有它们在同一个项目中才有效？或者有一些解决方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T21:14:07.283

不，部分类不能跨越多个项目/程序集。

来自 MSDN[部分类定义 - 限制](http://msdn.microsoft.com/en-us/library/wa80x488%28v=vs.80%29.aspx) ：

> 所有属于同一类型的部分类型定义必须在同一程序集和同一模块（.exe 或 .dll 文件）中定义。部分定义不能跨越多个模块。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T21:14:40.107

> 是否可以在 ProjectB 中为 ProjectA 的 MyClassA 创建部分类？

不。部分类只是一种*语言级别*的功能，用于组合多个*源*文件以创建单个输出类。这不是 CLR 知道的，您不能在程序集之间拆*分类*。

如果您可以提供有关您要达到的目标的更多信息，我们可能会推荐替代方案。您可能想要使用组合，或者*可能是*继承。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T21:14:37.510

不，必须在同一程序集（dll 或 exe）中完全定义部分类。您不能拥有跨两个程序集的部分类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T21:16:04.160

这不是 Jon Skeet 所说的，这可能意味着它不是。

请参阅：[您是否应该跨项目使用部分类？](https://stackoverflow.com/questions/309939/should-you-use-a-partial-class-across-projects)

# php - 使用 XMLHTTPREQUEST 对象填充下拉菜单

> ID：12013249
> 
> 赞同：0
> 
> 时间：2012-08-17T21:12:06.810
> 
> 标签：php, javascript, drop-down-menu, xmlhttprequest

我的目标是有一个包含美国各州的下拉菜单，在选择一个州后，第二个下拉菜单将填充该州的城市。由于我不想将所有城市存储在我的数据库中，我有一个名为 list-of-cities.php 的 PHP 文件，它将存储来自所有州的城市数组。

以下代码是使 XMLHTTPREQUEST 对象从 list-of-cities.php 以及下拉表单请求信息的 JS 和 HTML。函数 AddToOptionsList() 将从 XMLHTTPREQUEST 对象的 responseText（它是 list-of-cities.php 中的数组中的一个城市）接收到的值添加到“cities”下拉菜单中。

```
 function PopulateCities() {

                var statesList = document.frmMain.states;

                var stateValue = statesList[statesList.selectedIndex].value;

                    var i = 0;
                    do {
                    //create new XMLHTTPRequest object
                    if (window.XMLHttpRequest)
                      {// code for IE7+, Firefox, Chrome, Opera, Safari
                      xmlhttp=new XMLHttpRequest();
                      }
                    else
                      {// code for IE6, IE5
                      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
                      }

                      xmlhttp.onreadystatechange=function() {
                          if (xmlhttp.readyState==4 )
                            {
                            var responseText = xmlhttp.responseText;
                            if( responseText == null){
                                //the request sent a null value from the cities array therefore we reached the end of it
                                break;
                            } else{ 
                               //Add the value received from the response to the "cities" option list
                            AddToOptionList(document.frmMain.cities, i, responseText);
                            }
                            }
                      }
                    xmlhttp.open("GET","http://localhost//wp-content/themes/list-of-cities.php?q="i+stateValue,false);
                    xmlhttp.send();
                    i++;
                    } 
                    while(true);
                }

                function AddToOptionList(OptionList, OptionValue, OptionText) {
                // Add option to the bottom of the list
                OptionList[OptionList.length] = new Option(OptionText, OptionValue);
                }

                <form name="frmMain">
                <div id="choose_state">
                    Select a state from the drop down menu:<select name="states" onChange="PopulateCities();">
                        <option value="choose_state" selected="selected">Choose a state</option>
                        <option value="florida">Florida</option>
                        <option value="newyork">New York</option>
                        <option value="california">Callifornia</option>
                        <option value="northcarolina">North Carolina</option>
                    </select>
                </div><!--choose_state -->

                <select name="cities" >
                <option> Choose a city</option>
                </select>

                </form> 
```

以下是 list-of-cities.php 代码，目前只有佛罗里达州的城市数组用于测试目的。从 XMLHTTPREQUEST 对象传递的 $q 参数的格式为“i + 州名”，以便跟踪城市数组中的位置。

```
 <?php
    $florida[]="Gainesville";
    $florida[]="Miami";
    $florida[]="Tampa";
    $florida[]="Orlando";
    $florida[]="Jacksonville";
    $florida[]="Melbourne";
    $florida[]="Tallahassee";

    //$newyork[] = "Manhattan";
    //$newyork[] = "Brooklynn";
    //$newyork[] = "Queens";

    //get the q parameter from URL (i + State name)
    $q=$_GET["q"];

    $i = substr($q,0,1); //first char of $q contains the position in the city array
    $state = substr($q, 1, strlen($q)-1);   //gives the state name from $q
    if( $state == "florida" ) {
       echo $florida[$i];
    } 
```

当前，所有这些代码一起用于使用 $florida[] 数组中的所有 7 个城市填充下拉菜单。但是，我目前正在尝试通过等待未正常工作的城市数组中的空值来结束 while() 循环，因此我需要帮助确定 JS 代码中 $florida[] 数组的大小，以便我可以结束 while() 循环并停止填充下拉菜单。

非常感谢任何帮助或提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T21:35:18.907

为什么不分别使用 JSON 和 jQuery？

[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

[http://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

**PHP**

```
<?php
$someArray = array();

$someArray[] = 'value';
$someArray[] = 'value';
$someArray[] = 'value';
$someArray[] = 'value';
$someArray[] = 'value';

echo json_encode($someArray);
?> 
```

**jQuery**

```
$.getJSON('http://www.example.com', { state: 'californie' }, function(data) {
    $.each(data, function(index, value){

        alert(index + ' ' + value);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T21:36:09.130

哇。你工作太辛苦了。首先，我会推荐 jQuery 的 AJAX 功能。

此外，在 JSON 中寻找这样的东西也没有什么坏处。JSON 非常适用于 PHP 数组 :)

基本上，您将让他们选择一个州，该州将向 php 脚本发送一个 ajax 请求，该脚本将返回一组城市。

所以，首先在他们选择一个状态时发送一个 AJAX 请求。接下来，让 php 返回一个 JSON 数组。然后遍历 JSON 数组，将其附加到新的选择框。JSON 非常简单，所以不用担心。

# php - 使用php登录时隐藏div

> ID：12013255
> 
> 赞同：0
> 
> 时间：2012-08-17T21:13:02.333
> 
> 标签：php, html, show-hide

一旦用户登录了我的在线商店的帐户（使用 cartweaver 4 php 构建），我试图隐藏一个 div，但我似乎无法让它工作。

用于定义用户是否登录的 php 代码如下：

```
if(!strlen($_SESSION["cwclient"]["cwCustomerID"]) ||
    $_SESSION["cwclient"]["cwCustomerID"] === 0 ||
    $_SESSION["cwclient"]["cwCustomerID"] === "0" ||
    $_SESSION["cwclient"]["cwCustomerType"] == 0 ||
    (isset($_SESSION["cwclient"]["cwCustomerCheckout"]) &&
       strtolower($_SESSION["cwclient"]["cwCustomerCheckout"]) == "guest")) 
```

并且我想在登录时隐藏的 div 包含一个表，已被赋予一个 id 和类：

```
 <div id="newcustomertable" class='newcustomer'> 
```

我尝试使用 css 应用此方法：[Show Hide div if, if statement is true](https://stackoverflow.com/questions/7020873/show-hide-div-if-if-statement-is-true)

但这最终在我的测试服务器上给了我一个未定义的变量错误。

我承认我是一个 php 新手，所以如果任何能够更了解这一点的人都可以提供帮助并可能找到解决方案，我将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T21:16:39.340

您至少有 3 个变量可能会引发未定义变量警告：

```
$_SESSION["cwclient"]
$_SESSION["cwclient"]["cwCustomerID"]
$_SESSION["cwclient"]["cwCustomerType"] 
```

在进行任何测试之前，您需要 isset() 中的每一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T21:17:38.010

对于初学者，PHP 中的 strlen 函数返回一个 INT，而不是布尔值。

更改自：

```
(!strlen($_SESSION["cwclient"]["cwCustomerID"]) 
```

到：

```
(strlen($_SESSION["cwclient"]["cwCustomerID"]) > 0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T21:25:36.530

首先，这不仅可以简化为以下 if 语句以使其更容易

```
 if (($_SESSION["cwclient"]["cwCustomerID"]<>NULL)&&($_SESSION["cwclient"]["cwCustomerCheckout"]) == "guest")) { 
#code here 
} 
```

其次，如果他们已登录，则隐藏 div 你可以这样做

```
 if (($_SESSION["cwclient"]["cwCustomerID"]<>NULL)&&($_SESSION["cwclient"]["cwCustomerCheckout"]) == "guest")) { 
    $shouldhide="style='visibility:hidden;'";
    } else {
$shouldhide=""; 
}
echo"<div id='hidethis' $shouldhide>"; 
```

尽管如果内容存在安全风险，最好不要输出它，因为它在源代码中仍然可见。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T21:52:58.813

```
<div id ="newcustomertable"></div>
<?
if(!isset($_SESSION["cwclient"]["cwCustomerID"]) || 
!strlen(@$_SESSION["cwclient"]["cwCustomerID"]) ||
@$_SESSION["cwclient"]["cwCustomerID"] === 0 ||
@$_SESSION["cwclient"]["cwCustomerType"] == 0 ||
(isset($_SESSION["cwclient"]["cwCustomerCheckout"]) &&
strtolower(@$_SESSION["cwclient"]["cwCustomerCheckout"]) == "guest"))
{
?>
<script>
document.getElementById("newcustomertable").style.display = "none";
</script>
<?  
}
?> 
```

确保条件检查是在 div 元素被渲染之后进行的。因为如果将它放在元素之前，页面将不会完全呈现，因此脚本将无法获取要隐藏的 div。

REVERSE Con​​dition 基于 OP 的请求。我知道这是一个kluge，伙计们。不要喷我！

```
<div id ="newcustomertable"></div>
<?
if(!isset($_SESSION["cwclient"]["cwCustomerID"]) || 
!strlen(@$_SESSION["cwclient"]["cwCustomerID"]) ||
@$_SESSION["cwclient"]["cwCustomerID"] === 0 ||
@$_SESSION["cwclient"]["cwCustomerType"] == 0 ||
(isset($_SESSION["cwclient"]["cwCustomerCheckout"]) &&
strtolower(@$_SESSION["cwclient"]["cwCustomerCheckout"]) == "guest"))
{
 //do nothing
}
else
{
?>
<script>
document.getElementById("newcustomertable").style.display = "none";
</script>
<?  
}
?> 
```

# ruby-on-rails - 无法在 Heroku 上部署 twitter-bootstrap-rails gem，因为 ruby racer 编译失败

> ID：12013259
> 
> 赞同：0
> 
> 时间：2012-08-17T21:13:24.237
> 
> 标签：ruby-on-rails, heroku, ruby-on-rails-3.2, twitter-bootstrap-rails, therubyracer

我的 Gemfile 中有以下 gem：

```
gem 'twitter-bootstrap-rails', :github => 'seyhunak/twitter-bootstrap-rails' 
```

这是为这个项目：[https ://github.com/seyhunak/twitter-bootstrap-rails](https://github.com/seyhunak/twitter-bootstrap-rails)

依赖项之一是 therubyracer ( [https://github.com/seyhunak/twitter-bootstrap-rails/blob/master/twitter-bootstrap-rails.gemspec#L27](https://github.com/seyhunak/twitter-bootstrap-rails/blob/master/twitter-bootstrap-rails.gemspec#L27) )：

```
s.add_dependency          'therubyracer', '>= 0.11.0beta5' 
```

但是，当我尝试将其推送到 Heroku 时，出现以下错误：

```
Installing therubyracer (0.11.0beta8) with native extensions
       Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
       /usr/local/bin/ruby extconf.rb
       checking for main() in -lpthread... yes
       creating Makefile
       make
       g++ -I. -I/tmp/build_1feat0v36ur6g/vendor/bundle/ruby/1.9.1/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/include -I/usr/local/include/ruby-1.9.1/x86_64-linux -I/usr/local/include/ruby-1.9.1/ruby/backward -I/usr/local/include/ruby-1.9.1 -I.   -Wall -g -rdynamic -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long   -o template.o -c template.cc
       g++ -I. -I/tmp/build_1feat0v36ur6g/vendor/bundle/ruby/1.9.1/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/include -I/usr/local/include/ruby-1.9.1/x86_64-linux -I/usr/local/include/ruby-1.9.1/ruby/backward -I/usr/local/include/ruby-1.9.1 -I.   -Wall -g -rdynamic -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long   -o array.o -c array.cc
       g++ -I. -I/tmp/build_1feat0v36ur6g/vendor/bundle/ruby/1.9.1/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/include -I/usr/local/include/ruby-1.9.1/x86_64-linux -I/usr/local/include/ruby-1.9.1/ruby/backward -I/usr/local/include/ruby-1.9.1 -I.   -Wall -g -rdynamic -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long   -o locker.o -c locker.cc
       g++ -I. -I/tmp/build_1feat0v36ur6g/vendor/bundle/ruby/1.9.1/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/include -I/usr/local/include/ruby-1.9.1/x86_64-linux -I/usr/local/include/ruby-1.9.1/ruby/backward -I/usr/local/include/ruby-1.9.1 -I.   -Wall -g -rdynamic -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long   -o constraints.o -c constraints.cc
       g++ -I. -I/tmp/build_1feat0v36ur6g/vendor/bundle/ruby/1.9.1/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/include -I/usr/local/include/ruby-1.9.1/x86_64-linux -I/usr/local/include/ruby-1.9.1/ruby/backward -I/usr/local/include/ruby-1.9.1 -I.   -Wall -g -rdynamic -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long   -o exception.o -c exception.cc
       g++ -I. -I/tmp/build_1feat0v36ur6g/vendor/bundle/ruby/1.9.1/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/include -I/usr/local/include/ruby-1.9.1/x86_64-linux -I/usr/local/include/ruby-1.9.1/ruby/backward -I/usr/local/include/ruby-1.9.1 -I.   -Wall -g -rdynamic -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long   -o context.o -c context.cc
       g++ -I. -I/tmp/build_1feat0v36ur6g/vendor/bundle/ruby/1.9.1/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/include -I/usr/local/include/ruby-1.9.1/x86_64-linux -I/usr/local/include/ruby-1.9.1/ruby/backward -I/usr/local/include/ruby-1.9.1 -I.   -Wall -g -rdynamic -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long   -o string.o -c string.cc
       g++ -I. -I/tmp/build_1feat0v36ur6g/vendor/bundle/ruby/1.9.1/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/include -I/usr/local/include/ruby-1.9.1/x86_64-linux -I/usr/local/include/ruby-1.9.1/ruby/backward -I/usr/local/include/ruby-1.9.1 -I.   -Wall -g -rdynamic -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long   -o value.o -c value.cc
       g++ -I. -I/tmp/build_1feat0v36ur6g/vendor/bundle/ruby/1.9.1/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/include -I/usr/local/include/ruby-1.9.1/x86_64-linux -I/usr/local/include/ruby-1.9.1/ruby/backward -I/usr/local/include/ruby-1.9.1 -I.   -Wall -g -rdynamic -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long   -o object.o -c object.cc
       g++ -I. -I/tmp/build_1feat0v36ur6g/vendor/bundle/ruby/1.9.1/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/include -I/usr/local/include/ruby-1.9.1/x86_64-linux -I/usr/local/include/ruby-1.9.1/ruby/backward -I/usr/local/include/ruby-1.9.1 -I.   -Wall -g -rdynamic -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long   -o message.o -c message.cc
       g++ -I. -I/tmp/build_1feat0v36ur6g/vendor/bundle/ruby/1.9.1/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/include -I/usr/local/include/ruby-1.9.1/x86_64-linux -I/usr/local/include/ruby-1.9.1/ruby/backward -I/usr/local/include/ruby-1.9.1 -I.   -Wall -g -rdynamic -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long   -o script.o -c script.cc
       g++ -I. -I/tmp/build_1feat0v36ur6g/vendor/bundle/ruby/1.9.1/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/include -I/usr/local/include/ruby-1.9.1/x86_64-linux -I/usr/local/include/ruby-1.9.1/ruby/backward -I/usr/local/include/ruby-1.9.1 -I.   -Wall -g -rdynamic -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long   -o signature.o -c signature.cc
       g++ -I. -I/tmp/build_1feat0v36ur6g/vendor/bundle/ruby/1.9.1/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/include -I/usr/local/include/ruby-1.9.1/x86_64-linux -I/usr/local/include/ruby-1.9.1/ruby/backward -I/usr/local/include/ruby-1.9.1 -I.   -Wall -g -rdynamic -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long   -o trycatch.o -c trycatch.cc
       g++ -I. -I/tmp/build_1feat0v36ur6g/vendor/bundle/ruby/1.9.1/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/include -I/usr/local/include/ruby-1.9.1/x86_64-linux -I/usr/local/include/ruby-1.9.1/ruby/backward -I/usr/local/include/ruby-1.9.1 -I.   -Wall -g -rdynamic -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long   -o stack.o -c stack.cc
       g++ -I. -I/tmp/build_1feat0v36ur6g/vendor/bundle/ruby/1.9.1/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/include -I/usr/local/include/ruby-1.9.1/x86_64-linux -I/usr/local/include/ruby-1.9.1/ruby/backward -I/usr/local/include/ruby-1.9.1 -I.   -Wall -g -rdynamic -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long   -o gc.o -c gc.cc
       g++ -I. -I/tmp/build_1feat0v36ur6g/vendor/bundle/ruby/1.9.1/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/include -I/usr/local/include/ruby-1.9.1/x86_64-linux -I/usr/local/include/ruby-1.9.1/ruby/backward -I/usr/local/include/ruby-1.9.1 -I.   -Wall -g -rdynamic -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long   -o backref.o -c backref.cc
       g++ -I. -I/tmp/build_1feat0v36ur6g/vendor/bundle/ruby/1.9.1/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/include -I/usr/local/include/ruby-1.9.1/x86_64-linux -I/usr/local/include/ruby-1.9.1/ruby/backward -I/usr/local/include/ruby-1.9.1 -I.   -Wall -g -rdynamic -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long   -o rr.o -c rr.cc
       g++ -I. -I/tmp/build_1feat0v36ur6g/vendor/bundle/ruby/1.9.1/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/include -I/usr/local/include/ruby-1.9.1/x86_64-linux -I/usr/local/include/ruby-1.9.1/ruby/backward -I/usr/local/include/ruby-1.9.1 -I.   -Wall -g -rdynamic -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long   -o date.o -c date.cc
       g++ -I. -I/tmp/build_1feat0v36ur6g/vendor/bundle/ruby/1.9.1/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/include -I/usr/local/include/ruby-1.9.1/x86_64-linux -I/usr/local/include/ruby-1.9.1/ruby/backward -I/usr/local/include/ruby-1.9.1 -I.   -Wall -g -rdynamic -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long   -o handles.o -c handles.cc
       g++ -I. -I/tmp/build_1feat0v36ur6g/vendor/bundle/ruby/1.9.1/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/include -I/usr/local/include/ruby-1.9.1/x86_64-linux -I/usr/local/include/ruby-1.9.1/ruby/backward -I/usr/local/include/ruby-1.9.1 -I.   -Wall -g -rdynamic -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long   -o v8.o -c v8.cc
       g++ -I. -I/tmp/build_1feat0v36ur6g/vendor/bundle/ruby/1.9.1/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/include -I/usr/local/include/ruby-1.9.1/x86_64-linux -I/usr/local/include/ruby-1.9.1/ruby/backward -I/usr/local/include/ruby-1.9.1 -I.   -Wall -g -rdynamic -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long   -o init.o -c init.cc
       g++ -I. -I/tmp/build_1feat0v36ur6g/vendor/bundle/ruby/1.9.1/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/include -I/usr/local/include/ruby-1.9.1/x86_64-linux -I/usr/local/include/ruby-1.9.1/ruby/backward -I/usr/local/include/ruby-1.9.1 -I.   -Wall -g -rdynamic -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long   -o heap.o -c heap.cc
       g++ -I. -I/tmp/build_1feat0v36ur6g/vendor/bundle/ruby/1.9.1/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/include -I/usr/local/include/ruby-1.9.1/x86_64-linux -I/usr/local/include/ruby-1.9.1/ruby/backward -I/usr/local/include/ruby-1.9.1 -I.   -Wall -g -rdynamic -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long   -o constants.o -c constants.cc
       g++ -I. -I/tmp/build_1feat0v36ur6g/vendor/bundle/ruby/1.9.1/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/include -I/usr/local/include/ruby-1.9.1/x86_64-linux -I/usr/local/include/ruby-1.9.1/ruby/backward -I/usr/local/include/ruby-1.9.1 -I.   -Wall -g -rdynamic -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long   -o external.o -c external.cc
       g++ -I. -I/tmp/build_1feat0v36ur6g/vendor/bundle/ruby/1.9.1/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/include -I/usr/local/include/ruby-1.9.1/x86_64-linux -I/usr/local/include/ruby-1.9.1/ruby/backward -I/usr/local/include/ruby-1.9.1 -I.   -Wall -g -rdynamic -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long   -o accessor.o -c accessor.cc
       g++ -I. -I/tmp/build_1feat0v36ur6g/vendor/bundle/ruby/1.9.1/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/include -I/usr/local/include/ruby-1.9.1/x86_64-linux -I/usr/local/include/ruby-1.9.1/ruby/backward -I/usr/local/include/ruby-1.9.1 -I.   -Wall -g -rdynamic -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long   -o function.o -c function.cc
       g++ -I. -I/tmp/build_1feat0v36ur6g/vendor/bundle/ruby/1.9.1/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/include -I/usr/local/include/ruby-1.9.1/x86_64-linux -I/usr/local/include/ruby-1.9.1/ruby/backward -I/usr/local/include/ruby-1.9.1 -I.   -Wall -g -rdynamic -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long   -o primitive.o -c primitive.cc
       g++ -I. -I/tmp/build_1feat0v36ur6g/vendor/bundle/ruby/1.9.1/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/include -I/usr/local/include/ruby-1.9.1/x86_64-linux -I/usr/local/include/ruby-1.9.1/ruby/backward -I/usr/local/include/ruby-1.9.1 -I.   -Wall -g -rdynamic -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long   -o invocation.o -c invocation.cc
       g++ -shared -o init.so template.o array.o locker.o constraints.o exception.o context.o string.o value.o object.o message.o script.o signature.o trycatch.o stack.o gc.o backref.o rr.o date.o handles.o v8.o init.o heap.o constants.o external.o accessor.o function.o primitive.o invocation.o -L. -L/usr/local/lib -Wl,-R/usr/local/lib /tmp/build_1feat0v36ur6g/vendor/bundle/ruby/1.9.1/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/out/x64.release/obj.target/tools/gyp/libv8_base.a /tmp/build_1feat0v36ur6g/vendor/bundle/ruby/1.9.1/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/out/x64.release/obj.target/tools/gyp/libv8_snapshot.a -L.  -rdynamic -Wl,-export-dynamic   -lpthread  -lpthread -lrt -ldl -lcrypt -lm   -lc
       /tmp/build_1feat0v36ur6g/vendor/bundle/ruby/1.9.1/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/out/x64.release/obj.target/tools/gyp/libv8_base.a: could not read symbols: No such file or directory
       collect2: ld returned 1 exit status
       make: *** [init.so] Error 1
       Gem files will remain installed in /tmp/build_1feat0v36ur6g/vendor/bundle/ruby/1.9.1/gems/therubyracer-0.11.0beta8 for inspection.
       Results logged to /tmp/build_1feat0v36ur6g/vendor/bundle/ruby/1.9.1/gems/therubyracer-0.11.0beta8/ext/v8/gem_make.out
       An error occurred while installing therubyracer (0.11.0beta8), and Bundler cannot continue.
       Make sure that `gem install therubyracer -v '0.11.0beta8'` succeeds before bundling.
 !
 !     Failed to install gems via Bundler.
 !
 !     Heroku push rejected, failed to compile Ruby/rails app 
```

有人遇到过这种情况么？

我猜 Heroku 对 therubyracer 有问题，但是关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T21:58:12.423

[这个提交](https://github.com/seyhunak/twitter-bootstrap-rails/commit/44cfe7f25a0fd305c763f1a299a418a92d027e64)刚刚从 gemspec 中删除了 therubyracer，我猜这应该可以解决你的问题。只需运行`bundle update twitter-bootstrap-rails`以获取它，然后再次推送到heroku。

# memory - Pascal：使用 New 和 Dispose 将类存储在二维数组中

> ID：12013265
> 
> 赞同：0
> 
> 时间：2012-08-17T21:14:06.433
> 
> 标签：memory, new-operator, dispose, pascal

我正在尝试 Pascal，并且我已经定义了自己的类，`Block`. 我有一个`array[1..20, 1..20] of Block`名为 PlayGrid，现在我正在尝试用`Block`s 填充它。

这个for循环：

```
for IterY := 1 to 20 do
    for IterX := 1 to 20 do

      //How do I put a new block instance in the PlayGrid?

      end.
    end. 
```

您是否必须使用 New 和 Dispose 来执行此操作？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T21:26:15.473

这就是我要做的：

```
type
  TBlock = class    
     // You class stuff goes here
  end;

var 
  PlayGrid: array[1..20, 1..20] of TBlock;

begin
  for X := 1 to 20 do
    for Y := 1 to 20 do
      PlayGrid[X, Y] := TBlock.Create;
end. 
```

# php - PHP Regex 确定相对或绝对路径

> ID：12013268
> 
> 赞同：1
> 
> 时间：2012-08-17T21:14:12.600
> 
> 标签：php, regex

我正在使用 cURL 来提取远程站点的内容。我需要检查所有“href=”属性并确定它们是相对路径还是绝对路径，然后获取链接的值并将其路径到类似 href="http://www.website.com/index.php ?url=[ABSOLUTE_PATH]"

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T21:32:53.977

如果我正确理解了问题，这是一种可能的解决方案：

```
$prefix = 'http://www.website.com/index.php?url=';
$regex = '~(<a.*?href\s*=\s*")(.*?)(".*?>)~is';
$html = file_get_contents('http://cnn.com');

$html = preg_replace_callback($regex, function($input) use ($prefix) {
  $parsed = parse_url($input[2]);

  if (is_array($parsed) && sizeof($parsed) == 1 && isset($parsed['path'])) {
    return $input[1] . $prefix . $parsed['path'] . $input[3];
  }
}, $html);

echo $html; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T21:33:45.940

正则表达式*和 HTML 的组合[`parse_url()`](http://php.net/parse_url)应该有助于：

```
// find all links in a page used within href="" or href='' syntax
$links = array();
preg_match_all('/href=(?:(?:"([^"]+)")|(?:\'([^\']+)\'))/i', $page_contents, $links);

// iterate through each array and check if it's "absolute"
$urls = array();
foreach ($links as $link) {
    $path = $link;
    if ((substr($link, 0, 7) == 'http://') || (substr($link, 0, 8) == 'https://')) {
        // the current link is an "absolute" URL - parse it to get just the path
        $parsed = parse_url($link);
        $path = $parsed['path'];
    }
    $urls[] = 'http://www.website.com/index.php?url=' . $path;
} 
```

要确定 URL 是否是绝对的，我只需检查 URL 的开头是否`http://`为`https://`; 如果您的 URL 包含其他媒体，例如`ftp://`或`tel:`，您可能还需要处理这些媒体。

这个解决方案确实使用正则表达式来解析 HTML，这通常是不受欢迎的。为了规避，您可以切换到 using `[DOMDocument][2]`，但如果没有任何问题，则不需要额外的代码。

# javascript - 为什么单击链接后 Javascript 信标/ajax 消息不会在 Chrome 和 Safari 中发送

> ID：12013270
> 
> 赞同：0
> 
> 时间：2012-08-17T21:14:30.680
> 
> 标签：javascript, ajax, firefox, google-chrome, safari

我正在为网页设置一个使用跟踪系统，当用户单击页面的某些元素时，该系统会将一些信息发送回服务器。我使用信标而不是传统的 ajax 发送信息，因为我将跟踪跨域，但是当单击的元素是链接时，我在 Chrome/Safari 中遇到了问题。

这是我的代码的简化版本，它演示了这个问题。

```
<!DOCTYPE html>
<head>
    <title>Tracking Test</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
    <div id="link">
        <a href="">link</a>
    </div>
    <div id="nolink">
        <div>nolink</div>
    </div>

    <script type="text/javascript">
    function track(event){
        var beacon = new Image();
        var location = "http://www.mypage.com/tracking?element=";
        if (event.target.parentNode.id =='link'){
            beacon.src = location + '"link"';
        } else if (event.target.parentNode.id == 'nolink'){
            beacon.src = location + '"nolink"';
        }
    }
    window.addEventListener('click', track, true);
    </script>
</body>
</html> 
```

在 Firefox、Chrome 和 Safari 中，单击“nolink”会按预期将消息发送回服务器。单击“链接”会在 Firefox 中发送消息，但在 Chrome 和 Safari 中不会发送消息。（当然，在 IE 中没有任何作用，但我相信这是因为事件侦听器，所以我稍后会解决它）。

我还需要做些什么来确保在下一页加载之前发送消息吗？

如果有人想知道，在信标的另一端有一个 django 视图，如下所示：

```
def listener(request):
    logging.info(request.GET.get("element", "received a message but couldn't find an element"))
    return HttpResponse(status=200) 
```

# c++ - 升压参数库

> ID：12013273
> 
> 赞同：4
> 
> 时间：2012-08-17T21:14:37.423
> 
> 标签：c++, boost, parameters, boost-parameter

最近我在 Boost 中找到了[Parameters](http://www.boost.org/doc/libs/1_50_0/libs/parameter/doc/html/index.html)库。老实说，我不明白为什么这是 Boost 的一部分。当需要将多个参数传递给函数时，您可以从中创建一个结构，例如：

```
struct Parameters
{
    Parameters() : strParam("DEFAULT"), intParam(0) {}
    string strParam;
    int intParam;
};

void foo(const Parameters & params)
{
}

Parameters params;
params.intParam = 42;
foo(params); 
```

这很容易编写和理解。现在使用 Boost 参数的示例：

```
BOOST_PARAMETER_NAME(param1) 
BOOST_PARAMETER_NAME(param2)

BOOST_PARAMETER_FUNCTION(
  (void),                // 1\. parenthesized return type
  someCompexFunction,    // 2\. name of the function template

  tag,                   // 3\. namespace of tag types

  (optional              //    optional parameters, with defaults
    (param1,           *, 42)
    (param2,           *, std::string("default"))              )
  )
{
    std::cout << param1 << param2;
}

someCompexFunction(param1_=42); 
```

我认为这真的很复杂，而且好处不是那么显着..

但现在我看到一些 Boost 库 (Asio) 使用了这种技术。使用此库传递许多参数是否被认为是最佳实践？

或者也许使用这个库有我看不到的真正好处？你会推荐在项目中使用这个库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T21:30:57.387

您的技术需要创建大量临时变量（给定足够的参数），并且在某些情况下会相当冗长。更棘手的是文档。如果你沿着配置结构的路线走，你将有两个地方需要解释你的参数。相比之下，记录 Boost.Parameter 函数很容易。

它还降低了冗长，并允许我为整个函数系列重用参数，而不是一遍又一遍地编写新的配置载体。

如果您不喜欢该库，请不要使用它。它还有其他几个你没有提到的缺点（重包含，高编译时间）。

另外，为什么不提供两个世界中最好的呢？一个使用 Boost.Parameters 的函数和另一个使用配置结构的函数，它们都在一个通用实现上调度。正确管理标题，“不为你不使用的东西付费”的承诺将被保留。价格是可维护性。但是，如果您的用户不喜欢某个界面，您总是可以弃用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T21:25:03.897

好吧，我不使用这个库，但关键是你可以通过名称传递参数。

想象一下，您有一个带有很多参数的函数，而在大多数情况下，您只想使用几个参数。也许并不总是相同的少数，因此将这些放在列表前面（以便其他可以作为默认值提供）将无济于事。这就是“命名参数”的用武之地：你只需按照你喜欢的任何顺序给出你想要传递的参数的名称和值，其他的将是默认的。您甚至不必知道所有可能的参数；该函数的更高版本可以添加新参数而不会破坏任何内容（前提是选择新参数的默认值以模仿旧行为）。

与结构相比，您可以创建结构并使用默认值初始化所有内容。如果我没记错的话，这几乎就是这种东西在内部工作的方式，方法是传递一个参数对象并在那里设置值，然后再将其传递给最后的实际函数。

# android - 仅 Android 状态栏图标

> ID：12013276
> 
> 赞同：3
> 
> 时间：2012-08-17T21:14:42.110
> 
> 标签：android, notifications

我创建了许多不同类型的 android 状态栏通知。我想知道是否有一种方法可以显示状态栏图标，但在下拉菜单时列表中没有显示任何项目...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T21:19:26.713

不，抱歉——a`Notification`总是在抽屉里有一个条目。否则，用户无法摆脱`Notification`（直接或通过确定`Notification`绑定到什么，因此他们可以采取其他步骤摆脱它，包括卸载应用程序）。

# wordpress - Wordpress：添加“标签”部分

> ID：12013284
> 
> 赞同：0
> 
> 时间：2012-08-17T21:15:43.097
> 
> 标签：wordpress, wordpress-theming

我正在与客户网站合作，他们的“标签”部分已从 wordpress 后端侧边栏中删除。我如何重新添加它？以及他们如何能够添加两个词标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T21:22:56.527

[Admin Menu Editor](http://w-shadow.com/blog/2008/12/20/admin-menu-editor-for-wordpress/)插件是自定义 Admin 菜单的最简单方法。标签位于帖子项下。您应该能够以这种方式将它们添加回来。

# python - 通过 Django 国家列表过滤

> ID：12013286
> 
> 赞同：0
> 
> 时间：2012-08-17T21:15:49.873
> 
> 标签：python, django, django-views

我正在尝试检索与`name`django Country 共享相同的标签列表。（我将把它扔到我的自动完成搜索中）。我所拥有的不起作用：

**看法：**

```
from django_countries.countries import COUNTRIES
...

@login_required
def country_tags(request):
    result = {}
    tags = Tags.objects.all()
    countries = list(COUNTRIES)
    for tag in tags:
        for country in countries: 
            if country.name == tag.name:
                result[tag.name] = tag.name.title()
    return HttpResponse(json.dumps(result)) 
```

不能完全弄清楚为什么这不起作用。我引用错了`country.name`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T21:24:17.827

这是一个应该可以工作的版本。`COUNTRIES`是一个 2 元组。

```
countries_only = [x[1] for x in COUNTRIES]
tags = Tag.objects.filter(tag.name__in=countries_only)
results = {}
for t in tags:
   results[t.name] = t.name.title() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T21:24:53.303

`COUNTRIES`只是 2 个元素元组的列表 - 没有`name`属性。你应该做类似的事情`country[1] == tag.name`。

# design-patterns - 对象转换的设计模式

> ID：12013295
> 
> 赞同：1
> 
> 时间：2012-08-17T21:16:53.383
> 
> 标签：design-patterns

我正在寻找有关用于以下场景的最佳模式的建议。

涉及从域级别对象转换为 UI DTO

对于有问题的对象，`BeanUtils`或者`PropertyUtils`将执行大部分转换。

我的域级别对象包含一个“类型”属性。基于这种类型，我们需要将 DTO“标签”属性设置为友好名称。

*   所以对于 AAA 类型，我们需要创建如下标签：`property1 + "-" + property2`
*   对于 BBB 类型，我们需要创建如下标签：`property2 + "/" + property1`
*   对于 CCC 类型，我们需要根据数据库查询创建标签

（上面的逻辑过于简单了）

在没有研究所有可能的设计模式的情况下，我想到了以下模式：

1.  创建多个 LabelCreationStrategies，每种类型一个
2.  在我的对象转换助手中，注入将“类型”映射到策略的映射
3.  所以当对象转换发生时，它会找到合适的策略，并创建最合适的标签。

还有哪些其他模式可以在这里工作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T14:25:34.410

使用策略模式

```
 public abstract class AbstractClass{   //or interface 
       public abstract void print();
    }

    public class AAA extends AbstractClass{

        @Override
        public void print(){
            System.out.println("AAA");
        }
    }

    public class BBB extends AbstractClass{

        @Override
        public void print(){
            System.out.println("BBB");
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T00:43:52.740

您可以将您的类型更改为知道如何生成适当策略的实际对象。

例如：

```
 public interface Type {
   NamingStrategy getNamingStrategy();
 }

 public class AAA implements Type {
   public NamingStrategy getNamingStrategy() {
     return new DatabaseQueryStrategy();
   }

   public String toString() {
     return "AAA";
   }
 } 
```

# c# - 强制 C# 负载测试应用程序同时执行线程/任务？

> ID：12013296
> 
> 赞同：4
> 
> 时间：2012-08-17T21:17:04.960
> 
> 标签：c#, multithreading, task-parallel-library, threadpool

**问题：**

有没有办法强制任务并行库同时运行多个任务？即使这意味着通过在每个核心上添加所有上下文切换来使整个过程运行得更慢？

**背景：**

我对多线程相当陌生，所以我可以使用一些帮助。我最初的研究结果并不多，但我也怀疑我是否知道要搜索什么。也许在多线程方面更有经验的人可以帮助我更好地理解 TPL 和/或找到更好的解决方案。

我们公司正计划在所有用户的机器上部署一个软件，每天几次连接到中央服务器，并将一些文件和MS Access数据同步回用户的机器。我们想先对这个概念进行负载测试，看看 Access DB 如何支持大量同时连接。

我的任务是编写一个 .NET 应用程序，其行为类似于客户端应用程序（与网络位置连接和同步），但同时在多个线程上执行此操作。

我已经熟悉了任务并行库 (TPL)，因为这似乎是处理多线程的最佳（最新）方法，并且可以轻松地从每个线程获取返回值。但是，据我了解，TPL 决定如何运行每个“任务”以尽可能快地执行，在可用内核之间分配工作。因此，假设我想在 2 核机器上运行 30 个同步作业……TPL 将在每个核心上按顺序运行 15 个。这意味着我的负载测试只会同时使用最多 2 个连接来访问 Access DB。我想通过大量同时连接来访问数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T15:49:57.740

您可以通过指定来强制 TPL 执行此操作`TaskOptions.LongRunning`。根据 Reflector（但不是根据文档），这总是会创建一个新线程。我考虑依靠这种安全的生产用途。

正常任务不会做，因为它们不保证执行。设置 MinThreads 是一个*可怕*的解决方案（用于生产），因为您正在更改进程全局设置以解决本地问题。而且，你不能保证成功。

当然，你也可以启动线程。由于错误处理，任务更方便。在这个用例中使用线程没有错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T15:12:13.177

根据您的评论，我认为您应该首先重新考虑使用 Access。一旦数据库增长到一定大小，它就不能很好地扩展并且会出现问题。特别是如果这只是通过网络上的某些文件共享提供的。

您可以尝试模拟单台机器的负载，但我认为这不能很好地代表您要完成的工作。

您是否考虑过使用[SQL Server Express](http://www.microsoft.com/sqlserver/en/us/editions/2012-editions/express.aspx)？它基本上是成熟 SQL Server 的失谐版本，可能更适合您的需求。

# android - OnClickListener 不响应片段中的点击

> ID：12013297
> 
> 赞同：3
> 
> 时间：2012-08-17T21:17:10.307
> 
> 标签：android, tabs, onclick, android-fragments, onclicklistener

我正在将一个旧程序转移到一个选项卡和片段实现。用户输入一个 Id 进行搜索，然后点击提交。但是我的“提交按钮”什么也没做。

我尝试了几种替代编码变体，但得到了相同的结果 - 死气沉沉！

这是 XML

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/setUpAthletesTab"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
     android:background="#CCFFFF" >

    <TextView
        android:id="@+id/instructionText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="@string/instructionText"
    android:textColor="#FF0000"
    android:textAppearance="?android:attr/textAppearanceMedium"
     />

    <TableRow
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="left"
        android:stretchColumns="*" >

        <EditText
            android:id="@+id/editTextAthlete0"
            android:layout_width="145dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dp"
            android:hint="@string/hintText"
            android:inputType="number" />

        <TextView
            android:id="@+id/textAthleteName0"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_marginLeft="5dp"
            android:hint="@string/athleteHintName0"
            android:textAppearance="?android:attr/textAppearanceLarge" />
    </TableRow> 
```

这是我的标签/片段

```
public class Tab3Fragment extends Fragment {

    /* (non-Javadoc)
     * @see android.support.v4.app.Fragment#onCreateView(android.view.LayoutInflater, android.view.ViewGroup, android.os.Bundle)
     */
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        /* Begin Insertion */
        LayoutInflater myInflater = inflater;
        ViewGroup myContainer = container;
        if(inflater == null) myInflater = inflater;
        if(container == null) myContainer = container;
        Log.d(APP_TAG,"At line 50 of Tab3Fragment myInflater = " + myInflater + " and myContainer = " + myContainer);
        getAthleteInfoFromExistingDatabase(myInflater,myContainer);

        LinearLayout tab3LinearLayout = (LinearLayout) inflater.inflate(R.layout.tab_frag3_layout, container, false);

        View mySubmitButton = tab3LinearLayout.findViewById(R.id.submitButton);
        ((Button) mySubmitButton).setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                Toast.makeText(Tab3Fragment.this.getActivity().getBaseContext(),
                        "clicked on Submit Button", Toast.LENGTH_LONG).show();

                Intent intent = new Intent();
                intent.setClass(getActivity(), RetrieveAthleteData.class);
                startActivity(intent);
            }
        });

        return (LinearLayout)inflater.inflate(R.layout.tab_frag3_layout, container, false);
    } 
```

当我点击提交时，Toast 框和 Intent 都不会关闭。

谢谢你看我的问题。

**问题解决了！**感谢 Dirk 建议将名称更改为全部小写。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:01:25.173

在您的 xml 中没有 ID 为“submitButton”的按钮。

你应该只使用小写，因此给它 id "@+id/submit_button"

尽管我找不到不允许使用骆驼箱 ID 的来源。甚至 Google 有时也会在他们的示例中使用骆驼案例 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:10:34.810

您在这里膨胀并返回了一个全新的视图集：

```
return (LinearLayout)inflater.inflate(R.layout.tab_frag3_layout, container, false); 
```

您应该返回您采取行动的膨胀视图：

```
return tab3LinearLayout; 
```

# sencha-touch - 我应该向 Ext.data.store 派生类添加自定义方法吗

> ID：12013298
> 
> 赞同：0
> 
> 时间：2012-08-17T21:17:17.237
> 
> 标签：sencha-touch, extjs4, extjs, sencha-touch-2

我对 sencha touch 和 extjs 完全陌生。这是场景：

假设您有一家商店，该商店将商品放在购物车中：

```
Ext.define('MyApp.store.CardItems', {
    extend: 'Ext.data.Store',
    requires: ['MyApp.model.CardItem','Ext.data.proxy.SessionStorage'],

    config :{
        model: 'MyApp.model.QuoteItem',
        autoLoad: true,
        autoSync: true,
        identifer: 'uuid',
        proxy:{
            type:'sessionstorage',
            id:'card'
        }
    } 
```

});

我知道在 sencha a`store`中，例如用于将模型项列表绑定到网格。我只是想知道向这个类添加自定义方法是否是个好主意。

例如。假设我们需要一种方法来获取商店中所有商品的总数。从 OOP 的角度来看，直接在商店中引入这种方法对我来说是有意义的：

```
getOverallQuantity:function () {
    var sum = 0;
    this.each(function (item) {
        sum += parseInt(item.get('amount'));
    }, this);
    return sum;
} 
```

我只是想知道将这些方法直接放在商店中是否是个好主意，或者是否出于某种原因避免这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T22:15:54.000

我认为分层方法没有任何问题，但继承会有点“奇怪”。业务逻辑将绑定到模型.. 某些字段，但方法将在商店中，这将只接受某些类型的模型。通过对存储进行一些小的调整，您可以让您的业务逻辑方法存在于模型中。这完全取决于个人喜好、所需模型的数量、字段如何绑定在一起等。

...

我知道这是示例代码，但将对象`config`放在原型上是不好的做法，并且可能导致共享实例错误。您的示例可能会暴露代理共享问题。

```
var newCards = new MyApp.store.CardItems(),
oldCards =  new MyApp.store.CardItems();

newCards.load({params: {status: 'new'}});
oldCards.load({params: {status: 'old'}}); 
```

由于代理是共享的，因此首先加载的存储将覆盖数据。可以通过执行以下操作来避免这种情况：

```
 Ext.define('MyApp.store.CardItems', {
    extend: 'Ext.data.Store',
    requires: ['MyApp.model.CardItem', 'Ext.data.proxy.SessionStorage'],
    constructor: function() {
        Ext.apply(this, {
            model: 'MyApp.model.QuoteItem',
            autoLoad: true,
            autoSync: true,
            identifer: 'uuid',
            proxy: {
                type: 'sessionstorage',
                id: 'card'
            }
        });

        this.callParent(arguments)
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T21:35:13.200

继续 Christoph 扩展你的课程，这是你的事，没关系 :)

我正在创建大型商店/模型/代理层次结构，并且一切正常。Sencha Foundation Classes (SFC!) 太酷了！

干杯，奥列格

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T18:21:27.453

我看不出你的提议有什么问题。值得记住的是，除了使用扩展之外，您还可以覆盖 ExtJs 的基类，如下所示：

```
Ext.onReady(function(){

    Ext.override(Ext.panel.Panel, {
        // Add functionality to a panel to determine
        // if it's the active tab within a tab panel or not 
        isActiveTab: function()
        {
            var owningTabPanel = this.up('tabpanel');
            if ( owningTabPanel )
            {
                return owningTabPanel.getActiveTab() == this;
            } else {
                return false;
            }
        }

    });

}); 
```

# c# - 来自 AsyncState 和 EndAccept() 函数的 .NET 套接字之间的区别

> ID：12013301
> 
> 赞同：3
> 
> 时间：2012-08-17T21:17:42.323
> 
> 标签：c#, .net, sockets, asyncsocket

阅读此[异步套接字示例](http://msdn.microsoft.com/en-us/library/fx6588te.aspx)时，我发现以下代码：

```
 // Get the socket that handles the client request.
    Socket listener = (Socket) ar.AsyncState;
    Socket handler = listener.EndAccept(ar); 
```

我很难找到关于这两个套接字之间区别的文档，我还想知道关闭处理程序或关闭处理程序将如何影响原始套接字。谁能解释一下，或者给我一些文档？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T04:08:17.187

套接字是特定机器上的唯一连接，即`127.0.0.1:1024`. 一次只能建立一个活动连接。“侦听器”侦听固定端口（例如，在我上面的示例中为 1024）。它的工作是成为接受连接的“公共”方式。一旦它接受一个连接，它就会在一个新的、随机的（好吧，相当伪随机的）选择端口上创建一个新的套接字。然后原始连接应用程序和主机可以通过该套接字进行通信，从而释放侦听套接字以获取另一个连接（这将为新连接分配另一个端口号，等等）。

`EndAccept`一旦建立连接，通常就是您需要做的所有事情。通常`listener`会继续侦听更多连接以接受。如果没有，您通常只需处置或关闭套接字以停止侦听并取消任何待处理的接受。`handler`用于执行应用程序所需的任何通信，完全独立于套接字`listener`。当您使用完`handler`套接字后，您将处理或关闭它，并且因为它`listener`是独立的，它会继续“运行”。

`Shutdown`将刷新面向连接的套接字上的任何未决数据（在之前调用`Close`）并且不会影响任何其他套接字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T22:10:25.020

侦听器是正在侦听连接的套接字。您不想让侦听器被占用，否则多个客户端将无法通过该套接字进行连接。在该套接字上调用 EndAccept 会为您提供一个套接字，供服务器与客户端通信，并打开侦听器以获取更多连接。

关闭处理程序不应影响侦听器套接字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T22:56:14.657

任何基于套接字的 .NET 服务器应用程序都将涉及至少两种套接字：

1.  用于侦听入站连接的侦听器套接字（同步或异步）
2.  通过调用侦听器套接字的 Accept() 方法返回的客户端套接字。

您指的示例是异步侦听的示例，其中套接字首先以异步方法的地址作为参数调用 BeginAccept() 方法。现在，如果您不调用相应的 EndAccept() 方法，则原始侦听器套接字将被阻塞，并且来自客户端的任何进一步连接都可能丢失。

Socket.ShutDown(Both) 方法用于优雅地关闭带有连接的套接字，而 Socket.Disconnect(True) 将强制执行相同的操作。无论如何， Socket.Close() 应该遵循这些方法。有关更多信息，请参阅此 SO 链接：[c#/.Net Socket.Shutdown](https://stackoverflow.com/questions/583637/c-net-socket-shutdown)

# objective-c - 一个应用程序中的多个 NSURLConnection 相互混淆

> ID：12013309
> 
> 赞同：0
> 
> 时间：2012-08-17T21:18:39.777
> 
> 标签：objective-c, nsurlconnection, httpresponse, nsmutableurlrequest, nshttpurlresponse

我有一个使用 2 个 NSURLConnections 从 Web 服务器下载信息的应用程序。它们都属于完全不同的类（class1 和 class2）。但是由于某种原因，在class1中的一个运行之后，然后我在class2中提交了另一个，而不是使用class2中提供的信息执行请求，它甚至不提交请求，而是自动从class1继承请求。所以我只是将数据从 class1 拉入 class2，我不想这样做。为什么我不能在没有 class1 请求干扰的情况下从 class2 运行此请求？你不能在一个应用程序中使用多个 NSURLConnection 吗？

```
NSMutableURLRequest *req1 = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:submissionString]];

        [NSURLConnection connectionWithRequest:req1 delegate:self];
    }

}
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    if (!_responseData1) {
        [self setResponseData1:[NSMutableData data]];
    }

    [_responseData1 appendData:data];
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)URLresponse {

    NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse*)URLresponse;

    if (![httpResponse isKindOfClass:[NSHTTPURLResponse class]]) {
        NSLog(@"Unknown response type: %@", URLresponse);
        return;
    }
}
-(void)connectionDidFinishLoading:(NSURLConnection *)connection {

    res1=[[NSString alloc] initWithData:_responseData1 encoding:NSUTF8StringEncoding]; 
```

# node.js - 让 Stylus 与 Express 和 Node 一起工作

> ID：12013312
> 
> 赞同：0
> 
> 时间：2012-08-17T21:19:06.313
> 
> 标签：node.js, express, ejs, stylus

我是 node、express、stylus、ejs（整个捆绑包）的新手，并且无法让手写笔工作。

我有一个目录，其中包含：

应用程序.js

公共/main.styl

意见/index.ejs

这是我的 app.js 代码：

```
 var express = require('express');
    var app = express();
    var stylus = require('stylus');

    app.configure(function(){
      app.use(stylus.middleware({ src: __dirname + '/public' }));
    });

app.get('/', function(req, res){
  res.render("index.ejs");
});

app.listen(80); 
```

当我转到 localhost 时，我的 index.ejs 文件已呈现，但它不包含任何样式。有什么想法我可能做错了吗？有没有什么好的手写笔入门教程？抱歉，如果这太模糊了。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T22:02:14.220

确保`<link>`样式表中的 URL 是“/main.css”而不是“public/main.css”或类似的东西；否则 stylus 实际上会寻找 public/public/main.styl。

# java - 无效查询：在 Camel 中使用的 Apache HTTP 客户端中的 URI 解析异常

> ID：12013314
> 
> 赞同：0
> 
> 时间：2012-08-17T21:19:11.977
> 
> 标签：java, apache-camel, apache-httpclient-4.x, yahoo-api

我正在尝试使用 Apache Camel 调用 Yahoo API。

雅虎 API 是 [http://query.yahooapis.com/v1/public/yql?q=select%20](http://query.yahooapis.com/v1/public/yql?q=select%20) *%20from%20music.artist.search%20where%20keyword%3D%22Madonna%22&format=json

我的路线看起来像这样。

```
 from("direct:start_yahoo_artist")
            .process(new HTTPRequestParamProcessor())
            .setHeader(
                    Exchange.HTTP_QUERY,
                    simple("select+*+from+music.artist.search+where+keyword%3D%{in.headers.artist}%22&format=json"))
                    //simple("select * from music.artist.search where keyword=\"{in.headers.artist}\"&format=json"))
            .to("http://query.yahooapis.com/v1/public/yql")
            .unmarshal()
            .json(JsonLibrary.Jackson, YahooMusicArtistResponseObject.class)
            /*.bean(EmbeddedDroolsRuleEngine.class, "callRuleEngine")*/
            .process(new Processor() {

                @Override
                public void process(Exchange exchange) throws Exception {
                    exchange.getOut().setBody(exchange.getIn().getBody());

                }
            }); 
```

但是，我收到了一个无效的查询异常。编码 URI 的正确方法是什么？

```
[               qtp263093125-29] Tracer                         INFO  ID-server190-tm-rtsslab-64570-1345237236639-0-2 >>> (route6)  --> http://query.yahooapis.com/v1/public/yql <<< Pattern:InOut, Headers:{CamelHttpMethod=GET, artist=Madonna, breadcrumbId=ID-server190-tm-rtsslab-64570-1345237236639-0-1, CamelHttpQuery=select+*+from+music.artist.search+where+keyword%3D%{in.headers.artist}%22&format=json}, BodyType:null, Body:[Body is null]
[               qtp263093125-29] DefaultErrorHandler            ERROR Failed delivery for (MessageId: ID-server190-tm-rtsslab-64570-1345237236639-0-3 on ExchangeId: ID-server190-tm-rtsslab-64570-1345237236639-0-2). Exhausted after delivery attempt: 1 caught: org.apache.commons.httpclient.URIException: Invalid query
org.apache.commons.httpclient.URIException: Invalid query
    at org.apache.commons.httpclient.URI.parseUriReference(URI.java:2049)[commons-httpclient-3.1.jar:]
    at org.apache.commons.httpclient.URI.<init>(URI.java:147)[commons-httpclient-3.1.jar:]
    at org.apache.commons.httpclient.HttpMethodBase.getURI(HttpMethodBase.java:265)[commons-httpclient-3.1.jar:]
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:383)[commons-httpclient-3.1.jar:]
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323)[commons-httpclient-3.1.jar:]
    at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:243)[camel-http-2.10.0.jar:2.10.0] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T06:28:18.330

看这部分：

```
+keyword%3D%{in.headers.artist}%22 
```

简单内联变量的正常方法`${in.headers.artist}`不是`%{in.headers.artist}`，但您可能已将其配置为`{ } ?`

但是您在艺术家字符串之前没有引号，只有在 - 这与您上面的工作 URL 不同。

网址的这一部分不应该是：`+keyword%3D%22${in.headers.artist}%22 (+keyword="madonna")`？

# rest - 使用 Jetty 以编程方式创建 servlet 路径和变量

> ID：12013316
> 
> 赞同：3
> 
> 时间：2012-08-17T21:19:13.460
> 
> 标签：rest, servlets, jax-rs, embedded-jetty, path-variables

我希望能够以编程方式在 Jetty 中使用变量注册 servlet 上下文路径，但我似乎无法弄清楚如何在 Jetty 中自行完成。

有一些要求使它变得困难：

1.  我必须使用 Maven 进行依赖管理。
2.  我必须使用 javax.servlet.Filter 的特定子类进行身份验证。

鉴于与现有环境的冲突，Play！并且 Grails 已经出局，即使 JAX-RS 注释很简洁，我也能够以编程方式在配置文件中更改这些内容，而无需重新编译。

基本上，我正在寻找类似于[http://www.playframework.org/documentation/1.0/routes](http://www.playframework.org/documentation/1.0/routes)的路线管理，但我无法找到朝着这个方向前进的起点。

我可以使用我需要的任何嵌入式服务器，只要我遵守上述规定，不幸的是，这意味着我认为我不能使用类似[http://code.joejag.com/2011/creating-a-simple-java的东西-restful-service-using-jersey-and-maven/](http://code.joejag.com/2011/creating-a-simple-java-restful-service-using-jersey-and-maven/)。

给定 Jetty，我会想象代码看起来像这样：

```
Server server = new Server(8080);

ServletContextHandler context = new ServletContextHandler(ServletContextHandler.SESSIONS);
context.setContextPath("/");
server.setHandler(context);
// add other random stuff to the context
context.addServlet(new ServletHolder(new ThingServlet()),"/things/{id}");
// the above line could easily come from a config file using Class.forName, etc. 
server.start();
server.join(); 
```

我完全愿意接受建议、嵌入式 Web 服务器等等。我习惯于用他们的路由在 Django/Pylons/Werkzeug 中编写更多内容，几天前我被卷入了这个问题，这是我迄今为止必须使用的，所以任何指导或帮助将不胜感激！

# ruby - 使用 ruby 保护 gem 监视文件创建事件

> ID：12013320
> 
> 赞同：1
> 
> 时间：2012-08-17T21:19:26.237
> 
> 标签：ruby, guard

如何使用 Ruby `guard`gem仅在特定文件夹中查看文件创建事件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T11:50:21.490

您可以直接在您的`Guardfile`：

```
module ::Guard
  class Test < Guard
    def run_on_additions(paths)
      puts "New paths: #{ paths.inspect }"
    end
  end
end

guard 'test' 
```

您可以在[ruby​​doc.info](http://rubydoc.info/gems/guard/Guard/Guard)上找到 Guard 插件基类的文档。如果您的内联 Guard 增长，您可以创建自己的 Guard 插件 gem，请参阅 Wiki 页面了解如何[创建 Guard](https://github.com/guard/guard/wiki/Create-a-guard)

另一种选择是直接使用[Listen](https://github.com/guard/listen)，这是从Guard中提取的文件监听器。

# python - 如何选中/取消选中 QTableView 并触发 setData()

> ID：12013324
> 
> 赞同：0
> 
> 时间：2012-08-17T21:20:06.923
> 
> 标签：python, checkbox, pyqt, qtableview

我有一个在 PyQt 中`QTableModel`使用的自定义。`QTableView`我有一些字段设置为可检查，我想添加检查所有和不检查按钮。我觉得应该有一种方法`setData()`可以从代码中调用 ，从而使检查状态和我已经编写的代码一样发生变化`setData()`。事实上有没有办法做到这一点？

根据要求，这是我正在使用的 setData：

```
if role == Qt.CheckStateRole:
        row = index.row()
        column = index.column()

        if row == 0 and column != 0:
            self._data.parsingConfiguration['columnEnabled'][column-1] = True if value == Qt.Checked else False
            self.dataChanged.emit(self.createIndex(1, column), self.createIndex(len(self._data.data),column))

            if column-1 == self._data.parsingConfiguration['groupNumberColumn']:
                self.setGroupNumber(self.getFirstEnabledMember())
            elif column-1 == self._data.parsingConfiguration['timeStepColumn']:
                self.setTimeStep(self.getFirstEnabledMember())
            self.emit(SIGNAL("layoutChanged()"))
            return True
        if column == 0 and row != 0:
            self._data.parsingConfiguration['rowEnabled'][row-1] = True if value == Qt.Checked else False
            self.dataChanged.emit(self.createIndex(row, 1), self.createIndex(row, self._data.numColumns+1))
            return True
        return False 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:29:35.710

经过更多的试验和错误后，我发现我可以更改通知数据函数返回 QCheckState 的数据，然后从模型中发出 layoutChanged() 信号。这仍然不调用 setData 方法，并且确实需要编写单独的函数（因此没有完成我的初始目标），但是从用户的角度来看，它确实达到了预期的结果。

# jquery - 在 keyup 事件上填充同级单元格

> ID：12013332
> 
> 赞同：-1
> 
> 时间：2012-08-17T21:20:45.060
> 
> 标签：jquery, html-table, cell

这是我要讨论的[小提琴。](http://jsfiddle.net/mbctM/3/)

我有三个输入框，我想制作它们，以便当用户输入其中任何一个时，其他输入框将填充一些文本。应该设置为，如果用户在第一个单元格中输入，则填充右侧的两个单元格，或者如果用户在行中的最后一个单元格中输入，则填充前两个单元格。

到目前为止我的代码在小提琴中。我已经尝试`.next()`了大约一百万次，但我无法让它工作。

HTML：

```
<table>
    <tr>
        <td><input type="text" /></td>
        <td><input type="text" /></td>
        <td><input type="text" /></td>
    </tr>
</table>​ 
```

JS：

```
$('input').focus(function() {
    $(this).keyup(function() {
        var tmp = $(this).val();
        $(this).next('input').val("asdf");
    });
});​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T21:25:01.257

```
$('input').on('keyup', function() {
    $(this).closest('td').siblings('td').find('input').val(this.value);
}); 
```

[**小提琴**](http://jsfiddle.net/mbctM/7/)

**编辑：**

排除第一个：

```
$('input:gt(0)').on('keyup', function() {
    $(this).closest('td').siblings('td').not(':first').find('input').val(this.value);
}); 
```

[**小提琴**](http://jsfiddle.net/mbctM/9/)

# iphone - 应用程序因 setValuesForKeysWithDictionary 而崩溃

> ID：12013333
> 
> 赞同：0
> 
> 时间：2012-08-17T21:20:48.780
> 
> 标签：iphone, objective-c, ios, cocoa-touch, key-value-coding

我正在使用 setValuesForKeysWithDictionary 来填充我的模型对象。模型对象定义为

```
@interface Media : NSObject
{
    NSString *userId;
    NSString *mediaType;
}

@property(nonatomic,copy) NSString *userId;
@property(nonatomic,copy) NSString *mediaType; 
```

属性合成看起来像，

```
@implementation Media
@synthesize userId;
@synthesize mediaType; 
```

我初始化类如下，

```
NSMutableDictionary *dic = [NSMutableDictionary new];
[dic setValue:@"aaa" forKey:@"userId"];
[dic setValue:@"bbb" forKey:@"mediaType"];

Media *obj = [[Media alloc] init];
[obj setValuesForKeysWithDictionary:dic]; 
```

这与消息一起崩溃

```
'[<Media 0x8a9f280> valueForUndefinedKey:]: this class is not key value coding-compliant    for the key aaa.' 
```

为什么 setValuesForKeysWithDictionary: 把我的价值当作关键？还是我误解了 setValuesForKeysWithDictionary: 函数的目的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T06:10:24.177

终于找到了答案。这不是关于设置值，而是关于检索部分。我正在使用以下方法从模型中读回值。

```
-(NSDictionary*) dictionaryRepresentation
{ 
   return [self dictionaryWithValuesForKeys:[NSArray arrayWithObjects:,userId,mediaType,     nil]];
} 
```

正如你所看到的，我使用了普通的变量名而不是键。@"userId"、@"mediaType"。

我最近将 xcode 更改为不同的字体主题，但仍然习惯于新的字体颜色集。感谢大家宝贵的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-17T06:33:05.577

在像这样声明变量时添加@objc 作为前缀。

```
class Customer: NSObject
{
    @objc var name: String?
    @objc var email: String?
} 
```

它应该工作。

# android - 如何为 Android 应用创建透明的演示屏幕？

> ID：12013334
> 
> 赞同：106
> 
> 时间：2012-08-17T21:20:49.020
> 
> 标签：android, android-viewpager, transparent, demo, showcaseview

我正在尝试创建一个仅在用户首次安装我的应用程序时启动的半透明演示屏幕。以下是 Pulse News 应用程序的示例：

**银河连结**

![Galaxy Nexus 上 Pulse News 的示例截图](../Images/6540dd098ce77f08aae3845cfdfe6e60.png)

**连结一号**

![在此处输入图像描述](../Images/1ac12100f445e1b89aa618cad9c14390.png)

我希望用户能够轻扫几个这样的透明演示页面，而不是“点击关闭”功能。

对于我的第一次尝试，我修改了[ViewPagerIndicator](http://viewpagerindicator.com/)库中的一个示例。我在每个视图寻呼机的片段内的 ImageViews 中使用了半透明的 PNG。然后，我在“主要活动”的 onCreate 方法中将其作为“演示活动”启动。

问题：在背景中看不到“主要活动”——它只是黑色的。[我在这里](https://stackoverflow.com/questions/2176922/how-to-create-transparent-activity-in-android)尝试了解决方案，但这并没有解决问题。

有没有更好的方法来创建这样的东西，还是我走在正确的轨道上？

我还有另一个相关的问题，这取决于它是如何实现的。我试图覆盖文本和箭头，使它们指向背景中的特定 UI 组件。通过使用包含文本和箭头的 PNG，它可能无法在不同的设备上正确缩放。即，箭头不一定指向背景中正确的 UI 组件。有没有办法解决这个问题？

谢谢！

这是我第一次尝试的代码：

**DemoActivity.java**

```
public class DemoActivity extends FragmentActivity {
    DemoFragmentAdapter mAdapter;
    ViewPager mPager;
    PageIndicator mIndicator;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.demo_activity);

        mAdapter = new DemoFragmentAdapter(getSupportFragmentManager());

        mPager = (ViewPager)findViewById(R.id.pager);
        mPager.setAdapter(mAdapter);
        //mPager.setAlpha(0);

        UnderlinePageIndicator indicator = (UnderlinePageIndicator)findViewById(R.id.indicator);
        indicator.setViewPager(mPager);
        indicator.setFades(false);
        mIndicator = indicator;
    }

} 
```

**DemoFragmentAdapter.java**

```
class DemoFragmentAdapter extends FragmentPagerAdapter {
    protected static final int[] CONTENT = new int[] { R.drawable.demo1, R.drawable.demo2, R.drawable.demo3, R.drawable.demo4};

    private int mCount = CONTENT.length;

    public DemoFragmentAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        return DemoFragment.newInstance(CONTENT[position % CONTENT.length]);
    }

    @Override
    public int getCount() {
        return mCount;
    }

    public void setCount(int count) {
        if (count > 0 && count <= 10) {
            mCount = count;
            notifyDataSetChanged();
        }
    } } 
```

**DemoFragment.java**

```
public final class DemoFragment extends Fragment {
    private static final String KEY_CONTENT = "TestFragment:Content";

    public static DemoFragment newInstance(int content) {
        DemoFragment fragment = new DemoFragment();
        fragment.mContent = content;
        return fragment;
    }

    private int mContent;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        if ((savedInstanceState != null) && savedInstanceState.containsKey(KEY_CONTENT)) {
            mContent = savedInstanceState.getInt(KEY_CONTENT);
        }
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        ImageView image = new ImageView(getActivity());
        image.setBackgroundResource(mContent);

        LinearLayout layout = new LinearLayout(getActivity());
        layout.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
        layout.setGravity(Gravity.CENTER);
        layout.addView(image);

        return layout;
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putInt(KEY_CONTENT, mContent);
    }
} 
```

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-08-30T07:54:05.447

将您的演示信息放在不同的活动中，并为其指定以下主题。

```
<style name="Transparent" parent="@android:style/Theme.NoTitleBar">
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowNoTitle">true</item>      
    <item name="android:backgroundDimEnabled">false</item>
</style> 
```

如果您使用 ActionBarSherlock 更改`parent`为`@style/Theme.Sherlock`.

这将为您提供一个透明的活动，因此您将能够看到它下面的活动。

现在我猜你也想要一个半透明的背景。

在（您的透明活动的）xml 布局中添加：

```
android:background="#aa000000" 
```

最后 6 位数字定义颜色：000000 为黑色。

前 2 个定义不透明度：00 为 100% 透明，ff 为 100% 不透明。所以选择介于两者之间的东西。

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2012-09-04T09:56:45.243

你看过 ShowcaseView 吗？[https://github.com/Espiandev/ShowcaseView](https://github.com/Espiandev/ShowcaseView)。

使用这个：

```
View showcasedView = findViewById(R.id.view_to_showcase);
ViewTarget target = new ViewTarget(showcasedView);
ShowcaseView.insertShowcaseView(target, this, R.string.showcase_title, R.string.showcase_details); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-11-11T17:16:34.900

Pulse 正在使用具有四个 ImageView 和四个 TextView 的 RelativeLayout。屏幕截图中的文本都是 TextView 的，具有自己的自定义字体。

在您的清单中将以下内容添加到您的活动中：

android:theme="@style/Theme.Transparent">

在您的外部 RelativeLayout 添加：

机器人：背景=“#aa000000”

到您的 styles.xml 文件：

```
<style name="Theme.Transparent" parent="android:Theme">
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowIsFloating">false</item>
    <item name="android:backgroundDimEnabled">false</item>
</style> 
```

如何编写自定义字体的示例，您可以在以下位置找到：

[https://github.com/commonsguy/cw-android/tree/master/Fonts/FontSampler/](https://github.com/commonsguy/cw-android/tree/master/Fonts/FontSampler/)

Hierarchy Viewer 的布局如下所示（红色框是 RelativeLayout 容器）：

![在此处输入图像描述](../Images/6dbda09fa507caef565ee920311a55bf.png)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-02-27T13:15:16.020

```
setContentView(R.layout.sample_main);
showOverLay();

private void showOverLay(){

    final Dialog dialog = new Dialog(context, android.R.style.Theme_Translucent_NoTitleBar);

    dialog.setContentView(R.layout.transparent);

    RelativeLayout layout = (RelativeLayout) dialog.findViewById(R.id.transparent);

    layout.setOnClickListener(new View.OnClickListener() {

        @Override

        public void onClick(View arg0) {

            dialog.dismiss();

        }

    });

    dialog.show();

} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-07-31T07:07:09.633

为此，您需要在主布局的底部创建帮助布局，例如：（结构）

```
<Parent layout>

<Layout 1>(Linear,Relative,....)
  Main layout
  your view...
</Layout 1>

<Layout help>
  set #70000000 as background of this layout 
  #70(transparent range can change) 000000(black)
  and height and width as fillparent
</Layout help>

</Parent layout> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-17T21:29:09.860

将主布局包装在 a 中`RelativeLayout`，然后向其中添加第二个布局，例如：

```
<RelativeLayout
    .... >

    <LinearLayout
        .... >

        <!-- Contents of your main layout -->

    </LinearLayout>

    <LinearLayout
        ....
        android:background="#44000000" > <!-- This is alpha 68/255, black -->

        <!-- Contents of your overlay layout -->

    </LinearLayout>

</RelativeLayout> 
```

我相信覆盖布局低于 XML 文件中的主要布局（如果有记忆的话）。然后，您可以在第二个布局中制作自己的布局，`ViewFlipper`，任何您想要的布局。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-12-28T12:18:36.213

做一个新的活动（比如教程）。

转到 Activity 的布局 xml 文件 (activity_tutorial)。在父布局下，添加 "android:background= #000" 和 "android:alpha= "0.5"

```
<RelativeLayout 

    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"

    tools:context=".Tutorial_Activity" 
    android:background="#000"
    android:alpha="0.5">
  ..................................................
  ....................................................
  .............................................
  ...............................................

  </RelativeLayout>
```

现在，转到应用程序清单文件并在您的教程活动下添加属性 android:theme="@android:style/Theme.Translucent.NoTitleBar">

```
<application>
 .........................................
..........................................
....................................
..........................................

<activity
            android:name="com.aird.airdictionary.Tutorial_Activity"
            android:label="@string/title_activity_tutorial"

          android:theme="@android:style/Theme.Translucent.NoTitleBar">

        </activity>
    </application>

</manifest>
```

就是这样，现在在任何其他活动之上运行此活动，您可以获得所需的结果。自定义、添加文本、图像视图和其他内容以获得您想要的教程屏幕。可以肯定的是，您可以使用这种技术使 viewpager 工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-17T21:54:40.520

您可以像他们那样查看 Android 启动器代码。我不知道那里执行。

如果是我，我会（如果只是一个简单的叠加层），所以您不会为您的应用程序搞砸布局，只需创建您的叠加层布局，然后通过直接将其添加到您的活动中，将其附加到您的应用程序布局上`WindowManager`。可以像在 中添加 a 一样简单`ImageView`，`WindowManager`监听对 的触摸`ImageView`，或者有一个超时以`ImageView`从您的`Window`.

# django - 使用 ManyToManyField 为多供应商方案设计 Django 模型？

> ID：12013335
> 
> 赞同：0
> 
> 时间：2012-08-17T21:20:50.153
> 
> 标签：django, django-models, many-to-many

我有一个**Item**模型及其尊敬的**Owner**，每个项目可以有多个所有者，每个所有者可以有多个项目。如下所示：

```
class User(models.Model):
    user = models.ForeignKey(DjangoUser)

class Item(models.Model):
    owners = models.ManyToManyField(User, through='**ItemOwner**')

class ItemOwner(models.Model): 
    item = models.ForeignKey(Item)
    owner = models.ForeignKey(User)

    class Meta(models.Model.Meta):
        db_table = 'items_owners' 
```

我还有一个类**Price**和**PremiumPrice**来设置商品的价格：

```
class **Price**(models.Model):
    price = models.DecimalField(max_digits=12) 

class **PremiumPrice**(models.Model):
    item = models.OneToOneField(Item)
    price = models.ForeignKey(Price) 
```

如您所见，每件商品只能由**PremiumPrice**类设置 1 个价格，每件商品归该商品的所有者所有，任何所有者都可以更改价格，但该商品的价格是唯一的。此外，当有人购买该项目时，它由类**PurchaseItem**处理，如下所示：

```
class PurchaseItem(models.Model):
    item = models.ForeignKey(Item)
    user = models.ForeignKey(User)

    class Meta:
        db_table = 'purchase_item'
        unique_together = ('item', 'user') 
```

现在，我想将其转换为多供应商方案。每个项目可以由多个所有者拥有，每个所有者可以为自己的项目设置自己的价格。所以我认为我需要做的是将价格添加到项目模型并创建一个新类**ItemPrice**（为每个项目添加价格）：

```
class Item(models.Model):
    owners = models.ManyToManyField(User, through='ItemOwner')
    prices = models.ManyToManyField(Price, through='ItemPrice')

class ItemPrice(models.Model): 
    item = models.ForeignKey(Item)
    price = models.ForeignKey(Price)
    class Meta(models.Model.Meta):
        db_table = 'items_prices' 
```

然后将类**PremiumPrice** : item 从 OneToOneField 更改为**ForeignKey**，还包括所有者：

```
 class PremiumPrice(models.Model):
        item = models.ForeignKey(Item)
        price = models.ForeignKey(Price)
        owner = models.ForeignKey(User) 
```

要记录每笔交易，类 PurchaseItem 还需要包含所有者，并且**unique_together**也需要新值：

```
class PurchaseItem(models.Model):
    item = models.ForeignKey(Item)
    user = models.ForeignKey(User)
    owner = models.ForeignKey(User)

    class Meta:
        db_table = 'purchase_item'
        unique_together = ('item', 'user', 'owner') # 
```

但我仍然不确定我是否正确。因此，如果您对我可能遇到的错误/陷阱有任何意见/建议，请告诉我。我真的很感激。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T21:38:03.567

您的模型似乎比他们需要的要复杂一些。您`through=`到处都在使用它，但实际上并不是必需的，除非您[向多对多关系添加额外的字段](https://docs.djangoproject.com/en/1.4/topics/db/models/#intermediary-manytomany)。

假设您的要求是描述的而不是编码的，您可以将其归结为：

```
class User(models.Model):
    user = models.ForeignKey(DjangoUser)
    owned_items = models.ManyToManyField(Item, through='ItemSale')
    purchased_items = models.ManyToManyfield(Item, related_name='purchasers')

class Item(models.Model):
    pass

class ItemSale(models.Model):
    owner = models.ForeignKey(User, related_name='owners')
    item = models.ForeignKey(Item)
    price = models.DecimalField(max_digits=12) 
```

您仍然可以访问项目的`owners`和`prices`（后者通过查看相关`ItemSale`对象）。

# quartz-scheduler - 每个时区的多个 Quartz 时间表

> ID：12013337
> 
> 赞同：3
> 
> 时间：2012-08-17T21:21:06.543
> 
> 标签：quartz-scheduler

我有一个石英作业，每天下午 3 点（服务器时间）运行。我想做的是让它在下午 3 点运行，但在美国的每个时区运行。石英作业会触发一封电子邮件给我的用户，我希望每个人都在他们的时间下午 3 点收到它。最好的方法是设置多个计划，然后在数据库中查询该触发器设置的时区中的用户吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T21:30:17.863

你的想法几乎是我能想到的最好和最干净的方法。一项具有多个触发器的作业 - 除了不同的时区之外相同。在作业中，您可以轻松检索当前正在使用的时区：

```
void execute(JobExecutionContext context) {
    TimeZone tz = ((CronTrigger)context.getTrigger()).getTimeZone();
    //find all users in tz
} 
```

# java - 从字符串中删除特定 unicode 范围的字符

> ID：12013341
> 
> 赞同：17
> 
> 时间：2012-08-17T21:21:22.237
> 
> 标签：java, regex, utf-8

我有一个从 twitter 流 api 实时解析推文的程序。在存储它们之前，我将它们编码为 utf8。某些字符最终会以 ?、?? 或 ??? 出现在字符串中 而不是他们各自的unicode代码并导致问题。经过进一步调查，我发现有问题的字符来自[“表情”块](http://www.fileformat.info/info/unicode/block/emoticons/index.htm)，U+1F600 - U+1F64F，和“杂项[符号和象形文字”块](http://www.fileformat.info/info/unicode/block/miscellaneous_symbols_and_pictographs/index.htm)，U+1F300 - U+1F5FF。我尝试删除，但没有成功，因为匹配器最终替换了字符串中的几乎每个字符，而不仅仅是我想要的 unicode 范围。

```
String utf8tweet = "";
        try {
            byte[] utf8Bytes = status.getText().getBytes("UTF-8");

            utf8tweet = new String(utf8Bytes, "UTF-8");

        } 
        catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        }
Pattern unicodeOutliers = Pattern.compile("[\\u1f300-\\u1f64f]", Pattern.UNICODE_CASE | Pattern.CANON_EQ | Pattern.CASE_INSENSITIVE);
Matcher unicodeOutlierMatcher = unicodeOutliers.matcher(utf8tweet);
utf8tweet = unicodeOutlierMatcher.replaceAll(" "); 
```

我该怎么做才能删除这些字符？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-17T21:33:11.690

在正则表达式模式中添加否定运算符`^`。对于过滤可打印字符，您可以使用以下表达式`[^\\x00-\\x7F]`，您应该得到所需的结果。

```
import java.io.UnsupportedEncodingException;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class UTF8 {
    public static void main(String[] args) {
        String utf8tweet = "";
        try {
            byte[] utf8Bytes = "#Hello twitter  How are you?".getBytes("UTF-8");

            utf8tweet = new String(utf8Bytes, "UTF-8");

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        }
        Pattern unicodeOutliers = Pattern.compile("[^\\x00-\\x7F]",
                Pattern.UNICODE_CASE | Pattern.CANON_EQ
                        | Pattern.CASE_INSENSITIVE);
        Matcher unicodeOutlierMatcher = unicodeOutliers.matcher(utf8tweet);

        System.out.println("Before: " + utf8tweet);
        utf8tweet = unicodeOutlierMatcher.replaceAll(" ");
        System.out.println("After: " + utf8tweet);
    }
} 
```

结果如下：

```
Before: #Hello twitter  How are you?
After: #Hello twitter   How are you? 
```

* * *

**编辑**

为了进一步解释，您还可以`\u`通过以下方式继续用表格表示范围`[^\\u0000-\\u007F]`，这将匹配所有不是前 128 个 UNICODE 字符的字符（与之前相同）。如果您想扩展范围以支持额外的字符，您可以使用此处的 UNICODE 字符列表[来](http://en.wikipedia.org/wiki/List_of_Unicode_characters)实现。

例如，如果您想包含带重音的元音（用于西班牙语），您应该将范围扩展到`\u00FF`，因此您有`[^\\u0000-\\u00FF]`or `[^\\x00-\\xFF]`：

```
Before: #Hello twitter  How are you? á é í ó ú
After: #Hello twitter   How are you? á é í ó ú 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-08-18T00:07:30.010

首先，相关的 unicode 块在 java 中（严格遵循标准）指定为[Character.UnicodeBlock MISCELLANEOUS_SYMBOLS_AND_PICTOGRAPHS](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.UnicodeBlock.html#MISCELLANEOUS_SYMBOLS_AND_PICTOGRAPHS)。在正则表达式中：

```
s = s.replaceAll("\\p{So}+", ""); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-09-06T04:53:06.097

我试过这个。Unicode 范围来自[表情符号范围](http://apps.timwhitlock.info/emoji/tables/unicode)

```
 class EmojiEraser{

    private static final String EMOJI_RANGE_REGEX =
                "[\uD83C\uDF00-\uD83D\uDDFF]|[\uD83D\uDE00-\uD83D\uDE4F]|[\uD83D\uDE80-\uD83D\uDEFF]|[\u2600-\u26FF]|[\u2700-\u27BF]";
        private static final Pattern PATTERN = Pattern.compile(EMOJI_RANGE_REGEX);

        /**
         * Finds and removes emojies from @param input
         * 
         * @param input the input string potentially containing emojis (comes as unicode stringfied)
         * @return input string with emojis replaced
         */
        public String eraseEmojis(String input) {
            if (Strings.isNullOrEmpty(input)) {
                return input;
            }
            Matcher matcher = PATTERN.matcher(input);
            StringBuffer sb = new StringBuffer();
            while (matcher.find()) {
                matcher.appendReplacement(sb, "");
            }
            matcher.appendTail(sb);
            return sb.toString();
        }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T21:55:56.510

假设`status.getText()`返回一个`java.lang.String`...

```
byte[] utf8Bytes = status.getText().getBytes("UTF-8");
utf8tweet = new String(utf8Bytes, "UTF-8"); 
```

上述转码操作产生与以下相同的结果：

```
utf8tweet = status.getText(); 
```

Java 字符串是隐含的 UTF-16。UTF-16 和 UTF-8 共享相同的字符集 (Unicode)，因此从一个字符集转换到另一个字符集并返回原始数据。

Java 正则表达式支持使用[代理对](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#toChars%28int%29)的补充范围。您可以按照[此问题](https://stackoverflow.com/questions/4237625)的答案中的说明匹配它们。

正如[eee](https://stackoverflow.com/users/980521/eee)在他的评论中指出的那样，您很可能遇到字体问题。能否显示字形通常取决于用户系统上可用的字体、选择的字体以及渲染技术支持的字体替换形式。

# javascript - 最佳实践：如何在服务器上验证/授权 AJAX 调用

> ID：12013345
> 
> 赞同：1
> 
> 时间：2012-08-17T21:21:58.620
> 
> 标签：javascript, php, ajax, authorization, jcryption

最后几天我想知道它是如何完成的？您如何验证/授权允许用户通过 AJAX 请求数据。

现在我使用 SESSIONS 进行身份验证。但这只是一个次要的保护。

假设我有一些名为 addUserToGroup($user_id,$group_id) 的函数，它通过以下方式调用

```
EXAMPLE: www.mysite.com/addUserToGroup/1/2  ( user_id = 1 , group_id = 2 ) 
```

如何检查该用户是否真的被允许加入 group_id=2？每个人都可以将数据发布到我的服务器......

我发现的一种解决方案是使用 jcryption（公钥/私钥方法）。但我认为，必须有一种更简单的方法来检查是否允许 user_id = 1 加入 group_id = 2。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T21:27:36.540

向表用户添加一个额外的字段：is_allowed_to_join_2 int(1)

当该人登录时，设置

```
$_SESSION['is_allowed_to_join_2'] = $user['is_allowed_to_join_2'] == 1 ? true : false; 
```

在 ajax 调用中，在您的 php 代码中：

```
if( $_SESSION['is_allowed_to_join_2'] !== true )
{
  exit("Not allowed");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T21:55:40.677

我相信您的问题是关于授权，而不是身份验证。如果我是对的，那么大概您已经知道用户是*谁*（身份验证，可能使用 cookie 或其他东西）。

现在，您必须想出一种方法来确定允许他们做什么（授权）。

授权逻辑确实是一个关键的设计决策。因此，它很重要，并且在很大程度上取决于数据模型的形状和应用程序的架构。

如果您可以通过对数据应用规则来始终如一地确定是否应该允许这样做，例如上面昆汀的回应（居住在区域 2 足以使用户可以加入组 2），那么通常最简单的方法是您的实体模型中的此逻辑。在这种情况下，我会在 User 上创建一个方法来检查他们是否可以加入该组......

```
function canJoinGroup($group) {
    //if(all is well), then:
    return true
} 
```

或者创建一个方法来加入它们，如果不允许，则会引发错误：

```
function joinGroup($group) {
    //if(all is well), then:
    return true;
    //otherwise:
    throw new Exception("User ". $this->id ." cannot join group " . $group->id);
} 
```

您还可以向 Group 添加一个函数，该函数代表这个新的 User 函数：

```
function addUser($user) {
    $user->joinGroup($this);
} 
```

OTOH，如果关于谁可以做什么的决定是基于更细化的权限，或者基于管理员或用户需要能够在运行时更改的信息，那么您将不得不变得更加花哨。一种常用、通用且灵活的方法称为[基于角色的访问控制](http://en.wikipedia.org/wiki/Role-based_access_control)（又名 RBAC）。

这可能会变得非常复杂，但是应用于您的案例的核心概念是您有一个用户、实体（组）和一个操作（加入）。您需要确定是否允许用户 1 以组 2 作为参数执行名为“加入”的操作。

为此，您必须在某处保留一组规则，然后做两件事：

1.  将新用户和组添加到系统或管理员更改其权限时，使这些表保持最新
2.  检查每个请求的这些表以查看用户是否可以对实体执行操作（检查用户*是否*可以*加入**组*）

我不会深入探讨这个用例的底层细节。可以这么说，如果您今天要完成的工作最终需要发展成一个相当复杂的权限系统，那么您最好学习一下 RBAC。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T21:26:51.257

> 您如何验证/授权允许用户通过 AJAX 请求数据。

与您对任何其他 HTTP 请求进行 auth/authz 相同的方式。

> 或者现在我正在使用 SESSIONS 进行身份验证。

会话是跟踪用户是否登录以及他们以谁身份登录的明智方式。

> 如何检查该用户是否真的被允许加入 group_id=2？

会话数据告诉您用户是谁。

最重要的是，您实现业务逻辑以确定是否允许他们加入组 2。我们无法告诉您那是什么，因为我们不知道业务逻辑是什么。

例如，如果仅允许区域 2 国家/地区的用户加入组 2，那么您的逻辑可能类似于：

```
IF session exists
AND user is logged in
AND user's country is in region 2
THEN authorized 
```

确定用户的国家/地区是否在区域 2 可以使用一些 SQL 来完成，例如

```
SELECT user_id FROM members, countries WHERE user=:username AND members.country=countries.id AND countries.region=:region 
```

# ajax - 如何在 Ajax 表单中使用 MVC3 客户端表单验证？

> ID：12013346
> 
> 赞同：0
> 
> 时间：2012-08-17T21:22:02.213
> 
> 标签：ajax, asp.net-mvc-3, validation

整件事是，我希望能够在我自定义编写的 Ajax 代码上使用 MVC3 内置的客户端验证。（我说的是使用`HTML.BeginForm()`&制作的表单中可用的验证`Ajax.BeginForm()`）

我的模型如下所示：

```
public class BrandVewModel
    {
        public int ID { get; set; }

        [Display(Name = "Brand Name")]
        [Required(ErrorMessage = "Please fill in the blank!")]
        [StringLength(40, ErrorMessage = "The name must not be more than 40 characters long!")]
        public string Name { get; set; }
    } 
```

我的视图看起来像这样：

```
@using (Ajax.BeginForm("Insert_Brand", "Admin", FormMethod.Post, new AjaxOptions { UpdateTargetId = "result" }))
{
    @Html.HiddenFor(model => model.ID)
    @Html.ValidationMessageFor(model => model.Name)
    @Html.LabelFor(model => model.Name)
    @Html.TextBoxFor(model => model.Name)

    <input value="Create"  type="submit" name="Create New Brand"  />

    <div id="result"></div>
} 
```

如您所见，我正在使用`Ajax.BeginForm()`哪个好。显然，对于我的视图模型，如果用户将名称字段留空并单击提交按钮，他们将显示相应的错误，而不会将表单数据发送到服务器！（因为它是客户端，表单验证，感谢 jQuery）

但是我需要如下所示的简单表单，（而不是`Ajax.BeginForm()`）并具有所有客户端验证功能：

```
<form method="post" action="@Html.Action("Insert_Brand","Admin")">

    @Html.HiddenFor(model => model.ID)
    @Html.ValidationMessageFor(model => model.Name)
    @Html.LabelFor(model => model.Name)
    @Html.TextBoxFor(model => model.Name)

    <a onclick="CreateBrand()">Create Brand</a>

</form>

//    honestly I have no idea what 'custom-written ajax coding', or what I do here is called :p 

    <script type="text/javascript" >
            function CreateBrand() {
                var item = { Brand: { Name:$('#Name').val()} };
                $.ajax({
                    url: '/Admin/Insert_Brand',
                    type: "POST",
                    data: JSON.stringify(item),
                    dataType: "text json",
                    contentType: "application/json; charset=utf-8",
                    success: function (t) {
                        console.log(t);
                        $("#result").html(t);
                        return;
                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        console.log("Failed!");
                        console.log("XMLHttpRequest=" + XMLHttpRequest.responseText + "\ntextStatus=" + textStatus + "\nerrorThrown=" + errorThrown);
                    }
                });
            }
        </script> 
```

正如我所说，当我使用这种 ajax 表单发布时，我需要向用户显示所有好的验证消息。但我不知道我怎么能做到这一点......

有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T12:30:48.367

客户端验证在您的情况下不起作用的原因是因为您已经对`<form>`标签进行了硬编码，因此没有任何东西可以实例化`FormContext`. 在没有 FormContext 的情况下，HTML 助手（例如）`TextBoxFor`不会发出任何 HTML5 data-* 验证属性，这些属性由不显眼的框架使用。

所以只需使用`Html.BeginForm`助手：

```
@using (Html.BeginForm("Insert_Brand", "Admin"))
{
    @Html.HiddenFor(model => model.ID)
    @Html.ValidationMessageFor(model => model.Name)
    @Html.LabelFor(model => model.Name)
    @Html.TextBoxFor(model => model.Name)

    <a onclick="CreateBrand()">Create Brand</a>
} 
```

但是，我建议您使用提交按钮并订阅该事件，而不是订阅锚的 onclick`.submit()`事件。这样做的原因是，当焦点在文本框内时，用户可以按`Enter`键盘上的 提交表单，然后表单将通过正常请求提交。您的 AJAX 处理程序将永远不会运行。

所以：

```
@using (Html.BeginForm("Insert_Brand", "Admin", FormMethod.Post, new { id = "myForm" }))
{
    @Html.HiddenFor(model => model.ID)
    @Html.ValidationMessageFor(model => model.Name)
    @Html.LabelFor(model => model.Name)
    @Html.TextBoxFor(model => model.Name)

    <button type="submit">Create Brand</button>
} 
```

然后在一个单独的 javascript 文件中：

```
$(function() {
    $('#myForm').submit(function() {

        var item = { Brand: { Name: $('#Name').val() } };
        $.ajax({
            url: this.action,
            type: this.method,
            data: JSON.stringify(item),
            contentType: 'application/json; charset=utf-8',
            success: function (t) {
                console.log(t);
                $('#result').html(t);
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                console.log("Failed!");
                console.log("XMLHttpRequest=" + XMLHttpRequest.responseText + "\ntextStatus=" + textStatus + "\nerrorThrown=" + errorThrown);
            }
        });

        return false;
    });
}); 
```

但是，如果出于某种神秘的原因，您坚持手动硬编码此`<form>`标记而不是使用为此目的而设计的帮助程序，您也可以通过在视图顶部添加以下行来手动创建 FormContext：

```
@{
    ViewContext.FormContext = new FormContext();
} 
```

从而诱使 Html 助手相信它们在表单中并强制它们发出 HTML5 data-* 验证属性。

# jquery - 添加单独的表行和使用行跨度之间的区别

> ID：12013349
> 
> 赞同：0
> 
> 时间：2012-08-17T21:22:18.913
> 
> 标签：jquery, html-table

有什么区别：

```
jQuery('tr').after('<tr><td rowspan="4">value</td></tr>') 
```

并调用了 4 次

```
jQuery('tr').after('<tr><td>value</td></tr>') 
```

我正在尝试从

```
 row1  |_____|_______|_______|
  row2  |     |___tr__|_______| 
  row3  |     |       |_______| 
  row4  |_____|_______|_______|
          col1   col2    col3 
```

对此：

```
 _______________________
  row1  |_____|_______|_______|
  row2  |     |___tr__|_______| 
  row3  |     |       |       | 
  row4  |_____|_______|_______|
          col1   col2    col3 
```

我想隐藏 row3 和 row4，创建一个需要 2 行的 tr。

使用jQuery，因为我想通过点击来改变它，它是一个项目的一部分

它对我不起作用的原因是，如果我使用 rowspan= n ，我需要在末尾附加 n 行以使其工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T21:25:12.023

`$('tr').after('<tr><td>value</td></tr>')`当被调用四次时，调用会为每个单元格启动一个新行 。

如果您希望一行中的一个单元格占用四行的内容，那么您将使用您的第一个语句。

# java - 无状态 ejb 不移除池

> ID：12013360
> 
> 赞同：6
> 
> 时间：2012-08-17T21:23:48.090
> 
> 标签：java, memory-leaks, jboss, ejb

我遇到了内存泄漏问题，因为 EJB 没有从池中删除。ejb 是 3.0 和无状态的。

```
In my jboss jmx-console 4.3, the statistics of a particular ejb looks like:

AvailableCount  30
MaxSize     30
CurrentSize     5727
CreateCount     5727
RemoveCount     0 
```

我的问题是：为什么“删除计数”没有增加？并且“当前大小”大于“MaxSize”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T05:07:15.070

伙计，您遇到了一个可怕的错误，其中 SLSB 没有被清除和泄漏......我们几周前在我们的生产环境中遇到了这个问题......

JBoss 甚至推荐的唯一解决方法是使用`StrictMaxPool`而不是`ThreadLocalPool`用于您的 SLSB。明智地选择计数。

你应该修改`ejb3-interceptors-aop.xml`

```
<domain name="Stateless Bean">
...
  <annotation expr="!class(@org.jboss.annotation.ejb.PoolClass)">
     @org.jboss.annotation.ejb.PoolClass (value=org.jboss.ejb3.StrictMaxPool.class, maxSize=30, timeout=10000)
  </annotation>
</domain> 
```

这里有一些链接可以让你了解一些......

[JBoss 中的无状态会话 bean 池](https://issues.jboss.org/browse/EJBTHREE-1175?page=com.atlassian.jira.plugin.system.issuetabpanels%3aall-tabpanel)

[在每个 onMessage MDB 调用上注入的新资源实例](https://issues.jboss.org/browse/JBAS-5345)

[ThreadlocalPool 不会从 InfinitePool 中移除活动的 BeanContext 实例](https://community.jboss.org/message/363520)

# javascript - 如果 URL 的链接返回错误，则禁用 HTML 链接

> ID：12013368
> 
> 赞同：6
> 
> 时间：2012-08-17T21:24:57.437
> 
> 标签：javascript, jquery, html

我有一个链接到另一个页面的按钮。在单击该链接之前，我想检查该页面当前是否返回错误或者它是否不存在。我该如何编码？这可能吗？如果链接不存在或返回错误，我想禁用链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T21:29:22.427

您可以使用 ajax 加载页面，然后对其进行解析以查看是否有错误，然后再重定向用户。我还会向用户说明链接为什么不起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T21:34:48.967

请注意，我会在服务器端执行此操作。但是，由于您的标签与 jquery 相关，因此我发布了一个您可以尝试使用 jquery 的解决方案。

使用 jquery 你可以：

```
var link = $('#id_of_your_a_element');
$.ajax(
    url: link.attr('href'),
    error: function() { 
        link.hide();
    }
); 
```

**编辑**

正如 ribot 所指出的，这个例子只是隐藏了链接。如果要禁用它，可以在用户单击链接时阻止默认行为：

```
link.click(function(e) {
    e.preventDefault();
}); 
```

或者只是删除 href 属性：

```
link.removeAttr('href'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T21:31:43.333

正如有人问的那样，您使用的服务器端编程语言是什么，如果有的话？

在此处查看答案：[如何使用 Javascript/Ajax 但不使用 jQuery 获取远程 URL 的状态代码？](https://stackoverflow.com/questions/7493831/how-to-get-status-code-of-remote-url-using-javascript-ajax-but-not-using-jquery). 与此相同的问题，答案涵盖了所有基础。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T21:49:39.547

单击每个请求的 Ajax，即使它是 HEAD 请求（这是您通常应该用来测试 url 的存在，因为这就是 HTTP 动词首先存在的原因），只是让我觉得这是一个非常糟糕的主意，即使您可以克服可能无法克服的跨域问题（除非您涉及由 ajax 调用的某种服务器端检查）。现在，我想你也许可以在某个地方保存响应，这样就不会重新检查链接（在客户端或服务器端），但这仍然让我觉得这是一个非常复杂的解决方案，通常不会需要解决。

# itextsharp - 使用 ItextSharp 在其他页面上添加数据

> ID：12013383
> 
> 赞同：0
> 
> 时间：2012-08-17T21:26:33.057
> 
> 标签：itextsharp

这个问题，关于使用 itextSharp 创建 pdf

我在该表的第一行中的文档中添加了表，我手动添加了名称，ID 等，并且该表名称和 id 来自数据库现在我的问题是，当页面再次结束时，我想手动添加相同的行，例如名称, ID 和数据将继续来自数据库所以我该怎么办？请帮我解决这些问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:45:00.523

这完全取决于您如何创建文档。您是追加到现有文档，还是从头开始生成新文档？无论哪种方式，您可能最终都会使用`PageEvents`来完成此操作。`OnPageEnd`当作者到达新页面的开头时，您可以编写自定义事件来“重写”表头。如果你是从“从头开始”的角度来做这件事，它可能会变得很棘手，但你应该没问题，只要你在**期间触发事件**你的表创建。如果您要附加到现有文档，最好创建一个包含表格的文件，并在完成表格后将它们合并在一起。无论哪种方式，这都不是一个特别复杂的过程。如果您在 for 或 while 循环中创建表，例如：

```
for(int i = 0; a < 100; i++)
{
    //OnPageEnd Event that adds the Table Header
    table.addCell(cell)
} 
```

这样，对于循环的每次迭代，它都会检查是否必须写入新页面。如果没有，它将继续添加单元格。如果是这样，它将插入您的标题行，并继续循环。

这应该很简单。我通常会创建一个包含我的页面事件的类文件，并在需要时调用它们。创建类文件并创建函数后，只需添加用于将当前标题写入事件的代码即可。页面事件似乎比实际更令人生畏，但是一旦您花一点时间阅读一下它们，您就可以省去很多麻烦，并且可以创建更多动态文档。

希望这为您指明了一个好的方向，因为我自己在创建表格和干净地处理分页符方面遇到了困难。

**编辑**

* * *

我将向您展示一种简单的方法，用于创建一个简单的 1 单元格表，但它可以扩展到您需要的任意数量。这是假设您正在为表格文件创建一个单独的文档，然后将它们合并。这实际上不是您问题的一部分，因此除非您要求进一步说明如何解决此问题，否则我会将其省略。

```
private void appendTable(string inputFile, string outputFile, string id)
{
    Document outputDoc = new Document(PageSize.LETTER, 15, 15, 35, 50);
    PdfReader reader = new PdfReader(inputFile);
    string sql = string.Format("SELECT * FROM table WHERE id='{0}'", id);
    try
    {
        DataTable dt = db.GetDataTable(sql);
        PdfPTable table = new PdfPTable(1);
        iTextSharp.text.Font arial = FontFactory.GetFont("Arial", 8);
        iTextSharp.text.Font arialheader = FontFactory.GetFont("Arial", 12);
        table.WidthPercentage = 95;
        PdfPCell headerCell = new PdfPCell(new Phrase("Cell Header", arialheader));
        headerCell.HorizontalAlignment = 1;
        table.AddCell(headerCell);

        PdfWriter wr = PdfWriter.GetInstance(outputDoc, new FileStream(outputFile, FileMode.Create, FileAccess.ReadWrite));
        foreach(DataRow row in dt.Rows)
        {
            PdfPCell cell = new PdfPCell(new Phrase("Cell Text", arial));
            meterCell.HorizontalAlignment = 1; //Center Aligned
            table.AddCell(meterCell);
        }

        outputDoc.Open();
        wr.PageEvent = new PageEvents.Header();
        wr.PageEvent = new PageEvents.Footer();
        outputDoc.Add(table);
        outputDoc.NewPage();
        outputDoc.Close();
    }

    catch (PdfException ex)
    {
        MessageBox.Show(ex.Message.ToString() + " **** " + ex.StackTrace);
    }
    catch (NpgsqlException ex)
    {
    MessageBox.Show(ex.Message.ToString() + " **** " + ex.StackTrace);
    }
 } 
```

# c# - 只有 assignment、call、increment、decrement、await 和 new 对象表达式可以用作语句

> ID：12013389
> 
> 赞同：0
> 
> 时间：2012-08-17T21:26:53.113
> 
> 标签：c#, vb.net, urlencode

我已经将 4,000 行代码从 VB.net 转换为 c#...我完全被这个问题绊倒了。这一直给我一个错误“只有赋值、调用递增、递减、等待和新对象表达式可以用作语句”

关于这里的错误有什么帮助吗？它还会引发查询正文必须以 select 子句或 group 子句结尾的错误。

```
protected static string AssembleArgumentString(Dictionary<string, string> @params,   bool urlEncode)
{
   if (urlEncode) {
     return string.Join("&", (from kv in @params where !string.IsNullOrEmpty(kv.Value)kv.Key + "=" + System.Web.HttpUtility.UrlEncode(kv.Value)).ToArray);
   } 
   else {
     return string.Join("&", (from kv in @params where !string.IsNullOrEmpty(kv.Value)kv.Key + "=" + kv.Value).ToArray);
   } 
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T21:30:28.003

```
protected static string AssembleArgumentString(Dictionary<string, string> @params,   bool urlEncode)
{
    if (urlEncode)
    {
        return string.Join("&", (from kv in @params where !string.IsNullOrEmpty(kv.Value)
                                 select kv.Key + "=" + System.Web.HttpUtility.UrlEncode(kv.Value)));

    }
    else
    {
        return string.Join("&", (from kv in @params where !string.IsNullOrEmpty(kv.Value)
                                 select kv.Key + "=" + kv.Value));
    } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T21:30:36.780

您的 LINQ 查询中需要一个`select`子句。例如：

```
return string.Join("&", (from kv in @params where !string.IsNullOrEmpty(kv.Value) select kv.Key + "=" + kv.Value).ToArray()); 
```

另外，不要忘记方法调用`()`末尾的。`ToArray`实际上，您甚至不需要，`ToArray()`因为`String.Join()`也可以使用`IEnumerable`。

# java - Java Logger 控制台流重复输出

> ID：12013393
> 
> 赞同：6
> 
> 时间：2012-08-17T21:27:19.917
> 
> 标签：java, logging, formatting

我希望这个问题有一个简单的答案。我正在尝试将记录器添加到我的 Java 应用程序。我能够完美地格式化日志文件，但是在尝试将 ConsoleHandler 添加到记录器以格式化控制台输出时遇到了问题。

添加 ConsoleHandler 后，每条日志消息都不会打印三次，两次以我想要的正确格式打印，然后一次以我不想要的原始格式打印。

我会在下面发布我的代码，完全不确定我做错了什么。
任何帮助将不胜感激。

```
// remove and handlers that will be replaced
Handler[] handlers = logger.getHandlers();
for(Handler handler : handlers)
{
    if(handler.getClass() == ConsoleHandler.class || handler.getClass() == FileHandler.class)
        logger.removeHandler(handler);
}

// file handler
FileHandler fh = new FileHandler(file.toString());
fh.setFormatter(new MS2Formatter());
logger.addHandler(fh);

// console handler
ConsoleHandler ch = new ConsoleHandler();
ch.setFormatter(new MS2Formatter());
logger.addHandler(ch);

logger.setLevel(Level.INFO); 
```

**编辑：**回答

只是想在这里发布我的最终代码，以帮助有类似问题的任何人。

```
logger = Logger.getLogger("My Logger");     
logger.setUseParentHandlers(false);

// remove and handlers that will be replaced
Handler[] handlers = logger.getHandlers();
for(Handler handler : handlers)
{
        if(handler.getClass() == ConsoleHandler.class)
            logger.removeHandler(handler);
}

// setup the file
File file = new File(location + "/" + fileName);

// file handler
FileHandler fh = new FileHandler(file.toString(), true);
fh.setFormatter(new MS2Formatter());
logger.addHandler(fh);

// console handler
ConsoleHandler ch = new ConsoleHandler();
ch.setFormatter(new MS2Formatter());
logger.addHandler(ch);

// remove and handlers that will be replaced
logger.setLevel(Level.INFO); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-17T21:32:42.913

您究竟需要多少个处理程序？`addHandler()`将您创建的处理程序添加到与该记录器关联的处理程序中。因此，您拥有了默认处理程序，以及您在代码中添加的 2 个 - FileHandler 和 ConsoleHandler。

`getHandlers()`您可以使用该方法获取当前的处理程序集，并用于`removeHandler()`删除您不需要的处理程序。

**编辑**

在您的情况下，可能正在使用父处理程序。因此，即使您认为您正在删除处理程序，但如果您实际调试代码，您会发现在 for 循环中执行期间您根本不会真正删除处理程序（或至少不是 ConsoleHandler）。

要防止使用父处理程序，请使用此语句。

```
logger.setUseParentHandlers(false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T21:30:34.267

在添加 ConsoleHandlers 之前，请尝试删除旧的控制台处理程序。奇怪的是，您现在以不改变原始控制台处理程序的方式登录到控制台，并且它也在链中以回显新添加的控制台处理程序的输出，因此每条消息有 3 个日志。

# python - 在 Python 中，判断一个函数是否调用另一个函数

> ID：12013399
> 
> 赞同：2
> 
> 时间：2012-08-17T21:27:48.680
> 
> 标签：python, introspection

如何以编程方式确定一个函数是否调用另一个函数？我无法修改任何一个功能。

这是我想要的（`source_calls_target`）：

```
>>> def check():
>>>     pass
>>> def test_check():
>>>     check()
>>> def source_calls_target(source, target):
>>>     # if source() calls target() somewhere, return True
>>>     ???
>>> source_calls_target(test_check, check)
True
>>> source_calls_target(check, test_check)
False 
```

理想情况下，我不想实际调用`target()`.

理想情况下，我想检查调用是否`target()`出现在`source`. 根据条件语句，它可能会或可能不会真正调用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T22:23:38.183

如果您可以保证可以访问源代码，则可以使用`ast.parse`：

```
import ast
call_names = [c.func.id for c in ast.walk(ast.parse(inspect.getsource(source)))
              if isinstance(c, ast.Call)]
return 'target' in call_names 
```

请注意，调用总是按名称进行的，因此很难（并且可能不可能）判断调用是对特定函数还是对另一个同名函数。

在没有源代码的情况下，唯一的方法是通过反汇编：

```
import dis
def ops(code):
    i, n = 0, len(code)
    while i < n:
        op = ord(code[i])
        i += 1
        if op == dis.EXTENDED_ARG:
            ext = ord(code[i]) + ord(code[i+1])*256
            op = ord(code[i + 2])
            i += 3
        else:
            ext = 0
        if op >= dis.HAVE_ARGUMENT:
            arg = ord(code[i]) + ord(code[i+1])*256 + ext*65536
            i += 2
            yield op, arg
        else:
            yield op, None

source_ops = list(ops(source.func_code.co_code)) 
```

问题是实际上不可能判断一个函数是在*调用*另一个函数还是只是在加载对它的引用。如果另一个函数被传递给`map`or`reduce`等​​等，那么它将被调用，但它可能不会被传递给另一个函数。实际上，明智的做法是假设如果函数在，`source.func_code.co_names`那么它可能会被调用：

```
'target' in source.func_code.co_names 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T21:54:06.433

这是一个使用 sys.settrace() 的简单示例。它确实需要调用源函数才能工作。它也不能保证工作，因为在极少数情况下，两个不同的函数可能共享同一个代码对象。

```
import sys

def check():
    pass

def test_check():
    check()

def source_calls_target(source, target):
    orig_trace = sys.gettrace()
    try:
        tracer = Tracer(target)
        sys.settrace(tracer.trace)
        source()
        return tracer.called
    finally:
        sys.settrace(orig_trace)

class Tracer:
    def __init__(self, target):
        self.target = target
        self.called = False

    def trace(self, frame, event, arg):
        if frame.f_code == self.target.func_code:
            self.called = True

print source_calls_target(test_check, check)
print source_calls_target(check, test_check) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T21:50:36.147

可能非常丑陋的方式，但它的工作原理：

```
import profile

def source_calls_target(source, target):
    pro = profile.Profile()
    pro.run(source.__name__ + '()')
    pro.create_stats()
    return target.__name__ in [ele[2] for ele in pro.stats] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T22:15:41.197

我一直想出一些最终看起来与@Luke 的好答案非常相似的东西。我的只是一个简单的函数，但它会检查目标函数的直接调用者是否是源函数：

```
import sys
from functools import partial

def trace_calls(call_list, frame, event, arg):
    if event != 'call':
        return
    call_list.append(frame.f_code)

def test_call(caller, called):
    traces = []
    old = sys.gettrace()
    sys.settrace(partial(trace_calls, traces))
    try:
        caller()
    finally:
        sys.settrace(old)

    try:
        idx = traces.index(called.func_code)
    except ValueError:
        return False

    if idx and traces[idx-1] == caller.func_code:
        return True

    return False 
```

和测试...

```
def a():
    b()

def b():
    pass

def c():
    a()

test_call(c,a) #True
test_call(a,b) #True
test_call(c,b) #False 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-17T22:26:34.593

这篇文章[http://stefaanlippens.net/python_inspect](http://stefaanlippens.net/python_inspect)会帮助你

# php - 如何使用“复杂”数学函数创建虚拟字段

> ID：12013402
> 
> 赞同：0
> 
> 时间：2012-08-17T21:28:01.340
> 
> 标签：php, mysql, cakephp, e-commerce

我正在创建一个简单的电子商务网站，正如我[在这里](https://stackoverflow.com/questions/12000269/insert-total-value-of-order-or-calculate-every-time)问的那样，我是否应该或不应该在数据库中插入订单总数......一般的答案是“不”，所以我接受了。

但是现在，我正在做一些事情，我记得 Mysql 不是一个 SELECT/UPDATE/DELETE 家伙，也许，他可以执行`math`计算订单总数......

我实际上有 2 张桌子：

*   订单
*   产品（具有数量和价格值）

有没有办法创建一个虚拟字段（在 CakePHP 中），用这两个值自动计算订单的总值？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T22:02:33.060

为什么不先制作 2 个表 (x_orders_products) 的 id,order_id , product_id, quantity, date 和另一个 (orders) 的 id, user_id 。在插入订单时获取最后插入的 id 蚂蚁然后插入 x_orders_products 然后根据这些数据生成一个视图来计算订单。

# javascript - jsLint 仍然给出警告“在定义之前使用了 X。” 即使设置了 undef

> ID：12013406
> 
> 赞同：4
> 
> 时间：2012-08-17T21:28:25.927
> 
> 标签：javascript, jslint

最近 js 文件中的一个错字导致我的一个项目出现问题，但仅限于某些浏览器。我正在尝试通过 jsLint 运行我们的大部分 js 文件以查找任何其他未检测到的问题。目标是让我们所有的 js 文件通过 jsLint 或者通过更正问题或者如果我对问题没问题然后打开适当的 jsLint 选项。

如果我能做到这一点，那么将来我想找到一种更频繁地运行 jsLint 的方法，但首先我需要让所有文件都通过。

不过，我在一个问题上遇到了很多麻烦。我不断收到“在定义之前使用 X”的警告/错误。我可以在定义之前使用项目，所以我想关闭这个警告。我尝试在顶部的评论中设置 undef: true 并通过网络界面设置复选框，但截至今天，我仍然收到此错误。

这个选项是坏的还是我做错了什么或误解了这个选项的作用。

根据[文档](http://www.jslint.com/lint.html)，这应该适用于功能。

我目前正在使用 jsLint[网络工具](http://jslint.com/)来扫描下面的代码。

```
/*jslint undef: true, white: true, browser: true */
/*global jQuery */

(function($){
    "use strict";

    $(function() {
        createDashboard();
        loadDashboardDataFromControls();
    });

    function loadDashboardDataFromControls()
    {
    }

    function createDashboard()
    {
    }
}(jQuery)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T07:24:36.127

根据[JSLint 源代码](https://github.com/douglascrockford/JSLint/blob/421db19f9242546d461dd9f68b381583112a04c5/jslint.js#L2404)（撰写本文时的最新提交），在*严格模式下*`undef`是 sef ：`false`

 *```
function use_strict() {
    if (next_token.string === 'use strict') {
        if (strict_mode) {
            warn('unnecessary_use');
        }
        edge();
        advance();
        semicolon();
        strict_mode = true;
        option.undef = false;
        return true;
    }
    return false;
} 
```

正如我假设您知道的那样，您可以通过重新排列源代码来轻松避免警告。简单地移动`loadDashboardDataFromControls()`和`loadDashboardDataFromControls()`上面`$([...])`。

注意：虽然在*严格模式下*，变量需要在使用前定义，但您的代码显然*不会*违反该规则。所以，在我看来，我们看到的至少是一个文档错误：JSLint 文档应该说明在严格模式下，`undef`标志设置为`false`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-04T21:25:06.263

要禁用此消息，您可以在项目的根目录中创建一个 .jshintrc 文件并添加代码：

```
{
   "latedef": false
} 
```*

# iphone - 带有 CCActionTween 的 SimpleAudioEngine 背景音量

> ID：12013408
> 
> 赞同：0
> 
> 时间：2012-08-17T21:28:45.197
> 
> 标签：iphone, ios4, cocos2d-iphone, simpleaudioengine

是否可以使用 CCActionTween 对 SimpleAudioEngine 背景音乐产生淡出效果？我知道 volume 属性是 1 到 0 之间的浮点数。

如果可能的话，将非常感谢示例代码。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T10:56:23.453

AFAIK，cocos2d 中没有任何机制可以执行您的要求。CCNode 派生类具有 runAction 方法，但没有用于嵌入声音控件的 CCNode 派生类。我在主循环中执行声音淡入淡出，如下[所示](https://stackoverflow.com/questions/10691897/cocosdenshion-music-fade-out/10709369#10709369)。***fadeOutBackgroundMusic***方法由单例公开，并且在代码中的任何位置都可用。它有一个对应的 fadeInBackgroundMusic 方法。

# knockout.js - 如何在 knockoutjs 中更新绑定或删除较早的绑定

> ID：12013411
> 
> 赞同：1
> 
> 时间：2012-08-17T21:29:05.847
> 
> 标签：knockout.js, knockout-mapping-plugin

我有以下代码从 ajax 调用中获取数据并与我页面的不同部分绑定。

```
$.getJSON("api/RedeemProduct", { 'productId': productId }, function (data) {
    categoryViewModel = ko.mapping.fromJS(data[0].WishlistProduct.WishlistCategory);
    ko.applyBindings(categoryViewModel, $('section.intro').get(0));

    activityTypesViewModel = ko.mapping.fromJS(data);
    ko.applyBindings(activityTypesViewModel, $('.categories-gallery .frame').get(0));

    activeActivityViewModel = ko.mapping.fromJS($('.categories-gallery .frame .category.active').data('wishlist-activity'));
    ko.applyBindings(activeActivityViewModel, $('#details-box').get(0)); 
```

请参阅代码中的第一行，我正在获取特定产品的数据。下次如果我使用相同的代码绑定不同产品的数据，绑定不会被更新，而是因为调用 ko.applyBindings() 而多次添加相同的产品

我应该怎么做才能删除旧绑定并将新数据与部分绑定？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T21:42:48.113

停止使用`ko.applyBindings`不止一次。我觉得这需要进入标签维基。

永远，永远不要这样做。

调用`ko.applyBindings`一次（每个元素，如果你这样做的话，但仍然是*一次*）。之后，更新您的视图模型将自动更新绑定的元素。这就是绑定的*全部要点*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T18:37:33.220

我找到了解决方案，我必须打电话

```
ko.mapping.fromJs 
```

并传递需要更新的`newdata`和`viewmodel`

```
ko.mapping.fromJS(data[0].WishlistProduct.WishlistCategory, categoryViewModel); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T21:44:32.227

查看 Knockout.js 官方页面中解决此问题的[教程](http://learn.knockoutjs.com/#/?tutorial=loadingsaving)。

简而言之，您应该`applyBindings()`只调用一次（对于给定的页面部分），并且在检索更新的数据时，您应该像这样用新数据更新可观察视图模型

```
var updatedCategoryViewModel = ko.mapping.fromJS(data[0].WishlistProduct.WishlistCategory);
categoryViewModel(updatedCategoryViewModel); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-19T19:42:46.957

希望这对某人有所帮助，Knockout 对我来说是一段旅程，也是一个令人心碎的模特。

单击按钮时，我需要加载或多或少的东西，所以起初我认为这会对我有所帮助，这是我的第一种方法：

```
var Task = function(name, description) {
    this.name = ko.observable(name);  
    this.description = ko.observable(description);      

}

var ViewModel = function() {
    var self = this;
    self.tasks = ko.observableArray();

    self.clearTask = function(data, event) {

           self.tasks.remove(data);   

    };
    self.addTask = function() {
        var task = new Task("new", "");        
        self.tasks.push(task);
    };
    self.addTask2 = function (name, description)
    {
        var task = new Task(name, description);        
        self.tasks.push(task);
    }

};
var vm = new ViewModel();
vm.addTask2("Dog Food","description");
ko.applyBindings(vm);

function ClickedMoreItems()
{
    vm = new ViewModel()
    vm.addTask2("Dog Food2","description");
    vm.addTask2("Dog Food3","description");    

}
function ClickedLessItems()
{
    vm = new ViewModel()
    vm.addTask2("Dog Food4","description");        

} 
```

一旦我点击 ClickedMoreItems() 什么都没有发生。所以我决定在每个函数中再次使用`ko.applyBindings(vm);`它，它有点工作。但是当我点击 ClickedLessItems 时，“Dog Food4”被复制了两次。

```
function ClickedMoreItems()
    {
        vm.Clear();
        vm.addTask2("Dog Food2","description");
        vm.addTask2("Dog Food3","description");    
        ko.applyBindings(vm);        
    }
    function ClickedLessItems()
    {
        vm.Clear();
        vm.addTask2("Dog Food4","description");  
        ko.applyBindings(vm);        
    } 
```

所以我决定这样做并让它发挥作用：

1.  按照Tyrsius`ko.applyBindings(vm);`的建议，在开始时使用。
2.  创建明确的功能

所以最后的代码是这样的：

```
var Task = function(name, description) {
    this.name = ko.observable(name);  
    this.description = ko.observable(description);                
}

var ViewModel = function() {
    var self = this;
    self.tasks = ko.observableArray();

    self.clearTask = function(data, event) {

           self.tasks.remove(data);   

    };
    self.addTask = function() {
        var task = new Task("new", "");        
        self.tasks.push(task);
    };
    self.addTask2 = function (name, description)
    {
        var task = new Task(name, description);        
        self.tasks.push(task);
    }
    self.Clear = function()
    {
        self.tasks.removeAll();
    }
};
var vm = new ViewModel();
vm.addTask2("Dog Food","description");
ko.applyBindings(vm);

function ClickedMoreItems()
{
    vm.Clear();
    vm.addTask2("Dog Food2","description");
    vm.addTask2("Dog Food3","description");    

}
function ClickedLessItems()
{
    vm.Clear();
    vm.addTask2("Dog Food4","description");  

} 
```

您可以在[此处查看实际代码](http://jsfiddle.net/hw9B2/398/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-29T11:49:54.163

要删除绑定使用 ko.cleanNode(element)

# ruby - 使用 Ruby 创建 Git 提交并推送到 GitHub

> ID：12013413
> 
> 赞同：2
> 
> 时间：2012-08-17T21:29:10.937
> 
> 标签：ruby, git, github

我正在开发一个 Web 应用程序，用户将在其中修改文件（托管在 GitHub 上）并且应该能够直接保存到 GitHub。

我不需要处理这个客户端，所以服务器端 Ruby 解决方案就可以了。我假设我需要使用某种 GitHub API。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-07T00:53:51.140

[ruby git gem](https://github.com/schacon/ruby-git)是您所需要的。它几乎可以使用本地或远程 git 存储库做任何你想做的事情，包括新的提交、差异、分支、标签、推送到 GitHub，等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T21:46:03.480

在谷歌上搜索“ruby github gem”和“ruby git gem”。如果未找到，请使用`system("git...")`调用 git 命令行实用程序。

# android - Android中有什么方法可以强制打开链接以在Chrome中打开？

> ID：12013416
> 
> 赞同：76
> 
> 时间：2012-08-17T21:29:24.857
> 
> 标签：android, google-chrome, mobile, browser

我目前正在测试一个使用大量 jQuery 动画开发的网络应用程序，我们注意到内置网络浏览器的性能非常差。在 Chrome 中进行测试时，Web 应用程序的性能快得令人难以置信。我只是想知道是否有任何类型的脚本会强制在 Chrome for Android 中打开链接，类似于它在 iOS 中的操作方式。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2015-01-05T13:02:35.037

实现这一点的更优雅的方法是照常使用`Intent.ACTION_VIEW`意图，但将包添加`com.android.chrome`到意图中。无论 Chrome 是否是默认浏览器，这都有效，并确保与用户从选择器列表中选择 Chrome 完全相同的行为。

```
String urlString = "http://mysuperwebsite";
Intent intent = new Intent(Intent.ACTION_VIEW,Uri.parse(urlString));
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent.setPackage("com.android.chrome");
try {
    context.startActivity(intent);
} catch (ActivityNotFoundException ex) {
    // Chrome browser presumably not installed so allow user to choose instead
    intent.setPackage(null);
    context.startActivity(intent);
} 
```

* * *

### 更新

# 对于 Kindle 设备：

以防万一您想打开亚马逊默认浏览器以防亚马逊 Kindle 中未安装 chrome 应用程序

```
String urlString = "http://mysuperwebsite";
Intent intent = new Intent(Intent.ACTION_VIEW,Uri.parse(urlString));
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent.setPackage("com.android.chrome");
try {
    context.startActivity(intent);
} catch (ActivityNotFoundException ex) {
    // Chrome browser presumably not installed and open Kindle Browser
    intent.setPackage("com.amazon.cloud9");
    context.startActivity(intent);
} 
```

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2012-08-17T22:01:57.823

有两种解决方案。

**按包装**

```
 String url = "http://www.example.com";
    Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
    i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    i.setPackage("com.android.chrome");
    try {
        startActivity(i);
    } catch (ActivityNotFoundException e) {
        // Chrome is probably not installed
        // Try with the default browser
        i.setPackage(null);
        startActivity(i);
    } 
```

**按方案**

```
 String url = "http://www.example.com";
    try {
        Uri uri = Uri.parse("googlechrome://navigate?url=" + url);
        Intent i = new Intent(Intent.ACTION_VIEW, uri);
        i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(i);
    } catch (ActivityNotFoundException e) {
        // Chrome is probably not installed
    } 
```

**警告！**以下技术**不适**用于最新版本的 Android。它在这里供参考，因为这个解决方案已经存在了一段时间：

```
 String url = "http://www.example.com";
    try {
        Intent i = new Intent("android.intent.action.MAIN");
        i.setComponent(ComponentName.unflattenFromString("com.android.chrome/com.android.chrome.Main"));
        i.addCategory("android.intent.category.LAUNCHER");
        i.setData(Uri.parse(url));
        startActivity(i);
    }
    catch(ActivityNotFoundException e) {
        // Chrome is probably not installed
    } 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-12-28T10:29:00.953

所有提出的解决方案都不再适合我了。感谢@pixelbandito，他为我指明了正确的方向。我在 chrome 源代码中找到了下一个常量

```
public static final String GOOGLECHROME_NAVIGATE_PREFIX = "googlechrome://navigate?url="; 
```

以及下一个用法：

```
 Intent intent = new Intent("android.intent.action.VIEW", Uri.parse("googlechrome://navigate?url=chrome-native://newtab/")); 
```

所以解决方案是（注意url不应该被编码）

```
void openUrlInChrome(String url) {
    try {
        try {
            Uri uri = Uri.parse("googlechrome://navigate?url="+ url);
            Intent i = new Intent(Intent.ACTION_VIEW, uri);
            i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            startActivity(i);
        } catch (ActivityNotFoundException e) {
            Uri uri = Uri.parse(url);
            // Chrome is probably not installed
            // OR not selected as default browser OR if no Browser is selected as default browser
            Intent i = new Intent(Intent.ACTION_VIEW, uri);
            i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            startActivity(i);
        }
    } catch (Exception ex) {
        Timber.e(ex, null);
    }
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-08-15T15:46:04.160

这适用于**Firefox**和**Opera**

`document.location = 'googlechrome://navigate?url=www.example.com/';`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-05-06T21:14:39.127

上面的不同答案很好，但没有一个是完整的。这最适合我，它将：

尝试打开 chrome 网络浏览器，如果出现异常（chrome 不是默认或未安装），将要求用户选择浏览器：

```
String uriString = "your uri string";

Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(uriString));
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent.setPackage("com.android.chrome");
try {
    Log.d(TAG, "onClick: inTryBrowser");
    startActivity(intent);
} catch (ActivityNotFoundException ex) {
    Log.e(TAG, "onClick: in inCatchBrowser", ex );
    intent.setPackage(null);
    startActivity(Intent.createChooser(intent, "Select Browser"));
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-06-22T17:00:32.827

这是我找到的最接近的：编写一个 url 并替换`http`为`googlechrome`将打开 Chrome，但它似乎没有打开指定的 url。我正在使用三星 Galaxy S5，Android 5.0

这是我发现的最好的——我在 SO 上看到的所有其他解决方案都需要 Android 应用程序，而不是 web 应用程序。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-11-17T07:34:53.280

跟进@philippe_b 的回答，我想补充一点，如果未安装 Chrome，此代码将不起作用。还有另一种情况它不起作用 - 即没有选择 Chrome 作为默认浏览器（但已安装）或者即使没有选择浏览器作为默认浏览器。

在这种情况下，还要添加以下代码的 catch 部分。

```
try {
    Intent i = new Intent("android.intent.action.MAIN");
    i.setComponent(ComponentName.unflattenFromString("com.android.chrome/com.android.chrome.Main"));
   i.addCategory("android.intent.category.LAUNCHER");
    i.setData(Uri.parse("http://mysuperwebsite"));
    startActivity(i);
}
catch(ActivityNotFoundException e) {
// Chrome is probably not installed 
// OR not selected as default browser OR if no Browser is selected as default browser
    Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse("somesite.com"));
        i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(i);
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-11-27T20:16:24.467

这是一种更通用的方法 - 它首先找出默认浏览器的包名称，它处理“http://” URL，然后使用其他答案中提到的方法在浏览器中显式打开 URL：

```
 public void openUrlInBrowser(Context context, String url) {
        // Find out package name of default browser
        Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://"));
        ResolveInfo resolveInfo = context.getPackageManager().resolveActivity(browserIntent, PackageManager.MATCH_DEFAULT_ONLY);
        String packageName = resolveInfo.activityInfo.packageName;

        // Use the explicit browser package name
        Intent i = new Intent(Intent.ACTION_VIEW);
        i.setData(Uri.parse(url));
        i.setPackage(packageName);
        context.startActivity(i);
    } 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-05-03T15:43:17.707

> Android 使用 Java 在 chrome 中打开一个链接：

```
Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse("your url link"));
i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
i.setPackage("com.android.chrome");
try {
    context.startActivity(i);
} catch (ActivityNotFoundException e) {
 Toast.makeText(context, "unable to open chrome", Toast.LENGTH_SHORT).show();
 i.setPackage(null);
 context.startActivity(i);
} 
```

> Android 使用 Kotlin 在 chrome 中打开一个链接：

```
val i = Intent(Intent.ACTION_VIEW, Uri.parse("https://stackoverflow.com/"))
i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)
i.setPackage("com.android.chrome")
try {
  context!!.startActivity(i)
} catch (e: ActivityNotFoundException) {
  Toast.makeText(context, "unable to open chrome", Toast.LENGTH_SHORT).show()
  i.setPackage(null)
  context!!.startActivity(i)
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-12-28T10:19:20.510

在 google play 中有各种各样的 chrome 浏览器应用程序具有不同的功能

所以检查所有这些是正确的

```
fun Context.openChrome(url: String, onError: (() -> Unit)? = null) {
    openBrowser("com.android.chrome", url) {
        openBrowser("com.android.beta", url) {
            openBrowser("com.android.dev", url) {
                openBrowser("com.android.canary", url) {
                    onError?.invoke() ?: openBrowser(null, url)
                }
            }
        }
    }
}

fun Context.openBrowser(packageName: String?, url: String, onError: (() -> Unit)? = null) {
    try {
        startActivity(Intent(Intent.ACTION_VIEW, Uri.parse(url)).apply {
            setPackage(packageName)
            addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)
        })
    } catch (e: ActivityNotFoundException) {
        onError?.invoke()
    }
} 
```

# android - 多个可展开的列表视图不可滚动

> ID：12013418
> 
> 赞同：1
> 
> 时间：2012-08-17T21:29:30.427
> 
> 标签：android, scrollview, expandablelistview

我的应用程序有问题。在一个循环中，我动态创建了一个 ExpandableListView。现在我想让我的屏幕可滚动。但是当我在我的布局上放置一个 Scrollview 时，屏幕将无法滚动，并且可扩展的列表视图非常小。我怎样才能解决这个问题？

* * *

不，我必须使用 ExpandableListViews 滚动屏幕。

当我有更多客户或转动电话时，屏幕会变小，所以我必须滚动，但它不起作用。谢谢马克

我的屏幕看起来像：

```
+-------------------------------------+
|                                     |
|  Customer 1:                        |
|  +-------------------------------+  |
|  |                               +  |
|  |    ExpandableListView 1       +  |
|  |                               +  |
|  +-------------------------------+  |
|                                     |
|                                     |
|  Customer 2:                        |
|  +-------------------------------+  |
|  |                               +  |
|  |    ExpandableListView 2       +  |
|  |                               +  |
|  +-------------------------------+  |
|                                     |
|                                     |
|  Customer 3:                        |
|  +-------------------------------+  |
|  |                               +  |
|  |    ExpandableListView 3       +  |
|  |                               +  |
|  +-------------------------------+  |
|                                     |
|                                     |
|                                     |
+-------------------------------------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T22:12:32.883

我不能说没有看到代码，但听起来你的列表项视图足够小，不需要滚动浏览。FWIW，您不需要滚动视图，`ListView`或者`ExpandableListView`它们都自己滚动。

# neo4j - neo4j 节点属性类型建议、索引或父对象关系？

> ID：12013419
> 
> 赞同：0
> 
> 时间：2012-08-17T21:29:39.517
> 
> 标签：neo4j

Neo4j 的新手，所以我想问一个关于数据库模式设计的基本问题。

假设有 2 种对象类型

*   用户
*   帖子

在用户可以点赞帖子并且会有大量用户和帖子的地方，是否应该将对象类型存储为节点的属性？或者，我应该只为用户创建两个索引，另一个为帖子创建索引吗？最后，我是否应该为用户创建一个父对象，为帖子创建一个不同的父对象，它们都具有“isA”关系。我看到有人提到会产生超级节点惩罚，我不确定这意味着什么。

我知道这总是取决于情况，但在最常见的情况下，正确的设计是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:56:01.743

好的，所以我添加了 nodeType 属性并为每个属性设置了一个单独的 auto_index 属性，这似乎运行良好。

我很想知道在 Neo4j 2.0 中引入节点类型时这将如何改变

# objective-c - 在不覆盖父 getter/setter 的情况下合成 ivar 声明

> ID：12013420
> 
> 赞同：0
> 
> 时间：2012-08-17T21:29:39.860
> 
> 标签：objective-c, ios, macos, inheritance, getter-setter

我有两个相互继承的基本类：

**基类：**

```
// .h
@interface BaseClass : NSObject
@property int myProperty;
@end

// .m
@synthesize myProperty = _myProperty; 
```

**子类：**

```
// .h
@interface Child : BaseClass
@end 
```

在`ChildClass.m`中，我想使用ivar访问`BaseClass` `myProperty`的 getter/setter ：`_myProperty`

```
// ChildClass.m
_myProperty = 1; 
```

当然，从 中看不到父母的`@synthesize`，`ChildClass`所以我不能只使用`_myProperty`.

如果我`@synthesize myProperty = _myProperty`输入`ChildClass.m`，则父级的 getter/setter 将被覆盖，这不是我想要的。

有没有办法在不覆盖父母方法的情况下制作别名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T23:00:34.433

手动声明它。然后，您可以完全控制 iVar 的范围访问。

`@protected`提供子类访问权限，并`@package`使其对实现图像中的所有内容都可见（在您无法实现自己的共享框架图像的 iOS 中并不是很有用）。

更多细节：

[http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocDefiningClasses.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocDefiningClasses.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T21:35:29.027

您将无法使用 ivar 名称`_myProperty`，但您可以（并且应该）使用超类的访问器方法：

```
prop = self.myProperty;
[self setMyProperty:newVal];  //or self.myProperty = newVal if you prefer 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T23:05:03.233

有一种方法，但是您必须使支持的 ivar 可见：

```
@interface MyTest : NSObject
{
@public
    int _foo;
}
@property int foo;

@end
@interface MyTestSuper : MyTest
@end 
```

然后去做：

```
MyTestSuper *x = [MyTestSuper new];
x->_foo = 5; 
```

PS：如果您仅使用“foo”作为支持 ivar，则此方法有效。

# c++ - const 参数类的只读版本

> ID：12013422
> 
> 赞同：4
> 
> 时间：2012-08-17T21:29:44.623
> 
> 标签：c++, constants

我有一种缓冲区类，它将 std::vector 作为构造函数参数并使用该向量来存储字节。此类具有读取和写入缓冲区的方法。但是我想给这个缓冲区类一个 const std::vector 并且仍然能够使用读取函数，而写入函数应该在编译时失败或至少抛出异常。

我提出的唯一解决方案是这样的：

```
class Buffer
{
    public:
    Buffer(std::vector<uint8>& vec)
    { 
        this->writeVec = vec
        this->readVec = vec;
    }
    Buffer(std::vector<uint8> const& vec)
    {
        this->writeVec = null
        this->readVec = vec;
    }
    void write(uint8 i)
    {
        this->throwIfWriteVecNull();
        // do write to writeVec
    }
    uint8 read()
    {
        // do read from readVec
    }

    private:
    std::vector<uint8>& writeVec;
    std::vector<uint8> const& readVec;
} 
```

有没有办法在没有单独的编写器和读取器类的情况下实现这一点（它将相似的逻辑分离到两个不好的不同类）并且编译时检查写访问？我不想将 const_casts 用于任何其他不安全的黑客攻击。也可以随意建议替代模式/架构作为解决方案。

**编辑：**

谢谢大家的回答。从三个答案中，user315052 的外观模式最接近我想要的东西，因为 IMO const_cast 或多个指针比只有几个类更糟糕。我还做了更多的研究，偶然发现了[这个](https://stackoverflow.com/a/3686592/1124809)SO q/a，其中模板用于在 const 和非 const 类型之间进行选择。现在我有类似以下的东西并且它工作得很好，如果我尝试在 const 版本上调用 write，我会在编译时得到“无方法错误”。由于所有模板和东西，代码有点难看，但在编译时出错比异常要好得多。

```
template <typename BlockType, bool isMutable>
class BaseBuf : boost::noncopyable
{
public:
    typedef typename boost::mpl::if_c<isMutable, std::vector<BlockType>, std::vector<BlockType> const>::type VectorType;
    BaseBuf(VectorType& blocks) : blocks(blocks)
    {
    }
    void seekReadCursor(size_t pos)
    {
         // seek to pos
    }
    bool readBool() const
    {
         // do read from pos
    }
    //void read...
    //...
protected:

    VectorType& blocks;
};

template <typename BlockType>
class ImmuBuf : public BaseBuf<BlockType, false>
{
public:
    typedef BaseBuf<BlockType, false> Parent;
    typedef typename Parent::VectorType VectorType;
    ImmuBuf(VectorType& blocks) : Parent(blocks)
    {
    }
private:

};

template <typename BlockType>
class MutaBuf : public BaseBuf<BlockType, true>
{
public:
    typedef BaseBuf<BlockType, true> Parent;
    typedef typename Parent::VectorType VectorType;
    MutaBuf(VectorType& blocks) : Parent(blocks)
    {
    }
    // void resize()...
    void writeBool(bool b)
    {
        // do write
    }
    //void write...
    //...
private:

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T21:51:33.417

我不确定设计，但我们可以尝试按照您的要求进行类似的工作（这是否是一个好主意是另一个讨论）。

第一件事是引用不能为 NULL，如果您想提供可选参数，那么您应该使用指针或更高级别的构造 ( `boost::optional`)。然后你可以提供多个构造函数：

```
class Buffer {
   std::vector<uint8_t> const *readBuffer;
   std::vector<uint8_t>       *writeBuffer;
public:
   Buffer( std::vector<uint8_t>& v ) : readBuffer(&v), writeBuffer(&v) {}
   Buffer( std::vector<uint8_t> const & v ) : readBuffer(&v), writeBuffer() {}
   void write( uint8_t v );
   uint8_t read() const;
}; 
```

如果传递给 的参数`Buffer`是 const，则`writeBuffer`不会设置指针。您可以通过`if (writeBuffer)`在您的`write`功能中使用来测试它。请注意，`read`应将其标记为`const`函数，因为它不会修改缓冲区。

话虽如此，您仍然需要在设计上做更多的工作。声明的`read`and`write`函数可能还不够。应该读/写什么？第一个/最后一个值？他们是否应该附加/使用数据（在这种情况下既不`read`也不`readBuffer`应该`const`）......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T22:03:18.817

看起来您确实希望 a`Buffer`成为读/写版本和只读版本的外观。

```
class BufferInterface {
    friend class Buffer;
    friend class std::default_delete<BufferInterface>;
protected:
    virtual ~BufferInterface () {}
    virtual void write (uint8_t) = 0;
    virtual uint8_t read () = 0;
    //...
};

class Buffer {
    std::unique_ptr<BufferInterface> impl_;
public:
    Buffer (std::vector<uint8_t> &v) : impl_(new BufferReadWrite(v)) {}
    Buffer (const std::vector<uint8_t> &v) : impl_(new BufferReadOnly(v)) {}
    void write(uint8_t i) { impl_->write(i); }
    uint8_t read () { return impl_->read(); }
    //...
}; 
```

`BufferInterface`可以实现只读版本和读/写版本都可以重用的任何通用逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T22:08:39.160

常量强制转换在语言中是有原因的。它们应该谨慎使用，但我认为这是其中一种情况。我会这样做（不检查语法）：

```
Buffer(std::vector<uint8> const& vec)
{
    this->vec = const_cast<std::vector<uint8>& >(vec);
    this->readonly = true;
}
void write(uint8 i)
{
    this->throwIfReadOnly();
    // do write to vec
}
uint8 read() const
{
    // do read from vec
} 
```

注意方法`const`上的添加`read()`。如果您希望编译器额外强制执行 const 正确性，请构造一个只读缓冲区，如下所示：

```
const Buffer* buffer = new Buffer(vec); 
```

这使得它只允许调用`const`方法。在不编写两个完全独立的类的情况下，这几乎是安全的。

# reporting-services - 这对压制空报告有用吗？

> ID：12013423
> 
> 赞同：0
> 
> 时间：2012-08-17T21:29:46.703
> 
> 标签：reporting-services

当没有特定参数集的数据时，我不希望将空报告分发给用户的常见问题。

但我不是在处理订阅问题：我有一个小应用程序，可以通过 Web 服务调用将报告生成为 PDF。（订阅，由于各种原因，在这种环境下不可用。）应用程序不知道它生成的报告的细节，所以我不能让它提前运行查询，并在没有数据时的 proc 只会让 Web 服务调用者感到困惑。

但我确实想到，我可以先检索我的报告作为我可以检查的 XML，然后如果返回的 XML 显示数据存在，则作为 PDF 检索。

在我看来，这样做的缺点是我将生成任何包含数据的报告两次，这累积起来会很昂贵。可能还有其他我没有想到的缺点。

您可能会问我是否无法对 PDF 进行某种检查以查看它是否为空。阻止我追求的是 PDF 具有页眉和页脚，而我得到的空报告实际上是包含页眉和页脚的一页报告。检查他们的数据将是一项艰巨且非常棘手的任务。

那么，有没有人试过这个？它可以工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T10:18:53.200

我将从回答你的问题开始。我个人没有尝试过，但我想它可以工作。浏览 Render[文档](http://msdn.microsoft.com/en-us/library/reportexecution2005.reportexecutionservice.render2%28v=sql.105%29)，您甚至可以让 XML 和 PDF 渲染都使用相同的缓存数据，尽管我不完全确定。

或者，如果您有*多个*报告存在此问题，您可以委托是/否检查以将报告邮寄给单独的元报告。元报告将只有一个包含两列的表格：

*   报告名称
*   应该邮寄

您可以将此报告呈现一次，然后以 XML 格式呈现，然后根据该结果邮寄（或不邮寄）其他报告。如果包含其他报告的数据（例如在视图中），这可能效果最好，因此您可以只`COUNT(*)`在元报告的这些视图上运行。

# java - java中的分层绘图

> ID：12013425
> 
> 赞同：1
> 
> 时间：2012-08-17T21:30:03.823
> 
> 标签：java, swing, java-2d

我正在制作一个摆动桌面应用程序。它绘制分层矢量图形，界面使用滚动条并具有放大功能。矢量图形大约有5层，其中一层特别是绘制起来非常昂贵。图层可能需要不时重新绘制（简单动画）。

目前的情况如下：

1.  创建缓冲图像
2.  每一层都被绘制在图像上
3.  缓冲的图像使用具有相同大小的面板显示在屏幕上，以便可以使用滚动条。

我在放大时遇到了性能问题。缩放可以使缓冲图像变得非常大。当比例为 16 倍时，图像可以在 60000x60 处达到峰值。当然，这会占用大量内存，我想重新设计它。

我真的不知道从哪里开始，我觉得我在重新发明轮子。我对java2d的了解也很有限。我真的想通过使用库来改进这一点，我知道一定有一些东西具有我想要的功能。任何想到的图书馆？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T21:34:19.073

不要创建缓冲图像。在知道要显示多少之前，您正在对输出进行栅格化。

查看“损坏”矩形，并有一个回调系统告诉您它需要呈现的光栅的“子部分”，然后只光栅化所需的像素。无论缩放级别如何，这都应该为您提供相对一致的性能，因为要计算的唯一像素是要显示的像素，而不是概念上像素比以前多 16^2 倍的图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T23:01:28.177

你可以看看[JHotDraw](http://www.randelshofer.ch/oop/jhotdraw/index.html "JHotDraw")。我不确定它是否具有您需要的功能。

另一个想法是不创建大图像，只创建小图像并在放大时将其放大（在 Java 中放大速度很快）。当然，这会导致图像质量较低（像素化），但目前这是可以接受的，您可以在渲染后立即将其替换为高质量矢量图形。

# google-maps-api-3 - 谷歌地图多个搜索结果

> ID：12013431
> 
> 赞同：0
> 
> 时间：2012-08-17T21:30:28.577
> 
> 标签：google-maps-api-3

我想在一个嵌入式地图上显示多个搜索结果，这可能吗？

示例：我想显示您所在地区所有属于 4 家公司的银行：Chase、Wells Fargo、US Bank、Bank of America

这实际上是针对我的澳大利亚网站的——人们访问银行并将现金存入我们在 4 家银行中的任何一家的账户中，我只想给他们一张地图以找到最近的一家： [https](https://www.spendbitcoins.com/buy/) : //www.spendbitcoins.com/buy/请访问任何 NAB、Bendigo、Commonwealth Bank 或 Westpac 分行并存款”

如果可以添加一个搜索框，这样他们就可以输入他们的城市或 zip 并获得本地版本，那就更好了。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-17T21:35:43.210

是的，这是通过首先创建一个数组来完成的，如下所示；

```
 <div id="map" style="width: 500px; height: 400px;"></div>

  <script type="text/javascript">
    var locations = [
      ['Bondi Beach', -33.890542, 151.274856, 4],
      ['Coogee Beach', -33.923036, 151.259052, 5],
      ['Cronulla Beach', -34.028249, 151.157507, 3],
      ['Manly Beach', -33.80010128657071, 151.28747820854187, 2],
      ['Maroubra Beach', -33.950198, 151.259302, 1]
    ];

    var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 10,
      center: new google.maps.LatLng(-33.92, 151.25),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var infowindow = new google.maps.InfoWindow();

    var marker, i;

    for (i = 0; i < locations.length; i++) {  
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(locations[i][1], locations[i][2]),
        map: map
      });

      google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
          infowindow.setContent(locations[i][0]);
          infowindow.open(map, marker);
        }
      })(marker, i));
    }
  </script> 
```

我从[上一个问题中举出了这个例子，该问题有更多关于这个主题的信息](https://stackoverflow.com/questions/3059044/google-maps-js-api-v3-simple-multiple-marker-example "上一个问题")

# asp.net - 从查询字符串格式的字符串中获取值 vb.net

> ID：12013432
> 
> 赞同：0
> 
> 时间：2012-08-17T21:30:29.527
> 
> 标签：asp.net, vb.net

我是 asp.net/vb.net 的新手。我有一个查询字符串格式的字符串，即字符串已格式化： value1=data1&value2=data2...

我需要一种方法（我确定他们可能是它的内置函数）能够获取任何给定字段的值，例如 Dim data1 = string.querystring("value1")。我用谷歌搜索它并找到了函数查询字符串，但它似乎只能直接从 URL 获取，但我将该数据存储在字符串变量中并希望从中获取数据。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T21:35:10.873

`HttpUtility.ParseQueryString`，您可以在任何上下文中调用它，因为它只需要字符串参数。只需添加对 的引用`System.Web`，即使它是桌面应用程序，您也可以这样做。

[http://msdn.microsoft.com/en-us/library/ms150046.aspx](http://msdn.microsoft.com/en-us/library/ms150046.aspx)

# google-drive-api - 将文档集合移动到用户的云端硬盘？

> ID：12013436
> 
> 赞同：0
> 
> 时间：2012-08-17T21:30:44.600
> 
> 标签：google-drive-api

我有一个来自 Doclist API 的集合资源 ID。

现在我需要让这个集合出现在用户的云端硬盘中。

Q1：我们可以在一个应用程序中同时使用 Doclist 和 Drive API 来执行此操作吗？

Q2：只是添加Drive root parent的问题吗？如果不是，那咒语是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T01:33:03.717

您不需要在同一个应用程序中使用 Documents List API 和 Drive API，它们都在相同的资源上运行并使用相同的标识符。建议您尽可能只使用较新的 Drive API。

我不确定我是否理解你的第二个问题。如果该集合在用户的 Docslist 中，那么根据定义，它在用户的 Drive 中，这两个实体之间没有区别。

相反，如果您希望集合出现在其他人的云端硬盘帐户中，则您必须与其他用户共享资源，如[https://developers.google.com/drive/manage-sharing中所述](https://developers.google.com/drive/manage-sharing)

# javascript - 在 jQuery 中使用 append 选择 div 放置

> ID：12013437
> 
> 赞同：3
> 
> 时间：2012-08-17T21:30:45.737
> 
> 标签：javascript, jquery

使用以下代码：

```
<script type="text/javascript">
function moveFront(el){
    var me = $('#'+el.closest('div').attr('id'));
    var parent = me.parent();
    parent.find('div:first').prepend(me);
    //?
}
</script>
<div class="comments">
<div id="105">
    105
    <p>...</p>
    <form>...</form>

    <div id="116">
        116
    </div>
    <div id="106">
        106
    </div>
    <div id="109">
        109
        <button onclick="moveFront($(this));"></button>
    </div>
</div>
</div> 
```

1.  我想`div`在 ID 为 105 的元素中添加一个新元素，但是，我不希望它在结尾或开头。它应该在其他`div`元素之前。

2.  如果使用了一个按钮，如`div`ID 为 109 的元素中所示，我将如何将它作为`div`ID 为 105 的第一个元素移动？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T21:33:52.463

您可以使用以下`before`方法：

> 在匹配元素集中的每个元素之前插入由参数指定的内容。

```
$('#105 div:first').before('<div id="115"></div>')
$('#109').appendTo($('#105 div:first')) 
```

[小提琴](http://jsfiddle.net/ZtPQZ/7/)

请注意，ID 必须是*唯一的*，如果页面的文档类型不是 HTML5，则 ID 必须以字母开头。

* * *

如果要将按钮的 div 父级移动到第一个 div ，可以尝试：

```
function moveFront(el){
     el.closest('div').prependTo($('#105 div:first'))
} 
```

[小提琴](http://jsfiddle.net/ZtPQZ/12/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T21:40:38.297

ID应该以字母开头，并且它们应该是唯一的，您使用`#109`了两次？

```
$('#105').find('div:first') //find the first div
         .before($('<div>New div before div</div>')) //insert element before it
         .end() //start over
         .prepend($('#109')); // prepend the #109 element to #105 
```

[**小提琴**](http://jsfiddle.net/p92An/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T21:44:57.987

编辑：当我写下我的原始答案时 - 我认为“向前移动”应该向上移动一个。我修改了答案以匹配“成为第一”的要求

当他/她首先回答时，这些点仍应属于“未定义”。我就是不能这样离开我的答案:)

这是我将在下面描述的代码的完整[小提琴](http://jsfiddle.net/AnpSt/10/)对于第一个问题，例如，我将用另一个 div 包装其他 div

```
<div class="numbers">
     <div id="195">
     195
     </div>
     .... 
</div> 
```

然后使用[prepend](http://api.jquery.com/prepend/)之类的（伪代码）并像这样使用它`$('.numbers').prepend($('<div/>).text('this is a new div'))`

将带有按钮的 div 移动为第一个的相同方法：

这是我的 HTML 示例：

```
<div id="105">
    105
    <input/>
    <button class="add-this">Add This</button>
    <div class="numbers">
        <div id="116">
            116
        </div>
        <div id="109">
            109
        </div>
        <div id="109">
            109
            <button class="move-front"> Move Front</button>
        </div>
    </div>
</div> 
```

这是我的 JavaScript 示例

```
$(function(){    
    $("button.add-this").click(function(){
    var $val = $("input").val();
    $(".numbers").prepend($("<div/>").attr("id",$val).text($val))

    });

$(".numbers").on({
    click:function(){

       var $divToMove = $(this).parent();
       var $currentIndex = $(".numbers div").index($divToMove);

        $divToMove.remove();
        $(".numbers").prepend($divToMove);
    }
}, "button.move-front");

}); 
```

如果需要更多解释，请告诉我。

# java - Java 将敏感的“密钥”存储为字符串或字符 []？

> ID：12013438
> 
> 赞同：13
> 
> 时间：2012-08-17T21:30:48.397
> 
> 标签：java, string, security

> **可能重复：**
> [为什么 char[] 优先于密码字符串？](https://stackoverflow.com/questions/8881291/why-is-char-preferred-over-string-for-passwords)

我在某处读到，将敏感密钥存储为 char[] 而不是 String 更好，因为后者可以在内存中找到。由于不推荐使用 JPasswordField 的 getText() 方法，这也有点道理。

这是真的？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-17T21:39:40.840

一旦你在 a 中使用完密码，`char[]`你总是可以用 0 或随机值覆盖它。但是，您不能对`String`对象执行此操作，因为它们是 Java 中的不可变对象，并且字符串将保持活动状态，直到垃圾收集器启动并清除它。

[这是http://docs.oracle.com/javase/6/docs/technotes/guides/security/crypto/CryptoSpec.html](http://docs.oracle.com/javase/6/docs/technotes/guides/security/crypto/CryptoSpec.html)上的一个有趣的注释

> 在此示例中，我们提示用户输入密码，从中派生加密密钥。
> 
> 将密码收集并存储在 java.lang.String 类型的对象中似乎是合乎逻辑的。但是，需要注意的是：String 类型的对象是不可变的，即没有定义允许您在使用后更改（覆盖）或清零 String 内容的方法。此功能使 String 对象不适合存储用户密码等安全敏感信息。您应该始终将安全敏感信息收集并存储在 char 数组中。
> 
> 出于这个原因，javax.crypto.spec.PBEKeySpec 类采用（并返回）密码作为 char 数组。

# git - 使用完整的修订历史从 Googlecode 迁移到 Github

> ID：12013439
> 
> 赞同：2
> 
> 时间：2012-08-17T21:30:51.653
> 
> 标签：git, svn, github, git-svn, google-code

尝试将 SVN 项目迁移到 Github 我首先按照以下说明将 SVN 转换为 Git：[http ://code.google.com/p/support/wiki/ConvertingSvnToGit](http://code.google.com/p/support/wiki/ConvertingSvnToGit)

这行得通，但我不确定从 Googlecode 转移到 Github 下一步该做什么。

我试过了：

```
$ git remote add origin git@github.com:GITHUB_USERNAME/REPO_NAME.git
$ git push --all origin 
```

（我希望这是有道理的，因为我只是在这里猜测）

然后它告诉我在推之前我应该​​先拉一下。但它偏离了谷歌代码。**那么我如何告诉它从 Github 中提取呢？**

_

*（我确实也看到了这个：http: [//github.com/nirvdrum/svn2git](http://github.com/nirvdrum/svn2git) ...我应该那样尝试吗？）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T07:55:13.707

啊，比我预期的要容易得多（但由于我不知道任何 Git 命令行，所以我不知道从哪里开始）......

因为我原来的 repo 还在 googlecode 上

```
$ git pull 
```

只会从那里拉。

```
$ git pull origin master 
```

成功了。必须添加分支（主），因为原点不是默认远程。然后一个

```
$ git push --all origin 
```

我已经准备好摇滚了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T21:59:38.770

以下是您要采取的步骤：

*   使用 git-svn 来检查你的谷歌代码
*   创建你的 github 仓库
*   将您的 github 存储库添加为远程
*   从 git-svn repo 中提取你的代码`git-svn rebase trunk`<-- 我想你在这里
*   将代码推送到您的新遥控器`git push origin master`

应该是这样的。

# navigation - Orchard CMS 侧边栏菜单

> ID：12013440
> 
> 赞同：0
> 
> 时间：2012-08-17T21:30:54.067
> 
> 标签：navigation, orchardcms, styling

显然这可能是一个简单的问题，但我无法完成它。

我在顶部有一个主菜单。现在我想在侧边栏中的模块中添加一个指向控制器操作的不同菜单。因此，我创建了一个菜单小部件和一个描述模块页面的图层。我已将小部件放置在侧边栏中的这一层上。但这会为我的菜单（水平方向菜单）生成相同的布局

所以我想我会为这个菜单创建一个替代视图。但唯一包含我的小部件名称的替代品是包装器。而且无论我在备用包装器中做什么，它都不会反映在页面上。因为我想让侧边栏菜单垂直而不是水平。

下一个尝试是下载一个有侧边栏菜单的主题。在画廊中有 BindTuning 的 Dark 2.0.0 主题。这个有一个不错的侧边栏。很高兴我进入了小部件部分，期待有两个菜单小部件。但相反，我只是在导航区找到了一个。仔细查看他们的模板文件，我看到侧边栏菜单是通过将水平菜单转换为垂直菜单的 jscript 生成的（仍然不知道在页面上使用两次相同的菜单，但那是另一个讨论）。所以那里没有帮助。

这似乎很明显，但我无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T19:23:35.407

没有替代包装器之类的东西。您可以通过启用备用小部件功能来获取小部件替代品。

# javascript - 使用母版页避免 Javascript 中的重复

> ID：12013442
> 
> 赞同：0
> 
> 时间：2012-08-17T21:30:56.927
> 
> 标签：javascript, jquery, dry

假设我有多个网页，每个网页都包含一个 iframe 和一个链接。单击该链接会在新选项卡中的相应页面上打开 iframe 的源代码。

```
$('#win1_docViewerNewTab').click(function () {
    window.open($('#win1_docViewer').attr('src'), '_blank');
}); 
```

此外，假设这些网页中的每一个都在同一个 DOM 中（例如，使用 jQuery 选项卡）。每个链接都需要一个唯一的 ID，但它们都使用相同的类。iframe 也一样。

我的问题：有没有办法避免重复，并且在母版页上只有一个 javascript 函数会导致所有三个页面上的链接在新选项卡中打开各自的 iframe？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T21:35:46.890

目前，锚点和 iframe 没有任何关系（除了它们的 id 名称之间存在一些无法依赖的古怪关系）。

您可以使用 HTML5`data-*`属性将锚点与 iframe 关联起来：

```
<a class="anchor" id="win1_docViewerNewTab" data-iframeid="win1_docViewer" href="...">Click me</a> 
```

然后在您的母版页中：

```
$('.anchor').click(function () {
    window.open($('#' + $(this).data('iframeid')).attr('src'), '_blank');
    return false;
}); 
```

# c++ - C ++中的非连续数组指针

> ID：12013444
> 
> 赞同：2
> 
> 时间：2012-08-17T21:31:01.820
> 
> 标签：c++, arrays, pointers, memory-management

我正在为 C++ 中的几个线性代数库编写包装器代码，这些库可以以多种格式之一存储它们的数组，最常见的是密集列优先、密集行优先、压缩稀疏列和压缩稀疏行。我想创建一个数组包装类，它将以通用顺序访问这些数组的元素，同时保持基础库所需的底层内存顺序；也就是说，我希望能够使用基于行的索引以相同的方式访问包装的列优先密集数组和包装的行优先密集数组的元素。我无法在不干扰外部库功能的情况下重新排序底层数组，并且考虑到我的数组的巨大大小，重新排序无论如何都会涉及大量计算成本。这就是我的意思，假设两者都'

```
T * data;
// Initialize values of data

rowMajorArray R(data); // Stored row-major, with reordering of data if necessary
columnMajorArray C(data); // Stored column-major, with reordering of data if necessary

wrapperArray wrapperR(R); // DOES NOT reorder data
wrapperArray wrapperC(C); // DOES NOT reorder data

assert(wrapperR[3] == wrapperC[3]); // I want this to be true, i.e. transparent row indexing
assert(wrapperR[3][4] == wrapperC[3][4]); // I want this to be true, i.e. transparent element indexing

T * rowPointerR = wrapperR[0]; // Points to first row; should this be a reference: &(wrapperR[0]) ?
T * rowPointerC = wrapperC[0]; // Points to first row, even though stored column-major

assert( *(rowPointerR + 2) == *(rowPointerC + 2) ) // I want this to be true, i.e. transparent row pointers

T * elementPointerR = &(wrapperR[0][0]); // Points to individual element
T * elementPointerC = &(wrapperC[0][0]); // Points to individual element

assert( *(elementPointerR + 2) == *(elementPointerC + 2) ) // I want this to be true, i.e. transparent pointer arithmetic 
```

本质上，我的目标是让底层库能够使用与它们本机使用的相同内存顺序来访问包装数组，同时使我的包装器代码能够透明地访问数据，而无需担心底层内存顺序。我不在乎我是使用指针还是索引语法，因为我可以做任何我需要的事情，只要我能正确访问行和元素；如果我只能直接实现指针，那么无论如何我都会重载索引运算符，以便与其他外部运算符重载库轻松集成。

提前感谢大家的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T21:51:08.700

我当然会劝阻您不要使用多维数组和中缀运算符。

一个天真的起点是这样一个简单的界面。

```
class Table {
public:
  virtual ~Table() {}

  virtual double get(size_t row, size_t col) const = 0;
  virtual void getRow(size_t row, std::vector<double> &row_vals) const = 0;
  virtual void getCol(size_t col, std::vector<double> &col_vals) const = 0;

  virtual void set(size_t row, size_t col, double val) = 0;
  virtual void setRow(size_t row, const std::vector<double> &row_vals) = 0;
  virtual void setCol(size_t col, const std::vector<double> &col_vals) = 0;
}; 
```

您将为每个存储策略实现接口。这将允许行/列专业优化他们擅长的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T21:36:30.437

您只需要重载索引运算符，并在所述运算符内部计算正确的偏移量。你的包装器需要知道它包装的是什么类型的数据结构。当您创建其中一种类型的实例时，它可能就像设置一些成员变量一样简单，即 ,`m_rowOffset`等`m_columnOffset`。

但是，您对指针的工作方式无能为力。指针是简单而愚蠢的生物，你不能让它们以不同的方式工作以适应你的目的。如果您添加`1`到一个指针，它只会前进到下一个对象（即前进`n * sizeof(T)`字节） 坚持索引方法。反正更自然。

# java - 封装与数据隐藏 - Java

> ID：12013448
> 
> 赞同：59
> 
> 时间：2012-08-17T21:31:37.977
> 
> 标签：java, oop, encapsulation, software-design, data-hiding

> **采访者：**什么是封装，你是如何在 Java 中实现它的？
> 
> **我：** 封装是一种向客户端隐藏信息的机制。该信息可以是数据或实现或算法。我们使用访问修饰符来实现这一点。
> 
> **采访者：**这是数据隐藏。我们如何在 Java 中实现封装？
> 
> **我**：嗯嗯

**具体问题：**除了“访问修饰符”之外，在 Java 中实现封装的方法是什么？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-17T21:35:08.303

更一般地，*封装*只是指将数据（例如对象的数据）与对该数据的操作捆绑在一起。所以你有一个封装数据的类 -*字段*- 以及操作该数据的*方法*。

但是封装有时也以与您的答案相同的方式使用，实际上，捆绑数据和方法的要点之一是*隐藏*实现。

我认为比*仅使用方法并将所有字段设为私有*更好的答案是：使用接口。这样，对对象的操作完全基于接口契约，并且与用于在内部实现该契约的字段或辅助方法无关。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-11-20T09:39:33.947

## 封装

一般来说，**封装**意味着捆绑相似的项目，就这么简单。

例如，上一`Student`堂课，我们将让学生实例变量和作用于这些实例变量的行为/方法@一个地方。

为什么它很重要？我们不希望我们的代码分散在我们的代码库中。

如果假设我们需要进行更改，那么我们需要在所有地方找到（更改的）变体。通过捆绑类似的项目，我们只是避免了这种情况，它还有助于使我们的捆绑代码更加集中。

## 数据隐藏

它只是提供了一种保护您的数据免受外界影响的方法。这意味着，假设我公开了我的实例变量，那么任何人都可以更改它的状态。但是，如果我们将实例变量设为私有/受保护，那么实际上我们是在限制外部实体对其进行更改。

## 比较/讨论

现在问题出现了，我们在哪些方面保护我们的变量？

同样，我们需要了解**封装**只是我们需要放置类似项目的容器。

它对外界就像一个*黑盒子。*外部世界（我的意思是说客户/消费者：使用我们的`Student`课程）不知道课程的内部细节/实施细节，`Student`实际上他们不应该关心课程的内部细节/实施细节。他们只想要一些方法/API，以便他们可以在他们的客户端应用程序中使用它们。

所以我的观点是所有与学生相关的行为/变量都放在一个*黑盒子*里，我们称之为一个班级。现在由类的设计者决定哪些类的元素应该隐藏，哪些不应该对外界隐藏。

现在回到Java中的问题：我们将变量设为私有，这意味着它们是受类保护的。如果我们希望我们的实例变量可以在整个包中访问，那么它们是包保护的。通过整个项目，它们是公开的。所以我的意思是隐藏你需要某种容器的数据，你将在其中放置数据并相对于容器隐藏。

所以我觉得没有**Encapsulation****数据隐藏**是不可能的。如果不将数据放入某种形式的容器中，就无法隐藏数据。我再次提醒您，我将它放在面向对象的语言上下文中。

 **但是，可以在不隐藏数据的情况下进行**封装。**把所有的事情都公开，你就能看到效果。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-05-14T09:55:41.540

***封装***：以胶囊为例。打开一看，里面有很多成分。面向对象编程的封装也是如此。顾名思义，“*封装*意味着将所有数据成员、属性和相应的方法封装（封装）在一个单独的封装中。

**你是怎么做的：**假设你创建了一个名为“Car”的类。现在汽车有颜色价格和型号。这些是属性，它有一个 run 方法。所以在这里你已经封装了一个名为“Car”的车辆的所有这些属性和方法。当您像这样创建汽车实例时

```
Car myCar = new Car(); 
```

您可以使用 myCar 变量访问 Car 的所有属性。

“**数据隐藏**”：在 Java 中使用访问修饰符控制数据隐藏。要访问您使用*ACCESSORS*的数据成员，同时使用“ **Mutators** ”修改数据。Java 本身不提供访问器和修改器，您自己创建它们（getter 和 setter）。虽然 C# 提供了这样做的属性。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-08-17T21:49:01.767

我讨厌这样做，但是，来自[维基百科](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)：

> 在编程语言中，封装用于指代两个相关但不同的概念之一，有时指的是它们的组合：
> 
> 1.  一种语言机制，用于限制对某些对象组件的访问。
> 2.  一种语言结构，有助于将数据与操作该数据的方法（或其他功能）捆绑在一起

您的解释更符合第一个概念，面试官正在寻找第二个概念。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-05-26T13:14:20.657

*数据封装*是指*将所有相关属性和方法保存在一个实体*中的机制。

*示例*：汽车。它将方向盘、轮胎、发动机和所有相关的东西整合到一个称为`Car`.

在编程语言中，*封装*是通过*类*来实现的。`one single entity`一个类包含旨在执行特定任务的所有属性和相关方法。

* * *

*数据隐藏*是指对*用户隐藏不重要的细节，*只向他显示相关数据。

*示例*：当我们在汽车中踩刹车或加速时，我们不知道幕后发生了什么（它*如何*提高速度或*如何*将刹车应用到轮胎上）。我们所知道的是，我们有刹车和加速器来执行预期的结果。

在编程中，这是在*访问修饰符*的帮助下完成的。*私有*成员*不能*从类外部`public`访问，用户只能访问成员。私有成员只能从*类的成员中*访问，从而为私有成员提供*安全性*，以便从类外部直接评估。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-08-25T09:33:44.850

> 数据隐藏意味着我们为类内的数据提供安全性。
> 
> 抽象意味着通过定义成员函数来隐藏代码。
> 
> 封装是抽象和数据隐藏的结合，意味着我们正在包装数据和与该数据相关的代码。对于前豆类

```
 class student {
private int age;  // Data Hiding 
public setAge(){} // Abstraction 
public getAge(){} // Abstraction 
} 
```

学生类被封装。

> 封装 = 数据隐藏 + 抽象

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-09-01T15:19:33.837

这个问题似乎具有误导性，我怀疑除了面试官之外的任何人都可能回答这个问题，而且他/她的回答很可能是错误的。最重要的是，尚不清楚该问题应该评估或发现什么。

尽管如此，我还是考虑了一下，以下是我认为可能是我回答这个问题的尝试。

## 使用访问修饰符

在Java 中，封装是通过使用可访问性修饰符（即public、protected、private 等）隐藏细节来实现的。通过这些级别的可访问性，您可以控制信息隐藏的级别。级别的限制越少，更改发生的代价就越大，并且类与其他依赖类（即用户类、子类）的耦合程度越高。

显然，封装不仅仅是隐藏状态。在 Java 中，您可以隐藏整个类和接口及其状态和行为，从而隐藏整个 API 的实现细节。

例如，方法`Arrays.asList()`返回一个`List`实现，但我们不关心哪个实现，只要它满足`List`公共接口，对吧？将来可以更改实现而不影响我们，方法的用户，但实际的实现对我们是隐藏的。

到目前为止，似乎封装完全取决于编程语言隐藏细节的能力，因此，如果没有访问修饰符，它就无法实现，对吧？

## 没有访问修饰符

但是，像 Python 这样的语言在没有访问修饰符的情况下是如何实现封装的呢？Python 中的一切都是公开的？这是否意味着封装是不可能的？

如果按照惯例，我们定义了组件的公共接口，然后只通过它们的公共接口访问对象的状态和行为呢？显然，为此，我们需要清楚地了解问题域中的抽象以及我们的用户应该如何使用这些抽象。

在我看来，面试问题似乎旨在将封装评估为更广泛的概念，一个取决于非常清晰抽象的定义，而不仅仅是访问修饰符等语言功能的副产品。

## 抽象的作用

这就是为什么，在我看来，要真正理解封装，首先必须理解抽象。

例如，考虑汽车概念的抽象级别。汽车的内部实现很复杂。它们有几个子系统，如传动系统、制动系统、燃油系统等。

然而，我们已经简化了它的抽象，我们通过它们抽象的公共接口与世界上所有的汽车进行交互。我们知道所有的汽车都有一个方向盘，我们可以通过它控制方向，它们有一个踏板，当你按下它时，你可以加速汽车并控制速度，还有一个当你按下它时，它就会停下来，还有一个变速杆让您控制是否前进或后退。这些特性构成了汽车抽象的*公共接口*。早上你可以开一辆轿车，然后下车，下午开一辆 SUV，就好像它是同一件事一样。

并不是说你不能打开引擎盖看看它是如何工作的。然而，我们中很少有人知道所有这些底层功能是如何在引擎盖下实现的细节，而事实是我们不需要知道驾驶汽车的细节。所有这些东西都封装在汽车抽象之下。我们只需要知道抽象的公共接口。

想想汽车没有液压方向系统的时代。有一天，汽车制造商发明了它，他们决定从那时起将其放入汽车中。尽管如此，这并没有改变用户与他们交互的方式。最多，用户体验到使用定向系统的改进。像这样的改变是可能的，因为汽车的*内部实现*被封装了。

这清楚地表明，通过*隐藏*定向系统的实现细节，他们可以*安全地更改它，*而不会影响汽车的公共界面，相应地，也不会影响用户与其交互的方式。

现在，想想汽车制造商决定把油箱盖放在汽车下面，而不是放在汽车的一侧。你去买一辆这样的新车，当你用完油时，你去加油站，却找不到油箱盖。突然你意识到在汽车下方，但你无法用气泵软管到达它。现在，我们已经破坏了公共接口契约，因此，整个世界都崩溃了，它分崩离析，因为事情没有按照预期的方式工作。像这样的改变将花费数百万美元。我们需要更换世界上所有的气泵。当我们打破封装时，我们必须付出代价。

因此，如您所见，封装的目标是*最大限度地减少相互依赖并促进变化*。您可以通过最小化实现细节的暴露来最大化封装。类的状态只能通过其公共接口访问。

封装的美妙之处*在于改变事物而不影响其用户的力量*。

我们可以说，这个最终目标取决于仔细的规划和设计。在 Java 中，访问修饰符是一种将这些想法变为现实的方法，但在不存在此功能的语言中，同样可以实现封装。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-01-20T12:42:54.213

在我看来，**封装**是指将数据和**方法****绑定**到称为***类*****的单个**单元的想法。然而，绑定数据和方法有***两个主要标准。***其中之一是信息隐藏，但不是唯一的。为了完全**简洁**，我想说两个主要标准是

 ********1.  低耦合（通过信息隐藏确保）
2.  高凝聚力

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-04-09T22:09:46.840

在类中，属性和行为放在一起。封装意味着，当你创建一个类时，这本身就意味着你实现了封装原则。因为数据和行为被封装到类中。所以数据隐藏是术语的主要部分——封装。这意味着对象的访问点。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-10-29T09:32:08.830

我看到很多讨论已经完成，只是为了简化我的理解：

**封装** 确保对象的行为只能通过其 API 受到影响。通过确保不相关的组件之间没有意外的依赖关系，我们可以控制对一个对象的更改对系统其他部分的影响程度。访问修饰符可以用来实现封装。

**信息隐藏隐藏** 对象如何在其 API 的抽象背后实现其功能。它允许我们通过忽略与手头任务无关的较低级别的细节来处理更高的抽象。设计层面的抽象可用于实现数据隐藏。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-08-07T13:04:18.597

封装最简单的定义是“将数据和操作数据的代码绑定到一个单元中”，使得数据不能被外界直接访问。

在像c这样的结构语言中，数据在块的开头声明并直接使用，公开访问（任何tom，dick和harry都可以访问数据）。数据隐藏是一个概念，它直接和公开地限制任何汤姆迪克和哈利的数据访问。
封装是实现数据隐藏的方法之一。您通过将数据和功能放在一起（封装）来实现数据隐藏。

如何在 JAVA 中实现，请参阅 JAVA 中的任何 getter()、setter() 函数示例。检查这个

[getter 和 setter 是如何工作的？](https://stackoverflow.com/questions/2036970/how-do-getters-and-setters-work)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-01-04T16:27:13.140

封装：封装是OOPS的支柱之一，也是其他两个术语，数据隐藏和抽象的超集。（数据隐藏，顾名思义。数据只能存储在变量中。为了向外部世界隐藏数据，我们使用数据隐藏概念。公共、私有、受保护这三个访问修饰符提供给我们用于数据隐藏。默认为仅限于包。受保护仅限于继承类。）**私有变量只能在类内部访问，这意味着如果有内部类，也可以直接调用私有变量。只有静态内部类可以调用静态变量。

现在来抽象（意思是无形的）。抽象也被认为是对用户隐藏实现并仅提供最终结果的过程。示例：我们有一个具有“重量”属性的人员类。这个属性非常棘手，因为我们不能接受一个人的体重小于 0。我们也不能接受超过 500 公斤。所以隐藏这些的实现将在 setter 方法中。这个隐藏实现细节的东西是抽象。

** 完整的包，即使对象私有化并在 setter 和 getter 中实现逻辑称为 ENCAPSULATION。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-03-22T08:21:09.670

1.  封装是将数据（字段）和行为（方法）捆绑在类中。
2.  现在，您必须使用访问修饰符（私有/受保护/公共或默认）提供对数据的访问控制，即 DATA HIDING。它可以保护您不想提供访问权限的外部世界的数据。
3.  此外，为了隐藏操作的复杂性，您必须使用接口来实现抽象。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-06-30T16:43:13.350

**封装**意味着将数据成员和方法（行为）绑定在一个单元中，并提供尽可能多的用户所需的信息，您可以说[封装=数据隐藏+抽象]。

类是java中完全封装的元素

**数据隐藏**意味着将数据变量声明为私有以防止未经授权的访问，但如果您提供一些公共的 setter 和 getter 方法进行验证。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2016-11-26T14:01:56.543

通过隐藏其数据以防止外部类成员直接访问并仅通过适当的验证通过可公开访问的 setter 和 getter 方法提供访问来定义类的过程称为封装。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2018-06-28T20:15:51.983

[来自维基百科](https://en.wikipedia.org/wiki/Object-oriented_programming#Encapsulation)

> 封装 封装是一种面向对象的编程概念，它将数据和操作数据的函数绑定在一起，并确保两者免受外部干扰和误用。数据封装导致了数据隐藏这一重要的 OOP 概念。
> 
> 如果一个类不允许调用代码访问内部对象数据而只允许通过方法访问，这是一种强抽象或信息隐藏形式，称为封装。某些语言（例如 Java）允许类显式地强制执行访问限制，例如使用 private 关键字表示内部数据，并使用 public 关键字指定旨在供类外部代码使用的方法。方法也可以设计为公共、私有或中间级别，例如受保护的（允许从同一类及其子类访问，但不允许从不同类的对象访问）。在其他语言（如 Python）中，这仅按约定强制执行（例如，私有方法的名称可能以下划线开头）。封装防止外部代码关注对象的内部工作。这有助于代码重构，例如允许类的作者更改该类的对象在内部表示其数据的方式，而无需更改任何外部代码（只要“公共”方法调用以相同的方式工作）。它还鼓励程序员将与特定数据集相关的所有代码放在同一个类中，这样可以将其组织起来以便其他程序员理解。封装是一种鼓励去耦的技术。方法调用的工作方式相同）。它还鼓励程序员将与特定数据集相关的所有代码放在同一个类中，这样可以将其组织起来以便其他程序员理解。封装是一种鼓励去耦的技术。方法调用的工作方式相同）。它还鼓励程序员将与特定数据集相关的所有代码放在同一个类中，这样可以将其组织起来以便其他程序员理解。封装是一种鼓励去耦的技术。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2018-07-02T15:22:11.100

基本上数据封装是一个过程，而数据隐藏是一种技术。在封装中，数据可以是公共的或私有的，但在数据隐藏中，数据只是私有的。所以数据隐藏使用封装，但它也使用不同的技术来保持数据只允许授权访问。希望能帮助到你！

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2018-12-18T01:38:45.777

抽象表示需要与对象交互的内容。

封装意味着将对象的属性、状态和行为封装到称为类的单个逻辑单元中。

数据隐藏表示隐藏对象的内部实现意味着私有方法和属性，即用于维护其状态的对象。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-08-14T07:39:25.150

将数据成员和相应的方法绑定到一个单元中的过程只不过是封装。

封装 = 数据隐藏 + 抽象**********

# python - 文件夹上的备用数据流

> ID：12013450
> 
> 赞同：2
> 
> 时间：2012-08-17T21:31:48.423
> 
> 标签：python, winapi, ntfs, win32com, alternate-data-stream

我正在使用基于 python win32com 的 StgCreateStorageEx 调整 testStorage.py 中的代码，[以](http://pywin32.hg.sourceforge.net/hgweb/pywin32/pywin32/file/9f6fdae45eb7/com/win32com/test/testStorage.py)将我自己的 file_id 属性写入任何文件。

根据[备用流](http://www.flexhex.com/docs/articles/alternate-streams.phtml)（尽管不一定来自此 API 调用），应该可以保存到目录/文件夹，但更改标志会产生不同的错误，例如：

```
from win32com import storagecon
import pythoncom, os, win32api

fname = r"c:\temp\test\test.txt" #works
fname = r"c:\temp\test\test2"

def testit():
    m=storagecon.STGM_READWRITE | storagecon.STGM_SHARE_EXCLUSIVE
    pss=pythoncom.StgOpenStorageEx(fname, m, storagecon.STGFMT_FILE, 0, pythoncom.IID_IPropertySetStorage) 
```

结果是：

> pywintypes.com_error: (-2147024895, '函数不正确。', 无, 无)

**编辑：** 关于如何在 WinXP、Win7 和 Windows Server 2003/R2 上运行的任何建议？

请注意，最终结果不一定需要使用这个 API，我只需要能够从 Python 高效地完成它。我所说的高效是指不通过许多不同的技术层。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T00:15:12.303

如果将 storagecon.STGM_DIRECT 添加到模式，则成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T10:08:40.947

查看结果，StgOpenStorageEx 向文件添加了更多内容，而不是简单地写入 open(fname + ":stream_name")，所以我选择了它。除了无法写入标准汇总字段之外，与 StgOpenStorageEx 相比，这有什么缺点吗？

# objective-c - ios滚动背景

> ID：12013457
> 
> 赞同：0
> 
> 时间：2012-08-17T21:32:09.393
> 
> 标签：objective-c, ios, uiimageview

我想在 xcode 中制作无限滚动背景，但是当我使用此代码时：

```
 if (self.myAnimatedView.center.y < (self.view.bounds.size.height/4)) {

    float difference = (self.view.bounds.size.height/4) - myAnimatedView.center.y;
    score += (int)difference;
    NSString *nssScore = [NSString stringWithFormat:@"%i", score];
    scorelabel.text = nssScore;
    myAnimatedView.center = CGPointMake(myAnimatedView.center.x, myAnimatedView.center.y - difference);
    scorelabel.center = CGPointMake(scorelabel.center.x, scorelabel.center.y - difference);

    b1.center = CGPointMake(b1.center.x, b1.center.y - (difference/2));
    b2.center = CGPointMake(b2.center.x, b2.center.y - (difference/2));

    if (b1.center.y > self.view.bounds.size.height - (b1.bounds.size.height/2)) {
        b1.center = CGPointMake(b1.center.x, b2.center.y - 460);
    }

    if (b2.center.y > self.view.bounds.size.height - (b2.bounds.size.height/2)) {
        b2.center = CGPointMake(b2.center.x, b1.center.y - 460);
    }

    float viewWidth = self.view.bounds.size.width;
    float fViewWidthMinusPlatformWidth = viewWidth - 55.0f;
    int iViewWidthMinusPlatformWidth = (int)fViewWidthMinusPlatformWidth;

} 
```

这应该是这样，当 uiimageview 在屏幕上通过第 3/4 标记时，新的背景开始显示。但是，它不会改变背景。有人知道这里有什么不工作吗？提前致谢。

# javascript - 解析和填充 jQuery 插件的选项数组

> ID：12013458
> 
> 赞同：2
> 
> 时间：2012-08-17T21:32:21.663
> 
> 标签：javascript, jquery, json

我正在构建我的第一个 jQuery 插件。它获取 JSON 数据并将其加载到表中。我已经完成了大部分逻辑，只是在构建默认选项数组时遇到了麻烦。

我想做的是像这样传递一个选项数组：

```
/* Column array format:
    cols:
    [colname:
    {
        title: 'Column Title',  // Column title for display (if not specified, will
                                // use 'colname' value instead.
        sorttype: 'text',       // 'text', 'dropdown' or 'none'
    },
    nextcolname:
    {
        ...
    },
    ...
    ]
*/ 
```

如果没有传入任何选项，我遇到的问题是打包默认数组。这就是我所拥有的：

```
var settings = $.extend ({
    'cols'      : 'auto',
    'sortable'  : 'true' //turn off sorting altogether with this option.
}, options);

var index = '';
var element = '';
var colname = '';

// No columns specified.  That's OK, grab keys from first JSON element.
if (settings.cols == 'auto')
{
    settings.cols = Object.keys(data[0]); 

    $.each(settings.cols, function(index, colname){
        settings.cols[colname].title = colname;
        settings.cols[colname].sorttype = 'text';
    })
} 
```

首先，从风格上来说，看起来我的做法是正确的吗？选项数组的格式和我解析它的方式是否有意义？其次，settings.cols[colname].title 返回一个类型错误，因为它不存在（当然）。我如何填充这个对象，以便我可以有效地使用它，以便我可以遍历它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T01:08:01.523

您分配*settings.cols*的行不起作用......它分配了一个数组而不是属性映射。试试这个：

```
var keys = Object.keys(data[0]);
for (var i in keys) settings.cols[keys[i]] = {}; 
```

这是一个显示差异的完整测试。 *settings1*使用上述方法有效，但尝试访问*settings2*会引发错误：

```
var data = { a: 1, b: 2, c: 3 };
var keys = Object.keys(data);
var settings1 = { cols: {} };
var settings2 = { cols: {} };
for (var i in keys) settings1.cols[keys[i]] = {title: "hi"};
settings2.cols = Object.keys(data);
alert(settings1.cols["b"].title);
alert(settings2.cols["b"].title); 
```

# ruby-on-rails - openssl 1.0.1 与 ruby 1.9.3

> ID：12013462
> 
> 赞同：1
> 
> 时间：2012-08-17T21:32:50.257
> 
> 标签：ruby-on-rails, ruby, macos, openssl, rvm

我不断收到下面的错误消息。

> CybozuliveController#index 中的 Errno::ECONNRESET
> 
> 对等方重置连接 - SSL_connect

当然，我尝试了以下

> rvm pkg 安装 openssl
> 
> rvm 删除 1.9.3
> 
> rvm install 1.9.3 --with-openssl-dir=$rvm_path/usr --with-gcc=clang

有人知道如何获得 openssl 1.0.0 吗？：秒

在我的旧 Mac 中，ruby 1.9.3 和 openssl 1.0.0 工作，所以如果我能得到 openssl 1.0.0，

我想我会没事的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T22:55:06.977

this could be related to `clang`, Ruby is not guaranted to always work with it, try installing `gcc-4.2`.

at first make sure you run the new stable from RVM:

```
rvm get stable 
```

read:

```
rvm requirements 
```

for how to install `gcc-4.2`, and reinstall ruby:

```
rvm reinstall 1.9.3 
```

it will use the rvm installed openssl (it does it autmaticaly, no need to give `--with-openssl-dir=$rvm_path/usr`), not specifying `--with-gcc=` will allow RVM to select `gcc-4.2`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T04:17:30.347

您可能会[遇到与我在这里相同的问题：Ruby 1.9.3 的 OpenSSL 问题](https://stackoverflow.com/questions/11321403/openssl-trouble-with-ruby-1-9-3/13811555#13811555)

我认为 Open SSL 1.0.1 在协商 ssl 版本以与某些较旧/非标准服务器一起使用时造成了一些问题。阅读该问题中的答案以了解如何强制它。

# javascript - 替换 InnerHTML

> ID：12013468
> 
> 赞同：0
> 
> 时间：2012-08-17T21:33:24.193
> 
> 标签：javascript, html, safari, svg, rendering

我有一个 HTML 文件，然后调用一个 javascript 文件。javascript文件的基本功能是绘制一个svg文件，并对其进行修改。例如

我像这样在我的 JS 文件中嵌入 svg 图像

```
this.my_object.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><image xlink:href="img/gauge.png" width="122" height="127"/><g id="needle" transform="rotate(0,62,62)"><circle cx="62" cy="62" r="4" style="fill: #c00; stroke: none"/><rect transform="rotate(-130,62,62)" name="arrow"  x="58" y="38" width="8" height="24" style="fill: #c00; stroke: none"/><polygon transform="rotate(-130,62,62)" points="58,39,66,39,62,30,58,39" style="fill: #c00; stroke: none"/></g><text id="value" x="35" y="103" focusable="false" editable="no" style="stroke:none; fill:#fff; font-family: monospace; font-size: 12px"></text></svg>'; 
```

现在，根据这篇文章 [Safari embeded SVG doctype](https://stackoverflow.com/questions/6372695/safari-embeded-svg-doctype?rq=1)

我不能内联 svg 图像，因为那样它就不能在 safari 上工作。现在由于某些限制我不能在 html 中嵌入 svg 文件，**它必须通过 javascript 访问**。有没有什么方法可以在不使用的情况下在 javascript 中使用 svg 图像`innerHTML`，**因为最终图像必须在 safari 上重新渲染。**

PS：编译时必须将此图像复制到同一文件夹中。 [https://sphotos-b.xx.fbcdn.net/hphotos-snc6/179594_10150982737360698_1827200234_n.jpg](https://sphotos-b.xx.fbcdn.net/hphotos-snc6/179594_10150982737360698_1827200234_n.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T21:51:02.727

我目前在 Linux 中，无法使用 Safari 进行测试，但仍会发布答案...

尝试这样[**做**](http://jsfiddle.net/f0t0n/e7qbS/)。

**HTML：**

```
<div id="image-container"></div>​ 
```

**JavaScript：**

```
var container = document.getElementById('image-container'),
    image = document.createElement('img');
image.src = 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><image xlink:href="img/gauge.png" width="122" height="127"/><g id="needle" transform="rotate(0,62,62)"><circle cx="62" cy="62" r="4" style="fill: #c00; stroke: none"/><rect transform="rotate(-130,62,62)" name="arrow"  x="58" y="38" width="8" height="24" style="fill: #c00; stroke: none"/><polygon transform="rotate(-130,62,62)" points="58,39,66,39,62,30,58,39" style="fill: #c00; stroke: none"/></g><text id="value" x="35" y="103" focusable="false" editable="no" style="stroke:none; fill:#fff; font-family: monospace; font-size: 12px"></text></svg>';
container.appendChild(image);
​ 
```

**更新 #1 - 数据 URI 编码：**

在 IE 8 和 9 中使用未编码的数据 URI 可能会失败。

因此，您可以确定使用的浏览器`navigator.userAgent`，如果它是 IE >= 8，则将[字符串编码为 Base64](http://ntt.cc/2008/01/19/base64-encoder-decoder-with-javascript.html)，然后将其分配为`image.src`.

**更新 #2 - 使用`object`标签：**

```
var container = document.getElementById('image-container'),
    imageObject = document.createElement('object');
imageObject.type = 'image/svg+xml';
imageObject.data = 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><image xlink:href="img/gauge.png" width="122" height="127"/><g id="needle" transform="rotate(0,62,62)"><circle cx="62" cy="62" r="4" style="fill: #c00; stroke: none"/><rect transform="rotate(-130,62,62)" name="arrow"  x="58" y="38" width="8" height="24" style="fill: #c00; stroke: none"/><polygon transform="rotate(-130,62,62)" points="58,39,66,39,62,30,58,39" style="fill: #c00; stroke: none"/></g><text id="value" x="35" y="103" focusable="false" editable="no" style="stroke:none; fill:#fff; font-family: monospace; font-size: 12px"></text></svg>';
container.appendChild(imageObject); 
```

您可以设置数据 URI 或直接链接到 .svg 文件位置。

[**`object`演示**](http://jsfiddle.net/f0t0n/e7qbS/1/)

**更新 #3 - CSS 方法：**

```
var container = document.getElementById('image-container');
container.style.width = '100px';
container.style.height = '100px';
container.style.backgroundPosition = 'center';
container.style.backgroundImage = 'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><image xlink:href="img/gauge.png" width="122" height="127"/><g id="needle" transform="rotate(0,62,62)"><circle cx="62" cy="62" r="4" style="fill: #c00; stroke: none"/><rect transform="rotate(-130,62,62)" name="arrow"  x="58" y="38" width="8" height="24" style="fill: #c00; stroke: none"/><polygon transform="rotate(-130,62,62)" points="58,39,66,39,62,30,58,39" style="fill: #c00; stroke: none"/></g><text id="value" x="35" y="103" focusable="false" editable="no" style="stroke:none; fill:#fff; font-family: monospace; font-size: 12px"></text></svg>\')';

​ 
```

[**CSS方法的DEMO**](http://jsfiddle.net/f0t0n/e7qbS/4/)

**更新 #4 - MIME 类型：**

[UnderDog](https://stackoverflow.com/users/1319819/underdog)的评论：

> 我改变了数据类型，它工作了..但另外我还必须配置 web.config 文件来添加这个：

`<staticContent><mimeMap fileExtension=".svg" mimeType="image/svg+xml" /></staticContent>`

服务器应发送正确的`Content-Type`标头。

# javascript - 怎么了？通过字符串定义 JavaScript 命名空间

> ID：12013469
> 
> 赞同：1
> 
> 时间：2012-08-17T21:33:34.847
> 
> 标签：javascript, namespaces

我使用以下代码来定义一个名为 com.foo 的新命名空间

```
function extendNamespace(ns, ns_string) {
    var parts = ns_string.split('.');
    var parent = ns;

    for (var i = 0; i < parts.length; i++) {
        //create a property if it doesnt exist
        if (typeof parent[parts[i]] == 'undefined') {
            parent[parts[i]] = {};
        }
        parent = parent[parts[i]];
    }
    return ns;
}

var com = {};
extendNamespace(com, "com.foo");

console.log(com); // OK (even has an object called "foo"!!)
console.log(com.foo); // Undefined ??? 
```

第一次调用`console.log(com)`在控制台中清楚地显示我已经创建了一个新对象“com”，其中包含一个名为“foo”的对象。

到现在为止还挺好。

第二个电话`console.log(com.foo);`虽然返回我“未定义”。

是什么赋予了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T21:36:16.423

> 第一次调用 console.log(com) 在控制台中清楚地显示我已经创建了一个新对象“com”，其中包含一个名为“foo”的对象。

不，它有一个名为 的属性`com`，其值是一个具有名为 的属性的对象`foo`。

当您只想使用 扩展它时，`com`您正在扩展它。`com.foo``foo`

# include - 将 Sidebar Generator 插件包含到我的 WP 主题中

> ID：12013471
> 
> 赞同：2
> 
> 时间：2012-08-17T21:33:48.793
> 
> 标签：include, wordpress, sidebar

我正在尝试包含此插件：

[http://wordpress.org/extend/plugins/sidebar-generator/](http://wordpress.org/extend/plugins/sidebar-generator/)

进入我的 wordpress 主题。正如互联网上的许多人所说，我只是将 sidebar_generator.php 文件包含在我的 functions.php 中。“侧边栏”菜单出现在外观下，但无论我做什么，如果我点击它，什么都不会发生（就像它被链接在“#”上一样）。

如果我通过 wordpress 界面安装插件一切正常，但我需要集成它。

有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T01:50:03.113

您不需要插件来拥有额外的侧边栏。您应该能够构建带有任意数量侧边栏的主题模板。当我在 WordPress 中创建自定义主题时，我使用了[960 CSS Grid](http://960.gs/)的变体（另一个不错的是更新的[1140px CSS Grid System](http://cssgrid.net/)，它是流动的）。

要注册您的侧边栏以接受小部件，请将此代码插入您的 functions.php 文件中：

```
// Widget Areas //
if ( function_exists('register_sidebars') ) {
    // Primary sidebar widget
    register_sidebar( array(
        'name' => __( 'Blog Sidebar', 'unique' ),
    'id' => 'blog-sidebar',
    'description' => __( 'The sidebar widget area for the blog.', 'unique' ),
    'before_widget' => '<li id="%1$s" class="widget-container %2$s">',
    'after_widget' => '</li>',
    'before_title' => '<h2 class="widget-title">',
    'after_title' => '</h2>',
) );

register_sidebar( array(
    'name' => __( 'Left Sidebar', 'unique' ),
    'id' => 'left-sidebar',
    'description' => __( 'The left sidebar widget area for pages.', 'unique' ),
    'before_widget' => '<li id="%1$s" class="greenGradient widget-container %2$s">',
    'after_widget' => '</li>',
    'before_title' => '<h2 class="widget-title greenbar center">',
    'after_title' => '</h2>',
) );

register_sidebar( array(
    'name' => __( 'Right Sidebar', 'unique' ),
    'id' => 'right-sidebar',
    'description' => __( 'The right sidebar widget area for pages.', 'unique' ),
    'before_widget' => '<li id="%1$s" class="redGradient widget-container %2$s">',
    'after_widget' => '</li>',
    'before_title' => '<h2 class="widget-title redbar center">',
    'after_title' => '</h2>',
) ); 
```

在这种情况下，我为博客注册了一个侧边栏，然后分别用于右侧边栏和左侧边栏。

在我的主题目录中，我有三个 sidebar.php 文件。博客侧边栏文件是默认的 sidebar.php 文件。另外两个被命名为sidebar-left.php 和sidebar-right.php。每个侧边栏都有相应的代码，如下所示：

```
 <?php // blog widget area
        if ( is_active_sidebar( 'blog-sidebar' ) ) : ?>
        <ul>
            <?php dynamic_sidebar( 'blog-sidebar' ); ?>
        </ul>
    <?php endif; // end blog widget area ?> 
```

将此代码包装在侧边栏中的 div 中，并确保将“博客侧边栏”名称更改为每个侧边栏的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:20:37.420

在该行中寻找功能`admin_menu`和编辑。只需替换`__FILE__`为`sidebar-generator`.

**解释**：如果您使用侧边栏生成器作为插件，`__FILE__`则意味着`sidebar-generator`，但如果您将其包含在主题的某个目录中，则常量`__FILE__`可能会更改为不同的内容（例如 inc、includes... 或其他内容）

# facebook-like - Facebook“喜欢”按钮的评论框大小

> ID：12013473
> 
> 赞同：1
> 
> 时间：2012-08-17T21:33:54.180
> 
> 标签：facebook-like

当用户点击like按钮时，会弹出一个宽度为450px的评论框。这对于我可用的空间来说太大了。据我所知，这个评论框似乎没有响应我在这里设置的“数据宽度”属性：

```
<div class="fb-like" data-send="false" data-layout="button_count" data-width="290"  data-show-faces="false"> 
```

...所以我一直用我的 css 强制它到这个大小：

```
iframe.fb_ltr { max-width:290px !important;} 
```

一切都很好，直到似乎发生了一些变化，这不再可行，因为现在使用这个新的 iframe 在 iframe 中设置了 450px 的宽度？班级：

```
<div class="fbpf pluginLikeFlyout pluginLikeFlyoutFull pluginLikeFlyoutFullButton">

.pluginLikeFlyoutFull {
    top: 24px;
    width: 450px;
} 
```

底线，是否有另一种方法来设置评论框的宽度，使其不默认为 450 像素？

谢谢，马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-11T11:37:40.037

我将此添加到我的CSS：

```
div.fb-like.fb_iframe_widget > span {
 width: 100% !important;
}

div.fb-like.fb_iframe_widget{
 width: 100%;
} 
```

# java - 如何将数据从 SOAP 处理程序传回 Web 服务客户端？

> ID：12013476
> 
> 赞同：7
> 
> 时间：2012-08-17T21:34:22.797
> 
> 标签：java, xml, web-services, soaphandler

（跟进这个问题：[Getting raw XML response from Java web service client](https://stackoverflow.com/questions/11976234/getting-raw-xml-response-from-java-web-service-client)）

我有一个 SOAP 消息处理程序，它能够获取 Web 服务响应的原始 XML。我需要将此 XML 放入 Web 服务客户端，以便在发送响应之前对响应执行一些 XSL 转换。我无法找到一种从 SOAP 处理程序获取数据的好方法，该处理程序捕获传入的消息，并使原始 XML 可用于生成的（来自 WSDL）Web 服务客户端。如果这甚至可行，有什么想法吗？

* * *

我想出了这样的事情：

```
public class CustomSOAPHandler implements javax.xml.ws.handler.soap.SOAPHandler<javax.xml.ws.handler.soap.SOAPMessageContext>
{
    private String myXML;
    public String getMyXML()
    {
        return myXML;
    }
    ...
    public boolean handleMessage(SOAPMessageContext context)
    {
        ...
        myXML = this.getRawXML(context.getMessage());
    }

    //elsewhere in the application:
    ...
    myService.doSomething(someRequest);
    for (Handler h: ((BindingProvider)myService).getBinding().getHandlerChain())
    {
        if (h instanceof CustomSOAPHandler )
        {
            System.out.println("HandlerResult: "+ ((CustomSOAPHandler )h).getMyXML());
        }
    } 
```

在非常简单的测试中，这似乎有效。但这个解决方案有点像廉价的黑客攻击。我不喜欢将原始 XML 设置为链处理程序的成员，而且我直觉这违反了许多其他最佳实践。有没有人有更优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-23T15:46:26.217

这两个似乎对我有用的选择都记录[在这里](https://stackoverflow.com/questions/16652412/how-to-get-the-xml-response-body-back-from-a-jax-ws-client)。我还没有收到关于使用 ThreadLocal 是否可以的回复，但我不明白为什么不应该这样。

我添加到原始问题的第二种方法是走处理程序的路线。在调试 WS 标注时，我注意到 invocationProperties 映射将 SOAP 响应作为 responseContext 对象中内部数据包结构的一部分，但似乎无法访问它。ResponseContext 是一组名称值对。[但是，当我在这个位置](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/com/sun/xml/internal/ws/client/ResponseContext.java#ResponseContext.get%28java.lang.Object%29)阅读 ResponseContext 的源代码时，我看到get方法的代码有一个注释，如果找不到Application Scoped属性，则返回null，否则，它会从数据包invocationProperties中读取它，这似乎是我想要的。因此，我搜索了如何在键/值对上设置范围（Google：为 jaxws 设置应用程序范围属性），上下文正在低调地引入它，它在我引用的 jax-ws 规范中另一个线程。

我还阅读了一些关于数据包的信息，[https://jax-ws.java.net/nonav/jax-ws-20-fcs/arch/com/sun/xml/ws/api/message/Packet.html](https://jax-ws.java.net/nonav/jax-ws-20-fcs/arch/com/sun/xml/ws/api/message/Packet.html)。

我希望这对你有一些意义。我担心如果 Web 服务调用导致 Soap FAULT，那么三个将无法使用 JAXB，并且我真的很想记录这个数据包，因为它是从支付网关返回的，而该网关迄今为止有一个数字未记录的结果。

祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T15:56:30.260

解决方案是使用 JAXB 将对象转换回 XML。我真的不想这样做，因为让 web 服务客户端接收 XML，将其转换为 POJO，只是将 POJO 转换回 XML 似乎是多余的，但它可以工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-03-12T23:27:24.493

传递请求/响应消息体的处理程序示例：

```
public class MsgLogger implements SOAPHandler<SOAPMessageContext> {

    public static String REQEST_BODY = "com.evil.request";
    public static String RESPONSE_BODY = "com.evil.response";

    @Override
    public Set<QName> getHeaders() {
        return null;
    }

    @Override
    public boolean handleMessage(SOAPMessageContext context) {
        SOAPMessage msg = context.getMessage();
        Boolean beforeRequest = (Boolean) context.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);
        try {
            ByteArrayOutputStream baos = new ByteArrayOutputStream(32_000);
            context.getMessage().writeTo(baos);
            String key = beforeRequest ? REQEST_BODY : RESPONSE_BODY;
            context.put(key, baos.toString("UTF-8"));
            context.setScope(key, MessageContext.Scope.APPLICATION);
        } catch (SOAPException | IOException e) { }
        return true;
    }

    @Override
    public boolean handleFault(SOAPMessageContext context) {
        return true;
    }

    @Override
    public void close(MessageContext context) { }
} 
```

要注册处理程序并使用保留的属性：

```
BindingProvider provider = (BindingProvider) port;
List<Handler> handlerChain = bindingProvider.getBinding().getHandlerChain();
handlerChain.add(new MsgLogger());
bindingProvider.getBinding().setHandlerChain(handlerChain);

Req req = ...;
Rsp rsp = port.serviceCall(req); // call WS Port

// Access saved message bodies:
Map<String, Object> responseContext = provider.getResponseContext();
String reqBody = (String) responseContext.get(MsgLogger.REQEST_BODY);
String rspBody = (String) responseContext.get(MsgLogger.RESPONSE_BODY); 
```

**TL;博士**

[Metro JAX WS RI 文档](https://javaee.github.io/metro-jax-ws/doc/user-guide/release-documentation.html)说关于`MessageContext.Scope.APPLICATION`属性：

> 消息上下文对象还可以保存客户端或提供者设置的属性。例如，端口代理和调度对象都扩展了`BindingProvider`. 可以从两者中获取消息上下文对象来表示请求或响应上下文。处理程序可以读取请求上下文中设置的属性，并且处理程序可以在传递给它们的消息上下文对象上设置属性。如果这些属性与范围一起设置，`MessageContext.Scope.APPLICATION`那么它们将在客户端的响应上下文中可用。在服务器端，一个上下文对象被传递到一个`Provider`.

`metro-jax-ws/jaxws-ri/rt/src/main/java/com/sun/xml/ws/api/message/Packet.java`包含属性：

```
/**
 * Lazily created set of handler-scope property names.
 *
 * <p>
 * We expect that this is only used when handlers are present
 * and they explicitly set some handler-scope values.
 *
 * @see #getHandlerScopePropertyNames(boolean)
 */
private Set<String> handlerScopePropertyNames; 
```

另一方面`metro-jax-ws/jaxws-ri/rt/src/main/java/com/sun/xml/ws/client/ResponseContext.java`是`Map`with 的实现：

```
public boolean containsKey(Object key) {
    if(packet.supports(key))
        return packet.containsKey(key);    // strongly typed

    if(packet.invocationProperties.containsKey(key))
        // if handler-scope, hide it
        return !packet.getHandlerScopePropertyNames(true).contains(key);

    return false;
} 
```

在`SOAPHandler`我们可以将属性标记为`APPLICATION`而不是默认值`MessageContext.Scope.HANDLER`：

```
/**
 * Property scope. Properties scoped as <code>APPLICATION</code> are
 * visible to handlers,
 * client applications and service endpoints; properties scoped as
 * <code>HANDLER</code>
 * are only normally visible to handlers.
 */
public enum Scope {APPLICATION, HANDLER}; 
```

经过：

```
/**
 * Sets the scope of a property.
 *
 * @param name Name of the property associated with the
 *             <code>MessageContext</code>
 * @param scope Desired scope of the property
 * @throws java.lang.IllegalArgumentException if an illegal
 *             property name is specified
 */
public void setScope(String name,  Scope scope); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-24T17:16:05.067

作为替代方案，您可以将其放入`ThreadLocal`. 因此，您需要`SOAPHandler`@gavenkoa 描述的 (ty)，但将其添加到`ThreadLocal`实例中，而不是肥皂上下文中。

# c# - 在 XSL 样式表中将字符串解析为 int、C#

> ID：12013482
> 
> 赞同：2
> 
> 时间：2012-08-17T21:34:55.760
> 
> 标签：c#, string, parsing, xslt, int

我对 XSL 样式表比较陌生，所以请耐心等待。

我的 .xsl 中有一个嵌入式 C# 块。它在那里是因为我需要一些可以接收一串数字的东西（例如：“1,3,5”）。我想要它到'，'上的数字。代码块是 XSL 循环的一部分，因此它传递它在哪个迭代中，并将该数字与通过字符串传入的列表进行比较。如果迭代计数在列表中，则返回 true。如果不是，则返回 False。字符串也可以以“all”的形式出现，在这种情况下只返回 true。

这就是我想出的：

```
<msxsl:script language="c#" implements-prefix="user">
    <![CDATA[

        public bool showStoryImg(string desiredImgs, int currentNum){
            bool rtnVal = false;
            try
            {
                if (desiredImgs == "all")
                {
                    rtnVal = true;
                }
                else
                {
                    string[] numStrArr = desiredImgs.Split(',');
                    int[] values = new int[numStrArr.Length];
                    for(int x = 0; x < numStrArr.Length; x++)
                    {
                       values[x] = Convert.ToInt32(numStrArr[x].ToString());
                    }

                    foreach(int y in values)
                    {
                        if(currentNum == y){
                            return true;
                        }
                        else
                        {
                            rtnVal = false;
                        }
                    }
                }
            }
            catch(Exception e)
            {
                rtnVal = false;
            }
            return rtnVal;
        }
    ]]>
</msxsl:script> 
```

但是我担心我的问题是 XSL 无法使用 .NET 库，因此为什么这段代码不起作用。关于我应该如何处理这个问题有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T03:49:26.923

**根本不需要扩展功能！**

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:param name="pImages" select="'1,3,5'"/>

 <xsl:variable name="vImages" select="concat(',',$pImages, ',')"/>

 <xsl:template match="/*">
     <xsl:apply-templates select=
     "img[contains($vImages, concat(',',position(),','))]/@src"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于以下 XML 文档时**（问题中未提供！）：

```
<images>
  <img src="Image1.jpg"/>
  <img src="Image2.jpg"/>
  <img src="Image3.jpg"/>
  <img src="Image4.jpg"/>
  <img src="Image5.jpg"/>
</images> 
```

**只处理参数中指定位置的元素`$pImages`——在这种情况下只输出它们的`src`属性**：

```
Image1.jpgImage3.jpgImage5.jpg 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T21:46:51.990

没有库的 string 到 int 并不是*非常*困难（假设 String.Split 有效）：

```
// untested, off-the-cuff
for(int x = 0; x < numStrArr.Length; x++)
{
   int temp = 0;

   for(int y= 0; y < numStrArr[x].Length; y++)
   {
       temp *= 10;
       temp += (numStrArr[x][y] - 48);
   }

   values[x] = temp;
} 
```

# ios - iOS：如何解析 XML 以进行实时搜索

> ID：12013483
> 
> 赞同：0
> 
> 时间：2012-08-17T21:34:56.587
> 
> 标签：ios, xml, search, real-time, nsxmlparser

现在我正在解析一个 XML 文件，例如 Apple (LazyTableImages) 中的示例。一切正常。我想添加一个实时搜索（UISearch），它必须解析另一个 XML 文件（专门为搜索编程）。如何在不冻结屏幕的情况下解析此文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T22:54:33.483

您在后台解析时使用 GCD 并调度一个块来执行此操作（并且可能显示一个微调器）。您的 XML 解析器委托应该查看“取消”标志，因此如果用户执行诸如点击取消或后退按钮之类的操作，您将立即取消 xml 解析并允许当前操作停止。

编辑：所以你将有一个 ivar 来保存 NSXMLParser，以及你的类中的一个在解析完成时调用的方法：

```
NSXMLParser *parser;
NSString *searchTerm;
id results; // some mutable collection that the parser stores things into

- (void)parseFinished:(id)result; // result can be an array or dictionary, whatever you want

when the user has entered some text and you want to search:

searchTerm = ....; // set it
parser = [NSXMLParser alloc] init....];
parsedItems = ....

dispatch_async(dispatch_get_global_queue(0,0), ^
  {
    BOOL ret = [parser parse];
    id myResultObject;

    if(ret == YES) {
        // your delegate methods have populated parsedItems now
        search through them using searchTerm
        create and fill in myresultObject, some collection/string/number whatever
    }
    // nil myResultObject means that parser failed
    dispatch_async(dispatch_get_main_queue(), ^[self parseFinished:myResultObject];} );
} ); 
```

如果用户键入取消（假设 XML 对象很大，并且解析需要几秒钟），那么您将在 action 方法中简单地发送

```
[parser abortParsing]; 
```

# sql - 使用 powershell 将 SQL 查询结果导出为 XML 格式

> ID：12013484
> 
> 赞同：0
> 
> 时间：2012-08-17T21:35:06.523
> 
> 标签：sql, xml, powershell

我需要根据我使用 powershell 运行的 SQL 查询创建一个 XML 文件。我已经知道我需要创建的 XML 的架构。查询结果需要循环，我想根据架构将每个数据值添加到特定的 XML 节点。

我能够运行查询并获得所需的结果，但我在按照规定格式放置数据时遇到问题。

这是我如何尝试完成此操作的示例：

**解析 XML 模板

$XmlTemplate= [xml](get-content $xml) （$xml 是我从客户端获得的架构）

***通过XML模板解析并跳转到标签

$PlanIDXML= $XmlTemplate.NpiLink.PlanProvider.PlanID（要到达我需要输入数据的节点）

**通过XML模板解析并跳转到标签

$PlannameXML= $XmlTemplate.NpiLink.PlanProvider.PlanName（要到达我需要输入数据的节点）

样品 qry; 从计划中选择计划 ID、计划名称

******假设我运行查询并将结果保存为 $qryresults*******

 **foreach($qryresults 中的$result) {

$PlanID=$result.PlanID $PlanName=$result.PlanName

**制作克隆

$NewPlanIDXML=$PlanIDXML.Clone()

**对数据进行更改

$NewPlanIDXML=$PlanID

***附加

$PlanIDXML.AppendChild($NewPlanIDXML)

***为计划名称做同样的事情****

$PlanNameXML=$result.PlanName

} $XmlTemplate.Save('文件路径')

我担心的是，我需要为我在查询结果中获得的每个计划或 planid 执行此操作，并且我需要继续生成标签和标签，并将它们附加到原始节点并保存模式。

因此，如果我的查询结果有 10 个计划 ID，它应该继续生成新的计划 ID 标签和计划名称标签。

它不允许我追加（因为 system.string 无法转换为 system.xml）。我真的被困住了，如果你有更好的方法来处理这个问题，我会全力以赴。

提前非常感谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T00:53:56.873

您可能对此进行了过度设计。如果您有 XML 节点的模板，只需将其视为字符串，在适当的位置弹出您的值。将这些节点的一些数组生成为字符串，然后将它们连接在一起并保存到磁盘。

假设您的模板看起来像这样（自己输入一些标记，生成的值应该去哪里）：

```
--Template.xml---
<Node attr="##VALUE1##">
  <Param>##VALUE2##</Param>
</Node> 
```

你想运行一些查询来生成一堆这样的节点，填写 VALUE1 和 VALUE2。然后这样的事情可以工作：

```
$template = (gc .\Template.xml) -join "`r`n"
$val1Token = '##VALUE1##'
$val2Token = '##VALUE2##'

$nodes = foreach( $item in Run-Query)
{
   # simple string replace
   $result = $template
   $result = $result.Replace($val1Token, $item.Value1)
   $result = $result.Replace($val2Token, $item.Value2)
   $result
}

# you have all nodes in a string array, just join them together along with parent node
$newXml = (@("<Nodes>") + $nodes + "</Nodes>") -join "`r`n"

$newXml | out-file .\Results.xml 
```**

# jquery - 如何在 facebook 画布应用程序中关闭 fancybox？

> ID：12013491
> 
> 赞同：0
> 
> 时间：2012-08-17T21:35:30.120
> 
> 标签：jquery, fancybox

我有一个 facebook 应用程序，我使用 fancybox。我想用以下代码关闭fancybox，但是当用户单击关闭链接时，fancybox 再次打开。此代码适用于非 Facebook 页面。

```
<a href="#" onclick="parent.jQuery.fancybox.close();">Close</a> 
```

有谁知道如何在 facebook 画布应用程序中关闭fancybox？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T22:06:08.727

我猜fancybox 与锚标签相关联，因此您的代码将其关闭，但附加的事件侦听器会拾取点击并触发打开。尝试使用另一个标签来触发您的关闭脚本：

```
<span onclick="parent.jQuery.fancybox.close();">Close</span> 
```

如果可行，您可以将样式添加到您的跨度以为其提供指针光标，否则如果您愿意，可以使其看起来像一个链接。

# php - PHP中的性格测试逻辑

> ID：12013500
> 
> 赞同：-3
> 
> 时间：2012-08-17T21:36:19.530
> 
> 标签：php

我想在 PHP 中进行“个性”测试。我想用类似以下逻辑的东西来制作它：

```
If $answer_one == "a" --> $personality_a = $personality_a+1;
If $answer_one == "b" --> $personality_b = $personality_b+1;
If $answer_one == "c" --> $personality_c = $personality_c+1;
If $answer_one == "d" --> $personality_d = $personality_d+1;

See which $personality_* is the highest one and then send the response. 
```

我怎样才能做出这样但可能更通用的东西`foreach($_POST as $k => $v)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T22:15:58.410

我的朋友那里的静态代码很容易。您可以在这里考虑一个多维数组

首先创建一个答案数组 $answerArray = array('a','b','c','d')

其次，将用户的响应填充到一个数组中（称为 $userAnswers）

然后，使用类似的东西比较数组

```
$numCorrect = 0;
for($a; $a < count($answerArray); $a++){
    if($answerArray[$a] == $userAnswers[$a]){
        $numCorrect++;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T21:43:34.387

假设您也在制作表格，并且对从“查看源代码”黑客中掩盖测试不感兴趣

在 html 中，类似于

```
<input type="radio" name="answer[1]" value="a"> 
```

在代码中

```
<?php

$answers = array_count_values($_POST['answer']);

arsort($answers, SORT_NUMERIC);
reset($answers);
$personalityType = key($answers);

// TODO: validate type is valid 
```

# ruby - -@ 运算符在 Ruby 中的作用是什么？

> ID：12013501
> 
> 赞同：4
> 
> 时间：2012-08-17T21:36:23.770
> 
> 标签：ruby

我在 Rails/ActiveSupport 中找到了 -@ 运算符的重新定义：

[https://github.com/rails/rails/blob/master/activesupport/lib/active_support/duration.rb#L33](https://github.com/rails/rails/blob/master/activesupport/lib/active_support/duration.rb#L33)

你能告诉我这是什么意思吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T22:11:37.933

`-@`和`+@`只是一元`-`和的方法名称`+`。如果您想重新定义它们，将它们作为方法调用等，这就是您需要引用它们以将它们与二进制`-`和`+`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-17T21:41:41.390

我认为它定义了当对象被否定时会发生什么，例如：

```
x = -y 
```

y 对象需要定义一个 -@ 运算符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T21:41:14.537

它只是返回一个取反的持续时间对象，其中值被取反，部分的所有值也被取反。

# database - 将 App_Data 中的 DBFile.mdf 上传到 Azure

> ID：12013504
> 
> 赞同：2
> 
> 时间：2012-08-17T21:36:45.393
> 
> 标签：database, asp.net-mvc-3, azure, sql-server-express

我有一个存储在 /App_Data 目录中的本地数据库的 ASP.NET MVC 3 项目。该数据库是 SQLExpress 文件 (*-mdf)。

我的连接字符串在我的开发 CPU 中完美运行，连接字符串是：

数据源=.\SQLEXPRESS；初始目录=CFCBBSecurity；集成安全=SSPI；AttachDBFilename=|DataDirectory|\MYFILE.mdf；用户实例=true" providerName="System.Data.SqlClient"

当我使用 VS 2010 将其上传到 Azure 时，所有文件都在服务器中，但应用程序无法访问数据库。

我应该做什么，更改或更新？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T21:54:49.833

问题是您引用的是本地 SQL 实例（.\SQLEXPRESS，“点”代表 localhost）。我假设您在您的机器上运行 SQL Server 2005/2008/2012 Express，这就是它在本地工作的原因。

但是，当您将应用程序部署到 Windows Azure 时，该 Web 角色/工作者角色/网站上没有安装 SQL Server（无论如何，这将是一个坏主意，因为 Web/工作者角色不是持久的！）。

您需要做的是注册像 SQL Azure 这样的“云数据库”并使用它。或者，您可以自己将其托管在 Windows Azure 虚拟机（即 IaaS，但这涉及更多工作）中。

如果您正在构建 MVC 3 应用程序，我建议您从 SQL Azure 开始。这是一个教程：[在 Azure 上运行 ASP.NET MVC 3 应用程序](http://blogs.msdn.com/b/webdev/archive/2011/08/11/running-asp-net-mvc-3-applications-on-azure.aspx)（请注意，本教程包含旧门户的屏幕截图）。

# c# - 在数组 C# MVC razor 中使用命名键

> ID：12013505
> 
> 赞同：0
> 
> 时间：2012-08-17T21:36:50.290
> 
> 标签：c#, javascript, asp.net-mvc, razor

我有一个 javascript 数组被传回控制器

```
amount_array[] 
```

它包含不同的命名键，例如

```
amount_array['start_date'] , amount_array['end_date'] 
```

在数组中有更多类似的变量

有没有办法在控制器上的 C# 中设置一个数组，以按名称从数组中调用开始和结束日期？

还是我只需要按数组中的位置调用？

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T21:40:39.153

> 我有一个 javascript 数组

不，您没有 javascript 数组。在 javascript 数组中必须有基于整数 0 的索引。您拥有的是一个具有 2 个属性的 javascript 对象：`start_date`和`end_date`.

所以你定义一个视图模型来匹配这个结构：

```
public class MyViewModel
{
    public DateTime Start_Date { get; set; }
    public DateTime End_Date { get; set; }
} 
```

然后是一个控制器操作来获取这个视图模型并对其进行一些处理：

```
[HttpPost]
public ActionResult SomeAction(MyViewModel model)
{
    // use model.Start_Date and model.End_Date here
    ...
} 
```

最后是调用此控制器操作的 javascript 函数（例如使用 AJAX）：

```
var amount_array = {
    start_date: new Date(2012, 8, 1).toUTCString(),
    end_date: new Date(2012, 8, 31).toUTCString()
};
$.ajax({
    url: '@Url.Action("SomeAction")',
    type: 'POST',
    data: amount_array,
    success: function(result) {

    }
}); 
```

# java - 如何使用 servlet 和业务层？

> ID：12013507
> 
> 赞同：1
> 
> 时间：2012-08-17T21:37:01.017
> 
> 标签：java, sockets, web-applications, servlets, business-logic

我有一个java应用程序：

一个。服务器端 - Swing 应用程序（我使用 jTextArea 为服务器创建了一个 gui，只是为了打印客户端请求）

湾。客户端 - Swing 应用程序

在服务器端，我有将数据存储在一些向量中的业务层。

现在，除了客户端的 Swing 应用程序之外，我还需要创建一个 Web 应用程序，它需要从 bl 中的向量中表示相同的数据。

我的问题是，如果我打开一个新的 Web 项目，servlet 如何从 bl 获取数据，因为它是不同的项目。我的服务器端是否有可能监听来自 servlet 的请求？他们（servlet 和 server(a) ）是否有可能通过套接字进行通信？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T11:53:00.183

我认为最好的方法是创建一个新的 Web 项目。在网页的 Gui 中有一些按钮.. 当单击某个按钮时，我会将他重定向到 servlet。现在 Servlet 将通过套接字与服务器端进行通信，以获取有关 BL 的数据。当 servlet 接收到这些数据时，我将创建一个新的网页并显示数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T23:09:33.460

因此，您希望将您的业务逻辑暴露给另一种媒体，在本例中为 HTTP。你有很多选择。通过使用 servlet（这将需要某种 servlet 容器来运行，例如 Tomcat 或 Jetty 等），您可以利用许多不错的服务器功能，例如会话管理、线程池等。如果您试图修改您现有的服务器以也接受 HTTP 通信，除非您自己实现它们，否则您会错过这些。

所以我对你的架构的建议是：

将您的业务逻辑放在 Web 服务后面（可以使用 servlet 完成）。所以它会理解 HTTP 通信，它会为你提供那些不错的功能。然后更改您的 Swing 客户端以使用 HTTP 请求与您的新 Web 服务通信。

# c# - ListView 不会在 C# Forms 应用程序中刷新或更新

> ID：12013509
> 
> 赞同：0
> 
> 时间：2012-08-17T21:37:14.067
> 
> 标签：c#, forms, listview, refresh

我正在尝试在 MS Visual Studios 中编写一个简单的 C# 密码保护实用程序。我在 formA 中有一个 listView，我想使用 formB 将新项目添加到列表中。

FormB 调用作为 formA 成员的 forceAdd。forceAdd 然后更新数据集并尝试通过调用 populateList() 来刷新 listView。

问题是 listView 不会反映更改，直到我通过 formA 中的按钮或复选框调用我的 populateList() 函数。

例如，我可以在我的代码中调用 populateList() 50 次，但无济于事，但只要我从 formA 上的按钮调用它，它就可以工作。

（DieselPass = fromA，newForm = FormB，newForm::Save 调用 forceAdd，formA::new 打开 newForm）

（当我连接 formA::Edit... 按钮以填充并在保存后单击它时，listView 会更新）

我是新用户......这张图片解释了它：http: [//i50.tinypic.com/wk6bys.jpg](http://i50.tinypic.com/wk6bys.jpg)

```
 public void forceAdd(String a, String u, String p)
    {
        accountsDataSet.tblAccounts.AddtblAccountsRow(a, u, p);
        tblAccountsTableAdapter.Update(accountsDataSet.tblAccounts);
        populateList();
    }

    private void populateList()
    {
        //make sure data set is up to date
        this.tblAccountsTableAdapter.Fill(this.accountsDataSet.tblAccounts);
        //clear existing items
        listView1.Items.Clear();
        for (int i = 0; i < accountsDataSet.tblAccounts.Count; i++)
        {
            String[] wtf;
            if (maskPasswords)
                wtf = new string[] { accountsDataSet.tblAccounts[i].Account, accountsDataSet.tblAccounts[i].Username };
            else
                wtf = new string[] { accountsDataSet.tblAccounts[i].Account, accountsDataSet.tblAccounts[i].Username, accountsDataSet.tblAccounts[i].Password };
            lvi = new ListViewItem(wtf);
            Console.WriteLine(lvi.ToString());
            listView1.Items.Add(lvi);
        }
    } 
```

我已经尝试过的事情包括：

```
 listView1.Update();
    listView1.BeginUpdate();
    ...
    listView1.EndUpdate();
    listView1.Refresh();
    listView1.Clear();
    listView1.RedrawItems(0,i,t/f);
    this.Update();
    this.Refresh(); 
```

任何帮助或提示将不胜感激，谢谢。

更多代码：

FormA 在 formB 中设置参考：

```
 myNewForm.getForm = this; 
```

FormB 对 formA 的引用：

```
 private mainForm myForm = new mainForm();
    public mainForm getForm
    {
        get { return myForm; }
        set { myForm = value; }
    } 
```

FormB 调用 FormA 的函数：

```
 myForm.forceAdd(accountBox.Text.ToString(), usernameBox.Text.ToString(), passwordBox.Text.ToString()); 
```

这是我需要执行“调用/委托”的实例吗？

编辑2：

对不起，我不够清楚，FormB调用`FormA::populateList()`，我将控制台输出放在函数中以确认这一点，它成功地将项目添加到数据集中但不会刷新列表。它就像它*知道*这是一个不会让它刷新的外部形式。

我还公开了 populateList，没用

即使在调用之后， Visual Studio 也不会让我打电话`pupulateList()`给我，我必须包含一些东西还是以其他方式传递它？`(mainForm)this.Parent.``myNewForm.ShowDialog(this);`

我通过作品引用formA `myForm`，而不是更新列表..？

编辑3：这也不起作用：

```
((mainForm)this.Parent).populateList(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T22:22:14.913

FormB 必须引用 FormA 的实例。单击插入按钮时，您可以将此引用传递给 FormB：

甲型

```
FormB PWDForm= new FormB();
FormB.ShowDialog(this); 
```

接下来在 FormB 上，您可以像这样访问 FormA：

```
(FormA)this.Parent.populateList(); 
```

# javascript - 在javascript或jquery中随机替换文本块中的子字符串

> ID：12013510
> 
> 赞同：0
> 
> 时间：2012-08-17T21:37:23.840
> 
> 标签：javascript, jquery

我如何使用 javascript 或 jquery 随机替换文本中的字符串？

给定：`<p>foo bar foo baz foo</p>`

我想用 'buz' 随机替换 1 次出现的 'foo'，所以可能的结果是：

```
<p>buz bar foo baz foo</p>
<p>foo bar buz baz foo</p>
<p>foo bar foo baz buz</p> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T22:01:32.473

```
var $element = $('p');
var string = 'foo';
var count = $element.text().match(string, 'g').length;

if(count) {
    var rand = Math.floor((Math.random() * count) + 1);
    $element.text(function(i, text) {
        var matchNumber = 0;
        return text.replace(new RegExp(string, 'g'), function(text) {
            matchNumber++;
            if(matchNumber == rand) {
                return 'buz';
            }
            return text;
        });
    });
} 
```

**解释**：
首先我们要知道的范围`random`。我们可以得到它与字符串匹配，然后得到`length`.

然后你必须再次匹配它并增加一个计数器，用于知道哪个匹配是当前匹配。

如果当前匹配等于随机数，我们必须替换文本。

[**演示**](http://jsfiddle.net/ricardolohmann/yK6JM/)

# sql-server - 存储过程和 Linq to sql

> ID：12013513
> 
> 赞同：0
> 
> 时间：2012-08-17T21:37:34.920
> 
> 标签：sql-server, linq-to-sql, stored-procedures, iqueryable

如果我编写一个存储过程并使用 Linq-to-SQL 调用它并在结果集上执行（或者更确切地说是编写）几个查询，它将如何执行？存储过程会先执行，然后再对存储过程的结果执行组合查询吗？

感谢您的任何指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T21:40:50.080

你说的是对的。存储过程将执行，返回一个结果集（`IEnumerable`我认为），然后您的其他查询将针对结果集执行。

注意：L2S 在正确获取存储过程结果集的类型时经常遇到问题。通常它会创建一个对没有结果集的存储过程的引用（返回类型为 void）。而且似乎无法预测。因此，我已经停止查询存储过程和查询用户定义的函数。我从来没有遇到过UDF的这种问题。

# javascript - IE 在 JavaScript 中对“self = this”抛出异常？

> ID：12013514
> 
> 赞同：7
> 
> 时间：2012-08-17T21:37:57.017
> 
> 标签：javascript, internet-explorer, this

我有一些面向对象的 JS 在 Firefox 中运行良好，但在 IE 8 中运行良好（尽管我们需要支持 IE 9）。

当我这样做时：“self = this;” IE 将其标记为错误。我试图将其设置为 self 然后在 jquery 回调中使用它来调用
我的 JS 对象中的其他方法。

```
this.upd_params = function () {
   $("#add-parameter-modal").modal('hide');

   var param_form = $('#add_param_form');
   self = this;
   this.added_params = [];
   this.removed_params = [];

   $('.unused_parameter').each(function (index, obj) {
     if (obj.checked) {
       id = self.get_idnum(obj.id);
       self.add_param2list(id);
     }
   });

   $('.used_parameter').each(function (index, obj) {
     if (!obj.checked) {
       id = self.get_idnum(obj.id);
       self.remove_param(id);
     }
   });

   this.upd_html();

   cfg_form_changed = true;

}; 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-17T21:40:16.133

确保`self`是一个局部范围的（不是全局的）变量。

```
var self = this; 
```

否则，不允许`self`引用和赋值。[`window.self`](https://developer.mozilla.org/en-US/docs/DOM/window.self)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-24T13:12:42.767

好的，我发布这个是因为我相信它相关并且对其他人有用，如果您进行内联变量分配，如下面的代码：

```
var var1 = value1,
    var2 = value2,
    self= this; 
```

它会在 IE 上抛出一个异常，说 Not Implemented。

您可以通过更改为以下内容来修复它：

```
var var1 = value1,
    var2 = value2;

var self= this; 
```

# movabletype - 如何在 Movable Type 中设置默认类别

> ID：12013519
> 
> 赞同：2
> 
> 时间：2012-08-17T21:38:26.120
> 
> 标签：movabletype

有没有办法为 Movable Type 中的每个条目设置默认类别。我正在使用 Movable Type 5.12 版

我找不到任何方法。有什么方法或插件可以做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T00:54:59.467

我认为您应该尝试[Dan Wolfgang的](http://danandsherree.com/)[Default Categories](https://github.com/danwolfgang/mt-plugin-default-category)插件，看看它是否满足您的需求。

我们从未为客户实施过它，但 Dan 是一位拥有良好记录的成熟开发人员。我最近没有听说插件有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T20:56:17.597

我已经在可移动类型 v4.x 和 v5.x 上使用了 Dan 的“默认类别”插件，用于一些需要将特定类别作为默认设置的媒体客户，我可以确认该插件对 v4.x 都非常有效和 v5.x。

# javascript - 格式化 JSON 日期

> ID：12013525
> 
> 赞同：1
> 
> 时间：2012-08-17T21:40:24.567
> 
> 标签：javascript, jquery, asp.net-mvc, json

我的应用程序从 JSON 中获取以下格式的日期时间值：

```
Created
"/Date(1335232596000)/" 
```

为了在前端显示值，我写了一个js函数，代码如下：

```
 return new Date(parseInt(date.substr(6))); 
```

然而，这显示了以下内容：

```
Mon Apr 23 2012 20:56:36 GMT-0500 (Central Daylight Time) 
```

关于如何让日期显示如下的任何建议：

```
"04/23/2012 - 08:56:26pm CST" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T21:49:49.540

您需要使用日期对象方法格式化您的日期：[https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)

或者使用一些外部库，比如[Datejs](http://www.datejs.com/)。

这是一个关于此的问题：[在哪里可以找到有关在 JavaScript 中格式化日期的文档？](https://stackoverflow.com/questions/1056728/formatting-a-date-in-javascript)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T21:50:02.207

`Date`是一个 Javascript 对象。您可以使用日期对象方法来格式化它[http://www.w3schools.com/jsref/jsref_obj_date.asp](http://www.w3schools.com/jsref/jsref_obj_date.asp)

```
var mydate = new Date()
var hours = mydate.getHours() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T22:47:37.693

使用官方的[jQuery Globalization Plugin 格式方法](https://github.com/jquery/globalize/blob/master/README.md#format)：

```
Globalize.format( new Date(1955,10,5), "yyyy/MM/dd" );
// "1955/11/05"
Globalize.format( new Date(1955,10,5), "dddd MMMM d, yyyy" );
// "Saturday November 5, 1955" 
```

有大量可用的[日期格式选项](https://github.com/jquery/globalize/blob/master/README.md#dates)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T22:27:14.687

> 我的应用程序从 JSON 中获取以下格式的日期时间值：
> 
> 创建“/日期（1335232596000）/”

不要在视图模型上使用通过使用上述格式进行`DateTime`序列化的属性，而是使用字符串属性并在服务器上进行格式化 => 使用真实的视图模型。`JavaScriptSerializer`

这是您可以格式化此 DateTime 的方法

```
DateTime date = ...
string created = date.ToString("MM/dd/yyyy hh:mm:sstt ") + GetTimeZoneName(date);
// pass the created string to the view 
```

where`TimeZoneName`定义如下：

```
public static string GetTimeZoneName(DateTime date)
{
    var name = TimeZone.CurrentTimeZone.IsDaylightSavingTime(date)
        ? TimeZone.CurrentTimeZone.DaylightName
        : TimeZone.CurrentTimeZone.StandardName;

    var newName = "";
    var parts = name.Split(' ');
    foreach (var s in parts)
    {
        if (s.Length >= 1)
        {
            newName += s.Substring(0, 1);
        }
    }
    return newName;
} 
```

现在在您的视图中，您将收到格式化的日期，因为它必须被格式化。如果由于某种原因您还需要`Date`在视图中以 javascript 对象的形式显示此日期，您还可以将 DateTime 属性保留在视图模型上，并且序列化程序将同时包含这两者。

# html - 排队 tags vs. inline css properties

[问问题](https://stackoverflow.com/questions/ask)问问题 2012-08-17T21:40:58.287356347 次This question shows research effort; it is useful and clear82This question does not show any research effort; it is unclear or not usefulBookmark this question.Show activity on this post.

What is the preferred method for setting CSS properties?

Inline style properties:

```
<div style="width:20px;height:20px;background-color:#ffcc00;"></div> 
```

Style properties in `<style>...</style>` tags:

```
<style>.gold{width:20px;height:20px;background-color:#ffcc00;}</style><div class="gold"></div> 
```

[html](/tags/html "show questions tagged 'html'")[css](/tags/css "show questions tagged 'css'")4

## 9 回答 9

This answer is useful95

Style rules can be attached using:

*   External Files
*   In-page Style Tags
*   Inline Style Attribute

Generally, I prefer to use linked style sheets because they:

*   can be cached by browsers for performance; and
*   are a lot easier to maintain for a development perspective.

However, your question is asking specifically about the `style` tag versus inline styles. Prefer to use the `style` tag, in this case, because it:

*   provides a clear separation of markup from styling;
*   produces cleaner HTML markup; and
*   is more efficient with selectors to apply rules to multiple elements on a page improving management as well as making your page size smaller.

Inline elements only affect their respective element.

An important difference between the `style` tag and the inline attribute is specificity. Specificity determines when one style overrides another. Generally, inline styles have a higher specificity.

Read [CSS: Specificity Wars](http://www.stuffandnonsense.co.uk/archives/css_specificity_wars.html) for an entertaining look at this subject.

I hope that helps!

于 2012-08-17T21:44:57.077 回答This answer is useful21

Here's one aspect that could rule the difference:

If you change an element's style in JavaScript, you are affecting the inline style. If there's already a style there, you overwrite it permanently. But, if the style were defined in an external sheet or in a `<style>` tag, then setting the inline one to `""` restores the style from that source.

于 2012-08-17T21:50:52.367 回答This answer is useful10

It depends.

The main point is to avoid repeated code.

If the same code need to be re-used 2 times or more, and should be in sync when change, use external style sheet.

If you only use it once, I think inline is ok.

于 2013-08-30T10:05:49.413 回答This answer is useful8

To answer your direct question: neither of these is the preferred method. Use a separate file.

Inline styles should only be used as a last resort, or set by Javascript code. Inline styles have the highest level of specificity, so override your actual stylesheets. This can make them hard to control (you should avoid `!important` as well for the same reason).

An embedded `<style>` block is not recommended, because you lose the browser's ability to cache the stylesheet across multiple pages on your site.

So in short, wherever possible, you should put your styles into a separate CSS file.

于 2012-08-17T21:55:26.780 回答This answer is useful4

From a maintainability standpoint, it's much simpler to manage one item in one file, than it is to manage multiple items in possibly multiple files.

Separating your styling will help make your life much easier, especially when job duties are distributed amongst different individuals. Reusability and portability will save you plenty of time down the road.

When using an inline style, that will override any external properties that are set.

于 2012-08-17T21:45:35.677 回答This answer is useful3

I agree with the majority view that external stylesheets are the prefered method.

However, here are some practical exceptions:

*   Dynamic background images. CSS stylesheets are static files so you need to use an inline style to add a dynamic (from a database, CMS etc...) `background-image` style.

*   If an element needs to be hidden when the page loads, using an external stylesheet for this is not practical, since there will always be some delay before the stylesheet is processed and the element will be visible until that happens. `style="display: none;"` is the best way to achieve this.

*   If an application is going to give the user fine control over a particular CSS value, e.g. text color, then it may be necessary to add this to inline `style` elements or in-page `<style></style>` blocks. E.g. `style="color:#{{ page.color }}"`, or `<style> p.themed { color: #{{ page.color }}; }</style>`

于 2016-05-06T01:12:37.030 回答This answer is useful0

Whenever is possible is preferable to use class `.myclass{}` and identifier `#myclass{}`, so use a dedicated *css* file or tag `<style></style>` within an *html*. Inline style is good to change css option dynamically with javascript.

于 2012-08-17T21:51:48.993 回答This answer is useful0

There can be different reasons for choosing one way over the other.

*   If you need to specify css to elements that are generated programmatically (for example modifying css for images of different sizes), it can be more maintainable to use inline css.
*   If some css is valid only for the current page, you should rather use the script tag than a separate .css file. It is good if the browser doesn't have to do too many http requests.

Otherwise, as stated, it is better to use a separate css file.

于 2012-08-17T22:03:38.140 回答This answer is useful0

You can set CSS using three different ways as mentioned below :-

```
1.External style sheet
2.Internal style sheet
3.Inline style 
```

Preferred / ideal way of setting the css style is using as external style sheets when the style is applied to many pages. With an external style sheet, you can change the look of an entire Web site by changing one file.

sample usage can be :-

```
<head>
 <link rel="stylesheet" type="text/css" href="your_css_file_name.css">
</head> 
```

If you want to apply a unique style to a single document then you can use Internal style sheet.

Don't use inline style sheet,as it mixes content with presentation and looses many advantages.

于 2013-07-27T14:32:48.250 回答

#### Related

[1](/questions/16413284 "Question score (upvotes - downvotes)")[c# - 基于文档角色隐藏区域的宏条件](/questions/16413284)[1](/questions/16413286 "Question score (upvotes - downvotes)")[c# - 使用派生 WCF 代理类中的方法（生成 VS 2010）会产生错误](/questions/16413286)[2](/questions/16413292 "Question score (upvotes - downvotes)")[erlang - Gproc如何获取已注册进程的进程ID？](/questions/16413292)[2](/questions/16413295 "Question score (upvotes - downvotes)")[jquery - 添加图像动态创建的 div 以显示文本](/questions/16413295)[2](/questions/16413297 "Question score (upvotes - downvotes)")[paypal - 多商店的最佳解决方案是什么？](/questions/16413297)[1](/questions/16413298 "Question score (upvotes - downvotes)")[android - 在单个查询中更新多个条目。安卓 SQLite](/questions/16413298)[1](/questions/16413299 "Question score (upvotes - downvotes)")[python - 一般来说，一个对象需要具备什么才能成为迭代器？](/questions/16413299)[1](/questions/16413301 "Question score (upvotes - downvotes)")[php - PHP PDO - MySQL INSERT 与 WHERE](/questions/16413301)[4](/questions/16413302 "Question score (upvotes - downvotes)")[jquery - 固定图像的位置](/questions/16413302)[0](/questions/16413306 "Question score (upvotes - downvotes)")[android - 如何在 facebook 自定义打开图表故事中包含用户消息？](/questions/16413306)

#### Reference

[php](https://php.github.net.cn) × 1429865[c/c++](https://c-cpp.com) × 756500[nginx](https://nginx.github.net.cn) × 49975[mongodb](https://mongodb.net.cn) × 159057[mybatis](https://mybatis.net.cn) × 3233[anaconda](https://anaconda.org.cn) × 13410[pycharm](https://pycharm.net.cn) × 14671[python](https://python.github.net.cn) × 1902243[vscode](https://vscode.github.net.cn) × 56040[docker](https://dockerdocs.cn) × 110988[github](https://github.net.cn) × 49000[flask](https://flask.github.net.cn) × 49129[ffmpeg](https://ffmpeg.github.net.cn) × 24037[jmeter](https://jmeter.net) × 16910[matplotlib](https://matplotlib.net) × 63493[bootstrap](https://getbootstrap.net) × 54641[](https://stackoverflow.com)

##### [Stack Overflow 中文网](https://stackoverflow.org.cn)

遵从 CC BY-SA 知识共享许可协议。

> ID：12013532
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# c# - Stretch="uniform" 在 Silverlight MediaElement 上的行为不符合预期

> ID：12013535
> 
> 赞同：3
> 
> 时间：2012-08-17T21:41:23.670
> 
> 标签：c#, silverlight, mediaelement

我正在使用以下 XAML 通过 Silverlight 媒体元素显示流式视频：

```
<UserControl x:Class="slplayer.MainPage"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
  Padding="0">
        <!-- source is set to a custom MediaStreamSource in code behind -->
        <MediaElement Name="mediaElement" HorizontalAlignment="Stretch"
               VerticalAlignment="Stretch" Margin="0" Stretch="Uniform" />
</UserControl> 
```

并且期望视频应该播放并且应该根据播放窗口的大小消耗所有可用的水平空间或所有可用的垂直空间并缩放非约束尺寸以保持视频的纵横比。

在垂直尺寸受到限制的情况下，这正是发生的情况，但是（正如您在下面的屏幕截图中看到的那样）当水平尺寸受到限制时，两侧都会留下大量空间并且垂直尺寸被缩放到这个较窄的宽度。

我的问题是为什么视频没有占用所有水平空间？

我尝试过的事情：

*   简化布局（这就是我得到上述 XAML 的方式）
*   在 Web 浏览器和 SilverlightViewportElement 中托管控件
*   修改 mp4 文件和视频轨道的尺寸
*   在 WMP 中播放 mp4 文件（正确缩放）
*   在使用的 html、body、div 和 object 上设置 css 样式

问题说明：

![说明的问题](../Images/e59693f499604cd994a387f3d16e4407.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:38:11.633

将您的 MediaElement 放入 Grid 并删除所有 Alignment Stretch 设置以及 Padding 和 Margin 。仅将 Stretch 设置为 MediaElement 的统一。

PS：检查您的 aspx div 是否有 Silverlight 对象。它的 Width 和 Height 可能设置了错误的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:02:38.943

试着把你`MediaElement`放在一个网格里。

# c# - 上传 xls 文件到网络服务器

> ID：12013540
> 
> 赞同：0
> 
> 时间：2012-08-17T21:41:41.517
> 
> 标签：c#, asp.net, excel

我正在尝试将 excel 文件上传到 Web 服务器，然后打开它以将表格读取到列表框，然后选择列表框并重新打开 excel 文件以将数据绑定到网格视图。

```
 //upload file to web server - this works fine
    protected void getFile()
    {
        string importPL = string.Empty;

        if (FileUpload1.HasFile)
        {
            string fileName = Server.HtmlEncode(FileUpload1.FileName); 
            string extension = System.IO.Path.GetExtension(fileName); 

            if (StaticHelpers.getApplicationEnvironment() == "D")
            {
                //dev
                importPL = System.Configuration.ConfigurationManager.AppSettings["devPL"];
            }
            else if (StaticHelpers.getApplicationEnvironment() == "T")
            {
                //test
                importPL = System.Configuration.ConfigurationManager.AppSettings["devPL"];
            }
            else
            {
                //prod
                importPL = System.Configuration.ConfigurationManager.AppSettings["prodPL"];
            }

            if ((extension == ".xls" || extension == ".xlsx"))
            {
                FileInfo fileInfo = new FileInfo(FileUpload1.PostedFile.FileName); 
                fileName = fileInfo.Name;
                string excelFilePath = importPL; 

                FileUpload1.SaveAs(excelFilePath + fileName);

                SpreadSheet = FileUpload1.PostedFile.FileName;   
                SpreadSheet = excelFilePath + fileName;

                lblss.Text = SpreadSheet; 
                lblSpreadSheet.Text = "SpreadSheet: " + SpreadSheet.ToString(); 

                if (SpreadSheet.Trim() != string.Empty)
                {
                    try
                    {
                        ArrayList strTables = GetTableExcel(SpreadSheet);//get list of worksheets then bind to listbox
                        lstbxWorksheets.DataSource = strTables;
                        lstbxWorksheets.DataBind();
                    }
                    catch (Exception ex)
                    {
                        lblMessage.Text = ex.Message.ToString();
                    }
                }
            }
        }
    }

    //get list of worksheets I believe this is where I'm having most of my problems
    public static ArrayList GetTableExcel(string strFileName)
    {
        ArrayList strTables = new ArrayList();
        Catalog oCatlog = new Catalog();
        ADOX.Table oTable = new ADOX.Table();
        ADODB.Connection oConn = new ADODB.Connection();
        string connectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + strFileName + ";Extended Properties='Excel 12.0;HDR=YES';";
        try
        {
            oConn.Open(connectionString);
            oCatlog.ActiveConnection = oConn;
            if (oCatlog.Tables.Count > 0)
            {
                int item = 0;
                foreach (ADOX.Table tab in oCatlog.Tables)
                {
                    if (tab.Type == "TABLE")
                    {
                        strTables.Add(tab.Name);
                        item++;
                    }
                }
            }
    oConn.Close();
        }
        catch (Exception ex)
        {
            //
        }
        return strTables;
    }

    //select the worksheet from the list box
    protected void lstbxWorksheets_SelectedIndexChanged(object sender, EventArgs e)
    {
            WorkSheet = lstbxWorksheets.SelectedItem.ToString();
            lblWorkSheet.Text = "Worksheet: " + WorkSheet;

            SpreadSheet = lblss.Text;
            tableName = WorkSheet;

            if (tableName != string.Empty)
            {
                SelectedTable = tableName;
            }
            else
            {
                lblMessage.Text = "Select a worksheet.";
            }

            if ((SelectedTable != string.Empty) && (SelectedTable != null))
            {
                DataTable dt = GetDataTableExcel(SpreadSheet, SelectedTable);

                gvData.DataSource = dt.DefaultView;
                gvData.DataBind();
                WorkSheet = SelectedTable.ToString();
            }
    }

    //get data from workbook and bind to gridview
    public static DataTable GetDataTableExcel(string strFileName, string Table)
    {
        string connectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + strFileName + ";Extended Properties='Excel 12.0;HDR=YES';";
        System.Data.OleDb.OleDbConnection conn = new System.Data.OleDb.OleDbConnection(connectionString);

        conn.Open();
        string strQuery = "SELECT * FROM [" + Table + "]";
        System.Data.OleDb.OleDbDataAdapter adapter = new System.Data.OleDb.OleDbDataAdapter(strQuery, conn);
        System.Data.DataSet ds = new System.Data.DataSet();
        adapter.Fill(ds);
    conn.Close();
        return ds.Tables[0];
    } 
```

我什至将它添加到 web.config 中：

```
<location path="pl">
  <system.web>
   <authorization>
    <allow users="*" />
   </authorization>
  </system.web>
</location> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T21:49:57.300

抱歉，在 aspnet 中，请参阅此项目中的喷气发动机 [http://www.codeproject.com/Articles/8096/C-Retrieve-Excel-Workbook-Sheet-Names](http://www.codeproject.com/Articles/8096/C-Retrieve-Excel-Workbook-Sheet-Names)

# .htaccess - 使用 mod_rewrite 为客户端重定向 URL 并为服务器重写

> ID：12013541
> 
> 赞同：0
> 
> 时间：2012-08-17T21:41:55.253
> 
> 标签：.htaccess, mod-rewrite, redirect, url-rewriting

我有以下问题已经解决了几十次，但我没有找到任何解决方案。

我正在写一个博客引擎，希望有漂亮的 URL，所以我在其中使用`mod_rewrite`Apache `.htaccess`。像这样的东西`/page/3 => /?s=3`工作得很好，因为我可以在 PHP 脚本中编写漂亮的 URL。但是我有一个用于提交搜索的表单字段`method="get"`，所以除了将客户端指向丑陋的 URL 之外，我别无选择。所以我想要的是一种`Redirect`客户端，然后`Rewrite`是服务器的 URL `/?q=foo =client=> /search/foo =server=> /?q=foo`：。（也`/?q=foo&s=2`=> `/search/2/foo`）

不知怎的，我的规则不起作用，我希望你能帮助我。

```
RewriteRule ^(index\.php)?\?q=(.*)$ search/$2 [R,L]
RewriteRule ^(index\.php)?\?q=(.*)&s=(.*)$ search/$3/$2 [R,L]

RewriteRule ^search/(\d+)/(.*)/?$ index.php?q=$2&s=$1 [NC,L]
RewriteRule ^search/([^/]*)/?$ index.php?q=$1 [NC,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T00:35:45.510

仅当实际请求是针对丑陋的 URL 时才需要重定向，您无法匹配 URI，因为它会循环：请求丑陋的 URL，重定向到友好的 URL，请求友好的 URL，内部重写为丑陋的 URI，重定向到友好的 URL 等

所以试试这个，而不是你的油炸两条规则：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /(index.php)?\?q=([^&]+)&s=([^\ ]+)
RewriteRule ^ /search/%3/%2/? [L,R=301]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /(index.php)?\?q=([^\ &]+)
RewriteRule ^ /search/%2/? [L,R=301] 
```

# ssis - 在 SSIS 中将参数传递给 WinSCP 脚本

> ID：12013542
> 
> 赞同：2
> 
> 时间：2012-08-17T21:41:58.967
> 
> 标签：ssis, arguments, winscp

我需要解释如何在 SSIS 执行过程任务中将参数传递给 WinSCP。

我想每天使用 SFTP 下载最新文件。

我能够在 SSIS 中使用 WinSCP 连接到远程服务器。

FTP 任务步骤：
[http ://winscp.net/eng/docs/guide_ssis](http://winscp.net/eng/docs/guide_ssis)

我按照以下步骤操作：
[http ://winscp.net/eng/docs/scripting](http://winscp.net/eng/docs/scripting)

我的问题是：
我想将参数传递给我的 WinSCP 脚本。

我的脚本有 command `get "%1%"`。

完整脚本：

```
option batch abort
option confirm off
open sftp://usename:password@ftp.dummy.com
option transfer binary
cd /root
get "%1%" C:\Data\
close
exit 
```

在我的执行流程任务编辑器上，我传递`*20120817*.xml`如下参数，但它不起作用：

```
/script=scriptB.txt \*20120817\*.xml 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T14:12:05.603

您缺少`/parameter`开关：

```
/script=scriptB.txt /parameter *20120817*.xml 
```

参考：
[https ://winscp.net/eng/docs/commandline#scripting](https://winscp.net/eng/docs/commandline#scripting)

# sql-server - ORDER BY 列表中的 SqlCeException-Expressions 不能包含聚合函数

> ID：12013544
> 
> 赞同：2
> 
> 时间：2012-08-17T21:42:28.537
> 
> 标签：sql-server, linq, nhibernate

我有以下代码计算按车辆类型分组的车辆。

```
using (var uow = new UnitOfWork(new NHibernateHelper().SessionFactory)) {
    var repo = new Repository<Vehicle>(uow.Session);
    var vtSummary= repo.ListAll()
                .GroupBy(v => v.VehicleType.Name)
                .Select(v => new NameCount { 
                         EntityDescription = v.First().VehicleType.Name,
                         QtyCount = v.Count() })
                .OrderByDescending(v => v.QtyCount).ToList();
     uow.Commit();
     return vtSummary;
} 
```

以上产生以下sql代码：

```
SELECT VehicleType.Name as col_0_0_,
   CAST(COUNT(*) AS INT) as col_1_0_
FROM Vehicle vehicle0_
LEFT OUTER JOIN VehicleType vehicletype1_
  ON vehicle0_.VehicleTypeId= VehicleType.Id
GROUP  BY VehicleType.Name
ORDER  BY CAST(COUNT(*) AS INT) DESC 
```

SQL 代码在 MS SQL Server 下运行良好，但在 SQl CE 下测试会产生以下错误：

```
System.Data.SqlServerCe.SqlCeException : Expressions in the ORDER BY list cannot contain aggregate functions. 
```

[Sql server CE 中 Sub 查询](http://social.msdn.microsoft.com/Forums/en-US/sqlce/thread/2ac2cd28-1609-40bc-9628-6f747916e96f)的解决方案是为列指定别名并在 order by 子句中使用别名。

有什么方法可以在我用来使其运行而不会引发错误的 LINQ 表达式中提供别名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T00:45:22.270

您可以使用 LINQ to 对象在内存中执行 OrderBy：

```
var vtSummary= repo.ListAll()
            .GroupBy(v => v.VehicleType.Name)
            .Select(v => new NameCount { 
                     EntityDescription = v.First().VehicleType.Name,
                     QtyCount = v.Count() })
            .AsEnumerable() //SQL executes at this point
            .OrderByDescending(v => v.QtyCount).ToList(); 
```

# git - 对设置远程 git 存储库感到困惑

> ID：12013547
> 
> 赞同：1
> 
> 时间：2012-08-17T21:42:40.820
> 
> 标签：git, version-control

我想使用 git 作为我的项目工作的源代码控制系统。我已经阅读了许多在线教程，包括 git 网站本身，但我仍然对如何继续感到困惑。

如果我的代码包含在主目录中，并且我编写的每个项目都在其自己的子目录中创建，我该如何继续设置 git 存储库？我应该在自己的目录中为**每个**项目创建一个单独的存储库，还是可以在主父目录中创建一个？`git init`必须在每个项目目录中运行是否正常？如果是这种情况，我是否还必须在远程服务器上也有多个存储库，我也想在其上安装 git？

我读过的教程让我非常清楚如何将 git 用于单个项目，但我对如何为我的所有项目创建远程存储库感到困惑。任何有用的解释都会非常有帮助，因为在阅读了 3 个在线教程后我仍然不清楚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T21:44:53.597

是的，通常您为每个项目创建一个存储库，而不是尝试将*所有*项目收集到一个存储库中。

与其他一些源代码控制系统（例如 Subversion）不同，在 Git 中克隆存储库会获取*整个*存储库。因此，将存储库限制为一个项目可以避免在您只需要一个项目时克隆太多东西。（还有很多其他原因，为什么每个存储库一个项目也是首选。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T21:48:39.453

根据@Greg 的回答，在每个 repo 中有单独的项目有很多原因，但是如果您的项目都是直接链接的 [1] ，您还可以创建一个 repo 并将每个项目作为 git repo 中的文件夹处理。

[1]（或不这样做，尽管现在这样做的理由较弱（单对多））

# c# - 在贸易通的 C# DLL 中使用 RDotNet 调用 R

> ID：12013556
> 
> 赞同：0
> 
> 时间：2012-08-17T21:43:27.490
> 
> 标签：c#, r, dll

我正在使用在此处找到的 R.NET dll： [http](http://rdotnet.codeplex.com/) ://rdotnet.codeplex.com/ 我正在尝试从为 Tradelink 指定的自定义 C# DLL (http://code.google.com/p/) 中运行示例代码贸易通）这是代码。

```
 using System;
   using System.IO;
   using System.Linq;
   using RDotNet;
   using TradeLink.Common;
   using TradeLink.API;
   using Microsoft.Win32;

namespace Responses
{
    class RTLTest : ResponseTemplate
    {

        ////static void Main(string[] args)
        public override void GotTick(TradeLink.API.Tick k)
        {
             //Set the folder in which R.dll locates.
            REngine.SetDllDirectory(@"C:\Program Files\R\R-2.12.0\bin\i386");

            REngine.SetDllDirectory(GetRPath());
            REngine.SetDllDirectory(@"C:\Program Files\R\R-2.14.1\bin\i386");

            using (REngine engine = REngine.CreateInstance("RDotNet", new[] { "-q" }))  // quiet mode
            {
                // .NET Framework array to R vector.
                NumericVector group1 = engine.CreateNumericVector(new double[] { 30.02, 29.99, 30.11, 29.97, 30.01, 29.99 });
                engine.SetSymbol("group1", group1);
                // Direct parsing from R script.
                NumericVector group2 = engine.EagerEvaluate("group2 <- c(29.89, 29.93, 29.72, 29.98, 30.02, 29.98)").AsNumeric();

                // Test difference of mean and get the P-value.
                GenericVector testResult = engine.EagerEvaluate("t.test(group1, group2)").AsList();
                double p = testResult["p.value"].AsNumeric().First();

                string s1 = String.Format("Group1: [{0}]", string.Join(", ", group1));
                string s2 = String.Format("Group2: [{0}]", string.Join(", ", group2));
                string s3 = String.Format("P-value = {0:0.000}", p);

                senddebug(s1);
                senddebug(s2);
                senddebug(s3);
            }
        }
} 
```

但我得到一个错误：

响应引发异常：无法加载文件或程序集“R.NET，版本=1.4.0.0，文化=中性，PublicKeyToken=null”或其依赖项之一。试图加载格式不正确的程序。

任何人都可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:19:42.997

if your ASP.NET application is 64 bit, then this might be useful [http://blogs.msdn.com/b/rakkimk/archive/2007/11/03/iis7-running-32-bit-and-64-bit-asp-net-versions-at-the-same-time-on-different-worker-processes.aspx](http://blogs.msdn.com/b/rakkimk/archive/2007/11/03/iis7-running-32-bit-and-64-bit-asp-net-versions-at-the-same-time-on-different-worker-processes.aspx). Most R packages dlls (except base package) are 32 bit, so it may be a source of the problem.

# wpf - 当 DataGridTextColumn 之一是列表时绑定到数据网格

> ID：12013559
> 
> 赞同：0
> 
> 时间：2012-08-17T21:43:31.823
> 
> 标签：wpf, datagrid, bind

我的项目中有数据网格，我像这样绑定我的属性集合：

```
<DataGrid 
    Grid.Row="1"
    ItemsSource="{Binding Attributes}" 
    AutoGenerateColumns="False"
    Margin="5"
    >
    <DataGrid.Columns>
        <DataGridTextColumn Width="3*" Header="Name" IsReadOnly="True" Binding="{Binding name}" />
        <DataGridTextColumn Width="3*" Header="Field" Binding="{Binding field}" />
        <DataGridTextColumn Width="3*" Header="Type" Binding="{Binding type}" />
        <DataGridTextColumn Width="3*" Header="Value" Binding="{Binding value}" /> 
```

问题是名称、字段和类型是字符串，值是列表。如何以这种方式将其绑定到 Datagrid：

```
Name     Field     Type    Value
-----   -------   ------   -----
name1   xField1   xType1     1
name1   xField1   xType1     2
name1   xField1   xType1     3
name1   xField1   xType1     4
name1   xField2   xType2     5
name2   xField2   xType2     20
name2   xField2   xType2     30
name2   xField2   xType2     40
name3   xField3   xType3     100 
```

ItemsSource="{Binding Attributes}" 在我的例子中，Attributes 是一个包含 3 个值（name1、name2、name3）的列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T00:05:19.090

假设像你说的值是一个 List()。如果是这样，您可能会尝试制作 DataGridTemplateColumn 而不是 DataGridTextColumn 并制作一个包含列表或列表视图的数据模板，然后每行将有一个列表框/列表视图，显示适用于该行的所有值。如果您只想显示 value 的计数，那么您将所有内容保持原样并绑定 Value.Count 。希望这有所帮助 ：）

# android - Android 开启 WiFi 调试后找不到附属设备

> ID：12013562
> 
> 赞同：2
> 
> 时间：2012-08-17T21:43:48.110
> 
> 标签：android, debugging, adk, accessory

我正在使用 Galaxy Nexus 手机和官方[Arduino ADK](http://arduino.cc/en/Main/ArduinoBoardADK)板开发 Android 配件。我正在使用[此处](http://developer.android.com/tools/adk/adk.html)提供的所有标准 Arduino 库。我希望能够在运行时调试我的 Android 代码，因此我按照 Google 在其“[调试注意事项](http://developer.android.com/guide/topics/connectivity/usb/index.html)”文档中的说明进行操作，以便通过 WiFi 进行远程调试。

当我通过 USB 连接到手机时，我可以很好地调试（当然它不是在与 Arduino 板通话）。当我通过 WiFi 连接到手机时，我可以很好地调试。但是，当我将电路板插入手机时，它不再自动启动我的应用程序（已在 ADK 设备中注册）。因此，我手动启动了我的应用程序，但它找不到 Arduino 配件。如果我切换回 USB 调试并将 ADK 板重新连接到手机，它会像往常一样自动启动，一切都很好，但是我又回到了无法调试的状态。

在所有这些过程中，代码都没有变化。我所做的只是改变 adb 工具到达手机的方式。任何猜测为什么手机和我的应用程序不能再看到 ADK 板？

简而言之：

1.  如果手机设置为通过 USB 调试，它可以毫无问题地与 Arduino ADK 通信。
2.  如果我调用“adb tcpip 5555 < enter> adb connect < device-ip-address>:5555”，我可以毫无问题地远程调试手机。
3.  如果我现在用 USB 线将 ADK 板连接到手机，手机找不到 ADK 板，但我仍然可以通过 WiFi 进行远程调试。这就是我知道无法找到附件的方式。

编辑：手机运行的是 Android 4.1.1，而 Arduino 是 1.0.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:02:02.063

刚刚遇到这个问题，已经回到 USB 附件工作。是的，有一个问题，我不知道如何解决这个问题，因为更高版本的 Android 根本不允许您同时通过 wifi 和 USB 附件运行 adb。我的解决方案，你可能自己已经到了那里是根我的手机，幸运的是 Nexus S，并将其上的 Android 降级到 2.3.6

这不是一个很好的解决方案，但要调试 USB 附件，我必须启动到 2.3.6。希望将来这可能会再次起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T13:14:16.843

只能在**Nexus**设备上通过 wifi 调试 USB 附件。我尝试了许多其他（三星，摩托罗拉），当在设置中启用 USB 调试时，它们没有检测到配件。还尝试了硬件 USB 切换器 - 没有帮助。

# android - UPDATE 发生时 SQL 时间戳不会改变

> ID：12013563
> 
> 赞同：3
> 
> 时间：2012-08-17T21:43:54.060
> 
> 标签：android, sqlite, timestamp, sql-update, android-contentprovider

我使用以下 SQL 命令在 Android 客户端上创建*产品表。*

```
CREATE TABLE IF NOT EXISTS 'products' (
  '_id' INTEGER PRIMARY KEY AUTOINCREMENT,
  'name' TEXT,
  'serverId' INTEGER, 
  'modifiedAt' TIMESTAMP DEFAULT CURRENT_TIMESTAMP, 
  UNIQUE ( 'serverId' ) 
ON CONFLICT REPLACE ); 
```

当我从服务器加载数据并将其*插入*本地数据库时，我在内容提供程序中使用以下命令来*更新*行或*插入*新值。

```
public int bulkInsert(Uri uri, ContentValues[] values) {
    final SQLiteDatabase db = mOpenHelper.getWritableDatabase();
    long rowId;
    int rowsAdded = 0;
    for (ContentValues contentValues : values) {
        int affectedRows = db.update("products", contentValues, 
                "serverId = ?", 
                new String[] { contentValues.getAsString("serverId") });
        if (affectedRows == 0) {
            rowId = db.insert("products", null, contentValues);
            if (rowId > 0) {
                rowsAdded++;
            }
        }
    }
    return rowsAdded;
} 
```

当存在新值时，所有列都会更新，除了列*modifiedAt*。
注意：批量命令被包装到一个事务中。我省略了代码以使问题保持​​简单。

**问题：**

每次*更新发生时，如何更新**modifiedAt*列的时间戳？

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T22:52:55.570

您可以通过设置触发器让数据库处理它：

未经测试...

```
database.execSQL("CREATE TRIGGER updateLastModifiedDate " +
     "AFTER INSERT ON products FOR EACH ROW BEGIN " +
     "UPDATE products SET modifiedAt = date('now') " +
     "WHERE _id = NEW.id " +
     "END;");

database.execSQL("CREATE TRIGGER updateLastModifiedDate " +
     "AFTER UPDATE ON products FOR EACH ROW BEGIN " +
     "UPDATE products SET modifiedAt = date('now') " +
     "WHERE _id = NEW.id " +
     "END;"); 
```*

# php - 返回用户信息的最佳实践

> ID：12013569
> 
> 赞同：1
> 
> 时间：2012-08-17T21:44:26.273
> 
> 标签：php

返回用户信息的最佳实践

每次都困扰着我；如何将信息（登录成功，文章更新）返回给用户，尤其是在 OOP 中。（PHP）

*   用多个 catch 和 try 块抛出新异常（在 catch 之后它将停止 catch 块的执行）
*   只是一堆返回值（看起来很糟糕）
*   真假（然后在运行类的脚本中检查真假？）
*   分离类来处理错误消息（扩展异常？）

任何提示将不胜感激！

- 更新/不期待这么多答案！哇！！

例如用户注册；我使用了一个自定义异常类。

```
/*
 * custom exception class
 */
class Message extends Exception
{
    public function __construct($message, $code = true) 
    {       
        parent::__construct($message, $code);
    }

    public function information() 
    {
        return '<div class="check"><img src="/admin/static/images/'.($this->code == true ? 'good' : 'bad').'.gif" alt="check" class="icon" width="20px" height="20px" />' . $this->message . '</div>';
    }
} 
```

在课堂上；

```
 if(is_numeric($id) === false)
    {
        Throw new Message('message', false);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T21:50:08.207

> 用多个 catch 和 try 块抛出新异常（在 catch 之后它将停止 catch 块的执行）

异常可能代价高昂，异常通常表示应用程序本身的问题，例如 cURL 错误，而不是用户犯错或未正确登录那么简单。我会在您的应用程序中保留实际问题的例外情况，并仅向您报告。

> 只是一堆返回值（看起来很糟糕）

取决于您如何处理这些返回值。看看 PHP 框架是如何做到的：

*   代码点火器
*   易
*   CakePHP
*   曾德
*   锂

特别是（这样做的好方法）是 Yii 自己的用户登录处理程序：[http ://www.yiiframework.com/doc/api/1.1/CUserIdentity](http://www.yiiframework.com/doc/api/1.1/CUserIdentity)

您会注意到它们具有基于类的错误代码和消息。

你会发现很多这些框架使用基于模型/控制器的表单模式，这意味着你定义了一组验证规则（即使是登录用户，因为在 Yii 中，验证是基于类的）并且这些验证规则运行填写附加到这些规则的错误消息。最终你有一个像这样的数组：

```
array{
    'username' => 'Username was empty',
    'password' => array(
        // More errors
    )
} 
```

这表示您的所有返回值。它既漂亮又整洁，因为它是每个字段的错误，而且它们也很容易在循环中获取和操作。

对于多次实际登录用户，您将运行以下内容：

```
if($user->authenticate()){
    // redirect to member page
}else{
    return $user->getErrors();
} 
```

这通常会像上面显示的表单一样返回。

> 真假（然后在运行类的脚本中检查真假？）

当涉及到多个错误时，真假非常模糊，例如：-用户登录但他们的帐户可以被删除或禁止。您如何仅通过布尔值来区分？

其他人/框架，如锂（例如）返回每个验证函数的布尔值，然后将其附加到错误消息持有者。

正如许多其他人所说，路径取决于您的特定情况。

# css - 淘汰赛样式绑定顶部和左侧不起作用

> ID：12013571
> 
> 赞同：7
> 
> 时间：2012-08-17T21:44:34.003
> 
> 标签：css, knockout.js

我无法理解为什么这不起作用。这应该是某人的垒球。谢谢！

[http://jsfiddle.net/ZsA4f/2/](http://jsfiddle.net/ZsA4f/2/)

HTML

```
<div data-bind="foreach:Zones">
    <div class="container" data-bind="style:{ top: ZoneY, left: ZoneX }, text: ZoneTest"></div>
</div>​ 
```

CSS

```
.container { position: absolute; font-size: .75em; } 
```

Javascript

```
var viewModel = {
    Zones: ko.observableArray([
        {
            ZoneX: 100,
            ZoneY: 100,
            ZoneTest: "hello world"
        },
        {
            ZoneX: 200,
            ZoneY: 200,
            ZoneTest: "rage!"
        }
])        
};

ko.applyBindings(); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-17T22:12:21.440

您需要指定一个单位。100 和 200 应该分别是`100px`和`200px`

[http://jsfiddle.net/ZsA4f/6/](http://jsfiddle.net/ZsA4f/6/)

# javascript - 谷歌地图 - 数组

> ID：12013578
> 
> 赞同：0
> 
> 时间：2012-08-17T21:45:20.713
> 
> 标签：javascript, arrays, google-maps-api-3

嘿伙计们，我刚刚用谷歌地图开始了一个新项目。我是 javascript 和 google maps API 的新手。

更新：我要做的是为每个具有不同内容的标记添加一个信息窗口。因此，当单击标记时，会弹出该特定标记的内容。

现在只弹出第 4 个元素。我需要让每个标记都弹出信息。

有没有其他方法可以做到这一点？

提前致谢，

更新：

```
 <!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Google Maps JavaScript API v3 Example: Marker Animations Loop</title>
    <link href="https://developers.google.com/maps/documentation/javascript/examples/default.css" rel="stylesheet">
    <script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script>    

     var myLatlng = new google.maps.LatLng(53.014783, -95.097656);

     var iterator = 0;

     var neighborhoods = new Array(
         new Array("test1","49.165206","-122.665443"),
         new Array("test2","49.14476","-121.98544"),
         new Array("test3","49.162063","-122.667675"),
         new Array("test4","48.455005","-123.54155"),
         new Array("test5","51.038156","-114.035339") 
     );

     var markers = [];

     function initialize()
     {        
        var mapOptions = {
           zoom: 4,
           center: myLatlng,
           mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);               

         /*for (var i = 0; i < neighborhoods.length; i++)
         {
             markers[iterator] = new google.maps.Marker(
                 {
                     position: neighborhoods[iterator],
                     map: map,
                     title: 'Hello World!'
                 }
             );        
             iterator++;
         };*/

        var infowindow = new google.maps.InfoWindow({

        });         

        for(var i = 0; i < neighborhoods.length; i++)
        {

            var marker = new google.maps.Marker(
                 {
                     position: new google.maps.LatLng(neighborhoods[i][1], neighborhoods[i][2]),
                     map: map,
                     title: neighborhoods[i][0]
                 }
             );

            var test = neighborhoods[i][0];

            google.maps.event.addListener(marker, 'click', function(e) {
                infowindow.open(map,marker);                
                infowindow.setContent(test);
            });
        } 

     };   

    </script>
  </head>
  <body onload="initialize();">
    <div id="map_canvas" style="width: 1000px; height: 700px;">map div</div>
    <!--button id="drop" onclick="drop()">Drop Markers</button-->
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T21:52:37.127

[这是](http://www.geocodezip.com/v3_MW_example_map1.html)我从 Mike Williams 的 Google Maps API (v2) 教程中移植到 Google Maps API v3 的示例，该教程具有多个带有唯一信息窗口的标记，它使用函数闭包将信息窗口内容与标记相关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T16:41:14.923

最终版本是：

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Google Maps JavaScript API v3 Example: Marker Animations Loop</title>
    <link href="https://developers.google.com/maps/documentation/javascript/examples/default.css" rel="stylesheet">
    <script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script>    

     var myLatlng = new google.maps.LatLng(53.014783, -95.097656);

     var iterator = 0;

     var neighborhoods = new Array(
         new Array("test1","49.165206","-122.665443"),
         new Array("test2","49.14476","-121.98544"),
         new Array("test3","49.162063","-122.667675"),
         new Array("test4","48.455005","-123.54155"),
         new Array("test5","51.038156","-114.035339") 
     );

     var markers = [];

     function initialize()
     {        
        var mapOptions = {
           zoom: 4,
           center: myLatlng,
           mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);               

        infowindow = new google.maps.InfoWindow({

        }); 

        for(var i = 0; i < neighborhoods.length; i++)
        {

            var marker = new google.maps.Marker(
                 {
                     position: new google.maps.LatLng(neighborhoods[i][1], neighborhoods[i][2]),
                     map: map,
                     title: neighborhoods[i][0],
                     html: neighborhoods[i][0],
                     animation: google.maps.Animation.DROP
                 }
             );

            google.maps.event.addListener(marker, 'click', function(e) {
                infowindow.setContent(this.html);
                infowindow.open(map,this);                              
            });
        } 

     };   

    </script>
  </head>
  <body onload="initialize();">
    <div id="map_canvas" style="width: 1000px; height: 700px;">map div</div>    
  </body>
</html> 
```

# ruby-on-rails - rails 将标签封装在文本字段中

> ID：12013579
> 
> 赞同：0
> 
> 时间：2012-08-17T21:45:21.367
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, rubygems, gem

我想知道如何在 ROR 中实现 TAGS 的文本字段？

就像在堆栈溢出中使用的那些，或者在您键入文本的电子邮件中，在您点击空格后它会封装它。

我将不胜感激任何宝石或有关此事的任何信息。

示例1：

![例子](../Images/2bd53f990bd1275940e493ded9ada082.png)

示例2：

![例子](../Images/e73b744728e87d5c532cea3d2b4711ab.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T21:51:26.030

请看一下[选择](http://harvesthq.github.com/chosen/)的。即尝试多选示例。

将`"chzn-select"`类添加到需要标记行为的多选中。

在您的 javascript 中，调用所选的初始化方法，`$(".chzn-select").chosen();`

# android - 手机被阻止：从 adb 激活 Android 上的 Wifi（非 root 手机）

> ID：12013581
> 
> 赞同：1
> 
> 时间：2012-08-17T21:45:33.680
> 
> 标签：android

如何使用 ADB 激活 WiFi。事实上，我的手机在意外重试使用模式解锁后被阻止。电话被阻止并要求我登录我的gmail帐户的问题。

我无法执行此操作，因为 WiFi 已停用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T22:00:56.040

这不会启用 wifi，但您可以禁用锁定屏幕本身

```
KeyguardManager keyguardManager = (KeyguardManager)getSystemService(Activity.KEYGUARD_SERVICE);
KeyguardLock lock = keyguardManager.newKeyguardLock(KEYGUARD_SERVICE);
lock.disableKeyguard(); 
```

添加

```
<uses-permission android:name="android.permission.DISABLE_KEYGUARD"/> 
```

编辑：在 OnCreate 本身中执行此操作。由于 Eclipse 会自动启动应用程序，因此它会运行。以上方法适用于密码锁屏，没有试过忘记密码屏

# ruby - 编辑模型后重新耙？

> ID：12013583
> 
> 赞同：1
> 
> 时间：2012-08-17T21:45:48.123
> 
> 标签：ruby, ruby-on-rails-3, sqlite

我刚刚开始我的第一个 ruby​​ 项目。我按照教程建立了一个博客。我想接下来我会添加一个评论系统来扩展项目，我只是在我的帖子模型中添加了 has_many :comments。在我们构建模型后的教程中，我们搜索了数据库。我不完全确定它的作用，但它似乎相当重要。这是我需要再次做的事情吗？任何时候我更新模型？我正在使用 gem 'sqlite3'

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T21:50:52.313

每次创建新模型（数据库表）时，都必须运行迁移，这会在数据库中创建表。每当您对数据库进行任何更改时，您都必须运行迁移以确保您的数据库与您的最新更改同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T07:26:00.010

每次，您在 Rails 中创建/编辑模型（数据库表），您都应该为此编写迁移。一旦使用“rake db:migrate”命令运行，迁移将对您的数据库进行必要的更改。在您的博客模型中使用 has_many :comments。假设您的博客模型称为“博客”，您将需要添加迁移以创建评论表，并将 blog_id 作为外键。

# java - java的排列/组合库？

> ID：12013584
> 
> 赞同：13
> 
> 时间：2012-08-17T21:45:49.713
> 
> 标签：java, permutation, combinatorics

我正在寻找一个 java 库，它将生成一组所有可能的顺序排列。我能找到的唯一库是[google code 上的combinatoricslib](http://code.google.com/p/combinatoricslib/)。我很难相信这是唯一一个这样做的 java 库，坦率地说，我对此感到非常惊讶。

JDK、apache commons math 或其他库中是否有任何提供相同功能的东西？

我很高兴使用combinatoricslib，我简直不敢相信这是唯一的选择，除了自己编写算法，诚然这并不难，但.isBlankOrNull() 也不是，而且apache commons 也包括了这一点。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-17T21:51:08.313

你检查过[番石榴](https://google.github.io/guava/releases/snapshot-jre/api/docs/index.html)吗？它似乎提供了排列`Collections2`

> **类 Collections2**
> permutations(Collection elements)
> 返回指定 Collection 的所有排列的 Collection。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-02T22:09:57.507

Apache Commons Collection 库版本 4 中有[PermutationIterator](http://commons.apache.org/proper/commons-collections/apidocs/index.html?org/apache/commons/collections4/iterators/PermutationIterator.html)类。它接受一个泛型 Collection 并提供一个迭代器，该迭代器迭代 Collection 中元素的所有排列（对 Iterator 上的 next() 的每次调用都提供一个有序列表）。

我刚刚意识到 Collection 库的第 4 版仅在 2013 年 11 月 27 日发布。版本 3 不提供用于排列的实用程序。V4 *“通过支持 Java 1.5 引入的新语言特性，主要是对泛型的支持，代表了对集合的重大改造。”*

# entity-framework-4.1 - EF4 带 Db 外键的一对多对一

> ID：12013588
> 
> 赞同：0
> 
> 时间：2012-08-17T21:46:05.193
> 
> 标签：entity-framework-4.1, ef-code-first, fluent

我正在尝试首先将代码与现有数据库一起使用。到目前为止一切顺利，但现在我在一对多对一的关系中失败了。

db 中有一个表客户和一个表地址，其中地址没有任何 customerid，而是一个外来的一对多键 FK_Address_Customer。

从 edmx 自动创建的类看起来像

**顾客：**

```
public int CustomerID (PK)
public Address Address 
```

**地址：**

```
public int AddressID (PK)
public HashSet<Customer> Customers 
```

无论我在 fluent API 中做什么，要么因无效列 Address_AddressID 而失败，要么多重性与引用约束错误冲突。

我以为：

```
//Customer has one address, address can have multiple customers<br/>
pModelBuilder.Entity<Customer>().HasRequired(m => m.Address).WithMany(x => x.Customers);

//Address has multiple customers, customer has one address<br/>
pModelBuilder.Entity<Address>().HasMany(m => m.Customers).WithRequired(); 
```

我通过使用 HasForeignKey 在数据库中没有外键的其他表上得到了正确的结果，但在上述情况下它不起作用。我也尝试通过 MapKey 传递外键名称，但也没有运气。

如何让这种简单的关系继续下去？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T08:15:53.193

您必须告诉 EF Customer 表中 FK 的名称，否则它将使用 default `Address_AddressID`。`HasForeignKey`会变魔术。

```
pModelBuilder.Entity<Customer>()
             .HasRequired(c => c.Address)
             .WithMany(a => a.Customers)
             .HasForeignKey(c => c.AddressID); 
```

您的实体`AddressID`中的 FK 属性在哪里。如果您需要使用`Customer`的实体中没有 FK 属性：`Customer``Map`

```
pModelBuilder.Entity<Customer>()
             .HasRequired(c => c.Address)
             .WithMany(a => a.Customers)
             .Map(m => m.MapKey("AddressID")); 
```

`AddressID`表中 FK 列的名称在哪里`Customer`。您总是需要该列具有一对多关系。

在您的实体中拥有和不拥有 FK 属性之间的区别[会影响 EF 支持的两种类型的关联](https://stackoverflow.com/questions/5281974/code-first-independent-associations-vs-foreign-key-associations/5282275#5282275)。

# mongodb - 部分 MongoDB 查询的索引是否提供任何好处？

> ID：12013589
> 
> 赞同：0
> 
> 时间：2012-08-17T21:46:28.810
> 
> 标签：mongodb, indexing

假设我在 MongoDB 中存储了具有以下结构的对象：

```
Transaction
{
  _id
  userId
  accountId
} 
```

并假设我有以下索引：

```
db.Transaction.ensureIndex({"userId": 1}) 
```

以下查询是否利用索引来最小化搜索时间？

```
db.Transaction.find( {userId: 'user1234', accountId: 'account1234'} ); 
```

也就是说，MongoDB 是否使用索引来“减少”结果`userId`，然后进行表扫描`accountId`？

```
db.Transaction.find( {userId: 'user1234', accountId: 'account1234'} ).explain()
{
    "cursor" : "BtreeCursor userId_1",
    "nscanned" : 2,
    "nscannedObjects" : 2,
    "n" : 1,
    "millis" : 1,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "isMultiKey" : false,
    "indexOnly" : false,
    "indexBounds" : {
            "userId" : [
                    [
                            "user1234",
                            "user1234"
                    ]
            ]
    } 
```

看着`explain()`查询说`BtreeCursor userId_1`，所以我认为它让所有用户都使用`userId`of`user1234`然后扫描（仅有的两个项目）以找到`accountId`of `account1234`- 这是正确的吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T23:03:44.340

> 以下查询是否利用索引来最小化搜索时间？

是的，它确实。

> 查看查询的 explain() 说 BtreeCursor userId_1，所以我认为它获取了所有 userId 为 user1234 的用户，然后扫描以找到 account1234 的 accountId - 这是正确的吗？

是的，你是对的。浏览此处获取更多信息：

*   [http://www.mongodb.org/display/DOCS/Indexes](http://www.mongodb.org/display/DOCS/Indexes)
*   [http://www.mongodb.org/display/DOCS/Indexing+Advice+and+FAQ](http://www.mongodb.org/display/DOCS/Indexing+Advice+and+FAQ)

# c - “更多线程”是否意味着更快的速度？

> ID：12013593
> 
> 赞同：1
> 
> 时间：2012-08-17T21:47:03.020
> 
> 标签：c, performance, algorithm, cuda

我在 CUDA 上有一个 Jacobi 实现，但问题是：

我以这种方式分配线程：

```
#define imin(a,b) (a < b ? a : b)
int  dimBlocks, dimThreads;
dimThreads = 256;
dimBlocks =  imin(32, (dimThreads + dim - 1)/dimThreads); 
```

但是如果我使用 32 个线程，它比使用 256 个线程更快，甚至......

我得到了这些结果：

```
Sequential times:
9900 5.882000 
9900 6.071000

Parallel times:
9900 1.341000 //using 32
9900 1.626000 //using 256 
```

其中 9900 是矩阵宽度......我们可以看到以下内容：

```
5.882 / 1.34 = 4.39
6.07 / 1.62 = 3.74 
```

那么32个线程比256个线程效率高吗？

对不起，我不知道我是否应该上传代码（因为它们有点长），如果你要求我会做。

编辑：

```
//Based on doubletony algorithm
#include "cuda_runtime.h"
#include "device_launch_parameters.h"
#include "Jacobi.cuh"

#include "thrust\host_vector.h"
#include "thrust\device_vector.h"
#include "thrust\extrema.h"

#include <cstdio>
#include <cstdlib>
#include <cmath>
#include <ctime>

#define imin(a,b) (a < b ? a : b)

// name OF FUNCTION: __copy_vector
// PURPOSE:
//    The function will copy a vector.
//
// PARAMETERS:
// name         type      value/reference   description
// ---------------------------------------------------------------------
// source       double*   value             vector to be copied
// dest         double*   reference         vector copied
// dim          int       value             vector dimension
// RETURN VALUE:
// name         type  description
// ---------------------------------------------------------------------
//
__global__ void __copy_vector(double *source, double *dest, const int  dim)
{
    int  tIdx = blockDim.x * blockIdx.x + threadIdx.x;
    while(tIdx < dim){
        dest[tIdx] = source[tIdx];
        tIdx += gridDim.x * blockDim.x;
    }
}

// name OF FUNCTION: __Jacobi_sum
// PURPOSE:
//    The function will execute matrix vector multiplication
//
// PARAMETERS:
// name         type      value/reference   description
// ---------------------------------------------------------------------
// A            double*   value             A
// B            double*   value             B
// C            double*   reference         A*B
// dim          int       value             vector dimension
// RETURN VALUE:
// name         type  description
// ---------------------------------------------------------------------
//
__global__ void __Jacobi_sum(const double *A, 
                             const double *B, 
                             double *resul, 
                             const int  dim)
{
    int  tIdx = blockIdx.x * blockDim.x + threadIdx.x;
    while(tIdx < dim){
        resul[tIdx] = 0;
        for(int i = 0; i < dim; i++)
            if(tIdx != i)
                resul[tIdx] += A[tIdx * dim + i] * B[i];
        tIdx += gridDim.x * blockDim.x;
    }
    __syncthreads;
}
// name OF FUNCTION: __substract
// PURPOSE:
//    The function will execute A-B=resul
//
// PARAMETERS:
// name         type      value/reference   description
// ---------------------------------------------------------------------
// A            double*   value             A
// B            double*   value             B
// C            double*   reference         A-B
// dim          int       value             vector dimension
// RETURN VALUE:
// name         type  description
// ---------------------------------------------------------------------
//
__global__ void __substract(const double *A, 
                            const double *B, 
                            double *C, 
                            const int  dim)
{
    int  tIdx = blockIdx.x * blockDim.x + threadIdx.x;
    while(tIdx < dim){
        C[tIdx] = A[tIdx] - B[tIdx];
        tIdx += gridDim.x * blockDim.x;
    }
}
// name OF FUNCTION: __divide
// PURPOSE:
//    The function will execute the jacobi division, that is, 
//    (B-sum)/A[i,i]
//
// PARAMETERS:
// name         type      value/reference   description
// ---------------------------------------------------------------------
// A            double*   value             A
// B            double*   reference         (B-sum)/A[i,i]
// dim          int       value             vector dimension
// RETURN VALUE:
// name         type  description
// ---------------------------------------------------------------------
//
__global__ void __divide(const double *A, double *B, const int dim)
{
    int  tIdx = blockIdx.x * blockDim.x + threadIdx.x;
    while(tIdx < dim){
        //if(A[tIdx * dim + tIdx] != 0)
            B[tIdx] /= A[tIdx * dim + tIdx];
        tIdx += blockDim.x * gridDim.x;
    }
}
// name OF FUNCTION: __absolute
// PURPOSE:
//    The function will calculate the absolute value for each
//    number in an array
//
// PARAMETERS:
// name         type      value/reference   description
// ---------------------------------------------------------------------
// A            double*   reference         |A[i]|
// dim          int       value             vector dimension
// RETURN VALUE:
// name         type  description
// ---------------------------------------------------------------------
//
__global__ void __absolute(double *A, const int dim)
{
    int  tIdx = blockIdx.x * blockDim.x + threadIdx.x;
    while(tIdx < dim){
        if(A[tIdx] < 0)
            A[tIdx] = -A[tIdx];
        tIdx += blockDim.x * gridDim.x;
    }
}
// name OF FUNCTION: Jacobi_Cuda
// PURPOSE:
//    The function will calculate a X solution for a linear system
//    using Jacobi's Method.
//
// PARAMETERS:
// name         type      value/reference   description
// ---------------------------------------------------------------------
// Matrix_A     double*   value             Matrix A(coefficients)
// Vector_B     double*   value             Vector B
// Vector_X     double*   reference         Solution
// dim          int       value             Matrix Dimension
// e            double    value             Error allowed
// maxIter      int       value             Maximum iterations allowed
// RETURN VALUE:
// name         type  description
// ---------------------------------------------------------------------
//

void Jacobi_Cuda(const double *Matrix_A, 
                 const double *Vector_B,
                 double *Vector_X, 
                 const  int  dim, 
                 const double e,
                 const int  maxIter,
                 double *t)
{

    /** Host variables **/
    int iter = 0; // iter counter
    double err = 1; // error between X^k and X^k-1
    double *tmp; // temporary for thrust norm
    double *norm; // Vector norm

    tmp = (double *) malloc(sizeof(double) * dim);
    norm = (double *) malloc(sizeof(double));

    int  dimBlocks, dimThreads;
    dimThreads = 64;
    dimBlocks =  imin(32, (dim + dimThreads - 1)/dimThreads);
    /** ************** **/

    /** Device variables **/
    double *d_Matrix_A, *d_Vector_B, *d_Vector_X, *d_Vector_Y, *d_Vector_Resul;

    cudaMalloc((void**)&d_Matrix_A, sizeof(double) * dim * dim);
    cudaMalloc((void**)&d_Vector_B, sizeof(double) * dim);
    cudaMalloc((void**)&d_Vector_X, sizeof(double) * dim);
    cudaMalloc((void**)&d_Vector_Y, sizeof(double) * dim);
    cudaMalloc((void**)&d_Vector_Resul, sizeof(double) * dim);

    /** **************** **/

    /** Initialize **/
    cudaMemcpy(d_Matrix_A, Matrix_A, sizeof(double) * dim * dim, 
                cudaMemcpyHostToDevice);
    cudaMemcpy(d_Vector_B, Vector_B, sizeof(double) * dim, cudaMemcpyHostToDevice);
    cudaMemcpy(d_Vector_X, Vector_X, sizeof(double) * dim, cudaMemcpyHostToDevice);
    /** ********** **/

    clock_t start,finish;
    double totaltime;
    start = clock(); 

    /** Jacobi **/
    while(err > e && iter < maxIter){

        __copy_vector<<<dimBlocks, dimThreads>>>(d_Vector_X, d_Vector_Y, dim);

        __Jacobi_sum<<<dimBlocks, dimThreads>>>(d_Matrix_A, d_Vector_Y, 
                                                d_Vector_Resul, dim); 
        __substract<<<dimBlocks, dimThreads>>>(d_Vector_B, d_Vector_Resul, 
                                                d_Vector_X, dim);

        __divide<<<dimBlocks, dimThreads>>>(d_Matrix_A, d_Vector_X, dim);

        __substract<<<dimBlocks, dimThreads>>>(d_Vector_Y, d_Vector_X,
                                                d_Vector_Resul, dim);
        __absolute<<<dimBlocks, dimThreads>>>(d_Vector_Resul, dim);

        cudaMemcpy(tmp, d_Vector_Resul, sizeof(double) * dim, cudaMemcpyDeviceToHost);

        double *t = thrust::max_element(tmp, tmp + dim); //vector norm

        err = *t;

        iter++;
    }

    finish = clock();

    totaltime=(double)(finish-start)/CLOCKS_PER_SEC;   

    *t = totaltime;

    cudaMemcpy(Vector_X, d_Vector_X, sizeof(double) * dim, 
                cudaMemcpyDeviceToHost);
    if(iter == maxIter)
        puts("Jacobi has reached maxIter!");
    /** ****** **/

    /** Free memory **/
    cudaFree(d_Matrix_A);
    cudaFree(d_Vector_B);
    cudaFree(d_Vector_X);
    cudaFree(d_Vector_Y);
    cudaFree(d_Vector_Resul);
    free(tmp);
    free(norm);
    /** *********** **/
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T21:51:04.507

这取决于你的算法。根据定义，某些算法是不可并行的（例如，计算[斐波那契数](http://en.wikipedia.org/wiki/Fibonacci_number)列）。但这是一个由 Brown 提供的可[并行化 Jacobi 算法。](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CF8QFjAA&url=http://www.cfm.brown.edu/people/gk/AM258/Handouts/Web_paraJacobi.ppt&ei=GLwuUNmOCK2r2AWhyIC4BA&usg=AFQjCNHzyos8Fi5UrC2whOIdCfpb9AZg2w&cad=rja)请注意，求解方程组可以串行或并行求解，只需编写代码即可。

`more threads = more speed`简而言之，除非您向我们展示（或至少解释）算法，否则不可能知道是否。就线程同步而言，CUDA 非常（非常）擅长标准化同步成本，因此（如果您的算法正确），更多的线程几乎总是应该产生更快的速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T21:50:52.720

如果工作负载足够小以至于管理许多线程的开销会导致性能下降，那么更少的线程可能会更有效。

...但是没有看到你的代码很难说。就我个人而言，我更倾向于相信这只是您代码中的一个错误。

# knockout.js - 在 Knockout 中连接字符串

> ID：12013594
> 
> 赞同：12
> 
> 时间：2012-08-17T21:47:10.977
> 
> 标签：knockout.js

我需要将 url 参数连接到锚标记上。我将如何将其插入以下模板？

```
 <tbody data-bind="foreach: Customers">
            <tr class="rowEven">
                <td data-bind="text: Name"></td>
                <td data-bind="text: CustomerType"></td>
                <td><a href="customers.aspx?customer=[CustomerAccountIDHere]">Manage</a><a href="#">Guest Admin</a></td>
            </tr>
        </tbody> 
```

我试过这不会运气：

```
 <tr class="rowEven">
                <td data-bind="text: Name"></td>
                <td data-bind="text: CustomerType"></td>
                <td><a data-bind="attr: { href: 'customers.aspx?customer=' + CustomerAccount_BID}">Manage</a><a href="#">Guest Admin</a></td>
            </tr> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-18T04:18:44.403

我认为视图模型可能是问题所在，这是一个工作示例：http: [//jsfiddle.net/L4hUq](http://jsfiddle.net/L4hUq)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-02-20T06:39:31.127

添加“（）”- **CustomerAccount_BID（）**对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-12T11:15:49.760

尝试这样的事情......

```
$(function()
{

    var myViewModel1 = function () {
        var self = this;
        self.firstName = ko.observable("Kamalakar");
        self.lastName = ko.observable("Ashtankar");
        self.fullName = ko.pureComputed(function () {
            return self.firstName() + " " + self.lastName();
        }
        );
    };

    ko.applyBindings(myViewModel1);

}); 
```

# javascript - 从本地 HTML 文件启动 HTML/Javascript Adob e Air 应用程序。

> ID：12013597
> 
> 赞同：1
> 
> 时间：2012-08-17T21:47:30.543
> 
> 标签：javascript, html, air

我正在创建我的第一个基于 HTML 的 Adob​​e Air 应用程序，并且需要它在加载时从网页启动。我已将 allowBrowserInvocation 设置为 true，但我看到的每个示例都来自基于 Flash 的 Air 应用程序。如果有人可以为我提供一个非常简单的 html 页面，其中包含 javascript 来调用基于 HTML 的 Air 应用程序，那将非常有帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:17:56.983

我认为简短的回答是，它不能完成。

据我所知，从浏览器启动 Air 应用程序是通过未记录的 AS3 类完成的，例如`ProductManager`和`Air Browser API`. 我知道它`Air Browser API`依赖于外部 SWF，因此，我认为您不能使用 javascript 与它进行交互（除非您可以找到某种扩展 SWF 并`ExternalInterface`用于注册回调的方法？）

他们没有记录的事实意味着那里没有太多资源。但还是有一些：

[从网页安装和运行 AIR 应用程序](http://livedocs.adobe.com/flex/3/html/help.html?content=distributing_apps_3.html)

[ProductManager 的使用示例](http://blog.everythingflex.com/2009/06/08/open-an-air-application-from-a-2nd-air-application/)

# python - 如何在 Python 中将多个整数转换为 c_ubyte 的 ctypes 数组

> ID：12013599
> 
> 赞同：2
> 
> 时间：2012-08-17T21:47:46.883
> 
> 标签：python, types, casting, initialization, ctypes

如何将一串冒号分隔的十六进制数字转换为 c_ubyte 的 ctypes 数组？根据[ctypes docs](http://docs.python.org/library/ctypes#type-conversions)，我可以强制转换硬编码集合，如下所示：

```
>>> from ctypes import *
>>> x = (c_ubyte * 6) (1, 2, 3, 4, 5, 6)
>>> x
<__main__.c_ubyte_Array_6 object at 0x480c5348> 
```

或者，像这样：

```
>>> XObj = c_ubyte * 6
>>> x = XObj(1, 2, 3, 4, 5, 6)
>>> x
<__main__.c_ubyte_Array_6 object at 0x480c53a0> 
```

但是，我不知道如何转换一个变量列表，例如通过拆分字符串生成的列表，例如：

```
>>> mac = 'aa:bb:cc:dd:ee:ff'
>>> j = tuple(int(z,16) for z in mac.split(':'))
>>> j
(170, 187, 204, 221, 238, 255)
>>> x = (c_ubyte * 6) (j)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: an integer is required
>>> XObj = c_ubyte * 6
>>> x = XObj(j)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: an integer is required 
```

我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T21:58:52.973

问题是，在您提供的第一个示例中，您通过为 XObj 调用提供 6 个参数来正确使用 ctypes，而在第二个示例（使用 mac 地址）中，您尝试调用相同的 object `c_ubyte * 6`，给它一个元组，但是不是 6 个值，所以使用`*args`符号进行转换：

```
from c_types import c_ubyte

mac = 'aa:bb:cc:dd:ee:ff'
j = tuple(int(z,16) for z in mac.split(':'))

converted = (c_ubyte * 6)(*j)  # *j here is the most signigicant part
print converted 
```

结果是：

```
<__main__.c_ubyte_Array_6 object at 0x018BD300> 
```

正如预期的那样。

# ajax - 通过ajax下载pdf或图片

> ID：12013606
> 
> 赞同：0
> 
> 时间：2012-08-17T21:49:10.550
> 
> 标签：ajax, jquery

我想通过 ajax 请求向我的服务器发送大量数据，该服务器将根据该数据生成`pdf`或格式化。`jpg`

现在我已经完成了所有这些，我的问题是如何通过`pdf/jpg`ajax 生成的输出返回给用户？我想我可能可以使用`json`它，但我不确定如何使用，而且我认为`pdf`.

另外，如果有人建议使用不起作用`form`的`hidden`输入，因为我有`multidimensional array`很多数据，而且它需要付出很多努力才能使其工作。

顺便说一句，我正在使用`jquery`，但其他任何东西都是可以接受的，只要它能完成工作而不会让我重写一半的脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T08:10:58.757

**显示 JPG**

1.  AJAX：您可以返回十六进制编码的*数据*（请务必正确设置内容类型：）`header('Content-type: image/jpeg')`。然后，您只需将一个`<img/>`元素注入 DOM 并将其`src`属性设置为返回的[Data URI](http://en.wikipedia.org/wiki/Data_URI_scheme)。

2.  `<img/>`HTML：此外，您可以将带有普通`src`URL的 's 注入服务器上的某个位置。

**对于 PDF**

这有点棘手。一些浏览器原生显示 PDF（Chrome/Firefox），另一些则依赖可选的第三方插件。您可以检测到这些插件，但无法控制 PDF 是显示在窗口中/`frame`还是下载。

如果您选择显示，您可以创建[一个新窗口/选项卡](http://webdesign.about.com/od/javascript/a/aa030600c.htm)来显示它或[在 iframe 中动态显示它](https://stackoverflow.com/questions/9908554/open-dynamically-generated-pdf-in-tab-or-iframe)。

# jquery - jquery slideToggle 问题与图像

> ID：12013609
> 
> 赞同：0
> 
> 时间：2012-08-17T21:49:38.897
> 
> 标签：jquery, css

我在 div 包装器上使用 jQuery slideToggle()。一切正常，直到我把更大的图像放进去。假设包装器的宽度为 300 像素，内部的图像为 1000 x 500 像素，宽度设置为 100%。所以图像会自动缩小到 300 像素 x 150 像素。问题是当包装器切换为可见时，它会拉伸到 500 像素，而当动画完成时，它会跳回 150 像素。有没有办法避免这种情况？

代码是这样的

```
<div id="wrapper">
 <div id="image-wrapper">
   <img src"..." width="100%" />
 </div>
</div>

#wrapper{
 width: 30%;
} 
```

# javascript - $在JQuery中是什么意思

> ID：12013611
> 
> 赞同：0
> 
> 时间：2012-08-17T21:49:42.470
> 
> 标签：javascript, jquery

在下面的

```
var obj = { one:1, two:2, three:3, four:4, five:5 };
    $.each(obj, function(i, val) {
       console.log(val);
    }); 
```

$ 在这里是什么意思？$是一个对象吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T21:50:51.863

`$`是`jQuery`对象/函数的别名。它充当存储所有 jQuery 函数的命名空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T21:50:32.700

$ 代表 jQuery 函数/对象，你可以在[**这里找到很好的讨论**](https://stackoverflow.com/questions/1049112/what-is-the-meaning-of-symbol-in-jquery)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T21:55:40.940

[http://api.jquery.com/jQuery/](http://api.jquery.com/jQuery/)

> jQuery()——也可以写成 $()——在 DOM 中搜索任何与提供的选择器匹配的元素，并创建一个新的 jQuery 对象来引用这些元素。

-jQuery网站

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T21:56:37.747

`$`指的是jQuery函数。

在 JavaScript 中，函数是一种特殊的对象。

您可以像任何其他对象一样创建函数并向其添加属性。

```
var $ = function(message) { alert(message); };

$.prop1 = 'val1';
$.prop2 = 'val2';

$("Hello world");

alert($.prop2);

alert($ instanceof Object);   /* This will be "true" */
alert($ instanceof Function); /* This will be "true" */ 
```

# javascript - SpiderMonkey 运行用户提交的脚本是否安全？

> ID：12013615
> 
> 赞同：2
> 
> 时间：2012-08-17T21:50:00.207
> 
> 标签：javascript, embedding

我一直在寻找一些方法来允许用户编写脚本以扩展我的应用程序（用 Go 编写），到目前为止，SpiderMonkey 似乎是最好的匹配。

不幸的是，它的网站声明最后一个独立版本是 Firefox 4 中使用的版本！

我的问题是使用 SpiderMonkey 运行不可信的脚本是否安全（我将使用操作和堆栈回调来防止挂起等）或者是否有更好的选择。

# css - 像素位置的 CSS 渐变（不是 %）

> ID：12013618
> 
> 赞同：3
> 
> 时间：2012-08-17T21:50:04.050
> 
> 标签：css, linear-gradients

如何创建从指定位置（x 轴上的像素）开始的程序化水平渐变？

这就是问题所在 - 我将图像设置为`background-image`- 理想情况下，我想做的是声明一个 CSS 渐变，它从靠近图像边缘（~1800 像素）开始并优雅地渐变为全黑。

到目前为止，我最好的解决方案是有两个 div 元素——一个带有照片背景，另一个带有一个 1px 高的渐变图像，沿着 y 轴重复`background-position`，从 1780px 开始。

这行得通，但我真的想摆脱 1px 图像技巧。有任何想法吗？

```
<div id="photobg">
 <div id="gradientbg">
 </div>
</div>

#photobg {
 background-image:url('photourl.jpg');
}

#gradientbg {
 background-image:url('1pxgradient.jpg');
 background-repeat: repeat-y;
 background-position: 1780px 0;
 height: 100%;
} 
```

理论上，我想做的是在 1780 像素处使用颜色停止作为 CSS 渐变，但据我了解，CSS 仅支持 % 值作为颜色停止。

参考： [CSS 3 Gradient n pixel from bottom - Webkit/Safari](https://stackoverflow.com/questions/4707828/css-3-gradient-n-pixels-from-bottom-webkit-safari)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-20T06:43:48.877

不，您可以使用具有线性渐变的像素：

```
background-image: linear-gradient(transparent 1780px, black 100%); 
```

您还可以将此渐变与多个背景图像组合在一起`div`。

您可能想查看我为您制作的这个 jsbin：http: [//jsbin.com/sonewa/1/edit](http://jsbin.com/sonewa/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T22:09:31.807

这个css块会做你想做的

```
background: -moz-linear-gradient(center top , #00AFF0, #53D4FE); //this is for mozilla
background-image: -webkit-linear-gradient(top, #00AFF0, #53D4FE); //this is for chrome and safari
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#00AFF0', endColorstr='#53D4FE', GradientType=0); //this is for IE 
```

而渐变是从颜色#00AFF0 到#53D4FE（从上到下）

# javascript - 将鼠标悬停在剪辑项目上时滚动 div

> ID：12013620
> 
> 赞同：0
> 
> 时间：2012-08-17T21:50:12.867
> 
> 标签：javascript, scroll, dimensions, clip

这是一个很难描述的问题......我的`<div>`页面上有一个固定的高度，里面有一堆内容项。每个项目都是一个正方形`<div>`，向左浮动，因此它们从左到右和从上到下填充区域。如果视图中的项目太多，则内容区域将滚动 ( `overflow-y: auto`)。

原谅 ASCII 艺术：

```
---------------------
| [ 1 ] [ 2 ] [ 3 ] |
| [ 4 ] [ 5 ] [ 6 ] |
| [ 7 ] [ 8 ] [ 9 ] |
--------------------- 
```

问题是，如果底行没有被剪掉，里面的物品就不能完全适合该区域。所以我想做的是当用户将鼠标悬停在从内容区域底部剪掉的项目上时，以某种方式自动向下滚动视图。

我不知道如何确定某个特定项目是否被剪裁。

这完全古怪吗？还是有这样做的合乎逻辑的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T22:14:36.267

这是一个*非常*基本的例子。

[http://jsfiddle.net/8Kb7N/](http://jsfiddle.net/8Kb7N/)

本质上，您的每个方形 div 内部都会有一个具有唯一名称的关联锚点。

您想为将 window.location 设置为其锚点名称的每个项目设置悬停事件。这应该让它在该区域内导航。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:14:26.547

在第一次尝试@Geuis 的方法之后，我意识到我解决了错误的问题，因为最后一行项目*不一定*是被剪裁的同一行。

例如，假设我在 3x4 网格中有 12 个项目：每行 3 个项目，总共 4 行。然后说我的容器只有足够高来显示前两行和第三行的上半部分。最后一行是第四行，但被*剪裁*的行是第三行，假设我滚动到顶部。或者，如果我滚动到容器底部怎么办？现在第二行被剪掉了，从顶部而不是底部。

所以我意识到，我需要查看悬停在上面的特定项目，而不是查看行，并确定该单个项目是否完整显示。如果是，什么也不做；如果不是，请根据项目的哪一端被剪辑向上或向下滚动。

这就是我想出的。悬停时：

```
var containerHeight = $container.height(),
    itemHeight = $(this).height(),
    itemOffset = Math.floor($(this).position().top),
    itemVisible = containerHeight - itemOffset,
    itemClip = itemHeight - itemVisible;

if (itemClip > 0){
    $container.scrollTo('+=' + itemClip, 600);
} else if (itemOffset < 0){
    $container.scrollTo('-=' + Math.abs(itemOffset), 600);
} 
```

（`$container`在我的脚本中的其他地方定义为包含`div`）

逐行：

1.  获取包含所有项目的容器的高度
2.  获取被悬停的项目的高度
3.  获取容器顶部到悬停项目顶部的距离
4.  从容器的高度（第 1 行）中减去距离（第 3 行）
5.  将第 4 行的差值从悬停项目的高度中减去（第 2 行）

现在，这告诉你两件事：

*   如果第 3 行的结果是否定的，则该项目被裁剪了超过容器顶部的那么多像素
*   如果第 5 行的结果是肯定的，则该项目被裁剪了超过容器底部的那么多像素

知道了这一点，您就可以在正确的方向和正确的距离上滚动容器以显示整个项目。

实际的滚动本身需要 jQuery [ScrollTo](http://demos.flesler.com/jquery/scrollTo/)插件，以便*从当前滚动位置*`x`向上或向下滚动像素数（而不是从容器的顶部，这是 jQuery 的内置函数所做的）。*`.scrollTop()`*

 *`itemOffset`（ScrollTo 不将负数作为值，因此为了向上滚动，您需要获取- 因此的绝对值`Math.abs(itemOffset)`）。*

# ios - Xcode：方案脚本与目标脚本

> ID：12013621
> 
> 赞同：9
> 
> 时间：2012-08-17T21:50:23.723
> 
> 标签：ios, macos, ios5, xcode4, xcode4.2

我尝试在构建时为我的一个 xcode 项目运行脚本。

方式 1）我在当前的“构建”方案中添加了一个预操作（运行脚本）。它不起作用，实际上，它根本没有运行。
方式2）然后我将相同的脚本添加到目标（“目标”，构建阶段部分）。它按预期运行。

问题：
1）为什么预动作脚本没有运行？（我尝试使用“电子邮件操作”，它确实有效）
2）在“方案”和“构建阶段”中设置脚本有什么区别？我的猜测是，对于最后一个它总是会运行（在构建时），而不关心当前的方案，这就是全部区别吗？

有趣的事实：当我编辑 Build > pre-action 部分时 Xcode 崩溃

我确保选择了正确的方案。

Xcode 版本 4.4.1 (4F1003)

# spring - 如何在 Grails 项目中更改 Spring 版本？

> ID：12013627
> 
> 赞同：2
> 
> 时间：2012-08-17T21:50:38.997
> 
> 标签：spring, grails, version

更改我的 Grails 项目使用的 spring 版本的“正确”方法是什么？最新版本捆绑 spring 3.1.0，我想知道如何将其更改为最新 (3.1.2) ？

手动将特定依赖项添加到 BuildConfig.groovy 是唯一的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T20:51:44.427

您可以修改 BuildConfig.groovy 是正确的。但是正如@Gregg 提到的，我不会这样做:) Grails 使用特定版本的 spring 进行测试，如果升级 spring，你会得到一些意想不到的结果和行为。

风险自负！

# selenium - 使用 Selenium IDE 选择多个 xpath 元素

> ID：12013629
> 
> 赞同：1
> 
> 时间：2012-08-17T21:50:41.417
> 
> 标签：selenium, ide

我正在尝试在 Selenium IDE 中使用 xpath 选择多个元素。我正在使用的查询是

```
//*[contains(@id, "address_menu_")] 
```

这适用于第一个元素，但屏幕上有 8 个我试图定位。有什么想法吗？谢谢。

*编辑 - 这是从 Firebug 复制过来的 HTML。我扩展了产品，但将其他产品最小化以节省空间。前四个产品是礼物公告（我正在测试的功能）），后四个是实际产品。为了记录，我试图针对的是 -

`<td class="item-address">` `<select id="address_menu_71740515" name="address_71740515">`

```
<script type="text/javascript">
<tr id="item_71740515" class=" odd gift_cont">
<th class="sub">
<td class="product">1 x Gift Announcement (Physical)</td>
<td>
<td class="item-address">
<select id="address_menu_71740515" name="address_71740515">
</td>
<td class="price">$0.00</td>
<td class="price">$0.00</td>
</tr>
<tr class="gift_sep">

<script type="text/javascript">
<tr id="item_71740511" class=" gift_cont">
<tr class="gift_sep">

<script type="text/javascript">
<tr id="item_71740507" class=" odd gift_cont">
<tr class="gift_sep">

<script type="text/javascript">
<tr id="item_71740503" class=" gift_cont">
<tr class="gift_sep">

<tr id="item_71740495" class=" odd">

<tr id="item_71740487" class=" ">

<tr id="item_71740499" class=" odd">

<tr id="item_71740491" class=" "> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T22:21:32.557

实际上，在 Selenium 中不可能这样做。它的许多命令旨在与精确的一个元素一起工作。虽然你可以用另一种方式来做，但只要澄清你的问题，你到底需要什么？

现在看来我明白你在做什么了。你有`selects`里面`<td>`。
`//*[contains(@id, "address_menu_")][1]`只允许从兄弟姐妹中选择，但您的选择显然不是那些。

如果您将所有这些都放在一张表中，那么您可以稍微更改表达式，例如：

```
//tr[contains(@id, 'item_')][1]/descendant::select 
//tr[contains(@id, 'item_')][2]/descendant::select 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T08:21:11.390

您可以使用：

```
<tr>
    <td>addSelection</td>
    <td>Locate your select element</td>
    <td>Option you need to select</td>
</tr> 
```

# javascript - iOS 从浏览器复制到剪贴板

> ID：12013630
> 
> 赞同：2
> 
> 时间：2012-08-17T21:50:42.643
> 
> 标签：javascript, ios, web, clipboard, copy-paste

所以不久前，我正在研究一种以编程方式将某些内容从移动网站复制到剪贴板的方法。如果不以某种方式使用 Flash 似乎是不可能的，这当然不是 iOS 的选项。

然后我遇到了这个网站[https://getpocket.com/](https://getpocket.com/)。作为设置过程的一部分，它会指示您创建书签，然后将新 URL 复制到剪贴板，然后指示您将其粘贴到新创建的书签中。

那么这个网站是如何在 iOS 设备上做到这一点的呢？据我了解，这是不可能的……有人有什么想法吗？

谢谢！

# php - 以下划线为前缀的受保护属性

> ID：12013631
> 
> 赞同：10
> 
> 时间：2012-08-17T21:50:46.457
> 
> 标签：php, coding-style, naming-conventions, standards

像：

```
public
  $foo        = null,
  $bar        = 10;

protected

  $_stuff     = null,
  $_moreStuff = 5; 
```

很多人似乎都会这样做。为什么？

这不是不一致的命名吗（就像一些 PHP 函数是 :)）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-17T21:54:58.877

这是 php5 之前的旧惯例。

Php4 只有公共可见性，不知何故人们希望能够判断一个属性是公共的还是私有的（方法也是如此）。下划线前缀表示私有成员或方法，不打算从外部使用。

虽然严格来说它在 php5 中是不必要的，您可以在其中显式标记类成员的可见性，但这种约定仍然很常见。用户认为这使得浏览代码更容易，因为您可以立即查看是否也可以从外部调用该函数。这取决于个人喜好或给定项目的编码风格。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-17T21:54:38.817

这真的归结为一件事：个人喜好。

我个人也是使用该命名约定的人。`protected`为任何带有下划线或下划线的东西添加前缀`private`，无论是变量还是函数，让我自己和我经常与之合作的任何其他程序员都知道该变量是全局的，并且在当前类/上下文之外无法访问。

一个有助于阐明用例的示例是使用类方法：

```
class Example {
    public function firstFunction() {
        // do stuff
    }

    protected function _secondFunction() {
        // do more stuff
    }
} 
```

当我编写使用类的代码`Example`或在类本身内部工作时，如果我看到`_secondFunction()`我会立即知道它不是公共函数，因为它是启动的`_`，因此无法在类外部访问；无需去查找实际的函数声明并查看修饰符。另一方面，我会知道这`firstFunction()`是公开的，因为它不是从一个开始的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-17T22:00:36.787

下划线是象征性的，表示该变量具有某些特殊属性（这是预定义的，并且可以从组织更改为组织或程序员更改为程序员）。传统上，这意味着某些东西不公开。甚至函数有时也写成：

```
protected function _myProtectedFunction(){} 
```

但是还要注意，PHP 保留所有以`__`（两个下划线）开头的函数名称为魔法，建议您不要`__`在 PHP 中使用函数名称，除非您想要一些记录在案的魔法功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-17T18:54:05.387

相比之下，Python 在设计上没有私有/公共，并使用下划线来传达区别。请参阅 PEP 8 的这一部分：

[http://www.python.org/dev/peps/pep-0008/#designing-for-inheritance](http://www.python.org/dev/peps/pep-0008/#designing-for-inheritance)

因此，它不一定*只是*PHP5 之前的旧约定——人们可能出于与 Python 相同的原因故意这样做。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-17T21:56:42.007

这绝对只是个人喜好。他们可能会这样做，因为 $_GET 和 $_SESSION 已经在 PHP 中完成了。

# c# - 如何在 MVC 项目中将 XML 文档从 jQuery (JS) 发送到 C#？

> ID：12013639
> 
> 赞同：1
> 
> 时间：2012-08-17T21:50:51.683
> 
> 标签：c#, jquery, xml, asp.net-mvc

在我的项目中，我从服务器加载了一个 xml 文档。我使用 ajax 对此进行了一次调用，并将其设置为一个变量（称为 siteData）。

我在页面上主动对 siteData 进行操作，并允许用户更改他们想要的任何内容。完成这些操作后，我需要将 XML 文档保存到服务器。

我在 MVC 项目服务器端使用 C#。我需要这个方法来接收我用 JavaScript 制作的 XML 文件以便解析它。

我想我有两个选择：

1.  弄清楚如何通过 C# 接收 siteData 变量并将其设置为参数，而不是我的 C# 方法中的 String。

2.  将 siteData 转换为字符串并将其发送到我的 C# 方法进行解析。

我不知道如何使任何一个选项起作用。我只想将操作 XML 文件传递​​到我的 C# 方法中以将其保存在服务器上。

我怎样才能做到这一点？

（请注意，我不能使用任何插件或备用库。我使用的是 jQuery 1.7.2 和 C#.NET。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T21:59:38.637

你可以使用网络客户端

```
http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx 
```

这里有一个样本

```
 Console.Write("\nPlease enter the URI to post data to : ");
            string uriString = Console.ReadLine();
            // Create a new WebClient instance.
            WebClient myWebClient = new WebClient();
            Console.WriteLine("\nPlease enter the data to be posted to the URI {0}:",uriString);
            string postData = Console.ReadLine();
            // Apply ASCII Encoding to obtain the string as a byte array. 
            byte[] postArray = Encoding.ASCII.GetBytes(postData);
            Console.WriteLine("Uploading to {0} ...",  uriString);                          
         myWebClient.Headers.Add("Content-Type","application/x-www-form-urlencoded");

            //UploadData implicitly sets HTTP POST as the request method. 
            byte[] responseArray = myWebClient.UploadData(uriString,postArray);

            // Decode and display the response.
            Console.WriteLine("\nResponse received was :{0}", Encoding.ASCII.GetString(responseArray)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T07:56:54.953

您可以编写自定义模型绑定器。让我们举个例子。假设您有以下控制器：

```
public class HomeController : Controller
{
    // Serve the view initially
    public ActionResult Index()
    {
        return View();
    }

    // This will be called using AJAX and return an XML document to the
    // client that will be manipulated using javascript
    public ActionResult GetXml()
    {
        return Content("<foo><bar id=\"1\">the bar</bar></foo>", "text/xml");
    }

    // This will be called using AJAX and passed the new XML to persist
    [HttpPost]
    public ActionResult Save(XDocument xml)
    {
        // TODO: save the XML or something
        return Json(new { success = true });
    }
} 
```

在客户端上，我们可以有以下 javascript：

```
<script type="text/javascript">

    // send an AJAX request to retrieve the XML initially
    $.ajax({
        url: '@Url.Action("getxml")',
        type: 'GET',
        cache: false,
        success: function (data) {
            // The data variable will contain the initial xml
            // Now let's manipulate it:
            $(data).find('bar').attr('id', '7');

            var xmlString = data.xml ? data.xml : (new XMLSerializer()).serializeToString(data);

            // Let's send the modified XML back to the server using AJAX:
            $.ajax({
                url: '@Url.Action("save")',
                type: 'POST',
                contentType: 'text/xml',
                data: xmlString,
                success: function (result) {
                    // ...
                }
            });
        }
    });
</script> 
```

最后一部分是为 XDocument 类型编写自定义模型绑定器，以便 Save 控制器操作可以获取 XDocument：

```
public class XDocumentModelBinder : IModelBinder
{
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var request = controllerContext.HttpContext.Request;
        if (!request.ContentType.StartsWith("text/xml", StringComparison.OrdinalIgnoreCase))
        {
            return null;
        }
        return XDocument.Load(request.InputStream);
    }
} 
```

将在 Application_Start 中注册并与 XDocument 类型相关联：

```
ModelBinders.Binders.Add(typeof(XDocument), new XDocumentModelBinder()); 
```

# apache - 集成 Solr 和 Mahout

> ID：12013640
> 
> 赞同：3
> 
> 时间：2012-08-17T21:50:56.783
> 
> 标签：apache, solr, lucene, mahout, recommendation-engine

Solr/Lucene 为全文搜索提供相关性分数，Mahout 为用户提供项目推荐以及偏好分数。

现在我让 Solr 和 Mahout 分别工作：当用户搜索查询字符串时，Solr 处理搜索并根据其分数返回 10 个结果。如何将 Mahout 和 Solr 集成在一起，以根据另一个评分系统（如 0.5*Solr 的分数 + 0.5*Mahout 的分数）提供前 10 个结果或后 10 个结果。

**问题：**现在，最初搜索按新评分排序的第 11 到第 20 个项目似乎不是最理想的，Solr 必须获取其数据库中所有项目的分数，而 Mahout 获取其数据库中所有项目的分数数据库，计算结果得分并采取措施。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T09:40:20.440

我建议将您的 mahout 分数添加为 Solr 中的附加字段，然后可能使用排序查询“boost_field desc”，这将允许您使用 mahouts 分数，...结合起来，您可以使用字段提升，例如 ^ ... -

它不是一个完整的答案，但可能会引导你找到更好的东西。

# ruby-on-rails - Rails：在属于其他两个模型的模型中创建一个新条目

> ID：12013648
> 
> 赞同：0
> 
> 时间：2012-08-17T21:51:08.530
> 
> 标签：ruby-on-rails, model-associations, mass-assignment

考虑一个拥有_many 产品的商店，其中有_many 意见。以下是型号：

店铺：

```
class Store < ActiveRecord::Base
    attr_accessible :desc, :location, :name, :phone, :status, :url

    has_many :products
    has_many :opinions, :through => :products
end 
```

产品：

```
class Product < ActiveRecord::Base
    attr_accessible :desc, :name, :status, :url

    belongs_to :store
    has_many :opinions
end 
```

最后，意见：

```
class Opinion < ActiveRecord::Base
    attr_accessible :content, :eval, :status

    belongs_to :store
    belongs_to :product
end 
```

要创建一个新意见（属于产品和商店），这里是 OpinionsController 的 create 方法：

```
def create

    # Get product info.
    product = Product.find_by_id params[:opinion][:product_id]

    # Create a new opinion to this product
    opinion = product.opinions.build params[:opinion]
    opinion.status = 'ON'

    if opinion.save
        redirect_to :back, :notice => 'success'
    else
        redirect_to :back, :alert => 'failure'
    end
end 
```

但这是导致的错误：`Can't mass-assign protected attributes: product_id`

**问题：如何将 product_id 传递给控制器​​？**

如果您需要更多信息，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T08:58:07.380

这看起来像一个场景，您可以使用嵌套资源路由[http://guides.rubyonrails.org/routing.html#nested-resources](http://guides.rubyonrails.org/routing.html#nested-resources)

但是，如果您只想快速修复 Opinion 控制器，则只需在构建 Opinion 时省略 product_id。像这样的东西应该工作：

```
# Get product info.
product = Product.find_by_id params[:opinion].delete(:product_id)  # delete removes and returns the product id

# Create a new opinion to this product
opinion = product.opinions.build params[:opinion]  # Since there is no product id anymore, this should not cause a mass assignment error. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T23:41:13.027

意见不能有belongs_to :store（你可以得到像opinion.product.store 这样的商店参数）所以..为什么你没有`attr_accessible`在你的控制器中显示这条线？

# email - VBA 脚本硬编码电子邮件地址

> ID：12013657
> 
> 赞同：0
> 
> 时间：2012-08-17T21:53:25.467
> 
> 标签：email, vba

（更新）- 此脚本当前运行的方式是当您在活动电子邮件文件夹 (...@ **.com/inbox) 或 (...@** .com/deleted) 中时，它会在该电子邮件文件夹上运行脚本。因此，Outlook 会自动知道选择了哪个电子邮件。我希望它始终这样做 thisemail@thisplace.com。这是通过 Outlook 的 VBA 运行的

所以我有这个简洁的 VBA 脚本，可以将我的收件箱文件夹从 Outlook 中选定的电子邮件地址导出到 Microsoft Excel。我想要的事情是进一步自动化，以便将电子邮件地址硬编码到脚本中。基本上我不想选择一个电子邮件地址来运行脚本，我只想让脚本始终在一个特定的电子邮件地址上运行。这是我的代码：

```
Sub Extract()

On Error Resume Next
Set myOlApp = Outlook.Application
Set myfolder = myOlApp.ActiveExplorer.CurrentFolder

Set xlobj = CreateObject("excel.application.14")
Set xlobjWbk = xlobj.Workbooks.Open("c:\Users\(my username)\Desktop\Example.xlsx")
xlobj.Visible = True
xlobj.EnableEvents = True

'Set Heading
xlobj.Range("a" & 1).Value = "Recieved Time"
xlobj.Range("b" & 1).Value = "Sender Email"
xlobj.Range("c" & 1).Value = "Subject"
xlobj.Range("d" & 1).Value = "Sender Name"
xlobj.Range("e" & 1).Value = "Body"

For i = 1 To myfolder.Items.Count
 Set myItem = myfolder.Items(i)
 msgtext = myItem.body

 xlobj.Range("a" & i + 1).Value = myItem.ReceivedTime
 xlobj.Range("b" & i + 1).Value = myItem.SenderEmailAddress
 xlobj.Range("C" & i + 1).Value = myItem.Subject
 xlobj.Range("d" & i + 1).Value = myItem.SenderName
 xlobj.Range("e" & i + 1).Value = msgtext

 Next
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T22:59:37.650

据我从您的示例中可以看到，我认为您针对活动的 Outlook 实例和选定的文件夹（myOlApp.ActiveExplorer.CurrentFolder）运行您的例程。

Outlook 文件夹具有 id 属性。你可以用它来实现你的目标。您可以通过 -> ActiveExplorer.CurrentFolder.EntryID 获得它。然后通过 -> Set targetFolder = GetNamespace("MAPI").GetFolderFromID(folderID) 使用它

# javascript - 尝试使用下一个和上一个按钮获取简单的 javascript 库以循环回到开头

> ID：12013658
> 
> 赞同：0
> 
> 时间：2012-08-17T21:53:28.667
> 
> 标签：javascript, loops, image-gallery, next

我对javascript相当陌生，但我基本上试图通过图库进行下一次/上一次点击。我已经设法找到教程和位来让图像点击。但是我似乎无法弄清楚如何在第四张（最终）图像之后返回系列的开头。

这就是我到目前为止所拥有的-

```
<script type="text/javascript">

 var photos=new Array()
 var which=0
 photos[0]='images/image1.jpg'
 photos[1]='images/image2.jpg'
 photos[2]='images/image3.jpg'
 photos[3]='images/image4.jpg'

 function backward(){
    if (which > 0){
        which=which-1
        document.images.photoslider.src=photos[which]
    }
 }

 function forward(){
     if (which<photos.length-1){
        which=which+1
        document.images.photoslider.src=photos[which]
     }
 }

 </script>

 <form>
     <input type="button" value="&lt;&lt;Back" onClick="backward()"> 
     <input type="button" value="Next&gt;&gt;" onClick="forward()">
 </form> 
```

本质上，我希望按钮通过 4 个图像创建一个连续循环。我知道会有一个简单的解决方案，我只是看不到它。任何帮助都会很棒！先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T22:18:00.570

你可以这样做：

```
function backward() {
    if (which <= 0) {
        which = photos.length - 1;
    } else {
        which--;
    }
    document.images.photoslider.src=photos[which];
 }

 function forward(){
     which = (which + 1) % photos.length;               //  modulus keeps which within
     document.images.photoslider.src=photos[which];     // the bounds, while incrementing
 } 
```

向后退，如果小于等于 0，则跳到最后一张照片。展望未来，如果 which + 1 == photos.length，模数会将其归零，让您回到起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T22:08:28.930

```
 function backward(){
    if (which>0){
     which=which-1;
    } else {
     which=photos.length-1;
    }
    document.images.photoslider.src=photos[which];
 }

 function forward(){
    if (which<photos.length-1){
     which=which+1;
    } else {
     which=0;
    }
   document.images.photoslider.src=photos[which];
 } 
```

多田！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-25T15:35:39.693

```
<!DOCTYPE html>
<html>
<body>

<p> click on the button to change the image</p>

     <input type="button" value="&lt;&lt;Back" onClick="backward()"> 

     <img src = "youtube.png" value = "PREVIOUS" id = "prev">

     <input type="button" value="Next&gt;&gt;" onClick="forward()">

<script>

var photos = new Array()
 var i=0
 photos[0]='youtube.png';    //enter the path of the image here
 photos[1]='facebook.png';
 photos[2]='twitter.png';
 photos[3]='sirius_logo_sm.gif';

function backward(){
    if (i>0){
     i=i-1;
    } else {
     i=photos.length-1;
    }
    document.getElementById("prev").src=photos[i];
 }

 function forward()
 {
    if (i<photos.length-1){
     i=i+1;
    } else {
     i=0;
    }
 document.getElementById("prev").src=photos[i]; }

</script>
</body>
</html> 
```

# c# - C# 中的西里尔文编码

> ID：12013659
> 
> 赞同：11
> 
> 时间：2012-08-17T21:53:32.253
> 
> 标签：c#, sql-server, encoding

我在 MSSQL 数据库中有一堆类似西里尔文的文本，需要在 C# 中将其转换为西里尔文。

所以... Ðàáîòà âåðìàíèè

应该成为

Работа в германии

有什么建议么？

我应该补充一点，我得到的最接近的是 ?aaioa aaa?iaiee

这是我正在使用的代码：

```
 str = Encoding.UTF8.GetString(Encoding.GetEncoding("Windows-1251").GetBytes(drCurrent["myfield"].ToString()));
 str = Encoding.GetEncoding(1251).GetString(Encoding.Convert(Encoding.UTF8, Encoding.GetEncoding(1251), Encoding.UTF8.GetBytes(str))); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-17T22:52:25.827

```
// To find out source and target
const string source = "Ðàáîòà â ãåðìàíèè";
const string destination = "Работа в германии";

foreach (var sourceEncoding in Encoding.GetEncodings())
{

    var bytes = sourceEncoding.GetEncoding().GetBytes(source);
    foreach (var targetEncoding in Encoding.GetEncodings())
    {
        if (targetEncoding.GetEncoding().GetString(bytes) == destination)
        {
            Console.WriteLine("Source Encoding: {0} TargetEncoding: {1}",sourceEncoding.CodePage,targetEncoding.CodePage);
        }

    }
}

// Result1: Source Encoding: 1252 TargetEncoding: 1251
// Result2: Source Encoding: 28591 TargetEncoding: 1251
// Result3: Source Encoding: 28605 TargetEncoding: 1251

// The code for you to use 
var decodedCyrillic = Encoding.GetEncoding(1251).GetString(Encoding.GetEncoding(1252).GetBytes(source));
// Result: Работа в германии 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T22:41:48.843

ADO.Net 将 SQL Server 提供程序中的所有字符串类型公开为 C# 字符串，这意味着它们已经转换为 Unicode。`char(n)`对于像or之类的非 unicode 源列（显然是你的）`varchar(n)`，ADO.Net SQL Server 提供程序使用源[**排序**](http://msdn.microsoft.com/en-us/library/ms187582%28v=sql.105%29)信息来确定编码。因此，如果您的非 unicode SQL Server 数据在 .Net 中以错误的编码表示，则它必须以错误的排序规则呈现给提供者。为您的数据选择适当的排序规则，SQL Server 的 ADO.Net 提供程序将使用适当的编码对其进行翻译。例如，如[排序规则和代码页架构](http://msdn.microsoft.com/en-us/library/ms186356%28v=sql.105%29.aspx)中所述，西里尔排序规则将导致[代码页 1251](http://msdn.microsoft.com/en-us/goglobal/cc305144.aspx)，这很可能是您想要的。链接的文章包含解决问题所需的所有信息。

```
using System;
using System.Text;
using System.Data.SqlClient;
using System.Windows.Forms;

public class Hello1
{
   public static void Main()
   {
    try
    {
        using (SqlConnection conn = new SqlConnection("server=.;integrated security=true"))
        {
            conn.Open ();

            // The .cs file must be saved as Unicode, obviously...
            //
            string s = "Работа в германии"; 

            byte[] b = Encoding.GetEncoding(1251).GetBytes (s);

            // Create a test table
            //
            SqlCommand cmd = new SqlCommand (
                @"create table #t (
                    c1 varchar(100) collate Latin1_General_CI_AS, 
                    c2 varchar(100) collate Cyrillic_General_CI_AS)", 
                conn);
            cmd.ExecuteNonQuery ();

            // Insert the same value twice, the original Unicode string
            // encoded as CP1251
            //
            cmd = new SqlCommand (
                @"insert into #t (c1, c2) values (@b, @b)", conn);
            cmd.Parameters.AddWithValue("@b", b);
            cmd.ExecuteNonQuery ();

            // Read the value as Latin collation 
            //
            cmd = new SqlCommand (
                @"select c1 from #t", conn);
            string def = (string) cmd.ExecuteScalar ();

            // Read the same value as Cyrillic collation
            //
            cmd = new SqlCommand (
                @"select c2 from #t", conn);
            string cyr = (string) cmd.ExecuteScalar ();

            // Cannot use Console.Write since the console is not Unicode
            //
            MessageBox.Show(String.Format(
                @"Original: {0}  Default collation: {1} Cyrillic collation: {2}", 
                    s, def, cyr));
        }

    }
    catch(Exception e)
    {
        Console.WriteLine (e);
    }   
   }
} 
```

结果是：

```
---------------------------

---------------------------
Original: Работа в германии  Default collation: Ðàáîòà â ãåðìàíèè Cyrillic collation: Работа в германии
---------------------------
OK   
--------------------------- 
```

# android - 适用于 Android 的布局。流动布局和固定布局

> ID：12013661
> 
> 赞同：2
> 
> 时间：2012-08-17T21:53:45.070
> 
> 标签：android, android-layout, android-widget

我必须开发一个需要使用类似布局显示数据的 Android 应用程序。我需要屏幕的两个部分：

*   具有随设备分辨率变化的流体高度的布局
*   以固定大小显示内容的第二种布局

这该怎么做？我使用了 relativelayout 和 linearlayout，但我还没有找到解决方案。你可以帮帮我吗？

![代表我的布局线框的图像](../Images/d5bd9692c315255493fc50cc38909080.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T22:11:40.980

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/fixedlayout"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:orientation="vertical"
        android:id="@+id/fluidlayout" >
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="200dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:orientation="vertical"
        android:id="@+id/fixedlayout" >
    </LinearLayout>

</RelativeLayout> 
```

使用更有效的解决方案`LinearLayout`

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1" >
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="200dp" >
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T22:12:48.500

对于`LinearLayout`设置顶部布局到`android:layout_weight="1"`（和高度`0dp`）和底部`layout_height`到固定值或`android:layout_height="wrap_content"`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <View
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:background="#FF0000" />

    <View
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:background="#00FF00" />

</LinearLayout> 
```

# c++ - 不明白为什么文本文件内容没有存储在向量的各个元素中

> ID：12013662
> 
> 赞同：0
> 
> 时间：2012-08-17T21:53:46.390
> 
> 标签：c++

```
#include <iostream>
#include <fstream>
#include <sstream>
#include <string>
#include <vector>
using namespace std;

int main()
{
    ifstream inFile("test.txt");
    string line;

    while(getline(inFile, line))
    {
        istringstream meh(line);
        int n;
        vector<int> v;

        while(meh >> n)
            v.push_back(n);
    }
} 
```

我的 test.txt 文件如下所示：

```
429384
392041
230138
099938
243324 
```

如果我尝试打印 v[0]，我会得到整个数字序列 (42938...3324) 而不仅仅是第一个数字 4。谁能解释为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T22:24:56.323

如果我理解正确并且您真的想遍历每一行中的每个数字，那么您可以试试这个：

```
#include <iostream>
#include <fstream>
#include <sstream>
#include <string>
#include <vector>
using namespace std;

int main()
{   
    ifstream inFile("test.txt");
    string line;

    while(getline(inFile, line))
    {   
        vector<int> v;
        int n;
        // loop through the string
        for(int i = 0; i < line.length(); i++) {
           // check whether the byte is numeric
           if(line[i] >= '0' && line[i] <= '9') {
               // convert it to a real integer
               int n = line[i] - '0';
               v.push_back(n); // add it to the vector
           }   
        }   

        // just to show they have been added
        int j;
        for (vector<int>::size_type j = 0; j < v.size(); ++j) {   
            std::cout << v[j] << std::endl;
        }   
    }   
} 
```

向量**v**将仅具有循环的范围，因此文件的每一行都有自己的向量；然而，这可能是你想要的，不知道我不能再说的实际应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T22:25:22.190

您在输出数据时可能犯了一个错误。实际上，您的代码`int`每行只存储一个 - 值 - 整行都存储在 v[0] 中。然后你在一个流中写了这个整数，在你的while循环开始处理下一行之前忘记写一个新行。因此，您的输出是一个很大的数字。

```
#include <iostream>
#include <fstream>
#include <sstream>
#include <string>
#include <vector>
using namespace std;

int main()
{
    istringstream inFile("text.txt");
    string line;
    vector<vector<int> > vector_container;

    while(getline(inFile, line))
    {
        istringstream meh(line);
        char n;
        vector<int> v;

        while(meh >> n)
            v.push_back(static_cast<int>(n)-48);

        vector_container.push_back(v);
    }
    // this would output your numbers the way they were
    // stored inside your file
    for(int i = 0; i < vector_container.size(); ++i){
        for(int j = 0; j < vector_container[i].size(); ++j){
             cout << vector_container[i][j];
        }
        cout << endl;
    }

} 
```

这应该按照您预期的方式工作。您将`vector<int>`在`vector<vector<int> >`. 第一个将您的号码存储在一行中，而每个字符将单独存储。后一个向量仅存储行数的向量。当您查看 ASCII 表时，转换应该会自行解释`char`。`int`

# javascript - highcharts 在 addSeries 之后重新调整 yaxis

> ID：12013664
> 
> 赞同：2
> 
> 时间：2012-08-17T21:53:51.410
> 
> 标签：javascript, highcharts

我正在使用 javascript (addSeries) 添加一个系列，当我使用较大的值执行此操作时，yaxis 不会重新缩放。

[http://jsfiddle.net/7YhYT/11/](http://jsfiddle.net/7YhYT/11/)

要复制我们的问题，请选中 Joel Twitter-Followers 旁边的复选框

然后你会看到 y 轴从零变到 85。

然后单击“Joel Twitter-Followers Of Followers”旁边的复选框，轴保持在 85，但如果您调整浏览器窗口的大小，它会自行修复。

我在 highcharts 论坛上问过这个问题，但还没有帮助：

[http://highslide.com/forum/viewtopic.php?f=9&t=19853&p=79468&hilit=yaxis&sid=7f778241b204cae137b1525607c13a99#p79468](http://highslide.com/forum/viewtopic.php?f=9&t=19853&p=79468&hilit=yaxis&sid=7f778241b204cae137b1525607c13a99#p79468)

有任何想法吗？谢谢乔尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T08:09:57.580

不确定您的真正问题是什么，因为您的 jsFiddle 示例对我不起作用。

但这是我类似场景的示例，单击按钮添加了一个新系列 [http://jsfiddle.net/jugal/hb2jj/](http://jsfiddle.net/jugal/hb2jj/)

如果这不是您想要的，您可以在我的小提琴示例中重现您的问题吗？然后回到我身边

# c# - Parallel.Foreach 与 MSMQ

> ID：12013667
> 
> 赞同：1
> 
> 时间：2012-08-17T21:54:06.237
> 
> 标签：c#, .net, task-parallel-library, msmq

我正在尝试对队列中的所有消息在并行 foreach 循环中运行，但出现此错误：

错误：接收消息时未检索到属性正文。确保 PropertyFilter 设置正确。

当我使用 foreach（没有并行）执行相同的循环时，一切正常。

知道我应该怎么做才能解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T22:12:18.677

[根据msdn](http://msdn.microsoft.com/en-us/library/system.messaging.messagequeue.aspx)，看起来您使用的不是线程安全方法

> 只有 GetAllMessages 方法是线程安全的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T22:23:44.810

`Peek()`和`Receive()`（及其变体）*不是*线程安全的。你需要想出一个阻塞机制来避免碰撞。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T10:35:58.283

并行处理不适用于从队列中取出消息，因为它是顺序的并且（如果已配置）是事务性的。

如果您删除 A 和 B，并且对 A 的处理失败，它将返回到队列中 - 但 B 也已被删除？

`GetAllMessages()`将返回所有这些，但不会删除它们。您需要 `Receive()`单独使用每条消息以将其完全从队列中删除。

# c# - Count() 在 IEnumerable 上返回不正确的结果 使用 LINQ 填充

> ID：12013670
> 
> 赞同：2
> 
> 时间：2012-08-17T21:54:12.980
> 
> 标签：c#, visual-studio-2010, linq

首先，我对 LINQ 和 lambda 表达式有一种莫名的好感 :)
所以我使用 LINQ 编写了一个非常简单的代码，它应该根据特定的名称模式从目录中获取文件，对它们进行排序并累积直到总长度累积文件超过某个阈值：

```
IEnumerable<FileInfo> l_allFiles = new DirectoryInfo(l_sDirName).GetFiles().Where(l_fileInfo => ms_pattern.IsMatch(l_fileInfo.Name)).OrderBy(l_fileInfo => l_fileInfo.CreationTime);
int l_nFilesTotal = l_allFiles.Count();
if (nFilesTotal > 0)
{
    long l_nAccumulatedCmdLength = 0;
    IEnumerable<FileInfo> l_selectedFiles = l_allFiles.TakeWhile(l_fileInfo => (l_nAccumulatedCmdLength += l_fileInfo.Length) <= Settings.Default.Threshold);

    int l_nNumOfSelected = l_selectedFiles.Count();
    if (l_nNumOfSelected > 0)
    {
        l_ret = new A { Files = l_selectedFiles };
    }
} 
```

好吧，当所有找到的文件一起不超过阈值时，此代码可以正常工作。
只要不是所有找到的文件都被选中`l_selectedFiles`，在大多数情况下，即使不是空的，也会`l_selectedFiles.Count()`返回**0 。**`l_selectedFiles`在极少数情况下，当返回正确的值时， *A*类中`l_selectedFiles.Count()`的连续调用会返回**0**。 更令人费解的是，调试器始终不是在方法执行后更新值，而是在执行下一条语句后更新。在没有选择所有文件的情况下，值并不总是如预期 的那样......为了完成图片，我使用*Microsoft Visual Studio 2010 Ultimate* on`Files.Count()` ***`l_nAccumulatedLength``TakeWhile()``l_selectedFiles.Count()``l_nAccumulatedLength`
**Windows 7 Professional*和我的项目的目标是*.NET4.0*。****

 ****任何人都可以对这种行为和/或如何解决它给出解释或提示吗？因为我很迷茫，甚至无法想象我是如何调试和解决这个问题的，而社区是我最后的希望。

提前感谢大家的回复和评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T21:57:56.390

您正在修改查询中的变量：

```
long l_nAccumulatedCmdLength = 0;
IEnumerable<FileInfo> l_selectedFiles = l_allFiles
     .TakeWhile(l_fileInfo => (l_nAccumulatedCmdLength += l_fileInfo.Length) <=
                                   Settings.Default.Threshold); 
```

请注意`l_nAccumulatedCmdLength`您的`TakeWhile`条件范围内的变化。

这是一个*非常糟糕的主意*，每次评估时序列都会给出不同的结果。只是不要这样做。我强烈怀疑这是问题的原因。

注意这部分：

> 更神秘的是，调试器总是更新 l_nAccumulatedLength 的值，而不是在执行 TakeWhile() 方法之后，而是在执行下一个 l_selectedFiles.Count() 语句之后。

...很容易解释。`TakeWhile`不会迭代序列 - 它只是构建一个新序列，该序列将被延迟评估。

如果您想获得一致的结果，请使用`ToList`... 但最好不要一开始就修改查询中的变量。如果需要，用于`Aggregate`创建值序列，`Tuple<FileInfo, long>`其中`long`值是“到目前为止的大小”。****

# java - NLP 文本注释存储和访问

> ID：12013684
> 
> 赞同：2
> 
> 时间：2012-08-17T21:55:14.400
> 
> 标签：java, text, nlp, data-mining, information-retrieval

我有大量的文本语料库（大约 1000 万个句子），我想用各种 NLP 工具（POS 标记器、语法解析器、依赖解析器等）对其进行预处理。我需要以某种方式存储由这些工具创建的各种注释层，并从我的 Java 代码中即时访问它们（可能通过提供语料库中文本跨度的开始和结束索引以及注释类型） .

是否已经存在用于快速存储和访问这些注释的软件系统？如果不是，那么存储和访问这些注释的最佳方式是什么？访问速度将是最重要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T22:38:38.803

你可以看看[UIMA](http://uima.apache.org/). 虽然它不是一个存储引擎，但它提供了一个平台，通过在管道中应用各种注释器（可以是标记器、句子拆分器、POS 标记器）将非结构化文本数据转换为更结构化的格式。输出包含文档中带有开始和结束索引的注释（您可以将输出转换为 xml 格式）。因此，您可以将语料库划分为多个文档，通过 UIMA 管道传递它们，并将输出存储在基于文档的存储中，例如 MongoDB。我认为在文档级别访问这些注释更有意义，因为注释的上下文很重要。因此，您可以从 MongoDB 存储中检索这些带注释的文档，并使用开始和结束索引或注释类型（令牌、句子等）访问注释。

# java - 找不到源 JAR 文件 mysql-connector-java-5.1.20-bin.jar 没有源附件

> ID：12013685
> 
> 赞同：1
> 
> 时间：2012-08-17T21:55:16.623
> 
> 标签：java, mysql

我有一个与 MySQL 数据库连接的 Java 程序。我正在尝试调试我的程序，但出现以下错误：

> 找不到源 JAR 文件 C:\Users..\mysql-connector-java-5.1.20-bin.jar 没有源附件。您可以通过单击下面的附加源来附加源：

我添加了一个包，其中包含`mysql-connector-java-5.1.20-bin.jar`一个在包内命名的文件夹`src`。与 DB 的连接已成功完成。

可能是什么问题呢 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T21:58:22.177

如果您需要/想要在调试会话期间进入驱动程序的某些方法，您的 IDE 将需要源代码。在 NetBeans 中，您可以在库配置中添加源。在 Eclipse 中，我认为这也是可用的。看看这里：[Eclipse：通过本地属性将源/javadoc 附加到库](https://stackoverflow.com/questions/300328/eclipse-attach-source-javadoc-to-a-library-via-a-local-property)

# android - 应用程序崩溃时的良好做法

> ID：12013686
> 
> 赞同：3
> 
> 时间：2012-08-17T21:55:23.240
> 
> 标签：android, robustness

我的应用程序目前没有崩溃，但我们正在努力让它变得非常健壮，我们正在做的一件事是跟踪“某些事件”的时间，直到它被用户手动停止。

# 我的预期实施

这就是我计划实施的方式。我打算这样做，所以当他们提交初始“事件”时，它开始计时并在我们的 SQLite 数据库中启动初始时间和事件的其余部分。然后在同一个提交屏幕上会出现一个按钮，用于停止对事件进行计时。我们希望对事件进行准确的时间跟踪。我会在首选项中设置一个标志，表示有一个正在进行的事件和另一个具有其唯一 ID 的首选项。

# 忧虑

所以我担心的是：如果应用程序崩溃或发生了不好的事情，我想给这个人一个选项来更改事件的结束时间。我打算通过以下两种方式之一执行此操作： 1\. 检查应用程序何时再次启动（如果有办法这样做），询问标志是否仍然设置，以及应用程序是否刚刚启动。然后给他们这个选项来编辑。2.如果存在，调用onTerminate方法或android在关闭时使用的*东西*，即使它崩溃了。再说一次，我不知道这是否存在。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T23:03:27.820

使用广播中的状态发出 sendStickyBroadcast(Intent)。在以后的任何时候为粘性广播注册一个空接收器，您将拥有最后一个已知的广播状态。跌了也没关系。因此，您可能会在启动时进行一次广播等。

当应用程序再次启动时，当然是您想要收听的 ON_BOOT_COMPLETED 意图广播。

也不要指望 Android 在崩溃时调用任何特定方法。

一般原则是这样的：如果有重要的东西要保存（包括状态），请立即执行，例如发出 stickyBroadcast 或存储为 SharedPreference。不要等待任何特定的回调或崩溃事件处理。通过立即保存状态信息并处理 ON_BOOT_COMPLETE 或检查 SharedPreferences 中的第一个启动值是否无法处理任何事情。这实际上与校验和没有什么不同。开始您的活动是消息的开始。你也应该有一个消息结束。或事件事件的结束。如果你没有看到它，你就没有成功。只需经常发出最后一个状态，并相应地恢复。

# xna - 如何在 XNA 中通过网络发送图像？

> ID：12013691
> 
> 赞同：0
> 
> 时间：2012-08-17T21:55:44.923
> 
> 标签：xna, xna-4.0, xbox360

制作随机生成的噪声图像，想知道如何将其发送给其他玩家的可能解决方案。

我知道最好的方法是只发送种子，这可能是我将采用的解决方案，但我很好奇是否有一种通过 XNA/C#/Xbox 网络发送图像的好方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:08:14.563

您可以在技术上通过流序列化 Texture2D 并通过网络发送字节数组。然后反序列化另一端的数据。这在诸如带有特殊图片或自定义地图的专用服务器上可能很有用，您希望将它们传递给每个人，而无需让他们去某个地方获取它们。作为记录，在您的情况下，我同意种子是要走的路，如果没有其他原因，只是因为您很幸运能够拥有这些选项，并且发送 int 比字节数组容易得多。话虽这么说，尝试这样的事情：

```
Texture2D image = Content.Load<Texture2D>("test"); //Or rather however you ended up making your texture
MemoryStream stream = new MemoryStream();
image.SaveAsJpeg(stream, image.Width, image.Height);
byte[] data = stream.ToArray(); 
```

然后您可以通过网络传递数据并在另一端对其进行反序列化。

# ios - 更改 UITextView 上的字体（或文本量）会使文本消失

> ID：12013692
> 
> 赞同：2
> 
> 时间：2012-08-17T21:55:51.123
> 
> 标签：ios, uitextview

我有一个 UITextView，我将大量文本分配给（~25 行）。如果我没有针对 textview 定义字体，它工作正常，但是一旦我将字体设置为大于 13 的任何内容，文本就会完全消失（尽管仍然可以滚动）。

另一件事是，如果我手动缓慢键入文本以到达交叉点，则最后一行被分成两部分，继续键入只会产生空白文本。

就好像文本视图只能包含这么多可见文本，一旦达到，文本就会变成空白。

欢迎任何建议。

编辑：实际上将上述答案文本复制并粘贴到文本视图中，然后再添加一行足以使其开始变得不可见。然后，当使用更新的文本（即上面的答案加一行）重新加载文本视图时，它全部不可见。

设置字体大小足以破坏它，只需将 systemFontOfSize: 设置为 14。导致它的实际字体大小取决于文本视图中的文本量。

也使用ARC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T13:20:05.463

所以我建议你在 Xcode 中创建一个新的单视图项目，将一个 UITextView 添加到你的视图中，然后像在主项目中一样操作它。你做错了什么——将字体设置为 nil，有人释放了 textView，或者以其他方式破坏了它。发给它的所有消息都必须在主线程上。在您发送到 textView 的任何对象属性之后添加断言。正如你所看到的，巨大的字体巨大的文字对我来说工作得很好，就像我建议你做的那样。想法是从可行的东西开始，不断将代码从您的主项目添加到测试项目，直到您确切地找到导致问题的原因。

![在此处输入图像描述](../Images/7168d752f0d6a77b010652bd73f94400.png)

# user-interface - 哪些 GUI 库不是面向对象的？

> ID：12013693
> 
> 赞同：2
> 
> 时间：2012-08-17T21:55:54.173
> 
> 标签：user-interface, functional-programming, procedural-programming, imperative-programming

我最近一直在使用 C，并且想要探索编程不仅仅是控制台应用程序。然而，大多数 GUI 库都是面向对象的，很难用 C 等非面向对象的编程语言进行编程。即使是为 C 设计的面向对象的 GUI 库（如 GTK+）也需要大量的样板。因为我在使用这些面向对象的库时遇到了困难，所以我想知道哪些 GUI 库不是面向对象的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T22:16:47.493

我不知道任何不是面向对象的现代 GUI 工具包。OO 只是一种非常有用的编程技术，即使在 C 语言中也是如此。

我可以提到的唯一一个我*认为*不是 OO 的工具包是[Athena](https://en.wikipedia.org/wiki/Xaw)。我并没有真正使用过它，但很久以前确实有一个使用 Athena 的简短 CS 实验室任务。

如果你真的想避免 OO，我想你可以直接使用[xlib 。](https://en.wikipedia.org/wiki/Xlib)

# google-maps - 自定义叠加地图类型和 mapTypeControl

> ID：12013695
> 
> 赞同：2
> 
> 时间：2012-08-17T21:56:05.580
> 
> 标签：google-maps, google-maps-api-3

我已成功将 OSM 作为新的基本地图类型添加到我的 Google Maps API 应用程序中。

接下来我添加了一个新的叠加地图类型，它为地图添加了山体阴影。[https://developers.google.com/maps/documentation/javascript/maptypes?hl=en#OverlayMapTypes](https://developers.google.com/maps/documentation/javascript/maptypes?hl=en#OverlayMapTypes)上关于叠加地图类型的文档说：

*“[...]您可以将地图类型添加到现有的 MapType[...]”*

*“叠加地图类型将显示在它们所附加的任何底图之上。”*

并且*“以下示例与前一个示例相同，只是我们在 ROADMAP 地图类型的顶部创建了一个平铺叠加 MapType：”*

但在代码示例中，叠加地图类型始终显示在您选择的任一地图类型上。

1.  如何使我的山体阴影叠加地图类型仅显示在地图类型“路线图”和我的自定义“OSM”地图类型上？**编辑：**更准确地说：实际上我想知道，是否有一种方法可以像上面的文档建议的那样自动执行此操作。我知道，如何通过收听 maptypeid_changed 事件手动执行此操作。

2.  有没有办法将我的叠加地图类型作为复选框添加到 mapTypeControl，就像在默认卫星地图类型上使用“标签”或在路线图类型上使用“地形”一样？ **编辑：**直到几天前，上面的官方文档提出了一种方法来做到这一点，但没有准确描述它并且链接的例子被破坏了（404-link）。您的用户在这里发现了同样的问题：[Google maps api: Customizing the MapTypeControl for separate map overlays](https://stackoverflow.com/questions/6169555/google-maps-api-customising-the-maptypecontrol-for-separate-map-overlays)

**编辑：** 我在下面发布了我当前解决方案的 jsFiddl。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T22:09:46.010

好吧，看起来没有本地方法，将覆盖地图类型绑定到基本地图类型或使用谷歌地图类型控件进行覆盖地图类型。

**所以这是我最终所做的，以解决这个问题：http:** [//jsfiddle.net/lejared/720L7wu0/3/](http://jsfiddle.net/lejared/720L7wu0/3/)

```
var ReliefCtrl = {/* see fiddle */}; 
```

我已经构建了一个自定义控件（具有原生 Google 地图控件的外观）。此控件切换我的叠加地图类型（山体阴影）。您可以定义适合此叠加地图类型的基本地图类型数组。如果选择了合适的底图类型，则控件将自动显示/隐藏自身。

*2017-02-01: Updates fiddle to match new native look of googles map controls.*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T18:14:18.683

你的问题有两个部分：

1.  要仅在某些地图类型处于活动状态时自动显示自定义叠加层，您需要监听对象`maptypeid_changed`上的事件`map`。您必须在该事件侦听器中添加/删除您的叠加层。

2.  目前没有办法以分层方式将您自己的叠加层/地图类型添加到默认地图类型控件。有关更多详细信息，请参阅并加注此问题：[http ://code.google.com/p/gmaps-api-issues/issues/detail?id=2490](http://code.google.com/p/gmaps-api-issues/issues/detail?id=2490)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T18:28:19.977

**问题 1.)**我创建了选择 ROADMAP 的示例，您可以查看特定的 overlayMapType（并使用其他模式隐藏它），复制并粘贴到您的 test.html，查看并享受！希望您可以对其进行编辑以满足您的需求：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Google Maps JavaScript API v3 Example: Overlay MapTypes</title>
    <link href="https://developers.google.com/maps/documentation/javascript/examples/default.css" rel="stylesheet">
    <script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script>

      function CoordMapType(tileSize) {
        this.tileSize = tileSize;
      }

      CoordMapType.prototype.getTile = function(coord, zoom, ownerDocument) {
        var div = ownerDocument.createElement('div');
        div.innerHTML = coord;
        div.style.width = this.tileSize.width + 'px';
        div.style.height = this.tileSize.height + 'px';
        div.style.fontSize = '10';
        div.style.borderStyle = 'solid';
        div.style.borderWidth = '1px';
        div.style.borderColor = '#AAAAAA';
        return div;
      };

      var map;
      var chicago = new google.maps.LatLng(41.850033,-87.6500523);

      function initialize() {
        var mapOptions = {
    zoom: 4,
    center: new google.maps.LatLng(-33, 151),
    mapTypeControl: true,
    mapTypeControlOptions: {
      style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
    },
    zoomControl: true,
    zoomControlOptions: {
      style: google.maps.ZoomControlStyle.SMALL
    },
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }

        map = new google.maps.Map(document.getElementById('map_canvas'),
                                          mapOptions);

        // Insert this overlay map type as the first overlay map type at
        // position 0\. Note that all overlay map types appear on top of
        // their parent base map.
        map.overlayMapTypes.insertAt(0, new CoordMapType(new google.maps.Size(256, 256)));

        // we check mapType when it is changing
        google.maps.event.addListener( map, "maptypeid_changed", function( evnt ) {
            if(map.mapTypeId === "roadmap") {
                // show my custom map layer - but only if its not already there
                // note: you could also check more specifily your map type here
                if(map.overlayMapTypes.getLength() == 0) {
                    map.overlayMapTypes.insertAt(0, new CoordMapType(new google.maps.Size(256, 256)));
                }
            } else {
                // if something else, remove it 
                // note: you could also check more specifily your map type here, but for now
                // we just check if something is already there
                if (map.overlayMapTypes.getLength() > 0){
                    map.overlayMapTypes.removeAt(0);
                }
            }
        });     

      }

    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width: 640px; height: 480px;">map div</div>
  </body>
</html> 
```

**问题 2.)**尝试但不可能（高度保护），改用谷歌自定义地图控件 - 这似乎是唯一的选择:(

[https://developers.google.com/maps/documentation/javascript/controls#CustomControls](https://developers.google.com/maps/documentation/javascript/controls#CustomControls)

**编辑：**

您是否尝试过将 google 路线图类型添加为自己的基础层，这样您就可以像本例中一样给它自己的名称（查看右上角的选择）：[https ://google-developers.appspot.com/maps/documentation/javascript/examples /maptype-base?hl=fi](https://google-developers.appspot.com/maps/documentation/javascript/examples/maptype-base?hl=fi)然后您将在显示 CoordMapType 网格（或您想要的覆盖图）的那个谷歌地图上添加覆盖图（如我的示例中）。这样你还不会得到那个复选框，但至少你可以在普通的谷歌地图控制器中用**自己的选择和名称**查看它？我现在没有时间测试这个理论，因为我在工作哈哈。:)

但基本上你可以完成然后下拉在哪里

1.  地图（谷歌路线图）
2.  我的图层（谷歌路线图在它上面的覆盖图在哪里，或几个）？

或者，您可以尝试使用 console.log(map); 并尝试找到更多的方法，而不仅仅是：

```
CoordMapType.prototype.name = 'My base layer';
CoordMapType.prototype.alt = 'My base layer map type'; 
```

..如果这已经创建为基础层选择，则可能在某个地方隐藏了该复选框选项。那些复选框的东西必须总是覆盖地图选择切换。

# jquery - 两个脚本之间的 jQuery 干扰

> ID：12013706
> 
> 赞同：0
> 
> 时间：2012-08-17T21:57:57.857
> 
> 标签：jquery, html, magento

我正在使用 2 个不同的脚本。一个用于菜单，一个用于我要添加的灯箱。

在 head 部分声明了两个脚本，但我不能同时让两个脚本工作。我知道这是因为我试图同时使用两个不同的 jQuery 版本，但是有没有人有办法解决这个问题。

```
<script type="text/javascript" src="js/custommenu.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script> 
```

第一个用于我的自定义菜单，第二个用于我从[Kyle Schaeffer's Blog](http://kyleschaeffer.com/tutorials/lightbox-jquery-css/)获得的灯箱脚本。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T22:01:27.617

像这样重新排列您的页眉

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="js/custommenu.js"></script> 
```

并尝试使用单个“jquery.min.js”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T22:55:31.010

1.  Please list **all** the JS files you're loading into this page. List them in the same order you load them please.

2.  Try loading only one version of jQuery and load it before all other scripts

3.  If you *really* need to use two version if jQuery on one page, you have to put one of them into noConflict-mode ( [http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/) ). But I then you'll have to change your script so that it will not user `$` but the noConflict-variable instead (see jQuery docs).

# java - Servlet 将响应转发给调用者/上一页

> ID：12013707
> 
> 赞同：6
> 
> 时间：2012-08-17T21:58:09.443
> 
> 标签：java, jakarta-ee, servlets, servlet-3.0

我正在尝试将 servlet 响应转发到它来自时的同一页面（又名：上一页，或“servlet”调用者）。

我已经看到了很多答案（例如[this](https://stackoverflow.com/questions/5274869/getting-the-url-of-the-calling-page-java)和[this](https://stackoverflow.com/questions/8592929/how-to-get-the-previous-page-url-from-request-in-servlet-after-dispatcher-forwar)），但仍然无法使其发挥作用。

我通常执行以下操作来将 servlet 的响应重定向到另一个页面：

```
request.getRequestDispatcher("MyNewPage").forward(request, response); 
```

但是我尝试将“MyNewPage”更改为我认为作为解决方案的其他选项：

```
request.getRequestDispatcher((String)request.getAttribute("javax.servlet.forward.request_uri")).forward(request, response);
request.getRequestDispatcher(request.getHeader("referer")).forward(request, response); 
```

和其他选项，不能让它工作。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-17T22:56:35.840

首先`request.getHeader("referer")`返回一个完整的 URL，但你必须去掉它，`http://server[:port]/`因为你传递给 request.getRequestDispatcher() 的内容被添加到应用程序上下文中，如下所示：

```
/NameOfApp/http:/localhost:8084/NameOfApp/test.jsp 
```

这不是您想要的，因为您只需要将以下内容传递给调度程序方法：

```
test.jsp 
```

如果我们从头开始，第一个请求就从这个 URL 开始：

```
http://localhost:8084/RequestDispatcher/test.jsp 
```

转发有效，但是当您第二次向 Servlet 发出请求时，Servlet 将转发给自己。因此，您将进入一个循环，其中 Servlet 调用自身。为什么会发生这种情况？由于您从表单中调用 Servlet，这意味着您的浏览器地址框中的 URL 地址将在第一次请求后更改为您的 Servlet 的地址。

```
http://localhost:8084/RequestDispatcher/NewServlet 
```

Servlet 会将请求转发回 JSP 页面，浏览器将仅显示该请求，但浏览器地址框中的 URL 仍将是包含 Servlet 而不是 JSP 页面的 URL：

```
http://localhost:8084/RequestDispatcher/NewServlet 
```

因此，下次您点击提交时，Servlet 将尝试将请求转发给它自己。如果我是你，我会使用重定向。它似乎更适合您的目的：

```
response.sendRedirect(request.getHeader("referer")); 
```

这将始终更改浏览器地址框中的 URL 并防止 Servlet 循环。这将对请求参数产生影响，但您始终可以将它们添加到重定向 URL（如果它不是敏感信息）或将它们存储在会话中，直到您在重定向将发出的下一个第一个请求中检索它们。

像 JSF 这样的框架可以帮助您避免这些问题。

允许您使用 forward 的最简单的解决方案是保留调用 Servlet 的 JSP(viewid) 的表单中的隐藏参数，而不是使用 request.getHeader("referer")。不过，您需要检查循环，因为有人可能会故意更改该值以强制您的 Servlet 容器循环并最终使 VM 崩溃。但是您可以只使用请求属性来记录链中的前一个请求，如果相同，则以错误响应。因此，在 servlet 中，您将使用隐藏字段值来决定转发到的位置：

```
request.getRequestDispatcher(request.getParameter("viewid")).forward(request, response); 
```

在您的 JSP 中：

```
<input type="hidden" name="viewid" value="test.jsp"> 
```

我认为这将满足您的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-21T09:36:26.720

更好的策略是在请求中添加调用者属性。这样在处理完被调用者 servlet 后，它就可以将其请求转发回调用者。

就像是，

**呼叫者**

```
request.setAttribute("caller", "/page/Foo.jsp"); 
```

**被调用者**

```
String uri = (String)request.getAttribute("caller");
getServletContext().getRequestDispatcher(uri).forward(request, response); 
```

或者您可以尝试在会话中添加呼叫者并在转发后将其删除。

# java - JList 太宽？

> ID：12013709
> 
> 赞同：0
> 
> 时间：2012-08-17T21:58:10.117
> 
> 标签：java, swing

我正在尝试将 JList 添加到我的布局（2 列布局）。添加后，它会使其整个列占据父 JFrame 的整个宽度：

```
LwjglCanvas c = new LwjglCanvas(blah);
c.getCanvas().setMaximumSize(new Dimension(480, 800)); // explicit width

Box h = Box.createHorizontalBox();
h.add(c.getCanvas());
Box v = Box.createVerticalBox();
h.add(v);
JList list = new JList(mDefaultListModel); // plz use remainder width
v.add(list);

JFrame frame = new JFrame();
frame.setMinimumSize(new Dimension(800, 800));
frame.add(h);
frame.pack();
frame.setVisible(true); 
```

因此，添加了 JList 后，右列将扩展到 JFrame 的整个宽度。我尝试将 JList 包装在 JScrollPane 中，但随后我的创建似乎挂起，并且布局从未完成。

这样做的正确方法是什么？

谢谢

- - - 更新 - - - - - - -

我给 JList 一堆 String 实例作为它的数据。字符串恰好很长。看起来正在发生的事情是 JList 正在使自己与它必须呈现的最长字符串一样宽，而忽略所有其他布局参数。理想情况下，它只会水平滚动，而不是增长到必要的最大可能宽度。

- - - 更新 - - - - - - -

终于搞清楚是怎么回事了。指定 JFrame 的大小似乎导致了这种行为。一旦我删除了该行，JList 就开始按预期呈现。将它包装在 JScrollPane 中，现在也可以使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T23:51:33.217

在布局中添加胶水。胶水将占据组件未使用的其余面板宽度。因此，将这行代码放在您想要占用面板中其余空间的位置：

```
h.add(Box.createHorizontalGlue()); 
```

此外，正如问题评论中所述，使用 BoxLayout 您不需要任何定位信息。所以你可以简单地使用这个：

`h.add(someOtherPanel);`

而不是这个：

`h.add(someOtherPanel, BorderLayout.WEST);`

# c++ - 如何编写通用函数来计算递归组合

> ID：12013716
> 
> 赞同：-1
> 
> 时间：2012-08-17T21:58:42.487
> 
> 标签：c++, generics, recursion, combinations

例如：

<1,2,3> 作为函数 comb 的输入以获得 2 个元素的组合将输出结果 <<1,2>,<1,3>,<2,3>>，作为同一函数的输入将得到 <<<1,2>,<1,3>>,<<1,3>,<2,3>>,<<1,2>,<2,3>>，它们作为输入相同函数将得到....

逻辑是一样的，只是类型改变了，所以可以通用。我试着写这样的东西：

```
template<typename V>
vector<vector<vector<V>::const_iterator>> comb(const vector<V>){
   ....

   while(next_combination(...))
   vector<vector<vector<V>::const_iterator>> results;
   return results;
}

vector<string> input
comb(comb(comb(input))); 
```

但是编译器一直抱怨无法推断出返回值的类型。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:37:24.597

也许以下内容会有所帮助：

```
template <typename T>
vector<vector<T> > comb(vector<T> v)
{
    vector<vector<T> > result;
    // may want to sort the input vector before iterating over the combinations
    do {
        result.push_back(v);
    } while (next_combination(...));
    return result;
} 
```

注意变化：

*   的返回值`comb`是向量的向量
*   的参数`comb`不是`const`因为`next_combination`改变它
*   里面有很多向量的复制`comb`；所有的复制似乎都是必要的

# php - 处理照片大小调整 PHP

> ID：12013718
> 
> 赞同：0
> 
> 时间：2012-08-17T21:58:45.993
> 
> 标签：php, file-upload

我有一个带有上传表单的应用程序，允许用户上传照片。可能有 1000 人在线，每个人都可以上传自己的照片。

我的问题是：我应该在上传后立即调整上传照片的大小，还是创建 cron，它会在晚上调整所有上传照片的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T22:07:28.023

在 PHP 中，调整照片大小并不是一个非常缓慢的过程，当然要等待服务器的资源（我猜图像的大小可能是一个因素 - 给定 10MB+ 的图像）。

我完全建议在上传后立即调整大小。这样做不会在凌晨 3 点或每当您的 cron 运行时建立队列，并且您还将受益于向刚刚上传它的用户显示调整大小的图像（可能是缩略图、半页大小等） - 漂亮用户体验中的“必须”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T22:02:22.427

cron 作业是一项极好的资产，因为您不会因为可以在凌晨 4 点运行它而对您的服务器征税。

但是，在 cron 作业完成之前下载该图像的用户浏览器呢？:( 想想你的用户，让服务器足够快以立即调整图片大小。另外，你可能也想考虑优化照片！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T22:03:55.710

您可以为此使用 cron，但您的用户必须等待很长时间才能处理好图片。我建议使用第二台服务器和一个等待列表，您可以在其中放置所有需要调整大小的图片。第二台服务器将图片逐个处理（1 分钟 crontab）并将它们放回第一台服务器。这样您的用户就不必等待这么长时间，并且您的第一台服务器不会因需要调整大小的图像而过载。

如果您只想使用一台服务器，您可以添加一个 cron 并使用 nice、ionice 和 imagemagick 调整图片大小。

在处理图像时，您可以为图像放置一个占位符，让您的访问者知道他们的图像正在被处理。

# batch-file - 批处理文件列出目录中的所有文件夹并输出到txt

> ID：12013720
> 
> 赞同：5
> 
> 时间：2012-08-17T21:58:53.580
> 
> 标签：batch-file

我正在尝试创建一个批处理文件来解析目录 Z:\（不包括子文件夹），该目录是一个映射的网络驱动器，用于提供名称包括“COMPANY_*”的所有文件夹，并使用完整路径输出这些文件夹名称文本文件。

文本文件将保存到运行程序时引用的程序文件夹位置。

例如

目录：

*   Z:\Company_001
*   Z:\定义
*   Z:\公司_002
*   Z:\Company_101

文本文件：

*   Z:\Company_001
*   Z:\Company_002
*   Z:\Company_101

我开始尝试，但不知道我在做什么，需要在 10 台计算机上运行这批，所以不想造成任何问题。

```
dir "Z:\" /b >d:\test.txt
FOR /F "delims=" %%a in (test.txt) do @echo Z:\%%a>>output.txt
del "d:\test.txt"
start C:\Windows\System32\notepad.exe "d:\output.txt"
pause 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T22:29:59.107

```
cd Z:\
for /D %%A IN ("COMPANY_*") DO echo "Z:\%%A">>D:\output.txt 
```

如果需要，您可以添加调用以使用记事本打开文件。你现在拥有的东西会起作用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-17T22:38:29.720

看起来您无需中间过滤即可获得所需的文件夹：

```
dir Z:\Company_* /b /a:d >output.txt 
```

# java - 向控制台应用程序发送命令？

> ID：12013721
> 
> 赞同：1
> 
> 时间：2012-08-17T21:58:57.507
> 
> 标签：java, command, console-application

我想验证一些东西，因为在我看来它是有道理的，但在 Java 中，它不起作用。

我正在尝试通过我的应用程序运行另一个 Jar 文件。准确地说，是一个 Minecraft 服务器。我已经掌握了所有基础知识（使用`ProcessBuilder`、使用参数执行、等待退出代码等），但有一件事我无法弄清楚。向应用程序发送命令。这是我`CommandLineSender`课程的一部分：

```
public class CommandLineSender extends Thread {

    private BufferedWriter output;
    private InputStream source;  // Set to System.in when creating the object
    private boolean stopRequested;

    public CommandLineSender(Process sendTo, InputStream source) {
        this.output = new BufferedWriter(new OutputStreamWriter(sendTo.getOutputStream()));
        this.source = source;
        System.out.println("Source InputStream initiated: " + source.toString());
        this.stopRequested = false;
    }

    @Override
    public void run() {
        System.out.println("Run called.");
        Scanner cmdScanner = new Scanner(source);
        while (cmdScanner.hasNextLine() && !stopRequested) {
            System.out.println("Has next line");
            String msg = cmdScanner.nextLine();
            write(msg);
            System.out.println("Wrote: " + msg);
        }

        // Close the scanner and BufferedWriter

        System.out.println("Closed.");

    }

    // Other various methods

    protected void write(String msg) {
        try {
            output.write(msg);
        } catch (IOException e) {
            System.err.println("Unable to write message because of an unhandled IOException: " + e.getMessage());
        }

    } 
```

我得到的输出是这样的：

```
(Default Minecraft server output)

help  // My command
Has next line
Wrote: help 
```

这可能无关紧要，但我正在使用以下参数执行我的服务器：

```
java -Xmx1024M -Xms1024M -jar (path to server jar) nogui 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T22:19:07.760

下面是一个 Java 程序示例，它通过其进程操作 C 程序（您也可以操作 Java 程序）。这是我几年前写的。在 C 或 Java 中有接收程序，在 Java 中有发送程序。看一看：

**C 接收器**

```
#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>

int main() {

    char message[50] = {0};

    while ( true ) {

        gets( message );
        printf( "string \"%s\" received...\n", message );

        // forces the streams to flush
        fflush( stdout );
        fflush( stderr ); // the java program will not write in the error stream, so this line (for this example) is irrelevant

        // if the java program send a "end" command (message here) it will break the while
        if ( !strcmp( "end", message ) ) {
            break;
        }

    }

    return 0;

} 
```

**Java Receiver（相当于C程序）**

```
import java.util.*;

public class MessageReceiver {

    public static void main( String[] args ) {

        Scanner scan = new Scanner( System.in );

        while ( true ) {

            String message = scan.nextLine();
            System.out.printf( "string \"%s\" received...\n", message );

            System.out.flush();
            System.err.flush();

            if ( message.equals( "end" ) ) {
                break;
            }

        }

    }

} 
```

**Java 发件人**

```
import java.io.*;
import java.util.*;

public class Sender {

    /**
     * @param args the command line arguments
     */
    public static void main( String[] args ) {
        new Sender().execute();
    }

    public void execute() {

        try {

            // executes the command (the C executable)
            Process process = Runtime.getRuntime().exec( "MessageReceiver.exe" );

            // or, executes the MessageReceiver class
            //Process process = Runtime.getRuntime().exec( "java MessageReceiver" );

            // create the stream gobblers, one for the input stream and one for the
            // error stream. these gobblers will consume these streams.
            StreamGobbler sgInput = new StreamGobbler(
                    process.getInputStream(), "input" );
            StreamGobbler sgError = new StreamGobbler(
                    process.getErrorStream(), "error" );

            // creates a thread for each stream gobbler and start them
            new Thread( sgInput ).start();
            new Thread( sgError ).start();

            // creates a PrintWriter using the process output stream
            PrintWriter writer = new PrintWriter( process.getOutputStream() );

            // preparing to read user input
            Scanner scan = new Scanner( System.in );

            while ( true ) {

                System.out.println( "Send a command: " );
                String command = scan.nextLine();

                // sends the command to the process
                // simulating an user input (note the \n)
                writer.write( command );
                writer.write( "\n" );
                writer.flush();

                // if the command is end, finalizes this app too
                if ( command.equals( "end" ) ) {
                    break;
                }

            }

        } catch ( IOException ioe ) {
            ioe.printStackTrace();
        }

    }

    /**
     * Threads to consume the process streams.
     * Based in the implementation presented here:
     * http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html?page=1
     *
     * @author David Buzatto
     */
    private class StreamGobbler implements Runnable {

        private InputStream is;
        private String type;
        private FileWriter fw;

        public StreamGobbler( InputStream is, String type ) {
            this.is = is;
            this.type = type;
        }

        public StreamGobbler( InputStream is, String type, File file )
                throws IOException {
            this.is = is;
            this.type = type;
            this.fw = new FileWriter( file );
        }

        @Override
        public void run() {
            try {
                InputStreamReader isr = new InputStreamReader( is );
                BufferedReader br = new BufferedReader( isr );
                String line = null;
                while ( ( line = br.readLine() ) != null ) {
                    if ( fw != null ) {
                        fw.write( line + "\n" );
                    } else {
                        System.out.println( type + ">" + line );
                    }
                }
                if ( fw != null ) {
                    fw.close();
                }
            } catch ( IOException ioe ) {
                ioe.printStackTrace();
            }
        }
    }

} 
```

要运行代码，请编译 C 程序或 MessageReceiver 类。将可执行文件放在 Sender 类的同一文件夹中，编译并运行。“结束”命令将结束接收方和发送方。

也看看这篇文章：[http ://www.javaworld.com/jw-12-2000/jw-1229-traps.html](http://www.javaworld.com/jw-12-2000/jw-1229-traps.html)

# java - Spring 中基于注释的布线仅适用于集合的一部分

> ID：12013722
> 
> 赞同：0
> 
> 时间：2012-08-17T21:59:01.203
> 
> 标签：java, spring

我正在开发一个项目，其中预先存在的代码有很多手动设置，并在 main 方法中完成了类的连接——这似乎是 Spring 擅长替换的完美示例。有几个对象共享一个父类 Widget。每个小部件都包含一个它所依赖的其他小部件的列表。

例如，如果您要在代码中编写此代码，它将类似于：

```
class Widget{ void addDependency(Widget w}{..}}

class A extends Widget{...}
...
class G extends Widget{...}

A a = new A();
...
G g = new G();

a.addDependency(b);
b.addDependency(c);
b.addDependency(d);
b.addDependency(f);
c.addDependency(g); 
```

您显然不能只拥有一个@Autowired 小部件集合，因为那样您将获得所有小部件的集合。@Autowired 有没有办法过滤掉它，所以它只获取某些子类型的实例？

有两种我不喜欢的方法。第一种是连接所有非小部件 bean，并在加载上下文后将 Widget 集合连接在一起。另一种方法是使用 @Resource 连接 ApplicationContext 并使用 @PostConstructor 来获取你想要的需要来自ApplicationContext。两者看起来都不优雅，还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T15:59:25.670

我可能会像@Matt 那样做，但我可能会考虑创建一个自定义[BeanPostProcessor](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/beans/factory/config/BeanPostProcessor.html)，但我认为 Matt 的方式更安全。

然后我会创建一个自定义注释：

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.TYPE)
public @interface Dependencies {
    Class<?>[] value();
} 
```

我会将注释放在每个小部件上

```
@Dependencies({WidgetB.class,WidgetC.class})
public class WidgetA extends Widget {
} 
```

然后你会做@Matt bean 查找（你应该检查[Spring 的 BeanFactoryUtils](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/beans/factory/BeanFactoryUtils.html)）从`bean.getClass().getAnnotation(Dependencies.class)`.

代替注释，您可以在 bean 上创建一个属性以在其中列出 deps。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T03:25:21.677

由于您没有包含您在春季使用@PostConstruct 尝试过的示例，这就是我将要做的。

```
@Component
public WidgetBuilderComponent {
    @Autowired
    private ApplicationContext context;

    @Bean
    public A a() {
        return new A();
    }

    @PostConstruct
    public void populate() {
        A a = a();
        for (B b: context.getBeansOfType(B.class).values()) {
            a.addDependency(b);
        }
    }
} 
```

对于其他类型，您将拥有类似的类。如果您需要给定类型的多个实例，只需创建多个 @Bean 方法，并确保在 @PostConstruct 方法中适当地填充每个方法。请注意，像这样的类不能在同一上下文中多次放置。

你总是可以用 FactoryBean + InitializingBean 替换它，它会完成同样的事情，尽管它会更可重用。

另一种选择是仅使用@Component 进行接线，让您的小部件自行构建而不必担心接线。

```
@Component
public WidgetPopulatorComponent {
    @Autowired
    private ApplicationContext context;

    @PostConstruct
    public void populate() {
        for (A a: context.getBeansOfType(A.class).values()) {
            for (B b: context.getBeansOfType(B.class).values()) {
                a.addDependency(b);
            }
        }
    }
} 
```

# ios - 在没有 Segue 的情况下从 UITableViewCell 打开视图控制器

> ID：12013724
> 
> 赞同：1
> 
> 时间：2012-08-17T21:59:05.297
> 
> 标签：ios, uitableview, viewcontroller

我需要在没有 segue 的情况下从 UITableViewCell 打开视图控制器。我不需要代码示例只是概念。我曾尝试调用 UITabBarController 以便我可以使用此单元格从任何视图调用它，但我得到：

> 警告：尝试呈现不在窗口层次结构中的视图！

有人可以帮我弄清楚如何做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T22:52:09.660

你展示了一个视图控制器......

```
- (void)presentViewController:(UIViewController *)viewControllerToPresent
                     animated:(BOOL)flag
                   completion:(void (^)(void))completion 
```

然后用...解雇它

```
- (void)dismissViewControllerAnimated:(BOOL)flag
                           completion:(void (^)(void))completion 
```

# python - django：保存每个页面的最干净的方法

> ID：12013725
> 
> 赞同：0
> 
> 时间：2012-08-17T21:59:06.103
> 
> 标签：python, django

我想跟踪我的 django 网站的所有用户都在做什么。我想通过保存提供给他们的每个 HTML 页面来做到这一点。最简单的方法是什么？我目前正在考虑制作一个装饰器，在提供之前将 HTML 保存到文件中，但这需要在我的所有视图上添加该装饰器，这似乎并不理想。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T22:01:57.550

我相信更好的方法是保存用户所做的查询，因为您始终可以从查询中重新生成 html。然后你可以编写一个中间件来处理所有传入的请求[，根据这里](http://www.djangobook.com/en/beta/chapter16/)并将查询保存到数据库中。如果你真的想保存 html，你可以在`process_response`之后使用该功能进行保存。 [来源](https://docs.djangoproject.com/en/dev/topics/http/middleware/?from=olddocs#process_response)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T22:19:58.840

使用 django 信号。

`request_finished`当 Django 完成处理一个`HttpRequest`在您返回页面的每个视图的末尾发生的信号时，将调用该信号。在这里，您可以访问`params`响应中的集合并按照向用户显示的方式生成页面，或者只是保存`response_object`然后运行批处理以将其离线可视化。

[信号文档](https://docs.djangoproject.com/en/dev/ref/signals/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T22:21:59.000

您可以实现[每个站点缓存](https://docs.djangoproject.com/en/dev/topics/cache/?from=olddocs/#the-per-site-cache)，然后查询缓存以获取您的统计信息。然而，正如其他中间件所发布的那样，这似乎是理想的。

但是 - 请记住，*每个请求*都会调用中间件，因此如果您正在执行诸如 db writes 之类的 i/o 繁重任务，它将对您网站的性能产生负面影响。

# .net - .NET Workflow 4 创建由启用 WCF 的工作流使用的自定义持久性存储

> ID：12013728
> 
> 赞同：2
> 
> 时间：2012-08-17T21:59:15.267
> 
> 标签：.net, wcf, persistence, workflow-foundation-4, workflowservice

我想使用 WF 4 作为我项目的工作流引擎。我使用 WF 的活动是长期运行的（可能会持续数周或数月），因此我希望它使用持久性存储。我还想利用持久的延迟，以便我可以在事后几天发送通知。我的所有研究都为我指明了使用 IIS 中托管的工作流服务和 AppFabric 的方向。

我在本地机器上测试了这个场景，效果很好。我的工作流程持续存在，我的延迟在我想要的时候就开始了。我有一个问题：我公司定义的架构不允许服务层（IIS 中托管的 WCF 服务）直接与数据库层对话。我认为解决这个问题的一个好选择是编写一个自定义实例存储，该存储将通过数据访问层将调用路由到持久性数据库。我可以找到大量通过代码实现自定义实例存储的示例（即，workflowApplication.InstanceStore = customInstanceStore）。但是，启用 WCF 的服务没有代码，我找不到任何可以让我通过 web.config 配置持久性存储的示例。

启用 WCF 的工作流主机是否必须使用直接与数据库对话的内置 SQL 实例存储？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T03:14:58.937

> 我的所有研究都为我指明了使用 IIS 中托管的工作流服务和 AppFabric 的方向。

这才是正确的下坡路。IIS 为 WCF 端点提供服务，而 AppFabric 安装管理持久性、延迟和监视。

> 启用 WCF 的工作流主机是否必须使用直接与数据库对话的内置 SQL 实例存储？

一点也不，实际上您应该做的就是将您的持久性存储类型替换为您在`Web.config`. 因此，在下面的代码片段中，您会看到`SqlWorkflowInstanceStore`-`behavior`将您的类型放在它的位置。您的类型可能会收到一些自定义属性，例如 ，`connectionString`因此您需要对其进行配置。

```
<configuration>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name=”myBehavior”&gt;
          <SqlWorkflowInstanceStore connectionString=”Data Source=myDatatbaseServer;Initial Catalog=myPersistenceDatabase”&gt;
        </behavior>
      </serviceBehaviors>
    <behaviors>
  </system.serviceModel>
</configuration> 
```

# php - 允许网站 URL 中的所有字符存在哪些安全风险？

> ID：12013732
> 
> 赞同：4
> 
> 时间：2012-08-17T21:59:36.547
> 
> 标签：php, security, codeigniter, url

我正在使用[Codeigniter](http://codeigniter.com/) PHP 框架。在其中一个配置文件中，您可以设置允许的 URL 字符：

```
$config['permitted_uri_chars'] = 'a-z 0-9~%.:_\-'; 
```

因此，如果我尝试访问此网址：*website.com/controller/%22quotedString%22*，除非我在允许的字符上附加引号，否则我会收到错误消息：

```
$config['permitted_uri_chars'] .= '"'; 
```

我的应用程序实际上需要在 URL 中允许*所有*奇怪的字符，但我不希望有一个巨大的硬编码字符列表。Codeigniter 警告不要允许所有字符：

> ```
> /*
> |--------------------------------------------------------------------------
> | Allowed URL Characters
> |--------------------------------------------------------------------------
> |
> | As a security measure you are STRONGLY encouraged to restrict URLs to
> | as few characters as possible.  By default only these are allowed: a-z 0-9~%.:_-
> |
> | Leave blank to allow all characters -- but only if you are insane.
> |
> | DO NOT CHANGE THIS UNLESS YOU FULLY UNDERSTAND THE REPERCUSSIONS!!
> |
> */ 
> ```

他们没有确切说明允许所有字符的安全问题。那么有哪些问题呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T22:06:25.557

在您的 URL 中允许所有可能的字符没有固有的安全风险。安全问题取决于您的应用程序如何处理它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T22:07:57.773

看到[这个答案](https://security.stackexchange.com/questions/11234/how-does-hacking-work)。它几乎解释了如果您允许用户做他们想做的任何事情，用户可以做什么:) 基本上，通过在您的 url 中不允许使用 '<' 和 "'"，您可以保护自己免受 XSS 和 SQL 注入的侵害。但是，如果您正确转义并控制一切，我相信允许 URL 中的所有字符是没有问题的。

# maven - Maven artifactID 命名约定的最佳实践（有限制吗？）

> ID：12013735
> 
> 赞同：20
> 
> 时间：2012-08-17T21:59:45.017
> 
> 标签：maven, naming-conventions, nexus, artifactory, archiva

我的团队是 Maven 的新手，我们还没有找到任何关于为我们的项目选择 artifactID 的明确指导。

我知道[命名约定指南](http://maven.apache.org/guides/mini/guide-naming-conventions.html)说 artifactIDs 应该是

> “任何你想要的名字，小写字母，没有奇怪的符号”

**但是我小组中的一些人希望对 groupID和**artifactID都使用反向域名样式。

基于上述指南以及我在中央存储库中看到的所有示例，我认为使用反向域样式 artifactID 是没有意义的，但我不知道这样做实际上是无效的还是只是皱眉. 我隐约记得读过一些关于各种存储库管理器无法有效处理包含句点 (.) 字符的 artifactID 的内容，但我不记得我在哪里读到的，现在找不到了。

Maven artifactID 中允许的字符有哪些规则（如果有）？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-18T17:42:18.887

作为开始，这里有一些处理这个主题的帖子：

# 指针

*   [现在不推荐在 artifactId 中使用 groupId](http://www.mail-archive.com/users@maven.apache.org/msg34557.html)
*   [sonatype 可信约定](http://central.sonatype.org/pages/choosing-your-coordinates.html)

在堆栈溢出！

*   [Maven 工件的命名约定](https://stackoverflow.com/questions/3150003/naming-convention-for-maven-artifacts)

然后，我建议您不要在 artifactId 中使用 groupId。这是多余的;)。

我引用了似乎与您的问题最相关的 sonatype 文档：

# Sonatype 命名约定

> ***groupId***将在所有项目中唯一标识您的项目，因此我们需要强制执行命名模式。它必须遵循包名称规则，这意味着它必须至少是您控制的域名，并且您可以根据需要创建任意数量的子组。例如。org.apache.maven, org.apache.commons 确定 groupId 粒度的一个好方法是使用项目结构。也就是说，如果当前项目是一个多模块项目，它应该将一个新的标识符附加到父级的 groupId。例如。org.apache.maven、org.apache.maven.plugins、org.apache.maven.reporting
> 
> ***artifactId***是没有版本的 jar 的名称。如果你创建了它，那么你可以选择任何你想要的名字，小写字母，没有奇怪的符号。如果它是第三方 jar，则必须在分发时使用 jar 的名称。例如。maven，公共数学
> 
> ***如果您分发版本***，那么您可以选择任何带有数字和点的典型版本（1.0、1.1、1.0.1、...）。不要使用日期，因为它们通常与 SNAPSHOT（每晚）构建相关联。如果它是第三方工件，无论它是什么，你都必须使用他们的版本号，并且看起来很奇怪。例如。2.0、2.0.1、1.3.1

**因此，在您的 groupId*和*您的包名称中使用反向 dns 是一个很好的做法。在 artifactId 中再次使用它们不是。**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-18T10:17:53.907

我认为 groupId 就像 Java 中的包名，artifactId 类似于类名（好吧不是真的），但我认为与类名有关系。在 Maven 中，您通常为模块/项目命名，特别是 artifactId。

[此外，我在这里](http://www.sonatype.com/people/2011/01/maven-tip-project-directories-and-artifact-ids/)找到了有关 artifactId 的一些提示。

# jquery - 如何使用 HTML 表和 jQuery 创建费用表？

> ID：12013739
> 
> 赞同：0
> 
> 时间：2012-08-17T22:00:32.780
> 
> 标签：jquery, html, excel, html-table, spreadsheet

我正在创建一个预算计算器，现在我想让用户建立一个他们的费用表。

表中最初为他们设置了三个：租金、水和电/气。最后一行之后是一个按钮，他们可以单击以在当前最后一行之后添加新行。

这是我的问题。我希望用户能够在我提供的三列中的任何一列中输入他们的费用：双周、每月或每年，因为他们可能只知道其中一个时间段的特定费用，所以我想自动为其他单元格进行计算。

我不知道如何解决这个问题。是否有可用的插件或库来模拟一个 Excel 电子表格，我可以在其中为 COLUMN 定义一个特定的方程，以便输入到该列的任何值都会相应地更新其他列，而不管哪一个（每两周一次，每月，每年）他们使用？

这是我的代码当前快照的[小提琴](http://jsfiddle.net/hcbzQ/)中的一些相关代码：

```
<table class="moneyTable width100" id="expenses">
    <tr>
        <td class="deleteCell fill-white"></td>

        <td class="right-border fill-white width50">
            <h3>Expense Type</h3>
        </td>

        <td class="fill-white">
            <h3>Bi-Weekly</h3>
        </td>

        <td class="fill-white">
            <h3>Monthly</h3>
        </td>

        <td class="fill-white">
            <h3>Annually</h3>
        </td>
    </tr>

    <tr>
        <td class="deleteCell">
            <h4 class="delete"><a class="deleteRow">[x]</a></h4>
        </td>

        <td class="right-border"><input class="expense"
        type="text" value="Rent" width="50"></td>

        <td><input class="expense currency" disabled="disabled"
        placeholder="0" type="text" width="50"></td>

        <td><input class="expense currency" disabled="disabled" placeholder="0" type="text" width="50"></td>

        <td><input class="expense currency" disabled="disabled" placeholder="0" type="text" width="50"></td>
    </tr>

    <tr>
        <td class="deleteCell">
            <h4 class="delete"><a class="deleteRow">[x]</a></h4>
        </td>

        <td class="right-border"><input class="expense" id="titleWater"
        type="text" value="Water" width="50"></td>

        <td><input class="expense currency" placeholder="0"
        type="text" width="50"></td>

        <td><input class="expense currency" placeholder="0"
        type="text" width="50"></td>

        <td><input class="expense currency" placeholder="0"
        type="text" width="50"></td>
    </tr>

    <tr>
        <td class="deleteCell">
            <h4 class="delete"><a class="deleteRow">[x]</a></h4>
        </td>

        <td class="right-border"><input class="expense" id="titleElectric"
        type="text" value="Electric/Gas" width="50"></td>

        <td><input class="expense currency" placeholder="0"
        type="text" width="50"></td>

        <td><input class="expense currency" placeholder=
        "0" type="text" width="50"></td>

        <td><input class="expense currency" placeholder=
        "0" type="text" width="50"></td>
    </tr>

    <tr>
        <td class="deleteCell"></td>

        <td class="right-border">
            <h3><a class="addRow">(Add Row)</a></h3>
        </td>

        <td></td>

        <td></td>

        <td></td>
    </tr>

    <tr>
        <td class="deleteCell fill-white"></td>

        <td class="right-border fill-white">
            <h3>Total Expenses</h3>
        </td>

        <td class="fill-white">
            <h4 id="bwNet"></h4>
        </td>

        <td class="fill-white">
            <h4 id="monNet"></h4>
        </td>

        <td class="fill-white">
            <h4 id="annNet"></h4>
        </td>
    </tr> 
```

* * *

```
$(document).ready(function() {
    $('#expenses input:gt(0)').keyup(function() {
        $(this).closest('td').siblings('td').not(':first').find('input').not(this).val($(this).val());
    });
});

$(document).ready(function () {
    $("a.deleteRow").live('click', function (){
        $(this).parent().parent().insertBefore();
    }); 
    $("a.addRow").live('click', function (){
        $("table.moneyTable tr:last").prev('tr').before("<tr class='bottom-border'><td class='deleteCell'><a class='deleteRow'><h4 class='delete'>[x]</h4></a></td><td class='right-border label'><input class='expense' type='text' width='50' placeholder='(...)' /></td><td><input class='expense currency' type='text' width='50' placeholder='0' /></td><td><input class='expense currency' type='text' width='50' placeholder='0' /></td><td><input class='expense currency' type='text' width='50' placeholder='0' /></td></tr>");
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T23:04:06.290

我从来没有碰到过自动为您自动执行此操作的电子表格脚本。但是这个计算可以通过手动脚本来完成。但是，正确的方法不应该是列的等式。在 keyup 上，应该首先计算整个行的基本年度费用。接下来为每个 td->input 分别设置 .val()。1/52、1/12 和 1/1。当然，第一项基本（年度）费用的计算取决于输入完成的字段（x52、x12 或 x1）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T22:06:43.203

您可以使用此方法：当输入值发生变化时，重新计算所有内容。

```
input.onchange = function () {
   // select all values from rows and calculate total
} 
```

# python - 我应该担心 Python 模板引擎和 Web 框架吗？

> ID：12013741
> 
> 赞同：0
> 
> 时间：2012-08-17T22:00:34.063
> 
> 标签：python, frameworks, web2py, templating, pycharm

我是 C# 和 ASP.NET MVC 开发人员。我已经完成了一些 Python 控制台应用程序，但是对于将 Python 用于 Web 应用程序我还是新手。我读了很多关于 Python 服务器和模板引擎的文章。

但我担心：

*   哪些模板引擎适合哪些 Python 服务器/Python Web 框架？还是应该适合？
*   模板引擎中可能存在安全问题吗？或者我可以选择任何我喜欢语法的人。
*   任何模板引擎都可以将数据*（我的模型、orm 模型）*与控制器及其本身集成吗？这种集成会导致任何安全性、内存问题吗？
*   对任何模板引擎使用 Python 2.x 或 3.x 是否重要？

我知道有`jinja2`，`pytenjin` *（似乎很快*[`pyrazor`](https://github.com/luscoma/pyRazor)），。由于我的 ASP.NET MVC 背景，我已经尝试了所有方法，并且对 pyRazor 感到非常满意。

在我担心之后的最后一个问题：

*   我应该使用哪些模板引擎？
*   用 Tornado 开始开发 的最佳开发环境*（python web 框架、模板引擎）是什么？*

我知道我已经问了很多问题，但是在我投入到实际项目的开发中之前我必须小心。

**编辑评论**：好的，我觉得我需要更具体地说明我在寻找什么。由于许多开发人员在 python web 编程中需要（至少来自其他平台），我需要弄清楚我有哪些开发选项。（IDE、模板引擎、Web 服务器等）以及如何以适当的方式将它们结合起来，以减少开发时间并提高生产力而不破坏安全性。

**更新 1：**我认为我们，来自 VS 和 ASP.NET 世界的开发人员，习惯于将所有东西放在一个盒子里，为开发做好准备。当因为项目需要而使用另一种技术时，我们（至少我）变得偏执。因为我们需要让一切和谐相处。很明显，为 .NET 项目使用 IIS、.NET 和 VS（具有所有高级功能）。

好吧，经过这么多搜索和调查，我决定使用 PyCharm 作为 Django 的 IDE。我希望有一天 PyCharm 能够像支持 Django 一样支持 web2py。

好的，服务器呢？我会让 nginx 或 cherokee 为我工作。

好的，模板引擎呢？我将使用默认的 Django 模板引擎。（我不太喜欢 pyRazor）但是这种方式会更容易找到帮助或请求更多功能。在后期，我可以再试一次 jinja2（在 PyCharm 中你可以更改要在 Django 中使用的模板引擎）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T22:27:47.110

没有终极模板引擎或网络框架。例如，我喜欢[flask](http://flask.pocoo.org/)、 Jinja2 和[SQLAlchemy](http://sqlalchemy.org)的组合。其他人更喜欢[Django](https://www.djangoproject.com/)，它带来了 ORM 和模板引擎。其他人更喜欢[mako](http://www.makotemplates.org/)（也是一个模板引擎）。试试看，看看你最喜欢什么。

当然，您的模板中可能存在安全问题，例如[XSS Attacks](http://en.wikipedia.org/wiki/Cross-site_scripting)，但这不太可能，Jinja2 默认启用例如自动转义，因此您可以输入任何您想要的内容，它会自动转义。

是的，您可以将您的 ORM 模型与模板引擎集成（您可以将`db-instance`and 模型传递给模板），但我不会这样做，只是因为在您的路线中这样做更容易。如果您集成它，则不会有更多的安全/内存问题，就像您在“正常”代码中那样。

Python 版本无关紧要（只要引擎支持它），但我会使用 Python 2.7，因为它带来了 Python 3 的一些很酷的特性，并且它有更多可用的库（并非所有东西都移植到 Python 3） .

# c# - JavaScriptSerializer [ScriptIgnore] 对虚拟属性无效？

> ID：12013745
> 
> 赞同：2
> 
> 时间：2012-08-17T22:01:23.497
> 
> 标签：c#, asp.net-mvc, javascriptserializer

我返回了一个 Json(myObj) 操作结果。myObj 是 Badge 类型

Badge 仅有的两个可能导致序列化程序循环的对象是：

```
public class Badge
{
    public Badge() { }

    public Badge(String Name, String Description)
    {
        this.Name = Name;
        this.Description = Description;
    }

    [ScriptIgnore]
    public virtual BadgeType BadgeType { get; set; }
    [ScriptIgnore]
    public virtual ICollection<User> Users { get; set; }

    public int ID { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public string PrerequisiteCriteriaRef { get; set; }

    //PrerequisiteID

    public static Badge CreateForSeeder(BaseDBContext db, String Name, String Description, int TypeID)
    {
        Badge b = new Badge();
        b.Name = Name;
        b.Description = Description;
        b.BadgeType = db.BadgeTypes.Where(x => x.TypeID == TypeID).FirstOrDefault();
        return b;
    }
} 
```

我赋予了哪个属性，但它根本没有帮助......？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-02-23T15:06:44.980

您应该将`ApplyToOverrides`参数设置`ScriptIgnore`为`true`：

```
[ScriptIgnore(ApplyToOverrides = true)] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-05-02T19:13:43.023

这里的问题是您的`virtual`参数被覆盖到动态创建的类中。在这种情况下，`[ScriptIgnore]`属性也会被覆盖。

这就是为什么您应该使用`[ScriptIgnore(ApplyToOverrides = true)]`, 以使该`[ScriptIgnore]`属性在派生类中有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T07:25:44.333

（[`JavaScriptSerializer`](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)当你使用的时候`return Json`）肯定尊重这个`[ScriptIgnore]`属性。

这是一个证明：

模型：

```
public class User
{
    public Badge Badge { get; set; }
}

public class Badge
{
    [ScriptIgnore]
    public virtual ICollection<User> Users { get; set; }

    public int ID { get; set; }
    public string Name { get; set; }
} 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var badge = new Badge
        {
            ID = 1,
            Name = "badge"
        };
        var user = new User
        {
            Badge = badge
        };
        badge.Users = new[] { user }.ToList(); 

        return Json(badge, JsonRequestBehavior.AllowGet);
    }
} 
```

如果您`[ScriptIgnore]`从 Users 属性中删除该属性，您将收到循环引用错误。

所以我猜你的问题出在其他地方。

但我个人建议您使用视图模型而不是那些`[ScriptIgnore]`属性。

因此，您只需定义一个仅包含给定视图所需的属性的视图模型：

```
public class BadgeViewModel
{
    public int ID { get; set; }
    public string Name { get; set; }
} 
```

然后在您的控制器操作中，您在域模型和视图模型之间进行映射，并将视图模型传递给视图：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        Badge badge = ...
        BasgeViewModel vm = new BasgeViewModel
        {
            Id = badge.Id,
            Name = badge.Name
        };

        return Json(vm, JsonRequestBehavior.AllowGet);
    }
} 
```

如果您厌倦了在控制器中编写映射代码，您只需转到 NuGet 包控制台并键入以下命令：

```
Install-Package AutoMapper 
```

为了充分利用优秀的[AutoMapper](https://github.com/AutoMapper/AutoMapper)库。

# c# - 哪些 .NET 功能允许我“重新加载”和“重新启动”嵌入式服务器？

> ID：12013751
> 
> 赞同：2
> 
> 时间：2012-08-17T22:01:44.673
> 
> 标签：c#, .net, reload

哪些 .NET 功能允许我加载“重新加载”和“重新启动”嵌入式服务器？我不知道如何很好地问这个问题。我正在编写一个需要定期更新附加功能的服务器。我希望它在不同的端口上运行 2 台相同的服务器（为了冗余），然后当我推出新的更改时，关闭其中一台服务器，加载新代码，运行测试，开始将流量转移到新版本，然后开始第二台服务器上的相同过程。

我在想也许 AppDomains 或 MEF 可能是我正在寻找的东西，但对这些技术知之甚少。我想知道 .NET 框架中是否可能还有其他一些我缺少的东西会有所帮助。

有什么建议么？如果我对 AppDomains 或 MEF 不感兴趣，请随时告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T22:26:36.323

我在带有 AppDomains 的 Windows 服务中执行此操作。该服务只有网络 IO 代码，以及下载新版本和实例化应用程序域的代码。所有真正的代码都在一个众所周知且不变的接口后面，该接口具有“处理请求”代码，以及用于长期本地状态的序列化/反序列化机制。

结果是单一服务可以永久运行。当新版本可用并通过了冒烟测试时，它可以简单地更改单个引用（编组/解包的实例），然后嘿：升级。然后它可以卸载旧的应用程序域。

对于冗余（硬件等），我们仍然为此使用多个节点，并在客户端应用负载平衡（尽管您也可以在 NLB 上这样做；我们这次有理由不这样做）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T22:07:24.357

将每个服务器作为单独的进程运行怎么样？您可以在命令行中传入端口号，这样它就可以从磁盘上的一个 exe 运行（在生产中）。

# c# - 有人知道关于将 mef 与控制器一起使用的良好教育示例吗？

> ID：12013756
> 
> 赞同：1
> 
> 时间：2012-08-17T22:02:01.813
> 
> 标签：c#, mvvm, prism, mef, controllers

我正在寻找一个例子来教我在 Silerlight 中使用 MEF 和控制器。

我从 PRISM 示例中看到了 StockTraderRI，但是对于我来说理解程序的所有结构看起来有点困难。

那么您知道有一个网站显示有关 MEF 和控制器的示例示例吗？

# php - 扩展抽象类的类的 PHPUnit 代码覆盖率

> ID：12013758
> 
> 赞同：2
> 
> 时间：2012-08-17T22:02:07.200
> 
> 标签：php, phpunit, abstract-class, code-coverage, xdebug

我`Exception`在自定义命名空间中有一个抽象类，它没有抽象方法。所有方法都显示在其测试中（以标准方式模拟）。使其抽象化的原因并不重要。

然后我有大约 10 个扩展`Exception`但不添加或覆盖任何方法、属性、常量等的类。很明显，它们都应该被覆盖，但它们显示为没有被完全覆盖。我阅读了文档并搜索了一段时间，但没有找到答案。

*   PHP_CodeCoverage 1.1.3
*   PHPUnit 3.6.12
*   PHP 5.4.4
*   Xdebug 2.2.1-5.4-vc9

虽然注释`@codeCoverageIgnore`是一种解决方案，但我想找出为什么会这样，而不是获得 100% 的覆盖率。

UPD：来源。

------------- 抽象类 ----------

```
namespace Jade\Core\Base;

abstract class Exception extends \Exception {
    /**
     * Additional info for exception
     * @var array|null
     */
    protected $info;

    public function __construct($message, array $info = null, $code = 0, \Exception $previous = null) {
        parent::__construct($message, $code, $previous);
        $this->info = $info;
    }

    /**
     * Get the Exception additional info
     * @return mixed
     */
    public function getInfo() {
        return $this->info;
    }
} 
```

------------- 抽象类测试 ----------

```
class ExceptionTest extends \PHPUnit_Framework_TestCase {
    /**
     * @covers \Jade\Core\Base\Exception
     *
     * @group  public
     */
    public function testGetInfo() {
        $info = array('info' => 'test');
        $stub = $this->getMockForAbstractClass('\Jade\Core\Base\Exception', array('message', $info));

        $this->assertEquals($info, $stub->getInfo());
    }

    /**
     * @covers \Jade\Core\Base\Exception
     *
     * @group  public
     */
    public function testConstructWithDefaultInfo() {
        $stub = $this->getMockForAbstractClass('\Jade\Core\Base\Exception', array('message'));
        $this->assertEmpty($stub->getInfo());
    }
} 
```

------------- 扩展抽象类的类 ----------

```
namespace Jade\Core\Exceptions;

class Dict extends \Jade\Core\Base\Exception {
} 
```

![代码覆盖工具输出](../Images/889e4cdc4209ef294ff5e89ec98d1b4d.png)

**更新**

重命名`\Jade\Core\Base\Exception`以避免可能与 \Exception 发生冲突没有帮助（我试过`\Jade\Core\Base\Ixception`）。

使 Exception 类成为常规类，而不是抽象类也没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T08:35:37.820

[Xdebug](http://xdebug.org/)将类声明视为可执行代码，您必须使用该类（上面的'\Jade\Core\Exceptions\Dict'）才能将其显示为已覆盖。由于此类被设计为实例化，因此您必须使用它创建至少一个对象。

正如发布的那样，您的测试没有实例化`Dict`，因此`Dict`实际上没有被涵盖。您需要将模拟对象创建更改为使用`Dict`而不是`\Jade\Core\Base\Exception`.

```
$stub = $this->getMockForAbstractClass('\Jade\Core\Exceptions\Dict', ...); 
```

**笔记**

PHPUnit 和 PHP_CodeCoverage 仅解释 Xdebug 提供的数据，其中有一些极端情况，其中不可执行的代码被视为可执行代码，包括右括号`if`和`else`块，即使您实例化它，类声明也不计为已执行，并声明非执行文件内容之前和之后的现有行。如果您可以创建一个最小的测试用例来演示一个真正的问题，请将其发布到[Xdebug 的问题跟踪器](http://bugs.xdebug.org/my_view_page.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T16:39:47.050

问题完全在于类自动加载。为了开始工作，我必须在引导文件中手动包含带有类源的文件。

# ruby-on-rails - 两个 Rails 模型都与第三个模型有 habtm 关系

> ID：12013765
> 
> 赞同：0
> 
> 时间：2012-08-17T22:02:34.663
> 
> 标签：ruby-on-rails, model, has-and-belongs-to-many

当它适用于多个模型时，我有一个关于 has 和 belongs to many 的问题。我已经看到了其他几个关于 habtm 多个模型的类似问题，但没有一个完全像这样（它们通常适用于两个模型，而不是三个）。

假设我有以下课程：

*   学生们
*   俱乐部
*   房间

学生 habtm 俱乐部——学生可以加入多个俱乐部，并且俱乐部有多个学生。

房间 habtm 俱乐部——一个房间可能有多个俱乐部使用它，一个俱乐部可能使用多个房间。

学生和房间之间没有直接关系。

我认为在同一个类（Club 类）中使用两个 habtm 关系没有任何问题，但我可能会遗漏一些细微之处。

```
class Student < ActiveRecord::Base
  has_and_belongs_to_many :clubs
end

class Clubs < ActiveRecord::Base
  has_and_belongs_to_many :students
  has_and_belongs_to_many :rooms
end

class Rooms < ActiveRecord::Base
  has_and_belongs_to_many :clubs
end 
```

我假设在这种情况下，我也可以在一个或两个关系上使用 :through 。

1.  是否有任何已知问题？
2.  Rails 中是否还有其他一些我没有想到的模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T22:44:55.693

您发布的是针对此的正确和最佳设计。

room 和 student 之间没有相似之处，所以多态是不合适的，并且关系是正确的。

# vb.net - 使用自定义插件时 Powerpoint 不关闭

> ID：12013768
> 
> 赞同：2
> 
> 时间：2012-08-17T22:02:36.780
> 
> 标签：vb.net, vsto, add-in, powerpoint, upnp

我目前正在为 Powerpoint 2010 编写应用程序级插件，我的问题是当我关闭应用程序时，进程仍保留在内存中。我只在给定时间打开一个 Powerpoint 实例。

我认为问题在于我处理插件中对象的方式，但我找不到问题所在。也许我需要做一些特别的事情来妥善处理它们？

在我的插件中，我使用以下对象。类型中带有“UPnP”的那些是从英特尔的 UPNP 库中实例化的。这些指令在我的 Ribbon1 类中，在任何函数或 subs 之前。

```
Public dispositivo As UPnPDevice
Public servicio As UPnPService
Public WithEvents temporizador As Timers.Timer
Public WithEvents aplicacion As New Application
Public presentacion As Presentation
Public presentacionencurso As SlideShowView
Public diapositiva_actual As Slide
Public notas As SlideRange
Public puntero As Shape 
```

我已经在谷歌上寻找答案，但没有任何结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:04:53.553

您需要处理`ThisAddIn_Shutdown`并正确处置所有 COM 句柄（*事件、RCW 等*）和其他非托管资源。

阅读[有关正确处理 COM 对象的参考资料](http://www.add-in-express.com/creating-addins-blog/2008/10/30/releasing-office-objects-net/)和[有关关闭最佳实践的 MSDN 帖子](http://msdn.microsoft.com/en-us/library/office/ee720183.aspx)。

如果**Powerpoint**继续运行，则说明您没有正确释放所有 COM 句柄。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T17:19:28.700

当您声明变量“应用程序”时，您可能正在创建一个新的 Powerpoint 实例：

```
Public WithEvents aplicacion As New Application 
```

这些事件都应该在 ThisAddIn 模块中可用（使用编辑器中 ThisAddIn 文档选项卡下的下拉菜单），您始终可以使用“Globals.ThisAddIn.Application”引用 Powerpoint 应用程序，因此您可能想要这样做：

```
Public aplicacion as Microsoft.Office.Interop.PowerPoint.Application = Globals.ThisAddIn.Application 
```

布埃纳苏尔特！

# android - Android - 如何通过 XML 编辑图像的大小以用作图标

> ID：12013769
> 
> 赞同：2
> 
> 时间：2012-08-17T22:02:52.857
> 
> 标签：android, xml, user-interface, drawable

我有一个大图像，最终将用作操作栏的图标。所以，我想在那之前缩小它的大小。

我怎样才能通过 XML 做到这一点？

样式.xml：

```
<style name="AppTheme" parent="android:style/Theme.Holo.Light">
    <item name="android:actionBarStyle">@style/actionBarStyle</item>
</style>

<style name="actionBarStyle" parent="android:style/Widget.Holo.Light.ActionBar">
    <item name="android:background">@drawable/shape_gradient_action_bar</item>
    <item name="android:displayOptions">showHome</item>
    <item name="android:icon">@drawable/icon</item>
</style> 
```

图标.xml：

```
<bitmap xmlns:android="http://schemas.android.com/apk/res/android" 
    android:src="@drawable/ford_dtect_logo_on_white"
    android:width="50dp"    -- Doesn't work
    android:height="50dp" > -- Doesn't work
</bitmap> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T22:17:48.387

你不能。您将必须创建所需大小的图像。

正如您[在文档](http://developer.android.com/guide/topics/resources/drawable-resource.html#Bitmap)中看到的那样，没有`width`任何`height`类型的属性。

一种可能是使用`android:gravity="fill"`，但我不保证这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T22:06:24.617

正如我在下面评论的那样，我认为您不能通过 xml 设置可绘制对象的大小。这限制了您在视图中分配它时必须调整它的大小。

```
android:layout_width="50dp"
android:layout_height="50dp" 
```

# c# - IIS7 应用程序中的 WMI 自定义性能标记的权限问题

> ID：12013771
> 
> 赞同：2
> 
> 时间：2012-08-17T22:03:12.580
> 
> 标签：c#, iis-7, wmi, perfmon

我在获取权限以允许我的应用程序（在 IIS7 AppPool 中运行）删除/添加性能计数器类别及其数据时遇到问题。我有这样的代码：

```
if (!PerformanceCounterCategory.Exists(CategoryName))
{
    var counters = new CounterCreationDataCollection();
    var opsIn = new CounterCreationData
    {
        CounterName = "Test Counter",
        CounterHelp = "Test Counter Help",
        CounterType = PerformanceCounterType.RateOfCountsPerSecond32
    };
    counters.Add(opsIn);

    PerformanceCounterCategory.Create(CategoryName, "Service Layer Instrumentation",
                                      PerformanceCounterCategoryType.SingleInstance,
                                      counters);
} 
```

目的是在尚未创建它们的系统上创建性能计数器，因此我不受静态安装程序行为的约束（我希望能够轻松更改计数器）。到目前为止，当它起作用时，它运行良好。

当我以管理员身份在可执行文件中运行此代码时，没有问题。但是，当我在 IIS 服务中运行它时，AppPool 没有执行类别更改的正确权限。我知道一个事实是可以让 WMI 权限正常工作，因为我之前做过一次测试服务器的演示......但那是几个月前，我很累，而且是最后一分钟。整个事情一片模糊。现在我无法重现我的结果，因为我要回去尝试正式化安装过程以包括必要的安全更改。

谷歌只是有一点帮助，我清楚地记得在事情起作用之前必须将几页的指令拼凑在一起。是否有人建议为IIS 应用程序池启用性能计数器类别编辑的*完整说明？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:49:22.080

您应该在 ASP.NET 之外创建性能计数器。创建性能计数器类别需要默认 AppPoolIdentity 帐户没有的权限。一旦创建了自定义性能计数器，ASP.NET 帐户就可以读取它们。（不要将 ASP.NET 作为系统或管理帐户运行，因为这样做会带来安全风险）

您可以在设置过程中创建您的计数器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T09:26:55.103

只能使用管理员权限更改性能计数器类别。

请参阅：[性能计数器抛出 SecurityException](https://stackoverflow.com/questions/8982304/performance-counter-throws-securityexception)

[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.diagnostics.performancecountercategory.aspx)包括在安装期间创建它们的另一个原因：

> 强烈建议在应用程序安装期间而不是在应用程序执行期间创建新的性能计数器类别。这允许操作系统有时间刷新其注册的性能计数器类别列表。如果列表尚未刷新，则使用该类别的尝试将失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T01:10:25.013

如果您不想在单独的进程中运行性能计数器代码，则可以通过提升权限来执行以下操作。

[http://msdn.microsoft.com/en-us/library/bd20x32d(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/bd20x32d(v=vs.71).aspx)

上面的链接解释了 ASP.NET 应用程序中的性能计数器，以及 ASP.NET 默认情况下如何无权创建自定义性能计数器并且无法读取性能计数器。以下是文章的引述。

> 如果您在 ASP.NET 应用程序中使用 PerformanceCounter 组件，则 ASPNET 用户帐户的默认设置会限制对性能计数器的访问。默认情况下，ASPNET 用户帐户可以写入但不能读取性能计数器，并且它不能创建新类别。您可以使用 ASPNET 帐户模拟来允许创建新类别。模拟身份必须具有足够的权限才能创建类别。如果您的应用程序需要可以在部署之前指定的性能计数器，它们可以由部署项目创建。有关详细信息，请参阅 ASP.NET Web 应用程序安全性。

您可以模拟 asp 以作为您也可以授予权限的单独帐户运行。下面是来自 ASP.NET 模拟文章的示例代码，当然您也可以加密此用户名和密码。本文解释了如何加密用户名和密码。

[http://msdn.microsoft.com/en-us/library/aa719560(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa719560(v=vs.71).aspx)

# javascript - 如何使我的捕获链接匹配器“懒惰”？

> ID：12013775
> 
> 赞同：0
> 
> 时间：2012-08-17T22:03:24.080
> 
> 标签：javascript, regex, replace

在 ECMAScript 中，这是我正在使用的正则表达式：

```
replace(/\[(.+)\s+->\s+([^\]]+)]/g, '<a class=adl_btnlnk href="$2">$1</a>'); 
```

这对于以下字符串很好：

```
"[INNER\"',';!@#$%^&*gobbeldygook ->    -> -> http://li.nk?u=r&l]" 
```

...它正是我需要的。但是当我有什么时候：

```
"[INNER\"',';!@#$%^&*gobbeldygook ->    -> -> http://li.nk?u=r&l] laksjfalksdjf98723&*(*&(*@&#$ [foo -> http://li.nk]" 
```

它导致一个断开的链接：

```
"<a class=adl_btnlnk href="http://li.nk">INNER"',';!@#$%^&*gobbeldygook ->    -> -> http://li.nk?u=r&l] laksjfalksdjf98723&*(*&(*@&#$ [foo</a>" 
```

我怎样才能使它成为：

```
"<a class=adl_btnlnk href="http://li.nk?u=r&l">INNER"',';!@#$%^&*gobbeldygook ->    -></a> laksjfalksdjf98723&*(*&(*@&#$ <a class=adl_btnlink href="http://li.nk">foo</a>" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T22:07:31.170

您可以`+`通过附加一个`?`. 但是你必须稍微改变你的正则表达式，以便尽可能多地排除`]`第一组的字符。此外，最后一组不应包含箭头：

```
/\[([^\]]+?)\s+->\s+([^->\]]+?)]/g 
```

# java - 对 Java 进程进行序列化，然后对其进行反序列化——最好以非侵入性方式进行

> ID：12013778
> 
> 赞同：1
> 
> 时间：2012-08-17T22:03:39.290
> 
> 标签：java, serialization, aspectj

我需要序列化一个 Java 进程（到持久存储，如磁盘），然后杀死它。

然后在以后反序列化它并在以后重新复活它。

约束：

1.  我已经有一组要添加此功能的流程。
2.  因此，我正在寻找一种微创的解决方案。
3.  这些进程的代码将重新建立与资源（如套接字、数据库等）的连接。
4.  我需要做的是持久化线程状态、变量、对象等。

笔记：

1.  我对围绕对象图序列化的问题有相当的了解。
2.  许多年前，我从概念上想出了如何使用 AspectJ 做到这一点，但我找不到我的笔记
3.  这个问题仅与 Java 进程有关——因此该解决方案适用于运行在 OSX、Linux 或 Windows 上的 JVM
4.  所讨论的过程将能够重构以实现此功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T07:57:51.413

您不能以通用方式单独使用 Java 来做到这一点。您可以在虚拟机中运行 JVM，该虚拟机可以停止、保存在磁盘上并根据需要重新启动。请注意，必须重新建立网络连接。没有办法以可以透明地恢复的方式持久化它们，因为另一端会看到套接字已经消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T05:59:30.957

像`Thread`,`Socket`和其他`java.io`类这样的类不是`Serializable`出于某种目的而实现的。话虽如此，作为重构提示，我可以向您推荐的最好的事情是让您的应用程序在触发时提供一种保存和恢复状态的干净方式。由于您无法重新创建线程或网络连接的状态，因此根据问题域，您可能能够以一种使它们事务安全的方式编写您的类，而且您可以在关闭时记录正在运行的事务并确保它们是唤醒/反序列化后重新安排/重新启动。

（免责声明：即使您编辑了您的问题，它也很不具体，我只能在下面提供有根据的猜测和一般提示。）

首先，您在这里处理的是一个设计问题。在你解决了你的设计问题***之后***，AOP 可能有助于实现这个问题（它显然是横切的） 。例如，您可以有一个方面`Interruptable`为相关类添加一个接口，并将其连接到实现所需行为的功能，例如`ObjectState interrupt()`和`void continue(ObjectState)`（所有类、接口和方法名称都是纯发明）。因此，虽然您将无法以您似乎描述的相当神奇的方式冻结您的应用程序，但通过一些努力，您可能能够以一种至少可以帮助您以某种方式重新启动它的方式保存应用程序状态恢复逻辑状态（不是像套接字连接、线程 ID 这样的技术状态），因此应用程序可以继续执行它在冻结之前所做的任何事情。

例如，下载管理器可以继续下载文件，因为它之前已经记录了它的逻辑状态：下载源、临时文件名和已写入的字节数。所以即使需要建立新的网络连接来继续下载，“事务”也不需要从头开始。我认为这就是你想要的。

写下这段独白，在我看来，我所描述的部分功能可能应该存在于现有的应用程序服务器或容器中（我不是那里的专家）。

因此，当您最终为所有相关的应用程序类找到了保持其逻辑状态的方法时，请回过头来问另一个问题，即如何使用 AspectJ 左右最好地做您想做的事情。:-)

# dotnetopenauth - Google OpenID - 如果用户登录到多个 Google 帐户，则以编程方式选择会话

> ID：12013779
> 
> 赞同：0
> 
> 时间：2012-08-17T22:03:44.533
> 
> 标签：dotnetopenauth, google-openid

我正在使用 DotNetOpenAuth 允许用户使用他们的 Google 帐户登录我的网站。由于 Google 允许用户同时登录多个帐户，因此能够在身份验证请求中传递标识符以选择正确的会话而不必显示不相关的帐户会很有帮助。

有谁知道这是否可行，如果可以，我需要在请求中使用哪些参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:00:33.300

OpenID 绝对支持请求特定声明标识符作为 OP 登录的 RP。大多数提供者会查看身份验证请求，然后切换用户登录的帐户以匹配身份验证请求中声明的标识符必要的。

然而，谷歌不支持这一点。对不起，运气不好。您*可以*做的最好的事情是在身份验证请求中发送一条消息，以强制用户重新登录 Google，无论他们是否符合在 Google 拥有多个帐户的模式。因此，您最终会惹恼大多数用户，以帮助少数用户避免意外使用他们的多个个人 Google 帐户之一登录。

# javascript - 有什么好的 Eclipse 插件吗？

> ID：12013781
> 
> 赞同：2
> 
> 时间：2012-08-17T22:03:59.463
> 
> 标签：javascript, eclipse

我想在编辑JavaScript时在eclipse下获得一些智能感知和导航支持，你知道有什么好的插件支持吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T05:05:54.103

我认识其中几个，但我没有*广泛使用它们中的任何一个来全心全意地推荐。*. 但是您可以肯定地尝试这些：

*   来自 eBay 开源的[VJET JavaScript 集成开发环境](https://www.ebayopensource.org/index.php/VJET/HomePage)
*   正如@Napolux 在他的帖子中指定的那样：[Aptana Studio](http://update1.aptana.org/studio/3.2/024747/index.html)

我遇到的另一个是：[JavaScript 开发工具（JSDT）](http://www.eclipse.org/webtools/jsdt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-22T18:20:53.403

这不是直接的 JavaScript 编辑器，但在编码时会有所帮助：

*   [http://github.eclipsesource.com/jshint-eclipse/](http://github.eclipsesource.com/jshint-eclipse/)
*   [http://github.eclipsesource.com/jshint-eclipse/updates/](http://github.eclipsesource.com/jshint-eclipse/updates/)

您可以自定义要执行的规则，警告直接显示在 JS 编辑器中。它主要以“未声明的变量”、“从未使用过”的形式帮助我，作为对损坏代码的提示。

# php - Firefox 不显示整个下载名称和扩展名

> ID：12013784
> 
> 赞同：1
> 
> 时间：2012-08-17T22:04:44.930
> 
> 标签：php, firefox, download, filenames

我有一个使用 mod_xsendfile 的 php 下载脚本，它可以完美地下载某些 rar 文件。

在 Chrome 和 IE 中下载正常，我得到类似“0005 - Game Name.rar”的文件名

在 Firefox 中，它总是只下载一个名称为几个字符长的文件，如“0005 -”它从来没有扩展名，因此用户可能不明白如何重命名。

我可以在我的脚本中更改某些内容以允许 firefox 读取整个文件名。

这是处理下载的脚本部分。

```
header("Content-Type: application/octet-stream"); 
header("Content-Disposition: attachment; filename=$filename"); 
header("X-Sendfile: $file"); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T22:09:20.597

引用文件名：

```
header("Content-Disposition: attachment; filename=\"$filename\""); 
```

# javascript - 如何以编程方式在 jsTree 中选择一个节点并打开所有父节点

> ID：12013785
> 
> 赞同：5
> 
> 时间：2012-08-17T22:04:44.617
> 
> 标签：javascript, jquery, jquery-ui, jstree

在多级 jsTree 中，如何选择特定节点（可能是叶节点）并展开它的所有父节点？示例：
从这个 JSFiddle ( [http://jsfiddle.net/mmeah/fyDE6/](http://jsfiddle.net/mmeah/fyDE6/) ) 我想以编程方式选择 Grand Child 并打开所有父节点。

在某些情况下，如果用户通过深层链接进入我的网站，我会尝试确保用户返回到树中的正确节点

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T16:05:17.213

jsTree 提供了一个 open_node() 函数来任意触发任何节点打开。只需扫描树以查找未打开的父母并打开它们。

示例：http: [//jsfiddle.net/mmeah/yyy8W/](http://jsfiddle.net/mmeah/yyy8W/)

```
$("#findChild").click(function(){
    $.jstree._reference(myTree).open_node("#Node_001",function(){;},false);
});
$("#findGrandChild").click(function(){
    var closedParents = $("#Node_003").parents("li.jstree-closed");
    for(var i=closedParents.length-1;i>=0;i--){
        pleaseOpen($(closedParents[i]));
    }
});

function pleaseOpen(thisNode){
    if(typeof thisNode=="undefined") return;
    if(thisNode.hasClass("jstree-leaf") || thisNode.hasClass("jstree-open") ) return;
    $.jstree._reference(myTree).open_node(thisNode,function(){;},true);
} 
```

​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T15:37:36.090

啊哈，我在正确的轨道上，但我的深度链接解析代码和树的构造之间存在竞争条件

选择节点并触发事件

```
$("#tree").jstree("select_node", selector).trigger("select_node.jstree"); 
```

要在树加载后执行此操作，以便它可以工作......

```
$("#tree").jstree(...).bind("loaded.jstree", function () 
{
    $("#tree").jstree("select_node", selector).trigger("select_node.jstree");
}); 
```

# java - 使用 HTML/Javascript 从 Web 应用程序生成的图表/表格转换和导出到可编辑的 Powerpoint（.pptx、.ppt）的解决方案？

> ID：12013787
> 
> 赞同：0
> 
> 时间：2012-08-17T22:05:19.383
> 
> 标签：java, javascript, charts, export, powerpoint

我正在构建一个 Web 应用程序，用户将在其中选择不同的选项来使用 HTML/CSS/Javascript 构建的前端界面生成表格、图表、图形等。一旦用户配置了他们的表格/图表，应用程序将呈现它们并生成一个 JSON 对象，该对象将使用 Java/Postgresql 保存在服务器上。一旦用户有了他们想要的表格/图表，应用程序需要让他们导出表格/图表并以编程方式生成一个 Powerpoint .pptx 或 .ppt 文件（以及一些其他格式，如 Excel、Word、PDF），即完全可编辑（不仅仅是静态图像）。

我看过 Apache POI，它似乎对 Excel 有很好的支持，但据我所知，它目前不支持创建功能齐全、可编辑的 pptx 和 ppt Powerpoint 文件（仅生成不可编辑的图像）。

[http://poi.apache.org/slideshow/index.html](http://poi.apache.org/slideshow/index.html) http://comments.gmane.org/gmane.comp.jakarta.poi.user/17749

另一种可能的选择可能是使用 OpenXML 构建功能，允许用户使用 HTML/Javascript/JSON 在前端指定他们的表格/图表选项，并使用 Javascript 生成 Powerpoint 文件（或其他 Microsoft Office 应用程序格式）作为这里描述：

[http://openxmldeveloper.org/blog/b/openxmldeveloper/archive/2012/08/02/working-with-open-xml-documents-using-javascript.aspx](http://openxmldeveloper.org/blog/b/openxmldeveloper/archive/2012/08/02/working-with-open-xml-documents-using-javascript.aspx)

我正在尝试找到提供此功能的任何其他可能的解决方案（最好是与我们的堆栈 HTML/Javascript/JSON/Java/Postgresql 兼容的非专有开源），并感谢任何可能有经验的人提供的任何建议或建议在这方面，已经为此实施了解决方案，或者可以推荐任何其他可能的解决方案。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T23:47:18.437

你提到了 POI，但你看到[HSLF 和 XLSF 了](http://poi.apache.org/slideshow/index.html)吗？

> HSLF 提供了一种阅读、创建或修改 PowerPoint 演示文稿的方法。特别是，它提供：
> 
> *   用于数据提取（文本、图片、嵌入对象、声音）的 api
> *   用于创建、读取和修改 ppt 文件的 usermodel api
> 
> XSLF 是 POI 项目的 PowerPoint 2007 OOXML (.xlsx) 文件格式的纯 Java 实现。虽然 HSLF 和 XSLF 提供了类似的功能，但目前两者之间还没有通用接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:32:05.880

另一种解决方案可能是使用[docx4j](http://www.docx4java.org)。但是，这需要对 powerpoint XML 格式有充分的了解。我们目前正在研究同样的问题，并且到目前为止使用商业 Aspose 库找到了一个可行的解决方案。

**更新：**看起来在一两天内获得好结果并不难。尤其是在使用仅经过调整和合并的预构建 PPTX 和 XLSX 文件时。

# git - 如何在git中删除颠覆远程？

> ID：12013788
> 
> 赞同：51
> 
> 时间：2012-08-17T22:05:28.990
> 
> 标签：git, git-svn

我有一个最初使用 git-svn 创建的 git 存储库。现在我有一个推送到的 git 服务器，并且 svn 存储库已经丢失。我可以删除svn遥控器吗？如何？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-08-17T22:08:14.580

您可以编辑`.git/config`文件并删除与要删除的遥控器关联的部分。

您要删除的行可能大致如下所示：

```
[svn-remote "svn"]
    url = url-of-svn-repository/trunk
    fetch = :refs/remotes/git-svn 
```

这将从 Git 中删除远程，但您仍将拥有 Git 提交和 SVN 提交之间存储在`.git/svn`. 如果您想摆脱所有 SVN 遥控器，您可以删除整个目录。如果您只想删除一个 SVN 远程并保留其他远程，则需要查看目录结构并仅删除与您要删除的远程关联的那些。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-11-26T23:33:51.183

通过大多数 *nix shell、bash 或 mingw32 执行此操作：

```
cd ~/your_repo
git config --remove-section svn 
```

`cat .git/config`或查看配置 ( )时的任何部分。例如，下一行将删除[Eric 解决方案](https://stackoverflow.com/a/12013821/881551)中描述的相同配置部分：

```
git config --remove-section svn-remote.svn 
```

接下来删除文件夹中的所有 svn 内容`.git`（svn、logs 和 refs）。这也是谢尔盖的建议。

```
rm -rf .git/svn .git/{logs/,}refs/remotes/{git-,}svn/ 
```

垃圾收集只是为了好的措施：

```
git gc 
```

[来源/学分](http://ao2.it/wiki/How_to_migrate_an_SVN_repository_to_Git)

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-05-13T05:51:54.790

埃里克的回答是正确的，但并不完整。即使在 Rafael Raposo 发表评论之后。我希望我可以对答案发表评论，而不是发布新答案，但规则是在达到 50 声望之前你不能发表评论。

补充是：

```
find .git -type f -exec grep -nH git-svn "{}" \; 
```

向我展示了我在这两个文件中的引用：

```
./.git/info/refs:4:fd34a5c...8073f3 refs/remotes/git-svn
./.git/packed-refs:5:fd34a5...cd6c33 refs/remotes/git-svn 
```

在我删除这些引用之前，我可以看到**git-svn**正在做`git log`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-10-03T11:20:38.253

如果你没有任何本地配置并且你想放弃在`.git`目录中的工作，只需将 git repo 从 git 远程克隆到新目录并删除旧目录。

如果您确实有一些简单的本地配置（例如，与您的全局配置不同的用户/电子邮件），这样做可能更容易，然后在克隆后恢复任何本地配置。

# php - 有没有更好的方法在 PHP 中为 mysql_query() 获取自定义重复和排序？

> ID：12013790
> 
> 赞同：0
> 
> 时间：2012-08-17T22:05:36.640
> 
> 标签：php, mysql

我很惊讶还没有答案……这表明我在做一些根本错误的事情。或者其他人都是。

假设我有一个可能重复的值数组，这些值在客户端作为 POST 请求进入，目标是从 MySQL 返回一个由这些值索引的结果集，并且与这些值的顺序相同，*并保留冗余*！！！

因此，如果值为：1,2,3,2,3,4,5,5,5

期望的结果是：

```
+----+-------+
| id | value |
+----+-------+
|  1 | one   |
|  2 | two   |
|  3 | three |
|  2 | two   |
|  3 | three |
|  4 | four  |
|  5 | five  |
|  5 | five  |
|  5 | five  |
+----+-------+ 
```

下面的代码似乎有效，但天哪，认真的吗？我必须滥用`array_intersect()`并且有两个不同的循环，其中一个是嵌套的，只是为了使一个简单的结果集得到排序并以与输入数组相同的模式重复？这不可能是真正应该做到的。

```
function repQuery($inids,$incol,$querystring,$emptyval = "NULL"){
    # incol is the name of a column in the query
    # inids is an array within which the value of incol must be found
    # querystring is a query of the form...
    # "select FOO from BAR where %s in (%s) BLAH BLAH BLAH"
    # The first %s will be replaced by $incol and the second by $inids
    $qq = mysql_query(sprintf($querystring,$incol,implode(",",$inids))) or die(mysql_error());
    $nf = mysql_num_fields($qq); $dummyrow = array();
    for($ii = 0; $ii < $nf; $ii+= 1){
        $dummyrow[mysql_field_name($qq,$ii)] = $emptyval;
    };
    $out = array_fill(0,count($inids),$dummyrow);
    while($rr = mysql_fetch_assoc($qq)){
        foreach(array_keys(array_intersect($inids,array($rr[$incol]))) as $ii) {
            $out[(int)$ii] = $rr;
        }
    }
    return $out;
} 
```

我的问题是：是否有一些可接受的模式或 PHP 数组命令或其他我忽略的东西？在`R`上面将是一个单行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T22:35:35.177

虽然如果它是 MySQL 中的一个功能会很棒，但我认为没有一种方法可以使用`ORDER BY`重复模式（你可以通过 获得“自定义模式” `ORDER BY FIELD()`，但不完全在那里）。

我不确定 PHP 中是否有任何特殊方法，但使用临时数组可能会减轻头痛：

```
function repQuery($inids,$incol,$querystring,$emptyval = "NULL"){
    $qq = mysql_query(sprintf($querystring,$incol,implode(",",$inids))) or die(mysql_error());

    // build a temporary array of all of the results - the row's "ID" is the array index
    $tmpResults = array();
    while ($row = mysql_fetch_assoc($qq)) {
        $tmpResults[$row['id']] = $row;
    }

    // iterate through the order/list of IDs and insert each result one after the other
    $out = array();
    foreach ($inids as $id) {
        $out[] = $tmpResults[$id];
    }
    return $out;
} 
```

`$tmpResults`这将使用行的 ID 作为数组的索引将每个 SQL 结果（每个 ID 一个）放入数组中。下一步是遍历`$inids`包含要复制的模式的列表，并将相应的记录结果插入到`$out`数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T23:44:24.017

我使用 PDO 并使用下面的 PDO 从数据库中获取数据。因此，如果您出于某种原因对通过 PDO 获取数据不感兴趣，请不要费心阅读。（我使用 PDO 时不熟悉 mysql_* 命令。）

如果是我，我会在传递给 MySQL 之前使 $inids 唯一（array_unique）并更改 SQL 语句以在 SELECT 语句中包含 ID。就像是：

```
select %s, FOO from BAR where %s in (%s) 
```

然后 sprintf 变成

```
$tempIds = array_unique($inids);
sprintf($querystring,$incol,$incol,implode(",",array_unique($tempIds))) 
```

PDO 将类似于

```
$db->prepare(sprintf($querystring,$incol,$incol,implode(",",$tempIds)));
$db->execute(array());
$results = $db->fetchAll(); 
```

所以对于你的组织结构，我会使用这样的东西：

```
$ids = array();
$srch = array();
foreach ($results AS $key=>$dbData) {
  $ids[] = $dbData['ID'] . ":" . $dbData['FOO'];
  $srch[] = (string) $dbData['ID'];
} 

$out = str_replace($srch, $ids, $inids); 
```

我想有更好的方法可以做到这一点，但我还没有想出它。假设 $inids 是一个像这样的数组，这应该可以工作：

```
$inids = array('1', '2', ...); 
```

如果这些值不是字符串，那么它们需要在传递给 str_replace 之前转换为字符串。然后，当您想将它们输出到您的页面或某处时，您可以这样做：

```
foreach ($out AS $key=>$str) {
$data = explode(':', $str);
  echo '<br>' . $data[0] . \t . '|' . \t . $data[1];
} 
```

随心所欲地使用 echo 语句。

# c# - 如何获取列表框中的项目数

> ID：12013792
> 
> 赞同：5
> 
> 时间：2012-08-17T22:05:40.787
> 
> 标签：c#, .net, listbox

在我的程序中，我使用了一个列表框，在这个列表框中我添加了一些项目。

现在我想知道如何获取列表框项目的数量并显示文本框中的项目数量。当项目数量不固定时。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-17T22:20:12.210

假设您的列表框名为 ListBox1，文本框为 TextBox1。那么你需要的代码是

```
TextBox1.Text = ListBox1.Items.Count.ToString(); 
```

当然，了解您的平台（WinForms、WebForms、Html 等）将有助于获得更准确的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-07T14:12:44.103

我想为使用 WPF 的人提供一个答案。

```
<ListBox  ItemsSource="{Binding Path=Parts}">                   
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal" >
                <Label Content="{Binding CurrentPart, Mode=OneWay}" />
                <Label Content="{Binding Path=Parts.Count}"                           
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

# android - ListView 页脚位置更改

> ID：12013793
> 
> 赞同：-3
> 
> 时间：2012-08-17T22:06:01.193
> 
> 标签：android, android-layout

我在 ListView 中添加了一个页脚，然后重置了适配器。在所有情况下，列表都是空的，但我注意到有时页脚在 ListView 中显得更低，有时更高。基本上我只是显示一个带有消息的 TextView，但有时我必须使用向上滚动来查看 FooterView，即使在所有情况下 ListView 都不包含列表项。有没有办法将页脚固定在顶部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T22:24:01.940

看看这段代码，它对我有用。

```
private View footerView; 
```

* * *

```
ListView lv = (ListView) main_activity.findViewById(R.id.listView);
if (footerView != null)
    lv.removeFooterView(footerView);

adapter = new ArrayList();
setAdapterList();    // fill data in the arrayList

footerView = getLayoutInflater().inflate(R.layout.footer, null);
if (adapter.size() != 0) {
    lv.addFooterView(footerView);
    setFooterView(footerView);     // set data in the footer
}
lv.setAdapter(new MyAdapter(main_activity)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T22:51:25.870

看起来整个列表都在布局中重新定位。整个空列表就是这样。修复是使用相对布局来包含整个 ListView 并将 ListView 与相对布局的顶部对齐。

# gcc - 为什么我的二进制文件比我的目标文件小得多？

> ID：12013800
> 
> 赞同：3
> 
> 时间：2012-08-17T22:06:25.793
> 
> 标签：gcc, compilation, linker, elf

我正在使用 GCC 4.7 编译一个只包含一个 C++ 源文件的大型应用程序，因此只有一个编译单元，但它包含许多长头文件。最终优化的可执行文件 myapp 为 40MB，但优化的目标文件 myapp.o 为 101MB。目标文件怎么可能比二进制文件大？

我运行“nm -AC myapp”和“nm -AC myapp.o”来查看一个符号是否比另一个符号多得多——大约有 1000 个符号差异，但它们大多是你所期望的，比如二进制添加符号用于标准异常处理和静态初始化。

然后我在两者上都运行了“readelf -a”，并为 myapp.o 得到了这个：

```
Number of section headers:         29186
Section header string table index: 29183 
```

但这对于 myapp：

```
Number of section headers:         40
Section header string table index: 37 
```

所以我猜这是造成尺寸差异的原因，但我实际上并不知道这意味着什么，或者如何减小尺寸。我在吠叫错误的树吗？我的目标是缩短 myapp 的编译时间，但首先我需要了解问题所在。如果符号是问题，我可以使用 GCC 的 -fvisibility=hidden 选项进行研究，但如果这是问题，我预计 nm 会有更多差异。

编辑：附加信息，我的源文件中未定义的所有内容都来自动态链接的库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T22:14:27.073

目标文件包含许多额外的信息，以允许将单独的文件链接在一起。此外，一旦项目中的所有目标文件都链接在一起，许多代码可能会被优化。（例如，未调用的库例程可能包含在目标文件中，但一旦编译器知道哪些例程将在最终二进制文件中实际使用，则不需要。

# mysql - 用于同步不同数据库中的表的递归触发器

> ID：12013801
> 
> 赞同：0
> 
> 时间：2012-08-17T22:06:34.047
> 
> 标签：mysql, triggers

我正在尝试同步三个单独的数据库表。我的目标是对一个数据库中的任何表进行任何更新，然后依次更新其他表。目的是针对三个不同的站点。db1.table 拥有所有数据，db2.table 和 db3.table 拥有一定数量的数据，但所做的任何更改都需要保持同步，最好接近实时。由于触发器很快，我基本上可以将任何 SQL 语句从一个表复制到另一个表，从而保持一切同步。

现在我正在以这种方式使用触发器：

db1.table -> 更新触发器以更新 db2.table db2.table -> 更新触发器以更新 db3.table

如果我只更新 db1 但我尝试将它从 bd3 循环到 db1 并且我得到 MySQL 递归错误，这将非常有用：

“无法更新存储函数/触发器中的表，因为它已被调用此存储函数/触发器的语句使用。”

我的代码是这样编写的，所以如果没有什么要更新的，那么它不会更新另一个表，所以它不会循环不止一次。

除了触发器之外，是否有解决方法或不同的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T23:30:48.037

您是否有理由不能只引用其中一个数据库中的一个主表并将数据集中在那里？

# r - 为什么对于某些向量大小，第三季度的样本数量通常最少？

> ID：12013806
> 
> 赞同：1
> 
> 时间：2012-08-17T22:06:50.063
> 
> 标签：r

每当我使用`quantile`R 中的函数为大小等于某些奇数的向量计算四分位数时（十位和单位槽大于或等于 15 的每个数字），我总是得到元素数量最少的第三季度.

例子

```
 > t <- runif(n=15,min=1,max=19999)
 > t.s <- cut(t, breaks=quantile(t,probs=seq(0,1,by=0.25)), include.lowest=T)
 > summary(t.s)
 [983,5.27e+03] (5.27e+03,9.63e+03] (9.63e+03,1.46e+04] (1.46e+04,1.88e+04] 
              4                   4                   3                   4 

 > t <- sample.int(1000,111)
 > t.s <- cut(t, breaks=quantile(t,probs=seq(0,1,by=0.25)), include.lowest=T)
 > summary(t.s)
 [7,264] (264,575] (575,787] (787,999] 
   28        28        27        28 
```

这是 R 的一个特性还是与数论有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T22:21:37.137

有 9 种分位数算法可供选择。默认情况下，R 使用类型 7。在 中描述`?quantile`。如前所述，如果您选择其他算法，您将获得其他默认行为。使用的算法也在`?quantile`

# ruby-on-rails - rails 无法识别 mysql2 gem

> ID：12013812
> 
> 赞同：0
> 
> 时间：2012-08-17T22:07:40.643
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gem, rvm, bundler

我无法让 rails 识别我安装的 mysql2 gem。我正在使用 rails 3.1 和 ruby​​ 1.9.2。我被难住了。。

```
dan@luci:~$ cd snorby/
Using: /home/dan/.rvm/gems/ruby-1.9.2-p290@snorby

dan@luci:~/snorby$ gem list -l | grep mysql2
mysql2 (0.3.11)

dan@luci:~/snorby$ rails c
Loading development environment (Rails 3.1.0)
1.9.2p290 :001 > require 'mysql2'
LoadError: no such file to load -- mysql2
        from /home/dan/.rvm/gems/ruby-1.9.2-p290@snorby/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:240:in `require'
        from /home/dan/.rvm/gems/ruby-1.9.2-p290@snorby/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:240:in `block in require'
        from /home/dan/.rvm/gems/ruby-1.9.2-p290@snorby/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:223:in `block in load_dependency'
        from /home/dan/.rvm/gems/ruby-1.9.2-p290@snorby/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:640:in `new_constants_in'
        from /home/dan/.rvm/gems/ruby-1.9.2-p290@snorby/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:223:in `load_dependency'
        from /home/dan/.rvm/gems/ruby-1.9.2-p290@snorby/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:240:in `require'
        from (irb):1
        from /home/dan/.rvm/gems/ruby-1.9.2-p290@snorby/gems/railties-3.1.0/lib/rails/commands/console.rb:45:in `start'
        from /home/dan/.rvm/gems/ruby-1.9.2-p290@snorby/gems/railties-3.1.0/lib/rails/commands/console.rb:8:in `start'
        from /home/dan/.rvm/gems/ruby-1.9.2-p290@snorby/gems/railties-3.1.0/lib/rails/commands.rb:40:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>'

dan@luci:~/snorby$ echo $GEM_PATH
/home/dan/.rvm/gems/ruby-1.9.2-p290@snorby:/home/dan/.rvm/gems/ruby-1.9.2-p290@global

dan@luci:~/snorby$ ls -l /home/dan/.rvm/gems/ruby-1.9.2-p290@snorby/gems/mysql2-0.3.11/
total 68
drwxr-xr-x 2 dan dan  4096 2012-08-17 14:22 benchmark
-rw-r--r-- 1 dan dan 12460 2012-08-17 14:22 CHANGELOG.md
drwxr-xr-x 2 dan dan  4096 2012-08-17 14:22 examples
drwxr-xr-x 3 dan dan  4096 2012-08-17 14:22 ext
-rw-r--r-- 1 dan dan    25 2012-08-17 14:22 Gemfile
drwxr-xr-x 3 dan dan  4096 2012-08-17 14:22 lib
-rw-r--r-- 1 dan dan  1090 2012-08-17 14:22 MIT-LICENSE
-rw-r--r-- 1 dan dan  1099 2012-08-17 14:22 mysql2.gemspec
-rw-r--r-- 1 dan dan    99 2012-08-17 14:22 Rakefile
-rw-r--r-- 1 dan dan 11978 2012-08-17 14:22 README.md
drwxr-xr-x 4 dan dan  4096 2012-08-17 14:22 spec
drwxr-xr-x 2 dan dan  4096 2012-08-17 14:22 tasks

dan@luci:~/snorby$ rvm info

ruby-1.9.2-p290@snorby:

  system:
    uname:       "Linux luci 2.6.32-37-powerpc #81-Ubuntu Fri Dec 2 21:46:08 UTC 2011 ppc GNU/Linux"
    bash:        "/bin/bash => GNU bash, version 4.1.5(1)-release (powerpc-unknown-linux-gnu)"
    zsh:         " => not installed"

  rvm:
    version:      "rvm 1.10.0 by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.beginrescueend.com/]"
    updated:      "7 months 10 days 23 hours 13 minutes 10 seconds ago"

  ruby:
    interpreter:  "ruby"
    version:      "1.9.2p290"
    date:         "2011-07-09"
    platform:     "powerpc-linux"
    patchlevel:   "2011-07-09 revision 32553"
    full_version: "ruby 1.9.2p290 (2011-07-09 revision 32553) [powerpc-linux]"

  homes:
    gem:          "/home/dan/.rvm/gems/ruby-1.9.2-p290@snorby"
    ruby:         "/home/dan/.rvm/rubies/ruby-1.9.2-p290"

  binaries:
    ruby:         "/home/dan/.rvm/rubies/ruby-1.9.2-p290/bin/ruby"
    irb:          "/home/dan/.rvm/rubies/ruby-1.9.2-p290/bin/irb"
    gem:          "/home/dan/.rvm/rubies/ruby-1.9.2-p290/bin/gem"
    rake:         "/home/dan/.rvm/gems/ruby-1.9.2-p290@snorby/bin/rake"

  environment:
    PATH:         "/home/dan/.rvm/gems/ruby-1.9.2-p290@snorby/bin:/home/dan/.rvm/gems/ruby-1.9.2-p290@global/bin:/home/dan/.rvm/rubies/ruby-1.9.2-p290/bin:/home/dan/.rvm/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games"
    GEM_HOME:     "/home/dan/.rvm/gems/ruby-1.9.2-p290@snorby"
    GEM_PATH:     "/home/dan/.rvm/gems/ruby-1.9.2-p290@snorby:/home/dan/.rvm/gems/ruby-1.9.2-p290@global"
    MY_RUBY_HOME: "/home/dan/.rvm/rubies/ruby-1.9.2-p290"
    IRBRC:        "/home/dan/.rvm/rubies/ruby-1.9.2-p290/.irbrc"
    RUBYOPT:      ""
    gemset:       "snorby"

dan@luci:~/snorby$ bundle exec gem list -l | grep mysql2

dan@luci:~/snorby$ echo $?
1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T23:26:51.587

Rails 将在启动时自动使用`Bundler.setup`，它与`bundle exec`从命令行等效，以允许将您需要的**mysql**`Gemfile` gem 加载到您的并运行`bundle install`，最好将其放在适当的组中 - 如果您将它放在适当的组中 - 有些项目使用**pg**进行生产，使用**mysql**进行开发，如果你计划始终使用它，然后可以在没有组的情况下指定它。

# python - 稍后设置为长时间时，Python 计时器脚本不会运行

> ID：12013813
> 
> 赞同：2
> 
> 时间：2012-08-17T22:07:44.950
> 
> 标签：python, timer, strftime

我想要做的是在某个时间执行一个脚本，并且在大多数情况下，当我在执行后的短时间内运行它时，它确实有效，比如大约 10 到 15 分钟。所以我会运行计时器脚本，10 - 15 分钟后它会执行它的命令。

这是我正在使用的代码：

```
import time
import myscript
from sys import exit

while 1:
        if time.strftime("%H") == "7" and time.strftime("%M") == "15":
                myscript.main()
                exit() 
```

我想要的是脚本每天早上执行。当我在当天晚些时候到达我的电脑时，我可以看到脚本卡在这个过程中。

我在两台机器上试过这个，一个 Ubuntu 12.04 64 位机器和一个安装了 cygwin 的 Windows XP 机器，它们都显示了同样的问题。当我离开电脑时，我只是锁定它们，而不是让它们处于待机状态。我尝试运行脚本并锁定它，然后短暂解锁它，但我可以看到这不是问题，因为脚本运行良好。

另外需要注意的是，当我使用我的计算机时，它似乎运行得很慢，而且这个脚本似乎占用了大量的 CPU 使用率，在 30 - 50% 的范围内。

我还缺少什么，或者这不是解决问题的理想方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T22:30:42.670

在那里没有睡觉可以解释为什么你的系统会崩溃。它的旋转速度与您的 cpu 一样快。

如果您只是在试验将在特定时间运行函数的包装脚本，您可以这样做：

```
from datetime import datetime
import time

while True:
    now = datetime.now()
    if now.hour == 7 and now.minute == 15:
        foo()
    time.sleep(10) 
```

但这里有一个大问题需要考虑。如果`foo()`需要很长时间或挂起自己的操作会发生什么？

在您的情况下可能发生的情况是您的睡眠（设置为 60 秒）可能真的错过了那个分钟窗口。您必须以较小的增量睡眠，以确保您多次检查分钟。

除此之外，使用 cron 作业。它旨在执行计划任务。cron 将存在于您提到的您正在使用的 cygwin shell 中。请参阅此处以[在 Windows 上设置 crontab](https://stackoverflow.com/questions/707184/how-do-you-run-a-crontab-in-cygwin-on-windows)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T02:04:03.340

**更新**：如果您需要在早上 7 点 15 分之后的第一次机会运行一次：

```
now = datetime.now()
dt = now.replace(hour=7, minute=15) #note: ignore seconds, microseconds
if dt < now:
   dt += timedelta(days=1) #note: might miss by an hour on DST transition day
assert dt >= now
delay = (dt - datetime.now()).total_seconds()
Timer(delay, myscript.main).start() 
```

它在`main`早上 7 点 15 分运行，或者如果计算机在早上 7 点 15 分处于睡眠状态，则在计算机唤醒后不久运行。

* * *

正如其他人所说的现有解决方案（例如 cron），Windows 任务调度程序可能更适合在指定时间运行您的脚本。

为了避免显式繁忙循环，您可以使用`threading.Timer()`.

```
#!/usr/bin/env python
from datetime  import datetime, timedelta
from threading import Timer

import myscript

def run_at(dt, func, step=timedelta(days=1), tolerance=timedelta(minutes=1)):
    if abs(dt - datetime.now()) < tolerance:
       func() # don't schedule if it raises an exception

    now = datetime.now()
    while dt < now:
        dt += step

    delay = (dt - datetime.now()).total_seconds()
    Timer(delay, run_at, [dt, func]).start()

dt = datetime.now().replace(hour=7, minute=15)
run_at(dt, myscript.main) 
```

它在当地时间每天 7:15 调用 main 函数。

如果前一个呼叫尚未完成或您的计算机在 7:15 暂停，它将跳过呼叫。它可能会跳过 DST 过渡日。

如果系统时钟在呼叫之间向后/向前设置，它应该可以工作。

要处理更复杂的调度规范，您可以使用 Python 中的 crontab 语法，[例如](https://stackoverflow.com/a/8715668/4279).

# asp.net-mvc-3 - 使用 Unity 为 ActionFilter 注入 Setter

> ID：12013816
> 
> 赞同：1
> 
> 时间：2012-08-17T22:07:55.963
> 
> 标签：asp.net-mvc-3, dependency-injection, unity-container

嗨，我在 MVC 3 应用程序中使用[MS Unity Container 。](http://msdn.microsoft.com/en-us/library/ff647202)

我想使用 setter 注入来为 Action 过滤器注入依赖项。我有一个动作过滤器，我在 global.asax 中注册，这个动作过滤器调用一个存储库类来加载一些数据。我想使用 DI 注入具体类。[使用 StructureMap](http://lostechies.com/jimmybogard/2010/05/03/dependency-injection-in-asp-net-mvc-filters/)可以很容易地实现它。但不知何故，我无法让它与 Unity 一起使用。我已经尝试了此[链接](https://stackoverflow.com/questions/515028/setter-property-injection-in-unity-without-attributes)中的所有解决方案。

这是我的代码：

MyActionFilter.cs

```
public class GlobalViewBagActionFilter : ActionFilterAttribute
{
    public IUserRepo UserRepo { get; set; }

    public override void OnResultExecuting(ResultExecutingContext filterContext)
    {
        var testVal = UserRepo.LoadData();
    }
} 
```

在 Global.asax.cs 中注册动作过滤器

```
private static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new GlobalViewBagActionFilter());
    } 
```

在 Appliation_Start 上调用上述方法进行注册

```
RegisterGlobalFilters(GlobalFilters.Filters); 
```

我已经尝试了许多可能的代码块来注册课程，但没有任何效果。要么我会得到一个异常，要么在操作过滤器上，UserRepo 属性将为空。

关于如何让它工作的任何指示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T06:32:19.603

您需要设置容器：

```
private static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
    var container = new UnityContainer()
       .RegisterType<IUserRepo, UserRepoImpl>()

       .RegisterType<GlobalViewBagActionFilter>(
           new InjectionProperty("UserRepo", new ResolvedParameter<IUserRepo>()) 
       );

    filters.Add(container.Resolve<GlobalViewBagActionFilter>());
} 
```

# javascript - 如何在 DWR 中自定义 dwr.util.useLoadingMessage()？

> ID：12013817
> 
> 赞同：0
> 
> 时间：2012-08-17T22:07:55.870
> 
> 标签：javascript, dwr

我必须自定义`dwr.util.useLoadingMessage()`，现在它以红色背景出现在右上角。现在我必须将其更改为屏幕中间。

我已经用谷歌搜索了它，但无法获得确切的解决方案，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T19:57:16.657

我已经像这样定制了它。下载并将dwr util.js包含在项目中并像这样修改loadingMessage

```
dwr.util.useLoadingMessage = function(message) {
  var loadingMessage;
  if (message) loadingMessage = message;
  else loadingMessage = "Loading";
  dwr.engine.setPreHook(function() {
    var disabledZone = dwr.util.byId('disabledZone');
    if (!disabledZone) {
      disabledZone = document.createElement('div');
      disabledZone.setAttribute('id', 'disabledZone');
      disabledZone.style.position = "absolute";
      disabledZone.style.zIndex = "1005";
      disabledZone.style.left = "0px";
      disabledZone.style.top = "0px";
      disabledZone.style.width = "100%";
      disabledZone.style.height = "100%";
      // IE need a background color to block click. Use an invisible background.
      if (window.ActiveXObject) {
        disabledZone.style.background = "white";
        disabledZone.style.filter = "alpha(opacity=0)";
      }
      document.body.appendChild(disabledZone);
      var messageZone = document.createElement('div');
      messageZone.setAttribute('id', 'messageZone');
      messageZone.style.position = "absolute";
      messageZone.style.top = "350px";
      messageZone.style.right = "600px";
      messageZone.style.background = "red";
      messageZone.style.color = "white";
      messageZone.style.fontFamily = "Arial,Helvetica,sans-serif";
      messageZone.style.padding = "4px";
      messageZone.style.zIndex = "1005";
      document.body.appendChild(messageZone);
      var text = document.createTextNode(loadingMessage);
      messageZone.appendChild(text);
      dwr.util._disabledZoneUseCount = 1;
    }
    else {
      dwr.util.byId('messageZone').innerHTML = loadingMessage;
      disabledZone.style.visibility = 'visible';
      dwr.util._disabledZoneUseCount++;
      dwr.util.byId('messageZone').style.visibility = 'visible';
    }
  });
  dwr.engine.setPostHook(function() {
    dwr.util._disabledZoneUseCount--;
    if (dwr.util._disabledZoneUseCount == 0) {
      dwr.util.byId('disabledZone').style.visibility = 'hidden';
      dwr.util.byId('messageZone').style.visibility = 'hidden';
    }
  });
}; 
```

# tumblr - 如何使用 API 从受密码保护的 tumblr 获取帖子？

> ID：12013818
> 
> 赞同：2
> 
> 时间：2012-08-17T22:07:55.953
> 
> 标签：tumblr

我正在尝试使用 tumblr API (http://www.tumblr.com/docs/en/api/v2)，但我看不到如何访问其他用户的受密码保护的博客。我有密码，但似乎没有任何地方可以使用它。OAuth 的东西没有帮助，因为那是用户的凭据，而不是博客。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-01T21:21:48.700

您需要使用 Oauth 来执行此操作。您必须先通过 Oauth 身份验证，然后才能访问受密码保护的博客，并且您还需要成为我相信的博客的成员并拥有消费者 API 密钥。

请参阅：[Tumblr v2 API 访问私人博客](https://stackoverflow.com/questions/11090257/tumblr-v2-api-accessing-private-blogs#11127423)

您也可以尝试在此处与 tumblr 的支持人员取得联系：[https](https://groups.google.com/forum/#!forum/tumblr-api) : //groups.google.com/forum/#!forum/tumblr-api（是的，他们使用谷歌群组>、>）

# internet-explorer - 从 ie8 继承的 ie9 mailto 链接字符限制错误？

> ID：12013820
> 
> 赞同：1
> 
> 时间：2012-08-17T22:08:07.607
> 
> 标签：internet-explorer, internet-explorer-9, mailto

我发现了这个问题：

[mailto 在 IE 中失败，其中有很长的正文文本。有没有办法解决这个问题？](https://stackoverflow.com/questions/2241274/mailto-fails-in-ie-where-there-is-a-long-body-text-is-there-any-way-to-resolve)

并决定删除我的邮件正文只是为了测试......它确实有效。

那么这个字符限制错误仍然存​​在于 ie9 中吗？有没有其他人有类似的问题？

**更新**

我的 mail-to 似乎可以在 ie8 上工作，但不能在 ie9 上工作。不过，我想我越来越接近解决它了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T14:36:09.227

jimwvisi 的这个答案帮助我：Mailto [：链接不起作用](http://answers.microsoft.com/en-us/ie/forum/ie8-windows_other/mailto-link-does-not-work-in-ie8-but-works-in/b23a1005-590f-4dc4-9770-0331d096e48e "关联")

管理员从 IE8 升级到 IE9（可能还有其他系统更改）后，“mailto:”导航将导致显示“about:blank”页面，并且不会激活邮件客户端。

将“mailto：”字符串的长度减少到大约以下。500 个字符让事情看起来又正常了，但这不是一个非常有用的解决方案。jimwvis建议的解决方法更好：激活IE的Internet设置->安全->本地Intranet->激活治愈/隐藏问题（安全级别似乎并不重要）

# css - 图片链接翻转效果

> ID：12013825
> 
> 赞同：0
> 
> 时间：2012-08-17T22:08:25.890
> 
> 标签：css, hover, rollover-effect

有人知道如何制作类似于这里看到的图像链接翻转效果[吗](http://demo.color-theme.com/?theme=Claystone)？可能有这个教程吗？改变背景的不透明度并让眼睛看起来很容易，但我不知道开发人员是如何让奶酪轮像那样滑入的。

截图：

![在此处输入图像描述](../Images/2f050b1651fe4771ef12fb8c9f0149ec.png)![在此处输入图像描述](../Images/036c005063f3b74769aebfe82ce0f066.png)![在此处输入图像描述](../Images/7b20f72ce1ce2d0f656d30331c407107.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T22:16:14.530

这是两件事的结合：

一种是在悬停时改变楔子的位置（在 CSS 中）。我假设你知道该怎么做。

另一个（创建动画的那个）是指定一个过渡时间，以便它从一个状态平滑地移动到另一个状态。

有关转换如何工作的更多详细信息，请参见[http://www.w3schools.com/css3/css3_transitions.asp](http://www.w3schools.com/css3/css3_transitions.asp)。

不幸的是，跨浏览器支持很差，每个浏览器都使用自己的前缀。您指向的网站使用：

```
-webkit-transition: all 0.5s ease;
-moz-transition: all 0.5s ease;
-ms-transition: all 0.5s ease;
-o-transition: all 0.5s ease;
transition: all 0.5s ease;` 
```

# python - python读取错误类型

> ID：12013831
> 
> 赞同：3
> 
> 时间：2012-08-17T22:09:10.053
> 
> 标签：python, python-2.7, types

我有一个包含数字行的文本文件。我的程序正在尝试提取代码行并将它们放入一个列表中，每个列表由构成文件中该行的数字组成，然后将所有这些列表放入一个列表中*（让我们称之为三角形）*`Triangle[x]`并有一个函数应用于它们，但是当我尝试使用它时，Python 解释器说它是一个整数类型，但是当我问它时`type(Triangle[x]`），它说它是一个列表。我的代码如下：

```
def compare(a,b):
"""Returns the larger of a and b"""
if a > b:
    return a
else:
    return b

doc = open('C:/Users/Joseph/My Documents/Programming fun/Python/Project Euler/18triangle.txt')

Triangle = []

for line in doc:
    Triangle.append( map( int, line.split() ) )

doc.close()

Triangle.reverse()

for i in xrange(len(Triangle) - 1):
    for j in xrange(len(Triangle[i]) - 1):              # Here it says that 'type int has no len'
        TEMP = compare(Triangle[i][j],Triangle[i][j + 1])
        Triangle[i+1] = TEMP 
```

提前感谢您提供的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T22:18:02.433

这看起来很可疑：

```
TEMP = compare(Triangle[i][j],Triangle[i][j + 1])
Triangle[i+1] = TEMP 
```

`Triangle`以整数列表作为成员开始，但是当您经历时，您将元素分配为整数。事实上，除了 之外的每个元素都会发生这种情况`Triangle[0]`，所以这总是会在`i`到达 时发生`1`。

* * *

顺便说一句，这是阅读文档的一种更好的方式：

```
with open('C:/Users/Joseph/My Documents/Programming fun/Python/Project Euler/18triangle.txt') as doc:
    Triangle = [map(int, line.split()) for line in doc] 
```

您的`compare`功能是标准`max`功能的子集；您可以改用它（正如@BrendenBrown 在评论中指出的那样）。

另外，`Triangle`应该`triangle`按照[标准 Python 风格](http://www.python.org/dev/peps/pep-0008/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T22:18:26.613

问题是 TEMP 得到一个整数，然后你把它放到 Triangle 中，所以现在 Triangle 有一个整数而不是列表的元素。也许你想要类似的东西

```
Triangle[i+1] = [TEMP] 
```

代替

```
Triangle[i+1] = TEMP 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T23:09:42.783

`for i in xrange(len(Triangle) - 1)`这不是很pythonic。

由于您想一次比较两个对象，因此首先调整列表可能会更好。此代码段将您的列表转换为 2 元组列表

```
>>> from itertools import izip_longest, islice
>>> x
[1, 2, 3, 4, 5]
>>> list(izip_longest(islice(x,0,None,2),islice(x,1,None,2)))
[(1, 2), (3, 4), (5, None)] 
```

获得该格式的列表后，您可以像这样逐步完成它：

```
for i,j in two_list:
   # rest of your loop 
```

# java - 推土机映射 JodaTime 属性未按预期工作

> ID：12013833
> 
> 赞同：13
> 
> 时间：2012-08-17T22:09:25.113
> 
> 标签：java, mapping, jodatime, dozer

我正在使用 Dozer 在 Document 类和 DocumentManagementBean 类之间进行映射，这都是我自己制作的。两者都有一个属性，带有 getter 和 setter，属于 Joda DateTime 类型，称为 dateAdded。

当 Document 对象`d`具有属性`dateAdded`=x 时，调用`mapper.map(d, DocumentManagementBean.class)`所有字段都会正确地自动映射（因为我可以完全控制代码库，所以我可以在没有推土机配置的情况下逃脱，只依赖匹配的属性名称），除了`dateAdded`字段，其中新的 DocumentManagementBean在其属性中以**当前**的DateTime`dmb`结束，而不是对象中的 x 。**`dateAdded``d`**

 **我期待推土机尝试打电话

`dmb.setDateAdded(d.getDateAdded());`

并且只是将 dateAdded 的值从源带到目标，但它似乎正在为 dmb 对象创建新的 DateTime 然后不理会它。

任何人都可以为我解释一下吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-23T08:51:49.087

基本问题是 Dozer 通过 new DateTime() 创建了一个新的 DateTime 空白实例，这就是你最终得到当前日期/时间而不是原始日期/时间的方式。可能有多种解决方案，我通常使用全局定义的自定义转换器：

```
 <converter type="de.kba.resper.customconverter.DateTimeCustomConverter">
        <class-a>org.joda.time.DateTime</class-a>
        <class-b>org.joda.time.DateTime</class-b>
    </converter> 
```

和

```
public class DateTimeCustomConverter extends DozerConverter<DateTime, DateTime> {

    public DateTimeCustomConverter() {
        super(DateTime.class, DateTime.class);
    }

    @Override
    public DateTime convertTo(final DateTime source, final DateTime destination) {

        if (source == null) {
            return null;
        }

        return new DateTime(source);
    }

    @Override
    public DateTime convertFrom(final DateTime source, final DateTime destination) {

        if (source == null) {
            return null;
        }

        return new DateTime(source);
        }

} 
```

不过，它可能会做得过火:)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-07T09:54:47.213

您可能不再需要它，但 Dozer 提供了通过引用复制对象的机会，至少在最新版本中（现在，此版本是 5.4.0）。通过引用复制是您正在寻找的。

```
<field copy-by-reference="true">
  <a>copyByReference</a>
  <b>copyByReferencePrime</b>
</field> 
```

文档：[http ://dozer.sourceforge.net/documentation/copybyreference.html](http://dozer.sourceforge.net/documentation/copybyreference.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-09-26T13:57:21.280

在您的 xml 文件中设置按引用复制的全局属性

```
 <copy-by-references>
        <copy-by-reference>
            org.joda.time.LocalDate
        </copy-by-reference>
        <copy-by-reference>
            org.joda.time.LocalDateTime
        </copy-by-reference>
    </copy-by-references> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T08:42:43.293

可以这样做，但您必须添加一些配置：

```
<field>
  <a set-method="placeValue" get-method="buildValue">value</a>
  <b>value</b>  
</field> 
```

这里有更多信息：[http ://dozer.sourceforge.net/documentation/custommethods.html](http://dozer.sourceforge.net/documentation/custommethods.html)

有人知道如何用注释做罐子吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-19T14:59:57.363

我认为根本原因是 DateTime 是不可变的，所以无法完成深拷贝（参见[https://github.com/DozerMapper/dozer/issues/216](https://github.com/DozerMapper/dozer/issues/216)）。

这就是为什么您必须使用转换器或通过引用复制它的原因。**

# c++ - 刷新元素 ListView QML

> ID：12013836
> 
> 赞同：2
> 
> 时间：2012-08-17T22:09:36.007
> 
> 标签：c++, qt, ubuntu, qml, kdevelop

有谁知道如何在 QML 中强制刷新 ListView。当我在真实设备上执行程序时出现问题，我有多个按钮，我必须移动滚动条以使它们消失。

然而，当我在 Kdev 上执行程序时，我没有这个问题。

谢谢你。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-17T22:22:50.880

你在使用 QML ListModel 吗？，当你修改 ListModel 时，更改会反映在 ListView 中，你应该看看[这个](http://doc.qt.io/qt-5/qml-qtqml-models-listmodel.html)

# android - 将记录/播放 MotionEvents 的 Android 后台服务

> ID：12013838
> 
> 赞同：0
> 
> 时间：2012-08-17T22:09:49.430
> 
> 标签：android, user-interface, automation, record, motionevent

我正在寻找一个可以运行后台服务的应用程序，该服务将始终记录 MotionEvents（即使不在应用程序中）并将它们存储在某种日志文件中。然后，当请求时，将重播这些 MotionEvents 以模拟用户与设备的交互。

正如您可能猜到的，这是用于 UI 自动化的。

我即将开始自己编写这个应用程序，但我想确保我没有重新发明轮子

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T22:56:46.700

> 我正在寻找一个可以运行后台服务的应用程序，该服务将始终记录 MotionEvents（即使不在应用程序中）并将它们存储在某种日志文件中。然后，当请求时，将重播这些 MotionEvents 以模拟用户与设备的交互。

出于明显的隐私和安全原因，这一切都是不可能的。一个应用程序不能拦截另一个应用程序的触摸事件，一个应用程序不能向另一个应用程序发出虚假的触摸事件。

唯一的例外是仪器测试用例，但这不适用于任意应用程序，仅适用于被测试的特定对（在编译时确定，使用相同的签名密钥等）。

# php - 我想让用户使用可选面板更改 CSS。我该怎么做？

> ID：12013840
> 
> 赞同：0
> 
> 时间：2012-08-17T22:09:54.083
> 
> 标签：php, javascript, jquery, css, ajax

我正在开发一个 PHP 项目。我希望用户使用选项面板在他们的个人资料上更改颜色、字体大小等。类似于 WordPress 主题可选面板的东西。

有人可以指出我应该如何去做的正确方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T22:20:08.960

在您的站点上创建一个选项面板，该面板是提交给 PHP 文件的表单。在那个 PHP 文件中，确保用户提交的数据是有效的，然后使用 a`mysql_query()`更新用户 MySQL 行中的数据。当然，您需要事先设置您的 MySQL（或其他数据库）结构，以便每个用户配置文件都有类似`font-size`或`color`关联的字段。

当您向已登录的用户显示您的网站时，请使用另一个`mysql_query()`来查看用户的偏好。然后使用 PHP 回显出用户喜欢的 HTML 和 CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T22:22:51.210

编写一个接受用户 ID 作为参数的 PHP 脚本，并输出包含所有用户设置的 CSS 文件。然后让所有其他脚本执行类似的操作

```
<link rel="stylesheet" href="user_style.php?id=<?php echo $userid; ?>"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T22:30:47.557

1.  创建管理面板，用户可以在其中输入他们的样式设置。
2.  编写您的 php 代码以从该表单中获取数据，并将其保存到您存储数据的任何位置。
3.  当将应用这些样式的页面加载时，使用 javascript 设置样式。例如，如果您在您的网站上使用 jQuery，并且您打算将文本颜色应用于网站上的所有文本，您可以这样做：

    // 假设变量 customColor 已使用数据库中的数据设置。$('p').css('color', customColor);

现在，如果您没有做太多的 javascript，或者脚本和服务器端 php 之间的交互不多，那么这里可能存在差距。

# html - 动态调整照片大小而不是折叠

> ID：12013841
> 
> 赞同：0
> 
> 时间：2012-08-17T22:09:58.187
> 
> 标签：html, css, wordpress

此页面： [http](http://blueboxluxe.com/weddings-events/) ://blueboxluxe.com/weddings-events/ 上面有三张照片。我希望发生的是，随着浏览器的尺寸变小（以适应 iPhone/iPad），这些照片在跳转到下一行之前应该会缩小。

我让它在其他页面上正常工作（例如：[http](http://blueboxluxe.com/services/) ://blueboxluxe.com/services/ ），但是，这是一个稍微不同的布局。

无论如何，三张照片应该变得更小（连同标题覆盖和绿色框），直到页面宽度为 768 像素（iPad），然后它们应该每行跳到一张（就像现在一样）。

希望这一切都清楚了！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T23:23:43.413

**在对您的CSS**进行一些实验之后，似乎执行以下操作就足够了。首先，在`custom.css`第 732 行（`.page-id-13 .ngg-thumbnail img`规则）中，添加`width: 100%;`. 现在`nggallery.css`，在里面`html>body .ngg-album`（第 31 行），添加`max-width: 100%;`. 这应该可以解决您的问题（对我有用）。

我希望这对你有任何帮助！

# mysql - 动态（变量）数据库表名与存储在列中的变量

> ID：12013842
> 
> 赞同：0
> 
> 时间：2012-08-17T22:09:58.383
> 
> 标签：mysql, database-design, query-optimization, scaling, dynamic-tables

建立员工管理制度。

```
CREATE TABLE IF NOT EXISTS `tbl_employees` (
  `employee_id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `start_date` DATE NOT NULL,
  `end_date` DATE NOT NULL,
  PRIMARY KEY (`employee_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8; 
```

一名员工可以工作的公司有 10 家。有数以百万计的员工。基于编码标准，安全性和速度，哪个更好。

1.  每个公司都有一个单独的表，然后动态引用。例子。tbl_companya_employees、tbl_companyb_employees、tbl_companyc_employees **或**

2.  将 company_name 列添加到 tbl_employees 表

为什么？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T22:17:14.110

最好在员工表中有一个公司列，这将允许您编写适用于任何公司的通用联接。如果您有单独的表，则必须编写代码来为相应的公司生成动态查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T22:22:33.597

添加一个名为 company 的新表。

```
company 
    company_id int primary_key autoincrement whatever,
    name varchar,
    ... other details ... 
```

然后将 company_id 列添加到员工表中。

更好的是，如果你想保留的不仅仅是员工的 CURRENT 公司，创建一个employee_company_history 表：

```
employee_company_history
    employee_id
    company_id 
    start_date
    end_date 
```

# .htaccess - .htaccess DirectoryIndex 文件夹中的第一个 HTML 文件

> ID：12013843
> 
> 赞同：0
> 
> 时间：2012-08-17T22:10:00.120
> 
> 标签：.htaccess

我有一个目录，其中只有一个`.html`文件，但我不知道它会被调用什么，因为它是由我无法控制的引擎检索的。

如何指出它遇到`.htaccess` `DirectoryIndex`的第一个（也是唯一一个）文件？`.html`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T00:23:29.263

DirectorIndex`index.php`并编写一个小的 PHP 脚本，它执行以下操作。这将扫描目录中的第一个 HTML 文件并重定向到该目录。

```
<?php
foreach( scandir('.') as $f ) {
    if ( preg_match( "/\.html$/", $f) == 1  ) {
        header( "Location: http://{$_SERVER['HTTP_HOST']}/uri_path/$f", true, 302 );
        exit();
    }
}
header( 'Status: 404');
exit(); 
```

# java - Android SQLite 简介

> ID：12013844
> 
> 赞同：2
> 
> 时间：2012-08-17T22:10:01.507
> 
> 标签：java, android, database, sqlite, android-sqlite

我需要学习如何在我的应用程序中使用数据库，所以我决定[学习 vogella 的教程](http://www.vogella.com/articles/AndroidSQLite/article.html)，因为他的大多数其他教程都非常有帮助。我有几个问题要确保我的应用程序可以跨设备兼容。

他提到他的教程将使用 Async loader 类

> 本教程介绍如何在 Android 应用程序中使用 SQLite 数据库。它还演示了如何使用现有的 ContentProvider 以及如何定义新的 ContentProvider。它还演示了允许异步加载数据的 Loader 框架的用法。

[http://developer.android.com/reference/android/content/AsyncTaskLoader.html](http://developer.android.com/reference/android/content/AsyncTaskLoader.html)显示最低API级别是11？

我应该如何在 Android 中学习 SQLite？我应该使用本教程吗？我想确保我使用的是最好的标准，但要尽可能早地获得兼容性（至少 API 级别 7）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T22:27:52.047

异步进行 SQLite 调用通常是最佳实践。您可以使用具有 的 Android 支持库`AsyncTaskLoader`，但我通常只是扩展[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)，它是在 API 级别 3 中引入的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T22:24:43.667

使用 Android 支持库支持 AsyncTaskLoader

[http://developer.android.com/tools/extras/support-library.html](http://developer.android.com/tools/extras/support-library.html)

回到V4。CursorLoader（AsyncTaskLoader 的子类）是处理 SQLite 事务同时在 Android 上保持流畅的 UI 流的首选方式。请注意，CursorLoader 确实需要使用 ContentProvider，因此也值得关注 ContentProvider。

# android - 无法在片段类中获取操作栏

> ID：12013849
> 
> 赞同：35
> 
> 时间：2012-08-17T22:10:50.153
> 
> 标签：android, class, android-actionbar, fragment

我有一个包含三个片段类的活动。尝试从其中更改操作栏标题时出现错误。如果我尝试将这些类设为 public 而不是 public static，则在尝试启动该类时会出现错误。应该很清楚，代码是针对偏好的，尽管这不会改变任何东西。这是代码：

```
package com.simon.wikiics;

import android.preference.*;
import android.os.*;
import java.util.*;

public class MainSettingsActivity extends PreferenceActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

}

@Override
public void onBuildHeaders(List<Header> target) {
    loadHeadersFromResource(R.xml.headers, target);
}

//If I don't make the classes static my app force closes when I try to start them
public static class NavigationSettingsActivity extends PreferenceFragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.navigation);
        //The getActionBar() is what is giving me the error
        getActionBar().setTitle("Navigation");

    }
}

public static class InterfaceSettingsActivity extends PreferenceFragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.interf);
        //The getActionBar() is what is giving me the error
        getActionBar().setTitle("Interface");
    }

}

public static class OtherSettingsActivity extends PreferenceFragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.other);
        //The getActionBar() is what is giving me the error
        getActionBar().setTitle("Other");
    }
}
} 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2014-01-08T13:51:58.507

@Robert Estivil 如果您正在使用，请`AppCompatActivity`使用：

```
actionBar = ((AppCompatActivity)getActivity()).getSupportActionBar(); 
```

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-08-17T22:13:47.330

静态类看不到另一个类的私有字段。您将需要使用`getActivity().getActionBar()`来检索它。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-11-28T10:20:28.077

虽然我在这里回答迟了。我发现 arul 的答案很完美，但现在 ActionbarActivity 已被弃用，因此对该答案稍作修改即可完成工作：

```
ActionBar actionBar = ((AppCompatActivity)getActivity()).getSupportActionBar(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-10-02T18:45:54.827

使用 AppCompatActivity 建议切换到**工具栏**而不是操作栏，但如果您不这样做，则使用它来获取操作栏的实例。

```
((AppCompatActivity )getActivity()).getSupportActionBar(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-28T16:38:21.323

如果您使用 SherlokActionBar，您可以使用

```
ActionBar mActionBar = ((SherlockFragmentActivity) getActivity()).getSupportActionBar(); 
```

# perl - 通过变量引用一个类，perl

> ID：12013851
> 
> 赞同：2
> 
> 时间：2012-08-17T22:11:04.790
> 
> 标签：perl, subroutine

我正在编写一个带有插件模块的 IRC 机器人。有一个存储命令定义的 SQLite DB。

我将有一个模块`Bot::Plugins::Modes`，它会有像`kick`和这样的方法`voice`。我像这样实例化`Modes`：

```
$modes = new Bot::Plugins::Modes 
```

我可以调用这样的方法：

```
$modes->voice(arg1 arg2); 
```

在我的数据库中，我有字段`module`和`method`. 对于这个例子，模块和方法分别是`modes`和`voice`。

侦听机器人命令的侦听器执行它们。我正在尝试做类似...

```
&{"$module->$method"}(arg1, arg2) 
```

但我无法弄清楚语法。在它们可以通过模块加载并且只是我可以做的潜艇之前：

```
&{$command}(arg1, arg2) 
```

`$command`数据库中的方法字段在哪里。在这种情况下，它只是“声音”，`voice`是一个子程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T22:47:48.317

类名和方法名都可以是标量。其余的语法是正常的。

```
my $module = "Foo";
my $method = "bar";

# Same as Foo->bar($arg1, $arg2);
$module->$method($arg1, $arg2); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T22:48:31.863

```
$module->$method(arg1, arg2); 
```

另外，[`UNIVERSAL::can`](http://perldoc.perl.org/UNIVERSAL.html)如果你想在调用它之前检查一个方法是否存在。

```
$sub = $module->can($method);
if ($sub) {
    &$sub($module, arg1, arg2);
} 
```

（调用`&$sub(arg1, arg2)`就像调用`package::method(arg1, arg2)`，而不是`package->method(arg1, arg2)`。）

# heroku - GeoCouch 与 heroku 兼容吗？

> ID：12013852
> 
> 赞同：2
> 
> 时间：2012-08-17T22:11:16.050
> 
> 标签：heroku, couchdb, geospatial

GeoCouch 与 heroku 兼容吗？如果不是......还有什么可以替代的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T02:42:39.613

GeoCouch[需要使用源代码安装 couchdb](https://github.com/couchbase/geocouch/#prerequisites)。Heroku 有一个名为[Cloudant](https://addons.heroku.com/cloudant)的附加组件，它声称与 couch-db 兼容。

要了解 GeoCouch 是否有效，您可以尝试按照[GeoCouch 安装说明](https://github.com/couchbase/geocouch/#installation)获取、编译和运行 GeoCouch 与您的数据库。看起来您可能必须创建一个[buildpack](https://devcenter.heroku.com/articles/buildpacks)，或者将 GeoCouch 文件提交到您的 git depo 并在部署时复制它们。

# android - Android 发布到 Google Play 多个包

> ID：12013854
> 
> 赞同：1
> 
> 时间：2012-08-17T22:11:21.137
> 
> 标签：android, package

我即将将我的应用发布到 Google Play。我的项目有多个用于组织目的的包。这会导致问题吗？我应该将所有 .java 文件移到一个包中吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T22:19:21.660

您可以在项目中拥有任意数量的包，唯一对 android 市场重要的是您在清单文件中声明的包，`package="com.mypackage.miproyect"`因为该包将被标记为应用程序 ID，因此它应该是唯一的。

# powershell - 使用 windows powershell 安装 adobe reader

> ID：12013855
> 
> 赞同：0
> 
> 时间：2012-08-17T22:11:24.607
> 
> 标签：powershell, scripting, windows-server-2008-r2

我使用很多服务器，并想配置一个 powershell 脚本来安装 adobe reader。似乎一旦我为此设置了脚本格式，我就可以安装我需要的其他程序，例如（netmon）和（sqlxml 4.0）。

这些 .exe 文件将存储在 D:\

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:02:45.820

首先，您需要下载完整版的 Adob​​e Reader 安装程序（不是 Web 安装程序），但需要下载大约 40 mb 的离线安装程序。然后运行这个脚本：

```
&"C:\AdbeRdr1000_en_US.exe" /msi EULA_ACCEPT=YES /qn 
```

唯一的困难是它是异步的，所以它不会等待安装完成才退出

对于任何应用程序，只需 google 命令行选项并从 PowerShell 运行它

# eclipse - Eclipse SVN 注释模板

> ID：12013864
> 
> 赞同：-1
> 
> 时间：2012-08-17T22:13:03.100
> 
> 标签：eclipse, svn, comments, svncommit

有没有人有一些关于如何编写 SVN 评论模板的指示。我想包括：

*   当前日期 (YYYY-MM-DD)
*   提交的作者（代码的作者）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T15:03:39.960

1.  你为什么要做出改变。尝试通过阅读代码使这一点变得不明显。“修复错字”比更改“1 到 2”更可取。
2.  如果您正在处理缺陷，请包括缺陷#
3.  如果您正在处理增强请求或命名功能等，请将其包括在内。

# javascript - JavaScript / node.js 从模型中获取数据

> ID：12013867
> 
> 赞同：1
> 
> 时间：2012-08-17T22:13:43.590
> 
> 标签：javascript, node.js, closures

我 100% 肯定肯定有一些简单的答案，但今天我在谷歌上搜索很烂。代码中的问题。

```
async.waterfall([
  function(callback){
    callback(null, 'some value..');
  }
  ],
  function (err, result) {
    // how do I get result outside of this block?
   }
); 
```

如果我在此块之外设置一个变量并尝试为其分配“结果”，由于 JavaScript 范围的性质，它不会超出该块。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T07:48:10.117

谢谢大家的回答。我所做的 - 我已经切换到一个名为“step”的模块。它让我可以执行以下操作：

```
step = require('step');

var responseData = '{"a":1, "b":2}';

step(
  function someFunction1 () {
    // We do something here and return the result
    return '3';
  },
  function someFunction2 (err, result) {
    // We try to modify the variable that has been defined outside this block
    responseData.c = result;
  }
);

// responseData now returns {"a":1, "b":2, "c":3} 
```

也许我也可以用 async 做这样的事情——我不知道。但上述工作正是我想要的方式。

# javascript - 更新后未删除的动态手风琴最后一个元素

> ID：12013869
> 
> 赞同：0
> 
> 时间：2012-08-17T22:13:58.760
> 
> 标签：javascript, jquery, jquery-ui

我有一个像下面这样的动态手风琴，我在每个结果中添加了一个编辑按钮，单击时删除数据并重新创建手风琴（即从服务器的新数据重新填充函数数据），它工作正常，直到最后一个元素手风琴，即使被删除后的最后一个元素仍然是持久的并保留在列表中。尽管数据为空（不能对其执行任何操作）。我很困惑为什么会发生这种情况。所以基本上手风琴中总是剩下一个元素

data 是一个包含多个对象的 JSON 对象。

{data[0]: name:{} , user:{} data[1]: name:{} , user:{} // 索引是为了解释结构。。} ETC

```
function data(data){
    var parent = document.getElementById('accordion');
    //parent.setAttribute('class','bookListItem')
    removeChildrenFromNode(parent);
    for(var i=0 ; i < data.length ; i++)
        {
        var listItem = document.createElement('h3');
        parent.appendChild(listItem);
        listItem.setAttribute('style','height:110px');

        var link = document.createElement('a');
        listItem.appendChild(link);
        link.setAttribute('href','#');
        link.innerHTML = data[i].first.name + " by " + data[i].last.name;

        var pic = document.createElement('img');
        pic.setAttribute('src',data[i].book.pictureURL);
        pic.setAttribute('style','float:left;height:97px;width:64px"');
        link.appendChild(pic);

        var innerDiv = document.createElement('div');
        parent.appendChild(innerDiv);
        var innerList = document.createElement('ul');
        innerDiv.appendChild(innerList);
        //setting attributes
 edit.innerHTML ="Edit"
         edit.onclick=(function(i){   
         return function(){delete(data[i]);  
         }})(i);
         innerDiv.appendChild(edit);

    }
    $('#accordion').accordion('destroy').accordion(
        {
            collapsible:true,
            active:false
        });

} 
```

# ios - 带有工具栏和 UISegmentedControl 的 iOS 键盘

> ID：12013871
> 
> 赞同：0
> 
> 时间：2012-08-17T22:14:18.337
> 
> 标签：ios, uitoolbar, uikeyboard, uisegmentedcontrol

在我当前的 iOS 应用程序中，我的键盘上的工具栏中的分段控件出现问题。我试图基本上有一个带有工具栏的键盘，该工具栏在左侧有一个分段控件，带有上一个/下一个选项，然后是一个完成按钮。我完成了所有设置并且一切正常，除了我想做的一件事是确保在选择适当的文本框时预先选择了正确的段。我遇到的问题是，无论我单击哪个文本字段，都选择了错误的段，我必须按两次才能将其按正确的顺序排列。

这是正在创建的工具栏的代码（在 ViewDidLoad 中）

```
keyBar = [[UIToolbar alloc] init];
[keyBar setBarStyle:UIBarStyleBlack];
[keyBar sizeToFit];

segControl = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObjects:@"Previous", @"Next", nil]];
[segControl setSegmentedControlStyle:UISegmentedControlStyleBar];
segControl.selectedSegmentIndex = 0;
[segControl addTarget:self action:@selector(segSelected:) forControlEvents:UIControlEventValueChanged];

UIBarButtonItem *segButton = [[UIBarButtonItem alloc] initWithCustomView:segControl];
UIBarButtonItem *flexButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];
UIBarButtonItem *doneButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(resignKeyboard)];

NSArray *itemArray = [NSArray arrayWithObjects:segButton, flexButton, doneButton, nil];
[segButton release];
[flexButton release];
[doneButton release];

[keyBar setItems:itemArray]; 
```

这是我如何将栏添加到表格中的两个文本字段（也使用自定义单元格）

```
 #pragma mark - User Name Row
if (section == 0 && row == 0) {
    static NSString *TextEntryCell = @"TextCell";
    TextCell *customCell = (TextCell *)[tableView dequeueReusableCellWithIdentifier:TextEntryCell];
    if (customCell == nil) {
        NSString *nibName = nil;
        if (iPad) {
            nibName = @"TextCell_iPad";
        }
        else {
            nibName = @"TextCell";
        }
        NSArray *outlets = [[NSBundle mainBundle] loadNibNamed:nibName owner:self options:nil];
        for (id currentObject in outlets) {
            if ([currentObject isKindOfClass:[UITableViewCell class]]) {
                customCell = (TextCell *)currentObject;
                break;
            }
        }
    }

    customCell.selectionStyle = UITableViewCellSelectionStyleNone;
    customCell.typeLbl.text = @"User Name:";
    customCell.textField.placeholder = @"Enter User Name";
    customCell.textField.returnKeyType = UIReturnKeyNext;
    customCell.textField.clearButtonMode = UITextFieldViewModeWhileEditing;
    customCell.textField.tag = 1;
    //segControl.selectedSegmentIndex = 0;
    [customCell.textField setInputAccessoryView:keyBar];

    return customCell;
}

#pragma mark - Password Row
if (section == 0 && row == 1) {
    static NSString *TextEntryCell = @"TextCell";
    TextCell *customCell = (TextCell *)[tableView dequeueReusableCellWithIdentifier:TextEntryCell];
    if (customCell == nil) {
        NSString *nibName = nil;
        if (iPad) {
            nibName = @"TextCell_iPad";
        }
        else {
            nibName = @"TextCell";
        }
        NSArray *outlets = [[NSBundle mainBundle] loadNibNamed:nibName owner:self options:nil];
        for (id currentObject in outlets) {
            if ([currentObject isKindOfClass:[UITableViewCell class]]) {
                customCell = (TextCell *)currentObject;
                break;
            }
        }
    }

    customCell.selectionStyle = UITableViewCellSelectionStyleNone;
    customCell.typeLbl.text = @"Passphrase:";
    customCell.textField.placeholder = @"Enter Passphrase";
    customCell.textField.returnKeyType = UIReturnKeyGo;
    customCell.textField.clearButtonMode = UITextFieldViewModeWhileEditing;
    customCell.textField.tag = 2;
    segControl.selectedSegmentIndex = 1;
    [customCell.textField setInputAccessoryView:keyBar];

    return customCell;
} 
```

因此，如您所见，我基本上希望设置它，以便在选择第一个文本框时，则已经选择了段控件中的上一个段，然后将第二个文本框和下一个段的段相同。但是，无论我到目前为止尝试了什么，当我单击任一文本框时，第二个段始终是默认选定项，因此在第一个文本字段中它有点笨拙，因为我必须单击两个索引然后它才能开始正常工作。在我这样做之后，它就可以完美地工作，但这只是最初的显示给我带来了问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T22:40:09.897

您不能将栏添加到两个视图 - 它是一个对象，您不能共享它。您应该创建两个这样的栏，为两个视图添加一个唯一的。保留对两个分段控件的引用，并更新两者以反映选定的文本框。我相信架构会解决这个问题。如果没有，请在完成后更新问题或对此答案添加评论。

# c++ - 将地图数据矢量复制到矢量地图中

> ID：12013872
> 
> 赞同：1
> 
> 时间：2012-08-17T22:14:23.853
> 
> 标签：c++, vector, iterator, maps

很抱歉再次发布同样的问题，但我使用了建议的解决方案，并且它部分工作......所以我想澄清这个问题：

所以：

我定义了一个地图向量，如下所示：

```
typedef vector<map<string,unsigned int> > myvec; 
```

和这样的向量图（我称之为索引）：

```
typedef map<string,vector<unsigned int> > index; 
```

然后我做了以下事情：

在我的班级 myCoogle 中，我宣布`myvec maps_vec;`

我用地图填满了它...

在每张地图中都有一个单词（字符串）和一个数字（unsinged int）。

到目前为止，一切都很好。

我也声明了`index the_index;`

现在我想将所有不同的单词从 the_vec 复制到 the_index。

单词将是字符串...

对于每个向量，我将添加存储在地图向量中的数字。

例如：

the_vec 有 3 张地图。

> 第一个有：鸡，1 **|** 人,1 **|** 电梯,5 **|** 是,2 **|** ...
> 
> 第二个有：人，2 **|** 冰淇淋,3 **|** 是,3 **|** ...
> 
> 第三个有：电梯，1 **|** 熊,1 **|** 是，4 **|** 鸡,3 **|** ...

所以 the_index 应该是这样的：

*word,[整数向量]*

> 鸡[1,0,3]
> 
> 人,[1,2,0]
> 
> 电梯[5,0,1]
> 
> 是[2,3,4]
> 
> 冰淇淋[0,3,0]
> 
> 熊[0,0,1]

好的，这是我的功能：

```
void Coogle::make_index()
{
    //SCAN THE FIRST MAP
    myvec::iterator myvec_iter;
    map<string,unsigned int>::iterator map_iter;
    index::iterator idx_iter = the_index.begin();
    for(map_iter=maps_vec[0].begin(); map_iter!=maps_vec[0].end(); ++map_iter)
    {
        the_index[map_iter->first].push_back(map_iter->second);
    }

    //SCAN THE OTHER MAPS
    myvec_iter=maps_vec.begin();
    myvec_iter++;
    int i=0; //FILE #
    while(myvec_iter!=maps_vec.end())
    {
        i++;
        for(map_iter=maps_vec[i].begin(); map_iter!=maps_vec[i].end(); ++map_iter)
        {
            string word=map_iter->first;
            cout << "DEALING WITH WORD \"" << word << "\"" << endl;
            index::iterator location;
            location=the_index.find(word);
            if(location!=the_index.end()) //if word found in the index
            {
                cout << "WORD EXISTS!" << endl;
                location->second[i]=map_iter->second;
            }
            else //if not found
            {
                cout << "WORD DOES NOT EXIST! NEW WORD." << endl;
                the_index[word].push_back(map_iter->second);
            }
        }
        cout << endl;
        ++myvec_iter;
    }
} 
```

澄清： FILE# 是地图编号...我正在处理文件（* .txt 文件）。

好吧，在我扫描了第一张地图后，我尝试打印 the_index，一切都很好。但是我在扫描其他地图后尝试打印时得到了这个：

![错误](../Images/6534412b40e73aa658cf1ef6119ac662.png)

不过，“构建成功”。

当我运行程序时会弹出这个窗口。

所以我相信我的第二个“for”循环有问题。

任何人都可以帮忙吗？

非常抱歉，很长的帖子......

非常感谢 ！！！

**编辑：如果我不尝试打印 the_index，程序编译并运行得很好。但这当然还不够。但是我的打印功能还可以……这里：**

```
void Coogle::print_index() const
{
    index::const_iterator iter;
    for(iter=the_index.begin();iter!=the_index.end();++iter)
    {
        cout << "Word: " << iter->first << endl;
        //cout << "Files number is: " << files_number << endl; //prints: 3
        for(int i=0; i<files_number;i++)
            cout << "file #" << i+1 << ": " << iter->second[i] << " , " << endl;
    }
} 
```

**编辑：**

这是仅打印 1 张地图与打印 3 张地图的屏幕截图：

![1 地图对 3](../Images/4279d617c4a18a79132275f09b6263d6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T23:25:25.037

这是 C++11 的答案：

```
myvec v = /* ... */;

index q;

for (auto const & m : v)
    for (auto const & p : m)
        q[p->first].emplace_back(p->second); 
```

这与@Antimony 的解决方案相同，只是在视觉上更容易一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T22:23:17.103

编辑：好的，希望我终于明白你想要做什么。

```
typdef myvec::iter vmiter_t;
typdef map<string,unsigned int>::iter miter_t;
typdef set<string>::iter siter_t;

set<string> words;

for(vmiter_t vmiter=maps_vec.begin(); vmiter != maps_vec.end(); ++vmiter)
{
    for(miter_t miter = vmiter->begin(); miter != vmiter->.end(); ++miter)
    {
        words.insert(miter->first);
    }
}

for (siter_t iter=words.begin(); iter!=words.end(); ++iter){
    const string& word = *iter;
    for(vmiter_t vmiter=maps_vec.begin(); vmiter != maps_vec.end(); ++vmiter)
    {
        map<string,unsigned int>& temp = *vmiter;
        the_index[word].push_back(temp[word]);
    }
} 
```

很难说，因为您没有提供变量的声明（其中一些似乎命名错误），但我认为问题出在`location->second[i]=map_iter->second;`. 您正在尝试访问向量中的索引 i，但您的向量实际上并没有那么长。

编辑：现在我可以告诉你你实际上想要做什么，你让事情变得过于复杂。您根本不需要其他元素的单独循环。

# jquery - 减少jquery同位素隐藏元素的不透明度？

> ID：12013874
> 
> 赞同：0
> 
> 时间：2012-08-17T22:14:34.970
> 
> 标签：jquery, jquery-isotope

我如何才能将未选择的同位素元素淡化回 50% 并防止缩放动画作为默认值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T22:36:41.370

如果我没记错的话，你可以在[这个沙盒的源代码](http://www.hopfnordin.se/demo.html)中看到一个工作示例，它基于 David DeSandro 的 github 示例之一。它可以很容易地改变来做各种各样的事情。

# objective-c - 为什么我不能将 UIViewController 存储在 NSMutableDictionary 中？

> ID：12013878
> 
> 赞同：0
> 
> 时间：2012-08-17T22:15:33.550
> 
> 标签：objective-c, model-view-controller, uiviewcontroller

我正在学习 Objective-C，我目前正在尝试使视图控制器之间的转换适用于 iOS4/iOS5 设备（之后我将只对故事板执行相同的 iOS5）。

据我了解，您仅在 ViewControllers 实例化时才进行实例化，并且在屏幕外`viewDidUnload`时用于释放内存。`viewController.view`

我发现的示例确实在 buttonIsClicked 时调用的方法中实例化了下一个视图控制器。但是假设我想来回走，我很确定这不是正确的方法（即，如果我想保留表单值等）。

所以我把我所有的 viewControllers 都给了我的 appDelegate，然后我想把它们存储在一个很好的包含 NSMutableDictionnary 中，这样我就可以使用以下方法轻松检索一个实例：

```
AppDelegate *appDelegate = [UIApplication sharedApplication].delegate;
UIViewController *next = [appDelegate.controllers objectForKey:@"RegisterViewController"]; 
```

但是......它确实打破了一切（获得空白视图）。

我很想知道为什么。

* * *

这不起作用：

```
[self.controllers setObject:[[LoginViewController alloc] initWithNibName:@"LoginViewController_iPhone" bundle:nil] forKey:@"LoginViewController"];
[self.controllers setObject:[[RegisterViewController alloc] initWithNibName:@"RegisterViewController_iPhone" bundle:nil] forKey:@"RegisterViewController"];

self.window.rootViewController = [self.controllers objectForKey:@"LoginViewController"];
[self.window makeKeyAndVisible]; 
```

但这将：

```
UIViewController *loginViewController = [[LoginViewController alloc] initWithNibName:@"LoginViewController_iPhone" bundle:nil];
[self.controllers setObject:loginViewController forKey:@"LoginViewController"];
[self.controllers setObject:[[RegisterViewController alloc] initWithNibName:@"RegisterViewController_iPhone" bundle:nil] forKey:@"RegisterViewController"];

self.window.rootViewController = loginViewController;
[self.window makeKeyAndVisible]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T22:21:49.933

似乎您没有实例化您的字典 - 它仍然为零并忽略自身的所有操作。您必须在使用它之前对其进行分配初始化。

# java - MotionEvent.ACTION_DOWN 在 Android 中不起作用

> ID：12013882
> 
> 赞同：1
> 
> 时间：2012-08-17T22:16:06.223
> 
> 标签：java, android, touch-event

我编写了一个使用拖动和缩放的 android 应用程序。但是当我编程`Touch`课时`MotionEvent.ACTION_DOWN`，`MotionEvent.ACTION_POINTER_DOWN`并`MotionEvent.ACTION_MOVE`没有工作。如何修复我的代码？

触摸类：

```
private static final int NONE = 0;
private static final int DRAG = 1;
private static final int ZOOM = 2;

private static final float MAX_ZOOM = 3f;
private static final float MIN_ZOOM = 3f;

public boolean onTouch(View view, MotionEvent event) {
    int mode = NONE;
    float oldDistance = 1f;

    Matrix matrix = new Matrix();
    Matrix savedMatrix = new Matrix();

    PointF start = new PointF();
    PointF mid = new PointF();

    ImageView imageView = (ImageView)view;

    switch(event.getAction() & MotionEvent.ACTION_MASK) {

        case MotionEvent.ACTION_DOWN:
            savedMatrix.set(matrix);
            start.set(event.getX(), event.getY());
            mode = DRAG;
            break;

        case MotionEvent.ACTION_POINTER_DOWN:
            oldDistance = spacing(event);
            if(oldDistance > 10f) {
                savedMatrix.set(matrix);
                midPoint(mid, event);
                mode = ZOOM;
            }
            break;

        case MotionEvent.ACTION_UP:
        case MotionEvent.ACTION_POINTER_UP:
            mode = NONE;
            break;

        case MotionEvent.ACTION_MOVE:
            if(mode == DRAG) {
                matrix.set(savedMatrix);
                matrix.postTranslate(event.getX() - start.x, event.getY() - start.y);
            }
            else if(mode == ZOOM) {
                float newDistance = spacing(event);
                if(newDistance > 10f) {
                    matrix.set(savedMatrix);
                    float scale = newDistance / oldDistance;
                    float[] values = new float[9];
                    matrix.getValues(values);
                    float currentScale = values[Matrix.MSCALE_X];
                    if(scale * currentScale > MAX_ZOOM) 
                        scale = MAX_ZOOM / currentScale;
                    else if (scale * currentScale < MIN_ZOOM) 
                        scale = MIN_ZOOM / currentScale;
                    matrix.postScale(scale, scale, mid.x, mid.y);
                }
            }
            break;
    }
    imageView.setImageMatrix(matrix);
    return true;
}

private float spacing(MotionEvent event) {  
    float x = event.getX(0) - event.getX(1);
    float y = event.getY(0) - event.getY(1);
    return FloatMath.sqrt(x * x + y * y);
 }

private void midPoint(PointF point, MotionEvent event) {
    float x = event.getX(0) + event.getX(1);
    float y = event.getY(0) + event.getY(1);
    point.set(x / 2, y / 2);
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T00:00:55.270

有必要使用 switch case 语句吗？您可能更容易阅读，但是当我这样做时>>

```
 if (event.getAction() == MotionEvent.ACTION_UP){

    } else if (event.getAction() == MotionEvent.ACTION_DOWN) {

    } else if (event.getAction() == MotionEvent.ACTION_MOVE) {

    } 
```

它工作得很好。此外，您应该在 case 语句中添加日志调用，以了解您的 onTouch 是否被调用，以及它通过哪些情况，哪些情况不通过。您还可以记录掩码和事件代码传入的值吗？这些都会有所帮助。

# java - java中的关键跟踪器电子邮件集成挂钩

> ID：12013883
> 
> 赞同：0
> 
> 时间：2012-08-17T22:16:08.573
> 
> 标签：java, google-app-engine, pivotaltracker

我们有一个简单的要求，即当电子邮件发送到我们的组织 ID（例如 bugs@my-org.com）时，能够在 PivotalTracker 中创建故事

我可以找到基于 ruby​​ 或 ruby​​ 的包装器，但在 java 中没有可以在我们的 GAE 应用程序上运行的东西。如果存在任何此类解决方案，有什么建议吗？

在 [https://www.pivotaltracker.com/help/api?version=v3#add_story](https://www.pivotaltracker.com/help/api?version=v3#add_story)中提到了一些 api，其中包含 curl 中的代码

```
curl -H "X-TrackerToken: $TOKEN" -X POST -H "Content-type: application/xml" \
    -d "<story><story_type>feature</story_type><name>Fire torpedoes</name><requested_by>James Kirk</requested_by></story>" \
    http://www.pivotaltracker.com/services/v3/projects/$PROJECT_ID/stories 
```

不知道我们如何在java中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T22:41:41.207

你需要做两件事：

1.  在 GAE 中[接收电子邮件](https://developers.google.com/appengine/docs/java/mail/receiving)

2.  通过 URLFetch 发出 POST 请求：

    ```
    String pivotalUrl = "http://www.pivotaltracker.com/services/v3/projects/"+projectID+"/stories"

    String body = "<story><story_type>feature</story_type><name>Story name</name><requested_by>James Kirk</requested_by></story>"

    URLFetchService fetchService = URLFetchServiceFactory.getURLFetchService();
    HTTPRequest request =  new HTTPRequest(pivotalUrl, HTTPMethod.POST, FetchOptions.Builder.withDeadline(30));
    request.addHeader(new HTTPHeader("X-TrackerToken","putTokenHere"));
    request.addHeader(new HTTPHeader("Content-type","application/xml"));

    HTTPResponse response = fetchService.fetch(request);
    if (response.getResponseCode() != 200) {
        // something went wrong
    } 
    ```

# regex - 检查字符串与所有给定的正则表达式集之间是否匹配

> ID：12013884
> 
> 赞同：2
> 
> 时间：2012-08-17T22:16:09.247
> 
> 标签：regex, perl

我知道可以在正则表达式上使用 OR 运算符：

```
$str = "Here is a strawhat, some cranberry, and a strawberry!";
while($str =~ /(\bstraw\B|\Bberry\b)/g) {
  print "Thanks for the $& !\n";
} 
```

除了while循环之外，是否有一种简单而简短的方法来对它们进行AND而不是OR，以便唯一的匹配是“草莓”？

换句话说，我需要检查字符串中是否存在与所有给定正则表达式匹配的子字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T22:35:24.853

如果我正确理解您的问题，您可以为此使用[前瞻断言：](http://perldoc.perl.org/perlre.html#Look-Around-Assertions)

```
if ($str =~ /^(?=.*?regexp-1)(?=.*?regexp-2)...(?=.*?regexp-n)/s) {
    # $str matches regexp-1, regexp-2, ..., regexp-n.
} 
```

这个结构中有几个假设：

*   所有的子表达式都是格式良好的。
*   没有一个子表达式使用`.`元字符来表示“除换行符之外的任何字符”。您可以根据需要重新启用此行为`(?-s:...)`。

# php - 来自数据库的 PHP 随机字符串验证

> ID：12013889
> 
> 赞同：1
> 
> 时间：2012-08-17T22:16:57.167
> 
> 标签：php, mysql

我正在研究 url Shortener，目前我正面临随机生成字符串的问题。我想做的是：

1.  生成一个随机字符串 [已经完成]
2.  搜索数据库是否存在[已经完成]
3.  如果它已经存在，则生成一个新的并再次进行检查 [ Stacked !]
4.  如果它是独一无二的，则进行下一个流程

现在这是用于生成随机字符串的代码

```
function randString($length, $charset='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789') {
$str = '';
$count = strlen($charset);
while ($length--) {
    $str .= $charset[mt_rand(0, $count-1)];
}
return $str; } 
```

我现在能做什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T22:22:12.727

使用 while 循环：

```
$random_string = randString(10);
$is_unique = false;

while (!$is_unique) {
    $result = query_the_database('SELECT id FROM table_with_random_strings WHERE random_string_column = "'.$random_string.'" LIMIT 1');
    if ($result === false)   // if you don't get a result, then you're good
        $is_unique = true;
    else                     // if you DO get a result, keep trying
        $random_string = randString(10);
} 
```

我留下了通用的数据库代码，因为我不确定你在使用什么......但我希望它是`mysqli`或 PDO :)

还想提一下，有一些函数可以为您生成唯一的字符串，例如`uniqid`. 这样的函数可能会在第一次生成唯一字符串方面取得更大的成功，从而在`while`大多数情况下使循环变得不必要——这是一件好事。

```
echo uniqid(); // 502ec5b8ed2de 
```

*但是，您对length*没有太多的控制权，如果这比您坚持使用自制随机生成器更重要 - 只是期望发生冲突的可能性更大。

**编辑**另一件事：通常，许多内容发布系统将使用文章标题，而不是对您的用户无意义的随机字符串。这被称为（有时）“post slug”。如果您的标题为“11 月 17 日：大猩猩狂野，裸照猿直播！”，则网址为：

```
http://www.mywebsiteaboutgorillas.com/november-17th-gorillas-gone-wild-topless-apes-live 
```

这样的 URL 对您的用户的意义比：

```
http://www.mywebsiteaboutgorillas.com/jh7sj347dfj4 
```

制作一个“post slug”：

```
function post_slug($url='', $sep='-') {
    // everything to lower and no spaces begin or end
    $url = strtolower(trim($url));

    // adding - for spaces and union characters
    $find = array(' ', '&', '\r\n', '\n', '+',',');
    $url = str_replace ($find, '-', $url);

    //delete and replace rest of special chars
    $find = array('/[^a-z0-9\-<>]/', '/[\-]+/', '/<[^>]*>/');
    $repl = array('', '-', '');
    $url = preg_replace ($find, $repl, $url);

    if ($sep != '-')
        $url = str_replace('-', $sep, $url);

    //return the friendly url
    return $url; 
} 
```

...您仍然需要注意那里的唯一性，有时 CMS 会将日期或 ID 作为伪子目录附加，以帮助减少重复。您也许可以在 URL 缩短器中使用类似的功能，以至少让用户知道他们将要点击什么。

**文档**

*   `while`- [http://us.php.net/manual/en/control-structures.while.php](http://us.php.net/manual/en/control-structures.while.php)
*   `mysqli`- [http://us.php.net/manual/en/book.mysqli.php](http://us.php.net/manual/en/book.mysqli.php)
*   PDO - [http://us.php.net/manual/en/book.pdo.php](http://us.php.net/manual/en/book.pdo.php)
*   `uniqid`- [http://php.net/manual/en/function.uniqid.php](http://php.net/manual/en/function.uniqid.php)

# r - 概率潜在语义分析 R

> ID：12013890
> 
> 赞同：0
> 
> 时间：2012-08-17T22:17:04.227
> 
> 标签：r, semantics, analysis

是否有支持 R 概率潜在语义分析的包？我找到了 LSA 包，但有没有专门执行 pLSA 的包？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T02:17:07.690

第一次上谷歌搜索：r-project 主题模型概率潜在语义分析

[www.jstatsoft.org/v40/i13/paper](http://www.jstatsoft.org/v40/i13/paper)

# security - IE7/8 不会从服务器打开 .XLS 或 .DOC 文件 - 仅适用于少数用户

> ID：12013892
> 
> 赞同：0
> 
> 时间：2012-08-17T22:17:15.597
> 
> 标签：security, internet-explorer, .doc

我们的内部网站上有许多 Excel、Word 和 PDF 文件供所有员工下载。对于一些拥有 Windows XP Prof 和 IE 8 的用户，他们无法打开 .doc 或 .xls 文件类型，但可以打开 PDF 文件。它在 Chrome 中运行良好。当文件下载 - 安全警告弹出时，他们无法打开或保存。如果我尝试打开，它是空白的，如果我尝试保存，我会收到错误消息。此外，文件扩展名不是 .doc，它显示为 _doc（见图）。我读了下面的帖子，但它仍然在做同样的事情。

[为什么 IE8 不会从服务器打开“.XLS”文件？](https://stackoverflow.com/questions/5723520/why-wont-ie8-wont-open-xls-file-from-server?rq=1)

![在此处输入图像描述](../Images/4accb075d7b9a53b797082c58a204d05.png)

# tabs - ExtJs 4 - 如果不存在则添加新选项卡并在网格上列出数据

> ID：12013893
> 
> 赞同：0
> 
> 时间：2012-08-17T22:17:40.810
> 
> 标签：tabs, grid, extjs4

我使用 Ext Js 4，里面有一个标签面板和标签。我已设法添加新选项卡并防止添加已打开的相同选项卡。无论如何，数据在第一次打开后列出，但在重新打开后无法列出。我认为 Ext Js 4 存在与在数据网格上列出数据相关的问题。你能就这个问题提供一个建议和样本吗？提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T15:37:55.557

Based on your question it sounds like you have a `gridpanel` inside of a `tabpanel`:

> Anyhow, the data is listed after first opening, but cannot be listed after reopening. I think there is a problem with Ext Js 4 related to listing data on datagrid.

When you first open your tab the `gridpanel` has data in it, then when you close it and reopen it there is no data. Correct me if I have this wrong.

That would be normal ExtJS behavior if you are creating the `datastore` for your `gridpanel` separate from the code that creates the `gridpanel`.

When you close your `gridpanel` tab (destroying it), it will also destroy the store that holds the data for it.

There are a few solutions, you can give your store a `storeId` config which will register it with `StoreManager` and keep it from getting destroyed when a component is destroyed. Using this method you can also configure your `gridpanel` with the store like this:

```
// other grid configs...
store: Ext.StoreManager.lookup('yourStoreId'),
// other grid configs... 
```

That method will *not* reload the store data when you create a new `gridpanel` tab. If you actually want the store to load new data whenever you create a new tab you should simply include your store creation code - `Ext.create(Ext.data.Store, { //etc..` (or however you are doing it) with the same code that is creating the `gridpanel` tab.

With that second method, your `gridpanel` will continue to destroy its `datastore` whenever it closes - the way it is doing now, but you will recreate and reload the store whenever you create a new tab so it will not be a problem.

I think there is also a config somewhere that lets you specify if you want the `gridpanel` to destroy the store when it is destroyed itself.

I usually use the first method however, then I destroy the store manually when I really don't need it anymore. Or reload the data manually when I want that. It helps cut down on unnecessary Ajax requests on the server.

# regex - 如何检查正则表达式是否匹配整个字符串？

> ID：12013896
> 
> 赞同：0
> 
> 时间：2012-08-17T22:17:48.320
> 
> 标签：regex, perl

我有一个匹配这样的东西的正则表达式： asdasd[text]; 它一次可以正常工作，但是如果有类似的东西：

```
$badinput="add[2,5,525];print['peron'];print['asd','cgfg];time;print['iudofiusdoif'];"; #time should not be matched 
```

这是现在的代码：

```
verify($badinput);
sub verify
{
#returns 1 if it's ok, or the text that breaks the match
    my $inp = pop;
    if ($inp =~ /^(?:\w{2,6}\[(?<!\\\[).*?\](?<!\\\]);)+$/s)
    {
        return 1;
    }else{
        return 0; #should be the text that breaks the match or the char number
    };
} 
```

无论第一条指令是否匹配，它都会返回 1。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T22:27:31.460

单程。我的正则表达式与您的相似，但没有后视。

一个例子。内容`script.pl`：

```
#! /usr/bin/perl

use warnings;
use strict;

while ( <DATA> ) {
        chomp;
        printf qq|%s ==> %s\n|, $_, ( m/^(\w{2,6}\[[^]]*\];)+$/ ) ? q|ok| : q|not ok|;
}

__DATA__
add[2,5,525];print['peron'];print['asd','cgfg];time;print['iudofiusdoif'];
add[2,5,525];print['peron'];print['asd','cgfg];print['iudofiusdoif']; 
```

像这样运行它：

```
perl script.pl 
```

具有以下输出：

```
add[2,5,525];print['peron'];print['asd','cgfg];time;print['iudofiusdoif']; ==> not ok
add[2,5,525];print['peron'];print['asd','cgfg];print['iudofiusdoif']; ==> ok 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T23:51:21.990

```
sub verify
{
  return ($_[0] =~ m/^((?:\w{2,6}\[[^\]]*\];)+)$/)? 1 : 0;
} 
```

[在此处](http://ideone.com/WGI1Y)测试此代码。

# mysql - 在 MySQL 中选择不同的对

> ID：12013900
> 
> 赞同：7
> 
> 时间：2012-08-17T22:18:11.193
> 
> 标签：mysql, distinct

我想在 A 列和 B 列中选择具有相同值的行。

例如，如果我的表是：

```
-----
A | B
-----
1 | 2
3 | 4
1 | 2
4 | 5 
```

输出应该是：

```
A  B
1  2 
```

*   [A]`SELECT DISTINCT A, B FROM table;`
    选择表中的所有值。
*   [B]`SELECT DISTINCT (A, B) FROM table;`
    告诉我 Distinct 函数只能取一个值。
*   [C]`SELECT A, B FROM table GROUP BY A, B;`
    选择表中的所有值（类似于 A）。

该问题类似于[选择不同的组合。](https://stackoverflow.com/questions/6870397/selecting-distinct-combinations)，但建议的答案不起作用。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-17T22:26:03.223

您只需要具有重复项的行。您可以使用该`HAVING`子句根据聚合函数过滤数据的“分组”：

```
SELECT   A,B
FROM     tbl
GROUP BY A,B
HAVING   COUNT(*) > 1 
```

# css - 除第一个元素外的类的 Css 选择器

> ID：12013903
> 
> 赞同：3
> 
> 时间：2012-08-17T22:18:17.683
> 
> 标签：css, css-selectors

我有以下div：

```
<div id="container">
    <div class="different_class"></div>
    <div class="child"></div>
    <div class="child"></div>
    <div class="child"></div>
    <div class="child"></div>
</div> 
```

我想为所有带有（.child）的子div应用边框，除了第一个。所以最后除了 (.differ_class) 和 (.child:eq(0)) 之外的所有子 div （我不想在真正的问题中使用 nth-child，因为我可能没有 .different_class div）将拥有边界。

我认为解决方案可能是使用 :not() 选择器，但我不太确定如何。谢谢'

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T22:20:33.120

试试这个[http://jsfiddle.net/5XuE3/](http://jsfiddle.net/5XuE3/)

```
#container div.child + div.child
{
border: solid 1px black;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T22:21:17.090

```
.child { some css }
.child:first-child { other styling } 
```

**编辑**

为什么不工作？检查这个[jsfiddle](http://jsfiddle.net/Nb2fs/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-21T16:54:31.030

`+`在这种情况下，选择器将起作用，因为所有具有`child`类的元素都在一起，但如果另一个不同的元素（或具有另一个类）在它们之间，它将不起作用。

发生这种情况是因为选择器将匹配**紧跟在**另一个之后`+`放置的所有元素。**`div.child`**

 **例子：

```
#container div.child + div.child{
  border: 1px solid;
}
```

```
<div id="container">
    <div class="different_class">Test</div>
    <div class="child">Test</div>
    <div class="child">Test</div>
    <div class="different_class">Test</div>
    <div class="child">Test</div>
    <div class="child">Test</div>
</div>
```

为避免这种情况，我们可以使用选择器，它将`~`匹配所有**前面**的元素`div.child`，而**不是****紧跟在**它后面的元素。所以它不会与第一个`div`与`child`class 匹配，而是会与 class 的其余部分匹配，`divs`而不`child`考虑其余元素。

例子：

```
#container div.child ~ div.child{
  border: 1px solid;
}
```

```
<div id="container">
    <div class="different_class">Test</div>
    <div class="child">Test</div>
    <div class="child">Test</div>
    <div class="child">Test</div>
    <div class="child">Test</div>
</div>
```**

# php - windows文件夹名称编码

> ID：12013906
> 
> 赞同：0
> 
> 时间：2012-08-17T22:18:45.653
> 
> 标签：php, windows, encoding, character-encoding

我在 Windows 中有一个带有阿拉伯名称（utf8）的文件夹我正在尝试获取此名称并使用 php 在浏览器中显示它

```
$enc = mb_detect_encoding($folder);
$utf8folder = iconv($enc, "UTF-8", $folder);
echo $utf8folder; 
```

或者

```
echo $folder; 
```

得到����...

帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T22:26:54.060

将此添加为 php 脚本的第一行并尝试：

```
header('Content-Type: text/html; charset=UTF-8'); 
```

# ruby-on-rails - 如何有效地进行版本控制和部署第 3 方 Rails Web 应用程序？

> ID：12013909
> 
> 赞同：2
> 
> 时间：2012-08-17T22:19:05.250
> 
> 标签：ruby-on-rails, git, deployment

部署您自己的 Rails 应用程序相当简单。但是，我发现尝试将第 3 方 Rails 应用程序置于版本控制和部署之下是相当痛苦的。

假设我想采用现有的 RoR 应用程序（在我的情况下是 Redmine，但这可以适用于任何应用程序，甚至超出 Rails），并将其部署在我的（传统）托管服务器上。我想确保我可以撤消对配置或本地自定义所做的任何更改，但我也希望能够定期升级到最新版本。

Redmine 的公共 git 存储库有一个`.gitignore`文件，其中包含配置 yaml 文件和会话存储等内容。这对开发有意义，但对部署肯定没有意义。

看来我有几个选择：

1.  在我的官方 repo 副本中取消忽略配置文件，并添加我的自定义、插件等。然后我可以将新版本合并到我的分支并处理冲突。
2.  保留官方存储库中没有历史记录的本地存储库。合并新版本将完全是手动的。
3.  做一些更复杂的事情。多级分支/存储库？

这些选项对我来说似乎都不是特别优雅或简单，所以到目前为止我采取了简单的路线：什么都不做。

这似乎是一个常见问题，但我找不到任何真正涵盖此问题的博客或问题。您如何处理部署第 3 方 Web 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T00:47:19.647

一些选项是：

### 使用[capistrano](https://github.com/capistrano/capistrano/wiki)进行部署。

有很多使用 capistrano 运行数据库迁移的教程，你可以将它们全部保存在 git 中

### 使用[puppet](http://puppetlabs.com/puppet/puppet-open-source/)或[chef](http://www.opscode.com/chef/)进行迁移。

这样做的好处是能够设置和运行各种部署，包括添加服务器等

### 秘诀：持续部署

使用一个地方自动执行这些迁移。

设置一个 CI 服务器（例如：[Jenkins](http://jenkins-ci.org/)），它监视上游（或其他）存储库`origin`并`live`执行那里提交的迁移。此外，Jenkins 可以设置为监视 repo 中的回滚，并在复制更新的代码*之前执行免费的向下迁移。*

### CI太大了？

如果 CI 设置过大，那么有 git 托管/部署服务可以在中间做得很好。我使用[Springloops](http://www.springloops.com/v2/)进行简单的部署，并使用 REST 挂钩在每个部署中执行数据库迁移。不幸的是，它只适用于“向上”迁移，“向下”迁移仍然是手动完成的。

# java - 在杰克逊视图中设置 DEFAULT_VIEW_INCLUSION 时遇到问题

> ID：12013915
> 
> 赞同：9
> 
> 时间：2012-08-17T22:19:55.873
> 
> 标签：java, json, jackson

[http://wiki.fasterxml.com/JacksonJsonViews](http://wiki.fasterxml.com/JacksonJsonViews)上有关杰克逊视图的官方文档 说，您使用这种行来排除未明确映射到视图的属性。

> objectMapper.configure(SerializationConfig.Feature.DEFAULT_VIEW_INCLUSION, false);

这就是我想做的——但这条线没有为我编译。有人使用这个配置指令吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-18T02:31:42.890

随着 2.0 版本的重新设计/重构，[它被](http://wiki.fasterxml.com/JacksonRelease20#SerializationConfig.Feature.2C_DeserializationConfig.Feature)移至[MapperFeature.DEFAULT_VIEW_INCLUSION](http://fasterxml.github.com/jackson-databind/javadoc/2.0.2/com/fasterxml/jackson/databind/MapperFeature.html#DEFAULT_VIEW_INCLUSION)。

# html - 我可以在 Rails 中使用哪些工具/方法从外部 URL 获取信息？

> ID：12013917
> 
> 赞同：1
> 
> 时间：2012-08-17T22:20:05.367
> 
> 标签：html, ruby-on-rails, ruby

我正在寻找一种方法来在 rails 的外部 URL 中获得最大的图像。例如，将提供一个 URL。服务器端将扫描页面的 HTML，然后“抓取”它找到的最大图像，并下载它（或收集它的链接）。

有谁知道我可以用什么工具来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T22:34:38.807

概括地说，有两种方法可以做到这一点，要么自己做，要么插入外部服务。

如果您想自己执行此操作，我建议您使用[nokogiri](http://nokogiri.org/) gem，它允许您解析 HTML 页面并提取所需的标签。例如，要从页面中获取所有图像链接，您可以这样做：

```
require 'nokogiri'
require 'open-uri'

doc = Nokogiri::HTML(open('<INSERT URL HERE>'))

doc.css('img').each do |link|
  puts link.attr("src").value
end 
```

要获得最大的图像，您必须实际确定它们的大小。“ [fastimage](https://github.com/sdsykes/fastimage) ” gem 看起来对此很有用。

另一种选择是使用外部服务来执行此操作。我建议检查[embedly](http://embed.ly/)，其中有一个[gem](https://github.com/embedly/embedly-ruby)。如果您认为您将来可能计划需要这些链接中的任何其他信息，我认为这将是更好的选择，但请注意访问可以让您获得最大图像（[预览](http://embed.ly/docs/endpoints/1/preview)）的服务版本实际需要支付月费。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T02:45:17.517

Nokogiri 很棒，但是对于这个任务，你真的需要机械化：

```
require 'mechanize'
agent = Mechanize.new
page = agent.get 'http://www.amazon.com/' 
```

您需要先下载所有图像，然后才能确定最大的图像。

```
images = page.images.map{|image| agent.get image.url}
largest = images.max_by{|image| image.body.size}
largest.save 
```

如果下载所有图像看起来太多，您可以考虑发出 HEAD 请求并比较内容长度响应标头。

# twitter - 更大的 Twitter 用户个人资料图片

> ID：12013920
> 
> 赞同：1
> 
> 时间：2012-08-17T22:20:17.010
> 
> 标签：twitter

我正在开发一个应用程序来显示用户的推文以及他们的图像。但是显示的图像非常小。我想要通常显示在他们的个人资料上的图像（通常为 128*128）。这是我的相关代码：

```
foreach($ret1->results as $x)
{
     echo "<div class='ttl'><div class='ttlpadding'><div class='item'><a href=\"","http://www.twitter.com/".$x->from_user,"\" target=\"_blank\"><img src=\"",$x->profile_image_url,"\" title=\"", $x->from_user." (".$x->from_user_name.")", "\" /></a>\n";

    $text = preg_replace('/\s+#(\w+)/',' <a href="http://search.twitter.com/search?q=%23$1">#$1</a>', $x->text);
    echo "<div class='clr'></div>";
    echo "<div class='tweet'>".$text."</div></div></div></div><div class='clrflt'></div>";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T22:31:38.430

你可以试试

`substr($x->profile_image_url,[index-start],strlen($x->profile_image_url)[index-end]).'jpg'`

这将返回用户上传的原始图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T08:27:06.900

用于获取大图像

称呼

```
http://api.twitter.com/1/users/profile_image/username.json?size=original 
```

用推特句柄替换用户名

# nsdate - 我无法将此日期时间字符串从 Django 转换为 iOS NSDate

> ID：12013921
> 
> 赞同：3
> 
> 时间：2012-08-17T22:20:21.927
> 
> 标签：nsdate, nsdateformatter

我`2012-08-17T10:56:45.508205`从 Django API 获取 NSString 作为时间。

我正在尝试`NSDate`使用以下代码将该字符串转换为对象：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
NSTimeZone *timeZone = [NSTimeZone timeZoneWithName:@"UTC"];
[dateFormatter setTimeZone:timeZone];
[dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss.SSSZ"];
NSDate *date = [dateFormatter dateFromString:stringToConvert]; 
```

但日期对象为空。我哪里错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T03:11:22.370

您从 Django API (2012-08-17T10:56:45.508205) 获得的[ISO8601](http://www.w3.org/TR/NOTE-datetime)字符串不包含时区组件。但是，您在格式字符串中包含该字段符号 (Z)。只需删除它，它应该可以正常工作。

```
[dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss.SSS"]; 
```

有关格式化代码的更多信息，请参阅[Unicode 技术参考：](http://unicode.org/reports/tr35/tr35-10.html#Date_Format_Patterns)

# sql-server - Fluent NHibernate 多对多使用非 PK 列

> ID：12013924
> 
> 赞同：2
> 
> 时间：2012-08-17T22:20:42.113
> 
> 标签：sql-server, nhibernate, fluent-nhibernate

我需要在其中两个中使用非 PK 列关联一些表。表和 FK 设置如下：

![在此处输入图像描述](../Images/f11fdd5125a6a724ffbbe81ac1e11553.png)

因此，可以通过 MessageUserGroups 表将消息分配给许多用户和组。此外，可以通过 UserGroups 表将一个用户分配给多个组。

由于遗留原因，用户和组中的 AdGuid 字段（唯一标识符）不是主键。但是，我想使用 MessageUserGroups 中的 UserId 和 GroupId 字段通过其 AdGuid 字段将消息与用户和组相关联。

此外，我想在 User 上有一个 PostedMessages 属性，它将 Message.AuthorId 与 User.AdGuid 相关联，并在 User 和 Group 上有 Messages 属性，它通过 MessageUserGroups 与消息相关。

我该如何向 Fluent NHibernate 解释这一点？

目前的映射看起来像：

```
public MessageMap()
{
    Id(m => m.Id);
    References(m => m.Author).Nullable().ForeignKey("FK_Messages_Author").Column("AuthorId").Fetch.Join().PropertyRef(u => u.AdGuid);

    HasManyToMany<users.user>(m => m.Users)
        .Cascade.All()
        .ParentKeyColumn("MessageId")
        .ChildKeyColumn("UserId")
        .Table("MessageUserGroups")
        .FetchType.Join();

    HasManyToMany<users.group>(m => m.Groups)
        .Cascade.All()
        .ParentKeyColumn("MessageId")
        .ChildKeyColumn("GroupId")
        .Table("MessageUserGroups")
        .FetchType.Join();
}
public UserMap()
{
    Id(u => u.Id);
    Map(u => u.AdGuid);

    HasManyToMany<staff.Message>(u => u.Messages)
        .Cascade.All()
        .ParentKeyColumn("AdGuid")
        .ChildKeyColumn("UserId")
        .Inverse()
        .LazyLoad()
        .Table("MessageUserGroup")

    HasMany<staff.Message>(u => u.PostedMessages)
        .Cascade.All()
        .KeyColumn("AuthorId")
        .Inverse()
        .LazyLoad()
        .Table("Messages")

    HasManyToMany<Group>(u => u.Groups)
        .Cascade.All()
        .Not.LazyLoad()
        .Cascade.All()
        .ParentKeyColumn("UserID")
        .ChildKeyColumn("GroupID")
        .Table("UserGroups")
}
public GroupMap()
{
    Id(g => g.Id);
    Map(g => g.AdGuid);

    HasManyToMany<staff.Message>(g => g.Messages)
        .Cascade.All()
        .ParentKeyColumn("AdGuid")
        .ChildKeyColumn("GroupId")
        .Inverse()
        .LazyLoad()
        .Table("MessageUserGroup")

    HasManyToMany<User>(g => g.Users)
        .Inverse()
        .Cascade.All()
        .ParentKeyColumn("GroupId")
        .ChildKeyColumn("UserId")
        .Table("UserGroups")
} 
```

有点长，我知道。我可以使用 NH 成功查询消息。但是，当延迟加载 User 或 Group 的 Messages 属性时，NH 会生成以下 SQL（为简洁起见，删除了额外的属性）：

```
SELECT users0_.MessageId as MessageId1_, users0_.UserId as UserId1_, user1_.Id
as id38_0_, user1_.AdGuid as guid38_0_ FROM MessageUserGroups users0_
LEFT OUTER JOIN Users user1_ on users0_.UserId=user1_.Id WHERE users0_.MessageId=@p0 
```

该联接无效，因为它试图将 uniqueidentifer MessageUserGroups.UserId 与 bigint User.Id 进行比较。

同样，当延迟加载 User.PostedMessages 时，会生成以下 SQL（同样，缩写）：

```
SELECT postedmess0_.AuthorId as AuthorId1_, postedmess0_.Id as Id1_, postedmess0_.Id as Id43_0_, postedmess0_.AuthorId as AuthorId43_0_
FROM Staff.Messages postedmess0_
WHERE postedmess0_.AuthorId=@p0 
```

并且`@p0`设置为 89，这是我正在测试的用户的 ID，但 AuthorId 需要是唯一标识符。

在这两个之后，我得到一个`SqlException`:`Operand type clash: uniqueidentifier is incompatible with bigint`这是意料之中的。

看起来（流利的）NHibernate 总是想加入 PK，即使文档建议指定 ParentKeyColumn 和 ChildKeyColumn 应该允许我指定我喜欢的任何列。这真的可能吗？我误读了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T20:25:39.693

ParentKeyColumn and ChildKeyColumn specify the column names in the link table between and not the columns of the entity-tables joined. What you need is `PropertyRef` and `ChildPropertyRef` on the hasmanytomany to specify the properties to join to

# c# - P/Invoke 语法 - 我是否在 C# 中正确翻译了我的 C++ 函数？

> ID：12013925
> 
> 赞同：0
> 
> 时间：2012-08-17T22:21:01.900
> 
> 标签：c#, c++, windows, interop, pinvoke

快速免责声明：我对 P/Invoke 很陌生，所以如果这是一个愚蠢的问题，我提前道歉。

这是我在 C++ 中的函数签名：

```
HRESULT SomeFunction( 
    _Out_ unsigned long *count,
    _Outptr_result_buffer_(*count) GUID **ids,
    _In_ const PCWSTR filter
) 
```

我正在尝试在 C# 中 P/Invoke 它：

```
[StructLayout(LayoutKind.Sequential)]
struct GUID
{
   public int a;
   public short b;
   public short c;
   [MarshalAs(UnmanagedType.ByValArray, SizeConst=8)] 
   public byte[] d;
}

[DllImport("MyDll.dll", EntryPoint="SomeFunction")]
[return: MarshalAs(UnmanagedType.I8)]
private static extern Int64 SomeFunction
(
    out ulong count, 
    [MarshalAs(UnmanagedType.LPArray)]
    out GUID[] ids,
    string filter
); 
```

我知道我的代码到达了 C++ 函数（我可以在 windbg 中看到）并且*没有*崩溃，但据我所知，参数没有正确传递。我的猜测是我在 C# 中搞砸了我的 P/Invoke 翻译，但我不知道如何解决这个问题。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T23:26:05.647

看起来我找到了我的解决方案......

```
[DllImport("MyDll.dll", EntryPoint="SomeFunction")]
[return: MarshalAs(UnmanagedType.I4)]
private static extern int SomeFunction
(
    out uint count, 
    [MarshalAs(UnmanagedType.LPArray)]
    out GUID[] ids,
    [InAttribute()] 
    [MarshalAsAttribute(UnmanagedType.LPWStr)] 
    string filter
); 
```

# php - Kohana 错误“在非对象上调用成员函数 add()”::$log

> ID：12013929
> 
> 赞同：0
> 
> 时间：2012-08-17T22:21:33.940
> 
> 标签：php, error-handling, kohana, fatal-error

我在 Kohana::$log 上收到错误“调用非对象上的成员函数 add()”

没有登录`application/logs`目录。我描述的错误是在*apache* `error_log`上找到的。这是它的外观

> [2012 年 8 月 17 日星期五 17:07:09] [错误] [客户端 MY.IPA.DDR.ESS] PHP 致命错误：在 /var/www/html/application 中的非对象上调用成员函数 add() /classes/kohana/exception.php 在第 8 行

这是我的错误控制器。

```
<?php
class Kohana_Exception extends Kohana_Kohana_Exception {
    public static function handler(Exception $e) {
        if (Kohana::DEVELOPMENT === Kohana::$environment) {
            parent::handler($e);
        } else {
            try {
                Kohana::$log->add(Log::ERROR, "own exception handler");
                Kohana::$log->add(Log::ERROR, parent::text($e));
                $attributes = array('action' => 500, 'message' => rawurlencode($e->getMessage()));
                if ($e instanceof HTTP_Exception) {
                    $attributes['action'] = $e->getCode();
                }
                // Error sub-request.
                echo Request::factory(Route::get('error')->uri($attributes))->execute()->send_headers()->body();
            }
            catch(Exception $e) {
                // Clean the output buffer if one exists
                ob_get_level() and ob_clean();
                // Display the exception text
                echo parent::text($e);
                // Exit with an error status
                exit(1);
            }
        }
    }
} 
```

从代码来看，它似乎`Kohana::$log`还没有初始化。但是这段代码工作了很长时间。现在是什么让它不起作用？

我在**Fedora 15上使用****Kohana-3.2**和**PHP 5.3.13**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T23:38:56.613

我已经解决了这个问题。如果任何其他 kohana 开发人员出现此问题，并且他从谷歌来到这里，这里就是解决方案。

从 root shell 运行以下命令。请记住，如果您重新启动服务器，您将不得不再次运行它。

```
setsebool -P httpd_unified 1 
```

### 附加信息：如何追踪它。

检查这些位置

1.  阿帕奇错误日志
2.  应用程序目录中的 Kohana 日志（如果您登录以进行调试）
3.  检查`/var/log/messages`.

如果它的 SElinux 问题，您会在`/var/log/messages`. 这就是我得到的。

> setroubleshoot：**SELinux 正在阻止 /usr/sbin/httpd**对目录 /var/www/html/ **application/cache**进行写访问。获取完整的 SELinux 消息。运行 sealert -l 087dfdb5-c7de-4238-8e6b-a713213a456d

如前所述，运行`sealert -l 087dfdb5-c7de-4238-8e6b-a713213a456d`将显示我作为解决方案编写的命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T23:09:04.823

试试看是否：

```
Log::instance()->add(Log::ERROR, "own exception handler"); 
```

作品。当前的 Kohana 文档似乎表明使用 $log 应该仍然有效，但在异常处理之前它可能会在某处未设置。但是，从 Log 类中检索实例应该随时可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-12T13:42:04.847

您可能有权限问题。就我而言，是 httpd 服务 (apache2) 无法访问项目文件。这是一个残酷的解决方案（只有在您的安全情况允许时才这样做）：

$ sudo chmod -R 0777 /var/www/html/mysite/

来自： [move_uploaded_file 在我完成所有配置后给出“无法打开流：权限被拒绝”错误](https://stackoverflow.com/questions/8103860/move-uploaded-file-gives-failed-to-open-stream-permission-denied-error-after)**

# c++ - uva的扫雷器运行时错误

> ID：12013932
> 
> 赞同：0
> 
> 时间：2012-08-17T22:21:38.043
> 
> 标签：c++, gcc

我写了一个程序来用 C++ 解决 uva 的[扫雷问题](http://pastebin.com/xWLEXCcp)（10189）。

我已经编写了代码，它似乎在我的机器上正常工作。不幸的是，我的提交似乎给了我运行时错误（在这种情况下，uva 没有提及错误消息或原因）。我在这里粘贴代码：

```
using namespace std;

void nullCheck(void *ptr)
{
    exit(0);
}

typedef unsigned int uint;

class Field
{
public:
    vector <vector<uint> > nghBombCnt; //neighbourBombCount
    vector <vector<bool> > isBomb;
    uint width;
    uint height;

public:
    Field(uint w, uint h)
    {
    }
    Field() { }

    ~Field()
    {
    }
};

int main(void)
{
    vector<Field> fieldList;

    do
    {
        Field curField;
        uint width, height;

        scanf("%u %u", &height, &width);
        curField.width  = width;
        curField.height = height;

        for (uint rowCtr = 0; rowCtr < curField.height; rowCtr++)
        {
            vector<bool> curBombRow;
            for (uint colCtr = 0; colCtr < curField.width; colCtr++)
            {
                char curSymb;
                scanf("%1s", &curSymb);
                switch (curSymb)
                {
                    case '.':
                        curBombRow.push_back(false);  break;
                    case '*':
                        curBombRow.push_back(true);   break;
                    default:                  break;
                }
            }
            curField.isBomb.push_back(curBombRow);
        }

        if (!(curField.width == 0 && curField.height == 0))
            fieldList.push_back(curField);
        else
            break;

    } while (1);

    for (uint fieldCtr = 0; fieldCtr < fieldList.size(); fieldCtr++)
    {
        Field curField = fieldList.at(fieldCtr);
        for (uint rowCtr = 0; rowCtr < curField.height; rowCtr++)
        {
            vector<uint> curRow;
            for (uint colCtr = 0; colCtr < curField.width; colCtr++)
            {
                uint bombCnt = 0;
                if (curField.isBomb[rowCtr][colCtr])
                {
                    curRow.push_back(0);
                    continue;
                }

                if (colCtr != 0 && curField.isBomb[rowCtr][colCtr - 1])
                    bombCnt++; //east

                if (rowCtr != 0 && curField.isBomb[rowCtr - 1][colCtr])
                    bombCnt++; //north

                if (rowCtr != curField.height - 1
                        && curField.isBomb[rowCtr + 1][colCtr])
                    bombCnt++; //south

                if (colCtr != curField.width - 1
                        && curField.isBomb[rowCtr][colCtr + 1])
                    bombCnt++; //west

                if (colCtr != curField.width - 1 && rowCtr != 0
                        && curField.isBomb[rowCtr -1][colCtr + 1])
                    bombCnt++; //north-east

                if (colCtr != 0 && rowCtr != curField.height - 1
                        && curField.isBomb[rowCtr + 1][colCtr - 1])
                    bombCnt++; // south-west

                if (colCtr != curField.width - 1
                        && rowCtr != curField.height - 1
                        && curField.isBomb[rowCtr + 1][colCtr + 1])
                     bombCnt++; //south-east

                if (colCtr != 0 && rowCtr != 0
                        && curField.isBomb[rowCtr - 1][colCtr - 1])
                     bombCnt++; //north-west

                curRow.push_back(bombCnt);
            }
            curField.nghBombCnt.push_back(curRow);
        }
        fieldList[fieldCtr] = curField;
    }

    for (uint fieldNo = 0; fieldNo < fieldList.size(); fieldNo++)
    {
        printf("Field #%u:\n", fieldNo + 1);
        Field curField = fieldList.at(fieldNo);

        for (uint rowCtr = 0; rowCtr < curField.height; rowCtr++)
        {
            for (uint colCtr = 0; colCtr < curField.width; colCtr++)
            {
                if (curField.isBomb[rowCtr][colCtr])
                    printf("*");
                else
                    printf("%u", curField.nghBombCnt[rowCtr][colCtr]);
            }
            printf("\n");
        }
        printf("\n");
    }

    return 0;
} 
```

# mdx - 查找在特定日期修改或创建的记录

> ID：12013934
> 
> 赞同：0
> 
> 时间：2012-08-17T22:21:46.390
> 
> 标签：mdx

我有一个业务请求，我们需要查找在特定日期创建或修改的所有交易。我们有 CreatedDate 和 ModifiedDate 的角色扮演维度（基于一般日期维度），以及一个 Deal 维度。

我不完全确定如何做到这一点；我尝试过交叉连接、联合等，但我最接近的方法是提取在该日期创建的所有交易，以及在该日期修改的所有交易，但我无法忽略它已经属于任一类别的交易。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:39:19.697

您可以使用[NonEmpty](http://msdn.microsoft.com/en-us/library/ms145988.aspx)函数：

```
NonEmpty(NonEmpty('your deals', {'creation date(s)'}),  {'modification date(s)'}) 
```

第一个 NonEmpty 将仅保留与给定创建日期关联的交易。第二个将对给定的修改日期执行相同的操作。

# jquery - JQuery 可以在上下文菜单上模拟一些东西吗？

> ID：12013939
> 
> 赞同：0
> 
> 时间：2012-08-17T22:22:10.717
> 
> 标签：jquery, save, contextmenu

有没有办法模拟某人在 Chrome 中右键单击标签并单击“将链接另存为”的事件？（这只需要在 Chrome 中工作）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T22:24:10.437

JavaScript 不能与这些交互，也不能与警报、确认等交互。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T22:24:52.707

虽然上下文菜单确实有自己的事件，但我不知道可以检测到其中的单个菜单项的选择。这不会暴露给 JavaScript，因为许多选项会调用超出 JS 安全范围的操作系统级命令。

如果您尝试用自定义菜单替换上下文菜单，这可以通过取消默认事件操作并将您自己的 DHTML 菜单放在光标位置来实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T22:24:42.273

据我所知，您必须使用 javascript 手动重新构建上下文菜单才能在其上添加一些额外内容。

您也需要使用`event.preventDefault()`来阻止正常的出现。

# c# - 寻找正则表达式来抓取与属性不匹配的元素

> ID：12013946
> 
> 赞同：1
> 
> 时间：2012-08-17T22:22:43.570
> 
> 标签：c#, regex

我有一个类似 XML 的文件，它的行如下所示：

```
<siteMapNode title="Our Clients" url="~/OurClients">
    <siteMapNode title="Website Portfolio" url="~/OurClients/Portfolio" />
    <siteMapNode title="Testimonials" url="~/OurClients/Testimonials" />
</siteMapNode>

<siteMapNode title="Contact" url="~/Contact" />
<siteMapNode title="" url="~/Pharmacy" />
<siteMapNode url="~/ClinicWebsiteDevelopment" />
<siteMapNode url="~/HospitalWebsiteDevelopment" /> 
```

请注意大多数行如何具有标题属性？我想要做的是使用 RegEx 来捕获所有没有`title`属性的元素，并且我想捕获所有具有空标题属性的行`title=""`。因此，在通过 RegEx 运行我的示例后，它应该返回我的最后三行，因为最后两行没有标题属性，而前一行有一个空的标题属性。

有人可以帮我创建这个 RegEx 吗？顺便说一下，这是针对 .NET 的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T22:48:59.033

通常，您不能编写正则表达式来匹配*没有*字符串的行。相反，编写一个与您想要的匹配的正则表达式，循环遍历这些行，根据正则表达式测试它们，如果测试失败，则将该行添加到结果列表中。所以它会是这样的（这是伪代码，不是真正的 C#）：

```
while (line = nextline())
  if (re_match(/title=""/, line) || !re_match(/title=/, line)) 
    add_line_to_results(line); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T22:46:39.147

如果您愿意添加一个虚假的根元素（假设没有），您可以使用 Linq2XML 轻松完成此操作：

```
string foo = @"<bogus><siteMapNode title='Our Clients' url='~/OurClients'>
                <siteMapNode title='Website Portfolio' url='~/OurClients/Portfolio' />
                <siteMapNode title='Testimonials' url='~/OurClients/Testimonials' />
                </siteMapNode>

            <siteMapNode title='Contact' url='~/Contact' />
            <siteMapNode title='' url='~/Pharmacy' />
            <siteMapNode url='~/ClinicWebsiteDevelopment' />
            <siteMapNode url='~/HospitalWebsiteDevelopment' /></bogus>";

XDocument doc = XDocument.Parse(foo);

var elements = doc.Root.Elements("siteMapNode");
foreach (var elem in elements) {
    if (elem.Attribute("title") == null)
        Console.WriteLine("This one doesn't have the attribute!");
} 
```

无需使用正则表达式。Regexen*永远不*应该用于解析标记。即使您的文档格式不是有效的 XML，只要您可以从中提取片段，它仍然可以被解析。老实说，我认为这是一种更好/更快/更简单的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T22:57:06.323

怎么样

```
(?m-s)^\s*<siteMapNode (?!.*title="[^"]).*?> 
```

`(?m-s)`= 逐行处理

`^\s*` = 在开始时匹配可选的空格

`<siteMapNode`= 匹配标签

`(?!.*title="[^"])`= 非捕获测试条件不能匹配 title="（[^"] 满足空标题的情况

`.*?>`= 匹配到标签的结尾

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T22:37:39.537

使用 linq to xml 这里有一个解释 [http://www.codeproject.com/Articles/24376/LINQ-to-XML](http://www.codeproject.com/Articles/24376/LINQ-to-XML)

# php - PHP 类 - 公共变量在类外未正确显示

> ID：12013951
> 
> 赞同：-3
> 
> 时间：2012-08-17T22:23:20.827
> 
> 标签：php, class, public

在 myClass 我已经宣布`$_total_results_found = 0`

然后在我的函数中我改变了`$_total_results_found = 10`

但是，当我尝试在 myClass 之外调用它时，值仍然显示为 0。

请任何人帮助我如何编写这段代码？

```
class myClass
{
  private $_total_rows_count = 0;
  public function foundResults()
  {
    $count = 10;
    $this->_total_rows_count = $count;
  }
} // end myClass

$myclass = new myClass();
echo $myclass->_total_results_found; // Value is showing 0 instead of 10 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T22:31:17.783

干得好：

```
<?
class myClass
{
  public $_total_rows_count = 0;
  public function foundResults()
  {
    $count = 10;
    $this->_total_rows_count = $count;
  }
} // end myClass

$myclass = new myClass();
$myclass->foundResults();
echo $myclass->_total_rows_count; //will print 10
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T22:27:01.760

你还没有`_total_results_found`在任何地方声明。您使用的唯一变量是`_total_rows_count`，它是私有的，因此在类外无法访问。

# php - 在json_encode中组合多个foreach结果

> ID：12013952
> 
> 赞同：0
> 
> 时间：2012-08-17T22:23:22.323
> 
> 标签：php, wordpress, json

我正在尝试获取以下 json_encode 输出：

数组：

```
echo json_encode(array(
             array(
             'id' => 111,
             'title' => "Event1",
             'start' => "2012-8-10",
             'end' => "2012-8-15",
             'url' => "http://yahoo.com/",
                ),
            array(
             'id' => 222,
             'title' => "Event2",
             'start' => "2012-8-20",
             'end' => "2012-8-22",
             'url' => "http://yahoo.com/"
               )
              )); 
```

输出：

```
 [{"id":111,"title":"Event1","start":"2012-8-10","end":"2012-8-15","url":"http:\/\/yahoo.com\/"},{"id":222,"title":"Event2","start":"2012-08-20","end":"2012-08-22","url":"http:\/\/yahoo.com\/"}] 
```

但是，当我使用以下代码时

```
global $wpdb;
$row = $wpdb->get_results("SELECT $wpdb->posts.ID, $wpdb->posts.post_title FROM $wpdb->posts WHERE $wpdb->posts.post_type = 'calendar' AND $wpdb->posts.post_status = 'publish' ORDER BY $wpdb->posts.post_date ASC");
foreach ($row as $post) {
    $postid = $post->ID;
    $post_title = $post->post_title;
    $startDate =  get_post_meta($post->ID,'calendar_start-date',true);
    $endDate =  get_post_meta($post->ID,'calendar_end-date',true);
    $link =  get_post_meta($post->ID,'calendar_link',true);
    $arr = array('id' => $postid, 'title' => $post_title, 'start' => $startDate, 'end' => $endDate, 'url' => $link);
    echo json_encode($arr);
    } 
```

我得到的输出为

```
{"id":"320","title":"Test Event One","start":"2012-8-17","end":"2012-8-24","url":"http:\/\/www.yahoo.com"}{"id":"321","title":"Test Event Two","start":"2012-8-21","end":"2012-8-30","url":"http:\/\/www.google.com"} 
```

我知道这可能是由于 json_encode 在 foreach 循环中。但是，当我在外面尝试时，它只显示第一个结果。如何结合这些 foreach 值来实现上面提到的输出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T22:30:46.267

你可以使用这个：

```
global $wpdb;
$posts = array();
$row = $wpdb->get_results("SELECT $wpdb->posts.ID, $wpdb->posts.post_title FROM $wpdb->posts WHERE $wpdb->posts.post_type = 'calendar' AND $wpdb->posts.post_status = 'publish' ORDER BY $wpdb->posts.post_date ASC");
foreach ($row as $post) {
    $postid = $post->ID;
    $post_title = $post->post_title;
    $startDate =  get_post_meta($post->ID,'calendar_start-date',true);
    $endDate =  get_post_meta($post->ID,'calendar_end-date',true);
    $link =  get_post_meta($post->ID,'calendar_link',true);
    $arr = array('id' => $postid, 'title' => $post_title, 'start' => $startDate, 'end' => $endDate, 'url' => $link);
    $posts[] = $arr;
}
echo json_encode($posts); 
```

我认为这应该有效

# r - write.csv 用于大型 data.table

> ID：12013953
> 
> 赞同：58
> 
> 时间：2012-08-17T22:23:29.930
> 
> 标签：r, file-io, csv, dataframe, data.table

我有一个`data.table`不是很大（2 GB）但由于某种原因`write.csv`需要很长时间才能写出来（我实际上从未完成等待）并且似乎使用了大量的 RAM 来完成它。

我尝试将其转换`data.table`为 a`data.frame`虽然这不应该真正做任何事情，因为`data.table`extends `data.frame`。有没有人遇到过这个？

更重要的是，如果你用`Ctrl`-停止它`C`，R 似乎不会回馈记忆。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-08-30T19:41:35.890

**更新 2019.01.07**：

`fwrite`自 2016-11-25 以来一直在 CRAN。

```
install.packages("data.table") 
```

**更新 08.04.2016**：

`fwrite`最近已添加到 data.table 包的开发版本中。它也并行（隐式）运行。

```
# Install development version of data.table
install.packages("data.table", 
                  repos = "https://Rdatatable.github.io/data.table", type = "source")

# Load package
library(data.table)

# Load data        
data(USArrests)

# Write CSV
fwrite(USArrests, "USArrests_fwrite.csv") 
```

根据[加速 write.table 性能](https://stackoverflow.com/a/36465497/559784)下显示的详细基准测试，`fwrite`比`write.csv`那里（YMMV）快约 17 倍。

* * *

**2015 年 12 月 15 日更新**：

将来可能会`fwrite`在包中添加一个功能`data.table`，请参阅：[https](https://github.com/Rdatatable/data.table/issues/580) ://github.com/Rdatatable/data.table/issues/580 。在这个线程中，链接了一个 GIST，它为这样的函数提供了一个原型，可以将处理速度提高 2 倍（根据作者的说法，[https://gist.github.com/oseiskar/15c4a3fd9b6ec5856c89](https://gist.github.com/oseiskar/15c4a3fd9b6ec5856c89)）。

**原始答案**：

我遇到了同样的问题（尝试编写更大的 CSV 文件）并最终决定不使用 CSV 文件。

我建议您使用 SQLite，因为它比处理 CSV 文件要快得多：

```
require("RSQLite")
# Set up database    
drv <- dbDriver("SQLite")
con <- dbConnect(drv, dbname = "test.db")
# Load example data
data(USArrests)
# Write data "USArrests" in table "USArrests" in database "test.db"    
dbWriteTable(con, "arrests", USArrests)

# Test if the data was correctly stored in the database, i.e. 
# run an exemplary query on the newly created database 
dbGetQuery(con, "SELECT * FROM arrests WHERE Murder > 10")       
# row_names Murder Assault UrbanPop Rape
# 1         Alabama   13.2     236       58 21.2
# 2         Florida   15.4     335       80 31.9
# 3         Georgia   17.4     211       60 25.8
# 4        Illinois   10.4     249       83 24.0
# 5       Louisiana   15.4     249       66 22.2
# 6        Maryland   11.3     300       67 27.8
# 7        Michigan   12.1     255       74 35.1
# 8     Mississippi   16.1     259       44 17.1
# 9          Nevada   12.2     252       81 46.0
# 10     New Mexico   11.4     285       70 32.1
# 11       New York   11.1     254       86 26.1
# 12 North Carolina   13.0     337       45 16.1
# 13 South Carolina   14.4     279       48 22.5
# 14      Tennessee   13.2     188       59 26.9
# 15          Texas   12.7     201       80 25.5

# Close the connection to the database
dbDisconnect(con) 
```

有关详细信息，请参阅[http://cran.r-project.org/web/packages/RSQLite/RSQLite.pdf](http://cran.r-project.org/web/packages/RSQLite/RSQLite.pdf)

您还可以使用[http://sqliteadmin.orbmu2k.de/](http://sqliteadmin.orbmu2k.de/)之类的软件来访问数据库并将数据库导出为 CSV 等。

--

# javascript - 带有硬编码数组的 for-in

> ID：12013954
> 
> 赞同：0
> 
> 时间：2012-08-17T22:23:33.423
> 
> 标签：javascript

菜鸟 JS 问题在这里：

```
for( var p in ['nodeName', 'nodeType', 'tagName', 'localName'] ) {
    console.log( p + '=' + all[i][p] + '\n' );
} 
```

我希望看到类似的东西

```
nodeName=DIV 
```

相反，我得到

```
0=undefined 
```

我是否被迫将数组分配给一个变量，以便我可以索引它？有没有办法在 for-in 中使用这种语法并从数组中检索字符串？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T22:25:39.537

使用`for..in`数组**几乎总是错误**的。它迭代对象属性，而不是值 -s 因此在您的情况下，它会产生 0、1、2 和 3。如果您决定使用自定义方法进行扩展，情况会**变得更糟**（与扩展不同，这不是一个很大的禁忌）。使用时，它们的名称也会被迭代。`Array.prototype``Object.prototype``for..in`

做你想做的事情的正确方法是：

```
var foo = [...];
for(var i = 0; i < foo.length; i++) {
    // use foo[i]
} 
```

或者这个（在现代浏览器中或使用 shim'd 的功能）：

```
[...].forEach(function(value) {
    // use value
}); 
```

# javascript - 在不向下移动内容的情况下添加一个 div？使用 iScroll

> ID：12013956
> 
> 赞同：0
> 
> 时间：2012-08-17T22:23:43.830
> 
> 标签：javascript, jquery, lazy-loading, iscroll4, iscroll

我有一个包含一堆可滚动内容的容器 div（作为我使用 iScroll 的记录——如果这改变了解决方案）。当我滚动到顶部时，我想加载当前滚动位置上方的内容。如果我只是使用 jQuery“prepend();”在 div 前面添加 我的可滚动区域中的内容向下移动。理想情况下，我们希望将当前内容保留在框架中，并使可滚动区域在内容上方向上增长。

有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T22:43:19.640

根据[iScroll 网站](http://cubiq.org/iscroll)，它有一个方法叫做`scrollToElement`：

> **`scrollToElement(el, runtime)`**：滚动到滚动区域内的任何元素。`el`必须是 CSS3 选择器。例如：`scrollToElement("#elementID", '400ms')`

如果您总是预先添加固定数量的`div`s （例如始终是单个`div`），我想您可以在添加新内容之后立即使用它滚动到（例如）第二个元素：

```
// ... (prepend new content)
myScroll.scrollToElement('#scroller :nth-child(2)', '0ms'); 
```

我还没有尝试过，所以如果这对你有用，请告诉我们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T00:20:00.777

在快速浏览 iScroll 的源代码后，我发现了以下内容：

*   当前`x`和`y`始终可通过`myScroll.x`和获得`myScroll.y`。
*   iScroll 有一个内部函数`_offset(el)`，它返回任何给定元素的偏移量`left`和偏移量。`top`

这基本上开辟了两种解决方案：

1.  使用`_offset(el)`. 虽然可能，但这是不可取的。下划线是标记函数“私有”的约定，除其他外，这意味着它不是官方 API 的一部分。

    *或者*

2.  使用新添加元素的高度：

    ```
    var x = myScroll.x;
    var y = myScroll.y;

    // ... (prepend new content)
    y += $('#scroller :first-child').outerHeight();

    myScroll.scrollTo(x, y, '0ms'); 
    ```

    您可能需要传递`true`给[`.outerHeight()`](http://api.jquery.com/outerHeight/)，这使得它包括边距。

再一次，我还没有测试过这个，所以请告诉我们它是否有效。

# c# - 返回自定义对象错误

> ID：12013959
> 
> 赞同：0
> 
> 时间：2012-08-17T22:23:54.140
> 
> 标签：c#, wcf

我需要将 WCF 服务中的自定义对象返回给调用 asp.net 应用程序。我收到错误无法将类型'test.ServiceReference1.ReturnClass'隐式转换为'test.ReturnClass'这是我在asp.net中的调用函数（错误是粗体）我可以返回我的对象​​吗？如何返回？

```
// Get the drive list from the client machine
ServiceReference1.JobsClient Client = new ServiceReference1.JobsClient();
Client.Endpoint.Address = new System.ServiceModel.EndpointAddress("http://" + DropDownListSystems.SelectedValue + ":8732/test/");
ReturnClass Drive_Result = new ReturnClass(); // Declare an instance of the return object that will contain all the results
**Drive_Result = Client.FindDrives();** 
```

这是我的 WCF 代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.Text;
using System.ComponentModel;
using System.Data;
using System.IO;
using System.Collections;
namespace WCFJobsLibrary
{
    // NOTE: You can use the "Rename" command on the "Refactor" menu to change the interface name "IJobs" in both code and config file together.
    [ServiceContract]
    public interface IJobs
    {
         //Directoy Manager
         [OperationContract]
        ReturnClass FindDrives();
         //Directoy Manager
         [OperationContract]
         ReturnClass FindSubfolders(String Folder_To_Search);
         //Directoy Manager
         [OperationContract]
         ReturnClass FindSubFiles(String Folder_To_Search);

    }
}

//Directoy Manager
public ReturnClass FindDrives()
{

    try
    {
        DriveInfo[] allDrives = DriveInfo.GetDrives();
        ArrayList Drives = new ArrayList();
        foreach (DriveInfo d in allDrives)
        {
            Drives.Add(d.Name);
        }
        return new ReturnClass(1, String.Empty, String.Empty, Drives, null, null);
    }
    catch (Exception ex)
    {
        return new ReturnClass(-1, ex.Message.ToString(), ex.InnerException.ToString(), null, null, null);
    }

}

public class ReturnClass
{
    //private members
    private int _errorCode;
    private string _errorMessage;
    private string _exMessage;
    private ArrayList _drives;
    private string[] _folders;
    private string[] _filePaths;

    #region Constructors

    //constructor 1
    public ReturnClass()
    {

    }

    //constructor 2
    public ReturnClass(int iErr, string sErrMsg, string ExMsg, ArrayList arrDrives, string[] sfolders, string[] sFilePaths)
    {
        ErrorCode = iErr;
        ErrorMessage = sErrMsg;
        ExMessage = ExMsg;
        Drives = arrDrives;
        Folders = sfolders;
        FilePaths = sFilePaths;
    }

    #endregion

    #region methods

    //Error Code
    public int ErrorCode
    {
        get { return this._errorCode; }
        set { this._errorCode = value; }
    }

    //error message
    public string ErrorMessage
    {
        get { return this._errorMessage; }
        set { this._errorMessage = value; }
    }

    //exception message
    public string ExMessage
    {
        get { return this._exMessage; }
        set { this._exMessage = value; }
    }

    //drives
    public ArrayList Drives
    {
        get { return this._drives; }
        set { this._drives = value; }
    }

    //folders
    public string[] Folders
    {
        get { return this._folders; }
        set { this._folders = value; }
    }

    //File Paths
    public string[] FilePaths
    {
        get { return this._filePaths; }
        set { this._filePaths = value; }
    }

    #endregion

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T22:27:28.650

你应该只声明`Drive_Result`为`test.ServiceReference1.ReturnClass`，而不是`ReturnClass`（你的命名空间有些混乱）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T22:28:54.770

您必须将 datacontract 设置为您的 returnClass 和 datamember [DataContract] public class ReturnClass { //private members private int _errorCode; 私有字符串_errorMessage；私人字符串_exMessage；私有 ArrayList _drives; 私人字符串[] _文件夹；私有字符串[] _filePaths;

```
#region Constructors

//constructor 1
public ReturnClass()
{

}

//constructor 2
public ReturnClass(int iErr, string sErrMsg, string ExMsg, ArrayList arrDrives, string[] sfolders, string[] sFilePaths)
{
    ErrorCode = iErr;
    ErrorMessage = sErrMsg;
    ExMessage = ExMsg;
    Drives = arrDrives;
    Folders = sfolders;
    FilePaths = sFilePaths;
}

#endregion

#region methods

//Error Code
[DataMember]
public int ErrorCode
{
    get { return this._errorCode; }
    set { this._errorCode = value; }
}

//error message
[DataMember]
public string ErrorMessage
{
    get { return this._errorMessage; }
    set { this._errorMessage = value; }
}

//exception message
[DataMember]
public string ExMessage
{
    get { return this._exMessage; }
    set { this._exMessage = value; }
}

//drives
[DataMember]
public ArrayList Drives
{
    get { return this._drives; }
    set { this._drives = value; }
}

//folders
[DataMember]
public string[] Folders
{
    get { return this._folders; }
    set { this._folders = value; }
}

//File Paths
[DataMember]
public string[] FilePaths
{
    get { return this._filePaths; }
    set { this._filePaths = value; }
}

#endregion 
```

# ios - iOS 的 GCDAsyncSocket 没有写出缓冲区

> ID：12013964
> 
> 赞同：2
> 
> 时间：2012-08-17T22:24:11.630
> 
> 标签：ios, sockets, cocoaasyncsocket, gcdasyncsocket

基本上我写了一个 NSData 对象：

```
[asyncSocket writeData:JSONRequestData withTimeout:-1 tag:1]; 
```

运行时调用委托

```
- (void)socket:(GCDAsyncSocket *)sock didWriteDataWithTag:(long)tag 
```

但是由于某种原因，当写入进入缓冲区时......它没有写入服务器。

当我停止构建时，我猜套接字决定写入所有内容，而服务器最终会看到它。

我将如何解决这个问题？没有办法刷新 CocoaAsyncSocket，因为它没有必要......我尝试添加行尾，如“/n”等等，但这也没有任何作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T08:44:31.873

这是基于 user523234 的建议。

基本上，您正在写出的 NSData 需要有某种信号来告诉套接字不再有数据进入。

我附加了

```
[GCDAsyncSocket CRLFData]; 
```

到 NSData 对象

注意：使用

```
appendData: 
```

方法，必须将 NSData 转换为 NSMutableData。

# jquery - SWF 对象在拖动时会留下鬼线

> ID：12013977
> 
> 赞同：0
> 
> 时间：2012-08-17T22:25:41.170
> 
> 标签：jquery, jquery-ui, google-chrome, flash, draggable

当 Flash 对象被拖过 HTML 画布时，有没有人遇到过看到鬼线的经历？我的网站有一个基本元素，其中在最低 z 平面上有一个嵌套的 OpenLayers 地图，然后是一个或多个包含 SWF 对象的可拖动 jquery ui 对话框。拖动在 FF 和 IE 中看起来很好。但是，在 Chrome 中，我在拖动后看到鬼线......有点像 Chrone 没有重绘较低层。

之前没用jquery ui dialog（简单用draggable）也没看到重影。一旦我切换到对话框，它就开始了。

我徘徊它是我的机器还是其他人看到它？这是一个[jsFiddle](http://jsfiddle.net/mFVSr/)，我也可以在上面看到线条（类似于我的网站）。但是，以下[jsFiddle](http://jsfiddle.net/mFVSr/1/)之一，我没有看到任何重影。附上一张我看到的图片。

![在此处输入图像描述](../Images/07db8bd9ac463f57e32d91348a87d5ed.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T22:26:02.917

在 swfobjet 和 chrome 中重绘错误时遇到了类似的问题。解决了它一起删除 swfObject

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T22:28:20.463

这是一个浏览器错误。

在确定谁负责重新绘制底层画布时，重新定位从另一个应用程序绘制的框是一件困难的事情。

您可能不得不尝试想出一个解决方法，例如在拖动完成后强制重新绘制画布。

# codeigniter - 返回具有 where 条件的行数

> ID：12013981
> 
> 赞同：0
> 
> 时间：2012-08-17T22:26:23.937
> 
> 标签：codeigniter

在 Codeigniter 中，如何返回带有 where 条件的行数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T01:25:33.937

```
$this->db->where('title', 'Book');
$this->db->from('my_table');
echo $this->db->count_all_results();
// Produces an integer, like 17 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T08:53:42.677

你也可以这样做：

```
$this->db->where('firstname','gautam');
        $query = $this->db->get('rebels');            
        return $query->num_rows(); 
```

它还将返回结果的行数... :-)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-18T04:56:51.637

使用计数（）：

```
$this->db->where('title', 'abc');
$this->db->from('articles');
$query = $this->db->get();
return count($query->result()); 
```

# javascript - 使用 Backbone 的超级简单的页面导航

> ID：12013996
> 
> 赞同：2
> 
> 时间：2012-08-17T22:27:47.743
> 
> 标签：javascript, backbone.js

我找遍了所有地方都无济于事。每个人似乎都有自己的方式来构建某种形式的带有主干的待办事项列表。我需要做一些不同的事情，尽管更粗糙。我需要在主干之上构建一个四页网站——我知道我可以使用 jQuery 或等效工具轻松地做到这一点，但这可能会在未来扩大范围。所以我真的不使用模型或集合，只使用路由、视图和模板。我的模板数量非常少，我不需要从外部文件夹中获取它们，我只需换掉 div 并让模板内联。

在其最简单的形式中，我有一个单页 Web 应用程序，我需要用一个按钮、一个方向、一个开始和结束来交换 4 个静态视图。就是这样。我发现没有任何教程或文档可以通过骨干实现这种基本功能。那里有任何精明的人愿意为我指明正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T06:31:20.397

这是一个简单的单页小应用程序，当您按下按钮时，它会换出 4 个不同的模板和从第 1 页到第 4 页的步骤。如果您有任何问题，请告诉我。

```
<html>
  <head>
    <title>Steps</title>
    <script src="http://code.jquery.com/jquery-1.8.0.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.3/underscore-min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min.js"></script>
    <script type="text/x-template" id="page-1">
      <p>Page one content</p>
    </script>
    <script type="text/x-template" id="page-2">
      <p>Page two content</p>
    </script>
    <script type="text/x-template" id="page-3">
      <p>Page three content</p>
    </script>
    <script type="text/x-template" id="page-4">
      <p>Page four content</p>
    </script>
    <script>
      (function($){
        // Helper to get template text.
        function getTemplate(index){
          return $('#page-' + index).text();
        }

        // Simple view to render a template, and add a button that
        // will navigate to the next page when clicked.
        var PageView = Backbone.View.extend({
          index_: null,

          events: {
            'click button': 'nextPage_'
          },

          initialize: function(options){
            this.index_ = options.index;
          },

          render: function(){
            var html = getTemplate(this.index_);

            // If there is a next page, add a button to proceed.
            if (html && getTemplate(this.index_ + 1)){
              html += '<button>Next</button>';
            }
            this.$el.html(html);
          },

          nextPage_: function(){
            router.navigate('page/' + (this.index_ + 1), {trigger: true});
          }
        });

        // Router handling a default page, and the page urls.
        var Router = Backbone.Router.extend({
          routes: {
            'page/:index':  'loadPage',
            '*notFound': 'defaultPage'
          },
          defaultPage: function(){
            this.loadPage();
          },
          loadPage: function(index){
            // Default to page 1 when no page is given.
            index = parseInt(index, 10) || 1;

            if (this.pageView_) this.pageView_.remove();
            this.pageView_ = new PageView({index: index});
            this.pageView_.render();

            this.pageView_.$el.appendTo('#content');
          }
        });

        var router;
        $(function(){
          router = new Router();
          Backbone.history.start({pushState: true});
        });
      })(jQuery);
    </script>
  </head>
  <body>
    <!-- Some page header -->
    <section id="content"></section>
  </body>
</html> 
```