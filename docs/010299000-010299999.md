# StackOverflow 问答 10299000-10299999

# macos - 由于我安装了 rbenv，因此无法使用 TextMate git bundle

> ID：10299000
> 
> 赞同：1
> 
> 时间：2012-04-24T13:34:35.730
> 
> 标签：macos, git, textmate, rbenv

由于我在 Mac OSX 上安装了 rbenv，并删除了原始的 ruby​​ 版本，因此我无法使用 TextMate GIT 包。

我收到此错误：

```
 env: ruby: No such file or directory 
```

看起来我在环境变量中丢失了一些参考。但是，我的 rbenv 全局版本看起来设置正常。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T20:33:03.747

重新安装系统 Ruby 是个好主意。请参阅：[https ://superuser.com/questions/171433/is-it-possible-to-reinstall-fix-mac-os-xs-system-ruby-without-doing-a-complete](https://superuser.com/questions/171433/is-it-possible-to-reinstall-fix-mac-os-xs-system-ruby-without-doing-a-complete)

如果您使用的是 Textmate 2 和`rbenv`，请正确配置：[Configure Textmate 2 for rbenv](https://stackoverflow.com/questions/11300711/configure-textmate-2-for-rbenv)

# c# - RowDataBound : 从 dataTable 中获取价值！无法将“System.DBNull”类型的对象转换为“System.String”类型

> ID：10299001
> 
> 赞同：2
> 
> 时间：2012-04-24T13:34:36.463
> 
> 标签：c#, asp.net, sql

我正在尝试在 RowDataBound 事件中从 dataTable 中获取当前编辑行的值：这是我的代码：

```
string KK = (string)DataBinder.Eval(e.Row.DataItem, "Name");
if ( KK == "John" )
{
//execute code
} 
```

错误：无法将“System.DBNull”类型的对象转换为“System.String”类型。在第一行（带有字符串 KK 的那个...）

我该如何解决？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-24T13:40:03.820

使用[`DataItem`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewrow.dataitem.aspx)而`GridViewRow`不是`DataBinder.Eval`获取底层数据源：

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow && e.Row.RowState == DataControlRowState.Edit))
    {
        DataRow row = ((DataRowView)e.Row.DataItem).Row;
        String name = row.Field<String>("Name");
        // String is a reference type, so you just need to compare with null
        if(name != null){/* do something */}
    }
} 
```

[`Field`扩展方法](http://msdn.microsoft.com/en-us/library/bb360891.aspx)还支持可为空的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T13:40:12.717

检查 DBNull.Value 并检索您的数据，如果不是 DBNull.Value

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T13:42:27.613

DBNull表示该值为DB中的空值，表示没有值。您可能想要检查查询是否返回有效数据。如果是，则需要在列表中的项目为空时找到要使用的值。

试试这个：

```
string KK = DataBinder.Eval(e.Row.DataItem, "Name").GetType() == typeof(System.DBNull) ? "" : (string)DataBinder.Eval(e.Row.DataItem, "Name") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T13:36:48.110

您需要使用“IsNull”方法正确检查空值，然后才能尝试检索它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T13:52:48.550

你应该抓住`DataRow`并解决这个问题：

```
var row = e.Row.DataItem as DataRow;
if (row != null)
{
    //for strings this will work fine
    var name = row.Field<string>("Name");

    //for other types use the IsNull function to check for DBNull
    if (!row.IsNull("SomeDecimalValue"))
        var value = row.Field<decimal>("SomeDecimalValue");
} 
```

**编辑**另一种选择是在值可能为`null`or时使用可为空的类型`DBNull`：

```
var value = row.Field<decimal?>("SomeDecimalValue");
if (value.HasValue)
{

} 
```

# android - AdMob 6.0 + Android 2.3，有可能吗？

> ID：10299002
> 
> 赞同：0
> 
> 时间：2012-04-24T13:34:38.640
> 
> 标签：android, version, admob

我用 3.2 版的 android 创建了一个项目并设置了 AdMob，但是很多人无法下载该游戏，因为它处于新版本中。我看出来了，有很多人用Android 2.2和2.3，然后下载不了，难道AdMob 6.0可以用android 2.2或者2.3版本？有人能帮我吗？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:40:18.517

Admob 6.0 README.txt 文件声明它需要 Android 1.5 或更高版本。为什么您认为它不适用于 2.3 版？

您是否真的尝试过使用 2.3 的 Android SDK 目标版本？

# ios - 适用于 ios 的聊天消息应用程序

> ID：10299006
> 
> 赞同：0
> 
> 时间：2012-04-24T13:34:50.147
> 
> 标签：ios, networking

我正在使用简单的点对点聊天室 iPhone 应用程序，它利用本地 wifi 网络：[https](https://bitbucket.org/snej/chatty/src) ://bitbucket.org/snej/chatty/src 。我希望能够使用基于 Internet 的连接而不是本地 wifi 网络。或者，我尝试创建基于套接字的 iPhone 应用程序和服务器：[http](http://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server) ://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server 。简单的 tcp 服务器可以工作，我已经对其进行了测试，我得到了响应，但客户端没有。什么地方出了错？

能否请你帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T15:50:48.663

您需要设置一些服务器来实现这一点。

```
iPhone<----->wifi router (local IP address range!)<----->internet<------>[something here!] 
```

[这里有东西！] 将无法将包裹发送到您的 iPhone，因为它的本地 wifi 地址未在互联网中路由。您需要做一些端口转发魔术才能使其运行，但这很奇怪，因为您需要要求所有用户更改其路由器的配置等等。

使用移动网络

```
iPhone<----->mobile network operator<----->internet<------>[something here!] 
```

不会改善这种情况，因为移动网络运营商倾向于过滤他们的传入流量（至少在欧洲）——你只是无法 ping/ftp/ssh/连接到他们网络上的电话。这就是为什么有Apple Push Notification服务等等......

正确的设置是让两部手机都成为客户端，并与服务器进行会话处理。

```
iPhone<----->wifi router (local IP address range!)<----->internet<------> YOUR 
                                                                          SERVER 
iPhone<----->mobile network operator<------------------->internet<------> HERE! 
```

# perl - 避免将某些参数混合到脚本中

> ID：10299007
> 
> 赞同：7
> 
> 时间：2012-04-24T13:34:51.327
> 
> 标签：perl, arguments, flags

我有一个脚本，可以使用`Getopt::Long`. 某些标志不允许混用，例如：`--linux --unix`不允许一起提供。我知道我可以使用`if`语句进行检查。有没有更清洁和更好的方法来做到这一点？

`if`如果我不想允许许多标志组合，块可能会变得丑陋。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T14:12:13.157

[Getopt::Long](http://perldoc.perl.org/Getopt/Long.html)似乎没有这样的功能，在快速[搜索 CPAN](http://search.cpan.org/search?query=getopt&mode=all)后没有任何突出显示。但是，如果您可以使用散列来存储您的选项，那么创建自己的函数似乎并不太难看：

```
use warnings;
use strict;
use Getopt::Long;

my %opts;
GetOptions(\%opts, qw(
    linux
    unix
    help
)) or die;

mutex(qw(linux unix));

sub mutex {
    my @args = @_;
    my $cnt = 0;
    for (@args) {
        $cnt++ if exists $opts{$_};
        die "Error: these options are mutually exclusive: @args" if $cnt > 1;
    }
} 
```

这也扩展到超过 2 个选项：

```
mutex(qw(linux unix windoze)); 
```

# c# - 更改 Xml 声明，或选择没有声明部分的 xml

> ID：10299013
> 
> 赞同：5
> 
> 时间：2012-04-24T13:35:06.280
> 
> 标签：c#, .net, xml, xpath

我需要更改按文档的 xml 声明部分，或者只选择数据减去声明。哪个更容易？

这是我的 xml 的示例：

```
<?xml version="1.0" encoding="utf-16"?>
<fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format">
    <fo:layout-master-set>
        <fo:simple-page-master page-height="11in" page-width="8.5in" margin-top="0.50in" margin-left="0.8in" margin-right="0.8in" margin-bottom="0.25in" master-name="PageMaster">
            <fo:region-body border-style="none" border-width="thin" margin-top="0in" margin-left="0in" margin-right="0in" margin-bottom="0.25in"/>
            <fo:region-after border-style="none" border-width="thin" extent="0.25in"/>
        </fo:simple-page-master>
    </fo:layout-master-set>
    <fo:page-sequence master-reference="PageMaster"/>
</fo:root> 
```

我正在尝试将 xml 声明更改为：

```
<?xml version="1.0" encoding="iso-8859-1"?> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T14:05:45.017

您是否尝试以编程方式更改 XML？如果是这样，您可以通过创建新`XmlDeclaration`的并将其替换为前一个来执行此操作，如下所示：

```
XmlDeclaration xmlDeclaration;
xmlDeclaration = doc.CreateXmlDeclaration("1.0", "iso-8859-1", null);
doc.ReplaceChild(xmlDeclaration, doc.FirstChild); 
```

您只需确保文档的第一个孩子是 Xml 声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T02:22:42.703

**使用 XSLT可以很容易地完成想要的“更改 XML 声明”**（不评论此更改是否是解决您的问题的正确解决方案）：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output indent="yes" encoding="ISO-8859-1"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

**只需将此转换应用于提供的 XML 文档**：

```
<?xml version="1.0" encoding="utf-16"?>
<fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format">
    <fo:layout-master-set>
        <fo:simple-page-master page-height="11in" page-width="8.5in" margin-top="0.50in" margin-left="0.8in" margin-right="0.8in" margin-bottom="0.25in" master-name="PageMaster">
            <fo:region-body border-style="none" border-width="thin" margin-top="0in" margin-left="0in" margin-right="0in" margin-bottom="0.25in"/>
            <fo:region-after border-style="none" border-width="thin" extent="0.25in"/>
        </fo:simple-page-master>
    </fo:layout-master-set>
    <fo:page-sequence master-reference="PageMaster"/>
</fo:root> 
```

**并产生了想要的结果**：

```
<?xml version="1.0" encoding="iso-8859-1"?>
<fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format">
    <fo:layout-master-set>
        <fo:simple-page-master page-height="11in" page-width="8.5in" margin-top="0.50in" margin-left="0.8in" margin-right="0.8in" margin-bottom="0.25in" master-name="PageMaster">
            <fo:region-body border-style="none" border-width="thin" margin-top="0in" margin-left="0in" margin-right="0in" margin-bottom="0.25in" />
            <fo:region-after border-style="none" border-width="thin" extent="0.25in" />
        </fo:simple-page-master>
    </fo:layout-master-set>
    <fo:page-sequence master-reference="PageMaster" /> 
```

# cocoa - 如何使用可可编程在 nstextview 中的光标位置插入文本？

> ID：10299016
> 
> 赞同：6
> 
> 时间：2012-04-24T13:35:18.977
> 
> 标签：cocoa

我正在使用此代码来获取光标位置：

```
NSInteger insertionPoint = [[[myTextView selectedRanges] objectAtIndex:0] rangeValue].location; 
```

如何在当前光标位置添加所选文本而不是附加文本？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T02:44:04.083

如果我正确理解您的问题，这将适用于您：

```
[textView setSelectedRange:NSMakeRange(4, 0)];
[textView insertText:@"my copied text"]; 
```

4 是文本视图中的`NSMakeRange()`位置，0 用于长度，因为您不想替换任何文本。

# android - 防止 Android Dialog 缩进每个文本段落

> ID：10299019
> 
> 赞同：3
> 
> 时间：2012-04-24T13:35:43.073
> 
> 标签：android, android-alertdialog, indentation

我相信我以前见过这样的问题，但我在任何地方都找不到它......所以，除非其他人知道它的链接，否则我会发布我的问题版本。

无论如何...

我有一个`AlertDialog`在我的文件中显示一个字符串`strings.xml`以显示在对话框中。字符串看起来像这样：

```
<string name="about_app">
        Blah blah blah talking about stuff this is a line
        Oh look I continued onto another line! Now I want these...\n\n

        So this is another paragraph! Intriguing. Yes, onto the next line 
        Android text doesn't necessarily consider this a new line, which is fine
        becauase i only care about paragraphs, which I'm using backslash n's for!\n\n

        And... here's my final statement! Woo.\n

</string> 
```

一切都在 AlertDialog 中正确显示（有点）。“Blah blah blah ...”与 的左边缘对齐`AlertDialog`并继续直到击中`\n\n`。从这里，我在“所以这是……”之前得到了我想要的间距。然而，“所以这是……”缩进了一个我无法摆脱的烦人的小空格！“而且……这是我的……”也是如此。有人对此有解决方案吗？

**注意：**我已经尝试在代码中的每个段落之后去掉空行 - 什么都不做。我还确保在我的 s 之后没有空格`\n`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T15:13:07.077

您看到的额外空间是由字符串资源中段落的缩进引起的。当您只是换行时，您的缩进充当单词之间的分隔符，您将其视为空格。但是，当您有一个换行符时，缩进显示为每个段落开头之前的空格。要摆脱它，您需要将您的`\n`直接放在下一段的第一个字母之前，或者不缩进您的行。顺便说一句，换行符本身也可能在渲染时导致空格。这两个中的任何一个都应该工作：

(1)

```
<string name="about_app">
        Blah blah blah talking about stuff this is a line
        Oh look I continued onto another line! Now I want these...\n

        \nSo this is another paragraph! Intriguing. Yes, onto the next line 
        Android text doesn't necessarily consider this a new line, which is fine
        becauase i only care about paragraphs, which I'm using backslash n's for!\n

        \nAnd...here's my final statement! Woo.\n
</string> 
```

或 (2)

```
<string name="about_app">
Blah blah blah talking about stuff this is a line
Oh look I continued onto another line! Now I want these...\n\n
So this is another paragraph! Intriguing. Yes, onto the next line 
Android text doesn't necessarily consider this a new line, which is fine
becauase i only care about paragraphs, which I'm using backslash n's for!\n\n
And...here's my final statement! Woo.\n
</string> 
```

# javascript - 使用 Javascript 更改 CSS 中元素的背景颜色

> ID：10299020
> 
> 赞同：3
> 
> 时间：2012-04-24T13:35:43.047
> 
> 标签：javascript, css

基本上，我想通过单击按钮使用 JavaScript 更改 CSS 中元素的背景颜色。

到目前为止，我的 CSS 看起来像这样：

```
div.box {
    width:100px;
    height:100px;
    background-color:#FF2400;
} 
```

它需要动态更改为几种颜色的选择，只需使用多个按钮即可（每个按钮都是不同的颜色）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T13:41:36.047

完成：http: [//jsfiddle.net/iambriansreed/zmtU4/](http://jsfiddle.net/iambriansreed/zmtU4/)

更新为非 jQuery。

HTML

```
<div id="box"></div><div id="box"></div>

<button type="button" onclick="button_click('red');">Red</button>
<button type="button" onclick="button_click('blue');">Blue</button>
<button type="button" onclick="button_click('green');">Green</button>
<button type="button" onclick="button_click('yellow');">Yellow</button>
<button type="button" onclick="button_click('purple');">Purple</button>​ 
```

纯 JavaScript

```
function button_click(color){
    document.getElementById("box").style.backgroundColor=color;
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T13:40:45.113

执行此操作的 vanilla-javascript 方法是获取对元素的引用并用于`style.backgroundColor`更改颜色：

例如，如果 div 有一个你的 id，`myBox`你会使用

```
document.getElementById("myBox").style.backgroundColor="#000000"; // change to black 
```

现场示例：http: [//jsfiddle.net/QWgcp/](http://jsfiddle.net/QWgcp/)

顺便说一句，如果您正在做很多此类操作框架，例如 jQuery，则会在编写代码时为您提供一些帮助。使用 jQuery 的相同功能会更简单一些：

```
$('#myBox').css('background-color','#000000'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T13:52:16.363

我是否正确理解您不想更改单个元素，而是更改 CSS 规则，所以所有匹配的元素都会受到影响？这是一个如何将示例中的样式动态更改为蓝色的示例：

```
<html>
<head>
<style>
div.box{
    width:100px;
    height:100px;
    background-color:#FF2400;
}
</style>
<script>
    var sheet = document.styleSheets[0] // Of course if you have more than one sheet you'll have to find it among others somehow
    var rulesList = sheet.cssRules || sheet.rules // some older browsers have it that way
    var rule = rulesList[0] // same for rules - more than one and you'll have to iterate to find what you need
    rule.style.backgroundColor = 'blue' // and voila - both boxes are now blue
</script>
</head>
<body>
<div class="box"></div>
<div class="box"></div>
</body>
</html> 
```

只需将此部分作为“单击”事件处理程序分配给按钮，就可以了。

# ios - 如何在自定义键盘中播放键盘点击声音？

> ID：10299021
> 
> 赞同：16
> 
> 时间：2012-04-24T13:35:44.720
> 
> 标签：ios, objective-c, cocoa-touch, custom-keyboard

我用`UIView`. 但是我没有听到键盘的咔嗒声。所以我尝试了以下代码。但我什么也听不见。我怎样才能播放那个键盘点击声音？

```
NSURL* musicFile = [NSURL fileURLWithPath:[[NSBundle mainBundle] 
                                               pathForResource:@"Tock"
                                               ofType:@"aiff"]];
    AVAudioPlayer *click = [[AVAudioPlayer alloc] initWithContentsOfURL:musicFile error:nil];
    [click setVolume:0.15f];
    [click play]; 
```

我也尝试了下一个。

```
AudioServicesPlaySystemSound(0x450); 
```

我怎样才能？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-24T13:39:11.353

尝试这个：

```
[[UIDevice currentDevice] playInputClick]; 
```

注意

> 使用此方法播放标准系统键盘点击以响应用户在自定义输入或键盘附件视图中的点击。只有当用户在“设置”>“声音”中启用了键盘点击，并且只有当输入视图本身启用并可见时，才会播放点击。
> 
> 要为输入点击启用自定义输入或附件视图，请执行以下两个步骤：
> 
> 在您的输入视图类中采用 UIInputViewAudioFeedback 协议。实现 enableInputClicksWhenVisible 委托方法以返回 YES。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-12-07T13:24:31.183

无法使任何这些工作，但这对我有用：

```
#import <AudioToolbox/AudioToolbox.h>

AudioServicesPlaySystemSound(1104); 
```

但我仍然必须继承 a`UIButton`并将`UIInputViewAudioFeedback`协议添加到它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-07-22T18:35:31.153

在 Swift 中为输入视图添加一个扩展，如下所示；

```
extension UIInputView : UIInputViewAudioFeedback {

    public var enableInputClicksWhenVisible: Bool {
        return true
    }

} 
```

在按钮的操作方法中调用以下函数：

```
 UIDevice.current.playInputClick() 
```

将以下属性添加到您的 info.plist：

> NSExtension | NSExtensionAttributes | RequestsOpenAccess = YES

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-18T14:46:15.080

对于 swift，实际上有一种非常简单的方法来播放键盘音效。

第一的：

```
import AudioToolbox 
```

然后在您需要声音效果时使用它。

```
AudioServicesPlaySystemSound(0x450) 
```

# iphone - iPhone - 获取 UIWebView 的内容大小

> ID：10299023
> 
> 赞同：1
> 
> 时间：2012-04-24T13:35:55.670
> 
> 标签：iphone, objective-c, ios5

我在我的 UIWebView 中打开本地 Pdf 文件，而不是尝试调整 UIWebview 的大小以使 WebView 高度等于 WebView 内容高度，我正在使用这行代码来获取 WebView 内容的高度

```
- (float) getWebViewContentHeight:(UIWebView *)view
{

    CGRect aFrame               = view.frame;

    aFrame.size.height  = [view sizeThatFits:[[UIScreen mainScreen] bounds].size].height;
    view.frame              = aFrame;

    return view.frame.size.height;
} 
```

此代码在 iOS 4.3 上完美运行，但在 iOS 5.0 上无法运行，任何人都可以帮助我请教如何获取 webView 的内容大小或使此代码也适用于 iOS 5

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T14:21:47.910

访问内容有点棘手，但在这里我将展示两种方法。

**1.丑陋的方式**

使用JS查询文档属性：

```
CGSize contentSize = CGSizeMake([[webView stringByEvaluatingJavaScriptFromString:@"document.body.scrollWidth;"] floatValue],
                                [[webView stringByEvaluatingJavaScriptFromString:@"document.body.scrollHeight;"] floatValue]); 
```

**2\. 不那么丑的方式**

`UIWebView`是一个复合对象，其中包含一个内部`UIScrollView`. 从 iOS 5.0 开始，您可以尝试抓取此滚动视图并将其`contentSize`属性直接用作`webView.scrollView.contentSize`. 如果你需要保持与 iOS 4.3 及之前的兼容性，你必须做一些黑魔法来获得滚动视图：

```
UIScrollView* webScrollView = nil;
for ( UIView* subview in [webView subviews] )
{
    if ( [subview isKindOfClass:[UIScrollView class]] )
    {
        webScrollView = (UIScrollView*)subview;
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-12T10:08:57.257

webViewDidFinishLoad 方法可能被多次调用，sizeThatFits 返回的第一个值只是最终大小的一部分。然后无论出于何种原因，当 webViewDidFinishLoad 再次触发时，下一次调用 sizeThatFits 将错误地返回与之前相同的值！对于相同的内容，这将随机发生，就好像它是某种并发问题一样。也许这种行为随着时间的推移而改变了，因为我正在为 iOS 5 构建并且还发现 sizeToFit 的工作方式几乎相同（尽管以前不是这样？）

我已经确定了这个简单的解决方案：

```
- (void)webViewDidFinishLoad:(UIWebView *)aWebView
{        
    CGFloat height = [[aWebView stringByEvaluatingJavaScriptFromString:@"document.height"] floatValue];
    CGFloat width = [[aWebView stringByEvaluatingJavaScriptFromString:@"document.width"] floatValue];
    CGRect frame = aWebView.frame;
    frame.size.height = height;
    frame.size.width = width;
    aWebView.frame = frame;
} 
```

斯威夫特（2.2）：

func webViewDidFinishLoad(webView: UIWebView) {

```
if let heightString = webView.stringByEvaluatingJavaScriptFromString("document.height"),
    widthString = webView.stringByEvaluatingJavaScriptFromString("document.width"),
    height = Float(heightString),
    width = Float(widthString) {

    var rect = webView.frame
    rect.size.height = CGFloat(height)
    rect.size.width = CGFloat(width)
    webView.frame = rect
} 
```

}

更新：我发现如评论中所述，这似乎并没有发现内容缩小的情况。不确定是否适用于所有内容和操作系统版本，试一试。

# c++ - 如何捕获 WndProc() 函数中定义的静态对象的异常？

> ID：10299024
> 
> 赞同：3
> 
> 时间：2012-04-24T13:36:05.467
> 
> 标签：c++, windows, winapi

`a`下面伪代码中如何捕捉静态对象抛出的异常`WndProc()`，Win32 API中的标准消息处理函数在哪里？

```
class A
{
    public:
    class Exception{};
    A() throw(Exception) { ... }
};

LRESULT CALLBACK WndProc (HWND hwnd, UINT message, UINT wParam, LONG lParam)
{
    static A a;

    switch( message )
    {
        case WM_CREATE:

        ...

        break;

        ...

        default:

        return DefWindowProc(hwnd, message, wParam, lParam);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:45:12.740

非 POD 结构的函数级静态在第一次调用函数时初始化，您可以将代码块包装在 a 中`try and catch`并像任何正常情况一样捕获异常

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T13:50:39.080

您需要在 WndProc 中捕获它，因为您不应该让 C++ 异常传播“出”WndProc。（这适用于所有 Windows 回调）

如果 WndProc 代码不是“在您的控制之下”，您可以提供一个包装器 WndProc 来代替。

您需要为以后的处理实现报告机制，例如

```
LRESULT CALLBACK WndProcNoX(....)
{
   try
   {
      static A a;
      ...
   }
   catch(Exception const & x)
   {
      // What do you want to happen?
      // e.g.: add x to a log, or a list of "unhandled" exceptions 
      // that you process e.g. in an Idle or OnTimer handle,
      // or make otherwise accessible.

      return 0; // (*)
   }
} 
```

(*) 是次要问题：虽然 0 对于大多数消息来说是一个“相当安全”的返回值，但这可能会导致问题，例如，当调用者要求他们需要传递给另一条消息的缓冲区长度时。繁荣！

为了防止这种情况，您必须在所有单独的处理程序周围放置一个 try/catch，并为每条消息确定一个“以防出错”的返回值。

另一种选择是在发生错误时将消息传递给默认处理程序，btu 也可能对某些消息有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T00:33:58.710

使用静态指针，初始化为 NULL，并在调用 WM_CREATE 时创建类实例。

当然，对于 WM_CREATE 以外的任何消息，如果您将使用该实例，您应该仔细检查指针是否不为 NULL - 以防您以意外的顺序收到消息。

# bash - 从命令行获取当前打开的应用程序

> ID：10299031
> 
> 赞同：0
> 
> 时间：2012-04-24T13:36:30.540
> 
> 标签：bash, ios5, command-line, jailbreak

是否可以在越狱的 iOS 设备上从命令行获取当前打开的应用程序的 pid 或其名称？

我想要这个，所以将 cycript 挂接到当前应用程序比使用 ps 找到它更快。

我当前的解决方案要求您知道应用程序的名称：

```
cycript2 () 
{ 
    cycript -p $(ps aux | grep -i $1 | head -1 | awk '{ print $2 }')
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T18:41:51.050

我现在知道如何在命令行中执行此操作，但是您可以编写一个小调整，使用 2 个组件进行通信，例如通过 CPDistributedMessagingCenter

1.  一个注入 SpringBoard 的 dylib，它接受消息，获取当前最前面的应用程序并返回有关它的信息（PID，名称，...）

2.  将消息发送到 dylib 并接受返回信息并使用它来启动 cycript 的 CL 可执行文件。

这可能不需要超过 30 行代码:)

# python - 如何将 kwargs 从 save 传递到 post_save 信号

> ID：10299034
> 
> 赞同：31
> 
> 时间：2012-04-24T13:36:45.793
> 
> 标签：python, django

我正在连接一个自定义的 post_save 信号，并注意到我似乎找不到一种简单的方法来传递一组 kwargs。

在保存期间（在自定义表单中）

```
def save(self, commit=True):
    user = super(CustomFormThing, self).save(commit=False)
    #set some other attrs on user here ...
    if commit:
        user.save()

    return user 
```

然后在我的自定义 post_save 钩子中，我有以下内容（但永远不会得到任何 kwargs）

```
@receiver(post_save, sender=User)
def create_profile(sender, instance, created, **kwargs):
    some_id = kwargs.get('some', None)
    other_id = kwargs.get('other', None)

    if created:
        #do something with the kwargs above... 
```

我如何将 kwargs 从 save 传递到 post_save 事件？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-04-24T13:49:05.887

内置信号由 Django 发送，因此您无法控制它们的 kwargs。

你可以：

1.  定义并发送您自己的信号。
2.  在模型实例中存储附加信息。像这样

    ```
    def save(self, commit=True):
        user = super(CustomFormThing, self).save(commit=False)
        #set some other attrs on user here ...
        user._some = 'some'
        user._other = 'other'
        if commit:
            user.save()

        return user

    @receiver(post_save, sender=User)
    def create_profile(sender, instance, created, **kwargs):
        some_id = getattr(instance, '_some', None)
        other_id = getattr(instance, '_other', None)

        if created:
            #do something with the kwargs above... 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T13:46:36.500

我认为没有办法通过一组单独的 kwargs。除了`User`属性，你还想要什么参数？您可以访问参数`User`的信号处理程序中的属性`instance`。`instance`将是`User`刚刚保存的对象。

如果您还有其他要传递的东西，我想您可以尝试将`instance`arg 用作信鸽：

```
def save(self, commit=True):
    user = super(CustomFormThing, self).save(commit=False)
    user.foo = 'bar'
    if commit:
        user.save()
    ... 
```

然后在处理程序中：

```
def create_profile(sender, instance, created, **kwargs):
    myfoo = instance.foo 
```

但是以上内容未经测试，我不确定它是否会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-21T06:18:23.097

我们可以传递额外的参数，如下所示：

```
def save(self, commit=True):
    user = super(CustomFormThing, self).save(commit=False)
    #set some other attrs on user here ...
    if commit:
        user.save(signal_kwargs={'_some': 'some', '_other': 'other'})

    return user 
```

您可以从 post save 方法中获取它，例如：

```
@receiver(post_save, sender=User)
def create_profile(sender, instance, created, **kwargs):
    some_id = kwargs.get('some', None)
    other_id = kwargs.get('other', None)
    if created:
        #do something with the kwargs above... 
```

# javascript - 拖动后如何检测“轻弹”？

> ID：10299038
> 
> 赞同：5
> 
> 时间：2012-04-24T13:36:48.907
> 
> 标签：javascript, mobile-website

我正在尝试在我的移动网络应用程序中实现一个简单的自定义滚动方法。我在垂直滚动时遇到问题，如果页面被“轻弹”，我希望有一点动量效果。

问题是在拖动手势之后检测“轻弹”手势（该手势的速度和可能长度），改变方向等等。希望你明白我的意思，你可以向上或向下拖动页面，在拖动结束时，我想检测是否还有轻弹..

你如何将两者分开？这样的逻辑看起来如何？

非常感谢您的帮助。

代码：（对不起，如果这段摘录有点乱）

```
 var Device = function() {

    //define some private variablees
    var startY,
        startX,
        startTime,
        deltaY = 0,
        deltaX = 0,
        lastY,
        currentPage,
        nextPage,
        prevPage,
        directionY,
        lastTime,
        pages,
        pane,
        offsetX = 0,
        offsetY = 0,
        isPanning,
        isScrolling,
        isTouch = "ontouchstart" in window;

    return {

        init: function() {

        document.getElementById('frame').addEventListener(isTouch ? 'touchstart' : 'mousedown', Device.onTouchStart, false);

            //get all panes in an array
            panes = document.querySelectorAll('.pane');

        },     

onTouchStart: function (evt) {

            //get X and Y of the touch event
            var touch = isTouch ? event.touches[0] : event;
            startY = touch.clientY;

            //add listener for touch move and end
            document.addEventListener(isTouch ? 'touchmove' : 'mousemove', Device.onTouchMove, false);
            document.addEventListener(isTouch ? 'touchend' : 'mouseup', Device.onTouchEnd, false);

            startTime = new Date();
        },
        onTouchMove: function (evt) {

                //get X and Y of the touch event
                var touch = isTouch ? event.touches[0] : event;

                currentY = touch.clientY;

                //calc touch length
                deltaY = currentY - startY;             

                //Detect if scroll is bigger than threshold 5px
                 if (Math.abs(deltaY) > 5 && !isPanning) {

                        isScrolling = true;

                        //get the element
                           pane = panes[0];

                        //set new position
                        offsetY = pane.lastOffset + deltaY;

                                                    //call animation
                        Device.scrollTo(pane,0,offsetY);

                    }

            //detect last direction     
             directionY = (lastY >= currentY) ? 1 : 0;

                //roll over last variables  
                lastY = currentY;
                lastTime = new Date();
        },

        onTouchEnd: function () {

        //timing
                var endTime = new Date();
                var velocity = (endTime - lastTime).toFixed(0);

            console.log('velocity: ' + velocity);

//TEMPORARY
pane.lastOffset = offsetY;

                isScrolling = false;

                //housekeeping
                document.removeEventListener(isTouch ? 'touchmove' : 'mousemove', Device.onTouchMove, false);
                document.removeEventListener(isTouch ? 'touchend' : 'mouseup', Device.onTouchEnd, false);

           //call for momentum  
           Device.doMomentum(velocity);

        },
        scrollTo: function(el,x,y) {
        if (el) {

                el.style['-webkit-transition-timing-function'] = '';
                el.style['-webkit-transition-duration'] = '0ms';
                el.style[ 'WebkitTransform' ] = 'translate3d('+x+'px,'+y+'px, 0px)';
        }
        },
        animateTo: function(el,x,y) {
        if (el) {
                el.style['-webkit-transition-timing-function'] = 'cubic-bezier(0,0,0.25,1)';
                el.style['-webkit-transition-duration'] = '300ms';
                el.style[ 'WebkitTransform' ] = 'translate3d('+x+'px,'+y+'px, 0px)';
        }
        },
        doMomentum: function(velocity) {

        console.log((directionY == 1) ? 'up': 'down');
        console.log('pane.lastOffset: ' + pane.lastOffset);
        var endPosition;

            if (directionY == 1) {
         endPosition = pane.lastOffset - velocity;

        } else {

         endPosition = parseFloat(pane.lastOffset) + parseFloat(velocity);
        }

        console.log(endPosition);

        Device.animateTo(pane,0,endPosition);

        pane.lastOffset = endPosition;

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T01:02:04.100

我认为可以使用与位置和时间相关的多个点来检测轻弹。如果您考虑正常阻力的运动，它将以相当恒定的速度完成。然而，最后的轻弹应该具有明显高于其余阻力的速度。

因此，如果您有一个 5 点数组，其中包含间隔约 0.1 秒的拖动点样本（并且较早的值在数组中较早），您可以像这样计算正常拖动的速度（对于垂直拖动）

```
var dragVelY = (samples[2].y - samples[0].y)/3; 
```

然后潜在的轻弹速度如下：

```
var flickVelY = (samples[4].y-samples[2].y)/3; 
```

如果 flickVelY 明显大于 dragVelY，那么您检测到了轻弹。我尚未对此进行测试，因此您可能需要调整阵列中的样本数量以及您要比较的样本数量以获得良好的拖动或轻弹速度。如果拖得很长，我只需使用 Array.shift 和 Array.push 方法将旧位置移出样本数组并在最后推送新位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:40:49.687

仅供参考，我最终做的只是使用`onTouchMove`-event 和`onTouchEnd`-event 之间经过的时间。

`onTouchMove`基本上，我有一个在回调中不断覆盖自身的日期变量：

```
onTouchMove: function (evt) {
   ...
 intermediateTime = new Date();
   ...
} 
```

然后`onTouchEnd`我得到一个 endTime 值并评估差异。如果这个时间非常低，那么我认为最后有一个“轻弹”。

```
onTouchEnd: function (evt) {
   ...
 var endTime = new Date();

 var vel  = (endTime - intermediateTime);

 if (vel <= 100) {

    doMomentumOrSomething();

 }
   ...
} 
```

这非常简单，但实际上效果很好。

# azure-sql-database - 将 SQL Azure 数据库连接到 SQL Server Management Studio 2008

> ID：10299047
> 
> 赞同：2
> 
> 时间：2012-04-24T13:37:21.453
> 
> 标签：azure-sql-database

我尝试将我的 SQL Azure 数据库连接到 SQL Server Management Studio 2008。我得到了一个连接，但只是使用我的 SQL Azure 服务器的主数据库。我想在我的 SQL Server Management Studio 的对象资源管理器中查看我的第二个数据库在 SQL Azure Server 上的所有表。

当我连接到 SQL Azure 服务器后尝试切换所选数据库时，出现以下异常：

无法访问“数据库名称”-数据库。

我不知道为什么它会抛出这个异常，谷歌无法帮助我......

# mysql - mysqldump - 拒绝用户访问

> ID：10299049
> 
> 赞同：3
> 
> 时间：2012-04-24T13:37:27.383
> 
> 标签：mysql, command-line, mysqldump

当我从打开的 Windows 命令外壳 (Win7) 运行以下命令时，它工作正常，并且备份被写入我的文件系统。MySQL 数据库位于远程 linux 服务器上。

```
"C:\Program Files\MySQL\MySQL Server 5.1\bin\mysqldump" -h *******.com -u ******* -p***** --databases ******* > "C:\******\_Database\backups\DB_%date:~0,3%.bak" 
```

但是，当我将相同的命令放入批处理文件（whatever.bat）并运行 bat 文件（最后带有“暂停”命令）时，我收到错误“得到错误：1045：用户'**我**'的访问被拒绝@'c-24-2-64-138.hsd1.ut.comcast.net'（使用密码：YES）尝试连接时“。

为什么它可以在打开的命令 shell 中工作，但不能在 bat 文件中运行？我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-04T08:54:02.803

您应该使用单引号转义密码：`-p'password'`.

正确的命令是：

```
"mysqldump" -h *******.com -u ******* -p'*****' --databases ******* > "C:\******\_Database\backups\DB_%date:~0,3%.bak" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T11:02:45.943

我一直遇到类似的问题。我有 4 个数据库都可以正常备份。无论我尝试使用哪个用户 - 甚至是 root，第 5 个都不会备份。原来密码中的 ^ 符号对我来说是个问题。一旦我将用户密码更改为包括！而不是 ^ 一切都立即生效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T04:38:47.180

好吧，我想出了这个令人恼火的事情。问题是我的密码本身：4$5%6^^7^&deZeYPdx5014VB3C#

当我更改该密码时，一切正常。那里的某些字符会提升 Windows 批处理文件的执行。我怀疑这是 % 符号，但很难知道。必须是 Windows 中的错误，因为它可以在命令 shell 中正常工作，但不能在 bat 文件或 cmd 文件中正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T14:31:57.723

你试过`--user=**** --password=****`吗？

我记得在让 mysqldump 获取脚本中的用户名和密码时遇到了一些问题，并发现此设置有效。抱歉，但恐怕我不记得更多关于问题是什么或导致它们的原因了......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-08T11:49:13.847

以下对我有用，以前密码不被接受，所以在密码周围没有引号的情况下尝试了它......

这是我使用的 mysqldump -h localhost -u username -ppassword --databases databasename > "C:\backups\dbbkup.%DATE:/=%.bak"

# c++ - 补差 C++ ==

> ID：10299050
> 
> 赞同：-8
> 
> 时间：2012-04-24T13:37:27.660
> 
> 标签：c++, operators, equality

我们必须表达
`if ((option & SERVER_OPTIONS::VALUE) == SERVER_OPTIONS::VALUE) ...`

```
if ( option & SERVER_OPTIONS::VALUE == SERVER_OPTIONS::VALUE )... 
```

为什么相同的值`option`会有不同的结果？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-24T13:39:38.813

[C++ 运算符优先级](http://en.cppreference.com/w/cpp/language/operator_precedence)表明`==`和在**之前**`!=`求值。所以你的第二个语句被评估，就好像它是这样的： **`&`**

 **```
if (option & (SERVER_OPTIONS::VALUE == SERVER_OPTIONS::VALUE)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T13:52:07.317

在这份声明中

`if ((option & SERVER_OPTIONS::VALUE) == SERVER_OPTIONS::VALUE)`

这`option & SERVER_OPTIONS::VALUE`部分首先被评估为 () 更高的优先级。在后一种情况下`SERVER_OPTIONS::VALUE == SERVER_OPTIONS::VALUE`，首先评估。执行顺序决定表达式的结果。**

# mysql - 使用 Perl CGI 和 XAMPP 连接到 MySQL 数据库

> ID：10299051
> 
> 赞同：1
> 
> 时间：2012-04-24T13:37:28.710
> 
> 标签：mysql, perl, cgi, xampp

我正在使用 Perl CGI 使用以下代码访问 XAMPP 中的 MySQL 数据库：

```
#!/xampp/perl/bin/perl -w

use DBI;

print "Content-type:text/html\r\n\r\n";

$database = "mydb";
$host = "localhost";
$port = "3306";
$user = "root";
$pw = "";

$dsn = "dbi:mysql:$database:$host:$port";

print "Trying to connect <br />";
$connect = DBI->connect($dsn, $user, $pw, {RaiseError=>1});

if (defined $connect) {
    print "Preparing query <br />";
}

$query = "SELECT * FROM reference WHERE ID = 1742031";
$query_handle = $connect->prepare($query);

$query_handle->execute();

$query_handle->bind_columns(undef, \$pmid, \$popu, \$loc);

while($query_handle->fetch()) {
   print "$pmid, $popu, $loc <br />";
} 
```

但是我无法将结果打印到我的网页上。我想我无法连接到数据库，因为“准备查询”行没有被打印出来。但我可以连接到数据库并从 mysql 命令行执行此查询。我不知道问题可能是什么。

编辑：安装缺少的 DBD:mysql 模块后，我收到一个新错误：“无法连接到本地主机 (10061) 上的 MySQL 服务器”。我尝试按照这里的建议进行操作： [MYSQL - Cant connect to MYSQL server on 'localhost' (10061)](https://stackoverflow.com/questions/385292/mysql-cant-connect-to-mysql-server-on-localhost-10061) 并且一切似乎都很好。我正在运行 mysqld.exe，并且正在将 mysql 作为服务运行。另外，我可以通过 mysql 命令行以及 phpMyAdmin 连接到数据库，所以应该没有权限问题，因为我只有一个 root 帐户。

请指教。我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:42:30.563

> 如何安装这个模块？

在命令行上使用“cpan”：

```
> cpan 
cpan shell -- CPAN exploration and modules installation (v1.960001)
Enter 'h' for help.

cpan[1]> install DBD::mysql 
```

如果没有安装，你可以下载它：

[https://metacpan.org/pod/DBD::mysql](https://metacpan.org/pod/DBD::mysql)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T01:31:13.113

要使用 DBI 连接到 MySQL 数据库，请使用

```
$dsn = "dbi:mysql:$database;host=$host;port=$port"; 
```

localhost 和端口 3306 是默认值，因此您可以省略这些部分。

# mysql - 子查询和用户变量

> ID：10299058
> 
> 赞同：0
> 
> 时间：2012-04-24T13:37:44.440
> 
> 标签：mysql, sql

我遇到了一个我无法掌握的问题，这让我发疯了。

我正在使用子查询进行查询，其中我使用变量重新格式化某些值

```
SELECT 
    IF(qry.pFamily=@lastFamily,'',@lastFamily:=qry.pFamily) AS family,
    IF(qry.pSubFamily=@lastSubFamily,'',@lastSubFamily:=qry.pSubFamily) AS subFamily,
    qry.pUid AS qUID,
    qry.pPlu AS qPLU,
    qry.pDescription AS qDesc,
    replace(round(qry.pSalesPrice/100,2),'.',',') as pPrice
FROM (
   SELECT
   @lastFamily ='',
   @lastSubFamily ='',
   IF(sf.RecordDeleted=0,
        SUBSTR(concat(f.description,"\n"),1,20),
        SUBSTR(concat("Sem familia\n"),1,20)) AS pFamily,
   IF(sf.RecordDeleted=0,
        SUBSTR(concat("    ",sf.description,"\n"),1,30),
        SUBSTR(concat(""),1,30))
        AS pSubFamily,
    p.ItemID AS pUid,
    IF(p.ProductLookUp IS NULL,'0',p.ProductLookUp) AS pPlu,
    SUBSTR(p.ShortDescription1,1,20) AS pDescription, 
    SUBSTR(prop.SalesPrice1,1,10) AS pSalesPrice
    FROM plus p
    INNER JOIN properties prop on p.PropertyUID = prop.uid 
    INNER JOIN families f on p.FamilyID = f.UID
    INNER JOIN subFamilies sf on p.SubFamilyID = sF.UID 
    WHERE p.RecordDeleted=0 
    ORDER BY pFamily, pSubFamily,pDescription
) AS qry; 
```

使用变量 lastFamily 和 lastSubFamily 背后的想法是替换重复的文本以获得干净的、可立即使用的结果集。

在第一次运行中，我得到

```
'Bebida', '    Agua', '22', ?, '1/4 Castelo', ?
'Bebida', '    Agua', '23', ?, 'Agua 0.33cl', ?
'Bebida', '    Agua', '24', ?, 'Agua 0.50cl', ?
'Bebida', '    Agua', '25', ?, 'Agua 1.5l', ?
'Bebida', '    Agua', '26', ?, 'Agua c/Sabor', ?
'Bebida', '    Agua', '27', ?, 'Agua Gás', ?
'Bebida', '    Alcoolica', '1', ?, 'Alianca Velha', ?
                    (etc...) 
```

但是第二次运行查询时，我得到了想要的结果

```
'Bebida', '    Agua', '22', ?, '1/4 Castelo', ?
'', '    ', '23', ?, 'Agua 0.33cl', ?
'', '    ', '24', ?, 'Agua 0.50cl', ?
'', '    ', '25', ?, 'Agua 1.5l', ?
'', '    ', '26', ?, 'Agua c/Sabor', ?
'', '    ', '27', ?, 'Agua Gás', ?
'', '    Alcoolica', '1', ?, 'Alianca Velha', ?
                    (etc...) 
```

我的问题是如何（在哪里）初始化 lastFamily 和 lastSubFamily 以便在第一次运行时设置它们。

每次我开始一个新的 mysql 会话时，都会发生这种情况，然后它就永远不会发生。所以我猜这些变量被存储在某个地方。我尝试清理缓存并刷新表，但结果是一样的。

有任何想法吗？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:45:40.137

听起来您正在尝试使用 SQL 生成交叉表报告以隐藏“重复”值……您只希望“分组”列出现一次，然后将剩余行留空。

```
Family     SubFamily   qUID    qPLU    qDesc         qPrice
-----------------------------------------------------------
Bebida     Auga        22      ?       1/4 Castelo   ?
                       23      ...
                       24      ...
                       25      ...
                       26      ...
                       27      ...
           Alcoolica   1       ...
Family2    SubFamily1  15
                       16
           SubFamily2  15
                       16 
```

请注意，[MySQL 参考](http://dev.mysql.com/doc/refman/5.0/en/user-variables.html)说：

> 作为一般规则，您永远不应为用户变量赋值并在同一语句中读取该值。您可能会得到预期的结果，但这不能保证。涉及用户变量的表达式的求值顺序是未定义的，并且可能会根据给定语句中包含的元素而改变；此外，不保证此顺序在 MySQL 服务器的版本之间是相同的。

此任务**更**适合用于显示和格式化从数据库检索的数据集的客户端应用程序/报告工具。

您将很难在 SQL 中轻松做到这一点，因为在关系表中，每一行都独立于其他行（即使集合是有序的）。在某些 DBMS 中可能有使用分析函数的方法来实现这一点，但实际上我强烈建议您使用显示结果集的过程语言来执行此操作 - 一个简单的过程循环，其中包含一些变量来跟踪先前的系列/亚科应该可以解决问题。

# jquery - jQuery、画布、范围、Html5

> ID：10299061
> 
> 赞同：0
> 
> 时间：2012-04-24T13:38:01.360
> 
> 标签：jquery, html, canvas, range

我正在尝试获取一个 JQuery 函数来通过范围表单元素更新 Canvas 元素。我编写的 Jquery 函数如下所示：

```
$(document).ready(function() {
    $("changing").change(function() {
        var Radius = $(this).val();
        circle(Radius);
    });
}); 
```

表格如下所示：

```
<input id="changing" name="changing" type="range" min="0" max="500" step="5" value="150" onchange="changing(this.val)" /> 
```

我是编写函数的新手，所以我很确定我错过了一步或做了一些相当明显的错误。有人愿意纠正我吗？如果有您推荐我阅读的链接，请按我的方式折腾。

哦，在我的画布上，我有：

```
ctx.arc(250, 250, Radius, 0, Math.PI*2); 
```

其中 Radius 是要从四处移动的滑块更新的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:54:53.327

尝试：`$("#changing").change(function() {`

**#**表示您所指的ID 基本上就是您要访问的内容。$("changeing") 意味着您正在尝试访问标签类型“正在改变”。

# dynamics-ax-2009 - Axapta：如何填充网格？

> ID：10299063
> 
> 赞同：0
> 
> 时间：2012-04-24T13:38:05.140
> 
> 标签：dynamics-ax-2009, axapta

在 Dynamics Ax 中，我如何以编程方式填充网格？我认为，使用数据源...好的，但是如何将“查询”分配给数据源，然后填充网格？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:18:36.233

它不像你想的那样，数据源将只包含一个表，当你将一个数据源分配给 Grid AX 时，我们将使用关系来过滤记录，例如，如果你将 SalesTable 放在 Datasource 和 SalesLine 到另一个 DataSource，然后设置一个对于 SalesTable 数据源的 gride 和另一个用于 SalesLine 数据源的网格，当您从 SalesTable 中选择一行时，它将仅选择与此记录相关的 SalesLine。

归根结底，不要认为 Form Datasorce 就像 Report Datasource。

# java - Java中的修饰符关键字顺序

> ID：10299067
> 
> 赞同：61
> 
> 时间：2012-04-24T13:38:24.373
> 
> 标签：java, syntax, coding-style, access-modifiers

每次我在 Java 中使用比 更多的关键字编写方法时`public void`，每次我都以另一种方式编写它。有时“ `static public void`”有时“ `public static void`”等等。

这些关键字的最佳顺序（最佳做法）是什么？

[ `abstract/static`][ `final`][ ][ `synchronized`][ `public/private/protected`][ `result_type`]？？？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-04-24T13:40:55.587

理论上讲 public static final 或 final static public 都没有关系，但是如果你遵循通常的约定，其他人将能够更容易地阅读你的代码。这是首选顺序：

> [公开| 受保护 | 私人的 ]
> 
> 静止的
> 
> 抽象的
> 
> 同步的
> 
> [瞬态| 易挥发的 ]
> 
> 最后
> 
> 本国的
> 
> 严格的fp
> 
> [诠释| 长 | 字符串 | 班级 | 枚举 | 接口等]

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2013-07-19T19:41:16.853

[Checkstyle](http://checkstyle.sourceforge.net/config_modifier.html)（它实现了 Java 语言规范部分的建议[，](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.3) 8.1.1、8.3.1[和](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.1.1)8.4.3 [）](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.1)说：

1.  上市
2.  受保护
3.  私人的
4.  抽象的
5.  默认
6.  静止的
7.  最后
8.  短暂的
9.  易挥发的
10.  同步的
11.  本国的
12.  严格的fp

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-05-24T10:10:10.953

[Java语言规范](https://docs.oracle.com/javase/specs/jls/se11/html/index.html)中提到了修饰符的自定义使用顺序 （因此无需有自己的意见;-)）例如对于[方法修饰符](https://docs.oracle.com/javase/specs/jls/se11/html/jls-8.html#jls-8.4.3)，您会找到以下定义（摘录）：

> ```
> MethodModifiers:
>     MethodModifier
>     MethodModifiers MethodModifier
> 
> MethodModifier: one of
>     Annotation public protected private abstract
>     static final synchronized native strictfp 
> ```
> 
> 如果两个或多个（不同的）方法修饰符出现在方法声明中，尽管不是必需的，但习惯上它们的出现顺序与上面在 MethodModifier 的产生式中显示的顺序一致。

您会在其他几个指定使用修饰符的地方找到这句话，例如[此处](https://docs.oracle.com/javase/specs/jls/se11/html/jls-8.html#jls-8.3.1)用于字段修饰符。

[（这主要是从我这里](https://stackoverflow.com/a/16732059/367285)的另一个答案中复制的）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-24T13:43:52.410

“最好的”是遵循[Java Coding Style Guide](https://web.archive.org/web/20130425142804/http://www.oracle.com/technetwork/java/codeconv-138413.html)，它在 6.2 （方法声明）中声明：

```
public static final synchronized long methodName()
    throws ArithmeticException, InterruptedException {
    static int count;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-24T13:40:06.300

最好的顺序是其余代码使用的顺序。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-24T13:40:26.793

像这样：

`public static final synchronized void calculate()`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-24T13:44:11.350

是的，有一个标准的排序。

如果您使用 IDE，您可以将其设置为为您格式化代码，即在 Eclipse 中的 Preferences -> Java -> Editor -> Save Actions 中，您可以选中“Format source code”框

那你就不用再担心了。每当保存文件时，它将自动完成，如果您的整个项目都使用它，那么整个项目的代码都以相同的方式格式化。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-04-24T13:43:37.633

这是我个人的选择

```
public static final void method() { }
public void method() { }
public abstract void method() { } 
```

这似乎也符合 java 文档

# c# - 基于时间刻度的唯一、非重复字母数字代码

> ID：10299069
> 
> 赞同：0
> 
> 时间：2012-04-24T13:38:31.123
> 
> 标签：c#, linq, random

我有一个从[这篇文章](https://stackoverflow.com/questions/1344221/how-can-i-generate-random-8-character-alphanumeric-strings-in-c)中获得的功能，效果很好：

```
private string GenerateTransactionCode()
{
    var chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
    var random = new Random();
    var result = new string(
        Enumerable.Repeat(chars, 8)
                  .Select(s => s[random.Next(s.Length)])
                  .ToArray());
    return result;
} 
```

我想对其进行修改，以便它不是随机的，而是根据`DateTime.UtcNow.Ticks`. 这样就不会重复了。我想可能需要根据毫秒的长度增加生成的 TransactionCode 中的字符？我希望生成的 TransactionCode 的长度保持不变。希望不超过 8 个字符。

**示例**：如果刻度恰好是`135`（对我来说比现实生活中更多），那么生成的代码将是`ACE`或`BDF`取决于它是否基于 0（我不在乎是否是）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T13:42:58.320

我想你真正想要的是一个真正的非重复交易代码，或[GUID](http://en.wikipedia.org/wiki/Globally_Unique_Identifier)：

```
Guid g = Guid.NewGuid();
string txcode = Convert.ToBase64String(g.ToByteArray()); 
```

如果你想清理它：

```
txcode = txcode.Replace("=","").Replace("+","").Replace("/",""); 
```

生成输出的示例`OEndimZwsEKRAbAwnvzjoA`但是由于替换`+` `/`和`=`长度可能会稍微不可预测。

您可能更喜欢这种格式`g.ToString("N")`，它提供类似的`58d5381c878b484591568b086296fe8e`内容并**保证长度为 32 个字符。**

# ssis - 如何使用 SSIS 包跳过损坏的 XML 文件并仅处理有效的文件？

> ID：10299072
> 
> 赞同：0
> 
> 时间：2012-04-24T13:38:45.933
> 
> 标签：ssis, xml-parsing, sql-server-2008-r2

我正在尝试通过 SSIS 包解析几个 XML 文件。XML 文件是根据每日计划生成的，但某些 XML 文件已损坏。我想知道如何跳过损坏的文件并处理剩余的有效 XML 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:01:23.813

跳过损坏的文件意味着您提前知道哪些文件已损坏。我很确定那不是您的上下文，您希望您的 SSIS 包在解析这些文件时不会崩溃。您可以将**MaximumErrorCount**设置得更高，这样您的 SSIS 包即使在那些损坏的文件上失败时也能继续执行。

# git - git server 与 svn server 同步

> ID：10299082
> 
> 赞同：2
> 
> 时间：2012-04-24T13:39:20.423
> 
> 标签：git, svn

我有一个 git 服务器和一个 svn 服务器。我想将任一服务器上提交的代码同步到另一台服务器，例如，我将代码提交到 git 服务器，然后我还可以从同步 git 服务器的代码的 svn 服务器获取相同的代码。

我发现*git-svn*可以将 git 控制的代码提交到 svn 服务器，但对于我的问题似乎没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T13:47:22.693

谷歌搜索并找到[git-svn-mirror](http://git-svn-mirror%20%20A%20command-line%20tool%20that%20automates%20the%20task%20of%20creating%20a%20GIT%20mirror%20for%20a%20SVN%20repo,%20and%20keeping%20it%20up-to-date.)：

> 一个命令行工具，可自动执行为 SVN 存储库创建 GIT 镜像并使其保持最新的任务。

# iphone - 基于 iPhone UITabBar 的应用程序 + 带有详细信息视图的 UITableView

> ID：10299083
> 
> 赞同：0
> 
> 时间：2012-04-24T13:39:20.787
> 
> 标签：iphone, uitableview, uitabbar

我正在编写一个基于 UITabBar 的 iPhone 应用程序。其中一个选项卡项是 UITableView 并且可以完美运行。但是现在我想添加一个详细视图，所以我创建了一个并尝试将它与 TableView 连接起来。但是有一个问题，如果我触摸一个项目没有任何反应，选择会出现但不会进入详细信息视图并且选择不会消失。我根据使用应用程序委托的示例编写代码，因此，这些是我无法适应我的代码的代码。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T13:44:58.760

你实现的功能`- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`了`UITableViewDelegate`吗？

** 编辑 **

正如我在评论中所说，您需要实现 UINavigationController。这是一个关于如何使用界面生成器的示例：

[http://www.cimgf.com/2009/06/25/uitabbarcontroller-with-uinavigationcontroller-using-interface-builder/](http://www.cimgf.com/2009/06/25/uitabbarcontroller-with-uinavigationcontroller-using-interface-builder/)

# oracle - 查询以查找总和小于金额的行

> ID：10299086
> 
> 赞同：2
> 
> 时间：2012-04-24T13:39:23.310
> 
> 标签：oracle, cursor, sum

我有一个账户，每个账户对应的利息被扣除如下

```
amount      Date
2           01-01-2012
5           02-01-2012
2           05-01-2012
1           07-01-2012 
```

如果帐户中的总贷方为 8。需要查询以查找贷方金额可以调整的利息截止日期。

在这里，查询应该给出 02-01-2012(2+5 < 8) 的输出。我知道这可以通过光标来处理。但是有什么方法可以在 ORACLE 中将其编写为单个查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T13:49:25.617

```
SELECT  pdate
FROM    (
        SELECT  t.*,
                LAG(date) OVER (ORDER BY date) AS pdate
                8 - SUM(amount) OVER (ORDER BY date ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) AS diff
        FROM    mytable t
        ORDER BY
                date
        )
WHERE   diff < 0
        AND rownum = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T13:48:17.050

不知道你的表的结构，这里有一个猜测：

```
SELECT date from your_table
GROUP BY AMOUNT
HAVING SUM(AMOUNT) < 8 
```

注意：这是 LESS THAN 8。根据需要更改条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T13:50:47.033

还没有做 (2+5)<8 的事情：

```
select max(cum_sum), max(date)
from (
    select date, 
        sum(amount) over (order by date) cum_sum
) where cum_sum < 8 
```

# android - Sharepeference空指针异常？

> ID：10299087
> 
> 赞同：-1
> 
> 时间：2012-04-24T13:39:23.713
> 
> 标签：android, sharedpreferences

我正在尝试为以下用户设置一些共享首选项：

*   姓名
*   年龄
*   性别
*   重量
*   高度
*   活动水平

我已经实现了这段代码，但它给了我一个`NullPointerException`，这里的错误是什么？

```
 package com.nutriapp;

  import android.app.Activity;
  import android.content.SharedPreferences;
  import android.os.Bundle;
  import android.view.View;
  import android.widget.Button;
  import android.widget.EditText;
  import android.widget.RadioButton;
  import android.widget.RadioGroup;

public class ProfilePreferenceActivity extends Activity {

RadioButton rb_male;
RadioButton rb_female;
RadioButton rb_light;
RadioButton rb_moderate;
RadioButton rb_heavy;
EditText name;
EditText age, weight, height;
RadioGroup genderradiogroup;
RadioGroup levelofactivity;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.createprofile);
    SharedPreferences customSharedPreference = getSharedPreferences(
            "myCustomSharedPrefs", Activity.MODE_PRIVATE);

    name = (EditText) findViewById(R.id.namefield);
    name.setText(customSharedPreference.getString("namepref", ""));

    age = (EditText) findViewById(R.id.agefield);
//  int Age = Integer.parseInt(age.getText().toString());
    age.setText(customSharedPreference.getString("agepref", ""));

    genderradiogroup = (RadioGroup) findViewById(R.id.radioGroup2);
    rb_male = (RadioButton) findViewById(R.id.maleradiobutton);
    rb_female = (RadioButton) findViewById(R.id.femaleradiobutton);
    genderradiogroup.check(customSharedPreference.getInt("genderprefs",
            rb_male.getId()));

    weight = (EditText) findViewById(R.id.weightfield);
    //int Weight = Integer.parseInt(weight.getText().toString());
    weight.setText(customSharedPreference.getString("weightpref", ""));

    height = (EditText) findViewById(R.id.heightfield);
    //int Height = Integer.parseInt(height.getText().toString());
    weight.setText(customSharedPreference.getString("heightpref", ""));

    RadioGroup levelofactivity = (RadioGroup) findViewById(R.id.radioGroup2);
    rb_light = (RadioButton) findViewById(R.id.lightradiobutton);
    rb_moderate = (RadioButton) findViewById(R.id.moderateradiobutton);
    rb_heavy=(RadioButton) findViewById(R.id.heavyradiobutton);
    levelofactivity.check(customSharedPreference.getInt("levelpref", rb_light.getId()));

    Button addUser = (Button) findViewById(R.id.checkcreateprofilebutton);

    addUser.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            savePreferences();
            finish();

        }
    });

}

private void savePreferences(){

    SharedPreferences customSharedPreference = getSharedPreferences("myCustomSharedPrefs", Activity.MODE_PRIVATE);
    SharedPreferences.Editor editor = customSharedPreference.edit();
    editor.putString("namepref", name.getText().toString());
    editor.putString("agepref", age.getText().toString());
    editor.putInt("genderprefs", genderradiogroup.getCheckedRadioButtonId());
    editor.putString("heightpref", height.getText().toString());
    editor.putString("weightpref", weight.getText().toString());
    editor.putInt("levelpref", levelofactivity.getCheckedRadioButtonId());
    editor.commit(); 
  }   
} 
```

这是日志：

```
04-24 13:36:00.062: E/AndroidRuntime(797): FATAL EXCEPTION: main
04-24 13:36:00.062: E/AndroidRuntime(797): java.lang.NullPointerException
04-24 13:36:00.062: E/AndroidRuntime(797):  at com.nutriapp.ProfilePreferenceActivity.savePreferences(ProfilePreferenceActivity.java:86)
04-24 13:36:00.062: E/AndroidRuntime(797):  at com.nutriapp.ProfilePreferenceActivity.access$0(ProfilePreferenceActivity.java:77)
04-24 13:36:00.062: E/AndroidRuntime(797):  at com.nutriapp.ProfilePreferenceActivity$1.onClick(ProfilePreferenceActivity.java:69)
04-24 13:36:00.062: E/AndroidRuntime(797):  at android.view.View.performClick(View.java:3511)
04-24 13:36:00.062: E/AndroidRuntime(797):  at android.view.View$PerformClick.run(View.java:14105)
04-24 13:36:00.062: E/AndroidRuntime(797):  at android.os.Handler.handleCallback(Handler.java:605)
04-24 13:36:00.062: E/AndroidRuntime(797):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-24 13:36:00.062: E/AndroidRuntime(797):  at android.os.Looper.loop(Looper.java:137)
04-24 13:36:00.062: E/AndroidRuntime(797):  at android.app.ActivityThread.main(ActivityThread.java:4424)
04-24 13:36:00.062: E/AndroidRuntime(797):  at java.lang.reflect.Method.invokeNative(Native Method)
04-24 13:36:00.062: E/AndroidRuntime(797):  at java.lang.reflect.Method.invoke(Method.java:511)
04-24 13:36:00.062: E/AndroidRuntime(797):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-24 13:36:00.062: E/AndroidRuntime(797):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-24 13:36:00.062: E/AndroidRuntime(797):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:53:14.630

```
SharedPreferences customSharedPreference = getSharedPreferences("myCustomSharedPrefs", Activity.MODE_PRIVATE); 
```

您的对象“customSharedPreference”可能为空，但您将使用它，无需任何空检查。

我建议你使用调试器来找出什么对象是空的。如果你告诉我们什么是空的，我们会更容易找出原因

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T13:45:20.213

您在 onCreate 中没有这样做`setText`..`height`复制粘贴时要小心..

您正在`levelofactivity`onCreate 方法中重新声明变量。应该是会员。。

# blackberry - 如何在 BlackBerry 中将焦点设置到 FieldManager？

> ID：10299091
> 
> 赞同：0
> 
> 时间：2012-04-24T13:39:31.463
> 
> 标签：blackberry

如何将焦点吸引到`VerticalFieldManager`黑莓中。

我已经尝试过了，但没有工作。

```
VerticalFieldManager vv=new VerticalFieldManager(Manager.focusFOCUSABLE); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:47:41.793

您可以尝试调用`Field.setFocus`它，但由于经理是一个容器，我不确定您是否会看到它的“焦点”。

如果它不起作用，您也可以尝试覆盖该方法并在返回 true`paint`时绘制自己的自定义焦点。`isFocus`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T13:43:55.607

试试这个 -

```
VerticalFieldManager vv=new VerticalFieldManager(FOCUSABLE); 
```

然后将项目添加到 vv。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T09:43:36.320

这是这样做的方法：

```
VerticalFieldManager vv=new VerticalFieldManager(FOCUSABLE) {
    protected void paintBackground(Graphics g) {
    int prevColor = g.getColor();
    int bgColor;

    if (isFocus()) {
        bgColor = Color.Blue;
    } else {
        bgColor = Color.White;
    }

    g.setColor(bgColor);
    g.fillRoundRect(0, 0, getPreferredWidth(), getPreferredHeight(), 0, 0);
    g.setColor(prevColor);
}
    public void onFocus(int direction) {
    super.onFocus(direction);
    this.invalidate();
}
public void onUnfocus() {
    super.onUnfocus();
    this.invalidate();
}
};
_focusAnchor = new NullField(FOCUSABLE);
add(_focusAnchor); 
```

# javascript - 无法从某些浏览器中的某些 HTML 页面动态调用 .js 文件

> ID：10299094
> 
> 赞同：0
> 
> 时间：2012-04-24T13:39:43.383
> 
> 标签：javascript, blackberry, cross-browser

我像这样从我的 html 页面调用 .js 文件

```
var value1 = "Hello";
var value2 = "John";

var oHead1 = document.getElementsByTagName('HEAD').item(0);
var paramScript = document.createElement("script");

paramScript.type = "text/javascript";

        paramScript.setAttribute('value1',
                value1);
        paramScript.setAttribute('value2',
                value2);

oHead1.appendChild(paramScript);

var oHead = document.getElementsByTagName('HEAD').item(0);
var oScript = document.createElement("script");
oScript.type = "text/javascript";
oScript.src = "some.js";
oHead.appendChild(oScript); 
```

这在 Android 和 iPhone 浏览器中运行良好。但它在 Blackberry OS 5.0 浏览器中不起作用

是否有替代方案适用于所有浏览器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:12:35.763

与其设置一个空的脚本标签并将属性设置为变量，不如使用在脚本开头设置的变量更有意义......

```
var value1 = "Hello";
var value2 = "John"; 
```

这不仅会减少您发生的 DOM 操作次数，而且还应该简化您在 some.js 中检索变量的方式。

我可以提供的另一个建议是将您的 JS 包装在一个自调用函数中。

```
(function(){
    // Code Here
}()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T13:51:47.927

您应该使用[LAB](http://labjs.com/)或[Frame](https://github.com/bishopZ/Frame.js)之类的库加载器。脚本加载有很多浏览器特性，并且库似乎都解决了它们，尽管我不能专门谈论 Blackberry OS 5.0。

# jquery - jquery .live() 传递参数

> ID：10299097
> 
> 赞同：1
> 
> 时间：2012-04-24T13:40:00.553
> 
> 标签：jquery

我想将宽度和高度参数传递给 .live() 函数。它可以工作，但看不到（this）标签。很快，是否可以将值传递给 jquery 中的实时函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:44:08.897

这是不可能的，但在函数内部，您可以访问`this`实例，该实例将是触发事件的 html 元素：

```
 $("#element").live("click", function(){
        var width = $(this).width();
        var height = $(this).height();
    }) 
```

使用 on() 是一样的，因为正如@FAddel 所说，它现在是推荐的方式

```
 $("#element").on("click", function(){
        var width = $(this).width();
        var height = $(this).height();
    }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T13:47:44.560

```
jQuery(document).on('.yourElement', 'event', function() {
    var height = 800;
    var width = 400;
    jQuery(this).height(height);
    jQuery(this).width(width);
}); 
```

或者，如果你想活下去：

```
jQuery('.yourElement').live('click', function(){
    var height = 800;
    var width = 400;
    jQuery(this).height(height);
    jQuery(this).width(width);
}); 
```

如果你不想使用我推荐[.delegate()](http://api.jquery.com/delegate/)：

```
jQuery(document).delegate('.yourElement', 'click', function(){
    var height = 800;
    var width = 400;
    jQuery(this).height(height);
    jQuery(this).width(width);
}); 
```

# delphi - 每个表单的每个不同实例如何在变量中具有不同的值？

> ID：10299100
> 
> 赞同：1
> 
> 时间：2012-04-24T13:40:05.097
> 
> 标签：delphi, variables, mdi, scoping

我有一个显示联系地址的 mdi 表格。由于它是 Mdi，我可以打开表单的多个副本。但是，显然使用的变量会在表单中“复制”。因此，在下面的代码中，ContactTypeId 将具有基于最后创建的表单的值。

```
implementation

uses DataModule, MainForm;

{$R *.dfm}

var ModuleUserLevel, ContactId, ContactTypeId : Integer;
  EditMode, EditAccess, AddAccess, DeleteAccess  : Boolean;
  ContactName : String;

constructor TContactDetailsFrm.Create(AOwner:TComponent; InContactTypeId, InContactId : Integer);
Begin
  Inherited Create(AOwner);
  ContactId := InContactId;
  ContactTypeId := InContactTypeID;
End; 
```

我怎样才能避免这种情况？

提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-24T13:49:10.527

您正在使用外部（通常称为*全局*，有点不精确）变量，但可能需要表单类中的实例字段`TContactDetailsFrm`：

```
type
  TContactDetailsFrm = class(TForm)
  private
    FModuleUserLevel, FContactId, FContactTypeId: Integer;
    FEditMode, FEditAccess, FAddAccess, FDeleteAccess: Boolean;
    FContactName: string;
  public
    { Public-Deklarationen }
  end; 
```

这`F`是 Delphi 中私有字段的惯用前缀。

# javascript - 如何编码此JavaScript函数以显示两个特定类型时显示两个+字段集

> ID：10299103
> 
> 赞同：0
> 
> 时间：2012-04-24T13:40:06.517
> 
> 标签：javascript

我有一个网络表单，在本例中，用户从下拉字段中选择项目类型，并根据所选类型隐藏/显示各个部分。下面数组中的 id 是字段集 id，值是在下拉字段中选择的值。

现在问题来了。我有一个客户希望在选择特定项目时出现**两个部分/字段集。**[此选项可适用于各种项目类型]。**例如**，如果我选择“**小册子**”作为项目类型，客户希望显示**小册子部分/字段集以及名为“Brief Details”的字段集**。它的 ID 是“556”。

如果我将“{id : '556', value:'Brochure'}”添加到下面的数组中，“Brief Details”部分/字段集**将显示**，**但**它**隐藏**了在这种情况下也应该显示的“Brochure”字段集. 我确实明白为什么会发生这种情况，但无法弄清楚如何使这个 javascript 工作。

那么如何**使用下面的代码库进行编码**[如果选择的项目类型等于小册子，则显示字段集 556**和**159]

```
var projectTypes = new Array (
    {id : '123', value:'Banner'},
    {id : '456', value:'Ad'},
    {id : '789', value:'Graphics'},
    {id : '987', value:'Billboard'},
    {id : '654', value:'Booklet'},
    {id : '321', value:'Tickets'},
    {id : '147', value:'Window'},
    {id : '159', value:'Brochure'}
    );

/*function below occurs onChange event of project type dropdown:*/
refreshSections(project_type);  

/*
 *  Function used to hide/show sections based on selected project type
 */
function refreshSections(selectedType) 
{   
    for (var i = 0; i < projectTypes.length; i++) 
    {
        if (projectTypes[i].value == selectedType) 
        {
            document.getElementById("section-"+ projectTypes[i].id).style.display = '';
        } else {
            document.getElementById("section-"+ projectTypes[i].id).style.display = 'none';
        }
    }   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:03:45.873

不确定您有多少自由来修改代码/html，但是如果可以合理访问相关部分，我会倾向于为您的 projectTypes 数组添加另一个值。实现不一定要像这样，但例如：

```
var projectTypes = new Array (
    {id : '556', value:'Brief Details', showSections: [556, 159]}
); 
```

在所有“隐藏部分”中添加一个通用类名：

```
<div id="section-156" class="hideable-section"><!--content--></div> 
```

然后修改您的函数以将该属性用作覆盖：

```
function refreshSections(selectedType) {   
    var i, j;
    //hide everything by default (something like document.getElementsByClassName('hideable-section')
    for (i = 0; i < projectTypes.length; i++) {
        if (projectTypes[i].value == selectedType) {
            if(projectTypes[i].showSections != null) {
                for(j = 0; j < projectTypes[i].showSections.length; j++){
                    document.getElementById("section-"+ projectTypes[i].showSections[j].toString()).style.display = '';
                }
            }
            else {
                document.getElementById("section-"+ projectTypes[i].id).style.display = '';
            }
        }
    }   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:02:46.827

如何使用数组而不是单个 id

```
{id : ['159','556'], value:'Brochure'} 
```

然后在你可以做的功能代码中

```
if (projectTypes[i].value === selectedType) {
  if (typeof projectTypes[i].id == "object") {
    var targets = typeof projectTypes[i].id;
    for (var j = 0, l = targets.length; j < l; j++) {
      document.getElementById("section-"+ targets[j]).style.display = '';
    }
  } else {
    document.getElementById("section-"+ projectTypes[i].id).style.display = '';
  }
} else {
  document.getElementById("section-"+ projectTypes[i].id).style.display = 'none';
} 
```

我没有对其进行深入测试...您可以添加一些标记和 JS 代码的[小提琴](http://jsfiddle.net)，以便更容易检查解决方案

# cakephp - CakePHP 2.x: Alaxos ACL Plugin - 配置管理员路由

> ID：10299104
> 
> 赞同：2
> 
> 时间：2012-04-24T13:40:10.660
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

我是 cakephp 初学者，对 cakephp 接触不多。[我已经按照-alaxos 站点](http://www.alaxos.ch/blaxos/pages/view/34#comments_list)的 Alaxos ACL 插件 foe cakephp 2.0 的安装步骤进行操作。第二步是配置管理路由。

我已经通过添加

```
Router::connect('/admin/acl', array('plugin' => 'acl', 'controller' => 'acl', 'action' => 'admin_index', 'admin' => true)); 
```

到我的 Cake/Routing/Router.php 文件并配置 app/Config/core.php: 通过添加以下行

```
 Configure::write('Routing.prefixes', array('admin')); 
```

我不确定这是否是正确的做法......

在访问插件[http://localhost/cakeacl/admin/acl](http://localhost/cakeacl/admin/acl)时出现错误

```
 **Private Method in AclController 
```

错误：无法直接访问 AclController::admin_index()。**

请帮助我..提前谢谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T13:52:22.917

尝试仅将以下内容放入`app/Config/core.php`并删除路由器配置。

`Configure::write('Routing.prefixes', array('admin'));`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-24T14:09:09.950

您是否从官方网站尝试过本指南[http://book.cakephp.org/1.3/view/1543/Simple-Acl-controlled-Application ？](http://book.cakephp.org/1.3/view/1543/Simple-Acl-controlled-Application)

# ios - 在 iOS 应用程序中使用 Sudzc/VTK 时找不到词法或预处理器问题/xmlversion.h

> ID：10299112
> 
> 赞同：0
> 
> 时间：2012-04-24T13:40:20.407
> 
> 标签：ios, xcode, vtk, sudzc

我已经设置了 VES 并正在修改 XCode 4.3.2 中的 Kiwiviewer 应用程序。Kiwi 构建和运行良好，所以我现在尝试在我的应用程序中设置 Sudzc（它可以独立运行）。我已经按照[这里](http://sudzc.com/Tutorial/ObjC.mov)的教程进行了操作，但是在修改了他的应用程序构建和运行的标题之后，我的却出现了一系列错误。起初，它给出了超过 150 个错误：

```
Lexical or Preprocessor Issue
Invalid token at start of a preprocessor expression 
```

主要指着线

```
#include "xmlversion.h" 
```

在文件 tree.h 中，它是 vtkmodular/Utilities/vtklibxml2/include/libxml/tree.h 的一部分。

将“”更改为 < >（建议用于类似问题）反而会产生另一个词法或预处理器问题，这次找不到“xmlversion.h”文件 - 似乎都在文件 tree.h 中。该文件在我的项目导航器中（并且 cmd-clicking #include "xmlversion.h" 确实加载了该文件，因此它以这种方式理解它）。

大概那么问题出在vtk有自己的libxml2版本吗？如果是这种情况 - 我该怎么办？我看到的所有错误似乎都源自soap处理程序类，并最终通过“include < libxml/tree.h>” - 然后在上面显示的vtk目录中。我真的不确定从这里去哪里 - 包含说明中添加的库是错误的吗？我可以/应该修改标题路径吗？如果这不是其余代码正在寻找的 tree.h，它在哪里 - 快速系统搜索没有找到它？

还是我完全偏离了标准？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T09:58:51.327

我从 VES 邮件列表中得到了答复，链接[在这里](http://public.kitware.com/pipermail/ves/2012-April/000053.html "VES 邮件列表")。它最终就像删除了 libxml2 的 VTK 版本一样简单，而 VES 似乎没有使用它。希望这可能对某人有用！

# asp.net - asp.net 表单将数据提交到 Apache 服务器上的 mysql

> ID：10299120
> 
> 赞同：0
> 
> 时间：2012-04-24T13:40:51.327
> 
> 标签：asp.net, mysql, apache

基本上，是否有可能拥有一个在 asp.net 中运行的表单并将数据写入远程 Apache Web 服务器上的 mysql 数据库？如果是这样，任何指针！？甚至不确定从哪里开始研究它！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:45:50.757

是的和不...

> 在 asp.net 中运行的表单

表单不“在”ASP.NET 中运行。

您可以使用 ASP.NET 生成 HTML 表单。您可以将表单数据提交到使用 ASP.NET 处理数据的网络服务器。

> 将数据写入mysql数据库

ASP.NET 具有可以与 MySQL 对话的数据库绑定

> 远程mysql数据库

MySQL 可以侦听网络接口，因此客户端可以通过网络连接，而不是使用本地套接字。

> 远程 Apache Web 服务器上的 mysql 数据库

MySQL 不能在 Apache 服务器上运行。Apache 不是操作系统。

MySQL 可以在同样运行 Apache 的服务器上运行，但是通过上述设置，Apache 将无关紧要。

Apache 可用于运行连接并查询本地 MySQL 服务器的 Web 服务（例如用 Perl、Python 或 PHP 编写的）。ASP.NET 可以向该 Web 服务发出 HTTP 请求。

ASP.NET 可用于生成带有指向由 Apache 服务器处理的 URL 的操作的表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T13:46:35.323

是的，您可以在世界任何地方写入数据库，只要您可以：

1.  连接
2.  认证
3.  沟通（用类似的语言）

您只需要使用有效凭据连接到数据库。您可以使用 mySQL 客户端从 .NET 与 mySQL 对话。

在“理论上”，只要上述三点得到促进，它就与 Web 服务器与同一建筑物中的单独数据库服务器通信没有什么不同。

# android - 如何阻止 ICS 用户下载我的应用程序

> ID：10299121
> 
> 赞同：1
> 
> 时间：2012-04-24T13:40:53.650
> 
> 标签：android

我现在在商店中拥有的应用程序在 ICS 中无法正常工作。当我修复它时，我想阻止拥有 ICS 的用户下载和购买它。我给谷歌发了电子邮件，他们说这是可能的，但他们对如何做到这一点含糊其辞。我知道如何设置最低 SDK，以便只有版本 x 或更高版本的人才能下载该应用程序，但我似乎无法找到反向操作的方法。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T13:43:35.697

在您的清单中定义`android:maxSdkVersion`以限制上限。

例如：

```
<uses-sdk android:minSdkVersion="8" android:maxSdkVersion="10"/> 
```

现在，该应用程序将仅适用于运行**Froyo**和**Gingerbread**版本的 Android 的设备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T13:43:43.273

[http://developer.android.com/guide/appendix/market-filters.html](http://developer.android.com/guide/appendix/market-filters.html)

您可以在市场中设置过滤器。即 ICS 用户不会看到您的应用 ^^

`android:maxSdkVersion="13"`在您的清单中使用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T13:43:45.480

在 Android 开发者文档中查看[此](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)页面。

正如您可以设置最低 SDK 版本一样，您也可以设置最高 SDK 版本：

```
<uses-sdk android:minSdkVersion="integer" 
          android:targetSdkVersion="integer"
          android:maxSdkVersion="integer" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T13:44:30.040

[您可以使用AndroidManifest.xml](http://developer.android.com/guide/topics/manifest/manifest-intro.html)文件中`maxSdkVersion`的`uses-sdk`标记定义一个。它记录在[开发人员指南](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html#max)中。

```
<uses-sdk android:minSdkVersion="integer" 
          android:targetSdkVersion="integer"
          android:maxSdkVersion="integer" /> 
```

# java - 在java中读取和写入xml

> ID：10299124
> 
> 赞同：3
> 
> 时间：2012-04-24T13:40:59.517
> 
> 标签：java, dom, stax

我正在使用 Stax 解析器读取 XML 文件并使用 java 中的 DOM 编写它。我没有得到想要的 XML 输出。我阅读了以下 XML 文件

```
<config>

    <Sensor1>
       <name>abc</name>
       <range>100</range>
    </Sensor1>

   <sensor2>
       <name>xyz</name>
       <range>100</range>
   </sensor2>

</config> 
```

我使用 Stax 解析器解析上述 XML 文件，如下所示

```
public void readConfig(String configFile) {
boolean sensor1 = false;
boolean sensor2 = false;

try
{
  XMLInputFactory inputFactory = XMLInputFactory.newInstance();
  InputStream in = new FileInputStream(configFile);
  XMLEventReader eventReader = inputFactory.createXMLEventReader(in);

  // Read the XML document
 while (eventReader.hasNext()) {
    XMLEvent event = eventReader.nextEvent();

    if (event.isStartElement()) {

         StartElement startElement = event.asStartElement();

                if (startElement.getName().getLocalPart() == (sensor1)) {

                   sensor1 = true;
                   Sensor1 Obj1 = new Sensor1();                         
        }

            if (startElement.getName().getLocalPart() == (sensor2)) {

                        sensor2 = true;
                        Sensor2 Obj2 = new Sensor2();

                }

     if (sensor1) {

      if (event.asStartElement().getName().getLocalPart().equals(name)) {

             event = eventReader.nextEvent();
                     Obj1.set_Sensor_Name(event.asCharacters().getData());
             continue;
         }

      if (event.asStartElement().getName().getLocalPart().equals(range)) {

             event = eventReader.nextEvent();
                     Obj1.set_Sensor_Range(event.asCharacters().getData());
             continue;
         }
     }

 if (sensor2) {

   if (event.asStartElement().getName().getLocalPart().equals(name)) {
             event = eventReader.nextEvent();
             Obj2.set_Sensor_Name(event.asCharacters().getData());
             continue;
       }

       if (event.asStartElement().getName().getLocalPart().equals(range)) {

             event = eventReader.nextEvent();
                     Obj1.set_Sensor_Range(event.asCharacters().getData());
             continue;
         }

  }

 if (event.isEndElement()) {
        EndElement endElement = event.asEndElement();     
        if (endElement.getName().getLocalPart() == (sensor1)) {

                   sensor1.addToArray();
         }

        if (endElement.getName().getLocalPart() == (sensor2)) {

                    sensor2.addToArray();

        }
       }
     } 
```

在“Sensor1”和“Sensor2”类中，我根据某些条件添加额外信息。

```
class Sensor1 {

  public ArrayList<Object> list = new ArrayList<Object>();
  String name;
  double range;

  public void set_Sensor_Name(String name) {
  this.name = name;

  }

  public void set_Sensor_Range(double range) {
  this.range = range;

  }

  public void addToArray(){
    double distance =50;

     if(distance<range){
       list.add("TITANIC");
       list.add(123456);
     }

     WriteFile fileObj = new WriteFile();
     fileObj.writeXMlFile(list);

  }

} 
```

这是编写 XML 的类

```
public class WriteFile {

public void writeXmlFile(ArrayList<Object> list) {

try {

    DocumentBuilderFactory dFact = DocumentBuilderFactory.newInstance();
    DocumentBuilder build = dFact.newDocumentBuilder();
    Document doc = build.newDocument();

    Element root = doc.createElement("SensorTracks");
    doc.appendChild(root);

    Element sensorInfo = doc.createElement("SensorDetails");
    root.appendChild(sensorInfo);

    Element vesselInfo = doc.createElement("VesselDetails");
    root.appendChild(vesselInfo);

    for(int i=0; i<list.size(); i +=4 ) {

        Element name = doc.createElement("SensorName");
        name.appendChild(doc.createTextNode(String.valueOf(list.get(i))));
        sensorInfo.appendChild(name);

        Element range = doc.createElement("SensorRange");
        name.appendChild(doc.createTextNode(String.valueOf(list.get(i+1))));
        sensorInfo.appendChild(range);

        Element mmi = doc.createElement("shipname");
        mmi.appendChild(doc.createTextNode(String.valueOf(list.get(i+2))));
        vesselInfo.appendChild(mmi);

        Element license = doc.createElement("license");
        license.appendChild(doc.createTextNode(String.valueOf(list.get(i+3))));
        vesselInfo.appendChild(license); 

    }

     // Save the document to the disk file
    TransformerFactory tranFactory = TransformerFactory.newInstance();
    Transformer aTransformer = tranFactory.newTransformer();

    // format the XML nicely
    aTransformer.setOutputProperty(OutputKeys.ENCODING, "ISO-8859-1");

    aTransformer.setOutputProperty(
            "{http://xml.apache.org/xslt}indent-amount", "4");
    aTransformer.setOutputProperty(OutputKeys.INDENT, "yes");

    DOMSource source = new DOMSource(doc);
    try {
        FileWriter fos = new FileWriter("/home/ros.xml");
        StreamResult result = new StreamResult(fos);
        aTransformer.transform(source, result);

    } catch (IOException e) {

        e.printStackTrace();
    }

} catch (TransformerException ex) {
    System.out.println("Error outputting document");

} catch (ParserConfigurationException ex) {
    System.out.println("Error building document");
} 
```

当我执行时，我得到以下 XML

```
<SensorTracks>        
   <sensorDetails>
     <SensorName>xyz</SensorName>
     <SensorRange>100</SensorRange>
   </sensorDetails>
 <VesselDetails>
      <shipname>TITANIC</shipname>
      <license>123456</license>
</vesselDetails> 
```

我的最终输出必须是

```
<config>

<SensorTracks>        
   <sensorDetails>
     <SensorName>xyz</SensorName>
     <SensorRange>100</SensorRange>
     <SensorName>abc</SensorName>
     <SensorRange>100</SensorRange> 
   </sensorDetails>
 <VesselDetails>
      <shipname>TITANIC</shipname>
      <license>123456</license>
</vesselDetails> 
```

我在代码中做错了什么？任何帮助表示赞赏。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:17:14.893

我再次回答我自己的问题。问题很简单。如上所述获得所需的输出。只需对“WriteFile”类进行以下更改。

```
FileWriter fos = new FileWriter("/home/ros.xml" ,true); 
```

最后，我正在学习 Java :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:18:05.560

坦率地说，这个例子看起来很麻烦。您是否考虑使用 jaxb 的 apache 消化器？
[http://commons.apache.org/digester/](http://commons.apache.org/digester/)
[http://www.oracle.com/technetwork/articles/javase/index-140168.html](http://www.oracle.com/technetwork/articles/javase/index-140168.html)

# java - Java 领域中企业门户策略的替代方案是什么？

> ID：10299130
> 
> 赞同：12
> 
> 时间：2012-04-24T13:41:17.220
> 
> 标签：java, websphere, liferay, portal

**我只是因为没有与stackoverflow精神完全一致的问题而被打了耳光。根据 SO mod 的建议，我在程序员堆栈交换中再次发布了这个问题。这里是： **

[在 Programmers.StackExchange 上转发了相同的问题](https://softwareengineering.stackexchange.com/questions/145999/what-is-the-alternative-to-an-enterprise-portal-strategy-in-the-java-space)

我试图从尽可能多的来源中获得洞察力，我想听听 Stackoverflow 的大佬们的意见。

**门户空间的幻灭**

我看到令人不安的大量大型企业客户对他们的企业 Portal 体验感到失望，尤其是那些在 WebSphere Portal Server (WPS) 领域的客户。已经投资了数百万美元，但具有聚合和集成协作工具的个性化内容的承诺从未实现。迁移到 WPS 7.x 是一次重大的翻天覆地的迁移，客户想知道他们是否应该完全迁移到其他地方。

**门户软件：一个比所有替代品更好的可怕选择**

那里有很多反对门户的人，有时门户解决方案确实是矫枉过正，但是当您谈论大型跨国公司时，如何建议他们在没有门户服务器的情况下构建全球解决方案？使用门户网站并不总是像 Tomcat 或 JBoss AS 那样有趣，但是当涉及到集成多个应用程序、管理内容、更新部署为单个战争文件的单个应用程序、将安全性管理到 portlet 级别时，证明一定为用户提供大量个性化服务，并帮助管理大型企业作为其内部和外部网站一部分的数千个页面的艰巨任务，是否有更好的技术？

**获得社区洞察力和反馈**

我一直在努力获得尽可能多的洞察力。关于这个问题，我写了一篇关于 TSS 的小文章：

[市场上还有哪些其他门户替代品？](http://www.theserverside.com/news/thread.tss?thread_id=64293)

[每个企业都需要一个员工门户。还是他们？](http://www.theserverside.com/tip/Every-enterprise-needs-an-employee-portal-Or-do-they)

我还在 CodeRanch 上恢复了一个线程，看看我是否能从那个英俊的工作人员那里得到任何见解。

[更新了寻求替代门户软件策略的线程。大约 2012 年](http://www.coderanch.com/t/578949/Portals-Portlets/java/alternative-Enterprise-Java-Portal-Any)

[需要洞察力：企业门户软件的可行替代方案？大约 2009 年](http://www.coderanch.com/t/449227/Portals-Portlets/java/Which-other-alternatives-portal-exists)

我也在寻找来自 twitterati (@potemcam) 的一些见解。

这与其说是交叉发布，不如说是试图真正从社区中收集一些敏锐的洞察力。如果我能得到一些可靠的回应和经验，我想将它们汇总成 TSS 的建议文章。因此，任何见解或经验都会有帮助。

**欢迎提供见解和经验**

期待听到您的见解。顺便说一句，我也会从其他景点交叉链接到这个线程，这样有相同问题的人就可以来回反弹，看看社区对这个话题的看法。

# java - Java Servlet POST JSON 字符串到其他 Java Servlet

> ID：10299134
> 
> 赞同：0
> 
> 时间：2012-04-24T13:41:31.080
> 
> 标签：java, json, post

我有一个从 POST 读取 JSON 字符串的 servlet。第三方 (PHP) 应用程序将 JSON 字符串发布到将数据添加到数据库的 servlet，但出现了问题。

我想做一些测试，并且我想要一个简单的 servlet（或只是一个主要的 java 类），它将一个 JSON 字符串发布到 servlet。但我并没有真正找到如何做到这一点。

知道怎么做吗？任何提示从哪里开始？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:50:29.343

Jakarta Commons HttpClient 提供了执行此操作所需的功能。

[http://hc.apache.org/httpclient-3.x/](http://hc.apache.org/httpclient-3.x/)

您将能够使用它来构造一个 POST 请求并将其分派到您的 servlet。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T13:50:34.753

您不需要编写代码来实现这一点，而是可以使用简单的 Firefox 插件来做到这一点

插件 - [https://addons.mozilla.org/en-US/firefox/addon/poster/](https://addons.mozilla.org/en-US/firefox/addon/poster/)

将 url 指向需要测试的 java servlet，

放入`application/json`内容类型文本框，

将要发送的 json 数据放入“要发送的内容”部分

不要忘记点击最后的“发布”:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T13:53:05.020

编写一个简单的主类并发布 JSON。您可以将从 PHP 接收到的帖子写到一个文件中，然后简单地使用 URLConnection 或 Apache HTTPClient 从 main 发布。

像这样的东西：

[在 Java 中使用 JSON 的 HTTP POST](https://stackoverflow.com/questions/7181534/http-post-using-json-in-java)

# c# - 如果用户忘记了 Asp.Net 中的密码和安全答案，可替代的方法来帮助用户

> ID：10299137
> 
> 赞同：1
> 
> 时间：2012-04-24T13:41:44.880
> 
> 标签：c#, asp.net, forms-authentication

我正在使用`Asp.Net Forms Authentication`，我正在以`Hashed`格式存储密码，我确实需要一个`Question`和`Answer`。我的问题是，如果用户忘记了他的`security question's`答案和他的答案会发生什么`password`。所以没有它我将无法生成一个随机`password`的。在这种情况下会发生什么，用户是否只剩下创建新帐户的选项。或者我应该链接一个表格以纯文本形式存储他的问题和答案，然后在重置密码时传递答案。我相信你们可能已经看过很多次。我该如何解决这个问题。欢迎任何建议。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:58:46.203

正如其他人所说，这个问题并不是一个真正的编程问题，更多的是一个安全设计问题，最好在[http://security.stackexchange.com](http://security.stackexchange.com)中回答。

话虽如此，如果您网站的安全需求相对较低（不是银行级别的安全性），我认为将新密码通过电子邮件发送到您为用户存档的电子邮件地址就足够了。如果用户能够通过他们的电子邮件提供商进行身份验证，那么他们已经证明他们是他们自己（假设他们的电子邮件帐户没有被泄露）。这就是有多少网站在运作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T14:42:27.743

如果用户不知道他/她的问题/答案，您可以随时让系统发送一封电子邮件，其中包含指向密码恢复页面的链接。在这里，您可以根据他们在创建帐户时输入的更敏感的信息（他们的姓名、出生日期等）问他们应该知道答案的问题

**请注意**，只有当您的站点与银行站点完全不同并且仅当它是低安全性站点时才应该这样做。否则，请遵循 Walter 和 AakashM 的建议并在安全论坛上发帖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T14:06:27.097

您应该查看以下链接，我认为它会对您有所帮助。[http://www.asp.net/web-forms/tutorials/security/admin/recovering-and-changeing-passwords-cs](http://www.asp.net/web-forms/tutorials/security/admin/recovering-and-changing-passwords-cs)

# java - Android ICS 兼容性

> ID：10299140
> 
> 赞同：0
> 
> 时间：2012-04-24T13:42:04.103
> 
> 标签：java, android, android-emulator

我有几个项目正在正式迁移到 ICS，并且遇到了一些奇怪的兼容性问题。这两个项目在 Androdid 2.2 和 2.3 中运行良好。这两个项目最初在清单中都有以下内容：

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="10"  /> 
```

**在我连接到我的新 ICS 设备并运行后，我遇到了一些使用java.net.Socket**和**java.io.***等的 Java API（作为 jar 文件包含在项目中）的错误。当我从清单中删除**android:targetSdkVersion="10"**时，ICS 中的东西又开始工作了。但是，存在一些性能问题，以下在 Eclipse DDMS LogCat 中显示了很多：

```
threadid=3: reacting to signal 3
Wrote stack traces to '/data/anr/traces.txt' 
```

这是 traces.txt 输出：

```
----- pid 29070 at 2012-04-24 08:52:42 -----
Cmd line: com.COMPANY.MOBILEAPP

DALVIK THREADS:
(mutexes: tll=0 tsl=0 tscl=0 ghl=0)
"main" prio=5 tid=1 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x40a4f460 self=0x705830
  | sysTid=29070 nice=0 sched=0/0 cgrp=default handle=1075090568
  | schedstat=( 0 0 0 ) utm=657 stm=52 core=0
  at libcore.io.Posix.recvfromBytes(Native Method)
  at libcore.io.Posix.recvfrom(Posix.java:131)
  at libcore.io.BlockGuardOs.recvfrom(BlockGuardOs.java:164)
  at libcore.io.IoBridge.recvfrom(IoBridge.java:503)
  at java.net.PlainSocketImpl.read(PlainSocketImpl.java:488)
  at java.net.PlainSocketImpl.access$000(PlainSocketImpl.java:46)
  at java.net.PlainSocketImpl$PlainSocketInputStream.read(PlainSocketImpl.java:240)
  at java.io.InputStream.read(InputStream.java:163)
  at java.io.BufferedInputStream.fillbuf(BufferedInputStream.java:142)
  at java.io.BufferedInputStream.read(BufferedInputStream.java:227)
  at com.COMPANY.tools.Response.receive(Response.java:592)
  at com.COMPANY.tools.Response.getResponse(Response.java:100)
  at com.COMPANY.tools.Response.<init>(Response.java:73)
  at com.COMPANY.PRODUCT.JAVAAPI.submit(JAVAAPI.java:267)
  at com.COMPANY.PRODUCT.JAVAAPI.Logon(JAVAAPI.java:602)
  at com.COMPANY.MOBILEAPP.PRODUCTAdapter.Connect(PRODUCTAdapter.java:50)
  at com.COMPANY.MOBILEAPP.Browse.onResume(Browse.java:105)
  at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1154)
  at android.app.Activity.performResume(Activity.java:4539)
  at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2434)
  at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:169)
  at android.app.LocalActivityManager.dispatchResume(LocalActivityManager.java:523)
  at android.app.ActivityGroup.onResume(ActivityGroup.java:61)
  at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1154)
  at android.app.Activity.performResume(Activity.java:4539)
  at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2434)
  at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2472)
  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1173)
  at android.os.Handler.dispatchMessage(Handler.java:99)
  at android.os.Looper.loop(Looper.java:137)
  at android.app.ActivityThread.main(ActivityThread.java:4424)
  at java.lang.reflect.Method.invokeNative(Native Method)
  at java.lang.reflect.Method.invoke(Method.java:511)
  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
  at dalvik.system.NativeStart.main(Native Method)

"Binder Thread #2" prio=5 tid=10 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x41346498 self=0x8dd648
  | sysTid=29082 nice=0 sched=0/0 cgrp=default handle=9335880
  | schedstat=( 0 0 0 ) utm=0 stm=0 core=0
  at dalvik.system.NativeStart.run(Native Method)

"Binder Thread #1" prio=5 tid=9 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x413406b0 self=0x8e7a80
  | sysTid=29081 nice=0 sched=0/0 cgrp=default handle=9062432
  | schedstat=( 0 0 0 ) utm=0 stm=0 core=0
  at dalvik.system.NativeStart.run(Native Method)

"FinalizerWatchdogDaemon" daemon prio=5 tid=8 TIMED_WAIT
  | group="main" sCount=1 dsCount=0 obj=0x4133bd60 self=0x8d50a8
  | sysTid=29080 nice=0 sched=0/0 cgrp=default handle=9302200
  | schedstat=( 0 0 0 ) utm=0 stm=0 core=0
  at java.lang.VMThread.sleep(Native Method)
  at java.lang.Thread.sleep(Thread.java:1031)
  at java.lang.Thread.sleep(Thread.java:1013)
  at java.lang.Daemons$FinalizerWatchdogDaemon.run(Daemons.java:213)
  at java.lang.Thread.run(Thread.java:856)

"FinalizerDaemon" daemon prio=5 tid=7 WAIT
  | group="main" sCount=1 dsCount=0 obj=0x4133bc08 self=0x8de4e0
  | sysTid=29079 nice=0 sched=0/0 cgrp=default handle=9329168
  | schedstat=( 0 0 0 ) utm=0 stm=0 core=0
  at java.lang.Object.wait(Native Method)
  - waiting on <0x40a455d0> (a java.lang.ref.ReferenceQueue)
  at java.lang.Object.wait(Object.java:401)
  at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:102)
  at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:73)
  at java.lang.Daemons$FinalizerDaemon.run(Daemons.java:168)
  at java.lang.Thread.run(Thread.java:856)

"ReferenceQueueDaemon" daemon prio=5 tid=6 WAIT
  | group="main" sCount=1 dsCount=0 obj=0x4133baa0 self=0x7983d8
  | sysTid=29078 nice=0 sched=0/0 cgrp=default handle=9123568
  | schedstat=( 0 0 0 ) utm=0 stm=0 core=0
  at java.lang.Object.wait(Native Method)
  - waiting on <0x40a454f8> 
  at java.lang.Object.wait(Object.java:364)
  at java.lang.Daemons$ReferenceQueueDaemon.run(Daemons.java:128)
  at java.lang.Thread.run(Thread.java:856)

"Compiler" daemon prio=5 tid=5 VMWAIT
  | group="system" sCount=1 dsCount=0 obj=0x4133b9b0 self=0x8cc328
  | sysTid=29077 nice=0 sched=0/0 cgrp=default handle=9055824
  | schedstat=( 0 0 0 ) utm=32 stm=15 core=0
  at dalvik.system.NativeStart.run(Native Method)

"JDWP" daemon prio=5 tid=4 VMWAIT
  | group="system" sCount=1 dsCount=0 obj=0x4133b8c8 self=0x8d0a60
  | sysTid=29076 nice=0 sched=0/0 cgrp=default handle=9122016
  | schedstat=( 0 0 0 ) utm=0 stm=0 core=0
  at dalvik.system.NativeStart.run(Native Method)

"Signal Catcher" daemon prio=5 tid=3 RUNNABLE
  | group="system" sCount=0 dsCount=0 obj=0x4133b7d0 self=0x8ae310
  | sysTid=29074 nice=0 sched=0/0 cgrp=default handle=9346264
  | schedstat=( 0 0 0 ) utm=48 stm=37 core=0
  at dalvik.system.NativeStart.run(Native Method)

"GC" daemon prio=5 tid=2 VMWAIT
  | group="system" sCount=1 dsCount=0 obj=0x4133b6f0 self=0x890958
  | sysTid=29072 nice=0 sched=0/0 cgrp=default handle=8971592
  | schedstat=( 0 0 0 ) utm=14 stm=0 core=0
  at dalvik.system.NativeStart.run(Native Method)

----- end 29070 ----- 
```

任何人都可以在这里帮助我指出正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T15:00:04.027

查看[android.os.NetworkOnMainThreadException](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)您可能正在 UI 线程上执行网络操作，这是允许 pre-honeycomb 但现在抛出异常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T13:48:49.290

连接 ADB logcat 实用程序以查看会发生什么...这也是 Eclipse 插件的一部分，如果它没有显示在您的工作区中，则只需通过 Window->Show view->other 启用它并在 Android 下找到 LogCat部分

# php - 登录 ASP 网站，然后使用 PHP Simple HTML DOM Parser 抓取数据

> ID：10299141
> 
> 赞同：0
> 
> 时间：2012-04-24T13:42:16.027
> 
> 标签：php, html, asp-classic, login

我正在使用“PHP Simple HTML DOM Parser”来解析来自游戏 ASP 网站的数据。我需要抓取的数据仅对注册用户可见，所以我需要一些东西让我在开始使用它之前登录到站点。有人可以建议我一个脚本或可以做到这一点的东西吗？提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:48:09.550

不了解 Simple HTML DOM Parser login/cookie 系统。所以你可以使用 php 的 curl 库进入会员区。然后使用简单的html dom解析器..

# haskell - 这个 Haskell 定义是什么意思？

> ID：10299142
> 
> 赞同：3
> 
> 时间：2012-04-24T13:42:18.133
> 
> 标签：haskell, syntax

```
Eq a => [a] -> [(Int,a)] 
```

我不知道 Eq 是什么意思，所以我不知道整个定义是什么意思？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-24T13:44:01.257

`a`这是对定义中使用的类型的约束`[a] -> [(Int,a)]`：它说它必须为类型类定义一个实例`Eq`。基本上，具有`Eq`实例的类型支持相等和不等运算符，`(==)`并且`(/=)`.

有关类型类的更多信息，请访问[learnyouahaskell.com](http://learnyouahaskell.com/types-and-typeclasses)。在 nuce 中，类型类有点类似于 OOP 的接口。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T13:43:47.760

这意味着 [a] 中的元素必须是 Eq 类型类，这意味着它们必须是可测试的相等性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T13:58:59.640

如前所述，类型*a*的项目必须是*Eq*类型类。*Eq*类型类定义了可以与其他类型比较是否相等的类型，使用 th '==' 运算符/函数

这意味着您的函数将“a”项列表作为其唯一参数

```
[a] is a list of types a 
```

并返回 (Int, a) 对的列表，即 2 元组列表，其中元组中的第一项是 Int，第二项与传递给函数的列表类型相同。

（这里不是以英语为母语的人，对不起:)）

# mysql - MySQL ERROR 1045 (28000): Access denied for user 'bill'@'localhost' (使用密码: YES)

> ID：10299148
> 
> 赞同：493
> 
> 时间：2012-04-24T13:42:50.847
> 
> 标签：mysql, access-denied

首先让我提一下，我已经经历了许多建议的问题，但没有找到相关的答案。这就是我正在做的事情。

我已连接到我的 Amazon EC2 实例。我可以使用以下命令使用 MySQL root 登录：

```
mysql -u root -p 
```

然后我用主机 % 创建了一个新的用户账单

```
CREATE USER 'bill'@'%' IDENTIFIED BY 'passpass'; 
```

授予用户账单的所有权限：

```
grant all privileges on *.* to 'bill'@'%' with grant option; 
```

然后我退出 root 用户并尝试使用 bill 登录：

```
mysql -u bill -p 
```

输入正确的密码并收到此错误：

> 错误 1045 (28000)：拒绝用户 'bill'@'localhost' 的访问（使用密码：是）

* * *

## 回答 #1

> 赞同：473
> 
> 时间：2012-06-26T22:36:56.007

您可能有一个匿名用户`''@'localhost'`或`''@'127.0.0.1'`.

根据[手册](http://dev.mysql.com/doc/refman/5.5/en/connection-access.html)：

> 当可能有多个匹配时，服务器必须确定使用哪一个。它解决了这个问题如下：（...）
> 
> *   当客户端尝试连接时，服务器会按排序顺序查看*[表 mysql.user]的行。*
> *   服务器使用与客户端主机名和用户名匹配的第一行。
> 
> (...) 服务器使用排序规则，**首先对具有最具体 Host 值的**行进行排序。文字主机名*[例如 'localhost']*和 IP 地址是最具体的。

因此，这样的匿名用户会“屏蔽”任何其他用户，例如`'[any_username]'@'%'`从`localhost`.

`'bill'@'localhost'`确实匹配，但会事先`'bill'@'%'`匹配（例如） 。`''@'localhost'`

推荐的解决方案是删除这个匿名用户（这通常是一件好事）。

* * *

*下面的编辑大多与主要问题无关。这些只是为了回答该线程中其他评论中提出的一些问题。*

**编辑 1**

`'bill'@'%'`通过套接字进行身份验证。

```
    root@myhost:/home/mysql-5.5.16-linux2.6-x86_64# ./mysql -ubill -ppass --socket=/tmp/mysql-5.5.sock
    欢迎使用 MySQL 监视器 (...)

    mysql> 选择用户，主机 FROM mysql.user；
    +--------+------------+
    | 用户 | 主持人 |
    +--------+------------+
    | 账单 | % |
    | 根 | 127.0.0.1 |
    | 根 | ::1 |
    | 根 | 本地主机 |
    +--------+------------+
    4 行一组（0.00 秒）

    mysql> 选择用户（），当前用户（）；
    +----------------+----------------+
    | 用户（） | 当前用户（） |
    +----------------+----------------+
    | 账单@localhost | 账单@% |
    +----------------+----------------+
    一组中的 1 行（0.02 秒）

    mysql> 显示变量，如“skip_networking”；
    +-----------------+--------+
    | 变量名 | 价值 |
    +-----------------+--------+
    | 跳过网络 | 开 |
    +-----------------+--------+
    一组中的 1 行（0.00 秒）

```

**编辑 2**

完全相同的设置，除了我重新激活了网络，我现在创建了一个匿名用户`''@'localhost'`。

```
    root@myhost:/home/mysql-5.5.16-linux2.6-x86_64# ./mysql
    欢迎使用 MySQL 监视器 (...)

    mysql> CREATE USER ''@'localhost' IDENTIFIED BY 'anotherpass';
    查询正常，0 行受影响（0.00 秒）

    mysql>再见

    root@myhost:/home/mysql-5.5.16-linux2.6-x86_64# ./mysql -ubill -ppass \
        --socket=/tmp/mysql-5.5.sock
    错误 1045 (28000)：拒绝用户 'bill'@'localhost' 的访问（使用密码：是）
    root@myhost:/home/mysql-5.5.16-linux2.6-x86_64# ./mysql -ubill -ppass \
        -h127.0.0.1 --protocol=TCP
    错误 1045 (28000)：拒绝用户 'bill'@'localhost' 的访问（使用密码：是）
    root@myhost:/home/mysql-5.5.16-linux2.6-x86_64# ./mysql -ubill -ppass \
        -hlocalhost --protocol=TCP
    错误 1045 (28000)：拒绝用户 'bill'@'localhost' 的访问（使用密码：是）

```

**编辑 3**

与编辑 2 中的情况相同，现在提供匿名用户的密码。

```
    root@myhost:/home/mysql-5.5.16-linux2.6-x86_64# ./mysql -ubill -panotherpass -hlocalhost
    欢迎使用 MySQL 监视器 (...)

    mysql> 选择用户（），当前用户（）；
    +----------------+----------------+
    | 用户（） | 当前用户（） |
    +----------------+----------------+
    | 账单@localhost | @本地主机 |
    +----------------+----------------+
    一组中的 1 行（0.01 秒）

```

结论 1，来自编辑 1：可以`'bill'@'%'`通过套接字进行身份验证。

结论 2，来自编辑 2：一个人是通过 TCP 连接还是通过套接字连接对身份验证过程没有影响（除了一个人不能像其他人一样连接，而是`'something'@'localhost'`通过套接字，显然）。

结论 3，来自编辑 3：虽然我指定`-ubill`了 ，但我已被授予匿名用户访问权限。这是因为上面建议的“排序规则”。请注意，在大多数默认安装中，[存在一个无密码的匿名用户](http://dev.mysql.com/doc/refman/5.6/en/default-privileges.html)（并且应该保护/删除）。

* * *

## 回答 #2

> 赞同：160
> 
> 时间：2012-10-25T20:17:57.827

尝试：

```
~$ mysql -u root -p
Enter Password:

mysql> grant all privileges on *.* to bill@localhost identified by 'pass' with grant option; 
```

* * *

## 回答 #3

> 赞同：96
> 
> 时间：2012-06-26T17:40:32.133

当你跑

```
mysql -u bill -p 
```

并得到了这个错误

```
ERROR 1045 (28000): Access denied for user 'bill'@'localhost' (using password: YES) 
```

mysqld 期待您以`bill@localhost`

尝试创建`bill@localhost`

```
CREATE USER bill@localhost IDENTIFIED BY 'passpass';
grant all privileges on *.* to bill@localhost with grant option; 
```

如果要远程连接，则必须使用 TCP/IP 指定 DNS 名称、公共 IP 或 127.0.0.1：

```
mysql -u bill -p -hmydb@mydomain.com
mysql -u bill -p -h10.1.2.30
mysql -u bill -p -h127.0.0.1 --protocol=TCP 
```

登录后，请运行此

```
SELECT USER(),CURRENT_USER(); 
```

[USER()](http://dev.mysql.com/doc/refman/5.5/en/information-functions.html#function_user)报告您如何尝试在 MySQL 中进行身份验证

[CURRENT_USER()](http://dev.mysql.com/doc/refman/5.5/en/information-functions.html#function_current-user)报告您是如何被允许从**mysql.user**表在 MySQL 中进行身份验证的

这将使您更好地了解允许您登录 mysql 的方式和原因。为什么知道这个观点很重要？它与用户身份验证排序协议有关。

这是一个示例：我将在我的桌面 MySQL 上创建一个匿名用户

```
mysql> select user,host from mysql.user;
+---------+-----------+
| user    | host      |
+---------+-----------+
| lwdba   | %         |
| mywife  | %         |
| lwdba   | 127.0.0.1 |
| root    | 127.0.0.1 |
| lwdba   | localhost |
| root    | localhost |
| vanilla | localhost |
+---------+-----------+
7 rows in set (0.00 sec)

mysql> grant all on *.* to x@'%';
Query OK, 0 rows affected (0.02 sec)

mysql> select user,host from mysql.user;
+---------+-----------+
| user    | host      |
+---------+-----------+
| lwdba   | %         |
| mywife  | %         |
| x       | %         |
| lwdba   | 127.0.0.1 |
| root    | 127.0.0.1 |
| lwdba   | localhost |
| root    | localhost |
| vanilla | localhost |
+---------+-----------+
8 rows in set (0.00 sec)

mysql> update mysql.user set user='' where user='x';
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql> flush privileges;
Query OK, 0 rows affected (0.01 sec)

mysql> select user,host from mysql.user;
+---------+-----------+
| user    | host      |
+---------+-----------+
|         | %         |
| lwdba   | %         |
| mywife  | %         |
| lwdba   | 127.0.0.1 |
| root    | 127.0.0.1 |
| lwdba   | localhost |
| root    | localhost |
| vanilla | localhost |
+---------+-----------+
8 rows in set (0.00 sec)

mysql> 
```

好的，看我以匿名用户身份登录：

```
C:\MySQL_5.5.12>mysql -urol -Dtest -h127.0.0.1 --protocol=TCP
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 12
Server version: 5.5.12-log MySQL Community Server (GPL)

Copyright (c) 2000, 2010, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> select user(),current_user();
+---------------+----------------+
| user()        | current_user() |
+---------------+----------------+
| rol@localhost | @%             |
+---------------+----------------+
1 row in set (0.00 sec)

mysql> 
```

身份验证顺序非常严格。它从最具体到最少进行检查。[**我在 DBA StackExchange 中写过关于这种身份验证风格的文章**](https://dba.stackexchange.com/a/10897/877)。

必要时不要忘记显式调用 TCP 作为 mysql 客户端的协议。

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2016-10-03T23:46:03.643

超级迟到

我尝试了所有其他答案并运行了许多不同版本，`mysql -u root -p`但从未运行过

* * *

`mysql -u root -p`

只需按下`[ENTER]`密码即可。

* * *

一旦我这样做了，它就起作用了。希望这可以帮助某人。

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2012-06-26T17:39:13.770

当您输入 时`mysql -u root -p`，您将通过本地 unix 套接字连接到 mysql 服务器。

但是，您提供的授权`'bill'@'%'`仅奇怪地匹配 TCP/IP 连接。

如果要授予对本地 unix 套接字的访问权限，则需要授予 'bill'@'localhost' 权限，奇怪的是，这与 'bill'@'127.0.0.1' 不同

您还可以使用 TCP/IP 与 mysql 命令行客户端进行连接，以匹配您已经授予的权限，例如运行`mysql -u root -p -h 192.168.1.123`或您的机器具有的任何本地 IP 地址。

* * *

## 回答 #6

> 赞同：22
> 
> 时间：2014-08-20T18:19:28.807

在我的案例中，一个相关的问题是尝试使用以下方式进行连接：

```
mysql -u mike -p mypass 
```

**-u #uname# 之间显然允许使用**空格**，但-p 和 #password# 之间**不允许使用空格****

 **因此需要：

```
mysql -u mike -pmypass 
```

否则 -p **mypass** mysql 之间的空格将 'mypass' 作为**数据库**名称

* * *

## 回答 #7

> 赞同：20
> 
> 时间：2016-05-26T07:48:26.377

如果您忘记密码或想修改密码。您可以按照以下步骤操作：

> 1：停止你的mysql
> 
> > [root@maomao ~]# service mysqld stop
> > 停止 MySQL：[OK]
> 
> 2：使用“--skip-grant-tables”重启mysql
> 
> > [root@mcy400 ~]# mysqld_safe --skip-grant-tables
> > [root@cy400 ~]# 使用 /var/lib/mysql 中的数据库启动 mysqld 守护进程
> 
> 3：打开一个新窗口并输入mysql -u root
> 
> > [root@cy400 ~]# mysql -u root
> > 欢迎使用 MySQL 监视器。命令以 ; 结尾 或\g。
> 
> 4：更改用户数据库
> 
> > mysql> 使用 mysql
> > 读取表信息以补全表名和列名 可以关闭此功能以更快启动 -A 数据库已更改
> 
> 5：修改您的密码您的新密码应输入“（）”
> 
> > mysql>更新用户设置密码=密码（'root123'）其中用户='root'；
> > 查询正常，3 行受影响（0.00 秒）
> > 匹配行：3 更改：3 警告：0
> 
> 6：冲洗
> 
> > mysql> 刷新权限；
> 
> 7：退出
> 
> > mysql>退出
> > 再见
> 
> 8：重启mysql
> 
> > [root@cy400 ~]#服务mysqld重启；
> > 停止 MySQL：[OK]
> > 启动 MySQL：[OK]

Bingo！您可以使用您的用户名和新密码连接您的数据库：

```
[root@cy400 ~]# mysql -u root -p <br>
Enter password: admin123 <br>
Welcome to the MySQL monitor.  Commands end with ; or \g. <br>
Your MySQL connection id is 2 <br>
Server version: 5.0.77 Source distribution <br>
Type 'help;' or '\h' for help. Type '\c' to clear the buffer. <br>
mysql> quit <br>
Bye 
```

* * *

## 回答 #8

> 赞同：20
> 
> 时间：2018-08-04T11:00:09.773

我有一个类似的问题 - 在我第一次尝试进入 MySQL 时`root`，它告诉我访问被拒绝。原来我忘了用`sudo`...

因此，如果您`root`第一次尝试失败，请尝试：

```
sudo mysql -u root -p 
```

然后输入您的密码，这应该可以。

* * *

## 回答 #9

> 赞同：18
> 
> 时间：2014-07-25T17:14:07.667

避免让自己头疼……您的问题可能是您缺少密码周围的引号。至少那是我绕道了 3 个小时的情况。

```
[client]
user = myusername
password = "mypassword"   # <----------------------- VERY IMPORTANT (quotes)
host = localhost 
```

[http://dev.mysql.com/doc/refman/5.7/en/option-files.html](http://dev.mysql.com/doc/refman/5.7/en/option-files.html)

搜索“这是一个典型的用户选项文件：”并查看他们在其中陈述的示例。祝你好运，我希望能节省一些时间。

* * *

## 回答 #10

> 赞同：13
> 
> 时间：2012-09-24T15:58:05.290

解决方法是删除匿名（Any）用户！

我在其他人设置的服务器上也遇到了同样的问题。我通常不会在安装 MySQL 时选择创建匿名用户，所以没有注意到这一点。最初，我以“root”用户身份登录并创建了几个“普通”用户（也就是仅在 dbs 上具有权限的用户，其用户名作为前缀），然后注销，然后继续验证第一个普通用户。我无法登录。既不是通过phpMyAdmin，也不是通过shell。原来，罪魁祸首是这个“任何”用户。

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2014-09-18T14:33:59.397

我为自己找到的最佳解决方案是。

我的用户是声纳，每当我尝试从外部或其他机器连接到我的数据库时，我都会收到错误消息

```
ERROR 1045 (28000): Access denied for user 'sonar'@'localhost' (using password: YES) 
```

此外，当我从另一台机器上尝试这个并通过 Jenkins 工作时，我的访问 URL 是

```
alm-lt-test.xyz.com 
```

如果你想远程连接，你可以用不同的方式指定它，如下所示：

```
mysql -u sonar -p -halm-lt-test.xyz.com
mysql -u sonar -p -h101.33.65.94
mysql -u sonar -p -h127.0.0.1 --protocol=TCP
mysql -u sonar -p -h172.27.59.54 --protocol=TCP 
```

要使用 URL 访问它，您只需执行以下查询。

```
GRANT ALL ON sonar.* TO 'sonar'@'localhost' IDENTIFIED BY 'sonar';
GRANT ALL ON sonar.* TO 'sonar'@'alm-lt-test.xyz.com' IDENTIFIED BY 'sonar';
GRANT ALL ON sonar.* TO 'sonar'@'127.0.0.1' IDENTIFIED BY 'sonar';
GRANT ALL ON sonar.* TO 'sonar'@'172.27.59.54' IDENTIFIED BY 'sonar'; 
```

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2015-12-01T17:26:06.320

这是以下之间的区别：

```
CREATE USER 'bill'@'%' IDENTIFIED BY 'passpass'; 
```

和

```
CREATE USER 'bill'@'localhost' IDENTIFIED BY 'passpass'; 
```

核实：

```
mysql> select user,host from mysql.user;
+---------------+----------------------------+
| user          | host                       |
+---------------+----------------------------+
| bill          | %                          | <=== created by first
| root          | 127.0.0.1                  |
| root          | ::1                        |
| root          | localhost                  |
| bill          | localhost                  | <=== created by second
+---------------+----------------------------+ 
```

命令

```
mysql -u bill -p 
```

隐式访问 'bill'@'localhost' 而不是 'bill'@'%'。

'bill'@'localhost' 没有权限

你得到错误：

```
ERROR 1045 (28000): Access denied for user 'bill'@'localhost' (using password: YES) 
```

解决问题：

```
CREATE USER 'bill'@'localhost' IDENTIFIED BY 'passpass';

grant all privileges on . to 'bill'@'localhost' with grant option; 
```

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2012-04-25T09:37:17.453

好的，我不确定，但可能这是 mysql 安装目录中的 my.cnf 文件是罪魁祸首。注释掉这一行，问题可能就解决了。

```
bind-address = 127.0.0.1 
```

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2016-03-10T02:53:27.523

不确定其他人是否会觉得这很有帮助，但我遇到了同样的错误，并到处搜索任何匿名用户……但没有。问题最终是用户帐户设置为“需要 SSL” - 我在 PHPMyAdmin 中通过转到用户帐户并单击用户的编辑权限来找到它。一旦我取消选中此选项，一切都按预期工作！

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2016-07-08T06:44:42.157

当您的密码包含一些特殊字符（如 @、$ 等）时也会发生这种情况。为避免这种情况，您可以将密码用单引号括起来：

```
$ mysql -usomeuser -p's0mep@$$w0Rd' 
```

或者在输入时不要使用密码。将其留空，然后在终端询问时键入。这是推荐的方式。

```
$ mysql -usomeuser -p
Enter password:
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 191
Server version: 5.5.46-0ubuntu0.14.04.2 (Ubuntu)

Copyright (c) 2000, 2015, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> 
```

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2019-09-12T13:59:34.607

**更新：**在 v8.0.15（可能是这个版本）上，该`PASSWORD()`功能不起作用。

你必须：

1.  确保您首先停止了 MySQL。
2.  以绕过权限的安全模式运行服务器：`sudo mysqld_safe --skip-grant-tables`
3.  登录：`mysql -u root`
4.  mysql>`UPDATE mysql.user SET authentication_string=null WHERE User='root';`
5.  mysql>`FLUSH PRIVILEGES;`
6.  mysql>`exit;`
7.  再次登录：`mysql -u root`
8.  mysql>`ALTER USER 'root'@'localhost' IDENTIFIED WITH caching_sha2_password BY 'yourpasswd';`

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2015-10-06T13:07:43.617

只是想让你知道一个不寻常的情况，我收到了同样的错误。也许这对将来的某人有所帮助。

我开发了一些基本视图，在开发站点创建并将它们转移到生产站点。那周晚些时候，我更改了一个 PHP 脚本，突然出现错误，用户'local-web-user'@'localhost'的访问被拒绝。数据源对象没有改变，所以我专注于 MySQL 中的数据库用户，同时担心有人入侵了我的网站。幸运的是，该网站的其余部分似乎安然无恙。

后来事实证明，这些观点是罪魁祸首。我们的对象传输是使用另一个（和远程：admin@ip-address）用户而不是本地网站用户完成的。因此，视图是使用 'admin'@'ip-address' 作为定义者创建的。视图创建 SECURITY 默认为

```
SQL SECURITY DEFINER 
```

当 local-web-user 尝试使用视图时，它偶然发现定义者缺乏使用表的权限。一旦安全性更改为：

```
SQL SECURITY INVOKER 
```

问题已解决。实际问题与基于错误消息的预期完全不同。

* * *

## 回答 #18

> 赞同：4
> 
> 时间：2016-09-18T23:43:10.213

对我来说，这个问题是由 MySQL 5.7.2 的一个新特性引起的：如果它们的字段为空，`user`条目将被*忽略。*`plugin`

将其设置为 eg`mysql_native_password`以重新启用它们：

```
UPDATE user SET plugin='mysql_native_password' WHERE user='foo';
FLUSH PRIVILEGES; 
```

请参阅«Authentication Notes» 下[MySQL 5.7.2 的发行说明。](https://dev.mysql.com/doc/relnotes/mysql/5.7/en/news-5-7-2.html)

出于某种原因（可能是因为我的 4.1 之前的密码哈希被删除了），`mysql_upgrade`脚本没有设置默认插件值。

我注意到以下警告消息后发现`/var/log/mysql/error.log`：

> [警告] 用户条目 'foo'@'%' 的插件值为空。该用户将被忽略，并且没有人可以再使用该用户登录。

我在这里发布这个答案可能是为了避免有人像我一样使用同样荒谬的时间。

* * *

## 回答 #19

> 赞同：4
> 
> 时间：2017-11-14T07:26:54.253

**调试总结**

*   检查拼写错误：用户名或密码。
*   检查主机名并将其与 mysql.user 表主机名进行比较。
*   检查用户是否存在。
*   检查主机是否包含IP地址或主机名。

*您很有可能在工作中多次遇到此问题。由于输入错误的用户名或密码，我经常遇到此问题。尽管这是原因之一，但您还有其他很多机会可能会遇到此问题。有时，它看起来非常相似，但是当您深入挖掘时，您会意识到导致此错误的多种因素。这篇文章将详细解释大多数常见原因以及解决此问题的方法。*

**可能的原因：**

*   **案例 1：输入错误：用户名或密码。**

*这是此错误的最常见原因。如果您输入的用户名或密码错误，您肯定会收到此错误。*

**解决方案：**

*此类错误的解决方案非常简单。只需输入正确的用户名和密码。此错误将得到解决。如果您忘记了密码，您可以重置用户名/密码。如果您忘记了 admin / root 帐户的密码，有很多方法可以重置 / 重新获取 root 密码。如果您忘记了 root 密码，我将发布另一篇关于如何重置 root 密码的帖子。*

*   **案例2：从错误的主机访问。**

*MySQL 为用户访问提供基于主机的限制作为安全功能。在我们的生产环境中，我们曾经将访问请求限制在应用程序服务器上。此功能在许多生产场景中确实很有帮助。*

**解决方案：**

*当您遇到此类问题时，首先通过检查 mysql.user 表来检查您的主机是否被允许。如果未定义，您可以更新或插入新记录到 mysql.user 表。通常，出于安全考虑，从远程计算机以 root 用户身份访问是禁用的，这不是最佳实践。如果您需要从多台机器访问您的服务器，请仅授予对这些机器的访问权限。最好不要使用通配符 (%) 并提供通用访问。让我更新 mysql.user 表，现在演示用户可以从任何主机访问 MySQL 服务器。*

*   **情况3：服务器上不存在用户。**

当您尝试访问的用户在 MySQL 服务器上不存在时，会发生此类错误。

**解决方案：**

当您遇到此类问题时，只需检查用户是否存在于 mysql.user 表中。如果记录不存在，用户将无法访问。如果该用户需要访问，请使用该用户名创建一个新用户。

*   **案例 4：基于数字和名称的主机的混合。**

**要点**

*   定义用户主机时不建议使用通配符，尽量使用准确的主机名。

*   禁用从远程计算机的 root 登录。

*   使用代理用户概念。

*与此主题相关的其他概念很少，并且深入了解这些主题的细节与本文的范围非常不同。我们将在接下来的文章中研究以下相关主题。*

*   如果您忘记了 MySQL 服务器的 root 密码，该怎么办。
*   MySQL 访问权限问题和用户相关表。
*   具有最佳实践的 MySQL 安全功能。

*我希望这篇文章能帮助您修复 MySQL 错误代码 1045 Access denied for user in MySQL。*

* * *

## 回答 #20

> 赞同：4
> 
> 时间：2018-12-27T07:12:32.953

我发现了另一种表面上看起来是边缘情况的情况。我可以通过 SELECT INTO .. OUTFILE 以 root 身份导出到文件系统，但不能以普通用户身份导出。虽然这可能是权限问题，但我已经看过了，并没有看到特别明显的东西。我只能说，以对相关数据库拥有所有权限的普通用户身份执行查询会返回导致我进入该主题的拒绝访问错误。当我在一个旧项目中找到成功使用 SELECT INTO ... OUTFILE 的记录时，我注意到我是以 root 身份登录的。果然，当我以 root 身份登录时，查询按预期运行。

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2013-09-25T12:27:02.980

我希望您还没有因为删除 mysql 中的 debian-sys-maint 用户而造成更大的损害

让您的 mysql 守护程序以正常方式运行。如下图所示启动你的mysql客户端

```
mysql -u debian-sys-maint -p 
```

在另一个终端中，`cat`文件`/etc/mysql/debian.cnf`. 该文件包含密码；提示输入该密码时粘贴该密码。

[http://ubuntuforums.org/showthread.php?t=1836919](http://ubuntuforums.org/showthread.php?t=1836919)

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2019-02-12T10:23:13.347

这可能适用于极少数人，但这里有。不要`!`在密码中使用感叹号。

我使用 MariaDB 并得到了上述错误。当我将它简化为数字和字母时，它起作用了。其他字符，例如`@`和`$`工作正常 - 我在同一实例上的不同用户中使用了这些字符。

这个[地址](http://forums.sentora.org/showthread.php?tid=970&pid=6356#pid6356)的第五个回复让我找到了解决办法。

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2019-09-16T10:58:15.390

我有类似的问题，因为我的密码包含“;” char 在我第一次创建密码时破坏了我的密码。如果可以帮助您，请谨慎行事。

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2020-01-30T14:16:58.717

如今！解决方案：

> MySQL ERROR 1045 (28000): Access denied for user 'user'@'localhost' (using password: YES);

**Wampserver 3.2.0 新安装或升级**

可能默认`xamp`使用`mariaDB`是好的。

`Wamp`服务器自带`mariaDB`mysql，`mariaDB`默认安装在 3306 端口，mysql 安装在 3307，端口有时是 3308。

连接到`mysql`！

在安装时它要求使用`mariaDB`or `MySql`，但 mariaDB 被选中为默认值，您无法更改它，检查`mysql`选项并安装。

安装完成后，两者都将`mariaDB`在默认端口 3306 和`mysql`另一个端口 3307 或 3308 上运行。

右键单击`wampserver`应该在右下角运行的图标，转到工具并查看正确的`mysql`运行端口。

并将其包含在与以下相同的数据库连接中：

```
$host = 'localhost';
$db   = 'test';
$user = 'root';
$pass = '';
$charset = 'utf8mb4';
$port = '3308';//Port

$dsn = "mysql:host=$host;dbname=$db;port=$port;charset=$charset"; //Add in connection
$options = [
    PDO::ATTR_ERRMODE            => PDO::ERRMODE_EXCEPTION,
    PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC,
    PDO::ATTR_EMULATE_PREPARES   => false,
];
try {
     $pdo = new PDO($dsn, $user, $pass, $options);
} catch (\PDOException $e) {
     throw new \PDOException($e->getMessage(), (int)$e->getCode());
} 
```

`Note :`我正在使用 pdo。

有关更多信息，请参见此处：[https ://sourceforge.net/projects/wampserver/](https://sourceforge.net/projects/wampserver/)

* * *

## 回答 #25

> 赞同：2
> 
> 时间：2020-12-10T21:28:32.333

对我来说，root 有一个默认密码

我使用更改了密码`ALTER USER 'root'@'localhost' IDENTIFIED BY 'new Password';`并且它有效

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2018-03-04T08:55:27.533

在 Windows 上，解决方法如下：

> 错误 1045 (28000): 用户 'root'@'localhost' 的访问被拒绝（使用密码：否）

1.  从控制面板卸载mysql
2.  `C:\Program Files,C:\Program Files (x86)`从和中删除 MySql 文件夹`C:\ProgramData`
3.  安装mysql

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2014-01-17T09:09:01.597

当您运行时`mysql -u bill -p`，`localhost`将解析为您的 ip，因为它是 127.0.0.1 并且在您的`/etc/hosts`文件中，默认情况下`127.0.0.1 localhost`存在。因此，mysql 将您解释`bill@localhost`为未授予`bill@'%'`. 这就是为什么在查询`root`结果中有 2 条不同的用户记录。`select host, user from mysql.user;`

有两种方法可以处理这个问题。

一种是指定一个`/etc/hosts`在您尝试登录时不会被文件反向解析的 ip。例如，服务器的 ip 是`10.0.0.2`. 当您运行命令`mysql -u bill -p -h 10.0.0.2`时，您将能够登录。如果你输入`select user();`，你会得到`bill@10.0.0.2`。当然，任何域名都不应该解析到你`/etc/hosts`文件中的这个ip。

其次，您需要为此特定域名授予访问权限。因为`bill@localhost`，你应该调用 command `grant all privileges on *.* to bill@localhost identified by 'billpass';`。在这种情况下，您将能够使用 command 登录`mysql -u bill -p`。登录后，`select user();`命令返回`bill@localhost`。

但这仅适用于您尝试在同一主机上登录 mysql 服务器。在远程主机上，mysql 的行为符合预期，'%' 将授予您登录权限。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2014-05-03T04:06:44.660

我通过删除旧的错误用户'bill'条目解决了这个问题（这是重要的部分：来自**mysql.user**和**mysql.db**），然后创建了与之前一样的用户：

```
FLUSH PRIVILEGES;
CREATE USER bill@localhost IDENTIFIED BY 'passpass';
grant all privileges on *.* to bill@localhost with grant option;
FLUSH PRIVILEGES; 
```

工作，用户正在连接。现在我将从中删除一些previlegies :)

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2018-08-11T00:17:41.270

我遇到了同样的错误。不起作用的设置如下：

```
define("HOSTNAME", "localhost");
define("HOSTUSER", "van");
define("HOSTPASS", "helsing");
define("DBNAME", "crossbow");
$connection = mysqli_connect(HOSTNAME, HOSTUSER, HOSTPASS); 
```

下面的编辑设置是让它工作的设置。注意到区别了吗？

```
define('HOSTNAME', 'localhost');
define('HOSTUSER', 'van');
define('HOSTPASS', 'helsing');
define('DBNAME', 'crossbow');
$connection = mysqli_connect(HOSTNAME, HOSTUSER, HOSTPASS); 
```

区别在于双引号。与 Java 相比，它们在 PHP 中似乎非常重要，并且在转义字符、设置 URL 以及现在将参数传递给函数时，它们会产生影响。它们更漂亮（我知道），但总是尽可能多地使用单引号，然后可以在必要时将双引号嵌套在其中。

当我在 Linux 机器上而不是在 Windows 环境上测试我的应用程序时，出现了这个错误。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2018-10-25T02:44:31.470

操作系统：windows

我的错误信息是：

> MySQL ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: YES)

我的原因是我没有以*管理员*权限打开cmd。

所以我的解决方案是以管理员身份打开cmd，然后就可以了。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2019-07-04T14:14:28.120

如果 MySQL 在不区分大小写的操作系统（例如 Windows）上运行，也可能发生这种情况。

例如，我发现尝试使用这些凭据连接到数据库失败：

mysql>`grant select on databaseV105.* to 'specialuser' identified by 's3curepa5wrd';`

`$ mysql -specialuser' -p's3curepa5wrd' -h10.61.130.89 databaseV105`

> ERROR 1045 (28000): Access denied for user 'specialuser'@'10.0.1.113' (使用密码: YES)

但是，这成功了：

mysql>`grant select on databasev105.* to 'specialuser' identified by 's3curepa5wrd';`

`$ mysql -specialuser' -h10.300.300.400 databaseV105 -p`

> 输入密码：

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2020-01-20T10:11:58.097

如果您的 dbname、用户名、密码等字符串长度超过[https://dev.mysql.com/doc/refman/5.7/en/grant-tables.html#grant-tables-scope-column-properties](https://dev.mysql.com/doc/refman/5.7/en/grant-tables.html#grant-tables-scope-column-properties)中列出的值，您也可能无法登录，就像我的情况一样。

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2021-01-09T17:21:45.897

`-p`对我来说，进入mysql时没有指定参数。

```
mysql -p 
```

我没有问题，但是没有密码调用mysql是错误的。

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2021-04-10T12:51:57.737

所以对我来说，这个问题与我正在映射的端口有关。

3306 => 3306 不起作用（因为我有一个本地 mysql 正在运行）

3307 => 3306 有效！

这是在建立 ssh 隧道的上下文中：

```
ssh -N -L 3307:rdsDns:3306 ec2User@ec2Dns -i key.pem -v 
```

3307是本地端口，3306是远程端口。

* * *

## 回答 #35

> 赞同：-1
> 
> 时间：2012-06-27T14:15:43.133

MySQL 帐户名由用户名和主机名组成，主机名中的名称'localhost' 表示本地主机，也可以在主机名或 IP 地址值中使用通配符“%”和“_”。这些与使用 LIKE 运算符执行的模式匹配操作具有相同的含义。例如，主机值 '%' 匹配任何主机名，而值 '%.mysql.com' 匹配 mysql.com 域中的任何主机。'192.168.1.%' 匹配 192.168.1 C 类网络中的任何主机。

以上只是介绍：

实际上两个用户都是不同的 MySQL 帐户`'bill'@'localhost'`，`'bill'@'%'`因此两者都应该使用自己的身份验证详细信息，例如密码。

有关更多信息，请参阅[http://dev.mysql.com/doc/refman//5.5/en/account-names.html](http://dev.mysql.com/doc/refman//5.5/en/account-names.html)

* * *

## 回答 #36

> 赞同：-1
> 
> 时间：2014-02-11T13:58:54.393

确保没有其他正在使用 localhost 帖子的 SQL 实例正在运行。在我们的例子中，另一个实例在与登录冲突的 localhost 上运行。关闭它解决了这个问题。

* * *

## 回答 #37

> 赞同：-1
> 
> 时间：2014-05-05T15:34:34.953

如果您使用旧版本的 MySQL UI（如 SQLYoug）生成错误哈希的密码，也会出现问题。

使用 SQL 脚本创建用户将解决此问题。

* * *

## 回答 #38

> 赞同：-1
> 
> 时间：2014-08-29T11:56:00.520

我有同样的问题，但在我的情况下，解决方案是由 eggyal 的评论解决的。我也有一个匿名用户，但删除它并没有解决问题。'FLUSH PRIVILEGES' 命令虽然有效。

令我惊讶的是，我使用 MySQL Workbench 创建了用户，并且我希望它能够执行所有必要的功能来完成任务。

* * *

## 回答 #39

> 赞同：-1
> 
> 时间：2016-02-28T16:35:44.150

对于 Mac 用户，如果他们仍然有问题（就像我的情况一样），我发现这个解决方案对我有用：[MySQL 命令行 '-bash command not found'](https://stackoverflow.com/questions/22391778/mysql-command-line-bash-command-not-found)

要在 macbook 终端上使用命令 ie `mysql`，您需要使用以下命令导出路径：

```
export PATH=$PATH:/usr/local/mysql/bin/ 
```

考虑到默认安装，使用以下命令以 root 用户身份获取 mysql 提示符：

```
mysql -u root 
```

否则你使用了错误的root密码。

参考：在 OSX 上设置 MySQL root 用户密码

* * *

## 回答 #40

> 赞同：-1
> 
> 时间：2016-08-26T17:08:31.450

百分号表示所有 ip，所以 localhost 是多余的......不需要 localhost 的第二条记录。

实际上，'localhost' 在 mysql 中是特殊的，它意味着通过 unix 套接字（或我相信 Windows 上的命名管道）的连接，而不是 TCP/IP 套接字。使用 % 作为主机不包括 'localhost'

MySQL 用户帐户有两个组成部分：用户名和主机名。用户名标识用户，主机名指定用户可以连接的主机。将用户名和主机名组合起来创建一个用户帐户：

`'<user_name>'@'<host_name>'` 您可以为主机名指定特定的 IP 地址或地址范围，或使用百分比字符 ("%") 使该用户能够从任何主机登录。

请注意，用户帐户由用户名和主机名定义。例如，`'root'@'%'`是与 不同的用户帐户`'root'@'localhost'`。**

# html - HTML 表单在焦点时隐藏文本值 - 没有任何 JavaScript

> ID：10299150
> 
> 赞同：1
> 
> 时间：2012-04-24T13:42:54.810
> 
> 标签：html, forms

我有一个简单的表格，如下所示：

**的HTML：**

```
<form action="post">
    <input class="text" type="text" name="firstname" value="First Name"/>
    <br />
    <input class="text" type="text" name="lastname" value="Last Name" />
    <br />
    <input class="text" type="text" name="username" value="Username" />
    <br />
    <input class="text" type="password" name="password" value="password" />
    <br />
    <input class="button" type="submit" value="Submit" />
    <br />
</form> 
```

**CSS：**

```
fieldset { margin:1em 0; }
form { margin:0; }
input { }
input.text { color: #aaa; }
input:focus { background:#ddd; }
input, select, textarea { display:block; margin-bottom:5px; padding:5px 10px; }
input[type="checkbox"], input[type="radio"] { padding: 0; display:inline; vertical-align:-1px; }
input[type="submit"] { cursor:pointer; }
label { font-weight:normal; display:block; margin-top:0.5em; } 
```

**输出：**

![在此处输入图像描述](../Images/b0a7195a686988e7a38da44329c681c7.png)

**我想要的是......**

当访问者单击输入字段并`background-color`更改为`#ddd` *（我通过使用 css 实现`input:focus { background:#ddd; }`）时，是否可以***隐藏**“姓氏”之类的文本。我可以使用一些类似的css`display:none`或其他东西。

如果是，如何？请帮忙。

**请注意：**如果可能，我不想使用任何 JavScript。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T13:44:51.013

在 html 5 中，您可以像这样使用占位符：

```
<input class="text" type="text" name="lastname" value="" placeholder="Last Name"/> 
```

对于较旧的浏览器，我使用这个 jquery 脚本

```
if ($.browser.msie) {
  $("input[type=text], textarea").each(function() {
    return $(this).val($(this).attr("placeholder")).addClass("placeholder");
  }).bind("focus", function() {
    if ($(this).val() === $(this).attr("placeholder")) {
      return $(this).val("").removeClass("placeholder");
    }
  }).bind("blur", function() {
    if ($(this).val() === "") {
      return $(this).val($(this).attr("placeholder")).addClass("placeholder");
    }
  });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T13:48:57.607

即使您在问题中讨论时隐藏了值，您也将无法查看已输入的任何值。

您要么需要使用`placeholder`属性（形式`placeholder="Some text"`）或 javascript。对该`placeholder`属性的支持并不出色：[http](http://caniuse.com/#search=placeholder) ://caniuse.com/#search=placeholder 。

或者更好的是，您可以使用`placeholder`并包含一个 polyfill，它可以解决任何不支持的浏览器：[https ://github.com/ginader/HTML5-placeholder-polyfill](https://github.com/ginader/HTML5-placeholder-polyfill)

# jqgrid - 网格高度和最后一列之后的空白空间

> ID：10299151
> 
> 赞同：0
> 
> 时间：2012-04-24T13:42:55.887
> 
> 标签：jqgrid

是否有可能遵守所有这些要求？

*   无论记录的数量如何，网格的高度都应固定；
*   最后一列之后的右边空格永远不会显示；
*   如果记录的数量大于网格的高度，则应显示垂直滚动条；
*   永远不会显示水平滚动条；
*   如果可能，可以调整高度，以便在网格底部不显示“一半”记录。
*   滚动=真

...无论屏幕上的网格数量是多少！

PS：奥列格肯定有答案......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:32:15.067

将此添加到您的样式表中：

```
.ui-jqgrid .ui-jqgrid-bdiv thead,div,tbody{
  position: relative; 
  margin: 0em; 
  padding:0; 
  /*overflow: auto;*/ 
  overflow-x:hidden; 
  overflow-y:auto; 
  text-align:left;
} 
```

作为 jqgrid 的参数添加：

```
 scrollOffset: 0, 
```

# google-maps - 这在谷歌地图上可行吗？在 Google 地图上手动绘制一个框

> ID：10299157
> 
> 赞同：0
> 
> 时间：2012-04-24T13:43:19.573
> 
> 标签：google-maps, google-maps-api-3

我正在努力将谷歌地图集成到一个网络应用程序中，我有一个可能性问题。

我使用 ASP .Net 4.0 作为代码的基础，但我怀疑我将不得不使用 JavaScript 来实现大部分功能，即。基本上我想在我存储在数据库中的 Lat Long 位置的地图上显示一堆标记，然后让用户能够用鼠标在地图上绘制一个框，然后取回四个角的 lat long的盒子。

如果有人知道我怎么能做到这一点，这将对我有很大帮助！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T13:53:35.487

多年来，Google Maps API 的复杂性让我感到害怕。最近，我偶然发现了一个名为[GMap3](http://gmap3.net/)的 jQuery 插件，它为您完成了很多繁重的工作。

我建议在初始化和所有这些之后，从你的 .NET 代码中打印一个 Javascript 块，如下所示：

```
var markersFromDatabase = [
    [60.164967,24.94758],
    [59.956495, 10.764599]
    //etc. This array should be printed from your serverside code
];
var markersToBeAdded = [];
jQuery.each(markersFromDatabase, function(indexOfItem, valueOfItem){
    markersToBeAdded.push({
        lat:valueOfItem[0],
        lng:valueOfItem[1],
        options: {
            draggable: false,
            icon: "img/your_awesome_icon.png",
            title: "This is an icon from my database!"
        }
    });
});
jQuery("#map_canvas").gmap3(
    { action: 'addMarkers',
        markers: markersToBeAdded
    }
); 
```

**编辑：**我现在意识到我只回答了你问题的一半。恐怕我对选择框没有明显的答案。我怀疑您可以使用[addRectangle](http://gmap3.net/api/add-rectangle.html)，或者在最坏的情况下使用[addFixPanel](http://gmap3.net/api/add-fix-panel.html) ，它可以让您`<div>`在地图画布上添加透明（然后为此触发鼠标事件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T13:45:57.097

这是使用 Google Maps API 3 的叠加可编辑功能的一种方法。

[谷歌地图覆盖可编辑](https://developers.google.com/maps/documentation/javascript/overlays#editable)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-17T15:21:51.807

如果您的问题是“如何使用矩形选择多个标记”，您可以执行以下操作：

```
var markers = []; // This array must be filled with your data
var rectangles = [];
var triggeredMarkers = [];
google.maps.event.addListener(drawingManager, 'rectanglecomplete', updateSelection);

function updateSelection(rectangle){
   var lat_max = rectangle.getBounds().getNorthEast().lat();
   var lat_min = rectangle.getBounds().getSouthWest().lat();
   var lng_max = rectangle.getBounds().getNorthEast().lng();
   var lng_min = rectangle.getBounds().getSouthWest().lng();
   rectangles.push(rectangle);

   for(var i=0;i<markers.length;i++){
     if((lat_min < markers[i].getPosition().lat() ? (markers[i].getPosition().lat() < lat_max ? true:false):false)
       && (lng_min < markers[i].getPosition().lng() ? (markers[i].getPosition().lng() < lng_max ? true:false):false)){
       triggeredMarkers.push(markers[i]);
     }
   }
} 
```

该`rectangles`数组用于保存矩形，以便以后能够擦除它们。

但是，如果您只想要一个处理多边形的简单函数，那么[这个](https://developers.google.com/maps/documentation/javascript/examples/poly-containsLocation)函数对您真的很有帮助。它可以这样使用：

```
var markers = [];
var polygones = [];
var triggeredMarkers = [];
google.maps.event.addListener(drawingManager, 'polygoncomplete', updateSelection);

function updateSelection(polygon){
   polygones.push(polygon);

   for(var i=0;i<markers.length;i++){
    if(google.maps.geometry.poly.containsLocation(markers[i].getPosition(),polygon)){
       triggeredMarkers.push(markers[i]);
     }
   }
} 
```

对于矩形和圆形，有[这个答案](https://stackoverflow.com/a/22343573/8658039)可以帮助你。

# xaml - 如何制作可执行的 Metro 风格应用程序？

> ID：10299158
> 
> 赞同：2
> 
> 时间：2012-04-24T13:43:20.367
> 
> 标签：xaml, exe, windows-8, microsoft-metro

我创建了 Metro 风格的应用程序，我想让它可执行，以便我可以在具有 Windows 8 的设备上运行它，是否有任何教程或工具可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T14:11:12.507

您需要打包应用程序（项目 -> 商店 -> 创建应用程序包）以将其上传到商店或在本地使用，第二个是您想要的。然后，您要运行该应用程序的计算机需要具有开发人员许可证。

# xml - MVC WAB API 对象作为 HttpResponseMessage 的 HttpContent

> ID：10299159
> 
> 赞同：0
> 
> 时间：2012-04-24T13:43:21.983
> 
> 标签：xml, json, model-view-controller, httpwebrequest

我有一个 MVC WEB API 服务，我想将每个响应作为 HttpResponseMessage 发送。这种情况下我有一个看起来像这样的类：

```
public class Quota
{
    public int docs_quota { get; set; }
    public int pages_quota { get; set; }
    public int size_quota { get; set; }
} 
```

在响应的内容中我想发送一个配额对象，但我不想自己序列化它，我想让服务来做，所以如果它被序列化为 json 或 xml，我不必费心。

我怎样才能做到这一点？

真挚地，

佐利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:55:28.497

最后，我发现了，这很容易：

```
Quota q = GetQuota();
var response = new HttpResponseMessage<Quota>(q);
    return response; 
```

它将返回状态码 200(okay)，并且 q 将在内容中的 json/xml 中序列化。

# c# - 使用选定的 ID 检查项目 ID

> ID：10299160
> 
> 赞同：2
> 
> 时间：2012-04-24T13:43:30.880
> 
> 标签：c#, asp.net-mvc

这是在我的控制器中，我正在尝试用项目填充下拉列表。我已经根据活动项目进行填充，但我也想添加以前选择的项目，即使它现在不活动。我想检查 Where 子句以获取活动项目，但我还想添加一个“或”来获取先前选择的派对类型的 ID 到列表中的派对类型 ID。

```
viewModel.AvailablePartyTypes =
            _partyTypeRepository.FindAll().OrderBy(o => o.Description).Where(a => a.IsActive).ToSelectList(
                "PartyTypeId", "Description", viewModel.PartyTypeId.ToString()); 
```

这就是我想要得到的：

```
Where(a=>a.IsActive || selected.PartyTypeId == PartyTypeId) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T14:20:25.937

也许我忽略了一些东西，但它不是那么简单：

```
Where(a=>a.IsActive || selected.PartyTypeId == a.PartyTypeId) 
```

编辑：

如果它变得复杂，则将其重构为方法调用，例如：

```
Where(a=> UseItem(a))

private static bool UseItem(object a)
    {
        bool result = a.IsActive;
        //etc
        return result;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:10:35.917

不太清楚为什么我的答案被删除了。即使其他人提供了帮助，但我得到答案和形成的方式并不是真正由帮助的人产生的。我已经在我原来的帖子中发布了这个问题。

# c# - 数据绑定操作取消 selectedindexchanging 事件

> ID：10299162
> 
> 赞同：1
> 
> 时间：2012-04-24T13:43:36.677
> 
> 标签：c#, asp.net, listview, data-binding

我正在使用 ListView 服务器控件来表示一些数据。当我触发 Select 命令时，Page 会正确回发；但是如果我在页面加载中绑定数据源，则 selectedindexchangeing 事件将被取消。我将数据绑定切换到页面加载中的评论，它工作正常。

这是我的数据绑定方法。

```
 public void BindData()
    {
        lstSamples.DataSource = (Session["AnalyzeApp"] as AnalizBasvurusu).SampleInfos;
        lstSamples.DataKeyNames = new string[] {"Key"};

        lstSamples.DataBind();
    } 
```

我这样称呼它

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (IsPostback)
        BindData();
    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:13:28.340

处理完事件后调用`BindData()`（SelectedIndexChanging..etc）：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostback)
        BindData();
} 
```

# django - 我可以减慢 Django 的速度吗

> ID：10299179
> 
> 赞同：17
> 
> 时间：2012-04-24T13:44:33.603
> 
> 标签：django, http

真的很简单的问题

```
./manage.py runserver 
```

我可以在我的开发机器上放慢速度，`localhost:8000`以便我可以模拟文件上传并处理 ajax 上传的外观和感觉吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-24T15:13:17.213

根据您要模拟的位置，您可以简单地睡觉吗？

```
from time import sleep
sleep(500) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-24T15:18:01.427

在 osx 或 freebds 上，您可以`ipfw`用来限制特定端口的带宽：

```
 sudo ipfw pipe 1 config bw 1Bytes/s delay 100ms
  sudo ipfw add 1 pipe 1 src-port 8000 
```

当您不再需要它时，不要忘记将其删除：

```
sudo ipfw delete 1 
```

[学分：美洲虎](http://hints.macworld.com/article.php?story=20080119112509736)

对于 osx，还有一个免费的应用程序允许这样做：

[http://slowyapp.com/](http://slowyapp.com/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-24T13:54:26.943

您可以编写[自定义的上传处理程序](https://docs.djangoproject.com/en/1.4/topics/http/file-uploads/#writing-custom-upload-handlers)或子类当前上传处理程序来主要减慢其中的[`receive_data_chunk()`](https://github.com/django/django/blob/master/django/core/files/uploadhandler.py#L172)方法。或者在里面设置一个 pdb 断点，`receive_data_chunk()`然后手动继续上传。或者更简单，尝试上传一些大文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T20:08:51.873

我是 Charles HTTP 代理的忠实粉丝。它可以让您限制连接并可以模拟各种网络条件。

[http://www.charlesproxy.com/](http://www.charlesproxy.com/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-28T13:32:46.553

使用来自 django-gubbins 的慢速文件上传处理程序：

```
import time
from django.core.files.uploadhandler import FileUploadHandler

class SlowFileUploadHandler(FileUploadHandler):
    """
    This is an implementation of the Django file upload handler which will
    sleep between processing chunks in order to simulate a slow upload. This
    is intended for development when creating features such as an AJAXy
    file upload progress bar, as uploading to a local process is often too
    quick.
    """
    def receive_data_chunk(self, raw_data, start):
        time.sleep(2)
        return raw_data

    def file_complete(self, file_size):
        return None 
```

您可以通过将其添加到以下位置来全局启用它：

```
FILE_UPLOAD_HANDLERS = (
    "myapp.files.SlowFileUploadHandler",
    "django.core.files.uploadhandler.MemoryFileUploadHandler",
    "django.core.files.uploadhandler.TemporaryFileUploadHandler",
) 
```

或为特定请求启用它：

```
request.upload_handlers.insert(0, SlowFileUploadHandler()) 
```

确保请求被排除在 CSRF 检查之外，如[https://docs.djangoproject.com/en/dev/topics/http/file-uploads/#id1所述](https://docs.djangoproject.com/en/dev/topics/http/file-uploads/#id1)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-04-18T11:05:53.133

如果您想减慢所有请求的速度，一个非常简单的方法是使用 ngrok [https://ngrok.com/](https://ngrok.com/)。使用 ngrok url 进行请求，然后连接到另一个国家的 vpn。这将使您的请求非常缓慢。

# c# - Linq 中的代表

> ID：10299182
> 
> 赞同：0
> 
> 时间：2012-04-24T13:44:47.080
> 
> 标签：c#, linq, delegates

我有一个包含搜索词、点击等的实体列表。
用户应该能够比较实体之间的点击量 - 即在搜索开始时包含“免费样品”一词的所有实体并与在短语末尾包含短语“逮捕我”的所有实体。
我可以使用多个 foreach 和 switch 来做到这一点（因为用户选择了查询和字符串的一部分），但我知道通过使用 Linq 我可以使用“start with”和“end with”函数。你能指导我完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:54:58.423

听起来您想要一个以“免费样品”开头的事物列表，然后是另一个以“逮捕我”结尾的事物列表。假设这就是你想要的，你会做这样的事情。

```
// Assumes myStuff is where all of your data is right now
var startsWith = myStuff.Where(x => x.MyString.StartsWith("free sample"));
var endsWith = myStuff.Where(x => x.MyString.EndsWith("arrest me"));

// Now you can do whatever comparisons between the two lists you need 
```

当然，如果您只想要所有以“免费样品”开头并以“逮捕我”结尾的产品，您可以这样做

```
var hasBoth = myStuff.Where(x => x.MyString.StartsWith("free sample") && x.MyString.EndsWith("arrest me")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T13:54:14.287

LINQ`Where()`返回一组满足条件的实体：

```
var filtered = entities.Where(e => 
                         e.SearchPattern.StartsWith("Start")
                         &&
                         e.SearchPattern.EndsWith("End")); 
```

LINQ`Single()/SingleorDefault()`返回满足条件的单个实体，如果找到多个实体 - 将引发异常。

```
var filtered = entities.Single(e => 
                         e.SearchPattern.StartsWith("Start")
                         &&
                         e.SearchPattern.EndsWith("End")); 
```

LINQ `First()`/`Last()`返回给定条件的第一个/最后一个实体...

```
var filtered = entities.First(e => 
                           e.SearchPattern.StartsWith("Start")
                           &&
                           e.SearchPattern.EndsWith("End")); 
```

有关完整列表，请参阅[Enumerable 类方法](http://msdn.microsoft.com/en-us/library/bb341635.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T13:58:39.807

您提到的函数只是字符串函数。`s.StartsWith("abc")`和`s.EndsWith("xyz")`。在 LINQ 查询中，您可以在 where 子句中使用它们。

```
var startIndexes = phrases
    .Where(p => p.StartsWith("free sample")
    .Select((p, i) => i);

var endIndexes = phrases
    .Where(p => p.EndsWith("arrest me")
    .Select((p, i) => i); 
```

这两个查询返回分别以某个字符串开头和结尾的短语的索引。我使用接受索引作为第二个参数的 select 重载。

# xcode - 为什么退出杀死应用程序后我的阵列不保存或重新加载。iOS Xcode 4.3

> ID：10299183
> 
> 赞同：0
> 
> 时间：2012-04-24T13:44:49.593
> 
> 标签：xcode, nsarray, save

退出我的应用程序并重新加载似乎清除了我的数组，或者我没有正确地重新加载它。我看不到我错过了什么。webview 加载并将 urltextfield 添加到对象 Pasturls 到数组中。每次用户开始输入他们已经从文本字段发送到 webiew 的内容时，它都会显示在表格视图中。每次都很好，直到应用程序被杀死。后台返回没问题。请？

**视图控制器.h**

```
@interface ViewController : UIViewController <UITextFieldDelegate, UIWebViewDelegate, UIActionSheetDelegate, MFMailComposeViewControllerDelegate, UITableViewDelegate, UITableViewDataSource> {
NSMutableArray *pastUrls;
NSMutableArray *autocompleteUrls;
UITableView *autocompleteTableView;

}
@property (nonatomic, retain) IBOutlet UITableView *autocompleteTableView;
@property (nonatomic, retain) NSMutableArray *pastUrls;
@property (nonatomic, retain) NSMutableArray *autocompleteUrls;

- (void)searchAutocompleteEntriesWithSubstring:(NSString *)substring;

@end 
```

**视图控制器.m**

```
@interface ViewController ()

@end

@implementation ViewController   

@synthesize pastUrls;
@synthesize autocompleteUrls;
@synthesize autocompleteTableView;

- (void)webViewDidStartLoad:(UIWebView *)webView {

if (![pastUrls containsObject:urlField.text]) {
    [pastUrls addObject:urlField.text];
    [[NSUserDefaults standardUserDefaults] setObject:pastUrls forKey:@"PastUrls"];
    }

- (void)loadView {
pastUrls = [[[NSUserDefaults standardUserDefaults] arrayForKey:@"PastUrls"] mutableCopy];
pastUrls = [[NSMutableArray alloc] initWithObjects:@"PastUrls", nil];
[super loadView];
}

- (void)viewDidLoad
{
autocompleteUrls = [[NSMutableArray alloc] init];
}

- (void)searchAutocompleteEntriesWithSubstring:(NSString *)substring {

[autocompleteUrls removeAllObjects];
for(NSString *curString in pastUrls) {
    NSRange substringRange = [curString rangeOfString:substring];
    if (substringRange.location == 0) {
        [autocompleteUrls addObject:curString];  
    }
}
[autocompleteTableView reloadData];
}

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
return 1;
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger) section      {
return [autocompleteUrls count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

UITableViewCell *cell = nil;
static NSString *AutoCompleteRowIdentifier = @"AutoCompleteRowIdentifier";
cell = [tableView dequeueReusableCellWithIdentifier:AutoCompleteRowIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc]initWithStyle:(UITableViewCellStyle)UITableViewCellStyleDefault reuseIdentifier:AutoCompleteRowIdentifier];
    cell.selectionStyle = UITableViewCellSelectionStyleGray;

}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:47:00.513

首先，您的过去网址存在问题。在 loadView 中，您在其中设置了两个不同的内容：

```
- (void)loadView {
pastUrls = [[[NSUserDefaults standardUserDefaults] arrayForKey:@"PastUrls"] mutableCopy];
pastUrls = [[NSMutableArray alloc] initWithObjects:@"PastUrls", nil];
} 
```

第二个应该被删除。此外，您的实现中还有一些奇怪的东西，例如 loadView 和 viewDidLoad 函数。您更有可能拥有：

```
- (void)webViewDidStartLoad:(UIWebView *)webView {

if (![pastUrls containsObject:urlField.text]) {
    [pastUrls addObject:urlField.text];
    [[NSUserDefaults standardUserDefaults] setObject:pastUrls forKey:@"PastUrls"];
    // You might need to synchronize your NSUserDefaults content
    // if so, uncomment the following line
    // [[NSUserDefaults standardUserDefaults] synchronize];
    }
}

// Used only if you do not use a XIB file to load the graphical interface
//- (void)loadView {
//}

- (void)viewDidLoad
{
    [super viewDidLoad]; // Was missing in your current implementation
    autocompleteUrls = [[NSMutableArray alloc] init];
    pastUrls = [[[NSUserDefaults standardUserDefaults] arrayForKey:@"PastUrls"] mutableCopy];
} 
```

# css - 使用 Blueprint CSS 时如何强制 div 进入同一行

> ID：10299185
> 
> 赞同：0
> 
> 时间：2012-04-24T13:44:52.340
> 
> 标签：css, blueprint-css

我正在使用 blueprint-css，我想在 span-24 中有一个水平滚动条，它允许下面的 3 个 span-12 div 显示在同一行上。这似乎应该是一件简单的事情，但我无法让它工作。overflow-x:scroll 给了我一个滚动条，但最终的 span-12 出现在新的一行上。

HTML：

```
<div class="span-24 table-container">
  <div class="span-12">
    Some Content
  </div>
  <div class="span-12">
    Some Content
  </div>
  <div class="span-12">
    Some Content
  </div>
</div> 
```

CSS：

```
div.table-container {
  overflow-x:scroll;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:50:17.660

对于网格，尝试修改网格布局系统总是不太好，所以我建议您在网格列中创建一个 div，而不是尝试修改`span`类本身，如下所示：

```
<div class="span-24">
    <div class="table-container">
      <div class="span-12">
        Some Content
      </div>
      <div class="span-12">
        Some Content
      </div>
      <div class="span-12">
        Some Content
      </div>
    </div>
</div> 
```

顺便说一句，刚刚注意到您的跨度类不加起来，12+12+12 是 36，而您的容器是 24，尝试降低您的内部跨度类加起来为 24，如下所示：

```
<div class="span-24">
    <div class="table-container">
      <div class="span-8">
        Some Content
      </div>
      <div class="span-8">
        Some Content
      </div>
      <div class="span-8 last">
        Some Content
      </div>
    </div>
</div> 
```

演示：http: [//jsfiddle.net/CbRgc/](http://jsfiddle.net/CbRgc/)

# c - Stack的链表实现

> ID：10299186
> 
> 赞同：1
> 
> 时间：2012-04-24T13:44:53.310
> 
> 标签：c

我收到以下错误消息。无法解决它。谷歌了很多。终于想到放在这里了。

![在此处输入图像描述](../Images/31d38126b78c710c4f0997e3df023bd4.png)

```
#include <stdio.h>
#include <stdlib.h>
#include <malloc.h>
int stop;
struct stack
{
  int data;
  struct stack *next;
};
typedef struct stack *node, *top;
//typedef struct stack *top;
void push()
{
    int i;
    struct stack *x;
    x = malloc(sizeof(struct stack));
    printf("\n Enter the element your want to insert");
    scanf("%d", &i);
    x->data = i;
    x->next = top;
    top = x;
}
void pop()
{
    int i;
    if(top == NULL)
    {
        printf("\nStack is empty\n");
    }
    else{
    i = top->data;
    free(top);
    top = top->next;

    }
}
void display()
{
    if(node != NULL)
    {
        printf("%d ", node->data);
        node = node->next;
    }

}
int main()
{
    int ch;
    while(1)
    {
        printf("\nEnter your option \n1\. Insert(Push) \n2\. Delete(Pop) \n3\. Display  : \n");
        scanf("%d", &ch);
        switch(ch)
        {
            case 1:
                    push();
                    break;
            case 2:
                    pop();
                    break;
            case 3:
                    display();
                    break;
            default:
                    printf("Invalid Entery, Try Again");
        }
    }
return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T13:47:27.273

删除`typedef`，一切都会好起来的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T13:48:30.380

你不想要一个新的类型：

```
typedef struct stack *node, *top; 
```

相反，您需要一个新变量：

```
struct stack *node, *top; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T13:48:08.893

您不能将变量声明与`typedef`. 如果你想创建一个别名`struct stack`并简单地调用它`stack`，修改你的代码如下：

```
struct stack {
    int data;
    struct stack *next;
};
typedef struct stack stack;
stack *node, *top; 
```

# sql - 通过接受文本字段黑莓中的新字符串来更新 sqlite 表

> ID：10299188
> 
> 赞同：0
> 
> 时间：2012-04-24T13:44:59.893
> 
> 标签：sql, sqlite, blackberry

我创建了一个客户详细信息表，并希望通过接受在其各自列的文本字段框中输入的新值来更新它 需要用于文本字段更新的更新语句是什么。这种东西

```
 UPDATE Customer_Detail SET textfield1=....(what next) 
```

请指导

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:53:53.030

用这个

```
 UPDATE Customer_Detail SET name = '"+TextField2.getText()+"',phone = '"+TextField3.getText()+"',email= '"+TextField4.getText()+"'  WHERE name= '"+TextField1.getText()+"'"); 
```

在这里设置变量以捕获您正在寻找的那些文本字段输入，并在 WHERE 子句中使用与表中的搜索 id 匹配的标识符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T13:56:37.767

你应该使用的是参数。像这样：

```
//this is your sqlStatement - this assumes you have declared an sqlconnection and sqlstatement previous
stmt.text = "UPDATE main.tblYourTableName SET column1=:column1, column2=:column2 WHERE columnPK=0";
// setup your parameters
stmt.parameters[":column1"]= txtYourTextField1.text;
stmt.parameters[":column2"]= txtYourTextField2.text;
// execute the sql query
stmt.execute();
// clear the parameters if no longer needed or resetting the number of parameters for another sql query
stmt.clearParameters(); 
```

希望这可以帮助。

干杯，

# jquery - Jquery无法更改已加载表单上的表单值

> ID：10299192
> 
> 赞同：0
> 
> 时间：2012-04-24T13:45:14.040
> 
> 标签：jquery, forms, field, hidden

我是 JQuery 的新手，需要为我正在制作的网站提供决策树。我使用自定义灯箱功能加载初始“测验”，然后根据“测验”的答案，在同一窗口中加载某个联系表单。这一切都好，表格工作正常。问题是我需要记录“测验”的答案。我已经设法让 JQuery 将答案保存在变量中，但我无法将联系表单上隐藏输入的值更改为变量的值。

为了节省发布所有代码，测验通常是一堆问题，如下面的问题，设置为在用户单击答案时显示下一个问题。我通过 CSS 隐藏了实际输入，因此标签看起来像按钮：

```
<div id="q1" class="question">
<h3 class="lightBlueText">Did you purchase your home privately or through the council's 'Right to Buy' scheme?</h3 class="lightBlueText">
<div id="a1" class="answer">
<div class="quizButton"><input type="radio" name="q1" id="private" value="Private" /> <label for="private" class="lblPrivate" id="category-private">Private</label></div>
<div class="quizButton"><input type="radio" name="q1" id="rtb" value="Right To Buy" /><label for="rtb" class="lblrtb" id="category-righttobuy">Right To Buy</label></div>
</div><!--answer1-->
</div><!--question1-->

<div id="q2a" class="question">
<h3 class="lightBlueText">Did you take out your mortgage within the last 7 years?</h3 class="lightBlueText">
<div id="a2a" class="answer">
<div class="quizButton"><input type="radio" name="q2a" id="p1" value="Yes" /><label for="p1" class="lblYes" id="q1-private-yes">Yes</label></div>
<div class="quizButton"><input type="radio" name="q2a" id="p2" value="No" /><label for="p2" class="gotoSorry" id="q1-private-no">No</label></div>
<div class="quizButton"><input type="radio" name="q2a" id="p3" value="Don't Know" /><label for="p3" class="lblYes" id="q1-private-dontknow">Don't Know</label></div>
</div><!--answer2-->
</div><!--question2-->

<!--more questions here-->

<div id="q5a" class="question">
<h3 class="lightBlueText">Did you use your mortgage/remortgage to consolidate your debts?</h3 class="lightBlueText">
<div id="a5a" class="answer">
<div class="quizButton"><input type="button" name="q5a" value="Yes" id="p10" /><label for="p10" class="gotoForm1" id="q4-private-yes">Yes</label></div>
<div class="quizButton"><input type="button" name="q5a" value="No" id="p11"/><label for="p11" class="gotoSorry" id="q4-private-no">No</label></div>
<div class="quizButton"><input type="button" name="q5a" value="Don't Know" id="p12" /><label for="p12" class="gotoForm2" id="q4-private-dontknow">Don't Know</label></div>
</div><!--answer5-->
</div><!--question5--> 
```

Jquery（原谅我的新手代码）：

```
 var id;
var root = location.protocol + '//' + location.host + '/test/sapphire';
var quiz_answers;
$(document).ready(function() {

   $('.question').hide();//hide all
   $('#q1').show();//show the first question
   quiz_answers = "Answers: "; //reset quiz answers
    $('.quizButton label').click(function()
        {
        //get the id of what was just clicked.
        //This is the value of the radio button that we need to select
        var id = $(this).attr('id');
        //as long as clickable text is in a tag that
        //has a class of ‘quizButton’ and an id with the value of the
        //radio button that it needs to select, we only need this statement.
        $('input[value=" + id + "]').attr("checked", true);

        if ($(this).is('.lblrtb')){ //this is to jump to the Right to Buy section and bypass the Private section
                $('.question:visible:first').fadeOut(function(){
                $('#q2b').fadeIn(); });
        }
        else { //else it will carry on through the Private section
                $('.question:visible:first').fadeOut(function(){
                $(this).next('.question:hidden').fadeIn('slow');
                                                              });
        }
        quiz_answers = quiz_answers + " " + id; //add the id of clicked label onto the variable 
    });

    $('.gotoForm1').click(function(){
        change_form(); 
        $('#msm-form_wrapper').load(root+'/msm_form1.php');//open the contact form
        $('input[name="answers"]').val(quiz_answers);
        });

    $('.gotoForm2').click(function(){
        change_form();
        $("#msm-form_wrapper").load(root+'/msm_form2.php');//open the contact form
        $('input[name="answers"]').val(quiz_answers);
       });

    $('.gotoSorry').click(function(){
        change_form();
        $("#msm-form_wrapper").load(root+'/sorry.php');//open the contact form
        $('input[name="answers"]').val(quiz_answers);
       });

function change_form() {
    $('#quiz_wrapper').hide();
    $('#msm-form_wrapper').show();
};

$('.close, .backdrop').click(function(){
    quiz_answers = "Answers: "; //reset quiz_answers if the user closes the contact form before submitting
}); 
```

最后是加载文件中包含的内容的示例：

```
<form id="msm_form1" method="POST" action="/test/sapphire/contact-form-handler.php" class="msm_form">
<h1>Sorry...</h1>
<p class="sorry">It's unlikely that we can help you this time, however if you would like someone to call you back please fill in the form below.</p>
    <fieldset class="plain sorry">
        <ul>
            <li><label for='firstname'>First Name:</label><input type="text" name="firstname" id="input-firstname"></li>
            <li><label for='lastname'>Last Name:</label><input type="text" name="lastname"></li>
            <li><label for='contact'>Contact Number:</label><input type="text" name="contact"></li>
            <li><label for='email'>Email:</label><input type="text" name="email"></li>
            <li><label for='comments' class="comments">Comments:</label><textarea name="comments"></textarea></li>
            <input type="hidden" name="page" value="Sorry Form" />
            <input type="hidden" name="answers" value="" />
            <li class="submit-label">Send your message<button type="submit" class="msm-form-submit"></button></li>
        </ul>
</fieldset>
</form> 
```

我可以使用 alert('quiz_answers'); 在任何阶段并获得正确的结果，它只是不会将该结果放入表单中。

我尝试了各种方法，例如在名为“answers”的输入中添加一个 ID，然后使用 $('#answers').val(quiz_answers);

但这也没有用。在测试中，我无法将任何内容添加到任何表单输入中，我认为这可能是由于我将额外内容加载到 div 中的方式。更改该方法如果有人有任何建议，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:52:47.423

如果您尝试设置，`<input type="hidden" name="answers" value="" />`则 using`$('#answers').val(quiz_answers);`将不起作用，因为您没有为此字段定义 id。

您可以尝试执行以下操作之一：

```
<input type="hidden" id="answersVal" name="answers" value="" /> 
```

然后使用`$('#answersVal').val(quiz_answers);`

或者：

```
 <input type="hidden" class="answersVal" name="answers" value="" /> 
```

然后使用`$('.answersVal').val(quiz_answers);`

# amazon-s3 - S3 签名 URL 和分段上传

> ID：10299193
> 
> 赞同：1
> 
> 时间：2012-04-24T13:45:16.053
> 
> 标签：amazon-s3, amazon-web-services, jets3t

我正在使用签名 URL 和 Jets3t 库访问 S3。我已经在 inputstream 上构建了一个 cipherStream，以便在上传过程中即时进行加密。

我可以使用分段上传功能，将文件分成多个部分并并行上传到 S3。

Jets3t 是否提供任何支持来处理此类案件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T04:31:07.687

您可以使用多线程[ThreadedS3Service](http://jets3t.s3.amazonaws.com/api/org/jets3t/service/multi/s3/ThreadedS3Service.html)类作为您的服务对象。它有一个方法[multipartStartUploads](http://jets3t.s3.amazonaws.com/api/org/jets3t/service/multi/s3/ThreadedS3Service.html#multipartStartUploads%28java.lang.String,%20java.util.List%29) (java.lang.String bucketName, java.util.List objects) 完全符合我的要求。

# iphone - 强（在 LLVM 中）和保留（在 GCC 中）有什么区别？

> ID：10299200
> 
> 赞同：7
> 
> 时间：2012-04-24T13:45:44.200
> 
> 标签：iphone, ios, ios4

strong（在 LLVM 编译器中）和 retain（在 GCC 编译器中）有什么区别？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T14:07:15.117

`strong``retain`是 iOS 5 自动引用计数 (ARC) 中的一项新功能，其行为与iOS 4 中的相同[。参考文章。](http://jonathanhui.com/ios-5-programming-xcode)

另外，请查看另一个 SO 问题：[@property 与 ARC 的定义：强还是保留？](https://stackoverflow.com/questions/7796476/property-definitions-with-arc-strong-or-retain)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-24T14:03:30.830

strong 是与 arc（自动引用计数）一起引入的新关键字。如果你搜索谷歌，有大量关于它的文章，包括这篇[http://cupsofcocoa.com/2011/11/27/the-jungle-part-4-automatic-reference-counting/](http://cupsofcocoa.com/2011/11/27/the-jungle-part-4-automatic-reference-counting/)

# php - 带有键的数组的 Twig for 循环

> ID：10299202
> 
> 赞同：170
> 
> 时间：2012-04-24T13:45:47.043
> 
> 标签：php, arrays, loops, twig

我使用 Twig，并且我有一个带有如下键的数组：

```
array[1] = "alpha"
array[2] = "bravo"
array[3] = "charlie"
array[8] = "delta"
array[9] = "echo" 
```

我想在循环中获取密钥`(1,2,3,8,9)`和内容`(alpha, bravo, charlie, delta, echo)`以获取该数组的所有值。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：353
> 
> 时间：2012-04-24T14:00:33.407

我找到了答案：

```
{% for key,value in array_path %}
    Key : {{ key }}
    Value : {{ value }}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2012-04-24T13:50:51.577

标签上的 SensioLab 页面中有这个示例`for`：

```
<h1>Members</h1>
<ul>
    {% for key, user in users %}
        <li>{{ key }}: {{ user.username|e }}</li>
    {% endfor %}
</ul> 
```

[http://twig.sensiolabs.org/doc/tags/for.html#iterating-over-keys](http://twig.sensiolabs.org/doc/tags/for.html#iterating-over-keys)

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2019-05-02T04:24:32.410

这些是 Twig 框架中一维和二维数组的扩展操作（例如，排序、反向）：

## 一维阵列

### 没有键排序和反向

```
{% for key, value in array_one_dimension %}
    <div>{{ key }}</div>
    <div>{{ value }}</div>
{% endfor %} 
```

* * *

### 键排序

```
{% for key, value in array_one_dimension|keys|sort %}
    <div>{{ key }}</div>
    <div>{{ value }}</div>
{% endfor %} 
```

* * *

### 键排序和反转

```
{% for key, value in array_one_dimension|keys|sort|reverse %}
    <div>{{ key }}</div>
    <div>{{ value }}</div>
{% endfor %} 
```

* * *

## 二维阵列

### 没有键排序和反向

```
{% for key_a, value_a in array_two_dimension %}
    {% for key_b, value_b in array_two_dimension[key_a] %}
        <div>{{ key_b }}</div>
        <div>{{ value_b }}</div>
    {% endfor %}
{% endfor %} 
```

* * *

### 外部数组的键排序

```
{% for key_a, value_a in array_two_dimension|keys|sort %}
    {% for key_b, value_b in array_two_dimension[key_a] %}
        <div>{{ key_b }}</div>
        <div>{{ value_b }}</div>
    {% endfor %}
{% endfor %} 
```

* * *

### 外部和内部数组的键排序

```
{% for key_a, value_a in array_two_dimension|keys|sort %}
    {% for key_b, value_b in array_two_dimension[key_a]|keys|sort %}
        <div>{{ key_b }}</div>
        <div>{{ value_b }}</div>
    {% endfor %}
{% endfor %} 
```

* * *

### 外部数组的键排序和内部数组的键排序和反转

```
{% for key_a, value_a in array_two_dimension|keys|sort %}
    {% for key_b, value_b in array_two_dimension[key_a]|keys|sort|reverse %}
        <div>{{ key_b }}</div>
        <div>{{ value_b }}</div>
    {% endfor %}
{% endfor %} 
```

* * *

### 外部数组的键排序和反转以及内部数组的键排序

```
{% for key_a, value_a in array_two_dimension|keys|sort|reverse %}
    {% for key_b, value_b in array_two_dimension[key_a]|keys|sort %}
        <div>{{ key_b }}</div>
        <div>{{ value_b }}</div>
    {% endfor %}
{% endfor %} 
```

* * *

### 外部和内部数组的键排序和反转

```
{% for key_a, value_a in array_two_dimension|keys|sort|reverse %}
    {% for key_b, value_b in array_two_dimension[key_a]|keys|sort|reverse %}
        <div>{{ key_b }}</div>
        <div>{{ value_b }}</div>
    {% endfor %}
{% endfor %} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-10-29T04:57:02.460

我猜你想做“迭代键和值”

[正如这里](http://twig.sensiolabs.org/doc/tags/for.html)的文档所说，只需在您想要的变量中添加“|keys”，它就会神奇地发生。

```
{% for key, user in users %}
    <li>{{ key }}: {{ user.username|e }}</li>
{% endfor %} 
```

在询问之前搜索永远不会受到伤害:)

# ruby-on-rails - 如何锁定rails中的操作，以便只有一个用户可以在不使用数据库的情况下访问它

> ID：10299212
> 
> 赞同：0
> 
> 时间：2012-04-24T13:46:13.503
> 
> 标签：ruby-on-rails

我有这种奇怪的情况，我想一次将一个操作限制为一个用户而不使用任何数据库？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:55:14.460

也许你可以使用类变量。类变量不仅适用于一个实例，而且在类的每个实例中都是相同的。

```
def do_something
  if @@locked
    render text: "Sorry, somebody else working here."
  else
    @@locked = true

    # do the stuff you need to do here

    @@locked = false
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T14:00:44.090

```
require FileUtils
def lockable_action
  if File.exists? "/tmp/lock"
     # sorry, I'm locked
  else
     File.open("/tmp/lock","w") {|f| f.write("1")
     # do your thing
     FileUtils.rm "/tmp/lock"
  end
endk 
```

# perl - 搜索模式未在 Perl 中终止

> ID：10299213
> 
> 赞同：1
> 
> 时间：2012-04-24T13:46:14.190
> 
> 标签：perl

我一直在尝试调试此搜索模式未终止错误，但似乎无法找到（我猜我的 for each 循环）它未终止的位置？我的代码底部的最后一行是第 160 行。任何人都可以给我任何关于我的代码有什么问题的提示吗？我正在尝试打印选择结果中的每个标题及其每一行中的每个数据，并将其打印在 CGI 页面上。

C:\xampp\cgi-bin>perl create_report.cgi 搜索模式未在 create_report.cgi 第 160 行终止。

```
foreach $rpt_sel_output(@desc_origin)
{
($rptid, $servid, $rptcat_id, $desc, $remail_add, $remail_info, $ent_usr, $ent_dte, $up_usr, $up_dte, $fav)=split(",",$rpt_sel_output);
if($rptid eq 'ReportID') #header rows
{
print"<tr>/n";
print"<th>$rptid</th>";
print"<th>$servid</th>";
print"<th>$rptcat_id</th>";
print"<th>$desc</th>";
print"<th>$remail_add</th>";
print"<th>$remail_info</th>";
print"<th>$ent_usr</th>";
print"<th>$ent_dte</th>";
print"<th>$up_usr</th>";
print"<th>$up_dte</th>";
print"<th>$fav</th>";
print"<tr/>/n";
print"</table>/n";
next;
}
print"<tr>/n";# data from select that was outputed
print"<td>$rptid</td>";
print"<td align 'right'> $servid</td>/n";
print"<td align 'right'> $rptcat_id</td>/n";
print"<td align 'right'> $desc</td>/n";
print"<td align 'right'> $remail_add</td>/n";
print"<td align 'right'> $remail_info</td>/n";
print"<td align 'right'> $ent_usr</td>/n";
print"<td align 'right'> $ent_dte</td>/n";
print"<td align 'right'> $up_usr</td>/n";
print"<td align 'right'> $up_dte</td>/n";
print"<td align 'right'> $fav</td>/n";
print"<tr/>/n";
}
}
print"</table>/n";

print"<<FOOTER/n"; 
     </body>
print</html>FOOTER; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T13:59:46.827

我认为您正在尝试进行 heredoc 样式的引用，但它应该如下所示：

```
print <<FOOTER;
</body>
</html>
FOOTER 
```

为您节省大量`print`语句；) 如果您需要变量插值，请将 heredoc 结束标记放在双引号 ( `print <<"FOOTER";`) 中。单引号可以防止插值（正如@daxim 所指出的那样）。有关 heredoc 的更多信息，请参阅[perlop](http://perldoc.perl.org/perlop.html#Quote-Like-Operators)或 JFGI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T13:48:34.757

您只是错过了打印...不是吗？你应该用这个来完成你的脚本：

```
print"<FOOTER />\n"; 
print"</body>";
print "</html>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T13:48:56.897

您在底部的那些打印语句周围缺少双引号。它们应该如下所示：

```
print"<<FOOTER/n"; 
print "</body>";
print "</html>FOOTER"; 
```

如果你还没有，你应该使用带有语法高亮的编辑器。他们清楚地指出了这样的问题。

错误谈论搜索模式的原因是因为它看到了一个`/`字符，该字符开始定义正则表达式（或搜索模式）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T13:49:18.423

这是什么 ？

```
</body>
print</html>FOOTER; 
```

可能这就是你的错误所在..

# t4 - 在 Visual Studio 11 Beta 中使用 T4 模板

> ID：10299214
> 
> 赞同：1
> 
> 时间：2012-04-24T13:46:15.910
> 
> 标签：t4, visual-studio-2012

我正在尝试在 VS 11 Beta 中加载 VS 2010 解决方案。当我尝试运行我的 T4 模板时，我收到此错误：

> 错误 1 ​​无法解析文件的包含文本：T4Toolbox.tt

Visual Studio 11 Beta 中是否已经支持 T4 模板？我发现这篇[文章](http://blogs.msdn.com/b/garethj/archive/2012/04/03/what-s-new-with-t4-in-visual-studio-11-beta.aspx)表明我可以使用 T4 模板...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T17:33:04.293

测试版完全支持 T4，但 T4Toolbox 不是 Microsoft 产品，它是一个附加组件。您需要获取特定于 Dev11 的版本。

# android - 有没有办法从另一个 android 应用程序获取 android 应用程序视图层次结构？

> ID：10299215
> 
> 赞同：3
> 
> 时间：2012-04-24T13:46:24.503
> 
> 标签：android, ui-automation

我正在研究在没有任何工作站连接的情况下在设备上运行 android 自动化的方法。

我的方法是这样的，我修改了猴子的源代码，并且能够启动 3rd 方应用程序（我没有源代码访问权限），我也可以将击键发送到应用程序。但现在我面临另一个问题，我需要访问一些 ui 元素的属性，例如获取按钮的文本以进行验证。

如何从我的应用程序中获取系统（或顶级活动）的层次结构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T13:57:58.900

There is a way, check out Robotium here: [http://code.google.com/p/robotium/](http://code.google.com/p/robotium/) It is open source, so you should be able to check out how they do it.

You don't need access to sources of the target app.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T13:49:04.330

不，没有办法做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-08T01:39:08.167

我将从查看层次结构开始：

[https://madcoda.com/2013/01/inspect-the-view-hierarchy-of-any-android-app/](https://madcoda.com/2013/01/inspect-the-view-hierarchy-of-any-android-app/) [https://developer.android.com/studio/profile/ddms.html](https://developer.android.com/studio/profile/ddms.html)

然后使用 Accessibility 类编写代码来访问它。 [http://www.apps4android.org/?p=3628](http://www.apps4android.org/?p=3628)

# javascript - 如何在 JavaScript/CoffeeScript 中合并数组？

> ID：10299216
> 
> 赞同：1
> 
> 时间：2012-04-24T13:46:27.820
> 
> 标签：javascript, null, coffeescript, null-coalescing-operator

[合并一组静态项目](https://stackoverflow.com/questions/476436/null-coalescing-operator-for-javascript)很容易：

```
var finalValue = configValue || "default"; # JavaScript
finalValue = configValue ? "default" # CoffeeScript 
```

但是有没有一种简单的方法来**合并一个未知长度的数组**？我能想到的最简单的是这个（CoffeeScript）：

```
coalesce = (args) -> args.reduce (arg) -> arg if arg?
coalesce [1, 2] # Prints 1 
```

这对于简单的列表很好，但是

1.  理想情况下`coalesce`应该迭代`arguments`，但它不支持`reduce`，并且
2.  如果数组包含函数，您可能希望返回它们的*返回值*而不是函数本身（这是我的用例）。

基于 Guffa 的解决方案，这里有一个 CoffeeScript 版本：

```
coalesce = (args) -> args[0]() ? coalesce args[1..] 
```

测试`coffee`：

```
fun1 = ->
  console.log 1
  null
fun2 = ->
  console.log 2
  2
fun3 = ->
  console.log 3
  3
coalesce [fun1, fun2, fun3] 
```

印刷

```
1 # Log
2 # Log
2 # Return value 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T13:59:17.160

你可以这样做：

```
function coalesce(arr) {
  if (arr.length == 0) return null;
  var v = arr[0];
  v = (typeof v == "function" ? v() : v);
  return v | coalesce(arr.slice(1));
} 
```

例子：

```
var finalValue = coalesce([ null, null, function(){ return null; }, 5 ]);
// finalValue is now 5 
```

# wcf - 如何删除或排除 WCF 添加的未使用的架构？

> ID：10299217
> 
> 赞同：8
> 
> 时间：2012-04-24T13:46:32.007
> 
> 标签：wcf, wsdl

我在 Visual Studio 中使用 WCF 创建了一个 Web 服务，当查看生成的 WSDL 时，它包含对[http://schemas.microsoft.com/2003/10/Serialization](http://schemas.microsoft.com/2003/10/Serialization)的引用，其中包含很多类型规范。我不使用任何这些规范。有谁知道为什么 WCF 添加这个以及是否有任何方法可以摆脱它？

在我的服务上使用 singleWsdl 参数时，添加到我的 wsdl 的 xml 如下所示：

```
<xs:schema xmlns:tns="http://schemas.microsoft.com/2003/10/Serialization/" attributeFormDefault="qualified" elementFormDefault="qualified" targetNamespace="http://schemas.microsoft.com/2003/10/Serialization/" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="anyType" nillable="true" type="xs:anyType" />
  <xs:element name="anyURI" nillable="true" type="xs:anyURI" />
  <xs:element name="base64Binary" nillable="true" type="xs:base64Binary" />
  <xs:element name="boolean" nillable="true" type="xs:boolean" />
  <xs:element name="byte" nillable="true" type="xs:byte" />
  <xs:element name="dateTime" nillable="true" type="xs:dateTime" />
  <xs:element name="decimal" nillable="true" type="xs:decimal" />
  <xs:element name="double" nillable="true" type="xs:double" />
  <xs:element name="float" nillable="true" type="xs:float" />
  <xs:element name="int" nillable="true" type="xs:int" />
  <xs:element name="long" nillable="true" type="xs:long" />
  <xs:element name="QName" nillable="true" type="xs:QName" />
  <xs:element name="short" nillable="true" type="xs:short" />
  <xs:element name="string" nillable="true" type="xs:string" />
  <xs:element name="unsignedByte" nillable="true" type="xs:unsignedByte" />
  <xs:element name="unsignedInt" nillable="true" type="xs:unsignedInt" />
  <xs:element name="unsignedLong" nillable="true" type="xs:unsignedLong" />
  <xs:element name="unsignedShort" nillable="true" type="xs:unsignedShort" />
  <xs:element name="char" nillable="true" type="tns:char" />
  <xs:simpleType name="char">
    <xs:restriction base="xs:int" />
  </xs:simpleType>
  <xs:element name="duration" nillable="true" type="tns:duration" />
  <xs:simpleType name="duration">
    <xs:restriction base="xs:duration">
      <xs:pattern value="\-?P(\d*D)?(T(\d*H)?(\d*M)?(\d*(\.\d*)?S)?)?" />
      <xs:minInclusive value="-P10675199DT2H48M5.4775808S" />
      <xs:maxInclusive value="P10675199DT2H48M5.4775807S" />
    </xs:restriction>
  </xs:simpleType>
  <xs:element name="guid" nillable="true" type="tns:guid" />
  <xs:simpleType name="guid">
    <xs:restriction base="xs:string">
      <xs:pattern value="[\da-fA-F]{8}-[\da-fA-F]{4}-[\da-fA-F]{4}-[\da-fA-F]{4}-[\da-fA-F]{12}" />
    </xs:restriction>
  </xs:simpleType>
  <xs:attribute name="FactoryType" type="xs:QName" />
  <xs:attribute name="Id" type="xs:ID" />
  <xs:attribute name="Ref" type="xs:IDREF" />
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:35:00.253

也许现在为时已晚，但我遇到了这个问题并且能够解决它。我想删除它的原因是因为我在 Java 和 RPG 中都生成客户端，并且这些`wsdl2java`工具`wsdl2rpg`会基于该模式生成大而丑陋的数据结构。

就我而言，这是因为我正在使用`DataContract`序列化程序，而我正在序列化的一些对象的类型成员没有该`[DataContract]`属性。为了使额外的模式消失，一切都被序列化，一直到类型树需要具有该属性。

每当服务合同上有一个继承的公共成员时，它也会出现这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:05:50.713

我同意没有必要删除它。它也被使用了很多次，而您对此一无所知。更改默认 wsdl 生成的方法是实现 IWsdlExportExtension：

[http://msdn.microsoft.com/en-us/library/system.servicemodel.description.iwsdlexportextension.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.description.iwsdlexportextension.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T14:22:43.883

microsoft 的 WSDL 实现的 XSD 定义导入了这个命名空间（请参阅[此处](http://msdn.microsoft.com/en-us/library/ff386135%28v=office.12%29.aspx)）。

为什么要删除它？

# email - Drupal 7 是否有一个模块可以为所有用户重置密码

> ID：10299219
> 
> 赞同：3
> 
> 时间：2012-04-24T13:46:33.910
> 
> 标签：email, drupal-7

Drupal 7 是否有一个模块可以为所有用户重置密码。同时它必须向他们发送带有新密码甚至更好的电子邮件的电子邮件，以便他们自己创建新密码。

我发现了一些模块，但没有做我需要的。例如[http://drupal.org/project/account_reminder](http://drupal.org/project/account_reminder)

我开始认为我必须自己写一个。也许结合答案 [https://drupal.stackexchange.com/questions/27768/how-can-i-programmatically-reset-a-users-password](https://drupal.stackexchange.com/questions/27768/how-can-i-programmatically-reset-a-users-password)和模块[http://drupal.org/project/account_reminder](http://drupal.org/project/account_reminder)

还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-28T09:42:16.150

我会添加一个答案，因为这个问题出现在谷歌搜索大规模密码重置中

模块批量密码更改模块[https://www.drupal.org/project/mass_password_change](https://www.drupal.org/project/mass_password_change)可以满足您的需求。

此模块添加视图批量操作操作以重置您可以在自定义视图或管理员视图中使用的选定用户的密码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T06:53:49.320

你可以看看：[http ://drupal.org/project/force_password_change](http://drupal.org/project/force_password_change)

我尚未测试，但描述似乎定义了您的需求。

希望有帮助，

干杯，

# regex - 如何创建正则表达式以从代码中获取所有函数

> ID：10299222
> 
> 赞同：0
> 
> 时间：2012-04-24T13:46:37.140
> 
> 标签：regex

我的正则表达式有问题。我需要在文本中找到所有功能。我有这个正则表达式`\w*\([^(]*\)`。它工作正常，直到文本不包含没有函数名称的括号。例如对于这个字符串`'hello world () testFunction()'`，它返回`()`and `testFunction()`，但我只需要`testFunction()`. 我想在我的 c# 应用程序中使用它来解析传递给我的方法字符串。有谁能够帮我？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T13:57:45.237

编程语言具有层次结构，这意味着在一般情况下它们不能被简单的正则表达式解析。如果您想编写始终有效的正确代码，则需要使用 LR 解析器。如果您只是想应用一个可以获取大多数功能的 hack，请使用以下内容：

```
\w+\([^)]*\) 
```

但请记住，这在某些情况下会失败。例如，它无法区分函数定义（签名）和函数调用，因为它不查看上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T14:05:03.130

`(\w+)\(`

正则表达式组将具有没有任何括号的变量名称，如果需要，您可以稍后添加它们，我想您不需要参数。

如果您确实需要参数，请使用：

`\w+\(.*\)`

对于贪婪的正则表达式（它将匹配嵌套函数调用）
或...

`\w+\([^)]*\)`

对于非贪婪的正则表达式（不匹配嵌套函数调用，将仅匹配内部函数调用）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T13:51:10.297

更改`*`为`+`（如果它存在于您的正则表达式实现中，否则执行`\w\w*`）。这将确保`\w`匹配*一次或*多次（而不是您当前拥有的零次或多次）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T13:52:42.900

尝试`\w+\([^(]*\)`

这里我将\w* 更改为\w+。这意味着匹配将需要包含**至少**一个文本字符。

希望有帮助

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-24T13:53:01.090

这在很大程度上取决于“函数名”的定义。例如，根据您的描述，您只想过滤掉“空”名称，而不希望找到所有有效名称。

如果您当前的解决方案在很大程度上已经足够，并且您对这个空名称有疑问，那么请尝试将 * 更改为 +，在括号前至少需要一个单词字符。

```
\w+([^(]*) 
```

或者

```
\w\w*([^(]*) 
```

取决于您的正则表达式应用程序的语法。

# android - 坚持双向关系ormlite

> ID：10299223
> 
> 赞同：1
> 
> 时间：2012-04-24T13:46:39.343
> 
> 标签：android, ormlite

我有这些课程：

```
public class AllegationContent {

    @DatabaseField(generatedId = true)
    protected long id;

    @DatabaseField(canBeNull = true, foreign = true)
    private AllegationItem allegationItem;

    @DatabaseField()
    protected String content;
    ...
} 
```

和：

```
public class AllegationItem {
   @DatabaseField(generatedId = true)
    protected long id;

    @ForeignCollectionField(eager = false)
    protected ForeignCollection<AllegationContent> allegationContent;
    ...
} 
```

我怎样才能坚持两者？我正在尝试这个：

```
 allegationContentDao = getAllegationContentDao();   
    AllegationContent allegationContent = new AllegationContent(); 
    allegationContent.setContent("allegation content");     
    allegationContentDao.create(allegationContent);

    allegationItemDao = getAllegationItemDao();
    AllegationItem allegationItem = new AllegationItem();
    AllegationContent allegationContent2 = allegationContentDao.queryForSameId(allegationContent);  //is that wrong?
    allegationItem.getAllegationContent().add(allegationContent2);
    allegationItemDao.create(allegationItem); 
```

但我收到了这个错误：

> 04-24 10:41:57.128: 错误/AndroidRuntime(802): java.lang.RuntimeException: 无法启动活动 ComponentInfo{br.com.project/br.com.project.DaoTestActivity}: java.lang.NullPointerException

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:13:26.663

我解决了。该表无法创建，因为没有属性，只有 id（还有什么问题）。NPE 发生是因为 getAllegationContent 返回 null，所以首先我需要创建一个 ForeignCollection 列表，使用 setAllegationContent 设置然后获取。

# asp.net-mvc - 对 ASP.NET MVC4 有什么部署建议吗？

> ID：10299227
> 
> 赞同：2
> 
> 时间：2012-04-24T13:46:46.787
> 
> 标签：asp.net-mvc, deployment, visual-studio-2012

Phil Haack 关于 MVC3 部署的开创性帖子 (http://haacked.com/archive/2011/05/25/bin-deploying-asp-net-mvc-3.aspx) 似乎不适用于 VS11 中的 MVC4。VS11 中没有 Add Deployable Items 上下文菜单项。有没有人在 VS11 中部署 MVC4 的建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T13:59:26.477

“Add Deployable Items”菜单项实际上只是将程序集标记为“Copy Local = true”的一种便捷方式。

我在 VS10 SP1 之前所做的是：

1) 创建一个本地 /lib/ 文件夹并将 MVC DLL 放在那里。（我认为 Haack 的帖子包含您需要的完整列表）

2) 在“属性”窗口中将每个标记为“Copy Local = true”。这告诉 Visual Studio 始终将程序集复制到发布目录中，即使它们存在于 GAC 中

3) 确保将 DLL 部署到 Web 服务器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T03:15:52.860

实际上，在 VS11 中不需要“添加可部署项目”上下文菜单。该项目从一开始就已经是可部署的，您无需执行任何操作即可部署所需的 dll。它们会在您发布时自动包含在内。

有关详细信息，请参见此处：

[Visual Studio 11 beta 是否缺少“添加可部署程序集”菜单选项？](https://stackoverflow.com/questions/9587355/is-visual-studio-11-beta-missing-the-add-deployable-assemblies-menu-option)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-14T18:16:09.203

只需安装 ASP.NET MVC 4 nuget 包。[http://nuget.org/packages/Microsoft.AspNet.Mvc](http://nuget.org/packages/Microsoft.AspNet.Mvc)

# javascript - Javascript 文本框

> ID：10299230
> 
> 赞同：-3
> 
> 时间：2012-04-24T13:46:50.510
> 
> 标签：javascript, visual-studio

您好，我已经使用 java 脚本插入了一个文本框，旁边是删除按钮符号。

现在我必须对该文本框实现一些逻辑来保存文本读取的数据。请你能建议我，这怎么可能？

```
testTypeNode.Text = testTypeNode.Text & "" & _
    " <img src=""../images/delete_16x.ico""" & _
    " style=""text-align:bottom; cursor:pointer;"" alt=""Delete TestType""" & _
    " title=""Delete TestType"" onclick=""javascript:if(confirm('Are you sure you want to delete? Any running tests will be aborted!'))" & _
    " {" & ClientScript.GetPostBackEventReference(btnDeleteTestType, "" & sequenceNode.Value.ToString & _
    WordSeparationChar & testTypeNode.Value.ToString & "") & ";};"" />" & _
    " <input type = ""text"" id = ""txtExperimentalStressdays"" name =""ExperimentalStressdays"" size = ""4"" title=""Please enter the Experimental Stressdays"" javascript:onfocusdown(/>" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:22:52.480

好的。我会在这里大胆猜测。
将此代码复制到**page.html**并告诉我们您是否正在寻找类似的内容。

```
<html>

<head>
    <script src="http://code.jquery.com/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(window).load(function(){
            $('#btncopy').on('click', function(){
                $('#txt2').val( $('#txt1').val() );
            });

            $('#btndelete').on('click', function(){
                $('#txt1').text('');
            });
        });
    </script>
</head>

<body>
<p>
    <div id="divform">
        <form class="myform">
            <textarea id="txt1">Here is the text the you want to copy.</textarea> 
        </form>
        <button id="btndelete">delete</button>
        <button id="btncopy">copy</button>
    </div>
</p>
<p>
    <div id="divclone">
        clones: 
        <form id="formclone">
            <textarea id="txt2">The text will be copied here.</textarea> 
        </form>
    </div>
</p>
</body>

</html> 
```

## 编辑

刮那个。我刚看到你的评论。

> Amit Bhargava，我想从文本框中读取用户输入的文本并将其保存到数据库中。请帮忙？

# css - IE7 中是否有对“继承”的 CSS 支持？

> ID：10299242
> 
> 赞同：0
> 
> 时间：2012-04-24T13:47:31.937
> 
> 标签：css, internet-explorer-7

有没有办法在 IE7 中为“display:inherit”获得 CSS 支持？

我尝试使用[ie7.js](http://code.google.com/p/ie7-js/)但它似乎没有帮助......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T13:52:18.707

> 我尝试使用 ie7.js 但它似乎没有帮助......

当然，这不会有帮助。IE7.js 使 IE6 和更早版本的行为类似于 IE7。一个让浏览器像 IE7 一样工作的脚本对 IE7 本身并没有多大用处。

`inherit`仅从 IE8 开始支持。因此，您需要 IE8.js 而不是 IE7.js。

# jquery - 在 Html 文件中所做的更改不会反映在 MVC3 中

> ID：10299245
> 
> 赞同：0
> 
> 时间：2012-04-24T13:47:40.907
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3

我正在 MVC3 中开发一个应用程序。
我有一个名为 HobbyMasters 的表，其中包含以下字段：

```
HobbyName
InformationUrl 
```

在页面的左侧显示通过数据库获取的链接
，在右侧单击链接时会在 Iframe 中加载一个 url

我在视图中编写了以下代码：

```
//To fetch all the HobbyNames and display it as links:

  <ul>                       
 @foreach (var item in Model)
{
   <li >@Html.ActionLink(item.HobbyName, "Hobbies")
   </li>
}</ul>  
 <div>         
 <iframe id="iframe" frameborder="0" src="@Url.Content("~/HTML/Dancing.htm")" style="width: 100%; height: 700px;"></iframe>
                     </div> 
```

//Ajax函数在点击时加载url

```
 <script type="text/javascript">
  $(document).ready(function () {
      $('a').click(function (e) {
          e.preventDefault();
          var filename = $(this).text();
          var Hobbyurl = '@Url.Action("FetchUrlByHobbyName")';
          $.ajax({
              type: "POST",
              url: Hobbyurl,
              data: { data: filename },
              success: function (returndata) {
                  $('iframe').attr('src', returndata);     
              }
          });
      });
  });
  </script> 
```

//函数从数据库中获取url：

```
 [HttpPost]
    public ActionResult FetchUrlByHobbyName(string data)
    {
        HobbyMasters hobbymaster = new HobbyHomeService().FetchHobbyMasterByHobbyName(data);
        string url=hobbymaster.InformationUrl;
        if (HttpContext.Request.IsAjaxRequest())
            return Json(url);
        return View();
    } 
```

一切正常。但问题是我的 Html 页面没有反映我在其中所做的更改。
我复制了我的整个代码只是为了显示我是否在任何地方使用过任何会话信息 bcz 它正在发生..
即使我删除了文件仍然有相同的文件来...请建议我我做什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:58:19.530

您的问题不是很清楚哪个文件没有更新。如果我的 html 或脚本未更新，我会执行 Ctrl + F5(Refresh)。

# html - 如何将 div 定位在其父 div 的顶部

> ID：10299254
> 
> 赞同：1
> 
> 时间：2012-04-24T13:48:17.867
> 
> 标签：html, css

在页面的某处，如何使 div-a2 的位置高于 div-a1？当然，我不能在下面的布局中使 div-a2 高于 div-a1。

```
<div id=a>

<div id=a1> something here
</div>
<div id=a2> show this part first
</div>

</div> 
```

仍在寻找更好的解决方案。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:01:01.933

您可以使用纯 css 实现此目的。像这样写：

```
#a{
    display:-moz-box;
    display:box;
    display:-webkit-box;
    -moz-box-direction:reverse;
    box-direction: reverse;
    -moz-box-direction:reverse;
    -webkit-box-direction:reverse;  
    -moz-box-orient:vertical;
    -webkit-box-orient:vertical;
    box-orient:vertical;     
} 
```

' 检查这个[http://jsfiddle.net/ASVtx/1/](http://jsfiddle.net/ASVtx/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T13:55:08.797

您需要为元素提供绝对位置 css，然后根据每个喜欢的内容大小适当地定位它们：

```
#a1,#a2{position:absolute;}
#a2{  top: 0; }
#a1{  top: 200px;} 
```

或者，在父级内：

```
#a1,#a2{position:relative;}
#a2{  top: 0; }
#a1{  top: 200px;} 
```

或者，一个可能更好的替代方法是更改​​布局顺序（但我认为由于某种原因这是不可能的，但未说明）。

这是一个例子：http: [//jsfiddle.net/MarkSchultheiss/CRCvU/](http://jsfiddle.net/MarkSchultheiss/CRCvU/)

请参阅这个更新的示例，其中我使用 em 而不是 px 作为位置，给父级一个边框以便您看到它的范围，并在父级周围添加了一些东西。[http://jsfiddle.net/MarkSchultheiss/CRCvU/1/](http://jsfiddle.net/MarkSchultheiss/CRCvU/1/)

以防万一您想这样做，这里是执行此操作的 jQuery 代码：

```
var ah1 = $('#a1').height();
var ah2 = $('#a2').height();
var ah = $('#a').height();
var relpos = {float:"left",
    display: "inline-block",
    position: "relative",
    clear: "both"
};
$('#a').css({
    height: ah
});
$('#a1, #a2').css(relpos);
$('#a2').css('top', -ah1);
$('#a1').css('top', ah2); 
```

此处的工作脚本示例：http: [//jsfiddle.net/MarkSchultheiss/CRCvU/3/](http://jsfiddle.net/MarkSchultheiss/CRCvU/3/)

# javascript - jQuery拖放不起作用

> ID：10299256
> 
> 赞同：1
> 
> 时间：2012-04-24T13:48:24.743
> 
> 标签：javascript, jquery, drag-and-drop

我正在尝试开发一个简单的拖放“游戏”。简单来说，您所做的就是将各种项目拖放到一个区域中，它会根据拖动的项目说正确或错误。这是我到目前为止所拥有的，它根本不起作用，我不知道为什么。我对 JS 和 jQuery 的了解也有很多不足之处。

```
<script>
$(function() {
    $( "#draggable" ).draggable();
    $( "#wrong" ).draggable();

    $( "#droppable" ).droppable({    
        drop: function( event, ui ) {
            var currentId = $(this).attr('id');
            if (currentId == "draggable") {
                $( this )
                    .addClass( "highlight" )
                    .find( "p" )
                    .html( "Correct! :)" );
            } else {
                $( this )
                    .find( "p" )
                    .html( "Wrong! :(" );
            }
        }
    }); 
});
</script> 
```

现在我让它工作了，我需要更多可拖动图像的实例，但是当我添加更多时，已添加的新实例不起作用。

[http://jsfiddle.net/KcruJ/9/](http://jsfiddle.net/KcruJ/9/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T15:05:14.717

哈哈好吧，亚历克斯似乎锁定了这个。

有答案：http: [//jsfiddle.net/aGqHh/1/](http://jsfiddle.net/aGqHh/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T13:54:59.250

```
var currentId = $(this).attr('id');
if (currentId == "draggable")
    ... 
```

永远不会结果为真，因为`$(this) represents the droppable the draggable is dropped on. ui.draggable represents the draggable`[[1]](http://jqueryui.com/demos/droppable/#event-drop)

尝试：

```
var currentId = $(ui.draggable).attr('id');
if (currentId == "draggable")
    ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T14:00:43.987

这有效：http: [//jsfiddle.net/T6nu3/2/](http://jsfiddle.net/T6nu3/2/)

* * *

```
$(this).attr('id'); 
```

总会回来`droppable`的。您需要访问拖动的元素：

```
$(ui.draggable).attr('id'); 
```

查看[jQuery UI 文档](http://jqueryui.com/demos/droppable/.)以获取更多信息。

**代码：**

```
$(function() {
    $("#draggable").draggable();
    $("#wrong").draggable();

    $("#droppable").droppable({
        drop: function(event, ui) {
            var currentId = $(ui.draggable).attr('id');
            if (currentId == "draggable") {
                $(this).addClass("highlight").find("p").html("Correct! :)");
            } else {
                $(this).find("p").html("Wrong! :(");
            }
        }
    });
}); 
```

# c# - C# DECRYPT 使用 RSA DER 格式公钥的文件

> ID：10299262
> 
> 赞同：3
> 
> 时间：2012-04-24T13:48:38.203
> 
> 标签：c#, rsa

我看过很多问题，没有一个真正提供好的答案，或者如果他们尝试，他们会假设提出问题的人不是在问他实际上在问什么。只是为了记录，我不是在询问签名、加密或 PEM 文件！

就我而言，我将收到一个小文件的加密数据。它已使用 RSA 密钥对的私钥加密。

我可用的公钥是 ASN.1 格式的 DER 文件，它本身不是证书，也没有签名。

在 Java 中，这很容易，在 c# 中，据我所知，这是一场噩梦。X509Certificate2 声称“找不到对象”，当我尝试解析密钥的字节数组时。

密钥是使用以下 openSSL 命令生成的：

```
>openssl genrsa -out private_key.pem 2048

Generating RSA private key, 2048 bit long modulus
...........+++
....................................................................................................
...........................+++
e is 65537 (0x10001)

>openssl pkcs8 -topk8 -inform PEM -outform DER -in private_key.pem -out private_key.der -nocrypt

>openssl rsa -in private_key.pem -pubout -outform DER -out public_key.der
writing RSA key 
```

编辑：我正在尝试的代码：

```
private byte[] ReadBytesFromStream(string streamName)
{
    using (Stream stream = this.GetType().Assembly.GetManifestResourceStream(streamName))
    {
        byte[] result = new byte[stream.Length];
        stream.Read(result, 0, (int) stream.Length);
        return result;
    }
}

public void LoadPublicKey()
{
    byte[] key = ReadBytesFromStream("my.namespace.Resources.public_key.der");
    X509Certificate2 myCertificate;
    try
    {
        myCertificate = new X509Certificate2(key);
    }
    catch (Exception e)
    {
        throw new CryptographicException(String.Format("Unable to open key file. {0}", e));
    } 
} 
```

ReadBytesFromStream 方法确实返回正确的字节流，public_key.der 文件是嵌入式资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:29:19.740

只是为了擦亮这个。虽然下面的代码仍然有点混乱，但它似乎确实是我可以开始工作的。

我们不能在 Windows 中使用公钥解密消息的原因在这里解释：http: [//www.derkeiler.com/Newsgroups/microsoft.public.dotnet.security/2004-05/0270.html](http://www.derkeiler.com/Newsgroups/microsoft.public.dotnet.security/2004-05/0270.html)

接下来，您需要 c# 代码中的公钥模数和指数，在某个地方，无论是在文件中还是嵌入，这都不是问题。我确实使用 Base64 来包装二进制密钥。我放弃了生成 Windows 实际导入的密钥。此外，对于我所需要的，公钥将是一个嵌入式资源。

我遇到的最后一个问题是从密钥生成的模数在 Windows (c#) 上不起作用。这个 StackOverflow 帖子确实掌握了解决这个问题的关键，Windows 中的模数不能包含前导零。 [点网中的Android应用内计费验证收据（C#）](https://stackoverflow.com/questions/5605124/android-in-app-billing-verification-of-receipt-in-dot-netc)

从 Java 生成的模数不适用于 c#。使用该帖子中的*stripLeadingZeros*代码创建一个有效的公钥模数：

```
 private static byte[] stripLeadingZeros(byte[] a) {
    int lastZero = -1;
    for (int i = 0; i < a.length; i++) {
      if (a[i] == 0) {
        lastZero = i;
      }
      else {
        break;
      }
    }
    lastZero++;
    byte[] result = new byte[a.length - lastZero];
    System.arraycopy(a, lastZero, result, 0, result.length);
    return result;
  } 
```

对于初学者，这是我生成密钥文件的方式：

```
$ openssl genrsa -out private_key.pem 2048

$ openssl pkcs8 -topk8 -inform PEM -outform DER -in private_key.pem -out private_key.der -nocrypt

$ openssl rsa -in private_key.pem -pubout -outform DER -out public_key.der 
```

Java 代码：

```
package com.example.signing;

import java.io.BufferedOutputStream;
import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.FileReader;
import java.io.IOException;
import java.security.KeyFactory;
import java.security.PrivateKey;
import java.security.PublicKey;
import java.security.Signature;
import java.security.interfaces.RSAPrivateKey;
import java.security.interfaces.RSAPublicKey;
import java.security.spec.PKCS8EncodedKeySpec;
import java.security.spec.X509EncodedKeySpec;

import jcifs.util.Base64;

public class SigningExample {
    private static String PRIVATE_KEY_FILE = "private_key.der";
    private static String PUBLIC_KEY_FILE  = "public_key.der";

    /**
     * @param args
     */
    public static void main(String[] args) {
        SigningExample.sign();
    }

    private static void sign() {
        try {
            String text = new String(SigningExample.loadFromFile("message.xml"));
            String message = Base64.encode(text.getBytes());

            RSAPrivateKey privateKey = PrivateRSAKeyReader.getKeyFile(SigningExample.PRIVATE_KEY_FILE);
            RSAPublicKey publicKey = PublicRSAKeyReader.getKeyFile(SigningExample.PUBLIC_KEY_FILE);

            byte[] modulusBytes = publicKey.getModulus().toByteArray();
            byte[] exponentBytes = publicKey.getPublicExponent().toByteArray();

            modulusBytes = SigningExample.stripLeadingZeros(modulusBytes);

            String modulusB64 = Base64.encode(modulusBytes);
            String exponentB64 = Base64.encode(exponentBytes);

            System.out.println("Copy these two into your c# code:");
            System.out.println("DotNet Modulus : " + modulusB64);
            System.out.println("DotNet Exponent: " + exponentB64);

            // Testing
            byte[] signature = SigningExample.sign(message.getBytes(), privateKey, "SHA1withRSA");

            String signedMessage = message + "\n" + Base64.encode(signature);

            SigningExample.saveToBase64File("message.signed", signedMessage.getBytes());

            System.out.println("\nMessage  :\n" + signedMessage);

            String[] newkey = new String(SigningExample.loadFromBase64File("message.signed")).split("\\n");
            System.out.println("Verified : " + SigningExample.verify(newkey[0].getBytes(), publicKey, "SHA1withRSA", Base64.decode(newkey[1])));
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    private static byte[] stripLeadingZeros(byte[] a) {
        int lastZero = -1;
        for (int i = 0; i < a.length; i++) {
            if (a[i] == 0) {
                lastZero = i;
            } else {
                break;
            }
        }
        lastZero++;
        byte[] result = new byte[a.length - lastZero];
        System.arraycopy(a, lastZero, result, 0, result.length);
        return result;
    }

    private static byte[] sign(byte[] data, PrivateKey prvKey,
            String sigAlg) throws Exception {
        Signature sig = Signature.getInstance(sigAlg);
        sig.initSign(prvKey);
        sig.update(data, 0, data.length);
        return sig.sign();
    }

    private static boolean verify(byte[] data, PublicKey pubKey,
            String sigAlg, byte[] sigbytes) throws Exception {
        Signature sig = Signature.getInstance(sigAlg);
        sig.initVerify(pubKey);
        sig.update(data, 0, data.length);
        return sig.verify(sigbytes);
    }

    public static void saveToBase64File(String fileName, byte[] data) throws IOException {
        BufferedOutputStream out = new BufferedOutputStream(new FileOutputStream(fileName));

        try {
            String b64 = Base64.encode(data);
            int lineLength = 64;
            int idx = 0;
            int len = b64.length();

            while (len - idx >= lineLength) {
                out.write(b64.substring(idx, idx + lineLength).getBytes());
                out.write('\n');
                idx += lineLength;
            }
            out.write(b64.substring(idx, len).getBytes());
        } catch (Exception e) {
            throw new IOException("Unexpected error", e);
        } finally {
            out.close();
        }
    }

    public static byte[] loadFromBase64File(String fileName) throws IOException {
        BufferedReader br = new BufferedReader(new FileReader(fileName));

        try {
            StringBuffer sb = new StringBuffer();

            String buffer;

            while ((buffer = br.readLine()) != null) {
                sb.append(buffer);
            }

            return Base64.decode(sb.toString());
        } catch (Exception e) {
            throw new IOException("Unexpected error", e);
        } finally {
            br.close();
        }
    }

    public static void saveToFile(String fileName, byte[] data) throws IOException {
        BufferedOutputStream out = new BufferedOutputStream(new FileOutputStream(fileName));

        try {
            out.write(data);
        } catch (Exception e) {
            throw new IOException("Unexpected error", e);
        } finally {
            out.close();
        }
    }

    public static byte[] loadFromFile(String fileName) throws IOException {
        BufferedReader br = new BufferedReader(new FileReader(fileName));

        try {
            StringBuffer sb = new StringBuffer();

            String buffer;

            while ((buffer = br.readLine()) != null) {
                sb.append(buffer);
            }

            return sb.toString().getBytes();
        } catch (Exception e) {
            throw new IOException("Unexpected error", e);
        } finally {
            br.close();
        }
    }
}

class PrivateRSAKeyReader {

    public static RSAPrivateKey getKeyFile(String filename) throws Exception {

        File f = new File(filename);
        FileInputStream fis = new FileInputStream(f);
        DataInputStream dis = new DataInputStream(fis);
        byte[] keyBytes = new byte[(int) f.length()];
        dis.readFully(keyBytes);
        dis.close();

        return PrivateRSAKeyReader.generateKey(keyBytes);
    }

    public static RSAPrivateKey getKey(String base64) throws Exception {
        byte[] keyBytes = Base64.decode(base64);

        return PrivateRSAKeyReader.generateKey(keyBytes);
    }

    private static RSAPrivateKey generateKey(byte[] keyBytes) throws Exception {
        PKCS8EncodedKeySpec spec = new PKCS8EncodedKeySpec(keyBytes);
        return (RSAPrivateKey) KeyFactory.getInstance("RSA").generatePrivate(spec);
    }
}

class PublicRSAKeyReader {

    public static RSAPublicKey getKeyFile(String filename) throws Exception {

        File f = new File(filename);
        FileInputStream fis = new FileInputStream(f);
        DataInputStream dis = new DataInputStream(fis);
        byte[] keyBytes = new byte[(int) f.length()];
        dis.readFully(keyBytes);
        dis.close();

        return PublicRSAKeyReader.generateKey(keyBytes);
    }

    public static RSAPublicKey getKey(String base64) throws Exception {
        byte[] keyBytes = Base64.decode(base64);

        return PublicRSAKeyReader.generateKey(keyBytes);
    }

    private static RSAPublicKey generateKey(byte[] keyBytes) throws Exception {
        X509EncodedKeySpec spec = new X509EncodedKeySpec(keyBytes);
        return (RSAPublicKey) KeyFactory.getInstance("RSA").generatePublic(spec);
    }
} 
```

在 c# 中，此代码片段应该可以解决问题：

```
String signedMessage = ""; // load Base64 coded the message generated in Java here.

byte[] message = Convert.FromBase64String(signedMessage);
String messageString = Encoding.ASCII.GetString(message);

String[] lines = Regex.Split(messageString, "\n");

byte[] content = Convert.FromBase64String(lines[0]); // first line of the message were the content
byte[] signature = Convert.FromBase64String(lines[1]); // second line were the signature

RSACryptoServiceProvider rsaObj = new RSACryptoServiceProvider(2048);

//Create a new instance of the RSAParameters structure.
RSAParameters rsaPars = new RSAParameters();

rsaPars.Modulus = Convert.FromBase64String("insert your modulus revealed in the Java example here");
rsaPars.Exponent = Convert.FromBase64String("AQAB"); // Exponent. Should always be this.

// Import key parameters into RSA.
rsaObj.ImportParameters(rsaPars);

// verify the message
Console.WriteLine(rsaObj.VerifyData(Encoding.ASCII.GetBytes(lines[0]), "SHA1", signature)); 
```

代码使用：

```
using System.Security;
using System.Security.Cryptography;
using System.Security.Cryptography.X509Certificates;
using System.Text; 
```

我坦率地承认，将最终消息打包到另一层 Base64 有点过分，应该改变。

# c# - 从 .xaml.cs 文件设置 XAML 中对象的值

> ID：10299263
> 
> 赞同：0
> 
> 时间：2012-04-24T13:48:41.747
> 
> 标签：c#, windows-phone-7, xaml

我可以像这样在 XAML 中声明一个复选框

```
<CheckBox Content="Accepted" Height="71" Name="checkBox" /> 
```

当此屏幕加载时，我想检查与屏幕关联的数据并设置它是否选中该框，或者它未选中。

```
public TripDetails()
{
   string yesString = "YES";
    if (String.ReferenceEquals(meeting.accepted, yesString))
    {
        // set the checkbox
    }
    this.DataContext = this;
    InitializeComponent();
} 
```

我无法理解的是如何从我的对应 xaml.cs 文件中设置 XAML 中声明的复选框。

有人可以告诉我//设置复选框的位置。

非常感谢，-代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:50:00.197

除非我遗漏了什么......因为你已经将 CheckBox 命名为“ `checkBox`”，它应该只是

```
this.checkBox.IsChecked = !this.checkBox.IsChecked; 
```

# android - 尝试将存储在字符串中的时间（当它包含冒号时）转换为 int 值。

> ID：10299267
> 
> 赞同：-4
> 
> 时间：2012-04-24T13:48:49.353
> 
> 标签：android, type-conversion

当用户通过微调器输入时间并且该时间是 17:00 时，我想返回一个错误 Toast，现在我已在微调器中将 beginTime 声明为字符串，我需要将其转换回 Int 以便检查该值是否等于 17:00

```
 public void checkBeginTime()

 String begingTime = beginTimespinner.getText().toString();

   if (beginTime == 17:00)
   {
   Toast.etc
   }

   else 

   {
   add beginTime;
   } 
```

如果我尝试这样做，那么它将无法工作`:`，因为有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:52:31.963

```
 your_str = your_str.replace(":", ""); 

   your_int = Intger.parseInt(your_str); 
```

你最终得到一个唯一的整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T14:47:34.747

首先假设 beginTime 是一个字符串，那么您**永远不会**将字符串与 == 进行比较。您必须使用 .equals() 方法。（谷歌为什么不）。

在 Java 中，您可以这样做：

```
private void testVal(String beginTime) {
        String testVal = "17:00";
        if (testVal.equals(beginTime)){
            System.out.println("Matched " + beginTime);
            // Or whatever you want in Android, such as Toast
        }
        else{
            System.out.println("No match with " + beginTime);
            // Or whatever you want in Android, such as Toast
        }

    } 
```

您可以使用以下方法调用该方法：

```
String beginTime = "17:00"; // or in your case beginTimespinner.getText().toString();
test.testVal(beginTime); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T13:51:37.957

```
int MyInt=Integer.parseInt("17.00"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T18:42:41.857

假设您正在使用[Spinner](http://developer.android.com/reference/android/widget/Spinner.html)让用户输入时间，您是否考虑过使用[TimePicker](http://developer.android.com/reference/android/widget/TimePicker.html)或[TimePickerDialog](http://developer.android.com/reference/android/app/TimePickerDialog.html)来代替？

以下代码片段来自 Time Picker 教程。我只粘贴了相关方法来说明我的观点，但完整的教程可以在[这里](http://developer.android.com/resources/tutorials/views/hello-timepicker.html)找到：

```
public class HelloTimePickerActivity extends Activity {
private TextView mTimeDisplay;
private Button mPickTime;

static final int TIME_DIALOG_ID = 0;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // capture our View elements
    mTimeDisplay = (TextView) findViewById(R.id.timeDisplay);
    mPickTime = (Button) findViewById(R.id.pickTime);

    // add a click listener to the button
    mPickTime.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            showDialog(TIME_DIALOG_ID);
        }
    });

  // snip...
}

// the callback received when the user "sets" the time in the dialog
private TimePickerDialog.OnTimeSetListener mTimeSetListener = new TimePickerDialog.OnTimeSetListener() {
    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
        mHour = hourOfDay;
        mMinute = minute;
    }
};

@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case TIME_DIALOG_ID:
        return new TimePickerDialog(this, mTimeSetListener, mHour, mMinute, false);
    }
    return null;
    }
} 
```

如您所见，回调`onTimeSet()`以小时和分钟作为`int`值传递，便于您检查。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T13:56:48.227

很难理解你在问什么。将来，请在发布之前花一些时间来收集您的想法。

不过我会刺一下。

> “17:00”

是你所说的字符串。通常，在谈论 string -> int 转换时，最终目标很明确，即很容易理解您想要什么

> “15”-> 15；"-2" -> -2 // 等等

由于这个原因冒号很棘手，你想要 17 还是 1700？很明显很不一样。不过，您可以通过字符串操作来控制它。假设你想要 1700，你可以这样做：

```
String str = "17:00";
int StrAsInt = Integer.ParseInt(str.replace(":","")); 
```

或者对于 17，子字符串索引 0 到冒号的索引。关键是，您需要自己做一些腿工作才能将类似的东西转换为整数。

# c# - 用户凭据在 asp.net 网站中以明文形式发送

> ID：10299268
> 
> 赞同：1
> 
> 时间：2012-04-24T13:48:51.387
> 
> 标签：c#, php, asp.net

我在我的网站上运行审核，它显示“用户凭据以明文形式发送”

我的网站启用了表单身份验证，应该可以从任何地方访问它。

如何以加密格式发送密码？

SSL 是唯一的选择吗，我四处阅读，发现启用 Digest 身份验证也可以做到这一点，如果我在 IIS 中将 Basic 更改为 digest 有什么缺点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T13:50:12.870

使用[SSL](http://en.wikipedia.org/wiki/Transport_Layer_Security)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T14:06:53.727

> 并发现启用摘要式身份验证也可以做到这一点，如果我在 IIS 中将 Basic 更改为摘要式有什么缺点吗？

主要缺点是它不适用于 Forms 身份验证。摘要设置消除了仅为 Windows 身份验证发送纯文本用户名/密码。唯一适用于表单的 IIS 设置是“允许匿名访问”。

这是一个经过充分研究和讨论的话题。您需要 SSL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-12T08:56:51.917

您可能在客户端使用 md5 对其进行散列，但您没有将其传递给服务器，您显然仍在传递密码框中的任何内容。在发送之前在客户端上散列密码是一个坏主意，原因有很多。

# zend-framework - 在 Zend 装饰器中获取非翻译标签

> ID：10299280
> 
> 赞同：1
> 
> 时间：2012-04-24T13:49:21.763
> 
> 标签：zend-framework

我怎样才能得到非翻译标签`class Label extends \Zend_Form_Decorator_Label` ？当我试图把它变成“ `$this->getLabel()`”时，它已经被翻译成俄语了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:07:25.320

在调用 之前，您可以通过调用which 禁用`$this->getLabel()`该元素的翻译来禁用元素上的翻译器标志。`$element->setDisableTranslator(true)`

然后，当您调用`getLabel()`它时，检查该元素的翻译器是否已启用；如果启用，标签会被翻译然后返回，否则它会像你想要的那样在没有翻译的情况下返回。

# sql - SQL server 确定插入了哪一行？

> ID：10299284
> 
> 赞同：0
> 
> 时间：2012-04-24T13:49:29.593
> 
> 标签：sql, sql-server, sql-server-2005

我有一个 sql 查询，它在表中插入很多新行并更新很多旧行。
有没有办法确定插入的所有行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T13:58:00.473

在之前的 Stackoverflow 文章中发现了这一点： [如何插入多条记录并获取标识值？](https://stackoverflow.com/questions/95988/how-to-insert-multiple-records-and-get-the-identity-value)

以下是安迪欧文的：

使用 2005 年的输出子句：

```
DECLARE @output TABLE (id int)

Insert into A (fname, lname)
OUTPUT inserted.ID INTO @output
SELECT fname, lname FROM B

select * from @output 
```

现在您的表变量具有您插入的所有行的标识值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T13:53:59.497

嗨，你有没有尝试过类似执行

```
SELECT @@IDENTITY 
```

执行 INSERT 语句后？

看看[这个](http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T13:58:23.197

@@IDENTITY 已弃用，建议您使用 SCOPE_IDENTITY()

您还可以通过插入的表确定插入的项目

# truecrypt - TrueCrypt 在网络上安装驱动器

> ID：10299285
> 
> 赞同：0
> 
> 时间：2012-04-24T13:49:38.343
> 
> 标签：truecrypt

我的问题与在服务器上创建的 TrueCrypt 驱动器有关。我想将此驱动器安装在网络上的几台具有写访问权限的计算机上。为此，我在网络计算机上安装了 TrueCrypt 并安装了驱动器。

**问题**

它在询问密码后安装驱动器但触发写入错误。换句话说，它是只读的。

**到目前为止我尝试过的**

我查看了 truecrypt.com 上的文档，它显示有两种安装方法

1.  TrueCrypt 安装驱动器（在本地计算机上安装驱动器，具有只读访问权限）
2.  卸载驱动器（驱动器安装在服务器上并通过网络共享）

**我想要的是**

选项 2 似乎正在解决问题，但它不要求输入密码。它与网络上的任何共享文件夹相同，这使其安全性降低。因此，是否可以在使用 TrueCrypt 登录凭据进行身份验证后，通过写入访问权限在网络上安装驱动器。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:49:44.423

根据我在将 truecrypt 文件下载到本地计算机时所读到的内容（我自己没有尝试过），您应该能够将其挂载到本地机器上，并且会提示您输入密码。安装后，您应该能够写入或修改您心中的内容，然后将其保存到本地计算机的加密卷中。您将无法将更改保存到基于服务器的原始卷中，因为该文件是“只读的”。但是，您应该能够以不同的文件名将修改后的卷保存到服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-10T21:38:00.707

我做了什么：

1.  使用 VeraCrypt 安装 TrueCrypt 驱动器和 TrueCrypt 容器
2.  在共享设置中使用密码创建了驱动器和容器的 windows (samba) 和 mac (afp) 共享（无论您使用什么软件）

安装容器可以防止它被其他人直接打开容器覆盖。

# facebook - 如何判断 URL 是 Facebook 主页还是个人资料？

> ID：10299286
> 
> 赞同：1
> 
> 时间：2012-04-24T13:49:45.213
> 
> 标签：facebook, facebook-fql

我使用 FQL 来验证用户提交的 URL 是 Facebook 页面还是个人资料，如下所示：[验证 Facebook 页面 URL](https://stackoverflow.com/questions/4175081/validate-a-facebook-page-url)

这以前有效。当我发送一个像 facebook.com/zuck 或 facebook.com/cocacola 这样的 URL 时，它会返回一个带有 profile.php 或 /pages/ 的 normalized_url。现在，它只返回相同的 URL：例如 facebook.com/zuck。

这是 Facebook API 错误吗？或者还有其他方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T13:55:46.743

也许使用 Facebook Graph API 并寻找只有页面才有的属性。例如，可口可乐 API 返回（见下文）`likes`仅返回一个页面，您也可以查找`description`, `website`，`about`但`location`不要只依赖一个。相反，一个人会倾向于有一个`first_name`和`last_name`。统一使用这些来确定用户名是个人还是页面。

[http://graph.facebook.com/zuck](http://graph.facebook.com/zuck)

```
{
   "id": "4",
   "name": "Mark Zuckerberg",
   "first_name": "Mark",
   "last_name": "Zuckerberg",
   "link": "https://www.facebook.com/zuck",
   "username": "zuck",
   "gender": "male",
   "locale": "en_US"
} 
```

[http://graph.facebook.com/cocacola](http://graph.facebook.com/cocacola)

```
{
   "id": "40796308305",
   "name": "Coca-Cola",
   "picture": "http://profile.ak.fbcdn.net/hprofile-ak-snc4/174560_40796308305_2093137831_s.jpg",
   "link": "https://www.facebook.com/coca-cola",
   "likes": 41519873,
   "cover": {
      "cover_id": "10150682306963306",
      "source": "http://a7.sphotos.ak.fbcdn.net/hphotos-ak-snc7/s720x720/416803_10150682306963306_40796308305_9337341_812683101_n.jpg",
      "offset_y": 0
   },
   "category": "Food/beverages",
   "is_published": true,
   "website": "http://www.coca-cola.com",
   "username": "coca-cola",
   "founded": "1886",
   "description": "Created in 1886 in Atlanta, Georgia, by Dr. John S. Pemberton, Coca-Cola was first offered as a fountain beverage at Jacob's Pharmacy by mixing Coca-Cola syrup with carbonated water. \n\nCoca-Cola was patented in 1887, registered as a trademark in 1893 and by 1895 it was being sold in every state and territory in the United States. In 1899, The Coca-Cola Company began franchised bottling operations in the United States. \n\nCoca-Cola might owe its origins to the United States, but its popularity has made it truly universal. Today, you can find Coca-Cola in virtually every part of the world.",
   "about": "The Coca-Cola Facebook Page is a collection of your stories showing how people from around the world have helped make Coke into what it is today.",
   "location": {
      "latitude": 53.71282619,
      "longitude": -1.51214516
   },
   "checkins": 92,
   "talking_about_count": 383754
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:59:00.313

我面临同样的问题，我决定观看“is_published”或“likes”字段。

# sql - TSQL：如何在单个选择中使用可能为 null 或 int 的变量

> ID：10299289
> 
> 赞同：7
> 
> 时间：2012-04-24T13:49:48.593
> 
> 标签：sql, tsql

我的问题是我可以在一个语句中完成这两个选择的功能并摆脱 IF 吗？

```
DECLARE @recID INT;

--Case 1
SET @recID = null;
--Case 2
--SET @recID = 117;

IF @recID is null
BEGIN
    select * from myTable WHERE [myIDcolumn] is null    -- works when recID is null
END
ELSE
BEGIN
    select * from myTable WHERE [myIDcolumn] = @recID    -- works when recID is number
END 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T13:51:55.757

这个怎么样：

```
select *
from myTable
WHERE [myIDcolumn] = @recID or (@recID is null and [myIDcolumn] is null) 
```

If `@recID`is `null`，第一部分永远不会为真，但第二部分将是 if `[myIDcolumn]`is `null`，它涵盖了这种`null`情况。如果`@recID`is not `null`，第一部分将在适当时匹配（第二部分将被忽略）。所以这两种情况都包括在内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T13:52:17.830

您可以稍微不同地表达条件：

*   两者`@recID`和`[myIDcolumn]`必须是`null`, 或
*   `[myIDcolumn]`必须等于`@recID`

    select * from myTable WHERE ([myIDcolumn] 为 null AND @recID 为 null) 或 [myIDcolumn] = @recID

# database - 我应该选择哪种 NoSql 解决方案？

> ID：10299290
> 
> 赞同：0
> 
> 时间：2012-04-24T13:49:52.000
> 
> 标签：database, nosql, bigdata

我有一个分布在几十台服务器上的系统。它应该每秒执行大约 10000 次读取和写入。记录大小约为几KB。数据完整性不是很重要。我应该选择哪种 NoSql 解决方案？

谢谢！丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:54:16.417

嗯..这在很大程度上取决于您要存储的数据类型，您希望如何访问它等。

以下是最热门竞争者的比较：http: [//kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis](http://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis)

对于您的需求，如果数据完整性不是最重要的，您可能想尝试 Redis。它全都在内存中，使其闪电般快速，但具有持久性到磁盘......虽然它本身不是数据库，而是一个键/值存储，所以你必须考虑一些不同的方式要存储和检索数据，网上有很多很好的教程...

# c++ - C++ 中的外部：对于外部 VarX 变量：：错误 LNK2001：未解析的外部符号“unsigned int VarX”(?VarX@@3IA)

> ID：10299296
> 
> 赞同：1
> 
> 时间：2012-04-24T13:50:24.350
> 
> 标签：c++, visual-c++, linker, linker-errors, extern

作为我之前在 stackoverflow 中的问题的延续： [Getting LINK error : Extern in C++。如何访问在另一个文件中的文件 A.CPP 中修改的变量的值](https://stackoverflow.com/questions/10298041/getting-link-error-extern-in-c-how-to-access-the-value-of-a-variable-which) 在我的 C++ 代码中的文件 B.CPP 我想在文件“B”中使用变量“VarX”，该文件实际上在另一个文件中修改文件“A”。所以我看了一下@以下链接并使用了外部概念。

[如何使用 extern 在源文件之间共享变量？](https://stackoverflow.com/questions/1433204/what-are-extern-variables-in-c)

> 错误 LNK2001：无法解析的外部符号“unsigned int VarX”(?VarX@@3IA)

我的情况如下：

```
File1.h
extern unsigned int VarX;

File2.cpp
#include File1.h
VarX = 101;

File3.cpp
#include File1.h
unsigned int temp = VarX; 
```

**IMP 注意：在头文件 File1.h 中，除了 Extern 定义之外，还有许多其他结构定义和许多其他定义。**

有人可以帮助我吗？我该如何读取在另一个文件 File3.cpp 中的 File2.cpp 中修改的 VarX 的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T13:54:01.627

您应该拥有具有以下内容的 File1.cpp：

```
unsigned int VarX = 0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T13:54:15.240

您必须`VarX`在全局范围内定义，我假设您现在没有这样做，否则它甚至不会编译：

```
//File2.cpp
#include "File1.h"
unsigned int VarX = 101;  //this has to be outside any code block or namespace
                          //or class... 
```

# qt - 如何在 Qt 中使 Widgets 背景透明

> ID：10299302
> 
> 赞同：1
> 
> 时间：2012-04-24T13:50:45.287
> 
> 标签：qt, qt4, symbian

我正在构建一个应用程序，其中我只为我的 mainWindow 提供了背景，并且所有其他小部件都在没有任何背景的情况下使用，但是当我运行应用程序时，它们不是 100% 透明的，它们有点半透明，有什么方法可以让它们 100 % 透明，以便只有前景可以出现而没有背景提示。

![在此处输入图像描述](../Images/3a499915d6e41b645379abc593324eee.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:59:24.947

您能否发布您目前用来获得透明度的代码？如果你说你得到“半透明的东西”，我认为你创建了一个工具窗口，这不是你真正想要的。

一个真正透明的主窗口可以通过移除标题栏来实现（将 QWidget 构造函数 Qt::FramelessWindowHint 作为第二个参数 - WindowFlags），在小部件中绘制应该以不常见颜色透明的所有内容（如 255,0,255），然后把它割下来。

一个非常原始的切断 QWidget 部分的例子：

```
QBitmap b(100, 100);
b.fill(Qt::black);
setMask(b); 
```

QBitmap 在应该可见的像素上必须是黑色的，而在不可见的像素上必须是白色的。在此示例中，只有从 0,0 开始的 100,100 区域可见，窗口的其余部分将不可见。

# java - 在 glassfish 服务器中设置启动类

> ID：10299305
> 
> 赞同：0
> 
> 时间：2012-04-24T13:50:50.483
> 
> 标签：java, migration, ejb, glassfish-3, startup

我有一个当前部署在**weblogic服务器上的****ejb**应用程序，现在我想将它部署在**glassfish 服务器 3.1上，所以我的问题是任何朋友都可以告诉我如何在****glassfish**服务器上设置启动类。

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T07:23:22.360

您可以添加侦听器以通过实现来获取有关服务器生命周期事件的通知`com.sun.appserv.server.LifecycleListener`。

```
public class StartupListener implements LifecycleListener {

   public void handleEvent(LifecycleEvent event) throws ServerLifecycleException {

            if (LifecycleEvent.STARTUP_EVENT == event.getEventType()) {

            }       
     }
} 
```

现在在 domain.xml 中配置监听器

```
<application name="APPLICATION_NAME" object-type="user">
<property name="isLifecycle" value="true" />
<property name="class-name" value="com.startup.StartupListener" />
</application> 
```

我对 glassfish 不是很熟悉，但也可以通过管理控制台完成。您可以[在此处](http://docs.oracle.com/cd/E19798-01/821-1752/beamc/index.html)获得更多信息。******

# c# - 无法调用函数 (FileLoadException)

> ID：10299307
> 
> 赞同：1
> 
> 时间：2012-04-24T13:50:53.647
> 
> 标签：c#, c#-4.0

我正在尝试在屏幕上显示 3D 头像，我想应用默认纹理，但它甚至不会执行该功能。"(MorphUserWithTemplate(memberID);"

我不断收到相同的错误，并且在调试时它只是跳过了从该函数开始的其余代码。“'System.IO.FileLoadException' 类型的第一次机会异常发生在 ...”

```
if (!File.Exists(morphedAvatar))
{
    string test = MorphUserWithTemplate(memberID); // This one ...

    _ucWPF = new AvatarControl(test, memberID, Constants.AVATARSNAPSHOTTC2TYPESHOP);
    elementHostWPFStaticView.Child = _ucWPF;
    _IsFirstTimeLoaded = false;
} 
```

# c++ - 为什么 boost::enable_if 不会导致重复的重载方法编译错误

> ID：10299309
> 
> 赞同：5
> 
> 时间：2012-04-24T13:50:55.803
> 
> 标签：c++, boost, sfinae

我已经获得了 enable_if 工作的代码，它允许我做一些很棒的事情，但我认为这会导致错误，因为下面显示的两种方法具有相同的方法签名。

任何人都知道为什么这是允许的？

```
#include <iostream>
#include <boost/type_traits>

template<bool T, class R = void>
struct enable_if{
   typedef R type;
};

template<class R>
struct enable_if<false, R>{

};

template<class T>
typename enable_if<boost::is_pod<T>::value >::type  print(const T& item){
   std::cout << "T is a pod with the value: " << item << std::endl;
}

template<class T>
typename enable_if<!(boost::is_pod<T>::value) >::type  print(const T& item){
   std::cout << "T is not a pod with the value: " << item << std::endl;
}

int main(int argc, const char * argv[])
{

   print(1);

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T13:56:44.220

> 我下面显示的两种方法具有相同的方法签名

仔细看：

```
… enable_if< boost … 
```

对比

```
… enable_if< ! boost … 
```

它们不一样，它们是对立的。如果一个被禁用，另一个被启用。这保证了调用者始终可以看到一个。（请记住，`enable_if`如果条件为假，则使声明完全不可见。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T16:35:40.623

就重载决议而言，这两个模板函数**确实**具有相同的签名。如果它们都针对任何请求的类型进行了实例化，则会出现错误。

但是，当一个`enable_if` *成功而另一个失败*时，不会因为替换失败而产生编译错误，而是**没有错误**（SFINAE：“替换失败不是错误”），*编译器只是将其中一个忽略为如果它不存在*。

因此，对于给定类型，只有两个模板中的一个被实例化，并且没有重载解决错误。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-24T13:53:34.600

这两种方法在返回类型上有所不同，例如，通过 enable_if 的模板特化。

# jquery - 如何在制作动画时更改 Jquery Animation 课程？

> ID：10299315
> 
> 赞同：1
> 
> 时间：2012-04-24T13:51:18.067
> 
> 标签：jquery

我有一个小型 jquery 游戏，其中炮塔向其他 div 发射射弹，这些 div 已被动画化以在场地上移动。我的射弹被发射到迎面而来的 div 附近的最后一个位置，所以它永远不会击中。我需要的是一种方法来改变射弹的运动轨迹，因为它会跟随它，所以它总是会击中目标。通过使用下面的方法，我可以接收弹丸的当前位置，但我不能修改它作为动画。

```
$(projectile).animate({"top":Y, "left": X},{duration:500, easing: 'linear',step: function( currentLeft,currentTop ){
 checkforenemies();
},  complete: function() {
    $(projectile).remove();

}}); 
```

有没有办法在 step: function 中修改动画的过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:43:28.323

我想到了一些方法：A）您可以将动画分解为几个步骤：

```
function step(){
  while ( $(projectile).length > 0 ){ // while projectile exists
    $(projectile).animate({
      "top": getTargetY()/numberOfStepsItTakesToHitIt,
      "left": getTargetX()/numberOfStepsItTakesToHitIt },
      {duration:500, easing: 'linear', complete: function() {
        $(projectile).remove();
      }
    });
    step();
  }
} 
```

B）检查目标是否在每一步都改变了位置，如果改变了，停止动画并开始一个新的：

```
function step(){
  if (targetMoved && $(projectile).length > 0){
    $(projectile).stop();
    $(projectile).animate({
      "top": getTargetY()/numberOfStepsItTakesToHitIt,
      "left": getTargetX()/numberOfStepsItTakesToHitIt },
      {duration:500, easing: 'linear', step: step, complete: function() {
        $(projectile).remove();
      }
    });
  }
} 
```

C）计算目标轨迹（基于它的位置和速度）并猜测它的未来位置。比在那个地方开火并检查碰撞。

我最喜欢最后一种方法。弹道不会弯曲，但却是最复杂的。

PS：我没有检查代码，所以它可能包含一些语义（甚至可能是逻辑）错误。

# c# - 在 Azure 中生成和执行 Worker 进程

> ID：10299316
> 
> 赞同：3
> 
> 时间：2012-04-24T13:51:23.943
> 
> 标签：c#, .net, asp.net-mvc, azure, azure-worker-roles

谷歌在这方面真的让我失望了。我是 Azure 的新手，仅 .NET 中级

我有一个 Azure 解决方案，我已经在一个运行良好的 Web 角色中编写了一些代码。我现在想做的是将其中一些代码移动到 Azure Worker 中，它将由 Web 角色中的控制器函数初始化

我到底需要做什么才能让这件事在本地进行？我在 SLN 中创建了 Worker 项目。我只需要知道如何启动并运行它。

我认为我的部分问题是我假设这些工人的行为就像 Heroku 工人......是这样吗？因为我需要的是一个队列系统（一个大队列中的一堆“工作任务”）。

我为教程找到的许多链接似乎都围绕着如何从 Web 角色实际初始化流程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T13:56:06.393

Windows Azure 中的工作者不是任务；它们是整个虚拟机。为了让您的生活更轻松，请记住这个小细节：Web 角色实例是运行 IIS 的 Windows Server 2008，而工作角色是相同的东西，但禁用了 IIS。

当您将该辅助角色添加到您的项目时，您实际上现在有一组新的虚拟机正在运行（至少一个，取决于您设置的实例计数）。这些 VM 有自己的 OnStart() 和 Run() 方法，您可以将代码放入其中，用于引导目的。

如果您使用[Windows Azure 培训工具包](http://www.microsoft.com/download/en/details.aspx?id=8396)，您将看到一些展示如何在各种角色实例之间进行通信的实验室（一种常见的模式是使用 Windows Azure 队列）。Guestbook 动手实验室（第一个实验室）有一个很好的后台进程示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T16:15:46.527

有关此的更多信息，因为我现在已经开始了..

如果您来自 Heroku 背景，那么 Azure Worker 或多或少是 Rails 中您实际使用队列执行的函数。与 Heroku 排队操作不同，Azure Worker 只是无休止地运行并不断轮询要执行的新任务……因此 Run() 函数中的模板化 sleep(10000) 。

我发现让 Web 和 Worker 相互交谈的最传统方式是通过 Azure ServiceBus 排队消息，目前尚未模拟，这意味着您需要一个正常运行的 Azure 帐户才能完成这项工作，即使您正在本地运行。你只需要上网。

ServiceBus 消息可以将整个对象传递给 Worker（只要 Worker proj 具有正确的依赖项），这很好。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-24T15:59:59.703

我认为您只是在启动 azure 模拟器以及您的工作人员/网络角色时遇到了麻烦？只需将 azure 配置项目设置为启动项目并运行它。它将与您的所有角色一起启动模拟器。

# ios - 适用于 iOS 的普通话文本到语音转换

> ID：10299320
> 
> 赞同：0
> 
> 时间：2012-04-24T13:51:30.603
> 
> 标签：ios, text-to-speech

iOS中是否有任何用于普通话的文本到语音库？任何想法？我在看 OpenEars，但不认为它支持普通话。可以？

任何帮助，将不胜感激。

尼廷

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T18:30:37.283

iSpeech has an iOS SDK, which is for free and has 2 Mandarin voices (male & female)

[http://www.ispeech.org/developers/iphone](http://www.ispeech.org/developers/iphone)

It has branding though: there’s an 'iSpeech' pop-up shown every time it synthesizes text.

# c++ - 在 Windows 上播放和暂停 .wav 或 .mp3 文件

> ID：10299327
> 
> 赞同：0
> 
> 时间：2012-04-24T13:51:46.630
> 
> 标签：c++, winapi, multimedia, dev-c++, playsound

我正在开发一个控制台应用程序，我必须处理所有相同类型（.wav 或 .mp3）的多个声音文件。我可以在两者之间进行选择。

我可以使用 PlaySound() 函数很好地播放声音，但我需要一些额外的功能。

我需要暂停声音，然后从上次暂停的位置开始播放。

或者

设定播放开始的时间和播放的时间。

两个选项中的一个将完成这项工作。

我正在使用 DEV C++ 编译器在 Windows 上工作。

有什么帮助和想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:06:52.513

使用 Windows Media Player activeX 控件进行比直接播放 WAV 文件更复杂的操作。这要容易得多。

请参阅 MSDN 上的“在 C++ 程序中使用 Windows Media Player 控件”：

[http://msdn.microsoft.com/en-us/library/windows/desktop/dd564580(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd564580(v=vs.85).aspx)

# mysql - 使用复合主键在 MySQL 时态数据库中查找最新记录

> ID：10299329
> 
> 赞同：0
> 
> 时间：2012-04-24T13:51:48.330
> 
> 标签：mysql

我有一个非常相似的问题： [Finding the 'earliest'composite primary key](https://stackoverflow.com/questions/6993633/finding-the-earliest-composite-primary-key)

但是，我使用的是 MySQL 5.0.77，只需要获取最新的记录。我的表 TABLE_1 如下所示：

```
OID     PROP_TYPE     EFFECTIVE_DATE        PROP_VALUE
-----   ----------    -------------------   ----------
00123   NA010         2003-05-30 15:52:15   JAMES
00123   NA010         2004-02-30 10:12:18   FRED
00123   NA011         2003-05-30 08:25:41   WILLIAMS
00123   NA011         2006-01-15 22:12:38   DANIELS
00123   NA012         2003-05-30 08:25:41   (704) 242-2124 
```

有一个 OID、PROP_TYPE 和 EFFECTIVE_DATE 的复合键，所以我正在寻找一个检索以下内容的 select 语句：

```
OID       PROP_TYPE    EFFECTIVE_DATE       PROP_VALUE
-----     ---------    -------------------   -------
00123     NA010        2004-02-30 10:12:18   FRED
00123     NA011        2006-01-15 22:12:38   DANIELS
00123     NA012        2003-05-30 08:25:41   (704) 242-2124 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:00:41.190

也许是这样的：

```
SELECT
    t.*
FROM
    TABLE_1 AS t
    JOIN 
    (
        SELECT
            MAX(t2.EFFECTIVE_DATE) AS EFFECTIVE_DATE,
            t2.PROP_TYPE,
            t2.OID
        FROM
            TABLE_1 AS t2
        GROUP BY
            t2.PROP_TYPE,
            t2.OID
    ) AS MaxDate
    ON t.EFFECTIVE_DATE=MaxDate.EFFECTIVE_DATE
    AND t.PROP_TYPE=MaxDate.PROP_TYPE
    AND t.OID=MaxDate.OID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:03:59.673

```
SELECT 
    t.*
FROM 
        TABLE_1 AS t
    JOIN
        ( SELECT oid, prop_type, MAX(effective_date) AS effective_date
          FROM TABLE_1 
          GROUP BY oid, prop_type
        ) AS g
      ON  (g.oid, g.prop_type, g.effective_date)
        = (t.oid, t.prop_type, t.effective_date) 
```

上的索引`(oid, prop_type, effective_date, prop_value)`可能有助于提高性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T13:56:20.610

尝试这个：

```
select OID, PROP_TYPE, EFFECTIVE_DATE, PROP_VALUE
  from TABLE_1
 where OID, PROP_TYPE, EFFECTIVE_DATE in
  (select OID, PROP_TYPE, MAX(EFFECTIVE_DATE) from TABLE_1 group by OID, PROP_TYPE) 
```

# javascript - 随机使用 Boomerang.js

> ID：10299330
> 
> 赞同：2
> 
> 时间：2012-04-24T13:51:51.323
> 
> 标签：javascript, performance

我是否有充分的理由不应该对[回旋镖](http://yahoo.github.com/boomerang/doc/ "回旋镖")执行此操作：

```
<script type="text/javascript">
        if (Math.random() < 0.005) {//one time in 200
            document.write(
                '<scr' + 'ipt src="/scripts/boomerang.js" type="text/javascript"></scr' + 'ipt>' +
                    '<scr' + 'ipt type="text/javascript">BOOMR.init({'+
                        'user_ip: "'+ '<%= Request.UserHostAddress %>' +'",'+
                        'site_domain: "' + '<%= //TODO from config%>' + '",' +
                        'beacon_url: "/Handlers/Boomerang.ashx",'+
                        'BW: {base_url: "/Resources/images/Boomerang/"}'
                    +'});</scr' + 'ipt>'
            );
        }
        else if (Math.random() < 0.1) {//one time in ten
            document.write(
                '<scr' + 'ipt src="/scripts/boomerang.js" type="text/javascript"></scr' + 'ipt>' +
                    '<scr' + 'ipt type="text/javascript">BOOMR.init({'+
                        'user_ip: "'+ '<%= Request.UserHostAddress %>' +'",'+
                        'site_domain: "' + '<%= //TODO from config%>' + '",' +
                        'beacon_url: "/Handlers/Boomerang.ashx",'+
                        'BW : { enabled : false }'+
                    '});</scr' + 'ipt>'
            );
        }
</script> 
```

这会使返回的时间无效吗？

我们不太关心使用多页方法获取结果：我们满足于只从计时 api 接收结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T15:29:08.427

为什么不在所有页面上都包含回旋镖，并且只根据您的采样率修改对 init 的调用？像这样的东西：

```
<script src="/scripts/boomerang.js"></script>
<script>
    var rand=Math.random(), test="";
    if(rand < 0.05) {     // one time in 200
        test="BW";
    }
    else if(rand < 0.1) { // 19 times in 200
        test="NOBW";
    }
    if(test) {
        BOOMR.addVar({
            test: test
        }).init({
            user_ip: "<%= Request.UserHostAddress %>",
            site_domain: "<%= //TODO from config%>",
            beacon_url: "/Handlers/Boomerang.ashx",
            BW: {
                base_url: (test == "BW" ? "/Resources/images/Boomerang/" : ""),
                enabled:  (test == "NOBW" ? false : true)
            }
        });
    }
</script> 
```

此脚本与您的版本之间的主要区别在于添加的`addVar({ test: test })`哪个告诉您的信标收集器使用了哪个版本。您可能还想传递`rand`if 它有助于调试的值。

我测量了从单个 linode 盒子为全球数百万用户加载回旋镖所需的时间，平均加载时间为 68 毫秒（我们将脚本缓存了 7 天）。不过，我们也会异步加载脚本，因此如果您发现回旋镖本身会影响页面加载时间，您可能需要考虑这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T13:59:03.363

你为什么不在[@bluesmoon](https://twitter.com/#!/bluesmoon)上问一下随机化它的最佳方法是什么……肯定他不会咬人的 ;-)

# jquery - 使用 Jquery Validate 插件添加、删除然后重新添加自定义方法

> ID：10299331
> 
> 赞同：0
> 
> 时间：2012-04-24T13:51:52.947
> 
> 标签：jquery, jquery-validate

我无法重新添加使用 Jquery Validation 插件创建的自定义方法。我在 jsfiddle 上发布了一个简单的示例，以显示我的表单的基本功能......用户有一个表单，他们在其中从文本字段中选择一所学校（实际上是一个自动完成）。该表单有一个自定义规则，以便通过 .blur 事件设置 school_id（实际上，自动完成设置了 school_id，但这对于一个简单的示例就足够了）。

现在他们可以切换到从常规下拉列表中选择学校/如果他们喜欢这样选择（通过单击链接）。所以我删除了 school_id 验证规则，并为下拉列表添加了一个验证规则。但是如果用户切换回旧的，我似乎无法重新添加自定义自动完成规则。

我犯错的代码的特定部分在这里：

```
$("#school_autocomplete").rules("add", {
  school_id_required: "",
  messages: {
    required: "* Please type and pick a school"
  }
}); 
```

这是一个简单的功能示例：http:
[//jsfiddle.net/armyofda12mnkeys/4jsgQ/6/](http://jsfiddle.net/armyofda12mnkeys/4jsgQ/6/)

尝试去那里^，然后立即单击提交，（你得到一个错误，这是正确的）。然后点击'Show DropDown'，点击Submit（你得到新添加的错误，这是正确的），然后点击'Show Text (Autocomplete)'，点击Submit。您现在收到“警告：没有为 school_autocomplete 定义的消息”，这是不正确的。

通常在那个**school_id_required: ""**行上，你会有类似**required: true**或**"regex": "^some.+regex$"**我相信...但是对于自定义规则，它似乎不起作用当我通过“”，假/真，“等等”作为要测试的值时正确。我看到一个例子，有人使用了类似 **school_id_required: ["someParam"]**的东西，所以我尝试给它一个假值以通过数组传递也无济于事。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T16:53:35.340

你能试试这个吗，这对我有用，你将使用设置对象，然后分配新的规则和消息:)

```
var settings = $("#school_autocomplete").validate().settings;

$.extend(settings, {
    rules: _Rules,
    messages: _Messages
});

var validated = $('#school_autocomplete').valid(); 
```

祝你好运。

# android - 从图库中获取图片（位图）的代码不起作用

> ID：10299334
> 
> 赞同：1
> 
> 时间：2012-04-24T13:51:55.770
> 
> 标签：android, bitmap, gallery

**我的解决方案：** 好的，一些很好的答案。这就是我想出的。不确定回答我自己的问题或将其放在这里以获得适当的stackoverflowness，所以如果有人知道请分享。

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode == RESULT_OK) {
        switch (requestCode) {
        case cameraData:
            Bundle extras = data.getExtras();
            bmp = (Bitmap) extras.get("data");
            iv.setVisibility(View.VISIBLE);
            break;
        case SELECT_PICTURE:
            Uri selectedImageUri = data.getData();
            selectedImagePath = getPath(selectedImageUri);
            File imgFile = new File(selectedImagePath);
            bmp = BitmapFactory.decodeFile(imgFile.getAbsolutePath());
            break;
        }
        iv.setVisibility(View.VISIBLE);
        iv.setImageBitmap(bmp);
        ByteArrayOutputStream stream = new ByteArrayOutputStream();
        bmp.compress(Bitmap.CompressFormat.JPEG, 50, stream); // compress
        byte[] ba = stream.toByteArray();
        image_str = Base64.encodeBytes(ba);
    }
} 
```

///////////////////////////////////////// //////////////////////////////////

好的，我的画廊中有一条图片路径。我想拍下那张照片并将它变成一个包，这样我就可以对其进行 64 位编码以上传到我的服务器。这是我的 onActivityResult。我用相机拍照只是没有从画廊里得到它。

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);
        if (resultCode == RESULT_OK){
            switch(requestCode){
            case cameraData:                
                Bundle extras = data.getExtras();
                bmp = (Bitmap) extras.get("data");
                Log.e("picture","Take Picture");
                break;
            case SELECT_PICTURE:
                Uri selectedImageUri = data.getData();
                selectedImagePath = getPath(selectedImageUri);
                Log.e("picture",selectedImagePath);
                File imgFile = new  File(selectedImagePath);                    
                bmp = (Bitmap)     BitmapFactory.decodeFile(imgFile.getAbsolutePath());
                Bundle extras1 = ((Cursor) imgFile).getExtras();
    //          bmp = (Bitmap) extras1.get("data");
                Log.e("picture","from Gallery");
                break;
            }
        }
    } 
```

base 64 代码不是我的，来自这个站点：http: [//blog.sptechnolab.com/2011/03/09/android/android-upload-image-to-server/](http://blog.sptechnolab.com/2011/03/09/android/android-upload-image-to-server/)

获取路径：

```
public String getPath(Uri uri) {
    String[] projection = { MediaStore.Images.Media.DATA };
    Cursor cursor = managedQuery(uri, projection, null, null, null);
    int column_index = cursor
            .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:16:49.727

您可以直接将位图转换为base64。

```
ByteArrayOutputStream bos = new ByteArrayOutputStream(); 
bitmap.compress(CompressFormat.PNG, 0 /*ignored for PNG*/, bos); 
byte[] bitmapdata = bos.toByteArray();

byte[] dataToUpload = Base64.encode(bitmapdata , DEFAULT); 
```

要将位图转换为 Bundle 使用`bundle.putParcelable("dataToUpload", bitmap)` 并使用`bundle.getParcelable("dataToUpload")`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:13:04.857

为什么要将位图变成一个包？以及为什么要在上传之前将文件转换为 base64 字符串？

[这里](http://reecon.wordpress.com/2010/04/25/uploading-files-to-http-server-using-post-android-sdk/)和[这里](http://vikaskanani.wordpress.com/2011/01/11/android-upload-image-or-file-using-http-post-multi-part/)是上传文件的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T14:13:07.197

[http://pastebin.com/3A5gMFsF](http://pastebin.com/3A5gMFsF)

似乎做你想做的事。看起来当您获取文件 URI 时，您需要通过一些内容解析器来实际获取文件本身。

```
Uri photoUri = data.getData();
    if (photoUri != null)
    {
    try {
          String[] filePathColumn = {MediaStore.Images.Media.DATA};
          Cursor cursor = getContentResolver().query(photoUri, filePathColumn, null, null, null); 
          cursor.moveToFirst();
          int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
          String filePath = cursor.getString(columnIndex);
          cursor.close();
          bMap_image = BitmapFactory.decodeFile(filePath);
          ImageView img = (ImageView) findViewById(R.id.gallery1);
          img.setImageBitmap(bMap_image); 
```

编辑：我在这个版本和你的版本之间看到的唯一区别是这个版本在调用 BitMap.Decode 之前不会将 filePath 转换为 File。它直接在内容解析器返回的文件路径上调用 BitmapFactory.decodeFile。

# ruby-on-rails - Heroku 区分大小写

> ID：10299337
> 
> 赞同：0
> 
> 时间：2012-04-24T13:52:04.667
> 
> 标签：ruby-on-rails, postgresql, search, heroku

我最近将我的应用程序上传到heroku，由于postgresql，区分大小写不起作用，我想知道如何解决这个问题？我的代码如下：

```
relation = Game.gamsearch(params[:gamsearch])
relation = Game.consearch(params[:consearch]) if params[:consearch].present? 
relation = Game.gensearch(params[:gensearch]) if params[:gensearch].present? 
relation = Game.where("game_name LIKE ?", "#{params[:game_name]}%") if params[:game_name].present? 
relation = Game.where("console = ?", params[:console]) if params[:console].present? 
```

查看代码：

```
<%= form_tag games_path, :controller => 'games', :action => 'gamsearch', :method => 'get' do %>
                        <%= text_field_tag :gamsearch, params[:gamsearch] %>
                        <%= submit_tag t('.searchb'), :game_name => nil %>
                        <% end %> 
```

这是模型代码：

```
def self.gensearch(*args)
#search for games by their genre
return [] if args.blank?
cond_text, cond_values = [], []
args.each do |str|
  next if str.blank?
  cond_text << "( %s )" % str.split.map{|w| "genre LIKE ? "}.join(" OR ")
  cond_values.concat(str.split.map{|w| "%#{w}%"})
end
all :conditions =>  [cond_text.join(" AND "), *cond_values] 
```

结尾

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T13:55:06.870

```
relation = Game.where("game_name ILIKE ?", "#{params[:game_name]}%") if params[:game_name].present? 
```

注意 ILIKE 而不是 LIKE

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T14:12:37.023

ILIKE 是 PG 的方式，但如果你有另一个数据库（sqlite）正在开发中，那可能行不通。解决此问题的一种方法是将两个值都设为大写，然后比较两者的大写版本。

# c# - 只有一条线的方法会影响性能吗？

> ID：10299339
> 
> 赞同：3
> 
> 时间：2012-04-24T13:52:07.520
> 
> 标签：c#, .net, performance, optimization

在代码中定义了 ValidateRequestmethod

```
 private bool ValidateRequest()
    {
        return _doc != null;
    } 
```

从我想检查 _doc 是否为空的任何地方调用此方法。这个方法已经在一个cs文件中使用了5次。

从性能的角度来看，只用一行定义一个方法是否可取？我认为在调用此方法之前，被调用的所有内容都将被推入堆栈，然后从堆栈中拉出。

有什么想法吗？

=== 编辑 ====

**我正在使用 .NET 3.5 版**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T13:54:24.560

不要打扰它。编译器可能会内联该方法，因为相应的 IL 很短。

如果该方法有助于代码的可维护性，那么随着它传达意图继续下去

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-24T13:58:29.667

将单行移到方法中不太可能对您的应用程序产生重大影响。实际上这很有可能不会产生影响，因为 JIT 可以选择内联这样的函数调用。我肯定会选择将检查保留在单独的方法中，除非分析器明确表明它是一个问题。

专注于编写清晰且抽象的代码。让分析器引导您解决真正的性能问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-24T13:54:21.487

一如既往：当您有疑问时，进行基准测试！
当您进行基准测试时，请在**发布**模式下进行，否则您不会使用编译器优化进行基准测试。

之后，如果它确实影响性能，您可以将其内联到 NGen。
[这篇SO帖子](https://stackoverflow.com/questions/6109745/performance-critical-to-inline-across-ngen-image-boundaries)谈到了它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T14:05:40.013

好的，所以这只是来自 LinqPad，我猜不是一个明确的答案，但以下代码产生了微小的差异：（00:00:00.7360736 vs 00:00:00.0740074）

```
void Main()
{
    var starttime = DateTime.Now;
    for (var i = 0; i < 1000000000; i++)
    {
        if (ValidateRequest()) continue;
    }
    var endtime = DateTime.Now;
    Console.WriteLine(endtime.Subtract(starttime));

    starttime = DateTime.Now;
    for (var i = 0; i < 100000000; i++)
    {
        if (_doc != null) continue;
    }
    endtime = DateTime.Now;
    Console.WriteLine(endtime.Subtract(starttime));
}

private object _doc = null;

private bool ValidateRequest()
    {
        return _doc != null;
    } 
```

# flash - Flex 容器增长过多，与其他元素重叠

> ID：10299351
> 
> 赞同：1
> 
> 时间：2012-04-24T13:52:35.537
> 
> 标签：flash, apache-flex, layout

事情就是这样。我正在使用纯 AS3 对一些 Flex 组件进行一些特殊的自动布局，当我发现一些 SkinnableContainers 变得比它们的内容更大时，即使它们有 0 填充并且它们内部的布局是 BasicLayout（即“全手动”布局）。

这是屏幕截图和代码。这个小测试创建了一个应用程序并将布局设置为 Horizo​​ntalLayout。然后，在 Application 容器中，我创建了两个 SkinnableContainer，每个都包含一个带有一些文本的标签。我将 SkinnableContainers 的最大宽度设置为 150 像素，并将其中的标签设置为其父级的 100% 宽度。

截屏

![布局截图](../Images/84be09e8437a53502ec6a0ded8b9b278.png)

主.mxml

```
<?xml version="1.0" encoding="utf-8"?>
<local:MainApplication xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:local="*"/> 
```

主应用程序.as

```
package {
  import flash.events.Event;
  import spark.components.Application;
  import spark.components.SkinnableContainer;
  import spark.components.Label;
  import spark.layouts.HorizontalLayout;
  import spark.layouts.BasicLayout;

  public class MainApplication extends Application {
    public function MainApplication() {
      super();

      var hl : HorizontalLayout = new HorizontalLayout();
      hl.gap = 0;
      hl.paddingTop = 0;
      hl.paddingLeft = 0;
      hl.paddingRight = 0;
      hl.paddingBottom = 0;

      this.layout = hl;

      var leftBlock : SkinnableContainer = myNewContainer(0xFF0000);
      var rightBlock : SkinnableContainer = myNewContainer(0x00FF00);;
      var leftLabel : Label = myNewLabel("oranges blackberries bananas kiwis plums apples");
      var rightLabel : Label = myNewLabel("apricots peaches lemons pineapples");

      leftBlock.addElement(leftLabel);
      rightBlock.addElement(rightLabel);

      this.addElement(leftBlock);
      this.addElement(rightBlock);
    }

    private function myNewContainer(backColor : Number) : SkinnableContainer {
      var container : SkinnableContainer = new SkinnableContainer();
      container.layout = new BasicLayout();
      container.maxWidth = 150;
      container.explicitWidth = 150;
      container.opaqueBackground = backColor;
      return container;
    }

    private function myNewLabel(text : String) : Label {
      var myLabel : Label = new Label();
      myLabel.text = text;
      myLabel.percentWidth = 100;
      myLabel.setStyle("color", 0xFFFFFF);
      myLabel.setStyle("backgroundColor", 0x000000);
      return myLabel;
    }
  }
} 
```

在我看来，SkinnableContainers（红色和绿色背景）并不关心`maxWidth = 150;`我应用于它们的内容，但标签（黑色背景上的白色文本）尊重这一点。我期待只看到标签，没有任何过度延伸的红色或绿色背景。是否涉及一些填充？我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T15:06:10.207

**简短的回答**

使用`backgroundColor`样式而不是`opaqueBackground`属性。

**长答案**

如果您将其替换`container.opaqueBackground = backColor`为`container.setStyle("backgroundColor", backColor)`（就像您对标签所做的那样），红色和绿色区域就在您期望的位置。

请记住[opaqueBackground](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#opaqueBackground)是 DisplayObject 类的纯 AS3 属性。它与 Flex 框架（直接）无关。所以你看到的是那些DisplayObjects有些重叠，但不是Flex SkinnableContainers。

更准确地说：SkinnableContainers 是从 DisplayObject 扩展而来的，因此从技术上讲它们*是*重叠的，但它们的图形和内容以这样一种方式对齐，即在视觉上（以及除使用 之外的任何其他实际方式`opaqueBackground`）它们不是。

# php - PHP函数计算传递给函数的参数数量

> ID：10299353
> 
> 赞同：1
> 
> 时间：2012-04-24T13:52:37.393
> 
> 标签：php, php-5.3

是否有一个 PhP 函数可以计算传递给另一个函数的参数数量？例如

```
function tobeCounted ("numberOne","numberTwo","numberThree")
{
 //do something with the parameters
} 
```

一个函数，它将计算传递给上述函数的参数数量，然后返回三个或参数或参数本身的索引。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T13:56:14.060

如果你使用`func_num_args()`，那么你会得到参数的数量，而不是`func_get_args`得到参数的数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T13:57:53.710

你需要这些：

func_num_args — 返回传递给函数的参数数量

func_get_args — 返回一个包含函数参数列表的数组

从这里：

[http://www.php.net/manual/en/function.func-num-args.php](http://www.php.net/manual/en/function.func-num-args.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T13:54:07.417

[func_get_args](http://php.net/manual/en/function.func-get-args.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T14:03:55.120

```
func_num_args() 
```

使用它来获取传递的参数数量

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-24T13:55:48.407

或者更直接：[func_num_args](http://www.php.net/manual/en/function.func-num-args.php)

# javascript - 从 webdriver 覆盖 javascript 变量

> ID：10299356
> 
> 赞同：1
> 
> 时间：2012-04-24T13:52:43.523
> 
> 标签：javascript, jquery, selenium, webdriver

我不确定我的问题是否有任何解决方案，但不幸的是，我还没有找到任何关于它的文章或信息。

情况如下。我们有一个大量使用 jQuery 的网站，并且有一项服务每 5 秒或 10 秒刷新一次网站的一部分。由于这一半的时间，我从 WebDriver 收到了这个错误：

```
"Element not found in the cache - perhaps the page has changed since it was looked up" 
```

根据 Internet，当 DOM 树在 WebElement 被初始化和我想用它来执行（例如，单击事件）之间发生变化时，我得到了这个错误。

根据我们的开发人员的说法，我们的 jquery 解决方案有一个变量来控制页面是否刷新。所以，为了解决我的问题，我必须覆盖这个变量。我必须以 jQuery 能够理解的方式覆盖这个变量——我的意思是在同一个例子中，如果这个定义在这种情况下是正确的。

所以，我想问一下是否可以？如果是这样，比我想问一个小例子。

提前致谢！

安德拉斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T07:42:02.957

我只能同意阿莱。

使用`JavaScriptExecutor`是处理此类问题的唯一方法。

我在使用 jQuery jNice 库时遇到了问题，找不到任何其他解决方案。

下面是一个用 Java 填充文本字段的示例：

```
JavascriptExecutor js = (JavascriptExecutor) webDriver;
js.executeScript("document.getElementsByName('<field_name_gets_here>')[0].value='" + your_value + "'"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-31T20:12:53.563

如果您提到的 JavaScript 变量是全局的，那么可以 - 您可以通过从 Selenium 执行 JavaScript 来覆盖它。例如，如果该变量被调用`doRefresh`，您可以通过执行 JS 来覆盖它，如下所示`doRefresh = false;`：

如果该变量不是全局变量，则上述内容将不起作用。但是，听起来有问题的元素可能是通过 ajax 动态加载的——在这种情况下，`xhr`对象是全局的，您可以访问它。

因此，首先您可以制作对象的本地副本，`xhr`然后通过从 Selenium 执行 JavaScript 来覆盖原始副本（有效地禁用它）：

```
// create a copy of the xhr object for later use
var xhrHolder = window.XMLHttpRequest;

// overwrite the original object to disable it
window.XMLHttpRequest = {}; 
```

然后像往常一样通过 Selenium 找到你的元素。并继续您的测试。

完成后，您可以通过从 Selenium 执行 JavaScript 将 xhr 对象放回原处（以便页面可以继续刷新并执行 ajax）：

```
// put the xhr object back
window.XMLHttpRequest = xhrHolder; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T15:00:23.073

您可以尝试我的方法 - 我为可能正在加载页面的情况创建了自己的包装器。以下部分代码尝试在循环中搜索元素，持续三秒钟（可配置）。顺便说一句，`driver`下面的变量是`WebDriver`

```
private WebElement foundElement;
public WebElement find(By by){
    for (int milis=0; milis<3000; milis = milis+200){
        try{
            foundElement = driver.findElement(by);
        }catch (Exception e){
            try {
                Thread.sleep(200);
            } catch (InterruptedException e1) {
                e1.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
            }
        }
    }

    return foundElement;

} 
```

稍后在代码中：

```
 WebElement submitButton = find(By.id("submitNewBid"));
 submitButton.click(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T10:21:44.153

我相信这是可能的。c# 的示例：

```
((IJavaScriptExecutor)driver).ExecuteScript("window.$('.class').data('var') = 0;") 
```

# php - 按用户跟踪/验证/更新 MySQL 结果

> ID：10299363
> 
> 赞同：1
> 
> 时间：2012-04-24T13:53:05.043
> 
> 标签：php, mysql

我有一个时间表数据库，志愿者可以在其中检查他们的班次。我将通过电子邮件向他们发送一个链接，该链接指向他们将电子邮件地址输入 HTML 表单以访问此信息的页面。

有没有办法可以跟踪查询了哪些电子邮件，以便我可以将计划链接重新发送给尚未访问数据库的人？

如有必要，我可以在结果中添加一个额外的“已确认”复选框并让它更新数据库。我喜欢这个想法，但我不确定如何实施（或该操作的术语）。

编辑：这是我用来实现的代码。但是，我没有在已确认的列中得到结果。

```
 $db = new mysqli("host", "user", "pass", "db");

    $stmt = $db->prepare('UPDATE volConfirm SET confirmed = TRUE WHERE email = ?');
    $stmt->bind_param('s', $_POST['email']);
    $stmt->execute();

    $stmt = $db->prepare('SELECT * from volConfirm WHERE email = ?');
    $stmt->bind_param('s', $_POST['email']);
    $result = $stmt->get_result();
    while ($row = $result->fetch_array(MYSQLI_NUM)) {
    // construct your output here using $row to access database record
    echo "<h2>" . $row['agreeName'] . "</h2>";
    echo "<p> You have been assigned as a volunteer for:" . $row['position'] . "</p>";
    echo "<p>Your shift times are scheduled for:" . $row['shift_times'] . "</p>";
    echo "<p>Your shift has been confirmed:" . $row['confirmed'] . "</p>";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:59:14.597

您需要执行以下操作：

1.  在您的志愿者表中添加一个新列

    ```
    ALTER TABLE Volunteers ADD COLUMN Confirmed BOOLEAN NOT NULL DEFAULT FALSE; 
    ```

2.  让提交页面中的 PHP 更新该列：

    ```
    UPDATE Volunteers SET Confirmed = TRUE WHERE Email = 'foo@bar.com'; 
    ```

    在您的代码段中：

    ```
    $db = new mysqli("dbhostname", "username", "password", "dbschema");

    $stmt = $db->prepare('UPDATE volConfirm SET confirmed = TRUE WHERE email = ?');
    $stmt->bind_param('s', $_POST['email']);
    $stmt->execute();

    $stmt = $db->prepare('SELECT * from volConfirm WHERE email = ?');
    $stmt->bind_param('s', $_POST['email']);
    $result = $stmt->get_result();

    while ($row = $result->fetch_array(MYSQLI_NUM)) {
      // construct your output here using $row to access database record
    } 
    ```

3.  在未来的某个时间，获取所有尚未访问该页面的用户的列表：

    ```
    SELECT Email FROM Volunteers WHERE Confirmed = FALSE; 
    ```

# single-sign-on - 不同平台的两个网站之间的 SSO

> ID：10299369
> 
> 赞同：3
> 
> 时间：2012-04-24T13:53:20.037
> 
> 标签：single-sign-on

我有一个要求，我需要在两个不同的网站之间实施 SSO。

其中一个网站说 www.abc.com 是使用 ASP.NET 编写的，并且托管在 IIS 7.0 上。第二个网站说 www.xyz.com 使用 PHP 编写并使用 Apache Web 服务器。这两个网站都使用不同的数据库并使用不同的算法来验证用户身份。

我不能使用第三方 SSO，因为这意味着更改两个网站的身份验证。想知道这是否可行，如果可以，应该采用什么方法？

提前致谢...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T09:09:11.543

我们可以找到另一种方法。基本上，我们试图通过使用两个 cookie（每个站点创建的 www.abc.com 和 www.xyz.com 各一个）来解决这个问题，但是由于我们无法找到读取跨域 cookie 的方法，我们被困住了。

但后来，我偶然发现了 forums.asp.net 和 hotmail 的工作方式。他们使用 live.microsoft.com 来设置身份验证 cookie。

现在，我们计划创建第三个网站来验证用户。www.abc.com 和 www.xyz.com 中的登录表单都会调用第三个网站来设置身份验证 cookie。使用此身份验证 cookie，我们将能够允许用户在两​​个网站之间进行无缝浏览。

此外，还找到了一篇关于此实现的非常好的文章。 [http://www.codeproject.com/Articles/114484/Single-Sign-On-SSO-for-cross-domain-ASP-NET-applic](http://www.codeproject.com/Articles/114484/Single-Sign-On-SSO-for-cross-domain-ASP-NET-applic)

# c# - 数据传输对象 - 在 DTO 或业务对象中进行映射？

> ID：10299373
> 
> 赞同：6
> 
> 时间：2012-04-24T13:53:45.460
> 
> 标签：c#, wcf, dto, data-transfer-objects

我有一个 WCF 服务，并且刚刚为一个业务对象创建了一个 DTO。

我的问题是在哪里放置两者之间的映射？

A) 在 DTO 中？

```
public class PersonDTO
{
    [DataMember] public string Id              { get; set; }
    [DataMember] public string Name            { get; set; }

    public void CloneFrom(Person p)
    {
        Id   = p.Id;
        Name = p.Name;
    }

    public void Populate(Person p)
    {
        p.Id   = Id;
        p.Name = Name;
    }
} 
```

或者

B) 在业务对象中？

```
public class Person
{
    public string Id              { get; set; }
    public string Name            { get; set; }

    public void CloneFrom(PersonDTO dto)
    {
        Id   = dto.Id;
        Name = dto.Name;
    }

    public PersonDTO GetDTO()
    {
        return new PersonDTO()
        {
            Id   = Id;
            Name = Name;
        }
    }
} 
```

我喜欢 A 中的关注点分离（业务对象不了解 DTO），但我更喜欢 B 的封装（无需将业务对象的内脏暴露给 DTO）。

只是想知道是否有标准方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-24T14:02:08.233

我认为这需要一个单独的班级，因为 BO 和 DTO 都不应该关心他们转变为另一个班级。

我个人使用 automapper 库进行对象转换。通过像您的示例中这样的简单转换，映射是在一行代码中完成的，复杂的转换也很容易设置。

如果您想自己映射，您仍然可以使用扩展方法将映射实现与您的 DTO 和 BO 类分开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T14:03:17.333

我会建议一个组件层。它应该负责您的业务层和数据层之间的通信。在这种情况下，您可以使用它将 DTO 对象转换为业务对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T14:06:47.190

您担心“无需向 DTO 公开业务对象的胆量”似乎有点没有根据，除非您在访问公共属性时没有在代码中显示某些内容，即根本没有胆量。

顺便说一句，您可以实现一个强制转换运算符，而不是克隆方法：[MSDN](http://msdn.microsoft.com/en-us/library/aa664464%28v=vs.71%29.aspx)

这样，您可以执行以下操作： Person p = (Person)myPersonDTO;

# zend-framework - ZendFramework 应用程序中的管理部分

> ID：10299374
> 
> 赞同：2
> 
> 时间：2012-04-24T13:53:46.470
> 
> 标签：zend-framework, zend-auth, zend-acl

我目前有一个应用程序使用 Zend_Auth 进行用户访问。该站点有一个管理部分，我希望一个在我的数据库中具有管理员角色的用户在使用他的凭据时被允许访问。Zend_Acl 是唯一的方法吗？因为我想做的事情似乎有点复杂，或者我的问题会有更简单的解决方案吗？

我已经考虑过这个问题，我现在想知道是否可以有两个身份验证控制器，一个用于用户，一个用于我的管理部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T15:54:42.280

我最近做了这样的事情。为检查用户凭据的管理模块创建一个前端控制器插件。就像是：

```
class Admin_Plugin_Auth extends Zend_Controller_Plugin_Abstract
{    
    public function preDispatch(Zend_Controller_Request_Abstract $request)
    {
        if ($request->getModuleName() != 'admin'){
            return;
        }
        $auth = Zend_Auth::getInstance();
        if (!$auth->hasIdentity()){
            // send him to login
        }
        $user = $auth->getIdentity();
        if (!$user->isAdmin()){ // or however you check
            // send him to a fail page
        }
    }    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:29:17.410

我决定采用在我的数据库中设置“is_admin”字段的方法，如果它设置为 1，则用户是管理员。然后我使用这段代码：

```
public function init()
{
    $this->auth=Zend_Auth::getInstance();
    if ($this->auth->getStorage()->read()->is_admin) {
    $route = array('controller'=>'admin', 'action'=>'index');
    } else {
        $route = array('controller'=>'index', 'action'=>'index');
    $this->_helper->redirector->gotoRoute($route);
    }
} 
```

如果用户不是管理员，这会将用户从管理区域重定向，如果他们是管理员，则允许他们访问。在我的应用程序中简单使用比 ACL 更容易实现。

# c++ - 关于 C++ (UNIX) 中的套接字连接超时

> ID：10299375
> 
> 赞同：0
> 
> 时间：2012-04-24T13:53:47.797
> 
> 标签：c++, sockets, unix

我一直在努力为套接字设置 15 秒的超时时间，以避免它被阻塞。所以我将它配置为非阻塞，然后使用选择功能，并且工作正常......当计算机连接到网络时！

如果计算机与网络断开连接（例如，如果 Wi-Fi 信号关闭，或者如果您拔下以太网插头），当我调用连接函数时，它会立即返回“网络无法访问”错误。

因为如果发生这种情况我有一个循环让它重新连接，它试图连接很多次，所以我得到了千兆字节的日志文件。

所以，我想要的也是为此设置某种超时。这实际上不是超时，但我希望它等待 15 秒，直到它再次尝试连接以避免这个问题。当我认为我在第 1 段中解释的设置的超时也可以解决这个问题时，我错了。那我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T13:56:36.553

你可以测试`errno`and `sleep`if it's `ENETUNREACH`。

# mysql - cakephp 在服务器上时无法连接到数据库

> ID：10299379
> 
> 赞同：0
> 
> 时间：2012-04-24T13:54:01.170
> 
> 标签：mysql, cakephp

我有我的 Cake 应用程序，它正在我的 Apache 上的 PC 上运行，但它连接到远程数据库。一切都很好。

但是当我在服务器上复制我的应用程序时，当我尝试执行任何控制器时都会出现错误：

```
Error: SQLSTATE[HY000] [2005] Unknown MySQL server host 'xx.xx.xx.xx:33306' (2) requires a database connection

Error: Confirm you have created the file : app/Config/database.php. 
```

我用简单的 php 脚本（在服务器上）测试了连接，我连接并从这个数据库中获取数据没有问题。那么为什么Cake 连接不上呢？？可能有什么问题？

```
public $external = array(
        'datasource' => 'Database/Mysql',
        'persistent' => false,
        'host' => 'xx.xx.xx.xx:33306',
        'login' => 'xxx',
        'password' => 'xxx',
        'database' => 'xxx',
    ); 
```

文件 'database.php' 存在于 app/config 中并具有权限 rwxr-xr-x 我不确定 mod_rewrite ...我如何检查它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T16:12:20.307

```
'host' => 'xx.xx.xx.xx:33306', 
```

不被允许。[您应该使用CakePHP 文档](http://book.cakephp.org/2.0/en/development/configuration.html)中指定的可选端口选项。

```
public $external = array(
        'datasource' => 'Database/Mysql',
        'persistent' => false,
        'host' => 'xx.xx.xx.xx',
        'port' => '33306',
        'login' => 'xxx',
        'password' => 'xxx',
        'database' => 'xxx',
    ); 
```

# uitableview - UITableView iOS 5顶部的灰线

> ID：10299381
> 
> 赞同：3
> 
> 时间：2012-04-24T13:54:02.230
> 
> 标签：uitableview, ios5, three20

iOS 5 中我的 UITableView 顶部出现了一条奇怪的灰线（在我升级到 Xcode 4.3 并在 iOS 5 iPhone 上运行应用程序之前从未出现过） - 还有其他人看到过吗？通过这样做，我在其他一些 TableViewControllers 中也得到了有趣的白线：

```
 // needed to get rid of funny white lines in iOS 5
    tableView.separatorStyle = UITableViewCellSeparatorStyleSingleLine;
tableView.separatorColor = [UIColor clearColor]; 
```

但是，这不适用于删除此行。这里没有标题。该行使用我的 UITableView 上下滚动 ![设置](../Images/6e21e04a62f9db7c39415ddda188e593.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:49:02.183

我有同样的问题，但它只出现在编辑模式下。我需要标题，所以以前的答案不适合我。但是这个答案对我有帮助[删除 UITableViewCell 上的顶部灰线](https://stackoverflow.com/questions/6417363/remove-top-gray-line-on-uitableviewcell) ，我希望它可以帮助遇到同样问题的人。

```
tableView.separatorColor = [UIColor clearColor]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T09:32:29.110

如果你有一个简单的背景改变`colorWithPatternImage`就`colorWithRed:green:blue:alpha`可以了。

```
//self.tableView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"background"]];
self.tableView.backgroundColor = [UIColor colorWithRed: green: blue: alpha:] 
```

但是对于这样的背景，如果您可以以倾斜图像构成整个背景的方式裁剪 background.png 图像，则会删除顶部的线条。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T16:06:55.857

您可能正在实现 heightForHeaderInSection 方法。要么完全删除它，要么返回 0。

```
-(CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
    return 0.0;
} 
```

# c# - 保存加密密钥的正确方法是什么？

> ID：10299388
> 
> 赞同：4
> 
> 时间：2012-04-24T13:54:09.250
> 
> 标签：c#, encryption, rsacryptoserviceprovider

我有：

```
RSACryptoServiceProvider rsa = new RSACryptoServiceProvider(); 
```

和其中之一：

```
byte[] Csp = rsa.ExportCspBlob(true);
RSAParameters parameters = rsa.ExportParameters(true); 
```

保存它们的正确方法是什么，应该使用什么文件扩展名？注意：我不是指如何加密它们。只是如何存储它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T14:49:39.977

我只会使用`RSACryptoServiceProvider.PersistKeyInCsp = true`. 确保`CspParameters.KeyContainerName`他们的密钥包含唯一可识别的名称。

要传输公钥，请使用 export to`Xml`方法。

# c# - 使用 JavaScript 与浏览器进行 C# 通信

> ID：10299389
> 
> 赞同：1
> 
> 时间：2012-04-24T13:54:11.253
> 
> 标签：c#, javascript, serial-port, tcplistener

如何从 JavaScript 向 C# 应用程序传递消息，我可以在 c# 中使用 PHP 和 tcpListner 来做到这一点（但使用 PHP 需要服务器托管），我需要 localhost 与浏览器通信 c# 应用程序（使用 javaScript 或任何其他可能的方式） , 浏览器需要将消息传递给运行在同一个 matchine 上的应用程序

你能用样品建议合适的方法吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T14:13:39.787

您可以通过以下方式执行此操作。

**第 1 步**：您必须创建一个侦听器。**.net 中的TcpListener**类或**HttpListener** 可用于开发监听器。此代码显示如何实现 TCP 侦听器。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net.Sockets;
using System.Net;
using System.Threading;

//Author : Kanishka 
namespace ServerSocketApp
{
class Server
{
 private TcpListener tcpListn = null;
 private Thread listenThread = null;
 private bool isServerListening = false;

 public Server()
 {
  tcpListn = new TcpListener(IPAddress.Any,8090);
  listenThread = new Thread(new ThreadStart(listeningToclients));
  this.isServerListening = true;
  listenThread.Start();
 }

 //listener
 private void listeningToclients()
 {
  tcpListn.Start();
  Console.WriteLine("Server started!");
  Console.WriteLine("Waiting for clients...");
  while (this.isServerListening)
  {
   TcpClient tcpClient = tcpListn.AcceptTcpClient();
   Thread clientThread = new Thread(new ParameterizedThreadStart(handleClient));
   clientThread.Start(tcpClient);
  }

 }

 //client handler
 private void handleClient(object clientObj)
 {
  TcpClient client = (TcpClient)clientObj;
  Console.WriteLine("Client connected!");

  NetworkStream stream = client.GetStream();
  ASCIIEncoding asciiEnco = new ASCIIEncoding();

  //read data from client
  byte[] byteBuffIn = new byte[client.ReceiveBufferSize];
  int length = stream.Read(byteBuffIn, 0, client.ReceiveBufferSize);
  StringBuilder clientMessage = new StringBuilder("");
  clientMessage.Append(asciiEnco.GetString(byteBuffIn));

  //write data to client
  //byte[] byteBuffOut = asciiEnco.GetBytes("Hello client! \n"+"You said : " + clientMessage.ToString() +"\n Your ID  : " + new Random().Next());
  //stream.Write(byteBuffOut, 0, byteBuffOut.Length);
  //writing data to the client is not required in this case

  stream.Flush();
  stream.Close();
  client.Close(); //close the client
 }

 public void stopServer()
 {
  this.isServerListening = false;
  Console.WriteLine("Server stoped!");
 }

}
} 
```

**第 2 步**：您可以将参数作为 GET 请求传递给创建的服务器。您可以使用 JavaScript 或 HTML 表单来传递参数。像 jQuery 和 Dojo 这样的 JavaScript 库将使 ajax 请求更容易。

```
http://localhost:8090?id=1133 
```

您必须修改上述代码以检索作为 GET 请求发送的参数。我建议使用**HttpListener**而不是**TcpListener**

一旦你完成了监听部分，剩下的部分只是处理从请求中检索到的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T13:56:36.463

您应该使用`HttpListener`该类，或者创建一个自托管的 ASP.Net Web API 项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T13:58:16.673

我认为您需要像 Comet 这样的东西，[请使用 Comet 检查此示例](http://www.codeproject.com/Articles/27699/Scalable-COMET-Combined-with-ASP-NET-Part-2)

# expect - 如何从 Expect 缓冲区字符串中提取某个数字？

> ID：10299397
> 
> 赞同：1
> 
> 时间：2012-04-24T13:54:21.143
> 
> 标签：expect

我想通过使用 Expect 脚本来获取主机的总内存。感谢我在[使用 LINUX/EXPECT 获取主机的总内存中](https://stackoverflow.com/questions/10277503/get-total-memory-of-a-host-with-linux-expect)收到的答案，我现在离最终解决方案更近了。（感谢[glenn jackman](https://stackoverflow.com/users/7552/glenn-jackman)和[Sorpigal](https://stackoverflow.com/users/180736/sorpigal)）。

连接到主机后，我执行以下行：

```
send "cat /proc/meminfo | grep MemTotal | awk '{print \$2}'\r" 
```

它返回我想要的值，但是当我得到 中包含的值时`$expect_out(buffer)`，它包含的信息比我需要的多得多，包括发送语句和前后命令提示符标志。我完全得到以下，使用`exp_internal 1`：

```
expect: set expect_out(buffer) "17# cat /proc/meminfo | grep MemTotal | awk '{print $2}'\r\n34150400\r\nCBA" 
```

我只想提取接近末尾的数字，`34150400`. 任何提示或想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T15:30:18.907

```
regexp "\n(\[0-9]+)" $expect_out(buffer) - num
puts $num   ;# => 34150400 
```

顺便说一句，您可以在不发送 shell 命令的情况下执行此操作：

```
set fid [open /proc/meminfo]
while {[gets $fid line] != -1} {
    if {[regexp {^MemTotal: *(\d+)} $line - memtotal]} {
        break
    }
}
close $fid
puts $memtotal 
```

# wordpress - 为什么总是调用 the_post_thumbnail？

> ID：10299401
> 
> 赞同：0
> 
> 时间：2012-04-24T13:54:29.373
> 
> 标签：wordpress, plugins, themes

我正在开发一个 wordpress 主题，并且在我的 header.php 中我相信我有有效的代码，但由于某种原因，缩略图总是显示在下面的代码中。

我试图实现的逻辑是：

```
if this is the homepage, and the s3slider plugin has been installed
   show the slider
else if this page has a featured image (the_post_thumbnail)
   show the thumbnail
else
   show a default image 
```

我的代码块是：

```
if (is_front_page() && function_exists(s3slider_show()) ) {
//we're on the homepage, and s3Slider exists
    s3slider_show();
} elseif ( has_post_thumbnail() ) {
//there is a featured image / thumbnail
    the_post_thumbnail();
} else {
    // the current post lacks a thumbnail
    ?><img alt="alt text" src="image.jpg" />
    <?php
} 
```

即使在主页上显示了滑块，我也无法解决这个问题，the_post_thumbnail() 输出也是如此。

是不是太晚了，我忘记了一些基本的东西？

如果我已经为 home / s3Slider 组合输入了第一个 if，我不明白为什么 the_post_thumbnail 甚至会在主页上执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:13:00.067

[`function_exists()`](http://www.php.net/function-exists)需要一个字符串：

```
function_exists( 's3slider_show' ) 
```

由于您的函数`s3slider_show`不返回字符串，因此第一个条件的计算结果始终为`false`.

# rest - 当 REST 资源链接到现有资源并对其进行扩展时，如何处理？

> ID：10299407
> 
> 赞同：6
> 
> 时间：2012-04-24T13:54:58.377
> 
> 标签：rest

我正在构建一个 REST API，其中有“书籍”和“用户”。他们只能存在一本独特的书。尽管一个用户可以拥有几本书，而不同的用户可以拥有同一本书（或引用相同的书）。用户可以向书籍添加附加信息（例如评级）。

我的问题是：当用户使用自己的设置“扩展”已经存在的 Book 资源时，映射资源的正确方法是什么？

示例：第一次使用的用户没有书，但他们可以创建书。如果这本书不存在，它就会被创建，如果它存在，他们就可以访问它。尽管他们可以向其中添加自己的私人附加信息。

这是正确的方法吗？

//所有具有基本所需信息的书籍都可以在 /books/:id 上找到 示例：/books/1

```
{
    "id":1,
    "title":"The Empire",
    "description":"Description about the book",
    "serial":1234
} 
```

//如果用户创建书“帝国”（序列号：1234），他们正在扩展现有的书，但他们添加了额外的信息，所以它实际上是一个新的 URL，但指的是书的 ID。

示例：/users/421/books/1/

```
{
    "id":1,
    "title":"The Empire",
    "description":"Description about the book",
    "serial":1234,
    "rating":5.5,
    "note":"I liked the book but it was too long."
} 
```

甚至：

```
{
    "book": {
        id":1,
        "title":"The Empire",
        "description":"Description about the book",
        "serial":1234,
    }
    "rating":5.5,
    "note":"I liked the book but it was too long."
} 
```

甚至是像 /users/421/books/1/settings/ 这样的 URL

```
{
    "rating":5.5,
    "note":"I liked the book but it was too long."
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T15:29:23.150

我建议允许“评论”与多个父母（书籍、用户）相关联，然后为评论提供规范资源，如下所示：

书`/books/{book-id}`

```
{
"id":1,
"title":"The Empire",
"description":"Description about the book",
"serial":1234
} 
```

一本书的评论`/books/{book-id}/reviews`

```
{[
{
"id":1,
"userId":user1,
"bookId":1,
"rating":5.5,
"note":"I liked the book but it was too long.",
"url":http://server/reviews/1
},
{
"id":2,
"userId":user2,
"bookId":1,
"rating":1,
"note":"boo, i didn't like it!",
"url":http://server/reviews/2
}
]} 
```

用户评论`/users/{user-id}/reviews`

```
{[
{
"id":1,
"userId":user1,
"bookId":1,
"rating":5.5,
"note":"I liked the book but it was too long.",
"url":http://server/reviews/1
},
{
"id":2,
"userId":user2,
"bookId":1,
"rating":1,
"note":"boo, i didn't like it!",
"url":http://server/reviews/2
},
{
"id":5,
"userId":user1,
"bookId":3,
"rating":2,
"note":"I like to read",
"url":http://server/reviews/5
}
]} 
```

用于审查的规范资源`/reviews/{review-id}`

```
{[
{
"id":1,
"userId":user1,
"bookId":1,
"rating":5.5,
"note":"I liked the book but it was too long.",
"url":http://server/reviews/1
},
{
"id":5,
"userId":user1,
"bookId":3,
"rating":2,
"note":"I like to read",
"url":http://server/reviews/5
}
]} 
```

创建新评论可以是用户/评论、书籍/评论或评论资源的帖子，这些 POST 服务的服务器实现会酌情默认用户 ID 或书籍 ID。

url链接的实现有atom:link等一些选择。

此外，请考虑不要将书籍、用户和评论的原始 id 公开给这些服务的客户/消费者，而是将 id 作为 URI 公开。

# c++ - UDP 客户端未正确形成数据包

> ID：10299413
> 
> 赞同：-1
> 
> 时间：2012-04-24T13:55:06.427
> 
> 标签：c++, linux, udp

我正在尝试在 Linux 中创建一个客户端以允许发送 UDP 数据包。到目前为止，程序似乎正确地形成了所有部分，但是当我尝试发送数据时，程序无法发送数据包。

[我把代码放在这里](http://pastebin.com/aMLjWTUk)，代码的示例输出如下：

```
jeremiah@ubuntu:~/Documents/Networking 2/Lab3/client$ sudo ./a.out 192.168.1.128 22222
巨大的成功
苏联帝国同志：SVN -> sin_family：2
苏联帝国同志：SVN -> sin_port：52822
苏联帝国同志：SVN -> sin_addr：-2147374912
注意同志：输入消息：红色

帝国苏联同志：数据包转储中的数据 ::::::::::::::::::::::::::::::::::::::::: start
苏联帝国同志：UPC的大小是1576
帝国苏联同志：插座：3
苏联帝国同志：UPC -> 旗帜：1
帝国苏联同志：UPC -> 偏移量：0
帝国苏联同志：UPC -> 长度：8
苏联帝国同志：UPC -> 文件名：红色
帝国苏联同志：UPC -> 数据：000000000000000000000000000000000000000000000000000000000000000000000000000000000
帝国苏联同志：UPC -> 数据：000000000000000000000000000000000000000000000000000000000000000000000000000000000
帝国苏联同志：UPC -> 数据：000000000000000000000000000000000000000000000000000000000000000000000000000000000
帝国苏联同志：UPC -> 数据：000000000000000000000000000000000000000000000000000000000000000000000000000000000
帝国苏联同志：UPC -> 数据：000000000000000000000000000000000000000000000000000000000000000000000000000000000
帝国苏联同志：UPC -> 数据：000000000000000000000000000000000000000000000000000000000000000000000000000000000
帝国苏联同志：UPC -> 数据：000000000000000000000000000000000000000000000000000000000000000000000000000000000
帝国苏联同志：UPC -> 数据：000000000000000000000000000000000000000000000000000000000000000000000000000000000
帝国苏联同志：UPC -> 数据：000000000000000000000000000000000000000000000000000000000000000000000000000000000
帝国苏联同志：UPC -> 数据：000000000000000000000000000000000000000000000000000000000000000000000000000000000
帝国苏联同志：UPC -> 数据：000000000000000000000000000000000000000000000000000000000000000000000000000000000
帝国苏联同志：UPC -> 数据：000000000000000000000000000000000000000000000000000000000000000000000000000000000
帝国苏联同志：UPC -> 数据：000000000000000000000000000000000000000000000000000000000000000000000000000000000
帝国苏联同志：UPC -> 数据：000000000000000000000000000000000000000000000000000000000000000000000000000000000
帝国苏联同志：UPC -> 数据：000000000000000000000000000000000000000000000000000000000000000000000000000000000
帝国苏联同志：UPC -> 数据：000000000000000000000000000000000000000000000000000000000000000000000000000000000
帝国苏联同志：UPC -> 数据：000000000000000000000000000000000000000000000000000000000000000000000000000000000
帝国苏联同志：UPC -> 数据：00000000000000000000000000000000000000000
苏联帝国同志：sizeof(UPC)：8
苏联帝国同志：sockaddr.sin_family：2
苏联帝国同志：sockaddr.sin_port：52822
苏联帝国同志：sockaddr.sin_addr.s_addr：-2147374912
苏联帝国同志：sizeof(sockaddr)：8
苏联帝国同志：数据包转储中的数据 :::::::::::::::::::::::::::::::::::::::::: ： 结尾

帝国苏联同志：size_sent：-1
警告同志：数据未发送：参数无效

```

它完全编译没有错误，但在 printf 函数中有来自强制转换的警告。任何可以提供的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:08:31.197

这真的很可疑：

```
int size_sent = sendto(SOCKET, UPC, sizeof(UPC)+2*MAX_MESSAGE, 0, 
                       (struct sockaddr*) &TARGET, sizeof(TARGET)+2*MAX_MESSAGE); 
```

为什么要将 2 * MAX_MESSAGE 添加到消息长度和 sockaddr 结构的大小？最后一个很可能是您的`sendto()`电话返回-1的原因。

还要记住 sizeof(UPC) 将是 4 或 8，而不是你想要的。

# iphone - NSMutableArray 在之前的 viewController 中设置时返回 null

> ID：10299421
> 
> 赞同：0
> 
> 时间：2012-04-24T13:55:30.187
> 
> 标签：iphone, nsmutablearray

我在以前的 viewController 中设置了一个 viewController 的数组，但它在 viewController 中返回 null。我也设置了它的属性。

以前的视图控制器：

```
controller.arrGUID = arr; 
```

视图控制器

```
@property(nonatomic,retain)NSMutableArray *arrGUID;  //synthesized as well. 
```

在 viewController 中使用 arrGUID 会返回 null。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:47:43.990

我认为你有问题

尝试这个

```
 controller.arrGUID = [arr retain]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:03:15.503

```
NextViewController *controller = [[NextViewController alloc]initWithNibName:@"NextViewController" bundle:nil];
controller.arrGUID = arr;// where arr is previous controller array.
[self.navigationController pushViewController:controller animated:YES];
[controller release]; 
```

在 nextviewcontroller 的 viewdidload 方法中也 nslog。

它会帮助你。

# ios - 在 UIImageView 中获取图像数组（在 UIPageViewController 中）

> ID：10299425
> 
> 赞同：5
> 
> 时间：2012-04-24T13:55:41.340
> 
> 标签：ios, xcode, uiimageview, uipageviewcontroller

我从 Apple 提供的标准的基于 PageView 的应用程序模板开始。现在，我希望应用程序中的页面显示图像，而不是文本。创建一个数组如下：

```
 _pageData = [[NSArray alloc] initWithObjects:
                 [UIImage imageNamed:@"1.png"],
                 [UIImage imageNamed:@"2.png"],
                 [UIImage imageNamed:@"3.png"],
                 nil]; 
```

该数组按以下方式处理：

```
DataViewController *dataViewController = [storyboard instantiateViewControllerWithIdentifier:@"DataViewController"];
dataViewController.dataObject = [self.pageData objectAtIndex:index];
return dataViewController; 
```

然后，在 DataViewController.h 中：

```
@interface DataViewController : UIViewController

@property (strong, nonatomic) IBOutlet UIImageView *imageView;
@property (strong, nonatomic) UIImage *dataObject; 
```

在 DataViewController.m 中，我试图通过以下方式在 de imageView 中显示图像：

```
- (void)viewWillAppear:(BOOL)animated
  {
    [super viewWillAppear:animated];

    self.imageView = [[UIImageView alloc] initWithImage:_dataObject];

    NSLog(@"dataObject %@", _dataObject);

  } 
```

但是，使用此代码，我无法成功地将图像放到 PageViewController 上。知道我怎样才能让它正常工作吗？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T14:34:34.860

这里

> ```
> self.imageView = [[UIImageView alloc] initWithImage:_dataObject]; 
> ```

您正在创建一个新的 UIImageView，它悬空未使用、不可见且没有父级。您需要以某种方式设置它的大小并将其放入父视图中

```
[<parent> addSubview:self.imageView] 
```

展示它。

如果您的原始 UIImageView 是从资源文件中读取的（我假设是因为它是 IBOutlet ），只需执行

```
self.imageView.image = _dataObject 
```

而这应该做的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T10:39:09.787

这对我有用

```
 NSArray *anArray = [NSArray arrayWithObjects:
                        [UIImage imageNamed:@"transparente.png"],
                        [UIImage imageNamed:@"21001.jpg"],
                        [UIImage imageNamed:@"21002.jpg"],
                        [UIImage imageNamed:@"21003.jpg"],
                        [UIImage imageNamed:@"21004.jpg"],
                        [UIImage imageNamed:@"transparente2.png"],
                        nil];

    _pageData = [anArray copy]; 
```

并在 dataViewController

```
- (void)viewWillAppear:(BOOL)animated {
[super viewWillAppear:animated];
self.pageImage.image = self.dataObject;
} 
```

pageImage 是一个带有 IBOutlet 的 UIImageView。

# android - 如何在 List Activity 中实现 onItemClickListener

> ID：10299426
> 
> 赞同：2
> 
> 时间：2012-04-24T13:55:42.960
> 
> 标签：android, android-layout

以下是我的 ListActivity，onCreate 代码

```
public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            fakeTripBuilder();

            setContentView(R.layout.cutom_list_view);

            SimpleAdapter adapter = new SimpleAdapter(this, list, R.layout.custom_row_view, 
                    new String[] {"stop","distance","time","icon","mode"},
                    new int[] {R.id.text_stop,R.id.text_distance, R.id.text_time, R.id.icon, R.id.text_mode});

            populateList();
            setListAdapter(adapter);
} 
```

在同一个类中我有以下方法

```
 @Override
       protected void onListItemClick(ListView l, View v, int position, long id){
           super.onListItemClick(l, v, position, id);
           Log.d("Travel","You choosed!");
           Object o = this.getListAdapter().getItem(position);
           Toast.makeText(this, "You Choosed"+o.toString(), Toast.LENGTH_LONG).show();
       } 
```

这是“custom_list_view.xml”

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:clickable="false"
    android:gravity="center_horizontal|center_vertical"
    android:orientation="vertical" >
<ListView 
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#000fff"
    android:layout_weight="2"
    android:drawSelectorOnTop="false">
</ListView>
<TextView 
    android:id="@id/android:empty"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    android:background="#FFff00"
    android:text="No data"
/>
</LinearLayout> 
```

问题是，当我点击它时不会调用 onListItemClick 方法。帮助 ！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T14:04:04.210

要在 ListActivity 中获取对 ListView 的引用，您应该调用：

```
ListView lv = getListView(); 
```

您不需要设置点击监听器，它已经有一个。只需覆盖：

```
 @Override
 public void onListItemClick(ListView l, View v, int position, long id) {
     Object item = lv.getAdapter().getItem(position);

 } 
```

在你的 xml 文件中，ListView 应该有 id：

```
android:id="@android:id/list" 
```

**编辑**

你需要删除

```
android:clickable="false" 
```

从布局中允许单击任何子视图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-23T19:29:08.593

**自从 2012 年提出这个问题以来，发生了很多变化。这是对已接受答案的更新**

要`onItemClickListener`在您的中使用`ListActivity`，只需覆盖如下`onListItemClick(...)`方法：

```
public void onListItemClick(ListView listView, View view, int position, long id) {
    ListView myListView = getListView();
    Object itemClicked = myListView.getAdapter().getItem(position);
    Toast.makeText(getApplicationContext(), "Item Clicked: " + item + " \nPosition: " + id,

    Toast.LENGTH_SHORT).show();
} 
```

**注意`getItem()`方法而不是`getItemAtPosition()`接受的答案**

**请记住：**要使其正常工作，您需要有一个带有 id 的列表视图`list`，否则您的应用程序将崩溃。

```
 <ListView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/list"
    /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T13:58:07.657

> ListView lv = (ListView) findViewById(R.layout.cutom_list_view);

您应该使用 R.id.listview_id 代替，它应该在 R.layout.cutom_list_view 中定义

像这样：

```
<ListView
  android:id="@+id/listview_id"
  android:layout_width="match_parent"
  android:layout_height="wrap_content" >
</ListView> 
```

编辑：

R.layout.cutom_list_view 是你的布局文件的 id，但是你应该通过它自己的 id 找到 listview，定义为 android:id="@+id/listview_id"，所以 id 将是 R.id.listview_id

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T13:58:17.120

如果您想捕获列表中的点击事件，请尝试覆盖 onListItemClick 方法。

# hibernate - 没有带有注释的spring休眠

> ID：10299431
> 
> 赞同：0
> 
> 时间：2012-04-24T13:55:55.240
> 
> 标签：hibernate, tomcat, annotations

我想在没有 Spring 的情况下使用 Hiberante，并且在使用 packagesToScan 时遇到了一些问题... Hibernate 找不到我的实体。我正在使用tomcat7。

这是我的配置：

```
 <hibernate-configuration>
    <session-factory>
        <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="hibernate.connection.password">password</property>
        <property name="hibernate.connection.url">jdbc:mysql://localhost/ccc</property>
        <property name="hibernate.connection.username">root</property>
        <property name="hibernate.default_schema">ccc</property>
        <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
        <property name="packagesToScan">com.ccc.db.entity</property>
    </session-factory>
</hibernate-configuration> 
```

我试图将类从构建文件夹移动到 WebContent/WEB-INF/classes 但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T14:04:55.773

`packagesToScan`是一个弹簧特性。

据我记得，您无法配置 Hibernate Core（不是 Hibernate EntityManager）来扫描类路径以查找带注释的实体。

因此，如果需要使用 Hibernate Core API ( `Session`/ `SessionFactory`)，则必须手动枚举带注释的类（例如 as `<mapping class = "..." />`）。

否则，您可以切换到支持开箱即用的类路径扫描的Hibernate EntityManager (JPA API, `EntityManager`/ )。`EntityManagerFactory`

# php - 在数字字符串的特定位置添加空格

> ID：10299432
> 
> 赞同：2
> 
> 时间：2012-04-24T13:55:57.270
> 
> 标签：php, regex, numbers, preg-replace, spaces

我想用`preg_replace()`;在一组数字之间添加空格

`$numbers = '90000800123987';`

期望的输出：`900 00 800 123 987`

在这一点上我很困惑，到目前为止我无法获得所需的输出。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T14:01:38.730

对于您的具体示例，可以这样做：

```
$numbers = '90000800123987';
$regex = '/(\\d{3})(\\d{2})(\\d{3})(\\d{3})(\\d{3})/';
$result = preg_replace($regex, '$1 $2 $3 $4 $5', $numbers); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:13:56.430

这将起作用，但可以改进。

```
preg_replace(
    '/^([0-9]{3})([0-9]{2})([0-9]{3})([0-9]{3})([0-9]{3})$/',
    '$1 $2 $3 $4 $5',
    $numbers
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-05T04:16:49.010

关于@splash的回答，多余的反斜杠不是必须的，可以省略第一个和第五个捕获组（只需将中间三个转移到替换字符串，并且在开头和结尾写空格），所以答案可以归结为：

代码：（[演示](https://3v4l.org/5tXmp)）

```
var_export(
    preg_replace('/\d{3}\K(\d{2})(\d{3})(\d{3})/', ' $1 $2 $3 ', '90000800123987')
);
output: '900 00 800 123 987' 
```

这匹配前 3 个字符，然后忘记它们，它们捕获接下来的 2 个字符 ( `$1`)，然后是接下来的 3 个字符 ( `$2`)，然后是接下来的 3 个字符 ( `$3`)。

* * *

作为学术放纵，也可以在替换字符串中没有任何捕获组或引用的情况下完成此任务。

在第 3、5、8 和 11 位数字之后找到零宽度位置，然后在这些位置添加一个空格。

*   第 4 位和第 5 位数字后面是 9 位数字和字符串的结尾。
*   其他目标 3 位字符串不在字符串末尾。
*   `\K`意味着忘记当前匹配的内容 - 因此在替换中实际上没有删除任何字符。

代码：（[演示](https://3v4l.org/qm46e)）（[模式演示](https://regex101.com/r/YOpHCv/1)）

```
var_export(
    preg_replace(
        '~(?|\d{2}(?=\d{9}$)|\d{3}(?!$))\K~',
        ' ',
        '90000800123987'
    )
); 
```

输出：

```
'900 00 800 123 987' 
```

其他工作模式包括：

*   ```
    ~(?|(?<=^\d{5})|\d{3}\K(?!$))~ 
    ```

*   ```
    ~(?|\d{2}(?<=^\d{5})|\d{3}(?!$))\K~ 
    ```

*   ```
    ~(?=(?>\d{11}|\d{9}|\d{6}|\d{3})$)~ 
    ```

*   ```
    ~(?<=^\d{3}|^\d{5}|^\d{8}|^\d{11})~ 
    ```

* * *

我发现非正则表达式技术不太有吸引力：

```
$s = '90000800123987';
var_export(
    "$s[0]$s[1]$s[2] $s[3]$s[4] $s[5]$s[6]$s[7] $s[8]$s[9]$s[10] $s[11]$s[12]$s[13]"
); 
```

或者

```
$s = '90000800123987';
var_export(
    substr($s, 0, 3)
    . ' ' . substr($s, 3, 2)
    . ' '. substr($s, 5, 3)
    . ' '. substr($s, 8, 3)
    . ' '. substr($s, 11, 3)
); 
```

或者

```
var_export(
    substr_replace(
        substr_replace(
            substr_replace(
                substr_replace(
                    '90000800123987',
                    ' ',
                    11,
                    0
                ),
                ' ',
                8,
                0
            ),
            ' ',
            5,
            0
        ),
        ' ',
        3,
        0
    )
); 
```

# c# - WPF/C# - '绑定列表 到组合框

> ID：10299434
> 
> 赞同：3
> 
> 时间：2012-04-24T13:56:11.310
> 
> 标签：c#, wpf, list, xaml, combobox

我希望我的组合框项目名称和值从我的列表中获取当然我不希望我的视图模型保存组合框项目列表。

我有一个清单 a,b,c,d

```
public List<String> ComboList { get; set; } 
```

...

```
ComboList = new List<String>();
ComboList.Add("A");
ComboList.Add("B");
ComboList.Add("C");
ComboList.Add("D"); 
```

和我的组合框

`<ComboBox Margin="29,40,0,526" Width="212" Height="35" Grid.Row="1" ItemsSource="{Binding Path=ComboList, Mode=OneTime}" SelectedValuePath="Key" DisplayMemberPath="Value"></ComboBox>`

但它给了我一个空的 ComboBox ...

![在此处输入图像描述](../Images/aa4c343aa4809f9e2543de1bd609ef5a.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T13:59:08.330

删除`SelectedValuePath`和`DisplayMemberPath`属性。他们错了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T13:58:58.967

您忘记在 InitializeComponents 进入代码隐藏之前这样做：

```
public void MainWindow(){
  this.Datacontext = this;
  InitializeComponent()
} 
```

此外，您不能直接绑定列表，您最好提供一个 ObservableCollection。这是一个例子：

```
public ObservableCollection<NetworkCard> NetworksCards { get { return m_aCards; } }

private ObservableCollection<NetworkCard> m_aCards = null;
m_aCards = new ObservableCollection<NetworkCard>(oHelper.ListNetworkCards()); 
```

# c++ - 按值传递不会调用移动构造函数

> ID：10299439
> 
> 赞同：3
> 
> 时间：2012-04-24T13:56:23.860
> 
> 标签：c++, lua, c++11, assignment-operator, rvalue-reference

我有以下小班：

```
/// RAII wrapper for a Lua reference
class reference
{
public:
    /// Construct empty reference
    reference() : m_L(NULL), m_ref(LUA_NOREF) {}

    /// Construct reference from Lua stack
    reference(lua_State* L, int i = -1) : m_L(L) {
        lua_pushvalue(L, i);
        m_ref = luaL_ref(L, LUA_REGISTRYINDEX);
    }

    /// Destructor
    ~reference() {
        if (m_L) luaL_unref(m_L, LUA_REGISTRYINDEX, m_ref);
    }

    /// Copy constructor
    reference(const reference& r) : m_L(r.m_L) {
        r.push();
        m_ref = luaL_ref(m_L, LUA_REGISTRYINDEX);
    }

    /// Move constructor
    reference(reference&& r) : m_L(r.m_L), m_ref(r.m_ref) {
        r.m_L = NULL; // make sure r's destructor is NOP
    }

    /// Assignment operator
    reference& operator=(reference r) {
        swap(r, *this);
        return *this;
    }

    /// Swap with other reference
    friend void swap(reference& a, reference& b)
    {
        std::swap(a.m_L,   b.m_L);
        std::swap(a.m_ref, b.m_ref);
    }

    void push() const { lua_rawgeti(m_L, LUA_REGISTRYINDEX, m_ref); }

private:        
    lua_State* m_L;
    int        m_ref;
}; 
```

请注意，赋值运算符是使用[复制和交换习语](https://stackoverflow.com/a/3279550/728847)实现的，如果与右值一起使用，则[应该](http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/)调用移动构造函数。

但是，`reference r; r = reference(L);`在输入赋值运算符之前调用复制构造函数。为什么，哦，为什么？

编写[两个赋值运算符](https://stackoverflow.com/questions/5976459/how-to-actually-implement-the-rule-of-five)有助于：

```
 /// Assignment operator
    reference& operator=(const reference& r) {
        reference copy(r);
        swap(copy, *this);
        return *this;
    }

    /// Move assignment operator
    reference& operator=(reference&& r) {
        swap(r, *this);
        return *this;
    } 
```

但是，以禁用复制省略为代价。

值传递不应该按预期在这里工作吗？还是我的编译器（Mac 上的 Clang）坏了？

## 更新：

以下小测试用例可以正常工作：

```
#include <iostream>

using namespace std;

struct resource
{
    resource(int i=1) : i(i) { print(); }
    ~resource() { print(); i = 0; }

    void print() const
    {
        cout << hex << " " << uint16_t(uintptr_t(this)) << ") " << dec;
    }

    int i;
};

resource* alloc_res()
{
    cout << " (alloc_res";
    return new resource(0);
}

resource* copy_res(resource* r)
{
    cout << " (copy_res";
    return new resource(r->i);
}

void free_res(resource* r)
{
    if (r) cout << " (free_res";
    delete r;
}

struct Test
{
    void print() const
    {
        cout << hex << " [&="   << uint16_t(uintptr_t(this))
             << ", r=" << uint16_t(uintptr_t(r)) << "] " << dec;
    }

    explicit Test(int j = 0) : r(j ? alloc_res() : NULL) {
        cout << "constructor"; print();
        cout << endl;
    }

    Test(Test&& t) : r(t.r) {
        cout << "move"; print(); cout << "from"; t.print();
        t.r = nullptr;
        cout << endl;
    }

    Test(const Test& t) : r(t.r ? copy_res(t.r) : nullptr) {
        cout << "copy"; print(); cout << "from"; t.print();
        cout << endl;
    }

    Test& operator=(Test t) {
        cout << "assignment"; print(); cout << "from"; t.print(); cout << "  ";
        swap(t);
        return *this;
        cout << endl;
    }

    void swap(Test& t)
    {
        cout << "swapping"; print();
        cout << "and"; t.print();
        std::swap(r, t.r);
        cout << endl;
    }

    ~Test()
    {
        cout << "destructor"; print();
        free_res(r);
        cout << endl;
    }

    resource* r;
};

int main()
{
    Test t;
    t = Test(5);
} 
```

`clang++ --std=c++11 -O0 -fno-elide-constructors test.cpp -o test`如果使用移动构造函数编译，则调用。（感谢切换，本杰明林德利）

现在的问题是：为什么它现在有效？有什么不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:08:49.180

没有合法的 C++11 情况会导致在`r = reference(L);`.

这实际上等同于`r.operator =(reference(L));`。由于`operator=`按值获取其参数，因此会发生两种情况之一。

1.  临时值将用于构造值。由于是临时的，所以会*优先*调用`reference`的move构造函数，从而引起move。
2.  临时值将直接省略到 value 参数中。没有复制或移动。

在此之后，`operator=`将被调用，它不会在内部进行任何复制。

所以这看起来像一个编译器错误。

# ios - iPhone上的幻灯片和过渡？

> ID：10299440
> 
> 赞同：3
> 
> 时间：2012-04-24T13:56:35.803
> 
> 标签：ios, xcode, slideshow, transition

我用以下代码连接了问题。

如果我使用这些代码并在模拟器上运行它，他只会向我显示数组中的前两张图片以及过渡。如果我在 Iphone 上运行它，他只给我看第一张照片。他也没有重复这些照片。-

我在做什么错？

```
 - (void)viewDidLoad{
    [super viewDidLoad];

    welcomePhoto = [NSArray arrayWithObjects:@"Bild.jpeg",@"Bild1.jpeg", @"Bild2.png", nil];
    imageView.image = [UIImage imageNamed:[welcomePhoto objectAtIndex:0]];
    [NSTimer scheduledTimerWithTimeInterval:3.0 target:self selector:@selector(transitionPhotos) userInfo:nil repeats:YES];
}

-(void)transitionPhotos{
    int photoCount;
    if (photoCount < [welcomePhoto count] - 1){
        photoCount ++;
    }else{
        photoCount = 0;
    }
    [UIView transitionWithView:self.imageView
                      duration:2.0
                       options:UIViewAnimationOptionTransitionCrossDissolve
                    animations:^{ imageView.image = [UIImage imageNamed:[welcomePhoto objectAtIndex:photoCount]]; }
                    completion:NULL];    
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T14:03:01.007

尝试在 viewDidLoad 中添加它。

```
UIImageView* animatedImageView = [[UIImageView alloc] initWithFrame:CGRectMake(10, 90, 100, 100)];
[self.view addSubview:animatedImageView];
animatedImageView.animationImages = [NSArray arrayWithObjects:    
                                     [UIImage imageNamed:@"bild.png"],
                                     [UIImage imageNamed:@"bild.png"],
                                     [UIImage imageNamed:@"bild.png"], nil]; //etc
animatedImageView.animationDuration = 3.0f * [animatedImageView.animationImages count];
animatedImageView.animationRepeatCount = 0;
[animatedImageView startAnimating];
[self.view addSubview: animatedImageView]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-29T09:39:43.623

试试这个代码

```
 NSArray *imagesArray;
 int photoCount;
 UIImageView *imageView;
-(void)setupImageView{
     photoCount = 0;
     [[NSArray alloc]initWithObjects:[UIImage imageNamed:@"imgA.png"] ,[UIImage imageNamed:@"imgB.png"] ,[UIImage imageNamed:@"imgC.png"] ,[UIImage imageNamed:@"imgD.png"] ,[UIImage imageNamed:@"imgE.png"] , nil];         imageView =[[UIImageView alloc]initWithFrame:CGRectMake(0, 0, width, height)];
     imageView.image = [imagesArray objectAtIndex:photoCount];
     [self.view addSubview:imageView];
     [NSTimer scheduledTimerWithTimeInterval:20.0 target:self selector:@selector(transitionPhotos) userInfo:nil repeats:YES];

 }

 -(void)transitionPhotos{

if (photoCount < [imagesArray count] - 1){
    photoCount ++;
}else{
    photoCount = 0;
}
[UIView transitionWithView:self.imageView1
                  duration:2.0
                   options:UIViewAnimationOptionTransitionCrossDissolve
                animations:^{ imageView.image = [imagesArray objectAtIndex:photoCount]; }
                completion:NULL];    
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T14:38:14.313

我找到了。您应该跳过在 transitionPhotos 中初始化 photoCount。使其成为 iVar 或属性。

# html - 在div中垂直居中文本？

> ID：10299445
> 
> 赞同：0
> 
> 时间：2012-04-24T13:56:44.460
> 
> 标签：html, css

我似乎无法在我的 div 的中心垂直居中文本。它一直漂浮在顶部。这是我的代码：CSS

```
.dialer{
background-image: url('http://v4m.mobi/php/fb/images/close.png'); 
background-repeat: none;  
width: 100; 
height: 40; 
margin: 0 auto;
-moz-box-shadow: 0 12px 8px -8px rgba(0,0,0,0.7);
-webkit-box-shadow: 0 12px 8px -8px rgba(0,0,0,0.7);
box-shadow: 0 12px 8px -8px rgba(0,0,0,0.7);
text-align: center;
} 
```

HTML

```
<div class="dialer" align="center"><a href="http://v4m.mobi/php/fb/index.php"   
style="color: #ffffff; font-size: 18px; font-weight: bold; text-decoration: none; 
margin-top: 20px;">Close App</a></div> 
```

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T14:39:03.477

试试这个

[http://css-tricks.com/vertically-center-multi-lined-text/](http://css-tricks.com/vertically-center-multi-lined-text/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T13:59:11.250

添加`vertical-align: middle;`到`.dialer`.

您也可以这样做`margin: auto auto;`，因为您的高度和宽度具有固定值。但是，您需要指定值的“类型”，例如`px`,`%`或任何适合您的目的。

您也可以像这样进行相对定位：

```
.dialer {
    ...
    position: relative;
    top: 47%;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T14:02:27.257

从 a 标签中删除“margin-top：20px”，然后使用类似：

```
.dialer {
    ...
    height: 40px;
}

.dialer a {
    line-height: 40px;
} 
```

...但这仅在您知道文本适合一行时才有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T14:10:02.103

这是一个有效的小提琴：http: [//jsfiddle.net/PvVr6/4/](http://jsfiddle.net/PvVr6/4/) 我已经更新了小提琴，所以它也可以处理多行内容。

```
.dialer{
       ... 
       width: 100px;
       height: 40px;
       ...
       vertical-align: middle;
    }

    .dialer a {
        display: inline-block;  
    } 
```

# objective-c - 贝宝 iOS 集成

> ID：10299449
> 
> 赞同：0
> 
> 时间：2012-04-24T13:57:00.343
> 
> 标签：objective-c, ios, paypal

我做了按钮，当我按下它时调用此方法，在 iPhone 模拟器 5 上出现错误，在 iPhone 模拟器 4.3 上工作成功，但在多次点击按钮后：

```
- (void)simplePayment {
//dismiss any native keyboards

[PayPal initializeWithAppID:@"APP-80W284485P519543T" forEnvironment:ENV_SANDBOX];

//optional, set shippingEnabled to TRUE if you want to display shipping
//options to the user, default: TRUE
[PayPal getPayPalInst].shippingEnabled = TRUE;

//optional, set dynamicAmountUpdateEnabled to TRUE if you want to compute
//shipping and tax based on the user's address choice, default: FALSE
[PayPal getPayPalInst].dynamicAmountUpdateEnabled = TRUE;

//optional, choose who pays the fee, default: FEEPAYER_EACHRECEIVER
[PayPal getPayPalInst].feePayer = FEEPAYER_EACHRECEIVER;

//for a payment with a single recipient, use a PayPalPayment object
PayPalPayment *payment = [[[PayPalPayment alloc] init] autorelease];
payment.recipient = @"example-merchant-1@paypal.com";
payment.paymentCurrency = @"USD";
payment.description = @"Teddy Bear";
payment.merchantName = @"Joe's Bear Emporium";

//subtotal of all items, without tax and shipping
payment.subTotal = [NSDecimalNumber decimalNumberWithString:@"10"];

//invoiceData is a PayPalInvoiceData object which contains tax, shipping, and a list of PayPalInvoiceItem objects
payment.invoiceData = [[[PayPalInvoiceData alloc] init] autorelease];
payment.invoiceData.totalShipping = [NSDecimalNumber decimalNumberWithString:@"2"];
payment.invoiceData.totalTax = [NSDecimalNumber decimalNumberWithString:@"0.35"];

//invoiceItems is a list of PayPalInvoiceItem objects
//NOTE: sum of totalPrice for all items must equal payment.subTotal
//NOTE: example only shows a single item, but you can have more than one
payment.invoiceData.invoiceItems = [NSMutableArray array];
PayPalInvoiceItem *item = [[[PayPalInvoiceItem alloc] init] autorelease];
item.totalPrice = payment.subTotal;
item.name = @"Teddy";
[payment.invoiceData.invoiceItems addObject:item];

[[PayPal getPayPalInst] checkoutWithPayment:payment]; 
```

}

**iPhone 5 模拟器上的错误**

```
> Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[__NSCFConstantString
> rangeOfString:options:range:locale:]: nil argument'
> 
> *** First throw call stack: (0x142df1c 0x15c052e 0x13cfd38 0x13cfcaa 0xd00681 0xd0e35c 0x5400e 0x6a373 0x70958 0x6e823 0x543d9b 0x765be
> 0x763a1 0x545144 0x5453bb 0x546138 0x4b5b41 0x4bb031 0x4b531f 0x51fb
> 0x9889 0x54de 0x34df 0x2ff4 0x48084c 0x4807e2 0x52777a 0x527c4a
> 0x526ee4 0x4a6002 0x4a620a 0x48c60c 0x47fd52 0x1b968f6 0x13fd31a
> 0x1358d07 0x1356e93 0x1356750 0x1356671 0x1b950c3 0x1b95188 0x47dc29
> 0x294c 0x2885 0x1) terminate called throwing an exceptionsharedlibrary
> apply-load-rules all Current language:  auto; currently objective-c
> (gdb) 
```

**我应该使用贝宝按钮吗？**

```
UIButton *button = [[PayPal getPayPalInst] getPayButtonWithTarget:self andAction:action andButtonType:type]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:20:03.917

Library Support for the devices and OS versions. The Mobile Payments Library fully supports OS 4.0 as well as the Apple iPad. You can compile the library files into the following configurations:

> • 3.0, 3.1.x (iPhone only) • 3.2 (iPad only) • 3.x (Universal) • 4.x

The demo application also fully supports OS 4.0 and the Apple iPad. You can compile the demo application into the preceding configurations. The single library file can be used to support armv6 and armv7 architectures for SDK 4.0 and below. Support is only provided for Xcode 3.2.3 at this time.

# javascript - 如何在 html 编辑器中找出 img-tag 是否位于插入符节点的左侧？

> ID：10299451
> 
> 赞同：3
> 
> 时间：2012-04-24T13:57:08.113
> 
> 标签：javascript, jquery, html, dom, html-editor

我正在使用 html 编辑器来编辑内容。现在我需要确保一种非常特殊的元素不会被删除（具有特殊类的图像）。

对于使用 BACKSPACE、DELETE、CTRL + X/CMD + X 的非折叠选择/范围的用例，我找到了解决方案，但我仍在寻找选择/范围未折叠且下一个 Backspace 将删除我的一个特殊图像。

**我如何检测下一个 Backspace/Delete 是否会删除其中一个 img-tags ？**

示例： CARET 标记插入符号/光标位置。如果下一步将按下退格键，则图像将被删除。我怎样才能发现这种情况？

```
<p>Some Text <b>here <img class="my class" src="..."/></b>CARET some text</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:32:08.637

对于检查插入符号是否在图像旁边的情况，这是我对类似问题的回答。它依赖于 Rangy 来支持 IE < 9，但可以很容易地使其不依赖于 Rangy。

答案只考虑退格，但也可以很容易地适应工作`Delete`。

[https://stackoverflow.com/a/10020476/96100](https://stackoverflow.com/a/10020476/96100)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T09:31:27.670

`onkeyup`下面的代码用(and )检测插入符号周围的元素`onselectionchange`，但它仅适用于 IE。也许它可以“翻译”成jQuery。

```
function detectClass(){
    var range, parentR, parentL;
    range = document.selection.createRange();
    range.moveStart('character',1);
    range.moveEnd('character',1);
    parentR = range.parentElement();
    range.moveStart('character',-2);
    range.moveEnd('character',-2);
    parentL = range.parentElement();
    if (parentR.className == 'special'){/* special on right */}
    if (parentL.className == 'special'){/* special on left */}
    return;
} 
```

# cocoa - NSNumberFormatter 失败，值为 nil

> ID：10299455
> 
> 赞同：2
> 
> 时间：2012-04-24T13:57:11.717
> 
> 标签：cocoa, interface-builder, cocoa-bindings, nstextfield, nsnumberformatter

我一定遗漏了一些非常明显的东西，但我已经看了一遍，找不到解决方案。

在 Interface Builder 中，我将 NSNumberFormatter 连接到 NSTextField，我已将值绑定到浮点值。这一切都按预期工作，数字得到验证和更新。除非我输入一个空字符串，否则我会得到一个异常：

```
Exception detected while handling key input.
[<ResolutionSetting 0x11d029430> setNilValueForKey]: could not set nil as the value for the key scale. 
```

如果文本字段为空，有什么方法可以让 NSTextField 返回一个空字符串 (@"") 而不是 nil？或者，有没有办法让 NSNumberFormatter 处理 nil 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:15:06.167

setNilValueForKey: 方法的默认行为是引发异常。您需要在代码中实现此方法以覆盖默认行为。例如，在未输入任何内容时分配 0.0 值。例子：

```
- (void)setNilValueForKey:(NSString *)key{
//here you can either assign @"" or 0.0
} 
```

您还可以在数字格式化程序属性检查器中指定最小值和最大值。

这个主题在苹果文档的“Key-Value Coding Programming Guide”和“Cocoa Programming for Mac OS X”的第 7 章中有介绍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-15T22:12:05.637

将`nilSymbol`of your设置`NSNumberFormatter`为非空字符串。

`NSTextField`then 不再抛出异常，而是向用户抱怨这是`""`一个无效值。我不确定为什么会这样，但这是我找到的最简单的解决方案。

```
yourNumberFormatter.nilSymbol = "?" 
```

# c# - 是列表 .ForEach() 方法不见了？

> ID：10299458
> 
> 赞同：46
> 
> 时间：2012-04-24T13:57:12.360
> 
> 标签：c#, .net, windows-8, windows-store-apps

我最近开始涉足 Windows 8 Metro，发现我的一个老朋友似乎失踪了。

我倾向于使用这种`.ForEach()`方法而不是使用传统`foreach()`构造，并且我很快意识到这种方法不可用。例如，此代码不会在 Metro 应用程序下编译：

```
var list = new List<string>();

list.ForEach(System.Diagnostics.Debug.WriteLine); 
```

我已经搜索过是否可以找到有关此的任何讨论，但无法找到。我只是迟钝，还是真的消失了？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-24T13:58:57.903

[确实没了：](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/758f7b98-e3ce-41e5-82a2-109f1df446c2)

> List<T>.ForEach 已在 Metro 风格应用程序中删除。虽然该方法看起来很简单，但当列表被传递给 ForEach 的方法改变时，它有许多潜在的问题。相反，建议您简单地使用 foreach 循环。
> 
> * * *
> 
> 韦斯憔悴 | .NET 框架团队 (BCL) | [http://blogs.msdn.com/b/bclteam/](http://blogs.msdn.com/b/bclteam/)

然而，非常奇怪的是，它出现在[文档](http://msdn.microsoft.com/en-us/library/windows/apps/bwabdf9z.aspx)中，其中没有任何地方说明 .NET 不支持 Windows 应用商店应用程序（以前是 .NET 用于 Metro 风格应用程序）。也许这只是部分文档团队的疏忽。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-04-24T14:04:16.673

要了解它可能不再包含在内的原因，请阅读 Microsoft C# 团队工作人员的这篇文章：http: [//blogs.msdn.com/b/ericlippert/archive/2009/05/18/foreach -vs-foreach.aspx](http://blogs.msdn.com/b/ericlippert/archive/2009/05/18/foreach-vs-foreach.aspx)

基本上，这是哲学。“LINQ”特性受到函数式编程范式的高度启发，而 ForEach 扩展与此背道而驰……它鼓励糟糕的函数式风格。

另请参阅此答案以获取更多详细信息：

> [https://stackoverflow.com/a/529197/3043](https://stackoverflow.com/a/529197/3043)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-04-24T14:00:56.643

当然，另一种方法是自己定义它：

```
public static IEnumerable<T> ForEach<T>(this IEnumerable<T> enumeration, Action<T> action)
{
    foreach(T item in enumeration)
    {
        action(item);
        yield return item;
    }
} 
```

信用：[LINQ 等效于 IEnumerable<T> 的 foreach](https://stackoverflow.com/questions/200574/linq-equivalent-of-foreach-for-ienumerablet)

（注：不可重复）

# android - 从 onClick 方法中的前一个 Activity 获取额外的字符串值

> ID：10299461
> 
> 赞同：0
> 
> 时间：2012-04-24T13:57:28.687
> 
> 标签：android

我的类实现了一个 onClickListener，所以我这样做了：

创建：

```
 final ImageButton btn_audio = (ImageButton)findViewById(R.id.btn_tool_audio);
                    btn_audio.setOnClickListener(this); 
```

onClick 方法：

```
@Override
    public void onClick(View v) {
        switch(v.getId()){
          case R.id.btn_tool_audio:
              Bundle extras = getIntent().getExtras();
          String audio_text_url = extras.getString("audio_text_url");
              Intent launchAudio= new Intent(Intent.ACTION_VIEW, audio_text_url);
              startActivity(launchAudio);
               break; 
```

但是字符串的值为'null'，问题是我如何能够从onClick方法中的前一个活动中获取它的值？

仅供参考，当我在 onCreate 中调用 extra 时，我在获取值方面没有任何问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T14:06:45.520

尝试将 onCreate 中 extras 的 String 引用到成员并稍后使用它？

```
private String _saveMe;

protected void onCreate(Bundle savedInstanceState) {

   _saveMe = getIntent().getExtras().getString("audio_text_url");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T14:30:40.650

采用

```
Bundle extras = YOURCURRENTACTVITY.this.getIntent().getExtras(); 
```

代替

```
Bundle extras = getIntent().getExtras(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T14:05:23.993

*也许从on​​Create*中取出捆绑包并稍后使用它。

```
Bundle bndl = null;

protected void onCreate(Bundle savedInstanceState) {
   ...
   ...
   bndl = getIntent().getExtras();
}

@Override
    public void onClick(View v) {
        switch(v.getId()){
          case R.id.btn_tool_audio:

          String audio_text_url = bndl.getString("audio_text_url");
              Intent launchAudio= new Intent(Intent.ACTION_VIEW, audio_text_url);
              startActivity(launchAudio);
               break; 
```

# c# - C#，服务器 A 上的 Web 应用程序将文件写入服务器 B

> ID：10299462
> 
> 赞同：1
> 
> 时间：2012-04-24T13:57:43.330
> 
> 标签：c#, file, permissions, writing

好的，所以我有一个正在服务器“A”上开发的 Web 应用程序，以及一个在服务器“B”上读取/写入/写入的文件夹（“F”）。服务器“A”上的 Web 应用程序在 A 上的身份“网络服务”下运行。在服务器 B 上，“每个人”都有权写入“F”，但是当应用程序尝试写入此文件夹时，它会得到一个权限被拒绝错误。

在权限等方面我有点缺乏经验，所以我的问题是，是否“A”上的“网络服务”帐户不被视为服务器“B”上的“所有人”，如果是这样，有没有办法解决这个问题而不必将该帐户添加到“每个人”组？

附加信息：

*   最初我试图像这样写入服务器：

    `File.write( "\\B\c$\foobar\" + filename...`

*   但我知道这有问题，所以我改为以下内容：

    `File.write( "\\B\B-sharedfolder\foobar\" + filename...`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T22:45:50.767

好的，所以我自己解决了。事实证明，虽然该帐户确实有权写入该文件夹，但它无权写入该文件夹所在的共享。我只是通过专门为该文件夹创建一个新共享来修复它，然后授予权限在该共享到进行写入的帐户上。

# c# - 与 LINQ 相比，为什么 Array.Sort() 这么慢？

> ID：10299464
> 
> 赞同：22
> 
> 时间：2012-04-24T13:57:51.083
> 
> 标签：c#, arrays, linq, sorting

我制作了快速测试应用程序，将 LINQ 排序与自定义对象上的 Array.Sort 进行比较。Array.Sort 似乎非常慢！

我制作了这样的自定义类：

```
class Person : IComparable<Person>
{
    public int Age { get; set; }
    public string Name { get; set; }

    public int CompareTo(Person obj)
    {
        return this.Age.CompareTo(obj.Age);
    }

    public Person()
    { }

} 
```

然后我在 main() 中做了我的测试人员：

```
string name = "Mr. Tomek";

Random r = new Random();
int size = 10000000;

DateTime start, end;
Person[] people1 = new Person[size];
Person[] people2 = new Person[size];

for (int i = 0; i < size; i++)
{
     people1[i] = new Person();
     people1[i].Age = r.Next(0, 10000);
     people1[i].Name = name;

     people2[i] = new Person();
     people2[i].Age = people1[i].Age;
     people2[i].Name = people1[i].Name;
} 
```

之后，我测量了按 Array.Sort 和 LINQ 排序的时间：

```
start = DateTime.Now;
var sort = from s in people2
           orderby s.Age
           select s;
end = DateTime.Now;
Console.WriteLine("LINQ: ");
Console.WriteLine((end - start).TotalMilliseconds);

start = DateTime.Now;
Array.Sort(people1,((Person p1, Person p2)=>{return p1.CompareTo(p2);}));
end = DateTime.Now;

Console.WriteLine("IComparable: ");
Console.WriteLine((end - start).TotalMilliseconds);

Console.ReadLine(); 
```

Linq 时间：大约 1 或 2 毫秒

Array.Sort：超过 16**秒！**

所有数组都已排序（LINQ 生成新集合，原始数组未排序），但 Array.Sort 非常慢！怎么解释？（在 DEBUG 和 RELEASE 模式下 Array.Sort 极度失败）

我在使用 Array.Sort 排序时粘贴了带有 lambda 表达式的代码，但无论有没有它都是一样的。（类 Person 实现 IComparable 接口）

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-04-24T14:00:31.810

你的 Linq 查询甚至没有被执行，因为你没有得到结果。这称为[延迟执行](http://blogs.msdn.com/b/charlie/archive/2007/12/09/deferred-execution.aspx)。仅当您实际枚举结果时才会执行查询。

使用类似的东西`var results = sort.ToArray()`来执行查询，然后你会得到更准确的结果。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-24T14:01:19.263

LINQ 是懒惰的。你`people2`实际上并没有被排序，LINQ 只是创建了一个临时的“承诺对象”，它将*被*排序。为了让它真正发生，你必须强制对`Console.WriteLine`排序结果进行评估，将其转换为列表/数组或做任何其他类似的事情。

查看更多：[延迟执行](http://msdn.microsoft.com/en-us/library/bb397906.aspx)。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-24T14:01:48.220

Linq 语句返回`IEnumerable<T>`或风格， this （或使用`yield`关键字的任何内容）仅在您*迭代*它时执行。Linq 库中可用的大多数操作（不是全部）[都是惰性/延迟](http://blogs.msdn.com/b/ericwhite/archive/2006/10/04/lazy-evaluation-_2800_and-in-contrast_2c00_-eager-evaluation_2900_.aspx)的。

你没有迭代它，所以你实际上并没有执行排序。

您需要强制进行完整的迭代。将结果粘贴在 List 中将完全迭代返回的枚举：

```
var sort = (from s in people2
            orderby s.Age
            select s).ToList(); 
```

只有这样，您才会将苹果与苹果进行比较。

事实上，*在*`orderby`排序（

 *```
var sort = from s in people2
           orderby s.Age
           select s;

var s = sort.First(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T14:09:07.183

尝试更改这部分并再次进行测试。

```
 start = DateTime.Now;
    var sort = (from s in people2
               orderby s.Age
               select s).ToList();
    end = DateTime.Now; 
```

这将评估 LINQ 表达式。*

# httpresponse - 通过 Wicket Link 通过 HttpServletResponse 发送 BIRT 文件会导致 IllegalStateException

> ID：10299466
> 
> 赞同：0
> 
> 时间：2012-04-24T13:57:53.827
> 
> 标签：httpresponse, birt, illegalstateexception, wicket-1.5

在我的 Wicket Link 中的某个地方，它调用了一个实用程序，该实用程序提供了一个由 BIRT 生成的报告文件，我得到了一个 IllegalStateException。

从 Wicket 页面：

```
Link<Void> downloadLink = new Link<Void>("download") {
    private static final long serialVersionUID = 1L;

    @Override
    public void onClick() {

        HttpServletResponse response =
                (HttpServletResponse)((WebResponse)getResponse()).getContainerResponse();
        ReportUtility.getInstance().serveFile("myFileName.rptdesign", "pdf", response, null);

    }

};
add (downloadLink); 
```

从 ReportUtility.java：

```
public void serveFile(String reportDesignFile, String extType,
        HttpServletResponse response, Map<String, Object> paramMap) {

    InputStream is = null;
    ServletOutputStream os = null;
    try {
        is = ReportUtility.class.getResourceAsStream(reportDesignFile);
        os = response.getOutputStream();

        IReportRunnable irr = engine.openReportDesign(is);
        IRunAndRenderTask task = engine.createRunAndRenderTask(irr);

        HTMLRenderOption options = new HTMLRenderOption();
        options.setOutputFormat(extType);
        options.closeOutputStreamOnExit(true);
        options.setOutputStream(os);

        // to force open/save/cancel with our specified filename
        String outputFileName = createReportFileName(reportDesignFile, extType);
        response.addHeader("Content-Disposition", "attachment;filename=" + outputFileName);

        if (paramMap != null) {
            task.setParameterValues(paramMap);
        }
        task.setRenderOption(options);      
        task.run();

    }
    catch (EngineException ex) {
        logger.error("Engine Exception while serving file", ex);
        throw new RuntimeException(ex);
    }
    catch (IOException ioex) {
        logger.error("IO Exception while openning response output stream", ioex);
        throw new RuntimeException(ioex);
    }

    finally {
        try {
            if (os != null)
                os.close();
            if (is != null)
                is.close();
        } catch (IOException e) {
            // ignore
        }
    }
} 
```

如果重要，createReportFileName 方法会将今天的日期和正确的文件扩展名附加到报告设计文件的基本名称，即“myFileName.rptdesign”变为“myFileName_04_24_2012.pdf”

这是 statck 跟踪：

```
Apr 24, 2012 9:35:04 AM org.apache.catalina.core.StandardWrapperValve invoke
    SEVERE: Servlet.service() for servlet default threw exception
    java.lang.IllegalStateException
at org.apache.catalina.connector.ResponseFacade.sendRedirect(ResponseFacade.java:435)
at org.apache.wicket.protocol.http.servlet.ServletWebResponse.sendRedirect(ServletWebResponse.java:230)
at org.apache.wicket.protocol.http.BufferedWebResponse$SendRedirectAction.invoke(BufferedWebResponse.java:392)
at org.apache.wicket.protocol.http.BufferedWebResponse.writeTo(BufferedWebResponse.java:580)
at org.apache.wicket.protocol.http.HeaderBufferingWebResponse.flush(HeaderBufferingWebResponse.java:89)
at org.apache.wicket.protocol.http.WicketFilter.processRequest(WicketFilter.java:195)
at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:241)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:113)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run(Unknown Source) 
```

重要的是要说明这不会影响操作：用户单击，打开/保存/取消出现，文件来了，看起来很漂亮。然而，在 ward 之后，无论用户接下来尝试做什么，都会向我们的错误页面发送 StalePageException。之后，一切又恢复正常。

我怀疑这涉及到 HttpServletResponse，或者我是如何从 Wicket 获取它的。但是，我将文件添加到带有标题的响应的那部分代码几乎完全是从 BIRT 的教程中复制的。（也许 BIRT 和 Wicket 只是不喜欢对方。）

我注意到我自己的代码都没有显示在堆栈跟踪中。此外，我尝试在少数几个地方“捕获” IllegalStateException，包括 onClick、serveFile 甚至我的 Wicket 应用程序，但均未成功。当然，即使我能抓住它，我也宁愿一开始就没有引起它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:46:37.453

提供报告的更好方法是实现您自己的 ResourceStream (...implements `IResourceStream`)。当用户单击时，您的实现会返回生成的报告。

以下是一些示例，如何添加将报告流式传输到客户端的检票口链接：

```
add(new Link("reportAsPdfButton") {
    @Override
    public void onClick() {
        BirtReportResourceStream brrs = new BirtReportResourceStream();
        getRequestCycle().scheduleRequestHandlerAfterCurrent(new ResourceStreamRequestHandler(brrs, "your_report_name.pdf"));
    }
}); 
```

这是一个简短的示例，用于实现 IResourceStream：

```
public class BirtReportResourceStream implements IResourceStream {
    private byte[] content = null;

    ...

    public BirtReportResourceStream() {
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        EngineConfig config = new EngineConfig();
        config.setEngineHome(basePath + "/WEB-INF/ext_lib/");

        try {
            Platform.startup(config);
            IReportEngineFactory factory = (IReportEngineFactory) Platform.createFactoryObject(IReportEngineFactory.EXTENSION_REPORT_ENGINE_FACTORY);
            IReportEngine engine = factory.createReportEngine(config);
            IReportRunnable report = engine.openReportDesign("path/to/your/report-definiton.rpt");
            IRunAndRenderTask task = engine.createRunAndRenderTask(report);

            if (null != getParameter()) {
                task.setParameterValues(getParameter());
            }  

            PDFRenderOption options = new PDFRenderOption();
            options.setOutputFormat(format.toString().toLowerCase());
            options.setOutputStream(baos);
            task.setRenderOption(options);
            task.run();
            task.close();
        } catch (BirtException e) {
            // handle the exception...
        }

        content = baos.toByteArray();
    }

    public InputStream getInputStream() throws ResourceStreamNotFoundException {
        return new ByteArrayInputStream(content);
    }

    ...
} 
```

还有一些方法可以实现，但它们很简单。最复杂的部分是找出如何创建报告并将其流式传输到字节数组以及如何将其流式传输到客户端。这两种方法如上所示。

希望能帮助到你。

# java - 在服务器端流上请求长寿命 access_token

> ID：10299467
> 
> 赞同：0
> 
> 时间：2012-04-24T13:57:56.153
> 
> 标签：java, facebook, facebook-graph-api, facebook-access-token

我有一个 Java 网络应用程序，可以将项目发布到我们的用户 facebook 墙上，当用户最初注册时，我们会得到一个 60 天的 access_token，它会保存到我们的数据库中，现在离线访问已被删除，我使用我们的“使用 facebook 登录”按钮在用户登录我们的网站时更新令牌，这一切都很好，因为他们通常会相隔 60 天以上访问。

我已经实现了上述内容并且效果很好......但后来我发现登录操作生成的访问令牌会在 1 小时后过期......显然不好，我们不能在他们不在的时候发布到他们的墙上.

下面的代码演示了我们如何通过 signed_request 方法（在 Java SEAM 应用程序中）获取令牌，这工作正常，但令牌是短暂的

谁能建议如何确保代币是 60 天的类型

谢谢

```
public void loginWithFacebook(){
    accessToken = null;
    try {
        accessToken = FaceBookSecurity.getFBAccessToken();
    } catch (Exception e) {
        log.error("Error getting FB access token: "+e);
    }
    FacebookClient facebookClient = new DefaultFacebookClient(accessToken);
    com.restfb.types.User facebookUser = facebookClient.fetchObject("me", com.restfb.types.User.class);
    facebookEmail = facebookUser.getEmail();
    if (facebookEmail != null) {
        new RunAsOperation(true) {
            public void execute() {
                user = ((UserDAO)Component.getInstance("userDAO")).findByEmail(StringUtils.lowerCase(facebookEmail));
                if (user != null && user.getFacebookToken() != null && !accessToken.equals(user.getFacebookToken())) {
                    user.setFacebookToken(accessToken);
                    log.error("FB: updating "+user.getFirstname()+" "+user.getSurname()+"s FB token to: "+accessToken);
                }
            }
        }.run();
        if (user != null) {
            //set the user as logged in

            return;
        }
    }
    messagePoster.postPopupErrorMessage(messages.get("facebookLoginFailed"));
}

public static String getFBAccessToken()
        throws Exception {

    HttpServletRequest request = (HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest();
    Cookie fbCookie = getFBCookie(request);

    String fbCookieValue = fbCookie.getValue();
    String[] stringArgs = fbCookieValue.split("\\.");
    String encodedPayload = stringArgs[1];
    JsonObject data;
    try{
        String payload = base64UrlDecode(encodedPayload);

        // gets the js object from the cookie
        data = new JsonObject(payload);
    }catch (Exception e){
        return "";
    }

    String authUrl = getAuthURL(data.getString("code"));
    URL url = new URL(authUrl);
    URI uri = new URI(url.getProtocol(), url.getHost(), url.getPath(),
            url.getQuery(), null);
    String result = readURL(uri.toURL());

    String[] resultSplited = result.split("&");
    return resultSplited[0].split("=")[1];
}

// creates the url for calling to oauth.
public static String getAuthURL(String authCode) {
    String url = "https://graph.facebook.com/oauth/access_token?client_id="
            + FacebookApp.appId
            + "&redirect_uri=&client_secret="
            + FacebookApp.appSecret + "&code="
            + authCode;
    return url;
}

// reads the url.
private static String readURL(URL url) throws IOException {
    InputStream is = url.openStream();
    InputStreamReader inStreamReader = new InputStreamReader(is);
    BufferedReader reader = new BufferedReader(inStreamReader);
    String s = "";
    int r;
    while ((r = is.read()) != -1) {
        s = reader.readLine();
    }
    reader.close();
    return s;
}

private static String base64UrlDecode(String input){
    return new String(Base64.decodeBase64(input.getBytes()));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:07:39.857

如果您只需要发布到用户的墙上，那么您也可以使用**app_access_token**，前提是您已请求**publish_stream**权限。

您可以致电：

```
https://graph.facebook.com/oauth/access_token?
client_id=YOUR_APP_ID
&client_secret=YOUR_APP_SECRET
&grant_type=client_credentials 
```

[读这个](https://developers.facebook.com/docs/authentication/applications/ "https://developers.facebook.com/docs/authentication/applications/")。

编辑：应用程序访问令牌不会过期，直到应用程序机密被重置。

# c# - 更正 C# 和可搜索 PDF 中的希伯来语字符序列

> ID：10299470
> 
> 赞同：4
> 
> 时间：2012-04-24T13:58:02.800
> 
> 标签：c#, pdf, nunit, hebrew

我正在测试一个从可搜索 PDF 中提取文本的 SDK。SDK 的一个依赖项最近已更新，它导致对希伯来语文本的现有测试失败。我不太了解希伯来语，也不太了解所涉及的技术如何代表从右到左的语言。

NUnit 测试断言提取的文本与 C# 字符串“מנבוצץז ”匹配。

```
 string hebrewText = reader.ReadToEnd();
 Assert.AreEqual("מנבוצץז ", hebrewText); 
```

光栅化的 PDF 具有我认为相同的字符，但顺序相反。

![在此处输入图像描述](../Images/2ab45b9bd3895aef4561771321848cb0.png)

单元测试失败并显示以下消息：

> 预期：“מנבוצץז”
> 
> 但是是：“ זץצובנמ”

尽管实际结果更接近我在光栅化 PDF 中看到的结果，但我不能完全确定原始测试是错误的。

1.  C# 字符串中的希伯来语字符是否应该像打印的希伯来语文本一样从右到左阅读？
2.  .NET 堆栈的任何部分是否会篡改希伯来语字符串的方向？
3.  NUnit 呢？
4.  嵌入在可搜索 PDF 中的希伯来语字符通常应该与光栅化文本的方向相同吗？
5.  在决定是否“修复”这个单元测试之前我还应该知道什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T15:38:21.383

有多种方法可以对 RTL 语言进行编码。最常见的方式（也是 Window 的默认方式）是使用逻辑排序，这意味着第一个字母被编码为字符串（或文件）中的第一个字符。因此，在视觉上第一个字母出现在屏幕的左侧还是右侧都不会影响它们的存储顺序。

现在至于出现在 Visual Studio 中的文本，它取决于版本。据我记得，在 Visual Studio 2010 之前，代码编辑器会向后显示希伯来语，很明显，当您尝试选择希伯来语文本时，它会以一种奇怪的方式反转（这在视觉上令人困惑）。看来这个问题不再存在是 Visual Studio 2010（至少在我刚刚测试过的 SP1 中）。

让我们使用一个希伯来语单词，对于非希伯来语使用者来说，其方向比文本中指定的字符串更清楚：

> 上一页

这个词恰好是离子的希伯来词，在你的屏幕上，它应该显示为三个字母，最高的字母在左边，最短的在右边。在 .NET 字符串中，表达式`"יון".Substring(0, 1)`将生成短字母，因为它是字符串中的第一个字母。字符串也可以写成`"\u05D9\u05D5\u05DF"`最左边的Unicode字符`\u05D9`代表右边显示的短字母，这清楚地表明了字母的存储顺序。

由于您的测试用例中的字符串是无意义的，我无法告诉您它是否一直是错误的测试，或者它是否应该通过的正确测试。如果您上传的图像已正确呈现，则表明您的测试的实际结果是正确的，而预期的值是不正确的，因此您应该修复测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T14:50:35.243

1.  我相信 C# 中的所有字符串都会在内部存储为 LTR；RTL 字符串将有一个不可打印的字符（或其他东西），表示它们确实是 RTL。
2.  很有可能。例如，RTL GUI 和渲染文本需要设置某些属性（特别是 RightToLeft 和 RightToLeftLayout）才能正确显示。
3.  NUnit 不应该。它也不应该在意。恕我直言，一个反转的字符串！=原始字符串。
4.  我无法发表评论。我假设它们应该是测试所期望的，假设它一开始就通过了。
5.  不要用 RTL 做一半的措施，它真的不喜欢它。要么有完整的 RTL 支持，要么没有。这可能很糟糕，祝你好运！

# asp.net-mvc-3 - 在我的创建视图中，日期字段的默认值将是“01/01/0001 00:00:00”

> ID：10299473
> 
> 赞同：0
> 
> 时间：2012-04-24T13:58:08.383
> 
> 标签：asp.net-mvc-3, date

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:02:28.093

Either use a nullable `DateTime` type (`DateTime?`) or accept that you'll never have a patient with a date of birth (DoB) that year (unless Jesus is a patient?) and treat those values as if null/empty. In that second case you'd have to modify aggregate commands (averages min/max) to filter out all those with that specific value.

Since everyone should have a DoB, it should really be enforced at record creation time that a DoB is provided (none provided - no record created)... so how often will this even be an issue?

# ruby-on-rails - heroku sqlite 1.3.6 问题？

> ID：10299483
> 
> 赞同：2
> 
> 时间：2012-04-24T13:58:36.190
> 
> 标签：ruby-on-rails, ruby, gem

我试图在heroku中部署我的应用程序，但是在安装了其他gem之后它告诉我这个错误

```
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
       /usr/local/bin/ruby extconf.rb
       checking for sqlite3.h... no
       sqlite3.h is missing. Try 'port install sqlite3 +universal'
       or 'yum install sqlite-devel' and check your shared library search path (the
       location where your sqlite3 shared library is located).
       *** extconf.rb failed ***
       Could not create Makefile due to some reason, probably lack of
       necessary libraries and/or headers.  Check the mkmf.log file for more
       details.  You may need configuration options.
       Provided configuration options:
       --with-opt-dir
       --without-opt-dir
       --with-opt-include
       --without-opt-include=${opt-dir}/include
       --with-opt-lib
       --without-opt-lib=${opt-dir}/lib
       --with-make-prog
       --without-make-prog
       --srcdir=.
       --curdir
       --ruby=/usr/local/bin/ruby
       --with-sqlite3-dir
       --without-sqlite3-dir
       --with-sqlite3-include
       --without-sqlite3-include=${sqlite3-dir}/include
       --with-sqlite3-lib
       --without-sqlite3-lib=${sqlite3-dir}/lib
       --enable-local
       --disable-local
       Gem files will remain installed in /tmp/build_2vzrh01g333bs/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.6 for inspection.
       Results logged to /tmp/build_2vzrh01g333bs/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.6/ext/sqlite3/gem_make.out
       An error occured while installing sqlite3 (1.3.6), and Bundler cannot continue.
       Make sure that `gem install sqlite3 -v '1.3.6'` succeeds before bundling.
 !
 !     Failed to install gems via Bundler.
 !
 !     Heroku push rejected, failed to compile Ruby/rails app

To git@heroku.com:floating-journey-3614.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:floating-journey-3614.git'
[led@localhost djors]$ yum install sqlite-devel
Loaded plugins: fastestmirror, langpacks, presto, refresh-packagekit
You need to be root to perform this command. 
```

我检查了`yum install sqlite-devel`但它已经安装了我尝试了谷歌但没有给我一个答案我发现有问题`1.3.6` 提前谢谢

```
 - RUBYGEMS VERSION: 1.8.10
  - RUBY VERSION: 1.9.3 (2011-09-23 patchlevel -1) [i686-linux]
  - INSTALLATION DIRECTORY: /home/led/.rvm/gems/ruby-1.9.3-rc1
  - RUBY EXECUTABLE: /home/led/.rvm/rubies/ruby-1.9.3-rc1/bin/ruby
  - EXECUTABLE DIRECTORY: /home/led/.rvm/gems/ruby-1.9.3-rc1/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86-linux
  - GEM PATHS:
     - /home/led/.rvm/gems/ruby-1.9.3-rc1
     - /home/led/.rvm/gems/ruby-1.9.3-rc1@global
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
     - :sources => ["http://rubygems.org/", "http://gems.github.com"]
  - REMOTE SOURCES:
     - http://rubygems.org/
     - http://gems.github.com 
```

我的宝石文件

```
gem 'rails', '3.2.1'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'
gem 'time_diff'
gem 'activemerchant', :require => 'active_merchant'
gem 'activeadmin' , '0.4.3'
gem "formtastic", "~> 2.1.1"
gem 'validates_overlap'
gem "nifty-generators"
gem 'thin'
group :production, :staging do
  gem "pg"
end

group :development, :test do
  gem "sqlite3-ruby", "~> 1.3.0", :require => "sqlite3"
end
gem "paperclip", "~> 3.0"

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem "twitter-bootstrap-rails"
  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer'
  gem 'bourbon'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:07:50.413

在此处检查您的**validates_overlap** gem：

[https://github.com/robinbortlik/validates_overlap/blob/master/validates_overlap.gemspec](https://github.com/robinbortlik/validates_overlap/blob/master/validates_overlap.gemspec)

它有一个`s.add_runtime_dependency(%q<sqlite3>, [">= 0"])`

# php - 如何获取重复条目的ID？

> ID：10299487
> 
> 赞同：1
> 
> 时间：2012-04-24T13:58:48.137
> 
> 标签：php, mysql

```
$query = "INSERT IGNORE INTO `user` (`name`, `email`) VALUES ( '".$name."', '".$email."')";
$res = mysql_query($query) or die("Query failed ".mysql_error() );
$last id = mysql_insert_id(); 
```

如果有重复条目，mysql_insert_id() 返回 0。

有没有办法获取重复条目的 ID？还是我必须做 2 个查询（SELECT + INSERT）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:39:02.913

使用 INSERT 无法获取现有（重复）条目的 ID。

不过，您不应该执行 SELECT + INSERT，因为您需要锁定表以实现并发（以确保 SELECT 和 INSERT 之间没有任何变化）。

在这种情况下，如果插入失败，而您想要更新现有记录，请使用[INSERT ... ON DUPLICATE KEY UPDATE](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)。

如果您只想失败，但拥有现有 ID，则失败，并执行 SELECT 以获取现有条目。

# html - chrome 在滚动时会复制固定元素

> ID：10299488
> 
> 赞同：8
> 
> 时间：2012-04-24T13:58:48.903
> 
> 标签：html, css, google-chrome, browser

我正在使用 chrome 版本`18.0.1025.162 m`
，其中包含带有 iframe 的 html 文件。

**我无法更改包含页面或其 css (main.htm)**
**我只能更改 iframe (show.htm) 及其 css。**

问题是当我向下滚动然后向上滚动时，adminbar div 会被复制几次。
我附上了 2 个屏幕截图，第一个是滚动前的屏幕，我还添加了代码，以便可以重现错误。

我认为这可能是chrome中的一个错误，我不确定。
我想知道这是否是一个错误，更重要的是，是否可以通过仅更改 iframe 来解决问题，并且它不包括从 iframe 中删除背景颜色。
（从 iframe 中删除背景颜色可以解决问题，但我需要背景颜色）

所以这就是它的外观：滚动之前： ![在此处输入图像描述](../Images/7e62caa00dc95e29b261b8fedcc09cf4.png)

滚动后（管理栏在屏幕上复制） ![在此处输入图像描述](../Images/78e3ebfa8ff0d409db3a1ea775ec8657.png)

## 现在代码重现 chrome 中的错误

第一个文件 - main.htm（我无法更改此代码）

```
<!-- main.htm -->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css">
#adminbar 
{
    background-color: #464646;
    height: 28px;
    position: fixed;
    width: 100%;
    top: 0;   
 }

 #body-content 
 {
    float: left;
    width: 100%;
 }
 </style>

 </head>
 <body >
 <div id="body-content">
    <iframe src="show.htm" width="100%" height="943"></iframe>

    <div id="adminbar" class="" role="navigation">
    </div>
 </div>

 </body>
 </html> 
```

和show.htm

```
<!-- show.htm -->
<!DOCTYPE html>
<head>
<style type="text/css">
body 
{
    background: #e0e0e0;
}
</style>
</head>
<body>
 <br/>
<p style='margin-bottom:500px;'>bazinga</p>
<p style='margin-bottom:500px;'>bazinga</p>
<p style='margin-bottom:500px;'>bazinga</p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T12:21:41.850

我想我找到了解决方法。我创建了一个文件 background.png，其中有一个像素具有我想要的颜色（#e0e0e0）。

然后我替换这个：

```
body 
{
     background: #e0e0e0;
} 
```

有了这个：

```
body 
{
    background: #e0e0e0 url(background.png) repeat-x;
    background-attachment: fixed;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T16:03:04.667

添加`-webkit-transform: translate3d(0,0,0);`到您的正文内容 CSS

CSS

```
#body-content {
   float: left;
   width: 100%;
   -webkit-transform: translate3d(0,0,0);
} 
```

这似乎迫使 Chrome 使用您的 GPU 并解决渲染问题。

**更新**：既然你不能改变 main.htm，那么将 show.htm 的背景颜色更改为相同颜色的背景图像呢？我对此进行了测试，并且有效。有这种可能吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T00:05:03.973

我重新创建了您的设置，然后`script`在`body`. `show.htm`作为一项快速措施，我在 in 中添加了一个`name="if1"`，`<iframe />`但`main.htm`您始终可以在元素上找到句柄，而无需使用显式分配的名称。

**当**且仅当`main.htm`一直滚动到顶部时，它似乎可以解决您提供的虚拟设置的问题。觉得很奇怪，加入俱乐部吧！看看这是否适用于真实的东西......无论哪种方式，它都可能只是朝着正确的方向轻推！:)

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
body 
{
    background: #e0e0e0;
}
</style>
</head>
<body>
<br/>
<p style="margin-bottom:500px;">bazinga</p>
<p style="margin-bottom:500px;">bazinga</p>
<p style="margin-bottom:500px;">bazinga</p>
<script type="text/javascript">
    window.onscroll = function(){
        console.log("It's 'Doctor' Sheldon Cooper!");
        //parent.document.if1.document.body.style.webkitTransform = 'scale(1)';
        var _parentScale = parent.document.body.style.webkitTransform;
        parent.document.body.style.webkitTransform = _parentScale;
    }
</script>
</body>
</html>​​​​​​​​​​​​​​​ 
```

*我还尝试尝试以下方法，直到它成为就寝时间！*

```
<script type="text/javascript">
    window.onscroll = function(){
        console.log("It's 'Doctor' Sheldon Cooper!");
        //parent.document.if1.document.body.style.webkitTransform = 'scale(1)';
        var _me = document.body;
        _me.style.webkitTransform = _me.style.webkitTransform;
        //_me.style.display='none';
        _me.offsetHeight
        //_me.style.display='block';

        var _parent = parent.document.body;
        _parent.style.webkitTransform = _parent.style.webkitTransform;
        _parent.style.display=_parent.style.display;
        _parent.offsetHeight
        //_parent.style.display='block';
    }
    parent.window.onscroll = function(){
        console.log("But. You're in my spot!");
        //parent.document.if1.document.body.style.webkitTransform = 'scale(1)';
        var _me = document.body;
        _me.style.webkitTransform = _me.style.webkitTransform;
        //_me.style.display='none';
        _me.offsetHeight
        //_me.style.display='block';

        var _child = parent.document.if1.document.body;
        _child.style.webkitTransform = _child.style.webkitTransform;
        _child.style.display=_child.style.display;
        _child.offsetHeight
        //_child.style.display='block';
    }
</script> 
```

*我还尝试使用以下脚本应用[j08691](https://stackoverflow.com/users/616443/j08691)的答案，但它给出了一些意想不到的结果。除其他外，我导致`absolute`定位的顶部栏不固定！*

```
 window.onload = function(){
        console.log("It's 'Doctor' Sheldon Cooper!");
        var test = parent.document.getElementById("body-content");
        test.style.webkitTransform = "translate3d(0,0,0)";
    } 
```

*一个可能已经存在，但如果没有，您能否将其作为相关项目的错误报告提交？*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T02:24:32.763

这将有助于获得您实际网站的实时演示/版本，以进行更彻底的测试并解决错误。

无论如何，我能够重现该错误，然后修复它（有点）：

这是“显示”CSS：

```
body 
{
    background: #e0e0e0;
    height:100%;
    width:100%;
    z-index:9999;
    position:fixed;
} 
```

这是我的测试页面的链接：

[sotkra.com/t_main.html](http://sotkra.com/t_main.html)

最后但并非最不重要的一点是，是的，它是一个错误，它是由 iframe 内容的滚动对实际“基本”文档的闪烁引起的。我以前见过类似的问题，但同样没有关于它的文档。他们只是渲染错误，通常是由不特定的 css 或非常奇怪的情况引起的，除了浏览器之外没有人的错。

干杯

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-29T08:03:39.033

`float: left;`从你的CSS中删除`#body-content`它，它会工作得很好。

这看起来是 chrome 中的渲染错误。如果你真的很慢地向上滚动，你会注意到你从管理栏中得到一个纯色作为你的 iframe 的颜色。

顺便说一句，OSX 上的 chrome 渲染完全相同。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-29T15:38:58.633

```
#adminbar {
background-color: #464646;
height: 28px;
position: fixed;
width: 100%;
top: 0;
right:0px
}
#body-content {
float: none;
width: 100%;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-05T19:01:06.790

使用渐变作为背景图像也可以。这对我来说更可取，因为我不必创建图像文件，也不会在客户端生成额外的请求。

```
body {
  background: #FFF -webkit-linear-gradient(top, #FFF, #FFF) repeat-x;
  background-attachment: fixed;
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-03T01:49:33.813

改进/简化 yossi 的答案：

```
body 
{
    background:url('bg.png');
} 
```

无需声明`bg-color`or `repeat-x`，只需要背景图片。

在 Chrome 18.0.1025.168、Mac OS X 10.6.8 上测试。

![截屏](../Images/5d7ff05c272b3bddb7c22d3851c01b18.png)

# scala - 使用列表（不是地图）从 For 循环中获取密钥

> ID：10299490
> 
> 赞同：3
> 
> 时间：2012-04-24T13:58:51.297
> 
> 标签：scala, playframework-2.0

我有一个模型列表（列表项），我在模板中循环：

```
@for(item <- items) {
    // ...
} 
```

我想获得 in 的键/索引位置有`item`两个`items`原因：

1.  我会展示类似的东西`Item n° @key`
2.  我只想显示 1/2 项（我想`if (@key % 2)`：）

如果使用 List 而不是 Map 如何获取键/索引？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-24T14:11:52.087

您可以使用其索引压缩列表：

```
@defining(List("foo", "bar", "baz")) { items => 
  @for((item, i) <- items.zipWithIndex if i % 2 == 0) {
    @item no @i <br/>
  }
} 
```

哪个打印：

```
foo no 0 
baz no 2 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T14:08:31.847

您可以使用 .zipWithIndex：

```
@for((item,i) <- items.zipWithIndex) {
    // ...
} 
```

索引将从 0 开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T14:08:38.873

一种选择是在循环中添加一个“计数器”。只需在循环之前将其声明为 var，将其初始化为 0，并在循环结束时将其递增。

另一种选择是在迭代之前在列表中使用 zipWithIndex。然后，您实际上将拥有一个由项目及其在列表中的索引组成的元组，而不是获取循环变量中的项目。

# iphone - 适合 iphone 但在 iPad 上自动缩放的 iOS webapp 视口

> ID：10299502
> 
> 赞同：0
> 
> 时间：2012-04-24T13:59:11.010
> 
> 标签：iphone, html, ipad, web-applications, iphone-web-app

我正在开发一个也有移动 webapp 的 web 应用程序。我目前使用：

`<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">`

这适用于 iPhone 和 iPad。

我的问题是我使用的是固定大小的字体（例如 18px），但在 iPad 上我希望它看起来与 iPhone 上的完全一样，只是分别更大。

有没有办法让我以适合 iPhone 的方式定义视口，并且在 iPad 上以更大的比例看起来相同？（比如放大）？

ps 我也不想阻止它在 android 上工作，它目前正在做 :)

可以在此处查看移动 web 应用程序：[HocSpot Mobile](http://www.hocspot.com/mobile/mobile.htm)和此处的 web 应用程序：[HocSpot](http://www.hocspot.com)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:15:35.020

为什么不直接使用 CSS 媒体查询？这将在 UIWebView 中工作。

```
@media screen and (max-width:1024px) {
    // iPad rules
}

@media screen and (max-width:480px) {
    // iPhone rules
} 
```

然后，您可以使用 CSS 设置字体大小的样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T19:16:03.667

试试看

[http://lessframework.com/](http://lessframework.com/)

# ruby-on-rails - 如何使用 ActionMailer 发送 html 电子邮件？

> ID：10299503
> 
> 赞同：4
> 
> 时间：2012-04-24T13:59:11.073
> 
> 标签：ruby-on-rails, ruby, actionmailer

使用导轨 2.3.14

我的电子邮件 erb：data.html.erb：

```
<% @data.each do |error| %>
    <table>
        <% error.each_pair do |k, v| %>
            <tr>
                <td>
                    <%= k %>
                </td>
                <td>
                    <%= ap v %>
                </td>
            </tr>   
        <% end %>
    </table>
    <br />
<% end %> 
```

我可以收到电子邮件，但是当我收到时，它会显示为纯文本，而不是呈现 HTML。

动作邮件配置：

```
config.action_mailer.raise_delivery_errors = true

# Send emails during development
config.action_mailer.perform_deliveries = true
ActionMailer::Base.delivery_method = :sendmail 
```

更新：必须在我的交付方式中指定内容类型：

```
 def data(data, sent_at = Time.now)
    Time.zone = 'Eastern Time (US & Canada)'

    content_type 'text/html'
    subject     "[#{RAILS_ENV}] An error has occurred - #{Time.now.to_s("%B %d, %Y")}"
    recipients  "bugs@mydomain.com"
    from        AppConfig['from_email']
    sent_on     sent_at
    @body   =   {:data => data}
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-02-25T22:56:05.410

来自 d11wtq 的[评论](https://stackoverflow.com/questions/10299503/how-do-i-send-html-emails-with-actionmailer#comment13255651_10299503)：

指定`content_type`为`text/html`：

```
ActionMailer::Base.mail(
  content_type: "text/html",
  from: "sender@example.com",
  to: "your_email@example.com",
  subject: "This is a test",
  body: "<h2>HTML Email Test</h2><p>This is a <b>test</b>.</p>"
).deliver_now 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-20T17:14:27.013

在某些情况下，似乎 rails 可能会以某种方式缓存文本模板。

我只是

1.  生成一个带有单一视图的新邮件程序，一个文本视图
2.  测试了邮件程序并发送了文本电子邮件
3.  将文本电子邮件重命名为 html (foo.text.haml -> foo.html.haml)
4.  重新测试了邮件...并收到了文本电子邮件（嘘！）
5.  使用新名称 (bar.html.haml) 在文本版本旁边创建了一个 HTML 版本
6.  重新启动了服务器
7.  重新测试（发送栏）。这次收到了一封 HTML 电子邮件。
8.  重新测试了原始的 html 电子邮件 (foo)。收到 HTML 电子邮件

克雷。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T21:53:20.597

use <%=raw k %> or <%= k.html_safe %>

# view - 带下划线的 Eclipse RCP 视图选项卡文本

> ID：10299505
> 
> 赞同：1
> 
> 时间：2012-04-24T13:59:14.167
> 
> 标签：view, tabs, eclipse-rcp, underline

我正在开发 Eclipse RCP 应用程序并添加了

`org.eclipse.ui/SHOW_TRADITIONAL_STYLE_TABS=false`

到 plugin_customization.ini 文件。这为我的视图和编辑器选项卡提供了很好的风格。

但是，只有在用户第一次启动应用程序时才会出现一个奇怪的问题。第一个视图选项卡中的文本带有下划线，如图所示：

[图片@ImageShack](http://imageshack.us/photo/my-images/252/tabsf.png/)

一旦我切换到不同的视图，下划线就不再可见，即使是焦点选项卡也不可见。但我也注意到，即使最初没有下划线，单击选项卡并按住鼠标按钮几秒钟也会返回下划线。

这三个视图放在文件夹里，用简单的

`IFolderLayout.addView(String viewId)`

和文件夹是用

`IPageLayout.createFolder(String folderId, int relationship, float ratio, String refId)`

关于为什么首先存在下划线或如何删除它的任何帮助都会很棒。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T17:04:23.650

要删除视图标题中的下划线，您必须执行以下操作：

1.  `IWorkbenchPart#setFocus()`在您的视图中实施
2.  将焦点传递给视图内的元素

## 例子

在您的视图中，您有一个`org.eclipse.jface.viewers.TableViewer`named `viewer`，因此您可以像这样传递焦点：

```
public void setFocus() {
    viewer.getControl().setFocus();
} 
```

# membase - Couchbase 中的密钥限制

> ID：10299509
> 
> 赞同：3
> 
> 时间：2012-04-24T13:59:21.223
> 
> 标签：membase, couchbase

我在 Couchbase 中找到了一些关于文档限制的信息： [/thread/key-length](http://www.couchbase.com/forums/thread/key-length) - 密钥的最大长度为 250 字节。但是没找到官方的。

1.  有人可以确认 Couchbase 文档的密钥的最大长度吗？

2.  密钥还有哪些其他限制，它们有哪些好的做法？

3.  索引（地图功能的键）呢？

我的用例是我想存储由 url 标识的文档。直接的解决方案是通过 url 指示文档。假设有大于 250 字节的 url，我需要选择其他键 - 例如`md5(url)` 并将 url 作为文档的一个元素。**这是 Couchbase 的好模型吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:50:29.427

是的，Couchbase 服务器中的键名有 250 字节的限制。您对 URL 进行哈希处理的想法应该很有效。

构成密钥的字节也需要是合法的 utf-8（您可以存储和检索非字符串密钥，但它们不会参与完整的 Couchbase 功能集，例如视图和跨数据中心复制）。

map reduce 视图中的键必须是 utf-8，并且长度限制为 65kb。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-24T20:11:26.330

这对 Couchbase 来说不是一个好的模型。原因是 Couchbase 旨在由应用程序服务器而不是最终用户访问。如果您使用开放端口设置 Couchbase，那么没有什么可以阻止某人修改或删除数据库中的所有数据。

# html - 使用一个 css 文件更改 iframe 中的正文背景颜色

> ID：10299515
> 
> 赞同：6
> 
> 时间：2012-04-24T13:59:38.480
> 
> 标签：html, css, iframe

使用 iframe 从我的网络空间调用网站，使用带有`body {background-color: #222}`.

iframe src 也使用这个 CSS 文件。问题是 iframe 中的主体需要另一种背景颜色。

试过了

```
iframe>body { background-color: #other } 
```

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T14:09:02.733

我假设 iframe 占据了您网站的一小部分。在这种情况下，我建议您只需使用与加载 iframe 大小相同的 div，并为该 div 提供正确的背景颜色。

或者：在 iframe 页面的源代码中包含样式属性：

```
<head>
    <style>body {background-color:#COLOR}</style>
</head> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T14:13:12.190

这个问题类似于[How to apply css to iframe content?](https://stackoverflow.com/questions/3714880/how-to-apply-css-to-iframe-content) . 基本上你可以使用 jQuery 来改变 iframe 中的 CSS 属性

```
$('#yourIframe').contents().find('body').css({
    background-color: '#333333'
}); 
```

**编辑：** 您可能需要在 iframe 加载时添加：

```
$('#yourIframe').load(function(){ 
    $(this).contents().find('body').css({
        background-color: '#333333'
    });
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-02T10:16:30.007

请记住，Javascript 只能修改具有相同站点来源的 iframe 的属性，否则您将收到安全错误。

协议、域和端口必须匹配。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-18T14:17:57.690

我用过这个，它对我有用。（它太容易了！）

在你的 CSS 文件中放：

**iframe { 背景颜色：橙色；}**

只需将“橙色”更改为您需要的任何颜色。就是这样！

享受！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T14:02:27.813

在 iframe 包含的页面中，链接另一个样式表，然后更改您希望的所有 CSS 样式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-30T06:09:43.487

使用 Javascript 我们可以将背景颜色添加到 iframe

```
 var x = document.getElementById("myframe");
    var y = (x.contentWindow || x.contentDocument);
    if (y.document)y = y.document;
    y.body.style.backgroundColor = "red"; 
```

参考[w3schools](http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_iframe_contentdocument)

# c - 如何将 c 控制台应用程序附加到正在运行的进程

> ID：10299516
> 
> 赞同：1
> 
> 时间：2012-04-24T13:59:39.533
> 
> 标签：c, windows

我想将一个 C 程序附加到工作进程，这样我就可以挂钩它并处理它的内存

注意：我不是在谈论 DLL，我希望我的控制台应用程序在内存上附加和编辑并自行解决。

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:02:29.890

听起来您正在寻找[Windows Debugging API](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679295%28v=vs.85%29.aspx)，特别是功能[`DebugActiveProcess()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679295%28v=vs.85%29.aspx)等[`WriteProcessMemory()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681674%28v=vs.85%29.aspx)。

[debuginfo.com](http://www.debuginfo.com/examples/dbgexamples.html)上提供了一些完整的示例（我没有详细查看它们）。

# c++ - 用数组的一部分初始化向量？

> ID：10299517
> 
> 赞同：3
> 
> 时间：2012-04-24T13:59:39.827
> 
> 标签：c++, vector

```
int arr[5] = {0,1,2,3,4};
vector<int> vec; 
```

通常我们这样做：

```
vector<int> vec(arr, arr + sizeof(arr) / sizeof(int)); 
```

但是如何用**arr**的前 3 个值初始化向量**vec**呢？另外我如何用中间的 3 个值初始化它？

 **我必须立即初始化它，而不是`push_back`多行..

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-24T14:00:41.797

您正在调用的构造函数形式是这样的^(**)：

```
template <class Iterator> vector(Iterator start, Iterator end); 
```

所以，你可以传入任何像一对迭代器一样的东西。具体来说，您可以传入两个指针，只要它们都指向同一个数组，并且第二个不位于第一个之前（如果指针相等，则它们表示一个空范围）。

在您的示例中，您传入一个指向数组第一个元素的指针和一个指向数组的（神话的）elment-after-the-last-element 的指针：

```
vector<int> vec(arr, arr + sizeof(arr) / sizeof(int)); 
```

通常，您可以传入一个指向任何元素的指针作为开始，并将一个指向任何元素的指针作为结束。

> 但是我如何用 arr 的前 3 个值初始化向量 vec？

传递指向第一个元素和第三个元素的指针：

```
vector<int> vec(arr, arr+3); 
```

> 另外我如何用中间的 3 个值初始化它？

传入一个指向要复制的第一个项目的指针，以及一个指向粘贴最后一个元素的指针。在这种情况下，索引 1 和 4：

```
vector<int> vec(arr+1, arr+4); 
```

* * *

**[好吧，[比这稍微复杂一些](http://en.cppreference.com/w/cpp/container/vector/vector)，但为了讨论，假装是可以的。实际形式是：`template <class InputIterator> vector( InputIterator first, InputIterator last, const Allocator& alloc = Allocator() );`]**

# visual-studio - 在 64 位机器上从 VS 开发服务器连接到 Oracle 10g（带有括号错误）数据库

> ID：10299518
> 
> 赞同：2
> 
> 时间：2012-04-24T13:59:40.433
> 
> 标签：visual-studio, oracle10g, 64-bit, webdev.webserver

在 64 位机器上从 MS Visual Studio 连接到 Oracle 10g 数据库时存在一个已知错误，因为安装了 VS 的“c:\program files (x86)”目录中的括号。

这可以通过以下方式启动 VS 来克服：

> "C:\PROGRA~2\MICROS~2.0\Common7\IDE\devenv.exe"

但是在使用 VS Dev 调试 Web 应用程序时。服务器，同样的问题再次发生，因为 VS 使用“WebDev.WebServer40.exe”路径启动 Web 服务器，该路径也包含括号。

是否有不包括在另一个目录中重新安装 VS 或更新 Oracle 的解决方法？

这是 sqlnet.log 中的错误：

> 致命的 NI 连接错误 6413，连接到：
> 
> (DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=BEQ)(PROGRAM=oracle)(ARGV0=oracleXE)(ARGS='(DESCRIPTION=(LOCAL=YES)(ADDRESS=(PROTOCOL=beq)))'))) (CONNECT_DATA=(SID=XE)(CID=(PROGRAM= **C:\Program Files (x86)\Common Files\Microsoft Shared\DevServer\10.0\WebDev.WebServer40.exe** )(HOST=PEGASUS)(USER=meno)) ))
> 
> 版本信息：适用于 32 位 Windows 的 TNS：版本 10.2.0.1.0 - 生产

# hibernate - IReport + Hibernate Datasource 在 cfg.xml 中设置特定的 NamingStrategy

> ID：10299520
> 
> 赞同：2
> 
> 时间：2012-04-24T13:59:47.113
> 
> 标签：hibernate, jasper-reports, ireport, hibernate-mapping, hibernate.cfg.xml

我正在使用 IReport 4.5.1 和 HQL 来查询数据库。所以我定义了一个`hibernate.cfg.xml`，把它的根文件夹和所需的 *.jar 文件放到 IReport 的类路径中。当我想使用自己的命名策略时，就会出现问题。它只是转换`someObject`成表名`SOME_OBJECT`。IReport 无法触发命名策略，因此它搜索表`someObject`。我试过了

```
hibernate.ejb.naming_strategy
ejb.naming_strategy
namingStrategy 
```

cfg.xml 中的属性名称，但没有运气。有人有想法吗？

谢谢大家。

# javascript - jQuery Ajax-load 在 IE9 中替换页面而不是 div（无需开发者工具模式切换）

> ID：10299525
> 
> 赞同：1
> 
> 时间：2012-04-24T14:00:02.763
> 
> 标签：javascript, jquery, ajax, internet-explorer

我正在一个网站上工作，其中一个页面有一个文章列表和一个基于某些关键字过滤这些文章的选项。所有关键字都是链接，并列在列表的右侧。为了获得正确的 URL，每个关键字上的链接都包含 ajaxURL 的一部分，这些 ajaxURL 将为给定的关键字提供正确的响应。此外，我得到了一个脚本，它为所有链接添加了一个“点击”事件，并将最后需要的参数附加到 ajaxURL。我使用 jQuery 的“加载”功能“重新加载”列表，如下所示：

```
$('a.keyword').click(function(event){
    event.preventDefault();

    // Other logic

    $('.list').load(ajaxURL);
} 
```

但是，在 IE9 中使用过滤器时，“ajaxURL”的内容会加载到整个页面中。也就是说，整个页面被替换为结果列表。我认为这可能是仅在每个链接上获得的“点击”事件上使用“event.preventDefault()”的问题，因此我添加了多种替代方案：

```
event.stopPropagtion()
return false
if(event.preventDefault){
    event.preventDefault();
} else {
    event.returnValue = false;
} 
```

经过数小时的调试，尝试了这些的不同组合，并使用 IE 中提供的开发人员工具尝试了 IE7、IE8 和 IE9，我意识到我第一次用 IE9 打开页面（不打开开发人员工具）时，我得到了描述的问题多于。但是，当我打开开发人员工具并选择 IE8 时，一切正常！当我将其更改回 IE9 时也会发生同样的情况！（在这种情况下，我使用了上述所有替代方案。）

出于某种原因，这些转换使它起作用！我不知道如何解决这个问题。我不能强迫用户打开开发者工具并切换模式来让我工作。:P 有什么想法吗？开发人员工具是否添加了可以做到这一点的东西？

感谢您对此事的任何帮助！:-)

**PS。**它在 Chrome 中运行良好，++。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T14:06:54.497

我唯一能想到的就是`console.log()`在你的剧本中。在您打开开发者工具之前，该语句会在 IE 中引发 Javascript 错误。

如果这发生在您在问题中提供的代码之前，那么您的脚本的其余部分可能不会被评估，并且您的事件处理程序根本不会被绑定，导致链接只是常规链接。

# sql-server - SQL Server MDF 文件 - 如何备份

> ID：10299527
> 
> 赞同：5
> 
> 时间：2012-04-24T14:00:09.820
> 
> 标签：sql-server, sql-server-2005

这是场景：

我们有一个包含三个数据库的公司网站。它运行 SQL Server 2005。这三个数据库链接到 MDF 文件。有人试图直接复制/粘贴其中一个 MDF 文件，该文件对文件进行了某种锁定，导致只读错误。我们通过分离/重新连接来解决这个问题。

为了防止再次发生这种情况，我们正在寻找这些数据库的副本以降级到我们的 QA 数据库。

我们可以在不关闭公司网站的情况下制作副本的最佳方式是什么？我试图搜索谷歌并没有想出一个像样的方法。数据库相当小，我能想到的最坏情况就是关闭 SQL Server 服务，然后复制 MDF，然后重新启动服务。我假设最多停机时间为 10 秒。

**[请注意阅读本文的任何人，不要直接复制 MDF 文件，请确保您至少将 DB 脱机，否则 DB 可以被锁定]**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T14:14:22.767

@dave，我怀疑你是对的，DataBase > Tasks > Backup 将在不中断用户访问数据库的情况下工作。我在批处理文件中运行以下命令来备份我的数据库，并且它在运行时不会阻止访问。请注意，我不是 SQL Server 专家。这正是对我有用的。

> sqlcmd -S "MyHostName\sqlexpress" -Q "BACKUP DATABASE MyDatabaseName TO DISK = N'C:\path\to\backup.bak' WITH NOFORMAT, NOINIT, NAME = N'MyDatabaseName-Full Database Backup', SKIP, NOREWIND,未加载，统计 = 10"

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T14:14:28.960

与其尝试复制和锁定 MDF 文件，不如将数据库备份到文件系统，然后将其复制。

您询问用户在备份期间是否会受到影响...

我们不能说不会对用户产生“任何”影响，因为我们当然是在处理数据库。但是，备份实时数据库是常态。通常，您会在夜间或使用率较低的时段安排备份，以便将中断降至最低。

查看这个问题，其中提供了一些很好的信息： [https ://serverfault.com/questions/100490/what-happens-during-a-live-sql-server-backup](https://serverfault.com/questions/100490/what-happens-during-a-live-sql-server-backup)

# facebook - 以个人资料照片的大小获取用户的照片

> ID：10299528
> 
> 赞同：3
> 
> 时间：2012-04-24T14:00:22.907
> 
> 标签：facebook, facebook-graph-api, photo

我正在使用 C# 开发网站 Facebook 应用程序。我可以使用以下方式获取信息：

```
FacebookClient FBApp = new FacebookClient(getAccessToken);
dynamic user = FBApp.Get("/me"); 
```

我可以通过以下方式获得用户的朋友：

```
dynamic friends = FBApp.Get("/me/friends"); 
```

所有这些不包含任何指向照片的链接。我可以使用链接[https://graph.facebook.com/](https://graph.facebook.com/) *[user_id]*/picture 获取用户照片。

但这显示了一张非常小的照片......我怎样才能获得与个人资料照片大小相似的照片？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-24T15:28:58.957

要获取特定尺寸的用户个人资料图片，请致电

```
https://graph.facebook.com/USER_ID/picture?type=SIZE 
```

其中 SIZE 应替换为单词之一

```
square
small
normal
large 
```

取决于你想要的大小。

此调用将返回一个指向单个图像的[URL](http://en.wikipedia.org/wiki/Uniform_Resource_Locator)，其大小基于您选择的类型参数。

例如：

```
https://graph.facebook.com/USER_ID/picture?type=large 
```

返回指向图像大版本的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-08T15:59:13.303

要获取特定大小的 facebook 用户个人资料图片，请致电

```
graph.facebook.com/USER_ID/picture?width=900 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T15:14:17.247

尝试 FQL：

`SELECT pic_square FROM user WHERE uid IN(SELECT uid2 FROM friend WHERE uid1 = me())`

...其中`pic_square`可以是`pic_small`, `pic_big`, `pic_square`,之一`pic`

这将为您提供给定大小的相应用户朋友的个人资料图片的 URL。

例如：

[https://developers.facebook.com/tools/explorer/?method=GET&path=fql%3Fq%3DSELECT%20pic_square%20FROM%20user%20WHERE%20uid%20IN%28SELECT%20uid2%20FROM%20friend%20WHERE%20uid1%20 %3D%20me%28%29%29](https://developers.facebook.com/tools/explorer/?method=GET&path=fql%3Fq%3DSELECT%20pic_square%20FROM%20user%20WHERE%20uid%20IN%28SELECT%20uid2%20FROM%20friend%20WHERE%20uid1%20%3D%20me%28%29%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-08T03:47:08.730

@Gunnar Karlsson 是真的，但图片的大小（以像素为单位）不一样。例如，180x180；180x135。方面取决于原始上传的图片

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-11-25T09:40:34.617

您可以通过这种方式获取图片：[https](https://graph.facebook.com/v2.2/search?fields=id,picture&q=) ://graph.facebook.com/v2.2/search?fields=id,picture &q= {your query}&type=user&access_token=AccessToken

# django - webfaction上的django cron错误

> ID：10299529
> 
> 赞同：0
> 
> 时间：2012-04-24T14:00:25.430
> 
> 标签：django, cron, crontab, webfaction

我正在尝试让 crontab 任务在 webfaction 托管的 django 项目上工作。我根据与在不同网络派系服务器上工作的语句相同的语句对其进行建模：

```
*/2 * * * * (cd /home/mb52089/webapps/smartcarpools_prod/smartcarpools; /usr/local/bin/python2.7 manage.py send_msg >> /home/mb52089/webapps/smartcarpools_prod/arch_send_msg.log 2>&1) 
```

收到以下错误：

```
Traceback (most recent call last):
  File "manage.py", line 14, in <module>
    execute_manager(settings)
  File "/home/mb52089/lib/python2.7/django/core/management/__init__.py", line 459, in execute_manager
    utility.execute()
  File "/home/mb52089/lib/python2.7/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/home/mb52089/lib/python2.7/django/core/management/__init__.py", line 261, in fetch_command
    klass = load_command_class(app_name, subcommand)
  File "/home/mb52089/lib/python2.7/django/core/management/__init__.py", line 70, in load_command_class
    return module.Command()
AttributeError: 'module' object has no attribute 'Command' 
```

如果我尝试从命令行运行它，该命令也不起作用。但是，如果我运行 python2.7 manage.py shell，那确实有效，所以我开始使用 manage.py 了。

我已经在这个上旋转了一段时间，而 webfaction 并没有太大帮助。任何帮助是极大的赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T22:34:45.910

我犯了一个菜鸟错误，完全遗漏了 django 命令任务的一些必要结构：

```
class Command(BaseCommand): 
help = 'Deletes expired legs, preferences and assignments' 
    def handle(self, *args, **options): 
```

# jquery - jquery 悬停和 setTimeout / clearTimeOut

> ID：10299531
> 
> 赞同：3
> 
> 时间：2012-04-24T14:00:32.703
> 
> 标签：jquery, hover, settimeout

我目前正在尝试使用子菜单制作菜单。这是我想做的。

在悬停链接（#mylink）时，我想在其下方显示一个 div（我们称之为“#submenu”）。在鼠标离开此链接时，希望在 5 秒后执行一个功能。

在这 5 秒的时间间隔内，如果我将鼠标悬停在我的 div (#submenu) 上，我想清除超时。所以这个 div 不会在 5 秒后消失。

这是我的代码：

```
$(document).ready(function()
{
    $("#mylink").hover(
        function ()
        {
            $('#submenu').show();
        },
        function()
        {
            var timer = setTimeout(function(){$('#submenu').hide();}, 5000);
        }
    );

    $("#submenu").hover(
        function ()
        {
            clearTimeout(timer);
        },
        function()
        {
            $('#submenu').show();
        }
    );
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-24T14:07:29.570

SLaks 有正确的答案，但要详细说明，您将放在`var timer`函数处理程序之外。请注意，此示例没有创建`timer`全局变量 - 它只是扩大了其范围，因此所有处理程序都可以使用它。

```
$(document).ready(function(){
    var timer;
    $("#mylink").hover(
        function(){
            $('#submenu').show();
        }, function(){
            timer = setTimeout(function(){$('#submenu').hide();}, 5000);
        }
    );

    $("#submenu").hover(
        function(){
            clearTimeout(timer);
        }, function(){
            $('#submenu').show();
        }
    );
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T14:03:20.110

`var timer`是一个局部变量。
它在该处理程序之外不存在。

您需要将其设为全局变量。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-24T14:14:41.970

这是我会怎么做

```
var timer
$("#mylink").mouseenter(function(){clearTimeout(timer);$('#submenu').show()})
$("#mylink").mouseout(function(){timer = setTimeout(function(){$('#submenu').hide();}, 1000);}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T14:14:22.893

如果你把#submenu 放在#mylink 里面，你就不需要#submenu 的第二个事件处理程序，你会得到这样的东西：

```
var timer;
$(document).ready(function()
{
    $('#mylink').hover(function()
    {
        clearTimeout(timer);
        $('#submenu').show();
    },function()
    {
        timer = setTimeout(function(){$('#submenu').hide();},5000);
    });
} 
```

顺便说一句，你不需要 jQuery。用普通的 js 编写代码不会那么长。

# ruby-on-rails - 在 RailsAdmin 中创建自定义嵌套表单

> ID：10299533
> 
> 赞同：1
> 
> 时间：2012-04-24T14:00:35.463
> 
> 标签：ruby-on-rails, ruby, rails-admin

我正在尝试在 RailsAdmin 中为我的一个模型创建一个自定义嵌套表单，以添加比内置小部件允许的更多功能。

我有一个拥有_many TechSpecs 的项目。在我的 rails_admin.rb 初始化程序中，我有以下内容

```
config.model Project do
  edit do
    configure :tech_specs do
      partial 'tech_specs_field'
    end
  end
end 
```

在 _tech_specs_field.html.haml 中（我个人更喜欢 erb，但我得到了非常奇怪的“no method safe_concat for nil:NilClass”错误，除非我使用 haml）我有

```
= form.fields_for(field.name) do |nested_form|
  = render :partial => 'spec', :locals => {:nested_form => nested_form}

- add = "<i class='icon-plus icon-white'></i> New Tech Spec".html_safe
= form.link_to_add add, field.name, { :class => 'btn btn-info' } 
```

实际上，我可以在页面底部的隐藏 div 中看到生成的新 tech_specs 的蓝图，但是单击 New Tech Spec 按钮什么也没做。_spec.html.haml 内部只是一堆 text_fields 和 hidden_​​fields 加上删除链接（确实有效）。

我想知道两件事：

1）我如何跟踪 JS 中应该发生的事情并修复它或我的部分以使用 bbenezech-nested_form gem 中的 RailsAdmin 嵌套表单（RailsAdmin 依赖于）

2）关于为什么我的部分必须在 haml 中，而不是 RailsAdmin 使用的任何想法，并且不知何故它在生成管理表单的大规模链中不兼容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:49:48.543

这不是一个好的最终答案，但我能够通过 ui.js 中的以下 JS hack 解决问题

```
 var oldNestedFormEvents = window.nestedFormEvents.insertFields
  window.nestedFormEvents.insertFields = function (content, assoc, link) {
    if ($(link).closest('.no_tabs').length > 0) {
      return $(content).insertBefore(link);
    } else {
      return oldNestedFormEvents(content, assoc, link);
    }
  } 
```

在我想使用嵌套表单的自定义部分上，我只需将“no_tabs”类添加到它们包含的 div 中，并重用来自 bbenezech-nested_forms 的原始 insertFields 方法。

# facebook - 我不知道如何在 facebook 上注册我的网站

> ID：10299535
> 
> 赞同：3
> 
> 时间：2012-04-24T14:00:37.087
> 
> 标签：facebook, facebook-login

我的网站开发人员正在为我制作一个 FAcebook 登录按钮，但他说他需要一个应用程序 ID 和应用程序密码才能继续。

我想我必须在 facebook 上注册我的网站才能获得 ID，但我不知道该怎么做。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T14:02:27.443

在此处创建应用程序：[https ://developers.facebook.com/apps](https://developers.facebook.com/apps)

创建应用程序时，您将获得一个应用程序 ID 和密码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T14:04:48.677

1.  您需要先在这里创建一个应用程序：[https ://developers.facebook.com/apps](https://developers.facebook.com/apps)
2.  阅读这篇文章：[https](https://developers.facebook.com/docs/guides/web/) ://developers.facebook.com/docs/guides/web/ 注意：从 facebook 开发人员那里获取您的应用程序 ID（第一步）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T14:02:44.997

您需要安装一个名为“开发者”的应用程序。它会让你设置一切。只需转到应用程序，然后搜索开发人员。它有 Facebook 图标。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T14:03:20.217

在 facebook 的网站上搜索应用程序 ID，或使用以下链接：

[http://developers.facebook.com/docs/opengraph/tutorial/](http://developers.facebook.com/docs/opengraph/tutorial/)

# gwt - 异步 DataProvider、CellTable、Pager“最后一页按钮”

> ID：10299542
> 
> 赞同：1
> 
> 时间：2012-04-24T14:00:45.643
> 
> 标签：gwt, asynchronous, pager, dataprovider, celltable

我正在使用带有 Page 和异步 DataProvider 的 CellTable。一切正常，页面的“最后一页”按钮被禁用。这可能是因为 Asynchronous DataProvider，可以传递额外的数据，因此不知道他将拥有多少条记录以及最后一页是什么。但是我知道数据传输何时完成，所以我可以显示最后一页。

我如何告诉异步数据提供者，没有更多数据，他应该显示最后一页按钮？

BR，斯特凡

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T07:53:46.533

我有同样的问题，使用带有 uiBinder 的 SimplePager。SimplePager 的默认构造函数显示一个前进按钮，而不是最后一页...

然后，我将 @UiField(provided=true) 用于 SimplePager，并使用以下构造函数：

```
pager = new SimplePager(TextLocation.LEFT, (Resources) GWT.create(SimplePager.Resources.class), false, 0, true); 
```

哪个匹配：

```
public SimplePager(TextLocation location,
  Resources resources, boolean showFastForwardButton,
  final int fastForwardPages, boolean showLastPageButton) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T22:14:14.910

您是否尝试将[updateRowCount(count,exact)](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/view/client/AsyncDataProvider.html#updateRowCount%28int,%20boolean%29)`exact`函数中的标志设置为 true？

还要确保按以下顺序调用更新函数：

```
setRowCount(length, true);
setRowData(0, data); 
```

# c# - BackgroundWorker 异常处理

> ID：10299546
> 
> 赞同：10
> 
> 时间：2012-04-24T14:00:58.467
> 
> 标签：c#, multithreading, exception, backgroundworker, enterprise-library

我正在使用以下组件：

*   一个库（引发异常）
*   一个测试控制台来测试我的日志记录
*   企业库异常处理应用程序块
*   企业图书馆日志记录应用程序块

我正在使用后台工作人员调用库方法。库会引发异常，但永远不会调用 RunWorkerCompleted 处理程序。

捕获异常的唯一方法是用 try/catch 块包围我的 DoWork 处理程序代码。

是否误解了 RunWorkerCompletedEventArgs.Error 属性？不是为了获取被BackgroundWorker捕获的异常吗？

代码示例：

```
static BackgroundWorker w = new BackgroundWorker();

w.DoWork += new DoWorkEventHandler(w_DoWork);
w.RunWorkerCompleted += 
   new RunWorkerCompletedEventHandler(w_RunWorkerCompleted);
w.RunWorkerAsync();

static void w_DoWork(object sender, DoWorkEventArgs e)
{
   MyClass m  = new MyClass();
   w.result = m.Compute();
}

static void w_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
   if (e.Error != null)
   {
      HandleException(e.Error);
   }

   /* result related code */

}

static void HandleException(Exception e)
{
   ExceptionPolicy.HandleException(e, "MyPolicy");
} 
```

上面的示例导致我的控制台应用程序终止。vs2010 输出绝对不写任何内容（仅默认输出）。

那么问题出在哪里？

//编辑：此代码段用于捕获库的异常。

```
static void w_DoWork(object sender, DoWorkEventArgs e)
{
   try
   {
      MyClass m  = new MyClass();
      w.result = m.Compute();
   }catch(Exception e){ }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T14:17:12.500

这是 BackgroundWorker 的正确模式。

我怀疑问题是您的`Main`方法在 BW 完成之前退出。

`RunWorkerAsync`将立即返回，如果您没有在等待`Main`，那么您的流程将结束，甚至可能在 BW 开始之前结束，更不用说完成了。

尝试在方法`Console.ReadLine`的末尾添加 a `Main`。

* * *

不感兴趣：

BW 在控制台应用程序和 Windows 应用程序中的行为不同。如果您使用 WinForms 或 WPF 应用程序，您的 UI 线程上将有一个派生的 SynchronizationContext，BW 将封`RunWorkerCompleted`送回 UI 线程并在那里运行它。这是 BW 的主要优点之一。

在控制台应用程序中，使用默认的 SynchronizationContext 并将其编组`RunWorkerCompleted`到线程池线程上。这意味着您可以阻塞`Main`线程并且完成的处理程序仍将运行。

# javascript - jQuery 和活动菜单项 - 什么是最好的？

> ID：10299548
> 
> 赞同：0
> 
> 时间：2012-04-24T14:01:14.877
> 
> 标签：javascript, jquery, html

我正在制作一个菜单，我想将 class="selected" 添加到活动菜单项中。当`location.pathname`URL 类似于：- [http://www.google.com/sub-folder/adrov48.php](http://www.google.com/sub-folder/adrov48.php)

所以它基本上只在 url 像这样简单时才有效： - [http://www.google.com/adrov50.php](http://www.google.com/adrov50.php)

我知道有很多类似的问题，但是如果您查看下面的代码，我正在使用“新”方法，但它并没有真正起作用，那就是你们跳进去的地方:)

Javascript代码：

```
 var path = location.pathname;

            $("a[href='" + [path] + "']").parents("li").each(function() {   
                    $(this).addClass("selected");
            }); 
```

任何想法如何使这项工作成为可能，可以使用 jQuery。

如果有人认为我的方法不好或不理想，请告诉我原因并发布或链接我您的解决方案。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:17:24.950

你为什么不做这样的事情：

```
// Check complete URL
var path = location.href;
$("#navID li a").each(function() {
    // Check if there is a match between the URL and the navigation link    
    if(path.match($(this).attr("href")) $(this).parent().addClass("selected");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T14:08:28.570

结合 location.pathname 和 location.search 创建 URL 片段

# java - JAVA HashMap 2D，无法获得制作 2D HashMap 的正确方法，我的意思是 HashMap 到另一个 HashMap

> ID：10299560
> 
> 赞同：4
> 
> 时间：2012-04-24T14:02:08.677
> 
> 标签：java, hashmap, nested

我想制作一个学生姓名和科目的委员会，每个学生在每个科目都有一个成绩（或者没有......他可以离开考试而不写它，然后他的案例将是空的）。我只想使用 HashMaps。我的意思是，它会是这样的：

```
HashMap<String,HashMap<String,String>> bigBoard = 
    new HashMap<String,HashMap<String,String>>(); 
```

但我认为，我没有正确的想法，因为对于每个科目，都会有很多成绩（值），所以这是不可能的。我必须为每个学生制作地图吗？与他的主题？但随后将不会安排输出表。你有提议吗？例如，我想要一张看起来像这样的桌子。

```
Column-Key →
  Rowkey↓      Mathematics         Physics       Finance

Daniel Dolter         1.3           3.7 

Micky Mouse                                      5

Minnie Mouse                        1.7          n/a

Dagobert Duck         4.0                        1.0 
```

（我会将所有键/值用作字符串，这样会更简单。）

在我们的类实现之后（例如类名是String2D），我们应该这样使用它。

```
public static void main(String[] args) {

    String2D map2D = new String2D(); 
    map2D.put("Daniel Doster", "Practical Mathematics", "1.3"); 
    map2D.put("Daniel Doster", "IT Systeme", "3.7"); 
    map2D.put("Micky Mouse", "Finance", "5");
    map2D.put("Minnie Mouse", "IT Systeme", "1.7");
    map2D.put("Minnie Mouse", "Finance", "n/a");
    map2D.put("Dagobert Duck", "Practical Mathematics", "4.0");
    map2D.put("Dagobert Duck", "Finance", "1.0");
    System.out.println(map2D); 
} 
```

不会看到“HashMap”..并且不允许使用数组

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T14:09:16.993

你可以使用这个类：

```
public class BiHashMap<K1, K2, V> {

private final Map<K1, Map<K2, V>> mMap;

public BiHashMap() {
    mMap = new HashMap<K1, Map<K2, V>>();
}

/**
 * Associates the specified value with the specified keys in this map (optional operation). If the map previously
 * contained a mapping for the key, the old value is replaced by the specified value.
 * 
 * @param key1
 *            the first key
 * @param key2
 *            the second key
 * @param value
 *            the value to be set
 * @return the value previously associated with (key1,key2), or <code>null</code> if none
 * @see Map#put(Object, Object)
 */
public V put(K1 key1, K2 key2, V value) {
    Map<K2, V> map;
    if (mMap.containsKey(key1)) {
        map = mMap.get(key1);
    } else {
        map = new HashMap<K2, V>();
        mMap.put(key1, map);
    }

    return map.put(key2, value);
}

/**
 * Returns the value to which the specified key is mapped, or <code>null</code> if this map contains no mapping for
 * the key.
 * 
 * @param key1
 *            the first key whose associated value is to be returned
 * @param key2
 *            the second key whose associated value is to be returned
 * @return the value to which the specified key is mapped, or <code>null</code> if this map contains no mapping for
 *         the key
 * @see Map#get(Object)
 */
public V get(K1 key1, K2 key2) {
    if (mMap.containsKey(key1)) {
        return mMap.get(key1).get(key2);
    } else {
        return null;
    }
}

/**
 * Returns <code>true</code> if this map contains a mapping for the specified key
 * 
 * @param key1
 *            the first key whose presence in this map is to be tested
 * @param key2
 *            the second key whose presence in this map is to be tested
 * @return Returns true if this map contains a mapping for the specified key
 * @see Map#containsKey(Object)
 */
public boolean containsKeys(K1 key1, K2 key2) {
    return mMap.containsKey(key1) && mMap.get(key1).containsKey(key2);
}

public void clear() {
    mMap.clear();
}

} 
```

然后像这样创建使用它：

```
BiHashMap<String,String,String> bigBoard = new BiHashMap<String,String,String>(); 
```

但是，对于性能，您可能希望将不同的成绩存储在一个数组中（假设您有一组固定的课程）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T13:29:38.747

在 Java 8 中，如果它为空，则可以使用*computeIfAbsent*插入默认值。因此，您可以简单地将其用作 2d-map 的类型：

```
Map<RowType, Map<ColumnType, ValueType>> map = new WhateverMap<>(); 
```

假设所有类型都是int：

```
int get(int x, int y) 
  return map.computeIfAbsent(x, (key)->new WhateverMap<>()).computeIfAbsent(y,(key)->0);
}

void put(int x, int y, int value) 
  return map.computeIfAbsent(x, (key)->new WhateverMap<>()).put(y,value);
} 
```

请注意，这不是原子的。因此，即使 WhatMap 是，这也不是线程安全的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T14:13:08.273

我不认为嵌套的哈希图是要走的路。创建一个学生类和主题类。

```
public class Student{
    private ArrayList<Subject> SubjectList = new ArrayList<Subject>();
    private String name;

    public Student(String name){
        this.name=name;
    }
    public void addSubject(Subject s){
        SubjectList.add(s);
    }
    public String getName(){
        return this.name;
    }
    //...add methods for other operations
}
public class Subject{
    private ArrayList<double > GradeList = new ArrayList<double>();
    private String name;

    public Subject(String name){
        this.name=name;
    }
    public void addGrade(double s){
        GradeList.add(s);
    }
    //...add methods for other operations
} 
```

然后，您可以将 Student 实例存储在哈希图中。

```
public static void main(String[] args){
    HashMap<Students> hm = new HashMap<Students>();
    Student s = new Student("Daniel Dolter");
    Subject sub = new Subject("Mathematics");
    sub.addGrades(1.3);
    s.addSubject(sub);
    hm.put(s.getName(),s);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-09T17:06:07.313

您可以使用 Google Guava 的`Table<R, C, V>`集合。这类似于eabraham的回答。值`V`由行`R`和列作为键`C`。它是一个更好的替代方案，`HashMap<R, HashMap<C, V>>`它会很快变得不可读且难以使用。

有关更多信息，请参阅他们的[GitHub Wiki](https://github.com/google/guava/wiki/NewCollectionTypesExplained#table)。

# mysql - 记录特定表的 mysql 更新查询

> ID：10299569
> 
> 赞同：3
> 
> 时间：2012-04-24T14:02:36.497
> 
> 标签：mysql, logging

是否可以使用 mysql bin log 仅在特定表上记录更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:15:56.117

[在主服务器上使用--binlog-do-db](http://dev.mysql.com/doc/refman/5.5/en/replication-options-binary-log.html#option_mysqld_binlog-do-db)可以让一个（或多个）数据库进入 bin 日志。

也可以让从属只复制与[--replication-wild-do-table匹配的某个字符串的表](http://dev.mysql.com/doc/refman/5.5/en/replication-options-slave.html#option_mysqld_replicate-wild-do-table)

# javascript - 过滤器中的 Javascript 降低/忽略大小写

> ID：10299577
> 
> 赞同：0
> 
> 时间：2012-04-24T14:02:57.257
> 
> 标签：javascript

嗨，我试图为跨度列表制作过滤器，我无法将跨度中的内容转换为小写或忽略大小写。有任何想法吗？

```
 $("#filterinput2").keyup(function () {
            var filter = ($(this).val()).toLowerCase(); // get the value of the input, which we filter on
            console.log("lower filter" + filter);
            if (filter) {         
                // hide tr's for songs not matching and show tr's for songs matching
                $(".tonelist").find(".song:not(:contains(filter))").parent().parent().parent().fadeOut("slow");
                $(".tonelist").find(".song:contains(filter)").parent().parent().parent().fadeIn();
                if (window.console != undefined) {
                    console.log($(".tonelist").find(".song:not(:contains(" + filter + "))").parent().parent().parent().innerHTML);
                }

                $(".tonelist").find(".grouptitle:not(:contains(" + filter + "))").parent().fadeOut("slow");
                $(".tonelist").find(".grouptitle:contains(" + filter + ")").parent().fadeIn();
                if (window.console != undefined)
                    console.log($(".tonelist").find(".grouptitle:not(:contains(" + filter + "))").parent().parent().parent().innerHTML);
            } else
            // if input field is empty, show all tr's
                $(".tonelist").find("tr").fadeIn();

            ColorLines();
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:22:58.237

您将不得不自己检查每个跨度的内容。您可以使用 .html() 函数将每首歌曲/组标题的内容作为字符串获取。像这样的东西可能会起作用（尽管我还没有测试过）：

```
 $("#filterinput2").keyup(function () {
        var filter = ($(this).val()).toLowerCase(); // get the value of the input, which we filter on
        console.log("lower filter" + filter);
        if (filter) {         
            // hide tr's for songs not matching and show tr's for songs matching
            spans = $(".tonelist").find(".song, .grouptitle")
            for (s in spans) {
                el = $(spans[s]);
                if ( el.html().match( new RegExp(filter, "i") ) ) {
                    el.fadeIn();
                } else {
                    el.fadeOut("slow");
                }
            }
        } else
        // if input field is empty, show all tr's
            $(".tonelist").find("tr").fadeIn();

        ColorLines();
    }); 
```

原因是 :contains() css 选择器区分大小写，我不知道如何更改它。

# jquery - Jquery：禁用复选框上的“点击”事件

> ID：10299583
> 
> 赞同：3
> 
> 时间：2012-04-24T14:03:15.530
> 
> 标签：jquery

在我当前的 JQuery 中，如果用户单击表中的一行，我有一个事件将选中或取消选中复选框。这样做的问题是，如果用户实际上选中了复选框，jquery 将触发复选框事件并选中/取消选中该框，但随后 TR 事件将触发然后撤消复选框值。

在此处查看示例：http: [//jsfiddle.net/radi8/KYvCB/1/](http://jsfiddle.net/radi8/KYvCB/1/)

我可以禁用该复选框，但如果用户尝试选择该复选框，TR 事件将不会触发。

我需要的是一种方法来禁用复选框的“点击”事件，但在选中复选框时仍允许触发 TR 事件。

```
var charges = {
    init: function() {
        // get the selected row checkbox
        //$('.charges').attr('disabled', true);
        $('.rowclick tr').click(function() {
            if ($(this).find('td input.charges:checkbox').is(':checked')) {
                $(this).find('td input.charges:checkbox').attr("checked", false);
            }
            else {
                $(this).find('td input.charges:checkbox').attr("checked", true);
            }
        });
    }
};
charges.init(); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-24T14:11:45.607

您需要检查事件是否在 a或其他地方`click`触发。**这需要的资源少于复选框的第二个事件处理程序****。**`checkbox`**`e.stopPropagation`**

```
 $('.rowclick tr').click(function(e) {
        if($(e.target).closest('input[type="checkbox"]').length > 0){
            //Chechbox clicked
        }else{
            //Clicked somewhere else (-> your code)
            if ($(this).find('td input.charges:checkbox').is(':checked')) {
                $(this).find('td input.charges:checkbox').attr("checked", false);
            }
            else {
                $(this).find('td input.charges:checkbox').attr("checked", true);
            }
        }
    }); 
```

工作示例：http: [//jsfiddle.net/KYvCB/5/](http://jsfiddle.net/KYvCB/5/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T14:10:05.387

您需要停止传播`click`事件：

```
var charges = {
    init: function() {
        $('.td input.charges:checkbox').on('click', function (e)
        {
            e.stopPropagation();
        })
        $('.rowclick tr').click(function() {
            if ($(this).find('td input.charges:checkbox').is(':checked')) {
                $(this).find('td input.charges:checkbox').attr("checked", false);
            }
            else {
                $(this).find('td input.charges:checkbox').attr("checked", true);
            }
        });
    }
};
charges.init(); 
```

[http://jsfiddle.net/KYvCB/4/](http://jsfiddle.net/KYvCB/4/)

# java - 用于 JAVA 的网格库

> ID：10299584
> 
> 赞同：0
> 
> 时间：2012-04-24T14:03:17.333
> 
> 标签：java, mesh, triangulation

我正在寻找一个包含网格操作工具（数据结构、网格简化算法、三角剖分）的 java 库。类似于[http://gts.sourceforge.net/index.html](http://gts.sourceforge.net/index.html)但适用于 Java。

Stack 上有一个类似的问题，但它是从 09 年开始的，没有令人满意的答案……所以再一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:17:38.833

您可以查看包含[CGAL](http://www.cgal.org)库的 SWIG 绑定的[cgal-bindings项目。](http://code.google.com/p/cgal-bindings/)它在 Java 上运行良好。例如，您可以访问 2D 和 3D 的 Delaunay 三角剖分。

# java - 干净的代码、无状态会话 bean 和私有状态

> ID：10299592
> 
> 赞同：10
> 
> 时间：2012-04-24T14:03:35.953
> 
> 标签：java, coding-style, ejb-3.0, java-ee-6, ejb-3.1

根据 Robert C. Martin 的干净代码，方法应该有一个小签名。最好的情况是完全没有参数的方法。相反，建议使用状态变量。这真的很有用。但是无状态会话 bean 呢？

这个名字有点令人困惑，因为 SLSB 可以有状态。你只需要做你的家务，这样你就不会使用上一个 EJB 调用中的状态。

回到干净的代码：我也喜欢在 SLSB 中使用实例变量。这很好用，如果你足够小心，你不会遇到任何状态不一致的问题，因为在每个公共方法调用上都会覆盖状态。

到目前为止，一切都很好。但是如果一个用过的 bean 回到池中会发生什么？它带着它的状态。根据状态的大小，这可能是真正的内存泄漏。JBoss 对 bean 非常慷慨，并且生成了相当多的 bean，从而导致了一些严重的内存消耗——一无所获。

因此，一种方法是在 bean 方法存在并将 bean 返回到池之前清理状态。但在我看来，这似乎是应该避免的无用代码。

有没有合适的方法来处理这个问题？在这种情况下，最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-21T12:31:51.783

将实例变量保留在 SLSB 中是完全可能的，因为您不使用代理在方法之间进行调用。例如：

```
@Stateless 
public class MyEJB {
    private String myVar;

    public void receiveVar(String myVar) {
        this.myVar = myVar;
        useVar();
    }

    private void useVar() {
        // do something with var
    }
} 
```

重点是：当你把这个 SLSB 注入另一个时，任何方法调用都会通过代理来实现实际的 EJB。因此，考虑到在代理实例上调用方法时会从池中检索真实实例，因此不能保证代理在两次或多次调用之间会使用相同的池化实例。所以不可能确保任何声明的类属性的值。

当 SLSB 回到池中时，它会带走每个设置的值（我认为它可能会根据供应商而改变，我不太确定）。但是，池化的 SLSB 实例已经具有先前配置的属性值是完全可能的（并且可以接受）。

我不明白你的意思：

> 到目前为止，一切都很好。但是如果一个用过的 bean 回到池中会发生什么？它带着它的状态。根据状态的大小，这可能是真正的内存泄漏。JBoss 对 bean 非常慷慨，并且生成了相当多的 bean，从而导致了一些严重的内存消耗——一无所获。

您有任何可以在 SLSB 中使用的“大状态”示例吗？

最后：

我认为处理值的最佳方法始终是处理您将使用的状态变量。使用前设置和使用后清洁。最好的做法是避免这种令人困惑的情况。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:38:20.073

> 根据 Robert C. Martin 的干净代码，方法应该有一个小签名。

通常我更喜欢传入（传输对象）作为参数，这样我可以改变我传入的内容而不影响方法签名。

另外，我更喜欢传入一个接口，而不是实际的基类。

```
public void doSomething(IMyTransferObject arg){
 ...
} 
```

`IMyTransferObject`接口在哪里

```
interface IMyTransferObject {
   ...
}

class TransferObject implements IMyTransferObject{
  private String name;
  private String game;
  ... accessor / mutator
} 
```

> 最好的情况是完全没有参数的方法。相反，建议使用状态变量。这真的很有用。但是无状态会话 bean 呢？

这不能虔诚地遵循，真的没有理由这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T16:57:34.790

来自[http://docs.oracle.com/javaee/6/tutorial/doc/gipjg.html](http://docs.oracle.com/javaee/6/tutorial/doc/gipjg.html)：

> 无状态会话 Bean
> 
> 无状态会话 bean 不维护与客户端的会话状态。当客户端调用无状态 bean 的方法时，bean 的实例变量可能包含特定于该客户端的状态，但仅限于调用期间。当方法完成时，不应保留特定于客户端的状态。但是，客户端可能会更改池化无状态 bean 中实例变量的状态，并且此状态将保留到池化无状态 bean 的下一次调用。除了在方法调用期间，无状态 bean 的所有实例都是等效的，允许 EJB 容器将实例分配给任何客户端。也就是说，无状态会话 bean 的状态应该适用于所有客户端。

我不是 EE 方面的专家，但在我看来，技术上也允许按照您的计划使用字段。

我假设您**必须**确保在每次新方法调用时，实例字段都会使用新数据进行更新，并且我认为您**应该**确保在方法结束后删除引用以确保您不会阻塞旧对象的垃圾收集只是因为它们在仍然保存在某个池中的一些“旧”bean 中被引用。

我会建议这样的模式：

```
public class MyBean{

  private SomeClass firstObject;
  private SomeOtherClass anotherObject;
  private AndAnotherClass thirdObject;

  public void theMethod(firstObject, anotherObject, thirdObject){
    try {
      this.firstObject = firstObject;
      this.anotherObject = anotherObject;
      this.third = thirdObject;

      startProcessing();

    }finally {
      this.firstObject = null;
      this.anotherObject = null;
      this.third = null;
    }
  }

  private void startProcessing() {
    doStep1();
    doStep2();
    doStep3();
  }

  [...]
} 
```

仍然有很多代码 - 但如果您始终坚持这种风格，您会自动跳过“theMethod”部分并继续阅读“startProcessing”，在那里您拥有干净且没有参数的所有内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T14:07:30.813

保持简单，只需传入参数。即使您*可以*不这样做，从无状态 EJB 的意图来看，您*也不应该这样*做。

以零参数为目标的 FWIW 对我来说似乎很愚蠢。瞄准*少数*，是的，但为了自己的利益而努力为零是愚蠢的。

# javascript - 在 jQuery 中无限更改 z-index

> ID：10299597
> 
> 赞同：1
> 
> 时间：2012-04-24T14:03:46.437
> 
> 标签：javascript, jquery, html, css

我对 jQuery 有点陌生，但我需要编写一个小的自定义图像旋转器。基本上我会有一小堆看起来像宝丽来的 .png 图像。旋转器需要将顶部的一个拉下，将其向右移动，将 Z-index 设置为低于其他两个，然后将其移回……就像您浏览一堆图片时一样。

大多数我认为我可以做到，但我不太明白的问题是我需要不断交换这 3 个图像的 Z-index（将顶部图像向右移动，将 z-index 重置为低于其他两个, 后退)

在 HTML 中，我有以下内容：

```
<img src="images/polariod_1.png" width="255" height="260" alt="Singer" class="headerrightgraphic">
<img src="images/polariod_2.png" width="255" height="260" alt="Singer" class="headerrightgraphic">
<img src="images/polariod_3.png" width="255" height="260" alt="Singer" class="headerrightgraphic"> 
```

关于如何以优雅的方式更改这些 z-index 的任何线索，而无需一遍又一遍地硬编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:07:13.213

与其更改 z-index，不如考虑为所有照片提供相同的 z-index，并按照它们需要显示的顺序将它们重新附加到父节点。这消除了对“无限”z-indexes 获取照片上方和下方内容的需要。

例如，如果用户可以单击一个将其拉到顶部，只需将其重新附加到父节点：

```
// assuming you have a handle to the element `photoElement`

photoElement.parentNode.appendChild(photoElement); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:07:55.737

我想说将值存储在 JS 的全局变量中，使用`.data`jquery 中的函数或使用一些隐藏的输入来保存当前的 z-index。

您也可以尝试不使用 z-indexing 并可能操纵元素的位置（dom 树中的元素“向下”将出现在其他元素的顶部），因此可以将其移动到站点，将其添加到第一个 img ，然后将其滑回原位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T14:08:15.283

*后面*看不到`display:none;`的图片要怎么用？

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T14:11:21.503

我会考虑使用 display:none / block 而不是更改 z-index。Z-index 图像画廊在过去给我带来的只是麻烦。

这是我在谷歌上找到的一个片段。 [来源](http://snook.ca/archives/javascript/simplest-jquery-slideshow)

```
$(function(){
$('.fadein img:gt(0)').hide();
setInterval(function(){
  $('.fadein :first-child').fadeOut()
     .next('img').fadeIn()
     .end().appendTo('.fadein');}, 
  3000);
}); 
```*

# c# - 在编码的 ui 测试中传递命令行参数

> ID：10299599
> 
> 赞同：4
> 
> 时间：2012-04-24T14:03:59.447
> 
> 标签：c#, coded-ui-tests

是否可以在编码的 ui 测试中传递命令行参数？在普通的 C# 程序中，我们只是将参数与 exe 文件一起传递，例如：命令提示符中的 filename.exe "2" "7"。

但是这样的事情可以在编码的 ui 测试中完成吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T18:19:11.147

不，你可以这样做。`CodedUi`测试通过`MSTest`不支持它的命令行执行。[在此处](http://msdn.microsoft.com/en-us/library/ms182489%28v=vs.100%29.aspx)查看可用的命令行选项`MSTest`。

但是，您可以创建另一个`Project`（例如控制台应用程序）来实现这一点。第二个项目引用了您的`CodedUI Project`. 然后通过该项目的 .exe 文件传递​​参数，该文件调用适当的`CodedUI Test Method`. 但我认为这不会像`MSTest`现在那样工作（它不会创建测试结果）。

# node.js - 使用 Node.js / Heroku 环境变量管理应用程序设置的方法

> ID：10299607
> 
> 赞同：0
> 
> 时间：2012-04-24T14:04:28.257
> 
> 标签：node.js, environment-variables, express

目前，我有几个使用 NODE_ENV 加载的“环境”
（我正在使用 RailwayJS / express）

development.js
app.set('mongodb_connection_string', 'mongodb://localhost/') // 例子

production.js:
app.set('mongodb_connection_string', process.env.MONGOLAB_URI)

因此，在生产中，我们使用了在 heroku 中设置的 MONGOLAB_URI 变量。

只是想知道是否有更好的方法来管理这些，而不必加倍并设置 app.set('mongodb_connection_string') ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T17:33:41.523

我为此使用了这个非常小的模块。它是用咖啡脚本写的，如果您看不懂，请告诉我，我会翻译它：

```
extend = (source, replacement)->

  for k, v of replacement

    source[k] = v

  source

module.exports =

  create: ->

    env_settings = this[process.env.NODE_ENV]

    extend this.general, env_settings 
```

这使我可以编写以下设置：

```
settings = require 'square-settings'

settings.general =

  domain: '0.0.0.0:3000'

settings.production =

  domain: 'www.somewhere.com'

module.exports = settings.create() 
```

settings.general 中的所有内容都是默认设置。我可以通过添加 settings.environment 为每个环境覆盖它。

# vim - 从 Filezilla 打开文件到控制台 Vim？

> ID：10299612
> 
> 赞同：6
> 
> 时间：2012-04-24T14:04:45.180
> 
> 标签：vim, editor, filezilla

有时我需要修改 FTP 服务器中的文件，目前我有 Filezilla 在 sublime 中打开它们。但是我正在迁移到 VIM，但我还没有找到在 VIM 控制台中打开文件的方法。可能对 gVim 完美无缺，但有人在控制台上工作吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T18:05:14.010

`vim`我设法通过调用自定义 shell 脚本包装器而不是 vim 本身来弹出一个控制台。

```
#!/bin/bash
gnome-terminal -e "vim $1" 
```

缺点之一是每次都会弹出一个新窗口。希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-27T11:54:26.973

这个话题已经很老了，但 Vim 仍然是最好的！所以，我想分享一下我的经验。

我在 Debian 9.2 环境中使用Guake **Terminal**和**Vim** v8 **。**@soulseekah 发布的解决方案很棒，但不允许在此配置中打开多个文件。

 **作为公认的解决方案，我们需要一个 bash 脚本。不同之处在于我们检查 vim 是否正在运行。如果没有，请运行它。如果是，请在新选项卡中打开文件。

开始了 ：

```
#!/bin/bash

if pgrep -x "vim" > /dev/null ; then
    guake -e ":tabedit $1";
else
    guake -e "vim $1" 
fi 
```

**缺点：**

*   需要处于正常模式才能打开新文件。
*   不适用于 gnome 终端。

享受吧！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T20:25:26.677

我使用[Midnight Commander](http://www.gnu.org/software/mc/)来做同样的事情，它适用于控制台 Vim 以及许多非常有用的其他命令。**

# html - 隐藏表单元素上的 htmlentities

> ID：10299618
> 
> 赞同：0
> 
> 时间：2012-04-24T14:05:09.590
> 
> 标签：html, forms, html-entities, input-sanitization

这似乎是一个愚蠢的问题，但用户输入的清理不断让我感到困惑，我希望一劳永逸地得到一个明确的答案。

所以这是场景

1.  客户填写网络表格。
2.  PHP 检查必填字段是否已正确填写，如果没有填写，则不会让客户继续填写。
3.  如果是这样，则用户输入将显示在屏幕上以供确认，同时输入数据也存储为隐藏的表单元素。
4.  然后客户确认输入，然后将隐藏的元素发送给进一步处理。

使用直到最后一分钟才应转义数据的原则，这将如何应用于存储在第 3 点的隐藏元素中的数据。（显然，此时打印在屏幕上的数据我也应用了 htmlentities()）

我是否应该在隐藏元素上使用 htmlentities，但这在技术上不是最后阶段，因为在第 4 部分之后，我将再次使用变量，然后将它们粘贴到数据库或电子邮件中。

我完全意识到我可能做错了，所以任何想法都是非常受欢迎的。^_^

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T14:13:20.520

如果您将用户的输入写出到页面，则应始终对其进行转义。否则，没有什么可以阻止人们在他们的输入中添加 javascript 等，或者尝试逃离隐藏字段并将代码注入页面。所以是的，在隐藏字段上也使用 htmlentities。仅仅因为用户看不到它们并不能阻止人们向它们注入代码。

# c++ - 使用 EnumDisplayDevices 获取显示器的名称

> ID：10299619
> 
> 赞同：4
> 
> 时间：2012-04-24T14:05:20.227
> 
> 标签：c++, windows

我遇到了[这篇](https://stackoverflow.com/questions/4958683/how-do-i-get-the-actual-monitor-name-as-seen-in-the-resolution-dialog)文章，其中有人想使用 EnumDisplayDevices 找出他们的显示器的名称。

这正是我想要的，我尝试在 C++ 中做类似的事情，但对 EnumDisplayDevices 的第二次调用似乎从未返回任何内容，我只获得有关显卡的信息。

```
DISPLAY_DEVICE dd;
memset(&dd, 0, sizeof(DISPLAY_DEVICE));
dd.cb = sizeof(dd);
int i = 0;
while(EnumDisplayDevices(NULL, i, &dd, 0))
{
    Log(_T("Device Name: %s Device String: %s"), dd.DeviceName, dd.DeviceString);

    if(EnumDisplayDevices(dd.DeviceName, 0, &dd, 0))
    {
        Log(_T("Monitor Name: %s Monitor String: %s"), dd.DeviceName, dd.DeviceString);
    }

    i++;
} 
```

我得到的输出是

```
Device Name: \\.\DISPLAY1 Device String: NVIDIA GeForce 9300 GE
Device Name: \\.\DISPLAYV1 Device String: NetMeeting driver
Device Name: \\.\DISPLAYV2 Device String: RDPDD Chained DD 
```

目标平台是 XP，我无法找到监视器名称的任何*标准*方法。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T17:09:21.713

After the **first call** to EnumDisplayDevices DispDev.DeviceString contains **graphic card's name**. After **the second call** DispDev.DeviceString contains **monitor's name**.

Also see this [link](http://thetweaker.wordpress.com/2011/11/13/reading-monitor-physical-dimensions-or-getting-the-edid-the-right-way/) for other ways to get this info

```
BOOL GetMonitorInfo(int nDeviceIndex, LPSTR lpszMonitorInfo) {
    BOOL bResult = TRUE;
    FARPROC EnumDisplayDevices;
    HINSTANCE  hInstUserLib;
    DISPLAY_DEVICE DispDev;
    char szDeviceName[32];

    hInstUserLib = LoadLibrary("User32.DLL");

    EnumDisplayDevices = (FARPROC)GetProcAddress(hInstUserLib,
                                                 "EnumDisplayDevicesA");
    if(!EnumDisplayDevices) {
        FreeLibrary(hInstUserLib);
        return FALSE;
    }

    ZeroMemory(&DispDev, sizeof(DISPLAY_DEVICE));
    DispDev.cb = sizeof(DISPLAY_DEVICE);

    // After first call to EnumDisplayDevices DispDev.DeviceString 
    //contains graphic card name
    if(EnumDisplayDevices(NULL, nDeviceIndex, &DispDev, 0)) {
        lstrcpy(szDeviceName, DispDev.DeviceName);

        // after second call DispDev.DeviceString contains monitor's name 
        EnumDisplayDevices(szDeviceName, 0, &DispDev, 0);

        lstrcpy(lpszMonitorInfo, DispDev.DeviceString);
    }
    else {
        bResult = FALSE;
    }

    FreeLibrary(hInstUserLib);

    return bResult;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T17:01:23.937

我认为[Win32_DesktopMonitor](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394122%28v=vs.85%29.aspx)可能更适合您尝试做的事情。

# asp.net - ASP.Net 购物车 - 重复的会话 ID

> ID：10299624
> 
> 赞同：1
> 
> 时间：2012-04-24T14:05:44.600
> 
> 标签：asp.net, .net, e-commerce

谁能告诉我这里发生了什么？我在购物车网站中的 2 台单独的机器、2 个不同的浏览器中获得重复的会话 ID？

我已经用 300 个字符的随机字符串生成了一个新的会话 ID，但它们仍然被重复

这是新代码......只需为旧代码取出 SyncLock 内容：

```
 Dim _key As String = String.Empty
    SyncLock _locker
        _key = Guid.NewGuid().ToString()
        Session("Identifier") = Validations.GeneratePassword(150, 300)
        Session("SessionID") = _key
        Session("SiteID") = "F2630237-E355-4C8A-947E-BBAC97ECA550"
        Session("HomePage") = 13
    End SyncLock 
```

是的，我知道 Session("SessionID") 不是会话 ID，但是，我们曾经使用 Session.SessionID 作为“标识符”，并且它被重复了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T14:10:14.707

为什么要自己生成`SessionID`？
ASP.NET 和浏览器开箱即用，可能比你或我更好。

我建议你改用这个：

[HttpSessionState.SessionID](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.httpsessionstate.sessionid.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-05T04:48:03.633

我宁愿采用不同的方法

我创建了一个带有身份的表，每次需要会话 id 时，都会进行插入并将其存储在会话变量中

我认为随机生成器不可信

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T17:58:16.620

我找到了解决方案。

如果我将 web.config 中的会话管理器设置为我的类，并且它有效

```
<sessionState mode="InProc" cookieless="false" timeout="20" sessionIDManagerType="o7th.Projects.Core.SessionManager"/> 
```

# python - 根据值找到的前 -10 个唯一字典键

> ID：10299626
> 
> 赞同：1
> 
> 时间：2012-04-24T14:05:56.150
> 
> 标签：python, dictionary, hashmap

需要根据 value 找出前 10 个字典键的值.. value 是两个字段的元组..

```
{ Key : (value1, value2) } 
```

所以首先，我们必须根据前 10 个 value1 找到 key 的列表，然后我们必须根据前 10 个 value2 找到 key 的列表。

然后我们必须找到list1和list2的集合，并返回列表......

我们如何以pythonic方式做到这一点......

或者我应该写完整的逻辑来做这些事情......

我写了一个解决方案：字典是键：值对.....

```
dict(sorted(dict_mapping.iteritems(), key=lambda dict_mapping:dict_mapping[1]) [0:10]).keys() 
```

请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:15:54.827

```
sorted(data.keys(), key=lambda x: data[x][1])[:10] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T14:31:52.713

如果字典值是元组，python 的 sorted() 将进行字典排序。这意味着， value1 将用于排序， value2 将用于平局。

```
sorted(a.keys(), key=a.get)[:10] 
```

这应该会产生按值排序的前 10 个键，而不是字典中的键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T14:59:12.057

```
data = {'key1': ('value1', 'value2'), 'key2': ('value3', 'value4')}

tmp = [sorted(data.keys(), key=lambda x: data[x][i])[:10] for i in (0, 1)]
result = set(tmp[0]+tmp[1]) 
```

# jquery - 在框架外使用 jQuery UI 按钮

> ID：10299627
> 
> 赞同：0
> 
> 时间：2012-04-24T14:05:56.763
> 
> 标签：jquery, jquery-ui

我想将 jQuery 按钮元素用作“独立” - 不使用该`.button()`功能（包括翻转效果）。单独分配`.button()`给每个人会很复杂......

我正在寻找的是一种解决方案，可以使用 jQuery UI 的直接 CSS 类来创建某种“组合”类，例如：（*注意：“import”仅用于描述，我知道它是无效的）*

```
.ui-button-custom {
    "import" ui-state-default;
}
.ui-button-custom:hover {
    "import" ui-state-hover;
} 
```

其他可能的方法是`.button()`动态应用于特定元素，例如：

```
// gets all elements with "custom-button" in the class attr
$("a[class*=custom-button").each(function(){
  var t=$(this);
  // apply .button() to all of them
  t.button({
    icons: {
      // get the icon dynamically from the class name:
      // strip off "custom-button-" and the rest is the icon name
      primary: t.attr('class').substring(lastIndexOf('custom-button-'))
    }
  });
});

<a href="#" class="custom-button-ui-icon-refresh">Log In</a> 
```

注意：这只是一个解决方案的轮廓。我对 jQuery UI 有一点经验，所以也许有更多经验的人可以指出这个想法的问题......

我的问题是：

1.  有没有其他方法可以做到这一点？
2.  如果不是 & 如果纯 CSS 是不可能的 - 如何完成上面的 JS（如果可能）？我知道我完全不明白的`.button()`用途......`.next()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:18:21.787

为什么不简单地向您的自定义按钮添加多个类？像：

```
<a href="#" class="custom-button-ui ui-state-default">Log In</a>. 
```

然后用 jquery 设置一个 mouseover/mouseout 函数来添加/删除 ui-state-hover 类

```
<script type="text/javascript">
$(document).ready(function(){
  $(".custom-button-ui").mouseover(function(){
    $(this).removeClass('ui-state-default').addClass('ui-state-hover');
  });
  $(".custom-button-ui").mouseout(function(){
    $(this).removeClass('ui-state-hover').addClass('ui-state-default');
  });
});
</script> 
```

甚至

```
<a href="#" class="custom-button-ui">Log In</a> 
```

和

```
<script type="text/javascript">
$(document).ready(function(){
  $(".custom-button-ui").addClass('ui-state-default');
  $(".custom-button-ui").mouseover(function(){
    $(this).removeClass('ui-state-default').addClass('ui-state-hover');
  });
  $(".custom-button-ui").mouseout(function(){
    $(this).removeClass('ui-state-hover').addClass('ui-state-default');
  });
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:10:22.597

经过一番试验，我终于找到了解决方案：

```
<a href="#" id="sss" class="custom-button-ui-icon-refresh">Log In</a>
<br />
<a href="#" id="sssaaa" class="custom-button-ui-icon-circle-close">Log In</a>
<br />
<br />

<script type="text/javascript">
$("a[class*='custom-button']").each(function(){
  var t=$(this);
  var icon_class = t.attr('class');
  var icon = icon_class.replace('custom-button-','');
  // alert(icon);
  // apply .button() to all of them
  t.button({
    icons: {
      // get the icon dynamically from the class name:
      // strip off "custom-button-" and the rest is the icon name
      primary: icon
    }
  });
  if ( t.text() == "" ){
     t.css("height", "25px");
     t.css("width", "25px");
  }
});
</script> 
```

# java - 在java中序列化可变对象

> ID：10299628
> 
> 赞同：1
> 
> 时间：2012-04-24T14:06:03.647
> 
> 标签：java, serialization

我正在编写一个基于网络回合的 java 游戏，并在每次玩家移动时使用 java 序列化 api 序列化游戏状态。

令我烦恼的是，我发现 api 假定对象是不可变的。这意味着每次我尝试发送更新的游戏状态时，客户端都会收到旧的游戏状态。

有没有办法让 objectoutput/objectinputstream 忘记已经发送了一个对象并每次都创建一个新对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T14:12:00.690

ObjectOutputStream.reset() 是您正在寻找的内容：[Oracle 文档](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectOutputStream.html#reset%28%29)。它强制流发送更新的对象。

# c# - 如何使用模拟匿名类型的设置？

> ID：10299629
> 
> 赞同：4
> 
> 时间：2012-04-24T14:06:06.117
> 
> 标签：c#, moq

我有以下存储库：

```
interface IReportingRepository where T: Report
{
     IEnumerable<T> GetReports<T>(object constraints);
} 
```

我试图模拟对这个存储库的调用：

```
var reportingRepostory = new Mock<IReportingRepository>();
                       reportingRepostory.Setup(x => 
                       x.GetReports<ServiceReport (Moq.It.IsAny<object>())).
                       Returns(new List<ServiceReport>(){Report1, Report2}); 
```

然而，而不是通过

```
Moq.It.IsAny<object>() 
```

我想传递匿名类型

```
new {Activated = true, Enabled = true} 
```

这样我就可以设置我的期望，即使用正确的匿名类型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T14:29:44.067

您可以在一些反射帮助下使用自定义匹配器：

```
var reportingRepostory = new Mock<IReportingRepository>();
reportingRepostory
    .Setup(x => x.GetReports<ServiceReport>(HasProperties()))
    .Returns(new List<ServiceReport>(){Report1, Report2}); 
```

where`HasProperties`方法实现如下：

```
private object HasProperties()
{
    return Match.Create(
        (object o)  =>
        {
            var properties = o.GetType().GetProperties();
            return properties.Any(p => p.Name == "Available")
                && properties.Any(p => p.Name == "Enabled");
        });
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-24T09:03:17.503

原始解决方案无法解决的一些实现错误：

```
new {Activated = true, Enabled = false}
new {Activated = true, Enabled = true, Extra = "I'm not meant to be here!"}
new {Activated = true, Enabled = "true"} 
```

根据您的 IReportingRepository GetReports 方法实现的复杂性，可能值得考虑验证匿名类型的属性值和值类型是否符合预期，并且仅存在预期的属性。

```
var reportingRepostory = new Mock<IReportingRepository>();
reportingRepostory
    .Setup(x => x.GetReports<ServiceReport>(IsAnonymousType(new {Activated = true, Enabled = true})))
    .Returns(new List<ServiceReport>(){Report1, Report2}); 
```

IsAnonymousType 方法在哪里：

```
private static object IsAnonymousType(object expected)
{
    return Match.Create(
        (object actual) =>
        {
            if (expected == null)
            {
                if (actual == null)
                    return true;
                else
                    return false;
            }
            else if (actual == null)
                return false;

            var expectedPropertyNames = expected.GetType().GetProperties().Select(x => x.Name);
            var expectedPropertyValues = expected.GetType().GetProperties().Select(x => x.GetValue(expected, null));
            var actualPropertyNames = actual.GetType().GetProperties().Select(x => x.Name);
            var actualPropertyValues = actual.GetType().GetProperties().Select(x => x.GetValue(actual, null));

            return expectedPropertyNames.SequenceEqual(actualPropertyNames)
                && expectedPropertyValues.SequenceEqual(actualPropertyValues);
        });
} 
```

# php - 具有关联数组的 PHP foreach 函数的正确语法

> ID：10299631
> 
> 赞同：2
> 
> 时间：2012-04-24T14:06:21.243
> 
> 标签：php, arrays, foreach, associative-array

我在 PHP 中有以下名为 $ingredient_difference 的数组（下面的示例输出）：

```
Array (
  [total_remaining_ingredients] => Array (
    [0] => 2 [1] => 3 [2] => 10
  )
  [idrecipe] => Array (
    [0] => 8 [1] => 10 [2] => 9
  )
  [value] => Array ( [0] => 1 [1] => 1 [2] => 1 )
) 
```

我正在尝试使用“foreach”至少提取 idrecipe 的值，但我使用以下代码得到未定义的索引：

```
foreach($ingredient_difference as $recipe_output)
{
    echo $recipe_output['idrecipe']."<br />";
} 
```

我知道上面的方法并不完全正确，但这也不起作用（'idrecipe'、'value' 和 'total_remaining_ingredients' 的未定义索引错误）：

```
foreach($ingredient_difference as $c => $rowkey)
{
    $sorted_idrecipe[] = $rowkey['idrecipe'];
    $sorted_value[] = $rowkey['value'];
    $sorted_remaining_ingredients[] = $rowkey['total_remaining_ingredients']; 
} 
```

我的 foreach 语法中缺少什么？或者，还有更好的方法？

这个 foreach 构造也给出了未定义的索引错误：

```
foreach($ingredient_difference as $rowkey => $index_value)
{
    $id_value[$key] = $index_value['idrecipe'];
    $value_value[$key] = $index_value['value'];
    $tri_value[$key] = $index_value['total_remaining_ingredients'];
} 
```

感谢 ComFreek 的回答：

```
$result_ingredient_difference = array();
$count_id = count($ingredient_difference['idrecipe']);

for ($i=0; $i<$count_id; $i++)
{
  $result_ingredient_difference[] = array(
  'tri' => $ingredient_difference['total_remaining_ingredients'][$i],
  'idrecipe' => $ingredient_difference['idrecipe'][$i],
  'value' => $ingredient_difference['value'][$i]
  );
}
//rearranged array of $result_ingredient_difference able to call proper indexing with the below
foreach($result_ingredient_difference as $rowkey => $index_value) 
{ 
  $id_value[$key] = $index_value['idrecipe']; 
  $value_value[$key] = $index_value['value']; 
  $tri_value[$key] = $index_value['tri'];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T14:09:41.830

在您的第一个`foreach()`循环中，您遍历主数组而不是子数组的值`idrecipe`！

```
foreach($ingredient_difference['idrecipe'] as $value)
{
  echo $value;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T14:18:07.613

foreach 构造一个循环。在您的代码中

```
foreach($ingredient_difference as $recipe_output) {
echo $recipe_output['idrecipe']."<br />"; } 
```

在第一个循环运行中：$recipe_output 是 $ingredient_difference[total_remaining_ingredients] 在第二个循环运行中：$recipe_output 是 $ingredient_difference[idrecipe] 在第三个循环运行中：$recipe_output 是 $ingredient_difference[value]

因为没有

```
$ingredient_difference['total_remaining_ingredients']['idrecipe']
$ingredient_difference['idrecipe']['idrecipe']
$ingredient_difference['value']['idrecipe'] 
```

你得到错误。

要查看 foreach 循环如何工作，请使用[http://php.net/manual/de/control-structures.foreach.php上的示例](http://php.net/manual/de/control-structures.foreach.php)

我期望你想做的是：

```
foreach($ingredient_difference['idrecipe'] as $value_of_recipe)
{
    echo $value_of_recipe."<br />";
} 
```

# c++ - QTextDocument::drawContents 仅以 96 dpi 呈现

> ID：10299633
> 
> 赞同：10
> 
> 时间：2012-04-24T14:06:23.923
> 
> 标签：c++, qt, pdf, dpi, qtextdocument

我正在使用 QPrinter 和 QPainter 创建高分辨率 (1200 dpi) PDF 文档。我正在尝试使用 QTextDocument::drawContents 以相同的分辨率绘制文本。我想使用 QTextDocument 的原因是因为我需要在我的文档中包含许多表格和格式化文本。

我的问题是 QTextDocument::drawContents 总是以屏幕分辨率插入文本，在我的例子中是 96 dpi。到目前为止，我发现的所有解决方案都建议缩放文本以达到正确的大小。但是，这会导致文本质量低下，这是我无法承受的。

我的问题：有没有办法以高分辨率绘制 QTextDocument 的内容？

下面的代码创建了一个包含 2 行文本的 PDF 文件，其中一行使用 QPainter::drawText 绘制，另一行使用 QTextDocument::drawContents 绘制。我使用了 Arial 8pt 字体来强调缩放导致的低质量问题。

```
// Read the screen resolution for scaling
QPrinter screenPrinter(QPrinter::ScreenResolution);
int screenResolution = screenPrinter.resolution();

// Setup the font
QFont font;
font.setFamily("Arial");
font.setPointSize(8);

// Define locations to insert text
QPoint textLocation1(20,10);
QPoint textLocation2(20,20);

// Define printer properties
QPrinter printer(QPrinter::HighResolution); 
printer.setOrientation(QPrinter::Portrait);
printer.setPaperSize(QPrinter::A4);
printer.setResolution(1200);
printer.setOutputFormat(QPrinter::PdfFormat);
printer.setOutputFileName("test.pdf");    

// Write text using QPainter::drawText
QPainter painter;
painter.begin(&printer);
painter.setFont(font);
painter.drawText(textLocation1, "QPainter::drawText");

// Write text using QTextDocument::drawContents
QTextDocument doc;
doc.setPageSize(printer.pageRect().size());
QTextCursor cursor(&doc);
QTextCharFormat charFormat;
charFormat.setFont(font);
cursor.insertText("QTextDocument::drawContents", charFormat);
painter.save();
painter.translate(textLocation2);
painter.scale(printer.resolution()/screenResolution, printer.resolution()/screenResolution);
doc.drawContents(&painter);
painter.restore();
painter.end(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T23:00:48.183

使用`QTextDocument`自己的绘图设备进行布局，默认情况下为屏幕分辨率。
你可以改变它：

```
doc.documentLayout()->setPaintDevice(&printer);
// just before
doc.setPageSize(printer.pageRect().size()); 
```

# ios - Flex Mobile HTTPService 期间的“正在加载”图标

> ID：10299635
> 
> 赞同：0
> 
> 时间：2012-04-24T14:06:27.183
> 
> 标签：ios, apache-flex, mobile, loading, busyindicator

有没有办法在 Flex Mobile 中的 HTTPService 调用期间显示某种“加载”标志或图标？像常规 flex 中的 showBusyCursor 这样的东西？

谢谢，

亚伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T14:14:35.983

是的，请查看 BusyIndi​​cator 组件（移动设备独有）。

# objective-c - 迁移我的项目以使用核心数据

> ID：10299637
> 
> 赞同：-2
> 
> 时间：2012-04-24T14:06:35.780
> 
> 标签：objective-c, ios, core-data

我已经开发了一个 ios 应用程序（未完成），并且知道我想迁移我的项目以使用核心数据，这可能吗？如果是怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:29:37.610

如果不给出任何细节，很难具体回答。您需要做的是在您的解决方案中链接到 CoreData 框架的二进制文件。您需要决定要使用的存储（sqlite 等）。是否要持久化用户偏好的信息？是迷你数据库吗？是一个平面文件存储吗？归根结底，您需要根据您选择的后备存储类型进行一些阅读。

希望这有助于作为一个起点。

# java - Ant 抱怨“无法运行程序“cvs”

> ID：10299645
> 
> 赞同：1
> 
> 时间：2012-04-24T14:06:59.600
> 
> 标签：java, ant, cvs

简单的问题（至少这是我的希望）:)

我有一个简单的 ant scritp 可以从 cvs 中检出文件。只有当我在 Windows 路径 (PATH=c:\cvs) 上设置了 CVS_HOME 时它才有效，否则它会返回错误：

**错误**：
build.xml:60：java.io.IOException：无法运行程序“cvs”（在目录“C:\antTest\cntl”中）：CreateProcess error=2

*   第 60 行是我称之为任务的行。

**问题**：有没有办法让 cvs 任务找到 cvs 可执行文件而不在 Windows 路径中设置它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:08:31.383

并不真地。如果windows找不到它，Ant也找不到，除非你给它绝对路径。

# android - Android 应用程序：错误“找到文本”

> ID：10299646
> 
> 赞同：3
> 
> 时间：2012-04-24T14:07:07.563
> 
> 标签：android, xml, image

我一直在关注一本关于 Android “Beginning Android Application”的书。我一直在试图找出一个在视图中显示图像的应用程序。但不幸的是，由于以下错误，我无法运行该应用程序：

```
[2012-04-24 19:37:33 - Gallery] F:\eclipse workspace\Gallery\res\values 
\attrs.xml:2:error: Found text "
[2012-04-24 19:37:33 - Gallery] â€‹â€‹â€‹â€‹    " where item tag is expected 
```

为方便起见，我在这里给出代码。主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>
<TextView  
android:layout_width="fill_parent" 
android:layout_height="wrap_content" 
android:text="Bilai"
/>
<Gallery
android:id="@+id/gallery1"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
/>    
<ImageView
android:id="@+id/image1"
android:layout_width="320px"
android:layout_height="250px"
android:scaleType="fitXY"
/>  
</LinearLayout> 
```

此应用程序需要另一个 xml 文件。它在 res/values 下命名为 attrs.xml。attrs.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
​&lt;declare-styleable name="Gallery1" >
​​​​&lt;attr name="android:galleryItemBackground" />
​​​&lt;/declare-styleable>
</resources> 
```

我认为问题在于 attrs.xml，但我不知道发生了什么。因此，R.styleable 也不起作用。请帮忙。提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T14:38:39.107

由于复制/过去方法，我认为您的 attrs.xml 中的每一行之前都有一些字符。

您可以尝试通过将文本光标放在每行的开头并删除以返回上一行来重新格式化您的代码吗？

# eclipse - 如何在 BlackBerry - Java Plug-in for Eclipse 中设置不同的模拟器？

> ID：10299648
> 
> 赞同：2
> 
> 时间：2012-04-24T14:07:11.797
> 
> 标签：eclipse, blackberry, blackberry-simulator

我已经下载并安装了***BlackBerry-Java Plug-in for Eclipse***。当我尝试运行应用程序时，它正在启动默认模拟器（*BlackBerry Bold 9930 ）。*但我想用另一个模拟器（例如*BlackBerry Torch 9800*）运行该应用程序。

我应该如何切换到那个模拟器？是否需要任何配置更改或任何新安装？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T17:50:53.630

如果安装了所需的模拟器（例如 Torch 9800），则可以更改运行配置并将模拟器设为默认模拟器。以下步骤将展示如何更改运行配置。

*   在**运行**菜单上，单击**运行配置**。
*   创建新配置*（图 1）*。在**JRE**选项卡上，选择一个 JRE *（图 2）*。
*   在**Projects**选项卡中选择一个项目，然后应用更改。
*   在**Simulator**选项卡中选择一个模拟器*（图 3）*，然后应用更改。

> 但是如果您没有安装模拟器，请查看以下文章。
> 
> [指定安装在 Eclipse 环境之外的 BlackBerry Smartphone Simulator](http://docs.blackberry.com/en/developers/deliverables/12002/Specify_external_BB_Smrtphn_smltr_bundle_1017106_11.jsp)。

***更改运行配置：***

***图 1：创建新配置***

![创建新配置](../Images/17d6b94a27c6a34aaf7a9e50271ef17a.png)

***图 2：选择 JRE***

![选择 JRE](../Images/aa0cc146eb8e32e593bb68a39dd9e4d7.png)

***图 3：选择模拟器***

![选择模拟器](../Images/a8249e11334547958be29cb05465160c.png)

# java - HTMLCLEANER 处理西班牙语字符

> ID：10299651
> 
> 赞同：4
> 
> 时间：2012-04-24T14:07:17.620
> 
> 标签：java, html, htmlcleaner

我正在使用 HtmlCleaner 库来解析/转换 Java 中的 HTML 文件。

似乎无法处理像“ÁáÉéÍíÑñÓóÚúÜü”这样的西班牙语字符

我可以在 HtmlCleaner 中设置任何属性来处理这个或任何其他解决方案吗？这是我用来调用它的代码：

```
CleanerProperties props = new CleanerProperties();
props.setRecognizeUnicodeChars(true);
java.io.File file = new java.io.File("C:\\example.html");
TagNode tagNode = new HtmlCleaner(props).clean(file); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T15:00:27.933

除非指定，否则 HtmlCleaner 使用从 JVM 读取的默认字符集。在 Windows 上，这将是 Cp1512 而不是 UTF-8，这可能是它出错的地方。

你可以

*   `-Dfile.encoding=UTF-8`在您的 JVM 起始行上指定
*   使用`HtmlCleaner.clean()`接受字符集的重载

    ```
    TagNode tagNode = new HtmlCleaner(props).clean(file, "UTF-8"); 
    ```

    （如果您在项目中有 Google Guava，您可以将`Charsets.UTF_8`其用于常量）

*   使用`HtmlCleaner.clean()`接受您已经使用正确字符集构建的 InputStreamReader 的重载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:47:28.613

您可以更改`UTF-8`为`UTF-16`.

它将支持最大字符数。

# internet-explorer - 强制IE 9的浏览器模式和文档模式为IE 9

> ID：10299653
> 
> 赞同：6
> 
> 时间：2012-04-24T14:07:22.417
> 
> 标签：internet-explorer, internet-explorer-9

我需要将我的 IE 9 的浏览器模式和文档模式都强制为 IE 9。现在，我在标题的标签中将“X-UA-Compatible”设置为“IE=9”，但它没有效果当我将文档模式更改为 IE 7 / IE 8 时。

![强制IE 9的浏览器模式和文档模式为IE 9](../Images/058c7d1c7cd5918dd1ce558c5631c050.png)

我的网站只与 IE 9 兼容，而不与任何其他版本的 IE 兼容。此外，我查看并研究了此处和博客 (msdn) 回答的大多数问题，但似乎没有什么对我有用（在主持人将其作为重复问题关闭之前）。你们中的任何人都可以指导我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-01T13:24:03.787

如果您已经设置了 (X-UA..") 标签，那么这应该强制它进入适当的文档模式和浏览器模式。

看起来您正在 IE 开发工具控制台中设置文档模式，这会覆盖您作为标签输入的任何内容。

[此图说明了 IE 如何确定要显示的模式以及开发工具栏的优先级。](http://ieblog.members.winisp.net/misc/How%20IE9%20Determines%20Document%20Mode.svg)

编辑/更新

不幸的是，上面的链接似乎被删除了。[现在这里有一个替代方案](http://web.archive.org/web/20100924025133/http://ieblog.members.winisp.net/misc/How%20IE9%20Determines%20Document%20Mode.svg)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-24T14:17:42.313

好吧，请确保您放置的标签（“X-UA-...”）应该是文档标题中的第一个标签。其次，验证 html 在浏览器中呈现（通过查看源属性），还包含标题部分中的第一个标记（“X-UA-...”）。

# php - “启用自动完成的密码类型输入”一个 Acuext 审核警告，如何解决它

> ID：10299657
> 
> 赞同：0
> 
> 时间：2012-04-24T14:07:30.517
> 
> 标签：php, asp.net, iis

我们对我们的网站进行了 Acuext 审核，他们说“启用自动完成的密码类型输入”是一个信息性警告。

我们如何解决它，有必要吗？

我的网站在 IIS 7 上托管的 asp.net 2.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:12:39.927

确保 type="password" 和 autocomplete="off"

# wpf - 是否可以全局检测键盘焦点事件？

> ID：10299659
> 
> 赞同：14
> 
> 时间：2012-04-24T14:07:35.670
> 
> 标签：wpf

可以使用以下事件，但是必须为每个元素附加它们：

GotKeyboardFocus, LostKeyboardFocus

.NET WPF 中是否有办法全局检测焦点元素是否更改？无需为所有可能的元素添加事件监听器？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-21T21:36:04.757

您可以在任何课程中这样做：

```
//In the constructor
EventManager.RegisterClassHandler(
        typeof(UIElement),
        Keyboard.PreviewGotKeyboardFocusEvent,
        (KeyboardFocusChangedEventHandler)OnPreviewGotKeyboardFocus); 
```

...

```
private void OnPreviewGotKeyboardFocus(object sender, 
                                       KeyboardFocusChangedEventArgs e)
{

     // Your code here

} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-24T14:35:37.700

您可以挂钩到[隧道](http://msdn.microsoft.com/en-us/library/ms742806.aspx#routing_strategies)预览事件：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Height="350" Width="525" 
    PreviewGotKeyboardFocus="Window_PreviewGotKeyboardFocus" 
    PreviewLostKeyboardFocus="Window_PreviewLostKeyboardFocus">
.... 
```

这样，如上所示，当任何后代获得或失去键盘焦点时，将在所有后代之前通知窗口。

阅读[此](http://msdn.microsoft.com/en-us/library/ms742806.aspx)内容以获取更多信息。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-24T14:32:52.380

您可以将路由事件处理程序添加到主窗口并指定您对处理的事件感兴趣。

```
mainWindow.AddHandler(
    UIElement.GotKeyboardFocusEvent,
    OnElementGotKeyboardFocus,
    true
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-01T15:11:42.273

看看微软`CommandManager.RequerySuggested`在焦点改变时如何触发事件：他们订阅[`InputManager.PostProcessInput`](https://msdn.microsoft.com/library/system.windows.input.inputmanager.postprocessinput.aspx)事件。

[参考来源](http://referencesource.microsoft.com/#PresentationCore/Core/CSharp/System/Windows/Input/Command/CommandDevice.cs,e56c8b8276e9745a)

简单的例子：

```
static KeyboardControl()
{
    InputManager.Current.PostProcessInput += InputManager_PostProcessInput;
}

static void InputManager_PostProcessInput(object sender, ProcessInputEventArgs e)
{
    if (e.StagingItem.Input.RoutedEvent == Keyboard.GotKeyboardFocusEvent ||
        e.StagingItem.Input.RoutedEvent == Keyboard.LostKeyboardFocusEvent)
    {
        KeyboardFocusChangedEventArgs focusArgs = (KeyboardFocusChangedEventArgs)e.StagingItem.Input;
        KeyboardControl.IsOpen = focusArgs.NewFocus is TextBoxBase;
    }
} 
```

这也适用于多窗口应用程序。

# java - DateTime 解析器的格式错误

> ID：10299660
> 
> 赞同：2
> 
> 时间：2012-04-24T14:07:37.493
> 
> 标签：java

我有这个方法：

```
public Date parseDate(String dateStr) {
      try {
        SimpleDateFormat sdfSource = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.S z");
        return sdfSource.parse(dateStr);
      }
      catch(Exception e) {
        throw new RuntimeException("Error occurred while parsing date: " + dateStr);
      }
    } 
```

我的单元测试如下：

```
public void testEDTDate() throws Exception {
      DateFormatConverter converter = new DateFormatConverter();
      Date date = converter.parseDate("2009-09-15 15:28:20.0 EDT");   
      System.out.println("Converted Date: " + date.toString());
  } 
```

输出是：

```
Wed Sep 16 02:28:20 ICT 2009 
```

这导致单元测试失败。预期结果是：

```
Tue Sep 15 15:28:20.0 EDT 2009 
```

缺少第二个时，输出格式也错误。我应该如何修复以按预期显示日期？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T14:13:16.120

当您`date`使用给定格式解析时，您不能期望`date.toString()`返回相同的格式 - 它们是不相关的。

您需要使用[`DateFormat#format(Date)`](http://docs.oracle.com/javase/6/docs/api/java/text/DateFormat.html#format%28java.util.Date%29)才能获得`String`给定格式的 a，否则您将获得系统/实现默认值的任何内容。

# jquery - 使用 jQuery 最接近或下一个切换选择列表？

> ID：10299661
> 
> 赞同：0
> 
> 时间：2012-04-24T14:07:39.757
> 
> 标签：jquery, css

有 3 个选择框，如下所示。我希望能够使用 jQuery 切换来显示选择列表项并隐藏选择列表项。是否可以使用 jQuery.closest() 或 jQuery.next()？

```
<dt><a href="#"><span>A - All</span></a></dt>            

        <dd>
        <ul>                          
            <li><a href="#">A<img class="flag"/><span class="value">A</span></a></li>
            <li><a href="#">B<img class="flag"/><span class="value">B</span></a></li>
            <li><a href="#">C<img class="flag"/><span class="value">C</span></a></li>
        </ul>                                                        
        </dd>

    </dl>

    <dt><a href="#"><span>A1 - All</span></a></dt>            

            <dd>
            <ul>                          
                <li><a href="#">A1<img class="flag"/><span class="value">A1</span></a></li>
                <li><a href="#">B1<img class="flag"/><span class="value">B1</span></a></li>
                <li><a href="#">C1<img class="flag"/><span class="value">C1</span></a></li>
            </ul>                                                        
            </dd>

    </dl>

        <dt><a href="#"><span>A2 - All</span></a></dt>            

                <dd>
                <ul>                          
                    <li><a href="#">A2<img class="flag"/><span class="value">A2</span></a></li>
                    <li><a href="#">B2<img class="flag"/><span class="value">B2</span></a></li>
                    <li><a href="#">C2<img class="flag"/><span class="value">C2</span></a></li>
                </ul>                                                        
                </dd>

    </dl> 
```

注意：可以通过添加特定于每个锚标记和以下 ul 标记的类来完成，但这将是更多代码。我希望能够用更少的代码保持简单！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:22:43.557

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#menu > dd').hide();
            $('#menu dt').click(function () {
                var objNext = $(this).next('dd');
                if (objNext.is(':visible') === true) {
                    objNext.slideUp();
                }
                else {
                    $('#menu > dd').slideUp(); //( when A is clicked A,B,c show . now B is clicked now A1,B1,C1 show and hide A,B,C, ) else ( comment this line alone ).
                    objNext.slideDown();
                }
            });
        });
    </script>
</head>
<body>
    <dl id="menu">
        <dt><a href="#"><span>A - All</span></a></dt>
        <dd>
            <ul>
                <li><a href="#">A<img class="flag" /><span class="value">A</span></a></li>
                <li><a href="#">B<img class="flag" /><span class="value">B</span></a></li>
                <li><a href="#">C<img class="flag" /><span class="value">C</span></a></li>
            </ul>
        </dd>
        <dt><a href="#"><span>A1 - All</span></a> </dt>
        <dd>
            <ul>
                <li><a href="#">A1<img class="flag" /><span class="value">A1</span></a></li>
                <li><a href="#">B1<img class="flag" /><span class="value">B1</span></a></li>
                <li><a href="#">C1<img class="flag" /><span class="value">C1</span></a></li>
            </ul>
        </dd>
        <dt><a href="#"><span>A2 - All</span></a> </dt>
        <dd>
            <ul>
                <li><a href="#">A2<img class="flag" /><span class="value">A2</span></a></li>
                <li><a href="#">B2<img class="flag" /><span class="value">B2</span></a></li>
                <li><a href="#">C2<img class="flag" /><span class="value">C2</span></a></li>
            </ul>
        </dd>
    </dl>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:33:01.977

`</dl>`将您的 HTML（您似乎在列表本身中有很多标签，并且在任何地方都没有开始标签）整理`<dl>`为以下内容：

```
<dl>
    <dt><a href="#"><span>A - All</span></a></dt>
    <dd>
        <ul>
            <li><a href="#">A<img class="flag"/><span class="value">A</span></a></li>
            <li><a href="#">B<img class="flag"/><span class="value">B</span></a></li>
            <li><a href="#">C<img class="flag"/><span class="value">C</span></a></li>
        </ul>
    </dd>
    <dt><a href="#"><span>A1 - All</span></a></dt>
    <dd>
        <ul>
            <li><a href="#">A1<img class="flag"/><span class="value">A1</span></a></li>
            <li><a href="#">B1<img class="flag"/><span class="value">B1</span></a></li>
            <li><a href="#">C1<img class="flag"/><span class="value">C1</span></a></li>
        </ul>
    </dd>
    <dt><a href="#"><span>A2 - All</span></a></dt>
    <dd>
        <ul>
            <li><a href="#">A2<img class="flag"/><span class="value">A2</span></a></li>
            <li><a href="#">B2<img class="flag"/><span class="value">B2</span></a></li>
            <li><a href="#">C2<img class="flag"/><span class="value">C2</span></a></li>
        </ul>
    </dd>
</dl>​ 
```

以下 jQuery 似乎可以按照您的意愿进行操作：

$('dd').hide();

```
$('dt').click(
    function() {
        var that = $(this),
            affect = $(this).nextUntil('dt'),
            v = affect.is(':visible');

        that.closest('dl').find('dd').slideUp(1000);

        if (v == false){
            affect.slideDown(1000);
        }
        else if (v == true) {
            affect.slideUp(1000);
        }
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/CZqCt/)。

参考：

*   [`click()`](http://api.jquery.com/click/).
*   [`closest()`](http://api.jquery.com/closest/).
*   [`find()`](http://api.jquery.com/find/).
*   [`hide()`](http://api.jquery.com/hide/).
*   [`is()`](http://api.jquery.com/is/).
*   [`nextUntil()`](http://api.jquery.com/nextUntil/).
*   [`slideDown()`](http://api.jquery.com/slideDown/).
*   [`slideUp()`](http://api.jquery.com/slideUp/).
*   [`:visible`选择器](http://api.jquery.com/visible-selector/)。

# paypal - PayPal PDT 返回链接缺少交易 ID

> ID：10299669
> 
> 赞同：2
> 
> 时间：2012-04-24T14:08:14.077
> 
> 标签：paypal, paypal-sandbox

我在我的 PayPal 帐户上启用了 PayPal PDT（支付数据传输），并打开了自动退货，指向我网站上的“Complete_Paypal_Order”页面。

当客户进行购买并使用 PayPal 的网站付款时，他们会被发送到一个页面，该页面将在 10 秒内将他们重定向回我的网站。如果客户等待重定向，则对我的站点的 GET 请求包含交易 ID，正如它应该包含的那样。

但是，如果客户单击 PayPal 重定向页面上的“如果您在 10 秒内没有被重定向，请单击此处”的链接，则交易 ID**不会**传递到我的网站。取而代之的是，无论客户订购了什么，get 请求都类似于：“ [http://.../Complete_Paypal_Order?merchant_return_link=click+here&form_charset=UTF-8 ”。](http://.../Complete_Paypal_Order?merchant_return_link=click+here&form_charset=UTF-8)这在沙盒和实时 PayPal 网站中都会发生。

以前有没有人遇到过这个问题，如果有，你知道解决方案吗？

另外，为了清楚起见，我知道 PDT 的一些缺点，但我只想说，由于各种原因，此时更改为 IPN 或 API 调用不是该站点的选项。因此，请不要建议“只使用 IPN”或“只使用 ExpressCheckout API 调用”。

相关问题（尚未回答）：

*   [Paypal PDT - 无法获取交易 ID](https://stackoverflow.com/questions/10060062/paypal-pdt-unable-to-get-transaction-id)。
*   [Paypal PDT 自动退货](https://stackoverflow.com/questions/9908267/paypal-pdt-autoreturn)

# php - 在使用 PHP 正则表达式的字符串后查找以下 x 次出现？

> ID：10299674
> 
> 赞同：1
> 
> 时间：2012-04-24T14:08:28.343
> 
> 标签：php, regex

我想 preg_match名称 =“groups”的 p 标签**后面的所有 div id。**如何在 PHP 中编写此表达式？（html 格式不正确，所以我不能使用 XPath ...）

```
<p name="groups">
  <div id="55">fifty-five</div>
  <div id="65">sixty-five</div>
  <div id="75">seventy-five</div>
</p> 
```

理想的输出是这样的：

```
 array
    55
    65
    75

  array
    fifty-five
    sixty-five
    seventy-five 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:15:31.937

虽然使用正则表达式来*解析*html 通常并不好，但使用它来*匹配*某些 html 以完成有限的工作就可以了。

这是正则表达式：

```
<p name="groups">(\s*<div id="([0-9]+)">([a-z\-]+)</div>)+\s*</p> 
```

# python - 如何将长度为 n 的元组解包到 m 在 Python 3 中，我可以执行以下操作（另请参阅PEP3132 on Extended Iterable Unpacking）： a, *b = (1, 2, 3) # a = 1; b = (2, 3) 问问题 问问题 2012-04-24T14:08:41.567 40739 次 This question shows research effort; it is useful and clear 51 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 在 Python 3 中，我可以执行以下操作（另请参阅PEP3132 on Extended Iterable Unpacking）： a, *b = (1, 2, 3) # a = 1; b = (2, 3) 我该怎么做才能在 Python 2.x 中实现同样的优雅？ 我知道我可以使用单元素访问和切片操作，但我想知道是否有更Pythonic的方式。到目前为止我的代码： a, b = (1, 2, 3)[0], (1, 2, 3)[1:] # a = 1; b = (2, 3) 我可能错了，但据我所知 a, *b = (1, 2, 3) 只是用于切片和索引元组的语法糖。我觉得它很有用，但不是很明确。 pythoniterable-unpacking 4 5 回答 5 This answer is useful 33 我发现相关的PEP3132 也提供了一些 Python 2.x 的示例： 许多算法需要将序列拆分为“第一个，其余”对： first, rest = seq[0], seq[1:] [...] 此外，如果右边的值不是一个列表，而是一个可迭代的，则必须先将其转换为列表，然后才能进行切片；为了避免创建这个临时列表，必须求助于 it = iter(seq) first = it.next() rest = list(it) 这个问题的答案中给出的其他方法： 函数参数列表解包方法 需要额外的函数定义/调用： def unpack(first, *rest): return first, rest first, rest = unpack( *seq ) 我想知道为什么它是在解包函数参数列表中实现的，而不是在正常的元组解包中实现的。 生成器方法 学分。还需要自定义函数实现。关于第一个变量的数量更灵活一些。 def unpack_nfirst(seq, nfirst): it = iter(seq) for x in xrange(nfirst): yield next(it, None) yield tuple(it) first, rest = unpack_nfirst(seq, 1) 我猜最pythonic可能是上面PEP中提到的那些？ 于 2012-04-24T14:48:16.913 回答 This answer is useful 19 我可能错了，但据我所知 a, *b = (1, 2, 3) 只是用于切片和索引元组的语法糖。我觉得它很有用，但不是很明确。 于 2012-04-24T14:17:38.927 回答 This answer is useful 8 我有这个方便的小功能： def just(n, seq): it = iter(seq) for _ in range(n - 1): yield next(it, None) yield tuple(it) 例如： a, b, c = just(3, range(5)) print a, b, c ## 0 1 (2, 3, 4) 也适用于更少的参数： a, b, c = just(3, ['X', 'Y']) print a, b, c ## X Y () 作为对评论的回应，您还可以定义： def take2(a, *rest): return a, rest def take3(a, b, *rest): return a, b, rest def take4(a, b, c, *rest): return a, b, rest ... etc 并像这样使用它： p = (1,2,3) a, b = take2(*p) print a, b ## 1 (2, 3) 于 2012-04-24T14:31:06.173 回答 This answer is useful 4 我认为没有比您发布的更好的方法了，但这里有一种替代方法iter >>> x = (1,2,3) >>> i = iter(x) >>> a,b = next(i), tuple(i) >>> a 1 >>> b (2, 3) 于 2012-04-24T14:24:18.257 回答 This answer is useful 2 不确定上下文，但是 .pop(0) 呢？ 我看到你的例子中有元组，但如果你想做你所做的那种事情，我认为列表会更合适？（除非有充分的理由让它们在问题中不可变。） b = [1,2,3] a = b.pop(0) 于 2012-04-24T14:24:18.330 回答 Related 1 ibm-mobilefirst - IBM Worklight invokeCastIron 无法连接到 Cast Iron Live 实例 1 installation - 如何控制 cmake 的安装路径部分 1 c# - 无法从特定路径运行 WCF 默认类库项目 3 c# - 如何用这种方法计算几本书的接近度？ 1 java - 如何动态地将单选按钮添加到活动？ 2 python - Python while/try/if 循环 2 regex - SED - 替换字符串中间第一次出现的数字 3 excel - 在 Excel 2010 中计算百分位数 0 wordpress - 使用 WPML 和 Simplepress 1 c# - 如何使用多种通用匹配方法获取 MethodInfo Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10299682
> 
> 赞同：51
> 
> 时间：
> 
> 标签：python, iterable-unpacking

在 Python 3 中，我可以执行以下操作（另请参阅[PEP3132](http://www.python.org/dev/peps/pep-3132/) on Extended Iterable Unpacking）：

```
a, *b = (1, 2, 3)
# a = 1; b = (2, 3) 
```

我该怎么做才能在 Python 2.x 中实现同样的优雅？

* * *

我知道我可以使用单元素访问和切片操作，但我想知道是否有更*Pythonic*的方式。到目前为止我的代码：

```
a, b = (1, 2, 3)[0], (1, 2, 3)[1:]
# a = 1; b = (2, 3) 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-24T14:48:16.913

我发现相关的[PEP3132 也](http://www.python.org/dev/peps/pep-3132/)提供了一些 Python 2.x 的示例：

> 许多算法需要将序列拆分为“第一个，其余”对：
> 
> ```
> first, rest = seq[0], seq[1:] 
> ```
> 
> [...]
> 
> 此外，如果右边的值不是一个列表，而是一个可迭代的，则必须先将其转换为列表，然后才能进行切片；为了避免创建这个临时列表，必须求助于
> 
> ```
> it = iter(seq)
> first = it.next()
> rest = list(it) 
> ```

* * *

这个问题的答案中给出的其他方法：

**函数参数列表解包方法**

需要额外的函数定义/调用：

```
def unpack(first, *rest): 
  return first, rest
first, rest = unpack( *seq ) 
```

我想知道为什么它是在解包函数参数列表中实现的，而不是在正常的元组解包中实现的。

**生成器方法**

[学分](https://stackoverflow.com/a/10300081/1025391)。还需要自定义函数实现。关于*第一个*变量的数量更灵活一些。

```
def unpack_nfirst(seq, nfirst):
  it = iter(seq)
  for x in xrange(nfirst):
    yield next(it, None)
  yield tuple(it)
first, rest = unpack_nfirst(seq, 1) 
```

* * *

我猜最pythonic可能是上面PEP中提到的那些？

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-04-24T14:17:38.927

我可能错了，但据我所知

```
a, *b = (1, 2, 3) 
```

只是用于切片和索引元组的语法糖。我觉得它很有用，但不是很明确。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-24T14:31:06.173

我有这个方便的小功能：

```
def just(n, seq):
    it = iter(seq)
    for _ in range(n - 1):
        yield next(it, None)
    yield tuple(it) 
```

例如：

```
a, b, c = just(3, range(5))
print a, b, c
## 0 1 (2, 3, 4) 
```

也适用于更少的参数：

```
a, b, c = just(3, ['X', 'Y'])
print a, b, c
## X Y () 
```

作为对评论的回应，您还可以定义：

```
def take2(a, *rest): return a, rest
def take3(a, b, *rest): return a, b, rest
def take4(a, b, c, *rest): return a, b, rest
... etc 
```

并像这样使用它：

```
p = (1,2,3)
a, b = take2(*p)
print a, b
## 1 (2, 3) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-24T14:24:18.257

我认为没有比您发布的更好的方法了，但这里有一种替代方法`iter`

```
>>> x = (1,2,3)
>>> i = iter(x)
>>> a,b = next(i), tuple(i)
>>> a
1
>>> b
(2, 3) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-24T14:24:18.330

不确定上下文，但是 .pop(0) 呢？

我看到你的例子中有元组，但如果你想做你所做的那种事情，我认为列表会更合适？（除非有充分的理由让它们在问题中不可变。）

```
b = [1,2,3]
a = b.pop(0) 
```

# java - 在 Java 中使用正则表达式进行网页抓取

> ID：10299693
> 
> 赞同：1
> 
> 时间：2012-04-24T14:09:31.693
> 
> 标签：java, regex, screen-scraping, web-crawler

我正在尝试编写一个爬虫来从使用 Java 中的正则表达式的站点获取菜单项。网站网址是 [http://www.dineombaygarden.com/appetizers.html](http://www.dinebombaygarden.com/appetizers.html)

如何使用 Pattern and Matcher 获取菜单项（蔬菜 Pakpora、洋葱或菠菜或土豆 Pakora ...）？

我的代码如下，但效果不佳。

```
public ArrayList<String> getMenuItems(String menuURL, String menuRegex) throws IOException{
    ArrayList<String> items = new ArrayList<String>();
    Document doc = Jsoup.connect(menuURL).post();
    String text = doc.body().text();
    System.out.println(text);
    Pattern pattern = Pattern.compile(menuRegex);
    Matcher matcher = pattern.matcher(text);
    while(matcher.find()){
        items.add(matcher.group());
    }
    return items;
}

String menuURL = "http://www.dinebombaygarden.com/appetizers.html";
String menuRegex = "[A-Z][a-z]+.{10,50}[$]\\s[\\d.]+.95"; 
```

这里的 menuRegex 不能正常工作。任何人都可以帮助解决这个问题？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:15:38.200

您的正则表达式存在一些问题：

1.  `[A-Z][a-z]+`仅适用于`+`,`[a-z]`并且不会正确处理空格（即，它只会匹配`Pakora`）`Vegetable Pakora`。
2.  您需要在 中转义`.`，`.{10,50}`否则它会匹配任何字符而不是句点：`\.{10,50}`.

这是一个正确匹配的正则表达式，并捕获食物的名称以及捕获组中的价格：

```
\<h3\>([^.]+)\.{10,50}[$]\s([\d.]+.95) 
```

它的工作原理是找到`<h3>`标签，然后捕获第一个句点之前的所有文本作为食物的名称。其余的与您的原始正则表达式相同，除了我添加了围绕价格的捕获。

演示：[http ://www.rubular.com/r/I7Hyk4cAI0](http://www.rubular.com/r/I7Hyk4cAI0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:41:05.007

试试[http://jsoup.org](http://jsoup.org)

```
Document doc = Jsoup.connect("http://www.dinebombaygarden.com/appetizers.html").get();
Elements newsHeadlines = doc.select("div.left-data h3"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T14:47:54.933

不是最好的正则表达式，但这可以完成工作

```
String menuRegex = "['A-Za-z\\s]+\\.{10,50}[$][\\s]*[0-9]*\\.?[0-9]+"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T14:25:09.873

您可以使用[Selenium](http://seleniumhq.org/)的 Java API与网页进行交互。

例如：

```
WebDriver driver = new FirefoxDriver();
driver.get("http://www.dinebombaygarden.com/appetizers.html");
List<WebElement> menuElements = driver.findElements(By.cssSelector("#content-center .left-data > h3"));
// now iterate through the elements and get the contents with .getText() 
```

另外，我是[Abmash](https://github.com/alp82/abmash)的开发者，它也可能是一个替代方案。它允许您以更直观的方式完成相同的工作，而无需对源代码一无所知。例子：

```
Browser browser = new Browser("http://www.dinebombaygarden.com/appetizers.html");
HtmlElements menuElements = browser.query(headline(), below(headline("appetizers"))).find();
// now iterate through the elements and get the contents with .getText() 
```

有关硒的更多信息：http: [//seleniumhq.org/](http://seleniumhq.org/)

有关 Abmash 的更多信息：[https ://github.com/alp82/abmash](https://github.com/alp82/abmash)

# jquery - 通过 .NET Ajax 调用加载 HighCharts

> ID：10299695
> 
> 赞同：1
> 
> 时间：2012-04-24T14:09:40.120
> 
> 标签：jquery, asp.net, asp.net-ajax, highcharts

我正在尝试通过 .Net Ajax 调用加载 jQuery Highcharts 图表，但运气不佳。

我可以按如下方式填充图表并且它的显示没有问题：

```
function LoadTopActionsChartComplete() {
            var chart1;
            $g(function () {
                chart1 = new Highcharts.Chart({
                 chart: {
                           renderTo: 'divTopActionChart',
                           type: 'bar',
                           backgroundColor:'rgba(255, 255, 255, 0.1)'
                  },
                  title: {
                           text: 'Top Performing Actions'
                  },
                   credits: {
                             enabled: false
                   },
                  xAxis: {
                           categories:["1","2","3","4","5"]
                  },
                  yAxis: {
                            title: {
                            text: ''
                            }
                 },
                  series:[
                            {name: 'Link1',data:[703]},
                            {name: 'Link2',data:[661]},
                            {name: 'Link3',data:[649]},
                            {name: 'Link4',data:[615]},
                            {name: 'Link5',data:[611]}
                         ]
              });

            });

        }

</script>
</head>

<script type="text/javascript">
    window.onload = LoadTopActionsChartComplete();
</script> 
```

为了在 Ajax 调用上加载它，我实现了以下内容：

```
 $g(function PageLoad() {     
        LoadTopActionsChart();
    });

function LoadTopActionsChart() 
    {
        CampaignResultsNew.LoadTopActionsChart(LoadTopActionsChart_Callback);

    }

    function LoadTopActionsChart_Callback(response) {
        alert(response.value);
        LoadTopActionsChartComplete(response.value)
    }

    function LoadTopActionsChartComplete(chartScript) {
            var chart1;
            $g(function () {
                chart1 = chartScript;
            });

        } 
```

函数“LoadTopActionsChartComplete”正在成功接收以下代码，但这不允许在页面上呈现任何内容。

```
new Highcharts.Chart({
                 chart: {
                           renderTo: 'divTopActionChart',
                           type: 'bar',
                           backgroundColor:'rgba(255, 255, 255, 0.1)'
                  },
                  title: {
                           text: 'Top Performing Actions'
                  },
                   credits: {
                             enabled: false
                   },
                  xAxis: {
                           categories:["1","2","3","4","5"]
                  },
                  yAxis: {
                            title: {
                            text: ''
                            }
                 },
                  series:[
                            {name: 'Link1',data:[703]},
                            {name: 'Link2',data:[661]},
                            {name: 'Link3',data:[649]},
                            {name: 'Link4',data:[615]},
                            {name: 'Link5',data:[611]}
                         ]
              }); 
```

如果有人能指出我哪里出错了，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T23:30:47.757

使用显示图表选项的 url，您可以使用[$.getJSON()](http://api.jquery.com/jQuery.getJSON/)执行此操作：

```
$(function () {

  $.getJSON("url/of/webservice/that/returns/chartoptions", function(chartOptions){  

    var chart = new Highcharts.Chart(chartOptions);

  });

})(); 
```

您可以将 .net JSON 库（如[JSON.NET）](http://json.codeplex.com/)用于您的 Web 服务。

此外，您可能还想了解[$(document).ready()](http://api.jquery.com/ready/)。

# ios - 自定义导航控制器和导航栏？

> ID：10299697
> 
> 赞同：1
> 
> 时间：2012-04-24T14:09:45.050
> 
> 标签：ios

我很清楚如何实现我自己的导航栏绘图。我想要激活的是类似于 Jetsetter iPhone 应用程序的东西。在视图控制器之间交换时，它有一个非常漂亮的动画（以类似的方式，您可以在 UINavigationController 堆栈中推送/弹出视图控制器）。

这需要完全重写 UINavigationController 还是我可以以某种方式覆盖一些重要部分？

我现在很乐意提供任何信息。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:18:47.330

在某些视图上，他们不使用导航栏，他们只是创建一个简单的视图并添加用于弹出和推送的按钮，但在某些视图上，他们更改导航栏背景并用自己的方式初始化后退按钮和前进按钮项目和标题视图，然后将手势识别器添加到这些，非常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T02:41:12.690

在我看来，他们隐藏了导航栏并滚动了自己的视图。
请检查此[链接](http://eddev.tumblr.com/post/27771453668/hide-navigation-bar-and-programatically-call-back)。

# spring - 为 Spring 中创建的 Active Mq 代理配置 https 时出现问题

> ID：10299704
> 
> 赞同：1
> 
> 时间：2012-04-24T14:10:08.960
> 
> 标签：spring, ssl, activemq

**编辑**

通过一些实验，我注意到如果我将连接器更改为：

`<amq:transportConnector name="ssl" uri="ssl://localhost:61617"/>`

一切正常，所以我相信这个问题与我在使用 https 连接器时需要某种额外的配置有关。不幸的是，可用的信息包括[http://activemq.apache.org/http-and-https-transports-reference.html](http://activemq.apache.org/http-and-https-transports-reference.html)和[http://docs.codehaus.org/display/JETTY/How%20to%20configure%20SSL](http://docs.codehaus.org/display/JETTY/How%20to%20configure%20SSL)。也许我错过了一个额外的步骤？

我已按照以下说明操作： http: [//activemq.apache.org/how-do-i-use-ssl.html](http://activemq.apache.org/how-do-i-use-ssl.html)

我创建了一个证书，如下所示：

```
sudo keytool -keystore broker.ks -alias jetty -genkey -keyalg RSA 
```

然后，我将 broker.ks 文件放在 Eclipse 中我的项目的类路径中。然后我有以下弹簧配置：

```
<beans 
xmlns="http://www.springframework.org/schema/beans" 
xmlns:amq="http://activemq.apache.org/schema/core"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
http://activemq.apache.org/schema/core http://activemq.apache.org/schema/core/activemq-core.xsd">

<amq:broker useJmx="false" persistent="false">
    <amq:persistenceAdapter>
            <amq:kahaDB />  
    </amq:persistenceAdapter>

    <!-- Configure ssl -->
    <amq:sslContext>
      <amq:sslContext keyStore="broker.ks" keyStorePassword="password"/>
    </amq:sslContext>

    <!-- Only allow connection through http -->
    <amq:transportConnectors>
            <amq:transportConnector name="https" uri="https://localhost:443"/>
    </amq:transportConnectors>

</amq:broker> 
```

我的密钥库肯定在类路径上，并且密码肯定是我的密码和密钥的“密码”。但是，在运行应用程序时，系统会提示我：

```
org.eclipse.jetty.ssl.password 
```

然后我输入“密码”，然后我会提示：

```
org.eclipse.jetty.ssl.keypassword 
```

我再次输入“密码”并接收：

```
WARN : org.eclipse.jetty.util.log - FAILED SslSocketConnector@localhost:443: java.net.BindException: Permission denied
WARN : org.eclipse.jetty.util.log - FAILED org.eclipse.jetty.server.Server@225f1ae9: java.net.BindException: Permission denied
ERROR: org.apache.activemq.broker.BrokerService - Failed to start ActiveMQ JMS Message Broker. Reason: java.net.BindException: Permission denied
java.net.BindException: Permission denied
at java.net.PlainSocketImpl.socketBind(Native Method)
at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:383)
at java.net.ServerSocket.bind(ServerSocket.java:328)
at java.net.ServerSocket.<init>(ServerSocket.java:194)
at javax.net.ssl.SSLServerSocket.<init>(SSLServerSocket.java:106)
at com.sun.net.ssl.internal.ssl.SSLServerSocketImpl.<init>(SSLServerSocketImpl.java:108)
at com.sun.net.ssl.internal.ssl.SSLServerSocketFactoryImpl.createServerSocket(SSLServerSocketFactoryImpl.java:72)
at org.eclipse.jetty.server.ssl.SslSocketConnector.newServerSocket(SslSocketConnector.java:378)
at org.eclipse.jetty.server.bio.SocketConnector.open(SocketConnector.java:75)
at org.eclipse.jetty.server.AbstractConnector.doStart(AbstractConnector.java:358)
at org.eclipse.jetty.server.bio.SocketConnector.doStart(SocketConnector.java:146)
at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:55)
at org.eclipse.jetty.server.Server.doStart(Server.java:253)
at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:55)
at org.apache.activemq.transport.http.HttpTransportServer.doStart(HttpTransportServer.java:119)
at org.apache.activemq.transport.https.HttpsTransportServer.doStart(HttpsTransportServer.java:66)
at org.apache.activemq.util.ServiceSupport.start(ServiceSupport.java:53)
at org.apache.activemq.broker.TransportConnector.start(TransportConnector.java:246)
at org.apache.activemq.broker.BrokerService.startTransportConnector(BrokerService.java:2162)
at org.apache.activemq.broker.BrokerService.startAllConnectors(BrokerService.java:2073)
at org.apache.activemq.broker.BrokerService.start(BrokerService.java:519)
at org.apache.activemq.xbean.XBeanBrokerService.afterPropertiesSet(XBeanBrokerService.java:60)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1536)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1409)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:574)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
at org.apache.xbean.spring.context.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:161)
at org.apache.xbean.spring.context.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:51)
at com.bbconnecttxt.activeMq.Broker.main(Broker.java:7) 
```

据我所知，根本不应该提示我输入密码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T17:04:39.027

某些操作系统需要超级用户 (root) 权限才能将连接绑定到*特权*端口（低于 1024 的端口）。

以下消息基本上报告您正在尝试绑定到端口 443（这是一个特权端口），并且操作系统不允许您这样做：

```
WARN : org.eclipse.jetty.util.log - FAILED SslSocketConnector@localhost:443: java.net.BindException: Permission denied 
```

尝试将 ActiveMQ 服务器的 HTTPS 配置为使用高于 1024 的端口进行 HTTPS，例如 8443。一般情况下，可以在 root 用户下运行 ActiveMQ（不推荐），或者使用类似[authbind](http://en.wikipedia.org/wiki/Authbind)的工具，但重新配置端口应该是最容易改变的。

# gnu-make - GNU make 依赖问题

> ID：10299709
> 
> 赞同：0
> 
> 时间：2012-04-24T14:10:23.280
> 
> 标签：gnu-make

为简单起见，假设我有以下文件夹：

*   `./src/`有许多 .c 文件
*   `./obj/`有许多 .obj 文件
*   `./output/`使用我想要构建的二进制文件

我的makefile如下：

```
all: init mybin

# init commands
init:
    mkdir obj
    mkdir output

mybin:  project1 project2 project3
    $(CC) src/misc.c ... etc
    $(LK) obj/first.obj obj/second.obj obj/third.obj obj/four.obj obj/five.obj obj/six.obj obj/seven.obj obj/eight.obj obj/nine.obj -o output/myapp.bin

project1: obj/first.obj obj/second.obj obj/third.obj

obj/first.obj: src/first.c
    $(CC) first.c ... etc

obj/second.obj: src/second.c
    $(CC) obj/second.c ... etc

obj/third.obj: src/third.c
    $(CC) obj/third.c ... etc

project2:   obj/four.obj obj/five.obj obj/six.obj

obj/four.obj: src/four.c
    $(CC) four.c ... etc

obj/five.obj: src/five.c
    $(CC) obj/five.c ... etc

obj/six.obj: src/six.c
    $(CC) obj/six.c ... etc

project3:   obj/seven.obj obj/eight.obj obj/nine.obj

obj/seven.obj: src/seven.c
    $(CC) seven.c ... etc

obj/eight.obj: src/eight.c
    $(CC) obj/eight.c ... etc

obj/nine.obj: src/nine.c
    $(CC) obj/nine.c ... etc 
```

我第一次跑`make all`，所有编译的东西都找到了。然后我做了：

```
$ touch src/four.c
$ make all
$ 
```

但是`make` 没有编译任何东西就退出了。我猜它没有检测到其中一个 .c 文件已更改，但是我看不出我的依赖项有什么问题。

我所期望的：
`touch`ing`src/four.c`应该标记为`obj/four.obj`过时的，`project2`因此也标记为`mybin`过时的。这个链应该会触发一个新的`src/four.c`to编译，`obj/four.obj`然后是整个项目的一个新的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:28:35.690

您是否指定了编译的输出文件（可能是`-o`选项）？默认情况下（对于大多数工具链），编译`.c`文件会生成一个`.o`文件，而不是一个文件`.obj`。

## UPD。

要在某些先决条件更改时获取 Make 更新目标，您必须提供**文件之间的****确切**依赖关系，就 Make 使用时间戳来确定文件是否已更改。

 **也就是说，`all`并且`init`可以保留为所谓的[`.PHONY`目标](http://www.gnu.org/software/make/manual/make.html#Phony-Targets)，但最好将其余目标设为文件。

```
OUT_DIR := ./output
SRC_DIR := ./src
OBJ_DIR := ./obj

MYBIN := $(OUT_DIR)/myapp.bin

OBJS := $(addprefix $(OBJ_DIR)/, \
    first.obj \
    second.obj \
    third.obj \
    four.obj \
    five.obj \
    six.obj \
    seven.obj \
    eight.obj \
    nine.obj)

.PHONY : all mkdir-output mkdir-obj
all : $(MYBIN)

mkdir-output :
    @mkdir -p $(OUT_DIR)

mkdir-obj :
    @mkdir -p $(OBJ_DIR)

$(MYBIN) : $(OBJS) | mkdir-output
    $(LK) $^ -o $@

$(OBJS) : | mkdir-out
$(OBJS) : $(OBJ_DIR)/%.obj : $(SRC_DIR)/%.c
    $(CC) $< -object=$@ $(CC_OPT) 
```

最后一条规则是 GNU Make 的[静态模式规则](http://www.gnu.org/software/make/manual/make.html#Static-Pattern)。`mkdir-xxx`管道符号后的先决条件`|`是[仅限订单](http://www.gnu.org/software/make/manual/make.html#Prerequisite-Types)的。**

# php - Joomla 1.5 中的 Echo Autor 姓名或作者 ID

> ID：10299710
> 
> 赞同：0
> 
> 时间：2012-04-24T14:10:24.100
> 
> 标签：php, echo, author

我需要使用 php 查询的 Joomla 1.5 文章中的作者姓名

```
<?php echo $author ?> 
```

例如这里是我的文字

> Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum

作者：`<?php echo $author_id or author_name ?>`

如何从 php 查询中获取作者姓名？这是最短的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:15:39.553

尝试 ：

```
$article =& JTable::getInstance('content');
$article->load(JRequest::getInt('id'));
$author = $article->created_by; 
```

# r - 在R中将文件列表从一个文件夹复制到另一个文件夹

> ID：10299712
> 
> 赞同：14
> 
> 时间：2012-04-24T14:10:34.920
> 
> 标签：r, copy-paste, directory

我正在尝试在 R 中批量移动不同类型的文件。

```
origindir <- c("c:/origindir")
targetdir <- c("c/targetdir")
filestocopy <- c("myfile.doc", "myfile.rda", "myfile.xls", 
                 "myfile.txt", "myfile.pdf", "myfile.R") 
```

我尝试了以下方法，但不知道如何处理所有文件：

```
file.copy(paste (origindir, "myfile.doc", sep = "/"), 
          paste (targetdir, "myfile.doc", sep = "/"), 
          overwrite = recursive, recursive = FALSE, 
          copy.mode = TRUE) 
```

我不知道该怎么做。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-24T15:26:55.440

正如 Joran 和 Chase 在评论中已经指出的那样，您需要做的就是：

```
file.copy(from=filestocopy, to=targetdir, 
          overwrite = recursive, recursive = FALSE, 
          copy.mode = TRUE) 
```

然后，如果您实际上是在*移动*文件，请使用以下命令删除原件：

```
file.remove(filestocopy) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T16:20:05.887

只是扩大蔡斯的建议。

```
lapply(filestocopy, function(x) file.copy(paste (origindir, x , sep = "/"),  
          paste (targetdir,x, sep = "/"), recursive = FALSE,  copy.mode = TRUE)) 
```

# android - 关于图像更改文本视图更新的画廊

> ID：10299713
> 
> 赞同：0
> 
> 时间：2012-04-24T14:10:37.607
> 
> 标签：android, galleryview

您好，我有一个画廊，里面有 2 张图片。每次我更改图像时，我都希望在我的布局中使用 textview 来更改其名称。在我的代码中，它只是第一次发生并且保持这种状态。

```
public class BrowseActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.browse_activity_layout);

    Gallery gallery = (Gallery) findViewById(R.id.browseActivityGallery);
    gallery.setAdapter(new ImageAdapter(this)); 
    gallery.setSpacing(0); 
}
public class ImageAdapter extends BaseAdapter {
    int mGalleryItemBackground;
    private Context mContext;

    private Integer[] mImageIds = {

            R.drawable.building_a,
            R.drawable.building_b,

    };

    public ImageAdapter(Context c) {
        mContext = c;
        TypedArray attr = mContext.obtainStyledAttributes(R.styleable.browseActivityGalleryStylable);
        attr.recycle();
    }

    public int getCount() {

        return mImageIds.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        TextView browseActivityTitleTextView = (TextView)findViewById(R.id.browseActivityTitleTextView);

            if(position == 0){
                browseActivityTitleTextView.setText(" Α'");
            }
            if(position == 1){
                browseActivityTitleTextView.setText("  Β'");
            }           

        ImageView imageView = new ImageView(mContext);
        imageView.setImageResource(mImageIds[position]);
        imageView.setScaleType(ImageView.ScaleType.FIT_XY);  
        return imageView;
    }
}
} 
```

当我滑动图库时，它应该变为 B'，但是当我向后滑动时，它保持 B' 任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:20:37.620

而不是从 BaseAdapter 更改文本，您应该将侦听器添加到库并以这种方式进行更改。您还应该在 onCreate 方法中找到对 textview 的引用。

```
private TextView browseActivityTitleTextView;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.browse_activity_layout);

browseActivityTitleTextView = (TextView)findViewById(R.id.browseActivityTitleTextView);

Gallery gallery = (Gallery) findViewById(R.id.browseActivityGallery);
gallery.setAdapter(new ImageAdapter(this)); 
gallery.setSpacing(0); 

gallery.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int position, long arg3) {              

            switch(position){
            case 0:
                browseActivityTitleTextView.setText(" Α'");
                break;
            case 1:
                browseActivityTitleTextView.setText(" B'");
                break;
            }
        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {}
    });

} 
```

# performance - 如何提高电子商务网站的搜索性能？

> ID：10299715
> 
> 赞同：2
> 
> 时间：2012-04-24T14:10:55.300
> 
> 标签：performance, asp.net-mvc-3, search, e-commerce, binary-search

我有一个基于 ASP.net MVC3 的电子商务网站。它有appx。200k 产品。我们目前正在产品表中搜索，以提供现场搜索。

问题是它非常慢，当然，通过分析分析器的性能，我们发现主要问题是 sql 搜索。

还有哪些其他替代方法可用于加快搜索速度？我们是否需要为搜索构建单独的缓存或需要做其他任何事情？

如果您查看其他大型电子商务网站，例如 ebay、amazon 或 Flipkart，它们的速度非常快。他们是怎么做到的呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T15:11:05.233

[他们通常使用例如Lucene.NET](http://incubator.apache.org/lucene.net/)或[Solr](http://lucene.apache.org/solr/)（使用 Java，但可以使用[SolrNet](http://nuget.org/packages/SolrNet/0.3.1)通过 .NET 调用它的实例）来构建可搜索内容的全文索引。

该索引是从您的 SQL 数据库构建的，您执行的任何搜索都需要通过向它发送查询来使用该索引，就像在 SQL 数据库上一样，但当然使用不同的语法。需要定期更新/重新创建索引以与 SQL 数据库保持同步。

这样的文本索引是为查询大量字符串数据而构建的，并且可以轻松处理您网站上的产品搜索功能中的数十万种产品。除了速度之外，如果没有文本索引，还有其他一些好处很难实现，例如拼写更正和模糊搜索。

# c - 汇编语言协处理器

> ID：10299717
> 
> 赞同：-2
> 
> 时间：2012-04-24T14:11:13.780
> 
> 标签：c, assembly, trigonometry, processor

想象一下，您有一台计算机，计算机 B，它只有一个切线函数，并且只能在 0 到 45 度之间的角度的切线上返回准确的结果。给定一个大于 45 度且小于 90 度的角度 ø，可以执行哪些数学运算来返回准确的正切值？还提供一个详细的例子。

我需要一些帮助。这个棕褐色问题与协处理器和 FPTAN 指令有关。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T14:21:23.557

这看起来像家庭作业，因此提示：给定一个直角三角形，如果一个角度大于 45 度，则另一个角度小于 45 度。此外

```
 cos(PHI) = sin(THETA)
    sin(PHI) = cos(THETA) 
```

如果`PHI`和`THETA`是三角形中的角。我相信这应该会让你继续前进。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T14:31:48.033

使用事实`1/TAN(θ)=COT(θ)=TAN(π/2-θ)`。

# python - 添加到列表时对日期列表进行排序的最快方法

> ID：10299720
> 
> 赞同：2
> 
> 时间：2012-04-24T14:11:29.460
> 
> 标签：python, list, datetime, sorting

我正在写一些类似于任务调度程序的东西。我有两组任务，有些是固定的（给定开始和结束日期和时间），有些不是固定的（给定开始日期和时间以及持续时间）。

非固定任务受到固定任务的影响，因此如果非固定任务被固定任务重叠，则非固定任务将其持续时间延长重叠量。

我从一个元组列表开始，其中第一项是开始日期，第二项是该固定任务的 ID，如下所示：

```
[(2012-04-30, 1), (2012-05-01, 5), (2012-05-04, 2)] 
```

然后，我有另一个由用户订购的非固定任务列表。我的想法是我将遍历这个列表，在那个循环内我将遍历第一个列表以找到可能与此任务重叠的任务，并且可以确定哪些任务可以扩展非固定任务.

这是我请求你帮助的地方。现在我知道了这个非固定任务的计算开始和结束时间，我需要将其视为“固定”，以便它影响其余的非固定任务。

我可以将此任务添加到固定任务的第一个列表中并再次对其进行排序，但这意味着我每次添加任务时都会对列表进行排序。

我可以遍历第一个列表并找到应该插入此任务的点，然后将其插入那里。但是，如果它的位置在列表的前面，则需要花费时间将所有其他项目移到一个位置。如果它的位置在列表的后面，我将不得不遍历很多元素才能到达正确的位置。

所以，我不赞成使用这些选项中的任何一个。这里真正的问题是：在向列表添加内容的同时保持列表排序的最佳方法是什么？或者有没有更好的方法来做这一切？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T15:33:53.633

Here is the example of using bisect and comparison with using the sort of the partially sorted list. The bisect solution clearly wins:

```
import bisect
import random
import timeit

def bisect_solution(size=10000):
    lst = []
    for n in xrange(size):
        value = random.randint(1, 1000000)
        bisect.insort_left(lst, value)
    return lst

# Cut out of the bisect module to be used in bisect_solution2()
def insort_left(a, x, lo=0, hi=None):
    """Insert item x in list a, and keep it sorted assuming a is sorted.

    If x is already in a, insert it to the left of the leftmost x.

    Optional args lo (default 0) and hi (default len(a)) bound the
    slice of a to be searched.
    """

    if lo < 0:
        raise ValueError('lo must be non-negative')
    if hi is None:
        hi = len(a)
    while lo < hi:
        mid = (lo+hi)//2
        if a[mid] < x: lo = mid+1
        else: hi = mid
    a.insert(lo, x)

def bisect_solution2(size=10000):
    lst = []
    for n in xrange(size):
        value = random.randint(1, 1000000)
        insort_left(lst, value)
    return lst

def sort_solution(size=10000):
    lst = []
    for n in xrange(size):
        value = random.randint(1, 1000000)
        lst.append(value)
        lst.sort()
    return lst

t = timeit.timeit('bisect_solution()', 'from __main__ import bisect_solution', number = 10)
print "bisect_solution: ", t

t = timeit.timeit('bisect_solution2()', 'from __main__ import bisect_solution2', number = 10)
print "bisect_solution2: ", t

t = timeit.timeit('sort_solution()', 'from __main__ import sort_solution', number = 10)
print "sort_solution: ", t 
```

The bisect_solution2() is almost the same as bisect_solution() -- only with the code copied-out of the module. Someone else should explain why it takes more time :)

The bisect_solution2() is here to be modified for cmp() function to be able to compare the tuples.

It shows the following results on my computer:

```
bisect_solution:  0.637892403587
bisect_solution2:  0.988893038133
sort_solution:  15.3521410901 
```

Here is a bisect solution adopted for the tuples where date is a string:

```
import random
import timeit

def random_date_tuple():
    s1 = '{0}-{1:02}-{2:02}'.format(random.randint(2000, 2050),
                                    random.randint(1, 12),
                                    random.randint(1, 31))
    e2 = random.randint(1,50)
    return (s1, e2)

def my_cmp(a, b):
    result = cmp(a[0], b[0])   # comparing the date part of the tuple
    if result == 0:
        return cmp(a[1], b[1]) # comparint the other part of the tuple
    return result

def my_insort_left(a, x, cmp=my_cmp, lo=0, hi=None):
    """The bisect.insort_left() modified for comparison of tuples."""

    if lo < 0:
        raise ValueError('lo must be non-negative')
    if hi is None:
        hi = len(a)
    while lo < hi:
        mid = (lo+hi)//2
        if cmp(a[mid], x) < 0: 
            lo = mid+1
        else: 
            hi = mid
    a.insert(lo, x)

def bisect_solution3(size=1000):
    lst = []
    for n in xrange(size):
        value = random_date_tuple()
        my_insort_left(lst, value)
    return lst

def sort_solution(size=1000):
    lst = []
    for n in xrange(size):
        value = random_date_tuple()
        lst.append(value)
        lst.sort(cmp=my_cmp)
    return lst

t = timeit.timeit('bisect_solution3()', 'from __main__ import bisect_solution3', number = 10)
print "bisect_solution3: ", t

t = timeit.timeit('sort_solution()', 'from __main__ import sort_solution', number = 10)
print "sort_solution: ", t

print bisect_solution3()[:10] 
```

Notice that the list size is 10 times less than in the previous as the sort solution was very slow. It prints:

```
bisect_solution3:  0.223602245968
sort_solution:  3.69388944301
[('2000-02-01', 20), ('2000-02-13', 48), ('2000-03-11', 25), ('2000-03-13', 43),
 ('2000-03-26', 48), ('2000-05-04', 17), ('2000-06-06', 23), ('2000-06-12', 31),
 ('2000-06-15', 15), ('2000-07-07', 50)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T14:31:29.923

> 我可以遍历第一个列表并找到应该插入此任务的点，然后将其插入那里。但是，如果它的位置在列表的前面，则需要花费时间将所有其他项目移到一个位置。如果它的位置在列表的后面，我将不得不遍历很多元素才能到达正确的位置。

[可以使用二分搜索](http://docs.python.org/library/bisect.html)在 O(log n) 中找到将某些内容插入排序列表的正确位置。插入仍然是 O(n)。

还有更复杂的数据结构，如[B-Trees](http://en.wikipedia.org/wiki/B-tree)，允许在 O(log n) 中插入和搜索。看看[这个](https://stackoverflow.com/questions/3909602/is-there-a-b-tree-database-or-framework-in-python)和[这个](http://pypi.python.org/pypi/blist)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T14:19:53.300

> 这里真正的问题是：在向列表添加内容的同时保持列表排序的最佳方法是什么？

[插入排序](http://en.wikipedia.org/wiki/Insertion_sort)是要走的路。但你可能不喜欢它，因为你已经知道了。接下来你可以做的就是这个，

1.  添加时不要排序。
2.  当您获得项目时对其进行排序并缓存它。下次请求时从以前的缓存中显示。
3.  添加任何新项目时使缓存无效。

我不是 python 程序员，但我可以通过 PHP 类给你一些想法。

```
class SortedList(){
    public $list = array();
    private $cached_list;

    public function add($item){
        array_push($this->list, $item);
        $this->sorted = false;
    }
    public function get(){
        if($this->sorted==true){
            return $this->cached_list;
        }

        // sort the array;

        // copying the list to cached list and sort it
        $this->cached_list = $this->list;
        sort($this->cached_list);

        // set the flag
        $this->sorted = true;
        return $this->cached_list
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T14:28:40.683

堆[队列](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)是你的朋友。来自维基百科：

堆通常执行的操作是：

*   **create-heap** : 创建一个空堆
*   **find-max**：找到最大堆的最大项
*   **delete-max**：删除最大堆的根节点
*   **增加键**：更新最大堆中的键
*   **insert**：向堆中添加一个新键
*   **合并**：连接两个堆以形成一个有效的新堆，其中包含两者的所有元素。

有一个内置的[Python 堆队列](http://docs.python.org/library/heapq.html)实现。堆针对 1) 删除最大元素，2) 插入新元素以保持堆排序进行了优化。

# jquery - iframe 加载功能在 .append 上启动

> ID：10299729
> 
> 赞同：0
> 
> 时间：2012-04-24T14:12:03.927
> 
> 标签：jquery, iframe, load, append

说我有这个代码：

```
var jqiFrame = $('<iframe name="jqiframe" id="jqiframe" src="about:blank"></iframe>');
$('body').append(jqiFrame);
jqiFrame.load(function() {
    // Some code
}); 
```

我怎样才能使 .load 函数仅在 iFrame 实际加载时才启动，而不是在它被附加到主体空时启动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:18:36.013

您最初无法设置 src 属性，但稍后再设置。

```
var jqiFrame = $('<iframe name="jqiframe" id="jqiframe"></iframe>');
$('body').append(jqiFrame);
jqiFrame.load(function() {
    // Some code
}); 
```

您也可以在追加之前移动您的负载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:24:36.440

您还可以在准备就绪时显示它（否则隐藏）：

CSS：

```
iframe{
    display:none;
}​ 
```

脚本：

```
var jqiFrame = $('<iframe name="jqiframe" id="jqiframe" src="http://www.stackoverflow.com"></iframe>');
$('body').append(jqiFrame);

jqiFrame.load(function() {
    alert("loaded");
    $("iframe").css("display","block");
});​ 
```

# ipython - 如何将图像文件上传到 ipython 笔记本以进行进一步的图像处理

> ID：10299760
> 
> 赞同：1
> 
> 时间：2012-04-24T14:13:49.990
> 
> 标签：ipython

我不想使用生成的图和图表，而是想使用现有图片对它们进行图像处理。在[`sage`](http://www.sagemath.org/)一篇中写道：

```
from pylab import imread
image = imread(DATA+"image.png") 
```

[官方帮助介绍](http://ipython.org/ipython-doc/dev/interactive/htmlnotebook.html)对此任务/用例/问题保持沉默。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T14:14:12.347

在谷歌搜索并尝试了 30 分钟后，我发现这实际上很简单。

笔记本对启动它的文件夹具有文件访问权限。因此，如果在自己的`home`文件夹中启动它，则可以直接访问该文件`home`夹中的所有文件。

```
from pylab import imread
image = imread("image.png") 
```

# c# - select语句后图片出现模糊

> ID：10299767
> 
> 赞同：2
> 
> 时间：2012-04-24T14:14:11.100
> 
> 标签：c#

```
//-------------SELECT STATEMENT---------
 private void comboBoxLogin_SelectedIndexChanged(object sender, EventArgs e)
        {
            if (comboBoxLogin.SelectedIndex.ToString() != string.Empty)
                splitContainer1.Panel2.Enabled = true;
            if (comboBoxLogin.SelectedItem.ToString() == "Create New User")
                groupBoxNewUser.Visible = true;
            else groupBoxNewUser.Visible = false;
            if(comboBoxLogin.SelectedItem.ToString()!="Create New User"){

                string DBConnection = @"Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Timesheet.mdf;Integrated Security=True;User Instance=True";
               sqlConnection = new SqlConnection(DBConnection);

                try {
                    sqlConnection.Open();
                    SqlCommand sqlCommand = sqlConnection.CreateCommand();
                    sqlCommand.CommandType = System.Data.CommandType.Text;
                    sqlCommand.CommandText = "SELECT firstname, lastname, NDFuserID, picture FROM UserRegistration WHERE NDFuserID='" +comboBoxLogin.SelectedItem  + "'";
                    SqlDataReader sqlDataReader = sqlCommand.ExecuteReader();

                    if(sqlDataReader.Read())
                    {
                        labelUserDetails.Text = sqlDataReader["firstname"].ToString() + " " + sqlDataReader["lastname"].ToString();
                        byte[] pictureByteReader = (byte[])sqlDataReader["picture"];
                        MemoryStream ms = new MemoryStream(pictureByteReader);
                        Image picture = Image.FromStream(ms);
                        pictureBoxUserDetails.Image = picture;
                    }

                    comboBoxItems.Refresh();
                }
                catch(Exception ex){
                    MessageBox.Show(ex.ToString());
                }
                finally{
                sqlConnection.Close();
                }
            }
        }
//--------------------INSERT STATEMENT-------------------------

private void btnCreateNewUser_Click(object sender, EventArgs e)
        {
            string DBConnection = @"Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Timesheet.mdf;Integrated Security=True;User Instance=True";
            sqlConnection = new SqlConnection(DBConnection);

            try
            {
                //--Insert statement for a picture-----------------------
                FileInfo fileImage = new FileInfo(txtPictureURL.Text);
                var fileLength = fileImage.Length;
                byte[] picutreByte = new byte[Convert.ToInt32(fileLength)];
                FileStream fileStreams = new FileStream(txtPictureURL.Text, FileMode.Open, FileAccess.Read, FileShare.Read);
                int readByte = fileStreams.Read(picutreByte, 0, Convert.ToInt32(fileLength));
                fileStreams.Close();

                sqlConnection.Open();
                SqlCommand sqlCommand = sqlConnection.CreateCommand();
                sqlCommand.CommandType = System.Data.CommandType.Text;
                sqlCommand.CommandText = "INSERT INTO UserRegistration(firstname, lastname, NDFuserID, phone, picture) VALUES(@firstname, @lastname, @NDFuserID, @phone, @picture)";

                sqlCommand.Parameters.Add("@firstname", SqlDbType.NVarChar, 50);
                sqlCommand.Parameters.Add("@lastname", SqlDbType.NVarChar, 50);
                sqlCommand.Parameters.Add("@NDFuserID", SqlDbType.NChar, 10);
                sqlCommand.Parameters.Add("@phone", SqlDbType.NVarChar);
                sqlCommand.Parameters.Add("@picture", SqlDbType.Image);

                sqlCommand.Parameters["@firstname"].Value = txtFirstName.Text;
                sqlCommand.Parameters["@lastname"].Value = txtLastname.Text;
                sqlCommand.Parameters["@NDFuserID"].Value = "NDF-" +txtUserID.Text;
                sqlCommand.Parameters["@phone"].Value = maskedtxtPhone.Text;
                sqlCommand.Parameters["@picture"].Value = picutreByte;
                sqlCommand.ExecuteNonQuery();
            }

            catch (Exception ex)
            {
                MessageBox.Show(ex.ToString());
            }
            finally
            {
                sqlConnection.Close();
                txtFirstName.Text = "";
                txtLastname.Text = "";
                txtPictureURL.Text = "";
                txtUserID.Text = "";
                maskedtxtPhone.Text = "";
            }
        } 
```

我不知道这其中有什么问题。插入语句或选择语句。当我插入它时没有给出任何异常，但是当我尝试选择它时显示异常并且图片在图片框中显得模糊。我做错了什么？请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-31T02:51:42.603

虽然有更简单的方法可以完成您的某些步骤，例如
`byte[] PictureBytes = File.ReadAllBytes(txtPictureURL.Text);`
还应注意@Khan 的评论。

您的任何一种方法似乎都不会导致复制品质量下降。我怀疑 PictureBox 属性可能会缩放或拉伸图像。

要解决该问题，请将 PictureBox.SizeMode 属性更改为 AutoSize。
如果图像大于 PictureBox，那么您可以像这个答案一样实现滚动条： [https ://stackoverflow.com/a/4710193/2549384](https://stackoverflow.com/a/4710193/2549384)

# security - 如何创建限时哈希/密钥？

> ID：10299771
> 
> 赞同：3
> 
> 时间：2012-04-24T14:14:18.557
> 
> 标签：security, hash, cryptography

我正在尝试创建一个限时密钥以在我的一个应用程序中使用。密钥用于解锁应用程序中的某些功能。

到目前为止我的想法是

生成：加密哈希我需要的各种信息+密钥生成日期

验证：加密散列我需要的各种信息+现在的日期

如果所有信息都相同并且日期相同，我会得到相同的值

但，

这意味着密钥仅在特定日期有效。我想要的是一个在接下来的 24 小时内有效的密钥（或延长这个，几天/周/月）。

我可以延长期限，但总是有可能在期限到期之前生成密钥，例如一个月的最后一天密钥。

首先，这是一种可以接受的方式吗？如果是这样，我该怎么做？

*我知道“倒计时”会破坏系统 - 但我仍然有兴趣获得一些意见*

*我已阅读[如何在不存储数据的情况下生成限时密钥或密码，](https://stackoverflow.com/questions/5526803/how-do-i-generate-a-time-limited-key-or-password-without-storing-data)这是一个类似的问题。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T16:51:07.080

您可以将到期日期作为令牌的一部分，并使用HMAC 之类的[MAC](http://en.wikipedia.org/wiki/Message_authentication_code)对整个数据进行身份验证：

```
token = data ":" expiration ":" HMAC(key, data ":" expiration) 
```

要验证令牌，您只需比较给定的*到期*数据并使用*密钥*重新生成所提供*数据*的 MAC 。

 *如果任何提供的参数被篡改，MAC 将不同，因为需要*密钥*来生成真实的 MAC。*

# javascript - 从python中的Javascript onclick函数下载文件

> ID：10299774
> 
> 赞同：0
> 
> 时间：2012-04-24T14:14:26.913
> 
> 标签：javascript, python, html

假设我在一个页面上有一个名为“点击下载”的锚标签，点击该标签会下载一个 csv 文件

HTML代码是

```
<span id="tag_id">
    <a class="classA" onclick="calling_an_excel_function()" href="#"> Click here to download all records.</a>
</span> 
```

实际上它是调用 Javascript Onclick 函数并生成一个 csv 文件，onclick 函数的代码是

```
function calling_an_excel_function() {
    var exampleA = document.getElementById('exampleA.value');
    var exampleB = document.getElementById('exampleB.value');
    var exampleC = document.getElementById('exampleC.value');
    var exampleD = document.getElementById('exampleD.value');
    window.open('indices_main_excel.aspx?ind=' + exampleA.value + '&fromDate=' + exampleB.value + '&toDate=' + examplec.value + '&DMY=' + exampleD.value, '_blank',
'toolbar=yes,location=no, directories=no, status=no, menubar=yes,scrollbars=yes, resizable=yes ,copyhistory=no, width=800, height=600');
} 
```

我可以预期在 onclick 函数中**window.open()**方法正在生成一个新文件，并给出了一些值。现在我无法从上面的 onclick 函数中获取**csv**文件下载**url**我可以知道如何获取 csv 文件下载链接吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:17:21.393

（只是猜测）

但你可能想要

```
document.getElementById('exampleA'); 
```

代替

```
document.getElementById('exampleA.value'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:19:38.620

您不需要使用 Window.open。将 href 更改为等于文件路径（是的，它来自您的服务器代码）或使用 window.location。确保您设置了 content-disposition 标头。

我不知道如何在 python 中设置标头，但您需要设置一个如下所示的标头：

内容处置：附件；文件名="文件名.csv"

# android - 从 android 应用程序打开一个 facebook 页面？

> ID：10299777
> 
> 赞同：4
> 
> 时间：2012-04-24T14:14:31.830
> 
> 标签：android, android-intent, facebook-android-sdk

如何启动在手机上打开 Facebook 应用程序并导航到 Facebook 中首选页面的意图？

我试过：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setClassName("com.facebook.katana", "com.facebook.katana.ProfileTabHostActivity");
intent.putExtra("extra_user_id", "123456789l");
this.startActivity(intent); 
```

好吧，无论我写什么“1234567891”，它总是导航到我的页面。总是对我而不是其他人。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-25T13:38:21.607

这是最好和最简单的方法。只需按照代码

```
public final void Facebook() {
        final String urlFb = "fb://page/"+yourpageid;
        Intent intent = new Intent(Intent.ACTION_VIEW);
        intent.setData(Uri.parse(urlFb));

        // If Facebook application is installed, use that else launch a browser
        final PackageManager packageManager = getPackageManager();
        List<ResolveInfo> list =
            packageManager.queryIntentActivities(intent,
            PackageManager.MATCH_DEFAULT_ONLY);
        if (list.size() == 0) {
            final String urlBrowser = "https://www.facebook.com/pages/"+pageid;
            intent.setData(Uri.parse(urlBrowser));
        }

        startActivity(intent);
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-28T16:59:07.867

我遇到了完全相同的问题，发送了用户 ID，但由于某种原因，我的个人资料总是打开而不是朋友的个人资料。

问题是，如果您传递代表 Facebook UID`String`的`Long`对象，甚至是`long`原始类型，意图稍后将无法读取它。你需要通过一个真实的`Long`.

所以完整的代码是：

```
 Intent intent = new Intent(Intent.ACTION_VIEW);
    intent.setClassName("com.facebook.katana", "com.facebook.katana.ProfileTabHostActivity");
    Long uid = new Long("123456789");
    intent.putExtra("extra_user_id", uid);
    startActivity(intent); 
```

好的，享受并希望这会有所帮助:-)

格言

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-23T07:49:53.340

试试这个代码：

```
String facebookUrl = "https://www.facebook.com/<id_here>";
    try {
        int versionCode = getPackageManager().getPackageInfo("com.facebook.katana", 0).versionCode;
        if (versionCode >= 3002850) {
            Uri uri = Uri.parse("fb://facewebmodal/f?href=" + facebookUrl);
               startActivity(new Intent(Intent.ACTION_VIEW, uri));
        } else {
            Uri uri = Uri.parse("fb://page/<id_here>");
            startActivity(new Intent(Intent.ACTION_VIEW, uri));
        }
    } catch (PackageManager.NameNotFoundException e) {
        startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(facebookUrl)));
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T09:47:09.323

此解决方案将不再起作用。新版本的 facebook 应用程序不再支持这些意图。请参阅[此处](http://developers.facebook.com/bugs/286768364773190?browse=search_508cf5471018a7b63754513)的错误报告

新的解决方案是使用 iPhone 方案机制（是的，facebook 决定在 Android 中支持 iPhone 机制，而不是 Android 的隐式 Intent 机制）。

因此，要使用用户个人资料打开 facebook 应用程序，您需要做的就是：

```
String facebookScheme = "fb://profile/" + facebookId;
Intent facebookIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(facebookScheme)); 
startActivity(facebookIntent); 
```

如果您正在寻找其他操作，您可以使用[以下页面](http://wiki.akosma.com/IPhone_URL_Schemes)获取所有可用操作（/您必须对其进行测试，因为我没有找到关于此的 facebook 官方出版物）

# c++ - c++数组初始化，好习惯

> ID：10299782
> 
> 赞同：1
> 
> 时间：2012-04-24T14:14:45.057
> 
> 标签：c++, arrays

我想确定这没有错：我用初始化数组

```
 double* lower = input->getLowerBox(); 
```

其中函数 getLowerBox() 返回一些 double*。这是正确的吗？或者我应该这样初始化::

```
double* lower = new double[nbP];
for (int i=0;i<nbP;i++)
     lower[i]=input->getLowerBox()[i]; 
```

或避免多次调用 getLowerBox，

```
double* lower = new double[nbP];
double* tmp = input->getLowerBox();
for (int i=0;i<nbP;i++)
     lower[i]=tmp[i];
delete[] tmp; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T14:21:10.910

两步食谱：

1.  改变`Input::getLowerBox()`返回`std::vector<double> const&`
2.  如果要修改返回值，请使用副本，并`const`改为使用引用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:16:47.027

嗯，这取决于你想做什么。你是否需要一个新的数组。

您的第一个片段不会创建新数组，因此内存管理更为重要。

例如：

```
double* lower = input->getLowerBox();
delete[] lower; 
```

可能会导致`input->getLowerBox()`无效。或类似的东西：

```
double* lower = NULL;
{
   Class input;
   lower = input->getLowerBox();
}
//... 
```

如果清除析构函数中数组的内容，则会产生`lower`一个悬空指针。`input`

最后两个片段创建新数组。它更安全 IMO，但也使用额外的内存。

**两者都是正确的，这取决于您要做什么。无论您选择哪种方式，请务必完整记录。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T14:17:14.387

第一种方法很好。您将返回一个指向双精度的指针，我假设它与一个数组有关（如果不是，请纠正我）。通过这样做，您将指向该数组的第一个元素，然后您可以索引`lower`或使用指针算法来访问其他元素。

编辑：您能否发布定义，`getLowerBox()`以便更清楚您要做什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T14:34:45.160

你有能力改变`getLowerBox()`吗？如果是这样，我会改变它，让它返回一个向量。

根据实现，它可能会返回您可以拥有的指针或指向内部静态的指针（不好但可能），因此您需要知道它在做什么，并通过分别保留指针或获取数组的副本来采取相应的行动.

如果您无法控制`getLowerBox()`并且知道它返回的数组的大小，则将其复制到向量中是一个合理的想法

```
double* lower = input->getLowerBox(); 
vector<double> lowerV(lower, lower + N ); 
```

（`N`数组的大小在哪里 - 顺便说一句，这只是来自内存，我还没有编译它。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T14:46:44.657

出于多种原因，我肯定会选择第一个。它更干净，它避免了不必要的调用/变量创建等。如果您使用“->”，请确保输入是一个指针；否则使用“.”。

# jquery - 每行的 GridView 控件颜色

> ID：10299783
> 
> 赞同：0
> 
> 时间：2012-04-24T14:14:51.720
> 
> 标签：jquery, asp.net, gridview, textbox

我有另一个 jquery 问题/建议升级等。

我有一个 asp.net GridView，它包含几个用户可以编辑的字段。我在其中一个文本框字段上有一个 onchange() ，因此如果值大于 5 或​​其他值，颜色会发生变化。这工作正常。

现在在 document.ready 中，我需要将相同的 CSS 样式应用于已保存的字段。例如，我遇到的问题是，如果用户已保存数据并返回查看它，则 onchange() 颜色更改不再显示（显然）。

我从另一个链接收到以下代码：

```
 $('.myGridClass tr').each(function () {

            var number = $(this).children('td:eq(4)').text();
            var ugh = $(this).children('td:eq(4)').css();

            if (number == 0) {
                $(this).children('td').css('color', 'black');
            }
            else {
                $(this).children('td').css('color', 'red');
            }
        }) 
```

现在`var number = $(this).children('td:eq(4)').text();`工作正常，它从正确的列中获取正确的值等。但是颜色变化不能正常工作。它不会更改指定文本框的颜色值。

任何关于如何调整它的建议都会非常受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:39:44.463

您需要将文本转换为整数才能与数字匹配：

```
 $('.myGridClass tr').each(function () {

            var number = parseInt($(this).children('td:eq(4)').text());
            var ugh = $(this).children('td:eq(4)').css();

            if (number == 0) {
                $(this).children('td:eq(4)').css('color', 'black');
            }
            else {
                $(this).children('td:eq(4)').css('color', 'red');
            }
        }) 
```

# asp.net - 实体框架（加载嵌套实体）

> ID：10299784
> 
> 赞同：1
> 
> 时间：2012-04-24T14:14:55.220
> 
> 标签：asp.net, asp.net-mvc, entity-framework, entity-framework-4

这些是我的实体...

```
Public Class Account
    Public Property AccountId As Integer 
    Public Property AccountDescription As String 
    Public Property Transactions As List(Of Transaction) 
End Class

Public Class Transaction 
    Public Property TransactionId As Integer 
    Public Property AccountId As Integer 
    Public Property TransferAccountId As Integer
    Public Property TransactionDescription As String 
End Class 
```

我现在知道我可以做到这一点。db.Account.Include("Transactions").SingleOrDefault(Function(a) a.AccountId = myAccountId)

但是，这只包括显然具有 AccountId = myAccountId 的交易。但就我而言，我想要所有交易，包括那些涉及转移的交易。所以其中 AccountId = AccountId 或 TransferAccountId = myAccountId。我如何在一次调用中加载一个帐户及其交易和转账交易列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:39:52.103

使用您的模型，您不能直接这样做，因为您在课堂上只有一个`Transaction`属性。`Account`此属性将指向同时存在的帐户，`AccountId == Id`或`TransferAccountId == Id`从不指向两者。如果您想轻松加载这两种类型，您需要在您的帐户类型上使用两个导航属性 - 一个用于相关交易，一个用于转移交易，之后您只需将 Include 用于这两个属性：

```
db.Account.Include("Transactions")
          .Inclue("TransferTransactions")
          .SingleOrDefault(Function(a) a.AccountId = myAccountId) 
```

如果您不想添加第二个导航属性，您可以反向执行。查询交易和急切加载帐户。作为最后一种情况，您可以分别查询帐户和交易。

# javascript - 如何在javascript中获取对象的所有属性（包括继承一个）

> ID：10299786
> 
> 赞同：1
> 
> 时间：2012-04-24T14:15:04.703
> 
> 标签：javascript, firefox, inheritance, prototype

我已经弄清楚了这段代码

```
function getAllProperties(obj){
    var result={
        properties:[],
        methods:[]
    };
    var proto = obj;
    while(proto !== null){
        var props = Object.getOwnPropertyNames(proto);
        props.forEach(function(v){
            typeof proto[v] === "function" ? result.methods.push(v) : result.properties.push(v);
        });
        proto = Object.getPrototypeOf(proto);
    }
    return result;
} 
```

而我传入的参数是canvas上下文对象（通过canvas.getContext('2d')获取）。码字用Chrome就好了。但结果是 Firefox 得到 'Illegal operation on WrappedNative 原型对象' Error 。谁能告诉我它有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:24:23.043

当您编写 proto[v] 时，您实际上可能会在没有实际实例上下文的情况下调用属性访问器函数（例如，如果该属性已根据 HTML5 使用 get/set 定义）。这会导致错误。

尝试在`Object.getOwnPropertyDescriptor`不实际调用它的情况下访问该属性。结果可能具有在您访问字段时实际调用的 value 属性或 get/set 属性。

# events - 重写方法和订阅事件是一样的吗？

> ID：10299788
> 
> 赞同：0
> 
> 时间：2012-04-24T14:15:09.553
> 
> 标签：events, c#-4.0

```
class A
{
  public event EventHanler MyEvent;
  protected virtual void OnMyEvent(EventArgs e)
  {
    if (MyEvent!=null) 
        MyEvent(this, e);
  }

   public void DoEvent()
   {
    //................
      MyEvent(this, new EventArgs());
   }
}

class B: A
{
  private A a = new A();
  public B ()
  {
    a.MyEvent += MyMethod;
  }
  public void MyMethod(object sender, EventArgs e)
  {
       Console.WriteLine("Event handler");
  }
}

class C : A
{
  private A a = new A();

   protected override void OnMyEvent(EventArgs e)
   {
     base.OnMyEvent(e); 
     Console.WriteLine("OnMyEvent overriding");
  }
} 
```

我订阅了该事件并覆盖了类中的方法 OnMyEvent()`B`和`C`. 注意调用方法`base.OnMyEvent(e)`是在方法的开头`C.OnMyEvent(...)`。

就我而言，这里没有区别。换句话说，如果我`base.OnMyEvent(e)`在覆盖方法的开头调用，这意味着我只是订阅事件吗？

实际上没有区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T20:37:58.213

它们是有区别的：

*   调用`C.OnMyEvent()` **加注** `MyEvent`。（相反， raise`MyEvent`不会调用`C.OnMyEvent()`。）
*   `B.MyMethod` **把柄** `MyEvent`。因此， raise`MyEvent`将调用`B.MyMethod`. （相反，调用`B.MyMethod`不会引发`MyEvent`。）

# ruby-on-rails-3 - Rails 单元测试通过“ruby -Itest”工作，但通过“rake test:units”失败

> ID：10299789
> 
> 赞同：1
> 
> 时间：2012-04-24T14:15:16.463
> 
> 标签：ruby-on-rails-3, unit-testing

我有一个单元测试文件`test/unit/salon_test.rb`。当我运行`ruby -Itest test/unit/salon_test.rb`时，测试通过就好了。当我尝试这样做时`bundle exec rake test:units`，我收到一些错误，如下所示：

```
2) Error:
test_create_account(SalonTest):
NoMethodError: undefined method `params' for main:Object
    /Users/jason/Web/snip/rake/ruby/1.9.1/bundler/gems/authlogic-309187b26594/lib/authlogic/controller_adapters/abstract_adapter.rb:30:in `params'
    /Users/jason/Web/snip/rake/ruby/1.9.1/bundler/gems/authlogic-309187b26594/lib/authlogic/session/params.rb:96:in `params_credentials'
    /Users/jason/Web/snip/rake/ruby/1.9.1/bundler/gems/authlogic-309187b26594/lib/authlogic/session/params.rb:72:in `params_enabled?'
    /Users/jason/Web/snip/rake/ruby/1.9.1/bundler/gems/authlogic-309187b26594/lib/authlogic/session/params.rb:66:in `persist_by_params'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activesupport-3.2.1/lib/active_support/callbacks.rb:407:in `_run__2708293592470526601__persist__999583656123085136__callbacks'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activesupport-3.2.1/lib/active_support/callbacks.rb:405:in `__run_callback'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activesupport-3.2.1/lib/active_support/callbacks.rb:385:in `_run_persist_callbacks'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activesupport-3.2.1/lib/active_support/callbacks.rb:81:in `run_callbacks'
    /Users/jason/Web/snip/rake/ruby/1.9.1/bundler/gems/authlogic-309187b26594/lib/authlogic/session/callbacks.rb:88:in `persist'
    /Users/jason/Web/snip/rake/ruby/1.9.1/bundler/gems/authlogic-309187b26594/lib/authlogic/session/persistence.rb:55:in `persisting?'
    /Users/jason/Web/snip/rake/ruby/1.9.1/bundler/gems/authlogic-309187b26594/lib/authlogic/session/persistence.rb:39:in `find'
    /Users/jason/Web/snip/rake/ruby/1.9.1/bundler/gems/authlogic-309187b26594/lib/authlogic/acts_as_authentic/session_maintenance.rb:96:in `block in get_session_information'
    /Users/jason/Web/snip/rake/ruby/1.9.1/bundler/gems/authlogic-309187b26594/lib/authlogic/acts_as_authentic/session_maintenance.rb:95:in `each'
    /Users/jason/Web/snip/rake/ruby/1.9.1/bundler/gems/authlogic-309187b26594/lib/authlogic/acts_as_authentic/session_maintenance.rb:95:in `get_session_information'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activesupport-3.2.1/lib/active_support/callbacks.rb:407:in `_run__852872703163537099__save__999583656123085136__callbacks'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activesupport-3.2.1/lib/active_support/callbacks.rb:405:in `__run_callback'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activesupport-3.2.1/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activesupport-3.2.1/lib/active_support/callbacks.rb:81:in `run_callbacks'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/callbacks.rb:264:in `create_or_update'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/persistence.rb:84:in `save'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/validations.rb:50:in `save'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/attribute_methods/dirty.rb:22:in `save'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/transactions.rb:241:in `block (2 levels) in save'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/transactions.rb:295:in `block in with_transaction_returning_status'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/abstract/database_statements.rb:190:in `transaction'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/transactions.rb:208:in `transaction'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/transactions.rb:293:in `with_transaction_returning_status'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/transactions.rb:241:in `block in save'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/transactions.rb:252:in `rollback_active_record_state!'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/transactions.rb:240:in `save'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/autosave_association.rb:409:in `save_belongs_to_association'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/autosave_association.rb:209:in `block in add_autosave_association_callbacks'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/autosave_association.rb:161:in `instance_eval'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/autosave_association.rb:161:in `block in define_non_cyclic_method'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activesupport-3.2.1/lib/active_support/callbacks.rb:418:in `_run__3406207238143745546__save__999583656123085136__callbacks'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activesupport-3.2.1/lib/active_support/callbacks.rb:405:in `__run_callback'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activesupport-3.2.1/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activesupport-3.2.1/lib/active_support/callbacks.rb:81:in `run_callbacks'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/callbacks.rb:264:in `create_or_update'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/persistence.rb:84:in `save'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/validations.rb:50:in `save'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/attribute_methods/dirty.rb:22:in `save'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/transactions.rb:241:in `block (2 levels) in save'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/transactions.rb:295:in `block in with_transaction_returning_status'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/abstract/database_statements.rb:190:in `transaction'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/transactions.rb:208:in `transaction'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/transactions.rb:293:in `with_transaction_returning_status'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/transactions.rb:241:in `block in save'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/transactions.rb:252:in `rollback_active_record_state!'
    /Users/jason/Web/snip/rake/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/transactions.rb:240:in `save'
    /Users/jason/Web/snip/test/unit/salon_test.rb:57:in `block in <class:SalonTest>' 
```

我见过[这个类似的问题](https://stackoverflow.com/questions/978191/rails-2-3-2-unit-test-passes-when-run-with-normal-ruby-fails-when-run-with-rake)，但据我所知，它似乎不是同一个问题。

顺便说一句，我在 Rails 3.2.1 上。

我对 Rails 单元测试了解不多。问题可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T20:11:37.387

我卸载了 Authlogic（我用 Devise 替换了它），问题就消失了。

# php - php zend gdata 将文档/文件放入类别/文件夹 Google Docs

> ID：10299790
> 
> 赞同：0
> 
> 时间：2012-04-24T14:15:22.643
> 
> 标签：php, zend-framework, gdata

如何使用 Google Docs 中的 Zend gdata (oauth) 将文档/文件附加到类别或文件夹？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:57:39.970

您可以使用[`Zend_Gdata_Docs::insertDocument()`](http://framework.zend.com/apidoc/1.11/db_Gdata_Docs.html#%5CZend_Gdata_Docs%3a%3ainsertDocument%28%29)将资源添加到集合/文件夹。另请参阅 Google 文档列表 API：[https ://developers.google.com/google-apps/documents-list/#adding_a_resource_to_a_collection](https://developers.google.com/google-apps/documents-list/#adding_a_resource_to_a_collection)

# wcf - 试图将我的服务层公开为 WCF

> ID：10299792
> 
> 赞同：1
> 
> 时间：2012-04-24T14:15:24.187
> 
> 标签：wcf, wcf-binding

我在一个名为 CCL.Data 的单独程序集中有我的服务层、实体和 DTOS

问题：

我的所有应用程序都直接使用接口和 IoC 引用服务层。

例如，我的 CCL.Data 程序集中有一个名为 ICustomerService 的接口，它依赖于依赖于 MyContext 的 ICustomerRepository。我所有的应用程序都在引用 ICustomerService 来调用它的方法.......到目前为止没问题。

所以我创建了一个 WCF 项目....在这个项目中引用 CCL.Data....

我创建了一个新服务，但在下面的这种情况下，我需要将我的应用程序中调用 ICustomerService 的所有点更改为 WCFCustomerServiceClient，是否存在更好的方法而不会对我的项目造成重大影响？

```
    [服务合同]
    公共接口 IWCFCustomerService
    {
        [运营合同]
        CustomerDTO GetCustomerById(int id);
    }

    公共类 WCFCustomerService : IWCFCustomerService
    {
        ICustomerService _customerService；
        公共 WCFCustomerService()
        {
            MyContext 上下文 = new MyContext();
            ICustomerRepository customerRep = new CustomerRepository(context);
            _customerService = new CustomerService(customerRep);
        }

        公共 CustomerDTO GetCustomerById(int id)
        {
            返回 _customerService.GetCustomerById(id);
        }

    }

```

Tks，威廉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T15:56:30.153

您是否需要重新定义 IWCFCustomerService 来代替 ICustomerService？是否不可能仅将 ServiceContract 属性添加到您的原始 ICustomerService 接口（它们只会被非 WCF 代码忽略）？（确实，这确实使您对 ServiceModel 产生了依赖——但我看不出有什么办法）。

另请注意，如果您使用 ServiceReference 生成代理代码，则生成的代码将在不同的命名空间中包含您的服务接口以供客户端使用。值得注意的是，您不能使用该版本的接口（如果您有代理而不是代理实现，这可能会很烦人），但仍然可以使用来自 dll 或编译到客户端中的 org 接口定义。

# java - 可以自动超载吗？

> ID：10299793
> 
> 赞同：2
> 
> 时间：2012-04-24T14:15:30.970
> 
> 标签：java, generics, overloading

考虑一下：

```
public static abstract class JunkValue<X>{
    public abstract X value();
    public static <X> JunkValue<X> fix(final X x){
        return new JunkValue<X>()
            {

                @Override
                public X value() {
                    return x;
                }};
    }
} 
```

现在我可以轻松地制作这两种方法：

```
void test(HappyObject object){test(JunkValue.fix(object));}

void test(JunkValue<HappyObject> object){...} 
```

我想告诉我的编译器，如果我有一个`JunkValue<HappyObject>`参数，我可以只使用一个`HappyObject`对象参数来代替这个效果。

我从你可以做的事实中得到这个想法，`Number=1;`而不是`Number=new Number(1)`当我扩展 Number 时我得到了很多满足。我只希望对象而不是数字具有相同的效果。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T14:45:52.803

自动装箱是语言规范的一部分，不能扩展（无需更改编译器）

# sql - 以其他方式显示 SQL 表

> ID：10299797
> 
> 赞同：2
> 
> 时间：2012-04-24T14:15:38.837
> 
> 标签：sql

我有这样的表：

```
Code    label    Zone   Price
----    -----    ----   -----
049     able      A       5
100     hui       A       6
049     ddf       B       10
100     dsqf      B       34 
```

我怎样才能像这样转换它：

```
Code       A         B
----      ---      ----
049        5         10
100        6         34 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T14:28:32.413

```
select Code, A, B
from
  (
    select Code, Zone, Price 
    from YourTable
  ) T
pivot
  (
    min(Price) for Zone in (A, B)
  ) P 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T14:21:19.703

像这样的东西应该可以工作（假设一个名为't'的表）

```
 select codeA, A, B from 
   (select code as codeA, price as A from t where zone='A'), 
   (select code as codeB, price as B from t where zone='B') 
   where codeA=codeB 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T14:21:04.670

抱歉，我没有对此进行测试，但是您应该可以执行以下操作：

```
SELECT CODE, 
SUM(CASE ZONE WHEN A THEN PRICE ELSE NULL END) AS A,
SUM(CASE ZONE WHEN B THEN PRICE ELSE NULL END) AS B
GROUP BY CODE 
```

# c++ - 地图值类型的decltype？

> ID：10299802
> 
> 赞同：1
> 
> 时间：2012-04-24T14:15:56.213
> 
> 标签：c++, gcc, c++11

这在 c++11 中是否合法：

```
std::unordered_map<X, Y> xy_map;
X my_x;
Y my_y;
xy_map.insert(decltype(xy_map)::value_type(my_x, my_y)); 
```

我在 gcc 4.6.3 中尝试过，但没有成功。海合会抱怨：

```
expected primary-expression before 'decltype' 
```

我希望不要这样做：

```
typedef std::unordered_map<X, Y> MyMap;
xy_map.insert(MyMap::value_type(my_x, my_y)); 
```

我猜 c++11 并没有解决这个问题或者让它变得更容易。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T15:23:50.453

代码是正确的 C++。就像 Basile 在评论中提到的那样，这是为 GCC 4.7 修复的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T15:12:40.270

这并不能回答您的问题，但它确实具有可能在您的编译器上工作的优点：

```
xy_map.emplace(my_x, my_y); 
```

[这将从给定的参数构造值类型。](http://en.cppreference.com/w/cpp/container/unordered_map/emplace)第一个参数构造键，其他参数用于值。这将有效地构建`std::pair`到位。所以不需要丑陋的东西之类的`decltype`。

# iphone - 我们可以捕获 iphone 屏幕上显示的指纹吗？

> ID：10299804
> 
> 赞同：-1
> 
> 时间：2012-04-24T14:15:58.713
> 
> 标签：iphone, objective-c, ios

> **可能重复：**
> [任何手指扫描示例教程 iPhone sdk](https://stackoverflow.com/questions/9276186/any-finger-scanning-sample-tutorial-iphone-sdk)

**我说应用商店指纹安全** 中的一个应用程序[http://itunes.apple.com/us/app/fingerprint-security-pro/id312912865?mt=8](http://itunes.apple.com/us/app/fingerprint-security-pro/id312912865?mt=8)

我在 youtube 上说一个视频 [http://www.youtube.com/watch?v=5GWagOcy35A&noredirect=1](http://www.youtube.com/watch?v=5GWagOcy35A&noredirect=1)

可以采集指纹吗？如果是的话，任何人都可以告诉我如何得到它。哪个sdk支持？

请……请……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:23:46.817

不，要捕获指纹，您需要某种扫描仪/相机。iPhone屏幕不是那些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:18:30.033

一点也不，那是一款仅用于娱乐的应用程序。这是不可能的。appstore 链接甚至为您提供了有关如何执行此“技巧”的说明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T14:18:40.753

来自指纹安全页面：“此应用仅用于娱乐目的，不提供安全功能。”

iPhone屏幕无法读取指纹的详细信息，只能触摸/非触摸。

# android - Android Layout 中出现的间隙

> ID：10299806
> 
> 赞同：0
> 
> 时间：2012-04-24T14:16:05.090
> 
> 标签：android, android-layout

我的 Android 布局有一个奇怪的差距。我已经设置了视图和布局的背景颜色，以便您可以看到在哪里。中间的灰色框是间隙。我有一个整体的RelativeLayout（白色背景），顶部有一个工具栏（以粉红色显示），然后是一个LinearLayout，它是其他所有内容（以黄色显示）。在那个黄色布局中，我有两个孩子：详细信息（以蓝色显示）和一个 ListView（以红色显示）。但是，中间的灰色区域……我不知道那是从哪里来的。

![在此处输入图像描述](../Images/e99ac952d5d100d6f6f0d5458ab55e6f.png)

这是我的布局文件（为了便于阅读，剪裁了一些信息）：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/rootView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#fff"
>
    <RelativeLayout
        android:id="@+id/toolbar"
        android:layout_width="fill_parent"
        android:layout_height="44dp"
        android:background="@drawable/toolbar_gradient"
        android:layout_alignParentTop="true" 
        android:background="#f0f"
       >

        <Button style="@style/Button.Done" />
    </RelativeLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@id/toolbar"
        android:paddingTop="4dp"
        android:weightSum="10"
        android:orientation="vertical"
        android:background="#ff0"
    >
        <LinearLayout 
            android:layout_width="fill_parent" 
            android:layout_height="0dp" 
            android:layout_weight="3.5" 
            android:weightSum="9"
            android:orientation="vertical"
            android:background="#00f"
            >

        </LinearLayout>

        <ListView
            android:id="@+id/tableView"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="6.5"
            android:background="#f00" >
        </ListView>
    </LinearLayout>

</RelativeLayout> 
```

这里发生了什么？我错过了什么？

编辑：看来布局 xml 可能不是问题。我一直在努力减少，减少，减少并找到真正的罪魁祸首。看起来我的问题存在于 ListAdapter 代码中。当我发现它时会更新更多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:21:47.207

好的，所以在移除东西直到修复并重新添加东西直到它再次破裂以缩小到具体问题之后，我发现了我的错误。我将问题缩小到我在上面 ListView 内的单元格布局上的样式。

不久前我创建了一个脚本来帮助我为不同的布局大小生成许多不同的 style.xml 副本，这样我就可以为不同的设备提供良好的字体大小或 layout_height 值，并使它们看起来正确。但是，由于我的样式模板中的错误，使用 line 生成的 style.xml `<item name="android:layout_height">dp</item>`。dp 之前缺少的数字导致了古怪的行为。

*叹息*好吧，那太糟糕了。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:25:48.377

您是否尝试`android:layout_alignParentBottom="true"`从第一个 LinearLayout 的定义中删除该行？

# java - MeCab 路径参数在 Windows 上不接受空格

> ID：10299807
> 
> 赞同：1
> 
> 时间：2012-04-24T14:16:07.913
> 
> 标签：java, mecab

我已成功使用[MeCab Java](http://sourceforge.net/projects/mecab/files/mecab-java/0.98pre3/.)从我的 Java 代码中调用[Mecab 。](http://mecab.sourceforge.net)我使用以下语句来初始化标记器：

```
tagger = new Tagger("--node-format=%f[7]\\t --unk-format=%m\\t --eos-format=\\n --rcfile=" + filePath + "/mecabrc" + " --dicdir=" + filePath + "/ipadic"); 
```

现在我面临一个`filePath`可能实际上包含空格字符的问题，例如：`c:\folder name\`. 当我尝试使用这样的路径时，我从 Mecab 收到错误消息：

```
java.lang.RuntimeException: C:\src\c\common\mecab\src\main\c\tagger.cpp(151) [load_dictionary_resource(param)] C:\src\c\common\mecab\src\main\c\param.cpp(71) [ifs] no such file or directory: c:/folder 
```

这意味着 Mecab 没有正确识别空格。

知道如何指导 Mecab 接受 Windows 文件路径中的白景吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T06:42:50.373

我阅读了 MeCab 源代码，如果不编辑源代码并编译自定义版本，就无法让 MeCab 接受路径中的空格。您至少有三个解决方法：

1.  将目录重命名为不带空格的内容
2.  尽可能使用相对路径
3.  使用 Windows 8.3 文件名

[这是显示有关如何在 java 中获取 8.3 文件名的更多信息的链接。](http://dolf.trieschnigg.nl/eightpointthree/eightpointthree.html)

# sql - 从同一服务器上另一个数据库的备份创建新数据库？

> ID：10299811
> 
> 赞同：83
> 
> 时间：2012-04-24T14:16:29.380
> 
> 标签：sql, database, sql-server-2008

我正在尝试从同一服务器上的旧数据库备份创建一个新数据库。使用*SQL Server Management Studio*并尝试从备份还原到新数据库时出现此错误

```
System.Data.SqlClient.SqlError: The backup set holds a backup of a database 
other than the existing 'test' database. (Microsoft.SqlServer.Smo) 
```

谷歌搜索后，我发现了这段代码

```
 RESTORE DATABASE myDB

 FROM DISK = 'C:\myDB.bak'

 WITH MOVE 'myDB_Data' TO 'C:\DATA\myDB.mdf',

MOVE 'myDB_Log' TO 'C:\DATA\myDB_log.mdf'
GO 
```

我想知道移动语句是否会与备份来自该服务器的数据库混淆？

谢谢，所有帮助表示赞赏。

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-04-24T14:28:35.507

# 我应该做什么：

*   单击右键单击 SQL Server Management Studio 上的“数据库”节点出现的“还原数据库...”浮动菜单。
*   使用要还原的数据库和新名称填充向导。
*   **重要**如果数据库仍然存在，请更改“文件”选项卡中的“还原为”文件名以避免“文件已在使用中，无法覆盖”错误消息。

# 我所做的

IDk 为什么我更喜欢这样做：

*   我用我最喜欢的参数创建了一个空白目标数据库。
*   然后，在“SQL Server Management Studio”还原向导中，寻找覆盖目标数据库的选项。它位于“选项”选项卡中，称为**“覆盖现有数据库（WITH REPLACE）”**。核实。
*   请记住在“文件”页面中选择目标文件。

您可以更改向导左侧的“选项卡”（常规、文件、选项）

* * *

## 回答 #2

> 赞同：87
> 
> 时间：2016-07-13T13:40:34.263

甚至可以在根本不创建空白数据库的情况下进行还原。

在 Sql Server Management Studio 中，右键单击**Databases**并选择**Restore Database...** [![在此处输入图像描述](../Images/8f2cd22c54268c65b96b5b86b5765803.png)](https://i.stack.imgur.com/huUiZ.png)

在“还原数据库”对话框中，照常**选择源数据库或设备。**选择源数据库后，SSMS 将根据数据库的原始名称填充目标数据库名称。

然后可以更改数据库名称并**输入新的目标数据库名称**。

[![在此处输入图像描述](../Images/3fae2f5bf7a47f51c59daf2c79e12440.png)](https://i.stack.imgur.com/xFapL.png)

使用这种方法，您甚至不需要转到“选项”选项卡并单击“覆盖现有数据库”选项。

此外，数据库文件的命名将与您的新数据库名称一致，您仍然可以根据需要更改文件名。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-04-13T20:18:30.557

检查 Options Over Write Database 对我有用:)

[![在此处输入图像描述](../Images/08c43db37b9179f8493188a5be56255b.png)](https://i.stack.imgur.com/gQ5Po.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T14:38:36.790

把它想象成一个档案。MyDB.Bak 包含 MyDB.mdf 和 MyDB.ldf。

使用 Move 还原表示 HerDB 基本上从备份中获取 MyDB.mdf（和 ldf），并将它们复制为 HerDB.mdf 和 ldf。

因此，如果您在要恢复的服务器实例上已经有一个 MyDb，则不会被触及。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-13T10:58:10.727

问题中的脚本只是缺少**替换**语句，因此恢复脚本将是

```
RESTORE DATABASE myDB

 FROM DISK = 'C:\myDB.bak' ,

 WITH MOVE 'myDB_Data' TO 'C:\DATA\myDB.mdf',
,
MOVE 'myDB_Log' TO 'C:\DATA\myDB_log.mdf' ,  NOUNLOAD,  REPLACE,  STATS = 5 
```

# jquery - 将图像标题推入数组，然后显示它们

> ID：10299813
> 
> 赞同：1
> 
> 时间：2012-04-24T14:16:31.500
> 
> 标签：jquery, arrays, events

我有以下问题。我的 index.html 中有三张图片：

```
<div class = "someclass">
<img src = "1.jpg" title="jeeden"/>
<img src = "2.jpg" title="dwa"/>
<img src = "3.jpg" title="trzy"/>
</div> 
```

我希望他们加载，并在加载时 - 将他们的标题推送到我在 jquery 中的数组，这里是代码：

```
var titletable = [];

$(document).ready(function() {

$("img").load(function(event){
titletable.push($(this).attr('atrybut1'));
});

$.each(titletable, function(i, v) {
$('.someclass').append("<li>" + i + ": " + v + "</li>");
}); 
```

当我将`$.each`迭代移动到`.load`函数中时，它会显示数组元素，但是以错误的方式，它会在每次加载图像时显示数组的状态。我想显示`titletable`所有三个图像何时加载的内容。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:18:44.027

您在 .load 之外运行 .each ，并且加载通常会在以后发生

```
var titletable = [];

$(document).ready(function() {
   var totalImages = $("img").length;
   var loadedImages = 0;

   $("img").load(function(event){
       titletable .push($(this).attr('title'));
       loadedImages++; 

       if (loadedImages == totalImages)
           $.each(titletable, function(i, v) {
              $('.someclass').append("<li>" + i + ": " + v + "</li>");
           }); 
}); 
```

我保留当前加载图像的数量，当所有图像都加载完毕时，我正在使用数组。

# scala - 如何使用 Maven 依赖项将 Play Framework 2.0 集成到 Gradle 构建管理中？

> ID：10299815
> 
> 赞同：34
> 
> 时间：2012-04-24T14:16:39.520
> 
> 标签：scala, maven, playframework, gradle, playframework-2.0

Play framework 2.0 是一个用于创建 Web 应用程序的全栈独立框架。尽管如此，许多人可能需要将其集成到他们的构建管理中。不幸的是，我没有找到关于他的太多信息。

这是我的用例：我想创建一个使用 Scala 和 Play 2.0 的新项目。我不想使用 sbt。我想使用 Gradle，依赖管理应该通过 Maven 存储库来完成。

我只找到了这个播放模块：[http](http://www.playframework.org/modules/maven-1.0/home) ://www.playframework.org/modules/maven-1.0/home ，它支持通过 Maven 进行依赖管理。

我正在 Grails 中寻找类似这些示例的内容： [https](https://github.com/grails/grails-gradle-plugin) ://github.com/grails/grails-gradle-plugin或[http://grails.org/doc/latest/guide/commandLine.html#4.5%20Ant%20and %20马文](http://grails.org/doc/latest/guide/commandLine.html#4.5%20Ant%20and%20Maven)

当然，我可以编写调用“播放控制台命令”的脚本/任务。虽然，我不喜欢这个解决方案。有没有更好的方法来使用 Gradle / Maven 进行构建管理？如果这是唯一的解决方案，那么我会使用 Gradle，然后调用 Play 命令（即内部 sbt），对吗？这是否有效，还是会出现其他问题？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-25T00:48:51.447

这是一项非常棘手的业务。Play 中的 SBT 用于获取依赖项、编译源代码和模板，以及用于 SBT 增量编译 + 自动重新加载功能。我编写了一个`build.gradle`脚本来解决所有 Play 2.0 依赖项并设置 Eclipse 或 IntelliJ IDEA 类路径，并在[此处公开](https://gist.github.com/rodionmoiseev/2484934)。

我稍后会在有时间的时候尝试实现编译，但这需要一些研究。当然，您可以添加仅委托给 SBT 的编译和运行任务，但这需要在 SBT 和 Gradle 中描述您的所有项目依赖项，这将变得难以管理。

**编辑：**

我已经更新了[示例 build.gradle](https://gist.github.com/rodionmoiseev/2484934)文件。我添加了应该在 CI 环境中有所帮助的任务`playCompile`。`playClean`该`playCompile`任务执行以下操作：

1.  将所有用户依赖项（在`compile`配置中定义）复制到`lib/`文件夹。这是有效的，因为 Play 会友好地从 under 拾取所有 jars `lib/`。
2.  执行`play compile`命令编译所有源、模板和其他 Play 框架的东西。

您可以分别使用`cleanCopyPlayLibs`和`playClean`删除上述命令的输出。

请注意，在 Windows 上似乎存在一个奇怪的问题（错误？），这意味着即使`play compile`失败，gradle 也会告诉您它成功了。

**回复评论：**

我想你只是失踪了

```
repositories{
  mavenCentral()
} 
```

在你的文件中。检查[此文档](http://gradle.org/docs/current/userguide/artifact_dependencies_tutorial.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-19T13:50:51.853

好消息，从 Gradle 2.7 开始，有一个官方播放插件：[https ://docs.gradle.org/current/userguide/play_plugin.html](https://docs.gradle.org/current/userguide/play_plugin.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-22T03:38:29.413

[LinkedIn 目前正在制作一个 Gradle 插件来支持这一点](https://engineering.linkedin.com/play/developing-play-applications-using-gradle)。他们正在推出 3 个里程碑：

1.  使用 Gradle 构建 Play 应用程序
2.  连续模式和热重载
3.  Scala 交互式 REPL

**里程碑 1 已经完成。**它可以通过[Gradle nightly builds](http://gradle.org/nightly/)获得。在上面链接的博客文章中，他们鼓励人们尝试一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T18:02:50.503

我在 Gradle 中为 Play Framework 1.2.x 设计了一个简单的构建脚本，您也可以将其用于 Play 2.x

[https://github.com/kirang89/play-gradle](https://github.com/kirang89/play-gradle)

# java - aurigma 有条件地调整大小

> ID：10299817
> 
> 赞同：2
> 
> 时间：2012-04-24T14:16:41.550
> 
> 标签：java, php, javascript, image-resizing, aurigma

您好，我正在使用一个名为 aurigma 的基于 java 的图像上传器，并使用 php 代码进行设置。

我有一些可以在宽度或高度上设置的调整大小选项。

我想检查一下我说的地方：

```
If ((image I am uploading width) > (image I am uploading height)){
   $converter->setThumbnailFitMode("Width");
}else{
   $converter->setThumbnailFitMode("Height");
} 
```

如何检查我上传到 aurigma 的文件大小并基于此设置条件。IE

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T05:02:09.487

如果您需要在运行时设置转换器，您需要设置两个额外的 aurigma 上传器事件：1.BeforeUpload 和 2.BeforePackageUpload：

```
 uploader = new Uploader('Uploader1');
    ...
    $uploader->getClientEvents()->setBeforeUpload("BeforeUpload");
    $uploader->getClientEvents()->setBeforePackageUpload("BeforePackageUpload");
    ... 
```

然后在 Javascript 块中实现事件代码（脚本类型 = “text/javascript”）。

您将需要获取添加到上传窗格的所有图像的宽度和高度，并将这些值放入数组中。在 BeforePackageUpload 中，您应该获取每个文件的宽度和高度值并比较它们以设置所需的转换器适合模式：

```
//set new arrays 
var widths = [];
var heights = [];

function BeforeUpload() {
  var uploader = $au.uploader('Uploader1');
  count = uploader.files().count();
  for (i = 0; i < count; i++) {
    widths[i] = uploader.files().get(i).width();
    heights[i] = uploader.files().get(i).height();
  }
}

function BeforePackageUpload(index) {
  var uploader = $au.uploader('Uploader1');
  if (widths.shift() > heights.shift()) {
    uploader.converters([{
      mode: '*.*=Thumbnail',
      thumbnailFitMode: 'Width',
      thumbnailWidth: 500,
      thumbnailHeight: 300,
      thumbnailJpegQuality: 100
    }]);
  }

  else  
  {
    uploader.converters([{
      mode: '*.*=Thumbnail',
      thumbnailFitMode: 'Height',
      thumbnailWidth: 300,
      thumbnailHeight: 500,
      thumbnailJpegQuality: 100
    }]);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:46:24.067

看看： http: [//php.net/manual/en/book.image.php](http://php.net/manual/en/book.image.php)。

# html - “数据-umgid”是什么意思？

> ID：10299819
> 
> 赞同：0
> 
> 时间：2012-04-24T14:16:44.203
> 
> 标签：html

“data-umgid” - 我正在尝试评估一些代码并且遇到了一些我不熟悉的元素。谁能解释“data-umgid”是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T14:20:08.830

`data-`HTML 5 引入了对具有前缀的自定义元素属性的支持。它们可用于多种目的。有关更多信息，请参阅[本文](http://www.javascriptkit.com/dhtmltutors/customattributes.shtml)。

[W3 规范](http://www.w3.org/TR/2010/WD-html5-20101019/elements.html#embedding-custom-non-visible-data-with-the-data-attributes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:21:31.717

看起来像一个 html`data-*`属性，可让您将任何附加信息作为属性存储到元素，在这种情况下`umgid`，无论它可能是什么......您可以在此处查看规范：http: [//www.whatwg.org/specs/web -apps/current-work/multipage/elements.html#attr-data-](http://www.whatwg.org/specs/web-apps/current-work/multipage/elements.html#attr-data-) *

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T14:22:12.980

除了专门为网站编写的代码外，它对任何东西都没有任何意义。

HTML 5 草案允许[data-*](http://www.w3.org/TR/html5/global-attributes.html#embedding-custom-non-visible-data-with-the-data-attributes)属性是：

> 自定义数据属性旨在存储页面或应用程序私有的自定义数据，没有更合​​适的属性或元素。
> 
> 这些属性不适用于独立于使用这些属性的站点的软件。

几乎可以肯定，它们被用于存储数据，以便在页面中运行 JavaScript，但您必须对 JavaScript 进行反向引擎以确定其用途。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T14:23:42.817

这看起来像一个 HTML 5 自定义数据属性。这是一个允许您将自定义数据分配给元素的属性。[HTML 5 规范](http://www.w3.org/TR/2009/WD-html5-20090825/dom.html#embedding-custom-non-visible-data)中的更多信息。格式是将它们命名为 data-* ，其中 * 是您喜欢的任何名称，它们可以包含您喜欢的任何数据。如果没有看到您的页面代码，我无法确切地告诉您它的用途，但猜测它被用来存储某些页面上的 JavaScript 正在使用的数据。

# asp.net-mvc - 选择列表输入选定值

> ID：10299822
> 
> 赞同：0
> 
> 时间：2012-04-24T14:16:48.630
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有以下代码来填充`DropDownList`

```
var list = new Dictionary<string, decimal>();
list.Add("1.000.000", 1000000m);
list.Add("500.000", 500000m);
list.Add("5.000", 5000m);
viewModel.MyValue = 500000.00m; //of type decimal?
viewModel.MyList = new SelectList(list, "Value", "Key", viewModel.MyValue); 
```

在 HTML 中

```
@Html.DropDownListFor(model => model.MyValue, Model.MyList, "select value") 
```

一切正常（选定的值被传递给控制器​​并定期保存），唯一不工作的是选定的值。我通过的那个不会在下拉列表中自动选择。我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T16:43:38.700

我解决了这个问题。在 SelectList 中执行 ToString() 时的框架无法将 500000.00 与 500000 匹配（我在我的问题中输入了错误的值，抱歉错字。更新）

使用一个简单的 froeach 你可以看到发生了什么

```
 viewModel.MyList = new SelectList(list, "Value", "Key", viewModel.MyValue);
  foreach (var item in viewModel.MyList)
  {
    var p = viewModel.MyValue.ToString();
    if (item.Value == p) //here 500000 != 500000.00
    {
      item.Selected = true;
      break;
    }
  } 
```

所以我简单地解决了这个问题

```
var list = new Dictionary<string, decimal>();
list.Add("1.000.000", 1000000.00m);
list.Add("500.000", 500000.00m);
list.Add("5.000", 5000.00m); 
```

无论如何感谢大家的帮助

# hibernate - Hibernate 4 - Oracle 10g 和 WebSphere 7 的提交问题

> ID：10299824
> 
> 赞同：0
> 
> 时间：2012-04-24T14:16:58.883
> 
> 标签：hibernate, oracle10g, websphere

我正在使用数据源连接到 Oracle 数据库并插入数据。下面是我的休眠配置条目：

```
 <hibernate-configuration>
    <session-factory>
        <property name="connection.datasource">jdbc/LOCAL_ORACLE</property>
        <property name="hibernate.format_sql">true</property>
        <property name="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</property>
        <property name="current_session_context_class">thread</property>
        <property name="hibernate.current_session_context_class">thread</property>
        <property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property>   
    </session-factory>
</hibernate-configuration> 
```

下面是保存数据的代码片段。

```
 final Configuration cfg = new Configuration().addResource("SampleTable.hbm.xml").configure();
final ServiceRegistry serviceRegistry = new ServiceRegistryBuilder().applySettings(cfg.getProperties()).buildServiceRegistry();
sessionFactory = cfg.buildSessionFactory(serviceRegistry);
session = sessionFactory.openSession();
txn = session.beginTransaction();
session.save(cs90spTransDetails);
txn.commit(); 
```

我面临的问题是当**txn.commit()**被称为休眠时抛出以下错误：

```
 [4/24/12 19:25:13:675 IST] 0000001a SystemErr     R Caused by: org.hibernate.TransactionException: unable to commit against JDBC connection
[4/24/12 19:25:13:675 IST] 0000001a SystemErr     R     at org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.doCommit(JdbcTransaction.java:116)
[4/24/12 19:25:13:675 IST] 0000001a SystemErr     R     at org.hibernate.engine.transaction.spi.AbstractTransactionImpl.commit(AbstractTransactionImpl.java:178)
[4/24/12 19:25:13:675 IST] 0000001a SystemErr     R     ... 13 more
[4/24/12 19:25:13:675 IST] 0000001a SystemErr     R Caused by: java.sql.SQLException: DSRA9350E: Operation Connection.commit is not allowed during a global transaction.
[4/24/12 19:25:13:675 IST] 0000001a SystemErr     R     at com.ibm.ws.rsadapter.jdbc.WSJdbcConnection.commit(WSJdbcConnection.java:1064)
[4/24/12 19:25:13:675 IST] 0000001a SystemErr     R     at org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.doCommit(JdbcTransaction.java:112) 
```

注意：如果我使用**hibernate.connection.driver_class 和 hibernate.connection.url**连接到数据库，上面的代码可以正常工作。数据毫无问题地存储在数据库中。

我确定我做错了什么，我无法弄清楚。有人可以告诉我我错过了什么。

谢谢你。杰伊·钱德兰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:39:36.150

据我所见，从应用服务器获取的数据源被配置为参与[容器管理的事务](http://docs.oracle.com/javaee/6/tutorial/doc/bncij.html)。

因此您需要配置 Hibernate 以使用这些事务（参见[3.9.1\. 事务策略配置](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch03.html#configuration-optional-transactionstrategy)和[3.9.3\. 当前会话上下文管理与 JTA](http://docs.jboss.org/hibernate/core/4.1/manual/en-US/html/ch03.html#configuration-j2ee-currentsession)），并且不需要手动管理事务。

# php - 基于两个字段查找最重复条目的 Mysql 查询

> ID：10299834
> 
> 赞同：1
> 
> 时间：2012-04-24T14:17:19.210
> 
> 标签：php

我的数据库中有 2 行：性别（只能是：1 或 2 个“男性、女性”）、食物（各种记录，例如：苹果、香蕉、吐司、意大利面等）我想关联最喜欢的食物划分按性别。我做了这样的事情，但它不会工作：

```
$most_male = mysql_query("SELECT * FROM data WHERE sex = '1' GROUP BY foods HAVING count(*) > 2") or die(mysql_error()); //do something

$most_female= mysql_query("SELECT * FROM data WHERE sex = '2' GROUP BY foods HAVING count(*) > 2") or die(mysql_error()); //do something 
```

此代码只会找到 > 2 但不是最重复的第一条记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:55:23.883

```
SELECT *
FROM (SELECT sex, foods, COUNT(*)
      FROM data
      WHERE sex=1
      GROUP BY sex, food
      HAVING COUNT(*)>2
      ORDER BY COUNT(*) DESC
      LIMIT 0,1
) ilv1
UNION
SELECT *
FROM (SELECT sex, foods, COUNT(*)
      FROM data
      WHERE sex=2
      GROUP BY sex, food
      HAVING COUNT(*)>2
      ORDER BY COUNT(*) DESC
      LIMIT 0,1
) ilv2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:24:47.347

这应该有助于：

```
$most_male = mysql_query("SELECT count(*) as Count,`foods` FROM `data` WHERE `sex` = '1' GROUP BY `foods` ORDER BY `Count` DESC") or die(mysql_error());

$most_female = mysql_query("SELECT count(*) as Count,`foods` FROM `data` WHERE `sex` = '0' GROUP BY `foods` ORDER BY `Count` DESC") or die(mysql_error()); 
```

# android - 如何在片段中使用 ViewPager

> ID：10299837
> 
> 赞同：3
> 
> 时间：2012-04-24T14:17:24.607
> 
> 标签：android, android-fragments, android-viewpager

我下载了一个关于 ViewPager 和 CirclePageIndicator 的项目。它在我的平板电脑上运行良好，它的代码是：

Test1Activity.java：

```
TestFragmentAdapter mAdapter;
ViewPager mPager;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //The look of this sample is set via a style in the manifest
    setContentView(R.layout.simple_circles);

    mAdapter = new TestFragmentAdapter(getSupportFragmentManager());

    mPager = (ViewPager)findViewById(R.id.pager);
    mPager.setAdapter(mAdapter);

    CirclePageIndicator indicator = (CirclePageIndicator)findViewById(R.id.indicator);
    indicator.setViewPager(mPager);
} 
```

TestFragmentAdapter.java：

```
class TestFragmentAdapter extends FragmentPagerAdapter {
protected static final String[] CONTENT = new String[] { "Page1", "Page2", "Page3", "Page4", };

private int mCount = CONTENT.length;

public TestFragmentAdapter(FragmentManager fragmentManager) {
    super(fragmentManager);
}

@Override
public Fragment getItem(int position) {
    return TestFragment.newInstance(CONTENT[position % CONTENT.length]);
}

@Override
public int getCount() {
    return mCount;
}

public void setCount(int count) {
    if (count > 0 && count <= 10) {
        mCount = count;
        notifyDataSetChanged();
    }
}} 
```

测试片段：

```
public final class TestFragment extends Fragment {
private static final String KEY_CONTENT = "TestFragment:Content";

public static TestFragment newInstance(String content) {
    TestFragment fragment = new TestFragment();

    fragment.mContent = content;

    return fragment;
}

private String mContent = "???";

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    if ((savedInstanceState != null) && savedInstanceState.containsKey(KEY_CONTENT)) {
        mContent = savedInstanceState.getString(KEY_CONTENT);
    }

    TextView text = new TextView(getActivity());
    text.setGravity(Gravity.CENTER);
    text.setText(mContent);
    text.setTextSize(20 * getResources().getDisplayMetrics().density);
    text.setPadding(20, 20, 20, 20);

    LinearLayout layout = new LinearLayout(getActivity());
    layout.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
    layout.setGravity(Gravity.CENTER);
    layout.addView(text);

    return layout;
}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putString(KEY_CONTENT, mContent);
}} 
```

现在我想在 Fragment 而不是 Activity 中使用这个 ViewPager，但我很困惑。TestFragmentAdapter 的构造函数接受类型为 android.support.v4.app.FragmentManager 的参数，但在片段中我只能使用 getFragmentManager() 来获取 android.app.FragmentManager 类型，因此

```
mAdapter = new TestFragmentAdapter(getSupportFragmentManager()); 
```

总是错的。我必须在几天内完成我的项目，所以你能告诉我如何修改我的代码以在片段中实现相同的功能吗？

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-03T12:21:43.150

将此代码放在您的 MainActivity 中。下面的代码将在您的布局中加载片段。

**步骤1**

```
Fragment fragment = new PageSlider();
FragmentManager manager = getSupportFragmentManager();
manager.beginTransaction().replace(R.id.content, fragment).commit(); 
```

接下来我们需要实现 ViewPager

**第2步**

```
public class PageSlider extends Fragment {
public PageSlider() {
// Required empty public constructor
}
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
}
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
Bundle savedInstanceState) {
// Inflate the layout for this fragment
    return inflater.inflate(R.layout.page_slider, container, false);
}
@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
// TODO Auto-generated method stub
  super.onViewCreated(view, savedInstanceState);
  PagerSlidingTabStrip tab = (PagerSlidingTabStrip) view
.findViewById(com.akshay.protocol10.asplayer.R.id.tabs);

 ViewPager pager=(ViewPager)view  .findViewById(com.akshay.protocol10.asplayer.R.id.view_pager);
MyPagerAdapter adapter = new MyPagerAdapter(getChildFragmentManager());
pager.setAdapter(adapter);
tab.setViewPager(pager);
}
// TODO: Rename method, update argument and hook method into UI event
public void onButtonPressed(Uri uri) {
}
@Override
public void onAttach(Activity activity) {
super.onAttach(activity);
}
@Override
public void onDetach() {
super.onDetach();
}
public interface OnFragmentInteractionListener {
// TODO: Update argument type and name
public void onFragmentInteraction(Uri uri);
}
} 
```

**第 3 步：**创建适配器

```
 public class MyPagerAdapter extends FragmentPagerAdapter {
        private final String[] TITLES = { "Album", "Artist", "Songs", "Genre" };
        public MyPagerAdapter(FragmentManager childFragmentManager) {
      // TODO Auto-generated constructor stub
    super(childFragmentManager);
    }
    @Override
    public CharSequence getPageTitle(int position) {
    // TODO Auto-generated method stub
    return TITLES[position];
    }
    @Override
    public Fragment getItem(int index) {
    // TODO Auto-generated method stub
       Fragment fragment = null;
       if (index == 0) {
       fragment = new Albums();
       } else if (index == 1) {
       fragment = new ArtistFragment();
       } else if (index == 2) {
        fragment = new TracksFragment();
       } else if (index == 3) {
       fragment = new GenreFragment();
      }
     return fragment;
    }

    @Override
    public int getCount() {
    // TODO Auto-generated method stub
    return TITLES.length;
    }
   } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T14:26:12.800

~~Android 不支持 Fragment 内的 Fragment。要么切换你`ViewPager`使用`PagerAdapter`不使用片段的 a ，要么不要将 放入`ViewPager`片段中。~~

**编辑：**

现在，Android 通过使用[Fragment.getChildFragmentManager()](http://developer.android.com/reference/android/support/v4/app/Fragment.html#getChildFragmentManager())来支持 Fragment 内的 Fragment 。看看[这个答案](https://stackoverflow.com/a/25644199/1288725)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-08T06:32:46.877

检查应该从`android.support.v4.app.Fragment`Not导入的片段扩展类`android.app.Fragment`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T14:23:56.920

您是否尝试替换`extends Fragment`为`extends android.support.v4.app.Fragment`？

执行此操作时，getFragmentManager() 引用 android.support.v4.app.FragmentManager。

# android - 如何在我的 android 应用程序中阅读 pdf？

> ID：10299839
> 
> 赞同：50
> 
> 时间：2012-04-24T14:17:29.337
> 
> 标签：android, pdf-reader

我正在制作一个需要打开 pdf 的应用程序。

我在资产文件夹中也有一些 pdf，所以我无法直接在 webview 中打开它。

默认情况下，android 不支持 pdf。

是否有任何适用于 android 的 API（MuPdf 除外）？

我的设备没有安装任何 pdf 阅读器，所以 ACTION VIEW 对我没有帮助

以下不起作用.......

[如何在 Android 中渲染 PDF 文件](https://stackoverflow.com/questions/2456344/display-pdf-within-app-on-android)

[在应用程序中打开资产文件 pdf](https://stackoverflow.com/questions/5743807/open-asset-file-pdf-in-application)

你能推荐我什么好的api吗？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-04-27T14:22:27.903

我只是使用[PdfViewer.jar](http://www.ziddu.com/download/19248664/PdfViewer.jar.html)（使用蓝色按钮下载它）并制作了如下所示的代码。

**第一个.java**

```
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    File images = Environment.getExternalStorageDirectory();
    imagelist = images.listFiles(new FilenameFilter()
    {  
            public boolean accept(File dir, String name)  
            {  
                    return ((name.endsWith(".pdf")));
            }  
    }); 
    pdflist = new String[imagelist.length]; 
    for(int i = 0;i<imagelist.length;i++)
    {
            pdflist[i] = imagelist[i].getName();
    }
    this.setListAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, pdflist));
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) 
{
        super.onListItemClick(l, v, position, id);
        String path = imagelist[(int)id].getAbsolutePath();
        openPdfIntent(path);
}

private void openPdfIntent(String path) 
{
    try
    {
      final Intent intent = new Intent(First.this, Second.class);
      intent.putExtra(PdfViewerActivity.EXTRA_PDFFILENAME, path);
      startActivity(intent);
    }
    catch (Exception e) 
    {
      e.printStackTrace();
    }
} 
```

**二.java**

```
public class Second extends PdfViewerActivity 
{

@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
}

public int getPreviousPageImageResource() {
    return R.drawable.left_arrow;
}

public int getNextPageImageResource() {
    return R.drawable.right_arrow;
}

public int getZoomInImageResource() {
    return R.drawable.zoom_in;
}

public int getZoomOutImageResource() {
    return R.drawable.zoom_out;
}

public int getPdfPasswordLayoutResource() {
    return R.layout.pdf_file_password;
}

public int getPdfPageNumberResource() {
    return R.layout.dialog_pagenumber;
}

public int getPdfPasswordEditField() {
    return R.id.etPassword;
}

public int getPdfPasswordOkButton() {
    return R.id.btOK;
}

public int getPdfPasswordExitButton() {
    return R.id.btExit;
}

public int getPdfPageNumberEditField() {
    return R.id.pagenum_edit;
}
} 
```

希望这对你有很大帮助。尝试这个。不要忘记`Second.java`在清单中添加您的。在你的drawables中添加一些它需要`second.java`的drawables。并且，请参考[GitHub中的示例](https://github.com/jblough/Android-Pdf-Viewer-Library)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-23T06:31:50.540

某些手机​​（例如 Nexus One）预装了 Quickoffice 版本，因此一旦您将文件保存到 SD 卡，就可以像发送相应的 Intent 一样简单。

```
public class OpenPdf extends Activity { 
    @Override 
    public void onCreate(Bundle savedInstanceState) { 
        super.onCreate(savedInstanceState); 
        setContentView(R.layout.main); 

        Button button = (Button) findViewById(R.id.OpenPdfButton); 
        button.setOnClickListener(new View.OnClickListener() { 
            @Override 
            public void onClick(View v) { 
                File file = new File("/sdcard/example.pdf"); 

                if (file.exists()) { 
                    Uri path = Uri.fromFile(file); 
                    Intent intent = new Intent(Intent.ACTION_VIEW); 
                    intent.setDataAndType(path, "application/pdf"); 
                    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 

                    try { 
                        startActivity(intent); 
                    }  
                    catch (ActivityNotFoundException e) { 
                        Toast.makeText(OpenPdf.this,  
                            "No Application Available to View PDF",  
                            Toast.LENGTH_SHORT).show(); 
                    } 
                } 
            } 
        }); 
    } 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T22:50:08.857

我从来不需要这样做，但您可以使用[iText](http://itextpdf.com/download.php)之类的库以编程方式访问 PDF 文件，然后显示 PDF。

# wcf - 是否可以不在 WCF 中生成 wsdl 合同的服务部分？

> ID：10299849
> 
> 赞同：0
> 
> 时间：2012-04-24T14:17:52.420
> 
> 标签：wcf, wsdl, svcutil.exe

我写了一个 WCF 服务，想知道是否有可能无法获得服务部分：

```
<wsdl:service name="MyService">
<wsdl:port name="BasicHttpBinding_MyService" binding="tns:BasicHttpBinding_MyService">
  <soap:address location="http://localhost:8000/MyService/Service" />
</wsdl:port> 
```

直接在 wsdl 中或在 svcutil 将其拉下时使用generetad。

或者，编写一个仅删除服务元素的 powershell 脚本可能更容易？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T18:04:50.090

实施 IWsdlExportExtension。在里面删除你不想要的部分：

[http://msdn.microsoft.com/en-us/library/system.servicemodel.description.iwsdlexportextension.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.description.iwsdlexportextension.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T16:20:33.563

无法阻止内置元数据发出 WSDL 的服务部分。

您的选择是创建新的元数据行为，或者更简单，关闭元数据并通过众所周知的 Url 提供手工制作的 WSDL。

# c# - WPF 拦截模式窗口外的点击

> ID：10299856
> 
> 赞同：3
> 
> 时间：2012-04-24T14:18:18.353
> 
> 标签：c#, wpf, c++-cli

是否可以检查用户何时在模式窗口外单击？我想以某种方式规避模态逻辑，因为如果窗口未显示为模态，它将不会显示在活动窗口的顶部，而且，目前，这是正确显示它的唯一方法。我还没有找到合适的方法来做到这一点（因为“停用”事件将不再被触发..）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-24T15:56:02.970

即使它是一个模态窗口（与`ShowDialog()`调用一起显示），也可以将一些偶数处理程序添加到窗口的类中，并使其检查窗口外的鼠标点击，如下所示：

```
 private void Window_MouseDown(object sender, MouseButtonEventArgs e)
    {
        if (posX < 0 || posX > this.Width || posY < 0 || posY > this.Height)
            this.Close();            
    }

    private void Window_MouseMove(object sender, MouseEventArgs e)
    {
        Point p = e.GetPosition(this);

        posX = p.X; // private double posX is a class member
        posY = p.Y; // private double posY is a class member
    }

    private void Window_Activated(object sender, EventArgs e)
    {
        System.Windows.Input.Mouse.Capture(this, System.Windows.Input.CaptureMode.SubTree);
    } 
```

在一个困难的背景下，这为我完成了这项工作：混合 MFC、WindowsForms 庞大的应用程序 - 没有互操作，没有其他复杂的东西。希望它可以帮助其他人面对这种奇怪的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T15:42:46.813

一种方法是在你的主应用程序上连接事件处理程序，并在你打开该窗口时响应它：

```
EventManager.RegisterClassHandler(typeof(Window), Mouse.MouseDownEvent, new MouseButtonEventHandler(OnMousepDown), true); 
```

或者

```
 EventManager.RegisterClassHandler(typeof(yourAppClassName),   Mouse.PreviewMouseDownEvent, new MouseButtonEventHandler(OnMousepDown), true);

//this is just a sample..
private void OnMousepDown(object sender, MouseButtonEventArgs e)
    {
        if (thatWindowThatYourTalkingAbout.IsOpen) 
            ..do something 
    } 
```

# c# - C# - 使用字符串生成器将标头写入日志文件

> ID：10299859
> 
> 赞同：2
> 
> 时间：2012-04-24T14:18:28.557
> 
> 标签：c#, string, file, logging, builder

这应该是一个非常容易解决的问题，但由于某种原因，我遗漏了一些东西。我要做的就是获取我必须编写标题的字符串生成器函数，但由于某种原因它目前不是。

当我尝试将 if 语句更改为 !File.Exists(tempFileName) 时，它不会通过我的循环运行。

有什么建议么？另外，如果您需要更多信息，请告诉我。提前致谢。

```
public static void Open(string tempFileName, string division,
                             int zipFiles, int conversions, int returnedFiles, int totalEmails)
    {
        StreamWriter dailyStats;

        //This is where I am missing something
        //I am passing in the original filename of a log, then adding "-Stats.log"
        //so I can tell the difference between what is the new stats file, and the original log file
        if (File.Exists(tempFileName))
        {
            dailyStats = new StreamWriter(tempFileName + "-Stats.log");

            StringBuilder sb = new StringBuilder();
            sb.Append("Division");
            sb.Append("\t");
            sb.Append("Zip Files");
            sb.Append("\t");
            sb.Append("Conversions");
            sb.Append("\t");
            sb.Append("Returned Files");
            sb.Append("\t");
            sb.Append("Total E-Mails");
            sb.Append("\t");

        }
        else
        {
            dailyStats = File.AppendText(tempFileName + "-Stats.log");
        }

        if (writeLog)
        {
            //Use a string builder to assemble the content for performance reasons
            StringBuilder s = new StringBuilder();
            s.Append(division);
            s.Append("\t");
            s.Append(zipFiles);
            s.Append("\t");
            s.Append(conversions);
            s.Append("\t");
            s.Append(returnedFiles);
            s.Append("\t");
            s.Append(totalEmails);
            s.Append("\t");

            dailyStats.WriteLine(s.ToString());
        }

        dailyStats.Close();
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T14:21:50.953

您是否没有丢失第一个块中的代码？：

```
dailyStats.WriteLine(sb.ToString()); 
```

因此：

```
 if (File.Exists(tempFileName))
    {
        dailyStats = new StreamWriter(tempFileName + "-Stats.log");

        StringBuilder sb = new StringBuilder();
        sb.Append("Division");
        sb.Append("\t");
        sb.Append("Zip Files");
        sb.Append("\t");
        sb.Append("Conversions");
        sb.Append("\t");
        sb.Append("Returned Files");
        sb.Append("\t");
        sb.Append("Total E-Mails");
        sb.Append("\t");

        // Add this ......
        dailyStats.WriteLine(sb.ToString());
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T14:30:16.690

你可以像这样修复它

```
var sb = new StringBuilder();
string logFileName = tempFileName + "-Stats.log";
if (File.Exists(logFileName)) {
    dailyStats = File.AppendText(logFileName); 
} else {
    dailyStats = new StreamWriter(logFileName); 

    // Write header
    sb.Append("Division");
    ...
    sb.AppendLine();
} 

if (writeLog)  {
    sb.Append(division);
    ...
    dailyStats.WriteLine(sb.ToString());
} 
dailyStats.Close(); 
```

* * *

**更新**

代码有不同的错误。创建了两个`StringBuilders`，但只有一个写入文件。该文件的存在是针对与写入的实际文件不同的文件名确定的。最后，依赖于文件存在的逻辑被反转了。我完全重写和重构了代码，以使其更易于理解和管理

```
public static void Open(string tempFileName, string division,
                     int zipFiles, int conversions, int returnedFiles, int totalEmails)
{
    if (!writeLog)
        return;

    using (StreamWriter dailyStats = OpenLogFile(tempFileName)) {
        var sb = new StringBuilder();
        sb.Append(division);
        // ...
        dailyStats.WriteLine(sb.ToString());
    }
}

private static StreamWriter OpenLogFile(string tempFileName)
{
    StreamWriter dailyStats;
    string logFileName = tempFileName + "-Stats.log";
    if (File.Exists(logFileName)) {
        dailyStats = File.AppendText(logFileName);
    } else {
        dailyStats = new StreamWriter(logFileName);
        WriteHeader(dailyStats);
    }
    return dailyStats;
}

private static void WriteHeader(StreamWriter dailyStats)
{
    var sb = new StringBuilder();
    sb.Append("Division");
    // ...
    dailyStats.WriteLine(sb.ToString());
} 
```

注意： using 语句关闭文件并自动释放外部资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T14:21:09.430

你正在创造第二个`StringBuilder`，而不是用它做任何事情。您可能只想`StringBuilder`在更高级别定义，以便在任一块中附加到它都将其添加到一个可以在最后写出的SB。

当然，另一种选择是写出`StringBuilder`用于写入标头的内容，`dailyStats`而不是在附加字符串后什么都不做。

# c# - 将 SQL 连接字符串的部分与正则表达式匹配

> ID：10299860
> 
> 赞同：1
> 
> 时间：2012-04-24T14:18:28.587
> 
> 标签：c#, regex

我编写了一个正则表达式来匹配 SQL 连接字符串的一部分。在第一个规范中，初始目录等被强制不包含特殊字符。所以我有

```
string strConn = "Data Source=VAIOE;Initial Catalog=SomeTextOnlyCatname;Integrated 
    Security=True;Persist Security Info=True;MultipleActiveResultSets=True;Connect Timeout=0;";
Regex databaseNameRegex =
    new Regex(@"(?i)\b(Initial\sCatalog|Database)\b\s?=\s?(\w+\s*)*;?"); 
```

现在，我需要匹配名称可能带有符号、标点符号等的部分。例如

```
string strConn = "Data Source=VAIOE;Initial Catalog=N3wC@t@l0gName*6Symbols;Integrated 
    Security=True;Persist Security Info=True;MultipleActiveResultSets=True;Connect Timeout=0;"; 
```

我想返回的地方`Initial Catalog=N3wC@t@l0gName*6Symbols`。

我试过了

```
Regex databaseNameRegex =
    new Regex(@"(?i)\b(Initial\sCatalog|Database)\b\s?=\s?(\w+\p{P}*\p{M}*\p{Z}*\s*)*;?"); 
```

但这失败了，因为连接字符串中存在分号。处理这个问题的最佳正则表达式是什么？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T14:21:29.843

您可以使用[`SqlConnection`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.aspx)为您解析连接字符串并避免使用正则表达式吗？如果您只需要数据库名称，则应使用以下方法：

```
var conn = new SqlConnection(strConn);
Console.WriteLine(conn.Database); 
```

**编辑**

Allon Guralnek 提供了一种更好的方法 - 谢谢！

用于[`SqlConnectionStringBuilder`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnectionstringbuilder.aspx)此 - 它会提取您需要的任何信息。

```
var connBuilder = new SqlConnectionStringBuilder(strConn);
Console.WriteLine(connBuilder.InitialCatalog); 
```

# java - Java Jackcess 库文档？

> ID：10299864
> 
> 赞同：3
> 
> 时间：2012-04-24T14:18:40.483
> 
> 标签：java, jackcess

我需要在 .mdb 访问文件上读取和写入一些数据，并且通过网络我找到了可以做到这一点的[Jackcess](http://jackcess.sourceforge.net/)库。

不幸的是，我找不到任何文档来使用它。在图书馆网站上有几个例子，但没有真正的文档。谁能告诉我某处是否有某种文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T17:53:36.413

javadoc 旨在提供相当的解释性。主要类是[Database](http://jackcess.sourceforge.net/apidocs/com/healthmarketscience/jackcess/Database.html)和[Table](http://jackcess.sourceforge.net/apidocs/com/healthmarketscience/jackcess/Table.html)。该库还经过大量单元测试，因此您可以深入研究[单元测试代码](http://jackcess.sourceforge.net/xref-test/com/healthmarketscience/jackcess/DatabaseTest.html)以查看许多示例。目前没有一个很好的“入门”文档。之前已经讨论过，但不幸的是，没有人真正开始编写它。也就是说，[帮助论坛](https://sourceforge.net/projects/jackcess/forums/forum/456474)受到积极监控。

更新：

现在有一[本食谱](http://jackcess.sourceforge.net/cookbook.html)，它是更全面的用户级文档的开端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T01:46:26.097

您可以使用使用 DAO 模式和带有注释的 POJO 的[jackcess-orm](https://github.com/amgohan/jackcess-orm)。

# string - 在保留顺序的同时将文本转换为数字？

> ID：10299868
> 
> 赞同：1
> 
> 时间：2012-04-24T14:18:48.147
> 
> 标签：string, sorting, language-agnostic

我有一个奇怪的要求，我似乎无法理解。我需要想出一个函数，该函数将接受一个文本字符串并返回一个与该字符串相对应的数字 - 这样，在排序时，这些数字将与原始字符串的顺序相同。例如，如果我的函数产生这个映射：

```
"abcd"  -> x
"abdef" -> y
"xyz"   -> z 
```

那么数字必须是这样的`x < y < z`。字符串可以是任意长度，但总是非空的，并且字符串比较应该不区分大小写（即`"ABC"`并且`"abc"`应该产生相同的数值）。

我的第一个想法是将每个字母映射到相应的数字 1 到 26，然后只得到结果数字，例如`a = 1, b = 2, c = 3, ..., z = 26`，然后`"abc"`会变成`1*26^2 + 2*26 + 3`，但是后来我意识到文本字符串可以包含任何语言的任何文本（即完整的 unicode），所以这行不通。在这一点上，我被困住了。在我告诉客户草皮之前还有其他想法吗？

PS 这个奇怪的要求是由于专有系统的限制，只能按数字字段进行排序。如果任何其他字段类型需要排序，则必须将其转换为某种数字表示 - 然后进行排序。不要问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-19T21:28:09.827

如果你允许任意精度的实数，你就可以完成这项工作，尽管这有点像作弊。Unicode 字符串是从 1,114,112 个选项中提取的字符序列。因此，您可以将它们视为以 1,114,113 为底的十进制数字：写 0.，然后写出您的 Unicode 字符串，然后您就有一个以 1,114,113 为底的实数（将每个字符的数值上移 1，以便缺失的字符具有值0)。在 base-1,114,113 中比较这些数字中的两个数字会按字典顺序比较数字：如果您从左到右扫描数字，则在两者之间的抢七中他们不同意的第一个数字。这种方法是完全不可行的，除非你有一个任意精度的实数库。

如果你只有 IEEE-734 双打，这种方法是行不通的。看到这一点的一种方法是最多有 2 ^(64 个)可能的双精度数（如果允许s，则最多有 2 ^(80)`long double`个），因为 a 中只有 64 (80) 位`double`，但有无限多不同的字符串。这消除了这种可能性，仅仅是因为有太多的字符串可以绕过。

不幸的是，如果您有任意精度的整数，您将无法完成这项工作。字符串的自然排序有一个有趣的属性，您可以找到在它们之间按字典顺序具有无限多个字符串的字符串对。例如，请注意

> a < ab < aab < aaab < aaaab < ... < b

现在想象一下，您有一个函数将每个字符串映射到一个符合您想要的规则的整数。那将意味着

> f(a) < f(ab) < f(aab) < f(aaab) < f(aaaab) < ... < f(b)

但这在整数中是不可能的——你不能有两个整数 f(a) 和 f(b)，它们之间有无限多个整数。（f(a) 和 f(b) 之间的整数个数最多为 f(b) - f(a) - 1）。

所以看起来答案是“如果你有任意精度的实数，这是可能`double`的，对于 s 是不可能的，对于任意精度的整数也是不可能的。” 我基本上会标记“在实践中不会发生”，即使理论上是可能的。:-)

# asp.net - 重命名控制器 asp.net mvc

> ID：10299869
> 
> 赞同：7
> 
> 时间：2012-04-24T14:18:57.260
> 
> 标签：asp.net, asp.net-mvc

我有一个更大的项目，大约有 9 个控制器。现在在项目结束时，url requeirement 发生了变化。如何最好地处理这种情况 - 重命名控制器似乎太麻烦了......我需要更改 servercode 和 javascript 中的所有链接

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T14:25:47.597

您的问题可以通过更改现有路线来解决。在您的 global.asax 中，您会找到这样的代码片段

```
routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        ); 
```

这会将 URL '/Controller/Action/Id' 映射到 Controller、Action 和 Id。您可以提供这样的路线

```
 routes.MapRoute(
            "RefactoredRoute", // Route name
            "SomeChangedURLBase/{action}/{id}", // URL with parameters
            new { controller = "Controller", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        ); 
```

将请求路由到 /SomeChangedURLBase... 以由 Controller 处理。

请注意，这些路由应该在默认路由之前注册，以避免视图中生成的链接指向默认路由并生成旧 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T14:20:02.160

您可以更改 global.asax 中的路由

只需更改方法 RegisterRoutes

在这里您可以找到更多信息。

[http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/asp-net-mvc-routing-overview-cs](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/asp-net-mvc-routing-overview-cs)

[http://weblogs.asp.net/scottgu/archive/2007/12/03/asp-net-mvc-framework-part-2-url-routing.aspx](http://weblogs.asp.net/scottgu/archive/2007/12/03/asp-net-mvc-framework-part-2-url-routing.aspx)

干杯

# sql-server - 队列被禁用并再次启用后，QUEUE_ACTIVATION 上的事件通知停止工作

> ID：10299870
> 
> 赞同：1
> 
> 时间：2012-04-24T14:18:59.020
> 
> 标签：sql-server, sql-server-2008, tsql, service-broker

我正在使用 Service Broker 外部激活。我已经为队列（QUEUE_ACTIVATION）创建了事件通知。目前正在进行大量测试，有时我的队列会被停用。

启用队列后，事件通知不再起作用，并且外部激活器不会启动控制台应用程序。

我找到[了这个](http://social.msdn.microsoft.com/Forums/en-US/sqlservicebroker/thread/172b96ee-006c-4b66-8952-8d655ad748d1)，但这似乎是别的东西，因为“从 sys.event_notifications 中选择 *”表明已经创建了事件通知。

我确实删除并再次创建相同的事件通知以使其工作，但这似乎是错误的..

如何自动检测事件通知不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:37:18.017

您可能没有收到并提交来自监控队列的通知，导致通知进入 NOTIFIED 状态但永远不会转换到 RECEIVES_OCCURING。请参阅[了解队列监视器](http://rusanu.com/2008/08/03/understanding-queue-monitors/)。

# android - Android中线程的正确使用是什么？

> ID：10299871
> 
> 赞同：1
> 
> 时间：2012-04-24T14:18:59.520
> 
> 标签：android, multithreading, progressdialog

我有几个方法的主要活动。

*   GetTopics：调用 REST API 并返回 JSON 结果
*   BindTopics：在屏幕上显示来自 GetTopics 的结果

还有一些其他具有类似功能的，但我确信我可以将解决方案适用于所有方法。

问题：在单独的线程中运行这些的正确方法是什么？他们应该在同一个线程中吗？GetTopics 完成后我应该调用 BindTopics 吗？

无论哪种方式，UI 不是在异步线程完成之前构建的吗？如果是这样，我如何更新 UI？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T14:23:12.813

你所有问题的答案是[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T14:36:28.947

我会在带有 AsyncTask 的进度对话框中加载它。您需要声明处理程序以更新 UI 线程中的控件。

例子：

```
private Handler     handler         = new Handler();

final ProgressDialog pd = new ProgressDialog(this);
pd.setTitle("Getting topics..");
pd.setMessage("Please while topics are retrieved");
pd.setProgressStyle(ProgressDialog.STYLE_SPINNER);
pd.setIndeterminate(true);

new AsyncTask<Void, Void, Void>() {

    @Override
    protected Void doInBackground(Void... params) {

        GetTopics();

        return null;
    }

    @Override
    protected void onPreExecute() {

        pd.show();
        super.onPreExecute();
    }

    @Override
    protected void onPostExecute(Void result) {

        BindTopics();

        pd.dismiss();

        handler.post(new Runnable() {

            public void run() {
                // update UI
                // remove loading view
                // load details of topics
            }
        });
        super.onPostExecute(result);
    }

}.execute(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T14:25:11.690

您想创建您的 UI（带有某种加载屏幕），然后启动 AsyncTask 以下载数据并显示它。

这里有一篇关于 AsyncTasks 的基本博客文章：[http ://android-developers.blogspot.co.uk/2009/05/painless-threading.html](http://android-developers.blogspot.co.uk/2009/05/painless-threading.html)

在 AsyncTasks doInBackground 方法中，您将调用 GetTopics。然后在 onPostExecute 方法中调用 BindTopics 并显示数据。在 onPostExecute 方法中，您可以在尝试显示数据之前检查数据是否正确下载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T14:50:24.840

对我来说，线程的主要用途是当我的应用程序必须从 ftp 服务器下载大量数据时。但是在下载时我希望用户仍然可以使用我的应用程序。如果我在主线程中编写了下载代码，用户将无法使用该应用程序并且所有按钮都将不起作用。线程的主要思想是为每个线程划分CPU使用时间。

如果您希望同时执行一项以上的任务，则必须使用线程。

# javascript - 在特定位置添加元素

> ID：10299872
> 
> 赞同：2
> 
> 时间：2012-04-24T14:19:04.900
> 
> 标签：javascript, jquery

当我使用 document.createElement 时，javascript 会在正文底部添加一个元素。如何在某个位置添加元素？（使用 document.createElement 属性，我的意思是存储在一个新变量中）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T14:24:13.167

> 当我使用 document.createElement 时，javascript 会在正文底部添加一个元素。

不，返回一个元素，但它没有附加到任何东西。你需要自己做：

```
var ptag = document.createElement('p');
ptag.innerHTML = "hello world";
var someplace = document.getElementById('some_element_id');
someplace.appendChild(ptag); 
```

那是普通的js；jquery 技术更简洁。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T14:23:00.657

```
<html>
<head>
</head>
<script type="text/javascript">
var my_div = null;
var newDiv = null;

function addElement()
{

  newDiv = document.createElement("div");
  newContent = document.createTextNode("test");
  newDiv.appendChild(newContent);

  my_div = document.getElementById("org_div1");
  document.body.insertBefore(newDiv, my_div);
}

</script>

<body onload="addElement()">
<div id='org_div1'> The text above has been created dynamically.</div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T14:31:31.623

您可以使用 jquery 在任何 DOM 元素的开头或结尾添加 dom/Element。

请参阅下面的示例

​</p>

```
<!-- HTML CODE -->
<div id="item">
this is only test
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

JQUERY 脚本：

```
$(document).ready(function(){

    var item = "<span>New item</span>"
    /* PrependTo */
    $(item).prependTo('#item');

    /* AppendTo */
    $(item).appendTo('#item');

});
​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

[请参阅此处](http://api.jquery.com/prependTo/)和[此处](http://api.jquery.com/appendTo/)的 jquery 文档

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T14:21:01.813

嗯，我可能是错的，但如果您使用 jQuery，您是否正在寻找类似的东西：

```
var newDiv = $("<div />"); 
```

此外，如果您有一个 jQuery 元素列表（一个对象数组），例如`$(".divs")`which procs `[[Object Object], [Object Object]]`（而每个 [Object Object] 是一个包含 class 的 div 元素`.divs`），您可以向该列表添加一个新元素（无需粘贴到 html body 直到你 rdy ） 通过做

```
$(".divs").add(newDiv); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T14:22:59.160

只需将元素添加为另一个元素的子元素。

例如：

HTML

```
<body>
<div id="container"></div>
...
[page content here]
...
</body> 
```

JS

```
newdiv = $("<div>something</div>");
$("#container").append(newdiv); 
```

参见[文档`append`](http://api.jquery.com/append/)

# c# - 对 SDF 数据库文件的更改永远不会保存

> ID：10299873
> 
> 赞同：0
> 
> 时间：2012-04-24T14:19:16.193
> 
> 标签：c#, sql-server-ce

每当我重新启动应用程序时，对 DataTable 的更改永远不会保存在 SDF 数据库文件中。

例子 ：

```
_table.Clear();
_adapter.Update(_table); 
```

或者

```
_table.Clear();
_adapter.Update(_dataSet); 
```

我也尝试了以下但没有成功：

[本地数据缓存同步不会将客户端更改保存到 sdf 文件](https://stackoverflow.com/questions/1769491/local-data-cache-sync-does-not-save-client-changes-to-sdf-file)

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:24:14.887

您是否试图从数据库中删除所有行？

`DataTable.Clear`清除表中的所有行：

[http://msdn.microsoft.com/en-us/library/system.data.datatable.clear.aspx](http://msdn.microsoft.com/en-us/library/system.data.datatable.clear.aspx)

它不会将它们标记为删除，这是您在更新时需要执行的操作：

[http://msdn.microsoft.com/en-us/library/feh3ed13(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/feh3ed13(v=vs.80).aspx)

# couchdb - 无法从 PouchDB 中检索值

> ID：10299875
> 
> 赞同：4
> 
> 时间：2012-04-24T14:19:18.103
> 
> 标签：couchdb, indexeddb, pouchdb

使用 PouchDB 插入数据后，我尝试`db.getAll()`检索所有文档和`db.get()`单个文档，但返回的对象都不包含我插入的值。

我究竟做错了什么？

```
new Pouch('idb://test', function(err, db) {
  doc = {
    test : 'foo',
    value : 'bar'
  }

  db.post(doc, function(err, data) {
    if (err) console.error(err)
      else console.log(data)
  })

  db.allDocs(function(err, data) {
    if (err) console.error(err)
      else console.log(data)
  })
}) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T14:31:20.557

在完成将数据插入 PouchDB 之前，您的*allDocs*查询正在运行，由于 IndexedDB API，所有数据库查询都是异步的（它们可能无论如何都必须是异步的，因为它也是一个 HTTP 客户端）。

```
new Pouch('idb://test', function(err, db) {
  var doc = {
    test : 'foo',
    value : 'bar'
  };
  db.post(doc, function(err, data){
    if (err) {
      return console.error(err);
    }
    db.allDocs(function(err, data){
      if (err)    console.err(err)
      else console.log(data)
    });
  });
}); 
```

... 应该管用。

# ruby - 在Ruby中按字符串访问成员？

> ID：10299877
> 
> 赞同：0
> 
> 时间：2012-04-24T14:19:38.600
> 
> 标签：ruby

我看起来高高在低，也许我只是有点不习惯，但我似乎找不到如何做以下事情。

我有一个字符串/符号，例如`"a"`or `:a`。类 ,`B`包含一个数据成员 , `@a`。我希望以这种方式访问​​该成员：

```
def method object_of_class_B, string_or_symbol_referencing_the_member
    object_of_class_B.some_other_method string_or_symbol_referencing_the_member = 010
end 
```

所以我可以打电话：

```
method c, :a 
```

效果和我写的一样：

```
c.a = 010 
```

谁能指出我的解决方案的方向？我在学习过程中是否完全错过了 Ruby 的一个关键部分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T14:23:00.733

您可以`send`像这样调用 setter 方法：

```
object_of_class_B.send("#{ string_or_symbol_referencing_the_member }=", 010) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T14:26:34.517

如果对象还没有属性的访问器，您可以在对象上使用[instance_variable_set](http://ruby-doc.org/core-1.9.3/Object.html#method-i-instance_variable_set)。

例如：

```
c = SomeClass.new  
c.instance_variable_set(:@a, 'new value') 
```

# install4j - 将环境变量添加到 install4j

> ID：10299879
> 
> 赞同：0
> 
> 时间：2012-04-24T14:19:40.907
> 
> 标签：install4j

是否可以将环境变量添加到 install4j 一次，而不是在“指定环境变量”字段下添加此变量？

例如，我想添加 JAVA_VENDOR=Sun 一次，每次我将使用“运行可执行文件或批处理文件”操作时，该变量将被正在运行的进程识别。

提前致谢， 马克西姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:30:50.497

是的，您可以使用 setx 命令来完成。

见 setx /? 了解更多信息。

```
Setx "JAVA_VENDOR" "Sun once" 
```

PD：请记住，此时 CMD 使用设置的配置文件，我的意思是，如果您尝试直接在 CMD 实例中提供 voiremental 变量，则需要关闭并重新打开 cmd 以查看更改。

再见。

# php - jquery 点击处理程序语言集

> ID：10299880
> 
> 赞同：0
> 
> 时间：2012-04-24T14:19:49.507
> 
> 标签：php, jquery, get, click

我在 index.php 页面上有 3 个链接：

```
<div id="languages">
    <a href="index.php?page=test&lang=en" id="flag">
        <img src="./images/flags/en.png" class="flag_off" alt="en" title="en">
    </a>
    <a href="index.php?page=test&lang=sk" id="flag">
        <img src="./images/flags/sk.png" class="flag_off" alt="sk" title="sk">
    </a>
    <a href="index.php?page=test&lang=cz" id="flag">
        <img src="./images/flags/cz.png" class="flag_on" alt="cz" title="cz">
    </a>                 
</div> 
```

他们每个人都在传递 lang 参数并在同一页面上（index.php）。然后我有变量

```
$_GET['lang'] 
```

这将调用更改语言的函数：

```
$obj->change_language($_GET['lang']); 
```

**问：如何通过使用 jquery get() 函数而不在 index.php 页面的 url 中显示参数来做到这一点？**

（通过 jquery 传递变量 $lang）

我不喜欢调用函数后带参数的 URL，例如：

```
index.php?page=test&lang=sk 
```

我想使用 .click() 函数作为处理程序。

**编辑：**

我有这样的事情：

```
$(document).ready(function(){
  $("#flag").click(function(){
      $.get('index.php',
         { lang: "VARIABLE LANG FROM HREF" }
     );
     });
  }); 
```

如何从 href *index.php?page=test&lang=* ***sk***部分解析**sk ？**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:23:11.047

如果您的问题是 URL 中的参数，您可以尝试使用 Ajax ( [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/) ) 设置它，而不是重新加载页面。由于您的内容也应该更改为所选语言，因此我认为您无法刷新？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T07:30:49.480

```
$(".flag").click(function(event) {
    event.preventDefault();
    $.get(this.href, function(data) {
        location.reload();
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T08:09:10.900

你根本不需`jQuery`要这样做。你可以做类似的事情

```
<div id="languages">
    <a href="changeLanguage.php?lang=en">
        <img src="/flags/en.png" alt="en" title="en">
    </a>
    <a href="changeLanguage.php?lang=sk">
        <img src="/flags/sk.png" alt="sk" title="sk">
    </a>
    <a href="changeLanguage.php?lang=cz">
        <img src="/flags/cz.png" alt="cz" title="cz">
    </a>                 
</div> 
```

然后，在这个`changeLanguage.php`，你做你的`$obj->change_language($_GET['lang']);`（你应该检查/`lang`转换参数的值），然后，你可以将用户重定向到引用页面，比如

```
$url = (string) $_SERVER['HTTP_REFERER'];
if (0 === strlen($url)) {
     // redirect to the home page if there is no referer
     $url = '/';
}
header('Location: '.$url); 
```

这样，您不需要任何`Javascript`代码。我认为这在某些方面很重要：

*   使用 AJAX 解决方案，您只需执行一个 HTTP 请求，而不是两个，
*   当用户单击时，浏览器会立即做出反应：请求在单击后立即发送，因此浏览器的“加载图标”显示正在发生某些事情
*   action->reaction 的这种效果在用户体验中很重要，使用 AJAX 解决方案您必须等待第一个请求完成才能触发“加载图标”，
*   与`location.reload()`AJAX 解决方案一起使用时可以显示一个对话框，例如`Would you like to submit the form again ?`用户是否带着请求到达此页面`POST`，并且他可能不理解其操作（更改语言）与此“错误”消息之间的关系，这会导致用户体验也下降了，
*   如果您`Javascript`以某种方式损坏，则如果您更改语言的页面仅更改语言，则这些链接可能根本不起作用。假设该页面`index.php?page=test&lang=en`正在执行类似的操作`$obj->change_language($_GET['lang']); exit;`，因为该页面的目的只是更改语言。那么如果 Javascript 代码由于任何原因没有被触发（代码被破坏，处理程序未绑定，用户在新选项卡中打开页面），那么加载的页面将是一个空白页面。如果您处理这种情况，那么“更改语言页面”看起来就像一个普通页面，这没关系，但这意味着您将执行两个带有“完整”响应的 HTTP 请求（一个用于更改语言，另一个用于更改语言之后`location.reload`)，这就引出了第一点，
*   `Javascript`仅在需要的地方使用:)

你怎么看 ？**

# ios - 如何打开iOS状态栏中的网络指示灯？

> ID：10299889
> 
> 赞同：46
> 
> 时间：2012-04-24T14:20:18.363
> 
> 标签：ios, swift, networking

我知道这些指标不止一项。谢谢。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2015-08-10T09:44:14.653

**迅速**

```
UIApplication.sharedApplication().networkActivityIndicatorVisible = true 
```

**斯威夫特 5**，**斯威夫特 4.x**，**斯威夫特 3.x**

```
UIApplication.shared.isNetworkActivityIndicatorVisible = true 
```

**iOS 13、14 的**更新

 **iOS 13 将不会显示网络指示器。

[弃用](https://developer.apple.com/documentation/uikit/uiapplication/1623102-isnetworkactivityindicatorvisibl)消息说：

> 如果需要，请在您的应用中提供自定义网络活动 UI。

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2012-04-24T14:22:33.447

```
[[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES]; 
```**

# php - 如何使用 PDT 插件在 Eclipse 中设置/查看 PHP 服务器页面（用于 php）

> ID：10299890
> 
> 赞同：2
> 
> 时间：2012-04-24T14:20:21.997
> 
> 标签：php, eclipse, iis, windows-7

我正在尝试在我的本地主机上设置一个 PHP 服务器以使用`Eclipse PDT`. 我希望能够查看我正在开发的 PHP 站点，`http://localhost/MySite/index.php`这样我就可以`Run`直接从 Eclipse 中获取它。

我正在为 PHP 服务器使用 IIS 7.5（Windows 7 家庭高级版）。

到目前为止，我已按照这些说明进行操作，但无法使其正常工作：

*   `CGI`Windows 功能中的安装选项
*   `IIS Manager`在 Windows 功能中安装（这样我就可以运行`inetmgr.exe`）
*   下载 NTS 版本的 php 并将 zip 解压缩到`C:/php`
*   重命名`php.ini-development`并`php.ini`设置`extension_dir`变量
*   运行`inetmgr`并创建一个新网站来运行 PHP 应用程序（我删除了`DefaultSite`）：
    *   网站名称：`My Site`
    *   物理目录`C:/dev/MySite`
    *   应用程序池：`DefaultAppPool`
    *   绑定：
        *   主持人：
        *   IP地址：`All Unasigned`
        *   港口：`80`
*   在`inetmgr`：单击处理程序映射并添加一个新的`Module Mapping`：
    *   请求路径：`*.php`
    *   模块：`FastCGIModule`
    *   可执行文件：`C:/php/php-cgi.exe`

现在我有很多问题：

1.  在`IIS Manager`中，当我单击`Edit Site`>时`Test Settings`，出现黄色感叹号警告`Authorization: Cannot verify access to path (C:/dev/MySite)`：：

    > 服务器配置为使用带有内置帐户的直通身份验证来访问指定的物理路径。但是，IIS 管理器无法验证内置帐户是否具有访问权限。确保应用程序池标识对物理路径具有读取权限。如果此服务器已加入域，并且应用程序池标识为 NetworkService 或 LocalSystem，请验证 \$ 是否具有对物理路径的读取访问权限。然后再次测试这些设置。

2.  当我尝试`.php`直接从 webroot (C:/dev/MySite) 加载任何文件时，它在我的网络浏览器中显示为纯文本

3.  当我尝试`Run`在 Eclipse 中执行我的项目时，它会转到`http://localhost/MySite/index.php`并且有一个`404 Error: Website Not Found`

4.  当我`http://localhost/`在我的网络浏览器中访问时，我也会得到一个`404 Error`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T09:45:55.557

如果您[下载 PHP 5.4.x](http://windows.php.net/download/)，您将能够使用内置的 Web 服务器来满足您的所有开发需求。

在您的 php 文件夹中，您将运行：

```
php -S localhost:3030 
```

现在您将能够浏览到[http://localhost:3030/index.php](http://localhost:3030/index.php)

如果您使用的是 Aptana IDE（或任何类似的），您可以这样设置：

![外部 Web 服务器配置](../Images/b57df5293f2b5ddf66938f88de5a2a44.png)

您的运行配置将是：

![运行配置](../Images/825486f12ffff2a2a6958464283249f2.png)

我个人不使用 Aptana（我在几年前使用过）；但是，我认为尝试这个来确定集成是否无缝会很有趣。我不得不说，我对 Aptana 不妨碍您的方式印象深刻，因此您可以随心所欲地做任何事情。

最后，如果您想知道我的“开始命令”中列出的“$HOME/local/php/versions”，我会使用一个名为[php-version](http://wilmoore.github.com/php-version)的工具来驱动多个 PHP 版本。请注意，此工具针对 Linux/Mac 用户；但是，如果更多人感兴趣，我可能会做一个 windows/powershell 端口（**注意**：我是作者）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T21:09:50.670

恐怕我没有回答你的问题，但我想分享...

我从来都不喜欢在 IIS 或 Apache 上运行 PHP。所以我构建了一个[可移植的、无需安装的 nginx 副本](https://github.com/Xeoncross/wnmp)，我可以随身携带或在我的 Windows 机器上使用它。（只需下载您想要的 PHP、Nginx 和 MySQL 版本并启动它）。原因之一是大多数生产站点无论如何都运行 nginx，所以这样我更接近我的服务器实际使用的内容（除非你在仍然使用 Apache 的“共享主机”上）。

其次，我不确定为什么需要从 Eclipse 中“运行”它。当您编写 PHP 时，您通常会处理很多变量来设置页面。我想说您需要更多地担心添加单元测试以确保一切正常，并使用像 Firefox（带有 firebug）这样的浏览器来测试您可能发出的任何请求。诸如 AJAX 或处理会话 cookie 之类的东西通常需要比 Eclipse 所能提供的更多的控制。

底线，我不确定你为什么认为你需要这样做。

# vim - 跨多个 gvim 实例的 Vim 通用历史文件

> ID：10299891
> 
> 赞同：1
> 
> 时间：2012-04-24T14:20:25.467
> 
> 标签：vim, history

我想在多个 gvim 实例中维护一个公共历史文件，这样当我在一个实例中运行命令（如 regexp）时，我应该能够在另一个 gvim 实例中执行相同的命令。我搜索了谷歌并找不到太多帮助。那么，有谁知道如何做到这一点？

谢谢，拉克什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T16:26:02.227

不，Vim / gVim 目前没有这样的功能。

它在未来的待办事项列表中，查看`help todo`和搜索`top-level`（它在第 7 类下），但据我所知，它还没有实现。

# objective-c - 在 iOS 上使用 Cordova / Phonegap 1.6.1 一次编写多个文件

> ID：10299893
> 
> 赞同：0
> 
> 时间：2012-04-24T14:20:26.400
> 
> 标签：objective-c, ios, file-io, cordova

当我一次写入多个平均大小为 100KB 的文件（是否批处理）时，我在输出控制台中收到以下消息：

```
void SendDelegateMessage(NSInvocation*): delegate 
 (webView:decidePolicyForNavigationAction:request:frame:decisionListener:) 
 failed to return after waiting 10 seconds. 
 main run loop mode: kCFRunLoopDefaultMode 
```

这是使用 Cordova fileWriter：[http ://docs.phonegap.com/en/1.6.1/cordova_file_file.md.html#FileWriter](http://docs.phonegap.com/en/1.6.1/cordova_file_file.md.html#FileWriter)

这个错误的原因是什么，防止它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T04:58:18.227

我有一个类似的问题。找到了原因，但还没有解决办法。

到目前为止，我发现如果脚本运行超过 10 秒，Web 视图会返回错误，从而阻止用户与应用程序交互。如果您正在使用 alert()，则可能会在这 10 秒内计算警报框的持续时间（直到您按下确定）。

# spring - 在 proguard 混淆后与现有的、不兼容的同名和类的 bean 定义冲突

> ID：10299895
> 
> 赞同：2
> 
> 时间：2012-04-24T14:20:37.680
> 
> 标签：spring, obfuscation, proguard

在 Proguard 混淆后，我收到以下错误：

> 从 ServletContext 资源 [/WEB-INF/applicationContext.xml] 解析 XML 文档时出现意外异常；嵌套异常是 java.lang.IllegalStateException: bean 类 [com.company.project.baaa] 的注解指定的 bean 名称 'a' 与现有的、不兼容的同名 bean 定义和类 [com.company.project.啊]

我正在使用基于注释的 spring 配置，我如何避免使用 Proguard 有两个具有相同名称的类，因为 Spring 不允许两个 bean 具有相同的名称。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-24T15:31:48.877

我不确定这是否是您想要的，但您可以在 @Component （以及构造型 @Repository、@Service 和 @Controller）值中指定 bean 名称：

```
@Component("myBeanName")
public class MyBean {

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-05-03T11:29:35.893

我遇到了同样的问题，没有其他任何帮助。有时，如果您移动了类并且它指的是旧类，即使它们不存在，有时也会出现问题。

在这种情况下，只需这样做：

```
mvn eclipse:clean

mvn eclipse:eclipse 
```

这对我来说效果很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-19T15:18:35.217

另一个原因；你的类路径中可能有不同版本的 Spring，例如 spring 2.x 和 spring 3.x。在这种情况下，bean 似乎被加载了两次。如果您使用 maven，请检查模块是否没有导入旧版本的 Spring（mvn 依赖项：tree）并通过排除涉及的 spring 工件（排除项）将其删除。

# html - 具有内部 iframe 大小问题的 Safari Mobile iframe

> ID：10299897
> 
> 赞同：4
> 
> 时间：2012-04-24T14:20:58.330
> 
> 标签：html, ipad, iframe, ios5, mobile-safari

我有一个“简单”的 Web 应用程序，它有一个导航和一个内容区域。在内容区域内，我有一个包含更复杂内容的 iframe。不幸的是，iframe 中的内容还有另一个 iframe。

在这里得到一个概述：

![初始视图](../Images/3d6d7e0a2b87b1f2280aa0d585f7c092.png).

在我的场景中，查看完整的 iframe 内容非常有帮助，因此我们隐藏导航并更改其顶部的内容大小：

![全屏视图](../Images/a7af9ad697f7fc52fe81f80d0dad8ebb.png)

如果我现在返回初始视图，则 iframe 内的 iframe 不会改变大小：

![在此处输入图像描述](../Images/33955c419ef327e73a98e4bf634b807f.png)

这只发生在 Safari mobile (iPad) OS 5.1 上。在普通的 Safari 浏览器上，它按预期工作。有没有人有类似的问题或知道这里发生了什么？

当然解决方案会更好:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:21:39.010

如果这是仅在 Safari 或 iPad 中出现的问题，您可以添加一些跨浏览器 CSS 支持来告诉特定浏览器它应该如何显示。我喜欢用[这个](http://rafael.adm.br/css_browser_selector/)

这允许您添加特定的 css 指令，例如

.[os].[browser] .mylink { 字体粗细：粗体；} -> .[os] 和 .[browser] 之间没有空格

.iphone.safari .scrollingframe {css 样式}

希望这可以帮助。

# iphone - 应该使用哪种事件数据格式？

> ID：10299899
> 
> 赞同：0
> 
> 时间：2012-04-24T14:21:03.777
> 
> 标签：iphone, events, icalendar

我有一个应用程序（除其他功能外）有一个事件日历。一些用户需要将事件数据导出和导入到他们自己的日历中。我找到了 iCalendar 格式，但我不知道这是否最适合我。

格式应该是扩展格式（尽可能达到最大用户数），特别是必须是允许导入/导出 iPhone 和 Android 日历（内置日历）的格式。

事件数据本身是非常基本的（名称、描述、开始和长度）。

有没有符合这些要求的格式？有什么方法可以让 iPhone/Android 手机以 iCalendar 格式导入/导出事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:46:31.153

是的，iCalendar 是您正在寻找的标准（有关更多信息，您可以访问[http://calconnect.org/](http://calconnect.org/)）

关于出口：iCalendar 是基于苹果日历的标准，或者 iPhone 与 icalendar 兼容，因为这是日历的事实标准，所以与 Android 兼容。

# c# - goo.gl 或 jsfiddle 之类的网站如何生成它们的 URL 代码？

> ID：10299901
> 
> 赞同：26
> 
> 时间：2012-04-24T14:21:07.443
> 
> 标签：c#, algorithm

我想生成像[goo.gl](http://goo.gl/UEhtg)和[jsfiddle](http://jsfiddle.net/XzKvP/)网站（`http://jsfiddle.net/XzKvP/`）这样的代码。

我尝试了不同的东西，这些东西给了我太大的 guid、重复的字母数字代码等。

我想我应该能够根据我的数据库表中的主键生成一个字母数字代码。这样就不会重复了？PK 是一个自增 1 的整数。但不确定应该怎么做。

我希望代码***看起来是***随机的，但不一定***是***这样。例如，我***不***希望`1234`我的数据库中`BCDE`的 item 是并且`1235`item 是`BCDF`.

**例子：**

请注意 url 如何`http://jsfiddle.net/XzKvP/`具有与页面关联的唯一 5 字符代码`XzKvP`。我希望能够生成相同类型的代码。

goo.gl 也这样做：http: [//goo.gl/UEhtg](http://goo.gl/UEhtg)有`UEhtg`

**这是怎么做到的？**

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-07-11T11:39:05.397

基于随机子串的解决方案并不好，因为输出会发生冲突。它可能会过早发生（运气不好），并且最终会在生成的值列表变大时发生。碰撞概率甚至不必那么大（参见[生日攻击](http://en.wikipedia.org/wiki/Birthday_attack)）。

对这个问题有好处的是递增 ID 与其对应的 ID 之间的[伪随机排列，它将显示在 URL 中。](http://en.wikipedia.org/wiki/Pseudorandom_permutation)这种技术保证了碰撞是不可能的，同时仍然生成与输入空间一样小的输出空间。

**执行**

我建议这个 C# 版本的[Feistel 密码](http://en.wikipedia.org/wiki/Feistel_cipher)，它具有 32 位块、3 轮和一个受伪随机生成器启发的**轮函数。**

```
private static double RoundFunction(uint input)
{
    // Must be a function in the mathematical sense (x=y implies f(x)=f(y))
    // but it doesn't have to be reversible.
    // Must return a value between 0 and 1
    return ((1369 * input + 150889) % 714025) / 714025.0;
}

private static uint PermuteId(uint id)
{
    uint l1=(id>>16)&65535;
    uint r1=id&65535;
    uint l2, r2;
    for (int i = 0; i < 3; i++)
    {
        l2 = r1;
        r2 = l1 ^ (uint)(RoundFunction(r1) * 65535);
        l1 = l2;
        r1 = r2;
    }
    return ((r1 << 16) + l1);
} 
```

要在 base62 字符串中表示置换后的 ID：

```
private static string GenerateCode(uint id)
{
    return ToBase62(PermuteId(id));
} 
```

该`Base62`函数与[前面的答案](https://stackoverflow.com/a/10302978/238814)相同，除了它是取`uint`而不是`int`（否则必须重写这些函数以处理负值）。

**自定义算法**

`RoundFunction`是算法的秘诀。您可以将其更改为非公开版本，可能包括密钥。Feistel 网络有两个非常好的特性：

*   即使提供`RoundFunction`的不可逆，该算法也保证这`PermuteId()`将是数学意义上的排列（这意味着零碰撞）。

*   即使是轻微地改变 round 函数内的表达式也会极大地改变最终输出值的列表。

请注意，在圆形表达式中放置一些过于琐碎的东西会破坏伪随机效应，尽管它仍然会在每个`PermuteId`输出的唯一性方面起作用。此外，在数学意义上不是函数的表达式将与算法不兼容，因此例如任何涉及`random()`的内容都是不允许的。

**可逆性**

在其当前形式中，该`PermuteId`函数是它自己的逆函数，这意味着：

```
PermuteId(PermuteId(id))==id 
```

`uint`因此，给定程序生成的短字符串，如果您使用函数将其转换回`FromBase62`，并将其作为输入提供给`PermuteId()`，则将返回相应的初始 ID。如果您没有数据库来存储 [internal-ID / shortstring] 关系，那就太酷了：它们实际上不需要存储！

**制作更短的字符串**

上述函数的范围是 32 位，也就是从 0 到 的大约 40 亿个值`2^32-1`。要以 base62 表示该范围，需要 6 个字符。

只有 5 个字符，我们希望能表示最多的`62^5`值，也就是略低于 10 亿。如果输出字符串限制为 5 个字符，则应按如下方式调整代码：

*   找到`N`这样的，它`N`是偶数并且`2^N`尽可能高但低于`62^5`. 那是 28，所以我们适合的实际输出范围`62^5`将是`2^28`或大约 2.68 亿个值。

*   在 中，`PermuteId`使用`28/2=14`位值代替 16 位，同时注意不要忽略输入的单个位（必须小于 2^28）。`l1``r1`

*   将结果乘以`RoundFunction`16383 而不是 65535，以保持在 14 位范围内。

*   在 的末尾`PermuteId`，重新组合`r1`并`l1`形成一个`14+14=28`位值而不是 32。

相同的方法可以应用于 4 个字符，输出范围为`2^22`，或大约 400 万个值。

**它是什么样子的**

在上面的版本中，前 10 个生成的以 id=1 开头的字符串是：

```
cZ6ahF
3t5mM
xGNPN
dxwUdS
ej9SyV
cmbVG3
科尔克
bfCPOX
JDr8Q
eg7iuA

```

如果我在 round 函数中做一个微不足道的改变，那就变成：

```
埃0LLY
ddy0ak
dDw3wm
bVuNbg
bKGX22
c0s5GZ
dfNMSp
齐SqE
cxKH4b
dNqMDA

```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-24T14:29:28.280

您可以将五个字母的代码视为 base-62 表示法中的数字：您的“数字”是 26 个小写字母和 26 个大写字母，以及从 0 到 9 的数字。（26+26+10）个数字。给定一个从 0 到`62^5`（等于 916132832）的数字（例如，您的主键），您可以将其转换为五位数的 base-62，如下所示：

```
private static char Base62Digit(int d) {
    if (d < 26) {
        return (char)('a'+d);
    } else if (d < 52) {
        return (char)('A'+d-26);
    } else if (d < 62) {
        return (char)('0'+d-52);
    } else {
        throw new ArgumentException("d");
    }
}

static string ToBase62(int n) {
    var res = "";
    while (n != 0) {
        res = Base62Digit(n%62) + res;
        n /= 62;
    }
    return res;
}

private static int Base62Decode(char c) {
    if (c >= '0' && c <= '9') {
        return 52 + c - '0';
    } else if (c >= 'A' && c <= 'Z') {
        return 26 + c - 'A';
    } else if (c >= 'a' && c <= 'z') {
        return c - 'a';
    } else {
        throw new ArgumentException("c");
    }
}

static int FromBase62(string s) {
    return s.Aggregate(0, (current, c) => current*62 + Base62Decode(c));
} 
```

以下是如何生成加密强随机数（您需要添加对 的引用`System.Security`）：

```
private static readonly RNGCryptoServiceProvider crypto =
    new RNGCryptoServiceProvider();

private static int NextRandom() {
    var buf = new byte[4];
    crypto.GetBytes(buf);
    return buf.Aggregate(0, (p, v) => (p << 8) + v) & 0x3FFFFFFF;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-24T17:30:49.060

# 这就是我最终做的

（自 Daniel Vérité 的回答以来更新）：

```
class Program
{

    private static double RoundFunction(uint input)
    {
        // Must be a function in the mathematical sense (x=y implies f(x)=f(y))
        // but it doesn't have to be reversible.
        // Must return a value between 0 and 1
        return ((1369 * input + 150889) % 714025) / 714025.0;
    }
    private static char Base62Digit(uint d)
    {
        if (d < 26)
        {
            return (char)('a' + d);
        }
        else if (d < 52)
        {
            return (char)('A' + d - 26);
        }
        else if (d < 62)
        {
            return (char)('0' + d - 52);
        }
        else
        {
            throw new ArgumentException("d");
        }
    }
    private static string ToBase62(uint n)
    {
        var res = "";
        while (n != 0)
        {
            res = Base62Digit(n % 62) + res;
            n /= 62;
        }
        return res;
    }
    private static uint PermuteId(uint id)
    {
        uint l1 = (id >> 16) & 65535;
        uint r1 = id & 65535;
        uint l2, r2;
        for (int i = 0; i < 3; i++)
        {
            l2 = r1;
            r2 = l1 ^ (uint)(RoundFunction(r1) * 65535);
            l1 = l2;
            r1 = r2;
        }
        return ((r1 << 16) + l1);
    }

    private static string GenerateCode(uint id)
    {
        return ToBase62(PermuteId(id));
    }

    static void Main(string[] args)
    {

        Console.WriteLine("testing...");

            try
            {

                for (uint x = 1; x < 1000000; x += 1)
                {
                    Console.Write(GenerateCode(x) + ",");

                }

            }
            catch (Exception err)
            {
                Console.WriteLine("error: " + err.Message);
            }

        Console.WriteLine("");
        Console.WriteLine("Press 'Enter' to continue...");
        Console.Read();
    }
} 
```

# reporting-services - 如何在 SSRS 2008 中使用字体作为表达式的一部分

> ID：10299902
> 
> 赞同：0
> 
> 时间：2012-04-24T14:21:09.050
> 
> 标签：reporting-services, ssrs-2008

我正在使用 SQL Server Reporting Services 2008 / Visual Studio 2008。

我在报告中显示了这个

```
Date between  «Expr» 
```

<> 在哪里

```
format(Parameters!StartDate.Value,"MM/dd/yy") & " and " & format(Parameters!EndDate.Value,"MM/dd/yy") 
```

我想以不同的字体/大小/颜色显示实际日期。或者不同字体/大小/颜色的“和”。

我怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:25:10.533

您将需要创建几个具有不同格式的文本框。无法通过 HTML 或任何其他标记对显示中的部分文本进行格式化。

**编辑**
请注意，在 SSRS 2012 中似乎可以使用 HTML：[http ://technet.microsoft.com/en-us/library/ff519562.aspx](http://technet.microsoft.com/en-us/library/ff519562.aspx)

# asp.net-mvc - 如何路由到 MVC4 中某个区域内的 API 控制器？

> ID：10299907
> 
> 赞同：4
> 
> 时间：2012-04-24T14:21:25.247
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api

> **可能重复：**
> [按区域划分的 MVC 4 WebAPI 控制器](https://stackoverflow.com/questions/9836030/mvc-4-webapi-controllers-splitted-by-areas)

这与这个问答有关：[如何创建 ASP.Net MVC Web API Url？](https://stackoverflow.com/a/9502480/8741)

我有一个全新的 MVC 项目，除了一个名为 Admin 的新区域外，所有内容仍由项目模板生成。在这个区域中，我有 ClientApiController 和 ClientController，并且在查看 Client/Index 时，我正在尝试我链接到的答案中描述的 URL，并带有额外的“区域”值。

```
@Url.RouteUrl("DefaultApi", new { httproute = "", area = "Admin", controller = "Client" }) 
```

但是，该区域部分不起作用，我仍然得到“找不到资源”。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T15:46:01.270

我想你应该有

```
@Url.RouteUrl("DefaultApi", new { httproute = "", area = "Admin", controller = "ClientApi" }) 
```

客户端接口

# php - pChart 输出图像的问题。怎么了？

> ID：10299911
> 
> 赞同：2
> 
> 时间：2012-04-24T14:21:35.727
> 
> 标签：php, pchart

我在我的 php 页面中显示 3DPie 示例 pChart 时遇到问题，无论输出 (Stroke()、autoOutput()、render()) 是什么，它都不会呈现给浏览器，但示例在示例中有效文件夹。

我的问题是：为什么它不会呈现给浏览器？我如何解决它？（它不是包含，它们适用于基本语法教程）

```
include("code libraries/pChart2.1.3/class/pDraw.class.php");
include("code libraries/pChart2.1.3/class/pImage.class.php");
include("code libraries/pChart2.1.3/class/pData.class.php");

 /* Create and populate the pData object */
 $MyData = new pData();   
 $MyData->addPoints(array(50,2,3,4,7,10,25,48,41,10),"ScoreA");  
 $MyData->setSerieDescription("ScoreA","Application A");

 /* Define the absissa serie */
 $MyData->addPoints(array("A0","B1","C2","D3","E4","F5","G6","H7","I8","J9"),"Labels");
 $MyData->setAbscissa("Labels");

 /* Create the pChart object */
 $myPicture = new pImage(300,260,$MyData);

 /* Draw a solid background */
 $Settings = array("R"=>170, "G"=>183, "B"=>87, "Dash"=>1, "DashR"=>190, "DashG"=>203, "DashB"=>107);
 $myPicture->drawFilledRectangle(0,0,300,300,$Settings);

 /* Overlay with a gradient */
 $Settings = array("StartR"=>219, "StartG"=>231, "StartB"=>139, "EndR"=>1, "EndG"=>138, "EndB"=>68, "Alpha"=>50);
 $myPicture->drawGradientArea(0,0,300,260,DIRECTION_VERTICAL,$Settings);
 $myPicture->drawGradientArea(0,0,300,20,DIRECTION_VERTICAL,array("StartR"=>0,"StartG"=>0,"StartB"=>0,"EndR"=>50,"EndG"=>50,"EndB"=>50,"Alpha"=>100));

 /* Add a border to the picture */
 $myPicture->drawRectangle(0,0,299,259,array("R"=>0,"G"=>0,"B"=>0));

 /* Write the picture title */ 
 $myPicture->setFontProperties(array("FontName"=>"code libraries/pChart2.1.3/fonts/Silkscreen.ttf","FontSize"=>6));
 $myPicture->drawText(10,13,"pPie - Draw 2D pie charts",array("R"=>255,"G"=>255,"B"=>255));

 /* Set the default font properties */ 
 $myPicture->setFontProperties(array("FontName"=>"code libraries/pChart2.1.3/fonts/Forgotte.ttf","FontSize"=>10,"R"=>80,"G"=>80,"B"=>80));

 /* Create the pPie object */ 
 $PieChart = new pPie($myPicture,$MyData);

 /* Draw an AA pie chart */ 
 $PieChart->draw3DPie(160,140,array("Radius"=>70,"DrawLabels"=>TRUE,"LabelStacked"=>TRUE,"Border"=>TRUE));

 /* Write the legend box */ 
 $myPicture->setShadow(FALSE);
 $PieChart->drawPieLegend(15,40,array("Alpha"=>20));

 /* Render the picture (choose the best way) */
 $myPicture->autoOutput("vgraph.png"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T16:24:45.903

## 可能的错误

A. 你没有包含`pPie.class.php`在你的脚本中

B. 可能的错误路径

C. 可能错误的字体位置

## 尝试

```
require("lib/pchart/class/pData.class.php");
require("lib/pchart/class/pDraw.class.php");
require("lib/pchart/class/pImage.class.php");
require("lib/pchart/class/pPie.class.php");

$font1 = "lib/pchart/fonts/pf_arma_five.ttf" ;
$font2 = "lib/pchart/fonts/pf_arma_five.ttf" ;

 $MyData = new pData();   
 $MyData->addPoints(array(50,2,3,4,7,10,25,48,41,10),"ScoreA");  
 $MyData->setSerieDescription("ScoreA","Application A");

 /* Define the absissa serie */
 $MyData->addPoints(array("A0","B1","C2","D3","E4","F5","G6","H7","I8","J9"),"Labels");
 $MyData->setAbscissa("Labels");

 /* Create the pChart object */
 $myPicture = new pImage(300,260,$MyData);

 /* Draw a solid background */
 $Settings = array("R"=>170, "G"=>183, "B"=>87, "Dash"=>1, "DashR"=>190, "DashG"=>203, "DashB"=>107);
 $myPicture->drawFilledRectangle(0,0,300,300,$Settings);

 /* Overlay with a gradient */
 $Settings = array("StartR"=>219, "StartG"=>231, "StartB"=>139, "EndR"=>1, "EndG"=>138, "EndB"=>68, "Alpha"=>50);
 $myPicture->drawGradientArea(0,0,300,260,DIRECTION_VERTICAL,$Settings);
 $myPicture->drawGradientArea(0,0,300,20,DIRECTION_VERTICAL,array("StartR"=>0,"StartG"=>0,"StartB"=>0,"EndR"=>50,"EndG"=>50,"EndB"=>50,"Alpha"=>100));

 /* Add a border to the picture */
 $myPicture->drawRectangle(0,0,299,259,array("R"=>0,"G"=>0,"B"=>0));

 /* Write the picture title */ 
 $myPicture->setFontProperties(array("FontName"=>$font1,"FontSize"=>6));
 $myPicture->drawText(10,13,"pPie - Draw 2D pie charts",array("R"=>255,"G"=>255,"B"=>255));

 /* Set the default font properties */ 
 $myPicture->setFontProperties(array("FontName"=>$font2,"FontSize"=>10,"R"=>80,"G"=>80,"B"=>80));

 /* Create the pPie object */ 
 $PieChart = new pPie($myPicture,$MyData);

 /* Draw an AA pie chart */ 
 $PieChart->draw3DPie(160,140,array("Radius"=>70,"DrawLabels"=>TRUE,"LabelStacked"=>TRUE,"Border"=>TRUE));

 /* Write the legend box */ 
 $myPicture->setShadow(FALSE);
 $PieChart->drawPieLegend(15,40,array("Alpha"=>20));

 /* Render the picture (choose the best way) */
 $myPicture->autoOutput("vgraph.png"); 
```

## 结果

![最终输出](../Images/87e7c00b0b522f88483deec673ae391e.png)

# php - 在插入执行时将数据复制到另一个字段

> ID：10299912
> 
> 赞同：0
> 
> 时间：2012-04-24T14:21:39.690
> 
> 标签：php, mysql, post, insert, copy

我需要将一个字段内的数据复制到另一个字段。插入记录时，我需要将“reg”复制到“reg_copy”。有没有办法在我的脚本中做到这一点？

```
<?
$order = "INSERT INTO reg_add ( 
connect_date, 
reg, 
reg_copy,
first_name, 
last_name)

VALUES

('$_POST[connect_date]', 
'$_POST[reg]',
'$_POST[reg_copy]',
'$_POST[first_name]', 
'$_POST[last_name]')";

$result = mysql_query($order);

if ($result) {

$reg =      $_REQUEST['reg'] ;
$first_name =   $_REQUEST['first_name'];

header("location: reg_add_success.php?reg=" . urlencode($reg) . "&first_name=" . urlencode($first_name));
}
else {
header("location: reg_add_fail.php");
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:25:02.417

你能做这个吗？

```
('$_POST[connect_date]', 
'$_POST[reg]',
'$_POST[reg]',
'$_POST[first_name]', 
'$_POST[last_name]')"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:33:21.803

是的，只需使用：

```
$order = "INSERT INTO reg_add set 
`connect_date` = '".mysql_real_escape_string($_POST[connect_date])."',
`reg` = '".mysql_real_escape_string($_POST[reg])."',
`reg_copy` = `reg`,
`first_name` = '".mysql_real_escape_string($_POST[first_name])."',
`last_name` = '".mysql_real_escape_string($_POST[last_name])."'; 
```

或者也许我理解你的问题是错误的？：/然后提供更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T14:51:07.417

也许你应该更清楚你的问题，我不是 100% 确定你的意思，但从阅读你的问题看起来你想要这样做：

```
<?
$order = "INSERT INTO reg_add ( 
connect_date, 
reg, 
reg_copy,
first_name, 
last_name
) VALUES ("
'".mysql_real_escape_string($_POST[connect_date])"', 
'".mysql_real_escape_string($_POST[reg])."',
'".mysql_real_escape_string($_POST[reg])."',
'".mysql_real_escape_string($_POST[first_name])."', 
'".mysql_real_escape_string($_POST[last_name])."'
")";

/* Always use mysql_real_escape_string on your POST and GET */

$result = mysql_query($order);

if ($result) {

$reg =      $_REQUEST['reg'] ;
$first_name =   $_REQUEST['first_name'];

header("location: reg_add_success.php?reg=" . urlencode($reg) . "&first_name=" .     urlencode($first_name));
}
else {
header("location: reg_add_fail.php");
}
?> 
```

# neo4j - 边缘迭代器返回错误的结果

> ID：10299915
> 
> 赞同：1
> 
> 时间：2012-04-24T14:21:52.153
> 
> 标签：neo4j, graph-databases, gremlin

我正在尝试使用图表中的特定边，但通过它的 id 引用它是行不通的。

我可以通过属性查询来抢占优势：

```
g.E.filter{it.TRANSACTION_ID =='15405'}
==> e[3042][1429-SOLD->11] 
```

当我检查这个边缘时，它是我感兴趣的那个。所以我尝试通过它的索引来指定它`3042`：

```
g.E[3042]
==> e[3335][1028-SOLD->2126] 
```

为什么控制台返回`3335`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T19:59:05.440

这不是问题。当您遍历所有边时，Neo4j 中的边不是按顺序排序的。我相信你想做的是：

```
g.e(3042) 
```

您正在做的是进行完整的“表扫描”。

# c++ - 如何为 OpenGL ES 重写 2D OpenGL 应用程序？

> ID：10299918
> 
> 赞同：9
> 
> 时间：2012-04-24T14:22:14.897
> 
> 标签：c++, c, opengl, opengl-es, sprite

我正在开发一个带有精灵图形的 OpenGL 2D 游戏。最近有人建议我应该使用 OpenGL ES 调用，因为它是 OpenGL 的一个子集，可以让我更轻松地将其移植到移动平台。大部分代码只是调用 draw_image 函数，它的定义如下：

```
void draw_img(float x, float y, float w, float h, GLuint tex,float r=1,float g=1, float b=1) {
    glColor3f(r,g,b);
    glEnable(GL_TEXTURE_2D);
    glBindTexture(GL_TEXTURE_2D, tex);
    glBegin(GL_QUADS);
        glTexCoord2f(0.0f, 0.0f);
        glVertex2f( x, y);
        glTexCoord2f(1.0f, 0.0f);
        glVertex2f(w+x, y);
        glTexCoord2f(1.0f, 1.0f);
        glVertex2f( w+x, h+y);
        glTexCoord2f(0.0f, 1.0f);
        glVertex2f( x, h+y);
    glEnd();
} 
```

我需要改变什么才能使这个 OpenGL ES 兼容？另外，我使用固定功能而不是着色器的原因是我在不支持 GLSL 的机器上进行开发。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-24T14:33:43.647

在 OpenGL ES 1.1 中，使用、`glVertexPointer()`和函数来绘制一个四边形。与您的 OpenGL 实现相比，您必须描述四边形所包含的结构（矢量、颜色、纹理坐标），而不仅仅是使用内置的,和方法。`glColorPointer()``glTexCoordPointer()``glDrawArrays()``glTexCoord2f``glVertex2f``glColor3f`

这是一些应该做你想做的事情的示例代码。（我已经使用了您在函数定义中使用的参数名称，因此从示例中移植您的代码应该很简单。）

首先，您需要为四边形的一个顶点定义一个结构。这将保存四边形顶点位置、颜色和纹理坐标。

```
// Define a simple 2D vector
typedef struct Vec2 {
    float x,y;
} Vec2;

// Define a simple 4-byte color
typedef struct Color4B {
    GLbyte r,g,b,a;
};

// Define a suitable quad vertex with a color and tex coords.
typedef struct QuadVertex {
    Vec2 vect;              // 8 bytes
    Color4B color;          // 4 bytes
    Vec2 texCoords;         // 8 bytes
} QuadVertex; 
```

然后，您应该定义一个结构来描述由四个顶点组成的整个四边形：

```
// Define a quad structure
typedef struct Quad {
    QuadVertex tl;
    QuadVertex bl;
    QuadVertex tr;
    QuadVertex br;
} Quad; 
```

现在，实例化您的四边形并分配四边形顶点信息（位置、颜色、纹理坐标）：

```
Quad quad;
quad.bl.vect = (Vec2){x,y};
quad.br.vect = (Vec2){w+x,y};
quad.tr.vect = (Vec2){w+x,h+y};
quad.tl.vect = (Vec2){x,h+y};
quad.tl.color = quad.tr.color = quad.bl.color = quad.br.color
              = (Color4B){r,g,b,255};
quad.tl.texCoords = (Vec2){0,0};
quad.tr.texCoords = (Vec2){1,0};
quad.br.texCoords = (Vec2){1,1};
quad.bl.texCoords = (Vec2){0,1}; 
```

现在告诉 OpenGL 如何绘制四边形。`gl...Pointer`为 OpenGL 提供顶点结构值的正确偏移量和大小的调用，以便以后可以使用该信息来绘制四边形。

```
// "Explain" the quad structure to OpenGL ES

#define kQuadSize sizeof(quad.bl)    
long offset = (long)&quad;

// vertex
int diff = offsetof(QuadVertex, vect);
glVertexPointer(2, GL_FLOAT, kQuadSize, (void*)(offset + diff));

// color
diff = offsetof(QuadVertex, color);
glColorPointer(4, GL_UNSIGNED_BYTE, kQuadSize, (void*)(offset + diff));

// texCoods
diff = offsetof(QuadVertex, texCoords);
glTexCoordPointer(2, GL_FLOAT, kQuadSize, (void*)(offset + diff)); 
```

最后，分配纹理并绘制四边形。`glDrawArrays`告诉 OpenGL 使用先前定义的偏移量以及对象中包含的值`Quad`来绘制由`4`顶点定义的形状。

```
glBindTexture(GL_TEXTURE_2D, tex);

// Draw the quad
glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);

glBindTexture(GL_TEXTURE_2D, 0); 
```

另请注意，如果您不需要着色器，则完全可以使用 OpenGL ES 1。ES1 和 ES2 之间的主要区别在于，在 ES2 中，没有固定的管道，因此您需要自己实现一个矩阵堆栈和着色器来进行基本渲染。如果您对固定管道提供的功能感到满意，只需使用 OpenGL ES 1。

# knockout.js - 在 KnockoutJS 中计算原型上的 observables 是否可行？

> ID：10299919
> 
> 赞同：6
> 
> 时间：2012-04-24T14:22:23.017
> 
> 标签：knockout.js, knockout-mapping-plugin

我有一系列从服务返回的项目。我试图为每个 Item 实例定义一个计算的 observable，所以我的直觉告诉我把它放在原型上。

计算 observable 的一种情况：系统计算点，但用户可以选择覆盖计算值。我需要保持计算值可用，以防用户删除覆盖。我还需要合并用户分配和计算的点，并将总数加起来。

我正在使用映射来执行以下操作：

```
var itemsViewModel;
var items = [
    { 'PointsCalculated' : 5.1 },
    { 'PointsCalculated' : 2.37, 'PointsFromUser' : 3 }
];

var mapping = {
    'Items' : {
        create : function(options) {
            return new Item(options.data);
        }
    }
};

var Item = function(data) {
    var item = this;
    ko.mapping.fromJS(data, mapping, item);
};

Item.prototype.Points = function () {
    var item = this;
    return ko.computed(function () {
        // PointsFromUser may be 0, so only ignore it if the value is undefined/null
        return (item.PointsFromUser != null) ? item.PointsFromUser : item.PointsCalculated;
    });
};

ko.mapping.fromJS(items, mapping, itemsViewModel); 
```

它现在的工作方式，我必须调用匿名函数来返回计算的 observable。这似乎为每个绑定创建了一个计算的 observable 的新实例，这违背了将其放在原型上的大部分要点。每次访问 observable 时都必须破译使用多少个括号，这有点烦人。

它也有些脆弱。如果我尝试在代码中访问 Points()，我不能这样做

```
var points = 0;
var p = item.Points;
if (p && typeof p === 'function') {
    points += p();
} 
```

因为这会将 Points() 的上下文更改为 DOMWindow，而不是 item。

如果我将计算结果放在映射中的 create() 中，我可以捕获上下文，但是每个对象实例上都有该方法的副本。

我找到了 Michael Best 的 Google Groups 帖子 ( [http://groups.google.com/group/knockoutjs/browse_thread/thread/8de9013fb7635b13](http://groups.google.com/group/knockoutjs/browse_thread/thread/8de9013fb7635b13) )。原型在“激活”时返回一个新的计算 observable。我还没有弄清楚什么叫做“激活”（也许是 Objs？），但我猜它仍然会每个对象发生一次，而且我不知道“这个”会得到什么范围。

在这一点上，我相信我已经超越了已发布文档中可用的内容，但我仍在努力从源头上破译正在发生的事情。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T00:56:11.773

你提到你不想在`ko.computed`你的 javascript 类的每个实例上都有一个函数的实例，但是，这不会真正适用于 ko 的功能是如何构建的。当您使用`ko.computed`或`ko.observable`他们创建指向私有变量的特定内存指针时，您通常不希望在类实例之间共享（尽管在极少数情况下您可能会这样做）。

我做这样的事情：

```
var Base = function(){
    var extenders = [];

    this.extend = function(extender){
        extenders.push(extender);
    };

    this.init = function(){
        var self = this; // capture the class that inherits off of the 'Base' class

        ko.utils.arrayForEach(extenders, function(extender){

             // call each extender with the correct context to ensure all
             // inheriting classes have the same functionality added by the extender
             extender.call( self );
        });
    };
};

var MyInheritedClass = function(){
    // whatever functionality you need

   this.init(); // make sure this gets called
};

// add the custom base class
MyInheritedClass.prototype = new Base(); 
```

然后对于计算出的 observables（必须是你的每个实例上的实例函数`MyInheritedClass`），我只需像这样声明它们`extender`：

```
MyInheritedClass.prototype.extend(function(){

     // custom functionality that i want for each class 
     this.something = ko.computed(function() {
         return 'test';
     });
}); 
```

鉴于您的示例和`Base`上面定义的类，您可以轻松地执行以下操作：

```
var Item = function(data) {
    var item = this;

    ko.mapping.fromJS(data, mapping, item);

    this.init(); // make sure this gets called
};
Item.prototype = new Base();

Item.prototype.extend(function () {
    var self = this;

    this.Points = ko.computed(function () {

        // PointsFromUser may be 0, so only ignore it if the value is undefined/null
        return (self.PointsFromUser != null) ? 
               self.PointsFromUser : self.PointsCalculated;
    });
}; 
```

然后你的类的所有实例`Item`都会有一个`Points`属性，它会正确处理`ko.computed`每个实例的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-13T13:58:31.437

```
Item.prototype.Points = function () {
var item = this;
return ko.computed(function () {
    // PointsFromUser may be 0, so only ignore it if the value is undefined/null
    return (item.PointsFromUser != null) ? item.PointsFromUser : item.PointsCalculated;
}); 
```

};

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-13T14:06:12.850

```
Item.prototype.extend(function () {
var scope = this
this.Points = ko.computed(function () {
    return (this.PointsFromUser != null) ? 
           this.PointsFromUser : this.PointsCalculated;
}, scope);
}; 
```

# c++ - 编辑控件中的可点击链接

> ID：10299924
> 
> 赞同：1
> 
> 时间：2012-04-24T14:22:37.347
> 
> 标签：c++, windows, api, winapi

我正在寻找一种在我的多行编辑控件中具有可点击链接的不是非常困难的方法。

Rich Edit 控件是否具有此功能？

还是我必须编写自己的控件？如果我这样做了，最简单的方法是点击测试文本吗？或者创建子 syslink32 控件并相应地移动它们的位置。（示例代码将不胜感激。）

我也愿意用替代品完全替换编辑控件，只要它不需要太多不需要的功能。（我不需要整个 html 查看器）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:38:47.313

本机编辑控件不支持此功能。但是，RichEdit 控件可以使用 RTF 链接或自动检测到文本中的链接。

# javascript - JQuery 自动完成 GET 和 JSON 数组数据安全问题

> ID：10299925
> 
> 赞同：1
> 
> 时间：2012-04-24T14:22:40.407
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-3, jquery

我正在用 MVC3 书学习 JQuery。我发现Json数据确实好用，但可能不安全。

考虑一下这种情况，比如说，我有一个带有敏感客户信息的 CRM。Ajax 返回 Json 数组作为搜索结果。搜索文本框 ajax 自动完成功能还从数据库返回敏感关键字的 Json 数组。等等......他们都使用GET方法。

但是，据说 GET 方法在传递 Json 数组数据时存在漏洞：

[http://haacked.com/archive/2009/06/25/json-hijacking.aspx](http://haacked.com/archive/2009/06/25/json-hijacking.aspx)

[http://haacked.com/archive/2008/11/20/anatomy-of-a-subtle-json-vulnerability.aspx](http://haacked.com/archive/2008/11/20/anatomy-of-a-subtle-json-vulnerability.aspx)

你们那里的 JQuery 专家如何解决这个问题？请帮忙。

- - 编辑： - -

@格伦。惊人的。谢谢你。根据您的提示，这就是我想出的。

1.  正常的自动完成返回 json 数组
2.  和一个带有包裹数组的 json 对象的 mod

这是代码，假设我们在 controller.cs 中有一个名为 txtlst 的全局列表...

```
 // normal one
    public JsonResult AutoCompleteHelper1(string term) {
        //if (!Request.IsAjaxRequest()) return null;
        var lst = txtlst.Where(s => s.StartsWith(term)).ToList();
        var res = lst.Select(x => new { value = x }).ToList();
        return Json(res, JsonRequestBehavior.AllowGet);
    }
    //mod one
    public JsonResult AutoCompleteHelper2(string term) {
        //if (!Request.IsAjaxRequest()) return null;
        var lst = txtlst.Where(s => s.StartsWith(term)).ToList();
        var res = lst.Select(x => new { value = x }).ToList();
        return Json(new { wrapper= res, name="wrapper" }, JsonRequestBehavior.AllowGet);
    }
} 
```

然后在 .cshtml 文件中...

```
<p>Auto Complete Example</p>
<input type="text" name="q" id="MyInput1" data-autocomplete-source="@Url.Action("AutoCompleteHelper1", "Home")"/>
<input type="text" name="q" id="MyInput2" data-autocomplete-source="@Url.Action("AutoCompleteHelper2", "Home")" /> 
```

然后在 .js 文件中...

```
$(document).ready(function () {

    // normal autocomplete
    $("#MyInput1").autocomplete({ source: $("#MyInput1").attr("data-autocomplete-source") });

    // mod autocomplete with a wrap
    $("#MyInput2").autocomplete({
        source: function (req, add) {
            $.getJSON($("#MyInput2").attr("data-autocomplete-source"), req, function (data) {
                var suggestions = [];
                $.each(data.wrapper, function (i, o) {
                    suggestions.push(o.value);
                });
                add(suggestions);
            });
        }
    });
}); 
```

--- 编辑 2： ---

> 请忽略那些告诉我使用 POST 的评论。他们没有阅读博客链接或不理解问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T14:28:13.433

Ajax/JSONP/JSON 调用的安全性与 http 调用的安全性完全相同，因为 Ajax 请求是 http 请求。你处理它的方式没有任何改变。您确保用户已登录并且可以访问信息。

如果您担心数据被缓存，请使用 Post 或在后端设置适当的无缓存标头。

编辑：

*   你可以做的事情是防止 JOSN 被读取是无限循环技巧。在调用前添加一个无限循环，这意味着您的 Ajax 调用必须在使用它之前去掉它。
*   您可以使用密钥，第三方站点将没有验证请求所需的密钥。
*   您可以查看推荐人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T15:09:33.813

另一种选择是将 JSON 数组包装在 JSON 对象中。里面的文章和评论回答了这个问题。

编辑：来自文章：

> 这是一个 JSON 数组这一事实很重要。事实证明，包含 JSON 数组的脚本是有效的 JavaScript 脚本，因此可以执行。仅包含 JSON 对象的脚本不是有效的 JavaScript 文件。

如果将 json 数组包装在对象 {"myJsonArray":[{"name":"sensitive"},{"name":"data"}]} 中，则 HTML 脚本标签将无法执行。

# php - php蛋糕发帖请求

> ID：10299936
> 
> 赞同：0
> 
> 时间：2012-04-24T14:23:02.963
> 
> 标签：php, web-services, cakephp, rest

我正在使用 PHP Cake 开发宁静的服务。我已经开发了所有获取服务。但我被困在邮政服务中。

问题是，我无法获取发布数据。我注意到 $this->data

**这是一个控制器功能的代码。**

```
function signin() {

    $this->view = 'Webservice.Webservice';
    $message = "Request Received";
    if (!empty($this->data)) {
        $message = "Request has data";
    }

     $this->set(compact('message'));
} 
```

**这是我的请求数据**

```
POST http://localhost/blog/posts/signin HTTP/1.1
User-Agent: Fiddler
Host: localhost
Content-Length: 25

username=abc&password=abc 
```

请帮帮我。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:25:44.870

Cake 仅通过发送到 PHP 的以“数据”为前缀的数据填充请求数据数组。

像这样发布您的用户名和密码，而不是：

```
data[username]=abc&data[password]=abc 
```

这会告诉 Cake 把它放在`$this->request->data`.

# php - 我可以让 SQL 查询在每一行上进行两次匹配吗？

> ID：10299938
> 
> 赞同：6
> 
> 时间：2012-04-24T14:23:10.407
> 
> 标签：php, mysql, sql, pdo

我有一个不寻常的 SQL 表（不是我的），其中包含以下字段（以及其他字段）： `last_name, primary_name, secondary_name`，表示已婚夫妇。假定姓氏是共享的（我知道这不是很现代），如果不是一对，那么`primary_name`or`secondary_name`可能是 NULL。（该表也有几个重复项。）

我想要做的是获取数据库中所有名称（“first last”）的列表，以通常的方式按字母顺序排列。现在我正在使用 PHP 和 PDO 对数据库进行两次传递：

```
$qstr = "SELECT DISTINCT primary_name, last_name 
            FROM members 
            WHERE primary_name IS NOT null
            ORDER BY last_name, primary_name";
$sth = $dbh->prepare($qstr);
$sth->execute();
// output the results

$qstr = "SELECT DISTINCT secondary_name, last_name 
            FROM members 
            WHERE secondary_name IS NOT null
            ORDER BY last_name, secondary_name";
$sth = $dbh->prepare($qstr);
$sth->execute();
// output the new results 
```

但最终结果没有按字母顺序排列，因为第二遍重新开始。

我怎样才能一次得到所有的名字，完全按字母顺序排列？有没有办法在 SQL 中做到这一点，或者我是否需要构建两个数组并在 PHP 中重新对它们进行字母排序？

**编辑** 数据库看起来像这样：

```
last_name  primary_name   secondary_name
----------------------------------------
Abrams     Joe            Susan
Miller     Sam            Abby 
```

所需的输出将是这样的：

```
["Joe Abrams","Susan Abrams","Abby Miller","Sam Miller"] 
```

相反，如果第一遍得到所有丈夫，第二遍得到所有妻子，我会得到这样的结果：

```
["Joe Abrams","Sam Miller","Susan Abrams","Abby Miller"] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T14:26:48.927

如果我理解正确，我认为您正在寻找这样的东西：

```
select distinct coalesce(primary_name, secondary_name) as pri_sec_name,
    last_name
from members
where coalesce(primary_name, secondary_name) is not null
order by last_name,
    coalesce(primary_name, secondary_name) 
```

**更新**

听起来在某些情况下，您有一行用于 last_name，其中同时填充了 primary_name 和 secondary_name。下面的查询应该给你你想要的输出（对不起，这次没有 COALESCE）：

```
select last_name, pri_sec_name
from (
    select primary_name as pri_sec_name, last_name from members where primary_name is not null
    union all
    select secondary_name as pri_sec_name, last_name from members where secondary_name is not null
) a 
order by last_name, pri_sec_name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T14:45:32.213

另一种方法是使用 UNION ...

```
SELECT
  *
FROM
(
  SELECT primary_name AS pri_sec_name, last_name 
    FROM members 
   WHERE primary_name IS NOT null

  UNION

  SELECT secondary_name AS pri_sec_name, last_name 
    FROM members 
   WHERE secondary_name IS NOT null
)
  AS data
ORDER BY
  last_name, pri_sec_name 
```

***注意：（*** `UNION` *相对于`UNION ALL`）*将对结果进行重复数据删除。

另一种是对映射表进行连接。

```
SELECT
  members.last_name,
  CASE WHEN map.mode = 1 THEN members.primary_name ELSE members.secondary_name END AS pri_sec_name
FROM
  members
INNER JOIN
  (SELECT 1 as mode UNION ALL SELECT 2 as mode) AS map
    ON (map.mode = 1 AND members.primary_name   IS NOT NULL)
    OR (map.mode = 2 AND members.secondary_name IS NOT NULL)
ORDER BY
  1,
  2 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T14:46:02.807

我认为你需要：

```
SELECT primary_name AS name
     , last_name 
  FROM members 
  WHERE primary_name IS NOT NULL
UNION 
SELECT secondary_name
     , last_name 
  FROM members 
  WHERE secondary_name IS NOT NULL
ORDER BY last_name, name 
```

另一个重写是使用`UNION ALL`：

```
SELECT COALESCE(primary_name, secondary_name) AS name
     , last_name 
  FROM members 
UNION ALL
SELECT secondary_name
     , last_name 
  FROM members 
  WHERE primary_name IS NOT NULL
    AND secondary_name IS NOT NULL
ORDER BY last_name, name 
```

第二个版本可能更快，但它可能会显示重复的结果。如果有更多的例子，你有这些行，一个`Joe Jackson`结婚了`Susan`，一个结婚了`Lea`：

```
last_name  primary_name   secondary_name
----------------------------------------
Jackson    Joe            Susan
Jackson    Joe            Lea 
```

第一个查询应该显示：

```
name   last_name
-----------------
Joe    Jackson 
Lea    Jackson 
Susan  Jackson 
```

而第二个会有“重复”：

```
name   last_name
-----------------
Joe    Jackson 
Joe    Jackson 
Lea    Jackson 
Susan  Jackson 
```

哪个更合适，取决于您的规格。

# android - 活动未启动

> ID：10299947
> 
> 赞同：0
> 
> 时间：2012-04-24T14:23:45.243
> 
> 标签：android, database, android-activity

```
public class workmemo extends Activity{

   EditText editTextWorkmemo1;
   EditText editTextWorkmemo2;
   String q1;
   String q2;

   Button ButtonWorkMemo1 ;
   WorkmemoDatabaseHelper dbh2 = new WorkmemoDatabaseHelper(workmemo.this);

   public void onCreate(Bundle savedInstanceState) {

      super.onCreate(savedInstanceState);
      setContentView(R.layout.workmemo);

      q1=editTextWorkmemo1.getText().toString();

      String currentDateTimeString = DateFormat.getDateTimeInstance().format(
                                                                   new Date());
      editTextWorkmemo2=(EditText)findViewById(R.id.editTextWorkmemo2);
      editTextWorkmemo2.setText(currentDateTimeString);
      q2=currentDateTimeString;

      ButtonWorkMemo1 = (Button) findViewById(R.id.ButtonWorkMemo1);
      ButtonWorkMemo1.setOnClickListener(new clicker());

   }

   class clicker implements Button.OnClickListener{
      public void onClick(View v) {                        
         if(v== ButtonWorkMemo1) {
            //addEvent(q1,q2);
            Intent viewDataIntent = new Intent(workmemo.this, Database.class);
            startActivity(viewDataIntent);
         }
      }
   }

    public void addEvent ( String q1,String q) {
       SQLiteDatabase db = dbh2.getWritableDatabase();
       ContentValues values = new ContentValues();

       values.put(WorkmemoDatabaseHelper.memo, q1);
       values.put(WorkmemoDatabaseHelper.date, q2);

       db.insert(WorkmemoDatabaseHelper.TABLE_NAME, null, values);      
    }
} 
```

您好，我正在尝试启动一个活动，当 android 尝试启动上述活动（workmemo）时，它失败了。这是我的错误日志。有任何想法吗？

```
04-24 12:46:06.955: W/dalvikvm(548): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
04-24 12:46:06.984: E/AndroidRuntime(548): FATAL EXCEPTION: main
04-24 12:46:06.984: E/AndroidRuntime(548): java.lang.RuntimeException: Unable to start activity ComponentInfo{nidhin.organizer/nidhin.organizer.workmemo}: java.lang.NullPointerException
04-24 12:46:06.984: E/AndroidRuntime(548):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
04-24 12:46:06.984: E/AndroidRuntime(548):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
04-24 12:46:06.984: E/AndroidRuntime(548):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
04-24 12:46:06.984: E/AndroidRuntime(548):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
04-24 12:46:06.984: E/AndroidRuntime(548):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-24 12:46:06.984: E/AndroidRuntime(548):  at android.os.Looper.loop(Looper.java:137)
04-24 12:46:06.984: E/AndroidRuntime(548):  at android.app.ActivityThread.main(ActivityThread.java:4424)
04-24 12:46:06.984: E/AndroidRuntime(548):  at java.lang.reflect.Method.invokeNative(Native Method)
04-24 12:46:06.984: E/AndroidRuntime(548):  at java.lang.reflect.Method.invoke(Method.java:511)
04-24 12:46:06.984: E/AndroidRuntime(548):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-24 12:46:06.984: E/AndroidRuntime(548):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-24 12:46:06.984: E/AndroidRuntime(548):  at dalvik.system.NativeStart.main(Native Method)
04-24 12:46:06.984: E/AndroidRuntime(548): Caused by: java.lang.NullPointerException
04-24 12:46:06.984: E/AndroidRuntime(548):  at nidhin.organizer.workmemo.onCreate(workmemo.java:32)
04-24 12:46:06.984: E/AndroidRuntime(548):  at android.app.Activity.performCreate(Activity.java:4465)
04-24 12:46:06.984: E/AndroidRuntime(548):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-24 12:46:06.984: E/AndroidRuntime(548):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
04-24 12:46:06.984: E/AndroidRuntime(548):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T14:28:50.683

您的变量`editTextWorkmemo1`未初始化，但您`getText()`在第 32 行调用它。这会导致`NullPointerException`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T14:27:21.960

我认为您之前忘记指定 editTextWorkmemo1`q1=editTextWorkmemo1.getText().toString();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T14:30:35.097

`editTextWorkmemo1`是空的。我的意思是 uninitialized.give 来自 xml 布局的引用，例如

> EditText editTextWorkmemo1=(EditText)findViewByid(R.id.YOURIDINXML);

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T14:39:25.373

您的问题已经得到解答，我只是告诉您如何在查看错误日志时找出发生了什么。

从最后开始寻找“Caused by”短语。在那里你会发现一个异常，它实际上导致了你的崩溃。在下面的行中搜索您的包，并在该行末尾的括号中，您将看到抛出异常的类（以及代码中的行号）。

它适用于这些简单、常见的错误。希望它可以帮助您在将来解决这些问题。

# youtube - 如何从 youtube 缩短链接中获取缩略图

> ID：10299949
> 
> 赞同：0
> 
> 时间：2012-04-24T14:23:47.683
> 
> 标签：youtube, youtube-api

我正在使用我在下面找到的代码从提交的 url 中获取 youtube 视频的缩略图 url。唯一的问题是，如果有人使用视频网址的缩短版本（如`http://youtube.be/HMYMSvlow_k`. 如何修改此代码以便它处理 youtube.be 版本以及其他更长的链接？

```
function get_youtube_screen_link( $url = '', $type = 'default', $echo = true ) {
if( empty( $url ) )
    return false;

if( !isset( $type ) )
    $type = '';

$url = esc_url( $url );

preg_match("|[\\?&]v=([^&#]*)|",$url,$vid_id);

if( !isset( $vid_id[1] ) )
    return false;

$img_server_num =  'i'. rand(1,4);

switch( $type ) {
    case 'large':
        $img_link = "http://{$img_server_num}.ytimg.com/vi/{$vid_id[1]}/0.jpg";
        break;
    case 'first':
        // Thumbnail of the first frame
        $img_link = "http://{$img_server_num}.ytimg.com/vi/{$vid_id[1]}/1.jpg";
        break;
    case 'small':
        // Thumbnail of a later frame(i'm not sure how they determine this)
        $img_link = "http://{$img_server_num}.ytimg.com/vi/{$vid_id[1]}/2.jpg";
        break;
    case 'default':
    case '':
    default:
        $img_link = "http://{$img_server_num}.ytimg.com/vi/{$vid_id[1]}/default.jpg";
        break;
}
if( $echo )
    echo $img_link;
else
    return $img_link;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T23:02:07.307

```
function getVideoId($url)
{
$parsedUrl = parse_url($url);
 if ($parsedUrl === false)
return false;

 if (!empty($parsedUrl['query']))
{
$query = array();
parse_str($parsedUrl['query'], $query);
if (!empty($query['v']))
    return $query['v'];
}

if (strtolower($parsedUrl['host']) == 'youtu.be')
return trim($parsedUrl['path'], '/');

return false;
}

$vid_id = getVideoId($video_code);
http://i3.ytimg.com/vi/<?php echo $vid_id; ?>/default.jpg 
```

# xquery - 如何使用 cts:search 获取所有结果？

> ID：10299950
> 
> 赞同：0
> 
> 时间：2012-04-24T14:23:52.323
> 
> 标签：xquery, marklogic

我正在使用 cts:search 像这样：-

```
let $query :=
         cts:or-query((
            cts:field-word-query(
              "Assignor Name", $assignorName
            ), 
            cts:field-word-query(
              "Assignee Name", $assigneeName
            )
        )) 
for $patent in cts:search(fn:doc(), $query)[1 to 10]
return $patent 
```

其中 $assignorName 和 $assigneeName 是来自用户的输入。但是当 $assignorName 和 $assigneeName 都是空字符串时，它不会显示任何结果。当用户没有输入任何输入时，我想显示所有结果。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T18:54:08.917

更明确地说，您可以编写如下查询：

```
 cts:or-query((
        if (not($assignorName)) then () else cts:field-word-query(
          "Assignor Name", $assignorName), 
        if (not($assigneeName)) then () else cts:field-word-query(
          "Assignee Name", $assigneeName) )) 
```

您需要一段时间才能习惯`if-then-else`几乎可以将表达式放在任何地方的想法。有时将其视为三元逻辑会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T14:41:16.090

要获得所有结果，您必须将当前替换`$query`为`cts:and-query(())`. 顺便说一句， A`cts:or-query(())`也可以工作。

！

# iframe - 我的 Facebook iframe 应用在底部被截断

> ID：10299957
> 
> 赞同：1
> 
> 时间：2012-04-24T14:24:17.410
> 
> 标签：iframe, facebook-apps

在新的 Facebook 时间线之前，我的应用程序将在底部被切断。我使用以下代码解决了这个问题并且它有效。

> window.fbAsyncInit = function() {
> FB.Canvas.setAutoResize(); }; (function() { var e = document.createElement('script'); e.async = true; e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
> 文档.getElementById('fb-root').appendChild(e); }());

现在，问题又回来了，我很茫然。我尝试了该论坛中解释的几种技术（autogrow、setsize），但似乎无法使其正常工作。我会很感激你能朝我的方向扔的任何骨头。我主要使用 Chrome 和 Firefox。

链接到我的应用程序：http: [//www.facebook.com/NACoDC/app_136524766420341](http://www.facebook.com/NACoDC/app_136524766420341)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:54:32.747

我现在可以使用以下方法执行此操作两次：

将此添加到您的 html 文档的标题中：

```
<div id="fb-root"></div>
        <script src="http://connect.facebook.net/en_US/all.js" type="text/javascript"></script> 
```

在正文上方输入此代码关闭

```
 <script type="text/javascript">
    window.fbAsyncInit = function() {
    FB.Canvas.setAutoResize( 100 );
    }
    // Do things that will sometimes call sizeChangeCallback()
    function sizeChangeCallback() {
    FB.Canvas.setSize({ width: 520, height: 2400 });
    }
    </script> 
```

在您的应用设置 => 高级中，将画布高度设置为固定 800 像素。

这对我有用。

# arrays - 在 Perl 中，如何生成列表的所有可能组合？

> ID：10299961
> 
> 赞同：18
> 
> 时间：2012-04-24T14:24:29.530
> 
> 标签：arrays, perl, combinations, combinatorics

我有一个带有列表的文件，并且需要制作一个将每一行与另一行进行比较的文件。例如，我的文件有这个：

```
AAA  
BBB  
CCC  
DDD  
电子电气设备
```

我希望最终列表看起来像这样：

```
AAA BBB  
AAA CCC  
AAA DDD  
AAA 电子电气设备  
BBB CCC  
BBB DDD  
BBB 电子电气设备  
CCC DDD  
CCC 电子电气设备  
DDD 电子电气设备
```

我第一次尝试在 Perl 中执行此操作，但遇到了一些麻烦。我知道你需要制作一个数组，然后拆分它，但在那之后我遇到了一些麻烦。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-24T14:48:22.723

使用[算法::组合](https://metacpan.org/pod/Algorithm::Combinatorics)。基于迭代器的方法比一次生成所有内容更可取。

```
#!/usr/bin/env perl

use strict; use warnings;
use Algorithm::Combinatorics qw(combinations);

my $strings = [qw(AAA BBB CCC DDD EEE)];

my $iter = combinations($strings, 2);

while (my $c = $iter->next) {
    print "@$c\n";
} 
```

输出：

```
AAA BBB
AAA CCC
AAA DDD
AAA 电子电气设备
BBB CCC
BBB DDD
BBB 电子电气设备
CCC DDD
CCC 电子电气设备
DDD 电子电气设备
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-24T16:20:30.910

使用递归来写这个很简单。

此代码示例演示。

```
use strict;
use warnings;

my $strings = [qw(AAA BBB CCC DDD EEE)];

sub combine;

print "@$_\n" for combine $strings, 5;

sub combine {

  my ($list, $n) = @_;
  die "Insufficient list members" if $n > @$list;

  return map [$_], @$list if $n <= 1;

  my @comb;

  for my $i (0 .. $#$list) {
    my @rest = @$list;
    my $val  = splice @rest, $i, 1;
    push @comb, [$val, @$_] for combine \@rest, $n-1;
  }

  return @comb;
} 
```

* * *

**编辑**

抱歉-我正在生成排列而不是*组合*。

这段代码是正确的。

```
use strict;
use warnings;

my $strings = [qw(AAA BBB CCC DDD EEE)];

sub combine;

print "@$_\n" for combine $strings, 2;

sub combine {

  my ($list, $n) = @_;
  die "Insufficient list members" if $n > @$list;

  return map [$_], @$list if $n <= 1;

  my @comb;

  for (my $i = 0; $i+$n <= @$list; ++$i) {
    my $val  = $list->[$i];
    my @rest = @$list[$i+1..$#$list];
    push @comb, [$val, @$_] for combine \@rest, $n-1;
  }

  return @comb;
} 
```

**输出**

```
AAA BBB
AAA CCC
AAA DDD
AAA EEE
BBB CCC
BBB DDD
BBB EEE
CCC DDD
CCC EEE
DDD EEE 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-24T14:33:36.017

看看[Math::Combinatorics](http://search.cpan.org/~allenday/Math-Combinatorics-0.09/lib/Math/Combinatorics.pm) - 在列表上执行组合和排列

从 CPAN 复制的示例：

```
use Math::Combinatorics;

  my @n = qw(a b c);
  my $combinat = Math::Combinatorics->new(count => 2,
                                          data => [@n],
                                         );

  print "combinations of 2 from: ".join(" ",@n)."\n";
  print "------------------------".("--" x scalar(@n))."\n";
  while(my @combo = $combinat->next_combination){
    print join(' ', @combo)."\n";
  }

  print "\n";

  print "permutations of 3 from: ".join(" ",@n)."\n";
  print "------------------------".("--" x scalar(@n))."\n";
  while(my @permu = $combinat->next_permutation){
    print join(' ', @permu)."\n";
  }

  output:
combinations of 2 from: a b c
  ------------------------------
  a b
  a c
  b c

  permutations of 3 from: a b c
  ------------------------------
  a b c
  a c b
  b a c
  b c a
  c a b
  c b a 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T15:08:12.333

这是一个黑客使用[`glob`](https://perldoc.perl.org/functions/glob.html)：

```
my @list = qw(AAA BBB CCC DDD EEE);

for my $i (0..$#list-1) {
    print join "\n", glob sprintf "{'$list[$i] '}{%s}",
          join ",", @list[$i+1..$#list];
    print "\n";
} 
```

输出：

```
AAA BBB
AAA CCC
AAA DDD
AAA EEE
BBB CCC
BBB DDD
BBB EEE
CCC DDD
CCC EEE
DDD EEE 
```

PS 您可能想要使用[`Text::Glob::Expand`](https://metacpan.org/pod/Text::Glob::Expand)or [`String::Glob::Permute`](https://metacpan.org/pod/String::Glob::Permute)modules 而不是 plain`glob()`以避免在当前工作目录中匹配文件的警告。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-12-06T03:52:18.147

我对以下 Perl 模块进行了基准测试：

1.  [数学::组合](http://search.cpan.org/~allenday/Math-Combinatorics-0.09/lib/Math/Combinatorics.pm)
2.  [算法::组合学](https://metacpan.org/pod/Algorithm::Combinatorics)
3.  [商业银行](https://github.com/FrauBSD/pkgcenter/tree/master/depend/libcmb)

基准测试包括执行 OP 要求的操作，组合 2 个项目，但将单词集增加到 10,000 个，而不是最初请求的 5 个（AAA BBB CCC DDD EEE）。

## Math::Combinatorics 的测试脚本

```
#!/usr/bin/env perl
use strict; use warnings;
use Math::Combinatorics;
my $strings = [qw(AAA BBB CCC DDD EEE) x 2000];
my $iter = new Math::Combinatorics (count => 2, data => $strings);
while (my @c = $iter->next_combination) {
    print "@c\n";
} 
```

这每秒产生约 53,479 个组合。

## Algorithm::Combinatorics 的测试脚本

```
#!/usr/bin/env perl
use strict; use warnings;
use Algorithm::Combinatorics qw(combinations);
my $strings = [qw(AAA BBB CCC DDD EEE) x 2000];
my $iter = combinations($strings, 2);
while (my $c = $iter->next) {
    print "@$c\n";
} 
```

这每秒产生约 861,982 个组合。

## Cmb 的测试脚本

```
#!/usr/bin/env perl
use strict; use warnings;
use Cmb;
my $strings = [qw(AAA BBB CCC DDD EEE) x 2000];
my $cmb = new Cmb { size_min => 2, size_max => 2 };
$cmb->cmb_callback($#$strings + 1, $strings, sub {
    print "@_\n";
    return 0;
}); 
```

这每秒产生约 2,940,882 个组合。

但如果你只需要打印组合，Cmb 实际上可以比上面更快地完成。

```
#!/usr/bin/env perl
use strict; use warnings;
use Cmb;
my $strings = [qw(AAA BBB CCC DDD EEE) x 2000];
my $cmb = new Cmb { size_min => 2, size_max => 2 };
$cmb->cmb($#$strings + 1, $strings); 
```

这每秒产生约 3,333,000 个组合。

基准测试是在 CentOS Linux 版本 7.7.1908 (Core) 上使用[dpv](https://github.com/FrauBSD/pkgcenter/tree/master/depend/dpv)在内核 3.10.0-1062.1.1.el7.x86_64 x86_64 上使用 Perl 5.16.3 在 Intel(R) Xeon(R) CPU E5-2699 v4 @ 上执行的2.20GHz

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-24T14:32:36.740

1.  取第一个字符串
2.  从下一个位置迭代数组到结束
    1.  将下一个字符串附加到原始字符串
3.  取下一个字符串并返回步骤 2

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-24T14:34:40.217

怎么样：

```
#!/usr/bin/perl
use strict;
use warnings;
use Data::Dump qw(dump);

my @in = qw(AAA BBB CCC DDD EEE);
my @list;
while(my $first = shift @in) {
    last unless @in;
    my $rest = join',',@in;
    push @list, glob("{$first}{$rest}");
}
dump @list; 
```

**输出：**

```
(
  "AAABBB",
  "AAACCC",
  "AAADDD",
  "AAAEEE",
  "BBBCCC",
  "BBBDDD",
  "BBBEEE",
  "CCCDDD",
  "CCCEEE",
  "DDDEEE",
) 
```

# git - 使用 git hook，我如何强制或检查用户身份？

> ID：10299966
> 
> 赞同：1
> 
> 时间：2012-04-24T14:24:45.350
> 
> 标签：git, githooks, gitolite

我正在尝试设置 gitolite 服务器。我在 git 中发现令人讨厌的一个问题是提交代码时未检查用户名。

这可能导致“身份网络钓鱼”，其中 user1 可以提交一些虚假代码并将 user2 设置为用户名。然后我们将责怪user2。

我正在寻找一种方法来检查或强制用户名与提交者的身份一致。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T16:42:42.840

您可以使用以下方式签署您的提交：（`git commit -S`仅从 git 1.7.9 开始可用）

然后，您可以使用服务器端 git 挂钩来拒绝任何未签名的提交。

资料来源： http: [//phreaknerd.wordpress.com/2012/02/09/signing-git-commits-with-your-gpg-key/](http://phreaknerd.wordpress.com/2012/02/09/signing-git-commits-with-your-gpg-key/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T21:58:46.240

使用 git 挂钩，您可以获得更新的 ref。您可以检查被推送的整个提交树，从而获取提交者名称和电子邮件（尽管如果它没有签名，您将永远无法确定）。

Gitolite 使用 env 变量来存储各种信息，您可以使用它们来获取连接的人的姓名，并进行验证。

# git - git：合并后更新 2 分支

> ID：10299969
> 
> 赞同：1
> 
> 时间：2012-04-24T14:24:54.990
> 
> 标签：git

这是一个新手问题。我有 2 个分支，**branch_A**和**branch_B**。我在分支 A 并与此命令进行合并：

```
git checkout branch_A
git merge --commit -m "my commit" branch_B 
```

如果没有冲突，它会自动进行合并并将 branch_A 更新为新的提交。但是 branch_B 仍然在同一个地方。

如何更新 branch_B 以指向与 branch_A 相同的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:35:07.157

这有点不寻常，因为大多数时候您不需要合并的分支。所以问问自己这是否真的是你想要的。

如果是，最简单的解决方案是`branch_B`与`branch_A`. 它不会创建合并提交，因为它可以快速转发，但它会指向与`branch_A`. 命令是：

```
git checkout branch_B
git merge branch_A 
```

# .net - 使用带有 WiX 和 Visual Studio 2010 的 .net 3.5 的引导程序

> ID：10299972
> 
> 赞同：0
> 
> 时间：2012-04-24T14:25:04.740
> 
> 标签：.net, visual-studio-2010, wix

我正在使用 Visual Studio 2010 创建一个 WiX 项目。我想为我的软件安装 .net 3.5，为 WiX 安装 .net 4.0。我使用了 VS2010 提供的引导程序。它适用于 4.0 版本，但我对 3.5 版本有问题。以下是我的代码中的一些行：

```
<BootstrapperFile Include=".NETFramework,Version=v4.0" >
  <ProductName>.NET Framework 4.0</ProductName>
</BootstrapperFile>
<BootstrapperFile Include="Microsoft.Net.Framework.3.5.SP1" >
  <ProductName>.NET Framework 3.5 SP1</ProductName>
</BootstrapperFile>

<GenerateBootstrapper ApplicationFile="$(TargetFileName)"
                  ApplicationName="My Application Name"
                  BootstrapperItems="@(BootstrapperFile)"
                  ComponentsLocation="Relative"
                  CopyComponents="True"
                  OutputPath="$(OutputPath)"
                  Path="C:\Program Files\Microsoft SDKs\Windows\v7.0A\Bootstrapper\"/> 
```

首先我有错误：

先决条件的安装位置未设置为“组件供应商的网站”，并且无法在磁盘上找到项目“Microsoft.Net.Framework.3.5.SP1”中的文件“dotNetFx35setup.exe”。

我按照此处的说明进行操作：

[http://sebastienlachance.com/blog/the-install-location-for-prerequisites-has-not-been-set-to-component-vendors-web-site-and-the-file-dotnetfx35setupexe-in-item- microsoftnetframework35sp1-不能在磁盘上定位](http://sebastienlachance.com/blog/the-install-location-for-prerequisites-has-not-been-set-to-component-vendors-web-site-and-the-file-dotnetfx35setupexe-in-item-microsoftnetframework35sp1-cannot-be-located-on-disk)

但现在我有一个新警告：

项目“Microsoft.Net.Framework.3.5.SP1”无法位于“C:\Program Files\Microsoft SDKs\Windows\v7.0A\Bootstrapper\”中。

我不明白会发生什么。我搜索了很多并查看了类似的问题，但没有找到任何准确的答案......有人有解决方案，还是有另一种方法可以在 VS2010 上使用 WiX 安装先决条件？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T16:02:46.030

在 64 位系统上，XML 元素的`Path`属性值`GenerateBootstrapper`应以`C:\Program Files (x86)\`. 你错过了这个`(x86)`部分。

`win`您可以通过点击+`pause`并检查“系统类型”来检查操作系统的位数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T14:30:48.507

您已将路径设置为

```
Path="C:\Program Files\Microsoft SDKs\Windows\v7.0A\Bootstrapper\" 
```

它可能需要

```
Path="C:\Program Files\Microsoft SDKs\Windows\v7.0A\Bootstrapper\Packages" 
```

导航到该路径并确保引导程序包确实存在。具体来说，您应该有一个名为*DotNetFX35SP1*的文件夹，其中应该是一个*Product.xml*文件，该文件具有与您的引导程序包含项匹配的相同产品代码元素。所以...

```
<BootstrapperFile Include="Microsoft.Net.Framework.3.5.SP1" > 
```

应该匹配

```
ProductCode="Microsoft.Net.Framework.3.5.SP1" 
```

# c# - c# 中的联合与 StructLayout

> ID：10299978
> 
> 赞同：3
> 
> 时间：2012-04-24T14:25:16.910
> 
> 标签：c#, union, structlayout

我有多个结构都以标头结构开头。像这样

```
public struct BaseProtocol {
    public Header header;
    public Footer footer;
}; 
```

标题是

```
public struct Header {
    public Byte start;
    public Byte group;
    public Byte dest;
    public Byte source;
    public Byte code;
    public Byte status;
}; 
```

现在的问题是我需要将它们与 Byte[] 联合起来。我用这个试过了

```
[StructLayout( LayoutKind.Explicit, Size=255 )]
public struct RecBuffer {

    [FieldOffset( 0 )]
    public Header header;

    [FieldOffset( 0 )]
    [MarshalAs( UnmanagedType.ByValArray, ArraySubType = UnmanagedType.I1, SizeConst = 255 )]
    public Byte[] buffer;
}; 
```

当我用数据填充缓冲区时，我无法从标题中获取数据。如何使 c# 与 c++ 中的 union 一样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T14:39:36.580

Byte[] 是引用类型字段，不能与值类型字段重叠。您需要一个固定大小的缓冲区，并且需要使用`/unsafe`. 像这样：

```
[StructLayout(LayoutKind.Explicit, Size = 255)]
public unsafe struct RecBuffer
{

    [FieldOffset(0)]
    public long header;

    [FieldOffset(0)]
    [MarshalAs(UnmanagedType.ByValArray, ArraySubType = UnmanagedType.I1, SizeConst = 255)]
    public fixed Byte buffer[255];
}; 
```

# c# - .NET 单元测试项目组织

> ID：10299979
> 
> 赞同：45
> 
> 时间：2012-04-24T14:25:21.263
> 
> 标签：c#, .net, unit-testing, tdd, nunit

您认为在大型 .net 应用程序中管理单元测试的最佳方式是什么？是为解决方案中的每个单独项目添加一个测试项目，还是为其余项目中的所有测试添加一个大型测试项目更好？

例如，如果一个解决方案中有 10 个项目，是增加 10 个额外的测试项目更好，还是一个大型测试项目足以满足整个解决方案？

我知道模块化测试程序集提供了一些好处，但是使用测试类别可以实现非常相似的事情。许多项目的编译时间较长，但您可以排除此时不需要的项目，而如果您只有一个项目，则不能这样做，但编译所需的时间会少一些。

请在您的答案中概述每个选择的优点/缺点。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-24T14:43:19.117

Phil Haack 写了一篇关于单元测试结构的好文章。这已成为我编写单元测试时的个人最佳实践。这是他的文章的链接[http://haacked.com/archive/2012/01/02/structuring-unit-tests.aspx](http://haacked.com/archive/2012/01/02/structuring-unit-tests.aspx)

至于您的问题，我总是会为单元测试创​​建一个单独的项目，并将其命名为 .UnitTests 附加（我这样做是为了区分单元测试和集成测试）。例如，如果我的主项目是 Sample.WebUI，则测试将是 Sample.WebUI.UnitTests。

确实，单元测试会为编译增加额外的时间，但我认为这是一个小问题。我正在研究一个包含 17 个项目（不包括单元测试）的解决方案，编译所有内容大约需要 50-60 秒。差不多有足够的时间把我的眼睛从显示器上移开，看看别的东西来改变一下:-)

关于类别，如果您有一些需要快速完成测试的日常构建，请使用它们并将它们与那些需要更长时间才能完成的测试（如集成测试）区分开来。此外，如果您使用的是 TFS，则使用类别可以帮助自动化和测试您的签入。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-24T14:37:25.350

就个人而言，我更喜欢每个真实项目都有一个专门的测试项目。在构建新功能/模块/项目时，我发现能够快速过滤掉其他不相关的测试项目套件要好得多。它使 TDD 周期快得多，以便能够在我开发新项目时快速运行测试。

更重要的是，它可以帮助您根据需要为您的固定装置维护各种测试/模拟类的良好组织，而不会将大量不相关的代码混在一起。它还使新开发人员更容易找到相关的测试。最后，它确保您对特定项目的测试的依赖关系永远不会意外地依赖于另一个不相关的项目。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-24T14:41:32.713

我个人的选择是每个项目只有一个测试项目，只有单元测试。这个testproject的文件夹结构和被测试的项目完全一样。除此之外，还可以根据需要制作尽可能多的集成测试项目。

这种方法的主要优点是，当您想要使用 1 个项目并将其用于不同的解决方案时，您总是将测试项目放在一起，以确保当您必须在新解决方案中创造机会时，质量保持不变。

到目前为止，除了在使用一个测试项目时必须替换引用之外，我没有发现任何缺点。

# jquery - jQuery绑定popstate事件未通过

> ID：10299980
> 
> 赞同：26
> 
> 时间：2012-04-24T14:25:22.183
> 
> 标签：jquery, html, html5-history

我正在为 History API 编写一个小演示。我正在为此苦苦挣扎：

```
$(window).bind('popstate',  
    function(event) {
        console.log('pop: ' + event.state);
    }); 
```

当我单击“上一个”按钮时，它会记录“弹出：未定义”...

但如果我这样做，事情就会像预期的那样工作：

```
window.onpopstate = function(event) {
    console.log('pop: ' + event.state);
}; 
```

这次它记录'pop：[object Object]'......

所以就像 jQuery 没有将事件对象传递给回调一样。
jQuery 有问题吗？还是我搞砸了什么？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-24T15:31:40.893

在第一个实例中，您将获得一个规范化的 jQuery 事件对象。在第二种情况下，您将获得浏览器的事件对象。我假设 jQuery 还没有完成对所有新的 HTML5 事件和相关属性的规范化。在此之前，您需要访问原始事件对象。您可以通过 originalEvent 属性通过 jQuery 事件对象执行此操作。您可以在此处找到一些其他详细信息和示例：[stackoverflow.com/questions/7860960/popstate-returns-event-state-is-undefined](https://stackoverflow.com/questions/7860960/popstate-returns-event-state-is-undefined)

```
event.originalEvent.state 
```

# sql - 排除更新 SQL Server 2008 中的行

> ID：10299981
> 
> 赞同：3
> 
> 时间：2012-04-24T14:25:39.750
> 
> 标签：sql, sql-server-2008

我正在尝试使用特定信息更新某些行选择。这意味着我不能执行简单的更新语句，而是必须指定我想要更改的行以及我将修改它们的值。简而言之，我想根据相应的 parameterid 更新当前为 null 的日期列；因此，以下陈述似乎合乎逻辑：

```
UPDATE contactparameter  
SET effectiveto = CASE parameterid    
When '2887' Then '13-Aug-2012'  
When '2896' Then '21-Feb-2012'   
When '3008' Then '28-Oct-2012'   
When '3272' Then '18-Jan-2013'   
END 
```

如果我随后更新，则所有未包含在此列表中的行，即参数 ID 不是“2887”、“2896”、“3008”或“3272”的所有行都将被清空。我尝试在子查询中选择要更新的行：

```
UPDATE contactparameter   
SET effectiveto = CASE parameterid   
When '2887' Then '13-Aug-2012'   
When '2896' Then '21-Feb-2012'   
When '3008' Then '28-Oct-2012'   
When '3272' Then '18-Jan-2013'   
END   
WHERE exists
    (SELECT cp.parameterid   
        from contact c   
       INNER JOIN contactparameter cp on c.serialnumber = cp.serialnumber   
       WHERE cp.effectivefrom is not null  
        and cp.effectiveto is null) 
```

但这完全一样。我在使用 SQL 方面仍然相当缺乏经验，而且我确信我在某处遗漏了一个关键元素。能否请你帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:31:32.840

有两种方法可以做到这一点，

#1，在你的 CASE 表达式中指定一个 ELSE 子句来返回它已经拥有的相同的值，否则它会返回 NULL 到所有的不匹配：

```
UPDATE contactparameter  
SET effectiveto = CASE parameterid    
When '2887' Then '13-Aug-2012'  
When '2896' Then '21-Feb-2012'   
When '3008' Then '28-Oct-2012'   
When '3272' Then '18-Jan-2013'   
Else effectiveto
END 
```

或者，#2，使用 WHERE 子句仅匹配那些在 CASE 表达式中也有匹配的行：

```
UPDATE contactparameter  
SET effectiveto = CASE parameterid    
When '2887' Then '13-Aug-2012'  
When '2896' Then '21-Feb-2012'   
When '3008' Then '28-Oct-2012'   
When '3272' Then '18-Jan-2013'   
END
WHERE parameterid IN('2887','2896','3008','3272') 
```

出于锁定原因，第二个通常更快且更受欢迎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T14:28:25.210

这应该这样做：

```
UPDATE contactparameter   
SET effectiveto = CASE parameterid   
   When '2887' Then '13-Aug-2012'   
   When '2896' Then '21-Feb-2012'   
   When '3008' Then '28-Oct-2012'   
   When '3272' Then '18-Jan-2013'   
END   
from contact c   
INNER JOIN contactparameter cp on c.serialnumber = cp.serialnumber   
WHERE cp.effectivefrom is not null  
and cp.effectiveto is null 
```

# c# - 使用 httpwebrequest 调用 Web 服务方法 - 无法连接到远程服务器错误

> ID：10299986
> 
> 赞同：2
> 
> 时间：2012-04-24T14:26:11.323
> 
> 标签：c#, web-services, httpwebrequest

我正在调用我的 Web 服务的特定方法，但是一旦我创建了一个新的 StreamWriter 对象，就会出现上述错误。我不确定为什么会发生这种情况，因为我以前从未这样做过。我用来执行此操作的代码是使用此链接编写的 - [Invoking an ASP.NET web service method via an http request](https://stackoverflow.com/questions/1609294/invoking-an-asp-net-web-service-method-via-an-http-request) as reference。这是片段 -

```
var httpWebRequest = (HttpWebRequest)WebRequest.Create("http://localhost/Helpers/Symbology.asmx");
httpWebRequest.Headers.Add("SOAPAction", "\"http://tempuri.org/GetRelatedSymbols\"");
httpWebRequest.ContentType = "text/json";
httpWebRequest.Method = "POST";
JavaScriptSerializer serializer = new JavaScriptSerializer();

*using (var streamWriter = new StreamWriter(httpWebRequest.GetRequestStream()))*//error occurs here
{
    string json = serializer.Serialize(relatedSymbols);
    streamWriter.Write(json);
}
var httpResponse = (HttpWebResponse)httpWebRequest.GetResponse();
string responseText = String.Empty;
using (var streamReader = new StreamReader(httpResponse.GetResponseStream()))
{
     responseText = streamReader.ReadToEnd();
} 
```

### 这是我的网络服务代码片段 -

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
//[System.ComponentModel.ToolboxItem(false)]
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
// [System.Web.Script.Services.ScriptService]
public class Symbology: System.Web.Services.WebService
{

    [WebMethod]
    public List<string> GetRelatedSymbols()
    {
        try
        {
             //code here
        }
        catch(){}
    }
} 
```

谁能帮忙指出我可能做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T15:21:33.613

当我运行一个网络服务器时，我总是需要使用这样的 URL 连接 [http://localhost:PORTNUMBER/](http://localhost:PORTNUMBER/) ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:57:23.840

我刚刚发布了有关多个启动项目的答案，以解决有关使用 Web 服务的站点的另一个问题。

这里有一些说明... [Web参考帮助：无法建立连接，因为目标机器主动拒绝它](https://stackoverflow.com/questions/10289699/web-reference-help-no-connection-could-be-made-because-the-target-machine-activ/10289827#10289827)

这假设您的两个启动项目都在同一个解决方案中。

# mercurial - 如何区分一个分支与我的默认分支

> ID：10299988
> 
> 赞同：73
> 
> 时间：2012-04-24T14:26:12.833
> 
> 标签：mercurial

我切换到本地 repo 上的一个分支，并注意到它给了我显示 x 个文件已更新的消息。这让我感到惊讶，因为我不知道那个分支有什么不同。如何将该分支与默认分支进行比较以查看发生了什么变化？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-04-24T14:32:00.920

使用`hg diff -r BRANCH1:BRANCH2`，其中 BRANCH1 和 BRANCH2 是分支的名称。这将向您展示两个分支的负责人之间的差异。

您收到有关“x files updated”的消息是因为原始分支上的文件已更改，不一定是因为另一个分支上的文件已更改。Mercurial 向您显示来自两个分支的更改文件集的联合。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-06-14T01:54:51.470

要仅列出具有差异的文件，请添加 --stat 选项：

```
hg diff --stat -r BRANCH1:BRANCH2 
```

这给出了这样的输出：

```
mypath/file1.cpp    |    1 -
mypath/file2.cpp    |  143 ++++++++++
mypath/file3.cpp    |   18 +-
3 files changed, 160 insertions(+), 2 deletions(-) 
```

或者稍微清理一下输出，通过 sed 将其通过管道删除管道符号之后的所有内容：

```
hg diff --stat -r BRANCH1:BRANCH2 | sed "s/|.*$//g" 
```

这只会为您提供已更改文件的列表和最后的摘要行：

```
mypath/file1.cpp
mypath/file2.cpp
mypath/file3.cpp
3 files changed, 160 insertions(+), 2 deletions(-) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-27T15:29:36.200

要查看`otherbranch`与当前分支的分支差异：

```
hg diff -r otherbranch 
```

# java - 为堆栈上的对象而不是堆上的对象预分配内存 JAVA

> ID：10299989
> 
> 赞同：0
> 
> 时间：2012-04-24T14:26:15.807
> 
> 标签：java, memory, new-operator

考虑 c 中的 LinkedList 示例，其中我在堆栈上显式预分配 N 个节点结构以用作池或节点堆栈，而不是使用慢速 malloc 和释放，（我不需要在运行时释放节点的功能，所以一个堆栈会做）：

```
#define N 40000

typedef struct node_t {
    void * ele;
    struct node_t * next;
}node,*Pnode;

node Stack[N];//memory allocation for the linkedlist nodes
int sp=0;

Pnode createNode(void * x) {
    Pnode temp=&Stack[sp++];
    temp->ele=x;
    temp->next=NULL;
    return temp;
} 
```

当我试图在 JAVA 中模仿上面的想法时，这就是我想出的......你能完成这个类以使 Node[] 堆栈成为一个节点对象数组，其中内存是在堆栈中预分配的吗？

```
public class Node<E>  {

    private final static int n = 40000;
    private static Node[] stack = ?
    private static int sp = 0;

    private E ele;
    private Node next;

    private Node () {}
    public Node createNode(E e) {
        stack[sp].ele=e;
        stack[sp].next=null;
        return stack[sp++];
    }
} 
```

基本上我想知道这一点，因为我知道我希望我的程序能够做什么，而且我知道我不需要释放和重用一块内存的能力，我希望能够快速分配一个 Node 对象即使当我的程序几乎有堆溢出时，它也能像闪电一样发光。最大容量为 N 的节点堆栈和像我一样的运行索引对我来说是完美的......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T14:28:47.257

不，Java 没有明确的机制来在堆栈上分配内存。

使用`new`是分配内存的唯一方法。然后由 JVM 来决定该内存的来源，并从那时起对其进行管理。

**编辑：**我刚刚仔细查看了您的代码。您甚至没有在堆栈上分配内存。您似乎正在做的是拥有一个位于数据段上的堆栈数据结构，并且您自己管理。

在 Java 中，没有直接等价于：

```
node Stack[N]; 
```

换句话说，没有办法`N`在连续的内存块中构造对象。您必须分配一个`N`引用数组，然后创建`N`对象。

也就是说，请记住，在现代 JVM 中，`new`基本上相当于指针碰撞。这是： (a) 便宜；(b) 类似于你正在做的事情`sp`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T14:30:07.420

> 你能完成这个类以使 Node[] 成为堆栈中的节点对象数组吗？

不会。Java 会根据自己的启发式方法为您管理内存分配。据我所知，JLS 中没有任何内容可以保证特定对象的分配位置。

我对你的问题是 - 你为什么*要*在堆栈上分配它？根据垃圾收集器的内部状态，您是否认为您比 Hotspot 更了解此数据的最佳性能位置？（根据我公认的非专家知识，这些对象最好放在堆上的 Eden 池中。）

您需要学习 Java 的一件事*就是放手*，并相信 VM 关于在何处分配内存的决定。只要您避免编写复杂的算法，它通常确实可以很好地完成这些决策（通常比开发人员做得更好，因为它考虑了运行时可用的信息，而不是在编写代码时被迫采用静态二分法。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T14:40:44.473

您似乎想要的是一个对象池。

一个简单的池是使用 ArrayList

```
public class Node<E>  {

    private final static int MAX_SIZE = 40000;
    private final static List<Node> freeNodes = new ArrayList<>();

    private E ele;
    private Node next;

    private Node () {}

    public static Node<E> acquireNode(E e) {
        Node node = freeNodes.size() > 0 
                    ? freeNodes.remove(freeNodes.size()-1) 
                    : new Node();
        node.ele = e;
        return node;
    }

    public static void freeNode(Node<E> node) {
        if(freeNodes.size() < MAX_SIZE) {
            node.next = null;
            freeNodes.add(node);
        }
    }
} 
```

我建议不要使用必然会创建大量对象的 LinkedList，而是使用不同的结构，例如 ArrayList 或 RingBuffer，因为它们都不需要这些节点。（做某事的最快方法是根本不做；）

# android - 未显示应用登录页面 - Android Facebook

> ID：10299990
> 
> 赞同：1
> 
> 时间：2012-04-24T14:26:16.533
> 
> 标签：android, facebook, facebook-graph-api, android-layout

我正在尝试访问 Facebook 上的应用登录屏幕。当活动启动时，屏幕显示一个 facebook 加载页面然后消失，页面设置为 R.layout.main。

我一定错过了这里的重点，但是我该如何进入应用程序登录页面以供用户登录。

我一直在关注基于[https://developers.facebook.com/docs/mobile/android/build/#enablesso的教程](https://developers.facebook.com/docs/mobile/android/build/#enablesso)

仅供参考 - 我已删除 APP_ID

```
package com.example.facebook;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;

import com.facebook.android.DialogError;
import com.facebook.android.Facebook;
import com.facebook.android.Facebook.DialogListener;
import com.facebook.android.FacebookError;

public class MyGreatActivity extends Activity {

    Facebook facebook = new Facebook("APP_ID");
    private SharedPreferences mPrefs;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        /*
         * Get existing access_token if any
         */
        mPrefs = getPreferences(MODE_PRIVATE);
        String access_token = mPrefs.getString("access_token", null);
        long expires = mPrefs.getLong("access_expires", 0);
        if(access_token != null) {
            facebook.setAccessToken(access_token);
        }
        if(expires != 0) {
            facebook.setAccessExpires(expires);
        }

        /*
         * Only call authorize if the access_token has expired.
         */
        if(!facebook.isSessionValid()) {

            facebook.authorize(this, new String[] {}, new DialogListener() {
                @Override
                public void onComplete(Bundle values) {
                    SharedPreferences.Editor editor = mPrefs.edit();
                    editor.putString("access_token", facebook.getAccessToken());
                    editor.putLong("access_expires", facebook.getAccessExpires());
                    editor.commit();
                }

                @Override
                public void onFacebookError(FacebookError error) {}

                @Override
                public void onError(DialogError e) {}

                @Override
                public void onCancel() {}
            });
        }
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        facebook.authorizeCallback(requestCode, resultCode, data);
    }
} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T15:03:13.023

似乎您的手机包含 Facebook 本机应用程序，所以它可能会在 Logcat 中引发**登录失败无效密钥错误。**

如果发生这种情况是由于[单点登录](https://developers.facebook.com/docs/mobile/android/build/#sso)造成的..所以您需要创建 Android Key Hash 并在您的应用程序中注册..

请按照此[步骤](https://developers.facebook.com/docs/mobile/android/build/#enablesso)执行此操作。

您可以在 Single line 中禁用 Single Sign On，无需使用 Create Hash Key，但这**不是推荐的处理方式**。

添加**-1**或**Facebook.FORCE_DIALOG_AUTH**到**authorize()**

```
facebookObject.authorize(context, PERMISSIONS,Facebook.FORCE_DIALOG_AUTH,new LoginListener()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T14:58:09.690

我不确定我在哪里读到的，但任何地方都可能存在错误，因此请尝试将**authorize** () 中的**activityCode设置为****-1**。

 ****使用方法：authorize(Activity activity, String[] permissions, int activityCode, DialogListener listener)

```
facebook.authorize(this, new String[] {}, -1, new DialogListener(){..}); 
```

如果您使用**ActivityGroups**，请不要使用当前活动本身，而是使用组：

```
 facebook.authorize(activity.getParent(), new String[] {}, -1, new DialogListener(){..}); 
```

（期望您的活动的父级是 ActivityGroup）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T14:59:29.423

改变

```
facebook.authorize(this, new String[] {}, new DialogListener()..etc 
```

到

```
facebook.authorize(this, new String[] {}, Facebook.FORCE_DIALOG_AUTH,
                    new DialogListener())..etc 
```

这会强制显示对话框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T14:42:21.057

你`<uses-permission android:name="android.permission.INTERNET"/>`在清单中设置了吗？是否安装了最新版本的 fb 应用程序？您是否用您的 ID 替换（而不仅仅是删除）“APP_ID”？
此外：您的 logcat 中是否记录了任何错误？正常情况下，这应该可以工作...您在uiThread中，您的代码与sampleCode没有太大区别...嘿，这不是rocketScience ...****

# objective-c - 将 [touches anyObject] 更改为与数组中的任何对象进行接触

> ID：10299992
> 
> 赞同：0
> 
> 时间：2012-04-24T14:26:21.153
> 
> 标签：objective-c, ios, nsmutablearray, uitouch, touchesbegan

所以我有一个可变数组，其中包含几个 UIViews 圆圈。现在我已经开始像这样设置方法了。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];

    CGPoint touchLocation = [touch locationInView:self.view];

    for (Circle *circle in playerOneCircles)
    {
        if ([circle.layer.presentationLayer hitTest:touchLocation])
        {
            [circle playerTap:nil];
            break;
        } 
    }   
} 
```

这很好用。但它给出了重叠视图的问题。我希望其他 UIviews 也响应 touchesbegan 方法（然后会触发其他方法）。但如果 2 个对象重叠，那么我的 touchesbegan 会触发错误的方法。

所以我想定义多个只响应某些对象而不是anyObject的UITouch。我将如何将 UITouch 定义为**仅**使用可变数组中的对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:07:42.963

**EDIT**

Added comments to answer your comment to explain the code.

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    // We want to find all the circles that contain the touch point.
    // A circle does not have to be "on top" (or even visible) to be touched.
    // All circles that contain the touch point will be added to the touchedCircles set.
    NSMutableSet *touchedCircles = [NSMutableSet set];

    // To support multiple touches, we have to look at every touch object.
    for (UITouch *touch in touches) {
        CGPoint touchLocation = [touch locationInView:self.view];
        // Search through our collection of circle objects.  Any circle that
        // contains this touch point gets added to our collection of touched
        // circles.  If you need to know which UITouch is "touching" each circle,
        // you will need to store that as well.
        for (Circle *circle in playerOneCircles) {
            if ([circle containsPoint:touchLocation]) {
                [touchedCircles addObject:circle];
            }
        }
    }

    // We have completed our search for all touches and all circles.  If
    // and circle was touched, then it will be in the set of touchedCircles.
    if (touchedCircles.count) {
        // When any circle has been touched, we want to call some special method
        // to process the touched circle.  Send the method the set of circles, so it
        // knows which circles were touched.
        [self methodAWithTouchedCircles:touchedCircles];
    } else {
        // None of our circles were touched, so call a different method.
        [self methodB];
    }
} 
```

You would implement containsPoint for a Circle something like this...

```
- (BOOL)containsPoint:(CGPoint)point
{
    // Since each of our objects is a circle, to determine if a point is inside
    // the circle, we just want to know if the distance between that point and
    // the center of the circle is less than the radius of the circle.
    // If your circle is really contained inside a view, you can compute the radius
    // as one-half the width of the frame.
    // Otherwise, your circle may actually have its own radius property, in which case
    // you can just use the known radius.
    CGFloat radius = self.frame.size.width *.5;

    // This is just the Pythagorean Theorem, or instance formula.
    // distance = sqrt((x0-x1)^2 + (y0-y1)^2)
    // and we want to check that
    //     distance < radius
    // By simple algebra, that is the same as checking
    //     distance^2 < radius^2
    // which saves us from having to compute the square root.
    CGFloat diffX = self.center.x - point.x;
    CGFloat diffY = self.center.y - point.y;
    return (diffX*diffX) + (diffY*diffY) < radius*radius;
} 
```

# c++ - VS2010 报告 DLL 中静态类的错误内存泄漏

> ID：10299995
> 
> 赞同：6
> 
> 时间：2012-04-24T14:26:29.057
> 
> 标签：c++, visual-studio-2010, memory-leaks

[从 Visual Studio DLL 调用 ITK 时内存泄漏](https://stackoverflow.com/q/10297933/1345960)的后续问题

我将问题细化为最简单的例子。

```
struct A
  {
  public:
    A()
      {
      mp_data = new int(0x42);
      }
    ~A()
      {
      delete mp_data;
      }
    int* mp_data;
  };

A a; 
```

在 DLL 中定义此类全局类时，Visual Studio 调试 CRT 报告 mp_data 在应用程序关闭时泄漏。除了禁用泄漏报告之外，有人知道解决方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T15:27:43.470

如果您`_CrtDumpMemoryLeaks()`在 main 函数的末尾调用，则该行为是预期的，因为在调用`mp_data`后将被删除`_CrtDumpMemoryLeaks()`。

如果您`_CrtDumpMemoryLeaks()`不想看到这些泄漏（这是一项艰巨的任务，我不会尝试一下）。

更简洁的方法是在堆上分配所有静态对象（在开头`main`），并在结尾处取消分配它们`main`，然后您可以调用`_CrtDumpMemoryLeaks()`并且不会看到任何内存泄漏。

仅供参考，带有构造函数和析构函数的静态对象无论如何都被认为是不好的，因为它们的构造/销毁顺序不是确定性的，因此静态对象通常会引入无法轻松调试的错误。

**编辑关于 Andrey 的评论：** 您可以尝试`_CrtDumpMemoryLeaks`通过调用[_CrtSetDbgFlag](http://msdn.microsoft.com/en-us/library/5at7yxcs%28v=vs.71%29.aspx)取消设置`_CRTDBG_LEAK_CHECK_DF`标志来停用自动调用。如果可行，您可以添加一个调用`_CrtDumpMemoryLeaks()`其析构函数的静态对象。为了确保这个对象最后被破坏，你可以使用[#pragma init_seg(compiler) 指令](http://support.microsoft.com/kb/104248)。

不知道这是否可行……除此之外，所有其他解决方案很可能需要您修改*ITK 库*（这应该是可能的，毕竟它是一个开源库？！）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T09:40:28.790

以下任何一项都可以解决问题。

(1) 在 MFC 上创建 DLL 的虚假依赖项，或者

(2) 使用 smerlin 建议的解决方案：在 DllMain 旁边添加此代码

```
struct _DEBUG_STATE
  {
  _DEBUG_STATE() {}
  ~_DEBUG_STATE() { _CrtDumpMemoryLeaks(); }
  };

#pragma init_seg(compiler)
_DEBUG_STATE ds; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-05T18:23:46.887

我在将内部库从静态链接迁移到加载时动态链接的过程中遇到了同样的症状，结果发现我的问题是 DLL 项目和 EXE 项目链接到了不同版本的 VC++ 运行时/MFC 库（一个是 MBCS，一个是 Unicode）。

在我的情况下，应用程序和库都使用 MFC，并且激活 CRT 内存泄漏转储的 _AFX_DEBUG_STATE 析构函数被调用了两次，用于两个单独的对象——因为 DLL 和 EXE 链接到不同的运行时 DLL，静态状态在运行时被有效地复制。其中一个 DLL 会过早卸载和转储泄漏，并显示一堆虚假泄漏。将两个项目切换为使用相同的字符集解决了单独的运行时链接并解决了错误的泄漏报告。

就我而言，链接到两个单独的运行时是无意的，并且可能无论如何都会导致其他问题。当使用具有明确定义的 ABI 的第三方库时，显然不会出现这种情况，您无法控制库链接到的 CRT。

不确定这是否适用于您的情况，但我想发布以防它对其他人有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-24T15:31:37.043

在 MFC 应用程序中，您可以通过调用禁用自动内存泄漏转储：

```
AfxEnableMemoryLeakDump(FALSE); 
```

自 Visual Studio 2010 起支持此功能。有关文档，请参见[此处](https://msdn.microsoft.com/en-us/library/dd554973.aspx)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-23T13:31:38.060

我在 Visual Studio 2015 中遇到了同样的问题。我尝试了所有解决方案。仅当您`/MT`在 Dll 中选择编译器选项时，第一个具有假 MFC 依赖项的解决方案才有效。所以你的 Dll 和主应用程序不会共享同一个堆。但通常`/MD`是需要的，例如，如果您想在 Dll 和您的主应用程序（Dll 边界）之间共享 STL 容器或字符串对象。如果`/MD`使用，app 和 Dll 使用相同的堆。所以第一个具有假 MFC 依赖的解决方案对我不起作用。

我不喜欢第二种解决方案，即在主应用程序中禁用内存泄漏检测。当您不再需要在析构函数中调用此 Dll 时，您必须记住在应用程序中重新激活内存泄漏检测。

我找到了另一个解决方案，所以我不再有错误的内存泄漏。您只需`/delayload`为您的 Dll 使用链接器选项！就这样 ：-）。它也适用于编译器选项`/MD`。

[在这里](https://stackoverflow.com/questions/5347355/i-can-pass-stdstring-for-a-dll-and-what-i-can-do-with-dll%C2%B4s)您可以阅读有关 Dll-boundary 的内容（为什么要使用`/MD`？）。[在这里，](https://stackoverflow.com/questions/757418/should-i-compile-with-md-or-mt)您可以阅读有关 CRT 编译器选项的一般信息。

# qt - QString::toDouble() 给我双精度错误

> ID：10299996
> 
> 赞同：8
> 
> 时间：2012-04-24T14:26:30.310
> 
> 标签：qt, double, precision, qstring

我有一个包含“09338.712001”的 QString myNumber。当我做：

`myNumber.toDouble();`，它返回 9338.71，但我希望双精度为原始值，即 09338.712001。有谁知道如何让 toDouble 返回的双精度与 QString 具有相同的精度？谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-24T15:04:44.067

您的问题可能在于您如何输出这些值。

```
 QString s("9338.712001");
 bool ok = false;

 double a = 9338.712001;
 double b = s.toDouble(&ok);
 double c = 1/3.0;

 qDebug() << "a: " << a;
 qdebug() << "b: " << b;

 qDebug() << "a: " << QString("%1").arg(a, 0, 'g', 13) 
 qDebug() << "b: " << QString("%1").arg(b, 0, 'e', 13);

 qDebug() << "c: " << QString("%1").arg(c, 0, 'g', 30); 
```

结果：

```
 a:  9338.71  
 b:  9338.71  
 a:  "9338.712001"
 b:  "9.3387120010000e+03"
 c:  "0.333333333333333314829616256247" 
```

但无论如何，也许*现在*是阅读这篇文章的好时机：[每个计算机科学家都应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

# python - 我的 extjs 网格未在本地主机的网格中显示 json 数据

> ID：10299998
> 
> 赞同：0
> 
> 时间：2012-04-24T14:26:39.827
> 
> 标签：python, html, django, json, extjs

我正在使用 django 框架并以 json 格式从本地主机获取一些数据，如下所示：

```
[{"stu_name": "Aatir"}, {"stu_name": "Mohsin"}, {"stu_name": "Anil"}, {"stu_name": "Anwar"}, {"stu_name": "Amir"}] 
```

现在我想使用这些数据并想在 extjs 网格中显示

我的 extjs 文件如下：

**hmak.html**

```
<html>
<head>
    <title>Account Manager</title>

    <link rel="stylesheet" type="text/css" href="{{MEDIA_URL}}extjs/resources/css/ext-all.css">
    <script type="text/javascript" src="{{MEDIA_URL}}extjs/ext-all-debug.js"></script>
    <script type="text/javascript" src="{{MEDIA_URL}}extjs/ext-debug.js"></script>
    <script type="text/javascript" src="{{MEDIA_URL}}app.js"></script>
</head>
<body>
</body>
</html> 
```

**应用程序.js**

```
Ext.Loader.setConfig({ enabled: true });
Ext.application({
    requires : [ 'Ext.container.Viewport'],

    controllers: ['Users'],

    name: 'AM',
    appFolder: 'media/app',

    launch: function() {
        Ext.create('Ext.container.Viewport', {
            layout: 'fit',
            items: [
                {
                    xtype: 'userlist'
                }
            ]
        });
    }
}); 
```

**Users.js（控制器）**

```
Ext.define('AM.controller.Users', {
    extend: 'Ext.app.Controller',

    stores: ['Users'],
    models: ['User'],

    views: ['user.List', 'user.Edit'],

    init: function() {
        this.control({
            'viewport > userlist': {
                itemdblclick: this.editUser
            },
            'useredit button[action=save]': {
                click: this.updateUser
            }           
        });
    },

    updateUser: function(button) {
    var win    = button.up('window'),
        form   = win.down('form'),
        record = form.getRecord(),
        values = form.getValues();

    record.set(values);
    win.close();
    this.getUsersStore().sync();
    },

    editUser: function(grid, record) {
        var view = Ext.widget('useredit');

        view.down('form').loadRecord(record);
    }
}); 
```

**List.js(查看)**

```
Ext.define('AM.view.user.List' ,{
    extend: 'Ext.grid.Panel',
    alias : 'widget.userlist',

    store: 'Users',

    title : 'All Users',

    initComponent: function() {
        this.store = {
            fields: ["stu_name"]
        };

        this.columns = [
            {header: "stu_name",  dataIndex: "stu_name",  flex: 1}
        ];

        this.callParent(arguments);
    }

}); 
```

**编辑.js（查看）**

```
Ext.define('AM.view.user.Edit', {
    extend: 'Ext.window.Window',
    alias : 'widget.useredit',

    title : 'Edit User',
    layout: 'fit',
    autoShow: true,

    initComponent: function() {
        this.items = [
            {
                xtype: 'form',
                items: [
                    {
                        xtype: 'textfield',
                        name : "stu_name",
                        fieldLabel: "stu_name"
                    }
                ]
            }
        ];

        this.buttons = [
            {
                text: 'Save',
                action: 'save'
            },
            {
                text: 'Cancel',
                scope: this,
                handler: this.close
            }
        ];

        this.callParent(arguments);
    }
}); 
```

**用户.js（商店）**

```
Ext.define('AM.store.Users', {
    extend: 'Ext.data.Store',
    model: 'AM.model.User',

    autoLoad: true,

    proxy: {
        type: 'ajax',
        api: {
            read: 'http://127.0.0.1:8000/task/'
        },
        reader: {
            type: 'json',
            root: 'users',
            successProperty: 'success'
        }
    }
}); 
```

**用户.js（模型）**

```
Ext.define('AM.model.User', {
    extend: 'Ext.data.Model',

    fields: ["stu_name"]
}); 
```

**视口.js**

```
Ext.define('SI.view.Viewport', {
    extend: 'Ext.container.Viewport'
}); 
```

在我的python中我写道：

```
def homePage(request):
    StuInfo.objects.all().values_list()
    return render_to_response('hmak.html', context_instance=RequestContext(request)) 
```

依次转到 hmak.html 并从 localhost/task （我在代理中定义）它获取的数据是 json 格式，正如我在 json 数据上方显示的那样

现在我的问题是什么，为什么我的网格没有显示？它只显示标题...

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-30T17:03:23.187

我认为你必须改变

```
Ext.define('SI.view.Viewport', {
    extend: 'Ext.container.Viewport'
}); 
```

至

```
Ext.define('AM.view.Viewport', {
    extend: 'Ext.container.Viewport'
}); 
```

并删除`initComponent`函数内部的商店调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T21:31:19.087

这可能是您的问题的根源：

```
this.store = {
        fields: ["stu_name"]
}; 
```

在`initComponent`函数中，您将覆盖您在 gridpanel 类定义中定义的存储。你试过删除那个吗？