# StackOverflow 问答 12336000-12336999

# objective-c - 用于匹配属性的 NSPredicate

> ID：12336001
> 
> 赞同：0
> 
> 时间：2012-09-09T02:08:49.703
> 
> 标签：objective-c, core-data, nspredicate, nsfetchrequest

我到底在这里做错了什么？沮丧到难以置信。

我有一个数组，其中包含具有属性的某种类型的对象。我们只称该属性为“数字”。它是类型`NSUInteger`。

我还有一个实体，其属性为“数字”，类型为`Integer 64`.

我正在尝试创建一个获取请求，该请求可以找到我的核心数据存储中的所有对象，这些对象在另一个包含对象的数组中*不*存在。

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
fetchRequest.entity = [NSEntityDescription entityForName:@"EntityName" inManagedObjectContext:context];
fetchRequest.predicate = [NSPredicate predicateWithFormat:@"NOT (%@.number IN number)",someArrayWithObjects];
NSError *error = nil;
NSArray *notMatchingObjects = [context executeFetchRequest:fetchRequest error:&error]; 
```

这将返回一个 nil 数组。我知道我的本地商店中有带有数字的对象，这些对象在我的其他数组中不存在。难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T02:28:24.560

使用 NSArrays 符合键值编码的事实，并将为您提供一个属性值数组`valueForKey:`（对于 NSUInteger，它会将它们包装在 NSNumbers 中）

```
NSArray *predicateInts = [someArrayWithObjects valueForKey:@"number"];
[NSPredicate predicateWithFormat:@"NOT (number IN %@)",predicateInts]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T02:27:12.703

首先，您必须创建一个`NSNumber`仅包含要排除的数字的对象数组。

然后您可以使用以下获取请求：

```
[NSPredicate predicateWithFormat:@"NOT (number IN %@)", arrayWithNumbers]; 
```

# ios - MKOverlay 需要很长时间才能从异步调用中显示

> ID：12336006
> 
> 赞同：1
> 
> 时间：2012-09-09T02:10:17.287
> 
> 标签：ios, mkmapview, redraw, mkoverlay, dispatch-async

我正在使用 MKMapView 和 MKPolyline 来显示路线形状。当在我的 MKMapView 上放置注释并且已经存在另一个注释时，它将异步向我的路线提供者发送路由调用并添加形状覆盖。

这就是问题所在。如果我对请求使用主线程，它将在请求进行时冻结 MKAnnotation 下降，但当它返回时，它会很好地显示覆盖。相反，如果我将请求分派到异步队列，则注释删除中不会冻结，并且当异步调用完成时，它会添加叠加层，但 MapView 需要一段时间才能意识到这一点并实际绘制叠加层。有时需要20秒。这是代码。

```
//Action handler selector to drop the pin
-(void)dropWayPoint:(WayPoint*)wp prevWayPoint:(WayPoint*)prevWp {
    [self.mapView addWayPoint: wp];
    [self.routeService routeFrom:prevWp to:wp];
} 
```

实际路线计算在这里：

```
@implementation RouteService

static dispatch_queue_t queue;

+(RouteService) initRouteService:(id)delegate {
    RouteService *rs = [[RouteService alloc] init];
    //Lots of things happen here, including the queue creation
    ...
    if (!queue) {
        queue = dispatch_queue_create("RouteDispatch.queue", NULL);
    }
    return rs;
}
//Lots of methods...
//then
-(void)routeFrom:(WayPoint*)wp to:(WayPoint*)wpTp {
    dispatch_async(queue, ^{
        //Code here
        DirectionsRouteRequest *rt = [DirectionsRouteRequest buildWithRouteType:@"fastest"];
        [rt addObjectToLocation:[wp coord]];
        [rt addObjectToLocation:[wpTp coord]];
        rt.options.routeType = @"fastest";

        NSLog(@"Dispatching...");

        //Now send the request
        DirectionsResponseType *response = [MapUtil computeDirections:rt];

        Leg *leg = [Leg buildFromResponse:response route: self.route startWayPoint:wp endWayPoint:wpTp];
        MKPolyline *pl = [MapUtil makePolylineWithLocations:[leg routeShape]];
        [self.route.legsHash setObject:pl forKey:leg.legIdStr];

        //Add Overlay here!!!
        [self.mapDeskViewController.mapView addOverlay: pl];
        //Desperately advising map view to redraw itself and show the overlay
        [self.mapDeskViewController.mapView setNeedsDisplay];

        //I can see this being displayed very quickly, meaning 
        NSLog(@"Response, pl_count:%d",pl.pointCount);

        //However it takes a long time after this returns to actually display the overlay.
    });
} 
```

如果我使用上面的代码并注释掉 async 指令，则需要相同的时间来处理它，这会引起烦人的冻结，但是会立即绘制覆盖层：

```
//Lots of methods...
//then
-(void)routeFrom:(WayPoint*)wp to:(WayPoint*)wpTp {
    /* COMMENTED OUT ASYNC
    dispatch_async(queue, ^{
    */
        //Code here
        DirectionsRouteRequest *rt = [DirectionsRouteRequest buildWithRouteType:@"fastest"];
        [rt addObjectToLocation:[wp coord]];
        [rt addObjectToLocation:[wpTp coord]];
        rt.options.routeType = @"fastest";

        NSLog(@"Dispatching...");

        //Now send the request
        DirectionsResponseType *response = [MapUtil computeDirections:rt];

        Leg *leg = [Leg buildFromResponse:response route: self.route startWayPoint:wp endWayPoint:wpTp];
        MKPolyline *pl = [MapUtil makePolylineWithLocations:[leg routeShape]];
        [self.route.legsHash setObject:pl forKey:leg.legIdStr];

        //Add Overlay here!!!
        [self.mapDeskViewController.mapView addOverlay: pl];
        //Desperately advising map view to redraw itself and show the overlay
        [self.mapDeskViewController.mapView setNeedsDisplay];

        //I can see this being displayed very quickly, meaning 
        NSLog(@"Response, pl_count:%d",pl.pointCount);
    /*
    COMMENTED OUT ASYNC
    });
    */
} 
```

知道为什么 MKMapView 需要一段时间才能意识到它需要在异步完成时绘制叠加层吗？

谢谢奥雷里奥

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T02:25:42.193

您需要在主线程上更新地图视图（和所有 UI）。因此，在您的 dispatch_async 块内并在收到您的回复后：

```
 // Create another block that gets queued up in the main_queue, a default serial queue
   dispatch_async(dispatch_get_main_queue(), ^{

       Leg *leg = [Leg buildFromResponse:response route: self.route startWayPoint:wp endWayPoint:wpTp];
       MKPolyline *pl = [MapUtil makePolylineWithLocations:[leg routeShape]];
       [self.route.legsHash setObject:pl forKey:leg.legIdStr];

       //Add Overlay here!!!
       [self.mapDeskViewController.mapView addOverlay: pl];
       //Desperately advising map view to redraw itself and show the overlay
       [self.mapDeskViewController.mapView setNeedsDisplay];

       //I can see this being displayed very quickly, meaning 
       NSLog(@"Response, pl_count:%d",pl.pointCount);
    }); 
```

# javascript - fadeIn() 和 fadeOut() 只隐藏

> ID：12336009
> 
> 赞同：0
> 
> 时间：2012-09-09T02:11:14.110
> 
> 标签：javascript, jquery, fadein, fade, fadeout

尝试使用 jQuery 的 nice`fadeIn`和`fadeOut`函数，但它们只等待持续时间，然后突然出现/消失，而不转换不透明度。我的代码：

```
if (someCondition) {
    elm.fadeIn(fade);
} else {
    elm.fadeOut(fade);
} 
```

它在一个按键启动的函数内部。fade 变量是一个有效数字 (300)。

**编辑**：这是 [jsFiddle](http://jsfiddle.net/LbvxN/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T02:42:23.630

“它在一个在按键上触发的函数内部。fade 变量是一个有效数字（300）。”

300 是 300 毫秒，或 0.3 秒，不是很长的渐变....

尝试 3000 或者这也可以：

```
if (someCondition) {
  elm.fadeIn("slow");
} 
else {
  elm.fadeOut("slow");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T02:43:30.023

淡入淡出参数是元素改变它的不透明度需要多长时间，它不是转换开始之前的延迟。如果您希望它延迟开始过渡，请使用`delay()`

```
$(ele).delay(300).fadeOut 
```

# ruby-on-rails - 安装 Phusion Passenger 的 Amazon Linux 堆栈

> ID：12336012
> 
> 赞同：12
> 
> 时间：2012-09-09T02:11:51.567
> 
> 标签：ruby-on-rails, amazon-ec2, amazon-web-services, passenger

我正在尝试安装 Phusion Passenger 以在使用 Amazon Linux 64 位的 AWS 堆栈上启动 RoR 应用程序。

当乘客检查所需软件时，我收到以下错误：

```
Curl development headers with SSL support... not found 
```

我尝试了几种选择：

```
sudo yum install libssl-dev
sudo yum install libcurl4-openssl-dev 
```

但我总是得到类似的东西：

```
No package libcurl4-openssl-dev available. 
```

您知道是否可以在此堆栈中安装 Curl SSH 标头？

提前非常感谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-23T21:23:25.493

如果您使用的是 Amazon Linux 发行版，那么您正在寻找的软件包是`openssl-devel`并且`libcurl-devel`

您可以通过运行安装它们

```
sudo yum install libcurl-devel openssl-devel 
```

希望这可以帮助

# php - settype() 与 filter_var()

> ID：12336015
> 
> 赞同：0
> 
> 时间：2012-09-09T02:13:33.143
> 
> 标签：php, sanitization, data-cleaning

如果以下几行更好地用于确保我的代码更安全。我应该使用 filter_var 函数的 settype 函数吗？

```
settype($number,'integer') 
```

或者

```
filter_var($number, FILTER_SANITIZE_NUMBER_INT); 
```

感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T03:04:27.550

正如[文档](http://www.php.net/manual/en/filter.filters.sanitize.php)所说`FILTER_SANITIZE_NUMBER_INT`：

> 删除除数字、加号和减号之外的所有字符。

因此，例如，如果您期望在 SQL 查询中使用 ID，我会使用正则表达式来检查我是否只有数字`/^[0-9]+$/`。因为`FILTER_SANITIZE_NUMBER_INT`将允许`-12`在这种情况下没有意义。

filter_var 和 settype 的主要区别在于，一个将变量解析为字符串，并返回一个字符串，另一个将其转换为整数。

```
$string = "+12";
var_dump(filter_var($string, FILTER_SANITIZE_NUMBER_INT));
settype($string, "integer");
var_dump($string); 
```

输出：

```
string(3) "+12"
int(12) 
```

所以这真的取决于上下文。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-09T02:49:24.980

`settype`并且`(int)`比`filter_var`. 因为`filter_var`有很多逻辑判断。

# cython - 为什么 libcpp.vector 这么慢？

> ID：12336018
> 
> 赞同：2
> 
> 时间：2012-09-09T02:15:06.720
> 
> 标签：cython

我正在使用 Cython 进行一些实验，以确定是否应该使用它来加速我的 Django 模块的某些部分。因为我使用了很多字符串和字符串列表，所以我尝试了这个：

```
from libcpp.string cimport string
from libcpp.vector cimport vector

def cython_test_string():
    cdef unsigned short int i = 0
    cdef string s
    # cdef vector[string] ls
    for i in range(10000):
        s.append('a')
        # ls.push_back(s)

def python_test_string():
    s = ''
    # ls = []
    for i in range(10000):
        s += 'a'
        # ls.append(s) 
```

当然，C++ 字符串比 Python 对象快，所以我们得到这些结果（100 次迭代）：

*   Cython：0.0110609531403 秒
*   蟒蛇：0.193608045578 秒

但是当我们取消注释处理向量和列表的四行时，我们会得到：

*   Cython：2.80126094818 秒
*   蟒蛇：2.13021802902 秒

我错过了什么，还是字符串向量非常慢？

# ruby-on-rails - 从 Rails 控制台访问数据库视图中的数据

> ID：12336019
> 
> 赞同：0
> 
> 时间：2012-09-09T02:15:15.703
> 
> 标签：ruby-on-rails, database, view, postgresql-9.1

我根据这个博客创建了一个视图：http: [//viget.com/extend/rails-nested-has-many-through-with-sql-views](http://viget.com/extend/rails-nested-has-many-through-with-sql-views)

迁移成功。我的视图名称与博客 (groupby_entries) 相同。

当我从我的 DB UI 中对其进行选择 * 时，我可以看到该视图已成功创建并且可以从中访问数据。

从现在开始，我想将其用作表格，仅用于检索数据（按查询分组）。但是，当我尝试从我的 rails 控制台访问数据时，它会引发错误：

1.9.3p194 :002 > GroupbyEntry.find(:all) NameError: 未初始化的常量 GroupbyEntry

我错过了在某处添加一些东西吗？请让我知道..我也尝试过 Groupby_entry.find(:all) ..但它给出了同样的错误。

谢谢，

# c# - 如何以编程方式添加 RollingFlatFileTraceListenerData

> ID：12336026
> 
> 赞同：5
> 
> 时间：2012-09-09T02:17:32.050
> 
> 标签：c#, configuration, enterprise-library, trace, tracelistener

我有一个配置文件，例如：

```
<configSections>
    <section name="loggingConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.LoggingSettings, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
</configSections>

<loggingConfiguration name="Logging Application Block" tracingEnabled="true" defaultCategory="Tracing" logWarningsWhenNoCategoriesMatch="true">
    <listeners>
        <add listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.SystemDiagnosticsTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" type="System.Diagnostics.ConsoleTraceListener, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" name="System Diagnostics Trace Listener"/>
    </listeners>
    <formatters>
        <add template="{message}" type="Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.TextFormatter, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" name="Text Formatter"/>
    </formatters>
    <categorySources>
          <add switchValue="All" name="AppLog">
    <listeners>
          <add name="System Diagnostics Trace Listener"/>
    </listeners>
  </add>
</categorySources>
<specialSources>
  <allEvents switchValue="All" name="All Events"/>      
  <notProcessed switchValue="All" name="Unprocessed Category"/>
  <errors switchValue="Off" name="Logging Errors &amp; Warnings"/>
</specialSources> 
```

除了我拥有的控制台侦听器之外，我还想以编程方式定义一个 RollingFlatFileTraceListenerData：

```
var listener = new RollingFlatFileTraceListenerData("AppLog", @"c:\log.log", "", "", 0, "yyyyMMdd-hhmm", Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.RollFileExistsBehavior.Increment, Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.RollInterval.Hour, TraceOptions.LogicalOperationStack, "Text Formatter"); 
```

如何以编程方式将新定义的侦听器添加到侦听器列表中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T06:42:19.990

通常，在 asp.net 应用程序中，以编程方式添加 TraceListeners 的一种简单方法是使用诊断程序的 Trace.Listeners.Add() 方法。我喜欢在 Application_Start() 上的 global.asax.cs 中执行此操作：

```
using D = System.Diagnostics;

...

protected void Application_Start()
{
   if (D.Trace.Listeners["MyTraceListener"] == null)
   {
      D.Trace.Listeners.Add(new MyTraceListener("") { Name = "MyTraceListener" });
   }

   ...

} 
```

我检查它是否已经到位的唯一原因是因为我已经看到 Application_Start() 触发了不止一次，尽管很少发生。

# iphone - 如何从带有空格的 URL 解析 HTML？

> ID：12336029
> 
> 赞同：1
> 
> 时间：2012-09-09T02:18:12.897
> 
> 标签：iphone, html, objective-c

我使用 hpple 从包含内部空间的 rss 提要中获得的 URL 解析 html。我尝试通过从浏览器复制和粘贴 url 来解析 html，它可以工作，但是当我对从 rss 提要获得的 url 做同样的事情时，它似乎不起作用。我认为问题是 url 内的空间，对吗？如何从该 URL 解析 HTML？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T03:38:09.167

尝试转义 URL。

```
NSString *url = [@"http://example.com/url with a space/" stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

# java - 自动生成 ID

> ID：12336030
> 
> 赞同：2
> 
> 时间：2012-09-09T02:18:39.233
> 
> 标签：java

任何人都知道如何`id`从 1 开始生成，以便下一个对象有 2 等等？

我尝试了以下但不起作用：

```
class students{

    private int id;
    private String name;

    public student(String name){
        this.id=id++;
        this.name
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T02:22:19.497

您需要一个*静态*类成员来跟踪上次使用的索引。一定要实现一个复制构造函数：

```
class students
{
    private static int next_id = 0;   // <-- static, class-wide counter

    private int id;                   // <-- per-object ID

    private String name;

    public students(String name)
    {
        this.id = ++students.next_id;
        this.name = name;

        // ...
    }

    public students(students rhs)
    {
        this.id = ++students.next_id;
        this.name = rhs.name;

        // ...
    }

    public static void reset_counter(int n)  // use with care!
    {
        students.next_id = n;
    }

    // ...
} 
```

* * *

*更新：*正如@JordanWhite 建议的那样，您可能希望将静态计数器设为*atomic*，这意味着它可以安全地同时使用（即一次在多个线程中使用）。为此，将类型更改为：

```
private static AtomicInteger next_id = new AtomicInteger(0); 
```

增量和读取操作和复位操作变为：

```
this.id = students.next_id.incrementAndGet();  // like "++next_id"

students.next_id.set(n);                       // like "next_id = n" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-09T03:22:24.083

## 请注意，使用静态变量来跟踪您的计数器在非常有限的情况下工作。

您不能在多台机器上运行此代码，例如，如果它是一个 Web 应用程序，那么它是一个 Web 集群。此外，静态变量是瞬态的，将在您重新启动应用程序时重置。

生成顺序 ID 的常见解决方案是使用数据库。大多数数据库都有内置的方法来做到这一点。例如，`IDENTITY`在 SQL Server 或`AUTO_INCREMENT`MySQL 中。

考虑使用像 Hibernate 这样的持久性框架，您可以声明许多经过验证的策略之一，例如[身份、hilo 或 uuid](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html#mapping-declaration-id)，其中一些是顺序的，而另一些则不是。有些是由应用程序生成的，有些是由数据库生成的，但权衡是有据可查的，您会知道自己在做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T02:34:28.397

你应该`private int id;`改变 to`private static int id;`和`id++`to `++id`。

你可以试试：

```
class Students{
    private static int id;
    private String name;
    public Students(String name){
    this.id=++id; // this.id +=1；may be better 
    System.out.println(this.id);
    this.name = name;
   }
} 
```

测试代码：

```
public class Test {
public static void main(String[] args) {
    Students s1 = new Students("Mark1");
    Students s2 = new Students("Mark2");
} 
```

}

# javascript - 如何检查元素是否在 iframe 内

> ID：12336031
> 
> 赞同：1
> 
> 时间：2012-09-09T02:19:34.067
> 
> 标签：javascript, html, iframe

假设您有一个 DOM 节点，并且您想知道它是否位于 iframe 内。一种方法是检查它的父链，看看您是否在到达父窗口之前到达了 iframe。但是，我想知道是否有更快的方法来做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T02:42:04.487

您可能可以检查节点的[`ownerDocument`属性](https://developer.mozilla.org/en-US/docs/HTML/Element/iframe)：

```
if(node.ownerDocument !== document) {
    // node must be inside iframe
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-14T19:09:56.680

最适合我的方法是 `const isElementInsideIframe = document.location.ancestorOrigins.length` [https://developer.mozilla.org/en-US/docs/Web/API/Location/ancestorOrigins](https://developer.mozilla.org/en-US/docs/Web/API/Location/ancestorOrigins)

# java - 使用 DateTime 将当前日期与另一个日期进行比较

> ID：12336032
> 
> 赞同：1
> 
> 时间：2012-09-09T02:19:46.270
> 
> 标签：java, datetime, jodatime

我刚开始查看 JODA 库，我想查看当前时间，看看它是否在数据库中时间戳的 3 天内。

我正在查看他们 API 上的示例：

```
public boolean isRentalOverdue(DateTime datetimeRented) {
  Period rentalPeriod = new Period().withDays(2).withHours(12);
  return datetimeRented.plus(rentalPeriod).isBeforeNow();
} 
```

我从数据库中获取一个字符串来创建一个日期对象：

```
DateFormat formatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
Date date = (Date)formatter.parse(startDate); 
```

如何查看我的代码中的 Date 对象是否在当前时间的 3 天内？：

```
Period threeDays = new Period().withDays(3);
boolean withinThreeDays = date.plus(threeDays).isBeforeNow(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T17:46:54.930

您可以不从字符串中解析 Joda 日期，并在没有`SimpleDateFormat`和的情况下进行检查`Period`

```
DateTimeFormatter dtf = DateTimeFormat.forPattern("yyyy-MM-dd HH:mm:ss");  
DateTime dateTime = dtf.parseDateTime(startDate);  
boolean withinThreeDays = dateTime.plusDays(3).isBeforeNow(); 
```

# wxwidgets - wxWidgets GUI + 控制台/模拟控制台（wxTextCtrl？）

> ID：12336033
> 
> 赞同：3
> 
> 时间：2012-09-09T02:20:13.133
> 
> 标签：wxwidgets

我有一个 wxWidgets GUI 程序，我想为标准输出/等附加一个标准控制台窗口。要去。

如果有人知道如何做到这一点（一个 GUI 应用程序*和*一个控制台窗口），那就太好了。但是，环顾四周，我怀疑这不是直接可能的。

基于[这个类似的线程](https://stackoverflow.com/questions/2457065/attaching-the-console-with-the-gui-in-wxwidgets)，我得到的印象是这可以在单独的 wxFrame 中使用 wxTextCtrl 进行模拟。如果这是一个好方法，是否有在任何地方进行的例子？还有其他方法可以做到这一点吗？

编辑：我希望拥有（或至少尽可能接近地模拟）控制台窗口 - 所以，黑色背景，具有固定宽度字体的白色字符等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T08:25:41.150

例如，您可以重定向`std::cout`到`wxTextCtrl`使用[wxStreamToTextRedirector](http://docs.wxwidgets.org/trunk/classwx_stream_to_text_redirector.html%5d)，但它并不能真正取代 Windows 下的真实控制台或 Unix 下的 PTY，因为只有文本输出通过`std::cout`将被重定向，但不会使用`printf()`或任何其他功能打印任何内容。如果您需要后者，您需要做一些特定于平台的事情，在这种情况下，您应该告诉您正在使用哪个平台以及您需要做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T12:24:12.787

我建议从标准输出“升级”到更灵活的 wxWidgets 日志记录类。 [这是一个概述。](http://docs.wxwidgets.org/2.9.4/overview_log.html)

# sql-injection - 防止SQL注入的正则表达式

> ID：12336034
> 
> 赞同：0
> 
> 时间：2012-09-09T02:20:29.067
> 
> 标签：sql-injection

我知道我必须转义单引号，但我只是想知道是否还有其他字符或文本字符串我应该提防

我正在使用 mysql 和 h2 数据库...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:52:41.227

如果您检查所有高级语言都使用的 MySQL 函数[mysql-real-escape-string ，您会发现奇怪的字符列表非常大：](http://dev.mysql.com/doc/refman/5.5/en/mysql-real-escape-string.html)

*   \
*   '
*   "
*   空（ASCII 0）
*   \n
*   \r
*   控制+Z

像 PHP 这样的高级语言包装器也可以保护字符串免受**格式错误的 unicode 字符**的影响，这些字符可能最终成为引号。

结论是：**不要对字符串进行转义**，尤其是对于难以调试、难以阅读、难以理解的正则表达式。使用**内置提供的函数**或使用**参数化 SQL 查询**（其中所有参数不能包含任何被引擎解释为 SQL 的内容）。这在 h2 文档中也有说明：[h2 db sql injection protection](http://www.h2database.com/html/advanced.html#sql_injection)。

> 上述问题的一个简单解决方案是使用准备好的语句：

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T02:39:12.167

这在一定程度上取决于您需要从用户那里获得什么类型的信息。如果您只是在寻找简单的文本，那么您不妨忽略用户可能输入的所有特殊字符（如果不是太麻烦的话）——为什么允许用户输入在您的查询中没有意义的字符？

某些语言具有可以为您解决此问题的功能。例如，PHP 有 mysql_real_escape_string() 函数 ( [http://php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php) )。

您是正确的，单引号 (') 是用户输入的禁忌；但是双引号 (") 和反斜杠 (\) 也绝对应该被忽略（请参阅上面的链接了解 PHP 函数忽略哪些字符，因为这些是最重要和最基本的字符）。

希望这至少是一个好的开始！

# c++ - 简单来说，ostream中flush()的作用是什么

> ID：12336035
> 
> 赞同：6
> 
> 时间：2012-09-09T02:20:37.163
> 
> 标签：c++, iostream, flush, ostream

根据来自：[http](http://www.cplusplus.com/reference/iostream/ostream/flush/) ://www.cplusplus.com/reference/iostream/ostream/flush/ 的定义，尚不清楚该功能为何存在，以及您将其用于什么目的。为什么不每次写入流时调用flush()？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-09T02:37:54.617

这个词很可能`flush`来自你在现实生活中会冲洗的东西。一个厕所...

所以让我们尝试一个厕所类比：

每次有新的放入碗中时冲洗非常耗时并且完全浪费水。这是今天每个人都在努力做到环保的一个大问题。

那么你会怎么做呢？您可以通过将其全部保存并在最后刷新一次来缓冲它。如果出于某种原因，当你没有完成时，你总是可以“过早地”在中间的某个地方冲洗。

* * *

C++ 流（除其他外）的工作方式大致相同。为了减少开销并提高性能，流会缓冲其内容并仅定期“刷新”它。这样做的缺点是你可能会得到像这个问题中的“延迟”行为：[为什么 printf 在调用后不刷新，除非换行符在格式字符串中？](https://stackoverflow.com/questions/1716296/why-does-printf-not-flush-after-the-call-unless-a-newline-is-in-the-format-strin)

这就是`flush()`它的用途。允许您覆盖缓冲。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T02:34:25.033

每次在硬盘上写入一个字符是低效的。通过网络为每个字符发送一个数据包是低效的。因此流媒体经常被缓存。`flush()`当必须刷新缓存并且应该真正发送或写入内容时，这只是在流式传输期间“手动”控制的一种方式。

# html - html - 表格 - 无效标记

> ID：12336036
> 
> 赞同：1
> 
> 时间：2012-09-09T02:21:17.250
> 
> 标签：html, ruby-on-rails, haml

我知道在表格行内有一个表格是不正确的。不过，这样做似乎有一个实际的理由。

我希望能够单独编辑每一行（ajax 等），所以每个 for 都是它自己的形式是有道理的。

下面是我需要如何布置表格和表单的功能，但标记无效。此外，haml/erb 实际上不会像这样处理标记（表单在第一个单元格内打开和关闭）。

我可以使用 display: table-cell 等，但我认为我正在显示的数据在语义上确实属于表格。

如何使用适当的标记完成相同的功能？

```
<table>
<thead>
  <tr>
    <th>id</th>
    <th>name</th> 
    <th>email</th>
    <th>phone</th>
    <th>address</th> 
  </tr>
</thead>
<tbody>
  <tr>
    <%= form_for person do |f| %>
      <td><%= id %></td>
      <td><%= f.text_field :name%></td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    <% end %>
  </tr>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T02:28:35.060

```
<table>
<thead>
  <tr>
    <th>id</th>
    <th>name</th> 
    <th>email</th>
    <th>phone</th>
    <th>address</th> 
  </tr>
</thead>
<tbody>
  <tr>
    <td>
      <%= form_for person do |f| %>
        <table>
          <tr>
            <td><%= id %></td>
            <td><%= f.text_field :name%></td>
            <td>...</td>
            <td>...</td>
            <td>...</td>
          </tr>
        </table>
      <% end %>
    </td>
  </tr>
</tbody>
</table> 
```

# objective-c - 为什么我第一次执行动画时会出现延迟？

> ID：12336041
> 
> 赞同：0
> 
> 时间：2012-09-09T02:22:20.247
> 
> 标签：objective-c, ios, animation

我正在使用`imageWithContentsOfFile:`将我的 .png 图像加载到数组中。当`IBAction`触发动画时，动画开始前会有明显的延迟。然后，每次之后，它都会顺利执行。我最初尝试使用该`imageNamed:`方法加载它们，但遇到了相同的延迟以及设备上的大性能问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:20:48.043

而是在 ViewWillLoad 中加载图像。

如果这不起作用，请使用开发人员工具 Instruments（内置于 xcode）来查找导致性能下降的原因。在 iOS -> 图形菜单下选择 Open GL ES 驱动程序。然后勾选隐藏系统库。然后它将向您显示哪些方法需要很长时间，单击这些方法以查看确切的行，然后尝试找出替代方法来执行此操作。

# javascript - 是否可以在不更改上下文的情况下调用 function.apply？

> ID：12336044
> 
> 赞同：35
> 
> 时间：2012-09-09T02:22:47.313
> 
> 标签：javascript, node.js, function

在一些 Javascript 代码（特别是 node.js）中，我需要在不更改上下文的情况下调用具有一组未知参数的函数。例如：

```
function fn() {
    var args = Array.prototype.slice.call(arguments);
    otherFn.apply(this, args);
} 
```

上面的问题是，当我调用 时`apply`，我通过`this`作为第一个参数传递来更改上下文。我想在**不**改变`args`被调用函数的上下文的情况下传递给被调用的函数。我基本上想这样做：

 **```
function fn() {
    var args = Array.prototype.slice.call(arguments);
    otherFn.apply(<otherFn's original context>, args);
} 
```

**编辑：**添加有关我的具体问题的更多详细信息。我正在创建一个客户端类，其中包含一个套接字（socket.io）对象以及与连接有关的其他信息。我通过客户端对象本身公开套接字的事件侦听器。

```
class Client
  constructor: (socket) ->
    @socket    = socket
    @avatar    = socket.handshake.avatar
    @listeners = {}

  addListener: (name, handler) ->
    @listeners[name] ||= {}
    @listeners[name][handler.clientListenerId] = wrapper = =>
      # append client object as the first argument before passing to handler
      args = Array.prototype.slice.call(arguments)
      args.unshift(this)
      handler.apply(this, args)  # <---- HANDLER'S CONTEXT IS CHANGING HERE :(

    @socket.addListener(name, wrapper)

  removeListener: (name, handler) ->
    try
      obj = @listeners[name]
      @socket.removeListener(obj[handler.clientListenerId])
      delete obj[handler.clientListenerId] 
```

请注意，这是一个自定义唯一标识符属性，与[此处找到的答案](https://stackoverflow.com/a/7579956/107277)`clientListenerId`基本相同。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-17T17:34:45.180

如果我理解正确：

```
 changes context
                   |    n     |      y       |
accepts array    n |  func()  | func.call()  |
of arguments     y | ???????? | func.apply() | 
```

PHP 有一个功能，`call_user_func_array`. 不幸的是，JavaScript 在这方面缺乏。看起来您使用`eval()`.

```
Function.prototype.invoke = function(args) {
    var i, code = 'this(';
    for (i=0; i<args.length; i++) {
        if (i) { code += ',' }
        code += 'args[' + i + ']';
    }
    eval(code + ');');
} 
```

是的，我知道。没有人喜欢`eval()`。它缓慢而危险。但是，在这种情况下，您至少不必担心跨站点脚本，因为所有变量都包含在函数中。真的，JavaScript 没有用于此的本机函数实在是太糟糕了，但我想我们有`eval`.

证明它有效：

```
function showArgs() {
    for (x in arguments) {console.log(arguments[x]);}
}

showArgs.invoke(['foo',/bar/g]);
showArgs.invoke([window,[1,2,3]]); 
```

火狐控制台输出：

```
--
[12:31:05.778] "foo"
[12:31:05.778] [object RegExp]
[12:31:05.778] [object Window]
[12:31:05.778] [object Array] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-08-21T15:11:17.190

Simply put, just assign the this to what you want it to be, which is **otherFn**:

```
function fn() {
    var args = Array.prototype.slice.call(arguments);
    otherFn.apply(otherFn, args);
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-09T02:28:18.540

' `this`'**是**对函数上下文的引用。这才是重点。

如果您的意思是在这样的不同对象的上下文中调用它：

```
otherObj.otherFn(args) 
```

然后只需将该对象替换为上下文：

```
otherObj.otherFn.apply(otherObj, args); 
```

应该是这样的。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-10-27T06:17:50.697

If you bind the function to an object and you use everywhere the bound function, you can call apply with null, but still get the correct context

```
var Person = function(name){
    this.name = name;
}
Person.prototype.printName = function(){
    console.log("Name: " + this.name);
}

var bob = new Person("Bob");

bob.printName.apply(null); //window.name
bob.printName.bind(bob).apply(null); //"Bob" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-21T00:30:58.873

解决调用函数时 JavaScript 中可能发生的上下文更改的一种方法是，如果您需要它们能够在`this`不意味着的上下文中操作，则使用作为对象构造函数一部分的方法父对象，通过有效地创建一个本地私有变量来存储原始`this`标识符。

我承认——就像大多数关于 JavaScript 范围的讨论一样——这并不完全清楚，所以这里是我如何做到这一点的一个例子：

```
function CounterType()
{
    var counter=1;
    var self=this; // 'self' will now be visible to all

    var incrementCount = function()
    {
        // it doesn't matter that 'this' has changed because 'self' now points to CounterType()
        self.counter++;
    };

}

function SecondaryType()
{
    var myCounter = new CounterType();
    console.log("First Counter : "+myCounter.counter); // 0
    myCounter.incrementCount.apply(this); 
    console.log("Second Counter: "+myCounter.counter); // 1
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-08-03T13:29:41.397

这些天你可以使用[休息参数](https://javascript.info/rest-parameters-spread-operator)：

```
function fn(...args) {
    otherFn(...args);
} 
```

唯一的缺点是，如果你想在 中使用一些特定的参数`fn`，你必须从 中提取它`args`：

```
function fn(...args) {
    let importantParam = args[2]; //third param
    // ...
    otherFn(...args);
} 
```

这是一个尝试的示例（ES 下一个版本以保持简短）：

```
// a one-line "sum any number of arguments" function
const sum = (...args) => args.reduce((sum, value) => sum + value);

// a "proxy" function to test:
var pass = (...args) => sum(...args);
console.log(pass(1, 2, 15));
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-10T22:27:44.547

Since you seem to want to be using the `bind` function as it is defined in Javascript 1.8.5, and be able to retrieve the original `this` object you pass the bind function, I recommend redefining the `Function.prototype.bind` function:

```
Function.prototype.bind = function (oThis) {
    if (typeof this !== "function") {
        throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");
    }

    var aArgs = Array.prototype.slice.call(arguments, 1),
        fToBind = this,
        fNOP = function () {},
        fBound = function () {
            return fToBind.apply(this instanceof fNOP && oThis
            ? this
            : oThis,
            aArgs.concat(Array.prototype.slice.call(arguments)));
        };

    fNOP.prototype = this.prototype;
    fBound.prototype = new fNOP();

    /** here's the additional code **/
    fBound.getContext = function() {
        return oThis;
    };
    /**/

    return fBound;
}; 
```

Now you can retrieve the original context that you called the `bind` function with:

```
function A() {
    return this.foo+' '+this.bar;
}

var HelloWorld = A.bind({
    foo: 'hello',
    bar: 'world',
});

HelloWorld(); // returns "hello world";
HelloWorld.getContext(); // returns {foo:"hello", bar:"world"}; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-09T12:40:40.693

我不会接受这个作为答案，因为我仍然希望有更合适的东西。但这是我现在根据迄今为止对这个问题的反馈使用的方法。

对于将调用`Client.prototype.addListener`or的任何类`Client.prototype.removeListener`，我确实将以下代码添加到它们的构造函数中：

```
class ExampleClass
  constructor: ->
    # ...
    for name, fn of this
      this[name] = fn.bind(this) if typeof(fn) == 'function'

   message: (recipient, body) ->
     # ...

   broadcast: (body) ->
     # ... 
```

在上面的示例中，`message`并且在实例化时`broadcast`将始终绑定到新的`ExampleClass`原型对象，从而允许`addListener`我原始问题中的代码工作。

我相信你们中的一些人想知道为什么我不只是做如下的事情：

```
example = new ExampleClass
client.addListener('message', example.bind(example))
# ...
client.removeListener('message', example.bind(example)) 
```

问题是每次`.bind( )`调用都是一个新对象。所以这意味着以下情况是正确的：

```
example.bind(example) != example.bind(example) 
```

因此，`removeListener`永远不会成功，因此我在实例化对象时绑定该方法一次。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-11-30T22:49:19.510

I was just reminded of this question after a long time. Looking back now, I think what I was really trying to accomplish here was something similar to how the React library works with its automatic binding.

Essentially, each function is a wrapped bound function being called:

```
function SomeClass() {
};

SomeClass.prototype.whoami = function () {
  return this;
};

SomeClass.createInstance = function () {
  var obj = new SomeClass();

  for (var fn in obj) {
    if (typeof obj[fn] == 'function') {
      var original = obj[fn];

      obj[fn] = function () {
        return original.apply(obj, arguments);
      };
    }
  }

  return obj;
};

var instance = SomeClass.createInstance();
instance.whoami() == instance;            // true
instance.whoami.apply(null) == instance;  // true 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-09-09T09:33:06.600

只需将属性直接推送到函数的对象并使用它自己的“上下文”调用它。

```
function otherFn() {
    console.log(this.foo+' '+this.bar); // prints: "hello world" when called from rootFn()
}

otherFn.foo = 'hello';
otherFn.bar = 'world';

function rootFn() {
    // by the way, unless you are removing or adding elements to 'arguments',
    // just pass the arguments object directly instead of casting it to Array
    otherFn.apply(otherFn, arguments);
} 
```**

# javascript - HTML 下拉列表未映射到 MVC 模型

> ID：12336046
> 
> 赞同：0
> 
> 时间：2012-09-09T02:24:42.040
> 
> 标签：javascript, jquery, asp.net-mvc

选择标记应该如何准确地映射到 MVC 模型变量，我已经尝试了所有我能想到的方法，但是每次我检查控制器上的 post 方法时，应该绑定到下拉列表的变量返回 null。

**看法：**

```
<script type="text/javascript">
var counter = 1;
$('#btnAddLocation').click(function (e) {
    e.preventDefault();
    $("#tblAddLocation").find('tbody')
            .append($('<tr>')
                .append($('<td>')
                    .append($('@Html.LabelFor(m => m.Location)')
                    )
                )
                .append($('<td>')
                    .append($('<select name=Location id=Location' + counter++ + ' class=gradientTextbox>')
                    )
                )
                .append($('<td>')
                    .append($('@Html.LabelFor(m => m.Description)')
                    )
                )
                .append($('<td>')
                    .append($('@Html.EditorFor(m => m.Description)')
                    )
                )
            );

    $.getJSON("/Locations/GetAllLocations", function (data) {
        var items = "<option selected></option>";
        $.each(data, function (i, item) {
            items += "<option value='" + item.Value + "'>" + item.Text + "</option>";
        });

        $("#Location" + (counter - 1)).html(items);
    });
});
</script> 
```

**控制器：**

```
[HttpPost]
    public ActionResult ActionName(MyModel model, List<string> Location, List<string> Description) {
        return Json(new { success = true });
    } 
```

控制器代码中的 Description 变量工作正常，但 Location 列表返回正确的计数，但所有项目均为空。

有关如何处理此问题的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T02:27:00.223

为了使绑定起作用，`Location`应该是一个`string`值。它不会通过所有`<option>`的，而是会通过当前的`selectedvalue`

```
[HttpPost]
public ActionResult ActionName(MyModel model, string Location, List<string> Description) {
    return Json(new { success = true });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T02:52:53.713

好吧，我想出了解决方案。

**Html.DropDownListFor 版本**

```
<select id="Location" name="Location" class="gradientTextbox">
    <option>option 1</option>
    <option>option 2</option>
    <option>option 3</option> 
```

**我的版本**

```
<select id="Location1" class="gradientTextbox" name="Location">
    <option selected=""></option>
    <option value="null">option 1</option>
    <option value="null">option 2</option>
    <option value="null">option 3</option> 
```

注意到细微的差别，问题的真正问题在于这行代码：

```
items += "<option value='" + item.Value + "'>" + item.Text + "</option>"; 
```

为了修复我的代码，上述行应替换为：

```
items += "<option>" + item.Text + "</option>"; 
```

问题已解决。感谢@Gabe 的帮助

# c# - Revit API 代码单元测试

> ID：12336047
> 
> 赞同：3
> 
> 时间：2012-09-09T02:24:55.090
> 
> 标签：c#, revit, revit-api

是否可以在不运行 Revit 的情况下创建我自己的 Revit API 代码的单元测试，该代码与 Revit DB 模型交互。

如果是这样，如何实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:18:13.707

我参与了一些提到的线程。我什至参与过一个项目，该项目有一个非常完善的 Revit 单元测试框架（很遗憾我不能分享）。

但这里是我可以告诉你的方法：你需要构建自己的基本框架来执行测试。它作为 Revit 内部的插件运行（您必须启动 Revit，选择插件，然后选择要运行的测试工具程序集）。之后，它很像 xUnit、MSTest 等。我认为我们有一些额外的测试属性，甚至可以将每个测试指向特定的测试模型。

整个事情的麻烦在于您必须启动 Revit，正如您所知，这可能需要一些时间（并且使该过程比在传统开发中使用单元测试方便得多）。在 Autodesk 决定进一步开放之前，这就是您所坚持的（除非您采用“Revit Python Shell”方法......我想我只是指传统的 .NET 语言）。

祝你好运...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-13T17:08:13.010

Dynamo 项目包括[Dynamo Revit 测试框架](https://github.com/ikeough/Dynamo/wiki/Dynamo-Revit-Test-Framework)，它允许您在 Revit API 上运行 NUnit 测试。它处理日志文件的生成，以创建单独的 Revit 会话以单独进行测试（测试也可以作为一个 revit 会话中的夹具一起运行）。它目前面向 Dynamo，但很容易适应非 Dynamo 使用。[作为Dynamo 项目](https://github.com/ikeough/Dynamo)的一部分，它是开源的。

此外，如果您对源代码进行了改进，请随时提出拉取请求。我们一直在寻找好的贡献。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T02:36:38.710

您可以将 API 代码抽象为一个接口，然后在一组模拟对象上实现它以用于测试：

[单元测试：模拟对象来救援！](http://msdn.microsoft.com/en-us/magazine/cc163904.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T03:27:05.730

我不确定你能找到比这里 [http://forums.augi.com/showthread.php?98536-Unit-testing-with-Revit-API](http://forums.augi.com/showthread.php?98536-Unit-testing-with-Revit-API) 和这里 [http://darenatwork.blogspot 描述的更多关于 Revit 单元测试的信息。 com/2010/11/unit-testing-revit-plugins_10.html](http://darenatwork.blogspot.com/2010/11/unit-testing-revit-plugins_10.html)

或者您可能会找到自己的方式来使用 Revit API 进行单元测试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-13T17:46:43.457

Jeremy Tammik 写了一篇关于这个主题的博文

[http://thebuildingcoder.typepad.com/blog/2013/07/revit-add-in-unit-testing.html](http://thebuildingcoder.typepad.com/blog/2013/07/revit-add-in-unit-testing.html)

# javascript - 将可拖动 div 的位置保存到本地存储？

> ID：12336048
> 
> 赞同：1
> 
> 时间：2012-09-09T02:25:09.667
> 
> 标签：javascript, jquery, cookies, local-storage

我正在重写我的代码，允许用户在 iOS 上拖动 div 以使其更干净，我希望实现的更改之一是使用`localstorage`保存和检索每个 div 的位置。

jQuery：

```
$(".drag").each(function () {
    var drag = this;
    xPos = drag.offsetWidth / 2;
    yPos = drag.offsetHeight / 2;
    drag.addEventListener("touchmove", function() {
        event.preventDefault();
        $(this).css({
            "left" : event.targetTouches[0].pageX - xPos + "px", 
            "top" : event.targetTouches[0].pageY - yPos + "px",
            "z-index" : "101",
        });
        $("div").not(this).css("z-index", "100");
    });
}); 
```

之前，我使用 cookie 设置了位置：

```
$(window).unload(function () {
    $(".remember").each(function () {
        $.cookie(this.id, this.value, {
            expires: 365
        });
    });
    $(".draggable").each(function () {
        var a = $(this);
        $.cookie(this.id, a.css("top") + "_" + a.css("left"), {
            expires: 365
        });
        $.cookie("disp" + this.id, a.css("display"), {
            expires: 365
        });
    });
}); 
```

每个可拖动的 div 上面都有一个`.draggable`类，如果我想保存文本框的值，它上面有一个`.remember`类。

更新它是否值得/实用`LocalStorage`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T03:07:10.160

Localstorage 是比 cookie 更好的地方。因为您不会随每个请求向服务器发送额外的字节等等。请记住，cookie 的大多数问题仍然存在于向 localStorage 的过渡 - 来自多个选项卡和同一域的脚本可能会弄乱您存储的数据，但我假设它是您自己的站点，没有第三方包含，您应该担心。

# modernizr - 使用 Modernizr 触发脚本

> ID：12336050
> 
> 赞同：0
> 
> 时间：2012-09-09T02:26:01.787
> 
> 标签：modernizr

我正在尝试学习 Modernizr（或者我应该说如何使用它）并且似乎被卡住了。

*如果浏览器不*支持 CSS3 动画，我想触发一个脚本

我设置了modernizr来检查css动画，我有这个脚本（在页面底部）：

```
if (Modernizr.cssanimations) {
    //Script to Run
} 
```

当我打开 Firefox（支持 CSS3 动画）时，脚本会触发。当我打开 IE（不支持 CSS3 动画）时，脚本不会触发。

我在这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T02:33:51.983

Modernizr 的标志告诉您该功能是否*受支持。*所以你的`if`陈述是说“如果支持 CSS 动画，那就做点什么”。*这与你所说的完全相反——如果不*支持CSS 动画，你想做一些事情。

改为这样做：

```
if (!Modernizr.cssanimations) {
    //Script to Run
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T02:33:22.627

在您的情况下，您应该使用 ! 在 Modernizr.cssanimations 之前或使用 else 语句。

# drupal - Drupal 7 - 成功安装后，看似随机的操作会造成永久性服务器错误

> ID：12336058
> 
> 赞同：0
> 
> 时间：2012-09-09T02:28:45.373
> 
> 标签：drupal, server-error

我第一次使用 Drupal (7)。我已经使用自动简单脚本方法和手动方法多次安装它。我正在使用 MERCI 模块来创建预订系统。每次，在多次安装过程中，一个看似简单的操作 - 例如创建分类术语（最近的触发器）或激活标准模块（例如视图）都会导致永久 500 服务器错误，并穿插正确加载的主页不允许用户继续访问更多链接的页面。

在这里查看网站：www.browntv.org/mgmt

首次加载时 - 您将收到服务器错误或正确加载的页面。如果页面加载正确，单击任何链接应导致空白屏幕、服务器错误或其他重定向。

老实说，我什至不知道从哪里开始诊断。我不知道会在哪里记录错误（如果有的话），也无法弄清楚如何手动倒退我的 MySQL 数据库以尝试删除导致问题的任何原因。

任何线索、建议或想法都会非常有帮助。到目前为止，我一直在创建一个新的安装，认为问题源于安装问题。然而它已经发生了很多次，现在我不能只是从头开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T01:51:24.933

我没有在您的网站上看到任何错误，实际上它让我注册了一个新帐户。

话虽如此，从错误消息中应该很明显，500 是*内部*服务器错误，没有人能够仅通过访问公共 url 来确定原因。这是您服务器上的配置文件错误。通常，语法错误会给您一个一致的，而不是零星的 500。

虽然我在 MERCI 方面拥有丰富的经验，但按照您描述问题的方式，这与它没有任何关系。

如果问题仍然存在，您应该检查您的 Apache 错误日志。

# c - C - 如何操作 typedef 结构指针？

> ID：12336059
> 
> 赞同：2
> 
> 时间：2012-09-09T02:28:55.637
> 
> 标签：c, pointers, struct, typedef

```
typedef struct
{
int id;
char*  first;
char* last;
}* person;

person* people; 
```

你好。我如何使用上面所有设置的全局来填充不同“人”的人？关于 typedef 结构指针，我遇到了一些问题。我知道指针就像数组一样，但是我在将它们放在一起时遇到了问题...

我也想保留上面的代码。

编辑 1： char first 应该是 char* first。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T04:03:13.403

丑陋如罪。你真的应该重新定义人不是指针。也不要使用匿名结构。

```
#include <stdio.h>

typedef struct {
    int id;
    char*  first;
    char* last;
}* person;

person* people = (person[]){
    (person)&(struct {int id;char*  first;char* last;}){0,"me","foo"},
    (person)&(struct {int id;char*  first;char* last;}){0,"you","foo"},
    NULL
};

int main(void) {
    while(*people) {
        printf("%s %s\n", (*people)->first, (*people)->last);
        people++;
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T13:08:39.477

**不要为 structs 使用 typedef**。如果你使用带有标签的结构然后做你的事情会更清楚：

```
struct PERSON {
    int id;
    char *first;
    char *last;
};

struct PERSON *people;  /* people is a pointer to a struct PERSON. */

/* Allocate array of 42 struct PERSONS. */
people = malloc (42 * sizeof *people);

/* Now use people[0] to people[41]. */ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T02:39:38.087

您可以使用以下内容简单地创建类型结构数组`person`：

```
people = malloc (num_person * sizeof(person));
for (i = 0; i < num_person; i++) {
     people[i]->first = malloc (size * sizeof(char));
     people[i]->last = malloc (size * sizeof(char));
} 
```

`people struct`在此之后，您可以用不同的参数填充每个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-09T13:00:28.780

隐藏真实类型的 typedef 是个坏主意。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-09T03:25:55.197

如果你真的想要双重间接，我猜是这样的：

```
people = malloc(sizeof(person));
*people = malloc(SOME_NUMBER * sizeof(**people)); 
```

会分配你需要的东西。你会得到一个像这样的个人结构：

```
(*people)[INDEX] 
```

使用特定人员结构时，您还需要为`first`和`last`字符串分配内存：

```
(*people)[INDEX].first = malloc(STRING_SIZE);
(*people)[INDEX].last = malloc(STRING_SIZE); 
```

但是简单地删除疯狂的双重间接将真正清理事情并使一切更容易使用和理解：

```
people = malloc(SOME_NUMBER * sizeof(person));
people[INDEX].first = malloc(STRING_SIZE);
people[INDEX].last = malloc(STRING_SIZE); 
```

# jquery - 简单的 jQuery 帖子在 Internet Explorer 9 上不起作用（访问被拒绝）

> ID：12336060
> 
> 赞同：2
> 
> 时间：2012-09-09T02:29:03.150
> 
> 标签：jquery, internet-explorer, post

我用 JQuery 和 PHP 编写了一个验证器，它可以在除 Internet Explorer 9 之外的所有浏览器中使用。我收到错误消息“SCRIPT5：访问被拒绝”。

jQuery代码

```
$('#contact-send').click(function(){
  $.post('functions/db-contact.php',{
    contact_name: $('#contact-name').val(),
    contact_email: $('#contact-email').val(),
    contact_subject: $('#contact-subject').val(),
    contact_message: $('#contact-message').val()
  },
  function(x){
    console.log(x);
  }
}); 
```

这是响应（x）：

```
<?xml version="1.0"?>
<response>
  <mail>
    <name>1</name>
    <email>1</email>
    <subject>1</subject>
    <message>1</message>
    <status>notok</status>
  </mail>
</response> 
SCRIPT5: Access denied 
```

编辑：我真的不知道可能是什么错误。我添加了数据库联系文件。@布拉德:)

```
<?php
include 'db_login.php';

$name = mysql_escape_string($_POST['contact_name']);
$email = mysql_escape_string($_POST['contact_email']);
$subject = mysql_escape_string($_POST['contact_subject']);
$message = mysql_escape_string($_POST['contact_message']);

echo "<?xml version=\"1.0\"?>\n";
echo "<response>\n";
echo "\t<mail>\n";

$i = 0;
if($name == 'type your name' or $name == '' or strlen(trim($name)) == 0){
  echo "\t\t<name>1</name>\n";
  $i = 1;
}

if($email == 'type your email address' or $email == '' or strlen(trim($email)) == 0){
  echo "\t\t<email>1</email>\n";
  $i = 1;
}

if($subject == 'type subject' or $subject == '' or strlen(trim($subject)) == 0){
  echo "\t\t<subject>1</subject>\n";
  $i = 1;
}

if($message == 'type your message on us' 
  or $message == '' or strlen(trim($message)) == 0){
    echo "\t\t<message>1</message>\n";
    $i = 1;
}

if($i == 1){
  echo "\t\t<status>notok</status>\n";
  echo "\t</mail>\n";
  echo "</response>";
  return false;
}

$sql = "INSERT INTO `d013f578`.`mail` (`id`, `name`, `email`, `subject`, `message`)
       VALUES (NULL, '".$name."', '".$email."', '".$subject."', '".$message."');";
$query = mysql_query($sql) or die;
echo "\t\t<status>ok</status>\n";
echo "\t</mail>\n";
echo "</response>";
?> 
```

不幸的是，我在互联网上没有找到任何有用的提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T15:10:50.867

我找到了解决方案！首先，您必须更改 JQuery 代码。您必须对 Internet Explorer 使用 xdr 请求。在这里 (http://stackoverflow.com/questions/5087549/access-denied-to-jquery-script-on-ie) 您可以找到有关 JQuery 代码方面的更多信息。感谢 Stackoverflow 很棒的社区！:)

```
 $('#contact-send').click(function(){
                if($.browser.msie && window.XDomainRequest) {
                    // Use Microsoft XDR
                    var xdr = new XDomainRequest();
                    xdr.open("POST", "functions/db-contact-xdr.php");
                    xdr.send("&contact_name="+$('#contact-name').val()+"&contact_email="+$('#contact-email').val()+"&contact_subject="+$('#contact-subject').val()+"&contact_message="+$('#contact-message').val()+""); 
                    xdr.onload = function () {
                        var dom = new ActiveXObject("Microsoft.XMLDOM");
                        dom.async = false;
                        dom.loadXML(xdr.responseText);
                        $("mail",xdr.responseText).each(function(id) {
                            var mail = $("mail",xdr.responseText).get(id);
                            }
                        });
                    };
                }else{
                    $.post('functions/db-contact.php',{
                        contact_name: $('#contact-name').val(), 
                        contact_email: $('#contact-email').val(),
                        contact_subject: $('#contact-subject').val(),
                        contact_message: $('#contact-message').val()
                    },function(x){
                        $("mail",x).each(function(id) {
                            var mail = $("mail",x).get(id);
                            }
                        });
                    });
                }
            }); 
```

即使 PHP 代码我不得不更改为发送到 xdr 请求以用作 POST 变量的数据，我也使用了从该页面获取的 PHP 代码：http: [//saltybeagle.com/2009/09/cross-origin-resource-](http://saltybeagle.com/2009/09/cross-origin-resource-)分享演示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T02:35:35.630

注释掉`console.log`声明。在 IE 中，除非控制台（F12 开发人员工具）打开，否则会导致浏览器阻塞。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-16T22:44:07.797

所以，我有 100% 的解决方案。取而代之的是 jquery 1.8，我使用的是 jquery 1.6.4，因此问题不再可用！

# objective-c - gdataobjective-c上传照片报错400照片数据必须设置（picasa）

> ID：12336062
> 
> 赞同：1
> 
> 时间：2012-09-09T02:29:52.563
> 
> 标签：objective-c, ios, ios5, gdata

现在，我正在尝试使用如下所示的 Objective C 客户端将照片上传到 Picasa：

```
GDataServiceGooglePhotos* service =
[self photoService];

// get the URL for the album
NSURL *albumURL = [GDataServiceGooglePhotos
                photoFeedURLForUserID:userEmailAdress albumID:albumName
                   albumName:nil photoID:nil kind:@"album" access:@"all"];

// set a title and description for the new photo
NSDateFormatter *df = [[NSDateFormatter alloc] init];
df.dateFormat  = @"yyyyMMddHHmmssSSSS";
GDataTextConstruct *title, *desc;
title = [GDataTextConstruct textConstructWithString:[df stringFromDate:[NSDate date]]];
desc = [GDataTextConstruct textConstructWithString:[descriptionTextfield text]];

GDataEntryPhoto *newPhoto = [GDataEntryPhoto photoEntry];
[newPhoto setTitle:title];
[newPhoto setPhotoDescription:desc];

// attach the photo data
NSData *data = UIImageJPEGRepresentation(imageView.image, 1.0);
[newPhoto setPhotoData:data];
[newPhoto setPhotoMIMEType:@"image/jpeg"];
[newPhoto setUploadData:data];
[newPhoto setUploadMIMEType:@"image/jpeg"];
[newPhoto setUploadSlug:title.stringValue];

// now upload it
GDataServiceTicket *ticket;
ticket = [service fetchEntryByInsertingEntry:newPhoto forFeedURL:albumURL delegate:self didFinishSelector:@selector(addPhotoTicket:finishedWithEntry:error:)];
[service setServiceUploadProgressSelector:nil]; 
```

这是我的 addPhotoTicket:finishedWithEntry:error: 方法

```
 if (error == nil) {
    NSLog(@"UPLOADED");
} else {
    NSLog(@"THERE WAS AN ERROR");
} 
```

我不断收到“出现错误”，并且 failedWithStatus:400 数据：必须包含照片数据或源 ID。任何帮助是极大的赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T16:34:33.630

如[GooglePhotosSample](http://code.google.com/p/gdata-objectivec-client/source/browse/trunk/Examples/GooglePhotosSample/GooglePhotosSampleWindowController.m)应用程序所示，上传到相册的`uploadLink`. 不要尝试手动制作相册 URL 以进行上传。专辑 ID 不是专辑名称。

`UIImageJPEGRepresentation`很容易失败；检查它是否返回非零数据。

`setPhotoData:`和是和`setPhotoMIMEType:`的同义词；无需同时调用两者。`setUploadData:``setUploadMIMEType:`

`setTitle:`并`setPhotoDescription:`具有“WithString”版本，因此无需显式创建文本结构来设置它们。

启用库的[http 日志记录](http://code.google.com/p/gtm-http-fetcher/wiki/GTMHTTPFetcherIntroduction#HTTP_Logging)以查看实际的服务器请求和响应。

# css - 推送图片或

> ID：12336063
> 
> 赞同：1
> 
> 时间：2012-09-09T02:29:55.310
> 
> 标签：css, wordpress, html

我在面板的标题上放置了一个徽标（Microsoft 徽标）`<center><h2> img scr...</h2></center>`

它在我想要的中心；但是，它在我的面板标题顶部有点高，所以它并不完全位于垂直中心。

这是整个面板的 CSS（包括标题）：

```
.panel {
    background: url("../images/panel_bg2.png") no-repeat scroll 0 0 transparent;
    width:148px;
    height:270px;

}

.panel_header {
    background: url("../images/panel_header_bg.png") no-repeat scroll 0 0 transparent;
    width:149px;
    height:54px;
    position:absolute;

} 
```

这是html：

```
<div class="panel">
<div class="panel_header">
<center><h2><img src="images/ms_logo.png" width="102" height="21" /> </h2></center> 
```

有什么办法可以将图像（Microsoft 徽标）向下移动一点吗？

你可以在这里看到我在说什么：[http](http://www.qubespace.com/certwizard/) ://www.qubespace.com/certwizard/ 面板就在幻灯片的正下方。我只想在标题 div 中将徽标（Microsoft 徽标）向下推一点。我知道我错过了一些东西。

我将不胜感激。

谢谢你 ！

PS：我使用的框架是Wordpress，html放在一个小部件中。我正在使用 U-Design 主题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T02:39:18.437

向您的面板类添加一个 margin-top 规则以向上或向下移动 Microsoft 徽标。负值向上移动，正值向下。如果要居中，请将边距设置为`margin:0 auto;`

# javascript - 如何从 textarea 获取数据并使用 javascript 解密？

> ID：12336065
> 
> 赞同：-2
> 
> 时间：2012-09-09T02:30:17.387
> 
> 标签：javascript, encryption

我需要从网站上的文本区域获取数据并使用简单的算法对其进行解密。数据采用逗号分隔的数字形式。它还需要将空格读取为空格。它看起来像 42,54,57, ,57,40,57,44。继承人我到目前为止：

```
var my_textarea = $('textarea[name = "words"]').first();
var my_value = $(my_textarea).val();
var my_array = my_value.split(",");

for (i=0; i < my_array.length; i++)
{
var nv = my_array - 124;
var acv = nv + 34;
var my_result = String.fromCharCode(acv);
}

prompt("", my_result); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T03:36:38.493

我不知道您对`nv`and`acv`变量做了什么，但是我对您的代码进行了一些修改。

首先，您需要`my_array[i]`在 for 循环中引用单个数组片段。其次，除非您告诉它，否则它不会将空格视为空格-您需要检查空格并将其转换为空格字符（32）。

因此，完成（和工作）的代码是：

```
var my_textarea = $('textarea[name = "words"]').first();
var my_value = $(my_textarea).val();
var my_array = my_value.split(",");
var my_result = '';
for (i = 0; i < my_array.length; i++) {
    if (my_array[i] == ' ') {
        my_array[i] = 32;
    }
    var acv = my_array[i];
    my_result += String.fromCharCode(acv);

}
prompt("", my_result);​ 
```

[**演示**](http://jsfiddle.net/BCpJQ/)

# java - 获取最后插入记录的主键

> ID：12336066
> 
> 赞同：3
> 
> 时间：2012-09-09T02:30:20.083
> 
> 标签：java, mysql, jpa, jpa-2.0

我有名为 Driver 的实体类，我的主键生成机制是

```
 @Id
 @GeneratedValue(strategy = GenerationType.AUTO)
 private Long id; 
```

现在我需要在Driver中添加“driverCode”属性，它应该是带前缀的唯一值（dri1，dri2），“dri”是前缀值，key应该是Driver的主键值，我想添加第一次创建驱动程序时的驱动程序代码，为此我需要获取最后插入的驱动程序的主键，添加一个，并与前缀连接，任何人都可以告诉如何在插入新的之前获取最后插入的记录的主键记录，有什么简单的方法吗？

先感谢您，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T02:36:55.080

如果[`flush()`](http://docs.oracle.com/javaee/5/api/javax/persistence/EntityManager.html#flush%28%29)您是`EntityManger`，则该`@Id`字段将填充即将保存到数据库中的值，因此您无需查找最后插入的值，因为您已经知道当前插入的值：

```
EntityManger em;
Driver d = new Driver();
em.persist(d);
em.flush();
long id = d.getId(); // this will give you the current record's id 
```

此外，“获取最后插入的 id”非常棘手和危险；它远没有看起来那么简单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-16T10:44:24.217

对我有用的那个

```
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
public int getId() {
    return id;
} 
```

那么你也能

```
object.getId(); 
```

# c++ - 头文件类成员函数声明错误：“嵌套名称说明符中的类型''名称不完整”

> ID：12336069
> 
> 赞同：0
> 
> 时间：2012-09-09T02:31:05.750
> 
> 标签：c++, syntax

我只是将我正在编写的 C++ 程序拆分为多个文件。

现在我为每个成员函数声明都收到了这个错误。

我究竟做错了什么？

```
 3 class Office{
  4     private:
  5         static const int IDLE = 0, BUSY = 1;
  6         const int num_tellers;
  7         int students_served;
  8 
  9         vector<double> que;                                                   // a vector que which holds the arrival times of students entering an Office
 10         vector<int> tellers;                                                 // a vector to hold the status (IDLE or BUSY) of the tellers                *** INITIALIZED TO SIZE tellers[num_tellers] IN CONSTRUCTOR ***
 11 
 12 
 13         variate_generator<mt19937, exponential_distribution<> > serve_time;  // random variable, determines the time it takes a teller to serve a student
 14 
 15     public:
 16 
 17         Office(double const office_mean, int const num_tellers) : num_tellers(num_tellers), tellers(vector<int>(num_tellers, IDLE)),
 18                                                                   serve_time(variate_generator< mt19937, exponential_distribution<> >( mt19937(time(0)), exponential_distribution<>( 1 / office_mean))){
 19         }                                                // initialize tellers vector to size num_tellers w/ tellers[i] = IDLE, accumulated times to , and initializes serve_time random variable

 37 int Office::departure_destination(Event* departure) {     // returns the next destination of a student departing from an Office
 38 
 39     if (departure->depart_from == AID) {
 40         return determine_destination(.15, .15, 0, 0, .70);
 41     else if (departure->depart_from == PARKING)
 42         return next_destination = determine_destination(.3, 0, 0, 0, .7);
 43     else if (departure->depart_from == REGISTRAR)
 44         return next_destination = determine_destination(.25, 0, .1, 0, .65);
 45     else if (departure->depart_from == BURSAR)
 46         return next_destination = determine_destination(0, .1, .2, .1, .60);
 47     else
 48         return -1;
 49 }
 50 
```

然后在头文件中

```
 57 int Office::departure_destination(Event* departure); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T02:42:50.807

好的。遵循这些规则，你应该会得到非常接近的结果：

1.  将类、typedef、#defines、模板和内联函数放在头文件中
2.  用#ifndef/#define/#endif 包装你的头文件，这样意外的多个包含不会导致多个定义的符号
3.  将您的实现放入您的 c++ 文件中，并包含具有 (1) 的此标头。

理解这一点的最简单方法是认识到头文件中的任何内容都不会生成实际的机器指令或数据。标头中的所有内容都是声明性的。它描述了如果使用某些东西（例如，声明一个变量）将如何生成代码或数据*。*您的 C++ 文件需要这些“大纲”，以便在您尝试调用另一个文件中的某个函数、调用对象上的方法等时了解您想要什么。

所有#define 类型的指令都是文本处理。

模板实际上是一种图灵完备的语言，但它们不会生成代码，直到你用它们做一些东西......然后它有点像他们正在生成自己的 C++ 文件。

类声明定义了一个对象将在其中包含什么，如果您选择创建一个。

因此，典型的头文件（比如 my_header）将如下所示：

```
#ifndef MY_HEADER
#define MY_HEADER

extern int global;

class A {
   ... data declarations, inline functions ...
   public:
      void f();
};

#endif 
```

和 C++ 文件：

```
#include "my_header"

int global; // only in ONE C file...this  generates real data

void A::f() { ... generates real code to be linked to ... } 
```

# html - HTML - 身体向下伸展的网页示例？

> ID：12336071
> 
> 赞同：-1
> 
> 时间：2012-09-09T02:32:41.313
> 
> 标签：html, css, webpage

在 Microsoft 的主页 (http://www.microsoft.com/en-us/default.aspx) 中，您是否看到白色背景一直延伸到底部而两侧为灰色？

你如何在 HTML/CSS 中做到这一点？我的意思是，我一直在尝试，但 DIV 不会一直下​​降......

帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T02:37:26.270

好吧，他们的页面有足够的内容来强制页面滚动。[像这样](http://jsbin.com/oherux/1)

如果没有足够的内容，可以将 div 的高度设置为 100%。这里要注意的重要一点是，它将是其父级高度的 100%。这就是为什么您也必须将 html 和正文高度设置为 100%。[**演示**](http://jsbin.com/agorih/2)

```
html, body {
  height: 100%;
}
#contentDiv {
    height:100%;
} 
```

HTML

```
<body>
    <div id="contentDiv">my content here</div>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T02:36:57.523

您必须确保 body 和 html 文件也具有 100% 的高度，因为 100% 是它从父元素的当前高度得到的，所以如果你设置，并且 html 的父级是窗口（文档），这就是你得到一个全高

```
html,body{
height:100%;
width:100%;
background:gray;
}
div{
height:100%;
width:100%;
background:red;
} 
```

你会得到一个红页

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T02:37:54.317

将高度设置为 %100，有时将父元素设置为 position:relative 会使事情变得简单。发布您的 html 和 css，我们可以为您提供更好的帮助。

# vb.net - 浏览器检测下载

> ID：12336072
> 
> 赞同：1
> 
> 时间：2012-09-09T02:32:48.870
> 
> 标签：vb.net, hyperlink, download, visual-studio-2012

我是一名 VB.NET 程序员，我想制作一个简单的应用程序，当在浏览器中单击下载链接时将加载该应用程序。我也想要下载链接的文件名。

我知道像 GetRight 和其他软件这样的应用程序可以做到这一点。

最好的方法是如何做到这一点？是否有一些简单的源代码可供我查看以开始此操作？

谢谢

# c# - 删除项目 GridView Windows 8 Metro

> ID：12336074
> 
> 赞同：0
> 
> 时间：2012-09-09T02:33:10.303
> 
> 标签：c#, xaml, microsoft-metro

我试图从 GridView 控件中删除项目。当我单击删除时，GridView 无法更新

我已将 GridView 与可观察集合中的订单列表绑定。这是我的订单类：

```
public class Order : INotifyPropertyChanged
{
    public Order() { }
    private int _id;
    [PrimaryKey, AutoIncrement]
    public int Id
    {
        get { return _id; }
        set
        {

            this._id = value;
            Notify("ID");
        }
    }
    public int RestaurantID { get; set;}
    public DateTime Date { get; set; }
    public string Note { get; set; }
    public decimal TotalPrice { get; set; }
    [Ignore]
    public List<OrderDetail> OrderDetails { get; set; }

    #region INotifyPropertyChanged Members

    [Ignore]
    public event PropertyChangedEventHandler PropertyChanged;

    [Ignore]
    protected void Notify(string propName)
    {
        if (this.PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propName));
        }
    }
    #endregion
} 
```

这是我的数据绑定代码：

```
 ObservableCollection<Order> orderCollection = new ObservableCollection<Order>();
            foreach (Order ord in orders)
            {
                orderCollection.Add(ord);
            }

            this.DefaultViewModel["Items"] = orderCollection; 
```

我的删除按钮存在于 GridView 的 DataTemplate 中。这是我的删除代码：

```
 private void btnDelete_Click_1(object sender, RoutedEventArgs e)
    {
        Button btnDelete = (Button)sender;
        Order order = btnDelete.DataContext as Order;
        repository.DeleteOrder(order.Id);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T02:37:12.817

看起来代码只是从存储库中删除该项目。您还需要将其从`ObservableCollection`. 尝试在下面添加`repository.DeleteOrder(order.Id)`：

```
orderCollection.Remove(order); 
```

# ruby-on-rails-3 - Rails3 和 Paperclip 的 NoHandlerError

> ID：12336081
> 
> 赞同：4
> 
> 时间：2012-09-09T02:34:27.120
> 
> 标签：ruby-on-rails-3, paperclip

所以这是我关于 StackOverflow 的第一个问题。

我正在尝试在 Rails 3.2.3 上实现 Paperclip，在单击“提交”以使用上传的图像创建配置文件后，我得到：

> 回形针::AdapterRegistry::NoHandlerError in UsersController#update
> 
> 未找到“Screen Shot 2012-09-01 at 11.03.43 AM.png”的处理程序

我的服务器日志显示，

> Paperclip::AdapterRegistry::NoHandlerError（未找到“屏幕截图 2012-09-01 at 11.03.43 AM.png”的处理程序）：app/controllers/users_controller.rb:65:in `block in update' app/controllers/users_controller.rb:64:in`update'

在我的用户模型中，我有

```
attr_accessible :avatar

has_attached_file :avatar, 
        :styles => { 
          :large => "500x500>", 
          :medium => "213x213>", # profile image
          :thumb => "50x50>",
          :smaller => "30x30>" }, 
          :processors => [:cropper],
         # tells paperclip how to crop the image  
        :storage => :s3,
        :s3_credentials => "#{Rails.root}/config/s3.yml", # TODO 
        :path => ":attachment/:id/:style/:basename.:extension",
        :bucket => 'eventsbucket' 
```

无论我是否包含 S3 信息，错误仍然存​​在。在我的迁移中，我有，

```
class AddAvatarColumnsToUsers < ActiveRecord::Migration
  def self.up
    add_attachment :users, :avatar
  end

  def self.down
    remove_attachment :users, :avatar
  end
end 
```

最后，在我的用户控制器更新操作中，我有

```
def update
    respond_to do |format|
      if @user.update_attributes(params[:user])
        sign_in @user
        format.html { redirect_to @user, notice: 'Profile Successfully Updated' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @user.errors, status: :unprocessable_entity }
      end
   end
end 
```

在我的 Gemfile 中，我有 gem "paperclip"、"~> 3.1.4" （更新：我已经直接从thoughtbot 中提取了 Paperclip 并且问题仍然存在）。我已经运行捆绑安装。我已经运行了 db:migrate。我已阅读[此 StackOverflow 条目](https://stackoverflow.com/questions/10033425/paperclip-exception-paperclipadapterregistrynohandlererror)，但无论我是否包含“multipart => true”，错误仍然存​​在。当我尝试[Emerson Lackey Tutorial](http://emersonlackey.com/screencasts/rails-3-with-paperclip.mov)时，它一直运行到他试图显示“5.times ...”命令的输出的地步。

我有兴趣让 Paperclip 工作并了解“NoHandlerError”是什么以及将来如何避免它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:01:07.147

你试过 railscasts 第 134 集吗？

[http://railscasts.com/episodes/134-paperclip?view=asciicast](http://railscasts.com/episodes/134-paperclip?view=asciicast)

# ruby-on-rails - has_and_belongs_to_many HABTM 字段

> ID：12336083
> 
> 赞同：0
> 
> 时间：2012-09-09T02:34:31.500
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

如果我有这种关系，

```
class Article < ActiveRecord::Base
  has_and_belongs_to_many :topics
end

class Topics < ActiveRecord::Base
  has_and_belongs_to_many :articles
end 
```

**我已经在主题**下的表格中存储了一个预定义的主题列表。每篇**文章必须有 3 个**与之关联的主题。如果我*创建一篇新文章，代码从***控制器**和**视图**看起来如何？创建这个的最有效和正确的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T03:18:13.297

在表单中添加三个微调器字段，并使用主题 id 作为数据和主题名称作为标签填充它们。幸运的是，有表单助手可以为您完成大部分繁重的工作。有关的详细信息，[请参见此处](http://guides.rubyonrails.org/form_helpers.html#option-tags-from-a-collection-of-arbitrary-objects)`collection_select`。这是从该链接中获取的示例：

```
<%= collection_select(:person, :city_id, City.all, :id, :name) %> 
```

在您的控制器中，您可以根据选择的 id 创建必要的关联。它应该看起来像这样：

_form.html.erb

```
<% form_for @article do |f| %>
  ...
  <%= collection_select(:article, :topic_id_1, Topic.all, :id, :name) %>
  <%= collection_select(:article, :topic_id_2, Topic.all, :id, :name) %>
  <%= collection_select(:article, :topic_id_3, Topic.all, :id, :name) %>
  ...
<% end %> 
```

acticle_controller.rb

```
def create
  ...
  @article.topics << Topic.find params[:topic_id_1]
  @article.topics << Topic.find params[:topic_id_2]
  @article.topics << Topic.find params[:topic_id_3]
  ...
end 
```

# algorithm - 这两种查找算法有什么区别？

> ID：12336084
> 
> 赞同：3
> 
> 时间：2012-09-09T02:26:14.077
> 
> 标签：algorithm

我有这两个查找算法，对我来说看起来相同。谁能帮我弄清楚为什么它们实际上不同？

```
Find ( x ) :
    if x.parent = x then 
        return x
    else 
        return Find ( x.parent ) 
```

对比

```
Find ( x ) :
    if x.parent = x then 
        return x
    else 
        x.parent <- Find(x.parent)
        return x.parent 
```

我将第一个解释为

```
 int i = 0;    
 return i++; 
```

而第二个作为

```
int i = 0;
int tmp = i++;
return tmp 
```

这对我来说完全一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T05:35:27.097

这看起来像[不相交集数据结构](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=disjointDataStructure)。

现在的问题：

为了清楚起见，第一个版本是`FindA`，第二个是`FindB`。

假设你有结构：

```
 0
 |
 1
 |
 2
 |
...
 n 
```

第一次调用`FindA(n)`将在 O(n) 中返回 0，第二次调用将在 O(n) 中返回 0，依此类推。

如果调用`FindB(n)`它将在 O(n) 中返回 0，但也会修改结构：

```
 0
 / /|\
1 2...n 
```

现在第二次调用 FindB(n) 将在 O(1) 中返回 0。超过 FindB(k) 将在 O(1) 中返回 0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T02:42:17.750

第二个会将 x.parent 的值更改为 find 结果的副作用

# javascript - Javascript嵌套for循环未按预期返回数组

> ID：12336087
> 
> 赞同：0
> 
> 时间：2012-09-09T02:35:32.200
> 
> 标签：javascript, loops, for-loop, nested

我无法理解这个家伙。我有一个通过 AJAX 读取的 CSV 文件，我正在根据返回的内容创建一个数组。我的 CSV 文件如下所示：

```
ID,name,address
0,john,123 fake st
1,bruce,123 fake st
2,john,124 fake st
3,fred,125 fake st
4,barry,126 fake st 
```

我通过 ajax 函数调用它：

```
if (window.XMLHttpRequest) {
    var ajax = new XMLHttpRequest();
} else var ajax = new ActiveXObject("Microsoft.XMLHTTP");

function include(src) {
    ajax.open('GET', src, false);
    ajax.send(null);
    return ajax.responseText;
} 
```

并像这样循环遍历它：

```
var bsf = include('csv.csv');
// construct an array from the first line of the file
// and use that array to name the keys in all further arrays
var cols = bsf.split('\r\n');
var ln1 = cols[0].split(',');
// pull out each line from bsf and turn it into an array
var line = [];
var table = {};
var curRow = [];

for (i = 1; i < cols.length; i++) { // i = 1 so we can skip the 'title' csv line
    curRow = cols[i].split(',');

    for (j = 0; j < curRow.length; j++) {
        line[ln1[j]] = curRow[j];
    }

    table[curRow[0]] = line;
}
console.dir(table); 
```

我有 4 个数组，它们都包含 csv 文件的最后一行，而不是每行一个数组的对象。嵌套的 for 循环正确完成，如果我在将其输入表对象之前 alert(line) ，它会正确返回当前行数组，但仍不会将该数组分配给对象行。

我想要的地方

```
 table{
     0: [id: 0, name: 'john', address: '123 fake st'],
     1: [id: 1, name: 'bruce', address: '124 fake st'],
     ...} 
```

我明白了

```
 table{
     4: [id: 4, name: 'barry', address: '126 fake st'],
     4: [id: 4, name: 'barry', address: '126 fake st'],
     etc.} 
```

有任何想法吗？我感觉我在整个循环中都正确地分配了它们，但是在最后一次运行中，我错误地分配了它们并覆盖了正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T02:42:38.137

您的问题是您只有一个`line`数组可以一遍又一遍地重新填充：

```
for (j = 0; j < curRow.length; j++) {
    line[ln1[j]] = curRow[j];
} 
```

然后将该`line`数组添加到`table`不同的位置：

```
table[curRow[0]] = line; 
```

结果是中的每个条目都`table`将是 中的最后一行`cols`。

您只需将不同的数组放入`table`其中，如下所示：

```
for (i = 1; i < cols.length; i++) {
    line   = [ ]; // <-------- This is the important part!
    curRow = cols[i].split(',');
    for (j = 0; j < curRow.length; j++) {
        line[ln1[j]] = curRow[j];
    }
    table[curRow[0]] = line;
} 
```

# extjs - 如何通过get / post（没关系）打开具有给定参数的新窗口而不会被阻止？

> ID：12336097
> 
> 赞同：1
> 
> 时间：2012-09-09T02:38:33.520
> 
> 标签：extjs, extjs4.1

请注意，**这个问题只是关于 ExtJS**，我知道如何对基本的 HTML 做同样的事情。

我正在创建一个按钮，该按钮放置在“另存为 excel”的每个网格上。显然，我需要打开一个新窗口，并且我希望 url 将我在网格上使用的过滤器（和排序）作为参数。

获取过滤器和排序并不难，我可以直接从商店获取它们，问题是**我不知道如何打开窗口而不被弹出窗口阻止程序阻止**。在 html 中，我应该使用目标空白的表单，添加 2 个隐藏字段，其中包含 values = filters 数组和 sort 数组。然后，当您单击按钮时，将运行提交。这将打开一个新页面，其中传递了参数。

**我不知道如何将我的按钮包含在一个不可见的表单中（我总是使用 form.Panel）**，特别是我注意到 form.Panel 没有任何目标属性，所以我不知道我可以在哪里设置我的 _blank价值。

另外，**是否有可能在 ExtJS 中创建一个具有 target=_blank 作为值的按钮？**显然它应该通过 A 标签构建。

请注意，按钮 actullay 很简单：

```
var excelPrint = Ext.create('Ext.Action', {
  cls: 'icon-excel',
  handler: function() {
    // TODO: Open a new window and filter it same as current grid, the filtered data is an xlsx
    alert("Funzionalità inattiva");
  }
}); 
```

所以基本上我目前没有代码。好吧，我已经构建了所有网格，带有远程过滤等，但对于构​​建它来说没有用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T14:00:43.867

如果您想发出 GET 请求，那么当然可以使用带有`href`和`target`属性的简单按钮/链接。这是一个小的工作示例：

```
Ext.create('Ext.Button', {
    text: 'Click me',
    href: 'http://google.com',
    target: '_blank',
    renderTo: Ext.getBody()
}); 
```

[href](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.button.Button-cfg-href)配置已记录，但目标未记录，但是如果您查看[源代码](http://docs.sencha.com/ext-js/4-0/source/Button2.html)（请参阅 renderTpl 和 getTemplateArgs），您会发现它按预期工作。

如果您想要一个 POST 请求，那么您将按钮（或者如果对您更方便的话也可以是网格）包含在一个也支持该`target`属性并且可以作为常规表单工作的 FormPanel 中是正确的（同步请求，没有 XHR）如果你设置`standardSubmit`为真。

请注意，如果您需要触发文件下载的操作，您实际上不需要打开新窗口（显式或通过`target="blank"`），您可以使用当前浏览器窗口，浏览器将开始下载文件（如果 MIME 类型是合适的）而不实际离开您当前的页面。

如果您还有其他问题，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T07:37:43.140

这就是我所做的。我使用了一个普通的 extjs 窗口并使用了`html`config 选项并像这样在其中放置了一个 iframe

```
Ext.Window({
//other config
html: String.format('<iframe id="report" src="rest/service/report?accountId={0}&caseId={1}" width="780" height="580" />', accountId, caseId)
}); 
```

这解决了弹出窗口阻止程序的问题，并且传递参数要容易得多。

# php - 在模块化 Codeigniter 中，一个模块的控制器如何/应该如何调用另一个模块的功能？

> ID：12336103
> 
> 赞同：3
> 
> 时间：2012-09-09T02:39:53.670
> 
> 标签：php, codeigniter, module, codeigniter-2, hmvc

我正在使用 CodeIgniter 和 wiredesignz 的 HMVC 扩展。

我的网络应用主要处理文本文章。我有一个名为`articles`. 文章模块的模型`articles_model`，包含对文章进行数据库更改的函数。例如，以下内容将更新文章：

```
$this->articles_model->update_article(); 
```

用户仪表板还有另一个模块。用户有时会从他们的仪表板中更新文章。该请求是从仪表板控制器发出的，因为此操作是从仪表板模块中的视图执行的。

在这种情况下，我应该如何让仪表板控制器与文章模型进行通信？到目前为止，我遇到的几个选项是：

1.  `update_article()`在文章控制器中创建一个函数。它所做的只是调用`articles_model`同名的函数。让仪表板控制器调用文章控制器功能`update_article()`。之所以会这样做，是因为我已经读过在模块化设计中，控制器应该是不同模块（[源代码](http://techportal.inviqa.com/2010/02/22/scaling-web-applications-with-hmvc/)）之间的通信点。我还遇到过其他观点，即控制器永远不应该互相交谈。因此我的困惑。

2.  我也可以`update_article()`在`dashboard_model`. 这样，仪表板控制器只需在自己的模块中调用自己的模型。我的直觉告诉我这不是要走的路，因为该`update_article()`函数不仅被仪表板控制器调用，而且还被很多其他函数调用。这将导致大量重复代码。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T03:11:08.067

您可以从另一个模块`articles`的模块加载模型。`articles``Dashboard`

`Dashboard`只需将模型加载到您希望模型可用的模块（例如）的构造函数中，它应该看起来像这样。

```
function __construct() {
  parent::__construct();

  ...

  // this is case sensitive, 1st part is the module, 2nd part is the class name
  $this->load->model('articles/Articles');
} 
```

然后在您的控制器中的任何地方（例如`Dashboard`），您都可以调用`$this->articles_model->update_article();`.

# python - Python反向列表

> ID：12336105
> 
> 赞同：50
> 
> 时间：2012-09-09T02:40:57.093
> 
> 标签：python

我正在尝试反转字符串并使用以下代码，但结果反转列表值为无。

编码：

```
str_a = 'This is stirng'
rev_word = str_a.split()
rev_word = rev_word.reverse()
rev_word = ''.join(rev_word) 
```

它返回`TypeError`. 为什么？

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-09-09T02:52:53.170

这是我个人最喜欢的反转字符串的方法：

```
stra="This is a string"
revword = stra[::-1]

print(revword) #"gnirts a si sihT 
```

或者，如果您想颠倒单词顺序：

```
revword = " ".join(stra.split()[::-1])

print(revword) #"string a is This" 
```

:)

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-09-09T02:43:42.440

[`.reverse()`](http://docs.python.org/tutorial/datastructures.html#more-on-lists)返回`None`。因此，您不应该将其分配给变量。

改用这个：

```
stra = 'This is a string'
revword = stra.split()
revword.reverse()
revword=''.join(revword) 
```

我已经为您[在 IDEOne 上](http://ideone.com/7KnOe)运行了代码，以便您查看输出。（另请注意，输出为`stringaisThis`；您可能希望使用`' '.join(revword)`, 和空格来代替。）

另请注意，您提供的方法仅反转**单词**，而不反转**文本**。@ron.rothman 提供了一个链接，详细说明了如何完全反转字符串。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-09T05:10:08.273

字符串上的各种反转：

```
instring = 'This is a string'
reversedstring = instring[::-1]
print reversedstring        # gnirts a si sihT
wordsreversed = ' '.join(word[::-1] for word in instring.split())
print wordsreversed         # sihT si a gnirts
revwordorder = ' '.join(word for word in instring.split()[::-1])
print revwordorder          # string a is This
revwordandorder = ' '.join(word[::-1] for word in instring.split()[::-1])
print revwordandorder       # gnirts a si sihT 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-09-09T05:20:36.840

供将来参考，当对象具有类似`[].reverse()`它的方法时，通常对对象执行该操作（即，列表已排序并且不返回任何内容，无）与内置函数（例如[`sorted`](http://docs.python.org/library/functions.html#reversed)对对象执行操作并返回值）形成对比（即排序列表）

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-09T05:01:58.387

```
>>> s = 'this is a string'
>>> s[::-1]
'gnirts a si siht'
>>> ''.join(reversed(s))
'gnirts a si siht' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-08T07:38:25.637

for 循环将字符串从 end（最后一个字母）迭代到 start（第一个字母）

```
>>> s = 'You can try this too :]'
>>> rev = ''
>>> for i in range(len(s) - 1, -1, -1):
...     rev += s[i]
>>> rev
']: oot siht yrt nac uoY' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-01T15:42:20.340

根据评论和其他答案：

```
str_a = 'this is a string'
rev_word = ' '.join(reversed(str_a.split())) 
```

毕竟，方法链在 Python 中确实有效......

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-12-29T09:44:31.627

列表反转可以使用不止一种方式完成。
正如前面的答案中提到的，两个非常突出，一个具有`reverse()`功能，两个具有切片功能。我正在就我们应该更喜欢哪一个提供一些见解。我们应该始终使用`reverse()`函数来反转 Python 列表。两个原因，一个就地反转，两个比其他更快。我有一些数据来支持我的回答，

```
In [15]: len(l)
Out[15]: 1000

In [16]: %timeit -n1 l.reverse()
1 loops, best of 3: 7.87 µs per loop

In [17]: %timeit -n1 l[::-1]
1 loops, best of 3: 10 µs per loop 
```

对于 1000 个整数列表，`reverse()`与切片相比，函数执行得更好。

# c# - 使用 C# 创建 Sprite 表，不保存

> ID：12336106
> 
> 赞同：1
> 
> 时间：2012-09-09T02:40:58.103
> 
> 标签：c#, gdi+

好的，所以我现在正在制作一个 spritesheet 制作器，但我遇到了一些障碍。
我已经编写了代码，它成功地将所有图像拉入内存流并将它们放在一起，但是在保存程序时返回一个`Generic GDI+ error`.
我尝试打开另一个内存流以将新位图保存在下面，但事实证明我无法创建虚拟文件的内存流。
无论如何，这是到目前为止的代码：

```
class SpriteMaker
{
    static void Main()
    {
        bool cont = false;
        bool skip = false;
        while (cont == false)
        {
            Console.WriteLine("Enter a Folder name(end to end):");
            string fold = Console.ReadLine();
            if (fold.Equals("end"))
            {
                break;
            }
            try
            {
                string[] files = Directory.GetFiles(@"sprites\" + fold, "*.PNG");
                foreach (string file in files)
                {
                    Console.WriteLine(file);
                }
                skip = false;
            }
            catch (Exception)
            {
                Console.WriteLine("Folder not Found!");
                Console.WriteLine("Try Again!");
                cont = false;
                skip = true;
            }
            if (skip != true)
            {
                try
                {
                    string[] files = Directory.GetFiles(@"sprites\" + fold, "*.PNG");
                    System.Drawing.Bitmap stitchedImage = Combine(files);
                    Console.WriteLine("save filename (no extention)");
                    string fil = Console.ReadLine();
                    stitchedImage.Save(@"/sheets/"+fil+".png", System.Drawing.Imaging.ImageFormat.Png);
                    cont = true;
                }
                catch (Exception ex)
                {
                    Console.WriteLine("Error Creating Sprite Sheet");
                    Console.WriteLine(ex);
                    Console.WriteLine("Please Try Again!");
                }
            }
        }
        Console.WriteLine("Done!");
        Console.WriteLine("Program will now exit(Enter to continue)");
        Console.ReadLine();
    }
    public static System.Drawing.Bitmap Combine(string[] files)
    {
        //read all images into memory
        List<System.Drawing.Bitmap> images = new List<System.Drawing.Bitmap>();
        System.Drawing.Bitmap finalImage = null;

        try
        {
            int width = 0;
            int height = 0;

            foreach (string image in files)
            {
                //create a Bitmap from the file and add it to the list
                System.Drawing.Bitmap bitmap = new System.Drawing.Bitmap(image);

                //update the size of the final bitmap
                width += bitmap.Width;
                height = bitmap.Height > height ? bitmap.Height : height;

                images.Add(bitmap);
            }

            //create a bitmap to hold the combined image
            finalImage = new System.Drawing.Bitmap(width, height);

            //get a graphics object from the image so we can draw on it
            using (System.Drawing.Graphics g = System.Drawing.Graphics.FromImage(finalImage))
            {
                //set background color
                g.Clear(System.Drawing.Color.Black);

                //go through each image and draw it on the final image
                int offset = 0;
                foreach (System.Drawing.Bitmap image in images)
                {
                    g.DrawImage(image,
                      new System.Drawing.Rectangle(offset, 0, image.Width, image.Height));
                    offset += image.Width;
                }
            }

            return finalImage;
        }
        catch (Exception ex)
        {
            if (finalImage != null)
            {
                finalImage.Dispose();
            }
            Console.WriteLine(ex);
            throw ex;
            Console.WriteLine("Press Enter to continue...");
            Console.ReadLine();
        }
        finally
        {
            //clean up memory
            foreach (System.Drawing.Bitmap image in images)
            {
                image.Dispose();
            }
        }
    }
} 
```

任何帮助将不胜感激
编辑：我已经找到了这个错误的原因，它与创建stitchedImage有关......但是现在我得到一个内存异常......然后再次将350张奇怪的图像加载到MemoryStream中是致命的：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:02:38.523

好吧，伙计们，我发现了问题……这是 GDI+ 的限制……因为图像的大小是 512*512，所以 GDI+ 限制达到了 127 张图像，这就是我[在这里提出下一个问题的原因](https://stackoverflow.com/questions/12689598/resizing-a-folder-full-of-png-images-c-sharp "调整图像大小")

# symfony - Symfony 2 中的 2 级实体文件夹

> ID：12336108
> 
> 赞同：11
> 
> 时间：2012-09-09T02:41:31.780
> 
> 标签：symfony, doctrine-orm

我在 Symfony2 包中有一个两级实体文件夹：

```
CommonBundle/Entity/EntityFolder1/EntityA.php
CommonBundle/Entity/EntityFolder2
CommonBundle/Entity/EntityFolder3
CommonBundle/Entity/EntityFolder4 
```

当我尝试获取位于其中一个文件夹中的实体的存储库时：

```
$product = $this->getDoctrine()->getRepository('CommonBundle:EntityA')->find(1); 
```

Symfony 不承认这一点`CommonBundle:EntityA`。

我也试过了`CommonBundle:EntityFolder1:EntityA`。

> 警告：class_parents(): Class CommonBundle\Entity\EntityA 不存在，无法加载

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-09T09:19:46.823

是`CommonBundle:EntityFolder1\EntityA`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T07:29:45.893

使用实体的完整类名：

```
$product = $this->getDoctrine()
                ->getRepository('Acme\CommonBundle\Entity\EntityFolder1\EntityA')
                ->find(1); 
```

# ios5 - 我也想将 UIImageView 转换为 UIImage 或 PDF，可以吗？

> ID：12336109
> 
> 赞同：-1
> 
> 时间：2012-09-09T02:41:36.843
> 
> 标签：ios5

我在它上面拿了一个 UIImageView 拿了一些标签现在我想把这个 UIImageView 转换为 UIImage 或 PDF 格式，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:58:53.143

根据您的问题，您似乎想截取您的视图并将其保存为图像或 pdf。您可以使用以下代码截取视图并将其保存在照片库中。

```
UIGraphicsBeginImageContext(self.view.bounds.size);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *screenShotimage = UIGraphicsGetImageFromCurrentImageContext();
UIImageWriteToSavedPhotosAlbum(screenShotimage, nil, nil, nil);
UIGraphicsEndImageContext(); 
```

# javascript - 如何向服务器端提交 javascript 变量

> ID：12336112
> 
> 赞同：1
> 
> 时间：2012-09-09T02:42:05.407
> 
> 标签：javascript, python, html, jinja2

我有以下 HTML/Javascript 代码： http: [//jsfiddle.net/xxwa7/](http://jsfiddle.net/xxwa7/)我正在尝试将变量 GPSlocation 提交回服务器。

我正在使用带有 Python 和 Jinja2 的 Google App Engine。我想使用 POST 方法提交它，但我不确定如何使用 javascript 方法来提交。我想这有点简单，但我无法在任何地方在线找到它。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T03:07:32.170

最后，只有三种方法可以将数据从 Web 浏览器传递到服务器。

1.  **文件上传：** 在这种情况下不计算在内。可以忽略。
2.  **提交表单：将** 数据作为表单字段传递，在远程站点作为表单处理。数据可以作为表单字段或`var`在新文档中嵌入语句传递回 Javascript。
3.  **AJAX：**提交少量数据，等待服务器给你返回少量数据。做起来不难，但需要稍微不同的思维方式。 **JSON**经常被用作移动数据的标准。那里有各种 AJAX 包装器，大多数都像过度宣传的 jQuery 一样易于使用。

使用 Javascript 发布表单相当容易。使用标准 HTML 标记创建表单。使用标准的 Javascript 和 DOM 方法来更新表单值。

假设您的文件中只有一个表格：

```
document.forms[0].submit(); 
```

编辑：来自评论：

对于 HTML：

```
<form action="#">
  <div>
    <input type="hidden" name="datatosendback" id="datatosendback">
  </div>
</form> 
```

对于 Javascript：

```
document.getElementById("datatosendback").value = "OH! Mr KOTER! SEND ME!"; 
```

还有许多其他方法可以访问表单字段和值。谷歌搜索“javascript 修改表单”会显示页面。

# prolog - SICStus Prolog 列表

> ID：12336119
> 
> 赞同：1
> 
> 时间：2012-09-09T02:43:08.653
> 
> 标签：prolog, list

无法理解 Prolog 的工作原理。我正在尝试编写一个规则，该规则将三个整数列表作为输入（表示集合）并将属于第一个和第二个列表的整数放在第三个列表中。

例子：

```
?-inter([10,20,30,40],[10,50,40,60], List3 )
List3 = [10, 40] 
```

到目前为止，我有这个，它可以识别列表是否包含某个字母：

```
mymember(X,[X|T]).
mymember(X,[H|T]) :- mymember(X,T). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T03:06:38.303

实际上有一个内置库可以为您整理所有内容，称为 ordsets。

```
inter(X, Y, Z) :-
    list_to_ord_set(X, L1),
    list_to_ord_set(Y, L2),
    ord_intersection(L1, L2, Z). 
```

使用您的示例输入，您将获得以下信息

```
| ?- inter([10,20,30,40],[10,50,40,60],X).
X = [10,40] ? ;
no 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T06:03:53.223

`inter(Xs, Ys, Zs)`当 Zs 中的每个元素也在 Xs*和*Ys 中时，将是真的。

但是 Z 是未知的，因此需要一种更具建设性的方法。这里是：`iterate on Xs and store in Zs each element that is in Ys`。

迭代的一个例子是 mymember/2，你可以看到它需要一个递归谓词。上述语句的另一个惯用部分是`store in Zs`，Prolog 有一种特殊的方式来做这些事情，使用模式匹配。

```
inter([X|Xs], Ys, [X|Zs]) :-
   mymember(X, Ys), inter(Xs, Ys, Zs). 
```

您将需要用其他 2 个子句完成 inter/3：基本递归，即当所有 Xs 元素都已处理时，以及 X*不是*Ys 成员的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T17:40:12.947

尝试这样的事情，使用内置`member/2`和`setof\3`：

```
set_intersection( As , Bs , Xs ) :-
  set_of( X , ( member(X,As) , member(X,Bs) ) , Xs )
  . 
```

应该注意的是，如果列表没有共同的元素，这将`As`失败`Bs`。另一种方法是使用`findall/3`而不是`set_of/3`. `findall/3`如果目标不满足，将退回并清空列表而不是失败：

```
set_intersection( As , Bs , Xs ) :-
  findall( X , ( member(X,As) , member(X,Bs) ) , Xs )
  . 
```

然而`findall/3`返回一个*包*（允许重复）而不是一个*集合*（不允许重复），所以如果你的两个源列表不是集合，你就不会得到一个集合。

`member/2`是一个内置谓词，它将它的第一个参数与列表的一个元素统一起来——相当于

```
member(X,[X|_).
member(X,[_|Xs) :- member(X,Xs) . 
```

最后，正如@chac 在他的回答中指出的那样，您可以递归地遍历列表。

```
set_intersection( [] , _ , [] ) .            % the intersection of the empty set with anything is the empty set.
set_intersection( [A|As] , Bs , [A|Xs] ) :-  % if the list is non-empty,
  member(A,Bs) ,                             % - and A is a member of the 2nd set
  ! ,                                        % - we cut off alternatives at this point (deterministic)
  set_intersection( As , Bs , Xs )           % - and recurse down on the tail of the list.
  .
set_intersection( [_|As] , Bs , Xs ) :-      % if the list is non-empty, and A is NOT a embmer of the 2nd set
  set_intersection( As , Bs , Xs )           % we just recurse down on the tail of the list.
  . 
```

@chac 的技术会在他进行时构建结果列表，例如：

```
[a|X]
[a,b|X]
[a,b,c|X] 
```

最终统一，空列表的特殊情况将列表的未绑定尾部与`[]`使列表完整统一，因此最终`[a,b,c|X]`变为

```
[a,b,c] 
```

一点序幕魔法。一种可能更容易理解的替代方法是使用带有累加器的工作者谓词：

```
%
% set_intersection/3: the public interface predicate
%
set_intersection( As , Bs , Xs ) :-
   set_intersection( As , Bc , [] , T ) % we seed our accumulator with the empty list here
   .

%
% set_intersection/4: the private worker bee predicate
%    
set_intersection( []     , _  , T , Xs ) :-   % since our accumulator is essentially a stack
  reverse(T,Xs)                               % we need to reverse the accumulator to 
  .                                           % put things in the expected sequence
 set_intersection( [A|As] , Bs , T  , Xs ) :-
  member( A, Bs ) ,
  ! ,
  T1 = [A|T] ,
  set_intersection( As , Bs , T1 , Xs )
  .
set_intersection( [_|As] , Bs , T , Xs ) :-
  set_intersection( As , Bs , T , Xs )
  . 
```

# ruby-on-rails - 按 Rails 中的日期部分排序

> ID：12336122
> 
> 赞同：0
> 
> 时间：2012-09-09T02:43:42.910
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery, rails-postgresql

所以我在 Rails 项目中使用 jquery 数据表和列过滤扩展来排序、分页和过滤表日期。关于我的表的一件不寻常的事情是，我需要将月、日和年组件分解为单独的列，并允许在这些列上进行过滤搜索。

所以我正在寻找帮助，特别是在动态构建的 ActiveRecord 查询中搜索和排序月/日日期部分。

任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T02:47:49.310

Rails 包括 ActiveSupport 和大量的日期助手。

[http://as.rubyonrails.org/classes/ActiveSupport/CoreExtensions/Date/Calculations.html](http://as.rubyonrails.org/classes/ActiveSupport/CoreExtensions/Date/Calculations.html)

例如

*   进步
*   前
*   在_beginning_of_day
*   at_beginning_of_month
*   at_beginning_of_quarter
*   在_beginning_of_week
*   在_beginning_of_year
*   在_end_of_month
*   at_end_of_quarter
*   在_end_of_week
*   年末
*   在午夜
*   开始日
*   月初
*   季度开始
*   周初
*   年初
*   改变
*   一天的结束
*   月底
*   季度末
*   end_of_week
*   年末
*   在
*   上个月
*   去年
*   午夜
*   周一
*   几个月前
*   几个月以来
*   下个月
*   下周
*   明年
*   自从
*   明天
*   几年前
*   年以来
*   昨天

基础 Date 类也有很多方法：
[http ://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/Date.html](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/Date.html)

例如月、日和年都可用。

# javascript - 如何从 TabContainer 获取活动选项卡索引

> ID：12336124
> 
> 赞同：2
> 
> 时间：2012-09-09T02:43:57.457
> 
> 标签：javascript, asp.net, ajax, tabcontainer

目前我在我的 JavaScript 中使用这行代码

```
var tabIndex = $(':focus').attr('tabIndex'); 
```

但是，这总是无法获得活动索引。

这是 asp:TabContainer 标头以防万一。我也尝试过 document.GetElementById，但也无济于事。

```
 <asp:TabContainer ID="AdvOrBasicSearch" runat="server" ActiveTabIndex="0"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T19:39:32.527

他们说，一张图片胜过千言万语...

我在这里使用了 jQuery。有了它很容易找到你想要的。注意图片中的矩形文字。

快乐编码。

![在此处输入图像描述](../Images/16ebf27bb8957dbedcebed99546bedf1.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T17:03:07.907

我发现这种方法效果更好。我用 tabContainer 本身创建了一个变量。然后，我只需要进入变量内部并从 _activeTabIndex 属性中提取值。

```
var tabIndex = $find("AdvOrBasicSearch"); //AdvOrBasicSearch is name of tabContainer
var i = tabIndex._activeTabIndex; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-08T10:54:22.083

使用获取选项卡索引和选项卡名称`javascript`

```
< script type="text/javascript">
        function onTabChanged(sender, e) <br> { <br>
            var curIndex = document.getElementById('lblCurTabNo');<br>
            var curName = document.getElementById('lblCurTabName');<br>
            curIndex.innerHTML = sender.get_activeTabIndex();<br>
            curName.innerHTML = sender.get_activeTab().get_headerText();<br>
        }<br>
    < /script><br><br>

< asp:TabContainer ID="TabContainer1" runat="server" ActiveTabIndex="0" UseVerticalStripPlacement="false"
            Width="400px" BackColor="ActiveBorder" ForeColor="Green" OnClientActiveTabChanged="onTabChanged"><br>
    ----asp tab control-----------

< /asp:TabContainer> 
```

标签索引：`< asp:Label ID="lblCurTabNo" runat="server" Text="0"></asp:Label><br />`

标签名称：`< asp:Label ID="lblCurTabName" runat="server" Text="Personal Info"></asp:Label>`

# php - 当它加载另一个页面时，如何在标题中保留 PHP 链接？

> ID：12336125
> 
> 赞同：-3
> 
> 时间：2012-09-09T02:44:01.273
> 
> 标签：php

如果你去这里：[https](https://web.archive.org/web/20120903235224/http://getriotpointscodes.com/) ://web.archive.org/web/20120903235224/http://getriotpointscodes.com/ 并查看右侧的 PHP 编码链接 (hxxp://getriotpointscodes.com/index.html) php?id=35863）。

您如何模仿将链接复制到浏览器中的行为，同时它会加载另一个页面，同时保留原始点击链接 (hxxp://getriotpointscodes.com/index.php?id=35863) 作为标题？

该页面已经表现出这种行为，但我不确定如何准确编码以供我自己使用。

我有这样的事情，但它可能是错误的：

```
<?php
// referral.php

$id = (isset($_GET["id"])) ? strval($_GET["id"]) : "1";
// lookup
$url[1] = 'hxxp://getriotpointscodes.com/index.php?id=23121';

header('Content-Type: text/plain');
include("index.php");
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T02:46:42.407

在所有浏览器中实现这一点的唯一方法是使用单帧框架集。

但是，不推荐使用框架，并且您提到的行为是一件非常糟糕的事情-例如，它会阻止用户正确地为页面添加书签

如果两个链接都在同一个域上，您还可以使用 HTML5 `history.pushState`JavaScript API 来修改显示的 URL。

# oracle - Oracle - 通过左连接将多行组合到列

> ID：12336126
> 
> 赞同：1
> 
> 时间：2012-09-09T02:44:13.783
> 
> 标签：oracle, left-join, pivot

我正在做一个小型项目来学习一些 SQL。我目前在将多行组合成列时遇到了一些困难。

我要清理的桌子是

```
GroupID 产品属性 1 属性 2        
100 1 蓝色 红色
100 2金蓝
101 1 粉蓝色
101 2 黑 白
101 3紫灰
```

我想要生成的是一个只有唯一 groupID 的表，所以：

```
组 ID Product1 pr1Attribute 1 pr1Attribute2 Product2 pr2Attribute1 pr2Attribute2 Product3 pr3Attribute1 pr3Attribute2
```

行数据：

```
100 1 蓝色 红色 2 金 蓝色 null null null
101 1粉蓝2黑白3紫灰
```

我试过以下

```
select distinct full.groupid, product1.product as product1,
    product1.attr1 as product1_attrib1, product1.attr2 as product1_attrib2,
    product2.product as product2, product2.attr1 product2_attribute1, 
    product2.attr2 product2_attribute2, product3.product as product3, 
    product3.attr1 as product3_attrib1, product3.attr2 as product1_attrib2
from tabletest full
left join tabletest product1 on (full.groupid = product1.groupid and product1.producttem = '1')
left join tabletest product2 on (full.groupid = product1.groupid and product2.producttem = '2')
left join tabletest product3 on (full.groupid = product1.groupid and product3.producttem = '3'); 
```

查询无法正常工作。它似乎没有以某种方式考虑到`AND`或重复。

任何指导将不胜感激。我还想知道是否有一种方法可以实现这一点，这样我就不会“知道”任何产品编号（所以基本上我不必对它们进行硬编码）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T02:56:42.853

我认为您有一个简单的复制/粘贴错误：表 product2 和 product3 的连接条件在其连接条件的第一部分错误地引用了 product1 的 id。

```
left join tabletest product1 on (full.groupid = product1.groupid and product1.producttem = '1')
left join tabletest product2 on (full.groupid = product2.groupid and product2.producttem = '2')
left join tabletest product3 on (full.groupid = product3.groupid and product3.producttem = '3'); 
```

# c++ - Visual Studio 2012 c++ intellisense 对 std 的评论可能吗？

> ID：12336128
> 
> 赞同：3
> 
> 时间：2012-09-09T02:44:43.143
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012

是否可以在 VS2012 中获得对 c++11 std 方法和类的评论？目前我只看到参数和返回类型——对于学习 cpp 的人来说，它们很难解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T11:17:17.377

不幸的是，只有在函数声明之前写了注释，它们不是用于 VS2012 STL 实现的（也许是出于解析速度的原因，也许不是）。

始终参考 MSDN（将光标放在函数或类型的名称上时键入 F1），或参考标准。我经常使用[http://en.cppreference.com](http://en.cppreference.com)作为标准中所有内容的参考。

# pycassa - 使用 create_column_family 指定主键

> ID：12336134
> 
> 赞同：-1
> 
> 时间：2012-09-09T02:46:28.827
> 
> 标签：pycassa

使用 pycassa 时如何指定主键`SystemManager.create_column_family`？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T18:50:46.043

为了他人的利益，您只能（实际上只需要）使用 key_validation_class 参数指定主键的数据类型。

虽然 CQL 允许您指定主键列的名称，但它不能用于实际的行操作。

# c# - Lib.Web.Mvc 与 edittype select 和多个 true

> ID：12336136
> 
> 赞同：0
> 
> 时间：2012-09-09T02:47:22.533
> 
> 标签：c#, jqgrid, lib.web.mvc

阅读Lib.Web.Mvc 上 DataEvents 的自定义实现的[这篇文章后。](http://tpeczek.codeplex.com/discussions/286543)我需要创建一个 ListBox 类型的列，类似于

```
[Required]
[Display(Name = "Actions")]
[JqGridColumnEditable(true, "Actions", "Home", EditType = JqGridColumnEditTypes.Select)]
[JqGridColumnEditOptions.Multiple=true]
public string Actions { get; set; } 
```

任何人都可以帮助我或给我一个参考。我真的不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T19:40:25.680

您可以通过集合子类化`JqGridColumnEditableAttribute`和添加`Multiple`属性：`HtmlAttributes`

```
public class JqGridColumnMultipleEditableAttribute : JqGridColumnEditableAttribute
{
    public bool Multiple { get; set; }

    protected override IDictionary<string, object> HtmlAttributes
    {
        get
        {
            if (Multiple)
                return new Dictionary<string, object>() { { "multiple", "multiple" } };
            else
                return null;
        }
    }

    public JqGridColumnMultipleEditableAttribute(bool editable)
        : base(editable)
    {
        Multiple = false;
    }

    public JqGridColumnMultipleEditableAttribute(bool editable, string dataUrlRouteName)
        : base(editable, dataUrlRouteName)
    {
        Multiple = false;
    }

    public JqGridColumnMultipleEditableAttribute(bool editable, string dataUrlAction, string dataUrlController) :
        this(editable, dataUrlAction, dataUrlController, null)
    { }

    public JqGridColumnMultipleEditableAttribute(bool editable, string dataUrlAction, string dataUrlController, string dataUrlAreaName)
        : base(editable, dataUrlAction, dataUrlController, dataUrlAreaName)
    {
        Multiple = false;
    }
} 
```

您可以像这样使用以这种方式创建的属性：

```
[Required]    
[Display(Name = "Actions")]    
[JqGridColumnMultipleEditable(true, "Actions", "Home", EditType = JqGridColumnEditTypes.Select, Multiple=true)]      
public string Actions { get; set; } 
```

这将导致 jqGrid 呈现 ListBox（您可能需要做一些样式以使其看起来不错）。

# postgresql - postgresql 文本搜索：2712 索引大小限制错误

> ID：12336138
> 
> 赞同：3
> 
> 时间：2012-09-09T02:47:52.423
> 
> 标签：postgresql, full-text-search

我正在尝试使用 postgresql 全文功能将文本搜索添加到我们的应用程序中。

目前，它给出了错误

> 索引行大小 4016 超过索引的最大值 2712

我得到了一个字符长度为 3880（英文）的文档。这是否意味着 postgres fts 不能用于较大的文档？3880不是很大吗？当我尝试更新索引时会出现错误，因此一种解决方案是根本不使用索引，但这不会影响搜索性能吗？

一般来说，我是 postgresql 的新手，我真的很确定我一定做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T00:16:46.270

如果您尝试为 fts 索引文本字段，我的建议是您应该根据文本索引 tsvector。就像是

```
CREATE INDEX my_fts_idx ON my_table(to_tsvector(mytext)); 
```

tsvector 也比列的全文小得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:27:08.677

我发现当您尝试索引`text`字段时会出现此错误，删除该索引并且您会没事的。

# operators - Verilog 问号 (?) 运算符

> ID：12336139
> 
> 赞同：11
> 
> 时间：2012-09-09T02:48:06.697
> 
> 标签：operators, vhdl, verilog

我正在尝试将 Verilog 程序翻译成 VHDL，并且偶然发现了在 Verilog 程序中使用问号 ( `?`) 运算符的语句。

以下是Verilog代码；

```
1  module music(clk, speaker);
2  input clk;
3  output speaker;
4  parameter clkdivider = 25000000/440/2;

5  reg [23:0] tone;
6  always @(posedge clk) tone <= tone+1;

7  reg [14:0] counter;
8  always @(posedge clk) if(counter==0) counter <= (tone[23] ? clkdivider-1 : clkdivider/2-1); else counter <= counter-1;

9  reg speaker;
10  always @(posedge clk) if(counter==0) speaker <= ~speaker;
11  endmodule 
```

我不明白第8行，有人可以解释一下吗？我在 asic-world 网站上读到问号是该`Z`字符的 Verilog 替代项。但我不明白为什么在这种情况下使用它。

亲切的问候

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-09T02:49:40.550

那是一个[三元运算符](http://en.wikipedia.org/wiki/%3F%3a)。它是 if 语句的简写

格式：

```
condition ? if true : if false 
```

例子：

```
tone[23] ? clkdivider-1 : clkdivider/2-1 
```

翻译成类似的东西（语法不正确，但我想你会明白的）：

```
if tone[23] is 1, counter = clkdivider-1
else counter = clkdivider/2-1 
```

以下是[使用 if 语句和三元运算符的 2 比 1 MUX](http://eesun.free.fr/DOC/VERILOG/synvlg.html#mux%20using%20if%20else)的两个示例。

在 asic-world 网站上，它包含在[条件运算符中](http://www.asic-world.com/verilog/operators2.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-28T08:53:48.453

另一种写法，例如下面的 Verilog：

```
q <= tone[23] ? clkdivider-1 : clkdivider/2-1; 
```

在 VHDL 中将是：

```
q <= clkdivider-1 when tone[23] else clkdivider/2-1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-22T07:09:17.870

把它想象成一个 MUX，在 ? 是选择位，在 : 的两侧是输入

# scheme - 口译员的环境是什么？

> ID：12336141
> 
> 赞同：0
> 
> 时间：2012-09-09T02:48:18.967
> 
> 标签：scheme, interpreter

我正在学习一门名为*Programming Language Principles*的课程。它介绍了一个简单的解释器的设计。

和基尔的这个解释器的一段代码：

```
(define valof
 (lambda (exp env)
  (dmatch exp
    [,sym (guard (symbol? sym)) (env sym)]
    ... ))) 
```

我想知道解释器中的环境是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T02:57:35.297

在像您正在查看的解释器中，环境是将值与变量名称相关联的对象。通常它是一个框架列表，每个框架都是一个变量绑定列表。

查看[*计算机程序的结构和解释，*](http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-21.html#%_sec_3.2)了解评估者如何使用环境。

# php - 拆分多行电子邮件地址条目

> ID：12336147
> 
> 赞同：1
> 
> 时间：2012-09-09T02:50:37.697
> 
> 标签：php, arrays

我在正确拆分数组时遇到问题。我有一个 textarea 输入，允许每行输入多个电子邮件地址。输入后，我将其转换为数组，然后将它们添加到数据库中。下面的代码：

`$addrs = explode('<br />',nl2br($form['bulk_add_emails']));`

这仍然在电子邮件地址之前的数据库条目中留下换行符，这意味着当我使用

`if(preg_match('/^([a-zA-Z0-9])+([a-zA-Z0-9\._-])*@([a-zA-Z0-9_-])+([a-zA-Z0-9\._-]+)+$/', $v)){ ... }`

一切都返回为假。

我做错了什么，如何正确清理数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T02:53:15.167

不`explode()`开机`<br />`也不打电话`nl2br()`。相反，[`preg_split()`](http://us3.php.net/manual/en/function.preg-split.php)在处理换行符时使用更大的灵活性，如果有空行和`\r\n`/或`\n`换行符，它可以处理多行。

```
// (\r?\n)+ will split on one or more \n with an optional \r preceding it.
// ... so empty lines don't result in empty array elements.
$addrs = preg_split('/(\r?\n)+/', $form['bulk_add_emails']); 
```

# ssis - SSIS：如何为文件连接管理器指定服务器（指定现有目录）？

> ID：12336148
> 
> 赞同：1
> 
> 时间：2012-09-09T02:50:42.140
> 
> 标签：ssis

我对 SSIS 相当陌生，并且无法弄清楚似乎应该直截了当的东西：

在服务器 A 上，我在“C:\SourceFiles\Patients”中有 10 个文件（这些文件是 PDF）。我知道这 10 个文件的名称，它们不会改变。此外，还有一个服务器 B，它是数据库服务器，是 SSIS 包所在的位置。我的目标是遍历包含患者的数据库表，将一些患者数据添加到 10 个源文件（重命名文件），然后将这个新文件保存到服务器 A。

我已经运行了大部分。目前，所有这些都发生在使用 ADO.NET 进行数据库访问的脚本任务中（我已经在访问服务器 B 上的数据库表）并且我正在访问本地 C 驱动器上的源文件。

我无法弄清楚如何在源文件的包配置中指定服务器 A。我有一个文件连接，它指定了一个现有文件夹（C:\SourceFiles\Patients），但它只指定了文件夹的位置，而不是服务器。如何为此文件连接指定服务器 A？或者，如何将此文件连接与服务器 A 连接一起使用？由于某种原因，我很难理解这一点！

我使用的技术是：Visual Studio 2008、SSIS 脚本任务中的 C#、SSIS 脚本任务中的 ADO.NET 和 SQL Server Management Studio 2008（此处将导入 SSIS 包）。

感谢您为我指明正确的方向！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:30:02.740

我看到你正在尝试做的一些问题。

PDF 是一种图像格式（文档的图像），因此不容易被 SSIS 操作。通常，如果您在 SSIS 中处理文件，它将是某种平面文件，例如 CSV 或其他文本格式。

使用脚本任务在 SSIS 中完成所有工作是无法正确使用 SSIS 的功能。如果您的 SSIS 项目中只有一个脚本任务，那么您应该直接使用 C# 或 VB.net，而根本不将 SSIS 包含在您的项目中。

话虽如此，您应该使用 UNC（通用命名约定）路径访问服务器 A 上的文件。您需要密切注意您在 SSIS 中的权限才能完成这项工作。当 SSIS 作业运行时，它在特定用户下运行，通常是 SQL Server 代理用户，并且该用户需要远程访问服务器 A 上的文件夹的权限。正确设置所有这些权限后，您可以使用类似于 \\ServerA\ShareName\Patients\ 的内容作为指向包含 pdf 的目录的指针。

# javascript - 套接字服务器向客户端广播，但不从两者接收

> ID：12336154
> 
> 赞同：0
> 
> 时间：2012-09-09T02:52:01.140
> 
> 标签：javascript, sockets, socket.io

我对遇到的这个错误感到非常困惑，希望有人能告诉我为什么我的代码响应异常。

我做了一个简单的游戏，它应该允许客户端按下按钮 A 并向服务器发送消息“A”，然后服务器会将 A 变量加 1，并将 A（编译的服务器端）的数值发送回所有客户。我希望如果有 3 个用户，并且每个用户都按下 A，那么服务器会计算 A=3。

这是我的代码：

```
var io = require("socket.io").listen(8888);
var http = require("http");
var url = require("url");
console.log("Server has started.");

io.sockets.on("connection", function (socket) {

var A = 0;
var B = 0;

    socket.on("message", function (data) {

        if (data == 'A') {
            A++;
            console.log(A);
        }
        else if (data == 'B') {
            B++;
            console.log(B);
        }
    var M = [A + '' + B]
        function M(A, B) {
        this.first = A;
        this.second = B;
        }
        this.all = function() {
            return A + '' + B;
        }
            console.log(M); 
            socket.emit("message", M);
            socket.broadcast.emit("message", M);
    });

}); 
```

结果是每个玩家似乎都在自己的计数中，因此每个玩家必须按 A 3 次才能使 A to = 3，但所有玩家都会收到彼此按下按钮的广播。有人可以告诉我为什么客户端正在接收，但服务器正在接受来自客户端的 3 个单独堆栈中的“A”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T05:14:25.057

问题是每个客户端都与服务器建立自己的连接。您在 on-connection 函数中拥有的任何变量都将仅适用于该一个客户端。

您可以将 和 的声明移至`A`顶层`B`，因此所有连接都将访问相同的变量。

# c# - 当用户执行给定操作时交换部分 UI

> ID：12336155
> 
> 赞同：1
> 
> 时间：2012-09-09T02:52:19.330
> 
> 标签：c#, wpf, navigation

我想在我的 WPF 应用程序中有一个导航功能，当用户采取给定的操作（即单击一个按钮）时，它将换出部分 UI。将这些 UI 片段放在它们自己的窗口中并不合适。我一直在使用面板并使用该`visible=true`属性将它们换出，但是在单个窗口中管理多个面板变得很麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T11:37:13.593

[我们使用Caliburn Micro](http://caliburnmicro.codeplex.com/) [Screens & Conductors](http://caliburnmicro.codeplex.com/wikipage?title=Screens%2c%20Conductors%20and%20Composition&referringTitle=Documentation)进行了您正在尝试的操作：

*   在 View 上有一个名为 ActiveItem的[ContentControl 。](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentcontrol.aspx)
*   [使用ActivateItem](http://caliburnmicro.codeplex.com/wikipage?title=Screens%2c%20Conductors%20and%20Composition&referringTitle=Documentation) Conductor替换 ViewModel 上的 ActiveItem 。

对于换出效果，我们确实使用两个触发器（在 ActiveItem 更改时从 ViewModel 引发）为 ActiveItem 设置动画。一个用于换入的触发器和一个用于换出的触发器（此动画所做的只是将边距从偏移量更改为适当的值，并稍加延迟）。

您不仅可以为 ActiveItem 扩展此方法，还可以为要换出的每个控件扩展此方法，因此我希望这会给您一个想法。

# javascript - MongoDB 数组与对象

> ID：12336156
> 
> 赞同：6
> 
> 时间：2012-09-09T02:52:23.897
> 
> 标签：javascript, mongodb

假设我想维护每个用户的项目列表（在 Node.js 环境中使用 Mongoose ODM 的 MongoDB 中），然后查询项目是否归用户所有。例如，我想存储每个用户喜欢的所有颜色，然后查看特定颜色是否属于特定用户。在我看来，最好将颜色存储为用户文档中的嵌入对象，而不是用户文档中的数组。原因是检查对象中是否存在颜色似乎更有效，因为我可以检查对象属性是否存在：

```
if(user.colors.yellow){
  //true case
} else {
  //false case
} 
```

与我必须遍历整个数组以查看颜色是否存在于数组中某处的数组相比：

```
for (var i = 0; i < user.colors.length; i++) {
  if(user.colors[i] === "yellow"){
    //true case
  } else {
    //false case
  }
} 
```

但是，从我在网上看到的许多示例中，似乎使用数组来处理这种类型的事情相当普遍。我错过了什么吗？有什么优点/缺点，最好的方法是这样做的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T03:07:24.277

如果颜色存储为数组，则不必使用 for 循环。您可以只使用`indexOf`，如：

```
if(user.colors.indexOf("yellow") != -1){
   //true case
} 
```

也就是说，无论您使用嵌入式文档还是数组，这两种方式都无关紧要。这并不像其中一个会带来巨大的性能优势。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T03:51:50.497

您经常会在 MongoDB 集合中看到用于存储此类信息的嵌入式数组，因为如果您向数组属性添加索引，它们的查询效率很高，并且它们使用自然语法。在这种情况下，类似于以下内容（假设用户集合包含颜色数组属性）：

```
db.users.find({id: 1, colors: 'yellow'}) 
```

如果您使用单个颜色属性执行此操作，您将有一个看起来更尴尬的查询，并且您必须单独索引每种颜色（而不是`colors`像上面那样）：

```
db.users.find({id: 1, 'colors.yellow': true}) 
```

# ruby - 如何使用 mkmf.log 安装 Nokogiri Ruby gem 说 libiconv 未找到？

> ID：12336160
> 
> 赞同：33
> 
> 时间：2012-09-09T02:53:07.753
> 
> 标签：ruby, gem, installation, nokogiri

我正在安装 Ruby Nokogiri gem 并在下面找到错误。

如何诊断并解决它？

```
# gem install nokogiri
Building native extensions.  This could take a while...
ERROR:  Error installing nokogiri:
ERROR: Failed to build gem native extension.
...
/opt/ruby/1.9.3-p194/bin/ruby extconf.rb
checking for libxml/parser.h... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.
...
/opt/ruby/1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:381:in `try_do': 
The compiler failed to generate an executable file. (RuntimeError)
You have to install development tools first.
from /opt/ruby/1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:506:in `try_cpp'
... 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-09-09T03:51:22.273

为了诊断和解决，这对我有用。

要找出失败的原因，请转到您的 ruby​​ gems 目录。

例如：

```
$ cd <MY RUBY DIRECTORY>/lib/ruby/gems/2.0.0/gems 
```

如果你不知道你的 gem 目录，试试这个：

```
$ echo $GEM_HOME
/opt/gems/2.0.0
$ cd /opt/gems/2.0.0/gems 
```

我要安装什么版本的 nokogiri？

```
$ ls -ladg nokogiri-*
nokogiri-1.5.5 
```

转到安装程序目录：

```
$ cd nokogiri-1.5.5/ext/nokogiri 
```

尝试手动安装：

```
$ ruby extconf.rb 
```

结果：

```
checking for libxml/parser.h... *** extconf.rb failed ***
... 
```

我正在使用 Ubuntu，所以我搜索任何类似的软件包：

```
$ aptitude search libxml 
```

结果：

```
p libxml2 - GNOME XML library
p libxml2-dev - Development files for the GNOME XML library
... 
```

我相信 libxml2 会正常工作。

```
$ apt-get install libxml2 
```

Ruby 原生 gem 通常需要 *-dev 包作为头文件，所以安装它们：

```
$ apt-get install libxml2-dev 
```

现在我有解析器文件了吗？

```
$ find / | grep libxml/parser.h 
```

是的，结果显示解析器：

```
/usr/include/libxml2/libxml/parser.h 
```

现在尝试再次安装，这次提供 libxml2 路径：

```
$ gem install nokogiri -- --with-xml2-dir=/usr/include/libxml2 
```

它仍然失败，所以阅读 mkmf 错误日志：

```
$ more mkmf.log 
```

错误日志显示了失败的原因，并且这些行看起来很有希望：

```
package configuration for libxslt is not found 
```

有配套吗？

```
$ aptitude search libxslt 
```

结果：

```
v   libxslt-dev
i   libxslt-ruby
... 
```

安装开发包：

```
$ apt-get install libxslt-dev 
```

现在尝试再次安装，并将 xslt 放在路径上：

```
$ gem install nokogiri -- \
--with-xml2-dir=/usr/include/libxml2 \
--with-xslt-dir=/usr/include/libxslt 
```

成功！

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-05-24T10:53:36.660

# [安装 Nokogiri 网站](http://www.nokogiri.org/tutorials/installing_nokogiri.html)

'Installing Nokogiri' 是一个致力于在主要平台上安装 Nokogiri 的网站 - 以下是关于在 Ubuntu 上安装 Nokogiri 的摘录：

> 因为 Nokogiri 需要针对 libxml2 和 libxslt 进行编译和动态链接，所以它以安装复杂而闻名。
> 
> 从 Nokogiri 1.6 开始，libxml2 和 libxslt 源代码与 Nokogiri 捆绑在一起，并在 gem-install-time 编译。本文档中的说明适用于所有版本 1.6.4 及更高版本。
> 
> **Ubuntu / Debian**
> 
> 使用 Nokogiri 提供的 libxml2 和 libxslt 在 Ubuntu 和 Debian 上安装应该是 Just Work™：
> 
> ```
> gem install nokogiri 
> ```
> 
> [...]
> 
> **使用您的系统库**
> 
> 如果您想使用系统的 libxml2、libxslt 和相关库而不是 Nokogiri 的供应商库，请首先了解您可能要求 Nokogiri 使用不受支持的 libxml2 版本。
> 
> ```
> sudo apt-get install pkg-config
> gem install nokogiri -- --use-system-libraries 
> ```

* * *

仅供参考 - 我正在使用 Nokogiri 1.6.6.2，但它并没有“正常工作”。我得到了它`--use-system-libraries`。

* * *

### Mac OS X

该网站的建议还涵盖 OS X - 这对我有用：
`gem update --system xcode-select --install gem install nokogiri`

* * *

### 结论

如果您在任何平台上遇到 Nokogiri 问题，您应该[查看网站](http://www.nokogiri.org/tutorials/installing_nokogiri.html)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-11-05T18:29:53.610

在 CentOS 上，这是我需要做的：

```
gem update --system
yum install libxml2-devel libxslt-devel ruby-devel
gem install nokogiri -- --use-system-libraries 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-07-09T01:04:46.497

> 由于某种原因无法创建 Makefile，可能**缺少必要的库和/或标头**。

`-lz`为了正确编译源代码，您可能缺少 flag 所需的 zlib 标头。通过以下方式在 Linux 上安装：

```
sudo apt-get install libz-dev 
```

对于缺少 libiconv，请尝试安装`libiconv-hook-dev`具有头文件的软件包`libiconv-hook`，例如

```
sudo apt-get install libiconv-hook1 libiconv-hook-dev 
```

* * *

在 OS X 上，尝试通过以下方式安装开发工具：`xcode-select --install`.

如果仍然存在问题，请检查`mkmf.log`文件以获取有关您的错误的更多详细信息。

* * *

在 Ubuntu 上，尝试以下依赖修复组合：

```
sudo apt-get install gcc ruby-dev libxslt-dev libxml2-dev zlib1g-dev 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-09-25T15:31:14.337

您看到的“无法创建 Makefile”错误也可能是因为您没有同意 Xcode 许可证（每次更新 Xcode 后都必须同意）。运行`sudo xcodebuild -license accept`应该为您消除此错误并允许您`gem install nokogiri`成功运行。

# ruby-on-rails - Rails 3：保存模型的最佳实践

> ID：12336163
> 
> 赞同：3
> 
> 时间：2012-09-09T02:53:29.577
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord

什么时候应该将模型保存在 Rails 中？谁应该负责调用 save、模型本身或调用者？

假设我的用户模型中有（公共）方法，如`udpate_points`,`update_level`等。有2个选项：

1.  模型/方法负责调用 save 。所以每个方法都会调用 `self.save`.
2.  调用者负责调用 save。所以每个方法只更新属性，但调用者`user.save`在用户完成后调用。

权衡是相当明显的：在选项*#1*中，模型保证保存，但我们在每个事务中多次调用 save。在选项*#2*中，我们每个事务只调用一次 save，但调用者必须确保调用 save。例如`team.leader.update_points`，需要我打电话`team.leader.save`，这有点不直观。如果我有多个方法在同一个模型对象上运行，这可能会变得更加复杂。

根据请求添加更具体的信息：更新级别查看用户拥有多少点并更新用户的级别。该函数还调用 facebook api 来通知它用户已经达到了一个新的水平，所以我可能会有效地将它作为后台作业执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T03:23:24.787

我最喜欢的实现这种东西的方法是使用 attr_accessors 和模型钩子。这是一个例子：

```
class User < ActiveRecord::Base
  attr_accessor :pts

  after_validation :adjust_points, :on => :update

  def adjust_points
    if self.pts
      self.points = self.pts / 3 #Put whatever code here that needs to be executed
    end
  end
end 
```

然后在你的控制器中你做这样的事情：

```
def update
  User.find(params[:id]).update_attributes!(:pts => params[:points])
end 
```

# jquery - 在 jquery 中访问来自 xhr 的 json 响应

> ID：12336165
> 
> 赞同：3
> 
> 时间：2012-09-09T02:55:00.840
> 
> 标签：jquery, ajax, json, xmlhttprequest

我有一个关于`XMLHttpRequest`对象如何工作的问题。在[https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest)的属性下，我正在查看“响应”属性。描述说如果我的内容类型是 json，我应该得到一个 JavaScript 对象。但是，在我的代码中，`xhr.response`属性是`undefined`.

具体来说，我有一个`.ajaxSuccess()`在 DOM 元素上设置的回调，它接收参数`(event, xhr, settings)`。 `xhr.responseText`是我的 json 的明文版本，但 xhr.response 是未定义的。有什么方法可以在不调用的情况下从 xhr 获取对象`$.parseJson(xhr.responseText)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T03:06:25.993

我认为您将该`XMLHttpRequest`对象与 jQuery`jqXHR`使用的对象混淆了`$.ajaxSuccess()`，它*应该*是前者的超集。

相反，您可以使用`$.ajax()`'处理程序，*如果*数据类型是`done`，它将为您解析 JSON 。例如：*`json`*

 *```
$.ajax({
  url: url,
  dataType: 'json',
}).done(function (response) {
  // response is a JSON object, previously parsed by jQuery using $.parseJSON
}); 
```

另请注意，即使 的文档[`$.ajaxSuccess()`](http://api.jquery.com/ajaxSuccess/)说您获得了一个香草`XMLHttpRequest`对象，但从jQuery **1.4.1起****不再适用**。相反，你[得到](http://jsfiddle.net/9FD39/1/)一个对象。**`jqXHR`***

# html - 当其中有文本时如何使表格单元格不展开？

> ID：12336168
> 
> 赞同：1
> 
> 时间：2012-09-09T02:56:02.017
> 
> 标签：html, css, css-tables

如果我有一个只有 1 个单元格的表格，并且我将其内联样式中的宽度和高度设置为一定数量的像素（固定而不是百分比）。有什么 CSS 属性或属性可以确保无论单元格中有多少内容，单元格的尺寸都不会增加。我在我的单元格上注意到，当我添加文本时，即使我设置了尺寸，尺寸仍然会发生变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T02:59:06.117

您想使用该`overflow`属性。在这种情况下，您似乎想要它`hidden`：

```
.cell1 {overflow: hidden;} 
```

[阅读此处](http://www.w3schools.com/cssref/pr_pos_overflow.asp)了解更多选项。

还发现[这个](https://stackoverflow.com/questions/509711/why-does-overflowhidden-not-work-in-a-td)帖子表明您需要添加`table-layout: fixed;`和`white-space: nowrap;`除了`overflow`属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T03:00:01.190

将表格布局设置为固定，将溢出设置为隐藏。

```
table {
    overflow:hidden;
    table-layout:fixed;
}​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/nu4Mf/1/)**

# ios - NSDateFormatter 归零分钟

> ID：12336170
> 
> 赞同：0
> 
> 时间：2012-09-09T02:56:28.480
> 
> 标签：ios, nsdate, nsdateformatter

将服务器的日期字符串转换为 NSDate 时 - 采用这种格式

```
2012-09-07T11:57:44+10:00 
```

我们在 NSDateFormatter 中使用这个 dateFormat

```
yyyy-MM-dd'T'HH:mm:ssZZZ':'mm 
```

但分钟总是零分钟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T12:29:50.050

第二个“mm”覆盖第一个的结果并将分钟设置为零，解析了时区末尾的“00”。

为了解析时间戳的格式，您必须首先以某种方式删除最后一个`:`字符，因为 NSDateFormater 无法处理。

# javascript - 如何从 DOM 中删除 Aloha 编辑器？

> ID：12336173
> 
> 赞同：1
> 
> 时间：2012-09-09T02:56:50.120
> 
> 标签：javascript, jquery, aloha-editor

我正在使用 Aloha 编辑客户网站上的内容，并希望在保存时删除所有额外的 DOM 元素和属性。

段落标签来自：

```
<p></p> 
```

到：

```
<p id="79a2eed4-1d7d-55a9-1c44-d384d35edf4f" 
    class="aloha-editable aloha-editable-active" 
    contenteditable="true" style=""></p> 
```

我想删除所有这些添加的元素。我错过了 Aloha API 中的销毁调用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T12:49:23.457

以下将可编辑的形式恢复为不可编辑的形式

```
$('#editable').mahalo(); 
```

这也应该删除由 aloha 添加的属性（类、contenteditable=true 等）。

我已将[其添加](https://github.com/alohaeditor/Aloha-Editor/commit/adbdf4ac49edc2c1b93ec5a96615b27610701667)到官方文档中。

# java - 你能强制java按值返回一个对象吗？

> ID：12336174
> 
> 赞同：0
> 
> 时间：2012-09-09T02:56:57.187
> 
> 标签：java

在 Java 中，可以强制方法按值（而不是按引用）返回吗？

例如：

```
public Rect getBounds() {
    return bounds; //TODO: Return bounds by value so users can't change edit it.
} 
```

在这里，我不妨将界限公之于众。如果要通过引用传递它，似乎没有理由创建一个函数来返回某些东西。

我的另一个选择是创建几个方法以 1×1 的方式返回边界的特定成员，但我宁愿不这样做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T02:59:31.640

不，这就是 API 经常返回[防御性副本](http://www.javapractices.com/topic/TopicAction.do?Id=15)、[不可修改的包装器](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#unmodifiableCollection%28java.util.Collection%29)等的原因。

这些副本和/或包装器（帮助）防止用户修改实例数据。

如果正确的行为依赖于实例对实例数据具有完全且唯一的控制权，则实例有责任通过不向客户提供任何可以用来破坏该合同的东西来*确保该行为。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T03:04:26.057

`Rect`通过使其字段成为最终字段，在构造函数中分配它们的值而不创建 setter 方法，使其不可变。不可变对象有很多好处，线程安全就是其中之一。

# ios - 不使用 JSON 的简单 RestKit 登录

> ID：12336175
> 
> 赞同：1
> 
> 时间：2012-09-09T02:57:21.850
> 
> 标签：ios, login, restkit

两天以来，我一直在寻找 RestKit API 的简单代码，用于在不使用 JSON 的情况下登录网站。这是我到目前为止编写的代码：

```
- (void)login
{
    [RKClient clientWithBaseURLString:@"http://Mywebsite.com/login.php"];
    NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObject:@"user" forKey:@"username"];
    [params setObject:@"pass" forKey:@"password"];
    [params setObject:@"login" forKey:@"type"];
    [[RKClient sharedClient] post:@"/login" params:params delegate:self];

}

- (void)request:(RKRequest*)request didLoadResponse:(RKResponse*)response
{
    NSLog(@"HTTP status code:     %d", response.statusCode);
    NSLog(@"HTTP status message:  %@", [response localizedStatusCodeString]);
}

- (void)objectLoader:(RKObjectLoader*)objectLoader didFailWithError:(NSError*)error {
    NSRange range = [[error localizedDescription] rangeOfString:@"-1012"];
    if (range.length > 0){
        //Do whatever here to handle authentication failures
    }
    RKLogError(@"Hit error: %@", error);
} 
```

这是我收到的日志：

```
2012-09-08 21:44:14.633 RestKitTest[889:fb03] I restkit:RKLog.m:33 RestKit initialized...
2012-09-08 21:44:15.010 RestKitTest[889:fb03] I restkit.network.reachability:RKReachabilityObserver.m:369 Network availability has been determined for reachability observer <RKReachabilityObserver: 0x6c5a560 host=0.0.0.0 isReachabilityDetermined=YES isMonitoringLocalWiFi=NO reachabilityFlags=-R -----l->
2012-09-08 21:44:21.021 RestKitTest[889:fb03] I restkit.network:RKRequest.m:676 Status Code: 404
2012-09-08 21:44:21.036 RestKitTest[889:fb03] HTTP status code:     404
2012-09-08 21:44:21.090 RestKitTest[889:fb03] HTTP status message:  not found 
```

任何想法如何解决此问题将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T06:27:17.903

I'd say it `404`s because you set `baseURL` as `http://Mywebsite.com/login.php` yet you POST as `post:@"/login"`. Do you really want to access `http://Mywebsite.com/login.php/login`?

The baseURL should be set to a common prefix to all your backend calls, in your case `http://Mywebsite.com`, the resource itself should be posted as `post:@"/login.php"`. The resource name and baseURL are concatenated before the request is sent.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T22:12:18.853

您需要提供有关`login.php`正在做什么的信息。如果脚本 url 正确解析，我不明白为什么它应该 404。

此外，如果该 PHP 脚本在成功时执行重定向，您应该使用该`RKClient`方法 `post:usingBlock:`并在该块中执行 do `request.followRedirect = NO;`。这样，如果您要返回一个状态码，您将获得正确的状态码。

如果也可能有助于记录更多响应：

```
NSLog(@"Header fields: %@", response.allHeaderFields);
NSLog(@"Body: %@", response.bodyAsString); 
```

# codeigniter - codeigniter 我的页面正确显示，但标题显示 404 错误

> ID：12336177
> 
> 赞同：0
> 
> 时间：2012-09-09T02:57:40.150
> 
> 标签：codeigniter, session, header

我试图追查为什么我的表单的发布数据没有被传递给控制器​​。

当我转到控制器的 url 时，页面会正确显示。但是当我打开萤火虫它说theres 404错误。

我难住了。页面显示时怎么会出现404错误？

我已经检查并仔细检查了所有内容。我不知道为什么会这样。

更新：我所有控制器的 url 上都发生了同样的事情。当我访问该站点时，该页面显示得很好，但萤火虫说 404。我直到现在才意识到这一点，因为其他页面不接受任何发布数据。

在成员页面上，如果他们未登录，则会重定向。在这里，萤火虫说 302 暂时移动，这是它应该做的。但是当我登录并访问成员页面时，它是 404。

我怀疑我需要更改 config->router.php 文件，但我不确定它需要如何修改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T06:31:55.390

如果该链接发生更改，请遵循该页面上的说明，以使一切正常运行：

[https://github.com/EllisLab/CodeIgniter/wiki/Godaddy-Installaton-Tips](https://github.com/EllisLab/CodeIgniter/wiki/Godaddy-Installaton-Tips)

在 config.php 中：

```
$config['index_page'] = "index.php?";
$config['uri_protocol'] = "QUERY_STRING"; 
```

我已经在 GoDaddy 上成功实现了这一点，而无需使用“index.php？” 作为索引页。这在使用 URL 帮助程序中的 anchor() 创建链接时很有帮助。即使 htaccess 删除了 index.php，anchor() 仍然会将您设置为索引页面的内容放入其中。

您现在应该能够像这样访问所有内容：

[http://yourdomain.com/index.php?controller/action/etc](http://yourdomain.com/index.php?controller/action/etc)

一旦你到了想要隐藏“index.php”的地步？将此粘贴到您的 .htaccess 文件中：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?$1 [L] 
```

您现在应该能够像这样访问所有内容：

[http://yourdomain.com/controller/action/etc](http://yourdomain.com/controller/action/etc)

.htaccess 文件必须是 Unix LF only 样式。如果您使用记事本或写字板并以 CR/LF 样式上传 .htaccess 文件，它将无法正常工作。

# mapping - 对象到对象映射框架

> ID：12336179
> 
> 赞同：-1
> 
> 时间：2012-09-09T02:58:15.573
> 
> 标签：mapping, automapper

我对任何可以用来生成对象到对象映射工具的框架/模式感兴趣。我的目标是使用 EF 来水合对象，我想使用一个自定义类来定义 ObjectA --> ObjectB 之间的转换（类似于 AutoMapper，Biztalk 映射在 .net 中）。我认为这将是一种常见情况，并且希望利用任何人过去使用过的任何最佳实践/框架。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:25:42.210

你应该看看这个工具：[Automapper Verbatim](http://visualstudiogallery.msdn.microsoft.com/8471ac38-5b35-41fc-bdbe-78a472d123e1)。它与您在 Codeplex 上找到的 Automappper 不同。与 Codeplex 上的不同，[Automapper Verbatim](http://visualstudiogallery.msdn.microsoft.com/8471ac38-5b35-41fc-bdbe-78a472d123e1)将生成代码而不是使用反射（它更快）。更新/错误修复似乎定期发布。我们在几个项目中使用这个工具，它为我们节省了大量时间。不过有一些建议：不要犹豫，将您的映射器拆分为不同的 .map 文件（出于性能和可读性原因），将它们放在同一个目录中可以让您重新使用从一个文件到另一个文件的映射。拆分 .map 文件也可以避免合并问题（如果您在团队中工作）。确保始终获取您需要处理的最新版本的 .map 文件，除非合并将成为一场噩梦：

# android - 当我在android中写入文件时，它会覆盖以前存在的内容

> ID：12336181
> 
> 赞同：2
> 
> 时间：2012-09-09T02:58:28.687
> 
> 标签：android, file, file-io

所以标题几乎总结了我的问题，但就代码而言，我不确定我做错了什么。

这是我写入文件的片段：

```
 try {

                    FileOutputStream fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);
                    OutputStreamWriter osw = new OutputStreamWriter(fos);

                    osw.append(assignmentTitle + "\n" + assignmentDate + "\n");
                    osw.flush();
                    osw.close();

                } catch (FileNotFoundException e) {
                    //catch errors opening file
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                } 
```

编辑：这是我每次调用活动时从文件中读取的位置

```
private void readDataFromFile() {
        try {
            //Opens a file based on the file name stored in FILENAME.
            FileInputStream myIn = openFileInput(FILENAME);

            //Initializes readers to read the file.
            InputStreamReader inputReader = new InputStreamReader(myIn);
            BufferedReader BR = new BufferedReader(inputReader);

            //Holds a line from the text file.
            String line;

            //currentAssignment to add to the list
            Assignment currentAssignment = new Assignment();

                while ((line = BR.readLine()) != null) {
                    switch (index) {
                    case 0:
                        //Toast.makeText(this, line, Toast.LENGTH_LONG).show();
                        currentAssignment.setTitle(line);
                        index++;
                        break;
                    case 1:
                        //Toast.makeText(this, Integer.toString(assignmentListIndex), Toast.LENGTH_LONG).show();
                        currentAssignment.setDate_due(line);
                        Statics.assignmentList.add(assignmentListIndex, currentAssignment);
                        index = 0;
                        assignmentListIndex++;
                        currentAssignment = new Assignment();
                        break;
                    default:
                        Toast.makeText(this, "error has occured", Toast.LENGTH_SHORT).show();
                        break;
                    }
                }
                BR.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
    } 
```

当用户单击创建新分配时，这是一个功能。当他们单击作业上的保存按钮时，它应该将该作业保存到文件中，然后我稍后阅读它并将其显示在 listView 中。它所做的是在 listView 中显示第一项，当我创建新作业时，它会覆盖保存文件中的先前文本并在 listView 中替换它。如果你们需要我发布更多代码，请告诉我。我很困惑为什么这不起作用:(

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-09T03:00:58.603

而不是[`Context.MODE_PRIVATE`](http://developer.android.com/reference/android/content/Context.html#MODE_PRIVATE)，使用[`Context.MODE_APPEND`](http://developer.android.com/reference/android/content/Context.html#MODE_APPEND). 此模式附加到现有文件而不是删除它。[（有关文档](http://developer.android.com/reference/android/content/Context.html#openFileOutput%28java.lang.String,%20int%29)[中的`openFileOutput`](http://developer.android.com/reference/android/content/Context.html#openFileOutput%28java.lang.String,%20int%29)更多详细信息。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T03:19:11.203

而不是使用`OutputStreamWriter`Class 我建议你使用`BufferedWriter`Class 如下，

```
private File myFile = null; 
private BufferedWriter buff = null;

myFile = new File ( "abc.txt" );

buff = new BufferedWriter ( new FileWriter ( myFile,true ) );

buff.append ( assignmentTitle );
buff.newLine ( );
buff.append ( assignmentDate ); 
buff.newLine ( );
buff.close();
myFile.close(); 
```

# python - maya.standalone.initialize() 永远挂起

> ID：12336183
> 
> 赞同：1
> 
> 时间：2012-09-09T02:59:01.617
> 
> 标签：python, maya

重复步骤：

```
gfixler@gigabox:/autodesk/maya2012-x64/bin$ ./mayapy
Python 2.6.4 (r264:75706, Nov  3 2009, 14:09:42) 
[GCC 4.1.2 20070626 (Red Hat 4.1.2-14)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import maya.standalone
>>> maya.standalone.initialize() # this hangs until I ^C
^CResult: untitled
Fatal Error. Attempting to save in /usr/tmp/gfixler.20120908.1953.ma
gfixler@gigabox:/autodesk/maya2012-x64/bin$ 
```

我认为这是某种库路径问题，但我不知道如何找出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:47:25.590

我弄清楚了这个问题。

在尝试解决这个问题的过程中，我了解`python -m trace --trace script.py`了 Python 调试器 pdb 以及一些关于 pdb 的知识。我通过在包含以下内容的文件上调用跟踪将这些联系在一起：

```
pdb.run(maya.standalone.initialize(), globals(), locals()) 
```

我不知道这是使用不正确还是过度杀伤（打印出大量信息后仅跟踪就挂起，重定向到文件中没有任何用处），但是在点击`n`（下一步）和`s`（步骤）之后pdb 中的数百个 enter 按键让我无处可去，我一时兴起输入`help`并获得了帮助菜单。我决定尝试列出的 EOF 命令，它一直运行到崩溃并显示无法加载 commandPort 的消息。我记得我上周在与鼻子战斗时将该值设置为自动加载（首选项窗口，应用程序部分），显然这导致它挂在错误的条目（“：12345”）上，绝对没有任何消息。我打开 UI Maya，删除了该首选项，现在`mayapy`初始化正常。呸。

# html - 浏览器重绘和性能

> ID：12336186
> 
> 赞同：1
> 
> 时间：2012-09-09T02:59:38.837
> 
> 标签：html, css, performance, browser

我有一个使用大量 CSS3 阴影的单页应用程序。该应用程序由代表页面的 8 个面板组成。一次只能看到 1 个面板，而其他 7 个面板是隐藏的（样式 display:none;）。用户单击菜单以在面板之间移动。

谷歌的 Speed Tracer 大约 75% 的资源用于重绘。我的问题是：**浏览器重绘是否会影响 A）仅页面的可见元素或 B）每个元素，无论是否可见？**

如果是B，那么我无能为力。如果它是 A，那么我可以清除隐藏面板的 html，并只为可见面板设置内部 DOM 元素，以减少重绘时间。

让我知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T16:05:21.797

回答性能问题的方法是执行基准测试。如果您想知道 display:none 元素有多少性能开销，请执行以下操作：

测试 1：加载所有 display:none 元素的页面，测量重绘速度。

测试 2：修改页面，使 display:none 元素被完全删除，加载此页面，并测量重绘速度。

这两个测试之间的区别在于 display:none 元素的重绘开销。希望它将是最小的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T05:17:38.663

隐藏元素不应重绘。你在为面板制作动画吗？动画（尤其是翻译）具有阴影的元素确实会增加重绘的负担。此外，阴影越大，重绘所需的时间就越长。我没有做过精确的测量，只是根据个人经验得出的；'jank' 很快就变得非常明显，至少在旧机器上是这样。也许尝试使用背景数据 uri 图像。

# clojure - 如何在不重新启动的情况下使用 enlive 时重新加载模板

> ID：12336188
> 
> 赞同：3
> 
> 时间：2012-09-09T03:00:02.880
> 
> 标签：clojure, ring, enlive

我正在使用 enlive 进行 Web 开发。我使用 repl 启动我的环服务器`(serve my-app/handler)`

但是，当我对我的任何 html 模板进行更改时，我必须重新启动我的 repl 才能显示更改。如何在不重新启动 repl 的情况下重新加载我的标记？

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T07:34:42.510

您需要重新评估读取模板的行。例如，在我的项目中，我必须重新评估（Emacs 中的“Cx Ce”）以下行：

```
(def table-template (h/html-resource "META-INF/web/table.html")) 
```

如果您不使用 Emacs，您可以尝试包含带有 :reload 的模板的 require 命名空间，请参阅：[force clojure :reload](https://stackoverflow.com/questions/3902545/force-clojure-reload)

# css - 子元素在活动时如何改变父元素的外观？

> ID：12336191
> 
> 赞同：0
> 
> 时间：2012-09-09T03:00:24.623
> 
> 标签：css

我在 li 元素中有一个 img 元素，当用户单击图像时，我想更改 li 元素的背景。

```
#image:active {
    XXX background-image: url("row_selected.png");
} 
```

我需要为 XXX 部分添加什么来引用父 li？

谢谢

# windows-phone-7 - 在来自另一个 .xaml 的 ControlTemplate 中包含控件

> ID：12336196
> 
> 赞同：0
> 
> 时间：2012-09-09T03:02:33.170
> 
> 标签：windows-phone-7, xaml, datatemplate, controltemplate, generic.xaml

我想创建一个在其上显示图像和水印（图像或其他内容）的控件。
但是应该从另一个 XAML 文件加载水印，以便让人们自定义水印的显示方式：对齐、不透明度、大小、水印的性质（TextBlock、Image、...）。

例如，我可以用这种外观加载我的水印

```
<Border BorderThickness="5" BorderBrush="Aqua" Width="50" Height="50">
  <Image Source="play.png" />
</Border> 
```

此代码来自我的 Themes/generic.xaml，而*MyWatermarkControl*（从 Control 继承）是包含控件代码（依赖属性）的类。

```
<Style TargetType="local:MyWatermarkControl">
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="local:MyWatermarkControl">
        <Grid>
          <Image Source="{TemplateBinding ImagePath}" />
          <Image x:name="watermark" Source="play.png" /> <!--I want this to be loaded from another .xaml-->
        </Grid>
      </ControlTemplate>
    </Setter.Value>
  </Setter>
</Style> 
```

我的搜索结果使我添加了我的 ControlTemplate 内容，例如 ContentPresenter、ContentTemplate、DataTemplate ：结果太多，我无法理解它们是如何工作的，但事实上它们是嵌套的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T06:48:47.553

您可以添加一个`Source`属性，`MyWatermarkControl`然后将`Source`嵌入的属性绑定`Image`到此属性。有关更多详细信息，请参阅我编写的以下教程：

[在 WPF / Silverlight 中创建可重用用户控件的简单模式](http://www.scottlogic.co.uk/blog/colin/2012/02/a-simple-pattern-for-creating-re-useable-usercontrols-in-wpf-silverlight/)

# python - 如何在python中的进程之间做好莱坞原则？

> ID：12336197
> 
> 赞同：1
> 
> 时间：2012-09-09T03:03:11.657
> 
> 标签：python, multiprocessing

我正计划将我的项目更改为多进程，以便我可以使用更多资源，这是我的数据库模块代码

```
import pymysql
import threading
class tdb:
    def __init__(self):
        self.totalEffected = 0
        pass

    def start(self):
        self.conn = pymysql.connect(host='xxxx', port=3306, user='root', passwd='xxxx', db='xxxx', charset='utf8')

    def select(self,sql,args=None):
        cur = self.conn.cursor()
        cur.execute(sql,args)
        result = cur.fetchall()
        cur.close()
        return result

    def execute(self,sql,args=None):
        cur = self.conn.cursor()
        result = cur.execute(sql,args)
        cur.close()
        self.totalEffected+=result
        return result

#    def __commit(self,callback):

    def __commitCallback(self,result):
        print('commit result:',result)
        self.conn.close()

    def errorc(self,*args):
        print('error')

    def end(self):
#        init()
#        p.apply_async(self.conn.commit, callback=self.__commitCallback,error_callback=self.errorc)
        if self.totalEffected!=0:
            thread = threading.Thread(target=self.t)
            thread.start()
        else:
            self.conn.close()

#        p.apply(self.conn.commit)
#        self.conn.close()
#        print('result:' ,result.get())
    def t(self):
        self.conn.commit()
        self.conn.close() 
```

真正需要处理的唯一操作是 conn.commit()，我使用线程来执行它，所以我可以立即返回。我曾经使用 Pool.apply_async()，但它没有回调，所以我想知道如何让其他进程调用我，所以我不必花时间等待接收。

# installshield - 识别已安装应用程序的产品语言

> ID：12336198
> 
> 赞同：0
> 
> 时间：2012-09-09T03:03:15.997
> 
> 标签：installshield, installshield-2011

我有多语言安装设置程序，用户可以在其中选择 5 种不同的语言。考虑我已经安装了德语的应用程序。每当我卸载应用程序或更新以前的设置时，它都会以德语启动。我想知道安装程序将如何检测较旧的安装产品语言。

就我而言，我创建了一个仅升级安装，它将检测安装的先前版本并进行主要升级。在主要升级中，我不想显示语言对话框。更新应该发生在较早安装的语言中。

installscript 是否有任何 API 来检测早期安装的应用程序产品语言。？

我相信应该有一些方法可以像卸载那样做，任何人都可以给我一些建议。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T16:59:18.530

对于纯 InstallScript 安装，这在卸载键的命令行中进行跟踪。寻找`/L`参数。

对于基于 Windows Installer 的安装，Windows Installer 会自动记住这一点，并跟踪在初始安装时应用了哪些转换。这包括语言转换。

# opengl - OpenGL：GL_CLAMP 导致无效枚举错误

> ID：12336203
> 
> 赞同：1
> 
> 时间：2012-09-09T03:03:53.840
> 
> 标签：opengl, lwjgl

我正在使用 LWJGL，当使用 Util.checkGLError() 检查时，以下 OpenGL 调用会导致 Invalid Enum 错误

GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_WRAP_S, GL11.GL_CLAMP);

我已经把它缩小到 GL_CLAMP，因为 GL_REPEAT 有效。还应该注意的是，GL_CLAMP 在我的笔记本电脑上运行良好，但是当我在桌面上运行它时出现错误。桌面有一个 Raedon 5700。这是一个已知的驱动程序问题还是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T03:08:30.573

这是一个想法：停止使用`GL_CLAMP`. [`GL_CLAMP_TO_EDGE`](http://www.opengl.org/wiki/Sampler_Object#Edge_value_sampling)不管怎样，你真正想要的是。`GL_CLAMP`不做你认为它做的事。

如果您以某种方式使用 LWJGL 创建了核心 OpenGL 上下文，那么这可能就是您获得`GL_INVALID_ENUM`. 因为`GL_CLAMP`在 3.1 中已从核心 OpenGL 中删除。

# design-patterns - 如何在加工中以一定的弧线和直线移动形状？

> ID：12336209
> 
> 赞同：1
> 
> 时间：2012-09-09T03:05:11.963
> 
> 标签：design-patterns, move, processing, linear-algebra, shape

我制作了经典的随机移动圆圈，如图所示：

![在此处输入图像描述](../Images/cc69df0ec77713d52c6ebb1829bfa2c5.png)

这就是我想要实现的：

当 mouseClicked 时，圆圈排列如下： ![在此处输入图像描述](../Images/afc0005b706f4197768d61c0c20bcf84.png)

我想我可以检查所有圆圈的位置。如果他们的 y 位置在 1/2 高度内，他们应该形成弧。如果大于 1/2 高度，则它们形成线。

但诀窍是：如何形成那些形状？

我的意思是，我知道如何形成一个圆形，只需将它们的圆心移向一个点。但是LINE（如何移动他们的x位置）？？？甚至弧形？？？真的不知道。

有人知道吗？非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:17:20.820

如果我理解正确，您正在尝试计算两点之间的中间位置。这些点可以在一条线上或一条弧线上。

在一条线上获得中间位置相当简单，并且有多种方法可以解决这个问题。想到的一个想法是使用[lerp()](http://processing.org/reference/lerp_.html)函数（进行线性插值）。这是一个非常基本的示例：

```
//draw stuff
smooth();strokeWeight(5);
//line stuff
PVector start = new PVector(10,10);
PVector end   = new PVector(90,90);
int numPts = 5;
float increment = 1.0/numPts;

for(int i = 0; i < numPts; i++){//for each point that should be on the line
  float t = increment * i ; //'traversal' on the line (0.0 is at start 1.0 is at end)
  point(lerp(start.x,end.x,t),//interpolate and draw
        lerp(start.y,end.y,t));
} 
```

在新草图中运行它以了解我的意思。这也可以手动完成，使用 PVector 类和插值公式：

```
 point(percentage) = point(start) + ((point(end)-point(start)) * percentage) 
```

因此：

```
//draw stuff
smooth();strokeWeight(5);
//line stuff
PVector start = new PVector(10,10);
PVector end   = new PVector(90,90);
int numPts = 5;
float increment = 1.0/numPts;

for(int i = 0; i < numPts; i++){//for each point that should be on the line
  float t = increment * i ; //'traversal' on the line (0.0 is at start 1.0 is at end)
  PVector current = PVector.add(start,PVector.mult(PVector.sub(end,start),t));
  point(  current.x, current.y );
} 
```

但`lerp()`似乎更失败，并且可以轻松融入您现有的设置。

对于弧线，事情有点复杂，因为您需要一些三角学：将笛卡尔坐标转换为极坐标。这听起来有点复杂，但一旦你在脑海中想象事物，它并不难。想象一下你正在看一个时钟。

您可以通过查看两根针的**位置**（一个代表小时，一个代表分钟）来准确判断现在是什么时间。使用时钟位置或“坐标”，您可以轻松判断是中午/午夜。同样，您可以从“时钟坐标”转换回来，并说出中午/午夜的指针位置。

查看时钟，您还可以想象笛卡尔系统重叠：0,0 位于中心，笛卡尔坐标中的中午/午夜将是 (0,1)，如果 1 将用于针**长度**的单位。对于 15:15，您将获得 (1,0)，对于 18:30，您将获得 (0,-1)，对于 20:45，您将获得 (-1,0)，等等。您正在从一个 2D 坐标系（笛卡尔与**x**和**y ）到另一个（带有****小时**和**分钟**的“时钟” ）

以非常相似的方式，您可以从笛卡尔（使用**x**和**y**）转换为极坐标（使用**角度**和**半径**）并返回。例如，12:00 表示 (0,1)，但也可以表示为 ( **90 度**，**针长**)。

现在回到圆弧：您可能知道起点和终点角度，并且您知道半径（距圆心的距离），因此您已经获得了极坐标。您只需转换为笛卡尔（x，y）坐标，可以使用以下公式完成：

```
x = cos(angle) * radius;
y = sin(angle) * radius; 
```

此时值得注意的是，所有三角函数（sin/cos/tan/atan/etc.）都使用弧度。幸运的是，Processing 已经提供了一个[弧度（）](http://processing.org/reference/radians_.html)，它可以简化弧度到弧度的转换。

这是一个基本草图来说明这个想法：

```
//draw stuff
smooth();strokeWeight(5);
//arc stuff
float distance   = 35;//100 pixels away from the centre
float startAngle = radians(30);
float endAngle   = radians(120);
int numPts = 10;
float increment = 1.0/numPts;

for(int i = 0; i < numPts; i++){//for each point on the arc
  float intermediaryAngle = lerp(startAngle,endAngle,increment*i);
  float x = cos(intermediaryAngle) * distance;
  float y = sin(intermediaryAngle) * distance;
  point(x+50,y+50);//50 is offset to draw from the centre of the sketch
} 
```

我假设您应该能够检查对象的 y 坐标是否小于 height/2 并计算线定位的开始/结束位置或弧定位的开始角度/结束角度、半径/距离和偏移量

**更新** 如果您想从当前位置动画/插值到计算位置（无论是在线还是弧上），您需要处理它，因为上面的代码只处理计算目的地。这是我的意思的一个基本示例，基于您的一些代码：

```
int maxCircle = 10;
Circle[] circles = new Circle[maxCircle];
float increment = (1.0/maxCircle);
float traversal = 0.0;

void setup(){
  size(400,400);
  smooth();strokeWeight(5);
  for(int i=0;i<maxCircle;i++){
   circles[i] = new Circle(random(width),random(height),random(2,20));
  }
}
void draw(){
  background(255);
  for(int i=0;i<maxCircle;i++){
    if(!mousePressed)    circles[i].update(width,height);//default
    else{//if some event happens
      //compute destination
      float x,y;
      float offx = width/2;
      float offy = height/2;
      //move to line
        float startX = 0;
        float endX = width;
        float t = increment * i;
        x = lerp(startX,endX,t);
        y = offy-10;
      //interpolate/move to computed position
      if(traversal < 1.0){//if circle hasn't reached destination yet
        traversal += 0.0001;//move closer to the destination
        circles[i].x = lerp(circles[i].x,x,traversal);
        circles[i].y = lerp(circles[i].y,y,traversal);
      }
    }
    circles[i].display();
  }
}

void mouseReleased(){
  traversal = 0;
}

class Circle{
      float x,y,vx,vy,r,speed;

  Circle(float tempx, float tempy, float tempr){  
     x=tempx;
     y=tempy;
     vx=random(-1,1);
     vy=random(-1,1);
     r=tempr;
    }

  void update(int w,int h){
   x+=vx;
   y+=vy;

   if(x<r || x>w-r){
     vx*=-1;};
   if(y<r || y>h-r){
     vy*=-1;};
    }

   void display(){
      fill(0,50);
      noStroke();
      ellipse(x,y,r,r);
    }  

    } 
```

按下鼠标时，圆圈将朝线条位置移动。另一种与上述类似的方法是使用 的速度`Circle`：

1.  计算方向向量（通过从当前位置向量中减去目标向量）
2.  找到当前速度（或速度矢量的大小）
3.  根据方向矢量及其速度缩放速度矢量。（如果您愿意，这将允许突然停止或减速）

这是一个代码示例：

```
int maxCircle = 10;
Circle[] circles = new Circle[maxCircle];

void setup() {
  size(400, 400);
  smooth();
  strokeWeight(5);
  for (int i=0;i<maxCircle;i++) {
    circles[i] = new Circle(random(width), random(height), random(2, 20));
  }
}
void draw() {
  background(255);
  for (int i=0;i<maxCircle;i++) {
    if (!mousePressed)    circles[i].update(width, height);//default
    else {//if some event happens
      //compute destination
      float x = map(i,0,maxCircle,0,width);
      float y = (height * .5) - 10;
      //update to destination
      circles[i].update(x,y,2);
    }
    circles[i].display();
  }
}

class Circle {
  float x, y, vx, vy, r, speed;

  Circle(float tempx, float tempy, float tempr) {  
    x=tempx;
    y=tempy;
    vx=random(-1, 1);
    vy=random(-1, 1);
    r=tempr;
  }

  void update(int w, int h) {
    x+=vx;
    y+=vy;

    if (x<r || x>w-r) {
      vx*=-1;
    };
    if (y<r || y>h-r) {
      vy*=-1;
    };
  }
  void update(float x,float y,float speed){
    //compute direction vector
    float dx = x - this.x;
    float dy = y - this.y;
    //find the current 'speed': vector's length or magnitude
    float len = sqrt(dx*dx + dy*dy);//PVector's mag() does this for you
    //normalize the vector
    dx /= len;
    dy /= len;
    //scale the vector
    dx *= speed;
    dy *= speed;
    //interpolate/move to computed position
    if(dist(this.x,this.y,x,y) > 2){//if circle hasn't reached destination yet (isn't close enough)
      this.x += dx;
      this.y += dy;
    }
  }

    void display() {
    fill(0, 50);
    noStroke();
    ellipse(x, y, r, r);
  }
} 
```

您可以运行以下命令：

```
var maxCircle = 10;
var circles = new Array(maxCircle);

function setup() {
  createCanvas(400, 400);
  smooth();
  fill(0,50);
  noStroke();
  for (var i=0;i<maxCircle;i++) {
    circles[i] = new Circle(random(width), random(height), random(2, 20));
  }
}
function draw() {
  background(255);
  for (var i=0;i<maxCircle;i++) {
    if (!isMousePressed)    circles[i].updateBounds(width, height);//default
    else {//if some event happens
      //compute destination
      var x = map(i,0,maxCircle,0,width);
      var y = (height * .5) - 10;
      //update to destination
      circles[i].update(x,y,2);
    }
    circles[i].display();
  }
}

function Circle(tempx, tempy, tempr){
  this.x=tempx;
  this.y=tempy;
  this.vx=random(-1, 1);
  this.vy=random(-1, 1);
  this.r=tempr;

  this.updateBounds = function(w,h) {
    this.x+=this.vx;
    this.y+=this.vy;

    if(this.x < this.r || this.x>this.w-this.r) {
      this.vx*=-1;
    }
    if (this.y<this.r || this.y>this.h-this.r) {
      this.vy*=-1;
    }
  }
  this.update = function(ax,ay,speed){
    //compute direction vector
    var dx = ax - this.x;
    var dy = ay - this.y;
    //find the current 'speed': vector's length or magnitude
    var len = sqrt(dx*dx + dy*dy);//PVector's mag() does this for you
    //normalize the vector
    dx /= len;
    dy /= len;
    //scale the vector
    dx *= speed;
    dy *= speed;
    //varerpolate/move to computed position
    if(dist(this.x,this.y,ax,ay) > 2){//if circle hasn't reached destination yet (isn't close enough)
      this.x += dx;
      this.y += dy;
    }
  }

  this.display = function() {
    ellipse(this.x, this.y, this.r, this.r);
  }
} 
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.4.4/p5.min.js"></script>
```

![草图预览](../Images/35216f7444465e72ad22b5de3f2fb4ec.png)

一些快速说明：

1.  请注意，我已经定义了另一种更新方法，我在其中进行矢量数学运算。在 Processing/Java 中，您可以拥有一个名称相同但参数不同的方法/函数，这有时会派上用场。在这种情况下，`void update(float x,float y,float speed)`也可能是`void seek(float x,float y,float speed)`or `void moveTo(float x,float y,float speed)`。
2.  矢量术语起初可能看起来很复杂，但一旦你进入它就会很有意义。此外，它在计算机图形学中非常有用（在处理或您决定将来使用的任何其他语言中）。我热烈推荐[Daniel Shiffman 的 Nature of Code](http://www.shiffman.net/teaching/nature/vectors/)关于该主题的 Vector 章节。它通过易于理解的示例进行了很好的解释。Processing 有方便的[PVector](http://processing.org/reference/PVector.html)类供您使用。
3.  将来，一旦您对向量感到满意，并且如果您想探索更高级的运动算法，请随时探索[自主转向行为/Boids](http://www.shiffman.net/teaching/nature/steering/)。（虽然这是一个高级主题，但很有趣/有趣）。

高温高压

# jquery - 单击事件在 Chrome 中有效，但在 Firefox 和 IE 中出现错误

> ID：12336210
> 
> 赞同：1
> 
> 时间：2012-09-09T03:05:17.977
> 
> 标签：jquery, internet-explorer, firefox, event-handling, onclick

我正在用 jquery 编写一个消息传递系统。当您单击具有“.open_message”类的线程标题时，它会通过 Ajax 打开一个包含该线程的所有消息的线程。我的问题是，当单击线程标题时，它无法识别 firefox 和 IE 中该特定线程标题的 id 属性。不过，它在 chrome 中运行良好。这是代码：

```
$('.open_message').on('click', function(e) {
        $(this).parent().removeClass('unread');
        $(this).parent().addClass('read');
    $('.message_container').html('');
    var theID = e.currentTarget.attributes[0].value;
    theID = theID.replace('#', '');
    var url = '".$url."'; 
    var dataString = 'thread_id=' + theID; 
    $('.message_container').append('<img id=\"loading\" src=\"' + url + '/images/loading.gif\" width=\"30px\" />');
        $.ajax({
            type: 'POST',
            url: 'get_thread.php',
            data: dataString,
            success: function(result) {
                $('#loading').hide();
                $('.message_container').append(result);
            }
        });
    return false;
}); 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T03:29:20.010

在点击事件中，元素 id 可以使用`this.id`. 所以下面应该是一个开始......

```
$('.open_message').on('click', function(e) {
    var dataString = 'thread_id=' + this.id,
        url = '".$url."'; 
    $(this).parent().removeClass('unread').addClass('read');   // Combine for speed
    $('.message_container').html('').append( etc...

    etc...

}); 
```

我承认你的`var url = '".$url."';`样子对我来说很奇怪，但我会假设那一点工作正常；）

您也可以使用`$.post`（如此处所示[）](http://api.jquery.com/jQuery.post/)。

# php - 如何从产品表中创建一个包含 5 个价格范围的范围

> ID：12336211
> 
> 赞同：0
> 
> 时间：2012-09-09T03:05:27.913
> 
> 标签：php, mysql

我有一个包含价格和主类别列的产品表。

我想查询我的数据库以查找给定类别（或所有类别）的价格范围。然后将这个价格范围分成适当数量的价格范围，即0-5英镑、5-10英镑等...

我无法理解如何做到这一点；我需要用 php 做这一切吗？

**编辑：**经过深思熟虑，澄清一下，我想结束，这样无论列出什么类别，我都可以显示大概 4 个价格范围，每个价格范围内的产品数量大致相等。我无法解决这个问题:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T03:24:33.923

对于每个类别的最低和最高价格：

```
SELECT category, min(price) as min_price, max(price) as max_price
from Products
Group BY category 
```

对于直接在查询中的范围，您可以执行以下操作

```
SELECT
    category,
    SUM(CASE WHEN price BETWEEN 0 AND 5 THEN 1 ELSE 0 END) as zero-five,
    SUM(CASE WHEN price BETWEEN 5 AND 10 THEN 1 ELSE 0 END) as five-ten,
    ...
from Products
Group BY category 
```

产量

```
Category  zero-five  five-ten
Cat1        2          4
Cat2        3          6 
```

或者

```
SELECT category, range, count(*)
FROM (
    SELECT 
        category,
        CASE WHEN price BETWEEN 0 to 5 THEN '0-5'
             WHEN price BETWEEN 5 to 10 THEN '5-10'
             ...
             ELSE '10+'
        END as range
    FROM products
)
group by category, range 
```

产量

```
Category  range count
Cat1       0-5    2      
Cat1       5-10   4      
Cat1       10+    0
Cat2       0-5    3      
Cat2       5-10   6      
Cat2       10+    0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T03:19:11.373

```
$sql = "
SELECT P1.category as category, min(P1.price) as min_price, max(P2.price) as max_price
FROM Products P1 join Products P2 on P1.category=P2.category
Group BY category
";
<table width="300" border="1">
<tr>
<td><b>category</b></td>
<td><b>min_price</b></td>
<td><b>max_price</b></td>
</tr>
$result = mysql_query($sql);
while($row = mysql_fetch_array($result))
{
//print data
?>
<tr>
<td><? echo $row['category']; ?></td>
<td><? echo $row['min_price']; ?></td>
<td><? echo $row['max_price']; ?></td>
</tr>
<?
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T03:15:37.020

不确定您的表结构，但这将在您的产品表中获取独特的价格：

```
select distinct price from products order by price desc; 
```

从这里开始，我可能会开始使用 PHP。您究竟希望如何将这些价格分成几组？

# cuda - 关于对齐的3个问题

> ID：12336213
> 
> 赞同：1
> 
> 时间：2012-09-09T03:06:26.057
> 
> 标签：cuda

*讨论仅限于计算能力 2.x*

**问题 1**

curandState 的大小为 48 字节（由 sizeof() 测量）。当分配 curandStates 数组时，每个元素是否以某种方式填充（例如，填充到 64 个字节）？还是它们只是连续放置在内存中？

**问题2**

[将结构传递给 CUDA 内核](https://stackoverflow.com/questions/4176762/passing-structs-to-cuda-kernels)的 OP声明“对齐部分是不必要的”。但是如果没有对齐，访问那个结构会被分成两次连续访问a和b。对？

**问题 3**

```
struct
{
    double x, y, z;
}Position 
```

假设每个线程都在访问上面的结构：

```
int globalThreadID=blockIdx.x*blockDim.x+threadIdx.x;
Position positionRegister=positionGlobal[globalThreadID]; 
```

为了优化内存访问，我应该简单地使用三个单独的双变量 x、y、z 来替换结构吗？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T04:52:43.163

(1) 它们被连续放置在内存中。

(2) 如果数组在全局内存中，每个内存事务为128字节，对齐到128字节。`a`只有当并且`b`恰好跨越 128 字节边界时，您才会获得两个事务。

(3) 性能通常可以通过使用数组结构而不是结构数组来提高。这只是意味着您将所有内容打包`x`成一个数组，然后`y`依此类推。例如，当您查看当一个 warp 中的所有 32 个线程到达需要的点时会发生什么时，这是有道理的`x`。通过将所有值打包在一起，warp 中的所有线程都可以使用尽可能少的事务进行服务。由于全局内存事务为 128 字节，这意味着如果值为 32 位字，则单个事务可以服务所有线程。您提供的代码示例可能会导致编译器将值保留在寄存器中，直到需要它们为止。

# java - Java 多项式乘法与 ArrayList

> ID：12336214
> 
> 赞同：1
> 
> 时间：2012-09-09T03:06:26.330
> 
> 标签：java, arraylist, multiplication, polynomial-math

我的程序中的一种方法有问题。该方法旨在采用 2 个数组列表，并像多项式一样在两者之间执行乘法运算。

例如，如果我要说`list1={3,2,1}`and `list2={5,6,7}`; 我试图获得一个返回值`15,28,38,20,7`。但是，我能得到的只是一条错误消息，上面写着：

线程“main”中的异常`java.lang.IndexOutOfBoundsException: Index: 0, Size: 0`。

我提供了以下方法：

```
private static ArrayList<Integer> multiply(ArrayList<Integer> list1,ArrayList<Integer> list2) {

    ArrayList<Integer> array =new ArrayList<Integer>(list1.size()+list2.size());

    for (int i=0;i<array.size();i++)
        array.add(i, 0);

    for (int i = 0; i < list1.size(); i++)

        for (int j = 0; j < list2.size(); j++)

            array.set(i+j, ((list1.get(i) * list2.get(j))+array.get(i+j)));

    return array;

} 
```

非常感谢解决此问题的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T03:15:39.170

将您的第一个 for 循环更改为：

```
for (int i = 0 ; i < list1.size() + list2.size() ; i++)
    array.add(0); 
```

正如你所拥有的那样，`array.size()`最初是`0`这样的，甚至永远不会进入第一个 for 循环，所以没有任何东西被添加到`array`. 的`ArrayList`容量与其大小不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T03:13:58.407

`(i+j)`在总结之前，您可能需要检查是否存在一个元素。所以这样做

```
int elementAtLoc = 0;
if(array.size() > i+j && array.get(i+j) != null ){
   elementAtLoc = array.get(i+j);
}
array.set(i+j, ((list1.get(i) * list2.get(j))+elementAtLoc)); 
```

而且不需要这个：

```
for (int i=0;i<array.size();i++)
    array.add(i, 0); 
```

因为我们正在处理`0`第二个循环本身的设置。它为您节省了额外的循环工作*以添加零*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T03:33:56.893

看看这些代码：

```
/**
 * The array buffer into which the elements of the ArrayList are stored.
 * The capacity of the ArrayList is the length of this array buffer.
 */
private transient Object[] elementData;

/**
 * The size of the ArrayList (the number of elements it contains).
 *
 * @serial
 */
private int size;

public ArrayList(int initialCapacity) {
super();
    if (initialCapacity < 0)
        throw new IllegalArgumentException("Illegal Capacity: "+
                                           initialCapacity);
this.elementData = new Object[initialCapacity];
}

public int size() {
   return size;
} 
```

此时，您必须通过构造函数创建一个实例，他们没有分配变量“size”，其中包含实际元素的数量。这就是你得到这个异常的原因。

# bash - 获取 ssh 的捷径

> ID：12336218
> 
> 赞同：1
> 
> 时间：2012-09-09T03:07:22.697
> 
> 标签：bash, ssh, sh, pwd, tilde-expansion

我正在编写一个与 ssh/git 一起使用的 shell 脚本。

如果可能的话，我想获取相对于主目录的当前目录。

目标是获得与 ssh 一起使用的最短路径，即用户上下文中的路径。

例如，如果我的工作目录是`/home/jon/folder/other`，并且我是作为的用户，`jon`我会从命令中得到 ( ) 。括号之间的波浪线斜线可选。`$HOME``/home/jon``~/``folder/other`

所以我可以给我的用户使用 ssh at`jon@server:folder/other`而不是long 的指令`jon@server:/home/jon/folder/other`。

有没有简单的方法可以做到这一点（我觉得有）还是我需要一个脚本来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T03:18:17.727

您可以使用以下表达式：

```
${PWD#$HOME/} 
```

`bash`操作从前面剥离`${string#substring}`（如果匹配）。`substring``$string`

这可能会帮助您解决未来的问题`bash`：[学习 bash 脚本的推荐在线资源](https://stackoverflow.com/q/855464/1380680)

# java - 找不到 rmic 错误类

> ID：12336224
> 
> 赞同：1
> 
> 时间：2012-09-09T03:08:46.993
> 
> 标签：java, rmi

我正在阅读head first java，我将尝试展示如何使用RMI的现成代码。这些是类：

远程接口

```
import java.rmi.*;

public interface MyRemote extends Remote {

    public String sayHello() throws RemoteException;
} 
```

远程实现

```
import java.rmi.*;
import java.rmi.server.*;

public class MyRemoteImpl extends UnicastRemoteObject implements MyRemote {

    public String sayHello() {
        return "Server Says,Hello";
    }

    public MyRemoteImpl() throws RemoteException { }

    public static void main(String[] args) {

        try {
            MyRemote service = new MyRemoteImpl();
            Naming.rebind("Remote Hello", service);
        } catch(Exception e) {
            e.printStackTrace();
        }
    }
} 
```

然后我将 .java 和 .class 文件放在 c:\RMI 中。运行它时，它说 MyRemoteImpl 类未找到，即使我从同一目录运行。我怎样才能解决这个问题？谢谢。

编辑：当我尝试运行此命令时出现错误

```
rmic MyRemoteImpl 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-29T23:31:04.450

BuddingProgrammer 的评论也对我有用。

例如，如果您的类位于文件夹 C:\users\renato\workspace\ADI\src\semana5 中，则应转到上一层： C:\users\renato\workspace\ADI\src 并且应该像这样编译：javac semana5\Calculadora.java

要运行 RMI，您应该在 中键入以下命令`C:\users\renato\workspace\ADI\src`：

```
 rmic semana5.CalculadoraImp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T11:58:57.283

1.  创建一个文件夹命名它`HelloServer`
2.  `package HelloServer;`在每个类的顶部添加一个 this 包，`MyRemote`然后`MyRemoteImpl`.
3.  打开 cmd 并从包含该文件夹的目录中写入`javac HelloServer/MyRemote.java`和。`javac HelloServer/MyRemoteImpl.java``HelloServer`
4.  `rmic HelloServer.MyRemoteImpl`从包含该文件夹的目录写入`HelloServer`。
5.  你现在应该有一个`MyRemoteImpl_stub.class`，你可以有一个美好的一天:)

PS：包名与 RMI 或类中使用的任何对象不同，这一点很重要。否则你会发生物体碰撞。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-17T04:08:50.970

由于我遇到了同样的问题并且这些答案都没有帮助我，我将添加对我有用的内容。我在包含 MyRemoteImpl.java 的目录中运行 rmic MyRemoteImpl 并得到了同样的错误。当我在包含 MyRemoteImpl.class 的目录中运行 rmic MyRemoteImpl 时，它工作并创建了 MyRemoteImpl_Stub.class。我不需要设置 CLASSPATH。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T05:22:40.760

如果您没有从包含 .class 文件的目录中运行此命令，则应该是，假设您发布的内容没有 package 语句。如果有包语句，您应该从包含最高级别包的目录中运行此命令。

否则你的 CLASSPATH 环境变量有问题。它至少应该包含“。”，可能还有一些其他的东西。作为一种解决方法，您可以采用 Isaac 的建议，但是当您开始编译和执行时，您只会遇到同样的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-08T13:33:27.417

*   当您尝试运行**类**`CLASSPATH`文件时，JVM 将在其中查找要执行的**类**文件，有一个名为路径变量。

***   **CLASSPATH**描述了应用程序中使用的所有必需文件可用的位置。

    *   Java 编译器和 JVM（Java 虚拟机）使用**CLASSPATH**来定位所需的文件。

    *   如果没有设置**CLASSPATH**，Java 编译器将无法找到所需的文件，因此会抛出错误。

    *   如果您不知道当前路径在哪里，请`echo "%CLASSPATH%"`在命令提示符下键入。

    *   或者，您也可以`CLASSPATH`在**环境变量中添加/删除/编辑变量**。

    *   确保已将**Java**添加到路径中。

    *   要添加文件所在的当前路径，`.class`有三种方法。

    1.  使用**环境变量**-[参考](https://www.javatpoint.com/how-to-set-classpath-in-java)
    2.  使用**命令提示符**-`set PATH = .`
    3.  `-classpath`执行时使用参数指定类路径。*   **分号 ( `;`)**用作分隔符，**点 ( `.`)**是**CLASSPATH**`-classpath`的默认值，同时使用参数指定类路径。** 

 **```
rmic -classpath . <Class Name> 
```

```
rmic -classpath "C:\Example\Demo" <Class Name> 
```

*   这里`.`代表当前目录，您可以在那里指定任何路径。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-14T22:46:42.173

我有相同的代码，但在一个 Maven 项目中。第一步是用`mvn compile`. 请注意，所有已编译的类（例如本例中的 MyRemoteImpl）都存储在 maven 项目的目标文件夹中。

下一步是`cd to \target\classes`文件夹。

最后，使用目标类的完全限定名称运行 rmic 命令，即使用类的包 - `rmic my_package1.my_sub_package.MyRemoteImpl`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-10T23:58:43.183

如果该类位于 C:/../src/Assign/implement.class 那么

1.  通过输入以下命令更改您在 cmd 中的目录：- cd C:/....../src
2.  运行命令：- rmic Assign.implement.class

它对我有用

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-02T19:55:33.577

我知道我已经晚了大约 8 年，但对于未来可能遇到同样问题的其他人来说，以下内容对我有用：

在包含您的文件的文件夹中，首先开始`javac *.java`，然后继续执行该`rmic class_name`步骤。这应该生成存根。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-09-09T03:52:01.073

尝试添加：

```
-classpath . 
```

默认情况下，rmic 的类路径源自 CLASSPATH 环境变量（感谢 EJP 的更正）。**

# google-app-engine - 从 Google App Engine 设置 Google Talk 状态（带身份验证）

> ID：12336227
> 
> 赞同：1
> 
> 时间：2012-09-09T03:09:22.017
> 
> 标签：google-app-engine, xmpp, google-talk

我正在尝试构建一个站点，该站点使用内置的[XMPP Python API](https://developers.google.com/appengine/docs/python/xmpp/overview)（或第三方，如果一个比另一个更好）从 Google App Engine 更新用户的 Google Talk 状态。我一直在寻找一些示例或文档来解释我将如何进行此操作，但我发现似乎没有提供功能齐全的解决方案。

App Engine 的 XMPP Python 开发人员文档建议可以通过以下`send_presence()`方法更新状态（[请参阅此处](https://developers.google.com/appengine/docs/python/xmpp/overview#Sending_Application_Status)）：

```
xmpp.send_presence(to_jid, status="My app's status") 
```

但是，这将如何被验证呢？我不必在请求中发送用户密码吗？（理想情况下，我想[按照这里的建议](https://developers.google.com/talk/jep_extensions/oauth)使用 OAuth 。）我误解了什么吗？

如果我在这里遗漏了一些明显的东西，请原谅。我对 Google App Engine 和 XMPP 都很陌生。与我在网上找到的许多示例不同，我不想创建一个聊天“机器人”；我只想更改现有用户的 Google Talk 状态。提前感谢您的任何指点！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T00:06:33.287

您不能使用 XMPP API 更改其他人的状态。

您可以使用 XMPP API 来代表您自己或您的用户（请参阅 GAE XMPP API 文档中的 XMPP 地址描述）。

您无法发送消息或更新 gmail 用户的状态。

# python - 将 CSV 文件读取到 numpy 数组，第一行为字符串，其余为浮点数

> ID：12336234
> 
> 赞同：32
> 
> 时间：2012-09-09T03:11:19.627
> 
> 标签：python, csv, numpy

我将数据存储在 CSV 中，其中第一行是字符串（列名），其余行是数字。如何将其存储到 numpy 数组中？我能找到的只是如何为列设置数据类型，而不是为行设置数据类型。

现在我只是跳过标题来进行计算，但我需要在最终版本中包含标题。但是，如果我将标题留在其中，则会将整个数组设置为字符串，并且计算会失败。

这就是我所拥有的：

```
 data = np.genfromtxt(path_to_csv, dtype=None, delimiter=',', skip_header=1) 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-09T15:18:37.090

`names=True`如果在函数中使用参数，则可以保留列名`np.genfromtxt`

```
 data = np.genfromtxt(path_to_csv, dtype=float, delimiter=',', names=True) 
```

请注意`dtype=float`, 这会将您的数据转换为浮点数。这比 using 更有效`dtype=None`，后者要求`np.genfromtxt`为您猜测数据类型。

输出将是一个结构化数组，您可以在其中按名称访问各个列。这些名字将取自您的第一行。可能会发生一些修改，例如列名中的空格将更改为`_`。该[文档](http://docs.scipy.org/doc/numpy/user/basics.io.genfromtxt.html)应涵盖您可能遇到的大多数问题。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-09T08:20:31.130

当您说您需要最终版本中的标题时，我不确定您的意思，但是您可以生成一个结构化数组，其中列可以通过如下字符串访问：

```
data = np.genfromtxt(path_to_csv, dtype=None, delimiter=',', names=True) 
```

然后使用 , 等访问`data['col1_name']`列`data['col2_name']`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-09T03:17:19.713

numpy 数组的整个想法是所有元素都是相同的类型。将标题读入 Python 列表，并将它们与数字分开管理。您还可以创建结构化数组（记录数组），在这种情况下，您可以使用标题来命名记录中的字段。在这种情况下，将它们存储在数组中将是多余的。

# google-maps - 切换 KML 图层，信息窗口不工作

> ID：12336237
> 
> 赞同：0
> 
> 时间：2012-09-09T03:12:53.593
> 
> 标签：google-maps, kml

我有这段代码，我正在尝试切换一些 kml 层。问题是当我单击标记时，它没有显示信息窗口。

也许有人可以告诉我我的错误。

**这是代码：**

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?key=IzaSyAvj6XNNPO8YPFbkVR8KcTl5LK1ByRHG1E&sensor=false">
    </script>
    <script type="text/javascript">

var map;

// lets define some vars to make things easier later

var kml = {
    a: {
        name: "Productores",
        url: "https://maps.google.hn/maps/ms?authuser=0&vps=2&hl=es&ie=UTF8&msa=0&output=kml&msid=200984447026903306654.0004c934a224eca7c3ad4"
    }

// keep adding more if you like 
};

// initialize our goo

function initializeMap() {
    var options = {
        center: new google.maps.LatLng(13.324182,-87.080071),
        zoom: 8,
        mapTypeId: google.maps.MapTypeId.TERRAIN
    }
    map = new google.maps.Map(document.getElementById("map_canvas"), options);

    createTogglers();
};

google.maps.event.addDomListener(window, 'load', initializeMap);

// the important function... kml[id].xxxxx refers back to the top 
function toggleKML(checked, id) {

 if (checked) {

        var layer = new google.maps.KmlLayer(kml[id].url, {
            preserveViewport: true,
            suppressInfoWindows: true 
        });
        // store kml as obj
        kml[id].obj = layer;
        kml[id].obj.setMap(map);
    }
    else {
        kml[id].obj.setMap(null);
        delete kml[id].obj;
    }

};

// create the controls dynamically because it's easier, really
function createTogglers() {

    var html = "<form><ul>";
    for (var prop in kml) {
        html += "<li id=\"selector-" + prop + "\"><input type='checkbox' id='" + prop + "'" +
        " onclick='highlight(this,\"selector-" + prop + "\"); toggleKML(this.checked, this.id)' \/>" +
        kml[prop].name + "<\/li>";
    }
    html += "<li class='control'><a href='#' onclick='removeAll();return false;'>" +
    "Remove all layers<\/a><\/li>" + 
    "<\/ul><\/form>";

    document.getElementById("toggle_box").innerHTML = html;
};

function removeAll() {
    for (var prop in kml) {
        if (kml[prop].obj) {
            kml[prop].obj.setMap(null);
            delete kml[prop].obj;
        }

    }
};

// Append Class on Select

function highlight(box, listitem) {
    var selected = 'selected';
    var normal = 'normal';
    document.getElementById(listitem).className = (box.checked ? selected: normal);
};

</script>

<style type="text/css">
.selected { font-weight: bold; }
</style>

</head>
<body>
<div id="map_canvas" style="width: 50%; height: 200px;"></div>
<div id="toggle_box" style="position: absolute; top: 200px; right: 1000px; padding: 20px; background: #fff; z-index: 5; "></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T03:43:33.730

KmlLayer 构造函数中 KmlLayerOptions 中的“ [suppressInfoWindows:true”会导致信息窗口被抑制。](https://developers.google.com/maps/documentation/javascript/reference#KmlLayerOptions)

# jquery - jQuery datepicker css 验证符合 W3C 标准

> ID：12336238
> 
> 赞同：1
> 
> 时间：2012-09-09T03:13:11.980
> 
> 标签：jquery, jquery-ui-datepicker, w3c-validation

我正在尝试让 W3C Validator 为我所有的 XHTML 和 CSS 工作。但是，当使用标准的 jQuery 日期选择器时，我`jquery-ui-1.8.23.custom.css`在下载的文件中收到 23 个 CSS 验证错误。

我真的不想更改页脚（或添加非标准页脚）来删除 CSS 验证图标，但我也不想自定义 CSS 文件来消除这些错误。这是我仅有的两个选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T23:43:21.047

对于缩放属性 - 它是 IE 的修复程序。jQuery 或 Google 常用。所以如果缩放是你唯一的错误 - 不要打扰它:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T10:30:40.170

不要对验证者过于热心。它只为您提供可能遇到的潜在问题的快速概览。在您的 CSS 上添加浏览器前缀无论如何都不会影响您的页面加载或浏览器性能。如果您的 CSS 通过所有规则，它不会将您的网站排名更高。如今，前端开发处于不断变化之中。草稿每天都在变化，新功能也在试验中。如果您希望您的 CSS 100% 有效，那么请删除所有前缀规则......不过它是有代价的。

# python - 如何使用存储在python字符串变量中的证书打开ssl套接字

> ID：12336239
> 
> 赞同：27
> 
> 时间：2012-09-09T03:13:40.700
> 
> 标签：python, sockets, ssl, certificate

在 Python 中， ssl.wrap_socket 可以从文件中读取证书， ssl.wrap_socket 需要证书作为文件路径。

如何使用从字符串变量读取的证书启动 SSL 连接？

我的主机环境不允许写入文件，并且 tempfile 模块不起作用
我使用的是 Python 2.7。
我将证书存储在 MySQL 中并作为字符串读取。

编辑：我放弃了，这基本上是要求用纯python代码实现ssl，这超出了我目前的知识。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-16T21:53:10.193

查看源代码， ssl.wrap_socket 直接调用本机代码（openssl）函数 SSL_CTX_use_cert_chain_file ，该函数需要文件路径，因此您尝试做的事情是不可能的。

以供参考：

在 ssl/ **init** .py 我们看到：

```
def wrap_socket(sock, keyfile=None, certfile=None,
                server_side=False, cert_reqs=CERT_NONE,
                ssl_version=PROTOCOL_SSLv23, ca_certs=None,
                do_handshake_on_connect=True):

    return SSLSocket(sock, keyfile=keyfile, certfile=certfile,
                   server_side=server_side, cert_reqs=cert_reqs,
                   ssl_version=ssl_version, ca_certs=ca_certs,
                   do_handshake_on_connect=do_handshake_on_connect) 
```

将我们指向 SSLSocket 构造函数（在同一个文件中），我们看到发生了以下情况：

```
self._sslobj = _ssl2.sslwrap(self._sock, server_side,
                                     keyfile, certfile,
                                     cert_reqs, ssl_version, ca_certs) 
```

_ssl2 在 C 中实现 (_ssl2.c)

查看 sslwrap 函数，我们看到它正在创建一个新对象：

```
 return (PyObject *) newPySSLObject(Sock, key_file, cert_file,
                                       server_side, verification_mode,
                                       protocol, cacerts_file); 
```

查看该对象的构造函数，我们最终看到：

```
 ret = SSL_CTX_use_certificate_chain_file(self->ctx,
                                                     cert_file); 
```

该函数在 openssl 中定义，所以现在我们需要切换到该代码库。

在 ssl/ssl_rsa.c 我们最终在函数中找到：

```
BIO_read_filename(in,file) 
```

如果你深入研究 BIO 代码（openssl 的一部分），你最终会得到一个正常的 fopen()：

```
fp=fopen(ptr,p); 
```

所以它看起来就像现在写的一样。它必须在 C 的 fopen() 可打开的文件中。

此外，由于 python 的 ssl 库如此迅速地跳转到 C 中，我也没有看到一个明显的地方可以在解决方法中使用monkeypatch。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T19:55:51.687

快速查看 ssl 模块源确认 API 不支持您想要的内容： [http ://code.google.com/codesearch#2T6lfGELm_A/trunk/Modules/_ssl.c&q=sslwrap&type=cs](http://code.google.com/codesearch#2T6lfGELm_A/trunk/Modules/_ssl.c&q=sslwrap&type=cs)

这并不是说不可能，您可以创建一个命名管道，从 Python 提供一端并将文件名提供给 ssl 模块。

为了更简单、更不安全的使用，将证书从内存转储到 mkstemp()'d 文件。

您甚至可以挂载 FUSE 卷并拦截文件回调。

最后，使用 ctypes 在运行时破解 ssl 上下文，并按照 C 配方从缓冲区中加载 cert/ket 从[内存而不是使用 OpenSSL 的文件中读取证书文件](https://stackoverflow.com/questions/3810058/read-certificate-files-from-memory-instead-of-file-openssl)以前已经做过类似的事情，但这并不是为了最胆小的人.

看起来您正试图摆脱例如应用程序引擎的“监狱”，也许这是不可能的？

如果你对 ssl 实现不挑剔，你可以使用 M2Crypto、TLS Lite、pyOpenSSL 或其他东西。较早的是纯python，您绝对可以破解它以使用内存中的证书/密钥。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-09-25T06:21:32.333

从 Python 3.4 开始，您可以使用 SSLContext#load_verify_locations：

```
context = ssl.SSLContext()
context.load_verify_locations(cadata=cert)  # Where cert is str. 
```

来自[https://docs.python.org/3/library/ssl.html#ssl.SSLContext.load_verify_locations](https://docs.python.org/3/library/ssl.html#ssl.SSLContext.load_verify_locations)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-09T23:48:43.570

您可以使用[StringIO](http://docs.python.org/library/stringio.html)将字符串视为文件。

# .net - DataGrid 水平滚动条已禁用

> ID：12336242
> 
> 赞同：0
> 
> 时间：2012-09-09T03:14:19.123
> 
> 标签：.net, wpf, datagrid, wpfdatagrid, wpf-4.0

我有 WPF DataGrid 和 ItemsSource 绑定到 ICollectionView 实现。在 DataGrid 实例化之前，集合中已经充满了项目。

DataGrid 中的所有列都是 DataGridTemplateColumn 类型。所有列都明确指定了宽度。

视图中的列太多，因此需要水平滚动。

当 DataGrid.Horizo​​ntalScrollBarVisibility 属性为自动水平滚动条时，直到我垂直滚动项目时才可见。

当 DataGrid.Horizo​​ntalScrollBarVisibility 属性为 Visible 水平滚动条时，直到我垂直滚动项目才启用。

更改其他属性（Width、MaxWidth、MinWidth、EnableColumnVirtualization、ScrollViewer.CanContentScroll、SelectionMode、SelectionUnit）没有效果。

将 DataGrid 放入 ScrollViewer 不是一种选择，因为在这种情况下，垂直滚动条会随着内容水平滚动。

那么，是什么导致了这种行为呢？可以做什么？

**更新**

用户控件的 XAML

```
<UserControl
    x:Class="Belrost.Windows.EventListEditor2"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="4" />
            <RowDefinition Height="23" />
            <RowDefinition Height="4" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="8" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="75" />
            <ColumnDefinition Width="4" />
            <ColumnDefinition Width="75" />
            <ColumnDefinition Width="4" />
            <ColumnDefinition Width="75" />
            <ColumnDefinition Width="8" />
        </Grid.ColumnDefinitions>
        <DataGrid
            Grid.Row="0" Grid.RowSpan="1"
            Grid.Column="0" Grid.ColumnSpan="8"
            ItemsSource="{Binding}"
            IsSynchronizedWithCurrentItem="True"
            AutoGenerateColumns="False"
            SelectionMode="Extended"
            SelectionUnit="FullRow">
            <DataGrid.Columns>
                <DataGridTemplateColumn Header="Timestamp" Width="120">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Timestamp}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="Machine" Width="120">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Machine}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="Principal" Width="120">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Principal}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="MemberName" Width="120">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding MemberName}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="MemberFile" Width="120">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding MemberFile}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="MemberLine" Width="120">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding MemberLine}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="MemberTime" Width="120">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding MemberTime}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</UserControl> 
```

用户控件通过以下方式放置在 TabControl 上

```
<TabControl.ContentTemplate>
    <DataTemplate>
        <ContentControl Content="{Binding}">
            <ContentControl.Resources>
                <DataTemplate DataType="{x:Type w:EventListView}">
                    <w:EventListEditor2 />
                </DataTemplate>
            </ContentControl.Resources>
        </ContentControl>
    </DataTemplate>
</TabControl.ContentTemplate> 
```

**笔记**

如果我将用户控件的代码复制粘贴到 DataTemplate 中，一切正常。所以问题与UserControl的使用有关。

# jquery - jQuery $.post() 和 PHP if(isset($_POST)) 帮助优化

> ID：12336251
> 
> 赞同：1
> 
> 时间：2012-09-09T03:17:35.457
> 
> 标签：jquery, server-side, .post

我有一个要创建用户帐户的网站。该网站目前运行良好，但我想知道如何改进和解决我遇到的问题。如果站点将帖子发送到服务器端 php，它会正确创建用户，但是如果有人在没有发布的情况下加载服务器 php 文件，它将在数据库中创建一个所有值都为空的用户。我正在检查用户，但请帮我优化我的代码。先感谢您。

```
/// HTML ///

<form id="form_customer">
    // form stuff here, please note my button for submit is not in the form but outside
</form>

<button id="form_submit">Submit</button>
<button id="form_cancel">Cancel</button>

//Javascript jQuery

$("#form_cancel").click(function() {
  window.location = 'index.php';
});

$("#form_submit").click(function() {
$.post("incl/server_register.php", payload, function(data) {
    if(data == "500"){
        alert("An Error has occured.");
    }
    if(data == "200"){
        alert("Registration complete. Redirecting...");
        indow.location = 'index.php';
    }
    if(data == "400")
        alert("Username already exists. Please select another.");
},"json");

// And here is my server side PHP
$mysqli = new mysqli($dbHost, $dbUser, $dbPass);
$mysqli->select_db($dbDB);

// Check connection
if($mysqli->connect_error) {
    die('Connection Error: (' .$mysqli->connect_errno .') ' .$mysqli->connect_error);
}

if(isset($_POST))
{
    // Query DB 
$check = "SELECT * FROM table WHERE Username='$sUsername'";
$result = $mysqli->query($check);

if($result->num_rows == 0)
    {
        $query = "INSERT into table (blah blah)
        $result = $mysqli->query($query);
    if($result == false)
        echo json_encode("500");
    else {
        echo json_encode("200");
        mail($to, $subject, $message, $headers);
    }
}
else
    echo json_encode("400");
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T03:30:30.403

检查用户名和密码是否不为空（也不要忘记修剪）。

```
if (!empty($_POST['username']&&!empty($_POST['password'])) {
     // Here create new account
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T03:30:58.847

`isset($_POST)`总是正确的。当页面加载而不发布时，`$_POST`设置为空数组。

改变是为了`if (count($_POST) > 0)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T03:38:04.907

你可以判断价值

```
$username = trim($_POST['username']);
$password = trim($_POST['password']);

if (!empty($username&&) && !empty($password)){

     //before you insert the data,you can do like this to avoid some special chars

     $username = strip_tags($username);

     //and then excute the sql to insert account
     //I suggest you use mysqli_query, while not mysql_query

} 
```

# jquery - HTML5 数据块 JSON

> ID：12336253
> 
> 赞同：3
> 
> 时间：2012-09-09T03:17:57.590
> 
> 标签：jquery, html

好的，所以这段代码：

```
<div class="summary-block" data-block-json="{"pageSize":4,"acceptTypes":["gallery","blog","projects","calendar"]}"> 
```

我正在尝试使用一些 jQuery 来完成这样的事情：

```
$(".summary-block").data('block', 'pageSize').each(function() {

  $('.summary-item').wrap('<div class="col sqs-col-3 span-3"></div>');
  $('.col > .summary-item').wrap('<div class="newSummary"></div>');

}); 
```

现在代码可以 100% 工作，但就我要询问的内容而言，不是 100%。我怎样才能使它像这样：

```
$(".summary-block").data('block', 'pageSize':4).each(function() {

  $('.summary-item').wrap('<div class="col sqs-col-3 span-3"></div>');
  $('.col > .summary-item').wrap('<div class="newSummary"></div>');

}); 
```

请注意 :4 这必须以某种方式包含在我的代码中。请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T03:26:27.543

您不过滤元素，您只是设置新`data`属性，而不是选择具有特定`data`属性的元素，同样在您的`each`函数上下文中您应该使用`this`which 引用当前元素 not`$('.summary-item')`并且您应该编码`data('block-json')`, not `data('block')`。你可以使用`filter`方法。

```
<div class="summary-block" data-block-json='{"pageSize":4,"acceptTypes":["gallery","blog","projects","calendar"]}'>...</div> 
```

```
var $elems = $('.summary-block').filter(function(){
    return $(this).data('block-json').pageSize === 4
})

$elems.each(function(){
    $('.summary-item', this).wrap('<div class="col sqs-col-3 span-3"></div>');
    // or $(this).find('.summary-item')....
}) 
```

[http://jsfiddle.net/xw2vN/](http://jsfiddle.net/xw2vN/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T03:27:40.493

试试这个

```
$(".summary-block").data('block', 'pageSize').where('pagesize' , 4 ).each(function() { 
```

# bash - 如何在移动地址获取文件？

> ID：12336257
> 
> 赞同：1
> 
> 时间：2012-09-09T03:18:28.173
> 
> 标签：bash, wget

我正在尝试从网站下载 PDF 文件，我知道文件的名称，例如**foo.pdf**，但它的位置每隔几周就会更改：

例如 **www.server.com/media/123456/foo.pdf** 更改为 **www.server.com/media/245415/foo.pdf**

这个数字总是一个六位数的数字，所以我尝试使用 bash 脚本遍历所有 1000 万个，但这显然需要很多时间：

```
i=0
until [ "$RC" == "0" ] || [ $i == 1000000 ]
do
  b=$(printf %06d $i)
  wget -q http://www.server.com/media/${b}/foo.pdf -O bar.pdf
  export RC=$?
  i=$(($i + 1))
done 
```

对于错误的地址，我只会收到 404 错误。
我围绕当前正确的地址对其进行了测试，并且可以正常工作。

有谁知道更快的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T03:27:18.067

如果该页面链接到其他任何地方，那么您可以从那里获取链接，然后获取文件。如果不是，您可能不走运。

请注意，大多数服务器会考虑尝试攻击网络服务器 1,000,000 次滥用，并且会禁止您的 IP 甚至尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T03:29:39.017

不时遵循这些值，并确定它们是否符合算法。不过，正如 zigdon 上面所说，如果您有链接的来源，请先获取它，然后点击 PDF 的链接。

# css - jQuery Mobile Radio 字段集具有不同的样式

> ID：12336263
> 
> 赞同：4
> 
> 时间：2012-09-09T03:19:59.860
> 
> 标签：css, jquery-mobile, radio-button, append

这两个 jQuery Mobile 复选框具有不同的样式，但是我相信我正在以非常相似的方式创建它们。我动态附加的顶框，底框是硬编码的。有谁知道为什么这是风格上的差异？

**div 来保存字段集**

```
<fieldset id="surveyViewer" data-role="controlgroup">
  </fieldset> 
```

**附加单选按钮**

```
$('#surveyViewer').append('<legend>Survey Preview:</legend><input type="radio" name="options" id="1" value="1" /><label for="1">1</label><input type="radio" name="options" id="2" value="2" /><label for="2">2</label>'); 
```

**此行刷新样式：**

```
$('#surveyViewer').trigger("create");
$("input[type='radio']").checkboxradio("refresh"); 
```

![在此处输入图像描述](../Images/277315a9efebc0b23e2121ad34abe03c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T03:24:18.537

当您动态加载前两个时，您的所有 CSS 都没有被应用。

添加`.trigger("create")`在获取添加内容的元素上。

见这里：[jQuery Mobile 在动态添加内容后不应用样式](https://stackoverflow.com/questions/7999436/jquery-mobile-does-not-apply-styles-after-dynamically-adding-content)

**更新**

> 但是，如果您在客户端生成新的标记或通过 Ajax 加载内容并将其注入页面，则可以触发 create 事件来处理新标记中包含的所有插件的自动初始化。这可以在任何元素（甚至是页面 div 本身）上触发，从而为您节省手动初始化每个插件（listview 按钮、选择等）的任务。
> 
> 例如，如果通过 Ajax 加载了 HTML 标记块（例如登录表单），则触发 create 事件以自动将其包含的所有小部件（在本例中为输入和按钮）转换为增强版本。这种情况的代码是：

```
$( ...new markup that contains widgets... ).appendTo( ".ui-page" ).trigger( "create" ); 
```

**更新#2**

```
// HTML
<a id="myButton" href="" data-role="button" data-theme="e">Add Radio</a>

<div id="radiodiv1">
<fieldset id="surveyViewer" data-role="controlgroup"></fieldset>
</div>

// JS 
$( "#myButton" ).bind( "click", function(event, ui) {

     $("#surveyViewer").append('<legend>Survey Preview:</legend><input type="radio" name="options" id="1" value="1" /><label for="1">1</label><input type="radio" name="options" id="2" value="2" /><label for="2">2</label>');

     $("#radiodiv1").trigger("create");

}); 
```

我创建了一个 JSfiddle 来说明一个解决方案。我在我的 iPad 上完成了所有这些（不客气），所以如果这对你有用，请至少将其标记为正确答案哈哈。这是链接（基于通过单击按钮添加单选按钮）

**工作示例**：http: [//jsfiddle.net/nsX2t/](http://jsfiddle.net/nsX2t/)

# android - VB.Net Web 服务中的 java.net.ServerTimeoutException

> ID：12336264
> 
> 赞同：0
> 
> 时间：2012-09-09T03:20:39.867
> 
> 标签：android, vb.net, web-services, exception

我制作了一个 VB.Net Web 服务。这将由 IIS 7.0 中的 Android Emulator 调用。返回 2 位总和的简单方法可以正常工作，但是当我尝试在数据库 MY SQL SERVER 中插入记录时，它会生成 java.net.ServerTimeoutException。但是当我当时尝试从浏览器运行它时，它会正常工作，这意味着它能够在数据库中插入记录，但从 Android 模拟器它会给出一个异常。

```
package com.BuddiesHub;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

public class Register extends Activity
{
EditText mobno,password,cnfpassword,secqus,secans;
Button register;    

public final String SOAP_ACTION = "http://tempuri.org/doRegister";
public  final String OPERATION_NAME = "doRegister"; 
public  final String WSDL_TARGET_NAMESPACE = "http://tempuri.org/";
public  final String SOAP_ADDRESS = "http://10.0.2.2/BuddiesHub/Service.asmx";

SoapSerializationEnvelope envelope=null;
HttpTransportSE httpTransport=null;
PropertyInfo pi=null;
SoapObject request=null;
Object response=null;
//private static final String SOAP_ACTION = "http://tempuri.org/HelloWorld";

 /** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.register);

    mobno=(EditText)findViewById(R.id.txtmobno);
    password=(EditText)findViewById(R.id.txtpassword);
    cnfpassword=(EditText)findViewById(R.id.txtcnfpassword);
    secqus=(EditText)findViewById(R.id.txtsecqus);
    secans=(EditText)findViewById(R.id.txtsecans);

    register=(Button)findViewById(R.id.btnregister);
    register.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        request = new SoapObject(WSDL_TARGET_NAMESPACE,OPERATION_NAME);

        //mobno ,name,secqus,secans

        pi=new PropertyInfo();
        pi.setName("mobno");
        pi.setValue(mobno.getText().toString());
        pi.setType(String.class);
        request.addProperty(pi);

        pi=new PropertyInfo();
        pi.setName("name");
        pi.setValue(password.getText().toString());
        pi.setType(String.class);
        request.addProperty(pi);

        pi=new PropertyInfo();
        pi.setName("secqus");
        pi.setValue(secqus.getText().toString());
        pi.setType(String.class);
        request.addProperty(pi);

        pi=new PropertyInfo();
        pi.setName("secans");
        pi.setValue(secans.getText().toString());
        pi.setType(String.class);
        request.addProperty(pi);

        envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true;

        envelope.setOutputSoapObject(request);
        httpTransport = new HttpTransportSE(SOAP_ADDRESS);
        //SoapObject response=null;
        // response = null;
        //String result = null;

        try
        {
            httpTransport.call(SOAP_ACTION, envelope);
            response = envelope.getResponse().toString();
            Toast.makeText(getBaseContext(), response.toString(), Toast.LENGTH_LONG ).show();
        }
        catch (Exception exception)
        {
            response=exception.toString();
            Toast.makeText(getBaseContext(), response.toString(), Toast.LENGTH_LONG ).show();
        }
    } });
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T03:46:55.663

你加了吗

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

到您的 AndroidManifest.xml？

# javascript - 使用 jQuery 将 ID 更改为段落中的文本并用下划线替换空格

> ID：12336275
> 
> 赞同：2
> 
> 时间：2012-09-09T03:25:30.727
> 
> 标签：javascript, jquery, html

我想获取`p`标签中的文本，并将`p`标签作为 ID 的父 ( `div`)。我还想为标签`_`中的任何空格添加一个。`p`

例子：

```
<div class="circle"><p>Apple</p></div>
<div class="circle"><p>Banana</p></div>
<div class="circle"><p>Carrot Juice</p></div> 
```

到

```
<div id="Apple" class="circle"><p>Apple</p></div>
<div id="Banana" class="circle"><p>Banana</p></div>
<div id="Carrot_Juice" class="circle"><p>Carrot Juice</p></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T03:29:15.680

```
$('div.circle p').each(function() {
    $(this).parent('div').attr('id', $(this).text().replace(/ /g,'_'));
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/8LzYk/1/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T03:29:05.930

使用 jQuery，`$('div.circle p')`用作您的选择器，并`parent()`通过`.attr()`.

```
$('div.circle p').each(function() {
  // For each <p>, get the parent and set id attribute
  // to the value of the <p>'s text() (via $(this))
  // after replacing spaces with _
  $(this).parent().attr('id', $(this).text().replace(' ', '_'));
  // Edit: for global replacement, use a global regexp /\s/g
  $(this).parent().attr('id', $(this).text().replace(/\s/g, '_'));
}); 
```

### jsfiddle：

[这是一个工作示例。](http://jsfiddle.net/yBkjv/2/)

# asp.net-mvc - 使用 Ajax 的 ASP.NET MVC 的 Kendo UI 中的级联 DropDownList？

> ID：12336276
> 
> 赞同：4
> 
> 时间：2012-09-09T03:25:49.783
> 
> 标签：asp.net-mvc, telerik, telerik-mvc, kendo-ui

有人可以提供一个使用 ajax 在 ASP.NET MVC 的 Kendo UI 中级联下拉列表的示例吗？我说的是 Helper 方法 ( `@Html.Kendo().DropDownList()`) 我知道子下拉列表必须调用`CascadeFrom("ParentDropDownListName")`，但控制器操作是什么样的？当我尝试将它们连接起来时，我得到传递给子下拉列表操作方法的参数的空异常。我假设在幕后，Kendo 正在提取父选择的 DataValueField 并将其附加到子下拉列表的控制器操作请求中，但似乎并没有发生这种情况。

*更新：我相信这与发送到我的控制器操作的“过滤器”集合有关。我只是不知道如何在我的控制器操作中处理传入的过滤器集合/对象。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T15:27:09.923

我猜您已经阅读了 Kendo UI 站点上的[级联下拉列表](http://demos.kendoui.com/web/dropdownlist/cascadingdropdownlist.html)示例以及 cshtml 代码源。

第二个下拉列表对应于产品，并以下列方式从类别级联：

```
 @(Html.Kendo().DropDownList()
      .Name("products")
      .OptionLabel("Select product...")
      .DataTextField("ProductName")
      .DataValueField("ProductID")
      .DataSource(source => {
          source.Read(read =>
          {
              read.Action("GetCascadeProducts", "ComboBox")
                  .Data("filterProducts")
                  .Type(HttpVerbs.Post); // This line serves to accept POST requests
          })
          .ServerFiltering(true);
      })
      .Enable(false)
      .AutoBind(false)
      .CascadeFrom("categories") 
```

*（请注意，我必须添加行以接受 Post 请求）*

在此示例中，您将需要一个具有以下语法的控制器：

```
 [HttpPost]
    public JsonResult GetCascadeProducts(int category)
    {
        List<Product> Products = new List<Product>();

        Products.Add(new Product(1, 0, "Chai"));
        Products.Add(new Product(1, 1, "Chang"));
        Products.Add(new Product(1, 2, "Guarana Fantastica"));
        Products.Add(new Product(2, 0, "Aniseed Syrup"));
        Products.Add(new Product(2, 1, "Seasoning"));

        var ProductsInCategory = from p in Products where p.CategoryID == category select p;

        return Json(ProductsInCategory);
    } 
```

我班级的模板如下：

```
 public class Product
    {
        public int CategoryID { get; set; }
        public int ProductID { get; set; }
        public string ProductName { get; set; }

        public Product(int category, int id, string name)
        {
            CategoryID = category;
            ProductID = id;
            ProductName = name;
        }
    } 
```

如果您有正确的 Javascript 函数：

```
function filterProducts() {
    return {
        category: $("#categories").val()
    };
} 
```

（*category*应该与控制器方法中的参数名称相同）通常，一切都应该正常！

# opengl - OpenGL 将纹理映射到存储在顶点数组中的网格

> ID：12336280
> 
> 赞同：0
> 
> 时间：2012-09-09T03:27:25.463
> 
> 标签：opengl, textures, vertex-array

我有代码使用索引和顶点来绘制一组网格形状的三角形。所有顶点都是使用[glDrawElements()](http://www.opengl.org/sdk/docs/man/xhtml/glDrawElements.xml)绘制的。现在对于每个顶点，对于在网格中形成正方形的每组三角形，我将其对应的纹理坐标设置为 0 或 1。基本上我想在每个“正方形”（由两个三角形组成）中绘制一张随机纹理的[拼贴画。](http://en.wikipedia.org/wiki/Collage)我可以使用固定功能管道在 for 循环中使用`glBegin()`and`glEnd()`方法调用来做到这一点，但我想知道如何使用[Vertex Arrays](http://www.opengl.org/wiki/Vertex_Arrays)来做到这一点。下面可以看到我正在尝试做的代码视图。

```
#include "glwidget.h"

GLWidget::GLWidget(QWidget *parent, QGLWidget *glparent) :
    QGLWidget(parent, glparent),
    texture_ids_(NULL),
    col_(30),
    row_(30),
    step_(16.0)
{
    texture_ids_ = new GLuint[row_ * col_];
}

GLWidget::~GLWidget()
{
    if (texture_ids_) {
        glDeleteTextures(row_ * col_, texture_ids_);
    }
}

void GLWidget::resizeEvent(QResizeEvent * /*event*/) {
    initGL();

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glViewport(0, 0, width(), height());
    glOrtho(0, width(), 0, height(), -1, 1);
}

void GLWidget::initGL()
{
    makeCurrent();
    // Variables for vertices
    vertices_.clear();
    int32_t start_y = step_;
    int32_t start_x = step_;

    // Varaibles for indices
    indices_.clear();
    int32_t vertices_per_row = col_ + 1;
    int32_t vertex_num = 0;

    for (int32_t j = 0; j <= row_; ++j) {
        // Generate Vertices on row j
        for (int32_t i = 0; i <= col_; ++i) {
            vertices_.push_back(Vertex<GLfloat>((start_x + (i * step_)),
                (start_y + (j * step_)), 0.0f));
        }

        if (j == row_) {
            break;
        }

        // Generate Indices to get right vertices for traingle
        for (int32_t i = 0; i < col_; ++i) {
            indices_.push_back(Indices<GLuint>(vertex_num, (vertex_num + 1), 
                (vertex_num + vertices_per_row)));

            indices_.push_back(Indices<GLuint>((vertex_num + 1), 
                (vertex_num + vertices_per_row), 
                (vertex_num + vertices_per_row + 1)));

            vertex_num++;
        }
        vertex_num++;
    }
}

void GLWidget::textureInit()
{
    makeCurrent();
    for (int32_t i = 0; i < row_ * col_; ++i) {
        QImage tmpQImage(step_, step_, QImage::Format_ARGB32);
        tmpQImage = QGLWidget::convertToGLFormat(tmpQImage);

        QPainter tmpQPainter;
        tmpQPainter.begin(&tmpQImage);
            tmpQPainter.fillRect(QRect(0, 0, width(), height()),
                QColor(255, 0, 0));
            tmpQPainter.setRenderHint(QPainter::Antialiasing, true);
        tmpQPainter.end();

        glGenTextures(1, &texture_ids_[i]);
        glBindTexture(GL_TEXTURE_2D, texture_ids_[i]);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
        glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);
        glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, tmpQImage.width(),
            tmpQImage.height(), 0, GL_RGBA, GL_UNSIGNED_BYTE,
            tmpQImage.bits());
    }
}

void GLWidget::updateGL() {
    if (first_render_) {
        textureInit();
        first_render_ = false;
    }

    glMatrixMode(GL_MODELVIEW);
    glScissor(0, 0, width(), height());
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glClearColor(0.5f, 0.5f, 0.5f, 0.5f);
    glLoadIdentity();

    glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);
    glEnableClientState(GL_VERTEX_ARRAY);
    glVertexPointer(3, GL_FLOAT, 0, vertices_.data());
    glDrawElements(GL_TRIANGLES, indices_.size() * 3, GL_UNSIGNED_INT,
        indices_.data());
    glDisableClientState(GL_VERTEX_ARRAY);
    glPolygonMode(GL_FRONT_AND_BACK, GL_FILL);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T05:29:56.940

因此，您想使用大量纹理进行绘制，但显然无法重新绑定新纹理，因为它们都是从一个数组中绘制的。一种解决方案是使用[纹理图集](http://en.wikipedia.org/wiki/Texture_atlas)。它是一个包含所有纹理的位图。例如，如果您有 16 个不同的纹理，您可以制作一个具有 4x4 部分的位图。您将使用 0 到 0.25，或 0.25 到 0.50 等，而不是使用从 0 到 1 的纹理坐标。

您需要注意一些缺点：

1.  如果你想要高分辨率，纹理图集显然会很大。
2.  缩小和放大可以和你开玩笑。GL_NEAREST 不会有任何问题，但使用 GL_LINEAR 或 mipmapping 的变体将平均一个像素左右的值。这可能会导致一个子图像边界处的像素出现伪影。
3.  As the UV coordinates will vary more, fewer vertices will have common vertex data, leading to a increased number of indices.

I assume you have done profiling that shows that using multiple iterations of drawing, rebinding the texture for each, is not good enough. This obvious solution can be surprisingly effective.

# beautifulsoup - 如何在 Openshift 上安装 BeautifulSoup 4？

> ID：12336281
> 
> 赞同：1
> 
> 时间：2012-09-09T03:27:25.227
> 
> 标签：beautifulsoup, openshift

我`BeautifulSoup`在 python 平台上运行`openshift`。我试图在文件`BeautifulSoup>=4.0`的“ `install_requires`”部分设置`setup.py`，但它无法搜索`BeautifulSoup 4`，而是安装`BeautifulSoup 3.2.1`，但对于我的项目我需要安装`BeautifulSoup >= 4.0`。那么如何获取最新的`BeautifulSoup`安装包呢？

这是我的 setup.py` 文件的外观。

```
#!/usr/bin/env python

from setuptools import setup

setup(
    name='YourAppName',
    version='1.0',
    description='OpenShift App',
    author='Your Name',
    author_email='example@example.com',
    url='http://www.python.org/sigs/distutils-sig/',
    install_requires=['Django>=1.3', 'BeautifulSoup>=4.0', 'robotexclusionrulesparser',],
) 
```

这是错误的样子：

```
remote: Installed /var/lib/stickshift/1b1a7d93656c4782a58fab6c6df2d226/python-2.6/virtenv
remote: Processing dependencies for YourAppName==1.0
remote: Searching for BeautifulSoup>=4.0
remote: Reading http://pypi.python.org/simple/BeautifulSoup/
remote: Reading http://www.crummy.com/software/BeautifulSoup/
remote: Reading http://www.crummy.com/software/BeautifulSoup/download/
remote: Reading http://www.crummy.com/software/BeautifulSoup/bs3/
remote: Reading http://www.crummy.com/software/BeautifulSoup/bs3/download/
remote: No local packages or download links found for BeautifulSoup>=4.0
remote: Best match: None
remote: Traceback (most recent call last):
remote:   File "/var/lib/stickshift/1b1a7d93656c4782a58fab6c6df2d226/app-root/runtime/repo/setup.py", line 12, in <module>
remote:     install_requires=['Django>=1.3', 'BeautifulSoup>=4.0', 'robotexclusionrulesparser',],
remote:   File "/usr/lib64/python2.6/distutils/core.py", line 152, in setup
remote:     dist.run_commands()
remote:   File "/usr/lib64/python2.6/distutils/dist.py", line 975, in run_commands
remote:     self.run_command(cmd)
remote:   File "/usr/lib64/python2.6/distutils/dist.py", line 995, in run_command
remote:     cmd_obj.run()
remote:   File "build/bdist.linux-i686/egg/setuptools/command/develop.py", line 27, in run
remote:   File "build/bdist.linux-i686/egg/setuptools/command/develop.py", line 102, in install_for_development
remote:   File "build/bdist.linux-i686/egg/setuptools/command/easy_install.py", line 519, in process_distribution
remote:     
remote:   File "build/bdist.linux-i686/egg/pkg_resources.py", line 563, in resolve
remote:     distributions, errors = working_set.find_plugins(
remote:   File "build/bdist.linux-i686/egg/pkg_resources.py", line 799, in best_match
remote:     
remote:   File "build/bdist.linux-i686/egg/pkg_resources.py", line 811, in obtain
remote:     raise TypeError("Can't add %r to environment" % (other,))
remote:   File "build/bdist.linux-i686/egg/setuptools/command/easy_install.py", line 434, in easy_install
remote:     
remote:   File "build/bdist.linux-i686/egg/setuptools/package_index.py", line 475, in fetch_distribution
remote: AttributeError: 'NoneType' object has no attribute 'clone' 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T15:41:25.033

根据上游项目的文档，显然需要通过 pip 安装的不同命名约定来引用版本 4.x。

[http://www.crummy.com/software/BeautifulSoup/#Download](http://www.crummy.com/software/BeautifulSoup/#Download)

我设置了一个演示应用程序来测试并将我的 setup.py 设置为包含以下内容：

从 setuptools 导入设置

```
setup(name='YourAppName',
      version='1.0',
      description='OpenShift App',
      author='Your Name',
      author_email='example@example.com',
      url='http://www.python.org/sigs/distutils-sig/',
      install_requires=['Django>=1.3','beautifulsoup4'],
     ) 
```

然后 git commit 和 push 产生了以下代码片段。

```
remote: Searching for beautifulsoup4
remote: Reading http://pypi.python.org/simple/beautifulsoup4/remote: Reading http://www.crummy.com/software/BeautifulSoup/bs4/
remote: Reading http://www.crummy.com/software/BeautifulSoup/bs4/download/
remote: Best match: beautifulsoup4 4.1.3
remote: Downloading http://www.crummy.com/software/BeautifulSoup/bs4/download/beautifulsoup4-4.1.3.tar.gz
remote: Processing beautifulsoup4-4.1.3.tar.gz
remote: Running beautifulsoup4-4.1.3/setup.py -q bdist_egg --dist-dir /tmp/easy_install-JgA5HZ/beautifulsoup4-4.1.3/egg-dist-tmp-1vIJ2i 
```

# python - Tkinter 清晰地显示 varLabel 和值

> ID：12336284
> 
> 赞同：0
> 
> 时间：2012-09-09T03:27:41.327
> 
> 标签：python, tkinter

我是 Tkinter 的新手，并且编写了一个程序来打开文件并解析二进制消息。

我正在努力如何最好地显示结果。我的解析类将有 300 多个条目，我想要类似于表格的东西。

```
var1Label : var1Val

var2Label : var2Val 
```

我玩过这些小部件，但没有得到任何我可以引以为豪的东西：标签、文本、消息，可能还有其他。

所以我希望标签是右对齐，而 Var 是左对齐，或者其他任何关于如何使它成为一个有吸引力的显示的好主意，比如让所有的 ':' 对齐。Var 的大小在 0-15 个字符之间。

我在 Windows 上使用 python 2.7.2。

这是我尝试使用虚拟变量的网格方法

```
self.lbVar1 = Label(self.pnDetails1, text="Var Desc:", justify=RIGHT, bd=1)
self.lbVar1.grid(sticky=N+W)
self.sVar1 = StringVar( value = self.binaryParseClass.Var1 )
self.Var1  = Label(self.pnDetails1, textvariable=self.sVar1)
self.Var1.grid(row=0, column=1, sticky=N+E) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:52:26.913

ttk.Treeview[小](http://www.tkdocs.com/tutorial/tree.html)部件允许您创建具有多列的对象列表。它可能是您最容易使用的东西。

由于您特别询问了标签网格，这里有一个快速而肮脏的示例，展示了如何在可滚动网格中创建 300 个项目：

```
import Tkinter as tk
class ExampleApp(tk.Tk):
    def __init__(self):
        tk.Tk.__init__(self)

        # create a canvas to act as a scrollable container for
        # the widgets
        self.container = tk.Canvas(self)
        self.vsb = tk.Scrollbar(self, orient="vertical", command=self.container.yview)
        self.container.configure(yscrollcommand=self.vsb.set)
        self.vsb.pack(side="right", fill="y")
        self.container.pack(side="left", fill="both", expand=True)

        # the frame will contain the grid of labels and values
        self.frame = tk.Frame(self)
        self.container.create_window(0,0, anchor="nw", window=self.frame)

        self.vars = []
        for i in range(1,301):
            self.vars.append(tk.StringVar(value="This is the value for item %s" % i))
            label = tk.Label(self.frame, text="Item %s:" % i, width=12, anchor="e")
            value = tk.Label(self.frame, textvariable=self.vars[-1], anchor="w")
            label.grid(row=i, column=0, sticky="e")
            value.grid(row=i, column=1, sticky="ew")

        # have the second column expand to take any extra width
        self.frame.grid_columnconfigure(1, weight=1)

        # Let the display draw itself, the configure the scroll region
        # so that the scrollbars are the proper height
        self.update_idletasks()
        self.container.configure(scrollregion=self.container.bbox("all"))

if __name__ == "__main__":
    app = ExampleApp()
    app.mainloop() 
```

# php - PHP 提交时显示错误

> ID：12336285
> 
> 赞同：0
> 
> 时间：2012-09-09T03:27:56.077
> 
> 标签：php, html

所以我制作了一个注册表单，用户**必须**在继续之前选择三个单选选项之一。但是，如果用户没有选择选项并单击提交，我想至少显示一条消息，上面写着“请选择一个选项”或其他内容。到目前为止，这是我的代码：

```
<?php
$reg_type = "";
function setclick()
{
    if(isset($_POST["Submit"]))
        $clicked=1;
    else 
        $clicked=0;
}
if ($_SERVER["REQUEST_METHOD"] == "POST") {
    if (empty($_POST["Reg_type"])) {
        $clicked=1;
        header('Location: Registration_1.php');
    }
    else {
        $reg_type = $_POST["Reg_type"];
        header('Location: Registration_2.php');
    }
}
echo $clicked;
?>

<form name="frmtype" action="<?php echo htmlspecialchars($_SERVER["PHP_SELF"]);?>" method="POST" >
<input type="radio" name="Reg_type" value="1"/> Registering myself with credit card or bank account <br/>
<input type="radio" name="Reg_type" value="2"/> Registering multiple people using credit card or bank account <br/>
<input type="radio" name="Reg_type" value="3"/> Registering multiple people using a purchase order <br/>
<input type="submit" name="Submit" value="Submit" />
<?php 
setclick();
if($clicked)
    echo "Please select an option";
?> 
```

如果他们没有选择选项并单击提交，我真的很难让逻辑下降以显示错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T03:53:15.940

如果表单已发布，您的`setclick()`函数将始终设置为 true。`$clicked`由于您随后`setclick()`在主 php 块之后调用，因此其余逻辑是否已更改它都是正确的。尝试这个：

```
 if(isset($_POST['Reg_type']) && $_POST['Reg_type'] != ''){ 
    $reg_type = $_POST['Reg_type'];
    header('Location: Registration_2.php');
 } else $clicked = true; 
```

然后在表单下方的页面底部：

```
 if($clicked) echo "Please select an option"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T03:46:42.747

尝试这个

```
<script>
    function checkform(){

    var checked = false;
    var buttons = document.getElementsByTagName('input')
    for (var i = 0; i < buttons.length ; i++) {
       if (buttons[i].checked) {
           checked = true;
           break;
       }
   }
   return checked;

   }
</script>

<form onsubmit="return checkform()">
<input type="radio" name="Reg_type" value="1"/> Registering myself with credit card or bank account <br/>
<input type="radio" name="Reg_type" value="2"/> Registering multiple people using credit card or bank account <br/>
<input type="radio" name="Reg_type" value="3"/> Registering multiple people using a purchase order <br/>
<input type="submit" name="Submit" value="Submit" /> 
```

[检查小提琴](http://jsfiddle.net/aVDmF/)

这应该让你开始。请注意，此脚本通过标签名称选择元素，这意味着它将获取表单中的任何输入。如果您可以使用[jQuery](http://jquery.com/)，我强烈推荐它，它将使此类任务变得微不足道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T03:50:48.313

```
<?php
 $reg_type = $_POST['Reg_type'];

 if($reg_type == "1"){
       //action 1
 } else if($reg_type == "2"){
      //action 2 
 } else if($reg_type == "3") {
     //action 3 
 } else {
    // no radio button is checked. display the message

    $message = "Please select an option";
 }

?> 
```

# java - Twitter4j 接口和类结构

> ID：12336288
> 
> 赞同：0
> 
> 时间：2012-09-09T03:29:04.820
> 
> 标签：java, interface, twitter, twitter4j

twitter4j 包对我来说不是很清楚。例如，我将如何检索包含某个主题标签的 500 条推文？我将如何声明一个用户并在过去一周获得他们所有的推文？例如，我想要以下内容：

```
User brit = new User("Britney Spears");
List<Tweet> britTweets = brit.getAllTweets();   //assuming this method exists 
```

我的问题是我不能实例化一个用户，因为它被声明为抽象的！到目前为止，我看到的是一堆接口，其中包含一组我不知道如何使用的出色功能。

1.  有人可以告诉我这个库的结构，以便我弄清楚如何使用它吗？
2.  我可以实例化哪些对象以使用趋势、用户和时间线界面中的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:08:22.850

您可以从查看Twitter4J 文档中的[代码示例开始。](http://twitter4j.org/en/code-examples.html)请注意，对于某些示例，您需要在 twitter4j.properties 中配置 OAuth 凭据。

基本上，一切都从一个`Twitter`对象开始。

```
Twitter twitter = new TwitterFactory().getInstance(); 
```

通过查看javadoc，您可以看到[`TwitterImpl`](http://twitter4j.org/en/javadoc/twitter4j/TwitterImpl.html)工厂方法返回的方法实现了很多不同的接口，因此可以通过`twitter`引用获得很多很多方法。看起来[`TimelineMethods`](http://twitter4j.org/en/javadoc/twitter4j/api/TimelineMethods.html)就是您想要的，特别[`getUserTimeline`](http://twitter4j.org/en/javadoc/twitter4j/api/TimelineMethods.html#getUserTimeline%28long,%20twitter4j.Paging%29)是采用 a`userId`作为参数的方法，或者采用用户的`screenName`.

还要检查[`TrendsMethods`](http://twitter4j.org/en/javadoc/twitter4j/api/TrendsMethods.html)和[`SearchMethods`](http://twitter4j.org/en/javadoc/twitter4j/api/SearchMethods.html)接口中可用的内容（两者都由`TwitterImpl`类实现）。

# java - 无法在 google+ 上与 android 共享

> ID：12336293
> 
> 赞同：0
> 
> 时间：2012-09-09T03:29:27.130
> 
> 标签：java, android, google-plus

我正在尝试在 google+ 上分享我的内容。这是我正在关注的教程

> [Google+ 教程](https://developers.google.com/+/mobile/android/#share_on_google)

这是给我问题的部分。

```
Intent shareIntent = ShareCompat.IntentBuilder.from(MyActivity.this)
          .setType("text/plain")
          .setText("Welcome to the Google+ platform. https://developers.google.com/+")
          .getIntent()
          .setPackage("myPakageName"); 
```

这是日志

```
09-09 08:05:10.510: W/dalvikvm(716): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
09-09 08:05:10.601: E/AndroidRuntime(716): FATAL EXCEPTION: main
09-09 08:05:10.601: E/AndroidRuntime(716): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.SEND typ=text/plain flg=0x80000 pkg=(myPakageName) (has extras) }
09-09 08:05:10.601: E/AndroidRuntime(716):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1512)
09-09 08:05:10.601: E/AndroidRuntime(716):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1384)
09-09 08:05:10.601: E/AndroidRuntime(716):  at android.app.Activity.startActivityForResult(Activity.java:3190)
09-09 08:05:10.601: E/AndroidRuntime(716):  at android.app.Activity.startActivity(Activity.java:3297)
09-09 08:05:10.601: E/AndroidRuntime(716):  at com.trib.jax.mbhealth.MainMenu.shareGoogle(MainMenu.java:275)
09-09 08:05:10.601: E/AndroidRuntime(716):  at com.trib.jax.mbhealth.MainMenu.access$5(MainMenu.java:267)
09-09 08:05:10.601: E/AndroidRuntime(716):  at com.trib.jax.mbhealth.MainMenu$13.onClick(MainMenu.java:308)
09-09 08:05:10.601: E/AndroidRuntime(716):  at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:166)
09-09 08:05:10.601: E/AndroidRuntime(716):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-09 08:05:10.601: E/AndroidRuntime(716):  at android.os.Looper.loop(Looper.java:137)
09-09 08:05:10.601: E/AndroidRuntime(716):  at android.app.ActivityThread.main(ActivityThread.java:4424)
09-09 08:05:10.601: E/AndroidRuntime(716):  at java.lang.reflect.Method.invokeNative(Native Method)
09-09 08:05:10.601: E/AndroidRuntime(716):  at java.lang.reflect.Method.invoke(Method.java:511)
09-09 08:05:10.601: E/AndroidRuntime(716):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-09 08: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T04:27:37.860

在本教程中，您需要将 setPackage 作为 Google Plus 应用/服务的包名称

> .getIntent().setPackage("com.google.android.apps.plus")

这意味着它只能在带有 Google Play 服务库的设备/模拟器上运行。但是，同一页面指出

> 注意：适用于 Android 的 Google+ 平台将在未来几周内推出 — 本文档让您快速了解预期内容。

由于它似乎没有发布，我不确定你做了什么才能做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T05:23:47.930

您的包装声明肯定是错误的，应该留空以与所有共享应用程序共享，或仅针对 google plus（如@Morrison Chang 所解释）。

一般来说，最好不要将意图定位到特定的应用程序，这样用户可以根据自己的喜好决定选择哪一个。这也是安卓的强项之一。

# jquery - 如何选择一个元素并在其上调用 jquery 插件

> ID：12336295
> 
> 赞同：0
> 
> 时间：2012-09-09T03:30:10.623
> 
> 标签：jquery, flash, colors, background, jquery-animate

我的网站有一个常见问题解答部分，我想在其中显示使用此特定功能单击的问题答案的 div 的背景属性

```
// Extend jquery with flashing for elements
$.fn.flash = function(duration, iterations) {
    duration = duration || 1000; // Default to 1 second
    iterations = iterations || 1; // Default to 1 iteration
    var iterationDuration = duration / iterations;

    for (var i = 0; i < iterations; i++) {
        this.fadeOut(iterationDuration).fadeIn(iterationDuration);
    }
} 
```

有什么方法可以使用调用语句

```
$("#someElementId").flash(1000, 4); 
```

来实现这一点。我的 HTML 看起来像这样

* * *

```
<p><ul class="disc">
<li><a href="#a1">Question</a></li> 
```

* * *

```
<div class="row"><a name="a1">
<strong>Question</strong>

<p>Answer</p>

<a href="#top"><em>Back to top</em></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T03:53:56.037

是的，在你的元素上放置一些类并将它们捆绑在一起：

```
<p><ul class="disc">
<li><a href="#a1" class='question' data-num='1'>Question</a></li>
<div class="row"><a name="a1">
<strong>Question</strong>

<p class='answer-1'>Answer</p>

<a href="#top"><em>Back to top</em></a>

$(function(){
  $(".question").on('click', function(){
     var num = $(this).data('num');
     $(".answer-"+num).flash(1000, 4);
  });
}); 
```

在用户单击问题时加载文档时，我会检查存储在 data-num 属性中的问题编号。从中我可以得出我闪现的答案类。

# jquery - Jquery mobile 和 PhoneGap：重新加载页面以获取数据库中的下一项

> ID：12336299
> 
> 赞同：2
> 
> 时间：2012-09-09T03:31:08.737
> 
> 标签：jquery, cordova, jquery-mobile

我想在用户向右滑动到数据库中的下一个项目后重新加载页面（id 将增加 1）但它不起作用。它显示警报（ID + 1），但页面仍未重新加载或更改页面（同一页面）以获取新项目。

```
$('#word').live( 'swipeleft', function( e ) {
alert( 'You swiped right!' );
if(parseInt(sessionStorage.currWord_ID) >= parseInt(sessionStorage.firstWordID) && parseInt(sessionStorage.currWord_ID) < parseInt(sessionStorage.lastWordID)){
    sessionStorage.currWord_ID = parseInt(sessionStorage.currWord_ID) + 1;
    alert("ID +1");
    $.mobile.changePage($("#word"),{transition: "pop",reloadPage: true});
}

 } ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T04:32:43.530

要重新加载/刷新您的页面，您可能想试试这个：

```
$('#word').live( 'swipeleft', function( e ) {
    alert( 'You swiped right!' );
    if(parseInt(sessionStorage.currWord_ID) >= parseInt(sessionStorage.firstWordID) &&   parseInt(sessionStorage.currWord_ID) < parseInt(sessionStorage.lastWordID)){
        sessionStorage.currWord_ID = parseInt(sessionStorage.currWord_ID) + 1;
        alert("ID +1");
        $(location).attr('href',"index.html");
    }
}); 
```

确保您的 HTML 文件“index.html”中只定义了一个 jquery 移动页面（在您的情况下为“word”）:)。

# sqlite - 具有多表 SQLite 数据库的空白 ListView

> ID：12336300
> 
> 赞同：0
> 
> 时间：2012-09-09T03:31:25.937
> 
> 标签：sqlite, listview, android-layout

我正在尝试使用关系数据库中的数据填充 ListView。我想要完成的是在 NURSE_TABLE 中显示每位护士，以及分配给该护士的房间号。结果我得到的是显示两个按钮的布局和一个空的 ListView。

创建数据库的代码是：

```
public void onCreate(SQLiteDatabase db) {
// create NURSE_TABLE
db.execSQL("CREATE TABLE " + NURSE_TABLE + " (" + KEY_NURSE_ROWID
        + " INTEGER PRIMARY KEY AUTOINCREMENT, " +          KEY_LNAME
        + " TEXT NOT NULL, " + KEY_FNAME + " TEXT NOT NULL, "
        + KEY_MI + " TEXT, " + KEY_EMAIL + " TEXT NOT NULL, "
        + KEY_PHONE_PRIMARY + " TEXT NOT NULL, "
        + KEY_PHONE_SECONDARY + " TEXT, " + KEY_FTE
        + " TEXT NOT NULL, " + KEY_DUTY_STATUS + " TEXT NOT NULL);");

// create ROOM_TABLE
db.execSQL("CREATE TABLE " + ROOM_TABLE + " (" + KEY_ROOM_ROWID
        + " INTEGER PRIMARY KEY AUTOINCREMENT, " + KEY_TYPE_PATIENT
        + " TEXT, " + KEY_OCCUPIED + " TEXT NOT NULL, "
        + KEY_ROOM_NUMBER + " TEXT NOT NULL, "
        + KEY_ASSIGNED_NURSE + " INTEGER, " 
        + " FOREIGN KEY (" + KEY_ASSIGNED_NURSE + ") REFERENCES " 
        + NURSE_TABLE + " (" + KEY_NURSE_ROWID + "));");
    } // onCreate 
```

活动代码如下：

```
public void displayNurseRoster(){

    ListView listView = (ListView) findViewById(R.id.list);

    // int variables filled with NURSE_TABLE data
    int[] to_nurseTable = new int[] {

            // int list for data from NURSE_TABLE fields
            R.id.rosterDutyStatus,
            R.id.rosterListLname, 
            R.id.rosterListFname, 
            R.id.rosterListMI, 
            R.id.rosterListID,

            // int list for data from ROOM_ROWID fields
            R.id.firstAssignment,
            R.id.secondAssignment,
            R.id.thirdAssignment,
            R.id.fourthAssignment,
            R.id.fifthAssignment,
            R.id.sixthAssignment };

    // String array holding data fields from NURSE_TABLE 
    String[] from_nurseTable = new String [] {

            // fields from NURSE_TABLE
            DbCommunicator.KEY_DUTY_STATUS,
            DbCommunicator.KEY_LNAME, 
            DbCommunicator.KEY_FNAME, 
            DbCommunicator.KEY_MI,
            DbCommunicator.KEY_NURSE_ROWID,
            DbCommunicator.KEY_ROOM_NUMBER}; 

    // instantiate instance of DbCommunicator object
    rosterView = new DbCommunicator(this);

    // open instance
    rosterView.open();

    // get & manage cursor for NURSE_TABLE data
    Cursor nurseTableCursor = rosterView.getNurseRosterCursor(this);
    startManagingCursor(nurseTableCursor);

    // instantiate cursor adaptor
    ListAdapter nurseTableAdapter = new SimpleCursorAdapter(this,
    R.layout.nurse_list, nurseTableCursor, from_nurseTable, to_nurseTable);

    nurseTableCursor.moveToNext();

    // set adapter to listView
    listView.setAdapter(nurseTableAdapter);
}// displayNurseRoster() 
```

生成光标的代码如下所示：

```
public Cursor getNurseRosterCursor (Context context) {

    SQLiteQueryBuilder nurseQueryBuilder = new SQLiteQueryBuilder();
    nurseQueryBuilder.setTables("NURSE_TABLE, ROOM_TABLE"); 

    String[] returnedColumns = new String[] {
            "Nurse_Table._id", 
            "Nurse_Table._dutyStatus",
            "Nurse_Table._lName",
            "Nurse_Table._FName",
            "Nurse_Table._mi",
            "Room_Table._id",
            "Room_Table._roomNumber"};

    Cursor nurseCursor = nurseQueryBuilder.query(sqldb, returnedColumns,
            null, null, null, null, null);

    return nurseCursor;
} 
```

最后我的布局是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="#81BEF7"
android:orientation="vertical" >

<Button
    android:id="@+id/btnAddNurseToRoster"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/add" 
    android:focusable="true"/>

<Button
    android:id="@+id/btnRemoveNurseFromRoster"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/btnAddNurseToRoster"
    android:layout_toRightOf="@+id/btnAddNurseToRoster"
    android:text="@string/delete" 
    android:focusable="true"/>

<ListView
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/btnAddNurseToRoster"
    android:textColor="#FFFFFF"
    android:textStyle="bold"/>

</RelativeLayout> 
```

当我最初开始时，我只是用 Nurses Table 中的数据填充 ListView，效果很好，但是自从我开始尝试让这两个表一起工作以来，我度过了一段美好的时光。

任何帮助/方向将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T14:41:52.153

您通话中的两个表`setTables()`未正确连接。

和数组`from_nurseTable`不`to_nurseTable`匹配。

您没有提到要在列表视图中显示的内容，但我猜它可能类似于此查询的结果：

```
SELECT nurse_table._id,_dutyStatus,_lName,_FName,_mi,group_concat(_roomNumber)
  FROM nurse_table LEFT JOIN room_table ON nurse_table._id = _assignedNurse
  GROUP BY nurse_table._id
  ORDER BY _lName,_FName /* or whatever */ 
```

* * *

当您不知道如何构建 SQL 查询时，在桌面上的数据库副本中测试查询通常更有帮助。（有许多 SQLite 管理工具，或者作为最后的恢复使用 sqlite(.exe) 命令行工具。）

# javascript - Jquery onclick 图像 id 以形成输入字段

> ID：12336301
> 
> 赞同：0
> 
> 时间：2012-09-09T03:31:45.383
> 
> 标签：javascript, jquery

我有一个动态表单......它有一个类似的输入字段

```
<form class=""
<input name="image_0" .. />
<input name="image_1" .. />
<input name="image_4" .. />
<input name="image_6" .. />
<input name="image_7" .. />
....
</form> 
```

我还有一个 ul li 块，它从 Facebook 相册中获取图像......当我们点击图像时，它的“id”必须填写任何输入字段的空，并且没有重复选择......

图片：[查看此图片可能有助于理解](http://i.stack.imgur.com/ylBfG.png)

编辑：

```
<form class="fb_upload_id" method="get">
    image_2:<input name="image_2" type="text">
    image_3:<input name="image_3" type="text">
    image_4:<input name="image_4" type="text">
</form>

<ul class="facebook_album_photo_list">
    <li alt="Paradise Vision from http://Stockwallpapers.in" title="Paradise Vision from http://Stockwallpapers.in" id="463526207001195">
        <a style="background: url(https://fbcdn-photos-a.akamaihd.net/hphotos-ak-ash4/427440_463526207001195_392636722_s.jpg) center top no-repeat;" class="overlay_photo" href="javascript:void(0);" onclick="add_image_fb('463526207001195');"></a>
    </li>
    <li alt="Anonymous Mask from http://Stockwallpapers.in" title="Anonymous Mask from http://Stockwallpapers.in" id="463151140372035">
        <a style="background: url(https://fbcdn-photos-a.akamaihd.net/hphotos-ak-snc6/10476_463151140372035_468769127_s.jpg) center top no-repeat;" class="overlay_photo" href="javascript:void(0);" onclick="add_image_fb('463151140372035');"></a>
    </li>
    <li alt="Mirana Nightshade Priestess of the Moon from http://Stockwallpapers.in" title="Mirana Nightshade Priestess of the Moon from http://Stockwallpapers.in" id="463137303706752">
        <a style="background: url(https://fbcdn-photos-a.akamaihd.net/hphotos-ak-ash4/482085_463137303706752_723444526_s.jpg) center top no-repeat;" class="overlay_photo" href="javascript:void(0);" onclick="add_image_fb('463137303706752');"></a>
    </li>
    <li alt="Fluid Flow in Lauterbrunnen from http://Stockwallpapers.in" title="Fluid Flow in Lauterbrunnen from http://Stockwallpapers.in" id="459694870717662">
        <a style="background: url(https://fbcdn-photos-a.akamaihd.net/hphotos-ak-snc7/312978_459694870717662_1068867909_s.jpg) center top no-repeat;" class="overlay_photo" href="javascript:void(0);" onclick="add_image_fb('459694870717662');"></a>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T03:50:51.197

由于`onclick`事件处理程序已经绑定到`add_image_fb`，只需添加以下内容：

```
function add_image_fb(id) {
  $('.fb_upload_id input:text[value=""]').first().val(id);
} 
```

**更新：**

```
function add_image_fb(id) {
    var inputs=$(".fb_upload_id input:text[value='']");
    if(!inputs.length) alert('All input fields filled up!');
    else inputs.first().val(id);
} 
```

[演示](http://jsfiddle.net/creC9/1/)。

# python - 以下代码的 pylint 合规性

> ID：12336302
> 
> 赞同：0
> 
> 时间：2012-09-09T03:32:16.670
> 
> 标签：python, pylint

我有以下代码来自 wesley chun 的[核心 python 应用程序编程书](https://rads.stackoverflow.com/amzn/click/com/0132678209)

```
#!/usr/bin/env python
"""
tcp server
"""

from socket import AF_INET, SOCK_STREAM, socket
from time import ctime

HOST = ''
PORT = 21567
BUFSIZE = 1024
ADDR = (HOST, PORT)

tcp_server_socket = socket(AF_INET, SOCK_STREAM)
tcp_server_socket.bind(ADDR)
#maximum number of incoming connection before connection is refused
tcp_server_socket.listen(5)

while True:
    print "waiting for connection"
    tcpCliSock, addr = tcp_server_socket.accept()
    print "... connected from:" , addr

    while True:
        DATA = tcpCliSock.recv(BUFSIZE)
        if not DATA:
            break
        tcpCliSock.send('[%s] %s' % (ctime(), DATA))

    tcpCliSock.close()
tcp_server_socket.close() 
```

我对原始代码进行了一些修改，但是我仍然很困惑如何最好地修改它以使其更合规

这是我收到的所有消息

```
C: 14,0: Invalid name "tcp_server_socket" (should match (([A-Z_][A-Z0-9_]*)|(__.*__))$)
C: 21,4: Invalid name "tcpCliSock" (should match (([A-Z_][A-Z0-9_]*)|(__.*__))$)
C: 21,16: Invalid name "addr" (should match (([A-Z_][A-Z0-9_]*)|(__.*__))$)
E: 25,15: Instance of '_socketobject' has no 'recv' member
E: 28,8: Instance of '_socketobject' has no 'send' member 
```

我想前三个只是想让我使用所有大写变量名称，这是这些类型脚本的标准做法，我没有看到使用这种约定使代码变得更具可读性，相反它看起来不那么可读，什么是 pylint 中这种规则背后的动机以及如何使代码更兼容，我几乎不认为这种地位的作者会无缘无故地编写这样的代码，无论是可读性、初学者友好性还是其他任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T08:36:19.993

`_socketobject`您看到的两个错误是`socket`模块工作方式的一个怪癖。这个问题曾经[在 StackOverflow 上出现过](https://stackoverflow.com/questions/10300082/)，链接的问题提供了几个答案来帮助您摆脱这些错误。

您收到的前三条消息是约定警告。他们抱怨名称`tcp_server_socket`和常量成员的正`tcpCliSock`则`addr`表达式不匹配。因为您的代码处于“顶级”（即在任何函数或类之外），所以成员应该是常量，并且常量的名称应该与给定的正则表达式匹配。

假设您的 Python 脚本保存在一个文件中`tcp_server.py`。如果您随后`import tcp_server`从 Python 解释器或另一个 Python 脚本编写，您的 TCP 服务器将启动。这通常不是您想要发生的。如果你`import`是一个模块，它可以定义函数、类和常量，但它不应该运行任何代码。

我建议将所有代码从该行`tcp_server_socket = socket(....)`向下移动到一个单独的函数中（我们称之为它`start_server`），然后在脚本底部添加以下行：

```
if __name__ == "__main__":
    start_server() 
```

如果您直接运行脚本，这两行将启动您的服务器，但如果您`import tcp_server`从其他地方运行则不会。

Once you've done that, the warnings about variable names will go, but you will get some further convention warnings. Two of them will complain about `DATA` and `tcpCliSock` not matching the naming convention for variable names, and the other will nag you that your `start_server` function doesn't have a docstring.

# python - 使用 Python 模块 iniparse 从 INI 文件中删除部分和键？

> ID：12336303
> 
> 赞同：0
> 
> 时间：2012-09-09T03:32:23.703
> 
> 标签：python, ini, configparser

我正在使用 Python 模块[iniparse](http://code.google.com/p/iniparse/)将密钥保存到 INI 文件，但我想知道是否有一种方法可以使用`iniparse`. 我知道可以使用[ConfigParser](http://docs.python.org/library/configparser.html)并且`iniparse`向后兼容`ConfigParser`，但我不知道如何使用相同的`iniparse`对象执行删除。

```
from iniparse import INIConfig, RawConfigParser

cfg = INIConfig(open('options.ini'))
print cfg.section.option
cfg.section.option = 'new option'

# Maybe I need to use RawConfigParser somehow?
cfg.remove_option('section','option')
cfg.remove_section('section')

f = open('options.ini', 'w')
print >>f, cfg
f.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T10:03:39.823

要删除部分或选项，您只需将其删除。您修改后的代码将是：

```
from iniparse import INIConfig

cfg = INIConfig(open('options.ini'))
print cfg.section.option
cfg.section.option = 'new option'

del cfg.section.option
del cfg.section

f = open('options.ini', 'w')
print >>f, cfg
f.close() 
```

请注意，如果要删除整个部分，则无需删除其选项：只需删除该部分即可。

另请注意，这种方式比使用和方法感觉更*Pythonic 。*`remove_option``remove_section`

# c# - xml 中具有相同元素名称的下一个节点

> ID：12336304
> 
> 赞同：3
> 
> 时间：2012-09-09T03:32:36.610
> 
> 标签：c#, xml, parsing

我已经在这个问题上工作了几个小时了，我到处搜索，但没有找到解决方案:(

我想要做的是打印出节点的名称，我所拥有的是存在的节点数量，所以我知道循环多少次，但最难检索值

我试过的：

```
int num = Convert.ToInt32(queuecount);
var jobs = QueueXML.SelectSingleNode(xpathjobsfilename).InnerText;
PreviousQueue = jobs.ToString();

//foreach(loop < num)
//{
//    if (CurrentQueue == PreviousQueue)
//    {

//    }
//    else
//    {
//        resultsListView.Items.Clear();
//        resultsListView.Items.Add(jobs[num]);
//    }
//    loop++;
//}

foreach (char JobName in jobs.ToString())
{
    if (CurrentQueue == PreviousQueue)
    {
    }
    else
    {
        resultsListView.Items.Clear();
        resultsListView.Items.Add(jobs[num]);
    }
} 
```

编辑：示例 XML

```
 <jobs>
    <job>
      <timeleft>0:00:00</timeleft>
      <mb>1419.60536003</mb>
      <msgid></msgid>
      <filename>Extended_Final</filename>
      <mbleft>1274.33209419</mbleft>
      <id>nzo_i7qxxq</id>
    </job>
    <job>
      <timeleft>0:00:00</timeleft>
      <mb>9.22459220886</mb>
      <msgid></msgid>
      <filename>Video2</filename>
      <mbleft>9.22459220886</mbleft>
      <id>2m3dv5</id>
    </job>
  </jobs> 
```

我想检索每个工作的工作详细信息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T03:53:41.213

使用此代码循环通过您的作业节点。

```
XmlDocument doc = new Windows.Data.Xml.Dom.XmlDocument();
doc.Load(@"/path/to/xml/file");

foreach (XmlNode job in doc.SelectNodes("/jobs/job"))
{
    string filename = job.SelectSingleNode("filename").InnerText;
    double mbleft = double.Parse(job.SelectSingleNode("mbleft").InnerText);
} 
```

我不太确定你想用它做什么。如果您想在整个程序中使用该信息，我将创建一个作业数据类型并将 XML 文档解析为`List<Job>`. 在任何情况下，上述代码都将使您能够访问您所追求的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T03:59:15.630

使用 LINQ2XML

```
XElement doc=XElement.Load("yourXMLfile.xml");

string timeleft,mb,msgid,filename,mbleft,id;

foreach(XElement elm in doc.Descendants().Elements("job"))
{
    timeleft = elm.Element("timeleft").Value; //time left value
    mb = elm.Element("mb").Value; //mb value
    msgid = elm.Element("msgid").Value; //msgid value
    filename = elm.Element("filename").Value; //filename value
    mbleft = elm.Element("mbleft").Value; //mbleft value
    id = elm.Element("id").Value; //id value
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-09T21:24:35.150

下面是将单个作业详细信息添加到字典列表的代码。当有很多子节点时，它消除了在循环中选择单个节点。而且，更通用。

```
System.Xml.XmlDocument doc = new System.Xml.XmlDocument();
doc.LoadXml(yourXmlString);            
if (doc.HasChildNodes)
{
    System.Xml.XmlNodeList jobLst = doc.DocumentElement.ChildNodes;
    System.Collections.Generic.Dictionary<string, string> jobDescription;
    var lstjobDescription = new System.Collections.Generic.List<System.Collections.Generic.Dictionary<string, string>>();
    string name;
    for (int i = 0; i < jobLst.Count; i++)
    {
        var responseDoc = new System.Xml.XmlDocument();
        responseDoc.LoadXml(jobLst[i].OuterXml);
        jobDescription = new System.Collections.Generic.Dictionary<string, string>();
        foreach (System.Xml.XmlNode node in responseDoc.SelectNodes("//job/*")) //select all nodes of Job
        {                
            jobDescription.Add(node.Name, node.InnerText);
        }
        lstjobDescription.Add(jobDescription);                       
    }
} 
```

# oop - 抽象设计模式实现

> ID：12336309
> 
> 赞同：1
> 
> 时间：2012-09-09T03:33:24.220
> 
> 标签：oop, design-patterns, architecture

不久前我开始学习设计模式（目前只涉及外观和抽象，但我很享受）。我正在寻找将抽象模式应用于我遇到的问题。问题是：使用一个抽象类和一组方法和属性来支持各种数据库系统，然后底层的具体类（从抽象类继承）将被实现。

我创建了一个 DatabaseWrapper 抽象类，并创建了从 DatabaseWrapper 继承的 SqlClientData 和 MSAccessData 具体类。

但是，我仍然对模式如何在客户端上实现这些类感到有些困惑。

我会做以下事情吗？：

```
DatabaseWrapper sqlClient = new SqlClientData(connectionString); 
```

这是我在示例中看到的，但这不是我想要的，因为我想封装具体的类；我只希望客户端使用抽象类。这样我就可以在未来支持更多的数据库系统，只需对客户端进行最小的更改，并为实现创建一个新的具体类。

我还在学习，所以这里可能有很多问题。请告诉我如何封装所有具体类，以及我的方法是否有任何问题。

非常感谢！

PS：我很高兴进入软件架构，但仍然是初学者，所以请放轻松。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T03:43:24.697

好吧，我认为您需要的是抽象工厂模式。

代替：

```
DatabaseWrapper sqlClient = new SqlClientData(connectionString); 
```

利用：

```
DatabaseWrapper sqlClient = DatabaseWrapper.create(connectionString); 
```

然后将创建逻辑封装在静态“create”方法中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T03:45:08.873

它可能看起来像这样：

```
DatabaseWrapper dbClient = DBFactory.getInstance(DbType.SQL, connectionString); 
```

几乎所有的设计模式都只是引入了另一层间接和/或抽象。在这种情况下`DBFactory`，是一个抽象层，它根据`DbType`枚举选择适当的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T08:12:11.430

你所拥有的已经足够了。您仅`SqlDataClient`在构造时耦合，此后您只需传递`DatabaseWrapper`给所有其他类/方法，其余代码甚至都不知道这是一个`SqlDataClient`.

要切换到不同的实现，只需要更改一行构造代码：

```
DatabaseWrapper client = new SqlClientData(connectionString); 
```

至

```
DatabaseWrapper client = new MSAccessData(connectionString); 
```

其余代码将保持不变。

# c - 如何手动（按位）执行（float）x？

> ID：12336314
> 
> 赞同：8
> 
> 时间：2012-09-09T03:34:43.457
> 
> 标签：c, casting, floating-point, bit-manipulation

现在，这是我应该实现的函数的函数头：

```
/*
 * float_from_int - Return bit-level equivalent of expression (float) x
 *   Result is returned as unsigned int, but
 *   it is to be interpreted as the bit-level representation of a
 *   single-precision floating point values.
 *   Legal ops: Any integer/unsigned operations incl. ||, &&. also if, while
 *   Max ops: 30
 *   Rating: 4
 */
unsigned float_from_int(int x) {
...
} 
```

我们不允许进行浮动操作或任何类型的强制转换。

现在我尝试实现该站点给出的第一个算法：http: [//locklessinc.com/articles/i2f/](http://locklessinc.com/articles/i2f/)

这是我的代码：

```
unsigned float_from_int(int x) {

// grab sign bit

  int xIsNegative = 0;
  int absValOfX = x;

  if(x < 0){
    xIsNegative = 1;
    absValOfX = -x;
  }

  // zero case
  if(x == 0){
    return 0;
  }
  if(x == 0x80000000){ //Updated to add this
    return 0xcf000000;
  }
  //int shiftsNeeded = 0;

  /*while(){

    shiftsNeeded++;
    }*/

  unsigned I2F_MAX_BITS = 15;
  unsigned I2F_MAX_INPUT = ((1 << I2F_MAX_BITS) - 1);
  unsigned I2F_SHIFT = (24 - I2F_MAX_BITS);

  unsigned result, i, exponent, fraction;

  if ((absValOfX & I2F_MAX_INPUT) == 0)
    result = 0;
  else {
    exponent = 126 + I2F_MAX_BITS;
    fraction = (absValOfX & I2F_MAX_INPUT) << I2F_SHIFT;

    i = 0;
    while(i < I2F_MAX_BITS) {
      if (fraction & 0x800000)
        break;
      else {
        fraction = fraction << 1;
        exponent = exponent - 1;
      }
      i++;
    }
    result = (xIsNegative << 31) | exponent << 23 | (fraction & 0x7fffff);
  }
  return result;
} 
```

但它没有用（见下面的测试错误）：

```
ERROR: Test float_from_int(8388608[0x800000]) failed...
...Gives 0[0x0]. Should be 1258291200[0x4b000000] 
```

我不知道从这里去哪里。我应该如何从这个 int 解析浮点数？

编辑＃1：您可能可以从我的代码中看到我也开始研究此算法（[请参阅此站点](http://people.ece.cornell.edu/land/courses/ece5760/FloatingPoint/index.html)）：

> 我假设是 10 位 2 的补码整数，因为尾数只有 9 位，但这个过程可以推广到更多位。
> 
> ```
> Save the sign bit of the input and take the absolute value of the input.
> Shift the input left until the high order bit is set and count the number of shifts required. This forms the floating mantissa.
> Form the floating exponent by subtracting the number of shifts from step 2 from the constant 137 or (0h89-(#of shifts)).
> Assemble the float from the sign, mantissa, and exponent. 
> ```

但是，这似乎不对。如何转换 0x80000000？没有意义。

编辑#2：我认为这是因为我说最大位数是 15 ......嗯......

编辑#3：搞砸旧算法，我重新开始：

```
unsigned float_from_int(int x) {

  // grab sign bit

  int xIsNegative = 0;
  int absValOfX = x;

  if(x < 0){
    xIsNegative = 1;
    absValOfX = -x;
  }

  // zero case
  if(x == 0){
    return 0;
  }
  if (x == 0x80000000){
    return 0xcf000000;
  }

  int shiftsNeeded = 0;

  int counter = 0;
  while(((absValOfX >> counter) & 1) != 1 && shiftsNeeded < 32){

    counter++;
    shiftsNeeded++;
  }

  unsigned exponent = shiftsNeeded + 127;

  unsigned result = (xIsNegative << 31) | (exponent << 23);

  return result; 
```

这是我在这个错误上遇到的错误（我想我已经克服了最后一个错误）：

```
ERROR: Test float_from_int(-2139095040[0x80800000]) failed...
...Gives -889192448[0xcb000000]. Should be -822149120[0xceff0000] 
```

知道这一点可能会有所帮助：absValOfX = 7f800000（使用 printf）

编辑#4：啊，我发现指数错误，需要从左边数，然后从 32 中减去我相信。

编辑＃5：我重新开始，现在试图处理奇怪的舍入问题......

```
 if (x == 0){
    return 0; // 0 is a special case because it has no 1 bits
  }
  if (x >= 0x80000000 && x <= 0x80000040){
    return 0xcf000000;
  }
  // Save the sign bit of the input and take the absolute value of the input.
  unsigned signBit = 0;
  unsigned absX = (unsigned)x;
  if (x < 0)
    {
      signBit = 0x80000000u;
      absX = (unsigned)-x;
    }

  // Shift the input left until the high order bit is set to form the mantissa.
  // Form the floating exponent by subtracting the number of shifts from 158.
  unsigned exponent = 158;
  while ((absX & 0x80000000) == 0)
    {
      exponent--;
      absX <<= 1;
    }

  unsigned negativeRoundUp = (absX >> 7) & 1 & (absX >> 8);

  // compute mantissa
  unsigned mantissa = (absX >> 8) + ((negativeRoundUp) || (!signBit & (absX >> 7) & (exponent < 156)));
  printf("absX = %x, absX >> 8 = %x, exponent = %i,  mantissa = %x\n", absX, (absX >> 8), exponent, mantissa);
  // Assemble the float from the sign, mantissa, and exponent.
  return signBit | ((exponent << 23) + (signBit & negativeRoundUp)) | ( (mantissa) & 0x7fffff); 
```

-

```
absX = fe000084, absX >> 8 = fe0000, exponent = 156,  mantissa = fe0000
ERROR: Test float_from_int(1065353249[0x3f800021]) failed...
...Gives 1316880384[0x4e7e0000]. Should be 1316880385[0x4e7e0001] 
```

编辑#6

又做了一次，仍然，四舍五入不能正常工作。我试图凑齐一些四舍五入，但它只是行不通......

```
unsigned float_from_int(int x) {

  /*
  If N is negative, negate it in two's complement. Set the high bit (2^31) of the result.
    If N < 2^23, left shift it (multiply by 2) until it is greater or equal to.
    If N ≥ 2^24, right shift it (unsigned divide by 2) until it is less.
    Bitwise AND with ~2^23 (one's complement).
    If it was less, subtract the number of left shifts from 150 (127+23).
  If it was more, add the number of right shifts to 150.
    This new number is the exponent. Left shift it by 23 and add it to the number from step 3.
  */

  printf("---------------\n");
  //printf("x = %i (%x), -x = %i, (%x)\n", x, x, -x, -x);
  if(x == 0){
    return 0;
  }

  if(x == 0x80000000){
    return 0xcf000000;
  }

  // If N is negative, negate it in two's complement. Set the high bit of the result
  unsigned signBit = 0;

  if (x < 0){
    signBit = 0x80000000;
    x = -x;
  }

  printf("abs val of x = %i (%x)\n", x, x);

  int roundTowardsZero = 0;
  int lastDigitLeaving = 0;
  int shiftAmount = 0;
  int originalAbsX = x;

  // If N < 2^23, left shift it (multiply it by 2) until it is great or equal to.
  if(x < (8388608)){
    while(x < (8388608)){
      //printf(" minus shift and x = %i", x );
      x = x << 1;
      shiftAmount--;
    }
  } // If N >= 2^24, right shfit it (unsigned divide by 2) until it is less.
 else if(x >= (16777215)){
    while(x >= (16777215)){

      /*if(x & 1){
        roundTowardsZero = 1;
        printf("zzz Got here ---");
        }*/

      lastDigitLeaving = (x >> 1) & 1;
      //printf(" plus shift and x = %i", x);
      x = x >> 1;
      shiftAmount++;

    }
    //Round towards zero
    x = (x + (lastDigitLeaving && (!(originalAbsX > 16777216) || signBit)));

    printf("x = %i\n", x);
    //shiftAmount = shiftAmount + roundTowardsZero;
  }

  printf("roundTowardsZero = %i, shiftAmount = %i (%x)\n", roundTowardsZero, shiftAmount, shiftAmount);

  // Bitwise AND with 0x7fffff
 x = x & 0x7fffff;

  unsigned exponent = 150 + shiftAmount;

  unsigned rightPlaceExponent = exponent << 23;

  printf("exponent = %i, rightPlaceExponent = %x\n", exponent, rightPlaceExponent);

  unsigned result = signBit | rightPlaceExponent | x;

  return result; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T03:55:39.260

问题是int最低的是-2147483648，但是最高的是2147483647，所以没有-2147483648的绝对值。虽然您可以解决它，但我只会为该一位模式制作一个特殊情况（就像您为 0 所做的那样）：

```
if (x == 0)
    return 0;
if (x == -2147483648)
    return 0xcf000000; 
```

另一个问题是您复制了一个仅适用于从 0 到 32767 的数字的算法。在文章的后面，他们解释了如何将其扩展到所有整数，但它使用了您可能不允许使用的操作。

我建议根据您编辑中提到的算法从头开始编写它。这是 C# 中向 0 舍入的版本：

```
uint float_from_int(int x)
{
    if (x == 0)
        return 0; // 0 is a special case because it has no 1 bits

    // Save the sign bit of the input and take the absolute value of the input.
    uint signBit = 0;
    uint absX = (uint)x;
    if (x < 0)
    {
        signBit = 0x80000000u;
        absX = (uint)-x;
    }

    // Shift the input left until the high order bit is set to form the mantissa.
    // Form the floating exponent by subtracting the number of shifts from 158.
    uint exponent = 158;
    while ((absX & 0x80000000) == 0)
    {
        exponent--;
        absX <<= 1;
    }

    // compute mantissa
    uint mantissa = absX >> 8;

    // Assemble the float from the sign, mantissa, and exponent.
    return signBit | (exponent << 23) | (mantissa & 0x7fffff);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T05:45:07.700

该算法的基本公式是确定符号位、指数位和尾数位，然后将结果打包成一个整数。以这种方式分解它可以很容易地在代码中清楚地分离任务，并使解决问题（和测试你的算法）变得更加容易。

符号位是最简单的，去掉它可以更容易地找到指数。您可以区分四种情况：0, 0x80000000, [-0x7ffffff, -1] 和 [1, 0x7fffffff]。前两种是特殊情况，您可以在后两种情况下轻松获得符号位（以及输入的绝对值）。如果您要转换为无符号，您可以不使用我在评论中提到的非特殊情况 0x80000000 。

接下来，找到指数 - 有一种简单（且昂贵）的循环方式，以及一种更复杂但更快的方法来做到这一点。我最喜欢的页面是 Sean Anderson 的[bit hacks 页面](http://graphics.stanford.edu/~seander/bithacks.html)。其中一种算法显示了一种非常快速的无循环方法，只需七次操作即可找到整数的 log [2]。

一旦你知道了指数，那么找到尾数就很容易了。您只需删除前导一位，然后根据指数的值将结果左移或右移。

如果您使用 fast log [2]算法，您最终可能会得到一个使用不超过 20 次操作的算法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T05:07:15.780

处理`0x80000000`很容易：

```
int xIsNegative = 0;  
unsigned int absValOfX = x;  

if (x < 0)
{  
    xIsNegative = 1;  
    absValOfX = -(unsigned int)x;  
} 
```

它摆脱了特殊的大小写`-2147483648`，因为该值可以表示为无符号值，并且`absValOfX`应该始终为正数。

# php - PHP 5.4 500 内部服务器错误，显示错误关闭

> ID：12336315
> 
> 赞同：5
> 
> 时间：2012-09-09T03:34:53.353
> 
> 标签：php

我需要不显示但记录 PHP 错误。我正在使用 PHP 5.4 我当前在 php.ini 中记录错误的代码是：

```
log_errors = 1
error_log = "/path-to-file/error_log.txt" 
```

哪个有效，但是我收到 500 内部服务器错误，试图使用`display_errors`. 我尝试使用以下内容，均返回 500 错误。

```
display_errors = 0
display_errors = "0"
display_errors = false
display_errors = "false"
display_errors = Off
display_errors = "Off" 
```

根据 PHP 文档，从 PHP 5.4 开始，它是一个字符串。我应该设置什么`display_errors`来关闭错误显示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T04:25:37.777

500 错误代码表示存在无效的服务器配置。这很可能来自 Apache 而不是来自 php。

要清楚地了解导致错误的原因，请查看您的 apache 日志。

如果您还想隐藏 500 错误，可以打开 httpd.conf 文件并添加

```
ErrorDocument 500 " " 
```

然后确保重新启动apache。每当您对 php.ini 或 httpd.conf 进行配置更改时，您都需要重新启动 apache 以使其生效。

# objective-c - 如何在运行时找出 NSUserNotification 的样式？还是强制关闭警报？

> ID：12336320
> 
> 赞同：3
> 
> 时间：2012-09-09T03:35:51.617
> 
> 标签：objective-c, cocoa, osx-mountain-lion, notificationcenter, nsusernotification

根据[OS X Mountain Lion 发行说明](https://developer.apple.com/library/mac/#releasenotes/Cocoa/Foundation.html)：

> “用户对显示的通知和样式（横幅、警报等）具有最终控制权。没有任何机制可以覆盖用户偏好。”

即使我想做的只是从警报样式“降级”为横幅样式……很好。**但是我至少可以在 didActivateNotification 方法中找出通知是警报还是横幅样式？**

当警报是横幅（这是我想要的）时，单击其内容是唯一可能的操作，这都会触发具有 notification.activationType 值的 didActivateNotification 方法`NSUserNotificationActivationTypeContentsClicked`并关闭通知横幅。我希望我的应用通过打开 Internet URL 来响应此操作。

当用户选择alert风格的通知时，点击alert的内容也会生成didActivateNotification，其值相同`notification.activationType`，但它停留在屏幕上而不是消失（它只在按下Action按钮时消失，并且notification.activationType有不同的那么值）。*我不希望我的应用程序为同一个警报通知重复触发操作，以防用户单击警报通知的内容区域。*

**另一种解决方案是在用户单击其内容时强制警报通知气泡消失。**这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-19T11:59:44.337

您可以使用以下方法删除通知：

```
[[NSUserNotificationCenter defaultUserNotificationCenter] removeDeliveredNotification:notification]; 
```

# javascript - 将 Components.classesByID 替换为 document.implementation.createDocument

> ID：12336321
> 
> 赞同：1
> 
> 时间：2012-09-09T03:36:15.017
> 
> 标签：javascript, firefox, firefox-addon

我不是这段代码的作者，但它不再被维护。所以我正在尝试修复它，但我在 javascript 方面的经验很少。从 Firefox 9 开始，Components.classesByID["{3a9cd622-264d-11d4-ba06-0060b0fc76dd}"]。已经过时了。相反，建议使用 document.implementation.createDocument。有人可以告诉我如何实施这些更改吗？我似乎是，只是用我尝试过的一切来敲打我的头。

Mozilla 开发者网络给出的示例是：

```
 var doc = document.implementation.createDocument ("http://www.w3.org/1999/xhtml", "html", null);
var body = document.createElementNS("http://www.w3.org/1999/xhtml", "body");
body.setAttribute("id", "abc");
doc.documentElement.appendChild(body);
alert(doc.getElementById("abc")); // [object HTMLBodyElement] 
```

我要修复的 .jsm 中的代码是：

```
createFgImageData: function helpers_createFgImageData() {

    // I don't know how to load images synchronously *FIX*
    // Until then, this awesome bitmap format below will do. 

    this.fgImageData = {};
    this.fgImageData["check"] = [
        "      *",
        "     **",
        "*   ***",
        "** *** ",
        "*****  ",
        " ***   ",
        "  *    "];
    this.fgImageData["radio"] = [
        " **** ",
        "******",
        "******",
        "******",
        "******",
        " **** "];
    this.fgImageData["menu-ltr"] = [
        "*   ",
        "**  ",
        "*** ",
        "****",
        "*** ",
        "**  ",
        "*   "];
    this.fgImageData["menu-rtl"] = [
        "   *",
        "  **",
        " ***",
        "****",
        " ***",
        "  **",
        "   *"];            

    // I think I'm doing something slightly wrong when creating the document
    // but I'm not sure. It works though. *FIX*

    var domi = Components.classesByID["{3a9cd622-264d-11d4-ba06-0060b0fc76dd}"].
                    createInstance(Components.interfaces.nsIDOMDOMImplementation);
    this.document = domi.createDocument("http://www.w3.org/1999/xhtml", "html", null);
    this.canvas = this.document.createElementNS("http://www.w3.org/1999/xhtml", "html:canvas");

    for(var name in this.fgImageData) {
        if (this.fgImageData.hasOwnProperty(name)) {
            var data = this.fgImageData[name];
            var width = data[0].length;
            var height = data.length;

            this.canvas.width = width;
            this.canvas.height = height;
            var g = this.canvas.getContext("2d");
            g.clearRect(0, 0, width, height);
            var idata = g.getImageData(0, 0, width, height);
            for(var y=0, oy=0; y<height; y++, oy+=idata.width*4)
                for(var x=0, ox=oy; x<width; x++, ox+=4)
                    idata.data[ox+3] = data[y][x] == " " ? 0 : 255;

            this.fgImageData[name] = idata;
        }
    }
}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T13:06:30.693

JSM 中没有可使用的预先存在的文档。你有几个选择：

1.  传入调用者的相关父文档。
2.  使用 DOMParser 对空字符串或 XHR 创建一个空白文档到一个空数据：URI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T19:15:21.143

如果您无法访问实际的窗口（例如在 JavaScript 模块中），最好使用[DOMParser](https://developer.mozilla.org/en-US/docs/DOM/DOMParser)创建 HTML 文档（感谢 Boris 的提示）。它[可以](https://developer.mozilla.org/en-US/docs/nsIDOMParser)在任何上下文中实例化：

```
var parser = Components.classes["@mozilla.org/xmlextras/domparser;1"]
                       .createInstance(Components.interfaces.nsIDOMParser);
var dummyDocument = "<html xmlns='http://www.w3.org/1999/xhtml'/>";
this.document = parser.parseFromString(dummyDocument, "text/xml");
this.canvas = this.document.createElementNS("http://www.w3.org/1999/xhtml", "canvas"); 
```

请注意，第二个参数`createElementNS()`应该是`"canvas"`，而不是`"html:canvas"`- 命名空间在第一个参数中指定。另请注意，从 Firefox 12 开始，DOMParser 还可以解析 HTML 代码（MIME 类型`"text/html"`），因此您也可以编写：

```
this.document = parser.parseFromString("", "text/html"); 
```

一个最小的 HTML 文档确实是空字符串。

# homebrew - 自制路径问题

> ID：12336322
> 
> 赞同：0
> 
> 时间：2012-09-09T03:36:18.963
> 
> 标签：homebrew

如何解决此路径问题？我不能使用 brew 命令，我想我以前符号链接到错误的位置。

```
Master:~ shaunstanislaus$ ruby <(curl -fsSkL raw.github.com/mxcl/homebrew/go)
==> This script will install:
/usr/local/bin/brew
/usr/local/Library/...
/usr/local/share/man/man1/brew.1

Press enter to continue
==> Downloading and Installing Homebrew...
remote: Counting objects: 82368, done.
remote: Compressing objects: 100% (39323/39323), done.
remote: Total 82368 (delta 56782), reused 65301 (delta 42220)
Receiving objects: 100% (82368/82368), 11.68 MiB | 1.59 MiB/s, done.
Resolving deltas: 100% (56782/56782), done.
From https://github.com/mxcl/homebrew
 * [new branch]      master     -> origin/master
HEAD is now at 2ea1a0e smpeg: depends on gtk
==> Installation successful!
You should run `brew doctor' *before* you install anything.
Now type: brew help
Master:~ shaunstanislaus$ brew doctor
-bash: /usr/local/bin/brew: /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby: bad interpreter: No such file or directory
Master:~ shaunstanislaus$ echo $PATH
/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin:/Users/shaunstanislaus/Library/Application Support/GoodSync:/opt/local/bin:/opt/local/sbin:/usr/local/sbin:/Users/shaunstanislaus/.ec2/bin:/Users/shaunstanislaus/.rvm/bin 
```

* * *

```
/usr/local/bin/brew: /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby: bad interpreter: No such file or directory 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T05:51:32.147

不是每个人都保留 ruby​​ 的默认系统版本。许多人会重命名这个文件并使用 MacPorts ruby​​，或者手动编译它，在这种情况下它可能位于不同的位置。我建议更改此设置，以便如果 ruby​​ 可执行文件不在默认位置，它将在不同的位置查找。

访问[http://linguisticlogic.wordpress.com/2010/11/27/homebrew-mac-osx-and-ruby/](http://linguisticlogic.wordpress.com/2010/11/27/homebrew-mac-osx-and-ruby/)

只是在做

```
sudo ln -s /opt/local/bin/ruby /usr/bin/ruby 
```

可以工作！

# php - 在非对象 simpleHTMLDOM 上调用成员函数 find()

> ID：12336325
> 
> 赞同：2
> 
> 时间：2012-09-09T03:36:47.000
> 
> 标签：php, simple-html-dom

我正在尝试从一个页面读取链接，打印 URL，转到该页面，然后在同一位置读取下一页上的链接，打印 url，转到该页面（等等......）。

我所做的只是读取 URL 并将其作为参数传递给`get_links()`函数，直到没有更多链接为止。

这是我的代码，但它抛出：

```
Fatal error: Call to a member function find() on a non-object. 
```

有人知道怎么修这个东西吗？

```
 <?php
$mainPage = 'https://www.bu.edu/link/bin/uiscgi_studentlink.pl/1346752597?ModuleName=univschr.pl&SearchOptionDesc=Class+Subject&SearchOptionCd=C&KeySem=20133&ViewSem=Fall+2012&Subject=&MtgDay=&MtgTime=';

get_links($mainPage);

function get_links($url) {
    $data = new simple_html_dom();
    $data = file_get_html($url);

    $nodes = $data->find("input[type=hidden]");
    $fURL = $data->find("/html/body/form");
    $firstPart = $fURL[0]->action . '<br>';

    foreach ($nodes as $node) {
        $val = $node->value;
        $name = $node->name;
        $name . '<br />';
        $val . "<br />";

        $str1 = $str1 . "&" . $name . "=" . $val;
    }
    $fixStr1 = str_replace('&College', '?College', $str1);
    $fixStr2 = str_replace('Fall 2012', 'Fall+2012', $fixStr1);
    $fixStr3 = str_replace('Class Subject', 'Class+Subject', $fixStr2);

    $fixStr4 = $firstPart . $fixStr3;
    echo $nextPageURL = chop($fixStr4);
    get_links($nextPageURL);
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:39:07.187

好吧，所以我`load->file()`在我的代码中的某个地方使用了该函数，直到我真正通过它才看到它。终于有了一个运行脚本 :) 关键是使用函数来`file_get_html`代替加载网页作为对象`load->file()`。

# javascript - 计算每年 2% 的折扣系数

> ID：12336328
> 
> 赞同：0
> 
> 时间：2012-09-09T03:37:51.483
> 
> 标签：javascript

我需要编写一段代码来请求合同年数的值。然后用for循环计算每年2%的折扣系数，即如果是一年合同，价格是全价的98%，如果是两年合同，价格是96%的全价，等等。

我似乎有点卡住了，不确定我是否完全理解了他们的要求。

这是我已经做的：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transition//EN" "http://www.w3.org/TR/xhtml/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<body>
    <script type = "text/javascript">

    var stringVariable = prompt ("Enter the number of people")
    var numberVariable
    var loopCounter = prompt ("How many years?");
    var numberCount = new Array(100/2);

    if (stringVariable <= 30) {
        numberVariable = 15*stringVariable;
    }
    else if (stringVariable> 30 && stringVariable<60) {
        numberVariable = 12*stringVariable;
    }
    else if (stringVariable>60) {
        numberVariable =12*stringVariable;
    }

    alert ("Total cost is: $" + numberVariable);

    for (loopCounter = 0; loopCounter <= 4; loopCounter++)
    {
        document.write("Total discount $" + loopCounter - numberCount[loopCounter] + "<br />");
    }

    alert ("Total cost is: $" + numberVariable - numberCount);

    </script>

</body>
</html> 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T03:55:10.717

您的代码似乎在某些地方存在根本缺陷，尤其是您的变量名。

这是我解决问题的方法：

```
// parseInt() converts strings into numbers. 10 is the radix.
var num_people = parseInt(prompt('Enter the number of people'), 10);
var num_years = parseInt(prompt('How many years?'), 10);

// Initialize your variables.
var cost = 0;
var discount = 1.00;

// Your if condition was a bit odd. The second part of it would be
// executed no matter what, so instead of using else if, use an
// else block
if (num_people <= 30) {
  cost = 15 * num_people;
} else {
  cost = 12 * num_people;
}

alert('Total cost is: $' + cost);

// Here is a for loop. i, j, k, ... are usually
// used as the counter variables
for (var i = 0; i < num_years; i++) {
  // Multiplying by 0.98 takes 2% off of the total each time.
  discount *= 1.00 - 0.02;

  // You fill the rest of this stuff in
  document.write('Total discount $' + ... + '<br />');
}

// And this stuff
alert('Total cost is: $' + ...); 
```

# javascript - 获取所有页面 ID 并一次循环一个以更改 CSS？

> ID：12336329
> 
> 赞同：3
> 
> 时间：2012-09-09T03:38:03.800
> 
> 标签：javascript, jquery

我正在使用`localStorage`将 CSS 信息保存在某些`<div>`'s 上。当用户修改其中一个时`<div>`，它会设置一个`localStorage`具有以下语法的项目：

```
ID OF ELEMENT + "-" + x,y, or z (for the different CSS attributes) 
```

因此，div 的 x 坐标项的示例`#two`是：

```
two-x 
```

这些设置工作正常，我可以通过在页面加载时执行以下操作来反映这一点：

```
$(".drag").css({
"left" : localStorage.getItem("two-x"), 
"top" : localStorage.getItem("two-y"),
"z-index" : localStorage.getItem("two-z"),
}); 
```

该页面上会有很多 div，我无法对它们中的每一个进行硬编码。所以，这让我想到了我的问题......**我怎样才能获得页面上的所有 ID，将它们分配给一个变量，然后更改每个 ID 的 CSS，直到它们都被考虑在内？**

我对此的尝试：

```
var idtwo = [];
$("body").find("div").each(function(){ idtwo.push(this.id); });
$(".drag").css({
            "left" : localStorage.getItem(idtwo + "-x"), 
            "top" : localStorage.getItem(idtwo + "-y"),
            "z-index" : localStorage.getItem(idtwo + "-z"),
}); 
```

唯一的问题是输出`idtwo`是`one,two`（当页面上有两个 div 的 ID 为 1 和 2 时），它需要只是`one`，运行 CSS 更改，然后`two`，运行 CSS 更改。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T03:49:16.737

希望这可以帮助。

```
$('div[id]').each(function() {
    var id = $(this).attr('id');
    $(this).css({
        'left': localStorage.getItem(id + '-x'), 
        'top': localStorage.getItem(id + '-y'),
        'z-index': localStorage.getItem(id + '-z')
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T03:47:44.337

试试这个（未经测试）：

```
$('div', document.body).each(function () {
    var id = $(this).prop('id');

    if (id) {
        $(this).css({
            'left': localStorage.getItem(id + '-x'), 
            'top': localStorage.getItem(id + '-y'),
            'z-index': localStorage.getItem(id + '-z')
        });
    }
}); 
```

# java - ADT/Eclipse 升级后库出现问题

> ID：12336334
> 
> 赞同：1
> 
> 时间：2012-09-09T03:39:15.073
> 
> 标签：java, android, eclipse, jsoup

我最近将我的 eclipse 安装升级到 Juno 并安装了最新的 android ADT，现在当我尝试编译我的一个旧应用程序时，我遇到了问题。

自从它以前可以工作以来，我没有更改任何代码，编译应用程序时没有错误，并且我能够毫无错误地导出新的 APK。

但是，当我尝试运行它时，我收到大量关于死代码的警告和错误，无法找到类，无法解析我的 Jsoup 库中的方法，如下所示：

```
09-08 20:23:26.006: I/dalvikvm(24213): Could not find method org.jsoup.Jsoup.parse, referenced from method com.myapp
09-08 20:23:26.006: W/dalvikvm(24213): VFY: unable to resolve static method 557: Lorg/jsoup/Jsoup;.parse (Ljava/lang/String;)Lorg/jsoup/nodes/Document;
09-08 20:23:26.006: D/dalvikvm(24213): VFY: replacing opcode 0x71 at 0x0047
09-08 20:23:26.006: D/dalvikvm(24213): VFY: dead code 0x004a-0059 in Lcom/karwosts/PortfolioMap/GoogleFinance;.SendHttpRequest (Ljava/lang/String;Ljava/lang/String;)Lorg/jsoup/nodes/Document;
09-08 20:23:26.006: W/dalvikvm(24213): VFY: unable to find class referenced in signature (Lorg/jsoup/nodes/Document;)
09-08 20:23:26.006: W/dalvikvm(24213): VFY: unable to find class referenced in signature (Lorg/jsoup/nodes/Document;) 
```

一旦我的应用程序调用了一个 Jsoup 方法，它就会随着

```
09-08 20:23:28.566: E/AndroidRuntime(24213): FATAL EXCEPTION: IntentService[com.myapp]
09-08 20:23:28.566: E/AndroidRuntime(24213): java.lang.NoClassDefFoundError: org.jsoup.Jsoup 
```

另一个问题是我导出的新 APK 是 77kb，而我的旧 APK 曾经是 199kb，所以似乎缺少了一大块东西。

我清理了项目，尝试从工作区删除项目并从现有代码创建新项目，但没有帮助。我尝试将 Java 编译器版本更改为 1.5 或 1.6 或 1.7，但没有帮助。

这是我的构建路径库设置：

![在此处输入图像描述](../Images/f48112f175df4a22afbaa960a06f1565.png)

订购和出口：

![在此处输入图像描述](../Images/2f8598f9f3aaa2bf3a906aa910e652ca.png)

任何可能已经破坏的想法将不胜感激。我正在使用 Android SDK 20.0.3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T05:23:02.773

该`JSoup`库必须包含在项目中（因此文件大小减小）。通过转到构建路径设置`Order and Export`选项卡，您可以勾选库旁边的复选框，`JSoup`以确保在导出时它包含在项目中。确保在执行此操作后进行清理和重建。

# php - 基于设备保护 PHP API

> ID：12336340
> 
> 赞同：1
> 
> 时间：2012-09-09T03:41:19.130
> 
> 标签：php, android, algorithm, security, api

我正在为 Android 应用程序创建一个 PHP API，并希望使 API 只处理来自 Android 设备的请求。我可以使用某种逻辑来实现这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T03:48:58.470

您无法可靠地确定他们是否正在使用 Android 访问您的 php 服务器。查看他们是否使用 Android 的唯一方法是检查用户代理，但不应将其用作安全性，如您所愿。

您可以在您的 Android 应用程序中拥有访问服务器所需的动态或静态密钥，但这也不能保证用户不会找到该密钥或您使用的任何进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T04:33:17.560

您可以使用[Mobile_Detect](http://code.google.com/p/php-mobile-detect/)，这是一个用于检测移动设备的轻量级 PHP 类。它使用 User-Agent 字符串结合特定的 HTTP 标头来检测移动环境。通过使用这个 PHP 库，您可以检测以下设备：

***手机*** * isiPhone() * isBlackBerry() * isHTC() * isNexus() * isDellStreak() * isMotorola() * isSamsung() * isSony() * isAsus() * isPalm() * isGenericPhone()

***平板电脑*** * isBlackBerryTablet() * isiPad() * isKindle() * isSamsungTablet() * isHTCtablet() * isMotorolaTablet() * isAsusTablet() * isNookTablet() * isAcerTablet() * isYarvikTablet() * isGenericTablet()

***操作系统*** * isAndroidOS() * isBlackBerryOS() * isPalmOS() * isSymbianOS() * isWindowsMo​​bileOS() * isiOS() * isFlashLiteOS() * isJavaOS() * isNokiaOS() * iswebOS() * isbadaOS() * isBREWOS()

***移动浏览器*** * isChrome() * isDolfin() * isOpera() * isSkyfire() * isIE() * isFirefox() * isBolt() * isTeaShark() * isBlazer() * isSafari() * isMidori() * isGenericBrowser()

或查看使用 PHP 检测移动设备的教程： [http ://www.hand-interactive.com/resources/detect-mobile-php.htm](http://www.hand-interactive.com/resources/detect-mobile-php.htm)

# mysql - WordNet 3.0 诅咒词

> ID：12336341
> 
> 赞同：0
> 
> 时间：2012-09-09T03:41:33.167
> 
> 标签：mysql, lexical-analysis, wordnet

我正在开发一个从纯文本中提取关键字的系统。

关键字的要求是：

1.  长度在 1 - 45 个字母之间
2.  Word 必须存在于 WordNet 数据库中
3.  不能是“普通”字
4.  不能是脏话

我已经满足了要求 1 - 3，但是我找不到区分脏话的方法；我该如何过滤它们？

我知道这不会是过滤掉所有脏话的明确方法，但会发生的是所有关键字在被版主“批准”之前首先设置为“待定”状态。但是，如果我能让 WordNet 过滤掉大部分的脏话，它会让版主的工作更轻松。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T20:33:14.637

It's strange, the Unix command line version of WordNet (wn) will give you the desired information with the option -domn (domain):

```
wn ass -domnn (-domnv for a verb)

...
>>> USAGE->(noun) obscenity#2, smut#4, vulgarism#1, filth#4, dirty word#1
>>> USAGE->(noun) slang#2, cant#3, jargon#1, lingo#1, argot#1, patois#1, vernacular#1 
```

However, the equivalent method in the NLTK just returns an empty list:

```
from nltk.corpus import wordnet
a = wordnet.synsets('ass')
for s in a:
    for l in s.lemmas:
        print l.usage_domains()

[]
[]
... 
```

As an alternative you could try to filter words that have "obscene", "coarse" or "slang" in their SynSet's definition. But probably it's much easier to filter against a fixed list as suggested before (like the one at [noswearing.com](http://www.noswearing.com/dictionary)).

**Update:** There is also a [curse word filter API at Mashape.](https://www.mashape.com/neutrinoapi/bad-word-filter#!documentation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-01T10:02:08.280

对于第四点，如果你能收集到脏话列表并通过迭代过程将它们删除，那就更好了。

为了达到同样的效果，您可以查看[此](http://bastian.rieck.ru/blog/posts/2015/enron_swear_words/)博客

我将在这里总结一下。[1\. 从这里](http://www.cs.cmu.edu/~biglou/resources/bad-words.txt)加载 Swear words 文本文件 2\. 将其与文本进行比较，如果匹配则删除。

```
def remove_curse_words():
    text = 'Hey Bro Fuck you'
    text = ' '.join([word for word in text.split() if word not in curseWords])
    return text 
```

输出将是。

> 嘿兄弟你

# php - YII 框架：下拉列表规则不起作用

> ID：12336342
> 
> 赞同：1
> 
> 时间：2012-09-09T03:42:14.590
> 
> 标签：php, yii

**看法：**

```
<?php echo $form->dropDownList(
                               $model,'atb_Sem',
                               array('1'=>'1','2'=>'2'),
                               array('prompt'=>'Select a Semester')
                              ); 
?> 
```

**模型：**

```
array('atb_Sem', 'required') 
```

**控制器：**

```
$model->validate(); 
```

但如果下拉选择值仍在提示中，则不会触发验证。我的意思是“选择一个学期”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T17:10:29.987

您没有收到任何语法错误吗？
它应该像

```
<?php echo $form->dropDownList($model,'atb_Sem',
                 array('1'=>'1','2'=>'2'),
                 array('prompt'=>'Select a Semester')); 
?> 
```

介意`$form->dropDownList`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T02:43:38.657

您可能需要启用 jquery

```
<?php Yii::app()->clientScript->registerCoreScript('jquery'); ?> 
```

# c++ - 为什么 constexpr 与模板一起使用？

> ID：12336348
> 
> 赞同：7
> 
> 时间：2012-09-09T03:43:43.170
> 
> 标签：c++, operator-overloading, constexpr, constant-expression

考虑以下代码：

```
template<typename T>
constexpr inline T fma(T a, T b, T c)
{
    return a * b + c;
} 
```

这编译得很好。但为什么会这样？理论上，constexpr 函数只能调用其他的 constexpr 函数。但是，不能保证运算符将是 constexpr 函数。例如，假设我有一些具有以下接口的类型：

```
 class someType
 {
    someType operator + (const someType &rhs);
    someType operator * (const someType &rhs);
 }; 
```

运算符 + 和 **不是*constexpr。如果我编写以下代码：

```
fma(someType(), someType(), someType()); 
```

它应该无法编译，因为 constexpr 函数正在调用非 constexpr 函数。但它编译得很好。为什么是这样？

我正在使用带有 -std=c++0x 选项的 MinGW 的 G++ 编译器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T04:05:01.937

如果您使用非常量表达式作为参数调用 constexpr 函数，则该函数将在运行时执行。

如果你这样做：

```
constexpr someType dummy = fma(someType(), someType(), someType()); 
```

它会失败，因为您强制将结果存储在一个`constexpr`类型中。这不能在编译时完成，因此会出现编译错误。

请注意，如果您同时提供了构造函数和in ，这*将*起作用。`constexpr``constexpr` `operator+/*``someType`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-09T04:08:27.337

从 C++11 标准的第 7.1.5.6 节：

```
If the instantiated template specialization of a constexpr function template or member function of a class
template would fail to satisfy the requirements for a constexpr function or constexpr constructor, that
specialization is not a constexpr function or constexpr constructor. [ Note: If the function is a member
function it will still be const as described below. — end note ] If no specialization of the template would
yield a constexpr function or constexpr constructor, the program is ill-formed; no diagnostic required. 
```

这意味着如果 constexpr 函数模板使用模板参数实例化，则它会降级为非 constexpr 函数，这使其不是有效的 constexpr 函数。

如果无论你给它什么模板参数它都不是一个有效的 constexpr 函数，那么编译器可能会抱怨，但它不必抱怨。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T04:04:33.117

由于模板通常在使用时检查错误，因此只有当您将其与具有非 constexpr 运算符的类型一起使用时，它才会出错。

# jquery - 使用参数更新 URL 时 Pjax 后退按钮不起作用

> ID：12336349
> 
> 赞同：2
> 
> 时间：2012-09-09T03:43:54.383
> 
> 标签：jquery, pjax

当我使用 ?page=2 等参数手动更新 url 时，pjax 无法识别它：

```
window.history.replaceState(null,document.title,"?page=2"); 
```

我也尝试过使用 pjax

```
$.pjax({url: "?page=2", container: (container || '#null'), replace: true, dontRequest: true}) 
```

（注意我添加了 dontRequest 参数，所以我可以做一个“假”pjax 调用，它实际上不会触发 .ajax 但仍然更新 url，但没有成功）

要在实时站点上复制它：

1.  转到[http://2u.fm](http://2u.fm)（点击退出模式）
2.  向下滚动直到添加 ?p=2
3.  点击热门
4.  在浏览器中按回

注意没有任何反应......现在再次按下，您会看到它有效。这是因为我使用 replaceState 用 ?p=2 更新了 URL。我将如何使这项工作能够识别这些？参数...我尝试自定义 pjax 没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-20T15:51:51.967

这是一个古老的问题，但我会为碰巧像我一样来到这里的任何人提供答案。

当您在页面上手动使用 pushState 或 replaceState 时，Pjax 无法正常工作。当它遇到这样的状态时，它根本什么都不做。因此，当您按下后退/前进按钮到此类页面时，pjax:popstate 事件不会触发，也不会发生任何事情。

一种解决方法是使用 $.pjax.state 作为 pushState 和 replaceState 的状态对象参数

```
history.pushState($.pjax.state, null, href) 
```

和

```
history.replaceState($.pjax.state, null, href) 
```

github中有一些关于这个问题的问题： [issue/381](https://github.com/defunkt/jquery-pjax/issues/381)，[issue/495](https://github.com/defunkt/jquery-pjax/issues/495)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T05:59:23.343

在我看来，PJAX 只添加了路径，而不是完整的 url 状态。这就是您遇到此问题的原因。

如果您使用的是 Rails，那么一定要尝试 Wiselinks [https://github.com/igor-alexandrov/wiselinks](https://github.com/igor-alexandrov/wiselinks)。它是浏览器状态管理的一把瑞士军刀。以下是一些细节：http: [//igor-alexandrov.github.io/blog/2013/07/11/the-way-to-wiselinks-1-dot-0/](http://igor-alexandrov.github.io/blog/2013/07/11/the-way-to-wiselinks-1-dot-0/)。

Wiselinks 可以更好地处理这种情况和许多其他情况。

# c - 在 C/UNIX 中创建子进程/杀死进程

> ID：12336351
> 
> 赞同：2
> 
> 时间：2012-09-09T03:44:33.827
> 
> 标签：c, unix, operating-system, process

所以我今天一直在做这个，我很确定我已经接近了，但我仍然对如何终止子进程以及我是否正确地完成了这个任务感到有点困惑。以下是问题描述：

```
Write a UNIX program that creates a child process that 
prints a greeting, sleeps for 20 seconds, then exits.
The parent process should print a greeting before creating 
the child, and another after the child has terminated. It 
should then terminate. 
```

这是我拥有的代码：

```
#include <sys/wait.h>
#include <stdio.h>
#include <stdlib.h>

int main()
{
    int child;

    printf("Parent Greeting\n");
    child = fork();
    if(child >= 0)
    {
        if(child == 0)
        {
            printf("Child process\n");
            sleep(2);
            printf("Child exiting\n");
            exit(0);
        }
    }
    else
    {
        printf("Failed\n");
    }
    printf("End");
    exit(1);
    return 0;
} 
```

我遇到的问题是如何正确终止子进程。如果我将退出语句注释掉，那么子进程将运行、等待，然后将打印“结束”语句。如果我有退出语句，那么子进程会说它正在退出并且程序将一直等待直到我 ctrl+c 退出它。任何帮助将不胜感激，因为我对该主题感兴趣但有点困惑:) 谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T03:58:24.423

您不必从父进程中终止子进程；它应该自行终止（并且在`sleep()`,`printf()`和之后`exit()`）。父进程应该[`wait()`或`waitpid()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/wait.html)`"End"`让子进程在打印消息之前死亡。此外，您的`"End\n"`消息应包含换行符。

（`exit(1);`在第一个程序结束时）不需要；它表示失败。该`exit()`函数不返回，所以写成`return`是多余的。但最好删除`exit()`并留下`return 0;`指示成功。

（请注意，孩子应该包括对 的调用`exit()`，其值可能为 0 而不是修改后的代码中的 1。毕竟，它已经成功地完成了它的工作。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T04:28:36.387

问题是您已经强制父进程在子进程之前退出，在这种情况下，子进程不再成为僵尸进程，并且在某些时候成为幽灵进程，在最终退出之前的末尾添加一个 wait() 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-13T12:04:54.350

我认为这正是您想要实现的目标。

```
#include <sys/wait.h>
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>

void err_sys(const char* x)
{
    perror(x);
    exit(1);
}

int main()
{
        pid_t childPid;
        printf("Parent greeting\n");
        childPid =fork();
        if (childPid  >=0)
        {
                if(childPid == 0)
                {
                        printf("Child process\n");
                        sleep(20);
                        printf("child exiting\n");
                   }
                else
                {
                     waitpid(-1,NULL,0);
                }

        }
        else
            {
                     err_sys("fork error\n");
            }
        printf("END\n");
        return 0;
} 
```

# layout - 类似于 HTML 表格的布局 的？

> ID：12336358
> 
> 赞同：2
> 
> 时间：2012-09-09T03:46:53.587
> 
> 标签：layout, html

我正在尝试创建这样的布局：

```
[Left Area][Row 1]
[         ][Row 2]
[         ] ... 
```

第 1,2 行等应保持在彼此下方，切勿低于 [左侧区域]

我尝试使用“display：inline”将 [Left Area] 和 Rows 区域设置为 div，并且它可以工作，但只有在我尝试分隔各个行之前 - 然后 [Row 2] 要么位于 [Row 1] 旁边，要么位于 [左侧区域] 下方。

```
<div>
<div style="float:left;display:inline">Left Left Left</div>
<div style="display:inline">
    <div>First First First</div>
    <div>Second Second Second</div>
</div>
</div>
Below Below Below 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T04:16:20.990

从您在这里获得的少量信息中，很难说出您真正在寻找什么。但是检查[这个小提琴](http://jsfiddle.net/Xgzuc/)，看看它是否是你要找的。

# asp.net - sqlserver express on aws microinstance 抛出无效操作错误

> ID：12336362
> 
> 赞同：2
> 
> 时间：2012-09-09T03:47:11.043
> 
> 标签：asp.net, sql-server, iis-7.5

我正在将 Web 应用程序移植到 aws。有一个 aspx 页面，它整理了来自 3 个不同数据库的大约 15 或 20 个不同表数据表的信息。它在 godaddy 共享主机和我的开发服务器上运行良好，但是当我将它放在 aws 上的微型实例 ec2 上时（不确定这是否与问题有关，只是试图提供尽可能多的信息）我是得到随机错误。我有时会工作，但我经常收到以下错误

内部连接致命错误

```
System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler,
SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject
stateObj) 
at System.Data.SqlClient.SqlDataReader.ConsumeMetaData() 
at System.Data.SqlClient.SqlDataReader.get_MetaData() 
at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior  runBehavior, String resetOptionsString) 
at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async) 
at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result)  
at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method) 
at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method) at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior) 
at System.Data.Common.DbCommand.System.Data.IDbCommand.ExecuteReader(CommandBehavior behavior) 
at System.Data.Common.DbDataAdapter.FillInternal(DataSet dataset, DataTable[] datatables, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior) 
at System.Data.Common.DbDataAdapter.Fill(DataTable[] dataTables, Int32 startRecord, Int32 maxRecords, IDbCommand command, CommandBehavior behavior) 
at System.Data.Common.DbDataAdapter.Fill(DataTable dataTable) 
at UtilitiesLib.csharp.CSharpSqlServer.executeQuery(String sqlstring) in X:\code\UtilitiesLibCSharp\CSharpSqlServer.cs:line 87 at UtilitiesLib.data.Database.executeQuery(DataClass obj, String sqlstring) 
in X:\code\UtilitiesLibSL\data\Database.cs:line 67 
at UtilitiesLib.data.DataClass.loadSQLObject(Database db, DataClass obj, Int32[] cols, String[] signs, String[] vals, String[] ops) in X:\code\UtilitiesLibSL\data\DataClass.cs:line 253 
at UtilitiesLib.data.reading.TestBlockItemMathProblem..ctor(Database db, Int32 blockid, Int32 teacherid) in X:\code\UtilitiesLibSL\data\reading\TestBlockItemMathProblem.cs:line 30 
at UtilitiesLib.transport.reading.readingTCPCommHandlerClient.getTestBlockItem(Int32 type, Database db, Int32 blockid, Int32 teacherid) in X:\code\UtilitiesLibSL\transport\reading\readingTCPCommHandlerClient.cs:line 325 
at reading.test.Page_Load(Object sender, EventArgs e) in X:\code\reading\test.aspx.cs:line 157 
```

有时我得到一个不同的错误，说明连接已经关闭。

这非常奇怪，因为我对共享主机或我的开发服务器上的站点没有任何问题。aws 机器正在运行 windows 2008 server 和 iis 7.5 和 sql server express 2008 r2。站点中还有其他页面使用数据表很好，并且从未出现此错误，但它们使用的数据表较少。有人知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:18:03.580

我认为您正在达到微型实例的 613MB RAM 限制。将 Windows Server、IIS 和 SQL Server 放在一起可能还不够。您还可以尝试以下几件事：禁用连接字符串中的连接池；另外，请确保在命令完成后立即处理连接（使用`using`块）。

# encoding - 这是哪种编码（不是base64）？

> ID：12336363
> 
> 赞同：-1
> 
> 时间：2012-09-09T03:47:12.933
> 
> 标签：encoding, character-encoding, base64, json

最近，我正在使用一个 API，它的响应代码类似于：

P257SIae5AEchhrQy6

我试过base64，看起来不像。有什么线索吗？我认为它可能是某种 base64，因为有时它的结尾是“VEPJlm/a2cDz9JMY+ignA=”，它使用 = 来填充空间。

编辑：

NjFpSYZO7LQByUEhBVWKR6R69DLVKdJxvC+PfsQAvdkADzYl/P257SIae5AEchhrQy6/Gx2FCtHP7ykVmc6kHQRczgq3WF3AvNAHuPsMeXphjWbHGUGyuEz5Jd4QD9xt0UdZVFt/tQW6+l+CkSA3U1CwsV8n787tB+t/XbB42F57k1LpT39OUYTvRS4lbnq3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T03:52:48.373

它可能不是任何编码。只是一个唯一的ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T04:53:44.297

它可能是 Base64 编码的二进制数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T03:57:07.267

这是通过串行线路吗？可能是不匹配的波特率、奇偶校验、数据/停止位或流量控制握手问题。

# php - PHP 表用户排名由于最高的杀戮

> ID：12336366
> 
> 赞同：0
> 
> 时间：2012-09-09T03:48:05.943
> 
> 标签：php, mysql, html-table

我正在从我创建的 MYSQL 数据库中获取数据，该数据库存储玩家统计信息 IE 击杀、死亡、比率。我已经获取了所有数据，并在我的 PHP 代码行中将其转换为表格格式，但我想知道（因为我对 PHP 非常陌生）我如何才能做到这一点，以便最高的杀戮数超过在表格中，每个玩家的“id”数字都会根据他们的排名而变化。

以下是代码行：

```
 echo "<table width='1000' cellpadding='10' cellspacing='5' border='1'>"; 
 echo "<tr
<td><center><b>RANK</td></center></b><td><b><center>Nickname</td></center></b><td><center><b>Kills</td></center></b><td><center><b>     Deaths</td></center></b><td><center><b>Ratio</td></center></b></tr>";
 while($info = mysql_fetch_array( $data )) 
 { 
 echo "<tr> 
    <td><center><b>".$info['id']."</td></center></b>"."<td><center><b>".$info['username']."</td></center></b>"."<td><center><b>".$info['kills']."</td></center></b>"."<td><center><b>".$info['deaths']."</td></center></b>"."<td><center><b>".$info['ratio']."</td></center></b></tr>"; 

 } 
 echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T03:51:26.893

您可以将一个附加`order by kills desc`到您的 SQL 语句，因此最大杀伤数是第一位的。

# jquery - 使用 jquery 使用标签 + id 值选择元素

> ID：12336371
> 
> 赞同：0
> 
> 时间：2012-09-09T03:49:32.487
> 
> 标签：jquery, css

我该怎么做？在 CSS/jquery 选择器中？例如，如何选择带有标签按钮和 id“reg”的 jquery 元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T03:53:48.500

ID 用于唯一的 DOM 元素，因此只需查找 ID：

```
var button = $( '#reg' ); 
```

编辑:: 如果你必须：

```
var button = $( 'button#reg' ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T04:15:25.000

ID 是最快的选择器...因此，如果您实际上是为元素分配 ID，请确保它是唯一的，以便您始终可以通过 id-selector 选择它

```
$('# // <-- id selector - notice the pound sign

$('#reg').  //<-- that's how you select an element by id 
```

# php - 使用 cURL 将文件从 URL 上传到 FTP

> ID：12336374
> 
> 赞同：1
> 
> 时间：2012-09-09T03:50:53.240
> 
> 标签：php, file-upload, curl, ftp

我需要使用 cURL 将文件上传到我的 FTP 服务器。让我更好地解释一下。

我有这个 URL [http://www.server.com/file.zip](http://www.server.com/file.zip)，我需要将“file.zip”复制到 FTP 服务器，而无需将其下载到我的 PC。

我看过一些使用 cURL 上传文件的示例，但它们是我的硬盘驱动器，我需要从 URL 上传。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T03:54:34.413

由于您不知道是否正确保存它，因此只需使用流。

```
<?php

// open some file for reading
$file = 'http://server.com/file.zip';
$fp = fopen($file, 'r');

// set up basic connection
$conn_id = ftp_connect($ftp_server);

// login with username and password
$login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass);

// try to upload $file
if (ftp_fput($conn_id, $file, $fp, FTP_ASCII)) {
    echo "Successfully uploaded $file\n";
} else {
    echo "There was a problem while uploading $file\n";
}

// close the connection and the file handler
ftp_close($conn_id);
fclose($fp);

?> 
```

顺便说一句，我只是使用 PHP 手册示例来回答这些问题。你也应该。看[这里](http://php.net/manual/en/function.ftp-fput.php)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-16T21:17:32.933

我知道它有点晚了，但对于任何需要这个的人，我花了几个小时寻找类似的东西
[http://bgallz.org/1345/php-upload-multiple-files-url/](http://bgallz.org/1345/php-upload-multiple-files-url/)

# git - 无法从 git 中的“暂存阶段”中删除文件

> ID：12336380
> 
> 赞同：1
> 
> 时间：2012-09-09T03:52:26.143
> 
> 标签：git

我对 git 很陌生。到目前为止，我所做的是：

```
 $git init
    $git add "folder/*.php" 
```

现在，我无法从暂存阶段删除 php 文件......它返回的内容：

```
 $git rm --cached "folder/*.php"
    fatal: 'folder/*.php' is outside repository 
```

现在我该怎么做？我的 git 版本是 1.7.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T04:25:13.283

首先，发生错误是因为这些文件尚未添加到存储库中。当您执行 a`git add`时，git 所做的只是将文件添加到将提交到存储库的“列表”中。

为了“使这些文件成为存储库的一部分”，您可以做的是：

```
git commit -m "first commit" 
```

然后：

```
git rm folder/*.php 
```

现在，由于您删除了文件，您需要再次提交以更新有关删除的 git 历史记录。

# php - SQL查询从当前日期检索字段

> ID：12336383
> 
> 赞同：0
> 
> 时间：2012-09-09T03:52:50.763
> 
> 标签：php, sql

这是我的数据库 SQL 代码；

```
CREATE TABLE ProductType
(
    ptID int not null auto_increment,
    pType varchar(30),
    PRIMARY KEY(ptID)
)ENGINE=InnoDB;

CREATE TABLE Service
(
    sID int not null auto_increment,
    description varchar(30) not null,
    revenue int,
    stID int not null,
    PRIMARY KEY(sID),
    FOREIGN KEY(stID) references ServiceType(stID)
)ENGINE=InnoDB;

CREATE TABLE Product
(
    pID int not null auto_increment,
    model varchar(30) not null,
    cogs int,
    ptID int not null,
    PRIMARY KEY(pID),
    FOREIGN KEY(ptID) references ProductType(ptID)
)ENGINE=InnoDB;

CREATE TABLE Sale
(
    saleID int not null auto_increment,
    assetID int not null,
    eID int not null,
    sID int not null,
    pID int,  
    saDate date not null,
    PRIMARY KEY(saleID),
    FOREIGN KEY(eID) references Employee(eID),
    FOREIGN KEY(sID) references Service(sID),
    FOREIGN KEY(pID) references Product(pID)
)ENGINE=InnoDB;

CREATE TABLE Employee
(
    eID int not null auto_increment,
    firstName varchar(30) not null,
    lastName varchar(30) not null,
    phone varchar(30),
    email varchar(30),
    PRIMARY KEY(eID)
) 
```

这是我的尝试，但当我查询“销售”表时，我不知道如何从“服务”访问“收入”字段。

```
<?php
// Make a MySQL Connection
mysql_connect("localhost", "root", "root") or die(mysql_error());
mysql_select_db("pnl") or die(mysql_error());

// Retrieve all the data from the "example" table
$result = mysql_query("SELECT * FROM Sale WHERE saDate = CURDATE()")
or die(mysql_error());  

// store the record of the "example" table into $row
$row = mysql_fetch_array( $result );
// Print out the contents of the entry 

echo "revenue: ".$row['revenue'];

?> 
```

谁能给我一个例子，说明我将如何编写一个 php 脚本来检索当前日期所有销售的收入？

这也是我第一次尝试 SQL 和关系数据库模型，所以如果您发现我犯的任何严重错误或我可以改进的地方，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T05:06:48.293

试试这个方法。命名 SUM 字段并通过给定名称访问它：

```
// Retrieve all the data from the "example" table
$result = mysql_query("SELECT SUM(Service.revenue) sum FROM Service JOIN Sale ON Sale.sID = Service.sID WHERE Sale.saDate = $some_date") or die(mysql_error());  
// store the record of the "example" table into $row
$row = mysql_fetch_array( $result );
// Print out the contents of the entry 
echo "revenue: ".$row['sum']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T04:28:13.897

如果销售和服务上的 sID 对每个销售都是相同且唯一的，那么您可以使用如下查询：

```
$result = mysql_query(SELECT Sale.saleID, Sale.assetID, Sale.eID, Sale.sID, Sale.pID, Sale.saDate, Service.revenue "."FROM Sale, Service "."WHERE Sale.sID = Service.sID AND Sale.saDate = CURDATE()) or die(mysql_error()); 
```

或者如果`Service.sID = Sale.saleID`然后相应地改变。

通过这种方式，您可以控制您希望从每个表中检索的确切列。

# c++ - 对象正在初始化为不需要的值

> ID：12336387
> 
> 赞同：3
> 
> 时间：2012-09-09T03:53:29.153
> 
> 标签：c++

我一直在做一个琐碎的任务来习惯编码。我正在设计一台 ATM 机，目前它由 2 个类组成：

1.  银行账户.cpp

    *   不同类型账户的构造函数
    *   仅作为会员有余额
2.  事务.cpp

    *   在 BankAccount 上执行一个方法（即存款、取款和获取余额）

**问题：** BankAccount 自动初始化为余额 10，这是不希望的。例如，如果我开了一个支票账户并选择存入 10 美元，余额将打印出 20 美元。

```
//BankAccount.h
//This class will simply take in a bank account
//with a balance, other classes will use a bank account object
//such as saving/checkings and perform operations on the 
//balance

#ifndef BANK_ACCOUNT_H
#define BANK_ACCOUNT_H
class BankAccount {

private:
    float balance;
public:
    BankAccount ();
    float getBalance ();
    void makeDeposit ();
    void makeWithdrawl ();

};

#endif

//BankAccount.cpp
#include "BankAccount.h"
#include <iostream> //remove once done   *not to self
using namespace std; //remove once done *note to self

BankAccount::BankAccount() {
    balance = 0.00;
}

float BankAccount::getBalance() {
    return balance;
}

void BankAccount::makeDeposit() {
    cout << "How much would you like to deposit: ";
    float deposit_value;
    cin >> deposit_value;
    balance += deposit_value;
}

void BankAccount::makeWithdrawl() {
    cout << "How much would you like to withdrawl: ";
    float withdrawl_value;
    cin >> withdrawl_value;
    balance -= withdrawl_value;
}

//Transaction.h
#ifndef TRANSACTION_H
#define TRANSACTION_H

class Transaction {
private:
    BankAccount m_bao;
public:
    Transaction(BankAccount&);
    void displayOptions();  
    void printReciept();
};

#endif

//Transaction.cpp
#include "BankAccount.h"
#include "Transaction.h"
#include <iostream>
using namespace std;

Transaction::Transaction(BankAccount& bao) {
    m_bao = bao;
}

void Transaction::displayOptions() {
    cout << "\nPlease make a choice\n\n";
    cout << "1: Make Deposit\n";
    cout << "2: Make Withdrawl\n";
    cout << "3: Check Balance\n";

    int choice;
    cin >> choice;
    switch (choice) {
    case 1: 
        m_bao.makeDeposit();
        break;
    case 2:
        m_bao.makeWithdrawl();
        break;
    case 3:
        m_bao.getBalance();
        break;
    }
}

void Transaction::printReciept() {
    cout << "Current balance is now: " << m_bao.getBalance() + '\n';
}

int main () {

    BankAccount checking;
    Transaction q(checking);
    q.displayOptions(); 
    q.printReciept();

} 
```

我确信答案就在我眼前，但我的大脑现在只是油炸。我将继续寻找解决方案，并让你们知道我的问题是否已经解决。

[编辑]

好的，现在我正在尝试让客户可以选择在支票或储蓄账户上执行交易。目前我在我的 main() 中得到了它：

```
int main () {

    BankAccount checking(0.00);
    BankAccount savings(0.00);
    Transaction c(checking);
    Transaction s(savings);
    for(int i = 0; i < 10 ; i++) {
        cout << "Make an option" << endl;
        cout << "1\. Checking "   << endl;
        cout << "2\. Savings"     << endl;

        int choice;
        cin >> choice;
        if (choice == 1) {
            c.prompt();
            c.printReciept();
        }
        else {
            s.prompt();
            s.printReciept();
        }
    } 
```

}

它工作得很好，但是如果有意义的话，我想让这个过程更加面向 OOP :)

我试图研究的一个选项是制作一个属于 Transaction.cpp 的提示功能。这将完成 main 中所做的所有事情，当然除了初始化对象。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T03:59:20.783

你的问题是这一行：

```
cout << "Current balance is now: " << m_bao.getBalance() + '\n'; 
```

编译器将其视为：

```
cout << "Current balance is now: " << (m_bao.getBalance() + '\n'); 
```

`'\n'`是`10`一个int，所以你得到这个：

```
cout << "Current balance is now: " << (m_bao.getBalance() + 10); 
```

您可能打算这样做：

```
cout << "Current balance is now: " << m_bao.getBalance() << '\n'; 
```

请记住，在 C++ 中，`+`几乎总是意味着“将这两个数字相加”。

# ruby-on-rails - 为什么我的 Rails 开发环境中没有显示调试信息？

> ID：12336389
> 
> 赞同：6
> 
> 时间：2012-09-09T03:53:33.053
> 
> 标签：ruby-on-rails

我最近刚刚从 Rails 3.0.9 升级到 3.2.8，我看到的是用户友好的错误页面，而不是通常的错误消息。

我检查了以下内容：

*   跑了一个`Rails.env`，它表明我在`development`
*   我的 development.rb 有`config.consider_all_requests_local = true`

我在谷歌上搜索过，找不到其他任何东西。还有什么我在这里想念的吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:19:31.360

正如[在生产环境中未显示的用户友好错误页面中所述](https://stackoverflow.com/questions/4598983/user-friendly-error-pages-not-displaying-in-production-environment)

> 显示错误的另一个标准是 request.local?

因此，也许您的 ip 没有显示为 rails 的本地 IP（即您使用的是代理）。如果是这样或request.local？不正确，您可以尝试上述问题中提到的补丁（但当然返回 true 而不是 false ;）

# javascript - Javascript 创建可点击的文本

> ID：12336398
> 
> 赞同：0
> 
> 时间：2012-09-09T03:55:00.590
> 
> 标签：javascript, css, html

**编辑 2** - 我决定用 jsfiddle 创建一个简单的例子。

> [http://jsfiddle.net/VqA9g/61/](http://jsfiddle.net/VqA9g/61/)

如您所见，我正在尝试引用新的 div。

**编辑**- d/t 反对票和不清楚的问题

我有一个像这样的链表：

```
var struct_list = function () {
    this.id = 0;
    this.name = 0;
    this._head = null;
};
struct_list.prototype = {

// .. adding code , delete code ...

list_contents: function () {
    var current = this._head;
    while ( current != null ) {
        var div = document.createElement("div");
        div.style.width = "100px";
        div.style.height = "100px";
        div.style.background = "white";
        div.style.color = "black";
        div.style.top = "0px";
        div.style.left = "0px";
        div.style.margin = "400px 1000px auto"; 
        div.style.cursor = "pointer";
        div.innerHTML = current.name;
        div.onclick = function ( v ) { var d = document.getElementById('div'); alert(d)};
        document.body.appendChild(div);
        current = current.next;
    }
    return null;
},}; 
```

我希望能够显示这个链接列表，并且显示的每个项目都能够与“onclick”交互。

例子：

`struct_list.add ( 0 , "Zero" );`
`struct_list.add ( 1 , "One" );`

struct_list.list_contents();

```
_________________________________________________________________________
|                                                                        |
| <clickable> "Zero" that does a function(id) that passes over its ID(0) |
|________________________________________________________________________|
|                                                                        |
| <clickable> "One" <same as above>                                      |
|________________________________________________________________________| 
```

**对不起**，如果我不清楚。如果仍然不清楚，将重新编辑。我很抱歉。

* * *

我有一个保存数据的链表结构（它经常更改数据），并且我有一个 setInterval 来刷新它。我的问题是如何在仍然能够单击公开内容的同时列出结构的内容，我现在将其设置为链表中的每个内容都包含一个 id。另外，如何确保 y 轴的溢出是自动的？我猜我必须将它放入启用该功能的 div 中。

但我真正的问题是如何公开链接列表元素，同时还能够通过点击与它们进行交互。

我也不想使用纯 javascript 以外的任何东西。

示例（在我看来）可能是这样的：

```
<div id="PopUp">
    <script>
        setInterval(function() {
            if ( struct_qued_list ) {
                struct_qued_list = false;
                main.struct_list.list_contents(); // the linked list
            }
        }, 100);
    </script>
</div>

list_contents: function () {
    var current = this._head;
    while ( current != null ) {
        var div = document.createElement("div");
        div.style.width = "100px";
        div.style.height = "100px";
        div.style.background = "white";
        div.style.color = "black";
        div.style.top = "0px";
        div.style.left = "0px";
        div.style.margin = "400px 1000px auto"; 
        div.style.cursor = "pointer";
        div.innerHTML = current.name;
        div.onclick = function ( v ) { var d = document.getElementById('div'); alert(d)};
        document.body.appendChild(div);
        current = current.next;
    }
    return null;
}, 
```

任何帮助或合乎逻辑的方式将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T08:19:18.850

这主要是一个范围问题，在您的[Edit 2 fiddle](http://jsfiddle.net/VqA9g/61/)中，警报给出 undefined 因为您`i`获得了值`2`以离开循环。

这是一个可能的解决方案：[现场演示（jsfiddle）](http://jsfiddle.net/Sherbrow/VqA9g/64/)

```
!function(){
    var index = i; // Make it independant of i
    div.onclick = function () { alert(list[index]); };
}(); 
```

* * *

您还可以使用属性来存储任何值，并`this`在函数中使用来检索它。

* * *

或者将整个过程导出到另一个函数以获得类似这样的东西：

```
for ( var i = 0; i < 2 ; i++ ) {
    doSomething(i);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-09T04:07:03.917

当您向 DOM 中添加新内容时，JavaScript 有时很难找到它。您可能需要使用 DOM 突变事件（如[DOMNodeInserted](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-MutationEvent)）将事件侦听器添加到您的文本节点。

```
 document.addEventListener('DOMNodeInserted', function(){

     document.getElementById('thing').addEventListener('click', function(){
         alert('yey!');
     });

 }); 
```

如果要插入节点而不删除所有旧节点，您可能需要命名函数以便也可以删除它们。是的，这是纯 JavaScript。

**编辑**：对于您的溢出问题，您可以在插入时为每个节点分配一个类并通过 CSS 设置该类的样式

```
 .classname {
     overflow: auto;
 } 
```

# fonts - 使用矢量软件（即inkscape）和fontforge 创建图标字体？

> ID：12336401
> 
> 赞同：33
> 
> 时间：2012-09-09T03:56:44.990
> 
> 标签：fonts, svg, truetype, inkscape, fontforge

通过在这里得到一些答案和一些研究，我发现了一种实现图标的新方法。似乎您可以将图标作为字体来处理，而不是作为图像或 CSS 背景。

这种方法最终是否意味着创建一个将每个图标分配给一个字符的单一文件字体集？因为这种方法对我来说太新了，所以我真的很想确保我首先正确地处理它（我看到了巨大的潜力......比创建不同的图标要好得多，将每个图标导出为它自己的 .png 文件，用于每种不同的颜色和大小）。

如果是这种情况，则需要一些记忆（特别是因为我有超过 26 个图标）。对于那些对 fontforge 更有经验的人，有没有办法说一个特定的单词 = 字符？

此外，关于在网站上实现这一点。然后我需要在 css 类/id 中指定字体类型（即 font=icons; ）。然后我也可以用 css 改变大小、颜色等？伙计，如果这真的是真的。我希望我早点发现……本来可以节省数小时的时间。

无论如何，非常感谢您对此的任何帮助。我即将获得 fontforge 并开始学习（如果有更好的免费字体创建软件，请告诉我）。希望这能解决。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-11-29T21:45:42.987

我已经成功地为我的网站创建了一些图标字体，并且本指南中概述的 Inkscape FontForge 方法[非常](https://fontforge.org/docs/tutorial/importexample.html)可靠，如果您习惯使用 Inkscape 等软件，它也很容易。这是*我*采取的步骤：

## 准备（在本例中使用 Inkscape）

1.  打开包含您的设计的 Inkscape 文档。
2.  确保您已将所有形状、类型和线条转换为路径，并在轮廓模式下检查您的绘图以确保确定。如果有*问题*，您可以随时参考此基础文件对形状进行初始更改。
3.  **通过选择New > fontforge_glyph**创建一个新文档。
4.  将设计中的图标粘贴到新文档中。
5.  调整图标大小以适应提供的空间（尽管最好先调整原始设计文档中所有图标的大小 - 由您决定）。
6.  使用对齐工具（如果适用）将图标在页面上居中。
7.  将绘图保存为*纯*SVG（如果您根据要分配的字母进行标题，例如*"j.svg"*会更容易）。
8.  重复其他图标。

*我经常会打开这个纯 SVG 文档，粘贴新图标并根据最后一个图标居中和调整大小。这样，整个图标集的大小和位置就保持一致（并且您不必一直选择目录来保存纯 SVG）。*

* * *

## 字形创建（使用 FontForge）

9.  为每个图标制作 SVG 文件后，打开 FontForge 并创建一个新的 FontForge 文档。
10.  在主字形显示列表窗口中，双击您有图标的字母/数字之一。
11.  在这个新的字形窗口中，选择“**文件”>“导入**”并选择一个 SVG 文件（您可能需要在文件对话框中更改文件过滤器以显示 SVG 文件）。
12.  如果导入记录错误并且线框看起来遭受了轻微的爆炸，您需要回到 Inkscape 来整理路径。有一种简单的方法可以找出在大多数情况下应该有效的问题：

*   在 Inkscape 中，删除图标的填充。* 添加细笔画（1px 即可）。* 将笔画转换为路径。* 生成的形状可能会丢失图标的一部分。*全部撤消，然后将图标分开并重绘/跟踪/纠正问题区域。

* * *

## 字体创建（使用 FontForge）

13.  回到 FontForge，一旦你添加了所有的图标，你需要给你的字体一个名字。在主窗口中，选择**Element > Font info**。
14.  更改以下内容：

*   **字体名称： MyFontMedium** ***姓氏**：我的字体 ***人类名称**：我的字体中等 ***重量**：书（Win XP 认为中等 = 粗体，所以最好使用书）

15.  在主窗口中，选择**文件 > 生成字体**并保存为 TrueType（忽略任何错误）。

* * *

## 字体验证/转换

16.  转到[www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)或类似的服务来上传您的 TTF 文件并进行转换（和更正）
17.  您下载的 zip 文件将包含有关如何在 Web 项目中实现字体的精确说明。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-11T02:48:13.040

这是您要执行的操作的开源示例：

[http://fortawesome.github.com/Font-Awesome/](http://fortawesome.github.com/Font-Awesome/)

如果您查看他们的代码，您会看到如何运行 CSS：

[https://github.com/FortAwesome/Font-Awesome/blob/master/css/font-awesome.css](https://github.com/FortAwesome/Font-Awesome/blob/master/css/font-awesome.css)

如果你想编辑字体，下载[FontAwesome.ttf](https://github.com/FortAwesome/Font-Awesome/blob/master/FontAwesome.ttf?raw=true)并在 FontForge 中编辑。如果你想做你自己的TTF，你可以，但只要看看并复制我猜他们是怎么做的。

（*免责声明：我还没有完成这部分过程。在我们的团队中，其中一个人使用专有的 Mac 应用程序来设计字体。如果我将来需要做自己的图标字体，我可能会使用 Inkscape和FontForge。我已经检查了足够多的FontForge可以导入SVG，虽然我还没有尝试过*）。

当您完成并拥有您想要的 TTF 字体后，您需要将字体转换为用作网络字体所需的多种不同格式。我使用这个免费的在线工具：

[http://fontface.codeandmore.com/](http://fontface.codeandmore.com/)

... 这将为您提供 EOT、SVG、TTF 和 WOFF 字体文件，它们应该涵盖几乎所有浏览器。然后，您需要在 CSS 中包含这些文件，如上面链接的文件中所示。注意：对于 SVG 文件，您必须更新一个 ID。我认为它是由转换工具自动选择的，因此您必须编辑 SVG，检查 ID 并包含它。

例如，在这段代码中：

```
@font-face {
  font-family: 'MyIcons';
  src: url('myiconfont-iconglyphs.eot');
  src: url('myiconfont-iconglyphs.eot#iefix') format('embedded-opentype'),
       url('myiconfont-iconglyphs.woff') format('woff'),
       url('myiconfont-iconglyphs.ttf')  format('truetype'),
       url('myiconfont-iconglyphs.svg#myiconfont-regular') format('svg');
  font-weight: normal;
  font-style: normal;
} 
```

`#myiconfont-regular`您可能必须在 svg 定义之后更改该位。

# xml - Adobe Air Flex 附加并保存到 XML 文件

> ID：12336402
> 
> 赞同：0
> 
> 时间：2012-09-09T03:57:01.307
> 
> 标签：xml, apache-flex, actionscript, adobe, append

我正在尝试使用 Adob​​e Air 应用程序将数据附加到 XML 文件并保存它。

此方法将数据放在我想要的位置，但不会保存数据；

```
reminder.insertChildBefore(xmlArray[0],             
 <item>
  <event>{txtEvent.text}</event>
  <date>{dateFormatter.format(dfDate.selectedDate)}</date>
  <dateb>{dfDate.selectedDate.toDateString()}</dateb>       
  <time>{formattedtime}</time>
 </item>); 
```

下面的方法将它放在 XML 的标记之外/之下`<reminder> </reminder>`，它只是将它添加到文件的末尾。此方法保存数据。

```
var outputString:String;
outputString =

"\n"+
<item>
<event>{txtEvent.text}</event>
<date>{dateFormatter.format(dfDate.selectedDate)}</date>
<dateb>{dfDate.selectedDate.toDateString()}</dateb>     
<time>{formattedtime}</time>
</item>;

outputString = outputString.replace(/\n/g, File.lineEnding);
stream = new FileStream();
stream.open(file, FileMode.APPEND);
stream.writeUTFBytes(outputString);
stream.close(); 
```

这个选项没问题，但我需要让它从 XML 中删除最后一行，然后写一个新的最后一行。我可能最好使用此选项，因为我可以稍后在程序中重用代码。

任何有关如何使这些方法中的任何一种正常工作的建议都将不胜感激。

* * *

这个想法是添加到下面的 XML 数据中，第一种方法正确插入数据但不保存它，第二种方法将其附加到`</reminder>`标签下方。

```
<?xml version="1.0" encoding="utf-8"?>
<reminder>
 <item>
    <event>Christmas Day</event>
    <date>2012/12/25</date>
    <dateb>Tue Dec 25 2012</dateb>
    <time>08:00 AM</time>
  </item>
</reminder> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T04:06:12.307

`reminder.insertLineBefore()`实际上返回更新的对象，只需使用写入/保存时返回的内容。

更多信息在这里：[`XML.insertChildBefore()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/XML.html#insertChildBefore%28%29)

# c - C如何从主范围“隐藏”宏

> ID：12336409
> 
> 赞同：2
> 
> 时间：2012-09-09T03:59:13.973
> 
> 标签：c, inheritance, struct, scope, unions

如果有这样的例程，我希望主应用程序可以访问...

```
 char* get_widget_name(widget_t* w) {
        return name(w);
    } 
```

我想“隐藏”以下两个宏，而显然在 get_widget_name 中使用

```
 #define GET_WIDGET(self) (&(self)->base.widget)
    #define name(self)      (GET_WIDGET(self)->name) 
```

我基本上在结构中使用联合来“模拟”C 中的 C++ 继承。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T04:03:03.513

您在头文件中发布要在主应用程序中使用的信息。在这个例子中，它可能是：

```
#ifndef WIDGET_H_INCLUDED
#define WIDGET_H_INCLUDED

typedef struct widget widget_t;

extern char *get_widget_name(widget_t *w);

#endif /* WIDGET_H_INCLUDED */ 
```

然后在实现文件`widget.c`（

# algorithm - 什么是平均 log n 高度？

> ID：12336413
> 
> 赞同：2
> 
> 时间：2012-09-09T04:00:03.013
> 
> 标签：algorithm, tree, binary-search-tree

我开始知道 Random-BST/Red-Black 树和其他一些树的高度是`O(log n)`.

我想知道，这怎么可能。假设我有一棵这样的树

[![二叉树](../Images/f2eb2f20fa222299e705f3d9b8a0a52b.png)](https://i.stack.imgur.com/ii8ci.png)

树的高度本质上是树的深度，在这种情况下将是`4`（离开父深度）。但是人怎么能说高度可以用`O(log n)`概念来表示呢？

我非常喜欢算法，这一点让我很困惑。我在哪里错过了重点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T04:06:08.203

在算法复杂性中，变量`n`通常是指集合中或参与某些计算的项目总数。在这种情况下，`n`是树中的节点总数。因此，在您发布的图片中`n=31`。如果树的高度是 ，则`O(log n)`意味着树的高度与 的对数成正比`n`。由于这是一棵二叉树，因此您将使用 log base 2。

```
⌊log₂(31)⌋ = 4 
```

因此，树的高度应该约为 4 — 这正是您的示例中的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T04:14:16.557

正如我在评论中解释的那样，二叉树可以有多种情况：

*   在退化的情况下，二叉树只是一个链，它的高度是 O(n)。
*   在最好的情况下（对于大多数搜索算法），*完整*的二叉树具有对于任何节点，子树的高度都相同的属性。在这种情况下，长度将是 log(n) 的底（基数 2，或基数 k，对于 k 个分支）。您可以通过对树的大小进行归纳来证明这一点（构造函数中的结构归纳）
*   在*一般*情况下，您将混合使用这些，构建一棵树，其中任何节点都有可能不同高度的子树。

# regex - 并行化字符串匹配

> ID：12336414
> 
> 赞同：0
> 
> 时间：2012-09-09T04:00:29.437
> 
> 标签：regex, parallel-processing, pattern-matching

我必须挖掘大量数据集，并想知道是获得带有 GPU 的桌面还是将工作负载分散到不同的机器上更好？

我认为使用 GPU，我可能必须使用 CUDA 工具包之类的东西编写自己的代码。

我必须执行正则表达式搜索的字符串数量大约为数百万，并且我必须匹配许多不同的关键字，这些关键字达到 10k，因此它的模式匹配约为 500 亿。我想分散工作量，以便可以在一个核心上完成一百万个等等......

任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T05:18:19.313

当您想要处理大型数据集时，Hadoop 可能是一个解决方案。Hadoop 实现了 Map-Reduce 算法（最初由 Google 提供）。使用 Hadoop，您可以将任务拆分为多个子部分，并让单独的机器处理每个部分。

您提到的大小（500 亿匹配）可以使用 Hadoop 节点集群进行处理。如果您没有很多机器，您可以从 Amazon 租用它，他们有 Elastic mapreduce。

[http://aws.amazon.com/elasticmapreduce/](http://aws.amazon.com/elasticmapreduce/)

[http://hadoop.apache.org/](http://hadoop.apache.org/)

# javascript - 使用JS按顺序显示图像而不是随机显示图像？

> ID：12336415
> 
> 赞同：0
> 
> 时间：2012-09-09T04:00:54.803
> 
> 标签：javascript, html, arrays, math

下面列出的代码块是`Math.random`. 每次刷新或重新加载页面时，我都会尝试显示图像。不过，我知道的唯一方法是在数学上随机加载它们。问题是，我不希望它们随机加载，我希望它们按 imageArray 的顺序加载。有没有办法绕过可以按数组顺序显示每个图像的随机函数？

```
var imageArray = [
    [ 'http://example.com/assets/reporter.png', '<style>body{background-image:url(), -webkit-linear-gradient(#f5eddf 0%, #e3cfad 100%);#image{margin-left:500px;}</style>', '' ],
    [ 'http://example.com/assets/chair.png', '<style>body{background-image:url(), -webkit-linear-gradient(#7abbe7 0%, #a7dbfa 100%);}</style>', '' ]

];

function doIt()
{
var rand = Math.floor(Math.random()*imageArray.length);

    var html = "<a href='"+imageArray[rand][2]+"'><img src='"+imageArray[rand][0]+"' alt='heder' border='0' align='absmiddle' /></a><div>"+imageArray[rand][1]+"</div>";

document.getElementById("image").innerHTML = html;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T04:27:37.603

将数组索引放在 cookie 或本地存储中。当页面加载时，获取cookie，并增加它（如果没有设置，这是第一次，所以随机选择一个图像）。如果增量达到数组的大小，则回绕到 0。然后显示具有该索引的图像。然后保存新的 cookie 值。

```
var imageArray = [
    [ 'http://example.com/assets/reporter.png', '<style>body{background-image:url(), -webkit-linear-gradient(#f5eddf 0%, #e3cfad 100%);#image{margin-left:500px;}</style>', '' ],
    [ 'http://example.com/assets/chair.png', '<style>body{background-image:url(), -webkit-linear-gradient(#7abbe7 0%, #a7dbfa 100%);}</style>', '' ]

];

function getCookie(c_name)
{
var i,x,y,ARRcookies=document.cookie.split(";");
for (i=0;i<ARRcookies.length;i++)
{
  x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
  y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
  x=x.replace(/^\s+|\s+$/g,"");
  if (x==c_name)
    {
    return unescape(y);
    }
  }
}

function setCookie(c_name,value,exdays)
{
var exdate=new Date();
exdate.setDate(exdate.getDate() + exdays);
var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
document.cookie=c_name + "=" + c_value;
}

function doIt()
{
    var rand = getCookie('rand');
    if (rand == null) {
        rand = Math.floor(Math.random()*imageArray.length);
    } else {
        rand++;
        if (rand >= imageArray.length) {
            rand = 0;
        }
    }
    setCookie('rand', rand);
    var html = "<a href='"+imageArray[rand][2]+"'><img src='"+imageArray[rand][0]+"' alt='heder' border='0' align='absmiddle' /></a><div>"+imageArray[rand][1]+"</div>";

    document.getElementById("image").innerHTML = html;
}​ 
```

# javascript - 如何在运行时使用 javascript 隐藏图像？

> ID：12336416
> 
> 赞同：0
> 
> 时间：2012-09-09T04:01:18.407
> 
> 标签：javascript, html, microsoft-metro, windows-runtime

在 Windows 8 现代应用程序的 html5 文件中，我定义了两个图像标签。第一个图像的名称是前一个图像的名称，另一个图像的名称是下一个图像。当应用程序第一次加载时，我希望不显示“上一个”图像而应该显示“下一个”图像。

我没有为这两个图像分配任何源。当应用程序第一次加载时，我为“下一个”图像分配了一些源，它加载成功。但是仍然显示方形的“上一个”图像图标。我希望它在这里不显示任何内容。稍后我想完全隐藏“下一个”图像。

在这两种情况下，当我没有分配源时，都会显示方形。

有关如何隐藏图像的任何建议，以便不会显示任何内容来代替它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T04:10:33.850

设置他们的 style.visibility 属性怎么样？

```
var mImg = document.getElementById('idOfFirstImage');
mImg.style.visibility = "hidden";

mImg = document.getElementById('idOfSecondImage');
mImg.style.visibility = 'visible'; 
```

# python - 如何从子目录提供 html 页面？

> ID：12336417
> 
> 赞同：0
> 
> 时间：2012-09-09T04:01:20.590
> 
> 标签：python, google-app-engine

我想从一个子目录提供一个 HTML 页面（不是“静态”页面，通过 YAML，不是“模板”页面，通过 Django 或 Jinja）

如何在`self.response.out.write`(?) 语句中引用路径 + 文件名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T04:15:01.967

我不确定我是否理解了，但我觉得你想考虑没有模板的 HTML 文件。

如果是这样，您可能想尝试此解决方案...

您可以按如下方式定义路径：

```
path = os.path.join(os.path.dirname(__file__), 'your_directory/your_html.html') 
```

然后，您可以像这样打印 HTML 的内容：

```
self.response.out.write(template.render(path, 0)) 
```

# c++ - 如何在 C++ 中找出二维 int 数组的大小？

> ID：12336419
> 
> 赞同：1
> 
> 时间：2012-09-09T04:01:29.277
> 
> 标签：c++, arrays, multidimensional-array, sizeof

我在使用涉及二维数组的 C++ 程序时遇到问题。

作为程序的一部分，我必须使用一个函数，它接受两个表作为参数并将它们添加，返回另一个表。

我想我可以做这样的事情：

```
int** addTables(int ** table1, int ** table2) 
{ 
    int** result;
    for (int i = 0; i < rows; i++)
    {
        for (int j = 0; j < columns; j++)
        {
            result[i][j] = table1[i][j] + table2[i][j]; 
        }
    }
    return result;
} 
```

但我不知道如何为我的“for”循环找出表格（行和列）的大小。

有人知道如何做到这一点吗？

这是我正在测试的代码的一部分，但我没有得到正确的列数和行数：

```
#include <iostream>
#include <cstdlib>
#include <ctime>

using namespace std;

int main(int argc, char **argv) 
{
    const int n = 3; // In the addTables function I'm not supposed to know n.
    int **tablePtr = new int*[n]; // I must use double pointer to int.
    for (int i = 0; i < n; i++)
    {
        tablePtr[i] = new int[n];
    }

    srand((unsigned)time(0));
    int random_integer;

    for(int i = 0; i < n; i++) // I assign random numbers to a table.
    {
        for (int j = 0; j < n; j++)
        {
            random_integer = (rand()%100)+1;
            tablePtr[i][j] = random_integer;
            cout << tablePtr[i][j] << endl;
        }
    }   

    cout << "The table is " << sizeof(tablePtr) << " columns wide" << endl;
    cout << "The table is " << sizeof(tablePtr) << " rows long" << endl;

    return 0;
} 
```

感谢您的帮助，请记住我是 C++ 新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T04:10:23.663

在 C 或 C++ 中，无法“找到”指针指向的大小。指针只是一个地址值。您必须将大小 - 或者在您的情况下将行数或列数传递给`addTables`函数 - 例如：

```
int** addTables(int ** table1, int ** table2, int rows, int columns) 
```

这就是为什么评论者建议像`vector`. C++ 提供了比原始指针更好的数据类型——一方面，向量跟踪它包含的项目的数量，因此它不必作为单独的参数传递。

在您的示例程序中，`sizeof`运算符返回所提供变量类型的大小。因此，`sizeof(tablePtr)`它返回的大小`int**`可能是 4 或 8 个字节。该`sizeof`操作在编译时进行评估，因此它无法知道`tablePtr`指向的缓冲区有多大。

# jquery - 带有 Node.js 和 jQuery 的 CORS

> ID：12336420
> 
> 赞同：0
> 
> 时间：2012-09-09T04:01:41.520
> 
> 标签：jquery, node.js, cors

我需要将一些数据发送到不提供 javascript 的节点服务器。我运行服务器，但从来没有看到发送的 OPTIONS 并且 Chrome 拒绝我的 ajax 来自不同的域。]

我的服务器：

```
var http = require('http');
var router = require('router');
var routing = router();
var server = http.createServer(routing);
routing.options('*', function(request, response){
  console.log("OPTIONS BEING SENT");
  var origin = (request.headers.origin || "*");
  response.writeHead("204",
                     "No Content",
                     { "access-control-allow-origin": origin,
                     "access-control-allow-methods": "GET, POST, PUT, DELETE, OPTIONS",
                     "access-control-allow-headers": "content-type, accept",
                     "access-control-max-age": 10,
                     "content-length": 0
                   });
  response.end();
});

server.listen(7738); 
```

我的 js 发送的是`jqxhr = $.get('localhost:7738/post/trackEvent/' + eventName);`，但我从来没有看到 OPTIONS 被发送。如果我使用另一个工具通过 OPTIONS 请求访问服务器，它会按预期工作。

更新：

使用 OPTIONS 请求访问服务器以`http://localhost:7738/post/trackEvent/MoneyInTheBank`返回以下内容：

```
HTTP/1.1 204 No Content
Content-Length: 0
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: GET, POST, PUT, OPTIONS
Access-Control-Allow-Headers: Content-Type, Accept
Access-Control-Max-Age: 10
Connection: close 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T04:40:17.197

只有预检请求发送 OPTIONS 标头，并且由于您的 ajax 请求是具有简单标头的简单方法，因此不会将 OPTIONS 发送到服务器。

有关详细信息，请查看[W3C](http://www.w3.org/TR/cors/#simple-header)和[MDN](https://developer.mozilla.org/en-US/docs/HTTP_access_control)

# ruby - Paperclip 正在处理附件，即使它们没有通过验证？

> ID：12336430
> 
> 赞同：1
> 
> 时间：2012-09-09T04:03:44.230
> 
> 标签：ruby, ruby-on-rails-3, paperclip

我有一个使用回形针作为图像附件的模型

我目前要求附件是使用验证的图像

```
validates_attachment_content_type :image, :content_type => /^image\/(jpg|jpeg|pjpeg|png|x-png|gif)$/, :message => 'file type is not allowed (only jpeg/png/gif images)' 
```

但是，当我尝试上传非图像时，我会收到这些错误消息。

```
Image /var/folders/1f/0jtzzpl56sdcb92spkx6rpch0000gn/T/10-21-201120120908-44073-j59q0s.pdf is not recognized by the 'identify' command.
Image /var/folders/1f/0jtzzpl56sdcb92spkx6rpch0000gn/T/10-21-201120120908-44073-j59q0s.pdf is not recognized by the 'identify' command.
Image content type file type is not allowed (only jpeg/png/gif images) 
```

因此，即使该文件未通过验证，该文件似乎也被传递给 ImageMagick。我只想要最后一条错误消息，而不是前 2 条。

如何抑制前两条消息或确保文件不被处理，除非它通过内容类型验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T11:39:43.563

查看以下链接，您可以通过添加自定义方法 [https://groups.google.com/forum/?fromgroups=#!topic/paperclip-plugin/oVnIgfAfrLU在此处找到您的解决方案](https://groups.google.com/forum/?fromgroups=#!topic/paperclip-plugin/oVnIgfAfrLU)

谢谢，

尼迪·萨瓦亚

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T00:22:07.537

解决了

```
before_post_process :process_only_images

def process_only_images
    if !(image.content_type =~ %r{^(image|(x-)?application)/(x-png|pjpeg|jpeg|jpg|png|gif)$})
      return false 
    end
end 
```

# git - 如何“审查” git 存储库的历史记录？

> ID：12336434
> 
> 赞同：5
> 
> 时间：2012-09-09T04:04:30.763
> 
> 标签：git, version-control, github, revision-history

我目前有一个个人 git 存储库，用于存放我一直在开发的一些软件。该存储库曾经在一些配置文件中包含其他人的个人信息，我在 git 中拥有这些信息，因为它们对于跟踪和帮助记录配置文件的工作方式很有用。git repo 还显示了配置文件是如何随时间变化的，即哪个版本需要什么。我最近想把项目发布到 github 上，所以我创建了一个分支并从头部删除了个人信息，将每个项目替换为占位符。

**除了回到每个修订版和“更改历史”之外，我有没有办法通过在所有事件中用新信息替换旧信息来“审查”所有事件中的旧信息（一次全部更改），所以如果有人如果要回滚，他们会看到占位符而不是个人信息？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T04:11:24.637

您可以在其上运行 git filter-branch ，这将修改分支的历史记录并删除您想要的内容。然后您可以在其位置添加一个示例（占位符）文件。查看[github 的 remove-sensitive-data 帮助页面](https://help.github.com/articles/remove-sensitive-data)

# visual-studio-2010 - 在 Visual Studio 2010 中的班级成员之间导航

> ID：12336437
> 
> 赞同：0
> 
> 时间：2012-09-09T04:05:02.580
> 
> 标签：visual-studio-2010

如何在 Visual C# 2010 中的班级成员之间导航？我习惯于在其他 IDE 中上下 Ctrl 来执行此操作。这是否有类似的东西，我该如何改变它？

如果方法的大小不同，向上翻页和向下翻页会很慢而且很烦人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T04:24:20.410

您可以使用 Ctrl + F2 并使用编辑器顶部的下拉列表在您正在编写的类和成员之间导航。在 Ctrl + F2 之后，使用 Tab 在下拉列表之间切换，选择项目后按 Enter 转到所选成员。

干杯

# java - Java：单击 TextArea 中的文本并让它调用一个函数

> ID：12336452
> 
> 赞同：2
> 
> 时间：2012-09-09T04:09:43.490
> 
> 标签：java, swing

> **可能重复：**
> [java中的超链接](https://stackoverflow.com/questions/5866281/hyperlink-in-java)

第一篇在 Stack Overflow 上发帖。8)

我的问题是关于桌面客户端 JAVA 程序，而不是 JavaScript 或任何基于 Web 的实现。

我追求的想法是让 TextArea（或类似的东西）具有用户可以单击的“超链接”。这些底层的超链接将调用一个预定义的 Java 函数。

我知道我可以创建可点击的 JLabels 和类似的东西，但我追求的是带有单个可点击单词的段落样式文本，它运行一个函数。

有没有办法让 TextArea 中的文本具有这种行为？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T08:40:46.983

`JTextPane`将是您想要的组件。您将从本 oracle[教程](http://docs.oracle.com/javase/tutorial/uiswing/components/text.html)中获得清晰的概念。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T08:46:55.717

您可以使用 a`JEditorPane`和 HTML 文档作为文本源，并将 a 添加`HyperlinkListener`到编辑器中。在这种情况下，您还必须为链接创建“虚构”URL。

另一种选择是使用`JTextPane`，编写一些代码来提供“超链接”突出显示，并添加一个鼠标侦听器来检查用户对链接的点击。

# javascript - 对于如何在没有modernizr的情况下用边界半径的特征检测检查替换我的旧浏览器检查？

> ID：12336453
> 
> 赞同：3
> 
> 时间：2012-09-09T04:09:51.573
> 
> 标签：javascript, jquery, css, html, modernizr

我一直在使用以下代码：

```
if (
    ($.browser.msie && parseFloat($.browser.version) < 7) ||        // IE 6 and lower
    ($.browser.mozilla && parseFloat($.browser.version) < 1.9) ||   // Firefox 2 and lower
    ($.browser.opera && parseFloat($.browser.version) < 9) ||       // Opera 8 and lower
    ($.browser.webkit && parseInt($.browser.version) < 400)             // Older Chrome and Safari
) {
    // document.location.href = 'old-browsers.html?redirect=' + escape(document.location.href);
} 
```

但这似乎不适用于 Chrome。现在我想用一些使用特征检测的代码来替换它。我在看modernizr，但这似乎只是在我的html中添加一个类，即使只是为了这一次检查，它也会创建相当多的javascript。

有没有一种简单的方法可以检查我的浏览器是否支持 CSS HTML5 边框半径属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T04:44:52.993

简单地测试元素属性中是否存在`borderRadius`属性（使用 CSS 属性的 JavaScript 命名约定） ，例如使用条件`style`

```
'borderRadius' in document.body.style 
```

这是@Ohgodwhy 答案中代码的简化版本。

请注意，这将对属性执行请求的精确检查`border-radius`。@thecodeparadox 的答案以及其他地方类似问题的其他答案，也测试供应商前缀名称，这可能是也可能不是您想要的（取决于您的代码是否也使用它们）。

这仅测试浏览器是否识别该属性。实施可能仍然被破坏或不完整。

# php - PHP 运行查询的时间比 MySQL 客户端长 90 倍

> ID：12336457
> 
> 赞同：16
> 
> 时间：2012-09-09T04:11:32.620
> 
> 标签：php, mysql, pdo

我正在通过命令行 PHP 脚本运行 MySQL 查询（在 mysqlnd 驱动程序上使用 PDO 准备查询）。这是一个带有单个左连接的简单查询，每行返回 100 行和 7 个小列。

当我在 MySQL CLI 中运行这个查询时（在运行相关 PHP 脚本的同一台机器上），它需要 0.10 秒——即使抛出了 SQL_NO_CACHE 标志。

当我通过 PDO 运行这个准备好的查询时，它需要 9 多秒。*这仅*是 execute() —— 不包括 fetch 调用所花费的时间。

我的查询示例：

```
SELECT HEX(al.uuid) hexUUID, al.created_on,
    IFNULL(al.state, 'ON') actionType, pp.publishers_id publisher_id,
    pp.products_id product_id, al.action_id, al.last_updated
FROM ActionAPI.actionLists al
LEFT JOIN ActionAPI.publishers_products pp
    ON al.publisher_product_id = pp.id
WHERE (al.test IS NULL OR al.test = 0)
    AND (al.created_on >= :since OR al.last_updated >= :since)
ORDER BY created_on ASC
LIMIT :skip, 100; 
```

我不相信查询有问题，考虑到我尝试过的每个本机 MySQL 客户端都几乎立即运行它，但这里有一些解释：

```
+----+-------------+-------+--------+-------------------------+------------+---------+-----------------------------------+------+-------------+
| id | select_type | table | type   | possible_keys           | key        | key_len | ref                               | rows | Extra       |
+----+-------------+-------+--------+-------------------------+------------+---------+-----------------------------------+------+-------------+
|  1 | SIMPLE      | al    | index  | created_on,last_updated | created_on | 8       | NULL                              |  100 | Using where |
|  1 | SIMPLE      | pp    | eq_ref | PRIMARY                 | PRIMARY    | 4       | ActionAPI.al.publisher_product_id |    1 |             |
+----+-------------+-------+--------+-------------------------+------------+---------+-----------------------------------+------+-------------+
2 rows in set (0.00 sec) 
```

PDO 到底在做什么，只需要 8.9 秒？

*编辑：*正如评论中所述，我也写了一个 mysql_query 版本，它的性能同样很差。然而，删除部分 WHERE 子句使其运行速度与 MySQL 客户端一样快。继续阅读令人难以置信的细节。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T14:46:52.923

在这个问题上给出一个很晚的更新：

我还没有找到原因，但事实证明 PHP 中的 EXPLAIN 与 CLI 中的不同。我不确定连接的任何方面是否会导致 MySQL 选择为索引使用不同的字段，因为据我所知，这些事情不应该相关；但可惜的是，PHP 的 EXPLAIN 显示没有使用正确的索引，而 CLI 却使用了。

在这种（令人困惑的）情况下，解决方案是使用[索引提示](http://dev.mysql.com/doc/refman/5.1/en/index-hints.html)。请参阅我的示例中修改后的查询中的“FROM”行：

```
SELECT HEX(al.uuid) hexUUID, al.created_on,
    IFNULL(al.state, 'ON') actionType, pp.publishers_id publisher_id,
    pp.products_id product_id, al.action_id, al.last_updated
FROM ActionAPI.actionLists al USE INDEX (created_on)
LEFT JOIN ActionAPI.publishers_products pp
    ON al.publisher_product_id = pp.id
WHERE (al.test IS NULL OR al.test = 0)
    AND (al.created_on >= :since OR al.last_updated >= :since)
ORDER BY created_on ASC
LIMIT :skip, 100; 
```

希望这对某人有帮助！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-24T17:31:11.893

我有同样的问题。从 cli 和 PHP 启动时，相同的查询表现不同。在 cli 中解释提到正确的索引使用，在 PHP 中什么都没有。正如我所发现**的，问题是类型转换**，在我的情况下是日期时间。在我专门为比较值转换类型之后，例如。`where datetime_column > cast('2014-01-12 12:30:01' as datetime)`一切正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T04:23:34.013

PDO 使用资源来操作行结果。将其与解释语言 (PHP) 相提并论，您将拥有比 MySQL 返回结果所需的脚本更长的处理时间。

注意：使用 mysql_select_db() 或 mysqli_select_db() 比 PDO 快得多。

要了解有关更快的 PHP 查询的更多信息，请参阅：[PHP：查询 MySQL 的最快方法是什么？因为 PDO 非常缓慢](https://stackoverflow.com/questions/3641038/php-whats-the-fastest-way-to-query-mysql-because-pdo-is-painfully-slow)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-24T17:38:58.370

当您在命令行上连接时，它很可能使用与 PHP 连接时不同的字符集。

当您要求它使用索引时，它会并且因为字符集足够接近而不会引起问题（猜测？这取决于您对表和列的设置）

尝试在那里扔一些 unicode 字符，它可能会开始返回错误的结果。

确保字符集在连接、表和列上匹配以获得最佳结果。如果他们做不到，连接是最重要的

[UTF-8 与 Latin1 mysql，未在 utf-8 上使用的索引](https://stackoverflow.com/questions/2266241/utf-8-vs-latin1-mysql-indexes-not-used-on-utf-8)

有更多信息

# ruby-on-rails - 确定是否使用 `rails server` 命令启动 rails 应用程序？

> ID：12336462
> 
> 赞同：-4
> 
> 时间：2012-09-09T04:12:56.897
> 
> 标签：ruby-on-rails, ruby

我在使用这些命令时遇到问题：

```
rails generate  
rails destroy  
rails console  
rake 
```

我需要运行长时间的操作，只有当应用程序通过`rails server`.

`Rails.env.production?`不是一种选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T14:23:40.880

如果您正在使用应有的环境，那么无论您是否使用 Rails 服务器，您都会将您想要使用此条件的操作限制在开发或登台环境中，对吗？

大多数站点从未`rails server`在生产中使用，听起来您不希望将它用于您的测试环境......所以为什么不直接使用`if Rails.env.development?`（如果有的话，还可以暂存）。

# android - 可以通过智能手机 GPS 定位到我们在哪一层吗？

> ID：12336463
> 
> 赞同：3
> 
> 时间：2012-09-09T04:13:40.587
> 
> 标签：android, ios, gps, location

有没有办法可以通过智能手机决定我们在哪一层？

例如，我在建筑物中。5楼；

我的智能手机中的原生应用程序可以知道我在 5 楼，并给我一些关于 5 楼的建议（导航到 1 楼）</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T15:25:50.793

对于一些较新的 Android 手机（例如三星 Galaxy S3），嵌入式气压传感器可用于得出准确的室内高度估计值，该估计值可以转换为楼层（假设您知道楼层位于哪个高度）。

请参阅有关 STMicroeletronics 压力传感器的这篇文章：

[http://www.engadget.com/2012/09/06/stmicroelectronics-details-pressure-sensor-in-your-galaxy-s-ii​​i/](http://www.engadget.com/2012/09/06/stmicroelectronics-details-pressure-sensor-in-your-galaxy-s-iii/)

这个应用程序显示基于大气压力的高度：

[https://play.google.com/store/apps/details?id=com.snakebite.mike.altimeter](https://play.google.com/store/apps/details?id=com.snakebite.mike.altimeter)

这是 Android API： http: [//developer.android.com/reference/android/hardware/SensorManager.html#getAltitude](http://developer.android.com/reference/android/hardware/SensorManager.html#getAltitude(float,%20float) (float,%20float )

# ios - 如何确定用户是否曾看到请求推送通知权限的对话框 (ios)

> ID：12336466
> 
> 赞同：6
> 
> 时间：2012-09-09T04:14:10.813
> 
> 标签：ios, push-notification, apple-push-notifications

我知道 enabledremotenotificationtypes，但它对我没有帮助，因为如果我收到 enabledremotenotificationtypes == UIRemoteNotificationTypeNone，我无法判断用户是否有 1\. 接受过一次推送通知，但随后通过设置将其关闭或 2\. 拒绝推送通知或 3\. 从未见过请求许可的蓝色对话框。我需要一种方法来区分这三种情况。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-07T13:14:00.463

该解决方案有点棘手，但确实有效。您需要为两种不同的 notificationSettings 调用 registerUserNotificationSettings - 一种没有 notificationCategory，另一种有 notificationCategory：

```
 //Request notification permission
UIUserNotificationSettings *notificationSettings = [UIUserNotificationSettings settingsForTypes:UIUserNotificationTypeAlert | UIUserNotificationTypeBadge | UIUserNotificationTypeSound categories:nil];
[[UIApplication sharedApplication] registerUserNotificationSettings:notificationSettings];

//Request notification permission again, but with a category with no actions
UIMutableUserNotificationCategory *category = [[UIMutableUserNotificationCategory alloc] init];
category.identifier = @"com.xyz.markNotificationPopupShownCategoryIdentifier";

UIUserNotificationSettings *notificationSettingsWithCategory = [UIUserNotificationSettings settingsForTypes:UIUserNotificationTypeAlert | UIUserNotificationTypeBadge | UIUserNotificationTypeSound categories:[NSSet setWithObject:category]];
[[UIApplication sharedApplication] registerUserNotificationSettings:notificationSettingsWithCategory]; 
```

应用委托中的 didRegisterUserNotificationSettings:(UIUserNotificationSettings *)notificationSettings 方法将被调用两次，并且无论用户在权限通知中的回答如何，第二次调用后，当前通知设置将包含该类别。只要类别计数大于 0，您就可以确定已显示通知权限对话框：

```
if ([UIApplication sharedApplication].currentUserNotificationSettings.categories.count > 0) {
    NSLog(@"Notifications permissions has been asked");
} else {
    NSLog(@"Notifications permissions hasn't been asked");
} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-10T09:45:54.313

这就是我处理这种情况的方式——我是一个新手，所以这可能不是最佳的，但它对我有用。创建一个`int`属性`pushNotificationSeen`。如果用户看到对话并拒绝它，则设置`pushNotificationSeen`为 1。如果用户看到对话并接受它，则设置`pushNotificationSeen`为 2。然后，在下一行代码中，调用这样的函数（在代码的其他地方定义）：

```
-(void)saveData
{
if (self.pushNotificationSeen)
{
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setInteger:self.pushNotificationSeen forKey:@"seen?"];
    [defaults synchronize];
}
} 
```

然后将以下行添加到`viewDidLoad`.

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
self.pushNotificationSeen = [defaults integerForKey:@"seen?"]; 
```

此时，您可以通过查看 self.pushNotificationSeen 是 0、1 还是 2 来了解用户做了什么或没有做什么。

我希望这是足够的信息——我的睡眠时间并不长。如果我一直感到困惑，请告诉我，我可以澄清一下。

# ios - CCSprite：批处理精灵应该使用与批处理节点相同的纹理？

> ID：12336478
> 
> 赞同：2
> 
> 时间：2012-09-09T04:17:34.540
> 
> 标签：ios, cocos2d-iphone, crash, nodes, ccsprite

我不断遇到崩溃，上面写着：`*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'CCSprite: Batched sprites should use the same texture as the batchnode'`

我不太确定这意味着什么。我用谷歌搜索了崩溃，但没有得到任何结果。此外，这只发生在我从游戏中的第二个场景回来后回到我的第一个场景时。

我仔细检查了我的代码，并确保我的精灵表中的所有图像都作为子节点添加到批处理节点。我还确保我的应用程序中不在我的精灵表中的图像作为子元素添加到我的图层而不是批处理节点。

无论如何，是什么导致了这次崩溃，我该如何解决？

谢谢！

***Edit1***：这似乎发生在我的应用程序的这一行：

```
[self.spriteLeft setDisplayFrame:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:imageName]]; 
```

我 NSLog imageName 并返回： MyImage.png ，然后我查看我加载的 plist 和 pvr.ccz ， MyImage.png**肯定**在那里。所以我不知道为什么当一切看起来都正确时它会崩溃。此外，我确保在我加载精灵表中的图像的任何地方都不会使用 spriteWithFile。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T11:30:16.087

它的意思很简单：当您使用纹理创建 CCSpriteBatchNode 对象对象时，稍后当您将精灵添加到 CCSpriteBatchNode 时，您添加到 CCSpriteBatchNode 的所有精灵必须来自同一个纹理。例如：

```
NSString *spriteName = @"agility"; // an example, this code comes from a method that returns the batchNode
                                   // for many status types

NSString *plist = [NSString stringWithFormat:@"status_%@.plist",spriteName];
NSString *textureFileName = [NSString stringWithFormat:@"status_%@.pvr.gz",spriteName];
[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:plist textureFile:textureFileName];
CCSpriteBatchNode *batchNode = [CCSpriteBatchNode batchNodeWithFile:textureFileName];

//  plist has a frame named status_agility_Ok.png

CCSprite *frameStatusOk = [CCSprite spriteWithSpriteFrameName:[NSString stringWithFormat:@"status_%@_Ok.png",spriteName]];  
[batchNode addChild:frameStatusOk]; // this will work, both the sprite and the batch node have the same texture

CCSprite *frameStatusNotOk=[CCSprite spriteWithFile:@"someOtherTextureFile.pvr.gz"];
[batchNode addChild:frameStatusNotOk]; // this will fail an assertion and crash. 
```

# c# - datagridview 组合框列事件引发

> ID：12336481
> 
> 赞同：0
> 
> 时间：2012-09-09T04:18:05.817
> 
> 标签：c#, winforms

我的表单中的 datagrid 视图中有一个 datagridview 和两个组合框列。谁能建议我从第二行的第二个组合框列中选择一个项目应该引发什么事件。我使用了一个代码，但它正在为每一行中的每个组合框列提高

# java - 在碧玉报告中多次重复所有列

> ID：12336486
> 
> 赞同：1
> 
> 时间：2012-09-09T04:20:25.053
> 
> 标签：java, jasper-reports, report

我有如下要求，但无法解决，这就是我在这里的原因。我希望有人能帮帮忙。

我需要一份在碧玉报告中包含 3 列的报告。列值非常小，以至于所有这 3 列仅占页面宽度的三分之一。所以，我想做一个报告，如下所示：

```
Col1   Col2   Col3  | Col1   Col2   Col3  | Col1   Col2   Col3
------------------    ------------------    ------------------
val1   val1   val1  | val3   val3   val3  | val5   val5   val5
val2   val2   val2  | val4   val4   val4  | val6   val6   val6 
```

这意味着，`Col1 Col2 Col3`将被重复。

你能在碧玉报告中给我关于这些问题的任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T05:41:12.270

[这个SO答案](https://stackoverflow.com/questions/4294779/evenly-spreading-data-in-to-multiple-columns)解决了我的问题:)

这真是一个不错的帖子。我的确切问题。

# c - Linux-MIPS 系统调用保存的寄存器？

> ID：12336487
> 
> 赞同：2
> 
> 时间：2012-09-09T04:20:27.427
> 
> 标签：c, linux, assembly, mips, system-calls

Linux/MIPS 上的*系统调用*（不是函数调用，是通过指令到内核空间的实际往返）保存了哪些寄存器？`syscall`

`RESTORE_SOME`从头文件中的宏来看`arch/mips/include/asm/stackframe.h`，看起来 r2-r7、r25、r28 和 r31 被恢复了，当然调用约定会自动保存被调用者保存的寄存器，即使在内核空间中（任何将使用它们的内核空间函数）会在破坏它们之前自行保存它们）。它是否正确？

当然，至少有几个（r2 和 r7）的值会随着系统调用的结果而被破坏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T06:20:04.467

我想[MIPS ABI](http://www.linux-mips.org/wiki/MIPS_ABI_History)约定应该准确定义哪些寄存器在系统调用之前包含系统调用号和参数，以及哪些寄存器在系统调用之后包含结果（包括错误代码）。通常系统调用不使用堆栈，只使用寄存器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T11:21:37.920

“按照调用约定，系统调用保留了 o32 定义为幸存函数调用的那些寄存器的值。” （[参见 MIPS 运行](http://www.scribd.com/doc/39654922/244/What-Happens-on-a-System-Call)，第 379 页）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T12:00:02.827

有关Linux/MIPS 系统调用中寄存器使用的描述（除了内核源本身之外，我知道的唯一一个），请参[见此链接。](http://www.linux-mips.org/wiki/Syscall)

# postgresql - 主键重复，无法访问 psql 控制台

> ID：12336488
> 
> 赞同：1
> 
> 时间：2012-09-09T04:20:38.237
> 
> 标签：postgresql, activerecord, heroku, ruby-on-rails-3.2, cedar

在 postgres 数据库中创建新记录时出现问题。使用 Heroku Cedar 堆栈和 Rails 3.2。

调用**创建**结果

```
ActiveRecord::RecordNotUnique (PG::Error: ERROR:  duplicate key value violates unique constraint "answer_selections_pkey" 
```

这是我的问题表架构（它应该使用隐式自动增量 id 列）：

```
 create_table "answer_selections", :force => true do |t|                                                              
    t.integer "individual_id"
    t.integer "answer_choice_id"
    t.boolean "still_true",       :default => false
  end 
```

这是调用创建时的错误。

```
2012-09-07T14:46:44+00:00 app[web.1]: ActiveRecord::RecordNotUnique (PG::Error: ERROR:  duplicate key value violates unique constraint "answer_selections_pkey"
2012-09-07T14:46:44+00:00 app[web.1]: : INSERT INTO "answer_selections" ("answer_choice_id", "individual_id", "still_true") VALUES ($1, $2, $3) RETURNING "id"):
2012-09-07T14:46:44+00:00 app[web.1]:   app/controllers/answer_selections_controller.rb:10:in `create' 
```

同样，我在另一个表上看到了同样的错误：

```
2012-09-09T04:10:34+00:00 app[web.2]: ActiveRecord::RecordNotUnique (PG::Error: ERROR:  duplicate key value violates unique constraint "trips_pkey"
2012-09-09T04:10:34+00:00 app[web.2]: : INSERT INTO "trips" ("booked", "created_at", "destination_id", "end_date", "individual_id", "n_travelers", "name", "start_date", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"): 
```

由于连接超时，无法直接访问 postgres 数据库：

```
$ heroku pg:psql
psql: could not connect to server: Connection timed out 
```

我该如何修复它，以及将来如何避免它？我已经读过运行 VACCUUM 和 ANALYZE 会解决它，但正如我所说我无法访问 psql。

编辑以添加请求的信息（上面包含的示例架构，我们正在使用 ActiveRecord）：

```
@record.create(params) # How these records are created 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T05:30:58.447

我不确定您的数据发生了什么，但不知何故，提供`id`值的序列与表的`id`值不同步；如果您`id`在这样的 INSERT 中提供显式值，则可能会发生这种情况：

```
insert into t (id, col) values (11, 'pancakes') 
```

也许您已经加载了一些批量数据，但没有让您的序列重新变得有意义。

在任何情况下，一个简单的迁移都可以解决您的问题：

```
class KickAnswerSelectionSequence < ActiveRecord::Migration
    def up
        connection.execute(%q{
            select setval('answer_selections_id_seq', max(id))
            from answer_selections
        })
    end
    def down
        raise ActiveRecord::IrreversibleMigration
    end
end 
```

您需要对所有给您带来问题的表重复此操作，为了安全起见，对所有表执行此操作可能是个好主意。

如果需要，您可以阅读有关序列操作函数的更多信息：

> [http://www.postgresql.org/docs/current/interactive/functions-sequence.html](http://www.postgresql.org/docs/current/interactive/functions-sequence.html)

至于你的问题`heroku pg:psql`，你必须和 Heroku 谈谈。

# django - Django Tastypie - 本地化，数据库模式

> ID：12336489
> 
> 赞同：0
> 
> 时间：2012-09-09T04:21:05.010
> 
> 标签：django, django-models, tastypie

我对 Django 和 Django sweetpie 比较陌生，所以我的问题可能很简单。

我正在尝试为可本地化的文本实现一个 RESTFUL 服务。

我的 Django 资源是：

```
#The different languages
class Language(models.Model):
    abbreviation = models.CharField(max_length=6)
    name = models.CharField(max_length=100)

# The different Chapters in the book
class Chapter(models.Model):
    name = models.CharField(max_length=200)

# The different Lines of the chapters (by sections)
class Line(models.Model):
    chapter= models.ForeignKey(Chapter)
    section = models.IntegerField()
    line = models.IntegerField()

# The different translations of the line
class LineLanguage(models.Model):
    language = models.ForeignKey(Language)
    line = models.ForeignKey(Line)
    text = models.TextField() 
```

然后我就有了美味的资源：

```
class LanguageResource(ModelResource):
    class Meta: queryset = Language.objects.all()
    resource_name = 'language'
    authorization = Authorization

class ChapterResource(ModelResource):
    class Meta: queryset = Chapter.objects.all()
    resource_name = 'chapter'
    authorization = Authorization()

class LineResource(ModelResource):
    chapter = fields.ForeignKey(ChapterResource, 'chapter')
    class Meta: queryset = Line.objects.all()
    resource_name = 'line'
    authorization = Authorization()

class LineLanguageResource(ModelResource):
    language= fields.ForeignKey(LanguageResource, 'language')
    line = fields.ForeignKey(LineResource, 'line')
    class Meta: queryset = LineLanguage.objects.all()
    resource_name = 'lineLanguage'
    authorization = Authorization() 
```

最初我只想使用安静的服务（因此我的 url.py 只包含“ `url(r'^api/', include(v1_api.urls)),`”，但我无法得到我想要的：

我希望能够通过一个简单的调用来检索正确翻译中的特定文本行，但是如果不知道 LineLanguageID，这是不可能的。

在使用美味派之前。我的 url.py 中有一些设置允许我通过使用这种类型的 url 来找到它`www.myapp.com/api/v1/language/chapter/section/line`（例如，例如 `www.myapp.com/api/v1/en/1/1/1`会返回我英文第一章第一部分的第一行），但我想切换到 RESTFUL api（主要是因为我想尝试使用backbone.js）

我相信我的问题要么是我的模型/美味派资源设计不当，要么是缺乏如何将我的模型转换为适当的美味派资源的知识。你有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T15:19:02.617

您可能会设计您的模型略有不同。我不知道您的其他需求是什么，但您可以将模型更改为如下所示：

```
#The different languages
class Language(models.Model):
    abbreviation = models.CharField(max_length=6)
    name = models.CharField(max_length=100)

# The different Lines of the chapters (by sections)
class Line(models.Model):
    name = models.CharField(max_length=200)
    section = models.IntegerField()
    line = models.IntegerField()
    language = models.ForeignKey(Language)
    text = models.TextField() 
```

然后，您只需为`Line`模型定义一个资源，并使用类似于以下内容的请求查询语言/部分/章节/行：

```
www.myapp.com/api/v1/line/?language__abbreviation=en&section=1&chapter=1&line=1 
```

如果你不想改变你的模型，你可以通过调用 api 来实现你想要的：

```
www.myapp.com/api/v1/lineLanguage/?language__abbreviation=en&line__line=1&line__section=1&line__chapter__name=1 
```

请注意，对于这两种情况，资源的外键字段都需要`full=True`设置参数，因为您需要查询外部模型的字段。

如果您想使用旧的 url 模式，您可以通过`override_urls`在 LineLanguageResource 中定义包含处理来自 url 的参数的模式的方法来实现，将其传递给某个方法，然后将它们传递给美味的`dispatch_detail`方法作为 request.GET 元素。

# php - PHP数组读取

> ID：12336492
> 
> 赞同：1
> 
> 时间：2012-09-09T04:21:48.097
> 
> 标签：php

该文件最初是这样的：

$字符串

> 红色红色红色绿色绿色绿色绿色绿色黑色黑色黑色黑色白色白色白色白色白色白色白色白色白色白色白色绿色红色橙色橙色橙色黑色黑色黑色黄色黄色黄色黄色黄色黄色

foreach ($inarray as $k=>$v)

所以我转换为数组

```
Array ( [0] => red[red] => 17 
        [1] => orange[orange] => 3 
        [2] => green[green] => 46 
        [3] => yellow[yellow] => 5 
        [4] => black[black] => 21 
        [5] => white[white] => 10 
      ) 
```

我如何读取数组就像

```
red is 17
orange is 3
green is 46
yellow is 5
black is 21
white is 10 
```

目前我正在使用 foreach($thisarray as $key => $value)，但它读取的方式不是我所期望的。非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T05:09:50.537

```
<?php
$arr=array(0 => 'red[red] => 17',
        1=> 'orange[orange] => 3' ,
        2 => 'green[green] => 4' ,
        3 => 'yellow[yellow] => 5' ,
        4 => 'black[black] => 21' ,
        5 => 'white[white] => 10');

foreach ($arr as $k=>$v) {

    $str=preg_match('[[a-z \s]+]',$v,$match);
    $num=preg_match('/[0-9]+$/',$v,$matchnum);
    echo $match[0].' is '.$matchnum[0]."<br>";
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T04:26:58.997

```
foreach ($array as $k=>$v) {
   $color = preg_replace('/\[.*\]/', '', $k);
   echo $color . ' is ' . $v;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T04:34:17.783

您在那里的数组表示中可能有一些错字。无论如何，要从字符串中读取，您可以使用[`sscanf(..)`](http://php.net/manual/en/function.sscanf.php)（我希望您正在检查字符串的有效性，当然还有 的返回值`sscanf(..)`）：

```
<?php
    $output = array();
    $s = "red is 17";
    $arr = sscanf($s, "%s is %d");
    $output[$arr[0]] = $arr[1];
    print_r($output);
?> 
```

输出：

```
Array
(
    [red] => 17
) 
```

您可以轻松地将其扩展到从数组或其他内容中的多个字符串中读取。

高温高压

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T15:10:55.663

不确定您是否在寻找更简单的东西。但我认为你想要这个：

```
<?php
  $colour = array()
    $color['red'] = 17;
    $color['orange'] = 3; 
    //etc

foreach ($colour as $name=>$value) {

   echo "<br> $name is $value";
}
?> 
```

**输出**

```
red is 17
orange is 3 
```

# c# - 正则表达式在字符串中查找日期

> ID：12336494
> 
> 赞同：-1
> 
> 时间：2012-09-09T04:22:18.927
> 
> 标签：c#

在 RegExLib 站点中找到此日期时间正则表达式 -> [http://regexlib.com/REDetails.aspx?regexp_id=361](http://regexlib.com/REDetails.aspx?regexp_id=361)

```
 string pattern = @"^(((((0[13578])|([13578])|(1[02]))[\-\/\s]?((0[1-9])|([1-9])|([1-2][0-9])|(3[01])))|((([469])|(11))[\-\/\s]?((0[1-9])|([1-9])|([1-2][0-9])|(30)))|((02|2)[\-\/\s]?((0[1-9])|([1-9])|([1-2][0-9]))))[\-\/\s]?\d{4})(\s(((0[1-9])|([1-9])|(1[0-2]))\:([0-5][0-9])((\s)|(\:([0-5][0-9])\s))([AM|PM|am|pm]{2,2})))?$";
    var match = Regex.Match("test 123 11/30/2003 10:12:24 am", pattern, RegexOptions.IgnoreCase); 
```

如果字符串是准确的（它没有在其中找到它的测试 123），则上述方法有效，但是我如何使它在某个地方找到嵌入在字符串中的日期（如图所示）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T04:27:55.627

您的正则表达式匹配字符串的开头 ( `^`) 和结尾 ( `$`)。如果您从表达式中删除相应的元素，它将在字符串中的任何位置找到日期。

这里是[所有正则表达式字符](http://msdn.microsoft.com/en-us/library/az24scfc.aspx)的链接。

# zend-framework - Zend Framework 事务，如 Spring Framework

> ID：12336497
> 
> 赞同：0
> 
> 时间：2012-09-09T04:24:09.043
> 
> 标签：zend-framework

我有一个 Spring 框架背景，如果你知道一点，你就知道你可以有一个事务服务方法，例如 myStuffTransactional()，这个可以有一堆 DAO 操作，如果有任何 DAO 操作失败然后所有方法 myStuffTransactional() 将失败并回滚。

例子：

```
@Transactional
public void myStuffTransactional(){
   dao1.insertSome();
   dao2.deleteSome();
   dao3.updateSome();
} 
```

但是在这里我知道如果 dao3.updateSome() 失败，那么 dao1 和 doa2 将回滚，我的数据库将保持不变。

现在我有时间使用 PHP Zend 框架，但我可以获得相同的 Spring-transactional-behaviour。我见过很多例子，比如：

```
$db->beginTransaction();
try
{
$db->exec($sqlSentence);
$query = $db->commit();
}
catch(Exception $e)
{
$db->rollBack();
} 
```

而这个只是以模型（或 DAO）的方式工作，我的意思是，操作操作。我需要的是一个用于一堆数据库操作的方法包装器，就像 spring 框架一样。

任何人都知道这是否可能？

提前谢谢大家。

# ibm-mq - 关注 MQ 通道属性 Heartbeat interval

> ID：12336502
> 
> 赞同：1
> 
> 时间：2012-09-09T04:24:45.330
> 
> 标签：ibm-mq, mq

我有一个关于频道属性的问题**`Heartbeat Interval(HBINT)`**。据信息中心介绍，当区间条件成熟且MCA畅通时，会导致通道断开。我在本地 QMGR 中进行了一些测试，但我发现通道（发送方-接收方）没有按预期变为**非活动状态。**那么这里有什么问题呢？请帮帮我。通道定义详情如下：

```
 CHANNEL(EDISONQM.GRACEQM.C1)            CHLTYPE(SDR)
 ALTDATE(2012-09-09)                     ALTTIME(11.50.52)
 BATCHHB(0)                              BATCHINT(0)
 BATCHLIM(5000)                          BATCHSZ(50)
 COMPHDR(NONE)                           COMPMSG(NONE)
 CONNAME(localhost(1414))                CONVERT(NO)
 DESCR( )                                DISCINT(300)
 HBINT(30)                               KAINT(AUTO)
 LOCLADDR( )                             LONGRTY(999999999)
 LONGTMR(1200)                           MAXMSGL(4194304)
 MCANAME( )                              MCATYPE(PROCESS)
 MCAUSER( )                              MODENAME( )
 MONCHL(QMGR)                            MSGDATA( )
 MSGEXIT( )                              NPMSPEED(FAST)
 PASSWORD( )                             PROPCTL(COMPAT)
 RCVDATA( )                              RCVEXIT( )
 RESETSEQ(NO)                            SCYDATA( )
 SCYEXIT( )                              SENDDATA( )
 SENDEXIT( )                             SEQWRAP(999999999)
 SHORTRTY(10)                            SHORTTMR(60)
 SSLCIPH( )                              SSLPEER( )
 STATCHL(QMGR)                           TPNAME( )
 TRPTYPE(TCP)                            USEDLQ(YES)
 USERID( )                               XMITQ(EDISONQM.GRACEQM.X1)

 CHANNEL(EDISONQM.GRACEQM.C1)            CHLTYPE(RCVR)
 ALTDATE(2012-09-09)                     ALTTIME(11.51.42)
 BATCHSZ(50)                             COMPHDR(NONE)
 COMPMSG(NONE)                           DESCR( )
 HBINT(30)                               KAINT(AUTO)
 MAXMSGL(4194304)                        MCAUSER( )
 MONCHL(QMGR)                            MRDATA( )
 MREXIT( )                               MRRTY(10)
 MRTMR(1000)                             MSGDATA( )
 MSGEXIT( )                              NPMSPEED(FAST)
 PUTAUT(DEF)                             RCVDATA( )
 RCVEXIT( )                              RESETSEQ(NO)
 SCYDATA( )                              SCYEXIT( )
 SENDDATA( )                             SENDEXIT( )
 SEQWRAP(999999999)                      SSLCAUTH(REQUIRED)
 SSLCIPH( )                              SSLPEER( )
 STATCHL(QMGR)                           TRPTYPE(TCP)
 USEDLQ(YES)

 C:\windows\system32>dspmqver
 Name:        WebSphere MQ
 Version:     7.1.0.1
 Level:       p710-001-120524
 BuildType:   IKAP - (Production)
 Platform:    WebSphere MQ for Windows
 Mode:        32-bit
 O/S:         Windows 7 Home Premium x64 Edition, Build 7600
 InstName:    Installation1 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T05:10:23.853

您可能希望查看信息中心主题*[检查通道的另一端是否仍然可用](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/ic11280_.htm)*，其中更详细地介绍了决定是否关闭通道的算法。具体来说，在通道断开之前必须至少有两个心跳流，因此 HBINT 必须远小于 DISCINT 的一半才能生效。此外，通道协商必须完成，这样 MCA 都不会为 HBINT 导出零值。

您的帖子未包含匹配的 RCVR 频道的列表。我怀疑你没有在那里更新 HBINT？如果您显示正在运行的通道的状态，您将看到在启动时通道代理会协商它们的两个 HBINT 值中的*较大者。*因此，如果您没有在 RCVR 上更新 HBINT，那么运行通道的 HBINT 将为 300，即使您在 SDR 上将其设置为 30。

此外，实际时间并不准确。目的是通道将在*不少于*两个 HBINT 间隔内超时，但实际超时将超过此数量。例如，我将 HBINT 设置为 10 并在大约 40 秒后看到通道断开连接。通道超时和断开连接旨在提高通道的可靠性并获得孤立通道，但确切的时间并不像消息或事务处理那样重要。这个想法是，如果你有大量的孤立频道，你可以通过修复损坏的程序或在防火墙处调整超时来解决这个问题，而不是将 HBINT 设置为非常低的值并期望精度。如果您需要准确的通道断开时间，那么在其他地方需要解决根本原因。

# ios - 在 Virtual Box Mac OSX 上进行 iOS 开发

> ID：12336506
> 
> 赞同：1
> 
> 时间：2012-09-09T04:25:58.080
> 
> 标签：ios, macos

> **可能重复：**
> [带有 Mac OS X 的虚拟机](https://stackoverflow.com/questions/3860906/virtual-machine-with-mac-os-x)

我想知道是否有人在 Virtural Box Mac OS 安装上进行过 iOS 开发。我有一个 macbook pro，但它更旧而且很糟糕。我正在考虑换回 PC 笔记本电脑以节省一点现金。我只想知道您是否可以创建证书并使用虚拟盒图像中的所有应用程序加载器？任何信息，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T04:27:39.310

您可以通过使用 VirtualBox 设置 Hackintosh 来做任何事情，但它不受官方支持，这样做可能是非法的。

# jquery - 如何在从对话框打开的 jqGrid 中设置选定的行？

> ID：12336508
> 
> 赞同：0
> 
> 时间：2012-09-09T04:26:14.023
> 
> 标签：jquery, jqgrid

我创建了一个带有几个链接的页面来打开一个对话框。这里有一个jsfiddle：http: [//jsfiddle.net/Hptbb/2/](http://jsfiddle.net/Hptbb/2/)

第一个链接应该打开一个带有 ids 4 和 7 的对话框，第二个链接应该打开一个带有 ids 2 和 8 的对话框。

它在不使用对话框的情况下工作。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T05:09:05.040

看看这个小提琴，我只是将所有脚本移到顶部。 [http://jsfiddle.net/Hptbb/4/](http://jsfiddle.net/Hptbb/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T12:23:49.827

我将代码更新为[以下演示](http://jsfiddle.net/Hptbb/7/)，它似乎可以正常工作。jqGrid 的代码已经`idsOfSelectedRows`根据`loadComplete`. 因此，要在网格中选择新行，您只需`idsOfSelectedRows`用新值填充数组，然后调用`reloadGrid`.

# jquery - 如果不成功，Twitter Anywhere Tweet Box setTimeout 是否会在提交时出错？

> ID：12336509
> 
> 赞同：1
> 
> 时间：2012-09-09T04:26:19.883
> 
> 标签：jquery, settimeout, twitter-anywhere

我正在使用 Twitter Anywhere 在我的网站上创建一个 Tweet Box。一切都按预期工作；但是这种方法的一个问题是，当按下推文按钮但推文没有通过时（例如，当它是重复的推文时），没有错误消息或警报；相反，加载图标只是无限期地旋转。我一直在寻找解决方案，但据我所知，通过 Twitter Anywhere 没有针对此类事情的错误消息回调。我能想出的最佳解决方案是使用 setTimeout 在推文在 15 秒左右未通过时提醒消息。

就像是

```
.$button.click(function(){
 // alert error if not onTweet after 15 seconds
}) 
```

我不知道在我的代码块中在哪里实现。有什么想法吗？（您可以忽略 ajax 提交，他们只是将信息发布到数据库）。

```
 twttr.anywhere(function (T) {
                  T("#tbox").tweetBox({
                      height: 131,
                      width: 249,
                   defaultContent : genTweet, 
                   counter : true, 
                   label : '', 
                   complete : function (tweetBox) {
                      me.tweetBox = tweetBox; 
                      try {
                        me.tweetBox.$editor.attr('maxlength',140);
                        me.tweetBox.$button.html('Submit');
                        me.tweetBox.$counter.prepend('<span>Character Count: </span>');

                         me.tweetBox.$editor.click(function(){
                            if (me.tweetBox.$counter.children('span').length) {

                            }
                            else {
                                me.tweetBox.$counter.prepend('<span>Character Count: </span>');
                            };
                        });
                         me.tweetBox.$counter.css({
                            color : '#918e8e',
                            'font-size' : '8px',
                            'position': 'absolute',
                            'right': '12px',
                            'top': '120px'
                        });
                         me.tweetBox.$editor.css({
                            resize : 'none', 
                            color : '#000', 
                            'font-family': 'Georgia', 
                            'font-size': '15px', 
                            background : 'transparent'
                         }); 
                         me.tweetBox.$button.parent('span').css( {
                            color : '#fff',
                            cursor : 'pointer',
                            'background' : '#ed1c24',
                            border: '1px solid red',
                            'font-weight' : 'bold',
                            padding : '0'

                         }); 
                        me.tweetBox.$button.css( {
                            color : '#fff',
                            cursor : 'pointer',                             
                            'background' : '#ed1c24',
                            'font' : 'bold 17px/1em Arial Narrow, Open Sans, sans-serif',
                            'letter-spacing' : '1px',
                            'padding' : '10px 12px',
                            'text-transform' : 'uppercase',
                            'text-shadow' : '0 0 0 #999'

                         });
                      } catch (e) {
                         //
                      }
                   },
                    onTweet : function (tweet, renderedTweet) {
                        //alert( "Data Saved: " + renderedTweet );
                        $.ajax({ 
                          type: "POST", 
                          url: "insert.php",
                          data:{
                    "tweets":renderedTweet,
                    "emailForm": $('#email').val()
                    }, 
                          success: function(){ 
                            $('#widget-post').ajaxSubmit();
                          } 
                          });

                      $('#step-3 .step-content, #steps').slideUp();
                      $('#thank-you').slideDown();
                   }
                    });
                $('#step-2 .step-content').slideUp();
                $('#step-3 .step-content').slideDown();
                }); 
```

# android - 从额外的意图中获取空值

> ID：12336510
> 
> 赞同：2
> 
> 时间：2012-09-09T04:26:27.510
> 
> 标签：android, android-intent

我正在尝试将字符串从一个活动传递到另一个活动。我似乎无法获得额外的意图。我哪里错了？

这是代码

将额外内容放入意图中：

```
public void onClick(View v) {
    // TODO Auto-generated method stub
    String string = editTextFeild.getText().toString();
    Intent i = new Intent("com.com.com.otherclass");
    i.putExtra("dat", string);
    startActivity(new Intent("com.com.com.otherclass"));
} 
```

从意图中获取数据（在 com.com.com.otherclass 中）：

```
Bundle bundle = getIntent().getExtras();
if (bundle != null){
    String string = bundle.getString("dat");
    textView.setText(string);
} 
```

ps 这些不是我在代码中使用的实际名称 :)

提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T04:50:09.917

在您的 startActivity 行中，您正在创建一个新的 Intent。而是通过它'i'。

```
startActivity(i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T05:28:34.873

要将任何数据或字符串发布到其他活动，只需将以下代码行将您的数据传输到变量中的其他活动

```
 Intent itemintent = new Intent(this, ShowDescription.class);
        Bundle b = new Bundle();
        b.putInt("position", position);
        b.putStringArray("title_s", title_s);
        b.putStringArray("desc_s", desc_s);
        b.putStringArray("link_s", link_s);
        itemintent.putExtra("android.intent.extra.INTENT", b);
        startActivity(itemintent); 
```

这会将您的数据发布到另一个 Activity Showdescription.java 类

在哪里可以通过以下方法获取数据。

```
Bundle b = startingIntent.getBundleExtra("android.intent.extra.INTENT");
title_s = b.getStringArray("title_s");
desc_s = b.getStringArray("desc_s");
link_s = b.getStringArray("link_s");
pub_s = b.getStringArray("position"); 
```

这将获得数据。有关获取数据的更多信息，请参阅以下链接 [http://grabcodes.blogspot.in/2012/08/passing-data-between-two-activities.html](http://grabcodes.blogspot.in/2012/08/passing-data-between-two-activities.html)

# c++ - 这个 cout 语句将如何运行

> ID：12336511
> 
> 赞同：0
> 
> 时间：2012-09-09T04:26:43.327
> 
> 标签：c++

```
int a[10][5];
for (int i = 0; i < 10; i++)
{
    for (int j = 0; j < 10; j++)
    {
        cout << i[j[a]];
        cout << j[i[a]];
    }
} 
```

*编辑*：假设值已经初始化为数组，那么这个 cout 有效吗？

请仅解释该`i[j[a]];`部分，而不管我只关心该声明的程序！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:47:37.747

```
cout << i[j[a]];
cout << j[i[a]]; 
```

在 C++ 中，该`X[Y]`符号在*词法上*等价于`*(X+Y)`：

> `[C++11: 5.2.1/1]:` *[..]*该表达式`E1[E2]`（根据定义）与`*((E1)+(E2))` *[..]*

这意味着`Y[X]`等价于，`*(Y+X)`这与[加法是可交换](http://en.wikipedia.org/wiki/Commutativity)的 相同。`*(X+Y)`

出于某种原因，作者决定通过编写这个令人困惑的代码来尝试“聪明”。

通过交换律和`X[Y]`单独的定义：

```
i[j[a]] => i[*(j+a)] => *(i+*(j+a)) => *(*(a+j)+i) => *(a[j] + i) => a[j][i]
j[i[a]] => j[*(i+a)] => *(j+*(i+a)) => *(*(a+i)+j) => *(a[i] + j) => a[i][j] 
```

那么，您的`cout`陈述相当于：

```
cout << a[j][i];
cout << a[i][j]; 
```

在任何情况下，循环都会尝试读取数组边界，因为数组`5`的每个元素中只有整数`a`，而您的内部循环会尝试一直到`10`.

其实际结果是不确定的，因此您可能会获得无声的成功、无声的失败、任意值、分段错误、断电、黑洞、圣诞节的小马、脚趾截肢或新自行车。

即使循环条件固定，请注意第一个语句在语义上是不正确的（假设您继续将第一个维度归因于外部循环，将第二个维度归因于内部循环）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T04:29:29.420

C 数组有一个奇怪的怪癖，允许通过“相反”方向访问它们。这深深植根于数组的指针算法。例如，`a[1]`等价于`*(a + 1)`。同样，`1[a]`等价于`*(1 + a)`。由于加法的交换性质，这非常有效。更多细节可以在[这里](https://stackoverflow.com/questions/381542/with-c-arrays-why-is-it-the-case-that-a5-5a?lq=1)找到。

有了这些知识，表达`i[j[a]]`可以分为两个不同的部分。由于您拥有的数组的多维性质，`j[a]`相当于which 将返回另一个数组，例如，我们将调用此返回的数组。然后你就有了相当于. 将它们重新组合在一起会告诉你这相当于. 实际上，这意味着这只是一种混淆的书写方式。`*(j + a)``p``i[p]``*(i + p)``i[j[a]]``*(i + *(j + a))``i[j[a]]``a[j][i]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T05:02:57.060

在 C/C++ 中，可以用整数索引为指针下标，也可以用指针为整数索引下标，含义（语义）完全相同。我不知道为什么疯狂的语法是有效的，但它确实如此，而且显然它会永远存在。

```
#include <stdio.h>

int main(int argc, char** argv)
{
  int i = 1, array[10];
  printf("%ld\n", &(i[array])-&(array[i]));
  return 0;
} 
```

输出：

```
0 
```

# java - 位运算——如何改变现有的颜色？

> ID：12336513
> 
> 赞同：2
> 
> 时间：2012-09-09T04:27:01.633
> 
> 标签：java, colors, operators, bit-manipulation, interpolation

我已经阅读了按位运算符 (& | ^) 并且我明白如果我这样做：

```
alpha = 0xFF000000 >> 24 ;
blue = 0xFF0000FF & 0x000000FF;
red = 0xFFFF0000>>16 & 0x000000FF;
green = 0xFF00FF00>>8 & 0x000000FF; 
```

然后我可以掩盖其他颜色，只有红色或蓝色（等......）组件，如果我要这样做

```
int color = alpha | blue | red | green; 
```

然后我可以说再次重新构建颜色。我很好奇的是，如果我想在 Java 中创建两种颜色之间的双线性插值会怎样。我将如何构建它？我想从标准绿色（0xFF00FF00）开始，以黑色（0xFF000000）结束，中间的颜色将从绿色变为深绿色，直到最终变为黑色。我认为我必须做一些事情，我创建一个从顶部开始为绿色的 bufferedImage，然后可能创建一个 for 循环来读取前一个像素的颜色，然后移动一些东西直到前一个颜色的新版本被创建等等。不幸的是，我不确定如何实现这一点，因为我理解按位运算和理论上的移位，但不确定如何将它们应用于此目的。任何帮助将不胜感激！先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T07:37:03.187

正如[EJP 所指出](https://stackoverflow.com/a/12336757/3713)的，掩码用于过滤掉颜色分量/通道之一（红色、绿色、蓝色）的值。这通常是您对位移/屏蔽操作所做的。你对得到的值所做的一切都是算术或更高级的数学。

颜色通道的范围是 0-255，或 0x00 - 0xFF（十六进制值）。要重建它，您需要将组件值位移回它们的位置。可以用简单的算术加法把它放在一起：

```
// Example values
int r = 255; // 0xFF
int g = 1;   // 0x01
int b = 15;  // 0x0F

// go back to original form:
                      //    A  R  G  B
int color = r << 16;  // 0x00.FF.00.00
color += g << 8;      // 0x00.FF.01.00
color += b;           // 0x00.FF.01.0F

// just add back the alpha if it is going to be full on
color = += 255 << 24; // 0xFF.FF.01.0F 
```

如果你想在颜色之间做一些插值，你需要对每个颜色分量分别进行插值，而不是将它们全部放在一个整数中。在某些情况下，将表示形式从 [0-255] 更改为十进制 [0.0f-1.0f] 也是一个好主意：

```
// Darken red value by 50%
int color = ...; // some color input
int mask = 0xFF;

int a = (color >> 24) & mask;
int r = (color >> 16) & mask;
int g = (color >> 8) & mask;
int b = color & mask;

// convert to decimal form:
float rDecimal = r / 255f; 
  // Let r: 0x66 = 102 => rDecimal: 0.4

// darken with 50%, basically divide it by two
rDecimal = r/2; 
  // rDecimal: 0.2

// Go back to original representation and put it back to r
r = (int)(rDecimal * 255); 
  // r: 51 = 0x33

// Put it all back in place
color = (a << 24) + (r << 16) + (g << 8) + b; 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T05:28:16.810

> 我明白，如果我这样做：

不，你根本不明白。在所有四种情况下，所有位移的结果`0xff`都是不言而喻的。alpha 蒙版是`0xff000000`，蓝色蒙版是`0xff`，红色蒙版是`0xff0000`，绿色蒙版是`0xff00`。这些是*掩码，*需要使用操作员将其应用于实际像素，`&`以屏蔽相关通道。您需要先了解这一点，然后才能走得更远。

# c++ - 调用方法时打印 Class::Method()

> ID：12336514
> 
> 赞同：0
> 
> 时间：2012-09-09T04:27:24.023
> 
> 标签：c++

是否有一些简单的方法可以让我在调用方法来获取类并将方法名称打印在屏幕上时.. 像这样：

```
> class1:method()
> class1:method4()
> class3:method2()
.... 
```

从某种意义上说，在每个方法的开头插入一个“cout”而不实际进行打字？

# php - 使用 PHP 和 mySQL 显示二维数组有困难

> ID：12336515
> 
> 赞同：1
> 
> 时间：2012-09-09T04:27:26.410
> 
> 标签：php, mysql, arrays

研究了一个小时。我放弃。我试图从 MySQL 表中填充数组后创建一个数组。

然后我想在表格顶部输出数组文本元素（表格标题）

```
$sqlRotations="SELECT id, rotationName FROM sched_rotations";
$resultRotations=mysql_query($sqlRotations);
$arrayRotations = array();
while($row_Rotation=mysql_fetch_assoc($resultRotations)){ 
  $arrayRotations[]=$row_Rotation;
} 
```

...然后我尝试将“rotationName”打印为表格列标题：

```
<table>
<tr>
<?
foreach( $arrayRotations as $key => $value){
echo "<td>Id: $key, Rotation:". $arrayRotations[$value]." </td>";
}
?>
</tr> 
```

不幸的是，这给了我以下 < td > 格式的输出：

Id：0，旋转：Id：1，旋转：Id：2，旋转：Id：3，旋转：Id：4，旋转：Id：5，旋转：Id：6，旋转：Id：7，旋转：Id： 8，旋转：Id：9，旋转：Id：10，旋转：

* * *

此外，如果我将 for 键值回显更改为：

```
foreach( $arrayRotations as $key => $value){
echo "<td>Id: $key, Rotation:". $value." </td>"; 
```

}

然后我得到这个输出：

Id: 0, Rotation:Array Id: 1, Rotation:Array Id: 2, Rotation:Array Id: 3, Rotation:Array Id: 4, Rotation:Array Id: 5, Rotation:Array Id: 6, Rotation:Array Id ：7，旋转：阵列 ID：8，旋转：阵列 ID：9，旋转：阵列 ID：10，旋转：阵列

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T04:33:07.843

您`foreach()`错误地使用了数组。

```
<?php
foreach($arrayRotations as $line){
   echo "<td>Id: " . $line['id'] . ' Rotation: '. $line['rotationName'] . '</td>';
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T04:34:23.880

这是你想要的？

```
<table>
<tr>
<th>Id</th>
<th>Rotation</th>
</tr>
<?php 
foreach($arrayRotations as $rotation)
{
   printf("<tr><td>%s</td> <td>%s</td></tr>", $rotation['id'], $rotation['rotationName');
}
?>
</table> 
```

# ruby-on-rails - Rails mysql 更新

> ID：12336519
> 
> 赞同：0
> 
> 时间：2012-09-09T04:27:41.597
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我对 Ruby on Rails 还很陌生，我来自 PHP，我意识到这不仅仅是降低语法那么简单，还有很多好的结构实践需要考虑。

虽然我目前的工作有效，但我几乎可以肯定我没有以最好的方式做到这一点。

这就是我正在做的事情。我正在通过 AJAX 跟踪点击并更新数据库中的记录以监控流行的接入点。

这是我的控制器：

```
class AjaxController < ApplicationController

  def track    
    elem = Tracking.where('element = ?', params[:element]).first
    if elem.nil?
      Tracking.create(:element => params[:element], :count => 0)
    else
      elem.count = elem.count + 1
      elem.save
    end
    render :text => 'ok'
  end

  def validate
    if request.xhr? && respond_to?(params[:callback])
      return self.send(params[:callback])
    end
    no_access
  end

  private

  def no_access
    redirect_to root_url
  end

end 
```

这是我的模型：

```
class Tracking < ActiveRecord::Base
  attr_accessible :element, :count
end 
```

跟踪表：

```
+-------------------------+
| id | element    | count |
+-------------------------+
| 1  | bazinga    |   3   |
--------------------------- 
```

如果可以重构某些东西，谁能引导我朝着正确的方向前进？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T06:34:47.720

我会看到一些关于 Rails 转换的重构。但是，如果您有任何特定原因，这些可以过度滚动。

*1 - 您的型号名称（我认为您是对的，请仔细检查表名）*

理想情况下，Rails 将使用复数形式的表格和单数形式的模型。所以你的桌子应该是`trackings`，你的模型应该是`Tracking`

*2 - 控制器*

由于您指的是您的跟踪模型，按照惯例，控制器名称应该是`TrackingsController`，

而且 Rails 使用 REST 方法，因此请尽量保留默认的 7 个控制器操作（只要它们在上下文中有意义）。默认 REST 控制器操作是

```
index

show

new

create

edit

update

destroy 
```

所以我认为你的点击可以匹配为`Trackings -> create`

并且可能 no_access 方法可以移动到 ApplicationController，因为它可以被任何控制器使用

*程序逻辑*

通常我们不会在控制器中编写域登录，因此您在控制器中的以下部分

```
elem = Tracking.where('element = ?', params[:element]).first
if elem.nil?
  Tracking.create(:element => params[:element], :count => 0)
else
  elem.count = elem.count + 1
  elem.save
end 
```

可以移动到模型中

```
class Tracking < ActiveRecord::Base
  attr_accessible :element, :count

  def self.track(params)
    #your creation and counter update login
  end

end 
```

在你的控制器中

```
def create
    Tracking.track(params)
    render :text => 'ok'
 end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T06:31:36.303

您的控制器可以从一些 RESTful 设计中受益。让你的控制器使用资源——AjaxController 不是这样的例子。

通过移动`no_access`到`ApplicationController`并添加[CanCan](https://github.com/ryanb/cancan)以进行授权来干燥您的代码。

您的模型很好，但您可能需要验证。并在架构中指定不为空。

最后，继续阅读其他人的代码。并继续编写自己的代码。你会及时好起来的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T17:18:15.947

除了sameera207所说的，您可能可以使用`find_or_create_`方法缩短查找或创建记录的过程：

```
Tracking.find_or_create_by_element(params[:element]) 
```

**编辑**

您可以使用以下方法处理增加的值：

```
tracking = Tracking.find_or_create_by_element(params[:element]) do |t|
  t.count = 1
end
tracking.count += 1
tracking.save 
```

# iphone - 使用 NSXMLParser 的 RSS 读取不起作用

> ID：12336521
> 
> 赞同：0
> 
> 时间：2012-09-09T04:27:56.830
> 
> 标签：iphone, xml, xcode, rss, nsxmlparser

我正在尝试为 wordpress 博客编写和 RSS 阅读器。我的新闻元素类如下所示：

```
@property (nonatomic, retain) NSString *title;
@property (nonatomic, retain) NSString *description;
@property (nonatomic, retain) NSString *link;
@property (nonatomic, retain) NSString *pubDate; 
```

我想创建 NewsElements 和 NSMutableArray。XMLParser 类如下所示：

XMLParser.h

```
@class NewsElement;

@interface XMLParser : NSObject
{
    BOOL storingCharacters;
}

@property (nonatomic, retain) NewsElement *newsElement;
@property (nonatomic, retain) NSMutableArray *newsFeed;
@property (nonatomic, retain) NSMutableString *currentElementValue;

-(XMLParser*) initXMLParser;

@end 
```

XMLParser.m

```
#import "XMLParser.h"
#import "NewsElement.h"

@implementation XMLParser

@synthesize newsElement, newsFeed, currentElementValue;

-(XMLParser*)initXMLParser{
    newsFeed = [[NSMutableArray alloc] init];

    return self;
}

-(void)parser:(NSXMLParser*)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{
    if([elementName isEqualToString:@"item"])
    {
        newsElement = [[NewsElement alloc] init];
    }
    else if ([elementName isEqualToString:@"title"] || [elementName isEqualToString:@"description"] || [elementName isEqualToString:@"link"] || [elementName isEqualToString:@"pubDate"])
    {
        [currentElementValue setString:@""];
        storingCharacters = YES;
    }
}

-(void)parser:(NSXMLParser*)parser foundCharacters:(NSString *)string{
    if(storingCharacters)
        [currentElementValue appendString:string];
}

-(void)parser:(NSXMLParser*)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if([elementName isEqualToString:@"item"])
    {
        if([newsFeed description] != nil)
        {
            [newsFeed addObject:newsElement];

        }
    }
    else if ([elementName isEqualToString:@"title"] || [elementName isEqualToString:@"description"] || [elementName isEqualToString:@"link"] || [elementName isEqualToString:@"pubDate"])
    {
        [newsElement setValue:currentElementValue forKey:elementName];
        storingCharacters = NO;
    }
}

@end 
```

当解析器完成时，我有一个包含 5 个元素的数组 - 但所有的值（标题、描述等）都是 nil ......使用调试器我可以看到我确实用真实数据设置了值。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T04:51:35.413

你需要实例化你的`NSMutableString`，你调用`appendString:`的是零。

```
-(XMLParser*)initXMLParser{
    self = [super init];
    if (self){
        newsFeed = [[NSMutableArray alloc] init];
        currentElementValue = [[NSMutableString alloc] init];
    }
    return self;
} 
```

# c# - 信用卡处理发生时等待页面

> ID：12336525
> 
> 赞同：1
> 
> 时间：2012-09-09T04:29:56.493
> 
> 标签：c#, asp.net, .net, credit-card

嗨，我正在建立一个网站，我们在其中进行信用卡交易。我使用 C# 在 Asp.net 中构建 Web 应用程序。我的问题是，当信用卡交易发生在网络服务的幕后时——我如何向客户显示一个页面，说明“信用卡处理正在进行，请稍候”。我只想显示一个信用卡交易正在发生的页面，这样客户就不会多次点击提交按钮。有人可以告诉我如何实现这一目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T04:58:55.250

最好的选择可能是进行异步 Web 服务调用。[Steve Wellens 的](http://weblogs.asp.net/stevewellens/)ASP.NET 博客上有一篇文章，描述[了如何从网页进行异步 Web 服务调用](http://weblogs.asp.net/stevewellens/archive/2010/04/02/calling-web-service-functions-asynchronously-from-a-web-page.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T05:00:33.587

在您的页面中创建一个`DIV`标签，其中包含您想要的所有文本、图形和样式，并将`display`属性设置为`none`并禁用提交按钮。如果`click`按钮启动长时间运行的进程，请将`display`属性设置为`block`以显示消息。当长时间运行的过程完成时，它返回的页面将替换此页面。您必须自己制定详细信息。

# ruby - 我的 print/gets 接收或输出的类型是否错误？

> ID：12336528
> 
> 赞同：0
> 
> 时间：2012-09-09T04:30:02.833
> 
> 标签：ruby, types, syntax, casting

这是我的代码：

```
print('What amount would you like to calculate tax for?  ')
subtotal = gets.chomp
taxrate = 0.078
tax = subtotal * taxrate
puts "Tax on $#{subtotal} is $#{tax}, so the grand total is $#{subtotal + tax}." 
```

第一个输出：`What amount would you like to calculate tax for?`

输入：`100`。

最终输出：`Tax on $100 is $, so the grand total is $100.`

我相信我应该得到一个税率`$7.79999999`和总计`107.7999999`。我想通过做一些事情来使代码更好一点，例如从输入中删除 $，如果用户错误地输入 $，并四舍五入到最接近的分。首先，我需要了解为什么我没有得到任何输出或添加，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T04:40:05.353

让我们看看你的代码：

```
subtotal = gets.chomp 
```

`gets.chomp`给你一个字符串，这样：

```
tax = subtotal * taxrate 
```

是使用[`String#*`](https://ruby-doc.org/core/String.html#method-i-2A)而不是相乘的数字：

> **str * 整数 → new_str**
> 
> 复制—返回一个新`String`的包含接收器的*整数*副本。

但是`taxrate.to_i`会给你零并`any_string * 0`给你一个空字符串。所以你得到的正是你所要求的，你只是在要求错误的东西。

您需要使用or转换`subtotal`为数字：[`to_i`](https://ruby-doc.org/core/String.html#method-i-to_i)[`to_f`](https://ruby-doc.org/core/String.html#method-i-to_f)

```
subtotal = gets.to_f # Or gets.to_i 
```

[`chomp`](https://ruby-doc.org/core/String.html#method-i-chomp)如果使用`to_i`or ，则不需要`to_f`，这些方法将自行忽​​略尾随空格。

这应该给你一个合理的价值`tax`。

# android - 打开 GPS 时出现空指针异常

> ID：12336529
> 
> 赞同：0
> 
> 时间：2012-09-09T04:30:22.453
> 
> 标签：android, android-intent

您好，我首先检查 LocationManager 是否启用了 GPS

```
 LocationManager locationManager = (LocationManager) mContext
                .getSystemService(LOCATION_SERVICE);

        // getting GPS status
        isGPSEnabled = locationManager
                .isProviderEnabled(LocationManager.GPS_PROVIDER); 
```

我已经使用了许可

```
 <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

现在如果没有启用 GPS，我打开一个对话框说你要启用 GPS？

```
 final AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setMessage("Yout GPS seems to be disabled, do you want to enable it?")
       .setCancelable(false)
       .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
           public void onClick(@SuppressWarnings("unused") final DialogInterface dialog, @SuppressWarnings("unused") final int id) {
               startActivity(new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS));
           }
       })
       .setNegativeButton("No", new DialogInterface.OnClickListener() {
           public void onClick(final DialogInterface dialog, @SuppressWarnings("unused") final int id) {
                dialog.cancel();
           }
       });
final AlertDialog alert = builder.create();
alert.show(); 
```

但我在我的 logcat 中得到空指针异常如下

```
 09-09 09:46:04.599: W/System.err(935): java.lang.NullPointerException
    09-09 09:46:04.599: W/System.err(935):  at android.content.ContextWrapper.getSystemService(ContextWrapper.java:363)
    09-09 09:46:04.599: W/System.err(935):  at com.android.internal.app.AlertController$AlertParams.<init>(AlertController.java:742)
    09-09 09:46:04.599: W/System.err(935):  at android.app.AlertDialog$Builder.<init>(AlertDialog.java:283)
    09-09 09:46:04.599: W/System.err(935):  at android.app.AlertDialog$Builder.<init>(AlertDialog.java:274)
    09-09 09:46:04.599: W/System.err(935):  at com.eheuristics.android.diegodeals.googleplacesandmaps.GPSTracker.turnGPSOn(GPSTracker.java:110)
    09-09 09:46:04.599: W/System.err(935):  at com.eheuristics.android.diegodeals.googleplacesandmaps.GPSTracker.getLocation(GPSTracker.java:63)
    09-09 09:46:04.599: W/System.err(935):  at com.eheuristics.android.diegodeals.googleplacesandmaps.GPSTracker.<init>(GPSTracker.java:45)
     09-09 09:46:04.599: W/System.err(935):     at com.eheuristics.android.diegodeals.NearestLocation.onCreate(NearestLocation.java:79)
   09-09 09:46:04.599: W/System.err(935):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
   09-09 09:46:04.599: W/System.err(935):   at android app.ActivityThread.performLaunchActivity(ActivityThread.java:1722)
   09-09 09:46:04.599: W/System.err(935):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784)
   09-09 09:46:04.599: W/System.err(935):   at android.app.ActivityThread.access$1500(ActivityThread.java:123)
    09-09 09:46:04.599: W/System.err(935):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939)
   09-09 09:46:04.599: W/System.err(935):   at android.os.Handler.dispatchMessage(Handler.java:99)
    09-09 09:46:04.599: W/System.err(935):  at android.os.Looper.loop(Looper.java:130)
    09-09 09:46:04.609: W/System.err(935):  at android.app.ActivityThread.main(ActivityThread.java:3835)
   09-09 09:46:04.609: W/System.err(935):   at java.lang.reflect.Method.invokeNative(Native Method)
   09-09 09:46:04.609: W/System.err(935):   at java.lang.reflect.Method.invoke(Method.java:507)
   09-09 09:46:04.609: W/System.err(935):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T06:36:36.327

尝试使用 getApplicationContext() 而不是 mContext。

# java - 多线程合并排序问题

> ID：12336531
> 
> 赞同：1
> 
> 时间：2012-09-09T04:31:29.213
> 
> 标签：java, multithreading, mergesort

我正在尝试编写一个多线程合并排序，但我遇到了一些非常令人困惑的问题。我不完全了解线程如何共享/使用变量的规则......

例如，如果在一个可运行的类中，我创建了该可运行的另一个实例并将我的数组之一作为参数传递给它，那么该类的编辑是否会转移？看起来好像他们这样做了，但也似乎我有意外的行为。

这是我的代码：

```
public class PSort implements Runnable {

private int [] Arr;
private int begin;
private int end;

public void run () {
    // Base Case - Insertion sort
    if(this.end-this.begin <= 10) {
        InsertionSort();
    }
    else {
        int left_start  = this.begin;
        int left_end    = this.begin + (this.end-this.begin)/2;
        int right_start = this.begin + (this.end-this.begin)/2 + 1;
        int right_end   = this.end;

        Thread t1 = new Thread(new PSort(this.Arr, left_start, left_end));
        Thread t2 = new Thread(new PSort(this.Arr, right_start, right_end));
        t1.start();
        t2.start();

        try {
            t1.join();
            t2.join();

            merge(left_start, left_end, right_start, right_end);
        } catch (Exception e) {}
    }
}

public PSort (int[] A, int begin, int end) {
    this.Arr = A;
    this.begin = begin;
    this.end = end;
    System.out.println("New thread: " + this.begin + " " + this.end);
}

public static void ParallelSort (int[] A, int begin, int end) {

    PSort psort = new PSort(A, begin, end);
    Thread thread = new Thread(psort);

    thread.start();

    try {
        thread.join();
        psort.printArray();
    } catch (InterruptedException e) {}
}

public void printArray() {
    int count = 0;
    for(int x = this.begin; x < this.end; x++) {
        if(count < 10) {
            System.out.print(Arr[x] + " ");
            count++;
        }
        else {
            count = 1;
            System.out.print("\n" + Arr[x] + " ");
        }
    }
}

private void InsertionSort () {
    for(int x = this.begin; x < this.end; x++) {
        int currentNum = this.Arr[x];
        int hole = x;
        while((hole > 0) && (this.Arr[hole-1] > currentNum)) {
            this.Arr[hole] = this.Arr[hole-1];
            hole = hole - 1;
        }
        this.Arr[hole] = currentNum;
    }
}

private void merge (int left_start, int left_end, int right_start, int right_end) {
    /*
    int length = right_end - left_start;

    int[] temp = new int[length];
    int leftP = left_start;
    int rightP = right_start;
    int index = 0;

    while((leftP <= left_end) && (rightP < right_end)) {
        if(Arr[leftP] < Arr[rightP]) {
            temp[index++] = Arr[leftP++];
        }
        else {
            temp[index++] = Arr[rightP++];
        }
    }   
    while(leftP <= left_end) {
        temp[index++] = Arr[leftP++];
    }
    while(rightP < right_end) {
        temp[index++] = Arr[rightP++];
    }

    System.arraycopy(temp, 0, Arr, left_start, length);
    */

}
} 
```

现在，我用一个大小为 40 的数组调用 PSort.ParallelSort，其中填充了随机整数 0-9，这是我得到的输出：

```
New thread: 0 40
New thread: 0 20
New thread: 21 40
New thread: 0 10
New thread: 11 20
New thread: 21 30
New thread: 31 40
0 1 1 2 2 2 6 7 7 8 
8 3 3 3 4 4 5 5 6 7 
9 2 3 3 3 4 7 8 9 9 
2 2 6 7 7 7 8 8 9 9 
```

请注意，我已经注释掉了例程的“合并”部分，因此我希望每个单独的输出行都能正确排序，但事实并非如此。我自己测试了 InsertionSort，它似乎从来没有失败过，所以这里似乎存在一些我完全忽略的并发问题。

注意：我意识到这里有一些更严重的问题，因为更高的数字被加权到整个数组的最后两行，即使我没有合并......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T05:57:32.243

该错误在您的 InsertionSort 方法中（顺便说一下，它应该以小写字母开头）：

```
int hole = x;
while ((hole > 0) && /* ... */) {
    // ...
    hole--;
} 
```

所以你从 x 开始，它在分配的段内，但又回到**0**，所以所有线程最终都写在相同的段上。是的，数据在线程*之间*共享，这就是多线程时的难点。

# algorithm - Big-O 和 Big-theta 可以互换使用吗？

> ID：12336532
> 
> 赞同：0
> 
> 时间：2012-09-09T04:31:43.053
> 
> 标签：algorithm, big-o, notation

我正在研究 Thomas H. Corman 的《算法导论》一书。我正在研究渐近符号。一件事困扰着我，因为作者说：

f(n)=Big-theta(g(n)) 意味着 f(n)=Big-O(g(n)) ，**因为 Big-theta 表示法比 O-表示法更强。** **如何？？**

并且作者还表示*(an^2+bn+c)*，其中 a>0，在*Big-theta(n^2)*中也表明这种二次函数在*Big-O(n^2)*中。**如何？？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T06:02:54.137

我认为您对这些条款有些困惑。

`f(n) = O(g(n))`- 表示这`g(n)`是 的上限`f(n)`。正式存在 const `n0, c`，这样对所有的`n>n0, f(n)<= c*g(n)`。你可以把它想象成两个图，`c*g(n)`比`f(n)`. 例如 ：`5n^2+n = O(n^2)`

为什么 ？

因为如果，例如，`n0=10`and `c=10`，那么对于所有`n>n0`-`5n^2+n <= 10*n^2`

`f(n) = Theta(g(n))`- 表示`g(n)`是 的上限和下限`f(n)`。正式存在 const `n0, c1, c2`，这样对所有的`n>n0, c1*g(n)<=f(n)<=c2*g(n)`。您可以将其想象为三个图形，例如`f(n)`介于`c1*g(n)`和之间`c2*g(n)`。例如 ：`5n^2+n = Theta(n^2)`

为什么 ？

因为如果，例如，`n0=100`然后`c1=1,c2=100`对于所有`n>n0`-`n^2<=5n^2+n<=100*n^2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T05:28:16.193

（在本书的 V1 中）f() 在 Theta(g(n)) 中的定义是存在正常数 C1 和 C2 使得 0 <= C1g(n) <= f(n) <= C2g( n) 对于所有 n >= N0

O(g(n)) 的定义是存在一个 C 使得 0 <= f(n) <= Cg(n) for all n >= N0

所以如果你能找到足够大的常数 N0、C1 和 C2 来满足第一个定义，你可以使用常数 N0 和 C = C2 来满足第二个定义。因此，第一个定义比第二个定义更强，因为任何满足第一个定义的东西都满足第二个定义——关于二次的业务是这种情况的一个特例。

# html - 将视频嵌入代码

> ID：12336539
> 
> 赞同：0
> 
> 时间：2012-09-09T04:34:46.667
> 
> 标签：html, video, video-embedding

我现在一直在尝试这样做 4 并且无法弄清楚。我可以用 quicktime 嵌入视频，但现在最新版本确实有问题。有没有其他方法可以在不使用 quicktime 或 windows 播放器的情况下嵌入视频？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T07:22:14.610

您可以尝试 HTML5 视频标签，例如；

```
<video width="320" height="240" controls="controls">
  <source src="movie.mp4" type="video/mp4" />
  <source src="movie.ogg" type="video/ogg" />
  Your browser does not support the video tag.
</video> 
```

***[这](http://www.w3schools.com/html5/tryit.asp?filename=tryhtml5_video_all)***是一个现场演示。

您可以查看**[将视频嵌入网页的 10 大方法](http://www.onextrapixel.com/2012/02/29/top-10-ways-to-embed-video-into-a-web-page/)**和**[4 种新的视频嵌入方法](http://en.blog.wordpress.com/2007/02/05/4-new-ways-to-embed-video/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T04:39:17.947

Html5 的视频标签。当然，浏览器必须支持它，但据我所知，这是除了 Adob​​e 的 Flash Player 之外的唯一其他方式：

```
<video width="200" height="200" controls="controls">
    <source src="some_movie.mp4" type="video/mp4" />
    Video tag unsupported.
</video> 
```

很好的例子：[http ://www.html5rocks.com/en/tutorials/video/basics/](http://www.html5rocks.com/en/tutorials/video/basics/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T13:53:40.100

使用“视频”标签确实有其局限性。例如：您无法使用标签中的参数调整视频大小，因此您只能构建适合您要放置它的容器的视频。否则，视频将严格按照原始纵横比调整大小。

对于更灵活的网站视频播放器，您可能希望从 jQuery 或其他风格的视频播放器中进行选择，我建议您查看此问题中提供的答案：[https ://stackoverflow.com/questions/4697556/ best-html5-video-player](https://stackoverflow.com/questions/4697556/best-html5-video-player)其中，接受的答案是指 Sublimevideo，但投票最多的答案（今天）包括下一个列表：

> 查看这些链接：
> 
> 1.  [http://videojs.com/](http://videojs.com)
>     
>     
> 2.  [http://www.longtailvideo.com/support/jw-player/jw-player-for-html5](http://www.longtailvideo.com/support/jw-player/jw-player-for-html5)
>     
>     
> 3.  [http://sublimevideo.net/](http://sublimevideo.net/)
>     
>     
> 4.  [http://www.dailymotion.com/html5](http://www.dailymotion.com/html5)
>     
>     
> 5.  [http://www.html5video.org/kaltura-html5/](http://www.html5video.org/kaltura-html5/)
>     
>     
> 6.  [http://www.youtube.com/html5](http://www.youtube.com/html5)
>     
>     
> 7.  [http://vimeo.com/blog:268](http://vimeo.com/blog:268)
>     
>     
> 8.  [http://flarevideo.com/](http://flarevideo.com/)
>     
>     
> 9.  [http://www.mediafront.org/project/osmplayer](http://www.mediafront.org/project/osmplayer)
>     
>     
> 10.  [http://darkonyx.web-anatomy.com](http://darkonyx.web-anatomy.com)

所有这些都很容易实现。不像简单地编写标签和填充参数那么容易，但如果您希望灵活/自定义，其中许多都是不错的选择。

祝你好运！

# c - 整数显示为 ascii？

> ID：12336541
> 
> 赞同：0
> 
> 时间：2012-09-09T04:36:23.457
> 
> 标签：c, arrays, ascii

我正在尝试使用 int 类型的嵌套数组创建一个二维网格。网格中的每个元素都将设置为 -9 到 15 之间的随机值。但是，放置在网格中的整数将显示为它们的 ASCII 等效值。此外，每个元素都是相同的随机整数，而不是完全随机的。我该如何解决这些问题？感谢你的帮助！

```
#define ROWS 5
#define COLS 5

int main(void)
{

    int game_board[ROWS][COLS] = {0};
    initialize_game_board(game_board);
    display_board(game_board);
}

void initialize_game_board (int board[ROWS][COLS])
{

    int rows = 0, columns = 0, rand_int = 0;
    srand( time(NULL) );
    rand_int = (rand() % 24) - 9;

    for (rows = 0; rows < ROWS; rows++)
    {
        for (columns = 0; columns < COLS; columns++)
        {
            board[rows][columns] = rand_int;
        }
    }
}

void display_board(int board[ROWS][COLS])
{

    int row = 0, column = 0;

    printf ("\n%3d", row);
    for (row = 1; row < ROWS; row++)
    {
        printf ("%2d", row);
    }
    printf ("\n");

    for (row = 0; row < ROWS; row++)
    {
        printf ("%-2d", row);
        for (column = 0; column < COLS; column++)
        {
            printf ("%-2c", board[row][column]);
        }
        printf ("\n");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T04:44:36.347

您将 game_board[ROWS][COLUMNS] 声明为整数数组，然后在使用 printf 时使用 %c。

您可以将其声明为字符数组，并保留您的 %c（但您必须更改您的函数为每个数字生成 ASCII 字符），或者您可以将 display_board 最内层循环中的 printf 更改为 %d。

Also, as a previous poster said, you only called random once and assigned it to all cells. Call random for each individual cell.

# php - 使用 PHP 渲染和打印内容：PDF、HTML 还是...？

> ID：12336543
> 
> 赞同：1
> 
> 时间：2012-09-09T04:36:45.603
> 
> 标签：php, html, pdf, printing, render

我正在编写一个系统来管理活动中的团队，我需要为活动中的每个人打印徽章。

我还需要打印其他东西（带有很多自定义信息），我想知道我该怎么做才能将每​​个徽章或时间表正确地放在一个页面中（打印时不必拆分它......）。

什么是更好的使用和处理？

HTML、PDF 或者这个问题有其他解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T07:09:13.213

我说使用 HTML 并创建一个专门用于打印的 CSS 样式表。

```
<link rel="stylesheet" type="text/css" media="print" href="print.css" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T04:40:21.643

我认为您最好在 php 中生成 PDF，然后从浏览器中打印出来。查看 mPDF。您可以使用 css 和 html 设计徽章，然后它可以为您将 HTML 转换为 PDF。

如果您在 Windows 中运行 php，您甚至可以查看打印机扩展以直接从 PHP 打印。

# javascript - 全局windows热键在chrome窗口最小化时调用js函数

> ID：12336544
> 
> 赞同：1
> 
> 时间：2012-09-09T04:37:13.330
> 
> 标签：javascript, windows, google-chrome, google-chrome-extension, autohotkey

我有一个网络播放器应用程序，我想用快捷键将其静音或取消静音。

我想在 chrome 窗口最小化时执行此操作，例如，如果我必须在 Skype 上接听电话，而不是最大化窗口并按下静音按钮，我只需按下热键和最小化的 chrome 窗口与我的网络播放器应用程序，它将被静音。

我可以轻松地为上述组合创建一个 javascript 事件以使播放器静音，我只需要一个解决方案来使其静音，同时播放器的 chrome 窗口被最小化并且失焦。

我已经尝试了 chrome 的“Shortcut Manager 0.7.9”扩展，但它做了我已经可以在 javascript 中做的事情，如果窗口被最小化，它就不起作用。

我可以接受第 3 方软件，也许是一个将我的热键发送到上述 chrome 浏览器的 c++ 软件，也许是一个自动热键 (.ahk) 脚本？或者也许是在窗口最小化时可以工作的 chrome 扩展。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T07:36:48.937

由于您似乎知道所涉及的技术细节，因此我将向您总结一下我是如何在 Windows 上使用 Chrome 为 Pandora 做到这一点的。

我编写了一个自动热键脚本（ahk），它监听热键组合并执行一个 php 脚本，该脚本反过来修改数据库值（或可以写入文件）。然后，我编写了一个在网页上运行的油脂猴子脚本，以不断地向 localhost 执行 jsonp 请求，这与数据库中的值相呼应。脚本会做出相应的反应，整个系统可以完美运行，尽管可能会占用一些系统资源。您也可以使用节点 js 而不是 php。

# xaml - Xaml 不知道在不同的程序集中定义了哪些对象

> ID：12336546
> 
> 赞同：3
> 
> 时间：2012-09-09T04:37:28.243
> 
> 标签：xaml

当我在一些非程序集中添加一个类并在 UI`UI`中使用它时，会出现以下错误：`xaml``assembly`

```
Provide value on 'System.Windows.StaticResourceExtension' threw an exception.' Line number '22' and line position '55 
```

内部异常：

```
Could not load file or assembly 'XXX, PublicKeyToken=null' or one of its dependencies. The system cannot find the file specified.":"XXX, PublicKeyToken=null 
```

堆栈跟踪： `at System.Windows.Markup.XamlReader.RewrapException(Exception e, IXamlLineInfo lineInfo, Uri baseUri) at System.Windows.Markup.WpfXamlLoader.Load(XamlReader xamlReader, IXamlObjectWriterFactory writerFactory, Boolean skipJournaledProperties, Object rootObject, XamlObjectWriterSettings settings, Uri baseUri) at System.Windows.Markup.WpfXamlLoader.LoadBaml(XamlReader xamlReader, Boolean skipJournaledProperties, Object rootObject, XamlAccessLevel accessLevel, Uri baseUri) at System.Windows.Markup.XamlReader.LoadBaml(Stream stream, ParserContext parserContext, Object parent, Boolean closeStream) at System.Windows.Application.LoadComponent(Object component, Uri resourceLocator) at Pouyansoft.SellEngineering.MVVM.WPF.Letters.View.SelectLetterTemplateView.InitializeComponent() in d:\NirooTeamProject\NirooTransTeamProject\SellEngineering\Pouyansoft.SellEngineering.MVVM.WPF.Letters\View\SelectLetterTemplateView.xaml:line 1 at Pouyansoft.SellEngineering.MVVM.WPF.Letters.View.SelectLetterTemplateView..ctor() in D:\NirooTeamProject\NirooTransTeamProject\SellEngineering\Pouyansoft.SellEngineering.MVVM.WPF.Letters\View\SelectLetterTemplateView.xaml.cs:line 23`

有趣的是，如果我只是在其中某处创建提到的对象的单个实例，`Code Behind`它就可以正常工作。

# android - Android 上的 OpenCV 支持

> ID：12336553
> 
> 赞同：2
> 
> 时间：2012-09-09T04:40:27.810
> 
> 标签：android, opencv, apk

我必须在 Android 上做一些对象检测项目。所以，我需要为此使用openCV。但是，首先，我希望从 Android 上的 openCV 中的“Hello World”类程序开始。为此，我按照[这里](http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/android_binary_package.html)的教程进行操作。示例代码连同 openCV zip 文件在 Eclipse 上运行良好。但是，在 Android 设备上尝试相同的操作时，它会要求 openCV 库。显然，这对任何用户来说都是非常忙碌的。他希望把所有东西都放在一个地方。

来自设备的消息“ `OpenCV Manager Package was not found! Try to install it ?`”

那么，有什么方法可以将 openCV 库也包含在我的应用程序的 .apk 文件中，以便用户安装我的应用程序后一切正常。因为，我是 Android 新手，所以这个问题对你来说似乎很模糊。所以，如果我在问这个问题时不清楚，请发表评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T06:39:35.317

到目前为止，您必须使用静态初始化。这个页面上有一个关于这个的教程

[http://docs.opencv.org/trunk/doc/tutorials/introduction/android_binary_package/dev_with_OCV_on_Android.html#application-development-with-static-initialization](http://docs.opencv.org/trunk/doc/tutorials/introduction/android_binary_package/dev_with_OCV_on_Android.html#application-development-with-static-initialization)

来源：[https ://groups.google.com/forum/#!msg/android-opencv/dHfQsYTXovs/XnW_-8t53dIJ](https://groups.google.com/forum/#!msg/android-opencv/dHfQsYTXovs/XnW_-8t53dIJ)

> 安装/初始化过程将在未来得到改进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T05:31:53.360

你有两个选择：

1.  使用静态初始化的应用程序开发。这列在教程页面的底部。如果您正在修改 OpenCV 代码库或需要低级性能，则必须了解 Android NDK 和 JNI。下一页是使用 C++ 和 OpenCV 的教程：[使用带有 Android 二进制包的 C++ OpenCV 代码](http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/android_binary_package_using_with_NDK.html#)。

2.  使用 OpenCV 管理器应用程序。OpenCV 群里有一个帖子：[OpenCV 2.4.2 出来了！](https://groups.google.com/forum/?fromgroups=#!topic/android-opencv/bfmUrIu0z8M)这解释了他们决定采用单独的 APK 路线。我认为幻灯片：[Open CV Android Manager](https://docs.google.com/a/itseez.com/presentation/d/1EO_1kijgBg_BsjNp2ymk-aarg-0K279_1VZRcPplSuk/present#slide=id.p)解释得很好。短版，使其成为一个通用库，以便每个应用程序没有完全相同的代码，同时避免应用程序具有 OpenCV 的 ARM、x86、MIPS 副本，并在有新代码时为所有应用程序更新一次 OpenCV。

# php - PHP不发送POST数据

> ID：12336555
> 
> 赞同：1
> 
> 时间：2012-09-09T04:41:17.057
> 
> 标签：php, html, session, http-post

我终于让我的注册页面的第一页工作了。在继续下一页之前，用户**必须选择三个选项之一。**我现在遇到的问题*是*第一页没有将数据发送到下一页。这是代码

注册_1.php：

```
$reg_type = "";
if ($_SERVER["REQUEST_METHOD"] == "POST") {
    if (!empty($_POST["Reg_type"])) {
        //$reg_type=$_POST["Reg_type"];
        //header('Location: Registration_2.php?rtype='.$reg_type);
        $reg_type=$_POST["Reg_type"];
        header('Location: Registration_2.php');
    }
}
?>

<form name="frmtype" action="<?php echo htmlspecialchars($_SERVER["PHP_SELF"]);?>" method="post" >
<input type="radio" name="Reg_type" value="1"/> Registering myself with credit card or bank account <br/>
<input type="radio" name="Reg_type" value="2"/> Registering multiple people using credit card or bank account <br/>
<input type="radio" name="Reg_type" value="3"/> Registering multiple people using a purchase order <br/>
<input type="submit" name="Submit" value="Submit" />
<?php
if(isset($_POST["Submit"]) && !isset($_POST["Reg_type"]))
    echo "Please select an option";
?>
</form> 
```

注册_2.php

```
<?php
$regtype=$_POST["Reg_type"];

echo "regtype value is:" . $regtype;
if($regtype==1) {
?> 
```

但是 regtype 是空白的，这意味着我没有从上一页获得任何数据。谁能告诉我问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T04:52:30.350

```
session_start();
$reg_type=$_POST["Reg_type"];
$_SESSION['cust_type'] = $reg_type; 
```

在任何页面中，

```
session_start();
echo $_SESSION['cust_type']; 
```

如需更多信息，

[http://matthom.com/archive/2005/02/19/php-passing-variables-across-pages](http://matthom.com/archive/2005/02/19/php-passing-variables-across-pages)

[http://www.plus2net.com/php_tutorial/variables.php](http://www.plus2net.com/php_tutorial/variables.php)

[PHP 将变量传递到下一页](https://stackoverflow.com/questions/871858/php-pass-variable-to-next-page)

[http://mrarrowhead.com/index.php?page=php_passing_variables.php](http://mrarrowhead.com/index.php?page=php_passing_variables.php)

[http://php.net/manual/en/reserved.variables.session.php](http://php.net/manual/en/reserved.variables.session.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T04:48:52.070

这是因为您正在执行重定向，因此帖子数据不再存在。

你有几个选择。你可以做一个包含，而不是做一个重定向。

您可以存储数据（会话、数据库等）

您可以将数据附加到重定向

`header('Location: Registration_2.php?Reg_type=' . $_POST['Reg_type');`

然后在 Registration_2 上使用 $_GET 而不是 post。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T04:46:38.933

您将表单发布到 page1，然后重定向到 page2。由于重定向，Page2 无法访问已发布的数据（未携带该帖子）。

您应该做的是处理 page1 中的数据并在重定向之前将其存储（例如，在会话中，或使用您已注释掉的查询字符串）。

另请注意，当您使用 调用重定向时`header`，请确保您也`exit`或`die`之后立即像[php 文档](http://php.net/manual/en/function.header.php)中提到的那样（因为您不能保证页面将在那里停止处理）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T04:46:48.310

首先，当您使用`header`重定向时，POST 变量会丢失。您需要使用 GET 传递变量，以便在 Registration_2.php 上检索它们。

注册_1.php

```
//...
header('Location: Registration_2.php?Reg_type=' . $_POST["Reg_type"]);
//... 
```

和Registration_2.php：

```
$regtype=$_GET["Reg_type"];

echo "regtype value is:" . $regtype; if($regtype==1) { 
```

# ios - '@' 标记 main.m 之前的预期表达式

> ID：12336557
> 
> 赞同：2
> 
> 时间：2012-09-09T04:42:00.860
> 
> 标签：ios, cocos2d-iphone, admob, adwhirl

我在我的 cocos2d 应用程序中添加了一个`GoogleAdMobAdsSdkiOS-6.1.4`SDK 以集成 AdWhirl。添加此 Google SDK 时，出现以下错误：

> '@' 标记 main.m 之前的预期表达式

这是代码的样子：

```
int main(int argc, char *argv[]) {
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil,
                                 NSStringFromClass([AppDelegate class]));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:10:26.963

您确定您使用的是 4.2 或更高版本的 XCode 吗？我认为`@autoreleasepool`是一种较新的语法。如果您的编译器设置为 GCC，这也将不起作用。`NSAutoreleasePool`如果这些都不起作用，您也可以使用旧语法创建自己的语法。

[您可以在此处查看](https://stackoverflow.com/questions/8553278/coreplot-expected-token-before-token)类似问题的另一个答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:04:32.400

您不需要从 Google 广告 sdk 添加 Add-ons 文件夹。

# php - 带有 div 类的 file_get_contents 不起作用

> ID：12336558
> 
> 赞同：1
> 
> 时间：2012-09-09T04:42:12.777
> 
> 标签：php, dom

我想根据 div 的类从 url 中提取数据。我正在使用这段代码

```
<?php
$doc = new DomDocument;
$doc->Load('http://placement.freshersworld.com/placement-papers/3i-Infotech/Placement-  Paper-Whole-Testpaper-18433/');
$doc->getElementsByClassName('company-contentdetailes');

echo $doc;
?> 
```

但我没有得到任何输出。我想使用数组以及一页中可能有 3-4 个类，我想提取类 company-contentdetailes 的所有数据

当我执行这个脚本时，我的错误日志中出现了很多错误

```
[09-Sep-2012 04:55:45 UTC] PHP Warning:  DOMDocument::load() [<a href='domdocument.load'>domdocument.load</a>]: Opening and ending tag mismatch: link line 143 and head in http://placement.freshersworld.com/placement-papers/3i-Infotech/Placement-Paper-Whole-Testpaper-18433/, line: 144 in /home/xxxxxxxxx/xxxxxx/test3.php on line 3
[09-Sep-2012 04:55:46 UTC] PHP Warning:  DOMDocument::load() [<a href='domdocument.load'>domdocument.load</a>]: EntityRef: expecting ';' in http://placement.freshersworld.com/placement-papers/3i-Infotech/Placement-Paper-Whole-Testpaper-18433/, line: 236 in /home/xxxxxxxxxx/xxxxxxx/test3.php on line 3
[09-Sep-2012 04:55:46 UTC] PHP Warning:  DOMDocument::load() [<a href='domdocument.load'>domdocument.load</a>]: EntityRef: expecting ';' in http://placement.freshersworld.com/placement-papers/3i-Infotech/Placement-Paper-Whole-Testpaper-18433/, line: 236 in /home/xxxxxxxxxx/test3.php on line 3
[09-Sep-2012 04:55:46 UTC] PHP Warning:  DOMDocument::load() [<a href='domdocument.load'>domdocument.load</a>]: EntityRef: expecting ';' in http://placement.freshersworld.com/placement-papers/3i-Infotech/Placement-Paper-Whole-Testpaper-18433/, line: 236 in / 
```

很快...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T04:46:15.813

1.  `getElementByClassName`不是真正的 DOM 方法。方法名称是`getElementsByClassName`（注意“元素”上的“s”）。

2.  `getElementsByClassName`不修改传入的 DOM 对象；它返回一组匹配的 DOM 元素。你必须对这个集合做一些事情（在这种情况下，可能循环通过它并打印结果）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T05:34:47.957

该文档不是有效的 XML，有几个 & 需要编码为`&amp;`未封闭的元元素。

# objective-c - 使用 XML 设计 iOS 模型视图控制器

> ID：12336561
> 
> 赞同：1
> 
> 时间：2012-09-09T04:43:46.973
> 
> 标签：objective-c, model-view-controller, ios5

我正在制作一个标签栏应用程序，其中有一个测验部分（用 XML 编写）。我试图符合 MVC 范式，所以我创建了一个解析器委托类，以及一个包含一组问题和一组相关答案的测验对象的类。我的问题是我的解析方法无法将它的测验对象发送回视图控制器。我需要为视图控制器设置一个委托来与解析器通信吗？或者我应该将视图控制器设置为解析器的委托，而不是解析器委托的单独类。

注意：我正在使用`NSXMLParser`..

非常感谢任何有关执行此操作的最佳方法的输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T06:22:52.483

您的问题是您的 UIViewController 在解析完成时已经创建，我通常会为此使用 NSNotifications。然后 UIViewController 可以等待 NSNotification 或者您的应用程序委托可以然后将其传递给您的 ViewController。或者，如果您支持 iOS4+，您可以使用委托回调或回调块。希望这能回答你的问题。

# haskell - 使用 Parsec 链接 CaseOf 语句的类型问题

> ID：12336562
> 
> 赞同：0
> 
> 时间：2012-09-09T04:43:50.847
> 
> 标签：haskell, types, parsec

我正在学习haskell，我目前的项目正在编写一个解析器来读取数据库的文本文件表示。

目前，我正在设置读取表格各个字段的代码。在文本文件中，字段如下所示：

```
name type flags format 
```

或这个：

```
name type       format 
```

这带来了不得不考虑存在或不存在标志的情况的麻烦。我在我的主要功能中解决了这个问题，如下所示：

```
main = case parse fieldsWithFlags "(test)" testLine of
        Left err  -> noFlags
        Right res -> print res
   where noFlags = case parse fieldsWithoutFlags "(test)" testLine of
                        Left err -> print err
                        Right res -> print res 
```

如果我理解正确，这会说“如果它是没有标志的行，请尝试解析它；否则，返回错误。” 它为我抛出的任何“testLine”打印正确的结果，如果两个选项都失败，则返回错误。但是，当我尝试将其提取到自己的功能中时，如下所示：

```
field :: Either ParseError Field
field = case parse fieldsWithFlags "(test)" testLine of
            Left err  -> noFlags
            Right res -> return Right res
        where noFlags = case parse fieldsWithoutFlags "(test)" testLine of
                           Left err -> return Left err
                           Right res -> return Right res
main = case field of
       Left err -> print err
       Right res -> print res 
```

GHC 给了我：

```
haskellParsing.hs:58:26:
Couldn't match expected type `Either ParseError Field'
with actual type `b0 -> Either b0 b0'
In the expression: noFlags
In a case alternative: Left err -> noFlags
In the expression:
  case parse fieldsWithFlags "(test)" testLine of {
    Left err -> noFlags
    Right res -> return Right res } 
```

我已经玩了很多，但就是无法让它工作。我确信有一种更清晰的方法可以做到这一点，因此欢迎提出任何建议 - 但我也想了解为什么这不起作用。

完整代码位于： http: [//pastebin.com/ajG6BkPU](http://pastebin.com/ajG6BkPU)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T05:56:27.440

你不需要`return`在你的情况下。一旦你包裹了一些东西`Left`或者`Right`它在`Either`; 既然你只需要一个`Either ParseError Field`，`Left`并且`Right`不需要一个额外的`return`。

此外，您应该能够`parseFields`显着简化您的工作。您可以编写一个如下所示的新解析器：

```
fields = try fieldsWithFlags <|> fieldsWithoutFlags 
```

这样做是运行第一个，如果失败，则回溯并运行第二个。这`try`很重要，因为这是启用回溯行为的原因。您必须回溯，因为`fieldsWithFlags`消耗了您关心的一些输入。

现在你应该可以`fields`在你的`main`函数中使用了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T18:05:14.777

由于没有标志的形式几乎与有标志的形式相同（只是缺少标志），因此可以将替代方案下推到标志可能出现的位置。通过这种方式，您可以避免回溯名称并输入 with-flags，只是为了在 without-flags 中再次解析它们。我们可以像这样组合使用和不使用字段解析器：

```
fields = do
  iName <- getFieldName
  spaces
  iType <- getDataType
  spaces
  iFlag <- option "" $ try getFlag
  spaces
  iFormat <- getFormat
  newline -- this was only present in without flags, was that intended?
  return $ Field iName iType iFlag iFormat 
```

# jquery - 拖放后jquery增量变量

> ID：12336563
> 
> 赞同：1
> 
> 时间：2012-09-09T04:44:32.350
> 
> 标签：jquery, drag-and-drop, increment

在将每个可拖动元素拖放到可放置的 div 上后，我试图将变量加一。一旦达到所需的值，一些 css 就会改变。我奇迹般地获得了所有的拖放功能，但是，这种增加的事情让我陷入了困境。谁能看到我在这里缺少的东西？

这是我的小提琴：http: [//jsfiddle.net/KzDLA/10/](http://jsfiddle.net/KzDLA/10/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T05:07:24.360

通过重新安排你的功能让它工作`picDrop`。

[http://jsfiddle.net/patrickmarabeas/KzDLA/11/](http://jsfiddle.net/patrickmarabeas/KzDLA/11/)

# date - 如何在sqlite中将字符串日期转换为日期格式

> ID：12336565
> 
> 赞同：1
> 
> 时间：2012-09-09T04:44:39.683
> 
> 标签：date, datetime, sqlite

我需要找到平均年龄，但我的出生日期以月、日、年（例如：-May,2,1986）格式存储在我的 sqlite 数据库中。

如何从 May,2,1986 转换为日期格式以查找年龄？

问候尼基尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T08:52:50.207

此解决方案仅考虑年份，而不是月份 + 日期（您可以添加到其中）。

```
SELECT
   DATE('now') -
   CAST(
      SUBSTR(birth_date,-4) || '-' ||
      CASE SUBSTR(birth_date,0,LENGTH(birth_date)-8)
         WHEN 'January' THEN 1
         WHEN 'February' THEN 2
         WHEN 'March' THEN 3
         WHEN 'April' THEN 4
         WHEN 'May' THEN 5
         WHEN 'June' THEN 6
         WHEN 'July' THEN 7
         WHEN 'August' THEN 8
         WHEN 'September' THEN 9
         WHEN 'October' THEN 10
         WHEN 'November' THEN 11
         WHEN 'December' THEN 12
      END || '-' ||
      SUBSTR(birth_date, 6,1)
   AS DATE)
FROM foo; 
```

这会给你`26.0`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T04:54:55.010

试试这个声明 @dob varchar(200) set @dob = 'May,2,1986' select convert(datetime, @dob)

如果这不起作用，您将需要对年月日进行子串化，然后将它们一起分配给一个变量并减去当前日期（getdate（））以获得您的年龄。

# node.js - 带有茉莉花节点的 Travis-CI

> ID：12336566
> 
> 赞同：10
> 
> 时间：2012-09-09T04:44:52.247
> 
> 标签：node.js, travis-ci, jasmine-node

我正在尝试让 travis-ci 使用 jasmine-node 测试我的 nodejs 模块。当我从命令行运行测试时，它们都通过了，但无论出于何种原因，Travis 总是将我的构建报告为失败。我的 .travis.yml 看起来像这样：

```
language: node_js
node_js:
    - 0.6
    - 0.8 
```

我的 package.json 看起来像这样：

```
"scripts": {
    "test": "jasmine-node tests/*.spec.js"
} 
```

我尝试将 before_script 添加到我的 travis.yml

```
language: node_js
node_js:
    - 0.6
    - 0.8
before_script:
    - "sudo npm i -g jasmine-node" 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-10T05:07:32.123

[在使用travis-ci lint 网络应用程序](http://lint.travis-ci.org/)一段时间后，看起来它只是归结为我的 .travis.yml 文件中的格式问题。我的文本编辑器正在插入制表符，似乎 yaml 要求您只使用空格。为了更好地衡量，我还在所有内容周围添加了引号。

现在看起来像这样，在确保我只使用单个空格和换行符之后：

```
language: node_js
node_js:
    - "0.6"
    - "0.8"
before_script:
    - "npm i -g jasmine-node" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-17T19:17:11.453

这是一个存储库，其中包含 travis 构建启动`jasmine-node`测试的工作示例：[https](https://github.com/yosethegame/yosethegame) ://github.com/yosethegame/yosethegame 。

请注意，`package.json`声明了`jasmine-node`travis 将在其 npm install 阶段安装的依赖项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-12T10:19:02.483

前段时间我遇到了类似的问题，当时我正在使用 jasmine-node -g 并且由于它是一个简单的 kata 我认为不需要在文件夹中添加 package.json ，但是当我开始集成它时与 travis-ci 相同的项目，我经历了地狱才能配置它。

随着时间的推移，我了解到最好保持良好和紧凑并使用友好的 package.json 而不是全局安装（这里有一篇很好的帖子讨论它，例如：[Why to Avoid global test runners](http://blog.millermedeiros.com/node-js-protip-avoid-global-test-runners/)）

我的建议是让你将 jasmine-node 添加到 package.json 中，就像这样短

```
{
    "name" : "XXX",
    "version" : "1.0.0",
    "devDependencies" : {
        "jasmine-node" : "latest"
    },
    "scripts" : {
        "test" : "jasmine-node specs/*spec.js"
    }  
} 
```

不仅通过 travis-ci 集成肯定会为您节省大量的配置时间，而且如果有人想要重用您所做的事情，它还可以节省其他人的时间。;)

# drupal - Drupal6 中的视图与分类

> ID：12336568
> 
> 赞同：0
> 
> 时间：2012-09-09T04:45:13.343
> 
> 标签：drupal, drupal-6, drupal-modules, drupal-views

我创建了一个带有名称讲座的内容类型，还创建了带有词汇和添加术语的分类法。和选择的内容类型..

我还向该内容类型添加了节点..

现在我的问题是我想创建一个类似于以下链接的视图 [单击此处](http://www.lds.org/general-conference/sessions/2012/04?lang=eng)

这里周六上午会议，周六下午会议等是根据我的设置分类术语..

同样在他们的顶部是 April 2012 在这里我们可以选择月份。我想做类似的事情..

你能告诉我怎么做吗

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T04:56:41.687

你熟悉视图吗？究竟是什么问题？你要求的是一些非常基本的观点。

# codeigniter - PyroCMS 将仅在本地 XAMPP 服务器上上传，而不是在托管平台上

> ID：12336570
> 
> 赞同：0
> 
> 时间：2012-09-09T04:45:56.750
> 
> 标签：codeigniter, upload, pyrocms

在我的 XAMPP 服务器上，我安装了 PyroCMS。确切地说是 2.1.4 版。当我通过管理页面中的文件浏览器上传文件时，它将起作用。我在我的托管平台上安装了相同的版本，每当我上传 PNG 文件时，它都无法正常工作。这是我得到的错误：

```
The filetype you are attempting to upload is not allowed. 
```

我检查了文件大小限制并将它们更改为无济于事。然后我被告知我应该检查图像的 mime 类型并查看该类型是否在 CodeIgniter mime 类型声明中。我这样做了，它回来了：`image/png`。这实际上是在和数组中的声明中`image/x-png`。有谁知道这里发生了什么？PNG在允许的文件类型中，我完全没有想法......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T00:06:25.880

我修好了它。`text/plain`在 CodeIgniter 中将作为 MIME 类型添加到 PNG 数组中修复了它。

# c++ - 错误 - “#include 需要“文件名”或 " 在编译 g++ 文件时

> ID：12336573
> 
> 赞同：2
> 
> 时间：2012-09-09T04:46:17.757
> 
> 标签：c++, g++

我对 Linux 编程很陌生。我正在使用以下代码编译一个简单的 C++ 代码`g++`：

```
#include“recip.hpp”
#include<cassert>

double recip (int i) {
// I should be non-zero.
assert (i != 0);
return 1.0/i;
} 
```

该文件`recip.hpp`存在于我的当前目录中。我不明白为什么会出现错误：

```
recip.cpp:1:9: error: #include expects "FILENAME" or <FILENAME> 
```

怎么了？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-09T04:49:31.320

编译器不是文本编辑器，也不是人类 - 它检查字符代码是否完全匹配，而不是视觉相似性......你必须使用

```
#include "recip.hpp" 
```

使用标准双引号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T04:56:50.953

您的第一行被视为 UTF-8，内容如下：

```
0x23 = U+0023
0x69 = U+0069
0x6E = U+006E
0x63 = U+0063
0x6C = U+006C
0x75 = U+0075
0x64 = U+0064
0x65 = U+0065
0xE2 0x80 0x9C = U+201C
0x72 = U+0072
0x65 = U+0065
0x63 = U+0063
0x69 = U+0069
0x70 = U+0070
0x2E = U+002E
0x68 = U+0068
0x70 = U+0070
0x70 = U+0070
0xE2 0x80 0x9D = U+201D
0x0A = U+000A 
```

U+201C 和 U+201D 需要替换为 U+0022 (ASCII 34) 或`"`.

MS Word 和其他文字处理器为 C 代码制作了糟糕的编辑器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-18T02:15:13.127

当 wei 构建 example.i 时开始 swig。

example_wrap.c:2948:10：错误：#include 需要“文件名”或

```
/* File: example.i */
%module example
%{
#define SWIG_FILE_WITH_INIT
#include 'example.h'
%}
int fact(int n); 
```

我们更改代码：

```
/* File: example.i */
%module example

%{ 
#define SWIG_FILE_WITH_INIT
#include "example.h"
%}
int fact(int n); 
```

它只是包含“双引号”。

# .net - .NET 的 eBay 购物 API？

> ID：12336577
> 
> 赞同：1
> 
> 时间：2012-09-09T04:47:10.370
> 
> 标签：.net, ebay-api, ebay-sdk

我一直在四处寻找[eBay **Shopping** API](https://developer.ebay.com/devzone/shopping/docs/Concepts/ShoppingAPIGuide.html)的 .NET 版本。有没有？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T07:12:19.707

您提供的链接指出：

> 支持的功能
> 
> 格式：XML、SOAP、名称值、JSON
> 
> 协议：HTTP GET (REST) 和 POST"

这是一个网络服务。您不需要特定的“.Net API”。只需调用网页并处理返回值。

使用[本页信息的示例](http://developer.ebay.com/DevZone/shopping/docs/CallRef/FindProducts.html#Samples)

```
var xml = http://open.api.ebay.com/shopping?callname=FindProducts&responseencoding=XML&appid=YourAppId&siteid=0&QueryKeywords=harry%20potter&AvailableItemsOnly=true&MaxEntries=2&version=787
//parse the xml... 
```

当然，您需要使用有效数据。如果您尝试按原样使用它，您将收到错误 xml 响应：

```
<FindProductsResponse xmlns="urn:ebay:apis:eBLBaseComponents">
        <Timestamp>2012-09-09T07:03:43.405Z</Timestamp>
        <Ack>Failure</Ack>
    <Errors>
        <ShortMessage>Application ID invalid.</ShortMessage>
        <LongMessage>Application ID invalid.</LongMessage>
        <ErrorCode>1.20</ErrorCode>
        <SeverityCode>Error</SeverityCode>
        <ErrorClassification>RequestError</ErrorClassification>
    </Errors>
    <Build>E789_CORE_BUNDLED_15285085_R1</Build>
    <Version>789</Version>
</FindProductsResponse> 
```

然而，这一切的重点是您通过查询字符串向 eBay 发送一些数据，然后它们返回您的 xml。

这是上面示例中使用的[url](http://open.api.ebay.com/shopping?callname=FindProducts&responseencoding=XML&appid=YourAppId&siteid=0&QueryKeywords=harry%20potter&AvailableItemsOnly=true&MaxEntries=2&version=787)。

# linkedin - Linkedin API 油门限制

> ID：12336578
> 
> 赞同：8
> 
> 时间：2012-09-09T04:47:22.023
> 
> 标签：linkedin, throttling

最近我正在使用 Linkedin people-search API 开发一个应用程序。文档说开发人员注册每天有 1 次 lac API 调用，但是当我注册这个 API 并运行 python 脚本时，在大约 300 次调用后它说超过限制。有没有人在使用 Linkedin API 时遇到过此类问题，感谢您的评论。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-02-07T06:38:47.443

已经有一段时间了，但统计数据表明人们仍在关注这个，我正在试验 LinkedIn API，可以提供更多细节。

典型的节流阀表示为最大值（例如 100K）和每个用户令牌数（例如 500）。这些数字加在一起意味着您每天最多可以调用 100,000 次 API，但即使作为开发人员，单个用户令牌也意味着每天最多 500 次。

我遇到了这个问题，在设置了一个准系统应用程序并获得了一些用户之后，我可以确认每天数千个 API 调用的限制。[删除了关于在进一步考虑后可能是 LinkedIn API 中的意外后门的讨论。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-03-05T22:42:30.323

根据[LinkedIn](https://www.linkedin.com/)发布的[节流限制](https://developer.linkedin.com/docs/v1/throttle-limits)：

> LinkedIn API 密钥默认受到限制。限制旨在确保所有开发人员的最佳性能，并保护 LinkedIn 上所有用户的用户体验。
> 
> 所有 API 密钥都应用了三种类型的限制：
> 
> *   应用程序限制：这些限制限制了您的应用程序可以使用其 API 密钥进行的每个 API 调用的数量。
> *   用户限制：这些限制限制应用程序的任何单个用户的调用次数。用户级限制有多种用途，但通常在对 LinkedIn 用户的用户体验有重大潜在影响的情况下实施。
> *   开发人员限制：对于在其 API 密钥上列为开发人员的人员，他们将看到用户限制大约是大多数调用的用户限制的四倍。这为您提供了额外的能力来构建和测试您的应用程序。请注意，作为应用程序的开发人员，开发人员限制为您提供了更高的限制。但是您的用户将遇到较低的用户油门限制。请注意确保您的应用程序在用户油门限制下正常运行，而不仅仅是针对您作为开发人员使用的油门限制。
> 
> **注意**：要查看您的应用程序的当前 API 使用情况并确保您没有达到任何油门限制，请访问 [https://www.linkedin.com/developer/apps](https://www.linkedin.com/developer/apps)并单击“使用和限制”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T17:55:53.297

People Search 个人用户的限制为 100，其中 400 是作为开发人员与应用程序关联的人员的限制：

[https://developer.linkedin.com/documents/throttle-limits](https://developer.linkedin.com/documents/throttle-limits)

当您遇到限制时，请在[应用程序页面](https://www.linkedin.com/secure/developer)上查看应用程序的 api 使用情况，以了解您正在达到哪个油门。

# javascript - C 中 JavaScript 的等效 call() apply() 是什么？

> ID：12336579
> 
> 赞同：0
> 
> 时间：2012-09-09T04:48:13.847
> 
> 标签：javascript, c, function, reflection, call

在 Java 中是：

*   `java.lang.reflect.Method`

在 JavaScript 中是：

*   `apply()`⟶ 更喜欢`java.lang.reflect.Method`

*   `call()` ⟶ 更像 C 中的函数指针

在 C 中是：

*   `type (*varname)(Type1 label1,Type2 label2,Type3 label3)`⟶`call()`

*   `apply()`或的 C 中的等价物是什么`java.lang.reflect.Method`？

------------我很慢，来自eyalm的回答：

调用者将被调用者视为：

*   int (*a)(char 值);

并且被调用者将堆栈帧视为：

*   类型 (*varname)(Type1 label1,Type2 label2,Type3 label3 ...)

- - 我对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T04:54:29.483

对于函数指针：

```
int (*a)(char *); 
```

你可以打电话……等等……

```
a("ggffgfgg"); 
```

# serialization - IQueryable 序列化 (web api)

> ID：12336582
> 
> 赞同：6
> 
> 时间：2012-09-09T04:50:02.427
> 
> 标签：serialization, asp.net-web-api, iqueryable

为什么这不起作用？：

```
 var surveys = db.Surveys.Where(s => s.Author.UserId == user.UserId);

        return from survey in surveys
               select new
               {
                   surveyId = survey.SurveyId,
                   title = survey.Title
               }; 
```

而这个，稍作改动，是？：

```
 var surveys = db.Surveys.Where(s => s.Author == user);

        return from survey in surveys
               select new
               {
                   surveyId = survey.SurveyId,
                   title = survey.Title
               }; 
```

它会引发序列化错误

```
The 'ObjectContent`1' type failed to serialize the response body for content type 
'application/xml; charset=utf-8'.  (...) 
```

我可以用这种方式解决它，但我在这里（如下）有同样的错误，并且不能用同样的方式解决它：

```
var surveys = db.Surveys.Where(s => s.AnswerableBy(user)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:23:21.303

我最近遇到了这个问题，就我而言，问题是我有由实体框架创建的**循环引用**- 模型优先（公司 -> 员工 -> 公司）。

我通过简单地创建一个只有我需要的属性的视图模型对象来解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T19:26:14.253

[根据Microsoft ASP.NET Web API 网站上的](http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization#handling_circular_object_references)“处理循环对象引用”部分，将以下代码行添加到 WebAPIConfig.cs 文件的 Register 方法（应该在项目的 App_Start 文件夹中）。

```
 var json = config.Formatters.JsonFormatter;
        json.SerializerSettings.PreserveReferencesHandling = Newtonsoft.Json.PreserveReferencesHandling.Objects;
        config.Formatters.Remove(config.Formatters.XmlFormatter); 
```

该页面上有处理 XML 解析的单独说明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T08:58:46.963

您看到的异常是一般异常，可能由多种因素引起。检查`InnerException`序列化异常的属性，找出导致序列化失败的确切原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T09:20:11.127

您正在使用匿名对象。使它成为强类型并且序列化将起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-15T15:25:10.400

最后，这与 Linq to Entities 与 Linq to Objects 有关。

某些 LINQ 查询无法转换为 SQL（例如使用方法：someCollection.Where(p => p.SomeMethod() == ...)）。所以必须先将它们翻译到内存中（someCollection.ToList().Where...）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-18T11:10:13.150

I was having the same problem. In my case the error was caused by the **relation between tables created in my Dbml file**. Once I removed the relation from the DBML file, it worked. I think Database relations can't be serialized.

# php - 通过 Graphs 在 facebook 上标记朋友

> ID：12336583
> 
> 赞同：0
> 
> 时间：2012-09-09T04:50:05.540
> 
> 标签：php, facebook, facebook-graph-api

我正在尝试标记图片并通过图表发布但是，当我`'tags' => $tags`从下面删除时，它可以工作。否则我会收到此错误：

```
Array ( [error] => Array ( [message] => (#100) param tags must be an array. [type] => OAuthException [code] => 100 ) ) 
```

这是我的代码：

```
<?php
$tags = array(
    'to' => $_SESSION['my_fb_id'],
    'x' => 0,
    'y' => 0
);

 $tag[]= $tags ;
//
//upload photo
$file = 'imgtmp/save_as_this_name.jpg';
$args = array(
    'message' => 'This is my Picture',
    'tags' => $tag, // IF this line is removed ,It works!
);
$args[basename($file)] = '@' . realpath($file);
$ch = curl_init();
$url = 'https://graph.facebook.com/me/photos?access_token=' . $_SESSION['access_token'];
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $args);
$data = curl_exec($ch);
print_r(json_decode($data, true));
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T05:18:27.440

标签必须是标签数组，因为您可以标记很多人。

```
$tag1 = array(
    'tag_text' => 'tag test1',
    'tag_uid' => 'XXXXX1',
    'x' => 0,
    'y' => 0
);

$tag2 = array(
    'tag_text' => 'tag test2',
    'tag_uid' => 'XXXXX2',
    'x' => 0,
    'y' => 0
);

$tags = array($tag1, $tag2); 
```

**在你的情况下**

```
$args = array(
    'message' => 'This is my Picture',
    'tags' => array( $tags ) , 
); 
```

**编辑1：**

要成功标记照片，您需要`user_photos`获得许可。

使用图形 API

```
$file = 'test.jpg';
$tags = array(
    'tag_text' => 'tag test',
    'tag_uid' => 'XXXXX',
    'x' => 10,
    'y' => 10
);

$args['tags'] = array($tags);
$args[basename($file)] = '@' . realpath($file);
$data = $facebook->api("/me/photos", "post", $args);

print_r($data); 
```

**编辑2：**

只需将 json_encode 用于 tags 参数

```
$args['tags'] = json_encode(array($tags)); 
```

这将解决使用 cURL 时的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T04:54:05.220

好吧，我明白了。来自 Facebook API：

```
"tags": {
            "data": [
               {
                  "id": "11111111111111",
                  "name": "John Doe",
                  "x": 0,
                  "y": 0,
                  "created_time": "2012-09-03T03:08:44+0000"
               }
            ]
         }, 
```

标签 arg 需要包含一个以`data`作为键的数组。这里：

> $tags['data'] = array('to' => $_SESSION['my_fb_id'], 'x' => 0, 'y' => 0);

# jquery - Jquery .on('click') 函数

> ID：12336586
> 
> 赞同：0
> 
> 时间：2012-09-09T04:50:37.553
> 
> 标签：jquery

我有以下内容：

```
$('th').on('click', '.sorting > span', function() {
    alert("hello world");
}); 
```

这段代码曾经可以工作，但我对我的网站进行了一些更改，现在它无法正常工作。这是我尝试将上述功能应用于的代码示例：

```
<th style="text-align: center; width: 381px; " class="sorting" role="columnheader" tabindex="0" aria-controls="devices" rowspan="1" colspan="1" aria-label="Device: activate to sort column ascending"><span class="btn btn-mini" style="width: 100px">Device<span id="i"></span></span></th> 
```

这是按钮链接的图像和 X 射线分析：

![在此处输入图像描述](../Images/a250359bf57fa84561fb07234a3767c1.png)

编辑：好的，现在发生了一些非常有趣的事情！当我将上面的代码包装起来时， `$(document).ready( function () {}`我终于在单击排序列时看到了警报。但是，当单击排序列时，类更改为“sorting_asc”......但是当我再次单击按钮时，我仍然看到相同的警报......显然包装在文档准备好意味着jquery不知道更新的 DOM CSS。那么，什么可能导致文档就绪功能之外的功能停止工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T04:55:26.190

在您的标记`th`元素中没有带有 class of 的后代元素，`sorting`并且您的 jQuery 选择器没有选择任何元素，您应该编写以下代码：

```
$('th.sorting').on('click', 'span', function() {
    alert("hello world");
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T04:57:06.957

问题是当您真正的意思是“跨度”时，您正在使用选择器“.sorting > span”。“.sorting”部分将不适用于您首先选择的元素。

```
$('th.sorting').on('click', 'span', function() {
  alert("hello world");
}); 
```

# django - 使用了哪些 Django 国际化文件？

> ID：12336587
> 
> 赞同：0
> 
> 时间：2012-09-09T04:50:51.630
> 
> 标签：django, text, internationalization

我可以通过更改应用程序的 Settings.py 文件中的 LANGUAGE_CODE 在我的 Django 应用程序中切换语言。

但我不确定实际文本来自哪里。

在 path-to-django/contrib/auth/locale/ 中，有许多语言的目录，其中包含我正在显示的文本的翻译。但是，如果我将特定语言的 .mo 文件移动到新名称，我仍然会看到该语言的文本——即使在我重新启动 Django 之后。那么文本实际上是从哪里来的呢？

此外，对于“en”语言环境，翻译后的文本始终为“”（空字符串）。在这种情况下， ugettext_lazy 是否只返回其输入字符串？如果不是，英文文本来自哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T09:54:32.967

如果您在 django 管理员或您的应用程序中谈到翻译，这是不同的。您提到的路径 .../contrib/auth/locale 是指 django 管理员中的翻译。

对于您的应用程序中的特殊翻译，您的项目中应该有一个 locale/ 文件夹。这个文件夹是在你运行名为“django-admin.py makemessages”的 django 特殊脚本时创建的。

> 该脚本在您的项目源代码树或应用程序源代码树上运行，并提取所有标记为要翻译的字符串。它在 locale/LANG/LC_MESSAGES 目录中创建（或更新）一个消息文件。在 de 示例中，文件将是 locale/de/LC_MESSAGES/django.po。

详细解释请看django i18n[文档](https://docs.djangoproject.com/en/1.0/topics/i18n/#how-to-create-language-files)

创建消息文件 (*.po) 并在消息文件中编写自己的翻译后，不要忘记编译它们：

> **编译消息文件**
> 
> 创建消息文件之后——并且每次对它进行更改——你需要将它编译成更有效的形式，以供 gettext 使用。使用 django-admin.py compilemessages 实用程序执行此操作。
> 
> 此工具运行所有可用的 .po 文件并创建 .mo 文件，这些文件是为 gettext 使用而优化的二进制文件。在您运行 django-admin.py makemessages 的同一目录中，像这样运行 django-admin.py compilemessages：
> 
> django-admin.py 编译消息
> 
> 就是这样。您的翻译已经可以使用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T05:29:31.193

事实证明，正在使用系统范围的 Django 安装，而不是我的本地安装。

通过在我的应用程序中创建一个语言环境目录，我可以覆盖系统范围安装中使用的字符串。我只是在那里修改 .po 文件，然后编译它。

# javascript - 为链接到 Google Places API 的自动完成搜索字段设置值

> ID：12336591
> 
> 赞同：2
> 
> 时间：2012-09-09T04:52:36.417
> 
> 标签：javascript, google-places-api

我有一个网页，人们可以在其中输入多个目的地。当他们声明他们想进入一个新的目的地时，当前的字段值存储在数组中。如果他们选择返回之前的目的地，相关值将重新插入到表单字段中。

我正在使用链接到自动完成的搜索字段作为目的地的可见显示。当我尝试将一个值放入链接的搜索字段时，该值显示为好像它是一个占位符而不是一个值。输入该字段，该值会被`onFocus()`Google Places 自动完成加载项的事件删除。

如何重新插入值并将其识别为值而不是占位符。

**表单中的字段定义：**

```
<label for="GoogleDestSrch" class="inputText">Destination: 
<span id="DestinationDisplay2">1</span>   
<span class="required"><font size="5"> * </font></span></label>
<input id="GoogleDestSrch" type="text" size="50" placeholder="Please enter your destination" /> 
```

**Google Places API 监听器的初始化代码：**

```
var input = document.getElementById('GoogleDestSrch');
var autocomplete = new google.maps.places.Autocomplete(input);
google.maps.event.addListener(autocomplete, 'place_changed', function() {
  fillInAddress();
}); 
```

**在重新加载先前的目的地时尝试将值重新插入搜索字段：**

```
form.GoogleDestSrch.value = GoogleDestSrch[index];

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Issue With Google Places</title>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js? sensor=false&amp;libraries=places&amp;language=en"></script>

    <script language="JavaScript" type="text/javascript">
    <!--
        var lastIndex = 1;
        var GoogleDestSrch = new Array();

        function GotoDestination(index) {
            var domove = true;
            if (index == 0) {
                index = lastIndex + 1;
            }
            else {
                if (index == -1) {
                    index = lastIndex - 1;
                    if (index == 0) {
                        index = 1;
                        domove = false;
                    }
                }
            }

            if (domove) {
                if (index != lastIndex) {
                    var doc = window.document;
                    var pdbutton = doc.getElementById("pdbutton");
                    var pdbutton1 = doc.getElementById("pdbutton1");
                    if ((index > lastIndex)) {
                        // move to next destination
                           saveDataF(lastIndex);
                           loadDataF(index);
                           lastIndex = index;
                    } else if (index <= lastIndex) {
                        // move to previous destination 
                           saveDataF(lastIndex);
                           loadDataF(index);
                           lastIndex = index;
                    }
                }
            }
        }

        var input;
        var autocomplete;

        // fill in the Google metadata when a destination is selected 
        function fillInAddress() {
            var strFullValue = '';
            var strFullGeoValue = '';
            var place = autocomplete.getPlace();
            document.getElementById("GoogleType").value = place.types[0];
        }

        function saveDataF(index) {

            var fieldValue;
            var blankSearch = "Please enter";  // placeholder text for Google Places 

            fieldValue = document.getElementById("GoogleDestSrch").value;
            if (fieldValue.indexOf(blankSearch) > -1) { fieldValue = ""; }
            GoogleDestSrch[index] = fieldValue;

        }

        function loadDataF(index) {
            if ((GoogleDestSrch[index] + "") == "undefined") {
                document.getElementById("GoogleDestSrch").value = "";
            } else {
                document.getElementById("GoogleDestSrch").value = GoogleDestSrch[index];
            }
        }
    // -->
    </script>
    </head>
    <body>
        <form name="input" action="html_form_action.asp" method="get">

            <input id="destPointer" type="text" size="50" style="display:none" value="0" />
            <input id="fieldOne" type="text" size="50" placeholder="Tab from here" /><br />
            <label for="GoogleDestSrch" class="inputText">Destination: 
            <span id="DestinationDisplay2">1</span> <span class="required"><font size="5"> * 
            </font></span></label>
            <input id="GoogleDestSrch" type="text" size="50" placeholder="Please enter your destination" /><br />
            <label>Type of place</label><input id="GoogleType" type="text" size="50" /><br />
            <input id="fieldTwo" type="text" size="50" placeholder="Tab to here" />
            <br />
            <input type="button" value="Previous destination" onclick="javascript:GotoDestination(-1);" />
            <input type="button" value="Next destination" onclick="javascript:GotoDestination(0);" />
        <script type="text/javascript">
            //<![CDATA[
            input = document.getElementById('GoogleDestSrch');
            autocomplete = new google.maps.places.Autocomplete(input);
            google.maps.event.addListener(autocomplete, 'place_changed', function () {
                fillInAddress();
            });
            //]]>
        </script>
        </form>
    </body>
</html> 
```

# java - 纸牌游戏中的mvc设计

> ID：12336593
> 
> 赞同：2
> 
> 时间：2012-09-09T04:53:36.863
> 
> 标签：java, model-view-controller, javafx-2, playing-cards

我正在尝试制作纸牌游戏。

我的一些课程是：CardModel、CardView；甲板模型，甲板视图。

卡片组模型有卡片模型列表，根据MVC，如果我想将卡片发送到卡片组，我可以将卡片模型添加到卡片组模型，卡片视图将通过事件添加到卡片组视图处理程序。

所以我在 DeckModel 类中有一个 addCard(CardModel m) ，但是如果我想发送一个事件将该模型的卡片视图添加到卡片组视图中，我只知道让模型具有对视图的引用。

**那么问题来了：**如果卡片模型和甲板模型都必须引用它们的视图类来做呢？如果没有，如何做得更好？

**更新，代码：**

```
public class DeckModel {
private ArrayList<CardModel> cards;

private ArrayList<EventHandler> actionEventHandlerList;

public void addCard(CardModel card){
    cards.add(card);

    //processEvent(event x);
    //must I pass a event that contain card view here?
}

CardModel getCards(int index){
    return cards.get(index);

}

public synchronized void addEventHandler(EventHandler l){
    if(actionEventHandlerList == null)
        actionEventHandlerList = new ArrayList<EventHandler>();

    if(!actionEventHandlerList.contains(l))
        actionEventHandlerList.add(l);
}

public synchronized void removeEventHandler(EventHandler l){
    if(actionEventHandlerList!= null && actionEventHandlerList.contains(l))
        actionEventHandlerList.remove(l);
}

private void processEvent(Event e){
    ArrayList list;

    synchronized(this){
        if(actionEventHandlerList!= null)
            list = (ArrayList)actionEventHandlerList.clone();
        else
            return;
    }
    for(int i=0; i<actionEventHandlerList.size(); ++i){
        actionEventHandlerList.get(i).handle(e);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T07:52:09.840

在一个好的 MVC 模型中不应该知道 View。为此，您可以为您的模型提供控制器将订阅的侦听器接口。因此 Controller 可以在 Model 更改后更新 View。

在 JavaFX 中有下一个支持：`ObservableList`、属性和绑定。您可以看看它是如何在[ListView](http://docs.oracle.com/javafx/2/api/javafx/scene/control/ListView.html)中完成的：`items`属性是`ObservableList`由 ListView 控制器监控的，它会相应地更新视图。所以用户`ListView`什么都不知道，他们可以简单地添加/删除/更改`items`.

# python - 尝试使用 glob 和 os 模块重命名文件

> ID：12336594
> 
> 赞同：0
> 
> 时间：2012-09-09T04:53:39.560
> 
> 标签：python, python-3.x

我正在尝试使用 glob 和 os 模块重命名一堆文件，但我没有得到任何结果。我已经寻找了一些解决方案，但没有找到任何解决方案。“当该文件已存在时无法创建该文件。”。

如果我让它工作，我不确定如何重命名多个项目，比如我有三张图片，分别名为 img_1001、img_1002 和 img_1003。我如何将这些重命名为：picture_1、picture_2 和 picture_3。

这是我目前的代码。

```
import os
import glob

x = glob.glob(r"C:\Users\Verzo\Desktop\New folder\*.txt")

for filename in x:
    os.rename(filename, "Picture ") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:01:14.270

```
 for filename in x:
        os.rename(filename, "Picture ") 
```

该脚本正在尝试将该列表中的每个文件重命名为`Picture`. 正如您所发现的，这将不起作用。

以下代码未经测试。

```
 import os
    from glob import glob

    for number, filename in enumerate(glob(r"C:\Users\Verzo\Desktop\New folder\*.txt")):
        try:
            os.rename(filename, "Picture_{0}".format(number))
        except OSError as e:
            print("Something happened:", e) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T05:00:07.590

类似的东西（未经测试）

```
import os
import glob

x = glob.glob(r"C:\Users\Verzo\Desktop\New folder\*.txt")

for filename in x:
    name, num = filename.split('_')
    num = int(num)
    os.rename(filename, 'picture_%d' % num) 
```

# javascript - Three.js：将 HTML 页面/DOM 元素渲染到立方体的表面？

> ID：12336598
> 
> 赞同：4
> 
> 时间：2012-09-09T04:54:51.220
> 
> 标签：javascript, webgl, three.js

我正在尝试调整 Three.js 包提供的示例文件 canvas_geometry_cube.html，并更改立方体的每个面以显示 HTML 页面/DOM 元素（最好是 DOM 元素）。我看了一下 ParticleDOMMaterial，但我不知道如何使用它或它的作用。有人能帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-16T16:19:46.633

*从 Three.js 中的一些最近的改进中更新这个老问题并为未来的读者*

**Three.js 现在实际上支持 CSS3D**作为渲染输出，因此您可以使用 CSS 3D 转换来操作 HTML 页面/DOM 元素。

例如，请参见此处： http: [//mrdoob.github.io/three.js/examples/css3d_periodictable.html](http://mrdoob.github.io/three.js/examples/css3d_periodictable.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T07:29:12.633

DOMRenderer 不是一个完整的 3d 渲染器，它只能应用 z-indexes 和缩放，因此通过 DOMRenderer 旋转立方体是不可能的。

您可以使用[html2canvas](http://html2canvas.hertzen.com/)并将其作为位图纹理应用到立方体上。我还没有真正使用过 html2canvas，但演示非常令人印象深刻。你的旅费可能会改变。

也许更适合您的项目的是 CSS3 3D 变换。有一个库可以帮助解决这种称为 traqball 的问题，[https://github.com/dirkweber/traqball.js](https://github.com/dirkweber/traqball.js)。

您可以在此处查看演示：[http ://www.eleqtriq.com/wp-content/static/demos/2010/rotation/index.html](http://www.eleqtriq.com/wp-content/static/demos/2010/rotation/index.html)

# javascript - 在 C++/插件中访问 Javascript 数组？

> ID：12336599
> 
> 赞同：0
> 
> 时间：2012-09-09T04:54:52.250
> 
> 标签：javascript, plugins, npapi, firebreath, jsctypes

我已经使用 firebreath 框架编写了一个 NPAPI 插件。我能够从 Javascript 传递简单的数值并在我的 (C++) 插件中访问它们，执行操作然后返回结果。我想知道现在如何对向量进行操作，即数组。我不想在我的插件中分配新数组并从 JavaScript 复制数组（尽管我不知道该怎么做）。如何直接访问插件中的 JavaScript 数组？有什么特殊的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:03:26.740

来自[Firebreath 网站](http://www.firebreath.org/display/documentation/Supported+JSAPI+types)：

Javascript 对象可以与 FB::JSObjectPtr 类型一起使用。您可能想要使用的 JavaScript 对象示例包括：

1.  Javascript 对象（带有方法和/或值成员）
2.  Javascript 数组（您计划修改的；否则您可以使用容器类型）
3.  用于回调的 Javascript 方法

数组是对象；使用 getProperty(n) 或 getProperty("length") 等获取值

您还可以使用 ->invoke("push", FB::variant_list_of(val)) 等方法

（在 JSAPI 方法上，为了使用 JSObjectPtr 类型，您应该使用看起来像这样的方法：）

```
void doSomethingWithAnArray(const FB::JSObjectPtr& array) { ... } 
```

还要记住，FireBreath 无法分辨它是什么类型的 js 对象，只是有一个 js 对象；如果他们没有给你一个实际的数组而是一些其他对象，你必须自己做错误检测。

# c# - 抽象基类中的 IDisposable 和析构函数

> ID：12336606
> 
> 赞同：0
> 
> 时间：2012-09-09T04:56:25.917
> 
> 标签：c#, destructor, idisposable, unmanagedresources

我有一个抽象基类，它实现了 IDisposable 和除析构函数之外的完整`bool disposed = false`、`Dispose()`和模式。`Dispose(bool)`基类实现了 IDisposable，因为它的许多派生类需要释放非托管资源。但是，我听说带有析构函数的类很昂贵，因此如果我包含析构函数，那么没有非托管资源的派生类会变得不必要地昂贵。我对这个问题感到困惑。我应该还是不应该包含析构函数，为什么？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T05:17:57.443

如果你正在实现一种全新的非托管资源，你只需要包含一个析构函数/终结器。因此，如果您只是包装或继承现有的数据库连接类型、套接字类型、gdi 资源等，那么您**不需要**析构函数。原始类型的析构函数将负责最终为您释放该资源。但是，如果您要从头开始为一种全新的数据库实现类似于 ADO.Net 提供程序对象的东西，那么您可能希望为您的连接类型实现一个析构函数，以便它可以在最终收集到它时释放它的连接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T05:28:43.797

理想情况下，Dispose 模式也依赖于终结器来完成。原因是要确保将清理非托管资源。这里的技巧是，在 Dispose 方法中，您还应该有以下调用：GC.SuppressFinalize(this)，它指示垃圾收集器不要以特殊方式处理实例，这将使您免受终结的开销。因此，如果用户每次都正确处理对象（例如在 using 块中包装每次使用），则不会调用终结器，因此根本不会影响性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T15:23:19.920

出于清理目的而应该重写的唯一类`Finalize`是那些直接派生`Object`并期望清理它们自己的资源的类，或者类似的类`SafeHandle`，其目的是管理资源清理。否则，如果派生类具有需要清理的非托管资源，`Finalize`而基类不会，则正确的方法通常是将每个单独的资源封装在其自己的可终结对象中。具有终结器的对象应避免持有对终结器不需要的任何对象的强引用，因为它们持有引用的所有对象，以及任何这些对象持有引用的所有对象等都将保持活动状态。额外的垃圾收集生成。如果一个对象`George`它持有指向许多其他对象的链接，持有对不具有强反向链接的可终结对象的引用，并且`George`被放弃，可终结对象将需要保留以进行额外的 GC 生成，但`George`它和它所指向的其他对象持有直接和间接引用不会。相比之下，如果`George`它自己实现`Finalize`了，那么它和它持有直接或间接引用的每个对象都必须保留。

此外，如果最后一次使用大型可终结对象实际上是对其资源之一的使用，则终结有时会导致一些罕见但难以追踪的 Hindenbugs。使用可以清理的资源的代码`Finalize`必须确保包含这些资源的对象在这些资源仍在使用时不符合最终确定的条件。这通常通过使用`GC.KeepAlive()`. 如果派生类添加了`Finalize`清理父类中存在但父类不希望终结器清理的任何资源的方法，可能会出现错误。将资源封装在自己的类中可以避免这个问题（在使用资源时父对象可能会被垃圾回收，但如果封装对象设计得当，则无关紧要——封装对象的`Finalize`方法赢了'直到它的方法使用完资源后才运行）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-09T05:19:08.650

> 我听说带有析构函数的类很昂贵

具有终结器或实现的`IDisposable`类并不比没有终结器的类更昂贵。然而，一个类的实现`IDisposable`告诉调用者他们需要在不再需要时被跟踪和清理。这对调用者来说是额外的工作，但不这样做的代价是资源泄漏，至少在类被垃圾收集之前是这样。

简而言之，如果你的类不使用任何需要清理的资源，通常以同样实现 IDisposable 的字段的形式出现，你就不需要终结器。

# java - 热敏打印机java

> ID：12336607
> 
> 赞同：2
> 
> 时间：2012-09-09T04:56:27.693
> 
> 标签：java, printing

请帮助尝试使用此代码在热敏打印机中打印，我的系统托盘中有打印作业，但我的热敏打印机不打印。PrintReceiptUtil 类：

```
import java.awt.JobAttributes;
import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.io.InputStream;

import javax.print.Doc;
import javax.print.DocFlavor;
import javax.print.DocPrintJob;
import javax.print.PrintException;
import javax.print.PrintService;
import javax.print.PrintServiceLookup;
import javax.print.SimpleDoc;

import javax.print.attribute.HashPrintRequestAttributeSet;
import javax.print.attribute.PrintRequestAttributeSet;
import javax.print.attribute.standard.Copies;

import javax.print.event.PrintJobAdapter;
import javax.print.event.PrintJobEvent;

public static void doPrintReceipt() throws IOException, PrintException{

    String defaultPrinter = PrintServiceLookup.lookupDefaultPrintService().getName();
    System.out.println("Default printer: " + defaultPrinter);
    PrintService service = PrintServiceLookup.lookupDefaultPrintService();
    // prints the famous hello world! plus a form feed
    InputStream is = new ByteArrayInputStream("hello world!\f".getBytes("UTF8"));

    PrintRequestAttributeSet  pras = new HashPrintRequestAttributeSet();

    pras.add(new Copies(1));

    DocFlavor flavor = DocFlavor.INPUT_STREAM.AUTOSENSE;
    Doc doc = new SimpleDoc(is, flavor, null);
    DocPrintJob job = service.createPrintJob();

    PrintJobWatcher pjw = new PrintJobWatcher(job);
    job.print(doc, pras);
    pjw.waitForDone();
    is.close();
} 
} 
```

PrintJobWatcher 类：为了监控打印作业，我可以“打印完成”，但我的热敏打印机不打印任何东西

```
import javax.print.DocPrintJob;
import javax.print.event.PrintJobAdapter;
import javax.print.event.PrintJobEvent;

public PrintJobWatcher(DocPrintJob job){

    job.addPrintJobListener(new PrintJobAdapter() {
        public void printJobCanceled(PrintJobEvent pje) {
            allDone();
        }
        public void printJobCompleted(PrintJobEvent pje) {
            allDone();
        }
        public void printJobFailed(PrintJobEvent pje) {
            allDone();
        }
        public void printJobNoMoreEvents(PrintJobEvent pje) {
            allDone();
        }
        void allDone() {
            synchronized (PrintJobWatcher.this) {
                done = true;
                System.out.println("Printing done ...");
                PrintJobWatcher.this.notify();
            }
        }
    });
}

public synchronized void waitForDone() {
    try {
        while (!done) {
            wait();
        }
    } catch (InterruptedException e) {
    }
}
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-09T22:08:31.040

@bhuvanpavan 的工作版本

```
import java.awt.Font;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.print.PageFormat;
import java.awt.print.Paper;
import java.awt.print.Printable;
import java.awt.print.PrinterException;
import java.awt.print.PrinterJob;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Enumeration;
import javax.print.attribute.HashPrintRequestAttributeSet;
import javax.print.attribute.PrintRequestAttributeSet;
import javax.print.attribute.standard.OrientationRequested;
import javax.swing.JTextArea;

public class NewClass {

    public void a() {
        PageFormat format = new PageFormat();
        Paper paper = new Paper();

        double paperWidth = 3;//3.25
        double paperHeight = 3.69;//11.69
        double leftMargin = 0.12;
        double rightMargin = 0.10;
        double topMargin = 0;
        double bottomMargin = 0.01;

        paper.setSize(paperWidth * 200, paperHeight * 200);
        paper.setImageableArea(leftMargin * 200, topMargin * 200,
                (paperWidth - leftMargin - rightMargin) * 200,
                (paperHeight - topMargin - bottomMargin) * 200);

        format.setPaper(paper);

        PrintRequestAttributeSet aset = new HashPrintRequestAttributeSet();
        aset.add(OrientationRequested.PORTRAIT);
//testing 

        PrinterJob printerJob = PrinterJob.getPrinterJob();
        Printable printable = new ReceiptPrint();

        format = printerJob.validatePage(format);
        boolean don = printerJob.printDialog();
        printerJob.setPrintable(printable, format);
        try {
            printerJob.print(aset);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

}

class ReceiptPrint implements Printable {

    SimpleDateFormat df = new SimpleDateFormat();
    String receiptDetailLine;
    public static final String pspace = "               ";//15-spaces

    public int print(Graphics graphics, PageFormat pageFormat, int pageIndex)
            throws PrinterException {

        df.applyPattern("dd/MM/yyyy HH:mm:ss");
        String strText = null;
        final String LF = "\n";// text string to output
        int lineStart;           // start index of line in textarea
        int lineEnd;             // end index of line in textarea
        int lineNumber;
        int lineCount;
        final String SPACE = "          ";//10 spaces
        final String SPACES = "         ";//9
        final String uline = "________________________________________";
        final String dline = "----------------------------------------";
        String greetings = "THANKS FOR YOUR VISIT";
        receiptDetailLine = "asdasdasda";

        Graphics2D g2d = (Graphics2D) graphics;
        Font font = new Font("MONOSPACED", Font.BOLD, 9);

        if (pageIndex < 0 || pageIndex >= 1) {
            return Printable.NO_SUCH_PAGE;
        }
        JTextArea textarea = new JTextArea(10, 40);

 //testing
        textarea.append(SPACES + "sadasdsad" + "\n");

        textarea.append(" " + SPACES + "sadasdsad" + "\n");

        textarea.append(SPACES + "sadasdsad" + "\n");

        textarea.append("" + SPACES + "sadasdsad" + "\n");

        textarea.append(SPACES + "sadasdsad" + "\n");

        textarea.append(uline + "\n");
        textarea.append("Order Ref:" + "   " + receiptDetailLine + "\n");
        textarea.append(dline + "\n");
        textarea.append(" Qty     Description" + SPACES + "  Price" + LF);
        textarea.append(dline + "\n");

        System.out.println(2);

        String printedLine = "       Service Charge Complimentary";
        textarea.append(printedLine + LF);

        textarea.append(LF + SPACES + "   Your Reciept\n" + SPACE + greetings + LF);
        textarea.append(df.format(new Date()) + LF);
        textarea.setEditable(false);

        g2d.translate(pageFormat.getImageableX(), pageFormat.getImageableY());

        g2d.setFont(font);
        lineNumber = 0;
        lineCount = textarea.getLineCount();
        strText = textarea.getText();
        /*MediaTracker mt = new MediaTracker(textarea);
         URL imageURL = null;
         try {

         imageURL = new URL(mainDirectory+"quindell.png");
         } catch (MalformedURLException me) {
         me.printStackTrace();
         }

         //--- Load the image and wait for it to load
         Image image = Toolkit.getDefaultToolkit().getImage(imageURL);
         mt.addImage(image, 0);
         */

        while (lineCount != 0) {
            try {

                lineStart = textarea.getLineStartOffset(lineNumber);
                lineEnd = textarea.getLineEndOffset(lineNumber);
                strText = textarea.getText(lineStart, lineEnd - lineStart);
            } catch (Exception exception) {
                System.out.println("Printing error:" + exception);                  // have to catch BadLocationException
            }

            g2d.drawString(strText, 1, (lineNumber + 1) * 18);
            //spacing    between lines
            lineNumber = lineNumber + 1;
            lineCount--;
        }
        return Printable.PAGE_EXISTS;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:02:32.320

我完成了这个编程，它对我来说很好。你可能会从中得到一些帮助。检查一下。

```
public class Receipt
{

PageFormat format = new PageFormat();
Paper paper = new Paper();

double paperWidth = 3;//3.25
double paperHeight = 500.69;//11.69
double leftMargin = 0.12;
double rightMargin = 0.10;
double topMargin = 0;
double bottomMargin = 0.01;

paper.setSize(paperWidth * 200, paperHeight * 200);
paper.setImageableArea(leftMargin * 200, topMargin * 200,
     (paperWidth - leftMargin - rightMargin) * 200,
     (paperHeight - topMargin - bottomMargin) * 200);

format.setPaper(paper);

PrintRequestAttributeSet aset = new HashPrintRequestAttributeSet();
aset.add(OrientationRequested.PORTRAIT);
//testing 

PrinterJob printerJob = PrinterJob.getPrinterJob();
Printable printable = new ReceiptPrint();

format = printerJob.validatePage(format);
printerJob.setPrintable(printable, format);
try {
   printerJob.print(aset);
}
catch (Exception e) {
    e.printStackTrace();
}
class ReceiptPrint implements Printable {
SimpleDateFormat df = new SimpleDateFormat();
String  receiptDetailLine ;
public static final String pspace="               ";//15-spaces

public int print(Graphics graphics, PageFormat pageFormat, int pageIndex)  
throws PrinterException 
{

df.applyPattern("dd/MM/yyyy HH:mm:ss");
String strText =null; 
final String LF = "\n";// text string to output
int lineStart;           // start index of line in textarea
int lineEnd;             // end index of line in textarea
int lineNumber;   
int lineCount;
final String SPACE = "          ";//10 spaces
final String SPACES = "         ";//9
final String uline ="________________________________________";
final String dline ="----------------------------------------";
String greetings ="THANKS FOR YOUR VISIT";
receiptDetailLine= Integer.toString(SystemConfig.currentLocationCode) + "-"
+ Integer.toString(SystemConfig.tillNumber) + "-" + 
Integer.toString(EPOSFrame.mainFrame.currentUser.data.userID) + "-" + 
Receipt.order.name;

   Graphics2D g2d = (Graphics2D) graphics;
Font font = new Font("MONOSPACED",Font.BOLD, 9);

if (pageIndex < 0 || pageIndex >= 1) {
      return Printable.NO_SUCH_PAGE;
  }
 JTextArea textarea = new JTextArea(10,40);

 //testing
 if(SystemConfig.receiptAddressLine1!="")
 {
 textarea.append(SPACES+SystemConfig.receiptAddressLine1 +"\n");
 }
 if(SystemConfig.receiptAddressLine2!="")
 {
 textarea.append(" "+SPACES+SystemConfig.receiptAddressLine2 +"\n");
 }
 if(SystemConfig.receiptAddressLine3!="")
 {
 textarea.append(SPACES+SystemConfig.receiptAddressLine3 +"\n");
 }
 if(SystemConfig.receiptAddressLine5!="")
 {
 textarea.append(""+SPACES+SystemConfig.receiptAddressLine5 +"\n");
 }
 if(SystemConfig.receiptAddressLine4!="")
 {
 textarea.append(SPACES+SystemConfig.receiptAddressLine4 +"\n");
 }
 textarea.append(uline+"\n");
 textarea.append("Order Ref:" +"   "+receiptDetailLine+"\n");
 textarea.append(dline+"\n");
 textarea.append(" Qty     Description"+SPACES+"  Price"+LF);
 textarea.append(dline+"\n");

System.out.println(2);
TransactionItemPayment payment = null;
Enumeration transEnumeration = Receipt.order.m_transactions.elements();
int qty= 0;
String desc= "";
while (transEnumeration.hasMoreElements())
{

  TransactionItem ti = (TransactionItem) transEnumeration.nextElement();
  StringBuffer  price = new StringBuffer(String.valueOf(ti.getValue()));
  String  printLine = ti.getReceiptLine();

  if (printLine!=null)
  {
    qty=ti.getQuantity();
    desc = ti.getTopDisplayLine();

    if (price.length()>=2)
    {
      price.insert(price.length() - 2, '.');
    }

    textarea.append( printLine+LF );
    qty=0;
    desc="";

  }
  else if (ti instanceof TransactionItemPayment)
  {
    payment = (TransactionItemPayment) ti;
  }
  }
 long  serviceCharge = Receipt.order.calcServiceCharge();
 if (serviceCharge>0)
 {
  double  charge = (double) serviceCharge / 100;
  String  valueString = 
  SystemConfig.decimalFormat.format(charge).replace((char)163,' ');
  String printedLine = "       Service Charge    " +SPACE+ valueString;
  textarea.append( printedLine + LF);
}
else if (SystemConfig.serviceCharge)
{
  String printedLine = "       Service Charge Complimentary";
  textarea.append( printedLine + LF);
}
long  autoDiscount = Receipt.order.calcAutoDiscount();
if (autoDiscount>0)
{
  double  discount = (double) autoDiscount / 100;
  String  valueString =  
  SystemConfig.decimalFormat.format(discount).replace((char)163,' ');
  String printedLine = "       Discount:"+pspace+valueString;
  textarea.append( printedLine + LF);
}

long total = (long)Receipt.order.getOrderTotal() +  

  Receipt.order.calcServiceCharge() - Receipt.order.calcAutoDiscount();
  String formattedTotal = SystemConfig.decimalFormat.format((double)total /
  100D);

textarea.append(LF+"       SubTotal:"+pspace+formattedTotal+LF);
textarea.append("            Gratuity:______________________"+LF);//12 space
textarea.append("              Total:_______________________"+LF);
textarea.append("            Signature:_____________________"+LF);

textarea.append(LF+SPACES+"   Your Reciept\n"+ SPACE+greetings+LF);
textarea.append(df.format(new Date()) + LF);
textarea.setEditable(false);

  g2d.translate(pageFormat.getImageableX(), pageFormat.getImageableY());

  g2d.setFont(font);
  lineNumber = 0;
  lineCount = textarea.getLineCount();
   strText = textarea.getText();
   /*MediaTracker mt = new MediaTracker(textarea);
   URL imageURL = null;
   try {

     imageURL = new URL(mainDirectory+"quindell.png");
   } catch (MalformedURLException me) {
     me.printStackTrace();
   }

 //--- Load the image and wait for it to load
   Image image = Toolkit.getDefaultToolkit().getImage(imageURL);
   mt.addImage(image, 0);
   */

  while (lineCount!=0){
  try {

        lineStart = textarea.getLineStartOffset(lineNumber);
        lineEnd = textarea.getLineEndOffset(lineNumber);
        strText = textarea.getText(lineStart, lineEnd-lineStart);
        } catch( Exception exception) 
        {
            System.out.println("Printing error:" + exception);                  // have to catch BadLocationException
        }

                   g2d.drawString(strText,1,(lineNumber + 1) *18);
                   //spacing    between lines
                    lineNumber = lineNumber + 1;
                     lineCount--;
         }
         return Printable.PAGE_EXISTS;
     }
    } 
```

# mediawiki - Mediawiki 显示不同地理位置的不同链接

> ID：12336608
> 
> 赞同：-1
> 
> 时间：2012-09-09T04:56:40.887
> 
> 标签：mediawiki

**场景**：通过不同的站点名称从两个不同的国家访问一个 Intranet 站点。我们使用 mediawiki 作为知识库，并希望参考这个 Intranet 站点。两国的团队都在使用 mediawiki。

目前，我们在 wiki 中提供了两个不同的 URL。例子：

> *国家一：* ur1。**在**.intranet\hello\world
> *国家二：* ur1。**en** .intranet\hello\world

**问题：** *我们如何确保将正确（可访问）的 Intranet 站点地址提供给从每个国家/地区访问的人？*

我尝试使用 wiki 模板查找信息。比如说，在创作时，所有用户都必须使用特定的模板 {{Intranet_Page | <网址>}}

在模板中，代码可以检查访问用户的 IP 并确定必须使用哪个站点名称。我找不到合适的特殊词来查找 IP。:(

*有什么办法... PHP修改/模板/其他？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-11T13:55:52.357

目前还不太清楚你想要什么。如果我理解正确，您希望 wiki 页面包含指向外部网站的链接，该链接存在多种变体，具体取决于国家/地区。该页面应提供给访问用户，并以正确的国家/地区变体呈现链接。

这类似于链接可翻译页面但将用户重定向到用户（界面）语言的子页面的问题。为此，MediaWiki 核心提供了[Special:MyLanguage](https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Extension:Translate/Page_translation_administration#markup)，一个重定向特殊页面。

重定向特殊页面是此类问题的最简单解决方案，因为：

*   页面 HTML 不需要根据每个参数（在您的国家/地区）而有所不同，但可以缓存相同；
*   您获得资源的规范 URL，每个人都可以链接该 URL，但将每个人带到正确的变体。

请参阅[https://www.mediawiki.org/wiki/Manual:Special_pages](https://www.mediawiki.org/wiki/Manual:Special_pages)了解如何制作特殊页面和[https://www.mediawiki.org/wiki/Extension:GeoIP](https://www.mediawiki.org/wiki/Extension:GeoIP)或类似内容以从 IP 中提取国家/地区。

# python - 关闭先前打开的套接字

> ID：12336611
> 
> 赞同：0
> 
> 时间：2012-09-09T04:57:06.363
> 
> 标签：python, sockets

我创建了一个在 python 中侦听特定套接字的程序，但是我 ctrl+c'd 脚本导致 .close() 也没有被调用，但是我现在如何释放套接字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T05:08:43.643

*进程退出时套接字*关闭。它使用的*端口*可能会挂起几分钟，这是正常的，然后它会消失。如果需要立即重用端口，请在绑定或连接前设置 SO_REUSEADDR。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T06:41:22.300

`SO_REUSEADDR`在调用方法之前设置套接字选项`bind`，如下所示：

```
sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1) 
```

这将指示套接字自由地重用由于最近运行程序而处于等待状态的端口。

或者，使用标准库中的类，如果您将服务器实例上`SocketServer.TCPServer`的属性设置为真值，它将自动执行此操作。`allow_reuse_address`

# sql - SQL 网络接口，错误：25 - 连接字符串在 Powershell 中无效

> ID：12336613
> 
> 赞同：8
> 
> 时间：2012-09-09T04:57:17.600
> 
> 标签：sql, powershell

```
$SQLconnection = New-Object System.Data.SqlClient.SqlConnection
$SQLconnection.ConnectionString = "Server = MySQLservername\MSSQLSERVER; Database = "MYSQLDB"; Integrated Security = True"
$SQLconnection.open() 
```

在 MSSQL 2012 中，有效。在 MSSQL 2005 中，得到 SQL 网络接口，错误：25 - 连接字符串无效。

如果仅在连接字符串中使用“Server = MySQLServername”，则有效。我确定实例名称是正确的。它是 SQL 2005 的错误吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-08-01T11:47:19.450

根据[MS](https://social.msdn.microsoft.com/Forums/sqlserver/en-US/391b5310-0cec-43b6-a1b4-62d094101fdd/error-25-connection-string-is-not-valid-net-sqlclient-data-provider?forum=sqlsetupandupgrade)，您无法按名称连接到默认实例 MSSQLSERVER。您必须省略实例名称。我已经在 MS SQL 2008R2 和 2014 SP2 中验证了这个相同的“功能”。

您在 2012 年配置的某些东西可能启用了它，但我的默认设置不适用于它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T17:24:33.787

如果您的数据库/实例是在端口号上提供的，那么当我没有正确设置连接字符串时会收到错误 25。

```
$SQLconnection.ConnectionString = "Server = MySQLservername.domain.ext\InstanceName, PORT; Database = `"MYSQLDB`"; Integrated Security = True" 
```

例如：

```
$SQLconnection.ConnectionString = "Server = SQL01v.fordco.prd\DBSYS, 1433; Database = CarsDB; Integrated Security = True" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T09:48:31.120

据我所知，从来没有要求在连接字符串中引用服务器或数据库名称。你应该使用这个

```
$SQLconnection.ConnectionString = "Server=MySQLservername\MSSQLSERVER;Database=MYSQLDB;Integrated Security=True" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-09T14:21:04.547

您构建的字符串不正确，我很惊讶这对任何版本都有效。您在连接字符串的中间有“MYSQLDB”，并且您没有转义引用字符串中的双引号。您可以通过运行以下两个命令来看到这一点：

```
$a = write-output "Server = MySQLservername\MSSQLSERVER; Database = "MYSQLDB"; Integrated Security = True" 
$b = write-output "Server = MySQLservername\MSSQLSERVER; Database = `"MYSQLDB`"; Integrated Security = True"
$a.gettype()
$b.gettype() 
```

第一行返回一个数组而不是一个字符串，因为分号被视为运行两个命令

只要记住在双引号字符串中转义双引号就可以了：

```
$SQLconnection.ConnectionString = "Server = MySQLservername\MSSQLSERVER; Database = `"MYSQLDB`"; Integrated Security = True" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-03T14:25:41.160

# 报价问题

^(（这里的答案建立在乍得早先给出的答案之上并与之相矛盾：[SQL Network Interfaces, error: 25 - Connection string is not valid in Powershell](https://stackoverflow.com/questions/12336613/sql-network-interfaces-error-25-connection-string-is-not-valid-in-powershell/12339877#12339877)）)

你似乎有一个引用问题。在较新版本的 PowerShell 控制台中，语法突出显示可以帮助您看到这一点。 [![语法高亮显示引用问题](../Images/9072d478789c55925e1ac174e571c991.png)](https://i.stack.imgur.com/gJrrT.png)

所以版本 $a 将不起作用。要解决此问题，您必须更改引用。在 $b 或 $c 中。我更喜欢$c。

**进一步阅读：** [https ://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_quoting_rules](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_quoting_rules)

### 屏幕截图为文本

```
$a = "Server = MySQLservername\MSSQLSERVER; Database = "MYSQLDB"; Integrated Security = True"
At line:1 char:57
+ ... ername\MSSQLSERVER; Database = "MYSQLDB"; Integrated Security = True"
+                                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Unexpected token 'MYSQLDB"; Integrated Security = True"' in expression or statement.
    + CategoryInfo          : ParserError: (:) [], ParentContainsErrorRecordException
    + FullyQualifiedErrorId : UnexpectedToken

$b = "Server = MySQLservername\MSSQLSERVER; Database = `"MYSQLDB`"; Integrated Security = True"
$c = 'Server = MySQLservername\MSSQLSERVER; Database = "MYSQLDB"; Integrated Security = True'

$a

$b
Server = MySQLservername\MSSQLSERVER; Database = "MYSQLDB"; Integrated Security = True

$c
Server = MySQLservername\MSSQLSERVER; Database = "MYSQLDB"; Integrated Security = True 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-04T13:24:42.083

我有同样的错误并将 appsettings.json 更改为

```
"DefaultConnection": "Server=localhost; database=my-vue-starter-new;MultipleActiveResultSets=true;User Id=SA;Password=myPassword;" 
```

在 linux 上很重要，服务器是 localhost，Id 自动成为 SA

欲了解更多信息：[https ://docs.microsoft.com/en-us/sql/linux/quickstart-install-connect-ubuntu?view=sql-server-ver15](https://docs.microsoft.com/en-us/sql/linux/quickstart-install-connect-ubuntu?view=sql-server-ver15)

如果您没有配置 mssql，另一件事可能会导致 gthat 问题，如果不配置则将 tcpport 启用为 1433 并尝试再次连接。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-19T13:58:36.893

出现此错误的一种方法是，如果您将`Network Profile`is 设置为`"Public"`. 它需要是`"Private"`。

改变（或检查）。

> 点击开始->设置->网络和Internet
> 
> 单击状态
> 单击更改连接属性
> 在网络配置文件下选择“私人”

# c++ - C++ 中的 new 运算符和数组

> ID：12336616
> 
> 赞同：2
> 
> 时间：2012-09-09T04:58:14.593
> 
> 标签：c++, memory

这条线是什么意思：

```
int* p = new int[2,2]; 
```

在下面的 C++ 代码中？

```
#include <iostream>
using namespace std;

int main()
{
    int* p = new int[2,2];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T05:01:54.523

```
int* p = new int[2,2]; 
```

有效地意味着

```
int* p = new int[2]; 
```

使用逗号运算符时，最右边的值被视为最终结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T05:24:56.733

两者之间的逗号`2`是“逗号运算符”。它在 C++ 中很少使用，其语义是评估左侧部分，忽略结果，然后评估右侧部分。它是少数几个保证操作数求值顺序的运算符之一（如果你不重载它）。

一个好的编译器会发出警告，因为在您的示例中，第一个表达式没有副作用并且`new int[2,2]`与`new int[2]`.

请注意，C++ 中的其他逗号不是逗号运算符...例如，函数调用中的参数之间的逗号不是逗号运算符，并且不保证参数表达式的评估顺序。比这更糟糕的是根本不存在“评估顺序”：

```
foo(f(g()), h()); 
```

例如，在上面的行中，可以调用函数的顺序可能是`g`, `h`，`f`因此您不能说第一个参数在第二个参数之前进行了评估，也不能说第二个参数在第一个参数之前进行了评估。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T05:06:16.723

它正在创建一个整数指针并将其设置为一个新数组。

# css - CSS 导航项被向右推

> ID：12336617
> 
> 赞同：0
> 
> 时间：2012-09-09T04:58:17.457
> 
> 标签：css, margin, padding

我正在尝试进行布局，但导航有问题。如果您查看下面发布的 Codepen 并将鼠标悬停在导航中的“主页”链接上，则会出现下拉菜单，并将其他主要链接推向左侧。是什么原因造成的，我该如何解决？我已经搞砸了几个小时，我迷路了。谢谢你的帮助。

[http://codepen.io/anon/pen/Cmcyr](http://codepen.io/anon/pen/Cmcyr)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T05:10:13.587

或s上没有设置宽度`a`，因此当显示 时，父级将扩展到其最宽子级的宽度。`ul``li``ul`

从`li`s 中删除水平填充并设置`text-align: center;`并给它们或它们的父级 ( `ul`) 一个与父级 ( ) 相同或更窄的最大宽度`a`。

# pthreads - 将数据传递给 pthread_create() 的困惑......它是如何工作的？

> ID：12336619
> 
> 赞同：1
> 
> 时间：2012-09-09T04:58:49.997
> 
> 标签：pthreads

请看一下我们的`pthread_create()`原型：

```
int pthread_create(pthread_t *thread, const pthread_attr_t *attr,
                          void *(*start_routine) (void *), void *arg); 
```

最后一个参数是一个空指针。但是看看互联网上的一些代码，我看到开发人员在做：

```
long t;
pthread_create( &thread, NULL, function, (void*)t); 
```

它有效！我的意思是他们没有做：

```
pthread_create( &thread, NULL, function, (void*)&t); 
```

换句话说，没有使用“t”的引用。

但是，如果我将数据类型更改为“int”而不是“long”.. 不起作用。

我相信应该始终考虑参考，但你知道为什么长时间没有参考吗？

感谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T17:43:53.910

传递给线程函数的参数是`void*`. 在一般情况下，该指针可以指向函数可以使用的某些数据块。

但是，请记住，指针本身就是一个值。`void*`如果您传递的数据量足够小以适合 a - 即如果您需要传递给函数的只是一个整数值，则通常将该值简单地用作线程函数的数据。这就是正在发生的情况：

```
long t;

t = /* some value to pass to the thread */;

pthread_create( &thread, NULL, function, (void*)t); 
```

这样做的一个优点是您无需处理线程数据的生命周期问题。

# javascript - jQuery：每次页面刷新时确认框循环

> ID：12336623
> 
> 赞同：1
> 
> 时间：2012-09-09T04:59:38.763
> 
> 标签：javascript, jquery

我正在遍历一组数据，每个数据都有自己的删除按钮`class="delete_thereid"`。当页面加载时删除按钮工作正常..现在页面再次加载后`(start_timer())`我尝试删除不同的记录，本机 js 确认框弹出两次..实际上每次页面刷新时弹出都会增加。几天来，我真的一直在努力寻找解决方案，但没有成功。这是我的代码。

```
var refreshSpeed = 8000;
var intValID = 0;

function get_post ()
{    
    $.ajax ({
         url:  "postComments.php",
         type: "post",
         cache: false,
         dataType: "json",
         data: {type: "getComments"},
         success: function (d) {
            var c = [];
            var r = [];
        v   ar cp = [];

            //Check for new post, update page.
            $(d.results.com).each (function (k, v) 
                        {
                if ($("#showComments").find ("div#"+$(v).attr ("id")).length == 0) {
                        cp.push (v);                   
                 }
                c.push ($(v).attr ("id"));

                if ($.inArray ($(v).attr ("id"), c_hashid) == -1) {
                    c_hashid.push ($(v).attr ("id"));
                }
            });

             $("#showComments").prepend (cp).fadeIn ("slow");

             remove_deleted (c_hashid, c); //remove post
             remove_deleted (r_hashid, r); //remove replies
             deletePost ();
             start_timer ();
             //optionBttn ();
             return false;
     }       
  });
}

function remove_deleted (ids, r)
{
      $.each (ids, function (k, v){

          if ($.inArray (v, r) == -1) 
          {
              $("#showComments").find ("div#"+v).slideUp ("slow");
          }
      }); 
}

function confirmDelete ()
{
    if (confirm ("Are you sure you wish to delete this post?")) {
        return true;
    }
    return false;
}

function deletePost ()
{
    $("[class^=delete]").each (function () {
        $(this).on("click", function (e) 
        {
            e.preventDefault ();
        //stop_timer ();
        if (confirmDelete ()) 
            {       
                $(this).die ("click");  //test
                $(this).unbind ().click(); //test

                //e.stopPropagation();
                //start_timer ();
        }

        });
    }); 
}

function start_timer () {
    intValID = setTimeout (function () {
                get_post ();
    }, refreshSpeed);
}

function stop_timer () {
    clearTimeout (intValID);
}

$(document).ready (function () 
{
    $("#cbutton").attr("disabled", "disabled");

    $(document).mouseup (function (e)
    {
        if ($("#layerOne").has (e.target).length === 0)
        {
            $("div[id^=replybox]").fadeOut ("fast");
        }
    });

    get_post ();
    textAreaAnim ();
    play_video ();
}); 
```

进行调用的函数是 get_post 中的 deletePost，你可以在[这里看到它在做什么](http://xlordt.linuxsecured.net/~xlordt/mfwall/)

**编辑**

过了这么久！！！我所要做的就是

```
$("[class^=delete]").on ("click", function (e) 
{
    if (confirmDelete ())
    {
        e.stopImmediatePropagation () //<----this!!! this is all I needed
        //dorestofstuff ();
    }
}); 
```

每个页面加载时不再增加确认框。stopImmediatePropagation() 很神奇！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T05:24:30.000

你可以试试换个`deletePost`方法

您可以直接将事件绑定到它们，而不是遍历一组匹配的元素：

```
function deletePost () {
    $("[class^=delete]").on("click", function(e) {
        e.preventDefault ();
        //stop_timer ();
        if (confirmDelete()) {
            $(form).die ("click");
            $(form).unbind ().click();
            //e.stopPropagation();
            //start_timer ();
        }
    });
} 
```

# c# - 正则表达式从行中获取 2 个字符串

> ID：12336625
> 
> 赞同：0
> 
> 时间：2012-09-09T05:00:28.533
> 
> 标签：c#, regex

这是处理这个问题的正确方法吗？

```
string item = "strawb bana  .93";

string itemPattern = @"\w*";
string pricePattern = @"\d*\.\d*";

var match = Regex.Match(item, itemPattern, RegexOptions.IgnoreCase);
var match2 = Regex.Match(item, pricePattern, RegexOptions.IgnoreCase);

if (match.Success & match2.Success)
{
    Console.WriteLine("match");
    Console.WriteLine(match.Value);
    Console.WriteLine(match2.Value);
}
else
    Console.WriteLine("no match"); 
```

有没有更简洁的方法？实际上，我没有正确抓住该项目。基本上，我想获取商品和价格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T05:08:32.177

只需将行更改为此，即使它包含空格，它也应该与您的项目匹配：

`string itemPattern = @"[a-z\s]*";`

**更新：** *更好的方法是使用**组**：*

```
 string item = "strawb bana as .93";
        string itemPattern = @"([a-z\s]*)(\d*\.*\d*)";
        var match = Regex.Match(item, itemPattern, RegexOptions.IgnoreCase);
        if (match.Success)
        {
            Console.WriteLine("match");
            Console.WriteLine("name: "+match.Groups[1].Value);
            Console.WriteLine("Price: "+match.Groups[2].Value);
        }
        else
            Console.WriteLine("no match");
        Console.Read(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T05:37:59.640

```
([a-zA-Z\s]+).*?(\d*\.\d{2})  //item in group 1, price in group 2 
```

*不区分大小写，匹配 0.93 或 11.93 的价格（小数点前的数字是可选的），也将匹配更奇怪的字符串，如“Strawb bana-11.98”

*更新：匹配带有数字的项目：*

```
([\w\s]+?).?(\d*\.\d{2}) //matches 'item42 Bananas .55' 
```

（显然，您可以继续构思输入并使模式逐渐变得更加复杂，但也许我应该去睡觉了 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T05:08:30.710

您可能希望组合到一个正则表达式并使用分组来捕获您想要的部分（检查我的 C#，因为我不是 C# 开发人员！）

```
string item = "strawb bana .93";
string pattern = @"([a-z\s]+)(\d*\.\d{2})"
var match = Regex.Match(item,pattern,RegexOptions.IgnoreCase);

if( match.Success ) {
    item_name = match.Groups[1].value;
    price = match.Groups[2].value;
} 
```

至于正则表达式本身：

`([a-z\s]+)`匹配一个或多个（+ 号）字母或空格并将它们捕获为组 1

`(\d*\.`开始第二组，并且可以选择匹配一个或多个数字，后跟一个句点

`\d{2})`完全匹配两位数并关闭第二组

**编辑**`?`：对于C# 的解释方式似乎存在一些分歧。我已更改`\d+?`为`\d*`“0 位或更多位”的意思

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-09T12:58:18.890

试试这个正则表达式：

```
[\w\s]*\d*\.\d* 
```

通过使用`Grouping constructs`，您的代码应该是这样的：

```
string item = "strawb bana  .93";

foreach(Match match in Regex.Matches(item, @"(?<str>[\w\s]*)(?<num>\d*\.\d+)"))
{
    String str = match.Groups["str"].Value;
    String nuum = match.Groups["num"].Value;
} 
```

解释：

**`(?< name > subexpression)`** 将匹配的子表达式捕获到命名组中。

# android - applicationcraft的App Data Storage中究竟如何保存数据？

> ID：12336628
> 
> 赞同：0
> 
> 时间：2012-09-09T05:00:50.247
> 
> 标签：android, ios, cordova, mobile

我是移动开发的新手，我正在使用[http://motech.applicationcraft.com/](http://motech.applicationcraft.com/)来运行一些应用程序。我阅读了有关 App Data Storage 并想用它来保存一些数据。

我做了类似下面的事情。

![在此处输入图像描述](../Images/7d48b35b723971abd5f4691540997cea.png)

3 存储在 d/b 值 TRUE 中的文本框。

现在我想点击保存按钮，这 3 个细节被保存。

我猜我需要在点击保存按钮时编写一些 Javascript，不知道如何/什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:59:43.307

AC 中的 Pritesh 内部存储已被弃用，因此使用 d/b value= true 不会做任何事情。使用服务器端功能将数据安全地存储到您自己的外部数据库中（请参阅[此链接](http://www.applicationcraft.com/revisions/current/docs/user-guide/index.html?data_storage2.htm)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T05:42:48.403

使用 SharedPreference 在 App 中存储数据。

喜欢..

```
public static final String PREFS_NAME = "MyPrefsFile";

SharedPreferences settings = getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE);
SharedPreferences.Editor editor = settings.edit();
editor.putString("name" valueOfName);
editor.putString("name" valueOfUserId);
editor.putString("name" valueOfPassword);
editor.commit(); 
```

# c# - WinRT - 在后面的 C# 代码中以编程方式选项卡到下一个控件

> ID：12336630
> 
> 赞同：2
> 
> 时间：2012-09-09T05:01:07.593
> 
> 标签：c#, windows-8, microsoft-metro, code-behind

一旦我成功验证了 TextBox 中的用户数据（使用 TextChanged EventHandler），我想以编程方式切换到下一个输入控件。我知道我可以硬编码名称并执行

```
Score2.Focus(Windows.UI.Xaml.FocusState.Keyboard); 
```

但我在页面页面上有 20 个 TextBox 控件，我想为所有这些控件使用相同的 EventHandler。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-09T08:15:22.067

虽然它可能是可能的（通过页面的控件检查他们的标签顺序并选择适当的下一个控件），我建议不要这样做。如果用户留下一个文本框返回并更正前一个字段，这会激怒您的用户，但您的应用程序认为它知道得更好，并将焦点放在另一个字段上。

# c++ - 一旦增加了额外的复杂性就迷失了

> ID：12336631
> 
> 赞同：0
> 
> 时间：2012-09-09T05:01:51.200
> 
> 标签：c++

就这样，这似乎不太脱离上下文，所以我不必重新发布我的所有代码，这是我最初的问题：[对象正在初始化为不需要的值](https://stackoverflow.com/questions/12336387/object-is-initializing-to-unwanted-value)

**问题：**如何在 for 循环中设计以下代码，使其成为 Transaction 方法，例如 void Transaction::promptUser()，然后询问用户是否愿意在支票或储蓄上执行交易帐户？然后它会询问他们想要做什么交易，这将影响相应的帐户。

```
 int main () {
 BankAccount checking(0.00);
    BankAccount savings(0.00);
    Transaction c(checking);
    Transaction s(savings);
    for(int i = 0; i < 10 ; i++) {
        cout << "Make an option" << endl;
        cout << "1\. Checking "   << endl;
        cout << "2\. Savings"     << endl;

        int choice;
        cin >> choice;
        if (choice == 1) {
            c.prompt();
            c.printReciept();
        }
        else {
            s.prompt();
            s.printReciept();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T05:15:20.113

创建一个实现 printReciept() 和任何帐户类型通用的其他方法的 Account 类。然后创建继承自 Account 的 CheckingAccount 和 SavingsAccount。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T05:17:51.543

我可以指出你现在最好做的一件事：

```
class Transaction {
private:
    BankAccount m_bao;
public:
    Transaction(BankAccount&);
    void displayOptions();  
    void printReciept();
}; 
```

该 BankAccount 需要通过引用（指针或引用，对我来说没有区别，但我是一个 ref-kinda-guy）。它应该是一个引用并在对象初始化器列表中的构造时初始化：

```
class Transaction {
private:
    BankAccount& m_bao;
public:
    Transaction(BankAccount&);
    void displayOptions();  
    void printReciept();
}; 
```

和

```
Transaction::Transaction(BankAccount& bao)
 : m_bao(bao)
{
} 
```

我希望很清楚为什么会这样。每笔交易都在制作银行账户的副本，然后修改该副本。原始账户未受影响。坏的。您可能发现了这一点，但不清楚它发生的原因，因此 Transaction 对象被排除在 for 循环之外。实际上，您的交易持有对自己内部银行账户副本的累积修改。原件未经修改。

# javascript - 扩展 WinJS Promise 对象

> ID：12336636
> 
> 赞同：1
> 
> 时间：2012-09-09T05:02:14.163
> 
> 标签：javascript, windows-8, winjs, promise

我想要一种简单的方法来将暂停添加到我与 Promise 链接在一起的一些内容中。

我认为包含一个“等待”方法会很好，这样我就可以编写如下内容：

```
var promise = new WinJS.Promise(function(complete){
    whatever()
}).wait(1000).then(function(){
    whatever2();
}).wait(500).done(function(){
    alldone();
} 
```

所以为了做到这一点，我向 Promise 类添加了一个等待方法，如下所示：

```
if (WinJS.Promise.prototype.wait == null) {
    WinJS.Promise.prototype.wait = function (milliseconds) {
        var promise = new WinJS.Promise(function (complete) {
            setTimeout(complete, milliseconds);
        });
        return promise;
    }
} 
```

它似乎正在工作，但我注意到如果我使用“then”，我从中得到的对象，而文档说是 WinJS.Promise，将没有等待功能。我创建的所有承诺都具有等待功能，但是在承诺上调用 .then() 会导致后续的 .wait 失败，所以......

```
promise.wait(300).then().done(); 
```

没问题，但是：

```
promise.then().wait(300).done(); 
```

会出错，说 then() 返回的 Promise 没有等待方法。

谁能解释我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T08:32:36.050

您的代码不起作用有两个原因。

首先是微软使用他们自己的方法来创建对象实例，他们是通过`WinJS.Class`命名空间来创建的——这意味着你通过添加`wait`函数而改变的原型永远不会应用于`WinJS.Promise`你在你的代码。

第二个问题是你的目标是错误的对象——返回一个对象的`WinJS.Promise.then`方法调用——所以即使你可以让你的函数坚持下去，它也会在错误的地方。该定义不在公共范围内，因此您必须进行大量修改才能进行所需的更改。`WinJS.Promise.as``CompletePromise``wait``CompletePromise`

有*一个*解决方案，但你必须使用该`WinJS.Promise.timeout`方法。你不能使用这个内联，也就是说要得到你想要的效果，你需要一些稍微笨拙的代码，如下；

```
var promise = new WinJS.Promise(function (complete) {
    whatever();
    complete();
}).then(function () {
    return WinJS.Promise.timeout(1000);
}).then(whatever2).then(function() {
    return WinJS.Promise.timeout(500);
}).then(alldone); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T08:06:46.640

这不是您问题的直接答案。向 的原型添加`wait()`方法`Promise`确实应该有效，除非`then()`返回一个看起来像 a 的对象`Promise`，嘎嘎声像 a `Promise`，但实际上不是 a `Promise`。

也就是说，您不必首先实现一个`wait()`方法，因为`Promise`已经公开了一个[timeout()](http://msdn.microsoft.com/en-us/library/windows/apps/br229729.aspx)方法，它可以做同样的事情（实际上还有更多）。您正在寻找它的单参数形式：

```
var promise = new WinJS.Promise(function(complete) {
    whatever();
}).timeout(1000).then(function() {
    whatever2();
}).timeout(500).done(function() {
    alldone();
}); 
```

# javascript - Javascript从鼠标位置拖动？

> ID：12336639
> 
> 赞同：2
> 
> 时间：2012-09-09T05:03:24.583
> 
> 标签：javascript, jquery

我有一个脚本允许用户在 iOS 上的屏幕上拖动一个 div，就像现在一样，当你开始拖动一个 div 时，它会使可拖动点成为中心。是否有可能在用户触摸的任何地方提出这一点？

代码如下所示：

```
 xPos = drag.offsetWidth / 2;
    yPos = drag.offsetHeight / 2;
    drag.addEventListener("touchmove", function() {
        event.preventDefault();
        $(this).css({
            "left" : event.targetTouches[0].pageX - xPos + "px", 
            "top" : event.targetTouches[0].pageY - yPos + "px",
            "z-index" : "1000"
        });
        $("div").not(this).css("z-index", "1"); 
        $("div[id]").each(function() {
            var id = $(this).attr("id");
            localStorage.setItem(id + "-z","1");
        });     
    }); 
```

无论如何我可以做到这一点，以便偏移量与用户的手指远离盒子边缘的距离有多远？

* * *

我认为以下可能有效，但似乎没有，它所做的只是让它抖动：

```
$(this).css({
"left" : event.targetTouches[0].pageX - parseInt($(this).css("left"), 10) +  "px", 
"top" : event.targetTouches[0].pageY  - parseInt($(this).css("top"), 10) +  "px",
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T15:10:08.267

弄清楚了。经过测试，以下仅产生了父级左侧或顶部的像素数。

```
event.targetTouches[0].pageX - $(this).offset().left 
```

诀窍是减去**FROM** `event.targetTouches[0].pageX`，这是手指距屏幕边缘的像素数。

因此，完成的代码如下所示：

```
drag.addEventListener("touchstart", function() {
    left = event.targetTouches[0].pageX - $(this).offset().left;
    top = event.targetTouches[0].pageY - $(this).offset().top;
});
drag.addEventListener("touchmove", function() {
    $(this).css({
        "left" : event.targetTouches[0].pageX - left + "px", 
        "top" :  event.targetTouches[0].pageY - top + "px",
    });
}); 
```

# php - $GLOBALS[] 本地实例还是页面的所有实例？

> ID：12336640
> 
> 赞同：0
> 
> 时间：2012-09-09T05:03:32.557
> 
> 标签：php

似乎在页面实例中定义的全局变量存在，直到页面完成渲染然后被删除。我有点担心它可能会延续到服务器上正在打开的页面的另一个实例，就像静态变量一样（至少在 ASPX 中是这样）。$GLOBALS 数组中的定义变量是否只存在于该页面实例？这是一个简单的问题，但我非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T05:06:53.540

php 中的所有变量都存在，直到 php 完成其处理。

所以在生成响应后 - 所有变量、连接等都丢失了

# clojure - 如何使用 jetty/ring 向 ipad 提供视频文件

> ID：12336643
> 
> 赞同：3
> 
> 时间：2012-09-09T05:03:52.023
> 
> 标签：clojure, jetty, ring

我已经建立了一个带有文件服务器的简单环服务器

```
（ns 从头开始​​。基本测试
  (:use [ring.middleware.file :only [wrap-file]]
        [ring.middleware.file-info :only [wrap-file-info]])
  (:require [ring.adapter.jetty :as jetty]))

（定义裸处理程序 [请求]
  {：状态 200
   :headers {"Content-Type" "text/html"}
   :body (str 请求})

（防御服务器
  (run-jetty (-> #'naked-handler
                 （包装文件“资源/公共”）
                 包装文件信息）               
             {：端口 8890：加入？错误的}））

```

我有`test.mp4`和`video.html`在`resources/public`目录中。

* * *

`video.html`引用 mp4 文件：

```
 ...blah...
  <video id="my_video_1" controls>
     <source src="test.mp4" type='video/mp4'>
   </video>
  ...blah... 
```

* * *

`http://server-ip-address:8890/video.html`当我在 safari、firefox 中打开时，它工作正常

但是，当我在 ipad 上打开它时，它没有.. 而是显示一个黑色的不能播放矩形。

* * *

当我将相同的文件放入 apache 服务器并在 ipad 上打开 video.html 时，视频播放完美....

到底是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:22:51.373

我会在这里回复，因为评论部分对我来说太紧了:)。

我认为在更改任何内容之前先看一下 HTML 标头是有意义的。将 Apache 提供给您的内容与 ring 进行比较。该问题可能与[此处](https://stackoverflow.com/questions/9415050/serving-mp4-video-to-ipad)描述的问题有关，也可能与其他问题有关。如果您不知道如何查看标题，[这](https://stackoverflow.com/questions/5374100/how-to-debug-the-http-response-headers-from-a-http-call)可能会有所帮助。

至于修改标题，我认为如果需要修改任何内容，它将在环级别而不是 Jetty 上。

我在这里运行您的应用程序是标题：

```
Name    Value
Date    Wed, 12 Sep 2012 05:26:20 GMT
Content-Length  36320472
Last-Modified   Sat, 12 May 2012 21:04:47 +0000
Server  Jetty(7.6.1.v20120215)
Content-Type    video/mp4;charset=UTF-8 
```

它在 Chrome 中播放，抱歉我没有 iPad 来检查它。内容长度是正确的，它等于原始 mp4 文件的大小。

我想除非您从两台服务器上发布标头，否则我无能为力。

# php - 使用 PHP 获取 SQL-Server 中的行数

> ID：12336646
> 
> 赞同：2
> 
> 时间：2012-09-09T05:04:50.277
> 
> 标签：php, sql-server, sql-server-2008

我对 SQL-Server 和 PHP 相当陌生，但我正在尝试使用 PHP 获取表中的总行数。

这是我正在使用的代码，它连接得很好，但是它不会打印行数：

```
<?php
$serverName = "SERVER1\SQLEXPRESS";
$connectionInfo = array( "Database"=>"petitionlist");
$conn = sqlsrv_connect( $serverName, $connectionInfo);
if( $conn === false )
{
     ?>
        <b>Error: </b>Could not connect to the server database.
     <?php
     die( print_r( sqlsrv_errors(), true));
}
$tsql = "Select Count(*) from SignatureTable";
$stmt = sqlsrv_query( $conn, $tsql);
if( $stmt === false )
{
     ?>
     <b>Error: </b>
     <?php
     die( print_r( sqlsrv_errors(), true));
}
    ?>
    <b>Result:</b><br />
    <?php
print_r(sqlsrv_fetch_object($stmt));

sqlsrv_free_stmt( $stmt);
sqlsrv_close( $conn);
?> 
```

如果我在 SQL Server Studio 上执行“从 SignatureTable 中选择计数（*）”命令，它会返回正确的数字。所以这不是我的服务器，而是我的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T07:06:20.033

我相信你的来电

```
print_r(sqlsrv_fetch_object($stmt)); 
```

可能是错的。至少查看有关如何进行调用的文档，表明那里可能存在错误。

[http://www.php.net/manual/en/function.sqlsrv-fetch-object.php](http://www.php.net/manual/en/function.sqlsrv-fetch-object.php)

您可能想尝试使用 fetch 而不是 fetch-object。我建议按照这个例子。

[http://www.php.net/manual/en/function.sqlsrv-fetch.php](http://www.php.net/manual/en/function.sqlsrv-fetch.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T05:52:07.617

核实：

[http://www.php.net/manual/es/function.sqlsrv-num-rows.php](http://www.php.net/manual/es/function.sqlsrv-num-rows.php)

" `sqlsrv_num_rows()`— 检索结果集中的行数"

像：

```
$row_count = sqlsrv_num_rows( $stmt);
echo 'numRows: ',$row_count; 
```

# python - 将图像上传到 S3 (boto + GAE)

> ID：12336648
> 
> 赞同：3
> 
> 时间：2012-09-09T05:05:23.697
> 
> 标签：python, google-app-engine, boto

我正在尝试使用我的 GAE python 应用程序设置 s3（使用 boto）来存储用户上传的图像。目前我收到以下错误：

```
File "/Users/phyzikz/project/boto/s3/key.py", line 936, in set_contents_from_file spos = fp.tell()
AttributeError: 'str' object has no attribute 'tell' 
```

我不知道为什么会发生这种情况——上传的文件应该是 png。这是进行上传的代码：

```
class Settings(Handler):
    def get(self):
        self.render('settings.html')

    def post(self):
        image = self.request.get('image')

        if image:
            connection = S3Connection('<ak>','<sak>')
            bucket = connection.create_bucket('<s3bucket>')
            k = Key(bucket)
            k.key = '/pictures/users/'+ str(self.user.key().id())
            k.set_contents_from_file(image) 
```

如果它有帮助，那么在用 set_contents_from_string('some string') 替换 set_contents_from_file(image) 时，它的调试效果很好。我一定错过了一些简单的东西。这是html：

```
<form method='post' action='/settings' enctype='multipart/form-data'>
    <input type='file' name='image'>
    <input type='submit'>
</form> 
```

免责声明：我对 python 和 SO 都是新手（这是我的第一个问题！）如有必要，任何对改进问题措辞的编辑将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T09:54:12.453

您需要将图像包装在 StringIO 实例中，使其看起来像一个文件对象

```
Python 2.7.2+ (default, Oct  4 2011, 20:03:08) 
[GCC 4.6.1] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> x = "123"
>>> from StringIO import StringIO
>>> y = StringIO(x)
>>> y.tell()
0
>>> 
```

所以在你的情况下你会

```
k.set_contents_from_file(StringIO(image)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T05:14:50.893

如果您可以将代码（在方法中：`set_contents_from_file`在`Key`类中）放在您定义或分配的地方`fp`，我们可以提供更好的帮助。但是，查看错误`AttributeError: 'str' object has no attribute 'tell'`，很明显它`fp`不是文件对象。它是一个字符串对象，因此是错误的。由于您是 SO 新手，请首先尝试自己更正代码，然后，如果您仍然无法解决问题，您可以粘贴您用来更改`fp`文件对象的代码。

# android - 获取该位图屏幕中当前可见部分的坐标（x 和 y）

> ID：12336650
> 
> 赞同：1
> 
> 时间：2012-09-09T05:06:00.593
> 
> 标签：android, bitmap, imageview, zooming

我需要知道;

缩放位图图像时，如何获取该位图屏幕中当前可见部分的坐标（x 和 y）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-28T12:10:19.560

```
float [] values = new float[9];
matrix.getValues(values); 
```

你想要的 x 坐标 -->`float transX = m[Matrix.MTRANS_X];`

你想要的 y 坐标 -->`float transY = m[Matrix.MTRANS_Y];`

# javascript - JavaScript setInterval 问题

> ID：12336653
> 
> 赞同：1
> 
> 时间：2012-09-09T05:06:51.600
> 
> 标签：javascript, html, loops, intervals

嘿伙计们，我正在尝试使用 setInterval 运行循环，但我希望数组中的每个元素都使用随机间隔而不是整个数组这样做......这是我目前使用的代码

```
setInterval(function() {
        for ( var j = 0; j < aliens.length; j++ ){
            aliens[j].shootIt();
        }
    }, 1000+Math.floor(Math.random() * 4000)
); 
```

但我有点卡在这里......提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T05:40:05.083

看这里：[一页可以同时设置多少个javascript setTimeout/setInterval 调用？](https://stackoverflow.com/questions/2553138/how-many-javascript-settimeout-setinterval-call-can-be-set-simultaneously-in-on) 基本上，您需要将 setInterval 的结果分配给一个变量。这样做将允许您随后将 clearInterval 与该变量一起使用

我在这个例子中使用了这种技术。这样做可以让您更改分配给不同元素的间隔 - 我们首先检查是否有任何保存的值。如果是这样，我们对它们调用 clearTimeout。

从那里，我们在每个目标项上调用 setInterval，将结果保存到数组中 - 准备好在用户下次按下按钮时清除。

```
<!DOCTYPE html>
<html>
<head>
<title>Moving a couple of spans with different intervals</title>
<script type="text/javascript">
var myIntervals = [];
function Init()
{
    if (myIntervals.length != 0)
    {
        for (var i=0, n=myIntervals.length; i<n; i++)
        {
            clearInterval(myIntervals.pop());
        }
    }
    myIntervals.push(setInterval(function(){onMove('sp1');}, (Math.random()*500)>>0 ));
    myIntervals.push(setInterval(function(){onMove('sp2');}, (Math.random()*500)>>0 ));
    myIntervals.push(setInterval(function(){onMove('sp3');}, (Math.random()*500)>>0 ));
}

function constructStyleString(xPos, yPos)
{
    var result = "margin-top: " + yPos + "px;";
    result += "margin-left: " + xPos + "px;";
    return result;
}

function onMove(tgtId)
{
    var xPos, yPos;
    xPos = Math.random() * 640;
    yPos = Math.random() * 480;
    var elem = document.getElementById(tgtId);
    elem.setAttribute("style", constructStyleString(xPos, yPos));
}
</script>
<style>
span
{
    position: absolute;
}
</style>
</head>
<body onload="Init();">
    <button onclick="Init();">(Re)set item intervals</button>
    <span id='sp1'>This is the first item</span>
    <span id='sp2'>This is the second item</span>
    <span id='sp3'>This is the third item</span>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T05:22:32.920

假设您想以随机间隔调用该函数，原因`setInterval`对您不起作用是在设置计时器之前计算随机数。特别是，当您调用`setInterval`函数表达式和计时器间隔都被计算（一次）时，函数会在计算的间隔处被调用。

换句话说，在评估您的代码时，随机数评估可能会导致 2.5 秒的间隔。然后您的函数将以 2.5 秒的间隔被调用。

你应该`setTimeout`改用。

```
var shootAliens = function () {
    // code to shoot aliens goes here
    // ...
    setTimeout(shootAliens, 1000+Math.floor(Math.random() * 4000));
}; 
```

现在在拍摄完所有外星人后，这段代码将在 1 到 5 秒之间的随机时间后安排下一次外星人拍摄。在那次拍摄之后，为下一次拍摄计算*新的随机延迟。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T05:24:19.667

将`for`循环移到区间外，然后在每次迭代中调用一个函数，以便`j`为每个区间实例设置一个固定值。

```
var shootIntervals = []; //this goes in the "global" context of your game

for ( var j = 0; j < aliens.length; j++ ) {
    intervals(j);
}

function intervals(j) {
    shootIntervals[j] = setInterval(function() {
        if (!aliens[j]) return;
        aliens[j].shootIt();
    }, 1000+Math.floor(Math.random() * 4000));
}

//clearInterval(shootIntervals[j]) when they're destroyed 
```

这将为数组中的每个项目提供静态随机间隔。

[**小提琴**](http://jsfiddle.net/ult_combo/KMJGh/)

# eclipse - 无法让 Symfony2 Eclipse 插件工作

> ID：12336655
> 
> 赞同：5
> 
> 时间：2012-09-09T05:06:53.543
> 
> 标签：eclipse, symfony, symfony-2.1

我通常使用 PHPStorm 进行开发，但是我注意到[http://symfony.dubture.com/](http://symfony.dubture.com/) Eclipse 插件看起来会让 symfony2 的开发更加容易。所以我想试一试。

但是，我一辈子都无法让它发挥作用。

我以前从未使用过eclipse，但这是我经历的整个过程

1.  下载eclipse（eclipse classic juno最新版）
2.  安装 symfony2 插件 (p2.dubture.com)
3.  安装eclipse web开发插件
4.  切换到 PHP 视角
5.  在现有位置创建 symfony 项目
6.  启用 JavaScript 支持
7.  启用树枝支持
8.  启用学说支持
9.  根据网站上的常见问题解答正确设置 PHP 构建路径

我让 DLTK 完成对我的项目的索引。

我打开我的树枝视图之一，根本没有代码帮助。`{{path('`什么都不`{% block`带什么 什么也不`{% extends`带什么，等等。我确实有树枝语法突出显示，所以我知道它的一部分在那里。

现在，我去我的一个控制器并输入 `$product = $this->getDoctrine()->getRepository("`

这确实会带来代码帮助并列出所有可用的捆绑包。所以我选择了我的捆绑包，但我的实体都没有出现，它只说“没有默认提案”我确实得到了代码协助`$this->get("`

如果我右键单击我的项目，转到属性，转到构建器 Doctrine、Symfony、Validation、Script Builder 都存在并已检查。虽然没有看到 twig 的条目。

这是我的 Eclipse 日志[http://pastebin.com/CA76YvKf的 pastebin](http://pastebin.com/CA76YvKf)

我尝试过清理项目，一遍又一遍地开始我的整个过程，即使在不同的机器上，总是得到完全相同的结果

我知道很多人都在使用它，所以我一定是做错了什么。如果这里有人有任何建议，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T17:04:54.580

我这样做的方式：

*   下载日食（朱诺）
*   为 Eclipse 安装 pdt (http://wiki.eclipse.org/PDT/Installation_3.1.x) // 如您所见：“PHP 开发工具”下的“PHP 开发工具 (PDT) 运行时功能”
*   创建php项目
*   项目上的上下文菜单 > 配置 > 添加 php 支持
*   安装 symfony2 插件 (p2.dubture.com)
*   项目上的上下文菜单 > 配置 > 转换为 symfony 项目

希望这可以帮助。

# c# - 控制位置在运行时移动后不更新

> ID：12336656
> 
> 赞同：0
> 
> 时间：2012-09-09T05:06:54.580
> 
> 标签：c#, wpf-controls

我有一个应用程序需要在画布中动态创建和移动文本块，稍后保存布局并加载布局。我面临的问题是获取文本块的位置很累。我尝试了这两种方法，但它不起作用

```
item.GetValue(TranslateTransform.XProperty).ToString();//always give zero
Canvas.GetTop(item);//always gives the initial position, does not update after dragging. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T05:38:25.687

从控件获取坐标：

```
foreach (UIElement el in mapGrid.Children)
        {
            XElement control = new XElement("control");

            var ele = (HumanWorkspace)el;
            Vector v = VisualTreeHelper.GetOffset(el);
            double x = v.X;
            double y = v.Y;
            XAttribute atd = new XAttribute("direction", ele.Direction.ToString("d"));
            XAttribute atx = new XAttribute("x", v.X.ToString());
            XAttribute aty = new XAttribute("y", v.Y.ToString());
            control.Add(atd);
            control.Add(atx);
            control.Add(aty);
            controls.Add(control);
        } 
```

加载状态时设置坐标：

```
foreach (XElement ele in doc.Elements("controls"))
            {
                var con = new HumanWorkspace();
                con.Direction = (WorkspaceDirection)int.Parse(ele.Attribute("direction").Value);
                con.SetValue(TranslateTransform.XProperty, double.Parse(ele.Attribute("x").Value));
                con.SetValue(TranslateTransform.YProperty, double.Parse(ele.Attribute("y").Value));
            } 
```

# opencv - OpenCV：匹配模板，结合紧密匹配

> ID：12336657
> 
> 赞同：2
> 
> 时间：2012-09-09T05:07:14.283
> 
> 标签：opencv, emgucv, matchtemplate

相关：[OpenCv：查找多个匹配项](https://stackoverflow.com/questions/12328438/opencv-finding-multiple-matches/12328880#12328880)

我现在可以标记所有匹配项的位置。但是，因为有些匹配并不完美，所以我需要稍微降低我的门槛。这意味着我有一堆像素都匹配同一个项目。

所以，如果实际匹配在 5,5，我在 4,4 到 6,6 的范围内有 9 个匹配。

将每一个组合在一起的最佳方法是什么，以便我为每个匹配集群都有一个点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:21:32.590

您可以只保留所有相邻匹配中的最佳匹配，即仅相隔一个像素的匹配。

一种方法是提取阈值图像中的连通分量，对于每个连通分量，在结果图像中查找最小值的位置，并将其保持为“最佳”。

# tfs - 将 TFS 2010 和 TFS 2012 RC 升级到 TFS 2012 final

> ID：12336661
> 
> 赞同：5
> 
> 时间：2012-09-09T05:07:34.393
> 
> 标签：tfs

目前我们公司正在使用 TFS 2010 和 TFS 2012 RC。我们需要在不同的服务器上将 TFS 2010 和 TFS 2012 RC 升级到 TFS 2012 final，人们已经在使用 TFS 2010 和 TFS 2012 RC 环境。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T10:58:54.413

我不太确定这里的问题是什么，所以我会给你一些链接，其中包含有关升级过程的信息。如果您有具体问题，请随时提问。

TFS Rangers 整理的升级指南：http: [//vsarupgradeguide.codeplex.com/releases](http://vsarupgradeguide.codeplex.com/releases)

官方安装和管理指南：[http ://www.microsoft.com/en-us/download/details.aspx?id=29035](http://www.microsoft.com/en-us/download/details.aspx?id=29035)

涵盖该主题的书籍的链接：[https ://www.smashwords.com/books/view/181289](https://www.smashwords.com/books/view/181289)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T03:57:27.933

TFS 集成项目就是您想要的。

[http://tfsintegration.codeplex.com/](http://tfsintegration.codeplex.com/)

我们已经使用它成功地将两个具有多个项目集合的 TFS 2010 服务器整合到一个具有单个项目集合的 TFS 2012 中。它还提供双向同步，因此可以逐步迁移用户。

# iphone - 希望在选择选项卡栏时显示操作表

> ID：12336662
> 
> 赞同：1
> 
> 时间：2012-09-09T05:07:48.213
> 
> 标签：iphone, tabbar, uiactionsheet

我有一个与标签栏配合良好的教育应用程序。其中一个选项卡是对用户的测试。如果参加测试的用户选择另一个选项卡，我希望显示一个操作表以确认他们确实想要退出测试，因为他们的测试结果将会丢失。

我无法显示操作表。下面的前三个示例出现语法错误。第 4 个示例将编译成功，但应用程序中止。我不知道应该去追求自我。或者，如果我的语法正确，其他示例之一可能会起作用。

```
 - (void)tabBarController:(UITabBarController *)tabBarController 
didSelectViewController:(UIViewController *)viewController {
NSLog(@"Tab Bar Controller reached");

UIActionSheet *actionSheet = [[UIActionSheet alloc]
                              initWithTitle:@"This will end the test.  
                              Are you sure you want to leave?"
                              delegate:self
                              cancelButtonTitle:@"Cancel"
                              destructiveButtonTitle:@"Yes, 
                              cancel the test."
                              otherButtonTitles:nil];
[actionSheet showInView:self.view];   
[actionSheet showInView:elements1AppDelegate.window];
[actionSheet showFromTabBar:self.tabBarController.tabBar];
[actionSheet showFromTabBar:self]; 
```

最终，一旦我显示操作表，我将继续选择选项卡或停留在测试视图中，具体取决于用户是否决定退出。任何帮助/建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T06:04:00.450

方法的名称`tabBarController:didSelectViewController:`应该表明停止选择为时已晚。它的返回类型`void`表明您对此无能为力。而是专注于其中包含“will”或“should”的方法名称，并返回诸如`BOOL`s 之类的类型`tabBarController:shouldSelectViewController:`。因此，这里有一些基本代码可以满足您的需求。

我不知道您的测试视图控制器的实际类名，所以我将`QuizController`用作类名。`QuizController`是一个`UIViewController`子类。

**测验控制器.m**

```
@interface QuizController () <UITabBarControllerDelegate,UIActionSheetDelegate>{
    BOOL _testInProgress;
}
@end
@implementation QuizController
-(void)viewDidAppear:(BOOL)animated{
    [super viewDidAppear:animated];
    // When a tabs view controller is presented viewDidAppear: will be called so here we will set this view controller as the tabBarController delegate so we get the callback.
    self.tabBarController.delegate = self;
}
-(void)startQuiz{
    _testInProgress = YES;
    // Begin testing code
}
-(void)stopQuiz{
    // Score test record results
    _testInProgress = NO;
}
-(void)cancelQuiz{
    // Throw out results
    _testInProgress = NO;
}
-(BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController{
    if (!_testInProgress) return YES;
    // If trying to select this controller then who cares?
    if (viewController == self) return YES; // Or NO. Just don't show the sheet.
    UIActionSheet *action = [[UIActionSheet alloc] initWithTitle:@"You are in the middle of a test. Are you sure you want to switch tabs?"
                                                        delegate:self
                                               cancelButtonTitle:@"Continue Test"
                                          destructiveButtonTitle:@"Abort Test"
                                               otherButtonTitles:nil];
    // Lets cheat and use the tag to store the index of the desired view controller.
    action.tag = [self.tabBarController.viewControllers indexOfObject:viewController];
    [action showFromTabBar:self.tabBarController.tabBar];
    return NO;
}
-(void)actionSheet:(UIActionSheet *)actionSheet didDismissWithButtonIndex:(NSInteger)buttonIndex{
    if (buttonIndex == actionSheet.destructiveButtonIndex){
        [self cancelQuiz];
        // The above cheat pays off.
        [self.tabBarController setSelectedIndex:actionSheet.tag];
    }
} 
```

**编辑（回应引用的评论）**

> 我对你的例子有点困惑。目前，我的“参加考试”课程是 UIViewController。您是否建议我用上面的 QuizController 替换它？

不，我建议您采用此代码并将设计模式集成到`UIViewController`处理您的测试的子类中。虽然这是一个工作示例（假设您提供 UI 来切换`_testInProgress`ivar。）

> 我是否将当前的 UITabBarController 留在原处？

是的。

> 那是目前我的 appdelegate 和 rootController。

嗯？你`UITabBarController`几乎肯定是你的`rootViewController`。但是除非你做了一些非常奇怪`AppDelegate : UITabBarController <UIApplicationDelegate>`的事情，顺便说一下不要这样做，那么你的“appdelegate”和你的不太可能`UITabBarController`是一样的。你更有可能`AppDelegate`是你`tabBarController`的代表。

如果只是`tabBarController.delegate`在外观上设置属性是不好的（很可能是），即一些其他对象需要成为`tabBarController`的委托，那么您必须将消息转发到该视图控制器以查看是否有测试进步。为此，您实际上可以将示例中的几乎所有代码保持不变。当然，您必须删除`self.tabBarController.delegate = self;`in `viewDidAppear:`。并将以下内容放入您的`AppDelegate`（假设是`tabBarController`'s 代表）：

```
-(BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController{
    if ([tabBarController.selectedViewController respondsToSelector:@selector(tabBarController:shouldSelectViewController:)]){
        return [(NSObject <UITabBarControllerDelegate>*)tabBarController.selectedViewController tabBarController:tabBarController shouldSelectViewController:viewController];
    }
    return YES;
} 
```

这个实现基本上将回答问题的责任转发给视图控制器，前提是它会回答问题。

> 如果选择了“参加考试”选项卡，我会在那里检查并在我的“参加考试”类中调用初始化方法。

在我*看来*，当用户点击选项卡时，应该简单地选择“参加测试”视图控制器。它的视图应该包含一个按钮，上面有“开始测试”的效果。但那只是我的个人意见。

但无论如何，应用程序对用户是否参加考试的了解应该驻留在管理考试的视图控制器中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T05:34:52.910

```
[actionSheet showInView:[[[UIApplication sharedApplication] windows] objectAtIndex:0]]; 
```

你试过这个 One [Link](http://runmad.com/blog/2010/04/uitabbarcontroller-and-uiactionsheet-65-percent-less-hit-point/)

# css - trigger.io 内置浏览器总是 webkit 吗？

> ID：12336664
> 
> 赞同：2
> 
> 时间：2012-09-09T05:08:03.407
> 
> 标签：css, trigger.io

我正在为我的应用程序修改 css。我是否正确假设 webkit 特定的 css 前缀将始终适用于 Android 和 iOS forge 构建的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:36:49.010

在您的设备测试过程中找出几种方法：

*   如果您使用的是 jQuery，那么...

    forge.logging.log($.browser.webkit);

*   如果您不使用 jQuery，则解析用户代理...

    forge.logging.log(/webkit/i.test(navigator.userAgent));

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T08:52:03.317

最有可能的是，您可以坚持使用 webkit 前缀 + 无前缀。

供应商前缀一团糟，opera 最近宣布他们将支持 webkit 前缀，即使 opera 不是 webkit 浏览器——因为很多网站都使用 webkit-only 前缀......好吧......

如果你想一路摆脱前缀，（更干净的 CSS）你可以使用 PrefixFree js：[http ://leaverou.github.com/prefixfree/](http://leaverou.github.com/prefixfree/)

# c# - 如何从 Kinect 向 Arduino 发送信息？

> ID：12336668
> 
> 赞同：4
> 
> 时间：2012-09-09T05:08:39.773
> 
> 标签：c#, arduino, kinect, processing

我想让我的 Arduino 响应从我的 Kinect 获取的信息。具体来说，我希望我的 Arduino 能够根据 Kinect 所采用的关节坐标位置来激活某些继电器。

我正在使用 C# 来运行 Kinect 和 Processing 来运行 Arduino。可以使用 Processing 运行 Kinect，但我宁愿不采用这种方法，因为我将不得不使用包装器和其他杂乱的东西。

我在 Windows 7 机器上运行所有这些，因为 Kinect SDK 仅适用于 Windows 7，但我也有 Windows XP 和 Ubuntu 12 机器可以使用。

非常感谢任何输入！

编辑：自己解决了！使用 C# 中的 SerialPorts 与 Arduino 进行通信。还必须为 Arduino 编写一个程序来处理 PC 发送的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T17:33:39.033

USB 连接/SDK 允许 pc 读取连接，并且相同的 Windows 程序可以创建到 arduino 的串行连接。您可以将数据流发送到接近实时的 arduino。

您不需要向 arduino 发送太多信息。例如，您可以为每个关节 0、1、2、3、4 等分配一个 1 字节的 id，然后可能只是一个简单的值来表示运动程度。

在这个例子中，0 代表一只手，1 代表膝盖……

```
0,180
0,90
1,45 
```

这是一篇关于将 C# 串行与 arduino 连接以发送实时流的好文章

[http://jtoee.com/2009/02/talking-to-an-arduino-from-net-c/](http://jtoee.com/2009/02/talking-to-an-arduino-from-net-c/)

# c - 在某些情况下，否定 c 中的浮点数失败

> ID：12336675
> 
> 赞同：-1
> 
> 时间：2012-09-09T05:10:13.487
> 
> 标签：c, bit-manipulation

我编写了一个适用于数百种情况但在某些情况下失败的函数。

这是C函数：

```
unsigned negate_number(unsigned x) {
  int sign = (!(x & 0x80000000))<<31;
  int other = 0x7FFFFFFF & x;
  return (sign | other);
} 
```

我只是在掩蔽符号，将其反转并使用掩蔽指数和 mantessa 进行 OR（连接）。所以这应该适用于所有情况。

但这里有一个失败的例子：x = 0x7fc00000 (2143289344)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T05:35:48.783

我问：

> 当代码使用整数时，为什么要在标题中询问“浮点数”？您是否尝试使用 a 调用该函数`float`并将其视为或多或少的位数组？如果是这样，你就什么都没有了！`float`如果您在范围内使用原型调用函数，C 编译器会将`unsigned int`. 如果您不使用范围内的原型调用它，C 编译器将在调用函数之前将其转换`float`为 a 。`double`

回应是：

> 它是一个 32 位 IEEE 754 单精度数。所以我只是翻转最重要的位（符号位）。

要翻转 32 位（无符号整数）量的最高有效位，您可以简单地编写：

```
x ^= 0x80000000; 
```

`float`但是，正如我所指出的，除非您对编译器撒谎，否则您根本不会通过 32 位。如果您有以下情况，您可以“让它工作”（有时在某些机器上）：

## 假代码

### 文件A.c

```
extern float negate_number(float x);

...
float f1 = 3.14159;
float f2 = negate_number(f1);
... 
```

### 文件B.c

```
unsigned negate_number(unsigned x)
{
    return x ^ 0x80000000;
} 
```

但是，您是在玩火并欺骗您的编译器。编译器讨厌被骗，并且经常想办法让自己回来。 **不要这样做！**

## 主要是犹太洁食代码

要以最少的问题（但不是“没有问题”）或多或少地达到您想要的效果，您可能需要：

### 文件B.c

```
float negate_number(float f)
{
    union { unsigned x; float y; } u;
    u.y = f;
    u.x ^= 0x80000000;
    return u.y;
} 
```

`u.x`严格来说，在赋值后读写`u.y`是未定义的行为，但它通常会做你想做的事；`u.y`与操作后返回类似`u.x`。

所有这些都假设 和 的位布局`float`使得`unsigned`的符号位`float`是 的最高有效位`unsigned`。

# c++ - 声明一个动态大小的数组

> ID：12336676
> 
> 赞同：3
> 
> 时间：2012-09-09T05:10:22.190
> 
> 标签：c++, arrays, compiler-construction

如果我想在主函数中声明一个动态大小的数组，我可以这样做：-

```
 int m;
 cin>>m;
 int *arr= new int[m]; 
```

无法执行以下操作，因为编译编译器必须知道每个符号的大小，除非它是外部符号：-

```
 int m;
 cin>>m;
 int arr[m]; 
```

我的问题是：

1.  为什么编译器必须知道上述代码中 arr 的大小？它是一个未在符号表中定义的局部符号。在运行时，堆栈会处理它（与 m 相同）。是因为编译器必须确定 main() （全局符号）的大小等于其中定义的所有对象的大小吗？

2.  如果我有一个功能：

    ```
    int func(int m) 
    ```

    我可以在函数内部定义 int arr[m] 还是我必须这样做

    ```
    int *a= new int[m] 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T05:15:29.647

例如 ：

```
int MyArray[5]; // correct 
```

或者

```
const int ARRAY_SIZE = 6;
int MyArray[ARRAY_SIZE]; // correct 
```

但

```
int ArraySize = 5;
int MyArray[ArraySize]; // incorrect 
```

这也是[Bjarne Stroustrup 在 The C++ Programming Language](http://www2.research.att.com/~bs/3rd.html)中解释的内容：

> 数组元素的数量，数组绑定，必须是一个常量表达式（§C.5）。如果您需要变量界限，请使用向量（第 3.7.1 节、第 16.3 节）。例如：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T05:33:28.640

要回答您的问题：

1) 问：为什么编译器必须知道上面代码中 arr 的大小？

答：如果您生成汇编输出，您会注意到某个固定值的“减法”以在堆栈上分配您的数组

2) 问：我可以在函数内部定义 int arr[m] i ... 吗？

答：当然可以。*并且在您退出*该功能的那一刻将变得*无效*；）

 *基本上，你不想要一个“数组”。C ++“向量”将是一个不错的选择：

`std::vector<A> v(5, A(2));`

以下是您可能会喜欢的几个链接：

*   [http://www.parashift.com/c++-faq/arrays-are-evil.html](http://www.parashift.com/c++-faq/arrays-are-evil.html)

*   [http://blogs.msdn.com/b/ericlippert/archive/2008/09/22/arrays-considered-somewhat-harmful.aspx](http://blogs.msdn.com/b/ericlippert/archive/2008/09/22/arrays-considered-somewhat-harmful.aspx)*

# android - MapView 和自动完成无法让布局工作

> ID：12336681
> 
> 赞同：0
> 
> 时间：2012-09-09T05:11:40.987
> 
> 标签：android, layout, android-mapview

我无法让布局为此工作。

我有一个适用于这种布局的地图视图：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"  
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:id="@+id/rel_layout_mapview">

 <org.osmdroid.views.MapView
      xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
     />

<ImageView android:id="@+id/drag"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:src="@drawable/ss_pin"
android:visibility="gone"
 /> 
```

没问题，但是一旦我尝试在其上方进行自动完成，它就不起作用。

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" 
android:layout_height="fill_parent"
>

<AutoCompleteTextView android:id="@+id/autocomplete_country"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    />
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"  
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:id="@+id/rel_layout_mapview">

<org.osmdroid.views.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
     />

<ImageView android:id="@+id/drag"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:src="@drawable/ss_pin"
android:visibility="gone"
/>

</RelativeLayout>

</LinearLayout> 
```

有人可以指出我如何使用地图视图和上方的自动完成进行布局的正确方向。mapview 必须在它的 OWN 相对视图中，因为我有很多代码专门用于引用 mapview 的父级进行计算。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T01:57:38.387

我可以通过设置边距来解决它。

```
<FrameLayout   xmlns:android="http://schemas.android.com/apk/res/android"  
         android:layout_width="fill_parent"
         android:layout_height="fill_parent">
  <LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
         android:layout_height="50dip" >
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <AutoCompleteTextView
        android:id="@+id/locationsearch2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="Enter zipcode or address"
        tools:context=".AutoCompleteDynamic" />

</RelativeLayout>

  </LinearLayout>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"  
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:id="@+id/rel_layout_mapview"
  android:layout_marginTop="50dip">

   <org.osmdroid.views.MapView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/mapview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:clickable="true"
         />

<ImageView android:id="@+id/drag"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/ss_pin"
    android:visibility="gone"
  />
</RelativeLayout>

</FrameLayout> 
```

# backbone.js - 带有带有 ID 的咖啡脚本路由器的骨干网不起作用

> ID：12336684
> 
> 赞同：0
> 
> 时间：2012-09-09T05:12:09.710
> 
> 标签：backbone.js, coffeescript

我有 Backbone 应用程序这里是代码：

这是 Main.coffee ：

```
require ["App/app","backbone"] ,(App,Backbone)->
app = new App()
Backbone.history.start() 
```

这是 app.coffee ：

```
class AppRouter extends Backbone.Router 
    routes :
        "" : 'Base'
        "Browse/:id" : "Details"

    initialize : ->         
        @render()

    Browse : (id) ->
        console.log "Hello"
        stud = new Student({UserKey:id})
        stud.fetch({
            success :->
                $('#content').html new View({model:stud}).el
        })
        null 
```

这是我的观点。咖啡

```
define ['jquery'
    ,'underscore'
    ,'backbone'
    ,'text!/Templates/Student/View.htm'] , ($ , _ , Backbone , ViewTemplate) ->

class StdView extends Backbone.View

    #_.templateSettings = { interpolate: /\{\{(.+?)\}\}/g };

    #template : _.template(View)

    initialize : (options) ->           
        @render()

    render :->
        console.log @model.toJSON()
        #@setElement @template @model.toJSON()
        @ 
```

这是我的视图模板（用于显示学生的详细信息）

```
 <input type="text" name="firstname" value="{{FirstName}}" placeholder="First Name" />
    <input type="text" name="lastname" value="{{LastName}}" placeholder="Last Name" /> 
```

这些项目被呈现到一个带有链接的表格中，我从该链接单击编辑按钮以获取详细信息。这是渲染 id 的模板部分。

```
 <td>
    <a class="btn btn-small btn-inverse" href="#browse/{{UserKey}}"><i class="icon-edit icon-white"></i></a>
</td> 
```

现在我已经启动了 Backbone.history.start() 。但是，如果我单击链接，例如：/browse/1，它就不会使用它应该使用的 Browse 方法。它没有发生。单击时在浏览器上呈现的链接是这样的

**http://localhost:40921/#browse/5**

那么到底哪里出错了？？？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T06:04:30.663

路由区分大小写，你应该有这个：

```
routes :
    "" : 'Base'
    "browse/:id" : "Details" 
```

如果你想做`#browse/5`任何事。或者保持您现在的路线并更改您的链接以使用`#Browse/5`。

演示：http: [//jsfiddle.net/ambiguous/NLzyS/](http://jsfiddle.net/ambiguous/NLzyS/)

如果你想要一个不区分大小写的路由，你可以使用手动添加一个正则表达式路由[`route`](http://backbonejs.org/#Router-route)：

```
initialize: ->
    @route(/browse\/(\d+)/i, 'Details') 
```

演示：http: [//jsfiddle.net/ambiguous/2S6wr/](http://jsfiddle.net/ambiguous/2S6wr/)

# dart - 什么可能是 pubspec 在 dart 上的部署策略

> ID：12336685
> 
> 赞同：9
> 
> 时间：2012-09-09T05:12:49.320
> 
> 标签：dart

实际部署具有 pubspec.yaml 依赖项的 dart 代码的最佳方法是什么？我过去做过的一件常见的事情是创建演示并部署到 github 页面。现在 pub 使用符号链接，依赖项不会被推送到 github。还想知道这是否应该是提交给 pub 的错误，能够使用依赖项进行部署。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T16:23:41.907

我们还没有，但 pub 将来会支持`deploy`命令。这将执行诸如运行 dart2js 和连接/缩小代码之类的操作。它还将物理地引入您的所有依赖项，因此您没有符号链接。最终结果将是一个目录，其中包含您的包需要运行的所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T01:08:14.993

我认为你有三个选择：

*   如果您已经拥有服务器端技术和部署策略，请使用它。
*   如果您只是部署静态内容，我想知道 Google App Engine 是否可以使用这些符号链接。
*   Heroku 支持 Dart，虽然我不确定它如何支持符号链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T15:41:54.837

您可以在 Heroku 云托管上部署您的 Dart 应用程序。[这里](http://blog.sethladd.com/2012/08/running-dart-in-cloud-with-heroku.html)有一个分步教程。

它工作得很好。

# firefox - 由于 firefox 无法修改所需的文件，因此无法安装 Add on builder helper

> ID：12336686
> 
> 赞同：0
> 
> 时间：2012-09-09T05:12:57.087
> 
> 标签：firefox, windows-7, firefox-addon, firefox-addon-sdk

我正在尝试运行附加 Firefox 的示例程序。来自[https://builder.addons.mozilla.org/package/xxxxxx/latest](https://builder.addons.mozilla.org/package/xxxxxx/latest)

当我尝试进行“测试”时，它要求我下载：

=

安装 Add-on Builder Helper

要测试此插件，请安装 Add-on Builder Helper 插件

当我尝试安装时，出现以下错误：

由于 Firefox 无法修改所需的文件，因此无法安装 add on builder helper

你能告诉我如何解决这个问题吗？我用谷歌搜索了它，但无法解决我的情况。我在搜索过程中发现有人说“请更改包裹的长度”我不知道该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T16:31:09.843

可能是这样的：

*   [https://wiki.mozilla.org/Jetpack/Release_Notes/1.0#Known_Issues](https://wiki.mozilla.org/Jetpack/Release_Notes/1.0#Known_Issues)

那里的第一个已知问题突出了 Windows 上的一个弱点，即非常长的路径名会阻止安装。不确定您的个人资料的路径有多长。有关配置文件目录位置的更多信息，请参阅此 Mozilla 支持文章：

[http://support.mozilla.org/en-US/kb/profiles-where-firefox-stores-user-data?s=location+of+profile&r=1&as=s](http://support.mozilla.org/en-US/kb/profiles-where-firefox-stores-user-data?s=location+of+profile&r=1&as=s)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T05:27:00.397

您需要以管理员身份运行 Add-On Builder Helper 的安装。`Program Files`与以前版本的 Windows 相比，Windows 7 对文件夹权限的限制更大；非管理员用户没有对该文件夹树的写入权限。

# c# - 如何根据文本框中的值设置日历控件的年份

> ID：12336689
> 
> 赞同：1
> 
> 时间：2012-09-09T05:13:37.897
> 
> 标签：c#

我有一个日历控件，并希望在单击按钮时根据文本框中的值设置日历的年份属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T05:34:55.597

WPF 应用程序，日历控件：

```
calendar1.SelectedDate = DateTime.Now.Year = int.Parse(TextBox.Text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T05:45:33.153

使用 WinForms MonthCalendar 控件：

```
DateTime currentDate = myCalendar.SelectionStart;
currentDate = new DateTime (Int32.Parse(txtYear.Text), currentDate.Month, currentDate.Day);
myCalendar.SelectionStart = currentDate; 
```

# socket.io - Socket.io 0.9 和 firefox 3.6 - 关闭选项卡时出错

> ID：12336690
> 
> 赞同：1
> 
> 时间：2012-09-09T05:13:54.777
> 
> 标签：socket.io, firefox3.6

当我在浏览器中关闭连接到 socket.io 服务器选项卡时，我的 firefox 3.6 出现错误：

错误：未捕获的异常：[异常...“组件返回失败代码：0xc1f30001（NS_ERROR_NOT_INITIALIZED）[nsIDOMJSWindow.setTimeout]”nsresult：“0xc1f30001（NS_ERROR_NOT_INITIALIZED）”位置：“JS 框架 :: address.pl:PORT/socket.io /socket.io.js :: 匿名 :: line 2057" 数据：无]

其他浏览器都可以，连IE8

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T05:23:42.303

我认为问题可能是这个错误： [https ://bugzilla.mozilla.org/show_bug.cgi?id=630386](https://bugzilla.mozilla.org/show_bug.cgi?id=630386)

如您所见，他们已将其标记为“RESOLVED WORKSFORME”，因为该错误已在 Firefox 4.0 中作为其他工作的副作用进行了修复。

这给你留下了几个现实的选择：

*   尝试找出解决方法（祝你好运！），或
*   建议您产品的用户升级到更高版本的 Firefox。

请注意，FF 3.6 已“报废”，因此在此版本的代码库中获得修复的机会渐近为零。

# python - Python中的颜色函数

> ID：12336691
> 
> 赞同：1
> 
> 时间：2012-09-09T05:14:04.517
> 
> 标签：python, function, colors, hex

从[这个问题](https://stackoverflow.com/questions/287871/print-in-terminal-with-colors-using-python)中，我学会了如何为 Python 着色。我想出了所有的颜色代码，别担心。
无论如何，对我有用的答案是 orip 的 ctypes 之一。`ctypes.windll.kernel32.SetConsoleTextAttribute(handle, AQUA)`每次我想为文本着色时都必须输入，这有点烦人。有没有办法将其转换为函数？我不确定如何通过函数发送变量，也不确定如何实现它们，即使我这样做了。
提前致谢！-ghostmancer 对我来说重要的是它对我有用——我不打算放弃我的剧本。我的颜色：

```
BLACK    = 0x0000
BLUE    = 0x0001
GREEN    = 0x0002
RED    = 0x0004
PURPLE    = 0x0005
YELLOW    = 0x0006
WHITE    = 0x0007
GRAY    = 0x0008
GREY    = 0x0008
AQUA    = 0x0009 #Very Blue 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T05:17:47.333

emmm……如果我没听错的话……

```
def a_func(handle,color):
   ctypes.windll.kernel32.SetConsoleTextAttribute(handle, color)

a_func(handle,AQUA) 
```

甚至更好

```
colorFunc = ctypes.windll.kernel32.SetConsoleTextAttribute
colorFunc(handle,AQUA) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T05:33:17.183

无需使用`def`or创建新函数`lambda`，只需将具有长名称的函数分配给较短的名称，例如：

```
textcolor = ctypes.windll.kernel32.SetConsoleTextAttribute
textcolor(handle, color) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T05:17:41.470

一种方法是

```
def textcolor(handle, color):
    ctypes.windll.kernel32.SetConsoleTextAttribute(handle, color) 
```

你这样称呼它：

```
textcolor(handle, AQUA) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T05:19:02.453

您可以使用：

```
f=lambda handle,color:ctypes.windll.kernel32.SetConsoleTextAttribute(handle, color) 
```

并且，`f(<Actual handle object>, <color>)`随时随地拨打电话。例如`f(handle, AQUA)`将是必需的调用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-13T17:29:59.047

因为我看到变量'handle'到处都没有被定义，对于任何想知道的人来说，就stdout而言，这是一种获取它的方法，以便我们可以将它用于`ctypes.windll.kernel32.SetConsoleTextAttribute(handle, color)`：

```
STD_OUTPUT_HANDLE = -11
handle = ctypes.windll.kernel32.GetStdHandle(-STD_OUTPUT_HANDLE) 
```

# c# - 列出来自 tar.gz 和 .vhd 的文件会显示错误信息

> ID：12336706
> 
> 赞同：1
> 
> 时间：2012-09-09T05:17:43.183
> 
> 标签：c#, class-library, sevenzipsharp

使用 tar.gz 和 .vhd 文件中的 Sevenzipsharp 列出文件会显示错误信息。有上千个文件，但它只显示一个名称表示为 [no name] 的文件。尝试列出[http://wordpress.org/latest.tar.gz](http://wordpress.org/latest.tar.gz)并亲自查看。[这适用于http://sevenziplib.codeplex.com/](http://sevenziplib.codeplex.com/)的 Sevenziplib 库。但是sevenziplib 不能很好地进行多部分归档，它总是会抛出异常，例如找不到文件'.r13'。但存档只有部分到 .r12。多部分存档与 Sevenzipsharp 一起工作正常

# html - 下拉菜单定位

> ID：12336713
> 
> 赞同：0
> 
> 时间：2012-09-09T05:18:54.623
> 
> 标签：html, css

我正在尝试使用 CSS 构建一个下拉菜单，并且我已经成功隐藏了下拉菜单，但无法让它重新出现。我很确定问题出在 :hover 标签上，我已经从这里的 css 中取出了它，因为我无法让它工作。帮助CSS？请？绝望的。

HTML 代码：

```
<div id="navigation">
    <ul id="menu">
        <li class="menu"><a href="#home">Home</a></li>
        <li class="menu"><a href="#news">About Us</a></li>
        <ul class="sub_menu">
            <li>Our Mission Statement</li>
            <li>How Funds Are Spent</li>
            <ul class="sub_sub_menu">
                The Founders
                <li>A</li>
                <li>B</li>
                <li>C</li>
                <li>D</li>
                <li>E</li>
                <li>F</li>
            </ul>
        </ul>
        <li class="menu"><a href="#contact">What We Do</a></li>
        <ul class="sub_menu">
            <li>T-Shirt Designs</li>
            <li>Future Design Ideas</li>
            <ul class="sub_sub_menu">
                Fact Sheets
                <li>How Our Fact Sheets Work</li>
                <li>Fact Sheet 1</li>
            </ul>
        </ul>
        <li class="menu"><a href="#about">Media</a></li>
        <li class="menu"><a href="#contact">Contact Us</a></li>
    </ul>
</div> 
```

CSS如下：

```
ul {
    position: absolute;
    list-style-type: none;
    margin: 0;
    padding: 0;
    padding-top: 0px;
    padding-bottom: 0px;
}
li.menu {
    display: inline
}
a:link, a:visited {
    font-weight: bold;
    font-size: 14px;
    color: #FFFFFF;
    background-color: #B4B7BD;
    text-align: center;
    padding-top: 3px;
    padding-bottom: 3px;
    padding-right: 20px;
    padding-left: 20px;
    text-decoration: none;
    text-transform: uppercase;
}
a:hover, a:active {
    background-color: #B4B7BD
}
ul.sub_menu li {
    position: relative;
    display: none;
    width: 100%;
}
ul.sub_sub_menu {
    position: relative;
    display: none;
}
ul.sub_sub_menu li {
    position: relative;
    display: none;
    width: 100%;
    left: 100%;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T06:20:38.620

# HTML 问题

首先

```
<ul class="sub_sub_menu">The Founders 
```

在无序列表标签中包含文本是非法的，如果这意味着列表的标题，那么标题需要是无序列表嵌套在其中的列表项中的文本/链接。

此外，您已经多次这样做了：

```
<li class="menu"><a href="#news">About Us</a></li>
    <ul class="sub_menu">
        <li>Our Mission Statement</li>
        <li>How Funds Are Spent</li>
    </ul> 
```

您的代码需要在哪里：

```
<li class="menu"><a href="#news">About Us</a>
    <ul class="sub_menu">
        <li>Our Mission Statement</li>
        <li>How Funds Are Spent</li>
    </ul>
</li> 
```

您可以看到，无序列表在第二个示例中正确嵌套，但在第一个示例中不是，这会导致您出现问题。

这些是我认为的 HTML 问题，现在到 css。

# CSS 问题

您应该只需要向您的 css 添加代码即可使其工作，这里是一个示例，说明如何在您翻转菜单项时显示第一个子菜单。

```
li.menu:hover ul li {
        display: block;
} 
```

只需对您拥有的各种子和子菜单重复此操作即可。

最后一件事是你对选择器的使用有点粗略，如果你有“.sub_menu”作为一个类，那么你不需要在它前面加上元素类型，除非有多种类型的元素和你想选择一个，这是我看不到你在你的网站上做的事情，所以而不是：

```
li.menu
ul.sub_menu
ul.sub_sub_menu 
```

只需将类用作选择器：

```
.menu
.sub_menu
.sub_sub_menu 
```

这种做法在现代浏览器中渲染速度更快，并且在许多方面阅读起来更清晰。

你去吧！现在应该一切正常。

# php - 将 MongoDB id 缩减为更短的散列

> ID：12336716
> 
> 赞同：3
> 
> 时间：2012-09-09T05:19:05.337
> 
> 标签：php, hash

我正在寻找将 MongoDB id`504aaedeff558cb507000004`转换为更短的表示形式的最佳方法`PHP`？基本上，用户可以在应用程序中引用 id，而那个长字符串很难。

一个警告是，碰撞应该是“罕见的”。我们能否以某种方式将其缩减为 4、5 或 6 个字符？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:43:54.740

虽然一个十六进制数字可以存储 16 种不同的状态，但一个 base64 编码的数字可以存储 64 种不同的状态，因此您可以将整个 MongoDB Id 存储为 16 位而不是 24 位，而不会丢失任何信息：

```
print hexToBase64("50b3701de3de2a2416000000") . "\n"; # -> ULNwHePeKiQWAAAA
print base64ToHex("ULNwHePeKiQWAAAA") . "\n";         # -> 50b3701de3de2a2416000000

function base64ToHex($string) {
  return bin2hex(base64_decode($string));
}

function hexToBase64($string) {
  return base64_encode(hex2bin($string));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T22:10:08.890

您开始时的唯一 ID 可以由 映射`[0-9a-f]`。缩短可以通过多种方式完成 - 一种简单的方法是重新映射字符集。

我们的目标是通过替换字符将字符串大小一分为二。一个字符是 16 个字符之一，所以两个字符给你 16^2 = 256 种可能性……我相信你知道我要去哪里。取字符串中的每一对字符，并计算映射值。生成对应的 ASCII 字符，用这个代替。如果您不喜欢最后有这么丑陋的 ID，请对其进行 base64 编码 - 您将得到一个比您开始使用的字符串短大约 1/3 的字符串。

# c# - C# 从 html POST 显示 XML

> ID：12336720
> 
> 赞同：0
> 
> 时间：2012-09-09T05:20:29.047
> 
> 标签：c#, .net, xml, http-post

这里有问题...如果我将 XML 文件放在服务器上，那么我可以通过 steamReader 读取它，转换为变量并让所有东西都在 MSSQL 数据库中工作。

但是，我需要通过 html POST 发送，并且它不适用于以下代码：

```
page.Response.ContentType = "text/xml";
StreamReader reader = new StreamReader(page.Request.InputStream);
inputString = reader.ReadToEnd();
deleteShip(inputString); 
```

在我看来，上面的代码没有从我的程序中获取 POST 的 XML。因为对于 deleteShip 中的相同代码，如果我在服务器上使用 xml，那么它可以正常工作。

有没有办法解决这个问题？只要我可以向 deleteShip(string s) 发送任何字符串，我就很高兴。该字符串将采用 XML 格式

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T18:03:58.397

好的，我把它修好了。这是代码。

```
System.IO.Stream stream;
string inputString;
Int32 stringLength;

stream = Request.InputStream;
stringLength = Convert.ToInt32(stream.Length);
byte[] stringArray = new byte[stringLength];

inputString = System.Text.Encoding.ASCII.GetString(stringArray, 0, stringLength);

deleteShip(inputString); 
```

这样，它将从我的 html 请求（在本例中为 XML）访问 POST 正文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T05:47:06.353

看看如何将 XML 发布到您的程序中会很有用。通常，当使用 POST 方法时，数据从 HTML 表单作为 HTTP 请求正文中的名称-值对发送。从您的问题中不清楚您是否使用 HTML 表单将 XML 发布到您的程序，如果没有更多信息，很难判断可能出了什么问题。

从您的代码看来，您正在阅读整个 HTTP 请求，您通常会在其中读取请求参数的值，例如：

```
Request["XmlParameterName"] 
```

`XmlParameterName`HTML 表单输入字段的名称在哪里。

你检查过`inputString`变量的值吗？它是有效的 XML 吗？编码是否正确？是否有任何无效字符（如＆符号）正确转义？

如果我提到的所有事情都不是问题，请用更多信息更新您的问题。

# python - windows上的python zipfile模块，斜杠太多

> ID：12336722
> 
> 赞同：0
> 
> 时间：2012-09-09T05:21:13.727
> 
> 标签：python, windows, zip, pygame

我目前正在使用 python 2.7 和 pygame 1.9 制作游戏。我将我的图形存储在 中`graphics.dat`，这只是一个重命名的 zip 文件。我用来将图形加载到游戏中的功能是这样的：

```
import pygame, zipfile, tarfile sys, os
from cStringIO import StringIO
from pygame.locals import *
def loadImage(filename, noAlpha=False):
    baseZip = zipfile.ZipFile(os.path.join("..", "Data", "graphics.dat"))
    imgData = baseZip.read(filename) #the "filename" argument is already os.path.join()'ed when I pass it to the function
    imgDataIO = StringIO(imgData)
    finalFileName = os.path.split(filename)
    preSurf = pygame.image.load(imgDataIO, finalFileName[1])
    if noAlpha:
        resultSurf = preSurf.convert()
    else:
        resultSurf = preSurf.convert_alpha()
    baseZip.close()
    return resultSurf 
```

在 linux (Ubuntu 12.04) 上它可以完美运行，但在 Windows 上它总是会引发错误

> “存档中没有名为文件夹\\\\\\file.png 的项目”

（我现在不在 Windows 上，所以我无法复制确切的错误文本，但它有很多“\”）。

有解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T06:41:08.290

问题是 zip 文件中的文件名总是用正斜杠存储，而不是反斜杠。

因此，在加载图像时，您必须使用带有正斜杠的路径作为路径分隔符，例如“folder/image.png”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T06:09:37.350

我认为你需要用'\'分割文件名并只使用其中的image.png，而不是文件夹\image.png。只要尝试让我们知道它是否有效。我猜这是因为我不知道 zip 文件的内容以及您当前的工作目录

# c++ - 直接包含排序

> ID：12336724
> 
> 赞同：-1
> 
> 时间：2012-09-09T05:21:26.783
> 
> 标签：c++

直接包含排序的另一个名称是什么，相同排序的算法是什么？

我一直试图在互联网上搜索，但我没有得到一个直接的答案，但我找不到任何答案。我发现了这种用于直接插入排序的算法，并且在一些书中说它们与直接直接包含排序相同，但我对此表示怀疑，因为这本书是俄语的，所以我想确认（也就是说，如果它是真的或者我可能有翻译错误？）

C++ 中的代码：

```
int main(int argc, char* argv[])
{
    int arr[8] = {27, 412, 71, 81, 59, 14, 273, 87},i,j;

    for (j=1; j<8; j++){
        if (arr[j] < arr[j-1]) {
            //Что бы значение j мы не меняли а работали с i
            i = j;
            //Меняем местами пока не найдем нужное место
            do{
                swap(arr[i],arr[i-1]);
                i--;
                //защита от выхода за пределы массива
                if (i == 0)
                    break;
            }
            while (arr[i] < arr[i-1]) ;
        }
        for (i=0;i<8;i++)
            cout << arr[i]<< ' ';
        cout << '\n';
    }
    getch();
    return 0;
} 
```

### 结果

```
27 412 71 81 59 14 273 87
27 71 412 81 59 14 273 87
27 71 81 412 59 14 273 87
27 59 71 81 412 14 273 87
14 27 59 71 81 412 273 87
14 27 59 71 81 273 412 87
14 27 59 71 81 87 273 412 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T06:16:26.683

发布的代码是[插入排序](https://en.wikipedia.org/wiki/Insertion_sort)。

大多数实现会将乱序元素复制到临时变量，然后向后工作，向上移动元素，直到找到正确的开放点以“插入”当前元素。这就是维基百科文章中的伪代码显示的内容。

一些实现只是将无序元素向后冒泡，而它小于其左侧的元素。这就是`do...while`已发布代码中的内部循环所显示的内容。

这两种方法都是实现插入排序的有效方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T05:33:09.223

您发布的代码看起来不像插入排序算法，因为您正在重复交换两个相邻元素。

您的代码看起来更像某种冒泡排序。

这里列出了常见的排序算法： [https ://en.wikipedia.org/wiki/Sorting_algorithm](https://en.wikipedia.org/wiki/Sorting_algorithm)

“直接插入”和“直接包含”听起来几乎相同..所以我怀疑它们可能是同一算法的不同名称。

编辑：可能“直接”前缀应该表示只使用一个容器..但是，如果交换了两个相邻元素，我不会称之为插入排序，因为根本没有“插入”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T08:47:57.933

鉴于术语“直接包含排序”根本不会产生谷歌点击，而“直接插入排序”只有 27 次点击，其中前三个是这里的帖子和两个相同措辞的[博客](http://jisku.com/blog/2012/09/direct-inclusion-sorting/) [帖子](http://umeedaintimes.com/direct-inclusion-sorting/)，我怀疑这个术语有任何被广泛接受的含义。所以你的问题中关于

> 有些书说它们与直接直接包含排序相同

很难回答，除非我们找到*直接包含排序*实际上是什么的明确定义。

# php - Wordpress：无法加载模块“XCache”

> ID：12336726
> 
> 赞同：1
> 
> 时间：2012-09-09T05:21:45.073
> 
> 标签：php, wordpress, cpanel, error-log

我在我的网站错误日志中收到此警告：

`PHP Warning: Cannot load module 'XCache' because conflicting module 'eAccelerator' is already loaded in Unknown on line 0`

这是什么意思，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T09:22:45.887

我也在错误日志文件中收到了这个问题。

显然，eAccelerator 或 XCache 是 Apache 缓存模块，旨在加速您的站点。

一次，您可以启用 Xcache 或 eAccelerator。由于两者都是强大的缓存模块，因此同时启用两者肯定会产生冲突。

要解决这个问题：在您的 Web 服务器中编辑 /usr/local/lib/php.ini 下的 php.ini 文件。

搜索行：extension=xcache.so

删除此行并保存..

# html - IE 和 Firefox 中的 Divs 不在位

> ID：12336733
> 
> 赞同：0
> 
> 时间：2012-09-09T05:22:48.843
> 
> 标签：html, css, internet-explorer, firefox

对于学校作业，我被要求为企业重新设计网站。

我以前只用过 css/html，这是我第一次为完整的网站编写它。

我面临的问题是 3 个 div 的定位在 google chrome 中是正确的，但在 IE 和 Firefox 中，div 的位置不正确。

[http://letsmine.info/mnpctech/index.html](http://letsmine.info/mnpctech/index.html)它们是菜单栏右侧的 twitter、facebook 和结帐符号。

由于这是我第一次编写 CSS 和 HTML，我认为这是一个愚蠢的错误，我希望你能引导我走向正确的方向。

同样在商店页面上，我需要用图片和名称来布置产品，就像它们在这里[http://www.mnpctech.com/MnpctechBilletFanGrill.html](http://www.mnpctech.com/MnpctechBilletFanGrill.html)一样。我应该创建一个表格并将图像和标题放在那里吗？只是在寻找一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T05:47:05.950

您需要将以下属性添加到#checkout、#facebook 和#twitter：

```
display: inline-block;
float: right; 
```

并从每个属性中删除以下属性：

```
position: relative;
left: 980px;
top: -49px; 
```

然后该页面应在所有浏览器中正确显示。

确保您使用浮点数并熟悉“显示”属性的定位方式，我总是尽量远离相对定位，因为它有点不可靠。

# python - 使用 getattr 处理来自另一个类的方法

> ID：12336735
> 
> 赞同：-1
> 
> 时间：2012-09-09T05:23:26.253
> 
> 标签：python, python-2.7

p我正在编写一些不重要的代码，但我想做的一件事是从另一个类中调用一个函数，然后将类名从列表中拉出并放入变量中。请注意，在过去的两周里，我实际上刚刚学习了 python，并且几乎不知道如何编程。

我认为这应该做的是当调用 getattr() 时，它将传递包含在相应类中的属性“run_question”，该属性与 question_type 中的名称相同，然后将其传递给“running_question”。我知道可能有更好的方法来做我正在尝试的事情，但我想知道为什么*这种*方法不能像我认为的那样起作用。

```
 #! /usr/bin/python
 rom random import randrange

 class QuestionRunner(object):
     def __init__(self):
         ##initialize score to zero
         self.score = 0
         ##initialize class with the types of questions
         self.questiontypes = ['Addition', 'Subtraction', 'Division', 'Multiplication']
     ##randomly selects question type from self.questiontypes list    
     def random_type(self):
         type = self.questiontypes[randrange(0, 4)]
         return type
     ##question function runner, runs question function from self
     def run_questions(self):
         try:
             question_type = self.random_type()
             running_question = getattr(question_type, 'run_question' )
         except AttributeError:
             print question_type
             print "Attribute error:Attribute not found"
         else: running_question()

 class Question(object):
     pass 

 class Multiplication(Question):
     def  run_question(self):
         print "*" 

 class Division(Question):
     def run_question(self):
         print "/"

 class Subtraction(Question):
     def run_question(self):
         print "-"

 class Addition(Question):
     def run_question(self):
         print "+"

 test = QuestionRunner()

 test.run_questions() 
```

这输出：

```
[david@leonid mathtest] :( $  python mathtest.py  
Division
Attribute error:Attribute not found
[david@leonid mathtest] :) $ 
```

这表明我没有得到我期望的 run_question 属性。

我应该注意，当我按以下方式将函数放入 QuestionRunner 类时，一切都按预期工作。我使用真正不需要的类的主要原因是它实际上可以很好地掌握如何让它们做我想做的事情。

```
#! /usr/bin/python
from random import randrange

class QuestionRunner(object):
    def __init__(self):
        ##initialize score to zero
        self.score = 0
        ##initialize class with the types of questions
        self.questiontypes = ['addition', 'subtraction', 'division', 'multiplication']
    ##randomly selects question type from self.questiontypes list    
    def random_type(self):
        type = self.questiontypes[randrange(0, 4)]
        return type
    ##question function runner, runs question function from self
    def run_questions(self):
        try:
            question_type = self.random_type()
            running_question = getattr(self, question_type)
        except AttributeError:
            exit(1)
        else: running_question()

    def  multiplication(self):
        print "*"

    def division(self):
        print "/"

    def addition(self):
        print "+"

    def subtraction(self):
        print "-"

test = QuestionRunner()

test.run_questions() 
```

关于为什么这不起作用的任何帮助都会很棒，我非常感谢。

关于为什么这不起作用的任何帮助都会很棒，我非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T16:40:11.393

啊，我发现了导致我的逻辑错误的缺失概念。我假设我可以将对象的*名称*传递给 getattr，而实际上我必须传递对象本身。

# jquery - 在 JQuery 中使用变量而不是 id 选择元素

> ID：12336738
> 
> 赞同：0
> 
> 时间：2012-09-09T05:23:59.617
> 
> 标签：jquery

下面的语句怎么写

```
if ($('#SelectedItems option[value=' + optionData.Value + ']').length === 0) ; 
```

使用变量

```
var selectedItems = $('#SelectedItems');

//Something like this but not exactly

if ($(**selectedItems** + "option[value=' + optionData.Value + ']").length === 0) ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T05:27:44.533

```
if ($('option[value="' + optionData.Value + '"]',$('#SelectedItems')).length === 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T05:27:55.623

我想你想要这个

```
if ($("option[value='" + optionData.Value + "']", selectedItems).length === 0) 
```

`selectedItems`这将选择与选择器匹配的元素的所有后代`"option[value='" + optionData.Value + "']"`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T05:28:15.327

`if (selectedItems.find("option[value='" + optionData.value + "']").length === 0)` 应该做你正在寻找的东西。

# url - 搜索引擎优化中的 URL my-web-url.com 与 myweburl.com

> ID：12336739
> 
> 赞同：3
> 
> 时间：2012-09-09T05:24:14.447
> 
> 标签：url, seo

任何人都可以建议搜索引擎中两个域之间的差异及其效果。虽然域中有两个不同的词最喜欢没有“-”的域，但据我所知，“-”表示 URL 中的空格，“_”表示相同的词，但这两个符号在域名中最少使用。任何人都可以提供这两者的不同之处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T06:52:42.727

首先应该优先考虑没有'-'的域名，因为在告诉别人你的域名时很难发音，而且人们在输入时经常会忘记你的域名中的'-'的可能性很高，在至少前几次。当然，这会对您的业务产生负面影响。

此外，带有连字符的域也不会在客户中产生很好的感觉。同意@chimpsarehungry 在较早的答案中所说的。

除此之外，我想这在 SEO 中并不重要。在某些情况下甚至可能会产生良好的效果，例如在长 URL 中。例如。WordPress 帖子。带有“-”的 URL 对搜索引擎友好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T20:13:42.960

根据 SEOmoz 收集的 2011 年数据，自己看看：

[http://www.seomoz.org/article/search-ranking-factors#metrics](http://www.seomoz.org/article/search-ranking-factors#metrics)

破折号看起来不太好。其中一些来自使用此类域的垃圾邮件发送者的相关性，但绝对不是全部。我很抱歉我没有参考来支持这一点，但有一个 Matt Cutts QA，他说多个破折号表示垃圾邮件，并且确实在总体排名得分中受到负面影响。我相信这是一个大型主题演讲的一部分，所以很难找到。你只需要相信我的话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T05:55:25.270

我认为这根本不重要。但作为搜索引擎用户，它们之间带有破折号的网站对我来说看起来像是垃圾邮件。用破折号命名一个受欢迎的网站。

# android - 选项菜单不会在 Android 4.1.1 中显示

> ID：12336742
> 
> 赞同：4
> 
> 时间：2012-09-09T05:24:31.430
> 
> 标签：android, menu

我有一台运行 Android 4.1.1 的 Google Nexus 7 平板电脑，我似乎无法让我的应用程序在右下角显示一个小的“垂直线上的三个小方块”符号，表示有一个选项菜单可用. 我针对 2.3.3 的构建将在其他设备（2.3.3 手机和 4.0.3 手机）上显示选项菜单，但不会在 Nexus 7 上显示。为了说明问题，我使用 Eclipse 构建了两个简单的“Hello World”，它带有一个选项菜单项“设置”，并且还从 Android-10 SDK 构建了 BluetoothChat 示例。准系统没有菜单符号，而 BluetoothChat 有。查看每个代码，我看不出菜单在构造和膨胀方面的处理方式有什么不同，所以我希望有人有一些想法。[http://i.imgur.com/31Wop.jpg](http://i.imgur.com/31Wop.jpg) 没有菜单图标： http: [//i.imgur.com/9Vj3e.jpg](http://i.imgur.com/9Vj3e.jpg)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-09T23:14:23.807

发现了问题。在我的清单中

```
<uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="15" /> 
```

将其更改为

```
<uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="10" /> 
```

修复了问题，现在出现了 ActionBar 上的菜单按钮。BluetoothChat 示例之所以有效，是因为它的清单省略了 targetSdkVerion：

```
<uses-sdk minSdkVersion="6" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T00:31:32.040

根据我的测试显示，即使 minSdkVersion 和 targetSdkVersion 不同，您也可以坚持使用。只要项目构建目标（在项目属性中定义）具有与 minSdkVersion 相同的值。对我来说，我想在 2.2 版本中使用旧菜单，但在 3.0 及更高版本中使用新菜单（在标题栏中）。

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" /> 
```

在项目属性中：

```
# Project target.
target=android-8 
```

它似乎可以通过在我的 2.2 和 2.3 虚拟设备的底部（或使用菜单按钮）显示旧选项菜单并在我的 3.0、4.0 和 4.2 虚拟和物理设备上显示新选项菜单来工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-25T13:34:51.520

从 android 4.0 及更高版本开始执行类似操作以显示选项菜单
getWindow().requestFeature(Window.FEATURE_ACTION_BAR);

# c++ - 四叉树程序导致的蓝屏死机

> ID：12336744
> 
> 赞同：-1
> 
> 时间：2012-09-09T05:24:34.097
> 
> 标签：c++, opengl, c-preprocessor, quadtree, bsod

我正在为一个行星写一个四叉树结构，当你远离四边形并接近它时，它会减少和增加细节。但是，我遇到了一些非常严重且令人讨厌的错误。

我有两个预处理器定义的常量，当我将值更改为除 32 以外的任何值（例如 16 或 64）时，确定四叉树的大小（QUAD_WIDTH 和 QUAD_HEIGHT）我得到一个蓝屏死机。我正在使用 code::blocks 作为我的 IDE，另一件事：每当我尝试在 code::blocks 中调试程序时，我也会出现蓝屏死机（常量是否为 32 无关紧要）

为什么会这样？我该如何解决它。 ![在此处输入图像描述](../Images/0bc79a6c30fd80efd0990e98d28c0d11.png) ***PQuad.cpp***

```
#include "..\include\PQuad.h"
#include "..\include\Color3.h"

#include <iostream>
#include <vector>
#include <cmath>

#include <GL/glew.h>
#include <GL/glu.h>
#include <GL/gl.h>

#define QUAD_WIDTH 32
#define QUAD_HEIGHT 32

#define NUM_OF_CHILDREN 4

#define MAX_DEPTH 4

PQuad::PQuad(FaceDirection face_direction, float planet_radius)  {
    this->built = false;
    this->spherised = false;
    this->face_direction = face_direction;
    this->radius = planet_radius;
    this->planet_centre = glm::vec3(0, 0, 0);
}

PQuad::~PQuad()  {
}

std::vector<PQuad> PQuad::get_children()  {
    return children;
}

bool PQuad::get_built()  {
    return this->built;
}

int PQuad::get_depth()  {
    return this->depth;
}

float *PQuad::get_table()  {
    return tree;
}

float PQuad::get_element_width()  {
    return element_width;
}

glm::vec3 PQuad::get_position()  {
    return position;
}

glm::vec3 PQuad::get_centre()  {
    return centre;
}

void PQuad::get_recursive(glm::vec3 player_pos, std::vector<PQuad*>& out_children)  {
    for (size_t i = 0; i < children.size(); i++)  {
        children[i].get_recursive(player_pos, out_children);
    }

    if (this->should_draw(player_pos) ||
        this->depth == 0)  {
        out_children.emplace_back(this);
    }
}

GLuint PQuad::get_vertexbuffer()  {
    return vbo_vertices;
}

GLuint PQuad::get_colorbuffer()  {
    return vbo_colors;
}

GLuint PQuad::get_normalbuffer()  {
    return vbo_normals;
}

GLuint PQuad::get_elementbuffer()  {
    return ibo_elements;
}

void PQuad::set_parent(PQuad *quad)  {
    this->parent = quad;
}

void PQuad::set_child_index(int child_index)  {
    this->child_index = child_index;
}

void PQuad::set_depth(int depth)  {
    this->depth = depth;
}

void PQuad::set_root(bool root)  {
    this->root = root;
}

void PQuad::calculate_position()  {
    this->element_width = depth == 0 ? 1.0f : parent->get_element_width() / 2.0f;

    float quad_y = child_index / 2 == 0 ? 0 : element_width * QUAD_HEIGHT - element_width;
    float quad_x = child_index % 2 == 0 ? 0 : element_width * QUAD_WIDTH - element_width;

    if (this->depth != 0)  {
        quad_x += parent->get_position().x;
        quad_y += parent->get_position().y;
    }

    this->position = glm::vec3(quad_x, quad_y, 0);
}

void PQuad::construct()  {
    if (!this->built)  {
        std::vector<glm::vec3> vertices;
        std::vector<glm::vec3> normals;
        std::vector<Color3> colors;
        std::vector<GLushort> elements;

        construct_vertices(&vertices, &colors);
        construct_elements(&elements);
        spherise(&vertices, &normals);
        construct_normals(&vertices, &elements, &normals);

        construct_buffers(&vertices, &colors, &elements, &normals);

        float distance = radius;

        if (!spherised)  {
            distance = QUAD_WIDTH;
        }

        construct_depth_table(distance);

        this->built = true;
    }
}

void PQuad::construct_depth_table(float distance)  {
    tree[0] = -1;

    for (int i = 1; i < MAX_DEPTH; i++)  {
        tree[i] = distance;

        distance /= 2.0f;
    }
}

void PQuad::construct_children()  {
    calculate_position();

    if (depth < (int)MAX_DEPTH)  {
        children.reserve((int)NUM_OF_CHILDREN);

        for (int i = 0; i < (int)NUM_OF_CHILDREN; i++)  {
            children.emplace_back(PQuad(this->face_direction, this->radius));
            PQuad *child = &children.back();

            child->set_depth(depth + 1);
            child->set_child_index(i);
            child->set_parent(this);

            child->construct_children();
        }
    } else {
        leaf = true;
    }
}

void PQuad::construct_vertices(std::vector<glm::vec3> *vertices, std::vector<Color3> *colors)  {
    vertices->reserve(QUAD_WIDTH * QUAD_HEIGHT);

    for (int y = 0; y < QUAD_HEIGHT; y++)  {
        for (int x = 0; x < QUAD_WIDTH; x++)  {
            switch (face_direction)  {
                case YIncreasing:
                    vertices->emplace_back(glm::vec3(position.x + x * element_width, QUAD_HEIGHT - 1, -(position.y + y * element_width)));
                    break;
                case YDecreasing:
                    vertices->emplace_back(glm::vec3(position.x + x * element_width, 0, -(position.y + y * element_width)));
                    break;
                case XIncreasing:
                    vertices->emplace_back(glm::vec3(QUAD_WIDTH - 1, position.y + y * element_width, -(position.x + x * element_width)));
                    break;
                case XDecreasing:
                    vertices->emplace_back(glm::vec3(0, position.y + y * element_width, -(position.x + x * element_width)));
                    break;
                case ZIncreasing:
                    vertices->emplace_back(glm::vec3(position.x + x * element_width, position.y + y * element_width, 0));
                    break;
                case ZDecreasing:
                    vertices->emplace_back(glm::vec3(position.x + x * element_width, position.y + y * element_width, -(QUAD_WIDTH - 1)));
                    break;
            }

            // Position the bottom, right, front vertex of the cube from being (0,0,0) to (-16, -16, 16)
            (*vertices)[vertices->size() - 1] -= glm::vec3(QUAD_WIDTH / 2.0f, QUAD_WIDTH  / 2.0f, -(QUAD_WIDTH / 2.0f));

            colors->emplace_back(Color3(255.0f, 255.0f, 255.0f, false));
        }
    }

    switch (face_direction)  {
        case YIncreasing:
            this->centre = glm::vec3(position.x + QUAD_WIDTH / 2.0f, QUAD_HEIGHT - 1, -(position.y + QUAD_HEIGHT / 2.0f));
            break;
        case YDecreasing:
            this->centre = glm::vec3(position.x + QUAD_WIDTH / 2.0f, 0, -(position.y + QUAD_HEIGHT / 2));
            break;
        case XIncreasing:
            this->centre = glm::vec3(QUAD_WIDTH - 1, position.y + QUAD_HEIGHT / 2.0f, -(position.x + QUAD_WIDTH / 2.0f));
            break;
        case XDecreasing:
            this->centre = glm::vec3(0, position.y + QUAD_HEIGHT / 2.0f, -(position.x + QUAD_WIDTH / 2.0f));
            break;
        case ZIncreasing:
            this->centre = glm::vec3(position.x + QUAD_WIDTH / 2.0f, position.y + QUAD_HEIGHT / 2.0f, 0);
            break;
        case ZDecreasing:
            this->centre = glm::vec3(position.x + QUAD_WIDTH / 2.0f, position.y + QUAD_HEIGHT / 2.0f, -(QUAD_HEIGHT - 1));
            break;
    }

    this->centre -= glm::vec3(QUAD_WIDTH / 2.0f, QUAD_WIDTH  / 2.0f, -(QUAD_WIDTH / 2.0f));
}

void PQuad::construct_elements(std::vector<GLushort> *elements)  {
    int index = 0;

    elements->reserve((QUAD_WIDTH - 1) * (QUAD_HEIGHT - 1) * 6);

    for (int y = 0; y < QUAD_HEIGHT - 1; y++)  {
        for (int x = 0; x < QUAD_WIDTH - 1; x++)  {
            GLushort bottom_left = x + y * QUAD_WIDTH;
            GLushort bottom_right = (x + 1) + y * QUAD_WIDTH;
            GLushort top_left = x + (y + 1) * QUAD_WIDTH;
            GLushort top_right = (x + 1) + (y + 1) * QUAD_WIDTH;

            elements->emplace_back(top_left);
            elements->emplace_back(bottom_right);
            elements->emplace_back(bottom_left);

            elements->emplace_back(top_left);
            elements->emplace_back(top_right);
            elements->emplace_back(bottom_right);
        }
    }
}

void PQuad::construct_normals(std::vector<glm::vec3> *vertices, std::vector<GLushort> *elements, std::vector<glm::vec3> *normals)  {
    normals->reserve(QUAD_WIDTH * QUAD_HEIGHT);

    for (int i = 0; i < elements->size() / 3; i++)  {
         int index1 = elements->at(i * 3);
         int index2 = elements->at(i * 3 + 1);
         int index3 = elements->at(i * 3 + 2);

         glm::vec3 side1 = vertices->at(index1) - vertices->at(index3);
         glm::vec3 side2 = vertices->at(index1) - vertices->at(index2);
         glm::vec3 normal = glm::cross(side1, side2);
         normal = glm::normalize(normal);

         normals->emplace_back(normal);
         normals->emplace_back(normal);
         normals->emplace_back(normal);
    }
}

void PQuad::spherise(std::vector<glm::vec3> *vertices, std::vector<glm::vec3> *normals)  {
    for (int i = 0; i < QUAD_WIDTH * QUAD_HEIGHT; i++)  {
        glm::vec3 normal = glm::normalize(vertices->at(i) - planet_centre);

        (*vertices)[i] = (float)(radius) * normal;
    }

    glm::vec3 normal = glm::normalize(centre - planet_centre);

    centre = normal * (float)(radius);

    this->spherised = true;
}

void PQuad::construct_buffers(std::vector<glm::vec3> *vertices, std::vector<Color3> *colors, std::vector<GLushort> *elements, std::vector<glm::vec3> *normals)  {
    glGenBuffers(1, &vbo_vertices);
    glBindBuffer(GL_ARRAY_BUFFER, vbo_vertices);
    glBufferData(GL_ARRAY_BUFFER, sizeof(glm::vec3) * vertices->size(), &((*vertices)[0]), GL_STATIC_DRAW);

    glGenBuffers(1, &vbo_colors);
    glBindBuffer(GL_ARRAY_BUFFER, vbo_colors);
    glBufferData(GL_ARRAY_BUFFER, sizeof(Color3) * colors->size(), &((*colors)[0]), GL_STATIC_DRAW);

    glGenBuffers(1, &vbo_normals);
    glBindBuffer(GL_ARRAY_BUFFER, vbo_normals);
    glBufferData(GL_ARRAY_BUFFER, sizeof(glm::vec3) * normals->size(), &((*normals)[0]), GL_STATIC_DRAW);

    glGenBuffers(1, &ibo_elements);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, ibo_elements);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(GLushort) * elements->size(), &((*elements)[0]), GL_STATIC_DRAW);
}

float distance3(glm::vec3 v1, glm::vec3 v2)  {
    return sqrt(pow(abs(v1.x - v2.x), 2) + pow(abs(v1.y - v2.y), 2) + pow(abs(v1.z - v2.z), 2));
}

bool PQuad::should_draw(glm::vec3 player_position)  {
    float distance = distance3(player_position, centre);

    if (distance < tree[depth])  {
        return true;
    }

    return false;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T05:44:26.153

普通的用户空间程序应该无法实现蓝屏死机……无论您做什么。

然而不幸的是，在编写与设备驱动程序进行大量交互的软件时，很容易遇到这种系统级错误，因为它们也是软件，而且它们不是没有错误的（设备驱动程序中的错误可能会导致整个系统崩溃）蓝屏死机）。

意思是您正在使用错误的参数调用 OpenGL，并且您的视频卡的驱动程序有错误，而不是检测问题并返回故障代码，它只是关闭机器。

您可以尝试使用操作日志，每一步都写入文件，因此在您收到 BSOD 并重新启动后，您可以检查写入文件的最后一条命令是什么。请注意，您应该在*append*中打开文件，写入日志行，然后关闭文件。即使这样也不能 100% 保证当您收到 BSOD 时文件的内容会真正写入磁盘，但在这种情况下，IMO 的可能性应该很高。更好的选择是通过串行线路或使用网络将日志消息发送到另一台计算机。

这可能是一个难以跟踪和解决的问题。

另一种选择是使用不同的 OpenGL 实现（如 Mesa）。可能会更好地检查另一个实现调用，您可以发现带有错误参数的调用是什么。

甚至可能是您的代码只是触发了视频驱动程序中的错误，而您的代码没有做错任何事情。然而，这应该是你**最后**的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T15:21:25.927

其实答案很简单。Windows 上的 Code::Blocks 中的调试器确实有问题。我已经看到它蓝屏多个系统。切换到使用输出语句或其他 IDE。

# python - pymongo-upsert 无法使用 $set 操作执行插入

> ID：12336747
> 
> 赞同：2
> 
> 时间：2012-09-09T05:25:24.050
> 
> 标签：python, mongodb, pymongo, upsert

我有一个空集合，并且有数千个条目要处理（条目可能有冗余，我想同时使用更新和插入）。我写的python代码（使用pymongo）：

```
for mydoc in alldocs:
   key = {'myid': mydoc['myid']}
   data = process_doc(mydoc)    # returns simple dictionary
   db.mydocs.update(key, {"$set": data}, upsert = True) 
```

以下代码无法执行任何插入操作。该集合仍然是空的。但是当我删除 $set 并使用简单的数据时，它工作正常。我不能在 upsert 中使用 $set 吗？我想要 $set 的原因是为了不影响 BSON 的预先存在的字段。有人可以请指导。我真的不知道该怎么办。

可重现的代码：

```
from pymongo import Connection
DB_CONTENT_BASE_KEY = 'contentbase'

def connect_to_db(dbname, hostname = 'localhost', portno = 27017, **kwargs):
    connection = Connection(hostname, portno)
    dbConnection = connection[dbname]
    return dbConnection

class MetawebCustomCollectionBuilder(object):
    # key ought to be a dictionary to filter results from contentbase.
    def __init__(self, inDbConfig, outDbConfig, key = {}, verbose = False):
        self.verbose = verbose
        self.inDbConfig = inDbConfig
        self.inDb = connect_to_db(**inDbConfig)
        self.outDbConfig = outDbConfig
        self.outDb = connect_to_db(**outDbConfig)
        self.inDbContentBase = self.inDb[self.inDbConfig[DB_CONTENT_BASE_KEY]]
        self.outDbContentBase = self.outDb[self.outDbConfig[DB_CONTENT_BASE_KEY]]
        self.key = key
        self.in_db_collection_constraints()
        self.out_db_collection_constraints()

    def in_db_collection_constraints(self):
        self.inDbContentBase.ensure_index('mid')
        if self.verbose: print("Assured index on mid for inDbContentBase...")

    def out_db_collection_constraints(self):
        self.outDbContentBase.ensure_index('mid')
        if self.verbose: print("Assured index on mid for outDbContentBase...")

    def process_in_record(self, inRecord):
        outRecord = inRecord # [YET TO] continue from here...
        return outRecord

    def transit_collection(self):
        for record in self.inDbContentBase.find(self.key):
            outRecord = self.process_in_record(record)
            key = {'mid':outRecord['mid']}
            data = outRecord
            print key
            self.outDbContentBase.update(key, {"$set": data}, True)
        if self.verbose: print 'Done with transiting collection from in DB to out DB'

    def cleanup_out_collection(self):
        pass

    def in_db_sandbox(self):
        # To have tests and analytics placed in here corresponding to inDb.
        pass

if __name__ == '__main__':
    inDbConfig = {'dbname':'metaweb', 'contentbase': 'content'}
    outDbConfig = {'dbname': 'similarkind', 'contentbase': 'content'}
    mccb = MetawebCustomCollectionBuilder(inDbConfig, outDbConfig, verbose = True)
    mccb.transit_collection() 
```

必须有一个预先存在的数据库 inDb。从这个集合中，我想创建一个新的修改集合。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-09T05:58:09.237

你的主张是*错误的*

```
>>> import pymongo
>>> c = pymongo.Connection()

>>> db = c.mydb
>>> db.mydocs.find().count()
0
>>> db.mydocs.update({'myid': '438'}, {"$set": {'keyA':'valueA'}}, upsert = True)
>>> db.mydocs.find().count()
1
>>> db.mydocs.find_one()
{u'myid': u'438', u'keyA': u'valueA', u'_id': ObjectId('504c2fd1a694cc9624bbd6a2')} 
```

# php - mysql中where子句加时差

> ID：12336748
> 
> 赞同：3
> 
> 时间：2012-09-09T05:25:48.217
> 
> 标签：php, mysql, sql, timestamp

我有一个包含数十万行的数据表，这些行代表对服务器获取数据的请求。每条记录都有一个时间戳、服务器 ID 和服务器是否正确响应的二进制值 (tinyint)。查询时间不是恒定的。

我试图通过将服务器在线的查询之间的时间相加来获得服务器被视为“在线”的总时间（非常优选 mysql 查询）。例如。

```
server | time | status
1 | 1/1/2012 11:00 online
1 | 1/1/2012 11:02 online
1 | 1/1/2012 11:05 offline
2 | 1/1/2012 11:10 online
1 | 1/1/2012 11:30 online
Time now: 11:40
Server 1 Online Time = 2+3+10 = 15 minutes 
```

可以在mysql中做到这一点吗？我更喜欢它而不是将所有行都输入 php 并计算它或平均任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T06:15:43.460

这是我创建的示例表结构：

```
-- SQL EXAMPLE
CREATE TABLE IF NOT EXISTS `stack_test` (
  `server` int(11) NOT NULL,
  `rtime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `status` tinyint(4) NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
INSERT INTO `stack_test` (`server`, `rtime`, `status`) VALUES
    (1, '2012-01-01 11:00:24', 1),
    (1, '2012-01-01 11:02:24', 1),
    (1, '2012-01-01 11:05:24', 0),
    (2, '2012-01-01 11:10:24', 1),
    (1, '2012-01-01 11:30:24', 1);
-- SQL EXAMPLE END 
```

这是PHP代码：

```
<?php
$query = 'SELECT DISTINCT(`server`) `server` FROM stack_test';
$res = sql::exec($query); // replace with your function/method to execute SQL
while ($row = mysql_fetch_assoc($res)) {
    $server = $row['server'];
    $uptimes = sql::exec('SELECT * FROM stack_test WHERE server=? ORDER BY rtime DESC',$server);
    $online = 0;
    $prev = time();
    $prev = strtotime('2012-01-01 11:40:00'); // just to show that it works given the example
    while ($uptime = mysql_fetch_assoc($uptimes)) {
        if ($uptime['status'] == 1) {
            echo date('g:ia',$prev) . ' to ' . date('g:ia',strtotime($uptime['rtime'])) . ' = '.(($prev-strtotime($uptime['rtime']))/60).' mins<br />';
            $online += $prev-strtotime($uptime['rtime']);
        }
        $prev = strtotime($uptime['rtime']);
    }
    echo 'Server '.$server.' is up for '.($online/60).' mins.<br />';
}
?> 
```

这是我得到的输出：

```
11:40am to 11:30am = 10 mins
11:05am to 11:02am = 3 mins
11:02am to 11:00am = 2 mins
Server 1 is up for 15 mins.

11:40am to 11:10am = 30 mins
Server 2 is up for 30 mins. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T19:12:38.523

这可以通过对正确排序的行集使用 UNIX 时间戳转换和变量分配来完成。“正确排序”是指行必须按 排序`server`，然后按`time`。以下是您如何使用变量来获取自上一个事件以来表中每一行的在线时间（间隔）（以秒为单位）（`server_status`为此答案而调用）：

```
SELECT
  *,
  @currenttime := UNIX_TIMESTAMP(`time`),
  @lasttime := CASE
    WHEN server <> @lastserver OR @laststatus = 'offline'
    THEN @currenttime
    ELSE @lasttime
  END,
  @currenttime - @lasttime AS seconds_online,
  @lasttime := @currenttime,
  @lastserver := server,
  @laststatus := status
FROM
  server_satus s,
  (SELECT @lastserver := 0) x
ORDER BY
  s.server,
  s.`time` 
```

如您所见，一个临时变量 ( `@currenttime`) 使用 UNIX 时间戳等价物初始化`time`，另一个用于保存前一个时间戳，以便计算两者之间的差异。其他变量用于记住先前的服务器 ID 和先前的状态，以便在必要时将差值返回为 0（对记录服务器第一个事件以及事件之后发生的事件的每一行都执行此操作`offline`）。

您现在可以将上述查询生成的结果集、SUM()`seconds_online`值分组并将它们除以 60 以获得分钟（如果您对秒数不满意），如下所示：

```
SELECT
  server,
  SUM(seconds_online) DIV 60 AS minutes
FROM (
  *the query above*
) s 
```

但是请注意，第一个查询并没有真正计算服务器自*上次*事件以来在线花费的秒数。也就是说，当前时间很可能与任何最新事件记录中的时间不同，并且不会被考虑在内，因为查询会计算*自上一行以来每行*的秒数。

解决此问题的一种方法是为每个服务器添加一行，其中包含当前时间戳和与上一条记录中相同的状态。因此，您不仅`server_status`可以将以下内容作为源表：

```
SELECT
  server,
  `time`,
  status
FROM server_status

UNION ALL

SELECT
  s.server,
  NOW() AS `time`,
  s.status
FROM server_status s
  INNER JOIN (
    SELECT
      server,
      MAX(`time`) AS last_time
    FROM server_status
    GROUP BY
      server
  ) t
    ON s.server = t.server AND s.`time` = t.last_time 
```

UNION ALL 的左边部分只返回`server_status`. 右侧部分首先获取`time`每个服务器的最后一个，然后加入结果集以`server_status`获取相应的状态，并在此过程中替换`time`为`NOW()`。

既然表已完成，其中包含反映当前时间的“假”事件行，您可以应用第一个查询中使用的方法。这是最终查询的样子：

```
SELECT
  server,
  SUM(seconds_online) DIV 60 AS minutes_online
FROM (
  SELECT
    *,
    @currenttime := UNIX_TIMESTAMP(`time`),
    @lasttime := CASE
      WHEN server <> @lastserver OR @laststatus = 'offline'
      THEN @currenttime
      ELSE @lasttime
    END,
    @currenttime - @lasttime AS seconds_online,
    @lasttime := @currenttime,
    @lastserver := server,
    @laststatus := status
  FROM
    (
      SELECT
        server,
        `time`,
        status
      FROM server_status

      UNION ALL

      SELECT
        s.server,
        NOW() AS `time`,
        s.status
      FROM server_status s
        INNER JOIN (
          SELECT
            server,
            MAX(`time`) AS last_time
          FROM server_status
          GROUP BY
            server
        ) t
          ON s.server = t.server AND s.`time` = t.last_time
    ) s,
    (SELECT @lastserver := 0) x
  ORDER BY
    s.server,
    s.`time`
) s
GROUP BY
  server
; 
```

[您也可以在 SQL Fiddle](http://sqlfiddle.com/#!2/e3082/11)上尝试（以及玩弄它）。

# android - 如何获取 EditText 内容并将其与其他内容进行比较？

> ID：12336759
> 
> 赞同：0
> 
> 时间：2012-09-09T05:28:33.603
> 
> 标签：android, android-edittext

```
public class MainActivity extends Activity implements OnClickListener {

    Button btn,btn1;
    String n,m;
    EditText t1,t2;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        t1 = (EditText) findViewById(R.id.editText1);
        t2 = (EditText) findViewById(R.id.editText2);

        n= t1.getText().toString();
        m = t2.getText().toString();
        btn = (Button) findViewById(R.id.button1);
        btn.setOnClickListener(this);

        btn1 = (Button) findViewById(R.id.button2);
        btn1.setOnClickListener(this);

    }
    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

        switch (v.getId()) {
            case R.id.button1:
                if(n.equalsIgnoreCase("subbu")&&m.equalsIgnoreCase("12345")){
                    Toast.makeText(this, "WELCOME",Toast.LENGTH_LONG).show();
                }
                break;

            default:
                if(n.equalsIgnoreCase("pani")&&m.equalsIgnoreCase("12345")){
                    Toast.makeText(this, "Hi subbu",Toast.LENGTH_LONG).show();
                    MediaPlayer myplayer;

                    myplayer = MediaPlayer.create(this, R.raw.alimba);
                    myplayer.start();
                }
                break;
        }

    }

} 
```

我正在使用上面的代码，但没有得到输出我是初学者我想获得editText的文本并想与if语句中的其他文本进行比较谁能帮我做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T05:31:27.163

问题是您只获取开始时的文本，`t1`而不是单击按钮时的文本。`t2``Activity`

将以下两行移到`public void onClick(View v) {`.

```
n = t1.getText().toString();
m = t2.getText().toString(); 
```

# asp.net-mvc-3 - MVC网站部署问题

> ID：12336761
> 
> 赞同：0
> 
> 时间：2012-09-09T05:29:21.613
> 
> 标签：asp.net-mvc-3, iis

在遇到 ASP.NET 和依赖关系以及与数据库的连接问题后，我已成功将 MVC 应用程序部署到 IIS 7.5 (Windows Server 2008 R2)。我使用了“默认网站”的导入应用程序功能。

这是我第一次设置 IIS，请多多包涵。

它设置在本地主机/系统。现在，我看到路由可以正常工作，因为 localhost/System (only /) 提供了我的欢迎视图，单击登录 (localhost/System/Account/Login - /Accounts/Login) 会提示我登录视图。

登录从数据库中填充菜单，所有菜单项都采用这种格式：/Controller/Action/Values。当我单击菜单中的项目时，IIS 发出请求 localhost/Controller/Action - WITHOUT System. 当我在请求中间手动添加系统时，它自然会起作用。

我该如何解决这个问题？

我可以轻松更改数据库中的菜单以添加 /System 前缀，但我在整个站点的 java 脚本中有大量相同的硬编码地址。这也意味着我在部署之前对站点名称进行了硬编码，我不喜欢这样。

另外，我的网站完全是白色的，好像 IIS 无法读取我的 site.css 文件。它位于 /Content 文件夹下，我的网站像这样引用它：

```
<link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" /> 
```

你有什么建议，我该如何解决这个问题？

更新：

我一直在查看 IIS 日志，这里有几行：GET /SYSTEM/Scripts/LookupJunction.js - 80 - ::1 Mozilla/5.0+(Windows+NT+6.1;+WOW64;+rv:15.0)+ Gecko/20100101+Firefox/15.0.1 200 0 0 31 GET /SYSTEM/Content/Site.css - 80 - ::1 Mozilla/5.0+(Windows+NT+6.1;+WOW64;+rv:15.0)+Gecko/ 20100101+Firefox/15.0.1 200 0 0 31 GET /SYSTEM/Scripts/modernizr-1.7.min.js - 80 - ::1 Mozilla/5.0+(Windows+NT+6.1;+WOW64;+rv:15.0)+ Gecko/20100101+Firefox/15.0.1 200 0 0 31 GET /SYSTEM/Content/2012.1.214/telerik.Office2007.min.css - 80 - ::1 Mozilla/5.0+(Windows+NT+6.1;+WOW64; +rv:15.0)+Gecko/20100101+Firefox/15.0.1 200 0 0 31 GET /SYSTEM/Content/2012.1.214/telerik.common.min.css - 80 - ::1 Mozilla/5.0+(Windows+NT +6.1;+WOW64;+rv:15.0)+Gecko/20100101+Firefox/15.0.1 200 0 0 46 GET /SYSTEM/Scripts/jquery-1.5.1.min.js - 80 - ::1 Mozilla/5.0+ (Windows+NT+6.1;+WOW64;+rv:15.0)+Gecko/20100101+Firefox/15.0.1 200 0 0 46 GET /SYSTEM/Scripts/2012.1.214/telerik.common.min.js - 80 - ::1 Mozilla/5.0+(Windows+NT+6.1; +WOW64;+rv:15.0)+Gecko/20100101+Firefox/15.0.1 200 0 0 15 GET /SYSTEM/Scripts/2012.1.214/telerik.menu.min.js - 80 - ::1 Mozilla/5.0+( Windows+NT+6.1;+WOW64;+rv:15.0)+Gecko/20100101+Firefox/15.0.1 200 0 0 15 GET /SYSTEM/Scripts/2012.1.214/jquery-1.7.1.min.js - 80 - ::1 Mozilla/5.0+(Windows+NT+6.1;+WOW64;+rv:15.0)+Gecko/20100101+Firefox/15.0.1 200 0 0 31 GET /Content/drock028.jpg - 80 - ::1 Mozilla /5.0+(Windows+NT+6.1;+WOW64;+rv:15.0)+Gecko/20100101+Firefox/15.0.1 404 0 2 0 GET /SYSTEM/Content/2012.1.214/Office2007/sprite.png - 80 - ::1 Mozilla/5.0+(Windows+NT+6.1;+WOW64;+rv:15.0)+Gecko/20100101+Firefox/15.0.1 200 0 0 15 GET /Home/Test - 80 - ::1 Mozilla/5.0 +(Windows+NT+6.1;+WOW64;+rv:15.0)+壁虎/20100101+火狐/15.0.1 404 0 2 78

因此，正在加载 site.css，但不是我的背景图片，它的路径缺少“SYSTEM”文件夹。我在我的 site.css 中这样引用它：

```
background-image: url('/Content/drock028.jpg'); 
```

所以，大多数东西都有好的 url，但不是我的背景图片，也不是从数据库 url 调用控制器操作。

但是，我该怎么办？我不能在数据库中使用 URL 助手，也不能在 java 脚本中使用它（或者我可以）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T05:47:50.137

对于第一个问题（数据库中的 URL），我会说将值保留为**/Controller/Action**格式，但更新您的视图以呈现应用程序相对 URL：

```
@Url.Content("~" + url) 
```

（因此，如果数据库中的 url 是**/Home/Index**，上面将给出**@Url.Content("~/Home/Index")**，它将呈现**/System/Home/Index**。）

对于第二部分，正如 Nick 所指出的，查看 Firebug 中的*Network*选项卡以查看 CSS 文件实际请求的 URL 可能会有所帮助（以及它是否得到 404/Not Found 或其他）。您的 CSS 路径代码是正确的，因此可能是 IIS 配置的问题。

# android - 股票应用程序的源代码

> ID：12336763
> 
> 赞同：0
> 
> 时间：2012-09-09T05:30:02.800
> 
> 标签：android, image-processing, open-source, android-4.0-ice-cream-sandwich

我想使用 ICS 中存在的股票图像编辑器的源代码。我在哪里可以下载它。请帮助一些人。我是这个领域的新手。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T05:37:16.893

ICS 图像编辑器直接嵌入到图库应用程序中。您可以在[此处](https://android.googlesource.com/platform/packages/apps/Gallery)找到它，您可以在其中[克隆 GIT 存储库](http://git-scm.com/book/en/Git-Basics-Getting-a-Git-Repository)。相机源代码[也可用](https://android.googlesource.com/platform/packages/apps/Camera)。但是，您会发现这些源代码的某些方面是本机运行的（在 C 中），而且我不认为这些源代码是公开的。*（您可能还会发现[这个问题](https://stackoverflow.com/questions/1105196/where-can-i-get-the-android-camera-application-source-code)很有用。）*

[Photo Studio](https://play.google.com/store/apps/details?id=com.kvadgroup.photostudio&hl=en)是一个第三方应用程序，它是封闭源代码而不是库存。

[Google Code](http://code.google.com/p/android-image-editor/source/browse/)上有第 3 方图像编辑器源代码。我警告你：代码可能不像你希望的那么简单。*（PS：下次你可能想做一些研究......这是通过[谷歌搜索](https://www.google.ca/search?q=android+image+editor+source)找到的。）*

# blackberry - 通过代码设置黑莓壁纸

> ID：12336765
> 
> 赞同：-3
> 
> 时间：2012-09-09T05:30:43.227
> 
> 标签：blackberry, wallpaper

我需要有关在 BlackBerry 中以编程方式更改壁纸的帮助。有没有可用的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T08:05:45.333

有一个类[HomeScreen](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/blackberry/api/homescreen/HomeScreen.html)

使用它及其方法[setBackgroundImage(String path2ImageFile)](http://tinyurl.com/8ehrz4y)。

# regex - 从 cricinfo 获取实时更新

> ID：12336768
> 
> 赞同：1
> 
> 时间：2012-09-09T05:31:11.283
> 
> 标签：regex, firebug

我正在从[http://www.espncricinfo.com/wcldiv4-2012/engine/match/576414.html](http://www.espncricinfo.com/wcldiv4-2012/engine/match/576414.html)获取实时更新，我能够做的是使用 wget 和正则表达式获取实时记分卡，解析“页面的标题”（即记分卡）。

但是我无法获取当我使用“firebug”时可以看到的评论，但是当我获取页面时，这些评论不会出现。

反正有没有用命令行使用firebug？（想知道我是否可以然后我可以获取这些结果。）

或者获取那些自动更新评论的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:26:56.313

我想您应该能够在您的网站上使用以下 RSS。您需要解析相关的提要并开始工作。

[http://www.espncricinfo.com/ci/content/rss/feeds_rss_cricket.html](http://www.espncricinfo.com/ci/content/rss/feeds_rss_cricket.html)

我怀疑 cricinfo 是否有自己可以利用的 API。

更新 1：Cricinfo 利用 yahoo 管道并合并这些提要，您也可以利用相同的方法并以 JSON 或 XML 格式获取结果管道：

这里有一个简单的管道，例如：

[http://pipes.yahoo.com/pipes/pipe.info? *id=tMcVGcqn3BGvsT* _2R2EvQ](http://pipes.yahoo.com/pipes/pipe.info?_id=tMcVGcqn3BGvsT__2R2EvQ)

# php - PHP 每 24 小时执行一次代码

> ID：12336772
> 
> 赞同：3
> 
> 时间：2012-09-09T05:31:49.613
> 
> 标签：php, sql, timestamp

我正在尝试创建一个每 24 小时执行一次的 PHP 代码。我正在使用的当前 CMS 支持这一点，并且可以正常工作，而我想让它变得更复杂一些。

每天一小时，我想要执行一个代码，这将在这一个小时内为我的用户提供特殊权限。

时间一到，我希望它恢复更改，取消权限。然后，用户需要等到第二天，当时间回来时。

例如：

```
<?php

if (!defined('UBER') || !UBER)
{
    exit;
}

dbquery("UPDATE catalog_pages SET visible = '1' WHERE id='91'");
$core->Mus('update_catalogue');

?> 
```

此代码每 24 小时执行一次，并且运行良好。它更新目录，将页面设置为对所有人可见。我只被困在如何让它在一个小时结束后消失。

假设时间是凌晨 4 点到凌晨 5 点。

如何使用 PHP 代码使页面在凌晨 5 点后消失？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T05:37:59.623

```
if (date("G") == '4'){
//give
}elseif (date("G") == '5'){
//takeway
} 
```

或在查询中

```
.. WHERE HOUR(NOW()) BETWEEN 4 AND 5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T05:42:20.770

这实际上很容易做到。当用户登录或尝试使用仅在特定时间授予的权限时，运行检查以查看时间是否在这些小时内。如果您的 CMS 允许您拦截事件，请使用以下内容：

```
onUserAction(){
    if(isSpecialHour()){
        denyPermission()...
    }
    else{
        grantPermission()...
    }
} 
```

当用户尝试做需要许可的事情时，系统应该检查它是否在那个特殊的时间段内，然后授予或拒绝许可。

仅使用 PHP，不可能让脚本以特定的时间间隔运行。PHP 脚本在加载时运行，除非有人在那个确切时间运行脚本（或使用类似 cron 的东西），否则无法完成。当然，您可以使用 cron 或 simmilar 来完成同样的事情。不过，上述方法可能是您最好的选择。

# c++ - 用表达式初始化数组

> ID：12336773
> 
> 赞同：0
> 
> 时间：2012-09-09T05:31:50.023
> 
> 标签：c++, c, arduino

> **可能重复：**
> [为什么我不能创建一个大小由全局变量确定的数组？](https://stackoverflow.com/questions/2427336/why-cant-i-create-an-array-with-size-determined-by-a-global-variable)

我正在尝试使用如下所示的表达式初始化数组，然后将所有值分配为零。

```
byte arg_listB[2*num_args+10]={0}; 
```

这会产生错误：

```
error: variable-sized object 'arg_listB' may not be initialized 
```

但是如果我用实际数字替换表达式，它就可以工作

```
byte arg_listB[10]={0}; 
```

为什么？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T06:33:31.587

声明静态数组时，必须使用常量值，例如字面量或常量变量。`#define`如果您只是想让代码更具可读性和更易于管理，则可以使用关键字为文字指定名称，或声明和初始化常量变量：

```
#define NUM_ARGS 5
/*...*/
byte arg_listB[NUM_ARGS]; 
```

但是，为了使用表达式来设置数组的大小，您必须使用指针创建一个动态数组。如何完成取决于您使用的语言。在 C 中，您可以使用该`calloc`函数来创建数组，如下所示：

```
#include <stdlib.h> //required for calloc
/*...*/
int num_args = 5;
byte* arg_listB = (byte*)calloc(2*num_args+10, sizeof(byte)); 
```

这将动态创建一个数组大小的内存块，并将第一个字节的地址分配给您的指针。需要注意的一点是，它会`calloc`自动将数组中的元素初始化为 0，因此该部分已经为您完成了。当然，您还需要记住在完成数组后清理分配的内存，如下所示：

```
free(arg_listB); 
```

从技术上讲，如果包含`<cstdlib>`标头，则可以在 C++ 中使用这些函数。但是，C++ 对于动态内存分配有自己的特殊关键字： `new`和`delete`. 这些可以像这样使用：

```
/*...*/
int num_args = 5;
byte* arg_listB = new byte[2*num_args+10];
//initialize your array

//free the memory when done with the array
delete[] arg_listB; 
```

如评论中所述，您需要在声明数组后对其进行初始化，并且在完成后不要忘记释放内存。由于内存管理和动态数组的内容比这里要多得多，我强烈建议您研究一下。这里有几篇文章可能会有所帮助：

C： [数组](http://www.exforsys.com/tutorials/c-language/c-arrays.html)， [动态内存](http://www.exforsys.com/tutorials/c-language/dynamic-memory-allocation-in-c.html)

C++：[动态内存](http://www.cplusplus.com/doc/tutorial/dynamic/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T08:42:53.260

我认为您的 C++ 标签是错误的，该语言没有您正在使用的可变长度数组 (VLA) 的概念，即声明一个大小取决于变量的数组。（C++ 有其他工具可以实现这一目标。）

在 C 中，VLA 无法初始化，您必须分配给各个成员或通过 C 库函数设置字节`memset`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T05:37:59.233

数组声明的初始化器仅适用于静态大小的数组，不适用于动态大小的数组。您可以做以下两件事之一 - 要么制作`num_args`一个编译时常量（`#define`可能带有 a ），要么分别分配和初始化：

```
byte arg_listB[2*num_args+10];
bzero(arg_listB, 2*num_args+10); 
```

# objective-c - UISlider 自定义

> ID：12336776
> 
> 赞同：3
> 
> 时间：2012-09-09T05:32:17.760
> 
> 标签：objective-c, ios, cocoa-touch, uislider

我正在像这样自定义我的 UISlider：

```
[[UISlider appearance] setMinimumValueImage:[[UIImage imageNamed:@"slider_minimum.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 5, 0, 0)]];
[[UISlider appearance] setMaximumValueImage:[[UIImage imageNamed:@"slider_maximum.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 5, 0, 0)]]; 
```

这有点奏效，结果如下： ![在此处输入图像描述](../Images/549bf7d8f9c7f2b62968a4e584c90619.png)

它做了一些事情，将图像放在两边，但保持旧样式，并且不会拉伸我的图像。我究竟做错了什么？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T06:24:03.777

你可以这样做：

```
[slider setMinimumTrackImage:[[UIImage imageNamed:@"redSlider.png"] stretchableImageWithLeftCapWidth:10.0 topCapHeight:0.0] forState:UIControlStateNormal]; 
```

**结果：**

![截屏](../Images/6978dbc792f974629932325c0f715128.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T12:33:55.373

```
[slider setMaximumTrackImage:[[UIImage imageNamed:@"slider_maximum"]] forState:UIControlStateNormal];

[slider setMinimumTrackImage:[[UIImage imageNamed:@"slider_minimum"]] forState:UIControlStateNormal]; 
```

# php - 从 BitBucket 请求 OAuth 令牌

> ID：12336777
> 
> 赞同：7
> 
> 时间：2012-09-09T05:32:29.787
> 
> 标签：php, curl, oauth, bitbucket, bitbucket-api

在过去的 4 个小时里，我一直在尝试将 BitBucket 集成到我的应用程序中，但无济于事。

在阅读[BitBucket 的 RESTful API 文档](https://confluence.atlassian.com/display/BITBUCKET/Using+the+bitbucket+REST+APIs)时，我注意到您需要使用 OAuth — 没关系，我正在使用 JR Conlin 的[OAuthSimple](https://github.com/jrconlin/oauthsimple/)库，如果我觉得很好（我尝试了[oauth-php](http://code.google.com/p/oauth-php/)，但它有点复杂 — 我没有需要所有这些选项来进行如此小的集成）。

据我了解，使用 OAuth 进行身份验证的第一步是通过 POST 请求新令牌。提供必要的参数时，您应该得到来自 BitBucket 的响应，如下所示：

`oauth_token=Z6eEdO8lOmk394WozF9oJyuAv899l4llqo7hhlSLik&oauth_token_secret=Jd79W4OQfb2oJTV0vzGzeXftVAwglnEJ9lumzYcl&oauth_callback_confirmed=true`

为此，我使用 cURL 和 OAuthSimple：

```
$key    = 'key_provided_by_bitbucket';
$secret = 'key_provided_by_bitbucket';
$path   = 'https://api.bitbucket.org/1.0/oauth/request_token';

$params = array(
    'oauth_consumer_key'        => $key,
    'oauth_nonce'               => base_convert(mt_rand(10000, 90000), 10, 32) . 'a',
    'oauth_signature'           => 'HMAC-SHA1',
    'oauth_signature_method'    => 'HMAC-SHA1',
    'oauth_timestamp'           => time(),
    'oauth_callback'            => base_url('dashboard'),
    'oauth_version'             => '1.0a'
);

$oauth  = new OAuthSimple($key, $secret);
$result = $oauth->sign(array(
    'action'        => 'POST',
    'path'          => $path,
    'parameters'    => $params
));

// load resulting url into a string
$ch = curl_init($result['signed_url']);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$r = curl_exec($ch);
curl_close($ch); 
```

问题是，当我发送请求时，会发生以下两种情况之一：

1.  如果我像张贴在这里一样发送它，我会收到 401 错误（我可以通过 curl_getinfo($ch) 看到）
2.  如果我设置 curl_setopt($ch, CURLOPT_POST, 1)，我会收到 400 Bad request

结果字符串（存储在 中`$r`）是一个空字符串。这`signed_url`是一个正确格式的 URL AFAIK，它是这样的：

`https://api.bitbucket.org/1.0/oauth/request_token?oauth_callback=http%3A%2F%2Flocalhost%2Fidv&oauth_consumer_key=key_provided_by_bitbucket&oauth_nonce=b47a&oauth_signature=3A1R%2FoKxTqh6Q23poaS%2BVNzhwpE%3D&oauth_signature_method=HMAC-SHA1&oauth_timestamp=1347167282&oauth_version=1.0a`

如果我在浏览器的地址栏中手动输入该地址，我将获得 BitBucket API 的身份验证对话框，端口为 443。但我无法使用我的凭据登录。然后它会一直说“无法验证 OAuth 请求”。

我不知道我做错了什么，因为这是我第一次使用 OAuth。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T01:31:10.743

问题是 Curl 将验证 SSL 证书。

要解决此问题，您可以告诉 Curl 忽略 SSL 证书的验证：

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); 
```

# c++ - 在栈和堆之间动态切换

> ID：12336778
> 
> 赞同：6
> 
> 时间：2012-09-09T05:33:06.663
> 
> 标签：c++, memory-management

假设我正在编写一个简单的缓冲区类。该缓冲区将充当标准 C 对象数组的简单包装器。它还应该向后兼容以使用以简单数组作为输入的现有函数。

这里的目标是使这个缓冲区在速度和内存使用方面都有效。由于堆栈分配总是比堆快，我想将堆栈上的所有内容分配到某个阈值，如果它变大，则在堆上重新分配。如何有效地做到这一点？

我进行了研究，显然 std::string 做了类似的事情。我只是不确定如何。我所拥有的最接近的解决方案是（伪代码，未编译）：

```
template <typename T, int MinSize>
class Buffer
{
public:

    void Push(const T& t)
    {
        ++_size;

        if (_size > MinSize && _heap == NULL)
        {
            // allocate _heap and copy contents from stack
            // _stack is unused and wasted memory
        }
        else if (_heap != NULL)
        {
            // we already allocated _heap, append to it, re-allocate if needed
        }
        else
        {
            // still got room on stack, append to _stack
        }
    }

    void Pop()
    {
        --_size;

        if (_size <= MinSize && _heap != NULL)
        {
            // no need for _heap anymore
            // copy values to _stack, de-allocate _heap
        }
        else if (_heap != NULL)
        {
            // pop from heap
        }
        else
        {
            // pop from stack
        }
    }

private:

    T _stack[MinSize];
    T* _heap;
    int _size;
}; 
```

如您所见，`_stack`当缓冲区超出`MinSize`. 此外，如果 Buffer 足够大，push 和 pop 的成本可能会特别高。另一种解决方案是将前几个元素始终保留在堆栈上，并将溢出放在堆上。但这意味着 Buffer 无法“转换”为简单的数组。

有更好的解决方案吗？如果这是在 std::string 中完成的，有人可以指出如何或提供一些资源吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T08:01:33.343

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T12:51:05.370

我不相信你在这里需要一个新的数据结构。在我看来，您真正想要的是一个新的**分配器**，可以与您认为最好的任何结构一起使用。

在 C++03 中，这会相对困难，但是 C++11 现在要求 STL 容器与有状态分配器一起工作，因此您可以完美地创建一个带有小堆栈的分配器供自己使用......并将*其*用作的一个论点`std::vector<>`。

示例（使用模板别名）

```
template <typename T, size_t N = 8>
using SmallVector = std::vector<T, SmallAllocator<T, N>>; 
```

通过这种方式，您将受益于实现的所有稳健性和优化`std::vector`，并且您只需提供分配层，这似乎是最初的目标。

# iphone - iOS 对讲机应用在后台播放音频

> ID：12336781
> 
> 赞同：4
> 
> 时间：2012-09-09T05:33:25.010
> 
> 标签：iphone, ios

我正在开发一个 Walkie Talkie 应用程序并且基础工作正常。您选择一个用户，记录一条消息，然后通过推送通知发送。他们打开下载和播放消息的应用程序。[在遇到Zello](http://itunes.apple.com/app/zello-walkie-talkie/id508231856?ls=1&mt=8)之前，我对此非常满意。

他们正在做两件有趣的事情：

1) 如果您收到一条消息并且应用程序正在后台运行，它将显示一条通知并开始播放消息，而无需打开应用程序。

![泽洛](../Images/fa2fbbfa6ca52a5474c657e87819ed74.png)

2) 消息会流式传输到您的手机并在其他用户仍在讲话时开始播放。

谁能给我一个关于他们是如何做到这一点的线索？我添加了设置音频/voip 背景模式键和初始化音频会话等基础知识：

```
[[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayAndRecord error:nil];
[[AVAudioSession sharedInstance] setActive:YES error:nil]; 
```

但我不确定如何超越这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T06:34:14.420

在 viewdidload 方法中尝试此代码：

```
 NSError *setCategoryErr = nil;
    NSError *activationErr  = nil;
    [[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayback error: &setCategoryErr];
    [[AVAudioSession sharedInstance] setActive: YES error: &activationErr];
    [[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
    UIBackgroundTaskIdentifier newTaskId = UIBackgroundTaskInvalid;
    newTaskId = [[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:NULL]; 
```

希望它可以帮助你。

# sql - 在 PostgreSQL 中，如何插入只有一个标识列的表中？

> ID：12336789
> 
> 赞同：16
> 
> 时间：2012-09-09T05:35:06.037
> 
> 标签：sql, postgresql, identity

例如：

```
{create table Participant ( id serial, primary key(id) );} 
```

在这种情况下如何插入表格？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-09T05:49:27.853

如果您像上面那样创建表格，

您可以使用`default`以下方式插入：

```
INSERT INTO Participant values(default); 
```

查看**[SQLFIDDLE](http://sqlfiddle.com/#!11/6d38a/2)**。

另一种插入方式是：

```
INSERT INTO Participant values(NEXTVAL('Participant_id_seq')); 
```

`CREATE TABLE``"Participant_id_seq"`将为串行列创建隐式序列" `Participant.id"`.

`pg_get_serial_sequence`您可以通过以下方式使用函数获取表的序列：

```
pg_get_serial_sequence('Participant', 'id') 
```

它将使用从序列中获取新值`NEXTVAL()`。

查看**[SQLFIDDLE](http://sqlfiddle.com/#!11/83374/4)**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-09T05:52:00.467

```
insert into Participant values (default); 
```

# jquery - Jquery手风琴删除换行符

> ID：12336794
> 
> 赞同：-1
> 
> 时间：2012-09-09T05:36:16.537
> 
> 标签：jquery, html, css

我试图弄清楚如何删除换行符，以便每张图片都彼此相邻。任何帮助将不胜感激！

[http://jsfiddle.net/5dkLu/](http://jsfiddle.net/5dkLu/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T05:42:14.123

试试这个

```
.accordion a {
     display: inline-block; /* used inline-block instead of block*/
     color: black;
     font-weight: bold;
     text-decoration: none;
} 
```

[**演示**](http://jsfiddle.net/5dkLu/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T05:41:52.723

您只需使用几行代码即可完成此操作：

```
.accordion dd a {
    float: left;
}

.accordion dd {
    padding: 10px;
    font-size: 12px;
    overflow: hidden; //Added this line.
} 
```

虽然这可能会解决您的问题，但我强烈建议您查看代码的格式。我几乎从不建议浮动`a`标签。也许您可以将它们放在一个无序列表中，并使每个`a`标签包含在一个`li`标签中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T00:17:05.753

对我来说，问题是我使用的是旧版本的 jquery-ui.js (< 1.90)。当我切换到 jquery-ui-1.9.0.custom.js 时，一切正常。

实际上，将图标显示属性更改为 inline-block 是一个非常糟糕的解决方案。如果您比较图标的位置和文本，您会发现它与应有的不同。

# asp.net - 在 Web 上打印 Crystal 报表

> ID：12336795
> 
> 赞同：0
> 
> 时间：2012-09-09T05:36:58.813
> 
> 标签：asp.net, .net, crystal-reports

在谷歌搜索通过 Crystal Report 在 ASP.NET 页面上打印生成的报告后，我发现这东西是不可能的，因为这样做意味着在服务器上打印一个页面，这是不正常的，因为用户想要它的打印它的客户，所以这里有一些问题：

1.  请纠正我，我错了吗？（我的意思是可以在客户端打印吗？）

2.  在使用水晶报表之前，我已经生成了我的报表`Stimulsoft`。当用户单击页面上的打印按钮时，Stimul 报告会回发页面，重新加载后，打印对话框打开并开始打印。如何通过水晶报告执行此类操作

3.  如果不可能，那么当用户无法打印时，网页上的水晶报表有什么优势？！

4.  我认为最好的方法是创建一个 excel 导出并强制它在客户端下载，是真的吗？

如果有人有想法，我会很高兴知道，即使是很小的。抱歉英语语法不好（我是英语新手）。有关更多详细信息，请评论我，我将更新我的问题。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T05:42:03.317

您可以将其转换为 pdf，然后用户可以从客户端计算机打印或保存它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:11:17.543

在另一个系统上检查我的应用程序后，我发现因为我在 mu 系统上安装了 PDF 打印机，当我点击打印按钮时，水晶报表开始将我的报表导出为 PDF 文档，所以我认为水晶报表正在行动也像 StimulSoft 一样，并显示导出对话框取决于客户端打印选项，所以我的问题从一开始就解决了，只是在我的客户端上遇到了问题。:D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T12:14:52.797

我假设您有一个 aspx 页面，该水晶报表与网站的其他组件（如页眉、页脚和菜单等）一起显示。并且您只想打印水晶报表而不是整个页面。如果我的假设不正确，请纠正我。

但是有了上述假设，您可以使用javascript打开一个只有水晶报表的新浏览器窗口（不需要回发）并在新窗口中触发打印功能。您可以使用以下链接中描述的技术将水晶报表复制到新窗口：

[在不同的窗口中附加相同的节点](https://stackoverflow.com/questions/8349245/appending-same-object-in-different-windows)

# vim - webapp2、flask 等的 Vim 代码完成

> ID：12336800
> 
> 赞同：1
> 
> 时间：2012-09-09T05:37:40.510
> 
> 标签：vim

我正在使用[john andersons](http://sontek.net/blog/detail/turning-vim-into-a-modern-python-ide#tab-completion-and-documentation)精彩的 vim 设置。它启用了 python 的代码完成功能。我很好奇 webapp2,flask 是否存在这样的解决方案

可能我没有很好地描述这个所以这里是一个例子

当我输入：

```
import math
math.a 
```

出现许多选项（acos、acosh 等...）

我想要同样的功能

```
import webapp2
webapp2. 
```

或者

```
import flask
flask. 
```

这存在吗？我搜索并找不到。它可以建造吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T23:13:48.193

我使用[python-mode 插件](https://github.com/klen/python-mode)，它提供了这种更智能的 python 完成。

# java - 如何调用从本机代码返回 char[] 的 Java 方法？

> ID：12336804
> 
> 赞同：0
> 
> 时间：2012-09-09T05:38:15.097
> 
> 标签：java, android, android-ndk, java-native-interface

我有一个带有以下签名的 Java 函数：

```
char[] getResult() 
```

如何从本机 C 代码调用此方法并将返回值转换为 C 字符数组？JNI 提供了一个`CallCharMethod`功能，但似乎没有提供`CallCharArrayMethod`或类似的功能。我是否必须将 getResult 的输出包装在字符串中并使用 CallObjectMethod？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T05:56:24.963

使用[`CallObjectMethod`](http://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/functions.html#wp16656)；每个数组类型都是对象类型:-)

```
JNIEnv *env = ...;
jobject inst = ...;
jmethodID getResult_id = ...;
jcharArray array = (*env)->CallObjectMethod(env, inst, getResult_id); 
```

确保记住 will be 的正确描述`getResult`符`()[C`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T05:59:58.783

这很复杂，因为 Java char 类型和 C char 类型尽管名称相同，但非常不同。

Java char 类型表示 16 位 Unicode 字符。C 的 char 也用于表示一个字符，但由于 C 早于 Unicode，因此它被视为一个字节，而且我不知道 char 超过 8 位字节的任何 C 实现（尽管标准不禁止这）。

因此，就将 Java 字符数组转换为 C 字符数组而言，您可能需要处理一些编码问题。如果您的 Unicode 字符不适合 16 位，那就更复杂了。

但是对于方法的调用，JNI 提供了调用返回原始类型的方法的函数和 Objects 的方法，而在 Java 中，数组是 Objects，所以你会想要使用`CallObjectMethod`.

# arguments - SWIG php 如何调用引用参数

> ID：12336805
> 
> 赞同：1
> 
> 时间：2012-09-09T05:38:16.813
> 
> 标签：arguments, swig

我正在尝试通过 SWIG 在 PHP 中使用我的 C++ 库，一切正常，并且我准确地生成了我的共享对象。我还在接口文件中包含了 phppointers.i 和 std_string.i。但是当我想调用在其输入部分中具有引用或指针参数的 C++ 方法时，该方法将无法正常工作，或者我遇到了一些错误，例如：

```
Fatal error:no matching function 
```

例如，我的一种方法声明如下：

```
int func(string &ptr,bool space=true) const; 
```

但是当我在我的 php 代码中调用这个方法时：

```
$bf->func('abcd',true); 
```

我收到了这个错误：

```
Fatal error:no matching function 
```

我试图用其他方式调用这个函数，比如：

```
$str = 'abcd';
$bf->func(&$str,true); 
```

但是这次我得到了以下错误：

```
Fatal error: Call-time pass-by-reference has been removed 
```

我很困惑，如果有人能帮助我解决这个问题，我真的很感激。

# wordpress - 如何以 Lynda 或其他视频培训网站的风格创建音频流媒体网站？

> ID：12336807
> 
> 赞同：2
> 
> 时间：2012-09-09T05:38:28.747
> 
> 标签：wordpress, streaming, soundcloud, shopify, audio-player

我想创建一个流媒体商店，如 Lynda.com、Udemy.com 或其他视频培训网站——客户可以在其中购买和/或订阅我的数字图书馆，但客户只能流式传输内容，不能下载。这是我应该在 WordPress、Shopify 还是其他东西中做的事情？一个关键方面是客户能够在购买单个流和每月订阅之间来回切换而不会丢失他们购买的流。

内容将是自创的音频文件。至于音频播放器，我正在考虑使用 SoundCloud.com 并将 SoundCloud.com 上的音频私有化。然后将音频嵌入网站以防止盗版，并依靠第三方网站来托管音频内容，而不是给托管服务提供商带来负担。还是有更好的解决方案？

感谢您的任何反馈！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T21:47:21.587

您可以使用 Wordpress，但需要更多的参与，而不仅仅是建立一个基本的网站。您需要为用户提供唯一的 URL 以从中流式传输内容。

除了构建自定义平台之外，您还可以使用[http://buddypress.org/ 之](http://buddypress.org/)类的东西来创建用户配置文件。并且只允许付费用户访问某些内容。

Shopify 只会帮助接受订单。不授予用户帐户登录权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-17T06:02:13.097

您*可以*使用 shopify，然后使用 Heroku 之类的东西构建用户登录端。我们也有类似的目标，即建立一个现场音乐预订市场——基本上这里的区别在于艺术家是用户，而不是客户。我们将 Collections 用作配置文件，并将 Products 用作可预订的包。我们只是嵌入了 youtube 视频，并确保关闭 youtube 嵌入代码中的推荐。我们目前公开此信息，但它可能位于您的实例中的登录名（shopify 提供的基本登录名/帐户）后面。这将有点手动：例如，他们“购买”订阅，然后他们在结帐时创建一个登录，然后他们就可以访问视频/音频。以我们的市场为例说明我的意思：[tremolo.com.au](http://www.tremolo.com.au)

# iphone - 应用拒绝 10.6

> ID：12336809
> 
> 赞同：1
> 
> 时间：2012-09-09T05:39:22.553
> 
> 标签：iphone

由于未优化以支持设备屏幕尺寸和/或分辨率，我的苹果应用程序被拒绝。

但它非常适合 iPhone 4 的屏幕。这个应用程序不是通用的，这个应用程序适用于 ios5.1，所以没有 iPhone 3g。会是什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T05:54:50.157

拒绝代码 10.6 通常意味着您缺少视网膜或非视网膜图像，现在两者都是必需的。有关添加视网膜图像的更多信息，另请参阅此帖子：

[支持 Retina 和非 Retina 显示器的图形](https://stackoverflow.com/questions/11553914/supporting-graphics-for-both-retina-and-non-retina-display)

# c# - 将 TextWrapping 设置为 Paragraphin WinRT

> ID：12336812
> 
> 赞同：0
> 
> 时间：2012-09-09T05:40:17.423
> 
> 标签：c#, xaml, windows-8, windows-runtime

如何将文本包装在段落元素中？实际上 Paragraph 或 Run 元素中没有属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T15:31:15.097

如果您在 RichEditBox 或 RichTextBlock 中有文本，并且容器限制了 UI 元素的宽度，则默认情况下它会换行。

例如，下面的代码可以正常工作。

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
    <RichEditBox x:Name="reb"/>
    <RichTextBlock x:Name="rtb" Grid.Column="1">
        <Paragraph>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse 
            bibendum nibh quis leo ultrices condimentum. Vestibulum dolor mi, lacinia
            non rutrum ac, mollis quis odio. Nulla tristique massa id magna tincidunt
            faucibus. Duis lacinia nunc in arcu eleifend semper. Etiam sed enim leo.
            Proin eu mi ut nulla congue tempus nec at velit. Ut ut nisi lectus. In sit
            amet dui a sem elementum dictum. Mauris eget mi sit amet arcu euismod
            elementum. In pretium cursus arcu, nec ultricies leo ultrices ac. Sed
            urna erat, posuere vel molestie sed, suscipit in nunc. Suspendisse potenti.
            Phasellus fringilla laoreet augue, vel tincidunt eros feugiat vel. Fusce 
            vel scelerisque dui. Praesent vel augue quis ligula bibendum vulputate vel vitae nisl.
        </Paragraph>
    </RichTextBlock>
</Grid> 
```

使用[此处](http://msdn.microsoft.com/en-us/library/windows/apps/BR227548)找到的代码将本地 RTF 文档加载到 RichEditBox 中，文本将按预期换行。默认情况下，文本也会为 RichTextBlock 换行。

段落不能单独切换为换行/不换行。它是控制它的容器。例如，在 RichTextBlock 上，它是 TextWrapping 属性。

# java - 默认情况下，Java 和 C++ 中的类是私有的还是公有的？

> ID：12336814
> 
> 赞同：38
> 
> 时间：2012-09-09T05:40:25.640
> 
> 标签：java, c++, class-visibility

默认情况下，Java 和 C++ 中的类是私有的还是公有的？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-09-09T05:43:33.117

*   **爪哇**：

    默认情况下，类的可见性是包私有的，即只对同一包中的类可见。

*   **C++**：

    该类没有像 Java 中那样定义的可见性。如果您将它们包含在编译单元中，它们是可见的。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-09-09T05:44:31.613

在 Java 中，*顶级*类要么是公共的，要么是非公共的。没有“私人”。您只能使用 public 关键字或将其关闭。如果您不使用它，它是非公开的，即仅对同一包中的其他类可见。

*嵌套*类，即另一个类内部的类，可以像任何其他类成员一样设为公共、包私有、受保护或私有。默认值（即没有修饰符的那个）是包私有的，仅对同一包中的类可见。

编辑：忘记了 C++ 答案，所以请参阅（并投票）@zeller 的答案。:)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-09-09T05:45:43.717

根据[JLS §6.6.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.6.1)，

> 如果顶级类或接口类型未声明为公共的，则只能从声明它的包内访问它。

因此，Java 类默认为*package-private*。

但是，这不适用于 C++。一个类缺乏可见性——只有它的成员才能拥有访问控制。有关成员访问控制的信息，请参阅 C++11 标准的第 11 节。这是¶1的摘录...

> 一个类的成员可以是
> 
> *   `private`; 也就是说，它的名称只能被声明它的类的成员和朋友使用。
> *   `protected`; 也就是说，它的名称只能由声明它的类的成员和朋友、从该类派生的类以及它们的朋友使用（见 11.4）。
> *   `public`; 也就是说，它的名称可以在任何地方使用而不受访问限制。

# oracle - ORACLE 变异表错误在一个触发器中，但不是另一个；为什么？

> ID：12336818
> 
> 赞同：1
> 
> 时间：2012-09-09T05:41:17.527
> 
> 标签：oracle, triggers, mutating-table

好的，我有两个表 - ORDERS 和 ORDERLINES - 它们具有基本相同的问题，每个表都有触发器来解决问题。问题是除了具有表级唯一性的 PK 之外，在一个名为 RECID 的字段上，还有另一个字段 RECNO，它需要与另一个字段的关系是唯一的。

这些表与 FK 相关，如下所示：

`ORDERS.WAREHOUSEID > WAREHOUSES.CUSTOMERID > CUSTOMERS`

和

`ORDERSLINES.ORDERID > ORDERS`

On`ORDERS`并且`ORDERSLINES`我有`BEFORE INSERT`触发器来分配特定于领域的唯一**RECNO**。
在`ORDERS`中，**RECNO**需要在记录范围内是唯一的`CUSTOMERS`。
在`ORDERLINES`中，**RECNO**需要在记录范围内是唯一的`ORDERS`。

触发器`ORDERS`工作得很好。插入新订单时，会为其所属的客户 分配下一个唯一的**RECNO 。**

`ORDERLINES`另一方面，应该在它所属的顺序内分配下一个唯一**RECNO**的触发器会抛出可怕的***{ORA-04091: table ORDERLINES is mutating, trigger/function may not see it}***异常。

这是有效的触发器：

```
CREATE OR REPLACE TRIGGER ORDERS_BI 
BEFORE INSERT ON ORDERS 
FOR EACH ROW
DECLARE
    CUSTID  WAREHOUSES.CUSTOMERID%TYPE;
BEGIN
    SELECT MIN(CUSTOMERID) INTO CUSTID FROM WAREHOUSES 
        WHERE NVL(WARE_ID, '-') = NVL(:NEW.WAREHOUSEID, '-');

    SELECT NVL(MAX(RECNO), 0) + 1
        INTO :NEW.RECNO
        FROM deploy.ORDERS O
        LEFT JOIN deploy.WAREHOUSES W
            ON NVL(W.REC, '-') = NVL(O.WAREHOUSEID, '-')
        WHERE NVL(W.CUSTOMERID, '-') = NVL(CUSTID, '-');
END; 
```

这是不起作用的***触发器***：

```
CREATE OR REPLACE TRIGGER ORDERLINES_BI 
BEFORE INSERT ON ORDERLINES 
FOR EACH ROW
DECLARE
    nORDERID ORDERLINES.ORDERID%TYPE;
BEGIN
    SELECT MIN(ORDERID) INTO nORDERID FROM REVORDERS 
        WHERE ORDERID = :NEW.ORDERID;

    SELECT NVL(MAX(RECNO), 0) + 1
      INTO :NEW.RECNO
      FROM deploy.ORDERLINES L
      LEFT JOIN deploy.ORDERS O
        ON O.ORDERID = L.ORDERID
      WHERE O.ORDERID = nORDERID;
END; 
```

有人可以解释为什么第一个有效，而第二个无效？有什么方法可以重写第二个以使其工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T10:05:59.393

我首先查看了您的代码，而不是您的解释。我的第一个想法是*“这个人试图伪造一个[序列](http://docs.oracle.com/cd/E11882_01/server.112/e25789/schemaob.htm#CNCPT611)。”* 这显然不是您问题的答案，但这是您首先遇到麻烦的原因。

当您在伪造序列时遇到问题时，显而易见的解决方案是使用真实序列。

正如[Nicholas 已经指出](https://stackoverflow.com/a/12336945/458741)的那样，当您尝试从触发触发器的表中读取时，会发生 ORA-04091。有多种方法可以避免这种情况，其中大多数避免尝试做一些有点时髦的事情。但是，它们不会影响错误的根本原因；那是你做错了*什么*。此错误通常表示以下两种情况中的一种或两种：

1.  您将太多逻辑放入触发器中
2.  您的数据模型有缺陷。

第一个解决方案是将逻辑移动到一个包中，这具有去除一层混淆的额外好处。第二个解决方案是正确规范您的数据库。

在您的情况下，根据您提供的信息，您的数据模型似乎没问题，尽管正如我所说，我不同意实施。

这为您提供了四个选项来解决您的问题，我将按顺序详细说明

1.  删除你的触发器。
2.  用序列替换您当前的逻辑。
3.  将所有触发逻辑删除到一个过程中。
4.  破解你的错误。

我不打算讨论第 3 点，因为你可以自己做。Nicholas 已经部分涵盖了第 4 点，我不会提倡我不同意的内容。这留下了第 1 点和第 2 点。你说

> 在 ORDERS 中，RECNO 在 CUSTOMERS 记录范围内必须是唯一的。

这不是您实现它的方式。您的代码在记录范围内`RECNO` **连续**`CUSTOMERS`。*根据定义*`ORDERS`，两者的主键在记录范围内都是唯一`ORDERLINES`的。*`CUSTOMERS`*

 *就其本身而言，这意味着选项 1 最适合您。完全移除触发器；表的主键已经在做你需要的一切。这也使选项 2 无效；如果您添加一个序列，那么它将基本上是一个单独的主键。

我没有理由认为您需要在每个客户中连续唯一的订单；为什么要这样做呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T06:11:18.597

您收到该错误是因为第二个触发器在修改表时尝试读取表。当父表上的触发器导致引用外键的子表上的插入时，也会发生这种情况。作为快速解决创建视图并尝试使用**而不是**触发器的方法。另请查看[Tom 的](http://asktom.oracle.com/pls/apex/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:290416059674)示例，了解如何处理变异问题。此外，如果将第二个触发器保持原样，则任何**插入 your_table select .. from table**都会引发变异错误。例如：

此插入将起作用

```
insert into ORDERLINES(column1, column2... columnN) 
  values(val1, val2,..., valN) 
```

但是这个不会。

```
insert into ORDERLINES(column1, column2... columnN) 
  select val, val..val from table 
```*

# sql - 如何在 sql 中为 nvarchar(max) 数据类型创建索引？

> ID：12336821
> 
> 赞同：13
> 
> 时间：2012-09-09T05:41:59.857
> 
> 标签：sql, indexing

我有一个带有 nvarchar(max) 数据类型列的表。此列中数据的最大长度为 37000，那么我不能使用 nvarchar(4000)。如何为该列创建索引？我的数据是波斯语的 unicode 文本。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-09T05:52:45.177

1-您可以在“包含”中使用它

```
IF OBJECT_ID('tempdb..#example') IS NOT NULL 
BEGIN
    DROP TABLE #example
END

CREATE TABLE #example (id INT PRIMARY KEY IDENTITY(1,1), name VARCHAR(MAX))

CREATE NONCLUSTERED INDEX IDX_NC_temp_example_name ON #example(id) INCLUDE(name) 
```

2-或者您可以考虑使用“CHECKSUM”方法。它用于构建散列索引，特别是提高索引长字符列的索引速度（如您所见）。您可以阅读更多内容并找到示例：http: [//msdn.microsoft.com/en-us/library/ms189788.aspx](http://msdn.microsoft.com/en-us/library/ms189788.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-09T00:19:35.763

最好是 using `DROP_EXISTING = ON`，它使用现有索引进行重建。

这是一个例子

```
CREATE NONCLUSTERED INDEX IDX_NC_temp_example_name ON #example(id) INCLUDE(name)
WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = ON, SORT_IN_TEMPDB = ON, DROP_EXISTING = ON, ONLINE = ON, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 80) ON [PRIMARY] 
```

# visual-studio - 在 Visual Studio [Visualizer] 中添加结构？

> ID：12336825
> 
> 赞同：2
> 
> 时间：2012-09-09T04:35:43.390
> 
> 标签：visual-studio, qt

我试图在 autoexp.dat 的 [Visualizer] 部分中为 QHostAddress 添加一个部分，但 QHostAddress 中的数据实际上保存在 QHostAddressPrivate 中，Visual Studio 不知道它（因为它是 Qt 私有的）。有没有办法在 autoexp.dat 中定义一个结构，转换一个未知指针或类似的东西，以便我可以显示其中保存的 IP 地址？

更新：

我玩弄了这个并设法让下面的代码工作。但是，由于以下几个原因，它有点笨拙：

1.  它使用了大量的铸造。声明一个结构并使用它会更整洁。
2.  我只能将 IPv6 组显示为带有“0x”标头的十六进制，这会使地址有点混乱。
3.  我希望能够将 IPv4 和 IPv6 数据显示为子项，但我无法弄清楚如何在“子项”部分创建具有多个部分的字符串。
4.  Visual Studio 不接受 IPv6 地址中的冒号，即使在字符串中声明也是如此。如果我这样做，我会收到错误：

> 错误！Autoexp.dat:line(1687) for 'QHostAddress| *::QHostAddress'：#else 错误结束时应为 ')'！Autoexp.dat:line(1687) for 'QHostAddress|* ::QHostAddress': 预览规则解析失败 ERROR！Autoexp.dat:line(1687) for 'QHostAddress|*::QHostAddress': Failed to match ')' for preview/children rule

```
[Visualizer]
;QT_DEBUG_START
QHostAddress|*::QHostAddress{
    preview
    (
        #(
            #if (*((quint32 *)$c.d.d) != 0) (
                #("IPv4=", [*(((quint8 *)$e.d.d) + 3), u],
                ".", [*(((quint8 *)$e.d.d) + 2), u],
                ".", [*(((quint8 *)$e.d.d) + 1), u],
                ".", [*(((quint8 *)$e.d.d) + 0), u])
            ) #elif ((*(((quint32 *)$e.d.d) + 1)) + (*(((quint32 *)$e.d.d) + 2)) + (*(((quint32 *)$e.d.d) + 3)) + (*(((quint32 *)$e.d.d) + 4)) != 0) (
                #("IPv6=",
                [(quint16)((*(((quint8 *)$e.d.d) + 0x04) << 0x8) | (*(((quint8 *)$e.d.d) + 0x05))), x],
                ".",
                [(quint16)((*(((quint8 *)$e.d.d) + 0x06) << 0x8) | (*(((quint8 *)$e.d.d) + 0x07))), x],
                ".",
                [(quint16)((*(((quint8 *)$e.d.d) + 0x08) << 0x8) | (*(((quint8 *)$e.d.d) + 0x09))), x],
                ".",
                [(quint16)((*(((quint8 *)$e.d.d) + 0x0A) << 0x8) | (*(((quint8 *)$e.d.d) + 0x0B))), x],
                ".",
                [(quint16)((*(((quint8 *)$e.d.d) + 0x0C) << 0x8) | (*(((quint8 *)$e.d.d) + 0x0D))), x],
                ".",
                [(quint16)((*(((quint8 *)$e.d.d) + 0x0E) << 0x8) | (*(((quint8 *)$e.d.d) + 0x0F))), x],
                ".",
                [(quint16)((*(((quint8 *)$e.d.d) + 0x10) << 0x8) | (*(((quint8 *)$e.d.d) + 0x11))), x],
                ".",
                [(quint16)((*(((quint8 *)$e.d.d) + 0x12) << 0x8) | (*(((quint8 *)$e.d.d) + 0x13))), x])
            )
        )
    )
    children
    (
        #(
            [d]: [$c.d.d, x]
        )
    )
}
;QT_DEBUG_END 
```

# eclipse - 开发 eclipse builder 插件

> ID：12336828
> 
> 赞同：1
> 
> 时间：2012-09-09T05:43:47.340
> 
> 标签：eclipse, plugins, eclipse-plugin, builder

我想开发一个 Eclipse 插件，它会在每次构建之前检查 XML 文件是否包含一些参数，如果没有，则会生成警告。

我打开了一个 eclise 插件项目“增量项目构建器”，其中有一个名为“示例构建器”的示例我尝试运行它并查看它如何生成警告，但我什至看不到如何调试它。（当我调试它时，它确实进入了构建器的任何功能”

你有一个想法，或任何其他样本如何做这样的建设者？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T14:09:03.547

要调试构建器插件，您需要“Debug -> Debug Configure As...”并从该调试配置对话框中选择“Eclipse Application”，单击 New Launch Configuration 按钮，最后单击 Debug 按钮。这将打开一个测试 Eclipse 工作区，它不仅运行您已安装的插件，还运行您在原始开发工作区中开发的任何插件（如您的示例构建器插件）。

接下来，您必须在测试工作区中创建一个项目来保存您想要验证的 XML 文件等文件。在该项目的 .project 文件中，您需要添加您创建的构建器的定义。查看构建器插件示例（在原始开发工作区中）中的 .project 文件，了解如何定义 Java 构建器的示例。

一旦您的构建器被定义为您的项目的构建器（在测试工作区中）并且该项目包含您要验证的 XML，那么只要该项目中的任何文件被修改，您的构建器就会被调用。

您可以在开发工作区的代码中设置断点，以便您可以停止在测试工作区中执行构建器。

# asp.net - ASP.Net 中 DataList 中的服务器端代码

> ID：12336835
> 
> 赞同：0
> 
> 时间：2012-09-09T05:45:08.370
> 
> 标签：asp.net, datalist

我正在尝试调用服务器端方法来检查 DataList 中的某些验证。但是此代码在此语句中出现错误- Eval("UserId")

```
<%
    SN.BLL.Model.User Obj = new SN.BLL.Model.User();
    Obj=(SN.BLL.Model.User)Session["user"];
    if (!SN.BLL.Service.UserService.IsFriend(Convert.ToInt64(Eval("UserId").ToString()), Obj.UserId))
    { 
%>
        <asp:Button ID="AddFriend" runat="server" Text="Add Friend" CommandName="add" CommandArgument='<%# Eval("UserId") %>' />
<%  
    } 
%> 
```

# jquery - Backbone.js 遍历 tpl 中的对象值

> ID：12336838
> 
> 赞同：0
> 
> 时间：2012-09-09T05:46:34.500
> 
> 标签：jquery, backbone.js, backbone-views

我正在使用backbone.js，并且很好奇是否可以遍历tpl 中的通用对象键/值。例子：

从服务器接收到的模型数据：

```
{
   id: "someid",
   data: {
      key1: "some value",
      key2: "some value"
   }
} 
```

我正在使用的 tpl 看起来像这样：

```
<script type="text/template" id="tpl-object-list-item">
   <%%= id %> - <%%= data %>
</script> 
```

输出如下内容：

```
someid - [object Object] 
```

我知道可以使用像 <%%= data.key1 %> 这样的东西，但我想知道是否可以在不明确调用数据的情况下遍历数据中的键/值对。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T05:50:15.347

是的，可以通过添加代码块来进行迭代：

```
<% for (var key in data) { %>
    <%= data[key] %> 
<% } %> 
```

# android - Android 网络在模拟器中不起作用

> ID：12336842
> 
> 赞同：1
> 
> 时间：2012-09-09T05:47:25.467
> 
> 标签：android, networking

我正在开发一个基本的客户端-服务器应用程序，以在 android 应用程序（客户端）和 pc 上的 java 服务器之间发送消息。当我使用模拟器时，消息可以正常发送和接收，但当我尝试在手机上使用该应用程序时无法正常工作。我使用 connectify 将手机连接到笔记本电脑托管的 wifi 网络。我想知道是什么阻止了我的手机连接......这是代码：

服务器

```
public class ServerMain {
public static void main(String argv[]) throws Exception
  {
     String clientSentence;
     String capitalizedSentence;
     int sock = 1234; 
     ServerSocket welcomeSocket = new ServerSocket(sock);

     while(true)
     {
        Socket connectionSocket = welcomeSocket.accept();
        BufferedReader inFromClient =
           new BufferedReader(new            InputStreamReader(connectionSocket.getInputStream()));
        clientSentence = inFromClient.readLine();
        System.out.println("Received: " + clientSentence);
        if(clientSentence.equalsIgnoreCase("QUIT"))
            break;
     }
     welcomeSocket.close();

  }
} 
```

客户

```
public class Message extends Activity {
EditText et;
String msg1 = "";
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    et = (EditText)findViewById(R.id.etTest);
}
            // TODO Auto-generated method stub
class GetMessages extends AsyncTask<Void, Void, Void> {
    protected Void doInBackground(Void... params) {
       final String msg = et.getText().toString();
         try{
            Socket clientSocket = new Socket("*myip*", 1234);
            DataOutputStream outToServer = new DataOutputStream(clientSocket.getOutputStream());
            String sentence = msg;
            outToServer.writeBytes(sentence + '\n');

        } catch (Exception e) {
           e.printStackTrace();
        }
         return null;
    }

}    
  public void readWebpage(View view) { //The button on click calls this function (from xml)
   new GetMessages().execute();
   }
} 
```

# oop - 业务逻辑加数据，还是将两者分开？

> ID：12336844
> 
> 赞同：4
> 
> 时间：2012-09-09T05:48:04.653
> 
> 标签：oop, poco, business-logic

我的理解是，OO 设计的基本原则是应该专注于将类建模为代码和数据的联合。然而，在日常开发中，我倾向于将我所有的业务逻辑分成它们自己的类。“数据”最终位于严格控制的 POCO/DTO 中，基本上没有真正的代码或逻辑。然后我实例化一个业务逻辑类，并在我希望操作发生时将 POCO 传递给每个方法。

但这感觉像是两种不同的方法。事实上，后一种方法似乎与 OO 的目的不一致！

我想我一直将这两件事分开，因为业务逻辑可能在多个 POCO 上运行。另外，*不*强制验证 POCO 中的数据使单元测试更容易，因为准备 POCO 进行测试似乎更简单（无需担心内部类状态、封装等）。现在我回顾这些原因，它们似乎很弱。

我正在寻找两种方法的比较/对比。具体来说，为什么现在看起来制作“愚蠢”的 POCO 是一种方式？为什么不把数据和业务逻辑放在一个类中呢？我们是否正在放弃面向对象设计的最初目标？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T07:57:06.007

事实上，将业务逻辑与相关数据分离是违反 OOP 原则的，这就是 Martin Fowler 所说的[贫血领域模型](http://www.martinfowler.com/bliki/AnemicDomainModel.html)。就个人而言，我总是会选择一个合适的域模型，将数据和行为放在一起。

> 具体来说，为什么现在看起来制作“愚蠢”的 POCO 是一种方式？

我不知道你为什么这么认为，但这肯定不是真的。那里有许多“愚蠢”的模型，但也有许多精心设计的领域模型。

# arm - arm-eabi-gcc 和 arm-elf-gcc 有什么区别？

> ID：12336845
> 
> 赞同：9
> 
> 时间：2012-09-09T05:48:14.263
> 
> 标签：arm

arm-eabi-gcc 和 arm-elf-gcc 有什么区别？他们可以为 cortex-m3 arch 编译相同的源代码吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-09T06:42:27.517

`arm-elf-gcc`是支持传统浮点加速器 (FPA) 和混合端浮点格式的旧工具链。

`arm-eabi-gcc`是新一代支持 VFP 浮点格式的工具链。

我想他们可以*编译*相同的源，但后一个是更新的，所以必须更丰富的功能。您想听什么取决于您正在编译的操作系统/库。工具链、基础库和操作系统齐头并进。他们需要有相同的 ABI。

# c# - 我可以在不导航到 WebBrowser 控件中的新页面的情况下发布吗？

> ID：12336847
> 
> 赞同：0
> 
> 时间：2012-09-09T05:48:34.670
> 
> 标签：c#, post, webbrowser-control

如果我们使用

```
this.webBrowser1.Navigate("Website", "_self", "Data", "Content-Type: application/x-www-form-urlencoded"); 
```

数据将在`webBrowser1`导航到网站时发布。问题就在那里，我可以`webBrowser1`在网站加载完成时发布数据并且不要让`webBrowser1`网站再次导航吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T05:50:51.423

您可以通过 JavaScript 使用 jQuery 的 $.post(..) 之类的方法来执行此操作，以避免使用目标结果重新加载页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T11:37:13.107

如果您想发布数据，请使用“axwebbrowser”

# django - django 通过其他对象的 ManyToManyField 过滤

> ID：12336852
> 
> 赞同：1
> 
> 时间：2012-09-09T05:49:52.173
> 
> 标签：django, manytomanyfield

在我的模型中有两个类：

```
class PageCategory(models.Model):
    name = models.CharField(max_length=256)
    slug = models.CharField(max_length=256, default='')

class Page(models.Model):
    title = models.CharField(max_length=256)
    slug = models.CharField(max_length=256)
    categories = models.ManyToManyField(PageCategory, related_name='page_categories', null=True, blank=True) 
```

我正在尝试检索（a）要查看的一个页面，以及（b）属于该页面所属的相同类别的所有其他页面，以便也列出它们。

这就是我正在做的（这是错误的）：

```
def pageView(request, page_slug):
    page = get_object_or_404(Page, slug=unicode(page_slug))
    pages = Page.objects.filter(displayable=True, categories__in=page.categories).exclude(pk=page.id).order_by('-timestamp') 
```

我总是得到一个`'ManyRelatedManager' object is not iterable`

应该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T07:08:12.873

`page.categories`是一个`ManyRelatedManager`而不是一个列表`categories`（这是`__in`检查所必需的）。所以需要指定`page.categories.all()`过滤`__in`。

您的查询更改为：

```
pages = Page.objects.filter(displayable=True, 
        categories__in=page.categories.all()).
        exclude(pk=page.id).order_by('-timestamp') 
```

# php - 正确连接 3 个表

> ID：12336853
> 
> 赞同：2
> 
> 时间：2012-09-09T05:50:11.550
> 
> 标签：php, mysql

试图自己修复现有代码的错误，而不是我自己。使用此代码的错误是，除非相应的 id 在第二个表中有项目，否则它根本不会显示在输出中。在第一个表（邮件）中，我有多个条目，他们得到在输出中过滤掉确实显示了正确的邮件总数......除非邮件在第二个表中有项目，否则不会输出它。我尝试了另一个使用差异连接的查询

```
SELECT 
    id, 
    messageType, 
    sender, 
    mail.receiver, 
    subject, 
    body, 
    has_items, 
    money, 
    cod, 
    checked 
FROM 
    mail 
        LEFT OUTER JOIN mail_items 
            ON id = mail_id 
        LEFT JOIN item_instance 
            ON item_guid = guid 
```

问题是......我收到错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在“LIMIT 1”附近使用的正确语法

我该怎么做才能使邮件表和 mail_items 表在正确地从第三个表中获取项目 guid 时加入，并输出邮件表条目，即使在 mail_items 表中没有该邮件的项目。

```
//==========================$_GET and SECURE=================================
$start = (isset($_GET['start'])) ? $sqlc->quote_smart($_GET['start']) : 0;
if (is_numeric($start)); 
else 
    $start = 0;

$order_by = (isset($_GET['order_by'])) ? $sqlc->quote_smart($_GET['order_by']) : 'id';
if (preg_match('/^[_[:lower:]]{1,12}$/', $order_by)); 
else 
    $order_by = 'id';

$dir = (isset($_GET['dir'])) ? $sqlc->quote_smart($_GET['dir']) : 1;
if (preg_match('/^[01]{1}$/', $dir)); 
else 
    $dir = 1;

$order_dir = ($dir) ? 'ASC' : 'DESC';
$dir = ($dir) ? 0 : 1;
//==========================$_GET and SECURE end=============================

$query = $sql->query("SELECT a.id, a.messageType, a.sender, a.receiver, a.subject, a.body, a.has_items, a.money, a.cod, a.checked, b.item_guid, c.itemEntry
                      FROM mail a INNER JOIN mail_items b ON a.id = b.mail_id LEFT JOIN item_instance c ON b.item_guid = c.guid ORDER BY $order_by $order_dir LIMIT $start, $itemperpage");
$total_found = $sql->num_rows($query);
$this_page = $sql->num_rows($query);
$query_1 = $sql->query("SELECT count(*) FROM `mail`");
$all_record = $sql->result($query_1,0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T06:11:16.647

试试这种类型， **选择 * from table1 as T1 join table2 as T2 on T.id=T2.id join table3 as T3 on T2.id=T3.id**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T05:59:28.987

尝试这样的事情：

```
SELECT 
/*
    The columns that you want to select
*/
FROM 
    mail a
LEFT OUTER JOIN mail_items b ON a.id = b.mail_id 
LEFT JOIN item_instance c ON b.item_guid = c.guid 
```

请注意，当您尝试选择列时，请确保将正确的表别名附加到列名。这里的表`mail`,`mail_items`和,`item_instance`分别作为它们的别名。`a``b``c`

如果您使用上述查询为表保留相同的别名，则需要对代码执行以下修改：

```
$order_by = (isset($_GET['order_by'])) ? $sqlc->quote_smart($_GET['order_by']) : 'id';
if (preg_match('/^[_[:lower:]]{1,12}$/', $order_by)); 
else 
    $order_by = 'a.id'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T06:02:09.437

我不是 SQL 专家，但我认为

```
FROM mail a INNER JOIN mail_items b 
```

需要`AS`别名分配的关键字：

```
FROM mail AS a INNER JOIN mail_items AS b 
```

# xcode - Xcode 4.4 和 iOS 5 的 RestKit 安装错误

> ID：12336857
> 
> 赞同：0
> 
> 时间：2012-09-09T05:50:37.983
> 
> 标签：xcode, restkit

我在项目中包含 RestKit 时遇到了一些问题。这是我之前在 Lion 中做过几次并且没有任何问题的事情。

我现在正在使用 Xcode 4.4 和 iOS Deployment Target iOS 5 在 Mountain Lion 上尝试它的 iOS 应用程序。

1.  在尝试从 github 导入 RestKit 时，意外地在导入完成后，在目标位置创建了一个名为 RestKit 的文件夹，其中没有文件！

2.  所以我然后从站点下载了RestKit并将文件夹拖放到一个新项目中，并按照链接等所需的所有步骤进行操作。

但是，在导入 RestKit.h 时，它说“找不到文件”，并且构建还显示了几个“格式字符串”和语义（已弃用）问题。

任何人都可以就这个错误提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T06:35:27.373

似乎是目前在主分支中被破坏的东西。使用开发分支而不是主分支，这些问题没有发生。

(git submodule add -b development git://github.com/RestKit/RestKit.git)

# android - 无法从 Eclipse 签署 .apk 文件

> ID：12336858
> 
> 赞同：0
> 
> 时间：2012-09-09T05:50:39.467
> 
> 标签：android

我正在尝试在市场上上传我的应用程序。为此，我尝试生成签名的 .apk 文件。我已经按照以下步骤操作：项目>android工具>导出签名的应用程序包出现一个窗口我通过提供位置和密码在新文件夹中创建了新的密钥库。密钥库已成功保存，然后我继续前进，提供别名详细信息，然后提供指向 .apk 文件存在密钥库的同一文件夹的路径。但我得到的错误是：

```
[2012-09-09 10:34:03 - Dex Loader] Unable to execute dex: Multiple dex files define   Lorg/project/R$attr; 
```

在我的项目工作区的 bin 文件夹中，我找到了 classes.dex 文件。我删除了该文件，然后再次重复相同的过程，但错误是相同的。当我删除 R 文件并通过清理项目重新生成它时。classes.dex 再次创建。如何摆脱此类错误并签署.apk？

请帮助我。我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T06:32:58.143

```
select project,click left.
select export
Select Project Name,click next
Create new key keystore
in Location,select location & file name name.apk
Give password & confirm Password
Fill alias,retype password,confirm password,validity at least 25
in below fields,fill atleast 1;
click next,
select location for apk& name of apk with .apk

This apk is signed & zipalin.

Read Link 
**http://developer.android.com/tools/publishing/app-signing.html**
Heading
**Compile and sign with Eclipse ADT** 
```

# android - 是否可以为 Android 编程 GPU

> ID：12336862
> 
> 赞同：14
> 
> 时间：2012-09-09T05:52:03.230
> 
> 标签：android, gpu, renderscript

我现在在 Android 上编程，我想知道我们现在是否可以在 Android 上使用 GPGPU？我曾经听说 Renderscript 将来可能会在 GPGPU 上执行。但我想知道我们现在是否可以在 GPGPU 上编程？如果我可以在 Android GPGPU 上编程，我在哪里可以找到一些教程或示例程序？感谢您的帮助和建议。

到目前为止，我知道 OpenGL ES 库现在使用 GPU 进行加速，但我想使用 GPU 进行计算。我想做的是加速计算，所以我希望使用一些API库，比如OpenCL。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-09T06:39:37.777

**2021-4 月更新**

Google 已宣布[弃用 RenderScript API，转而支持](https://android-developers.googleblog.com/2021/04/android-gpu-compute-going-forward.html)Android 12 中的 Vulkan。

[Android 7.0 兼容性定义文档 - 3.3.1.1](https://source.android.com/compatibility/7.0/android-7.0-cdd)中提供了制造商包含 Vulkan API 的选项。[图形库](https://source.android.com/compatibility/7.0/android-7.0-cdd)。

**原始答案**

其实Renderscript Compute此时并不使用GPU，而是为它设计的

来自在 Android 平台上工作的 Romain Guy：

*   Renderscript Compute 目前受 CPU 限制，但使用 for_each 构造，它将立即利用多个内核
*   Renderscript Compute 设计为在 GPU 和/或 CPU 上运行
*   Renderscript Compute 避免了编写 JNI 代码并为您提供独立于架构的高性能结果
*   从 Android 4.1 开始，Renderscript Compute 可以受益于 SIMD 优化（ARM 上的 NEON）

[https://groups.google.com/d/msg/android-developers/m194NFf_ZqA/Whq4qWisv5MJ](https://groups.google.com/d/msg/android-developers/m194NFf_ZqA/Whq4qWisv5MJ)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T05:56:40.893

是的，有可能 。

您可以使用 renderscript 或 opengGL ES 2.0 。

renderscript 在 android 3.0 及更高版本上可用，openGL ES 2.0 在大约 95% 的设备上可用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-05T09:27:59.447

从 Android 4.2 开始，Renderscript 可以在计算中涉及 GPU（在某些情况下）。更多信息在这里：[http ://android-developers.blogspot.com/2013/01/evolution-of-renderscript-performance.html](http://android-developers.blogspot.com/2013/01/evolution-of-renderscript-performance.html)

据我了解，`ScriptIntrinsic`子类经过优化，可以在兼容硬件上的 GPU 上运行（例如，带有 Mali T604 的 Nexus10）。文档：http: [//developer.android.com/reference/android/renderscript/ScriptIntrinsic.html](http://developer.android.com/reference/android/renderscript/ScriptIntrinsic.html)

当然，您可以决定使用 OpenCL，但 Renderscript 保证（由 Google，作为 Android 本身的一部分）即使在不支持 GPGPU 计算的硬件上也能运行，并且将使用硬件支持的任何其他可用加速手段。继续运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-11T13:00:59.247

有多种选择： 您可以使用几乎所有设备都支持的 OpenGL ES 2.0，但 GPGPU 的功能有限。您可以使用 OpenGL ES 3.0，使用它可以在 GPU 处理方面做更多的事情。或者您可以使用 RenderScript，但这是特定于平台的，而且不会对您的算法是在 GPU 上运行还是在 CPU 上运行产生任何影响。关于这个主题的总结可以在这篇硕士论文中找到：[Parallel Computing for Digital Signal Processing on Mobile Device GPUs](http://www.mkonrad.net/projects/mastersthesis_mobile_gpgpu.html)。

您还应该查看[ogles_gpgpu](https://github.com/internaut/ogles_gpgpu)，它允许在 Android 和 iOS 上通过 OpenGL ES 2.0 进行 GPGPU。

# configuration - 使用配置文件部分覆盖/合并标准编程配置

> ID：12336866
> 
> 赞同：3
> 
> 时间：2012-09-09T05:53:24.040
> 
> 标签：configuration, nlog

我们有一套标准的约定，我们遵循各种应用程序的日志记录，并且将此配置打包为按代码配置并包含在一个通用程序集中是明智的。

但是，有时我们需要覆盖此配置以更有效地调试生产问题。这可以通过让开发人员或管理员添加一个 NLog 配置部分来更轻松地完成，该部分可以读入并覆盖或添加到以编程方式完成的配置。

这可以用 NLog 开箱即用地完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:50:33.253

我知道这不是*代码*（我不知道该怎么做），但是您可以使用`<include>`XML 配置来覆盖变量之类的东西。这是一个使用`Web.config`覆盖`NLog.config`其他项目的“标准”的示例：

网络配置：

```
<configuration>
  <configSections>
    <section name="nlog" type="NLog.Config.ConfigSectionHandler, NLog" />
  </configSections>

  <nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <include file="${basedir}\bin\NLog.config" />
    <variable name="fruit" value="Apples" />
  </nlog>
</configuration> 
```

NLog.config（被复制到`bin`）：

```
<?xml version="1.0"?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <targets>
    <!-- Output Window -->
    <target name="debug" xsi:type="Debugger" layout="${fruit}|${level:uppercase=true}|${logger}|${message}"></target>
  </targets>
  <rules>
    <logger name="*" writeTo="debug" />
  </rules>
</nlog> 
```

# c# - System.Web.UI.WebControls.Style 呈现过时的 HTML5

> ID：12336867
> 
> 赞同：1
> 
> 时间：2012-09-09T05:53:53.853
> 
> 标签：c#, asp.net, html

我正在使用 w3.org HTML 验证器来测试[http://nflpowerrank.com](http://nflpowerrank.com)的 HTML5 ，我收到以下验证错误：

*表格元素上的 cellspacing 属性已过时。改用 CSS。*

似乎由 system.web.ui.webcontrol.style 类呈现的 cellspacing="0" 正在呈现过时版本的 cellspacing="0" 而不是 .css。

我在微软网站上发现了另一个相关的错误：[http ://connect.microsoft.com/VisualStudio/feedback/details/747004/system-web-ui-webcontrols-style-renders-obsolete-html5](http://connect.microsoft.com/VisualStudio/feedback/details/747004/system-web-ui-webcontrols-style-renders-obsolete-html5)

有谁知道微软是否解决了这个问题？有没有办法不渲染单元格间距标签？或者我应该使用不同样式的网格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T06:20:32.830

您可以随时使用控制适配器来呈现您喜欢的输出。

Microsoft 已经为此目的提出了[控制适配器。](http://msdn.microsoft.com/en-us/magazine/cc163543.aspx)

> 该工具包没有为特定设备创建控件的替代呈现，而是定义了许多控件适配器，它们更改了几个控件（如 Menu、TreeView 和 FormView）的默认基于表格的呈现，以完全避开表格并使用 、 和 元素进行呈现与 CSS 样式表中定义的相关样式（当今网站设计的常见要求）。

[CSS 友好控制适配器](http://www.asp.net/cssadapters/)的实现已经可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T15:04:41.840

我找到了一种更简单的方法，我可以在设计模式下的 gridview 中简单地将 cellspacing 属性设置为 cellspacing="-1" 。这绕过了错误，我的页面被验证为 HTML5

# codeigniter - Codeigniter 下拉菜单默认为最后一项？

> ID：12336872
> 
> 赞同：0
> 
> 时间：2012-09-09T05:56:13.530
> 
> 标签：codeigniter, drop-down-menu

我创建了一组数字来订购画廊。我想知道是否有办法让下拉菜单默认为最后一项而不是第一项？因此，当页面加载时，示例代码将选择第 6 个元素（值 5）作为默认值。

```
<php? // Codeigniter that generates the select dropdown.
form_dropdown('order', $order);
?>

<select name="order">
    <option value="0">1</option>
    <option value="1">2</option>
    <option value="2">3</option>
    <option value="3">4</option>
    <option value="4">5</option>
    <option value="5">6</option>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T05:56:56.190

通过您的更新，我假设您想使用该`CodeIgniter` `form_dropdown()`功能实现以下结果？

```
<option value="5" selected="selected">6</option> 
```

您需要做的是向函数添加一些参数，如下所示：

```
echo form_dropdown('order', '', '5'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T06:09:10.597

试试这个，

```
form_dropdown('order', $order, 5); 
```

在 CI 的用户指南中检查[form_dropdown](http://codeigniter.com/user_guide/helpers/form_helper.html)

如果要动态获取最后一个元素，请使用[end()](http://www.php.net/manual/en/function.end.php)和[key()](http://php.net/manual/en/function.key.php)函数来获取数组最后一个元素的键。所以这里是代码。

```
form_dropdown('order', $order, key(end($order))); 
```

# java - 为什么以 char 作为索引的循环会无限循环？

> ID：12336879
> 
> 赞同：3
> 
> 时间：2012-09-09T05:56:50.580
> 
> 标签：java, loops, char

这个循环将无限期地继续：

```
char a = 100;
for(a=100; a>=0;--a)
    System.out.println(a); 
```

是否会发生这种情况，因为 a 被提升为算术运算的 int 值并从 16 位 char 值扩大到 32 位，因此将始终保持正数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-09T06:01:58.100

它确实会无限循环——你所说的原因很接近。发生这种情况是因为`a`不能表示任何不满足的数字*-*是`a >= 0`无`char`符号的。算术下溢在 Java 中定义明确且未指明。请参阅规范的以下相关部分。

*   [§4.2.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2.2)

    > 整数运算符不以任何方式指示上溢或下溢。

    这意味着除了比较值之外没有溢出/下溢的迹象......例如，如果`a`<= `--a`，那么这意味着发生了下溢。

*   [§15.15.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.15.2)

    > 在减法之前，对值 1 和变量的值执行二进制数字提升（第 5.6.2 节）。如有必要，通过缩小原始转换（第 5.1.3 节）和/或在存储变量之前对其类型进行装箱转换（第 5.1.7 节）来缩小差异。前缀递减表达式的值是存储新值*后变量的值。*

    因此，我们可以看到这里有两个主要步骤：二进制数字提升，然后是缩小原始转换。

*   [§5.6.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.6.2)

    > 加宽原语转换（第 5.1.2 节）适用于转换以下规则指定的一个或两个操作数：
    > 
    > *   如果任一操作数的类型为`double`，则将另一个转换为`double`。
    > *   否则，如果任一操作数的类型为`float`，则将另一个转换为`float`。
    > *   否则，如果任一操作数的类型为`long`，则将另一个转换为`long`。
    > *   否则，两个操作数都转换为 type `int`。

    我们可以看到递减表达式与`a`视为一起工作`int`，因此执行了扩大转换。这允许它表示值*-1*。

*   [§5.1.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.3)

    > 缩小原语转换可能会丢失有关数值整体大小的信息，也可能会丢失精度和范围。
    > 
    > ...
    > 
    > 有符号整数到整数类型 T 的窄化转换只会丢弃除*n 个*最低位之外的所有位，其中*n*是用于表示类型 T 的位数。此外，可能会丢失有关数值大小的信息，这可能会导致结果值的符号与输入值的符号不同。

    仅保留*n 个*最低位意味着仅保留`int`表达式的最低 16 位`a - 1`。由于*-1*这里是*0b11111111 11111111 11111111 11111111*，所以只保存低位的*0b11111111 11111111*。由于`char`是无符号的，*所有*这些位都对结果有贡献，给出*65535*。

注意到这里的东西了吗？本质上，这一切都意味着 Java 整数运算是*模块化*的；在这种情况下，模数是*2^16*或*65536*，因为`char`它是 16 位数据类型。*-1 (mod 65536) ≡ 65535*，所以减量会回绕。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-09T06:01:35.660

没有。`char`值是无符号的 - 当它们低于 0 时，它们会回到 65535 左右。

交换- 然后它会工作`char`。`byte`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T06:25:44.150

正如其他人所说，`char`Java 中的类型是无符号的，所以`a >= 0`总是如此。当`a`达到 0 然后再次递减时，它变为 65535。如果你只是想反常，你可以这样编写循环以在 101 次迭代后终止：

```
char a = 100;
for(a=100; a<=100;--a)
    System.out.println(a); 
```

然后，代码审查员可能会因为写出如此可怕的东西而让你心碎。:)

# c - C程序在不包含头文件的情况下运行？

> ID：12336889
> 
> 赞同：0
> 
> 时间：2012-09-09T05:59:45.510
> 
> 标签：c, turbo-c

> **可能重复：**
> [没有头文件的 C 程序](https://stackoverflow.com/questions/8930641/c-program-without-header)

我已经学习 C 很长时间了。但困扰我的一件事是，今天我做了一个 C 程序，忘记包含我将文件保存为 kc.c 的 stdio.h 和 conio.h 头文件？当我编译并运行这个 .c 文件时，输出与我预期的一样。

但是如果不使用标准头文件，C 程序如何运行呢？

或者我不知道我错过的概念？

**编辑：**程序

```
int main()
{
  int i=12,j=34;
  int *pa=&i,*pb=&j;
  printf("the value of i and j is %d %d respectively ",*pa,*pb);
  getch();
  return 0;
} 
```

因为我在这里使用了 STDIO.H 头文件的 printf() 函数，但是不包括它如何编译并成功运行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T06:12:27.253

允许编译器使事情工作，但没有义务这样做。

您应该在使用它们之前声明所有变量参数列表函数；未`printf()`正确声明会导致未定义的行为（一种有效的未定义行为是按预期工作）。

如果您在 C99 模式下编译，您应该会收到有关未声明函数的警告（但 Turbo C 可能没有 C99 模式）。

* * *

挑剔：

> [H]不使用标准头文件如何运行C程序？

所有程序都在不使用任何标题的情况下*运行。*但是，大多数程序是使用标准头文件*编译*的以声明标准函数，并且更好的程序确保所有函数在使用之前都被声明（或者在使用之前被定义为静态函数）。

C99 需要这个，尽管许多编译器允许编译错误的程序。但是，编译应该产生诊断；诊断可能会也可能不会导致编译失败。在实践中，它通常不会导致编译失败，但它可以并且使用某些编译器（例如 GCC），您可以强制编译器（例如使用 GCC 的`-Werror=missing-prototypes -Werror=old-style-definition`选项）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T06:15:29.330

当应用的语言标准早于 ISO C99 时，C 不需要在引用之前声明或定义函数。

但是，当编译器遇到这样的函数调用时，它只是假设该函数返回一个 int 并且它采用不确定数量和类型的参数。这称为隐式声明。如果您稍后声明该函数，或使用不同数量的参数或不兼容的参数调用它，您可能会在某些编译器中收到警告，即第二次调用与第一次隐含的声明不匹配，但 ISO C89 标准将该函数视为可变参数 [like printf()] 允许任意数量和类型的参数。

此外，如果实际返回值不是 int，则任何接受和处理的返回值都可能没有多大意义。

It is bad form to rely on an implicit declaration, and most compilers would issue a warning. If your compiler did not, you need to increase the warning level; those diagnostics are there to help improve your code quality. If you simply ignored the warning (any warning for that matter), then you shouldn't!

In C++ the rules are tighter and failure to declare or define a function before referencing it is an error, since it is necessary to allow function overloading.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T06:13:49.953

头文件只不过是常量、预处理器宏和*函数原型*的列表。函数原型告诉 C 每个函数需要什么参数。

如果编译器看到正在使用的函数没有相应的原型或函数定义，它会生成一个形式为的*隐式声明*`int func()`。由于 C 函数仅通过名称而不是函数签名（与 C++ 一样）链接，因此链接器稍后会在标准库中定位函数定义。

# coronasdk - 在电晕中使用翻书中的精灵

> ID：12336890
> 
> 赞同：0
> 
> 时间：2012-09-09T05:59:57.707
> 
> 标签：coronasdk

```
local Flipbook = `enter code here`require 'flipbook'

local myFirstFlipbook = Flipbook:newFlipbook("background_back.png", "mainshadow.png", "newshadow.png", "curlshadow.png" )
myFirstFlipbook:addPage( "backgroundA.png" )
myFirstFlipbook:addPage( "backgroundB.png" )
myFirstFlipbook:addPage( "backgroundC.png" ) 
```

使用上面的代码实现了卷页效果

我想在其中一个页面中添加一个精灵，这样精灵也随着页面卷曲，我在实现它时遇到了很多问题

如果有人能指导我完成这个......将是一个很大的帮助。

# asp.net - HttpContext.Current.User.Identity.Name 丢失

> ID：12336895
> 
> 赞同：0
> 
> 时间：2012-09-09T06:00:54.683
> 
> 标签：asp.net, iis, login, forms-authentication

我在我的 Web 应用程序中使用 ASP.NET 表单身份验证。最近我发现了一个奇怪的行为。在生产环境中一切正常。使用 .net 4.0 和 IIS 7。在登录用户中输入用户名和密码并登录然后突然`HttpContext.Current.User.Identity.Name`丢失。这种情况并非每次都发生，仅在某些情况下。我无法重现该问题在我的开发环境中。我已经检查过`if(HttpContext.Current.User.Identity.IsAuthenticated)`它也是真的身份验证票用户数据也不为空。只有`HttpContext.Current.User.Identity.Name`是空的。请帮助

登录按钮中的代码

```
protected void LoginButton_Click(object sender, EventArgs e)
    {
        try
        {
            dtUserDetails = new DataTable();
            if (UserRepositoryBL.ValidateUser(txtUserName.Text.Trim(), Password.Text.Trim(), out dtUserDetails))
            {

                AuthUser au = new AuthUser();
                if (dtUserDetails.Rows.Count > 0)
                {
                    DataRow DR = dtUserDetails.Rows[0];
                    au.UserID = Convert.ToInt32(DR["UserID"].ToString());
                    au.UserNo = DR["UserNo"].ToString();
                    au.UserName = DR["UserName"].ToString();
                    au.Password = DR["Password"].ToString();
                }
                string userData = au.ToString();

                FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(

             2,                             // Version number

             txtUserName.Text.Trim(),      // Username

             DateTime.Now,                  // Issue date

             DateTime.Now.AddMinutes(60), // Expiration date

             false,                         // Persistent?

             userData                 // User data

         );

                string eticket = FormsAuthentication.Encrypt(ticket);

                if (Request.Cookies[txtUserName.Text] != null)
                {
                    //HttpCookie myCookie = new HttpCookie(txtUserName.Text);
                    //myCookie.Expires = DateTime.Now.AddDays(-1d);
                    Request.Cookies[txtUserName.Text].Expires = DateTime.Now.AddDays(-1d);
                    Request.Cookies.Remove(txtUserName.Text);
                }

                HttpCookie cookie = new HttpCookie("SiteCookie", eticket);
               // HttpCookie cookie = new HttpCookie("SiteCookie", eticket);
                cookie.Expires = DateTime.Now.AddMinutes(60);

                FormsAuthentication.SetAuthCookie(txtUserName.Text, false);
               // cookie.Path = FormsAuthentication.FormsCookiePath;
                FormsAuthentication.RenewTicketIfOld(ticket); 

                Response.Cookies.Add(cookie);

                BasePage.ActivityLog("User Login", txtUserName.Text.Trim(), true, Request.RawUrl);
                string url = FormsAuthentication.GetRedirectUrl(txtUserName.Text, false);

                Response.Redirect(url);

                //  FormsAuthentication.RedirectFromLoginPage(LoginUser.UserName, false);

            }
            else
            {
                FailureText.Text = "Your login attempt was not successful. Please try again.";
            }

        }
        catch (Exception ex)
        {
            throw ex;
        }
    } 
```

网络配置

```
<authentication mode="Forms">
            <forms loginUrl="~/Account/Login.aspx" timeout="60" cookieless="UseCookies" defaultUrl="~/Landing.aspx" protection="All"/>
        </authentication>

        <authorization>
            <deny users="?" />

        </authorization> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T16:43:32.530

您的会话时间限制为 60 分钟。问题只发生在会话过期的人身上吗？可能会解释为什么你不能在你的开发机器上重现这个，因为你根本不用等那么久？

# angularjs - 如何使用 ng-repeat 循环遍历函数返回的项目？

> ID：12336897
> 
> 赞同：115
> 
> 时间：2012-09-09T06:01:32.937
> 
> 标签：angularjs

我想重复创建 div，项目是函数返回的对象。但是下面的代码报告错误： 10 $digest() 达到了迭代。中止！jsfiddle 在这里：http: [//jsfiddle.net/BraveOstrich/awnqm/](http://jsfiddle.net/BraveOstrich/awnqm/)

```
<body ng-app>
  <div ng-repeat="entity in getEntities()">
    Hello {{entity.id}}!
  </div>
</body> 
```

* * *

## 回答 #1

> 赞同：198
> 
> 时间：2012-09-09T16:26:19.417

**简短回答**：您真的需要这样的功能还是可以使用属性？[http://jsfiddle.net/awnqm/1/](http://jsfiddle.net/awnqm/1/)

**长答案**

为简单起见，我将仅描述您的情况 - ngRepeat 用于对象数组。另外，我会省略一些细节。

AngularJS 使用[脏检查](https://stackoverflow.com/questions/9682092/databinding-in-angularjs/9693933#9693933)来检测变化。当应用程序启动时，它运行[`$digest`](http://docs.angularjs.org/api/ng.$rootScope.Scope#$digest). 将对[范围的层次结构](http://docs.angularjs.org/guide/scope)进行深度优先遍历。所有范围都有手表列表。每个手表都有最后一个值（最初）。对于所有手表的每个范围都运行它，获取当前值 ( ) 并将其与. 如果当前值不等于（始终用于第一次比较）设置为. 如果从 开始另一个深度优先遍历，则处理所有范围时。当脏 == false 或遍历次数 == 10 时结束。在后一种情况下，错误“达到 10 $digest() 迭代”。将被记录。[`$rootScope`](http://docs.angularjs.org/api/ng.$rootScope)`$digest``initWatchVal``$digest``watch.get(scope)``watch.last``watch.last``$digest``dirty``true``dirty == true` `$digest``$rootScope``$digest`

现在关于`ngRepeat`. 对于每个`watch.get`调用，它都会将集合中的对象（的返回值`getEntities`）与缓存中的附加信息（[`HashQueueMap`](https://github.com/angular/angular.js/blob/f2b7fffdc0b0ad80cebb24f5fea743e9e4a439d5/src/apis.js#L73)by `hashKey`）一起存储。对于每个`watch.get`调用`ngRepeat`都尝试通过其`hashKey`从缓存中获取对象。如果缓存中不存在，则将其`ngRepeat`存储在缓存中，创建新范围，将对象放在其上，创建 DOM 元素[等](https://github.com/angular/angular.js/blob/1d388676e3b97b6171fc498e82545bd437ee6fd1/src/ng/directive/ngRepeat.js#L148)。

现在关于[`hashKey`](https://github.com/angular/angular.js/blob/f2b7fffdc0b0ad80cebb24f5fea743e9e4a439d5/src/apis.js#L16). 通常`hashKey`是由 生成的唯一编号[`nextUid()`](https://github.com/angular/angular.js/blob/5c95b8cccc0d72f7ca3afb1162b9528c1222eb3c/src/Angular.js#L156)。但它可以是[函数](https://github.com/angular/angular.js/blob/f2b7fffdc0b0ad80cebb24f5fea743e9e4a439d5/src/apis.js#L21)。`hashKey`生成后存储在对象中以供将来使用。

**为什么您的示例会产生错误**：函数`getEntities()`总是返回带有新对象的数组。该对象没有`hashKey`也不存在于`ngRepeat`缓存中。因此`ngRepeat`，在每个`watch.get`使用新的 watch 为它生成新的范围时`{{entity.id}}`。这只表首先`watch.get`有`watch.last == initWatchVal`。所以`watch.get() != watch.last`。于是`$digest`开始了新的穿越。所以`ngRepeat`用新手表创造了新的范围。所以......经过 10 次遍历后，您会收到错误消息。

**你怎么能解决它**

1.  不要在每次`getEntities()`调用时创建新对象。
2.  如果您需要创建新对象，您可以`hashKey`为它们添加方法。有关示例，请参阅[本主题](https://groups.google.com/forum/#!topic/angular/IEIQok-YkpU)。

希望了解 AngularJS 内部原理的人如果我在某些方面错了，会纠正我。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2014-04-09T15:47:06.313

在重复之外初始化数组

```
<body ng-app>
   <div ng-init="entities = getEntities()">
       <div ng-repeat="entity in entities">
           Hello {{entity.id}}!
       </div>
   </div>
</body> 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-09-09T13:54:32.273

这是[在此处报告](https://github.com/angular/angular.js/issues/705)并得到以下回复：

> > 您的 getter 不是幂等的并且会更改模型（通过每次调用它时生成一个新数组）。这迫使 angular 继续调用它，希望模型最终能稳定下来，但它从来没有这样做，所以 angular 放弃并抛出异常。
> > 
> > getter 返回的值相等但不相同，这就是问题所在。

如果将数组移到主控制器之外，您可以看到此行为消失：

```
var array = [{id:'angularjs'}];
function Main($scope) {
    $scope.getEntities = function(){return array;};
}; 
```

因为现在它每次都返回相同的对象。您可能需要重新构建模型以使用范围上的属性而不是函数：

> > 我们通过将控制器方法的结果分配给一个属性来解决它，并对它执行 ng:repeat。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-01-06T21:10:31.397

基于@przno 评论

```
<body ng-app>
  <div ng-repeat="item in t = angular.equals(t, getEntities()) ? t : getEntities()">
    Hello {{item.id}}!
  </div>
</body> 
```

顺便说一句，@Artem Andreev 建议第二个解决方案在 Angular 1.1.4 及更高版本中不起作用，而第一个解决方案不能解决问题。所以，我担心现在这是一个不那么尖锐的解决方案，没有功能上的缺点

# javascript - 使用jquery从整数中减去

> ID：12336903
> 
> 赞同：-5
> 
> 时间：2012-09-09T06:02:31.587
> 
> 标签：javascript, jquery

> **可能重复：**
> [使用 jquery 从整数中减去](https://stackoverflow.com/questions/12354458/subtract-from-an-integer-using-jquery)

我想从 div 的偏移量中减去 50。我的代码是这样的。

```
if (scroll) {
    $('html, body').animate({"scrollTop":  $(scroll).offset().top - 50});
        $(scroll).css('color', 'blue');
        $(scroll).mouseleave(function() {
        $(this).css('color', 'black');
        });
    } 
```

但这行不通。有人能帮我吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T06:10:28.723

您可以使用`css`方法来更改`top`属性

```
$('div').css('top', $('div').offset().top - 50);​ 
```

[演示](http://jsfiddle.net/WYuTm/1/)。

**更新：**

```
$('div').animate({'top' : $('div').offset().top - 50}); 
```

还要确保`if (scroll)`评估为真。

[演示](http://jsfiddle.net/WYuTm/10/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T06:21:24.373

你可以使用`.css`方法

```
$('div').CSS('margin-top','-50'); 
```

# php - 如何在 Silex 中自动加载目录

> ID：12336907
> 
> 赞同：4
> 
> 时间：2012-09-09T06:02:55.047
> 
> 标签：php, silex

如果我在 /src/lib 中有一个类文件目录并且我希望它们自动加载，我如何使用最新版本的 Silex 执行此操作。

除了加载服务之外，我真的没有看到任何好的文档。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T11:41:46.350

silex 的自动加载由[composer](http://getcomposer.org/)处理。关于自动加载的[作曲家文档](http://getcomposer.org/doc/04-schema.md#autoload)详细介绍了可能的自动加载类型。

建议您`psr-0`为文件使用命名方案。但如果你不想这样做，你也可以使用类映射自动加载。

这是一个使用 PSR-0 的示例，假设该类`Foo\Bar`位于`src/Foo/Bar.php`：

```
{
    "autoload": {
        "psr-0": { "Foo": "src/" }
    }
} 
```

对于类映射，请参阅上面链接的文档。

# c - 我正在学习 C，但无法弄清楚为什么这给了我一个错误

> ID：12336909
> 
> 赞同：0
> 
> 时间：2012-09-09T06:03:28.817
> 
> 标签：c, function

所以我正在尝试编写一个函数，它接收一个浮点值，返回一个浮点值，并用 printf 显示在 main 中。我不断收到相同的错误：markup2.c:58：错误：“GetPrice”的类型冲突 markup2.c:46：错误：“GetPrice”的先前隐式声明在这里

我在哪里犯错？我已经尝试过对涉及 GetPrice 的所有内容进行类型转换，但仍然没有运气。有人可以解释我做错了什么吗？

```
 #include<stdio.h>

// define the constant MARKUP as float value 0.1
#define MARKUP 0.1

int main()
{
    // declare variables
    char proceed;
    float value;
    float markupValue;

    // display welcome message to user and inform them of markup rate
    printf("\nThank you for using Chad Hammond's markup calculator.\n");
    printf("The current markup rate is %.1f%c.\n",MARKUP*100,'%');

    // ask user if they want to perform a markup
    printf("Would you like to markup an item? y/n:\n");
    scanf("%c", &proceed);

    // if yes, proceed to next step
    if(proceed == 'y')
    {
        // prompt user for the price of item to be marked up
        printf("Please enter a wholesale value to markup: ");
        scanf("%f", &value);

        // display input back to user
        printf("The wholesale value you entered was: %c%.2f\n",'$', value);
        markupValue = (value*MARKUP);

        // display amount of increase
        printf("The dollar amount of this increase will be: %c%.2f\n",'$', markupValue);

        // display total price after increse
        printf("The price for this item after markup is: %c%.2f\n",'$', (float)GetPrice(value));
    }else
        // if user did not want to markup an item, belittle them with sarcasm
        printf("Well, if you didn't want to markup an item you should have just used a Ti-83 and left me alone!\n\n");
    // display exit message
    printf("Thank you for using HammondInstruments Markup Calculator, goodbye.\n");

    // return that program has completed
    return 0;
}

float GetPrice(float value)
{
    float output;
    value += value*MARKUP;
    output = value;
    return (float)output;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T06:07:24.137

您需要`GetPrice`在`main`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T06:09:06.307

C 期望在您使用它们之前看到它的函数（前向声明）。在声明它之前你已经使用`GetPrice`过`main`（函数定义在 after `main`）。

当你的`GetPrice`编译*器*看到`int GetPrice()`. 稍后，当它看到函数声明时，它发现真正的函数签名与隐式声明不同，并抛出错误。

因此，解决方案是定义`GetPrice`before`main`或使用before形式的前*向声明*。前向声明（就像您在各种头文件中实际发现的一样）告诉编译器该函数存在，但将其定义留给以后（甚至是另一个文件）。`float GetPrice(float);``main``#include`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T06:07:06.620

你不应该先声明`GetPrice`吗？然后`main`呢？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-09T06:07:55.790

您的主要问题是，由于您之前没有声明过，因此编译器会为您提供与您的不匹配`main`的默认声明，因此会发生冲突。`GetPrice`您应该在之前添加一个原型`main`，或者将整个函数移到那里：

```
float GetPrice(float);
//main
float GetPrice(float value){...} 
```

或者

```
float GetPrice(float value){...}
//main 
```

# jquery - Rails3 + 拖放 + 多文件上传

> ID：12336914
> 
> 赞同：1
> 
> 时间：2012-09-09T06:04:25.927
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, file-upload

我正在寻找在 Rails (3.2.8) 应用程序上使用拖放功能上传多个文件的最佳实践。我正在考虑使用以下库/宝石：

**宝石**

*   [载波](https://github.com/jnicklas/carrierwave)
*   [回形针](https://github.com/thoughtbot/paperclip)

**JavaScript**

*   [jQuery 文件上传](http://blueimp.github.com/jQuery-File-Upload/)
*   [上传](http://www.uploadify.com/demos/)
*   [上传](http://www.plupload.com/)
*   [jQuery 多文件上传插件 v1.48 (2012-07-19)](http://www.fyneworks.com/jquery/multiple-file-upload/)
*   [值/文件上传器](https://github.com/valums/file-uploader)

什么是最好/最简单的组合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T08:48:55.970

如果您想直接上传到 Amazon S3，您可以使用[s3_direct_upload gem](https://github.com/waynehoover/s3_direct_upload)，它使用 jQuery File Upload。实现起来非常简单。

# networking - 什么是“TCP 乱序”和“TCP 端口号重用”问题？

> ID：12336916
> 
> 赞同：3
> 
> 时间：2012-09-09T06:04:34.273
> 
> 标签：networking, network-protocols, wireshark

我正在从 IP_ADDR1 向 IP_ADDR2 发送 HTTP 请求。我观察到 HTTP 请求没有达到应用程序级别。当我获取wireshark 日志时，我注意到TCP 级别的一些问题。这些是什么问题？什么时候发生？如何摆脱这个？在此处附加 Wireshark 快照。

![  ](../Images/e4ff465ff12e98969c3d8f3eb4b4b7a0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T06:42:28.233

'TCP post number used' 意味着它看到一个成功的连接握手，然后客户端发送另一个具有相同端口号的 SYN 数据包。如果客户端尚未确认 SYN-ACK，这将被报告为重传。但是由于它确实确认了 SYN-ACK，它不应该需要重新传输 SYN。这可能意味着您的网络上的某些东西正在复制数据包。

“TCP 乱序”意味着数据包没有按照它们的序列号指示的顺序被接收。这可能是导致重用端口号错误的重复数据包的副作用 - 这可能会将序列号重置回连接的开头。因为否则看起来数据包是有序的；HTTP 命令应该是连接握手之后的下一件事。

# javascript - 避免在 ASP.NET 中有 onClick 和 onClientClick 事件的按钮单击时重新加载页面

> ID：12336917
> 
> 赞同：0
> 
> 时间：2012-09-09T06:05:09.227
> 
> 标签：javascript, asp.net, google-maps-api-3, code-behind, page-refresh

我有一个 Asp 服务器控制按钮，`onClick`用于处理后面代码中的代码和`onClientClick`处理 javascript 代码。代码是：

**更新：**根据 Icarus 解决方案，更新代码：

按钮来源：

```
<asp:Button ID="Button1" runat="server" onclick="Button1_Click" 
        style="z-index: 1; left: 648px; top: 202px; position: absolute" 
        Text="Show route" OnClientClick="droute(); return false" />

<asp:HiddenField ID="hdncroute" runat="server" /> 
```

后面的代码：

```
protected void Button1_Click(object sender, EventArgs e)
{
    using (con = new MySqlConnection("server=localhost; uid=root;password=as64ws;database=Gmaps"))
    da = new MySqlDataAdapter("select * from routes where uid='" + Session["uname"].ToString() + "'", con);
    da.Fill(ds, "mroute");
    foreach (DataRow r in ds.Tables[0].Rows)
    {
        uroute.Add(r["latlng"].ToString());
    }
    croute = new string[uroute.Count];
    croute = uroute.ToArray();
    hdncroute.Value = string.Join("&", croute);
} 
```

Javascript函数：

```
function droute()
{
    var route=[];
    var temp;
    temp = eval(document.getElementById('<%= hdncroute.ClientID %>').value);
    route= temp.split('&');
    //Polyline icon n line settings
    var iconsetngs= {path:google.maps.SymbolPath.FORWARD_CLOSED_ARROW, fillColor:'#FF0000'};
    var polylineoptns= {strokeColor:'#3333FF',strokeOpacity:0.8,strokeWeight:3,map:map,icons:[{icon:iconsetngs,offset:'100%'}]};
    polyline= new google.maps.Polyline(polylineoptns);

    //Loop to add locations and draw line
    var path= polyline.getPath();
    for(var i=0;i<route.length;i++)
        {
            var marker= new google.maps.Marker({position:route[i],map:map});
            path.push(route[i]);
            google.maps.event.addListener(marker,'click',showiwindow);
        }

    //Event Listener's
    function showiwindow(event)
    {
    iwindow.setContent("<b>Coordinates are:</b><br/>Latitude:"+event.latLng.lat()+"<br/>Longitude:"+event.latLng.lng());
    iwindow.open(map,this);
    }  
} 
```

我知道编写`return false`javascript 函数将避免刷新，并且 onClick 具有 void 返回类型。但是我的页面仍然会在按钮单击时重新加载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T06:21:03.317

你在这里有一个错误：

```
route = document.getElementById('<%= croute %>').value; 
```

它应该是：

```
route = document.getElementById('<%= croute.ClientID %>').value; 
```

**更新：**

标记 - 在页面中声明一个隐藏元素

```
<asp:hiddenfield id="hdnCroute" runat="server" />

//code behind

int [] croute = ... 

hdnCroute.Value = "["+string.Join(",",croute)+"]"; 
```

现在Javascipt：

```
//now you have an array back in javascript 
var route= eval(document.getElementById('<%= hdnCroute.ClientID %>').value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T09:57:42.027

为什么页面重新加载？

```
OnClientClick="droute(); return false" 
```

在浏览器内部是这样的：

```
button.onclick = function(){
    droute(); 
    return false
}; 
```

虽然 droute 出错了，所以，`return false`不起作用。

# lua - 矩形碰撞系统在love2d中不起作用

> ID：12336920
> 
> 赞同：3
> 
> 时间：2012-09-09T06:05:58.443
> 
> 标签：lua, collision-detection, love2d

我正在尝试在 Love2d 框架中的一个简单游戏中创建用于管理对象和碰撞的基本架构。所有对象都存储在一个表 ( `objects:activeObjects`) 中，然后`objects:calculateCollisions()`函数中的循环遍历所有对象。在每次迭代中，另一个嵌套循环会检查该对象是否与同一表中的任何其他对象重叠。在 结束时`objects:calculateCollisions()`，理想情况下，每个对象都有一个表，其中包含对在当前时间点与其重叠的所有对象的引用。但是，对象总是有空的碰撞表。

现在有两个测试对象：一个随鼠标移动，一个始终停留在右上角。对用户而言，这两个对象在重叠时应该同时消失，但是，如前所述，`collidingObjects`表格始终是空的。

我有三个源文件：： http
`main.lua`:
[//pastebin.com/xuGBSv2j](http://pastebin.com/xuGBSv2j)
`objects.lua`（大部分重要的东西都写在这里，可能问题出在哪里）： http:
[//pastebin.com/sahB6GF6](http://pastebin.com/sahB6GF6)
`customObjects.lua`（两者的构造函数在哪里定义了测试对象）：

```
function objects:newCollidingObject(x, y)
    local result = self:newActiveObject(x, y, 50, 50)
    result.id = "collidingObject"
    function result:collide(other)
        if other.id == "collidingObject" then self.remove = true end
    end
    return result
end
function objects:newMovingObject(x, y)
    local result = self:newCollidingObject(x, y)
    function result:act()
        self.x = love.mouse.getX()
        self.y = love.mouse.getY()
    end
    return result
end 
```

抱歉，我不能发布两个以上的超链接。

编辑：经过更多调试，我已将问题缩小到`collidesWith(obj)`函数。它似乎总是返回假。
这是代码：

```
function result:collidesWith(obj)
    if self.bottom < obj.top then return false end
    if self.top > obj.bottom then return false end
    if self.right < obj.left then return false end
    if self.left > obj.right then return false end
    return true
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T14:11:25.813

使用几个不同的测试输入在纸上检查并跟踪逻辑。你很快就会发现你的逻辑是荒谬的。你错过了一半的测试，你的一些比较是“指向错误的方式”等等。所以：

```
function result:collidesWith(obj)
    if self.bottom <= obj.top and self.bottom >= obj.bottom then return true end
    if self.top >= obj.bottom and self.top <= obj.top then return  true end
    if self.right >= obj.left and self.right <= obj.right then return false end
    if self.left <= obj.right and self.left >= obj.left then return false end
    return false
end 
```

应该做的伎俩。

# php - 使用 jquery 更改 css 中的特定属性

> ID：12336922
> 
> 赞同：-1
> 
> 时间：2012-09-09T06:06:18.037
> 
> 标签：php, jquery, html, css, properties

我希望在线图标闪烁。把它放在我的 js 代码中：

```
function blink(){
    $('ul.left_menu li.online').delay(100).fadeTo(100,0.5).delay(100).fadeTo(100,1, blink);
} 
```

发生的事情是整个链接都在闪烁。有什么方法可以访问 jquery 中的特定属性？

我的CSS：

```
ul.left_menu li.online a{
    width:166px;
    height:25px;
    display:block;
    background:url(../images/online-status.png) no-repeat left #dad0d0; 
    background-position:5px 5px;
    border-bottom:1px #FFFFFF solid;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T07:20:06.390

我认为您只想闪烁图标而不是整个链接。但是您的 JavaScript 会使整个链接闪烁，因为 JS 已分配给您的链接容器，并且您使用 css 背景设置图标。`<img>`您可以使用标签摆脱它。用于`<img>`在链接附近显示图标，并给它一个类。使用 jQuery 将闪烁分配给此类。

# html - $.post在jquery中动态添加按钮后如何触发点击处理程序

> ID：12336926
> 
> 赞同：0
> 
> 时间：2012-09-09T06:06:46.823
> 
> 标签：html, css, jquery

我有一个要求，我动态生成一些行，每一行都有一个按钮和一个与之关联的 id，我使用 jQuery 的 $.post() 来做到这一点。并且此内容会定期刷新。

因此出现了问题... $.post 完成执行后，按钮没有触发点击事件... 我该如何纠正这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T06:10:16.297

使用 jQuery 的 .on() 方法来监听动态添加的 DOM 元素上的事件：

```
$("body").on("click", ".dynamic_elem", function(){
  console.log( $(this) );
}); 
```

[http://api.jquery.com/on/](http://api.jquery.com/on/)

编辑:: 确保您使用的是 jQuery 1.7+。对于旧版本，您可以尝试使用 .live() 和 .delegate()。

# java - 在 netbeans 中使用 java 创建一个新组件

> ID：12336927
> 
> 赞同：3
> 
> 时间：2012-09-09T06:07:02.247
> 
> 标签：java, swing, layout-manager, swingx, jxtaskpane

我正在为我的大学项目开发​​一个软件。我正在使用 java 来开发我的桌面应用程序。为此，我想添加一个这样的组件：[http ://www.mediafire.com/view/?6y1183p8u6phwzg](http://www.mediafire.com/view/?6y1183p8u6phwzg)

我想添加一个类似于下框架左侧的组件。它是一个可调整大小的组件，包含标题和子菜单。我们还可以在 windows XP OS 的左侧看到这类组件。我努力开发这个组件，只能制作一个可调整大小的组件，但它并没有减少它们之间的空白空间。我将把我的代码和我的应用程序的示例设计放在下面。如果有人能给我一个解决方案让我的组件像我希望的那样工作，或者给我一个很好的解决方案来制作这个组件，我将非常感激。非常感谢。:)

[http://www.mediafire.com/view/?c9b8jwp4c558zae](http://www.mediafire.com/view/?c9b8jwp4c558zae)

```
 private void lbl1MousePressed(java.awt.event.MouseEvent evt) {                                  
    if (!(jpnTop.getSize().equals(lbl1.getSize()))) {
        try {
            Thread.sleep(100);
            jpnTop.setSize(lbl1.getSize());

        } catch (InterruptedException ex) {
        }

    } else {
        try {
            Thread.sleep(100);
            jpnTop.setSize(169, 162);

        } catch (InterruptedException ex) {
        }
    }
}  

  private void lbl2MousePressed(java.awt.event.MouseEvent evt) {                                  
    if (!(jpnLow.getSize().equals(lbl2.getSize()))) {
        try {
            Thread.sleep(100);
            jpnLow.setSize(lbl2.getSize());

        } catch (InterruptedException ex) {
        }

    } else {
        try {
            Thread.sleep(100);
            jpnLow.setSize(169, 162);

        } catch (InterruptedException ex) {
        }
    }
} 
```

Ps：由于本网站的限制，我无法上传我的图片，我恳请您使用上面的 medeafire 链接查看它们。非常感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T08:04:50.013

[当您使用SwingX](http://swingx.java.net)标记您的问题时- 使用它而不是重新发明轮子 :-) 您正在寻找的组件称为 JXTaskPane/Container。

顺便说一句：在 EDT 上睡觉（就像你在代码片段中的 mouseListener 方法中所做的那样）是**错误**的 - 就像**真的错**了- 根本不这样做。手动设置尺寸/位置组件也是如此：这是合适的 LayoutManager 的专属任务。

# android - Android倒数计时器不会接受变量

> ID：12336929
> 
> 赞同：1
> 
> 时间：2012-09-09T06:07:12.930
> 
> 标签：android

我刚开始学习创建 android 应用程序。我想创建一个简单的倒数计时器，它从编辑文本中获取一个值，但倒数计时器似乎没有运行。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    countDownTxt = (TextView) findViewById(R.id.countDownView);
    intervalTxt = (TextView) findViewById(R.id.intervalText);

    findViewById(R.id.startBN).setOnClickListener(
            new View.OnClickListener() {
                public void onClick(View v) {
                    int testInt = 30;
                    //countDownTxt.setText(intervalTxt.getText());
                    int interval = Integer.parseInt(intervalTxt.getText().toString());
                    Log.d("buttonpressed", "interval for countdown is " + interval);

                    cdt = new CountDownTimer(Integer.parseInt(intervalTxt.getText().toString()), 1000) {
                         public void onTick(long millisUntilFinished) {
                             Log.d("counttimer1", "haha1");
                             countDownTxt.setText(""+ millisUntilFinished / 1000);
                         }

                         public void onFinish() {
                             cancel();
                         }
                      }.start();
                }
            }
    );
} 
```

特别是，只有当我在 CountDownTimer 的第一个参数“cdt = new CountDownTimer(testInt, 1000)”中输入数值（例如 30000）时，该程序才有效

有人可以启发我吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T06:17:11.323

“不起作用”怎么办？您应该发布您收到的错误消息或“不起作用”的其他症状。

* * *

可能发生的情况是 CountDownTimer 只接受长值作为其构造函数的第一个参数。不是 int 值。

更改`int testInt = 30`并`long testLong = 10000.0f`查看会发生什么。

顺便说一句，第一个参数表示毫秒，所以“30”一开始并不会真正让你受益。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T06:24:34.547

onTick() 方法在单独的线程中调用。但是您无权使用`setText()`GUI 线程之外的方法。您必须使用 Handler 对象或`Activity.postOnUiThread()`方法在 GUI 线程中执行某些操作：

```
 cdt = new CountDownTimer(Integer.parseInt(intervalTxt.getText().toString()), 1000) {
                        public void onTick(long millisUntilFinished) {
                           Log.d("counttimer1", "haha1");
                        runOnUiThread(new Runnable() {
                            @Override
                            public void run() {
                                   countDownTxt.setText("" + millisUntilFinished / 1000);
                            }
                        });
                           countDownTxt.setText(""+ millisUntilFinished / 1000);
                        }

                        public void onFinish() {
                            cancel();
                        }
                     }.start(); 
```

有关更多信息，请阅读[http://developer.android.com/guide/components/processes-and-threads.html#Threads](http://developer.android.com/guide/components/processes-and-threads.html#Threads)

# qt - 如何从 Windows 命令行构建和运行 Qt 应用程序？

> ID：12336935
> 
> 赞同：1
> 
> 时间：2012-09-09T06:09:50.000
> 
> 标签：qt, command-line

我正在尝试创建一个简单的 Qt 项目。我在*文件夹*中完成了以下操作：

*   创建了一个`.ui`文件
*   跑了`qmake -project`
*   做了一个`.pro`文件
*   做了一个`main.cpp`文件

如何使用命令行运行这个项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T06:13:57.897

您可能应该运行以`qmake`从`Makefile`您的 . 如果您不包含具有程序二进制文件的目录，您可能需要键入程序的完整或相对文件路径。`.pro``make``PATH`

# backbone.js - 模态骨干路由器

> ID：12336942
> 
> 赞同：2
> 
> 时间：2012-09-09T06:10:55.803
> 
> 标签：backbone.js, coffeescript

我有一个非常基本的具有模态的 Backbone JS 应用程序。目前，我的路由器呈现的模态如下：

```
class App.Routers.Router extends Backbone.Router
  routes:
    "modal" : "modal"

  modal: ->
    view = new App.Views.Modal.New()
    $('#shared').html(view.el)
    view.render()
    view.show()
    return

class App.Views.Sessions.New extends Backbone.View
  template: Handlebars.templates["backbone/templates/modals"]

  initialize: (options) ->
    super(options)

  render: ->
    $(@el).html(@template())
    $('.modal', @el).modal()
    $('.modal', @el).on 'hidden', @cleanup
    return @

  show: ->
    $('.modal', @el).modal('show')

  hide: ->
    $('.modal', @el).modal('hide')

  cleanup: ->
    # ? 
```

这很好用，但是我不清楚如何处理窗口历史记录和用户选择后退按钮（即如何在点击后退时拆除模式）。有人对最佳方法有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T18:19:18.960

您偶然发现了单页应用程序 (SPA) 的一个有趣问题。是的，它可能会有点棘手，但简单的软件工程原理/设计可以在这里提供帮助。我已经通过以下方式处理清理：

有一个单独的类/对象负责管理“应用程序的各个部分”之间的视图转换。例如在我的应用程序中，我有这样的东西：

```
var App = {};

//when showing a specific app:

App.showView = function(appToShow){
if(this.currentApp)
  currentApp.close();

this.currentApp = appToShow;
//render appToShow;
} 
```

`appToShow`是一个具有方法`create/render`和的“类” `close`。所以应用程序负责它的清理。

现在有时我在主应用程序中有模态或“子应用程序”。我使用了上述的变体`close`并向对象添加了一个方法`App`。但基本思想是将这些“子应用程序”添加为主应用程序的属性：

```
//when creating modal:
App.addModal = function(modal){
 this.currentApp.modal = modal;
} 
```

现在，当通过单击后退按钮或应用程序的不同部分进行转换时 - 您必须调用`App`-manager 来处理清理和转换。基本上就像在说：

```
App.closeModal = function(modal){
 if(this.currentApp.modal)
  this.currentApp.modal.close();
} 
```

根据您的路由器的组织方式，您应该能够决定是完全关闭整个应用程序还是只关闭模态/子应用程序。基本上，您的“应用程序管理器”是一个单独的对象，仅负责处理视图之间的转换，而不必是`Backbone.View`- 一个单独的对象可以正常工作。您甚至可以通过创建和事件聚合器让它使用 Backbone 的事件侦听事件。德里克·贝利 (Derick Bailey) 写了一篇出色的博客文章，详细说明了这一点：http: [//lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/](http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/)

# c# - 如何从Repeater Control中的公共功能访问面板ID

> ID：12336949
> 
> 赞同：0
> 
> 时间：2012-09-09T06:12:48.003
> 
> 标签：c#, asp.net, css, webforms

我需要显示我拥有相册的年份列表。我为此使用Repeater控件，并在div控件中使用包装器年份。我也将当前年份作为`QueryString`. 我需要以红色显示当前年份作为 div 的背景。我的面板总是返回 null，因为我无法通过`Object Sender, RepeaterItemEventArgs e`. 如何更改此代码，以便我可以从后面的代码更改 CssClass。

我可以使用另一种方法，方法是使用`Literal Control`& 将我的年份列表显示为列表`<ul>`... 我可以使用它并完全控制我的列表 css。

请建议我如何以最佳和有效的方式实现这一目标。我也一直按照我正在尝试的方式完成工作，因为它可能对未来有用并且对我很有教育意义

`http://localhost:65123/Gallery/Albums.aspx?Year=2011&PageID=38`

```
<asp:Repeater ID="rptAlbumsYears" runat="server" >
    <ItemTemplate>
        <div class="AlbumPageYearListing">
            <asp:HyperLink ID="hyplnkCat1" runat="server" NavigateUrl='<%# getAlbumURLbyCat(Eval("Year"))%>'>
                <asp:Panel ID="pnlYear" runat="server">
                    <asp:Label ID="lblAlbumYear" runat="server" Text='<%# Eval("Year")%>'></asp:Label>
                </asp:Panel>
            </asp:HyperLink>
        </div>
    </ItemTemplate>
</asp:Repeater> 
```

.CS 代码

```
protected String getAlbumURLbyCat(object Year)
{
    string url;
    int PageID = Helper.GetPageIDbyName("Albums.aspx", "en-us");
    url = "~/Albums.aspx?Year=" + Year + "&PageID=" + PageID;
    try
    {
        int CurYear = 0;
        CurYear = int.Parse(Request["Year"].ToString());
        int iYear = int.Parse(Year.ToString());
        //Image imgArticleList = (Image)e.Item.FindControl("imgArticleList") as Image;
        Panel pnlYear = (Panel)FindControl("pnlYear");

       // Panel pnlYear = (Panel) 
        if (CurYear == iYear)
        {
            pnlYear.CssClass = "AlbumPageYearListingCurrent";
        }
    }
    catch (Exception ex)
    {
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T07:08:58.563

使用以下代码解决了问题

```
protected void rptAlbumsYears_ItemBound(Object Sender, RepeaterItemEventArgs e)
{
    try
    {
        if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
        {
            DataRowView drv = (DataRowView)e.Item.DataItem;
            int Year = Convert.ToInt32(drv["Year"]);
            Repeater Repeater2 = (Repeater)e.Item.FindControl("rptAlbumsYears");
            Panel pnlYear = (Panel)e.Item.FindControl("pnlYear");
            int CurYear = 0;
            CurYear = int.Parse(Request["Year"].ToString());
            if (CurYear == Year)
            {
                pnlYear.CssClass = "AlbumPageYearListingCurrent";
            }
        }
    }
    catch (Exception ex)
    {
        throw;
    }
} 
```

# google-apps-script - Google 网站中的脚本失败

> ID：12336950
> 
> 赞同：0
> 
> 时间：2012-09-09T06:13:01.933
> 
> 标签：google-apps-script

只需要一点帮助就可以开始...

我正在尝试在 Google 站点中运行此 Google 示例脚本，但它不起作用。

我确实按照本教程中提出的程序... [https://developers.google.com/apps-script/articles/getting-started-with-sites](https://developers.google.com/apps-script/articles/getting-started-with-sites)

```
function doGet(e) {
    var app = UiApp.createApplication();
    // hello world label
    var helloworldLabel = app.createLabel("I love Apps Script!").setStyleAttribute("fontSize","16px");
    // add the label to the app container
    app.add(helloworldLabel);
    return app;
} 
```

法语错误信息;;; : GOOGLE DRIVE Désolé, la page (ou le document) que vous souhaitez afficher n'existe pas。Vérifiez l'adresse, puis réessayez。
“GOOGLE DRIVE 抱歉，该页面（文档）不存在”...

我可能确实错过了一些非常基本的东西......

当我直接在脚本编辑器中运行其他代码时，它工作正常......

```
function sendEmail()
{ 
    MailApp.sendEmail('jp.bihin@skynet.be', 'Salut !', 'Ce message est envoyé par des scripts Google Apps. Chouette non ?'); 
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T08:20:55.683

最近必须（相当）发布 web 应用程序的方式发生了一些变化：[请参阅文档](https://developers.google.com/apps-script/execution_gadgets?hl=fr-FR#which-scripts)：“*为了将脚本作为 Google Apps 脚本小工具嵌入 Google 协作平台，您必须首先将脚本部署为网络应用程序”*

旧脚本似乎可以在插入页面时直接运行，但新脚本必须在作为小工具插入之前发布。文档不是很清楚，但一些测试似乎证实了这一步是必要的（创建版本/发布为 webapp）。
当您在将 web 应用程序作为嵌入式小工具运行时考虑权限和身份注意事项时，这是有道理的。

# c# - C# 中的 Catch 和 Catch（异常 e）

> ID：12336951
> 
> 赞同：2
> 
> 时间：2012-09-09T06:13:17.033
> 
> 标签：c#, .net

我猜这三部分代码没有区别，不是吗？

```
 try
    {
       // .............
    }
    catch
    {
        // ............. 
    } 
```

和

```
 try
    {
       // .............
    }
    catch(Exception)
    {
       // .............  
    } 
```

和

```
try
{
   // .............
}
catch(Exception e)
{
    // ............. 
} 
```

但是，我几乎很清楚何时应该使用第一个以及何时使用第二个。但我想让你说出你的想法。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-09T06:16:37.540

第一个还将捕获不是异常的抛出对象。
（[这可能发生在不符合 CLS 的代码中](http://msdn.microsoft.com/en-us/library/bb264489.aspx)）

如果您实际上不使用异常变量，第二个不会给出编译器警告。

只有当您确实需要检查抛出的异常（例如，记录它）时，才应使用第三个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-09T06:16:53.677

这些代码有点不同*。*

第一个不允许您从发生的异常中获取任何信息。它会捕捉到任何东西，但你不会知道*捕捉到*了什么。

第二个不允许你做任何事情，但至少可以让你指定什么样的异常。在您的示例中，由于您已指示`Exception`，它将捕获源自 的所有内容`Exception`。但它可以被改变以微调捕获的内容 - 但仍然允许你对它不做任何事情。

第三个让您实际访问异常并从中获取信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T06:25:43.453

第三种情况实际上是这样的：

当 try 块中的某一行发生异常时，会创建一个对应异常的对象。包含的 catch 块`(Exception e)`实际上有一个`Exception`类变量`e`作为其参数。然后将异常对象的引用复制到此引用变量。您现在可以根据需要使用此 e 变量来识别引发的异常类型，例如`e.message()`给出与异常相关的描述。

Slaks已经很好地解释了第一种和第二种情况

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-09T06:16:25.430

这取决于。不知道前两者有什么区别。

如果您想在 catch 块中使用异常，即获取堆栈跟踪或其他信息，则必须使用最后一个，这样您就有一个对象可以引用。

如果您只是将异常抛出给其他人处理，则不需要它。

# android - 为 Android 交叉编译时 system() 调用出现问题

> ID：12336954
> 
> 赞同：0
> 
> 时间：2012-09-09T06:14:41.857
> 
> 标签：android, cross-compiling

基于 NDK 独立工具链和仿生的一些限制，我使用带有这些常规设置的 crosstool-NG 推出了自己的工具链：

*   binutils-2.22
*   启用了 gfortran 的 gcc-4.5.3
*   glibc-2.14.1
*   内核头文件 2.35.7
*   拱臂4t

使用它，我构建了一个可执行文件并将所有依赖项（包括 libc、ld-linux 等）上传到我的 Android 设备上。我使用 ld-linux.so.3 --library-path ... 手动运行可执行文件

这是一个非常复杂的可执行文件，它似乎都可以工作，除非我进行任何 system() 调用，即使是一些基本的东西，比如 system("pwd") 或 system(NULL) 我得到 127 作为状态（未找到） . 如果我更进一步并使用 popen 来收集响应，我会得到：

***检测到 glibc ***双重释放或损坏

到底是怎么回事？有没有人成功地做类似的？有权限问题吗？Android 是否有一些根本不同的东西使得 system() 调用不可能？我在哪里可以找到仿生最终如何处理 system 和 popen（源代码），因为我认为如果您使用 NDK，您可以进行 system() 调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T06:18:01.463

我建议只滚动您自己的`system`. 它一点也不复杂，这将使您能够确定失败的确切系统调用以及它失败的错误。最有可能的是，shell 不正确，这就是产生错误的原因——您的库正在指定一个不存在的 shell 程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T06:21:42.270

(1) `SHELL`Android 上不太可能设置环境变量。默认外壳`/bin/sh`不存在（AFAIK）；它在`/system/bin/sh`。这很可能是导致`system`失败的原因。

(2) 你可以在 GitHub 上找到实现：[system](https://github.com/android/platform_bionic/blob/master/libc/unistd/system.c)、[popen](https://github.com/android/platform_bionic/blob/master/libc/unistd/popen.c)。您在 glibc 中的崩溃对我来说听起来像是一个库错误（除非您`popen`从信号处理程序或多线程环境中使用）

# iphone - 将 NSDate 与 [NSDate 日期] 最快的方式进行比较？

> ID：12336955
> 
> 赞同：-3
> 
> 时间：2012-09-09T06:14:51.433
> 
> 标签：iphone, ios, date, sdk, nsdate

我有一个核心数据表视图，我正在比较日期。我目前使用的方法是：`if ([todayDate compare: [NSDate date]]==NSOrderedAscending)`. 这工作得很好但很慢。不过，我不需要知道时间上的差异。任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T08:04:59.877

我真的认为，NSDates 方法`isEqualToDate:`就是您正在寻找的。在我看来，这是回答您问题的 Apple 方式：

```
 ```
NSDate *date1 = ...;
NSDate *date2 = ...;

BOOL datesAreEqual = [date1 isEqualToDate:date2]; 
``` 欲了解更多信息，请访问[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsdate_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsdate_Class/Reference/Reference.html)

            回答 #2

赞同：1

时间：2012-09-09T08:19:06.177

一种选择可能是不实际创建新`NSDate`对象，而是使用时间间隔进行比较。不知道性能如何，但可能值得一试。

```
if ([todayDate timeIntervalSinceReferenceDate] > [NSDate timeIntervalSinceReferenceDate]) {
...
} 
```

            回答 #3

赞同：1

时间：2012-09-09T08:47:05.813

您应该记住局部变量中的当前日期或当前时间戳：

```
NSTimeInterval current = [NSDate timeIntervalSinceReferenceDate]; 
```

稍后使用此值进行所有比较：

```
myTimestamp = [myDate timeIntervalSinceReferenceDate]

if (myTimestamp == current) {
  return NSOrderedSame;
} else if (myTimestamp > current) {
  return NSOrderedDescending;
} else {
  return NSOrderedAscending;
} 
```

或者更快的方法，使用 C 函数：

```
// Get the current calendar time as a time_t object.
time_t time ( time_t * timer );

// Return difference between two times
double difftime ( time_t time2, time_t time1 ); 
```

            回答 #4

赞同：0

时间：2012-09-09T08:25:30.497

我没有测量它，但你可能想尝试：

```
NSTimeInterval i = [todayDate timeIntervalSinceNow]; 
```

其中结果 ( `i`) 可能是正数或负数。

你也可以试试`CFDateCompare`。

或者您可能想考虑另一种表示数据库中时间点的方法——例如 a `CFTimeInterval`（a`double`表示距公共参考时间的秒数）。

```

# python - 用beautifulsoup python测试没有内容的标签

> ID：12336968
> 
> 赞同：3
> 
> 时间：2012-09-09T06:17:12.877
> 
> 标签：python, beautifulsoup

我正在使用 Python 中的 BeautifulSoup 来抓取网页。问题下的 html 如下所示：

```
<td><a href="blah.html>blahblah</a></td>
<td>line2</td>
<td></td> 
```

我希望获取 td 标签的内容。所以对于第一个 td，我需要“blahblah”文本，对于下一个 td，我想写“line2”，最后一个 td，“空白”，因为没有内容。

我的代码片段看起来像这样 -

```
row = [] 
for each_td in td:                        
    link = each_td.find_all('a')                                                
    if link:
        row.append(link[0].contents[0])
        row.append(link[0]['href'])
    elif each_td.contents[0] is None:
        row.append('blank')                
    else:
        row.append(each_td.contents[0])
print row 
```

但是在运行时，我收到错误 -

```
elif each_td.contents[0] is None:
IndexError: list index out of range 
```

注意-我正在使用 beautifulsoup。

如何测试“no-content-td”并适当地加注？为什么“... is None”不起作用？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-09T06:24:27.813

谁说“内容”总是至少有一个元素？显然，您遇到“内容”没有元素的情况，因此您会出现此错误。

更合适的检查是：

```
if each_td.contents: 
```

或者

```
if len(each_td.contents) > 0: 
```

但你的假设是错误的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-09T06:20:17.353

您可以使用`.text`来获取文本。

```
row = [] 
for each_td in td:
    row.append(each_td.text)
print row 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T06:27:23.767

您可以处理异常。下面是代码

```
try:
  row.append(each_td.contents[0])
except IndexError:
  //do what is required if it is empty ... 
```

# design-patterns - 使用异常处理身份验证/授权错误是一种好习惯吗？

> ID：12336972
> 
> 赞同：5
> 
> 时间：2012-09-09T06:19:07.427
> 
> 标签：design-patterns, exception, exception-handling

如果应用程序发现用户没有经过身份验证/授权做某事，那是不是出乎意料？

```
try {
    if (notAuth())
        throw new UnAuthException();
} catch (UnAuthException e) {
    Log . error(e);
    return false;
} 
```

**如果是预期的情况**，那么为什么有这么多框架都有自己的`UnAuthException`，如果验证失败也不例外？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T08:19:17.597

取决于范围。

在**业务逻辑层**“用户未授权/认证”的情况是异常的，应该会导致运行时异常，例如（Java代码）：

```
public String salutation(User user) {
  // may lead to a runtime exception if user is not authorized
  return String.format("Hello, %s!", user.getName());
} 
```

（当然，它是一个接口）的实现`User`将返回用户名或抛出一个`NonAuthenticatedException`.`getName()`

在**访问控制**层中，用户授权/认证状态被当作任何其他正常状态处理，不应被视为异常情况，例如：

```
if (!user.isAuthenticated()) {
  httpResponse.addHeader("WWW-Authenticate", "Basic realm=\"secure content\"");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T07:05:09.643

是的，通过异常处理身份验证\授权是一个好习惯，因为：

1) 异常是系统不喜欢的异常情况，因此通过异常处理我们对这种情况做出反应。身份验证和授权异常基本上是安全违规，即系统异常，对违规做出响应是一种很好的做法。异常处理框架是一种流行的报告违规\系统异常的机制，因此我们使用这个框架来应对这种情况。

这就是为什么所有流行的框架（包括 .NET）都有 Auth。封装错误的异常类。

# c++ - 使用 MinGW 和 QT Creator 的自定义静态库链接错误

> ID：12336977
> 
> 赞同：0
> 
> 时间：2012-09-09T06:19:49.477
> 
> 标签：c++, qt, visual-c++, mingw, static-libraries

我在 MSVC 2008 中创建了一个静态库 Win32（它实际上并不包含 Win32 代码）库，我目前正试图在 QT Creator 中链接到它。但是每当我编译时，我都会收到错误消息：

```
C:\Users\Snowball\Documents\QT Creator\Libraries\FontSystem\main.cpp:-1: error: undefined reference to `NGUI::CFont::CFont()' 
```

该库是一个字体系统，它使用 FreeImage 加载 PNG，然后将其“切割”成单独的符号，然后将图像数据传递给该图像数据`gluBuild2DMipMaps()`，然后从中创建 OpenGL 纹理，以便稍后在绘制字符串时使用。我已经定义了我的所有类方法，并且整个类都是名为`NGUI`. 这样，如果出于某种原因使用了两个字体系统，字体系统就不会与另一个混淆。要链接这个库，我只需将以下代码添加到我的 .pro 文件中：`LIBS += FontSystem.lib`

现在应用程序中唯一的文件是：

```
#include "fontsystem.h"
using namespace NGUI;

int main(int argc, char *argv[])
{
    cout<< "Starting the FontSystem..."<< endl;

    CFont *cFont = new CFont();
    cout<< "FontSystem Started!"<< endl;

    system("sleep 1");
    return 0;
} 
```

文件 fontsystem.h 如下所示：

```
#ifndef FONTSYSTEM_H
#define FONTSYSTEM_H

// Include the Basic C++ headers.
#include <cstdio>
#include <cstdlib>
#include <iostream>
#include <assert.h>
#include <limits>
using namespace std;

// Include the OpenGL and Image Headers.
#include <GL/gl.h>
#include <GL/glu.h>
#include "utilities.h"

// Macros.
#define DIM(x) (sizeof(x)/sizeof(*(x)))

/*
    The Font System works by loading all the font images (max image size 32px^2) into memory and storing
  the OpenGL texture ID's into an array that can be access at all times. The DrawString() functions will
  search through the string for the specified character requested to draw and then it will draw a quad
  and paint the texture on it. Since all the images are pre-loaded, no loading of the images at load time
  is necessary, this is memory consuming but efficiant for the CPU. ALL functions WILL return a character
  string specifing errors or success. A function will work as long as it can and when an error happens,
  unless the error is fatal, the functions will NOT rollback changes! This ensures that during testing, a
  very certain bug can be spotted.
*/

namespace NGUI // This namespace is used to ensure no confusion happens. This font system paints 2D fonts for GUIs.
{
    class CFont
    {
    public:
        CFont();
        ~CFont();

        template<typename tChar> char* DrawString(tChar *apString, int aiSize, int aiX, int aiY);
        template<typename tNum> char* DrawString(tNum anNumber, int aiSize, int aiX, int aiY);

    private:
        char* SetupFont(); // This function will load as many images as possible into memory.

        GLuint miTextIDs[36];
        int miDrawIDs[1024];
    };
}

#endif // FONTSYSTEM_H 
```

编辑：这是 fontsystem.h 的实现文件

```
 #include "fontsystem.h"

#include "fontsystem.h"

namespace NGUI
{
    CFont::CFont()
    {
        SetupFont();
    }

    CFont::~CFont() {}

    template<typename tChar>
    char* CFont::DrawString(tChar *apString, int aiSize, int aiX, int aiY)
    {
        // Search the string from most significant character to least significant.
        int iSelectIndex = 0;
        for(size_t i = 0; apString[i] != NULL; ++i)
        {
            iSelectIndex = apString[i] >= '0' && apString[i] <= '9' ? (apString[i] - '0') :
                           apString[i] >= 'A' && apString[i] <= 'Z' ? (apString[i] - 'A' + 10) :
                           apString[i] >= 'a' && apString[i] <= 'z' ? (apString[i] - 'a' + 10) :
                           apString[i] == ' ' ? 36 : // This is a special case, This see's if the current character is a space or not.
                           -1;

            if(iSelectIndex == -1)
            {
                return "The String Is Corrupt! Aborting!";
            }

            // Add the current selected character to the drawing array.
            miDrawIDs[i] = iSelectIndex;
        }

        // Go through and draw each and every character.
        for(size_t i = 0; i < DIM(miDrawIDs); ++i)
        {
            // Paint each qaud with the X,Y coordinates. After each quad has been successfully drawn,
            // Add the size to the X coordinate. NOTE: Each character is square!!!

            if(miDrawIDs[i] != 36)
            {
                glBindTexture(GL_TEXTURE_2D, miDrawIDs[i]);
            }

            // The font color is always white.
            glColor4f(1.0, 1.0, 1.0, 0.0); // The alpha argument in the function call is set to 0 to allow color only where image data is present.

            glBegin(GL_QUADS);
                glTexCoord2i(0, 0);
                glVertex2i(aiX, aiY);

                glTexCoord2i(1, 0);
                glVertex2i(aiX + aiSize, aiY);

                glTexCoord2i(1, 1);
                glVertex2i(aiX + aiSize, aiY + aiSize);

                glTexCoord2i(0, 1);
                glVertex2i(aiX, aiY + aiSize);
            glEnd();

            // Now, increase the X position by the size.
            aiX += aiSize;
        }

        return "Successful Drawing of String!";
    }

    template<typename tNum>
    char* CFont::DrawString(tNum anNumber, int aiSize, int aiX, int aiY)
    {
        // Convert the supplied number to a character string via snprintf().
        char *vTempString = new char[1024];
        snprintf(vTempString, 1024, "%f", anNumber);

        // Next, run DrawString().
        return DrawString<char>(vTempString, aiSize, aiX, aiY);
    }

    char* CFont::SetupFont()
    {
        // First Load The PNG file holding the font.
        FreeImage_Initialise(false);

        FIBITMAP *spBitmap = FreeImage_Load(FIF_PNG, "Font.png", BMP_DEFAULT);

        if(!spBitmap)
        {
            return "Was Unable To Open/Decode Bitmap!";
        }

        // Do an image sanity check.
        if(!FreeImage_HasPixels(spBitmap))
        {
            return "The Image doesn't contain any pixel data! Aborting!";
        }

        // The Image will have the red and blue channel reversed, so we need to correct them.
        SwapRedBlue32(spBitmap);

        // Retrieve all the image data from FreeImage.
        unsigned char *pData = FreeImage_GetBits(spBitmap);
        int iWidth = FreeImage_GetWidth(spBitmap);

        // Cutup the PNG.
        int iFontElementSize = (32*32)*4; // The first two numbers, are the dimensions fo the element, the last number (4) is the number of color channels (Red Green Blue and Alpha)
        bool bDone = false; // This bit is only set when the entire image has been loaded.
        unsigned char *pElemBuff = new unsigned char[iFontElementSize]; // The temporary element buffer.
        int iDataSeek = 4; // Start with an offset of 4 because the first byte of image data starts there.
        int iTexIdx = 0; // This is an offset specifing which texture to create/bind to.

        // Create all 36 OpenGL texures. 0-9 and A-Z and finally space (' ')
        glGenTextures(37, miTextIDs);

        while(!bDone)
        {
            // Now load the an element into the buffer.
            for(int i = 0, iXCount = 0, iYCount = 0;
                i < iFontElementSize; ++i, ++iXCount)
            {
                if(iXCount >= (32*4))
                {
                    iXCount = 0; // Reset the column offset.
                    ++iYCount; // Move down 1 row.
                    iDataSeek += ((iWidth * 4) - (32*4)); // Set the data seek to the next corrosponding piece of image data.
                }

                if(pData[iDataSeek] == NULL)
                {
                    break;
                }

                pElemBuff[i] = pData[iDataSeek];
            }

            // Check to see if we are done loading to prevent memory corruption and leakage.
            if(bDone || iTexIdx >= 37)
            {
                break;
            }

            // Create The OpenGL Texture with the current Element.
            glBindTexture(GL_TEXTURE_2D, miTextIDs[iTexIdx]);
            gluBuild2DMipmaps(GL_TEXTURE_2D, GL_RGBA, 32, 32, GL_RGBA, GL_UNSIGNED_BYTE, pElemBuff);

            // Create the correct texture envirnment to the current texture.
            glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST_MIPMAP_NEAREST);
            glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
            glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP);
            glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP);
        }

        // Do a little house cleaning!
        delete[] pElemBuff;
        delete pData;
        FreeImage_Unload(spBitmap);
        FreeImage_DeInitialise();
    }
} 
```

请注意：此代码尚未经过测试，但编译良好（根据 MSVC 2008）

我忘记更改`system("sleep 1");`to`system("PAUSE");`并且我让它调用该命令的原因是因为我最初是在 linux 中构建它。

编辑 2：我更新了实现代码以反映文件。

# php - CakePHP AJAX 请求无法识别

> ID：12336988
> 
> 赞同：1
> 
> 时间：2012-09-09T06:21:47.417
> 
> 标签：php, jquery, ajax, cakephp

我正在尝试为 CakePHP 2.2 中元素列表上的每个项目创建一个收藏夹/星号/心形按钮（如在 Gmail 中）。

我有一个工作控制器和一个 JS 切换功能，但我的问题是我的脚本的 AJAX 部分实际上并没有发生；相反，页面重定向到自身（作为关闭 JavaScript 的浏览器的后备的一部分）并重新加载。这是我试图避免的，这样用户就不会失去他们在页面上的位置。

这是取消收藏项目的我的 CakePHP 控制器：

```
class MarksController extends AppController {
    public $components = array('RequestHandler');

    public function unfav($id = null) {
        // set default class & message for setFlash
        $class = 'flash_bad';
        $msg   = 'Invalid List Id';

        if ( validation($id) ) {
            //load this mark's data
            $this->request->data = $this->Mark->read(null, $id);
            $this->request->data['Mark']['favorite'] = '0';
            if ($this->Mark->save($this->request->data)) {
                $class = 'message';
                $msg   = 'The WatchMark has removed from favorites.';
            } else {
                $msg = 'This WatchMark could not be saved. Please, try again.';
            }

            $this->autoRender= false;
            $this->autoRender = $this->layout = false;

            // output JSON on AJAX request
            if($this->request->is('ajax')) {
                echo json_encode(array('success'=>($class=='flash_bad') ? FALSE : TRUE,'msg'=>"{$msg}"));
                exit;
            }

            // set flash message & redirect
            $this->Session->setFlash($msg,'default',array('class'=>$class));
            $this->redirect($this->referer());

        } else {
            //trying to edit a mark that doesn't belong to this user:
            throw new NotFoundException(__('Invalid mark'));
        }  // end ownedby check
    } //end markfav method 
```

我有另一个类，它是名为 markfav 的逆函数（将它们组合成一个切换函数是另一天的任务）。

然后，在 JQuery 和 JavaScript 方面：

```
$(document).ready(function() {
    // class exists
    if($('.fav_toggler').length) {
        // add click handler
        $('.fav_toggler').click(function(e){
            $('#flashMessage').fadeOut();
            if($(this).hasClass("heart")) {
                $.post('/marks/markfav/' + $(this).attr('target_id'), "ajax=1", function(response) {
                    if(response.success == true) {
                        $(this).addClass("heart").removeClass("hearttoggle");
                    }
                },'json');
            }        
            else {
                $.post('/marks/unfav/' + $(this).attr('target_id'), "ajax=1", function(response) {
                    if(response.success == true) {
                        $(this).addClass("heart").removeClass("hearttoggle");
                    }
                },'json');
            }
            e.preventDefault();
        });
        return false;
    }
}); 
```

我已经通过向我的 JavaScript 中抛出警报进行了测试，我认为它执行正确（它到达了我的代码的正确部分并在 heart & hearttoggle 之间更改了类。

我也知道它`if($this->request->is('ajax'))`出于某种原因跳过了我的 PHP 中的块（尽管我有一个 AJAX 删除函数可以很好地满足类似的条件）。我已经测试了`if($this->request->is('ajax'))`从 PHP 块中删除条件以强制它执行 JSON_encode 位，我最终得到一个包含 JSON 编码数组的页面，没有其他内容。

如何在不重新加载页面的情况下使用 AJAX 使其正常工作？

* * *

**编辑：从调用到 /marks/unfav/624 的标题**

```
Request URL:http://towatchlist.com/marks/unfav/624
Request Method:GET
Status Code:200 OK

Request Headers
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Cookie:CAKEPHP=blah
Host:towatchlist.com
Referer:http://towatchlist.com/marks
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_1) AppleWebKit/537.8 (KHTML, like Gecko) Chrome/23.0.1255.0 Safari/537.8

Response Headers
Connection:Keep-Alive
Content-Encoding:gzip
Content-Type:text/html
Date:Sun, 09 Sep 2012 20:55:18 GMT
Keep-Alive:timeout=5, max=94
Server:Apache/2.2.22 (Ubuntu)
Transfer-Encoding:chunked
Vary:Accept-Encoding
X-Powered-By:PHP/5.3.10-1ubuntu3.2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T21:27:48.467

出于某种原因，没有提供[X-Requested-With](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Common_non-standard_request_headers)。它应该在您的请求标头中显示：

```
X-Requested-With: XMLHttpRequest 
```

以下是一些可能有帮助的问题：

*   [Jquery，ajax 请求标头中没有 X-Requested-With=XMLHttpRequest？](https://stackoverflow.com/questions/1885847/jquery-no-x-requested-with-xmlhttprequest-in-ajax-request-header)
*   [X-Requested-With 标头未在 jquery ajaxForm 插件中设置](https://stackoverflow.com/questions/1846675/x-requested-with-header-not-set-in-jquery-ajaxform-plugin)

正在工作的 AJAX 请求的调用方式与此相同吗？

# mysql - MYSQL ON UPDATE CASCADE 仅适用于 1 列

> ID：12336989
> 
> 赞同：0
> 
> 时间：2012-09-09T06:22:04.780
> 
> 标签：mysql

我有以下架构：

```
 tbl_tag
--------|------
name        count
apple         2
orange        5

     tbl_lookup_tag
--------|---------
doc_id        tag
1            apple
1            orange
2            apple

  foreign key (tag) references tbl_tag (name)
    on update cascade on delete cascade 
```

我想要的是`tbl_lookup_tag.tag`仅在更改时更新，`tbl_tag.name`而不是在`tbl_tag.count`更改时更新。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T06:25:18.103

而不是按名称引用`tbl_tag`- 创建代理主键（整数，自动增量）并通过它引用。

在这种情况下，您可以重命名标签而无需担心和头痛。

所以你的新模式看起来像：

```
tbl_tag: id | name | count
          ^
          |----------------|
                           v
tbl_lookup_tag: doc_id | tag_id 
```

# java - 去掉返回值中的通配符参数

> ID：12336992
> 
> 赞同：2
> 
> 时间：2012-09-09T06:22:54.727
> 
> 标签：java, generics, wildcard

我有一些在内部使用泛型的代码。到目前为止一切都很好，直到通过公共 API 公开功能。该问题与以下玩具示例相同：我有一个`List`具有特定子类型的包装项目（`T extends Number`在此示例中）。当我想返回 this`List`时，我目前正在返回 a `List<Wrapper<? extends Number>>`，这使得客户端代码非常冗长。

是否有可能将返回类型更改为`List<Wrapper<Number>>`？客户不需要知道 Wrappers 包含任何特定类型的 Number。我尝试了几种强制转换方法，但它们都因编译错误而失败。

```
public static List<Wrapper<? extends Number>> getNumbers() {
    Wrapper<Integer> number1 = new Wrapper<Integer>(1);
    Wrapper<Double> number2 = new Wrapper<Double>(2.);

    List<Wrapper<? extends Number>> numbers = new ArrayList<Wrapper<? extends Number>>();
    numbers.add(number1);
    numbers.add(number2);
    return numbers;
}

class Wrapper<T extends Number> {
    private final T item;
    Wrapper(T item) {
        this.item = item;
    }
    T getItem() {
        return item;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T09:14:39.990

根据您所展示的有关您的`Wrapper`类型的内容，`Wrapper<? extends Number>`这*正是*您想要的情况，因为只能从您的`Wrapper`（它是生产者）中取出物品，而不能放入物品。所以当您致电`getItem()`时a `Wrapper<? extends Number>`，它返回 a `Number`，这就是你想要的。它怎么不符合你的需要？

“冗长”不是不抛弃类型安全的正当理由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T07:17:24.640

据我所知，如果你想返回 T 是不可能的。当你想返回 T 时，你不能返回 T 的子类型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T07:30:18.080

我刚刚发现以下方法有效。任何关于潜在陷阱的反馈和评论仍然非常感谢。

```
public static List<Wrapper<Number>> getNumbers() {
    Wrapper<Integer> number1 = new Wrapper<Integer>(1);
    Wrapper<Double> number2 = new Wrapper<Double>(2.);
    List<Wrapper<? extends Number>> numbers = new ArrayList<Wrapper<? extends Number>>();
    numbers.add(number1);
    numbers.add(number2);
    return (List<Wrapper<Number>>)(List<?>)numbers;
} 
```

# file-format - 位图文件头大小

> ID：12336994
> 
> 赞同：14
> 
> 时间：2012-09-09T06:23:02.567
> 
> 标签：file-format, bmp

我是编程 bmp 文件的新手，我查看了这个网站以了解 bmp 标头.. [http://www.daubnet.com/en/file-format-bmp](http://www.daubnet.com/en/file-format-bmp)

bmp 文件的标头似乎是 54 字节。

使用绘画，我创建了一个简单的 10x10 图像，并将其保存为 24 位。所以根据简单的数学计算，文件大小应该是 10*10*3 + 54 = 354 字节。

但十六进制编辑器和文件资源管理器返回的大小为 374 字节。

所以我有20个字节的差异，我不知道为什么。

你能告诉我为什么吗？

多谢！！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-09T06:25:59.520

BMP 中的行被填充为 4 字节的倍数。

没有填充，每行是 3*10 = 30 字节。使用填充后，每行是 32 字节，因此图像数据大小为 320 字节。因此，文件大小为 54+320 = 374 字节。