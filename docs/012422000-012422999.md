# StackOverflow 问答 12422000-12422999

# sql - T-sql向字符范围添加相同数量

> ID：12422000
> 
> 赞同：1
> 
> 时间：2012-09-14T09:45:27.820
> 
> 标签：sql, sql-server, tsql

我有一个带有主键 ( `compid`) 的 SQL SERVER 数据库，它是一个字符，但看起来像一个编号的 ID。我们的数据库中有 20,000 台计算机，每台计算机都有自己的 8 位代码 ( `compid`)

例如。我的电脑是`28154326`。这是在一个字符字段中。

我错误地编号了 50 台计算机，而不是`28184000 - 28184050`我把`28154000 - 28154050`.

有没有什么办法可以改变这一系列的计算机来获得正确的 compid 而无需逐一检查？

这些都在`compconfig`表中，所以要提取它们

```
select * from compconfig (nolock) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T10:02:51.470

这个查询能解决你的问题吗？

```
UPDATE compconfig 
SET compid=CAST(compid AS INT)+30000
WHERE CAST(compid AS INT) BETWEEN 28154000 AND 28154050 
```

更新前请选择并确认。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:03:30.673

```
;WITH CTE as 
(
select compid,28184000+ROW_NUMBER() over (order by (select 0)) rn from compconfig where CAST(compid AS INT) BETWEEN 28154000 AND 28154050
)

UPDATE CTE SET compid = rn 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T10:03:07.757

您可以尝试这样的事情，假设它是您尝试运行的一次性修复：

```
UPDATE compconfig
SET compid = REPLACE(compid, '2815', '2818')
WHERE compid BETWEEN '28154000' AND '28154050' 
```

# tomcat - 如何在 servlet 本身中指定 servlet 路径

> ID：12422002
> 
> 赞同：1
> 
> 时间：2012-09-14T09:45:35.303
> 
> 标签：tomcat, servlets, servlet-container

我有这个问题，我们可以在 servlet 本身中指定 servlet 路径吗？

(path = /myServlet) public MyNormalServlet 扩展 HttpServlet....{ . . . }

因此，如果来自浏览器的调用说“http://localhost:8080/myServlet”，我的这个 servlet 将被调用，它也将是 tomcat 中的一个独立 servlet，其映射不能在 tomcat 的 web.xml 中指定

请如果有人可以帮助我解决这个问题并提供可能的解决方案..

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:51:18.557

如果您正在运行 Tomcat，只需编辑 web.xml 文件：

```
(...)
<servlet>
    <servlet-name>TestingServlet</servlet-name>
    <servlet-class>TestingServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>TestingServlet</servlet-name>
    <url-pattern>/servlet/TestingServlet</url-pattern>
</servlet-mapping>
(...) 
```

其中： ...您的 servlet 的名称。它可以是你想要的任何东西，它必须与 servlet-mapping 内部匹配……处理这个 servlet 的类的名称。

...您想要的任何东西，只要它与...上的相同标记匹配您要响应的 url 路径.. 所以在您的示例中，您将在此处键入“/myServlet”

如果您想阅读有关该主题的更多信息：http: [//javapapers.com/servlet/what-is-servlet-mapping/](http://javapapers.com/servlet/what-is-servlet-mapping/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:57:24.290

如果您使用的是 Servlet 3 容器，则可以使用 Servlet 3.0 @WebServlet 注释来做到这一点：

```
@WebServlet(urlPatterns={"/path1","/path2"[,...],} 
```

您还可以通过这种方式指定描述、初始化参数等。您根本不需要编写任何 XML。请参阅 Servlet 3.0 Javadoc。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T10:01:34.613

标准 servlet 不支持您想要的。您可以使用带有注释的 Spring MVC 之类的东西来实现相同的目的。

[http://static.springsource.org/spring/docs/3.0.x/reference/mvc.html](http://static.springsource.org/spring/docs/3.0.x/reference/mvc.html)

例如

```
@Controller
public class HelloWorldController {

    @RequestMapping("/helloWorld")
    public ModelAndView helloWorld() {
        ModelAndView mav = new ModelAndView();
        mav.setViewName("helloWorld");
        mav.addObject("message", "Hello World!");
        return mav;
    }
} 
```

如果您将带有此 Spring MVC 控制器的 Web 应用程序部署到 Tomcat 中的根 Web 应用程序上下文，则访问“http://localhost:8080/helloWorld”将执行 helloWorld 方法。

# c# - 在 C# 中使用本地主机发送邮件时收到错误消息“发送邮件失败”

> ID：12422004
> 
> 赞同：0
> 
> 时间：2012-09-14T09:45:37.643
> 
> 标签：c#

我正在尝试从没有 IIS 服务器和邮件服务器的机器（Windows 7）发送邮件，但是这台机器连接到 LAN。我们真的需要 IIS 服务器来使用 localhost 发送邮件吗？请帮助我理解 localhost 的概念，使用“localhost”作为 SMTP 服务器需要哪些先决条件。我尝试使用 Gmail SMTP 主机，它运行良好，没有任何问题。

这是我的代码：

```
SmtpClient client = new SmtpClient();               
client.Host = "localhost";                
client.Port = 25;
client.EnableSsl = true;
client.Credentials = new System.Net.NetworkCredential("Admin", "password");
client.UseDefaultCredentials = false;              
try
{
client.Send(mail);
}
catch (Exception ex)
{
logger.LogInfo(ex.Message); 
} 
```

谢谢，德尔文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:06:31.743

You don't need smtp server, you can store mails in filesystem, set your development web.config like this :

```
<system.net>
  <mailSettings>
    <smtp deliveryMethod="SpecifiedPickupDirectory">
      <specifiedPickupDirectory
            pickupDirectoryLocation="w:\razvoj\TestAndBuild\UnitTestMailSend" />
    </smtp>
  </mailSettings>
</system.net> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:50:46.547

您将需要使用 IIS/邮件服务器/从本地机器发送的东西。

如果您只是想测试，那么您可以使用它来帮助模拟它：

[http://antix.co.uk/Projects/SMTP-Server-For-Developers](http://antix.co.uk/Projects/SMTP-Server-For-Developers)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T09:51:36.307

如果您只想在开发期间进行一些测试，您可以安装[Smtp4Dev 。](http://smtp4dev.codeplex.com/)

如果我记得 SMTP 已从最新版本的 IIS 中删除，那么无论如何您都需要找到另一个工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T09:51:37.197

要发送电子邮件，您需要一个 SMTP 服务器程序。您要么在本地拥有一个（即“本地主机”，并且为您方便地在 IIS 中内置了一个），要么您连接到远程服务器。

如果您不喜欢 IIS 的想法，我确信您可以使用其他 SMTP 服务器，但如果您希望在本地发送，则需要一些东西。

# perl - 使用 perl 发送电子邮件

> ID：12422005
> 
> 赞同：-3
> 
> 时间：2012-09-14T09:45:41.463
> 
> 标签：perl

我有一个 perl 脚本，它向开发人员发送邮件以显示状态，即失败或传递给开发人员的电子邮件 ID。我也想在使用脚本时获得这样的状态邮件。所以，我尝试如下，

收件人：'developer@abc.com，$userid@abc.com'。但在这种情况下，开发人员得到了 mnail，但我仍然没有得到它。你能帮忙吗？我是 Perl 的新手，所以我的问题可能不符合标准。但请帮忙，我迫切需要它。

谢谢和问候， 高塔姆

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T10:22:38.500

您正在将变量插入到单引号字符串中。Perl 假定单引号中的所有内容都应该按字面意思理解。

例子：

```
my $userid = 'admin';
my $string = '$userid@abc.com';
print $string; 
```

结果为“$userid@abc.com”

但是，如果您在第二行替换双引号

```
my $string = "$userid\@abc.com"; 
```

结果为“admin@abc.com”

因此，如果要插入变量，请使用双引号：

```
"developer\@abc.com , $userid\@abc.com" 
```

# java - Freemarker 模板异常

> ID：12422008
> 
> 赞同：2
> 
> 时间：2012-09-14T09:45:51.760
> 
> 标签：java, templates, exception, freemarker

在我的 java 代码中，我创建了一个 A 列表，然后创建了一个列表的`add`实例`A`。我将此列表传递给 freemarker 模板，我的模板代码如下：

```
<#if listA.size()!=0>
 <#list listA as A>
 ${A.getA()}
 </#list>
<#else>
nothign
</#if> 
```

我得到的错误是

`freemarker.template.TemplateException: Expected hash. listC evaluated instead to freemarker.template.SimpleSequence on line 1, column 3 in null.`

我不确定为什么它会说空值？有什么问题，请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T09:56:51.673

我发现了问题，这就是问题所在。显然它不理解 size 方法的语法。

[Freemarker 将列表长度分配给局部变量](https://stackoverflow.com/questions/3864022/freemarker-assign-list-length-to-local-variable)

# plugins - Netbeans 7.2 ID 无法启动

> ID：12422014
> 
> 赞同：2
> 
> 时间：2012-09-14T09:46:10.620
> 
> 标签：plugins, netbeans, netbeans-7.2

我已经更新了 Netbeans，现在我发现这个问题重新启动了 id。

警告 - 无法安装某些模块：CSS 可视化编辑器 - 在版本 >= 1.30 中请求了模块 CSS 编辑器，但仅找到 1.29。由于上述问题，无法安装 24 个其他模块。

我试图手动禁用该插件，但它没有工作。我不想重新安装 id，因为这对我来说是一个真正的问题......

有任何想法吗？谢谢！

# java - 在 Eclipse 中生成流程图

> ID：12422016
> 
> 赞同：1
> 
> 时间：2012-09-14T09:46:21.993
> 
> 标签：java, eclipse

如果我们将 java 代码传递给它，是否可以在 Eclipse 中安装任何插件来生成流程图？假设我有代码并且我想要生成一个流程图来帮助我进行可视化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T10:07:20.963

Have try of StarUML where I reverse engineered Java code to generate Class Diagrams and package diagrams.

It will help us to build Sequence Diagram which may server your pupose.

I feel it is more efficient than trying an Eclipse Plugin.

I have not tried this

[http://www.vogella.com/articles/UML/article.html#install](http://www.vogella.com/articles/UML/article.html#install)

whether it will reverse engineer the java code

# c# - 在打开多个客户端的情况下通过 UDP 将数据发送到目的地

> ID：12422033
> 
> 赞同：0
> 
> 时间：2012-09-14T09:47:19.407
> 
> 标签：c#, udp

我目前正在使用此功能将数据从服务器发送到客户端

```
private static void send_message(string ip, string message)
{
    byte[] packetData = System.Text.UTF8Encoding.UTF8.GetBytes(message);

    int port = 11000;

    IPEndPoint ep = new IPEndPoint(IPAddress.Parse(ip), port);
    Socket client = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
    client.SendTo(packetData, ep);
} 
```

但这意味着目标 IP/端口只能打开一个客户端来接收数据，因为打开两个客户端意味着一个客户端可以检索用于另一个客户端的数据（如果我是正确的）.. 我该如何解决这？

接收功能：

```
private static Int32 port = 11000;
private static UdpClient udpClient = new UdpClient(port);

public static void receive_threaded()
{
    Thread t = new Thread(() =>
    {
        while (true)
        {
            IPEndPoint remoteIPEndPoint = new IPEndPoint(IPAddress.Any, port);
            byte[] content = udpClient.Receive(ref remoteIPEndPoint);

            if (content.Length > 0)
            {
                string message = Encoding.UTF8.GetString(content);
                parseMessage(message);
            }
        }
    });
    t.Start();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:52:41.657

1）您应该实现某种协议，以便您的服务器有一个“众所周知的”端口来接受连接。使用此端口通知您的客户端客户端必须连接的另一个端口。为每个客户端使用不同的端口。

您的客户端在 11000 处连接到服务器。您的服务器为客户端分配了一个唯一端口，假设第一个客户端为 11001。然后服务器在11001打开一个连接，客户端在11000关闭连接，在11001打开一个新连接接收数据。

2）为什么是UDP？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T22:33:03.503

我不明白为什么你需要打开一个新的套接字。从他们发送给您的第一个数据包中，您已经拥有每个客户的地址和端口。只需将数据包发送到该地址：端口。我也绝对没有得到设置额外端口的其他建议。

# eclipse - Eclipse CDT 中构建结果和问题视图之间的差异

> ID：12422036
> 
> 赞同：2
> 
> 时间：2012-09-14T09:47:28.790
> 
> 标签：eclipse, eclipse-cdt

我在 Windows 机器上使用 Eclipse 4.2、CDT 和 MinGW 工具链（尽管我觉得问题与这个特定配置无关）。G++ 编译器是 4.7

我正在使用 c++11 功能，使用以下代码：

```
#include <iostream>
#include <iomanip>
#include <memory>
#include <vector>
#include <list>
#include <algorithm>
using namespace std;

int main( int argc, char* argv[] )
{
    vector<int> v { 1, 2, 3, 4, 5, 6, 7 };
    int x {5};
    auto mark = remove_if( v.begin(), v.end(), [x](int n) { return n<x; } );
    v.erase( mark, v.end() );
    for( int x : v ) { cout << x << ", "; }
    cout << endl;
} 
```

一切都是非常直接和惯用的c ++ 11。代码在命令行上编译没有问题（g++ -std=c++11 hello.cpp）。
为了让这段代码编译在eclipse中，我将编译器设置为支持C++11：

1.  属性 -> C/C++ 构建 -> 设置 -> 杂项 -> 其他标志：
    我正在添加 -std=c++11
2.  属性 -> C/C++Build -> 发现选项 -> 编译器调用参数：
    添加 -std=c++11

这是我对全局首选项或项目属性所做的唯一更改。

**第一个问题：**为什么我必须在两个地方更改标志？何时使用每个编译器标志？

如果我按 Ctrl-B，项目将按预期成功构建，并从 Eclipse 中运行它会显示预期结果（打印：'5、6、7'）。

但是，编辑器视图在“remove_if”行和“v.erase”行都显示红色错误标记。同样，问题视图显示我有这两个问题。查看问题的详细信息，我得到：

*   对于 remove_if 行：'无效的参数。候选人是：#0 remove_if(#0, #0, #1)
*   对于擦除行：'无效的参数候选人是：'？擦除（？），？擦除（？，？）'

**第二个问题**：似乎有两种不同的构建：一种用于持续状态，一种用于实际构建。是对的吗？如果是这样，它们是否有不同的规则（编译标志、包含路径等）？

**第三个问题**：在问题详细信息中我还看到：“索引器发现名称解析问题”。我想这就是错误消息如此神秘的原因。这些消息是来自 MinGW g++ 编译器还是来自 Eclipse？这个名称解析是什么？我该如何解决？

感谢你的帮助。

编辑（回复@Eugene）：谢谢尤金。我在 Eclipse 上打开了一个错误。我认为 C++11 只是部分原因。我已经从 C++11 的东西中清除了我的代码，并从两个编译开关中删除了 -std=c++11 标志。然而，CodAn 在 remove_if 行上狂吠：

```
int pred( int n ) { return n < 5; }

int main( int argc, char* argv[] )
{
    vector<int> v;
    for( int i=0; i<=7; ++i ) { 
        v.push_back( i );
    }

    vector<int>::iterator mark = remove_if( v.begin(), v.end(), pred );
    v.erase( mark, v.end() );

    for( vector<int>::iterator i = v.begin(); i != v.end(); ++i ) {
        cout << *i << ", ";
    }
    cout << endl;
} 
```

代码编译得很好（使用 Ctrl-B），但 CodAn 不喜欢 remove_if 行，说：**Invalid Arguments, Candidates are '#0 remove_if(#0,#0,#1)'**。这是一条非常神秘的消息 - 它似乎错过了替换格式字符串中的参数（#0 表示“迭代器”，#1 表示“谓词”）。我要更新错误。

有趣的是，使用 'list' 而不是 'vector' 可以清除错误。

但是，至于我的问题，我很好奇 CodAn 是如何工作的。它是使用 g++（带有一组定制的标志）还是其他外部工具（lint？），还是在 Java 内部使用？如果有一个工具，我怎样才能得到它的命令行参数和它的输出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T16:13:09.947

1.  构建/设置 - 这些标志将包含在您的 makefile 中以进行实际构建。构建/发现 - 当 IDE 发现“扫描仪设置”时，这些标志将传递给编译器。IDE 将以特殊模式运行编译器以发现预定义宏的值、包含路径等。

我相信，您看到的问题是由“Codan”检测到的。Codan 是 CDT 编辑器中内置的静态分析，您可以在“C/C++ 常规”/“代码分析”中找到它的设置。如果您认为显示的错误是虚假的，您应该将问题报告给 bugs.eclipse.org。请注意，CDT 尚不支持所有 C++11 功能。

# animation - 如何正确设置带有重复动画的 Cocos2D 动画序列

> ID：12422037
> 
> 赞同：0
> 
> 时间：2012-09-14T09:47:31.963
> 
> 标签：animation, cocos2d-iphone

播放动画序列的推荐方法是什么，其中包括作为结尾的重复动画。例如，这里有几个场景：

1.  Sprite 出现在屏幕上，播放介绍动画，然后永远重复“空闲”动画
2.  带有“空闲”动画的精灵执行一些动作，因此我需要播放一些其他特定的动画，在这些动画结束时，精灵应该再次开始空闲。

CCSequence 不允许我这样做，因为“空闲”动画被包装到 CCRepeatForever 中。如果我只是选择在空闲动画之上运行我喜欢的任何动画，我会得到帧闪烁（看起来两个动画是同时播放的）——太糟糕了。

所有动画都在 CCAnimationCache 内......任何建议都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:00:35.553

不知道有没有推荐的方法。我要做的是延迟运行第二个动画（重复的动画），或者通过动画完成处理程序将其链接到第一个动画。

进行链接的一种简单方法是在第一个动画的末尾添加一个`CCCallFunc`动作，就像这里一样，这将调用触发第二个动画：

```
CCActionInterval* action = [CCSequence actions:
           [CCProgressFromTo actionWithDuration:duration_ from:100.f to:0.f],
           [CCCallFunc actionWithTarget:self selector:@selector(startSecondAction)],
           nil ]; 
```

# java - Java 堆分布概念查询

> ID：12422039
> 
> 赞同：0
> 
> 时间：2012-09-14T09:47:35.970
> 
> 标签：java, jakarta-ee, memory, memory-management

我正在使用以下 GC 内存参数：

export MEM_OPTS="-Xmx2900m -Xms2900m -XX:NewSize=786m -XX:MaxNewSize=786m -XX:+UseTLAB -XX:MaxPermSize=128m"

我使用的是 32 位 JVM。我的服务器 RAM 是 10 GB。

从甲骨文网站，我得到了

> 为什么我不能使用 32 位 JVM获得**更大的堆？**

32 位 JVM的最大理论**堆限制**为 4G。由于各种额外的限制，例如可用交换、内核地址空间使用、内存碎片和 VM 开销，**实际上限制可以低得多**。在大多数现代 32 位 Windows 系统上，最大堆大小范围为 1.4G 到 1.6G。在 32 位 Solaris 内核上，地址空间限制为 2G。在运行 32 位 VM 的 64 位操作系统上，最大堆大小可能更高，在许多 Solaris 系统上接近 4G。从 Java SE 6 开始，不支持 Windows /3GB boot.ini 功能。如果您的应用程序需要非常大的堆，您应该在支持 64 位应用程序的操作系统版本上使用 64 位 VM。有关详细信息，请参阅 Java SE 支持的系统配置。

好的。现在**假设**我的 32 位服务器可以占用 3.2 GB。据我所知：

> ```
> -Xmx is the total heap memory
> -XX:NewSize / -XX:MaxNewSize is the range of the size of the new generation inside that heap
> the difference is the range of the size of the old generation
> -XX:PermSize / -XX:MaxPermSize is the range of the size of the permanent generation, which is the non-heap memory 
> ```

据此，3.2 GB 不应包含 PermSize，因为这不是堆内容。对吗？

如果我错了，请告诉我。

我可以在 Xmx 和 NewSize 中划分 3.2 GB。对 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:50:10.440

NewSize 是最大堆大小的一部分。它必须更小。

如果你有 Java 6，我会使用 64 位 JVM，因为它会让你的生活更简单。;) 除非您必须使用 32 位共享库，否则没有什么不好的地方。

BTW`-XX:+UseTLAB`是默认值。

# javascript - 用 jquery 附加 html 但没有样式

> ID：12422042
> 
> 赞同：0
> 
> 时间：2012-09-14T09:47:49.893
> 
> 标签：javascript, jquery, jquery-mobile

我正在向我的网页添加一些带有 js 的 li，对于这个 li，我使用一些 jquery 移动样式表：为了加载 js，我使用以下代码：

```
$(document).bind('pageshow', function () {
    LoadLaadPalen.init();
} 
```

然后将使用此代码：

```
var myData = [
    {"Identifier":1,"Naam":"NOT Given","Adres":"Kopenhagen 9","Postcode":"0000LL","Plaats":"NOT Given","Longitude":"0.00000","Latitude":"0.00000"},
    {"Identifier":2,"Naam":"NOT Given","Adres":"NOT Given 1","Postcode":"0000LL","Plaats":"Rotterdam","Longitude":"0.00000","Latitude":"0.00000"},
    {"Identifier":3,"Naam":"NOT Given","Adres":"NOT Given 6","Postcode":"0000LL","Plaats":"Rotterdam","Longitude":"0.00000","Latitude":"0.00000"},
    {"Identifier":4,"Naam":"NOT Given","Adres":"NOT Given 1","Postcode":"0000LL","Plaats":"Den Haag","Longitude":"0.00000","Latitude":"0.00000"},
    {"Identifier":5,"Naam":"NOT Given","Adres":"NOT Given 218","Postcode":"0000LL","Plaats":"Zoetermeer","Longitude":"0.00000","Latitude":"0.00000"}
];

$('.result').append("moi");

var items = [];
$.each(myData, function(index, element) {
    $('.greenfluxlist').append('<a href="#" rel="external"><li id="' + element.Identifier + '"><h3>' + element.Naam + '</h3><p>' + element.Adres +  '</p></li></a>');
}); 
```

这必须附加到本节：

```
<div data-role="content" data-theme="a">
    <div id="laadpalen">
        <p><strong>Op deze locaties zijn laadpunten aanwezig:</strong></p>
        <div class="result">
            <ul class="greenfluxlist" data-role="listview" data-inset="true"></ul>
        </div>
    </div>
</div> 
```

但不幸的是，我看不到任何风格。我只看到带有文本和蓝色标准链接的项目符号。而且如果我要检查源代码，没有任何 html li 代码，但在网页上我看到它们...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T10:39:53.330

看看你的 <li> 定义。它应该以 <li> 开头：

```
<li><a href="bmw.html">BMW</a></li> 
```

您的格式不正确：

```
<a href="#" rel="external"><li id="' + element.Identifier + '"><h3>' + element.Naam + '</h3><p>' + element.Adres +  '</p></li></a> 
```

尝试按照我向您展示的那样去做：

```
<li><a class=contact href="#" id="' + data.response[key].id + '" ><h1>' + data.response[key].label + '</h1><p>'+ data.response[key].customer + '</p></a></li> 
```

以 <li> 开头，而不是 href :P 如果出现问题，请查看：[jQuery docs](http://jquerymobile.com/test/docs/lists/docs-lists.html)。记得触发然后刷新列表：

```
$('.greenfluxlist').trigger('create');
$('.greenfluxlist').listview('refresh'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:04:55.157

尝试添加如下内容：

```
$('.greenfluxlist').listview('refresh'); 
```

我可以给你举个例子。第一个附加函数：

```
function success(data)
            {
                var html ='';
                $.each(data.response, function(key, value) {
                html += '<li><a class=contact href="#" id="' + data.response[key].id + '" ><h1>' + data.response[key].label + '</h1><p>'+ data.response[key].customer + '</p></a></li>';
                $('#contact_listview').append($(html));
                html='';
                });
                $('#contact_listview').trigger('create');    
                $('#contact_listview').listview('refresh');
                $.hidePageLoadingMsg;
            } 
```

现在是 html 定义：

```
<ul data-role="listview"  id="contact_listview" data-filter="true">

</ul> 
```

# javascript - YouTube 在加载时强制全屏

> ID：12422045
> 
> 赞同：0
> 
> 时间：2012-09-14T09:47:57.210
> 
> 标签：javascript, jquery, youtube, youtube-api

我查看了 YouTube API，似乎很清楚（出于安全原因）播放器（是否嵌入）不允许 YouTube 视频在加载后自动启动全屏。

我想知道是否有一种方法可以使用 Javascript 来表现得就像用户按下了全屏按钮一样？

任何分享的想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:06:07.853

恐怕您不能使用 YouTube 播放器 API 以编程方式启动全屏。

这是因为 flash 和 html5 视频中全屏的潜在问题会使这种 api 方法严重容易出错。

官方回应支持我：

[https://groups.google.com/forum/#!msg/youtube-api-gdata/Tyv3vTw0RQk/449KahYVNFYJ](https://groups.google.com/forum/#!msg/youtube-api-gdata/Tyv3vTw0RQk/449KahYVNFYJ)

# c++ - 计数选择 PostgreSQL 的列

> ID：12422046
> 
> 赞同：0
> 
> 时间：2012-09-14T09:47:59.050
> 
> 标签：c++, linux, postgresql

我在一张桌子上做一个选择我知道我使用了多少结果

> PQntuples()

功能 。但是我怎样才能得到列数呢？有什么功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:52:45.280

是的，`PQnfields(const PGresult*)`- [http://www.postgresql.org/docs/current/static/libpq-exec.html](http://www.postgresql.org/docs/current/static/libpq-exec.html)

# java - 从命令行更改 Swing 字体大小

> ID：12422048
> 
> 赞同：6
> 
> 时间：2012-09-14T09:48:10.273
> 
> 标签：java, swing

我正在使用一个 Swing 应用程序，它在我的计算机上以非常小的字体显示文本。

有没有办法从命令行或使用某种配置文件（例如，类似`swing.properties`文件）更改字体大小或某种 DPI 设置？

我无权访问源代码。

* * *

**编辑：**

自 Java 9 以来，小字体不再是问题[。Swing 已开始根据屏幕分辨率缩放其 GUI 组件](https://docs.oracle.com/javase/9/whatsnew/toc.htm#d4273e133)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T12:16:56.493

没有用于更改 Swing 字体大小的命令行开关。您需要做的是调用以下方法：

```
public static void adjustFontSize(int adjustment) {

    UIDefaults defaults = UIManager.getDefaults();
    List<Object> newDefaults = new ArrayList<Object>();
    Map<Object, Font> newFonts = new HashMap<Object, Font>();

    Enumeration<Object> en = defaults.keys();
    while (en.hasMoreElements()) {
        Object key = en.nextElement();
        Object value = defaults.get(key);
        if (value instanceof Font) {
            Font oldFont = (Font)value;
            Font newFont = newFonts.get(oldFont);
            if (newFont == null) {
                newFont = new Font(oldFont.getName(), oldFont.getStyle(), oldFont.getSize() + adjustment);
                newFonts.put(oldFont, newFont);
            }
            newDefaults.add(key);
            newDefaults.add(newFont);
        }
    }
    defaults.putDefaults(newDefaults.toArray());
} 
```

其中`adjustment`是应该添加到每个字体大小的点数。

如果您无权访问源代码，您始终可以在调用的地方编写自己的包装器主类

```
 UIManager.addPropertyChangeListener(new PropertyChangeListener() {
        public void propertyChange(PropertyChangeEvent event) {
            if (event.getPropertyName().equals("lookAndFeel")) {
                adjustFontSize(5);
            }
        }
    }); 
```

在调用实际应用程序的主要方法之前。

但是，如果字体大小非常小，则可能已明确设置，因此更改默认值可能无济于事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T12:02:55.890

我不认为有这样的选项，因为所有组件字体大小都是在外观 (L&F) 默认值中定义的。有些 L&F 允许快速更改字体，有些则不允许。在大多数情况下，您应该能够通过更改 UI 默认值来更改字体大小：

```
UIManager.put ( "Button.font", new SwingLazyValue ( "javax.swing.plaf.FontUIResource", null, new Object[]{ fontName, fontStyle, fontSize } ) );
UIManager.put ( "Label.font", new SwingLazyValue ( "javax.swing.plaf.FontUIResource", null, new Object[]{ fontName, fontStyle, fontSize } ) );
UIManager.put ( "TextField.font", new SwingLazyValue ( "javax.swing.plaf.FontUIResource", null, new Object[]{ fontName, fontStyle, fontSize } ) ); 
```

等每个组件。

而且我不确定这些值是否可以在不更改其代码的情况下传递给应用程序，或者至少在应用程序内部支持一些字体大小更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T23:35:30.580

我尚未对其进行测试，但您可以尝试启动该应用程序。使用[Java Web 开始](https://stackoverflow.com/tags/java-web-start/info)。它甚至允许为沙盒应用程序指定`swing.useSystemFontSettings`&之类的属性。`swing.metalTheme`这样做可能会“覆盖”代码中设置的小字体。

有关更多详细信息，请参阅[JNLP 文件语法](http://docs.oracle.com/javase/7/docs/technotes/guides/javaws/developersguide/syntax.html#intro)。

# c# - 完成安装后，模拟无法运行已安装的应用程序

> ID：12422057
> 
> 赞同：0
> 
> 时间：2012-09-14T09:48:50.657
> 
> 标签：c#, wix, windows-installer, impersonation

我有一个小应用程序和一个 wix 设置。它会自动从服务器下载应用程序更新并以重新安装模式启动它并完成它启动更新的 exe 文件。但是安装程序在启动 exe 时
显示错误。 如果我说忽略，那么它工作正常。 所以它只发生在. 这似乎是失败的。`Debug assertion failed`

`Standard User``impersonation`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:22:32.803

MSI 是小升级吗？升级有用吗？

我不确定模仿的角度是什么。我以前做过这种模式，我从 UI 序列中的“设置完成”对话框启动应用程序。在这种情况下，它是一个即时的自定义操作（从 DoAction ControlEvent 调用）并且不涉及模拟。

# javascript - 为什么javascript将0视为空字符串？

> ID：12422064
> 
> 赞同：27
> 
> 时间：2012-09-14T09:49:05.627
> 
> 标签：javascript, if-statement, comparison

> **可能重复：**
> [隐含的字符串比较，0=''，但 1='1'](https://stackoverflow.com/questions/462663/implied-string-comparison-0-but-1-1)

在javascript中执行以下案例，我得到0等于''（一个空字符串）

```
var a   =   0;
var b   =   '';//empty string
if(a==b){
    console.log('equal');//this is printed in console
}else{
    console.log('not equal');
} 
```

谁能指导一下这背后的原因是什么？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-09-14T09:50:18.330

引用文档（[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators)）：

> **相等 (==)**
> 
> 如果两个操作数的类型不同，JavaScript 会转换操作数，然后应用严格比较。如果任一操作数是数字或布尔值，则尽可能将操作数转换为数字；否则，如果任一操作数是字符串，则尽可能将另一个操作数转换为字符串。

由于`a`这里的操作数类型是`Number`，因此也`b`被转换为 Number 。并`Number('')`评估为`0`。

有时这可能非常令人惊讶。考虑一下，例如：

```
console.log(0 == '0');  // true
console.log(0 == '');   // true
console.log('' == '0'); // O'RLY? 
```

... 或这个：

```
console.log(false == undefined); // false
console.log(false == null);      // false
console.log(null == undefined);  // fal.... NO WAIT! 
```

...这正是为什么几乎总是建议使用`===`（严格相等）运算符的原因。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-14T09:51:32.187

`0`, `""`（空字符串），`false`在类型转换时，在技术上都具有相同的值。如果你需要严格对待它们，你可以使用`===`.

类似的编程语言也是如此，比如 PHP。

```
var a = 0;
var b = ''; //empty string
if(a == b){
    console.log('equal'); //this is printed in console
}else{
    console.log('not equal');
} 
```

### 进行严格的比较：

```
if(a === b){
    console.log('equal');
}else{
    console.log('not equal'); //this is printed in console
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T09:50:28.927

`==`javascript 中的运算符不比较类型，因此`0=='' === true`（因为数字字符串的`''`计算结果为 0）或`0==false === true`（因为 bool`false`的计算结果为`0`）比较类型，您可以使用`===`operator.

[在这里](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators)，您将找到有关比较的有用信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T09:50:25.657

Javascript 会自动转换不同类型的变量进行比较。这是非严格类型语言的一个共同特征。

如果您需要比较变量并检查类型，请使用`===`运算符。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-14T09:50:38.947

在大多数编程语言（包括 javascript）`""`中，（字符串）、`0`（整数）、`\x0`（null）都失去了相同的意思：“空”。发生的事情是您的 javascript 引擎发现`"" == 0`错误，因为`==`它转换`0`为整数。这又是假的，所以它转换`0`为 null 是假的，然后它转换`0`为一个空字符串。（不确定这是否是正确的转换顺序）。要使条件“完全”匹配（无转换），请使用`===`代替`==`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-14T09:50:48.387

== 进行类型转换。*始终*使用 ===。

在您的示例中，b 的空字符串被转换为 0。所以 a 和 b 都是相同的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-14T09:51:05.297

因为表示为数字的空字符串为零。如果你比较苹果和橙子，你应该想想如果你的橙子是苹果，它会是什么样子。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-09-14T09:51:05.357

因为胁迫。`===`在 JavaScript 中用于比较通常是一个更好的主意。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-09-14T09:51:10.013

因为`==`检查值相等所以`false`，`0`并且空字符串是相等的。使用身份检查`===`。

# c++ - 对当前对象的引用存储在内存中的什么位置？

> ID：12422068
> 
> 赞同：1
> 
> 时间：2012-09-14T09:49:15.657
> 
> 标签：c++, compiler-construction, compilation

我有一个简单的问题。我知道在编译程序后，当我调用一个函数时，会生成一个调用堆栈，其中包含参数、本地变量的空间、返回点和我负责的寄存器。

但是在像 c++ 这样的面向对象语言中，编译器将当前对象的引用存储在哪里？`object->instanceMethod()`将对象指针像参数一样存储在调用堆栈中？

我知道这个问题是多面手，感谢您的回答

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T09:53:03.590

它是实现定义的，但实际上您会发现大多数（全部？）C++ 编译器生成的代码将`this`指针作为隐藏的第一个参数传递给函数，因此您无需在方法签名中明确指定它即可访问它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T09:55:11.897

在 C++ 中，当一个成员函数被调用时，指向它将在其上运行的实例的指针（即`this`函数内部的内容）与其他函数参数/参数一起隐式传递。实际上，不同的系统使用不同的约定，因此可以将一些此类参数打包到寄存器中并且永远不会放在堆栈中（这往往会更快），但是您的概念基本上是合理的。

# sql - 通过多个数据库上的事务执行 SQL 脚本

> ID：12422070
> 
> 赞同：0
> 
> 时间：2012-09-14T09:49:20.237
> 
> 标签：sql, sql-server, vb.net

我们正在尝试实施一个修补客户端软件的程序 - 最初将运行一个 .SQL，但如果脚本在任何时候失败，我们将回滚数据库并停止客户端 DLL 导入过程的工作。

我们的 SQL 脚本有“GO”语句，因此我们无法组合一个漂亮的存储过程来使用`sp_executesql`，因为这不允许“GO” - 相反，如果我们有一个如下所示的 SQL 脚本：

```
USE [SomeDatabase]

BEGIN TRANSACTION
GO
IF ( OBJECT_ID(N'[dbo].[ProcedureToUpdate]') IS NOT NULL ) 
    DROP PROCEDURE [dbo].[ProcedureToUpdate]
GO
IF @@ERROR <> 0
    AND @@TRANCOUNT > 0 
    ROLLBACK TRAN
GO
IF @@TRANCOUNT = 0 
    BEGIN
        --Flag that the procedure hasn't been dropped, begin another transaction
        BEGIN TRANSACTION
    END
GO

PRINT 'Creating procedure'
GO

CREATE PROCEDURE [dbo].[ProcedureToUpdate]
AS 
    SELECT  *
    FROM    [dbo].[SomeTable] st
            INNER JOIN [dbo].[AnotherTable] at ON st.PK = at.fk

GO

IF @@ERROR <> 0
    AND @@TRANCOUNT > 0 
    ROLLBACK TRAN
GO
IF @@TRANCOUNT = 0 
    BEGIN
        --Flag that the procedure hasn't been created, begin another transaction
        BEGIN TRANSACTION
    END
GO 
```

然后，我们在 .NET 中的事务中为相关数据库执行每个“操作”（由 go 语句拆分） - 如果循环内的任何内容失败，这将回滚数据库。

```
 Using con As New SqlConnection(ConnectionString)
    con.Open()
    Dim cmd As SqlCommand = con.CreateCommand()
    Dim transaction As SqlTransaction = con.BeginTransaction("Upgrade")
    cmd.Connection = con
    cmd.Transaction = transaction
    Try
      For Each transactionalScript In transactionalScripts
        cmd.CommandText = transactionalScript
        Dim result = cmd.ExecuteNonQuery()
      Next
      transaction.Commit()
    Catch ex As Exception
      Log(String.Format("{0} : Script Failed", DateTime.Now.ToString()))
      Log(String.Format("{0} : Reason: {1}", DateTime.Now.ToString(), ex.Message))
      transaction.Rollback("Upgrade")
      Log(String.Format("{0} : Database rolled back", DateTime.Now.ToString()))
    End Try
  End Using 
```

最后 - 这是我的问题。我们需要处理多达 4 个 .SQL 脚本，每个脚本将用于单个服务器上的不同数据库。如果 4 个脚本中的任何一个失败，我们应该回滚脚本影响的每个数据库 - 有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:59:39.273

看看使用[`TransactionScope`](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)。

如果您在 a 中使用多个连接，`TransactionScope`则会征用分布式事务。这有它自己的要求（例如 DTC），但这肯定是您想要开始寻找的地方。

# sql-server-ce - SQL Server CE 3.0 - 试图读取或写入受保护的内存。这通常表明其他内存已损坏

> ID：12422074
> 
> 赞同：1
> 
> 时间：2012-09-14T09:49:29.917
> 
> 标签：sql-server-ce

我有一个`.sdf`3.0 版的 SQL Server CE 数据库文件 ( ) 已损坏。我正在尝试修复此文件。

使用 SQL Server CE 3.1 参考`System.Data.SqlServerCe`，当我尝试使用 engine.Repair 或 engine.compact 修复/压缩文件时，它会给出错误消息

> *AccessViolationException - 试图读取或写入受保护的内存。这通常表明其他内存已损坏。*

有没有人遇到过类似的问题并有解决方案？

# cocos2d-iphone - 正确的滑动手势识别器 iOS

> ID：12422075
> 
> 赞同：18
> 
> 时间：2012-09-14T09:49:31.640
> 
> 标签：cocos2d-iphone, box2d, box2d-iphone

我还没有找到关于如何正确设置 iOS 手势识别器的教程。我需要检测上下滑动以及它们的回调。

任何帮助，不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-09-14T09:55:01.410

您需要两个识别器，一个用于向上滑动，另一个用于向下滑动：

```
UISwipeGestureRecognizer* swipeUpGestureRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipeUpFrom:)];
swipeUpGestureRecognizer.direction = UISwipeGestureRecognizerDirectionUp; 
```

对于处理程序：

```
- (void)handleSwipeUpFrom:(UIGestureRecognizer*)recognizer {

} 
```

最后，将它添加到视图中：

```
[view addGestureRecognizer:swipeUpGestureRecognizer]; 
```

另一个方向相同（只需将所有`Up`s 更改为`Down`s）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-01T09:13:11.053

这在 Xcode 7.3 中对我有用。，斯威夫特 2.2。

```
import UIKit

class Viewcontroller: UIViewController
{
    override func viewDidLoad()
    {
        super.viewDidLoad()
        createAndAddSwipeGesture()
    }

    private func createAndAddSwipeGesture()
    {
        let swipeGesture = UISwipeGestureRecognizer(target: self, action: #selector(Viewcontroller.handleSwipeLeft(_:)))
        swipeGesture.direction = UISwipeGestureRecognizerDirection.Left
        view.addGestureRecognizer(swipeGesture)
    }

    @IBAction func handleSwipeLeft(recognizer:UIGestureRecognizer)
    {
        print(" Handle swipe left...")

    }
} 
```

# php - 从实体调用存储库方法

> ID：12422079
> 
> 赞同：2
> 
> 时间：2012-09-14T09:49:41.390
> 
> 标签：php, doctrine-orm

是否可以在实体上调用存储库方法？我的意思是这样的

```
$article = $em->getRepository('Entities\Articles')->findOneBy(array('id' => $articleId));
$category = $em->getRepository('Entities\Categories')->findOneBy(array('id' => 86));

$article->addArticleToCategory($category); 
```

其中 addArticleToCategory 是存储库中的方法（只是示例代码）

```
public function addArticleToCategory($category){
    $categoryArticles = new CategoryArticles();
    $categoryArticles->setArticle(!!/** This is where I want to have my variable $article from this method call **/!!);
    $categoryArticles->setCategory($category);
    $this->getEntityManager()->persist($categoryArticles);
    $this->getEntityManager()->flush();
} 
```

最好的方法是什么？

另外我想知道将自定义设置/创建方法放在存储库中是一种好习惯吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T09:55:15.170

根据定义，您不能从实体对象调用存储库类的方法……这是基本的面向对象编程。

我认为您应该在实体中创建`addArticle`函数，如下所示：`Category`

```
function addArticle($article)
{
   $this->articles[] = $article;
   $article->setCategory($this);
} 
```

然后你做

```
$article = $em->getRepository('Entities\Articles')->findOneBy(array('id' => $articleId));
$category = $em->getRepository('Entities\Categories')->findOneBy(array('id' => 86));

$category->addArticle($article);
$em->persist($category);
$em->flush(); 
```

如果级联配置正确，这将起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:35:37.090

您可以编写自己的存储库管理器并根据需要创建方法。

[http://docs.doctrine-project.org/en/2.0.x/reference/working-with-objects.html#custom-repositories](http://docs.doctrine-project.org/en/2.0.x/reference/working-with-objects.html#custom-repositories)

# sass - 指南针给了我错误的精灵路径

> ID：12422080
> 
> 赞同：9
> 
> 时间：2012-09-14T09:49:47.373
> 
> 标签：sass, compass-sass

config rb 正在运行默认值。文件夹结构也是默认的。

在我的 scss 文件中，我这样做了。

```
@import "icons/*.png";

@mixin sprite_css($name) {
@include icons-sprite($name);
height: icons-sprite-height($name);
width: icons-sprite-width($name);
display:block;
}

.btn {@include sprite_css(deltag);}  //deltag is the name of a png image in the sprite. 
```

在此之前，我在 images 文件夹下创建了一个文件夹，称为图标，我将所有 png 文件放入其中。

生成的 css 代码如下所示。

```
.icons-sprite, .icons-deltag, .icons-deltag_grey, .icons-deltag_mouseover, .icons-facebook_del, .icons-faneblad, .icons-soegefelt, #container .btn, #container .btn_over {
background: url('/images/icons-s93e62b2fff.png') no-repeat;
}` 
```

请注意，背景路径设置为没有图像文件夹前面的尾随点，因此我放置在样式表文件夹中的 CSS 文件现在正在样式表文件夹中查找图像文件夹，因此显然没有加载文件。无论如何，我似乎无法改变这一点。将配置 rb 更改`relative_assets = true`为不起作用。

我希望 css 文件将 sprint 指向。

```
background: url('../images/icons-s93e62b2fff.png') no-repeat; 
```

那是正确的路径，我该如何实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T20:02:06.183

`config.rb`每次运行 Compass 命令时都会加载Compass文件。如果您正在运行`compass watch`，则必须退出该进程，然后重新启动它才能重新加载对`config.rb`文件的更改。

# eclipse - Eclipse 不再找到已安装的 JRE

> ID：12422091
> 
> 赞同：2
> 
> 时间：2012-09-14T09:50:34.857
> 
> 标签：eclipse, jvm, eclipse-indigo, openjdk, eclipse-juno

我的 Eclipse 不再找到已安装的 JRE。尝试设置它们时，我收到一条错误消息，我将其作为图片附加。我在 ubuntu 12.04 上运行 eclipse，我的旧 Eclipse 3.7.2 和刚刚下载的 4.2 版本都不起作用。弹出相同的错误消息。我尝试使用不同的 Java 版本（update-alternatives java），从 openjdk-6 更改为 openjdk-7，同样的错误。将 eclipse.ini 中的参数更改为`-vm`我想使用的 java 路径（版本），但仍然出现错误。我不知道我还能尝试什么...

非常感谢您的帮助。![在此处输入图像描述](../Images/bf0e3b5b2c6fd6d2c91c44641a95525c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T14:23:16.613

在[询问 ubuntu的](https://askubuntu.com/)[这个答案](https://askubuntu.com/a/187043/1058)之后，我已经修复了这个错误：只需启动一个.`sudo apt-get --reinstall install tzdata-java`

# google-app-engine - GAE 中的拉取队列是否表现出一致的 FIFO 行为？

> ID：12422094
> 
> 赞同：6
> 
> 时间：2012-09-14T09:50:39.057
> 
> 标签：google-app-engine

App Engine 中的推送队列一般是[FIFO 队列](https://developers.google.com/appengine/docs/java/taskqueue/overview-push#The_Rate_of_Task_Execution)，但是从链接文档中可以看出，在队列有大量任务积压的情况下，调度程序可能会将新任务跳转到队列头部以试图减少潜伏。

这种超前跳转对于负载重的应用程序是有意义的，但这意味着不能保证 FIFO 行为是一致的。

现在的问题是，拉队列怎么样？上述行为在推送队列中是有意义的，但在拉取队列中则不那么有意义，因为从拉取队列中租用任务和扩大工作人员数量的责任落在了应用程序本身。如果拉队列中不存在队列前跳跃行为，是否意味着拉队列始终表现出 FIFO 行为？

此外，我似乎在[官方拉队列文档中找不到任何关于任务排序的文档](https://developers.google.com/appengine/docs/java/taskqueue/overview-pull)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:24:32.807

不，在任何一个拉队列中都没有排序保证。

虽然通常会首先租用具有最旧 ETA 的任务，但不能保证会如此。您的应用程序应该能够处理以任何顺序从队列中取出的任务。

# java - Freemarker：if 语句中的枚举

> ID：12422105
> 
> 赞同：23
> 
> 时间：2012-09-14T09:51:01.490
> 
> 标签：java, freemarker

在我的 if 语句中，我想将一个变量（JDK 1.5 枚举）与枚举文字进行比较。例如：

```
<#if type == ProblemStatisticType.BEST_SOLUTION_CHANGED>
  ...
</#if> 
```

但我得到了这个例外：

```
freemarker.core.InvalidReferenceException: Expression ProblemStatisticType is undefined on line 430, column 87 in index.html.ftl.
at freemarker.core.TemplateObject.assertNonNull(TemplateObject.java:125)
at freemarker.core.TemplateObject.invalidTypeException(TemplateObject.java:135) 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-14T13:55:32.587

不幸的是，FreeMarker 语言没有类的概念......但你可以这样做：

```
<#if type.name() == "BEST_SOLUTION_CHANGED">
  ...
</#if> 
```

或者，如果您信任`toString()`enum 类型，则`.name()`可以省略该部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T10:08:21.477

If you want to compare enums you should specify a constant enum value in double quotes like:

```
<#if type == "BEST_SOLUTION_CHANGED">
  ...
</#if> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-29T17:13:52.737

我已经成功使用过这样的东西（在 java 1.6 和 1.7 中，没有尝试过 1.5）：

```
<#if type?? && statics["com.your.package.ContainingClass$TypeEnum"].BEST_SOLUTION_CHANGED.equals(type)>
  Do some freemarker or HTML here
</#if> 
```

这是另一个类中的枚举，例如：

```
class ContainingClass {
   public enum TypeEnum {
    WORST(0),
    BEST_SOLUTION_CHANGED(1);

    private int value;

    private TypeEnum(int value) {
      this.value = value;
    }

    public int value() {
      return this.value;
    }
  };  
} 
```

类型变量在 java 中定义如下：

```
TypeEnum type = TypeEnum.BEST_SOLUTION_CHANGED; 
```

# javascript - JavaScript 仅在 IE 7 中的类问题中传递动态值

> ID：12422108
> 
> 赞同：0
> 
> 时间：2012-09-14T09:51:04.033
> 
> 标签：javascript, jquery, javascript-framework, unobtrusive-javascript

只有在将动态值传递给 javascript 时，我才在 IE7 中遇到问题。如下所示。这适用于除 IE 7 以外的所有浏览器。

```
$val =$id.$i;
echo "<a href='javascript:void(0);' id='network' class=$val value='$octet'>+".$octet.".0.0.0</a> <br />"; 
```

我在 javasript 中捕获了这个值，如下所示

```
$(".msg_body #network").click(function(){
    var network = $(this).attr('value');
    alert(network); // alert fails in IE 7

    var clsName = $(this).attr("class");
    alert(clsName); // alert fails in IE 7 
```

完整的php代码如下

```
<?php 
                $octets = $this->Ip;
                $octetets = $this->octent1;
                $i= 1;
                $id='network';
                foreach($octetets as $octet){
                    $val =$id.$i;

                    echo "<a href='javascript:void(0);' id='network' class=$val value='$octet'>+".$octet.".0.0.0</a> <br />";
                    value='$octet'>+".$octet.".0.0.0</span> <br />";
                    $i++;

                }

            ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:53:43.390

尝试这个：

```
$(".msg_body").on('click', '#network', function(e){
    e.preventDefault();
    var network = $(this).attr('value');
    alert(network); // alert fails in IE 7

    var clsName = $(this).attr("class");
    alert(clsName); // a
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:05:38.547

元素 ID 必须是唯一的，因此不要使用该属性，而是使用另一个类似的名称：

改变你的PHP：

```
<?php 
            $octets = $this->Ip;
            $octetets = $this->octent1;
            $i= 1;
            $id='network';
            foreach($octetets as $octet){
                $val =$id.$i;

                echo "<a href='javascript:void(0);' name='network' class=$val value='$octet'>+".$octet.".0.0.0</a> <br />";
                value='$octet'>+".$octet.".0.0.0</span> <br />";
                $i++;

            }
        ?> 
```

和你的 jQuery：

```
$(".msg_body").on('click', '@network', function(e){
    e.preventDefault();
    var network = $(this).attr('value');
    alert(network); // alert fails in IE 7

    var clsName = $(this).attr("class");
    alert(clsName); // a
}); 
```

# oracle - 如何终止正在运行的 Oracle 程序

> ID：12422113
> 
> 赞同：9
> 
> 时间：2012-09-14T09:51:09.603
> 
> 标签：oracle, stored-procedures

我创建了一个 oracle 程序。在某些情况下，当我从 sqldevoloper 执行它时，我认为它会进入无限循环。它继续生成日志文件。我怎样才能终止这个运行过程？我通过 services.msc 停止了 oracle 服务。当我再次启动它时，正在生成日志文件。我认为该程序仍在运行。我怎样才能终止这些程序。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-14T09:53:45.307

使用 v$session 识别您的会话（挂起）

```
select sid, serial#, status from v$session where USERNAME='NAME'; 
```

然后使用杀死它

```
ALTER SYSTEM KILL SESSION 'SID,#SERIAL'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:53:38.020

```
ALTER SYSTEM KILL SESSION 
```

但是您必须检索会话 ID 并拥有权限。

# vb.net - 在 .NET 4.5 中使用 await 使任务超时

> ID：12422114
> 
> 赞同：0
> 
> 时间：2012-09-14T09:51:11.017
> 
> 标签：vb.net, timeout, task-parallel-library, async-await

我正在 VB.NET 4.5 中尝试 Async / Await 并且如果我的任务在一定时间内没有完成，我希望它超时。我有

```
Await Task.Run( Sub() PerformSomeAction() ) 
```

这看起来很整洁。我还看到有一种带有取消令牌的 Task.Run 形式。如果超时，我如何使用它来取消任务？

**编辑**

我有以下原型解决方案

```
 Dim cts = New CancellationTokenSource()
    Dim ct As CancellationToken = cts.Token
    Dim delay = Task.Delay(1000)
    Dim completed = Await Task.WhenAny(Task.Run(Sub() PerfomSomeAction(ct), ct), delay)
    If completed Is delay Then
            cts.Cancel()
    End If 
```

这看起来很嘈杂的代码。这个好吗？另一个想法是将超时作为异常处理并使用 cts.CancelAfter。像这样的东西？？

```
 Dim cts = New CancellationTokenSource()
    Dim ct As CancellationToken = cts.Token
    try
        cts.CancelAfter(1000) 'ms
        Dim completed = Task.Run(Sub() PerformSomeAction(ct), ct)
    catch SomeTimeoutException
    end try 
```

如果我得到检测到取消令牌，则使用 PerformSomeAction 我会抛出 SomeTimeoutException 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T10:13:44.080

`Task`s 支持协同取消，这意味着如果你想取消一个`Task`已经运行的，里面的代码`Task`必须支持取消，它决定什么时候取消。实现这一点的方法是将取消标记传递给该方法并[`ThrowIfCancellationRequested()`](http://msdn.microsoft.com/en-us/library/system.threading.cancellationtoken.throwifcancellationrequested)在该方法的代码中的适当位置调用。

如果 中的代码`Task`不支持取消，则没有干净的方法可以取消或中止它。

# jquery - 模态窗口上的奇怪加载 - jquery

> ID：12422117
> 
> 赞同：0
> 
> 时间：2012-09-14T09:51:19.227
> 
> 标签：jquery, html, google-chrome, modal-dialog

当您单击模块的任何此图标时： ![在此处输入图像描述](../Images/b89c2d878c65c9405c0dfaf7b72df25b.png)

它打开一个加载 nivoslider 的模式（这是一个外部 html）。

这是加载外部 html 的 moadl 脚本：

```
/* Load Modal-Nivo slider */
$(function ($) {
    // Load dialog on page load
    //$('#basic-modal-content').modal();

    // Load dialog on click
    $('.basic').click(function (e) {
        var src = "nivo/demo.html";
            $.modal('<iframe src="' + src + '" height="330" width="830" style="border:0">', {
                    closeHTML:"",
                    containerCss:{ 
                            height:330, 
                            padding:0, 
                            width:830
                    },
     overlayClose:true
     });
     return false;
 });
 }); 
```

我遇到的问题是，如果您将鼠标光标移出 nivoslider，它会显示它正在加载某些内容，我已经尝试了很多方法来修复它，但我不知道它显示了什么。除此之外，它很好地加载了 nivo，这只是“光标加载”问题，有什么想法可以解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:10:20.440

因为您的叠加层具有这种样式（请参阅 style.css ）

```
#simplemodal-overlay {
  background-color: #000;
  cursor: wait;
} 
```

将光标更改为默认值

# sql-server-2008 - .NET Framework 3.5 安装失败

> ID：12422118
> 
> 赞同：1
> 
> 时间：2012-09-14T09:51:21.863
> 
> 标签：sql-server-2008, installation

我正在尝试安装 SQL Server 2008 Enterprise，但它给我一个错误，提示 Microsoft .NET Framework 3.5 安装失败。

我尝试单独安装 .NET framework 3.5，然后再次安装 SQL Server，但它给出了同样的错误。我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-11T07:31:00.463

> .Net Framework 应该已经内置到 Windows 8 和 10 中，您可以从控制面板启用它。

执行以下操作以在您的 Windows 上启用 .Net Framework

1.  按`Windows + R`键盘上的键。
2.  在“运行”命令框中键入“<em>appwiz.cpl”，然后按“ENTER”。
3.  在“程序和功能”窗口中，单击“打开或关闭 Windows 功能”链接。
4.  检查“<em>.NET Framework 3.5（包括 .NET 2.0 和 3.0）”选项是否可用。
5.  如果是，则启用它，然后单击“确定”。

如果出现提示，请按照屏幕上的说明完成安装并重新启动计算机

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-16T10:10:40.093

在 Windows Server 2008 R2 中，执行以下步骤。

1.  从控制面板打开卸载程序。
2.  单击左侧窗格中的“打开或关闭 Windows”。
3.  在操作菜单中，单击添加功能。
4.  检查 .Net Framework 3.5.1 功能（已安装）并单击下一步。
5.  完成安装，然后继续安装 Ms SQL Server。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T09:57:02.220

您是否尝试删除并重新安装 .Net Framework？您也可以尝试安装 .NET 4.0... 否则，您能否将您的错误消息发送给我们？

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-16T10:29:57.627

1.  按 Windows 键 + R
2.  键入“可选功能”，然后输入。
3.  检查 Microsoft .Net Framework 3.5.1 选项。
4.  按确定。

# jquery - 文件准备好时，fancybox 自动

> ID：12422121
> 
> 赞同：0
> 
> 时间：2012-09-14T09:51:30.533
> 
> 标签：jquery, fancybox

每次加载页面时，我都会加载一个精美的框。但是当fancybox打开时给我这个错误：

> 无法加载请求的内容。请稍后再试。

这是我的代码：

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#inline1").fancybox().trigger('click');
    });
</script>

<div id="inline1" style="display:none;">
    <p>
    Some text
    </p>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T15:17:00.170

如果您使用的是 fancybox **v1.3.4**（很可能），那么您需要将您的`inline`内容包装在一个 hidden 中`div`；换句话说，`inline`（目标）内容不应该具有属性`display: none`，而是父包装器。

所以正确的结构应该是

```
<div style="display:none;">
  <div id="inline1">
    <p> Some text </p>
  </div>
</div> 
```

# remote-debugging - 如何为 mvn tomcat 插件（jpda）设置 agentlib 属性

> ID：12422125
> 
> 赞同：13
> 
> 时间：2012-09-14T09:51:34.060
> 
> 标签：remote-debugging, maven-tomcat-plugin, jpda

与 [Eclipse 调试远程 Web 应用程序](https://stackoverflow.com/questions/11845354)相关=>[如何在我的 Eclipse 中调试远程应用程序](https://stackoverflow.com/questions/1988039)

如何在 mvn tomcat 插件中设置/存档？ [http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/tomcat7-maven-plugin/](http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/tomcat7-maven-plugin/)

唯一可能有帮助的是设置 systemProperty 但这对我不起作用；/

目标：让tomcat通过maven在控制台上运行，但对不同的IDE启用远程调试

（是的，我们可以在 Eclipse WTP 中运行 tomcat！这不是问题；）

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-14T09:59:03.450

```
$ export MAVEN_OPTS=-agentlib:jdwp=transport=dt_socket,address=8000,server=y,suspend=n
$ mvn tomcat7:run-war 
```

^^ 就是这样，不酷（因为它不在 POM 中）但它可以工作

资料来源：[http ://aaronz-sakai.blogspot.de/2009/02/debugging-jetty-when-running-mvn.html](http://aaronz-sakai.blogspot.de/2009/02/debugging-jetty-when-running-mvn.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-24T13:06:07.973

这是一个有点旧的线程，但为了完整起见，我可能会在这里添加一点。

由于任何奇怪的原因，该插件不提供调试选项配置。因此，您唯一的选择是手动为运行该进程的 JVM 指定调试配置。在您的环境中，可以通过三种方式实现此目的：

1.  **使用众所周知的 Maven 环境变量**（如 childno.de 所述）
2.  **直接指定 maven 的选项**（不需要环境变量）：

    > mvn -Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=y tomcat7:run-war

3.  **使用 eclipse 运行配置**这与 2 基本相同）但是您在 eclipse 中定义它（如果您根本不想离开 IDE，那会很好）。为此，您需要指定一个**Maven Build Run 配置**。将目标设置为`tomcat7:run`（或类似），然后导航到**JRE**选项卡。**VM 参数**区域是您指定调试配置的地方：`-Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=y`

如果您选择 3)，则 tomcat7 的精确运行目标与调试启用无关。根据您的用例（动态 Web 项目、战争等）进行选择。插件配置也是如此。但是，请确保在`pluginManagement`项目 pom 的部分中指定您正在使用 tomcat maven 插件：

```
<pluginManagement>
   <plugins>
        <plugin>
        <groupId>org.apache.tomcat.maven</groupId>
        <artifactId>tomcat7-maven-plugin</artifactId>
        <version>2.1</version>
    </plugin>
    </plugins>
</pluginManagement> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-03-07T17:55:57.287

或者...您可以简单地将以下标签添加到您的插件配置中

```
 <jpda>true</jpda> 
```

然后当你执行：mvn tomcat7:run，它会在8000端口启动jpda。

有趣的是，即使我已经对此进行了测试并且它有效，但我在开源代码库中找不到任何代码来解释它为什么有效，也没有找到任何改变默认端口 8000 的方法。

当谈到这个插件的文档时，Apache 似乎已经放弃了。

# java - 如何使用 java swing 在同一树视图中添加复选框和简单节点

> ID：12422128
> 
> 赞同：1
> 
> 时间：2012-09-14T09:51:44.330
> 
> 标签：java, swing, jtree

1）如何在Jtree中添加简单节点（无复选框控件）。

2）或者如何在Jtree中添加复选框节点（带有复选框控件）。

3）使用java swing将所有节点添加到接缝树中。

4）请建议我完成这项任务。

以下是代码示例：

公共类 DynamicTreeView 扩展 JFrame 实现 ActionListener、MouseListener {

```
// cerate varible  
//private CheckTreeSelectionModel selectionModel;
private JTree tree;
private JTextField textBox;
private JButton btnCreateNode;
private JCheckBox chkNode, ch1;
private JScrollPane ScrollPan;
private JPanel pane, pane1;
private DefaultTreeModel model;
private JCheckBox check;
int hotspot;

public DynamicTreeView() {
    hotspot = new JCheckBox().getPreferredSize().width;
    //cerate Panel object  
    pane = new JPanel();
    //cerate JTextField object  
    textBox = new JTextField(10);
    //cerate JButton object  
    btnCreateNode = new JButton("Create Node");
    //cerate JCheckBox object  
    chkNode = new JCheckBox("Has CheckBox");
    //add componet all to  panel
    pane.add(chkNode);
    pane.add(textBox);
    pane.add(btnCreateNode);
    //Register button object
    btnCreateNode.addActionListener(this);
    this.addMouseListener(this);
    //Cerate the Default Root Tree node for Tree
    DefaultMutableTreeNode root = new DefaultMutableTreeNode("Java Tree Example");
    //Cerate the tree object with Default Root Tree node 

    tree = new JTree(root);
    //get the module from tree and add to the DefaultTreeModule
    model = (DefaultTreeModel) tree.getModel();
    //cerate scrollpane object with tree
    ScrollPan = new JScrollPane(tree);
    //scrollpane object add to the form
    //use the border lay out for this form scroll pane is add to the left side of the form
    getContentPane().add(ScrollPan, BorderLayout.WEST);
    //panel object add center of the form
    getContentPane().add(pane, BorderLayout.CENTER);
}

//Main method of the class it's the staring point of the class.
public static void main(String args[]) {
    //set default look of the form on start position.
    DynamicTreeView frame = new DynamicTreeView();
    frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
    frame.setSize(500, 500);
    frame.setVisible(true);
}

@Override
public void actionPerformed(ActionEvent e) {
    if (btnCreateNode.equals(e.getSource())) {

        if (chkNode.isSelected() == true) {
            ch1 = new JCheckBox(textBox.getText());
            TreeCellRenderer render = new TreeCellRenderer() {
                @Override
                public Component getTreeCellRendererComponent(JTree tree, Object value, boolean selected, boolean expanded, boolean leaf, int row, boolean hasFocus) {
                    Component returnValue;
                    if ((value != null) && (value instanceof DefaultMutableTreeNode)) {
                        Object userObject = ((DefaultMutableTreeNode) value).getUserObject();
                        ch1.setText(textBox.getText());
                        ch1.setSelected(selected);
                    }
                    returnValue = ch1;
                    return returnValue;
                }
            };
            JOptionPane.showMessageDialog(this, ch1);
            JTree t = new JTree();
            t.setCellRenderer(render);
            MutableTreeNode newNode = new DefaultMutableTreeNode(t);
            //model = (DefaultTreeModel) tree.getModel();
            TreePath path = tree.getSelectionPath();
            //MutableTreeNode newNode = new DefaultMutableTreeNode();
            MutableTreeNode node = (MutableTreeNode) path.getLastPathComponent();
            //model.insertNodeInto(cr, node, node.getChildCount());
        } else {
            CheckRenderer cr = new CheckRenderer();
            cr.setNode(new DefaultMutableTreeNode(textBox.getText()));
            model = (DefaultTreeModel) tree.getModel();
            TreePath path = tree.getSelectionPath();
            MutableTreeNode newNode = cr.getNode();
            MutableTreeNode node = (MutableTreeNode) path.getLastPathComponent();
            model.insertNodeInto(newNode, node, node.getChildCount());
        }
    }

    SwingWorker sw = new SwingWorker() {
        @Override
        protected Object doInBackground() throws Exception {
            ((DefaultTreeModel) tree.getModel()).reload();
            tree.revalidate();
            tree.repaint();
            ScrollPan.setViewportView(tree);
            return null;
        }
    };
    sw.execute();
} 
```

}

# opengl - 超过 60 fps 的 OpenGL 双缓冲

> ID：12422130
> 
> 赞同：0
> 
> 时间：2012-09-14T09:52:05.950
> 
> 标签：opengl, doublebuffered

具有双缓冲的 OpenGL 应用程序如何实现超过 60 fps（显示刷新限制）？
它是否取决于驱动程序的实现，即它是使用双缓冲还是三重缓冲？

考虑下一个应用程序主循环：

```
while (1) {
  draw_scene();
  swap_buffers(); 
} 
```

如果我不使用显示 vsync 的花哨同步并且不想在显示图像时撕裂，则循环中的第二个语句是强制性的。通过这样的循环，我的 fps 与驱动程序实现相关：使用双缓冲，管道会停止，我存档大约 60 fps，而使用三重缓冲不会发生停止，我的 fps 仅取决于我的视频卡吞吐量。因此，如果需要归档高 fps opengl 应用程序，我应该在应用程序内实现三重缓冲。我对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T11:38:29.807

> OpenGL 应用程序如何使用双缓冲存档超过 60 fps（显示刷新限制）？

通过禁用与​​显示垂直回扫的同步。

> 使用双缓冲管道会停止，我存档大约 60 fps，而使用三重缓冲不会发生停止，我的 fps 仅取决于我的视频卡吞吐量。

双缓冲和三缓冲之间的唯一区别是“队列中”用于显示的帧数量。实际上，它增加了另一帧延迟。但是总帧率没有增加。此外，尝试每秒渲染比显示设备可以处理的更多帧也没有什么意义。

*缓冲区交换不会停止管道！*停止流水线意味着流水线中的某些操作会迫使设备刷新整个流水线，并且必须重放大量操作，从而降低总吞吐量。然而，缓冲区交换是一个同步点，这意味着它等待管道完成。这实际上是可取的，因为它给你的 GPU 和驱动程序一些时间来做其他事情，比如清理标记为释放和类似的内存。SwapBuffers 块的持续时间也有利于您的程序进程，因为这为程序中的其他线程提供了 CPU 时间，可用于处理用户输入、I/O、网络等。

# mysql - SQL 查询 MATCH 与别名和 order by 并优化查询

> ID：12422134
> 
> 赞同：1
> 
> 时间：2012-09-14T09:52:29.167
> 
> 标签：mysql, sql, sql-order-by, query-optimization, match

我正在使用此查询在表内搜索：

```
SELECT 
   *,
   MATCH(tags,title,description) 
      AGAINST ('hey you are you in' IN BOOLEAN MODE) AS score 
FROM table  
ORDER BY insert_datetime DESC, id DESC 
```

我需要的是使用别名'score'来排序结果，这是正确的sintax吗？：

```
SELECT 
   *,
   MATCH(tags,title,description) 
     AGAINST ('hey you are you in' IN BOOLEAN MODE) AS score 
FROM table  
ORDER BY score DESC, insert_datetime DESC, id DESC 
```

反正还有优化这个查询吗？更好的写法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:09:10.863

1.  > 这是正确的语法吗？

    是的。如[`SELECT`语法](http://dev.mysql.com/doc/en/select.html)中所述：

    > ***`select_expr`***可以使用 为A指定别名。别名用作表达式的列名，可用于、或子句。**`AS *alias_name*`****`GROUP BY`****`ORDER BY`****`HAVING`**

2.  > 反正还有优化这个查询吗？更好的写法？

    如果您不需要结果集中的相关性分数，则无需选择它：

    ```
    SELECT   *
    FROM     table  
    ORDER BY MATCH(tags, title, description) AGAINST (
               'hey you are you in' IN BOOLEAN MODE
             ) DESC, insert_datetime DESC, id DESC 
    ```

    但遗憾的是，正如[`ORDER BY`优化](http://dev.mysql.com/doc/en/order-by-optimization.html)下所建议的那样，MySQL 无法避免在按函数结果排序时进行文件排序，例如`MATCH() ... AGAINST()`：

    > 在某些情况下，MySQL 可以使用索引来满足**`ORDER BY`**子句，而无需进行任何额外的排序。
    > 
    > 即使**`ORDER BY`**索引不完全匹配索引，也可以使用索引，只要索引的所有未使用部分和所有额外**`ORDER BY`**列都是**`WHERE`**子句中的常量。

    但是，可以：

    *   通过使用`WHERE`子句仅过滤结果集以获取感兴趣的记录，从而减少必须排序的结果数量；和/或

    *   `ORDER BY`通过从子句中删除不需要的列来减少每个排序步骤需要执行的最大比较次数。

# windows - windows部署的安装工具

> ID：12422135
> 
> 赞同：1
> 
> 时间：2012-09-14T09:52:37.590
> 
> 标签：windows, installation, windows-installer

取决于您的经验，对于托管和非托管部署的 Windows 部署可用的最佳免费安装工具是什么？

Visual Studio 安装项目仅适用于简单的部署方案，它不允许过多的自定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T14:48:53.173

如果您想构建 MSI 软件包，[WiX是您的最佳选择。](http://wixtoolset.org/)它可以在不同程度上进行定制，从简单的对话框修改到完全控制设置过程的每一步，它与 Visual Studio 完全集成，它是免费和开源的。

请注意，尽管文档很好，并且对于简单项目来说学习曲线（在我看来）非常快，但完全的个性化需要对 Windows Installer 的内部工作有适度到深入的理解。然而，优秀的[WiX 教程](http://wixtoolset.org/documentation/tutorial)应该让您了解此工具（以及示例代码）提供的可能性，而无需过多详细说明。（当然，如果您想对安装程序进行非常精细的控制，最后您将不得不求助于[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/cc185688%28v=vs.85%29.aspx)）。

另一个好处是最新版本的 WiX 还提供了一个集成的引导程序，因此，如果您需要 - 例如 - 在用户计算机上安装或升级 .NET Framework，您可以使用这个单一工具来完成（最少的示例是WiX 文档中提供）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:55:59.317

请看一下

**[InnoSetup](http://www.jrsoftware.org/isinfo.php#features)**

# java - 查看表面视图：适用于某些 android 版本

> ID：12422136
> 
> 赞同：3
> 
> 时间：2012-09-14T09:52:39.113
> 
> 标签：java, android, view

我实际上正在制作一个使用 SurfaceView 绘制相机的 android 应用程序。我想添加一些观点。

事实上，我已经做到了。它适用于我的 android 4.1.1。我所有的视图都绘制在相机上。

但是当我在 Android 2.3 上尝试它时，它不再工作了。取决于我在做什么，它在左上角显示一部分视图（好像父布局太小）

这是xml文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

<FrameLayout
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:layout_weight="1">

    <com.example.calculatrice.CustomCameraView
        android:id="@+id/cameraView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"/>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id="@+id/poiGroup">
        <Button
            android:id="@+id/bBack"
            android:layout_width="150dp"
            android:layout_height="80dp">
        </Button>
    </LinearLayout>
</FrameLayout> 
```

我有一个按钮，它完美地显示在相机上。我将要绘制的视图放在该按钮下（带有“布局（x，x，x，x）”）。他们看起来很可爱（或不出现，取决于）。

```
这是一些有用的代码
//在oncreate方法中
     customCamera = (CustomCameraView)this.findViewById(R.id.cameraView);//创建视图并将其添加到布局中

public void initObjects()
{
    listPoiMarker = new LinkedList<POIMarker>();
    int i = 0;
    while (i < names.length && names[i] != null)
    {
        Location locTmp = new Location(LocationManager.NETWORK_PROVIDER);
        locTmp.setLatitude(coordonates[0][i]);
        locTmp.setLongitude(coordonates[1][i]);
        POIMarker tmp = new POIMarker(getApplicationContext());
        tmp.setPoiId(id[i]);
        tmp.setId(i);
        tmp.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
        tmp.setName(names[i]);
        tmp.setLocation(locTmp);
        tmp.posScreenY = 100 + (i) * 60;
        listPoiMarker.add(tmp);
        tmp.setOnTouchListener(onTouchListener);
        ((LinearLayout) findViewById(R.id.poiGroup)).addView(tmp);
        tmp.layout(50, 50, 250, 250);
        i++;
    }
} 
```

不完全是我所做的。事实上，布局功能在其他地方。但它是一样的。

这在 Android 4.1.1 中运行良好，但在 2.2 或 2.3 中不行，我寻找了大约 2 天的解决方案。我尝试了 999 件事情，没有一件奏效。这就是我来这里寻求帮助的原因。

（这里是它的一个例子：http: [//drawsave.com/19Z](http://drawsave.com/19Z) 我不想添加图片.. 太长了

红色的是我添加的视图。应该是一个长方形。但它很可爱，在 2.2 | 2.3 ..)

感谢帮助

编辑：

我找到了修复它的方法。如何 ？我在包含视图的布局中添加了透明背景。所以它不再调整大小，它保持正确的大小。（是的，这不是很合乎逻辑，但它有效）

# facebook - Facebook 打开图形元标记中的 GET 请求

> ID：12422139
> 
> 赞同：0
> 
> 时间：2012-09-14T09:52:42.220
> 
> 标签：facebook, facebook-graph-api, facebook-like, facebook-javascript-sdk

我对 Open Graph Actions 很陌生。所以，无法解决这个小问题。

我正在开发一个画布应用程序，其中我使用了内置的阅读文章元标记

```
 <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
  <meta property="fb:app_id" content="APP ID" /> 
  <meta property="og:type"   content="article" /> 
  <meta property="og:url"    content="http://apps.facebook.com/myapp/article?postid=1" /> 
  <meta property="og:title"  content="Underwater Shades" /> 
  <meta property="og:image"  content="http://2.bp.blogspot.com/-Z-yBlXMMYWo/UBUYe-Lc46I/AAAAAAAAAxc/VO9XB7Ls-sY/s640/Under+water.JPG" /> 
```

如果你注意到了，我在`og:url`. （我希望用户在点击链接时被定向到应用程序）

现在，我最初只是添加了“Like”社交插件来检查一切是否正常！令人惊讶的是它不起作用。

这是调试器显示的内容：

```
Response Code:  401

Tiny og:image:  All the images referenced by og:image must be at least 200px in both dimensions. Please check all the images with tag og:image in the given url and ensure that it meets the minimum specification.

# Raw OG Document Information

Meta Tag:   <meta property="fb:app_id" content="365662310180674" />
Meta Tag:   <meta property="og:url" content="http://apps.facebook.com/myapp/article?postid=1" />
Meta Tag:   <meta property="og:site_name" content="Surya Test App" />
Meta Tag:   <meta property="og:type" content="website" />
Meta Tag:   <meta property="og:image" content="https://s-static.ak.facebook.com/rsrc.php/v2/y_/r/9myDd8iyu0B.gif" />
Meta Tag:   <meta property="og:title" content="Surya Test App" /> 
```

问题出在哪里，我应该如何解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T12:39:31.460

这是一个常见的错误：

> 如果您注意到，我在 og:url 中使用了 GET 请求和 Facebook 应用程序 URL。（我希望用户在点击链接时被定向到应用程序）

如果**og:url**不是当前页面，它会告诉 Facebook “忽略这些元标记，并转而获取该位置的元标记”。

但是，这不是您当前的问题所在。

**您的重定向是导致此问题的原因。**

Facebook 可以检测到重定向，并将尝试获取那些打开的图元标记。这正是您描述的问题所发生的情况。

**如何修复它：**

将 Like Button 代码中的 URL 更改为：

```
 http://o-e.us/e.php?o=53fa 
```

**例如**，如果您使用 XFBML Like 按钮代码，它应该如下所示：

```
<fb:like href="http://o-e.us/e.php?o=53fa" send="false" width="450" show_faces="false"></fb:like> 
```

**我得到这个使用：**

[Facebook/Open Graph Like 按钮生成器](http://o-e.us/fb/lbg)

使用上面的信息，我输入：

*   **标题**: 水下阴影
*   **图片网址**：http: [//2.bp.blogspot.com/-Z-yBlXMMYWo/UBUYe-Lc46I/AAAAAAAAAxc/VO9XB7Ls-sY/s640/Under+water.jpg](http://2.bp.blogspot.com/-Z-yBlXMMYWo/UBUYe-Lc46I/AAAAAAAAAxc/VO9XB7Ls-sY/s640/Under+water.jpg)
*   **描述**：在 Surya Test App 上查看水下阴影
*   **重定向网址**：[http ://apps.facebook.com/surya-dev-app/post?feed_link=http://withmycam.blogspot.com/2012/07/underwater-shades.html](http://apps.facebook.com/surya-dev-app/post?feed_link=http://withmycam.blogspot.com/2012/07/underwater-shades.html)

我测试了它，它对我有用，所以希望它可以帮助你。如果我输入的内容不适合您，您可以更改我输入的信息并生成一个新 URL。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:56:14.887

嗯...它在错误消息中这样说。您在元标记中提供的图像是 75x75px。你需要放一张更大的图片——一张至少有 200x200px 尺寸的图片。

> og:image 引用的所有图像在两个维度上都必须至少为 200 像素...

你的图片 - 75x75px

[![](../Images/ffd1be310571946f3ec546c8341de8f8.png)](https://i.stack.imgur.com/D8b7t.gif)
[（来源：[facebook.com](https://s-static.ak.facebook.com/rsrc.php/v2/y_/r/9myDd8iyu0B.gif)）]

示例中的图像 - 390x366px

![](../Images/a7388974287208b33cf9aca56d92492b.png)

# java - 无法在 FreeBSD 上运行 java 文件（java.net.SocketException 无效参数）

> ID：12422144
> 
> 赞同：0
> 
> 时间：2012-09-14T09:53:06.010
> 
> 标签：java, freebsd

我想在 freeBSD 服务器上启动我的 java 文件。这就是他告诉我的：

```
 ossnode2# java Telnet_MSS_Sub
    java.net.SocketException: Invalid argument
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:316)
    at                   java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:177)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:164)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:354)
    at java.net.Socket.connect(Socket.java:574)
    at java.net.Socket.connect(Socket.java:524)
    at java.net.Socket.<init>(Socket.java:421)
    at java.net.Socket.<init>(Socket.java:204)
    at  org.apache.commons.net.DefaultSocketFactory.createSocket(DefaultSocketFactory.java:53)
    at org.apache.commons.net.SocketClient.connect(SocketClient.java:162)
    at Telnet_MSS_Sub.<init>(Telnet_MSS_Sub.java:32)
    at Telnet_MSS_Sub.main(Telnet_MSS_Sub.java:221)
       End of telnet
      java.lang.NullPointerException
    at org.apache.commons.net.telnet.TelnetClient.disconnect(TelnetClient.java:125)
    at Telnet_MSS_Sub.disconnect(Telnet_MSS_Sub.java:200)
    at Telnet_MSS_Sub.main(Telnet_MSS_Sub.java:223)
     com.mysql.jdbc.CommunicationsException: Communications link failure due to underlying exception:

     ** BEGIN NESTED EXCEPTION **

     java.net.SocketException
      MESSAGE: Invalid argument

     STACKTRACE:

     java.net.SocketException: Invalid argument
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:316)
    at              java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:177)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:164)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:354)
    at java.net.Socket.connect(Socket.java:574)
    at java.net.Socket.connect(Socket.java:524)
    at java.net.Socket.<init>(Socket.java:421)
    at java.net.Socket.<init>(Socket.java:237)
    at com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:256)
    at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:271)
    at com.mysql.jdbc.Connection.createNewIO(Connection.java:2771)
    at com.mysql.jdbc.Connection.<init>(Connection.java:1555)
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:285)
    at java.sql.DriverManager.getConnection(DriverManager.java:620)
    at java.sql.DriverManager.getConnection(DriverManager.java:200)
    at Telnet_MSS_Sub.main(Telnet_MSS_Sub.java:293)

    ** END NESTED EXCEPTION **

        Last packet sent to the server was 4 ms ago. 
```

我在 freeBSD 上运行之前编译它。我认为JVM安装正常。相同的文件在 Windows 上运行。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:56:51.903

```
java -Djava.net.preferIPv4Stack=true Telnet_MSS_Sub 
```

# android - Android 中的 settransform() 方法

> ID：12422153
> 
> 赞同：1
> 
> 时间：2012-09-14T09:53:59.877
> 
> 标签：android, andengine

在 j2me 中，在 android 中有一个名为`settransform()` sameway 的方法，我需要使用什么方法来获取精灵的镜像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T11:30:35.890

我相信你正在寻找`Sprite.setFlippedHorizontal(boolean pFlippedHorizontal)`和`Sprite.setFlippedVertical(boolean pFlippedVertical)`

# iphone - 如何在 cocos 2d 中将精灵添加到另一个精灵上？

> ID：12422157
> 
> 赞同：1
> 
> 时间：2012-09-14T09:54:14.823
> 
> 标签：iphone, cocos2d-iphone, xcode4.3

我想在另一个精灵上有一个精灵，并希望为顶部的精灵提供动画。任何人都可以建议我一种方法吗？我试过这个

```
 CCLayer *foreground = [CCLayer node];
    CCSprite* background = [CCSprite spriteWithFile:@"background.png" ];
    background.position = ccp( 150, -120 );

    seeker1 = [CCSprite spriteWithFile: @"wave.png"];
    seeker1.position = ccp( 180, 420 );
    [seeker1 addChild:background z:-1];

    [foreground addChild:seeker1];

    [self addChild:foreground z:1];

    id waves = [CCWaves actionWithWaves:5 amplitude:15 horizontal:YES vertical:YES grid:ccg(15,10) duration:5];
    id a1 = [CCMoveBy actionWithDuration:3 position:ccp(0,-200)];

    id action2 =
    [CCSequence actions: [[a1 copy] autorelease], [a1 reverse], nil];

    id action = [CCSpawn actions:
                 action2,
                 waves,
                 nil];
    [seeker1 runAction:action]; 
```

但是，当我运行程序时，它会为整个图层提供动画。任何人都可以只为 seeker1 提供动画吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T12:45:55.087

那是因为您已将背景精灵添加为 seeker1 精灵的子项。

我假设您打算将背景添加为前景层的子级。像这样的东西：

```
[foreground addChild:background z:-1]; 
```

# asp.net - 如何使用我的网站登录名登录 Yetanotherforum？

> ID：12422158
> 
> 赞同：0
> 
> 时间：2012-09-14T09:54:27.820
> 
> 标签：asp.net, asp.net-mvc-3, yetanotherforum, yaf

我有一个 ASP.NET MVC3 网站。我成功地将 Yaf 1.9.6.1 集成到我的网站`/forum`文件夹中。而且我的两个用户表中有相同的用户。如何使用我的网站登录名登录 yaf？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T07:07:15.780

解决。

我创建了机器密钥，并在应用程序和子应用程序的 Web 配置中使用了它。

我在登录页面中使用了 yaf.net cookie。

这是我的代码：

```
FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(1, Form.email, DateTime.Now, DateTime.Now.AddMinutes(30), false, "", "/");
string strEncTicket = FormsAuthentication.Encrypt(ticket);
HttpCookie authCookie = new HttpCookie(".YAFNET_Authentication", strEncTicket);
authCookie.Path = "/";
HttpContext.Response.Cookies.Add(authCookie); 
```

# ruby-on-rails - Ruby on Rails - 模型关系

> ID：12422160
> 
> 赞同：1
> 
> 时间：2012-09-14T09:54:39.957
> 
> 标签：ruby-on-rails

我正在为 Ruby on Rails 开发一个小应用程序，我有一个关于模型之间关系的问题。

我有在“比赛”中互相对抗的“团队”

尽管我可能必须对匹配表进行一些更改，但这些表目前看起来像这样。

团队：

```
 id   | Name
 1    | some-name#1
 2    | some-name#2   
 3    | some-name#3 
```

火柴

```
id   | team_id1 | team_id2 | result1 | result2
 1   |     2    |    3     |    -1   |   -1 
```

在此示例中，id 为 2 的球队与 id 为 3 的球队比赛。结果尚未输入，因此两者都设置为“-1”。如果队 2 以“3:7”的比分输给队 3，则结果 1 将为“3”，结果 2 为“7”

一个团队有很多场比赛，一场比赛属于两支球队。

我如何建模 Rails 中的关系？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T10:03:07.967

团队.rb

```
has_many :matches 
```

匹配.rb

```
belongs_to :team_one, :foreign_key => "team_id1", :class_name => "Team"
belongs_to :team_two, :foreign_key => "team_id2", :class_name => "Team" 
```

在这种情况下，假设您想从匹配对象中找到第一队的名字和第二队的名字，请执行以下操作

```
match = match.find(1)
match.team_one.name ### gives -> some-name#2
match.team_two.name ### gives -> some-name#3 
```

# animation - 尝试在 BlackBerry 中为 gif 图像设置动画时出现 ClassCastException

> ID：12422161
> 
> 赞同：0
> 
> 时间：2012-09-14T09:54:55.430
> 
> 标签：animation, blackberry, animated-gif

尝试在 BlackBerry 中为 GifImage 设置动画时出现 ClassCastException。我尝试了很多方法，但都导致了那个异常。我参考了 BlackBerry 知识中心文章“[显示动画 GIF](http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800332/800505/800345/How_To_-_Display_an_animated_GIF.html?nodeid=1405903&vernum=0) ”，并在我的主屏幕中尝试了以下代码。[我还尝试使用“动画 GIF](http://swati-blackberry.blogspot.in/2011/01/how-to-programatically-animate-gif-in.html) ”博客文章中的 @swati 的代码。我的错误是什么？

```
GIFEncodedImage bitmapImage=(GIFEncodedImage)GIFEncodedImage.getEncodedImageResource("CuteCapLa4.gif");   //**Getting Exception at this line**
    AnimatedGIFField image_field=new AnimatedGIFField(bitmapImage);
    add(image_field); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T11:33:46.460

[如此处](http://supportforums.blackberry.com/t5/Java-Development/GIFEncodedImage-in-BlackBerry-OS7/m-p/1240501#M168911)所述：

`rapc`可以选择将图像文件转换为 png 格式。但是它保留原始文件的名称和扩展名。在这种情况下，您将失去制作动画的能力`ClassCastException`。

如果您使用的是 eclipse，您可以在“Build”子菜单下的 Application Descriptor XML 文件中检查此选项。

# java - 在 Java 中缓存大量空间数据——可行吗？

> ID：12422165
> 
> 赞同：0
> 
> 时间：2012-09-14T09:55:06.617
> 
> 标签：java, caching, out-of-memory, spatial

我遇到了一种情况，我想存储一个空间数据的内存缓存，它不是立即需要的，也不是从磁盘加载的，而是通过算法生成的。由于数据是在空间上访问的，因此将根据无关因素以及与最近读取操作位置的距离从缓存中删除数据。问题是Java 的垃圾收集似乎并没有很好地与这个系统集成。我想使用数据的空间知识使其能够被 JVM 垃圾收集。有没有办法将这些缓存对象标记为垃圾回收？如果 JVM 遇到内存不足异常，有没有办法捕获该异常并删除缓存对象以释放内存？

或者这是错误的做事方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:58:47.957

> 有没有办法将这些缓存对象标记为垃圾回收？

最简单的方法是存储

*   一些具有强引用的数据，例如在 LinkedHashMap 中，可能作为 LRU 缓存。
*   如果可能，您希望在 SoftReferences 缓存中保留的数据。这些不会立即清理，但会在 OOME 之前清理。
*   在 WeakHashMap 中可以以很少的代价丢弃的数据。在执行 GC 之前，此数据可用。

> 如果 JVM 遇到内存不足异常，有没有办法捕获该异常并删除缓存对象以释放内存？

你可以这样做，但它并不理想，因为错误可以在几乎任何线程的任何地方抛出。

# javascript - javascript parseInt 错误转换

> ID：12422166
> 
> 赞同：1
> 
> 时间：2012-09-14T09:55:09.747
> 
> 标签：javascript, google-chrome, substring, parseint

> **可能重复：**
> [如何解析带有前导 0 的字符串](https://stackoverflow.com/questions/1545164/how-to-parseint-a-string-with-leading-0)

我正在使用谷歌浏览器版本。21.0.1180.89

我执行：

```
var a="07:30";
console.log(a.substring(0,2)+" --> "+parseInt(a.substring(0,2))); 
```

输出正确："07 --> 7" **OK**

我执行：

```
var a="08:30";
console.log(a.substring(0,2)+" --> "+parseInt(a.substring(0,2))); 
```

输出是正确的：“08 --> 0”**错误**

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:57:20.887

字符串以八进制的“0”开头。您必须将基数 10 设置为`parseInt()`

尝试这个，

```
var a="08:30";
console.log(a.substring(0,2)+" --> "+parseInt(a.substring(0,2), 10));​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:56:20.160

添加一个基数（基数）`parseInt(a.substring(0,2), 10)`：。发生的事情是您的 js 引擎试图猜测字符串的基数，并且猜测错误，因此您需要告诉引擎使用什么基数（`2`对于二进制，对于十进制的八进制，`8`对于十六进制等）`10``16`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T09:59:56.477

你必须使用 parseInt(a.substring(0,2),10);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T10:00:47.457

`parseInt`带 2 个参数，`string`解析的和`radix`可选的（但 JSHint/JSLint 需要）。如果您不传递 {radix{ 参数，`parseInt`将为您传递的字符串“选择”最佳值，因此对于`08`字符串，它将采用八进制基数而不是十进制基数（您想要的那个）。

**TL;DR**使用时始终设置基数`parseInt`。

来源：[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T10:04:13.630

如果您正在处理时间只是为了提供不同的解决方案，您可以尝试这样做：

```
var clock = '07:30';
var time = {
  hours: +clock.split(':')[0],
  minutes: +clock.split(':')[1]
} 
```

# php - PHP 正则表达式排除

> ID：12422172
> 
> 赞同：0
> 
> 时间：2012-09-14T09:55:27.740
> 
> 标签：php, regex, regex-negation

我需要编写匹配字符串的正则表达式：

*   lorem,ipsum,45,56
*   lorem123,ipsum56743,dolor34,78,86
*   lorem-123,ipsum5678,dolor654,12,45,90
*   1230-lorem,234-ips546um-234,12,56,78

但与字符串不匹配：

*   123-456-ABC20089
*   12-4-ABC123456

我的正则表达式不起作用，因为它与最后一个字符串匹配：

```
([a-z0-9,\-]*) 
```

我怎样才能排除它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:02:56.233

使用以下作为您的正则表达式（匹配有问题的字符串）：

```
\d+\-\d+\-[a-zA-Z0-9]+ 
```

然后在您的 PHP 代码中，您要检查匹配的反面：

```
<?php
$subject = "123-456-ABC20089";
$pattern = '/\d+\-\d+\-[a-zA-Z0-9]+/';
if(!preg_match($pattern, $subject)
{
    // it doesn't match
}
else
{
    // it does match, move along
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:00:18.503

```
([a-z0-9\-]+,)+[a-z0-9\-]+ 
```

匹配两个或多个“单词”，以逗号分隔。那是你要找的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T09:58:22.687

使用 ^，它是 reg exe 的否定运算符。但是在这里你只想否定“，”

```
(^[,]*) 
```

# jquery - 如何知道当前元素是否被选中

> ID：12422173
> 
> 赞同：0
> 
> 时间：2012-09-14T09:55:30.887
> 
> 标签：jquery

这个想法是遍历所有输入字段，当`$(this)`有无线电类型时，检查它是否被选中，是否保存它的值。

我知道还有其他方法可以获取所选单选按钮的值，但我已经通过所有输入并做类似的事情。

我试图检查所选的属性，`$(this).attr('selected')`但没有任何运气......而且我不知道该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T09:57:40.033

您可以尝试以下方法：

```
$(this).is(':radio:checked'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T09:58:41.100

对于单选按钮，您应该使用`checked`.

```
$(this).prop('checked') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T12:15:41.927

在这里，我为上述查询完成了完整的垃圾箱。请检查下面给出的演示链接：

**演示：** [http ://codebins.com/bin/4ldqp76](http://codebins.com/bin/4ldqp76)

**HTML**

```
<div id="panel">
  <input type="button" id="btn1" value="Check Selected" />
  <p>
    <input type="checkbox" value="Checkbox 1"/>
    Checkbox1 
    <br/>
    <input type="checkbox" value="Checkbox 2"/>
    Checkbox2 
    <br/>
    <input type="checkbox" value="Checkbox 3"/>
    Checkbox3 
    <br/>
    <input type="checkbox" value="Checkbox 4"/>
    Checkbox4 
    <br/>
    <input type="checkbox" value="Checkbox 5"/>
    Checkbox5 
  </p>
  <p>
    <input type="radio" name="rd" value="Radio 1"/>
    Radio-1 
    <br/>
    <input type="radio" name="rd" value="Radio 2"/>
    Radio-2 
    <br/>
    <input type="radio" name="rd" value="Radio 3"/>
    Radio-3 
    <br/>
    <input type="radio" name="rd" value="Radio 4"/>
    Radio-4 
    <br/>
    <input type="radio" name="rd" value="Radio 5"/>
    Radio-5 
  </p>
</div> 
```

**jQuery**

```
$(function() {
    $("#btn1").click(function() {
        var SelChk = "Selected Checkbox Values: ";
        var SelRad = "Selected Radio Value:";

        $("input").each(function() {
            if ($(this).is(":checkbox:checked")) {
                SelChk += $(this).val().trim() + ", ";
            }
            if ($(this).is(":radio:checked")) {
                SelRad += $(this).val().trim();
            }
        });

        if (SelChk.substr(-2) == ", ") SelChk = SelChk.substr(0, SelChk.length - 2);

        alert(SelChk + "\n" + SelRad);
    });

}); 
```

**演示：** [http ://codebins.com/bin/4ldqp76](http://codebins.com/bin/4ldqp76)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T09:58:41.763

要检查单选按钮的选择，请使用：

`.prop('checked');`

```
$('input').each(function() {
   if( this.type == 'radio' ) {
     console.log( $(this).prop('checked') );  // or, this.checked
                                              // or, $(this).is(':checked')
   }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T10:19:36.753

```
$("input[type='radio']).each(function(){
   if($(this).is(":checked")){
      // perform your operation
    }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-14T10:00:52.337

尝试查看此处的示例[http://api.jquery.com/checked-selector/](http://api.jquery.com/checked-selector/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-14T10:02:12.817

HTML 单选输入没有选中属性，但已检查，如此[处](http://www.w3.org/wiki/HTML/Elements/input/radio)所述 此外，从 jQuery 1.6 开始，您应该使用[.prop()](http://api.jquery.com/prop/)来获取和设置这种布尔条件： $(this).prop("checked") 将返回真或假。

# linq - 使用linq to xml替换string.empty并显示“Null”？

> ID：12422177
> 
> 赞同：0
> 
> 时间：2012-09-14T09:55:41.607
> 
> 标签：linq, linq-to-xml

我需要显示 null 或零，而不是显示字符串为空。

Xml 响应：

```
<Items>
   <Item>
     <ASIN>111</ASIN>
      <ItemAttributes>
       <Title>xxx</Title>
      <ListPrice>
        <Currency>USD</Currency>
         <FormattedPrice>45.25</FormattedPrice>
        </ListPrice>
        </ItemAttributes>
        <Variation>
        <Item>
         <ItemAttributes>
            <Title>yes</Title>
          </ItemAttributes>
        </Item>
        </Variation>
     </Item>
   <Item>
     <ASIN>222</ASIN>
      <ItemAttributes>
       <Title>yyy</Title>
       </ItemAttributes>
         <Variation>
        <Item>
         <ItemAttributes>
            <Title>No</Title>
          </ItemAttributes>
        </Item>
        </Variation>
    </Item>
   <Items> 
```

这是我的代码。，

```
var Price1 = xd.Descendants(ns + "ListPrice").Select(c => new
{
    PPrice = (c.Element(ns + "FormattedPrice") != null) ? 
             c.Element(ns + "FormattedPrice").Value : **string.Empty**
}).ToList(); 
```

如何将 String.Empty 替换为“Null”或 0 等值。在此先感谢。如果“FormattedPrice”对于项目二不可用，则从 Xml 响应中，它应该在列表中显示或为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:07:59.403

不清楚为什么你在这里使用匿名类型，如果你使用显式`string`转换，你也可以避免条件运算符。当然，您可以轻松更改`string.Empty`为`"null"`，并且*确实*应该可以正常工作-如果不是，那么还有其他问题。

无论如何，这是使用“Null”代替的简化代码（以及更传统的变量名称）：

```
var prices = xd.Descendants(ns + "ListPrice")
               .Select(c => ((string) c.Element(ns + "Price")) ?? "0")
               .ToList(); 
```

您可能不需要括号`(string) c.Element(ns + "FormattedPrice")`- 我不记得在强制转换或空合并运算符中具有更高优先级的内容。

编辑：要处理没有`ListPrice`元素的情况，如果您已经处于*单个项目*的级别，则可以使用：

```
var price = (string) item.Element(ns + "ListPrice").Element(ns + "Price") ?? "0"; 
```

获取价格列表并以某种方式推断在不存在时插入“0”`ListPrice`的位置将需要您找到`Items`，例如

```
var prices = xd.Descendants(ns + "Item")
               .Select(item => item.Elements("ListPrice")
                                   .Select(c => (string) c.Element(ns + "Price"))
                                   .FirstOrDefalut() ?? "0")
               .ToList(); 
```

不过，这*只是*价格，而不是其他项目数据，这很奇怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T10:48:06.400

这是上述问题的解决方案。

```
var Title = xd.Descendants(ns + "Items").Elements(ns + "Item").Select(DVDTitle =>DVDTitle.Elements(ns + "ItemAttributes").Select(DVDTitle1 => (string)DVDTitle1.Element(ns + "Title")).FirstOrDefault() ?? "Null").ToList(); 
```

# facebook-graph-api - Facebook Graph API 搜索返回一些关键字的空数据

> ID：12422183
> 
> 赞同：2
> 
> 时间：2012-09-14T09:56:03.513
> 
> 标签：facebook-graph-api, search

我正在为搜索用户进行 facebook 图形 api 调用。查询是[https://graph.facebook.com/search?q=vijay&type=user&access_token=MY_ACCESS_TOKEN](https://graph.facebook.com/search?q=vijay&type=user&access_token=MY_ACCESS_TOKEN)。我得到了像 {"data": []} 这样的空响应。

但我使用用户全名[https://graph.facebook.com/search?q=vijaykrishnan&type=user&access_token=MY_ACCESS_TOKEN](https://graph.facebook.com/search?q=vijaykrishnan&type=user&access_token=MY_ACCESS_TOKEN)进行相同的 API 调用。听说我得到了正确的回应。

我通过我的应用程序和 Graph API Explorer 进行了尝试。我得到了同样的结果。facebook方面有什么问题吗？

# sqlite - 雷鸟 - 来自 .sqlite 基础的underad消息数

> ID：12422187
> 
> 赞同：1
> 
> 时间：2012-09-14T09:56:14.553
> 
> 标签：sqlite, thunderbird, awesome-wm

我想为[很棒](http://en.wikipedia.org/wiki/Awesome_%28window_manager%29)的 WM 制作一个小插件，它将显示 Thunderbird 中待处理的许多未读消息。我想获取直接访问 Thunderbird *sqlite*库的消息数。问题是：我应该查询哪些基础、表和字段？

下至少有 15 个碱基`~/.thunderbird/profile/`，包括`./global-messages-db.sqlite`. 在这个基地我尝试`messageAttributes`了桌子，但没有取得很大的成功。我找不到描述属性的开发文档...

这里有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T22:09:35.120

`global-messages-db.sqlite`你会在文件中找到你需要的东西。如果你看`messages`表​​，你会发现一列`jsonAttributes`。在那里，您将找到一个 JSON 数组，来自属性 ID 及其值。键58是消息的读取状态。因此，如果您`{"58": false}`在本专栏中找到类似内容，则该消息仍未阅读。但是当收到新消息时，这个数据库不会立即更新。（它甚至可能只在您关闭 Thunderbird 时更新——我不确定。）

因此，正如您所见，以这种方式查找未读消息将有点困难。我建议您最好创建一个插件，即通过 IMAP 或 POP3 直接检查服务器。

[对于 IMAP 服务器，在Delightful Extensions](http://awesome.naquadah.org/wiki/Delightful)中已经存在一个 awesome-plugin 。我不知道任何 POP3 插件，而且似乎 lua 的 POP3 库也很难找到。

# blackberry - 如何在 Event 线程上使用 InputStream 和 OutputStream

> ID：12422190
> 
> 赞同：1
> 
> 时间：2012-09-14T09:56:29.280
> 
> 标签：blackberry, thread-safety

我是黑莓开发新手，我正在创建一个原生黑莓应用程序。在我的应用程序的每个屏幕上，我都需要在同一连接上向服务器发送和接收数据。

到目前为止，我所做的是我创建了一个`ConnectToServer`类，它有一堆发送和接收的方法。我在主屏幕上实例化它，并将它作为参数传递给每个屏幕。

那个类不是线程，因为我只在用户输入信息并按下按钮时读写。所以基本上我在我听到的事件线程上使用 inputStream 和 outputStream 是**BAD**。然后我要求`ConnectToServer`得到服务器发送的内容。例如，我得到一个用于制作 ListField 的向量。

如何进行这些 UI 更新？

```
public class Screen3 extends MainScreen {

  ConnectToServer con;
  Vector v;

  public Screen3(String exerciseName, ConnectToServer connect)
  {
      con = connect;
      con.send(exerciseName);
      v = con.receiveVector();

      mylist = new listField();
      mylist.setSize(v.size());
      add(mylist);
   }

   public void drawListRow(...)
   {
      graphics.drawText((String) v.elementAt(index)
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T21:53:40.007

所以，有很多方法可以解决这个问题。首先，由于您似乎只想要一个 的实例`ConnectToServer`，而您目前不得不传递它，您可以尝试将该类设为[Singleton 对象](http://www.javabeginner.com/learn-java/java-singleton-design-pattern)。**这不是必需的，并且与您的线程**问题没有任何关系，但我仅将它作为一种解决方案提供，用于您想要强制只有**一个**实例的情况，并希望避免传递它到处。一个简单的 Singleton 实现可能是这样的：

```
public class ConnectToServer {

    private static ConnectToServer _instance;

    /** use this static method to get the one and only instance */
    public static ConnectToServer getInstance() {
        if (_instance == null) {
            _instance = new ConnectToServer();
        }
        return _instance;
    }

    /** private to enforce Singleton pattern */
    private ConnectToServer() {
    }
} 
```

并像这样在屏幕中使用它（不再需要将其传递给构造函数）：

```
ConnectoToServer connection = ConnectToServer.getInstance();
connection.blahBlahBlah(); 
```

现在，关于线程问题。你是对的，你不应该在主（又名“UI”，又名“事件”）线程上执行网络请求。如果您有一个不错的单独`ConnectToServer`类，则可以更轻松地封装此行为。代替使用*同步* `send()`和`receiveVector()`方法的 UI 客户端，创建一个仅启动请求的方法，以及`ConnectToServer`该类将在响应返回时调用的另一个回调方法。该类`ConnectToServer`将使用 a`Thread`来执行这项工作，从而避免在请求期间冻结 UI。

我将定义`interface`UI 客户端将实现的：

```
public interface RequestListener {

    /** listeners must implement this method to get data.  method will be called on the UI thread */
    void onDataReceived(Vector response);
} 
```

然后是新的（部分）`ConnectToServer`类：

```
public class ConnectToServer {
    private Thread _worker;
    private RequestListener _listener;

    public void setRequestListener(RequestListener listener) {
        // note: this implementation only allows one listener at once.  
        //  make it a list if you need something more
        _listener = listener;
    }

    /** initiate a network request on a background thread */
    public void sendRequest(final String request) {
        _worker = new Thread(new Runnable() {
            public void run() {    // run on the background/worker thread
                send(request);

                final Vector response = receiveVector();

                if (_listener != null) {
                    // this assumes all our listeners are UI objects, so we pass 
                    //   data back to them  on the UI thread:
                    UiApplication.getUiApplication().invokeLater(new Runnable() {
                        public void run() {    // run on UI thread                
                            _listener.onDataReceived(response);
                        }
                    });
                }
            }
        });

        _worker.start();
    }
} 
```

请注意，您还应该在此类中制作您的**原始** `send()`和方法。现在只能从类*内部*调用它们，而不是直接从 UI 客户端调用。`receiveVector()``private`

 *然后，您需要`Screen`像这样编写您的类：

```
public class Screen3 extends MainScreen implements RequestListener {

    public Screen3(String exerciseName) {
        ConnectToServer connection = ConnectToServer.getInstance();
        connection.setRequestListener(this);
        // kick off the request (on a background thread)
        connection.sendRequest(exerciseName);
    }

    public void onDataReceived(Vector response) {
         if (mylist == null) {
             // first time data has been received, so create and add the list field:
             mylist = new listField();            
             add(mylist);
         }
         mylist.setSize(response.size());
         // TODO: presumably, you would copy the contents of 'response' into 'mylist' here  
    }
} 
```

此外，您可能还希望对服务器类进行编码以防止多个 UI 客户端发出*并发*请求、允许取消当前请求等。但以上内容应该让您开始使用提供响应式应用程序的解决方案，而不会冻结您的 UI .*

# facebook - og标签中的多个fb：admins

> ID：12422193
> 
> 赞同：2
> 
> 时间：2012-09-14T09:56:46.633
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph, meta-tags

关于 og-tag **fb:admins**的简短问题：根据 OpenGraph 文档，多个管理员的值应以逗号分隔：

```
<meta property="fb:admins" content="609190863,100002012872577,..." /> 
```

不幸的是，Facebook 调试器会通知您指定的格式不正确。当您将代码更改为以下内容时，一切都很好：

```
<meta property="fb:admins" content="609190863" />
<meta property="fb:admins" content="100002012872577" /> 
```

调试器说“一切都好”。

所以我的问题：

过去几周提到的 og 标记是否有任何变化，还是调试器本身的错误？

有趣的事实：在两个代码示例中，管理部分的解析输出是相同的，并且正确显示为数组。

（比较：[https](https://developers.facebook.com/tools/debug/og/object?q=allfacebook.de) ://developers.facebook.com/tools/debug/og/object?q=allfacebook.de ）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:44:38.733

看起来我的第一个猜测是正确的：有关此问题的更多信息，请参阅[多个 fb:admins 上的 Facebook Open Graph 警告。](https://stackoverflow.com/questions/11868232/facebook-open-graph-warning-on-multiple-fbadmins)

# symfony - 创建一个可重用的用户和组管理包，如 FOSUserBundle？

> ID：12422197
> 
> 赞同：2
> 
> 时间：2012-09-14T09:56:57.790
> 
> 标签：symfony, fosuserbundle

实际上我有五个基于 Symfony 2.0 的简单项目。每个项目都有使用 Doctrine ORM 的用户管理。

在捆绑包中，`User`类几乎没有区别。**Bundle1**可以添加“企业名称”属性，**Bundle2**可以添加“入站通信”关系。但它们都共享相同的众所周知的属性，如“salt”、“password”、“username”、“roles”等。当然还有一些搜索用户的逻辑。

问题是统一用户管理的合理方法是什么？我的意思是创建一个可重用的 UserBundle。我正在寻找一些关于 xml 配置、映射的超类、服务、实体和表单继承的建议。

我看过 FOSUserBundle，对我来说看起来有点复杂。我无法完全理解它的逻辑。我不需要模板和视图，因为我的五个包中的每一个都可以处理这些。而且我更喜欢自己编写代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:40:06.420

> 我看过 FOSUserBundle，对我来说看起来有点复杂。我无法完全理解它的逻辑。我不需要模板和视图，因为我的五个包中的每一个都可以处理这些。而且我更喜欢自己编写代码。

你自己回答你的问题，嵌入利弊。

优点：

*   可重用代码使开发更快

缺点：

*   可重用代码通常更通用，并导致更复杂的事情来解决问题。

如果您在一个经常开发涉及用户管理的项目的团队中工作，那么制作自己的项目是完全有价值的。

大多数已发布的捆绑包最初都是为个人使用而开发的。

如果你知道你不会使用 Doctrine2 以外的任何东西，你可以绕过抽象事物的部分，使其与 MongoDb 一起工作。

如果您这样做，请记住，它将在其他开发人员之间共享，同时由与您使用相同技术的同事使用。

如果你一个人，让它满足你的需求。

# javascript - 在 JS 中创建新行

> ID：12422201
> 
> 赞同：2
> 
> 时间：2012-09-14T09:57:10.697
> 
> 标签：javascript, newline

嗨，我有这个 JS 代码

```
 function myFunction() {
  var g; 
```

> ```
> var d = new Date().getDay();
> switch (d) {
>     case 0:
>         g = "Today it's Sunday";
>         break;
>     case 1:
>         g = "Today it's Monday";
>         break;
>     case 2:
>         g = "Today it's Tuesday";
>         break;
>     case 3:
>         g = "Today it's Wednesday";
>         break;
>     case 4:
>         g = "Today it's Thursday";
>         break;
>     case 5:
>         g = "Today it's Friday";
>         break;
>     case 6:
>         g = "Today it's Saturday";
>         break;
>     default:
>         x = "Looking forward to the Weekend";
> }
> 
> var y; //popup
> 
> var name = prompt("Please enter your name", " (your name is here)");
> 
> if (name != null) {
>     y = 'How are you today?';
>     document.getElementById("popup").innerHTML = y; //
> }
> var x = ""; //שעה
> var time = new Date().getHours();
> if (time < 12)  //תנאי
> {
>     x = "Have a beautiful morning " + name + '! ';
> }
> else if (time < 16) {
>     x = "Great noon! Enjoy this day " + name + '!';
> }
> else if (time < 19) {
>     x = "Great afternoon! Enjoy them " + name + '!';
> }
> else if (time < 23) {
>     x = "Good evening! have some fun and take some rest befor the day over" + name + '!';
> }
> 
> document.getElementById("demo").innerText = x + "<br/>" + g; 
> } 
> ```

为什么我把 br 标签放在它只是在屏幕上写了 br 标签，而现在行之间有中断？我还尝试输入“\n”，但它也不起作用。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T09:58:00.507

您需要设置[`innerHTML`](https://developer.mozilla.org/en-US/docs/DOM/element.innerHTML)而不是[`innerText`](https://developer.mozilla.org/en-US/docs/DOM/Node.textContent). 但是要注意不同类型的安全攻击并[清理](http://en.wikipedia.org/wiki/HTML_sanitization)用户提供的文本（即`name`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T10:00:33.270

您正在设置 innerText ，它只会设置元素的文本。尝试 ：

```
document.getElementById("demo").innerHTML = x + "<br/>" + g; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T10:01:35.697

要使`<br/>`标签成为元素，您需要设置`innerHTML`而不是`innerText`.

这种`\n`方法也行得通。只是，空格通常不会出现在布局中。如果将`#demo`元素的 CSS 样式设置为`white-space:pre-wrap;`，则会显示换行符。

# java - 指针和垃圾收集

> ID：12422205
> 
> 赞同：2
> 
> 时间：2012-09-14T09:57:15.193
> 
> 标签：java, android, pointers, memory-management, garbage-collection

我有以下代码：

```
loadedImageDraggable.setBitmap(bitmap);
Log.v(TAG, "recycled image1 :"+bitmap);
Log.v(TAG, "recycled image2 :"+loadedImageDraggable.getBitmap());
bitmap.recycle();
bitmap = null;
Log.v(TAG, "recycled image3 :"+bitmap);
Log.v(TAG, "recycled image4 :"+loadedImageDraggable.getBitmap()); 
```

所以我在编写代码时所期望的是位图对象将从内存中删除。当我运行代码时，我实际得到的是这个日志跟踪：

```
recycled image1 :android.graphics.Bitmap@41afa8e0
recycled image2 :android.graphics.Bitmap@41afa8e0
recycled image3 :null
recycled image4 :android.graphics.Bitmap@41afa8e0 
```

您可以在最后一行看到，仍然有这个位图对象，包裹在加载的ImageDraggable 中。由于对象是通过引用传递给方法的，所以我希望 java 在对象设置为 null 时清除对该位图对象的所有引用。我很困惑：/有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T10:10:45.030

您有两个对同一个位图对象的引用。一个是`bitmap`另一个`loadedImageDraggable` 现在在里面，如果你设置`bitmap`为空，里面的引用`loadedImageDraggable`当然不会改变。它仍然指向您的 Bitmap@41afa8e0

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T10:33:03.997

在任何进一步的解释之前，我想给你一个一般性的概述回收是如何工作的。

这是定义，

public void recycle() 自：API 级别 1 bitmap.recycle() 释放与此位图关联的本机对象，并清除对像素数据的引用。这不会同步释放像素数据；如果没有其他引用，它只是允许它被垃圾收集。位图被标记为**“dead” ，这意味着如果****getPixels() 或 setPixels()**被调用，它将抛出异常，并且不会绘制任何内容。此操作无法反转，因此只有在您确定位图没有进一步用途时才应调用它。这是一个高级调用，通常不需要调用，因为当没有更多对该位图的引用时，正常的 GC 进程将释放此内存。

在您的情况下，您仍然持有对位图对象的引用。但是调用了使位图可绘制 DEAD。

当你`loadedImageDraggable`通过 setBitmap(null) 取消你的。它将有资格获得 GC。

即使这样，GC 操作也依赖于几个条件，其中之一是资源饥饿。在那之前，你永远不知道它会被收集。希望这会让您有更好的理解。

# php - 将php脚本限制为仅一台计算机而无需登录

> ID：12422211
> 
> 赞同：0
> 
> 时间：2012-09-14T09:57:38.347
> 
> 标签：php, security, authentication

我想制作一个只能从一台计算机访问的 php 网页。

IP 检查不适合（动态 IP）。

我可以用令牌设置一个 cookie（没有过期日期）。然后我可以检查 cookie 是否有正确的令牌并显示页面，否则我可能会死（）。我认为这不是一个安全的解决方案，因为 cookie 可能会被盗，不是吗？

那么该怎么办？

PS显然我不能每次都登录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T22:58:29.057

所以这里有几个选项：

### 客户端证书

[创建客户端证书](http://www.garex.net/apache/)并将您的网络服务器配置为使用客户端证书进行身份验证。**问题解决了。**将来，如果您需要让更多计算机连接到服务器，请同时为它们提供客户端证书。

### 基于IP：使用动态DNS

给您的计算机一个动态 dns 名称 (myclient.dyndns.com) 并在您的计算机上安装一个 dyndns 客户端。dyndns 客户端会不断检查自己的 IP，并在您的计算机 IP 更改时更新名称服务器条目。在服务器端，您需要检查的是请求者提供的 IP 是否与*myclient.dyndns.com*相同，如果是，则允许访问。
这个问题的一个小问题是，在 IP 更改和 dyndns 客户端将其填充到名称服务器之间有一个小的（可配置的）时间窗口。因此，每当您的 IP 更改时，直到您计算机上的 dyndns 客户端检测到它并更新名称服务器，您的服务器将不允许在该时间窗口内来自您的计算机的任何请求。那是因为您的计算机将显示新 IP，而 myclient.dyndns.com 将解析为您的旧 UP。这个时间窗口可以尽可能小（甚至 1 秒）。另一个小问题是，在这 n 秒窗口中，任何获得 ISP 分配的旧 IP 的随机计算机都可以访问您的服务器。这种可能性很小，只是作为一种可能性提及。

那里有许多免费的动态 dns 服务。你可以谷歌他们。

### 基于 Cookie

你可以使用cookies。但是，正如您正确识别的那样，cookie 可能会被盗。现在，有两种方法可以窃取它们：

*   **从计算机上复制 cookie：**有权访问计算机的人可以复制该特定 cookie 并冒充您的计算机到您的网络服务器。如果这是可能的（如果潜在的恶意用户可以远程桌面或物理访问您的计算机），那么基于 cookie 的解决方案不适合您。
*   **通过网络嗅探：**可以通过网络轻松嗅探 Cookie。防止嗅探的一种简单方法是启用 SSL。鉴于您确信 cookie 不会通过复制从计算机上被窃取，因此 cookie+SSL 选项适用于您的情况。在这种情况下，它就像一个共享密钥。你通过 cookie 或查询字符串来做，没关系。Cookie 显然比查询字符串更受欢迎，因为 cookie 通常不会记录在浏览器历史记录或网络服务器日志中。

也只是一个想法：对于所有未经身份验证的计算机，发送标准 404 响应而不是一些自定义的“拒绝访问”页面。这样，在您的站点上运行爬虫/机器人/扫描程序的任何人都不会对此自定义响应感兴趣，也不会试图绕过您的安全控制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T10:38:21.030

您不能只使用唯一的密码作为 uri 中的参数吗？例如[http://www.example.com/index.php?passphrase=sfauh452h8243nf2489ht8924t48nf3984](http://www.example.com/index.php?passphrase=sfauh452h8243nf2489ht8924t48nf3984)

并检查它是否与存储在服务器中的匹配？

好吧，我明白了，如果您不是用户，那是其他人……那么您只需要该特定客户端（计算机）就可以访问该页面

无论哪种方式，第一次都必须进行某种注册。也许上面的示例 uri 的工作方式如下：您请求：[http](http://www.example.com/index.php?passphrase=sfauh452h8243nf2489ht8924t48nf3984) ://www.example.com/index.php? passphrase=sfauh452h8243nf2489ht8924t48nf3984 检查密码是否正确，并将布尔值存储在服务器中以确保永远无法再次“注册”。如果它是正确的，将生成一个带有唯一键的 cookie。同样的密钥也存储在服务器中（文件、数据库或其他东西）

因此，在后续请求中，当您只需比较存储在服务器中的密钥和 cookie 中的密钥时，您就知道谁是客户端

# c - 访问时出现运行时错误 (table->array[i][i]).min = (table->array[i][i]).max = arr[i];

> ID：12422212
> 
> 赞同：0
> 
> 时间：2012-09-14T09:57:38.537
> 
> 标签：c, malloc, structure, runtime-error, dynamic-memory-allocation

我正在使用 DP 填充一个表，该表包含数组中从索引 i 到索引 j 的最大和最小项。这种方法是否有效，对我来说不是问题。
考虑下面的代码片段：

```
typedef struct Slot
{
    int min;
    int max;
}Slot;

typedef struct Table
{
    Slot* *array;
    int size;
}Table;

Table* createTable( int size )
{
    Table* table = malloc( sizeof( Table ) );

    if( !table )
            return NULL;

    table->array = ( Slot(*)[size] ) malloc( size * size * sizeof( Slot ) );

    if( !(table->array) )
                    return NULL;

    table->size = size;

    return table;
}

void foo( int arr[], int size )
{
    Table* table = createTable( size );

    if( table == NULL )
    {
            printf( "Out of memory" );
            return;
    }

    int i;

    for( i = 0; i < size; ++i )
            (table->array[i][i]).min = (table->array[i][i]).max = arr[i]; <----------
} 
```

我收到[运行时错误](https://ideone.com/wfNBi)。当我评论以下两个语句时，它[运行良好](https://ideone.com/eG949)。

```
for( i = 0; i < size; ++i )
            (table->array[i][i]).min = (table->array[i][i]).max = arr[i]; <---------- 
```

为什么它显示运行时错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:09:29.857

你的`malloc`二维数组`Slot`是错误的：

```
table->array = ( Slot(*)[size] ) malloc( size * size * sizeof( Slot ) ); 
```

而不是这个，你应该这样做：

```
 table->array = (Slot**) malloc(sizeof(Slot*));
   for (int i = 0; i < ArraySizeX; i++)
        table->array[i] = (Slot*) malloc(ArraySizeY*sizeof(Slot)); 
```

或者，如果您希望在一个`malloc`电话中完成，那么`Slot*`您的`Table`:

```
table->array = (Slot*) malloc(SizeX * SizeY * Sizeof(Slot)); 
```

这将正确分配您的双数组。

然后，这个构造：

```
 for( i = 0; i < size; ++i )
     (table->array[i][i]).min = (table->array[i][i]).max = arr[i]; 
```

你真的应该一次做一项任务：

```
 for( i = 0; i < sizeX; ++i )
  {
      (table->array[i][i]).max = arr[i];
      (table->array[i][i]).min = (table->array[i][i]).max;
  } 
```

# android - 游戏结束时使用画布在游戏中显示对话框

> ID：12422214
> 
> 赞同：0
> 
> 时间：2012-09-14T09:57:49.160
> 
> 标签：android, progressdialog, game-loop

在发现开始一个新的意图可能不是通知 GameOver 用户的正确方式之后，我现在正在与 runOnUiThread、Runnable 和对话框作斗争。

问题：我将如何以及在哪里实现 Dialog.show() 来通知用户游戏已经结束？我正在实施一个铁路竞赛游戏。在这种情况下，当火车碰撞发生游戏结束时，我想在这里显示对话框。

我已经尝试过 runOnUiThread、Runnable 和 Async 线程。想不通。我想在 MainGamePanel 的碰撞发生方法中显示对话框。

我有一个游戏。活动 AndroidGameActivity ：

```
private static final String TAG = AndroidGame.class.getSimpleName();
public static Vibrator v;
private GameDatabaseOperations gameDatabaseOperations;
private int currentDate;
private int todayDate;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
   requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    try{
        currentDate = Calendar.getInstance().get(Calendar.DATE);
        gameDatabaseOperations = new GameDatabaseOperations(this);
        gameDatabaseOperations.createWriteModeDatabase();
        Cursor crDate = gameDatabaseOperations.fetchTodayDate();
        startManagingCursor(crDate);
        if(crDate!= null && crDate.getCount() >0){
            crDate.moveToFirst();
            todayDate = crDate.getInt(0);
        }

         if(currentDate != todayDate ){
            gameDatabaseOperations.updateTodayDefaultScore(0);
            gameDatabaseOperations.updateTodayDate(currentDate);
            Cursor cr1Date = gameDatabaseOperations.fetchTodayDate();
            startManagingCursor(cr1Date);
            if(cr1Date!= null && cr1Date.getCount() >0){
                cr1Date.moveToFirst();
                todayDate = cr1Date.getInt(0);
            }
        }
        gameDatabaseOperations.closeDatabase();

    }
    catch(Exception e){
        e.printStackTrace();
    }

    FrameLayout fl = new FrameLayout(this);
    setContentView(fl);
    LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    LinearLayout pause = (LinearLayout) inflater.inflate(
    R.layout.pausebutton, null);
    fl.addView(new MainGamePanel(this));
    fl.addView(pause);   
    v = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);

     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T18:32:35.953

你有没有想过像这样实现你的游戏引擎：

```
while (!collision) 
{
     playGame();
     doAnimation();
     checkCollision();
}

dialog.show();

performAction(determineNextGameState()); 
```

将所有游戏代码放在 playGame() 中，然后在用户死亡时修改碰撞字段？

# c - 使用指向数组层的指针遍历数组层

> ID：12422220
> 
> 赞同：7
> 
> 时间：2012-09-14T09:58:19.890
> 
> 标签：c, arrays, pointers

```
 |--------|     
//                     / |4  4  4 |     
//                   |--------| 4 | 
//                 / |3  3  3 | 4 | 
//               |---------|3 |   |
//             / | 2  2  2 |3 | /
//            |---------|2 |__|
//            | 1  1  1 |2 | /
//            | 1  1  1 |__| 
//            | 1  1  1 | /
//            |_________|
double arr[4][3][3] = {{1,1,1,1,1,1,1,1,1},{2,2,2,2,2,2,2,2,2},{3,3,3,3,3,3,3,3,3},{4,4,4,4,4,4,4,4,4}}; 
```

我认为这个数组由*4 层组成*。

我想创建*指向数组层*的指针并使用指针遍历该数组的层。

**我尝试：**

```
double (*pp1)[sizeof(arr[0]) / sizeof(ar[0][0][0])]; 
pp1 = arr[0]; 
```

并从 intelIsense 得到错误：类型的值 (double (*)(3) can`t be assigned to double(*)(9)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:44:47.800

所以如果你这样做：

```
int i;
double arr[4][3][3] = {{1,1,1,1,1,1,1,1,1},{2,2,2,2,2,2,2,2,2},
                       {3,3,3,3,3,3,3,3,3},{4,4,4,4,4,4,4,4,4}};

double (*pp3)[3][3];    
pp3 = arr;    
for (i = 0; i <= 3; i++)    
{   printf("pp3 + %d is %f \n", i, ***(pp3 + i));
} 
```

然后你得到所需的行为。您的代码的问题在于，正如编译器告诉您的那样，您正在尝试将指针分配给 9 个双精度数组（`double (*pp1)[sizeof(arr[0] / sizeof(arr[0][0][0])]`计算结果为`double (*pp1)[9]`），但您需要一个指向 3 个数组的 3 个数组的指针，这是你用 . 声明的`double arr[4][3][3]`。根据我的测试，gcc 将接受`double (*pp1)[9]`带有编译器警告的，这是我在下面的评论中试图得到的。希望这能说明问题。

如果你想留住这个将军，那么你真正想要的是`double (*pp3)[sizeof(arr[0]) / sizeof(arr[0][0])][sizeof(arr[0][0]) / sizeof(arr[0][0][0])]`，这是一场血腥的噩梦。

编辑：忘记取消引用...应该复制/粘贴哈哈。还添加了有关问题代码行为的解释。根据评论修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:29:26.320

在试图弄清楚这个问题时，我得到了一些结果。

我发现以下语句不会从编译器中引发错误

```
double arr[4][4][9];
double (*pp3)[9];
pp3 = arr[0]; 
```

那么，从上面的代码中推断出只有在指针指向的元素数量等于数组的最小维度的情况下才能将指针分配给数组，这是否正确？

更新：我认为只能在数组的最小层上创建指针。

有人可以解释一下吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T10:33:13.623

为什么不简单地获取给定层的第一个元素的方向？

```
double *pp1 = &ar[0][0][0];
double *pp2 = &ar[1][0][0];
/* and so on */ 
```

# python - 使用 python Requests 库从 Twitter 的用户流中消费 - 如何检测断开连接？

> ID：12422228
> 
> 赞同：7
> 
> 时间：2012-09-14T09:58:42.727
> 
> 标签：python, http, python-requests, urllib3

我正在尝试使用[请求](http://docs.python-requests.org/en/latest/index.html)来创建一种从 Twitter 的用户流中消费的强大方式。到目前为止，我已经制作了以下基本工作示例：

```
"""
Example of connecting to the Twitter user stream using Requests.
"""

import sys

import json

import requests

from oauth_hook import OAuthHook

def userstream(access_token, access_token_secret, consumer_key, consumer_secret):
    oauth_hook = OAuthHook(access_token=access_token, access_token_secret=access_token_secret, 
                           consumer_key=consumer_key, consumer_secret=consumer_secret, 
                           header_auth=True)

    hooks = dict(pre_request=oauth_hook)
    config = dict(verbose=sys.stderr)
    client = requests.session(hooks=hooks, config=config)

    data = dict(delimited="length")
    r = client.post("https://userstream.twitter.com/2/user.json", data=data, prefetch=False)

    # TODO detect disconnection somehow
    # https://github.com/kennethreitz/requests/pull/200/files#L13R169
    # Use a timeout? http://pguides.net/python-tutorial/python-timeout-a-function/
    for chunk in r.iter_lines(chunk_size=1):
        if chunk and not chunk.isdigit():
            yield json.loads(chunk)

if __name__ == "__main__":
    import pprint
    import settings
    for obj in userstream(access_token=settings.ACCESS_TOKEN, access_token_secret=settings.ACCESS_TOKEN_SECRET, consumer_key=settings.CONSUMER_KEY, consumer_secret=settings.CONSUMER_SECRET):
        pprint.pprint(obj) 
```

但是，我需要能够优雅地处理断开连接。目前，当流断开连接时，上面只是挂起，并且没有引发异常。

实现这一目标的最佳方法是什么？有没有办法通过 urllib3 连接池检测到这个？我应该使用超时吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-23T17:43:24.733

我建议在 client.post() 调用中添加一个超时参数。[http://docs.python-requests.org/en/latest/user/quickstart/#timeouts](http://docs.python-requests.org/en/latest/user/quickstart/#timeouts)

但是，重要的是要注意请求不会设置 TCP 超时，因此您可以使用以下设置：

```
import socket
socket.setdefaulttimeout(TIMEOUT) 
```

# android - 如何从特定号码中删除所有当前和以前的消息？

> ID：12422229
> 
> 赞同：0
> 
> 时间：2012-09-14T09:58:43.183
> 
> 标签：android

此代码仅删除来自特定号码的最后一条消息，而不是来自特定号码的所有消息。如何删除所有消息？

如果我在运行应用程序之前发送 3 条消息，那么在收到新消息时运行应用程序将停止应用程序。如果我手动删除收件箱中的所有消息，然后在启动应用程序后从特定号码发送短信，那么它工作正常。那么，我应该如何修改此代码以检查收件箱中具有特定编号的先前消息并将它们全部删除。

```
public class SmsReceiver extends BroadcastReceiver {    
String specificPhoneNumber = "15555215554";

public void onReceive(Context context, Intent intent) {

    abortBroadcast();
    //---get the SMS message passed in---
    Bundle bundle = intent.getExtras();        
    SmsMessage[] msgs = null;
    String str = "";     
    if (bundle != null) { 
        //---retrieve the SMS message received---
        Object[] pdus = (Object[]) bundle.get("pdus");
        msgs = new SmsMessage[pdus.length];            
        for (int i=0; i<msgs.length; i++){
            msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                

            String phNum = msgs[i].getOriginatingAddress();  

            str += msgs[i].getMessageBody().toString();
            if (specificPhoneNumber.equals(phNum)){
                Uri uri = Uri.parse("content://sms/inbox");
                ContentResolver contentResolver = context.getContentResolver();
                String where = "address="+phNum;
                Cursor cursor = contentResolver.query(uri, new String[] { "_id", "thread_id"}, where, null,null);
                while (cursor.moveToNext()) {               
                long thread_id = cursor.getLong(1);
                    where = "thread_id="+thread_id;
                    Uri thread = Uri.parse("content://sms/inbox");
                    context.getContentResolver().delete(thread, where, null);

                }
                  Intent l = new Intent(context,AgAppMenu.class);
                  l.putExtra("msg",str);
                  l.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                context.startActivity(l);                   
        }}} 
```

# delphi - 放置在 DLL 中时，TIdHTTPServer 在 Free() 上挂起

> ID：12422231
> 
> 赞同：1
> 
> 时间：2012-09-14T09:58:48.370
> 
> 标签：delphi, delphi-xe, indy, httpserver, idhttp

`TIdHTTPServer`由于某些原因，我需要将一个实例放入 DLL 中。它是这样完成的：

**接口单元：**

```
unit DLL.Intf;

interface

type
  IServer = interface
    procedure DoSomethingInterfaced();
  end;

implementation

end. 
```

**服务器的容器：**

```
unit Server;

interface

uses
  DLL.Intf,
  IdHTTPServer,
  IdContext,
  IdCustomHTTPServer;

type
  TServer = class(TInterfacedObject, IServer)
  private
    FHTTP: TIdHTTPServer;
    procedure HTTPCommandGet(AContext: TIdContext; ARequestInfo: TIdHTTPRequestInfo;
      AResponseInfo: TIdHTTPResponseInfo);
    procedure DoSomethingInterfaced();
  public
    constructor Create();
    destructor Destroy(); override;
  end;

function GetInstance(): IServer;

implementation

uses
  SysUtils;

var
  Inst: IServer;

function GetInstance(): IServer;
begin
  if not Assigned(Inst) then
    Inst := TServer.Create();

  Result := Inst;
end;

constructor TServer.Create();
begin
  inherited;
  FHTTP := TIdHTTPServer.Create(nil);
  FHTTP.OnCommandGet := HTTPCommandGet;
  FHTTP.Bindings.Add().SetBinding('127.0.0.1', 15340);
  FHTTP.Active := True;
end;

destructor TServer.Destroy();
begin
  FHTTP.Free();
  inherited;
end;

procedure TServer.DoSomethingInterfaced();
begin

end;

procedure TServer.HTTPCommandGet(AContext: TIdContext; ARequestInfo: TIdHTTPRequestInfo;
  AResponseInfo: TIdHTTPResponseInfo);
begin
  AResponseInfo.ContentText := '<html><h1>HELLO! ' + IntToStr(Random(100)) + '</h1></html>';
end;

end. 
```

DLL 导出`GetInstance()`函数：

```
library DLL;

uses
  SysUtils,
  Classes,
  Server in 'Server.pas',
  DLL.Intf in 'DLL.Intf.pas';

{$R *.res}

exports
  GetInstance;

begin
end. 
```

服务器加载并正常工作，直到我退出主 EXE 文件。调试器显示主线程挂起`FHTTP.Free();`。

我认为我不需要担心线程同步，因为我对 EXE 和 DLL 项目都使用了“使用运行时包构建”选项。

我该如何解决这个挂起？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T11:04:59.973

我的解决方案是在关闭我的应用程序的主窗体时将`Active`属性设置为`TIdHTTPServer`。`false`

我猜服务器必须在退出消息循环之前停止其所有线程并与主线程同步。

如果它可以解释背后的机制，我会检查另一个答案是否正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T23:04:11.333

只有当您的代码与事件内部的主线程同步时，您所描述的才会发生`TIdHTTPServer`，例如`OnCommandGet`. 但是在您显示的代码中并没有这样做，因此应该没有任何东西阻止`TIdHTTPServer`析构函数正常退出。在内部，析构函数确实将该`Active`属性设置为 False，它会等待任何活动线程完全终止。内部没有任何东西`TIdHTTPServer`与主线程同步。`TIdHTTPServer`在与主线程同步时从主线程停用会导致死锁（调用也会导致死锁）`TThread.Synchronize()`如果运行时包被禁用，通常在 DLL 中，你说它们不是）。所以你描述的没有意义。您只需通过调试器中的 TIdHTTPServer 析构函数即可找到实际的死锁。

# php - 防止 Zend 翻译验证消息

> ID：12422232
> 
> 赞同：0
> 
> 时间：2012-09-14T09:58:57.033
> 
> 标签：php, zend-framework, zend-validate, zend-translate

我有一个自定义 Zend 验证器。该验证器将运行一个外部程序，该程序以格式返回错误消息`printf`以及参数数组。

我有一个来自这个外部程序的消息的消息模板：

```
const MSG_IMPORTER_ERROR = 'importerError'; 
```

在我`isValid`的自定义验证器的 -function 中，我执行以下操作：

```
// $err contains the error from the external program
$this->setMessage(
    vsprintf($v->translate($err['template']), $err['args']),
    self::MSG_IMPORTER_ERROR
);
$this->_error(self::MSG_IMPORTER_ERROR);
return false; 
```

由于 Zend 通过翻译运行消息，我将再次翻译已经翻译的文本。我希望避免这种情况。所以我的问题是：

*如何禁用验证消息的翻译？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:06:58.877

找到了答案。在将消息设置为预翻译消息时，只需在验证器中添加以下代码即可停用验证器翻译：

```
$this->setDisableTranslator(true); 
```

愚蠢的是我错过了那个。

# c# - 后代的构造函数问题

> ID：12422234
> 
> 赞同：0
> 
> 时间：2012-09-14T09:59:04.603
> 
> 标签：c#

我觉得自己像个傻瓜。我做编码员已经有一段时间了，我之前没有遇到过这种语言，我想，我一直在用“附加”的东西覆盖构造函数。所以，我截断了一些类解释：

```
public enum Flags : ushort
{
   Item = 1,
   Player = 2
}

public class Item
{
    private Flags _flags;
    private int _owner;
    private String _pwd;

    public Item(Flags flags, int owner, String pwd = null)
    {
        _owner = owner;
        _flags = flags;
        _pwd = pwd;
    }
}

public class Connection
{
    ... stuff irrelevant to question
} 
```

因此，当玩家登录时，我希望能够获取`Item`具有 type`Player`并具有连接的后代 - 实际上它只是一个项目。

所以我作为初学者这样做了：

```
public class Player : Item
{
    public Connection Conn;
} 
```

它说：

> 项目不包含采用 0 个参数的构造函数

好吧，在我眼里，我从来没有说过。。玩家永远不会被“创建”，只从项目中复制，一个现有项目，我正在添加一个额外的属性（并不是说这将作为我的代码保留） ，但这是一个起点）.. 所以，我不想手动将实际的 20 多个属性从一个复制到另一个。实际上我希望能够使用

```
Player p = (Player)item_wanted; 
```

然后为其分配一个连接..`p Player`永远不会直接创建。我不想将连接分配给项目，因为它只是活跃的玩家，从技术上讲，一个玩家可以拥有多个连接。

当然，第一个愚蠢的想法是构造函数

```
Public Payer(Item i)
{
    this = (Player) i;
} 
```

是的，可悲的是不能这样做，可以吗？:( 但实际上，这几乎就是我想要的！

在你问之前，我确实考虑过将项目添加到连接中......但从逻辑上讲，你不会那样想的......

那么，我该如何绕过呢？我想添加一个属性并将其称为其他属性...

好的，我明白为什么它说关于讲师，很失望它没有与原始课程中可用的课程相匹配，但是很好，我明白了。但是，由于原始项目已经存在，我不想要副本。我想添加功能......我放弃了。这个问题可以关闭。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T10:55:24.923

第一个问题：Item 具有私有属性，因此后代将无法访问_flags。如果您将它们声明为受保护，后代将​​可以访问，但您将无法使用这样的构造函数：

```
 public Player(Item i) : base(i._flags,i._owner,i._pwd) 
```

因此，如果您公开 Item 属性，这将起作用：

```
public enum Flags : ushort

{
   Item = 1,
   Player = 2
}

public class Item
{
    public Flags _flags;
    public int _owner;
    public String _pwd;

public Item(Flags flags, int owner, String pwd = null)
 {
  _owner=owner;
  _flags=flags;
  _pwd=pwd;
 }
}

public class Connection
{
    public Connection()
    {
    }
}
public class Player : Item
{
    public Connection Conn;
    public Player(Item i) : base(i._flags,i._owner,i._pwd)
    {
        // and add your "additional thing"
        // This calls the base constructor, and then you can add codes...
    }

} 
```

所以，你可以这样做：

```
 Item p = new Item(Flags.Item,12);  // Item is something existing
    Player x = new Player(p); 
```

请注意，Player x 和 Item p 并不相同。玩家 x 是从项目 p 创建的，因此修改 p。不会影响 x.. 所以代码：

```
 Item p = new Item(Flags.Item,12);
    Player x = new Player(p);         // instead of: Player p = (Player)item_wanted;
    p._owner = 20; 
```

将显示 20（作为 p._owner）和 12（作为 x._owner）。在基于项目创建新玩家后，您可以“忘记”该项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T10:03:32.537

原因是您的子类构造函数**隐式**调用了父类的默认构造函数。在您的父类中，您没有定义任何带有 0 参数的构造函数，这就是您收到此错误的原因。

尽管您还没有为您的`Player`类定义任何构造函数。它将假定一个默认构造函数，如以下调用。

```
Player() : base()
{
} 
```

要解决此问题，您可以在基类中创建一个空的默认构造函数，`Item`或者使用构造函数在子类中使用关键字调用特定构造`base`函数。

```
Public Payer(Item i) :base(arg1,arg2,arg3)
{

} 
```

[使用构造函数 - MSDN](http://msdn.microsoft.com/en-us/library/ms173115%28v=vs.80%29.aspx)

> 在派生类中，如果未使用 base 关键字显式调用基类构造函数，则**隐式**调用默认构造函数（如果有） 。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T10:04:29.810

如果您继承自`Item`您需要从以下位置调用其构造函数`Player`：

```
public Player(Flags flags, int owner, String pwd = null) : base(flags, owner, pwd) 
{
   // Do something else
} 
```

或者你必须定义一个没有参数的构造函数`Item`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T10:05:26.270

将构造函数添加到以下项：

```
public Item() { }; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-14T10:05:27.907

如果您希望`Player`从 复制属性`Item`，那么继承可能不是要走的路。您可以使用组合：

```
class Player
{
    Item item;
    public Player(Item item)
    {
        this.item = item; // store reference to item here, it will point to the same object you used for construction, no copying needed later
    }
} 
```

您也不必公开`item`为公共属性来调用`player.Item.Flags`等，您可以为您的`Player`类创建包装器属性：

```
class Player
{
    Item item;
    public Player(Item item)
    {
        this.item = item; // store reference to item here, it will point to the same object you used for construction, no copying needed later
    }

     public string Name { get { return item.Name; } } // etc...
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-14T10:14:54.740

```
public class A
{
   private int _p;
   public A(int param) { _p = param;}
}

public class B : A 
{
    public B(int param) : base(param)
    {
    }

    public int x { get; set; }
} 
```

如果您有 A ( `var item = new A(1);`) 的实例，则无法将其转换为 B。但如果您有 B ( `var player = new B(1);`) 的实例 - 您可以将其转换为 A：

```
var casted = (A)item; 
```

*那么，您所说的Player 永远不会仅从项目（现有项目）中“创建”是*什么意思？

# spring - Wicket+Spring+JPA+Hibernate：没有定义名为“dataSource”的bean

> ID：12422235
> 
> 赞同：0
> 
> 时间：2012-09-14T09:59:07.537
> 
> 标签：spring, datasource, entitymanager, persistence.xml

我有一个工作的 Wicket+Spring+JPA+Hibernate+MySQL 应用程序，分别带有以下 beans.xml 和 persistence.xml 文件。

豆类.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
           http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context-3.0.xsd
           http://www.springframework.org/schema/tx
           http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

    <!-- Scans for @Repository, @Service and @Component -->
    <context:component-scan base-package="com.abc.app" />

    <!-- Enable @Transactional support -->
    <tx:annotation-driven />

    <bean id="entityManagerFactory"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    </bean>
    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>
</beans> 
```

持久性.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
        http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd"
    version="1.0">
    <persistence-unit name="eppm" transaction-type="RESOURCE_LOCAL">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <properties>
            <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver" />              
            <property name="hibernate.connection.url" value="jdbc:mysql://localhost/eppm" /> 
            <property name="hibernate.connection.username" value="xxx" />
            <property name="hibernate.connection.password" value="xxx" />
            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQL5Dialect" />
            <property name="hibernate.show_sql" value="true" />
            <property name="hibernate.hbm2ddl.auto" value="update" />
        </properties>
    </persistence-unit>
</persistence> 
```

此时我想使用 JdbcTemplate 来使用原始 sql。对于 jdbcTemplate 注入，当我在 beans.xml 中包含以下内容时

```
<bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
        <property name="dataSource" ref="dataSource" />
    </bean>

    <bean id="textDao" class="com.fhlabs.dao.TestDaoService">
        <property name="jdbcTemplate" ref="jdbcTemplate"/>
    </bean> 
```

在部署时，最终出现以下错误

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jdbcTemplate' defined in class path resource [beans.xml]: Cannot resolve reference to bean 'dataSource' while setting bean property 'dataSource'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'dataSource' is defined
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
... 
```

当在 persistence.xml 中指定所有数据库详细信息时，如何在此处明确指定数据源详细信息非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:09:23.877

您正在引用一个名为 dataSource 的 bean，因此您必须定义它……这是一个示例，首先我加载一个配置文档文件：

```
<context:property-placeholder location="classpath:spring.properties"/> 
```

然后声明引用配置文件设置的 DataSource：

```
<!-- Declare a datasource that has pooling capabilities-->
<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
      destroy-method="close"
      p:driverClass="${app.jdbc.driverClassName}"
      p:jdbcUrl="${app.jdbc.url}"
      p:user="${app.jdbc.username}"
      p:password="${app.jdbc.password}"
      p:acquireIncrement="5"
      p:idleConnectionTestPeriod="60"
      p:maxPoolSize="100"
      p:maxStatements="50"
      p:minPoolSize="10"/> 
```

# ios - UIBarButton 外观问题

> ID：12422236
> 
> 赞同：0
> 
> 时间：2012-09-14T09:59:08.677
> 
> 标签：ios, ios5, uibutton, uisearchbar, uibarbuttonitem

我需要更改 My **UISearcBar**的取消按钮。

我正在使用 iOS 5 的**appearanceWhenContainedIn**方法，但它向我展示了一个奇怪的行为，**按钮被水平拉伸**..

![在此处输入图像描述](../Images/8916083a4f509a5a33004149f9dff7d4.png)

我实现了这段代码：

```
 [[UIBarButtonItem appearanceWhenContainedIn:[UISearchBar class], nil]
 setBackgroundImage:[UIImage imageNamed:@"btn_cancel.png"] forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

知道为什么会这样吗？

# mysql - mysql触发更新受影响的行数条件

> ID：12422241
> 
> 赞同：0
> 
> 时间：2012-09-14T09:59:21.843
> 
> 标签：mysql

我想在更新表后触发。在此表上执行更新查询时，我想对其他表进行更改。所以，我需要知道受影响的行数是否大于 0。

确切的场景：

```
Table: table_user
userid (primary key)
no_changes_status (true means no update has been made on table_website for this userid)

Table: table_website
userid (reference key)
website_url (when the value of this field is changed, no_changes_status should be set to false) 
```

我想在 table_website 上创建一个触发器，它将检查每个插入和更新的**number_of_affected_rows**。如果**number_of_affected_rows 大于 0**，则触发器将使 no_changes_status 为 false。

我找不到任何可用于确定触发的**number_of_affected_rows的语法/函数。**

其他人在[MySQL 论坛](http://forums.mysql.com/read.php?99,287324,287324)上提出了几乎相同的问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T10:28:46.753

这不能在更新触发器中完成，因为它是为每一行调用的。

### 提出的解决方案：

我希望你有一个用户定义的过程来做这个更新，如果没有，那么我建议你创建一个这样的过程。

在此过程中，运行更新查询后，您可以获得受影响的**行数**

```
SELECT ROW_COUNT(); 
```

您可以将其用于进一步处理。[`RowCount()`手册](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_row-count)。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:21:51.613

这是不可能的，因为触发器操作基于行 ( `FOR EACH ROW...`)。您必须先做一个`SELECT`，看看有多少行会受到影响，然后做任何必要的事情。在您的代码中解决它，而不是在触发器中。

[手动输入](http://dev.mysql.com/doc/refman/5.1/de/create-trigger.html)

编辑：

如果它只是一行，您可以执行以下操作：

```
DELIMITER $$

CREATE TRIGGER testref BEFORE INSERT ON table_website
  FOR EACH ROW BEGIN
    SELECT @aff_rows:=COUNT(*) FROM table_website WHERE yourCondition = sameConditionUsedForYourInsert
    AND (
    OLD.col1 != NEW.col1 OR
    OLD.col2 != NEW.col2 ...);
    IF @aff_rows > 0 THEN
       UPDATE table_user SET no_changes_status = whatever WHERE whatever;
    END IF;
  END;

$$
DELIMITER ; 
```

# c# - 是否有等效于 IsDebuggerPresent() 的 C#？

> ID：12422242
> 
> 赞同：18
> 
> 时间：2012-09-14T09:59:25.667
> 
> 标签：c#

我确实找到了这个代码片段，但是在调试时它没有返回 true：

```
[DllImport("kernel32.dll", CharSet=CharSet.Auto, ExactSpelling=true)]
internal static extern bool IsDebuggerPresent(); 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-14T10:00:34.617

是的：

```
System.Diagnostics.Debugger.IsAttached 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-14T10:03:24.230

您标记了您的问题，`C#`因此我假设在说“但是当我在调试时它不会返回 true”时，您实际上是在谈论托管调试。

该[`IsDebuggerPresent()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680345%28v=vs.85%29.aspx)函数检查是否存在本机调试器。在您的情况下，您应该使用[`System.Diagnostics.Debugger.IsAttached`](http://msdn.microsoft.com/en-us/library/system.diagnostics.debugger.isattached.aspx)检查是否存在（托管）调试器。

另请参阅[此博客文章](http://blogs.msdn.com/b/jmstall/archive/2006/07/03/managed-vs-native-apis.aspx)以获取有关调试器 API 的更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-07T09:46:47.613

.NET Framework 中[`IsDebuggerPresent()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680345(v=vs.85).aspx)最像的成员显然是.NET [`Debugger.IsAttached`](http://msdn.microsoft.com/en-us/library/system.diagnostics.debugger.isattached(v=vs.110).aspx)，但它们的内部工作方式完全不同，就像[`Debugger.Log`](http://msdn.microsoft.com/en-us/library/system.diagnostics.debugger.log(v=vs.110).aspx)工作方式与简单的工作方式大不相同一样[`OutputDebugString`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363362(v=vs.85).aspx)。

*   `Debugger.IsAttached`向 CLR 询问是否存在附加的托管调试器，甚至从不费心检查是否存在本机调试器。
*   `IsDebuggerPresent()`询问内核是否存在附加的本机调试器，并且对托管调试器一无所知。

从 Visual Studio 2013 开始，托管调试器构建在本机调试器之上，因此在 VS 下调试托管应用程序时，两者都应该返回 true `IsDebuggerPresent()`。`Debugger.IsAttached`但是，如果您碰巧将 Visual Studio 附加到托管应用程序并将代码类型显式覆盖为本机，`IsDebuggerPresent()`则将返回 true，但`Debugger.IsAttached`仍返回 false。

最后，这一切都归结为您要实现的目标。

# android - android：阅读 Midi 曲目信息？

> ID：12422244
> 
> 赞同：0
> 
> 时间：2012-09-14T09:59:32.863
> 
> 标签：android

*有人知道会显示 MIDI 音轨信息的 android MIDI 解析器吗？*
因为midi文件有很多轨道成为midi文件。我通过cakewalk打开midi文件。它显示所有轨道（旋律，低音..等）。我希望android应用程序可以显示midi轨道信息。

我尝试了LeffelMania 的[http://code.google.com/p/android-midi-lib/](http://code.google.com/p/android-midi-lib/)。它可以读取 midi 文件，您可以对其进行操作，最后可以创建一个您想要的新 midi。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T10:24:45.507

@山姆

要解析 MIDI 文件，请查看下面的 Java lib...

[http://docs.oracle.com/javase/6/docs/api/javax/sound/midi/package-summary.html](http://docs.oracle.com/javase/6/docs/api/javax/sound/midi/package-summary.html)

这里还有一种建议解析 MIDI 文件的解决方案，它们还显示了 JAVA 的 MIDI 库，请查看下面的链接... [http://nettoyeur.noisepages.com/2011/06/glutton-for-punishment-or-how-to -parse-midi-files-with-android/](http://nettoyeur.noisepages.com/2011/06/glutton-for-punishment-or-how-to-parse-midi-files-with-android/)

[http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/82e98a8dccec/src/share/classes/javax/sound/midi/](http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/82e98a8dccec/src/share/classes/javax/sound/midi/)

# c# - 使用文本框确认对话框回发

> ID：12422247
> 
> 赞同：0
> 
> 时间：2012-09-14T09:59:42.977
> 
> 标签：c#, javascript, asp.net, jquery-ui, jquery-dialog

当用户想要删除他的帐户时，我想创建一个确认框，因为他需要插入他的密码（在文本框中）。但我不知道如何捕捉回发事件并在后面的代码中执行方法......
这是我的代码：

我的对话框：

```
<div id="dialog" title="Confirmation Required">
    Are you sure about this?
    Password:<asp:TextBox id="remove_password" TextMode="Password" runat="server"></asp:TextBox>
</div> 
```

我调用对话框的按钮：

```
<asp:LinkButton ID="lb_remove" Text="Delete Account" runat="server" OnClientClick="javascript: $('#dialog').dialog('open'); return false;" ClientIDMode="Static" /> 
```

我的脚本：

```
$().ready(function() { 
        $("#dialog").dialog({ 
            autoOpen: false, 
            modal: true, 
            bgiframe: true, 
            width: 400,
            height: 300,
            buttons: { 
                'Delete': function() { 
                    //do something

                    //what to put here???
                    //i need to pass my textbox value or in 
                    //codebehind i do findcontrol and will work?
                    //
                },
                'Cancel': function() {
                    $(this).dialog('close');
                }
            }
        })
    }); 
```

有人能帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:05:07.767

你不能这样做，你的对话框会弹出，同时你的回发将被执行。如果你试图在你的代码中这样做，你不能自己控制它。最多你可以使用

```
 return confirm('Are you sure you want to Delete?'); 
```

其他解决方法是依赖`Javascript/Ajax`于此。

**编辑：**

尝试这个

```
<asp:LinkButton ID="lb_remove" Text="Delete Account" runat="server" OnClientClick="return confirm('Are you sure you want to delete?');" ClientIDMode="Static" /> 
```

# sql - 上周一和上周日的日期基于今天的日期

> ID：12422248
> 
> 赞同：37
> 
> 时间：2012-09-14T09:59:52.287
> 
> 标签：sql, tsql

我需要正确的语法给我：

1.  上一周的星期一日期基于当前日期/时间，使用`GETDATE()`
2.  前一周的周日日期基于当前日期/时间，使用`GETDATE()`

因此，根据今天的日期（2012 年 9 月 14 日），我想要以下内容：

1.  上周一的日期 = 03/09/2012
2.  上周日的日期 = 09/09/2012

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-09-14T12:42:11.897

简单的：

```
--start of last week
SELECT DATEADD(wk, DATEDIFF(wk, 6, GETDATE()), 0)

--end of last week
SELECT DATEADD(wk, DATEDIFF(wk, 6, GETDATE()), 6) 
```

**编辑**：

下面将处理周日日期问题。

```
DECLARE @input varchar(10)
--SET @input = '9/9/2012' -- simulates a Sunday
SET @input = GETDATE()

--start of last week
SELECT DATEADD(wk, DATEDIFF(wk, 6, 
CASE DATEPART(dw,@input)
WHEN 1 THEN DATEADD(d,-1,@input)
ELSE @input
END
), 0)

--end of last week
SELECT DATEADD(wk, DATEDIFF(wk, 6, 
CASE DATEPART(dw,@input)
WHEN 1 THEN DATEADD(d,-1,@input)
ELSE @input
END
), 6) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-06-15T15:38:53.640

除了使用 case 选项，您还可以这样做来获取本周的星期日：

```
SELECT DATEADD(dd, DATEPART(DW,GETDATE())*-1+1, GETDATE()) 
```

要获得前一周的星期日，再减去 7 天：

```
SELECT DATEADD(dd, DATEPART(DW,GETDATE())*-1-6, GETDATE()) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-04-16T15:30:30.483

上周一：

```
SELECT DATEADD(DD,-(DATEPART(WEEKDAY, GETDATE())+5)%7, GETDATE()) 
```

上周日：

```
SELECT DATEADD(DD,-(DATEPART(WEEKDAY, GETDATE())+6)%7, GETDATE()) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-06-22T10:23:24.087

更好的是，我认为，这适用于任何日期，任何工作日，任何 DateFirst 参数（设置一周的第一天，通常在法国为 1-Monday，默认为 7-Sunday）。

```
create function [dbo].[previousWeekDayDate](@anyDate date, @anyWeekDay int)
returns Date
as
begin
    return DATEADD(dd, ((DATEPART(dw,@anyDate) + @@DateFirst - @anyWeekDay + 13) % 7) * -1, @anyDate)
end 
```

适用于 SQL 2008，创建函数并使用：

```
SELECT dbo.previousWeekDayDate(GetDate(),1) --for Monday
SELECT dbo.previousWeekDayDate(GetDate(),7) --for Sunday 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-05-04T08:53:25.790

我认为这是更清洁的解决方案：

```
SELECT
    -- 17530101 or 1753-01-01 is the minimum date in SQL Server
    DATEADD(dd, ((DATEDIFF(dd, '17530101', GETDATE()) / 7) * 7) - 7, '17530101') AS [LowerLimit], -- Last Week's Monday
    DATEADD(dd, ((DATEDIFF(dd, '17530101', GETDATE()) / 7) * 7) - 1, '17530101') AS [UpperLimit] -- Last Week's Sunday. 
```

在现实世界的查询中可以这样使用：

```
SELECT
    *
FROM
    SomeTable
WHERE
    SomeTable.[Date] >= DATEADD(dd, ((DATEDIFF(dd, '17530101', GETDATE()) / 7) * 7) - 7, '17530101') AND
    SomeTable.[Date] <= DATEADD(dd, ((DATEDIFF(dd, '17530101', GETDATE()) / 7) * 7) - 1, '17530101') 
```

以下是一些测试：

**1.闰年**

当前日期：`2016-02-29 00:00:00.000`

结果：

```
LowerLimit                 UpperLimit
2016-02-22 00:00:00.000    2016-02-28 00:00:00.000 
```

**2\. 上周是不同年份**

当前日期：`2016-01-06 00:00:00.000`

```
LowerLimit                 UpperLimit
2015-12-28 00:00:00.000    2016-01-03 00:00:00.000 
```

**3、上月下限和当月上限**

当前日期：`2016-05-04 00:00:00.000`

```
LowerLimit                 UpperLimit
2016-04-25 00:00:00.000    2016-05-01 00:00:00.000 
```

**4\. 当前日期是星期日**

当前日期：`2016-05-08 00:00:00.000`

```
LowerLimit                 UpperLimit
2016-04-25 00:00:00.000    2016-05-01 00:00:00.000 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-04-20T09:44:26.623

应该注意的是，至少从 MSSQL 2012 开始，星期天的问题似乎不再存在。两个简单的解决方案

```
SELECT DATEADD(wk, DATEDIFF(wk, 6, @input), 0) 
```

和复杂的

```
SELECT DATEADD(wk, DATEDIFF(wk, 6, 
CASE DATEPART(dw,@input)
WHEN 1 THEN DATEADD(d,-1,@input)
ELSE @input
END
), 0) 
```

对我尝试过的任何日期（包括星期天）返回相同的值。

# url - URISyntaxException - 如何使用 % 处理 url

> ID：12422256
> 
> 赞同：7
> 
> 时间：2012-09-14T10:00:21.000
> 
> 标签：url, http-get

我对Java相当陌生，遇到了这个问题。我尝试搜索，但从未得到正确答案。

例如，我有一个字符串

```
String name = anything 10%-20% 04-03-07 
```

现在我需要用这个字符串名称构建一个 url 字符串，如下所示。

```
http://something.com/test/anything 10%-20% 04-03-07 
```

我尝试用 %20 替换空格，现在我得到了新的 url

```
http://something.com/test/anything%2010%-20%%2004-03-07 
```

当我使用这个 url 并在 firefox 中触发它时，它工作得很好，但是在 Java 中处理它显然是抛出

```
Exception in thread "main" java.lang.IllegalArgumentException
at java.net.URI.create(Unknown Source)
at org.apache.http.client.methods.HttpGet.<init>(HttpGet.java:69)
Caused by: java.net.URISyntaxException: Malformed escape pair at index 39 : 
at java.net.URI$Parser.fail(Unknown Source)
at java.net.URI$Parser.scanEscape(Unknown Source)
at java.net.URI$Parser.scan(Unknown Source)
at java.net.URI$Parser.checkChars(Unknown Source)
at java.net.URI$Parser.parseHierarchical(Unknown Source)
at java.net.URI$Parser.parse(Unknown Source)
at java.net.URI.<init>(Unknown Source)
... 6 more 
```

这是代码抛出错误

```
HttpClient httpclient = new DefaultHttpClient();
HttpGet httpget = new HttpGet(url);
HttpResponse response = httpclient.execute(httpget); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T10:04:29.497

还用 编码百分号`%25`。

`http://something.com/test/anything 10%-20% 04-03-07`将与`http://something.com/test/anything%2010%25-20%25%2004-03-07`.

您应该可以为此使用例如[URLEncoder.encode](http://docs.oracle.com/javase/6/docs/api/java/net/URLEncoder.html#encode%28java.lang.String,%20java.lang.String%29) - 请记住，您需要对路径部分进行 urlencode，而不是在此之前的任何内容，所以类似于

```
String encodedUrl =
    String.format("http://something.com/%s/%s",
      URLEncoder.encode("test", "UTF-8"),
      URLEncoder.encode("anything 10%-20% 04-03-07", "UTF-8")
    ); 
```

注意： URLEncoder 将空格编码为`+`而不是`%20`，但它应该同样有效，两者都可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:09:20.877

您可以使用[java.net.URI](http://docs.oracle.com/javase/6/docs/api/java/net/URI.html)从您的字符串创建一个 uri

```
String url = "http://something.com/test/anything 10%-20% 04-03-07"

URI uri = new URI(
    url,
    null);
String request = uri.toASCIIString();

HttpClient httpclient = new DefaultHttpClient();
HttpGet httpget = new HttpGet(request);
HttpResponse response = httpclient.execute(httpget); 
```

# toolbar - Infragistics UltraToolbarsManager 编辑功能区组

> ID：12422259
> 
> 赞同：1
> 
> 时间：2012-09-14T10:00:31.093
> 
> 标签：toolbar, designer, infragistics

我只是在我的工具栏上工作，我使用`InfragisticsToolbarsManager`并且我在设计器中创建了一个`Ribbon`2 `ribbon groups`。您可以使用这个新的组按钮非常轻松地添加组。并使用新的工具按钮（组的右上角）插入项目！

但我不能右键单击它，属性窗口显示 wole ultratoolbarmanager 的属性。

但我想知道如何编辑`GroupName/Text`屏幕截图上标记的 ive。 [https://dl.dropbox.com/u/62849616/InfToolBar.JPG](https://dl.dropbox.com/u/62849616/InfToolBar.JPG) Atm 我在代码中这样做，`Designer.cs` 但我认为这不是一个真正的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T13:07:42.660

UltraToolbarManager 属性可以通过右键单击表单设计器底部窗格中的 UltraToolbarManager 控件并选择*“自定义属性页”*来打开。
然后依次选择**Ribbon**属性、**Tabs**属性、适当的选项卡索引（在您的示例中为 0）、**Groups**属性和特定组（在您的示例中为 0 和 1）。在每个组内，您将找到带有要更改的文本的**Caption属性**

# sql - 如何根据条件查找某些特定表的记录数？

> ID：12422266
> 
> 赞同：1
> 
> 时间：2012-09-14T10:00:42.633
> 
> 标签：sql, sql-server-2008

我有一个典型的要求。

我有一个用户表“tblUsers”，其中有两列“UserID”和“UserEmail”。UserEmail 列不是唯一列，因此可以存在具有相同电子邮件 ID 的两条记录，而 UserID 列是标识列。

我还有两个表还有“tblOrders”和“tblTravelers”，它们都有“UserID”列作为外键（链接到“tblUsers”UserID 列）。

现在，我想要的是一个存储过程，它返回这个数据表：

![在此处输入图像描述](../Images/35c19b4e7ed0db25f99644fbd7fc5500.png)

我的意思是，如果我将“UserEmail”作为参数提供给存储过程，它应该返回上表，显示与给定“UserEmail”的每个 UserID 关联的记录。

请帮帮我，我是 SQL Server 的新手，我知道如何找出单个记录数，但我无法找到上述要求的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T10:11:27.057

这将返回转置的数据——订单和旅行者作为列，用户作为行。

```
select users.id, users.email, 
       COUNT(distinct orders.oid) as orders, 
       COUNT(distinct travellers.tid) as travellers 
from users
    left join orders on users.id = orders.userid
    left join travellers on users.id = travellers.userid
where users.email = @email
group by users.id, users.email 
```

# php - 使用 mod_rewrite 模拟 Facebook 风格的 URL

> ID：12422270
> 
> 赞同：-1
> 
> 时间：2012-09-14T10:00:47.953
> 
> 标签：php, .htaccess, mod-rewrite

我希望地址栏显示的内容：

```
http://facebook.com/user

http://facebook.com/user/ -> http://facebook.com/user

http://facebook.com/user/photos -> http://facebook.com/user/photos 
```

我的重写规则：

```
RewriteEngine On
RewriteRule ^(.+)/$ $1 [NC]
RewriteRule ^([A-Za-z0-9_-]+)/?([A-Za-z0-9_-]*)$ user.php?id=$1&second=$2 [NC,L] 
```

怎么了：

```
1). http://domain.com/user (working well)

2). http://domain.com/user/ (keeps the / in the address bar and destroys css/js/img paths)

3). http://domain.com/user/photos (same result as 2, correct except the paths) 
```

如果我使用`<base href="...">`强制路径页面正确显示。但我想在没有它的情况下解决我的问题。

如何删除地址栏中的尾部斜杠？重写似乎按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:07:06.923

Your issue is that when you someone access `http://domain.com/user/photos` for example, the css, js and other relative links in the page resolves to `http://domain.com/user/css/main.css` (for example).

You have two solutions for this :

*   Add base tag in head section of the page (wich you tried already)
*   Change all relative links in your page absolute links (wich I don't recommand you)

So the easier solution is to use the base tag.

Note: Even if you remove the slash in the end, it may work for `http://domain.com/user/` but will definitly not work for `http://domain.com/user/photos`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T10:07:53.287

When you are going to use Friendly URLs, you must use absolute paths for your resources.

### Initial Declaration

You might have declared `index.php` with this way:

```
<link rel="stylesheet" href="stylesheets/styles.css" />
<img src="assets/user.png" />
<script type="text/javascript" src="scripts/home.js"></script> 
```

### Proposed Way using `/` for Absolute Paths

But it has to be translated this way:

```
<link rel="stylesheet" href="/stylesheets/styles.css" />
<img src="/assets/user.png" />
<script type="text/javascript" src="/scripts/home.js"></script> 
```

Notice the `/` in the front to make them as Absolute URLs.

### Using `<base href="/" />`

If this is going to be a tedious task for you, you can use this tag:

```
<base href="/" /> 
```

This will make your Relative URLs to relate with the Root.

### Using a `$baseurl` variable

Another better way is to prepend with a `$baseurl` variable.

```
<link rel="stylesheet" href="<?php echo $baseurl; ?>/stylesheets/styles.css" />
<img src="<?php echo $baseurl; ?>/assets/user.png" />
<script type="text/javascript" src="<?php echo $baseurl; ?>/scripts/home.js"></script> 
```

This way, you can even change the `$baseurl` value if you are hosting in a folder and not in the root!

# delphi - 从 Delphi 网格中读取数据

> ID：12422275
> 
> 赞同：0
> 
> 时间：2012-09-14T10:01:08.577
> 
> 标签：delphi, delphi-2009, access-violation

我在 Delphi 中有一个带有网格的应用程序。

我需要创建另一个应用程序，它应该

a) 从网格中读取数据 b) 将数据写入网格中，

即模拟人类用户的动作。

为了从表中读取数据，我使用以下代码：

```
Procedure TForm1.Button1Click(Sender: TObject);
type
  PForm = ^TForm;
  PClass = ^TClass;
var
  formPtr : PForm;
  I: Integer;
  msg : string;
  windowHandle : HWND;
begin
  windowHandle := FindWindow('TForm1', 'FORMSSSSS');
  formPtr := PForm(GetVCLObjectAddr(windowHandle) + 4);
  if (not Assigned(formPtr)) then Exit;
  for I := 0 to formPtr^.ControlCount - 1 do // Error
  begin
    msg := msg + formPtr^.Controls[i].Name;
    if formPtr^.Controls[i].Name = 'StringGrid1' then
    begin
      msg := TStringGrid(formPtr^.Controls[i]).Cells[1, 1];
    end;

  end;
  ShowMessage(msg);
end;

function GetVCLObjectAddr(AHandle: HWND): DWORD;
var
  pid: DWORD;
begin
  pid := 0;
  GetWindowThreadProcessId(AHandle, pid);
  if (pid =0) then
  begin
    Result := 0;
    Exit;
  end;
  Result := GetPropW(AHandle, PWideChar(WideString(Format('Delphi%.8X', [PID]))))
end; 
```

在带有“错误”注释的行中，出现以下问题：

> Project Project1.exe 引发异常类 EAccessViolation，并带有消息“模块 'Project1.exe' 中地址 0046C8C3 的访问冲突”。读取地址 01262984'。

当我在该行上放置一个断点并检查“Watches”选项卡中表达式“formPtr^”的值时，我收到“Inaccessible value”消息。

应该如何修改代码以便能够从网格中读取数据？

升级版：

如果我将代码更改为下面给出的版本，内存问题就会消失。但是出现了另一个问题——控制计数等于零。

```
Procedure TForm1.Button1Click(Sender: TObject);
var
  formPtr : TForm;
  I: Integer;
  msg : string;
  windowHandle : HWND;
begin
  windowHandle := FindWindow('TForm1', 'FORMSSSSS');
  formPtr := TForm(GetVCLObjectAddr(windowHandle) + 4);
  if (not Assigned(formPtr)) then Exit;
  for I := 0 to formPtr.ControlCount - 1 do
  begin
    msg := msg + formPtr.Controls[i].Name;
    if formPtr.Controls[i].Name = 'StringGrid1' then
    begin
      msg := TStringGrid(formPtr.Controls[i]).Cells[1, 1];
    end;    
  end;
  ShowMessage(msg);
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:19:34.930

这种方法行不通。您的两个进程具有独立的地址空间。一个地址，也就是一个对象，仅在拥有该地址或对象的进程的上下文中才有意义。您只能调用驻留在进程中的对象的方法。

# sql - 构造 SQL 语句以检索相同/不同表中特定记录的 count()

> ID：12422279
> 
> 赞同：1
> 
> 时间：2012-09-14T10:01:36.280
> 
> 标签：sql, sql-server, sql-server-2008

我之前确实问过这个问题，但必须承认对基于 SQL 的解决方案有偏见，现在我找不到这个问题，所以我会再试一次，仔细措辞并对提供的任何解决方案持更开放的态度。

我有两张桌子：

```
tblCurrent 
 Ref  | CustomerID | ... .. .. .  . |
X001
X002
X003

tblHistorical 
 Ref   | ... .. .. .  . |  Missing | Matched
X001   | ... .. .. .  . |  TRUE    | FALSE
X001   | ... .. .. .  . |  FALSE   | FALSE
X002   | ... .. .. .  . |  TRUE    | TRUE
X002   | ... .. .. .  . |  TRUE    | FALSE
X003   | ... .. .. .  . |  FALSE   | FALSE
X003   | ... .. .. .  . |  TRUE    | TRUE 
```

Ref 在 tblCurrent 中是唯一的，但在 Historical 中不是。

如何构建一个基于 tblCurrent 的视图，该视图会产生三个额外的列，这些列计算 tblHistorical 中的记录数：

*   匹配 Ref AND Missing 为 TRUE

*   匹配 Ref AND Missing 为 False

*   匹配 Ref AND Matched 为 True

请注意，我需要添加额外的列来计算 tblHistorical 基于类似标准的记录数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T10:04:46.483

```
SELECT R.Ref,
SUM(CASE WHEN H.Missing = TRUE THEN 1 ELSE 0 END) as MissingTrue,
SUM(CASE WHEN H.Missing = FALSE THEN 1 ELSE 0 END) as MissingFalse,
SUM(CASE WHEN H.Matched = TRUE THEN 1 ELSE 0 END) as MatchedTrue
FROM tblRef R JOIN tblHistorical H
ON R.Ref = H.Ref 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T10:06:33.867

我认为您需要使用`LEFT JOIN`它，因为有时`ref`可能不存在于`tblHistorical`桌子上。

```
SELECT  a.ref,
        SUM(CASE WHEN b.Missing = 'True' THEN 1 ELSE 0 END) missingTrue,
        SUM(CASE WHEN b.Missing = 'False' THEN 1 ELSE 0 END) missingFalse,
        SUM(CASE WHEN b.Matched = 'True' THEN 1 ELSE 0 END) matchTrue
FROM    tblCurrent a
        LEFT JOIN tblHistorical b
            on a.ref = b.ref
GROUP BY a.ref 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T10:08:23.077

```
SELECT R.Ref,
SUM(CASE WHEN H.Missing = TRUE THEN 1 ELSE 0 END) as MissingTrue,
SUM(CASE WHEN H.Missing = FALSE THEN 1 ELSE 0 END) as MissingFalse,
SUM(CASE WHEN H.Matched = TRUE THEN 1 ELSE 0 END) as MatchedTrue
FROM tblRef R 
INNER JOIN tblHistorical H
ON R.Ref = H.Ref
Group by R.Ref 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T10:16:31.463

```
SELECT T.REF,
        COUNT(CASE WHEN H.MISSING = 'TRUE' THEN 1  END) AS MISSINGTRUE,
        COUNT(CASE WHEN H.MISSING = 'FALSE' THEN 1 END) AS MISSINGFALSE,
        COUNT(CASE WHEN H.MATCHED = 'TRUE' THEN 1  END) AS MATCHEDTRUE
FROM   TBLREF T 
JOIN   TBLHISTORICAL H
ON     R.REF = H.REF
GROUP BY T.REF 
```

# slickgrid - Slickgrid onHeaderClick 检测列号

> ID：12422280
> 
> 赞同：1
> 
> 时间：2012-09-14T10:01:47.690
> 
> 标签：slickgrid

单击它时我尝试检测列号，但没有结果。尝试使用 getCellFromEvent，但它仅适用于单元格，而不适用于标题，其他可以对网格执行相同操作的方法 - 未找到。请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T21:35:19.203

您需要使用以下参数：

```
grid.onHeaderClick.subscribe(function(e, args) {
    var columnID = args.column.id;
    console.log(columnID);
}); 
```

# bash - 直接修改传递的参数

> ID：12422283
> 
> 赞同：0
> 
> 时间：2012-09-14T10:02:17.487
> 
> 标签：bash, obfuscation

我有以下功能：

```
s() { c=$1; while((c--)) ; do printf 'x' ; done }; s 2 
```

所以`x`被打印了两次。

是否可以简化此代码？

起初我想跳过分配部分`c=$1;`并做：

```
while((1--)) 
```

你有什么想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:25:31.123

试试这个：

```
s() { for i; do printf 'x' ; done }; s 2 3 
```

这里`for`循环默认接受传递给函数的参数并将它们分配给 i，所以你不再需要`c=$1`了。

好的，我没有直接回答你的问题。

要修改参数，必须使用**`set -- word`**，例如：

```
> set -- 5
> echo $1
5
> set -- $(( $1-1 ))
> echo $1
4 
```

您的功能将是：

```
s() { while (( $1 )); do echo 'x'; set -- $(( ${1}-1 )); done } 
```

但是你会在脚本中失去一点性能和清晰度：

```
>time s 100000 > /dev/null
real    0m1.235s
user    0m1.196s
sys     0m0.040s 
```

而与`s() { c=$1; while (( c-- )); do echo 'x'; done }`：

```
>time s 100000 > /dev/null
real    0m0.520s
user    0m0.496s
sys     0m0.024s 
```

我试过这个：

```
s1() { for i in $(eval echo {1..${1}}); do printf 'x'; done } 
```

但主要问题是为`eval`语句创建子进程。性能比上面要快一点，但还是有点难读：

```
>time s1 100000 > /dev/null
real    0m0.453s
user    0m0.412s
sys     0m0.040s 
```

希望这可以帮助。

# html - asp.net mvc中的编码值

> ID：12422284
> 
> 赞同：0
> 
> 时间：2012-09-14T10:02:18.567
> 
> 标签：html, asp.net-mvc, encoding

我在 msdn 中看到了[MvcHtmlString](http://msdn.microsoft.com/en-us/library/system.web.mvc.mvchtmlstring%28v=vs.108%29.aspx)，但我有一个关于编码的问题。

编码和解码值到底是什么`Encode ASP.Net MVC`以及有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T10:08:09.790

Some characters must be encoded to ensure proper display. For instance `<` and `>` are special characters that tell the browser that the text between the two is an HTML tag and must be interpreted as part of the markup. To be able to display `<` and `>` as part of the text, it must be encoded. HTML encoding will substitute these with `&lt` and `&gt` respectively. The browser then knows it's not part of the markup and displays it accordingly.

Decoding is the other way around: `&lt` becomes `<`, `&amp` becomes `&`, etc.

*   Here's a list: [HTML Codes - Characters and symbols](http://www.ascii.cl/htmlcodes.htm)

# android - 在 Android 中录制视频和捕获图像

> ID：12422286
> 
> 赞同：0
> 
> 时间：2012-09-14T10:02:22.373
> 
> 标签：android, image, video, record

我正在开发一个应用程序，我需要在我的应用程序中运行恒定的相机所以我有两件事要在这里实现，1\. 捕获图像 2\. 录制视频

我在录制视频以及停止和重置相机时遇到困难

以下是我的代码片段：-

```
import java.io.File;
import java.io.IOException;
import java.util.Date;
import android.app.Activity;
import android.hardware.Camera;
import android.hardware.Camera.Parameters;
import android.media.MediaRecorder;
import android.media.MediaRecorder.OnInfoListener;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;
import android.view.MenuItem;
import android.view.SurfaceHolder;
import android.view.SurfaceHolder.Callback;
import android.view.Menu;
import android.view.SurfaceView;
import android.widget.Toast;

public class Myvideo1 extends Activity  implements SurfaceHolder.Callback {

    @Override
    protected void onDestroy() {
     //   stopRecording();
        super.onDestroy();
    }

    private SurfaceHolder surfaceHolder;
    private SurfaceView surfaceView;
    public MediaRecorder mrec = new MediaRecorder();    
    private Camera mCamera;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        surfaceView = (SurfaceView) findViewById(R.id.videoview);
   //     if(mCamera==null)
    //        mCamera = Camera.open();

        // Please maintain sequence of following code. 

        // If you change sequence it will not work.

        surfaceHolder = surfaceView.getHolder();
        surfaceHolder.addCallback(this);
        surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

        try {
            startRecording();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu)
    {

        menu.add(0, 0, 0, "Start");
        return super.onCreateOptionsMenu(menu);
    }

    @Override
   public boolean onOptionsItemSelected(MenuItem item)

    {
        if(item.getTitle().equals("Start"))
        {
            try {

                startRecording();
            //    item.setTitle("Stop");

            } catch (Exception e) {

                String message = e.getMessage();
                Log.i(null, "Problem " + message);
                mrec.release();
            }
        }

        else
        //  if(item.getTitle().equals("Stop"))
        {
          //  mrec.stop();
         //   mrec.release();
         //   mrec = null;
          //  item.setTitle("Start");
        }

        return super.onOptionsItemSelected(item);
    }

    protected void startRecording() throws IOException
    {
        if(mCamera==null)
            mCamera = Camera.open();

         String filename;
         String path;

         path= Environment.getExternalStorageDirectory().getAbsolutePath().toString();

         Date date=new Date();
         filename="/rec"+date.toString().replace(" ", "_").replace(":", "_")+".mp4";

         //create empty file it must use
         File file=new File(path,filename);

        mrec = new MediaRecorder(); 

        mCamera.lock();
        mCamera.unlock();

        // Please maintain sequence of following code. 

        // If you change sequence it will not work.
        mrec.setCamera(mCamera);    
        mrec.setVideoSource(MediaRecorder.VideoSource.CAMERA);
        mrec.setAudioSource(MediaRecorder.AudioSource.MIC);     
        mrec.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
        mrec.setVideoEncoder(MediaRecorder.VideoEncoder.MPEG_4_SP);
        mrec.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
        mrec.setPreviewDisplay(surfaceHolder.getSurface());
        mrec.setOutputFile(path+filename);
        mrec.setMaxDuration(10000);     //10 sec

  //  }

    mrec.setOnInfoListener(new OnInfoListener() {   
        @Override  
        public void onInfo(MediaRecorder mr, int what, int extra) {  
            if (what == MediaRecorder.MEDIA_RECORDER_INFO_MAX_DURATION_REACHED) {   
                onStop();    

                Toast.makeText(getApplicationContext(), "video of 10 sec is completed", Toast.LENGTH_SHORT).show();

            }  
        }
    }
    ); 

    }

    public void preparerec()
    {
         try {
            mrec.prepare();
            mCamera.setPreviewDisplay(this.surfaceHolder);
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    public void startrec()
    {
         mrec.start();
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width,int height) {      

        Camera.Parameters parameters = mCamera.getParameters();      
        parameters.setPreviewSize(width, height);     
        mCamera.setParameters(parameters);       
        mCamera.startPreview(); 

    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {       

       /* if (mCamera != null) {
            Parameters params = mCamera.getParameters();
            mCamera.setParameters(params);

            Log.i("Surface", "Created");
        }
        else {
            Toast.makeText(getApplicationContext(), "Camera not available!",
                    Toast.LENGTH_LONG).show();

            finish();
        }*/

         try                 {      
             //Open the Camera in preview mode            
            mCamera = Camera.open(); 
            preparerec();
            //        
             }              
         catch(Exception ioe)          
             {          
             ioe.printStackTrace(System.out);          
             } 

    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        mCamera.stopPreview();
        mCamera.release();       

    }

    public void onStop(){
        mrec.stop();
        mrec.release();
        mrec = null;
     //   item.setTitle("Start");
    }

} 
```

当我开始录制时，三星 Galaxy s2 上的屏幕会闪烁并变绿，有什么解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T22:39:58.657

您将在 onCreate（在 startRecording 中 - 始终在 surfaceCreated 之前运行）和 surfaceCreated 中创建相机对象。只打开一次相机；第二次会抛出异常。

我建议您在用户点击按钮时将您的录制代码全部运行；您已经将设置工作拆分为 2-3 个方法，这些方法都在不同的时间触发，并且您假设了很多关于它们被调用的顺序。

如果您需要在应用程序启动时立即开始录制，我建议让每个回调检查是否所有其他回调都已完成，然后启动录制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T04:15:37.310

[这个解决方案](http://www.java2s.com/Open-Source/Android/App/android-in-practice/com/manning/aip/media/VideoRecorderActivity.java.htm)非常适合我。

# php - MySQL 海量数据操作处理

> ID：12422288
> 
> 赞同：1
> 
> 时间：2012-09-14T10:02:39.777
> 
> 标签：php, mysql, triggers, views

我在处理数据库中的大数据时遇到以下问题：

基本上，来自数字传感器的所有计量每秒都存储在数据库中。报告应该从所有数据中显示的只是发生的变化，例如在时间 X 寄存器 #1 将值从 0 更改为 1。

我创建了一个程序，它只能返回我需要的数据（更改），这为我节省了大量的 php 处理但最大的问题是，对于 4 天的当前数据，查询需要 6 * N秒完成其中 N 是所选寄存器的数量。

现在我想知道克服这个问题的最佳解决方案是什么。

另一个想法是在数据计量的每个新插入上触发，但问题是这将更加复杂，因为我需要查看在另一个时间提交的先前计量。

所以我想创建在新数据以某种方式到达时会自动更新的视图。这意味着当对报告发出请求时，数据将准备好并从视图中获取。

这会是一个好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:10:45.383

我假设您的表被很好地索引并且您的查询很好地使用了这些索引？

在这种情况下，您似乎可能会从综合指数中受益最多——在日期和注册上都有一个。每个索引都会有所帮助，但两者的综合索引将有更多帮助。

添加复合索引的语法是：

```
alter table yourTableName add index yourIndexName(col1, col2);

mysql> select * from table1;

+---------+------+------+-------------+
| autonum | ID   | name | metavalue   |
+---------+------+------+-------------+
|       1 |    1 | Rose | Drinker     |
|       2 |    1 | Rose | Nice Person |
|       3 |    1 | Rose | Runner      |
|       4 |    2 | Gary | Player      |
|       5 |    2 | Gary | Funny       |
|       6 |    2 | Gary | NULL        |
|       7 |    2 | Gary | Smelly      |
+---------+------+------+-------------+
7 rows in set (0.01 sec)

mysql> alter table table1 add index autoNumID(autonum, ID);
Query OK, 0 rows affected (0.02 sec)
Records: 0  Duplicates: 0  Warnings: 0 
```

您可以研究的另一件事是制作一个更新的汇总表（每小时或每天等）。使用 CRON 或其他东西来运行查询，该查询会将您的数据摘要创建到一个小得多的表格中，您的报告将用于该表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:06:44.790

使用单个查询就可以从现有数据中识别状态更改，但是（正如您所发现的）非常昂贵。我会敦促您将每个状态更改存储在缓存中。

正如[@Fluffeh 解释](https://stackoverflow.com/a/12422430/623041)的那样，如果您使用合适的索引，从现有表中查找最新状态不会很昂贵；所以触发方法应该是相当合理的。

所以：

1.  定义一个合适的索引（如果它不存在）：

    ```
    ALTER TABLE existing_table ADD INDEX (register_id, timestamp); 
    ```

2.  为缓存创建一个表（并且可以选择设置用户权限，以便您的应用程序不能直接修改它）：

    ```
    CREATE TABLE status_changes VALUES (
      register_id ...,
      timestamp   TIMESTAMP,
      old_status  ...,
      new_status  ...,

      PRIMARY KEY                (register_id, timestamp),

      FOREIGN KEY                (register_id, timestamp, old_status)
       REFERENCES existing_table (register_id, timestamp, status),

      FOREIGN KEY                (register_id, timestamp, new_status)
       REFERENCES existing_table (register_id, timestamp, status)
    ); 
    ```

3.  从有权修改新表的用户定义触发器：

    ```
    DELIMITER ;;

    CREATE TRIGGER record_change AFTER INSERT ON existing_table FOR EACH ROW
    BEGIN
      DECLARE  _last_status ... ;

      SELECT   last.status
      INTO     _last_status
      FROM     existing_table AS last
      WHERE    last.register_id <=> NEW.register_id
           AND last.timestamp    <  NEW.timestamp
      ORDER BY last.timestamp DESC
      LIMIT    1;

      IF NOT NEW.status <=> _last_status THEN
        INSERT INTO status_changes (
          register_id,
          timestamp,
          old_status,
          new_status
        ) VALUES (
          NEW.register_id,
          NEW.timestamp,
          _last_status,
          NEW.status
        );
      END IF;
    END;;

    DELIMITER ; 
    ```

4.  从历史数据中填充新表：

    ```
    INSERT IGNORE INTO status_changes (
      register_id,
      timestamp,
      old_status,
      new_status
    )
    SELECT NEW.register_id,
           NEW.timestamp,
           (
             SELECT   last.status
             FROM     existing_table AS last
             WHERE    last.register_id <=> NEW.register_id
                  AND last.timestamp    <  NEW.timestamp
             ORDER BY last.timestamp DESC
             LIMIT    1
           ) AS _last_status,
           NEW.status
    FROM   existing_table AS NEW
    WHERE  NOT NEW.status <=> (
             SELECT   last.status
             FROM     existing_table AS last
             WHERE    last.register_id <=> NEW.register_id
                  AND last.timestamp    <  NEW.timestamp
             ORDER BY last.timestamp DESC
             LIMIT    1
           )
    ; 
    ```

# bash - bash命令将html页面转换为文本文件

> ID：12422289
> 
> 赞同：44
> 
> 时间：2012-09-14T10:02:42.573
> 
> 标签：bash

我是linux的初学者。请您帮我如何将html页面转换为文本文件。文本文件将从网页中删除所有图像和链接。我只想使用 bash 命令而不是 html 到文本转换工具。例如，我想将第一页谷歌搜索结果转换为“计算机”。

谢谢

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-14T10:57:53.160

最简单的方法是使用类似这样的转储（简而言之是可查看 HTML 的文本版本）。

远程文件：

```
lynx --dump www.google.com > file.txt
links -dump www.google.com 
```

本地文件：

```
lynx --dump ./1.html > file.txt
links -dump ./1.htm 
```

将字符集转换为 utf8（[请参阅](http://www.microhowto.info/howto/convert_from_html_to_formatted_plain_text.html)）：

```
lynx -dump -display_charset UTF-8 ./1.htm
links -dump -codepage UTF-8 ./1.htm 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-09-14T10:41:22.300

您在命令行上有[html2text.py 。](https://github.com/aaronsw/html2text)

用法：`html2text.py [(filename|url) [encoding]]`

```
Options:
  --version             show program's version number and exit
  -h, --help            show this help message and exit
  --ignore-links        don't include any formatting for links
  --ignore-images       don't include any formatting for images
  -g, --google-doc      convert an html-exported Google Document
  -d, --dash-unordered-list
                        use a dash rather than a star for unordered list items
  -b BODY_WIDTH, --body-width=BODY_WIDTH
                        number of characters per output line, 0 for no wrap
  -i LIST_INDENT, --google-list-indent=LIST_INDENT
                        number of pixels Google indents nested lists
  -s, --hide-strikethrough
                        hide strike-through text. only relevent when -g is
                        specified as well 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2015-09-17T01:24:33.310

在 OSX 上，您可以使用名为 textutil 的命令行工具将 html 文件批量转换为 txt 格式：

```
textutil -convert txt *.html 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-06-17T02:20:27.890

在 ubuntu/debian`html2text`中是一个不错的选择。[http://linux.die.net/man/1/html2text](http://linux.die.net/man/1/html2text)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-02-17T01:21:33.500

您可以获取[nodejs](http://nodejs.org/)并全局安装模块[html-to-text](https://npmjs.org/package/html-to-text)：

```
npm install -g html-to-text 
```

然后像这样使用它：

```
html-to-text < stuff.html > stuff.txt 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-09-14T11:01:28.387

使用 sed

```
sed -e 's/<[^>]*>//g' foo.html 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-09-15T00:00:59.887

我使用了[python-boilerpipe](https://github.com/misja/python-boilerpipe)，到目前为止效果很好......

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-09-14T10:51:17.470

我认为链接是最常用的工具。检查 man 链接并搜索纯文本或类似内容。-dump 是我的猜测，也搜索一下。该软件随大多数发行版一起提供。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-09-02T23:46:33.007

本地 htm & html 文件的批处理模式，`lynx`必需

```
#!/bin/sh
# h2t, convert all htm and html files of a directory to text 

for file in `ls *.htm`
do
new=`basename $file htm`
lynx -dump $file > ${new}txt 
done
#####
for file in `ls *.html`
do
new=`basename $file html`
lynx -dump $file > ${new}txt 
done 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-01-17T22:50:24.113

pandoc工具可以将 HTML[转换](https://pandoc.org/)为纯文本（在其他几种标记格式中），与此处答案中的其他几种工具相比，我更喜欢它格式化文本的方式——它使用大量空格，就像浏览器一样，而不是打包所有内容一起喜欢`html2text`。您可能想比较一些工具，然后选择一个。要在 Ubuntu 或 Debian 上安装它：

```
sudo apt install pandoc 
```

它具有从文件读取和写入的选项，但我发现它最容易在管道模式下使用，您只需指定要转换的格式：

```
curl URL | pandoc -f html -t plain > output.txt 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-07-03T15:03:04.103

将 html 页面递归转换为文本文件的 Bash 脚本。适用于 httpd 手册。使 grep -Rhi 'LoadModule ssl' /usr/share/httpd/manual_dump -A 10 工作方便。

```
#!/bin/sh
# Adapted from ewwink, recursive html to txt dump
# Made to kind of recursively (4 levels) dump the /usr/share/httpd manual to a dump httpd manual directory into a txt dump including dir
# put this script in /usr/share/httpd for it to work (after installing httpd-manual rpm)

for file in ./manual/*{,/*,/*/*,/*/*/*}.html
do
new=`basename $file .html`
mkdir -p ./manual_dump/${new}
lynx --dump $file > ./manual_dump/${new}.txt
done 
```

# c# - ASP.NET Chart 如何显示所有 XValues

> ID：12422290
> 
> 赞同：1
> 
> 时间：2012-09-14T10:02:44.553
> 
> 标签：c#, asp.net, charts, series

我有下面的图表。它显示正确，但我怎样才能让它显示一年中的所有月份而不是显示替代月份。它在 30 天范围内执行此操作，其中间隔每 5 点显示一次日期。

我敢肯定这很容易，也许是我缺少的设置？它的标准 ASP.NET 图表。

![图表问题](../Images/d2b0446ef21e29425b0310626fd9109b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T14:28:05.283

根据[http://msdn.microsoft.com/fr-fr/library/system.web.ui.datavisualization.charting.axis.interval.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.datavisualization.charting.axis.interval.aspx) ，您可以尝试以下操作：

```
myArea.AxisX.Interval=1; 
```

其中 myArea 是您的主要 ChartArea

注意：“轴的主要刻度线、网格线或标签的间隔属性优先于轴对象的间隔属性设置。”

# c++ - “top”程序使用什么技术在屏幕上重新显示数据？

> ID：12422292
> 
> 赞同：4
> 
> 时间：2012-09-14T10:03:03.380
> 
> 标签：c++, c, linux, terminal, command-line-interface

您可能知道，当您在终端中运行“top”命令时，它会向您显示计算机上最繁忙的进程并定期更新值而无需添加一行。

允许它执行此操作的技术是什么——从 CLI 程序更改打印的字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T10:05:10.870

一种方法是获取终端窗口的宽度/高度，并且每次都清除/打印整个屏幕。另一种方法是使用[VT100 转义码](http://wiki.bash-hackers.org/scripting/terminalcodes)重新定位光标并覆盖该位置上的内容。第三种方法是使用库，例如[`ncurses`](http://en.wikipedia.org/wiki/Ncurses)​​ .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T10:04:32.603

终端接受一些用于屏幕定位等的控制序列。查看`curses`/[`ncurses`](http://en.wikipedia.org/wiki/Ncurses)库。此外，如果您只想修改一行，您可以`\r`再次使用并打印该行。

# android - 如何在真机上运行安卓应用？

> ID：12422294
> 
> 赞同：1
> 
> 时间：2012-09-14T10:03:06.710
> 
> 标签：android, eclipse, device

我是 android 的新手。谁能告诉我如何在设备上运行应用程序。我已经连接并启用了设备上的 USB 调试并正在运行。但它总是只启动模拟器。我如何在设备而不是模拟器上运行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T10:13:21.850

我认为你的模拟器是自动的。您可以将其更改为手动。

试试这个，

**第1步**

转到运行配置

![在此处输入图像描述](../Images/f99f10c544e9f795cb47d657ae382e94.png)

您可以看到三列 Android、Target 和 Common。

![在此处输入图像描述](../Images/d0ab85b6da2efcfd0fbfb41d33d06f35.png)

**第2步**

选择目标

**第 3 步**

选择始终提示选择设备。单击确定

**第4步**

现在运行您的项目，您应该会看到模拟器和您的设备。选择您的设备，然后单击确定。 ![在此处输入图像描述](../Images/febf550a733bedbc02a302fe4903b700.png)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T10:15:05.353

```
第一步：打开你的日食。

Step2：选择您拥有的项目。

步骤3：右键单击它。

Step4: goto run as 

Step5: 选择运行配置。

第六步：选择目标选项卡。

第 7 步：单击“始终提示选择一个设备”。

第八步：点击应用。
第9步：然后点击运行。如果您已连接到设备，它将显示一个可供选择的列表。

```

如果您的设备不可见。关闭对话框。

转到 DDMS。选择设备。单击右上角的向下箭头并选择重置 adb。

理想情况下，它应该在列表中显示您的设备。选择您选择的设备。

点击确定..

希望这会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T10:04:52.350

在此处阅读文档：http: [//developer.android.com/tools/device.html](http://developer.android.com/tools/device.html)

请注意，您必须在开发人员模式下运行您的设备（设置 -> 开发人员选项 -> 启用 USB 调试），并且您需要为您的设备安装驱动程序，以便 ADB 能够与其通信（这些是用于 USB 存储的**不同**驱动程序访问，因此即使您可以将 SD 卡作为 USB 存储设备安装在桌面上，您可能仍然缺少 ADB 驱动程序）。要查看 ADB 是否看到您的设备，请连接它并在 shell 中尝试：

```
adb devices 
```

最后，检查您是否没有告诉 Eclipse 在启动时不要询问设备并使用记住的选择（可能是您的模拟器）。做项目->属性->运行/调试设置，然后双击右键，“目标”选项卡并切换到“总是提示选择设备”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T10:06:36.023

**Google 的第一页带有关键字“在真实设备上安装 apk”向我显示：**

> 使用 Android SDK 安装应用程序
> 
> 可以在不使用 Android Market 的情况下安装 APK 文件，尽管该过程更加困难和复杂。要避开 Android Market，您需要使用 Android SDK。
> 
> 1.  下载并安装 Google Android SDK 程序和 Android USB 驱动程序。下载链接如下： . [http://code.google.com/android/intro/installing.html](http://code.google.com/android/intro/installing.html)
>     
>     
> 2.  [http://dl.google.com/android/android_usb_windows.zip](http://dl.google.com/android/android_usb_windows.zip)
>     
>     
> 3.  您需要修改 Android 的设置以允许安装来自其他来源的应用程序。在“设置”下，选择“应用程序设置”，然后启用“未知来源”。同样在“设置”下，选择“SD卡”和“手机存储”，最后启用“禁用USB存储”</p>
>     
>     
> 4.  最后一步很简单。打开命令提示符并键入以下内容： adb install <1>/<2>.apk
>     
>     
> 5.  但是，当您键入命令时，请将 <1> 替换为 APK 文件的路径，并将 <2> 替换为 APK 文件的名称。
>     
>     
> 6.  你完成了！您的应用程序现在已准备好供您使用和享受。

**这是第二个：**

> 您可以使用静态 IP 在本地服务器（apache 或 jboss）上部署 .apk 文件，以使该文件可供下载。现在只需在移动浏览器中打开 apk 文件的下载链接。下载完成后，设备将自动开始安装。

# android - Android中Adapter和Loader的区别

> ID：12422297
> 
> 赞同：18
> 
> 时间：2012-09-14T10:03:10.477
> 
> 标签：android

我想知道Android中的Adapter和Loader有什么区别。我已经查看了文档，但无法弄清楚它们之间的区别。任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-04T18:48:18.040

**两者都提供了数据访问的抽象，但 Loader 在后台执行查询，而 Adapter 在当前（可能是 UI）线程中执行。**

例如，访问[Content Provider的一种](http://developer.android.com/guide/topics/providers/content-provider-basics.html)[直接方法](http://developer.android.com/guide/topics/providers/content-provider-basics.html#DisplayResults)是使用 SimpleCursorAdapter。但是直接从 Activity 查询大量数据可能会导致它被阻塞，从而导致“Application Not Responding”消息。即使没有，用户也会在 UI 中看到令人讨厌的延迟。为避免这些问题，您应该在单独的线程上启动查询，等待它完成，然后显示结果。这就是[CursorLoader](http://developer.android.com/training/load-data-background/index.html)要做的事情。

话虽如此，它们有时会相互结合使用。[在此示例](http://developer.android.com/training/load-data-background/handle-results.html)中，首先使用 CursorLoader 加载数据，然后在 AdapterView 的 Adapter 中更新该光标以进行显示。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-14T10:29:56.427

**加载器：-**
加载器使异步加载活动或片段中的数据变得容易。它们可用于每个活动和片段。它们提供数据的异步加载。
他们监控数据的来源，并在内容发生变化时提供新的结果。
在配置更改后重新创建时，它们会自动重新连接到最后一个加载器的光标。因此，他们不需要重新查询他们的数据。
[在这里](http://amsanjeev.wordpress.com/2011/09/23/an-introduction-to-loaders-in-android/)，您可以找到有关加载程序的一些详细信息。

**适配器：**
适配器对象充当`AdapterView`该视图的基础数据和基础数据之间的桥梁。适配器提供对数据项的访问。Adapter 还负责为数据集中的每一项创建一个 View。 [这是给你的一个视频](http://www.youtube.com/watch?v=N6YdwzAvwOA)。观看此视频，您将了解适配器的工作和优势。
[这](http://www.vogella.com/articles/AndroidListView/article.html)是适配器的最佳教程。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-14T10:09:46.757

我认为这两个类在不同的抽象级别上运行：虽然[Adapter](http://developer.android.com/reference/android/widget/Adapter.html)是一个需要由提供实际数据的类实现的接口，但 Loader 包含基于 Cursor 异步加载数据的功能。

我认为您可以将 Loader 视为 Adapter 加上运行它的 AsyncTask。

还要记住，Loader 只能从 Android 3.0 开始使用。

# delphi - 使用私有变量的 EAccessviolation AV 错误

> ID：12422300
> 
> 赞同：0
> 
> 时间：2012-09-14T10:03:30.010
> 
> 标签：delphi, pascal

出于某种原因，如果变量是在“私有”下定义的（它们需要在此单元内限制访问），我正在整理我得到的一些代码。我在写信给他们时收到 EAccessViolation 错误。如果我在实现之前在 Var 下松散地定义它们，它们就可以正常访问。我正在将我的结构与其他类似单位进行比较，其中私人单位工作正常，无法发现任何重大差异。有什么建议吗？

错误消息：项目 --- 引发异常类 EAccessViolation 错误，并带有消息“模块中的访问违规错误”----。读取地址 0000050F

```
interface
uses
  dialogs, math, dateutils, SysUtils, classes;
type
     //double = extended;   
     TDoubleDoubleArray = array of array of double;
     TSunPositionAlgorithm = class (TObject)
         private
           FLocationChanged: boolean;
         public
           Constructor Create;
           Destructor Destroy;
           procedure SetDefaults;
         end;
  Var
    SunPositionAlgorithm : TSunPositionAlgorithm;
           F_L0: Double;
           F_L1: TDoubleDoubleArray;

implementation
  {TSunPositionAlgorithm }

constructor TSunPositionAlgorithm.Create;
begin
  SetDefaults;
end;

procedure TSunPositionAlgorithm.SetDefaults;
Begin
F_L0:= 1;                   // works ok
  FLocationChanged:=true;  // throws eaccess violation error
End; 
```

调用函数（在 David H 的第一个问题后添加到 Post 中）：

```
 procedure TSun.NRELPositionOfSun(const DateTime: TDateTime; var Azimuth, Elevation, Declination: double);
  Var

    LSunPositionAlgorithm : TSunPositionAlgorithm;
  Begin
    LSunPositionAlgorithm := TSunPositionAlgorithm.Create;
    Try
      LSunPositionAlgorithm.SetDefaults;

  blah..

    Finally
      LSunPositionAlgorithm.Destroy;
    End;
  End; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T10:09:45.697

您还没有显示调用此代码的代码。但是，很明显您没有有效的`TSunPositionAlgorithm`对象。

得到这样的一个：

```
procedure Test;
var
  spa: TSunPositionAlgorithm;
begin
  spa := TSunPositionAlgorithm.Create;
  try
    spa.SetDefaults;
  finally
    spa.Free;
  end;
end; 
```

你可能有这样的代码：

```
procedure Test;
var
  spa: TSunPositionAlgorithm;
begin
  spa.SetDefaults;//oops, spa has not been initialised yet  
end; 
```

或者可能像这样：

```
procedure Test;
var
  spa: TSunPositionAlgorithm;
begin
  spa.Create;//oops, spa has not been initialised yet  
end; 
```

**更新**您现在已经显示了调用代码，但显然还没有全部显示出来，因为问题中的代码没有表现出您描述的行为。我的观点仍然存在，您必须在某处有一个无效的对象引用。我已经展示了几种最常见的实现方式。但是还有其他方法可以获取无效的对象引用。

* * *

问题中代码的另一个问题是您的析构函数。它们必须始终标有`override`指令。

```
destructor Destroy; override; 
```

您必须这样做才能在释放对象时调用您的析构函数。

# javascript - 访问布局信息也会导致浏览器重排吗？

> ID：12422302
> 
> 赞同：3
> 
> 时间：2012-09-14T10:03:35.540
> 
> 标签：javascript, browser, cross-browser, reflow

我知道设置样式属性会导致浏览器重排。访问布局属性时是否也可能发生浏览器重排。如果是，请举一个具体的例子，为什么会导致浏览器重排？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T10:42:48.587

当然，这取决于实现，但通常浏览器在读取元素属性时如果*认为*需要重新查询布局数据（即该元素上的某些与布局相关的属性*或任何父元素*发生更改），就会触发重排。

您可以在此处找到 WebKit 的受影响属性列表：[How (not) to trigger a layout in WebKit](http://gent.ilcore.com/2011/03/how-not-to-trigger-layout-in-webkit.html)。带有示例的更一般的文章：[渲染：重绘，重排/重布局，重新样式](http://www.phpied.com/rendering-repaint-reflowrelayout-restyle/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:09:56.530

获取属性可能（见下文）但更改属性会。样式相关的属性`ele.width`，例如实例。位置属性，例如`src`iframe 或 img 标签，将。

另请注意，附加事件侦听器（`on*=...`、、`addEventListener(*,...)`等）会导致重排。这是由于事件捕获从最外面的父元素到 src 元素的方式，并通过父元素链从 src 元素冒泡。

此外，除非查看指定的页面，否则现代浏览器（例如 chrome）会延迟更新 GUI。由于浏览器确保它正确显示页面，当页面再次变为活动状态时，这会导致重排。这种延迟/队列可以使获取属性看起来好像它们正在导致重排，而实际上是浏览器确保它正确显示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T10:10:09.023

如果您不更改 CSS 属性，仅访问它，那么不，页面将不需要重新呈现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-07T15:12:38.737

我知道这对游戏来说已经很晚了，如果您阅读其他人已经发布的链接，它会以一种您可以找到的方式回答，但值得在这里明确说明：

浏览器的任务是为您提供**当前**值，因此作为一般规则，它将重新排列和重新绘制，以确保您拥有的是当前**值**。我发现以这种方式思考它会有所帮助 - 任何时候您要求页面上任何元素的位置或大小，您都可以假设您将导致重排/重绘。不，它不是 100% 总是正确的，但它足够接近 100%，如果您要求顶部、左侧、底部、右侧、高度、宽度或任何影响这些测量值的东西（如比例、旋转），您应该假设等），您将导致 R/R。这是我能给你的最具体的答案。

再说一次，这并不是 100% 正确的，但我发现如果你这样想，它会在 98% 的时候帮助它*是*正确的，并且不会像其他 2% 那样受到伤害对98有帮助。

# android - 无法通过 `android.R.drawable.x` 访问某些 Android 菜单图标

> ID：12422303
> 
> 赞同：2
> 
> 时间：2012-09-14T10:03:41.283
> 
> 标签：android, menu, icons, android-resources

从[这个问题](https://stackoverflow.com/questions/2687027/standard-android-menu-icons-for-example-refresh)开始。我想知道，为什么我的应用程序中需要的一些菜单图标，即使它们位于 SDK 文件夹中，也无法通过`android.R.drawable`或`@android:drawable/`（在 XML 中）访问？例如 ( `ic_menu_refresh`, `ic_menu_login`)。在我的`AndroidManifest.xml`我有：

```
<uses-sdk android:minSdkVersion="8"
        android:targetSdkVersion="14"/> 
```

我认为这是一个重要的问题，因为它们有不同的尺寸（和设计）取​​决于 android 版本，所以我们很难将它们存储在我们的`res`文件夹中。例如，在较低版本中

> ldpi 是 36x36
> mdpi 是 48x48
> hdpi 是 72x72

在较新的版本中

> ldpi 是 36x36
> mdpi 是 32x32
> hdpi 是 48x48

如果无法直接访问它们，我应该如何将它们存储在我的`res`文件夹中？

要制作像下面这样的不同文件夹，是一个解决方案吗？例如：

```
drawable-mdpi-v10
 drawable-hdpi-v10
 drawable-hdpi-v14 
etc.... 
```

如果有，有多少？

请告诉我哪种方式更适合使用这些图标，以便在应用程序中为各种设备提供最佳设计。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T12:38:31.253

没有任何其他文件夹，除了默认文件夹，并且里面有以下资源

```
drawable-hdpi 48x48
drawable-ldpi 36x36
drawable-mdpi 32x32 
```

在 Nexus S（Android 4.1.1）和模拟器（Android 2.3.3）上看起来不错。

我仍然想知道为什么我不能直接访问它（通过`android.R.drawable`），如果任何人有任何想法......

# java - 创建一个无法删除的文件 Java

> ID：12422304
> 
> 赞同：0
> 
> 时间：2012-09-14T10:03:49.343
> 
> 标签：java, file

大家好，我正在使用 CreateNewFile() 函数制作一个 .txt 文件，我使用 System32 目录中的以下代码将其隐藏。

```
Process p = Runtime.getRuntime().exec("attrib +h " + f.getPath());
p.waitFor(); 
```

该文件已成功隐藏但我需要它是安全的，这样即使您想删除它也无法删除。有没有办法以编程方式实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T10:13:15.957

`I don't think so`你能行的。每个文件都可以在 Windows 中以某种方式删除（以安全模式启动）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:11:30.760

唯一的方法是`Username`在创建文件时使用。`You can not delete file created by other user unless you are administrative.`

您将[在 java 中找到更多信息不可删除文件夹](https://stackoverflow.com/questions/7282901/undeletable-folder-in-java)

# jquery - 是否可以将标题添加到 jEditable 选择下拉列表

> ID：12422305
> 
> 赞同：0
> 
> 时间：2012-09-14T10:03:51.540
> 
> 标签：jquery, html, jquery-plugins, jeditable

是否可以添加`headings`到`jEditable`选择下拉列表？

我想在一次选择中向数据集添加标题。

这相当于`OPTGROUP`在一个`HTML`选择中。

如果这可能？

如果有怎么办？

如果没有，我会开始扩展以允许这样做的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:54:35.287

如果您以纯下载形式使用 jEditable，则无法在选择中实现选项分组。另一方面，jEditable 并不是一个复杂的 java 文件，您可能想尝试添加一个选项来插入 OPTGROUP 标签：

也许看起来像：

```
 $("#ddlGrouped").editable("url", {
            type: 'select',
            submit: 'OK',
            data: {
                   'Swedish Cars' : { 'volvo': 'Volvo', 'saab': 'Saab'},
                   'German Cars' : { 'mercedes': 'Mercedes', 'audi': 'Audi'}
                  }
        }) 
```

这是构建选择的 jEditable 部分：

```
select: {
            element: function (settings, original) {
                var select = $('<select />');
                $(this).append(select);
                return (select);
            },
            content: function (data, settings, original) {
                /* If it is string assume it is json. */
                if (String == data.constructor) {
                    eval('var json = ' + data);
                } else {
                    /* Otherwise assume it is a hash already. */
                    var json = data;
                }
                for (var key in json) {
                    if (!json.hasOwnProperty(key)) {
                        continue;
                    }
                    if ('selected' == key) {
                        continue;
                    }
                    var option = $('<option />').val(key).append(json[key]);
                    $('select', this).append(option);
                }
                /* Loop option again to set selected. IE needed this... */
                $('select', this).children().each(function () {
                    if ($(this).val() == json['selected'] ||
                        $(this).text() == $.trim(original.revert)) {
                        $(this).attr('selected', 'selected');
                    }
                });
            }
        } 
```

但是您还必须检查 jEditable 如何获取所选项目，并且可能还要调整该代码。听起来很有趣，但目前我没有时间尝试并发布工作代码。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T17:55:47.523

根据 Rafael 的回答，我今晚尝试创建它并让它为我的目的工作。请注意我没有让这个灵活，我只是为了我的目的而破解它（2 OPTGROUP，总是相同的标题）。此外，我实际上并不知道如何在 JS 中编程（如您所见），所以这只是作为一个可行的解决方案发布，当然不是最佳实践。

很高兴人们也指出我的代码中的错误 - 只是在这里发布，以防其他人遇到同样的问题。

下面对 jeditable 的更新 - 对此的调用如 Rafael 的帖子中所述（类型为“selectactioner”除外。

```
 selectactioner: {
           element : function(settings, original) {
                var select = $('<select />');
                $(this).append(select);
                return(select);

            },
            content : function(data, settings, original) {

               var obj = jQuery.parseJSON(data);
               var json = obj.attendees;
               var json2 = obj.nonattendees;

                var optgroup = $('<optgroup />');
                optgroup.attr('label', 'Meeting Attendees');
                $('select', this).append(optgroup);

                for (var key in json) {
                    if (!json.hasOwnProperty(key)) {
                        continue;
                    }
                    if ('selected' == key) {
                        continue;
                    } 
                    var option = $('<option />').val(key).append(json[key]);
                    $('select', this).append(option);    
                }                    
                /* Loop option again to set selected. IE needed this... */ 
                $('select', this).children().each(function() {
                    if ($(this).val() == json['selected'] || 
                        $(this).text() == $.trim(original.revert)) {
                            $(this).attr('selected', 'selected');
                    }
                });

                var optgroup = $('<optgroup />');
                optgroup.attr('label', 'Other Users');
                $('select', this).append(optgroup);

                for (var key in json2) {
                    if (!json2.hasOwnProperty(key)) {
                        continue;
                    }
                    if ('selected' == key) {
                        continue;
                    } 
                    var option = $('<option />').val(key).append(json2[key]);
                    $('select', this).append(option);    
                }                    
                /* Loop option again to set selected. IE needed this... */ 
                $('select', this).children().each(function() {
                    if ($(this).val() == json2['selected'] || 
                        $(this).text() == $.trim(original.revert)) {
                            $(this).attr('selected', 'selected');
                    }
                });

            }
        } 
```

# selenium - Groovy DSL vs Antlr 用于人类可读的配置文件

> ID：12422306
> 
> 赞同：2
> 
> 时间：2012-09-14T10:03:51.790
> 
> 标签：selenium, groovy, antlr, dsl

希望这不是一个愚蠢的问题。

对于回归测试，我编写了一个小工具，它使用 Selenium 调出屏幕，根据数据库（多个表）验证加载的屏幕数据，并生成带有屏幕截图的报告（以防出现错误）。

作为一个懒惰的人，我没有为单个用例编写一个类（一个屏幕约 60 个用例），而是编写了一个可以接受多个配置文件作为参数的单个类。 **配置文件规定了测试用例的流程（分步）、表单字段的 xpath/id 与数据库查询的映射、查询等。**

一切正常，但问题是配置文件是 XML。相邻的项目有兴趣并想使用该工具，我希望他们能够轻松理解该工具并根据他们的需求进行定制。在我看来，XML 在这里是不合适的。此外，屏幕表单字段和数据库列之间的映射对于许多使用相同屏幕的不同用例组合的测试用例来说是相同的。如果那里可以继承而不是复制内容，那就太好了。

所以，我希望写一个类似于

```
open application

load editClient window

switchTo generalTab

verify generalTab{

    if dataValidFor clientName then addInfoToReport else addErrorToReport
    if dataValidFor clientAddress then addInfoToReport else addErrorToReport
    if confidentialData visible then addInfoToReport else addErrorToReport

}
...

... 
```

你明白了。**我计划做的就是在后台将 DSL 转换为 Java（或 Groovy，如果需要）方法调用。**我知道要求像 Antlr 这样强大的库的要求并不高。但是，我对 Groovy 的体验非常有限，我什至不知道在 Groovy 中是否可行。

我提到了这个[演示文稿](http://www.slideshare.net/glaforge/groovy-dsls-from-beginner-to-expert-guillaume-laforge-and-paul-king-springone2gx-2011)，它看起来很棒。但是，我担心在 DSL 中包含块的能力，如

```
verify generalTab{
...
} 
```

PS：我不是 Lexers 和 Parsers 方面的专家（非计算机科学本科生），但我设法自学了 ANTLR，并在几年前玩了几个星期。同样，我对 Groovy 的经验很少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T00:53:03.180

我也不是 groovy 的 DSL 方面的专家，但一直在玩它，我认为你的情况是可行的。但它很大。

写作

```
verify generalTab { ... } 
```

Groovy 似乎解决了

```
verify( generalTab({ ... }) ) 
```

所以接近你想要的方法是拦截方法丢失的调用（'generalTab'对我来说似乎是一个html组件ID，如果我错了，请纠正我）。

你将需要：一个`verify()`方法和一个`methodMissing()`方法。

你的`if`和`else`...呃，我们可以把它换成`when`和`otherwise`吗？只是为了避免 groovy 自己的保留字 ;-)

后面的那些双字`if`使整个事情变得很丑陋。如果你可以使用一个点或一个单词会更好。

```
when dataValidFor clientName then addInfoToReport otherwise addErrorToReport 
```

决议为

```
when(dataValidFor).clientName(then).addInfoToReport(otherwise).addErrorToReport 
```

解析起来会很奇怪。如果您可以执行以下操作会更好：

```
when dataValidFor('clientName') then addInfoToReport otherwise addErrorToReport 
```

我做了以下事情：

```
report = [:]

// the closure passed as a parameter to the html component
Closure runningVerification

// the closure that handles adding info to report
Closure addInfoToReport = { Data data -> 
  report[data] = "[INFO] Field '$data.field' from component '$data.component' valid: $data.valid"
}

// the closure that handles adding errors to report
Closure addErrorToReport = { Data data -> 
  report[data] = "[ERROR] Field '$data.field' from component '$data.component' valid: $data.valid"
}

/*
 * The when() method will receive a data object and returns
 * a map to be handled by the 'then' and the 'otherwise' cases
 *
 * The 'then' and 'otherwise' must passes closures to this method
 */
def when(Data data) {
  data.component = runningVerification.binding.htmlComponent

  [ then: 
    { Closure thenAction -> 

      if (data.valid) thenAction(data) 

      [ otherwise: 
        { Closure otherwiseAction -> 
          if (!data.valid) otherwiseAction(data) 
        }
      ]
    }
  ]
}

/*
 * Handles missing method calls. We need this to keep track of the 
 * 'generalTab', the HTML component whose tests are being ran against
 */
def methodMissing(String method, args) 
{
  runningVerification = args[0]
  runningVerification.delegate = this
  runningVerification.binding.htmlComponent = method // awful
  runningVerification()
}

/*
 * Verify the status of the validation for html component. The
 * argument is useless, it needs to access the report variable in 
 * the binding
 */
def verify(dataValidation) {
  def errors = report.findAll { !it.key.valid }.size()
  report.each { println it.value }
  print "Result: "
  if (errors == report.size()) {
    println "Every test failed"
  } else if (errors == 0) {
    println "Success"
  } else {
    println "At least one test failed"
  }
}

class Data { String component; String field; Boolean valid }

Data dataValidFor(String property) { 
  new Data(valid: new Random().nextInt() % 2, field: property)
}

Data confidentialData(String property) { 
  new Data(valid: new Random().nextInt() % 2, field: property)
}

verify generalTab {
  when dataValidFor('clientName') then addInfoToReport otherwise addErrorToReport
  when dataValidFor('clientCountry') then addInfoToReport otherwise addErrorToReport
  when confidentialData('clientId') then addInfoToReport otherwise addErrorToReport
} 
```

它有效。它打印（随机）：

```
[INFO] Field 'clientName' from component 'generalTab' valid: true
[ERROR] Field 'clientCountry' from component 'generalTab' valid: false
[INFO] Field 'clientId' from component 'generalTab' valid: true
Result: At least one test failed 
```

它变得非常丑陋。这更像是一个概念证明。您需要使用 BaseScripts、GroovyShell 分离这些类，将其委托给其他类等等。您还需要巧妙地对其建模，考虑报告类等。但到目前为止，我认为这是可行的。不过比较大。

我的阅读建议：

Guillaume Laforge 展示了火星机器人的脚本 DSL： [http ://www.slideshare.net/glaforge/going-to-mars-with-groovy-domainspecific-languages](http://www.slideshare.net/glaforge/going-to-mars-with-groovy-domainspecific-languages)

Groovy 命令表达式的艺术：http: [//www.canoo.com/blog/2011/12/08/the-art-of-groovy-command-expressions-in-dsls/](http://www.canoo.com/blog/2011/12/08/the-art-of-groovy-command-expressions-in-dsls/)

这是我今天发送到 groovy 列表的一封电子邮件，一旦我设法通过 JFugue 完成了一个 DSL 供我个人使用： http: [//groovy.329449.n5.nabble.com/Method-chaining-in-DSL-Instructions- td5711254.html](http://groovy.329449.n5.nabble.com/Method-chaining-in-DSL-Instructions-td5711254.html)

它在 github 上： [https ://github.com/wpiasecki/glissando](https://github.com/wpiasecki/glissando)

# python - 减少长时间运行的应用程序中的 numpy 内存占用

> ID：12422307
> 
> 赞同：8
> 
> 时间：2012-09-14T10:04:02.740
> 
> 标签：python, memory-management, numpy, garbage-collection

在我的应用程序中，生成了一百个 numpy 数组（每个数组 1000 个复杂元素）并填充了数据。然后经过多次迭代，数组元素被一遍又一遍地修改。初始生成后，系统监视器报告大约 50 Mb 的 RAM 使用情况。尽管我没有生成任何新数组，但每次迭代的占用空间会持续增长约 40 Mb。

我在[这里](https://stackoverflow.com/questions/6018986/memory-profiler-for-numpy)了解到，垃圾收集器不处理 numpy 数组。所以我假设我为操作数据而生成的一些临时数组没有正确收集。

[不幸的是，这里](https://stackoverflow.com/questions/3372444/profile-memory-allocation-in-python-with-support-for-numpy-arrays?lq=1)说 guppy.hpy().heap() 对分析 numpy 没有帮助。

如何确定问题的根源并在理想情况下在任意数量的迭代中保持消耗不变？

我怀疑我在分配数组元素时可能会生成副本，如此处所述[，](http://docs.scipy.org/doc/numpy/reference/arrays.nditer.html#modifying-array-values)这些副本不会被垃圾收集。

我可以手动处理临时 numpy 数组以协助垃圾收集吗？

[更新 1]：示例代码

这段代码被调用了数千次。每一次，足迹都会增加。我不明白为什么，因为据我了解，它只是读取现有数组并操作其他现有数组。这些切片操作中的任何一个是否在做一些意想不到的事情？（对不起，行长。我可以简化它，但我可能也会隐藏我的错误。）

```
for ts in np.arange(numTimeslots):
            for fc in np.arange(numFreqChunks):
                interfencep = np.sum( np.dot(np.dot(self.baseStations[bs].cells[cell].CSI_OFDMA[:,:,fc,ts] ,np.diag(cell.OFDMA_power[:,fc,ts])),self.baseStations[bs].cells[cell].CSI_OFDMA[:,:,fc,ts].conj().T) for bs in self.baseStations for cell in bs.cells if cell != self._cell) 
                noisep = np.eye(self.antennas) * (self.noisePower / numFreqChunks)
                self.OFDMA_interferenceCovar[:,:,fc,ts] = noisep + interfencep
                self.OFDMA_EC[:,:,fc,ts] = (np.dot(np.dot(self.OFDMA_CSI[:,:,fc,ts],linalg.inv(noisep+interfencep)),self.OFDMA_CSI[:,:,fc,ts].conj().T))
                eigs = linalg.eig(self.OFDMA_EC[:,:,fc,ts])[0]
                self.OFDMA_SINR[:,fc,ts] = np.real(eigs) 
```

[更新 2]：对于那些好奇的人，这是移动网络模拟器的一部分。在 virtualenv、Python 2.7.3、Numpy 1.6.2、SciPy 0.11.0b1 上运行

[更新 3]：通过对其进行评论并检查系统监视器，我可以将 'interferencep = ...' 行识别为罪魁祸首。它分配了未释放的大量内存。但为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T11:06:23.497

我有同样的问题。不幸的是，我没有找到解决方法。唯一对我有用的是将代码重构为小的独立函数。应该制作这些函数，以便我可以说服自己我不保留对阻止垃圾收集器收集数组的数组的引用。您应该特别注意通过切片等生成的数组视图......

为了使代码更高效且不易发生内存泄漏，我经常发现使用许多 numpy 函数提供的 out= 关键字参数很有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T13:32:13.373

通过使用系统监视器和代码检查/注释，我发现了内存泄漏。这是由于将 numpy 数组与不同文件中的空列表进行比较而引起的。我将在不同的地方挖掘泄漏并投票删除这个问题，因为我发现它太具体而无法帮助其他任何人。

[更新 1]：描述问题根源的新问题： [为什么将 numpy 数组与列表进行比较会消耗这么多内存？](https://stackoverflow.com/questions/12461413/why-does-comparison-of-a-numpy-array-with-a-list-consume-so-much-memory)

# django - 关于 AUTH_PROFILE_MODULE 的查询

> ID：12422312
> 
> 赞同：0
> 
> 时间：2012-09-14T10:04:26.720
> 
> 标签：django

我在我的单个项目中创建了两个应用程序。现在我想在两个应用程序中获取配置文件。所以我想知道我如何将这些应用程序设计到**​​ AUTH_PROFILE_MODULE**

因为一次只需要一个，例如**AUTH_PROFILE_MODULE=asd.Asd**

谁能告诉我如何为多个应用声明它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:11:12.800

那没有意义。您没有每个应用程序的个人资料，您只有一个个人资料。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:22:41.307

正如@Daniel Roseman 所说，您只能拥有一个用户个人资料。因此，如果您想存储特定于每个应用程序的用户信息，您可以在应用程序中创建一个模型并`OneToOne`与主配置文件模型建立关系。

每个应用程序都通过自己的模型管理、操作用户属性。

# php - Entities\USER_User 类中的注释“@Doctrine\ORM\Mapping\Entity”不存在，或者无法自动加载

> ID：12422314
> 
> 赞同：5
> 
> 时间：2012-09-14T10:04:27.550
> 
> 标签：php, zend-framework, doctrine-orm

我想在我的 Zend Framework-Application 中结合使用 Doctrine 2 和“l3pp4rd/DoctrineExtensions”。但我只收到以下错误消息：

> Entities\USER_User 类中的注释“@Doctrine\ORM\Mapping\Entity”不存在，或者无法自动加载。

应用程序\bootstrap.php

```
 protected function _initDoctrine() {

    require_once('Doctrine/Common/ClassLoader.php');
    $autoloader = Zend_Loader_Autoloader::getInstance();

    $classLoader = array(new \Doctrine\Common\ClassLoader('Doctrine'), 'loadClass');
    $autoloader->pushAutoloader($classLoader, 'Doctrine\\');

    $classLoader = new \Doctrine\Common\ClassLoader('Entities',
      realpath(Zend_Registry::get('config')->resources->entityManager->connection->entities), 'loadClass');
    $autoloader->pushAutoloader(array($classLoader, 'loadClass'), 'Entities');

    $classLoader = new \Doctrine\Common\ClassLoader('Repositories',
      realpath(Zend_Registry::get('config')->resources->entityManager->connection->entities), 'loadClass');
    $autoloader->pushAutoloader(array($classLoader, 'loadClass'), 'Repositories');
  } 
```

library\My\Resource\Entitymanager.php 位于[http://www.gediminasm.org/article/annotation-reference](http://www.gediminasm.org/article/annotation-reference)

```
class My_Resource_Entitymanager extends Zend_Application_Resource_ResourceAbstract
{

    public function init()
    {

        // WARNING: setup, assumes that autoloaders are set
        // configuration settings from the application.ini file
        $zendConfig = new Zend_Config($this->getOptions());
        // globally used cache driver, in production use APC or memcached
        $cache = new Doctrine\Common\Cache\ArrayCache;
        // standard annotation reader
        $annotationReader = new Doctrine\Common\Annotations\AnnotationReader;
        $cachedAnnotationReader = new Doctrine\Common\Annotations\CachedReader(
            $annotationReader, // use reader
            $cache // and a cache driver
        );
        // create a driver chain for metadata reading
        $driverChain = new Doctrine\ORM\Mapping\Driver\DriverChain();
        // load superclass metadata mapping only, into driver chain
        // also registers Gedmo annotations.NOTE: you can personalize it
        Gedmo\DoctrineExtensions::registerAbstractMappingIntoDriverChainORM(
            $driverChain, // our metadata driver chain, to hook into
            $cachedAnnotationReader // our cached annotation reader
        );

        // now we want to register our application entities,
        // for that we need another metadata driver used for Entity namespace
        $annotationDriver = new Doctrine\ORM\Mapping\Driver\AnnotationDriver(
            $cachedAnnotationReader, // our cached annotation reader
            $zendConfig->connection->entities // paths to look in
        );
        // NOTE: driver for application Entity can be different, Yaml, Xml or whatever
        // register annotation driver for our application Entity namespace
        $driverChain->addDriver($annotationDriver, 'Entities');

        // general ORM configuration
        $config = new Doctrine\ORM\Configuration;
        $config->setProxyDir($zendConfig->connection->proxies->location);
        $config->setProxyNamespace($zendConfig->connection->proxies->ns);
        $config->setAutoGenerateProxyClasses($zendConfig->connection->proxies->generate); // this can be based on production config.
        // register metadata driver
        $config->setMetadataDriverImpl($driverChain);
        // use our allready initialized cache driver
        $config->setMetadataCacheImpl($cache);
        $config->setQueryCacheImpl($cache);

        // create event manager and hook prefered extension listeners
        $evm = new Doctrine\Common\EventManager();
        // gedmo extension listeners, remove which are not used

        // sluggable
        $sluggableListener = new Gedmo\Sluggable\SluggableListener;
        // you should set the used annotation reader to listener, to avoid creating new one for mapping drivers
        $sluggableListener->setAnnotationReader($cachedAnnotationReader);
        $evm->addEventSubscriber($sluggableListener);

        // tree
        $treeListener = new Gedmo\Tree\TreeListener;
        $treeListener->setAnnotationReader($cachedAnnotationReader);
        $evm->addEventSubscriber($treeListener);

        // loggable, not used in example
        $loggableListener = new Gedmo\Loggable\LoggableListener;
        $loggableListener->setAnnotationReader($cachedAnnotationReader);
        $evm->addEventSubscriber($loggableListener);

        // timestampable
        $timestampableListener = new Gedmo\Timestampable\TimestampableListener;
        $timestampableListener->setAnnotationReader($cachedAnnotationReader);
        $evm->addEventSubscriber($timestampableListener);

        // translatable
        $translatableListener = new Gedmo\Translatable\TranslatableListener;
        // current translation locale should be set from session or hook later into the listener
        // most important, before entity manager is flushed
        $translatableListener->setTranslatableLocale('en');
        $translatableListener->setDefaultLocale('en');
        $translatableListener->setAnnotationReader($cachedAnnotationReader);
        $evm->addEventSubscriber($translatableListener);

        // sortable, not used in example
        $sortableListener = new Gedmo\Sortable\SortableListener;
        $sortableListener->setAnnotationReader($cachedAnnotationReader);
        $evm->addEventSubscriber($sortableListener);

        // mysql set names UTF-8 if required
        $evm->addEventSubscriber(new Doctrine\DBAL\Event\Listeners\MysqlSessionInit());
        // DBAL connection
        $connection = array(
            'driver'   => "{$zendConfig->connection->driver}",
            'host'     => "{$zendConfig->connection->host}",
            'dbname'   => "{$zendConfig->connection->dbname}",
            'user'     => "{$zendConfig->connection->user}",
            'password' => "{$zendConfig->connection->password}"
        );
        // Finally, create entity manager
        $em = Doctrine\ORM\EntityManager::create($connection, $config, $evm);
        Zend_Registry::set('em', $em);
        return $em;

    }

} 
```

应用程序\模型\USER_User.php

```
namespace Entities;

use Doctrine\ORM\Mapping as ORM;
/**
 * @ORM\Entity
 * @ORM\HasLifecycleCallbacks
 */
class USER_User
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;
    /**
     * Retrieve user id
     */
    public function getId()
    {
        return $this->id;
    }
} 
```

应用程序\配置\应用程序.ini

```
...
includePaths.library = APPLICATION_PATH "/../library/Doctrine"
...
pluginPaths.My_Resource = "My/Resource"
...
autoloaderNamespaces[] = "Doctrine"
autoloaderNamespaces[] = "Gedmo"
autoloaderNamespaces[] = "Symfony"
autoloaderNamespaces[] = "My"
...
resources.entityManager.connection.driver = "pdo_mysql"
resources.entityManager.connection.host = "localhost"
resources.entityManager.connection.dbname = "test"
resources.entityManager.connection.user = "test"
resources.entityManager.connection.password = "test"
resources.entityManager.connection.entities = APPLICATION_PATH "/models"
resources.entityManager.connection.proxies.location = APPLICATION_PATH "/models/Proxies"
resources.entityManager.connection.proxies.ns = "Proxies"

; According to Doctrine manual, this should be true for
; development, and false for production
resources.entityManager.connection.proxies.generate = true
... 
```

有什么想法可以让这个工作吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T08:52:48.510

解决了这个问题的答案： [doctrine2 autloader with cli must use AnnotationRegistry](https://stackoverflow.com/questions/10269733/doctrine2-autloader-with-cli-must-use-annotationregistry)

添加到 library\My\Resource\Entitymanager.php

```
use Doctrine\Common\Annotations\AnnotationRegistry; 
class My_Resource_Entitymanager extends Zend_Application_Resource_ResourceAbstract
{

    public function init()
    {
        AnnotationRegistry::registerFile(__DIR__ . '/../../Doctrine/ORM/Mapping/Driver/DoctrineAnnotations.php');
        // WARNING: setup, assumes that autoloaders are set
        // configuration settings from the application.ini file
        ... 
```

我也删了

```
$classLoader = array(new \Doctrine\Common\ClassLoader('Doctrine'), 'loadClass');
$autoloader->pushAutoloader($classLoader, 'Doctrine\\'); 
```

从应用程序\bootstrap.php

感谢您阅读我的问题！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T19:56:05.970

我刚刚在 Zend Framework 2 上遇到了同样的问题，解决方案几乎相同。只需确保在应用程序设置期间执行上述语句。这可以在您的 Module.php 中轻松完成：

```
class Module
{
    // ...

    /**
     * Event being executed on bootstrap
     */
    public function onBootstrap(Event $e)
    {
        AnnotationRegistry::registerFile('path/to/ORM/Mapping/Driver/DoctrineAnnotations.php');
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-14T12:29:25.747

以下代码段将使用您现有的自动加载器配置来查找实体类，而无需对任何路径进行硬编码。

```
use Doctrine\Common\Annotations\AnnotationRegistry;
AnnotationRegistry::registerLoader('class_exists'); 
```

这是 Zend Framework 2 的教条模块使用的方法，并且至少从 2.1 版开始就在 Doctrine 中。它适用于任何使用注释注册表的东西，包括像 PHPCR-ODM 这样的文档映射器。

这是教义模块中的用法：

[https://github.com/doctrine/DoctrineModule/blob/1.1.0/src/DoctrineModule/Module.php#L54](https://github.com/doctrine/DoctrineModule/blob/1.1.0/src/DoctrineModule/Module.php#L54)

# shader - 来自多个纹理的 WebGL 逐帧动画

> ID：12422317
> 
> 赞同：0
> 
> 时间：2012-09-14T10:04:30.837
> 
> 标签：shader, textures, webgl, fragment-shader, vertex-shader

我目前正在制作一个原型，旨在创建一个由一系列快速交换图像制成的短片互动电影。我们计划在每一帧上应用鱼眼后处理效果，并利用 WebGL 将此计算卸载到 GPU 单元。[可以在此处](http://evanw.github.com/glfx.js/demo/#swirl)找到使用 WebGL 实时应用此效果的示例。

这里涉及的主要挑战是能够将大量 512x512px 图像（2000 张或更多图像）下载到用户浏览器中，并在生成的序列中保持可接受的帧率（5-10 fps 的帧率开始是可以接受的）。这是一个探索性实验，因此它只能与 Chrome 兼容，并且图像序列会根据用户输入而变化，因此无法预先将序列预渲染到视频中。用于纹理的每张图像的平均重量为 25KB，它将由一个强大的 CDN 提供服务，该 CDN 旨在应对所涉及的大量流量。

相对较短的预加载时间是可以接受的（60 秒或更短），以便在我们用最初的体验来娱乐用户的同时缓存一些图像。

这可能吗？任何人都可以在这方面提供帮助？

# extjs - 如何跳过 ext-all.css 效果以应用于 Extjs 面板 html 内容

> ID：12422319
> 
> 赞同：0
> 
> 时间：2012-09-14T10:04:43.053
> 
> 标签：extjs, extjs4.1

**我通过panel.body.update('innerHTML(Content)')**在 Extjs 面板中添加了一个 div 的 innerHTML 。添加 innerHTML 后，Extjs 面板显示它是具有一些 css 效果的 HTML，我认为这是由于 ext-all.css （Extjs 样式库。）

所以我的问题是如何在 div 中显示 html。例如，如果我在 htmleditor 中设置 div 的 innerHTML ，它的原始视图就可以正常工作。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-14T12:36:31.613

您可以使用 .`cls`即使用css 类`cls : ''`。

# reporting-services - 更改布尔参数的标签“True”和“False”

> ID：12422324
> 
> 赞同：5
> 
> 时间：2012-09-14T10:04:55.997
> 
> 标签：reporting-services, ssrs-2008, boolean

我在业务报告中有一个布尔参数。如果我使用此参数，它会在参数栏上显示标签“True”和“False”。我可以在不使用其他参数类型（即整数）的情况下更改值吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-14T10:50:27.160

是的，这可以通过设置报告参数的可用值来完成：

![为 bool 参数设置标签/值](../Images/d4fa513b9eee2a306ee5226f4d1c8be0.png)

但是，这确实会将输入从单选按钮更改为下拉菜单。有关该错误的信息以及明显的解决方法，请参阅[此 MS Connect 问题。](https://connect.microsoft.com/SQLServer/feedback/details/391241/custom-lables-for-boolean-options-not-displaying)

# objective-c - 其他应用程序窗口关闭事件

> ID：12422327
> 
> 赞同：3
> 
> 时间：2012-09-14T10:05:03.050
> 
> 标签：objective-c, macos, cocoa

如何在基于**可可**/碳的应用程序中检测其他应用程序***窗口关闭***事件或通知？

 **例如。如果 TextEdit 应用程序中有多个窗口，如何检测特定窗口而不是整个应用程序本身的关闭事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:56:41.117

> 如何在基于可可/碳的应用程序中检测其他应用程序窗口关闭事件或通知？

做这种事情的方法是使用 MacOS X 的[无障碍模型](https://developer.apple.com/library/mac/documentation/Accessibility/Conceptual/AccessibilityMacOSX/OSXAXModel/OSXAXmodel.html#//apple_ref/doc/uid/TP40001078-CH208-TPXREF102)。文档中有[一个很好的示例](https://developer.apple.com/library/mac/documentation/Accessibility/Conceptual/AccessibilityMacOSX/OSXAXModel/OSXAXmodel.html#//apple_ref/doc/uid/TP40001078-CH208-TPXREF108)，它可以让您了解可以使用可访问性执行的各种操作——获得打开或关闭窗口的通知当然是它的功能之一。

顺便说一句：它适用于 Cocoa 和 Carbon 应用程序。**

# c++ - while循环中的C ++ cout打印两次

> ID：12422331
> 
> 赞同：3
> 
> 时间：2012-09-14T10:05:16.873
> 
> 标签：c++

我改编了 Bjarne Stroustrup 的 Programming: Principles and Practice in C++ 中的代码，试图检查给定的输入是否有效：

```
#include <iostream>
using namespace std;

int main()
{
    cout << "Please enter your first name and age: ";
    string first_name = "???";
    int age = -1;
    cin >> first_name >> age;

    while (!cin) {
        cin.clear();
        cout << "Sorry, can you enter that again? ";
        cin >> first_name >> age;
    }

    cout << "Hello, "<<first_name<<"! (age "<<age<<")\n";
    return 0;
} 
```

这按预期工作，除了单词`"Sorry, can you enter that again? "`被打印两次，一次在第二次输入之前和一次之后。

有谁知道为什么会发生这种情况？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T10:16:39.197

仅清除失败位是不够的，您还必须清除输入缓冲区中的所有剩余字符。此外，代码看起来比必要的更复杂。以下作品：

```
std::string name;
int age;

std::cout << "Please enter your name & age: ";

while (not (std::cin >> name >> age)) {
    std::cout << "Sorry, can you enter that again? ";
    std::cin.clear();
    std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
}

std::cout << "Hello " << name << " (" << age << ")\n"; 
```

~~哦，是的，别忘了刷新输出流，我认为这不会自动为你完成。~~

也就是说，标准输入/输出流是，好吧，*流*，所以它们无论如何都不适合交互式输入。您应该为此使用适当的库，例如`readline`or `ncurses`。

为了说明为什么这很重要，假设用户输入“<code>foo42”并按回车键。您希望程序现在会说“抱歉，您能再输入一遍吗？” 但事实并非如此。相反，它温顺地等待用户输入第二个令牌。从可用性的角度来看，这肯定*不是*您所期望的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T10:11:50.250

这取决于您输入的内容！

*   输入`"Tim 29"`：有效，“Hello Tim(29)”。

*   输入`"Tim Tom 29"`：有效，重复一次，“Hello Tom(29)”。

*   输入`"Tim Tom Tina 29"`：有效，重复两次，“Hello Tina(29)”。

我假设你正在尝试第三个。第一个失败是`Tom`，谁不是数字。重置错误状态很好，但它并没有摆脱`Tom`. 我们仍然需要再一次失败的尝试来消耗他（失败`Tina`，那时他不是一个数字）。只有这样我们才能准备好`Tina`。

# python - Django - 开放时间表单集

> ID：12422332
> 
> 赞同：3
> 
> 时间：2012-09-14T10:05:18.983
> 
> 标签：python, django, django-forms

## 语境

我需要构建一个表单集以允许将开放时间设置为一周。

## 地位

这是我的开放时间模型：

```
WEEKDAYS = [
  (1, _("Monday")),
  (2, _("Tuesday")),
  (3, _("Wednesday")),
  (4, _("Thursday")),
  (5, _("Friday")),
  (6, _("Saturday")),
  (7, _("Sunday")),
]

class OpeningHours(models.Model):
    user = models.ForeignKey(User)
    weekday = models.IntegerField(choices=WEEKDAYS)
    from_hour = models.TimeField()
    to_hour = models.TimeField()
    class Meta:
        unique_together = (('user', 'weekday'),) 
```

这是我为默认周设置生成表单集的方式

```
UserOpeningHoursFormSet = formset_factory(UserOpeningHoursForm, extra=0)
hours = [{
        'weekday': day,
        'from_hour': '08:00',
        'to_hour': '18:00',
    } for day in range(1, 8)]
formset = UserOpeningHoursFormSet(initial=hours) 
```

这是我如何获得当前用户的营业时间

```
user_hours = request.user.openinghours_set.all() 
```

## 问题

如何将 user_hours 放入我的表单集中？

* * *

**编辑**

例如，假设用户已经在数据库中设置了星期一和星期四的时间，表单应该类似于：

```
weekday: Monday
from_hour: '09:00' # user_set
to_hour: '19:00' # user_set

weekday: Tuesday
from_hour: # default initial value
to_hour: # default initial value

weekday: Wednesday
from_hour: # default initial value
to_hour: # default initial value

weekday: Thursday
from_hour: '13:00' # user_set
to_hour: '15:00' # user_set

weekday: Friday
from_hour: # default initial value
to_hour: # default initial value

weekday: Saturday
from_hour: # default initial value
to_hour: # default initial value 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T10:52:39.497

扩展@Rohan的回答：

我不认为modelformset是必要的，只需像这样构建**时间**

```
hours = [
    {'weekday': day, 'from_hour': '08:00', 'to_hour': '18:00'} 
    for day in range(1, 8) if not any(request.user.openinghours_set.filter(weekday=day))
    else
    {'weekday': day, 'from_hour': request.user.openinghours_set.filter(weekday=day).from_hour,
     'to_hour': request.user.openinghours_set.filter(weekday=day).to_hour}
] 
```

显然，这是低效的，因为它每天构造一个或三个查询集，所以重写它是这样的：

```
hours = []

openinghours_set = list(request.user.openinghours_set.all())
for day in range(1, 8):
    for openinghours in openinghours_set:
        if openinghours.weekday == day:
            hours.append({ fill from *openinghours* })
            break
    else:
        hours.append({ fill with default values }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:17:25.650

您可以使用[`modelformset`](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#model-formsets)并提供适当的查询集。

```
formset = UserOpeningHoursModelFormSet(queryset=request.user.openinghours_set.filter()) 
```

还有一些其他方法可以更改查询集。

**编辑：**

可能是您可以`max_num`在创建表单集实例时使用参数以及`initial`. 因此，您将从现有实例中获取表单，如果实例不够，将使用初始 dict 中的数据创建新表单。

```
 UserOpeningHoursFormSet = modelformset_factory(UserOpeningHoursForm, extra=7, max_num=7)
    formset = UserOpeningHoursModelFormSet(initial=hours,
                 queryset=request.user.openinghours_set.filter()) 
```

我还没有验证这一点，所以我怀疑它可能会为每个初始数据项添加表单。因此，在最坏的情况下，您需要创建`hours`跳过设置小时数的日期的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T13:38:10.890

这是我最终得到的结果：

```
user_hours = request.user.openinghours_set
hours = []
for day_id in range(0, 6):
    item = {'weekday': day_id, 'from_hour': '08:00', 'to_hour': '18:00'}
    if any(user_hours.filter(weekday=day_id)):
        my_item = user_hours.get(weekday=day_id)
        item['from_hour'] = my_item.from_hour.strftime('%H:%M')
        item['to_hour'] = my_item.to_hour.strftime('%H:%M')
    hours.append(item) 
```

我会更喜欢一个更pythonic的版本......

# cocos2d-iphone - Cocos2d 和 iOS：如何使用 UIBezierPath 动画 CCSprite 动作？

> ID：12422336
> 
> 赞同：1
> 
> 时间：2012-09-14T10:05:32.303
> 
> 标签：cocos2d-iphone, sprite, uibezierpath, ccsprite, cgpath

我发现[了几篇文章](https://stackoverflow.com/questions/9133610/how-to-use-uibezierpath-with-coreanimation)，教如何将 UIBezierPaths 与 CoreAnimation 一起使用。这是因为 CAKeyframeAnimation 对象有一个名为 path 的属性，它是 CGPath 类型的，而且 UIBezierPaths 对象也有一个 CGPath 属性。

我想知道如何让 CCSprite 跟随 CGPath 移动。

在 CGPath 中有一个函数 CGPathGetCurrentPoint 可以帮助我获取路径中的当前点，但我找不到像“移动到下一个点”这样的东西。

我的伪代码会这样工作：

```
Create a CCSprite subclass with a UIBezierPaths property
Initialize the UIBezierPaths instance

Allocate the CCSprite subclass in a layer
schedule updates
In update method
     Reposition the CCSprite sublcass instance by getting the CGPathGetCurrentPoint to CGPathGetCurrentPoint
     Move the path forward by calling "move to next point" 
```

知道这是否可行吗？这是一种有效的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T10:10:57.980

不确定您要做什么，但这就是我在 Cocos2D 中沿贝塞尔路径移动一些精灵的方式：

```
- (CCBezierTo*)bezierMoveTo:(CGPoint)destination node:(CCNode*)node duration:(float)d {

 static ccBezierConfig bzPaths[5] = {
    {{1050, 900}, {1200, 1400}, {1100, 900}},
    {{1100, 750}, {1300, 1550}, {1650, 500}},
    {{800, 850}, {500, 1100}, {400, 700}},
    {{700, 700}, {1500, 1200}, {400, 900}},
    {{900, 650}, {100, 900}, {900, 400}}
 };
 ccBezierConfig bezierOne;
 bezierOne = bzPaths[PATH_INDEX];
 return [CCBezierTo actionWithDuration:d bezier:bezierOne];
} 
```

然后可以在精灵上运行返回的动作。就我而言，我有一组静态路径，我随机选择一个。在您的情况下，您似乎希望将路径存储在自定义精灵中。除此之外，一切都应该工作。

如果您想构建更复杂的路径，只需使用`ccBezierConfig`和的序列`CCBezierBy`。

# c# - 即时编译 C#

> ID：12422338
> 
> 赞同：1
> 
> 时间：2012-09-14T10:05:39.670
> 
> 标签：c#, android, xamarin.android

可以使用 monodroid 在 Android 设备上编译 C# 代码吗？我想在我的 Android 平板电脑上运行 C# 代码，monodroid 看起来像是可能的解决方案，但我没有发现任何通知，如果 monodroid 编译器只能在 windows/mac 或 Android 上运行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T13:06:29.807

我最初打算将此作为对 Chris Sinclair 答案的评论发布，但我认为它最终会持续很长时间，以至于它也可能是一个单独的答案。

我写了 C# to Go，所以我可以在那里提供一些评论。它实际上是使用 Mono for Android 编写的。但是，说 Mono for Android 将 C# 转换或编译为 Java 是不正确的。应用程序中的 C# 代码在 Mono 运行时之上运行，并且可调用接口用于在运行时之间来回通信（有关详细信息，请参阅[此答案）。](https://stackoverflow.com/a/12220859/170333)

当我去年第一次发布 C# to Go 时，我写了[一篇博客文章](http://www.gregshackles.com/2011/07/introducing-c-to-go-a-c-compiler-for-android/)来描述我是如何将它组合在一起的。基本上，我使用的是针对 Mono for Android 配置文件编译的 Mono 的 C# 编译器服务版本。该应用程序的所有源代码也[可以在 GitHub 上找到](https://github.com/gshackles/CSharpToGo)。

这不是一个完美的解决方案，因为当前的实现存在一些问题（其中一些在博客文章中有详细说明）。目前，由于 Mono 运行时出现问题，我无法支持在应用程序中创建/编译类。这是一个记录在案的问题，已在更高版本的 Mono 中修复，但由于 Mono for Android 仍然基于 Mono 2.10，因此尚未得到这些修复。我的理解是，今年晚些时候 Xamarin 将开始致力于将 Mono for Android（以及 MonoTouch）升级到 Mono 2.12，这也应该带来这些修复，加上盒子里的 C# 编译器服务，避免需要带来它像我一样作为一个单独的库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T10:28:26.103

*编辑：请参阅 Greg Shackles 的评论，因为他进一步了解该过程并纠正了我的误解。*

有一个 Android 应用程序[C# To Go](https://play.google.com/store/apps/details?id=com.gregshackles.csharptogo)正是这样做的，我以前用过它。我不能确定作者是否使用 Mono for Android（不会感到惊讶）。也许您可以联系该应用程序的作者。~~但是，据我了解，Android 的 Mono 会预编译 DLL 并将它们转换为 Java，或者在打包/部署之前以某种方式将它们连接到 Java 接口中。~~我不知道在平台上运行时通过编译器生成程序集是否会产生一个可以加载的开箱即用的可用程序集。

除此之外，我知道在运行时发出 IL（而不是编译 DLL）的伪代码生成器在我使用它们时工作。特别是，我在 Mono for Android 上使用了[FLEE（快速轻量级表达式评估器）的 C# 端口。](http://flee.codeplex.com/)也许这样的东西足以满足您的需求。

最后，研究 Mono 自己的编译 CodeDOM 功能。据我了解，它具有更好的运行时代码编译器服务（类似于 C# 5 将带给我们的）；也许它也适用于 Mono for Android。

# java - 以编程方式将 Maven 工件安装到本地仓库

> ID：12422340
> 
> 赞同：5
> 
> 时间：2012-09-14T10:05:40.497
> 
> 标签：java, maven, maven-plugin

我所拥有的是需要在编译之前使用 Groovy 脚本或 Maven 插件生成一个 jar，然后将其安装到本地存储库中，以便它可以在编译过程中使用（即依赖将由构建过程和未通过任何外部存储库下载）。在编译/依赖解析开始之前，我已经使用了一个 groovy 脚本来创建这个 jar。

由于在创建 Mojo 之外使用 Maven 的 API 文档非常少，我想要一些将这个 jar 放入本地存储库的指针。

在此先感谢，md_5。

编辑：我还想知道工件是否事先在 maven repo 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T07:31:54.657

我认为您需要使用[maven-invoker-plugin](http://maven.apache.org/plugins/maven-invoker-plugin/)，它会启动一个新的 Maven 实例，您可以在其中使用本机 Maven 插件生成工件、构建它并安装到本地存储库中。

# android - Delete item by clicking any item in listview

> ID：12422352
> 
> 赞同：4
> 
> 时间：2012-09-14T10:06:34.777
> 
> 标签：android, android-listview

I made a listview where at the header an edit text field to add list.And it works fine and successfully add item. Then I try to call this listview and set the adapter. Now what I want is when I click the item it should be deleted, but its getting force closed. Here is my code:

```
public class AddDeleteItemActivity extends ListActivity {
public ListView listViewCity;
public Context ctx;

ArrayList list = new ArrayList();

ArrayAdapter adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);

   setContentView(R.layout.main);

   Button btn = (Button) findViewById(R.id.btnAdd);
   ctx=this;

   adapter = new ArrayAdapter(this, android.R.layout.simple_list_item_multiple_choice, list);

   OnClickListener listener = new OnClickListener() {
       @Override
       public void onClick(View v) {
           EditText edit = (EditText) findViewById(R.id.txtItem);
           list.add(edit.getText().toString());
           edit.setText("");
           adapter.notifyDataSetChanged();
       }
   };

   listViewCity = ( ListView ) findViewById( R.id.list);
   listViewCity.setAdapter(adapter);

   listViewCity.setOnItemClickListener(new OnItemClickListener() {
       @Override
       public void onItemClick(AdapterView<?> a, View v, int position, long id) { 

               Toast.makeText(getApplicationContext(), " " +position , Toast.LENGTH_LONG).show();
               SparseBooleanArray checkedItemPositions = getListView().getCheckedItemPositions();
               int itemCount = getListView().getCount();

               for(int i=itemCount-1; i >= 0; i--){
                   if(checkedItemPositions.get(i)){
                       adapter.remove(list.get(i));
                   }
               }
               adapter.notifyDataSetChanged();
       }

   });

   btn.setOnClickListener(listener);

   setListAdapter(adapter);
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T10:18:52.343

试试这个方法

```
listViewCity.setOnItemClickListener(new OnItemClickListener() {
       @Override
       public void onItemClick(AdapterView<?> a, View v, int position, long id) { 

               Toast.makeText(getApplicationContext(), " " +position , Toast.LENGTH_LONG).show();
               list.remove(position);
               adapter.notifyDataSetChanged();
               adapter.notifyDataSetInvalidated();
       }

   }); 
```

从列表中删除并使用适配器通知刷新您的列表

**已编辑**

为什么在扩展 ListActivity 时使用此语句

```
listViewCity = ( ListView ) findViewById( R.id.list); 
```

您可以使用 getListView() 扩展 ListActivity 或扩展 Activity 而不是 ListActivity 来获取 ListView 对象。

# iphone - 如何从 UITableView 的多个部分获取选定行的部分？

> ID：12422356
> 
> 赞同：0
> 
> 时间：2012-09-14T10:06:47.423
> 
> 标签：iphone, objective-c, ios

我有多个部分`UITableView`（大约 12 个部分），每个部分都有一行或多行。`UITextField`当我选择一行时，如何在我的 Delegate 方法中获取节号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T10:12:55.750

如果您在单元格中添加了文本字段，例如

```
[cell.contentview addSubview:yourtextfield]; 
```

然后在文本字段代表上

```
UITableViewCell *cell = (UITableViewCell *)[[textField superview] superview];
NSIndexPath *indexPath = [yourTableView indexPathForCell:cell];

NSLog(@"your Indexpath %d",indexPath.section); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T10:14:57.847

当用户选择行时，您的代码需要处理对

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
    {
        ** your code here**
    } 
```

`indexPath`传递到此方法中的同时包含节和行。了解如何使用它的最佳方法是查看 NSIndexPath 的文档，但我相信类似

```
indexPath.section 
```

是你需要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T10:25:32.483

试试这个：-

```
-(void) textFieldDidBeginEditing:(UITextField *)textField {

    UITableViewCell *clickedCell = (UITableViewCell *)[textField superview];
    int section = [topicTable  indexPathForCell:clickedCell].section;
    NSLog(@"section %d", section);

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T10:29:23.463

它显示标签值，文本字段值，试试这个代码（使用标签）

```
- (void)textFieldDidEndEditing:(UITextField *)textField {

   NSLog(@"%d : %@", textField.tag,textField.text);
    [textField resignFirstResponder];

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T10:42:49.023

```
UITableViewCell *cell = (UITableViewCell *)[[textField superview]superview];
NSIndexPath *indexPath = [yourTableView indexPathForCell:cell];

NSLog(@"your Indexpath %d",indexPath.section); 
```

但是我建议你将来在使用 uitableviewcell 执行标签操作时创建一个 customcell

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-14T10:13:37.133

如果您在界面构建器中手动创建了表格视图，即使用静态单元格，那么您可以在每个 UITextField 中使用标签，然后在委托方法中检查它。

对于 12 个部分，您可以将标签编号为 ，例如 1203 是第 12 部分的第 3 行，或 600 是第 6 部分的第 0 行。

# java - creating JAR file in eclipse which includes resources.

> ID：12422357
> 
> 赞同：1
> 
> 时间：2012-09-14T10:06:52.820
> 
> 标签：java, android, java-native-interface

Is it possible to create jar file in eclipse which should contains java file, jni and lib (shared library)..?. I want this JAR file for android project so android application developer can use API which is there in in JAR file. For this I need create one JAR file for my own API's

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T13:38:14.423

仅在 Eclipse 中导出 jar 文件对您没有帮助。

> 您还需要将 *.so 文件作为 jar 文件的一部分。这在 Android 中不起作用，因为您的 .so 文件应保存在 lib/ARCH 文件夹中，以便 APK 正确打包。这是必需的，因为首先提取 APKS 并且 .so 文件必须在提取 apk 后在正确的目录中找到它们自己，否则您的本机方法调用会给您异常并且总是会失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T10:08:58.107

[看这里](https://www.cs.utexas.edu/~scottm/cs307/handouts/Eclipse%20Help/jarInEclipse.htm)。我想你正在寻找这个。

> 使用 Eclipse IDE 创建 JAR 文件非常简单。遵循简单的步骤。右键单击要为其创建 JAR 文件的项目。并从上下文菜单中选择导出

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T10:09:46.553

`Project`然后在eclipse中选择`File`-> `Export`-> `Java`->`JAR file`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T10:09:24.367

是的，首先选择export>jar

然后检查

*   导出已检查项目的所有输出文件*（确保签入 lib、jni 文件夹顶部的树）*

将您的源代码包含在*（即您的 .java 文件）中*

*   检查导出 java 源和资源

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-14T10:11:20.423

是的你可以。

从菜单文件->导出

或者

右键单击项目，然后选择导出选项

这将出现用于导出具有不同选择的项目的对话框。

![在此处输入图像描述](../Images/411e58a182c0483ed6d98e1449482278.png)

从此列表中选择 Java 并将其展开。

现在为您的应用程序选择适当的 Jar 选项。

如果要创建简单的 api，请选择 JAR filr 以获取文档，选择 Javadoc 并为可执行文件选择 Runnable JAR 文件

单击下一步后，指定 JAR 规范并完成它。

# regex - 正则表达式用于识别 @ 之后和 .tld 之前只有 4 个字符的电子邮件

> ID：12422361
> 
> 赞同：-2
> 
> 时间：2012-09-14T10:07:08.607
> 
> 标签：regex, cpanel, spam, spamassassin

我们收到了很多表单中的垃圾邮件`femlmcte@tnbt.com`。

我可以看到 cPanel 垃圾邮件刺客允许使用正则表达式匹配来过滤邮件。

我想写一个正则表达式来识别表单中的邮件

```
anylengthofstrring@abcd.com 
```

或者

```
someotherlength@efgh.co.za 
```

**即在@之后**只有四个字母，但**在**.com、.co.uk、.co.za 等之前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:09:25.860

尝试以下操作：

```
[^@]+@[a-zA-Z]{4}\.(com|co\.uk|co\.za) 
```

解释：

```
[^@]+@                # One or more characters except @ followed by @
[a-zA-Z]{4}           # Matches 4 characters in the range A-Z and a-z
\.(com|co\.uk|co\.za) # Matches .com, .co.uk, and .co.za 
```

如果您想匹配任何顶级域名，请替换`(com|co\.uk|co\.za)`为`.*`（我假设由于您收到这些电子邮件，您已经知道它们是有效的，因此无需验证顶级域名）。

另请注意，根据您当前的标准，您会将来自 的某些内容视为垃圾邮件`admin@food.com`，这可能是您想要的，也可能不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:10:50.003

所以你想匹配一个 at 符号后跟 4 个非点字符，然后是一个点？该规范很容易转换为正则表达式：

```
@[^.]{4}\. 
```

# android - Installing a list of APK automatically and programmatically

> ID：12422364
> 
> 赞同：0
> 
> 时间：2012-09-14T10:07:25.470
> 
> 标签：android

I have a list of APK and it should be installed automatically.

here's my current situation.

*   first APK appears, Install or Cancel
*   user clicks install
*   a windows appears and will ask the user to "open" or "done"
*   but the problem is, after that window appears to choose "open" or "done", the next APK installation window appears and covering the "open" or "done" window of the first successful APK installed.

How do you buffer that the next APK to install shall wait till the user chooses "open" or "done" after the first installation.

currently i'm trying out these methods but to no avail :(

```
 protected void onStart();

 protected void onRestart();

 protected void onResume();

 protected void onPause();

 protected void onStop();

 protected void onDestroy(); 
```

can anyone point out the right direction? i'm still new to this.

thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:19:34.190

我认为不可能...只能启动一个`Intent`来安装一个apk但不能确定是否安装了apk（如果他回来就像他安装后点击打开一样，他不来背部）。

* * *

但是，在您的 中，当用户返回您的应用程序时会调用`Activity`该方法。`onResume`

此时您可以检查是否安装了第一个 apk 并启动第二个 apk 安装。

# c++ - Problems gaining access to the private class members while overloading the << operator

> ID：12422367
> 
> 赞同：1
> 
> 时间：2012-09-14T10:07:32.197
> 
> 标签：c++, operator-overloading, ostream

I've seen some other threads on this topic, but they haven't been able to help me particularly well. I'm creating a class that prints out to a .html file. I've declared ostream as friend, but it still isn't getting access to the private members of the class.

my .h file

```
 #ifndef OUTPUTTOHTML_H
    #define OUTPUTTOHTML_H
    #include <iostream>
    #include <string>
    #include <vector>
    using std::string;
    using std::vector;
    using std::ostream;

    namespace wilsonOutput
    {
    class HTMLTable
    {
      private:
        vector<string> headers;
        vector<vector<string> > rows;
        //helper method for writing an HTML row in a table
        void writeRow(ostream &out, string tag, vector<string> row);

        public:
        // Set headers for the table columns
        void setHeaders(const vector<string> &headers);
        // Add rows to the table
        void addRow(const vector<string> &row);
        //write the table innto HTML form onto an output stream
        friend ostream & operator<<(ostream & out, HTMLTable htmlTable); 
    };
    }

    #endif 
```

and this is what I have in my main.cpp (but not in the main code block) to implement the overload.

```
 // Overloaded stram output operator <<
    ostream & operator<<(ostream &out, wilsonOutput::HTMLTable htmlTable)
    {
        out << "<table border = \"1\">\n";
        // Write the headers
        htmlTable.writeRow(out, "th", htmlTable.headers);
        // Write the rows of the table
        for (unsigned int r = 0; r < htmlTable.rows.size(); r++)
        {
            htmlTable.writeRow(out, "td", htmlTable.rows[r]);
        }
        // Write end tag for table
        out << "</table>\n";
        return out;
    } 
```

Any help would be rather... helpful.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T10:18:09.797

类内的`friend`声明将操作符放置在周围的命名空间 (`wilsonOutput` ) 中。据推测，您的实现不在该名称空间中；在这种情况下，它会在您放入的任何命名空间中声明运算符的单独重载，并且该重载不是该类的朋友。

实现时需要指定命名空间：

```
ostream & wilsonOutput::operator<<(ostream &out, wilsonOutput::HTMLTable htmlTable)
{      // ^^^^^^^^^^^^^^
    ...
} 
```

顺便说一句，放在`using`标题中是个坏主意。不是每个包含标题的人都一定希望将这些名称转储到全局命名空间中。

# linux - linux附加文本给出命令未找到

> ID：12422369
> 
> 赞同：1
> 
> 时间：2012-09-14T10:07:44.553
> 
> 标签：linux, bash

当我尝试这个简单的脚本时：

```
#!/bin/bash
#append csv

FILES= /home/stef/test/*

for f in $FILES do
        cat $f >> ~/test.txt done 
```

我收到以下错误：

```
./append.sh: line 4: /home/stef/test/test2.txt: Permission denied. 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T10:17:28.800

代替

`FILES= /home/stef/test/*`

和

`FILES=/home/stef/test/*`

该脚本正在尝试评估 /home/stef/test/* 的第一个匹配项。它说权限被拒绝，因为该文件不可执行。

`./append.sh: line 4: /home/stef/test/test2.txt: Permission denied.`

那是第 4 行。`FOO= *`在非空目录中尝试使用。

而且你的`for ... do; done`语法也很糟糕，`done`需要一个分隔符（`;`或换行符），“”也是如此`do`。然而，这不是产生此错误消息的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T10:09:47.133

您需要在代码中进行此更改：

```
#!/bin/bash
#append csv

FILES=/some_path/*

for f in $FILES
do
        cat $f >> ~/test.txt
done 
```

不要忘记在 FILE 行中的路径之前删除 whitepsace，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T10:20:36.693

缺少语句分隔符：修复它或者像

```
for f in $FILES do
        cat $f >> ~/test.txt 
done 
```

或者

```
for f in $FILES do
        cat $f >> ~/test.txt; done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T13:37:50.993

请注意，如果您的任何文件名有空格，您就会遇到问题。当您使用 迭代变量时`for`，您正在迭代该变量中以空格分隔的*单词*。为了安全地遍历文件，无论名称中是否包含空格，都不要将文件列表存储在普通变量中。

最直接的方式：

```
for f in /home/stef/test/*; do
  # ... 
```

如果要将文件名保存在某种容器中，则需要使用数组：

```
files=( /home/stef/test/* )
for f in "${files[@]}"; do
  # ... 
```

# java - 格式化结果集 getDate() 方法返回的 Date 对象的任何机会

> ID：12422370
> 
> 赞同：0
> 
> 时间：2012-09-14T10:07:44.350
> 
> 标签：java, jakarta-ee, jdbc

我想跳过日期的解析和格式化。相反，我直接想以自定义格式从数据库中获取日期。这可能吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:16:43.907

是的，更改您的 SQL 查询以格式化日期。例如，如果您使用 oracle，则需要使用函数 TO_CHAR(dateColumn, 'YYYY/MM/DD')，这将返回一个日期格式为 '2012/09/14' 的字符串列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:15:34.570

您可以在查询中设置格式。（我的例子是在 sqlserver 上运行的）

就像是..

```
SELECT CONVERT (VARCHAR, GETDATE(), 103) 
```

更多详情[http://www.sqlusa.com/bestpractices2005/centurydateformat/](http://www.sqlusa.com/bestpractices2005/centurydateformat/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T10:17:31.310

您需要查看数据库供应商提供的功能。

例如，在 Oracle 中，我们可以在 SQL 本身中使用以下语法

TO_CHAR('日期', '格式')

因此，请浏览您使用的文档数据库。

# jquery - Jquery + Selectivizer to reproduce nth-child in IE8

> ID：12422372
> 
> 赞同：0
> 
> 时间：2012-09-14T10:07:48.047
> 
> 标签：jquery, internet-explorer-8, css-selectors, selectivizr

My understanding from selectivizr is that it can interpret a number of pseudo-classes correctly in ie6-8\. I've been having trouble with what I want to accomplish, no matter what I try, it runs perfectly in Chrome/Firefox but falls flat on its face in IE6\. Any help would be awesome!

CSS

```
#menu li img
{
    position: absolute;
    display: -moz-inline-stack;
    display: inline-block;
    *display: inline;
}

#menu li:nth-child(odd) img
{
    top: 0px;
}

#menu li:nth-child(even) img
{
    bottom: 0px;
}

#menu li span
{
    position: absolute;
    display: -moz-inline-stack;
    display: inline-block;
    *display: inline;
    padding: 5px;
}

#menu li:nth-child(odd) span
{
    top: 150px;
}

#menu li:nth-child(even) span
{
    bottom: 150px;
} 
```

Jquery/Selectivizer:

```
<script language="JavaScript" src="jquery-1.8.1.min.js"></script>
<!--[if (gte IE 6)&(lte IE 8)]>
<script language="JavaScript" src="selectivizr-min.js"></script>
<![endif]--> 
```

HTML

```
<li><img src="menu/menu01-01.jpg" /><span>過橋米線 NT.100</span></li><li>
<img src="menu/menu01-02.jpg" /><span>昆明辣泡菜鍋米干/米線 NT.100</span></li><li>
<img src="menu/menu01-03.jpg" /><span>阿美米干/米線 NT.80</span></li><li>
<img src="menu/menu01-04.jpg" /><span>雲燒牛腩米干/米線 NT.100</span></li><li>
<img src="menu/menu01-05.jpg" /><span>豆腐乳/臘肉炒飯 NT.80</span></li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T23:41:51.703

你把你所有的css都放在一个链接rel中了吗？Selectivizr 不适用于样式块中的 css。我简化了，这很有效，证明偶数和奇数在 selectivizr 中单独工作。

```
<!doctype html>
<html>
  <head>
    <meta charset="UTF-8"/>
    <link rel="stylesheet" href="selectivizr.css" type="text/css" />
</head>
<body>
    <ul>
        <li><span>過橋米線 NT.100</span></li>
        <li><span>昆明辣泡菜鍋米干/米線 NT.100</span></li>
        <li><span>阿美米干/米線 NT.80</span></li>
        <li><span>雲燒牛腩米干/米線 NT.100</span></li>
        <li><span>豆腐乳/臘肉炒飯 NT.80</span></li>
    </ul>
    <script type="text/javascript" src="jquery-1.9.1.js"></script>
    <!--[if (gte IE 6)&(lte IE 8)]>
    <script type="text/javascript" src="selectivizr.js"></script>
    <![endif]-->
</body>
</html> 
```

# java - MySQL DATA Truncation Error occuring from Java application but not directly on MySQL

> ID：12422383
> 
> 赞同：0
> 
> 时间：2012-09-14T10:08:21.220
> 
> 标签：java, mysql, jdbc

I am using the JDBC driver to connect to a mysql database and using the "LOAD DATA INFILE" command in my java application to load(insert) a text file into the database. I am getting the following error: **Data truncation: Data too long for column *xxx* at row 1**.

However if I load the same text file manually by logging into the database and entering the SQL manually, the data loads fine.

Can someone pelase tell me what the error might be?

I am running this on Red Hat Enterprise Linux Server release 5.8 and the jdk version is 1.5.0_16 if that helps

This is the function used to load the data

```
 public static void loaddata(Connection conn, String filename, String tablename)
{
    try{
    Statement stmt = null;
    stmt = conn.createStatement();
    File file = new File(filename);
    file.getAbsolutePath().replace("\\", "\\\\");
    String cmd = "LOAD DATA INFILE '"
            + file.getAbsolutePath().replace("\\", "\\\\")
            + "' INTO TABLE " + tablename + " FIELDS TERMINATED BY \'^\'";
    stmt.executeUpdate(cmd);
    System.out.println("cmd     :" + cmd);
    }
    catch(SQLException sqle){
        sqle.printStackTrace();
    }
} 
```

This is the function to create the JDBC connection:

```
 public static Connection createConnection()
{
    Connection conn=null;

    try {
        Class.forName("com.mysql.jdbc.Driver").newInstance();
    }       
    catch(Exception e) {
        e.printStackTrace();
    }
    try {
        String url = ""; //URL mentioned in the actual code
        conn = DriverManager.getConnection(url, user, pass);
    } catch (SQLException sqe1) {
        sqe1.printStackTrace();
    }
    return conn;
} 
```

# asp.net - 在 ASP.NET 的 Google 域中使用 Google Drive API 时出现 401 错误

> ID：12422387
> 
> 赞同：1
> 
> 时间：2012-09-14T10:08:30.107
> 
> 标签：asp.net, c#-4.0, oauth-2.0, google-drive-api

我目前正在尝试向我们公司的`ASP.NET`网站添加功能，该功能将允许最终用户将网站生成的文件上传到他们自己的`Google Drive`（在同一公司内）。

该公司拥有自己的 Google 域，其中包括邮件、云端硬盘、联系人、日历（以及几乎所有其他内容）。它使用 SAML 对我们的 Active Directory 设置进行身份验证，该设置链接到 Google。

应该注意的是，此代码适用于我的`@gmail.com`帐户。使用公司 Google App Domain 帐户，我收到无效凭据错误（显示在底部）。我已与我们的 Google 管理员交谈过，他们声称我的帐户在 Drive API 访问方面没有任何限制。另请记住，API ID/Secret 是使用我的公司帐户而不是 Gmail 帐户创建的。

```
using System;
using System.IO;
using System.Text;
using System.Web;
using DotNetOpenAuth.Messaging;
using DotNetOpenAuth.OAuth2;
using Google.Apis.Authentication.OAuth2;
using Google.Apis.Drive.v2;
using Google.Apis.Util;

namespace GoogleTesting
{
    public partial class GoogleAuth : System.Web.UI.Page
    {
        private static readonly string CLIENTID = "xxxxxxxxx.apps.googleusercontent.com";
        private static readonly string CLIENTSECRET = "xxxxxxxxxxxxxxxxxxxxxx";
        private static readonly string APIKEY = "xxxxxxxxxxx";
        private static readonly string REDIRECTURI =  http://localhost:61111/default.aspx";
        private static readonly string[] SCOPES = new[] { DriveService.Scopes.Drive.GetStringValue() };

        private static DriveService driveService;
        private static OAuth2Authenticator<WebServerClient> authenticator;
        private static IAuthorizationState _state;

        private IAuthorizationState AuthState
        {
            get
            {
                return _state ?? HttpContext.Current.Session["GoogleAuthState"] as IAuthorizationState;
            }
        }

        private OAuth2Authenticator<WebServerClient> CreateAuthenticator()
        {
            var provider = new WebServerClient(GoogleAuthenticationServer.Description, CLIENTID, CLIENTSECRET);
            var authenticator = new OAuth2Authenticator<WebServerClient>(provider, GetAuthorization);
            return authenticator;
        }

        private IAuthorizationState GetAuthorization(WebServerClient client)
        {
            IAuthorizationState state = AuthState;
            if (state != null)
            {
                if (state.AccessTokenExpirationUtc.Value.CompareTo(DateTime.Now.ToUniversalTime()) > 0)
                    return state;
                else
                    state = null;
            }
            state = client.ProcessUserAuthorization(new HttpRequestInfo(HttpContext.Current.Request));
            if (state != null && (!string.IsNullOrEmpty(state.AccessToken) || !string.IsNullOrEmpty(state.RefreshToken)))
            {
                if (state.RefreshToken == null)
                    state.RefreshToken = "";
                HttpContext.Current.Session["GoogleAuthState"] = _state = state;
                return state;
            }
            client.RequestUserAuthorization(SCOPES, "", HttpContext.Current.Request.Url);
            return null;
        }

        protected void Page_Load(object sender, EventArgs e)
        {
            if(authenticator == null)
                authenticator = CreateAuthenticator();

            if (driveService == null)
            {
                driveService = new DriveService(authenticator);
                driveService.Key = APIKEY;
            }
            //We should now be authenticated and ready to use Drive API.
            UploadFile();
        }

        private void UploadFile()
        {
            Google.Apis.Drive.v2.Data.File newFile = new Google.Apis.Drive.v2.Data.File { Title = "Test File", MimeType = "text/plain" };
            byte[] byteArray = Encoding.ASCII.GetBytes("Body of the document.");
            MemoryStream stream = new MemoryStream(byteArray);
            FilesResource.InsertMediaUpload request = driveService.Files.Insert(newFile, stream, newFile.MimeType);
            request.Convert = true;
            request.Upload(); 
        }
    }
} 
```

问题出现在“request.Upload”行，但有以下异常。

> 异常详细信息：System.Exception：无效凭据
> 
> 源错误：第 85 行：request.Upload();
> 
> 源文件：C:\TMGGoogle\TMGGoogle\TMGGoogle\GoogleAuth.aspx.cs
> 行：85
> 
> 堆栈跟踪：
> 
> [例外：无效凭据]
> Google.Apis.Upload.ResumableUpload`1.Upload()
> +722 GoogleTesting.GoogleAuth.UploadFile()

任何帮助深表感谢。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:43:03.403

好吧，我找到了问题的根本原因。事实证明，我们公司的 Google Apps 帐户关闭了 Docs API 访问。

我们的 Google Apps 管理员已将其打开，这已解决了该问题。

# java - 我的 bin 文件夹中出现奇怪的类文件

> ID：12422388
> 
> 赞同：1
> 
> 时间：2012-09-14T10:08:36.403
> 
> 标签：java, eclipse, class, exception

我正在使用 Eclipse + Window Builder + 一些第三方库来构建一个 gui 应用程序，

我的应用程序的入口点位于 MainWindow.java 文件中，该文件还包含应用程序的 gui，除了我几乎没有帮助程序类。

我的应用程序运行良好，但是当我检查 bin 文件夹时，我发现还有四个类文件，即：1\. MainWindow$1.class 2\. MainWindow$2.class 3\. MainWindow$3.class 4\. MainWindow$4.class。

现在我不明白为什么这些文件在这里，当我删除这些文件时，Eclipse 抛出异常

```
Exception in thread "main" java.lang.NoClassDefFoundError: gui/MainWindow$1
at gui.MainWindow.main(MainWindow.java:71)
    Caused by: java.lang.ClassNotFoundException: gui.MainWindow$1
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source) 
```

引发异常的代码是：

```
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                MainWindow window = new MainWindow();
                window.frmMailExtractor.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }); 
```

我无法找出这些文件为何存在以及是谁放置的？有任何想法吗？

好的，所以这些是匿名类，但是为什么会出现异常呢？...为什么我在 eclipse 中看不到它们。因为当我将其导出为可运行的 jar 时，jar 会引发相同的异常

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T10:10:25.067

这些是为内部匿名内部类生成的类[*文件*](http://www.tek-tips.com/faqs.cfm?fid=1849)`MainWindow`。它可能包含一堆这样实现的事件侦听器。

匿名内部类被编译成名为 的单独类文件`<OuterClass>$<nnn>.class`，其中`<nnn>`是编译器生成的编号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T10:11:18.697

这些是匿名类被编译成的。文件名中的数字是相应 Java 编译单元中相关匿名类的序号。

# php - 随机读取重复的 SQLite 文件会提高读取性能吗？

> ID：12422389
> 
> 赞同：0
> 
> 时间：2012-09-14T10:08:41.693
> 
> 标签：php, sql, database, performance, sqlite

这可能是常识，但只是想确定一下。

正如[手册](http://www.sqlite.org/whentouse.html)所说，SQLite 理论上可以满足每天 1,000,000 次点击。现在，如果我只使用 SQLite 来读取数据，并且如果我制作 3 个数据库文件的副本（例如），然后随机读取这些副本，理论上它将性能提高到 3,000,000 次点击，还是因为它使用了相同的库/代码？

例子：

```
$choices[1] = 'db1.db';
$choices[2] = 'db2.db';
$choices[3] = 'db3.db';

$random = rand(1, 3);
$db_file = $choices[$random];

$db->read($db_file); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T22:06:11.933

我希望它会使您的性能更差，而不是更好，因为您会对文件系统缓存施加更大的压力。

事实上，它可能比只有三分之一的速度差得多。考虑这样一种情况，您的数据库与可用 RAM 的大小大致相同，并且每个查询都需要扫描整个数据库。如果您只有一个副本，则查询的成本是扫描所有内存的时间。如果您有三个副本并随机选择使用哪个副本，则查询的平均成本可能高达从磁盘读取整个数据库时间的三分之二（取决于访问模式和缓存的驱逐策略）。而且磁盘比内存慢很多数量级。

另请参阅[thrashing](http://en.wikipedia.org/wiki/Thrashing_%28computer_science%29)。

# ruby-on-rails - rails json过滤器“：仅”

> ID：12422395
> 
> 赞同：0
> 
> 时间：2012-09-14T10:09:08.313
> 
> 标签：ruby-on-rails, json, filter

我对我的模型做了以下查询：

```
output = user.interests.includes([:culture, :sports]) 
```

这为我提供了用户所有“文化”和“体育”条目的所有“兴趣”。我只想将“兴趣”、“文化”和“体育”的 id 列作为 json 转发给客户端。

我试过这样做：

```
output.to_json(:include => [:culture, :sports], :only => ['id']) 
```

这样做时，它只显示兴趣的 ID，但仍然包括“文化”和“体育”的每一列。我必须添加什么才能将“文化”和“体育”也仅限于 ID？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:31:48.610

您可以使用单独的哈希为每个包含添加选项，例如：

```
output.to_json(:include => { :culture => { :only => :id }, :sports => { :only => :id } }, :only => ['id']) 
```

# c# - 在 ZedGraph 窗格上单击画线

> ID：12422398
> 
> 赞同：1
> 
> 时间：2012-09-14T10:09:14.993
> 
> 标签：c#, zedgraph

我对 ZedGraph 有一些不同的要求。

当用户单击 ZedGraph 窗格时，我想在 ZedGraph 窗格上创建曲线。此外，我在该窗格上绘制了其他图表。但是我希望每当用户单击 zedGraph 区域时，我们都会获得用户单击的坐标，并且我在该单击的坐标上绘制一条直线。

我已将 MouseCLick 事件与 FindNearestObject 方法一起使用，如下所示：

```
private void zedGraph_RenderedTrack_MouseClick(object sender, EventArgs e)
    {
        MouseEventArgs xx = (MouseEventArgs)e;
        object nearestObject;
        int index;
        this.zedGraph_RenderedTrack.GraphPane.FindNearestObject(new PointF(xx.X, xx.Y), this.CreateGraphics(), out nearestObject, out index);
        if (nearestObject != null)
        {
            DrawALine(xx.X, Color.Red, true);
        }
    } 
```

但是使用这个，ZedGraph 搜索一些曲线并找到最近的点，然后绘制线条，但我希望在用户点击的地方绘制线条。有什么方法可以做到吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T15:07:30.870

您可以尝试以下代码，该代码将为鼠标单击事件绘制一条垂直线。

```
public Form1()
    {
        InitializeComponent();
    }        

    PointPairList userClickrList = new PointPairList();
    LineItem userClickCurve = new LineItem("userClickCurve");

    private void zedGraphControl1_MouseClick(object sender, MouseEventArgs e)
    {
        // Create an instance of Graph Pane
        GraphPane myPane = zedGraphControl1.GraphPane;

        // x & y variables to store the axis values
        double xVal;
        double yVal;

        // Clear the previous values if any
        userClickrList.Clear();

        myPane.Legend.IsVisible = false;

        // Use the current mouse locations to get the corresponding 
        // X & Y CO-Ordinates
        myPane.ReverseTransform(e.Location, out xVal, out yVal);

        // Create a list using the above x & y values
        userClickrList.Add(xVal, myPane.YAxis.Scale.Max);
        userClickrList.Add(xVal, myPane.YAxis.Scale.Min);

        // Add a curve
        userClickCurve = myPane.AddCurve(" ", userClickrList, Color.Red, SymbolType.None);

        zedGraphControl1.Refresh();
    } 
```

![在此处输入图像描述](../Images/ce17218ff6ea5cc3a41c511389152cd3.png)

您只需更改 userClickList 即可绘制水平线。

快乐编码.....:)

# asp.net - ASP.NET 网格视图问题

> ID：12422400
> 
> 赞同：1
> 
> 时间：2012-09-14T10:09:19.960
> 
> 标签：asp.net, .net, asp.net-mvc, vb.net

我是 NET 的新手，我从 3 天以来一直在与这个问题作斗争，无法解决！[ [1](https://i.stack.imgur.com/Z75bu.png)

数据库名称是 Tbl_Employees,Tbl_Project 我必须使用 project_id 作为它们之间的主键从上述两个表中获取用户名和项目两个字段，并将数据加载到网格视图中。加载网格所需的输入

![在此处输入图像描述](../Images/641b7a98caa279f0939742d45d56a5a6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:11:50.557

我不确定您到底需要什么，但它似乎是网格视图的基础知识。请使用这个出色的参考来帮助您解决问题。[http://technico.qnownow.com/tag/gridview/](http://technico.qnownow.com/tag/gridview/)

因为标签已从 c# 更改为 vb.net，所以我将保留我之前的答案。请尝试以下方法。我添加了一个`SqlCommand`

**VB.NET**代码 _

```
Dim da As New SqlDataAdapter
    Dim DS As New DataSet
    Dim mySelectQuery As String = "SELECT dbo.Tbl_Project.Project, dbo.Tbl_Employees.User_Name FROM dbo.Tbl_Employees INNER JOIN dbo.Tbl_Project ON dbo.Tbl_Employees.Project_ID = dbo.Tbl_Project.Project_ID"
    Dim ConnString As String = "Data Source=yourSQLServer; Initial Catalog=yourDB; User Id=yourUserName; Password=yourPwd;" ''Change to you database/server specifics
    Dim myConnection As New SqlConnection(ConnString)
    Dim myCommand As New SqlCommand(mySelectQuery, myConnection)
    myConnection.Open()
    da.SelectCommand = myCommand
    da.Fill(DS,"Project")
    If Not DS.Tables(0).Rows.Count > 0 Then
        MessageBox.Show("There were no results found. ", "No Results Found", MessageBoxButtons.OK, MessageBoxIcon.Exclamation)
    Else
        gridview3.DataSource = Ds
    gridview3.DataBind()

        myConnection.Close()
    End If 
```

对连接字符串的引用 [http://www.sql-server-helper.com/sql-server-2008/sqlconnection-connection-string.aspx](http://www.sql-server-helper.com/sql-server-2008/sqlconnection-connection-string.aspx)

# javascript - JavaScript 中的单色抖动（Bayer、Atkinson、Floyd–Steinberg）

> ID：12422407
> 
> 赞同：13
> 
> 时间：2012-09-14T10:09:29.557
> 
> 标签：javascript, image-processing, canvas, matrix, dithering

我正在使用 HTML5 中的网络摄像头过滤器。让[阿特金森抖动](http://blog.flickr.net/2012/04/01/your-photos-re-envisioned/)非常适合那种老式的 Mac 感觉。

![meemoo cam 抖动](../Images/25aca09a1048f45c290549c159d0bb71.png)
[直播](http://meemoo.org/iframework/#gist/3721129)| [代码](https://github.com/meemoo/iframework/blob/gh-pages/src/nodes/image-monochrome-worker.js)

现在我正在尝试为 1989 年的 Gameboy 感觉制作一个拜耳订购的抖动选项。

我[阅读了算法](http://en.wikipedia.org/wiki/Ordered_dithering)，但我无法将此伪代码转换为 JavaScript：

```
for each y
  for each x
    oldpixel := pixel[x][y] + threshold_map_4x4[x mod 4][y mod 4]
    newpixel := find_closest_palette_color(oldpixel)
    pixel[x][y] := newpixel 
```

在 AS3、PHP 或 JS 中是否有任何示例？你能解释一下发生了`threshold_map_4x4[x mod 4][y mod 4]`什么吗？

* * *

![游戏男孩风格 gif](../Images/03f7e43a21db817241df6626126c9342.png)（使用[Meemoo Gameboy GIFerizer 制作](http://meemoo.org/iframework/#gist/3722026)）

弄清楚了。在维基百科中它说“例如，在单色渲染中，如果像素的值（缩放到 0-9 范围内）小于矩阵相应单元格中的数字，则将该像素绘制为黑色，否则，将其绘制为白色。” 在 js 中，通过平均当前像素（0-255）和地图的值（15-240）并将其与阈值（通常为 129）进行比较，我得到了很好的结果：

```
var map = (imageData.data[currentPixel] + bayerThresholdMap[x%4][y%4]) / 2;
imageData.data[currentPixel] = (map < threshold) ? 0 : 255; 
```

这是我使用不同算法的整个单色函数：

```
var bayerThresholdMap = [
  [  15, 135,  45, 165 ],
  [ 195,  75, 225, 105 ],
  [  60, 180,  30, 150 ],
  [ 240, 120, 210,  90 ]
];

var lumR = [];
var lumG = [];
var lumB = [];
for (var i=0; i<256; i++) {
  lumR[i] = i*0.299;
  lumG[i] = i*0.587;
  lumB[i] = i*0.114;
}

function monochrome(imageData, threshold, type){

  var imageDataLength = imageData.data.length;

  // Greyscale luminance (sets r pixels to luminance of rgb)
  for (var i = 0; i <= imageDataLength; i += 4) {
    imageData.data[i] = Math.floor(lumR[imageData.data[i]] + lumG[imageData.data[i+1]] + lumB[imageData.data[i+2]]);
  }

  var w = imageData.width;
  var newPixel, err;

  for (var currentPixel = 0; currentPixel <= imageDataLength; currentPixel+=4) {

    if (type === "none") {
      // No dithering
      imageData.data[currentPixel] = imageData.data[currentPixel] < threshold ? 0 : 255;
    } else if (type === "bayer") {
      // 4x4 Bayer ordered dithering algorithm
      var x = currentPixel/4 % w;
      var y = Math.floor(currentPixel/4 / w);
      var map = Math.floor( (imageData.data[currentPixel] + bayerThresholdMap[x%4][y%4]) / 2 );
      imageData.data[currentPixel] = (map < threshold) ? 0 : 255;
    } else if (type === "floydsteinberg") {
      // Floyd–Steinberg dithering algorithm
      newPixel = imageData.data[currentPixel] < 129 ? 0 : 255;
      err = Math.floor((imageData.data[currentPixel] - newPixel) / 16);
      imageData.data[currentPixel] = newPixel;

      imageData.data[currentPixel       + 4 ] += err*7;
      imageData.data[currentPixel + 4*w - 4 ] += err*3;
      imageData.data[currentPixel + 4*w     ] += err*5;
      imageData.data[currentPixel + 4*w + 4 ] += err*1;
    } else {
      // Bill Atkinson's dithering algorithm
      newPixel = imageData.data[currentPixel] < threshold ? 0 : 255;
      err = Math.floor((imageData.data[currentPixel] - newPixel) / 8);
      imageData.data[currentPixel] = newPixel;

      imageData.data[currentPixel       + 4 ] += err;
      imageData.data[currentPixel       + 8 ] += err;
      imageData.data[currentPixel + 4*w - 4 ] += err;
      imageData.data[currentPixel + 4*w     ] += err;
      imageData.data[currentPixel + 4*w + 4 ] += err;
      imageData.data[currentPixel + 8*w     ] += err;
    }

    // Set g and b pixels equal to r
    imageData.data[currentPixel + 1] = imageData.data[currentPixel + 2] = imageData.data[currentPixel];
  }

  return imageData;
} 
```

我很感激优化提示。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-03T03:13:57.163

这是我所有的单色抖动功能，可用作网络工作者：[https ://github.com/meemoo/meemooapp/blob/master/src/nodes/image-monochrome-worker.js](https://github.com/meemoo/meemooapp/blob/master/src/nodes/image-monochrome-worker.js)

带网络摄像头的现场演示：http: [//meemoo.org/iframework/#gist/3721129](http://meemoo.org/iframework/#gist/3721129)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T11:36:14.160

我将其作为调试代码执行：

```
var canvas = document.createElement('canvas');
var ctx    = canvas.getContext('2d');

var img    = new Image();
img.src    = "http://i.stack.imgur.com/tHDY8.png";
img.onload = function() {
    canvas.width  = this.width;
    canvas.height = this.height;
    ctx.drawImage( this, 0, 0, this.width, this.height );

    var imageData  = ctx.getImageData( 0, 0, this.width, this.height);
    var depth      = 32;

    // Matrix
    var threshold_map_4x4 = [
        [  1,  9,  3, 11 ],
        [ 13,  5, 15,  7 ],
        [  4, 12,  2, 10 ],
        [ 16,  8, 14,  6 ]
    ];

    // imageData
    var width  = imageData.width;
    var height = imageData.height;
    var pixel  = imageData.data;
    var x, y, a, b;

    // filter
    for ( x=0; x<width; x++ )
    {
        for ( y=0; y<height; y++ )
        {
            a    = ( x * height + y ) * 4;
            b    = threshold_map_4x4[ x%4 ][ y%4 ];
            pixel[ a + 0 ] = ( (pixel[ a + 0 ]+ b) / depth | 0 ) * depth;
            pixel[ a + 1 ] = ( (pixel[ a + 1 ]+ b) / depth | 0 ) * depth;
            pixel[ a + 2 ] = ( (pixel[ a + 2 ]+ b) / depth | 0 ) * depth;
            //pixel[ a + 3 ] = ( (pixel[ a + 3 ]+ b) / depth | 3 ) * depth;
        }
    }

    ctx.putImageData( imageData, 0, 0);

};

document.body.appendChild(canvas); 
```

它似乎工作正常，您可以更改深度变量以更改后处理。

# ruby-on-rails - Rails：JSON 解析 URL 以供以后使用

> ID：12422414
> 
> 赞同：1
> 
> 时间：2012-09-14T10:09:50.727
> 
> 标签：ruby-on-rails, ruby, json, parsing

我正在尝试非常轻松地完成一些事情，但我无法将它解决到我在 Rails 中的初学者水平。问题是如何将 JSON 对象属性分配给 rails 对象。我正在尝试使用一些参数向 Google Map 的 URL 发送请求。如果没有 JSON 解析，它工作得很好，但是当我尝试解析它时，我收到很多错误。当我查询 URL ([http://maps.googleapis.com/maps/api/directions/json?origin=40.983204,29.0216549&destination=40.99160908659266,29.02334690093994&sensor=false][1]) 时，来自 Google 的常规 JSON 响应是像下面一样；

```
{
  "routes" : [
    {
      "bounds" : {
        "southwest" : {
          "lat" : 40.98289,
          "lng" : 29.02054
        },
        "northeast" : {
          "lat" : 40.99148,
          "lng" : 29.02388
        }
      },
      "summary" : "Mühürdar Cd",
      "waypoint_order" : [],
      "legs" : [
        {
          "start_location" : {
            "lat" : 40.98322,
            "lng" : 29.02166
          },
          "distance" : {
            "text" : "1.3 km",
            "value" : 1324
          }, 
```

继续。

我必须获得“摘要”属性的代码是；

```
@request = Net::HTTP.get(URI.parse('http://maps.googleapis.com/maps/api/directions/json?origin=40.983204,29.0216549&destination=40.99160908659266,29.02334690093994&sensor=false'))
    @result=JSON.parse(@request)["routes"]["summary"] 
```

我想问我从响应中获取**摘要属性的正确方法是什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-03T10:36:29.200

```
hash['routes'][0]['legs'][0]['duration']['text'] 
```

将允许您访问文本和

```
hash['routes'][0]['legs'][0]['duration']['value'] 
```

价值。试试看嘛

```
hash['routes'][0]['legs'][0]['duration'].class 
```

查看它是什么类型并相应地访问它

# javascript - 如何在按钮单击此窗口的弹出窗口中显示 webgrid

> ID：12422416
> 
> 赞同：0
> 
> 时间：2012-09-14T10:09:55.603
> 
> 标签：javascript, jquery, asp.net-mvc-3

我正在开发这样一个应用程序，在该应用程序中，我必须在弹出窗口中选择问题类型，在选择类型后，我应该单击 OK 按钮，该按钮将显示多个问题的 webGrid。由于我创建了弹出窗口并且它运行良好，当我点击确定按钮时，窗口变得正常。

因为我的弹出代码是

```
//Link
@Html.ActionLink("Contact Us", "AddDependentQuestion", "Question",
new { QuestionID = question.QuestionID }, 
new { @class = "openDialog",   data_dialog_title = "Dependent Question" })

 <script type="text/javascript">
$(document).ready(function () {
$(".openDialog").live("click", function (e) {
e.preventDefault();
           $("#popup")
addClass("dialog")
           .attr("id", $(this)
)
                .appendTo("body")
                .dialog({
close: function () { $(this).remove() },
modal: true
                })
.load(this.href);
           alert(this.href);
});

       $(".close").live("click", function (e) {
e.preventDefault();
           $(this).closest(".dialog").dialog("close");
});
   });
</script> 
```

# c - 关于 VC++ 中未使用的函数

> ID：12422418
> 
> 赞同：3
> 
> 时间：2012-09-14T10:09:56.513
> 
> 标签：c, visual-c++

只是想验证在 VC++ 中，从未调用过的未使用的成员函数默认情况下被编译器视为内联函数？如果是这样为什么会这样，为什么不完全丢弃（因为它永远不会被调用）这个函数而不是内联呢？

有什么好处？

更新问题是为什么在永远不会调用它的时候内联它？为什么不简单地永远丢弃它，就像丢弃一些未使用的变量一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:20:06.397

`inline`如果成员函数在类定义的主体中定义，则在不使用关键字的情况下将其视为内联。他们是否被调用与它无关。

未使用的成员函数通常不能被丢弃，因为它们的名称具有外部链接 - 也就是说，某些其他翻译单元或可执行文件可能会调用它们，甚至在编译此翻译单元或此可执行文件时还没有编写已连接。

一旦到达链接时间，如果实现以某种方式知道这不可能发生，那么它可以丢弃该函数的代码。例如，因为操作系统无法在可执行文件中查找符号，或者因为您已经告诉链接器使用某些实现定义的选项将它们删除。

尤其是与 VC++ 相关：在 Windows 上，您可以在可执行文件中查找符号（如果它们是`dllexport`. 所以这些函数即使在链接时通常也不会被丢弃，而其他未使用的函数也不能仅仅因为这个 TU 不使用它而在编译时被丢弃。对于以通常方式定义的*大多数*类，具有声明成员函数的头文件和定义它们的源文件，这些函数在该源文件中未使用。因此，如果编译器因为它们在那个 TU 中未使用而丢弃它​​们，那么什么都不会起作用。

我*认为*（我不确定）函数是否内联与它是否可以被丢弃有关，但可能并不意味着它可以完全被丢弃。确实，如果它是内联的，并且有人调用它，那么有人必须在他们的 TU 中有函数的定义。所以从某种意义上说，这个功能是“不需要的”。但是，`static`无论从哪个 TU 调用任何局部变量都必须共享，并且无论采用哪个 TU，函数本身的地址都必须相同。因此即使不是该函数的完整代码。

但正如我所说——即使内联函数在未使用时可以被丢弃，并非所有未使用的函数都是内联的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:19:22.273

内联它在哪里？它从未被调用，因此不可能将其内联到任何调用站点。

该标准规定函数是否被视为内联。它是否被调用是无关紧要的。

# python - Python Pyqt：无法在终端窗口中的 lineedit 和打印命令中显示数据

> ID：12422419
> 
> 赞同：0
> 
> 时间：2012-09-14T10:10:07.460
> 
> 标签：python, pyqt

我试图在 Lineedit 中显示循环数据，但它没有更新。即使是打印命令也不会在终端上打印数据，直到我按下 lineedit 中的 return 以外的任何键。看看程序并建议我进行更改：

```
import sys
import time
from PyQt4.QtGui import *
from PyQt4.QtCore import *

class MyFrame(QWidget):
def __init__(self):
    QWidget.__init__(self)

    self.le = QLineEdit(self)
    self.le.setGeometry(200,200,75,35)

    i=0
    self.le.setText(str(i))

    self.connect(self.le, SIGNAL("textChanged(QString)"),self.updatedvalue)

def updatedvalue(self):

    for i in range(1,5):
        self.le.setText(str(i))
        print(i)
        time.sleep(1)

app=QApplication(sys.argv)
f=MyFrame()
f.show()
app.exec_() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T15:29:46.890

您需要`QApplication.instance.processEvents()`在更新您`QLineEdit`的文本后致电以强制更新，否则在最终号码之前您将看不到任何内容。

您还需要将`textChanged()`信号更改为`textEdited()`. 使用`textChanged()`你的`updatedvalue()`函数将在你的循环的第一遍被调用一次，`setText()`因为你正在更新`QLineEdit`'s 文本。如果您以编程方式更新文本，`textEdited()`则不会触发信号。

```
import sys
import time
from PyQt4.QtGui import *
from PyQt4.QtCore import *

class MyFrame(QWidget):
    def __init__(self):
        QWidget.__init__(self)

        self.le = QLineEdit(self)
        self.le.setGeometry(200,200,75,35)

        i = 0
        self.le.setText(str(i))

        self.connect(self.le, SIGNAL("textEdited(QString)"),self.updatedvalue)

    def updatedvalue(self):
        for i in range(1,5):
            self.le.setText(str(i))
            QApplication.instance().processEvents()
            print(i)
            time.sleep(1)

app=QApplication(sys.argv)
f=MyFrame()
f.show()
app.exec_() 
```

正如 Bob 提到的，使用 QTimer 会好得多。

# symfony - 将事件注入服务

> ID：12422428
> 
> 赞同：0
> 
> 时间：2012-09-14T10:10:43.053
> 
> 标签：symfony, symfony-2.1

有没有办法在服务中注入事件以使服务与事件无关？
在散文
中：服务说：嘿，给我任何事件，我会在我完成工作后实例化它并触发它。

我想这很困难，因为事件的结构可能非常不同：
Event1 需要构造函数中的三个参数，而 Event2 只有一个。

目的是减少捆绑包中的依赖关系，同时让 fe 自定义记录器能够灵活地挂接到服务中。

我怎样才能实现这样的目标？

也许反过来：触发服务事件并使侦听器事件不可知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T12:34:08.683

如果服务的调用者确实知道事件的参数并且事件的侦听器确实知道事件，那么就有可能创建事件。

我的示例基于 Symfony2 烹饪书中的示例：[如何在不使用继承的情况下扩展类](http://symfony.com/doc/current/cookbook/event_dispatcher/class_extension.html)。

通常你会发送这样的事件：

```
$event = new HandleUndefinedMethodEvent($this, $method, $arguments);
$this->dispatcher->dispatch('foo.method_is_not_found', $event); 
```

在您的服务中，您可以添加一个方法来创建新事件：

```
public function createEvent($name, $class, $arguments)
{
    ...
    $eventClass = new \ReflectionClass($class);
    $event = $eventClass->newInstanceArgs($arguments);
    $this->dispatcher->dispatch($name, $event);
} 
```

在这种情况下，服务不需要知道事件，但是，如上所述，调用者和侦听器都必须知道。

# app-store - 如何在 App Store 上更新应用程序

> ID：12422431
> 
> 赞同：0
> 
> 时间：2012-09-14T10:10:46.190
> 
> 标签：app-store, app-store-connect

我想知道如何在 AppStore 上将我的应用程序更新到新版本 1.1？我是否必须以与旧应用相同的方式制作新的 AppID 并添加新应用？

谢谢您的回复，

另外我想问一下这在我的应用状态中意味着什么？

**“路由应用程序覆盖文件”**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T04:48:52.837

要更新现有应用，您需要使用与现有应用完全相同的 Bundle ID。任何其他 Bundle ID 都不会是更新，而是 App Store 中完全不同的应用程序。

# php - MongoDB-PHP 更新覆盖现有内容 - 为什么？

> ID：12422434
> 
> 赞同：1
> 
> 时间：2012-09-14T10:10:53.097
> 
> 标签：php, mongodb

我在 mongo db 集合中有以下内容，

```
{ "_id" : ObjectId("5052f343381ef8bc10000011"), "first_name" : "Tadataka", "midle_name"  :      
"", "last_name" : "Yamada", "title" : "Independent Director", "biogra
phy" : "Dr. Tadataka Yamada, M.D., is Independent Director of Agilent Technologi
es Inc., ", "rank" : " ", "department" : " ", "current" : "true", "company_id" :     ObjectId("50072714b4a6deba100051d3"
) } } 
```

当我尝试为几个字段更新上述内容并插入新字段（如果不存在）时，现有字段会被覆盖。这是我的代码，

```
$mycollection->update(array("_id" => $id), array('$set' => array("first_name" => $first_name, "updated_at" => $uat)); 
```

我得到的结果是

```
{ "_id" : ObjectId("5052f343381ef8bc10000011"), "first_name" : "Tadataka", "updated_at" : 134567894 } 
```

不是只更新值，而是我的整个内容被覆盖，我错过了。？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T10:23:32.037

像这样试试

```
$mycollection->update(
            array("_id" => $id),
            array('$set' => array("first_name" => $first_name, "updated_at" => $uat)),
            array("upsert" => true)
); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T19:13:15.983

您共享的`update()`代码中的内容是正确的。由于您使用的是原子修饰符，`$set`因此没有理由`_id`覆盖给定的整个文档。以下脚本很容易地重现了这一点，并输出了`first_name`更改`updated_at`字段并添加了字段的示例文档：

```
<?php

$m = new Mongo();
$c = $m->test->foo;
$c->drop();

$document = array(
    '_id' => new MongoId('5052f343381ef8bc10000011'),
    'first_name' => 'Tadataka',
    'middle_name' => '',
    'last_name' => 'Yamada',
    'title' => 'Independent Director',
    'company_id' => new MongoId('50072714b4a6deba100051d3')
);

$c->insert($document);

$c->update(
    array('_id' => $document['_id']),
    array('$set' => array('first_name' => 'foobar', 'updated_at' => new MongoDate()))
);

var_dump($c->findOne()); 
```

如果你在本地运行它，你应该看到：

```
array(7) {
  ["_id"]=>
  object(MongoId)#8 (1) {
    ["$id"]=>
    string(24) "5052f343381ef8bc10000011"
  }
  ["company_id"]=>
  object(MongoId)#9 (1) {
    ["$id"]=>
    string(24) "50072714b4a6deba100051d3"
  }
  ["first_name"]=>
  string(6) "foobar"
  ["last_name"]=>
  string(6) "Yamada"
  ["midle_name"]=>
  string(0) ""
  ["title"]=>
  string(20) "Independent Director"
  ["update_at"]=>
  object(MongoDate)#10 (2) {
    ["sec"]=>
    int(1347908855)
    ["usec"]=>
    int(551000)
  }
} 
```

如果您分享如何获得粘贴的最后一个结果，这可能会有所帮助，但您的更新查询当然不应该归咎于此。

作为旁注，您可能希望对`current`文档中的字段使用正确的布尔值，而不是字符串`"true"`。

# c# - MVP 视图/演示者注册

> ID：12422438
> 
> 赞同：1
> 
> 时间：2012-09-14T10:11:03.823
> 
> 标签：c#, winforms, autofac

我正在为 WinForms 应用程序开发基于 MVP 的 GUI 架构，并希望使用 Autofac 来跟踪不同的部分。我不断遇到循环组件依赖关系，并希望能在正确的方向上轻轻推动。

该架构基于[这篇](http://geekswithblogs.net/lennykean/archive/2012/02/21/winforms-and-mvp-making-a-testable-application.aspx)文章，其中视图就像我得到的一样被动。View 没有对 Presenter 的引用。视图在构建时传递给演示者。因此，在非 DI 世界中，您将开始您的程序：

```
var MainView = new MainView();
var mainPresenter = new MainPresenter(mainView, new DataRepository());
Application.Run(mainView); 
```

好的，因此 Presenter 需要了解 View 实例才能完成其工作。我如何在注册码中表达这一点？这是我尝试过的：

```
builder.RegisterType<MainPresenter>().PropertiesAutowired().SingleInstance();
builder.RegisterType<MainView>().As<IMainView>().PropertiesAutowired().SingleInstance(); 
```

然后在 Program.cs 中：

```
var mainPresenter = Container.Resolve<MainPresenter>();
Application.Run(Container.Resolve<IMainView>() as MainView); 
```

但是这样我需要记住创建 Presenter 实例。但是，我想在注册中表示，如果我请求 IMainView 实例，则应该启动 MainPresenter。但是怎么……

欢迎任何暗示、嘲讽或嘲弄的笑声

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T20:36:37.083

我认为您应该可以通过这种方式解决它：注册演示者和视图而无需属性注入，因为您说视图不需要对演示者的引用，并且构造函数注入被认为是 Autofac 中的最佳实践：

```
builder.RegisterType<MainPresenter>().SingleInstance();
builder.RegisterType<MainView>().As<IMainView>(); 
```

通过构造函数将视图注入到演示者中，并将其作为只读属性发布：

```
public class MainPresenter
{
  // Private variables

  private readonly IMainView _view;

  // Constructor

  public MainPresenter(IMainView view)
  {
    _view = view;
  }

  // Properties

  public IMainView View
  {
    get { return _view; }
  }
} 
```

然后通过一个解析启动应用程序：

```
var mainPresenter = Container.Resolve<MainPresenter>();
Application.Run(mainPresenter.View as Form); 
```

最后，如果您稍后发现您需要从视图到演示者的引用，我认为您必须在视图上使用属性注入以避免循环引用异常。然后你可以像这样注册视图：

```
builder.RegisterType<MainView>().As<IMainView>().PropertiesAutowired(PropertyWiringFlags.AllowCircularDependencies); 
```

并为视图提供将由 Autofac 设置的读/写属性

```
public MainPresenter Presenter { get; set; } 
```

# perl - perl 正则表达式匹配一个字符串并在它旁边添加一个字符串

> ID：12422446
> 
> 赞同：0
> 
> 时间：2012-09-14T10:11:27.900
> 
> 标签：perl

我需要在一些用 . 分隔的句子中间添加一个字符串`\n`。例如：

```
INPUT          OUTPUT
V2+count    -> V2+came+count
V6+num      -> V6+came+num
V10+hi+town -> V10+came+hi+town 
```

和

```
N2+hello    -> N2+went+hello
N7+time     -> N7+went+time 
```

到目前为止我写的代码是

```
if ($new=~/\(came\)\|\(went\)/) {
    my $prev_tag = $`;
    if ($prev_tag5=~ /\(V\d+?\)?\+$/) {
        $new=~ s/\(came\)\|//;
    } else {
        $new=~s/\(went\)\|//;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T10:28:30.690

我的建议是保持简单，不要尝试同时处理这两种情况。因此，首先将“来”添加到所有匹配的案例中`/V\d+/`，然后将“去”添加到所有匹配的案例中`/N\d+/`：

```
$new =~ s/(V\d+\+)/$1came+/;
$new =~ s/(N\d+\+)/$1went+/; 
```

# java - Playframework WS Api 和证书

> ID：12422451
> 
> 赞同：0
> 
> 时间：2012-09-14T10:11:38.990
> 
> 标签：java, certificate, playframework-2.0

Play 2.0 WS API 是否验证服务器证书？
如果没有，我如何在 Java 中验证它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:20:06.273

在 play 2.0.3 中有一个关于这个主题的[问题。](https://play.lighthouseapp.com/projects/82401/tickets/655-ws-call-wont-fail-upon-https-call-to-a-page-with-wrong-certificate)[2.0.4 版本](https://play.lighthouseapp.com/projects/82401-play-20/milestones/155624-204)应该可以解决这个问题。您可以轻松地对其进行测试，因为[已宣布发布候选版本](https://groups.google.com/forum/#!msg/play-framework/22TX-nyC_CA/RGkvvZPZNNMJ)。[您还可以找到有关此堆栈溢出问题](https://stackoverflow.com/questions/11901816/accessing-ssl-secured-web-page-from-play-application)的技术信息。

# android - 如何在android中启用或禁用复选框

> ID：12422456
> 
> 赞同：2
> 
> 时间：2012-09-14T10:11:54.060
> 
> 标签：android, android-layout, checkbox

我的快速警报对话框中有 4 个复选框...我想要的是，当我选中 [启用] 1 个复选框时，其他 3 个复选框必须禁用。我点击它们，但没有禁用它们。我不知道该怎么做。

这是我正在寻找的：

![小样](../Images/8e58c1f95ced2abd9ed608c49705b78a.png)

```
 checkmrn  =  (CheckBox) container.findViewById(R.id.MrnCheckBox);
    checkmrn.setText("By Mrn");
    checkmrn.setEnabled(false);
    checkdate  =  (CheckBox) container.findViewById(R.id.dateCheckBox);
    checkdate.setText("By Date");
    checkname  =  (CheckBox) container.findViewById(R.id.nameCheckBox);
    checkname.setText("By Name");
    checklocation  =  (CheckBox) container.findViewById(R.id.locationCheckBox);
    checklocation.setText("By Location");
    okButton = (Button) container.findViewById(R.id.okButton);
    okButton.setText("Ok");

    checkmrn.setOnClickListener(new OnClickListener() {          
          @Override
          public void onClick(View v) {                  
            if (((CheckBox) v).isChecked()) {
                Toast.makeText(mContext, "By Mrn", Toast.LENGTH_SHORT).show();
            }        
          }
        });
    checkdate.setOnClickListener(new OnClickListener() {             
          @Override
          public void onClick(View v) {                  
            if (((CheckBox) v).isChecked()) {
                Toast.makeText(mContext, "By Date", Toast.LENGTH_SHORT).show();
            }        
          }
        });
    checkname.setOnClickListener(new OnClickListener() {             
          @Override
          public void onClick(View v) {                  
            if (((CheckBox) v).isChecked()) {
                Toast.makeText(mContext, "By Name", Toast.LENGTH_SHORT).show();
            }        
          }
        });
    checklocation.setOnClickListener(new OnClickListener() {             
          @Override
          public void onClick(View v) {                  
            if (((CheckBox) v).isChecked()) {
                Toast.makeText(mContext, "By Location", Toast.LENGTH_SHORT).show();
            }        
          }
        }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T11:11:33.147

这是上述问题的工作代码。

```
 checkmrn  =  (CheckBox) container.findViewById(R.id.MrnCheckBox);
    checkmrn.setText("By Mrn"); 
    checkdate  =  (CheckBox) container.findViewById(R.id.dateCheckBox);
    checkdate.setText("By Date");   
    checkname  =  (CheckBox) container.findViewById(R.id.nameCheckBox);
    checkname.setText("By Name");
    checklocation  =  (CheckBox) container.findViewById(R.id.locationCheckBox);
    checklocation.setText("By Location");

    okButton = (Button) container.findViewById(R.id.okButton);
    okButton.setText("Ok");

    checkmrn.setOnClickListener(new OnClickListener() {          
          @Override
          public void onClick(View v) {                  

              if (((CheckBox) v).isChecked()) {
                  checkmrn.setChecked(true);
                  Toast.makeText(mContext, "By Mrn", Toast.LENGTH_SHORT).show();
                  checkdate.setChecked(false);
                  checkname.setChecked(false);
                  checklocation.setChecked(false);
                    } 
          }
        });
    checkdate.setOnClickListener(new OnClickListener() {             
          @Override
          public void onClick(View v) {                   
              if (((CheckBox) v).isChecked()) {
                  checkdate.setChecked(true);
                  Toast.makeText(mContext, "By Date", Toast.LENGTH_SHORT).show();
                  checkmrn.setChecked(false);
                  checkname.setChecked(false);
                  checklocation.setChecked(false);
                    } 
          }
        });
    checkname.setOnClickListener(new OnClickListener() {             
          @Override
          public void onClick(View v) {                                     
              if (((CheckBox) v).isChecked()) {
                  checkname.setChecked(true);
                  Toast.makeText(mContext, "By Name", Toast.LENGTH_SHORT).show();
                  checkmrn.setChecked(false);
                  checkdate.setChecked(false);
                  checklocation.setChecked(false);
                    }  
          }
        });
    checklocation.setOnClickListener(new OnClickListener() {             
          @Override
          public void onClick(View v) {                  

              if (((CheckBox) v).isChecked()) {
                  checklocation.setChecked(true);
                  Toast.makeText(mContext, "By Location", Toast.LENGTH_SHORT).show();
                  checkmrn.setChecked(false);
                  checkname.setChecked(false);
                  checkdate.setChecked(false);
                    } 
          }
        });
checkmrn  =  (CheckBox) container.findViewById(R.id.MrnCheckBox);
    checkmrn.setText("By Mrn"); 
    checkdate  =  (CheckBox) container.findViewById(R.id.dateCheckBox);
    checkdate.setText("By Date");   
    checkname  =  (CheckBox) container.findViewById(R.id.nameCheckBox);
    checkname.setText("By Name");
    checklocation  =  (CheckBox) container.findViewById(R.id.locationCheckBox);
    checklocation.setText("By Location");

    okButton = (Button) container.findViewById(R.id.okButton);
    okButton.setText("Ok");

    checkmrn.setOnClickListener(new OnClickListener() {          
          @Override
          public void onClick(View v) {                  

              if (((CheckBox) v).isChecked()) {
                  checkmrn.setChecked(true);
                  Toast.makeText(mContext, "By Mrn", Toast.LENGTH_SHORT).show();
                  checkdate.setChecked(false);
                  checkname.setChecked(false);
                  checklocation.setChecked(false);
                    } 
          }
        });
    checkdate.setOnClickListener(new OnClickListener() {             
          @Override
          public void onClick(View v) {                   
              if (((CheckBox) v).isChecked()) {
                  checkdate.setChecked(true);
                  Toast.makeText(mContext, "By Date", Toast.LENGTH_SHORT).show();
                  checkmrn.setChecked(false);
                  checkname.setChecked(false);
                  checklocation.setChecked(false);
                    } 
          }
        });
    checkname.setOnClickListener(new OnClickListener() {             
          @Override
          public void onClick(View v) {                                     
              if (((CheckBox) v).isChecked()) {
                  checkname.setChecked(true);
                  Toast.makeText(mContext, "By Name", Toast.LENGTH_SHORT).show();
                  checkmrn.setChecked(false);
                  checkdate.setChecked(false);
                  checklocation.setChecked(false);
                    }  
          }
        });
    checklocation.setOnClickListener(new OnClickListener() {             
          @Override
          public void onClick(View v) {                  

              if (((CheckBox) v).isChecked()) {
                  checklocation.setChecked(true);
                  Toast.makeText(mContext, "By Location", Toast.LENGTH_SHORT).show();
                  checkmrn.setChecked(false);
                  checkname.setChecked(false);
                  checkdate.setChecked(false);
                    } 
          }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:16:23.813

如果您想在选择一个选项时禁用其他选项，请创建禁用/启用方法

```
protected void setGroupState(boolean state)
{
     //here put all options to have state changed in one go
} 
```

然后在应该更改“组”状态的选项的单击处理程序中

以适当的状态调用它。例如 setGroupState(false);

此致

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-28T06:49:21.403

您可以使用`checkBox`which is的属性`setClickable`。

以下是一个简单的代码示例，它允许禁用复选框：

```
CheckBox check_1;
check_1 = (CheckBoX)findViewById(R.id.(the id of your checkbox in xml));
check_1.setClickable(false);
//then this checkbox will be disabled. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T10:34:48.150

单击复选框时，您可以使其他复选框为假，当前为真，例如

```
 if (((CheckBox) v).isChecked()) {
            currentchk.setChecked(true);
             otherchkbox.setChecked(false);
            } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T10:37:41.343

试试这样：

```
private OnCheckedChangeListener listener = new OnCheckedChangeListener() {
public void onCheckedChanged(CompoundButton arg0, boolean isChecked) {
if(isChecked){
switch(arg0.getId())
  {
    case R.id.firstCheckBox:
         firstCheckBox.setChecked(true);
         secondCheckBox.setChecked(false);
         thirdCheckBox.setChecked(false);
         break;
    case R.id.secondCheckBox:
         firstCheckBox.setChecked(false);
         secondCheckBox.setChecked(true);
         thirdCheckBox.setChecked(false);
         break;
   case R.id.thirdCheckBox:
        firstCheckBox.setChecked(false);
        secondCheckBox.setChecked(false);
       thirdCheckBox.setChecked(true);
        break;
  }
}

}
}; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-14T11:51:58.000

只需在 RadioGroup 中使用 RadioButton ！！！这就是你想要的！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-19T10:25:03.873

当您单击其他布局或按钮等时，您可以添加此行代码 ->

1.  在**科特林：** `yourCheckbox.isChecked = !yourCheckbox.isChecked`

2.  在**Java 中：** `yourCheckbox.setChecked() = !yourCheckbox.isChecked()`

希望这可以帮助你:)

# java - 当应用程序从 android 设备卸载时，从 SUP 服务器中删除应用程序连接

> ID：12422457
> 
> 赞同：1
> 
> 时间：2012-09-14T10:11:58.957
> 
> 标签：java, android, sybase, sup

我正在使用 SUP 2.1.3 为 Android 开发应用程序。初始化时，应用程序将在服务器中注册并在服务器和设备之间建立连接。现在，当用户从设备上卸载应用程序时，必须删除这个注册的连接。

我的问题是：我可以通过应用程序本身来完成吗？

如果是，我该怎么做。根据我的研究，我可以理解在卸载时无法调用任何代码，因为我们使用 onDestroy() 或 onPause() 方法来执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T15:03:33.013

不，你不能。

当您卸载应用程序时，它的进程将被终止（如果它正在运行）并删除应用程序文件夹。为什么***必须删除***连接？

无论哪种方式，当检查用户是否在 SUP 上登录时，连接库只是从 SharedPreferences 文件返回一个布尔值。

# asp.net - 在没有 MVC 的情况下针对数据库构建 ASP.Net 自定义授权

> ID：12422458
> 
> 赞同：2
> 
> 时间：2012-09-14T10:12:08.400
> 
> 标签：asp.net, security, sharepoint, authorization

这是我的第一个要求，所以不要太难。:)

我们正在构建一个 Sharepoint 2010 - 应用程序，它由一些 Sharepoint Web 部件和许多 ASP.Net 站点组成。因此，我们仅限于使用没有 MVC 的 ASP.Net。这个决定是做出的，不能拒绝。

我们正在使用带有模拟的 Windows 身份验证。用户存储在应用程序数据库中。除了用户之外，还有对特定对象和特定操作具有权限的角色。所有这些信息都存储在自定义数据库中。

该数据库有一个数据访问层 (EF 4.0)。由于 Sharepoint 仅限于 .NET Framework 3.5，因此业务逻辑由使用 DAL 的 WCF 数据服务和访问 WCF 数据服务以获取所需信息的业务逻辑库组成。

ASP.Net-Pages 和 Sharepoint Web 部件直接访问业务逻辑。

我现在需要的是某种 Manager-Class，它正在根据数据库检查用户以授权他访问特定对象。我不想以编程方式进行。我想使用注释来指定是否可以调用来自业务层的方法。此外，我想在没有编程 if 子句的情况下隐藏 ASP.Net 站点中的一些内容。

有人可以给我一个提示来实现这一目标吗？有没有办法自定义标准框架的某些部分来实现它？

我想存储在会话中的用户及其角色和权限。这是一个好方法吗？该应用程序只能在本地网络中访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T08:37:54.717

我们一直在共享点作为应用程序主机。

我已经实现了一个自定义用户控件，它实现了所有的安全问题。

```
public partial class FMD_RoleEnabledControl : System.Web.UI.UserControl
{
    public string EnabledRoles { get; set; }
    public bool HasDataBinding { get; set; }

    public string CurrentUserName
    {
        get { return Page.User.Identity.Name; }
    }

    protected override void OnPreRender(EventArgs e)
    {
        if (!HasDataBinding)
            Visible = EnabledRoles.Split(',').Any(rolle => new FMDRoleProvider().IsUserInRole(CurrentUserName, rolle));
        base.OnPreRender(e);
    }

    protected override void OnLoad(EventArgs e)
    {
        if(HasDataBinding)
            Visible = EnabledRoles.Split(',').Any(rolle => new FMDRoleProvider().IsUserInRole(CurrentUserName, rolle));
        base.OnLoad(e);
    }
} 
```

自定义角色提供者

```
public class FMDRoleProvider : RoleProvider
{
    public const string SEPERATOR = ",";

    ...

    public override string[] GetRolesForUser(string username)
    {
        if (username == null || username == "")
            throw new ProviderException("Kein User-Name übergeben"); //TODO

        string tmpRollen = "";

        RechteManager rm = new RechteManager();
        var rollen = rm.GetUserRollen(username);
        foreach (var rolle in rollen)
        {
            tmpRollen += rolle.ROL_Name + SEPERATOR;
        }

        if (tmpRollen.Length > 0)
        {
            //Letzten seperator entfernen
            tmpRollen = tmpRollen.Substring(0, tmpRollen.Length - 1);
            return tmpRollen.Split(',');
        }

        return new string[0];
    }

    ...

    public override bool IsUserInRole(string userName, string roleName)
    {
        if (userName == null || userName == "")
            throw new ProviderException("User name cannot be empty or null."); //TODO
        if (roleName == null || roleName == "")
            throw new ProviderException("Role name cannot be empty or null."); //TODO

        RechteManager rm = new RechteManager();
        return rm.IsUserInRolle(userName, roleName);
    }
} 
```

用法

```
public partial class CustomControl: FMD_RoleEnabledControl

<custom:CustomControl ID="custom" runat="server" EnabledRoles="Admin" HasDataBinding="True" /> 
```

它只是检查角色的第一种方法，但效果很好。作为第二个目标，我将实施额外的安全措施，例如检查特定操作。RoleProvider 也必须在 web.config 中注册。但是时间很短；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T18:17:06.920

欢迎来到堆栈溢出！对此的一些想法-

1.  您可能更适合在表弟网站[http://sharepoint.stackexchange.com](http://sharepoint.stackexchange.com)上提出这些问题。

2.  这取决于您的网络场架构。如果您的 Web 前端和数据源在同一台服务器上，那么使用 windows 身份验证来确定当前用户应该很简单。但是，如果您的 Web 前端和数据源位于不同的服务器上，那么由于“双跳”场景，您已经达到了限制，其中用户的凭据无法共享到 sharepoint 服务器后面的服务器 - 可以这么说。
    要解决此问题，请调查在您的 SharePoint 环境中使用 Kerberos 身份验证，这允许 SharePoint 跟踪整个场中的用户凭据 - [http://blogs.technet.com/b/tothesharepoint/archive/2010/07/22/whitepaper-configuring- kerberos-authentication-for-sharepoint-2010-and-sql-server-2008-r2-products.aspx](http://blogs.technet.com/b/tothesharepoint/archive/2010/07/22/whitepaper-configuring-kerberos-authentication-for-sharepoint-2010-and-sql-server-2008-r2-products.aspx)

3.  另一种选择是不要使用 SharePoint 作为您的应用程序主机。创建您的 Web 应用程序并将其部署为自己的网站 (http://mysupercoolsite.organization.com)，然后在 SharePoint 中创建一个新的“Web 部件页面”，采用“整页垂直”布局。然后，将“页面查看器”Web 部件添加到页面，将 URL 提供给 mysupercoolsite.organization.com。这样一来，SharePoint 就成为您的用户访问此应用程序的“门户”，但所有身份验证、授权和结构都基于应用程序本身，而不是在 SharePoint 中。

# linux-kernel - 内核中IRQ和FIQ的区别？

> ID：12422459
> 
> 赞同：0
> 
> 时间：2012-09-14T10:12:10.313
> 
> 标签：linux-kernel, arm, interrupt

根据 Linux API，IRQ 和 FIQ 有什么区别？他们使用相同的api吗？差异仅在 ARM 内核内部还是与内核函数调用有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:14:07.877

不，他们使用不同的 API。最好的查看位置是`arch/arm/kernel/fiq.c`内核树。看起来树中有一些使用它的驱动程序作为示例可能会有所帮助。

# jquery - cookie的分类是jquery cookies __utma __utmb __utmz

> ID：12422460
> 
> 赞同：3
> 
> 时间：2012-09-14T10:12:12.827
> 
> 标签：jquery, jquery-mobile, cookies

我正在使用 jquery 移动框架并执行 cookie 审计。jquery cookie __utma、__utmb 和 __utmz 属于以下哪些分类？

![jQuery 饼干](../Images/8a0a64c9604f46cf4a8cc6a11eccc2ec.png)

1.  “绝对必要” cookie 让您可以在网站上四处走动并使用我们的搜索和登录区域等基本功能。

2.  “性能”cookie 收集有关您如何使用我们网站的信息，例如您访问了哪些页面。

3.  “功能”cookie 用于提供我们的核心服务或保存设置以改善您的访问。

4.  “目标”cookie 由第三方部署，例如 Facebook、Twitter 和我们的广告合作伙伴。他们随后可能会使用有关您访问的信息，在本网站和其他网站上针对您投放您可能感兴趣的广告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T10:19:42.803

这三个 cookie 由 Google Analytics 创建，而不是 jQuery Mobile。根据您的分类，它们是“性能”cookie，用于跟踪用户在网站上的活动。[在此处](http://www.google.com/analytics/)和[此处](http://en.wikipedia.org/wiki/Google_Analytics)阅读有关 Google Analytics的更多信息。

# c# - DllImport 不在智能感知中显示

> ID：12422463
> 
> 赞同：-1
> 
> 时间：2012-09-14T10:12:33.890
> 
> 标签：c#, pinvoke, dllimport

这是我第一次尝试在 C# 中使用 DllImort。但它没有出现在 InteliSense 中。我已经添加了

```
using System.Runtime.InteropServices; 
```

但它不再起作用了。而是显示此**[DllImportAttribute]**。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:18:41.373

你没有做错任何事。使用此属性为要导入的方法定义托管签名。

例如

```
[DllImport("kernel32.dll", BestFitMapping = false, 
                CharSet = CharSet.Auto, SetLastError = true)]
private static extern IntPtr GetModuleHandle(string moduleName); 
```

在[MSDN](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.dllimportattribute.aspx)中查找所有可能的参数`DllImport`

# javascript - 选项卡系统溢出到下拉列表

> ID：12422464
> 
> 赞同：0
> 
> 时间：2012-09-14T10:12:34.597
> 
> 标签：javascript, jquery, css

我被要求创建一个基于选项卡的界面来切换内容而无需刷新。这很好，很花哨，但是可以动态添加选项卡列表项，创建更长的选项卡集。当它们根据窗口宽度达到某个点时，溢出的选项卡应该“落入”下拉菜单中，让用户可以选择从那里打开选项卡内容 div。

就我个人而言，我会使用形成两行的选项卡，但当有太多可用宽度的选项卡打开时，要求下拉到右侧，这与 Firefox 的功能非常相似。

非常感谢任何帮助或指示，因为这让我精神振奋！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-14T10:18:35.790

响应式布局可能是您正在寻找的：

[http://webdesign.tutsplus.com/tutorials/site-elements/a-flexible-approach-to-responsive-navigation/](http://webdesign.tutsplus.com/tutorials/site-elements/a-flexible-approach-to-responsive-navigation/)

# c++ - 请 C++ 线程和字符串帮助

> ID：12422465
> 
> 赞同：0
> 
> 时间：2012-09-14T10:12:36.027
> 
> 标签：c++, multithreading

我正在失去理智和 C++ 的新手我知道 C# 我知道它很简单

```
var cat = "cat";
dvar(0,0, "hi" +cat+ "hi"); 
```

我的问题是我正在开发一个游戏，需要将一个字符串放入函数调用中，如下所示：

```
string host = "HIST";
dvar(0,0, "s \"test" + host.c_str() + "connection\""); 
```

另外关于线程我要疯了，因为我的游戏一次只能调用一个函数，但我有一个函数是在 scree 指令上，它有一个恒定的 while 循环，所以它忙于处理那个循环线程让我激活任何其他功能通过按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:26:19.880

您应该在没有 的情况下调用该函数`c_str()`，以便使用非成员字符串连接函数。

```
dvar(0,0, ("s \"test" + host + "connection\"").c_str()); 
```

由于`host`是一种`std::string`类型，因此运算`+`符将导致为 调用非成员函数`operator+`。`std::string`

例如`host + "connection"`将导致调用以下函数，其中`"connection"`隐式转换为 a `std::string`：

```
std::string operator+(const std::string& lhs, std::string&& rhs); 
```

但是，如果您愿意`host.c_str() + "connection"`，编译器将寻找如下所示的函数：

```
??? operator+(const char* lhs, const char* rhs); 
```

标准库中不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:17:44.780

表达方式：

```
"s \"test" + host.c_str() + "connection\" 
```

将尝试添加指向`char`. 这行不通。您可能正在寻找字符串类？

```
std::string host = "bar";
// this is quite inefficient
func("foo" + host + "baz");
// this is somewhat better
std::string x = "foo";
x.append(host);
x.append("baz");
func(x); 
```

# vim - Vim netrw 要求“按 ENTER 或键入命令继续”

> ID：12422468
> 
> 赞同：10
> 
> 时间：2012-09-14T10:12:52.583
> 
> 标签：vim, netrw

我注意到，当我开始新的一天并打开 vim，然后使用 :Exp，我得到“按 ENTER 或键入命令继续”提示。这通常在执行外部命令时显示。我不记得 :Exp 过去这样做过（？）。另外，提示只有在第一次使用netrw时才会显示？！

虽然微不足道，但我觉得这很烦人。有谁知道为什么 netrw 会这样做？我一直在我的 .vimrc 中删除各种东西，看看它们是否改变了任何东西，但我可能会在这里很长时间......

重现步骤：

*   打开 vim 或 gvim
*   :Exp（后跟回车）
*   出现提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-01T20:25:32.077

添加这一行`~/.vimrc`似乎为我解决了这个问题：

```
let g:netrw_silent = 1 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-14T11:44:43.137

的内容`v:scrollstart`可用于了解为什么会发生这种情况。

有一些选项可能与问题有关。从[vim 常见问题解答](http://vimhelp.appspot.com/vim_faq.txt.html#faq-36.6)：

```
 Vim will prompt you with the "hit enter to continue" prompt, if there are
  some messages on the screen for you to read and the screen is about to be
  redrawn.  You can add the 'T' flag to the 'shortmess' option to truncate
  all messages. This will help in avoiding the hit-enter prompt: 

      :set shortmess+=T

  You can also increase the command height by setting the 'cmdheight' option: 

      :set cmdheight=2

  For more information, read 

      hit-enter
      avoid-hit-enter
      'shortmess'
      'cmdheight' 
```

* * *

编辑：

来自`:h netrw-problems`：

```
P10\. I'm being pestered with "[something] is a directory" and
     "Press ENTER or type command to continue" prompts...

    The "[something] is a directory" prompt is issued by Vim,
    not by netrw, and there appears to be no way to work around
    it.  Coupled with the default cmdheight of 1, this message
    causes the "Press ENTER..." prompt.  So:  read |hit-enter|;
    I also suggest that you set your |'cmdheight'| to 2 (or more) in
    your <.vimrc> file. 
```

您还应该检查您是否使用了最新的插件版本，因为版本 71 上有一个与您的问题相关的错误修复：

```
v71:           * bugfix -- made some "set nomodifiable"s into
           :
           :
           * When ch=1, on the second and subsequent uses of
             browsing Netrw would issue a blank line to clear
             the echo'd messages.  This caused an annoying
             "Hit-Enter" prompt; now a blank line message
             is echo'd only if &ch>1. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-14T16:02:45.817

我通常只是`:e .`浏览当前目录。此外，要摆脱提示，您可以执行`:silent Exp`.

# sql - ANSI SQL PORTABILITY TO HADOOP HIVE 转换工具或宏

> ID：12422472
> 
> 赞同：0
> 
> 时间：2012-09-14T10:13:10.347
> 
> 标签：sql, hadoop, hive, ansi-sql, hiveql

我正在研究 hadoop hive 解决方案。我的要求是使用工具或 excel 宏将 ansi sql 查询转换为 hive 查询。是否存在任何工具/宏？如果是，它们是什么；如果不需要建议来实施它。这可能吗？我们在 Hive 中是否有用于 DML 的替代 sql 查询（如 insert、update ...）？优缺点都有什么？

任何建议都非常感谢....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T14:42:42.537

我不认为整个 ANSI sql 可以移植到 hive，因为它不支持与 equ-join 不同的连接。所以这样的SQL是不能移植的。
另一点 - 配置单元中没有更新 - 数据是只读的......
其余看起来与 ANSI SQL 非常相似，我建议尝试按原样运行查询。

# java - Google Guava Function 界面中的@Nullable 输入触发 FindBugs 警告

> ID：12422473
> 
> 赞同：35
> 
> 时间：2012-09-14T10:13:14.293
> 
> 标签：java, guava, findbugs

`com.google.common.base.Function`接口（来自Google [Guava](http://code.google.com/p/guava-libraries/wiki/Release13)）定义`apply`为：

`@Nullable T apply(@Nullable F input);`

该方法具有以下 javadoc 注释：

`@throws NullPointerException if {@code input} is null and this function does not accept null arguments`.

FindBugs 抱怨我的 Function 实现：

```
private static final class Example implements Function<MyBean, String> {
    @Override
    @Nullable
    public String apply(@Nullable MyBean input) {
        if (null == input) {
            throw new NullPointerException();
        }
        return input.field;
    }
} 
```

带有**高优先级**警告：

> NP_PARAMETER_MUST_BE_NONNULL_BUT_MARKED_AS_NULLABLE，优先级：高
> 
> 输入必须为非空，但被标记为可为空
> 
> 此参数始终以要求它为非空的方式使用，但该参数被显式注释为可空。参数的使用或注释的使用是错误的。

我的函数不支持`null`输入，如果是这种情况，则会引发异常。如果我理解正确，FindBugs 将此视为非空的要求。

对我来说，这看起来很矛盾：输入是@Nullable，但是当它为空时方法@throws NullPointerException。我错过了什么吗？

摆脱我能看到的警告的唯一方法是手动抑制。（显然，番石榴代码超出了我的控制范围）。

@Nullable 注解、FindBugs、Guava 还是我自己的用法谁错了？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-14T10:36:20.280

你的实现是错误的；）

基本上文档说（我会解释和强调）：

> `@throws NullPointerException`if`input`为 null 并且**具体的函数实现**不接受 null 参数

通过实现你的函数，你必须决定它是否接受空值。在第一种情况下：

```
private static final class Example implements Function<MyBean, String> {
    @Override
    @Nullable
    public String apply(@Nullable MyBean input) {
        return input == null ? null : input.field;
    }
} 
```

在第二种情况下：

```
private static final class Example implements Function<MyBean, String> {
    @Override
    @Nullable
    public String apply(MyBean input) {
        if (null == input) {
            throw new NullPointerException();
        }
        return input.field;
    }
} 
```

在这两个示例中，都允许返回 null。

**编辑：**

请注意，Guava 用于`@javax.annotation.ParametersAreNonnullByDefault`所有包，因此如果`@Nullable`存在则表示“暂停全局`@Nonnull`并在此处允许空值”，如果不存在则表示“此处禁止空值”。

也就是说，您可能希望`@Nonnull`在参数或包中使用注释`@ParametersAreNonnullByDefault`来告诉 FindBugs 函数的参数不能为空。

**编辑2：**

原来[这种情况是已知问题](http://code.google.com/p/guava-libraries/issues/detail?id=920)，请参阅评论 #3（来自 Guava 的首席开发人员 Kevin Bourrillion，关于他与 Findbugs 的负责人 Bill Pugh 的对话）：

> 我的参考是与比尔·普格的一系列面对面对话。他毫不含糊地断言，`@Nullable`这仅意味着某些子类型 *可能*接受 null。findbugs 为我们证明了这一点——我们的代码非常干净地通过了可空性检查（尽管我们应该再次检查，因为进行了这个特定的函数更改）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-04T10:45:13.393

标记参数`@Nonnull`解决了 findbugs 的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-28T09:39:54.843

似乎默认情况下，Google Guava 函数默认为 @Nullable - 当没有注释时，我收到 Findbugs 错误，指出“结果必须为非空，但被标记为可空”。以下列方式将@Nonnull 添加到函数声明有助于：

```
new Function<Object, Object>() {
            @Nonnull
            public Object apply(@Nonnull Object object) { 
```

现在 Findbugs 很高兴。谢谢大家

# javascript - ExtJS：在运行时向 Menu 实例添加新的 MenuItem

> ID：12422476
> 
> 赞同：6
> 
> 时间：2012-09-14T10:13:28.797
> 
> 标签：javascript, extjs, extjs4, extjs4.1

我需要在运行时添加一个新创建的 MenuItem；所以我的代码目前看起来像：

```
var myMenu = myCmp.query('mymenu')[0]; // retrieve my only Menu object
var menuItem = Ext.create('Ext.menu.Item', {
    itemId: 'myItemId', text: 'textGoesHere'
});
myMenu.add(menuItem); 
```

我正在使用该[`add`方法](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.menu.Menu-method-add)添加项目；但是在运行时菜单项没有任何反应。即使调试显示新项目实际上已添加到[`items`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.menu.Menu-cfg-items)Menu 实例的配置中。

但是，在运行时使用该[`remove`方法](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.menu.Menu-method-remove)确实有效。

**问题：**如何让新添加的MenuItem在运行时显示？我错过了什么？

**更新**：上面的代码有效；我有一个有缺陷的 switch 语句，导致另一个逻辑通过，删除了最后创建的 menuItem。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T11:06:40.203

**评论顶起来**

*OP写道*

> 好的，我跟踪问题；我有一个有缺陷的 switch 语句，导致另一个逻辑通过，删除了最后创建的 menuItem。我仍然会将您的答案标记为正确，因为它也可以正常工作（通过传递配置 obj）。

* * *

这个例子有效：

```
var menu = Ext.create('Ext.menu.Menu', {
   width: 100,
   height: 100,
   floating: false,  // usually you want this set to True (default)
   renderTo: Ext.getBody(),  // usually rendered by it's containing component
   items: [{
       text: 'icon item',
       iconCls: 'add16'
   },{
       text: 'text item'
   },{
       text: 'plain item',
       plain: true
   }]
});

menu.add({text:'test'}); 
```

我不太确定，但根据 API，当您查看[菜单时，Menu 将面板作为默认类型，但根据](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.menu.Menu)[menuitem API](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.menu.Item) ，它似乎是 menuitem
这可能有点令人困惑。

# javascript - 在 Rails 的一个视图页面中使用多个表单时出现冲突？

> ID：12422479
> 
> 赞同：2
> 
> 时间：2012-09-14T10:13:35.417
> 
> 标签：javascript, ruby-on-rails, ajax

我正在尝试提交一个隐藏表单，其中包含 per_page 和 current_page 详细信息作为对搜索结果进行分页的参数值，但同一视图页面也包含搜索表单。但是在通过在 AJAX 中使用 .submit() 方法对搜索结果进行分页来提交隐藏表单时，我在这两种表单之间遇到了冲突。谁能告诉我们在 Rails 的一个视图页面中使用 2 个表单时需要注意什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T10:18:56.720

不，您可以有 n 个表单，但它们不应该嵌套。

您的 html 应该如下所示

```
<form id="form_1">
</form>
<form id="form_2">
</form>

|
|
|

<form id="form_n">
</form> 
```

`form_1`并使用jquery的jquery使用方法提交[`.submit`](http://api.jquery.com/submit/)如下

```
$('#form_1').submit() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:21:12.700

删除表单的嵌套，如果需要，它将在另一个使用 iframe 用于内部

# oop - 设计模式建议：图形 -> 计算

> ID：12422486
> 
> 赞同：2
> 
> 时间：2012-09-14T10:14:05.427
> 
> 标签：oop, design-patterns, solid-principles, design-principles

我有一个域模型，保存在一个数据库中，它代表一个图。图由通过分支连接的节点（例如 NodeTypeA、NodeTypeB）组成。两个通用元素（节点和分支将具有属性）。图将被发送到计算引擎。要执行计算，必须像这样初始化引擎（简化伪代码）：

```
Engine Engine = new Engine() ;
Object ID1 = Engine.AddNodeTypeA(TypeA.Property1, TypeA.Property2, …, TypeA.Propertyn);
Object ID2 = Engine.AddNodeTypeB(TypeB.Property1, TypeB.Property2, …, TypeB.Propertyn);
Engine.AddBranch(ID1,ID2); 
```

最后计算如下：

```
Engine.DoSomeComputation(); 
```

我只是想知道，是否有任何相关的设计模式，这有助于使用良好的设计原则实现上述目标。我希望这是有道理的。任何反馈将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:11:38.487

引擎看起来像是在破坏 Open/Closed 主体，也可能是单一责任主体。如果 Engine 的目的是进行一些计算，那么它可能不应该知道如何从不同的节点类型创建 ID1 或 ID2，这将违反 SRP。名称 AddNodeTypeA 和 AddNodeTypeB 让我认为可能存在 C、D 等。这意味着任何新的 NodeType 都需要更改引擎类，这就是 OCP 似乎被破坏的地方。

适配器模式将解决这两个问题

```
class Engine
{
    public void AddBranch(Branch branch1, Branch branch2)
    {
        //do something
    }

    public void DoSomeComputation();
    {
        //do something
    }
}

interface BranchAdapter
{
    Branch GetBranch();
}

class NodeTypeABranchAdapter : BranchAdapter
{
    private readonly TypeA _typeA;
    public NodeTypeABranchCreator(TypeA typeA)
    {
        _typeA = typeA;
    }

    public Branch GetBranch()
    {
        //do processing to take _typeA and transform it into Branch
    }
}

class NodeTypeBBranchAdapter : BranchAdapter
{
    private readonly TypeB _typeB;
    public NodeTypeABranchCreator(TypeB typeB)
    {
        _typeB = typeB;
    }

    public Branch GetBranch()
    {
        //do processing to take _typeB and transform it into Branch
    }
} 
```

然后调用代码可以像这样工作

```
var engine = new Engine();
Branch id1 = new NodeTypeABranchAdapter(TypeA).GetBranch();
Branch id2 = new NodeTypeBBranchAdapter(TypeB).GetBranch();
engine.AddBranch(id1, id2);
engine.DoSomeComputation(); 
```

# javascript - 在提交之前检索表单提交内容

> ID：12422487
> 
> 赞同：2
> 
> 时间：2012-09-14T10:14:06.063
> 
> 标签：javascript, jquery, html

是否可以在提交表单之前计算表单提交 URL？

目前我正在这样做：

```
var form = $('#myForm');
var action = form.attr('action');
var params = {};
$("input", form).each(function (index, input) { params[input.name] = input.value; });
var result = action + '?' + $.param(params); 
```

但是有没有更好更简单的方法来做到这一点？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T10:18:31.637

你的意思是这样的：

```
var form = $('form');
var formAction = form.attr('action');
var result = formAction + '?' + form.serialize(); 
```

更多信息：[http ://api.jquery.com/serialize/](http://api.jquery.com/serialize/)

# c# - 在 IIS 服务器上运行 bat 文件

> ID：12422495
> 
> 赞同：1
> 
> 时间：2012-09-14T10:15:04.867
> 
> 标签：c#, asp.net, iis, batch-file

我正在尝试在具有 IIS 版本 6.1 SP1 的 Windows Server 2008 R2 64 位上运行 .bat 文件。在我的本地机器上一切顺利，但在服务器上什么都没有发生，除了一个被创建的进程（cms.exe *32）。

从我的搜索来看，主要问题是权限。我在几个地方读到 IIS 出于安全原因默认阻止访问批处理文件。我确实理解这个问题，但在我的情况下不会有安全问题，所以我想仍然运行我的文件。

* * *

我发现的解决方案是通过实施模拟来实现的，这意味着：

1.  更改 web.config -> 身份 impersonate="true"

2.  更改 IIS 站点身份验证 -> 启用 ASP.NET 模拟

3.  授予文件和文件夹的权限

4.  甚至尝试了步骤 1 的不同版本 -> identity impersonate="true" userName=**********

* * *

授予 IIS 用户权限：

1.  在 IIS Admin Service 上设置允许服务与桌面交互

* * *

要调用批处理，我在 C# 中使用以下代码：

```
private void StartPervasive(string npu) 
{

    try 
    {

        ProcessStartInfo startInfo = new ProcessStartInfo(ConfigurationManager.AppSettings.Get("PervasivePath"));

        //startInfo.UseShellExecute = true;
        //startInfo.WorkingDirectory = ConfigurationManager.AppSettings.Get("PervasiveWorkingPath");
        //startInfo.WindowStyle = ProcessWindowStyle.Normal;
        //startInfo.RedirectStandardInput = true;
        //startInfo.RedirectStandardError = true;
        //startInfo.RedirectStandardOutput = true;

        //startInfo.FileName = ConfigurationManager.AppSettings.Get("PervasivePath");

        startInfo.Arguments = npu;
        Process myProcess = Process.Start(startInfo);

        //StreamReader sr = File.OpenText(ConfigurationManager.AppSettings.Get("PervasivePath"));
        //StreamWriter sw = myProcess.StandardInput;

        //while (sr.Peek() != -1)
        //{
        //    string readed = sr.ReadLine();
        //    readed = readed.Replace("%1", npu);
        //    sw.WriteLine(readed + Environment.NewLine);
        //}

        //myProcess.WaitForExit();
        //myProcess.Close();

   } 
   catch (Exception ex) 
   {
     throw ex;
   }
} 
```

还应该注意的是，我尝试执行其他文件，包括 .exe 文件，但没有结果。

希望对所描述的步骤提供任何建议、帮助和或更正。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:03:07.550

这可能不是您想要的，但可能会有所帮助。我建议您在服务器上创建一个计划任务来运行 BAT 文件，您可以设置用户权限，然后在您希望运行它时进行计划。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T15:56:42.877

下面是另一个 Stackoverflow 文章的链接，该文章似乎对同一问题有非常详细的响应。

[IIS7 不启动我的 Exe 文件...](https://stackoverflow.com/a/8414869/964043)

# cuda - NPP功能不是完全优化了吗？

> ID：12422498
> 
> 赞同：9
> 
> 时间：2012-09-14T10:15:17.960
> 
> 标签：cuda, npp

我开发了一个简单的函数，用于使用 CUDA C++ 水平或垂直镜像图像。

后来我才知道 NVIDIA Performance Primitives Library 也提供了镜像功能。

只是为了比较，我将我的函数与 NPP 进行了计时。令人惊讶的是，我的功能表现出色（虽然差距很小，但仍然......）。

我通过使用 Windows 计时器和 CUDA 计时器多次确认了结果。

我的问题是：**NPP 功能不是针对 NVIDIA GPU 完全优化的**吗？

我正在使用 CUDA 5.0、GeForce GTX460M（Compute 2.1）和 Windows 8 进行开发。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-17T22:40:09.110

通过发布此答案，我冒着得不到选票的风险。:)

NVIDIA 不断努力改进我们所有的 CUDA 库。NPP 是一个特别大的库，需要维护 4000 多个函数。我们有一个现实的目标，即为库提供比 CPU 等效的有用加速，在我们所有的 GPU 和支持的操作系统上进行测试，并积极改进和维护。有问题的功能（镜像）是一个已知的性能问题，我们将在未来的版本中改进。[如果您需要优化特定功能，获得优先级的最佳方法是使用NVIDIA CUDA 注册开发人员](http://developer.nvidia.com/cuda/join-cuda-registered-developer-program)可用的错误提交表单提交 RFE 错误（增强请求）。

顺便说一句，我不认为任何库都可以“完全优化”。有了一个庞大的库来支持庞大且不断增长的硬件基础，优化它的工作永远不会完成！:)

我们鼓励人们继续尝试并超越 NVIDIA 库，因为总体而言，它推进了最先进的技术并有利于计算生态系统。

# maven - 在 POM 中自动将一个 Maven 插件替换为另一个

> ID：12422499
> 
> 赞同：0
> 
> 时间：2012-09-14T10:15:27.893
> 
> 标签：maven, replace, pom.xml

请问您知道是否可以在项目的 POM 文件中自动将一个 Maven 插件替换为另一个插件？

上下文是我正在尝试使用 Scala 编译器插件拦截 Scala 构建，为此我希望能够将 Scala 编译器插件指定为`scalac`命令行的参数（即不在 POM 文件中）。`addScalacArgs`这可以通过使用其标志使用最新版本的 Scala Maven 插件（称为 scala-maven-plugin） - 请参见此处： [http ://davidb.github.com/scala-maven-plugin/apidocs/scala_maven/ScalaMojoSupport .html](http://davidb.github.com/scala-maven-plugin/apidocs/scala_maven/ScalaMojoSupport.html)。但是，旧版本的插件（称为 maven-scala-plugin）是不可能的，我需要在所有各种 POM 文件中添加参数（在处理大型第三个 - 时，这不是一个有吸引力的提议 -党的项目）。

我的想法是，如果我可以在 POM 文件中自动将旧版本的插件替换为新版本，那么我可以使用`addScalacArgs`，一切都会顺利进行。我可能可以编写一些代码来执行此操作（显然手动执行它不会比通过并添加参数更好），但它似乎可能是受支持的 Maven 用例。

具体来说，我正在尝试替换此插件：

```
<plugin>
  <groupId>org.scala-tools</groupId>
  <artifactId>maven-scala-plugin</artifactId>
  ...
</plugin> 
```

有了这个：

```
<plugin>
  <groupId>net.alchim31.maven</groupId>
  <artifactId>scala-maven-plugin</artifactId>
  ...
</plugin> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:18:09.477

您可以在 pom.xml 中使用两个配置文件来执行此操作。一个默认激活，另一个不激活。然后，您可以轻松选择要使用的配置文件。

例如，这里有一篇同样精神的旧帖子：[How do I exclude a dependency in provided scope when running in Maven test scope?](https://stackoverflow.com/questions/12314397/how-do-i-exclude-a-dependency-in-provided-scope-when-running-in-maven-test-scope/12314578#12314578)

# javascript - canvas.toDataURL() 的有效参数

> ID：12422501
> 
> 赞同：2
> 
> 时间：2012-09-14T10:15:42.130
> 
> 标签：javascript, canvas, html5-canvas

今天，我在 Twitter 上看到了这篇关于从画布中获取 Webm 数据的文章：http: [//ericbidelman.tumblr.com/post/31486670538/creating-webm-video-from-getusermedia](http://ericbidelman.tumblr.com/post/31486670538/creating-webm-video-from-getusermedia)

他使用“image/webp”作为参数`canvas.toDataURL();`

我知道你可以通过`image/jpeg`，`image/png`但还有更多吗？

我试过搜索这个，但找不到列表

谢谢啊

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T10:18:18.033

检查[文件](https://developer.mozilla.org/en-US/docs/DOM/HTMLCanvasElement)。

Chrome 支持该`image/webp`类型。

# c# - 在 DataGrids 上设置 DataContext

> ID：12422505
> 
> 赞同：2
> 
> 时间：2012-09-14T10:16:21.220
> 
> 标签：c#, wpf, mvvm, resharper, datacontext

我用 WPF 和 MVVM 开发了一个应用程序。在其中我有一个带有 DataGrid 的窗口。它的 ViewModel 包含一些窗口属性和一个 DataGrid (an `ObservableCollection<DataGridItemViewModel>`) 属性。

在窗口 xaml 中，我以这种方式设置设计 DataContext：

```
<Window x:Class="XXX"

    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"

            mc:Ignorable="d"

            d:DataContext="{d:DesignInstance TheTypeOfTheWindowViewModelHere}"> 
```

然后我想以这种方式将设计 DataContext 设置到 DataGrid 上：

```
<DataGrid ItemsSource="{Binding Path=PropertyOfTheDataGrid}" d:DataContext="{d:DesignInstance DataGridItemViewModel}" > 
```

但后来我收到一条警告，告诉我在 DataGridItemViewModel 中找不到 PropertyOfTheDataGrid。

我以为我只设置了 ItemsSource 的 DataContext 但不是我不确定我做错了还是某种问题。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T10:24:40.890

我不太确定你在期待什么？根据您的命名标准，您有一个`DataGridItemViewModel`建议您希望将视图模型上下文应用于每个数据网格项？

通常，您会将一个视图模型应用于整个视图，然后在该视图模型上拥有一个属性，例如 an `ObservableCollection`，它是您网格的项目集合。然后你将设置`ItemsSource`你`DataGrid`的绑定到该集合属性。

```
ItemsSource="{Binding MyItems}" 
```

您通常不需要直接设置网格的数据上下文，它会使用视图的数据上下文（`Window`在本例中为 a）。

# javascript - 循环不同的数组javascript

> ID：12422511
> 
> 赞同：0
> 
> 时间：2012-09-14T10:16:33.763
> 
> 标签：javascript

您好，我正在尝试将新闻推文保存到三个不同的数组中，这些数组是动态创建的。

当我想从每个数组中获取文本并向 twitter 发出另一个请求时，我遇到了麻烦。

```
 news_tweets("reuters","1652541",3);
    function news_tweets(query, user_id,count) {
        news_array = [];
        $.getJSON("https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=false&user_id=" + user_id + "&count="+count+
        "&callback=?",
        function (data) {
      for (var i = 0; i < count; i++) {
          var user = data[i].user.name;
          var date = data[i].created_at;
          var profile_img = data[i].user.profile_image_url;
          var text = data[i].text;
          var url = (data[i].entities.urls.length > 0 ? data[i].entities.urls[0].url : '');
          news_array[i] = [{user:user,date:date,profile_img:profile_img,text:text,url:url}];
        }  
      for (var i = 0; i < news_array.length; i++) {
          for (var x=0; x<i.length; x++){
              console.log(news_array[i][x].user);
              }
            }
        });
    } 
```

它不会在 console.log 上显示任何内容。

谢谢您的帮助！！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:22:19.127

首先，确保您的长度`count`小于`data`数组的长度，否则可能会导致一些`undefined`值：

```
for (var i = 0; i < count && i < data.length; i++) … 
```

那么，为什么要在 中创建所有这些单元素数组`news_array`？只使用对象。

这将解决您的实际问题：您在这些内部数组上循环错误。正确的代码是

```
for (var i = 0; i < news_array.length; i++) {
    for (var x = 0; x < news_array[i].length; x++){
        console.log(news_array[i][x].user);
    }
} 
```

此外，您应该正确缩进您的代码。您周围有一些奇怪的大括号，它们不会使代码可读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:26:26.697

问题是在接近尾声`x<i.length`的循环中。是一个数字，所以它没有. 你可能的意思是。`for``i``length``x < news_array[i].length`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T10:32:34.777

您可以尝试以下方法：

*   使用该`push`方法在数组中附加元素/数据`new_array`

*   仅使用 1 个循环在控制台上`for`显示值`user`

所以你的代码将是这样的：

```
news_tweets("reuters","1652541",3);

function news_tweets(query, user_id,count) {
    news_array = [];
    $.getJSON("https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=false&user_id=" + user_id + "&count="+count+
    "&callback=?",
        function (data) {
          for (var i = 0; i < count; i++) {
              var user = data[i].user.name;
              var date = data[i].created_at;
              var profile_img = data[i].user.profile_image_url;
              var text = data[i].text;
              var url = (data[i].entities.urls.length > 0 ? data[i].entities.urls[0].url : '');

              // Pushing your elements in your array, 1 by 1
              news_array.push({user:user,date:date,profile_img:profile_img,text:text,url:url});
        }  

        // Here you only need 1 loop!
        for (var i = 0; i < news_array.length; i++) {
            console.log(news_array[i][x].user);
        }
    });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T11:22:45.797

第一件事是我会循环第一个直到 data.length 而不是 count 因为它是一个 api 并且它“可能”或“可能不”返回所有数据。所以循环到 data.length 将是万无一失的

你的问题是 i.length

```
for (var i = 0; i < news_array.length; i++) { 
    console.log(news_array[i].user);
} 
```

这应该有效。不知道为什么你必须遍历一个循环。

# android - 如何让 WebView 忽略 CSS

> ID：12422513
> 
> 赞同：0
> 
> 时间：2012-09-14T10:16:39.843
> 
> 标签：android, css, webview

我正在尝试在 Android Webview 中加载本地 HTML 页面。此页面包含一些使用 CSS 的布局。但我也注意到 Webview 有一个 setBackgroundColor() 方法，您可以在其中设置背景颜色。但是，当 CSS 文件还设置了背景颜色时，这不起作用。

当我设置自己的背景颜色时，有谁知道如何让 Android Webview 忽略这些 CSS 样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:19:50.427

您可以做的是使用 javascript 为您的页面添加样式：

```
webview.loadUrl("javascript:document.body.style.background = color;"); 
```

在加载 url 或 html 后调用它。

PS 我认为如果你忽略了 CSS，即使你设置了 setBackGroundColor()，你也会得到默认的白色背景

setBackGroundColor 是所有视图都有的方法，这是 WebView 拥有它的唯一原因。

# c# - 使用图像：参数无效

> ID：12422514
> 
> 赞同：7
> 
> 时间：2012-09-14T10:16:41.823
> 
> 标签：c#, asp.net, image, image-processing

这一切都始于[我在 Stackoverflow 上找到的一段非常有用的代码](https://stackoverflow.com/questions/4161873/reduce-image-size-c-sharp/4161930#4161930)。

然后，我决定进行自己的调整，并将图像调整大小添加到此方法中。但是，在解决了这个问题之后，我现在看到了以下信息：**"The parameter is not valid"**。

我还想强调，尽管出现错误，但图像已成功上传。但是，它们并未按预期进行优化。

* * *

**这是我的“上传按钮”中的代码部分：**

```
fuOne.SaveAs(Server.MapPath("~/imgFolder/temp/") + fuOne.FileName);

System.Drawing.Image imgUploaded = System.Drawing.Image.FromFile(Server.MapPath("~/imgFolder/temp/") + fuOne.FileName);

SaveJpeg(Server.MapPath("~/imgFolder/temp/") + fuOne.FileName, imgUploaded, 60, 300, 300); 
```

* * *

**这是我的 SaveJpeg 方法的完整代码：**

```
public static void SaveJpeg(string path, System.Drawing.Image imgUploaded, int quality, int maxWidth, int maxHeight)
    {
        if (quality < 0 || quality > 100)
            throw new ArgumentOutOfRangeException("quality must be between 0 and 100.");

        // resize the image
        int newWidth = imgUploaded.Width;
        int newHeight = imgUploaded.Height;
        double aspectRatio = (double)imgUploaded.Width / (double)imgUploaded.Height;

        if (aspectRatio <= 1 && imgUploaded.Width > maxWidth)
        {
            newWidth = maxWidth;
            newHeight = (int)Math.Round(newWidth / aspectRatio);
        }
        else if (aspectRatio > 1 && imgUploaded.Height > maxHeight)
        {
            newHeight = maxHeight;
            newWidth = (int)Math.Round(newHeight * aspectRatio);
        }

        Bitmap newImage = new Bitmap(imgUploaded, newWidth, newHeight);

        Graphics g = Graphics.FromImage(imgUploaded);
        g.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBilinear;
        g.DrawImage(imgUploaded, 0, 0, newImage.Width, newImage.Height);

        g.Dispose();
        imgUploaded.Dispose();

        // Lets start to change the image quality
        EncoderParameter qualityParam =
            new EncoderParameter(Encoder.Quality, quality);
        // Jpeg image codec 
        ImageCodecInfo jpegCodec = GetEncoderInfo("image/jpeg");

        EncoderParameters encoderParams = new EncoderParameters(1);
        encoderParams.Param[0] = qualityParam;

        System.Drawing.Image imgFinal = (System.Drawing.Image)newImage;
        newImage.Dispose();

        imgFinal.Save(path, jpegCodec, encoderParams);
        imgFinal.Dispose();
    }

    /// <summary> 
    /// Returns the image codec with the given mime type 
    /// </summary> 
    private static ImageCodecInfo GetEncoderInfo(string mimeType)
    {
        // Get image codecs for all image formats 
        ImageCodecInfo[] codecs = ImageCodecInfo.GetImageEncoders();

        // Find the correct image codec 
        for (int i = 0; i < codecs.Length; i++)
            if (codecs[i].MimeType == mimeType)
                return codecs[i];
        return null;
    } 
```

* * *

# 跟进

代码似乎有几个错误。一个在编码中，另一个在图像保存中。

Aristos 的跟进对于解决这个问题非常重要，因为它修复了我保存文件时的糟糕错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-14T11:22:28.547

我建议在保存图像时更正确的是

```
ImageCodecInfo myImageCodecInfo = FindJpegEncoder();

EncoderParameters encoderParameters = new EncoderParameters(1);
encoderParameters.Param[0] = new EncoderParameter(System.Drawing.Imaging.Encoder.Quality, cQuality);

imgFinal.Save(TheFileNameTosaveIt, myImageCodecInfo, encoderParameters); 
```

这是从系统中查找编码器的功能

```
internal static ImageCodecInfo FindJpegEncoder()
{
    // find jpeg encode text
    foreach (ImageCodecInfo info in ImageCodecInfo.GetImageEncoders())
    {
        if (info.FormatID.Equals(ImageFormat.Jpeg.Guid))
        {
            return info;
        }
    }

    Debug.Fail("Fail to find jPeg Encoder!");
    return null;
} 
```

并且`long cQuality = 65L`确定是long的，我认为实际上只认为必须改变，**函数调用上的int到long**。也最好使用`using(){}`需要 dispose() 的函数进行扭曲

## 跟进

您在尝试保存的 NewImage 上有一个错误，您没有从您之前制作的实际图形中得到它，这就是为什么没有任何改变。您的实际代码没有保存创建图像，而是创建了一个新图像，所以这段代码

```
System.Drawing.Image imgFinal = (System.Drawing.Image)newImage;
newImage.Dispose();

imgFinal.Save(path, jpegCodec, encoderParams);
imgFinal.Dispose(); 
```

一定是

```
newImage.Save(path, jpegCodec, encoderParams);
newImage.Dispose(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-26T20:32:07.193

就我而言，我`Dispose`之前不小心调用`Save`了导致相同的“参数无效”错误

希望这可以帮助！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-05-19T07:10:36.610

我可以通过指定 Quality 的数据类型来解决这个问题。它必须是“长”，因此这解决了我的问题。

```
[void][System.Reflection.Assembly]::LoadWithPartialName("System.Drawing")
$bmp = New-Object System.Drawing.Bitmap $imagePath

#Encoder parameter for image quality 
$myEncoder = [System.Drawing.Imaging.Encoder]::Quality
$encoderParams = New-Object System.Drawing.Imaging.EncoderParameters(1) 
$encoderParams.Param[0] = New-Object System.Drawing.Imaging.EncoderParameter($myEncoder, [long]$quality)

# get codec
$myImageCodecInfo = [System.Drawing.Imaging.ImageCodecInfo]::GetImageEncoders()|where {$_.MimeType -eq 'image/jpeg'}

#save to file
$bmp.Save($imageOutPut,$myImageCodecInfo, $($encoderParams)) 
```

没有“long”，错误是：

```
Exception calling "Save" with "3" argument(s): "Parameter is not valid."
At C:\Projects\Image_Comparison\ImageComparison.ps1:81 char:49
+     $bmp.Save($imageOutPut,$myImageCodecInfo, $($encoderParams))
+                                                 ~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : ArgumentException 
```

# linux - 获取递归包含在目录中的文件列表的最快方法是什么？

> ID：12422519
> 
> 赞同：6
> 
> 时间：2012-09-14T10:16:57.917
> 
> 标签：linux, filesystems, nfs

我有一个目录，其中包含分布在文件夹层次结构中的数百万个文件。该目录存储在一个大型远程 NFS 文件系统上。我想尽快检索这些文件的列表。

有可能比 走得更快`find . > list.txt`吗？影响速度的因素有哪些？我正在使用 python，但只要*速度快*，任何解决方案都可以使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-01-29T00:31:27.660

在 linux 上，这对我来说是最快的。像这样使用 (bash) globbing 和 printf：

```
printf "%s\n" directory/**/file
printf "%s\x00" directory/**/filename-with-special-characters | xargs -0 command 
```

似乎比

```
find directory -name file 
```

或者

```
ls -1R directory | grep file 
```

甚至，令人惊讶的是，

```
ls directory/**/file 
```

这是一个本地文件系统：x86_64 系统，SSD 上的 ext4 文件系统，在一个包含超过 600,000 个目录的目录结构中，其中包含多个文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:21:23.663

取决于你在输出中想要什么。我建议使用

```
ls -R | grep ":$" | sed -e 's/:$//' -e 's/^/   /' -e 's/-/|/' 
```

以递归方式获取当前目录中所有文件的完整路径。

# php - imap_mail_move 仅适用于没有 CP_UID

> ID：12422521
> 
> 赞同：2
> 
> 时间：2012-09-14T10:17:03.353
> 
> 标签：php, imap

**主要问题**

我一直在构建一个自定义 IMAP 类（在 XAMPP 上本地测试/使用），但是由于某种原因，当我想使用该函数`imap_mail_move`同时尝试使用`CP_UID`标志保留 UID 时，消息似乎没有移动什么-so-但是，删除标志它可以完美地工作。

我调用下面的函数：

```
return @imap_mail_move($this->stream, $messageNumber, $folder, CP_UID); 
```

IMAP 已成功连接（尽管总是`SECURITY PROBLEM: insecure server advertised AUTH=PLAIN (errflg=1)`在第 0 行出现错误，并且正确定义了消息编号和移动到文件夹。

删除`@`没有任何关于它为什么不起作用的线索，添加`or die('error!')`到末尾也是如此 - 它就像它起作用但什么都不做。

类中的 Destruct 函数存在以下内容（因此它关闭 IMAP 连接并进行清除）：

```
@imap_close($this->stream, CL_EXPUNGE); 
```

**更多 IMAP 问题**

我将所有电子邮件保存在 MySQL 数据库中，以便更快地处理、自定义处理、搜索等。但是，我注意到在 Outlook（等）中移动邮件时可能会出现一些问题。

更新消息的 UID 的最佳方法是什么 - 因为我将其存储在数据库中以便快速访问，但如果消息要移动，则可以更改。`message numbers/UID`或者在移动/删除/标记电子邮件时是否有更好的功能可以使用更独特的东西来获得？我最初认为 UID 没有改变（导致相信[http://www.php.net/manual/en/function.imap-uid.php](http://www.php.net/manual/en/function.imap-uid.php)），但似乎他们确实做到了。

另外，移动消息后是否可以获得新的UID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T23:41:36.107

CP_UID 仅表示 $messageNumber 包含 UID 而不是序列号。我相信，错误消息与移动电子邮件无关。它仅说明您的密码以纯文本形式发送的安全问题。

您不能保留旧的 UID。每个邮箱都有自己的 UID。UID 在邮箱之间不是唯一的（仅在同一个邮箱中）。我相信您也不能为自己分配 UID（肯定不是直接使用 PHP）。

其余的，我和你的情况一样。

我目前正在考虑使用[http://www.php.net/manual/en/function.imap-status.php](http://www.php.net/manual/en/function.imap-status.php)。使用此功能，您可以获得下一个计划的 UID。但是，如果两个人同时在同一个邮箱中移动一封电子邮件，则可能会产生问题。

每当有人从第三方客户端（如 Outlook）移动电子邮件时，我也不知道如何更新数据库。

# jquery - Drupal7 使用 jQuery 获取节点编辑表单中复选框的更改状态

> ID：12422522
> 
> 赞同：0
> 
> 时间：2012-09-14T10:17:04.877
> 
> 标签：jquery, drupal-7

我为 Drupal 7 编写了一个小模块来检查是否有人正在更改复选框的状态（字段类型为“布尔”，名称为“field_calculate”）。
编辑表单中呈现的 HTML 标记是：

```
<input type="checkbox" class="form-checkbox" value="1" name="field_calculate[und]" id="edit-field-calculate-und"> 
```

要在表单中加载 JavaScript/jQuery，我使用这个（工作）代码：

```
<?php function java_form_alter(&$form, $form_state, $form_id){
if($form_id == 'article_node_form'){
     $form['field_calculate']['#after_build'] = array('_load_my_javascript');
  }
}
function _load_my_javascript($element){
    drupal_add_js( drupal_get_path('module', 'java') . '/java.js');
    return($element);
} ?> 
```

在每个“article_node_form”上，都会加载脚本“java.js”。一切都好。脚本是

```
(function ($) {
alert("START");
    $('input#edit-field-calculate-und').change(function() {
       alert("KLICK");
    });            
})(jQuery); 
```

加载页面 /node/add/article 时会出现警报“START”（意味着：脚本已正确加载）。之后，页面的内容就会出现。

**单击/更改“计算”复选框时，没有任何反应。**
我**预计会**出现第二个警报“KLICK”。

怎么了？**如何为节点表单中的复选框触发更改事件？**

谢谢你的帮助！
托拜厄斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T07:16:06.630

以下脚本按预期工作：

```
jQuery(document).ready(function($) {

$('#edit-field-calculate-und').change(function() {
alert('Handler for .change() called.');
});

}); 
```

# ubuntu - 在 xampp for ubuntu 中安装 YII 框架

> ID：12422523
> 
> 赞同：1
> 
> 时间：2012-09-14T10:17:07.397
> 
> 标签：ubuntu, yii, installation, xampp

我对 YII 框架一无所知，只是开始研究 YII。我想在我的系统中安装 YII 框架。所以请让我如何安装。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T12:19:54.180

下载yii zip文件并解压。然后将解压后的文件夹复制到：

```
/var/www/htdocs/
(Default Location) 
```

然后运行以下命令：

```
/var/www/htdocs/Yii/framework/yiic webapp anyname 
```

完毕！！！打开浏览器并输入“localhost/anyname”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-06T06:19:05.687

从网站下载 YII 框架

解压下载文件夹

打开终端

**sudo su** （输入密码）

**cd 下载** ls（yii 文件将出现在该列表中）

**mv yii /var/www**（将该文件夹移动到 www 文件夹）

**cd /var/www**（通过 ls 检查文件是否存在）

创建示例项目

**mkdir 文件夹名称**

**光盘 /var/www**

**php yii/framework/yiic.php webapp /var/www/folder_name**

**在“/var/www/folder_name”下创建 Web 应用程序 [yes][no]**

输入是

终端中的文件夹权限

sudo chmod 777 -R /var/www/one(文件夹名)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-21T13:39:54.067

从网站下载 YII 框架

提取到 htdocs

从 htdocs 文件夹中出来

创建sampleproject文件夹并赋予777权限

在这里，我创建了测试作为示例项目

在终端中输入以下内容

**php yii/framework/yiic,php webapp /var/www/yii/test**

[这里是我的位置] 会询问是否创建项目，选择yes

并在浏览器中输入 localhost/yii/test

有关更多详细信息，请参阅以下链接

[http://dcageek.blogspot.com/2013/04/how-to-install-yii-framework-on-ubuntu.html](http://dcageek.blogspot.com/2013/04/how-to-install-yii-framework-on-ubuntu.html)

# asp.net-mvc - 我可以以编程方式获取 MVC 3 Razor 视图中的助手列表吗？

> ID：12422524
> 
> 赞同：0
> 
> 时间：2012-09-14T10:17:15.463
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

如标题所述。我有一个 MVC 3 Razor 视图，我想以编程方式实例化并获取它的 Html 助手列表。

有人对如何解决这个问题有什么好的建议吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T09:52:46.307

我可以通过执行自定义视图结果并从我的 html 帮助程序更新模型来实现这一点。

行动方法：

```
 public ActionResult GetListViewHelpers()
    {
        var model = new TestModel(); // has >>> public List<MyHelper> Helpers { get; set; }

        var testContext = new ControllerContext();
        testContext.Controller = new MyController();
        testContext.HttpContext = HttpContext;            
        testContext.RouteData.Values["controller"] = "MyController";
        testContext.RouteData.Values["action"] = "Index";

        var view = new TestViewResult();
        view.ViewData.Model = model;
        view.ViewName = "TestView";  // i want a list of the helpers from this view          
        view.ExecuteResult(testContext);

        return View(model); // model.Helpers contains a list of helpers within a required view
    } 
```

查看结果：

```
public class TestViewResult : ViewResult 
{
    public override void ExecuteResult(ControllerContext context)
    {
        if (context == null)            
            throw new ArgumentNullException("context");

        if (String.IsNullOrEmpty(ViewName))            
            ViewName = context.RouteData.GetRequiredString("action");

        ViewEngineResult result = null;

        if (View == null)
        {
            result = FindView(context);
            View = result.View;
        }

        var stream = new MemoryStream();
        var writer = new StreamWriter(stream);
        ViewContext viewContext = new ViewContext(context, View, ViewData, TempData, writer);

        using (stream)
        using (writer)
        {
            View.Render(viewContext, writer);
            writer.Flush();
        }

        if (result != null)            
            result.ViewEngine.ReleaseView(context, View);            
    }
} 
```

帮手：

```
 public static MvcHtmlString AHelper(this HtmlHelper helper, string name)
    {
        var model = (TestModel)helper.ViewData.Model;

        if(model.Helpers == null)
            model.Helpers = new List<MyHelper>();

        model.Helpers.Add(new MyHelper()
        {
            Name = name // add all the info i want from the helpers overloads
        });

        // .... helper logic here

        return null;
    } 
```

# android - Des序列化android中的文件

> ID：12422534
> 
> 赞同：0
> 
> 时间：2012-09-14T10:17:43.003
> 
> 标签：android, serialization

我有一个相当罕见的问题。

我有一个 fext 文件来解析和生成模型 android 数据（有三个类）并序列化为文件。这是在我拥有的 android 应用程序项目中完成的。

我自己从我的移动应用程序中正确反序列化了文件。

而是尝试在具有相同 apk 文件的另一部手机中执行此操作，但它会失败。

知道这背后的原因是什么？？？

问候和任何对我有用的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:39:55.017

我终于找到了失败的原因。

使用多线程序列化日历时这是一个 java 错误

现在我使用变量类型“long”“Calendar.getTimeInMillis”来保持时间

祝你好运

由克莱文

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T14:01:32.173

这是读取文件序列化的异常...

```
java.io.InvalidClassException: java.lang.ClassNotFoundException: libcore.util.ZoneInfo 
```

在类中序列化一个成员是“日历”类型

```
 import java.util.Calendar;
  Calendar date 
```

# php - cakephp 中的浏览对话框

> ID：12422537
> 
> 赞同：0
> 
> 时间：2012-09-14T10:17:55.207
> 
> 标签：php, cakephp

嗨，我一直在网上搜索有关此的信息，但似乎找不到任何重要的信息，但也许只是因为它是星期五:) 但无论如何：

我有一个项目，它从服务器接收文本文件并读取它们，但目前我只有一个下拉菜单，其中包含特定文件夹中的文件列表，但我想知道有什么办法可以打开某种浏览允许我浏览服务器上的文件夹的对话框？

任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:29:53.167

只有您自己使用 HTML 和 CSS 制作的东西。当您选择可以看到服务器内容的本地文件时，无法打开类似文件打开的对话框，因为客户端无法看到服务器的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T11:44:17.437

你可以尝试这样[的事情](http://neilang.com/entries/php-explore-your-server-through-a-php-file-browse/)并将其全部放在 jQuery [Dialog中](http://docs.jquery.com/UI/Dialog)

# android - 如何使用来自 android 的 MultipartEntity 将多个图像发送到服务器

> ID：12422541
> 
> 赞同：7
> 
> 时间：2012-09-14T10:18:12.560
> 
> 标签：android

我正在使用以下代码将图像和文本发送到 PHP 网络服务。

```
try {       
    HttpClient httpClient = new DefaultHttpClient();
    HttpContext localContext = new BasicHttpContext();
    HttpPost httpPost = new HttpPost(URL);

    MultipartEntity entity = new MultipartEntity(
            HttpMultipartMode.BROWSER_COMPATIBLE);

    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    bitmap.compress(CompressFormat.JPEG, 75, bos);
    byte[] data = bos.toByteArray();

    entity.addPart("files[]",
            new ByteArrayBody(data, "myImage.jpg"));

    entity.addPart("message0", new StringBody(caption.getText()
            .toString()));

    httpPost.setEntity(entity);
    HttpResponse response = httpClient.execute(httpPost,
            localContext);
    BufferedReader reader = new BufferedReader(
            new InputStreamReader(
                    response.getEntity().getContent(), "UTF-8"));

    String sResponse = reader.readLine();
    return sResponse;
} catch (Exception e) {
    if (dialog.isShowing())
        dialog.dismiss();
    Toast.makeText(ImageUpload.this, e.getMessage(),
            Toast.LENGTH_LONG).show();
    Log.e(e.getClass().getName(), e.getMessage(), e);
    return null;
}
    } 
```

它完美地工作。但这仅适用于一张图像。我想发送 5 张图片。

示例：`Image1 - Text1` `Image2 - Text2`等等。

因此，我对如何一张一张地存储 5 张图像然后单击按钮将这些图像和与它们关联的文本发送到服务器感到困惑。

我正在从手机的相机中获取图像。

```
Intent intent = new Intent();
            intent.setType("image/*");
            intent.setAction(Intent.ACTION_GET_CONTENT);
            startActivityForResult(
                    Intent.createChooser(intent, "Select Picture"),
                    PICK_IMAGE);

public void onActivityResult_photo(int requestCode, int resultCode,
        Intent data) {
    // TODO Auto-generated method stub
    if (resultCode == RESULT_OK) {

        if (data != null) {
            mImageCaptureUri = data.getData();
            display(mImageCaptureUri);
        } else {
            Toast.makeText(CustomTabActivity.mTabHost.getContext(),
                    "No photo selected..", Toast.LENGTH_SHORT).show();
        }

    }

}

private String display(Uri mImageCaptureUri2) {
    // TODO Auto-generated method stub
    String base64string = null;
    try {

        if (mImageCaptureUri2 != null) {

            System.gc();

            selectedImagePath = getPath(mImageCaptureUri2);

            File filenew = new File(selectedImagePath);
            int file_size = Integer.parseInt(String.valueOf(filenew
                    .length() / 1024));
            if (file_size <= 10000) {
                PD1 = ProgressDialog.show(
                        CustomTabActivity.mTabHost.getContext(), "",
                        "Loading...");
                Handler refresh = new Handler(Looper.getMainLooper());

                refresh.post(new Runnable() {
                    public void run() {

                        PD1.setCancelable(true);
                        Bitmap newbitmap;
                        newbitmap = decodeFile(selectedImagePath);
                        ByteArrayOutputStream bs = new ByteArrayOutputStream();
                        newbitmap.compress(Bitmap.CompressFormat.PNG, 50,
                                bs);
                        img.setVisibility(View.VISIBLE);
                        img.setImageBitmap(newbitmap);
                        byte[] abc = bitmapToByteArray(newbitmap);
                        if (txt_phototext.getText().toString().equals("")) {
                            submit.put(abc, "");
                        } else {
                            submit.put(abc, txt_phototext.getText()
                                    .toString());

                            // executeMultipartPost();
                        }
                        PD1.dismiss();

                    }
                });

            } else {
                AlertDialog.Builder alertbox = new AlertDialog.Builder(
                        CustomTabActivity.mTabHost.getContext());
                alertbox.setMessage("Take Image Size Less than 10 MB");
                alertbox.setNeutralButton("Ok",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface arg0,
                                    int arg1) {
                                finish();
                            }
                        });
                alertbox.show();
            }

        } else {
            System.out.println("===============NULL========");
        }

    } catch (Exception e) {
        // // TODO Auto-generated catch block
        // e.printStackTrace();
    }
    return base64string;
}

    static Bitmap decodeFile(String str) {
    try {
        // decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(str), null, o);

        // Find the correct scale value. It should be the power of 2.
        final int REQUIRED_SIZE = 70;
        int width_tmp = o.outWidth, height_tmp = o.outHeight;
        int scale = 1;
        while (true) {
            if (width_tmp / 2 < REQUIRED_SIZE
                    || height_tmp / 2 < REQUIRED_SIZE)
                break;
            width_tmp /= 2;
            height_tmp /= 2;
            scale++;
        }

        // decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize = scale;
        return BitmapFactory.decodeStream(new FileInputStream(str), null,
                o2);
    } catch (FileNotFoundException e) {
    }
    return null;
}

public static byte[] bitmapToByteArray(Bitmap bitmap) {
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    bitmap.compress(CompressFormat.PNG, 0 /* ignored for PNG */, bos);
    byte[] bitmapdata = bos.toByteArray();
    return bitmapdata;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-28T06:28:46.800

尝试`post_max_size`在 WAMP 服务器中增加 php.ini 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-15T07:21:39.040

**有关详细信息，请查看我的帖子** [点击这里](http://smartandrodev.co.in/?p=63#more-63)

**使用 MultipartEntity 将多个图像发送到服务器非常困难。我确实搜索了这个但没有找到任何正确的解决方案然后我用自己的方式将多个图像发送到服务器** *，在这里我将选定路径的数组发送到 asynctask 并在 asynctask 中我将图像发送到服务器*

**调用 Asysnctask 函数** - new Upload_Multiple.excute(Array_of_Path[]))

```
 Private class Upload_Multiple_img extends AsyncTask<String, Void, String> {

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();

    }

    protected String doInBackground(String... paths_array) {

        String data = "";

        for (int i = 0; i < paths_array.length; i++) {

            //  get_Picture_bitmap() returns bitmap by passing path of image 
             //   get_Picture_bitmap() is mentioned below. 
            Bitmap bitmap = get_Picture_bitmap(paths_array[i]);

            ByteArrayOutputStream stream = new ByteArrayOutputStream();

            bitmap.compress(Bitmap.CompressFormat.PNG, 100, stream);
            InputStream in = new ByteArrayInputStream(stream.toByteArray()); // convert

            DefaultHttpClient httpclient = new DefaultHttpClient();

            String server_funtion_url="...serveraddres"+funtion_at_server"";
            HttpPost httppost = new HttpPost(server_funtion_url); // server

            MultipartEntity reqEntity = new MultipartEntity();

            obj_SP = ImagePicker.this.getSharedPreferences("Eperty", 0);

            String id_prop = obj_SP.getString("new_prop_id", "");

            String Image_Name =
                    + String.valueOf(System.currentTimeMillis()) + ".jpg";
// image is a key which is used at server end to get this 
            reqEntity.addPart("image", Image_Name, in);

            httppost.setEntity(reqEntity);

            HttpResponse response = null;
            try {
                response = httpclient.execute(httppost);
                data = EntityUtils.toString(response.getEntity());
                System.out.println("FFFF== " + data);

            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (ParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();

            }

        }

        return data;
    }

    @Override
    protected void onProgressUpdate(Void... values) {

        super.onProgressUpdate(values);
    }

    @Override
    protected void onPostExecute(String result) {

        ConstantData.ToastAlert(ImagePicker.this,
                "Images Uploaded successfully");

    }
} 
```

//);

*   用于压缩图像并为我在下面的功能中获取位图*

    ```
    public Bitmap get_Picture_bitmap(String imagePath) {

    long size_file = getFileSize(new File(imagePath));

    size_file = (size_file) / 1000;// in Kb now
    int ample_size = 1;

    if (size_file <= 250) {

        System.out.println("SSSSS1111= " + size_file);
        ample_size = 2;

    } else if (size_file > 251 && size_file < 1500) {

        System.out.println("SSSSS2222= " + size_file);
        ample_size = 4;

    } else if (size_file >= 1500 && size_file < 3000) {

        System.out.println("SSSSS3333= " + size_file);
        ample_size = 8;

    } else if (size_file >= 3000 && size_file <= 4500) {

        System.out.println("SSSSS4444= " + size_file);
        ample_size = 12;

    } else if (size_file >= 4500) {

        System.out.println("SSSSS4444= " + size_file);
        ample_size = 16;
    }

    Bitmap bitmap = null;

    BitmapFactory.Options bitoption = new BitmapFactory.Options();
    bitoption.inSampleSize = ample_size;

    Bitmap bitmapPhoto = BitmapFactory.decodeFile(imagePath, bitoption);

    ExifInterface exif = null;
    try {
        exif = new ExifInterface(imagePath);
    } catch (IOException e) {
        // Auto-generated catch block
        e.printStackTrace();
    }
    int orientation = exif
            .getAttributeInt(ExifInterface.TAG_ORIENTATION, 1);
    Matrix matrix = new Matrix();

    if ((orientation == 3)) {
        matrix.postRotate(180);
        bitmap = Bitmap.createBitmap(bitmapPhoto, 0, 0,
                bitmapPhoto.getWidth(), bitmapPhoto.getHeight(), matrix,
                true);

    } else if (orientation == 6) {
        matrix.postRotate(90);
        bitmap = Bitmap.createBitmap(bitmapPhoto, 0, 0,
                bitmapPhoto.getWidth(), bitmapPhoto.getHeight(), matrix,
                true);

    } else if (orientation == 8) {
        matrix.postRotate(270);
        bitmap = Bitmap.createBitmap(bitmapPhoto, 0, 0,
                bitmapPhoto.getWidth(), bitmapPhoto.getHeight(), matrix,
                true);

    } else {
        matrix.postRotate(0);
        bitmap = Bitmap.createBitmap(bitmapPhoto, 0, 0,
                bitmapPhoto.getWidth(), bitmapPhoto.getHeight(), matrix,
                true);

    }

    return bitmap; 
    ```

    } **

*   服务器端代码 *

    ```
    $target_dir = "../webadmin/user_image/";
    $target_dir = $target_dir . basename($_FILES["user_img"]["name"]);
    if(move_uploaded_file($_FILES["image"]["tmp_name"], $target_dir))
      {
         $msg = "The file ". basename($result[0]). " has been uploaded.";
         $send_arr['success'] = 1;
         $send_arr['message'] = $msg;
         echo json_encode($send_arr);
      }
    else 
      {
         $msg = "Sorry, there was an error uploading your file.";
         $send_arr['success'] = 0;
         $send_arr['message'] = $msg;
         echo json_encode($send_arr);
      } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-25T08:34:23.167

并确保您在服务器中的目录或文件夹是可执行、可写和可读的。我认为这是主要问题。这被称为 777 许可。相信我，这与其他要考虑的事情一样重要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-15T03:56:05.623

为什么您不能仅将图像的 json 对象数组创建到 base64 并发布到服务器，然后在您的服务器 api 读取这些图像转换为字节并用作图像。检查我的答案并尝试实施。 [在 Android 中，如何将数据发布到在 WCF 中创建的 web 服务？](https://stackoverflow.com/questions/37205693/in-android-how-to-post-data-to-webservice-which-is-created-in-wcf/37206061#37206061)

您从相机获得的图像将它们存储在 uri 中的 sdcard 中，然后用字母读取它们。您可以按顺序分配图像名称。并从 uri 中读取它们。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-10-28T06:45:25.633

请找到以下方法...这里我使用 AQUERY 发送多个图像文件。执行所有后台网络相关任务的最佳库。（如 AJAX）。

[https://code.google.com/p/android-query/](https://code.google.com/p/android-query/)

```
 public void uploadImageFile( String filePath,
            String message) {

        Context context = ApplicationContextProvider.getContext();
        String url = SERVER_URL + "/user/uploadImageFile";

            try {
                Toast.makeText(context, "Uploading...", Toast.LENGTH_SHORT)
                        .show();

                String compressedFile = CommonUtilities.compressImage(filePath,
                        context);

                Map<String, Object> params = new HashMap<String, Object>();

                File imageFile = new File(compressedFile);
                byte[] imageBytes1 = FileUtils.readFileToByteArray(imageFile);
                params.put("imageBytes", imageBytes1);
                params.put("message",URLEncoder.encode(message, "UTF-8"));

                AQuery aq = new AQuery(context);
                aq.ajax(url, params, JSONObject.class,
                        new AjaxCallback<JSONObject>() {
                            @Override
                            public void callback(String url, JSONObject json,
                                    AjaxStatus status) {
                                Toast.makeText(
                                        ApplicationContextProvider.getContext(),
                                        "Uploaded successfully",
                                        Toast.LENGTH_SHORT).show();

                            }
                        });
            } catch (Exception e) {
                e.printStackTrace();
                Toast.makeText(context, e.getMessage(), Toast.LENGTH_SHORT)
                        .show();
            }

    } 
```

# xml - XSLT 在多个子节点上排序，每个父节点

> ID：12422542
> 
> 赞同：2
> 
> 时间：2012-09-14T10:18:16.810
> 
> 标签：xml, xslt, sorting, xpath

我有以下 XML：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<entries>
    <entry>
        <title>Entry 1</title>
                <prices>
                <price>10</price>
                <price>50</price>
                </prices>
    </entry>
    <entry>
        <title>Entry 2</title>
                <prices>
                <price>200</price>
                <price>300</price>
                </prices>
    </entry>
    <entry>
        <title>Entry 3</title>
                <prices>
                <price>70</price>
                <price>500</price>
                </prices>
    </entry>
</entries> 
```

每个元素都有多个价格标签，我想选择每个元素的 MAX 价格并将其用于与其余元素进行比较。

我的 xslt 是：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/">
  <html>
  <body>
    <table border="1">
      <tr>
        <th>Title</th>
        <th>Highest Price</th>
      </tr>
      <xsl:for-each select="entries/entry">
      <xsl:sort select="prices/price" order="descending" data-type="number"/>
      <tr>
        <td><xsl:value-of select="title"/></td>
        <td><xsl:value-of select="prices/price"/></td>
      </tr>
      </xsl:for-each>
    </table>
  </body>
  </html>
</xsl:template>

</xsl:stylesheet> 
```

它不起作用。它产生：

```
Title   Highest Price
Entry 2 200
Entry 3 70
Entry 1 10 
```

虽然它应该产生：

```
Title   Highest Price
Entry 3 500
Entry 2 300
Entry 1 50 
```

请给我提意见。我必须使用 XSLT1，所以我真的不能这样做：

```
<xsl:sort select="max(prices/price)" order="descending" data-type="number"/> 
```

...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T11:44:47.307

我不确定这是否是一种特别优雅的方式，但您可以迭代**价格**元素而不是**入口**元素

```
<xsl:for-each select="entries/entry/prices/price">
  <xsl:sort select="." order="descending" data-type="number"/> 
```

然后，您需要一个**xsl:if**条件来检查每个**价格**元素是否没有更高的价格元素

```
<xsl:if test="not(../price > current())"> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:template match="/">
      <html>
         <body>
            <table border="1">
               <tr>
                  <th>Title</th>
                  <th>Highest Price</th>
               </tr>
               <xsl:for-each select="entries/entry/prices/price">
                  <xsl:sort select="." order="descending" data-type="number"/>
                  <xsl:if test="not(../price > current())">
                     <tr>
                        <td>
                           <xsl:value-of select="../../title"/>
                        </td>
                        <td>
                           <xsl:value-of select="."/>
                        </td>
                     </tr>
                  </xsl:if>
               </xsl:for-each>
            </table>
         </body>
      </html>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML 时，以下是输出

```
<html>
<body>
<table border="1">
<tr>
<th>Title</th>
<th>Highest Price</th>
</tr>
<tr>
<td>Entry 3</td>
<td>500</td>
</tr>
<tr>
<td>Entry 2</td>
<td>300</td>
</tr>
<tr>
<td>Entry 1</td>
<td>50</td>
</tr>
</table>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T12:29:38.197

See my answer to **[this question](https://stackoverflow.com/a/12292505/36305)**.

"Minimum" is used there, but otherwise the solution is essentially what is needed.

# android - Google play 显示某些设备不兼容

> ID：12422546
> 
> 赞同：0
> 
> 时间：2012-09-14T10:18:33.007
> 
> 标签：android, android-manifest, google-play, android-market-filtering

以下是我的应用程序正在使用的功能：

```
Screen layouts: SMALL NORMAL LARGE XLARGE

android.hardware.location
android.hardware.screen.portrait
android.hardware.telephony
android.hardware.touchscreen 
```

但是 google play 显示 Galaxy tab2 和其他一些标签不兼容。谁能告诉我可能是什么原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T10:28:19.907

您要求该`android.hardware.telephony`功能，这意味着该设备必须能够通过蜂窝网络拨打电话。由于 Nexus 7 和 Galaxy Tab 2 都是平板电脑，它们没有此功能。

如果这不是您的应用程序的明确要求，请`<uses-feature>`按如下方式制作您的标签：

```
<uses-feature android:name="android.hardware.telephony" android:required="false" /> 
```

# c# - 从 Observable Collection 或 List() 中获取项目

> ID：12422547
> 
> 赞同：0
> 
> 时间：2012-09-14T10:18:32.567
> 
> 标签：c#, wpf, xaml, data-binding, microsoft-metro

我有一个名为 NotesList 的 ListBox。我有一个名为 noteList 的 ObservableCollection，还有一个名为 NoteContents 的 TextBox。

在我的 ObservableCollection 中，我为一些项目设置了 Filename 和 Contents 属性，然后将其添加（绑定）到我的 ListBox。

但是现在，我想（当我单击一个按钮时）显示在 NoteContents 文本框中选择的 ListBox 项的“内容”。

我怎样才能做到这一点？

我目前有：

```
private void NotesList_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    NoteContents.Text = noteList.Where(x => x.Filename.Contains(NotesList.SelectedValue.ToString())).FirstOrDefault().Contents;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T10:29:56.380

您无需单击按钮即可执行此操作，只需绑定如下：

```
<ListBox Name="NotesList" ItemsSource="{Binding YourObservableCollection}">
    <!--Your bindings here-->
</ListBox>
<TextBox Text="{Binding ElementName=NotesList, Path=SelectedItem.Contents}" /> 
```

# mod-rewrite - mod_rewrite 与 RewriteCond 目标不匹配 - 找不到 URL

> ID：12422551
> 
> 赞同：0
> 
> 时间：2012-09-14T10:18:45.973
> 
> 标签：mod-rewrite, apache, httpd.conf

我正在尝试使用 apaches mod_rewrite 模块将目录 /docs 中的所有 URI 重写为 /docs/index.php。

URI 不作为目录结构存在，当您将 URI 重写为退出的内容时，我认为没有必要这样做。

我收到错误消息：

> “在此服务器上找不到请求的 URL /docs/view/my_doc。”

这些是我的重写规则：

```
 RewriteEngine On
   RewriteCond %{REQUEST_URI} ^docs/([a-z]+)/([A-Za-z0-9_-]+)/?$
   RewriteRule ^(.*)$ http://%{HTTP_HOST}/docs/index.php?action=$1&target=$2 [QSA,L] 
```

我正在 httpd.conf 中进行配置。另外，我正在使用多 v-host 设置。

我的问题是什么，我该如何解决？

我在 CentOS 6.2 上使用 Apache/httpd

* * *

**更新**

包括我的虚拟主机：

```
NameVirtualHost *:80

<VirtualHost *:80>
    ServerName www.smicloud.org
    ServerAlias *.smicloud.org
    VirtualDocumentRoot /var/www/html/www.smicloud.org
    ExpiresActive On
    ExpiresDefault "access plus 14 days"
    # insert logging config, anything else you need..
    #Define FileEtag so it doesnt use node
    FileETag MTime Size
    <Directory /var/www/html/>
        Order Allow,Deny
        Allow from all
        # Get rid of this if you need to allow htaccess files:
        AllowOverride None
    </Directory>
        RewriteEngine On        
        RewriteRule ^docs/([a-z]+)/([A-Za-z0-9_-]+)/$ /docs/index.php?action=$1&target=$2 [QSA,L]
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:28:41.237

这应该工作

```
RewriteEngine On
RewriteRule ^docs/([a-z]+)/([A-Za-z0-9_-]+)/$ /docs/index.php?action=$1&target=$2 [QSA,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T12:24:44.263

好的，为了修复它，我必须做几件事，使用@donalds 建议（我之前实际上尝试过）：

1 - 我必须有一个“？” 在 RewriteRule 的正则表达式的末尾：

> ^/docs/([az]+)/([A-Za-z0-9_-]+)/?$

然后我可以选择地址末尾是否有'/'。

2 - 我必须在我的 RewriteRule 的正则表达式的开头添加一个“/”。IE：

> ^/docs/([az]+)/([A-Za-z0-9_-]+)$

3 - 我还必须将 'http://%{HTTP_HOST}/' 部分添加到新的 URI：

> `http://`%{HTTP_HOST}/docs/index.php?action=$1&target=$2 [QSA,L]

这就是我最终的结果：

> RewriteRule ^/docs/([az]+)/([A-Za-z0-9_-]+)$ `http://`%{HTTP_HOST}/docs/index.php?action=$1&target=$2 [QSA,L]

也许为什么我需要添加 %{HTTP:HOST} 是因为它是一个多虚拟主机设置。

# node.js - nodejs 纤维对我不起作用

> ID：12422552
> 
> 赞同：0
> 
> 时间：2012-09-14T10:18:47.910
> 
> 标签：node.js, node-fibers

`result`填充在函数`exec`中，但它永远不会回到主线程......我做错了什么？

```
 var Fiber, exec, execSync;

  exec = require("child_process").exec;

  Fiber = require('fibers');

  execSync = function(cmd) {
    var cmdExec, final;
    cmdExec = function(cmd) {
      var fiber,
        _this = this;
      fiber = Fiber.current;
      exec(cmd, function(se, so, e) {
        var result;
        fiber.run();
        result = se + so + e;
        return result;
      });
      return Fiber["yield"]();
    };
    final = '';
    Fiber(function() {
      return cmdExec(cmd);
    }).run();
    return final;
  };

  console.log(execSync('ls ..')); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T00:57:25.950

该代码存在一些问题..这里有一些代码可以满足您的要求：

```
var Fiber, exec, execSync;

exec = require("child_process").exec;

Fiber = require('fibers');

execSync = function(cmd) {
  var fiber = Fiber.current;
  exec(cmd, function(err, so, se) { 
    if (err) fiber.throwInto(err);
    fiber.run(se + so);
  });
  return Fiber.yield();
};

Fiber(function() {
  console.log(execSync('ls ..'));
}).run(); 
```

最大的问题是您似乎混淆了 和 的`run`角色`yield`。基本上`yield`暂停 Fiber`run`并将恢复（或第一次启动它）。您应该做的是运行任何需要`execSync`在 Fiber 内部调用的代码，然后`execSync`获取对当前 Fiber 的引用，然后调用`Fiber.yield()`. 当`exec`呼叫返回时，光纤将恢复为`fiber.run()`。

另一个较小的问题是`exec`. 参数是`err, stdout, stderr`。

# android - 如何将二维数组作为参数传递给另一个活动？

> ID：12422557
> 
> 赞同：0
> 
> 时间：2012-09-14T10:19:20.110
> 
> 标签：android

如何将二维数组作为参数传递给另一个活动？我尝试将它堆叠在流解决方案上，但在活动 1 中使用此代码不起作用我在此行中正确显示值 bundle.putSerializable("xmlResponee", xmlRespone); 但是在activity2类中没有显示值有什么问题？请告诉我

```
public class Activity1 extends Activity {

  private String[][] xmlRespone;
  Intent i = new Intent(this.getApplicationContext(), Activity2.class);
  Bundle bundle = new Bundle();
  bundle.putSerializable("xmlResponee", xmlRespone);
  i.putExtras(bundle);
  startActivity(i); 
```

和

```
public class Activity2 extends Activity {

   private String[][] xmlRespone;
   public void onCreate(Bundle savedInstanceState) {                
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity2);
      Bundle bundle = getIntent().getExtras();

      String[][] xmlRespone2 = (String[][]) bundle.getSerializable("xmlResponee"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:28:28.060

你可以直接把它放在intent上，不需要捆绑。

```
Intent intent = new Intent();
intent.putExtra("MyXML", xmlRespone); 
```

并阅读：

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        Intent intent = getIntent();
        String[] xmlRespone = intent.getStringArrayExtra("MyXML");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:04:22.363

嘿，只是使用`Parcelable`对象在 android 活动之间传递对象。

这是一个非常棒的[例子](http://blog.cluepusher.dk/2009/10/28/writing-parcelable-classes-for-android/)。我想这与您想要实现的目标相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T10:33:18.320

您可以使用私有 String[][] xmlRespone 创建一个静态类。在第一个活动中，您可以为其赋值，在另一个活动中，您可以从中调用数据..

活动 A ---> 静态类 X ---> 活动 B。

# android - 执行在 ICS 中不起作用的 shell 命令？

> ID：12422560
> 
> 赞同：0
> 
> 时间：2012-09-14T10:19:33.553
> 
> 标签：android, shell-exec, samsung-mobile

我正在尝试使用这样的 shell 命令从三星 Galaxy Tab 2 中的触摸向导启动器中删除迷你应用程序托盘。

```
 Runtime runtime = Runtime.getRuntime();
        Process proc = null;
        OutputStreamWriter osw = null;
        proc = runtime.exec("su");
        osw = new OutputStreamWriter(proc.getOutputStream());
        String cmd="mount -o remount rw /system/framework";
        osw.write(cmd+"\n");
        Toast.makeText(getApplicationContext(), cmd, 1).show();
        String miniapp = "mv /system/framework/minimode.jar /system/framework/modeminix.jar";

        osw.write(miniapp+"\n");}catch(Exception e){
            e.printStackTrace(); 
```

当我直接在 adb shell 中运行它时，它工作正常，但是当我通过我的应用程序运行它时，没有任何变化......任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:20:40.973

```
 osw.write("mount -o remount rw /system\n"); 
```

这行得通，但是当你尝试直接挂载 /system/framework 时，它会抛出 mount command not found :)

# python - shell 的 && 和 || 在蟒蛇

> ID：12422562
> 
> 赞同：1
> 
> 时间：2012-09-14T10:19:33.957
> 
> 标签：python, shell, command

在 shell 中，如果我只想在第一个命令成功的情况下执行第二个命令，我会这样做

```
cmd1 && cmd2 
```

如果第一个命令失败，我需要执行第二个命令，我会这样做

```
cmd1 || cmd2 
```

我在 python 脚本中通过 subprocess.call 调用命令列表。我该怎么做以上？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T10:23:44.017

传递`shell=True`给`subprocess.call`您可以执行任意 shell 命令。只要确保您[正确地转义/引用所有内容即可](http://docs.python.org/library/subprocess.html#frequently-used-arguments)。

```
subprocess.call("true && echo yes!", shell=True) 
```

打印`yes!`，而

```
subprocess.call("false && echo yes!", shell=True) 
```

什么都不打印。

（您不需要转义或引用`&&`or `||`，但是其中带有空格的文件名可能会很痛苦。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T10:36:03.870

扩展@larsmans 答案 - 如果您正在使用`subprocess.call`并且不想`shell=True`出于任何原因进行设置，您可以检查`returncode`属性。
如果返回码为 0，则命令成功。您还可以实现 a`subprocess.check_call`来提高 a `CalledProcessError`。这里有一些有用的[文档](http://docs.python.org/library/subprocess.html#subprocess.check_call)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T10:26:21.127

这种东西会起作用

```
In [227]: subprocess.Popen(['dir', '||', 'ls'], shell=True)
Out[227]: <subprocess.Popen at 0x1e4dfb0>

 Volume in drive D has no label.
 Volume Serial Number is 4D5A-03B6

 Directory of D:\Dummy

09/14/2012  03:54 PM    <DIR>          .
09/14/2012  03:54 PM    <DIR>          ..
               0 File(s)              0 bytes
               2 Dir(s)  141,482,524,672 bytes free

In [228]: subprocess.Popen(['dir', '&&', 'ls'], shell=True)
Out[228]: <subprocess.Popen at 0x1e4df10>
 Volume in drive D has no label.
 Volume Serial Number is 4D5A-03B6

 Directory of D:\Dummy

09/14/2012  03:54 PM    <DIR>          .
09/14/2012  03:54 PM    <DIR>          ..
               0 File(s)              0 bytes
               2 Dir(s)  141,482,524,672 bytes free
'ls' is not recognized as an internal or external command,
operable program or batch file. 
```

# java - 传递多级对象方法作为参数

> ID：12422565
> 
> 赞同：0
> 
> 时间：2012-09-14T10:19:38.513
> 
> 标签：java

如果我的方法调用是：

```
obj.getLevelOne().getLevelTwo().getValue(); 
```

我想将此方法作为以下参数传递：

```
boolean checkValue( obj, method , value) 
{
   return obj.method() == value;
} 
```

我想这样调用 checkValue 方法：

```
checkValue(obj, "getLevelOne().getLevelTwo().getValue", value); 
```

有什么办法可以做到这一点吗？请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T10:29:27.423

在 Java 中，函数不是一流的概念（但在 Java 8 中出现）。因此，不可能像在许多其他具有函数概念的语言中那样传递方法。

相反，您需要做的是声明一个接口并使用匿名内部类实现它。例如

**界面**

```
interface MyGetter {
    Object doGet();
} 
```

**检查方法**

```
boolean checkValue(MyGetter getter, Object value) {
    return getter.doGet().equals(value);
} 
```

**召唤**

```
checkValue(new MyGetter() {
    public Object doGet() {
        return obj.getLevelOne().getLevelTwo().getValue();
    }
}, 5); 
```

我们在调用中实际做的是创建一个新类和该类型的对象来进行您需要的实际调用。

编辑：

如果您需要不同的返回类型，您可以使接口和检查方法通用，例如

**界面**

```
interface MyGetter<T> {
    T doGet();
} 
```

**检查方法**

```
<T> boolean checkValue(MyGetter<? extends T> getter, T value) {
    return getter.doGet().equals(value);
} 
```

**召唤**

```
checkValue(new MyGetter<SomeClass>() {
    public SomeClass doGet() {
        return obj.getLevelOne().getLevelTwo().getValue();
    }
}, 5); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T13:25:14.327

如果你真的想做这样的事情，我建议：

1.使用 Callable 并创建匿名子类。注意：这有点类似于上面给出的“MyGetter”方法，只是它使用了 Callable。不需要我们自己的接口，因为我们可以使用内置于 jdk 中的用于此目的的东西。

> ```
> public <T> boolean checkValue(Callable<T> valueGetter, T value) {
>     return value.equals(valueGetter.call());
> }
> 
> final MyObject obj = new MyObject();
> checkValue(new Callable<String>() { 
>      public String call() { return obj.getLevelOne().getLevelTwo().getValue(); }
> }, "foo"); 
> ```

2.使用某种 EL 包（mvel 可以很好地用作嵌入式库）。

然后你可以这样做：“levelOne.levelTwo.value”作为你的表达式，并使用 mvel 在“obj”上进行评估。

```
public <T> boolean checkValue(Object obj, String expression, T value) {
    Object objVal = MVEL.eval(expression, obj);
    return value.equals(objVal);
}
checkValue(obj, "levelOne.levelTwo.value", "foo"); 
```

当然，第一个更安全，尽管您的“表达式”将在编译时完成，因为您将其显式编码到可调用实现中。第二种方法更具动态性，可让您在运行时计算表达式。

# android - 键盘启动时调整滚动视图

> ID：12422566
> 
> 赞同：15
> 
> 时间：2012-09-14T10:19:39.360
> 
> 标签：android, keyboard, scrollview, android-keypad

我有一个带有表格的活动。因为表单很长，所以我使用了滚动视图。

问题是当键盘启动时滚动视图不会改变。键盘与滚动视图的最后部分重叠。

如何确保键盘位于滚动视图下方，并且调整滚动视图以适应其上方的空间？

同时，有没有办法确保“上一个”和“下一个”按钮也在键盘上？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-14T10:29:30.530

在应用程序的清单文件中，将以下内容添加到所需的`<activity />`--

```
 android:windowSoftInputMode="stateAlwaysHidden|adjustResize|adjustPan" 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-14T10:34:35.867

您需要在 AndroidManifest.xml 文件中添加**android:windowSoftInputMode="adjustResize" 。**

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-10-14T05:21:19.140

如果你使用片段，你只需要使用代码来控制它，如下所示

`context.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE);`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-11-02T17:19:45.353

对于，我喜欢在文件`ScrollView`中使用以下软输入方式：`Activity``AndroidManifest.xml`

```
android:windowSoftInputMode="adjustPan" 
```

在其他选项中，这对我来说最有效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-09-12T19:47:09.387

请注意，如果您使用的是 CoordinatorLayout，请确保设置 android:fitsSystemWindows="false" 以使其适用于“adjustResize”

上面的答案还不够！

看这篇文章

[https://code.luasoftware.com/tutorials/android/move-layout-when-keyboard-shown/](https://code.luasoftware.com/tutorials/android/move-layout-when-keyboard-shown/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-28T08:02:29.313

1.  `<ScrollView ... android:layout_height="fill_parent" android:fillViewport="true" android:fitsSystemWindows="true" />`
2.  表明 `<activity ... android:windowSoftInputMode="stateHidden|adjustResize" />` 它对我有用

# ruby-on-rails - rails 计算重复条目

> ID：12422567
> 
> 赞同：0
> 
> 时间：2012-09-14T10:19:41.250
> 
> 标签：ruby-on-rails, count, size, row

我有一个连接表：

```
<% @users.each do |user| %>
<li><%= user.user_id %><%= user.user.name %></li> 
```

给我

*   1 弗雷德
*   1 弗雷德
*   9 查理

好吧..到目前为止感谢您的答案。我可以看到我不够精确，无法解释我需要什么。

```
<% @users.each do |user| %>
<li><%= user.user_id %><%= user.user.name %></li> 
```

是查询的结果。所以结果可能是 10 个不同的用户，或者一些可能是两倍或三倍。我想在它们出现多个时标记它们。我不想在我的数据库中找出重复条目.....

所以我必须找出 |user| 中的天气 是具有相同 user_id 的多个 val .. 以获得真/假希望这使它更清楚。现在我没有 clou 如何归档这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:30:18.253

假设你有两张桌子`users`和`details`

我从很小的时候就得到了您的问题，我认为您希望所有具有重复详细信息的用户

您的 sql 应该如下所示

```
double_details = SELECT u.* FROM users u LEFT JOIN details on d.user_id = u.id 
                            GROUP BY 'u.user_id' HAVING (COUNT(d.id))  > 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:40:27.220

```
Model.group(:user_id).select("user_id, COUNT(*) as total").find_all{|i| i.total > 1} 
```

将模型替换为您的模型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T10:41:37.253

如果用户表引用自己，那么类似的东西`user.users.count`应该返回引用这个的其他用户的数量。

# java - 我能够获得一个列表对象，但你如何在列表中显示值？

> ID：12422573
> 
> 赞同：1
> 
> 时间：2012-09-14T10:19:57.927
> 
> 标签：java, jsp, wcs

我能够获取列表对象，但是如何在列表中显示值？？？

```
<%
  com.ibm.commerce.utf.objects.RFQProdAccessBean ab= new com.ibm.commerce.utf.objects.RFQProdAccessBean();
  Enumeration list = (java.util.Enumeration)ab.findByRFQId(java.lang.Long.parseLong("13001"));
  System.out.println("*******"+list);
  Vector aVector = new Vector(java.util.Arrays.asList(list));
  Iterator nums = aVector.iterator();

  while(nums.hasNext()) {
    String aString = (String)nums.next();
    System.out.println("************"+aString);
  }
%>    
<c:out value="${aString}" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:32:44.697

您的代码中有几个问题：

1.  `java.util.Arrays.asList(list)`不会将枚举转换为列表。它将创建一个包含单个元素的列表：枚举。您应该使用[Collections.list()](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#list%28java.util.Enumeration%29)来做到这一点。
2.  没有理由将 List 转换为 Vector。Vector（顺便说一下，就像 Enumeration 一样）是一个不应再使用的旧类，而 List 拥有您所需要的一切。
3.  您应该使用泛型类型而不是原始类型。它将为您节省许多不必要的演员表
4.  这段代码首先不应该在 JSP 中，而应该在 servlet 或控制器中
5.  您正在尝试`aString`从循环外部访问，但 aString 是在循环内部定义的
6.  JSP EL 不访问局部变量。它访问页面、请求、会话或应用程序属性。如果您希望它访问局部变量，则需要将此变量存储在页面范围属性中。
7.  我猜你想显示枚举中的每个字符串。在这种情况下，您应该使用`c:forEach`标签，而不是 while 循环。

所以，代码可以这样写：

```
<% RFQProdAccessBean ab= new RFQProdAccessBean();
   Enumeration<String> enumeration = (Enumeration<String>) ab.findByRFQId(13001L);
   pageContext.setAttribute("list", Collections.list(enumeration));
%>
<c:forEach var="element" items="${list}">
    <c:out value="${element}"/>
</c:forEach> 
```

但是，我重复一遍，Java 代码应该在 JSP 之外，并且应该将列表存储到请求属性中。forEach 循环将保持不变。

# android - 如何在不打开其他使用“地理”方案的应用程序的情况下打开谷歌地图？

> ID：12422575
> 
> 赞同：1
> 
> 时间：2012-09-14T10:20:08.597
> 
> 标签：android, android-intent, geo

我有一个小型测试项目，其主要活动包含：

```
String myUri =  "geo:50.08818f,14.42021f?z=11";
Intent intent = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse(myUri));
startActivity(intent); 
```

在我的安卓设备上，我有谷歌地图和一个使用地理方案的应用程序。运行测试项目，出现一个带有 2 个选项的弹出窗口：如果我想打开我的应用程序，它会打开并在地图上设置给定位置，但如果我选择 Google 地图，地图会打开，一秒钟后，我的另一个应用程序启动并在其地图上设置位置。

我的问题是，如果我没有选择它，我不明白为什么我的其他应用程序会打开。我的应用程序清单中的一段代码是：

```
<intent-filter >
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.BROWSABLE" />
    <data android:scheme="geo" />
</intent-filter> 
```

任何帮助将不胜感激，

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T10:23:08.667

您可以使用 ：

```
Intent intent = new Intent(android.content.Intent.ACTION_VIEW, 
Uri.parse("http://maps.google.com/maps?saddr=20.344,34.34&daddr=20.5666,45.345"));
startActivity(intent); 
```

但它也可以启动 Navigator...

* * *

您还可以使用：

```
"google.navigation:q=an+address+city" 
```

谷歌导航

* * *

以下是可用列表：http `Intent`:
[//developer.android.com/guide/appendix/g-app-intents.html](http://developer.android.com/guide/appendix/g-app-intents.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:05:54.230

纬度和经度必须是小数。

```
String myUri =  "geo:50.08818,14.42021?z=11";
Intent intent = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse(myUri));
startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T02:33:19.720

您可以使用此意图专门使用 Google 地图打开导航：

```
 Intent navigation = new Intent(Intent.ACTION_VIEW, Uri.parse("http://maps.google.com/maps?saddr=" +
                     String.valueOf(AppObj.getInstance().currentUserLocation.getLatitude())+","+
                     String.valueOf(AppObj.getInstance().currentUserLocation.getLongitude())+"&daddr="+
                     String.valueOf(task.getLatitude()) +","+ String.valueOf(task.getLongtitude())));
                     navigation.setClassName("com.google.android.apps.maps", "com.google.android.maps.MapsActivity");
 startActivity(navigation); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-01T16:54:14.587

得到它的工作：

```
String uri = "geo:" + gpsLat + "," + gpsLong + "?q=" + Uri.encode(gpsLat+ "," + gpsLong);
startActivity(new Intent(android.content.Intent.ACTION_VIEW, Uri.parse(uri))); 
```

希望这有帮助

# data-mining - 如何将 DBSCAN 算法应用于相似 url 的分组

> ID：12422576
> 
> 赞同：-3
> 
> 时间：2012-09-14T10:20:12.980
> 
> 标签：data-mining, cluster-analysis, dbscan

如何使用 DBSCAN 算法对相似的 url 进行分组。我见过很多数据集，但没有一个在 url 上，我想采用类似类型的 url 并将其组合在一起。在这里，我无法知道距离（eps），而 minpoints 可以是要分组的 url 的数量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T10:34:08.913

DBSCAN 需要一个距离函数和一个阈值来检测相似的物体。

所以继续吧，首先你需要定义一个适当的距离函数和一个阈值，然后我们可以帮助你使用 DBSCAN（但你应该能够找到可以扩展到任意距离函数的 DBSCAN 实现）。

关键的挑战是距离，这取决于你，因为我们不*知道*你想得到什么。这是非常主观的，我们只是不知道您想要或需要什么。

# java - eclipse 服务器中缺少项目

> ID：12422580
> 
> 赞同：1
> 
> 时间：2012-09-14T10:20:49.127
> 
> 标签：java, eclipse, tomcat

使用 Java EE IDE 安装 Eclipse Galileo 并配置 Tomcat-6。工作区中有几个项目我无法使用 tomcat 部署。

`I right-click on Tomcat (in the Servers view) -> Add and remove... ->`出现一个窗口，其中有两个文本框
`1\. available and 2\. Configured`。
我在可用的文本框中看不到任何项目，为什么？我有什么需要安装/配置的吗？请看下面的图片

![在此处输入图像描述](../Images/40646dcd6d4f2e394d9fd3d060fad5f5.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T10:22:42.127

您的项目不是作为网络应用程序输入的，否则您将在项目上有一个小地球。检查您的项目方面

# iphone - uitextview 键盘隐藏错误

> ID：12422583
> 
> 赞同：-1
> 
> 时间：2012-09-14T10:20:51.863
> 
> 标签：iphone, ios, uitextview

在我使用的应用程序`UITextView`中`UIScrollView`，我添加了要隐藏的代码，它不起作用。这是我的代码

```
-(BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
if([text isEqualToString:@"\n"])
    [txt1 resignFirstResponder];
return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:24:59.107

这是你的答案：-

```
-(BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
if([text isEqualToString:@"\n"])
    [textView resignFirstResponder];
return YES;
} 
```

在`resignFirstResponder`将与`UITextView`参考一起工作。你给了喜欢

```
[text resignFirstResponder]; 
```

哪个行不通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:55:52.633

你的代码没问题。只需更换

```
[txt1 resignFirstResponder]; 
```

和

```
[textView resignFirstResponder]; 
```

并确保您的`textView`委托设置为不会调用`YES`其他明智的方法。`delegate`

```
textView.delegate = self; 
```

如果你已经被你的`textView`from`XIB`然后**ctrl+drag** from `textView`to`File'sO Owner`并设置它的`delegate`. 它肯定会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T10:33:40.380

使用此代码：-

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
    if([text isEqualToString:@"\n"])
    {
        [txtView resignFirstResponder];
        return NO;
    }
    return YES;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T10:37:00.000

如果您想在每个文本视图中按回车键退出键盘，请使用以下代码。

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
    if([text isEqualToString:@"\n"])
    {
        [textView resignFirstResponder];
        return NO;
    }
    return YES;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T10:25:14.580

你应该返回假。喜欢：-（假设 txt1 是您的文本视图的 obj）

```
-(BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
if([text isEqualToString:@"\n"])
    [txt1 resignFirstResponder]; // OR [textView resignFirstResponder];
return FALSE;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-14T10:26:18.770

您可以使用以下代码：

```
-(void)touchesBegan :(NSSet *)touches withEvent:(UIEvent *)event
{

    [self.view resignFirstResponder];

    [scrollView resignFirstResponder];

} 
```

然后您可以触摸除 textView 之外的任何其他位置以使键盘隐藏。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-14T10:28:08.393

像这样做 ，

```
- (BOOL)textViewShouldReturn:(UITextView *)textView
{
    // the user pressed the "Done" button, so dismiss the keyboard
    [textView resignFirstResponder];
    return YES;
}

-(BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
  if([text isEqualToString:@"\n"]) //Resign for return Key
  {
    [textView resignFirstResponder];
  }
  return YES;
} 
```

# java - 使用数据库查询更新 JTable

> ID：12422584
> 
> 赞同：0
> 
> 时间：2012-09-14T10:20:54.937
> 
> 标签：java, database, swing, jtable, defaulttablemodel

我正在处理的程序包含两个类，GUI 和 DatabaseHelper。使用的表模型是 DefaultTableModel。

GUI 包含一个简单的 JTable。它在启动时使用来自 DatabaseHelper 的数据进行初始化。这行得通。

但是，当尝试将新数据加载到表中时，它并不是那么简单。

到目前为止，我的方法是：

```
model = DatabaseHelper.LoadData() // returns a default table model with new data.
tabel = new JTable();
tabel.setModel(); 
```

现在发生的情况是加载的数据被附加到已经存在的 JTable 上。

如果可能的话，我想只使用默认表模型来实现一个解决方案。感谢您的任何建议！

编辑：

```
public void initGUI(){

        setJMenuBar(makeMenuBar()); 
        container   = new JPanel(new BorderLayout());

        model = db.initialiseTable();       // Load initialisation data from the database

        table = new JTable();
        table.setModel(model);
        table.setPreferredScrollableViewportSize(new Dimension(500, 70));
        table.setFillsViewportHeight(true);
        scrollPane  = new JScrollPane(table);

        container.add(scrollPane, BorderLayout.CENTER); 
        add(container);
    } 
```

从数据库返回一个新模型：

```
public DefaultTableModel loadData(){
        try {
            Class.forName("com.mysql.jdbc.Driver");
            con = DriverManager.getConnection("jdbc:mysql://127.0.0.1:3306/version1", "root", "root");
            System.out.println("\nDatabase Connection Established.\n");

            String query = "SELECT * FROM table WHERE test_number = 2";

            stmt        = con.createStatement();
            rs          = stmt.executeQuery( query );

            md          = rs.getMetaData();
            columns     = md.getColumnCount();  

            while (rs.next()) {
                Vector row = new Vector(columns);

                for (int i = 1; i <=columns-1; i++){
                row.addElement( rs.getObject(i+1) );
                }
                data.addElement( row );
            }
        }catch(SQLException e){
            e.printStackTrace();
        }catch(ClassNotFoundException e){
            e.printStackTrace();
        }

        columnNames.add(" ");
        columnNames.add("Column 1");
        columnNames.add("Column 2");

        DefaultTableModel model = new DefaultTableModel(data, columnNames);

        return model;
    } 
```

ActionPerformed，代码处理从 DatabaseHelper 返回的新模型

```
 model = new DefaultTableModel();
            model = db.loadData();

            table = new JTable();
            table.setModel(model); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:40:06.187

```
model = DatabaseHelper.LoadData() // returns a default table model with new data.
tabel = new JTable();
tabel.setModel(); 
```

*   `TableModel`可能存在您重新创建和的最重要的问题`JTable`，并且这个新`JTable`实例`TableModel`没有添加到 中`GUI`，不要这样做，没有真正的理由...

*   搜索`ResulsetTableModel`（只有你通过）或使用数据库中的`SQL Query`优秀代码 [表](http://tips4java.wordpress.com/2009/03/12/table-from-database/)`@camickr`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T10:24:40.183

中可能存在错误`DatabaseHelper.LoadData()`。出于某种原因，它不会创建新模型，但总是返回相同的模型。

在其中创建一个新模型`DatabaseHelper.LoadData()`，它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T18:35:04.310

首先，看起来您在动作处理程序中有额外的实例化：

```
 model = new DefaultTableModel();
        model = db.loadData();

        table = new JTable();
        table.setModel(model); 
```

该`loadData`方法为您实例化 a `DefaultTableModel`，因此您可以跳过`new DefaultTableModel`并且您已经`JTable`从您的`initGui`方法中获得了 a ，因此您应该只引用现有的`Component`.

现在，看起来您只是*添加*到`columnNames`对象中。也许您每次都需要清除它或重新实例化它？如果`loadData`将被多次调用，那么`columnNames`在方法之外创建会更干净`loadData`。在那里添加“”、“Column 1”和“Column 2”，并且只在里面引用它`loadData`。

# javascript - 无法删除画布中的图像：javascript

> ID：12422586
> 
> 赞同：0
> 
> 时间：2012-09-14T10:21:26.483
> 
> 标签：javascript, canvas

我是 JavaScript 新手。我正在我的 js 文件中创建新图像，方法是说我打算绘制一个新图像并删除前一个图像......

我的代码示例是：

```
var image = new Image();
image.src = 'abc.png';

ctx.drawImage(image, x, y,30,30); 
```

然后我正在使用

```
ctx.clearRect(x, y, 30, 30); 
```

但它不清除绘制的图像.. 我该怎么办？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T10:31:01.217

检查此[HTML5 画布教程以清除和重绘新图像](http://www.html5canvastutorials.com/tutorials/html5-canvas-images/)

希望这对您有所帮助。

```
<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
    </style>
  </head>
  <body>
    <canvas id="myCanvas" width="578" height="400"></canvas>
    <script>
      var canvas = document.getElementById('myCanvas');
      var context = canvas.getContext('2d');
      var imageObj = new Image();

      imageObj.onload = function() {
        context.drawImage(imageObj, 69, 50);
      };
      imageObj.src = 'http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg';
    </script>
  </body>
</html> 
```

# c# - 在javascript中调用ac#函数

> ID：12422587
> 
> 赞同：-6
> 
> 时间：2012-09-14T10:21:28.813
> 
> 标签：c#, asp.net

> **可能重复：**
> [在 javascript 中调用 c# 函数](https://stackoverflow.com/questions/12421716/call-c-sharp-function-in-javascript)

我有一个包含 if 语句的 ac# 函数（if (condition) test=true else test= false )），谁能告诉我如何在 javascript 中调用该函数并使用该测试变量的结果来执行 if 语句。

我引用的 c# 文件是 (.aspx.cs) 到 .aspx 页面的代码。有没有办法可以从此 .aspx 页面调用以下函数。

```
public void write(bool complete)     
{          
System.IO.StreamWriter writer = new System.IO.StreamWriter(Server.MapPath("~file.txt"), true);          
if (complete == true)         
{             
writer.WriteLine("completed");         
}         
else         
{             
writer.WriteLine("FAILED");         
}         
writer.Flush();         
writer.Close();         
writer.Dispose();     
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:23:45.393

听起来在您的情况下，不，javascript 正在浏览器中运行，而 C# 代码正在服务器上运行。

如果需要，您可以回发到服务器以使其运行 C# 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:24:48.883

你在重复这些问题。对于之前的相同问题，您也没有得到多少答案 [Call c# function in javascript](https://stackoverflow.com/questions/12421716/call-c-sharp-function-in-javascript)

如果没有回发，您将无法访问 .cs 文件中的代码。如果您想要部分回发，请尝试使用 AJAX

# c# - 使用事务时加载内容的延迟

> ID：12422589
> 
> 赞同：0
> 
> 时间：2012-09-14T10:21:38.277
> 
> 标签：c#, asp.net, transactions

在使用事务编辑内容时，我觉得加载内容有些延迟，（测试这种情况对我来说有点困难，因为我不知道如何更好地测试它）

`Transactions`我对用法有一些疑问：

关于交易有一些小问题和我应该了解的事情，这些部分与这个问题有关：

**我们什么时候应该在自己制作的 CMS 中使用事务？**

我的案例特定说明：

1.  我是否应该在任何 CMS 上使用事务，而我们在 Insert、Update、Retrieve、...上有存储过程？
2.  只有在我们处理多于一张的表时才需要使用事务吗？

我使用的交易策略：

**添加产品方法（使用 add Product sproc ）：**

```
 TransactionOptions txOptions = new TransactionOptions();
            using (TransactionScope txScope = new TransactionScope
              (TransactionScopeOption.Required, txOptions))
            {
                try
                {
                    connection.Open();
                    command.ExecuteNonQuery();
                    LastInserted = (int)pInsertedID.Value;
                    txScope.Complete();                        
                }
                catch (Exception ex)
                {
                    logErrors.Warn(ex.Message);
                }
                finally
                {
                    command.Dispose();
                    connection.Close();
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:07:15.867

事务可能有助于确保数据库的一致性。例如，如果一个用于添加产品的存储过程在多个表中插入数据，并且在此过程中发生了故障，则事务可能有助于回滚整个操作，因此数据库中没有半生不熟的产品（例如在相关表格中缺少一些关键信息）。

事务范围 ( `TransactionScope`) 用于为代码块内运行的任何代码提供环境隐式事务。这些作用域可能有助于严重简化代码，但是，它们也可能在多线程环境中增加复杂性（不幸的是，我对这种情况知之甚少）。

因此，您提供的代码可能对确保数据库的一致性有意义，尤其是在命令使用多个表的情况下。它可能会增加一些性能开销；但是，在进行任何优化之前，最好依靠收集到的分析数据而不是任何类型的感觉（即尝试收集一些关于事务处理速度有多慢的定量数据）。现代数据库引擎通常非常有效地处理事务。以我自己的经验，由于性能开销，没有删除事务。

# random - 使 CURAND 生成小于特定数字的正不同随机数

> ID：12422591
> 
> 赞同：0
> 
> 时间：2012-09-14T10:21:49.037
> 
> 标签：random, cuda, seed

我正在尝试使用 CURAND 库来生成完全独立的随机数。因此，我想为每个线程提供不同的种子。那么，问题 1：如何为每个线程提供不同的种子？（CUDA 中是否有一些我可以使用的时间函数？）

现在我还想在 0 到 10000 的范围内生成这个随机数。我该如何实现呢？

目前我正在使用 curand_normal （因为我想从正态分布中获得数字）但它给了我我不想要的负数和相同的数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:57:31.887

设置不同的种子不是获得独立（非相关）随机数（使用任何单个随机数生成器）的统计上合理的方法。您最好选择单个序列的不同子序列，大多数随机数库都允许您这样做，包括 cuRAND。

查看 CUDA SDK 中的示例，例如 EstimatePiP 或 EstimatePiInlineP 示例使用 cuRAND 生成伪随机数。

对于您问题的第二部分，如 cuRAND 手册中所述，`curand_normal()`例程返回平均值为 0.0 和标准差为 1.0 的正态分布数字（即标准正态分布）。显然，这意味着您将有约 50% 的负数。

与正态分布一起指定固定范围是没有意义的。您要么想要其他一些具有固定范围的分布（例如均匀分布），要么想要具有特定均值和标准分布的正态分布。从标准正态到你的目标平均值/std.dev。您只需将随机抽取乘以目标标准偏差并添加目标均值。

# android - 使用 Ksoap2 在 Android 应用程序中解析 XML

> ID：12422593
> 
> 赞同：0
> 
> 时间：2012-09-14T10:21:52.427
> 
> 标签：android, xml, xml-parsing, ksoap2, ksoap

我有一个 Web 服务，它返回一个这样的 XML 文件：

```
 <Service> 
       <id>12</id> 
       <function_code>2</function_code>  
       <cf>AABBBCCCAAA</cf> 
       <active>0</active> 
       <option>resume_state</option> 
    </Service> 
```

在许多情况下，可能不会返回元素，并且 XML 将是：

```
 <Service> 
       <id>12</id> 
       <function_code>2</function_code>  
       <cf>AABBBCCCAAA</cf> 
       <active>0</active> 
       <option/>
    </Service> 
```

我正在使用以下代码解析此元素：

```
 String id = response.getProperty("cf").toString();
    String func= response.getProperty("function_code").toString();
    int active = Integer.parseInt(response.getProperty("active").toString();
    String option = response.getProperty("option").toString(); 
```

其中响应是 SoapObject。

在这种情况下，当我尝试在错误行上打印选项字符串时：

```
 System.err.println("my option variable contains: "+option); 
```

结果是：

```
 my option variable contains anyType{} 
```

为什么？如果选项元素是 void () ，我该怎么做才能解析获得空值的选项字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:26:41.267

```
String appname = soapObject.getProperty("appname")
                            .toString();

                    if (appname.equals("anyType{}")) {
                        content.setAppname(null);
                    } else {
                        content.setAppname(appname);
                    } 
```

你可以试试这个，效果很好。。

# c# - 除此字符外的正则表达式

> ID：12422598
> 
> 赞同：9
> 
> 时间：2012-09-14T10:22:07.497
> 
> 标签：c#, regex

我正在使用 MVC 数据注释，我的要求是地址字段可以包含除`< > . ! @ # % / ? *`.

我搜索了很多网站，但不知道如何编写这个正则表达式。

到目前为止，我已经尝试过：

```
[Required(ErrorMessage = "Address Required.")]
[RegularExpression(@"^[<>.!@#%/]+$", ErrorMessage = "Address invalid.")]
public string Address { get; set; } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-14T10:29:05.447

使您的正则表达式从除插入符号列出的字符**之外的任何字符中进行选择：**

```
[^abc] 
```

将匹配任何不是 a、b 或 c 的东西。

所以把它们放在一起，你的正则表达式就是

```
^[^<>!@#%/?*]+$ 
```

请注意，方括号外的插入符号表示“匹配行首”，而方括号内的插入符号表示“匹配任何**以下**内容”

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-14T10:25:27.897

目前，您只允许仅由这些字母组成的字符串。

利用

```
"^[^<>.!@#%/]+$" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T10:25:39.130

尝试是正则表达式：

```
[^<>.!@#%/?*] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T10:26:50.517

这应该做的工作：

> “[^<>.!@#%/]”

**编辑**：

. (dot) 是正则表达式中的保留字符，因此您需要对其进行转义。

# objective-c - 带有 Unicode 字符的 iOS NSLog 错误

> ID：12422599
> 
> 赞同：5
> 
> 时间：2012-09-14T10:22:09.787
> 
> 标签：objective-c, ios, unicode, nsstring, nslog

谁能告诉我以下结果差异的原因？

```
completionHandler:^(NSArray *placemarks, NSError *error) {
    NSLog(@"\n placemarks%@", placemarks); 
```

结果：

```
placemarks(
"\U039b\U03b5\U03c9\U03c6\U03cc\U03c1\U03bf\U03c2 \U039a\U03cd\U03c0\U03c1\U03bf\U03c5 163, 16451 \U0391\U03c1\U03b3\U03c5\U03c1\U03bf\U03cd\U03c0\U03bf\U03bb\U03b7\U03c2, \U0395\U03bb\U03bb\U03ac\U03c2 @ <+37.90085408,+23.75654648> +/- 100.00m, region (identifier <+37.90085408,+23.75654648> radius 141.62) <+37.90085408,+23.75654648> radius 141.62m"
) 
```

和

```
for(id object in placemarks ) {NSLog(@"%@ \n", object);} 
```

结果

```
2012-09-14 13:08:23.493 ΑΦΜ[1390:c07] Λεωφόρος Κύπρου 163, 16451 Αργυρούπολης, Ελλάς @ <+37.90085408,+23.75654648> +/- 100.00m, region (identifier <+37.90085408,+23.75654648> radius 141.62) <+37.90085408,+23.75654648> radius 141.62m 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T10:44:15.283

有趣的 ：）

传递`%@`到`NSLog`' 格式字符串只是意味着'调用`description`一个对象'。

看起来`description`on`NSArray`处理 unicode 字符的方式与`description`处理每个对象的方式不同。

但是，我怀疑 description 方法`NSArray`只是在它包含的每个对象上调用 description，然后出于某种原因，我不确定 100% 是否在将它们转储到`NSLog`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-30T17:27:36.047

传递`%@`给`NSLog`确实调用`[NSArray description]`了数组上的。[NSArray 类引用](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/description)说`[NSArray description]`“返回一个表示数组内容的字符串，格式化为属性列表”。这样做会将 unicode 字符转换为`NSNonLossyASCIIStringEncoding`. 如果您反转该过程，您的 NSArray 将正确打印。

```
completionHandler:^(NSArray *placemarks, NSError *error) {
       NSLog(@"%@", [NSString stringWithCString:[[placemarks description] cStringUsingEncoding:NSASCIIStringEncoding] encoding:NSNonLossyASCIIStringEncoding]); 
```

这通过将所有 \Uxxxx 编码的通用字符的原始字符串转换为 ac 字符串，然后将 c 字符串`NSString`解码`NSNonLossyASCIIStringEncoding`为由`[NSLog description]`. 如果不先转换为交流字符串，我还没有想出办法做到这一点。

# wix - 如何修复 ICE57.Per-User 安装

> ID：12422601
> 
> 赞同：6
> 
> 时间：2012-09-14T10:22:24.277
> 
> 标签：wix, wix3.6

我们的应用程序在运行时将一些注册表设置写入 HKCU 配置单元。我想在卸载期间删除此设置。这是代码：

```
 <Fragment>
    <DirectoryRef Id="INSTALLLOCATION" DiskId="1" FileSource="$(var.SourceDirProject)\">
      <Component Id="DeleteHkcuManufacturerHive" Guid="GUID">
        <Condition>REMOVE="ALL" AND NOT UPGRADINGPRODUCTCODE</Condition>
        <CreateFolder/>
        <RemoveRegistryKey Action="removeOnUninstall"
 Id="HKCUkey" Root="HKCU" Key="Software\$(var.Manufacturer)"/>
      </Component>
    </DirectoryRef>
  </Fragment> 
```

ICE57：组件 'DeleteHkcuManufacturerHive' 具有每用户和每机器数据以及每机器 KeyPath。
为什么我得到 ICE57？安装是按用户进行的。提前致谢。

**UPD：**每台机器的元素在哪里？可能是 INSTALLLOCATION=Program Files\ManufacturerDirectory？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T10:57:28.947

您正在 HKCU 配置单元上进行操作，该配置单元仅对当前用户可用。

[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368994%28v=vs.85%29.aspx)状态：

> ICE57 验证单个组件不会混合每台机器和每用户的数据。此 ICE 自定义操作检查注册表项、文件、目录键路径和非广告快捷方式。在同一个组件中混合每个用户和每个机器的数据可能会导致在多用户环境中的某些用户只能部分安装该组件。

ICE 是对您的安装包的验证。如上所述，ICE57 是为了确保您不会混淆每台机器和每用户的结构。如果您必须在卸载期间删除 HKCU 的条目（并且该软件是在每台计算机上安装的），那么您可以在 Visual Studio 中的“属性”>“工具设置”中关闭该特定验证，如下面的屏幕截图所示：

![在此处输入图像描述](../Images/fc524e8a3b018ae335b610987391ee82.png)

但是，您可能需要考虑问题的根本原因。如果您正在执行每台机器的安装，您的安装程序或应用程序可能不应该写入 HKCU，因为它只对当前用户可用，而您的应用程序是为所有用户安装的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T05:08:34.890

我在[wix-users 邮件列表上得到了答案。](http://windows-installer-xml-wix-toolset.687559.n2.nabble.com/Fixing-ICE57-on-perUser-installation-td7580516.html)这是**Peter Shirtcliffe**的回答：

> ProgramFiles 是每台机器的位置。您只能在提升时访问它。如果您想在每用户安装中安装程序代码，您应该安装到 %LocalAppData%\Programs。
> 
> 完全删除条件。该组件将被安装，但在您卸载应用程序之前不会生效。此时，当组件被删除时，注册表项也将被删除。

# angularjs - AngularJS 分页与 $location.path 但没有 ngView 重新加载

> ID：12422611
> 
> 赞同：38
> 
> 时间：2012-09-14T10:23:20.273
> 
> 标签：angularjs, ngroute

我的单页应用程序加载了一个主页，我想展示一系列想法。每个想法都显示在动画 Flash 容器中，并显示动画以在想法之间循环。

想法是使用 $http 加载的：

```
$scope.flash = new FlashInterface scope:$scope,location:$location

$http.get("/competition.json")
  .success (data) ->
    $scope.flash._init data 
```

但是，为了从历史导航和 UX 中受益，我希望使用 $location 更新地址栏以显示每个想法的正确 url：

```
$location.path "/i/#{idea.code}"
$scope.$apply() 
```

我在这里调用 $apply 是因为这个事件来自 AngularJS 上下文之外，即 Flash。我希望当前的控制器/视图保留并且视图不重新加载。这是非常糟糕的，因为重新加载视图会导致整个闪存对象被丢弃，并且预加载器循环再次开始。

我试过听 $routeChangeStart 做一个 preventDefault：

```
$scope.$on "$routeChangeStart", (ev,next,current) ->
  ev.preventDefault()
$scope.$on "$routeChangeSuccess", (ev,current) ->
  ev.preventDefault() 
```

但无济于事。如果我能找到一种在更改 $location.path 时覆盖视图重新加载的方法，那么整个事情就会变得很糟糕。

我仍然非常喜欢 AngularJS，所以我很高兴有任何关于如何构建应用程序以实现我的目标的指示！

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-09-18T16:29:02.427

无需更新路径，只需使用页码更新查询参数。

设置您的路线以忽略查询参数更改：

```
....
$routeProvider.when('/foo', {..., reloadOnSearch: false})
.... 
```

并在您的应用更新`$location`中：

```
...
$location.search('page', pageNumber);
... 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-09-14T17:16:09.430

从[这篇博文](http://blog.grio.com/2012/08/where-my-docs-at-a-smattering-of-pointers-on-angularjs-one-of-which-at-least-is-difficult-if-not-impossible-to-find-on-the-internet.html)：

> 默认情况下，所有位置更改都经过路由过程，该过程会更新角度视图。
> 
> 但是，有一种简单的方法可以将其短路。Angular 监视位置变化（无论是通过在位置栏中键入、单击链接还是通过 设置位置来完成 `$location.path()`）。当它感知到这种变化时，它会广播一个事件`$locationChangeSuccess`，并开始路由过程。我们所做的是捕获事件并将路线重置为之前的路线。

```
function MyCtrl($route, $scope) {
    var lastRoute = $route.current;
    $scope.$on('$locationChangeSuccess', function(event) {
        $route.current = lastRoute;
    });
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-11T10:43:13.220

我的解决方案是使用 $routeChangeStart，因为它为您提供了“下一个”和“最后一个”路由，您可以在不需要额外变量（如 $locationChangeSuccess）的情况下比较它们。

好处是能够访问“next”和“last”路由上的“params”属性，就像`next.params.yourproperty`您使用“/property/value” URL 样式时一样，当然使用`$location.url`或`$location.path`更改 URL 而不是`$location.search()`这取决于"?property=value" URL 样式。

在我的情况下，我不仅使用它，而且还防止路由更改是控制器没有更改：

```
$scope.$on('$routeChangeStart',function(e,next,last){
  if(next.$$route.controller === last.$$route.controller){
    e.preventDefault();
    $route.current = last.$$route;
    //do whatever you want in here!
  }
}); 
```

就我个人而言，我觉得 AngularJS 应该提供一种控制它的方法，现在他们假设每当您更改浏览器的位置时，您都想更改路线。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-15T12:16:12.873

您应该`$location`通过依赖注入加载并使用以下内容：

```
$scope.apply(function () {
    $location.path("yourPath");
} 
```

请记住，在**使用**`$location.path`. 这是为了兼容 HTML5 模式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-24T15:57:19.507

$locationChangeSuccess 事件是一种蛮力的做法，但我发现检查路径可以避免在路由路径*模板*未更改时重新加载页面，但在切换到不同的路由模板时重新加载页面：

```
var lastRoute = $route.current;
$scope.$on('$locationChangeSuccess', function (event) {
    if (lastRoute.$$route.originalPath === $route.current.$$route.originalPath) {
        $route.current = lastRoute;
    }
}); 
```

将该代码添加到特定控制器使重新加载更加智能。

编辑：虽然这使它更容易一些，但我最终不喜欢我为保持友好的 URL 而编写的代码的复杂性。最后，我只是切换到了一个搜索参数，并且 Angular 处理得更好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-13T00:29:08.330

在 AngularJS [V1.7.1](https://github.com/angular/angular.js/blob/master/CHANGELOG.md#171-momentum-defiance-2018-06-08)中，`$route`增加了对`reloadOnUrl`配置选项的支持。

如果 route设置`/foo/:id`了`reloadOnUrl`= `false`，那么从`/foo/id1`to移动`/foo/id2`只会广播一个[`$routeUpdate`](https://docs.angularjs.org/api/ngRoute/service/$route#event-$routeUpdate)事件，并且不会重新加载视图并重新实例化控制器。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-12-14T03:07:21.317

我需要这样做，但在尝试让`$locationChange~`事件使其正常工作后，我了解到您实际上可以在`route`using [`resolve`](https://docs.angularjs.org/api/ngRoute/provider/$routeProvider).

```
$routeProvider.when(
    '/page',
    {
        templateUrl : 'partial.html',
        controller : 'PageCtrl',
        resolve : {
            load : ['$q', function($q) {
                var defer = $q.defer();

                if (/*you only changed the idea thingo*/)
                    //dont reload the view
                    defer.reject('');
                //otherwise, load the view
                else
                    defer.resolve();

                return defer.promise;
            }]
        }
    }
); 
```

# php - 调整表格行数

> ID：12422612
> 
> 赞同：-2
> 
> 时间：2012-09-14T10:23:24.327
> 
> 标签：php, html, forms, while-loop, rows

有一个查询，希望它很好且易于回答。

我有一个表单，用于将行添加到数据库中。加载页面时显示的默认行数为 6。我想通过更改字段或单击按钮等添加向表单添加更多行的选项。

我目前使用 while 循环来打印表单。我简单地说：

```
while($rows > 0) {
    echo "FORM INPUTS HERE";
    $rows = $rows - 1;
} 
```

因此，循环通过 a 为记录 1 打印一组输入，然后从计数中取出一个，然后为记录 2 打印一组输入，依此类推。

有没有一种方法可以让 while 循环在不刷新页面的情况下打印更多内容？最简单的方法是在页面顶部有一个小表单，带有一个额外的列字段和提交按钮。然后，这会将值发布回同一页面，并将其添加到默认行数。

我想做到这一点，而不必提交、发布或获取任何东西，但要做到这一点。

我认为这可能很棘手，因为 while 循环已经运行，我不知道如何让它第二次运行。

干杯

编辑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:31:21.060

如果您需要一个空表单，请使用 Javascript 并将这个新的表单元素动态添加到 DOM！:)

您需要在该表单上加载一些信息吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:40:29.183

感谢所有的建议家伙。

我决定只在我的页面顶部使用一个小的 1 归档表单，用户在其中输入他们想要添加的行数，然后按添加按钮。

它应该足够了，因为页面不需要太花哨，并且实现起来更快更简单。

非常感谢

编辑

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T10:28:03.600

你可以使用**ajax**来实现你的愿望。它不刷新页面，而是异步向服务器发送请求并获取内容并附加到表单。

例如，如果您有这样的代码：

```
<form method="post">
    <ul>
        <li><label><strong>Field 1:</strong> <input type="text" /></label></li>
        <li><label><strong>Field 2:</strong> <input type="text" /></label></li>
        <li><label><strong>Field 3:</strong> <input type="text" /></label></li>
        <li><label><strong>Field 4:</strong> <input type="text" /></label></li>
        <li><label><strong>Field 5:</strong> <input type="text" /></label></li>
    </ul>
</form> 
```

现在使用[jQuery](http://jquery.com/)的[`$.getScript`](http://api.jquery.com/jQuery.getScript/)函数，您可以获取一个脚本，类似于以下内容：

```
$("form ul").append('<li><label><strong>Field ' + $currentValue + ':</strong> <input type="text" /></label></li>'); 
```

这对你有用。

# mysql - 如何获取具有多个表关系的单行记录？

> ID：12422614
> 
> 赞同：0
> 
> 时间：2012-09-14T10:23:28.587
> 
> 标签：mysql

表 1：User_Profile

```
-------------------------------------------------------------------------------------------
User_profile_id   | Profile_form_id |   Email       |   Zipcode   |   Firstname | Lastname
-------------------------------------------------------------------------------------------

1                 | 4               |john@gmail.com |  123456     |  john       | peter 
------------------------------------------------------------------------------------------ 
```

-

表 2：Profile_attribute_form

```
-------------------------------------------------------------------
profile_attribute_id   | Profile_attribute_name |  profile_form_id 
-------------------------------------------------------------------

1                      | Address                |  4
-------------------------------------------------------------------
2                      | Phone Number           |  4
------------------------------------------------------------------
3                      | City                   |  4
------------------------------------------------------------------- 
```

表 3：User_Profile_attribute

* * *

```
User_profile_id        | Profile_attribute_id   |  profile_attribute_value 
--------------------------------------------------------------------------

1                      | 1                      |  23,Times road
--------------------------------------------------------------------------
1                      | 2                      |  9786530874
--------------------------------------------------------------------------
1                      | 3                      |  New York
-------------------------------------------------------------------------- 
```

需要的最终结果：

```
-------------------------------------------------------------------------------------------
User_profile_id|Profile_form_id|Email |Zipcode|Firstname|Lastname|Address|PhoneNumber|City
-------------------------------------------------------------------------------------------

1              |4              |gm.com|123456 |john     |peter   |addr1  |9786530874 |NewY 
------------------------------------------------------------------------------------------- 
```

如何为上述结果构建 mysql 查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T10:39:19.930

您需要做的是`JOIN`表格，然后`PIVOT`是数据。但是 MySQL 没有`PIVOT`函数，但您可以使用聚合函数和`CASE`语句来复制该功能。

如果您知道要转换为列的值，则可以使用以下内容：

```
select up.user_profile_id,
  up.profile_form_id,
  up.email,
  up.zipcode,
  up.firstname,
  up.lastname,
  min(case when paf.Profile_attribute_name= 'Address' 
            then upa.profile_attribute_value end) as Address,
  min(case when paf.Profile_attribute_name= 'Phone Number' 
            then upa.profile_attribute_value end) as PhoneNumber,
  min(case when paf.Profile_attribute_name= 'City' 
            then upa.profile_attribute_value end) as City
from user_profile up
left join Profile_attribute_form paf
  on up.Profile_form_id = paf.Profile_form_id
left join User_Profile_attribute upa
  on paf.profile_attribute_id = upa.Profile_attribute_id
  and up.User_profile_id = upa.User_profile_id
group by up.user_profile_id,
      up.profile_form_id,
      up.email,
      up.zipcode,
      up.firstname,
      up.lastname 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/4b27f/3)

现在，如果您想动态执行此操作，这意味着您事先不知道要转置的列，那么您应该查看以下文章：

[动态数据透视表（将行转换为列）](http://buysql.com/mysql/14-how-to-automate-pivot-tables.html)

您的代码如下所示：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'min(case when paf.Profile_attribute_name = ''',
      paf.Profile_attribute_name,
      ''' then upa.profile_attribute_value end)  AS ',
      replace(paf.Profile_attribute_name, ' ', '')
    )
  ) INTO @sql
from user_profile up
left join Profile_attribute_form paf
  on up.Profile_form_id = paf.Profile_form_id;

SET @sql 
  = CONCAT('select up.user_profile_id,
              up.profile_form_id,
              up.email,
              up.zipcode,
              up.firstname,
              up.lastname, ', @sql, '
           from user_profile up
           left join Profile_attribute_form paf
             on up.Profile_form_id = paf.Profile_form_id
           left join User_Profile_attribute upa
             on paf.profile_attribute_id = upa.Profile_attribute_id
             and up.User_profile_id = upa.User_profile_id
           group by up.user_profile_id,
                 up.profile_form_id,
                 up.email,
                 up.zipcode,
                 up.firstname,
                 up.lastname');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/4b27f/11)

# perl - 在unix中与模式匹配上的连续行交换

> ID：12422615
> 
> 赞同：-1
> 
> 时间：2012-09-14T10:23:29.830
> 
> 标签：perl, unix, sed, awk, swap

谁能帮我在 sed/awk/perl 中解决这个问题

输入文件

```
Start variable 1
End   variable 2
A
Z
Next 

Start variable b
End   variable a 
X
Y
Next 
...
...
...

Start variable m
End   variable n
M
N
Next 
```

如果找到模式匹配 `End`，则与其连续行交换

输出文件 ：

```
Start variable 1
A
End variable 2 
Z
Next

Start variable b
X
End variable a
Y
Next
...
...
...

Start variable m
M
End variable n
N
Next 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T10:34:26.520

`sed`解决方案：

```
sed -n '/^End\s/{h;n;p;g};p' inputfile 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T10:33:13.087

简单的 Perl 解决方案。`$n`代表“现在”，`$b`代表“之前”，即“上一行是End”。

```
perl -ne 'print unless $n = /^End$/; print "End\n" if $b; $b = $n' 
```

对于您问题的更新版本，只需添加`$l`以记住要打印的行：

```
perl -ne 'print unless $n = /^End /; $l = $_ if $n ; print $l if $b; $b = $n' 
```

或者，等效但更短：

```
perl -ne '$n = /^End / and $l = $_ or print; $b and print $l; $b = $n' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T11:18:18.973

```
 sed -n '/^End/{h;n;G};p' inputfile 
```

这会做 +

# java - 数组构造断点

> ID：12422616
> 
> 赞同：5
> 
> 时间：2012-09-14T10:23:30.453
> 
> 标签：java, eclipse, breakpoints, yourkit

无论如何要在 Eclipse 或其他调试器中设置断点，以便在构建数组时停止执行？我对原始数组 (int[]) 的构造特别感兴趣，但这个问题应该同样适用于任何数组。

我需要找到造成大量垃圾的罪魁祸首，其中包括 int[]、char[] 和 byte[] 等，所以如果我可以在某些条件下设置断点，我将能够缩小代码范围.

我尝试使用 yourkit 内存分析，但它只显示这些对象中一小部分的分配，其余显示为`<objects without allocation information>`，我不知道为什么。当我进入`Objects unreachable from GC roots`视图时，我只能看到大约 7% 的垃圾的分配信息。由于分配了这么少比例的对象，我什至不确定我是否遗漏了一些位置。有没有办法让 YK 保留所有分配？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T10:43:47.697

当你构造一个数组时，VM 只是保留那么多内存空间*来*填充引用。这是一个**单步*本机*操作**，不可能在内存分配过程中出现断点。例如采取以下代码

```
public class Test{

 public void createArray(){

        int[] iarray = new int[10];

    }

} 
```

现在，如果你反汇编它，你会得到以下说明

```
Compiled from "Test.java"
public class Test extends java.lang.Object{
public Test();
  Code:
   0:   aload_0
   1:   invokespecial   #1; //Method java/lang/Object."<init>":()V
   4:   return

public void createArray();
  Code:
   0:   bipush  10
   2:   newarray int
   4:   astore_1
   5:   return

} 
```

注意 method 的定义`createArray()`，`newarray int`是一条将内存分配给指定数量元素的指令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T11:31:44.670

I work for YourKit, so I'll try to clarify "objects without allocation information" message.

By default YourKit profiler records allocation of each 10-th object. This is a configurable option, so changing "Record each" value to 1 should help. Here is the details from profiler documentation [http://www.yourkit.com/docs/11/help/allocations.jsp](http://www.yourkit.com/docs/11/help/allocations.jsp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T10:34:03.867

`World of Primitive arrays is really mysterious and I don't think anyone is allowed in there ;).` 在调试中浏览 Java 代码的唯一方法是，`F5`但`F5 i.e.Step in`仅适用于未声明的函数，所以我想这是不可能的。

为了确保您可以打印这些数组，使用`Arrays.toString()`它将打印数组中的所有元素

# c# - 我可以使用 C# 禁用表单的“关闭”按钮吗？

> ID：12422619
> 
> 赞同：10
> 
> 时间：2012-09-14T10:23:37.863
> 
> 标签：c#, .net, winforms, forms, interface

如何禁用如下图所示表单的关闭按钮？（下图显示一个`MessageBox`窗口）

![在此处输入图像描述](../Images/86ea138f3848b0cf5dda351a19419514.png)

以上是我生成的`MessageBox`！我想禁用普通表单的关闭按钮。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-07T13:13:39.397

右键单击有问题的窗口，然后单击属性。在属性下单击事件。双击`FormClosing`事件。

以下代码将由 Windows 窗体设计器生成：

```
private void myWindow_FormClosing(object sender, FormClosingEventArgs e)
{

} 
```

只需将代码更新为如下所示（添加`e.Cancel = true;`）：

```
private void myWindow_FormClosing(object sender, FormClosingEventArgs e)
{
     e.Cancel = true;
} 
```

你完成了！

**或者，如果您想禁用窗口的关闭、最大化和最小化按钮：**

您可以右键单击有问题的窗口，然后单击属性。在属性下将属性设置`ControlBox`为`false`。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-10T22:16:00.583

如果您正在使用 MDI 子窗口，并且在创建窗口期间禁用关闭按钮被排除在外（即您想在表单生命周期的某些时间禁用它），那么之前提出的解决方案都不会起作用¹。

相反，我们必须使用以下代码：

```
[DllImport("user32")]
public static extern IntPtr GetSystemMenu(IntPtr hWnd, bool bRevert);

[DllImport("user32")]
public static extern bool EnableMenuItem(IntPtr hMenu, uint itemId, uint uEnable);

public static void DisableCloseButton(this Form form)
{
    // The 1 parameter means to gray out. 0xF060 is SC_CLOSE.
    EnableMenuItem(GetSystemMenu(form.Handle, false), 0xF060, 1);
}

public static void EnableCloseButton(this Form form)
{
    // The zero parameter means to enable. 0xF060 is SC_CLOSE.
    EnableMenuItem(GetSystemMenu(form.Handle, false), 0xF060, 0);
} 
```

¹您可以设置`ControlBox = false`是否不需要任何按钮，但这不是问题所在。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-14T10:25:25.307

您处理 Form 的**Closing**事件（而不是 Closed 事件）。

然后你使用 e.CloseReason 来决定你是否真的要阻止它（UserClose）或不（TaskManager Close）。

此外，还有一个小例子，在[codeproject](http://www.codeproject.com/)上的 Forms上[禁用关闭按钮](http://www.codeproject.com/KB/cs/DisableClose.aspx)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-14T10:28:50.953

您应该覆盖`CreateParams`派生自的函数`System.Windows.Forms.Form`

并改变班级风格

```
myCp.ClassStyle = 0x200; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-05-16T03:07:01.397

```
 Closing += (s, eventArgs) =>
        {
            DialogResult = DialogResult.None; //means that dialog would continue running
        }; 
```

# ios - CGPoint 赋值错误

> ID：12422620
> 
> 赞同：1
> 
> 时间：2012-09-14T10:23:39.990
> 
> 标签：ios, cgpoint

我的代码：

```
CGFloat scaleFactor = newSize.width / oldSize.width;
CGFloat newCenterX = center_.x * scaleFactor;
CGFloat newCenterY = center_.y * scaleFactor;

CGPoint newCenter = CGPointMake(newCenterX, newCenterY);
//newCenter.x = newCenterX;
//newCenter.y = newCenterY;

CGFloat newRaduis = raduis_ * scaleFactor;
newCenter.y += newSize.height - ceilf(scaleFactor) * oldSize.height;
NSLog(@"Convertion from %@ to %@", NSStringFromCGSize(oldSize), NSStringFromCGSize(newSize));
NSLog(@"old center = %@, old radius = %f", NSStringFromCGPoint(center_), raduis_);
NSLog(@"new center = %@, new radius = %f", NSStringFromCGPoint(newCenter), newRaduis);
NSLog(@"new center x = %f, new center y = %f", newCenterX, newCenterY); 
```

并输出：

```
2012-09-14 14:18:35.027 TestApp[425:4b93] Convertion from {1080, 1920} to {320, 415}
2012-09-14 14:18:35.031 TestApp[425:4b93] old center = {246, 822}, old radius = 20.000000
2012-09-14 14:18:35.033 TestApp[425:4b93] new center = {73, -1261}, new radius = 5.925926
2012-09-14 14:18:35.035 TestApp[425:4b93] new center x = 73, new center y = 244 
```

在输出中 - 新中心 = {73, -1261}，新半径 = 5.925926。为什么中心y值为负？我做错了什么？

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:34:04.757

错误是因为你的线

```
newCenter.y += newSize.height - ceilf(scaleFactor) * oldSize.height; 
```

*   `scaleFactor`大约`0.2962`是`ceilf(scaleFactor)`等于`1`。
*   `newSize.height`is `415`, `oldSize.height`is `1920`, so `415 - 1*1920`is `-1505`, 并`newCenter.y += -1505`从`newCenter.y`to `243.556`=`243.556 + (-1505)`改变`1261.444`。

所以这似乎是合法的 newCenter.y`-1261`在这条线之后。

# jquery - 如何每秒更改 ruby 变量值？

> ID：12422623
> 
> 赞同：0
> 
> 时间：2012-09-14T10:24:25.603
> 
> 标签：jquery, ruby-on-rails, json

我有这样的问题：我想显示计数器，它每秒都会改变，所以我需要更改我将在 jQuery 中使用的 Ruby 变量。

**编辑：我想制作计数器，这对所有用户都是一样的。**

我有 counter.json.erb 文件：

```
 {
 "count": <%= @counter%>
 } 
```

和行动：

```
def counter
 @counter //here I need to change variable
 respond_to do |format|
 format.jsonr do
  render :json 
   end
 end
end 
```

我正在使用 jQuery 获取这个变量：

```
$.getJSON('http://127.0.0.1:3000/counter.json', function(data) {
    alert(data.count);//alert just for testing
}) 
```

**编辑：建议的代码：**

```
 var counter = 0
     $(document).ready(function(){
var myCounter = new flipCounter('counter', {value:counter});
$.getJSON('http://127.0.0.1:3000/counter.json', function(data) {
 myCounter.setValue(data.count);
})
});  

   setInterval(function() {
    $.getJSON('http://127.0.0.1:3000/counter.json', function(data) {
 myCounter.setValue(data.count);
   }, 1000); 
```

我得到错误：

```
 Uncaught SyntaxError: Unexpected end of input application.js:1 
```

也许有人可以提出一些建议？也许其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:06:03.940

您实际上不需要“每秒更改变量”。它比这简单得多：

1.  选择开始时间（或结束时间）并将值存储在某处
2.  随时取当前时间
3.  计算两者之间的差异

完毕。您可以随时重复此算法并始终获取计时器的当前状态。

# jquery - 如何为输入框添加动态验证？使用 jQuery

> ID：12422625
> 
> 赞同：3
> 
> 时间：2012-09-14T10:24:27.703
> 
> 标签：jquery

这是我的问题..

我可以根据需要多次创建（添加）两个新的输入字段，同时我想验证打开的输入字段。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:29:58.797

如果为每个输入元素赋予相同的类属性，则可以在验证函数中轻松地遍历所有元素。

```
function validateElements(){
  var invalidElements = [];
  $(".elementToValidate").each(function(index,elem){
    if ($(elem).val() == ''){
      // this element can not be validated! (perhaps add an indication on the page)
      invalidElements.push($(elem));
    }
  });

  if (invalidElements.length){
    return false; // there are invalid elements!  Can not validate.
  }
  return true; // Validated!
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:33:35.920

考虑您正在使用一个函数`.validate()`将验证处理程序附加到表单。当您创建一个新字段时，您可能正在调用一个函数，例如`newField()`. 在那，再次调用该`.validate()`函数？

```
$(document).ready(function(){
    $("form").validate();
}); 
```

在 JavaScript 中，插入：

```
<input type="button" onclick="newField(); $("form").validate();" /> 
```

所以每次插入新元素时，都会调用该`.validate()`函数。希望这可以帮助。

# ios - NSJSONSerialization 返回 null

> ID：12422626
> 
> 赞同：1
> 
> 时间：2012-09-14T10:24:30.083
> 
> 标签：ios, json, nsjsonserialization

我正在编写一个应用程序，它应该从远程 Web 服务读取 JSON 数据。URL 的格式为“something.action”。

我使用 dataWithContentsofURL 从服务下载 JSOn 数据，我看到这个函数确实返回了一些数据。

使用这些数据，我调用函数 NSJSONSeraiization，但它的响应为空。

基本上，我使用的是[http://www.raywenderlich.com/5492/working-with-json-in-ios-5](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)上提供的代码。唯一的区别是我从远程服务器获取数据并且我的 URL 的形式是“something.action”。

我无法弄清楚这里出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:21:24.027

检查像[http://jsonviewer.stack.hu/](http://jsonviewer.stack.hu/)这样的 JSON 查看器，以确认返回的 JSON 是否正确。

对从您收到的 NSData 获得的字符串进行 NSLog 处理，并将其与查看器一起使用。如果有任何问题，您就会知道为什么该对象没有被序列化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:02:47.437

检查你得到的响应是一个格式正确的 JSON 文件，如果它是检查它的类：

```
NSError *jsonError = nil;
NSJSONSerialization *myJSONObject = [NSJSONSerialization JSONObjectWithData:theNSDataObained options:NSJSONReadingMutableContainers error:&jsonError];

if(jsonError != nil){
    NSLog(@"JSON Error: %@", jsonError);
    return;
}

//An NSJSONSerialization object will either be an NSDictionary or 
//an NSArray, figure out what it is: 

NSLog(@"JSON class is: %@", [myJSONObject class]);

//if it's a NSDictionary:
if([myJSONObject isKindOfClass:[NSDictionary class]]){
    NSDictionary *myJSONDictionary = (NSDictionary *) myJSONObject;
    for(id key in myJSONDictionary){
        id value = [myJSONDictionary valueForKey:key];
        [value doStuff];
    }
} 
else //if it's a NSArray.... 
```

# excel - 生成 PowerPivot 工作簿

> ID：12422627
> 
> 赞同：0
> 
> 时间：2012-09-14T10:24:30.113
> 
> 标签：excel, format, powerpivot

我想知道是否可以以编程方式生成 PowerPivot 工作簿？是否在某处描述了 powerPivot 数据格式？我知道这是一个 xlsx 文件，当我解压缩它时，有一个 item1.data 包含编码数据 - 嵌入在工作簿中。

无论我在 powerpivot 工作簿中嵌入了哪些数据，无论是纯文本还是来自 SQL Server 的数据，*.data 文件的格式都相同，我不知道该结构是否在某处指定。

最终，我想以编程方式从各种数据源生成带有嵌入数据的 excel 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:40:05.940

PP 在您定义并创建 PP 应用程序（PowerPivot 模型）时构建内部 SSAS 数据库。数据经过高度压缩并以 SSAS DB 格式驻留在 .xlsx 文件本身中，这听起来很奇怪，但您可以通过在 Excel 2010 中创建一个 PP 应用程序并保存它来验证这一点，将 .xlsx 文件扩展名重命名为 .zip 并保存，打开 .zip 文件并转到 xl\customData 目录。此 .data 文件是 PP 数据和 SSAS DB 模型所在的位置。

要再次验证停止正在运行的 SAS 2008 R2 实例并通过在标签内放置值 1 来编辑位于 msas10_50 配置目录中的 msmdsrv.ini 文件，现在重新启动 SSAS 实例，它现在应该在 IMBI 模式下运行。

在 .zip 文件中创建并保存 .data 文件的副本，并将 .data 扩展名重命名为 .abf（Analysis Services 备份文件扩展名），并将新的 .abf 文件恢复到在 IMBI 模式下运行的 SSAS 2008R2 实例。

您现在可以探索 PowerPivot 应用程序的 SSAS 数据库，甚至可以在 Management Studio 中浏览（透视）它的数据。

这解释了为什么您可以使用 SSAS API 来查询 PowerPivot 模型，因为这是 UI 使用的。

# java - Android中是否可以实现递归警报或覆盖自身的警报？

> ID：12422629
> 
> 赞同：1
> 
> 时间：2012-09-14T10:24:35.230
> 
> 标签：java, android, alarmmanager

我正在考虑`Intent`从我的广播`MainActivity`中接收`SomeReceiver`，然后在某个地方注册一个新的警报，在该警报中再次`onReceive()`触发。那可能吗？如何用新警报覆盖旧警报并确保旧警报被杀死或未注册？`Intent``SomeReceiver`

更新：`MainActivity`不会一直打开，警报仍然需要继续被触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T05:04:48.587

第一次报警取决于您的逻辑。对于下一个警报，您应该在接收器的 onreceive 中重新安排警报。你是对的，你需要打电话`set()`。重复时间不固定？如果是，请继续。你在正确的轨道上。但是如果重复时间是固定的，那么你应该使用`setRepeating()`.

# objective-c - 带有许多 xib 的 UIViewController

> ID：12422632
> 
> 赞同：0
> 
> 时间：2012-09-14T10:24:42.257
> 
> 标签：objective-c, ios

我正在开发一个 iOS 应用程序。我有一个控制器：iPhonePopUpController，在这个控制器中我有一个像这样的图像的 xib：![在此处输入图像描述](../Images/c10ca8623bd4f67ce791882990a304f9.png)

我的问题是，我可以向这个控制器添加另一个 xib 并在需要时加载它，还是应该创建第二个控制器来加载我的第二个 xib？![在此处输入图像描述](../Images/06a15715e65208f47e741158b66f06cb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:45:44.840

您可以使用以下方法从 XIB 加载任何内容：

```
[[NSBundle mainBundle] loadNibNamed:@"YourOtherXIB.xib" owner:someObjectThatWillTakeThePlaceOfFilesOwner options:0] 
```

此行通过创建您在 XIB 中拥有的对象的实例来取消归档命名`YourOtherXIB.xib`的 XIB，然后连接您在 XIB 中定义的所有出口和操作，并返回顶级对象列表。

* * *

当您创建一个文件所有者为 的 XIB 时`UIViewController`，通常您会使用如下代码初始化您的`UIViewController`代码：

```
UIViewController* vc = [[[UIViewController alloc] initWithNibName:nibName bundle:bundle] autorelease]; 
```

这段代码基本上在内部做的是它存储`nibName`和`bundle`你提供的一些内部属性，当它需要加载它的视图时（尤其是第一次需要在屏幕上显示它），它使用类似的东西从 XIB 加载视图上面引用的行：

```
[bundle loadNibNamed:nibName owner:self options:0]; 
```

当您将 XIB 中的视图连接到 的`view`IBOutlet 时`File's Owner`（在这种情况下，它是`self`作为参数传递的，即它`UIViewController`本身），那么`view`您的属性`UIViewController`将填充刚刚从西布。这就是`UIViewController`从 XIB 文件加载其视图的方式。

但当然，您可以为自己的课程做同样的事情，并且不需要您的文件所有者是`UIViewController`. 只需让您的文件所有者成为适合您需要的任何类，从该类公开一个自定义 IBOutlet 并将其连接到您的 XIB 中的对象。

*   例如，您可以有一个`MyCustomClass`声明`IBOutlet UIView* myOtherView;`. `File's Owner`将您在 XIB 中的类定义为class `MyCustomClass`，然后将`myOtherView`出口绑定到视图以从您的 XIB 加载。然后在代码中，创建一个实例并通过传递这个实例作为参数来`MyCustomClass`使用上述方法`loadNibNamed:owner:options:``MyCustomClass``owner`
*   或者，您也可以重用您`UIViewController`加载的主 XIB 以从辅助 XIB 加载其他视图：只需`IBOutlet UIView* otherView`在`UIViewController`子类中添加一个。在您的第一个 XIB 中，您将`view`IBOutlet 连接到您的主视图，但保持`otherView`IBOutlet 未连接。在您的第二个 XIB 中，您将`otherView`IBOutlet 连接到您的其他视图，但保持`view`IBOutlet 未连接。`UIViewController`使用第一个 XIB加载您时，该`view`属性将设置为从您的 XIB 加载的视图。然后，如果您想`otherView`稍后从其他 XIB 延迟加载，只需调用`loadNibNamed:owner:options`with`OtherXIB.xib`作为 nib 名称和`self`所有者。将`OtherXIB`取消存档，并且`otherView`属性将填充该加载的视图。

# c - 如何在多个进程中同时生成随机数？

> ID：12422637
> 
> 赞同：3
> 
> 时间：2012-09-14T10:25:01.783
> 
> 标签：c, random

如何在 C 中为同时运行的多个进程生成随机数？

我想使用`srand`，`rand`但我不知道如何（也许使用进程 ID？）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-14T10:28:47.850

您可以根据进程 ID 为每个进程使用不同的种子，例如：

```
srand(getpid()); 
```

然后只需使用`rand()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T00:32:20.333

经过多年因随机种子而导致的奇怪错误，我最终编写了一个代码来获取随机数`/dev/urandom`，这些随机数与用于 SSL 的随机数相同。在我的代码中，我使用这些“好的”随机数来为 C stdlib rand() 函数播种，只要它有一个好的种子，它就足以完成我的任务：

```
#include <stdio.h>
#include <stdlib.h>

//HOW MANY BITS IN A CHAR? THIS MACRO IS USUALLY DEFINED
#ifndef CHAR_BIT
#define CHAR_BIT 8
#endif

//PATH TO RANDOM NUMBER GENERATOR
const char inPath[]="/dev/urandom";

//EXTRACTS A PSEUDORANDOM unsigned long FROM THE OPERATING SYSTEM VIA /dev/urandom
unsigned long get_urandom(){

  //OPEN INPUT STREAM
  FILE *inFile;
  inFile=fopen(inPath,"r");

  //FAILED TO OPEN STREAM
  if(inFile==NULL){
    fprintf(stderr, "# Failed to open random device %s\n", inPath);
    return 0;
  }

  //HOW MANY BITS IN A CHAR? HOW MANY CHARS IN AN UNSIGNED LONG?
  const int bitsInChar  = CHAR_BIT;
  const int charsInLong = sizeof(unsigned long) / sizeof(char);

  //GET RANDOM UNSIGNED LONG ONE CHARACTER AT A TIME
  unsigned long randomSeed=0;
  for(int i=0; i<charsInLong; i++)
    randomSeed |= fgetc(inFile) << i*bitsInChar;

  //CLOSE STREAM AND RETURN
  fclose(inFile);
  return randomSeed;

}

int main(){

  // We can use the above function directly to get our random numbers, but this is slow.
  printf("We can get random numbers from the OS via get_urandom: %u\n", get_urandom());  

  // Or we can just call get_urandom once, to use as a seed for the stdlib rand() function.
  unsigned int randomSeed=get_urandom();
  srand(randomSeed);
  printf("Or, using a random seed from get_urandom: %u\n", randomSeed);
  printf("We can get random numbers from stdlib, e.g.: %u\n", rand());
} 
```

这是用 C++ 重写的函数的相同代码：

```
#include <fstream>
using namespace std;

//HOW MANY BITS IN A CHAR? THIS MACRO IS USUALLY DEFINED
#ifndef CHAR_BIT
#define CHAR_BIT 8
#endif

//EXTRACTS A PSEUDORANDOM unsigned long FROM THE OPERATING SYSTEM VIA /dev/urandom
unsigned long get_urandom(const char inPath[]="/dev/urandom"){

  //OPEN INPUT STREAM
  ifstream inFile(inPath);

  //FAILED TO OPEN STREAM
  if(inFile.fail()){
    fprintf(stderr, "# Failed to open random device %s\n", inPath);
    return 0;
  }

  //HOW MANY BITS IN A CHAR? HOW MANY CHARS IN AN UNSIGNED LONG?
  const int bitsInChar  = CHAR_BIT;
  const int charsInLong = sizeof(unsigned long) / sizeof(char);

  //GET RANDOM UNSIGNED LONG ONE CHARACTER AT A TIME
  unsigned long randomSeed=0;
  for(int i=0; i<charsInLong; i++)
    randomSeed |= inFile.get() << i*bitsInChar;

  //CLOSE STREAM AND RETURN
  inFile.close();
  return randomSeed;

}

int main(){

  // We can use the above function directly to get our random numbers, but this is slow.
  printf("We can get random numbers from the OS via get_urandom: %u\n", get_urandom());  

  // Or we can just call get_urandom once, to use as a seed for the stdlib rand() function.
  unsigned int randomSeed=get_urandom();
  srand(randomSeed);
  printf("Or, using a random seed from get_urandom: %u\n", randomSeed);
  printf("We can get random numbers from stdlib, e.g.: %u\n", rand());
} 
```

# java - Eclipse Java 代码格式化

> ID：12422640
> 
> 赞同：1
> 
> 时间：2012-09-14T10:25:15.527
> 
> 标签：java, eclipse, formatting, indentation, auto-indent

我正在编写一个 GUI 程序。

它有几个包含其他组件的 JPanel。如果我的代码如下所示，那就太好了：

```
parent component code
    child component code
        grandchild component code 
```

而不是这个：

```
parent component code
child component code
grandchild component code 
```

这将使代码更具可读性。是否有一些我可以在我的代码中放入 Java 将忽略的字符，但 Eclipse 会将其检测为必须有额外缩进的代码的一部分？

我知道我可以手动完成所有这些操作，但我经常自动设置缩进（ctrl+a、ctrl+i）。这样我就不必直接担心缩进，我可以让 Eclipse 为我管理它。但是，这也使我自己所做的任何“自定义”更改无效。

添加 {} 可以解决问题，但它也会影响 java 读取代码的方式，因此这实际上不起作用。

也许有一些插件可用于此？可以检测线条的东西，例如

```
//{ 
```

和

```
//} 
```

然后缩进包含在其中的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T10:37:10.393

选择带有正确的左大括号和右大括号的文本块，然后按`Ctrl`+ `Shift`+`F`将格式化选定的文本块。

此外，在 Eclipse 中，您可以转到**Window** -> **Preferences** -> **Java** -> **Code Style** -> **Formatter**。在这里，您可以创建新的格式化程序配置文件并分配许多自定义格式化规则。

截图方便参考

![Eclipse 格式化程序配置文件](../Images/e294d9302d2090a2df7f4da5e39f66e6.png)

# magento - Magento： 不删除块

> ID：12422641
> 
> 赞同：8
> 
> 时间：2012-09-14T10:25:20.243
> 
> 标签：magento, block, magento-1.7

`Wishlist_Sidebar`我使用以下代码从右向左切换显示，但侧边栏保留在右侧和左侧边栏中。

```
<reference name="right">                
    <action method="unsetChild"><name>wishlist_sidebar</name></action>
    //.....
</reference>
<reference name="left">
     <action method="insert"><blockName>wishlist_sidebar</blockName></action>
</reference> 
```

如何解决此问题

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-14T10:43:48.570

我认为 unsetChild 函数可能使用别名（`as`属性而不是`name`属性。尝试使用...

```
<reference name="right">                
    <action method="unsetChild"><name>wishlist</name></action>
    //.....
</reference> 
```

# background-image - 从右侧而不是左侧定位背景图像

> ID：12422649
> 
> 赞同：0
> 
> 时间：2012-09-14T10:25:32.600
> 
> 标签：background-image, background-position

是否可以指定您希望背景图像（非重复）位于距离右边缘 5 像素的位置？

我知道使用 CSS 可以做到这一点，但它默认为左边缘。我希望背景图像始终位于距右边缘 5 像素的位置。

**CSS**

```
#companyLinks li {
display: inline;
padding-right: 10px;
background-image: url(/img/shd/spacer.png);
background-repeat: no-repeat;
background-position: right center; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T10:35:10.623

@弗朗西斯卡

而是编写 3 行来定义背景，您可以在一行代码下方使用，这将满足您的目的......

> 背景： url(/img/shd/spacer.png) 右上角无重复；

或者，如果您希望它固定在 Center 中的位置，则可以使用

> 背景：url(/img/shd/spacer.png) no-repeat fixed right；

您正在使用两个定位值，即造成冲突的中心和右侧。

您可以一次使用一个值作为水平值，一个值作为垂直值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:43:59.980

您始终可以编辑图像以在右侧为您提供 5px 的 alpha 透明间距，然后使用：

```
background: url(/img/shd/spacer.png) no-repeat fixed right; 
```

正如 Hignesh 的回答所建议的那样。

我知道这听起来像是一个 hack，但这肯定会奏效。或者指定一个固定宽度的容器 div，并放置一个（父宽度 - 5px）的内部 div，并确保它固定在左侧，图像在右侧，由上述 CSS 指定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-21T08:33:28.697

```
background-position: right 5px center; 
```

或者

```
background: url(/img/shd/spacer.png) no-repeat fixed right 5px; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-14T11:13:18.580

尝试使用此表，我认为这应该根据您的需要工作：P

```
<table border="2" align="center" cellpadding="0" cellspacing="0" height="100%" width="100%">
    <tr height="100%">
        <td style="background-image:url('http://www.dvd-ppt-slideshow.com/images/ppt-background/background-31.jpg'); background-position:right; background-repeat:no-repeat; " height="100%" ></td>
        <td  style="width: 10px;"></td>
    </tr>
</table> 
```

# java - Jersey /* servlet 映射导致静态资源的 404 错误

> ID：12422660
> 
> 赞同：21
> 
> 时间：2012-09-14T10:26:39.290
> 
> 标签：java, jersey

如果我在 2.0 版本中将 Jersey 的 url 模式映射到 /*，它会导致所有静态资源（例如 /index.html）出现 404。我的 web.xml 有：

```
<servlet>
  <servlet-name>JerseyApp</servlet-name>
  <servlet-class>org.glassfish.jersey.servlet.ServletContainer</servlet-class>
  <init-param>
    <param-name>javax.ws.rs.Application</param-name>
    <param-value>org.frog.jump.JerseyApp</param-value>
  </init-param>
  <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
  <servlet-name>JerseyApp</servlet-name>
  <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

如何提供具有相同 url 模式的静态内容？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-14T16:54:07.817

使用 Jersey 1.x，如果您从 Jersey servlet 切换到过滤器，您应该能够从同一路径提供静态内容。删除您指定的 servlet XML 并将其切换为：

```
<filter>
  <filter-name>Jersey Filter</filter-name>
  <filter-class>com.sun.jersey.spi.container.servlet.ServletContainer</filter-class>
  <init-param>
    <param-name>javax.ws.rs.Application</param-name>
    <param-value>org.frog.jump.JerseyApp</param-value>
  </init-param>
  <init-param>
    <param-name>com.sun.jersey.config.property.WebPageContentRegex</param-name>
    <param-value>/.*html</param-value>
  </init-param>
</filter> 
<filter-mapping>
  <filter-name>Jersey Filter</filter-name>
  <url-pattern>/*</url-pattern> 
</filter-mapping> 
```

**编辑：**在 Jersey 2.x 中，您应该能够做同样的事情，但属性的名称已更改。尝试类似：

```
<filter>
  <filter-name>Jersey Filter</filter-name>
  <filter-class>org.glassfish.jersey.servlet.ServletContainer</filter-class>
  <init-param>
    <param-name>jersey.config.server.provider.packages</param-name>
    <param-value>org.example</param-value>
  </init-param>
  <init-param>
    <param-name>jersey.config.servlet.filter.staticContentRegex</param-name>
    <param-value>/.*html</param-value>
  </init-param>
</filter> 
<filter-mapping>
  <filter-name>Jersey Filter</filter-name>
  <url-pattern>/*</url-pattern> 
</filter-mapping> 
```

你的 POM 应该包括：

```
<dependency>
  <groupId>org.glassfish.jersey.core</groupId>
  <artifactId>jersey-server</artifactId>
  <version>${jersey2.version}</version>
  <type>jar</type>
  <scope>compile</scope>
</dependency>

<dependency>
  <groupId>org.glassfish.jersey.containers</groupId>
  <artifactId>jersey-container-servlet-core</artifactId>
  <version>${jersey2.version}</version>
  <type>jar</type>
  <scope>compile</scope>
</dependency>

<!-- see. https://eclipse-ee4j.github.io/jersey/ for latest version --> 
```

如果要提供 css、jsp 等服务，则必须在 init-param 中自定义正则表达式。

另一个不错的选择是为您的服务使用版本化路径（“/v1/*”），然后静态内容将在没有过滤器的情况下工作。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-03-16T11:49:23.260

您应添加 forwardOn404 过滤器来解决此问题

```
<filter>
    <filter-name>org.glassfish.jersey.examples.bookstore.webapp.MyApplication</filter-name>
    <filter-class>org.glassfish.jersey.servlet.ServletContainer</filter-class>
    <init-param>
        <param-name>javax.ws.rs.Application</param-name>
        <param-value>org.glassfish.jersey.examples.bookstore.webapp.MyApplication</param-value>
    </init-param>
    <!-- pass to next filter if Jersey/App returns 404 -->
    <init-param>
        <param-name>jersey.config.servlet.filter.forwardOn404</param-name>
        <param-value>true</param-value>
    </init-param>
</filter> 
```

如本示例中所做的那样[https://github.com/eclipse-ee4j/jersey/blob/master/examples/bookstore-webapp/src/main/webapp/WEB-INF/web.xml](https://github.com/eclipse-ee4j/jersey/blob/master/examples/bookstore-webapp/src/main/webapp/WEB-INF/web.xml)

> **注意：**确保将`<servlet>`配置更改为`<filter>`配置。Jersey[`ServletContainer`](https://github.com/eclipse-ee4j/jersey/blob/3.0.0/containers/jersey-servlet-core/src/main/java/org/glassfish/jersey/servlet/ServletContainer.java#L132)既是 an`HttpServlet` *又*是 a `Filter`，因此您可以在 web.xml 中将其配置为两者之一。**为了使用该`forwardOn404`属性，需要将 Jersey 配置为 filter**。

# silverlight - 在silverlight中右键单击

> ID：12422664
> 
> 赞同：0
> 
> 时间：2012-09-14T10:27:04.057
> 
> 标签：silverlight

如何在 silverlight 4.0 中设置 contectmenu

我的代码是：

```
 <toolkit:ContextMenuService.ContextMenu>
       <toolkit:ContextMenu>
               <toolkit:MenuItem Header="Edit"/>
      </toolkit:ContextMenu>
 </toolkit:ContextMenuService.ContextMenu> 
```

但我有这样的错误。

未找到可附加属性上下文菜单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:06:15.740

您必须在 xaml 中添加以下行。

```
 xmlns:toolkit="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Input.Toolkit" 
```

您还必须在参考后提供 dll

```
 System.Windows.Controls.Toolkit.dll
 System.Windows.Controls.Input.Toolkit.dll
 System.Windows.Controls.Toolkit.dll 
```

# ssl - 错误 107 (net::ERR_SSL_PROTOCOL_ERROR)：SSL 协议错误

> ID：12422666
> 
> 赞同：9
> 
> 时间：2012-09-14T10:27:17.527
> 
> 标签：ssl, openssl, tomcat7

我已经在我的 tomcat 上配置了 SSL。我参考了以下站点中的步骤来配置 SSL：

```
 http://wiki.openbravo.com/wiki/How_To_Configure_SSL_For_Windows 
```

我正在使用 Win32 OpenSSL v0.9.8x Light 安装程序和 tomcat 7.0.22。但是当我访问 [https://server.ensarm.com:8843/](https://server.ensarm.com:8843/)时，会出现以下错误：

```
SSL connection error
Unable to make a secure connection to the server. This may be a problem with the server, or it may be requiring a client authentication certificate that you don't have.
Error 107 (net::ERR_SSL_PROTOCOL_ERROR): SSL protocol error. 
```

我不明白可能是什么问题。:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T00:35:53.427

检查您的 Apache 错误日志，看看它是否有类似于以下内容的消息：

> 您在标准 HTTPS(443) 端口上配置了 HTTP(80)！

这可能表明您已将 Apache 配置为在 SSLEngine 未打开时侦听端口 443。

在*httpd.conf 中*只设置一个监听指令：

> 听 *:80

稍后在*httpd.conf*中，您应该有如下内容：

```
<IfModule ssl_module>
Include conf/httpd-ssl.conf
</IfModule> 
```

在*httpd-ssl.conf*（或等效配置文件）中，确保您在 Listen 指令之前启用了 SSLEngine：

```
SSLEngine on
listen *:443 
```

重新启动 Apache，你应该一切顺利。

# mysql - 在存储过程中使用变量

> ID：12422667
> 
> 赞同：0
> 
> 时间：2012-09-14T10:27:25.417
> 
> 标签：mysql, stored-procedures

试图弄清楚为什么它是NULL。我期待 7 被打印出来。

```
mysql> set @total = 0;
Query OK, 0 rows affected (0.00 sec)

mysql> call getAuthorCount(@total);
+------------------------+
| count(distinct author) |
+------------------------+
|                      7 |
+------------------------+
1 row in set (0.00 sec)

Query OK, 0 rows affected (0.02 sec)

mysql> select @total as totalauthors;
+--------------+
| totalauthors |
+--------------+
|         NULL |
+--------------+ 
```

步骤，

```
mysql> create procedure getAuthorCount(out authorcount int)
    -> begin
    ->  select count(distinct author) from libbooks;
    -> end
    -> // 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T11:18:56.850

您应该使用 INOUT 参数 -

```
CREATE PROCEDURE getAuthorCount(INOUT authorcount INT)
BEGIN
  SELECT count(DISTINCT author) FROM libbooks;
END 
```

* * *

例子：

**当@total 值保持原样时（0 输入，0 输出）：**

```
DROP PROCEDURE getAuthorCount;
DELIMITER $$
CREATE PROCEDURE getAuthorCount(INOUT authorcount INT)
BEGIN
  -- SET authorcount = 100;
END$$
DELIMITER ;

SET @total = 0;
CALL getAuthorCount(@total);
SELECT @total AS totalauthors;
+--------------+
| totalauthors |
+--------------+
|            0 |
+--------------+ 
```

**当@total 值被存储过程中的新值替换时：**

```
DROP PROCEDURE getAuthorCount;
DELIMITER $$
CREATE PROCEDURE getAuthorCount(OUT authorcount INT)
BEGIN
  SET authorcount = 100;
END$$
DELIMITER ;

SET @total = 0;
CALL getAuthorCount(@total);
SELECT @total AS totalauthors;
+--------------+
| totalauthors |
+--------------+
|          100 |
+--------------+ 
```

# dom - 在 HTML DOM 中使用 JS 动态获取 SVG 元素的“xlink:href”属性

> ID：12422668
> 
> 赞同：13
> 
> 时间：2012-09-14T10:27:26.403
> 
> 标签：dom, svg, xlink

我有一个结构：

```
<div id="div">
    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="svg">
        <image x="2cm" y="2cm" width="5cm" height="5cm" id="img" xlink:href="pic.jpg"></image>
    </svg>
</div> 
```

我想获取`pic.jpg`url，我需要从最外面的 div 开始，而不是完全从源`<image>`元素开始：

```
var div = document.getElementById("div");
var svg = div.getElementsByTagNameNS('http://www.w3.org/2000/svg', 'svg')[0];
var img = svg.getElementsByTagNameNS('http://www.w3.org/2000/svg', 'image')[0];
var url = img.getAttribute('xlink:href');   // Please pay attention I do not use getAttributeNS(), just usual getAttribute()

alert(url);     // pic.jpg, works fine 
```

我的问题是从 SVG 及其子元素等元素中获取此类属性的正确方法是什么？

因为在我尝试这样做之前，它在 Chrome 中也可以正常工作（我没有尝试其他浏览器）：

```
var svg = div.getElementsByTagName('svg')[0];   // I do not use NS
var img = svg.getElementsByTagName('image')[0];
var url = img.getAttribute('xlink:href');  // and do not use getAttributeNS() here too

alert(url);     // pic.jpg, works fine 
```

但是当我尝试使用时，`getAttributeNS()`我得到了空白结果：

```
var svg = div.getElementsByTagNameNS('http://www.w3.org/2000/svg', 'svg')[0];
var img = svg.getElementsByTagNameNS('http://www.w3.org/2000/svg', 'image')[0];

// Please pay attention I do use getAttributeNS()
var url = img.getAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href'); 

alert(url);     // but I got black result, empty alert window 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-14T10:50:48.480

正确的用法是`getAttributeNS('http://www.w3.org/1999/xlink', 'href');`

# java - 跨多个项目的 Maven 和重构

> ID：12422670
> 
> 赞同：2
> 
> 时间：2012-09-14T10:27:49.597
> 
> 标签：java, maven, refactoring, multiple-projects

我目前正在尝试找到一个合适的工作流程来跨多个 Maven 项目执行重构，但我找不到任何令人满意的解决方案。

假设有三个项目。一个名为*common的项目和两个名为**app1*和*app2*的依赖项目。每个都在一个单独的 Git 存储库中。

现在假设一个名为 StringUtils.trim() 的*通用*方法应重命名为 StringUtils.getTrimed()。*因为app1*和*app2*使用了这种方法，所以这些项目也需要进行调整。

现在，问题是，向开发团队提供这种修改的正确工作流程是什么。鉴于这种情况：一个由大约 10 名开发人员组成的团队，拥有一个中央 SCM 服务器和一个中央 Maven 存储库服务器来托管工件。

可能的工作流程：

1.  只需将更改提交到 SCM（对于所有三个项目）--> 问题：例如，在*app1*上工作的开发人员可能没有检出项目*公共，而是使用来自中央工件服务器的二进制文件。*当他们从 SCM获取最新版本的*app1时，他们的构建将中断。*坏的！

2.  除了 1，将*app1*的依赖项更改为指向*common*的 SNAPSHOT 版本。--> 问题：当在*app1*上工作的开发人员从 SCM 获取最新版本时，如果更新策略设置为*DAILY*（这是默认设置），他们可能不会获得*common的最新 SNAPSHOT。*坏的！

**   除了 2，将 SNAPSHOTS 的更新策略更改为*ALWAYS*。--> 问题：现在，*app1*的开发人员将获得*common*的最新 SNAPSHOT，一切都很好，但前提是在我提交对*app1*的更改之前将 SNAPSHOT 部署到工件服务器！*此外，在将公共*项目部署到工件服务器和我将*app1*提交到 SCM之间有一段时间。如果开发人员获取*common*的最新 SNAPSHOT ，它将与 SCM 中*app1*的当前版本不兼容，因为我还没有提交对*app1*的更改。坏的！* 

 *我能想出的唯一可行的解​​决方案是跳过 SNAPSHOT 机制并使用版本。这是工作流程：

*   在我的机器上本地更改三个项目后（在任何提交之前），将*common*的版本从 1.0 增加到 1.1。
*   commit *common* to SCM 并将其部署到工件服务器。
*   只有在部署完成后，将*app1*和*app2*中的依赖关系更改为指向新版本的*common*并提交*app1*和*app2*。

这种方法的问题：我必须做版本管理，所以这只能与整个团队协调并考虑所有依赖项目来完成。此外，我必须等待*公共*项目部署到工件服务器，然后才能提交对*app1*和*app2*的更改。

是不是有什么简单灵活的机制，如何进行这样的重构呢？我希望有人能帮助我。也许我这边也有一些误解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T10:15:29.220

是的。使用版本控制。对于次要版本升级，保留旧方法并将其标记为已弃用。在通用项目的发行说明中记录您对界面的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T12:16:36.167

我会向你推荐一个开源工具，比如 Sonar (sonarsource.org)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T16:34:30.910

贬低旧的方法名称并将调用引用到新的方法名称。然后你有一个时间窗口来处理两者。然后要求开发团队每隔 X 检查一次折旧的方法，并在固定时间后在未来的版本中删除折旧的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T12:06:05.647

如果重构属于您在示例中建议的类型，我认为您不会找到一种简单的重构方法。您在这里基本上拥有的是从应用程序 1 和 2 到 common 的第三方依赖项。而且，正如您可能已经注意到的那样，第三方依赖项不会经常更改其接口方法的名称，这是有充分理由的 - 对于任何试图更新到最新版本的人来说都是地狱。

我建议您将接口方法的名称保持在尽可能高的水平，名称应该有一些非常错误的东西才能更改（名称说明它做了一些它没有做的事情，反之亦然）。想要将“trim()”更改为“getTrimmed()”并不是这样做的充分理由。

所以，我的建议是这样的：

**在 common 的内部**部分做所有你想要的重构，保持接口不变。如果您真的需要重命名某些东西，请使用新名称复制相关方法，将旧方法标记为已弃用，并让它们都存活一段时间，直到可以合理地假设每个人都开始使用新的，停止使用旧的。*

# java - 是否可以在 Android 中注册 java 安全提供程序？

> ID：12422678
> 
> 赞同：1
> 
> 时间：2012-09-14T10:28:10.317
> 
> 标签：java, android, security, jce

是否可以`java.security.Provider`在 Android 操作系统中注册？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:19:11.153

基于这个问题，我想你不能：

[http://code.google.com/p/android/issues/detail?id=21417](http://code.google.com/p/android/issues/detail?id=21417)

> **询问**
> 
> 我们正在开发一个 JCE 提供程序，并且想要一种静态注册它的方法，以便其他应用程序可以使用它。如果可以静态设置安全属性也很有用，因为我们使用它们来设置默认算法和其他选项。在标准 java 中，这两者都可以通过在文件 /jre/lib/security/java.security 中设置属性来完成。
> 
> **回复**
> 
> *这个时候我要拒绝这个。Android 并不真正支持以这种方式共享代码。如果将某种共享库机制添加到平台中，则可以重新考虑这一点。目前，应用程序必须在自身内部捆绑提供程序。*

# c# - 如何在 DevExpress XtraGrid 中获得单击的单元格列

> ID：12422680
> 
> 赞同：9
> 
> 时间：2012-09-14T10:28:12.000
> 
> 标签：c#, winforms, devexpress, xtragrid

我无法在 XtraGrid 的 GridControl 中获取单击单元格的列名。我怎样才能做到这一点？我正在处理`GridView.Click`事件。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-14T11:35:07.587

在单击事件中，您可以按如下方式解析单击的单元格：

```
void gridView_Click(object sender, EventArgs e) {
    Point clickPoint = gridControl.PointToClient(Control.MousePosition);
    var hitInfo = gridView.CalcHitInfo(clickPoint);
    if(hitInfo.InRowCell) {
        int rowHandle = hitInfo.RowHandle;
        GridColumn column = hitInfo.Column;
    }
} 
```

但是，我建议您按如下方式处理 GridView.MouseDown 事件（因为如果单击网格单元激活列编辑器，则不会发生 GridView.Click 事件）：

```
gridView.MouseDown += new MouseEventHandler(gridView_MouseDown);
//...
void gridView_MouseDown(object sender, MouseEventArgs e) {
    var hitInfo = gridView.CalcHitInfo(e.Location);
    if(hitInfo.InRowCell) {
        int rowHandle = hitInfo.RowHandle;
        GridColumn column = hitInfo.Column;
    }
} 
```

相关链接：[命中信息概览](http://documentation.devexpress.com/#WindowsForms/CustomDocument770)

# php - 如何通过自己的网站将视频上传到 Youtube？

> ID：12422681
> 
> 赞同：-4
> 
> 时间：2012-09-14T10:28:13.673
> 
> 标签：php, mysql

如何通过自己的网站将视频上传到 Youtube？

在我的网站上，我使用 PHP 和 Mysql 进行工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:31:13.523

看看[YouTube 上传小工具](https://developers.google.com/youtube/youtube_upload_widget)。

# php - 监控任何移动应用程序的请求和响应的最佳工具

> ID：12422683
> 
> 赞同：0
> 
> 时间：2012-09-14T10:28:23.313
> 
> 标签：php, android, mobile, windows-mobile, ads

我看到移动应用程序的所有请求的基本动机。

假设任何应用程序都可以显示任意数量的横幅。在这种情况下，我想查看应用程序从哪些服务器获得响应以及请求的格式是什么。

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:31:35.123

听起来你需要一个http嗅探器......

你想让你的手机嗅探并捕捉所有这些动作，还是想让你的台式机/笔记本电脑嗅探，看看你的手机做了什么请求？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T04:53:03.497

你为什么用“Windows Mobile”标记你的问题，这完全是误导。在 Windows Mobile 设备上有一个用于 tcp 捕获的 MS 工具。

为了便于使用，我会设置一个私有 WLAN 网络，在 PC 上添加 JANA 或其他代理，配置 android 设备以将代理用于 http，然后查看代理的实时日志。另一种方法是安装（或仅下载并运行便携式版本）WireShark。但是您再次需要设置私有 WLAN，以便 android 设备使用路由器连接到互联网。路由器必须通过集线器与您的 PC 连接。如果您使用的是交换机，则必须定义一个镜像端口才能看到 WLAN 接入点和路由器之间的流量。

您的网络设置如何连接到互联网？是使用 DSL 连接还是使用路由器直接连接？

下次再具体点。

问候

约瑟夫

# log4j - Log4j 和线程挂起

> ID：12422685
> 
> 赞同：0
> 
> 时间：2012-09-14T10:28:30.373
> 
> 标签：log4j, slf4j, websphere-7

我们正在使用创建一个记录器实例

`private static Logger = Logger.getClass("ClassName.class");`

每个动作类都有一个记录器。这在我们的测试环境中运行良好。但是，它在生产环境中的 WAS 7 中偶尔会出现线程挂起。根据 IBM 服务器分析师的说法，日志文件在等待数据库更新时被锁定。

以下是我在 log4j.xml 中的内容。

```
 <appender name="logger1" class="org.apache.log4j.DailyRollingFileAppender">
            <param name="File" value="/logs1/logFile.log" />
            <param name="DatePattern" value="'.'yyyy-MM-dd" />
            <param name="Threshold" value="DEBUG" />
            <param name="Append" value="true" />
            <layout class="org.apache.log4j.PatternLayout">
                <param name="ConversionPattern" value="%d [%t] %-5p (%F:%L) - %m%n" />
            </layout>
    </appender> 
```

有人可以帮忙吗？如果我删除 static 有什么好处吗？如果我使用 SL4j LoggerFactory 来获取 logger 有什么好处吗？

**编辑：**相关点：log4j.xml 在 2 个应用程序之间共享。应用程序是 1 个 EAR 文件中的 2 个 WAR 文件。log4j.xml 有 2 个附加程序。每个应用程序都会删除代码中的其他附加程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T07:21:29.763

> 如果我删除 static 有什么好处吗？

不`Logger.getClass`，仍然会返回相同的实例。因此，这不会改变与锁定 log4j 相关的任何内容。

> 如果我使用 SL4j LoggerFactory 来获取 logger 有什么好处吗？

不（至少不是你面临的问题）。锁定在 log4j 中完成。SLF4J 只是一个外观，仍然会委托给 log4j（除非你用别的东西替换 log4j）。

# php - 内连接数组结果

> ID：12422689
> 
> 赞同：4
> 
> 时间：2012-09-14T10:28:35.593
> 
> 标签：php, mysql, pdo, inner-join

查看这个数组，可以看到只有`foo6`值与每个父键不同：

```
Array
(
    [0] => Array
        (
          [foo1] => Apple
          [foo2] => Banana
          [foo3] => Carrots
          [foo4] => Deer
          [foo5] => Feather
          [foo6] => Grapes
        )
    [1] => Array
        (
          [foo1] => Apple
          [foo2] => Banana
          [foo3] => Carrots
          [foo4] => Deer
          [foo5] => Feather
          [foo6] => Heater
        )
    [2] => Array
        (
          [foo1] => Apple
          [foo2] => Banana
          [foo3] => Carrots
          [foo4] => Deer
          [foo5] => Feather
          [foo6] => Quail Eggs
        )
) 
```

查询：

```
SELECT
  tpp.page_master_properties_style AS foo1,
  tpp.page_master_properties_bg AS foo2,
  tpp.page_master_properties_data AS foo3,
  tpp.page_properties_style AS foo4,
  tpp.page_properties_bg AS foo5,
  tpp.page_properties_data AS foo6,
  tobj.objects_script AS foo6
FROM templates t
  INNER JOIN category tc
    ON t.category_id = tc.category_id
  INNER JOIN page_properties tpp
    ON t.templates_id = tpp.templates_id
  INNER JOIN objects tobj
    ON t.templates_id = tobj.templates_id
WHERE
  t.templates_id = ? 
```

在哪里`? = 1`

这可能是因为 Table**对象**有多个条目`templates_id`：

```
+--------------+----------------+-----------------+
|  objects_id  |  templates_id  |  objects_script |
+--------------+----------------+-----------------+
|       1      |        1       |      Grapes     |
|       2      |        1       |      Heater     |
|       3      |        1       |     Quail Eggs  |
|       4      |        2       |       Milk      |
|       5      |        3       |       Lemon     |
+--------------+----------------+-----------------+ 
```

我想知道是否有任何内置的 mySQL 函数可以组合`foo6`成一个单一的数组，例如实现这样的结果：

```
Array
(
  [foo1] => Apple
  [foo2] => Banana
  [foo3] => Carrots
  [foo4] => Deer
  [foo5] => Feather
  [foo6] => Array
            (
              [0] => Grapes
              [1] => Heater
              [2] => Quail Eggs
            )
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T10:34:15.053

这看起来像是mysql 库中[group_concat的工作：](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

```
SELECT
  tpp.page_master_properties_style AS foo1,
  tpp.page_master_properties_bg AS foo2,
  tpp.page_master_properties_data AS foo3,
  tpp.page_properties_style AS foo4,
  tpp.page_properties_bg AS foo5,
  group_concat(tpp.page_properties_data) AS foo6,
  tobj.objects_script AS foo6
FROM templates t
  INNER JOIN category tc
    ON t.category_id = tc.category_id
  INNER JOIN page_properties tpp
    ON t.templates_id = tpp.templates_id
  INNER JOIN objects tobj
    ON t.templates_id = tobj.templates_id
WHERE
  t.templates_id = ?
GROUP BY
  tpp.page_master_properties_style AS foo1,
  tpp.page_master_properties_bg AS foo2,
  tpp.page_master_properties_data AS foo3,
  tpp.page_properties_style AS foo4,
  tpp.page_properties_bg AS foo5 
```

这会将所有行组合到唯一的数据行中，并用逗号分隔它们 - 然后当您遍历数据集时`tpp.page_properties_data`，您可以轻松地将其[分解为一个数组。](http://php.net/manual/en/function.explode.php)

# ruby - 如何使用 google-api-ruby 客户端将 Resumable 上传到 Google Drive？

> ID：12422690
> 
> 赞同：0
> 
> 时间：2012-09-14T10:28:39.273
> 
> 标签：ruby, google-drive-api, grive

我在将大文件从我的 Linux 桌面上传到**GDrive**时遇到问题（通过使用不提供恢复甚至监控较大上传的 Grive）。

所以我想尝试使用*google-api-ruby*编写一个小脚本来完成这项工作。

由于 Google 驱动文档讨论*可恢复上传*- [https://developers.google.com/drive/manage-uploads#resumable](https://developers.google.com/drive/manage-uploads#resumable) - 我试图使用*google-api-ruby实现**可恢复上传*并找到类。*`Google::APIClient::ResumableUpload`*

 *示例对于理解这个 ruby​​ish API 的工作原理非常有用，但示例并没有提出 Resumable *uploads*的问题。

是要用于文档正在谈论的*可恢复上传*`Google::APIClient::ResumableUpload`的类，还是这个Ruby客户端提供的**conveicence类？**

 *`Google::APIClient::ResumableUpload``Google::APIClient::Result`当我调用`execute`或执行时，构造函数会消耗我得到的一个*！*在一个`Google::APIClient`实例上。

据我了解，`execute`方法仅适用于暴露给*Discovery API*（例如`drive.files.insert`）的 Google API 方法。

不幸的是，*可恢复上传*与以下 URI 相关联：

> [https://www.googleapis.com/upload/drive/v2/files?uploadType=resumable](https://www.googleapis.com/upload/drive/v2/files?uploadType=resumable)

并且似乎还没有成为*Discovery*的一部分，也没有集成到“更干净”的 URI 方案中（为什么`upload/drive`而不是`drive/upload`？）。

是否可以为此 API URI 使用`Google::APIClient` *执行*方法以便将其与`Google::APIClient::ResumableUpload`oder 结合起来我是否必须自己实现*可恢复上传*（例如通过使用`em-http-request`）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T00:18:07.460

有关基础知识，请参阅[files.insert](https://developers.google.com/drive/v2/reference/files/insert#examples)的示例。在该示例中，它使用的是多部分，但切换到可恢复是相当简单的。通常需要将uploadType 参数更改为“可恢复”。插入/更新的结果将包含对上传者的引用，您可以使用它来发送内容/检查是否完成。

```
media = Google::APIClient::UploadIO.new(file_name, mime_type)
result = client.execute(
  :api_method => drive.files.insert,
  :body_object => file,
  :media => media,
  :parameters => {
    'uploadType' => 'resumable',
    'alt' => 'json'})

# Send content
result.resumable_upload.send_all(client) 
```

在即将发布的客户端库的 beta 版本中（现在任何一天 :)，这将略有改变，以便上传工作更统一一点，而不管协议如何。在大多数情况下，调用 execute() 就足够了，它会尝试上传文件。但是现有的方法仍然有效。你也可以通过调用来恢复：

```
if !result.resumable_upload.complete?
   client.execute(result.resumable_upload) # Continue sending... 
end 
```

示例未显示错误处理，但您可以检查 result.resumable_upload.complete? 或.过期？检查状态。不完整的可恢复上传会在一段时间不活动后过期（大约一个小时左右）。如果过期，您需要从头开始重新启动。**

# ios - 将 1347616929 转换为 dd/MM/yyyy hh:mm:ss 格式

> ID：12422693
> 
> 赞同：0
> 
> 时间：2012-09-14T10:28:47.240
> 
> 标签：ios, cocoa-touch, datetime

我有一个以毫秒为单位的日期时间，例如 1347616929，我想将其转换为“dd/MM/yyyy hh:mm:ss”格式的日期和时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T11:00:23.877

首先，您必须通过将毫秒除以 1000 将毫秒转换为秒。

```
 NSTimeInterval timeInSecond = 1347616929/1000;
   NSDate *date = [NSDate dateWithTimeIntervalSince1970:timeInSecond];
   NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
   [formatter setDateFormat:@"dd/MM/yyyy HH:mm:ss"];
   NSString *formattedDate=[formatter stringFromDate:date];
   NSLog(@"Formatted Date : %@",formattedDate); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T10:59:33.860

如果它真的是毫秒，你可以使用类似的东西；

```
NSTimeInterval timeInterval = 1347616929/1000;
NSDate *date = [NSDate dateWithTimeIntervalSince1970:timeInterval]; 
```

如果你想保持毫秒，你还必须向`1347616929%1000`NSDate 添加毫秒。

偏移量看起来确实像秒，这意味着您可以立即将其用作秒；

```
NSDate *date = [NSDate dateWithTimeIntervalSince1970:1347616929]; 
```

转换后，您可以使用普通的 NSDateFormatter 函数对其进行格式化，以根据需要对其进行格式化；

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"dd'/'MM'/'yyyy' 'hh':'mm':'ss'.'SSS"];
NSString *formattedDateString = [dateFormatter stringFromDate:date]; 
```

# windows-phone-7 - 如何将datagrid控件添加到wp7

> ID：12422701
> 
> 赞同：1
> 
> 时间：2012-09-14T10:29:13.637
> 
> 标签：windows-phone-7

我正在使用 Visual Studio 2010 Express，但我不知道如何将 Datagrid 控件添加到我的项目中。

当我尝试将 PresentationCore.dll 添加到我的应用程序时，它会引发此异常：

```
Type Universe Cannot Resolve Assembly:system.xaml,version=4.0.0.0,culture=neutral,publicKeyToken=b77a5c561934e089 
```

有人可以帮我这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:56:51.383

基本 Windows Phone SDK 中没有可用的 Datagrid 控件。您必须为此找到第 3 方控件。

另外，如果我是正确的，那是一个 WPF 程序集，因此您将无法将它添加到 Silverlight/Windows Phone 项目！

# android - SAXparser 的问题

> ID：12422703
> 
> 赞同：0
> 
> 时间：2012-09-14T10:29:18.800
> 
> 标签：android, xml, sax, saxparser, illegalargumentexception

我已经在我的应用程序中实现了一个 SAXparser，它以前运行良好，但是我在处理新的 XML 文档时遇到了问题。

这是我的解析器

```
public List<Article> getLatestArticles(String feedUrl) {
URL url = null;
    try {

        SAXParserFactory spf = SAXParserFactory.newInstance();
        SAXParser sp = spf.newSAXParser();
        XMLReader xr = sp.getXMLReader();

        url = new URL(feedUrl);

        xr.setContentHandler(this);
        xr.parse(new InputSource(url.openStream()));

    } catch (IOException e) {
        Log.e("RSS Handler IO", e.getMessage() + " >> " + e.toString());
    } catch (SAXException e) {
        Log.e("RSS Handler SAX", e.toString());
    } catch (ParserConfigurationException e) {
        Log.e("RSS Handler Parser Config", e.toString());
    }
    catch (java.lang.IllegalArgumentException e){
        Log.e("RSS Handler lang", e.getMessage() + " >> " + e.toString());
    }

    return articleList;
} 
```

解析器启动正常，但随后出现`java.lang.IllegalArgumentException`错误。我相信这可能是由于我的 xml 提要中有一个没有价值的元素，它看起来像这样`<Description/>`。

任何有关如何解决此问题的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:26:54.977

如果`</Description>`是一个自闭合标签（即它没有开始`<Description>`标签并且没有文本值）那么这个语法是完全正确的。

如果不查看回调方法（例如 startElement 方法），很难准确判断是什么导致了错误，但是您可以检查一个主要问题

`illegalArguementException`如果 InputStream 为空，SAX 解析方法将抛出一个。检查进入 SAX 解析器的值可能是值得的。

您可以使用以下代码检查输入流中的空值。

```
InputStreamReader reader = new InputStreamReader(url.openStream());

if (!reader.ready()) {
    System.out.println("error");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:10:45.087

`<Description/>`是 SAXParser 的 xml 构造问题。看看结构。

理想情况下，它应该`</Description>`作为结束标签。

对于自闭合标签，SAXParser 将假定它为闭合标签。

因此，`startElement`您将收到来自 的电话，而不是您`endElement`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T07:34:22.080

连接可能在所有数据下载之前关闭。尝试使用 BufferedInputStream 看看是否有帮助：

```
BufferedInputStream _url_ = new BufferedInputStream(new URL(feedUrl).openStream());

...

BufferedReader isr = new BufferedReader(new InputStreamReader(_url_));
InputSource is = new InputSource(isr);
xr.parse(is); 
```

# javascript - Knockoutjs 跟踪 ajax 调用后的变化

> ID：12422708
> 
> 赞同：0
> 
> 时间：2012-09-14T10:29:35.600
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin, kolite

在此处查看 JsFiddle [http://jsfiddle.net/WtgbV/2/](http://jsfiddle.net/WtgbV/2/)

换句话说：我有一些 ajax 调用，并且在服务器的响应中我得到了一些项目数组（淘汰视图模型中的项目）

我需要知道`name`元素中的属性已更改为`id==2`etc 以在服务器上自动保存更改（通过 POST 请求）

`Items`跟踪数组 中每个元素的变化的最简单/最简单的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T16:23:20.793

我与人共同编写了一个名为 DirtyFlag 的组件，用于检测 Knockout observables（或其中一组）的变化。你可以从我的名为 KoLite 的库中获取，你可以从 NuGet 或 GitHub 获取。

[https://github.com/CodeSeven/KoLite](https://github.com/CodeSeven/KoLite)

[https://nuget.org/packages/KoLite](https://nuget.org/packages/KoLite)

**脏标志**

```
// Your model
var Person = function () {
    var self = this;
    self.id = ko.observable();
    self.firstName = ko.observable().extend({ required: true });
    self.lastName = ko.observable().extend({ required: true });
    self.dirtyFlag = new ko.DirtyFlag([self.firstName,self.lastName]);
    return self;
}; 
```

将这些挂钩到您的视图模型中以检测是否有更改...

```
//Property on your view model. myPerson is an instance of Person.
//Did it Change?
isDirty = ko.computed(function () {
    return myPerson().dirtyFlag().isDirty();
}), 
```

然后重新同步更改...

```
//Resync Changes
dirtyFlag().reset(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:13:26.757

Knockout 有一个内置的 PubSub 系统（由他们的 observables 和其他核心元素使用）。

您可以通过扩展每个属性以在编辑后发布有关特定主题的事件来利用此系统。

然后，您需要订阅此主题，以便跟踪数据的更改。

看看[这个优秀的帖子](http://www.knockmeout.net/2012/05/using-ko-native-pubsub.html)

您可以通过提供自己的映射轻松实现此目的。以下是一个非常基本的示例，只是为了向您展示 PubSub 系统可以为您做什么。[见例子](http://jsfiddle.net/WtgbV/6/)。

如果我可以给你一个提示，最好不要保存每个属性，而是检测更改并在一段时间后自动保存整个数组。

因此，每个值都会在主题上发布一个“更改事件”，并且每次您收到有关主题的消息时，timeOut 都会被重置。超时到期后，您可以在 BE 中保存更改。

# asp.net-mvc - 在 Orchard CMS 中管理大量内容项

> ID：12422710
> 
> 赞同：1
> 
> 时间：2012-09-14T10:29:36.303
> 
> 标签：asp.net-mvc, orchardcms

我们正在审查 Orchard CMS 作为新项目的可能 CMS。我们需要创建的站点可能有数百个页面，并且页面层次结构有几个层次。仪表板中所有内容项的平面列表没有任何类型的树结构或其他方式来允许轻松导航和管理大量内容，这似乎会带来严重的问题。

我看到它具有投影和查询的概念，并且可以通过投影过滤内容项，但这是帮助内容编辑器导航其内容并管理层次结构中的位置的唯一方法吗？

是否有任何模块或策略可以帮助解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T16:09:40.390

还有分类法（Contrib.Taxonomies），您可以启用管理员搜索，以便更容易从内容屏幕中找到您的内容项。这也是可插入的，您可以轻松扩展这些屏幕以设置您自己的过滤器和导航。

# facebook-graph-api - 如何获取用户兴趣？

> ID：12422714
> 
> 赞同：6
> 
> 时间：2012-09-14T10:29:52.330
> 
> 标签：facebook-graph-api, facebook-fql

这不是[我如何通过 facebook api 获得朋友的兴趣？](https://stackoverflow.com/questions/6587373/how-can-i-get-the-interests-of-my-friend-through-facebook-api). `user_interests`权限（访问`/me/interests`）是无用的（如果不弃用）Facebook 功能几乎不会返回任何数据。

相反，我指的是 Facebook 在此页面上汇总的数据：

![在此处输入图像描述](../Images/847aba7f6834284c060dcff543cf68ac.png)

这些都是按“音乐”、“书籍”、“电视节目”等类别分组的用户点赞。一般可以通过 检索用户点赞`/me/likes`。但是，后一个查询返回了一个相当[生动的 category 数组](https://stackoverflow.com/a/9845336/368691)。

有没有办法像 Facebook 一样将用户喜欢分类到相同的通用类别中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T10:39:45.053

[https://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/)：

> User 对象具有以下*连接*：
> 
> 书籍：用户个人资料中列出的书籍。
> 
> 游戏：用户添加到其个人资料的艺术和娱乐部分的游戏。
> 
> 电影：用户个人资料中列出的电影。
> 
> 音乐：用户个人资料中列出的音乐。
> 
> 电视：用户资料中列出的电视。

* * *

但是，这些*字段* `favorite_athletes`和`favorite_teams`已弃用。不确定，是否会有任何替代上述连接的类似物——或者用户是否应该在未来通常“喜欢”运动员/球队的粉丝页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:31:56.603

我解决这个问题的方法是在我的应用程序中处理 API 数据，如下所示：

```
'Books' => array('Fictional Character', 'Writer', 'Book', 'Author', 'Book Store', 'Library', 'Magazine'),
'Films' => array('Actor/Director', 'Movie', 'Producer', 'Studio', 'Movie Theater', 'TV/Movie Award', 'Fictional Character', 'Movies/Music'),
[..] 
```

例如，如果用户喜欢“作家”或“书籍”，我将喜欢的内容分配给“书籍”类别。

但是，此解决方案并不理想，因为 Facebook 可能会更改类别名称、添加新名称等。

# django - 使用 mod_wsgi 和 virtualenv 部署 Django 项目

> ID：12422715
> 
> 赞同：1
> 
> 时间：2012-09-14T10:29:52.950
> 
> 标签：django, mod-wsgi, virtualenv

尝试使用 mod_wsgi 和 virtualenv 部署 Django 1.4 项目时，我遇到了 500。Apache error_log 显示：

```
mod_wsgi (pid=30452): Exception occurred processing WSGI script '/path/to/project/site-packages/projectapp/wsgi.py'.
[...] Traceback (most recent call last):
[...]   File "/path/to/project/env/myenv/lib/python2.6/site-packages/django/core/handlers/wsgi.py", line 219, in __call__
[...]     self.load_middleware()
[...]   File "/path/to/project/env/myenv/lib/python2.6/site-packages/django/core/handlers/base.py", line 47, in load_middleware
[...]     raise exceptions.ImproperlyConfigured('Error importing middleware %s: "%s"' % (mw_module, e))
[...] ImproperlyConfigured: Error importing middleware projectapp.content.middleware: "cannot import name SomeModel" 
```

从错误消息中，我预计这是某种路径问题。但是，当从 Django 设置中删除有问题的中间件时，站点启动正常，并且在这种情况下还会加载从`projectapp.content`,加载的其他模块`SomeModel`，否则整个站点将无法运行。

引发的导入错误并非直接来自中间件，因为它不导入模型。`SomeModel`在一个单独的应用程序中定义，该应用程序实际上已检出到 virtualenv 的 src 目录中。但包含此应用程序的目录也在路径中。

我正在使用的 wsgi.py 文件：

```
import os
import sys

sys.stdout = sys.stderr

sys.path.insert(0, '/path/to/project/env/myenv/lib/python2.6/site-packages/')
# The module inside the following directory
# defines SomeModel from the error message
sys.path.insert(0, '/path/to/project/env/myenv/src/some-app/')
sys.path.insert(0, '/path/to/project/site-packages/')

import django.core.handlers.wsgi

os.environ['DJANGO_SETTINGS_MODULE'] = 'projectapp.settings'
application = django.core.handlers.wsgi.WSGIHandler() 
```

`sys.path`插入模块路径后的打印按预期顺序显示所有内容，`/path/to/project/site-packages/`首先列出，`/path/to/project/env/myenv/src/some-app/`（定义`SomeModel`）第二。

根据 mod_wsgi 文档中的示例，我还尝试了不同的变体：

```
import os
import sys
import site

ALLDIRS = [
    '/path/to/project/site-packages/',
    '/path/to/project/env/myenv/lib/python2.6/site-packages/',
    '/path/to/project/env/myenv/src/some-app/',
]

# Remember original sys.path
prev_sys_path = list(sys.path)

sys.stdout = sys.stderr

# Add each new site-packages directory
for directory in ALLDIRS:
    site.addsitedir(directory)

# Reorder sys.path so new directories are at the front
new_sys_path = []
for item in list(sys.path):
    if item not in prev_sys_path:
        new_sys_path.append(item)
        sys.path.remove(item)
sys.path[:0] = new_sys_path

#activate_this = '/path/to/project/env/myenv/bin/activate_this.py'
#execfile(activate_this, dict(__file__=activate_this))

import django.core.handlers.wsgi

os.environ['DJANGO_SETTINGS_MODULE'] = 'projectapp.settings'
application = django.core.handlers.wsgi.WSGIHandler() 
```

Apache 记录的错误是完全相同的。

我必须补充一点，当我在同一台机器上运行开发服务器时，中间件加载得很好，所以我不知道出了什么问题。有没有办法从 mod_wsgi 获得更好的回溯？

**编辑：**

忘记提及我在守护进程模式下使用 mod_wsgi 。以下是我的虚拟主机配置中的相关部分：

```
<VirtualHost x.x.x.x:80>
    WSGIDaemonProcess foo user=foo threads=10 umask=0002
    WSGIProcessGroup foo
    WSGIScriptAlias / /path/to/project/site-packages/projectapp/wsgi.py
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:31:35.877

好的，经过数小时的调试，结果证明这是由中间件引起的竞争条件。我使用的中间件与`FlatpageFallbackMiddleware`来自 Django contrib 的中间件类似，实际上是视图的导入导致了问题。

```
from projectapp.content.views import generic_content_detail
class ContentFallbackMiddleware(object):
    def process_response(self, request, response):
        [...] 
```

在方法中移动 import 语句`process_response`为我解决了这个问题：

```
class ContentFallbackMiddleware(object):
    def process_response(self, request, response):
        from projectapp.content.views import generic_content_detail
        [...] 
```

# apache-flex - Get mouse position outside Flex Panel

> ID：12422718
> 
> 赞同：0
> 
> 时间：2012-09-14T10:29:56.320
> 
> 标签：apache-flex

I am creating a Flex Panel, which has an image on it. I have set the "buttonMode" and "useHandCursor" property of the image to true. So, whenever I do a mouse over, the cursor changes into a hand tool. I am able to set the mouse-down, mouse-up, mouse-move events on it. But, I see that the mouse-move events only get triggered when I move the mouse inside my Flex panel. I also want to capture the mouse-move event when user moves the mouse outside the Flex panel.

For eg, when user clicks on the image in Flex panel and then drags the mouse(while mouse down) outside the Flex panel, I want to get the current position of mouse while user is dragging the mouse.

Is there any way to get the mouse position outside the Flex panel??

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:21:53.870

The solution for this is "Mouse-Move" event only. I need to do the following: 1\. Capture mouse-down event on the image. 2\. Register for mouse-move and mouse-up event inside the mouse-down event. 3\. Inside the mouse-move event get the position of cursor. 4\. Inside the mouse-up event unregister mouse-move event.

# delphi-xe2 - 是否可以将 TCombo 编辑插入符号“更宽”或“加粗”？

> ID：12422720
> 
> 赞同：2
> 
> 时间：2012-09-14T10:30:01.317
> 
> 标签：delphi-xe2, caret, tcombobox

我有一种模式用于`TComboBox.SelStart`指示编辑文本字符串的进度。在这种模式下，我想对编辑插入符号进行某种更改，例如将其扩大到 2 个像素或以某种方式将其“加粗”以指示此模式并使其吸引更多注意力。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T01:45:48.517

是的，正如 Alex 在他的评论中提到的，这可以使用 API 调用来完成。例子：

```
procedure SetComboCaretWidth(ComboBox: TComboBox; Multiplier: Integer);
var
  EditWnd: HWND;
  EditRect: TRect;
begin
  ComboBox.SetFocus;
  ComboBox.SelStart := -1;
  Assert(ComboBox.Style = csDropDown);

  EditWnd := GetWindow(ComboBox.Handle, GW_CHILD);
  SendMessage(EditWnd, EM_GETRECT, 0, LPARAM(@EditRect));
  CreateCaret(EditWnd, 0,
              GetSystemMetrics(SM_CXBORDER) * Multiplier, EditRect.Height);
  ShowCaret(EditWnd);
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  SetComboCaretWidth(ComboBox1, 4); // bold caret
end;

procedure TForm1.Button2Click(Sender: TObject);
begin
  SetComboCaretWidth(ComboBox1, 1); // default caret
end; 
```

# c# - Wceload.exe 在 WinCE 上无限运行

> ID：12422724
> 
> 赞同：0
> 
> 时间：2012-09-14T10:30:22.347
> 
> 标签：c#, .net, compact-framework, windows-ce

我正在使用 WceLoad.Exe 在 Windows CE 6.0 设备上部署我的应用程序。但是，我注意到有时 Wceload.Exe 没有从 Cab 提取过程中返回。因此，等待 WceLoad.exe 退出的其他进程无法继续执行。我在提取过程中将以下参数传递给 WceLoad.exe。

WceLoad.exe /noui /delete 0 /silent \Hard Disk\MyFile.cab

有没有其他解决方案？

# javascript - Android平台上的QWebView HTML5 GeoLocation

> ID：12422726
> 
> 赞同：11
> 
> 时间：2012-09-14T10:30:45.617
> 
> 标签：javascript, android, c++, html, qt4

尝试在使用 Necessitas 的 QWebView 端口查看的 HTML5 网页中获取 GPS 坐标。但是它总是以不支持响应。

```
function load( )
{
   if ( navigator.geolocation )
   {
      alert( "Supported." );
   }
   else
   {
      alert( "Not Supported!" );
   }
} 
```

我已更改 QWebPage 以允许权限：

```
BrowserWebPage::BrowserWebPage( QObject* parent ) : QWebPage( parent )
{
    connect( this,
             SIGNAL( featurePermissionRequested( QWebFrame*, QWebPage::Feature ) ),
             SLOT( permissionRequested( QWebFrame*, QWebPage::Feature ) ) );
}

void BrowserWebPage::permissionRequested( QWebFrame* frame, QWebPage::Feature feature )
{
    if ( feature == Geolocation )
    {
        setFeaturePermission( frame, feature, PermissionGrantedByUser );
    }
    else //denied
    {
        setFeaturePermission( frame, feature, PermissionDeniedByUser );
    }
} 
```

并设置以下权限：

android.permission.INTERNET

android.permission.ACCESS_FINE_LOCATION

android.permission.ACCESS_COARSE_LOCATION

**编辑**

根据此页面，GeoLocation API 存在于 QtWebKit 构建中。

[http://trac.webkit.org/wiki/QtWebKitFeatures22](http://trac.webkit.org/wiki/QtWebKitFeatures22)

**细节**

电话：Galaxy Nexus

平台：Android 4.1.1 (SDK 14)

框架：Qt 4.8.0 for Android armv7a

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:41:14.060

我认为您将不得不设置粗略的位置和互联网权限，因为如果我正确的话，精细的位置仅用于 gps。在任何情况下，如果 gps 不可用，则两者兼有是好的原因，将使用您的 Internet 连接上的位置。

```
 <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
   <uses-permission android:name="android.permission.INTERNET" /> 
```

我真的没有使用 qtwebkit 的经验，但这是我可以告诉你的基础知识。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T03:34:18.430

我只是尝试了一些非常相似的东西，但无法让 navigator.geolocation 工作，所以我实现了一个自己的地理定位类并将其添加到框架中。

mygeolocation 对象实现了一个信号和一个槽

```
signal:
void updatepos(float lon, float lat); // called from get location when location is found

slot:
void getlocation(); // gets location and calls updatepos 
```

页面加载后：

```
frame->addToJavaScriptWindowObject(QString("geo"), geo);
frame->evaluateJavaScript("init()"); 
```

geo 是我的地理位置对象的实例

在javascript中，我将我的地理对象信号更新连接到一个函数，

```
function update(lon,lat)
{
// do stuff with lon, lat
}

function init(){
   geo.connect(update); // connect to QT code
   geo.getlocation(); // ask for update from QT code
} 
```

这是位伪编码 - 我目前没有可用的原始代码。

# php - 网站在 IE 上显示空白屏幕，但在 Firefox 或 chrome 中工作正常

> ID：12422728
> 
> 赞同：0
> 
> 时间：2012-09-14T10:30:57.160
> 
> 标签：php, internet-explorer, yii

我们使用 yii 开发了网站 [http://www.2vin.com](http://www.2vin.com)该网站在 Firefox 和 chrome 中运行良好，但在 IE 中显示白屏。我们已经修复了一些 html 错误，但它仍然在 yii 站点名称中显示空白屏幕： [http](http://www.2vin.com) ://www.2vin.com 使用的技术：yii in php

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T10:40:35.180

该问题是由`<! [endif]-->`. `head`删除空格，将其更改为`<![endif]-->`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T22:41:26.510

如果你打开开发者工具 (F12) 并且你看到“inline style{display:none;}”

在您的 css 文件中添加 css 样式...

```
body{display: block !important;} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-07-10T13:44:29.683

我在 IE 9 上遇到过这个问题。

我在几台机器上解决这个问题的方法是删除字体“Helvetica”。

希望这可以帮助。

Ĵ

# jquery - 什么是 $.ajax 数据：用于？

> ID：12422731
> 
> 赞同：0
> 
> 时间：2012-09-14T10:31:07.277
> 
> 标签：jquery

我删除`var string`了 `$.ajax data:`行，但我的脚本仍然运行良好，那么这是为了什么呢？

```
 $(function() {
    $(".delete").click(function() {
    $('#load').fadeIn();
    var commentContainer = $(this).parent();
    var id = $(this).attr("id");

var string = 'id='+ id ;

$.ajax({
   type: "POST",
   url: "delete.php",
   data: string,
   cache: false,
   success: function(){
    commentContainer.slideUp('slow', function() {$(this).remove();});
    $('#load').fadeOut();
  }

 });

return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:33:18.273

它用于传递参数。

如果在服务器端，`delete.php`只是`delete.php?id={id}`做同样的事情，那么它是一样的。

但在正常情况下它不应该是相同的，它是你的代码，在你的控制之下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:33:30.947

函数中的`data`参数`ajax()`是放置要与请求一起发送到服务器的数据的位置。

> **数据**（对象，字符串）
> 
> 要发送到服务器的数据。如果还不是字符串，则将其转换为查询字符串。它附加到 GET 请求的 url。请参阅 processData 选项以防止此自动处理。对象必须是键/值对...

在您的特定情况下，从我在您发布的上述代码中可以看到。您的`delete.php`文件将接收在 ajax 调用中发送的数据，您将能够`$_POST`在 PHP 的变量中看到它。

参考 - [jQuery`ajax()`](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T10:34:10.960

单击a 时`class="delete"`，您将获取该`id`元素的 并将其发送到`delete.php`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T10:34:27.720

它包含服务器的查询字符串参数。在这种情况下，必须删除的元素的 ID。

然而，由于服务器似乎没有提供其他状态，而是 HTTP 200，成功处理程序被触发并且元素淡出或类似的东西，所以似乎元素已被删除，但如果你刷新它仍然存在。

# django - Django：如何根据自动增量 id 设置新创建记录的名称字段？

> ID：12422742
> 
> 赞同：1
> 
> 时间：2012-09-14T10:31:58.070
> 
> 标签：django, django-models

我是 django 的新手（也是 stackoverflow），但我尝试根据新创建的记录 id 设置模型的名称字段。是否有类似 after_save 回调的东西，我可以在其中检查这是否是新创建的记录，然后根据新 ID 设置名称字段？请注意：我想存储这个值，而不仅仅是使用 display_name 或类似的东西来显示它。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T10:38:20.643

您需要像这样覆盖模型的保存方法：

```
class YourModel(model):
    ....
    def save(self,*args,**kwargs):
        if not self.id:
            update_name=True
        else:
            update_name=False
        super(YourModel,self).save(*args,**kwargs)
        if update_name:
            self.name='whatever %s' %self.id
            super(YourModel,self).save(*args,**kwargs) 
```

# c# - 在程序集中搜索类型

> ID：12422744
> 
> 赞同：6
> 
> 时间：2012-09-14T10:32:01.730
> 
> 标签：c#, .net, reflection, appdomain

我遇到了代码`Type.GetType(myTypeName)`返回的问题，`null`因为该类型的程序集不是当前正在执行的程序集。

我为这个问题找到的解决方案是下一个：

```
var assemblies = AppDomain.CurrentDomain.GetAssemblies();
Type myType = assemblies.SelectMany(a => a.GetTypes())
                        .Single(t => t.FullName == myTypeName); 
```

问题是此代码的第一次运行会导致异常`"Sequence contains no matching element"`。当我再次调用这部分代码时 - 一切正常并且加载了所需的类型。

谁能解释这种行为？为什么在第一次调用的范围内没有找到需要的程序集/类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T11:07:54.367

您面临的问题是由类的[GetAssemblies](http://msdn.microsoft.com/en-us/library/system.appdomain.getassemblies.aspx)方法的设计引起的`AppDomain`- 根据文档，此方法：

> 获取已加载到此应用程序域的执行上下文中的程序集。

因此，当您的程序类型第一次找不到时 - 它的程序集显然还没有被应用程序加载。之后 - 当使用了包含相关类型的程序集的某些功能时 - 程序集已经加载，并且相同的代码已经可以找到丢失的类型。

请尝试直接加载程序集。而不是使用：

```
var assemblies = AppDomain.CurrentDomain.GetAssemblies(); 
```

您可以使用：

```
List<Assembly> assemblies = Assembly.GetEntryAssembly().GetReferencedAssemblies().Select(assembly => Assembly.LoadFrom(assembly.Name)).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T10:34:25.510

该类型可能位于尚未加载的程序集中。稍后在您的程序中它是。如果您查看输出窗口，这应该可以让您了解何时加载程序集。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-25T00:24:30.887

另一个[答案](https://stackoverflow.com/a/39489661/147511)显示了获取（在运行时）可能未加载的`Type`定义的最佳方法：`Assembly`

```
var T1 = Type.GetType("System.Web.Configuration.IAssemblyCache, " + 
                      "System.Web, " + 
                      "Version=4.0.0.0, " + 
                      "Culture=neutral, " + 
                      "PublicKeyToken=b03f5f7f11d50a3a"); 
```

如您所见，不幸的是，该方法要求您提供完整的[AssemblyQualifiedName](https://msdn.microsoft.com/en-us/library/system.type.assemblyqualifiedname(v=vs.110).aspx)，`Type`并且不适用于我尝试过的任何[程序集名称的](https://msdn.microsoft.com/en-us/library/system.reflection.assemblyname(v=vs.110).aspx)[缩写形式。](https://msdn.microsoft.com/en-us/library/yfsftwz6(v=vs.110).aspx#Anchor_2)这在某种程度上违背了我们在这里的主要目的。如果您知道有关程序集的很多细节，那么自己加载它就不会那么困难了：

```
var T2 = Assembly.Load("System.Web, " + 
                       "Version=4.0.0.0, " + 
                       "Culture=neutral, " + 
                       "PublicKeyToken=b03f5f7f11d50a3a")
                 .GetType("System.Web.Configuration.IAssemblyCache"); 
```

尽管这两个示例看起来很相似，但它们执行的代码路径却截然不同；请注意，例如，后一个版本调用*实例*重载`Assembly.GetType`与*静态*调用`Type.GetType`。因此，第二个版本可能更快或更高效。但是，无论哪种方式，您似乎最终都会使用以下 CLR 内部方法，并且第二个参数设置为`false`，这就是为什么*这两种方法*都不会麻烦地代表您搜索所需的程序集。

> [System.Runtime.Remoting.RemotingServices]
> 私有静态 RuntimeType **LoadClrTypeWithPartialBindFallback** (
>                   String typeName,
>                   bool partialFallback);

从这些不便中向前迈出的一小步是自己调用此 CLR 方法，但`partialFallback`参数设置为**true**。在这种模式下，函数将接受 的截断版本，`AssemblyQualifiedName`并根据需要*定位并加载*相关程序集：

```
static Func<String, bool, TypeInfo> LoadClrTypeWithPartialBindFallback =
    typeof(RemotingServices)
    .GetMethod("LoadClrTypeWithPartialBindFallback", (BindingFlags)0x28)
    .CreateDelegate(typeof(Func<String, bool, TypeInfo>))
    as Func<String, bool, TypeInfo>;

// ...

var T3 = LoadClrTypeWithPartialBindFallback(
            "System.Web.Configuration.IAssemblyCache, System.Web",
            true);    //  <-- enables searching for the assembly 
```

这如图所示，并且还继续支持`AssemblyQualifiedName`在前面的示例中指定完整。这是一个小的改进，但它仍然不是完全不合格的命名空间搜索，因为您仍然必须指定程序集的短名称，即使它可能是从出现在类型名称本身中的命名空间推导出来的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T11:06:36.870

如果你排除 mscorlib 程序集？，你可以试试这个：

```
 var assemblies = AppDomain.CurrentDomain.GetAssemblies().Where(asb=>!asb.FullName.StartsWith("mscorlib")).ToList();

Type myType = assemblies.SelectMany(a => a.GetTypes())
                        .Single(t => t.FullName == myTypeName); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-14T11:47:33.323

顺便说一句，如果您*确实*知道`FullName`包含类型的程序集（或包含类型的程序集`TypeForwardedToAttribute`），您*可以*使用 `Type.GetType`. 具体来说，`Type.GetType(Assembly.CreateQualifiedName(assembly.FullName, myTypeName))`它看起来像：

```
Type.GetType("Some.Complete.Namespace.myTypeName, Some.Assembly.Name, Version=1.2.3.4, Culture=neutral, PublicKeyToken=ffffffffffffffff"); 
```

如果尚未加载程序集，这*将加载程序集，假设框架可以解析程序集的位置。*

这是我确认括号注释的示例 LinqPad 查询`TypeForwardedToAttribute`：

```
var u = (from a in AppDomain.CurrentDomain.GetAssemblies()
         let t = a.GetType("System.Lazy`2")
         where t != null
         select t).FirstOrDefault();
(u?.AssemblyQualifiedName).Dump();
u = Type.GetType("System.Lazy`2, System.Runtime, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a");
(u?.AssemblyQualifiedName).Dump(); 
```

输出：

> *null*
> System.Lazy`2，System.ComponentModel.Composition，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089

# google-app-engine - GAE 上自定义域的 SSL 成本是多少？

> ID：12422750
> 
> 赞同：26
> 
> 时间：2012-09-14T10:32:37.863
> 
> 标签：google-app-engine

Google 是否必须花费大量的基础设施成本来支持自定义域上的 SSL？它是否必须购买 IPv4 地址空间或其他东西？我对这项技术不是很熟悉，也不明白为什么 SNI/VIP 每年要花费 120 美元/1200 美元。

这篇文章[http://www.imperialviolet.org/2010/06/25/overclocking-ssl.html](http://www.imperialviolet.org/2010/06/25/overclocking-ssl.html)声称这不是 SSL 的 CPU 或网络成本，我相信您必须提供自己的 SSL 证书。那么为什么为 GAE 提供 HTTPS 支持如此昂贵呢？

编辑：这个问题似乎很受欢迎，但还没有一个令人满意的答案。我对在自定义域上提供 SLL 背后的技术感兴趣，我不认为答案是“谷歌喜欢钱”，因为他们在许多产品上大力推动 SSL，以及 SPDY 内置的加密。

进一步编辑：一个相关/扩展的问题是“为什么自定义域上的 SSL 成本不随应用程序的大小而扩展？”。所有其他成本（带宽、实例数量、数据存储等）都会随着您的增长而扩展。CD 上的 SSL 都是预先设置的，对于小型应用程序来说非常昂贵，尽管正如人们指出的那样，它已修复，因此对于大型应用程序来说非常划算。有谁知道他们为什么选择这样收费？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T11:37:41.120

我们在以下网址公布了 SSL VIP 的新定价：http: [//googleappengine.blogspot.jp/2012/09/announcing-new-pricing-for-virtual-ip.html](http://googleappengine.blogspot.jp/2012/09/announcing-new-pricing-for-virtual-ip.html)

现在，基于 VIP 的 SSL 每月只需 39 美元。

我们还在帖子中说以下内容：

> Google App Engine SSL for Custom Domains 通过提供全球分布式 SSL 端点和内置负载平衡，超越了 SSL 的基础知识。与一般的 App Engine 一样，不需要持续的系统管理和维护。

Google App Engine SSL 不仅仅是一个证书存储，它还提供分布式端点和内置负载平衡。换句话说，它不是一个使用您的证书运行 apache 的单一服务器。

希望这个答案有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T13:52:46.163

I think that Google has had to make significant infrastructure changes in order to support SSL on GAE. This has been a long standing feature request so I for one am happy that it is finally here.

SSL was always supported on *.appspot.com URLs. Just not on your own domain name. The reason is not the 'computational' cost but the fact that for SSL to work the server that handles the requests for your app will need that SSL certificate.

So how does that scale when you've got a million of those machines? Not to mention the fact that you need to distribute the certificate everywhere. Then there is the problem that its not just your SSL certificate but one certificate per app that wants SSL and the fact that they will need to allow app owners to purchase, upload and replace the certificate.

The SNI/TLS option is cheaper but requires OS's and Browsers etc. to support it because this solution uses an extension called Server Name Indication (SNI) that allows Google to 'select' the SSL certificate dynamically based on that 'server name'. Older implementations of SSL will probably not support this.

The VIP option is more expensive because it assigns a dedicated IP address to your application. This solution does not require SNI. So I guess that if you want to be absolutely sure SSL will work everywhere, then go for VIP.

The cost of any feature is just another thing to consider in your business plan. I am not convinced that the amount you are referring to is going to be a show stopper for those that would really benefit from the feature.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T23:01:42.120

最重要的是，Google 为自定义域提供了两种 SSL。

1.  **服务器名称指示 (SNI)**。这是 SSL 的扩展，其中多个域可以共享相同的 IP，但旧的浏览器或 windows XP 不支持它**（不推荐用于商业应用程序）**但是这个选项更便宜。
2.  **虚拟 IP (VIP)。**SSL证书基本上将一个域链接到一个IP，两个域不能有相同的IP，所以**是的，谷歌必须购买一个IP范围来支持这个功能。**

但价格上涨的更重要原因是自定义域中的 SSL 是商业应用程序的“必须”，因此他们利用了这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T19:59:35.173

这只是一项业务：云托管的酷炫可选功能总是很昂贵。

和

*   是的，不包括证书价格
*   我不确定 Google Frontend（他们的网络服务器）是如何工作的，以及它在 CPU/内存证书使用方面的成本如何，尤其是作为高负载解决方案。
*   他们花了一些时间来实现该功能。时间就是金钱，所以也许他们只是想拿回他们的钱。

# objective-c - UITableView 的重用单元格没有被绘制

> ID：12422752
> 
> 赞同：0
> 
> 时间：2012-09-14T10:32:52.027
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

我创建了一个具有分组样式的表格视图。我已将此表添加到 UIScrollView 的子视图中。我根据表格的行数计算了表格的大小。所以tableView没有滚动。我将能够看到所有的细胞。

表格第一次正常工作并显示所有单元格。但是我的问题是每当我导航到下一页并返回并重新加载该表时，它只会渲染和重绘已分配的单元格。被重用的单元格不会被重绘。tableView:cellForRowAtIndexPath: 也没有被这些单元格调用。

我怀疑由于 tableview 的滚动被禁用，因此重用单元格的 cellForRowAtIndexPath 方法没有被调用，因此它们没有被渲染。

我通过以下方式创建了 tableView

```
 m_TravellerDetailTable = [[UITableView alloc] initWithFrame: CGRectMake( 2.0f, 0, 315.0f, 370 ) style: UITableViewStyleGrouped ];
 float height = (tableViewCellHeight * [travellersArray count]);
 m_TravellerDetailTable.frame = CGRectMake(2, 0, 315, height);
 [m_TravellerDetailTable setBounces: NO];
 [m_TravellerDetailTable setScrollEnabled: NO];
 [m_BaseScrollView addSubview: m_TravellerDetailTable]; 
```

UITableViewDelegate 方法

```
 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
   {
       return [travellersArray count];
   }

 -(CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
   {
       return tableViewCellHeight;
   }

   - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
  {  

     static NSString *CellIdentifier = @"Cell";
     cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
     if (cell == nil) 
     {

            cell = [[TravellerDetailCustomCellView alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
     }

     TravellerDetailCustomCellView *customCell = (TravellerDetailCustomCellView *)cell;
     [customCell.textLabel setText:[travellerInfoFromDetailForm objectForKey:@"DOB"]];
  } 
```

此快照显示渲染所有单元格的 uitableview

![带有所有单元格的 UITableView](../Images/97820e247bf03a7644dc923350228b59.png)

快照仅显示 uitableview 渲染到“成人 8”单元格。之后，表格不会呈现剩余的单元格。

![没有重用单元格的 UITableView](../Images/742b7e5558908b3531c55cd9d14f8576.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:34:38.070

它正在渲染，但是您的框架太小并且表格视图被切断。

你应该删除

```
[m_TravellerDetailTable setBounces: NO];
[m_TravellerDetailTable setScrollEnabled: NO]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:50:03.967

它是由 UIScrollView 引起的。 UIScrollView 缓存了它的子视图的绘图。我建议你不要将 UITableView 添加到 UIScrollView

# javascript - 门户网站：当地时间有多大用处？

> ID：12422764
> 
> 赞同：1
> 
> 时间：2012-09-14T10:33:25.777
> 
> 标签：javascript, date, localization

我只是在处理 javascript 本地日期/时间的网站上工作。日期/时间在数据库中存储为 UTC，并通过日期对象 (js) 计算到用户的本地时区。我看到很多网站、论坛和平台不使用这些当地时间，而是使用类似倒计时的表达方式，例如

**“1 个月前发布”、“3 小时前发布”、** ... 等等

您认为这样做而不是显示本地日期/时间有什么好处吗？对我来说，你对赞成和反对有什么论据会很有趣。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T10:39:31.003

这主要是一个可用性问题。如果您显示本地日期/时间，您的用户将面临必须弄清楚显示的时间与当前挂钟时间的关系的认知负担。

我个人认为这些相对时间指示是可以的，但是您应该尽可能将它们正确本地化。它们牵扯到一些不太为人所知的 I18N/L10N 问题，例如可替换参数和单数/复数形式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T10:44:28.560

对我来说，“1 个月前发布”比时间更详细，因为我必须计算文章的年龄。但是在某些用例中，当与同一主题的其他文章进行比较时，人们可能想知道文章的确切日期。所以它取决于文章的性质。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T10:37:59.047

对于某些类型的博客可能会很好。在评论中并不总是。有时很高兴看到准确的时间。

还要看目标用户，比如普通人喜欢，程序员根本不在意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T10:51:32.430

JavaScript 中的本地时间来自客户端的时钟。这并不一定意味着这个时间是实际的当地时间。想想一个从巴黎到纽约旅行的商人。他可能想让笔记本电脑的时钟保持巴黎时间，因为他想与家人保持联系，但在他的智能手机上，他使用纽约时间来处理业务关系。

像“3 分钟前”这样的相对时间描述对于区分新旧事件、即将发生的事件和遥远的未来事件非常有帮助。由于它们是相对的，因此它们在任何时区都有效。

# symfony - 无法在 Symfony 2.1.1 中生成引导文件

> ID：12422766
> 
> 赞同：6
> 
> 时间：2012-09-14T10:33:31.263
> 
> 标签：symfony, symfony-2.1

我有一个为 Symfony 2.0 编写的应用程序，我已经开始将它迁移到 Symfony 2.1 中。我已经使用 composer 成功安装了所有依赖项，但是脚本失败了......

```
Script Sensio\Bundle\DistributionBundle\Composer\ScriptHandler::buildBootstrap handling the post-update-cmd event terminated with an exception

  [RuntimeException]                                     
  An error occurred when generating the bootstrap file. 
```

有什么线索吗？我完全迷路了，我用谷歌搜索了它，但我只在一个论坛上找到了一个帖子，里面有和我有同样问题的人......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T09:35:40.583

问题是[手册不明确](https://github.com/symfony/symfony-standard/blob/2.1/UPGRADE.md)。它告诉你`composer.phar install`在告诉 symfony 标准文件需要被替换之前执行。

所以现在你必须更换

*   `AppKernel.php`,
*   `AppCache.php`和
*   `autoload.php`（并删除奇数文件）

`config.yml`并使用给定的提示更新您的文件。

# php - Symfony2实体选择列表设置选中对象

> ID：12422770
> 
> 赞同：1
> 
> 时间：2012-09-14T10:33:40.567
> 
> 标签：php, symfony, doctrine-orm

有两个实体，**Category**和**Device**。一个设备可以只与一个类别相关。一个类别可以与许多设备相关。

我使用以下自定义表单类型来创建和编辑设备：

```
class DeviceFormType extends AbstractType {

    public function buildForm(FormBuilder $builder, array $options) {

        $builder->add('name');
        $builder->add('category', 'entity', array(
            'class' => 'MySupportBundle:Category',
            'property' => 'name'
        ));
    }

    public function getName() {
        return 'device';
    }

    public function getDefaultOptions(array $options) {
        return array(
            'data_class' => 'My\SupportBundle\Entity\Device',
        );
    }

} 
```

所以基本上每个设备都有一个名称并分配给一个类别。这工作正常。现在，当我尝试编辑设备并更改类别时，在选择列表中未选择当前类别：

```
 public function editDeviceAction($id, Request $request) {

        $em = $this->getDoctrine()->getEntityManager();
        $device = $em->getRepository('MySupportBundle:Device')->find($id);

        $form = $this->createForm(new DeviceFormType(), $device);

        $valid = false;

        if ('POST' == $request->getMethod()) {
            $form->bindRequest($request);

            if ($form->isValid()) {
                $device = $form->getData();
                $device->setUpdatedAt(new \DateTime('now'));
                $em->flush();

                return $this->redirect($this->generateUrl('view_shop'));
            } else {
                $valid = true;
            }
        } else {
            $valid = true;
        }

        return $this->render('MySupportBundle:Shop:editDevice.html.twig', array(
                    'form' => $form->createView(),
                    'valid' => $valid,
                    'device' => $device
                ));
    } 
```

任何想法如何将类别设置为选中？

设备：

```
<entity name="My\SupportBundle\Entity\Device" table="device">   
        <id name="id" type="integer" column="id">
                <generator strategy="AUTO" />
        </id>

        <many-to-one field="category" target-entity="Category"/>

        <field name="name" column="name" type="string" length="255"/>     
</entity> 
```

类别：

```
<entity name="My\SupportBundle\Entity\Category" table="category">   
    <id name="id" type="integer" column="id">
            <generator strategy="AUTO" />
    </id>

    <one-to-many field="device" target-entity="Device" mapped-by="Device"/>

    <field name="name" column="name" type="string" length="255"/>              
</entity> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:03:36.460

嗨，我不确定，但您是否在检查一对多和多对一的关系？它们是单向的还是双向的？您可以向我们展示您的设备和类别实体类...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T11:56:32.013

您正在使用一个名为的自定义存储库方法`find()`- 取决于您如何重载它， `Category`可能尚未获取。您可以依赖默认`findOneById(int $id)`方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T18:05:35.847

最后我自己找到了解决方案。

显然在创建这样的表单视图时

```
{{ form_widget(form.type)}} 
```

和这样的表格类型

```
 $builder->add('type', 'entity', array(
        'class' => 'MyBundle:Category',
        'property' => 'name'
    )); 
```

它行不通。因为“类型”是错误的。它必须是“类别”而不是“类型”。很奇怪，但这就是问题所在；）

# xcode - 如何在 Objective-C 中显示没有天数的日期选择器视图

> ID：12422777
> 
> 赞同：0
> 
> 时间：2012-09-14T10:34:13.887
> 
> 标签：xcode, date, uipickerview, uidatepicker

是否可以在日期选择器视图中排除日期？如果是，我该怎么做？如果有办法让我只排除日期选择器中的日期，我不想创建一个年份数组。提前致谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:36:35.200

使用 UIDatePicker 是不可能的。我建议[`UIPickerView`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIPickerView_Class/Reference/UIPickerView.html)您自己继承和实现它。

# java - 签名的 Java 小程序权限

> ID：12422778
> 
> 赞同：1
> 
> 时间：2012-09-14T10:34:19.457
> 
> 标签：java, image, security, screenshot, signed-applet

> **可能重复：**
> [为嵌入在 HTML 中的 Applet 设置策略](https://stackoverflow.com/questions/5313672/setting-up-policies-for-an-applet-embedded-in-html)

我创建了一个简单的 Java 小程序来获取网站的屏幕截图。我在罐子上签名了，看来它已经过验证了。

```
 410 Fri Sep 14 13:20:34 EEST 2012 META-INF/MANIFEST.MF
         376 Fri Sep 14 13:20:36 EEST 2012 META-INF/SIGNER.SF
         830 Fri Sep 14 13:20:36 EEST 2012 META-INF/SIGNER.RSA
           0 Fri Sep 14 13:20:36 EEST 2012 META-INF/
           0 Fri Sep 14 13:20:36 EEST 2012 screencaptureapplet/
sm       615 Fri Sep 14 13:20:36 EEST 2012 screencaptureapplet/CaptureFrame$1.class
sm     17311 Fri Sep 14 13:20:36 EEST 2012 screencaptureapplet/CaptureFrame.class

  s = signature was verified
  m = entry is listed in manifest
  k = at least one certificate was found in keystore
  i = at least one certificate was found in identity scope

jar verified. 
```

但是它在我的网站上不起作用。它说：

```
access denied (java.awt.AWTPermission createRobot) 
```

尴尬的是它在我的功能的第一行失败了

```
Robot robot = new Robot(); 
```

有没有人知道解决这个问题的方法？

# ruby - Ruby 方法可见性：未定义的方法？

> ID：12422784
> 
> 赞同：0
> 
> 时间：2012-09-14T10:34:32.400
> 
> 标签：ruby, methods, visibility, nomethoderror

我还是红宝石的新手。我不明白方法的可见性。文档说，默认情况下所有方法都是公共的（除非另有定义）。所以这应该有效（但它没有，MWE）：

`modules/example.rb`：

```
class Example

  def do_stuff
    puts 'hello world'
  end

end 
```

和`testing.rb`：

```
load 'modules/example.rb'

Example.new
Example.do_stuff 
```

调用`$ ruby testing.rb` 结果

```
testing.rb:9:in `<main>': undefined method `do_stuff' for Example:Class (NoMethodError) 
```

有人可以解释为什么吗？以及如何解决我可以`do_stuff`直接调用的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T10:44:37.450

您正在定义一个实例方法，并且需要在 Example 类的实例上调用它：

```
ex_instance = Example.new
ex_instance.do_stuff 
```

如果要直接调用它，则需要将其定义为类方法：

```
class Example

  def self.do_stuff
    puts 'hello world'
  end

end 
```

那么你可以这样调用它而无需调用`Example.new`

```
Example.do_stuff 
```

# java - jsp 获取上一个表单值

> ID：12422788
> 
> 赞同：0
> 
> 时间：2012-09-14T10:34:37.913
> 
> 标签：java, jsp, servlets

我有 2 个 servlet 1 个 html 页面和 1 个 jsp 页面。现在我想将以前的表单值放入新页面。

例如。test.html 有一个输入表单，然后我在上面输入一些内容。然后，提交。output2.jsp 页面出来了。output2.jsp 与 test.html 相同，有一个输入表单。然后，我再次提交而不在 output2.jsp 中输入任何内容。它返回到 output2.jsp 页面，但现在它在输入表单中包含文本，其中文本是我在 test.html 中键入的文本。可以做到吗？

示例流程：test.html（输入内容）-> servlet1 -> output2.jsp（不输入任何内容）-> servlet2 -> output2.jsp（输入表单包含我输入的 test.html 值）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:43:19.413

这可以通过将表单值传递给 servlet1 和 servlet 将该请求转发给 ouput2.jsp 然后再次转发给 servlet2 来完成。Servlet 2 再次可以将此消息转发到 ouptut2.jsp。

但是这里有一个问题。如果您没有在 output2.jsp 中添加说明请求即将到来 servlet1 或 servlet2 的逻辑，这将进入无限循环

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T10:51:12.603

*将test.html*中输入的输入转发到*servlet1*中的***output2.jsp***，如下所示：

```
request.setAttribute("reqAttr1", typedText); 
```

在***servlet2***中，从请求中获取属性并将值设置为表单元素。

# json - MongoDB 中的 Map/Reduce 任务：嵌套对象的聚合

> ID：12422796
> 
> 赞同：3
> 
> 时间：2012-09-14T10:35:22.903
> 
> 标签：json, mongodb, mapreduce

我有一个集合，可以说以下内容：

```
{
    "_id":ObjectId("5051c4778ec2487f7c000001"),
    "user_id":"978956784678",
    "likes":{
        "data":[
            {
                "name":"Store 1",
                "category":"Retail and consumer merchandise",
                "id":"354412263434",
                "created_time":"2012-09-07T11:36:05+0000"
            },
            {
                "name":"Store 2",
                "category":"Retail and consumer merchandise",
                "id":"293088074081904",
                "created_time":"2012-08-13T20:06:49+0000"
            }
        ],
        "paging":{
            "next":"https://test.com/next"
        }
    }
} 
```

我正在尝试在 MongoDB 中构建 Map/Reduce 或聚合，以提供以下输出（示意性地）：

user_id, category, "点赞数"

不知何故，我找不到合适的解决方案......到目前为止，我得到的是喜欢的类别的总聚合，但不是每个 user_id：

```
db.runCommand({ 
mapreduce: "likes",
map: function() { 
    this.likes.data.forEach(
       function(z){
            emit( z.category , { count : 1 } );
        }
    );
},
reduce: function(key, values) {
    var total = 0;
    for ( var i=0; i<values.length; i++ )
        total += values[i].count;
    return { count : total };
},
out: 'result3',
verbose: true
}); 
```

有人可以给我一个提示吗？非常感谢您的帮助！

托比

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T22:29:56.310

如果您想使用 MR 来计算每个用户的点赞数，您可以发出 user_id 和 category 作为用于在 reduce 中对文档进行分组的键：

```
map: function() {
    var u = this.user_id; 
    this.likes.data.forEach(
       function(z){
            emit( {category: z.category, user: u} , { count : 1 } );
        }
    );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T21:44:44.743

If possible, I would recommend using the new aggregation framework, which comes with MongoDB version 2.2, the newest stable release. The aggregation framework is written in C++ rather than Javascript, and should have better performance for many aggregation commands.

The following aggregate() counts the number of likes per category, per user. Please let me know if this is not the desired output.

Command:

```
 db.collection.aggregate(
        { $unwind : "$likes.data" }, 
        { $group : 
           {
             _id: {user: "$user_id", category: "$likes.data.category"}, 
             count: {$sum:1}
           }
        }
   ); 
```

Result:

```
{
    "result" : [
        {
            "_id" : {
                "user" : "978956784678",
                "category" : "Retail and consumer merchandise"
            },
            "count" : 2
        }
    ],
    "ok" : 1
} 
```

# ios - 如果用户接听电话，则停止播放音频

> ID：12422799
> 
> 赞同：2
> 
> 时间：2012-09-14T10:35:29.670
> 
> 标签：ios, avaudiosession

我有一个可以在后台播放音乐的播放器应用程序。我正在使用**AVAudioSessionDelegate**来实现方法`- (void)beginInterruption`，`- (void)endInterruption`但我不知道如何确定用户是否在电话中接听或没有接听。如果他接听电话，我不想继续播放音乐，但如果他不同意，我想继续播放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:48:37.977

这张图片应该总结了你的问题的答案：![在此处输入图像描述](../Images/46ab64c1d440a482455237edc0d89fd3.png)

因此，基本上，您可以在`applicationWillResignActive:`. 如果电话无人接听，您可以继续播放音频`applicationDidBecomeActive:`。

实际上，为了避免您的音频播放受到干扰，您也可以尝试禁用音频`applicationDidEnterBackground:`，但建议的方法是上面描述的方法。

# python - Python with SimPy on Eclipse 安装错误（Windows 7）

> ID：12422800
> 
> 赞同：0
> 
> 时间：2012-09-14T10:35:31.933
> 
> 标签：python, eclipse, eclipse-plugin, pydev, simpy

我在 Eclipse 中使用 PyDev 已经有一段时间了，没有任何问题。今天我在我的 Python 中安装了 SimPy，我认为它安装正常，这意味着在空闲命令中，例如：

```
>>> from SimPy.Simulation import *     
>>> now() 
```

工作正常。

然后我尝试再次配置 PyDev，以便可以将 SimPy 与 eclipse 一起使用。在 Eclipse 中，我选择了 Windows->Preferences->PyDev->Interpreter – Python。然后是新的，命名为 Python 2.7 并添加 C:\Python27\python.exe 作为解释器可执行文件。这就是我过去所做的并且工作得很好。

但是现在我收到一条错误消息“在解释器上获取信息时出错”。从 ErrorLog 我得到：尝试创建解释器信息时标准输出中没有输出。错误输出包含：`ImportError: No module named site`

在我的家庭变量中，我有：

`PYTHONHOME -> C:\Python27`

`PYTHONPATH -> C:\Python27\Lib;C:\Python27\Lib;C:\Python27\SimPy`

谁能告诉我出了什么问题？我的系统是Windows 7。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T15:21:07.760

几小时后找到了。似乎在\eclipse\plugins 中有一些com.python.pydev。留下文件夹。删除他们再次经历了整个过程。它现在似乎起作用了。

# c# - 为什么 mvc 无法传递对象

> ID：12422803
> 
> 赞同：0
> 
> 时间：2012-09-14T10:35:39.190
> 
> 标签：c#, asp.net-mvc

无法弄清楚为什么我没有在控制器中收到对象。我从这里跟随示例：[http ://www.aspnetmvcninja.com/views/asp-net-mvc-select-list-example](http://www.aspnetmvcninja.com/views/asp-net-mvc-select-list-example)

我的看起来像这样：
控制器

```
private List<webpages_Roles> GetOptions()
    {
        List<webpages_Roles> categories = new List<webpages_Roles>();
        foreach (Models.webpages_Roles databaseRole in Securitydb.webpages_Roles.ToArray())
        {
            categories.Add(new webpages_Roles() { RoleName = databaseRole.RoleName, RoleId = databaseRole.RoleId });
        }        

        return categories;
    }

    public ActionResult Users2()
    {
        UserProfile user = new UserProfile();
        user.UserId = 24;
        user.UserName = "Alan";
        user.webpages_Roles.Add(new webpages_Roles { RoleName = "Administrator", RoleId = 1 });
        ViewBag.Categories = GetOptions();
        return View(user);
    }

    [HttpPost]
    public ActionResult Users2(UserProfile user)
    {
        ViewBag.Categories = GetOptions();
        return View(user);
    } 
```

模型

```
public partial class webpages_Roles
{
    public webpages_Roles()
    {
        this.UserProfiles = new HashSet<UserProfile>();
    }

    public int RoleId { get; set; }
    public string RoleName { get; set; }

    public virtual ICollection<UserProfile> UserProfiles { get; set; }
}
public partial class UserProfile
{
    public UserProfile()
    {
        this.webpages_Roles = new HashSet<webpages_Roles>();
    }

    public int UserId { get; set; }
    public string UserName { get; set; }

    public virtual ICollection<webpages_Roles> webpages_Roles { get; set; }
} 
```

看法

```
@model Models.UserProfile

@{
    ViewBag.Title = "Users2";
}
<div>
<h1>Select Values</h1>
<ul>
@foreach (Models.webpages_Roles c in Model.webpages_Roles)
   {
   <li> @c.RoleId </li>
 }
</ul>
@Html.DisplayForModel()

@Html.HiddenFor(x => x.webpages_Roles)

<h1>Change Values</h1>
@using (Html.BeginForm())
   {
   @Html.ListBoxFor(x => x.webpages_Roles, new MultiSelectList(ViewBag.Categories, "RoleId", "RoleName", Model.webpages_Roles));
   <br />
   <input type="submit" value="Submit" />
 }
    </div> 
```

在列表中选择更改并按下提交按钮后

```
public ActionResult Users2(UserProfile user) 
```

用户为空。尝试对 UserProfile 的每个属性使用隐藏字段，但行为没有改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:41:00.863

在您看来，您需要将模型中的所有属性都包裹起来。因为当您提交表单时，它只获取 ListBox 值并且与您的 UserProfile 对象不匹配。所以做这样的事情：

```
@model GEMPlus.Models.UserProfile

@{
    ViewBag.Title = "Users2";
}
<div>
    <h1>Select Values</h1>
    @using (Html.BeginForm())
    {
        <ul>
            @foreach (GEMPlus.Models.webpages_Roles c in Model.webpages_Roles)
            {
                <li> @c.RoleId </li>
            }
        </ul>
        @Html.DisplayForModel()

        @Html.HiddenFor(x => x.webpages_Roles)
            @Html.HiddenFor(x => x.RoleId)

        <h1>Change Values</h1>
        @Html.ListBoxFor(x => x.webpages_Roles, new MultiSelectList(ViewBag.Categories, "RoleId", "RoleName", Model.webpages_Roles));
        <br />
        <input type="submit" value="Submit" />
    }
</div> 
```

确保至少 HiddenFor 元素在表单内。DisplayFor 不会有太大的不同。还要将 RoleId 包含在表单中作为隐藏项。

关于您需要在表单中放入哪些确切元素，我无法正确，但您的问题在于该区域 - 提交的表单没有足够的信息将其映射到对象。

# node.js - 如何从 mongo DB 中检索子记录

> ID：12422804
> 
> 赞同：0
> 
> 时间：2012-09-14T10:35:38.423
> 
> 标签：node.js, mongodb

我有一个看起来像这样的数据库：

```
{
    "_id" : ObjectId("50525e55467f67da3f8baf06"),
    "client" : "client1" 
}
{
    "_id" : ObjectId("505262f0deed32a758410b1c"),
    "client" : "client2" 
}
{
    "_id" : ObjectId("5052fe0a37083fd981616589"),
    "client" : "client3",
    "products" : [
        {"name" : "product1"},
        {"name" : "product2"}
    ]
} 
```

如何在不检索 client3 记录的情况下检索 client3 的产品列表？输出应如下所示：

```
[
    {"name" : "product1"},
    {"name" : "product2"}
] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T10:48:46.420

我认为您不能完全排除 client3 记录，因为产品是此记录的一部分，但您可以**只**选择如下`products`字段：

```
db.<dbname>.find({ 'client' : 'client3' }, { 'products' : 1, '_id' : 0 }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-01T10:09:09.210

另外-如果您只想获得匹配的子记录-请参见此处

[http://docs.mongodb.org/manual/reference/operator/projection/positional/](http://docs.mongodb.org/manual/reference/operator/projection/positional/)

您在 find 的项目部分中使用 $ 运算符来指定第 n 个子记录，它是第一个与您的查询匹配的子记录。

# google-chrome - @font-face 在 webkit 浏览器上渲染

> ID：12422805
> 
> 赞同：-1
> 
> 时间：2012-09-14T10:35:55.853
> 
> 标签：google-chrome, css, font-face

> **可能重复：**
> [Windows 和 Mac 上的@font-face 抗锯齿](https://stackoverflow.com/questions/4060607/font-face-anti-aliasing-on-windows-and-mac)

这是我的CSS：

```
 @font-face {
        font-family: 'Museo500Regular';
        src: url('../fonts/Museo500/MuseoSans_500.eot');
        src: local('?'), 
        url('../fonts/Museo500/MuseoSans_500.woff') format('woff'), 
        url('../fonts/Museo500/MuseoSans_500.ttf') format('truetype'), 
        url('../fonts/Museo500/MuseoSans_500.svg#webfontr3rD8cn7') format('svg');
        font-weight: normal;
        font-style: normal;
    }

.loginUser form h2{
font-family: Museo500Regular,sans-serif;
    font-size: 17px;
    font-weight: bold;
} 
```

在 IE、Firefox、Opera 上只能在 webkit 浏览器上渲染得不好，谁能告诉我为什么？:|

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T12:06:10.283

要获得正确的粗体文本，您需要使用粗体 (700) 版本的字体。如果您使用其他粗细并要求浏览器将其加粗，它们可能会在算法上加粗笔划，这会导致渲染效果不佳或糟糕，具体取决于浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T10:54:35.927

Rohit：我确信这只是一个错字，因为它会在所有浏览器中中断

您是否尝试过以下方法：

```
@font-face {
font-family: 'Museo500Regular';
src: url('../fonts/Museo500/MuseoSans_500.eot?#iefix') format('embedded-opentype'), 
     url('../fonts/Museo500/MuseoSans_500.woff') format('woff'), 
     url('../fonts/Museo500/MuseoSans_500.ttf')  format('truetype'),
     url('../fonts/Museo500/MuseoSans_500.svg#webfontr3rD8cn7') format('svg');
} 
```

它一直对我有用。否则它可能是您的 Woff 文件中的错误，因为这是 webkit 使用的一个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T11:13:48.020

尝试这个：

```
font-family: 'Museo500Regular';
    src: url('../fonts/Museo500/MuseoSans_500.eot');
    src: url('../fonts/ubuntu-r-webfont.eot?#iefix') format('embedded-opentype'),
         url('../fonts/Museo500/MuseoSans_500.woff') format('woff'),
         url('../fonts/Museo500/MuseoSans_500.ttf') format('truetype'),
         url('../fonts/Museo500/MuseoSans_500.svg#webfontr3rD8cn7') format('svg'); 
```

还尝试将以下内容添加到 .htaccess

```
AddType application/vnd.ms-fontobject .eot
AddType font/ttf .ttf
AddType font/otf .otf 
```

# wso2 - wso2 esb 不在 Linux 服务器上运行

> ID：12422806
> 
> 赞同：0
> 
> 时间：2012-09-14T10:35:59.163
> 
> 标签：wso2, wso2esb, esb, wso2carbon

我的 wso2-esb 有一些问题，它位于远程 linux 服务器上，并且似乎已成功启动： ![在此处输入图像描述](../Images/a7b2e6862d62220a256ab09e96809212.png)

但是当我尝试访问它时，它不起作用：

![在此处输入图像描述](../Images/6897d13716c4abce52bb804117ce9afa.png)

我不是服务器方面的专家，这是我第一次做这样的事情，所以我可能错过了一些基本步骤或你可能知道的一些事情。请建议

非常感谢

**解决**了服务器被防火墙保护，我必须添加一个例外才能访问它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:11:27.153

可能会发生两件事。

1.  IE 使用友好的错误来掩盖 HTTP 错误响应。

2.  由于这是一个远程服务器，iptables 可能正在服务器上运行，或者有另一个防火墙阻止该端口。

要进行诊断，我会首先禁用 IE 中的友好错误消息，或者使用不这样做的其他浏览器。关于如何在此处禁用它的说明：[http ://technet.microsoft.com/en-us/library/cc778248(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc778248(v=ws.10).aspx)

接下来，如果这不能解决问题，我会尝试在服务器上运行 curl/wget，并请求显示的 URL。curl 可以与`curl example.com`wget一起运行`wget -qO- example.com`，两者都会在终端上显示返回的数据（如果有的话）。如果一个返回未找到的命令，请尝试另一个。如果这不起作用，则说明您的服务器出现问题。如果它返回看起来像错误的东西（例如服务器生成的错误页面），我也会在这一步进行调查。

如果您似乎有连接问题，您可以通过`iptables -L`在服务器上运行来查看是否有任何 iptables 规则。`DROP all`不足`Chain INPUT`会导致这种情况。您可以在此处阅读有关 iptables 的更多信息，以及如何根据您的需要进行设置：[https](https://help.ubuntu.com/community/IptablesHowTo) ://help.ubuntu.com/community/IptablesHowTo （即使您不使用 ubuntu，这仍然对您有用，看在“允许特定端口上的传入流量”部分中，有一个示例，您需要稍微采用服务器运行的非标准端口）。如果有外部防火墙阻止访问，您需要与管理服务器的人交谈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:49:01.460

它似乎是一些网络问题。能不能ping 通一下IP。如果您无法 ping，则表示机器无法访问。

问候，/女娲

# windows - QueryWorkingSetEx 在应用于共享内存时返回无效页面

> ID：12422811
> 
> 赞同：1
> 
> 时间：2012-09-14T10:36:24.903
> 
> 标签：windows, memory, shared

我正在使用 CreateFileMapping 和 MapViewOfFile 创建一个共享内存块，从而获得一个指针。然后我将 QueryWorkingSetEx 应用到它，问题是我不断在 PSAPI_WORKING_SET_EX_INFORMATION 返回结构中获取无效页面。我在 NUMA 架构上，但是在其他非 NUMA 机器上也会发生同样的事情。如果我在使用 malloc 分配的内存上尝试完全相同的过程并获得有效结果，那么 QueryWorkingSetEx 是否可能不支持共享内存指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:12:40.890

在与微软的支持人员交谈后，我得到了解决方案，因为在 MapViewOfFile 之后立即调用 QueryWorkingSetEx 内存地址尚未被触及，因此页面尚未由任何物理内存支持。解决方案是在调用 QueryWorkingSetEx 之前简单地对内存地址执行读取循环，这会强制内存管理器使用物理内存备份页面。

# php - QNAP TS 209 上的图库 QPKG 插件

> ID：12422815
> 
> 赞同：0
> 
> 时间：2012-09-14T10:36:58.457
> 
> 标签：php, iconv, qnap

我有一个 QNAP TS 209 固件版本：3.3.2 Build 0918T。（据我所知，最后一个正式版本）我已经成功安装了 Gallery 插件，但是在启动时出现以下错误：

在成功安装 Gallery 3 之前，您的 Web 托管环境存在一些问题需要修复。PHP 缺少 iconv 扩展

事实上，这是真的。php 已在没有 iconv 的情况下显式编译。phpinfo() 显示以下配置命令：

'./configure' '--prefix=/usr/local/php' '--with-config-file-path=/usr/local/apache/conf/php.ini' '--with-config-file- scan-dir=/etc/config/php.d' '--with-apxs=/usr/local/apache/bin/apxs' '--enable-ftp' '--enable-sockets' '--disable- ipv6' ' **--without-iconv** ' '--with-zlib-dir' '--with-jpeg-dir' '--with-png-dir' '--with-gd' '--with-freetype- dir' '--enable-gd-native-ttf' '--enable-mbstring' '--with-openssl-dir' '--with-libxml-dir=/opt/cross-project/ARM/arm-none -linux-gnueabi/arm-none-linux-gnueabi/sys-root' '--enable-sqlite-utf8' '--enable-zend-multibyte' '--enable-exif' '--with-mysql=/ usr/local/mysql''--with-pdo-mysql=/usr/local/mysql''--with-curl=/opt/cross-project/ARM/arm-none-linux-gnueabi/arm-none-linux-gnueabi/sys-root''--with-curlwrappers'''--with-mcrypt'' --启用共享'

这就是 Gallery 不工作的原因。

我的问题是如何在这个框下安装/编译 php？或者这个问题有什么解决方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:23:44.523

虽然大多数 QNAP 设备都运行 Linux，但它们基于嵌入式硬件而不是 x86。在这种情况下，您看起来像是在 ARM 上运行。这使得您*很难*找到 iconv 扩展的预编译包。

您可能需要获取[iconv 库](http://www.gnu.org/software/libiconv/)，他们选择的特定 PHP 版本，并自己手动编译扩展，或者手动重新编译包含扩展的整个 PHP。

如果这是您第一次编译 PHP 或 PHP 扩展，您*可能*想先在 x86 Linux 机器上尝试它，以掌握它的窍门。

您可能可以使用他们的官方[“QPKG”构建机制](http://forum.qnap.com/viewforum.php?f=253)来完成编译。不幸的是，[开发者论坛](http://forum.qnap.com/viewforum.php?f=131)位于登录墙后面。

# java - 如何在 JTextfield 上添加命令+a？

> ID：12422818
> 
> 赞同：1
> 
> 时间：2012-09-14T10:37:14.057
> 
> 标签：java, swing, jtextfield, key-bindings, keystroke

您好我正在尝试在我的应用程序中添加全选、剪切、复制和粘贴命令，我设法计算出剪切、复制和粘贴命令，但我似乎不知道如何添加`cmd`-`a`命令...

这适用于我的`cmd`-`x`命令

```
text.getInputMap(JComponent.WHEN_FOCUSED).put(KeyStroke.getKeyStroke(KeyEvent.VK_X, Toolkit.getDefaultToolkit().getMenuShortcutKeyMask()),  "cut"); 
```

但是当我尝试这个时`cmd`- `a`：

```
text.getInputMap(JComponent.WHEN_FOCUSED).put(KeyStroke.getKeyStroke(KeyEvent.VK_A, Toolkit.getDefaultToolkit().getMenuShortcutKeyMask()),  "select"); 
```

它似乎不起作用...

我读过一些关于使用这个 void 来选择文本的内容，但我不知道如何将它绑定到 command+a 命令

```
 myTextfield.selectAll(); 
```

任何人都知道如何正确实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T11:00:18.587

使用正确的`String`:`"select-all"`而不是`"select"`.

`String`您可以通过调查来发现这些s `InputMap`，例如使用：

```
 public static void main( String[] args ) {
    EventQueue.invokeLater( new Runnable() {
      @Override
      public void run() {
        JTextField textField = new JTextField();
        InputMap inputMap = textField.getInputMap( JComponent.WHEN_FOCUSED );
        KeyStroke[] keyStrokes = inputMap.allKeys();
        for ( int i = 0; i < keyStrokes.length; i++ ) {
          KeyStroke keyStroke = keyStrokes[ i ];
          Object value = inputMap.get( keyStroke );
          System.out.println(keyStroke + "-\"" + value + "\"");
        }
      }
    } );
  } 
```

打印出来（不是此处粘贴的完整输出）

```
ctrl pressed BACK_SPACE-"delete-previous-word"
ctrl pressed A-"select-all"
shift pressed KP_RIGHT-"selection-forward" 
```

这表明`String`您正在寻找的是`"select-all"`。

`ctrl`请注意，用户切换key 和key的功能可能真的违反直觉`cmd`。例如，在 Mac 上`cmd`+`A`默认情况下会选择全部（这是预期的），但我永远不会期望在 Windows/Linux 机器上

# jquery - JS中未终止的字符串文字

> ID：12422820
> 
> 赞同：2
> 
> 时间：2012-09-14T10:37:26.617
> 
> 标签：jquery, ajax

我正在尝试使用 Grails 中的 JQuery 和 Ajax 为表中列中存在的数据创建一个链接。

```
$('#submit').click(function(){

 $.ajax({
    url:"${request.contextPath}/contactDataSheet/saveContacts",
    type:'POST',
    dataType: 'JSON',
    data: {
        contact_Name: $('#contact_Name').val(),
        description: $('#description').val(),
        duration: $('#duration').val(),
        followup_Required: $('#followup_Required').val()
    },
    success: function(data) {
        $(data).each(function() {
        $("#tablename").append('<tr>'+'<td>'+data.contact_Name+'</td>'+'<td>'+data.description+'</td>'+'<td>'+data.duration+'</td>'+'<td>'+data.followup_Required+'</td>'+'<td>'+'<modalbox:createLink controller="followup" action="createFollowupDetails" title="Hello" width="500">'+data.followup_Required+'</modalbox:createLink>'+'<input type="button" id="popup" value="Followuprequired" onClick="method();"/>'+'</td>'+'</tr>');
        });
    }

});

}); 
```

我在`append`函数的上述代码中得到“未终止的字符串文字”

# ruby - 对 curl 的系统调用不显示来自 ruby 脚本的输出

> ID：12422821
> 
> 赞同：1
> 
> 时间：2012-09-14T10:37:27.410
> 
> 标签：ruby, curl

我有一个红宝石脚本：

```
#!/usr/bin/env ruby

`curl -X GET http://host/someurl' 
```

当我运行此脚本时，响应不会显示在终端上：

```
$ ./script.rb 
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   146    0   146    0     0     73      0 --:--:--  0:00:01 --:--:--    73
$ 
```

服务器确实发送了一些数据。如果我提供 -o 卷曲：

```
`curl -X GET -o <some_file> http://host/someurl' 
```

some_file 包含服务器响应。但同样适用于 POST 请求：

```
`curl -X POST --data-binary @some_file http://host/someurl' 
```

这显示了终端上的响应。知道我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T15:24:13.537

只是把它

```
puts `curl -X GET http://host/someurl` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T15:19:45.960

您在关闭反引号 shell 命令时输入错误。你要：

```
`curl -X GET http://host/someurl` 
```

您使用了单引号而不是尾随反引号。这会导致表达式不被终止。

# python - 在 Python 中验证用户输入的正确方法

> ID：12422822
> 
> 赞同：2
> 
> 时间：2012-09-14T10:37:30.813
> 
> 标签：python, validation, user-input

我正在学习一些 Python 教程，其中不断出现的事情之一是用户输入，我只是想检查我是否正确地验证了它，而不是长时间地进行它。

我已经编写了下面的代码，只需要询问日期月份和年份，但是如果我需要开始询问地址电话号码名称等，这会增长和增长是正常的吗？

```
def get_input( i ):

    while True:
        # We are checking the day
        if i == 'd':
            try:
                day = int( raw_input( "Please Enter the day: " ) )
                # If the day is not in range reprint
                if day > 0 and day < 32:
                    #Need to account for short months at some point
                    return day
                else:
                    print 'it has to be between 1 and 31'
            except ( ValueError ):
                print "It has to be a number!"
        elif i == 'm':
            # We are checking the month
            month = raw_input( 'Please enter ' +
                              'in words the month: '
                              ).strip().lower()
            if month in months: # use the dict we created
                return month
            else:
                print 'Please check you spelling!'
        elif i == 'y':
            # Now the year
            try:
                year = int( raw_input( "Please Enter the year" +
                                       "pad with 0's if needed: " ) )
                #make we have enough digits and a positive
                if year > 0 and len( year ) == 4:
                    return year
            except ( ValueError, TypeError ):
                    print "It has to be a four digit number!" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T11:17:51.090

为什么不让用户一次性输入整个日期，然后尝试验证呢？

```
from time import strptime

def get_date():
    while True:
        date = raw_input("Please enter a date in DD/MM/YYYY format: ")
        try:
            parsed = strptime(date, "%d/%m/%Y")
        except ValueError as e:
            print "Could not parse date: {0}".format(e)
        else:
            return parsed[:3]

year, month, day = get_date() 
```

这将捕获错误，`29/2/2011`但接受有效的输入，如`29/2/2012`.

如果您想接受几种格式，只需列出您要接受的[格式字符串](http://docs.python.org/library/time.html#time.strftime)，然后在输入中一个接一个地尝试，直到找到一个有效的。但要注意[使用超载](http://en.wikipedia.org/wiki/Calendar_date#Usage_overloading)的问题。

为了验证电话号码，我只需要一个[regexp](http://docs.python.org/library/re.html)。如果您之前从未使用过正则表达式[，这里](http://docs.python.org/howto/regex.html)有一个不错的 python 正则表达式 howto 。地址是非常自由的形式，所以除了限制长度和进行基本的安全检查之外，我认为我不会费心验证它们，特别是如果您接受国际地址。

但一般来说，如果有一个 python 模块，你应该尝试根据输入创建一个实例并捕获错误，就像我在上面的示例中为 time 模块所做的那样。

甚至不要尝试验证名称。为什么不？看看[这篇](http://www.kalzumeus.com/2010/06/17/falsehoods-programmers-believe-about-names/)文章。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:05:22.577

也许像滤锅这样的框架在这​​里可能会有所帮助：

[http://docs.pylonsproject.org/projects/colander/en/latest/?awesome](http://docs.pylonsproject.org/projects/colander/en/latest/?awesome)

# linux - 无法通过 VRDP 远程连接到 VirtualBox 来宾

> ID：12422825
> 
> 赞同：2
> 
> 时间：2012-09-14T10:37:49.697
> 
> 标签：linux, ubuntu, virtualbox, remote-access

在工作中，我有一台运行 Ubuntu 11.04 并安装了 VirtualBox 的台式计算机。我想在工作台式计算机（主机）上运行 Red Hat 虚拟机（来宾）。

在家里的笔记本电脑上，我通过 ssh 进入桌面以使用

```
VBoxHeadless --startvm centos_54_64 
```

然后我尝试使用 rdesktop 访问虚拟机，但我不断收到错误消息！

```
rdesktop -a 16 -N host_ip:3389
Autoselected keyboard map en-us
ERROR: host_ip: unable to connect 
```

虚拟机是无图形的。只有一个终端。这是我的虚拟机上的相关信息：

```
NIC 1: MAC: 080027BBCE0F, Attachment: Bridged Interface 'eth0', Cable connected: on, Trace: off (file: none), Type: 82540EM, Reported speed: 0 Mbps, Boot priority: 0, Promisc Policy: deny
NIC 2: disabled
NIC 3: disabled
NIC 4: disabled
NIC 5: disabled
NIC 6: disabled
NIC 7: disabled
NIC 8: disabled
VRDE:  enabled (Address 0.0.0.0, Ports 3389, MultiConn: off, ReuseSingleConn: off, Authentication type: null) 
```

有谁知道问题是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T12:17:02.120

我做到了！哇！

您需要安装扩展包才能正常工作！我误解了文档。

VirtualBox 的基本安装只为您提供 VRDE（VirtualBox 远程桌面扩展），它本身只是一个界面。

扩展包以 VRDP 的形式为您提供 Oracle 对该接口的实现，该接口与 RDP 向后兼容，可让您使用 rdesktop！

所有的首字母缩略词都让我感到困惑。无论如何，希望这会有所帮助！

# java - 以与那里格式化相同的方式从文本区域获取文本

> ID：12422831
> 
> 赞同：1
> 
> 时间：2012-09-14T10:38:20.463
> 
> 标签：java, servlets

Html 中有一个格式正确的文本，`textarea`如下所示：

![在此处输入图像描述](../Images/3f1908194ad8def6e70fd92a99701869.png)

当这*首歌曲/诗歌*被提交时，一个 servlet 对其进行处理并将其全部放入字符串中并将其保存在 servlet 上下文中。有一次我必须显示提交的诗歌，但是当我从 servlet 上下文中获取该属性时，它会显示*一行*文字。

我应该怎么做才能将文本保存为 servlet 上下文中的字符串，其格式与文本区域中的格式相同。

*处理这首诗的 servlet 片段：*

```
 String poetry = request.getParameter("poetry");
   String poet = request.getParameter("poet");

   ServletContext context = getServletContext();

   poetryMapsPoet = (HashMap<String,String>)context.getAttribute("Poetry");

   if(poetryMapsPoet == null) {
       poetryMapsPoet = new HashMap<String,String>();
       context.setAttribute("Poetry", poetryMapsPoet);
   }
   poetryMapsPoet.put(poetry, poet);
   // Poetry is the key and poet is the value 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:42:11.387

将其包装在 pre 块中：

```
<pre><c:out value="${thePoem}"/></pre> 
```

或者使用一个标签，将每一行的结尾转换为`<br/>`. 我一直想知道为什么这不是 JSTL 的一部分。但是写自己很容易。

# android - ContactsContract.Contacts.Entity IllegalArgumentException

> ID：12422834
> 
> 赞同：3
> 
> 时间：2012-09-14T10:38:33.047
> 
> 标签：android, android-contacts

我指的是[https://developer.android.com/reference/android/provider/ContactsContract.Contacts.Entity.html#CONTENT_DIRECTORY](https://developer.android.com/reference/android/provider/ContactsContract.Contacts.Entity.html#CONTENT_DIRECTORY)。我想使用 ContactsContract.Contacts.Entity URI 来获得更好的结果。APi 级别为 11，我的设备操作系统为 4.0。我正在使用下面的代码。下面是我在日志中遇到的异常。请告知我可以使用 ContactsContract.Contacts.Entity API 的方式。

**引起：java.lang.IllegalArgumentException：URI：content://com.android.contacts/contacts/entities**

```
Cursor phones=null;
ContentResolver cr = getContentResolver();     
Uri phoneuri = Contacts.CONTENT_URI;
Uri phone_uri =  phoneuri.withAppendedPath(phoneuri,  ContactsContract.Contacts.Entity.CONTENT_DIRECTORY);
phones = cr.query(phone_uri, null, null, null, null);
for(int i=0;i<phones.getCount();i++)
{
    Log.e("int","f_name="+phones.getColumnName(i));
}
phones.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:47:02.567

使用此代码从 android 获取所有联系人：

```
ContentResolver cr = getContentResolver();
String[] projection = { ContactsContract.Contacts.DISPLAY_NAME,
                        ContactsContract.Contacts._ID };
Cursor contacts = cr.query(ContactsContract.Contacts.CONTENT_URI,
                                projection, null, null, "UPPER("
                                + ContactsContract.Contacts.DISPLAY_NAME + ") ASC");
startManagingCursor(contacts); 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-26T02:58:03.037

```
int contactId = 111;//one contact's id
Uri contactsUri = ContentUris.withAppendedId(Contacts.CONTENT_URI, contactId);
Uri entityUri = Uri.withAppendedPath(contactsUri, Contacts.Entity.CONTENT_DIRECTORY);
Cursor c = getContentResolver().query(entityUri,
         null,null, null, null); 
```

# android - 如何将 Disqus 集成到我的 Android 应用程序中？

> ID：12422836
> 
> 赞同：6
> 
> 时间：2012-09-14T10:38:48.260
> 
> 标签：android, comments, disqus

我正在为一个网站开发一个安卓应用程序。该网站支持 Disqus 的评论服务。我想在我的应用程序中支持相同的功能。我从 Disqus 文档中获得了 API，但我仍然不清楚如何将它们集成到我的应用程序中。请帮助我了解实施。有人将 Disqus 评论服务集成到他们的 Android 应用程序中吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-27T02:49:43.630

我在将我的网站 disqus 线程与我的 android 应用程序链接时遇到了同样的问题。我写了一个小演练，如果您有兴趣，我将链接到下面的演练。基本上，在您的 android 应用程序中，您想使用 WebView 并使用可以获取您的 disqus 标识符的单独 php 文件。

[http://globeotter.com/blog/disqus-android-code/](http://globeotter.com/blog/disqus-android-code/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-12T15:33:41.377

谢谢ndgreen。看到你的想法，我在没有 PHP 文件的情况下创建了一个不同的东西： [https ://gist.github.com/bichotll/5563926](https://gist.github.com/bichotll/5563926)

这个脚本只是从一个简单的函数创建 html 并加载它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-01T14:29:30.633

您可以使用此代码：Google 登录正在运行。我还没有测试过 Facebook。

```
static void setupDisqus(Context context, WebView disqus) {
    try {
        String URL = ""; // URL must be unique like identifier! Because Disqus, is using the url instead of identifier.
        String identifier = "";
        String shortName = "";
        String commentsUri = "https://captainsp.github.io/disqus_comments_dark_gray.html?" + "shortname=" + shortName +
                "&url=" + URLEncoder.encode(URL, "UTF-8") +
                "&title=" + URLEncoder.encode("Comments", "UTF-8") +
                "&identifier=" + URLEncoder.encode(identifier, "UTF-8");

        /*
         * You can use this colors in my Github Account:
         * disqus_comments_dark_gray.html
         * disqus_comments.html
         * disqus_comments_dark.html
         *
         *
         */

        disqus.setWebViewClient(new WebViewClient() {
            @Override
            public void onReceivedError(WebView view, WebResourceRequest request, WebResourceError error) {
                new Handler().postDelayed(disqus::reload, 2000); // Reload Comments
                super.onReceivedError(view, request, error);
            }
        });
        CookieManager.getInstance().setAcceptThirdPartyCookies(disqus, true); // Accept Cookies to login (If you forget this part users need to login every single time)
        disqus.getSettings().setJavaScriptCanOpenWindowsAutomatically(true); // Google / Facebook Login
        disqus.getSettings().setSupportMultipleWindows(true); // Google / Facebook Login
        CookieManager.getInstance().setAcceptCookie(true); // Accept Cookies to login 2
        disqus.setWebChromeClient(new WebChromeClient() {
            @SuppressLint("SetJavaScriptEnabled")
            @Override
            public boolean onCreateWindow(WebView view, boolean isDialog, boolean isUserGesture, Message resultMsg) {
                WebView newWebView = new WebView(context); // Create new WebView
                WebSettings webSettings = newWebView.getSettings();
                webSettings.setJavaScriptEnabled(true);
                webSettings.setUserAgentString(webSettings.getUserAgentString().replace("; wv", "")); // Hide WebView User Agent
                final Dialog dialog = new Dialog(context); // Create Dialog
                dialog.setContentView(newWebView);
                dialog.show();
                CookieManager.getInstance().acceptThirdPartyCookies(newWebView);
                newWebView.setWebViewClient(new WebViewClient());

                newWebView.setWebChromeClient(new WebChromeClient() {
                    @Override
                    public void onCloseWindow(WebView window) {
                        dialog.dismiss(); // Close the dialog after logged in
                    }
                });

                ((WebView.WebViewTransport) resultMsg.obj).setWebView(newWebView);
                resultMsg.sendToTarget();

                return true;
            }
        });
        disqus.getSettings().setJavaScriptEnabled(true); // Enable JavaScript
        disqus.getSettings().setAppCacheEnabled(true);
        disqus.getSettings().setDomStorageEnabled(true);
        disqus.loadUrl(commentsUri);
    } catch (Exception e) {
        e.printStackTrace();
    }

} 
```

首先创建一个新的 WebView 或使用`findViewById(R.id.webView);` 然后将 Disqus 设置到您的 WebView：`setupDisqus(this,webView);`

更多信息：[https ://help.disqus.com/en/articles/1717165-javascript-embed-in-native-apps](https://help.disqus.com/en/articles/1717165-javascript-embed-in-native-apps)

# c# - MSBuild 复制引用的 DLL 的 PDB

> ID：12422840
> 
> 赞同：0
> 
> 时间：2012-09-14T10:38:53.823
> 
> 标签：c#, msbuild, pdb

我正在使用 MSBuild 命令行来构建我的项目，并且在 DebugType=None 的帮助下，项目在编译时不再生成 PDB 文件——这是我所需要的，因为这些会搞乱 Clickonce 部署。但是，项目的所有引用的 DLL 都与它们的 PDB 文件一起复制到构建输出文件夹中。

在复制构建输出时，有什么方法可以防止 MSBuild 包括引用的库 PDB？

# forms - 在级联中使用多选制作 Symfony2 表单的最佳方法

> ID：12422841
> 
> 赞同：1
> 
> 时间：2012-09-14T10:38:53.893
> 
> 标签：forms, symfony, doctrine-orm, symfony-2.1

我有 3 个实体（国家、地区、城市）

```
namespace ****\****Bundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;

class Country
{
  private $id;

  private $name;

  /**
   * @var integer $regions
   * 
   * @ORM\OneToMany(targetEntity="Region", mappedBy="Country")
   */
  protected $regions;
  //...
}

class Region
{
  private $id;

  private $name;

  /**
   * @var integer $country
   *
   * @Assert\Type(type="****\***Bundle\Entity\Country")
   * @ORM\ManyToOne(targetEntity="Country", inversedBy="regions")
   * @ORM\JoinColumn(name="country_id", referencedColumnName="id", nullable=false)
   */
  private $country;

  /**
   * @ORM\OneToMany(targetEntity="City", mappedBy="Region")
   */
  protected $cities;
}

class City
{
    private $id;

    private $name;

    /**
     * @var integer $region
     *
     * @Assert\Type(type="****\****Bundle\Entity\Region")
     * @ORM\ManyToOne(targetEntity="Region", inversedBy="cities")
     * @ORM\JoinColumn(name="region_id", referencedColumnName="id", nullable=false)
     */
    private $region;

    /**
     * @ORM\OneToMany(targetEntity="Company", mappedBy="City")
     */
    protected $companys;
//...
} 
```

这是我的城市表格类：

```
namespace ****\****Bundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class CityType extends AbstractType
{

  public function buildForm(FormBuilderInterface $builder, array $options)
  {
    $builder
            ->add('name')
            ->add('region');
  }

  public function setDefaultOptions(OptionsResolverInterface $resolver)
  {
    $resolver->setDefaults(array(
        'data_class' => '****\****Bundle\Entity\City',
    ));
  }

  public function getName()
  {
    return 'city';
  }
} 
```

这将创建一个基本的 HTML5 表单，其中包含名称的文本框和所有区域都可用的选择框。

我的问题是添加第一个 SelectBox 的最佳方法是什么，这将允许我选择国家以过滤第二个 SelectBox 并减少区域选择的数量？

事件监听器？事件调度程序组件 ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T10:50:38.110

不，EventListener 和 Event dispatcher 用于发生在服务器上的事件，而不是在客户端发生的事件。您需要使用 Javascript。当其中一个选择框发生变化时，这应该触发一个 javascript 函数并进行 AJAX 调用并用该调用的结果填充另一个选择框，或者使用一些 javascript 代码来选择要在第二个框中显示的选项。

[在这里](https://stackoverflow.com/questions/12054814/update-one-select-on-the-basis-of-another-select)寻找一些想法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T11:01:24.737

正如 Carlos Granados 所说，您基本上有两种选择：

1.  创建一个单独的 Symfony 操作，将国家作为参数并以 XML 或 JSON 格式返回相关区域的列表。（您可以使用`Symfony\Component\HttpFoundation\JsonResponse`发送 JSON 响应，但是没有对应的`XmlResponse`类）。每当用户更改当前选定的项目时，使用[jQuery](http://jquery.com)（或任何其他 JS 库甚至纯 Javascript）向服务器发送请求。在回调中（当您在 Javascript 中检索响应时），您可以更新区域选择框。您可能会发现[jQuery Ajax](http://api.jquery.com/jQuery.get/)的文档很有趣。

2.  您将所有国家及其相关区域的列表存储在 HTML 代码中（您可以使用 JSON 或生成本机 Javascript 数组），每当用户更改国家选择框的值时，您只需替换区域选择框。

第二种方法在表单的初始加载时负载较重，因为必须加载所有国家及其相关区域（从数据库或文本文件或您存储它们的任何位置）并以 JS 可以轻松读取的格式呈现.

然而，第一种方法必须在用户每次选择另一个国家时发送一个请求。此外，您必须执行另一个操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-16T21:19:48.667

我自己在表格上做这个。我更改了字段（产品），并且可以测量数量的单位被更新。我正在使用带有参数的宏来更轻松地调整它。

宏：

```
{% macro javascript_filter_unit(event, selector) %}
<script>
    $(function(){
        $('#usersection')
                .on('{{ event }}', '{{ selector }}', function(e){
                    e.preventDefault();
                    if (!$(this).val()) return;
                    $.ajax({
                        $parent: $(this).closest('.child_collection'),
                        url: $(this).attr('data-url'),
                        type: "get",
                        dataType: "json",
                        data: {'id' : $(this).val(), 'repo': $(this).attr('data-repo'), parameter: $(this).attr('data-parameter')},
                        success: function (result) {
                            if (result['success'])
                            {
                                var units = result['units'];
                                this.$parent.find('.unit').eq(0).html(units);   
                            }
                        }
                    });
                })
    });

</script>

{% endmacro %} 
```

ajax 返回一个数组：array('success' => $value, 'units' => $html)。您使用 $html 代码并将其放在您要更改的选择位置。当然，需要修改 ajax 调用的 javascript 代码以匹配您的字段。

您可以像通常那样调用宏：

```
{% import ':Model/Macros:_macros.html.twig' as macros %}
{{ macros.javascript_filter_unit('change', '.unitTrigger') }} 
```

所以我有两个论点：事件，往往是一个选择的变化。和一个选择器，它的变化会触发 ajax 调用。

我希望这会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-13T21:40:52.697

正如 Carlos Granados 所说，您必须使用客户端编程：Javascript。我也遇到了与您相同的问题，并提出了一个对我来说非常有效的解决方案，这是[codepen 上的片段](https://codepen.io/medunes/pen/GWoojz)，您可以从 (Cascade Ajax Selects) 中获得灵感

```
 //-------------------------------SELECT CASCADING-------------------------//
    var currentCities=[];
// This is a demo API key that can only be used for a short period of time, and will be unavailable soon. You should rather request your API key (free)  from http://battuta.medunes.net/   
var BATTUTA_KEY="00000000000000000000000000000000"
    // Populate country select box from battuta API
    url="http://battuta.medunes.net/api/country/all/?key="+BATTUTA_KEY+"&callback=?";
    $.getJSON(url,function(countries)
    {
        console.log(countries);
      $('#country').material_select();
        //loop through countries..
        $.each(countries,function(key,country)
        {
            $("<option></option>")
                            .attr("value",country.code)
                            .append(country.name)
                            .appendTo($("#country"));

        }); 
        // trigger "change" to fire the #state section update process
        $("#country").material_select('update');
        $("#country").trigger("change");

    });

    $("#country").on("change",function()
    {

        countryCode=$("#country").val();

        // Populate country select box from battuta API
        url="http://battuta.medunes.net/api/region/"
        +countryCode
        +"/all/?key="+BATTUTA_KEY+"&callback=?";

        $.getJSON(url,function(regions)
        {
            $("#region option").remove();
            //loop through regions..
            $.each(regions,function(key,region)
            {
                $("<option></option>")
                                .attr("value",region.region)
                                .append(region.region)
                                .appendTo($("#region"));
            });
            // trigger "change" to fire the #state section update process
            $("#region").material_select('update');
            $("#region").trigger("change");

        }); 

    });
    $("#region").on("change",function()
    {

        // Populate country select box from battuta API
        countryCode=$("#country").val();
        region=$("#region").val();
        url="http://battuta.medunes.net/api/city/"
        +countryCode
        +"/search/?region="
        +region
        +"&key="
        +BATTUTA_KEY
        +"&callback=?";

        $.getJSON(url,function(cities)
        {
            currentCities=cities;
            var i=0;
            $("#city option").remove();

            //loop through regions..
            $.each(cities,function(key,city)
            {
                $("<option></option>")
                                .attr("value",i++)
                                .append(city.city)
                        .appendTo($("#city"));
            });
            // trigger "change" to fire the #state section update process
            $("#city").material_select('update');
            $("#city").trigger("change");

        }); 

    }); 
    $("#city").on("change",function()
    {
      currentIndex=$("#city").val();
      currentCity=currentCities[currentIndex];
      city=currentCity.city;
      region=currentCity.region;
      country=currentCity.country;
      lat=currentCity.latitude;
      lng=currentCity.longitude;
      $("#location").html('<i class="fa fa-map-marker"></i> <strong> '+city+"/"+region+"</strong>("+lat+","+lng+")");
    });
   //-------------------------------END OF SELECT CASCADING-------------------------// 
```

# email - 当您想发送高优先级电子邮件时，要设置哪些电子邮件标题？

> ID：12422844
> 
> 赞同：4
> 
> 时间：2012-09-14T10:39:03.597
> 
> 标签：email, smtp

我想要设置一个完整的电子邮件标题列表，以使邮件在大多数邮件客户端中显得同样重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T10:39:03.597

```
Priority: Urgent
X-Priority: 1
Importance: high 
```

如果您认识其他人，欢迎您改进列表。

# c# - 当我在代码中指定类型时，如何使用类型枚举来避免使用字符串？

> ID：12422850
> 
> 赞同：0
> 
> 时间：2012-09-14T10:39:20.867
> 
> 标签：c#

我有这样的代码：

```
var types = Get("07").ToList(); 
```

这是针对城市类型的

```
var types = Get("08").ToList(); 
```

这是街道类型

有没有办法可以在我写的地方使用类似枚举的东西：

```
var types = Get(TYPE.City).ToList();
var types = Get(TYPE.Street).ToList(); 
```

更新：

我也很高兴听到任何更好的选择。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T10:42:05.967

如果您真的在使用`enum`，请执行以下操作：

```
public enum TYPE {
    City = 7,
    Street = 8
};

var types = Get(TYPE.City.ToString("00")).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T10:43:51.740

`enum`您可以创建一个`class`.

```
public static class TYPE
{
    public static readonly string City = "07";
    public static readonly string Street = "08";
}

// Usage:
var types = Get(TYPE.City).ToList(); // this evaluates to .Get("07") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T10:42:07.750

你可以定义`static`类

```
public static class TYPE
{
    public static string City = "07";
    public static string Street = "08";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T10:47:25.083

您可以使用包含这些值的常量或静态只读字段创建类。

例如：

```
static class TYPE
{
    public const string City = "07";
    public const string Street = "08";
} 
```

# javascript - 带有扩展 optgroup 的下拉框

> ID：12422854
> 
> 赞同：1
> 
> 时间：2012-09-14T10:39:30.060
> 
> 标签：javascript, jquery, html, jquery-ui, jquery-plugins

我正在寻找一个我可以使用的具有可扩展 optgroup 的选择框

在鼠标移到 optgroup 标签上之前，不应显示组中的选项

```
<select>
 <optgroup label="group 1"> 
  <option>1</option> <!-- Options within this group hidden until mouseover its group label -->
  <option>2</option>
  <option>3</option>
  <option>4</option> 
 </optgroup>
 <optgroup label="group 2">
  <option>1</option> <!-- Options within this group hidden until mouseover its group label -->
  <option>2</option>
  <option>3</option>
  <option>4</option>
 </optgroup>
 <optgroup label="group 3">
  <option>1</option> <!-- Options within this group hidden until mouseover its group label -->
  <option>2</option>
  <option>3</option>
  <option>4</option>
 </optgroup>
</select> 
```

我希望能够做到这一点，因为我将有一些非常大的选择，这将有助于分解它们。

如果我无法通过 HTML 选择框 + JS 执行此操作，我想构建一个自定义下拉列表，该下拉列表将使用 DIV 标签支持此操作。如果有人知道我在哪里可以找到有关此的任何信息或很棒的教程。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:26:27.250

NVM 我找到了一个可行的解决方案，

我不得不使用 HTML、CSS 和 JS 来实现我想要的。

我复制了本教程 [http://www.onextrapixel.com/2012/06/20/create-a-custom-select-box-with-jquery/](http://www.onextrapixel.com/2012/06/20/create-a-custom-select-box-with-jquery/)

并添加了生成组和功能所需的额外位。

对我有用的代码如下....

这是生成布局的 HTML

```
 <div class='selectBox'>
    <span class='selected'>Reset Filter</span> <span class=
    'selectArrow'>&amp;#9660</span>
    <div class="selectOptions">
      <div>
        <span class="selectOption c1" value="reset" group="0">Reset Filter</span>
      </div>
      <div>
        <span class="selectOption c1" value="online_booking" group="1">Online
        Booking</span>
      </div>
      <div>
        <span class="selectOptionGroup" value="2">&gt;&gt; Services Offered</span>
        <span class="selectOption" value="SERVICING" group="2">SERVICING</span>
        <span class="selectOption" value="MOT TESTING" group="2">MOT TESTING</span>
        <span class="selectOption" value="TYRES" group="2">TYRES</span>
      </div>
      <div>
        <span class="selectOptionGroup" value="3">&gt;&gt; Car Manufacturer</span>
        <span class="selectOption" value="ALFA ROMEO" group="3">ALFA ROMEO</span>
        <span class="selectOption" value="ASTON MARTIN" group="3">ASTON MARTIN</span>
        <span class="selectOption" value="AUDI" group="3">AUDI</span>
      </div>
    </div>
  </div> 
```

这是创建下拉列表的 Jquery JS 代码

```
 function enableSelectBoxes(){
            $('div.selectBox').each(function(){
                $(this).children('span.selected').html($(this).children('div.selectOptions').children('span.selectOption:first').html());
                $(this).attr('value',$(this).children('div.selectOptions').children('span.selectOption:first').attr('value'));

                $(this).children('span.selected,span.selectArrow').click(function(){
                        if($(this).parent().children('div.selectOptions').css('display') == 'none'){
                                $(this).parent().children('div.selectOptions').css('display','block');
                        }
                        else
                        {
                                $(this).parent().children('div.selectOptions').css('display','none');
                        }
                });

                $(this).find('span.selectOption').click(function(){
                        $(this).parent().parent().css('display','none');
                        $(this).closest('div.selectBox').attr('value',$(this).attr('value'));
                        $(this).parent().parent().siblings('span.selected').html($(this).html());
                        $("#filter_type").val($(this).attr("group"));
                        $("#filter_value").val($(this).attr("value"));
                });

                $(this).find('span.selectOptionGroup').click(function(){
                    var group = $(this).attr("value");
                    $(this).parent().children("span[group='" + group + "']").each(function(){
                        if($(this).css("display") == "block") {
                            $(this).css("display", "none");
                        }
                        else {
                            $(this).css("display", "block");
                        }
                    });
                });
            });
    } 
```

最后是 CSS

```
div.selectBox {
    position: relative;
    display: inline-block;
    cursor: default;
    text-align: left;
    line-height: 30px;
    clear: both;
    color: #888;
    margin-top: 20px;
}

span.selected {
    width: 167px;
    text-indent: 20px;
    border: 1px solid #ccc;
    border-right: none;
    border-top-left-radius: 5px;
    border-bottom-left-radius: 5px;
    background: #f6f6f6;
    overflow: hidden;
}

span.selectArrow {
    width: 30px;
    border: 1px solid #9FD573;
    border-top-right-radius: 5px;
    border-bottom-right-radius: 5px;
    text-align: center;
    font-size: 20px;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -o-user-select: none;
    user-select: none;
    background: #9FD573;
}

span.selectArrow,span.selected {
    position: relative;
    float: left;
    height: 30px;
    z-index: 1;
}

div.selectOptions {
    position: absolute;
    top: 28px;
    left: 0;
    width: 198px;
    border: 1px solid #ccc;
    border-bottom-right-radius: 5px;
    border-bottom-left-radius: 5px;
    overflow: hidden;
    background: #f6f6f6;
    padding-top: 2px;
    display: none;
    max-height: 400px;
    overflow: auto;
}

span.selectOption, span.selectOptionGroup {
    width: 80%;
    line-height: 20px;
    padding: 5px 10%;
}

span.selectOption{
    display: none;
}

span.selectOption:hover, span.selectOptionGroup:hover {
    color: #f6f6f6;
    background: #4096ee;
}

span.selectOptionGroup {
    display: block;
    font-weight: bold;
    font-style: italic;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:30:17.800

我认为 html 选择框不可能做到这一点，因为并非所有浏览器都支持选择框中选项组上的鼠标事件。您可能想尝试的几件事是：

1.  jQuery 手风琴

    ```
    $(document).ready(function() {$("#accordion").accordion();}); 
    ```

    这是有限的，因为手风琴一次只能打开一个项目。如果用户想一次性比较选项，他们就完蛋了。[检查文档以获取更多信息](http://docs.jquery.com/UI/Accordion)。

2.  在单独的字段中使用复选框或类似的东西来控制选择框中的可选内容。这样您就可以简单地禁用某些选项，但它们仍然是可见的，因此用户会知道他们错过了什么。或者您可以完全隐藏可以解决您拥有大量选项的问题的选项。

3.  jqTree [（这里是github项目）](http://mbraak.github.com/jqTree/)

我从未使用过它，但它看起来正是您想要的，除了它不使用标准的 html 选择框。

我注意到您刚刚回答了您自己的问题，但我还是要发布，因为 jqTree 可能很有用，其他人应该知道**标准 html 选择框不支持 optgroups 上的鼠标事件**。

# .htaccess - Zend 项目：不允许显示源代码

> ID：12422860
> 
> 赞同：-1
> 
> 时间：2012-09-14T10:39:57.103
> 
> 标签：.htaccess, zend-framework, security, php

今天早上，当我发现可以默认显示`http://www.mydomain.com/application/configs/application.ini`我的 Zend 项目的文件时，我很害怕！

`.phtml`更令人不安的是，当指向最终 URL 时，可能会显示页面的 php 源代码，例如`http://www.mydomain.com/application/views/scripts/index/index.phtml`

因此，我真的需要保护我的网站。我确信可以使用位于文件夹`.ini`中的 main 的正确语法来阻止文件和源代码显示。`.htaccess``public`

你可以帮帮我吗？

我考虑过这种语法，但我不会将`.htaccess`文件复制到我的所有文件夹中。我只想将规则写入一个文件。

```
RewriteEngine on 
RewriteCond %{HTTP_REFERER} !^http://(www\.)?localhost [NC] 
RewriteCond %{HTTP_REFERER} !^http://(www\.)?localhost.*$ [NC] 
RewriteRule .*\.(phtml|php)$ - [F] 
```

**编辑** 我的目录结构是：

```
ProjectDir
 |_application
 | |_configs
 | |_controllers
 | |...
 |
 |_public
 | |_index.php
 | |_css
 | |_js
 | |_.htaccess
 |
 |_library
   |_Zend 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T11:43:21.643

一切似乎都是一个目录太低了。

Web 根目录似乎是您的“ProjectDir”。

在此目录中，您只想拥有公用文件夹的内容。

应用程序和库目录需要上一级。您应该能够使用您的托管界面来执行此操作。

如果您无法修改虚拟主机，您的结构应如下所示：

```
|_application
|
|_library
|   |_Zend
|
|_ProjectDir
    |_index.php
    |_css
    |_js
    |_img
    |_.htaccess 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T10:43:07.683

应用程序目录不应位于公共目录中（它应位于您的 Web 根目录之外）。

Zend 项目的普通目录树应该是这样的（web 根目录指向 ProjectDir/public/）：

```
ProjectDir
 |_application
 |
 |_public
 | |_index.php
 | |_css
 | |_js
 | |_img
 | |_.htaccess
 |
 |_library
   |_Zend 
```

... ETC

# java - 在 jsp 中显示来自 servlet 的数据，但不覆盖当前值

> ID：12422861
> 
> 赞同：2
> 
> 时间：2012-09-14T10:39:59.793
> 
> 标签：java, jsp, servlets

我需要在 jsp 页面中显示来自 servlet 的数据。目前我有这个：

伺服器：

```
Object data = text;
request.setAttribute("data", data);
request.getRequestDispatcher("index.jsp").forward(request, response); 
```

JSP：

```
<p>result: ${data}</p> 
```

在 JSP 中有一个简单的文本框和一个发送按钮。在我按下发送按钮的那一刻，每次都会覆盖响应。

我怎样才能在每次搜索后在新行中看到结果？我还想看看以前的搜索...

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:50:40.487

你有几个选择：

1.  将当前值发送到服务器，进行搜索并将新结果附加到那里，然后将整个字符串发送回 JSP 中`Request`以再次显示它。您必须将值包装在`<input>`标签中，`<input type="hidden">`如果您仍想`data`在 a中显示`<p>`而不是作为输入字段显示。

    **JSP：**

    ```
    <input type="hidden" name="oldData" value="${data}"/>
    <p>result: ${data}</p> 
    ```

    **小服务程序：**

    ```
    Object newData = text;
    Object oldData = request.getParameter("oldData");
    request.setAttribute("data", oldData + "<br/>" + newData);
    request.getRequestDispatcher("index.jsp").forward(request, response); 
    ```

2.  将所有值存储`data`在会话范围内，然后从您的 servlet 附加到它。JSP 必须从会话范围而不是请求中输出值。在此示例中，值存储在唯一的串联`String`中。将 的每个值存储`data`在数据结构中可能会更好，例如 a `List`，然后在 JSP 中对其进行迭代，以便分隔符保留在视图中。

    **JSP：**

    ```
    <c:if test="${not empty sessionScope.data}">
        <p>result: ${sessionScope.data}</p>
    </c:if> 
    ```

    **小服务程序：**

    ```
    Object newData = text;
    Object oldData = request.getSession().getAttribute("data");
    request.getSession().setAttribute("data", oldData + "<br/>" + newData);
    request.getRequestDispatcher("index.jsp").forward(request, response); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:50:06.550

1.在servlet中使用数组而不是简单的对象

1.  用新值填充数组：Servlet

2.  遍历数组并将每个项目显示为新行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T10:50:37.660

您将数据放入其中，`RequestScope`您必须将它们添加到其中`SessionScope`才能看到以前的结果。

请参阅此示例：http: [//viralpatel.net/blogs/jsp-servlet-session-listener-tutorial-example-in-eclipse-tomcat/](http://viralpatel.net/blogs/jsp-servlet-session-listener-tutorial-example-in-eclipse-tomcat/)。

在 中编写 java 代码不是很好的做法`JSP`，因此您可能希望将逻辑移动到 servlet。但是这个例子描述了你需要的点。

# magento - 如何在magento中添加动态元标记，如类别名称：子类别名称：产品名称

> ID：12422862
> 
> 赞同：-1
> 
> 时间：2012-09-14T10:40:06.503
> 
> 标签：magento, meta-tags

我想在我的产品页面中添加元标记，例如 > , : 我的公司名称

目前我在我的 magento 管理员中使用元描述。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T12:17:36.913

您可以从 Product 模块转到 View.phtml，然后在其中放置类似的内容

```
<?php echo '<'.Mage::getStoreConfig('company_name').'>' ?> 
<?php echo '<'.Mage::getStoreConfig('other').'>' ?> 
```

# php - YouTube API 版本 2 中的分页

> ID：12422869
> 
> 赞同：1
> 
> 时间：2012-09-14T10:40:37.830
> 
> 标签：php, youtube-api

我正在尝试根据我的关键字从 YouTube 服务器获取视频，但是当尝试将版本 1 更改为版本 2 时，它没有分页。

我从 YouTube 服务器获得了以下输出。

```
Search results
items found. Showing items to -1: 
```

我用来从 YouTube 服务器获取视频的以下代码：

```
$feedURL = "http://gdata.youtube.com/feeds/api/videos?q={$vq}&v=2";
$sxml = simplexml_load_file($feedURL); 
```

分页代码如下：

```
require_once 'Pager/Pager.php';
  $params = array(
      'mode'       => 'Jumping',
      'perPage'    => $i,
      'delta'      => 5,
      'totalItems' => $total,
  );
  $pager = & Pager::factory($params);
  $links = $pager->getLinks(); 
```

请任何人帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T04:29:20.180

这真的是一个黑匣子，因为我不知道`Pager.php`在做什么。它不是我所知道的任何客户端库的标准部分。

GData API v2 中的分页工作方式在[https://developers.google.com/youtube/2.0/reference#Paging_through_Results](https://developers.google.com/youtube/2.0/reference#Paging_through_Results)的协议级别进行了描述。`Pager.php`如果他们不确定他们应该如何处理事情，你可以指出作者。

一般来说，如果您使用 Zend PHP GData 客户端库，您可能会发现事情变得更简单。如果你这样做了，在[https://developers.google.com/youtube/2.0/developers_guide_php#Pagination](https://developers.google.com/youtube/2.0/developers_guide_php#Pagination)

# javascript - 当 .css("color","re d") 在同一个选择器上运行时，为什么 .focus() 不起作用？

> ID：12422872
> 
> 赞同：0
> 
> 时间：2012-09-14T10:40:56.943
> 
> 标签：javascript, jquery

`$(focus_On).focus();`where`focus_on = #start_Time_Mo`不会将焦点设置到该输入字段。

as`$(focus_On).css("color","red");`将该字段中的文本设置为红色。

为什么`.focus()`现在有效？

示例代码：

*   `$last_Time = $(event.target);`在点击时设置
*   `#start_Time_XX`因此是动态创建的`on`。

如果时间超出范围，则检查有效时间范围后，使用红色字体突出显示并将焦点重新设置到该输入字段。

```
$("#detail_Section").on("blur", "#start_Time_Mo, #start_Time_Tu, #start_Time_Wed, #start_Time_Th, #start_Time_Fr, #start_Time_Sa, #start_Time_Su", function(event) {
    earliest = (period_Definitions["morning_Start"]).split(":");
    earliest_Time = new Date(1970, 1, 1, earliest["0"], earliest["1"], 0, 0);
    latest = (period_Definitions["evening_End"]).split(":");
    latest_Time = new Date(1970, 1, 1, latest["0"], latest["1"], 0, 0);
    test_Times = ($last_Time.val()).split(":");
    test_Time = new Date(1970, 1, 1, test_Times["0"], test_Times["1"], 0, 0);

    if (test_Time >= earliest_Time && test_Time <= latest_Time) {
        console.log("time good");
    } else {
        focus_On = "#" + $last_Time.attr("id");
        $(focus_On).css("color", "red");
        $(focus_On).focus();
    }
    last_String = "";
}); 
```

令人讨厌的是，这在 js fiddle 中有效：[fiddle](http://jsfiddle.net/codepuppy/w2gmK/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:43:58.070

试试喜欢

```
$("#[id^="+ $last_Time.attr("id")+"]").focus(function()
{
   css("color","red")
}); 
```

# plone - 克隆门户转换过时？

> ID：12422880
> 
> 赞同：0
> 
> 时间：2012-09-14T10:41:41.453
> 
> 标签：plone, css

我想在 Plone 中有一个自定义文本转换器，但是当我开始阅读 [文档](http://plone.org/documentation/kb/portal-transforms)时，我意识到该文档是针对

> Plone 不受支持的版本，Plone 2.1.x

离边缘很远。这是我的问题：

门户转换真的是过时的还是旧的技术。如果有，继任者是谁？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T11:10:40.090

`portal_transforms`在 Plone 4.2 中仍在使用。已经尝试对其进行现代化改造，但尚未取代它。

# visual-c++ - 在 cpp 文件中使用 cuda 函数

> ID：12422882
> 
> 赞同：0
> 
> 时间：2012-09-14T10:41:44.713
> 
> 标签：visual-c++, parallel-processing, cuda

如何在 cpp 文件中使用 CUDA 函数？

我必须使用在“cuda.h”（或其他 cuda 库）中声明的 CUDA 函数，例如`cudaMalloc`. 我知道在 .cu 文件中执行此操作很简单，但我的项目已扩展，我们决定在 .cpp 文件中调用一些 CUDA 函数。

我在 SDK 中看到一些 CUDA 函数是从 main.cpp 调用的，为什么它对我不起作用？如何使用 Visual Studio 2010 配置 CUDA？

错误是：

> 未找到 cudaMalloc 标识符

和

> size_t 类型的未声明标识符

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:42:06.290

您可以从使用 cl.exe 编译的 C/C++ 调用 CUDA API 调用，只需确保包含 cuda.h 标头并与 cudart.lib 链接。

有关设置 Visual Studio 2010 的更详细说明，请参阅[此答案](https://stackoverflow.com/a/7285235/214473)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T16:01:22.623

[我在这个链接](http://www.ademiller.com/blogs/tech/2011/05/visual-studio-2010-and-cuda-easier-with-rc2/)之后创建了我的第一个 cuda 项目。`#include <cuda.h>`此外，您不仅需要包括`#include<cuda_runtime.h>`.

# joomla - 我的应用程序的 Joomla 通讯模块

> ID：12422884
> 
> 赞同：0
> 
> 时间：2012-09-14T10:41:49.447
> 
> 标签：joomla, joomla2.5, joomla-extensions, newsletter

我正在为我的基于 Joomla 的网站寻找一个通讯模块。我在 Joomla 扩展论坛上查看过，但没有找到任何合适的组件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T11:24:00.413

你可以试试 [http://extensions.joomla.org/extensions/content-sharing/newsletter/10341](http://extensions.joomla.org/extensions/content-sharing/newsletter/10341)

另外，如果您熟悉[Mailchimp](http://mailchimp.com) 并希望与 joomla 集成， [那么 Joomlamailer](http://www.joomlamailer.com) 将最适合您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T22:32:14.080

您可以尝试 ACYMailing 组件：[http](http://www.acyba.com/en/acymailing.html) ://www.acyba.com/en/acymailing.html 。我已经使用它 2 年了。计划任务和分组用户是您会喜欢的非常有用的功能

# ruby-on-rails - 在 Rails 中使用 Ajax 链接

> ID：12422887
> 
> 赞同：0
> 
> 时间：2012-09-14T10:41:55.260
> 
> 标签：ruby-on-rails, ajax

我正在使用 link_to 标签来更改有效性：

```
 <%= link_to "Mark as " + (doc.is_valid ? "invalid" : "valid"), 
                  :action =>'change_validity',:id => doc.id %> 
```

这里，is_valid 是表中具有布尔值的字段。当它是真的链接将显示为“标记为无效”。当我单击链接时，它将在控制器中调用方法“change_validity”方法。该方法将切换 is_valid 字段并在视图中显示“标记为有效”。

这个我想用 AJAX 做。我尝试使用 link_to_remote。但我无法得到它。谁能解释一下怎么做？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:27:58.510

制作一个部分页面。_preview.html.erb 并将以下代码放入您的局部视图

```
<%= link_to_remote "Mark as " + (doc.is_valid ? "invalid" : "valid"), :update => "update", :url => { :action => "change_validity", :id => doc.id } %> 
```

在你的主视图 file.put 下面的代码

```
<div id="update">
    <%= render :partial => "preview", :locals => { :doc => @doc} %>
</div> 
```

在您的控制器中应该有以下代码

```
def change_validity
// do stuff here
render :partial => "preview", :locals => { :doc => @doc}, :content_type => 'text/html'
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:00:24.610

link_to_remote 在 Rails 3 中不可用。将**:remote => true**添加到您的链接。

```
link_to "Mark as " + (doc.is_valid ? "invalid" : "valid"), 
              change_validity_path(:id => doc.id), :remote => true 
```

编辑：对于 rails < 3 尝试

```
link_to_remote(
        "Mark as " + (doc.is_valid ? "invalid" : "valid"),
        :url => {:action => "change_validity", :id => doc.id},
        :update => "your_div_id",
        :html => {:class => "something"}
      ) 
```

# msbuild - MSBuild - 子目录中所有 bin 目录的 ItemGroup

> ID：12422892
> 
> 赞同：5
> 
> 时间：2012-09-14T10:42:12.013
> 
> 标签：msbuild, itemgroup

我的解决方案有多个项目（因此有子目录），每个项目文件夹中都有一个“bin”文件夹。

我正在尝试在包含所有这些目录的 MSBuild 脚本中创建一个 ItemGroup。

我认为这已经足够了，但它不包含任何内容：

```
<ItemGroup>
  <BinDirs Include="**\bin" />
</ItemGroup> 
```

我不确定为什么这不起作用。谁能指出我正确的方向来实现我想要做的事情？

问候，尼克

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-06-22T16:06:28.337

由于这没有得到答案，但在 Google 结果列表中排名靠前：

Alexey 提供的链接有几个解决此问题的答案，但不清楚您给出的示例为什么不起作用。

MSBuild ItemGroup 集合在定位目录时似乎不喜欢通配符转换。

您可以使用显式路径，例如

```
<ItemGroup>
  <BinDirs Include="C:\MyProject\bin" />
</ItemGroup> 
```

或相对于您的构建脚本运行位置的路径，例如

```
<ItemGroup>
  <BinDirs Include="..\MyProject\bin" />
</ItemGroup> 
```

但是，除非您以文件为目标，否则它不会转换您的通配符，例如

```
<ItemGroup>
  <ThisWorks Include="..\**\bin\*" />
  <ThisDoesnt Include="..\**\bin" />
</ItemGroup> 
```

该帖子包含几种使用通配符选择文件夹的方法，我倾向于使用的一种是：

```
<ItemGroup>
  <GetAllFiles Include="..\**\bin\*.*" />
  <GetFolders Include="@(GetAllFiles->'%(RootDir)%(Directory)'->Distinct())" />
</ItemGroup> 
```

如帖子中所述，选择根文件夹并不完美，因为它必须找到文件所在的位置。如果文件位于其中，则使用 bin*.* 只会获取 bin 文件夹。

如果您的构建类似于标准的 VS 输出，您可能会发现您的 bin 文件夹没有文件，而是有基于您的配置名称的目录，例如 bin\Debug，在这种情况下，定位 bin\**\* 将导致您的包含这些文件夹的项目组。

例如

```
<ItemGroup>
  <GetAllFiles Include="..\**\bin\**\*" />
  <GetFolders Include="@(GetAllFiles->'%(RootDir)%(Directory)'->Distinct())" />
</ItemGroup> 
```

将得到：

*   ..\Proj1\bin\Debug
*   ..\Proj1\bin\Release
*   ..\Proj2\bin\Debug
*   ..\Proj2\bin\Release

我不知道有一种通配符方法来获取没有文件的 bin 文件夹......但是。如果有人找到了，请发布，因为它会很有用。

希望这可以帮助某人节省一些时间。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-12-19T09:53:33.587

在 MSBuild 4.0 中，这是可能的：

```
<Folders Include="$([System.IO.Directory]::GetDirectories(&quot;.&quot;,&quot;Bin&quot;, SearchOption.AllDirectories))" /> 
```

# django - 排序的字典列表手动更改

> ID：12422900
> 
> 赞同：0
> 
> 时间：2012-09-14T10:43:15.107
> 
> 标签：django, django-templates

在我看来，我有一个字典列表，例如

```
data = [{'name': 'Abe', 'seq': [4, 3]}, {'name': 'All names', 'seq': [9, 8]}, {'name': 'Mike', 'seq': [11, 2]}] 
```

在我的模板中，我对它们进行了排序：

```
{{ data|dictsort:"name" }} 
```

我想`{'name': 'All names', 'seq': [9, 8]}`在列表顶部并保留其他排序的数据项。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:00:16.513

使用自定义键功能在视图中进行排序。

```
data.sort(key=lambda d: '0' if d['name'] == 'All names' else d['name']) 
```

# sql - SQL Server 2005 中带有动态列的交叉表查询

> ID：12422901
> 
> 赞同：6
> 
> 时间：2012-09-14T10:43:18.253
> 
> 标签：sql, sql-server, sql-server-2008, tsql, pivot

我在 SQL Server 中遇到交叉表查询问题。

假设我有如下数据：

```
| ScoreID | StudentID |      Name |    Sex | SubjectName | Score |
------------------------------------------------------------------
|       1 |         1 | Student A |   Male |           C |   100 |
|       2 |         1 | Student A |   Male |         C++ |    40 |
|       3 |         1 | Student A |   Male |     English |    60 |
|       4 |         1 | Student A |   Male |    Database |    15 |
|       5 |         1 | Student A |   Male |        Math |    50 |
|       6 |         2 | Student B |   Male |           C |    77 |
|       7 |         2 | Student B |   Male |         C++ |    12 |
|       8 |         2 | Student B |   Male |     English |    56 |
|       9 |         2 | Student B |   Male |    Database |    34 |
|      10 |         2 | Student B |   Male |        Math |    76 |
|      11 |         3 | Student C | Female |           C |    24 |
|      12 |         3 | Student C | Female |         C++ |    10 |
|      13 |         3 | Student C | Female |     English |    15 |
|      14 |         3 | Student C | Female |    Database |    40 |
|      15 |         3 | Student C | Female |        Math |    21 |
|      16 |         4 | Student D | Female |           C |    17 |
|      17 |         4 | Student D | Female |         C++ |    34 |
|      18 |         4 | Student D | Female |     English |    24 |
|      19 |         4 | Student D | Female |    Database |    56 |
|      20 |         4 | Student D | Female |        Math |    43 | 
```

我想进行查询，结果如下：

```
| StuID| Name      | Sex    | C  | C++ | Eng | DB | Math | Total | Average |
|  1   | Student A | Male   | 100|  40 | 60  | 15 |  50  |  265  |   54    |
|  2   | Student B | Male   | 77 |  12 | 56  | 34 |  76  |  255  |   51    |
|  3   | Student C | Female | 24 |  10 | 15  | 40 |  21  |  110  |   22    |
|  4   | Student D | Female | 17 |  34 | 24  | 56 |  43  |  174  |   34.8  | 
```

我如何查询以显示这样的输出？

**笔记：**

主题名称：

*   C
*   C++
*   英语
*   数据库
*   数学

    将根据学生学习的科目而改变。

请访问[http://sqlfiddle.com/#!6/2ba07/1](http://sqlfiddle.com/#!6/2ba07/1)测试此查询。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-14T10:53:59.433

有两种方法可以执行`PIVOT`静态（硬编码值）和动态（在执行时确定列）。

即使您想要一个动态版本，但有时从静态版本开始`PIVOT`然后转向动态版​​本更容易。

静态版本：

```
SELECT studentid, name, sex,[C], [C++], [English], [Database], [Math], total, average
from 
(
  select s1.studentid, name, sex, subjectname, score, total, average
  from Score s1
  inner join
  (
    select studentid, sum(score) total, avg(score) average
    from score
    group by studentid
  ) s2
    on s1.studentid = s2.studentid
) x
pivot 
(
   min(score)
   for subjectname in ([C], [C++], [English], [Database], [Math])
) p 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!6/2ba07/6)

现在，如果您不知道将要转换的值，那么您可以为此使用动态 SQL：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(SubjectName) 
                    from Score
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT studentid, name, sex,' + @cols + ', total, average
              from 
             (
                select s1.studentid, name, sex, subjectname, score, total, average
                from Score s1
                inner join
                (
                  select studentid, sum(score) total, avg(score) average
                  from score
                  group by studentid
                ) s2
                  on s1.studentid = s2.studentid
            ) x
            pivot 
            (
                min(score)
                for subjectname in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!6/2ba07/7)

两个版本将产生相同的结果。

只是为了完善答案，如果您没有`PIVOT`函数，则可以使用`CASE`聚合函数获得此结果：

```
select s1.studentid, name, sex, 
  min(case when subjectname = 'C' then score end) C,
  min(case when subjectname = 'C++' then score end) [C++],
  min(case when subjectname = 'English' then score end) English,
  min(case when subjectname = 'Database' then score end) [Database],
  min(case when subjectname = 'Math' then score end) Math,
  total, average
from Score s1
inner join
(
  select studentid, sum(score) total, avg(score) average
  from score
  group by studentid
) s2
  on s1.studentid = s2.studentid
group by s1.studentid, name, sex, total, average 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!6/2ba07/12)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T10:52:35.927

在这种情况下，您需要使用 SQL PIVOT。请参考以下链接：

[以未知列数为中心](http://dotnetgalactics.wordpress.com/2009/10/23/using-sql-server-20052008-pivot-on-unknown-number-of-columns-dynamic-pivot/)

[在 SQL Server 中透视两个或更多列](http://www.codeproject.com/Articles/31551/Pivot-two-or-more-columns-in-SQL-Server-2005)

[SQL Server 中具有动态列的数据透视](http://www.simple-talk.com/blogs/2007/09/14/pivots-with-dynamic-columns-in-sql-server-2005/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T10:49:55.943

这需要在运行时构建 SQL 查询字符串。SQL Server 中的列名、计数和数据类型始终是静态的（最重要的原因是优化器在优化时必须知道查询数据流）。

所以我建议你`PIVOT`在运行时构建一个 -query 并通过`sp_executesql`. 请注意，您必须对枢轴列值进行硬编码。小心正确地逃脱它们。您不能为它们使用参数。

或者，您可以为每个列数构建一个这样的查询，并将参数仅用于枢轴值。您必须分配一些虚拟列名，例如`Pivot0, Pivot1, ...`. 对于每列计数，您仍然需要一个查询模板。除非您愿意将最大数量的枢轴列硬编码到查询中（比如 20）。在这种情况下，您实际上可以使用静态 SQL。

# css - 填充拉伸 div 宽度 HTML5

> ID：12422907
> 
> 赞同：1
> 
> 时间：2012-09-14T10:43:28.140
> 
> 标签：css, html

我试图将我的 div 的宽度固定为 200px。但是当我将 20px 添加到 padding 时，div 被拉伸到 240px 宽度。这是 HTML5 的一些怪癖还是我做错了什么？

这是我的 HTML：

```
<!DOCTYPE HTML>
<html>
  <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
     <title>My website</title>
     <link rel="stylesheet" type="text/css" media="all" href="style.css" />
  </head>
  <body>
    <div id="wrapper">
    Hello world
    </div>
  </body>
</html> 
```

这是我的CSS：

```
#wrapper {
  width: 200px;
  padding: 20px;
} 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T11:06:48.257

这是一个盒子模型的东西：[这篇文章](http://www.quirksmode.org/css/box.html)有一些非常好的 CSS3 技巧来改变盒子模型。本质上，您可以将 DIV 定义更改为：

```
#wrapper {
    width: 200px;
    padding: 20px;
    -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
    -moz-box-sizing: border-box;    /* Firefox, other Gecko */
    box-sizing: border-box;         /* Opera/IE 8+ */
} 
```

[示例 jsFiddle](http://jsfiddle.net/CkdLV/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:51:19.927

边框填充内容

width 它是内容的属性，因此填充会将 px 添加到元素的总宽度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T10:48:56.910

盒子模型指出，您应该将项目的宽度减小为添加到它的任何填充和边框的宽度。

所以在你的情况下，让你的宽度为 160px，你会很好。

更多信息在这里：

[http://www.w3schools.com/css/css_boxmodel.asp](http://www.w3schools.com/css/css_boxmodel.asp)

# ssl - 实施 Diffie-Hellman 密钥交换时预主密钥不匹配

> ID：12422908
> 
> 赞同：42
> 
> 时间：2012-09-14T10:43:28.373
> 
> 标签：ssl, cryptography, go, diffie-hellman

我正在尝试将 DHE_DSS 实现到 go 的 crypto/tls 包中。不幸的是，我似乎无法让 PreMasterSecret (Z) 相同，我的基本工作流程是：

## 接收服务器密钥交换消息

*   提取 P、G、Ys
*   使用提供的数字签名进行验证

## 准备客户端密钥交换消息

*   创建客户的 Xc
*   生成 Yc (Yc = G^Xc % P)
*   生成 Z (Z = Ys^Xc % P)
*   发回 Yc，包装如下：

```
ckx := make([]byte, len(yC)+2)
ckx[0] = byte(len(Yc)>>8)
ckx[1] = byte(len(Yc))
copy(ckx[2:], yBytes) 
```

但是，当我使用 gnutls-serv 调试它时，两个 PreMasterSecrets (Z) 是不同的。我是否需要在退回的 Yc 上签名，或者以其他方式打包？[我在RFC 5246](https://www.rfc-editor.org/rfc/rfc5246)中看不到任何建议。

<-- 编辑-->

这是我的更改补丁：

[https://08766345559465695203.googlegroups.com/attach/48587532c74b4348/crypto.patch?part=4&view=1&vt=ANaJVrHbwydqEZc3zjUWqQ5C8Q5zEkWXZLdL0w6JJG3HYntOlBurUTY7mc9xR9OTfE0bJxs4eeL5a5SGd2jj9eIfXcwJQgLvJchXOgkYKBBynbPfshY8kuQ](https://08766345559465695203.googlegroups.com/attach/48587532c74b4348/crypto.patch?part=4&view=1&vt=ANaJVrHbwydqEZc3zjUWqQ5C8Q5zEkWXZLdL0w6JJG3HYntOlBurUTY7mc9xR9OTfE0bJxs4eeL5a5SGd2jj9eIfXcwJQgLvJchXOgkYKBBynbPfshY8kuQ)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-31T11:09:21.413

客户端密钥交换将包含：

```
length (2 bytes) --> Y_C (in plain text) 
```

我已经在 J​​ava 中实现了 TLS，并且我遵循相同的结构并且对我来说工作得很好。

> 我需要在退回的 Yc 上签名吗？

***不需要****签署客户端DH公共值*，它以明文形式传输。

您可以使用 pcap 并检查数据包中是否正在传输相同的值。此外，如果 GNU TLS 具有用于打印`Y_C`接收到的记录器，那么您可以检查是否接收到正确的数据。

如果万一您仍然获得不同的 Pre-Master 机密，那么机密生成的逻辑似乎存在一些问题。

# android - 如何通过编码将图像和 .txt（多个文件）文件附加到 gmail？

> ID：12422910
> 
> 赞同：1
> 
> 时间：2012-09-14T10:43:37.493
> 
> 标签：android, gmail, uri, email-attachments

我正在尝试附加一个图像文件和 .txt 文件，但只有一个文件附加一个未附加如何附加这两个文件。如果我使用`ACTION_SEND_MULTIPLE`，那么应用程序会强制关闭。

**这是我的代码：**

```
public static Intent getSendEmailIntent(Context context, String email,
        String subject, String body, String fileName) {

    final Intent emailIntent = new Intent(Intent.ACTION_SEND);

    // Explicitly only use Gmail to send
    emailIntent.setClassName("com.google.android.gm",
            "com.google.android.gm.ComposeActivityGmail");

    emailIntent.setType("*/*");

    // Add the recipients
    emailIntent.putExtra(android.content.Intent.EXTRA_STREAM,
            new String[] { email }
            );

    emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);

    emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, body);

    // Add the attachment by specifying a reference to our custom
    // ContentProvider
    // and the specific file of interest
    emailIntent.putExtra(Intent.EXTRA_STREAM,Uri.parse("content://" + CachedFileProvider.AUTHORITY + "/"+ "anything.txt"));
    emailIntent.putExtra(Intent.EXTRA_STREAM,Uri.parse("content://" + CachedFileProvider.AUTHORITY + "/"+ "anything.jpg"));

    return emailIntent;
} 
```

如果我在返回之前最后放了一个 .jpg 文件，它就是附加的。但是如果我最后放了一个 .txt 文件，那么它就是附加的。我想附上这两个文件请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:39:49.583

您可以使用下面的代码并将文件路径更改为您的文件。

```
ArrayList<Uri> imageUris = new ArrayList<Uri>();
imageUris.add(Uri.fromFile(new File("/mnt/sdcard/Medplann/IMG.jpg"))); // Add your image URIs here
imageUris.add(Uri.fromFile(new File("/mnt/sdcard/Medplann/Report.pdf")));

Intent shareIntent = new Intent();
shareIntent.setAction(Intent.ACTION_SEND_MULTIPLE);
shareIntent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, imageUris);
shareIntent.setType("image/*");
startActivity(Intent.createChooser(shareIntent, "Share images to..")); 
```

* * *

阅读本页：[发送](http://developer.android.com/training/sharing/send.html)

# colors - 如何一次更改相似的颜色？

> ID：12422914
> 
> 赞同：0
> 
> 时间：2012-09-14T10:43:46.920
> 
> 标签：colors, gimp, color-palette

我有这样的位图![在此处输入图像描述](../Images/e2351cce8ce04bf9aec8ca3293b034cf.png)

我现在需要相同的按钮，但需要一个红色按钮。我可以在 Gimp 中应用一些工具，以便将所有颜色转换为“相应”的红色阴影吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T10:58:16.933

`Colors->Colorize`或者`Colors->Hue-Saturation`是你最好的选择。调整`Hue`滑块以更改颜色。

# xml - AS3 XML 加载 - 在加载函数之外不存在变量

> ID：12422916
> 
> 赞同：0
> 
> 时间：2012-09-14T10:43:50.987
> 
> 标签：xml, actionscript-3, flash

```
//Generating menu from XML
var linksXML:XML;
var linksLoader:URLLoader = new URLLoader();
var linksDB:Array = new Array();
linksLoader.load(new URLRequest("menu_links.xml"));
linksLoader.addEventListener(Event.COMPLETE, processXML);
function processXML(evnt:Event):void {
    linksXML = new XML(evnt.target.data);
    for (var i:int = 0; i < linksXML.link.length(); i++){
        var newLink:Array = [linksXML.link[i].@name, linksXML.link[i].@param, linksXML.link[i]];
        linksDB[i] = new Array(newLink);
        trace(linksDB);
    }
}
trace(linksXML.*); 
```

输出是

```
Second trace: 
null
First trace: 
<menu>
  <link name="first" param="true">first.php</link>
  <link name="second" param="true">second.php</link>
  <link name="third" param="true">third.php</link>
</menu> 
```

因此，在我看来，flash 在退出函数时会丢失变量。请帮忙！我不知道为什么会这样

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:54:42.257

仅当`Event.COMPLETE`处理程序完成其任务时，XML 数据才存储在 linksXML 变量中，因为 as3 是异步的。跟踪函数内的 linksXML`processXML`变量。

**编辑：**

```
function processXML(e:Event):void{
        .....
        .....
    futureAction();
}
function futureAction():void{
     trace(linksXML);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T12:39:10.550

帖子的标题暗示了一个范围问题。看起来您已经在函数之外定义了数组；但是，我不确定是否`var linksDB:Array = new Array();`是正确的方法。尝试`var linksDB:Array = [];`

这是我很久以前放在一起的一个简单的 XML 加载的东西。内容与您正在做的事情无关，但如果您像我一样，觉得一个工作示例可能会有用:)

```
var xmlLoad = new URLLoader(xmlLocation);
xmlLoad.addEventListener(Event.COMPLETE, buildSlider);

function buildSlider(e){

    var adList = new XML(e.target.data);
    numPics = adList.ad.length();

    for(var i in adList.ad){
        var pic = new Pic;
        pic.pic = adList.ad[i].pic;
        pic.clicky = adList.ad[i].clicky;
        pic.init();
        pic.x = picWidth * i;       
        contentHolder.addChild(pic);
    }   
    endChecker();

    // autoplay until end of list, or until user clicks
    autoInterval = setInterval(nextButtClick, 4000);
} 
```

XML:

```
<?xml version="1.0" encoding="UTF-8"?>
<ads>

    <ad>
        <pic>40-Hinton-Gardens.jpg</pic>
        <clicky>http://corderhomes.com</clicky>
    </ad>

    <ad>
        <pic>644-Haymarket-Lane.jpg</pic>
        <clicky>http://corderhomes.com</clicky>
    </ad>

    <ad>
        <pic>756-Cambridge-Lane.jpg</pic>
        <clicky>http://corderhomes.com</clicky>
    </ad>

    <ad>
        <pic>9809-Charolais-Drive.jpg</pic>
        <clicky>http://corderhomes.com</clicky>
    </ad>

</ads> 
```

希望这会有所帮助:) 祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T11:12:23.757

实际上它确实存在，只是当您在处理程序之外跟踪它时它没有被初始化。想象一下代码有点像这样：

1.  初始化变量
2.  加载 xml
3.  为 xml 加载器设置加载完成处理程序
4.  跟踪 xml

我省略了 processXML，因为即使您在上面定义了它

```
trace(linksXML.*); 
```

这并不意味着它在那里被调用，它是一个异步函数，在 URLLoader 完成加载时被调用。您在加载后立即跟踪 xml，因此，在那个时间点，xml 还没有准备好。

如果有帮助，试试这个：

```
var linksXML:XML;
var linksLoader:URLLoader = new URLLoader();
var linksDB:Array = [];
linksLoader.load(new URLRequest("menu_links.xml"));
linksLoader.addEventListener(Event.COMPLETE, processXML);
function processXML(evnt:Event):void {
    linksXML = new XML(evnt.target.data);
    for (var i:int = 0; i < linksXML.link.length(); i++){
        linksDB[i] = [linksXML.link[i].@name, linksXML.link[i].@param, linksXML.link[i]];
        trace(new Date() + " xml parsed: \n"+linksDB);
    }
}
addEventListener(Event.ENTER_FRAME,checkXML);
function checkXML(event:Event):void{
    trace(new Date(),linksXML);
    if(linksXML != null) removeEventListener(Event.ENTER_FRAME,checkXML);
} 
```

它应该更容易看到 xml 发生了什么。当然，您只需在 processXML 中触发依赖于该 XML 的其他操作，您不需要`ENTER_FRAME`处理程序，它只是为了说明一点。

简而言之，该变量可以在函数外部访问，只是在调用 processXML**之前**它没有值。在那之后，它就准备好了。如果有帮助，也可以随意使用调试器。

# javascript - 如何在javascript中验证时间戳

> ID：12422918
> 
> 赞同：27
> 
> 时间：2012-09-14T10:43:56.310
> 
> 标签：javascript, validation, timestamp

如何使用 javascript 和时间戳验证时间戳以接受多种格式，例如 YYYY-MM-DD HH:mm:ss.S、YYYY-MM-DD HH:mm:ss AM/PM。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-09-14T10:50:35.820

您可以验证字符串是否是有效的时间戳，如下所示：

```
var valid = (new Date(timestamp)).getTime() > 0;

var valid = (new Date('2012-08-09')).getTime() > 0; // true
var valid = (new Date('abc')).getTime() > 0; // false 
```

多年后重新审视这个答案，验证日期仍然具有挑战性。然而，一些争论是内置解析器接受许多输入格式，其中许多没有什么相关性。

这里的问题是验证多种格式的时间戳，除非日期解析器可以帮助您，否则需要将时间戳转换为可比较的通用格式。如何转换成这种格式取决于输入的格式，如果输入不兼容，则必须开发定制的转换算法。

如上所述，要么使用内置的日期解析器，否则，您将不得不手动解析输入，并相应地验证它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-05-23T09:58:52.860

@Jørgen 的解决方案很好，但如果您在时间戳之前有一个日期，那么`January 1, 1970`您的时间戳将是一个负数，但也是一个**有效**的时间戳。

```
function isValidTimestamp(_timestamp) {
    const newTimestamp = new Date(_timestamp).getTime();
    return isNumeric(newTimestamp);
}

function isNumeric(n) {
    return !isNaN(parseFloat(n)) && isFinite(n);
} 
```

我从[以下 SO 答案中获取的数字验证。](https://stackoverflow.com/a/9716488/2765346)

例如：

```
isValidTimestamp('12/25/1965') // true 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-04-12T12:29:05.690

每个有效数字都是一个时间戳。如果它满足有效整数的条件，那么它也将满足有效时间戳的条件。

时间戳 = 自 1970/01/01 以来的毫秒数

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-14T10:55:10.797

```
var d = Date.parse(your_timestamp); 
```

`d`应该是一个有效的数字，而不是 NaN。

参考：[http ://www.w3schools.com/jsref/jsref_parse.asp](http://www.w3schools.com/jsref/jsref_parse.asp)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-14T11:23:44.140

如果事先不知道格式是什么，或者至少不知道它是有限数量的格式之一，您就不能一般地解析日期字符串。

如果日期组件始终采用 ISO8601 格式 (yyyy-mm-dd) 并且时间是 24 小时或 12 小时（上午或下午），您应该能够轻松拆分时间，查找上午或下午，然后处理时间12 小时或 24 小时取决于它是否存在。

时区必须指定为 UTC (Z) 或小时 +/-UTC，诸如 EST 之类的缩写是不明确的（并且不是标准化的）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-14T11:00:35.397

通过使用 `new Date().getTime();` 你可以做到这一点

做这样的事情

```
var getDate="12-12-2012";
var myDate=getDate.split("-");
var getDate=myDate[1]+"/"+myDate[0]+"/"+myDate[2];
alert(new Date(getDate).getTime()); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-11-24T12:15:49.217

```
/**
 * Determine whether string is timestamp
 *
 * @example
 *
 * isTimestamp('1606205966448'); // true
 * isTimestamp(1606205966448); // true
 * isTimestamp('1606205966448qwe'); // false
 * isTimestamp('2020-11-24T08:19:26.448Z'); // false
 *
 * @param {string|number} n
 * @returns {boolean}
 */
function isTimestamp(n) {
  const parsed = parseFloat(n);

  return !Number.isNaN(parsed) && Number.isFinite(parsed) && /^\d+\.?\d+$/.test(n);
}

export default isTimestamp; 
```

# c# - 添加从子窗体派生的继承类

> ID：12422922
> 
> 赞同：1
> 
> 时间：2012-09-14T10:44:00.880
> 
> 标签：c#, visual-studio-2005, windows-forms-designer

我创建了一个基本表单（baseForm），它为所有其他表单设置颜色等。然后我创建了一个从 baseForm 派生的另一个表单，我们称之为 childForm。现在我想从这个childForm派生出另一个表单，从而继承childForm和baseForm的所有设置、按钮等。但是在添加了这个继承自 childForm 的新继承表单后，我在设计视图中看到的唯一内容就是一大行 HTML 代码......

有人知道这个问题的答案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:17:02.293

这个问题的解决方案：在我试图继承的 childForm 中，我使用了 Visual Basic Powerpacks [1] 中的 LineShape。一旦我删除了这些行，继承就没有问题了...... [1]：msdn.microsoft.com/en-us/vstudio/bb735936.aspx

# android - Android AutoCompleteTextView 和 ViewHolder

> ID：12422923
> 
> 赞同：0
> 
> 时间：2012-09-14T10:44:01.693
> 
> 标签：android, android-layout, android-widget, autocompletetextview

我会使用来自 web-service-rest 的数据来使用 AutoCompleteTextView。困难在于将 ArrayAdapter 与 ViewHolder 一起使用。

这是我的 mainActivity.java 的一部分

```
final AutoCompleteTextView autoCompleteTextView = (AutoCompleteTextView) findViewById(R.id.autoCompleteTextView1);
        autoCompleteTextView.addTextChangedListener(new TextWatcher() {

            private boolean shouldAutoComplete = false;

            public void onTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {
                shouldAutoComplete = true;

            }

            public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                    int arg3) {
                // TODO Auto-generated method stub

            }

            public void afterTextChanged(Editable arg0) {
                if(shouldAutoComplete){

                    try {
                        ArrayList<Intervento> interventos = getInterventos(autoCompleteTextView.getText().toString());
                        AutoCompleteAdapter adapter = new AutoCompleteAdapter(MainActivity.this,R.layout.suggest_list,interventos);
                        adapter.setNotifyOnChange(true);
                        autoCompleteTextView.setAdapter(adapter);
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (ExecutionException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                }

            }
        }); 
```

这是我的自定义类 AutoCompleteAdapter

```
 public class AutoCompleteAdapter extends ArrayAdapter<Intervento>  implements Filterable {

    static class ViewHolder{
         private TextView  textName;
         private TextView  textId;
    }

    private ArrayList<Intervento> arrayListIntervento;
    private int              layout;

    @Override
      public int getCount() {
        return arrayListIntervento.size();
      }

    @Override
    public Intervento getItem(int index) {
        return arrayListIntervento.get(index);
    }

     @Override
        public Filter getFilter() {
         Filter myFilter = new Filter() {
                @Override
                protected void publishResults(CharSequence contraint, FilterResults results) {
                    if(results != null && results.count > 0) {
                    notifyDataSetChanged();
                    }
                    else {
                        notifyDataSetInvalidated();
                    }
                }

                @Override
                protected FilterResults performFiltering(CharSequence arg0) {
                    FilterResults filterResults = new FilterResults();
                    if(arg0 != null) {
                        try {
                            arrayListIntervento = new InterventoController().execute("http://192.168.1.162:8080/******/******/{*******}/****/**********", arg0.toString()).get();
                        }
                        catch(Exception e) {
                            e.printStackTrace();
                        }
                        // Now assign the values and count to the FilterResults object
                        filterResults.values = arrayListIntervento;
                        filterResults.count = arrayListIntervento.size();
                    }
                    return filterResults;
                }
            };
            return myFilter;
     }

    @Override
    public View getView(int position, View contentView, ViewGroup viewGroup) {

        View       view = null;
        ViewHolder viewHolder = null;

        if(contentView==null){
            LayoutInflater inflater =  (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = inflater.inflate(R.layout.suggest_list, null);

            if (view != null) {
                viewHolder = new ViewHolder();
                viewHolder.textId = (TextView) view.findViewById(R.id.idIntervento);
                viewHolder.textName = (TextView) view.findViewById(R.id.nomeIntervento);
                view.setTag(viewHolder);
            }
        }else {
            view = contentView;
            viewHolder = (ViewHolder) contentView.getTag();
        }

        if (viewHolder != null) {
            Intervento intervento = arrayListIntervento.get(position);
            if(intervento!=null){
                viewHolder.textId.setText(intervento.getIdintervento().toString());
                viewHolder.textId.setVisibility(View.INVISIBLE);
                viewHolder.textName.setText(intervento.getNome());
            }
        }

        return view;

    }

    public AutoCompleteAdapter(Context context, int textViewResourceId) {
        super(context, textViewResourceId);

        this.arrayListIntervento= new ArrayList<Intervento>();
        this.layout=textViewResourceId;
    }

} 
```

这是我列出建议的自定义布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <TextView
            android:id="@+id/nomeIntervento"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:text="@string/autocompleteIntervento" />

        <TextView
            android:id="@+id/idIntervento"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:text="@string/autocompleteIntervento" />

    </RelativeLayout> 
```

我可以获取数据，但我没有显示在屏幕上。哪里有问题？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:58:58.203

嘿，你只是错过了实施`Filterable`。

将此作为您[的](http://www.sacoskun.com/2008/08/autocompletetextview-with-simpleadapter.html)参考。希望这会帮助你。

# iphone - 使按钮链接到 Xcode 中的不同 ViewController

> ID：12422926
> 
> 赞同：0
> 
> 时间：2012-09-14T10:44:21.230
> 
> 标签：iphone, ios, uiscrollview

我制作了一个带有 4 个选项卡的选项卡式应用程序。对于第一个选项卡装饰，我使用了苹果网站上的[滚动](http://developer.apple.com/library/ios/#samplecode/Scrolling/Introduction/Intro.html)示例。我已经对其进行了编辑，因此它使用了 24 张在页面上垂直滚动的图像。

如何链接我循环的每个图像以链接到新的 ViewController

我已将我的项目上传到[http://blakeloizides.co.za/xcode/](http://blakeloizides.co.za/xcode/)供您查看和玩弄。

![在此处输入图像描述](../Images/851e9d7b09cff04d63b51a93897ab313.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T12:25:43.647

给每个按钮一个标签。如果使用 for 循环，标签可以是 index counter (i) + 1。每个按钮可以有相同的选择器

```
for (int i =0; i<24; i++) 
{
    //create your button here
    [button setTag:(i+1)];
    [button addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
}

-(IBAction)buttonClicked:(id)sender{
    UIButton *theButton = (UIButton *)sender;
    int tag = theButton.tag;
    //based on tag, do an action here - move to a different viewcontroller
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:02:59.417

您需要显示`UIImageView`具有每个独特`tag`属性的每个图像，并将其`UITapGestureRecognizer`放在上面。一旦手势将识别水龙头，基于`tag`属性加载新的`Controller`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T11:25:16.307

在下一个视图中设置 ImageView 和标签，并将所有 imageName 设置为 1.png、2.png.... 并申请循环

```
for (int i =0; i<24; i++) 
        {
            NSString *imageName=[NSString stringWithFormat:@"%d.png",i];
            UIImageView *imageView= [[UIImageView alloc]initWithImage:[UIImage imageNamed:imageName]];
        } 
```

# jquery - 使用内部 div 获取 div 的内容

> ID：12422927
> 
> 赞同：1
> 
> 时间：2012-09-14T10:44:21.230
> 
> 标签：jquery

HTML：

```
<div class="chocs">Chocolate Bar <div class="id">1234</div></div> 
```

jQuery：

```
$('div#groupinfo .chocs').click(function(){
   alert($(this).slug.text());
}); 
```

我试图在单击外部 div 时获取内部 div (id) 的内容。这可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T10:45:50.143

使用[`children()`方法](http://api.jquery.com/children)定位子div；

```
$('div#groupinfo .chocs').click(function(){
   var contents = $(this).children('.id').text();
}); 
```

如果内部 div 以 not-being-a-direct-child 告终，请[`find()`改用](http://api.jquery.com/find);

```
$('div#groupinfo .chocs').click(function(){
   var contents = $(this).find('.id').text();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T10:46:13.377

是的，这就是 jQuery 的用途（当然还有其他用途）。此解决方案使用 context 参数，它通过提供作为上下文对象来查找在`id`被单击的元素内具有类的元素。`this`

```
$('div#groupinfo .chocs').click(function(){
    alert($(".id", this).html());
}); 
```

[演示](http://jsfiddle.net/3BCUU/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T10:46:38.870

`div`假设您有一个id的父母`groupinfo`：

```
$('div#groupinfo .chocs').click(function() {
   alert($(this).find(".id").text());
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T10:47:51.097

你可以在这样的帮助下做到这`find`一点

```
$('div#groupinfo .chocs').click(function(){
   alert($(this).find('.id').text());
}); 
```

[jQuery查找方法](http://api.jquery.com/find/)

# asp.net-mvc - 在 ASP.NET MVC 中使用 Tempdata - 最佳实践

> ID：12422930
> 
> 赞同：76
> 
> 时间：2012-09-14T10:44:31.210
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, tempdata

我正在使用 ASP.NET MVC 3 来构建一个 Web 应用程序。

我想做的是在两个控制器之间传递值，尽管有很多方法可以做到这一点，我对此特别感兴趣`TempData`。

```
public ActionResult Action1()
{
    string someMessage;
    Test obj = SomeOperation();
    if(obj.Valid)
    {
        someMessage = obj.UserName;
    }
    else
    {
        someMessage = obj.ModeratorName;
    }

    TempData["message"] = someMessage;

    return RedirectToAction("Index");
}

public ActionResult Index()
{
    ViewBag.Message = TempData["message"]

    return View();
} 
```

那么`TempData`here的使用正确吗？我的意思是在最佳编程实践下，这是正确的使用方式`TempData`吗？

在什么实时情况下应该`TempData`使用？

**注意：**我已经浏览了以下链接

*   [何时在 ASP.Net MVC 中使用 TempData 与 Session](https://stackoverflow.com/questions/1500402/when-to-use-tempdata-vs-session-in-asp-net-mvc)
*   [http://www.gregshackles.com/2010/07/asp-net-mvc-do-you-know-where-your-tempdata-is/](http://www.gregshackles.com/2010/07/asp-net-mvc-do-you-know-where-your-tempdata-is/)

谢谢

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-09-14T14:56:51.893

`TempData`是一个存储桶，您可以在其中转储仅以下请求所需的数据。也就是说，在下一个请求完成后，您放入 TempData 的任何内容都会被丢弃。这对于一次性消息很有用，例如表单验证错误。这里需要注意的重要一点是，这适用于会话中的下一个请求，因此该请求可能发生在不同的浏览器窗口或选项卡中。

回答您的具体问题：没有正确的使用方法。这完全取决于可用性和便利性。如果它有效，有意义并且其他人相对容易理解它，那很好。在您的特定情况下，以这种方式传递参数很好，但奇怪的是您需要这样做（代码气味？）。我宁愿在资源（如果它是资源）或数据库（如果它是持久值）中保留这样的值。从您的使用情况来看，它似乎是一种资源，因为您将它用于页面标题。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2015-06-30T10:21:06.553

请注意，从 MVC 3 开始，TempData 的持久性行为发生了变化，现在 TempData 中的值会一直保持到它被读取，而不仅仅是下一个请求。

> TempData 的值会一直存在，直到它被读取或会话超时。以这种方式持久化 TempData 可以实现重定向等场景，因为 TempData 中的值在单个请求之外可用。 [https://msdn.microsoft.com/en-in/library/dd394711%28v=vs.100%29.aspx](https://msdn.microsoft.com/en-in/library/dd394711%28v=vs.100%29.aspx)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2015-04-20T11:21:39.563

请注意 TempData 持久性，这有点棘手。例如，如果您甚至只是在当前请求中读取 TempData，它将被删除，因此您在下一个请求中没有它。相反，您可以使用`Peek`方法。我建议阅读这篇很酷的文章：

[MVC Tempdata , Peek and Keep 混淆](http://www.codeproject.com/Articles/818493/MVC-Tempdata-Peek-and-Keep-confusion)

# jquery - 在 Columnizer jquery 中创建列规则

> ID：12422931
> 
> 赞同：2
> 
> 时间：2012-09-14T10:44:36.327
> 
> 标签：jquery, html, css

我有一些文本，分栏器将其分类为 3 列。

```
<div id="press">
  <div class="wide">
  Placeholder=
</div> 
```

分栏器脚本是这样的

```
$(function(){
  $('.dp-highlighter').addClass("dontsplit");
  $('li').addClass("dontsplit");
  $('.wide').columnize({width:250});
  $('.thin').columnize({width:200});
}); 
```

我的 CSS 是这样的；

```
.column p, .column h1{ padding: 15px; }
#press {
  text-align: justify;
  margin: 0px 100px; 
  width: 80%;
  color: white;
  font-family: courier, Times New, serif;
}
.wide, .thin { clear:both; } 
```

如何在与 column-rule 函数类似的列之间显示一条线？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T08:11:24.387

`<div>` *直接*在应该列的块内创建一个附加：

```
<div class="wide">
    <div>
        Here goes your text
    </div>
<div> 
```

并将规则作为 CSS 边框添加到此`<div>`：

```
.column div {
     border-left: 1px solid black;
 } 
```

直接添加边框`.column`不起作用，但在大多数情况下可以防止文本被分栏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T10:55:40.473

您可以尝试在左侧或右侧使用边框：

```
.column{
    border-left: 1px solid #000;
} 
```

# css - 新闻滚筒的 IE css 问题

> ID：12422934
> 
> 赞同：0
> 
> 时间：2012-09-14T10:44:39.707
> 
> 标签：css, internet-explorer-7, ie8-compatibility-mode

我们在右侧导航栏中有一个新闻滚轮[http://www.businesseventsydney.com.au/home-page-test.cfm 。](http://www.businesseventsydney.com.au/home-page-test.cfm)它在 FF 和 Chrome 中运行良好，但在 IE 中，新闻故事相互冲突。

有人可以阐明它可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:05:03.097

添加`position:relative`到`div.latest-news-container`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:57:39.343

这似乎在 IE8 中可以正常工作，您使用的是什么版本？

无论如何，我能够重现将其置于兼容模式或 IE7 模式。

确定问题后，似乎`div`已`overflow: hidden`正确设置的容器设置为非常大的高度。这就是`div`我所指的：

`<div class="latest-news-content" style="visibility: visible; overflow: hidden; position: relative; z-index: 2; left: 0px; height: 399px; ">`

我将高度设置为`130px`，它似乎解决了这个问题。更有趣的问题是为什么这不是在所有浏览器中都发生，我还没有调查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T10:58:11.463

有时 IE 版本和其他浏览器在像素间距方面存在差异。解决此问题的方法是为`ul`and`li`元素设置 IE 特定样式。我建议您将当前的行 css 包装起来（无论如何）：

```
<ul style="top: -465px; height: 1380px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; list-style-type: none; position: relative; z-index: 1; ...

<li style="width: 199px; height: 115px; overflow: hidden; float: none; ... 
```

到单独的类中，并在 IE 9 浏览器中将它们切换为修改版本。您可能只需要调整元素的值`top`和元素的`ul``height``li`

# apache - htaccess 重定向全局子域系统 - 所有子域重定向到一个 php 文件来处理它们

> ID：12422937
> 
> 赞同：1
> 
> 时间：2012-09-14T10:44:54.437
> 
> 标签：apache, .htaccess, mod-rewrite

我真的可以使用一些与子域相关的建议。

最近我们决定让主门户的每个子域都可用于博客（类似于任何博客平台）

所以我无法实现的是重定向到主门户网站的某些文件夹或 php 文件，例如：

`xxxxx.domain.com/index.php?get=xx&get2=xx`-> 由位于主门户帐户上的实际 php 文件运行`subdomains.php?get=x&get2=xx`，或者说 - 由`mainportal/subdomains/index.php?get=x&get2=xx`

我试过了

```
RewriteCond %{HTTP_HOST} ^(.*)\.domain\.pl$ [NC]
RewriteRule (.*) subdomain.php [L] 
```

效果几乎是正确的，但缺少获取参数:(另一方面它可能完全错误......我只是不明白或者重写规则:(

感谢任何帮助/提示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T10:50:00.067

您可以尝试使用`QSA`（查询字符串追加）：

```
RewriteCond %{HTTP_HOST} ^.*\.domain\.pl$ [NC]
RewriteRule . subdomain.php [QSA] 
```

# c - 在没有外部硬件的情况下测试状态机流程

> ID：12422938
> 
> 赞同：1
> 
> 时间：2012-09-14T10:44:59.213
> 
> 标签：c, testing, microcontroller, state-machine

我目前正在用 C 语言为微控制器（TI MSP430）编写状态机。现在，我在编写代码和实现我的设计方面没有任何问题，但我想知道如何在不使用实际硬件的情况下证明状态机逻辑（当然，目前还不可用）。

使用调试功能，我可以模拟中断（虽然我还没有尝试这样做，但我只是假设它会没问题 - 毕竟它已记录在案）并且我已经定义并保留了一个特定的内存区域来保存 TEST 数据，它使用调试宏，我可以在运行时在 Python 脚本中的应用程序之外访问。换句话说，我有一些测试基础。但是，我的问题的重点是：

“我如何最好地为需要硬件输入的决策强制使用某个状态机流程，例如，当输入引脚为高电平或低电平时”。例如，“如果某个引脚为高电平，则遵循此路径，否则遵循此路径”。

同样，使用调试宏，我可以写入应用程序外部的寄存器（例如，点亮 LED），但我不能（可以理解）写入用于输入的只读寄存器，因此强制状态机上述方式的流量证明是在征税。

我曾想过使用#ifdefs，如果我想测试流程，我可以使用输出引脚并检查这个值，而不是最终使用的输入引脚。但是，这无疑会在我的代码库中添加纯测试代码，这感觉是错误的做法。有没有人对达到这种测试水平的好方法有任何建议？我知道我可能只使用模拟器，但我想尽可能使用真正的硬件（尽管现阶段是评估板）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:55:49.880

听起来你需要抽象。

取而代之的是，在“应用程序”代码（状态机）中，使用例如 GPIO 寄存器读取对输入读取进行硬编码，将这些读取*封装*到执行检查并返回值的函数中。在函数内部，您可以将`#ifdef`:ed 代码改为从您的 TEST 内存区域读取，从而模拟来自不存在的 GPIO 引脚的响应。

即使您的目标是高性能，这也应该是可能的，这不是很多开销，如果您努力工作，您应该能够使用`inline`这些功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:24:41.130

即使您还没有所有硬件，您也可以模拟几乎所有内容。

在 C 中做这件事的一种可能方法......

中断处理程序 = 等待事件的线程。

输入设备 = 触发上述事件的线程。它们可以“连接”到 PC 键盘，因此您可以手动启动“中断”。或者他们可以拥有自己的状态机以自动方式执行任何必要的操作（您也可以编写这些脚本，它们不必硬连线到固定的行为！）。

输出设备 = 同样是线程。它们可以“连接”到 PC 显示器，因此您可以看到“LED”状态。您也可以将输出记录到文件中。

I/O 引脚/端口可以只是专用的全局变量。如果您需要在读取/写入 I/O 设备线程时唤醒它们，您也可以这样做。要么将对它们的访问包装到适当的同步和通信代码中，要么甚至映射底层内存，使对这些端口变量的任何访问都会触发信号/页面错误，其处理程序将为您完成所有必要的同步和通信。

主要部分在，嗯，`main()`。:)

这将创造一个非常接近真实的环境。您甚至可以获得比赛条件！

如果您想对它进行更多的硬编码并且如果您有时间，您也可以模拟整个 MSP430。指令集非常紧凑和简单。今天存在一些模拟器，因此您可以利用一些参考代码。

如果你想很好地测试你的代码，你需要让它足够灵活。这可能包括在函数中添加#ifdefs、宏、显式参数而不是访问全局变量、指向数据和函数的指针（您可以在测试时覆盖它们）、各种测试钩子。

您还应该考虑将代码拆分为特定于硬件的部分、非常特定于硬件的部分和普通的业务逻辑部分，您可以将它们编译到单独的库中。如果这样做，您将能够用模拟硬件的测试库替换真实的硬件库。

无论如何，您应该抽象出硬件设备并使用测试状态机来测试生产代码及其状态机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T21:12:13.117

建立一个测试台。首先，我建议例如当您读取输入寄存器或其他内容时，使用某种函数调用（相对于其他地址事物的一些易失性）。基本上所有东西都至少有一层抽象。现在，您的主应用程序可以很容易地被提升并放置在每个抽象的测试函数的任何地方。您可以在没有任何真实硬件的情况下完全测试该代码。同样，一旦在真正的硬件上，您就可以使用抽象（包装函数，无论您想如何称呼它）作为更改或伪造输入的一种方式。

```
switch(state)
{
   case X:
      r=read_gpio_port();
      if(r&0x10) next_state = Y;
      break;
} 
```

在测试台上（甚至在硬件上）：

```
unsigned int test_count;
unsigned read_gpio_port ( void )
{
   test_count++;
   return(test_count);
} 
```

最终在 asm 或 C 中实现 read_gpio_port 以访问 gpio 端口，并将其与主应用程序而不是测试代码链接。

是的，除非您内联，否则您会遭受函数调用，但作为回报，您的调试和测试能力要强得多。

# jquery - 点击事件和点击事件有什么区别？

> ID：12422944
> 
> 赞同：50
> 
> 时间：2012-09-14T10:45:32.860
> 
> 标签：jquery, jquery-mobile, touch-event

我正在开发一个在 Android/iOS 和台式电脑上运行的应用程序。

我应该使用`click`还是`tap`事件？

它们之间有什么区别？

“点击”可以在桌面上工作吗？如果没有，（我必须使用`click`）我是否错过了`tap`的任何优势`click`？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-06-30T11:25:25.443

~~您可以使用`.on()`将函数绑定到多个事件：~~

```
$('#element').on('click tap', function() {
    ...
}); 
```

感谢@bergie3000 指出[这一点](https://stackoverflow.com/questions/6235794/jquery-mobile-for-every-live-tap-event-should-there-be-an-equivalent-click-even)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-14T10:55:34.497

触摸事件和鼠标事件是完全不同的野兽。它们不可互换。

也就是说，我正在使用[**jQuery Touch Punch**](http://touchpunch.furf.com/)将触摸事件映射到它们的鼠标事件类似物，因此点击与点击是一样的。这使得它可以使用所有标准的 jQuery UI 优点，而无需进行任何特殊的触摸事件编程。它使用起来非常简单，到目前为止，它在 iDevices 和 Android 上都非常适合我。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-04-10T05:22:30.597

很抱歉提出旧帖子，但对于使用 Phonegap 处理 jQuery 的任何人：

如果在“div”、“p”等不应该被点击的元素上分配，“click”事件将不会被触发，当“tap”使其在任何元素上完美运行时！我花了很长时间才注意到。

结论，如果你确实使用 jQuery mobile 开发了一些东西，我建议使用“tap”而不是“click”，因为它可能会导致一些问题

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-14T12:25:08.383

我会查看事件的 jQM 文档，当前文档在这里：

*   [http://jquerymobile.com/demos/1.1.1/docs/api/events.html](http://jquerymobile.com/demos/1.1.1/docs/api/events.html)

对于移动设备，请使用触摸事件，如果您需要鼠标事件，jQM 也为此提供了虚拟鼠标事件。

> **虚拟鼠标事件**
> 我们提供了一组“虚拟”鼠标事件，它们试图抽象出鼠标和触摸事件。这允许开发人员为基本鼠标事件注册侦听器，例如 mousedown、mousemove、mouseup 和 click，并且插件将负责在幕后注册正确的侦听器，以便在尽可能快的时间内为该设备调用侦听器. 在触摸环境中，该插件保留了在传统鼠标环境中看到的事件触发顺序，例如，vmouseup 总是在 vmousedown 之前调度，vmousedown 在 vclick 之前调度，等等。虚拟鼠标事件还规范了坐标信息的提取方式事件，因此在基于触摸的环境中，可以从 pageX、pageY、screenX、screenY、clientX 和 clientY 属性中获得坐标，

我并不是说“点击”事件不会像现在这样起作用，例如您可以点击一个按钮。但是移动设备与台式机将有不同的事件

# c# - 如何将 WPF 按钮绑定到 ViewModelBase 中的命令？

> ID：12422945
> 
> 赞同：63
> 
> 时间：2012-09-14T10:45:36.437
> 
> 标签：c#, wpf, mvvm, command, viewmodel

我有一个`AttributeView`包含各种属性的视图。还有一个按钮，当按下它时，它应该为属性设置默认值。我还有一个`ViewModelBase`类，它是我拥有的所有 ViewModel 的基类。问题是我似乎无法使用 WPF 将按钮绑定到命令。

我试过这个，但它什么也没做：

```
<Button Command="{Binding DataInitialization}" Content="{x:Static localProperties:Resources.BtnReinitializeData}"></Button> 
```

该命令的定义（在 中`ViewModelBase`）如下所示：

```
public CommandBase DataInitialization { get; protected set; } 
```

并在应用程序启动时为命令创建一个新实例：

```
DataInitialization = new DataInitializationCommand() 
```

但是，WPF 绑定似乎没有“找到”命令（按下按钮什么都不做）。当前视图中使用的 ViewModel 是从`ViewModelBase`. 我还能尝试什么（我对 WPF 很陌生，所以这可能是一个非常简单的问题）？

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2012-09-14T11:51:11.380

```
 <Grid >
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
    <Button Command="{Binding ClickCommand}" Width="100" Height="100" Content="wefwfwef"/>
</Grid> 
```

窗口背后的代码：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        DataContext = new ViewModelBase();
    }
} 
```

视图模型：

```
public class ViewModelBase
{
    private ICommand _clickCommand;
    public ICommand ClickCommand
    {
        get
        {
            return _clickCommand ?? (_clickCommand = new CommandHandler(() => MyAction(), ()=> CanExecute));
        }
    }
     public bool CanExecute
     {
        get
        {
            // check if executing is allowed, i.e., validate, check if a process is running, etc. 
            return true/false;
        }
     }

    public void MyAction()
    {

    }
} 
```

命令处理程序：

```
 public class CommandHandler : ICommand
{
    private Action _action;
    private Func<bool> _canExecute;

    /// <summary>
    /// Creates instance of the command handler
    /// </summary>
    /// <param name="action">Action to be executed by the command</param>
    /// <param name="canExecute">A bolean property to containing current permissions to execute the command</param>
    public CommandHandler(Action action, Func<bool> canExecute)
    {
        _action = action;
        _canExecute = canExecute;
    }

    /// <summary>
    /// Wires CanExecuteChanged event 
    /// </summary>
    public event EventHandler CanExecuteChanged
    {
        add { CommandManager.RequerySuggested += value; }
        remove { CommandManager.RequerySuggested -= value; }
    }

    /// <summary>
    /// Forcess checking if execute is allowed
    /// </summary>
    /// <param name="parameter"></param>
    /// <returns></returns>
    public bool CanExecute(object parameter)
    {
        return _canExecute.Invoke();
    }

    public void Execute(object parameter)
    {
        _action();
    }
} 
```

我希望这会给你这个想法。

# python - algorithm 3D点云体积计算

> ID：12422946
> 
> 赞同：2
> 
> 时间：2012-09-14T10:45:40.413
> 
> 标签：python, algorithm, r, 3d, volume

我正在寻找一种方法来计算 python 或 R 中的三维不规则对象的体积。我有一个时间序列的文件（每个序列大约 50 个），时间间隔相等。它们由具有固定数量三角形的对象的三角形网格表示组成。顶点具有已知的 x、y、z 坐标。无需重新生成网格。并且不需要可视化。三角形有索引，点也有。对象不一定是完全凸的。但是没有不必要的点。所有已知点都是船体的一部分。现在，我想计算每个时间点的物体体积。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:24:29.133

经过一番谷歌搜索后，我发现该算法应该对您所描述的封闭网格起到作用：迭代所有三角形并总结`dot(v0, cross(v1, v2)) / 6`where `v0`，`v1`， 和`v2`是三角形顶点的坐标。

[资源](http://www.gamedev.net/topic/520749-computing-volume-from-marching-cubes/)

# wso2 - 在本地计算机上设置 WSO2 Stratos

> ID：12422947
> 
> 赞同：3
> 
> 时间：2012-09-14T10:45:48.883
> 
> 标签：wso2, wso2esb, wso2stratos

我从网站下载了最新版本的 WSO2Stratos 并将其解压缩到我的本地计算机上。我将自述文件中的文本复制到 /etc/hosts 文件中。

当我运行特定服务（例如管理器、as 和 ESB）时，它可以正常工作而不会出现错误。

当我使用浏览器登录页面时`"https://localhost:9443/carbon/"`

它工作正常，可以看到主页。

在此之后，当我单击任何可用选项时，没有任何效果，我只看到一个空白页面。当我单击左侧面板上的应用程序管理器、ESB 或任何内容时，我看不到其他页面。我只看到主页。

为什么我看不到 Stratos Live 提供的服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:38:00.953

WSO2 Stratos 1.6 版本更易于安装和配置。请参阅此处的[安装指南博客文章](http://meetudara.blogspot.com/2013/02/wso2-stratos-16-how-to-intall-and.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T17:20:04.390

您似乎没有在 Stratos 设置中启用单点登录选项。您需要将以下条目添加到 ~/.bashrc 以启用 SSO。

导出 SSO_ENABLED=true

单点登录选项意味着一旦用户登录到单个服务，例如：Stratos Manager，他们将使用他们的凭据自动登录到任何其他服务，例如：ESB 或治理。

此外[，这篇](http://msmshariq.blogspot.com/2011/07/setting-up-wso2-stratos-on-local.html)博文将对您有所帮助。

# opencv - cvCaptureFromFile 总是返回 NULL，Visual Studio 2005

> ID：12422953
> 
> 赞同：1
> 
> 时间：2012-09-14T10:46:19.577
> 
> 标签：opencv, ffmpeg, mjpeg

我的 cvCaptureFromFile 函数有问题。它总是返回 NULL。我在互联网上做了一些研究，并将 PATH 添加到 ffmpeg 的“bin”目录中。
但它仍然是一样的。所以我试图用`ffplay.exe`. 它返回一个错误，显示“处理输入时发现无效数据”。这是一个“mjpg”文件，应该用ffmpeg播放。然后我尝试了一些“mpg”文件。
现在消息是“没有这样的文件或目录”，这是不正确的，因为文件就在原地。我还应该做什么？使用 Media-Player 和 VLC 播放器可以处理这些文件。请帮忙！

# jquery - JQuery DatePicker间歇性工作

> ID：12422959
> 
> 赞同：0
> 
> 时间：2012-09-14T10:47:03.713
> 
> 标签：jquery, datepicker

我正在为我的 ASP.Net MVC 3 Web 应用程序使用**JQuery DatePicker插件。**我以前在其他应用程序中使用过 DatePicker 很多次，没有任何问题。

但是，我在当前的应用程序中遇到了一个问题，即 JQuery DatePicker 只能间歇性地工作。我的意思是，例如，我有以下 JavaScript 文件

```
$(document).ready(function () {

    //Equal Opps
    $('#DOB').datepicker({ dateFormat: 'dd/mm/yy', changeMonth: true, changeYear: true, yearRange: "1900:2030" });

}); 
```

这个文件在我的 Razor 视图中被引用（以及使 DatePicker 工作所需的所有其他文件），然后我有以下文本框，一旦单击，DatePicker 应该会弹出。

```
<div class="editor-field sepH_b">
            @Html.TextBoxFor(model => model.DOB)
            @Html.ValidationMessageFor(model => model.DOB)
</div> 
```

但是，有时当页面加载并单击 TextBox 时，会弹出 DatePicker，如果我刷新页面并再次单击 TextBox，则 DatePicker 将不起作用，如果我再次刷新并单击 TextBox，则DatePicker 然后工作？

有时当我第一次加载页面时，DatePicker 根本无法工作。

我真的没有解决这里发生的事情。也许这是一个缓存问题，但我真的不知道。

请有人帮我解决这个问题，将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:53:36.600

希望您正确链接 jquery js 文件。当我在本地引用它们时，我遇到了类似的问题。在检查浏览器错误控制台时，我发现`jquery-ui`文件未正确加载。

使用[jquery](https://developers.google.com/speed/libraries/devguide#jquery)和[jquery-ui](https://developers.google.com/speed/libraries/devguide#jquery-ui)的 google 托管链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T12:53:35.963

在更详细地查看了我的代码之后，我意识到在我的主布局页面的**头部**部分，我引用了各种 JQuery 脚本。我忘记了这里已经引用了这些脚本，但我仍然在我网站的其他页面中再次引用它们。我删除了重复的引用，一切似乎又按预期工作了。

# java - Java 中的 DCI 示例

> ID：12422960
> 
> 赞同：5
> 
> 时间：2012-09-14T10:47:15.833
> 
> 标签：java, oop, design-patterns, dci

我正在 Java 中寻找一些示例，以便更好地理解什么是 DCI 以及应该如何使用它。

我在这里的 C++ 中找到了一些很棒的 DCI 示例[http://fulloo.info/Examples/C++Examples/Account1/](http://fulloo.info/Examples/C++Examples/Account1/)

如果您不熟悉 DCI 架构，请在此处阅读[http://www.artima.com/articles/dci_vision.html](http://www.artima.com/articles/dci_vision.html)或在此处观看一些介绍[http://www.tele-task.de/archive/video/flash/ 16130/](http://www.tele-task.de/archive/video/flash/16130/)最后一个链接更多地是关于 OO 的弱点。

额外的问题：DCI 真的是下一个范式转变吗？

# java - 在本地使用 wsse soap

> ID：12422961
> 
> 赞同：2
> 
> 时间：2012-09-14T10:47:18.307
> 
> 标签：java, php, soap, wsse

我遇到了互联网速度缓慢和中断的问题，所以我想使用

```
wsse soap file oasis-200401-wss-wssecurity-secext-1.0.xsd 
```

在本地而不是使用链接：

```
http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd 
```

有谁知道该怎么做？

# python - Python 类：将所有继承的方法私有化

> ID：12422966
> 
> 赞同：0
> 
> 时间：2012-09-14T10:47:31.597
> 
> 标签：python, class

类 Bar 继承自 Foo：

```
class Foo(object):
      def foo_meth_1(self):
          return 'foometh1'
      def foo_meth_2(self):
          return 'foometh2'
class Bar(Foo):
      def bar_meth(self):
          return 'bar_meth' 
```

有没有办法将从 Foo 继承的所有方法变为私有？

```
class Bar(Foo):
      def bar_meth(self):
          return 'bar_meth'
      def __foo_meth_1(self):
          return 'foometh1'
      def __foo_meth_2(self):
          return 'foometh2' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T11:00:30.543

Python 没有私有属性，只有经过混淆的方法名称。但是我想您可以在创建实例时迭代超类的方法，将它们从您自己身上移除并为这些函数创建新的模糊命名的方法名称。如果您使用函数来创建混淆名称，setattr 和 getattr 可能会很有用。

话虽如此，这是一件非常chuhlu-oid的事情。你提到的目的是保持命名空间更清洁，但这更像是混合氨和氯。如果需要隐藏该方法，请将其隐藏在超类中。不要创建超类的实例——而是创建一个将隐藏方法包装在公共方法中的特定类，您可以将其命名为相同的东西，但去掉前导空格。

假设我正确理解您的意图，我建议您执行以下操作：

```
class BaseFoo(object):
    def __init__(self):
        raise NotImplementedError('No instances of BaseFoo please.')
    def _foo(self):
        return 'Foo.'
    def _bar(self):
        return 'Bar.'

class HiddenFoo(BaseFoo):
    def __init__(self): pass

class PublicFoo(BaseFoo):
    def __init__(self): pass
    foo = BaseFoo._foo
    bar = BaseFoo._bar

def try_foobar(instance):
    print 'Trying ' + instance.__class__.__name__
    try:
        print 'foo: ' + instance.foo
        print 'bar: ' + instance.bar
    except AttributeError, e:
        print e

foo_1 = HiddenFoo()
foo_2 = PublicFoo()
try_foobar(foo_1)
try_foobar(foo_2) 
```

如果`PublicFoo.foo`要做的事情超过`BaseFoo.foo`，您将编写一个包装器来做任何需要的事情，然后从超类调用 foo 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T10:52:41.633

这只有在 Pyhtons 的元类中才有可能。但这非常复杂，我不确定是否值得付出努力。详情请看 [这里](http://www.voidspace.org.uk/python/articles/five-minutes.shtml)

你为什么要这样做？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T11:46:31.290

您可以使用元类，但`Boo`将不再是 Foo 的实际子类，除非您希望`Foo`' 方法在实例中既是“私有”又是“公共” `Bar`（您不能选择性地继承名称或`delattr`从父类继承的成员）。这是一个非常人为的例子：

```
from inspect import getmembers, isfunction

class TurnPrivateMetaclass(type):
    def __new__(cls, name, bases, d):
        private = {'__%s' % i:j for i,j in getmembers(bases[0]) if isfunction(j)}
        d.update(private)

        return type.__new__(cls, name, (), d)

class Foo:
    def foo_meth_1(self): return 'foometh1'
    def foo_meth_2(self): return 'foometh2'

class Bar(Foo, metaclass=TurnPrivateMetaclass):
    def bar_meth(self): return 'bar_meth'

b = Bar()
assert b.__foo_meth_1() == 'foometh1'
assert b.__foo_meth_2() == 'foometh2'
assert b.bar_meth() == 'bar_meth 
```

如果你想让属性访问工作，你可以创建一个新的`Foo`基类，`__new__`删除所有重命名的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T11:53:32.243

由于`foo()`和`__foo()`是完全不同的方法，它们之间没有联系，Python 无法理解你想要做什么。所以你必须一步一步地向它解释，意思是（就像 sapth 说的）删除旧方法并添加新方法。

这是一个面向对象的设计缺陷，更好的方法是通过委托：

```
class Basic:
    def meth_1(self):
        return 'meth1'

    def meth_2(self):
        return 'meth2'

class Foo(Basic):
    # Nothing to do here
    pass

class Bar:
    def __init__(self):
        self.dg = Basic()

    def bar_meth(self):
        return 'bar_meth ' + self.__meth_1()

    def __meth_1(self):
        return self.dg.meth_1()

    def __meth_2(self):
        return self.dg.meth_2() 
```

While `Foo` inherits the `Basic` class because he wants the public methods from him, `Bar` will only delegate the job to `Basic` because he doesn't want to integrate `Basic`'s interface into its own interface.

# python - Python：使用变量作为 CSV 中的查找引用并返回值

> ID：12422968
> 
> 赞同：1
> 
> 时间：2012-09-14T10:47:38.853
> 
> 标签：python, csv, lookup

找不到这个解决方案的答案，所以一旦我弄清楚了，我想我会重新发布我的解决方案......

我正在寻找一种获取用户输入 ( `sys.argv[1]`) 的方法，并使用此值在 CSV 文件中查找第 x 列中的另一个值（例如 5）。这将是更大脚本的一部分，我将使用查找的值作为测试。

我的示例 csv 将是：

```
col0,col1,col2,col3,col4
a,foo,bar,blah,1
b,foo,bar,blah,2
c,foo,bar,blah,3
d,foo,bar,blah,4
e,foo,bar,blah,5
f,foo,bar,blah,6
g,foo,bar,blah,7
h,foo,bar,blah,8
i,foo,bar,blah,9
j,foo,bar,blah,10
k,foo,bar,blah,11
l,foo,bar,blah,12
m,foo,bar,blah,13
n,foo,bar,blah,14
o,foo,bar,blah,15
p,foo,bar,blah,16
q,foo,bar,blah,17
r,foo,bar,blah,18
s,foo,bar,blah,19
t,foo,bar,blah,20
u,foo,bar,blah,21
v,foo,bar,blah,22
w,foo,bar,blah,23
x,foo,bar,blah,24
y,foo,bar,blah,25
z,foo,bar,blah,26 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T11:15:02.900

我快速浏览了您的 Javascript 问题，如果您只是在字母表中映射 char->position，那么下面的呢？

```
def char_to_pos(char):
    from string import ascii_lowercase
    try:
        return ascii_lowercase.index(char) + 1
    except ValueError as e:
        pass # no match - do what's sensible here 
```

如果你想预先生成一个查找表，那么就像：

```
from string import ascii_lowercase
from itertools import count

lookup = dict(zip(ascii_lowercase, count(1)))
# or depending on taste
lookup = {letter: idx for idx, letter in enumerate(ascii_lowercase, start=1)} 
```

否则，由于 CSV 文件通常相对较小，您可以将整个文件加载到 RAM 以避免以后重复顺序查找（只要 CSV 不是那么大，它会使您的机器处于昏迷状态）

```
with open('test1.csv') as fin:
    csvin = csv.reader(fin)
    lookup = {row[0]: row for row in csvin}

to_find = 'x'
try:
    print '{} = {[4]}'.format(to_find, lookup[to_find])
except (KeyError, IndexError) as e:
    pass # KeyError = no lookup match, IndexError is that CSV file didn't have 5th column... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T10:47:38.853

我这样做的方式如下：

```
import sys
import csv
#define user input as variable
input = sys.argv[1]
# read csv file into "fooReader"
fooReader = csv.reader(open('test1.csv', 'rb'), delimiter = ',', quotechar="\"")
# read each row in "fooReader"
for row in fooReader:
        # define first row column as "value" for testing
        value = row[0]
        # test if value (1st column) is the same as input (user input)
        if value == input:
                # ...if it is then print the 5th column in a certain way
                print value + " = " + row[4] 
```

然后可以将其用作`row[4]`另一个所需测试中的变量。

# asp.net-mvc - ASP.NET MVC 3 - 表达式树可能不包含动态操作

> ID：12422970
> 
> 赞同：2
> 
> 时间：2012-09-14T10:47:44.087
> 
> 标签：asp.net-mvc

我得到：表达式树可能不包含动态操作

当我做：

```
@Html.TextBoxFor(m => m.Translations[ViewBag.Languages[i].CultureCode].Title)
<br/>
@Html.TextBoxFor(m => m.Translations[ViewBag.Languages[i].CultureCode].PreviewDescription)
<br/>
@Html.TextBoxFor(m => m.Translations[ViewBag.Languages[i].CultureCode].FullDescription) 
```

我之前正在做更简单的TextBoxFor，例如：

```
@Html.TextBoxFor(m => m.ContactName)
@Html.TextBoxFor(m => m.EmailAddress) 
```

在视图的顶部，我的 using 语句类似于：`@model x.y.z.Listing`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T13:10:37.533

正如消息所说，您在 lambda 表达式中使用了 viewbag，这是一个动态操作：

```
@Html.TextBoxFor(m => m.Translations[ViewBag.Languages[i].CultureCode].Title) 
```

要解决您的问题，只需将动态移出，就像这样

```
@{
    string cultureCode = ViewBag.Languages[i].CultureCode
}

 @Html.TextBoxFor(m => m.Translations[cultureCode].Title) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:43:45.770

我认为，您必须检查您是否使用的是严格类型的视图。

# android - 创建片段的最佳方法

> ID：12422973
> 
> 赞同：0
> 
> 时间：2012-09-14T10:48:03.387
> 
> 标签：android, android-fragments

我有一些带有gridview 的片段，gridview 的内容是从数据库中的某个位置通过游标加载器决定的。因此，除了 db 查询之外，片段是相等的：我需要一种类似构造函数的方式来施加差异。我的解决方案是将参数放在一个包中，然后调用

```
Fragment.instantiate(this,clss.getName(), newTab.args) 
```

其中 args 是一个包含 String-where 和 StringArray-whereArgs 的 Bundle 是正确的继续方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T11:20:17.890

创建新片段的最佳方法是在片段中添加方法以进行实例化，例如以下：

```
public static DetailFragment newInstance(String id) {
    DetailFragment fragment = new DetailFragment();
    Bundle args = new Bundle();
    args.putString(KEY_ITEM, id);
    fragment.setArguments(args);

    return(fragment);
} 
```

然后，当您需要数据时，您可以执行以下操作：

```
this.getArguments().getString(KEY_ITEM); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:03:03.780

是的，这种方法没有错，

您可以做的另一件事是在构造函数中传递 where 参数

# iphone - iPhone应用程序内购买赠品

> ID：12422975
> 
> 赞同：1
> 
> 时间：2012-09-14T10:48:20.540
> 
> 标签：iphone, appstore-approval

我有一个应用程序，我的客户想免费赠送给客户。

要获得全部功能，客户必须填写代码。

其他客户需要进行应用内购买才能获得全部功能。

这是苹果允许的还是我会遇到应用商店的限制。

试图找到它，但没有找到合适的答案。以前有人试过吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T12:16:58.510

请查看其他 SO 答案： [Redeem code for inapp purchase items](https://stackoverflow.com/questions/9606266/redeem-codes-for-inapp-purchase-items)

我认为不可能做你想做的事。要么每个人都必须输入代码，要么每个人都必须进行应用内购买。

您也可以在应用程序中同时使用这两个选项，但这对于客户来说可能看起来很混乱且不正式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:47:43.263

我想说您可以要求用户登录（电子邮件+密码）。然后，您可以连接到您的服务器并检查凭据。如果服务器知道该用户，因为您托管了允许免费使用高级选项的所有用户的列表，您可以解锁您的高级功能。否则，您要求 Apple 提供应用内购买程序。

# jquery - 关于 MVC 部分视图数据的“加载”事件或其他事件

> ID：12422976
> 
> 赞同：0
> 
> 时间：2012-09-14T10:48:27.047
> 
> 标签：jquery, asp.net-mvc

我有一个加载到 jquery 对话框中的 MVC 部分视图。

我希望查看包含电子邮件地址的字段之一。加载对话框和后续 MVC 数据后，我希望执行以下逻辑...

```
if ($('#fldEmail').val() != '') {
    $('#fldEmail').css('color','red');
} 
```

问题是，使用 $(document).ready 事件执行此逻辑还为时过早，因为 MVC 数据尚未加载。

一旦数据完全加载，是否还会触发其他某种事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:55:26.407

将您的函数放入包含在 _Layout.cshtml 文件中的 js 文件中。然后它将在“正确的”文档就绪事件中触发。

# android - 在 SQLite 数据库查询中设置多个选择参数

> ID：12422977
> 
> 赞同：3
> 
> 时间：2012-09-14T10:48:34.570
> 
> 标签：android, sqlite, multipleselection

我将如何查询多个选择 arg？例如，这是我的数据库的格式

![我的数据库](../Images/69f49c50f45e4b8e323b3c40d3712dca.png)

这是我过去只用一个选择参数搜索的代码：

```
public Cursor getType(String type) throws SQLException 
{
    Cursor mCursor =
            db.query(true, DB_TABLE, new String[] {
                    KEY_ROWID,
                    KEY_ALCOHOL, 
                    KEY_TYPE,
                    KEY_BRAND,
                    KEY_PRICE
                    }, 
                    KEY_TYPE + "=?", 
                    new String[] { type },
                    null, 
                    null, 
                    null, 
                    null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;
} 
```

但这仅按 KEY_TYPE 搜索，我将如何设置它以便按 KEY_TYPE、KEY_ALCOHOL 和 KEY_PRICE 搜索？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-14T11:05:01.877

这可能会帮助你

```
 public Cursor getType(String type) throws SQLException 
    {
     Cursor mCursor =
        db.query(true, DB_TABLE, new String[] {
                KEY_ROWID,
                KEY_ALCOHOL, 
                KEY_TYPE,
                KEY_BRAND,
                KEY_PRICE
                }, 
                KEY_TYPE + "=?" + " AND " + KEY_ALCOHOL + "=?" " AND " + KEY_PRICE + "=?", 

                new String[] { type,alcohol,price },
                null, 
                null, 
                null, 
                null);
if (mCursor != null) {
    mCursor.moveToFirst();
 }
 return mCursor;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-14T13:05:59.220

弄清楚了！！感谢@Rajendra 给了我一些代码来构建！您只能将字符串添加到选择参数中，所以我这样做了：

```
public Cursor getTest(String alcohol, String type, long price) throws SQLException 
{
    Cursor mCursor =
            myDataBase.query(true, DB_TABLE, new String[] {
                    KEY_ROWID,
                    KEY_ALCOHOL, 
                    KEY_TYPE,
                    KEY_BRAND,
                    KEY_PRICE
                    }, 
                    KEY_ALCOHOL + "=?" + " AND " + KEY_TYPE + "=?" + " AND " + KEY_PRICE + "<=" + price,
                    new String[] { alcohol, type},
                    null, 
                    null, 
                    null, 
                    null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;
} 
```

它有效！

# sql-server - SQL Server 全文索引出现多个 LCID 错误

> ID：12422983
> 
> 赞同：9
> 
> 时间：2012-09-14T10:48:50.057
> 
> 标签：sql-server, full-text-search, sqlexception, lcid

将一个全文索引列 Language (LCID) 更改为*Neutral*当其他索引列是*英语*时会导致以下错误：

```
System.Data.SqlClient.SqlException (0x80131904):
Full-text table or indexed view has more than one LCID among its
full-text indexed columns 
```

重新填充索引并不能解决错误。

如果 SQL Server 允许我为每个全文列指定不同的语言，那么肯定有办法绕过这个错误吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-18T13:29:01.393

您应该检查全文索引的所有列是否具有相同的语言分词器。转到表的上下文菜单->全文索引->属性。在左侧，您会找到列。选择它并将所有语言分词器编辑为相同。我希望你觉得这很有用

# android-listview - Android - 当我点击 ListView 项目时显示错误的位置

> ID：12422984
> 
> 赞同：0
> 
> 时间：2012-09-14T10:48:53.450
> 
> 标签：android-listview, position

单击列表项时，我在 Toast 中显示位置。但是位置错了。为什么会产生这种类型的问题。请帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:04:55.217

listView.setOnItemClickListener(new OnItemClickListener() {

```
 @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            // TODO Auto-generated method stub

                         Log.i("You clicked On ", arg2+"" );

    }); 
```

# sql - SQL 查询以获取 SQL SERVER 2008 中的死锁

> ID：12422986
> 
> 赞同：31
> 
> 时间：2012-09-14T10:48:59.313
> 
> 标签：sql, sql-server, database, tsql, deadlock

> **可能重复：**
> [帮助解决 Sql Server 2008 中的死锁](https://stackoverflow.com/questions/720508/help-with-deadlock-in-sql-server-2008)

SQLServer 自动记录所有死锁。谁能帮我获取 sql 查询，该查询将捕获正在收集的死锁数据，用于最近的事件。

我正在使用 SQL SERVER 2008 R2 进行开发活动。

谢谢和问候， 桑托什·库马尔·帕特罗

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-14T10:53:34.087

您可以使用 a`deadlock graph`并从日志文件中收集您需要的信息。

`EXEC SP_LOCK`我可以建议的唯一其他方法是使用（即将弃用）`EXEC SP_WHO2`或`sys.dm_tran_locks`表格来挖掘信息。

```
SELECT  L.request_session_id AS SPID, 
    DB_NAME(L.resource_database_id) AS DatabaseName,
    O.Name AS LockedObjectName, 
    P.object_id AS LockedObjectId, 
    L.resource_type AS LockedResource, 
    L.request_mode AS LockType,
    ST.text AS SqlStatementText,        
    ES.login_name AS LoginName,
    ES.host_name AS HostName,
    TST.is_user_transaction as IsUserTransaction,
    AT.name as TransactionName,
    CN.auth_scheme as AuthenticationMethod
FROM    sys.dm_tran_locks L
    JOIN sys.partitions P ON P.hobt_id = L.resource_associated_entity_id
    JOIN sys.objects O ON O.object_id = P.object_id
    JOIN sys.dm_exec_sessions ES ON ES.session_id = L.request_session_id
    JOIN sys.dm_tran_session_transactions TST ON ES.session_id = TST.session_id
    JOIN sys.dm_tran_active_transactions AT ON TST.transaction_id = AT.transaction_id
    JOIN sys.dm_exec_connections CN ON CN.session_id = ES.session_id
    CROSS APPLY sys.dm_exec_sql_text(CN.most_recent_sql_handle) AS ST
WHERE   resource_database_id = db_id()
ORDER BY L.request_session_id 
```

[http://www.sqlmag.com/article/sql-server-profiler/gathering-deadlock-information-with-deadlock-graph](http://www.sqlmag.com/article/sql-server-profiler/gathering-deadlock-information-with-deadlock-graph)

[http://weblogs.sqlteam.com/mladenp/archive/2008/04/29/SQL-Server-2005-Get-full-information-about-transaction-locks.aspx](http://weblogs.sqlteam.com/mladenp/archive/2008/04/29/SQL-Server-2005-Get-full-information-about-transaction-locks.aspx)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-14T13:24:23.090

为了在不使用跟踪的情况下捕获死锁图（您不一定需要分析器），您可以启用跟踪标志 1222。这会将死锁信息写入错误日志。但是，错误日志是文本的，因此您不会得到漂亮的死锁图形图片 - 您必须阅读死锁的文本才能弄清楚。

我会将其设置为启动跟踪标志（在这种情况下，您需要重新启动服务）。但是，您只能使用以下全局跟踪标志命令为当前正在运行的服务实例运行它（不需要重新启动，但在下次重新启动时不会恢复）：

```
DBCC TRACEON(1222, -1); 
```

快速搜索产生了本教程：

*   [使用跟踪标志 1222 查找 SQL Server 死锁](http://www.mssqltips.com/sqlservertip/2130/finding-sql-server-deadlocks-using-trace-flag-1222/?utm_source=AaronBertrand)

另请注意，如果您的系统遇到很多死锁，这真的会影响您的错误日志，并且会变得非常嘈杂，淹没其他重要的错误。

您是否考虑过第三方监控工具？[例如， SQL Sentry](https://www.sentryone.com/products/features/deadlock-analysis)和[Plan Explorer](https://www.sentryone.com/plan-explorer)有一个更好的死锁图，显示对象/索引名称，以及锁定的顺序。作为奖励，这些会在受监控的服务器上自动为您捕获，而无需配置跟踪标志、运行您自己的跟踪等：

[![在此处输入图像描述](../Images/621603d3b85d38ea02a3452fc55c2bf8.png)](https://www.sentryone.com/products/features/deadlock-analysis)

*   [SQL Sentry 和 Plan Explorer 中的新死锁可视化](https://www.sentryone.com/blog/aaronbertrand/new-deadlock-visualizations-in-sql-sentry-and-plan-explorer)
*   [分析 SQL Sentry 中的死锁](https://www.sentryone.com/blog/analyzing-deadlocks-sql-sentry)

*免责声明：我曾经为 SQL Sentry 工作。*

# ios - 任何提示如何在 ios 中做类似的事情

> ID：12422988
> 
> 赞同：-2
> 
> 时间：2012-09-14T10:49:04.753
> 
> 标签：ios

我想创建这样的东西，它将是我的 ipad 应用程序的主页，类似于 chrome 网络浏览器中的选项卡

![在此处输入图像描述](../Images/737e57940fb0286975b328e5ebcf1c27.png)

我不知道如何开始

我也想创建一个包含 3 列、标题和标题的客户表，如下所示

![在此处输入图像描述](../Images/044fd3a4699e675f32e5dfc7a0e1eef2.png)

任何想法如何实现请

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:29:39.143

![在此处输入图像描述](../Images/be46526cd866aeb0e94b1d602a401729.png)

我想你想要这样的东西......所以这是`BHTabbarDemo`。[您可以从https://github.com/fictorial/BHTabBar](https://github.com/fictorial/BHTabBar) 下载此项目。
这提示可能与您想要的不完全相同，但它会对您有所帮助。

有很好的编码！

# ruby-on-rails - Rails：无法使用散列键或索引解析 JSON 对象

> ID：12422989
> 
> 赞同：1
> 
> 时间：2012-09-14T10:49:05.823
> 
> 标签：ruby-on-rails, json, parsing, google-maps

奇怪的问题标签，但仍然想问，因为即使看起来很容易，无论我尝试了什么，我都无法完成

我正在尝试从 Google Maps Directions API 给出的 URL 解析到点之间的持续时间。感谢我从这里收到的答案，我能够捕获 JSON 对象并获取持续时间对象，但是无论我做什么，我都无法从“持续时间”属性中获取内部值“文本”或“值”。

这是回应；

```
{
  "text" : "6 mins",
  "value" : 373
} 
```

这是我在rails中编写的代码

```
@request = Net::HTTP.get(URI.parse('http://maps.googleapis.com/maps/api/directions/json?origin=40.983204,29.0216549&destination=40.99160908659266,29.02334690093994&sensor=false'))
    hash = JSON.parse @request
    duration = hash['routes'][0]['legs'][0]['duration']

    respond_to do |format|
    format.html {render :index}
    format.json {render json: duration}
    end 
```

**注意：**当然，**[0]**和**['text']**方法都试过了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:55:39.203

作为第一件事，您需要将持续时间定义为实例变量以使其在您的视图中可用（如果这是您需要使用它的地方）

```
@duration = hash['routes'][0]['legs'][0]['duration'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T12:13:38.583

duration["text"] 和 duration["value"] 不起作用？

```
 1.9.3p194 :001 > require 'net/http'
     => true 
    1.9.3p194 :002 > require 'json'
     => true 
    1.9.3p194 :003 > @request = Net::HTTP.get(URI.parse('http://maps.googleapis.com/maps/api/directions/json?origin=40.983204,29.0216549&destination=40.99160908659266,29.02334690093994&sensor=false'));
    1.9.3p194 :004 >   hash = JSON.parse @request;
    1.9.3p194 :005 >   duration = hash['routes'][0]['legs'][0]['duration']
     => {"text"=>"6 mins", "value"=>373} 
    1.9.3p194 :006 > duration["text"]
     => "6 mins" 
    1.9.3p194 :007 > duration["value"]
     => 373 
```

# python - 简单的角度和点/ Numpy

> ID：12422992
> 
> 赞同：0
> 
> 时间：2012-09-14T10:49:21.987
> 
> 标签：python, numpy, matplotlib, scipy

我是 Numpy/Matplotlib（和科学 python）的初学者，我发现非常简单的事情做起来相对复杂，因为它们必须手工完成。（就像没有这个很棒的数学环境一样）

我认为至少有可能例如轻松获得两条相交线的角度。

我想做以下事情。我有这三点：

```
 (q)  |
  \   |
   \  |
    \a|
     \|
     (p)
      |
      |
      |
     (o) 
```

1.  我要做的就是计算角度a。
2.  稍后我想得到一个相对于原点 (0,0) 的点 z，它具有从 p 到 q 的距离和角度 a。

第一件事很容易用数学计算，首先我计算两个向量 a1 和 a2。然后我计算：

a = arccos( ( a1 * a2 ) / (|a1| * |a2|) )

等等...

但是我到底怎么在 matplotlib 中做到这一点呢？

有没有办法“只是”给出三分并且它可以做所有事情？我真的看不出在数学环境中自己做这一切的好处。

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2012-09-14T12:12:07.527

Numpy 提供了与数学相同的功能，但同时适用于数字和数组。所以你会这样做：

```
import numpy as np

a = np.arccos((a1 * a2) / (np.abs(a1) * np.abs(a2))) 
```

# css - div的css样式标签

> ID：12422993
> 
> 赞同：-2
> 
> 时间：2012-09-14T10:49:31.520
> 
> 标签：css

我有一个具有这种结构的页面：

```
<div>
    <div id="container">
        <div id="content" >
            <div class="question buttons clearfix nobg">
                <input id="k3" name="k" type="hidden" value="">
                <input id="h3" name="h" type="hidden" value="b07e0bc1c3751d34acbef5b8546b29ae">
                <input id="s3" name="s" type="hidden" value="eyJwYWdlcGF0aCI6IFswXX0=">
                <input type="hidden" name="page" value="0">
                <input type="hidden" name="SID" value="1f7d2a9b3b9450ce2dd746bf0005ebe1">
                <input type="hidden" name="_terminated_redirect" value="">
                <div id="button-fix" class="button-fix" style="text-align:center">
                    <input type="hidden" name="referer" value="">
                    <input id="next-submit-button" type="submit" name="submitbutton" value="Submit">
                </div>
            </div>
        </div>
    </div>
</div> 
```

我想使用 css 对齐到中心。它的样式标签是什么？

请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:52:03.187

```
<style>
    #button-fix {
        margin: 0 auto;
    }
</style> 
```

这是您在**[jsFiddle中的示例的演示](http://jsfiddle.net/E2zVb/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:52:05.803

您需要在外部 DIV 上设置一个宽度（也许给它一个包装器或类似的 ID），然后设置它的边距 - 见下文：

```
#wrapper {
    width:960px; /* whatever you want this to be */
    margin:0 auto;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T10:52:58.137

### CSS：

```
​#container {margin: 10% auto;}​ 
```

### 小提琴：http: [//jsfiddle.net/As2yB/](http://jsfiddle.net/As2yB/)

# excel - 将信息从表单添加到表格

> ID：12422994
> 
> 赞同：1
> 
> 时间：2012-09-14T10:49:48.377
> 
> 标签：excel, vba, excel-2003

我有 EXCEL 文档和表格中的字段列表（在工作表上）。单击按钮后，我需要将输入字段中的所有信息添加到此表中。我需要在 VBA 上编写事件代码。有人可以举例说明如何做到这一点吗？

这是我的桌子的一个例子：

![在此处输入图像描述](../Images/0fc6dd1991172eaee6e87e5b06a59c68.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:42:30.897

演示执行此操作的方法

![在此处输入图像描述](../Images/9037314cb647f57a1598e8189f43909f.png)

表格名称`List1`
文本框名称`TextBox1`和`TextBox2`
按钮名称`CommandButton1`

按钮点击代码

```
Private Sub CommandButton1_Click()
    Dim lst As ListObject
    Dim rng As Range
    Set lst = Me.ListObjects("List1")
    lst.Range.Activate
    Set rng = lst.InsertRowRange
    rng.Cells(1, lst.ListColumns("Item A").Index) = TextBox1.Value
    rng.Cells(1, lst.ListColumns("Item B").Index) = TextBox2.Value
End Sub 
```

编辑

如果列表在另一张纸上，请使用此版本

```
Private Sub CommandButton1_Click()
    Dim lst As ListObject
    Dim rng As Range
    Dim lstRow As ListRow
    Set lst = Me.Parent.Worksheets("Sheet2").ListObjects("List1")
    Set lstRow = lst.ListRows.Add
    Set rng = lstRow.Range
    rng.Cells(1, lst.ListColumns("Item A").Index) = TextBox1.Value
    rng.Cells(1, lst.ListColumns("Item B").Index) = TextBox2.Value
End Sub 
```