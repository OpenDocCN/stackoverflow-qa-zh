# StackOverflow 问答 10066000-10066999

# python - thread.join() 被调用，它不是我

> ID：10066001
> 
> 赞同：1
> 
> 时间：2012-04-08T19:58:05.680
> 
> 标签：python, python-multithreading

在创建 threading.Thread() 的子类时，我已经覆盖了 .join() 方法。当我用测试脚本测试我的类时，它工作正常，但是在我的程序中使用它时，thread.join) 方法被一遍又一遍地调用，但不是我在做。什么叫这个方法？据我所知，没有异常被抛出。使用检查调用函数似乎是 _exitfunc 但我找不到任何关于此的信息。

我的代码很长，但可以在[这里找到](https://github.com/T-Mac/Handle/tree/rewrite)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T20:02:07.290

如果调用函数是`_exitfunc`，则意味着该`join`方法在程序终止时被调用。这是意料之中的，因为 Python 线程框架确实调用`join`所有正在运行的非守护线程作为程序终止的一部分。

最好的解释`_exitfunc`是另一个 Stack Overflow 问题：[What is a python thread](https://stackoverflow.com/questions/8623573/what-is-a-python-thread)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T20:07:37.600

如果您不想`join()`在程序退出时被调用，请将线程设置为守护进程：

```
t.daemon = True 
```

非守护线程将保持进程运行，直到它们全部死亡。

# php - 如何循环遍历这个双数组

> ID：10066015
> 
> 赞同：2
> 
> 时间：2012-04-08T19:59:52.637
> 
> 标签：php

我有一个双数组如下：

```
$values[$ids][$dates] 
```

因此，对于每个 $id，我都有一个 $dates 数组（它们是这种格式的实际日期 - date("Ymd", $i)）。

我想要做的是每个日期循环通过相应的 id 并将它们总结起来。例如，如果第一个日期是“2012-01-01”并且 ID 是 1,2 和 3。我想要

```
$values[1]["2012-01-01"]+$values[2]["2012-01-01"]+$values[3]["2012-01-01"] 
```

然后我想要

```
 $values[1]["2012-01-02"]+$values[2]["2012-01-02"]+$values[3]["2012-01-02"] 
```

最好放入一个数组中，这应该是微不足道的。这是让我感到困惑的循环部分。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T20:03:44.837

```
foreach($values as $id => $dates) {
    foreach($dates as $date => $value) {
        $result[$date] += $value;
    }
} 
```

# java - java连接到sql server 2008 express

> ID：10066018
> 
> 赞同：0
> 
> 时间：2012-04-08T20:00:02.253
> 
> 标签：java, netbeans-7

我尝试连接到我的 BD 这是我的代码

```
 public class JavaSQLTest {

/**
 * @param args the command line arguments
 */

public static void main(String[] args) {
    try {
    Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
    String connectionUrl = "jdbc:sqlserver://FRANK-PC\\SQLEXPRESS" +
        "databaseName=Pendu;";
    Connection con = DriverManager.getConnection(connectionUrl);
    } catch (SQLException e) {
        System.out.println("SQL Exception: "+ e.toString());
    } catch (ClassNotFoundException cE) {
        System.out.println("Class Not Found Exception: "+ cE.toString());
    }
  }
} 
```

运行后我得到 Class Not Found Exception: java.lang.ClassNotFoundException: com.microsoft.sqlserver.jdbc.SQLServerDriver....

如何在 sql server 上正确连接？？？

谢谢弗兰克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T20:09:17.460

您必须将[SQL Server JDBC 驱动程序](http://msdn.microsoft.com/en-us/sqlserver/aa937724)库放入类路径中。

# java - 在 Java 中使用代码块是否会影响性能？

> ID：10066020
> 
> 赞同：4
> 
> 时间：2012-04-08T20:00:12.810
> 
> 标签：java, opengl, lwjgl

我开始使用 Java 中的 OpenGL，我遇到了一种情况，我需要在许多 glBegin() 和 glEnd() 调用之间放置大量代码，并且希望代码能够自动格式化很容易一眼看出哪个代码属于哪个glBegin/glEnd。

为此，我一直在使用匿名代码块，如下所示：

```
glBegin(GL_QUADS);
{
   glVertex2f(100, 100);
   glVertex2f(100+200, 100);
   glVertex2f(100+200, 100+200);
   glVertex2f(100, 100+200);
}
glEnd(); 
```

我的问题是：以这种方式使用代码块是否有任何性能问题，即使非常轻微？还是与编译程序后根本不使用代码块相同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T20:02:18.257

使用这样的块应该没有成本。块是用于范围界定的语言的句法特征，并且没有关联的运行时功能。查看 JVM 执行的编译字节码，无法判断函数的作用域规则是什么，因此 JVM 应该在有和没有块的情况下提供相同的性能。

如果您认为它更易于阅读，请随意执行此操作。事实上，这几乎总是你的首要任务，除非你有理由怀疑。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-08T20:19:55.380

对 glVertex 的无数次调用对您的性能的影响比其他任何事情都大得多。这应该是你真正关心的问题。查看顶点数组和顶点缓冲区对象以获得*真正的*性能提升。您的代码也会看起来更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T20:12:54.107

如果您不打算将变量声明为块的本地变量，则根本不要使用本地块。这样做除了可能导致必须阅读和维护您的代码的人（包括您自己）感到困惑之外，您什么也得不到。

本地块对于在方法内声明短期对象很有用，这些对象仅在块的持续时间内保留在范围内。即便如此，也无法保证他们会在方法结束之前收集到垃圾。

使用本地块作为性能优化是没有实际意义的，您最好对应用程序进行分析并调整被证明很慢的部分，而不是执行诸如此类最终会使代码更难阅读和维护的微优化。

使用本地块来提高可读性，这是值得商榷的，但它可能会为在块内执行的代码的范围问题打开一罐蠕虫的可能性，可能会产生一些非常难以发现的错误。

为了可读性，为什么不在每个`glBegin()`and之前和之后添加一些放置良好的评论`glEnd()`呢？

# javascript - 如何根据对象（而不是数组）的属性执行合并排序？

> ID：10066022
> 
> 赞同：2
> 
> 时间：2012-04-08T20:00:20.460
> 
> 标签：javascript, algorithm, search, sorting

## 背景

使用 JavaScript，我需要根据该对象的给定属性对大型 JSON 对象进行排序。 **我假设合并排序是最快的方法**。如果这不是最快的方法，请告诉我是什么。网上有无数关于数组合并排序的例子，但对象很少。这是一个示例对象：

```
fruitForSale = {
     1: {"type":"orange","UnitPrice":0.20},
     2: {"type":"banana","UnitPrice":0.30},
     3: {"type":"pear","UnitPrice":0.10},
     4: {"type":"apple","UnitPrice":0.50},
     5: {"type":"peach","UnitPrice":0.70}
} 
```

## 问题

使用合并排序（或更快的算法），我将如何对`fruitForSale`对象进行排序，以便最终得到按“类型”排序的对象：

```
 fruitForSale = {
                     4: {"type":"apple","UnitPrice":0.50},
                     2: {"type":"banana","UnitPrice":0.30},
                     1: {"type":"orange","UnitPrice":0.20},
                     5: {"type":"peach","UnitPrice":0.70},
                     3: {"type":"pear","UnitPrice":0.10}                  
                   } 
```

注意：原始`keys`(1,2,3,4 & 5) 需要保持分配给它们各自的对象，因此 key of`1`应该始终匹配，`{"type":"orange","UnitPrice":0.20}`并且 key of`2`将始终匹配`{"type":"banana","UnitPrice":0.30}`等等。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T21:24:00.963

您不能对对象上的键进行排序，但可以保留自己的排序键数组。

```
var fruitForSale = {
     1: {"type":"orange","UnitPrice":0.20},
     2: {"type":"banana","UnitPrice":0.30},
     3: {"type":"pear","UnitPrice":0.10},
     4: {"type":"apple","UnitPrice":0.50},
     5: {"type":"peach","UnitPrice":0.70}
},

sortedKeys = Object.keys(fruitForSale).sort(function (i,j) {
    return fruitForSale[i]["type"] > fruitForSale[j]["type"];
}); 
```

示例： http: [//jsfiddle.net/X2hFt/](http://jsfiddle.net/X2hFt/)（控制台上显示的输出）

并非所有地方都支持 Object.keys，但如果需要，您可以轻松地进行 polyfill。**见**：

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/keys](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/keys)

哦，如果您对 sort 的底层实现感到好奇，请参阅：

[Javascript Array.sort 实现？](https://stackoverflow.com/questions/234683/javascript-array-sort-implementation)

# php - 为什么我不能传递在 Code Igniter 控制器的构造函数中初始化的值？

> ID：10066023
> 
> 赞同：3
> 
> 时间：2012-04-08T20:00:20.703
> 
> 标签：php, codeigniter

我在 Code Igniter 应用程序中有这个控制器。在构造函数中初始化一个值。

```
class Cat extends CI_Controller {
    private $data = array();

    public function __construct() {
        parent::__construct();
        $this->data['sound'] = "meow";
    }                                 
    public function index() {
        $this->load->view('myCatPage', $data); 
    }
} 
```

视图“views/myCatPage.php”看起来像这样。很简单。

```
<?= $sound ?> 
```

为什么 PHP 会注意到这个错误？

```
Message: Undefined variable: sound 
```

我以为我将此变量作为数组 ( `$data`) 中的键发送到视图中。我努力了

```
$this->load->view('myCatPage', $this->data); 
```

但这也奇怪地失败了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-08T20:30:11.520

```
class Cat extends CI_Controller {
    var $data = array();
    public function __construct() {
        parent::__construct();
        $this->data['sound'] = "meow";
    }                                 
    public function index() {
        $this->load->view('myCatPage', $this->data); 
    }
} 
```

# asp.net-mvc - ASP MVC 3 Basic Register / Login / Logout on a different table

> ID：10066025
> 
> 赞同：0
> 
> 时间：2012-04-08T20:00:42.503
> 
> 标签：asp.net-mvc, asp.net-mvc-3, authentication, asp.net-authentication

我已经看到了默认的“帐户”模型和控制器，它是标准 MVC3 应用程序默认的，但是，因为我首先生成了我的数据库。

我已经设计了自己的“用户”表，我希望实现一个简单的注册/登录/注销。

是否有很好的教程向我展示如何做到这一点或您自己的任何建议？非常感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T22:18:30.870

这很简单。创建从抽象类派生的类`MembershipProvider`

```
public class MyMembershipProvider : MembershipProvider
{

} 
```

更多信息：http: [//msdn.microsoft.com/en-us/library/system.web.security.membershipprovider.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider.aspx)

`RoleProvider`如果需要，请执行相同操作。

```
public class MyRoleProvider : RoleProvider
{

} 
```

更多信息：http: [//msdn.microsoft.com/en-us/library/system.web.security.roleprovider.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.roleprovider.aspx)

仅实施您将使用的方法，仅此而已。`ValidateUser()`从（[http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider.validateuser.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider.validateuser.aspx)）开始

不要忘记指出您的提供者，在这种情况下`MyMembershipProvider`，指向 web.config `<system.web> <membership> <providers>`部分。

不要像几乎所有教程/博客文章那样复杂化，这是一项简单的任务。

更新：

在 RoleProvider 你只需要实现

```
public override string[] GetAllRoles()
        {
            return RoleRepository.GetAllRoles();
        }

        public override string[] GetRolesForUser(string username)
        {
            return RoleRepository.GetRolesForUser(username);
        }

public override bool IsUserInRole(string username, string roleName)
        {  
            return RoleRepository.IsUserInRole(username, roleName);
        } 
```

在 MembershipProvider 你只需要实现

```
public override bool ValidateUser(string username, string password)
        {
            return MembershipRepository.IsUserValid(username,password);
        } 
```

`ValidateUser()`无论 MembershipProvider 中的方法如何，您始终可以使用自己的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T21:36:56.803

您可以实现自定义成员资格提供程序：

[http://www.asp.net/web-forms/videos/how-do-i/how-do-i-create-a-custom-membership-provider](http://www.asp.net/web-forms/videos/how-do-i/how-do-i-create-a-custom-membership-provider)

[http://theintegrity.co.uk/2010/11/asp-net-mvc-2-custom-membership-provider-tutorial-part-1/](http://theintegrity.co.uk/2010/11/asp-net-mvc-2-custom-membership-provider-tutorial-part-1/)

# windows - 应用程序验证器调试扩展

> ID：10066029
> 
> 赞同：1
> 
> 时间：2012-04-08T20:01:19.073
> 
> 标签：windows, visual-studio-2010, heap-corruption, application-verifier

我正在 Visual Studio 2010 中编写一个 Windows C++ 程序并且有堆损坏。来自 Application Verifier 的 !heap 和 !avrf 调试器扩展有几个听起来对跟踪这个非常有用的工具，但是我不清楚如何有效地使用 Application Verifier。例如，Application Verifier 文档指出：

> 您可以使用`!avrf -hp -a Address`来显示影响指定地址的所有堆空间操作。

究竟在哪里键入此命令？（是的，我知道地址需要替换为实际地址。）是否需要以任何前缀？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T17:34:25.260

这是一个[Windows 调试器](http://msdn.microsoft.com/en-us/windows/hardware/hh852360)命令。您可以在[此处查看命令](http://msdn.microsoft.com/en-us/library/ff562138%28v=vs.85%29.aspx)的帮助。

# jquery - 在jQuery中返回数组值

> ID：10066030
> 
> 赞同：0
> 
> 时间：2012-04-08T20:01:33.063
> 
> 标签：jquery

我需要从 PHP 返回一个数组，当我打印它时，它显示为未定义。如何获取数组的值？

```
$.ajax({
      type: "POST",
      url: "test2.php",   
      data : {      
                  price : [101, 69, 51],        
                  id : [1, 2, 3]    
},
      success: function(response) { 

         alert response[0];
      }
}) 
```

//PHP

```
echo $_REQUEST["price"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T20:02:52.017

用于`echo json_encode(...);`以 jQuery 理解的方式对其进行编码。然后`response`是一个数组，就像在您的 PHP 代码中一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T20:02:56.123

使用引号：

```
price : '[101, 69, 51]' 
```

并在客户端解析对 JSON 的响应：

```
alert( JSON.parse(response)[0] ) 
```

# java - Java JPanel 动画

> ID：10066032
> 
> 赞同：2
> 
> 时间：2012-04-08T20:01:43.980
> 
> 标签：java, swing, jpanel

所以我正在用 Java 编写一个游戏，我开始使用 drawRect() 方法来表示玩家、敌人和射击。一切都很棒。然后我决定试着变得花哨。我发现自己创建了每个对象的 .png 图像并使用了 Graphics2D drawImage() 方法。一切都开始放缓。有没有其他方法可以加快这个过程？

我的动画基于 Swing Timer

```
 public void paint(Graphics g){
    super.paint(g);
    Graphics2D g2d = (Graphics2D)g;
    player1.paintShips(g);
    g2d.drawImage(bGround, 14, 14, this);
    try{
        for(Shot s: liveRounds){ //liveRounds is an ArrayList of Shots
            if(!inBounds.contains(s.getRect()) || villains.collision(s)){
                if(villains.collision(s)){
                    villains.collided(s, this);
                }
                liveRounds.remove(s);
                roundCount--;
            }
            else{
                s.paintShot(g, this);                   
            }
        }
    }catch(ConcurrentModificationException e){};
    villains.paintEnemyGrid(g, this);
    g2d.setColor(Color.cyan);
    g2d.draw(hitZone1);
    g2d.setColor(Color.red);
    g.drawString("X: " + player1.getX(1) + "  Y: " + player1.getY(1), 370, 150);
    g2d.draw(inBounds);
    g.drawString(score + "", 440, 40);
    g.dispose();
} 
```

关于动画的任何提示或教程？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T20:10:23.820

10 毫秒的延迟是每秒 100 帧。这几乎可以肯定是太快了。

`Collection`此外，如果您想在迭代时删除一个对象，您需要执行以下操作：

```
Iterator<T> itr = collection.iterator();
while(itr.hasNext()) {
    T obj = itr.next();
    if(removeObj) {
        itr.remove();
    }
} 
```

`ConcurrentModificationException`s 导致不确定的行为。你需要避开它们，而不是忽视它们。

# python - python TypeError：'list'对象不可调用错误

> ID：10066037
> 
> 赞同：1
> 
> 时间：2012-04-08T20:02:09.360
> 
> 标签：python

我是 python 新手，我想在这里理解一个基本错误。我在下面的代码中收到 TypeError: 'list' object is not callable 错误。有人可以解释一下我的代码有什么问题吗？

```
graph = {'a': ['b', 'c'], 'b': ['a', 'c'], 'c': ['b', 'd'], 'd': ['a'], 'e': ['a']}

def reachable(graph, node):
    res = [node]
    reachable = graph[node]
    for currentnode in reachable:
        if currentnode not in res :
            reachableNodes = reachable(graph,currentnode) << TypeError: 
            for newNode in reachableNodes:
                if newNode not in res :
                    res.append(newNode)
    return res 
```

错误：TypeError：“列表”对象不可调用错误

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-08T20:03:53.653

您已经通过执行隐藏了函数名称`reachable = graph[node]`。使用不同的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T20:10:09.637

`reachable`是您递归调用的模块名称。

在第 3 行，当您说 时`reachable = graph[node]`，它会覆盖`reachable`绑定到现在要链接到列表（或其他任何内容）的函数的变量。

在第 6 行，您尝试递归调用该函数时，它最终尝试调用列表，`reachable`但它失败了。

要解决此更改变量的名称，您打算将列表保留为不同于`reachable`

```
canreach = graph[node]
for currentnode in canreach: 
```

还要仔细检查您的可达功能。存在无限递归的可能性。每次递归调用`reachable`时，都会创建`res`. 所以`if currentnode not in res`永远不会是假的。尝试将 res 作为参数传递，或将其用作全局参数。

# ruby-on-rails - Heroku (PG::Error: ERROR: column 必须出现在 GROUP BY 子句中或在聚合函数中使用

> ID：10066041
> 
> 赞同：3
> 
> 时间：2012-04-08T20:02:20.000
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, heroku

我在 Heroku 上收到此错误，但不是在本地（在两者上都使用 PostgreSQL）..

错误是：

```
ActiveRecord::StatementInvalid (PG::Error: ERROR:  column "posts.content" must appear in the GROUP BY clause or be used in an aggregate function 
```

我怀疑这与我的帖子模型中的这一行有关：

```
scope :with_tags, lambda { |tags| joins(:tags).group('posts.id').where(:tags => { :id => tags.map { |t| t.id } } ).having("COUNT(*) = ?", tags.length) } 
```

为什么它只发生在 Heroku 上？我如何解决它 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T05:23:18.663

正如有人指出的那样，这是 Postgres 9.0 的一个问题，已在 Postgres 9.1 中修复。在 Heroku 中，您可以使用[Heroku Shared PostgreSQL 插件](https://devcenter.heroku.com/articles/heroku-shared-postgresql)而不是默认数据库，这应该可以解决问题。

# audio - 音频按钮不播放

> ID：10066042
> 
> 赞同：1
> 
> 时间：2012-04-08T20:02:20.350
> 
> 标签：audio, sdk, playback

我正在使用音频工具箱并选择以下代码来播放 30 秒的 m4a 文件。

```
(IBAction)playFullSongButton:(id)sender 
{

    CFBundleRef mainBundle= CFBundleGetMainBundle();

    CFURLRef soundFileUrlRef;

    soundFileUrlRef = CFBundleCopyResourceURL(mainBundle, 

    (CFStringRef)@"fullsong",CFSTR("m4a"),NULL);

    UInt32 soundID;

    AudioServicesCreateSystemSoundID(soundFileUrlRef, &soundID);

    AudioServicesPlaySystemSound(soundID);

} 
```

它适用于我所有的 2 秒和 3 秒文件，但我假设 30 秒太长了。有什么建议么？请记住，我对此完全陌生，谢谢！

# php - PHP：循环遍历多维数组

> ID：10066043
> 
> 赞同：3
> 
> 时间：2012-04-08T20:02:37.337
> 
> 标签：php, loops, multidimensional-array, foreach

我需要能够一次只循环一个部分来填充某些选项卡的内容。`Videos`仅循环数组的最佳方法是什么？

这是我尝试过的：

```
foreach ($result['videos'] as $r) {
    $content = '<tr>';
    $content .= '<td>' . $r['id'] . '</td>';
    $content .= '<td>' . $r['name'] . '</td>';
    $content .= '<td>' . $r['body'] . '</td>';
    $content .= '<td>' . $r['created'] . '</td>';
    $content .= '<td>' . $r['modified'] . '</td>';
    $content .= '</tr>';
    echo $content;

}

Array
(
    [images] => Array(...)

    [videos] => Array
        (
            [0] => Array
                (
                    [id] => 7
                    [type] => 2
                    [name] => My Video
                    [body] => my_video.flv
                    [created] => 0000-00-00 00:00:00
                    [modified] => 2012-04-07 00:00:00
                )

            [1] => Array
                (
                    [id] => 13
                    [type] => 2
                    [name] => Yet another video
                    [body] => my_vid_man.flv
                    [created] => 0000-00-00 00:00:00
                    [modified] => 0000-00-00 00:00:00
                )

            [2] => Array
                (
                    [id] => 25
                    [type] => 2
                    [name] => asasd
                    [body] => asdasd
                    [created] => 0000-00-00 00:00:00
                    [modified] => 0000-00-00 00:00:00
                )

        ) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T20:04:40.440

```
<?php
$result = array(...);

foreach( $result['videos'] as $video )
{
  // $video is each individual item in the videos array
} 
```

# api - API 密钥无效或未经 Google 批准

> ID：10066045
> 
> 赞同：3
> 
> 时间：2012-04-08T20:02:38.680
> 
> 标签：api, google-maps-api-3, api-key

我目前正在将我的一个网站从旧系统升级到 HTML5，我在使用 Google Maps JavaScript API v3 时遇到了一些问题。要从他们的 API 中获取数据，你必须有一个密钥——当然——但问题就在这里。

问题是，即使我在他们的 Google API 控制台上添加了正确的密钥，我也会一直收到“权限被拒绝”，然后是一个警告窗口，提示我没有真正的 API 密钥或它没有被 Google Maps JavaScript API v3 批准。

我在 Google API 控制台的“服务”中打开了“Google Maps API v3”并支付了“账单”，但事实证明这根本没有帮助。我正在使用这个 URL 访问他们的 API：`http://maps.googleapis.com/maps/api/js?key={MY_KEY}&sensor=false`并且我已经**非常仔细地阅读了他们的**[文档](https://developers.google.com/maps/documentation/javascript/tutorial) ，但我目前没有想法。

 **你知道这里有什么问题吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T20:16:55.600

在没有链接的情况下检查...

您可以拥有多个项目（下拉菜单，控制台左上角），并且每个键都与一个项目相关联。必须为正确的项目启用 Maps v3。

顺序应该是：

1.  从下拉列表中选择项目（或创建一个）
2.  选择该项目所需的服务
3.  选择合作者（如果有）
4.  为该项目设置访问密钥。每个项目可以有多个密钥，并指定可以使用密钥的域。
5.  如果需要，请设置帐单。

左边的菜单按逻辑顺序排列。**

# javascript - javascript交换文本块onclick锚链接

> ID：10066047
> 
> 赞同：0
> 
> 时间：2012-04-08T20:02:48.533
> 
> 标签：javascript, text, onclick, swap

这应该很容易，但它不能正常工作......我对javascript很生疏，无法弄清楚我错过了什么。

我有一个导航栏，当人们点击小箭头时我想消失，只留下第二个箭头。当用户单击第二个箭头时，导航栏会重新出现。所有的导航栏都在一个标签中。导航菜单本身很长，原因之一是我想让用户能够打开和关闭它。

head中的Javascript函数如下：

```
<script type="text/javascript">
function collapseMenu()
{document.getElementById("navbar").innerHTML ='<td id=navbar2><a href="javascript:void(0)" onclick="collapseMenu('navbar2');"><img src="arrow.gif"></a></td>';
}</script> 
```

页面上的文字是：

```
<div id='navbar'>
<td>
<a href="javascript:void(0)" onclick="collapseMenu('navbar');"><img src="arrow.gif"></a>
</td>
</div> 
```

将 id 放在 div 标签中，当您单击链接时它会显示箭头，但不会删除 div 标签之间的旧 html。使用 span 而不是 div 也是一样，单引号和双引号之间没有区别。当我将 id="navbar" 移动到标签时，导航栏确实消失了，但它使旧 td 标签大小的背景颜色保持不变。我希望它变成空白，除了小箭头。所以问题 1 是为什么 div 和 span 不起作用，或者 td 在旧空间中留下背景颜色。

第二个问题是如何通过变量在文本中指定 innerHTM。不必将所有这些都放在标题中会很好。

感谢您的任何想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T16:57:19.220

下面留下一行背景展开gif。将 gif 移到 div 之外会导致单元格对齐。意识到表格不再被认为是最佳实践，但重做整个站点的表格结构将是一项艰巨的任务。

```
 <html>
    <head>
        <script type="text/javascript">
            function toggleBar(obj) {
                var navbar = document.getElementById("navbar");
                if (navbar.style.display == "none") {
                    navbar.style.display = "";
                    obj.innerHTML = "<img src='images/collapse.gif' alt='Hide Menu'>";
                } else {
                    navbar.style.display = "none";
                    obj.innerHTML = "<img src='images/expand.gif' alt='Show Menu'>";
                }
            }
        </script>
    </head>
    <body>
    <body><table><tr><td valign="top">
        <div style="background-color:lightgrey;text-align:left;padding-left:4px;width:80px;">
            <a href="javascript:void(0)" onclick="toggleBar(this);"><img src="images/collapse.gif" 

    alt="Hide Menu"></a>
            <div id="navbar">menu1<br>menu2<br>menu3<br>menu4</div>
        </div>
    <td valign="top"><table><tr style="background-color:blue;"><td><font 

    color="white">Title</font></td></tr>
    <tr><td>Body Text</td></tr></table>
    </body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T11:59:38.160

不知道 jsfiddle 是什么，但如果放入 .htm 文件，以下代码会重现问题。谢谢。

```
<html>
<head>
<script type="text/javascript">
function hideBar()
{document.getElementById("navbar").innerHTML ='<td>show navbar</td>';
}</script>
<script type="text/javascript">
function hideBar2()
{document.getElementById("navbar2").innerHTML ='<td>show navbar</td>';
}</script>
</head>
<body>
<table width=500>
id in td tag
<tr>
<td rowspan=3 bgcolor="yellow" id="navbar">
<a href="javascript:void(0)" onclick="hideBar('navbar');">hide 

menu</a><br>menu1<br>menu2<br>menu3<br>menu4
</td>
</tr>
<tr><td>lots of content here<br>more content<br>more content<br>more<br>blah<br>blah<br>blah</td>
</tr>

</table>

<table width=500>
id in div tag
<tr>
<div id="navbar2">
<td rowspan=3 bgcolor="yellow">
<a href="javascript:void(0)" onclick="hideBar2('navbar2');">hide 

menu</a><br>menu1<br>menu2<br>menu3<br>menu4
</td></div>
</tr>
<tr><td>lots of content here<br>more content<br>more content<br>more<br>blah<br>blah<br>blah</td>
</tr>

</table>
</body>
</html> 
```

# string - 如何搜索包含特定字符串的所有文件？

> ID：10066057
> 
> 赞同：0
> 
> 时间：2012-04-08T20:03:34.930
> 
> 标签：string, search, recursion

假设您正在处理一个包含多个文件、目录和子目录的大型项目。在其中一个目录/子目录/文件中，您已经定义了一个方法，但是现在您想确切地知道整个项目中的哪些文件一直在调用您的方法。你怎么做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T20:17:07.763

最常见的方法是使用您的编辑器。例如，如果您使用 etags 创建标签索引，emacs 就可以做到这一点。

来源：[http ://www.gnu.org/software/emacs/emacs-lisp-intro/html_node/etags.html](http://www.gnu.org/software/emacs/emacs-lisp-intro/html_node/etags.html)

您只需键入 M-。并输入您要访问的函数的名称，emacs 会将您带到那里。

我不知道您使用的是什么系统或哪个编辑器，但大多数编辑器都有类似的功能。

如果您不使用 emacs，另一种跟踪功能并获得许多其他好功能的好方法是使用版本控制系统。与 git 一样，它提供了非常快速的搜索。

如果您不使用版本控制系统，您可能希望查看专为搜索而设计的程序。像[OpenGrok](http://opengrok.github.io/OpenGrok/)一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T20:32:33.223

你提到了 grep 所以我会把这个解决方案扔在那里。一个更强大的解决方案是按照 Fibbe 的建议实施版本控制系统。

`find . -exec grep 'method_name' {} \; -print 2> /dev/null`

这个想法是，对于在当前目录和子目录中找到的每个文件，在该文件上执行“method_name”的 grep。`2> /dev/null`如果您不想收到有关您无权访问的所有目录和文件的警告，那就太好了。

# shared-hosting - 共享主机环境中的哪些系统配置或故障可以使只读静态变量无效？

> ID：10066063
> 
> 赞同：1
> 
> 时间：2012-04-08T20:04:20.483
> 
> 标签：shared-hosting, static-members

我在共享主机系统上有一个 ASP.Net 4.0 网站。应用程序在 20 分钟不活动后被回收。

在我的应用程序中，一些静态变量在 application_start 中初始化。

当下一个请求进来时，应用程序应该重新启动，执行 application_start 并重置静态变量。

在不活动期之后，当我访问依赖于静态变量的页面时，它们为空并且会产生错误。

由于这些变量是在 application_start 中初始化的，因此在不活动期间它们会为 null 似乎很奇怪，因为应用程序重新启动会重新初始化它们。

事实上，当我看到空引用错误时，回收应用程序池（并执行 application_start）可以解决问题，直到下一次从内存中删除应用程序。

我想知道当应用程序从内存中删除时是否会发生其他类型的系统内存问题，因为如果应用程序只是被回收，那么 application_start 中静态变量的重新初始化将意味着静态变量没有理由为空。

由于静态变量不是垃圾收集的，因此它们在初始化后绝不应该为空。

这些错误永远不会发生在任何开发人员机器上，只会发生在共享主机系统上。在 application_start 中初始化的静态变量变为 null 的其他原因可能是什么？

没有重置变量的代码。它们是私有字段，仅包含通过 get 方法进行的访问。

代码：

```
private static List<State> stateList;

public static void LoadStaticCache()
{
    var service = DependencyResolver.Current.GetService<ILocationService>();
    stateList = service.GetAllStates().ToList();
}

public static List<State> GetStates()
{
   return stateList;
} 
```

当满足非活动期时，下一次访问stateList时为null。

但是，它总是在 application_start 中初始化。除非是系统问题，否则它怎么可能为空？

```
 protected void Application_Start()
    {
        StaticCache.LoadStaticCache();
    } 
```

回收应用程序池可以 100% 地解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T16:12:21.020

听起来您的问题与会话超时有关。

与早期版本的 IIS 不同，如果您的托管服务器使用集成模式运行 IIS 7.0 或更高版本，Application_Start 将无法访问当前的 HTTP 上下文，因为它还不存在。经典模式下的 IIS 7.0 不会有任何问题。

无论哪种情况，解决方案是将初始化移动到 Global.asax 中的 Session_Start：

```
//protected void Application_Start()
//{
//    StaticCache.LoadStaticCache();
//}

protected void Session_Start(object sender, EventArgs e) 
{
    StaticCache.LoadStaticCache();
} 
```

# c# - 我怎样才能把@放在select sql语句中？

> ID：10066073
> 
> 赞同：2
> 
> 时间：2012-04-08T20:05:08.517
> 
> 标签：c#, sql

我必须使用“@”（我不知道它的名字）。我可以在更新删除或插入语句中使用它，但我不能在其中使用它它给出的 URL 必须声明

```
 //SQL string to count the amount of rows within the OSDE_Users table
        string sql = "SELECT * FROM RSSFeeds where URL = @URL";

        SqlCommand cmd = new SqlCommand(sql, Connect());

        cmd.Parameters.Add("@URL", SqlDbType.VarChar, 500).Value = url;
        closeConnection();
        SqlDataAdapter adapt = new SqlDataAdapter(sql, Connect());
        DataSet ds = new DataSet();
        adapt.Fill(ds);

        // result of query filled into datasource
        adapt.Dispose();

        closeConnection();

        return ds; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T20:07:43.947

我只能假设这条线是不正确的：

```
cmd.Parameters.Add("@URL", SqlDbType.Int).Value = url; 
```

可能 URL 不是 Int 而是 NVarChar 或其他字符类型
如果是这种情况，那么以这种方式更改您的行
（255 是您的字段 URL 的假定长度）

```
cmd.Parameters.Add("@URL", SqlDbType.NVarChar, 255).Value = url; 
```

顺便说一下，'@' 被称为“参数前缀”

编辑：看到 OP 的最后一次编辑，我更新了我的答案以显示我认为正确的方法。

```
 //SQL string to count the amount of rows within the OSDE_Users table 
    string sql = "SELECT * FROM RSSFeeds where URL = @URL"; 
DataSet ds = new DataSet(); 
    using(SqlConnection cnn = Connect())
    using(SqlCommand cmd = new SqlCommand(sql, cnn)) 
    {
        cmd.Parameters.Add("@URL", SqlDbType.VarChar, 500).Value = url; 
        using(SqlDataAdapter adapt = new SqlDataAdapter(cmd))
        {

            adapt.Fill(ds); 
        }
    }
    return ds; 
```

我改变了什么：

*   将每个一次性对象封装在`using`保证关闭/处置对象的语句中
*   仅调用一次 Connect() 并捕获返回以重用的 SqlConnection 而无需创建另一个
*   使用之前创建的 SqlCommand 创建了 SqlDataAdapter（所以@URL 参数到达了 Sql）

OP 使用了 closeConnection() 并且我们看不到此方法的内部，但我认为这`using`足以关闭和处理连接。

编辑：创建 SqlDataAdapter 的行应该是

```
using(SqlDataAdapter adapt = new SqlDataAdapter(cmd)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T20:08:47.507

```
cmd.Parameters.AddWithValue("@URL", url); 
```

应该管用

# .net - 将 CollectionViewSource 绑定到 ObservableCollection

> ID：10066075
> 
> 赞同：7
> 
> 时间：2012-04-08T20:06:34.047
> 
> 标签：.net, binding, collectionviewsource

无法绑定 CollectionViewSource

DocProps 是公共财产

```
public ObservableCollection<DocProp> DocProps1 
```

DataContext 是自我

```
DataContext="{Binding RelativeSource={RelativeSource self}}" 
```

这有效

```
<ListBox Grid.Row="0" Grid.Column="0" ItemsSource="{Binding Path=DocProps1}"> 
```

我无法连接 CollectionViewSource 进行排序 这甚至没有得到 DocProps1

```
 <ListBox Grid.Row="0" Grid.Column="0">
        <ListBox.ItemsSource>
            <Binding>
                <Binding.Source>
                    <CollectionViewSource Source="{Binding Path=DocProps1}">
                        <CollectionViewSource.SortDescriptions>
                            <scm:SortDescription PropertyName="Name" />
                        </CollectionViewSource.SortDescriptions>
                    </CollectionViewSource>
                </Binding.Source>
            </Binding>
        </ListBox.ItemsSource> 
```

如何将 CollectionViewSource 绑定到公共属性？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-10T15:28:25.143

它将以这种方式工作：

```
<ListBox ItemsSource="{Binding}">
  <ListBox.DataContext>
    <CollectionViewSource Source="{Binding Path=DocProps1}">
    </CollectionViewSource>
  </ListBox.DataContext>    
</ListBox> 
```

这篇文章[XAML Binding to a CollectionViewSource property on a ViewModel](https://stackoverflow.com/questions/3009454/xaml-binding-to-a-collectionviewsource-property-on-a-viewmodel)对此行为有一些解释

# java - XML 解组到 java 对象

> ID：10066078
> 
> 赞同：1
> 
> 时间：2012-04-08T20:06:55.930
> 
> 标签：java, xml, jaxb, unmarshalling

XML 响应

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes" ?> 
- <Film>
  <film_id>1</film_id> 
  <title>ACADEMY DINOSAUR</title> 
  <description>xxx</description> 
  <length>86</length> 
  <image_id>1</image_id> 
-  <image>
   <image_id>1</image_id> 
   <name>1.jpg</name> 
   <size>408307</size> 
   <type>.jpg</type> 
   <content>base64 byte</content>
   </image>
 </Film> 
```

我为 Film 和 Image 创建了 pojo 类。

电影.java

```
public class Film {
    private String film_id;
    private String title;
    private String description;
    private String length;
    private String image_id;
    private Image image;
//setter and getter methods
} 
```

图像.java

```
public class Image {
    private int image_id;
    private String name;
    private int size;
    private String type;
    private byte[] content;
//setter and getter methods
} 
```

请帮助我是新手，我应该使用 JAXB。

**解决方案：**

我已经添加了

```
@XmlRootElement(name = "film")
public class Film {
    private int film_id;
    private String title;
    private String description;
    private int length;
    private int image_id;
    private Image image;
} 
```

在 Image 的 getter 方法上，我添加了 @XMLElement(name="image")。

在 Image 类上，我添加了一个注释 @XmlRootElement(name = "image")，它给了我想要的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T09:55:19.187

让你的用例工作唯一需要做的就是`@XmlRootElement`在类上添加一个注释`Film`：

```
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement(name="Film")
public class Film {
    private String film_id;
    private String title;
    private String description;
    private String length;
    private String image_id;
    private Image image;
} 
```

**解决方案的另一部分**

> 在 Image 的 getter 方法上，我添加了 @XMLElement(name="image")。
> 
> 在 Image 类上，我添加了一个注释 @XmlRootElement(name = "image")，它给了我想要的东西。

这些步骤都不需要映射您的特定用例。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-31T15:56:01.487

尝试将您的数组转换为复制类列表（为我工作）

正如我所见 byte[] -> List < Byte>

# asp.net - ASP.Net，Datagrid：根据值以不同方式呈现列？

> ID：10066079
> 
> 赞同：0
> 
> 时间：2012-04-08T20:07:01.173
> 
> 标签：asp.net, datagrid

我看了又看，我没有看到这个问题的答案。

我有一个绑定到数据网格的日期时间值。我想将该列显示为日期时间，或者如果所述日期时间为空，则为用户单击的 asp:button。

我似乎无法找到有关如何执行此操作的具体信息。我最初的方法是 <% if blah blah then %>，但我似乎无法*以*这种方式获取数据项。我也看过事件，但没有什么可以作为解决方案跳出来（我确定我错了，我只是没有看到它）。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T20:31:11.773

假设您实际上是指`GridView`代替`DataGrid`，否则它会类似地工作（`ItemDataBound`等等）。

您可以将 a[`TemplateField`](http://msdn.microsoft.com/en-us/library/bb288032.aspx)与 a`Label`和 a一起使用，并在以下`Button`位置切换两个控件的可见性[`RowDataBound`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)：

```
protected void Grid_RowDataBound(Object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        var row = ((DataRowView)e.Row.DataItem).Row;
        DateTime? date = row.Field<DateTime?>("DateColumn");
        var lblDate = (Label)e.Row.FindControl("LblDate");
        var btnDate = (Button)e.Row.FindControl("BtnDate");
        lblDate.Visible = date.HasValue;
        btnDate.Visible = !date.HasValue;
        if (date.HasValue) lblDate.Text = date.ToString();
    }
} 
```

aspx：

```
<asp:GridView ID="GridView1" AutoGenerateColumns="false" OnRowDataBound="Grid_RowDataBound" runat="server">
<Columns>
    <asp:TemplateField HeaderText="DateColumn">
        <ItemTemplate>
            <asp:Label ID="LblDate" runat="server"></asp:Label>
            <asp:Button ID="BtnDate" Text="click me" runat="server"  />
        </ItemTemplate>
    </asp:TemplateField>
</Columns>
</asp:GridView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T21:03:21.110

如果您使用的是 ASP.NET 3.5 或更高版本，则应该使用 Gridview。使用模板字段列，添加按钮和标签。在 rowdatabound 事件中，您应该使用 Visible 属性仅显示按钮或标签，具体取决于是否有日期。

# c - Winsock 编程中的超时

> ID：10066083
> 
> 赞同：0
> 
> 时间：2012-04-08T20:07:46.617
> 
> 标签：c, windows, winsock

我正在使用 go-back-n 窗口设置基本的 UDP 套接字文件传输服务器/客户端设置，不幸的是，由于分配限制，我一直使用 Winsock 进行设置。

通常，为了管理未完成数据包的超时，我只会使用 signal() 但不确定这如何/是否真的在 Windows 上有效，以及这是否真的是最好的解决方案。是否有一些最好的方法来处理这些类型的套接字超时？还是我最好只使用 select() 管理超时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T21:36:57.227

如果你的应用程序有一个“main()”函数，那么使用 select() 来管理超时是最方便的，因为它的优点是它只使用套接字 api 调用，所以代码应该在任何支持 bsd 样式套接字 api 的平台上工作并且不需要 Windows 消息循环。

如果你正在编写一个窗口 GUI 风格的应用程序——通常带有一个`WinMain()`入口点和一个消息循环，那么`WSAAsyncSelect`套接字句柄上的 () 将获得发布到 HWND 的读（和写）就绪通知消息——`SetTimer`同样发布定期`WM_TIMER`通知，并且`GetTickCount`可以用于检测哪个套接字空闲时间过长。

# c++ - C++ Windows 窗体应用程序，试图让我的按钮链接到网页

> ID：10066086
> 
> 赞同：0
> 
> 时间：2012-04-08T20:08:20.590
> 
> 标签：c++, url, button

所以我在我的 InitializeComponent 函数中设置了所有按钮。我将这段代码放入以使按钮关闭应用程序，但我希望它将用户重定向到网页。对于习惯于制作应用程序的人来说可能很简单......我希望。

初始化按钮的代码

```
 this->button1->Location = System::Drawing::Point(128, 82);
        this->button1->Name = L"button1";
        this->button1->Size = System::Drawing::Size(75, 23);
        this->button1->TabIndex = 2;
        this->button1->Text = L"What\?";
        this->button1->UseVisualStyleBackColor = true;
        this->button1->Click += gcnew System::EventHandler(this, &Form1::button1_Click_2); 
```

将其设置为关闭的代码，但我想要一个重定向

```
#pragma endregion
private: System::Void button1_Click_2(System::Object^  sender, 
                                      System::EventArgs^ e) {
    Close();
} 
```

# jquery - 如何在 ASP.NET 表单中使用 jQuery 添加动态字段？

> ID：10066087
> 
> 赞同：0
> 
> 时间：2012-04-08T20:08:22.823
> 
> 标签：jquery, asp.net, c#-4.0

我需要使用 jQuery 添加动态字段，如下所示： http: [//bit.ly/AByQZb](http://bit.ly/AByQZb)
但问题是我不知道如何使用 asp.net 表单来执行此操作，因此我可以在代码中看到这些新字段在后面。
我想我可以使用中继器并在按钮的单击方法后面的代码中增加或减少包含我想要的字段的项目数，有更好的主意（客户端方法）吗？

感谢先进

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T20:25:33.080

只要在`<form>`标签内添加字段，并且名称和 ID 不与任何其他元素冲突，它们仍将是回发数据的一部分，因此您应该能够使用`Request.Form`集合访问值。

**C＃：**

```
string dynamicValue = Request.Form["dynamicTextName"].ToString(); 
```

**VB：**

```
Dim dynamicValue as String = Request.Form("dynamicTextName").ToString() 
```

由于这些字段是在客户端动态添加的，因此根据定义，它们不是通常`runat="Server"`在标记中具有属性的服务器端控件。因此，您不会在代码隐藏中看到相应的对象，该对象允许您访问各种属性。

您可以使用 Fiddler、IE 开发工具或 Firebug 来验证动态值是否与表单一起提交。

# xml - 从多个重叠元素中提取唯一文本

> ID：10066089
> 
> 赞同：1
> 
> 时间：2012-04-08T20:08:28.787
> 
> 标签：xml, xslt, xpath

我将如何提取以下 XML`SectionLabels`中每个的唯一性：`FormDef`

```
<XML>
<FormDef OID="F_TEST_1" Name="Test Form 1">
    <ItemGroupRef ItemGroupOID="TEST_GROUP_1" />
    <ItemGroupRef ItemGroupOID="TEST_GROUP_4" />
</FormDef>
<FormDef OID="F_TEST_2" Name="Test Form 2">
    <ItemGroupRef ItemGroupOID="TEST_GROUP_2" />
</FormDef>
<FormDef OID="F_TEST_3" Name="Test Form 3">
    <ItemGroupRef ItemGroupOID="TEST_GROUP_2"/>
    <ItemGroupRef ItemGroupOID="TEST_GROUP_3"/>
</FormDef>
<FormDef OID="F_TEST_4" Name="Test Form 4">
    <ItemGroupRef ItemGroupOID="TEST_GROUP_4"/>
</FormDef>

<ItemGroupDef OID="TEST_GROUP_1" Name="Ungrouped">
    <ItemRef ItemOID="I_MSA1_INIT" />
    <ItemRef ItemOID="I_MSA1_FORMD" />
    <ItemRef ItemOID="I_MSA1_MSA1_CONS" />
    <ItemRef ItemOID="I_MSA1_MSA1_PGT" />
</ItemGroupDef>
<ItemGroupDef OID="TEST_GROUP_2" Name="MSA1_complyreasG" >
    <ItemRef ItemOID="I_MSA1_MSA1_NOELIGREAS" />
    <ItemRef ItemOID="I_MSA1_MSA1_COMPLYREAS" />
</ItemGroupDef>
<ItemGroupDef OID="TEST_GROUP_3" Name="Ungrouped">
    <ItemRef ItemOID="I_MSA2_INIT" />
    <ItemRef ItemOID="I_MSA2_FROMD" />
    <ItemRef ItemOID="I_MSA2_IDV" />
    <ItemRef ItemOID="I_MSA2_MSA2_INITBF" />
</ItemGroupDef>
<ItemGroupDef OID="TEST_GROUP_4" Name="MSA2_POARTprecG">
    <ItemRef ItemOID="I_MSA2_MSA2_POARTPREC" />
    <ItemRef ItemOID="I_MSA2_MSA2_POARTNBV" />
    <ItemRef ItemOID="I_MSA2_MSA2_LOARTPREC" />
</ItemGroupDef>

<ItemDef OID="I_MSA1_INIT">
    <ItemDetails ItemOID="I_MSA1_INIT">
        <ItemPresentInForm FormOID="F_TEST_1">
            <SectionLabel>Section1</SectionLabel>
        </ItemPresentInForm>
    </ItemDetails>
</ItemDef>
<ItemDef OID="I_MSA1_FORMD">
    <ItemDetails ItemOID="I_MSA1_FORMD">
        <ItemPresentInForm FormOID="F_TEST_1">
            <SectionLabel>Section2</SectionLabel>
        </ItemPresentInForm>
    </ItemDetails>
</ItemDef>
<ItemDef OID="I_MSA1_MSA1_CONS">
    <ItemDetails ItemOID="I_MSA1_MSA1_CONS">
        <ItemPresentInForm FormOID="F_TEST_1">
            <SectionLabel>Section3</SectionLabel>
        </ItemPresentInForm>
    </ItemDetails>
</ItemDef>
<ItemDef OID="I_MSA1_MSA1_NOELIGREAS">
    <ItemDetails ItemOID="I_MSA1_MSA1_NOELIGREAS">
        <ItemPresentInForm FormOID="F_TEST_2">
            <SectionLabel>Section1</SectionLabel>
        </ItemPresentInForm>
        <ItemPresentInForm FormOID="F_TEST_3">
            <SectionLabel>Section1</SectionLabel>
        </ItemPresentInForm>
    </ItemDetails>
</ItemDef>
<ItemDef OID="I_MSA1_MSA1_COMPLYREAS">
    <ItemDetails ItemOID="I_MSA1_MSA1_COMPLYREAS">
        <ItemPresentInForm FormOID="F_TEST_2">
            <SectionLabel>Section2</SectionLabel>
        </ItemPresentInForm>
        <ItemPresentInForm FormOID="F_TEST_3">
            <SectionLabel>Section2</SectionLabel>
        </ItemPresentInForm>
    </ItemDetails>
</ItemDef>
<ItemDef OID="I_MSA2_INIT">
    <ItemDetails ItemOID="I_MSA2_INIT">
        <ItemPresentInForm FormOID="F_TEST_3">
            <SectionLabel>Section1</SectionLabel>
        </ItemPresentInForm>
    </ItemDetails>
</ItemDef>
<ItemDef OID="I_MSA2_FROMD">
    <ItemDetails ItemOID="I_MSA2_FROMD">
        <ItemPresentInForm FormOID="F_TEST_3">
            <SectionLabel>Section2</SectionLabel>
        </ItemPresentInForm>
    </ItemDetails>
</ItemDef>
<ItemDef OID="I_MSA2_IDV">
    <ItemDetails ItemOID="I_MSA2_IDV">
        <ItemPresentInForm FormOID="F_TEST_3">
            <SectionLabel>Section3</SectionLabel>
        </ItemPresentInForm>
    </ItemDetails>
</ItemDef>
<ItemDef OID="I_MSA2_MSA2_POARTPREC">
    <ItemDetails ItemOID="I_MSA2_MSA2_POARTPREC">
        <ItemPresentInForm FormOID="F_TEST_1">
            <SectionLabel>Section1</SectionLabel>
        </ItemPresentInForm>
        <ItemPresentInForm FormOID="F_TEST_4">
            <SectionLabel>Section1</SectionLabel>
        </ItemPresentInForm>
    </ItemDetails>
</ItemDef>
<ItemDef OID="I_MSA2_MSA2_POARTNBV">
    <ItemDetails ItemOID="I_MSA2_MSA2_POARTNBV">
        <ItemPresentInForm FormOID="F_TEST_1">
            <SectionLabel>Section2</SectionLabel>
        </ItemPresentInForm>
        <ItemPresentInForm FormOID="F_TEST_4">
            <SectionLabel>Section2</SectionLabel>
        </ItemPresentInForm>
    </ItemDetails>
</ItemDef>
<ItemDef OID="I_MSA2_MSA2_LOARTPREC">
    <ItemDetails ItemOID="I_MSA2_MSA2_LOARTPREC">
        <ItemPresentInForm FormOID="F_TEST_1">
            <SectionLabel>Section3</SectionLabel>
        </ItemPresentInForm>
        <ItemPresentInForm FormOID="F_TEST_4">
            <SectionLabel>Section3</SectionLabel>
        </ItemPresentInForm>
    </ItemDetails>
</ItemDef>
</XML> 
```

首先我定义一个键：

```
<xsl:key name="labels" match="ItemDef/ItemDetails/ItemPresentInForm" use="@FormOID" /> 
```

然后像这样在选择中使用它：

```
<xsl:variable name="sections" 
                select="//*[local-name()='ItemDef']/*[local-name()='ItemDetails']/*[local-name()='ItemPresentInForm']
                           [generate-id() = generate-id(key('labels', @FormOID))]">

                <xsl:value-of select="./SectionLabel" />

            </xsl:variable> 
```

但这会返回：

第
1 节 第 1 节 第 1 节
第 1
节

更改键以在`SectionLabel`:

```
<xsl:key name="labels" match="ItemDef/ItemDetails/ItemPresentInForm" use="SectionLabel" /> 
```

XSLT 进行转换：

```
 <xsl:variable name="sections" 
                select="//*[local-name()='ItemDef']/*[local-name()='ItemDetails']/*[local-name()='ItemPresentInForm']
                           [generate-id(.) = generate-id(key('labels', SectionLabel))]">

                <xsl:value-of select="./SectionLabel" />

            </xsl:variable> 
```

返回这个：

第1
节2
节
3
节4
节1
节2节3节4节1节2节3 节
4
节1
节2
节
3
节 4
节

当我遍历每个 FormDef 时，这是文档中的所有部分标签。我的目标是获得一个输出，其中仅提取当前 FormDef 的部分标签。

预期的输出应该是：

```
Form OID="F_TEST_1"
Labels: Section1, Section2, Section3 

Form OID="F_TEST_2"
Labels: Section1, Section2 

Form OID="F_TEST_3"
Labels: Section1, Section2, Section3 

Form OID="F_TEST_4"
Labels: Section1, Section2, Section3 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T23:10:32.577

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:key name="kLabelsInForm" match="SectionLabel"
  use="concat(../@FormOID, '+', .)"/>

 <xsl:template match="FormDef">
  Form OID="<xsl:value-of select="@OID"/>"
  Labels: <xsl:text/>

  <xsl:variable name="vOID" select="@OID"/>
  <xsl:for-each select=
  "../ItemDef/*/*/SectionLabel
      [generate-id()
      =
       generate-id(key('kLabelsInForm',
                        concat($vOID, '+', .)
                       )
                        [1]
                   )
      ]
  ">
    <xsl:value-of select="concat(., ' ')"/>
  </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<XML>
    <FormDef OID="F_TEST_1" Name="Test Form 1">
        <ItemGroupRef ItemGroupOID="TEST_GROUP_1" />
        <ItemGroupRef ItemGroupOID="TEST_GROUP_4" />
    </FormDef>
    <FormDef OID="F_TEST_2" Name="Test Form 2">
        <ItemGroupRef ItemGroupOID="TEST_GROUP_2" />
    </FormDef>
    <FormDef OID="F_TEST_3" Name="Test Form 3">
        <ItemGroupRef ItemGroupOID="TEST_GROUP_2"/>
        <ItemGroupRef ItemGroupOID="TEST_GROUP_3"/>
    </FormDef>
    <FormDef OID="F_TEST_4" Name="Test Form 4">
        <ItemGroupRef ItemGroupOID="TEST_GROUP_4"/>
    </FormDef>
    <ItemGroupDef OID="TEST_GROUP_1" Name="Ungrouped">
        <ItemRef ItemOID="I_MSA1_INIT" />
        <ItemRef ItemOID="I_MSA1_FORMD" />
        <ItemRef ItemOID="I_MSA1_MSA1_CONS" />
        <ItemRef ItemOID="I_MSA1_MSA1_PGT" />
    </ItemGroupDef>
    <ItemGroupDef OID="TEST_GROUP_2" Name="MSA1_complyreasG" >
        <ItemRef ItemOID="I_MSA1_MSA1_NOELIGREAS" />
        <ItemRef ItemOID="I_MSA1_MSA1_COMPLYREAS" />
    </ItemGroupDef>
    <ItemGroupDef OID="TEST_GROUP_3" Name="Ungrouped">
        <ItemRef ItemOID="I_MSA2_INIT" />
        <ItemRef ItemOID="I_MSA2_FROMD" />
        <ItemRef ItemOID="I_MSA2_IDV" />
        <ItemRef ItemOID="I_MSA2_MSA2_INITBF" />
    </ItemGroupDef>
    <ItemGroupDef OID="TEST_GROUP_4" Name="MSA2_POARTprecG">
        <ItemRef ItemOID="I_MSA2_MSA2_POARTPREC" />
        <ItemRef ItemOID="I_MSA2_MSA2_POARTNBV" />
        <ItemRef ItemOID="I_MSA2_MSA2_LOARTPREC" />
    </ItemGroupDef>
    <ItemDef OID="I_MSA1_INIT">
        <ItemDetails ItemOID="I_MSA1_INIT">
            <ItemPresentInForm FormOID="F_TEST_1">
                <SectionLabel>Section1</SectionLabel>
            </ItemPresentInForm>
        </ItemDetails>
    </ItemDef>
    <ItemDef OID="I_MSA1_FORMD">
        <ItemDetails ItemOID="I_MSA1_FORMD">
            <ItemPresentInForm FormOID="F_TEST_1">
                <SectionLabel>Section2</SectionLabel>
            </ItemPresentInForm>
        </ItemDetails>
    </ItemDef>
    <ItemDef OID="I_MSA1_MSA1_CONS">
        <ItemDetails ItemOID="I_MSA1_MSA1_CONS">
            <ItemPresentInForm FormOID="F_TEST_1">
                <SectionLabel>Section3</SectionLabel>
            </ItemPresentInForm>
        </ItemDetails>
    </ItemDef>
    <ItemDef OID="I_MSA1_MSA1_NOELIGREAS">
        <ItemDetails ItemOID="I_MSA1_MSA1_NOELIGREAS">
            <ItemPresentInForm FormOID="F_TEST_2">
                <SectionLabel>Section1</SectionLabel>
            </ItemPresentInForm>
            <ItemPresentInForm FormOID="F_TEST_3">
                <SectionLabel>Section1</SectionLabel>
            </ItemPresentInForm>
        </ItemDetails>
    </ItemDef>
    <ItemDef OID="I_MSA1_MSA1_COMPLYREAS">
        <ItemDetails ItemOID="I_MSA1_MSA1_COMPLYREAS">
            <ItemPresentInForm FormOID="F_TEST_2">
                <SectionLabel>Section2</SectionLabel>
            </ItemPresentInForm>
            <ItemPresentInForm FormOID="F_TEST_3">
                <SectionLabel>Section2</SectionLabel>
            </ItemPresentInForm>
        </ItemDetails>
    </ItemDef>
    <ItemDef OID="I_MSA2_INIT">
        <ItemDetails ItemOID="I_MSA2_INIT">
            <ItemPresentInForm FormOID="F_TEST_3">
                <SectionLabel>Section1</SectionLabel>
            </ItemPresentInForm>
        </ItemDetails>
    </ItemDef>
    <ItemDef OID="I_MSA2_FROMD">
        <ItemDetails ItemOID="I_MSA2_FROMD">
            <ItemPresentInForm FormOID="F_TEST_3">
                <SectionLabel>Section2</SectionLabel>
            </ItemPresentInForm>
        </ItemDetails>
    </ItemDef>
    <ItemDef OID="I_MSA2_IDV">
        <ItemDetails ItemOID="I_MSA2_IDV">
            <ItemPresentInForm FormOID="F_TEST_3">
                <SectionLabel>Section3</SectionLabel>
            </ItemPresentInForm>
        </ItemDetails>
    </ItemDef>
    <ItemDef OID="I_MSA2_MSA2_POARTPREC">
        <ItemDetails ItemOID="I_MSA2_MSA2_POARTPREC">
            <ItemPresentInForm FormOID="F_TEST_1">
                <SectionLabel>Section1</SectionLabel>
            </ItemPresentInForm>
            <ItemPresentInForm FormOID="F_TEST_4">
                <SectionLabel>Section1</SectionLabel>
            </ItemPresentInForm>
        </ItemDetails>
    </ItemDef>
    <ItemDef OID="I_MSA2_MSA2_POARTNBV">
        <ItemDetails ItemOID="I_MSA2_MSA2_POARTNBV">
            <ItemPresentInForm FormOID="F_TEST_1">
                <SectionLabel>Section2</SectionLabel>
            </ItemPresentInForm>
            <ItemPresentInForm FormOID="F_TEST_4">
                <SectionLabel>Section2</SectionLabel>
            </ItemPresentInForm>
        </ItemDetails>
    </ItemDef>
    <ItemDef OID="I_MSA2_MSA2_LOARTPREC">
        <ItemDetails ItemOID="I_MSA2_MSA2_LOARTPREC">
            <ItemPresentInForm FormOID="F_TEST_1">
                <SectionLabel>Section3</SectionLabel>
            </ItemPresentInForm>
            <ItemPresentInForm FormOID="F_TEST_4">
                <SectionLabel>Section3</SectionLabel>
            </ItemPresentInForm>
        </ItemDetails>
    </ItemDef>
</XML> 
```

**产生想要的正确结果**（每种形式的唯一`SectionLabel`值）：

```
 Form OID="F_TEST_1"
  Labels: Section1 Section2 Section3 

  Form OID="F_TEST_2"
  Labels: Section1 Section2 

  Form OID="F_TEST_3"
  Labels: Section1 Section2 Section3 

  Form OID="F_TEST_4"
  Labels: Section1 Section2 Section3 
```

**说明**：

*   Muenchian 分组方法，其中要分组的元素使用复合键进行索引。

*   表单中的每个唯一节值都由字符串值及其父属性的`SectionLabel`字符串值的串联来标识。`FormOID`

*   这样`SectionLabel`，不同形式的相同值会产生不同的键，并且不会只计算一次。

**这里有一些关于 Muenchian 分组的好资源**：

*   **[Jeni Tennison 的分组页面](http://www.jenitennison.com/xslt/grouping/muenchian.html)**。

*   [**`Dave Pawson's XSLT FAQ's grouping page`**](http://dpawson.co.uk/xsl/sect2/N4486.html).

# internet-explorer - 音频播放器的 iframe 错误

> ID：10066090
> 
> 赞同：1
> 
> 时间：2012-04-08T20:08:33.373
> 
> 标签：internet-explorer

打开直接指向音频播放器的链接时，所有浏览器都会播放它们。Audioplayer 在嵌套的 div 中，它是指向 swf 的嵌入元素。

但是当写入并将其嵌入某些页面时会显示播放器，但它不会在 IE8 中播放。适用于所有其他主要浏览器，包括 IE9。

顺便说一句，它在 Safari 中不起作用，但是为 Safari 分配足够大的值的宽度和高度修复了它，但不是 IE8。

```
<iframe width="500" height="50" src="http://localhost/getAudio?id=DB04DDA8-C7C9-46E6-B0B3-7A0E0B5C9A55" frameBorder="0" scrolling="no">

<html class=" js no-flexbox no-canvas no-canvastext no-webgl no-touch no-geolocation postmessage no-websqldatabase no-indexeddb hashchange no-history draganddrop no-websockets no-rgba no-hsla no-multiplebgs no-backgroundsize no-borderimage no-borderradius no-boxshadow no-textshadow no-opacity no-cssanimations no-csscolumns no-cssgradients no-cssreflections no-csstransforms no-csstransforms3d no-csstransitions fontface generatedcontent no-video no-audio localstorage sessionstorage no-webworkers no-applicationcache no-svg no-inlinesvg no-smil no-svgclippaths" xmlns="http://www.w3.org/1999/xhtml">

<HEAD>
<STYLE class=iepp-printshim media=print></STYLE>
<TITLE>Bethoven symphony # 9</TITLE>
<META charset=utf-8>
<SCRIPT type=text/javascript src="/celenium/scripts/libs/jquery-latest.js"></SCRIPT>

<SCRIPT type=text/javascript src="/celenium/scripts/ClientCompatibility.js"></SCRIPT>

<STYLE type=text/css>BODY {
    PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px
}
</STYLE>
</HEAD>
<BODY>
<DIV id=asset01>
<SCRIPT type=text/javascript>
            $.ajax({
                url: '/celenium/audioplayer_html5/getPlayer.asp?o=DB04DDA8-C7C9-46E6-B0B3-7A0E0B5C9A55',
                dataType: 'jsonp',
                cache: true,
                jsonpCallback: 'sdlaudioplayer',
                success: function (data) {
                    $('#asset01').append($(data.html));
                }
            });    
        </SCRIPT>
<LINK rel=stylesheet href="http://localhost/celenium/audioplayer_html5/css/defaultplayer.css" media=screen>
<DIV id=sdlaudioplayer class=player_container>
<DIV class=player_metabar></DIV>
<DIV class=player_controls>
<DIV style="DISPLAY: block" class=player_controls_play jQuery1707536265854468271="1"></DIV>
<DIV style="DISPLAY: none" class=player_controls_pause jQuery1707536265854468271="2"></DIV>
<DIV style="DISPLAY: none" class=player_controls_prev jQuery1707536265854468271="3"></DIV>
<DIV style="DISPLAY: none" class=player_controls_next jQuery1707536265854468271="4"></DIV>
<DIV style="WIDTH: 297px; DISPLAY: block" class=player_controls_scrubber jQuery1707536265854468271="5">
<DIV class=player_controls_scrubber_loading jQuery1707536265854468271="13">
<DIV class=player_controls_scrubber_loaded></DIV>
<DIV class=player_controls_scrubber_playhead></DIV></DIV></DIV>
<DIV style="DISPLAY: block" class=player_controls_timing jQuery1707536265854468271="6"><SPAN class=player_controls_timing_position>0:00</SPAN> / <SPAN class=player_controls_timing_total>0:00</SPAN></DIV>
<DIV style="DISPLAY: block" class=player_controls_volume jQuery1707536265854468271="7">
<DIV class=player_controls_volume_mute jQuery1707536265854468271="8"></DIV>
<DIV class=player_controls_volume_slider jQuery1707536265854468271="12">
<DIV style="WIDTH: 50%" class=player_controls_volume_marker jQuery1707536265854468271="11"></DIV>
<DIV style="LEFT: 28px" class=player_controls_volume_knob jQuery1707536265854468271="10"></DIV></DIV>
<DIV class=player_controls_volume_max jQuery1707536265854468271="9"></DIV></DIV></DIV></DIV>
<DIV id=sm2-container class="high_performance movieContainer swf_loaded"><!-- SM2 flash goes here -->
<DIV></DIV>
<DIV class=sm2-object-box>
<OBJECT id=sm2movie title="JS/Flash audio component (SoundManager 2)" codeBase="download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0" classid=clsid:D27CDB6E-AE6D-11cf-96B8-444553540000 data="/celenium/audioplayer_html5/swf/soundmanager2_flash9.swf" width=auto type=application/x-shockwave-flash height=auto></OBJECT></DIV></DIV></DIV></BODY> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T20:47:21.963

IE8 不被认为是现代浏览器，因为它不支持许多 HTML5 功能，例如音频和视频标签。

这个[HTML5 教程](http://www.html5tutorial.info/html5-audio.php)站点有一个示例，说明如何使用 Object 标签在 IE8 中支持音频。请参见下面的示例：

```
<audio controls>
    <source src="vincent.mp3" type="audio/mpeg"/>
    <source src="vincent.ogg" type="audio/ogg"/>
    <object type="application/x-shockwave-flash" data="media/OriginalMusicPlayer.swf" 
      width="225" height="86"> 
       <param name="movie" value="media/OriginalMusicPlayer.swf"/>
       <param name="FlashVars" value="mediaPath=vincent.mp3" /> 
    </object> 
</audio> 
```

请记住，这需要 IE8 客户端安装 Flash，因为它使用 Flash 加载播放器。

如果客户端没有安装 Flash，你最后的努力就是简单地提供一个下载链接，让用户使用操作系统的默认播放器来播放音频文件：

```
<audio controls>
    <source src="vincent.mp3" type="audio/mpeg"/>
    <source src="vincent.ogg" type="audio/ogg"/>
    <object type="application/x-shockwave-flash" data="media/OriginalMusicPlayer.swf"  
      width="225" height="86"> 
        <param name="movie" value="media/OriginalMusicPlayer.swf"/>
        <param name="FlashVars" value="mediaPath=vincent.mp3" /> 
    </object> 
    <a href="vincent.mp3">Download this lovely song and wish you all the best!</a>
</audio> 
```

作为旁注，您面临的问题很可能源于您的 HTML 缺少 html5 文档类型并包含验证错误这一事实。您可能需要查看 W3C 规范。我相信你所有的属性都应该有引号。

尽管许多浏览器都擅长让您在 HTML 中犯语法和语义错误并随意处理它，但有时这些验证问题可能会再次困扰您。我强烈建议您针对[W3C 验证器](http://validator.w3.org/)运行您的网站，以确保没有任何 HTML 错误阻止 IE8 正确解释您的标记。

# c++ - Qt中两个类之间的发射信号

> ID：10066094
> 
> 赞同：2
> 
> 时间：2012-04-08T20:08:56.643
> 
> 标签：c++, qt

我正在尝试制作一个程序，该程序从一类中获取信号并激活该信号，我想激活二类中的一个插槽。

在我的例子中，第一个类是 mainWindow 类，这个类是 QMainWindow 的子类，在这个类中是我要激活的插槽。

这是 mainWindow.cpp：

```
mainWindow::mainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::mainWindow)
{
    ui->setupUi(this);
}

mainWindow::~mainWindow()
{
    delete ui;
}

void mainWindow::slotForStatusBarMessage(QString string)
{
    statusBar()->showMessage(string);
} 
```

第二个类是 mainWidget 类，它是 QWidget 的子类。

这是 mainWidget.cpp：

```
mainWidget::mainWidget(QWidget *parent) :
    QWidget(parent)
{
    buttonAddNewRecord=new QPushButton("Add new record", this);

    layoutButton=new QHBoxLayout();
    layoutButton->addWidget(buttonAddNewRecord);

    layoutMain=new QVBoxLayout();
    layoutMain->addLayout(layoutButton);

    functionDatabaseOpen();

    setLayout(layoutMain);
} 
```

信号从 functionDatabaseOpen() 函数发出：

```
if (sqlDatabase.open())
{
    emit signalForShowMessageInStatusBar("true");
}
else
{
    emit signalForShowMessageInStatusBar("false");
} 
```

我已经对数据库进行了所有设置，但由于空间问题，我没有在这里复制。

我试图在 main.cpp 中建立连接，但它似乎不起作用。

```
QObject::connect(mw, SIGNAL(signalForShowMessageInStatusBar(QString)), w, SLOT(slotForStatusBarMessage(QString))); 
```

我无法使类之间的这种信号/插槽连接正常工作。你能给我任何帮助吗？

如果您对代码有任何疑问，请询问。抱歉英语不好，我不是以英语为母语的人。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T02:44:02.387

您正在从 的构造函数发出信号`mainWidget`，并且由于仅在从该构造函数返回后才完成连接，因此信号不会去任何地方。

最简单的解决方法是在信号/插槽连接建立后将调用移至`functionDatabaseOpen()`in ，不知道其余代码是什么样子的。`main()`

# asp.net - 从 NancyFx 中的函数调用 Response.AsJson 时不起作用

> ID：10066098
> 
> 赞同：1
> 
> 时间：2012-04-08T20:09:27.987
> 
> 标签：asp.net, c#-4.0, extension-methods, anonymous-types, nancy

扩展方法：

```
Response.AsJson
Response.AsXml 
```

从承包商调用它时工作正常，例如：

```
public class TweetModule : NancyModule
    {
     public TweetModule()
            : base("/")
        {

            Post["/{action}.json/"] = parameters =>
            {
               return Reponse.Asjson(new {output:parameters.action}); // OK
            }
        }
     } 
```

但是当我从这样的函数中调用它时：

```
public class TweetModule : NancyModule
    {
     public TweetModule()
            : base("/")
        {

            Post["/{action}.{format}/"] = parameters =>
            {
               return GetResponse( parameters.action,parameters.format); // Error
            }
        }

        public Response GetResponse(string action,string format)
        {
           if (format == "json")
            return Response.AsJson(new {output:action}); // error
          else
            return Response.AsXml(new {output:action}); // error
        }

     } 
```

我得到这个例外：

> <>f__AnonymousType0`1[System.String] 无法序列化，因为它没有无参数构造函数。

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T20:58:29.693

那工作得很好。问题是您捕获的参数称为**{fortmat}**，然后您传递**parameters.format**由于拼写错误而从未捕获

而且我必须指出，您的代码甚至无法编译，因为**函数**在 C# 中不是有效的关键字，我只是假设您实际上是说它是**公开**的。

希望这可以帮助

# javascript - Google Chrome 扩展操作打开或当前选项卡的 DOM

> ID：10066100
> 
> 赞同：17
> 
> 时间：2012-04-08T20:10:08.453
> 
> 标签：javascript, jquery, google-chrome, google-chrome-extension

好的，JavaScript/jQuery 我明白了，我可以用它来做我想做的事情。然而，我目前正在尝试做的是使用打开/当前选项卡的 DOM，我想知道这是否可能，或者我所做的所有工作都仅限于我为它提供“背景”的 html 的扩展名。 html”或等效的。

对于今天尝试对谷歌扩展进行罢工的尝试，我想在页面上拍摄图像并将它们存储在一个数组中，以通过我想添加到页面底部的栏来创建类似幻灯片的效果，并将其附加到打开/当前选项卡的现有 DOM。然后我想在 DOM 中“隐藏”元素，直到栏关闭。

所以我的第一个问题是，这样的事情是否可能，我可以以这种方式操作 DOM 并从中读取。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-08T20:51:46.863

[内容脚本](https://developer.chrome.com/extensions/content_scripts)是在页面和 Chrome 扩展程序之间的环境中运行的脚本。这些脚本在每次页面加载时加载，并且可以**完全访问*页面*的 DOM**。DOM 方法，例如`document.getElementById()`表现得好像它们是页面的一部分。

全局`window`对象（包括[`frames`](https://developer.mozilla.org/en/DOM/window.frames)和[`HTMLIFrameElement.contentWindow`](https://developer.mozilla.org/en/DOM/HTMLIFrameElement)）是唯一不能被内容脚本*直接读取的对象。*

内容脚本[在清单文件中定义的](https://developer.chrome.com/extensions/manifest)每个页面上运行。在该部分指定[匹配模式](http://developer.chrome.com/extensions/match_patterns.html)`"content_scripts"`，以定义内容脚本必须在哪些页面上运行。还要将此模式添加到该`"permissions"`部分，以解锁修改页面 DOM 的能力。

*注意*：只有[少数`chrome.*`API](http://developer.chrome.com/extensions/extension.html#content%20scripts)可以被这些脚本使用（例如[`chrome.extension.sendRequest`](http://developer.chrome.com/extensions/extension.html#method-sendRequest)与[后台页面](http://developer.chrome.com/extensions/background_pages.html)通信）。

* * *

在[后台页面](http://developer.chrome.com/extensions/background_pages.html)中，页面的 DOM 不能直接访问。您可以使用 将脚本注入任意选项卡[`chrome.extension.executeScript`](http://developer.chrome.com/extensions/tabs.html#method-executeScript)，但无法**直接**引用元素。为此，需要内容脚本。

# iphone - 更改 OpenGL ES 对象的 Alpha 值 - GL_BLEND - iPhone

> ID：10066102
> 
> 赞同：0
> 
> 时间：2012-04-08T20:10:16.097
> 
> 标签：iphone, objective-c, opengl-es, 3d, alphablending

我的 OpenGL ES 场景（版本 1.1）中有一个纹理对象，我想将其 alpha 更改为 0.5。

我正在尝试以下代码：

```
glEnableClientState(GL_VERTEX_ARRAY);
glEnableClientState(GL_NORMAL_ARRAY);
glEnableClientState(GL_TEXTURE_COORD_ARRAY);

glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);
glEnable(GL_BLEND); 
glBlendFunc(GL_ONE, GL_ONE_MINUS_SRC_ALPHA);
glColor4f(1.0, 1.0, 1.0, 0.5);

glVertexPointer(3, GL_FLOAT, 0, vertexes);
glNormalPointer(GL_FLOAT, 0, normals);
glTexCoordPointer(2, GL_FLOAT, 0, textures);

GLfloat ambientAndDiffuse[] = kAmbience;
glMaterialfv(GL_FRONT_AND_BACK, GL_AMBIENT_AND_DIFFUSE, ambientAndDiffuse);
GLfloat specular[] = kSpecular;
glMaterialfv(GL_FRONT_AND_BACK, GL_SPECULAR, specular);
glMaterialf(GL_FRONT_AND_BACK, GL_SHININESS, kShininess);
GLfloat emission[] = kEmission;
glMaterialfv(GL_FRONT_AND_BACK, GL_EMISSION, emission);

glDrawElements(GL_TRIANGLES, vertexCount, GL_UNSIGNED_SHORT, indices);

glDisableClientState(GL_VERTEX_ARRAY);
glDisableClientState(GL_NORMAL_ARRAY);
glDisableClientState(GL_TEXTURE_COORD_ARRAY);
glDisable(GL_BLEND); 
```

问题是模型的透明度没有改变。模型正确显示在屏幕上，但 alpha 仍为 1。

编辑

我的纹理是jpg。我需要将这些保存为 PNG 吗？

谁能发现我该如何纠正？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T08:20:00.527

啊，我想我已经解决了——你需要关掉灯光，然后它似乎就可以工作了。

glDisable(GL_LIGHTING);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T00:10:23.283

您是否将纹理环境变量设置为调制？像这样：

```
glTexEnvi (GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE); 
```

这告诉 OpenGL 将对象的颜色乘以纹理的颜色。另外，我不记得您是否需要使用 GL_COLOR_ARRY`glDrawElements()`而不仅仅是设置当前颜色。

# javascript - jwplayer 不工作

> ID：10066105
> 
> 赞同：3
> 
> 时间：2012-04-08T20:10:27.303
> 
> 标签：javascript, jquery, jwplayer

我已经下载了文件并按照提供的步骤操作，但播放器根本无法工作。

```
 <code>
    <html>
    <head>
    <script type="text/javascript" src="/jwplayer.js"></script>
    <script type="text/javascript" src="/jquery.js"></script>

    </head>

    <body>
    <div id="container">Loading the player ...</div>
    <script type="text/javascript">
    jwplayer("container").setup({
    flashplayer: "/player.swf",
    file: "/video.mp4",
    height: 270,
    width: 480
    });
    </script>
    </body>
    </html>
    </code> 
```

它显示的只是“加载播放器”。如您所见，我已经链接了 JWplayer 和 jquery 脚本。我错过了什么？任何帮助将不胜感激。我使用网络表达式...当我尝试关注 jwplayer 链接“jwplayer(container)”时，我说找不到链接。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T08:58:39.790

试试这个代码。使用相对地址，它对我有用！我希望这能帮到您。

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jplayer/2.9.2/jplayer/jquery.jplayer.min.js"></script>
        <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js/jquery.js"></script>
    </head>
    <body>
        <div id="container">Loading the player ...</div>
        <script type="text/javascript">
            jwplayer("container").setup({
            flashplayer: "//cdnjs.cloudflare.com/ajax/libs/jplayer/2.9.2/jplayer/jquery.jplayer.swf",
            file: "http://content.bitsontherun.com/videos/lWMJeVvV-364767.mp4",
            height: 270,
            width: 480
        });
        </script>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T17:03:28.150

只需去掉`/`代码中的 ，使其如下所示：

```
flashplayer: "player.swf" 
```

# java - 正则表达式、ANTLR 或任何其他解决方案？

> ID：10066107
> 
> 赞同：1
> 
> 时间：2012-04-08T20:10:40.370
> 
> 标签：java, regex, parsing, antlr, lexer

现在这个对我来说是一个很大的挑战。

我在一个文件中有大约 1000 个查询，所有类似的模式如下：

```
***\*XYZ#PQR#\**** 
```

现在，其中 # 表示任意数量的非空白字符。
我已经编写了一段代码，可以读取上述行并生成相应的正则表达式。
但是，大约有 100,000 名候选人，正如我提到的那样，大约有 1000 个这样的查询需要为匹配进行评估。
这使我的代码在计算上非常昂贵，因为它的数量级为 m*n。

我经历过 ANTLR，发现学习曲线非常陡峭。虽然这听起来很有希望，但我仍然怀疑是否可以通过使用 Antlr 来实现。请让我知道您的意见或任何其他可行的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T23:20:35.837

在我看来，您拥有数以千计的单个正则表达式，r1, r2, ... r1000，它们标识了结果 A、B、C、...的一些固定集合（远小于单个正则表达式的数量）。 .

在那种情况下，您可以将结果 A 的正则表达式 a1, a2, ... an 和结果 B 的 b1, ... bm 逻辑组合。知道正则表达式的理论性质）。

大多数表达正则表达式的系统（可能不是你的）允许你把它写成

```
 a1 | a2 | .. | an --> A 
```

或一些等效的语法。这样的系统通常与所谓的[词法分析器生成器](http://en.wikipedia.org/wiki/Lexical_analysis)相关联，它允许编译器编写者根据字符来表达标记的细粒度语法。

此类工具的一个巨大优势是，匹配（所有正则表达式）标记的工作通常相对于正则表达式的数量是次*线性*的，这可以通过计算一个有限状态机来实现，其中前缀由某些集合共享正则表达式只被识别一次。这可能意味着巨大的加速，并直接适用于您的情况。

广泛使用的工具 FLEX 非常有效地完成了这项工作。ANTLR 有某种机制来识别表示为正则表达式的标记，但我不知道它是否会生成有效的有限状态匹配器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:44:24.450

完成它。使用 Regex，需要一个小时，使用 Lucene、WildCardQueries 和 booleanQuery 来处理排列，工作在 11 分钟内完成。*希望有人可以在一周内制定学习 Flex 的时间表。但是 Lucene 是大型数据集、Regex 和 Crunching 的不错选择。它可能并不总能解决您的问题，但它只是另一种解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T20:25:18.010

我认为 ANTLR 没有必要，因为可以进行简单的字符串查找和替换：`#`-> `\\.*`。应删除星号。

所以`*Telecom#Servic#*`你得到了`Telecom\\.*Servic\\.*`. 您还可以添加 $ 和 ^ 来检查字符串的开头/结尾。

# java - Java多维数组实例化

> ID：10066117
> 
> 赞同：0
> 
> 时间：2012-04-08T20:12:34.630
> 
> 标签：java, arrays

> **可能重复：**
> [将值显式分配给二维数组？](https://stackoverflow.com/questions/9318113/explicitly-assigning-values-to-a-2d-array)

抱歉，如果之前已解决此问题。我进行了搜索，但找不到任何东西：

有没有办法在 Java 中用一维数组的方式实例化一个二维数组。例如，有没有办法做到这一点：

```
int[] oneD = {1, 2, 3}; 
```

为了这：

```
int[][] twoD = ...? 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T20:13:54.753

你可以这样做：

```
int[][] twoD = { {1,1}, {2,2}, {3,3} }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T20:13:54.650

它实际上是一组集合，所以它的工作原理很直观：

```
int[][] twoD = { {1,2,3}, {3,4,5} }; 
```

请注意，对于一维数组，间距由用户决定。[Java 教程实际上在这里](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)给出了一个多维数组初始化的例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T20:16:23.723

它简单直观：

```
int[][] twoD = {{1, 2, 3}, {4, 5, 6}}; 
```

这将产生一个 2×3 整数数组。

# python - 在 python 中找不到 date.timestamp？

> ID：10066120
> 
> 赞同：0
> 
> 时间：2012-04-08T20:13:27.850
> 
> 标签：python, datetime

将导入更改为从导入后，我遇到了这个错误：

```
from datetime import datetime, date, timedelta
today = date.today()
from time import mktime
from feedparser import feedparser
import settings

def check_calendar():
    d = feedparser.parse(settings.personal_calendar_feed)
    for entry in d.entries:
        if(date.fromtimestamp(mktime(entry.date_parsed))==today):

Traceback (most recent call last):
  File computer.py", line 734, in <module>
    check_calendar()
  File "computer.py", line 210, in check_calendar
    if(date.fromtimestamp(mktime(entry.date_parsed))==today):
AttributeError: 'function' object has no attribute 'fromtimestamp' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T20:25:13.233

您很可能在代码的前面已将其重新声明`date`为函数。`def date():`否则没有意义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T20:27:02.860

它说

> AttributeError：“函数”对象没有属性“fromtimestamp”

在错误中。显然，您的代码中可能有一个名为“date”的函数。由于 Python 允许您使用任何名称，并且新的冲突名称将覆盖旧名称。

相反，当 python 无法从模块或对象中找到函数时，它通常会说类型对象没有属性或模块没有属性，就像我想调用 "fromtimes" 一样：

> 类型对象“datetime.date”没有属性“fromtimes”

您可能需要再次仔细检查您的代码。

# google-maps - jQuery Mobile：从另一个页面的列表中定位谷歌地图标记

> ID：10066121
> 
> 赞同：0
> 
> 时间：2012-04-08T20:13:31.900
> 
> 标签：google-maps, jquery-mobile, google-maps-markers

我正在使用 jQuery Mobile 创建一个 Web 应用程序。它包含一组子页面，其中一个是地图。此地图页面是一个指向 map.js 文件的链接，在该文件中创建了 Google Maps API3 地图。标记是城市的兴趣点；它们被设置在一个数组中。我发现了一个创建侧边栏的在线演示，其中列出了每个标记的标题。

我想在我的 html 文件中创建一个#page 来保存列表，以便单击列表中的一行（如商会）将转换到地图页面并调用该标记的信息气泡。（根据演示，这是侧边栏列表中条目的行为。我只想将列表放在单独的页面上，以便单击调用地图。）

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T21:17:03.767

我的伙伴创建了这个[动态标记、地理编码和 jQuery 谷歌地图插件教程](http://www.mobiledevelopersolutions.com/home/start/twominutetutorials/tmt4p2)。它还包括一些 PhoneGap 和 Android 细节，但 jQuery Mobile 和 Google Maps 应该可以在任何平台上运行。

# assembly - 通过轮询中断请求寄存器来处理键盘中断（对于 x86）

> ID：10066122
> 
> 赞同：1
> 
> 时间：2012-04-08T20:13:44.540
> 
> 标签：assembly, x86, dos, interrupt-handling, interrupt

我需要为 x86 开发程序，通过轮询 IRR 来处理键盘中断。程序应该在 ms-dos 下以实模式运行。我的主要问题是它不能像我认为的那样工作：即使没有按下任何键并且从端口 0x60 读取的值始终为 0x1c，相应的 IRR 位也具有非零值。有人可以解释我做错了什么吗？这是我的轮询循环：

```
 in al,21h       ; read old IMR value
        or al,02h       ; disable handling of interrupts from IRQ1
        out 21h,al      ; update IMR value
READ_LOOP:
        mov al,0ah
        out 20h,al
        in al,20h       ; read IRR value
        and al, 02h     ; check request from IRQ1
        jz READ_LOOP
        in al,60h       ; read data from keyboard buffer
        mov dl,al
        and dl,7fh      ; ignore most significant bit value
        mov ah,2h       ; print char
        int 21h
        jmp READ_LOOP 
```

谢谢！

**更新** 我错过了键盘缓冲区包含扫描码的事实，所以 0x1c 似乎是返回键的扫描码。=)

# algorithm - 是否有类似 diff 的算法来处理移动的行块？

> ID：10066129
> 
> 赞同：56
> 
> 时间：2012-04-08T20:14:31.470
> 
> 标签：algorithm, diff

该`diff`程序在其各种化身中相当擅长计算两个文本文件之间的差异，并且比完整地显示两个文件更紧凑地表达它。它将差异显示为一系列插入和删除的行块（或在某些情况下更改的行，但这相当于删除后插入）。源代码控制系统使用相同或非常相似的程序或算法`patch`来最小化表示同一文件的两个版本之间的差异所需的存储空间。该算法在[此处](http://c2.com/cgi/wiki?DiffAlgorithm)和[此处](http://en.wikipedia.org/wiki/Diff#Algorithm)进行了讨论。

*但是当文本块在文件中移动*时它会下降。

假设您有以下两个文件，`a.txt`并且`b.txt`（想象它们都有数百行而不是只有 6 行）：

```
a.txt   b.txt
-----   -----
1       4
2       5
3       6
4       1
5       2
6       3 
```

`diff a.txt b.txt`显示了这一点：

```
$ diff a.txt b.txt 
1,3d0
< 1
< 2
< 3
6a4,6
> 1
> 2
> 3 
```

从`a.txt`to的变化`b.txt`可以表示为“将前三行移到最后”，但是`diff`两次显示了移动的行块的完整内容，错过了非常简要地描述这个大变化的机会。

请注意，`diff -e`该文本块仅显示一次，但那是因为它不显示已删除行的内容。

算法的变体是否`diff`（a）保留`diff`了表示插入和删除的能力，以及（b）有效地表示移动的文本块而不必显示其全部内容？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-09T15:11:29.753

由于您要求的是算法而不是应用程序，请查看 Walter Tichy 的[“The String-to-String Correction Problem with Block Moves”](http://docs.lib.purdue.edu/cgi/viewcontent.cgi?article=1377&context=cstech)。还有其他的，但那是原始的，因此您可以查找引用它的论文以找到更多信息。

该论文引用了 Paul Heckel 的论文“一种用于隔离文件之间差异的技术”（在[这个问题的答案](https://stackoverflow.com/a/26057004/173497)中提到），并提到了它的算法：

> Heckel[3] 指出了 LCS 技术的类似问题，并提出了一种线性石灰算法来检测块移动。如果字符串中的重复符号很少，则该算法可以充分执行。但是，否则该算法给出的结果很差。例如，给定两个字符串*aabb*和*bbaa*，Heckel 算法无法发现任何公共子字符串。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-09-26T10:03:49.793

以下方法能够检测块移动：

Paul Heckel：*一种隔离文件之间差异的技术*
ACM 通信 21(4):264 (1978)
[http://doi.acm.org/10.1145/359460.359467](http://doi.acm.org/10.1145/359460.359467)（访问受限）
镜像：[http://documents.scribd。 com/docs/10ro9oowpo1h81pgh1as.pdf](http://documents.scribd.com/docs/10ro9oowpo1h81pgh1as.pdf)（开放获取）

[wikEd diff](https://en.wikipedia.org/wiki/User:Cacycle/diff)是一个免费的 JavaScript diff 库，它实现了这个算法并对其进行了改进。它还包括编译文本输出的代码，其中插入、删除、移动块和插入新文本版本的原始块位置。有关详细信息，请参阅项目页面或广泛注释的代码。对于测试，您也可以使用[在线演示](http://cacycle.altervista.org/wikEd-diff-tool.html)。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-12-20T21:45:22.583

Git 2.16（2018 年第一季度）将通过忽略一些指定的移动行来引入另一种可能性。

" `git diff`" 学习了 " `--patience`" 算法的变体，用户可以指定将哪条“唯一”线用作锚点。

请参阅[Jonathan Tan (](https://github.com/jhowtan) [)的](https://github.com/jhowtan)[提交 2477ab2](https://github.com/git/git/commit/2477ab2ea8651920a9909f6d05b15ad9004a6c64)（2017 年 11 月 27 日） 。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([d7c6c23 提交中](https://github.com/git/git/commit/d7c6c2369ac21141b7c6cceaebc6414ec3da14ad))^(，2017 年 12 月 19 日）)[`jhowtan`](https://github.com/jhowtan)
^([`gitster`](https://github.com/gitster))

> ## `diff`: 支持锚定线

> 教授`diff`一种新算法，该算法试图防止用户指定的行在最终结果中显示为删除或添加。
> 最终用户可以在使用诸如“ ”和“ ”之`--anchored=<text>`类的 Git 命令时通过指定“ ”一次或多次来使用它。`diff``show`

现在的[文档`git diff`](https://github.com/git/git/blob/2477ab2ea8651920a9909f6d05b15ad9004a6c64/Documentation/diff-options.txt#L83-L91)内容如下：

> ```
> --anchored=<text>: 
> ```
> 
> 使用“锚定差异”算法生成差异。
> 
> 可以多次指定此选项。
> 
> 如果一行在源和目标中都存在，只存在一次，并且以此文本开头，则此算法会尝试防止它在输出中显示为删除或添加。
> 它在内部使用“耐心差异”算法。
> 
> 请参阅[测试以获取一些示例](https://github.com/git/git/blob/2477ab2ea8651920a9909f6d05b15ad9004a6c64/t/t4065-diff-anchored.sh)：
> 
> ```
> pre post
>  a   c
>  b   a
>  c   b 
> ```
> 
> 通常，`c`移动以产生最小的差异。

但：

```
 git diff --no-index --anchored=c pre post 
```

差异将是`a`.

* * *

在 Git 2.33（2021 年第三季度）中，命令行补全（in `contrib/`）获悉“ [`git diff`](https://github.com/git/git/blob/3a7d26bb4b60103a60284733b230a8af242fa9ff/Documentation/git-diff.txt)” ^(（[man](https://git-scm.com/docs/git-diff)）)采用该`--anchored`选项。

请参阅[Thomas Braun ( ) 的](https://github.com/t-b)[提交 d1e7c2c](https://github.com/git/git/commit/d1e7c2cac9f44f411700397a91b2fb1ec640cdd4)（2021 年 5 月 30 日[）](https://github.com/t-b)。^(（由)^([Junio C Hamano 合并](https://github.com/gitster))^([——](https://github.com/gitster))^在^([提交 3a7d26b](https://github.com/git/git/commit/3a7d26bb4b60103a60284733b230a8af242fa9ff))^(中，2021 年 7 月 8 日）)[`t-b`](https://github.com/t-b)
^([`gitster`](https://github.com/gitster))

> ## [`completion`](https://github.com/git/git/commit/d1e7c2cac9f44f411700397a91b2fb1ec640cdd4): 将 --anchored 添加到 diff 的选项中
> 
> ^(签字人：Thomas Braun)

> 这个标志是在[2477ab2](https://github.com/git/git/commit/2477ab2ea8651920a9909f6d05b15ad9004a6c64) (" `diff`: support anchoring line(s)", 2017-11-27, Git v2.16.0-rc0 -- [merge](https://github.com/git/git/commit/d7c6c2369ac21141b7c6cceaebc6414ec3da14ad)列在[第 10 批](https://github.com/git/git/commit/936d1b989416a95f593bf81ccae8ac62cd83f279)中) 但当时，bash 完成脚本没有了解新标志。
> 添加它。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-09T00:21:55.307

这是可能有用的东西的草图。为了清楚起见，暂时忽略差异插入/删除。

这似乎包括找出最佳阻塞，类似于文本压缩。我们想找到两个文件的公共子字符串。一种选择是构建一个通用后缀树并迭代地获取最大公共子串，将其删除并重复，直到没有某个大小 $s$ 的子串。这可以在 O(N^2) 时间内使用后缀树来完成（[https://en.wikipedia.org/wiki/Longest_common_substring_problem#Suffix_tree](https://en.wikipedia.org/wiki/Longest_common_substring_problem#Suffix_tree)）。贪婪地取最大值似乎是最优的（作为压缩字符的函数），因为从其他子字符串中获取字符序列意味着在其他地方添加相同数量的字符。

然后，每个子字符串将被该块的符号替换，并作为一种“字典”显示一次。

```
$ diff a.txt b.txt 
1,3d0
< $
6a4,6
> $

 $ = 1,2,3 
```

现在我们必须重新引入类似差异的行为。简单（可能不是最佳）的答案是首先简单地运行 diff 算法，省略所有不会在原始 diff 中输出的文本并运行上述算法。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-04-08T23:26:26.847

当使用相同的编程语言计算两个程序的源文本之间的差异时，我们的[Smart Differencer工具正是这样做的。](http://www.semanticdesigns.com/Products/SmartDifferencer)在精确到行/列号的程序结构（标识符、表达式、语句、块）和合理的编辑操作（删除、插入、移动、复制[在 OP 对单纯“复制”的要求之上和之外）”方面报告了差异]，重命名块中的标识符）。

SmartDifferencers 需要结构化的工件（例如，编程语言），因此它不能对任意文本执行此操作。（我们可以将结构定义为“只是文本行”，但与标准差异相比，我们认为这不会特别有价值）。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-01-12T18:04:13.750

[SemanticMerge是](http://www.semanticmerge.com/)[本评论](https://stackoverflow.com/questions/10066129/is-there-a-diff-like-algorithm-that-handles-moving-block-of-lines#comment37951368_10067401)中提到的其他答案之一的“语义 scm”工具，包括一个“语义差异”，用于处理移动一行行（对于支持的编程语言）。我还没有找到有关该算法的任何详细信息，但 diff 算法本身可能并不是特别有趣，因为它依赖于对编程语言源代码文件本身进行单独解析的输出。这是 SemanticMerge 关于实现（外部）语言解析器的文档，它可能会阐明其差异的工作原理：

*   [外部解析器 - SemanticMerge](https://users.semanticmerge.com/documentation/external-parsers/external-parsers-guide.shtml)

我刚才测试了它，它的差异*很棒*。它比我使用[这个答案](https://stackoverflow.com/a/26057004/173497)中提到的算法演示生成的要好得多（而且 diff 本身比 Git 的默认 diff 算法生成的要好得多），我怀疑仍然比算法可能生成的要好在[这个答案](https://stackoverflow.com/a/10075315/173497)中提到。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-03-07T14:56:48.987

对于我在现实生活中编码的这种情况，当我实际上将整个代码块移动到源代码中的另一个位置时，因为它在逻辑上或可读性上更有意义，我所做的是：

*   清理所有现有的差异并提交它们
    *   这样文件只需要我们正在寻找的移动
*   从源代码中删除整个代码块
    *   保存文件
    *   和阶段改变
*   将代码添加到新位置
    *   保存文件
    *   和阶段改变
*   将两个分阶段的补丁作为一个提交提交，并带有合理的消息

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-04-10T18:32:43.703

还要检查这个基于[SIM_TEXT](https://dickgrune.com/Programs/similarity_tester/)算法的在线工具[simtexter 。](https://people.f4.htw-berlin.de/~weberwu/simtexter/app.html)这似乎是最好的。

您还可以查看 Javascript 实现或 C/Java 的源代码。

[![在此处输入图像描述](../Images/bff20afacf6765db5eb4e90c52ff6191.png)](https://i.stack.imgur.com/180Eo.png)

# python - Python + WAMP + Django --> ImportError: No module named os

> ID：10066135
> 
> 赞同：0
> 
> 时间：2012-04-08T20:15:25.133
> 
> 标签：python, django, wamp

我已经安装了 WAMPServer（最新）。Python 2.6 和 Django 1.4 。

在我开始运行我的服务器之前，一切看起来都很好。我收到内部服务器错误。Apache 错误日志显示以下内容：

```
[Sun Apr 08 16:11:27 2012] [error] [client ::1] mod_wsgi (pid=1040): Target WSGI script 'C:/wamp/www/testproject/django.wsgi' cannot be loaded as Python module.
[Sun Apr 08 16:11:27 2012] [error] [client ::1] mod_wsgi (pid=1040): Exception occurred processing WSGI script 'C:/wamp/www/testproject/django.wsgi'.
[Sun Apr 08 16:11:27 2012] [error] Traceback (most recent call last):
[Sun Apr 08 16:11:27 2012] [error]   File "C:/wamp/www/testproject/django.wsgi", line 1, in <module>
[Sun Apr 08 16:11:27 2012] [error]     import os, sys  
[Sun Apr 08 16:11:27 2012] [error] ImportError: No module named os 
```

我已经设置了所有环境变量和此类设置。使用 Django 提供的服务器，一切正常。我想使用 Apache。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T23:46:39.383

当您的 Python/mod_wsgi 安装错误时，可能会发生这种情况。要检查的关键事项是：

1.  该 Python 已为所有用户安装。
2.  Python、Apache 和 mod_wsgi 都是 32 位或全部 64 位。您不能混合使用 32 位和 64 位。
3.  该 mod_wsgi 是为您正在使用的 Python 版本编译的。

# java - 如何在 PHP 和 Java 之间传递日期？

> ID：10066137
> 
> 赞同：2
> 
> 时间：2012-04-08T20:15:38.013
> 
> 标签：java, php, android, date

我正在构建一个小型 web 服务，客户端是一个 android 客户端。我必须使用日期，并且我想将它保存在我的数据库中。

服务器端使用 PHP，客户端使用 Java。将日期发送到 PHP 的最佳格式是什么，如何轻松转换？

编辑：当我说格式时，我不是在谈论数据格式。只是日期的格式。因为数据是使用 JSON 发送的，但日期是作为字符串传递的。

我在考虑时间戳，但这不是一个好主意，因为我们知道它的大小限制......

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T20:27:01.943

@Gp2mv3 -

1.  jmort253 是正确的：JSON 是一种出色的数据交换格式。去吧！

2.  您可以在 PHP 端使用 getTimeStamp()"

3.  您可以将 PHP 时间戳转换为 Java 长时间戳，如下所示：

    日期 d=new Date((long)phpTimeStamp*1000);

PS：如果你使用时间戳，你绝*不能*假设客户端和服务器以任何方式相互同步。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T20:19:52.227

RESTful Web 服务的主要优点是您可以使用双方都能理解的通用传输轻松地将数据从一个应用程序发送到另一个应用程序。

XML 和 JSON 都被用来促进不同应用程序之间的通信，即使它们都是用不同的语言编写的。

虽然 XML 是一个很好的解决方案，但 JSON 因其简单性和与 JavaScript 的开箱即用兼容性而成为一种强大的选择。

在 Java 中，您可以使用名为 Jackson 的库，它将您的类序列化为 JSON 并将 JSON 字符串反序列化回 Java 类。

另外，我不确定您对时间戳有什么看法。由于它们是长值，因此它们在日期比较方面应该非常容易使用，并且它们应该易于存储，因为它们通常是长值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T20:17:18.370

最简单和最常见的存储方式是使用时间戳。

您可以随时将此时间戳更改为所需的格式，使用`DateFormat`. 我希望这会有所帮助。

# java - HTMLUNIT 第三方网站分析，未发现 Javascript 问题

> ID：10066149
> 
> 赞同：0
> 
> 时间：2012-04-08T20:16:45.970
> 
> 标签：java, javascript, web-scraping, htmlunit, web-testing

我正在创建一个程序，该程序将自动检查网站上的数据以确保一切正常运行（也称为健康检查）。我在使用 javascript 时遇到问题。这是页面的源代码。

```
<html>

<head>
<title>Webpage</title>

<SCRIPT LANGUAGE="Javascript" SRC="common.js"></SCRIPT>
<SCRIPT LANGUAGE="Javascript" SRC="homepages.js"></SCRIPT>
<script language="JavaScript" src="write_cookie.js"></script>
</HEAD>

<FRAMESET COLS="160,*" FRAMESPACING=0 FRAMEBORDER=0 BORDER=0>
 <FRAMESET ROWS="51%,42%,7%" FRAMESPACING=0 FRAMEBORDER=0 BORDER=0>
<FRAME SRC="left.jsp" MARGINWIDTH=0 MARGINHEIGHT=0 NORESIZE="NORESIZE"    SCROLLING="auto" NAME="leftframe">
<FRAME SRC="bottomleft.htm" NAME="bottomleft" NORESIZE="NORESIZE"  SCROLLING="auto">
<FRAME SRC="copyright.jsp" SCROLLING="NO" NAME="copyright" NORESIZE="NORESIZE">
 </FRAMESET>
 <FRAMESET ROWS="30,*" cols="*" FRAMESPACING=0 FRAMEBORDER=0 BORDER=0>
<FRAME SRC="header.jsp" SCROLLING="NO" MARGINWIDTH=0 MARGINHEIGHT=0  NORESIZE="NORESIZE" NAME="topbuttons">
  <FRAME SRC="content.jsp" MARGINWIDTH=0 MARGINHEIGHT=0 NAME="main" NORESIZE="NORESIZE">
  </FRAMESET>
 </FRAMESET>
   <noframes></noframes>
  </HTML> 
```

如果我理解正确，如果我试图引用“Content.jsp”中的元素，我就不需要 .

```
WebClient webClient = new WebClient();

    // Get the first page
    HtmlPage homepage = webClient.getPage("webpage");
    List<HtmlElement> mainF =homepage.getElementsByIdAndOrName("My Account"); 
```

但是它没有检测到该元素，我收到此错误...

> 2012 年 4 月 8 日下午 4:11:48 com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl 通知警告：“https://Webpage/common”上远程加载的 JavaScript 元素的预期内容类型为“application/javascript”或“application/ecmascript”。 js'，但得到了''。
> 
> 2012 年 4 月 8 日下午 4:11:48 com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl 通知警告：“https://Webpage/mui/”上远程加载的 JavaScript 元素的预期内容类型为“application/javascript”或“application/ecmascript” homepages.js'，但得到了''。
> 
> 2012 年 4 月 8 日下午 4:11:49 com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl 通知警告：“https://Webpage/mui/”上远程加载的 JavaScript 元素的预期内容类型为“application/javascript”或“application/ecmascript” write_cookie.js'，但得到了''。
> 
> 2012 年 4 月 8 日下午 4:11:50 com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl 通知警告：“https://Webpage/mui/”上远程加载的 JavaScript 元素的预期内容类型为“application/javascript”或“application/ecmascript” menuDisplay.js'，但得到了''。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T23:08:49.720

尝试删除所有语言=“JavaScript”并用更正确的类型=“文本/javascript”替换它们

只是一个注释，以确保您的代码不会过时。你有很多大写的东西。在 HTML 中使用小写标签创建所有未来的项目可能是值得的。我注意到你在开始标签之前也没有任何东西，这很不寻常。有一天你会为这种编码风格付出高昂的代价；一个好的开始是调查一个格式正确的 html 文件是什么样子，然后创建一个基本的 html 文件，然后通过事实上的验证器运行它：http: [//validator.w3.org/](http://validator.w3.org/)

我认为问题在于该工具的 html 代码存在问题，因为它不是有效的 HTML。通过验证器运行它。

# c++ - C++：使用指向单实例类实例化的全局变量是不是很糟糕？

> ID：10066153
> 
> 赞同：0
> 
> 时间：2012-04-08T20:17:10.367
> 
> 标签：c++, global-variables

在我的程序中，我有一堆类在程序执行期间只会创建一个实例。它们在初始化时只创建一次，在关闭时只销毁一次。

这些类都倾向于提供程序的许多不同部分使用的非常广泛的功能，因此将它们作为全局外部非常干净且易于理解，而不是将它们封装在另一个类中或传递指针。

该程序是多线程的，所有这些类都包含自己的互斥锁以供访问。

这种方法有什么问题吗？如果是这样，推荐的替代方案是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T20:21:56.403

使用单例模式，如下所示：

```
Foo& foo() { static Foo x; return x; } 
```

这是完全线程安全的。请参见此处：[G++ 4.6 -std=gnu++0x：静态局部变量构造函数调用时序和线程安全](https://stackoverflow.com/questions/9533649/g-4-6-std-gnu0x-static-local-variable-constructor-call-timing-and-thread-s)

它是由当前标准保证的。

此外，这优于静态初始化的全局变量，因为如果您有多个上述变量，它们将以正确的依赖顺序懒惰地初始化。

```
Foo& foo() { static Foo x; return x; }

Bar& bar() { static Bar x; return x; } 
```

并且在 Bar::Bar 中调用了 foo()，那么 Foo 单例将在 Bar 之前创建。

如果我有使用过的全局变量：

```
// Foo.cpp
Foo foo;

// Bar.cpp
Bar bar; 
```

不保证此类订购。

### 3.6.2 非局部变量的初始化

> ...变量的初始化相对于在不同翻译单元中定义的变量的初始化是不确定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T20:24:42.397

您可以使用单例，但要确保线程安全。有关教程，请查看单[例模式 - 1\. 线程安全](http://www.oaklib.org/docs/oak/singleton.html)

一个例子是

```
static SomeSingleton* getInstance()
{
    lock_mutex();
    if(!pInstance_)
        pInstance_ = new SomeSingleton();
    unlock_mutex();
    return pInstance_;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T13:31:23.863

通过在类中使用全局变量，会使它们难以测试。他们的行为现在取决于一个全球状态，这使得对他们进行推理变得困难。一类取决于全局变量。另一个类也依赖于它。两者都可以随时更改全局变量的状态。本质上，您在两个类之间创建了相互依赖关系。每次访问全局变量时，您都离依赖地狱的一个版本更近了一步。

您已经提到您不想将它们作为指针传递。其实我更喜欢这种方法。通过将依赖项（您的全局变量）显式传递给方法或构造函数，您可以告诉全世界。如果您需要将十个依赖项传递给您的方法，您可能需要重新考虑您的解决方案。这可能需要大量工作，但有助于改进程序的体系结构。

你已经写到你的类“倾向于呈现非常广泛的功能”。这可能表明它们应该被分解成更小的组件，以便您只需要传递您实际需要的功能。

我的建议是

*   你应该避免使用全局变量，尤其是单例的形式
*   try to find out more about [dependency injection](http://martinfowler.com/articles/injection.html) to properly pass around your dependencies
*   watch video [Don't look for things](https://www.youtube.com/watch?v=RlfLCWKxHJ0) (Clean Code Talks, Misko Hevery)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-08T20:38:31.730

c++在调用全局对象构造函数的顺序上有很大的问题有人称之为“全局初始化惨败”它与多线程无关，但与初始化有关如果你的程序有很多全局对象，那么它可能会导致一些问题（当然有一些方法可以解决这个问题）

您可以使用模式“单例”，但我不确定它是否对您有用

# php - 在 MySql 列上使用 PHP 函数

> ID：10066156
> 
> 赞同：1
> 
> 时间：2012-04-08T20:17:49.537
> 
> 标签：php, mysql, mysqli

我的数据库中有 4 列。攻击、力量、敏捷和体质。每个都是 INT，然后我有一个 PHP 函数 get_level，它采用这 4 列并确定它们的正确级别。我正在尝试根据这些“级别”选择给定范围内的所有用户。get_combat 函数采用这 4 个值并找到用户的战斗级别。这就是我所拥有的，它不起作用。

```
<?PHP 
$query = "SELECT get_level(attack) as atk,
    get_level(strength) as str,
    get_level(dexterity) as dex,
    get_level(constitution) as con,
    get_combat(atk,str,dex,con) as level 
    FROM `users` 
    WHERE level > 5 AND level < 10"; 
?> 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T20:21:07.453

你试图做的事情是不可能的。MySQL 甚至不知道 PHP 是什么或与它交谈的是哪种语言。

为什么不在迭代结果的循环中获取值并调用你的函数呢？

根据函数的复杂程度，您还可以在数据库中创建[存储过程](http://dev.mysql.com/doc/refman/5.1/en/stored-routines.html)。但是，您不能在该函数中编写 PHP 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T20:25:39.683

我认为你不能在 SQL 中做这样的事情。执行查询后，您可以使用这些功能。假设您使用的是旧`mysql_*`功能：

```
<?php
$result = mysql_query($query);
$newResults = array();
$i = 0;

while( $row = mysql_fetch_assoc($result) ) {
  $newResults[$i]['atk'] = get_level($row['attack']);
  $newResults[$i]['strength'] = get_level($row['strength']);
  /** ect. **/
  $newResults[$i]['level'] = get_combat($newResults['atk'],$newResults['str'],$newResults['dex'],$newResults['con']);
} 
```

# sql - 当我在 sql server 中有多个列时如何使用 DISTINCT

> ID：10066166
> 
> 赞同：10
> 
> 时间：2012-04-08T20:19:45.390
> 
> 标签：sql, sql-server, distinct

我有以下查询：

```
select carBrand, carYear, carModel from cars; 
```

我想要的是只获得不同的汽车名称。

我写了这个，但这不是我想要的。

```
select DISTINCT carBrand, carYear, carModel from Cars; 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-08T20:23:46.170

DISTINCT 适用于整行，而不是特定列。如果要获取唯一名称，请仅选择该列。

```
SELECT DISTINCT carBrand FROM Cars 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-04-08T20:23:53.220

尝试

```
SELECT carBrand , carYear ,carModel 
FROM Cars 
GROUP BY carBrand , carYear ,carModel; 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-06-09T22:17:05.663

我不确定为什么接受的答案已被接受，当然也不明白为什么它被赞成，但 OP 在问题中有以下内容：

> 我写了这个，但这不是我想要的。

```
select DISTINCT carBrand, carYear, carModel from Cars; 
```

接受的答案建议使用：

```
SELECT carBrand , carYear ,carModel 
FROM Cars 
GROUP BY carBrand , carYear ,carModel; 
```

它返回与 OP 查询完全相同的结果。实际上，甚至不鼓励将答案中的建议（使用 group by）用于获得不同的结果，而应将其用于聚合。有关更多信息，请参阅[此](https://stackoverflow.com/questions/164319/is-there-any-difference-between-group-by-and-distinct)答案。

此外，SQL Server 足够聪明，可以理解如果查询中没有聚合函数，那么查询实际上是在请求，`distinct`所以它会`distinct`在后台使用。

正如@MarkByers 在他的回答中所指出的那样， Distinct 将对整行执行不同的操作。

对于那些想要测试上述内容的人，这里有一个脚本，它将创建一个包含 3 列的表，然后用数据填充它。(`distinct`和`group by`) 都将返回相同的结果集。

```
CREATE TABLE [dbo].[Cars](
    [carBrand] [varchar](50) NULL,
    [carYear] [int] NULL,
    [carModel] [varchar](50) NULL
)
go;
insert into Cars values('BMW', 2000, '328 i');
insert into Cars values('BMW', 2000, '328 i');
insert into Cars values('BMW', 2000, '328 i');
insert into Cars values('BMW', 2000, '3M'); 
```

两个查询都将返回以下结果：

```
carBrand    carYear    carModel
BMW         2000       328 i
BMW         2000       3M 
```

* * *

**结论**

`group by`如果您想要不同的记录，请勿使用。使用`distinct`. 使用`group by`聚合函数时使用，例如`SUM`等`COUNT`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-08T20:24:26.450

这取决于你想要什么。例如，如果您想要“Toyota Corolla”和“Toyota Camry”，但忽略年份，那么您可以这样做：

```
SELECT DISTINCT carBrand + ' ' + carModel AS carName
FROM Cars; 
```

# php - 在 CakePHP 中为连接表设置包含

> ID：10066171
> 
> 赞同：1
> 
> 时间：2012-04-08T20:20:39.947
> 
> 标签：php, cakephp

在我的应用程序中，我有以下表格：

```
 Posts
id
title
content
    Users
id
username
password
    Profiles
id
user_id
firstname
lastname
    Comments
id
post_id
user_id
content
    Topics
id
title
    Topic_Posts
id
topic_id
post_id 
```

希望关系是相当明显的！我遇到的问题是最后一个表是帖子和主题之间多对多关系的连接表。我不完全确定如何设置！

这是我的帖子、主题和主题帖子模型：

```
class Post extends AppModel
{
    public $name = 'Post';

    public $belongsTo = 'User';

    public $hasMany = array('Comment', 'TopicPost');

    public $actsAs = array('Containable');
}
class Topic extends AppModel
{
    public $hasMany = array(
        'TopicPost'
    );
}
class TopicPost extends AppModel {
    public $belongsTo = array(
        'Topic', 'Post'
    );
} 
```

据我所知，关系是正确的？然后在我的方法中，我有以下声明：

```
$post = $this->Post->find('first',
            array('contain'=>
            array(
                'Comment'=>array('User'=>array('Profile')),
                'User'=>array('Comment','Profile')
            ),
            'conditions'=>array('Post.id'=>$id))); 
```

所以基本上我的问题是如何将主题添加到包含中，因为我不必将评论和用户添加到帖子模型中，所以不知道为什么或接下来要做什么......

**另外，我将如何再次将主题拉出？**考虑到我正在链接到联接表而不是实际主题，我对这将如何工作感到困惑......除非我只是偏离了轨道。对此的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T20:42:48.740

使用您当前的设置，您可以执行以下操作：

```
'contain' => array(
    'TopicPost' => array('Topic')
) 
```

或者您可以添加

```
public $hasAndBelongsToMany = array(
    'Topic' => array('with' => 'TopicPost')
); 
```

到`Post`模型。

然后您的包含将如下所示：

```
'contain' => array(
    'Topic'
) 
```

# clojure - 如何使用 Compojure 显示图像？

> ID：10066172
> 
> 赞同：4
> 
> 时间：2012-04-08T20:20:48.460
> 
> 标签：clojure, compojure

这个复合问题是双重的！

1.  如何在网页中显示图像对象（例如我从 Incanter 获得的图表）？
2.  如何在文件系统中显示图像？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T03:35:22.550

对于 1.，尝试[使用 Incanter、Compojure 和 Leiningen 构建 Clojure Web 应用程序](http://data-sorcery.org/2009/11/29/incanter-webapp/)。

对于 2.，尝试[Compojure：访问文件系统](https://stackoverflow.com/questions/7836030/compojure-access-filesystem)

# ios4 - 使用 Xcode 4.3 for iOS 4.2.1 进行开发

> ID：10066177
> 
> 赞同：0
> 
> 时间：2012-04-08T20:22:09.700
> 
> 标签：ios4, xcode4.3

我创建了一个新项目并将编译器设置为 LLVM GCC 4.2，iOS 部署目标设置为 4.2，但我仍然无法在带有 4.2.1 的 iPhone 3G 上启动它。它在模拟器和 iPhone 4 上运行良好，但是当我在带有 4.2.1 的 iPhone 3G 上运行它时，它在我启动它后立即“完成”，没有任何控制台输出。

有谁知道出了什么问题？

这些是有效的架构：

![有效架构](../Images/3b626961ffea0c3642446f4d4e990a80.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:58:41.457

您需要将 armv6 架构添加到有效架构中。看到这个答案： [Can't run app on iPhone 4.2.1 with Xcode 4.3.1 and IOS](https://stackoverflow.com/questions/9823142/cant-run-app-on-iphone-4-2-1-with-xcode-4-3-1-and-ios)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T01:13:09.113

`Valid Architectures`没用。您需要更改`Architectures`为`armv6 armv7`和。`Build Active Architectures``NO`![演示](../Images/75ba35c7ae1c08b2ea2865cd62dd1f3b.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T03:37:01.980

在您的项目设置中，

点击目标，

应该有一个名为Required device capabilities 的项目。将其设置为 armv6

它对我有用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T06:33:34.157

发现项目需要 plist 并取消对仅 ARMv7 的限制

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T13:00:21.633

将架构更改为 armv6 armv7 对我有用，我根本不需要所需的设备功能。

# mysql - MySQL 创建表命令

> ID：10066183
> 
> 赞同：1
> 
> 时间：2012-04-08T20:22:57.620
> 
> 标签：mysql, sql

我是 MySQL 命令的新手。拜托，我尝试使用 MAMP MySQL 编辑器创建表，但出现错误 #1046 No database selected..以下是简单代码：

```
[code]

  CREATE TABLE EMPLOYEE_TABLE AS:
  (SSN              NUMBER(9)        NOT NULL,
   LAST_NAME        VARCHAR2(20)     NOT NULL,
   FIRST_NAME       VARCHAR2(20)     NOT NULL,
   MIDDLE_NAME      VARCHAR2(20)     NOT NULL,
   ST ADDRESS       VARCHARS2(20)    NOT NULL,
   CITY             CHAR(20)         NOT NULL,
   STATE            CHAR(2)          NOT NULL,
   ZIP              NUMBER(4)        NOT NULL,
   DATE_HIRED       DATE)
   STORAGE(INITIAL    3K, 
   NEXT               1K)
[/code] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T20:27:09.713

您必须选择要在其中插入表的数据库，有一些方法可以做到：

1.  选择默认数据库：`USE databasename;`
2.  在语句中的表之前指定数据库名称`CREATE TABLE`： `CREATE TABLE DATABASENAME.EMPLOYEE_TABLE ...`

`databasename`您的数据库的名称在哪里。

# apache - 在 apache 服务器中实现 MVC 时出现 500 错误

> ID：10066184
> 
> 赞同：0
> 
> 时间：2012-04-08T20:23:10.087
> 
> 标签：apache, model-view-controller, zend-framework, .htaccess, controller

我对 php 很感兴趣，我试图在 php 中实现 Model-View-Controller 我更新了允许覆盖所有并创建了一个 .htacess 文件并在其中写了以下引号，

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^(.*)$ index.php?url=$1 {QSA,L} 
```

但我给了我 500 错误，我直接进入 apache 错误日志并得到这些错误：

```
[Mon Apr 09 01:18:36 2012] [alert] [client ::1] C:/wamp/www/.htaccess: Invalid command 'RewriteEngine', perhaps 

misspelled or defined by a module not included in the server configuration 
```

我用谷歌搜索和搜索但找不到它，我只想将所有请求传递给 index.php 文件但我不知道那是什么，如果我在 .htacess 中写下以下内容：

```
ErrorDocument 404 /404.php
ErrorDocument 500 /500.php 
```

并且 goto url 不存在，然后它由 404.php 控制，但是我尝试编写第一个脚本然后我每次都给我 500 错误...以前我也尝试安装 zend 框架但仍然存在相同的错误。 ...我为我的语言道歉，，，在此先感谢...请帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T20:31:37.990

你在 apache 中的重写模块是否启用？您可以在安装目录的 httpd.conf 文件中启用它。如果您使用的是 Windows，只需取消注释重写模块行并重新启动您的 apache。

您可以谷歌“启用 apache 重写”以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T20:31:06.353

您需要启用 mod_rewrite。通过“a2enmod rewrite”或手动添加到 httpd.conf

# scheme - 简化递归函数语法的宏

> ID：10066185
> 
> 赞同：2
> 
> 时间：2012-04-08T20:23:10.870
> 
> 标签：scheme, racket

当我学习计划和球拍时，我发现自己一次又一次地重复这种模式。我有一个递归函数，其中函数的某些参数会更改，但某些参数不会。我构建了一个接受所有参数的外部函数，并在其中定义了一个只接受不断变化的参数并在其上重复的内部函数。

作为一个具体的例子，这里有一个基于“The Little Schemer”中的函数练习的案例

```
;inserts an item to the right of an element in a list   
(define   (insert-to-right new old lat)    
  (define (insert-to-right lat)  
    (cond  
      [(null? lat) lat]  
      [(eq? old (car lat) ) (cons old (cons new (cdr lat)))]  
      [else (cons (car lat) (insert-to-right    (cdr lat)))]))  
    (insert-to-right lat)) 
```

是否可以构建一个宏定义 * 和一个运算符（例如竖线），以便我输入：

```
(define*   (insert-to-right new old | lat)      
    (cond  
      [(null? lat) lat]  
      [(eq? old (car lat) ) (cons old (cons new (cdr lat)))]  
      [else (cons (car lat) (insert-to-right    (cdr lat)))])) 
```

然后这将扩展为第一种形式，所有参数都传递给外部函数，但只有竖线之后的参数传递给内部循环。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-08T20:39:36.540

您可以编写这样的宏，但也可以只使用命名的 let：

```
(define (insert-to-right new old lat)
  (let loop ([lat lat])
    (cond
      [(null? lat)         lat]  
      [(eq? old (car lat)) (cons old (cons new (cdr lat)))]  
      [else                (cons (car lat) (loop (cdr lat)))]))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T02:52:12.993

在玩耍之后，我构建了一个可以满足我需求的宏。

```
(define-syntax-rule 
  (define* (function-name (outer-var ...)  (inner-var ...)) expr ...)
  (define (function-name outer-var ... inner-var ...) 
    (define (function-name inner-var ...)expr ...)
    (function-name inner-var ...)))   

(define*   (insert-to-right [new old] [lat])        
    (cond  
      [(null? lat) lat]  
      [(eq? old (car lat) ) (cons old (cons new (cdr lat)))]  
      [else (cons (car lat) (insert-to-right    (cdr lat)))])) 

> (insert-to-right 11 3 '(1 2 3 4 5 6))
'(1 2 3 11 4 5 6) 
```

在define* 语句中，它不使用内部参数和外部参数之间的分隔符（正如我最初尝试做的那样），而是将define* 语句中的内部参数和外部参数放入单独的列表中，我认为这是更惯用的Scheme/Racket .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T21:17:43.040

您不应该使用宏来执行此操作。这是高阶函数的教科书案例；特别是，我相信您的示例可以用[`pair-fold-right`from SRFI-1](http://srfi.schemers.org/srfi-1/srfi-1.html#pair-fold-right)编写。未经测试的代码（我希望这是正确的）：

```
(define (insert-to-right new old lat)
  (pair-fold-right (lambda (pair rest)
                     (if (eq? (car pair) old)
                         (cons (car pair)
                               (cons new rest))
                         pair))
                   '()
                   lat))

;;; Example implementation of pair-fold-right, just for one list—your Scheme system
;;; probably has this as a library function somewhere
(define (pair-fold-right fn init list)
  (if (null? list)
      init
      (fn list (pair-fold-right fn init (cdr list))))) 
```

# javascript - 用于从用户从 JSON 数据集中选择的选项构建 URL 的 Ckeditor 对话框

> ID：10066186
> 
> 赞同：0
> 
> 时间：2012-04-08T20:23:31.457
> 
> 标签：javascript, html, ckeditor

我正在尝试将 CKeditor 用作 CMS 的一部分，但我对 JavaScript 并不“那么”好，并且那里的文档没有多大帮助。

有人可能会向我展示如何更改链接插件对话框，以便它显示值的下拉列表并从中构建一个 URL，相当令人困惑，但我不明白那里的对话框系统是如何工作的，我已经缩小了范围，我知道我将需要使用，`_sources/plugins/link/dialogs/link.js`但至于在使用它时我是如何迷失的，我只是无法理解。

有人可以向我展示我需要向对话框添加下拉菜单（选择）的代码，该对话框具有然后将值写入 url 字段 EG 的选项

我的服务器系统有 URL /content/getLinks/，这将像这样返回 CMS 页面，

```
[
 {"page_name":"Contact Us","url":"Contact_Us","page_id":"1"},
 {"page_name":"Welcome to Doxie Promotions","url":"Welcome_to_Doxie_Promotions","page_id":"2"},
 {"page_name":"Bands","url":"Bands","page_id":"3"},
 {"page_name":"Upcoming Events","url":"Upcoming_Events","page_id":"4"},
 {"page_name":"About","url":"About","page_id":"7"},
 {"page_name":"Lost Efftect","url":"Lost_Efftect","page_id":"10"}
] 
```

现在从这些数据中我想建立一个这样的选择框

```
<select>
    <option value="Contact_Us:1">Contact Us</option>
    <option value="Welcome_to_Doxie_Promotions:1">Welcome to Doxie Promotions</option>
    <option value="Bands:1">Bands</option>
    <option value="Upcoming_Events:1">Upcoming Events</option>
    <option value="About:1">About</option>
    <option value="Lost_Efftect:1">Lost Efftect</option>
</select> 
```

然后，选择一个时，我希望要更改的URL字段，例如，如果第一个是选项选择的URL将是

```
/content/load/pid/1/url/Contact_Us 
```

我知道我需要将插件对话框的源版本复制到已挖掘的标准版本之上

**更新我到目前为止** 使用`_sources/plugins/link/dialogs/link.js`和覆盖的尝试`plugins/link/dialogs/link.js`

我已经建立了这段代码

在第 429 行进入文件

```
,
{
    type : 'select',
    id : 'cms_links',
    label : 'CMS Page',
    items:[],
    onLoad : function(){
        (function($){
            $.ajax({
              url: "/content/getLinks/",
              dataType: 'json',
              data: "",
              success: function(data){
                $.each(data, function(key, val){
                    $("#cms_links").append(
                        "<option value='"+val.url+":"+val.page_id+"'>"+val.page_name+"</option>"
                    );
                });
              }
            });
        })(jQuery);
    }
}, 
```

但是甚至没有为我添加的代码绘制一个选择框，所以我仍然不知所措

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T21:49:15.067

为此，您必须在路径中的 _sources 中将代码的最小化版本`_sources/plugins/link/dialogs/link.js`复制到最小化代码的顶部，`plugins/link/dialogs/link.js`我在第 429 行附近添加了下面的代码

```
,
{
    type : 'select',
    id : 'cms_links',
    label : 'CMS Page',
    class : 'cms_links',
    items:[],
    onLoad : function(){
        (function($){
            var cms_pageSelectElement;
            var protocolSelectElement;
            var urlSelectElement;
            $.ajax({
              url: "/content/getLinks/",
              dataType: 'json',
              success: function(data){
                  $("label").each(function(){
                    var value = $(this).html();
                    if(value == "CMS Page"){
                        cms_pageSelectElement = $(".cke_dialog_ui_input_select", $(this).parent());
                        console.log(cms_pageSelectElement);
                    }
                    if(value == "Protocol"){
                        protocolSelectElement = $(".cke_dialog_ui_input_select", $(this).parent());
                        console.log(protocolSelectElement);
                    }
                    if(value == "URL"){
                        urlSelectElement = $(".cke_dialog_ui_input_text", $(this).parent());
                        console.log(urlSelectElement);
                    }
                  });

                  $(cms_pageSelectElement).append("<option selected='selected'><none CMS link></option>");
                for(var key in data){
                    var val = data[key];
                    $(cms_pageSelectElement).append(
                        "<option value='"+val.url+":"+val.page_id+"'>"+val.page_name+"</option>"
                    );
                }
                $(cms_pageSelectElement).change(function(){
                    var val = $(this).val();
                    var parts = val.split(":");
                    var url = "content/load/pid/"+parts[1]+"/url/"+parts[0];
                    $(urlSelectElement).val(url);

                });
              }
            });
        })(jQuery);
    }
}, 
```

使用 jQuery 时，您必须稍微利用系统来更新其他元素，因为没有可以设置的值，然后设置到 HTML 元素上，因此您必须通过选择标签然后从父级获取输入来破解标签

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T21:54:28.670

你可以尝试使用这个插件：[http ://cksource.com/forums/viewtopic.php?f=18&t=24282](http://cksource.com/forums/viewtopic.php?f=18&t=24282)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T21:10:44.823

我可以给你这个开始：http: [//jsfiddle.net/VGWPL/](http://jsfiddle.net/VGWPL/)

# asp.net - URL 编码冒号解析为 400 Bad Request

> ID：10066188
> 
> 赞同：6
> 
> 时间：2012-04-08T20:23:50.957
> 
> 标签：asp.net, urlencode, asp.net-mvc-4, asp.net-web-api

为什么此 url 解析为 400 - Bad Request？

[http://localhost:2785/api/ticker/Web.App.QuotesReaders/search=se%3Aabb](http://localhost:2785/api/ticker/Web.App.QuotesReaders/search=se%3Aabb)

我的环境是 Visual Studio 2010，MVC 4，使用的控制器是 WebApiController。

%3A 是 URL 编码的冒号。

**解决方案**

这出于某种原因：

[http://localhost:2785/api/ticker?className=Web.App.QuotesReaders&search=se%3Aabb](http://localhost:2785/api/ticker?className=Web.App.QuotesReaders&search=se%3Aabb)

...这意味着，我无法在 global.asax.cs 中指定此路线：

```
/api/ticker/{className}/{search} 
```

……也不是这个……

```
/api/ticker/{className}/search={search} 
```

... 但是这个 ...

```
/api/ticker 
```

更多信息：[http ://www.hanselman.com/blog/ExperimentsInWackinessAllowingPercentsAnglebracketsAndOtherNaughtyThingsInTheASPNETIISRequestURL.aspx](http://www.hanselman.com/blog/ExperimentsInWackinessAllowingPercentsAnglebracketsAndOtherNaughtyThingsInTheASPNETIISRequestURL.aspx)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T11:41:40.007

似乎 ASP.net 不允许在“？”之前使用冒号。在 URL 中，即使它被编码为 %3A。

例如，这些不起作用

[http://foo.org/api/persons/foo:bar](http://foo.org/api/persons/foo:bar) [http://foo.org/api/persons/foo%3abar](http://foo.org/api/persons/foo%3abar)

但这有效： http: [//foo.org/api/persons?id=foo%3abar](http://foo.org/api/persons?id=foo%3abar)

在所有示例中，我们希望 ASP.NET MVC 将“foo:bar”作为 id 参数传递，并正确解码。我刚刚用 MVC4 测试了这个，它似乎工作。令人讨厌的是它不接受问号之前的 URL 编码，但我确信这是有充分理由的。可能将问号之前的所有内容保留为有效的 URL 以及问号之后的任何参数。

# objective-c - 在目标 c 中编写一个 plist

> ID：10066190
> 
> 赞同：0
> 
> 时间：2012-04-08T20:23:53.520
> 
> 标签：objective-c, xcode, plist

我知道有很多主题有类似的问题，但我一直无法找到一个主题来解决我的问题。

我想存储一个高分列表。
每个高分条目必须有两个元素
，一个 NSString* 和一个 int。

我想存储前 20 个高分（字符串和整数对）并在 plist 中执行此操作。

我开始：

```
NSMutableArray *arr = [[NSMutableArray alloc] initWithContentsOfFile: [[NSBundle mainBundle] pathForResource:@"Mylist" ofType:@"plist"]]; 
```

我希望数组的第 0 项是一个字典，我可以在其中插入 (string, int) 的键值对
我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T01:51:49.463

[属性列表序列化](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/PropertyLists/SerializePlist/SerializePlist.html)

您需要注意：可变性选项，因为您的方法可能返回不可变数组...

存储在 plist 中是使用`writeToFile:...`or`writeToURL:...`方法完成的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T13:23:28.337

您始终可以调用`[arr addObject:score];`，对其进行排序，然后删除最后一项，直到有 10 个。

排序：

```
[arr sortUsingComparator:^(id firstObject, id secondObject) {
    NSDictionary *firstDict = (NSDictionary *)firstObject;
    NSDictionary *secondDict = (NSDictionary *)secondObject;
    int firstScore = [[firstDict objectForKey:@"score"] intValue];
    int secondScore = [[secondDict objectForKey:@"score"] intValue];
    return firstScore < secondScore ? NSOrderedAscending : firstScore > secondScore : NSOrderedDescending : NSOrderedSame;
}]; 
```

如果您希望分数相反，请将“>”更改为“<”，反之亦然。要将列表减少到 10：

```
while ([arr count] > 10) {
    [arr removeLastObject];
} 
```

从 plist 加载时，您可能需要进行排序。对于 10 分，对性能的影响很小，所以我建议你这样做以防万一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T20:28:48.063

```
[arr insertObject:[NSMutableDictionary dictionary] atIndex:0]; 
```

# objective-c - 删除 NSWindow 内容视图

> ID：10066193
> 
> 赞同：1
> 
> 时间：2012-04-08T20:24:21.400
> 
> 标签：objective-c, xcode, cocoa

我为以下窗口设置了内容视图，现在我想删除该内容视图并将其设置为其他内容。我尝试将内容视图设置为另一个视图，但不起作用，我该如何删除它？谢谢！

```
 controlFilterBox = [[MoveFilter alloc] initWithFrame:helpWindow.frame];
    [helpWindow setContentView:controlFilterBox];
    [controlFilterBox release]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-08T20:47:10.003

您不能删除 contentView（即设置为`nil`）。窗户需要视野。您可能可以通过调用 来获得您想要做的事情`[controlFilterBox setNeedsDisplay:YES]`，但我通常建议您不要将`contentView`自己弄乱，而是将要交换的视图设置为`contentView`. 然后，您可以使用`removeFromSuperview`和将它们作为普通视图交换`addSubview:`。它通常比处理像`contentView`.

# php - 使用 SimpleXML 解析 PHP 中嵌套的 XML/RDF 命名空间元素

> ID：10066198
> 
> 赞同：2
> 
> 时间：2012-04-08T20:24:56.490
> 
> 标签：php, xml, rdf, semantic-web, semantic-markup

鉴于下面[从 W3C](http://www.w3schools.com/rdf/rdf_main.asp)网站获取的 XML/RDF 示例，我如何访问“cd”命名空间中的值？

```
<?xml version="1.0"?>

<rdf:RDF
xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
xmlns:cd="http://www.recshop.fake/cd#">

<rdf:Description
rdf:about="http://www.recshop.fake/cd/Empire Burlesque">
  <cd:artist>Bob Dylan</cd:artist>
  <cd:country>USA</cd:country>
  <cd:company>Columbia</cd:company>
  <cd:price>10.90</cd:price>
  <cd:year>1985</cd:year>
</rdf:Description>

</rdf:RDF> 
```

我尝试过执行以下操作：

```
$XML = new SimpleXMLElement($rawXML); // Assume $rawXML is the quoted XML/RDF above
foreach($xml as $entry){
    $cd = $entry->children('http://www.recshop.fake/cd#');
    echo $cd->artist;
    echo $cd->$country;
    ...
} 
```

我也尝试过：

```
$XML = new SimpleXMLElement($rawXML); // Assume $rawXML is the quoted XML/RDF above
foreach($xml as $entry){
    $cd = $entry->children('http://www.recshop.fake/cd#');
    $rdf = $entry->children('http://www.w3.org/1999/02/22-rdf-syntax-ns#');
    echo $rdf->$cd->artist;
    echo $rdf->$cd->$country;
    ...
} 
```

此外，在 PHP 中是否有必要做任何不同的事情，而不是声明`xmlns:cd="http://www.recshop.fake/cd#"`它是`xmlns="http://www.recshop.fake/cd#"`并且“cd”命名空间已从`<cd:artist>`等中删除。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T04:22:33.073

您不应该使用 XML 解析器来读取 rdf/xml，因为它不理解将 RDF 三元组写入 XML 的编码；有多种方法可以写下其中一个术语，例如`cd:artist`. 这就像在 JSON 数据上使用正则表达式一样——它可能会起作用，但它不会捕获所有情况。使用 XML 方法，您最终会产生误解。我建议您使用来自[https://github.com/semsol/arc2的解析器](https://github.com/semsol/arc2)

XML 方法可行的唯一方法是保证生成的 XML 始终使用相同的模板编写。例如，XMP 文档元数据就是这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T00:50:10.203

您可以使用 xpath，首先您需要注册命名空间。试试这个：

```
$xml = new SimpleXMLElement($rawXML);

$xml->registerXPathNamespace('rdf', 'http://www.w3.org/1999/02/22-rdf-syntax-ns#');
$xml->registerXPathNamespace('cd', 'http://www.recshop.fake/cd#');

$cd = $simple->xpath('rdf:Description/cd:*'); 
```

$cd 将是一个 SimpleXMLElements 数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T08:04:00.403

值得一提的是，这里有一个 SPARQL 查询，它可以为您提供`dc`命名空间中的属性，无论文件格式如何（与 Tamas Imrei 的 XPath 查询相反，该查询仅在文件格式与您的示例完全相同时才有效）：

```
SELECT ?terms WHERE {
   ?s  ?terms  ?o .
   FILTER (regex(str(?term),"http://www.recshop.fake/cd#"))
} 
```

这也与您使用的命名空间前缀无关。

# servlets - 为什么用 startAsync 创建新线程而不是在 servlet 线程中工作？

> ID：10066199
> 
> 赞同：7
> 
> 时间：2012-04-08T20:25:09.123
> 
> 标签：servlets, servlet-3.0

在 servlet 3.0 中，可以使用 startAsync 将长时间的工作放在另一个线程中，这样您就可以释放 servlet 线程。

似乎我错过了一些东西，因为我没有看到，为什么不直接使用 servlet 线程来工作呢？startAsync 创建的线程是否更便宜？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-08T20:33:53.817

在大多数情况下，在处理请求时，您会阻塞或等待某些外部资源/条件。在这种情况下，您正在占用线程（因此占用大量内存）而不做任何工作。

使用 servlet 3.0，您可以提供数千个并发连接，远远超过可用线程。考虑一个以有限的吞吐量提供文件下载的应用程序。大多数情况下，您的线程处于空闲状态，因为它们正在等待发送下一块数据。在普通的 servlet 中，您不能为超过 HTTP 线程数的客户端提供服务，即使这些线程大部分时间都处于空闲/睡眠状态。

在 servlet 3.0 中，您可以拥有数以千计的连接客户端，而 HTTP 线程很少。你可以在我的文章中找到一个真实的例子：[Tenfold increase in server throughput with Servlet 3.0 asynchronous processing](http://nurkiewicz.blogspot.com/2011/03/tenfold-increase-in-server-throughput.html)受这个问题的启发：[Restrict download file bandwidth/speed in Servlet](https://stackoverflow.com/questions/5060414)

> startAsync 创建的线程是否更便宜？

没有创建线程`startAsync`！它只是告诉 servlet 容器：*嘿，虽然`doGet`/`doPost`方法完成了，我还没有完成这个请求，请不要关闭*。这就是重点——您可能**不会**为每个异步请求创建新线程。[这是另一个示例 - 您有数千个浏览器使用comet](/questions/tagged/comet "显示标记为“彗星”的问题")等待股价变化。在标准 servlet 中，这意味着：数以千计的空闲线程等待某个事件。

使用 servlet 3.0，您可以让所有异步请求在一个`ArrayList`或某个队列中等待。当股价变动到来时，一个接一个地发送给所有的客户。在这种情况下，只需要一个线程 - 所有 HTTP 线程都可以自由处理剩余资源。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T10:13:27.283

*使用 servlet 3.0，您可以让所有异步请求在 ArrayList 或某个队列*中等待 问题是这样的。您仍然需要一个新线程来处理请求并获取请求以最终发送响应。所以我们释放了 http 线程，但必须创建一些线程来处理请求

# ruby-on-rails - 播种没有模型的翻译表，rails app

> ID：10066202
> 
> 赞同：2
> 
> 时间：2012-04-08T20:25:14.363
> 
> 标签：ruby-on-rails, seed, globalize3

我正在使用 Ryan Bates railscasts 中看到的 Globalize 3 gem，一切正常。我需要知道如何播种数据。目前，我使用以下架构创建了一个名为monthly_post_translations 的表

架构.rb

```
create_table "monthly_post_translations", :force => true do |t|
  t.integer  "monthly_post_id"
  t.string   "locale"
  t.text     "body"
  t.datetime "created_at"
  t.datetime "updated_at"
end 
```

我需要将种子数据添加到此表中，但它没有可与之交互的模型，那么我该怎么做呢？

这是我的电流 seed.rb 不起作用

种子.rb

```
# Monthly Posts
  MonthlyPost.delete_all

 monthlypost = MonthlyPost.create(:body => "Monthly Post Text")

#Monthly Posts Spanish Translation
monthlytranslation = MonthlyPostTranslation.create(:body => "Spanish Translation of monthly post text",
      :monthly_post_id => monthlypost.id,
      :locale => "es" ) 
```

但是monthly_post_translation 表没有我可以与之交互的模型，所以我得到了错误

```
uninitialized constant MonthlyPostTranslation 
```

关于如何正确添加此种子数据的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T21:08:54.910

从[文档](https://github.com/svenfuchs/globalize3)中通过键入 `translates :<attribute_name_here>`您会生成名为`MonthlyPost::Translation`. 所以答案将是：使用实例集合来创建或列出实体的所有翻译：

```
monthlypost = MonthlyPost.create(:body => "Monthly Post Text")

#Monthly Posts Spanish Translation
monthlytranslation = monthlypost.translations.create(:body => "Spanish Translation of monthly post text",
      :locale => "es" ) 
```

# java - Eclipse IDE、Ubuntu、Java如何将程序编译成独立运行？

> ID：10066207
> 
> 赞同：0
> 
> 时间：2012-04-08T20:25:35.320
> 
> 标签：java, eclipse, ubuntu

我正在尝试在 Ubuntu 上的 Eclipse 中编译两个 java 程序。然后我希望能够从两个终端运行程序；服务器和客户端。我对eclipse和ubuntu还很陌生，我该怎么做。例如使用 g++ 并吐出 a.out 或任何你可能称之为的东西，我如何使用 eclipse 和 Java 程序来做到这一点？

我不需要在 JVM 中运行它们吗？我知道 java 被编译为 java 字节码并在 JVM 上运行。但这是我第一次尝试在eclipse之外运行一个用eclipse编写的java程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T20:34:39.163

要在 Eclipse 之外运行程序，有几种方法，我在下面列出了一些机会：

*   获取 dist 文件夹将其复制到某处并从此处执行程序，将主类名作为 jvm 参数传递
*   将程序导出为可运行的 jar

要导出为可运行的 jar，过程如下：

1.  突出显示适当的文件/项目
2.  `File -> Export`
3.  选择“可运行的 JAR 文件”-> 下一步
4.  确保在“启动配置”下拉列表中选择了正确的项目，并在“库处理”部分下选择“将所需的库打包到生成的 JAR 文件中”，并确保它转到正确的导出目的地。
5.  点击完成
6.  使用以下命令运行 jar：`java -jar yourjarname.jar`

既然您似乎熟悉 gcc，甚至可能还有另一个选择：将 java 程序编译成带有[gcj](http://gcc.gnu.org/java/) gcc 扩展名的标准可执行文件，还有 eclipse 插件[GCJBuilder](http://gcjbuilder.sourceforge.net/) ...

# java - java扫描仪忽略^插入符号

> ID：10066210
> 
> 赞同：2
> 
> 时间：2012-04-08T20:25:52.987
> 
> 标签：java, java.util.scanner, delimiter

我正在尝试通过使用方法将 java 扫描器与以下一组分隔符`& = ~ ^`（与号、等于、波浪号、插入符号）一起使用`useDelimiter("&|=|~|^");`。

除了`^`被忽略之外，所有分隔符都可以正常工作：为什么会这样？

我在扫描仪文档中看不到原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T20:27:02.550

你需要逃跑`^`，像这样：`useDelimiter("&|=|~|\\^")`。那是因为`^`is 是正则表达式中的元字符，并且`String`参数`useDelimiter()`最终被编译为 regex [`Pattern`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)。

等效地，您可以像这样编写分隔符，在这种情况下，无需转义`^`：`useDelimiter("[&=~^]")`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T20:27:06.730

`^`是正则表达式中的保留符号，因此您需要对其进行转义：`\\^`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T20:28:07.387

[您可以使用字符类](http://www.regular-expressions.info/charclass.html)，而不是使用交替：

```
"[&=~^]" 
```

由于`^`在字符类中并不特殊（开始时除外），因此不需要转义。

# linux - iptables - 如何允许仅从 *:27005 连接到端口 27015

> ID：10066212
> 
> 赞同：-1
> 
> 时间：2012-04-08T20:27:00.593
> 
> 标签：linux, iptables

我有一个在端口 27015 侦听的应用程序。我想允许客户端端口为 27005 的所有 ips 并丢弃其余的。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T20:33:05.790

这个页面展示了一些很好的 iptables 示例。

[http://www.cyberciti.biz/tips/linux-iptables-how-to-specify-a-range-of-ip-addresses-or-ports.html](http://www.cyberciti.biz/tips/linux-iptables-how-to-specify-a-range-of-ip-addresses-or-ports.html)

所以，这样的事情应该这样做：

iptables -A INPUT -p tcp --sport 27005 --dport 27015 -m state --state NEW,ESTABLISHED -j ACCEPT

iptables -A 输入 -j DROP

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-29T19:44:21.243

有点晚了，但这是我会做的

```
iptables -A INPUT -p tcp --dport 27005 -j ACCEPT
iptables -A INPUT -j DROP
service iptables save
service iptables restart 
```

# c# - 在安装项目中包含 sql 企业？

> ID：10066218
> 
> 赞同：0
> 
> 时间：2012-04-08T20:27:21.140
> 
> 标签：c#, vb.net, visual-studio, visual-studio-2010

# 在安装项目中包含 sql 企业？

**如何在安装项目的先决条件中未出现 sql Enterprise 时包含它**

**如果不可能，我是否在客户端机器上安装了完整的企业版？** 我使用 Visual Studio 2010 和 sql Enterprise 2008。 **我是数据库初学者**，我一直使用 sql express 版本，但现在数据库增长很快，4gb 的 sql express 的限制成为一个大问题，所以我会提供任何帮助非常感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T21:13:06.087

**Microsoft SQL Enterprise**版遵循并使用它自己的许可证，您只需要通过 Web 或离线安装程序安装它。

它是一个付费许可产品，Wwitch Express 和 Compact Editions 不是，最后两个版本是您可以随应用程序打包的版本，因为**它们的许可允许您这样做**。

您始终可以使用可以在数据库上运行的文件来填充记录，或者使用例如[Windows SQL Azure](http://www.windowsazure.com/en-us/home/features/sql-azure/)来拥有一个居中的数据库并使用数据导出/导入您的架构。

# git - 你如何使用 Git？我想将文件推回 Github 存储库？

> ID：10066220
> 
> 赞同：0
> 
> 时间：2012-04-08T20:27:31.220
> 
> 标签：git, github, push

我目前正在与其他一些人合作开发一个大型 Java 项目，并且已经克隆了存储库以便在我的家用 PC 上使用它。我继续在这个巨大项目的整个目录/子目录结构中更改了 2 个文件，并且只想将我编辑的这两个文件推回存储库。

有没有我可以使用的命令来完成这个？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T20:37:15.647

如果您添加了新文件，请确保添加它们`git add`

`git commit -a -m "Commit message"`

`git push`

要获得他们在您之前所做的任何新更改，您需要先拉

`git pull`

然后修复任何合并冲突并提交合并。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T20:29:55.763

假设您提交了更改并且它位于服务器上已经存在的分支中，您可以简单地使用`git push`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T23:40:28.357

`git clone`完成存储库并对文件进行更改后，您可以使用它来`git status`查看哪些文件已更改。

使用 选择要提交的更改`git add`。当您选择（“暂存”）您希望提交的所有更改时，`git commit`它们。这将提交到您的本地存储库。

要将提交推送到 github，请使用`git push`.

如果您是 git 新手，我强烈建议您*至少*浏览一下[Pro Git 书籍](http://progit.org/book/)。它为一大堆 git 主题提供了一些很好的图表和解释；我发现它非常有用。特别是，对于这个问题，请查看[“记录对存储库的更改”](http://progit.org/book/ch2-2.html)和[“使用遥控器”](http://progit.org/book/ch2-5.html)部分。

[StackOverflow Git FAQ / Wiki](https://stackoverflow.com/tags/git/info)也有一些关于常见问题的简洁信息；其中一些与您的相关，例如[这个](https://stackoverflow.com/questions/315911/git-for-beginners-the-definitive-practical-guide#316055)。

编辑：顺便说一句，关于你问题的这一部分：

> ...只需推送我编辑的那两个文件...

Git 考虑的是*提交*，而不是*文件*。您不能在存储库中推送文件的子集，因为提交包含提交时的整个存储库。`git push`但是，其他网络类型的`git`命令非常擅长计算它们应该发送到远程存储库的内容。不用担心，即使存储库很大，如果您更改了两个源文件，a`git push`也不会将每个文件都推送回远程存储库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T23:46:48.350

`git pull origin master`- 确保您的主分支是由 origin（通常是 github）定义的远程存储库中的最新更改是最新的。

`git status`- 显示您在您所在的分支中修改的文件。

`git add`. - 将您修改的文件添加到当前分支。

`git commit`- 将更改的文件保存到当前分支。

`git push origin master`- 将主分支中更改的文件发送到远程存储库。

# c++ - 通过引用 cpp 返回字符串

> ID：10066222
> 
> 赞同：1
> 
> 时间：2012-04-08T20:27:46.170
> 
> 标签：c++, pass-by-reference

如果之前有人问过这个问题，请原谅我，我确信它已经问过了，但我找不到满意的答案。

我从沉重的 Java 背景来到 cpp，想了解*何时*将引用/指针返回到对象而不是副本。

对于以下类定义：

```
class SpaceShip {
    string name;
    WeaponSystem weaponSystem; //represents some object, this is just an example, I dont have this type of object at all in my program 
    int hull;

    string GetName() const {
       return name;
    }

    WeaponSystem GetWeaponSystem() const {
       return weaponSystem;
    }

    int GetHull() const {
       return hull;
    }
}; 
```

我知道返回东西的副本很昂贵，我认为这意味着我想避免按值返回字符串或武器系统之类的东西，但是按值返回 int 是可以的。

这是正确的吗？我也知道我需要知道事物在内存中的位置，如果该对象被破坏并且某些事物仍然拥有对其名称的引用，那么返回对此类中某些事物的引用是否意味着危险？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T20:30:39.103

它“有效”，但你应该有

```
const string& GetName() const { 
```

拥有以下内容也可能是有益的

```
const WeaponSystem& GetWeaponSystem() const { 
```

此外，`class`默认情况下是私有的，因此，您的访问器函数是私有的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T20:39:09.153

最后一点，与 Java 相比，C++ 中的资源管理肯定需要更加小心。特别是，您需要决定何时不再需要某个对象。通过引用返回对返回的对象具有别名的效果。当您共享的对象是不可变的时，这并不明显，但与 Java 的字符串不同，C++ 字符串是可变的。因此，如果您`name`按值返回然后重命名您的`SpaceShip`，即使在重命名之后，调用者也会看到旧名称。但是，如果您通过引用返回，调用者将在重命名后立即看到更改`ShaceShip`。

当您处理复制复杂对象时，您可以通过提供复制构造函数的自定义实现来决定复制多少。如果您决定提供一个复制构造函数，请不要忘记[三个规则](http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29)，并覆盖另外两个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-16T15:06:56.990

您必须知道的是，您班级的每个吸气剂都必须是这样的原型：

```
const <type> &className::getXXX() const
{
 ...
} 
```

以及您这样制作的每个二传手：

```
void className::setXXX(const <type> &)
{
 ...
} 
```

尽可能使用参考。有时，对于复杂对象，您可以使用指针。这取决于您的代码结构。

# c - 通过套接字的客户端服务器通信

> ID：10066223
> 
> 赞同：2
> 
> 时间：2012-04-08T20:27:47.437
> 
> 标签：c, sockets, client

我想将一个结构从我的客户端程序发送到服务器程序（我正在编写服务器程序和客户端程序）。此外，如果我在 32 位 OS Linux 上编写代码很重要，那么客户端和服务器都将在相同的系统上运行。这是我的结构：

```
struct msg_to_server {
    int type_of_msg;
    int type;
    int flag;
    int pid;
    char name[MAX_WORD];
    char client_name[MAX_WORD];
    int child_timeout;
    int numberKilled;
}; 
```

我知道如果我要发送一个 int，我需要使用 htonl(int) 将 unsigned int 从主机字节顺序转换为网络字节顺序，但是如果是结构，我该怎么办？非常感激任何的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T20:30:24.613

如果您知道您正在从同一类型的系统发送和接收，则无需将整数转换为网络字节顺序。仅当您在具有不同字节顺序的系统之间发送时，这一点才重要。

您至少可以简单地通过套接字发送整个结构的字节，根本不需要转换步骤。

```
// client
struct msg_to_server msg;
send(sock, &msg, sizeof(msg), 0);

// server
struct msg_to_server msg;
ssize_t n = recv(sock, &msg, sizeof(msg), 0); 
```

但是，请注意，如果您使用的是 TCP，则该协议可能不会返回您请求的所有字节`recv()`。您可能需要多次调用`recv()`才能检索客户端发送的所有字节。如果您使用的是 UDP，则不必担心这一点，但您会有其他考虑因素，例如不可靠的传递。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T20:36:59.147

> 问：我知道如果我要发送一个 int，我需要使用 htonl(int) 将 unsigned int 从主机字节顺序转换为网络字节顺序，但是如果是结构，我该怎么办？

1) 正如 Greg Hewgill 正确指出的那样：

> 如果您知道您正在从同一类型的系统发送和接收，则无需转换为网络字节顺序。

2) 否则，如果您认为您可能希望将此二进制结构与非小端主机交换，那么您必须逐个字段地使用 htonl/ntohl 和 htons/ntohs；当你发送，当你收到。

3)然而，*最好*的可移植方式是*避免*通过网络发送二进制记录。

这正是 XML 或 JSON 等格式大放异彩的地方。

以及为什么互联网标准（如 HTTP 和 SMTP 等）往往是*基于文本的*。

如果可能的话，我肯定会在主机之间交换*文本记录（例如 XML）。*

恕我直言...

# configuration - Shiro：数据源配置中的代码重复

> ID：10066229
> 
> 赞同：2
> 
> 时间：2012-04-08T20:28:37.247
> 
> 标签：configuration, datasource, code-duplication, shiro

我使用 shiro 为我的 CXF Web 服务实现身份验证。我正在使用 jdbc-Realm 并在 ini 文件的帮助下配置它（附在下面）。身份验证数据与我需要的其他数据一样保存在同一个数据库中，但对于系统的其余部分，我使用属性文件（也可以在下面找到）来提供连接信息。

现在显然两种情况下数据源的数据是相同的，但我似乎没有找到解决此代码重复的方法。有没有比 Web 应用程序开发经验更丰富的人有解决方案？如果有帮助的话，我可以同时更改 shiro 和系统其余部分的配置。

在此先感谢，
扎库姆

shiro.ini：

```
[main]
jdbcRealm = org.apache.shiro.realm.jdbc.JdbcRealm
jdbcRealm.permissionsLookupEnabled = true
jdbcRealm.authenticationQuery = SELECT password FROM users WHERE username = ?;

ds = org.postgresql.ds.PGSimpleDataSource
ds.user = postgres
ds.password = password
ds.databaseName = servicedb
ds.serverName = localhost
ds.portNumber = 5432

jdbcRealm.dataSource = $ds
securityManager.realms = $jdbcRealm 
```

服务属性：

```
db. It looks like:
db.name = servicedb
db.user = postgres
db.password = password
db.url = //localhost:5432/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T15:34:12.530

使用像 Spring 这样的容器来配置 Shiro 和你的 JDBC 连接。然后，您可以将 dataSource 作为引用传递给 JDBCRealm。

```
<bean id="dataSourceBean" class="com.apache.commons.dbcp.BasicDataSource>
  <property name="driverClassName" value"class for driver"/>
  ... more setup for the data source ...
</bean>

<bean id="jdbcRealm" class="org.apache.shiro.realm.jdbc.JdbcRealm">
  <property name="dataSource" ref="dataSourceBean"/>
  <property name="permissionsLookupEnabled" value="true"/>
  <property name="authenticationQuery" value="SELECT password FROM users WHERE username = ?"/>
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-07T16:37:16.703

您可以在构建过程中使用 Ant 或 Maven（以及其他）自动替换令牌。
下面是一个使用 Ant 的示例：

```
<copy file="shiro.template.ini" tofile="shiro.ini" overwrite="true" />
<replace file="shiro.ini" token="@DB_NAME@" value="servicedb"/> 
```

在 *.template.* 文件中，您将使用令牌：

```
ds.databaseName = @DB_NAME@ 
```

这将在构建过程中被实际值替换：

```
ds.dataBaseName = servicedb 
```

（显然，在配置文件中指定标记/值并使用通配模式将替换应用于文件列表会更好）

**蚂蚁**：[https ://ant.apache.org/manual/Tasks/replace.html](https://ant.apache.org/manual/Tasks/replace.html)
**Maven**：[https ://code.google.com/p/maven-replacer-plugin/](https://code.google.com/p/maven-replacer-plugin/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-26T07:16:17.800

虽然这是一个老问题，但我有一个类似的查询，我通过以下方式解决了它。希望对其他人有所帮助。

Shiro ini 可用于配置任何类。对于数据源，我已经编写了我的应用程序特定类。

```
import javax.sql.DataSource;

public class MyConfig
{
    private static DataSource dataSource;

    public void setDataSource(Object ds)
    {
        dataSource = (DataSource)ds;
    }

    public static DataSource getDataSource() // your application will use this method to get data source.
    {
        return dataSource;
    }
} 
```

现在在 ini 文件中，我将相同的数据源引用传递给 jdbc 领域和我的类。

```
myConfig = my.package.MyConfig
myConfig.dataSource = $ds 
```

# windows-phone - 在 windows phone 中发布数据

> ID：10066230
> 
> 赞同：0
> 
> 时间：2012-04-08T20:28:39.147
> 
> 标签：windows-phone

我想将数据从我的 Windows Phone 发布到我自己创建的网页。该网页将处理数据并显示任何结果。

发布数据后，如何使用发布的数据导航到网页？（以 www.test.com/#name=joe 为例，如果它是 GET）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T21:02:10.470

一种可能的方法是动态创建执行 POST 请求的 HTML 页面并将其加载到 Web 浏览器控件中。然后，生成的网页将很好地显示在控件中。

HTML 页面可能如下所示：

```
<html>
  <head>
    <title>Faceless</title>
<script type="text/javascript">
    function submitForm() {
        document.forms[0].submit();
    }
</script>
  </head>
  <body onload="submitForm();">
    <form method="POST" action="http://www.server.com/service.php">
      <input type="hidden" name="name" value="Robert">
      <input type="hidden" name="score" value="200">
    </form>
  </body>
</html> 
```

[您可以使用NavigateToString](http://msdn.microsoft.com/en-us/library/system.windows.controls.webbrowser.navigatetostring%28v=vs.95%29.aspx)方法将其加载到 Web 浏览器控件中。

不要忘记启用 JavaScript：

```
<phone:WebBrowser Name="webBrowser1" IsScriptEnabled="True" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T20:42:37.380

您是否尝试过查找 .net`Web Requests`和 .net Web[客户端类](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.80%29.aspx)？

如果您的网站是使用 PHP 编码的，您可以向页面发送一个 http post 请求（出于安全原因尽量避免使用 GET 请求），然后对数据进行必要的处理。

也许这个类似的问题对你有用：

[使用 WebRequest 发布](https://stackoverflow.com/questions/3562206/post-with-webrequest)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T09:27:25.143

您可以做两件事 1\. 发送 POST 类型的 Http Web 请求。有了这个，您可以更好地控制其他方法。1.收到响应后，在webview中加载动态html页面（动态页面将在服务器端生成）。

# r - R：从向量中选择符合条件的项目

> ID：10066235
> 
> 赞同：7
> 
> 时间：2012-04-08T20:29:22.827
> 
> 标签：r

我在 R 中有一个数字向量，它由负数和正数组成。我想根据符号（暂时忽略零）将列表中的数字分成两个单独的列表：

*   仅包含负数的新向量
*   另一个仅包含正数的向量

该文档显示了如何在数据框中选择行/列/单元格 - 但这不适用于向量 AFAICT。

怎么做（没有 for 循环）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-08T20:32:18.697

它很容易完成（添加了对 NaN 的检查）：

```
d <- c(1, -1, 3, -2, 0, NaN)

positives <- d[d>0 & !is.nan(d)]
negatives <- d[d<0 & !is.nan(d)] 
```

如果要排除 NA 和 NaN，is.na() 对两者都返回 true：

```
d <- c(1, -1, 3, -2, 0, NaN, NA)

positives <- d[d>0 & !is.na(d)]
negatives <- d[d<0 & !is.na(d)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-05T07:19:06.367

它可以通过使用“方括号”来完成。创建一个新向量，其中包含那些大于零的值。由于使用了比较运算符，它将表示布尔值。因此，方括号用于获取确切的数值。

```
d_vector<-(1,2,3,-1,-2,-3)
new_vector<-d_vector>0 
pos_vector<-d_vector[new_vector]
new1_vector<-d_vector<0
neg_vector<-d_vector[new1_vector] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-28T19:16:28.300

`purrr`包包括一些过滤向量的有用功能：

```
library(purrr)
test_vector <- c(-5, 7, 0, 5, -8, 12, 1, 2, 3, -1, -2, -3, NA, Inf, -Inf, NaN)

positive_vector <- keep(test_vector, function(x) x > 0)
positive_vector
# [1]   7   5  12   1   2   3 Inf

negative_vector <- keep(test_vector, function(x) x < 0)
negative_vector
# [1]   -5   -8   -1   -2   -3 -Inf 
```

您还可以使用`discard`功能

# javascript - 我从哪里开始编写这些滑块？

> ID：10066238
> 
> 赞同：1
> 
> 时间：2012-04-08T20:29:48.823
> 
> 标签：javascript, jquery, slider

我使用什么语言？我对 Java Script 知之甚少，所以我怀疑我是否能够单独编写它们。

至少要从什么基础代码开始？

[这些是滑块](http://i43.tinypic.com/2mhxuf9.png)- 它们现在只是 Photoshop 图像......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T20:32:59.027

看看[JQuery 滑块 UI 库](http://docs.jquery.com/UI/Slider)。您应该能够进行一些调整以使其执行您想要的操作。

# jquery - 我可以在加载的 html / 脚本子页面中使用 jquery 文档吗

> ID：10066244
> 
> 赞同：0
> 
> 时间：2012-04-08T20:30:29.943
> 
> 标签：jquery, jquery-load

我正在使用多种形式的动态序列。每个表单（一个子页面）都使用 $( "#dyn-form" ).load( form-x.html ) 在主页中动态加载。每个 form-x.html 都嵌入了自己的脚本。此脚本必须在加载 form-x.html 后执行。我从准备好的文档开始每个脚本，以确保将动态加载的内容加载到 dom 中。这有意义吗？

更新

感谢你的帮助。我可以通过在加载回调中调用加载的 page.html 的嵌入函数来解决它：window[page].apply();

```
function nextForm(page) {
    $("#dyn-form").load(page + '.html', function(response, status, xhr) {
        if (status == "error") {
            var msg = "Sorry but there was an error: ";
            $("#error").html(msg + xhr.status + " " + xhr.statusText);
        }
        else {          // load OK and finished then call embedded script
            window[page].apply();
        }
    });
}
$(document).ready(function(){
    nextForm('form-1');     // load the first form  
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T20:33:19.573

如果你想在加载远程页面后执行一些脚本，你可以这样做

```
$("#dyn-form" ).load("form-x.html",function(){
  //Script here will execute only after the load completed
}); 
```

# php - 最小和最大强度长度

> ID：10066245
> 
> 赞同：1
> 
> 时间：2012-04-08T20:30:30.570
> 
> 标签：php, string, max, strlen, string-length

我正在处理一个需要 6 到 25 个字符之间的密码的表单。用户名和全名必须少于 25 个字符。用户名和全名部分工作正常，但是当我输入一个 10 个字符长的密码时，它会回显我的错误代码，就好像它小于 6。我做错了什么？

请查看代码并请帮助我：问题在注释为//检查密码长度的区域内。谢谢大家

php代码是：

```
 <?php
    echo "<h1>Register</h1>";

    $submit = filter_input(INPUT_POST, 'submit');
    //form data
    $fullname = strip_tags (filter_input(INPUT_POST, 'fullname'));
    $username = strip_tags (filter_input(INPUT_POST, 'username'));
    $password = strip_tags(filter_input(INPUT_POST, 'password'));
    $repeatpassword = strip_tags(filter_input(INPUT_POST, 'repeatpassword'));
    $date = date("Y-m-d");

    if ($submit)
    {
    //check for existence
       if($fullname&&$username&&$password&&$repeatpassword)
       {
       $password = md5($password);
       $repeatpassword = md5($repeatpassword);

    if ($password==$repeatpassword)
    {
    //check char length of username and fullname
        if (strlen($username)>25||strlen($fullname)>25)
        {
        echo "Length of username or full name is too long!";
        }
        else
        {
        //check password length 
            if (strlen ($password)>25 || strlen ($password)<6)
            {
            echo "Password must be between 6 and 25 characters";
            }
            else
            {
            //register user 
            }

        }

    }
    else echo "Your passwords do not match";

}
else echo "Please fill in <b>all</b> fields!";

    }

   ?>` 
```

html是：

```
 <html>

    <form action='register.php' method='POST'>
<table>
    <tr>
        <td>
        Your full name:
        </td>
        <td>
        <input type='text' name='fullname'>
        </td>

    </tr>

    <tr>
        <td>
        choose a username:
        </td>
        <td>
        <input type='text' name='username'>
        </td>

    </tr>

    <tr>
        <td>
        Choose a password:
        </td> 
        <td>
        <input type='password' name='password'>
        </td>

    </tr>

    <tr>
        <td>
        Repeat your password:
        </td> 
        <td>
        <input type='password' name='repeatpassword'>
        </td>

    </tr>

<table>
<p>
<input type='submit' name='submit' value='Register'> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T20:32:51.750

您对密码运行 MD5 并在比较之前重复密码。在对它们运行 MD5 之前进行比较和长度检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T20:32:57.077

你在这里用它的 MD5 和覆盖密码：

```
$password = md5($password); 
```

我建议对这些不同的值使用不同的变量名：

```
$password_md5 = md5($password); 
```

适当地命名变量将消除混淆并降低出错的风险。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-28T06:17:31.123

你为什么不退出**MD5**而不是使用**Whirlpool**呢？

```
$password_wp  = hash('whirlpool', $password); 
```

还是有你的疑惑？如果是，您在 Stackoverflow 上的答案已经得到解答：

[哪个更安全 md5 或漩涡（散列），为什么？](https://stackoverflow.com/questions/18604481/which-one-is-more-secured-md5-or-whirlpool-hashes-and-why)

{*更多信息*}

[http://md5-sha-whirlpool.reviews.r-tt.com](http://md5-sha-whirlpool.reviews.r-tt.com)

# c++ - “基类未定义。”

> ID：10066249
> 
> 赞同：2
> 
> 时间：2012-04-08T20:30:51.913
> 
> 标签：c++, inheritance

我有一个错误：

> 错误 C2504：“员工”：未定义基类。

我正在使用 Visual Studio 2010。

这是我第一次在 C++ 中使用继承，我不知道我做错了什么。当我尝试创建一个派生另一个类时，它说父类未定义，即使我包含了父类的头文件。可能是什么问题呢？

主要.cpp：

```
#include <string>
#include <iostream>
using namespace std;

#include "manager.h"

int main()
{
manager ian;
ian.getdata();
ian.putdata();

return 0;
} 
```

经理.h：

```
#pragma once
#include "employee2.h"
#include "student.h"

class manager : private employee2, private student //Error happens here
{
    //Stuff
}; 
```

学生.h：

```
#pragma once
class student
{
    //Stuff
}; 
```

员工2.h：

```
#pragma once
#include "employee.h"
class employee2 : employee
{
    //Stuff
}; 
```

它说学生类和employee2类都是未定义的。此外，employee2 类继承了一个名为employee 的类，它也得到了同样的错误。我究竟做错了什么？

编辑：这是我的 student.cpp 文件。我遇到错误的所有其他 .cpp 文件看起来都与这个类似。

```
#include "student.h"

void student::getedu(){
cout << "Enter name of school or university: ";
cin >> school;
cout << "Enter highest degree earned \n";
cout << "(Highschool, Bachelor's Master's, PhD)";
cin >> degree;
}

void student::putedu() const{
cout << "\n School or university: " << school;
cout << "\n Highest degree earned: " << degree;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:27:46.033

确保每个文件的末尾都有空格。在编译过程之前，文件被连接，并且您的 pragma 可能会因为以下原因而被停用：

```
}#pragma once 
```

'}' 来自先前包含的文件。

这可能是一个原因。此外，代码看起来应该是可编译的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T20:41:02.560

我不相信您会根据您显示的代码得到“x 未定义”。实际上，您似乎使用`#include`错误。

```
#include employee.h 
```

应该

```
#include "employee.h" 
```

除此之外，除了`employee`您提到的缺少的类，并且在您的示例中`manager`没有`getdata`and "之外`putdata`，您的代码将编译得很好。

# php - opencart - 如何在管理员中更改产品上市日期的日期格式？

> ID：10066253
> 
> 赞同：1
> 
> 时间：2012-04-08T20:31:19.380
> 
> 标签：php, opencart

而不是年月日，我希望它显示日月年。

在：

```
admin\view\template\catalog\product.tpl 
```

`yy-mm-dd`我将所有的to实例替换`dd-mm-yy`为 javascript 代码。

在：

```
admin\controller\catalog\product.php 
```

我改为`Y-m-d`在线`d-m-Y`838和840

当我插入新产品时，日期显示正确（今天的日期）。但是当我点击保存时，它保存错误，最终显示所有产品的 01-01-1970。

我究竟做错了什么？我正在使用 Opencart 版本 1.5.2.1。

谢谢，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T21:06:28.553

MySQL 日期都以 Ymd 格式保存，这就是您输入日期时所期望的。因为您输入的内容与此不同，所以无法理解，并假定 0 作为值，这给出了纪元时间 (00:00:00 01-01-1970)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-09T01:07:02.533

您实际上不需要更改日期*存储*格式，如上面的示例所示。至少在 OpenCart ~1.5 中，您可以更改显示日期格式。

管理面板有一个地方可以更改，面向公众的商店有一个地方可以更改。对于英语 opencart 安装，它们是：

```
admin/language/english/english.php 
```

公开日期格式为：

```
catalog/language/english/english.php 
```

在一个或两个文件中将短日期格式字符串更改为所需的格式。例如改变：

```
$_['date_format_short'] = 'm/d/Y'; 
```

到`'d/m/Y'`（反之亦然）。

# r - 将 3 个 qplots (ggplot2) 叠加到一个图形中以打印/保存

> ID：10066254
> 
> 赞同：0
> 
> 时间：2012-04-08T20:31:22.507
> 
> 标签：r, ggplot2

我开始使用 ggplot 来生成一些图表。我正在使用他们网站中非常基本的示例来制作“步骤图”： `http://had.co.nz/ggplot2/geom_step.html`

我需要类似该页面中最后一个示例的内容。我发现的问题是示例在一个 DF 中，每个 Y 在 X 中都有不同的值。我有 3 组要绘制，所有 X 和 Y 值都相同。我不知道如何生成R 中的图形。在 excel 中，我创建了第一行并将另外 2 行添加为新数据系列，但我迷失在 ggplot 中。任何建议都非常感谢。

我的绘图命令现在是这样的（每个命令都有不同的 df）：

```
qplot(seq_along(x), x, data = df, geom="step", colour = trt) 
```

有没有办法让一个 df 包含所有值？任何例子都会很棒。在此先感谢您的时间

编辑>>>>

这里有一些数据可以看：

```
head(df_nourbanas)
     x        trt
1    3 no urbanas
2   85 no urbanas
3  450 no urbanas
4  942 no urbanas
5 1362 no urbanas
6 1699 no urbanas

head(df_urbanas)
     x     trt
1   65 urbanas
2 1019 urbanas
3 2192 urbanas
4 3164 urbanas
5 3847 urbanas
6 4338 urbanas

head(df_todas)
     x   trt
1    3 todas
2  152 todas
3 1481 todas
4 3158 todas
5 4564 todas
6 5593 todas 
```

这就是我需要的（这是在excel中）使用步骤模式直接形成R ![r_steps](../Images/644c1f780f86b38d3aad7b1cf1235c9f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T19:02:53.170

您遇到问题是因为您在数据集中使用了隐式信息：点的顺序，即 x 轴位置。明确这一点，事情就会变得更容易。

```
df_nourbanas$idx <- seq(length=nrow(df_nourbanas))
df_urbanas$idx <- seq(length=nrow(df_urbanas))
df_todas$idx <- seq(length=nrow(df_todas)) 
```

现在可以组合这 3 个数据集。

```
df_all <- rbind(df_nourbanas, df_urbanas, df_todas) 
```

并绘制它们只是

```
ggplot(df_all, aes(x=idx, y=x, colour=trt)) +
  geom_step() 
```

![在此处输入图像描述](../Images/c5ea31f9ee0b14c2b709996d3d83a602.png)

# algorithm - 查找字典序上最大的唯一字符串

> ID：10066258
> 
> 赞同：1
> 
> 时间：2012-04-08T20:32:07.010
> 
> 标签：algorithm, puzzle

我需要一种算法来通过删除字符（不重新排列）从字符串中找到最大的唯一（无重复字符）子字符串。

如果满足这两个条件，则字符串 A 大于字符串 B。

```
1\. Has more characters than String B
   Or
2\. Is lexicographically greater than String B if equal length 
```

例如，如果输入字符串是*dedede*，则可能的唯一组合是*de*、*ed*、*d*和*e*。
在这些组合中，最大的一个因此是*ed*，因为它比*d*和*e*具有更多的字符，并且在字典上大于*de*。

该算法必须比生成所有可能的唯一字符串并对其进行排序以找到最大的字符串更有效。

注意：这不是家庭作业。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-07T18:29:39.497

这个怎么样

```
string getLargest(string s) 
{
        int largerest_char_pos=0;
        string result="";
        if(s.length() == 1) return s;
        for(int i=0;i<s.length();)
        {
            p=i;
            for(int j=i+1;j<s.length();j++)
            {
                if(s[largerest_char_pos]< s[j]) largerest_char_pos =j;
            }
            res+=s[largerest_char_pos];
            i=largerest_char_pos+1;
        }
        return result;      
    } 
```

这是代码片段，只是为您提供了字典上更大的字符串。如果您不想重复，您可以只跟踪已添加的字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T22:55:38.803

让我以我认为更清楚的方式陈述订购规则。

如果字符串 A 大于字符串 B

```
- A is longer than B
  OR
- A and B are the same length and A is lexicographically greater than B 
```

如果我对规则的重述是正确的，那么我相信我有一个在 O(n^2) 时间和 O(n) 空间中运行的解决方案。我的解决方案是一种贪心算法，它基于以下观察：最长有效子序列中的字符数与输入字符串中的唯一字符数一样多。我是用 Go 写的，希望这些评论足以描述算法。

```
func findIt(str string) string {
  // exc keeps track of characters that we cannot use because they have
  // already been used in an earlier part of the subsequence
  exc := make(map[byte]bool)

  // ret is where we will store the characters of the final solution as we
  // find them
  var ret []byte

  for len(str) > 0 {
    // inc keeps track of unique characters as we scan from right to left so
    // that we don't take a character until we know that we can still make the
    // longest possible subsequence.
    inc := make(map[byte]bool, len(str))

    fmt.Printf("-%s\n", str)
    // best is the largest character we have found that can also get us the
    // longest possible subsequence.
    var best byte

    // best_pos is the lowest index that we were able to find best at, we
    // always want the lowest index so that we keep as many options open to us
    // later if we take this character.
    best_pos := -1

    // Scan through the input string from right to left
    for i := len(str) - 1; i >= 0; i-- {
      // Ignore characters we've already used
      if _, ok := exc[str[i]]; ok { continue }

      if _, ok := inc[str[i]]; !ok {
        // If we haven't seen this character already then it means that we can
        // make a longer subsequence by including it, so it must be our best
        // option so far
        inc[str[i]] = true
        best = str[i]
        best_pos = i
      } else {
        // If we've already seen this character it might still be our best
        // option if it is a lexicographically larger or equal to our current
        // best.  If it is equal we want it because it is at a lower index,
        // which keeps more options open in the future.
        if str[i] >= best {
          best = str[i]
          best_pos = i
        }
      }
    }

    if best_pos == -1 {
      // If we didn't find any valid characters on this pass then we are done
      break
    } else {
      // include our best character in our solution, and exclude it for
      // consideration in any future passes.
      ret = append(ret, best)
      exc[best] = true

      // run the same algorithm again on the substring that is to the right of
      // best_pos
      str = str[best_pos+1:]
    }
  }
  return string(ret)
} 
```

我相当肯定你可以在 O(n) 时间内做到这一点，但我不确定我的解决方案，所以我发布了这个。

# java - Gin 1.5 和 GWT 2.4 的 NoClassDefFoundError

> ID：10066262
> 
> 赞同：0
> 
> 时间：2012-04-08T20:32:35.673
> 
> 标签：java, gwt, guice, gwt-gin

我正在尝试按照[此 GWT MVP 教程](http://blog.hivedevelopment.co.uk/2009/08/google-web-toolkit-gwt-mvp-example.html)组装一个 GWT webapp ，但使用已用库的较新版本，因为并非所有这些库都不再可用或与 GWT 2.4 不兼容。

问题是当我运行项目时，我会在控制台中得到以下信息：

```
Starting Jetty on port 8888
[WARN] failed com.google.gwt.dev.shell.jetty.JettyLauncher$WebAppContextWithReload@6ee76fcc{/,/home/raido/Kood/workspaceJava/gwtmvp/war}
java.lang.NoClassDefFoundError: com/google/inject/internal/util/$Preconditions
at com.google.inject.servlet.ServletModule.configure(ServletModule.java:44)
at com.google.inject.AbstractModule.configure(AbstractModule.java:59)
at com.google.inject.spi.Elements$RecordingBinder.install(Elements.java:223)
at com.google.inject.spi.Elements.getElements(Elements.java:101)
at com.google.inject.internal.InjectorShell$Builder.build(InjectorShell.java:135)
at com.google.inject.internal.InternalInjectorCreator.build(InternalInjectorCreator.java:113)
at com.google.inject.InjectorBuilder.build(InjectorBuilder.java:101)
at com.google.inject.Guice.createInjector(Guice.java:105)
at com.google.inject.Guice.createInjector(Guice.java:76)
at com.google.inject.Guice.createInjector(Guice.java:63)
at gwtmvp.server.guice.GuiceServletConfig.getInjector(GuiceServletConfig.java:11)
at com.google.inject.servlet.GuiceServletContextListener.contextInitialized(GuiceServletContextListener.java:45)
at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:543)
at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1220)
at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:513)
at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:448)
at com.google.gwt.dev.shell.jetty.JettyLauncher$WebAppContextWithReload.doStart(JettyLauncher.java:468)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
at org.mortbay.jetty.handler.RequestLogHandler.doStart(RequestLogHandler.java:115)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
at org.mortbay.jetty.Server.doStart(Server.java:222)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
at com.google.gwt.dev.shell.jetty.JettyLauncher.start(JettyLauncher.java:672)
at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)
at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1068)
at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:811)
at com.google.gwt.dev.DevMode.main(DevMode.java:311)
Caused by: java.lang.ClassNotFoundException: com.google.inject.internal.util.$Preconditions
at java.lang.ClassLoader.findClass(ClassLoader.java:373)
at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
at org.mortbay.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:352)
at org.mortbay.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:337)
at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:334)
... 30 more
[WARN] failed RequestLogHandler@4113a03d
java.lang.NoClassDefFoundError: com/google/inject/internal/util/$Preconditions
at com.google.inject.servlet.ServletModule.configure(ServletModule.java:44)
at com.google.inject.AbstractModule.configure(AbstractModule.java:59)
at com.google.inject.spi.Elements$RecordingBinder.install(Elements.java:223)
at com.google.inject.spi.Elements.getElements(Elements.java:101)
at com.google.inject.internal.InjectorShell$Builder.build(InjectorShell.java:135)
at com.google.inject.internal.InternalInjectorCreator.build(InternalInjectorCreator.java:113)
at com.google.inject.InjectorBuilder.build(InjectorBuilder.java:101)
at com.google.inject.Guice.createInjector(Guice.java:105)
at com.google.inject.Guice.createInjector(Guice.java:76)
at com.google.inject.Guice.createInjector(Guice.java:63)
at gwtmvp.server.guice.GuiceServletConfig.getInjector(GuiceServletConfig.java:11)
at com.google.inject.servlet.GuiceServletContextListener.contextInitialized(GuiceServletContextListener.java:45)
at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:543)
at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1220)
at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:513)
at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:448)
at com.google.gwt.dev.shell.jetty.JettyLauncher$WebAppContextWithReload.doStart(JettyLauncher.java:468)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
at org.mortbay.jetty.handler.RequestLogHandler.doStart(RequestLogHandler.java:115)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
at org.mortbay.jetty.Server.doStart(Server.java:222)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
at com.google.gwt.dev.shell.jetty.JettyLauncher.start(JettyLauncher.java:672)
at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)
at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1068)
at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:811)
at com.google.gwt.dev.DevMode.main(DevMode.java:311)
Caused by: java.lang.ClassNotFoundException: com.google.inject.internal.util.$Preconditions
at java.lang.ClassLoader.findClass(ClassLoader.java:373)
at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
at org.mortbay.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:352)
at org.mortbay.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:337)
at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:334)
... 30 more
[WARN] Error starting handlers
java.lang.NoClassDefFoundError: com/google/inject/internal/util/$Preconditions
at com.google.inject.servlet.ServletModule.configure(ServletModule.java:44)
at com.google.inject.AbstractModule.configure(AbstractModule.java:59)
at com.google.inject.spi.Elements$RecordingBinder.install(Elements.java:223)
at com.google.inject.spi.Elements.getElements(Elements.java:101)
at com.google.inject.internal.InjectorShell$Builder.build(InjectorShell.java:135)
at com.google.inject.internal.InternalInjectorCreator.build(InternalInjectorCreator.java:113)
at com.google.inject.InjectorBuilder.build(InjectorBuilder.java:101)
at com.google.inject.Guice.createInjector(Guice.java:105)
at com.google.inject.Guice.createInjector(Guice.java:76)
at com.google.inject.Guice.createInjector(Guice.java:63)
at gwtmvp.server.guice.GuiceServletConfig.getInjector(GuiceServletConfig.java:11)
at com.google.inject.servlet.GuiceServletContextListener.contextInitialized(GuiceServletContextListener.java:45)
at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:543)
at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1220)
at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:513)
at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:448)
at com.google.gwt.dev.shell.jetty.JettyLauncher$WebAppContextWithReload.doStart(JettyLauncher.java:468)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
at org.mortbay.jetty.handler.RequestLogHandler.doStart(RequestLogHandler.java:115)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
at org.mortbay.jetty.Server.doStart(Server.java:222)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
at com.google.gwt.dev.shell.jetty.JettyLauncher.start(JettyLauncher.java:672)
at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)
at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1068)
at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:811)
at com.google.gwt.dev.DevMode.main(DevMode.java:311)
Caused by: java.lang.ClassNotFoundException: com.google.inject.internal.util.$Preconditions
at java.lang.ClassLoader.findClass(ClassLoader.java:373)
at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
at org.mortbay.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:352)
at org.mortbay.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:337)
at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:334)
... 30 more 
```

项目所需的库与我拥有的库：

*   gin.jar --- **gin-1.5-post-gwt-2.2.jar** (gin-1.5)
*   aopalliance.jar (来自谷歌杜松子酒) --- **aopalliance.jar** (gin-1.5)
*   guice-2.0.jar（来自 Google Gin。重要 - 使用随 Gin 而不是 Guice 提供的版本）--- **guice-snapshot.jar** (gin-1.5)
*   guice-servlet-2.0.jar (来自 Google Guice) --- **guice-servlet-3.0.jar** (guice-3.0)
*   gwt-dispatch-1.0.0-SNAPSHOT.jar（来自 gwt-dispatch）--- **gwt-dispatch-1.2.0.jar**
*   gwt-log-2.6.2.jar（来自 gwt-log）--- **gwt-log-3.1.8.jar**
*   gwt-presenter-1.0.0-SNAPSHOT.jar (来自 gwt-presenter) --- **gwt-presenter-1.0.0.jar**
*   log4j.jar（来自 log4j）--- **log4j-1.2.16.jar**

Gwt-presenter 还有一个更新的版本，1.1.1，它引起了额外的问题，所以我回到了 1.0.0，但那是另一回事了。

我已将代码上传到[GitHub](https://github.com/Raidok/gwtmvp)。其中大部分只是上述教程中的复制粘贴，略有不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T03:49:15.930

您发布的库

```
guice-2.0.jar (from Google Gin. IMPORTANT - use the version supplied with Gin and not Guice) --- guice-snapshot.jar (gin-1.5)
guice-servlet-2.0.jar (from Google Guice) --- guice-servlet-3.0.jar (guice-3.0) 
```

似乎在碰撞。看来你在你的类路径`Guice 2.0.jar`中`Guice 3.0.jar`都有。只保留`Guice 3.0.jar`. 这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T04:59:00.880

我遵循了相同的教程，我尝试像您一样使用更新的 JARS，并且发现了与您在此处看到的相同的错误：[GWT、Guice 和 GIN 编译](https://stackoverflow.com/questions/9403815/gwt-guice-and-gin-compilation)。该问题是由于缺少一些 JARS，特别是**Guice-3.0.jar 引起的**。

非常需要的 JAR 在您的类路径中：这应该可以解决问题。

# vim - 如何使用 clang_complete 插件在 Vim 的自动完成窗口中获取重载函数？

> ID：10066263
> 
> 赞同：2
> 
> 时间：2012-04-08T20:32:40.447
> 
> 标签：vim, overloading, clang-complete

我是 vim 的新手，我已经使用默认设置安装了 clang_complete 并将其用于 C++。

我可以使用自动完成功能，但只要有重载功能，我只能在自动完成窗口中看到其中一个（当您键入 . 或 -> 时会打开）。我认为 clang 只显示了它遇到的第一个重载函数。

例如，当是类型时，`aList.er`我只能`iterator erase(iterator)`在自动完成窗口中看到具有两个迭代器参数的声明，而不是其他类型的声明。

有什么办法可以让我在自动完成窗口中获得所有重载的功能？

PS：我正在使用 ubuntu 和 Vim v7.3

# jquery - Jquery 不使用 Recaptcha

> ID：10066268
> 
> 赞同：1
> 
> 时间：2012-04-08T20:33:15.907
> 
> 标签：jquery, ruby-on-rails, recaptcha

我正在使用 Rails 3.1，并尝试设置 Recaptcha，以便它仅在我单击表单上的“提交”按钮后显示。

我正在使用下面的 Jquery 代码隐藏 Recaptcha，直到单击提交，但它不起作用。你能看一下，让我知道我在哪里犯了错误吗？

**AMENDED_FORM.HTML.ERB 文件**

```
<%= form_for(@post) do |f| %>
<% if @post.errors.any? %>
<div id="error_explanation">
<h2><%= pluralize(@post.errors.count, "error") %> prohibited this post from being saved: </h2>

<ul>
<% @post.errors.full_messages.each do |msg| %>
<li><%= msg %></li>
<% end %>
</ul>
</div>
<% end %>
<div class="field">
I am a <%= f.text_field :title %> getting married in <%= f.text_field :job %> in <%= f.text_field :location %>, and looking for a wedding photographer. My budget is <%= f.text_field :salary %>.

</div>

<form>
<div id="first_button">
<button type="button" id="your_button" class="btn span6 large">Submit</button>
</div>

<div id="real_form">
<%=  recaptcha_tags %>
<button type='submit'>Submit</button>
</div>​

</form>   

<script>
  $(document).ready(function() {
    $('#real_form').hide(); //this will hide the `real_form` div on page load
    $('#your_button').click(function() {
        $('#real_form').show(); // this will show the `real_form` on clicking of `any_button` button
});
});
</script>

<% end %> 
```

**生成的 HTML**

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Weddoo!</title>
<meta content="authenticity_token" name="csrf-param" />
<meta content="70/JjhjToEdAoKm67QZAUTZHj2pA2F/mUKJGRIECfN0=" name="csrf-token" />

<link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/bootstrap_and_overrides.css?body=1" media="all" rel="stylesheet" type="text/css" />

<link href="images/favicon.ico" rel="shortcut icon">
<link href="images/apple-touch-icon.png" rel="apple-touch-icon">
<link href="images/apple-touch-icon-72x72.png" rel="apple-touch-icon" sizes="72x72">
<link href="images/apple-touch-icon-114x114.png" rel="apple-touch-icon" sizes="114x114">
</head>
<body>

<div class="navbar navbar-fixed-top">
<div class="navbar-inner">
<div class="container">
<a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</a>
<a class="brand" href="/posts/new">Weddoo!</a>
<div class="container nav-collapse">
        <ul class="nav">
            <li><a href="/posts/new">Home</a></li>
            <li><a href="/posts">Jobs</a></li>
            <li><a href="/pages/about">About</a></li>
        </ul>
      </div><!--/.nav-collapse -->
    </div>
  </div>
</div>

<div class="container">
  <div class="content">
    <div class="row">
          <div class="hero-unit">
<h1>Find wedding photographers with ease.</h1>
<br>
<p>Post your needs and sit back and wait to get responses.</p>
<br>
<form accept-charset="UTF-8" action="/posts" class="new_post" id="new_post" method="post">      

<div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="70/JjhjToEdAoKm67QZAUTZHj2pA2F/mUKJGRIECfN0=" /></div>

<div class="field">
I am a <input id="post_title" name="post[title]" size="30" type="text" /> getting married in <input id="post_job" name="post[job]" size="30" type="text" /> in <input id="post_location" name="post[location]" size="30" type="text" />, and looking for a wedding photographer. My budget is <input id="post_salary" name="post[salary]" size="30" type="text" />.
</div>

<form>
<div id="first_button">
<button type="button" id="your_button" class="btn span6 large">Submit</button>
</div>

<div id="real_form">
<script type="text/javascript" src="http://www.google.com/recaptcha/api/challenge? k=6LdR788SAAAAAGvr99xGjlbkFVq3-hlCjjlrFX-s&amp;error=expression"></script>
<noscript>
<iframe src="http://www.google.com/recaptcha/api/noscript?k=6LdR788SAAAAAGvr99xGjlbkFVq3-hlCjjlrFX-s" height="300" width="500" style="border:none;"></iframe><br/>

<textarea name="recaptcha_challenge_field" rows="3" cols="40"></textarea>

<input type="hidden" name="recaptcha_response_field" value="manual_challenge"/></noscript>

<button type='submit'>Submit</button>
</div>​
</form>
<script>
  $(document).ready(function() {
    $('#real_form').hide(); //this will hide the `real_form` div on page load
    $('#your_button').click(function() {
        $('#real_form').show(); // this will show the `real_form` on clicking of `any_button` button
    });
});
</script>
</form>
</div>

</div><!--/row-->
</div><!--/content-->

</div> <!-- /container -->

<!-- Le javascript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-transition.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-alert.js?body=1" type="text/javascript">     </script>
<script src="/assets/twitter/bootstrap/bootstrap-modal.js?body=1" type="text/javascript">   </script>
<script src="/assets/twitter/bootstrap/bootstrap-dropdown.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-scrollspy.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-tab.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-tooltip.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-popover.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-button.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-collapse.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-carousel.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-typeahead.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T06:39:00.193

基于 tusar 的回答。

`type='button'`即使 JS 不可用，使用也应该修复不希望提交的表单。

最终的提交输入应该在表单内。

```
<form>
  <div id="first_button">
    <button type='button' id="your_button" class="btn span6 large">
      Submit
    </button>
  </div>

  <div id="real_form">
    CONTENT OF RE-CAPTCHA
    <button type='submit'>Real Submit</button>
  </div>
</form>​
<script>
  $(document).ready(function() {
    $('#real_form').hide();
    $('#your_button').click(function() {
        $('#real_form').show(); 
    });
  });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T20:50:36.070

我猜的原因是——

`first_button`是一个`div`容器。不是一个按钮。如果您想为任何特定按钮设置点击处理程序，请为该按钮提供一个 id，`any_button`例如

```
<script type="text/javascript">
    $(document).ready(function() {
        $('#real_form').hide(); //this will hide the `real_form` div on page load
        $('#any_button').click(function() {
            $('#real_form').show(); // this will show the `real_form` on clicking of `any_button` button
        });
    });
</script> 
```

此外，javascript/jQuery 代码始终应位于`<script type="text/javascript">...</script>`标签之间。除此之外，您的代码是正确的（单击该`first_button`div，您的重新验证码应该可见）。

# google-maps-api-3 - 尝试获取位置时“权限被拒绝”

> ID：10066274
> 
> 赞同：0
> 
> 时间：2012-04-08T20:33:57.233
> 
> 标签：google-maps-api-3, permission-denied

当我尝试使用以下代码获取我的位置时，我一直收到“权限被拒绝”：

```
function initialize() {
    $('.map-fullsize').hide();
    $('#weather-map').hide();
    $('#weather-data').hide();

    if(geo_position_js.init()) {
        var waiting_time = $('#getting-position').html('Försöker att hitta din aktuella position. Var god vänta...');

        t = setTimeout(function() {
            waiting_time.html('Det tar längre tid att hitta din position, än vad det egentligen borde göra.<br><br><b>Tips</b><br>GPS-mottagaren har lättare att hitta dig om du är utomhus. Täta moln som till exempel vid ett åskoväder, kan göra det svårare för satelliterna att hämta din position.');
        }, 60000);

        geo_position_js.getCurrentPosition(show_position, function() {
            clearTimeout(t);
            $('#getting-position').html('<b>Ett fel uppstod</b><br>Din position kunde inte hittas. Se till att vara utomhus för bästa möjliga resultat och försök igen.');
        }, {
            enableHighAccuracy: true
        });
    } else {
        $('#getting-position').html('<b>Ett fel uppstod</b><br>Det verkar som att din webbläsare inte tillåter GPS-positionering.');
    }
}

function show_position(p) {
    $('.map-fullsize').show();
    $('#weather-map').show();
    $('#weather-data').show();
    $('#getting-position').hide();

    if(navigator.geolocation) {

        navigator.geolocation.getCurrentPosition(showError, function(position) {
            var latitude = position.coords.latitude;
            var longitude = position.coords.longitude;
            var accuracy = position.coords.accuracy;
            var speed = position.coords.speed;
            var altitude = position.coords.altitude;
            var heading = position.coords.heading;

            var coords = new google.maps.LatLng(latitude, longitude);
            var mapOptions = {
                              center: coords,
                              streetViewControl: false,

                              mapTypeControl: true,
                              navigationControlOptions: {
                                  style: google.maps.NavigationControlStyle.SMALL
                              },

                              zoomControl: true,
                              zoomControlOptions: {
                                  style: google.maps.ZoomControlStyle.SMALL,
                                  position: google.maps.ControlPosition.TOP_LEFT
                              },

                              mapTypeId: google.maps.MapTypeId.ROADMAP
                             };

            map = new google.maps.Map(
                document.getElementById('weather-map'), mapOptions
            );

            var marker = new google.maps.Marker({
                position: coords,
                map: map
            });

            var circle = new google.maps.Circle({
                center: coords,
                radius: accuracy,
                map: map,
                fillColor: '#3333ff',
                fillOpacity: 0.4,
                strokeColor: '#3333ff',
                strokeOpacity: 0.8,
                strokeWeight: 1
            });

            map.setCenter(coords);

            if(accuracy > 30) {
                map.fitBounds(circle.getBounds());
            } else {
                map.setZoom(14);
            }

            $('#weather-data').load('jquery-fetch/fetch-weatherdata.php?coor=' + latitude.toFixed(6).replace(/\./, '') + ',' + longitude.toFixed(6).replace(/\./, '') + '&coordinates=' + latitude.toFixed(6) + ',' + longitude.toFixed(6) + '&accuracy=' + accuracy + '&speed=' + speed + '&altitude=' + altitude + '&heading=' + heading);
        });

    } else {
        alert('Geolocation API stöds inte i din webbläsare');
    }

    function showError(error) {
        switch(error.code) {
            case error.PERMISSION_DENIED:
                $('.map-fullsize').hide();
                $('#weather-map').hide();
                $('#weather-data').hide();
                $('#permission-denied').show();
                break;

            case error.POSITION_UNAVAILABLE:
                $('.map-fullsize').hide();
                $('#weather-map').hide();
                $('#weather-data').hide();
                $('#position-unavailable').show();
                break;

            case error.TIMEOUT:
                $('.map-fullsize').hide();
                $('#weather-map').hide();
                $('#weather-data').hide();
                $('#timeout').show();
                break;

            case error.UNKNOWN_ERROR:
                $('.map-fullsize').hide();
                $('#weather-map').hide();
                $('#weather-data').hide();
                $('#unknown-error').show();
                break;
        }
    }
}

$(document).ready(function() {
    initialize();
}); 
```

我找不到这段代码有什么问题，有趣的是代码在我得到“权限被拒绝”之前获取了我的 GPS 位置。[这个问题是我之前问题](https://stackoverflow.com/questions/10066045/api-key-invalid-or-not-approved-by-google)的“后续” 。我该如何解决我的问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T21:04:52.687

您正在使用

`navigator.geolocation.getCurrentPosition(showError, function(position) {...})`

getCurrentPosition的[规范](http://dev.w3.org/geo/api/spec-source.html#introduction)以其他顺序显示函数。这样做的原因是只有成功回调是强制性的；它必须是第一位的。如果提供了第二个参数，则它是错误回调。第三个参数是一个选项对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T21:40:39.327

只有两件事；

i) 为了测试这一点，我稍微简化了您的代码，修复了一些小问题并消除了对 geo.js 的依赖。

ii) 仅当站点托管在外部 http:// 服务器上时，地理位置才有效

```
<html>
<body>

<div id='map' class='map-fullsize'></div>
<div id='weather-map'></div>
<div id='weather-data'></div>
<div id='getting-position'></div>

<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type='text/javascript'>

function initialize() {
    $('.map-fullsize').hide();
    $('#weather-map').hide();
    $('#weather-data').hide();

    var waiting_time = $('#getting-position').html('Försöker att hitta din aktuella position. Var god vänta...');
    get_position();
    t = setTimeout(function () {
        $('#getting-position').html('Det tar längre tid att hitta din position, än vad det egentligen borde göra.<br><br><b>Tips</b><br>GPS-mottagaren har lättare att hitta dig om du är utomhus. Täta moln som till exempel vid ett åskoväder, kan göra det svårare för satelliterna att hämta din position.');
    }, 60000);
}

function get_position() {
    $('#getting-position').html("get_position()");

    $('.map-fullsize').show();
    $('#weather-map').show();
    $('#weather-data').show();
    // $('#getting-position').hide();

    if(navigator.geolocation) {
    $('#getting-position').html("navigator.geolocation");
    navigator.geolocation.getCurrentPosition(showPosition, showError, { enableHighAccuracy: true });
    } else {
    alert('Geolocation API stöds inte i din webbläsare');
    }
}

function showPosition(position) {

    var latitude = position.coords.latitude;
    var longitude = position.coords.longitude;
    var accuracy = position.coords.accuracy;
    var speed = position.coords.speed;
    var altitude = position.coords.altitude;
    var heading = position.coords.heading;

    $('#getting-position').html(
    "have position" +
    " latitude = " + latitude.toString() +
    " longitude = " + longitude.toString()
    );

    /* Add marker to Google maps etc... */
}    

function showError(error) {
    switch(error.code) {
    case error.PERMISSION_DENIED:
        $('.map-fullsize').hide();
        $('#weather-map').hide();
        $('#weather-data').hide();
        $('#permission-denied').show();
        break;

    case error.POSITION_UNAVAILABLE:
        $('.map-fullsize').hide();
        $('#weather-map').hide();
        $('#weather-data').hide();
        $('#position-unavailable').show();
        break;

    case error.TIMEOUT:
        $('.map-fullsize').hide();
        $('#weather-map').hide();
        $('#weather-data').hide();
        $('#timeout').show();
        break;

    case error.UNKNOWN_ERROR:
        $('.map-fullsize').hide();
        $('#weather-map').hide();
        $('#weather-data').hide();
        $('#unknown-error').show();
        break;
    }
}
$(document).ready(function() {
    initialize();
});

</script>
</body>
</html> 
```

# prolog - SWI-Prolog 中的递增元素

> ID：10066275
> 
> 赞同：2
> 
> 时间：2012-04-08T20:34:03.800
> 
> 标签：prolog, increment

好吧，由于我今天正在练习“Prolog 逻辑”，并且在这里的另一个线程中发现了这个未解决的问题，我想知道它是如何工作的。

> 将列表的每个元素按其深度递增，例如 increment([0,0,[0]],[1,1,[2]]) -> true

而且我几乎认为我喜欢这种语言...... :)) 这样的事情可能吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T10:07:09.503

以下代码完成了这项工作：

```
increment(X,Y):- increment(X,0,Y). 
increment([],_,[]) :- !.
increment([X|Xs],N,[Y|Ys]) :- !, N1 is N+1,
                              increment(X,N1,Y), increment(Xs,N,Ys). 
increment(X,N,Y):- Y is X+N. 
```

只是为了测试它

```
?- increment([0,0,[0]],X).
X = [1, 1, [2]].

?- increment([0,0,[0,[0,0]]],X).
X = [1, 1, [2, [3, 3]]]. 
```

# c - 使用 C 处理标准输入

> ID：10066278
> 
> 赞同：1
> 
> 时间：2012-04-08T20:34:46.147
> 
> 标签：c, file, file-io, stdin, io-redirection

我正在编写一个程序来处理另一个程序的输出。

假设我的测试程序被调用`test`，并且我想处理名为`file`.

在`test`，我正在阅读`stdin`如下文件：

```
FILE *fp;
fp = fopen("/dev/stdin", "r"); 
```

当我在命令行中运行以下命令时，这有效：`./file | ./test`.

但我假设我想使用 I/O 重定向，所以：`./file > ./test`. 我如何在 C 中处理它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T20:37:27.510

I/O 重定向使用`>`不适用于将一个程序的输出通过管道传输到另一个程序。它将一个程序的输出重定向*到一个文件*中。命令

```
./file > ./test 
```

运行程序`file`并创建一个*新*文件`test`，其中包含来自`file`. 它不运行一个名为 的程序`test`，事实上，如果它存在，它会覆盖一个程序。

# python - 如何在 M2O 中向后然后向前到 M2M 的令人困惑的遍历上编写 Django 查询

> ID：10066280
> 
> 赞同：0
> 
> 时间：2012-04-08T20:34:51.367
> 
> 标签：python, django, django-models, django-queryset

我正在尝试获取用户的所有订单，其中该用户是订单供应商代表或经理的一部分。

我会用一些代码更好地解释。这是我的相关部分`models.py`

```
class Vendor( models.Model ) :
    managers        = models.ManyToManyField( User, related_name = 'managers'       , limit_choices_to = { 'userprofile__user_types' : 4 } )
    representatives = models.ManyToManyField( User, related_name = 'representatives', limit_choices_to = { 'userprofile__user_types' : 5 }, null = True, blank = True )

class Order( models.Model ) :
    creator  = models.ForeignKey( User, related_name = 'creator' )
    approver = models.ForeignKey( User, related_name = 'approver' )
    vendor   = models.ForeignKey( Vendor, null = True, blank = True )

class UserType( models.Model ) :
    name = models.CharField( max_length = 135 )

    # id |       name
    #----+------------------
    #  1 | tenant
    #  2 | property manager
    #  3 | property owner
    #  4 | vendor manager
    #  5 | vendor
    #  6 | viewer
    #  7 | moderator
    #  8 | administrator

class UserProfile( models.Model ) :
    user       = models.OneToOneField( User )
    user_types = models.ManyToManyField( UserType, null = True, blank = True ) 
```

要获取用户创建的所有订单很容易：

```
Order.objects.filter( creator = user.pk ) 
```

我不知道如何得到这个的原因是因为我不知道如何`filter`使用 OR 子句（经理*或*代表）或检查 M2M 关系中的存在（检查经理/代表列表的一部分） ）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T20:48:55.083

好的，首先，解释一下这两个语法：在过滤器中，你使用`Q`对象：

```
from django.db.models import Q
results = MyModel.objects.filter(Q(name='daniel') | Q(status='fantastic')) 
```

并测试多对多中的成员资格，您只需使用`=`

```
results = MyModel.objects.filter(user__name='daniel') 
```

这意味着“有一个名为 daniel 的用户”（而不是您可能认为的“只有一个用户，即 daniel”）。

因此，要将这些放在一起，您可以执行以下操作：

```
Order.objects.filter(Q(vendor__managers=my_user) | 
                     Q(vendor__representatives=my_user)) 
```

# c# - 多语言winforms应用程序

> ID：10066283
> 
> 赞同：2
> 
> 时间：2012-04-08T20:35:34.533
> 
> 标签：c#, winforms, forms, multilingual

我希望我的 C# (winforms) 应用程序是多语言的。我的想法是：

*   我会将我的翻译放在一些文本文件中，每个“句子”或短语都有唯一的 ID（整数）
*   在应用程序启动时，我将遍历我的应用程序中所有表单上的所有控件（我想这应该在每个表单的*“加载”*事件处理程序中完成）并且我将测试它的类型的控制
*   即，如果它是一个按钮或菜单项，我将读取它的默认*“文本”*属性，在一个文本文件中找到这个短语，读取它的唯一 ID，然后通过这个 ID 将翻译的短语定位在（其他）文本文件中
*   然后我将用翻译的短语覆盖控件*的“文本”*属性

这使我能够拥有单独的文本文件，其中包含每种语言的短语（将来易于维护单独的翻译 - 只有 1 个 txt 文件）

1.  如果有更好/更容易/更快/更“专业”的方法来实现这一点，我想听听你的意见。
2.  我应该使用什么格式的翻译*文本文件*（纯文本、XML、ini ......） - 它应该是人类可读的。我不知道在 C# 中查找 XML 中的短语是否比在纯文本文件中逐行搜索给定的短语/字符串要快...？
3.  **编辑**- 我希望用户（社区）能够在没有我的交互的情况下为他们将我的应用程序翻译成他们的母语（这意味着微软的资源已经退出了游戏）

非常感谢您提前。

**已关闭 - 我的解决方案：** 看起来我停留在我原来的概念上 - 每个短语都将位于纯文本文件的单独行中 - Unicode 编码（以及行开头的 ID）。我也在考虑删除 ID 并只使用行号，但它需要高级文本编辑器（记事本不显示行号），如果有人不小心点击了“删除行”的快捷方式并且没有注意到，整个应用程序会疯了 ：）

`//sample of my translation text file for one language
0001:Text of my first button
0002:Text of my first label
0003:MessageBox title text
...etc etc`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T20:57:36.047

听起来您对“一个文本文件”的想法有些投入，否则您可能会倾向于标准方式并使用 Microsoft 的资源文件。资源文件的处理是内置的，并且控件已经被键入以支持它。但是，您可能知道，每个翻译都进入它自己的资源文件。因此，您需要处理多个文件以与您的应用程序一起分发。

使用自定义的、您自己的解决方案，您可能可以将其缩减为一个 unicode 文件。但是您必须循环通过控件来设置文本，然后查找每个控件的文本。添加控件类型时，您必须在代码中为它们添加支持。此外，当您添加语言时，您的文本文件会大量增长，因此您也必须考虑到这一点。

我仍然倾向于使用资源文件，但你的措辞表明你已经不喜欢那个解决方案，所以我认为我没有改变你的想法。

**编辑：**

由于您希望将解决方案与应用程序分开以避免重新编译，因此您可以为每种语言类型分发 SQL-CE 数据库文件。您可以将文本值存储在 NVARCHAR 字段中。

这将使您的查询更容易，但会提高自我编辑的要求。您必须为用户提供一种机制来添加他们自己的翻译文件以及编辑屏幕。

**编辑2：**

朝着解决方案前进。:)

您可以使用以 Unicode 编码的简单分隔文本文件和基于约定的命名系统。例如：

**zh-CN.txt**

```
FormName,ControlName,Text
"frmMain","btnSubmit","Save"
"frmMain","lblDescription","Description" 
```

然后，您可以使用 CurrentUICulture 确定要加载哪个文本文件以进行本地化，如果找不到文件，则回退到 en-US。这让用户可以使用通用文本编辑器创建（也可以更改！）他们自己的本地化文件，而无需任何陡峭的学习曲线。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T20:44:49.310

[为什么不用微软的资源文件方法呢？](http://msdn.microsoft.com/en-us/library/y99d1cd3%28v=vs.100%29.aspx)您不需要以这种方式编写任何复杂的自定义代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T03:07:11.097

如果您希望用户通过您的应用程序编辑翻译，同时保持简单快捷，资源文件是最好的。如果您不喜欢它，那么第二好的选择是 XML 文件。

*不过，要回答您有关如何使用文本文件*做到最好的问题，这非常简单：您只需确保您的唯一标识符（`int`可能）是有序的（在使用文件之前进行验证）。然后为了快速搜索，你使用了一半的技术。

您查找数字 X，因此您转到文件的中间行。如果 id > x，则转到文件的 ¼，等等。

你分成两部分，直到你到达正确的路线。这是最快的已知研究方法。

**注意：**注意应用程序外部但需要翻译的东西：外部文件项、数据库中包含的信息等。

# java - java中的泛型专业化

> ID：10066286
> 
> 赞同：2
> 
> 时间：2012-04-08T20:35:42.730
> 
> 标签：java, generics

谁能解释一下，为什么下一个代码没有编译？
我正在为它创建一个部分专业化的 Map 和 Map.Entry：

```
public class Trie<T> implements Map<String, T> {
    private class TrieEntry<S> implements Map.Entry<String, S> {
        // stupid implementation here
    }
    // uninterested code here
} 
```

这里一切正常，但是我正在实现 entrySet() 方法：

```
public Set<java.util.Map.Entry<String, T>> entrySet() {
    Set<java.util.Map.Entry<String, T>> x = new HashSet<TrieEntry<T>>();
    // some uninterested code here
} 
```

日食 说

“类型不匹配：无法转换`HashSet<Trie<T>.TrieEntry<T>>`为`Set<Map.Entry<String,T>>`”

所以，在我的脑海里`TrieEntry<T>`应该展开`Map.Entry<String, T>`并符合定义中的表达。

我哪里错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T21:04:52.540

你是对的， a`TrieEntry<T>`是 a `Map.Entry<String, T>`。A`HashSet<TrieEntry<T>>`也是 a `Set<TrieEntry<T>>`，但它**不是**a `Set<Map.Entry<String, T>>`。

如果是你可以这样做：

```
Set<TrieEntry<T>> trieSet = ...;
Set<Map.Entry<String, T>> mapSet = trieSet;
mapSet.add(mapEntry); 
```

所以现在 trieSet 现在将包含一个`Map.Entry<String, T>`! 这会破坏泛型。

那么如何解决这个特殊问题呢？简单 - 使用有界通配符：

```
Set<? extends Map.Entry<String, T>> x = new HashSet<TrieEntry<T>>(); 
```

你可以读`? extends Map.Entry<String, T>`作“任何至少是一个`Map.Entry<String, T>`”。

* * *

好的，现在到您的实施问题。我实际上相信，由于方法 entrySet() 的当前定义，这是**无法以这种方式解决的。**它*应该*返回`? extends Map.Entry<String, T>`，但它*确实*返回`Map.Entry<String, T>`。

实际上有一个关于这个问题的[错误报告（或功能请求）。](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6231312)查看提交日期和优先级，不能指望很快修复。

所以你有两个选择：

1.  放弃您的`TrieEntry`课程并尝试使用`Map.Entry`，将信息存储在您的键和/或值中。

2.  放下`Map`接口，让您的自定义`entrySet`方法返回`? extends Map.Entry<String, T>`。

这两种解决方案可能都不理想，可能还有更好的解决方案，但这是我目前能告诉你的全部。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-08T21:02:29.353

`HashSet`当然实现了`Set`，但`HashSet<some subclass of X>`不是`Set<X>`. 你可以这样做：

```
Set<? extends Map.Entry<String, T>> x = new HashSet<TrieEntry<T>>(); 
```

但我怀疑你稍后会在你的`entrySet`方法中遇到麻烦（你不能从方法中返回它，因为它仍然需要你返回 a `Set<Map.Entry<String, T>>`）。

另一种解决方案是这样做：

```
Set<Map.Entry<String, T>> x = new HashSet<Map.Entry<String, T>>(); 
```

您可以向其中添加`TrieEntry<T>`对象`Set`，也可以从`entrySet()`.

我认为您还可以`TrieEntry`通过省略类型参数`S`并仅使用`T`封闭类中的来简化您的内部类：

```
class Trie<T> implements Map<String, T> {
    private class TrieEntry extends Map.Entry<String, T> {
        // ...

        @Override
        public T getValue() {
            // ...
        }
    }

    // ...
} 
```

# facebook - Facebook Graph API - 分页

> ID：10066287
> 
> 赞同：2
> 
> 时间：2012-04-08T20:35:48.963
> 
> 标签：facebook, facebook-graph-api, pagination

我正在使用 Facebook API 获取用户的帖子，如下所示：

```
FB.api('/me/home', function (response) {

}); 
```

这将返回一个分页对象，具有两个值：`previous`和`next`。

稍后在我的应用程序中，我想要一个按钮来“加载更多”以进行分页。所以我需要使用这些值从 API 加载下一批数据。

我的问题是我应该如何加载这些数据？`previous`并且`next`是不能与 JavaScript Graph API ( ) 一起使用的全长 URL `FB.api('...')`。我应该如何使用它提供给我的 URL？还是有更好的分页方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T20:50:14.813

您应该对“上一个”和“下一个”进行服务器端请求，并在单击分页链接/按钮时将结果发送给客户端。

**编辑**

或者只是缩短这些网址。使它们相对而不是绝对

# iphone - Objective-C - 优化这个单例模式？

> ID：10066288
> 
> 赞同：5
> 
> 时间：2012-04-08T20:35:50.630
> 
> 标签：iphone, objective-c, ios, memory-management, singleton

我在网上找到了这种单例模式。在我看来，它有很多可以优化的东西。

-在`sharedMySingleton`方法中，不需要调用retain 吗？我不确定... -
如果不是，为什么要保留 in `allocWithZone`？
- 有什么用`@synchronized`。NSAssert 认为这个块可以被多次调用，所以如果是，应该有更多的代码来释放以前的内存，或者在没有 NSAsserting 的情况下清楚地退出块，如果没有，为什么会有这个 NSAssert ？
- 中间的链条`sharedMySingleton`，`alloc`看起来很奇怪。我给自己写了类似的东西：

```
+(MySingleton*)sharedMySingleton
{
    @synchronized([MySingleton class])
    {
        if (_sharedMySingleton == nil) _sharedMySingleton = [[self alloc] init];
        return _sharedMySingleton;
    }

    return nil;
}

+(id)alloc
{
    @synchronized([MySingleton class])
    {
        return [super alloc];
    }

    return nil;
} 
```

**单例模式**

```
#import "MySingleton.h"

@implementation MySingleton

// ##########################################################################################################
// ######################################## SINGLETON PART ##################################################
// ##########################################################################################################
static MySingleton* _sharedMySingleton = nil;

// =================================================================================================
+(MySingleton*)sharedMySingleton
// =================================================================================================
{
    @synchronized([MySingleton class])
    {
        if (_sharedMySingleton == nil) [[self alloc] init];
        return _sharedMySingleton;
    }

    return nil;
}

// =================================================================================================
+(id)alloc
// =================================================================================================
{
    @synchronized([MySingleton class])
    {
        NSAssert(_sharedMySingleton == nil, @"Attempted to allocate a second instance of a singleton.");
        _sharedMySingleton = [super alloc];
        return _sharedMySingleton;
    }

    return nil;
} 

+ (id)allocWithZone:(NSZone *)zone  { return [[self sharedMySingleton] retain]; }
- (id)copyWithZone:(NSZone *)zone   { return self; }
- (id)retain                        { return self; }
- (NSUInteger)retainCount           { return NSUIntegerMax;  /* denotes an object that cannot be released */}
- (oneway void)release              { /* do nothing */ }
- (id)autorelease                   { return self; }

// ##########################################################################################################
// ##########################################################################################################
// ##########################################################################################################

// =================================================================================================
-(id)init 
// =================================================================================================
{   
    if (!(self = [super init])) return nil;

    return self;
}

// =================================================================================================
-(void) dealloc
// =================================================================================================
{
    [super dealloc];
}

// =================================================================================================
-(void)test 
// =================================================================================================
{
    NSLog(@"Hello World!");
}

@end 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-08T20:52:26.333

你根本不应该使用这种模式（它是一个非常特殊的 Singleton 情况，你几乎不需要，即使在那种情况下你通常也不应该使用它）。

我的 Objective-C 单例应该是[什么样子？](https://stackoverflow.com/questions/145154/what-does-your-objective-c-singleton-look-like), 但其中大部分在 GCD 发布后就已经过时了。在 Mac 和 iOS 的现代版本中，您应该使用 Colin Barrett 在链接问题中给出的以下模式：

```
+ (MyFoo *)sharedFoo
{
    static dispatch_once_t once;
    static MyFoo *sharedFoo;
    dispatch_once(&once, ^{ sharedFoo = [[self alloc] init]; });
    return sharedFoo;
} 
```

我只在这里复制它而不是标记问题重复，因为旧问题的最高评价答案已经过时了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T21:00:33.067

无需调用`retain`，因为有`alloc`. 最重要的是调用`retain`会导致内存泄漏。因为它是一个单例，所以有保留`allocWithZone`，所以我们不想创建该类的两个不同实例。而是分配一个新实例，我们增加了单例实例的保留计数。这是为什么？可能是为了防止有人不知道该类的单例类型。如果他调用`allocWithZone`然后释放实例，一切仍然正常，他实际上访问了共享单例实例。

`@synchronized`用于防止来自两个不同线程的两个调用同时进入 if 语句。所以代码是线程安全的。

如果曾经创建过两个单例实例，则 NSSAssert 可能会使应用程序“崩溃”。它是“只是为了确定”的代码，也称为防御性编程。

关于和之间的链`sharedMySingleton`，`alloc`我认为这很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T21:07:16.043

> 在sharedMySingleton方法中，不需要调用retain吗？

`alloc`返回一个引用计数为 1 的新实例，因此不需要保留。

> 如果没有，为什么allocWithZone 中有retain？

根据规则，当您调用时`allocWithZone`，您拥有引用，因此`allocWithZone`大大增加了您的引用计数。但是这个 allocWithZone 的实现正在返回已经由其他人创建和拥有的单例实例（`sharedMySingleton`方法）。因此该`sharedMySingleton`方法使用 来创建对象`alloc`，因此它成为所有者。然后你通过 获得同一个实例`allocWithZone`，因此你成为同一个实例的第二个所有者。所以保留计数必须增加，因为现在有两个所有者。这就是为什么`allocWithZone`需要保留。

> @synchronized 有什么用？

`@synchronized`允许多个线程同时调用代码。如果您永远不会`sharedMySingleton`从多个线程调用，则没有必要，您可以省略它。

> NSAssert 使认为该块可以被多次调用，所以如果是，应该有更多的代码来释放以前的内存，或者在没有 NSAsserting 的情况下清楚地退出该块，如果没有，为什么会有这个 NSAssert？

因为该类旨在成为单例，所以`alloc`应该只调用一次。如果被多次调用，`NSAssert()`则终止程序。`alloc`由于`NSAssert()`终止程序，当`alloc`被第二次调用时，不需要内存管理。

# c# - 如何在 form2 中调用 form1 的方法而不创建 form1 的新实例

> ID：10066290
> 
> 赞同：1
> 
> 时间：2012-04-08T20:36:16.837
> 
> 标签：c#

我有 2 个表格。在表格 1 中，我有一个树视图。在一种方法中，我得到检查的节点列表。

```
private void CreateListOfCheckedNodes()
        {
            TreeNodeCollection nodes = TreeData.Nodes;
            Int32 EffectedNodes = GetCheckedNodesCount(nodes);
            if (EffectedNodes > 0)
            {
              ;//my code
            }
        }

        public int GetCheckedNodesCount(TreeNodeCollection nodes)
        {
            int CheckedNodesCount = 0;

            for (int i = 0; i < nodes.Count; i++)
            {
                TreeNode node = nodes[i];
                if (node.Checked)
                {
                    TreeFieldSet Item = new TreeFieldSet { TreeId = Int32.Parse(node.Tag.ToString()), Title = node.Text };
                    MyProject.Tree.TreeCheckedNodes.TreeList.Add(Item);
                    CheckedNodesCount++;
                }

                if (node.Nodes.Count > 0)
                    CheckedNodesCount += GetCheckedNodesCount(node.Nodes);
            }
            return CheckedNodesCount;
        } 
```

如何`CreateListOfCheckedNodes`在没有新的 Form1 的情况下调用 Form 2 中的方法？有了这个调用：

```
Tree.TreeSubjects Ts = new Tree.TreeSubjects();
Ts.CreateListOfCheckedNodes();//if CreateListOfCheckedNodes public 
```

我得到错误！

请帮忙 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T20:37:52.477

将代码移动到两个表单都可以访问的新类中。

如果它不使用任何成员变量，您可以将方法设为静态（快速浏览代码似乎表明情况就是如此）。

```
static class TreeNodeCollectionHelper
{
    public static int GetCheckedNodesCount(TreeNodeCollection nodes)
    {
        ...
    }
} 
```

您也可以考虑将其作为TreeNodeCollection 类的[扩展方法](http://msdn.microsoft.com/en-us/library/bb383977.aspx)，但应谨慎执行，因为这可能会让您的同事感到惊讶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T20:38:56.457

I am not completely sure I understood your question but if you are asking how to call a method without having to make a instance of the class then make the method static.

# ruby - 如何从找到的行中提取值

> ID：10066300
> 
> 赞同：0
> 
> 时间：2012-04-08T20:37:15.653
> 
> 标签：ruby, regex

我正在打开一个文件并找到我需要的行，但是我无法从找到的字符串创建一个变量

```
70c 08:04:04.014    rexx    TRACE   2203 8=4.4|9=892|35=J|49=ICE_SM_S|56=SM|34=280|70=0241608914160889|71=0|626=2|793=16|72=|466=1164266784|857=0|73=1|11=|37=1156426784|526=1156426674|38=1|198=1310883PTM|54=1|6=117.2100000000|336=R|625=P|55=B|461=FXXXXX|200=20120901|207=IFEU|53=1|30=ICE|453=2|448=SLM|447=C|452=7|448=FFC|447=C|452=12|75=20120210|60=20120310-09:04:04|77=O|58=CYU795|232=14|233=GL_TRADEJOBOUT|234=N|233=GL_ORDERJOBOUT|234=N|233=GL_TAKEN|234=0|233=GL_TRADETYPE|234=E| 
```

这是字符串，我想将它分配给 的变量`tag198`，所以它是

```
tag198 = '1310883PTMS' 
```

之后的任何东西`|`都不需要。

```
tag198 = line.match(/198=(.*)/)[1]
puts tag198 
```

但这仍然存在`198`；我只需要`|`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T20:45:17.750

将您的正则表达式更改为：

```
/198=(.+?)\|/ 
```

这使它不贪婪并停在垂直条上。您必须转义竖线，因为它通常在正则表达式中表示“或”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T20:44:34.893

您的正则表达式`*`是贪婪的，并且会在不阻止其余表达式匹配的情况下消耗它可以使用的所有字符。表达式中没有任何内容告诉 ruby​​ 何时停止收集字符。

查看[正则表达式.info](http://www.regular-expressions.info/ruby.html)。解决您的问题的部分方法是放置一个“|” 捕获后：

`tag198=line.match(/198=(.*)\|/)[1] puts tag198`

'|' 被转义，因为它在正则表达式中具有特殊含义。但这还不起作用，因为`*`仍然可以消耗 '|' 字符，只要它留下一个匹配 '|' 在我们的表达中。要完全修复，请防止`*`捕获任何管道：

`tag198 = line.match(/198=([^|]*)\|/)[1] puts tag198`

[在此处](http://repl.it/CKq)查看此更改的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T22:16:10.583

如果只有字母和数字，您可以使用

```
 /198=([A-Za-z0-9]*)/ 
```

另外，如果你不知道，你可以在 rubular.com 上测试正则表达式，它还提供了一些关于正则表达式特殊章程的信息，它是一个很好的网站，可以满足你所有的正则表达式需求，即使它不是红宝石。

# php - 为什么侧边栏没有在 wordpress 中更新？

> ID：10066307
> 
> 赞同：0
> 
> 时间：2012-04-08T20:38:04.837
> 
> 标签：php, html, wordpress, wordpress-theming

我不得不在 html 的侧边栏 div 中手动添加一些 html，但是当我预览/激活这个主题时，它没有显示侧边栏的 maunal 更新内容，我是否还需要将其添加到 sidebar.php 中，如果需要，在哪里。我对 wp 和 php 都很满意。你能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T21:00:00.383

这是 Wordpress 侧边栏 (sidebar.php) 的推荐方式

```
<ul id="sidebar">
   <?php if ( !dynamic_sidebar() ) : ?>
       <li>{static sidebar item 1}</li>
       <li>{static sidebar item 2}</li>
   <?php endif; ?>
</ul> 
```

但是如果你总是想在你的侧边栏上有一些静态项目，那么你可以制作 sidebar.php 如下

```
// Static items will be always at the top of the sidebar
<ul id="sidebar">
    <?php if ( !dynamic_sidebar() ) : ?>
        <li>{static sidebar item 1}</li>
        <li>{static sidebar item 2}</li>
    <?php endif; ?>
</ul>

if(function_exists(‘dynamic_sidebar’) && dynamic_sidebar()) :

endif; 
```

**参考：[注册侧边栏](http://codex.wordpress.org/Function_Reference/register_sidebar)和[动态侧边栏](http://codex.wordpress.org/Function_Reference/dynamic_sidebar)。**

**这是您当前的侧边栏（非动态）**

```
<?php include (TEMPLATEPATH . '/searchform.php'); ?> 
<div id="sidebar"> 
    <h3>Category</h3>
    <ul class="ul-cat"> 
        <?php wp_list_categories('show_count=1&title_li='); ?> 
    </ul>
    <h3>Archives</h3>
    <ul class="ul-archives"> 
        <?php wp_get_archives('type=monthly'); ?> 
    </ul>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T20:56:34.703

您是否尝试过刷新浏览器缓存？并且您确定您没有使用插件缓存您的页面，或者主机是否正在缓存内容？

# java - Android的碰撞和触摸+射击方法

> ID：10066308
> 
> 赞同：0
> 
> 时间：2012-04-08T20:38:15.607
> 
> 标签：java, android, xml

我真的需要帮助。我正在为我最后一年的项目制作一个游戏应用程序。这是一个简单的游戏，您必须通过反弹墙壁或有角度的块将球射入目标。但是我需要两个方面的帮助：

1.  射击机制类似于愚蠢的僵尸。您可以在屏幕上触摸一个十字准线，以指示您希望将球击向哪个方向。释放时，球应该朝那个方向移动，并有望进入目标，如果不是重力和摩擦力，它就会停止。

    问题是我如何编写这样的代码？

2.  我需要球在墙壁上反弹，并且我将有一些倾斜的块，以便球必须击中某个部分才能到达目标。如果没有达到目标，球最终会停止。

    如何制作一种方法来创建墙和块的碰撞？

过去几周我一直在寻找帮助我制作游戏的教程，但没有找到与我正在制作的游戏类型相关的太多内容。如果可以提供示例代码或模板那就太好了，因为这是我的第一个 android 应用程序，它是我最后一年的项目，我没有太多时间了。

提前谢谢
akkki

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T22:09:51.330

你的问题对于堆栈溢出来说太笼统了，没有人会为你做你的项目。假设你有基本的编程经验，如果没有得到书籍并首先学习。

假设您已经因为您的标签而选择了 Android，并假设 2d 游戏更容易。

预先请求：如果您还没有安装 java+eclipse+android sdk。创建一个新项目并使用月球着陆器示例，确保它在您的手机或模拟器上运行。

起始示例：月球着陆器有一个游戏循环，一个单独的线程不断重绘整个屏幕，它通过不断调用 doDraw 函数来做到这一点。然后，您应该使用画布来绘制线条、圆圈、框、颜色和位图，以类似于您的游戏。(canvas.draw ....) Lunar Landar 不使用 openGL，所以它更慢但更容易使用。

剥离样本：您可能不想要关键事件或月球飞船！删除 onDraw 函数中的所有内容 删除 onKeyUp、onKeyDown 删除任何发生的错误 新建一个

```
@Override
public boolean onTouchEvent(MotionEvent event){
    return false;
} 
```

运行它你应该得到一个空白屏幕，这是你开始制作游戏的画布......你提到了球，把它分解成球是什么：位置和方向，为球创建变量 x,y direction_x 和 direction_y触摸事件将要更改球的方向，绘图事件将要移动球（将方向 x,y 添加到球 x,y）并绘制球（canvas.drawCircle(x,y,radius,new Paint())) 想要更多的球搜索和阅读数组。**最重要的是开始简单和实验。**

2 次碰撞

碰撞可以在 dodraw 函数中完成并分解为：移动一个对象，检查该对象是否已经通过了它应该去的地方，如果是，在任何人注意到之前将其移回......有许多不同的碰撞检测技术：

*   如果你的墙都是水平和垂直的（最简单的），那么盒子碰撞会检查球的新 x,y+-radius 对墙 x,y,width 和 height 这是一个很大的 if 语句，谷歌有数十亿个例子。

*   如果你的墙壁是有角度的，那么你需要线碰撞检测，你基本上有一条线（矢量），你的球正朝着你的墙的一个矢量创建一个函数来检查两条线在哪里碰撞并检查该点是否都在墙上并且在你的球的半径内（谷歌线交叉功能）

*   或者您可以使用颜色选择，例如，您在知道所有墙壁都是红色的情况下绘制场景，然后检查新球 x，y 所在的点是否为红色并知道您击中了

祝你好运，希望这对你有所帮助，保持简单，反复试验，希望这能让你开始，你的下一个问题可以更具体。

# groovy - Gradle 测试失败并出现 NullPointerException

> ID：10066309
> 
> 赞同：2
> 
> 时间：2012-04-08T20:38:18.923
> 
> 标签：groovy, junit, gradle

运行时出现此错误`gradle test`：

```
Caused by: org.gradle.api.GradleException: Could not generate test report to '/home/tjwebb/workspace/MyProject/build/reports/tests'. 
```

Groovy 1.7.10
Gradle 1.0-m3

奇怪的是我的测试编译和运行完美，它们通过了，我得到了通常的输出`build/reports/tests`。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T21:01:23.390

我想这是一个错误。我升级到 gradle 1.0-m9 并且可以正常工作。出于某种原因， `m3`该版本是否仍在 Ubuntu 存储库中。

# r - 自定义环境中的范围（功能）

> ID：10066311
> 
> 赞同：4
> 
> 时间：2012-04-08T20:38:47.777
> 
> 标签：r, function, scope, sandbox

我有一个特殊的（虚拟）函数，我想在沙盒环境中使用它：

```
disable.system.call <- function(...) {
    mc <- match.call()
    if (grepl('system', deparse(mc[[2]])))
        stop('NONO')
    eval(mc, env = .GlobalEnv)        
} 
```

它没有做任何特别的事情，只是检查第一个参数的`system`名称中是否包含单词。这只是一个 POC 示例。

我稍后要做的：我将这个简单的函数分配给 some`base`和`stats`函数，以查看评估的表达式是否包含`system`单词作为第一个参数。例如：

```
e <- new.env()
eval(parse(text = 'model.frame <- disable.system.call'), envir = e) 
```

这很酷，因为没有`system`内部的调用就像一个魅力，但过滤器有效：

```
> eval(parse(text = 'model.frame("1 ~ 1")'), envir = e)
  1
1 1
> eval(parse(text = 'model.frame(\'1 ~ system("ls -la")\')'), envir = e)
Error in model.frame("1 ~ system(\"ls -la\")") : NONO 
```

它甚至可以使用一个`lm`调用，该调用`model.frame`在内部找到一个像字符串这样的公式：

```
> eval(parse(text = 'lm(\'1 ~ system("ls -la")\')'), envir = e)
Error in model.frame(formula = "1 ~ system(\"ls -la\")", drop.unused.levels = TRUE) : 
  NONO 
```

我试着走得更远一点，并分配了一个非常简单的函数 ( `disable.system.call`)，`as.formula`从`model.frame`. 不幸的是，我还没有做到这一点：

```
> e <- new.env()
> eval(parse(text = 'as.formula <- disable.system.call'), envir = e)
> eval(parse(text = 'as.formula("1 ~ 1")'), envir = e)
1 ~ 1
> eval(parse(text = 'as.formula(\'1 ~ system("ls -la")\')'), envir = e)
Error in as.formula("1 ~ system(\"ls -la\")") : NONO
> eval(parse(text = 'model.frame(\'1 ~ system("ls -la")\')'), envir = e)
  1 system("ls -la")
1 1                0
> eval(parse(text = 'lm(\'1 ~ system("ls -la")\')'), envir = e)

Call:
lm(formula = "1 ~ system(\"ls -la\")")

Coefficients:
     (Intercept)  system("ls -la")  
           1                NA 
```

据我所知`model.frame`，正在调用`as.formula`，但这不起作用（从上面的输出中可以看出）。我很确定这不是因为在自定义环境中调用了`model.frame`上述方法。`stats::as.formula``lm``model.frame`

任何提示和想法都会受到欢迎！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T23:03:00.167

尽管您怀疑情况并非如此，但`stats:::model.frame.default`正在调用，而不是 environment 中的自定义版本`e`。（这当然是您通常期望从打包函数中获得的行为。在您的第一个示例中看到的奇怪范围是一个特殊情况，由于`lm()`“使用“非标准评估”，这在我的底部进行了讨论回答）。

如下所示，您可以使用查看在每种情况下调用`trace()`哪个版本：`as.formula()`

```
disable.system.call <- function(...) {
    mc <- match.call()
    if (grepl('system', deparse(mc[[2]])))
        stop('NONO')
    eval(mc, env = .GlobalEnv)        
}
e <- new.env()
eval(parse(text = 'as.formula <- disable.system.call'), envir = e)

# (1) trace custom 'as.formula()' in environment e
trace(e$as.formula)

# Calling model.frame() **does not** call the the custom as.formula()
eval(parse(text = 'model.frame(\'1 ~ system("ls -la")\')'), envir = e)
#   1 system("ls -la")
# 1 1              127

# (2) trace stats:::as.formula()
trace(stats:::as.formula)

# Calling model.frame() **does** call stats:::as.formula()
eval(parse(text = 'model.frame(\'1 ~ system("ls -la")\')'), envir = e)
# trace: as.formula
#   1 system("ls -la")
# 1 1              127 
```

* * *

**编辑**：FWIW，在第一个示例中`model.frame()` **调用**您的自定义的原因是采用有时称为“非标准评估”的方法。（有关该主题的更多信息，[请参阅此 pdf](https://www.google.com/search?q=standard%20non-standard%20evaluation%20rules&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a)，而不是您可能想要的。）关键是它实际上指示在调用环境中进行评估；在您的情况下，这导致它找到了您的功能版本。`lm()``lm()``lm()``model.frame()`

`lm()`使用非标准评估的原因是`model.frame()`即使在调用环境中找到它们也可以访问公式中命名的变量（而不仅仅是能够访问通过参数传入的`data`变量`lm()`）。正如 Thomas Lumley 在链接的 pdf 中所说：

> 如果公式中的变量需要在数据参数中，生活会简单得多，但是在引入公式时没有提出这个要求。

如果您有兴趣，以下是定义中的相关行`lm`：

```
mf <- match.call(expand.dots = FALSE)
...
mf[[1L]] <- as.name("model.frame")
mf <- eval(mf, parent.frame()) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T22:38:21.083

如果您不希望人们能够使用`system`，覆盖定义会更容易。

```
assignInNamespace(
  "system", 
  function(...) stop("system calls are not allowed"), 
  getNamespace("base")
)

system("pwd")  #throws an error 
```

* * *

我在猜测您的用例，但是您是否让用户将任意 R 代码传递给其他应用程序？在这种情况下，您可能希望编译自己的 R 版本，删除或替换为假人的危险函数。

* * *

调用函数时执行自定义代码的另一种可能性是`trace`. 例如，

```
trace(system, quote(stop("You have called system")))  #you may also want print = FALSE 
```

# arrays - Rails 中的数组

> ID：10066319
> 
> 赞同：0
> 
> 时间：2012-04-08T20:39:34.687
> 
> 标签：arrays, ruby-on-rails-3, ruby-on-rails-3.2, each

经过大量谷歌搜索和控制台测试后，我需要一些有关 rails 数组的帮助。在一种方法中，我在数据库中搜索符合特定要求的所有行并将它们放入变量中。接下来，我想在该数组上调用每个并循环遍历它。我的问题是，有时在初始搜索中只有一行匹配，并且 .each 会导致 nomethoderror。

我在两种情况下都打电话给班级，其中有多行且只有一行。当有多行时，我将它们转储到的变量是类数组。如果只有一行，则为模型的类。

当我的搜索中只有一个对象实例时，我如何才能拥有一个不会中断的 each 循环？我可以用大量条件代码破解一些东西，但我觉得我在这里没有看到真正简单的东西。

谢谢！

**要求的代码如下**

```
@user = User.new(params[:user])  
if @user.save      
  #scan the invites dbtable and if user email is present, add the new uid to the table
    @talentInvites = TalentInvitation.find_by_email(@user.email)
    unless @talentInvites.nil?
      @talentInvites.each do |tiv|
        tiv.update_attribute(:user_id, @user.id)
      end  
    end
....more code... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T20:47:07.690

使用`find_all_by_email`，它总是会返回一个数组，即使是空的。

```
@user = User.new(params[:user])  
if @user.save      
  #scan the invites dbtable and if user email is present, add the new uid to the table
    @talentInvites = TalentInvitation.find_all_by_email(@user.email)
    unless @talentInvites.empty?
      @talentInvites.each do |tiv|
        tiv.update_attribute(:user_id, @user.id)
      end  
    end 
```

# python - Python 子进程仅在 cron 中返回非零退出状态

> ID：10066322
> 
> 赞同：7
> 
> 时间：2012-04-08T20:39:46.150
> 
> 标签：python, subprocess, crontab, casperjs

我有一个 Python 脚本来管理一系列[CasperJS](http://www.casperjs.org)任务并处理结果。它从命令行运行良好，但是当我在 cron 中运行脚本时，出现错误：

```
CalledProcessError: Command '['/path/to/casperjs', '/path/to/doSomething.js', 'args']' returned non-zero exit status 1 
```

在 Python 中，我调用 CasperJS：

```
response = subprocess.check_output(['/path/to/casperjs', '/path/to/doSomething.js', 'args'], shell=True) 
```

我也尝试过`shell=False`，`Popen`但我得到了相同的结果。我还尝试将整个命令设为字符串（而不是列表），但这也无济于事。

在 shell 中运行时，运行`'/path/to/casperjs /path/to/doSomething.js args'`返回退出代码 0。

我也添加`PATH=/usr/bin:/bin:/sbin:/usr/local/bin`到我的 crontab 中无济于事。（正如[这个问题](https://stackoverflow.com/questions/7888222/subprocess-module-fails-to-run-command)所建议的那样。）

任何想法为什么我只在 cron 中得到这个错误？谢谢！！

**编辑：**根据下面的答案，设置`shell=False`并使`stderr=subprocess.STDOUT`一切正常......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-08T20:46:15.350

除了标准输出之外，您还应该尝试捕获标准错误，以便您可以准确找出程序失败的原因（假设它确实为您打印了一些错误）

```
cmd = ['/path/to/casperjs', '/path/to/doSomething.js', 'args']
response = subprocess.check_output(cmd, 
                shell=True,
                stderr=subprocess.STDOUT) 
```

# c - 递增指针 (ptr++) 和 (*ptr++)

> ID：10066326
> 
> 赞同：0
> 
> 时间：2012-04-08T20:40:27.307
> 
> 标签：c, pointers

当我有这个疑问时，我正在重新审视指针。

```
int *ptr;
int arr[5] = {10,20,30,40,50};
ptr = &arr[0]; 
```

现在`printf("Value: %d",*ptr);`会打印`10`

如果我做：

```
ptr++;
printf("Value: %d",*ptr); 
```

结果将是：`20`

同样，如果我这样做：

```
*ptr++;
printf("Value: %d",*ptr); 
```

结果是：`30`

但

```
printf("Value: %d",++*ptr); 
```

给我`31`

我认为，当我增加它时，它`ptr`是类型`int`，它会跳转 4 个字节到下一个内存位置。但为什么它对`*ptr++`和`ptr++`而不是表现出相同的行为`++*ptr`呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-08T20:43:25.493

因为*优先*。

*   `*ptr++`与 相同`*(ptr++)`，指针增加，但其*先前*的值被取消引用。
*   `ptr++`是一样的，嗯，`ptr++`。
*   `++*ptr`与 相同`++(*ptr)`，即它增加被指向的东西，而不是指针。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T20:46:08.053

当你这样做时`* ptr++`，你实际上是在做`* (ptr++)`，所以指针会增加，而不是它指向的变量

当`++ *ptr`，它实际上是`++(* ptr)`，所以它增加了指针返回的值

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T20:47:07.393

第一个片段很明显：它打印`ptr`指向的内容，即 10。

第二个，将指针向前移动一个元素，然后指向下一个元素，即 20。

第三个片段与前一个完全相同，因为它的第一条指令递增指针并返回未递增的值，该值被取消引用，但其结果被丢弃；中取消引用的`printf`是递增的指针，现在指向 30。

最后一个片段是不同的：`++*ptr`is `++(*ptr)`; `*ptr`取消引用`ptr`（已经指向`30`），产生 30，并`++`增加这个值，变成 31。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-05T14:58:19.390

C Precedence 从高优先级开始的顺序：

> ()
> ++
> * & *用于指针*
> * /
> + -

所以，

```
 *ptr++ equivlant to *(ptr++)
 ++*ptr equivlant to ++(*ptr) 
```

对于这一行 *ptr++; 它只会增加 ptr 指针。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-01T08:35:48.013

诀窍在于，只要两者都是一元运算符，则关联性是从右到左的。

*ptr++ --> 首先增加指向下一个位置的指针，然后取消引用该位置的值。

类似地 *++ptr --> 首先增加指针然后取消引用。

++*ptr --> 首先在 ptr 处取消引用值，然后增加该值。

# c++ - C ++：比较字符串词典

> ID：10066328
> 
> 赞同：4
> 
> 时间：2012-04-08T20:40:50.793
> 
> 标签：c++, string, comparison, lexicographic

使用覆盖`bool operator<(const std::string & rhs)`运算符时，字符串是否按字典顺序进行比较？例如：

```
std::string str1 = "aabbcc"
std::string str2 = "bbaacc"

(str1 < str2) == std::lexicographical_compare(str1.begin(),str1.end(),str2.begin(),str2.end()) // is this statement true? 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T20:47:27.143

是的。

字符串的比较运算符是根据它的`traits::compare`（即`char_traits<char>::compare`）（C++03 21.3.6.8）定义的，它被指定为根据其参数的字典顺序返回一个值（21.1.1）。

> X::compare(p,q,n) ... 产生： 0 如果对于 [0,n) 中的每个 i， X::eq(p[i],q[i]) 为真；否则，如果对于 [0,n) 中的某个 j，X::lt(p[j],q[j]) 为真并且对于 [0,j) 中的每个 i，则为负值 X::eq(p [i],q[i]) 为真；否则为正值。

实际上，这意味着比较字符串不能对语言环境敏感（在某些语言环境中可能是非字典式的，例如我的）。

# java - Java 通过回溯安装管道

> ID：10066334
> 
> 赞同：2
> 
> 时间：2012-04-08T20:41:56.627
> 
> 标签：java, algorithm, recursion, backtracking

我正在审查本地编程竞赛中的一个编程问题。

您可以下载问题[http://www.vlaamseprogrammeerwedstrijd.be/2011/opgaves/cat2-2011/loodgieter.pdf](http://www.vlaamseprogrammeerwedstrijd.be/2011/opgaves/cat2-2011/loodgieter.pdf)。它是荷兰语，但图片将有助于理解它。

您收到 am*m 网格作为输入，其中包含一些管道和一些缺失点（问号）。其余的管道必须放置在网格中，以便它们与其他管道连接。

每个管道都用一个字母表示（参见第 2 页的图片）。字母“A”的值为 1，“B”的值为 2，...

有人知道如何通过在 Java 中回溯来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T21:31:12.493

我建议收集你关于游戏的所有知识：

*   边界更新连接
*   管道相互连接
*   ? 我不太懂荷兰语；）

选择一个描述拼图的表示，在每个单元格中都有所需的连接（由已放置的部分暗示），并且可以是一些可能是也可能不是连接的选项

编写放置处理程序，当一块被放入棋盘时更新这些属性

创建决定零件是否可以放置在特定位置的逻辑。

此时从一个空板开始，放置你知道的部分

开始执行以下操作的递归：

*   选择第一个空单元格
    *   如果没有复制当前板输出（解决方案）
*   对于每件可用的作品，它会尝试它是否适合
    *   如果有，放置它并重新调用它自己

我希望你把它放在一起，这是一个很好的谜题，注意我每天玩的：[每日专家netwalk](http://www.logicgamesonline.com/netwalk/daily.php)，它是一种类似的，可以使用那里的启发式，也可以应用于这个问题。

# web - 如何将小游戏模拟成互动网站？

> ID：10066335
> 
> 赞同：1
> 
> 时间：2012-04-08T20:42:10.747
> 
> 标签：web, simulation, interactive

我决定开始一个项目，以便我可以学习一些编码。我对编码很陌生（在 html/css 上相当不错）所以我不知道要使用什么编码语言，但我致力于学习和完成这个项目，只需要一些方向。

我正在尝试制作一个交互式网站，它将模拟一个名为“Habbo”的小型游戏/聊天（它主要使用指针来做任何事情）。我希望这个交互式网站只是为了模拟游戏中的移动，例如，当我单击一个对象时，会弹出一个包含一些信息、图像等的窗口。

1) [https://i.stack.imgur.com/MEPsx.png](https://i.stack.imgur.com/MEPsx.png) 2) [https://i.stack.imgur.com/rBEWF.gif](https://i.stack.imgur.com/rBEWF.gif)

第一张图片是我想在网站上展示的，它基本上是一个带有游戏家具的房间，第二张图片是我需要如何移动房间。

编辑：在这个[http://habbo.wikia.com/wiki/Habbo_Wiki](http://habbo.wikia.com/wiki/Habbo_Wiki)网站中，大约一半的位置显示了一个带家具的房间，您可以单击家具但不能移动。我想做到这一点，这样用户就可以在房间里四处走动并执行不同的任务。我希望我不会让任何人感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:35:38.403

不要使用Java。小程序太重了，通常不受用户特别是浏览器的欢迎！

您可以使用闪存。你见过Flash游戏吗？它在所有浏览器中作为插件提供，几乎受到所有用户的欢迎和接受。所以，开始学习吧。

[在这里](http://www.emanueleferonato.com/2006/10/29/flash-game-creation-tutorial-part-1/)，您可以找到几十个免费 Flash 教程中的一个。

# uml - 任何人都可以看到这个用例的任何问题

> ID：10066340
> 
> 赞同：0
> 
> 时间：2012-04-08T20:43:16.850
> 
> 标签：uml, diagram, use-case

我不太了解用例图的概念，但我已经对此有所了解。任何人都可以看到以下用例图的任何问题：

![在此处输入图像描述](../Images/cb3acb79f5165d26e040815e2732d2a8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T22:09:17.113

“包含”关系的行是虚线和定向的，请参见谷歌容易找到的许多示例。

# node.js - 为什么我的 NodeJS 路由中可能缺少“auth/twitter”？

> ID：10066342
> 
> 赞同：0
> 
> 时间：2012-04-08T20:43:32.563
> 
> 标签：node.js, everyauth

我正在开发一个小型 NodeJS 应用程序，该应用程序使用everyauth（技术上是 mongooseAuth）与 twitter 对话以验证用户身份。我已经按照 mongooseAuth 的说明以及用户模型设置了 UserSchema，并在我的 app.configure 部分中包含了 app.use(mongooseAuth.middleware())。

当我单击“使用 Twitter 登录”按钮时，它会尝试访问[http://localhost:3000/auth/twitter](http://localhost:3000/auth/twitter)，但根据显示的错误，这条路线丢失了：

```
Cannot GET /auth/twitter 
```

据我所知，这个网址应该由everyauth/mongooseAuth 提供。我一直在寻找答案，但到目前为止没有任何帮助。这个应用程序使用快递。想法？我是 NodeJS 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:08:15.250

事实证明，使用[http://localhost:3000](http://localhost:3000)而不是例如[http://local.host:3000](http://local.host:3000)会导致此错误。使用其他身份验证（例如 google），此问题不再发生。

# java - 如何在 IDEA 中构建 .war 文件以部署到 Liferay？

> ID：10066343
> 
> 赞同：2
> 
> 时间：2012-04-08T20:43:50.153
> 
> 标签：java, intellij-idea, liferay, portlet, liferay-6

我有一个现有 portlet 的来源。我对其进行了一些更改以修复一些错误，现在我需要将固定源部署到 liferay。我使用工件选项构建战争文件并像往常一样部署这个战争文件。但是我仍然无法在页面上添加我的 portlet，因为我没有在列表中看到它。我究竟做错了什么？

如果重要的话，我会使用 Idea 11.1 和 liferay 6.0.6。

似乎是战争文件错误的问题，因为其他战争文件（我自己没有编译）已成功部署。

而且，如果我在构建工件时创建了战争文件很重要，请不要使用 Ant。

* * *

日志：

```
09:37:09,430 INFO  [PortletAutoDeployListener:71] Copying portlets for D:\odesk_work\liferay\liferay-portal-6.0.6\deploy\Comply-Activities-portlet-6.0.5.2.war
  Expanding: D:\odesk_work\liferay\liferay-portal-6.0.6\deploy\Comply-Activities-portlet-6.0.5.2.war into D:\odesk_work\liferay\liferay-portal-6.0.6\tomcat-6.0.29\temp\20120409093709483
  Copying 1 file to D:\odesk_work\liferay\liferay-portal-6.0.6\tomcat-6.0.29\temp\20120409093709483\WEB-INF
  Copying 1 file to D:\odesk_work\liferay\liferay-portal-6.0.6\tomcat-6.0.29\temp\20120409093709483\WEB-INF\classes
  Copying 1 file to D:\odesk_work\liferay\liferay-portal-6.0.6\tomcat-6.0.29\temp\20120409093709483\WEB-INF\classes
  Copying 1 file to D:\odesk_work\liferay\liferay-portal-6.0.6\tomcat-6.0.29\temp\20120409093709483\META-INF
  Copying 119 files to D:\odesk_work\liferay\liferay-portal-6.0.6\tomcat-6.0.29\webapps\Comply-Activities-portlet
  Copying 1 file to D:\odesk_work\liferay\liferay-portal-6.0.6\tomcat-6.0.29\webapps\Comply-Activities-portlet
  Deleting directory D:\odesk_work\liferay\liferay-portal-6.0.6\tomcat-6.0.29\temp\20120409093709483
09:37:12,456 INFO  [PortletAutoDeployListener:81] Portlets for D:\odesk_work\liferay\liferay-portal-6.0.6\deploy\Comply-Activities-portlet-6.0.5.2.war copied successfully. Deployment will start in a few seconds. 
```

看起来它在部署时崩溃了。因为当我尝试部署有效的 portlet 时，日志中有一些额外的信息，比如

```
09:13:37,874 INFO  [PortletHotDeployListener:220] Registering portlets for Comply-Activities-portlet
09:13:37,976 INFO  [PortletHotDeployListener:369] 1 portlet for Comply-Activities-portlet is available for use 
```

* * *

UPD：也许有人会指导我如何正确构建 *.war？我认为这就足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T23:38:57.260

确保`liferay-display.xml`在`WEB-INF`你的战争目录中并且它的内容是好的。

它应该包含如下内容：

```
<?xml version="1.0"?>
<!DOCTYPE display PUBLIC "-//Liferay//DTD Display 5.2.0//EN"     "http://www.liferay.com/dtd/liferay-display_5_2_0.dtd">

<display>
<category name="${liferay.category}">
    <portlet id="yourPortletID" />
    <portlet id="yourPortletID2" />
            <!-- more portlet ids -->
</category>
</display> 
```

也许构建系统在创建战争时缺少它。

如果没有，请手动将其放在那里，看看是否有效。

**编辑**

行。现在有了更多信息，看起来你正在`servlet-api`参与你的战争。该 jar（以及其中的类）由门户提供（或者，更具体地说，由 servlet 容器提供）。也是如此`portlet-api`。您不应将它们包含在已部署的应用程序中。

`<scope>provided</scope>`检查是否在 pom.xml中指定了这些依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T22:04:25.997

首先尝试从 bundles/tomcat/webapps 取消部署 portlet - 删除 portlet 目录。然后再次部署 portlet。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T13:43:30.840

用 ant 构建项目，创建战争，现在它可以工作了。但也许不使用 ant 就可以做到这一点，只需要使用 IDEA。我需要检查一下。

# java - 如何在 JMenuItem 中调用其他类？

> ID：10066344
> 
> 赞同：0
> 
> 时间：2012-04-08T20:43:57.487
> 
> 标签：java, swing, methods

我得到了一个`JMenuItem`带有起始码的。当我单击一个图标时，如何获得代码将启动的信息？

```
private void jMenuItemActionPerformed(java.awt.event.ActionEvent evt) {   
  String color="blue";
}

private void IconActionPerformed(java.awt.event.ActionEvent evt) {
  // here i dont know how start JmenuItem when i click on it
  get.jMenuItemActionPerformed; 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T23:11:00.920

看起来你还没有`ActionListener`在你的`JMenuItem`. 等待直到在`ActionListener`GUI 组件上执行某些操作（例如单击），然后调用某些代码。例如：

```
JMenuItem myMenuItem = new JMenuItem("Hello");
myMenuItem.addActionListener(new ActionListener()
{
    public void actionPerformed(ActionEvent e)
    {
        System.out.println("Hello button clicked!"); // or call some other method
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T21:50:40.937

我不知道这是正确的方法还是只是一种**解决方法**，但您的菜单项应该在您的主框架中。因此，您可以爬上组件层次结构以获取其容器/父级，直到该类与您的框架类不匹配。一旦可用，您就可以获取其侦听器并触发该事件。

再次，我觉得它是我脑海中突然出现的一种解决方法，你可以让代码运行，直到你得到解决方案。

# javascript - Textarea将符号添加到当前光标指针android

> ID：10066346
> 
> 赞同：0
> 
> 时间：2012-04-08T20:44:45.253
> 
> 标签：javascript, android, html, cordova

我正在尝试在当前指针位置向 textarea 添加文本，这是 PC 的代码，它可以正常工作：

```
function getCursor(input){
    var result = { start: 0, end: 0 };
    if (input.setSelectionRange) {
        result.start= input.selectionStart;
        result.end = input.selectionEnd;
    }
    else if (!document.selection) { return 0; }
    else if (document.selection && document.selection.createRange) {
        var range = document.selection.createRange();
        var stored_range = range.duplicate();
        stored_range.moveToElementText(input);
        stored_range.setEndPoint('EndToEnd', range);
        result.start = stored_range.text.length - range.text.length;
        result.end = result.start + range.text.length; //}
    }
    return(result);
} 
function setCursor(txtarea, start, end){
    if(txtarea.createTextRange) {
        var range = txtarea.createTextRange();
        range.move("character", start);
        range.select();
    } else if(txtarea.selectionStart) {
        txtarea.setSelectionRange(start, end);
    }
}
function superChar(){
    start_tag ='"'
    my_text = $('#codeText').get(0);
    my_text.focus();
    var scrtop = my_text.scrollTop;
    var cursorPos = getCursor(my_text);

    if (cursorPos.start==cursorPos.end) {
        var nuCursorPos=cursorPos.start+start_tag.length;
        my_text.value = my_text.value.substring(0,cursorPos.start) + start_tag + my_text.value.substr(cursorPos.start);
        setCursor(my_text, nuCursorPos, nuCursorPos);
    }
    else {
        var txt_pre=my_text.value.substring (0,cursorPos.start);
        var txt_sel=my_text.value.substring(cursorPos.start, cursorPos.end);
        var txt_aft=my_text.value.substring(cursorPos.end);
        my_text.value = txt_pre + start_tag + txt_sel + end_tag + txt_aft;
        var nuCursorPos=String(txt_pre + start_tag + txt_sel + end_tag).length;
        setCursor(my_text, nuCursorPos, nuCursorPos);
    }
    if (scrtop) my_text.scrollTop=scrtop;
} 
```

但在移动设备（android）上，它总是在文本的第一个字母上添加符号。我用谷歌搜索了它，但没有找到任何结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T21:09:06.043

似乎在 Android 上获得光标选择并不简单。查看此[问题](https://stackoverflow.com/questions/4892111/android-webview-javascript-getselection)以进行更多讨论。

# java - Spring - 在jsp文件上显示图像

> ID：10066349
> 
> 赞同：15
> 
> 时间：2012-04-08T20:45:00.900
> 
> 标签：java, spring, jsp, spring-mvc, jstl

我的模型存储图像用文件名（作为字符串）和数据（作为字节数组）描述。我使用 Hibernate，这是我的模型：

```
@Entity
public class Image {

    private Long id;
    private String name;
    private byte[] data;

    @Id
    @GeneratedValue
    @Column(name = "IMAGE_ID")
    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    @Column(nullable = false, length = 100)
    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    @Lob
    @Column(nullable = false)
    public byte[] getData() {
        return data;
    }

    public void setData(byte[] data) {
        this.data = data;
    }
} 
```

但我想在网站上显示我存储的图像，例如：

```
<img src="${image.data}" alt="car_image"/> 
```

我怎么能那样做？

我应该编写服务图像请求的控制器吗？

任何代码示例？

* * *

更新

```
<bean id="viewResolver"
    class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <property name="viewClass"
        value="org.springframework.web.servlet.view.tiles2.TilesView" />
</bean>

<bean id="tilesConfigurer"
    class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
    <property name="definitions">
        <list>
            <value>/WEB-INF/configs/tiles.xml</value>
        </list>
    </property>
</bean> 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-08T20:51:54.477

你不能这样做。您的图像必须通过普通 URL 以某种方式公开。在 Spring MVC 中创建一个控制器，该控制器在特定 URL 下返回图像（原始数据）：

```
@RequestMapping(value = "/imageController/{imageId}")
@ResponseBody
public byte[] helloWorld(@PathVariable long imageId)  {
  Image image = //obtain Image instance by id somehow from DAO/Hibernate
  return image.getData();
} 
```

现在在您的 JSP 页面中使用它。这就是 HTTP/HTML 的工作方式：

```
<img src="/yourApp/imageController/42.png" alt="car_image"/> 
```

在 3.1 之前的 Spring MVC 中，您可能需要在控制器端进行更多编码。但原理是一样的。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-12-10T02:08:45.223

```
File file = new File("home/user/test.jpg");
FileInputStream fis=new FileInputStream(file);
ByteArrayOutputStream bos=new ByteArrayOutputStream();
int b;
byte[] buffer = new byte[1024];
while((b=fis.read(buffer))!=-1){
   bos.write(buffer,0,b);
}
byte[] fileBytes=bos.toByteArray();
fis.close();
bos.close();

byte[] encoded=Base64.encodeBase64(fileBytes);
String encodedString = new String(encoded);

ModelMap map = new ModelMap();
map.put("image", encodedString); 
```

现在在您的 JSP 页面中使用它，如下所示

```
<img src="data:image/jpeg;base64,${image}" alt="..." width="200" height="200">` 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-09T06:26:55.367

您可能需要查看这篇[文章](https://stackoverflow.com/q/10510416/186896)。我和你有类似的问题，解决方案是将字节数组转换为字符串并在 img 标签中设置，如下所示，

```
 <img src="data:image/jpg;base64,<c:out value='${bean.imageByteArrayString}'/>" /> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-07-24T07:06:43.100

几天来我一直在寻找正确的答案，所以我会为我写一个好的答案：

我的图像已经保存在数据库中：

```
@Entity
@Table(name="PRODUCT")
public class Product {

 @Lob
 @Column(name="IMG")
 private byte[] img;

// setters getters etc
} 
```

现在在我的课堂上，例如 ShowPicture，我必须阅读它：

```
String encodedImage = Base64.encode(product.getImg());
//setters and getters encodedImage 
```

然后我的jsp页面：

```
<img src='data:image/jpg;base64,<s:property value='encodedImage'/>' alt="my image" /> 
```

就那么简单 ！:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-08T16:17:22.513

也许已经晚了，但我在这里留下了一些对我有用的东西，也许有人可以帮忙。

我也在使用 Spring MVC 和 Hibernate

在**模型（实体类）**中创建一个 String 类型的变量，以使用 Base64 将类型 byte 转换为 String。

我为我拥有的带有各自国旗的国家表做了这个，我想要在一个表格中列出所有国家和国家的国旗。

**模型（实体）**

```
import com.sun.org.apache.xerces.internal.impl.dv.util.Base64;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Table;
import javax.persistence.Transient;

@Entity
@Table(name = "country")
public class Country implements java.io.Serializable {

private int id;
private String name;
private byte[] flag;
private String base64; //Variable to store the conversion of a data byte type to String

@Transient //Annotation so it does not persist in the database
public String getBase64() {
    //Convert the data type byte to String, store it in the variable and return it
    return this.base64 = Base64.encode(this.flag); 
}

public void setBase64(String base64) {
    this.base64 = base64;
}

public Country() {
}

public Country(int id, String name, byte[] flag, String base64) {
    this.id = id;
    this.name = name;
    this.flag = this.flag
    this.base64 = this.base64;
}

@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
@Column(name = "id", unique = true, nullable = false)
public int getId() {
    return this.id;
}

public void setId(int id) {
    this.id = id;
}

@Column(name = "name")
public String getName() {
    return this.name;
}

public void setName(String name) {
    this.name = name;
}

@Column(name = "flag")
public byte[] getFlag() {
    return this.flag;
}

public void setFlag(byte[] flag) {
    this.flag = flag;
}

} 
```

**Repository - Implements 是一个接口 - AbstractDao 是一个类 Abstract** import org.springframework.stereotype.Repository; 导入应用程序.model.Country；导入 application.repository.dao.AbstractDao；导入 application.repository.dao.CountryDao；导入 org.hibernate.Criteria；

```
@Repository("countryDao")
public class CountryDaoImpl extends AbstractDao<Integer, Country> implements CountryDao {

@Override
@SuppressWarnings("unchecked")
public List<Country> listCountries() {
    Criteria criteria = createEntityCriteria(); //Country.class
    criteria.setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY);
    List<Country> listCountries = criteria.list();
    return listCountries;
}

} 
```

**服务 - 实现是一个接口**

```
import application.model.Country;
import application.repository.dao.CountryDao;
import application.service.dao.CountryService;
import java.util.List;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

@Service("countryService")
public class CountryServiceImpl implements CountryService {

@Autowired
private CountryDao countryDao;

@Override
@Transactional(readOnly = true)
public List<Country> listCountries() {
    return countryDao.listCountries();
}
} 
```

**控制器**

```
import application.model.Country;
import application.service.dao.CountryService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;

@Controller
@RequestMapping(value = "/countries")
public class CountryController {

@Autowired
private CountryService countryService;

@RequestMapping(value = "/list", method = RequestMethod.GET)
public String ListCountries(Model model) {
    model.addAttribute("listcont", countryService.listCountry());
    return "countries/countries"; //view
}

} 
```

**查看 - countries/countries.jsp**

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>
  <body>
    <h3>List Countries</h3>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Flag</th>
        </tr>
      </thead>
      <tbody>
        <c:forEach items="${listcont}" var="country">
         <tr>
          <td>${country.name}</td>
          <td><img src="data:image/png;base64,${country.base64}" /></
         </tr>
        </c:forEach>
      </tbody>
    </table> 
  </body>
</html> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-09T03:17:54.013

```
byte[] img = yourImgEntity.getData();
response.setContentType("image/*"); 
response.setHeader(HttpHeaders.CACHE_CONTROL, "no-cache");
//spring-core's FileCopyUtils
FileCopyUtils.copy(img, response.getOutputStream());

// or just use codes below instead of FileCopyUtils
//response.getOutputStream().write(img);
//response.getOutputStream().flush();
//response.getOutputStream().close(); 
```

# mysql - 如何计算每半小时的消息数？

> ID：10066354
> 
> 赞同：2
> 
> 时间：2012-04-08T20:45:25.913
> 
> 标签：mysql, sql, time

考虑下表：

```
msg_id  _time
-------------
1       13:32
2       13:56
3       14:05
4       15:00
5       15:17
6       15:28
7       16:40 
```

我目前正在汇总每小时的消息数量，如下所示：

```
SELECT HOUR(_time) AS hour, COUNT(msg_id) AS cnt FROM messages GROUP BY hour 
ORDER BY hour 
```

这会产生如下结果集：

```
hour  cnt
---------
13    2
14    1
15    3
16    1 
```

然而，我想要的是每**半**小时的计数：

```
hour   cnt
----------
13:30  2
14:00  1
14:30  0
15:00  3
15:30  0
16:00  0
16:30  1 
```

使这成为可能的查询是什么？如有必要，我想我可以使用半小时时间（00:00、00:30、01:00、01:30、... 23:00、23:30）来制作一张桌子，但也不喜欢。（而且我仍然不知道如何使用该表）。

任何帮助是极大的赞赏 ：-）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T20:53:21.213

您可以使用`case when`

```
SELECT COUNT(msg_id) AS cnt, CONCAT(CAST(HOUR(_TIME) AS CHAR(2)), ':', (CASE WHEN MINUTE(_time) < 30 THEN '00' ELSE '30' END)) AS hour
FROM messages
GROUP BY CONCAT(CAST(HOUR(_TIME) AS CHAR(2)), ':', (CASE WHEN MINUTE(_time) < 30 THEN '00' ELSE '30' END))
ORDER BY hour 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-08T20:49:34.103

> 我想我可以用半小时的时间（00:00、00:30、01:00、01:30、... 23:00、23:30）制作一张桌子，但也不喜欢。

是的，如果您被迫使用 MySQL，这是正确的解决方案。以另一种方式进行是可能的，但可能会变得混乱并且会更慢。

> （而且我仍然不知道如何使用该表）

使用左连接：

```
SELECT
    halfhours.start AS hour,
    COUNT(*) AS count
FROM halfhours
LEFT JOIN messages
ON messages._time >= halfhours.start AND messages._time < halfhours.end
GROUP BY halfhours.start 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-08T20:51:16.660

尝试以这种方式分组：

```
group by hour(_time), floor(minute(_time)/30) 
```

# javascript - Javascript 不显示带有 display = "block" 的元素

> ID：10066357
> 
> 赞同：1
> 
> 时间：2012-04-08T20:46:05.617
> 
> 标签：javascript, html, css

我`<div>`通过 javascript创建了一个包含`display:hidden;`在其 css 中的内容。我想让它成为一个块元素，但它不会出现。这是我的代码。

```
var fatGooseShop = document.createElement('div');
            fatGooseShop.width = canvas.width / 1.5 + "px";
            fatGooseShop.height = canvas.height / 1.5 + "px";
            fatGooseShop.style.position = "absolute";
            fatGooseShop.style.left = "50%";
            fatGooseShop.style.top = "50%";
            fatGooseShop.style.margin = "-" + (canvas.height / 1.5) / 2 + "px 0px 0px -" + (canvas.width / 1.5) / 2 + "px";
            fatGooseShop.style.backgroundColor = "yellow";
            fatGooseShop.style.display = "none";
function shop()
{
    fatGooseShop.style.display = "block";
} 
```

我从浏览器调用该`shop()`函数来运行它，如果这有所不同的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T21:51:35.157

1.  首先，您需要附加元素

    > ```
    > document.getElementById("test").appendChild(fatGooseShop); 
    > ```

2.  没有内容，您实际上并没有设置块的宽度或高度，因此它不会可见。您需要按如下方式修改您的代码。注意：这将起作用，前提`canvas.width`是返回一个非零值

> ```
> fatGooseShop.style.width = canvas.width / 1.5 + "px";
> fatGooseShop.style.height = canvas.height / 1.5 + "px"; 
> ```

# 这里的例子：

[http://jsfiddle.net/DigitalBiscuits/cqbzw/6/](http://jsfiddle.net/DigitalBiscuits/cqbzw/6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T21:05:07.463

您忘记将其附加到文档中。在您的 JS 文件中，在`//Javascript`.

```
<!--HTML-->
<div id="the-div">

</div>

//Javascript
document.getElementById("the-div").appendChild(fatGooseShop); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T20:49:30.490

您还需要附加元素

```
x=document.getElementById("something");
x.appendChild(fatGooseShop); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-08T20:50:52.137

您使用 createElement 创建元素，但您需要将`appendChild`其添加到 DOM 中的另一个元素，然后它才会出现。完成后，您可以对其进行操作。

# java - 更改字段的本地方法参数？

> ID：10066358
> 
> 赞同：0
> 
> 时间：2012-04-08T20:46:06.647
> 
> 标签：java, method-parameters

假设一个类的职责是为 JDBC 查询设置参数。

它将有一个`fillParameters()`方法和一个 PreparedStatement 作为字段，因为在所有私有子方法之间共享。

此外，这些子方法需要了解当前的 JDBC 参数索引。

因此可以采用两种解决方案：

*   将当前索引作为本地参数传递给每个方法（如果有很多子方法，则为冗余）

*   将当前索引位置声明为字段（或属性），以便无需通过多个方法参数传递它。但缺点是，如果我们想象对这个方法的第二次调用是使用同一个对象实例进行的（出于特定原因，没有真正的用例，但想象一下......），它可能会导致副作用。实际上，在调用由子方法执行的所有进程之前，必须将当前索引位置重新初始化为 0。

什么是最佳实践？

```
public void fillParameters(){
this.currentIndex = 0; //reinitialize to first index !
//....call to each submethods without need to pass currentIndex as local parameter
} 
```

或者 ：

```
public void fillParameters(){
int currentIndex = 0;
//....call to each submethods with currentPosition as index like :
feedFirstParameter(++currentIndex);
feedSecondParameter(++currentIndex);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T21:01:57.217

局部变量选项更好地封装了您的方法如何工作的细节。正如您所指出的，这将更容易维护并且不太可能产生副作用。如果开销成为问题，您可以优化。我不确定是否有*最佳实践*，因为设计取决于对您而言重要的内容。无论哪种方式，最好的办法都是在代码中记录您的推理。

# php - mysql_field_name 进入数组

> ID：10066361
> 
> 赞同：3
> 
> 时间：2012-04-08T20:46:46.437
> 
> 标签：php, mysql

我正在尝试将表中的字段名称与 $_GET 字段名称进行比较，如果它存在于表中，则创建一个查询字符串，如果我像 `$t1 = mysql_field_name($result,1);`它一样单独执行它们但加载它们，我很难将 mysql_field_name 加载到数组中一切`$vars = mysql_field_name($result);`似乎都不起作用。

这个剂量不起作用

```
$query = array();
$result = mysql_query("SELECT * FROM search_prof");
$vars = mysql_field_name($result);

foreach ($vars as $v)
{
    if (isset($_GET[$v]))
    {
        $query[] = $v.' = "'.addslashes($_GET[$v]).'"';
    }
}
$query = implode(' AND ', $query); 
```

这有效

```
$t1 = mysql_field_name($result,1);
$t2 = mysql_field_name($result,2);
$t3 = mysql_field_name($result,3);
$t4 = mysql_field_name($result,4);
$t5 = mysql_field_name($result,5);

    $query = array();
    $result = mysql_query("SELECT * FROM search_prof");
    $vars = array('$t1', '$t2', '$t3', '$t4', '$t5'); 

    foreach ($vars as $v)
    {
        if (isset($_GET[$v]))
        {
            $query[] = $v.' = "'.addslashes($_GET[$v]).'"';
        }
    }
    $query = implode(' AND ', $query); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T21:01:30.023

你应该看看 php 文档： http: [//php.net/manual/de/function.mysql-field-name.php](http://php.net/manual/de/function.mysql-field-name.php)

此函数中的第二个参数不是可选的，因此您必须采用第二种方法。

如果你想让它动态化，你可以使用 mysql_num_field 函数，它给你列数。之后，您可以构建一个循环，该循环迭代了这么多次，每次调用 mysql_field_name 函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T21:08:13.810

如果您想让当前的方法发挥作用，我想您可以执行以下操作：

```
//Get fields in table
$numberOfFields = mysql_num_fields($result) - 1;

$fields = array();
for ($i = 0; $i <= $numberOfFields; $i++) {
    $fields[] = mysql_field_name($result, $i);
}

//Intersect
$parameters = array_intersect(array_keys($_GET), $fields);

//Query
$q = array();
foreach($parameters as $parameter) {
    $q[] = $v . '="' . addslashes($_GET[$parameter]) . '"';
}

$q = implode(" AND ", $q); 
```

您也可以尝试在表上运行 DESCRIBE 查询并解析这些结果，但不知道 DESCRIBE 的性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T21:09:03.517

你可以使用这样的东西来获取字段。

```
$query = array();
$result = mysql_query("SELECT * FROM search_prof");
$numFields = mysql_num_fields($result);
$vars = array();
for ( $i = 0; $i < $numFields; $i++ )
    $vars[] = mysql_field_name($result, $i);

foreach ($vars as $v)
{
    if (isset($_GET[$v]))
    {
        $query[] = $v.' = "'.addslashes($_GET[$v]).'"';
    }
}
$query = implode(' AND ', $query); 
```

# c - 类似于 R 的 C 概率库

> ID：10066362
> 
> 赞同：3
> 
> 时间：2012-04-08T20:46:48.517
> 
> 标签：c, r, statistics

有谁知道一个 C 库，它有一些标准概率函数，比如`R`s 样本函数？我找到了这个：

[http://www.gnu.org/software/gsl/](http://www.gnu.org/software/gsl/)

我想知道是否有人对此有任何经验（它的效率如何）以及是否还有其他经验。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-08T21:48:08.853

您始终可以将 R 本身嵌入到您的 C 应用程序中。这是可行的，并且有文档记录，但有点乏味，因为 API 非常简单。

[如果您对 C++ 持开放态度，多亏了RInside](http://dirk.eddelbuettel.com/code/rinside.html)，它会变得容易得多。如果你可以在 R 中做到这一点：

```
R> set.seed(123); sample(LETTERS[1:5], 10, replace=TRUE)
 [1] "B" "D" "C" "E" "E" "A" "C" "E" "C" "C"
R> 
```

多亏了[RInside](http://dirk.eddelbuettel.com/code/rinside.html) ，你可以很容易地在 C++ 中做同样的事情：

```
edd@max:~/svn/rinside/pkg/inst/examples/standard$ cat rinside_sample12.cpp
// Simple example motivated by StackOverflow question on using sample() from C
//
// Copyright (C) 2012  Dirk Eddelbuettel and Romain Francois

#include <RInside.h>                    // for the embedded R via RInside

int main(int argc, char *argv[]) {

  RInside R(argc, argv);                // create an embedded R instance

  std::string cmd = "set.seed(123); sample(LETTERS[1:5], 10, replace=TRUE)";

  Rcpp::CharacterVector res = R.parseEval(cmd);   // parse, eval + return result 

  for (int i=0; i<res.size(); i++) {
    std::cout << res[i] << " ";
  }
  std::cout << std::endl;

  exit(0);
}

edd@max:~/svn/rinside/pkg/inst/examples/standard$ 
```

并且鉴于它*使用相同的 RNG 种子运行相同的代码，*它也返回相同的结果：

```
edd@max:~/svn/rinside/pkg/inst/examples/standard$ ./rinside_sample12
B D C E E A C E C C 
edd@max:~/svn/rinside/pkg/inst/examples/standard$ 
```

如果您只是将上面显示的代码放到`examples/standard`现有 RInside 安装的目录中并说`make`，可执行文件将被制作并与您的源文件（此处`rinside_sample12`来自`rinside_sample12.cpp`）具有相同的基本名称。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T21:03:56.357

谷歌搜索`C statistics library`，让我在 GSL 中获得了一些不错的成绩。另请参阅[此 SO question](https://stackoverflow.com/questions/1777503/best-stats-library-for-c-not-c)以获取更多提示。但是，我认为您最好的选择是将 R 集成到您的 C 代码中。您可以通过两种方式做到这一点：

*   通过系统调用调用 R。这是一个非常简单但有效的选择。尤其是当 R 和 C 之间没有大量数据来回传输时，这非常有效。例如，从 Python 中调试 R 代码非常困难。
*   在 C 中创建到 R 会话的直接连接表单。当有大量数据在 R 和 C 之间来回传输时，这非常有效，因为所有数据都通过内存而不是磁盘。然而，我预测它会比第一个解决方案更难编写。从更多信息中查看[此 SO 帖子。](https://stackoverflow.com/questions/2463437/r-from-c-simplest-possible-helloworld)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T03:12:24.913

你看过元数字吗？它主要是一个统计库。开源，c#。

# php - array_walk 一个匿名函数

> ID：10066364
> 
> 赞同：30
> 
> 时间：2012-04-08T20:47:02.357
> 
> 标签：php

有没有一种方法可以让这个数组使用我的匿名函数来设置值？

```
$url = array('dog', 'cat', 'fish');

array_walk($url, function(&$value, &$key) {
    $url[$key] = str_replace('dog', '', $value);
});

echo '<pre>';
print_r($url);
echo '</pre>'; 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-04-08T20:48:46.160

您已经[通过引用传递值](http://php.net/manual/en/language.references.pass.php)，因此只需执行以下操作：

```
array_walk($url, function(&$value, &$key) {
    $value = str_replace('dog', '', $value);
}); 
```

# macos - OSX 错误通过 macports 安装 subversion

> ID：10066370
> 
> 赞同：3
> 
> 时间：2012-04-08T20:47:25.817
> 
> 标签：macos, svn, macports

我正在尝试安装 subversion 1.7.2（从默认的 Lion 版本升级，1.6？）。
运行`sudo port install subversion`安装成功完成但是我在运行“svn --version”时收到此错误

`$ svn --version
dyld: Library not loaded: /opt/local/lib/libexpat.1.dylib
Referenced from: /opt/local/bin/svn
Reason: Incompatible library version: svn requires version 8.0.0 or later, but libexpat.1.dylib provides version 7.0.0
Trace/BPT trap: 5`

如何升级 libexpat 库以安抚 SVN？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-08T22:43:52.220

当前 MacPorts 版本的 libexpat 应该是 8 版。确保您没有安装其他版本`libexpat`的`/usr/local`; 有时会干扰 Port 构建和安装。然后更新、清理并重新安装`expat`和`subversion`端口：

```
sudo port selfupdate
sudo port clean expat subversion
sudo port -n upgrade --force expat subversion 
```

# php - 更改主页上的日期格式，wordpress？

> ID：10066371
> 
> 赞同：0
> 
> 时间：2012-04-08T20:47:25.990
> 
> 标签：php, wordpress, date-format

这是我网页上日期格式的 php 代码

```
 function starkers_posted_on() {
    printf( __( 'Posted on %2$s by %3$s', 'starkers' ),
        'meta-prep meta-prep-author',
        sprintf( '<a href="%1$s" title="%2$s" rel="bookmark"><time datetime="%3$s" pubdate>%4$s</time></a>',
            get_permalink(),
            esc_attr( get_the_time() ),
            get_the_date('Y-m-d'),
            get_the_date()
        ),
        sprintf( '<a href="%1$s" title="%2$s">%3$s</a>',
            get_author_posts_url( get_the_author_meta( 'ID' ) ),
            sprintf( esc_attr__( 'View all posts by %s', 'starkers' ), get_the_author() ),
            get_the_author()
        )
    );
} 
```

它给了这个

```
 Posted on <a href="#" title="23:50" rel="bookmark">
       <time datetime="2012-03-31" pubdate="">March 31 2012</time>
       </a> by <a href="#" title="View all posts by me">me</a> 
```

我想要的是仅在主页上将月份、日期和年份分别包装在 div 中：

```
<div class="month">March</div>
<div class="date">31</div>
<div class="year">2012</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T20:51:48.030

您可以通过将格式字符串参数传递给`get_the_date()`函数来执行此操作，如下所示：

你可以这样做：

```
sprintf('<div class="month">%s</div>', get_the_date('F'));
sprintf('<div class="date">%s</div>', get_the_date('j'));
sprintf('<div class="year">%s</div>', get_the_date('Y')); 
```

**更新**

或者像这样在你的 index.php 文件中（来自你的主题文件夹）：

```
<div class="month"><?php get_the_date('F'); ?></div>
<div class="date"><?php get_the_date('j'); ?></div>
<div class="year"><?php get_the_date('Y'); ?></div> 
```

这里使用的格式字符串如下：

*   `F`= 月（作为一个词）
*   `j`= 月份中的日期（数字）
*   `Y`= 年（4 位数字）

[在此处查看文档](http://codex.wordpress.org/Formatting_Date_and_Time)。

# python - map和dict的区别

> ID：10066374
> 
> 赞同：35
> 
> 时间：2012-04-08T20:47:35.210
> 
> 标签：python, map, hashmap

我可能`hashmap`对 Java 和Python 中的`map`/感到困惑。 我认为 Java 的(k/v 抽象) 与Python中的相同`dict`
`hash``dict`

但是`map`数据类型有什么作用呢？

它和 hashmap 抽象是同一个抽象吗？如果是这样，那么它与字典有何不同？
我浏览了文档，但它把我带到了不同的范式：函数式编程。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-08T20:50:28.793

[Map](http://docs.python.org/library/functions.html#map)不是 python 中的数据类型。它将函数应用于一系列值并返回结果。

```
>>> def f(x):
...     return x**2
... 
>>> list(map(f, range(5)))
[0, 1, 4, 9, 16] 
```

通常对于像“pythonic”这样的简单情况，我们使用列表推导。

```
>>> [x**2 for x in range(5)]
[0, 1, 4, 9, 16] 
```

您对哈希图和字典的比较是正确的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-08T20:51:30.157

本质上`Map`，Java 中的 a`dict`与 Python 中的 a 类似：两种数据结构都在键和值之间创建关联，并且对于`get()`and`contains()`操作具有预期的 O(1) 性能。

Java 中的`Map`数据结构不应与[`map()`](http://docs.python.org/library/functions.html#map)Python 中的函数混淆：

> 地图（函数，可迭代，...）
> 
> 将函数应用于可迭代的每个项目并返回结果列表。如果传递了额外的可迭代参数，则函数必须接受那么多参数并并行应用于所有可迭代的项目

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-28T19:58:55.360

[Nolen 的答案](https://stackoverflow.com/a/10066393/1048186)是针对 Python 2。

**在 Python 3**中，map 是一个可迭代的数据类型，相当于 Python 2 中 itertools 的 imap 返回的数据类型。

要在 Python 3 中获得与上面第一个 Python 2 示例相同的结果，您可以编写：

```
>>> def f(x):
...     return x**2
... 
>>> list(map(f, range(5)))

[0, 1, 4, 9, 16] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-08T20:51:26.810

python中没有地图数据类型。map 是将函数映射到序列的函数。

```
def increment(n):
    return n+1
l = [1,2,3]
map(increment, l) 
```

会给你一个新的列表 [2,3,4]

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-13T17:26:11.180

**在 Python 3**中，map 返回一个可迭代的数据类型，相当于 Python 2 中 itertools 的 imap 返回的数据类型。

要在 Python 3 中获得与[Nolan Royalty 的](https://stackoverflow.com/a/10066393/1048186)Python 2 示例相同的结果，您可以编写：

```
>>> def f(x):
...     return x**2
... 
>>> list(map(f, range(5)))

[0, 1, 4, 9, 16] 
```

如果您不在 Python 3 中将其包装在列表中，您将获得一个地图对象：

```
>>> map(f, range(5))
... <map object at 0x000000000327E780> 
```

因此，在 Python 3 中有可迭代**的**地图对象。

# python - 在公司 Intranet 上使用 Django 网站

> ID：10066380
> 
> 赞同：2
> 
> 时间：2012-04-08T20:48:33.260
> 
> 标签：python, django, intranet

我在办公室的 IT 服务台工作了几个月，最近我的老板问我是否可以开发一个小应用程序供几个员工使用。

将 Django 与 Python 一起使用过几次后，我觉得以这种方式开发它是一个好主意，并且认为一个好主意是在公司的一台服务器上运行应用程序并使用内部地址访问它。服务器是 Windows Server 2003/2008。

实现这一目标有多容易？除了 Python 之外，还必须在托管应用程序/站点的服务器上安装什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T20:53:40.843

很简单：[https ://docs.djangoproject.com/en/dev/howto/deployment/](https://docs.djangoproject.com/en/dev/howto/deployment/)

但是，由于您所在的位置是 Windows 商店，因此可能值得评估 ASP.net MVC，尤其是如果它已经在使用中。

完成研究后，请与在您的工作地点管理服务器的任何人交谈，看看您的计划是否符合您公司的现有标准。

不要忘记备份和内部 DNS。

# jquery - jQuery 循环复杂化

> ID：10066383
> 
> 赞同：1
> 
> 时间：2012-04-08T20:48:57.673
> 
> 标签：jquery, cycle, carousel

我已经玩过并实现了 JQuery 循环来创建带有图像的轮播，但目前还没有 HTML 内容。根据页面底部的演示，我知道它可以与 HTML 一起使用

[http://malsup.com/jquery/cycle/int2.html](http://malsup.com/jquery/cycle/int2.html)

但由于它将子 DIVS 单独解析为单独的幻灯片，因此 HTML 内容不能包含任何 DIVS。有没有使用 DIV 以外的东西在 DIV 中定位内容的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T21:06:44.367

如果您查看[选项页面](http://malsup.com/jquery/cycle/options.html)，您将看到一个`slideExpr`带有注释“用于选择幻灯片的表达式（如果需要除所有子项之外的其他内容）”的条目。因此，您可以为所有顶级幻灯片容器提供一个类（`slide`例如），然后将其传入：

```
$('#slideshow').cycle({ slideExpr: '.slide' }); 
```

虽然看起来默认是“所有孩子”，但即使在默认设置下，子 div 也不应该成为问题。[源代码](http://malsup.github.com/jquery.cycle.all.js)证实了这一点：

```
var $cont = $(this);
var $slides = opts.slideExpr ? $(opts.slideExpr, this) : $cont.children(); 
```

如果你传入一个幻灯片表达式，它会使用它，否则它会使用`children()`，它只会向下导航一个级别。

# javascript - 如何即时更新订单的价格（html/javascript）

> ID：10066386
> 
> 赞同：0
> 
> 时间：2012-04-08T20:49:34.757
> 
> 标签：javascript, xhtml

所以我需要做的是让我的表格立即更新它的价格。当您单击检查按钮时，教授提供的验证器会进行检查，它会自动填写空白并选择价格和尺寸（仅一种尺寸）。

这是xhtml：

```
<select name='shirts' size='2'  onchange='calculateItemPrice()'>
    <option value='Shirts Size'> Shirt Size</option>
    <option value='Small'>Small Shirt</option>
    <option value='Medium'>Medium shirt</option>
    <option value='Large'>Large shirt</option>
    <option value='xLarge'>xLarge shirt</option>
</select> 
```

*问题*出在这里：如果我点击检查小尺寸，使用验证器，它会填写表格上的所有空白并自动选择小衬衫......但价格不会更新。但是，如果我单击教授网站上的任何其他检查按钮（检查中/大/xLarge），它会填写所有内容并选择适当的尺寸并更新价格。所以我的问题似乎只与小尺寸有关。

如果用户手动选择尺寸，现在计算功能（由教授提供）起作用。

我不知道我是否需要对 HTML 或我的 javascript 中的 select 函数做某事，这是代码（之前有人在这里问了一个问题，解决了我的问题，但问题已被删除，所以我不知道是否我犯了一个错误）

```
function validatefield05(errMessages)
{

   if(document.sizes.shirts.selectedIndex ==0)        
      {
        errMessages +="<li class='b1'>You must Select a Size</li>\n";
      }

    if(!document.sizes.shirts.value)     
      {
        errMessages +="<li class='b1'>You must Select a Size</li>\n";
      }
   return errMessages;
} 
```

我尝试将 ==0 设置为 1/2 等，但这会导致无法选择其中一个选项。

任何想法和/或建议将不胜感激。

***这不是一个作业，只是一个练习下周考试的练习***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T20:53:51.560

您的代码适用于更改，因此您可能只需要添加一个默认选项：

```
<select name='sizes' size='2'  onchange='calculateItemPrice()'>
    <option value=""> Choose size </option>  <=========
    <option value='Shirts'> Shirt Size</option>
    <option value='Small'>Small Shirt</option>
    <option value='Medium'>Medium shirt</option>
    <option value='Large'>Large shirt</option>
    <option value='xLarge'>xLarge shirt</option>
</select> 
```

**[现场演示](http://jsfiddle.net/L9fLT/1)**

# iphone - UITableViewController 背景图片

> ID：10066387
> 
> 赞同：9
> 
> 时间：2012-04-08T20:49:36.700
> 
> 标签：iphone, objective-c, xcode, xcode4, xcode4.2

如何设置图像`UITableViewController`？

我已经使用了很多东西，但它并没有帮助我将图像设置为背景

```
UIImageView* bgView = [[[UIImageView alloc] initWithImage:
[UIImage imageNamed:@"Default.png"]] autorelease];

[tableView.backgroundView addSubview:bgView]; 
```

还有这个

```
[[self view] setAutoresizesSubviews:NO];

UIView *backgroundView = [[UIView alloc] initWithFrame:self.view.frame];
backgroundView.backgroundColor = 
  [UIColor colorWithPatternImage:
    [UIImage imageNamed:@"Default.png"]];

self.tableView.backgroundView = backgroundView;
self.tableView.backgroundColor = [UIColor clearColor];

[backgroundView release]; 
```

和

```
self.navigationController.view.backgroundColor = 
  [UIColor colorWithPatternImage:
    [UIImage imageNamed:@"myImage.png"]];
self.tableView.backgroundColor = [UIColor clearColor]; 
```

没有一个对我有用。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-08T20:58:02.513

设置`background`填充模式

```
[youTable setBackgroundView:
  [[UIImageView alloc] initWithImage:
    [UIImage imageNamed:@"bg.png"]]]; 
```

设置`background`模式图块

```
[youTable setBackgroundColor:
  [UIColor colorWithPatternImage:
    [UIImage imageNamed:@"bg.png"]]]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-08T21:00:11.287

```
UIImage *image = [UIImage imageNamed:@"image.png"];
UIImageView *imageView = [[UIImageView alloc] initWithImage:image];

UITableView *tableView = (UITableView*)tableViewController.view;
tableView.backgroundView = imageView;
[imageView release]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-12T06:08:23.430

这对我有用：

```
tableView.backgroundView = 
  [[UIImageView alloc]initWithImage:
    [[UIImage imageNamed:@"background.png"] stretchableImageWithLeftCapWidth:0.0 
                                            topCapHeight:5.0]]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-08T21:05:36.943

如果上述所有建议都不起作用，就这样做（我*一直*使用的方法）：

1.  创建一个 UIViewController 子类。
2.  在 viewDidLoad 添加 UIImageView 和 UITableView 作为子视图。
3.  配置 tableView 并实现委托方法。在 imageView 中设置背景图片。

我认为为 tableView 设置 backgroundView 可能会导致图形错误（为每个单元格重复图像），所以这就是我使用此处描述的方法的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-08T21:00:28.443

您可以将 tableviews 背景视图设置为 UIImageView 实例（属性`backgroundView`）`UITableView`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-09T04:27:06.067

以下代码对我来说效果很好。您可以尝试以下代码：-

```
UIImageView *bgView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Default.png"]];
bgView.frame = self.view.frame;
self.tableView.backgroundColor = [UIColor clearColor];
self.tableView.backgroundView = bgView;
[bgView release]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-15T07:52:29.637

我也无法设置`backgroundColor`of`UITableView`因为它是一个`UITableViewController`，我的问题由此解决

```
[self.tableView setBackgroundView:
  [[UIImageView alloc] initWithImage:
    [UIImage imageNamed:@"bg.png"]]]; 
```

正如“白虎”所建议的那样。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-07-04T15:44:14.063

这对我有用：

```
self.tableView.backgroundView = nil;
self.tableView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"bg2.png"]]; 
```

或者

```
[self.tableView setBackgroundView:nil];
[self.tableView setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"bg2.png"]]]; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-09-18T15:31:07.807

更新 Swift 4

我遇到的问题是我想向 UITableViewController 添加一个按钮和一个背景图像。我成功添加了按钮，但是每次添加图像容器时，它都会替换按钮而不是在按钮下方添加它。因此，为了获得两者，我在 ViewWillAppear 函数中添加了以下内容：

```
override func viewWillAppear(_ animated: Bool) {
    super.viewWillAppear(animated)

    // Add a background view to the table view
    let backgroundImage = UIImage(named: "carbonfiber1.png")
    let imageView = UIImageView(image: backgroundImage)
    self.tableView.backgroundView = imageView
} 
```

# python - django 管理站点

> ID：10066397
> 
> 赞同：1
> 
> 时间：2012-04-08T20:51:03.250
> 
> 标签：python, django, django-admin

我已经安装了 django 并且似乎正在工作 [它的工作页面](http://ec2-107-20-20-19.compute-1.amazonaws.com)

我想启用管理页面，但不工作，[它显示“它工作”页面]

> [http://ec2-107-20-20-19.compute-1.amazonaws.com/admin/](http://ec2-107-20-20-19.compute-1.amazonaws.com/admin/)

我有：取消注释 settings.py 中管理应用程序的行，

```
# Django settings for micopiloto project.

DEBUG = True
TEMPLATE_DEBUG = DEBUG

ADMINS = (
    # ('Your Name', 'your_email@example.com'),
)

MANAGERS = ADMINS

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'postgresql', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'thadb',                      # Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
}

# Local time zone for this installation. Choices can be found here:
# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
# although not all choices may be available on all operating systems.
# On Unix systems, a value of None will cause Django to use the same
# timezone as the operating system.
# If running in a Windows environment this must be set to the same as your
# system time zone.
TIME_ZONE = 'America/Chicago'

# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'en-us'

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True

# If you set this to False, Django will not format dates, numbers and
# calendars according to the current locale
USE_L10N = True

# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/media/"
MEDIA_ROOT = ''

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
MEDIA_URL = ''

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = ''

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/'

# URL prefix for admin static files -- CSS, JavaScript and images.
# Make sure to use a trailing slash.
# Examples: "http://foo.com/static/admin/", "/static/admin/".
ADMIN_MEDIA_PREFIX = '/static/admin/'

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

# Make this unique, and don't share it with anybody.
SECRET_KEY = '2&g_&k=+^(0t)1xf82m^=#0u6v1e!)nn7ixq*+2^h%4$mwlrsm'

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
#     'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
)

ROOT_URLCONF = 'micopiloto.urls'

TEMPLATE_DIRS = (
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
    'portfolio' 
)

# A sample logging configuration. The only tangible logging
# performed by this configuration is to send an email to
# the site admins on every HTTP 500 error.
# See http://docs.djangoproject.com/en/dev/topics/logging for
# more details on how to customize your logging configuration.
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
} 
```

并取消注释 urls.py 中的必要行

```
from django.conf.urls.defaults import patterns, include, url

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    # Examples:
    url(r'^$', 'micopiloto.views.home', name='home'),
    # url(r'^micopiloto/', include('micopiloto.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls)),
) 
```

那么我想拥有我的管理页面是什么？

谢谢！

编辑：python.VERSION = (1, 3, 0, 'final', 0)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T20:56:36.490

Django 在加载您的 urls 文件时遇到问题（这就是它认为您没有配置任何 urls 的原因）。

从您的`INSTALLED_APPS`看来，您的*网站*名为`micopiloto`，而不是您的应用程序 - 您确定这`micopiloto.views.home`是您查看视图的正确路径吗？

如果您已经创建了一个应用程序，请确保您的网址指向该应用程序，而不是网站；如果您还没有创建应用程序，您应该先创建应用程序。

# linux - 如何使用 shell 脚本创建 MPlayer 播放列表？

> ID：10066398
> 
> 赞同：5
> 
> 时间：2012-04-08T20:51:05.000
> 
> 标签：linux, mplayer

我正在尝试在 Linux 中创建一个 shell 脚本，执行该脚本时会在目录中搜索所有媒体文件，然后创建一个播放列表并使用 MPlayer 播放它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-09T05:32:14.353

使用此命令：

```
find /PATH/TO/MUSIC/DIRECTORY/ -type f -iname "*.mp3" > playlist.m3u 
```

现在玩 mplayer ：

```
mplayer -playlist playlist.m3u 
```

# android - Facebook developer for android 上的几个查询

> ID：10066408
> 
> 赞同：0
> 
> 时间：2012-04-08T20:51:54.767
> 
> 标签：android, facebook

我有一个 android 应用程序，它使用启用无线的健康传感器从 android 设备进行监控。因为，我对 Web 和 Facebook 应用程序开发都是新手，所以我想知道我是否可以：

1.  使用 Facebook 作为平台（不使用任何其他网站），将所有健康数据从移动设备直接发送到 Facebook。

2.  使用从移动设备接收的这些数据，并根据这些数据绘制图形、图表并向朋友发送通知。

3.  我想在 Facebook 上做所有事情。我需要使用哪种编程语言？

因为，我是菜鸟，请原谅我。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T22:18:02.717

我不能说我明白你在追求什么，我会尽我所能/理解地回答：

1.  当然，您可以从任何具有互联网连接的设备向 facebook 发送数据，但是发送到 facebook 的数据正在与他人共享，它不是托管服务，整个目的是与朋友共享数据。那是你要的吗？

2.  如果您需要对数据进行计算和执行计算，那么您可能（如果计算不是很简单）需要在您自己的服务器上执行此操作，然后您可以创建这些图表并将它们呈现在 facebook 应用程序中。

3.  定义“在 facebook 中做事”。Facebook 确实托管您的应用程序，您需要拥有自己的服务器来托管您的文件，即使您的应用程序是完全静态的，也就是 html/js/css/images，您仍然需要在某个地方托管。Facebook 只是您的应用程序的一个接口。

我希望我对此有所帮助并使您更清楚，如果您仍有需要/想了解的内容，请更好地解释您的情况。

# android - jtwitter 库：连接到替代服务失败

> ID：10066421
> 
> 赞同：0
> 
> 时间：2012-04-08T20:53:52.247
> 
> 标签：android, multithreading, twitter

> **编辑**
> 
> 天哪，我显然应该休息一下...... logcat 给出了这些错误，并且似乎也执行了 catch 块，但消息实际上是发送的，正如我通过访问页面验证的那样：http: [//yamba.marakana.com/](http://yamba.marakana.com/)
> 
> 实际上，我花了 2 个小时才知道的一件事.. 有人可以告诉我为什么该应用程序还想连接到 twitter 吗？

我正在关注 MarakanaTechTV 的本教程：[https ://www.youtube.com/watch?v=-P1eiRy-klk&feature=relmfu](https://www.youtube.com/watch?v=-P1eiRy-klk&feature=relmfu)

它是关于构建一个类似 twitter 的客户端，但为简单起见（避免 OAuth），它使用位于此处的自己的服务：http: [//yamba.marakana.com/](http://yamba.marakana.com/)用户名是学生，密码是密码。

这是我的代码：

```
 public void onClick(View v) {
    final String statusText = editStatus.getText().toString();

    //zeitkritische Aufgaben wie z.b. networking oder DB Zugriff dürfen nicht im main-thread laufen
    //App crashed sonst
    new Thread() {
        public void run() {
            try {                   
                Twitter twitter = new Twitter("student", "password");
                twitter.setAPIRootUrl("http://yamba.marakana.com/api");
                twitter.setStatus(statusText);
            } catch (Exception e) {
                Log.e("error", "DIED", e);
                //e.printStackTrace(e);

            }
        }
    }.start();

    Log.d("StatusActivity", "onClicked! with text: " + statusText);
}
} 
```

这是logcat给我的：

> 04-08 20:48:14.329：D/gralloc_goldfish(1935)：没有检测到 GPU 仿真的仿真器。04-08 20:48:17.019: D/StatusActivity(1935): onClicked！带文字：ggfdg 04-08 20:48:23.308: D/StatusActivity(1935): onClicked！带文字：ggfdg 04-08 20:48:24.438: E/error(1935): DIED 04-08 20:48:24.438: E/error(1935): winterwell.jtwitter.TwitterException$E401: Unauthorized [http:// twitter.com/account/rate_limit_status.json](http://twitter.com/account/rate_limit_status.json)(学生) 04-08 20:48:24.438: E/error(1935): at winterwell.jtwitter.URLConnectionHttpClient.processError(URLConnectionHttpClient.java:125) 04-08 20:48:24.438: E/error(1935):在 winterwell.jtwitter.URLConnectionHttpClient.getPage(URLConnectionHttpClient.java:91) 04-08 20:48:24.438: E/error(1935): 在 winterwell.jtwitter.URLConnectionHttpClient.processError(URLConnectionHttpClient.java:143) 04-08 20 :48:24.438: E/error(1935): at winterwell.jtwitter.URLConnectionHttpClient.post(URLConnectionHttpClient.java:219) 04-08 20:48:24.438: E/error(1935): at winterwell.jtwitter.Twitter。发布(Twitter.java:1944) 04-08 20:48:24.438: E/error(1935): at winterwell.jtwitter.Twitter.updateStatus(Twitter.java:2555) 04-08 20:48:24.438: E/错误（1935）：在 winterwell.jtwitter.Twitter.updateStatus（Twitter.java:2502）04-08 20:48:24.438：E/错误（1935）：在 winterwell.jtwitter.Twitter.setStatus(Twitter.java:2274) 04-08 20:48:24.438: E/error(1935): 在 com.example.yamba.StatusActivity$1.run(StatusActivity.java:34)

尽管由于这条线，它应该连接到 marakana 服务，但似乎该应用程序试图连接到 twitter：

```
twitter.setAPIRootUrl("http://yamba.marakana.com/api"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:34:27.643

我也面临同样的问题。我的错误是我忘记从 catch 块中删除 Toast 的代码

# c# - Silverlight 中的 WCF 重新连接

> ID：10066424
> 
> 赞同：1
> 
> 时间：2012-04-08T20:54:17.093
> 
> 标签：c#, .net, wcf, silverlight

我正在**Silverlight**中实现 WCF 服务代理 (NetTcpBinding) 的重新连接机制。服务的操作由计时器并行调用。实现非常简单（[就像这里](http://setus.blogspot.com/2009/06/how-to-reconnect-to-wcf-service-after.html)），但是我的应用程序失败时出现异常：

```
Uncaught Error: Unhandled Error in Silverlight Application 
Code: 4004    
Category: ManagedRuntimeError       
Message: System.NullReferenceException: Object reference not set to an instance of an object.
at System.Net.Sockets.SocketAsyncEventArgs.FinishOperationAsyncFailure(Exception exception, Int32 bytesTransferred, SocketFlags flags)
at System.Net.Sockets.Socket.DoResolve(DnsEndPoint dnsep, SocketAsyncEventArgs usersArgs)
at System.Net.Sockets.Socket.StaticResolveCallback(Object args)
at System.Threading.QueueUserWorkItemCallback.WaitCallback_Context(Object state)
at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
at System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem()
at System.Threading.ThreadPoolWorkQueue.Dispatch()
at System.Threading._ThreadPoolWaitCallback.PerformWaitCallback() 
```

有谁知道问题的根源是什么以及如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T10:43:35.023

我使用了服务器的 dns 名称。结果，当我下次连接时，WCF 核心正在尝试解析 dns-name，如果 dns 不可用，wcf 核心会抛出 SocketException：

```
 System.Net.dll!System.Net.Dns.GetAddrInfo(string name = "myhost.com") + 0x200 bytes 
    System.Net.dll!System.Net.Dns.InternalGetHostByName(string hostName, bool includeIPv6) + 0x90 bytes 
    System.Net.dll!System.Net.Sockets.Socket.DoResolve(System.Net.DnsEndPoint dnsep, System.Net.Sockets.SocketAsyncEventArgs usersArgs = {System.Net.Sockets.SocketAsyncEventArgs}) + 0x72 bytes    
    System.Net.dll!System.Net.Sockets.Socket.StaticResolveCallback(object args) + 0x6f bytes    
    mscorlib.dll!System.Threading.QueueUserWorkItemCallback.WaitCallback_Context(object state) + 0x3d bytes 
    mscorlib.dll!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state, bool ignoreSyncCtx) + 0x97 bytes    
    mscorlib.dll!System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem() + 0x5b bytes 
    mscorlib.dll!System.Threading.ThreadPoolWorkQueue.Dispatch() + 0x199 bytes  
    mscorlib.dll!System.Threading._ThreadPoolWaitCallback.PerformWaitCallback() + 0x5 bytes 
```

并且 wcf 核心变为无效状态。当调用某些操作时，wcf-core 会失败，如问题中所述。

**使用 ip 地址（不是 dns 名称）进行 tcp 绑定**

# bash - 为什么 mv 在这个 bash 脚本中起作用？

> ID：10066425
> 
> 赞同：0
> 
> 时间：2012-04-08T20:54:32.067
> 
> 标签：bash, shell, mv

我正在尝试编写一个简单的脚本，如果缺少一个，它将移动目录中顺序文件列表中的文件。例如，如果我有一个包含名为“1”、“2”、“3”、“5”等文件的目录，我想将“3”移动到“4”，将“3”移动到“2”等.我有下面的代码。Upper 和 Lower 对应于我要转换的值。使用上面的示例，LOWER 为 1，UPPER 为 5。

```
 for z in $( eval echo {$UPPER..$LOWER}) ; do          
      checkfile $DIRNAME $z #Returns -1 on file missing
      if [[ $? -ne 0 ]]; then
           echo "Found bad match"
           for y in $( eval echo {$z..$LOWER}) ; do
                n=$(($y - 1))
                echo "$y $n"
                mv "$n" "$y"
           done
           exit 0
      fi  
 done 
```

我收到以下输出

```
Found bad match
18 17
mv: cannot stat `17': No such file or directory
17 16
mv: cannot stat `16': No such file or directory
16 15
mv: cannot stat `15': No such file or directory
15 14
mv: cannot stat `14': No such file or directory 
```

我不太清楚为什么 mv 抱怨。任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T20:57:38.440

您的`mv`命令正在尝试移动本地目录中的文件，但您正在检查的文件位于其他位置（在 中`$DIRNAME`）。也许试试`mv "$DIRNAME/$n" "$DIRNAME/$y"`？

# ios - 移动 uiimageview 动画

> ID：10066428
> 
> 赞同：7
> 
> 时间：2012-04-08T20:55:12.067
> 
> 标签：ios, iphone, image, ipad, uiimage

我怎么能`UIImage`在 20 秒内从屏幕底部移动到屏幕顶部（大约每秒 35 像素）我不是说你应该自己拖动它，但它应该会自动移动到顶部。谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-08T21:09:02.540

首先，[苹果文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)是你的朋友。我在这里给你的所有信息都来源于此。Apple 还提供了很多示例代码，你一定要看看它。

您可以（轻松）完成此操作的方法是使用 UIView 动画。假设您的图像有一个 UIImageView，您可以使用该`animateWithDuration:(NSTimeInterval)duration animations:...`方法。

例如：

```
[UIView animateWithDuration:10.0f animations:^{
    //Move the image view to 100, 100 over 10 seconds.
    imageView.frame = CGRectMake(100.0f, 100.0f, imageView.frame.size.width, imageView.frame.size.height);
}]; 
```

您可以通过向动画添加越来越多的选项、获得完成块等来变得更漂亮。这一切都是通过 'animateWithDuration' 方法的变体来实现的。那里有大量关于 UIView 动画的教程和大量文档。

如果您不想使用块（上面的 ^{ ...code...} 位），您可以像这样运行动画：

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:10.0f];
imageView.frame = ...
[UIView commitAnimations]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T21:11:02.627

如果我理解它，您可以为自己的对象制作动画，在这种情况下尝试 beginAnimation

```
...
initial position

[UIView beginAnimation];
[UIView setAnimationDuration:dim/35.];
[UIView setAnimationCurve:[UIViewAnimationCurveLinear];

your animation

[UIView commitAnimations];
... 
```

用这个计算 dim/35 计算第二位让你的动画 35px / s

# jsp - 在 Windows 和 Linux（Ubuntu 等）中设计友好的 JSP/Servlet Web 开发

> ID：10066431
> 
> 赞同：7
> 
> 时间：2012-04-08T20:56:25.690
> 
> 标签：jsp, servlets, ide

我是我的大学 JSP 项目的前端开发人员，到目前为止，我使用 Sublime Text 2 来编写标记和我的 CSS/Less，并直接从手动配置的 Apache Tomcat 运行项目，我将项目目录放在`webapps`文件夹中，但是后来，项目需要使用Servlets（显然），我意识到需要IDE，而我在开发部分的同事现在坚持使用IDE。

我们已将整个项目移植到 NetBeans 7.1.1，到目前为止，项目运行良好，NetBeans 负责创建/管理 Servlet 及其 web.xml 配置的所有麻烦，但我主要处理标记和 Less，即这里真的很乏味。以下是我面临的问题：

*   Less 文件根本没有语法高亮。（尽管我提到了将语法高亮添加到文件的[这种方式）。](https://stackoverflow.com/questions/3190029/add-syntax-highlighting-to-less-files-in-netbeans)`.less`

*   每次我对标记或 CSS 进行更改时，我都需要按 F5 并等待浏览器中启动一个新选项卡以反映更改。（浏览器中的刷新页面不起作用，因为它曾经在我的旧 JSP 开发方式中工作）。如果我在看到后不关闭标签，想象一下 10 个标签进行 10 次更改。

*   我经常使用 jQuery，在我的文件中看到警告真的让我很恼火`.js`（我知道 NetBeans 可能会指出正确的问题，但我只是不希望它对我的代码“过于聪明”）。

*   网页设计师会知道“将更改保存到 css 并刷新页面在浏览器中”的频率。IDE 只是减慢了整个过程。

我知道使用 IDE 的明显优势，但是否有任何解决上述问题的方法？

此外，在转向 NetBeans 之前，我尝试将我的项目移植到 Eclipse（它只是对缩小的 jQuery 文件感到疯狂），但它只是拒绝为我的`.js`,`.css`和`.less`in`<script>`和`<alt>`标签使用相对路径，即使所有文件和文件夹都存在在 Web 内容目录中。我得到的只是脚本和样式表的 404 错误，尽管我可以通过手动访问 URL 来访问这些文件。如下：

```
<link rel="stylesheet/less" href="less/styles.less" media="all" />
<!-- Above line doesn't include the file and I get 404 error --> 
```

但

```
Visiting to localhost:8080/MyProject/less/styles.less 
   shows me its content in the browser. 
```

此外，我尝试在不使用 IDE 的情况下使用 Servlet（我的 Java 代码很简单，因此我觉得不需要类似 IntelliSense 的编辑）并引用[了这个](http://srikanthtechnologies.com/articles/j2ee/testservlet.html)链接，如果我以与解释了，但我不明白为什么我需要在编译时指定`servlet-api.jar`in `apache-tomcat\lib`，`classpath`尽管事实上我已经将 Apache 的 lib 文件夹的路径添加到`CLASSPATH`Windows 中的变量中。

我知道在这个单一问题中有太多问题，很可能会被 SO 版主“审核”，但我的所有问题都暗示了一个问题，即必须在不使用 IDE 的情况下开发 JSP/Servlet 和设计页面，并且只是相当有能力的文本编辑器 AKA Sublime Text。

请建议我一个坚定的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T21:39:19.150

从长远来看，我相信您最终会从使用 IDE 进行 Java Web 应用程序开发（例如 NetBeans）中受益，尽管更换新工具绝非易事。

NetBeans 是一个很好的 HTML、JavaScript 和 CSS 文本编辑器。它提供语法高亮、格式化、代码完成、内联文档、CSS 颜色/效果预览和验证。

NetBeans 可以轻松配置为部署到您机器上运行的 Tomcat 实例。此后，在 NetBeans 中对 HTML、JSP 和 CSS 的任何编辑通常会自动反映在您正在运行的应用程序中（只需要 F5 页面刷新）。

在某些情况下，CSS 更改不会自动反映在正在运行的应用程序中。

*   如果您在构建过程中缩小 CSS，那么您的浏览器正在加载您的 CSS 的缩小版本（例如，使用[YUI 压缩器](http://developer.yahoo.com/yui/compressor/)，最好在完成 CSS 开发之前使用它）。
*   如果您使用某种 CSS 文件缓存过滤器。例如，您为 CSS 文件显式设置了过期标头，从而导致浏览器将 CSS 缓存一段时间。
*   您可以在外部编辑器中编辑 JS/CSS，NetBeans 可以很好地检测外部编辑器所做的更改，但有时它不会检测到这些，除非最近的更改是在 NetBeans 编辑器本身内部进行的。

由于您没有体验即时更新，我认为这是您使用 LESS 的问题，而不是 NetBeans 本身的问题。

我自己没有使用过 LESS，但在[快速提示中找到了解决方案：LESS.js in development and watch mode](http://www.paulsprangers.com/2011/04/quick-tip-less-js-in-development-and-watch-mode/)，显然如果您在 HTML5 浏览器中运行 less.js，本地存储将用于缓存生成的 CSS。这对于正常使用来说是一个很好的功能，但在您开发 CSS 时不是您想要的，因为您不会立即看到 CSS 更改的结果。解决方案是使用LESS的watch和开发模式。监视模式使您的 CSS 可以自动刷新（无需按 F5），而开发模式将防止 CSS 被缓存。

您可以通过在加载 less 样式表和 less.js 脚本后添加以下 JavaScript 来启用监视模式。

```
<script type="text/javascript">
     less.env = "development";
     less.watch();
</script> 
```

如果你认为 NetBeans 对你的 JavaScript 太聪明了，你应该看看[JSLint](http://www.jslint.com/)会怎么做！对你的代码运行太多高质量的工具可能会有点灵魂毁灭，也就是说我总是使用[Firefox HTML Validator 扩展](https://addons.mozilla.org/en-US/firefox/addon/html-validator/)（我活着看到了绿色的勾号！）。NetBeans 警告可能看起来有点吓人，但它只是试图让您符合标准，以帮助您避免进一步出现问题。

*当我看到您的短语“将整个项目移植到 NetBeans 7.1.1* ”时，我有点担心，我个人建议您的项目应该使用与 IDE 无关的构建工具（例如 Ant 或 Maven）来构建。NetBeans 对这两种工具都有很好的支持，我自己也是 Maven 的忠实粉丝。使用这些构建工具意味着您*可以避免*使用 IDE，而是使用命令行构建应用程序实例。

顺便说一句，我希望您使用 Git 或 Subversion 等版本控制系统来共享项目文件更改，IDE 也可以轻松使用版本控制系统。

关于你的另一个问题。Apache 和 Apache Tomcat 是两种不同类型的服务器软件。Apache 服务器通常安装在 Tomcat 服务器的前面。编译 Servlet 时，您的 Java 编译器需要访问 servlet-api.jar 的副本。Tomcat 的 lib 目录包含 Java 库文件（例如 servlet-api.jar），Apache 的 lib 目录将包含 Apache*本地*可执行文件使用的已编译 C 库，而不是 Java 库文件（这些是用于不同目的的不同类型的库）。

# groovy - 将集合划分为块并在 Groovy 中对每个块调用闭包

> ID：10066435
> 
> 赞同：1
> 
> 时间：2012-04-08T20:56:39.207
> 
> 标签：groovy

我想知道 Groovy 中可能有一个内置功能，比如

```
aCollection.doEachBulk(100) { bulk -> 
    ...
} 
```

有没有 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T21:13:43.660

我不确定我是否正确理解了您的问题，但您可能正在寻找[`collate`](http://groovy.codehaus.org/groovy-jdk/java/util/List.html#collate%28int%29)方法。

```
(1..20).collate(5).each { subRange ->
    println subRange
} 
```

输出：

```
[1, 2, 3, 4, 5]
[6, 7, 8, 9, 10]
[11, 12, 13, 14, 15]
[16, 17, 18, 19, 20] 
```

# c# - 使用带有 LINQ to XML 的请求

> ID：10066437
> 
> 赞同：0
> 
> 时间：2012-04-08T20:57:15.213
> 
> 标签：c#, wpf, linq-to-xml

我有这个 LINQ to XML 请求，它按艺术家 ID 检索所有歌曲：

```
 var query = from c in loaded.Descendants("artist")
                    where c.Attribute("Id").Value.Equals("1")
                    from s in c.Descendants("song")
                    select s.Attribute("path").Value.ToList(); 
```

当我尝试将结果添加到我的 ListBox 中时：

```
foreach (string track in query)
        {
            myList.Items.Add(track);
        } 
```

我收到了这个错误：

> 错误 CS0030：无法将类型“System.Collections.Generic.List”转换为“字符串”

如何在我的 ListBox 中正确添加我的结果？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T20:59:52.313

由于您的使用，`ToList()`您将返回一个可枚举的列表。

当您尝试遍历可枚举集合时，您的代码会尝试将列表转换为无法执行的字符。

将您的代码更改为：

```
 var query = from c in loaded.Descendants("artist")
                    where c.Attribute("Id").Value.Equals("1")
                    from s in c.Descendants("song")
                    select s.Attribute("path").Value 
```

如果您不想使用 IEnumerable 的延迟加载功能，您可以将整个结果集转换为列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T21:01:27.867

您应该使用`ToList()`整个查询，而不仅仅是“路径”属性值：

```
var query = (from c in loaded.Descendants("artist")
                    where c.Attribute("Id").Value.Equals("1")
                    from s in c.Descendants("song")
                    select s.Attribute("path").Value).ToList(); 
```

或发送它，以便在需要时评估查询结果。

# mysql - 非唯一列mysql

> ID：10066438
> 
> 赞同：0
> 
> 时间：2012-04-08T20:57:33.013
> 
> 标签：mysql, unique, alter

我需要更改一个唯一的列，而不是在 mysql 中唯一。我相信有人可以帮助我完成这个简单的任务。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T21:00:01.860

MySQL 中列的唯一约束被实现为该列的唯一索引。要删除约束，只需删除索引。

```
ALTER TABLE yourtable DROP INDEX index_name 
```

要查看表上索引的名称，请使用[SHOW INDEX](http://dev.mysql.com/doc/refman/5.0/en/show-index.html)。

```
SHOW INDEX FROM yourtable 
```

# java - 运行文件，得到 StackOverflowError

> ID：10066442
> 
> 赞同：-2
> 
> 时间：2012-04-08T20:57:57.710
> 
> 标签：java, netbeans, stack-overflow

我正在开发一个处理财务等的小型应用程序。我使用的开发环境是netbeans。

我有一个方法类（称为 Methoden），其中存储了所有方法、一个数据类和框架类（称为 Fenster1）

为了获得一些输入，我在方法类中定义了一个方法并尝试使用

```
Methoden m = new Methoden();
...
buttonAction {
   m.getInput();
} 
```

代码很好，完全没有错误。但是当我尝试启动应用程序时，它需要一段时间，然后出现此错误：

> java.awt.Window.init 的 sun.awt.Win32GraphicsConfig.getBounds(Win32GraphicsConfig.java:222) 的sun.awt.Win32GraphicsConfig.getBounds(Native Method) 的线程“AWT-EventQueue-0”java.lang.StackOverflowError 中的异常(Window.java:496)
> 在 java.awt.Window.(Window.java:535)
> 在 java.awt.Frame.(Frame.java:420)
> 在 java.awt.Frame.(Frame.java:385)
> 在javax.swing.JFrame.(JFrame.java:180)
> 在 haushaltsbuch.Fenster1.(Fenster1.java:19)
> 在 haushaltsbuch.Methoden.(Methoden.java:16)

现在：如何解决此错误以使一切正常运行？

* * *

似乎解决了。

在 Fenster1 有，`Methoden m = new Methoden();` 而在 Methoden 有`Fenster1 f = new Fenster1();`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T21:05:00.077

堆栈溢出异常意味着（通常）函数递归调用自身。我怀疑 Methoden#getInput() 会这样做。

# javascript - 有谁知道这个（谷歌帮助）是如何被调用的

> ID：10066444
> 
> 赞同：1
> 
> 时间：2012-04-08T20:57:58.783
> 
> 标签：javascript, html, css, windows

有谁知道这个（谷歌帮助）是如何被调用的，例如当你输入“f”时，上面写着：facebook、fandago、fox news等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T21:03:01.407

[正如已经回答的那样，它被称为谷歌自动完成，你可以在这个链接上](http://support.google.com/websearch/bin/answer.py?hl=en&answer=106230)阅读更多关于它的信息：希望它有帮助......；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T21:00:43.690

它有不同的词，但它们的意思都是一样的：

*   **Bootstrap**称之为[Typeahed](http://twitter.github.com/bootstrap/javascript.html#typeahead)
*   **jQuery UI**称之为[自动完成](http://jqueryui.com/demos/autocomplete/)
*   **雅虎**也称它为[自动](http://developer.yahoo.com/yui/autocomplete/)完成

还有很多例子，但大多数人称之为**自动完成**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T21:03:26.703

[自动完成](http://en.wikipedia.org/wiki/Autocomplete)，或者它的一些变体。至于在您的网站上的实际使用，表单完成或内部搜索引擎是主要用途。[这是一个 jQuery 自动完成演示](http://jqueryui.com/demos/autocomplete/)。

# java - MIDI 在 Windows 和 Java 程序中的声音不同

> ID：10066453
> 
> 赞同：0
> 
> 时间：2012-04-08T20:59:33.467
> 
> 标签：java, midi, javasound

我玩 MIDI 很好，但是当我在 Java 中播放它们时，与我在 Windows 7 上使用 WMP 12 播放它们时相比，它们似乎使用了不同的乐器。Win7 按它们应该的方式播放它们，声音非常 8 位和有机的，因为它们是预期的。但是 Java 似乎有不同的乐器，它们听起来仍然非常相似，但听起来更少 8 位和更高的质量，这不是我的目标。有什么办法可以导入windows仪器吗？

# python - 我将如何改进这个简单的 python 类及其文档字符串？

> ID：10066458
> 
> 赞同：1
> 
> 时间：2012-04-08T21:00:00.533
> 
> 标签：python, class, coding-style, docstring

这是一个简单的过滤器，我一直在通过串行连接读取数据的项目中使用它，并认为将它用作我第一次尝试编写文档字符串会很好。有没有人有什么建议？我一直在阅读 PEP 257。因为它是一个类，所以关键字参数应该在`__init__`?

如果有更好的方法来编写它的任何部分（不仅仅是文档字符串），如果人们能指出我正确的方向，我将不胜感激。

```
class Filter(object) :
    """Return x if x is greater than min and less than max - else return None. 

    Keyword arguments:
    min -- the minimum (default 0)
    max -- the maximum (default 0)

    Notes:
    Accepts integers and integer strings
    """
    def __init__(self, min=0, max=0) :
        self.min = min
        self.max = max
    def __call__(self, input) :
        try :
            if int(input) <= self.max and int(input) >= self.min : 
                return int(input)
        except : pass 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:37:30.073

使用 pylint 和 pep8 检查代码约定和常见的输入错误通常是个好主意。

# c# - SpeechSynthesizer 说格式不正确？

> ID：10066460
> 
> 赞同：0
> 
> 时间：2012-04-08T21:00:08.333
> 
> 标签：c#, wpf, exception, text-to-speech, speechsynthesizer

`SpeechSynthesizer ss = new SpeechSynthesizer(); ss.Speak("Hello.");`

...（对于文本到语音）导致错误：*“用户代码未处理格式异常”...“输入字符串的格式不正确。”* 它只是一个字符串，但它说格式错误？

我尝试过带和不带标点符号的其他词，尝试过使用 PromptBuilder 代替字符串，尝试过 MSDN 示例代码（尽管基本相同）......我尝试过的任何代码都会给出相同的错误。有任何想法吗？

# html - 调整窗口大小不允许我的导航栏通过水平滚动扩展 - css

> ID：10066463
> 
> 赞同：0
> 
> 时间：2012-04-08T21:00:26.210
> 
> 标签：html, css, web

我创建了一个导航栏并使用 css 对其进行了样式设置，以便它可以扩展到整个屏幕。在我调整窗口大小之前一切都很好，然后当我在内容超过窗口大小的页面上水平滚动到右侧时，导航栏没有完全扩展。

我希望导航栏在我向右滚动时扩展，而不是像现在这样留下空白。我可以用 CSS 完成这个吗？

这是我现在使用的 CSS 代码：

```
 .navigation{
        min-width: 100%;
        height: 40px;
        background-image: url(../images/images/banner.png);
        padding-left:10px;
        }

        .navigation li{
        display: inline-block;
        padding-left: 25px; 
        padding-top: 10px;
        }

        li.logout{
        float:right;
        padding-right: 25px;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T21:04:47.413

100% 宽度不考虑溢出，所以它总是相对于窗口的实际宽度。只有表格扩展以适应溢出，尽管您可能可以使用表格显示样式而不是实际表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T21:13:41.413

我认为您的问题是您可能正在将 .navigation 类应用于 UL。您应该让导航类成为带有链接的 UL 的容器。我举了一个我认为你想要做的例子：

[http://jsfiddle.net/ckaufman/w2KUG/1/](http://jsfiddle.net/ckaufman/w2KUG/1/)

# java - 字符串相似度代码更改

> ID：10066468
> 
> 赞同：0
> 
> 时间：2012-04-08T21:01:22.170
> 
> 标签：java

我编写了 1 个代码，但它刚刚通过了 1 个测试用例，所以我不明白我犯了哪些错误以及我要在代码中进行哪些更改，所以问题和代码如下：

**问题：**

对于两个字符串 A 和 B，我们将字符串的相似度定义为两个字符串共有的最长前缀的长度。例如，字符串“abc”和“abd”的相似度为2，而字符串“aaa”和“aaab”的相似度为3。

计算字符串 S 与其每个后缀的相似度总和。

输入：第一行包含测试用例 T 的数量。接下来的 T 行中的每一行都包含一个字符串。

输出：输出包含对应测试用例答案的 T 行。

约束：1 <= T <= 10 每个字符串的长度最多为 100000，并且只包含小写字符。

样本输入：2 ababaa aa

样本输出：11 3

解释：对于第一种情况，字符串的后缀是“ababaa”、“babaa”、“abaa”、“baa”、“aa”和“a”。这些字符串中的每一个与字符串“ababaa”的相似度分别为 6,0,3,0,1,1。因此答案是 6 + 0 + 3 + 0 + 1 + 1 = 11。

对于第二种情况，答案是 2 + 1 = 3。

代码：

**字符串相似度**

```
import java.io.BufferedReader;
import java.io.InputStreamReader;

public class Solution 
{
    int T,i;
    String[] S;
    String p;

    String inp;
    BufferedReader br=new BufferedReader(new InputStreamReader(System.in));

    int count=0;

    public void StringSimilarity()
    {

        try
        {
            T=Integer.parseInt(br.readLine());  
            if(T<1 && T>10)
                System.exit(0);
            S=new String[T];

        }
        catch(Exception e)
        {
        }

            for(i=0;i<T;i++)
            {
                count=0;
             try
             {

                S[i]=br.readLine();
                S[i].toLowerCase();

             }
             catch(Exception e)
            {
                System.err.println("Error:" + e.getMessage());
            }

        }

        for(i=0;i<T;i++)
        {
            int g=0;
            p=S[i];
            int a=0;
            a=p.length();
            count=0;
            char t[]=new char[a];

            for(int n=0;n<p.length();n++)
            {
                t[n]=p.charAt(n);

            }

            int m=p.length();

            for(int f=0;f<t.length;f++)
            {
                for(int j=0;j<m-g;j++)
                {
                   if(p.charAt(0)== t[0])
                   {
                    if(p.charAt(j)== t[j])
                    {
                        count=count+1;

                    }
                   }
                }
                g=g+1;

                for(int k=0;k<t.length-1;k++)
                {
                    t[k]=t[k+1];
                }
            }
            System.out.println(count);
        }
    }

    public static void main(String[] args)
    {
        Solution s=new Solution();
        s.StringSimilarity();

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T21:36:41.733

您的算法很难阅读，因为它包含太多变量，并且没有正确分解成更小的易于阅读、可维护和可测试的部分。我试图以一种更直接的方式来解决你的问题，这样你就可以检查它、玩弄它并从中学习一些东西。希望能帮助到你...

```
 package test;

import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import java.io.Reader;

public class Main {

  public static void main(String[] args) {
    Main m = new Main();
    m.start();
  }

  private void start() {
    try {
      parse("x.txt");
    } catch (IOException ex) {
      ex.printStackTrace();
    }
  }

  private void parse(String filename) throws IOException {
    Reader r = null;
    try {
      r = new FileReader(filename);
      BufferedReader br = new BufferedReader(r);
      String line = null;
      while ((line = br.readLine()) != null) {
        String[] strings = line.split(" ");
        /* skip the first one, not important for us */
        for (int i = 1; i < strings.length; i++) {
          System.out.println("RESULT: for '" + strings[i] + "' is " + computeSimilarity(strings[i]));
        }
      }
    } finally {
      if (r != null) {
        r.close();
      }
    }
  }

  private int computeSimilarity(String s) {
    int result = 0;
    for (int i = 0; i < s.length(); i++) {
      /* compare also with itself */
      result += compareSimilarity(s, s.substring(i));
    }
    System.out.println("  " + s + " -> " + result);
    return result;
  }

  private int compareSimilarity(String s1, String s2) {
    int result = 0;
    /* s1.length() > s2.length() */
    for (int i = 0; i < s2.length(); i++) {
      if (s1.charAt(i) == s2.charAt(i)) {
        result++;
      } else {
        break;
      }
    }
    System.out.println("    " + s1 + " " + s2 + " -> " + result);
    return result;
  }
} 

```

它对您的测试数据的输出是：

```
 ababaa ababaa -> 6
    ababaa babaa -> 0
    ababaa abaa -> 3
    ababaa baa -> 0
    ababaa aa -> 1
    ababaa a -> 1
  ababaa -> 11
RESULT: for 'ababaa' is 11
    aa aa -> 2
    aa a -> 1
  aa -> 3
RESULT: for 'aa' is 3 

```

# php - php/html 网页中的背景音乐

> ID：10066475
> 
> 赞同：0
> 
> 时间：2012-04-08T21:02:02.167
> 
> 标签：php, html, mp3, wav, m4a

我使用 iPhone 将一段钢琴音乐录制为 .m4a 格式。我想将它切碎并将其转换为合适的格式，以用作 php/html 网站中的背景音乐。

我有以下问题：- 1\. 哪种格式最好（例如 mp3、WAV 等）？2.我应该先将.m4a 文件切掉再转换，还是先转换成另一种格式再切？3\. 可以只应用网页中的文件，产生循环效果吗？但我担心，每次刷新后，音乐可能会从头开始播放，这是不希望的。

非常感谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T21:13:06.840

一般来说，在您的网站上播放循环音乐是个坏主意。95% 的网站访问者喜欢控制正在播放的媒体。与其嵌入，不如包含一个 javascript 插件，用户可以使用它来控制歌曲的音量和搜索位置。大多数插件允许您在页面加载时自动启动歌曲，这将使您具有与嵌入歌曲相同的效果（我仍然建议不要自动启动，但这是您的页面）。

我过去成功使用的一个插件是[http://www.jplayer.org](http://www.jplayer.org)。它允许音频和视频播放。它也适用于 .m4a 文件，因此您无需转换任何内容。

如果您想让音乐连续播放而不是每次访问者进入新页面时重新开始，您将不得不考虑使用 iframe 来保存您网站的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T21:05:15.913

请记住，许可问题限制了 MP3 在所有平台（即 Linux）上的可用性。WAV 将是一个便携的选择，但它会比较大，因此可能不是理想的。

让它循环将是一个简单的 HTML 属性的问题：

```
<embed src="bgsound.m4a" autostart="true" loop="true"> 
```

如果可能的话，为什么不找到一种方法把你的钢琴曲子变成一个 MIDI 文件呢？大概它是纯钢琴音乐，使 MIDI 成为准确性和文件大小的理想格式（与原始波形格式相比，MIDI 很小）。

您的其他观点；每次页面刷新时它都会重新启动。有很多方法可以解决这个问题，也许最基本的是将音乐放在弹出窗口中。

在转换之前或之后切碎将产生微不足道的差异，如果有的话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-10T12:45:28.980

如何将您的声音转换为 .mp3 和 .ogg 并在 HTML 中使用[音频元素](http://msdn.microsoft.com/en-us/library/hh772923%28v=vs.85%29.aspx)

```
<audio autoplay loop>
  <source src="bgmusic.mp3" /> <!-- works on IE9+, FF3.5+, Chrome4+ -->
  <source src="bgmusic.ogg" /> <!-- still needed for Safari 5.1.7, MP3 to OGG online converter here: http://audio.online-convert.com/convert-to-ogg -->
</audio> 
```

请参阅[浏览器对音频元素的支持](http://caniuse.com/audio)。

关于每次换页都不重启，deed02392给你一个好办法：把音乐放在弹窗里。

# prolog - 删除 SWI-Prolog 中的元素或列表

> ID：10066476
> 
> 赞同：2
> 
> 时间：2012-04-08T21:02:03.730
> 
> 标签：prolog

另一个问题，我有一个很好的删除“功能”：

```
remove([],X,[]) :- !. 
remove([X|T],X,L1) :- !, remove(T,X,L1).         
remove([H|T],X,[H|L1]) :- remove(T,X,L1). 
```

但它不像我想要的那样工作。它删除元素甚至列表...

...但不会删除所有外观。这是目标：

```
remove([A,B,[C],[A,[B]],[[A,[B]]]],[A,[B]],X).
X=[A,B,[C],[]] 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T22:27:35.143

如果您想删除所有外观，例如，让 remove([1,2,3,1],1,X) 计算 X=[2,3] 只需将第二个子句替换为

```
 remove([X|T],X,L1) :- remove(T,X,L1), !. 
```

但是，您似乎希望 a) 使用应保留为变量的变量和 b) 从子列表中删除列表。

我们将首先解决 b) 问题。

```
remove([],_,[]) :- !. 
remove(A,_,A) :- \+ (A = [_|_]), !.
remove([X|T],X,L1) :- remove(T,X,L1), !.        
remove([H|T],X,[G|L1]) :- remove(H,X,G), remove(T,X,L1). 
```

如您所见，我们在最后一个子句中添加了第二个递归调用来处理内部列表。此外，我们必须添加一个特殊情况（第二个子句），因为第一个参数不一定是列表。

最后，要解决 a) 您需要使用 Sterling 和 Shapiro 的“冻结”/“融化”谓词。freeze 用表达式 #VAR(0), #VAR(1), ... 替换变量，而 melt 则相反。熔体传统上被称为melt_new

```
numvars('#VAR'(N),N,N1) :- N1 is N+1.
numvars(Term,N1,N2) :- nonvar(Term), functor(Term,_,N),
                          numvars(0,N,Term,N1,N2).

numvars(N,N,_,N1,N1).
numvars(I,N,Term,N1,N3) :- I<N, I1 is I+1,
          arg(I1,Term,Arg), numvars(Arg,N1,N2),
          numvars(I1,N,Term,N2,N3).

frz(A,B) :- frz(A,B,0).
frz(A,B,Min) :- copy_term(A,B), numvars(B,Min,_),!.

melt_new(A,B) :-
   melt(A,B,Dictionary), !.

melt('$VAR'(N),X,Dictionary) :-
    lookup(N,Dictionary,X).
melt(X,X,Dictionary) :-
    constant(X).
melt(X,Y,Dictionary) :-
    compound(X),
    functor(X,F,N),
    functor(Y,F,N),
    melt(N,X,Y,Dictionary).

melt(N,X,Y,Dictionary) :-
    N > 0, 
    arg(N,X,ArgX), 
    melt(ArgX,ArgY,Dictionary),
    arg(N,Y,ArgY), 
    N1 is N-1, 
    melt(N1,X,Y,Dictionary).
melt(0,X,Y,Dictionary).

/*  
    lookup(Key,Dictionary,Value) :-
    Dictionary contains the value indexed under Key.
    Dictionary is represented as an ordered binary tree.

*/

    lookup(Key,dict(Key,X,Left,Right),Value) :-
        !, X = Value.
    lookup(Key,dict(Key1,X,Left,Right),Value) :-
        Key < Key1 , lookup(Key,Left,Value).
    lookup(Key,dict(Key1,X,Left,Right),Value) :-
        Key > Key1, lookup(Key,Right,Value). 
```

顺便说一句，我真的推荐 Sterling 和 Shapiro 的书《The Art of Prolog》。第 15 章讨论了熔化和冻结。

# android - M 得到这个异常 java.lang.IllegalStateException: 无法执行活动的方法

> ID：10066485
> 
> 赞同：0
> 
> 时间：2012-04-08T21:03:22.453
> 
> 标签：android

> java.lang.IllegalStateException：无法执行活动的方法。

我是安卓新手。想要显示数据库中存储的数据。
这是我的 Compview 类，它出现错误。

```
 @Override
     public void onCreate(Bundle savedInstanceState) 
     {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.compview);

        DB = (new DBHelper(this)).getWritableDatabase();
        // searchText = (EditText) findViewById (R.id.searchText);

         eun = (TextView)findViewById(R.id.textV);
   Bundle bundle = getIntent().getExtras();

   String UName = bundle.getString("UserName");

   eun.setText(UName);

     }

  public void search(View view)
  {DB.isReadOnly();
   cursor = DB.rawQuery("SELECT _id, Cname, Cpost, Ccriteria, Cemail,Ccontact,Ccutoff FROM Comp WHERE Cusername LIKE ?", 
     new String[] {"%" + eun.getText().toString() + "%"});
   adapter = new SimpleCursorAdapter(
     this,
     R.layout.cmpinfo,
     cursor,
     new String[] {" Cname", "Cpost", "Ccriteria", "Cemail","Ccontact","Ccutoff"},
     new int[] {R.id.cname, R.id.cpost, R.id.ccriteria , R.id.cemail, R.id.ccontact, R.id.ccutoff});

   setListAdapter(adapter);
  }

  @Override
  public void onBackPressed() 
  {
   super.onBackPressed();
   Intent i = new Intent(CompView.this, LoginActivity.class);
   startActivity(i);
  }
  } 
```

LOGCAT

```
04-09 01:32:54.322: W/dalvikvm(4302): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
04-09 01:32:54.342: E/AndroidRuntime(4302): FATAL EXCEPTION: main
04-09 01:32:54.342: E/AndroidRuntime(4302): java.lang.IllegalStateException: Could not execute method of the activity
04-09 01:32:54.342: E/AndroidRuntime(4302):     at android.view.View$1.onClick(View.java:2072)
04-09 01:32:54.342: E/AndroidRuntime(4302):     at android.view.View.performClick(View.java:2408)
04-09 01:32:54.342: E/AndroidRuntime(4302):     at android.view.View$PerformClick.run(View.java:8816)
04-09 01:32:54.342: E/AndroidRuntime(4302):     at android.os.Handler.handleCallback(Handler.java:587)
04-09 01:32:54.342: E/AndroidRuntime(4302):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-09 01:32:54.342: E/AndroidRuntime(4302):     at android.os.Looper.loop(Looper.java:123)
04-09 01:32:54.342: E/AndroidRuntime(4302):     at android.app.ActivityThread.main(ActivityThread.java:4627)
04-09 01:32:54.342: E/AndroidRuntime(4302):     at java.lang.reflect.Method.invokeNative(Native Method)
04-09 01:32:54.342: E/AndroidRuntime(4302):     at java.lang.reflect.Method.invoke(Method.java:521)
04-09 01:32:54.342: E/AndroidRuntime(4302):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-09 01:32:54.342: E/AndroidRuntime(4302):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-09 01:32:54.342: E/AndroidRuntime(4302):     at dalvik.system.NativeStart.main(Native Method)
04-09 01:32:54.342: E/AndroidRuntime(4302): Caused by: java.lang.reflect.InvocationTargetException
04-09 01:32:54.342: E/AndroidRuntime(4302):     at com.google.data.CompView.search(CompView.java:68)
04-09 01:32:54.342: E/AndroidRuntime(4302):     at java.lang.reflect.Method.invokeNative(Native Method)
04-09 01:32:54.342: E/AndroidRuntime(4302):     at java.lang.reflect.Method.invoke(Method.java:521)
04-09 01:32:54.342: E/AndroidRuntime(4302):     at android.view.View$1.onClick(View.java:2067)
04-09 01:32:54.342: E/AndroidRuntime(4302):     ... 11 more
04-09 01:32:54.342: E/AndroidRuntime(4302): Caused by: java.lang.IllegalArgumentException: column ' Cname' does not exist
04-09 01:32:54.342: E/AndroidRuntime(4302):     at android.database.AbstractCursor.getColumnIndexOrThrow(AbstractCursor.java:314)
04-09 01:32:54.342: E/AndroidRuntime(4302):     at android.widget.SimpleCursorAdapter.findColumns(SimpleCursorAdapter.java:312)
04-09 01:32:54.342: E/AndroidRuntime(4302):     at android.widget.SimpleCursorAdapter.<init>(SimpleCursorAdapter.java:87)
04-09 01:32:54.342: E/AndroidRuntime(4302):     ... 15 more 
```

DBHelper 类

```
 public class DBHelper extends SQLiteOpenHelper 

{
 private SQLiteDatabase db;
 public static final String KEY_ROWID = "_id";
 public static final String KEY_ROWID1 = "_id";
    public static final String KEY_FNAME = "firstname";
    public static final String KEY_LNAME = "lastname";
    public static final String KEY_GENDER = "gender";
    public static final String KEY_USER = "username";
    public static final String KEY_EMAIL = "email";
    public static final String KEY_CNAME="Cname"; 
    public static final String KEY_CPOST="Cpost"; 
    public static final String KEY_CCRITERIA="Ccriteria"; 
    public static final String KEY_CUSER="Cusername"; 
    public static final String KEY_CEMAIL="Cemail"; 
    public static final String KEY_CCONTACT="Ccontact"; 
    public static final String KEY_CCUTOFF="Ccutoff"; 

 DBHelper DB = null;
 private static final String DATABASE_NAME = "Sam1.db";
 private static final int DATABASE_VERSION = 2;
    public static final String DATABASE_TABLE_NAME = "JobSeeker";
    public static final String Company_Table = "Comp";
    private static final String DATABASE_TABLE_CREATE =
            "CREATE TABLE " + DATABASE_TABLE_NAME + "(" +
            "_id INTEGER PRIMARY KEY AUTOINCREMENT,"+
            "firstname TEXT NOT NULL, lastname TEXT NOT NULL, gender TEXT NOT NULL, username TEXT NOT NULL, password TEXT NOT NULL, email TEXT NOT NULL);";
private static final String DATABASE_TABLE_CREATE2=
" create table " + Company_Table +
" (_id integer primary key autoincrement," +
" Cname TEXT NOT NULL, Cpost TEXT NOT NULL,Ccriteria TEXT NOT NULL,Cusername TEXT NOT NULL, Cpassword TEXT NOT NULL, Cemail TEXT NOT NULL,Ccontact TEXT NOT NULL,Ccutoff TEXT NOT NULL);" ;

    public DBHelper(Context context) {

  super(context, DATABASE_NAME, null, DATABASE_VERSION);
  System.out.println("In constructor");
}

@Override
public void onCreate(SQLiteDatabase db) {

 try{

  db.execSQL(DATABASE_TABLE_CREATE);
  db.execSQL(DATABASE_TABLE_CREATE2);

 }catch(Exception e){
  e.printStackTrace();
 }
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
 // TODO Auto-generated method stub

}

public Cursor rawQuery(String string, String[] strings) {
 // TODO Auto-generated method stub
 return null;
}

public void open() {

 getWritableDatabase(); 
}

public Cursor getDetails(String text) throws SQLException 
{

    Cursor mCursor =
            db.query(true, DATABASE_TABLE_NAME, 
              new String[]{KEY_ROWID, KEY_FNAME, KEY_LNAME, KEY_GENDER, KEY_USER, KEY_EMAIL}, 
              KEY_USER + "=" + text, 
              null, null, null, null, null);
    if (mCursor != null) 
    {
        mCursor.moveToFirst();
    }
    return mCursor;

}

public Cursor getCompDetails(String text) throws SQLException 
{

    Cursor mCursor =
            db.query(true, Company_Table, 
              new String[]{KEY_ROWID1, KEY_CNAME, KEY_CPOST, KEY_CCRITERIA, KEY_CUSER, KEY_EMAIL,KEY_CCONTACT,KEY_CCUTOFF}, 
              KEY_CUSER + "=" + text, 
              null, null, null, null, null);
    if (mCursor != null) 
    {
        mCursor.moveToFirst();
    }
    return mCursor;

}

} 
```

这是我的welcome1 类，它工作正常并且能够从数据库中检索所有数据，但是当我对我的compview 类使用相同的方法来访问数据时它不起作用。！！

```
public class Welcome1 extends ListActivity
{

 protected TextView eun;
 protected SQLiteDatabase DB;
 protected Cursor cursor;
 protected ListAdapter adapter;
 protected TextView mUname;
 protected TextView mFname;
 protected TextView mLname;
 protected TextView mEmail;

  @Override
     public void onCreate(Bundle savedInstanceState) 
     {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.welcome1);

        DB = (new DBHelper(this)).getWritableDatabase();
        // searchText = (EditText) findViewById (R.id.searchText);

         eun = (TextView)findViewById(R.id.textV);
   Bundle bundle = getIntent().getExtras();

   String UName = bundle.getString("UserName");

   eun.setText(UName);

     }

  public void search(View view)
  {
   cursor = DB.rawQuery("SELECT _id, firstname, lastname, gender, username, email FROM JobSeeker WHERE username LIKE ?", 
     new String[] {"%" + eun.getText().toString() + "%"});
   adapter = new SimpleCursorAdapter(
     this,
     R.layout.dtl,
     cursor,
     new String[] {"firstname", "lastname", "gender","username", "email"},
     new int[] {R.id.sfname, R.id.slname, R.id.sgender , R.id.suname, R.id.semail});

   setListAdapter(adapter);
  }

  @Override
  public void onBackPressed() 
  {
   super.onBackPressed();
   Intent i = new Intent(Welcome1.this, LoginActivity.class);
   startActivity(i);
  }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T21:23:32.167

问题在于`from`创建时的参数`adapter`

```
adapter = new SimpleCursorAdapter(
    this,
    R.layout.cmpinfo,
    cursor,
    new String[] {" Cname", "Cpost", "Ccriteria", "Cemail","Ccontact","Ccutoff"},
    new int[] {R.id.cname, R.id.cpost, R.id.ccriteria , R.id.cemail, R.id.ccontact, R.id.ccutoff}); 
```

看看你在哪里创建`String[]`数组......

```
new String[] {" Cname", "Cpost", "Ccriteria", "Cemail","Ccontact","Ccutoff"} 
```

...你有一个`space`before `Cname`。

logact 输出显示了这个...

```
column ' Cname' does not exist 
```

# mysql - 圈外键引用插入MySQL和事务回滚

> ID：10066486
> 
> 赞同：1
> 
> 时间：2012-04-08T21:03:26.520
> 
> 标签：mysql, sql, transactions, foreign-keys, innodb

我正在使用 MySQL 和 InnoDB，最近遇到了一些问题。

这是我试图运行的语句（我删除了一些个人详细信息）：

```
START TRANSACTION;

SET FOREIGN_KEY_CHECKS = 0;
INSERT INTO zdb_user (U_DateStart, U_Main_Adres_ID)
VALUES ('2012-04-08', 0);
SET FOREIGN_KEY_CHECKS = 1;

SET @newUID = LAST_INSERT_ID();

INSERT INTO zdb_adres (A_User_ID, A_Zipcode, A_Number)
VALUES (@newUID, '1234AB', 12);

UPDATE zdb_user SET U_Main_Adres_ID = LAST_INSERT_ID() WHERE User_ID = @newUID;

COMMIT; 
```

问题是我使用的是“圆形”外键引用。我现在通过禁用密钥检查绕过了它。

`zdb_adres.A_User_ID`需要有效的`User_ID`. 并且`zdb_user.U_Main_Adres_ID`需要一个有效的`Adres_ID`，但我没有。现在，只要可以实际创建 zdb_user 中的记录，这一切都可以正常工作。但是有几个限制可能导致它不能被创建。

我认为如果出现错误，事务会停止，但在运行一个简单的测试后，我发现这根本不是真的。因此我去谷歌搜索，我发现了几个解决方案，比如：

```
DECLARE EXIT HANDLER FOR SQLEXCEPTION, SQLWARNING, NOT FOUND BEGIN ROLLBACK; CALL ERROR_ROLLBACK_OCCURRED; END; 
```

太糟糕了，它不起作用，当我在后面添加它时收到语法错误`START TRANSACTION;`：

```
1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DECLARE EXIT HANDLER FOR SQLEXCEPTION, SQLWARNING, NOT FOUND BEGIN ROLLBACK' at line 1 
```

有谁知道问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:41:34.573

摆脱禁用外键检查的唯一方法是使`U_Main_Adres`可空。

# xmpp - 基于 Tornado 的 XMPP 服务器和客户端

> ID：10066488
> 
> 赞同：0
> 
> 时间：2012-04-08T21:03:37.117
> 
> 标签：xmpp, chat, tornado, ejabberd, strophe

我们正在开发一个基于聊天的网站。在进行了广泛的文献回顾之后，我们选择使用 Tornado 作为我们的 Web 服务器，使用 socket.io 作为客户端 JavaScript。

我们现在正在扩展我们的应用程序，以一次为大约 50,000 名用户提供服务。所以，我想问一下 Ejabberd 是否适合我们的架构（同意我们对改变持开放态度的事实，这会极大地改变我们当前的实现，只要它是值得的）或者是否有任何其他技术堆栈可以扩展相同的。

我们的重点是一对一的用户聊天。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T16:14:39.270

简而言之，它可以，但有一个小缺点：

XMPP 与 Web 客户端通信的标准方式是[BOSH](http://xmpp.org/extensions/xep-0206.html)。BOSH 是一种通过 HTTP 工作的长轮询解决方案。Websockets 还不是图片的一部分，尽管有一个[草案草案](https://datatracker.ietf.org/doc/html/draft-moffitt-xmpp-over-websocket-00)。

也就是说，最常用于 Web 客户端的 javascript 库是[Strophe](http://strophe.im/)。[ejabberd](https://github.com/superfeedr/ejabberd-websockets)和[strophe](https://github.com/superfeedr/strophejs)都有一个（实验性的？）插件，通过 websocket 进行通信。该插件在[此处](http://blog.superfeedr.com/xmpp-over-websockets/)进行了描述。

# java - 用于制作文件夹的 Jave GUI？

> ID：10066489
> 
> 赞同：0
> 
> 时间：2012-04-08T21:03:46.167
> 
> 标签：java, directory, jfilechooser

问候各位程序员。我知道如何在 java (new File(strDirectoy)).mkdir();) 中创建一个文件夹，但我想知道是否有某种类似于 JFileChooser 的 GUI 来创建一个新文件夹。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T21:06:54.147

如果您只有一个要创建的文件夹，那么我看不到（这对我来说是一个很好的问题）。但是，如果您想保存文件并有机会创建一个文件夹来保存它，那么您可以使用 JFileChooser 并在[保存模式下](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFileChooser.html#showSaveDialog%28java.awt.Component%29)调用它。

# video - 在 Emgucv 中播放视频

> ID：10066490
> 
> 赞同：1
> 
> 时间：2012-04-08T21:03:50.927
> 
> 标签：video, emgucv

我正在尝试加载视频以使用 Emgucv Caputre 类。

这是我的代码：

```
Capture capture = new Capture(filename); 
```

很简单，除了我每次都得到一个 TypeInitializationException 。我正在尝试读取使用 android 手机捕获的 mp4 文件。

我阅读了[http://opencv.willowgarage.com/wiki/VideoCodecs](http://opencv.willowgarage.com/wiki/VideoCodecs)并尝试将其转换为所有形式的 avi。我尝试使用这样的mencoder：mencoder in.avi -ovc raw -vf format=i420 -nosound -o out.avi

但它仍然行不通。

请帮我弄清楚原因。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T10:27:19.870

我找到了解决方案。问题是我加载了一个使用 x64 的 EmguCV dll 的项目，我的系统是 x86。切换它们后，它起作用了。

# ide - PyCharm IDE 语法着色问题

> ID：10066493
> 
> 赞同：2
> 
> 时间：2012-04-08T21:04:16.627
> 
> 标签：ide, editor, syntax-highlighting, pycharm

当`TODO`在编辑器中设置注释以使用任何给定的（即：黄色）语法着色方案时，上述内容也会在控制台上以 sat 颜色显示。当所述颜色为黄色且控制台为白色时，问题就出现了。见图片。

由于不是 100% 编程相关，请提前道歉。但是这个问题已经相当令人沮丧了一段时间，我不想在没有首先找到解决方法的情况下放弃我喜欢的语法定制。

![PyCharm 语法着色问题](../Images/4e4504b42815738c33097931a992cac3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T21:15:05.097

我认为没有简单的解决方法，项目视图和其他具有树的面板使用无法从 PyCharm 设置中配置的 Look&Feel 背景颜色。使它变暗的唯一方法是使用带有深色的 Look&Feel，它不会在 Mac 上看起来是原生的。

查看[IDEA-62247](http://youtrack.jetbrains.com/issue/IDEA-62247)和链接问题以获取更多详细信息。

# image - 无法转换为 java.awt.image.ImageObserver

> ID：10066496
> 
> 赞同：0
> 
> 时间：2012-04-08T21:04:41.917
> 
> 标签：image, graphics2d, sprite-sheet

```
 import java.awt.*;
import java.awt.image.ImageObserver;

import javax.swing.*;

public class CharacterMove {

CharacterCollision CharacterCollision;

public static int vel = 2;
public final int baseVel = 2;
public int spriteHeight = 23;
public int spriteWidth  =16;
public int x_pos =  400/2;
public int y_pos = 400/2;
public int count0 = 0,count1 = 0,count2 = 0,count3=0,count4 = 0,count5 = 0;
public ImageIcon Characterobj;
public Image Character;
public boolean MovingUp = false;
public boolean MovingDown = false;
public boolean MovingRight = false;
public boolean MovingLeft = false;
public boolean MovingStill = false;
public boolean UpRight = false;
public boolean UpLeft = false;
public boolean DownRight = false;
public boolean DownLeft = false;

public CharacterMove(){
    Characterobj = new ImageIcon(this.getClass().getResource("Character.png"));
    Character = Characterobj.getImage();

}

public void move(boolean moving) {
    if (MovingLeft) {

        x_pos-=vel;
    }
    if (MovingRight) {
        x_pos+=vel;
    }
    if (MovingUp) {
        y_pos-=vel;

    }
    if (MovingDown) {
        y_pos+=vel;
    }
    if(MovingDown&&MovingLeft){
        DownLeft = true;
        vel = 1;
    }else{
        DownLeft = false;
    }
    if(MovingDown&&MovingRight){
        DownRight = true;
        vel = 1;
    }else{
        DownRight = false;
    }
    if(MovingUp&&MovingLeft){
        UpLeft = true;
        vel = 1;
    }else{
        UpLeft = false;
    }
    if(MovingUp&&MovingRight){
        UpRight = true;
        vel = 1;
    }else{
        UpRight = false;
    }

    if(UpRight||UpLeft||DownLeft||DownRight){

        vel = 1;
    }else{
        vel = baseVel;
    }

}
public void draw(Graphics g){

    Graphics2D g2d = (Graphics2D) g;

    if(MovingUp){

        drawSpriteFrame(Character, g2d, x_pos, y_pos, 0, count0, 16, 23);
        if(count0 <3){
            count0++;
        }else{
            count0=0;
        }
    }else if(MovingDown){

        drawSpriteFrame(Character, g2d, x_pos, y_pos, 2, count1, 16, 23);
        if(count1 <3){
            count1++;
        }else{
            count1=0;
        }
    }else if(MovingLeft){

        drawSpriteFrame(Character, g2d, x_pos, y_pos, 3, count2, 16, 23);
        if(count2 <3){
            count2++;
        }else{
            count2=0;
        }
    }else if(MovingRight){

        drawSpriteFrame(Character, g2d, x_pos, y_pos, 1, count3, 16, 23);
        if(count3 <3){
            count3++;
        }else{
            count3=0;
        }
    }

}
public int characterRectX(){
    return 16;

}
public int characterRectY(){
    return 23;

}
public void drawSpriteFrame(Image source, Graphics2D g2d, int x, int y,
        int columns, int row, int width, int height) {
    int frameX = (row) * width;
    int frameY = (columns) * height;
    g2d.drawImage(source, x, y, x + width, y + height, frameX, frameY,frameX + width, frameY+height ,(ImageObserver) this);
} 
```

}

您好，每次运行此代码时，都会出现以下错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.ClassCastException: CharacterMove cannot be cast to java.awt.image.ImageObserver
    at CharacterMove.draw(CharacterMove.java:91) 
```

当按下箭头键时，我正在尝试为移动的角色设置动画。但是当尝试绘制图像时出现此错误。我正在使用一种方法，绘制图像的某个部分，在那里我测试了这种方法，在不同的项目中使用相同的图片，它工作正常。我不知道出了什么问题。任何帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T21:10:40.363

`g2d.drawImage(source, x, y, x + width, y + height, frameX, frameY,frameX + width, frameY+height ,(ImageObserver) this);`

最后一个参数，您尝试将“this”（CharacterMove 类的实例）转换为 ImageObserver 类的实例……在我看来，这是不可能的，因为 CharacterMove 没有扩展 ImageObserver。

编辑：我现在看过 JavaDoc。只需制作：

```
public class CharacterMove implements ImageObserver 
```

并从 ImageObserver 中实现必要的方法，这是一个接口。然后在最后，移除强制转换，你不能强制转换到接口。那应该行得通。

# algorithm - 有没有一种算法可以找到文本的香农熵？

> ID：10066502
> 
> 赞同：9
> 
> 时间：2012-04-08T21:04:57.003
> 
> 标签：algorithm, text

我知道英语的香农熵是每个字母 1.0 到 1.5 位，有人说每个字母低至 0.6 到 1.3 位，但我想知道有没有办法运行一种算法来查看大量文本然后确定集体文本的期望值是集体文本的每个字母 0.08 位？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-10T00:50:55.600

[一种语言的熵率的](https://en.wikipedia.org/wiki/Entropy_rate)数学定义是，如果您有一个以该语言生成字符串的源，则第 n^个符号的熵的限制，以之前的 n-1 个为条件（假设源是[固定](https://en.wikipedia.org/wiki/Stationary_process)的） ）。

这种来源的一个足够好的近似值是一个大的英文文本语料库。[Open National American 语料库](http://www.americannationalcorpus.org/)非常好（100M 字符，涵盖所有类型的书面文本）。然后，逼近上述限制的基本算法是，对于给定的 n，查看文本中出现的所有 n-gram，并建立在定义中涉及的条件熵的各种概率的统计估计。熵率的计算。

完整的[源代码](http://pit-claudel.fr/clement/blog/files/entropy-rate.py)很简短（大约 40 行 Python 代码）。我最近发表了[一篇关于估计英语熵率的博客文章](http://pit-claudel.fr/clement/blog/an-experimental-estimation-of-the-entropy-of-english-in-50-lines-of-python-code/)，其中涉及更多细节，包括数学定义和完整实现。它还包括对各种相关论文的引用，包括[Shannon 的原始文章](http://cm.bell-labs.com/cm/ms/what/shannonday/shannon1948.pdf)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T21:23:59.403

估计文本的香农熵值。人类无法准确地找出答案。您可以通过在其上运行有效的压缩算法 (PAQ) 来估计它，或者使用人类来预测给定字符串的下一个字母。人类会做得很好，因为他们应用语义知识，而不仅仅是统计知识或句法知识。

简短回答：尝试尽可能压缩您拥有的数据/文本并计算您凭经验需要多少位。

这取决于具体算法，您可以将数字降低到什么程度。这将始终只是香农熵的上限（请记住，永远不会知道确切的值）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-15T13:09:06.317

Oli Charlesworth 是正确的，熵是根据概率定义的，而不是文本。

为数据生成无序度量的唯一真正方法是使用 Kolmogorov 复杂度。虽然这也有问题，特别是它是不可计算的，并且还没有严格定义为必须任意选择一种基础语言——正如 Oli 所说的“上下文”。如果测量的无序与将要处理数据的事物相关，则可以解决这种明确的定义。因此，当考虑在特定计算机上进行压缩时，基本语言将是该计算机的汇编。

因此，您可以将文本的无序定义如下：

用汇编语言编写的输出文本的最短程序的长度。

# iphone - Apple Accelerate Framework vDSP_zvmags PACKED 格式？

> ID：10066503
> 
> 赞同：0
> 
> 时间：2012-04-08T21:04:58.473
> 
> 标签：iphone, signal-processing, fft

我看到一些示例代码使用调用 vDSP_fft_zrip 的复杂结果调用 vDSP_zvmags 以获得幅度^2。zrip 的输出说它是 PACKED 拆分复合格式，但在 vDSP_zvmags 的文档中它只是说拆分复合。

vDSP_zvmags 的输入也是 PACKED 格式，还是在通过之前需要进行一些操作？

非常感谢雷

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T22:07:51.207

您需要解压 vDSP_fft_zrip() 的结果。其他函数都不希望以这种方式打包数据。[有关实际拆包的一些信息here](https://stackoverflow.com/questions/8845542/understanding-fft-in-auriotouch2/8854198#8854198)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-10T18:06:45.400

在 N 点数据上使用 vDSP_fft_zrip 执行 fft 会给您 N/2 点 PACKED 分裂复合体，其中在索引 0 中，实部显示 DC 量（fft 的索引 0），虚部显示奈奎斯特量（fft 的索引 N）。更多详情：[https ://developer.apple.com/library/ios/documentation/Performance/Conceptual/vDSP_Programming_Guide/UsingFourierTransforms/UsingFourierTransforms.html#//apple_ref/doc/uid/TP40005147-CH3-SW1](https://developer.apple.com/library/ios/documentation/Performance/Conceptual/vDSP_Programming_Guide/UsingFourierTransforms/UsingFourierTransforms.html#//apple_ref/doc/uid/TP40005147-CH3-SW1)

您可以使用 vDSP_zvmags 并获得正确结果的一个技巧是这样的：

```
const int LOG2_N = 10 ; // (say N=1024)
const int N = 1 << LOG2_N ;

FFTSetup fftSetup;
DSPSplitComplex tempSplitComplex;

x = new float[N] ;    // N point data you can put your data 
X = new float[N/2+1] ; // magnitude of fft of signal from index 0 (dc) to N/2 (Nyquist)

tempSplitComplex.realp = new float[N/2];
tempSplitComplex.imagp = new float[N/2];

fftSetup = vDSP_create_fftsetup(LOG_N, kFFTRadix2);
vDSP_ctoz((DSPComplex *) x, 2, &tempSplitComplex, 1, N/2 ) ;
// perform fft
vDSP_fft_zrip(fftSetup, &tempSplitComplex, 1, LOG_N, kFFTDirection_Forward) ;
// calculating square of magnitude for each value
vDSP_zvmags(&tempSplitComplex, 1, X, 1, N/2); 
// after this line X[0] is incorrect and X[N] is not calculated,
// but others are correct, so we need to fix those two (X[0], and X[N])
// DC and Nyquist ffts' imaginary parts are zero, 
// so Nyquist fft is stored in imaginary part of DC fft
X[0] = tempSplitComplex.realp[0] * tempSplitComplex.realp[0];  // DC squared
X[N/2] = tempSplitComplex.imagp[0] * tempSplitComplex.imagp[0]; // Nyquist squared 
```

# prolog - 序言添加

> ID：10066518
> 
> 赞同：1
> 
> 时间：2012-04-08T21:06:47.843
> 
> 标签：prolog

很长一段时间以来，我都对序言中的加法谓词感到困惑。任何帮助都会对我有很大帮助..

这是我的谓词：

`p(s(U,I), [s(A,B)|P1], T1,H(N, E), P,C) :- m(s(E,F), p(s(U,I), [s(A,B)|P1], +(C,F) ,H(N,E), P,C).`

除此部分外，一切正常：

+(C,F) 总是给出像 3+2 而不是像 5 的值。

我已经尝试了所有可能的方法，例如

`p(s(U,I), [s(A,B)|P1], T1,H(N, E), P,C) :- m(s(E,F)), C2 is C+F, p(s(U,I), [s(A,B)|P1], C2 ,H(N,E), P,C).`

但每次它以 someinteger+someinteger 的形式返回，例如 3+2 而不是 5。

任何帮助都会非常有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T21:48:38.013

您必须使用`is/2`谓词来执行算术，即`X is 3 + 2.`. 否则它不被“评估”！

尝试：

```
p(s(U, I),
  [s(A, B)|P1],
  C1,
  H(N, E),
  P,
  C) :-
    m(s(E, F)),
    C2 is F + C1,
    p(s(U, I),
      [s(A, B)|P1],
      C2,
      H(N, E),
      P,
      C). 
```

如果您将谓词放在其他谓词参数位置，则不会执行谓词（好吧，如果我们在这里谈论的是非元谓词）。那是你的问题。

# php - 在 PHP 中创建集合类的目的是什么？

> ID：10066519
> 
> 赞同：9
> 
> 时间：2012-04-08T21:06:48.483
> 
> 标签：php, collections

我一直在这里阅读 Alejandro Gervasio 的优秀服务层系列：http: [//www.devshed.com/cp/bio/Alejandro-Gervasio/](http://www.devshed.com/cp/bio/Alejandro-Gervasio/)我注意到他也是喜欢 PHP 集合的开发人员之一，如[http： //www.devshed.com/c/a/PHP/PHP-Service-Layers-Handling-Entity-Collections/1/](http://www.devshed.com/c/a/PHP/PHP-Service-Layers-Handling-Entity-Collections/1/)

这是为什么？为什么要创建一个通过本身使用数组来模拟简单关联数组的类？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-08T21:14:39.677

我没有读过这篇文章，但我可以告诉你我为什么一般来说这样做：

1.  搜索/排序/访问：我可以在集合中抽象搜索、过滤和访问我想要的项目，而无需使用特殊方法进入数据库，并且不依赖于单个数组键。
2.  如果您可以传入 Entity 或 EntityCollection 接口，则更容易将其插入到实体管理接口中 - 同样在这里，您可以将功能封装在集合中，以便对多个实体执行操作。并不是说您不能只在循环中执行此操作，而是它可以让您将其隐藏起来并为不同的集合类进行特定的操作）。
3.  集合序列化 - 自定义序列化（考虑选择特定属性）以序列化为特定字符串格式。
4.  您仍然可以轻松地支持数组接口以进行基本访问和迭代。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T10:14:00.410

如果我可以用我在教义 2 中观察到的内容来完成答案：

使用 Doctrine，您可以使用`Collection`界面，而无需关心它是如何工作的。该接口提供过滤、排序、...

但是 Doctrine 提供了`Collection`命名的`PersistentCollection`. 你甚至不知道你正在使用它，因为你使用了界面，但是有了这个特殊的集合，Doctrine 将能够在你过滤/搜索/排序集合时智能且透明地进行数据库查询。它还将使 Doctrine 仅在访问（延迟加载）时才加载集合的内容（对象列表），这有助于提高性能。

这对于 PHP 数组是不可能的，您必须完全从数据库中加载它，然后执行您的操作。

# python - python中的线程示例

> ID：10066525
> 
> 赞同：-1
> 
> 时间：2012-04-08T21:08:03.943
> 
> 标签：python, multithreading

我基本上是在尝试编写 mapreduce 的多核版本，只是为了看看我是否理解了这个概念。并且还想学习python中的线程。

我可以说两块文本字符串。

我如何使用多线程同时处理它们（比如说将它们标记为单词）。我以为我理解了文档，但这是一部分（多线程程序），如果它必须高效，就必须非常小心。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T23:05:17.887

我建议您尝试使用该`multiprocessing`模块，并使用它的`map()`方法。这将让您有效地使用多个内核。

由于 Python 解释器中的锁定耗时，Python 线程的效率不如预期的那么高。有一个`threading`模块，但您可能最好使用该`multiprocessing`模块来解决 map/reduce 类型的问题。

此外，如果您想确保您了解 map/reduce，为什么不使用真正的 map/reduce 系统呢？Hadoop 是一个可用的免费软件 map/reduce 系统，可以将 Python 与 Hadoop 一起使用：

[http://www.michael-noll.com/tutorials/writing-an-hadoop-mapreduce-program-in-python/](http://www.michael-noll.com/tutorials/writing-an-hadoop-mapreduce-program-in-python/)

# c - 使用 freopen 和之后使用 fopen 是否合法？

> ID：10066528
> 
> 赞同：2
> 
> 时间：2012-04-08T21:08:37.227
> 
> 标签：c, printf, fopen, freopen

假设我有一个字符串`char* str`。我通过以下方式将其打印到缓冲区：

```
char buf[MAX_LEN];
freopen("tmp","w",stdout);
printf("%s\n",str);
fflush(stdout);
fp = fopen(tmp,"r");
if (fp == NULL) return;
fgets(buf,MAX_LEN,fp);
fclose(fp);
fclose(stdout); 
```

此代码可能会导致无效的流缓冲区句柄吗？`freopen`使用和使用它是否合法`fopen`？基于我的系统的限制，我不能使用`fprintf`和`sprintf`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T21:19:34.483

从理论上讲，它是完全合法的并且工作正常。根据它的手册页，它甚至是它的主要用例：

> 该`freopen()`函数打开名称为 path 指向的字符串的文件，并将 stream 指向的流与它相关联。原始流（如果存在）已关闭。模式参数的使用与 `fopen()` 函数中一样。该函数的**主要用途**是 **更改**与标准文本流（ 、、或）关联的文件`freopen()`**`stderr``stdin``stdout`**

 **`"tmp"`在实践中，您的代码将无法正常工作：主要在和`tmp`& 缺少标题之间存在一些错误。此代码将起作用：

```
#include <stdio.h>
#define MAX_LEN 512

int main() {
  const char* str = "data\n";
  FILE* fp;
  char buf[MAX_LEN];

  freopen("tmp","w",stdout);
  printf("%s\n",str);
  fflush(stdout);
  fp = fopen("tmp","r");
  if (fp == NULL) return;
  fgets(buf,MAX_LEN,fp);
  // here, buf gets str's content 
  fclose(fp);
  fclose(stdout);
  return 0;
} 
```**

# linux - 合并具有相似列条目的两个文件

> ID：10066530
> 
> 赞同：-1
> 
> 时间：2012-04-08T21:08:55.440
> 
> 标签：linux, perl, shell, unix

我有一些文件，其中包含用户名和数据传输速率（以 MB/s 为单位）。这些数据收集了一年，每个月的报告都保存在 12 个不同的文件中。我必须合并所有文件以准备最终报告。

文件如下

```
Filename1 : January

#User Name           #Data Transferred

A. Paul                       300004
Jason                        600000
Mayur Pandey             40000
Kelly H                       459000
Ryan M                       349000

Filename2 : March 

#User Name           #Data Transferred

Senthl V R                  600000
Mayur Pandey                40000
Kelly H                     459000
Pratap S                    349000
A. Paul                     300004 
```

同样，我还有 10 个文件。我必须将所有这些文件合并到一个文件中，最终输出应如下所示：

```
Final Report:

#Username     #January      ....     #March ......... #December      #Total

A. Paul        300004                300004            Not available 600008
Pratap S       Not availanble        30000             32000         7899887
Kelly H        459000                459000            459000        3424448274
Mayur Pandey   40000                 400000            400000        242424442
Senthl V R     Not available         600000            34544         53546464
Jason          600000                Not available     3434343       43434355 
```

我需要一个 Perl 脚本来自动执行此操作，而不是使用 Excel 或手动执行。

这些报告每月生成一次，名称不按排序顺序存储。名称存储在最近使用过数据传输工具的用户中。还有一些情况下，用户在特定月份根本没有使用数据传输；在这种情况下，用户名不会出现在月度报告文件中。在这种情况下，我必须在月份名称列中添加*不可用。*

所有字段或列值由 \t TAB 分隔并存储在普通 txt 文件中。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T22:19:32.153

这比真正的困难更繁琐。文件名成为输出中的列标题。您可能会将命令行上文件名的顺序视为它们作为输出列出现的顺序；否则，你会积累太多的知识。当您阅读每个文件时，您会将行拆分为名称和编号。您将需要一个按名称索引的哈希，并且值将是对哈希的引用或对数组的引用。

输出相对简单。您决定显示名称的顺序（您的示例输出没有可辨别的顺序），然​​后按该顺序逐步遍历哈希。对于每个条目，您可以打印每列中的值，在缺少条目时发现并在缺少值时打印“不可用”或附近。您可以随时累积行的总数，同样也可以累积总总数。

您可能想要右对齐数字，而不是左对齐它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:15:02.363

虽然下面的代码在某处不是很聪明，但我认为它可以解决你的问题。

```
use warnings;
my @file_list=("January","February","March","April","May","June","July","August","September","October","November","December");
my %priorities=(   
    January=>1,
    February=>2,
    March=>3,
    April=>4,
    May=>5,
    June=>6,
    July=>7,
    August=>8,
    September=>9,
    October=>10,
    November=>11,
    December=>12
);    
my %report_datas=();    
foreach my $file_name (@file_list) {
    open FH , "<" , $file_name or die("can not open file");
    $skip_line=0;
    while(<FH>) {
            $skip_line++;
        next until $skip_line>2;    #skip the header(first two lines)
        chomp;

        if(/[^\d]+/) {         #get the name
            $name=$&;
            $name=~s/\s+$//;   #strip the empty chars at the end 
        }
        if(/[\d]+/) {        #get the transfer data
            $data=$&;
        }

        $month=$file_name;
        $report_datas{$name}{$month}=$data if not exists $report_datas{$name}{$month};  
        $report_datas{$name}{"priority"}=$priorities{$month};              #always store the latest month while we are reading file_name from January to December 
   }
   close FH;
}

#sort names by the month of using transfer data
@sorted_names = sort { $report_datas{$a}{"priority"} <=> $report_datas{$b}{"priority"} } keys %report_datas;  

#print result
printf "%-18s%-18s%-18s%-18s%-18s%-18s%-18s%-18s%-18s%-18s%-18s%-18s%-18s%-18s\n\n","#Username","#January","#February","#March","#April","#May","#June","#July","#August","#September","#October","#November","#December","#Total";
foreach my $name (@sorted_names) {
    my $sum=0;
    printf "%-18s",$name;
    foreach my $month (@file_list) {
        if ( exists $report_datas{$name}{$month}) {
            printf "%-18d",$report_datas{$name}{$month};
        $sum+=$report_datas{$name}{$month};
        } else {
        printf "%-18s","Not available";
        }
    }

    print "$sum\n";
} 
```

# deployment - 使用 CLI 自动设置 jenkins 用户

> ID：10066536
> 
> 赞同：8
> 
> 时间：2012-04-08T21:09:27.570
> 
> 标签：deployment, automation, jenkins, user-management

我没有找到任何对 jenkins-cli 工具的用户相关命令的引用。

我需要这个来自动化部署。

有没有卷土重来？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-10-05T10:22:30.803

要使用 jenkins 内部数据库，只需使用以下命令。

```
echo 'jenkins.model.Jenkins.instance.securityRealm.createAccount("user1", "password123")' | \
   java -jar jenkins-cli.jar -s http://localhost:8080/ groovy = 
```

这将创建 user=user1 和 password=password123

* * *

如果您有任何现有用户并且限制匿名访问您的詹金斯，您可以指定用户名和密码

--username "user_name" 和 --password "password"

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T16:30:20.080

如果您更详细地指定您要做什么，这里的人可能会更好地帮助您。也就是说，这里有一些指针：

所有 CLI 命令都可以通过`http://[jenkins-server]/cli`. 未找到的内容无法通过 CLI 获得。您可以通过CLI 命令中的`--username`和`--password`（或）选项指定用户名/密码。`--password-file`

Jenkins 自动化的另一个选择是使用[Python JenkinsAPI](http://pypi.python.org/pypi/jenkinsapi)。

您还可以使用*wget*和*curl*等工具来执行某些操作（例如[开始构建](https://wiki.jenkins-ci.org/display/JENKINS/Remote+access+API)）。在那里，您可以使用特定于用户的令牌而不是用户名/密码。

[这是另一个](https://wiki.jenkins-ci.org/display/JENKINS/Authenticating+scripted+clients)可能有用的链接。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-09T17:21:21.537

也许你根本不想使用 Jenkins 的内部用户数据库。有许多“身份验证和用户管理”插件。

如果您喜欢 MySQL，那么有一个 MySQL 身份验证器（它读取用户和密码表），并且您的“adduser”命令可以在该表上执行插入操作。

如果您喜欢平面文件，则有一个“脚本安全领域”，您可以在其中使用任意脚本进行身份验证。以您喜欢的格式编写一个包含用户和密码组合的文件，编写一个写入该文件的“adduser”脚本，并编写一个读取文件并确定是否对用户进行身份验证的身份验证脚本。

您还可以连接到 LDAP 服务器、Active Directory、Atlassian Crowd、Unix 用户帐户 (pw_auth) 或您的应用程序服务器使用的任何身份验证（例如，如果它在 Tomcat 服务器之外运行，您可以告诉 Jenkins 让 Tomcat对用户进行身份验证，并设置 Tomcat 以按照您的意愿进行操作。

# java - 如何仅使用内置包在 Java 中绘制函数？

> ID：10066538
> 
> 赞同：0
> 
> 时间：2012-04-08T21:09:30.020
> 
> 标签：java, graphing

我试图弄清楚如何处理这项任务。我们将仅使用 java.* 和 javax.* 中包含的内容来绘制具有 x 和 y 约束的给定函数。

我的一个想法是在每个 x_n 处找到函数的值，使得 x_n = x + .01*n，然后在每个点之间画一条线。

例如，如果 f(x) = 3x, x = [0..3]，我会找到 f(0.00), f(0.01), f(0.02),..., f(2.99) 的值, f(3.00) 并在每个值之间画线。

这行得通，还是有更好的方法？请记住，这是我们在 Java 中的第一个作业，所以方法越简单，我就越能理解它。我很感激任何意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T21:40:55.677

这是一个非常好的方法，而且几乎是最简单的。去吧！

对于一般的解决方案，应根据 x 的范围和图像的像素大小来设置 x 的变化（当前为 0.01）。

例如，如果 x=[0..100] 您不想绘制 10,001 个点，那么它的效率会很低，而且看起来也很糟糕。如果您每隔几个 x 像素（3 或 4 个？）绘制一个点并在它们之间绘制直线，通常看起来最好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T21:43:22.000

您可以使用 java.awt.geom.GeneralPath 类来执行此操作。[例子](http://docs.oracle.com/javase/tutorial/2d/geometry/arbitrary.html)

# python - 在 appengine python 中使用 multipart/form-data 发布请求不起作用

> ID：10066540
> 
> 赞同：5
> 
> 时间：2012-04-08T21:10:08.810
> 
> 标签：python, django, google-app-engine, post

我正在尝试将来自 appengine 应用程序的多部分发布请求发送到托管在 dotcloud 上的外部（django）api。该请求包括一些文本和一个文件 (pdf)，并使用以下代码发送

```
from google.appengine.api import urlfetch
from poster.encode import multipart_encode
from libs.poster.streaminghttp import register_openers

register_openers()
file_data = self.request.POST['file_to_upload']
the_file = file_data
send_url = "http://127.0.0.1:8000/"
values = {
          'user_id' : '12341234',
          'the_file' : the_file
          }

data, headers = multipart_encode(values)
headers['User-Agent'] = 'Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)'
data = str().join(data)
result = urlfetch.fetch(url=send_url, payload=data, method=urlfetch.POST, headers=headers)
logging.info(result.content) 
```

当此方法运行时，Appengine 会给出以下警告（我不确定它是否与我的问题有关）

```
Stripped prohibited headers from URLFetch request: ['Content-Length'] 
```

并且 Django 通过以下错误发送

```
<class 'django.utils.datastructures.MultiValueDictKeyError'>"Key 'the_file' not found in <MultiValueDict: {}>" 
```

django 代码非常简单，当我使用邮递员 chrome 扩展程序发送文件时可以工作。

```
@csrf_exempt
def index(request):
    try:
        user_id = request.POST["user_id"]
        the_file = request.FILES["the_file"]
        return HttpResponse("OK")
    except:
        return HttpResponse(sys.exc_info()) 
```

如果我添加

```
print request.POST.keys() 
```

我得到一个包含 user_id 和 the_file 的字典，表明该文件没有作为文件发送。如果我对文件做同样的事情，即

```
print request.FILES.keys() 
```

我得到一个空列表[]。

# 编辑1：

我已经改变了我的问题以实施某人的建议，但这仍然失败。我还包括格伦发送的链接推荐的标题添加，但不高兴。

# 编辑2：

我也尝试将 the_file 作为变体发送

```
the_file = file_data.file
the_file = file_data.file.read() 
```

但我得到同样的错误。

# 编辑 3：

我也尝试将我的 django 应用程序编辑为

```
the_file = request.POST["the_file"] 
```

但是，当我尝试在本地保存文件时

```
path = default_storage.save(file_location, ContentFile(the_file.read())) 
```

它失败了

```
<type 'exceptions.AttributeError'>'unicode' object has no attribute 'read'<traceback object at 0x101f10098> 
```

同样，如果我尝试访问 the_file.file （因为我可以在我的 appengine 应用程序中访问）它会告诉我

```
<type 'exceptions.AttributeError'>'unicode' object has no attribute 'file'<traceback object at 0x101f06d40> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-13T16:42:54.670

这是我在本地测试的一些代码应该可以解决问题（我使用了与 webapp2 不同的处理程序，但尝试将其修改为 webapp2。您还需要在此处找到的海报库[http://atlee.ca/software/poster/](http://atlee.ca/software/poster/) ):

在 GAE 上的 POST 处理程序中：

```
from google.appengine.api import urlfetch
from poster.encode import multipart_encode
payload = {}
payload['test_file'] = self.request.POST['test_file']
payload['user_id'] = self.request.POST['user_id']
to_post = multipart_encode(payload)
send_url = "http://127.0.0.1:8000/"
result = urlfetch.fetch(url=send_url, payload="".join(to_post[0]), method=urlfetch.POST, headers=to_post[1])
logging.info(result.content) 
```

确保您的 HTML 表单包含`method="POST" enctype="multipart/form-data"`. 希望这可以帮助！

**编辑：** 我尝试使用 webapp2 处理程序并意识到提供文件的方式与我用来测试的框架的工作方式不同（KAY）。这是应该可以解决问题的更新代码（在生产中测试）：

```
import webapp2
from google.appengine.api import urlfetch
from poster.encode import multipart_encode, MultipartParam

class UploadTest(webapp2.RequestHandler):
  def post(self): 
    payload = {}
    file_data = self.request.POST['test_file']
    payload['test_file'] = MultipartParam('test_file', filename=file_data.filename,
                                          filetype=file_data.type,
                                          fileobj=file_data.file)
    payload['name'] = self.request.POST['name']
    data,headers= multipart_encode(payload)
    send_url = "http://127.0.0.1:8000/"
    t = urlfetch.fetch(url=send_url, payload="".join(data), method=urlfetch.POST, headers=headers)
    self.response.headers['Content-Type'] = 'text/plain'
    self.response.out.write(t.content)
  def get(self):
    self.response.out.write("""
    <html>
        <head>
            <title>File Upload Test</title>
        </head>
        <body>
            <form action="" method="POST" enctype="multipart/form-data">
                <input type="text" name="name" />
                <input type="file" name="test_file" />
                <input type="submit" value="Submit" />
            </form>
        </body>
    </html>""") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T00:03:50.820

您正在对应该多部分编码的数据进行 urlencoding。看看这个：[Trying to post multipart form data in python, won't post](https://stackoverflow.com/questions/6850239/trying-to-post-multipart-form-data-in-python-wont-post)

# linux - 如何自动测量两台主机之间的带宽使用情况

> ID：10066546
> 
> 赞同：1
> 
> 时间：2012-04-08T21:11:06.083
> 
> 标签：linux, networking, bandwidth, wireshark

我有一个具有 TCP 客户端和服务器的应用程序。我在不同的机器上设置客户端和服务器。现在我想测量消耗了多少带宽（在应用程序的单次运行期间发送和接收的字节数）。我发现wireshark 就是这样一种工具，可以帮助我获得这个统计数据。但是，wireshark 似乎依赖于 GUI。我想要的是一种自动测量和报告该统计数据的方法。我不关心有关wireshark捕获的单个数据包的信息。我不需要那些信息。有没有办法运行wireshark，以便它所做的只是写入文件，当应用程序在两端运行时在两个主机之间发送和接收的总字节数？

另外，有没有更好的方法来捕捉这个统计数据？通过 netstat 或 /proc/dev/net 或任何其他工具？

我的两台机器上都运行了 ubuntu 10.04 或更高版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T21:24:42.557

[Bro](http://www.bro-ids.org)是测量面向连接的统计数据的合适工具。您可以记录应用程序通信的跟踪或实时分析：

```
bro -r <trace>
bro -i <interface> 
```

`conn.log`此后，查看同一目录中的连接日志 ( )，了解应用程序发送和接收的字节数。具体来说，您对 TCP 有效负载大小感兴趣，它`conn.log`通过列`orig_bytes`和`resp_bytes`. 这是一个例子：

```
bro-cut id.orig_h id.resp_h conn_state orig_bytes resp_bytes < conn.log | head 
```

产生以下输出：

```
192.168.1.102   192.168.1.1     SF      301     300
192.168.1.103   192.168.1.255   S0      350     0
192.168.1.102   192.168.1.255   S0      350     0
192.168.1.103   192.168.1.255   S0      560     0
192.168.1.102   192.168.1.255   S0      348     0
192.168.1.104   192.168.1.255   S0      350     0
192.168.1.104   192.168.1.255   S0      549     0
192.168.1.103   192.168.1.1     SF      303     300
192.168.1.102   192.168.1.255   S0      -       -
192.168.1.104   192.168.1.1     SF      311     300 
```

每行代表一个连接，省略了传输层端口。最后两列代表发起者（第一列）和响应者（第二列）发送的字节。该列`conn_state`表示连接状态。请参阅[文档](http://www.bro-ids.org/documentation/scripts/base/protocols/conn/main.html)以了解所有可能的字段值。一些重要的值是：

*   **S0**：看到连接尝试，没有回复。
*   **S1**：连接已建立，未终止。
*   **SF**：正常建立和终止。请注意，这与状态 S1 的符号相同。您可以将两者区分开来，因为对于 S1，摘要中不会有任何字节数，而对于 SF，会有。
*   **REJ**：连接尝试被拒绝。

# asp.net-mvc-3 - ASP.NET 神秘文件夹一瞥

> ID：10066548
> 
> 赞同：0
> 
> 时间：2012-04-08T21:11:23.497
> 
> 标签：asp.net-mvc-3, razor, glimpse

我已经在我的 ASP.Ntt MVC3 Web 项目中安装了 Glimpse NuGet 包。我在 Web 服务器上遇到错误，因为在我的 _Layout.cshtml 母版页中有以下参考：

```
<script src="@Url.Content("~/Glimpse/Resource/?resource=Pager")" type="text/javascript"></script> 
```

但是，Web 项目中的任何地方都没有 Glimpse 目录。所以这里出了点问题。

我在 Glimpse 文档中找不到任何线索（比大多数文档都好）。那么，该目录应该在那里吗？是什么把它放在那里？为什么我的系统上没有它？我应该从我的 _Layout.cshtml 中删除引用吗？

我尝试重新安装 Glimpse NuGet 包，但这并不能解决问题。任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T11:53:51.850

我不确定您是如何将该脚本标记添加到布局文件中的，因为 Glimpse 不需要修改应用程序中的任何内容，除了配置。

您应该能够删除该行。

此外，让我们知道您已安装的所有 Glimpse 软件包，我们将调查任何行为不端的软件包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T21:30:27.713

实际上，我使用 google 发现这与 ELMAH 记录器有某种联系： [https ://github.com/Glimpse/Glimpse/issues/73](https://github.com/Glimpse/Glimpse/issues/73)

希望对您有所帮助或给出想法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T21:31:30.250

它最有可能（应该是？）由 MVC 路由处理。看起来 Glimpse 的代码在这里：[https](https://github.com/Glimpse/Glimpse/) ://github.com/Glimpse/Glimpse/所以深入研究。：D

# c# - 从 C# 设置非托管 C dll 的公共字段

> ID：10066550
> 
> 赞同：4
> 
> 时间：2012-04-08T21:11:37.140
> 
> 标签：c#, dll, delegates, interop, dllimport

我正在为非托管 C dll 编写 C# 绑定。

dll 提供了 5 个钩子来返回多个数据：

```
typedef void (*t_libpd_printhook)(const char *recv); 
```

并导出如下字段：

```
 EXTERN t_libpd_printhook libpd_printhook; 
```

现在我正在使用[Interop Assistant](http://clrinterop.codeplex.com/releases/view/14120)生成绑定代码，这给了我一个委托定义：

```
public delegate void t_libpd_printhook([In] [MarshalAs(UnmanagedType.LPStr)] string recv); 
```

那么我可以使用一些神奇的互操作函数调用来设置 DLL 中的 t_libpd_printhook 字段吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T21:44:24.653

您可以使用`LoadLibrary`and`GetProcAddress`获取指向导出`libpd_printhook`变量的指针。然后您可以使用`Marshal.WriteIntPtr`和`Marshal.GetFunctionPointerForDelegate`分配给委托人。

```
[DllImport("kernel32", SetLastError=true, CharSet=CharSet.Unicode)]
static extern IntPtr LoadLibrary(string lpFileName);

[DllImport("kernel32", CharSet=CharSet.Ansi, ExactSpelling=true, 
    SetLastError=true)]
static extern IntPtr GetProcAddress(IntPtr hModule, string procName);

[DllImport("kernel32.dll", SetLastError=true)]
static extern bool FreeLibrary(IntPtr hModule);

.....

IntPtr lib = LoadLibrary(@"mydll.dll");
IntPtr plibpd_printhook = GetProcAddress(lib, "libpd_printhook");
Marshal.WriteIntPtr(plibpd_printhook, 
    Marshal.GetFunctionPointerForDelegate(mydelegate));
FreeLibrary(lib); 
```

您将需要添加我为了简洁示例而删除的错误检查。

现在，如果您可以控制非托管库，我仍然建议添加一个函数来封装对该函数指针的写入。这对我来说感觉像是一个更好的界面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T21:14:57.687

PInvoke 不支持导出的变量。您需要创建一个非托管函数来获取您的委托并将其复制到该字段中。

# php - 根据浏览器宽度显示不同的 Adsense 广告

> ID：10066553
> 
> 赞同：6
> 
> 时间：2012-04-08T21:11:57.727
> 
> 标签：php, javascript, css, adsense

我正在制定一个响应式设计，它从大约 960 像素宽开始，并使用 css3 媒体查询减少到 320 像素。

我目前在我的内容上方和下方使用 728 像素的横幅，但是一旦你低于 728 像素，这显然会中断。

我需要的是在浏览器宽度低于 728 像素时显示较小广告的最简单方法。我不能简单地将广告单元加载到 div 中并使用 css 隐藏它们，因为这违反了 adsense TOS。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T15:51:00.330

用javascript做什么呢？您的页面最初可以在没有广告单元 html 代码的情况下加载，但它可以使用 javascript 检测屏幕尺寸，然后将适合初始浏览器尺寸的广告单元添加到页面中。只有桌面类型的浏览器可以调整视口窗口的大小，所以可能会忘记这个问题。调整浏览器视口大小的人可能正在玩耍或其他什么，但仍然会看到第一广告印象。想一想，您打开浏览器，然后因为无法正确查看而调整窗口大小，即使如此，当您在页面之间导航网站时，您还要执行多少次，也许一次（第一次时间）。谷歌不希望你破坏广告印象，所以我认为这不违反 TOS 根据窗口大小加载广告。只是不要 t 在调整大小并加载其他广告后销毁广告（有风险）。移动设备无法调整视口大小（除旋转外），它们始终会看到正确的 AD 大小。

Ryan Underdown 在[http://ryanunderdown.com/ppc/responsive-ads-with-adsense.php提供了一个简单的解决方案](http://ryanunderdown.com/ppc/responsive-ads-with-adsense.php)

另一个 SO 问题：[使 Adsense 响应式](https://stackoverflow.com/questions/9366048/making-adsense-responsive)

如果初始视口大小对于广告来说太小，即使[Google 的 CSE也不会在您的网站上显示广告，即使您将窗口大小调整得更大，它也不会在其中重新加载广告，直到刷新浏览器。](http://www.google.com/cse/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-16T14:46:53.623

第一次 - 我对 728 排行榜与 336 大矩形进行了 AB 测试。336 的表现提高了 75% 以上，页面浏览量超过 300,000。

重点是 - 不要使用 728，也不建议使用自适应广告单元。

我的另一项测试通过从自适应广告单元切换到 2 个固定大小的矩形（一个用于移动设备，一个用于台式机/平板电脑），将收入提高了 100% 以上。

您可以使用这样的东西来确定用户代理：

```
$iPod    = stripos($_SERVER['HTTP_USER_AGENT'],"iPod");
$iPhone  = stripos($_SERVER['HTTP_USER_AGENT'],"iPhone");
$iPad    = stripos($_SERVER['HTTP_USER_AGENT'],"iPad"); 
```

然后根据用户代理，您可以显示“移动”或“桌面”广告尺寸。

以下是如何使用 USER_AGENT 选择要展示的广告：http: [//www.adsenseninja.com/show-mobile-optimized-adsense-ads-for-smartphone-visitors-automatically-free-mobile-ads-php-script -for-wordpress/](http://www.adsenseninja.com/show-mobile-optimized-adsense-ads-for-smartphone-visitors-automatically-free-mobile-ads-php-script-for-wordpress/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-13T17:52:12.397

1.  使用自适应 AdSense 单元。

2.  如果这不是您想要的，请使用 JavaScript 检测可用宽度，然后选择适当的广告单元，然后将其注入您的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T00:09:01.077

可以通过隐藏的 div 和媒体库实现，但我认为谷歌禁止它:(

# python - 如何让程序不抛出“错误：无法加载弗洛伊德的算法库”

> ID：10066554
> 
> 赞同：0
> 
> 时间：2012-04-08T21:11:59.463
> 
> 标签：python, windows, linux, isometric

给大家的另一个问题-

所以我试图让一个名为 Pysomap 的程序工作（它基本上是 ISOMAP，但对于 python [http://web.vscht.cz/spiwokv/pysomap/]），我尽可能地遵循指示，在 Ubuntu 上构建它、Windows 和 Fedora（预建库），但似乎无法使其正常工作。在windows（这是首选的实现平台）上，每次我去python并导入pysomap时，它都会给我上面的错误。有人知道如何解决这个问题吗？

谢谢

-J

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T02:09:58.237

在 pysomap 目录中，创建一个 setup.py 文件，其内容如下：

```
from distutils.core import setup, Extension

setup(name="pysomap",
      version="2007.07",
      url ="http://web.vscht.cz/spiwokv/pysomap/",
      description="A library for isometric feature mapping.",
      license='Unknown',
      author="Vojtech Spiwok",
      py_modules=["floyd", "pysomap"],
      ext_modules=[Extension('_floyd', ["floyd_wrap.c", "floyd.c"])]
      ) 
```

构建`_floyd`扩展（假设您安装了 Python distutils 兼容的 C 编译器）：

```
python setup.py build_ext --inplace 
```

运行 demo.py：

```
python demo.py

Calculating distance matrix ............    2.24 s
Using epsilon-isomap, epsilon = 0.500000, calculating 2-dimensional embedding
Calculating graph matrix ...............    1.21 s
Calculating the shortest path matrix ...    2.22 s
Multidimensionally scalling ............    7.11 s
--------------------------------------------------
Total procedure ........................   12.79 s 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T00:44:07.587

我查看了代码，因为 Isomap 是一个很酷的算法。代码看起来不像是由熟悉 Python 的人编写的，整个 floyd 扩展模块编译有点粗制滥造——它实际上不是为我构建的，我很确定这是你的问题（他们抓住了为模块导入异常并打印出您给出的错误）。

我将一些硬编码的东西更改`build_floyd.sh`为我系统的不同硬编码值。（适当的构建系统将使这变得不必要）。这是在我的 Ubuntu 系统中有效的方法。我测试了它运行正常。

```
#!/bin/sh
# run this script to generate library for Floyd's
# algorithm library

echo "generating input files using SWIG ..."
swig -python floyd.i

echo "compiling ..."
# change compiler if you use other than gcc
gcc -c floyd.c floyd_wrap.c -I/usr/include/python2.6 -fPIC

echo "linking ..."
ld -shared floyd.o floyd_wrap.o -o _floyd.so 

#echo "for SELinux you must run chcon ..."
#chcon -t textrel_shlib_t _floyd.so 
```

您可能还必须将第一行更改`demo.py`为`#!/usr/bin/env python`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T00:33:23.213

该源代码已有 5 年以上的历史，floyd 的构建脚本看起来采用硬编码的 python2.4。

很明显您的`floyd`模块没有构建。您很可能必须返回构建步骤并确保正确生成`_floyd.so`.

如果您正确构建它，那么这对您来说应该不会失败：
`python -c "import _floyd"`

# php - 有什么方法可以阻止 GET 方法表单发送空变量？

> ID：10066558
> 
> 赞同：2
> 
> 时间：2012-04-08T21:12:20.587
> 
> 标签：php, html, forms

我在我的 WordPress 安装中使用以下表单作为高级搜索页面的一部分。

```
<form action="/advanced-search/" method="get"> 
```

表单工作正常，但生成的 URL 如下：

`/advanced-search/page/3/?act=s&f=cichlidae&g&s&c&r&tmin&tmax&hmin&hmax&pHmin&pHmax&cmin&cmax&sF&sM&aL&aD&aH`

有什么办法可以阻止表单发送那些空变量？在上面的示例中，仅`f`搜索了 (value `cichlidae`)。因此，我希望它生成这样的 URL：

`/advanced-search/?act=s&f=cichlidae``/page/3/`（如有必要，加上）。

我不能使用`$_POST`，因为我无法让 WordPress`paged`变量使用`$_POST`值。

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T21:17:33.807

为什么不使用 jQuery 的[`serialize`](http://api.jquery.com/serialize/)方法来收集字符串中的所有表单值？

```
$('form').submit(function() {
   var string = $(this).serialize();
   window.location.href = '/advanced-search/'+string;
}); 
```

它遍历所有表单元素，收集它们的值并将其转换为可读的字符串格式以供在 URL 中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T21:15:00.693

不内置到表单中，不 - 如果该字段存在，它将被发送。

您可以改用 Javascript 来提交表单，从而省略空字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T21:17:21.137

不，没有办法（没有 JavaScript）。如果有，这将是特定于浏览器的，因为它是浏览器决定如何处理表单数据。

另外，这个：

```
foo.php?a= 
```

...和这个：

```
foo.php 
```

...在语义上是不同的。在前者中，`a`通过空字符串 ( `""`) 传递，而在后者中，`a`根本不传递 ( `null`)。

此外，Wordpress 在这里是正确的，因为表单是搜索表单，因此它正在*检索*数据并且应该使用`GET`; 而不是像应该做的那样*创建*数据。`POST`

改变这种情况的一种方法（不使用 JavaScript）是使用网关脚本从 URL 中删除空参数并重定向。

每个例子：

```
$newGET = array();
foreach ($_GET as $key => $value) {
    if ($value !== '') $newGET[$key] = $value;
}

header('Location: some/url?'.http_build_query($newGET));
exit; 
```

# html - 从一页获取 html 内容并将其添加到我的网站

> ID：10066563
> 
> 赞同：0
> 
> 时间：2012-04-08T21:12:46.180
> 
> 标签：html, url

我隶属于 expedia，并且正在使用他们的 API 系统。他们启动网站的要求之一是将条款和协议添加到我的页面，他们给了我们这个页面： http: [//travel.ian.com/index.jsp](http://travel.ian.com/index.jsp?pageName=userAgreement&locale=en_US&cid=xxx) ?pageName=userAgreement&locale=en_US&cid=xxx 。我不想去不同的站点，并且由于更新，我无法复制和粘贴信息。我也不喜欢使用 iframe。有人对如何做到这一点有任何想法吗？这是一个在他们的网站上使用这个域名的网页：[http](http://www.helloweekends.com/terms.htm) ://www.helloweekends.com/terms.htm 。有谁知道他们是怎么做到的？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T21:17:55.703

由于它来自另一个域，因此无法使用 JavaScript，因为[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)。此外，依赖 JavaScript 进行更新对于禁用 JavaScript 的用户来说会很麻烦，因为他们看不到这些条款。由于您不想使用 iframe 或复制内容，我想您最好的办法是使用您选择的服务器端语言抓取他们的页面，然后将其显示在您的页面上。

但是，如果您依赖他们的标记，那么抓取可能会有些棘手。如果他们更改标记，您的脚本可能会中断，从而停止更新条款。

有各种关于如何抓取网站的教程。以下是几个 PHP 示例：

1.  [使用 PHP 进行网页抓取](http://www.thefutureoftheweb.com/blog/web-scrape-with-php-tutorial)
2.  [PHP 屏幕抓取教程](http://www.bradino.com/php/screen-scraping/)

**注意**确保他们允许您在实施之前抓取页面，这样您就不会违反他们的规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T21:18:59.140

你知道他们的 API 是否提供 JSON 服务吗？JSONP 调用可以为您获取值，但它会使您的页面依赖 javascript 让用户看到更新的页面。

另一种选择是使用任何其他服务器端语言的 PHP 来获取 url 的内容，处理它并返回您需要的块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T21:20:08.523

我建议使用[jQuery 提供的 load() 函数](http://api.jquery.com/load/)。它通过简单的 AJAX 调用来检索文件，您甚至可以使用选择器仅抓取页面的一部分。例如，将 HTML 页面的内容加载到 div 中：

```
$('#div_id').load('my_file.html'); 
```

或者只是加载页面的一部分：

```
$('#div_id').load('my_file.html #main_text_id'); 
```

# build - 如何获取和构建铬（svn 客户端太旧）

> ID：10066566
> 
> 赞同：0
> 
> 时间：2012-04-08T21:13:16.920
> 
> 标签：build, chromium

我正在尝试在 win7 和 VS 2010 上获取和构建铬。我关注[http://www.chromium.org/developers/how-tos/build-instructions-windows](http://www.chromium.org/developers/how-tos/build-instructions-windows) 和[http://www.chromium.org/developers/ how-tos/get-the-code](http://www.chromium.org/developers/how-tos/get-the-code)但没有运气。

这个文档让我很困惑，尤其是对于 depot 工具。

有人可以指导我如何获取代码（我收到错误 svn 到旧版本 - 将导演一一放在前面和最后）。

有没有一些视频或更好的分步教程。我想直接svn结帐。（如果我使用 cygwin svn，它会在编译时给出丢失的文件）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T21:40:59.657

我遇到了同样的问题并设法通过运行来解决它：

```
gclient runhooks --force 
```

文档说它应该在 src 文件夹中运行，但这对我不起作用，在包含修复它的 src 文件夹的文件夹中运行它。

我还在文档的“Official/WPO/LT​​CG build”部分发现了另一个问题，导致 C1083 PCH 文件未找到错误。

要解决此问题，您需要在 ~.gyp\include.gypi (C:\Users\USERNAME\.gyp\include.gypi) 中将 chromium_win_pch 变量设置为零，如下所示：

```
{
  'variables': {
    'chromium_win_pch': 0,
  }
} 
```

# deployment - gmail 脚本（统计报告）部署

> ID：10066571
> 
> 赞同：1
> 
> 时间：2012-04-08T21:14:02.510
> 
> 标签：deployment, gmail, installation

我需要开发一个简单的 gmail 脚本来收集一些统计信息。我找到了一个示例，例如：转到 GoogleDocs，创建一个新电子表格，转到工具 -> 脚本编辑器，输入您的脚本。这很好，很清楚。但是如何将它部署给我的客户以及他们如何运行它？

是否可以给他们一个链接或一个包，他们可以从中简单地安装此脚本，并且他们的 gmail 帐户中会出现一个新按钮“统计信息”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T23:19:24.807

GMail 应用程序中只能有[上下文小工具](https://developers.google.com/google-apps/gmail/contextual_gadgets)或侧边栏小工具。您不能让脚本或其结果直接出现在 GMail 中。

应用程序脚本可以发布到图库。请参阅[共享您的脚本部分](https://developers.google.com/apps-script/guide_writing_scripts)。不过，它必须等待谷歌的评论。不久前我尝试提交一个脚本，但它从未得到确认它已在某个时候发布。

几个快速的方法：

*   您向客户发送带有说明的源代码（例如“转到工具 => 脚本编辑器”、“粘贴我的代码”等）
*   与脚本本身共享电子表格（即使电子表格已共享，您也需要启用脚本代码共享）并告诉他们制作副本，包括脚本。

# android - 在链接中添加参数导致网络错误（Android 4.0.3+PhoneGap）

> ID：10066572
> 
> 赞同：2
> 
> 时间：2012-04-08T21:14:12.800
> 
> 标签：android, jquery-mobile, cordova

尝试从 index.html 页面导航到 purchase.html 时，如果我向链接添加参数，则会出现此“发生网络错误”

```
<a href="purchase.html?id=2">. 
```

删除“？id = 2”然后链接工作。

这是详细的错误消息：04-08 21:09:23.850: D/Cordova(967): DroidGap: GapViewClient.onReceivedError: 错误代码=-1 描述=发生网络错误。URL=file:///android_asset/www/purchase.html?id=2

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-08T21:24:25.503

这似乎是Android的一个主要问题。[http://code.google.com/p/android/issues/detail?id=17535](http://code.google.com/p/android/issues/detail?id=17535)

# python - 从 Django 应用程序向 SQL 表添加字段

> ID：10066573
> 
> 赞同：0
> 
> 时间：2012-04-08T21:14:26.197
> 
> 标签：python, sql, django

我正在开发一个专供秘书使用的应用程序。她有一叠数百张选票表格，上面有许多问题，并希望将这些数据输入一个程序以显示每个答案的总票数。每个问题都有多个答案。例如：

问：“重新选举现任董事会主席” 答：在“是”或“否”或“中立”之间选择

问题和答案每年都会发生变化，但公司当前使用的应用程序是用去年的问题和答案硬编码的。

我的目标是创建一个应用程序（在 Django/Python 中），它允许秘书根据需要添加/删除问题和答案。我对 Django 比较陌生...我在大学创建了一个应用程序，并且知道如何创建基本模型并为 GUI 实现 Twitter 引导程序。

但是我对如何让秘书添加自定义字段（显然是在SQL中定义的）感到有些困惑。有人对如何开始有任何小技巧吗？顺便说一句，我认识到使用网站的管理部分可以实现这一点，并欢迎对此提出任何建议。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T21:16:17.527

您真的不想将每个问题/答案实现为单独的数据库字段。

相反，制作一个问题表和一个答案表，并在答案表中有一个字段（通常是 a `ForeignKey`）来指示给定答案与哪个问题相关联。

# java - 使用二叉树跟踪词频

> ID：10066581
> 
> 赞同：1
> 
> 时间：2012-04-08T21:15:27.857
> 
> 标签：java, binary-tree, word-frequency

我目前正在学习二叉树和二叉搜索树，我正在进行的一项练习涉及读取文本文件，按字母顺序将每个单词存储在二叉树中，并使用不同的方法遍历树。以下是具体规格：

> 读入文本并构建包含文本中所有单词的二叉搜索树（按字母顺序），存储单词并在节点中记录单词的频率（每个单词在文本中出现的次数），并执行课堂上提到的树遍历。

我的问题是，当我将单词添加到树中时，如何跟踪它的频率？我们从来没有在课堂上讨论过相同的节点，所以我被困在这里。任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T21:21:16.013

简单的。二叉树节点将由两个元素组成，一个是字符串（比如键），另一个是整数计数（比如值）。在添加元素时检查它是否已经存在，如果是，则简单地增加计数，否则将元素添加为计数为 1 的新二叉树节点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T21:20:50.200

很难回答家庭作业问题...

因此，您的节点显然会包含它所代表的单词。当您插入一个新词时，您会创建节点，但在此之前，您会搜索该词。如果您的树中已经存在该单词的节点，只需检索该节点并在其中增加一个计数器。

```
public class MyNode
{
   String word;
   Integer counter;
} 
```

得到它？:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T21:20:27.000

> 将单词添加到树时如何跟踪单词的频率

1）除了 a 的`data` `left`和`right`成员之外，每次尝试在树中添加现有单词时， `TreeNode`添加另一个成员并递增 1。`count`

2）您可以使用单独的哈希表来保留单词和出现的映射。如果单词存在于哈希表中，只需增加计数。如果它不存在，则将其添加到树中。由于哈希表，这需要额外的空间

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T21:23:21.877

使用 HashMap，用 String、Integer 填充。遍历文本中的单词，如果尚未添加，则将其放入 Integer(occurrence) == 1 的地图中。如果之前添加过，则将 Integer 增加 1。

处理完所有文本后，您可以使用 String 和 Integer 填充对象列表，根据它们的 compareTo 方法对它们进行排序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-25T15:42:33.437

以防有人需要。

scala BST 容器的实现。

```
trait BSTree[+A]

case object Empty extends BSTree[Nothing]

case class Node[+A](left: BSTree[A], x: A, right: BSTree[A]) extends BSTree[A]

object BSTree {

  def insert[T](t: BSTree[T], k: T)(
    implicit ord: T => Ordered[T]
  ): BSTree[T] = t match {
    case Empty => Node(Empty, k, Empty)
    case Node(l, x, r) if k < x => Node(insert(l, k), x, r)
    case Node(l, x, r) if k == x => Node(l, k, r)
    case Node(l, x, r) => Node(l, x, insert(r, k))
  }

  def toList[T](t: BSTree[T]): List[T] = t match {
    case Empty => Nil
    // preorder traverse
    case Node(l, x, r) => x :: toList(l) ++ toList(r)
  }

  def apply[T](as: T*)(implicit ord: T => Ordered[T]): BSTree[T] = as.foldLeft(
    Empty: BSTree[T])((t, e) => insert(t, e))
}

object Main extends App {
    case class WordCount(c: Char, var count: Int) {
    override def toString: String = s"'$c' -> $count"
  }

  implicit def wordCountConvert(x: WordCount): Ordered[WordCount] =
    (that: WordCount) => if (x.c.<(that.c)) -1
    else if (x.c == that.c) {
      that.count = x.count + 1
      0
    } else 1

  val content = "Scala Cool!"
  val wordCountTree = BSTree(content.filter(_.isLetter).map(WordCount(_, 1)): _*)
  println(BSTree.toList(wordCountTree))
} 
```

并在此处输出

```
List('S' -> 1, 'C' -> 1, 'c' -> 1, 'a' -> 2, 'a' -> 1, 'l' -> 2, 'o' -> 2, 'l' -> 1, 'o' -> 1) 
```

看[这里的例子](https://scastie.scala-lang.org/LlHbVQHuRB60SOgAC4XQaQ)

# php - 是否有像 PHP 一样进行 Rijndael 256 位加密的 JavaScript 库？

> ID：10066582
> 
> 赞同：3
> 
> 时间：2012-04-08T21:15:28.290
> 
> 标签：php, javascript, encryption, mcrypt, rijndael

我一直在 PHP 中为我的 API 广泛使用 Rijndael 256 位加密，并希望将它用于我的用 JavaScript 编写的 API 包装器，但我一直无法找到与 PHP 中获得相同结果的解决方案.

PHP 的含义如下：

```
base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256,$password,$secretInformation,MCRYPT_MODE_CBC,$iv)); 
```

和

```
base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256,$password,$secretInformation,MCRYPT_MODE_EBC)); 
```

..以及解密变体。

我知道许多 256 位 AES 库没有得到与 PHP 使用 Rijndael 256 位加密相同的结果，因此我想知道是否有一个库能够执行 PHP 在上面的示例中所做的事情？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T03:21:00.957

MCRYPT_RIJNDAEL_256 不是具有 256 位密钥的 AES，它基本上是具有 256 位块大小的“AES”（AES 通常具有 128 位块大小）。Rinjdael 有很多选项，并通过将这些选项减少到仅 128 或 256 位密钥大小来标准化为 AES。因此，库必须支持标准（AES）而不是原型。

如果您想要 AES 256 或 128 （几乎所有库都实际支持），请使用 MCRYPT_RIJNDAEL_128 和 128 位或 256 位密钥。块大小的差异在安全方面并没有太大的区别。

此外，使用原始密码作为密钥是一个非常糟糕的主意。您可以使用基于密码的密钥派生函数（如 PBKDF2）从密码中获取密钥。

# c++ - QFileSystem entryInfo 不返回完整目录名称

> ID：10066586
> 
> 赞同：0
> 
> 时间：2012-04-08T21:16:00.800
> 
> 标签：c++, qt, filesystems

所以我的 Itunes 库中有一些重复的歌曲（准确地说是 844），所以我想我会写一个小程序来查找和销毁重复的歌曲。我遇到的问题是某些目录没有被正确读取。

例如，专辑的文件夹名称之一是“Greatest Hits, Vol. 2” 但读作“Greatest Hits, Vol”

显然是“。” 导致问题。有谁知道一种解决方法，可以让我读取完整的文件路径名（带句点）？

一小段代码

```
QString name;
int id;
    for (int a = 0; a < dir.entryList(QDir::Files | QDir::AllDirs | QDir::NoDotAndDotDot).length(); ++a)
        {
            name =  path() + "/" + baseName() + "/" + dir.entryList(QDir::AllEntries | QDir::NoDotAndDotDot).at(a);
            subFiles.append(new CKClone(id, path() + "/" + baseName() + "/" + dir.entryList(QDir::AllEntries | QDir::NoDotAndDotDot).at(a), this));

            // Updating the ID number to account for descendants.
            id = subFiles.last()->countDescendants(id);
        } 
```

上面的代码只是一个小片段，显然它自己并没有完成一大堆。它只是递归地读取所有文件和目录。

任何帮助将不胜感激，谢谢

耶克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T21:35:01.800

我实际上在 PyQt 中对此进行了测试，发现我并没有出现这个问题。这是使用 Qt 4.8 测试的，因此您可能需要检查它是否是特定于您的版本的问题。

目录结构如下：

```
testing/
    a path with spaces/
    patH_with_no_spaces/
    path with version, vol. 2/ 
```

测试片段

```
from PyQt4 import QtCore

d = QtCore.QDir("testing")
list(d.entryList(d.AllEntries|d.NoDotAndDotDot))

# output
[
    PyQt4.QtCore.QString(u'a path with spaces'), 
    PyQt4.QtCore.QString(u'path with version, vol. 2'), 
    PyQt4.QtCore.QString(u'patH_with_no_spaces')
] 
```

您可能想先尝试进一步简化代码，看看它是否是代码中的错误。每次循环、构建字符串和追加时，您似乎都在重新生成列表。尝试在循环之前保存一次该调用的 QStringList 结果`entryList`，并在其余代码中使用相同的对象。

# php - 将 64 位 debian 上的 PHP 扩展编译为 32 位 PHP 安装

> ID：10066587
> 
> 赞同：3
> 
> 时间：2012-04-08T21:16:08.717
> 
> 标签：php, php-extension

我正在尝试为 64 位系统上的 32 位 PHP 安装编译 PHP 扩展。但是，我在重新启动 apache 时收到以下警告：

```
Warning: PHP Startup: Unable to load dynamic library '/opt/lampp/lib/php/extensions/no-debug-non-zts-20090626/spotify.so' - /opt/lampp/lib/php/extensions/no-debug-non-zts-20090626/spotify.so: wrong ELF class: ELFCLASS64 in Unknown on line 0 
```

我使用以下命令编译所有内容：

```
/opt/lampp/bin/phpize; CFLAGS=-m32 CPPFLAGS=-m32 CCASFLAGS=-m32 ./configure --enable-spotify --with-php-config=/opt/lampp/bin/php-config; make && make install 
```

标志应确保它编译为 32 位。我已经安装`gcc-multilib`了`g++-multilib`

完成编译后（此日志： http: [//pastebin.com/MqgGgyzv](http://pastebin.com/MqgGgyzv)）我执行以下命令：

```
file /opt/lampp/lib/php/extensions/no-debug-non-zts-20090626/spotify.so 
```

它返回

```
/opt/lampp/lib/php/extensions/no-debug-non-zts-20090626/spotify.so: ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, not stripped 
```

所以它显然没有正确编译它，但我看不出我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T21:22:07.683

您正在*编译*，但*链接器*无意中创建了一个 64 位 .so。

解决方案是在您的 LDFLAGS 中也包含“-m32”：

[https://askubuntu.com/questions/85978/building-a-32-bit-app-in-64-bit-ubuntu](https://askubuntu.com/questions/85978/building-a-32-bit-app-in-64-bit-ubuntu)

# java - Mockito 匹配器和基元数组

> ID：10066590
> 
> 赞同：270
> 
> 时间：2012-04-08T21:16:31.603
> 
> 标签：java, mockito

使用 Mockito，我想在其参数列表中`verify()`调用方法`byte[]`，但我没有找到如何编写它。

```
 myMethod( byte[] ) 
```

我只是想要类似的东西`anyByteArray()`，如何用 Mockito 做到这一点？

* * *

## 回答 #1

> 赞同：508
> 
> 时间：2012-04-08T21:42:26.507

我会尝试`any(byte[].class)`

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2014-05-30T11:46:11.120

尝试这个：

```
AdditionalMatchers.aryEq(array); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-01-29T13:42:32.577

我宁愿使用`Matchers.<byte[]>any()`. 这对我有用。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-10-25T09:53:09.343

I agree with Mutanos and Alecio. Further, one can check as many identical method calls as possible (verifying the subsequent calls in the production code, the order of the verify's does not matter). Here is the code:

```
import static org.mockito.AdditionalMatchers.*;

    verify(mockObject).myMethod(aryEq(new byte[] { 0 }));
    verify(mockObject).myMethod(aryEq(new byte[] { 1, 2 })); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-02-16T19:36:03.033

我用`Matchers.refEq`这个。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-05T10:55:57.977

当参数也是数组时，您可以使用 Mockito.any() 。我这样使用它：

```
verify(myMock, times(0)).setContents(any(), any()); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-02T14:42:42.970

您始终可以使用创建自定义匹配器`argThat`

```
Mockito.verify(yourMockHere).methodCallToBeVerifiedOnYourMockHere(ArgumentMatchers.argThat(new ArgumentMatcher<Object>() {
    @Override
    public boolean matches(Object argument) {
        YourTypeHere[] yourArray = (YourTypeHere[]) argument;
        // Do whatever you like, here is an example:
        if (!yourArray[0].getStringValue().equals("first_arr_val")) {
            return false;
        }
        return true;
    }
})); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-10-28T16:30:26.343

What works for me was `org.mockito.ArgumentMatchers.isA`

for example:

```
isA(long[].class) 
```

that works fine.

the implementation difference of each other is:

```
public static <T> T any(Class<T> type) {
    reportMatcher(new VarArgAware(type, "<any " + type.getCanonicalName() + ">"));
    return Primitives.defaultValue(type);
}

public static <T> T isA(Class<T> type) {
    reportMatcher(new InstanceOf(type));
    return Primitives.defaultValue(type);
} 
```

# c++ - 使用fork的c ++程序中的非阻塞系统调用

> ID：10066591
> 
> 赞同：1
> 
> 时间：2012-04-08T21:16:44.330
> 
> 标签：c++, c, system, fork, pid

基于此 SO[帖子](https://stackoverflow.com/a/3838587/984260)和此[示例](http://forums.fedoraforum.org/archive/index.php/t-273925.html)，我希望当我使用 fork() 时，将允许我以非阻塞方式执行 system/execvp。但是，当我尝试在上述示例代码中的 fork 块中发出一个长时间运行的子进程时，控件不会返回到父块，直到子进程完成。

你能告诉一个方法，我应该如何设计代码以允许在 C/C++ 代码中对系统进行非阻塞调用。另外，我计划编写一个程序，其中不止一个孩子来自同一个父母。我怎样才能得到孩子的pid？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T21:19:46.253

`fork`将立即返回给孩子和父母。但是，该示例 (test3.c) 调用[`wait4`](http://linux.die.net/man/2/wait4)，就像听起来一样，等待另一个进程执行某些操作（在本例中为退出）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T21:36:07.953

提到的示例代码在产卵后等待孩子返回 - 这就是它阻塞的原因。

要获取子进程的 pid，请使用 fork() 的返回值。fork() 是单个系统代码，它返回两个不同的值 - 子进程的 pid 到父进程和 0 到子进程。这就是为什么您可以区分程序中应该由父母和孩子执行的代码块的原因。

请参阅 man fork(2)。

关于 fork() 和 wait() 你可能应该注意的另一件事是，在子进程退出后，内核仍然保存一些关于它的信息（例如退出状态），这些信息应该以某种方式使用。否则，这样的过程将成为“僵尸”（ps 输出中的 Z）。这是通过 wait*() 调用完成的工作。此外，在子进程退出后，内核会使用 SIGCHLD 通知其父进程。如果您不想处理子返回值，您可以通知系统您将使用 signal()、sigaction() 等来忽略 SIGCHLD。在这种情况下，会自动获得额外的数据。这种行为可能是您系统上的默认行为，但仍建议您明确声明此类行为以提高程序的可移植性。

# java - Java中的按值传递（队列）给出了意外的输出

> ID：10066592
> 
> 赞同：0
> 
> 时间：2012-04-08T21:16:51.183
> 
> 标签：java, queue, pass-by-reference, pass-by-value

我有一个非常小的程序：

```
 public static void main(String[] args) {

Queue<String> queue = new LinkedList<String>();
queue.add("one");
queue.add("two");
queue.add("tree");

printQueue(queue);
customizeQueue(queue);
printQueue(queue);
}

private static void customizeQueue(Queue<String> queue) {
queue.add("four");
queue.add("five");
printQueue(queue);
}

private static void printQueue(Queue<String> queue) {
for(String s: queue){
    System.out.print(s + " ");
}
System.out.println();
} 
```

我期待输出：

```
one two tree
one two tree four five
one two tree 
```

但是我得到：

```
one two tree
one two tree four five
one two tree four five 
```

我不确定为什么会这样。我是否传递了 LinkedList 实例的引用？有人可以澄清为什么我没有得到预期的输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T21:21:45.563

所有类型在 Java 中都是按值传递的。但是，您传递的不是对象，而是对对象的引用。这意味着在传递引用时不会创建整个队列的副本，而只会创建引用的副本。新创建的引用仍然属于同一个对象，因此当您执行 a 时`queue.add()`，元素会添加到真实对象中。另一方面，重新分配函数`queue = new LinkedLIst<String>()`中的引用对调用函数中的引用没有影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T21:18:33.800

Java中的对象是通过引用传递的。只有原始类型是按值传递的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T21:20:19.447

您不是在传递队列的副本，而是在传递队列本身。因此，当它被修改时，更改不仅限于自定义调用，而是影响一切。

# c# - 从字符串 C# 中拉出被“/”包围的字符串

> ID：10066594
> 
> 赞同：0
> 
> 时间：2012-04-08T21:17:12.300
> 
> 标签：c#, regex, string

我想取一个句子的**单词**，如果那个单词两端都有正斜杠字符`/`

例如，一个字符串应该包含空格，因此可能必须从以下内容中提取一个字符串：

*例子：*

```
"Hello /World/" --> "World" 
```

我是否必须为此使用正则表达式，如果是这样，你能告诉我该怎么做吗？如果没有，我怎么能以非常基本的方式做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T21:22:10.433

使用正则表达式，

```
string[] results = Regex.Matches("Hello /World/ hello /universe/",@"/(.+?)/")
    .Cast<Match>()
    .Select(m=>m.Groups[1].Value)
    .ToArray(); 
```

`World`会回来`universe`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T21:18:49.960

循环遍历所有字符。获取位置上 / 的第一个索引找到该位置上配对的最后一个 / 并通过创建新字符串来删除它们之间的任何内容。继续循环并找到打开和关闭/直到完成。

获取 / 的第一个索引， / 的最后一个索引并拆分和 string.substring() 它。

# visual-studio-2010 - Visual Studio 在启动时崩溃

> ID：10066595
> 
> 赞同：1
> 
> 时间：2012-04-08T21:17:14.870
> 
> 标签：visual-studio-2010, crash, startup

我已经使用 Visual Studio 2010 一年多来为 Windows Phone 7 开发 XNA 游戏。就在今天，每次加载时它都开始崩溃。如果我加载我目前正在开发的游戏，它将崩溃。如果我只是自己打开 VS，它也会崩溃。今天才开始。我不知道是什么突然导致它开始。我更新了我的图形驱动程序，但这不应该导致它。自从我几天前刚刚开始开发我的游戏以来，我没有做太多其他事情。我尝试重新应用 VS2010 SP1 但失败了。我尝试为 VS2010 安装 Windows 更新，但它们显然也未能安装。

我不确定现在该尝试什么。我可以尝试再次安装更新。我不确定为什么他们一直无法安装。它只是说该程序已停止工作并需要关闭。我也重启了几次。关于我接下来可以尝试什么的任何想法？

> 问题签名：
> 问题事件名称：CLR20r3
> 问题签名 01：devenv.exe
> 问题签名 02：10.0.40219.1
> 问题签名 03：4d5f2a73
> 问题签名 04：mscorlib
> 问题签名 05：4.0.0.0
> 问题签名 06：4dd23522
> 问题签名 07：3789
> 问题签名签名 08：3e
> 问题签名 09：System.UnauthorizedAccess
> 操作系统版本：6.1.7601.2.1.0.256.48
> 区域设置 ID：1033

# immutability - d2：部分已知结构的不变性

> ID：10066597
> 
> 赞同：2
> 
> 时间：2012-04-08T21:17:24.817
> 
> 标签：immutability, d

在 D 中，`immutable`是可传递的，因此禁止对不可变结构的任何字段赋值。据我了解，强烈保证不可变结构变量*永远不会*改变，它的所有内容也是如此。

但是，如果我宣布了这样的事情呢？

```
struct OpaqueData;
immutable(OpaqueData*) data; 
```

D 如何保证未在 D 中实现且可能具有间接性的结构的传递不变性？

将这种指向不透明数据的指针封装在不可变类中的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T21:20:30.150

由于您不知道 中的任何字段`OpaqueData`，因此您首先不能分配给它的任何内容。

当然，您可以通过抛弃`immutable`（D 确实赋予您这样做的能力）并将`OpaqueData*`值指向的原始内存分配给原始内存来完全破坏类型系统，但是您会要求解决最终会遇到的任何问题with... 如果您不这样做并且尊重您的`OpaqueData`指针是`immutable`，则由于类型限定符的传递性，您不能以任何方式更改它。

事实上，这就是它们的全部意义所在：它们在数学上是合理的。

# spring - spring 2.0 安全配置

> ID：10066600
> 
> 赞同：0
> 
> 时间：2012-04-08T21:17:29.430
> 
> 标签：spring, spring-security

我正在尝试使用 spring 2.0 安全性配置请求标头身份验证，我是一个完整的新手，所以请多多包涵。从[doc](http://static.springsource.org/spring-security/site/docs/2.0.x/reference/preauth.html)中，他们给出了一个使用 siteminder 的示例配置文件。

在我的场景中，请求头中会有一个用户名和用户组，分别使用 CC_USER 和 CC_USER_GROUP 的键。所以我将文件调整为如下（见下文）。

我知道在外部系统中，用户已经使用某种类型的单点登录进行了身份验证，当控制权到达我的应用程序时，我们只需要检查 CC_USER 和 CC_USER_GROUP 的请求标头。

问题1：下面的示例使用“userDetailsS​​ervice”。这是我需要实施的吗？这是我要检查 CC_USER 和 CC_USER_GROUP 的请求标头的地方吗？

问题2：我可以在某处下载使用请求标头身份验证的完整示例吗？我做了很多谷歌搜索，但并没有真正找到很多帮助。

问题3：我只想对一些虚拟用户进行硬编码以进行测试，就像他们在文档中所做的那样。如何将以下内容合并到我的请求标头配置中？

```
<authentication-provider>
    <user-service>
      <user name="jimi" password="jimispassword" authorities="ROLE_USER, ROLE_ADMIN" />
      <user name="bob" password="bobspassword" authorities="ROLE_USER" />
    </user-service>
  </authentication-provider> 
```

我修改后的示例配置文件（基于 docs 中的 siteminder 文件）：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:aop="http://www.springframework.org/schema/aop" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:security="http://www.springframework.org/schema/security"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
       http://www.springframework.org/schema/context/spring-context-2.5.xsd
       http://www.springframework.org/schema/security
       http://www.springframework.org/schema/security/spring-security-2.0.4.xsd">

    <bean id="ssoFilter"
        class="org.springframework.security.ui.preauth.header.RequestHeaderPreAuthenticatedProcessingFilter">
        <security:custom-filter position="PRE_AUTH_FILTER" />
        <property name="principalRequestHeader" value="CC_USER" />
        <property name="authenticationManager" ref="authenticationManager" />
    </bean>

    <bean id="preauthAuthProvider"
        class="org.springframework.security.providers.preauth.PreAuthenticatedAuthenticationProvider">
        <security:custom-authentication-provider />
        <property name="preAuthenticatedUserDetailsService">
            <bean id="userDetailsServiceWrapper"
                class="org.springframework.security.userdetails.UserDetailsByNameServiceWrapper">
                <property name="userDetailsService" ref="userDetailsService" />
            </bean>
        </property>
    </bean>

    <security:authentication-manager
        alias="authenticationManager" />
</beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T21:43:48.350

1.  [UserDetailsS​​ervice](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/core/userdetails/UserDetailsService.html)只是一个接口，你需要实现。它只有一种方法可以通过用户名从数据库加载用户，并返回带有用户信息的 UserDetails 对象（这里您还可以保留用户组信息）。该服务与请求标头无关。我认为，检查请求标头的最佳位置是`RequestHeaderPreAuthenticatedProcessingFilter`
2.  你在谈论`RequestHeaderAuthenticationFilter`吗？我认为[文档](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/preauth.html)非常清楚。
3.  如果您实现自己的用户服务，xml 中的硬编码用户将不起作用

# actionscript-3 - 模型视图投影矩阵应该在 Actionscript 3 中构建还是在顶点着色器中的 GPU 上构建？

> ID：10066601
> 
> 赞同：5
> 
> 时间：2012-04-08T21:17:32.950
> 
> 标签：actionscript-3, gpu, shader, stage3d

我见过的所有 Stage3D 示例在每个渲染事件上都在 AS3 中构建模型视图投影矩阵。例如：

```
modelMatrix.identity();
// Create model matrix here
modelMatrix.translate/rotate/scale
...
modelViewProjectionMatrix.identity();
modelViewProjectionMatrix.append( modelMatrix );
modelViewProjectionMatrix.append( viewMatrix );
modelViewProjectionMatrix.append( projectionMatrix );
// Model view projection matrix to vertex constant register 0
context3D.setProgramConstantsFromMatrix( Context3DProgramType.VERTEX, 0, modelViewProjectionMatrix, true );
... 
```

顶点着色器中的一行将顶点转换为屏幕空间：

```
m44 op, va0, vc0 
```

这样做有理由吗？GPU不就是为了这些计算而设计的吗？

为什么不只在视图和投影矩阵发生变化时更新它们并将它们上传到单独的寄存器：

```
// Projection matrix to vertex constant register 0
// This could be done once on initialization or when the projection matrix changes
context3D.setProgramConstantsFromMatrix(Context3DProgramType.VERTEX, 0, projectionMatrix, true);
// View matrix to vertex constant register 4
context3D.setProgramConstantsFromMatrix(Context3DProgramType.VERTEX, 4, viewMatrix, true); 
```

然后在每个帧和每个对象上：

```
modelMatrix.identity();
// Create model matrix here
modelMatrix.translate/rotate/scale
...
// Model matrix to vertex constant register 8
context3D.setProgramConstantsFromMatrix(Context3DProgramType.VERTEX, 8, modelMatrix, true);
... 
```

而着色器看起来像这样：

```
// Perform model view projection transformation and store the results in temporary register 0 (vt0)
// - Multiply vertex position by model matrix (vc8)
m44 vt0 va0 vc8
// - Multiply vertex position by view matrix (vc4)
m44 vt0 vt0 vc4
// - Multiply vertex position by projection matrix (vc0) and write the result to the output register
m44 op vt0 vc0 
```

## 更新

我现在在这里发现了另一个可能已经回答了这个问题的问题：
[DirectX 世界视图矩阵乘法 - GPU 或 CPU 的地方](https://stackoverflow.com/questions/6378047/directx-world-view-matrix-multiplications-gpu-or-cpu-the-place)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:31:14.137

不要忘记顶点着色器是按顶点运行的，你最终会在每帧中进行数百次的乘法运算，

而 AS3 版本每帧只进行一次乘法运算。

与每个性能问题一样：

优化经常运行的东西，忽略只偶尔运行的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T10:07:20.357

这是一个棘手的优化问题。您应该问的第一件事：这真的是瓶颈吗？如果是，您必须考虑这一点：

*   在 AS3 中进行矩阵乘法比应有的速度要慢。
*   顶点程序中的额外矩阵变换实际上是免费的。
*   设置一个矩阵比设置多个矩阵为常数要快！
*   无论如何，您是否需要连接矩阵？可以选吗？

没有简单的答案。为了速度，我会让 GPU 完成这项工作。但在许多情况下，您可能需要妥协：像经典的 OpenGL 一样发送模型->世界和世界->剪辑矩阵。对于 molehill 来说，在顶点程序中专门在 GPU 上做更多的工作。但在过分担心它之前，请始终确保这个问题确实是一个瓶颈。

tl/dr：如果可以，请在顶点程序中执行此操作！

# java - 调用方法有问题

> ID：10066604
> 
> 赞同：0
> 
> 时间：2012-04-08T21:18:32.230
> 
> 标签：java

我在调用程序主体中的方法时遇到问题。

程序规格如下：

`setNoOfVehicles()`：返回拥有的车辆数量。

`setWeeklyFuelCost()`：返回所有拥有车辆的平均每周汽油成本。

`calcYearlyFuelCost()`：接收平均每周燃料成本并返回平均年度燃料成本。

`displayFuelCost()`：接收拥有的车辆数量、平均每周燃料成本和平均每年燃料成本。

`main()`：

调用`setWeeklyFuelCost()`返回值并将其存储在局部变量中。

`displayFuelCost()`通过将其作为参数发送来调用，`setNoOfVehicles()`用于平均每周燃料成本的局部变量，以及对 的调用`calcYearlyFuelCost()`。

Scanner 在全局级别声明

```
public static void main(String[] args)
{

double x = setWeeklyFuelCost();

displayFuelCost( setNoOfVehicles(), x, calcYearlyFuelCost(x)); //This is the correct parameters I needed to pass thru displayFuelCost(). I didn't know this at the time and this is what I was trying to ask in this post.
}

private static int setNoOfVehicles()
{

System.out.print( "How many vehicles do I own?  " );
 int noOfVehicles = input.nextInt();
return noOfVehicles;
}

private static double setWeeklyFuelCost()
{

System.out.print( "Enter the average weekly fuel cost for my vehicles:  ");
double weeklyFuelCost = input.nextDouble();
return weeklyFuelCost;

}

private static double calcYearlyFuelCost(double weeklyFuelCost)
{

double yearlyFuelCost = 0.0;
yearlyFuelCost = weeklyFuelCost * 52;
return yearlyFuelCost;

}

private static void displayFuelCost( int noOfVehicles, double weeklyFuelCost, double yearlyFuelCost)
{
double difference = yearlyFuelCost - 5044.00;

if( yearlyFuelCost > 5044.00)
{
System.out.printf( "No of Vehicles:  %d\n"
                + "Avg Weekly Fuel Cost:  $%,.2f\n"
                + "Avg Annual Fuel Cost:  $%,.2f\n\n"
                + "I am OVER budget by $%,.2f.", noOfVehicles, weeklyFuelCost, yearlyFuelCost, difference);
}
else if( yearlyFuelCost < 5044.00)
{
difference = difference * -1;
System.out.printf( "No of Vehicles:  %d\n"
                + "Avg Weekly Fuel Cost:  $%,.2f\n"
                + "Avg Annual Fuel Cost:  $%,.2f\n\n"
                + "I am UNDER budget by $%,.2f.  PAARRTY!!! ", noOfVehicles, weeklyFuelCost, yearlyFuelCost, difference);
}
else
{
System.out.printf( "No of Vehicles:  %d\n"
                + "Avg Weekly Fuel Cost:  $%,.2f\n"
                + "Avg Annual Fuel Cost:  $%,.2f\n\n"
                + "I am RIGHT ON BUDGET!", noOfVehicles, weeklyFuelCost, yearlyFuelCost, difference);
}

}

} 
```

最后一个规范是阻碍我的规范，调用 displayFuelCost()

我的问题是我并不确切知道我需要通过哪些参数`displayFuelCost()`。我知道在问这个问题之前我必须使用上面的变量 x 。

`displayFuelCost( setNoOfVehicles(), x, calcYearlyFuelCost(x));`是我需要输入的所有内容以使主要工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T21:30:37.323

您调用了一个`displayFuelCost()`未在您的类中定义的方法。相反，你有一个方法

```
private static void displayFuelCost( int noOfVehicles, double weeklyFuelCost, double yearlyFuelCost) { ... } 
```

这需要三个参数。

将方法调用更改为

```
displayFuelCost(1, 100.0, 5200.0);  // sample values 
```

消除错误并获得一些结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T21:25:24.567

您粘贴的代码不包含任何类定义。如果主方法在另一个类中，那么 displayFuelCost 方法，那么你将不得不改变

```
private static void displayFuelCost( int noOfVehicles, double weeklyFuelCost, double yearlyFuelCost) 
```

公开：

```
public static void displayFuelCost( int noOfVehicles, double weeklyFuelCost, double yearlyFuelCost) 
```

话虽如此，我不建议您过度使用静态方法。我看不出为什么您不应该使用正确的面向对象样式（或者至少是单例模式，如果它必须看起来是静态的）。

**//编辑：**

问题在于您的代码的这一部分：

```
public static void main(String[] args)
{

double x = setWeeklyFuelCost();

displayFuelCost(); //<-- need arguments here! 
```

在您的主函数中，您调用 displayFuelCost 方法，但不提供它需要的参数。当您查看此方法的声明时：

```
private static void displayFuelCost( int noOfVehicles, double weeklyFuelCost, double yearlyFuelCost) 
```

}

您会看到它需要 3 个参数：一个整数、一个双精度数和另一个双精度数。您必须在调用 displayFuelCost 函数时提供它们。例如像这样：

```
public static void main(String[] args)
{

double x = setWeeklyFuelCost();

displayFuelCost(1, 2.5, 2.5); //<-- need parameters here! 
```

}

**//编辑2：**

整个代码还有更多的问题。我添加了一个关于他们的新答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T21:55:38.470

由于我没有扫描仪的代码和课程，我无法证明我的解决方案有效，您必须尝试一下：

```
public class Test {
    public static void main(String[] args) {

        int vehicleNumber = setNoOfVehicles();
        double costWeek = setWeeklyFuelCost();
        double costYear = calcYearlyFuelCost(costWeek);

        displayFuelCost(vehicleNumber, costWeek, costYear);
    }
// rest of your code
} 
```

但是我必须再次警告你，这可能不是你的老师希望你提供的。他想要一个在主方法中实例化自己的类（例如Test test = new Test()），然后使用实例端方法（即开头没有静态的方法）来完成任务。我会建议你再试一次。;)

# android - 在浏览器中打开 url 并强制页面重新加载

> ID：10066606
> 
> 赞同：2
> 
> 时间：2012-04-08T21:18:48.957
> 
> 标签：android, browser, android-intent

我使用以下代码在浏览器中打开 URL：

```
Intent intent = new Intent("android.intent.action.VIEW", Uri.parse(url));
startActivity(intent); 
```

但是如果 url 后面的页面已经在浏览器中打开，运行上面的代码不会刷新页面。如何强制刷新页面？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T03:05:10.637

也在寻找答案......这似乎对我有用：

```
Uri url = Uri.parse(website+"?time="+(new Date().getTime()));
Intent i = new Intent(Intent.ACTION_VIEW);
i.setData(url);
activity.startActivity(i); 
```

因为新的 get 参数会强制重新加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T21:28:35.457

据我所知，您不能强制它从 Android 端刷新（除非您在自己的 WebView 中显示它）您必须将页面本身设置为自动刷新，这可能会确保显示的任何内容都可能是最新。

# php - 使用简单的 HTML DOM 组合多个元素

> ID：10066609
> 
> 赞同：2
> 
> 时间：2012-04-08T21:18:53.113
> 
> 标签：php, simple-html-dom

这是我要组合的 HTML：

```
<div class="post linkDetail">
  <div class="postThumbnail">
    <a href="/redirect?url=http%3A//blogs.msdn.com/archive/2012/04/23/how-to-improve-performance-in-your-metro-style-app.aspx">
      <img src="<validURL Here>" width="280">
    </a>
  </div>
  <p class="full-url">
    http://blogs.msdn.com/b/windowsappdev/archive/2012/04/03/how-to-improve-performa...
  </p>
  <p></p>
  <p>Nobody likes slow or unresponsive apps. Users expect that apps respond immediately to touch,   taps, clicks, gestures and key-presses. Users expect that animations are smooth, that they can play, pause and restart their music and videos quickly, and that they never have to wait for the app to catch up with them. This is the first in a series of posts on how to make your apps "fast and fluid."    
   </p>
   <p>We invested a lot of time in the engineering teams thinking about how we can ensure the performance of Metro style apps. We have learned what we can do in the platform to deliver on fast and fluid performance and have also learned what works and what does not work in building apps that deliver great experiences. In this blog I share with you some of the hard lessons from our own experiences so that you can build the best possible experiences for your customers.</p><p>Performance is more than just a stopwatch and efficient algorithms. When I think of performance, I like to take a holistic ...
   </p>
</div> 
```

我想获取元素`<p>`之后的所有内容`p.full-url`并将所有`<p>`元素组合成单个文本字符串。

这样：

```
 <p></p>
  <p>Nobody likes slow or unresponsive apps. Users expect that apps respond immediately to touch,   taps, clicks, gestures and key-presses. Users expect that animations are smooth, that they can play, pause and restart their music and videos quickly, and that they never have to wait for the app to catch up with them. This is the first in a series of posts on how to make your apps "fast and fluid."    
   </p>
   <p>We invested a lot of time in the engineering teams thinking about how we can ensure the performance of Metro style apps. We have learned what we can do in the platform to deliver on fast and fluid performance and have also learned what works and what does not work in building apps that deliver great experiences. In this blog I share with you some of the hard lessons from our own experiences so that you can build the best possible experiences for your customers.</p><p>Performance is more than just a stopwatch and efficient algorithms. When I think of performance, I like to take a holistic ...
   </p> 
```

变成：

没有人喜欢缓慢或反应迟钝的应用程序。用户期望应用程序立即响应触摸、点击、点击、手势和按键。用户希望动画流畅，他们可以快速播放、暂停和重新启动他们的音乐和视频，并且他们永远不必等待应用程序赶上他们。这是关于如何让您的应用程序“快速流畅”的系列文章中的第一篇。我们在工程团队上投入了大量时间来思考如何确保 Metro 风格应用程序的性能。我们已经了解了我们可以在平台中做些什么来提供快速和流畅的性能，并且还了解了在构建可提供出色体验的应用程序时哪些有效，哪些无效。在此博客中，我将与您分享我们自己的经验中的一些艰难教训，以便您可以为您的客户打造最佳体验。性能不仅仅是一个秒表和高效的算法。当我想到性能时，我喜欢整体...

**这在简单的 HTML DOM 中可能吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T20:37:52.633

我从未使用过简单的 html dom，但我认为这就是您所需要的：

```
$result = '';
foreach($html->find('p') as $p) {
   $result .= strip_tags($p->plaintext);
} 
```

# jsf - @Produces 返回 FacesContext --- 为什么？

> ID：10066610
> 
> 赞同：3
> 
> 时间：2012-04-08T21:18:56.600
> 
> 标签：jsf, glassfish, facelets, cdi, jboss-weld

我犹豫是否要就同一主题提出另一个问题，但至少现在我正在阅读，我认为，正确的[文档](http://docs.jboss.org/weld/reference/latest/en-US/html/ee.html#d0e4589)。

所以，这个类：

```
class FacesContextProducer {
   @Produces @RequestScoped FacesContext getFacesContext() {
      return FacesContext.getCurrentInstance();
   }
} 
```

从[焊接文档](http://docs.jboss.org/weld/reference/latest/en-US/html/ee.html#d0e4589)来看，这种方法实际上通过以下方式适用于 Glassfish： [GlassFish 使用 WELD 作为 JSR-299 的参考实现：Java EE 平台 (CDI) 的 Java 上下文和依赖注入。](https://stackoverflow.com/questions/10061647/implementing-requestparam-in-cdi-weld-using-qualifier-and-injectionpoint-as-ht)

对于上面的类，它会在哪里使用？为什么需要一个单独的类来@Produces 一个 FacesContext？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-09T19:32:46.307

> 对于上面的类，它会在哪里使用？他为什么要注入 FacesContext？

我认为这要么是为了

1.  一致性; 或者
2.  测试。

广告 1\. 如果尝试做纯 CDI，当您不使用其他依赖查找机制（作为`getCurrentInstace()`静态方法）时，它看起来不错。请注意，实际上*不需要*定义生产者和使用注入。它只是方便且与 CDI 的用法一致。

广告 2\. 由 McDowell 博客链接解释，想象一下注入是用 CDI 完成的。

> 为什么需要一个单独的类来@Produces 一个 FacesContext？

这不需要是一个单独的类，您可以让单个类产生多个 bean。它只是有助于代码的清晰度将其分开。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-09T12:06:43.313

您可能希望注入`FacesContext`以避免直接依赖静态[`getCurrentInstance()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#getCurrentInstance%28%29)方法以简化模拟和单元测试。

*我已经为 JSF 自己的依赖注入机制写了一些关于[这里](http://illegalargumentexception.blogspot.co.uk/2011/12/jsf-mocking-facescontext-for-unit-tests.html)的内容。*

# python - 数据库python sqlite3中重复的重复条目

> ID：10066613
> 
> 赞同：0
> 
> 时间：2012-04-08T21:19:29.187
> 
> 标签：python, sqlite

我正在使用 python 阅读 news.ycombinator RSS 提要，并使用 sqlite3 将它们存储在数据库中。例如，输入数据库的示例条目是 (id,title,ur)

```
('3814508', 'Github is making me feel stupid(er)', 'http://www.serpentine.com/blog/2012/04/08/github-is-making-me-feel-stupider/') 
```

其中 id 是网站在其评论线程 url 中使用的评论 id。上面的列表是通过单独提取然后压缩它们制成`ids`的。现在我希望用这样的条目填充一个没有重复的数据库， `title``url`

```
import sqlite3 as lite

con = lite.connect('/path/to/rss.db')
con.text_factory = str
cur=con.cursor()
# --- Extract ids, links, urls ----
zipped = zip( ids, titles, targets)
cur.execute("SELECT Id FROM Posts")
existing_ids = cur.fetchall()
for i in range(0,len(zipped)):
    if ids[i] not in existing_ids:
        cur.executemany("INSERT INTO Posts VALUES(?, ?, ?)", zipped) 
```

问题是一次有三十个提要。打印列表显示正常行为，有 30 个整体。但是当我尝试写入数据库时​​，有大量条目，相同的 30 个条目在“帖子”表中反复重复 31 次

```
sqlite> SELECT Count(*) FROM Posts;
930 
```

数据库具有架构`CREATE TABLE Posts(Id TEXT, Title TEXT, Target TEXT);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T21:24:24.347

一旦找到丢失的条目，您似乎正在插入所有条目的整个列表？也许您的意思是遍历每个 zipped 元组，并检查每个元组是否已经存在？

# ios - 如何定义在基于故事板的 ios 应用程序上持续存在的工具栏？

> ID：10066625
> 
> 赞同：0
> 
> 时间：2012-04-08T21:20:30.933
> 
> 标签：ios, storyboard, toolbar

我正在开发一个基于故事板的 ios 应用程序。

任何人都知道如何定义将存在于整个应用程序中的工具栏？

我想用图形编辑器来设计它。

我的第一次尝试是在导航控制器上设计工具栏（故事板上的第一个），我可以在其他视图上看到工具栏但没有栏按钮..（我在导航控制器的工具栏上设计的栏按钮）？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T09:51:52.263

工具栏可以通过 NSArray 填充。您可以为每个视图设置一个工具栏，并在调用 segue 时传递数组。就像你通过其他任何东西一样。

# debugging - 在没有主应用程序 Visual Studio 项目的情况下调试 MEF

> ID：10066626
> 
> 赞同：0
> 
> 时间：2012-04-08T21:20:45.367
> 
> 标签：debugging, frameworks, mef, managed, extensibility

我正在为某些程序创建托管可扩展性框架扩展。该程序使用我创建的 dll 文件。我没有那个程序的视觉工作室项目，但我有那个程序。我可以使用该程序运行这些扩展，但无法正确调试它们。是否可以使用 Visual Studio 调试器来调试我的代码？

**我找到了解决办法，谢谢！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:32:09.680

我自己找到了解决方案，但感谢您的建议。我可以使用我正在为其创建此扩展的应用程序，类库项目。我在项目上按属性，然后选择调试选项卡并设置“启动外部程序”并将其设置为该主应用程序。然后我按 f5 并启动该应用程序，当它使用我的扩展时，我可以使用 Visual Studio 调试器对其进行调试。我忘了告诉我我正在用 C# 创建这个。

[http://msdn.microsoft.com/en-us/library/68c8335t.aspx](http://msdn.microsoft.com/en-us/library/68c8335t.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T16:59:23.670

我相信您可以在此处找到您要查找的内容：http: [//msdn.microsoft.com/en-us/library/0bxe8ytt.aspx](http://msdn.microsoft.com/en-us/library/0bxe8ytt.aspx)

根据这篇文章，您可以使用解决方案中的“添加现有项目”对话框（对于您的 DLL）来添加您没有解决方案的可执行文件。因为您使用的是 MEF，所以它可能会有点棘手，您可能想要创建一个新的解决方案来进行调试。但是，这似乎是处理您的情况的一般方法。由于您拥有 DLL 的源代码，我相信它至少应该允许您完整地单步执行您的代码。

**注意：** 您需要确保在开发环境中安装了 Visual C++。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T07:58:18.740

如果您正在尝试调试汇编代码，那么您可以使用@BiggsTRC 讨论的技术，如果您只是想确定零件未加载的原因，您可以考虑查看[Composition Analysis Tool (mefx)](http://msdn.microsoft.com/en-us/library/ff576068.aspx)。这是一个命令行工具，用于分析一组零件并找出在合成过程中可能发生故障的位置。

# openmpi - 自定义数据类型（MPI_Datatype 数据类型）？

> ID：10066628
> 
> 赞同：0
> 
> 时间：2012-04-08T21:20:50.853
> 
> 标签：openmpi

MPI 中是否存在自定义数据类型之类的东西，或者您是否必须将所有内容展平为文本字符串并作为 MPI_CHAR 传递？如果您需要展平所有内容，是否有我忽略的内置功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T03:05:05.980

答案是[MPI_Type_contiguous](http://www.open-mpi.org/doc/v1.5/man3/MPI_Type_contiguous.3.php)（链接是文档）。它允许您根据基本数据类型及其各自的偏移量来阻止特定数量的空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T05:38:02.653

一个更好的答案是[MPI_Type_create_struct](http://www.open-mpi.org/doc/v1.5/man3/MPI_Type_create_struct.3.php)。它允许您复制 struct 数据类型并传递它，在[DeinoMPI](http://mpi.deino.net/mpi_functions/MPI_Type_create_struct.html)有一个很好的使用示例。

# javascript - 如何检查元素在 Zepto 中是否可见

> ID：10066630
> 
> 赞同：2
> 
> 时间：2012-04-08T21:21:13.197
> 
> 标签：javascript, zepto

[Zepto](http://zeptojs.com/)不支持[jQuery](http://jquery.com/)的`.is(':visible')`技术。

那么如何检查一个元素是否可见呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-08T21:24:22.273

我从未使用过 Zepto，但是：

```
.css('display') !== 'none' 
```

可能会工作。[这是一个演示。](http://jsfiddle.net/minitech/9a6pQ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T21:26:50.567

我对 Zepto 不太熟悉，但是我想您可以只使用基本的 JavaScript 来进行某种形式的检测：

```
function isVis(ele) {
    if(ele.css('display')!='none' && ele.css('visibility')!='hidden' && ele.height()>0) {
        return(true);
    } else {
        return(false);
    }
} 
```

然后在使用中：

```
var div=$('#div_id');
if(isVis(div)) {
    // Element is visible
} else {
    // Element in not visible
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-27T08:21:28.530

Zepto 有一些官方扩展。您可以包含**选择器**模块以启用 `.is(':hidden')`

*   [选择器模块](https://github.com/madrobby/zepto/blob/master/src/selector.js#files)
*   [模块列表可以在这里找到](http://zeptojs.com/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-08T21:23:47.843

怎么样

```
.css('display') === 'block' 
```

或者，正如 minitech 建议的那样：

```
.css('display') !== 'hidden' 
```

如果你*真的*需要使用这些伪选择器，你总是[可以手动实现它们](https://gist.github.com/2324454)。

# java - 年龄计算方法不返回正确的年龄？

> ID：10066633
> 
> 赞同：2
> 
> 时间：2012-04-08T21:21:38.383
> 
> 标签：java, android

> **可能重复：**
> [如何在 Java 中计算某人的年龄？](https://stackoverflow.com/questions/1116123/how-do-i-calculate-someones-age-in-java)

我想计算用户年龄，如果出生月份等于当前月份并且出生日期小于或等于当天（如果用户通过日期选择器为 9/4/1990 或 4/4/1990 年龄将是 21 而不是 22）我该如何解决这个问题？在这种情况下，我应该做些什么来获得正确的年龄？请帮我 ....

**这是我的方法**

```
public static  String getAge(int year,int month,int day) {
    Calendar dob = Calendar.getInstance(); 
    Calendar today = Calendar.getInstance();

    dob.set(year, month, day); 
    int age = today.get(Calendar.YEAR) - dob.get(Calendar.YEAR);

    if (today.get(Calendar.DAY_OF_YEAR) < dob.get(Calendar.DAY_OF_YEAR)){
        age--; 
    }
    Integer ageInt = new Integer(age);
    String ageS = ageInt.toString();

    return ageS;  
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T21:31:43.470

您的代码有两个问题：

*   如果出生日期是 1990 年 4 月 9 日，你需要写成`dob.set(1990,3,9)`月份从 0 开始 ==> 你可能需要`dob.set(year, month - 1, day);`
*   如果当年是闰年而不是出生年份（反之亦然）并且日期在 2 月 28 日/29 日之后，您将在同一日期获得 1 天的差异。

这似乎可行，但您应该使用各种场景对其进行测试，并确保您对结果感到满意：

```
public static String getAge(int year, int month, int day) {
    Calendar dob = Calendar.getInstance();
    Calendar today = Calendar.getInstance();

    dob.set(year, month - 1, day);

    int age = today.get(Calendar.YEAR) - dob.get(Calendar.YEAR);
    if (today.get(Calendar.MONTH) < dob.get(Calendar.MONTH)) {
        age--;
    } else if(today.get(Calendar.MONTH) == dob.get(Calendar.MONTH)) {
        if (today.get(Calendar.DAY_OF_MONTH) < dob.get(Calendar.DAY_OF_MONTH)) {
            age--;
        }
    }

    Integer ageInt = new Integer(age);
    String ageS = ageInt.toString();

    return ageS;

} 
```

还有一个（非常简化的）测试：

```
public static void main(String[] args) { //today = 8 April 2012
    System.out.println(getAge(1990,3,7)); //22
    System.out.println(getAge(1990,3,8)); //22
    System.out.println(getAge(1990,3,9)); //22
    System.out.println(getAge(1990,4,7)); //22
    System.out.println(getAge(1990,4,8)); //22
    System.out.println(getAge(1990,4,9)); //21
    System.out.println(getAge(1990,5,7)); //21        
    System.out.println(getAge(1990,5,8)); //21        
    System.out.println(getAge(1990,5,9)); //21        
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-08T21:35:16.167

例如，您可以通过以毫秒为单位转换两个日期而不是在 Date 对象中转换来计算差异。代码将是这样的：

```
long ageMilis = today.getTimeInMillis() - dob.getTimeInMillis();
Date age = new Date(ageMilis);
return age.toString(); 
```

# xcode - 分配或传递字典？

> ID：10066637
> 
> 赞同：0
> 
> 时间：2012-04-08T21:22:15.207
> 
> 标签：xcode, memory, nsdictionary

从内存/编码的角度来看，在控制器之间传递字典还是在新类中重新分配它们更好？

# javascript - 通过 JSON 获取 Javascript 中单个视频（非提要）的 Youtube 信息

> ID：10066638
> 
> 赞同：46
> 
> 时间：2012-04-08T21:22:24.393
> 
> 标签：javascript, jquery, json, youtube

所以我试图通过 JSON 格式从单个 youtube 视频中获取信息。就像标题描述类别一样，除了评论之外，我还能得到什么。我正在尝试在 Javascript 中执行此操作。我注意到下面的链接，但他们的所有示例都是如何从提要中获取视频信息。假设我知道它的 ID，我想从单个视频中获取信息。

[https://developers.google.com/youtube/2.0/developers_guide_json](https://developers.google.com/youtube/2.0/developers_guide_json)

我也在查看这个[Stackoverflow 问题](https://stackoverflow.com/questions/5194619/getting-youtube-video-information-using-javascript-jquery) ，但我对 get 请求有疑问，它说“test.js（第 10 行）GET [http://gdata.youtube.com/feeds/api/videos/VA770w...v= 2&alt=json-in-script&callback=listInfo](http://gdata.youtube.com/feeds/api/videos/VA770w...v=2&alt=json-in-script&callback=listInfo)

200 OK 9ms"

**简而言之，如果我有一个像 VA770wpLX-Q 这样的 youtube 视频 ID，那么在 JSON 中获取该视频信息的 url 会是什么样子？**

谢谢

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2014-04-23T19:43:22.813

**2018 年更新**

API v2 已弃用。新的 youtube api v3 仅适用于开发人员令牌，并且对免费连接有限制。

您可以在没有 API 的情况下获取 JSON：

```
http://www.youtube.com/oembed?url=http://www.youtube.com/watch?v=ojCkgU5XGdg&format=json 
```

或 xml

```
http://www.youtube.com/oembed?url=http://www.youtube.com/watch?v=ojCkgU5XGdg&format=xml 
```

新的 2018 json 响应有

```
{
  "html": "<iframe width=\"480\" height=\"270\" src=\"https://www.youtube.com/embed/ojCkgU5XGdg?feature=oembed\" frameborder=\"0\" allow=\"autoplay; encrypted-media\" allowfullscreen></iframe>",
  "title": "Creativity and Drugs (Eng Sub)",
  "thumbnail_height": 360,
  "provider_name": "YouTube",
  "author_url": "https://www.youtube.com/user/serebniti",
  "thumbnail_width": 480,
  "height": 270,
  "provider_url": "https://www.youtube.com/",
  "type": "video",
  "width": 480,
  "version": "1.0",
  "author_name": "serebniti",
  "thumbnail_url": "https://i.ytimg.com/vi/ojCkgU5XGdg/hqdefault.jpg"
} 
```

**大拇指：**

`hqdefault.jpg`质量较差，但始终存在。

`http://img.youtube.com/vi/ojCkgU5XGdg/hqdefault.jpg`

`http://img.youtube.com/vi/ojCkgU5XGdg/sddefault.jpg`

最大尺寸

```
https://i.ytimg.com/vi/ojCkgU5XGdg/maxresdefault.jpg 
```

小拇指：

```
http://img.youtube.com/vi/ojCkgU5XGdg/0.jpg
http://img.youtube.com/vi/ojCkgU5XGdg/1.jpg
http://img.youtube.com/vi/ojCkgU5XGdg/2.jpg
http://img.youtube.com/vi/ojCkgU5XGdg/3.jpg 
```

**注释**

```
http://www.youtube.com/annotations_invideo?cap_hist=1&video_id=ojCkgU5XGdg 
```

**解析移动页面 16kb**

```
https://m.youtube.com/watch?v=ojCkgU5XGdg 
```

不要忘记将用户代理更改为`iOS / Safari 7`

**还**

```
http://www.youtube.com/get_video_info?html5=1&video_id=ojCkgU5XGdg 
```

**还有如何嵌入 youtube live**

```
https://www.youtube.com/embed/live_stream?channel=UCkA21M22vGK9GtAvq3DvSlA 
```

其中 UCkA21M22vGK9GtAvq3DvSlA 是您的频道 ID。您可以在 YouTube 帐户中的“我的频道”链接中找到它。

**活拇指**

```
https://i.ytimg.com/vi/W-fSCPrYSL8/hqdefault_live.jpg 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-04-08T21:50:31.453

**2015 年 5 月更新：**

此解决方案无法正常工作，YouTube API v2 正在处理中，即将停用。

更多信息请访问： https: [//www.youtube.com/devicesupport](https://www.youtube.com/devicesupport)

* * *

尝试这样的事情：

```
var video_id='VA770wpLX-Q';

$.getJSON('http://gdata.youtube.com/feeds/api/videos/'+video_id+'?v=2&alt=jsonc',function(data,status,xhr){
    alert(data.data.title);
    // data contains the JSON-Object below
}); 
```

演示：http: [//jsfiddle.net/wqwxg/](http://jsfiddle.net/wqwxg/)

返回的 JSON 如下所示：

```
{
    "apiVersion": "2.1",
    "data": {
        "id": "VA770wpLX-Q",
        "uploaded": "2011-02-24T22:31:02.000Z",
        "updated": "2012-04-08T21:37:06.000Z",
        "uploader": "drdrevevo",
        "category": "Music",
        "title": "Dr. Dre - I Need A Doctor (Explicit) ft. Eminem, Skylar Grey",
        "description": "Music video by Dr. Dre performing I Need A Doctor featuring Eminem and Skylar Grey (Explicit). © 2011 Aftermath Records",
        "tags": ["Dr", "Dre", "Eminem", "New", "Song", "Skylar", "Grey", "GRAMMYs", "Dr.", "Need", "Doctor", "video", "Eazy", "N.W.A.", "NWA", "easy", "drdre", "and", "em"],
        "thumbnail": {
            "sqDefault": "http://i.ytimg.com/vi/VA770wpLX-Q/default.jpg",
            "hqDefault": "http://i.ytimg.com/vi/VA770wpLX-Q/hqdefault.jpg"
        },
        "player": {
            "default": "http://www.youtube.com/watch?v=VA770wpLX-Q&feature=youtube_gdata_player"
        },
        "content": {
            "5": "http://www.youtube.com/v/VA770wpLX-Q?version=3&f=videos&app=youtube_gdata"
        },
        "duration": 457,
        "aspectRatio": "widescreen",
        "rating": 4.902695,
        "likeCount": "430519",
        "ratingCount": 441253,
        "viewCount": 88270796,
        "favoriteCount": 306556,
        "commentCount": 270597,
        "status": {
            "value": "restricted",
            "reason": "requesterRegion"
        },
        "restrictions": [{
            "type": "country",
            "relationship": "deny",
            "countries": "DE"
        }],
        "accessControl": {
            "comment": "allowed",
            "commentVote": "allowed",
            "videoRespond": "allowed",
            "rate": "allowed",
            "embed": "allowed",
            "list": "allowed",
            "autoPlay": "denied",
            "syndicate": "allowed"
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2015-08-24T19:38:34.863

## 问题

YouTube API 不支持 JSONP - 请参阅[问题 4329：oEmbed 回调 JSONP](https://code.google.com/p/gdata-issues/issues/detail?id=4329)。此外，[YouTube Data API v2 已弃用](https://developers.google.com/youtube/2.0/deprecation_faq)。

## 解决方案

您可以使用[Noembed服务通过](https://noembed.com/)[JSONP](http://json-p.org/)为 YouTube 视频获取[oEmbed](http://oembed.com/)数据。

## 奖金

*   不需要 API 密钥
*   不需要服务器端代理

## 例子

对于您的`VA770wpLX-Q`视频，您可以尝试这样的链接：

[https://noembed.com/embed?url=http://www.youtube.com/watch?v=VA770wpLX-Q](https://noembed.com/embed?url=http://www.youtube.com/watch?v=VA770wpLX-Q)

或者对于 JSONP：

[https://noembed.com/embed?callback=example&url=http://www.youtube.com/watch?v=VA770wpLX-Q](https://noembed.com/embed?callback=example&url=http://www.youtube.com/watch?v=VA770wpLX-Q)

这些链接具有作为`url`参数传递的 YouTube 视频的标准 URL。它不仅适用于 YouTube，还适用于 Vimeo 和[其他](https://noembed.com/#supported-sites)具有以下 URL 的网站：

[https://noembed.com/embed?url=https://vimeo.com/45196609](https://noembed.com/embed?url=https://vimeo.com/45196609)

## 演示

这是一个使用 jQuery 的简单示例：

```
var id = 'VA770wpLX-Q';
var url = 'https://www.youtube.com/watch?v=' + id;

$.getJSON('https://noembed.com/embed',
    {format: 'json', url: url}, function (data) {
    alert(data.title);
}); 
```

请参阅：关于 JS Bin 的[**演示。**](http://jsbin.com/yohapuveti/edit?html,js,console,output)

## 其他选项

*   [Embedly](http://embed.ly/)（商业服务，每月最多免费提供 5000 个 URL）
*   [Oohembed](http://oohembed.com/)（更新：现已被 Embedly 收购，但[来源](https://github.com/stetelepta/oohembed)可用）
*   [AutoEmbed](http://autoembed.com/)（更新：似乎已关闭或停止）

## 更多信息

另请参阅这些问题：

*   [带有 API v3 的 Youtube 视频标题没有 API 密钥？](https://stackoverflow.com/questions/30084140/youtube-video-title-with-api-v3-without-api-key/32190892#32190892)
*   [对 youtube oembed 调用的 JSONp 请求的响应给出“无效标签”错误](https://stackoverflow.com/questions/3551286/response-for-jsonp-request-to-youtube-oembed-call-giving-invalid-label-error/32190042#32190042)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-07-24T21:29:01.993

在 v3 中：

```
$.getJSON('https://www.googleapis.com/youtube/v3/videos?id={videoId}&key={myApiKey}&part=snippet&callback=?',function(data){

 if (typeof(data.items[0]) != "undefined") {
     console.log('video exists ' + data.items[0].snippet.title);
   } else {
     console.log('video not exists');
 }   
}); 
```

作为响应 @Jonathan 通过服务器端，使用 PHP 和 CURL：

```
$url = "https://www.googleapis.com/youtube/v3/videos?id=".$videoId."&key=".$miApikey."&part=snippet";
$ch = curl_init();
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_URL,$url);
$output=curl_exec($ch);                 
$response = json_decode($output, TRUE);
print_r($response); 
```

# playframework-2.0 - 将参数传递给父模板或子模板

> ID：10066639
> 
> 赞同：0
> 
> 时间：2012-04-08T21:22:26.343
> 
> 标签：playframework-2.0

在我的 index 方法中，我呈现了一个基本的登录表单，我将其发送到我的**index.scala.html**：

```
/**
 * Main entry method for the application
 */
public static Result index() {
     return ok(views.html.index.render(form(Application.Login.class)));
} 
```

在文件**index.scala.html 中**：我定义了**表单**参数：

```
@(form: Form[Application.Login])

@main(title = "myTitle") {
    <h2>Testing app</h2>
} 
```

所以，在这个文件中，我通过**@main(...)**调用父模板。但是如何将**表单**传递给我的父模板？我尝试了以下方法：

```
@(form: Form[Application.Login])

@main(title = "myTitle", form) {
    <h2>Testing app</h2>
} 
```

在我的**main.scala.html**中有以下内容：

```
@(title: String, form: Form[Application.Login])(content: Html) 
```

但这不起作用，我收到以下错误消息：

```
not enough arguments for method apply: (title: java.lang.String, form: play.data.Form[controllers.Application.Login])(content: play.api.templates.Html)play.api.templates.Html in object main. Unspecified value parameter form. 
```

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T06:41:12.897

正如朱利安所说，这是有效的：

```
@main(title = "myTitle", form = form) { … } or just @main("myTitle", form) { … } 
```

# sql - 如何简化此查询？

> ID：10066640
> 
> 赞同：0
> 
> 时间：2012-04-08T21:22:38.523
> 
> 标签：sql, simplify

所以我这个查询的主要目标是选择一个名为 Mario Souza 的经理下的所有部门和员工。

```
SELECT d.deptname,e.name FROM employee e JOIN department d ON e.dept = d.deptnum WHERE idmanager IN(
SELECT id FROM employee WHERE name = 'Mario Souza' 
) AND manager IN(
SELECT id FROM employee WHERE name = 'Mario Souza' 
) 
```

它正在工作，但是有没有办法可以存储第一个 IN 结果，以便稍后在 AND 运算符之后使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T21:42:51.853

您可以使用`EXISTS`在多个列上进行匹配。

```
WHERE EXISTS
(
    SELECT *
    FROM employee AS manager
    WHERE manager.name = 'Mario Souza'
    AND manager.id = e.idmanager
    AND manager.id = d.manager
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T21:29:19.680

您可以将 JOIN 与员工表一起使用。只需将 manager 和 idmanager 都放在 ON 子句中。

# python - 如何在列表列表中找到共同元素？

> ID：10066642
> 
> 赞同：38
> 
> 时间：2012-04-08T21:23:08.387
> 
> 标签：python, list, recursion, comparison

我试图弄清楚如何比较 n 个列表以找到共同的元素。例如：

```
p=[ [1,2,3],
    [1,9,9],
      ..
      ..
    [1,2,4]

>> print common(p)
>> [1] 
```

现在，如果我知道元素的数量，我可以进行如下比较：

```
for a in b:
  for c in d:
    for x in y:
... 
```

但如果我不知道 p 有多少元素，那将不起作用。我查看了比较两个列表的解决方案 [https://stackoverflow.com/a/1388864/1320800](https://stackoverflow.com/a/1388864/1320800)

但是在花了 4 小时试图找到一种方法来实现递归之后，我仍然没有找到一个解决方案，所以任何帮助都将不胜感激！

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-04-08T21:25:19.447

您正在寻找所有子列表的集合交集，而您应该用于集合操作的数据类型是集合：

```
result = set(p[0])
for s in p[1:]:
    result.intersection_update(s)
print result 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-04-08T22:39:13.027

```
>>> p=[ [1,2,3],
    [1,9,9],
    [1,2,4]]
>>> set(p[0]).intersection(*p)
set([1]) 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2017-01-09T23:35:15.783

一个简单的解决方案（单行）是：

```
set.intersection(*[set(list) for list in p]) 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-04-08T22:00:06.420

为什么不只是：

```
set.intersection(*map(set, p)) 
```

结果：

```
set([1]) 
```

或者像这样：

```
ip = iter(p)
s = set(next(ip))
s.intersection(*ip) 
```

结果：

```
set([1]) 
```

编辑：

从控制台复制：

```
>>> p = [[1,2,3], [1,9,9], [1,2,4]]
>>> set.intersection(*map(set, p))
set([1])
>>> ip = iter(p)
>>> s = set(next(ip))
>>> s.intersection(*ip)
set([1]) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-08T21:39:24.460

```
p=[ [1,2,3],
    [1,9,9],
    [1,2,4]]

ans = [ele[0] for ele in zip(*p) if len(set(ele)) == 1] 
```

结果：

```
>>> ans
[1] 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-08T21:30:01.320

```
reduce(lambda x, y: x & y, (set(i) for i in p)) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-30T14:24:39.223

您正在寻找所有子列表的集合交集，而您应该用于集合操作的数据类型是集合：

```
result = set(p[0])  
for s in p[1:]:
   result.intersection_update(s)
print result 
```

但是，一个列表中有 10 个列表的限制。任何更大的东西都会导致“结果”列表出现故障。假设您已将“结果”放入列表中`list(result)`。

`result.sort()`如果您依赖它，请确保您确保它是订购的。

# svg - 将参数传递给 HandlerFunc

> ID：10066643
> 
> 赞同：1
> 
> 时间：2012-04-08T21:23:12.290
> 
> 标签：svg, plot, go, net-http

我正在尝试使用[svgo 包](https://github.com/ajstarks/svgo)在 svg 文件上绘制点并使用 Web 浏览器显示它。通过查看`net/http`文档，我不知道如何将参数传递给我的`svgWeb`函数。

下面的示例在我的网络浏览器中编译并显示一个三角形和一条线，但我真正想做的是使用折线方法绘制 xpts 和 ypts。我怎样才能传递适当的参数或重组这个例子来完成这个任务？

```
package main

import (
    "github.com/ajstarks/svgo"
    "log"
    "net/http"
)

func svgWeb(w http.ResponseWriter, req *http.Request) {
    w.Header().Set("Content-Type", "image/svg+xml")

    xpts := []int{1, 200, 5}
    ypts := []int{200, 400, 300}
    s := svg.New(w)
    s.Start(500, 500)
    s.Line(5, 10, 400, 400, "stroke:black")
    s.Polyline(xpts, ypts, "stroke:black")
    s.End()
}

//// Main Program function
//////////////////////////////

func main() {

    xpts := []int{}
    ypts := []int{}

    for i := 0; i < 100; i++ {
        xpts = append(xpts, i)
        xpts = append(ypts, i+5)
    }

    http.Handle("/economy", http.HandlerFunc(svgWeb))
    err := http.ListenAndServe(":2003", nil)
    if err != nil {
        log.Fatal("ListenAndServe:", err)
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T00:10:48.217

如果您的参数是由客户端提供的，那么它们应该通过`http.Request`.

但是，如果您要做的是`svgWeb`通过客户端请求未提供的点驱动处理程序，而是通过应用程序中的其他一些函数在内部生成这些值，那么一种方法是将处理程序构造成一个结构并使用成员属性。

该结构可能如下所示：

```
type SvgManager struct {
    Xpts, Ypts []int
}

func (m *SvgManager) SvgWeb(w http.ResponseWriter, req *http.Request) {
    w.Header().Set("Content-Type", "image/svg+xml")

    s := svg.New(w)
    s.Start(500, 500)
    s.Line(5, 10, 400, 400, "stroke:black")
    s.Polyline(m.Xpts, m.Ypts, "stroke:black")
    s.End()
} 
```

然后在你的主要：

```
manager := new(SvgManager)

for i := 0; i < 100; i++ {
    manager.Xpts = append(manager.Xpts, i)
    manager.Ypts = append(manager.Ypts, i+5)
}

// I only did this assignment to make the SO display shorter in width.
// Could have put it directly in the http.Handle()
handler := http.HandlerFunc(func(w http.ResponseWriter, req *http.Request) { 
    manager.SvgWeb(w, req) 
})
http.Handle("/economy", handler) 
```

现在你有一个 SvgManager 实例，它也可以包含其他处理程序，并且可以更新以影响其处理程序的输出。

**满足[Handler接口](http://golang.org/pkg/net/http/#Handler)**

正如@Atom 在评论中提到的，您可以通过简单地将您的方法重命名为ServeHTTP 来完全避免关闭和包装。这将满足[Handler 接口](http://golang.org/pkg/net/http/#Handler)

```
func (m *SvgManager) ServeHTTP(w http.ResponseWriter, req *http.Request) {
    ...

manager := new(SvgManager)
http.Handle("/economy", manager) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T23:30:20.870

您应该在内部将您的函数定义`main`为匿名函数。这样，它可以引用局部变量`xpts`和`ypts`（函数将是一个闭包）。

# php - PHP中的多字节修剪？

> ID：10066647
> 
> 赞同：40
> 
> 时间：2012-04-08T21:23:38.033
> 
> 标签：php, regex, unicode, multibyte, mbstring

显然[家庭](http://www.php.net/manual/en/book.mbstring.php)`mb_trim`中没有，所以我正在尝试为自己实现一个。[`mb_*`](http://www.php.net/manual/en/book.mbstring.php)

我最近在[php.net](http://php.net)的评论中发现了这个正则表达式：

```
/(^\s+)|(\s+$)/u 
```

因此，我将通过以下方式实现它：

```
function multibyte_trim($str)
{
    if (!function_exists("mb_trim") || !extension_loaded("mbstring")) {
        return preg_replace("/(^\s+)|(\s+$)/u", "", $str);
    } else {
        return mb_trim($str);
    }
} 
```

正则表达式对我来说似乎是正确的，但我对正则表达式非常陌生。这会有效地删除字符串开头/结尾的**任何Unicode 空间吗？**

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-04-09T00:23:09.207

标准`trim`函数修剪少量空格和类似空格的字符。这些被定义为 ASCII 字符，这意味着从到 的某些特定*字节*。`0``0100 0000`

**正确的**UTF-8 输入永远不会包含由 bytes 组成的多字节字符`0xxx xxxx`。**正确的**UTF-8 多字节字符中的所有字节都以`1xxx xxxx`.

这意味着在**正确的**UTF-8 序列中，字节`0xxx xxxx`只能引用单字节字符。**因此，假设**您有**正确的**UTF-8 序列，PHP 的`trim`函数将永远不会删除“半个字符” 。（要非常[小心](http://unicode.org/reports/tr36/#Ill-Formed_Subsequences)[**不正确**](http://unicode.org/reports/tr36/#Ill-Formed_Subsequences)[的 UTF-8 序列](http://unicode.org/reports/tr36/#Ill-Formed_Subsequences)。）****[](http://unicode.org/reports/tr36/#Ill-Formed_Subsequences)****

 ******* * *

on ASCII 正则表达式将`\s` 主要匹配与`trim`.

`preg`带有`/u`修饰符的函数仅适用于*UTF-8 编码的正则表达式*，并且`/\s/u`也匹配 UTF8 的[nbsp](https://en.wikipedia.org/wiki/Non-breaking_space)。这种具有不间断空格的行为是使用它的唯一优势。

如果您想用其他不兼容 ASCII 的编码替换空格字符，这两种方法都不起作用。

换句话说，如果您尝试将常用空格修剪为与 ASCII 兼容的字符串，只需使用`trim`. 使用时`/\s/u`请注意文本中 nbsp 的含义。

* * *

小心：

```
 $s1 = html_entity_decode(" Hello &#160; "); // the NBSP
  $s2 = "  exotic test ホ  ";

  echo "\nCORRECT trim: [". trim($s1) ."], [".  trim($s2) ."]";
  echo "\nSAME: [". trim($s1) ."] == [". preg_replace('/^\s+|\s+$/','',$s1) ."]";
  echo "\nBUT: [". trim($s1) ."] != [". preg_replace('/^\s+|\s+$/u','',$s1) ."]";

  echo "\n!INCORRECT trim: [". trim($s2,' ') ."]"; // DANGER! not UTF8 safe!
  echo "\nSAFE ONLY WITH preg: [". 
       preg_replace('/^[\s]+|[\s]+$/u', '', $s2) ."]"; 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-04-08T22:58:57.590

我不知道你想用你定义的那个无穷无尽的递归函数做什么，但如果你只想要一个多字节安全的修剪，这将起作用。

```
function mb_trim($str) {
  return preg_replace("/^\s+|\s+$/u", "", $str); 
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-08T12:11:23.520

此版本支持第二个可选参数 $charlist：

```
function mb_trim ($string, $charlist = null) 
{   
    if (is_null($charlist)) {
        return trim ($string);
    } 

    $charlist = str_replace ('/', '\/', preg_quote ($charlist));
    return preg_replace ("/(^[$charlist]+)|([$charlist]+$)/us", '', $string);
} 
```

但不支持范围的“..”。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-05-08T18:55:15.187

好的，所以我采用了@edson-medina 的解决方案并修复了一个错误并添加了一些单元测试。下面是我们用来给 mb 对应的 trim、rtrim 和 ltrim 的 3 个函数。

```
////////////////////////////////////////////////////////////////////////////////////
//Add some multibyte core functions not in PHP
////////////////////////////////////////////////////////////////////////////////////
function mb_trim($string, $charlist = null) {
    if (is_null($charlist)) {
        return trim($string);
    } else {
        $charlist = preg_quote($charlist, '/');
        return preg_replace("/(^[$charlist]+)|([$charlist]+$)/us", '', $string);
    }
}
function mb_rtrim($string, $charlist = null) {
    if (is_null($charlist)) {
        return rtrim($string);
    } else {
        $charlist = preg_quote($charlist, '/');
        return preg_replace("/([$charlist]+$)/us", '', $string);
    }
}
function mb_ltrim($string, $charlist = null) {
    if (is_null($charlist)) {
        return ltrim($string);
    } else {
        $charlist = preg_quote($charlist, '/');
        return preg_replace("/(^[$charlist]+)/us", '', $string);
    }
}
//////////////////////////////////////////////////////////////////////////////////// 
```

这是我为任何感兴趣的人编写的单元测试：

```
public function test_trim() {
    $this->assertEquals(trim(' foo '), mb_trim(' foo '));
    $this->assertEquals(trim(' foo ', ' o'), mb_trim(' foo ', ' o'));
    $this->assertEquals('foo', mb_trim(' Åfooホ ', ' Åホ'));
}

public function test_rtrim() {
    $this->assertEquals(rtrim(' foo '), mb_rtrim(' foo '));
    $this->assertEquals(rtrim(' foo ', ' o'), mb_rtrim(' foo ', ' o'));
    $this->assertEquals('foo', mb_rtrim('fooホ ', ' ホ'));
}

public function test_ltrim() {
    $this->assertEquals(ltrim(' foo '), mb_ltrim(' foo '));
    $this->assertEquals(ltrim(' foo ', ' o'), mb_ltrim(' foo ', ' o'));
    $this->assertEquals('foo', mb_ltrim(' Åfoo', ' Å'));
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-09-14T06:51:11.200

您还可以修剪 UTF-8 字符串上的非 ascii 兼容空格（例如，不间断空格），**即使使用****修饰符**`preg_replace('/^\p{Z}+|\p{Z}+$/u','',$str);`

`\s`，也只会匹配“ascii 兼容”空格字符。 但将匹配所有已知的 unicode 空格字符**`u`**
`\p{Z}`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-24T14:11:49.507

mb_ereg_replace 似乎解决了这个问题：

```
function mb_trim($str,$regex = "(^\s+)|(\s+$)/us") {
    return mb_ereg_replace($regex, "", $str);
} 
```

..但是我对正则表达式的了解还不够，不知道您将如何添加人们希望能够提供给 trim() 的“charlist”参数 - 即要修剪的字符列表 - 所以只有使正则表达式成为参数。

可能是您可以有一个特殊字符数组，然后为 charlist 中的每个字符单步执行它，并在构建正则表达式字符串时相应地转义它们。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-07-19T16:39:56.787

（从与 NBSP 斗争的重复 Q 中移植`trim`。）以下注释自 PHP 7.2+ 起有效。里程可能会因早期版本而异（请在评论中报告）。

PHP`trim`忽略不间断的空格。它只修剪基本 ASCII 范围内的空格。作为参考， trim[的源代码](https://github.com/php/php-src/blob/master/ext/standard/string.c)如下所示（即，没有带有 trim 的未记录功能）：

```
(c == ' ' || c == '\n' || c == '\r' || c == '\t' || c == '\v' || c == '\0') 
```

以上，除了普通的空格（ASCII 32, ）外，都是ASCII控制字符；LF (10: `\n`), CR (13: `\r`), HT (9: `\t`), VT (11: `\v`), NUL (0: `\0`)。（请注意，在 PHP 中，您必须将转义字符用双引号括起来：`"\n", "\t"`等等。否则它们将被解析为文字`\n`等。）

以下是使用Unicode 字符串的`trim`( `ltrim`, `rtrim`, `trim`)三种风格的简单实现：`preg_replace`

```
preg_replace('~^\s+~u', '', $string) // == ltrim
preg_replace('~\s+$~u', '', $string) // == rtrim
preg_replace('~^\s+|\s+$~us', '', $string) // == trim 
```

随意将它们包装到您自己的`mb_*trim`函数中。

根据[PCRE 规范](https://www.pcre.org/original/doc/html/pcrepattern.html)，开启 Unicode 模式的`\s`“任何空格”转义序列字符`u`将匹配以下所有空格字符：

```
The horizontal space characters are:

U+0009     Horizontal tab (HT)
U+0020     Space
U+00A0     Non-break space
U+1680     Ogham space mark
U+180E     Mongolian vowel separator
U+2000     En quad
U+2001     Em quad
U+2002     En space
U+2003     Em space
U+2004     Three-per-em space
U+2005     Four-per-em space
U+2006     Six-per-em space
U+2007     Figure space
U+2008     Punctuation space
U+2009     Thin space
U+200A     Hair space
U+202F     Narrow no-break space
U+205F     Medium mathematical space
U+3000     Ideographic space

The vertical space characters are:

U+000A     Linefeed (LF)
U+000B     Vertical tab (VT)
U+000C     Form feed (FF)
U+000D     Carriage return (CR)
U+0085     Next line (NEL)
U+2028     Line separator
U+2029     Paragraph separator 
```

您可以看到使用Unicode 标志处理所有列出的空格的[测试迭代。](https://3v4l.org/s16FF)按照 PCRE 规范，它们都按预期进行了修剪。如果您只针对上面的水平空间，将匹配它们，就像所有垂直空间一样。`preg_replace``u``\h``\v`

在某些答案中使用`\p{Z}`seen 在某些方面会失败；具体来说，使用了大部分 ASCII 空格，令人震惊的是，还使用了蒙古元音分隔符。忽必烈会大怒。以下是未命中的列表`\p{Z}`： U+0009*水平制表符 (HT)*、 U+000A*换行 (LF)*、 U+000C*换页 (FF)*、 U+000D*回车 (CR)*、 U+0085*下一行 (NEL)* , 和 U+180E*蒙古语元音分隔符。*

至于为什么会发生这种情况，上面的 PCRE 规范还指出：“*`\s` 任何匹配`\p{Z}`or `\h`or`\v`*的字符”。也就是说，`\s`是 的超集`\p{Z}`。然后，只需使用`\s`. `\p{Z}`它更全面，对于阅读您的代码的人来说，导入更明显，他们可能不记得所有字符类型的矮个子。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-14T01:26:37.280

## 我的两分钱

您的问题的实际解决方案是，在更改外部输入字符串之前，您应该首先进行编码检查。许多人很快就学会了“清理和验证”输入数据，但学习识别他们早期使用的字符串的基本性质（字符编码）的步骤却很慢。

将使用多少字节来表示每个字符？使用正确格式化的 UTF-8，它可以是 1（字符`trim`处理）、2、3 或 4 个字节。当 UTF-8 的遗留或格式错误的表示开始发挥作用时，问题就出现了——字节字符边界可能不会按预期排列（外行说话）。

在 PHP 中，一些人主张所有字符串都应该强制符合正确的 UTF-8 编码（每个字符 1、2、3 或 4 个字节），其中类似的函数`trim()`仍然可以工作，因为它处理的字符的字节/字符边界with 将与`trim()`试图从字符串的开头和结尾消除的扩展 ASCII / 1 字节值一致（[修剪手册页](http://php.net/manual/en/function.trim.php)）。

然而，由于计算机编程是一个多元化的领域，不可能有一种适用于所有场景的全面方法。话虽如此，以正常运行所需的方式编写您的应用程序。只是用表单输入做一个基本的数据库驱动网站？*是*的，为了我的钱，一切都必须是 UTF-8。

**注意**：即使您的 UTF-8 问题稳定，您仍然会遇到国际化问题。为什么？许多非英语字符集存在于 2、3 或 4 字节空间（代码点等）中。显然，如果您使用的计算机必须处理中文、日文、俄文、阿拉伯文或希伯来文脚本，那么您也希望所有内容都可以使用 2、3 和 4 字节！请记住，PHP`trim`函数可以修剪默认字符或用户指定的字符。这很重要，特别是如果您需要`trim`考虑一些汉字。

我更愿意处理某人无法访问我的网站的问题，然后是不应该发生的访问和响应问题。仔细想想，这符合*最小特权*（安全性）和*通用设计*（可访问性）的原则。

## 概括

如果输入数据不符合正确的 UTF-8 编码，您可能需要[抛出异常](http://php.net/manual/en/spl.exceptions.php)。您可以尝试使用[PHP 多字节函数](http://php.net/manual/en/ref.mbstring.php)来确定您的编码，或其他一些多字节库。如果以及何时编写 PHP 以完全支持 unicode（Perl、Java ...），那么 PHP 会更好。PHP unicode 的努力在几年前就死了，因此你不得不使用额外的库来理智地处理 UTF-8 多字节字符串。只是添加`/u`标志`preg_replace()`并没有看到大局。

更新：

话虽如此，我相信以下多字节修剪对于那些试图从 url 的路径组件中提取 REST 资源的人（自然而然地减去查询字符串）很有用。注意：这在清理和验证路径字符串后会很有用。

```
function mb_path_trim($path)
{
    return preg_replace("/^(?:\/)|(?:\/)$/u", "", $path);
} 
```******

# javascript - 导致 Flash 介绍动画冻结的脚本

> ID：10066652
> 
> 赞同：0
> 
> 时间：2012-04-08T20:20:36.090
> 
> 标签：javascript, flash

当我的 Flash 网站加载时，它会在初始动画中途冻结 2-3 秒，然后继续。这显然看起来不太好，我无法弄清楚是什么原因造成的。我认为它是 index.html 中的脚本之一，并尝试了各种方法来纠正它——我做错了什么？

```
<!DOCTYPE html>
<html lang="en">
<head>
<title>company name</title>
    .
    .
    .
<link href="style.css" rel="stylesheet" type="text/css" />

<script type="text/javascript" src="js/flashobject.js"></script>

<!--[if lt IE 7]>
<link href="ie6.css" rel="stylesheet" type="text/css" />
<![endif]-->
</head>

<body>
<header>
    <hgroup>
    <h1>company</h1>
    <h2>company</h2>
    </hgroup>
</header>

<div id="container">    
    <div id="head">
        <div class="aligncenter"><a href="http://www.adobe.com/go/EN_US-H-GET-FLASH">
            <img src="http://www.adobe.com/images/shared/download_buttons/get_adobe_flash_player.png" alt="" /></a>
        </div>
    </div>                      
</div>
    <div class="g-plus" data-href="https://plus.google.com/100925740920754223119?rel=publisher" data-width="170" data-height="69" data-theme="light">   

</body>

<!-- Flash -->
<script type="text/javascript">
  var fo = new FlashObject("main_v10.swf", "head", "100%", "100%", "8", "");
  fo.addParam("quality", "high");
  fo.addParam("allowFullScreen", "true");
  fo.write("head");
</script>

<!-- Hello Bar -->
<script type="text/javascript" src="//www.hellobar.com/hellobar.js"></script>
<script type="text/javascript">
new HelloBar(39040,52484);
</script>

<!-- GPlus -->
<script type="text/javascript">
window.___gcfg = {lang: 'en'};
(function() 
{var po = document.createElement("script");
po.type = "text/javascript"; po.async = true;po.src = "https://apis.google.com/js/plusone.js";
var s = document.getElementsByTagName("script")[0];
s.parentNode.insertBefore(po, s);
})();</script>

<!-- Google -->
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-xxxxxxxx-1']);
_gaq.push(['_setSiteSpeedSampleRate', 10]);
_gaq.push(['_trackPageview']);
(function init() {
 var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
 ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') +  '.google-analytics.com/ga.js';
 var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga,s);
 })();
  window.onload = init;
 </script>
 </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T21:35:47.640

这真的不是一个好问题。它对您的服务器、计算机、操作系统、浏览器和互联网连接过于具体，无法作为一个具有一般答案的问题。但这是我的结果：

我在 Windows 上使用 Firefox（最新）。

在我运行的测试中，G+ 和 Adob​​e 图标加载缓慢。我想你可以把 Adob​​e 图标放在你的本地服务器上。除此之外，您对 HelloBar 和 G+ 的调用可能会很慢，因此请考虑在某种延迟后添加这些链接（使用 jQuery 或类似方法）。

此外，我过去曾遇到过使用谷歌分析加载缓慢的问题。这似乎也复制了 HelloBar 的某些功能，因此您可能需要更仔细地查看是否需要两个跟踪系统。

为了更精确地找到问题，您可以使用@jimw 建议的内容，或者使用 Firefox 插件 Firebug（使用“Net”选项卡的“All”按钮来获取加载时间的图片）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:40:11.840

尝试删除 Hello Bar 部分，看看它是否改变了一些东西。如果是这样，则链接文件中的脚本速度非常慢，或者脚本所在的服务器速度非常慢。而且由于脚本加载和执行是阻塞的，它可能是冻结的根源。

在这种情况下，您可以尝试在 script 标签上使用 defer 或 async 属性，但随后您需要重写

```
new HelloBar(39040,52484); 
```

作为

```
function HelloBar( ) { window.setTimeout( function ( a, b ) { new HelloBar( a, b ); }, 100 ); }
new HelloBar(39040,52484); 
```

这样，当您加载脚本时，HelloBar 会被覆盖，“循环”停止并且您的脚本会使用正确的值调用。

# xslt - xsl:variable 未在谓词中定义

> ID：10066656
> 
> 赞同：1
> 
> 时间：2012-04-08T21:24:33.367
> 
> 标签：xslt, xls, predicate

看起来 xsl:variables 没有在 libxml2 的谓词中定义。有可能还是我错过了什么？如果我使用谓词之外的变量，那么它很好。

```
 <xsl:variable name="smallcase" select="'abcdefghijklmnopqrstuvwxyz'" />
    <xsl:variable name="uppercase" select="'ABCDEFGHIJKLMNOPQRSTUVWXYZ'" />

   <xsl:template match="*[translate( name(), $uppercase, $smallcase ) = 'receipt']"> 
      <xsl:apply-templates select="Process"/>
      <xsl:apply-templates select="Encode"/> 
    </xsl:template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T21:48:04.210

是的，在 XSLT 1.0 中，您不能在 match 属性中使用变量，但我相信在 XSLT 2.0 中您可以。

也许您可以这样做：（请注意，这可能不适合您，这取决于您的 XSL 的其余部分是如何编写的）

```
<xsl:template match="*">
    <xsl:choose>
        <xsl:when test="translate( name(.), $uppercase, $smallcase ) = 'receipt'">
            <xsl:apply-templates select="Process"/>
            <xsl:apply-templates select="Encode"/>
        </xsl:when>
        <xsl:otherwise>
            <!-- do whatever else should be done -->
        </xsl:otherwise>
    </xsl:choose>
</xsl:template> 
```

# objective-c - 如何在目标 C (ios) 中验证文本字段

> ID：10066657
> 
> 赞同：0
> 
> 时间：2012-04-08T21:24:33.507
> 
> 标签：objective-c

我正在开始目标 C，我想制作一个带有文本输入的表单。我的视图中有很多文本字段，我想检查写入的值是否正确（只有数字，只有文本）。

我怎样才能做到这一点？我找到了一些文档，但不是很多……如果有人有很好的资源来帮助我制作表格。

我还想知道如何获取数组中的所有值。

谢谢你的帮助，如果我的问题看起来很糟糕很容易，我很抱歉。

我知道 ruby​​、php、javascript :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T22:38:55.713

给定一个名为 的文本字段`textfield1`，您可以通过 访问其字符串内容`textfield1.text`。这将产生一个 NSString 对象，然后您可以对其进行分析。您可以为此使用[NSRegularExpression](http://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)，或者循环遍历 1-char-substrings 或任何您喜欢的内容，为此阅读 NSString。谷歌搜索也将很快为您提供如何使用 NSRegularExpressions 的示例。

看到您正在为 iOS 工作，您可能需要考虑使用特殊控件来满足您的特定需求。例如，与其使用文本字段来请求数字，并在用户输入非数字时抱怨，不如给他一个滑块而不是文本字段。

对于第二个问题，给定一个包含 NSString 对象的数组`array1`，您可以通过快速枚举遍历它们：

```
for (NSString* string in array1)
{
  // do something with each string in array1
} 
```

# python - 在python中搜索和替换块

> ID：10066662
> 
> 赞同：0
> 
> 时间：2012-04-08T21:25:21.257
> 
> 标签：python, string

我有一个包含以下内容的配置（文本）文件：

```
hello {
    if name == "foo" {

       //do something
    else {
       // something else
    }
 # contents 
 }

world {
   if name == "bar" {
       //do something
    else {
       // do something else 
     }
   # comments 
 } 
```

我想在这个文件中搜索所有带有“foo”的 if else 块。python中最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T21:41:27.330

警告您远离过于复杂的配置语言的评论并没有错。但是，如果这是您必须做的事情，那么下一步就是构建一个可以读取您的语法的解析器，并为您提供令牌树。也许某些谎言[pyparsing](http://pyparsing.wikispaces.com/)会有用？

# silverlight - 在运行时从 ResourceDictionary 更新 ImageBrush

> ID：10066668
> 
> 赞同：0
> 
> 时间：2012-04-08T21:25:47.403
> 
> 标签：silverlight, windows-phone-7, silverlight-4.0

在我的 WP7 应用程序中，所有页面都使用 ImageBrush 作为我在 ResourceDictionay 中定义的背景。此 ResourceDictionary 通过 App.xaml 全局合并。ResourceDictionary 中的 ImageBrush 定义如下：

```
<ImageBrush x:Key="PhonePageBackground" ImageSource="/Background1.jpg"/> 
```

我试图在运行时更新 ImageBrush 的 ImageSource，但它不起作用。

进行一些测试，我有一个页面上有一个按钮来更改背景，我意识到下面的代码工作正常：

```
 ImageBrush image;

    public MainPage()
    {
        InitializeComponent();

        image = new ImageBrush { ImageSource = new BitmapImage(new Uri("/Background1.jpg", UriKind.Relative)) };

        LayoutRoot.Background = image;
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        image.ImageSource = new BitmapImage(new Uri("/Background2.jpg", UriKind.Relative));
    } 
```

但是下面的代码，我使用字典中的 ImageBrush，不起作用。页面的背景变成透明的，就好像找不到图片一样：

```
 ImageBrush image;

    public MainPage()
    {
        InitializeComponent();

        image = (ImageBrush)Application.Current.Resources["PhonePageBackground"];

        LayoutRoot.Background = image;
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        image.ImageSource = new BitmapImage(new Uri("/Background2.jpg", UriKind.Relative));
    } 
```

两个图像（Background1.jpg 和 Background2.jpg）构建操作都设置为内容。我已经使用资源集进行了测试，但没有成功。

知道为什么会出现这种行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T05:59:29.283

这对我有用。

```
ImageBrush image; 
         public MainPage()                
        {
            InitializeComponent();

            image = (ImageBrush)Application.Current.Resources["PhonePageBackground"];
            LayoutRoot.Background = image; 
        }

private void button1_Click(object sender, RoutedEventArgs e)
        {

            image = new ImageBrush { ImageSource = new BitmapImage(new Uri("/Background2.jpg",  UriKind.Relative)) };
            LayoutRoot.Background = image;
    } 
```

# java - 如何使用 DFA 正则表达式匹配器实现正则表达式断言/环视（即 \b 样式字边界）

> ID：10066669
> 
> 赞同：5
> 
> 时间：2012-04-08T21:25:54.823
> 
> 标签：java, regex, regular-language, dfa, word-boundary

我想在基于 DFA 的正则表达式匹配器中实现“单词边界”匹配。有人能告诉我这是怎么做到的吗？

提供一些背景知识，我目前正在使用“dk.brics.automaton”库，但它不支持断言（例如`\b`，单词边界）。我需要使用基于 DFA 的引擎，因为我的主要目标实际上是确定正则表达式的等价性，而不是进行实际匹配。

此外，以下问题的答案似乎表明这是可能的： [基于 DFA 的正则表达式匹配 - 如何获取所有匹配项？](https://stackoverflow.com/questions/1217189/dfa-based-regular-expression-matching-how-to-get-all-matches) 通过说

> “同样，我们通过向模拟器添加带有特殊指令的 epsilon 转换来管理这一点。如果断言通过，则状态指针继续，否则将被丢弃。”

然而，我不太明白这意味着什么。是否暗示它只能通过查看其端点的特殊类型的 epsilon 转换来完成，并且只有在其端点满足断言时才能被遍历，还是可以通过以某种方式配置的“正常”epsilon 转换来完成？如果我需要这些“特殊”类型的 epsilon 转换，那么如何确定这些（即转换为标准 DFA）？

非常感谢任何关于如何实际实现这一点的描述的指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:52:01.940

您不能使用纯 DFA 实现来执行环视类型的正则表达式引擎。由于您需要跟踪之前看到的内容，因此您将引擎变成了一个不同的野兽，它将*上下文*保存在内存中以进行模式匹配。

对于一个正则表达式引擎来处理这意味着它需要有特殊的转换来查看已经解析的上下文。普通的 DFA 无法做到这一点，因为这个上下文被丢弃了。顺便说一句，这也是为什么捕获组很慢以及为什么`(.*)something(.*)`在某些引擎上匹配非常慢的原因，因为它会将大量字符复制到缓冲区中以保留此上下文。

我想您将尝试最小化两个结果 DFA 并查看它们是否相等以解决您的问题。如果您在执行状态最小化算法时将每个“特殊”转换处理为唯一且仅可与等于其自身的转换合并，这可能仍然可以实现。

# javascript - 写入服务器上的 XML 文件

> ID：10066672
> 
> 赞同：1
> 
> 时间：2012-04-08T21:26:55.110
> 
> 标签：javascript, html, xml, comments

我一直在几个网站上工作，需要你的帮助。我想知道是否有一种方法可以使用 javascript 或 HTML 写入服务器上的 XML 文件。我在网上搜索了所有答案，但似乎找不到答案。谢谢，怀亚特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T21:41:48.843

HTML 不是编程语言，它不能写任何东西。

如果你想使用 JavaScript，那么你需要使用服务器端 JavaScript。如今，SSJS 的常用工具是[node.js](http://nodejs.org/)。[文件系统](http://nodejs.org/api/fs.html)模块将允许您写入磁盘。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-08T21:39:46.677

我不知道通过 javascript 客户端编写 xml 的可能性。但在服务器端，我知道你可以通过 php 编写。如果你想我附上例子。我希望我能帮助你。

```
<?php

function fnDOMAddElement2Start($doc='')
    {
        if(!$doc)
        {
            $doc = new DOMDocument();
            $doc->load('Dictionary_user.xml');
        }
        $Dictionary_user = $doc->documentElement;
        #var_dump($Dictionary_user->childNodes->item(0)->parentNode->nodeName);
        $newWord = $doc->createElement('newWord');
        #$newWord->setAttribute('isbn','http-equiv="Content-Type" content="text/html; CHARSET=windows-1255"');

        $prop = $doc->createElement('Heb','bull');
        $newWord->appendChild($prop);
        $prop = $doc->createElement('Eng','bu');
        $newWord->appendChild($prop);

        $Dictionary_user->childNodes->item(0)->parentNode->insertBefore($newWord,$Dictionary_user->childNodes->item(0));
        header("Content-type: text/xml");
        echo $doc->saveXML();
        $doc->save("Dictionary_user.xml");
    }
fnDOMAddElement2Start();
    ?> 
```

xml 文件看起来像：

```
<?xml version="1.0"?>
<Dictionarys>
  <newWord>
    <Heb>bull</Heb>
    <Eng>bu</Eng>
  <newWord>
    <Heb>Dog</Heb>
    <Eng>DO</Eng>
  </newWord>
  <newWord>
    <Heb>Cat</Heb>
    <Eng>ca</Eng>
  </newWord>
</Dictionarys> 
```

# java - 泛型的 Java 反射

> ID：10066679
> 
> 赞同：4
> 
> 时间：2012-04-08T21:27:37.983
> 
> 标签：java, generics, reflection

我正在使用 Java 反射来公开自定义 eclipse 工具中的方法。

我正在编写`getReturnType`接受`java.lang.reflect.Method`作为输入并返回对象的方法`Class<?>`

```
private static Class<?> getReturnType(Method method) {
    Type type = ((ParameterizedType)method.getGenericReturnType()).getRawType();
    return getClass(type);
} 
```

这段代码编译得很好，但在运行时我在转换`Type`为`ParameterizedType`.

> java.lang.ClassCastException：java.lang.Class 不能转换为 java.lang.reflect.ParameterizedType

请建议。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-08T23:21:42.143

这是行不通的，因为您不能假设 的结果`getGenericReturnType`将始终是`ParameterizedType`. `Class`如果返回类型不是通用的，有时它只是一个。请参阅此示例，了解如何使用以下方法实现您所需要的`instanceof`：

```
Type returnType = method.getGenericReturnType();

if (returnType instanceof Class<?>) {
    return (Class<?>)returnType;
} else if(returnType instanceof ParameterizedType) {
    return getClass(((ParameterizedType)returnType).getRawType());
} 
```

请注意，这`getGenericReturnType`可能会返回更多可能的子接口[`Type`](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Type.html)，您需要以某种方式对其进行处理，或者通过同时处理它们或抛出运行时异常。

有关更多信息/示例，请参阅[本文](http://tutorials.jenkov.com/java-reflection/generics.html)。

# django - 第一次安装Django

> ID：10066681
> 
> 赞同：7
> 
> 时间：2012-04-08T21:27:46.523
> 
> 标签：django, virtualenv

我第一次开始学习 DJango。我对 python 有一些基础知识，但 DJango 对我来说是第一个。我从[django 的文档页面](https://docs.djangoproject.com/en/1.4/intro/tutorial01/)开始，但我在它要求的地方卡住了

> python manage.py syncdb

目前我没有任何数据库，所以我假设 SQLite 带有 django。不知道如何继续？我也下载了 virtualenv-1.7.1.2 并安装了它，

> python virtualenv.py ENV

我正在关注这个[视频教程](http://gigantuan.s3.amazonaws.com/screencasts/django1.webm)，它要求我使用，

> sudo pip install virtualenv

但是当我编写上面的代码时，输​​出是，

> sudo：pip：找不到命令

帮帮我！！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-09T04:55:54.320

**不要将 sudo 与 virtualenv 一起使用，**这是以后解决多个问题的最简单方法。

从安装开始`virtualenv`-`sudo apt-get install python-virtualenv`

接下来，***作为您的普通用户***运行以下命令：

1.  `$ virtualenv --no-site-packages django-env`
2.  `$ source django-env/bin/activate`
3.  `(django-env)$ pip install django`
4.  `(django-env)$ django-admin.py startproject myproject`
5.  `(django-env)$ cd myproject`
6.  `(django-env)/myproject$ nano settings.py`
7.  在`settings.py`, 之后`'ENGINE:'`输入`'django.db.backends.sqlite3',`（不要忘记逗号）
8.  在`settings.py`，`'NAME:'`类型之后`'site.db',`（同样，不要忘记逗号）
9.  保存文件，退出编辑器
10.  `(django-env)/myproject$ python manage.py syncdb`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T02:20:01.880

假设您使用的是 linux，您应该能够从您的发行版的存储库中获取 Python setuptools。安装后，输入

```
sudo easy_install pip    # installs pip
sudo pip install -U pip  # upgrades pip to most recent version 
```

从那里，您可以继续学习本教程。

如果您不使用 linux，请从 PyPI 下载 Python setuptools。[Python 设置工具 [PyPI]](http://pypi.python.org/pypi/setuptools "Python 设置工具 [PyPI]")

对于 OS X，以上内容仍应在终端中工作。在 Windows 上，您可能必须从提升的命令提示符（不确定）执行上述操作，但`sudo`开头没有命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T22:58:47.093

SQLite 包含在 Python 2.5+ 中。您应该能够使用相关的数据库设置（数据库类型和文件名，有关详细信息，请参阅官方文档）编辑您的 settings.py 文件，然后将在下次运行 syncdb 时创建您的数据库。

[在http://bartek.im/blog/2010/07/13/django-environment.html](http://bartek.im/blog/2010/07/13/django-environment.html)上有一个很好的关于使用 virtualenvs 和 Django 的教程

我还强烈推荐 virtualenv-burrito 来简化 virtualenv 和 virtualenvwrapper 的安装（和更新）过程：[https ://github.com/brainsik/virtualenv-burrito](https://github.com/brainsik/virtualenv-burrito)

如果您仍然面临问题，那么您目前在运行 syncdb 时是否遇到任何错误？如果是这样，它们是什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T02:26:02.270

最灵活的方式，IMO，安装 w/o 旧的 setuptools，是

1.  下载虚拟环境
    `$ curl -O http://pypi.python.org/packages/source/v/virtualenv/virtualenv-1.7.1.2.tar.gz`
2.  提炼
    `tar xzf virtualenv-1.7.1.2.tar.gz`
3.  使用你想要运行 Django 的 Python 版本来安装 virtualenv，例如
    `$ python2.7 virtualenv-1.7.1.2/virtualenv.py --distribute ~/env`
4.  输入已安装 pip 的环境
    `$ source ~/env/bin/activate`
5.  在当前环境中安装包而不是污染全局空间或需要 sudo
    `pip install Django`
    然后 Django 将安装到类似`~/env/lib/python2.7/site-packages/django`.
6.  或者你可以
    `pip install -e svn+http://code.djangoproject.com/svn/django/trunk`
    安装最新的 Django 主干代码，源代码在`~/env/src/django/django`. 然后您可以自由阅读源代码或修改它。此外，您可以通过`make html`in`~/env/src/django/docs`

通过上述方法安装的东西完全是本地的，你不需要输入 sudo 或冒着弄乱路径的风险`/usr/local/lib`，甚至更多，你可以安装多个版本的 Django 或 Python 而不影响每个其他！

此外，您可以尝试 virtualenvwrapper。

# java - 如何获取 Java Applet 当前运行的网页的 URL？

> ID：10066683
> 
> 赞同：4
> 
> 时间：2012-04-08T21:28:05.890
> 
> 标签：java, url, applet

我正在用 Java 制作一个将嵌入网页的小程序，但该页面的 URL 是动态的。我需要能够获取运行小程序的页面的当前 URL。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T21:33:52.177

看[`getDocumentBase()`](http://docs.oracle.com/javase/7/docs/api/java/applet/Applet.html#getDocumentBase%28%29)

* * *

> 使用 getDocumentBase() 实际上给了我一个 NullPointerException..

它在这里工作正常。我刚刚使用此代码对其进行了测试。

```
// <applet code=MyLocation width=400 height=30></applet>
import javax.swing.*;

public class MyLocation extends JApplet {

    @Override
    public void init() {
        add( new JLabel(getDocumentBase().toString()));
    }
} 
```

要编译并运行它，请在保存源代码后执行以下操作。

```
prompt> javac MyLocation.java
prompt> appletviewer MyLocation.java 
```

`.java`第二行的扩展名没有错字。最新版本的小程序查看器将在指定的源代码中查找`applet`注释中定义的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T21:35:32.453

它应该像这样工作：

```
[YourApplet].getCodeBase(); 
```

此方法返回 URL 对象。然后你得到你需要的东西:)

# c - 如何在标题中定义和使用没有完整结构定义的结构？

> ID：10066684
> 
> 赞同：0
> 
> 时间：2012-04-08T21:28:20.300
> 
> 标签：c, struct, c89, design-guidelines

为了控制结构成员并强制程序员使用 getter/setter 函数，我想编写如下模式的代码：

```
/* Header file: point.h */
...
/* define a struct without full struct definition. */
struct point;

/* getter/setter functions. */
int point_get_x(const struct point* pt);
void point_set_x(struct point* pt, int x);
...

//--------------------------------------------

/* Source file: point.c */
struct point
{
  int x, y;
};

int point_get_x(const struct point* pt) {return pt->x; }

void point_set_x(struct point* pt, int x) {pt->x = x;}

//--------------------------------------------

/* Any source file: eg. main.c */

#include "point.h"
int main()
{
  struct point pt;

  // Good: cannot access struct members directly.
  // He/She should use getter/setter functions.
  //pt.x = 0;

  point_set_x(&pt, 0);
} 
```

但是这段代码不能用 MSVC++ 2010 编译。

我应该为编译做哪些更改？

注意：我使用 ANSI-C (C89) 标准，而不是 C99 或 C++。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T21:38:51.190

`make_point`在point.c中创建一个函数来创建点；main.c 不知道结构有多大。

还

```
typedef struct point point; 
```

将支持使用`point`而不是`struct point`在声明中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T21:37:01.597

```
 point pt; 
```

类型的名称是`struct point`。你必须每次都使用整个东西，或者你需要`typedef`它。^*

即你应该写

```
 struct point pt; 
```

在那里`main`。

* * *

您可能正在考虑`FILE*`标准库中的类似内容，并希望复制该行为。为此使用

```
struct s_point
typedef struct s_point point; 
```

在标题中。（有更短的写法，但我想避免混淆。）这声明了一个名为的类型`struct s_point`并为其分配了一个别名`point`。

* * *

(*) 请注意，这与 c++ 不同，其中`struct point`声明了一个名为`point`which is a的类型`struct`。

# javascript - 谷歌地图 javascript

> ID：10066687
> 
> 赞同：0
> 
> 时间：2012-04-08T21:28:37.623
> 
> 标签：javascript, google-maps

我有一个带有初始谷歌地图（城市）和组合框的页面。用户可以通过在地图上拖动一个标记来选择一个位置，然后这个值（lang，long）被保存到一个隐藏字段并传递给服务器。然而，该组合列出了一些城市区域。当用户选择一个区域时，谷歌地图会发生变化：城市地图消失，显示所选区域的地图。这是通过 getJSON 完成的，一切正常。

我的问题是如何启用*第二张*地图，区域地图，具有相同的功能（更新可拖动标记的位置）。我知道侦听器最初绑定到初始地图，我只是不知道足够的 javascript 来了解将这些函数放在哪里以启用新地图上的功能，也许是 jquery live？

[我在这个答案](https://stackoverflow.com/questions/6190482/google-maps-api-v3-update-marker)中找到了很大的帮助，但它并没有解决我的问题。

代码如下

```
<script type="text/javascript" src="/site_media/js/jquery-1.6.2.min.js"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>

$(function() {

$("#id_area").change(function() {

    var url = '/areageo/'+this.value;

    $.getJSON(url, function(data) {

        if (data.lat){

            $('#mapCanvas').empty();
            // map options
            var options = {
                   zoom: 14,
                   center: new google.maps.LatLng(data.lat, data.lon),
                   mapTypeId: google.maps.MapTypeId.ROADMAP
                 };

                 // Creating the map
            var map = new google.maps.Map(document.getElementById('mapCanvas'), options);

                 // Adding a marker to the map
            var marker = new google.maps.Marker({
                   position: new google.maps.LatLng(data.lat, data.lon),
                   map: map,
                   title: 'Some title',
                   draggable: true,
                      });
            }

                 });  //getJSON end function

    });  //id_area change end function

});

         var geocoder = new google.maps.Geocoder();
         function geocodePosition(pos) {
           geocoder.geocode({
             latLng: pos
           }, function(responses) {
             if (responses && responses.length > 0) {
               updateMarkerAddress(responses[0].formatted_address);
             } else {
               updateMarkerAddress('Cannot determine address at this location.');
             }
           });
         }
         function updateMarkerStatus(str) {
           document.getElementById('markerStatus').innerHTML = str;
         }
         function updateMarkerPosition(latLng) {
           document.getElementById('info').innerHTML = [
             latLng.lat(),
             latLng.lng()
           ].join(', ');

           id_lat.value = [
             latLng.lat()];
           id_lon.value = [
             latLng.lng()];
         }

         function updateMarkerAddress(str) {
           document.getElementById('address').innerHTML = str;
         }

        // initial setup
         function initialize() {
           var latLng = new google.maps.LatLng(44.77184334415235, 20.55164378320319); // initial map position
           var map = new google.maps.Map(document.getElementById('mapCanvas'), {
             zoom: 12, // initial zoom
             center: latLng,
             mapTypeId: google.maps.MapTypeId.ROADMAP
           });

           var marker = new google.maps.Marker({
             position: latLng,
             title: 'Point A',
             map: map,
             draggable: true,

           });

           // Update current position info.
           updateMarkerPosition(latLng);
           geocodePosition(latLng);

           // Add dragging event listeners.
           google.maps.event.addListener(marker, 'dragstart', function() {
             updateMarkerAddress('Dragging...');
           });

           google.maps.event.addListener(marker, 'drag', function() {
             updateMarkerStatus('Dragging...');
             updateMarkerPosition(marker.getPosition());
           });

           google.maps.event.addListener(marker, 'dragend', function() {
             updateMarkerStatus('Drag ended');
             geocodePosition(marker.getPosition());
           });
         }

         // Onload handler to fire off the app.
         google.maps.event.addDomListener(window, 'load', initialize);
         </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T21:38:58.567

简单的答案是*不要摆脱地图*。当用户选择一个郊区时，将*现有*地图缩放到该区域（并在必要时移动标记以使其可见）。然后你不必重新定义任何东西。

**如果你有一张地图，试着用那张地图做所有事情。您永远不必销毁它：只需让它显示其他内容即可。**

因此，您的`if (data.lat) {...`块只需将地图居中`data.lat,data.lon`并将现有标记移动到该位置。因为标记仍然是相同的标记，并且地图仍然是相同的地图，所以您不需要重新创建侦听器或任何东西。

# javascript - 表单中的 web2py CRUD.create() 字段表示

> ID：10066689
> 
> 赞同：3
> 
> 时间：2012-04-08T21:29:08.107
> 
> 标签：javascript, python, crud, web2py

例如，我有这个领域

```
Field('yourref', type='string',
          label=T('Your reference')), 
```

在 HTML 中显示为 INPUT

```
<input id='table_yourref' name='yourref' value=''/> 
```

我想这样展示

```
<input id='table_yourref' name='yourref' value=''/>
<a onclick='add()'>Add</a>
<a onclick='remove()'>Remove</a> 
```

`add()`并且`remove()`是用于添加或删除字段的 jQuery 函数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T00:48:56.213

最好的方法可能是创建一个[自定义小部件](http://web2py.com/books/default/chapter/29/7#Widgets)：

```
def mywidget(field, value):
    return CAT(INPUT(_name=field.name,
                     _id='%s_%s' % (field._tablename, field.name),
                     _class=field.type,
                     _value=value, requires=field.requires),
               A('Add', _onclick='add()'),
               A('Remove', _onclick='remove()'))
...

Field('yourref', type='string', label=T('Your reference'),
      widget=mywidget) 
```

您还可以在创建表单后使用[服务器端 DOM](http://web2py.com/books/default/chapter/29/5#Server-side-DOM-and-parsing)将链接插入到表单中：

```
form = crud.create(db.mytable)
form.element('#mytable_myfield__row .w2p_fw').append(A('Add', _onclick='add()'))
form.element('#mytable_myfield__row .w2p_fw').append(A('Remove', _onclick='remove()')) 
```

自定义小部件的优点是它将应用于基于 db.mytable 创建的所有表单，而 DOM 方法必须单独应用于每个表单。

# html - 容器中的中心溢出浮动 div

> ID：10066692
> 
> 赞同：0
> 
> 时间：2012-04-08T21:29:26.110
> 
> 标签：html, css

我目前有一个简单的设置：一个居中的容器 div，它是屏幕宽度的 90%，包含五个 20% 宽度的 div。当 div 都适合在行上时，这很有效。它们都进行了调整，以使它们均匀分布并居中。但是，因为当用户将屏幕调整为较小的宽度时，5 个 div 必须具有最小宽度，所以它们会填充多于一行并且不再居中。一旦发生这种情况，我希望它们保持最小宽度，但要居中，以便您可以在 div 的顶行的任一侧看到蓝色容器 div，而不是让它们全部左对齐（对于以下行也是如此）。我怎样才能在 HTML 和 CSS 中做到这一点？谢谢。

```
<style type="text/css">
.container {
  height: 220px;
  width: 90%;
  max-width: 1200px;

  margin-left: auto;   
  margin-right: auto;

  background-color: blue;
}

.box {
  position: relative;
  height: 100%;
  width: 20%;
  min-width: 200px;

  margin: 0 auto;
  float: left;

  background-color: red;
}
</style>

<div class="container">
    <div class="box">1</div>
    <div class="box">2</div>
    <div class="box">3</div>
    <div class="box">4</div>
    <div class="box">5</div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T22:51:14.863

如果不使用浮点数，而是`display:inline-block`结合使用，`text-align:center`我认为您将获得所需的居中效果。

> ```
> .container 
> {
>     text-align:center;
> }
> 
> .box 
> {
>     display:inline-block;
>     /*For IE*/
>     *display: inline;
>     zoom:1;
>     /*Aligns divs vertically along the top*/
>     vertical-align:top;
> } 
> ```

# 这里的例子：

[http://jsfiddle.net/DigitalBiscuits/pXGz3/3/](http://jsfiddle.net/DigitalBiscuits/pXGz3/3/)

（调整结果窗口大小以查看效果）

注意：使用 inline-block 时，请确保 s 之间没有回车`<div>`。否则你会在它们之间得到一点不需要的空间

# ios - 制作巨大的应用程序

> ID：10066693
> 
> 赞同：0
> 
> 时间：2012-04-08T21:29:31.753
> 
> 标签：ios, xcode, text, uilabel

基本上我想制作一个有很多屏幕的应用程序（显示文本），但仅此而已。它一点也不复杂。我不想拥有 100 多个视图控制器，那么有什么非常简单的方法可以做到这一点吗？

这将是一个应用程序，您可以在其中阅读一页文本，然后按下一步按钮并阅读下一页。

最好/最干净的方法是什么？

谢谢你，-乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T21:34:44.840

引用 iOS 审查指南 (https://developer.apple.com/appstore/resources/approval/guidelines.html)：

> 2.21
> 
> [...] 只是一本书的应用程序应该提交给 iBookstore。

也许你应该把它写成一本书而不是一个应用程序。

# javascript - 如果很少发生，我可以使用哪些工具来找出哪些 JavaScript 会挂起网页？

> ID：10066694
> 
> 赞同：0
> 
> 时间：2012-04-08T21:29:42.220
> 
> 标签：javascript, google-chrome, google-chrome-devtools, javascript-debugger

如果很少发生（这意味着我很难重现它），我可以使用哪些工具来找出哪些 JavaScript 会挂起网页？

我在 Windows 中使用 Google Chrome 浏览器。是否可以使用浏览器的工具找出挂起页面的原因？“开发人员工具”菜单选项打开空白面板。

PS。违规网站是“www.vk.com”。同样的问题在 Safari 和 Opera 中得到确认。所以这绝对不是特定于浏览器的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T21:34:38.557

你应该看看[风车](http://www.getwindmill.com/)。

# php - 如何检查 PHP 脚本是否正在运行？

> ID：10066697
> 
> 赞同：1
> 
> 时间：2012-04-08T21:30:06.163
> 
> 标签：php, daemon

如果我在 Windows 中使用 PHP 脚本启动 PHP 守护程序，`popen`如果该脚本仍在从 PHP 脚本运行，我该如何再次签入？

我用 Apache，php 作为模块

更新：它开始的过程

```
popen('start /b php process.php', 'r'); 
```

一旦它在 Windows 中启动，就会启动一个 php.exe 进程。如果该进程仍在运行，我如何让该进程 PID 稍后从另一个 PHP 脚本检查（它运行数小时）？

我读了这个[proc_open](http://php.net/manual/en/function.proc-open.php)，它应该给出启动进程的PID，`proc_get_status` 但是使用与popen一起使用的相同命令没有任何反应

更新：我注意到使用相同的命令和 proc_open 一个 php.exe 进程确实启动了，但它在启动它的脚本结束后关闭，并且 proc_get_status 返回的 PID 与 Windows PID 不对应

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T22:06:26.653

有几种使用 PHP 和 Windows 安全运行进程的方法：

## 1\. 使用 WScript.Shell 对象启动后台进程

您可以使用[`Run`](http://msdn.microsoft.com/en-us/library/d5fk67ky%28VS.85%29.aspx)Windows 内置的 WScript.Shell 对象的方法启动该过程。通过改变第二个参数，您可以使窗口隐藏、可见、最小化等。通过将第三个参数设置为 false，Run 不会等待进程完成执行。此代码仅适用于 Windows。要了解有关 COM 的更多信息，请阅读[PHP 的文档](http://www.php.net/manual/en/intro.com.php)。

```
$WshShell = new COM("WScript.Shell");
$oExec = $WshShell->Run("cmd /C dir /S %windir%", 0, false); 
```

## 2.使用popen和pclose启动后台进程

这段代码应该可以在 Linux 和 Windows 上运行。

```
pclose(popen("start \"bla\" \"" . $exe . "\" " . escapeshellarg($args), "r")); 
```

## 3.用psexec启动后台进程

此方法需要[从 sysinternals 安装免费软件 pstools](http://www.sysinternals.com/)：

```
exec("psexec -d blah.bat"); 
```

[您可以通过阅读这个简短的教程](http://www.somacon.com/p395.php)来了解有关它的更多信息。我以前用过第一种方法，它总是对我有用。

* * *

要查找现有进程的 PID，我认为您不能使用[`getmypid`](http://php.net/manual/en/function.getmypid.php)，[`posix_getpid`](http://php.net/manual/en/function.posix-getpid.php)因此您必须使用`exec('tasklist');`. 或者，您可以安装[此扩展程序](http://wiki.uniformserver.com/index.php/PHP_CLI%3a_PHP_INI#Extension_download)并按照[这些说明](http://wiki.uniformserver.com/index.php/PHP_CLI%3a_Process_Running)进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T22:11:23.627

使用来自 php 的 system()

和

使用 cmd.exe：

任务列表

如果你有 Powershell：

获取过程

未测试。或者使用 winapi 调用编写您的小型控制台应用程序

# ruby-on-rails - Authlogic current_user_session 和 current_user

> ID：10066698
> 
> 赞同：4
> 
> 时间：2012-04-08T21:30:06.663
> 
> 标签：ruby-on-rails, authentication, authlogic

我在 authlogic 的 application_controller.rb 中有以下辅助方法：

```
def current_user_session
  return @current_user_session if defined?(@current_user_session)
  @current_user_session = UserSession.find
end

def current_user
  return @current_user if defined?(@current_user)
  @current_user = current_user_session && current_user_session.record
end 
```

我不明白 current_user_session 方法 - 具体来说，UserSession.find 如何获取当前用户的会话。我也不明白它对 find 做了什么，没有给出任何参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T21:57:56.903

它不需要传递参数，因为它使用一个[唯一的会话 ID](https://github.com/binarylogic/authlogic/blob/master/lib/authlogic/session/id.rb)，其功能[内置于 Rails](http://guides.rubyonrails.org/security.html#sessions)中。查看[find 方法的 authlogic 文档以](https://github.com/binarylogic/authlogic/blob/master/lib/authlogic/session/persistence.rb#L13)获取更多信息。它与 Active Record 类不同，后者`find`在数据库中查询特定的主键。

# ruby - 如何使用 ruby net-ldap 测试返回的条目数是否为 0

> ID：10066700
> 
> 赞同：0
> 
> 时间：2012-04-08T21:30:18.123
> 
> 标签：ruby, ldap

[在这个问题](https://stackoverflow.com/questions/334519/ldap-through-ruby-or-rails)中的搜索示例的基础上，如何使用 net-ldap Gem 来测试该[`search()`](http://net-ldap.rubyforge.org/Net/LDAP.html#method-i-search)方法是没有返回结果还是返回一些结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T21:36:26.667

通过它在您链接到的其他问题中的使用方式，它似乎返回了一个数组，因此您可以调用`empty?`结果。

您链接到的文档中也有一些有趣的信息：

> 当 :return_result => false 时，搜索将只返回一个布尔值，表示操作是否成功。

# java - 在子查询中休眠

> ID：10066703
> 
> 赞同：0
> 
> 时间：2012-04-08T21:30:39.023
> 
> 标签：java, hibernate

我有一张像这样的桌子：

```
Users (user_id, name, age, country_id) 
```

现在我想要一个像这样的查询：

```
SELECT *
FROM users
where country_id in (1,2,3,4,5) 
```

用户没有关系，我只想在没有任何关联的情况下执行此操作。

我想用标准查询来做到这一点。

我看到了限制，但不确定它是否有 where in 子句：

```
sessionFactory.getCurrentSession().createCriteria(User.class)
  .add(Restrictions.eq("country_id", countryId)
  .list(); 
```

所以我的改变是我有一个需要通过的国家 ID 列表（List countryIds）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T21:53:12.523

你想要'country_id in (...)'吗？

如果是，那么：

```
sessionFactory.getCurrentSession().createCriteria(User.class)
 .add(Restrictions.in("countryId", countryIds)
 .list(); 
```

我还使用了“countryId” - 在标准中您使用属性名称，而不是表列名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T21:43:34.917

```
List<Integer> countryIds=//get data from either a query or criteria

Criteria c = // obtain criteria from session

Disjunction disJunction = Restrctions.disjunction();
disJunction .add(Restrictions.in("country_id", countryIds));
c.add(disJunction); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T12:51:51.820

尤金的解决方案是最适合的。如果要匹配多个可能的国家/地区 ID，请使用 Restrictions.in。

您还可以使用 Property.forName(...).in(...)，例如：

```
sessionFactory.getCurrentSession().createCriteria(User.class)
    .add(Property.forName("countryId").in(countryIds))
    .list(); 
```

# javascript - 在循环“for”中调用window.frames

> ID：10066705
> 
> 赞同：0
> 
> 时间：2012-04-08T21:31:10.417
> 
> 标签：javascript, arrays, function, frames

我有一个函数，它接收一个包含我要执行的函数名称的数组：

```
function ExecutaFnParent(numFunc)
{
    for (i = 0; i < numFunc.length; i++)
    {
        window.frames.iprincipal.numFunc[i](1);
    }
} 
```

但这不起作用。如何传递`numFunc`函数的值？

"numFuncio" 是 iframe "iprincipal" 内函数的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T22:32:14.650

尝试更换

```
window.frames.iprincipal.numFunc[i](1); 
```

和

```
window.frames.iprincipal[numFunc[i]](1); 
```

# c++ - 为什么 clang 会混淆 Boost for STL？

> ID：10066706
> 
> 赞同：2
> 
> 时间：2012-04-08T21:31:22.837
> 
> 标签：c++, boost, stl, header, clang

我正在尝试用 Clang 编译一个 C++ 库（在 g++ 中编译得很好）。

但是由于某种原因，我在使用 stl 容器的任何地方都会遇到错误。该错误消息似乎表明它认为我正在尝试使用提升集，但我认为我不是。

我不相信我以某种方式别名`boost`为的任何地方`std`，而且我从未真正使用过该`using`关键字。

```
/Users/zennatavares/repos/cliques/cliques/../cliques/structures/disjointset.h:140:8: error: too few template arguments for class template 'set'
                std::set<int> visited_parents_;
                     ^
/usr/local/include/boost/detail/container_fwd.hpp:90:64: note: template is declared here
    template <class Key, class Compare, class Allocator> class set; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T21:47:32.833

我认为问题在于 boost 试图转发声明命名空间 std 的成员，而 Boost 对 libc++ 的转发声明是错误的。没有任何可移植的方式来做这样的前向声明，所以 boost 真的不应该这样做。在命名空间 std 中声明事物会导致未定义的行为。

这是针对其中一个问题提交的针对 boost 的错误。[https://svn.boost.org/trac/boost/ticket/5197](https://svn.boost.org/trac/boost/ticket/5197)

如果您发布了一个完整的程序来重现该问题，那么也许我们可以提供更多详细信息，说明您可以采取哪些措施来解决您的问题。

# c# - readonly 关键字不会使 List<> ReadOnly？

> ID：10066708
> 
> 赞同：29
> 
> 时间：2012-04-08T21:31:40.580
> 
> 标签：c#, list, collections

我在公共静态类中有以下代码：

```
public static class MyList
{
    public static readonly SortedList<int, List<myObj>> CharList;
    // ...etc.
} 
```

..但即使使用`readonly`我仍然可以将项目添加到另一个类的列表中：

```
MyList.CharList[100] = new List<myObj>() { new myObj(30, 30) }; 
```

或者

```
MyList.CharList.Add(new List<myObj>() { new myObj(30, 30) }); 
```

有没有办法在不改变 CharList 的实现的情况下使东西只读（它会破坏一些东西）？如果我必须更改实现（使其不可更改），最好的方法是什么？我需要它是 List<T, T>，所以 ReadOnlyCollection 不会做

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-04-08T21:34:32.260

修饰符[`readonly`](http://msdn.microsoft.com/en-us/library/acdd6hb7.aspx)意味着只能在声明或构造函数中*分配值。*这并不*意味着*分配的对象变得不可变。

如果您希望您的对象是不可变的，则必须使用不可变的类型。您提到的类型[`ReadOnlyCollection<T>`](http://msdn.microsoft.com/en-us/library/ms132474.aspx)是不可变集合的示例。有关如何为字典实现相同的功能，请参阅此相关问题：

*   [.NET 中是否有可用的只读通用字典？](https://stackoverflow.com/questions/678379/is-there-a-read-only-generic-dictionary-available-in-net)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T21:43:15.210

readonly 修饰符只是保证变量“CharList”不能从类构造函数之外重新分配给其他东西。您需要创建自己的没有公共 Add() 方法的字典结构。

```
class ImmutableSortedList<T, T1> 
{
    SortedList<T, T1> mSortedList;

    public ImmutableSortedList(SortedList<T, T1> sortedList) // can only add here (immutable)
    {
        this.mSortedList = sortedList; 
    }

    public implicit operator ImmutableSortedList<T, T1>(SortedList<T, T1> sortedList)
    {
        return new ImmutableSortedList<T, T1>(sortedList); 
    }
} 
```

或者，如果您确实无法更改实现，请将 SortedList 设为私有并添加您自己的方法来控制对它的访问：

```
class MyList
{
    // private now
    readonly SortedList<int, List<myObj>> CharList;

    // public indexer
    public List<myObj> this[int index]
    {
        get { return this.CharList[index]; }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T21:39:13.983

List 具有返回只读列表的[AsReadOnly方法应该是您想要的。](http://msdn.microsoft.com/en-us/library/e78dcd75.aspx)

# c - 将结构指针传递给c中的函数

> ID：10066709
> 
> 赞同：24
> 
> 时间：2012-04-08T21:31:41.550
> 
> 标签：c, pointers, struct

我在将指向结构的指针传递给函数时遇到问题。我的代码基本上如下所示。在主函数中调用 modify_item 后，stuff == NULL。我希望 stuff 是指向元素等于 5 的项目结构的指针。我做错了什么？

```
void modify_item(struct item *s){
   struct item *retVal = malloc(sizeof(struct item));
   retVal->element = 5;
   s = retVal;
}

int main(){
   struct item *stuff = NULL;
   modify_item(stuff); //After this call, stuff == NULL, why?
} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-08T21:32:57.693

因为您是**按值**传递指针。该函数对指针的副本进行操作，并且从不修改原始指针。

要么将指针传递给指针（即 a `struct item **`），要么让函数返回指针。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-04-08T21:34:31.723

```
void modify_item(struct item **s){
   struct item *retVal = malloc(sizeof(struct item));
   retVal->element = 5;
   *s = retVal;
}

int main(){
   struct item *stuff = NULL;
   modify_item(&stuff); 
```

或者

```
struct item *modify_item(void){
   struct item *retVal = malloc(sizeof(struct item));
   retVal->element = 5;
   return retVal;
}

int main(){
   struct item *stuff = NULL;
   stuff = modify_item();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-07T08:20:33.173

如果函数“modify_item”打算更改作为参数传递的结构成员，我建议修改您的代码，如下所示。

```
void modify_item(struct item *s){
   s->element = 5;
}

int main(){
   struct item *stuff = malloc(sizeof(struct item));
   modify_item(stuff); 
} 
```

# facebook - 无法登录到 Facebook 开发者应用程序，而是被重定向到我的 Facebook 页面

> ID：10066711
> 
> 赞同：0
> 
> 时间：2012-04-08T21:31:55.297
> 
> 标签：facebook

我正在为安卓智能手机开发应用程序。有一个“社交”SDK 可以与 facebook 集成。像往常一样，SDK 需要设置一个 facebook 以从 facebook 获取应用程序 ID。所以，我有一个 facebook 社区页面（除了我的个人页面）。所以，我去了developers.facebook.com。按照链接“开始”，直到我在[https://developers.facebook.com/docs/mobile/android/build/](https://developers.facebook.com/docs/mobile/android/build/)有一个链接“在 Facebook 注册您的 Android 应用程序”，我按照它到[https:// developer.facebook.com/docs/mobile/android/build/#register](https://developers.facebook.com/docs/mobile/android/build/#register)。有一个链接“在 Facebook 上创建一个新应用程序”。当我点击它之一（同样糟糕的事情发生）：而不是进入“创建应用程序”页面：

1.  如果我已经登录到我的 facebook 社区页面，我将被重定向到该页面。
2.  如果我没有登录，facebook 会要求我登录，然后将我重定向到我的社区页面。

所以我无法访问developers.facebook.com 上的“创建应用程序对话框”。

我在这里缺少什么？我尝试使用 Google Chrome、Mozilla Firefox 和 Internet Explorer。非常感谢任何帮助，我是 facebook 应用程序的新手，我的领域实际上是 Android 开发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:42:34.993

我在某处读到，您无法为业务页面创建应用程序，但必须拥有用户帐户。所以有一个用户帐户然后创建一个页面。此时您应该能够访问应用程序开发人员部分

# c++ - 无法使用 SFML 和 SDL 加载图像？

> ID：10066714
> 
> 赞同：0
> 
> 时间：2012-04-08T21:32:07.213
> 
> 标签：c++, pointers, sdl, sfml

为了简单起见，我想为我目前正在进行的项目创建自己的函数。不幸的是，它一直在关闭经过错误检查后，我发现这是它无法从中加载任何内容的错误，以下是功能：

```
//SDL
void IMG_HANDLER::loadImage(const char * file, SDL_Surface *imgSRC)
{
    imgSRC = SDL_LoadBMP(file);

    if (imgSRC == NULL)
    {
        printf("Couldn't load IMG \n", stderr);
        exit(1);
    }
}

void IMG_HANDLER::SetImage(int x, int y, const char *file, SDL_Surface *dest, SDL_Surface *imgSRC)
{

loadImage(file, imgSRC);
    SDL_Rect offset;
    offset.x=x;
    offset.y=y;

    SDL_BlitSurface(imgSRC,NULL,dest, &offset);

}

//SFML

bool SpriteLoad::LoadSprite(std::string filename)
{
    if (!Image.LoadFromFile(filename.c_str()))
    {
        printf("Can't load image file", stderr);

        exit(1);
        return false;
    }
    Sprite.SetImage(Image);
    return true;
} 
```

我对此感到很困惑，尤其是当代码完美编译时。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T21:44:59.330

暂时忽略 SFML 代码，我认为一个问题是

```
//SDL
void IMG_HANDLER::loadImage(const char * file, SDL_Surface *imgSRC)
{
    imgSRC = SDL_LoadBMP(file);

    if (imgSRC == NULL)
    {
        printf("Couldn't load IMG \n", stderr);
        exit(1);
    }
} 
```

`imgSRC`never leave的值`loadImage`。您可能希望改为`imgSRC`引用，或从`loadImage`. 那是：

```
void IMG_HANDLER::loadImage(const char * file, SDL_Surface* &imgSRC) 
```

或者：

```
SDL_Surface *IMG_HANDLER::loadImage(const char * file) 
```

[最近提出了这个问题](https://stackoverflow.com/questions/10066709/passing-struct-pointer-to-function-in-c)，应该解释这种行为。

至于它们都不起作用，您可能需要检查您的图像文件是否采用适当的格式。

# extjs - ExtJS：使用post json数据从一个页面重定向到另一个页面

> ID：10066715
> 
> 赞同：1
> 
> 时间：2012-04-08T21:32:08.570
> 
> 标签：extjs, http-post

在我的应用程序中，我需要将用户从一个页面重定向到另一个页面，并在这两个页面之间发送 POST json 数据。

POST 我需要，因为 json 数据真的很长，我不能把它放在 GET-param

REDIRECT（NB 不是 AJAX）我需要，因为在第二页用户获取文件，由服务器生成（他得到的 json 数据）。

我正在寻找关于 ExtJS 的解决方案，但如果没有明确的方法，它可能是简单的 JavaScript。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-08T21:11:48.230

很抱歉发布了 necroposting，但我遇到了这个问题，我找到了这个页面。可能这会帮助某人。

您可以使用 JavaScript 创建表单，然后调用`form.submit();`

```
var form = document.createElement("form");
form.setAttribute("method", "post");
form.setAttribute("action", "http://target.com");
form.appendChild(this.createInput("name", "value")); // your params
document.body.appendChild(form);
form.submit(); 
```

和 createInput 函数：

```
createInput: function(name, value) {
    var field = document.createElement("input");
    field.setAttribute("name", name);
    field.setAttribute("value", value);
    field.setAttribute("type", "hidden");
    return field;
} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-04-08T23:14:12.737

这是您需要的代码：

```
Ext.Ajax.request({
url: 'YourUrl.php',    // To Which url you wanna POST.
success : function() {
window.location = './account/login'; //the location you want your browser to be  redirected.
},
params: { foo: 'bar' }  // Put your json data here or just enter the JSON object you wannat post
}); 
```

使用 Ext.Ajax 发送数据的默认方法是 POST，您不需要将方法设置为 POST。

一旦数据**成功**提交到服务器，页面将自动重定向。

# ios - 如何获取 QLPreviewItem 的文档图标？

> ID：10066722
> 
> 赞同：1
> 
> 时间：2012-04-08T21:33:18.227
> 
> 标签：ios, cocoa-touch, quicklook

是否可以在 iOS 中获取 QLPreviewItem 的图标？我想这类似于 Mail.app 显示的附件。只是一个简单的图标，代表相关对象的文件类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T08:46:56.047

签出`UIDocumentInteractionController`：

```
@property(nonatomic,readonly) NSArray *icons 
```

# android - 处理不同的密度和相同的分辨率

> ID：10066725
> 
> 赞同：0
> 
> 时间：2012-04-08T21:33:48.417
> 
> 标签：android

我已经在 2 台设备上测试了我的应用程序：

HTC HD2（480x800，密度=192）

HTC Sensation XL（480x800，密度=240）

当我在 HD2 上启动应用程序时，一切看起来都不错，但在 Sensation 上查看时，这是一个悲剧。

ImageButtons、TextViews、ImageViews，一切都变得非常非常大……

HD2 和 Sensation 都是 Android 系统的“normal-hdpi”，没有注意相差大约 50 像素。它使用“res/layout-normal-hdpi”文件夹中的 xml 文件进行两个测试。

那么问题来了，该如何处理呢？如何保持美观？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T23:41:29.177

Sensation XL 应该是大高清分辨率，4.7 英寸屏幕，而 HD2 正处于风口浪尖。它应该比 HD2 有更多的 dp，如果不是，那么问题出在谁开发了 Sensation 上的 ROM 映像。根据我前段时间用Python写的dpi计算器，HD2的dpi为216，Sensation的dpi为198——这可能是正常的，因为你的DPI设置得太高了，所以它认为屏幕更小，在这种情况下，除非您手动更改了 dpi，否则几乎可以肯定是 ROM 问题。

考虑到这一点，根据 dp 定义尺寸可能是一种解决方案 - dp 意味着在任何屏幕上都具有相同的尺寸。对于 TextView，使用 sp 设置文本大小。如果手机的尺寸在其 ROM 映像中设置正确，这将解决您遇到的缩放问题。

# php - 允许的内存大小耗尽错误<如何重置？

> ID：10066730
> 
> 赞同：0
> 
> 时间：2012-04-08T21:34:09.720
> 
> 标签：php, memory

我一直在运行一个循环，将 50,000 个数据集插入 MySQL 数据库。我托管空间上的服务器突然显示以下消息：

> **致命错误：第 14 行 /srv/www/htdocs/server/html/email.php 中允许的 20971520 字节内存大小已用尽（尝试分配 32 字节）**

我知道这意味着什么，但是如何重置所有内存以便再次使用？

笔记：

我不想增加我的记忆，就像

```
ini_set('memory_limit', '-1'); 
```

但想完全释放它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:16:20.367

在大多数情况下，当您拥有来自 Provider 的共享系统时，您无法为自己设置内存限制。然后，当服务器上的每 100 个人设置更高的内存限制时，提供程序就会出现问题。

所以他们在你的情况下给出一个固定的大小 20MB 并禁用**memory_limit**功能。

20MB 不算多。当您尝试插入大量数据集时，您需要一些内存。这就是为什么会出现消息**32 bytes** from allowed memory **20971520 bytes**的原因。

我认为 20MB 没有真正好的解决方案来解决这个问题。或许你可以尝试把一些逻辑放到数据库中，做一个**存储过程**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-22T10:20:56.000

我知道这是一个旧线程，但我发现了它，所以我认为值得为其他人发布。

我在尝试对每条记录中的单个字段执行批量系统更新时遇到了这个错误。记录被读入一个数组，处理并更新回数据库。我认为该错误是由存储在服务器阵列中的数据过多引起的。

为了解决这个问题，我将任务拆分为一次处理 1000 条记录。IE; （代码测试。

```
$r_count=1; $start_id=0; $end_id=1000;
while($r_count>0)
{ 
 $strSQL="SELECT * from spAddbook 
           WHERE id > '$start_id' AND id <= '$end_id'"; 
 $result = mysql_query($strSQL, $link) or die ("Couldn't read because ".mysql_error());
 $r_count = mysql_num_rows($result);
 echo"<br>$r_count found<br>";
 if (mysql_num_rows($result))
 {
  while ($qry = mysql_fetch_array($result))
  {
   // Read the Data and carry out processing
  }    
 }
 $start_id+=1000; $end_id+=1000;
} 
echo"<br><br>All Done"; 
```

我希望这有帮助..它对我有用。

# c++ - 如何向基类注册派生类成员函数指针

> ID：10066731
> 
> 赞同：9
> 
> 时间：2012-04-08T21:34:22.260
> 
> 标签：c++, member-function-pointers

与虚拟成员函数相反，我需要一个解决方案，其中可以注册在每个级别类派生中实现的函数以供基类以后调用。（不仅仅是最衍生的实现）

为此，我正在考虑为派生类提供一种机制，以便在派生类构造函数期间向基类注册其功能。

不过，我在使用成员函数指针参数时遇到了问题。我在想 Derived 是从 Base 派生的，`this`应该自动转换指针。

**这可以接近我正在尝试的方法还是我需要使用静态成员函数`void *`，和`static_cast`？**

```
class Base
{
protected:
    typedef void (Base::*PrepFn)( int n );
    void registerPrepFn( PrepFn fn ) {};
}

class Derived : public Base
{
    Derived() {
        registerPrepFn( &Derived::derivedPrepFn );
    };

    void derivedPrepFn( int n ) {};

} 
```

编译器错误：

```
error: no matching function for call to 'Derived::registerPrepFn(void (Derived::*)(int))'
note: candidates are:                 'void Base::registerPrepFn(void (Base::*)(int))' 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-08T21:56:23.810

如果您只需要击败错误消息，那么强制转换就可以了：

```
class Derived : public Base
{
    Derived() {
        registerPrepFn( static_cast<PrepFn>(&Derived::derivedPrepFn) );
    };

    void derivedPrepFn( int n ) {};

} 
```

通常用`Base* p`(**如果它实际上指向 Derived** ) 调用它：`(p->*registered)(0)`

有关工作示例，请参见[http://ideone.com/BB9oy 。](http://ideone.com/BB9oy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T21:54:19.613

oop 不允许这样做。行为切换是通过在对象创建时对对象的类进行多态来完成的。

如果您需要对象创建后的行为切换，您可以将动态行为重构为另一组多态类，并持有指向具有正确行为的类实例的“指针”。请谷歌“装饰类”软件模式。

# c# - System.Threading.Timer 导致其他定时器落后

> ID：10066733
> 
> 赞同：1
> 
> 时间：2012-04-08T21:34:29.817
> 
> 标签：c#, multithreading, sockets, timer, timeout

我在这里的第一篇文章，但这个网站已经回答了我过去的许多问题。希望我能提供足够的细节来解释我面临的问题，因为我不完全理解所有 .NET 如何处理我创建的线程！

好的，基本上，我有一个线程设置为每 1000 毫秒运行一次，它从视频编码器获取帧计数器并计算 FPS。System.Threading.Timer 现在的准确性已经足够了，尽管我意识到它并不准确（事件之间通常超过 1000 毫秒）。我还有另一个 Threading.Timer 正在运行并从网络读取数据到串行设备。问题是，如果网络设备不可用并且该计时器上的套接字超时，则 FPS 计时器将完全不同步！所以他们以前每 1015 毫秒（测量）执行一次，但是当我启动另一个 Thread.Timer 尝试建立套接字连接并且它失败时，它会导致 FPS 计数器计时器完全关闭（最多 7000 毫秒！！）。我不太清楚为什么这应该是并且真的需要FPS计数器几乎每秒运行一次，无论如何。

一点代码->

转数快计数器

```
private void getFPS(Object stateInfo)//Run once per second
{
    int frames = AxisMediaControl.getFrames; //Axis Encoder media control
    int fps = frames - prevValue;
    prevValue = frames;
    setFPSBar(fps, fps_color); //Delegate to update progress bar for FPS
} 
```

电池电量计时器

```
while (isRunning)
{
    if (!comm.Connected) //comm is standard socket client
        comm.Connect(this.ip_address, this.port);   //Timeout here     causes     other timer threads to go out of sync

if (comm.Connected)
{
    decimal reading = comm.getBatt_Level();
    //Calculate Readings and update GUI
    Console.Out.WriteLine("Reading = " + (int)prog);
break;//Debug

        } 
```

这是当前用于连接套接字的代码 ->

```
 public Socket mSocket { get; set; }
 public bool Connect(IPAddress ip_address, UInt16 port)
 {
    try
    {
        mSocket.Connect(ip_address, port);
    }
    catch(Exception ex)
    { 

    }
    return mSocket.Connected;   
} 
```

希望不要太模棱两可！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T21:44:59.237

虽然我不知道为什么您的 FPS 计时器不调用 7 秒，但我可以建议一种解决方法：通过记住 Environment.TickCount 值来测量自上次更新 FPS 值以来的 TimeSpan。然后，将 FPS 值计算为 (delta_frames / delta_t)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T11:40:44.493

感谢您的评论，我通过执行以下操作修复了它。

改为使用 a`System.Timers.Timer`并将自动重置设置为 false。每次其中一个计时器完成时，我都会再次启动它，这意味着每个电池设备只有一个计时器。初始解决方案的问题是网络超时导致线程存活的时间比定时器间隔长得多。因此，为了确保满足计时器间隔，更频繁地产生了一个新线程。

在运行期间，这意味着每个电池定时器大约有 5-7 个线程（其中 6 个正在超时，1 个即将开始）。更改为新计时器意味着现在应该只有一个线程。

我还在代码中添加了根据所用时间计算 FPS（使用秒表功能获得更高的准确性（感谢 USR））。谢谢您的帮助。我必须确保不要只将例外留空。

# javascript - Javascript 错误框

> ID：10066737
> 
> 赞同：0
> 
> 时间：2012-04-08T21:34:41.730
> 
> 标签：javascript, character, alert, max

大家好，我在这里有这个脚本，它计算字符和行数，现在虽然它仍然允许行和字符进入减号，但我希望它也可以设置一个警告框，这样它就可以阻止用户能够多加点文字，你能帮帮我吗？

javascript:

```
function textCounter(theField,theCharCounter,theLineCounter,maxChars,maxLines,maxPerLine) {
    var strTemp = "";
    var strLineCounter = 0;
    var strCharCounter = 0;

    for (var i = 0; i < theField.value.length; i++)
    {
        var strChar = theField.value.substring(i, i + 1);
        if (strChar == '\n')
        {
            strTemp += strChar;
            strCharCounter = 1;
            strLineCounter += 1;
        }
        else if (strCharCounter == maxPerLine)
        {
            strTemp += '\n' + strChar;
            strCharCounter = 1;
            strLineCounter += 1;
        }
        else
        {
            strTemp += strChar;
            strCharCounter ++;
        }
    }

    theCharCounter.value = maxChars - strTemp.length;
    theLineCounter.value = maxLines - strLineCounter;
} 
```

并在代码中使用：

```
<textarea name="comment" cols="50" rows="10" wrap="VIRTUAL" onKeyUp="textCounter(theForm.comment,theForm.remChars,remLines,900,30,50);"></textarea>
<br><input name=remChars type=text value="900" size=3 maxlength=3 readonly> characters left
<br><input name=remLines type=text value="30" size=3 maxlength=3 readonly> lines left<br> 
```

向主持人报告

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T21:38:14.547

1 - 在函数末尾添加一个检查：

```
var check = strTemp.length <= maxChars && strLineCounter <= maxLines;
if (!check) alert("Error message here!"); 
```

2 - 修剪字段的文本，使其仅包含所需的字符：

```
theField.value = theField.value.sbustring(0, maxChars - 1); 
```

3 - 在函数末尾添加一个返回：

```
return check ; 
```

4 - 并将事件绑定更改为：

```
onKeyUp="return textCounter(theForm.comment,theForm... 
```

# javascript - 如何将新属性添加到 json 数组？

> ID：10066741
> 
> 赞同：-3
> 
> 时间：2012-04-08T21:35:02.377
> 
> 标签：javascript

我有以下数组：

```
var arry = [{title='Test'}, {title='Test2'}, {title='Test3'}]; 
```

我想为数组中的每个对象添加一个新属性。最快的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T21:37:27.043

```
for(var i = 0; i < arry.length; i++)
{
  arry[i].prop = "value";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T21:43:11.587

没有进一步的信息：放下手和字符串操作。

在您每次出现之前`}`插入`foo='bar'`

我觉得这是一个糟糕的解决方案，如果数组的结构不是 100% 刚性的，它将在下一次更新时爆炸。无论如何，这是一个很好的例子，可以看到“引擎盖下”发生了什么

但是，为了获得有效的 JSON 字符串，您必须用双引号将键和字符串值括起来。

无论如何，我建议您获取 JSONParser 并开始使用对象，然后您将拥有更强大的解决方案，例如 Matthew 发布了它。

这是有效 JSON 的示例

```
[
    {
        "title": "Test"
    },
    {
        "title2": "Test2"
    },
    {
        "title3": "Test3"
    }
] 
```

[http://jsonlint.com/](http://jsonlint.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T21:44:53.897

下面是一些有效 JSON 的示例：

```
[
  {
     "title1": "hey, this is test one"
  },
  {
     "title2": "hi, test two"
  },
  {
     "title3": "what's up, test three"
  }
] 
```

您发布的不是 JSON。

这个答案可能会对您有所帮助：[https ://stackoverflow.com/a/617051/507629](https://stackoverflow.com/a/617051/507629)

~~要将某些内容添加到数组中，您可以使用`.push()`方法，例如：~~

 ~~```
var fruits = ["Banana", "Orange", "Apple", "Mango"];
fruits.push("Kiwi"); 
```~~ 

~~[`.push`在此处了解更多信息](http://www.w3schools.com/jsref/jsref_push.asp)。~~

# regex - 变量列表中的元引用模式

> ID：10066746
> 
> 赞同：1
> 
> 时间：2012-04-08T21:35:48.300
> 
> 标签：regex, perl, escaping, metacharacters

我有一个要在字符串中查找的模式列表。这些模式很多，并且包含许多我只想按字面匹配的元字符。所以这是元引用的完美应用`\Q..\E`。复杂之处在于我需要将模式的变量列表加入到正则表达式中。

```
use strict;
use warnings;
# sample string to represent my problem
    my $string = "{{a|!}} Abra\n{{b|!!}} {{b}} Hocus {{s|?}} Kedabra\n{{b|+?}} {{b|??}} Pocus\n {{s|?}}Alakazam\n";

# sample patterns to look for    
my @patterns = qw({{a|!}} {{s|?}} {{s|+?}} {{b|?}});
# since these patterns can be anything, I join the resulting array into a variable-length regex
my $regex = join("|",@patterns);

my @matched = $string =~ /$regex(\s\w+\s)/; # Error in matching regex due to unquoted metacharacters
print join("", @matched); # intended result: Hocus\n Pocus\n 
```

当我尝试将元引用引入连接操作时，它们似乎没有效果。

```
# quote all patterns so that they match literally, but make sure the alternating metacharacter works as intended
my $qmregex = "\Q".join("\E|\Q", @patterns)."\E";

my @matched = $string =~ /$qmregex(\s\w+\s)/; # The same error 
```

由于某种原因，当元引用包含在我用作正则表达式的字符串中时，它不起作用。对我来说，它们只有在直接添加到正则表达式时才起作用，`/\Q$anexpression\E/`但据我所知，这对我来说不是一个选择。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T22:33:55.607

我不明白您的预期结果，因为`Abra`并且`Kedabra`是唯一以任何模式开头的字符串。

要解决您的问题，您必须将正则表达式的每个组件分别转义为`\Q`并`\E`仅影响它们出现的字符串的值，因此`"\Q"`and`"\E"`只是空字符串`""`，并且`"\E|\Q"`只是`"|"`. 你可以写

```
my $qmregex = join '|', map "\Q$_\E", @patterns; 
```

但调用`quotemeta`函数更简单。

您还必须将列表括在括号中`(?:...)`以隔离交替，并将`/g`修饰符应用于正则表达式匹配以查找字符串中的所有出现。

尝试

```
use strict;
use warnings;

my $string = "{{a|!}} Abra\n{{b|!!}} {{b}} Hocus {{s|?}} Kedabra\n{{b|+?}} {{b|??}} Pocus\n {{s|?}}Alakazam\n";

my @patterns = qw(  {{a|!}} {{s|?}} {{s|+?}} {{b|?}}  );

my $regex = join '|', map quotemeta, @patterns;
my @matched = $string =~ /(?:$regex)(\s\w+\s)/g;
print @matched; 
```

**输出**

```
 Abra
 Kedabra 
```

# javascript - Google +1 按钮未打开“分享此”气泡

> ID：10066748
> 
> 赞同：2
> 
> 时间：2012-04-08T21:36:19.020
> 
> 标签：javascript, html, google-plus-one

我在使用 google plusone 按钮时出现了一些奇怪的行为。

当用户单击 +1 按钮时，我希望“分享此”气泡会打开，但它没有打开，所以我从页面中删除了所有内容，删除了所有不必要的 html/css/js，并仅使用 google+ 获取此页面1 个按钮

[http://demo.benimgibi.net/dikkat-ne-kadar-renk-o-kadar-vitamin/?v=1](http://demo.benimgibi.net/dikkat-ne-kadar-renk-o-kadar-vitamin/?v=1)

按预期工作正常，然后我在代码中添加了一个 jpg

```
<img height="250" width="650" alt="" src="http://www.benimgibi.net/wp-content/uploads/2012/03/gj1u0tfwyjmtwfv7.jpg" /> 
```

它不起作用，你可以在这里看到：[http ://demo.benimgibi.net/dikkat-ne-kadar-renk-o-kadar-vitamin/?v=2](http://demo.benimgibi.net/dikkat-ne-kadar-renk-o-kadar-vitamin/?v=2)

更奇怪的是，如果我将图像的宽度更改为一个非常小的数字，比如 50，它会再次起作用。

你可以在这里看到那个版本：http: [//demo.benimgibi.net/dikkat-ne-kadar-renk-o-kadar-vitamin/ ?v=3](http://demo.benimgibi.net/dikkat-ne-kadar-renk-o-kadar-vitamin/?v=3)

**注意：** +1 在所有情况下都可以正常工作，但共享气泡不会在版本 2 中打开。我对“共享气泡”的意思是

![在此处输入图像描述](../Images/5e9b3fb1a75c4992b76aad3463435ef8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T21:44:26.687

对我来说，泡沫在这两种情况下都有效。

更新后尝试清理浏览器的缓存（或使用另一个）并再次检查。有时，当缓存中的数据与页面中的数据不对应时，javascript 脚本可能会被阻止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T22:00:34.303

对我来说，它在所有情况下都是开放的。是的，但是`version-2`要花几秒钟的时间才能做出响应。

但无论如何，

> 你的照片不可能是它背后的原因。

因此，请记住这一点，延迟响应可能还有其他原因。

# git - git 排除 vs 忽略

> ID：10066749
> 
> 赞同：34
> 
> 时间：2012-04-08T21:36:20.137
> 
> 标签：git, gitignore, git-tower

我使用[Tower](http://www.git-tower.com/)在 Mac 中使用 Git。Tower 中的设置具有创建 .gitignore 的 Ignores 部分，但它还有另一个名为“Excludes”的部分。似乎可以将排除与“# git ls-files --others --exclude-from=.git/info/exclude”一起使用。

![塔截图](../Images/12f0ef17a072dc243b6eaf4eb2aa9ec1.png)

排除是为了什么？为什么当 gitignore 可用时需要排除？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-04-08T21:40:03.717

它是一个不在文件列表中的文件`.gitignore`（可以进行版本控制），但您希望在您的机器的存储库副本中排除这些文件。

从[文档](http://linux.die.net/man/5/gitignore)：

> 特定于特定存储库但不需要与其他相关存储库共享的模式（例如，存在于存储库中但特定于一个用户工作流的辅助文件）应该进入 $GIT_DIR/info/exclude 文件。

请注意， .git/info/exclude 无法进行版本控制，因为它位于 .git 目录中。

# android - 平台兼容性问题

> ID：10066759
> 
> 赞同：1
> 
> 时间：2012-04-08T21:37:33.823
> 
> 标签：android, sdk

Android 平台示例代码和来自 Android 开发者网站的参考基于平台 1.5 我了解较新的平台可以支持在较旧平台上开发的应用程序，但倒数不适用，这是有道理的，但编码是否不同？用于开发 1.5 应用程序的代码在更新的平台上是否仍然有用，或者是否有更新的类和方法取代了它们？如果无法在模拟器上查看由 IME 开发的应用程序，或者如何在设备上对其进行测试或检索，Eclipse 似乎在其样本中与类和方法相关的代码错误很多？欢迎任何建议......对不起，它太长了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T22:33:45.827

如果您查看 SDK 文件夹，在 Windows 上`c:\<SDK location>\samples\android-x`，样本将根据 api 级别定位，因此它们肯定会在那里兼容，所以我会看看这些。

要回答您的其他问题，是的，当您提升 api 级别时，api 会发生变化，因此它们应该会导致警告或编译错误，并且某些类甚至可能被完全删除。一般来说，较低级别的东西不应该改变太多，但最重要的是语义很少改变，除非原始实现中存在设计缺陷。

每个版本的发行说明通常会指出发生了哪些变化，并且我认为在线文档通常可以很好地告知您哪些内容已被弃用。如果您只是针对旧设备，那么您的模拟器只是设置为针对那些 api 级别，但如果您担心功能，那么您可以使用 api 1.5 进行编码，并运行 ICS api 15 级模拟器并检查一切正常，如果不是然后你决定最好的策略应该是什么。一般来说，我建议将 Android 2.2 及更高版本用于移动设备，将 3.0 用于平板电脑，但实际上这取决于你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T21:57:53.160

三个是已弃用且不能再使用的类，例如 Contacts.People。还有一些已弃用的类，它们仍然可以使用，但在新项目中应避免使用。还有一些以前没有的新课程。在某些情况下，例如 Fragment，有兼容性支持库可以在旧平台上使用新功能，但对于旧平台不支持的类（例如 PreferenceFragment）则不然。

# c# - 如何为网络客户端传输更新

> ID：10066760
> 
> 赞同：0
> 
> 时间：2012-04-08T21:37:34.990
> 
> 标签：c#, .net, sockets, networking, remoting

我有一个 C# 应用程序并使用表单，每次右键单击表单时我都会放置一个标签。此标签可以移动、调整大小和修改其颜色。到目前为止一切都很好，但我想制作一个服务器，它将接收我所做的一切并将其发送给其他客户端，以便他们可以看到我所做的一切，并且他们也可以做完全相同的事情。我已经制作了事件处理程序，但我不知道如何通过网络发送信息，或者发送什么信息来更新每个客户端的表单。

```
 internal System.Windows.Forms.ContextMenu mnuForm;
    internal System.Windows.Forms.MenuItem mnuNewSquare;
    internal System.Windows.Forms.ContextMenu mnuLabel;
    internal System.Windows.Forms.MenuItem mnuColorChange;
private void mnuNewSquare_Click(object sender, System.EventArgs e)
    {
        // Create and configure the "square".
        Label newLabel = new Label();
        newLabel.Size = new Size(40, 40);
        newLabel.BorderStyle = BorderStyle.FixedSingle;

        // To determine where to place the label, you need to convert the 
        // current screen-based mouse coordinates into relative form coordinates.
        newLabel.Location = this.PointToClient(Control.MousePosition);

        // Attach a context menu to the label.
        newLabel.ContextMenu = mnuLabel;

        // Connect the label to all its event handlers.
        newLabel.MouseDown += new MouseEventHandler(lbl_MouseDown);
        newLabel.MouseMove += new MouseEventHandler(lbl_MouseMove);
        newLabel.MouseUp += new MouseEventHandler(lbl_MouseUp);

        // Add the label to the form.
        this.Controls.Add(newLabel);

    }
    // Keep track of when fake drag or resize mode is enabled.
    private bool isDragging = false;
    private bool isResizing = false;

    // Store the location where the user clicked on the control.
    private int clickOffsetX, clickOffsetY;

    private void lbl_MouseDown(object sender,
        System.Windows.Forms.MouseEventArgs e)
    {
        // Retrieve a reference to the active label.
        Control currentCtrl;
        currentCtrl = (Control)sender;

        if (e.Button == MouseButtons.Right)
        {
            // Show the context menu.
            currentCtrl.ContextMenu.Show(currentCtrl, new Point(e.X, e.Y));
        }
        else if (e.Button == MouseButtons.Left)
        {
            clickOffsetX = e.X;
            clickOffsetY = e.Y;

            if ((e.X + 5) > currentCtrl.Width && (e.Y + 5) > currentCtrl.Height)
            {
                // The mouse pointer is in the bottom right corner,
                // so resizing mode is appropriate.
                isResizing = true;
            }
            else
            {
                // The mouse is somewhere else, so dragging mode is
                // appropriate.
                isDragging = true;
            }
        }
    }

    private void lbl_MouseMove(object sender, System.Windows.Forms.MouseEventArgs e)
    {
        // Retrieve a reference to the active label.
        Control currentCtrl;
        currentCtrl = (Control)sender;

        if (isDragging)
        {
            // Move the control.
            currentCtrl.Left += e.X - clickOffsetX;
            currentCtrl.Top += e.Y - clickOffsetY;
        }
        else if (isResizing)
        {
            // Resize the control.
            currentCtrl.Width = e.X;
            currentCtrl.Height = e.Y;
        }
        else
        {
            // Change the pointer if the mouse is in the bottom corner.
            if ((e.X + 5) > currentCtrl.Width && (e.Y + 5) > currentCtrl.Height)
            {
                currentCtrl.Cursor = Cursors.SizeNWSE;
            }
            else
            {
                currentCtrl.Cursor = Cursors.Arrow;
            }
        }
    }
    private void lbl_MouseUp(object sender, System.Windows.Forms.MouseEventArgs e)
    {
        isDragging = false;
        isResizing = false;
    }

    private void mnuColorChange_Click(object sender, System.EventArgs e)
    {
        // Show color dialog.
        ColorDialog dlgColor = new ColorDialog();
        dlgColor.ShowDialog();

        // Change label background.
        mnuLabel.SourceControl.BackColor = dlgColor.Color;

    }

    private void DrawingSquares_MouseDown(object sender, System.Windows.Forms.MouseEventArgs e)
    {
        if (e.Button == MouseButtons.Right)
        {
            this.ContextMenu.Show(this, new Point(e.X, e.Y));
        }

    } 
```

这是form1.cs的代码，接下来是form1.designer.cs的代码

```
 private void InitializeComponent()
    {
       // this.SuspendLayout();
        // 
        // Form1
        // 
        this.mnuForm = new System.Windows.Forms.ContextMenu();
        this.mnuNewSquare = new System.Windows.Forms.MenuItem();
        this.mnuLabel = new System.Windows.Forms.ContextMenu();
        this.mnuColorChange = new System.Windows.Forms.MenuItem();
        // 
        // mnuForm
        // 
        this.mnuForm.MenuItems.AddRange(new System.Windows.Forms.MenuItem[] {
                                                                                this.mnuNewSquare});
        // 
        // mnuNewSquare
        // 
        this.mnuNewSquare.Index = 0;
        this.mnuNewSquare.Text = "Create New Square";
        this.mnuNewSquare.Click += new System.EventHandler(this.mnuNewSquare_Click);
        // 
        // mnuLabel
        // 
        this.mnuLabel.MenuItems.AddRange(new System.Windows.Forms.MenuItem[] {
                                                                                 this.mnuColorChange});
        // 
        // mnuColorChange
        // 
        this.mnuColorChange.Index = 0;
        this.mnuColorChange.Text = "Change Color";
        this.mnuColorChange.Click += new System.EventHandler(this.mnuColorChange_Click);
        // 
        // DrawingSquares
        // 
        this.AutoScaleBaseSize = new System.Drawing.Size(5, 13);
        this.ClientSize = new System.Drawing.Size(628, 426);
        this.ContextMenu = this.mnuForm;
        this.Name = "DrawingSquares";
        this.Text = "DrawingSquares";
        this.MouseDown += new System.Windows.Forms.MouseEventHandler(this.DrawingSquares_MouseDown);

    } 
```

这是应用程序的客户端，您可以在其中绘制标签并修改其属性。我需要一些关于如何做服务器端的帮助，非常感谢任何帮助，提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T23:40:45.310

你可能想看看[SignalR](http://www.nuget.org/packages/SignalR)：

> .NET 的客户端和服务器端库，通过持久连接提供消息传递和抽象。

# mysql - MySQL索引+查询处理

> ID：10066765
> 
> 赞同：2
> 
> 时间：2012-04-08T21:38:27.240
> 
> 标签：mysql

假设我有这张桌子：

```
create table table_a (
    id int,
    name varchar(25),
    address varchar(25),
    primary key (id)
) engine = innodb; 
```

当我运行此查询时：

```
select * from table_a where id >= 'x' and name = 'test'; 
```

MySQL 将如何处理它？它会首先提取所有 id（假设 1000 行）然后应用 where 子句 name = 'test'？

还是在寻找 id 时，它已经同时应用了 where 子句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T21:52:36.703

由于 id 是 PK（并且没有名称索引），它会将满足基于 id 标准的所有行加载到内存中，之后它将按名称标准过滤结果集。添加包含两个字段的复合索引意味着它只会加载同时满足两个条件的记录。在名称字段上添加单独的单列索引可能不会导致索引合并操作，在这种情况下索引将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T21:44:49.653

您在任一列上都有索引吗？这可能会影响执行计划。另一件事是可以强制转换 'x'::int 以确保进行数字比较而不是字符串比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T21:52:11.800

为获得最佳结果，您应该有一个包含 id 和 name 列的索引。

在您的情况下，我无法回答主索引对该查询的影响。这取决于 DBMS 和版本。如果您真的不想放置更多索引（因为更多索引意味着写入和更新速度较慢），只需使用 10.000.000 个随机结果填充您的表，试试看效果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T21:57:51.220

您可以通过在查询上运行来获取有关如何处理[`EXPLAIN`](http://dev.mysql.com/doc/refman/5.6/en/explain.html)查询的信息。

如果想法是优化该查询，那么您可能需要添加一个索引，例如：

```
alter table table_a add unique index name_id_idx (name, id); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-08T22:03:51.430

您可以通过在 where 子句中首先执行 id 时首先执行查询来比较执行时间，然后交换并首先带上名称。要查看带有索引的 mysql 性能示例，请查看[http://www.mysqlperformanceblog.com/2006/06/02/indexes-in-mysql/](http://www.mysqlperformanceblog.com/2006/06/02/indexes-in-mysql/)

# python - 如何替换通过代理传输的数据包中的 URL？

> ID：10066768
> 
> 赞同：0
> 
> 时间：2012-04-08T21:39:00.800
> 
> 标签：python, http, proxy

我正在用 python 为我自己的代理服务器编写代码。从客户端和目标服务器传输数据包的代码如下：

```
def _read_write(self):
        if self.target:
            pass
        else:
            domain, port = self.get_target_host()
            self._connect_target(domain, port)

        self.target.send(self.headers)

        maxtimeout = self.timeout / 3
        inputs = [self.client, self.target]
        count = 0
        try:

            while 1:
                count += 1
                (recv, send, err) = select.select(inputs, [], inputs)

                if err:
                    break

                if recv:
                    for in_ in recv:
                        data = in_.recv(BUFFLEN)

                        if in_ is self.client:
                            out = self.target
                        else:
                            out = self.client

                        if data:
                            out.send(data)
                            count = 0
                if count == maxtimeout:
                    break
        except select.error:
            print >> sys.stderr, "Error : Internal queue error\n", "Reason : Unknown" 
```

现在，由于每个数据包都是从客户端单独传输到服务器的，所以我想截取正在传输的数据，并将图像、css 等资源的 URL 替换为距离客户端最近的服务器的一些新 URL。这是正确的方法吗？如果 URL 被数据包分隔，我想我会遇到问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T21:43:55.133

对 - 在数据包级别上很难做到这一点。可能更容易的是首先在代理中构建整个数据，然后进行处理，然后将数据发送到客户端。

# objective-c - 将空字符附加到常规字符

> ID：10066771
> 
> 赞同：0
> 
> 时间：2012-04-08T21:39:41.370
> 
> 标签：objective-c, c, xcode, string, c-strings

我想将空字符与常规字符连接起来，如下所示：

```
NSString *message = @"ABC";
NSUInteger length = [message length];
char char4 = length;
char char3 = length >> 8;
char char2 = length >> 16;
char char1 = length >> 24;
message = [NSString stringWithFormat:@"%c%c%c%c%@",char4,char3,char2,char1,message]; 
```

问题是字符串的长度为 4（看起来像`¿ABC`）。如何编辑此代码以便将空字符也附加到字符串中？

**回复马克的评论**

我在这里尝试做的是将字符串的长度附加到字符串的开头，而不是数字格式，而是 ascii 字符的格式（几乎就像一个基本的 256 数字）。我会使用格式, `@"%04c%@",length,message`, 问题是生成的字符串将是`000¿ABC`并且零具有 ascii 值（准确地说是十进制的 48），这样就达不到目的了。具有十进制值 0 的 ASCII 字符是空字符 ( `\0`)，所以我必须使用它而不是 0。我必须有那些前导空字符。

出于我想要完成的目的，以下代码有效

```
NSUInteger length = [message length];
char char4 = length;
char char3 = length >> 8;
char char2 = length >> 16;
char char1 = length >> 24;

if (char4 == '\0')
    message = [NSString stringWithFormat:@"\0%@",message];
else
    message = [NSString stringWithFormat:@"%c%@",char4,message];

if (char3 == '\0')
    message = [NSString stringWithFormat:@"\0%@",message];
else
    message = [NSString stringWithFormat:@"%c%@",char3,message];

if (char2 == '\0')
    message = [NSString stringWithFormat:@"\0%@",message];
else
    message = [NSString stringWithFormat:@"%c%@",char2,message];

if (char1 == '\0')
    message = [NSString stringWithFormat:@"\0%@",message];
else
    message = [NSString stringWithFormat:@"%c%@",char1,message]; 
```

但是，如果有人可以贡献一些更短或更直观的东西，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T22:38:33.657

不要这样做。这是个坏主意。例如，NSString 从概念上讲是基于 16 位 Unicode 字符构建的，但您正在尝试添加字节。请注意，不能保证 NSString 的内部表示是 UTF-16 或任何其他特定编码。无论如何，当字符串被写出时，它必须转换为任何编码，这不太可能以您可以预测的方式保留您的长度前缀。

使用长度在前 4 个字节中的 NSData（或者对于 64 位长度，可能 8 个字节会更好），然后*是特定编码中*的字符串。我推荐 UTF-8。

# ios - 打印 NSMutablearray 中的所有项目

> ID：10066773
> 
> 赞同：4
> 
> 时间：2012-04-08T21:39:58.103
> 
> 标签：ios, nsmutablearray, uitextview

我的程序有一个表格视图，我想在文本视图中显示表格视图中的选定项目

我有以下代码**，它仅显示文本视图中 NSMutablearray 的最后一项**：

我猜问题是**for循环**，但无法弄清楚。

stand 是 NSMutablearray，selectItems 是 NSMutablearray，selected 项目是 UItexview。

```
- (void) tableView: (UITableView *) tableView didSelectRowAtIndexPath: (NSIndexPath *) indexPath {
    [selectItems addObject:[stands objectAtIndex:indexPath.row]];    
    for (NSString *yourVar in selectItems) {

        selectedItems.text=yourVar;
        NSLog (@"Your Array elements are = %@", yourVar);

    }

    [self.mytableView reloadData];
} 
```

我尝试以下操作，但它崩溃了：

```
[selectItems addObject:[stands objectAtIndex:indexPath.row]];  
int length = [selectItems count];

    for(int i=0;i<=length;i++){
        selectedItems.text= [selectItems objectAtIndex:i];
    } 
```

如何在 texview 中显示 NSmutablearray 的所有项目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T21:44:46.630

```
- (void) tableView: (UITableView *) tableView didSelectRowAtIndexPath: (NSIndexPath *) indexPath {
    [selectItems addObject:[stands objectAtIndex:indexPath.row]];    
    NSMutableString *exString = [[NSMutableString alloc]init];
    for (NSString *yourVar in selectItems) {

        NSLog (@"Your Array elements are = %@", yourVar);
        [exString appendFormat:@"\n%@",yourVar];

    }
    selectedItems.text=exString;

    [self.mytableView reloadData];
} 
```

这样的事情呢？它获取每个对象，在其中放置一个换行符，然后将其添加到 exString 以形成数组中对象的一个​​长链。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T21:49:04.913

确保您正确分配和启动了 selectItems。仅添加对象不会创建 NSMutableArray。然后你还需要连接你的元素，而不是一遍又一遍地覆盖 UITextView。

# asp.net - asp.net vb.net 为什么这个 IF 不起作用？

> ID：10066775
> 
> 赞同：1
> 
> 时间：2012-04-08T21:40:14.600
> 
> 标签：asp.net, vb.net

我曾经有这样的工作......

```
 Dim AnnEnt As Label = FormView1.FindControl("Holiday_RemainingLabel")

    txtNoofDays.Text.ToString()
    AnnEnt.Text.ToString()

    If txtNoofDays.Text >= AnnEnt.Text Then

        lblHolRequestResponse.Text = "Your holiday could not be saved"
    Else 
```

我最近把它改成了这个，它不再工作了

```
 Dim remain As TextBox = FormView1.FindControl("Holiday_RemainingTextBox")

    txtNoofDays.Text.ToString()
    remain.Text.ToString()

    If txtNoofDays.Text >= remain.Text Then

        lblHolRequestResponse.Text = "Your holiday could not be saved"

    Else 
```

表单视图中的文本框和表单视图中的标签之间有什么区别以使其无法正常工作？

从那以后我尝试过...

```
 Dim days = txtNoofDays.Text

    days.ToString()
    AnnEnt.Text.ToString()
    remain.Text.ToString()
    If remain.Text.ToString < days.ToString Then
        lblHolRequestResponse.Text = "Your holiday could not be saved" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T21:59:12.647

如果要比较字符串数字，请将它们转换为数字。

例如（假设它们是`ints`）：

```
Dim remain As TextBox = FormView1.FindControl("Holiday_RemainingTextBox")
Dim remaining = Int32.Parse(remain.Text)
Dim numOfDays = Int32.Parse(txtNoofDays.Text)

If numOfDays  >= remaining  Then
    lblHolRequestResponse.Text = "Your holiday could not be saved"
End If 
```

[`Int32.Parse`方法](http://msdn.microsoft.com/en-us/library/system.int32.parse.aspx)

否则，您将按字母顺序进行比较。

[`String.CompareTo`方法](http://msdn.microsoft.com/en-us/library/system.string.compareto%28v=vs.100%29.aspx)

# linux - 需要帮助在 centos 5.8 上安装 pecl

> ID：10066778
> 
> 赞同：6
> 
> 时间：2012-04-08T21:40:58.613
> 
> 标签：linux, ssh, centos, pecl, yum

所以基本上我正在尝试安装 APC，但我无法让 pecl 在 Centos 5.8 i686 上工作

我有 php-fpm、mysql 和 nginx 的最新稳定版本。一切都在 100% 运行，一切都很顺利。我正在运行一个没有问题的实时网站。我就是无法工作。

![百胜安装 pcl](../Images/35e41cfee2ab079f85b400db4ed12f57.png)

百胜安装 php-pear: ![在此处输入图像描述](../Images/0bb150380c5665bcf1ae3ce5c36abec3.png)

我尝试安装的大多数软件包都存在 php-common 的依赖问题（不管是什么）。

```
php-common = 5.1.6-32.el5 is needed 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T07:53:26.317

`/usr/bin/pecl`可从`php-pear`包装中获得。

你得到的依赖失败是很奇怪的。可能是因为您混合安装了`php-*`5.1 RPM 和`php53-*`5.3 RPM，并在开发文件上发生冲突。您应该做一些清理工作，只为您的目标版本保留一组 RPM，无论是 5.1 还是 5.3。

您还必须安装`gcc`, `httpd-devel`，`php(53)-devel`最后`php-pear`才能开始`phpize`工作。

然后你应该能够运行`pecl install apc`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:11:14.857

首先确保您已更新发行版，您可以使用

> 百胜更新

然后检查您是否没有使用任何包含此软件包的第三方存储库。如果可以的话，删除所有的 php 包

> 百胜删除 php*

并尝试再次安装它们。

如果您不能解决它，请尝试[Fedora EPEL](http://fedoraproject.org/wiki/EPEL)存储库，它提供了一些更新的软件包。

**所有命令都需要由 root 运行。**

# mysql - 在 MySQL 中，如何批量重命名数据库中的表？

> ID：10066783
> 
> 赞同：11
> 
> 时间：2012-04-08T21:42:06.163
> 
> 标签：mysql, joomla1.5

所以基本上我在 MySQL 中有一个 joomla 数据库，它有一堆前缀为“jmla_”的表。我想通过用“jos_”前缀替换“jmla_”前缀来重命名所有这些表。关于如何使用简单的 SQL 脚本或 SQL 查询来执行此操作的任何想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-16T10:54:51.010

```
SELECT  concat ('rename table ',table_name,' to ',table_name,'_old;')
FROM information_schema.tables
WHERE table_name like 'webform%'
  and table_schema='weiss_db_new' 
```

将工作。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-08T22:47:31.360

运行此语句：

```
SELECT 'rename table '||table_name||' to '||'jos'||substr(table_name,5)||';'
FROM information_schema.tables
WHERE table_name like 'jmla%' 
```

这将创建一个将重命名所有表的脚本。只需将输出复制并粘贴到您的 SQL 客户端。

（如果您不是在 ANSI 模式下运行它，您需要将其更改`||`为 MySQL 的非标准连接运算符）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-08T21:51:57.823

```
RENAME TABLE jmla_whatever to jos_whatever; 
```

您必须编写一个脚本来覆盖所有表格 - 您可以使用`show tables`. 有关详细信息，请参阅[http://dev.mysql.com/doc/refman/5.0/en/rename-table.html](http://dev.mysql.com/doc/refman/5.0/en/rename-table.html)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-08T21:49:10.943

1.  使用 phpmyadmin 导出到 .sql 文件
2.  使用任何带有“查找和替换”功能的文本编辑器（我更喜欢 vim，在大文件上表现出色）打开文件
3.  执行“查找和替换”，将您的实际前缀放在查找框中，并在替换框中更新
4.  使用 phpmyadmin 导入文件。

请记住在 phpmyadmin 导入之前删除旧数据库。这可以在导出期间检查合适的选项来完成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-15T11:15:55.530

您是否考虑过为 Joomla 使用 Akeeba 管理工具组件！然后使用数据库前缀编辑器更改表前缀，效果非常好。Akeeba 管理工具可用于保护您的 Joomla！安装

Akeeba 可以在[这里获得](http://extensions.joomla.org/extensions/access-a-security/site-security/site-protection/16363)

# javascript - Document.write 从下拉菜单中

> ID：10066786
> 
> 赞同：-1
> 
> 时间：2012-04-08T21:42:26.797
> 
> 标签：javascript, drop-down-menu, document.write

我是 JavaScript 新手。这个请求看起来很简单，但似乎无法让它工作。

我想从下拉菜单中选择并返回 HTML 中的值。正如我现在所拥有的，它在文本框中返回值，但我希望它在不使用文本框的情况下编写它，只需将它返回到`<p></p>`.

[http://jsfiddle.net/Ppk5k/](http://jsfiddle.net/Ppk5k/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T21:45:59.473

`<p>`通过其 ID（或通过其他方法）获取，然后设置其`innerHTML`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T21:46:31.030

页面加载后不能使用 document.write，它将替换页面内容。您需要使用innerHTML 或appendChild。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T21:50:12.423

干得好：

```
function favBrowser()
{
var mylist=document.getElementById("myList");
document.getElementById("favorite").innerHTML = mylist.options[mylist.selectedIndex].text+".";

} 
```

您必须使用[`innerHTML`](http://www.tizag.com/javascriptT/javascript-innerHTML.php)将 HTML 设置为`#favorite`所选浏览器。

工作示例：http: [//jsfiddle.net/Ppk5k/6/](http://jsfiddle.net/Ppk5k/6/)

### 更新

要获取值和文本：

```
function favBrowser() {
    var mylist = document.getElementById("myList");
    document.getElementById("favorite").innerHTML = mylist.options[mylist.selectedIndex].text;
    document.getElementById("favorite").innerHTML += " and the value of that option is " + mylist.options[mylist.selectedIndex].value + ".";
} 
```

如果您选择 Google Chrome，它将输出：

> 您最喜欢的浏览器是 Google Chrome，该选项的值是 G。

例如：http: [//jsfiddle.net/Ppk5k/13/](http://jsfiddle.net/Ppk5k/13/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-08T21:51:19.167

不要忘记`value=""`在选项标签中包含一个属性，例如：

```
<script type="text/javascript">
    function favBrowser() {
        var mylist=document.getElementById('myList');
        document.getElementById('favorite').value=mylist.value;
    }
</script>
<form>
    Select your favorite browser:
    <select id="myList" onchange="favBrowser()">
        <option></option>
        <option value="Google Chrome">Google Chrome</option>
        <option value="Firefox">Firefox</option>  
        <option value="Internet Explorer">Internet Explorer</option>
        <option value="Safari">Safari</option>
        <option value="Opera">Opera</option>
    </select>
    <p>Your favorite browser is: <input type="text" id="favorite" size="20" value=""></p>
</form> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-08T21:51:51.730

执行此操作的最简单方法是为 HTML 元素赋予`id`属性并将其更改为 innerHTML 或 clear，创建文本节点并将其附加到元素：

**内部HTML：**

```
var element = document.getElementById('someElement');
element.innerHTML = "someValue"; 
```

**附加孩子：**

```
var element = document.getElementById('someElement');
var oldChild = element.firstChild;
element.removeChild(oldChild);

var newChild = document.createTextNode("someValue");
element.appendChild(newChild); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-08T21:59:28.433

使用 innerHTML 。[演示](http://jsfiddle.net/Ppk5k/10/)

HTML：

```
<form>
Select your favorite browser:
<select id="myList" onchange="favBrowser()">
  <option></option>
  <option>Google Chrome</option>
  <option>Firefox</option>  
  <option>Internet Explorer</option>
  <option>Safari</option>
  <option>Opera</option>
</select>
<p id="favorite">Your favorite browser is:
</p>

</form> 
```

Javascript：

```
function favBrowser() {
    var mylist = document.getElementById("myList");
    document.getElementById("favorite").innerHTML= "Your favorite browser is: " +  mylist.options[mylist.selectedIndex].text;
} 
```

# internet-explorer - 确保在更新网站时清除 Internet Explorer 上的网站缓存

> ID：10066795
> 
> 赞同：3
> 
> 时间：2012-04-08T21:43:25.443
> 
> 标签：internet-explorer, caching, tomcat, grails

我在 Tomcat 服务器上使用 Grails 运行一个网站。当我更新网站页面时，Firefox 会正确应用更新，但 Internet Explorer 似乎会保留缓存的值，直到我明确删除临时 Internet 文件。当网站更新时，如何确保 Internet Explorer 用户拥有最新的网页？

编辑：我在 Internet Explorer 9 上进行了测试，但我认为以前的版本也有同样的问题。

编辑 2：问题只发生在 css 和 javascript 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T23:49:21.743

最可靠的方法是告诉浏览器重新加载所有 css 和 javascript 资源而忽略缓存，为此，您应该更改 css 和 javascript 资源的名称，以便浏览器知道它需要重新加载它们。

虽然每次在生产环境中部署新构建时重命名所有 css 和 javascript 资源可能是乏味/不切实际的任务，但您可以使用

> 用户界面性能插件

以此目的。如果配置正确，它的插件可以确保当你创建一个新的战争时，它会将当前版本号从存储库附加到文件名，因此文件名会被更改。对此的限制是您必须更新 gsp 中对 css 和 javascript 文件的所有引用，以使用插件的 tablib 而不是直接包含它们（这样在重命名文件时它也会替换 gsp 文件中的相应引用）。

此外，该插件还可以为您提供许多其他功能，这些功能可能会帮助您提高 Web 应用程序的速度。有关插件的更多详细功能，[请单击此处](http://grails.org/plugin/ui-performance)

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T03:47:51.993

与上述 Bala 类似的更现代的答案是使用[Resources](http://grails.org/plugin/resources)插件（默认包含在 Grails 2.0+ 中，并且可用于 Grails 1.3+ 作为插件）与[Cached Resources](http://grails.org/plugin/cached-resources)插件结合使用。

缓存资源插件与 UI 性能类似，它用特殊的基于哈希的链接替换所有静态内容链接。比 UI 性能更好的是链接基于文件内容，因此如果静态项的内容没有更改，它们*不会更新。*这很棒，因为您的用户不会被迫重新下载实际上没有更改的文件。

Resources 插件允许您将所有资源定义为模块 - 这是描述应用程序中使用的 CSS、图像和 JavaScript 的一种非常强大的方式。该[手册](http://grails-plugins.github.com/grails-resources/guide/1.%20Overview.html#1.1%20Quick%20Start)写得很好，将帮助您入门。它需要几个步骤：

*   添加`<r:layoutResources/>`到标签中的布局中`<head>`，**就**在结束`</body>`标签之前。
*   将所有（或部分）`<link/>`、、`<script/>`和`<img/>`标签替换为`<r:require/>`、、`<r:script/>`和`<r:img/>`等价物。
*   更好的是，将您的 CSS 和 JavaScript 依赖项移动到`ApplicationResources.groovy`文件中，并将它们设置为可重用模块。

进行切换实际上非常快，一旦您这样做，您将能够利用其他插件，例如[Zipped Resources](http://grails.org/plugin/zipped-resources)（启用 GZip 压缩）和[YUI Minify Resources](http://grails.org/plugin/yui-minify-resources)，它可以缩小 CSS 和 JS 文件。

# android - 如何绘制滚动背景？

> ID：10066797
> 
> 赞同：1
> 
> 时间：2012-04-08T21:43:29.860
> 
> 标签：android, opengl-es, parallax

如何在我的 2D 横向滚动游戏中绘制背景图块？对于 OpenGL es，该循环是否合乎逻辑？我的图块 2400x480。我还想为我的游戏使用视差滚动。

```
batcher.beginBatch(Assets.background);

    for(int i=0;i<100;i++)
    batcher.drawSprite(0+2400*i, 240, 2400, 480, Assets.backgroundRegion);

    batcher.endBatch(); 
```

# java - JSP 用户命中计数器

> ID：10066800
> 
> 赞同：0
> 
> 时间：2012-04-08T21:43:41.797
> 
> 标签：java, html, jsp

我试图计算每个用户进入网站的次数，但我的问题是即使我更改了用户名，点击次数也不会重新开始。此外，一旦我重新加载网页，用户的名称就会变为“null”。

```
<HTML>
<BODY>
<FORM METHOD=POST ACTION="SaveName.jsp">
Who are You ? <INPUT TYPE=TEXT NAME=username SIZE=20>
<P><INPUT TYPE=SUBMIT>
</FORM>
</BODY>
</HTML>

<%@ page import="java.io.*,java.util.*" %>
<html>
 <head>
<title>Applcation object in JSP</title>
</head>
<body>
 <%
   String name = request.getParameter( "username" );
    session.setAttribute( "theName", name );
   Integer hitsCount = 
     (Integer)application.getAttribute("hitCounter");
   if( hitsCount ==null || hitsCount == 0){
   /* First visit */
   out.println("Welcome to my website! ");

   hitsCount = 1;
}else{
   /* return visit */
   out.println("Welcome back to my website!");
   hitsCount += 1;
}
application.setAttribute("hitCounter", hitsCount);
%>
 <%= session.getAttribute( "theName" ) %>
<br>Total number of visits: <%= hitsCount%></br>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T04:47:00.307

在你的 JSP 中

```
<%!
Map<String,Integer> userCountMap = new HashMap<String,Integer>();
Integer hitsCount=0;
String key;
%>

<%
    String name = request.getParameter( "username" );
    if(name!=null && !"".equals(name)){
        key=name.toLowerCase();
        if(userCountMap.get(key)!=null){
            /* return visit */
            out.println("<h3>"+name+"</h3>&nbsp;Welcome back to my website!");
            hitsCount = userCountMap.get(key);
            hitsCount+=1;

        }else{
            out.println("<h3>"+name+"</h3>&nbsp;Welcome to my website!");
            hitsCount=1;
        }
        userCountMap.put(key, hitsCount);
    }
%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T12:00:12.670

您是存储每个用户的命中数还是仅存储命中数？

在前一种情况下，您可以使用地图来检查地图中是否存在特定用户的条目。如果找到条目，则将计数器加 1，如果未找到条目，则创建一个新条目并将对应的计数器设置为 1。

在后一种情况下，您需要做的就是在每次访问网站时增加计数器。

# javascript - 为什么谷歌代码美化器拒绝使用 XSLT？

> ID：10066801
> 
> 赞同：1
> 
> 时间：2012-04-08T21:43:47.423
> 
> 标签：javascript, webkit, gecko, google-code-prettify

谷[歌代码美化](http://code.google.com/p/google-code-prettify/)器（也在这里，在 SO 上使用）解析 a 的内容`.prettyprint`并注入一些`<span>`s 以允许通过 css 突出显示。

这非常简单，除非我使用 XSLT 提供 XML 文件。然后，美化器只能在 Opera 中正确运行，但拒绝与 Firefox 或 Chrome（准确地说是 Chromium）一起工作。我遵循了一个最小的例子，见下文。

如果我直接打开 XHTML 文件（在服务器上使用 生成`xsltproc`），Firefox 会突然设法正确运行 prettyprint。但如果它转换 XML 本身，prettify 就会停止工作。我怎样才能解决这个问题？我可能做错了什么？

这是 XML 文件

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet href="test.xslt" type="text/xsl" ?>
<root><![CDATA[
int main() {
  float x {7.7};
  return 0;
}
]]></root> 
```

这是样式表：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
>
  <xsl:output method="xml" version="1.0" indent="yes"
    doctype-public="-//W3C//DTD XHTML 1.1//EN"
    doctype-system="http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"
  />
  <xsl:template match="/">
    <html><head>
      <link rel="stylesheet" type="text/css" href="_include/gcp/prettify.css" />
      <script type="text/javascript" src="_include/gcp/prettify.js"> </script>
    </head>
    <body onload="prettyPrint()">
    <pre class="prettyprint"><xsl:value-of select="." /></pre>
    </body></html>
  </xsl:template>

</xsl:stylesheet> 
```

作为参考，这是由以下代码生成的 XHTML 1.1 `xsltproc`：

```
<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <link rel="stylesheet" type="text/css" href="_include/gcp/prettify.css"/>
    <script type="text/javascript" src="_include/gcp/prettify.js"/>
  </head>
  <body onload="prettyPrint()">
    <pre class="prettyprint">
int main() {
  float x {7.7};
  return 0;
}
</pre>
  </body>
</html> 
```

## 编辑：

这是 Firefox 呈现的标记（使用`Ctrl`++提取`Shift`）`I`

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <link rel="stylesheet" type="text/css" href="gcp/prettify.css"/>
    <script type="text/javascript" src="gcp/prettify.js"/>
  </head>
  <body onload="prettyPrint()">
    <pre class="prettyprint">
      <SPAN xmlns=""> </SPAN>
      <SPAN xmlns="">int</SPAN>
      <SPAN xmlns=""> main</SPAN>
      <SPAN xmlns="">()</SPAN>
      <SPAN xmlns=""> </SPAN>
      <SPAN xmlns="">{</SPAN>
      <SPAN xmlns="">
  </SPAN>
      <SPAN xmlns="">float</SPAN>
      <SPAN xmlns=""> x </SPAN>
      <SPAN xmlns="">{</SPAN>
      <SPAN xmlns="">7.7</SPAN>
      <SPAN xmlns="">};</SPAN>
      <SPAN xmlns="">
  </SPAN>
      <SPAN xmlns="">return</SPAN>
      <SPAN xmlns=""> </SPAN>
      <SPAN xmlns="">0</SPAN>
      <SPAN xmlns="">;</SPAN>
      <SPAN xmlns="">
</SPAN>
      <SPAN xmlns="">}</SPAN>
    </pre>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:20:31.170

将 xsl 的输出方法从 xml 更新为 html。

```
<xsl:output method="html" version="1.0" indent="yes"
doctype-public="-//W3C//DTD XHTML 1.1//EN"
doctype-system="http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:00:00.610

也许你可以尝试添加一个

```
<script>prettyPrint()</script> 
```

身体之后。我认为可能是Firefox逐行执行代码，所以它会先尝试执行`prettyPrint()`并在之后插入XSLT内容，所以`prettyPrint()`不会有任何执行...

# delphi - Wav 到 MP3 转换

> ID：10066805
> 
> 赞同：0
> 
> 时间：2012-04-08T21:44:08.897
> 
> 标签：delphi, mp3, wav, wave, converters

我正在用 Delphi 制作一个程序，它记录黑胶唱片中的音频，然后检测并分离不同的音轨。我的问题是我无法将录制的 wav 文件转换为 mp3。我曾尝试使用 LAME，但这给了我一个播放速度很慢的 mp3 文件（例如，我从 1 分钟的 wav 开始，然后以 5 分钟的 mp3 开始）

请您建议我可以将 wav 文件转换为 mp3 的源代码或组件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T07:50:56.953

使用 Mitov 的 AudioLab。

[http://www.mitov.com/html/audiolab.html](http://www.mitov.com/html/audiolab.html)

# asp.net - asp.net 从动态插入的文本框中获取文本始终返回 null

> ID：10066807
> 
> 赞同：2
> 
> 时间：2012-04-08T21:44:24.777
> 
> 标签：asp.net, dynamic, textbox, code-behind

我正在 asp.net 中编写一个 Web 应用程序，在我的一个 aspx 页面中，我有一个静态表。

在这个表中，我从后面的代码中插入了一个动态文本框控件（从 Page_Load，我动态创建了这个控件，因为我不知道是否需要创建它取决于用户的回答），问题是当我尝试用户单击按钮后获取文本框文本，我尝试了从`Request.Form.Get("id of the control")`to知道的所有内容`Page.FindControl("id of the control")`，但没有任何效果我一直为 null，只是为了清除激活从文本框中获取文本的功能的按钮是插入动态到。

按钮和文本框都“坐在”桌子上，必须保持这样，我会很感激任何帮助

我的代码是：aspx页面

```
<asp:Table ID="TabelMessages" runat="server"></asp:Table> 
```

aspx.cs 代码后面的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    TextBox tb = new TextBox();
    tb.ID = "textBox";
    tb.Text = "hello world";
    TableCell tc = new TableCell();
    tc.Controls.Add(tb);
    TableRow tr = new TableRow();
    tr.Cells.Add(tc);
    TabelMessages.Rows.Add(tr);
}

public void Button_Click(object o, EventArgs e)
{
  string a = Request.Form.Get("textBox");//does not work
  Control aa = Page.FindControl("textBox");//does not work
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T22:51:06.307

在你的

```
public void Button_Click(object o, EventArgs e)
{
  //try searching in the TableMessage.Controls()
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T00:21:02.953

或者，取决于您最终想要做什么，并且*仍然*使用 Page_Load：

在您的页面类中：

```
protected TextBox _tb; //this is what makes it work...

protected void Page_Load(object sender, EventArgs e)
{

    _tb = new TextBox();
    _tb.ID = "textBox";
    TableCell tc = new TableCell();
    tc.Controls.Add(_tb);
    TableRow tr = new TableRow();
    tr.Cells.Add(tc);
    TabelMessages.Rows.Add(tr);

    if (!Page.IsPostBack)
    {
        _tb.Text = "hello world";
    }

}

protected void Button1_Click(object sender, EventArgs e)
{
    Label1.Text = _tb.Text; //this will display the text in the TextBox    
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T22:34:43.847

您需要在`Page_PreInit`方法内运行代码。这是您需要添加/重新添加任何动态创建的控件以使其正常运行的地方。

[在 ASP.NET 页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472.aspx)的 MSDN 文章中查看有关这些类型问题的更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-08T22:47:10.237

尝试将您的`Page_Load`代码更改为以下内容：

```
protected override void OnPreInit(EventArgs e)
{
    base.OnPreInit(e);

    TextBox tb = new TextBox();
    tb.ID = "textBox";
    tb.Text = "hello world";
    TableCell tc = new TableCell();
    tc.Controls.Add(tb);
    TableRow tr = new TableRow();
    tr.Cells.Add(tc);
    TabelMessages.Rows.Add(tr);
} 
```

# python - 分析python中libsvm的预测模型

> ID：10066809
> 
> 赞同：1
> 
> 时间：2012-04-08T21:44:43.553
> 
> 标签：python, machine-learning, libsvm

在python中使用libsvm的两个问题：

1.  我怎么知道问题是否可行？
2.  如何获得原始变量（w 和偏移量 b）？

我使用一个简单的示例，考虑 2D 空间中的 4 个训练点（由 * 表示）：

```
*----*
|    |
|    |
*----* 
```

我使用 C_SVC 公式和线性内核训练 SVM，我将 4 个点分类为两个标签 [-1, +1]。

例如，当我这样设置训练点时，它应该找到一个分离的超平面。

```
{-1}----{+1}
 |       |
 |       |
{-1}----{+1} 
```

但是对于这个非线性问题，它应该找不到分离的超平面（因为线性核）。

```
{+1}----{-1}
 |       |
 |       |
{-1}----{+1} 
```

我希望能够检测到这种情况。

* * *

第二个示例的示例代码：

```
from svmutil import *
import numpy as np

y = [1, -1, 1, -1]
x = [{1:-1, 2 :1}, {1:-1, 2:-1}, {1:1, 2:-1}, {1:1, 2:1}]

prob  = svm_problem(y, x)
param = svm_parameter()
param.kernel_type = LINEAR
param.C = 10

m = svm_train(prob, param) 
```

样本输出：

```
optimization finished, #iter = 21
nu = 1.000000
obj = -40.000000, rho = 0.000000
nSV = 4, nBSV = 4
Total nSV = 4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T07:24:24.917

如线性内核 SVM 上的[libsvm 指南](http://www.csie.ntu.edu.tw/~cjlin/papers/guide/guide.pdf)中所述，对 C 的指数网格运行交叉验证。如果**训练集的准确率**永远无法接近 100%，则意味着线性模型对数据的**偏差太大**，这反过来意味着线性假设是错误的（数据不是线性可分的）。

顺便提一句。**测试集准确度**是对模型泛化能力的真实评价，但它衡量的是**偏差和方差**的总和，因此不能直接用于衡量偏差。训练集和测试集精度之间的差异衡量模型的方差或过度拟合。有关错误分析的更多信息，请参阅这篇总结了[ml-class](http://ml-class.org)在线课程的实用技巧和窍门的[博客文章。](http://digitheadslabnotebook.blogspot.fr/2011/12/practical-advice-for-applying-machine.html)

# sql-server - “ORDER BY (SELECT NULL)”是什么意思？

> ID：10066819
> 
> 赞同：50
> 
> 时间：2012-04-08T21:45:45.163
> 
> 标签：sql-server, select, sql-order-by

以下 SQL 来自 Itzik Ben-Gan，用于生成数字表。部分是什么`order by (select null)`意思？谢谢。

```
DECLARE @number_of_numbers INT;
SELECT @number_of_numbers = 100000;

WITH    a AS ( SELECT   1 AS i
               UNION ALL
               SELECT   1
             ),
        b AS ( SELECT   1 AS i
               FROM     a AS x ,
                        a AS y
             ),
        c AS ( SELECT   1 AS i
               FROM     b AS x ,
                        b AS y
             ),
        d AS ( SELECT   1 AS i
               FROM     c AS x ,
                        c AS y
             ),
        e AS ( SELECT   1 AS i
               FROM     d AS x ,
                        d AS y
             ),
        f AS ( SELECT   1 AS i
               FROM     e AS x ,
                        e AS y
             ),
        numbers
          AS ( SELECT TOP ( @number_of_numbers )
                        ROW_NUMBER() OVER ( ORDER BY ( SELECT   NULL
                                                     ) ) AS number
               FROM     f
             )
    SELECT  *
    FROM    numbers; 
```

谢谢！

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-04-08T21:48:41.510

[ROW_NUMBER](http://msdn.microsoft.com/en-us/library/ms186734.aspx)在语法上需要一个`ORDER BY`子句。没有一个你不能使用它。`SELECT NULL`是一种在不执行任何特定命令的情况下关闭错误的技巧。在这种情况下，我们不需要强制执行任何命令，因此最快的选择是使用`SELECT NULL`.

优化器看穿了这个技巧，所以它没有运行时成本（这个说法很容易通过查看执行计划来验证）。

# http - http流响应不支持的消息类型：class org.jboss.netty.handler.stream.ChunkedStream

> ID：10066822
> 
> 赞同：1
> 
> 时间：2012-04-08T21:45:55.287
> 
> 标签：http, streaming, inputstream, netty, outputstream

我正在尝试编写一个基于 netty 的 http 服务器，它将文本作为输入并返回图像作为输出。该图像是根据输入文本动态生成的。

我将 org.jboss.netty.example.http.file.HttpStaticFileServerHandler 的逻辑复制到我自己的处理程序中，而不是在通道中写入 DefaultFileRegion 作为输出，

```
final FileRegion region = new DefaultFileRegion(raf.getChannel(), 0, fileLength);
writeFuture = ch.write(region); 
```

我在自己的处理程序中执行以下操作：

```
InputStream imageIOStream = imageGenerator.generateImage(inputText);
ChannelFuture writeFuture = ch.write(new ChunkedStream(imageIOStream)); 
```

但是当我尝试写回客户端时，服务器上出现以下异常。

```
java.lang.IllegalArgumentException: unsupported message type: class     org.jboss.netty.handler.stream.ChunkedStream
at    org.jboss.netty.channel.socket.nio.SocketSendBufferPool.acquire(SocketSendBufferPool.java:56)
at org.jboss.netty.channel.socket.nio.NioWorker.write0(NioWorker.java:463)
at  org.jboss.netty.channel.socket.nio.NioWorker.writeFromUserCode(NioWorker.java:390)
at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.handleAcceptedSocket(NioServerSocketPipelineSink.java:137)
at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.eventSunk(NioServerSocketPipelineSink.java:76)
at org.jboss.netty.handler.codec.oneone.OneToOneEncoder.handleDownstream(OneToOneEncoder.java:68)
at org.jboss.netty.channel.Channels.write(Channels.java:611)
at org.jboss.netty.channel.Channels.write(Channels.java:578)
at org.jboss.netty.channel.AbstractChannel.write(AbstractChannel.java:251) 
```

有人可以帮帮我吗。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T23:06:09.823

在您的管道中，您是否设置了以下内容？

```
pipeline.addLast("chunkedWriter", new ChunkedWriteHandler()); 
```

请参阅[https://github.com/netty/netty/blob/master/example/src/main/java/io/netty/example/http/file/HttpStaticFileServerPipelineFactory.java](https://github.com/netty/netty/blob/master/example/src/main/java/io/netty/example/http/file/HttpStaticFileServerPipelineFactory.java)。

# biztalk - Biztalk 消息不可知编排

> ID：10066826
> 
> 赞同：2
> 
> 时间：2012-04-08T21:46:28.800
> 
> 标签：biztalk, biztalk-2010, biztalk-orchestrations

在自 BT2006 离开 Biztalk 之后，我们正在考虑将其带回组织中。我早期遇到的挫折之一是在处理 HL7 和编排时，我们需要为每种 ADT 消息类型进行单独的编排，即使每种类型的架构本质上是相同的，并且每个编排都做了完全相同的事情。进入 BizTalk 2010 世界，这里有什么改进吗？是否有一种模式可以用来为所有 ADT 类型使用单个编排？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T09:12:03.203

如我所见，您在这里有两种可能性。

1.  将消息视为匿名消息。这意味着您的消息是“未键入的”（您将其声明为 System.Xml.XmlDocument 类型）。然后您的编排可以询问消息以确定它是什么类型。
2.  创建一个信封消息，其正文可以是所有可能的消息类型（使用 xsd 选择组选择器）。然后，您的编排处理信封消息类型。使用这种方法，您可以通过在信封头中设置一个值来声明包含在信封正文中的类型。

我更喜欢第二个；虽然这肯定需要更多的工作（您需要将所有入站消息包装在一个信封中），但它允许您通过查看信封标题来了解消息的内容。这意味着如果需要，您仍然可以按消息类型进行路由。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T16:08:03.493

自 2006 年发布以来，BizTalk 中的 HL7 消息传递基本保持不变。因为 BizTalk 为*每种消息和事件类型*（例如 ADT^A01、ADT^A03、ADT^A08）定义了一个架构，而不仅仅是针对*每种消息类型*（例如 ADT、BAR、MDM），您的映射和编排很快就会变得一团糟。

以下是我过去为解决此限制所做的工作：

1.  允许消息以无类型方式进入编排。即设置 MessageType = System.Xml.XmlDocument。我发现一般来说，我只对解析或更新一些元素感兴趣，所以我只需编写一个带有一些通用 linq 语句的辅助库来获取我需要的数据。这样，我可以编写一个获取 PID-3（患者 ID 号）的 linq 语句，并且我可以在任何消息或事件类型上一致地使用它，因为 PID 保持不变。同样，我也会使用相同的技术来更新消息。如果您要更新的字段存在较大的结构差异，或者您要读取/更新大量数据，则此技术效果不佳。
2.  Create master/canonical HL7 message type schemas. This takes a bit more work, but depending on how many message types you are looking to process, this can really pay off and is more consistent with how healthcare organizations think of their HL7 interfaces. In order to do this, you would need to define a new schema for a message type and include all possible segments for this message. So, instead of having multiple ADT types defined, you would roll all the possible variations for A01, A03, A04, etc. under one master schema. This will allow you greatly reduce the amount of mapping and parsing logic needed. Unfortunately, since this is not the HL7 accelerator's default behavior and will require some custom pipelines and orchestration logic to achieve. Basically, you will need to modify some properties to get the Accelerator to think that your new master message is valid.

For mostly pass-through interfaces, I would recommend technique #1\. Otherwise, if you will be generating or needing to consume basically any message event in a canonical fashion, technique #2 can pay off in the long run.

# c++ - 调用实例方法时的 C++ 访问冲突

> ID：10066830
> 
> 赞同：1
> 
> 时间：2012-04-08T21:47:10.650
> 
> 标签：c++, function, methods, directx, access-violation

我正在创建一个看起来像这样的 DirectX 11 辅助类：

```
#import "DXClass.h" // I have declared the constructor and the other methods here
// All of the DirectX libraries are imported in the header as well 

DXClass::DXClass()
{

    // Pointers created, etc.
}

DXClass:~DXClass()
{
    // Other DirectX objects released   

    // With an if (bbSRView) {}, the exception still occurs, so bbSRView is not NULL
    // bbSRView is a ID3D11ShaderResourceView*
    // When the other violation does not occur, one does here:
    bbSRView->Release();
    bbSRView = NULL;

    // More releases

void DXClass::Initialize()
{
    SetupDisplay();

    // Other initialization that works fine
}

void DXClass::SetupDisplay()
{
    // This is where the debugger shows the access violation.
    // factory is declared as DXGIFactory*
    HRESULT hr = CreateDXGIFactory(__uuidof(IDXGIFactory), (void **)&factory);

    // Loop through adapters and outputs, etc.
} 
```

此类初始化如下：`dxClass = new DXClass();` 该`Initialize()`函数在创建的类的另一个方法中调用`dxClass`。

`setupDisplay()`运行应用程序时，我在函数开始时遇到访问冲突。但是，如果我将代码放入`setupDisplay()`并放入`Initialize()`，删除对 的调用`setupDisplay()`，则不会发生访问冲突。另外，如果我从中删除代码`setupDisplay()`，使其成为一个空函数，然后在中调用它`Initialize()`，则不会发生访问冲突。

似乎没有指针为 NULL，如果按上述方式更改，应用程序将正常启动。但是，另一方面，应用程序在退出时会收到另一个访问冲突。调试器指向`Release()`对 an 的调用`ID3D11ShaderResourceView*`，我在代码片段中已经指出了这一点。该指针似乎也有效。

我也检查了类似的问题，但`this`类的指针似乎是有效的，我没有创建任何可能溢出的缓冲区。也没有任何东西可以提前删除/释放对象。

我不知道是什么导致了错误。：/

感谢：D

编辑：这是一个孤立的测试，具有相同的错误：我的主要功能是：

```
INT APIENTRY wWinMain(HINSTANCE, HINSTANCE, LPWSTR, INT)
{
    App *app = new App();
    app->Run();
    app->Release();
 } 
```

在我的`App`课堂上，我删除了所有窗口功能和任何其他变量，使其看起来像这样：

```
App::App()
{
    dxClass = new DXClass();
}

App::~App()
{
    delete dxClass;
}

void App::Run()
{
    dxClass->Initialize();

    while (true) {} // Never reaches here
} 
```

访问冲突仍然发生在同一个地方。此外，如果我将工厂实例变量替换为：

```
IDXGIFactory *f;
HRESULT hr = CreateDXGIFactory(__uuidof(IDXGIFactory), (void **)&f); 
```

这在其他应用程序中对我有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T22:37:46.250

调用 Release() 时的访问冲突通常意味着对象已经从其他地方收到了它的最终 Release()（并且它已经销毁了自己）。一种可能的解决方案是将指针传递给 DXClass 时使用 AddRef()

# javascript - ZombieJS - 如何调用 JavaScript 函数或检查 JavaScript 值？

> ID：10066831
> 
> 赞同：2
> 
> 时间：2012-04-08T21:47:30.327
> 
> 标签：javascript, jquery, zombie.js

```
var Browser = require("zombie");

// Load the page from localhost
browser = new Browser()
browser.visit("http://localhost:3000/", function () {

  // Let's say the page has window.jQuery
  // How do I access it?

}); 
```

那么，如何访问窗口和 javascript 变量？我想检查我的脚本是否正确跟踪“点击”。我想做类似的事情`expect(browser.document.window.myScript.click_counter).toBe 5`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T11:06:40.470

我得到了它*与*以下...设置了maxWait选项

```
var opts = {
    debug: false
    , runScripts: true
    , maxWait: 10
    , waitFor: 10000
};

this.browser = new Browser(opts);

this.browser.visit(url, callback);

this.browser.wait(function(window) {
    console.log('wait...');

    return window.document.querySelector("#objectid");
}, function(e, browser) {
    console.log('wait complete ', e) ;
}); 
```

但是，第二种`callback`方法永远不会触发，并且`querySelector`调用总是失败。我认为`window.document`javascript 注入触发后 DOM 不会更新。

*[编辑]*

我删除了回调`browser.visit()`以使等待回调触发。

```
this.browser.visit(url); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T09:54:49.050

这取决于您存储变量的位置。
如果将其存储在全局对象`myScript`中，请使用：

```
browser.window.myScript.click_counter 
```

如果你有类似的东西`myScript.click_counter = 5; document.myScript = { ... }`，请使用：

```
browser.document.myScript.click_counter 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-30T16:19:57.387

我需要将 maxWait 提高到 100。这很奇怪，因为假设它以毫秒为单位，那很短，但以秒为单位，它的长度非常长。它不是很清楚 maxWait 的作用，但它似乎有所作为。不幸的是，我将 Behat/Mink 与 Zombie.js 一起使用，我不得不破解 Mink 驱动程序的源代码才能使其工作，这令人失望，因为我现在无法毫无问题地更新该驱动程序......

# python - Python 2.7：TypeError：“builtin_function_or_method”对象不可下标

> ID：10066838
> 
> 赞同：2
> 
> 时间：2012-04-08T21:48:29.977
> 
> 标签：python, typeerror

我正在尝试用 Python 制作拼字游戏。架子（7 个字母所在的位置）是一个列表，我在其中附加了 7 次 tk.StringVar() 每次玩家想要删除一个单词时，我都必须从架子上取下字母。这是我的问题。因为我可以将 drop 的单词的字母和 rack 的字母联系起来，所以我创建了一个临时列表，我在其中附加了初始 rack 中的每个 StringVar.get()。然后我创建了一个代码，用一个空字符串 '' 更改丢弃的字母，因为我可以将初始机架与临时列表相关联。这是我的代码

```
def defausse_rack_prov(word,rack_prov):
    word=word.get()
    for i in word:
        if i.upper() in rack_prov:
            rack_prov[rack_prov.index[i]]='' #This is the problematic line
    return rack_prov 
```

我不断得到

```
TypeError: 'builtin_function_or_method' object is not subscriptable 
```

我该怎么办 ？谢谢 ：）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-08T21:50:07.303

应该是`.index(i)`- 括号，而不是括号。

# javascript - jQuery 异步 each() 函数 - 如何退出回调？

> ID：10066848
> 
> 赞同：-2
> 
> 时间：2012-04-08T21:50:12.253
> 
> 标签：javascript, jquery, settimeout

我正在使用发布在以下位置的异步 each() 函数插件代码：

[jQuery 提示和技巧](https://stackoverflow.com/questions/182630/jquery-tips-and-tricks/2750689#2750689)

它运行良好，但我似乎无法使用 return 退出正在运行的回调函数；或返回真；。结果是，当满足“退出”条件时，它会停止所有剩余的 $.forEach “循环”执行。

由于插件实现了 setTimeout 循环方法，也许我只需要知道如何退出已经运行的 setTimeout 回调函数？顺便说一句 - 我避免使用 for 循环或 $.each() 以避免在大型 json 处理发生时浏览器锁定。“背景”循环显着提高了 UI 的性能。

```
$.forEach(json, 1000, function(idx,item) {
    if(some_condition) return true; //exit this timeout iteration

    //otherwise do something
});

jQuery.forEach = function (in_array, in_pause_ms, in_callback)
{
    if (!in_array.length) return; // make sure array was sent

    var i = 0; // starting index

    bgEach(); // call the function

    function bgEach()
    {
        if (in_callback.call(in_array[i], i, in_array[i]) !== false)
        {
            i++; // move to next item

            if (i < in_array.length) setTimeout(bgEach, in_pause_ms);
        }
    }

    return in_array; // returns array
};

jQuery.fn.forEach = function (in_callback, in_optional_pause_ms)
{
    if (!in_optional_pause_ms) in_optional_pause_ms = 10; // default

    return jQuery.forEach(this, in_optional_pause_ms, in_callback); // run it
}; 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T21:53:06.287

从文档：

> 通过使回调函数返回 false，我们可以在特定迭代中打破 $.each() 循环。

编辑：这也适用于您的自定义`forEach`.

# ruby-on-rails - 有很多：虽然关系问题。提交表格

> ID：10066850
> 
> 赞同：0
> 
> 时间：2012-04-08T21:50:17.423
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我试图在球员和固定装置之间建立多对多的关系。因此，当一名球员参加过比赛时，我可以看到球员参加过哪些比赛以及谁参加过比赛。

然后，我尝试使用带有布尔值的“sub_paid”列来跟踪玩家是否已为游戏付费。我很难将其设置为真或假。我可以创建玩家/灯具记录，但没有 sub_paid 属性。

## 楷模

```
class Fixture < ActiveRecord::Base
has_many :player_fixtures
has_many :players, :through => :player_fixtures

class Player < ActiveRecord::Base
has_many :player_fixtures
has_many :fixtures, :through => :player_fixtures

class PlayerFixture < ActiveRecord::Base
belongs_to :player
belongs_to :fixture 
```

## 迁移

```
class CreatePlayerFixtures < ActiveRecord::Migration
 def change
  create_table :player_fixtures do |t|
   t.integer  "player_id"
   t.integer  "fixture_id"
   t.boolean  "sub_paid"

   t.timestamps
end 
```

## 控制器

不知道该放什么，因为我对 player_fixture 没有特异性

## 看法

我现在有这个。

```
<%=form_for(@fixtures, :url => {:action =>'create'}) do |f| %> 
```

## 问题

有人可以指出我正确的方向！

我的大问题，我现在真的被困住了。

1.  首次提交表单时，使用 sub_paid = false 将其保存到数据库，然后可以在以后将其更改为 true。
2.  能够在夹具视图上按 sub_paid = false 对所有玩家进行排序。我的播放器列表中的 EG 对它们进行了排序，因此它只显示为 false。
3.  我在这里还有一个关于表单和复选框的问题仍未得到解答。[HABTM 表格未在 rails 中提交多个值](https://stackoverflow.com/questions/9897126/habtm-form-not-submitting-more-than-one-value-in-rails/9900192#9900192)

我知道这很多，但这是针对我正在做的一个项目，并且已经在屏幕上尝试了 3 周的所有内容。我需要完成这件事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T22:40:14.370

尝试将以下内容添加到您的表单中：

```
<%= check_box_tag :sub_paid %>
<%= select_tag :player_id, options_for_select(Player.all.map{|p| [p.name, p.id] %> 
```

请注意，这些是普通的`check_box_tag`and`select_tag`而不是`f.check_box`or `f.select`。我们不希望这些参数出现在您的`:fixture`参数中。现在`create`你的动作`FixtureController`应该是这样的：

```
def create
  @fixture = Fixture.new(params[:fixture])
  if @fixture.save
    @player = Player.find(params[:player_id])
    @fixture.player_fixtures << PlayerFixture.new(:sub_paid => params[:sub_paid], :player => @player)
    # other stuff, redirect, etc.
  else
    # error handling, render, etc.
  end
end 
```

您可能应该做一些检查以确保`PlayerFixture`保存部分顺利进行，但您明白了。希望对您有所帮助或至少给您一些想法。

# objective-c - 在 if 语句中创建数字范围

> ID：10066854
> 
> 赞同：-1
> 
> 时间：2012-04-08T21:50:38.237
> 
> 标签：objective-c, xcode, cocoa

我有一个 1768 到 1815 的值范围，我有我的 if 语句

```
if (location.x = 1768 to 1815) 
{
    //perform code
} 
```

我要创建一个数组还是我该怎么做？对不起，我是编程新手

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T21:55:22.820

```
if (location.x >= 1768 && location.x <= 1815) 
```

# spring - maven 和 spring mvc 不工作？

> ID：10066856
> 
> 赞同：1
> 
> 时间：2012-04-08T21:50:47.707
> 
> 标签：spring, model-view-controller, maven

我正在尝试使用 webapp 构建应用程序`Spring MVC`并`Maven 3.0`在`Eclipse`其中使用 webapp。我无法进入初始页面，也无法从那里导航到任何其他页面而没有`404 error`. 如果有什么我遗漏的，请告诉我。谢谢！

mvc-dispatcher.xml

```
 <?xml version="1.0" encoding="UTF-8"?><beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
xmlns:jdbc="http://www.springframework.org/schema/jdbc" xmlns:mvc="http://www.springframework.org/schema/mvc"
xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context 
    http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/jdbc
    http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd
    http://www.springframework.org/schema/mvc 
    http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

<context:component-scan base-package="se.guards.controller" />
<mvc:resources mapping="/resources/**" location="/resources/" />
<mvc:annotation-driven />
<context:annotation-config />

<!-- show pictures -->
<mvc:default-servlet-handler />

<!-- also add the following beans to get rid of some exceptions -->
<bean
    class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter" />
<bean
    class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping">
</bean>
<bean
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass"
        value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/views/" />
    <property name="suffix" value=".jsp" />
</bean>

<bean id="messageSource"
    class="org.springframework.context.support.ResourceBundleMessageSource">
    <property name="basenames">
        <list>
            <value>mymessages</value>
        </list>
    </property>
</bean> 
```

web.xml

```
<web-app id="WebApp_ID" version="2.4"
xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

<display-name>Spring MVC Application</display-name>

<!-- Spring MVC -->
<servlet>
    <servlet-name>mvc-dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>mvc-dispatcher</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<servlet>
    <servlet-name>>mvc-dispatcher</servlet-name>
    <servlet-class>org.springframework.js.resource.ResourceServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/mvc-dispatcher-servlet.xml,
        /WEB-INF/spring-database.xml,
    </param-value>
</context-param>

<!-- Spring Security -->
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

数据库.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

<bean id="dataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">

    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url" value="jdbc:mysql://localhost:3306/test" />
    <property name="username" value="root" />
    <property name="password" value="password" />
</bean> 
```

用户控制器.java

```
 package se.guards.controller;
    import java.util.ArrayList;
    import java.util.Collection;
    import org.springframework.beans.factory.annotation.Autowired;
    import org.springframework.stereotype.Controller;
    import org.springframework.ui.Model;
    import org.springframework.web.bind.annotation.RequestMapping;
    import org.springframework.web.bind.annotation.RequestMethod;
    import se.datalayer.guards.service.UserService;
    import se.guard.User;

    @Controller
    @RequestMapping(value="/")
    public class UserController
    {

@SuppressWarnings("unused")
@Autowired
private UserService userService;

@RequestMapping(value = "/", method = RequestMethod.GET)
public String findAllUsers(Model model){

    Collection<User> userList= new ArrayList<User>();

    model.addAttribute("users", userList);
    return "showallusers";

        }

       } 
```

showallusers.jsp

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
 <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4 /loose.dtd">
  <html>
 <head>
 <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
 <title>found users</title>
</head>
<body>
<table>
    <c:forEach var="allusers" items="${users}">
        <tr>
            <td>${allusers.firstname}</td>

            <td>${allusers.lastname}</td>
        </tr>
    </c:forEach>
        </table>
     </body>
    </html> 
```

回答问题：

这是我正在使用的代码。@Controller 注释必须存在。正如我之前所说，我得到： HTTP 状态 404 - /guard_weblayer/ 类型状态报告消息 /guard_weblayer/ 描述 请求的资源 (/guard_weblayer/) 不可用。Apache Tomcat/7.0.25

* * *

我使用restfule 设计、domainlayer、datalayer 和weblayer。它会影响网络播放器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T06:27:44.540

您可能想重新开始并使用[springbyexample](http://springbyexample.org/)中的示例。它以一种可以理解的方式包含了你需要的一切（在 Maven 中也是如此。）

这很可能比调试当前代码更容易。

# entity-framework - 将 EF 与不同的读写数据库服务器一起使用

> ID：10066857
> 
> 赞同：2
> 
> 时间：2012-04-08T21:51:12.113
> 
> 标签：entity-framework, database-design, entity-framework-4

我正在考虑将实体框架用于项目。我试图了解如何配置 EF 以使用配置有读取服务器和写入服务器的数据库环境。写入服务器的所有更新都将复制到读取服务器。

我的问题是：

1.  我需要为这两种环境生成不同的数据模型吗？

2.  我可以重复使用相同的数据模型吗？

3.  EF 本身是否有内置的东西可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T23:38:58.537

1.  如果数据模型相同，则否。
2.  Du to #1 为 no，#2 自动为 yes。
3.  EF 只需要你传递一个不同的连接字符串

然而...

我不确定您打算如何完成这项工作。您将几乎失去 ORM 的好处，您无法进行更改跟踪，并且您将遇到很多无法从写入模型中读取的问题。

坦率地说，我不确定如何使用任何 ORM 进行这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T21:55:49.917

您可以重用相同的模型，因为您可以使用您喜欢的任何连接字符串来实例化 ObjectContext。AFAIK，您甚至可以稍后切换连接，因此您可以使用具有相同 EntityContext 的两个不同服务器连接。

# objective-c - 定义宏预期表达式问题

> ID：10066863
> 
> 赞同：0
> 
> 时间：2012-04-08T21:51:40.643
> 
> 标签：objective-c, macros, c-preprocessor

我想创建一个宏来修剪我的字符串。

我使用下面的代码进行修剪：

```
[[NSString stringWithString:string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]] 
```

但是，如果我按如下方式创建宏，则会出现错误：**预期表达式**

```
#define TRIM_STRING(string) ([[NSString stringWithString:string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]]) 
```

如何正确创建相同的定义宏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T22:38:37.763

作为一个宏：

```
#define TRIM_STRING(string) [(string) stringByTrimmingCharactersInSet: [NSCharacterSet whitespaceAndNewlineCharacterSet]] 
```

但是，这里真的没有理由不使用内联函数。你得到类型检查，编译器会给你一些有意义的错误信息。与内联函数相同：

```
NSString * NSStringTrim(NSString *string)
{
    return [string stringByTrimmingCharactersInSet:
            [NSCharacterSet whitespaceAndNewlineCharacterSet]];
} 
```

或者，更好的是，为此在 NSString 上创建一个类别：

```
@interface NSString (additions)

- (NSString *)stringByTrimmingWhitespace;

@end

@implementation NSString (additions)

- (NSString *)stringByTrimmingWhitespace
{
    return [self stringByTrimmingCharactersInSet:
            [NSCharacterSet whitespaceAndNewlineCharacterSet]];
}

@end 
```

这样你就可以获得命名空间，你可以通过这样做来调用它

```
[string stringByTrimmingWhitespace] 
```

这更整洁，更符合可可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T22:08:53.407

摆脱你的开始和结束括号。你的一对太多了。

然后去掉 " `NSString stringWithString:string`" 并用`string`. 这本身就是错误的，因为您没有将它放在括号中，但它是学术性的；无论如何，您都不需要复制字符串。

**编辑：**

这是一个好主意，因为您对宏的参数在括号中，因此将它放在宏中出现的任何位置的括号中。当预处理器扩展您的宏时，这可以避免问题（如果您指定一个复杂的表达式作为参数）。

# ruby-on-rails - 需要帮助理解 Ruby on Rails 控制器和模型继承的语法

> ID：10066867
> 
> 赞同：0
> 
> 时间：2012-04-08T21:52:07.127
> 
> 标签：ruby-on-rails, ruby

到目前为止，在学习 Ruby 和 Ruby on Rails 时，我一直遇到语法

```
ActionController::Base 
```

并且从未明确说明它的确切含义。为什么 :: 而不是说斜线？ActionController/Base 不会更具体吗？

例如，在使用 Globalize3 gem 时，我在模型中添加了以下行

```
class About < ActiveRecord::Base
  translates :message
end 
```

我得到了名为 MonthlyPost::Translation 的生成模型，但这并不能解释太多。这些具体存储在哪里， :: 是什么意思？任何想法都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T21:56:07.563

ActionController::Base 表示在模块 ActionController 中找到类 Base。

这是一种组织课程的方式，也可以避免与他人制作的课程发生冲突。

[这](http://www.ruby-doc.org/docs/ProgrammingRuby/html/tut_modules.html)是一篇很好的文章，解释了如何将模块用于命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T00:33:38.100

Rails 是红宝石。 [学习红宝石](http://www.ruby-lang.org/en/documentation/)，您的问题将得到解答。

# php - 如何将两个 mysql 表组织成一个大的多维数组？

> ID：10066870
> 
> 赞同：5
> 
> 时间：2012-04-08T21:52:39.467
> 
> 标签：php, mysql, arrays

我很难弄清楚这个...

我有两张桌子……ticket_winners 和门票

在**ticket_winners**表中，用户名/个人资料信息...

**票证**表是这些用户针对一个用户 ID 拥有的所有票证，此表中每个用户可能有 10 多张票证。

问题：当每个用户的表***门票*****超过 1 行时，****如何循环数据的第二次迭代**

 *```
function pullTickets() {
    $sql = $this->mysql->retrieve("SELECT * FROM ticket_winners ORDER BY id DESC LIMIT 5");
    $sql2 = $this->mysql->retrieve("SELECT id, userId, ticketId FROM tickets ORDER BY id ASC LIMIT 5");
    while($row = mysql_fetch_array($sql)) {
        $results[$row['id']]['user'] = $row['userId'];

        while($row2 = mysql_fetch_array($sql2)) {
            if($results[$row['id']]['user'] == $row2['userId']) {
                $results[$row['id']]['tickets'][$row2['id']] = $row2['ticketId'];
            } else {
            }
        }

    }
    return $results;
} 
```

**PHP页面示例**：工作正常

```
$data = $obj->pullTickets();
foreach($data as $user) {
   echo $user['username'];
   foreach($data['ticket'] as $ticket) {
       echo $ticket['ticketId'];
   }
} 
```

数组现在的样子：

```
[1] => Array
    (
        [batch] => 1
        [userId] => 200
        [userName] => Craig
        [tickets] => Array
            (
                [1] => GH7JNm72hN
                [2] => JudM3rT3is
                [3] => KiLPoXCmDF
            )

    )
[2] => Array
    (
        [batch] => 1
        [userId] => 100
        [userName] => Hewbie
        needs to continue looping
    ) 
```

门票表没有像 [1] 数组中那样在每个用户中循环。它跳过所有其他用户的票。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T23:50:42.440

尝试在 ticket_winners 表上进行左连接，不要使用 SELECT *，这样做是不好的做法，并且在使用连接时，您应该在每列附加表名。

```
SELECT tw.id,tw.userid,t,userName,t.id AS tick_id, t.ticketId 
    FROM `ticket_winners` AS tw
LEFT JOIN `tickets` AS t
    ON tw.userid = t.userid 
ORDER BY tw.id DESC LIMIT 5 
```

左连接保留您的彩票赢家表的表格格式，并将附加 t.id（在输出中为 tick_id）、ticketId 和 userName。

这将为您提供一个由多个用户组成的数组，在一个 while 循环中对它们进行排序并不困难，因为您只需使用用户 ID 的键创建一个获胜者数组，在该数组中附加中奖彩票 ID。

```
$results = array();

while ($sql = mysql_fetch_array($query, MYSQL_ASSOC) {
    $results[$sql['userid']]['userName'] = $sql['user'];
    $results[$sql['userid']]['tickets'][] = $sql['tick_id'];
} 
```

结果数组：

```
[1] => array 
    (
    ['userName'] => 'Craig',
    ['tickets'] => array 
        (
        [0] => 'GH7JNm72hN',
        [1] => 'JudM3rT3is'
        )
    )
[2] => array 
    (
    ['userName'] => 'Adam',
    ['tickets'] => array 
        (
        [0] => 'GfdT24sDgC'
        )
    ) 
```

这消除了 a) 运行两个单独的查询和 b) 避免在 while 循环内创建不必要的 while 循环以加快此过程的需要。

执行此操作时要遵循的一个好习惯是：

1.  在一次查询中获取尽可能多的数据。
2.  循环一次并将数据排序到一个或多个数组中，消除因连接而导致的重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T22:07:28.680

如我所见，您的数据已应用于 $result 数组-tickets-data 和tickets_winner-data。那你的问题是什么？也许我完全误解了它。*

# css - 如何使用 LESS css 计算基于百分比的保证金？

> ID：10066871
> 
> 赞同：1
> 
> 时间：2012-04-08T21:52:53.980
> 
> 标签：css, less

我正在使用基于 960 网格的 Photoshop 文件的流体/响应式布局。对于其中一个元素，当布局为 960 像素宽时，我想要一个 9 像素的左边距。

我已经看到通过计算 9/960 来执行此操作的示例，结果为`0.009375`，并设置：

```
margin-left: 0.009375% 
```

但是我使用 LESS css / LESS.app 可以对变量进行数学运算并动态创建它们。
我已经尝试过这些方法，但它们会抛出错误：

```
margin-left:9/960%;
margin-left:9/960\%;
margin-left:(9/960)%;
margin-left:{9/960}%; 
```

我怎样才能让 LESS 自动对此进行数学计算？

**澄清**

如果我使用`margin-left:9/960;`LESS 将编译，但输出 css`margin-left: 0.009375;`不包含百分号，因此不会被浏览器（AFAIK）呈现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T22:05:22.107

只需乘以 100%

```
$ echo "*{width: (9/960)*100%;}" | .npm/less/1.3.0/package/bin/lessc -
* {
  width: 0.9375%;
} 
```

# java - Android：每个视图都有不同的 Java 文件

> ID：10066872
> 
> 赞同：1
> 
> 时间：2012-04-08T21:53:00.567
> 
> 标签：java, android, android-activity, header, viewswitcher

我正在构建一个 Android 应用程序，其中包含一个带有应用程序标题的固定标头。现在，当应用程序更改活动时，标题也会滑出并滑入，因为两个活动具有相同的标题。我真的很喜欢这个标题始终保持固定，即使在切换活动时也是如此。

我认为这可以通过在标题下方的布局上使用 viewswitcher/viewflipper 并仅在应用程序的特定部分上切换视图来轻松完成。那会产生我想要的效果。问题是，我的应用程序中的每个屏幕都将使用相同的 java 文件。因为我有大约 12/13 个不同的屏幕，都包含按钮文本视图、列表视图等，这会创建非常混乱的代码。因此，我更喜欢为每个“屏幕”使用 java 文件，但是我必须坚持使用不同的活动，并且在活动转换期间我不能将标题保持在顶部。

是否有一种解决方案可以在为每个应用程序屏幕使用不同的 java 文件的同时实际保留一个固定的标题（并能够为下面的视图/布局设置动画）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T22:01:19.413

使用[Fragments](http://developer.android.com/guide/topics/fundamentals/fragments.html)、[FragmentStatePagerAdapter](http://developer.android.com/resources/samples/Support13Demos/src/com/example/android/supportv13/app/FragmentStatePagerSupport.html)和[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)。您可以创建一个布局，其中您有固定的标题 - 在下面您的 ViewPager 包含不同的片段，每个片段都包含自己的逻辑。

使用 Fragments 而不是仅使用活动是一个很大的变化，但是我发现它们非常有用。作为起点，请查看[此](http://android-developers.blogspot.se/2011/08/horizontal-view-swiping-with-viewpager.html)链接。

为了不允许用户滑动，但仍然能够以编程方式切换 viewpager 项目，请查看本[教程](http://blog.svpino.com/2011/08/disabling-pagingswiping-on-android.html)并使用[setCurrentItem](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setCurrentItem%28int%29)方法进行滑动。

# javascript - socket.io 回调

> ID：10066875
> 
> 赞同：0
> 
> 时间：2012-04-08T21:53:13.707
> 
> 标签：javascript, node.js, callback

我有以下代码：

```
 client.keys("key_"+id, function (err, replies){
      if (replies.length > 0){
        client.sunion(replies,function (err, replies){
          {...}
        });
      }else{...}
     }); 
```

下面我有这个功能

```
pg.connect(conString, function(err, client) {some code}); 
```

但我想在第一段代码中执行`pg.connect` 而不是执行。`...`如何最好地避免复制代码和内存泄漏，`pg.connect`功能将是相同的`{...}`。

通过复制代码，这将如下所示：

```
 client.keys("key_"+id, function (err, replies){
      if (replies.length > 0){
        client.sunion(replies,function (err, replies){
          pg.connect(conString, function(err, client) {some code});
        });
      }else{pg.connect(conString, function(err, client) {some code});}
     }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T00:06:59.373

请记住，您正在使用 JavaScript，并且可以定义一些辅助函数来减少您的打字...

```
function withConnect( callback ) {
    return pg.connect( conString, callback );
} 
```

例如会为您节省一些时间......但是如果错误处理程序总是相同的呢？

```
function withConnect( callback ) {
    return pg.connect( conString, function( err, client ) {
        if ( err ) {
           handleError( err );
        }
        // we might still want something special on errors...
        callback.apply( this, arguments );
    }
 } 
```

您甚至可以通过这种方式抽象简单的插入/更新样式查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T00:26:45.760

您可以尝试（如果“某些代码”部分相同）：

```
function connectFunc() {
    return function (err){
       pg.connect(conString, function(err, client) {some code});
    };
}

client.keys("key_"+id, function (err, replies){
    if (replies.length > 0){
        client.sunion(replies, connectFunc());
    } else { connectFunc()(err)}
}); 
```

或者，如果“某些代码”不同：

```
function connectFunc(some_code) {
    return function (err){
       pg.connect(conString, function(err, client) {some_code();});
    };
}

client.keys("key_"+id, function (err, replies){
    if (replies.length > 0){
        client.sunion(replies, connectFunc(function(){some code}));
    } else { connectFunc(function(){some other code})(err)}
}); 
```

# c - 使用宏检查空值

> ID：10066876
> 
> 赞同：2
> 
> 时间：2012-04-08T19:09:47.040
> 
> 标签：c, macros

我的 C 代码包含许多函数，这些函数将指向不同结构的指针作为参数，这些参数不应该是 NULL 指针。为了使我的代码更具可读性，我决定替换此代码：

```
if(arg1==NULL || arg2==NULL || arg3==NULL...) {
    return SOME_ERROR;
} 
```

使用该宏：

```
NULL_CHECK(arg1,arg2,...) 
```

如果 args 的数量未知并且它们可以指向不同的结构，我应该如何编写它？（我在 C99 工作）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-08T21:09:37.293

IMO 最可维护的解决方案是编写多个单独的调用，而不是试图“聪明”地处理它。

例如，Win32 程序员使用 VERIFY 宏，它在调试时运行断言（该宏确保断言从发布代码中删除）；看到这样开头的函数并不罕见：

```
int foo(void* arg1, char* str, int n)
{
    VERIFY( arg1 != NULL );
    VERIFY( str != NULL );
    VERIFY( n > 0 ); 
```

显然，您可以很容易地将这 3 行压缩为一行，但如果您不这样做，宏的效果最好。如果你把它们放在不同的行上，那么一个失败的断言会告诉你三个条件中的哪一个没有得到满足，而把它们都放在同一个语句中只会告诉你有什么事情失败了，让你找出其余的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T23:31:17.550

如果您决定使用宏，那么我建议使用带有单个参数的宏：

```
#define NULL_CHECK(val)  if (val == NULL) return SOME_ERROR; 
```

然后你可以写：

```
NULL_CHECK(s1.member1);
NULL_CHECK(p2->member2); 
```

等等。其中一个优点是您可以像这样准确地结合错误报告或日志记录来识别第一个无效成员。对于单个复合条件，您只知道其中至少有一个是无效的，但不知道具体是哪一个。

如果您必须处理可变数量的参数，那么您需要研究[`Boost::Preprocessor`](http://www.boost.org/libs/preprocessor)，它适用于 C 和 C++。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T23:50:34.427

并不是说我认为`return`在宏中隐藏语句是个好主意，但是这样的宏可以写成：

```
#define NULL_CHECK(...)                                 \
  do {                                                  \
    void *_p[] = { __VA_ARGS__ };                       \
    int _i;                                             \
    for (_i = 0; _i < sizeof(_p)/sizeof(*_p); _i++) {   \
      if (_p[_i] == NULL) {                             \
        return SOME_ERROR;                              \
      }                                                 \
    }                                                   \
  } while(0) 
```

基本上，将可变参数扩展为一个数组并遍历索引。

# javascript - 在 for 循环中添加到数组不能正确存储值？

> ID：10066880
> 
> 赞同：0
> 
> 时间：2012-04-08T21:53:59.210
> 
> 标签：javascript

好吧..我真的一定是疯了。为什么这些不会为“a”打印出 3-5？我尝试了两种不同的方法来将数组存储在下面的 3-5 处，它们看起来都......很明显。基础翻译中一定有一些我没有看到的东西。

```
<script>
    var articlesKey = [];
    for(var i = 3; i < 6; i++) {
        articlesKey.push(i);
        document.write('<br>i:'+i);
    }
    for (a in articlesKey)
        document.write("<br>a:"+a);

    articlesKey = [];
    var count = 0;
    for(var i = 3; i < 6; i++) {
        articlesKey[count] = i;
        document.write('<br>i:'+i);
        count++;
    }
    for (a in articlesKey)
        document.write("<br>a:"+a);
</script> 
```

它打印出来：

```
i:3
i:4
i:5
a:0
a:1
a:2
i:3
i:4
i:5
a:0
a:1
a:2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T21:55:16.330

`for( a in articlesKey)`遍历`a`KEYS `articlesKey`（然后让您将值作为`articlesKey[a]`）。这里没有错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T21:57:37.827

这很简单，因为 a 表示循环中的数组索引，而不是索引处的值。使固定：

```
document.write("<br>a:"+articlesKey[a]); 
```

# c# - 在 C# 中传输数据包时如何正确保持 UI 更新？

> ID：10066884
> 
> 赞同：2
> 
> 时间：2012-04-08T21:54:29.407
> 
> 标签：c#, multithreading, sockets, packet-capture, ui-thread

我有这种形式，它产生一个新线程并开始在循环中侦听和等待 UDP 数据包。我需要的是使用接收到的字节数来更新 UI。

为此，我设置了一个事件，我将在收到数据包后立即引发，并将接收到的字节数作为参数传递。由于我没有在 UI 线程上运行，因此我不能简单地直接更新 UI。这是我目前正在做的事情：

```
private void EVENTHANDLER_UpdateTransferProgress(long receivedBytes) {
    if(InvokeRequired) {
        Invoke(new MethodInvoker(() => {
            totalReceivedBytes += receivedBytes;
            Label.Text = totalReceivedBytes.ToString("##,0");
        }));
    }
} 
```

但这仍然**与数据包接收循环在同一线程上运行，**并且它不会返回到该循环 - 并等待另一个数据包 - 直到此`EVENTHANDLER_UpdateTransferProgress`方法返回。

我的问题基本上是关于上述方法中的以下行：

```
Label.Text = totalReceivedBytes.ToString("##,0"); 
```

像这样更新 UI 会减慢数据包的接收速度。如果我把那条线去掉（或评论它），数据包接收会快得多。

我怎么可能解决这个问题？我认为更多线程是关键，但我不确定如何在这种情况下正确实现它们......我正在使用带有 .NET 2.0 的 Windows 窗体。

**编辑：**

在我之前的测试中，以上似乎是正确的，实际上可能在某种程度上是正确的。但经过更多测试后，我意识到问题出在整体上`Invoke(new MethodInvoker(() => { ... }));`。当我删除它（当然 UI 不会更新）并离开`EVENTHANDLER_UpdateTransferProgress`但继续引发事件时，数据包接收会快得多。

我测试了接收一些平均大约 1.5 秒的文件，而根本没有调用`Invoke()`事件处理程序。当我确实调用`Invoke()`事件处理程序时，即使没有更新 UI 中的任何控件或执行任何操作（换句话说，匿名方法体是空的），它也需要更长的时间，大约 5.5 秒。你可以看到这是一个很大的不同。

**有没有办法改善这一点？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T01:48:17.640

您的方法的问题在于它会更新每个数据包的 UI。如果您每秒收到 1000 个数据包，您将每秒更新 UI 1000 次！监视器可能每秒刷新不超过 100 次，如果每秒更新超过 10 次，则没有人能够读取它。

解决这个问题的一个更好的方法是`totalReceivedBytes += receivedBytes;`在处理 I/O 的线程中放置一个计时器，并在 UI 线程上放置一个计时器，该计时器`Label.Text = totalReceivedBytes.ToString("##,0");`每秒最多执行几次。当传输开始时，启动定时器；当传输停止时，停止计时器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T00:43:42.627

是的，有一种方法可以改善这一点。

第一种是使用`BeginInvoke`而`Invoke`不是等待调用返回。您还应该考虑在您的方法中使用另一种形式

```
private void EVENTHANDLER_UpdateTransferProgress(long receivedBytes) {
    if(InvokeRequired) {
        BeginInvoke(new Action<long>(EVENTHANDLER_UpdateTransferProgress),
                    receivedBytes));
        return;
    }
    totalReceivedBytes += receivedBytes;
    Label.Text = totalReceivedBytes.ToString("##,0");
} 
```

因此，如果您从不需要调用的方法中调用此方法，仍会执行 GUI 上的更新。

* * *

您可以做的另一个选择是中断下载线程中的线程。类似的东西

```
public event EventHandler<MonitorEventArgs> ReportProgress;

public void startSendingUpdates(MonitorEventArgs args) {
  EventHandler<MonitorEventArgs> handler = ReportProgress;
  if (handler == null) {
      return;
  }
  ThreadPool.QueueUserWorkItem(delegate {
      while (!args.Complete) {
          handler(this, args);
          Thread.Sleep(800);
      }
  });
}

public void download() {
    MonitorEventArgs args = new MonitorEventArgs();
    startSendingUpdates(args);
    while (downloading) {
        int read = downloadData(bytes);
        args.BytesTransferred += read;
    }
    args.Complete = true;
}

public class MonitorEventArgs : EventArgs {
    public bool Complete { get; set; }
    public long BytesTransferred { get; set; }
} 
```

与收益相比，这样做的开销很小。您的下载线程不受 GUI 更新的影响（至少与等待 GUI 更新相比没有）。缺点是你在线程池中占用了一个线程，但是，嘿，这就是他们的目的！而且，线程完成后会关闭，因为您设置了完成标志。设置时也不需要锁定，因为工作线程中的额外运行在上下文中并不重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T00:45:37.090

您是否尝试过使用 BeginInvoke 而不是 Invoke？BeginInvoke() 是一个异步调用。

```
private void EVENTHANDLER_UpdateTransferProgress(long receivedBytes) {
    if(InvokeRequired) {
        BeginInvoke(new MethodInvoker(() => {
            totalReceivedBytes += receivedBytes;
            Label.Text = totalReceivedBytes.ToString("##,0");
        }));
    }
} 
```

# ocaml - OCaml 中非 Unix 平台的纪元以来的秒数

> ID：10066886
> 
> 赞同：3
> 
> 时间：2012-04-08T21:55:10.233
> 
> 标签：ocaml

模块**Unix**包含获取自 Epoch 以来的秒数的**时间** 函数，但是是否有一种独立于平台的方式来获取相同的值并确保代码在非 Unix 部署中编译？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-08T22:05:49.447

尽管有它的名字，[Unix 模块](http://caml.inria.fr/pub/docs/manual-ocaml/libref/Unix.html)也[可以在 Windows 和其他平台上使用](http://caml.inria.fr/pub/docs/manual-ocaml/manual035.html)。您可以安全地使用`Unix.time()`与平台无关的代码。

# php - 在php中使用curl与faye发布数据

> ID：10066890
> 
> 赞同：2
> 
> 时间：2012-04-08T21:55:39.400
> 
> 标签：php, node.js, faye

根据 faye 的作者，我可以从任何平台发送消息，
使用 curl 发布消息的格式是：

```
curl -X POST http://192.168.1.101:8000/faye -H 'Content-Type:
    application/json' -d '{"channel":"/foo","data":{"hello":"world"}}' 
```

我格式化上一行以在 php 中使用

```
$data = array("channel" => "/one", "result" => "Hello World from PHP!!");  
$data_string=json_encode($data);
$ch = curl_init('http://192.168.1.101:8000/faye');
curl_setopt($ch, CURLOPT_CUSTOMREQUEST,"POST");
curl_setopt($ch,CURLOPT_POSTFIELDS,$data_string);                                                          
curl_setopt($ch,CURLOPT_RETURNTRANSFER,true);                                                              
curl_setopt($ch,CURLOPT_HTTPHEADER,array(
'Content-Type:application/json','Content-Length:'strlen($data_string)));
$result = curl_exec($ch); 
```

不知何故，频道一的订阅者没有得到结果

java脚本中的发布功能无缝工作（见下一行）

```
var publication = client.publish('/one',{ result: 'Hello World from JS'});<br/> 
```

请让我知道缺少什么或我的错误谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-25T09:30:26.687

这个对我有用：

```
$data = array("channel" => "/one", "data" => array ("result"=>"HelloWorld from PHP!!"));
$data_string=json_encode($data);
$ch = curl_init('http://localhost:8000/faye');
curl_setopt($ch, CURLOPT_CUSTOMREQUEST,"POST");
curl_setopt($ch,CURLOPT_POSTFIELDS,$data_string);                                                          
curl_setopt($ch,CURLOPT_RETURNTRANSFER,true);                                                              
curl_setopt($ch,CURLOPT_HTTPHEADER,array('Content-Type:application/json'));
echo $result = curl_exec($ch); 
```

# python - 尽管正则表达式匹配，为什么 Django 找不到这些 url？

> ID：10066891
> 
> 赞同：3
> 
> 时间：2012-04-08T21:55:39.947
> 
> 标签：python, regex, django

在 regex 的 python 文档中，有对“。”的描述。做：

> （点。）在默认模式下，这匹配除换行符以外的任何字符。如果指定了 DOTALL 标志，则它匹配任何字符，包括换行符。

对于我在 Django 中做的一个项目，我设置了这个正则表达式：

```
url(r'^accounts/confirm/(.+)$', confirm,name='confirmation_view') 
```

据我所知，这应该匹配任何以'accounts/confirm/'开头的url，然后是任意数量的任意字符。然后将这些任意字符作为参数传递给函数“confirm”。到目前为止，一切都很好。

所以这个正则表达式应该匹配

```
accounts/confirm/fb75c6529af9246e4e048d8a4298882909dc03ee0/ 
```

一样好

```
accounts/confirm/fb75c6529af9246e4e-048d8a4298882909dc03ee0/ 
```

和

```
accounts/confirm/fb75c6529af9246e4e=048d8a4298882909dc03ee0/ 
```

和

```
accounts/confirm/fb75c6529af9246e4e%20048d8a4298882909dc03ee0/ 
```

至少，这是我认为它会做的。但它没有，它只匹配第一个。Django 一直在给我一个 404 其他的。我不明白，因为表达式的 (.+) 部分应该表示“匹配一个或多个除换行符以外的任何字符”。

**编辑：** 正如评论和答案所证明的那样，我得到了正确的正则表达式。所以现在这是一个问题：为什么 Django 没有返回正确的视图，而是 404。在将 url 传递给该正则表达式之前，它是否对 url 做了一些事情？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-08T22:01:43.840

快速测试确认这应该有效：

```
>>>import re
>>>test = ["accounts/confirm/fb75c6529af9246e4e048d8a4298882909dc03ee0/", "accounts/confirm/fb75c6529af9246e4e-048d8a4298882909dc03ee0/", "accounts/confirm/fb75c6529af9246e4e=048d8a4298882909dc03ee0/", "accounts/confirm/fb75c6529af9246e4e%20048d8a4298882909dc03ee0/"]
>>>all([re.match(r'^accounts/confirm/(.+)$', item) for item in test])
True 
```

这将在任何非匹配项上返回 false：

```
>>>test.append("something else")
>>>all([re.match(r'^accounts/confirm/(.+)$', item) for item in test])
False 
```

问题一定出在其他地方。

# sql - 需要帮助在 Postgresql 中编写 SQL 查询

> ID：10066895
> 
> 赞同：4
> 
> 时间：2012-04-08T21:56:29.330
> 
> 标签：sql, postgresql

我一直在尝试编写此查询，但由于某种原因似乎无法正确处理..

我需要做的是：

如果在过去 24 小时内没有与此问题相关的更新插入到 qUpdateTable 中，则将问题的状态更改为“关闭”。

我只希望在工作人员至少回复一次的情况下关闭它。

您可以通过检查 qUpdateTable 并查看 StaffID 字段是否为空或具有特定工单更新的值来确定工作人员或用户是否已回答问题。如果有一个staffID，那么它已经被一个工作人员更新了，但是如果没有，那么qUpdate 是由一个用户完成的。

本质上，这种工作方式是用户通过插入问题表来发布问题，并通过插入到 qUpdate 表中进行回复，并使用外键 - “QuestionID”链接到原始问题。

表格：

```
CREATE TABLE Staff
(
    ID      INTEGER NOT NULL PRIMARY KEY,
    Name        VARCHAR(40) NOT NULL
);

CREATE TABLE Customer
(
    ID      INTEGER NOT NULL PRIMARY KEY,
    Name        VARCHAR(40) NOT NULL,
    Email       VARCHAR(40) NOT NULL
);

CREATE TABLE Product
(
    ID      INTEGER NOT NULL PRIMARY KEY,
    Name    TEXT NOT NULL
);

CREATE TABLE Question
(
    ID      INTEGER NOT NULL PRIMARY KEY,
    Problem VARCHAR(1000),
    Status  VARCHAR(20) NOT NULL DEFAULT 'open', 
    Priority    INTEGER NOT NULL,
    LoggedTime  TIMESTAMP NOT NULL,
    CustomerID  INTEGER NOT NULL,
    ProductID   INTEGER NOT NULL,
    FOREIGN KEY (ProductID) REFERENCES Product(ID),
    FOREIGN KEY (CustomerID) REFERENCES Customer(ID),
    CHECK (Status IN ('open','closed') AND Priority IN (1,2,3))

);

CREATE TABLE qUpdate
(
    ID      INTEGER NOT NULL PRIMARY KEY,
    Message VARCHAR(1000) NOT NULL,
    UpdateTime  TIMESTAMP NOT NULL,
    QuestionID  INTEGER NOT NULL,
    StaffID INTEGER,
    FOREIGN KEY (StaffID) REFERENCES Staff(ID),
    FOREIGN KEY (QuestionID) REFERENCES Question(ID)
); 
```

一些样本插入：

```
INSERT INTO Customer (ID, Name, Email) VALUES (1, 'testname1', 'testemail1');

INSERT INTO Customer (ID, Name, Email) VALUES (2, 'testname2', 'testemail2');

INSERT INTO Staff (ID, Name) VALUES (1, 'Don Keigh');

INSERT INTO Product (ID, Name) VALUES (1, 'Xbox');

INSERT INTO Question (ID, Problem, Status, Priority, LoggedTime, CustomerID, ProductID) 
VALUES  (1, 'testproblem1', 'open', 3, '2012-04-14 09:30', 2, 1);

INSERT INTO Question (ID, Problem, Status, Priority, LoggedTime, CustomerID, ProductID) 
VALUES  (2, 'testproblem2', 'open', 3, '2012-04-14 09:30', 2, 1);

INSERT INTO qUpdate (ID, Message, UpdateTime, StaffID, QuestionID) VALUES (2, 'testmessage1','2012-07-12 14:27', 1, 1);

INSERT INTO qUpdate (ID, Message, UpdateTime, QuestionID) VALUES (3, 'testmessage1','2012-06-18 19:42', 2); 
```

**到目前为止我所做的（显然行不通）**

```
UPDATE Question
SET Status = 'closed' 
WHERE EXISTS
(SELECT qUpdate.QuestionID  
MAX(qUpdate.UpdateTime - Now() = INTERVAL '1 day') FROM qUpdate
LEFT JOIN Question ON qUpdate.QuestionID = Question.ID
WHERE qUpdate.StaffID IS NOT NULL); 
```

我意识到我的解释可能有点混乱，所以如果您需要更多信息，我会尽快回复

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T22:15:15.017

```
UPDATE Question
SET Status = 'closed' 
where
-- this clause asserts there's at least one staff answer
exists (
  select null from qUpdate
  where qUpdate.QuestionID = Question.ID
  and StaffID is not null
)
-- this clause asserts there's been no update in the last 24 hours
and not exists (
  select null from qUpdate
  where qUpdate.QuestionID = Question.ID
  and qUpdate.UpdateTime > (now() - interval '24 hours') 
)
and Status = 'open'; 
```

您几乎肯定需要 qUpdate(QuestionID) 或 qUpdate(QuestionID,UpdateTime) 或 qUpdate(QuestionID,StaffID) 上的索引，以便在 exists() 测试中的子选择上获得良好的性能。

# iphone - Objective-C，使用 UI 事件取消调度队列

> ID：10066897
> 
> 赞同：15
> 
> 时间：2012-04-08T21:57:06.297
> 
> 标签：iphone, objective-c, ios, concurrency, grand-central-dispatch

设想：

*   用户点击一个按钮，要求对地址簿进行某种修改。
*   调用一个方法来启动此修改并显示一个警报视图。
*   为了显示警报视图并保持 UI 响应，我使用了 dispatch_queue：

    ```
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
                     dispatch_sync(dispatch_get_main_queue(), ^{
                       // Show the alert view
                     });
                   }); 
    ```

*   使用以下命令启动地址簿修改过程：

    ```
    dispatch_async(modifyingAddressBookQueue, ^{}); 
    ```

现在，我想为用户提供随时取消进程的能力（当然是在保存地址簿之前）。因此，当他点击警报表中的取消按钮时，我想访问调度块，设置一些特定的 BOOL 来停止进程并恢复通讯簿。

问题是，你不能这样做！您无法访问该块并更改其中的任何变量，因为所有变量仅复制一次。执行时块内的任何变量更改都不会被块看到。

总结一下：如何使用 UI 事件停止正在进行的操作？

更新：

该过程的代码：

```
- (void) startFixingModification {

    _fixContacts = YES;
    __block BOOL cancelled = NO;

    dispatch_queue_t modifyingAddressBookQueue;
    modifyingAddressBookQueue = dispatch_queue_create(sModifyingAddressBookQueueIdentifier,
                                                      NULL);

    dispatch_async(modifyingAddressBookQueue, ^{

        for (NSMutableDictionary *contactDictionary in _contactArray) {

            if (!cancelled) {
                break;
            }

            i = i + 1;

            BOOL didFixContact = [self fixNumberInContactDictionary:contactDictionary];
            if (!didFixContact) {
                _fixedNumbers = _fixedNumbers - 1;
            }

            dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
                dispatch_sync(dispatch_get_main_queue(), ^{
                    [self setAlertViewProgress:i];
                });

            });
        }
    });

    cancelledPtr = &cancelled;

} 
```

alertview（我自己的库）委托的代码

```
- (void) alertViewProgressCancel:(ASAlertViewProgress *)alertView { // This is a private lib.

    if (cancelledPtr)
    {
        NSLog(@"stopping");

        *cancelledPtr = YES;
    }

} 
```

在界面中，我声明

```
BOOL*   cancelledPtr; 
```

更新 2：

真的越来越令人沮丧了！对于以下代码

```
for (NSMutableDictionary *contactDictionary in _contactArray) {

            NSLog(@"%d", _cancelModification);
            if (_cancelModification) {
                break;
            }
} 
```

如果 _cancelModification 设置为 YES，则 for 循环被破坏，这没关系。一旦我注释掉 NSLog 行，当它变为 YES 时，_cancelModification 就会被忽略！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-08T22:05:12.563

如果你声明你的`BOOL`using `__block`，那么它可以在块执行之外进行更改，并且块将看到新值。有关更多详细信息，请参阅[文档](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Blocks/Articles/bxVariables.html#//apple_ref/doc/uid/TP40007502-CH6-SW6)。

一个例子：

```
@interface SNViewController ()
{
    BOOL*   cancelledPtr;
}

@end

@implementation SNViewController

- (IBAction)start:(id)sender
{
    __block BOOL cancelled = NO;

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        while (!cancelled) {
            NSLog(@"running");
            sleep(1);
        }        
        NSLog(@"stopped");
    });

    cancelledPtr = &cancelled;
}

- (IBAction)stop:(id)sender
{
    if (cancelledPtr)
    {
        NSLog(@"stopping");

        *cancelledPtr = YES;
    }
}

@end 
```

或者，在您的类中使用 ivar 来存储 BOOL。该块将隐式复制`self`并通过它访问 ivar。不需要`__block`。

```
@interface SNViewController ()
{
    BOOL   cancelled;
}

@end

@implementation SNViewController

- (IBAction)start:(id)sender
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        while (!cancelled) {
            NSLog(@"running");
            sleep(1);
        }        
        NSLog(@"stopped");
    });
}

- (IBAction)stop:(id)sender
{
    NSLog(@"stopping");
    cancelled = YES;
}

@end 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-11-05T18:00:08.047

## 方法一

创建一个返回“可取消”块的自定义 dispatch_async 方法。

```
// The dispatch_cancel_block_t takes as parameter the "cancel" directive to suspend the block execution or not whenever the block to execute is dispatched. 
// The return value is a boolean indicating if the block has already been executed or not.
typedef BOOL (^dispatch_cancel_block_t)(BOOL cancelBlock);

dispatch_cancel_block_t dispatch_async_with_cancel_block(dispatch_queue_t queue, void (^block)())
{
    __block BOOL execute = YES;
    __block BOOL executed = NO;

    dispatch_cancel_block_t cancelBlock = ^BOOL (BOOL cancelled) {
        execute = !cancelled;
        return executed == NO;
    };

    dispatch_async(queue, ^{
        if (execute)
            block();
        executed = YES;
    });

    return cancelBlock;
}

- (void)testCancelableBlock
{
    dispatch_cancel_block_t cancelBlock = dispatch_async_with_cancel_block(dispatch_get_main_queue(), ^{
        NSLog(@"Block 1 executed");
    });

    // Canceling the block execution
    BOOL success1 = cancelBlock(YES);
    NSLog(@"Block is cancelled successfully: %@", success1?@"YES":@"NO");

    // Resuming the block execution
    // BOOL success2 = cancelBlock(NO);
    // NSLog(@"Block is resumed successfully: %@", success2?@"YES":@"NO");
} 
```

## 方法二

如果条件得到验证，定义一个用于异步执行块的宏：

```
#define dispatch_async_if(queue,condition,block) \
dispatch_async(queue, ^{\
    if (condition == YES)\
        block();\
});

- (void)testConditionBlock
{
    // Creating condition variable
    __block BOOL condition = YES;

    dispatch_async_if(dispatch_get_main_queue(), condition, ^{
        NSLog(@"Block 2 executed");
    });

    // Canceling the block execution
    condition = NO;

    // Also, we could use a method to test the condition status
    dispatch_async_if(dispatch_get_main_queue(), ![self mustCancelBlockExecution], ^{
        NSLog(@"Block 3 executed");
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T11:54:16.290

尝试将以下代码示例应用于您的情况：

```
__block UIView * tempView = [[UIView alloc] initWithFrame:CGRectMake(50, 100, 220, 30)];
[tempView setBackgroundColor:[UIColor grayColor]];
[self.view addSubview:tempView];
[tempView release];

__block BOOL cancel = NO;
//点击之后就会开始执行这个方法
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
dispatch_async(queue, ^{
    int i = 0;
    while (i < 1000000000 && cancel == NO) {
        i++;
    }
    NSLog(@"Task end: i = %d", i);
    //这个不会执行，因为在之前，gcd task已经结束
    [tempView removeFromSuperview];
});

//1s 之后执行这个方法
double delayInSeconds = 1.0;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
    NSLog(@"A GCD Task Start");
    cancel = YES;
    [tempView setBackgroundColor:[UIColor blackColor]];
}); 
```

# php - jqueryui自动完成在php中不起作用

> ID：10066906
> 
> 赞同：1
> 
> 时间：2012-04-08T21:58:10.410
> 
> 标签：php, jquery, jquery-ui

**解决方案：**

问题是在我的 php 代码中，我有一条调试消息： print $_GET['term']; 它还将结果返回给客户端。

我正在使用自动完成功能实现搜索，但是在连接到 php 时遇到了一些问题，这是我的代码

html:

```
<input type="text" id="leaderboard_search" /> 
```

搜索.js：

```
jQuery(function($) {
$( "#leaderboard_search" ).autocomplete({
        minLength: 1,
        width: 240,
        source: 'search.php'
    });
}); 
```

搜索.php：

```
<?php 
    $values = array('abc','def');
    echo json_encode($values);
?> 
```

当我输入一些东西时。它只是没有显示任何东西。我已经调试到 php 代码，search.php 被调用没有问题。所以我怀疑问题出在jquery方面。

我正在使用 jqueryui 1.8

更新：为了简化问题，我改成嵌入式js，还是不行：

html代码：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>

<script>
    $(function() {
    $( "#leaderboard_search" ).autocomplete({
        minLength: 2,
        width: 240,
        source: 'search.php'
    });
});
</script>
<html>
<fieldset class="searchinput"><input type="text" id="leaderboard_search" /></fieldset>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T22:06:08.707

试试这个作为你的 search.php：

```
$values = ['abc','def'];
echo json_encode($values); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-08T22:15:45.837

根据此处的 jquery 文档[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

它声明结果可以是一个名称值对，也可以是一个数组或字符串.. 所以你应该像这样 shud echo smthing。

```
echo '["abc","def"]'; 
```

# javascript - Google Places API 地铁站、巴士站

> ID：10066910
> 
> 赞同：0
> 
> 时间：2012-04-08T21:58:46.610
> 
> 标签：javascript, google-maps, google-places-api

> **可能重复：**
> [俄罗斯的 Google Places Api 地铁和火车站搜索停止工作](https://stackoverflow.com/questions/10054629/google-places-api-subway-and-train-station-search-in-russia-stopped-working)

几天前，我正在测试（使用）一个应用程序，在该应用程序中，我使用 google places API 获得了最近的地铁站，但是昨天和今天我再次测试了我的应用程序，现在我无法让地铁站靠近我。

我正在阅读 [https://developers.google.com/maps/documentation/places/supported_types](https://developers.google.com/maps/documentation/places/supported_types)和 google 允许使用地铁站类型，当我使用医院、商店和公园应用程序等其他类型时！！！

我下载了这个-> [http://github.com/brendannee/walksy](http://github.com/brendannee/walksy)

在我写的 Jscript 文件上

```
placesService.search({
  radius: 4000
, location: trip.start
, types: [
  'train_station'
  , 'bus_station '
  , 'subway_station'
  ]
} 
```

代替

```
placesService.search({
  radius: 5000
, location: trip.start
, types: [
    'amusement_park'
  , 'aquarium'
  , 'bowling_alley'
  , 'casino'
  , 'cemetery'
  , 'city_hall'
  , 'embassy'
  , 'museum'
  , 'natural_feature'
  , 'park'
  , 'stadium'
  , 'zoo'
  , 'point_of_interest'
  ]
} 
```

谁能告诉我我的错误是什么？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T04:27:31.547

此问题已在此处的 Google Places API 问题跟踪器上报告：[http ://code.google.com/p/gmaps-api-issues/issues/detail?id=4061](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4061)

请单击“星号”图标以获取有关未来更改的通知，并让我们知道您有兴趣看到它得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T19:36:26.393

我正在测试这个：

[https://maps.googleapis.com/maps/api/place/search/json?language=ru&location=4.647604837557583,-74.07900810241699&radius=1000&sensor=false&types=subway_station|train_station&key=xxxxxxxx](https://maps.googleapis.com/maps/api/place/search/json?language=ru&location=4.647604837557583,-74.07900810241699&radius=1000&sensor=false&types=subway_station|train_station&key=xxxxxxxx)

结果：

`{ "html_attributions" : [], "results" : [], "status" : "REQUEST_DENIED" }`

我认为现在谷歌不允许地铁站的地方服务。

在另一个帖子中有人说：

[俄罗斯的 Google Places Api 地铁和火车站搜索停止工作](https://stackoverflow.com/questions/10054629/google-places-api-subway-and-train-station-search-in-russia-stopped-working)

谢谢！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T03:10:04.200

我想这可能是因为根据它的 Github 页面：

> 对于盯着旧金山的徒步旅行，兴趣点来自谷歌 Fusion 表，其中包含在加利福尼亚州旧金山精心挑选的兴趣点

尝试选择 SF 以外的地点——它对我有用。（也许您还应该添加transit_station）

# shell - 如何在 Minix 3 的命令行上使 C 程序可执行？

> ID：10066915
> 
> 赞同：0
> 
> 时间：2012-04-08T21:59:17.563
> 
> 标签：shell, system-calls, minix

我需要编写一个程序 ioloop.c，它采用两个命令行参数来确定两个嵌套 for 循环的迭代次数。内部循环执行更耗时的功能，例如三角函数。外循环首先从标准输入中获取一个字符，然后在内循环之后输出一些字符。

我的问题是在 Internet 上找到足够的有关 Minix 3 的资源。我还没有找到任何好的教程来解释实现命令行方法的过程。我的第一个假设是它与 exec 系统调用有关。

任何关于使用 Minix 3 文件来实现命令行功能的帮助或解释都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T22:04:28.940

您可以在程序的主函数中使用参数

```
(...)
int main(int artc, char argv[3]){
 int n1 = atoi(argv[1]);
 int n2 = atoi(argv[2]);
(...) 
```

其中 n1 和 n2 是命令行参数。那么如果你打电话

./a.out 100 2000

n1 将设置为 100，n2 将设置为 2000

# facebook-access-token - 如何使用 java 获取永久 Facebook 访问令牌

> ID：10066916
> 
> 赞同：2
> 
> 时间：2012-04-08T21:59:21.877
> 
> 标签：facebook-access-token

如果您使用 Facebook 图形 API，您可以查看某人的所有公开信息（如果该人将这些信息设为公开），您只需要做几件事：打开浏览器，登录 Facebook 并知道该人的用户 ID#，例如, Mark Zuckerberg - facebook 创始人有用户 ID#4，所以去： [https](https://graph.facebook.com/4) ://graph.facebook.com/4 => 你可以看到基本信息，比如名字，年龄，位置......（想象你改变了i 在 _ **https://graph.facebook.com/i**中，i 从 1 到 100 万，您可以看到百万用户的信息，只要他们公开设置他们的信息）

**或者去这个链接你可以看到更多**的信息，比如个人收藏和**教育**... Facebook（在[http://developers.facebook.com/docs/reference/api/](http://developers.facebook.com/docs/reference/api/)中查看更多信息）

 **我的目标是使用基本的 java url 转到这些链接并获取所有信息（基本上它们是文本）并将它们保存到文本文件中，使用 _https://graph.facebook.com/4 没有问题，但使用第二个链接问题是访问令牌代码是 XXX - 每次都会更改或将在 20~30 分钟后过期，所以我不能再运行我的程序来获取更多数据。问题是无论如何都可以获得永久访问令牌或将其延长更长的时间，请记住我只使用一个小型 Java 程序，与 Facebook 应用程序或其他任何东西无关。先谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T22:03:34.247

不幸的是，您无法获得永久访问令牌，但您可以在访问令牌过期时捕获错误并请求新的。此外，您可能需要阅读 facebook 使用条款以确保您没有违反它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-15T19:47:00.743

您可以将访问令牌的有效期延长至 60 天。你可以通过这个：

[https://developers.facebook.com/docs/facebook-login/access-tokens/](https://developers.facebook.com/docs/facebook-login/access-tokens/)

如果您从服务器端进行以下调用，Facebook 将返回一个有效期为 2 个月的访问令牌（扩展访问令牌）：

```
GET /oauth/access_token?  
    grant_type=fb_exchange_token&           
    client_id={app-id}&
    client_secret={app-secret}&
    fb_exchange_token={short-lived-token} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T12:44:06.520

您**无法**获得永久访问令牌，但在到期后很容易续订：[那篇](https://developers.facebook.com/docs/reference/dialogs/oauth/)文章就是要走的路。神奇的网址是：

```
https://www.facebook.com/dialog/oauth/?client_id=YOUR_APP_ID&redirect_uri=YOUR_REDIRECT_URL&state=YOUR_STATE_VALUE&scope=COMMA_SEPARATED_LIST_OF_PERMISSION_NAMES 
```

*   `client_id`
    您的应用程序的 ID。即使您正在使用 Java 或其他方式“离线”工作，您也必须注册一个 facebook 应用程序 - 但是 - 不需要实际对应用程序进行编程**。**只需注册该应用程序，以便您获得一个固定的应用程序 ID（您需要在这里），您就可以了。
*   `redirect_uri`
    这是重要的一步 - facebook 重定向到 redirect_uri 中给定的 uri，并在该 uri 中添加“#access_token=...”。您可以解析该 uri 以获取令牌：

使用网络浏览器调用上面的链接，`http://localhost`用作 redirect_uri 就可以了。浏览器将尝试调用`http://localhost#access_token=....`并且显然失败，但您可以解析 url 以获取令牌。这不是一个非常简单的过程，但它对我有用。**

# scala - Scala 中的 a.ne(null) 和 a != null 有什么区别？

> ID：10066927
> 
> 赞同：18
> 
> 时间：2012-04-08T22:00:58.200
> 
> 标签：scala, null

我一直在使用

```
a != null 
```

检查这`a`不是空引用。但现在我遇到了另一种使用方式：

```
a.ne(null) 
```

哪种方式更好，它们有何不同？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-08T22:09:44.180

就像@Jack 说`x ne null`的等于`!(x eq null)`. `x != null`和之间的区别在于`x ne null`检查`!=`值相等和`ne`检查引用相等。

例子：

```
scala> case class Foo(x: Int)
defined class Foo

scala> Foo(2) != Foo(2)
res0: Boolean = false

scala> Foo(2) ne Foo(2)
res1: Boolean = true 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-08T22:10:59.040

除此之外，在 AnyRef 中`ne`定义的[@drexin](http://www.scala-lang.org/api/current/index.html#scala.AnyRef)和 @Jack 仅用于引用类型。

```
scala> "null".ne(null)
res1: Boolean = true

scala> 1.ne(null)
<console>:5: error: type mismatch;
 found   : Int
 required: ?{val ne: ?}
Note that implicit conversions are not applicable because they are ambiguous:
 both method int2Integer in object Predef of type (Int)java.lang.Integer
 and method intWrapper in object Predef of type (Int)scala.runtime.RichInt
 are possible conversion functions from Int to ?{val ne: ?}
       1.ne(null)

scala> 1 != null
res2: Boolean = true 
```

# ruby - Ruby 中用于统计的图形包

> ID：10066930
> 
> 赞同：0
> 
> 时间：2012-04-08T22:01:32.617
> 
> 标签：ruby, graphics, statistics, gd

我想在 Ruby 中用随机数等可视化一些统计计算。我听说过 gd 和 gd2，但它们的 gem 似乎不再受支持。

您对在 Ruby 中创建图像和图形有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T22:13:14.023

[可能是 ruby​​ RMagic](http://rmagick.rubyforge.org/)最好的图形处理库。

# python - 如何使用 Python for 循环将 qlineedit 字段保存到 XML 文件中？

> ID：10066933
> 
> 赞同：0
> 
> 时间：2012-04-08T22:01:55.063
> 
> 标签：python, xml, pyqt, minidom

我正在尝试读取我所有的 QLineEdit 字段和复选框状态，并使用 Minidom 将它们保存到 XML 文件中。以下是我到目前为止所拥有的。我可以使用 for 循环编写此代码的最简单和最短的方法是什么？

```
from xml.dom.minidom import Document

# Get all lineEdit values
mac = str(self.lineEdit_mac.text())
broadcast = str(self.lineEdit_broadcast.text())
destination = str(self.lineEdit_destination.text())
port = str(self.lineEdit_port.text())
destinationCheckBox=str(self.checkBox_destination.checkState())
portCheckBox=str(self.checkBox_port.checkState())

# Create the minidom document
doc = Document()

# Create the <wol> base element
wol = doc.createElement("wol")
doc.appendChild(wol)

# Create the <mac> node
node = doc.createElement("mac")
wol.appendChild(node)

# Give the <mac> element some text
nodeText = doc.createTextNode(mac)
node.appendChild(nodeText)

# Create the <broadcast> node
node = doc.createElement("broadcast")
wol.appendChild(node)

# Give the <broadcast> element some text
nodeText = doc.createTextNode(broadcast)
node.appendChild(nodeText)

# Create the <broadcast> node
node = doc.createElement("destination")
wol.appendChild(node)

# Give the <broadcast> element some text
nodeText = doc.createTextNode(destination)
node.appendChild(nodeText)

# Create the <port> node
node = doc.createElement("port")
wol.appendChild(node)

# Give the <port> element some text
nodeText = doc.createTextNode(port)
node.appendChild(nodeText)

# Create the <port> node
node = doc.createElement("destinationCheckBox")
wol.appendChild(node)

# Give the <port> element some text
nodeText = doc.createTextNode(destinationCheckBox)
node.appendChild(nodeText)

# Create the <port> node
node = doc.createElement("portCheckBox")
wol.appendChild(node)

# Give the <port> element some text
nodeText = doc.createTextNode(portCheckBox)
node.appendChild(nodeText)

# Write to document
f = open(fileName, 'w')
doc.writexml(f, indent='',addindent='  ',newl='\n')
f.closed 
```

XML 输出：

```
<?xml version="1.0" ?>
<wol>
  <mac>
    00:00:00:00:00:00
  </mac>
  <broadcast>
    192.168.1.255
  </broadcast>
  <destination>

  </destination>
  <port>
    9
  </port>
  <destinationCheckBox>
    0
  </destinationCheckBox>
  <portCheckBox>
    0
  </portCheckBox>
</wol> 
```

另外，将xml格式化为这样的最简单方法是什么？

```
<?xml version="1.0" ?>
<wol>
  <mac>00:00:00:00:00:00</mac>
  <broadcast>192.168.1.255</broadcast>
  <destination></destination>
  <port>9</port>
  <destinationCheckBox>0</destinationCheckBox>
  <portCheckBox>0</portCheckBox>
</wol> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T22:35:04.317

你可以尝试这样的事情：

```
from xml.dom.minidom import Document

# Get all lineEdit values
elements = dict(
    mac = self.lineEdit_mac.text,
    broadcast = self.lineEdit_broadcast.text,
    destination = self.lineEdit_destination.text,
    port = self.lineEdit_port.text,
    destinationCheckBox = self.checkBox_destination.checkState,
    portCheckBox = self.checkBox_port.checkState
)

doc = Document()
wol = doc.createElement("wol")
doc.appendChild(wol)

for name, fn in elements.iteritems():
    node = doc.createElement(name)
    wol.appendChild(node)

    text = str(fn())
    nodeText = doc.createTextNode(text)
    node.appendChild(nodeText)

with open(fileName, 'w') as f:
    doc.writexml(f, indent='', addindent='  ', newl='\n') 
```

我建议将函数作为 dict 值而不是它们的实际文本值的原因是因为您可以在稍后阶段将此元素 dict 用作​​ xml 进程的配置对象。然后它只是向字典添加另一个元素以供包含的问题。

至于重新格式化您的 xml 输出，它现在的方式是内置漂亮打印机的工作方式。文本节点只是另一种类型的子节点，因此它使用新的缩进线。您必须自己做漂亮的打印机功能，手动循环您的 dom 并以您想要的方式打印它（检查文本类型节点并将它们打印在同一行中）。

万一您没有专门绑定到 XML，如果您愿意，可以使用 JSON 进一步缩短它：

```
import json

elements = dict(
    mac = self.lineEdit_mac.text,
    broadcast = self.lineEdit_broadcast.text,
    destination = self.lineEdit_destination.text,
    port = self.lineEdit_port.text,
    destinationCheckBox = self.checkBox_destination.checkState,
    portCheckBox = self.checkBox_port.checkState
)

with open(fileName, 'w') as f:
    # if you need the root key
    data = {'wol': dict((name, str(fn())) for name, fn in elements.iteritems())}
    json.dump(data, f, indent=4)

    # or, just the key/values
    #json.dump(elements, f, indent=4, default=lambda o: str(o())) 
```

### 如果元素的顺序很重要

使用字典不会保持原始条目的顺序。如果由于某种原因这很重要，您可以只使用一个元组：

```
elements = (
    ('mac', self.lineEdit_mac.text),
    ('broadcast', self.lineEdit_broadcast.text),
    ('destination', self.lineEdit_destination.text),
    ('port', self.lineEdit_port.text),
    ('destinationCheckBox', self.checkBox_destination.checkState),
    ('portCheckBox', self.checkBox_port.checkState)
)

# and remove .iteritems() where previously used
for name, fn in elements: 
```

或者，如果使用 python2.7（或下载旧版本的反向移植版本），您可以使用[OrderedDict](http://docs.python.org/library/collections.html#collections.OrderedDict)

# jquery - datepicker onmouseenter 禁用日期的消息

> ID：10066935
> 
> 赞同：0
> 
> 时间：2012-04-08T22:02:29.823
> 
> 标签：jquery, events, datepicker, mouseenter

试图向用户获取有关 datepicker 中 disabledDays 的一些信息。理想情况下，我希望在悬停以提供信息时显示一个小框显示日期。如果这不可能，那么这样的事情会做，但我无法让事件在鼠标移出时停止。不仅如此，这段代码将文本放在日期选择器的外围，在一个月的第一个日期之前和最后一个日期之后的灰色区域中。

```
<p class="pickdate">
<label for="pickDate"/>
<input type="text" class="pickDate"/></p>

$(function() {
$("#pickDate").datepicker();
$(".ui-state-disabled").live("mouseover", function() {
$("pickdate").text($(this).text('n/a'));
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T22:07:00.757

您是否也尝试过绑定`mouseout`事件？

```
$(".ui-state-disabled").on('mouseout', function() {
  $("pickdate").hide()
  //or whoever you want to hide it
} 
```

调试：如果没有发生任何事情，请插入一些日志消息：

```
$(".ui-state-disabled").on('mouseout', function() {
  console.log("mouseout event fired! YEHA!");
  //or alert("mouseout event fired! YEHA");
  $("pickdate").hide()
  //or whoever you want to hide it
} 
```

如果出现该消息，则可能`hide()`无法在您的pickdate 上工作。虽然很奇怪，但我不知道究竟是什么意思要隐藏它。随意执行任何其他技巧而不是给定的代码。

如果日志消息或警报根本不出现，则可能会触发 mouseout 事件。您可以通过将其绑定到一个空的测试 div 来测试此行为。只是为了不受任何干扰。检查您的浏览器是否支持此元素类型。

另外，您使用的是哪个版本的 jQuery？我看到您执行`live()`了从 1.7 版开始已弃用并由`on()`.

（在此编辑之前，我还错误地使用`bind()`了`on()`.

# jquery - jQuery 和 Colorbox：如何自动设置 iframe 颜色框的高度和宽度

> ID：10066938
> 
> 赞同：6
> 
> 时间：2012-04-08T22:03:10.360
> 
> 标签：jquery, colorbox

我下载了最新版本的[colorbox jquery 插件](http://www.jacklmoore.com/colorbox)。现在我为 iframe 和内联设置了真正的颜色框。我的问题 colorbox(lightbox) 没有设置外部页面的自动高度/宽度。如何解决这个问题？有办法吗？

我的彩盒功能：

```
<script>
$(document).ready(function(){
 $(".iframe").colorbox({inline:true,iframe:true});
</script> 
```

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-08T22:22:43.207

因为 colorbox 不知道 iframe 中的内容，所以自动调整大小无法按您期望的方式工作。

我这样做：使用以下选项打开颜色框时设置默认宽度+高度：

```
{ iframe: true, innerWidth: 430, innerHeight: 370, scrolling: false, ... } 
```

选择对您的内容最有意义的尺寸：colorbox 将打开并将 iframe 加载到此框中。**在 iframe 的 html body 末尾**，放置这个小脚本，它会在 iframe 中调整颜色框的大小：

```
$(function(){
    parent.$.colorbox.resize({
        innerWidth:$('body').width(),
        innerHeight:$('body').height()
    });
}); 
```

要使第二个脚本正常工作，必须在 iframe 中加载 jQuery。否则，您必须使用本机 JavaScript 来完成此任务。

并确保该 iframe 内的所有图像都设置了宽度/高度或已完全加载。否则 innerWidth/innerHeight 将给出不正确的值。

# c# - 在c#中在运行时修改listBox项

> ID：10066940
> 
> 赞同：-1
> 
> 时间：2012-04-08T22:03:32.210
> 
> 标签：c#, fonts, listbox, runtime, items

我编写了一个代码，在运行时将一些项目添加到列表框中，现在我无法弄清楚如何访问这些项目的属性（特别是 FontSize）。

这里有一些代码

```
 for (int i = 0; i < list.Count; i++)
      {
          trainerRoutine Item = list[i];
          routines_lst.Items.Add(Item.name);
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T22:11:32.440

很难看出“trainerRoutine”可能与 FontSize 有什么关系。通常，ListBox 存储*对象*。您正在使用 Item.name 将字符串放入 Items 集合中。这很麻烦，你不能轻易地从那个字符串返回到原始对象。而且也不是必须的，添加Item即可。您必须做的一件事是重写 Item 类的 ToString() 方法，这就是 ListBox 用来生成可读字符串的方法。所以：

```
class DontKnowWhat {
   // properties and methods
   //...
   public override string ToString() {
      return name;
   }
} 
```

现在，您可以通过将原始对象强制转换为 DontKnowWhat 来简单地从 ListBox.Items 集合中取回原始对象。

* * *

以防万一您正在谈论更改项目的字体大小，水晶球解释编号 2，这需要将 ListBox 的 DrawMode 属性设置为 DrawMode.OwnerDrawVariable。在 MSDN 文章中有一个很好的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T22:07:42.940

考虑到`ListBox`你添加了一个类似的项目`Item.Name`，我想它是一个简单的字符串，我会说对于`Font`属性你不应该在项目内部而是在`ListBox`自身内部。

# css - 缺少一个 CSS3 属性，它是什么？

> ID：10066944
> 
> 赞同：1
> 
> 时间：2012-04-08T22:03:53.000
> 
> 标签：css, pseudo-element

有一个简单的 CSS3 hack 可以附加`&nbsp;`到 div 的内容中，以防止其高度折叠，无论它是否包含文本。我就是找不到了。

有人可以帮忙吗？

`<div></div> <!-- nothing in it = will collapse -->`

`<div>&nbsp;</div> <!-- still nothing in it but with &nbsp; appended it won't collapse -->`

`<div>SOME CONTENT&nbsp;</div> <!-- "SOME CONTENT" is added via JS; -->`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T22:10:24.093

您可能正在谈论伪元素和`:after`属性。`:before``content`

```
#someId:after {
    content: '&nbsp;';
} 
```

但是为什么不`min-height`按照 Kolink 的建议使用呢？

**编辑：** 正如评论中所指出的，这作为文本附加，所以解决方案是使用 unicode 表示作为转义序列：

```
#someId:after {
    content: '\0000a0';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T22:07:07.480

CSS 不允许您只向 HTML 标记添加内容。那是错误的。

但是，您可以这样做：

```
min-height: 1em; 
```

这将确保`div`始终至少有一行高，因此在没有内容时不会折叠。

# c# - 在 C# 中从 XML 中读取多个值

> ID：10066948
> 
> 赞同：0
> 
> 时间：2012-04-08T22:05:11.583
> 
> 标签：c#, xml

我有一个 xml 文件

```
<Actual-External-Terminals>
    <Actual-External-Terminal>
      <Party-Id value="EXTRA:77440" />
      <Name value="77440" />
      <Dial-String value="77440" />
      <IP-ISDN-SIP value="IP" />
      <Total-Connection-Time value="0s" />
      <Failing-Attempts value="0" />
      <Last-Failure-Cause value="N/A" />
      <List-of-Connection-Records>
        <Connection Call-Rate="768" Call-Type="Video" ConnectionTime="" Dialin-Dialout="Dial-in" Disconnection-Time="2012-02-16T13:33:32Z" Over-GW-port-limit="false" Over-MCU-port-limit="false" Reason-Disconnection="Normal" />
      </List-of-Connection-Records>
    </Actual-External-Terminal> 
```

在上面的 xml 中，我想获取连接部分的所有值，请帮助我，谢谢不能使用 Linq to xml，因为它的 .net 框架 2.0 和桌面应用程序

问候瓦西夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T22:39:33.417

System.Xml 是一种方式。如下：

```
 using System.Xml;
// Name space & class declarations...
static void ReadXml(string filePath)
        {
            //These would be kept in a settings file but constants for this example
            const string CONNECTION_LISTING_NODE_NAME = "List-of-Connection-Records";
            const string CONNECTION_NODE_NAME = "Connection";
            const string CALL_RATE_ATTRIBUTE_NAME = "Call-Rate";

            //Load xml
            var doc = new XmlDocument();
            doc.Load(filePath);
            var root = doc.FirstChild;
            var connectionRecordLists = doc.SelectNodes(String.Format("//{0}",CONNECTION_LISTING_NODE_NAME));
            if (connectionRecordLists == null) return;
            for (var i = 0; i < connectionRecordLists.Count; i++)
            {
                var connections = connectionRecordLists[i].SelectNodes(CONNECTION_NODE_NAME);
                if (connections == null) continue;
                for (var j = 0; j < connections.Count; j++)
                {
                    if (connections[j].Attributes != null
                        && connections[j].Attributes[CALL_RATE_ATTRIBUTE_NAME] != null)
                    {
                        Console.WriteLine(connections[j].Attributes[CALL_RATE_ATTRIBUTE_NAME].Value);
                    }

                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T22:10:28.163

如果您的 xml 文件具有固定的元素和属性，那么 XmlSerializer 类呢？[http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer(v=vs.80).aspx)

# java - 在 netbeans 中编译和运行 java8/jdk8 代码 - 无法编译的源代码

> ID：10066953
> 
> 赞同：6
> 
> 时间：2012-04-08T22:05:46.260
> 
> 标签：java, netbeans-7, java-8

在记事本中预览[JDK 1.8](http://jdk8.java.net/lambda/)并从命令行编译文件后，我想我会尝试使用 netbeans 看看会发生什么。

我已成功添加 JDK 1.8 并更改了以下设置：

> 属性-> 库-> java 平台：**JDK 1.8**
> 
> 属性 -> 源 -> 源/二进制格式：**JDK 8**

当我`Clean and build`从 netbeans 项目时，它构建成功。并建议使用以下命令执行项目：

> javac 1.8.0-ea
> 
> 要在没有 Ant 的情况下从命令行运行此应用程序，请尝试：
> 
> **C:\Program Files\Java\jdk1.8.0/bin/java -jar "C:\Java8\JavaBacon\dist\JavaBacon.jar"**

它从命令行运行得很好！

但是当我尝试`Run`这个项目时，我得到以下异常：

```
Exception in thread "main" java.lang.RuntimeException: 
Uncompilable source code - Erroneous tree type: <any> 
```

它可以构建，但不能运行？

我目前的解决方法是将Java8代码分开`Java Class Library`并从主项目中调用它，因为它可以构建库。显然，当使用 java8 特性时，你会得到红色的曲线，缺乏智能感知和自动格式化更改`->`，`- >`但它可以构建！（非常好：D）

但是无法进行`Run`项目的原因是什么？

## 更新：

禁用以下设置时异常消失`Compile On Save`：

> 属性 > 构建 > 编译

[http://netbeans.org/bugzilla/show_bug.cgi?id=199293](http://netbeans.org/bugzilla/show_bug.cgi?id=199293)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:43:35.310

禁用以下设置时异常消失`Compile On Save`：

> 属性 > 构建 > 编译

参考：[netbeans bug 数据库](http://netbeans.org/bugzilla/show_bug.cgi?id=199293)

# android - C2DM 不能有registration_id

> ID：10066955
> 
> 赞同：0
> 
> 时间：2012-04-08T22:05:55.687
> 
> 标签：android, android-c2dm

请帮助我我自己无法解决这个问题，我没有收到任何广播信息 C2DM 应该通过广播我的注册 ID 发送给我，但我没有收到任何信息

这里是java文件

NotifyMeActivity.java

```
package com.notifyme;

import android.app.Activity;
import android.app.PendingIntent;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;

public class NotifyMeActivity extends Activity {

    public static final String PUSH_ENABLED_PREF_KEY = "pushEnabled";
    private SharedPreferences prefs;
    Button button_enable_push;//initialisation bouttons enable et disable push
    Button button_disable_push;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        button_enable_push = (Button)findViewById(R.id.button_enable_push);
        button_disable_push = (Button)findViewById(R.id.button_disable_push);

      //On attribut un écouteur d'évènement à tout les boutons
        button_enable_push.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                registerForC2dm();
            }
        });
        button_disable_push.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                unregisterFromC2dm();
            }
        });

    }
    private void registerForC2dm() {
        Log.i("C2DM","register");
        Intent registrationIntent = new Intent("com.google.android.c2dm.intent.REGISTER");
        registrationIntent.putExtra("app", PendingIntent.getBroadcast(this, 0, new Intent(), 0));
        registrationIntent.putExtra("sender", "notifme@gmail.com");
        startService(registrationIntent);

    }

    private void unregisterFromC2dm() {
        Log.i("C2DM","unregister");
        Intent unregistrationIntent = new Intent("com.google.android.c2dm.intent.UNREGISTER");
        unregistrationIntent.putExtra("app", PendingIntent.getBroadcast(this, 0, new Intent(), 0));
        super.startService(unregistrationIntent);

    }

} 
```

C2DMReceiver.java

```
package com.notifyme;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;

import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;
import android.content.SharedPreferences.Editor;

public class C2DMReceiver extends BroadcastReceiver {
    private static String KEY = "c2dmPref";
    private static String REGISTRATION_KEY = "registrationKey";

    private Context context;
    @Override
    public void onReceive(Context context, Intent intent) {
        this.context = context;
        if (intent.getAction().equals("com.google.android.c2dm.intent.REGISTRATION")) {
            Log.d("c2dm", "handleRegistration");
            handleRegistration(context, intent);
        } else if (intent.getAction().equals("com.google.android.c2dm.intent.RECEIVE")) {
            Log.d("c2dm", "handleMessage");
            handleMessage(context, intent);
        }
     }

    private void handleRegistration(Context context, Intent intent) {
        String registration = intent.getStringExtra("registration_id");
        if (intent.getStringExtra("error") != null) {
            // Registration failed, should try again later.
            Log.d("c2dm", "registration failed");
            String error = intent.getStringExtra("error");
            if(error == "SERVICE_NOT_AVAILABLE"){
                Log.d("c2dm", "SERVICE_NOT_AVAILABLE");
            }else if(error == "ACCOUNT_MISSING"){
                Log.d("c2dm", "ACCOUNT_MISSING");
            }else if(error == "AUTHENTICATION_FAILED"){
                Log.d("c2dm", "AUTHENTICATION_FAILED");
            }else if(error == "TOO_MANY_REGISTRATIONS"){
                Log.d("c2dm", "TOO_MANY_REGISTRATIONS");
            }else if(error == "INVALID_SENDER"){
                Log.d("c2dm", "INVALID_SENDER");
            }else if(error == "PHONE_REGISTRATION_ERROR"){
                Log.d("c2dm", "PHONE_REGISTRATION_ERROR");
            }
        } else if (intent.getStringExtra("unregistered") != null) {
            // unregistration done, new messages from the authorized sender will be rejected
            Log.d("c2dm", "unregistered");

        } else if (registration != null) {
            Log.d("c2dm", registration);
            Editor editor =
                context.getSharedPreferences(KEY, Context.MODE_PRIVATE).edit();
            editor.putString(REGISTRATION_KEY, registration);
            editor.commit();
           // Send the registration ID to the 3rd party site that is sending the messages.
           // This should be done in a separate thread.
           // When done, remember that all registration is done.

            postData(registration,"polo");
        }
    }

    private void handleMessage(Context context, Intent intent)
    {
        //String app_name = (String)context.getText(R.string.app_name);
        String app_name = "Notify Me";
        String message =  intent.getStringExtra("message");

        // Use the Notification manager to send notification
        NotificationManager notificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
        // Create a notification using android stat_notify_chat icon. 
        Notification notification = new Notification(android.R.drawable.stat_notify_chat, app_name + ": " + message, 0);

        // Create a pending intent to call the HomeActivity when the notification is clicked
        PendingIntent pendingIntent = PendingIntent.getActivity(context, -1, new Intent(context, NotifyMeActivity.class), PendingIntent.FLAG_UPDATE_CURRENT); // 
        notification.when = System.currentTimeMillis();  
        notification.flags |= Notification.FLAG_AUTO_CANCEL; 
        // Set the notification and register the pending intent to it
        notification.setLatestEventInfo(context, app_name, message, pendingIntent); //

        // Trigger the notification
        notificationManager.notify(0, notification);
    }
    public void postData(String id,String error) {
        Log.i("TAG", "ENVOI Du post dATA");
        // On créé un client http
        HttpClient httpclient = new DefaultHttpClient();
        // On créé notre entête
        HttpPost httppost = new HttpPost("http://*******");

        try {
            // On ajoute nos données dans une liste
            List nameValuePairs = new ArrayList(2);

            // On ajoute nos valeurs ici un identifiant et un message
            nameValuePairs.add(new BasicNameValuePair("pseudo", error));
            nameValuePairs.add(new BasicNameValuePair("id", id));

            // Ajoute la liste à notre entête
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            // On exécute la requête tout en récupérant la réponse
            HttpResponse response = httpclient.execute(httppost);

            // On peut maintenant afficher la réponse
            Log.e("http réponse",response.toString());

        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
        } catch (IOException e) {
            // TODO Auto-generated catch block
        }
    }

} 
```

还有我的清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.notifyme"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <permission
        android:name="com.notifyme.permission.C2D_MESSAGE"
        android:protectionLevel="signature" />

    <uses-permission 
      android:name="com.notifyme.permission.C2D_MESSAGE" />
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />

     <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".NotifyMeActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver
            android:name=".NotifyMeActivity"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter >
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" >
                </action>

                <category android:name="com.notifyme" />
            </intent-filter>
        </receiver>
        <receiver
            android:name=".C2DMReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter >
                <action android:name="com.google.android.c2dm.intent.RECEIVE" >
                </action>

                <category android:name="com.notifyme" />
            </intent-filter>
        </receiver>

    </application>

</manifest> 
```

非常感谢你帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T22:45:54.560

从清单中删除这个块......

```
 <receiver
        android:name=".NotifyMeActivity"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter >
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" >
            </action>

            <category android:name="com.notifyme" />
        </intent-filter>
    </receiver> 
```

然后将`<intent-filter>`上面的内容添加到您的`.C2DMReceiver`条目中......

```
 <receiver
        android:name=".C2DMReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter >
            <action android:name="com.google.android.c2dm.intent.RECEIVE" >
            </action>
            <category android:name="com.notifyme" />
        </intent-filter>
        <intent-filter >
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" >
            </action>
            <category android:name="com.notifyme" />
        </intent-filter>
    </receiver> 
```

# openmpi - MPI - 如何处理不能被线程数整除的动态工作负载？

> ID：10066958
> 
> 赞同：0
> 
> 时间：2012-04-08T22:06:34.123
> 
> 标签：openmpi

我注意到所有 MPI 调用都需要一定程度的对称性，否则它们会挂起和/或产生意想不到的结果。您如何处理动态问题或数据集？

我在网上找到的每个示例总是将问题分解成可均匀分割的块，或者在计算中使用代码块的重复。

假设我有 8 个线程可用，但我想做的工作以 57、80、99、64、13 等为单位......

是否有解决此类问题的首选方法？减少似乎需要线程之间对函数的平等调用？（即 57 将需要来自每个线程的 8 次调用，即使最后 7 次毫无意义） Scatter 似乎是相似的。有没有像 Scatter 这样的东西适用于非均匀整除的问题集？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T23:00:06.030

如果你使用 write/send 函数而不是 scatter 函数，你将可以控制如何分发数据，尽管它会增加一些负担。理想情况下，尽可能均匀地划分数据，让主进程完成额外的工作。

# c++ - c++ fstream的文件读/写有2G限制吗？

> ID：10066966
> 
> 赞同：7
> 
> 时间：2012-04-08T22:07:49.743
> 
> 标签：c++, windows, file-io

我正在编写一个 C++ 程序来读/写一个大文件（可能大于 60GB）。通过谷歌搜索问题，32 位系统中的文件 io 似乎有 2GB 的限制（我使用的是 windows 7 64 位，但我的程序是用 mingw32 编译的）。在我的程序中，我一次将 10 个整数写入文件，所有这些数字都是基于某种算法随机生成的。即使文件大小大于40GB，程序似乎也可以运行，但我无法检查程序读取的数据是否真的是存储在文件中的数据或一些垃圾号码。但无论如何，该程序不会报告任何警告或错误。这真的可以在 32 位程序中读取/写入大于 60GB 的文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T22:17:21.623

Fat32 文件系统的文件大小有限制（我认为最大为 4GB）。默认情况下，Windows 7 绝对不应该使用该文件系统。

[同样在 32 位系统上，您可以使用CreateFileMapping](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366537%28v=vs.85%29.aspx) /MapViewOfFile一次映射到内存中的文件大小有限制。但是，fstream 内部不使用 CreateFileMapping/MapViewOfFile，因此文件大小没有限制（除了文件系统限制）。即使使用 CreateFileMapping，您也可以将较大文件的一部分映射到内存中，因此除了文件系统施加的限制之外，没有其他限制。

# mysql - mysql找不到正确的选择查询

> ID：10066969
> 
> 赞同：0
> 
> 时间：2012-04-08T22:08:28.867
> 
> 标签：mysql

我正在尝试为此表构建选择，但我得到了奇怪的结果。我的桌子：

```
tbl_main
–––––––––––––––––-
id  user_id     name

tbl_friends
–––––––––––––––––-
id  user_id     main_id people

tbl_cats
–––––––––––––––––-
id  user_id     main_id 
```

现在我只知道 user_id。我想获得这些项目的结果（数组）：

*   我需要来自 tbl_main 的 id 列表（结果应按此 tbl_main.id DESC 排序）
*   当 tbl_friends.user_id=user_id AND tbl_friends.main_id=tbl_main.id 时，计算 tbl_friends 中有多少独特的人
*   当 tbl_friends.user_id=user_id AND tbl_friends.main_id=tbl_main.id 时，从 tbl_friends 获取逗号分隔的人员值列表（或数组）
*   当 tbl_cats.main_id = tbl_main.id 时计算 tbl_cats.user_id 的唯一值

这应该是一个查询的结果。我正在尝试许多 COUNT(DISTINCT) 组合，但它不起作用，我完全迷失了。请帮忙。非常感谢

我尝试了这样的事情（见下文）。结果似乎还可以，但它是正确的方法吗（一个查询中选择 3 个）？那么服务器负载呢？它适用于大数据吗？

```
SELECT e.id
  (SELECT GROUP_CONCAT(DISTINCT ef.people) FROM tbl_friends ef WHERE ef.user_id=$user_id AND ef.main_id=e.id) as result_people, 
  (SELECT COUNT(DISTINCT et.user_id) FROM tbl_cats et WHERE et.main_id=e.id) as total

FROM tbl_main e
WHERE e.user_id = $user_id
ORDER BY e.id DESC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T00:42:17.483

我不确定我是否理解您要执行的操作，但这应该返回与您当前查询相同的结果，并且比两个标量相关子查询更有效 -

```
SELECT
    tm.id,
    GROUP_CONCAT(DISTINCT tf.people) AS result_people,
    COUNT(DISTINCT tc.user_id) AS total
FROM tbl_main tm
LEFT JOIN tbl_friends tf
    ON tm.id = tf.main_id
    AND tm.user_id = tf.user_id
LEFT JOIN tbl_cats tc
    ON tm.id = tc.main_id
WHERE tm.user_id = $user_id
GROUP BY tm.id DESC 
```

比较两个查询的 EXPLAIN 输出，看看它们的表现如何。

# cocoa - 如何让 NSWorkspace 在我的命令行程序中工作？

> ID：10066973
> 
> 赞同：2
> 
> 时间：2012-04-08T22:09:11.080
> 
> 标签：cocoa, nsworkspace

我无法在 Google 上找到此问题的答案。我正在 Cocoa 中构建一个命令行实用程序，当我尝试创建一个实例时，`NSWorkspace`我得到一个编译器错误。这是我正在实现的代码`main.m`，非常简单：

```
NSArray *runningApps = [[NSWorkspace sharedWorkspace] runningApplications];
        for (NSRunningApplication *app in runningApps) {
            if (![app terminate])
                [app forceTerminate];
        } 
```

当我尝试编译和运行程序时，这就是我得到的：

```
Undefined symbols for architecture x86_64:
"_OBJC_CLASS_$_NSWorkspace", referenced from:
  objc-class-ref in main.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我在其他应用程序中使用了相同的代码并且没有问题。我知道`NSWorkspace`在中定义`<Foundation/Foundation.h>`并且我已经`<Cocoa/Cocoa.h>`导入了涵盖 Foundation 的内容。关于问题可能是什么的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T22:15:40.983

> 我知道 NSWorkspace 定义在`<Foundation/Foundation.h>`

不，它`<AppKit/NSWorkspace.h>`是由`<AppKit/AppKit.h>`. `<Cocoa/Cocoa.h>`包括`<AppKit/AppKit.h>`和`<Foundation/Foundation.h>`。

您的工具可能仅与 Foundation 链接。也将其更改为链接到 AppKit，或者只是链接到所有 Cocoa。在目标的“Link Binary with Libraries”构建阶段，添加“Cocoa.framework”或“AppKit.framework”。

# objective-c - NSCell -stringValue 调用 -setStringValue？

> ID：10066976
> 
> 赞同：0
> 
> 时间：2012-04-08T22:10:01.410
> 
> 标签：objective-c, cocoa, nstextfield

本质上，这是我在 NSTextFieldCell 子类中的代码：

```
- (void)setStringValue:(NSString *)aString {
    [super setStringValue:aString];
    [self doSomething];
}

- (void)doSomething {
    NSLog(@"%@", [self stringValue]);
} 
```

本质上，我试图让我的子类通知字符串值的变化，当值发生变化时，我希望 NSCell 的子类能够使用该新值做一些事情（使用 -attributedStringValue 会更好，因为我想缓存它以供特殊绘图）。问题是，由于某种原因，调用 -(NSString *)stringValue 会导致调用 -(void)setStringValue 最终变成......

...无限循环。有人可以启发我 - 以及可能的解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T23:00:49.417

可能`stringValue`正在做一些延迟初始化。如果它检测到它没有`stringValue`但可以从其他东西（也许`attributedStringValue`？）派生该值，那么它会派生该值，调用`[self setStringValue:derivedValue]`，然后返回该值。

不过，这确实使生活变得棘手。试试这样的东西？

```
@implementation MyCell ()
{
    BOOL gettingStringValue;
}
@end

- (NSString*)stringValue {
    gettingStringValue = YES;
    NSString* stringValue = [super stringValue];
    gettingStringValue = NO;
    return stringValue; 
}

- (void)setStringValue:(NSString *)aString {
    [super setStringValue:aString];
    if (!gettingStringValue)
        [self doSomething];
} 
```

# php - 教义：获取多对多关系的所有孩子

> ID：10066977
> 
> 赞同：1
> 
> 时间：2012-04-08T22:10:14.387
> 
> 标签：php, sql, symfony, doctrine

我需要一个 DQL 查询，它将返回所有`posts`给定的`tag`.

`posts`并且`tags`有一个多对多的关系，给定一个 tag.slug 我应该能够获得与该标签相关的所有帖子，但是如何？

更新：

我将 Doctrine 2.1 与 Symfony 2 一起使用，我的实体如下所示：

```
/**
 * @ORM\Entity
 * @ORM\Table(name="articles__posts")
 */
class ArticlePost
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\ManyToMany(targetEntity="ArticleTag", inversedBy="posts")
     * @ORM\JoinTable(name="articles__posts_tags")
     */
    protected $tags;
}

/**
 * @ORM\Entity
 * @ORM\Table(name="articles__tags")
 * @UniqueEntity(fields="slug")
 */
class ArticleTag
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\ManyToMany(targetEntity="ArticlePost", mappedBy="tags")
     */
    protected $posts;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T10:50:42.267

如果您只想使用一个标签进行搜索，请尝试以下操作：

```
SELECT post FROM ArticlePost post
JOIN post.tags tag
WHERE tag.slug = {$tagSlug} 
```

如果要搜索多个标签，只需将条件更改为：

```
... WHERE tag.slug IN ( {$slug1}, {$slug2}, ... {$slugN} ) 
```

# android - 使用 libgdx 捕捉凹/凸图像的触摸

> ID：10066981
> 
> 赞同：0
> 
> 时间：2012-04-08T22:10:29.533
> 
> 标签：android, touch, libgdx, concave, convex

我正在创建一个在 Android 中使用 libgdx 的应用程序。

当最终用户仅单击纹理的可见部分时，我需要添加一个触摸侦听器，无论它是凹形图像还是凸形图像。

我怎样才能做到这一点？

我记得有一个不错的想法（尽管我从未见过它的实现），即为每个纹理提供一种独特的颜色，并在绘制其真实内容之前用这种颜色绘制其可见部分，如果触摸完成在颜色上，表示最终用户点击了图像。是否可以对 libgdx 使用相同的技术？如果是这样，怎么做？

当然，对于我选择旋转/缩放的图像也是如此。

# android - 如何使用 ViewPager 对片段使用首选项？

> ID：10066982
> 
> 赞同：4
> 
> 时间：2012-04-08T22:10:32.810
> 
> 标签：android, android-fragments, sharedpreferences, android-viewpager

我正在使用 ViewPager 浏览不同的片段。它正在工作，但现在我想为每个片段添加设置，就像您可以通过以下方式使用活动一样：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.xml.prefs);
} 
```

但是当我放入`addPreferencesFromResource(R.xml.prefs);`我的 Fragment Eclipse 告诉我`addPreferencesFromResource(R.xml.prefs);`不存在时，如果我使用 FragmentActivity 也是如此。那么，如何在片段中使用首选项？我是使用 Fragments 设计的新手，与您在活动中的操作相比，一切都大不相同：/

谢谢 ：）

**==编辑==**

我没有得到 FC，但它什么也不做，它是调用类 LCprefs() 的代码，此代码位于片段上：

```
@Override
    public boolean onOptionsItemSelected(MenuItem item) {
        if(DEBUG) Log.i(TAG, "onOptionsItemSelected(MenuItem item)");
        switch(item.getItemId())
        {
        case R.id.preferences:
            new LCprefs();
            break;
        case R.id.add:
            break;
        case R.id.load:
            break;
        case R.id.save:
            break;
        }
        return false;
    } 
```

它是 LCprefs 类：

```
import android.os.Bundle;
import android.preference.PreferenceFragment;
import android.util.Log;

    public class LCprefs extends PreferenceFragment{

        String TAG;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);
            Log.i(TAG, "LCprefs onCreate()");
            addPreferencesFromResource(R.xml.prefslc);
        }

    } 
```

它是位于 xml 文件夹中的 prefslc.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

    <PreferenceCategory android:title="Varios" >

        <CheckBoxPreference
            android:defaultValue="false"
            android:key="cbFullscreen"
            android:summary="Aplicacion fullscreen"
            android:title="Fullscreen" />

    </PreferenceCategory>

</PreferenceScreen> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T22:19:16.297

片段需要是[PreferencesFragment](http://developer.android.com/reference/android/preference/PreferenceFragment.html)的一个实例。链接中的示例：

```
public static class PrefsFragment extends PreferenceFragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Load the preferences from an XML resource
        addPreferencesFromResource(R.xml.preferences);
    }
} 
```

# php - PHP DHT info_hash 列表？

> ID：10066985
> 
> 赞同：5
> 
> 时间：2012-04-08T22:11:13.187
> 
> 标签：php, bittorrent, dht

我想（通过 PHP）收集当前正在下载的 info_hashes 或搜索 DHT。

我见过使用 DHT 作为搜索引擎的 BTDigg，我想做类似的事情。

另外，在我获得哈希后，如何将哈希转换为种子，以便获得标题等信息？（再次通过 DHT 使用 PHP）。

我先尝试研究 -[查询 DHT 服务器](https://stackoverflow.com/questions/9340213/query-dht-server)尝试通过 PHP 运行 DHT 查询，我尝试进行修改，但没有运气。我也试过[http://projects-deim.urv.cat/trac/p2pweb/browser/trunk/dht/dht_agg?rev=1](http://projects-deim.urv.cat/trac/p2pweb/browser/trunk/dht/dht_agg?rev=1)但它给了我几个错误，经过多次修复它仍然没有工作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T17:02:40.807

要实现 DHT 节点，您可能需要阅读 DHT 规范：

[http://www.bittorrent.org/beps/bep_0005.html](http://www.bittorrent.org/beps/bep_0005.html)

它描述了消息格式。如果您不熟悉底层 DHT，您可能还需要阅读 kademlia 论文：

[Kademlia：基于 XOR 度量的点对点信息系统](http://www.scs.stanford.edu/~dm/home/papers/kpos.pdf)

一旦你在 DHT 上启动并运行，并且你开始看到信息散列飞过，你需要实现一个 bittorrent 客户端。或者至少是为了建立对等连接并讨论bittorrent协议的一个子集，这在此处进行了描述：

[http://www.bittorrent.org/beps/bep_0003.html](http://www.bittorrent.org/beps/bep_0003.html)

您通常只需要能够建立 TCP 连接并握手，就好像您什么都没有。然后，要下载元数据（或 .torrent 文件），您需要支持`ut_metadata`位于通用扩展协议之上的扩展，如下所述：

[http://www.bittorrent.org/beps/bep_0010.html](http://www.bittorrent.org/beps/bep_0010.html)

ut_metadata 扩展在这里描述：

[http://www.bittorrent.org/beps/bep_0009.html](http://www.bittorrent.org/beps/bep_0009.html)

那些你有你看到的散列的元数据，你应该基本上被设置。然后，只需从 torrent 文件中提取和索引信息，例如名称、文件名、文件大小等（实际上，您最终会得到 torrent 文件的 info-dict，但这是重要的部分）。

鉴于这是一项相当多的工作，您可能希望考虑使用已经执行此操作的库，并以某种方式将它们拉入 php.ini 中。例如，您可能想看看[libtorrent](http://libtorrent.org)。

# php - 更新多个项目

> ID：10066989
> 
> 赞同：1
> 
> 时间：2012-04-08T22:11:52.060
> 
> 标签：php, jquery, ajax

我想实时更新一些项目而不必更改页面。

我已经将类似的东西用于另一个每 5 秒更新一次的项目。

我尝试为每个项目都这样做，但它使我的网站非常慢。

有人告诉我它可以用 jQuery 来完成，但我不知道具体是怎么做的。

**我想做的事：**

使用 PHP 我将从我的数据库中获取信息，这些信息将显示为“1”或“0”

我需要更新的将是这些：（如果它们是 1）

```
<a id="first_icon" style="background: url(/images/first.gif); height:23px; width:23px; float:left; margin-right:3px;" href="first.php" title="First"></a>
<a id="sec_icon" style="background: url(/images/first.gif); height:23px; width:23px; float:left; margin-right:3px;" href="sec.php" title="Second"></a>
<a id="third_icon" style="background: url(/images/first.gif); height:23px; width:23px; float:left; margin-right:3px;" href="third.php" title="Third"></a>
<a id="four_icon" style="background: url(/images/first.gif); height:23px; width:23px; float:left; margin-right:3px;" href="four.php" title="Fourth"></a> 
```

如果它们是“0”，则图标“id”将类似于“first_icon_2”

我怎样才能一次得到所有的请求？

在此先感谢，我已经尝试这样做了大约一个月。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T22:40:54.207

您要使用的是 ajax 调用。jQuery 有一个`.ajax()`功能：[http](http://api.jquery.com/jQuery.ajax/) ://api.jquery.com/jQuery.ajax/非常简单。

本质上，您需要做的是设置一个 PHP 脚本来执行您需要完成的任何处理。任何在页面上回显的内容都将通过`ajax`调用返回。如果您要处理多个项目，则应查看`JSON`.

由于您似乎需要返回多个值（每个图标为 1），因此您需要在 PHP 中创建一个数组。该数组将如下所示：

```
$icons = array("first_icon => 1, "second_icon => 0, "third_icon" => 0, "fourth_icon => 1); 
```

然后，您可以使用`json_encode`将数组编码为在您的 javascript 端可读的字符串：

```
$iconsJSON = json_encode($icons);
echo $iconsJSON; 
```

如果您在主页（带有 javascript 的页面）上设置 AJAX 功能，如下所示，您将能够引用任何`icon`键。

```
$.ajax({
dataType: 'JSON',
type: 'POST',
url: api_url+'client/'+client.id+'.json', 
data: {
    variable1: 'value',
    variable2: 'value',
    variable3: 'value'
},
success: function(data) {
    // On success perform this function
    var icons = data;
},
error: function(data) {
    // On failure perform this function
}
}); 
```

如果您需要更多指导，我建议您阅读此资源：[http ://www.jquery4u.com/json/ajaxjquery-getjson-simple/](http://www.jquery4u.com/json/ajaxjquery-getjson-simple/)

# xcode4 - Xcode 4 External Build System -> Product -> Edit Scheme... -> Run -> Executable -> a.out 灰显

> ID：10066990
> 
> 赞同：1
> 
> 时间：2012-04-08T22:12:17.990
> 
> 标签：xcode4

我通过编程书籍中的大量示例练习，通常使用 a.out 作为默认输出。出于某种奇怪的原因，Xcode 4 似乎在一夜之间决定将 a.out 从 Run -> Executable 选项中的 Edit Schemes 窗口“灰显”（图片链接如下）。

现在，我可以通过将我的输出程序命名为默认 a.out 以外的名称来解决这个问题，但我想了解为什么这个问题会在一夜之间发生（我在睡觉前用 a.out 创建了一个 OpenGL 练习程序）。我没有更新 Xcode 4（当前版本 4.0.2）。我在网上查看并读到 a.out 在 linux 上被识别为可执行文件，但在 mac 上可能无法识别，所以我运行了以前通过双击创建的 a.out 二进制文件并通过终端运行：工作正常。

我将尝试下载 Xcode 4.2，看看是否能解决我的问题，但我真的很想知道为什么会这样。有没有其他人经历过这个？

[![在此处输入图像描述](../Images/3b6159eb518498b92b398ea62a9a02fd.png)](https://i.stack.imgur.com/mZauO.png)

# c++ - 我的自定义 streambuf 类中的内存泄漏

> ID：10066991
> 
> 赞同：0
> 
> 时间：2012-04-08T22:12:21.203
> 
> 标签：c++, memory-management, memory-leaks, iostream

我有一个派生自 std::streambuf 的类。我无法弄清楚它为什么或在哪里泄漏；根据我正在使用的工具，我的代码在它看起来之前的最后一点是在这个类的某个地方（但它不能提取行号）

这个想法是该类可以保存将数据同步到的任意数量的流缓冲区。（例如，std::cout 和 a ofstream.rdbuf）我将数据存储在一个字符串中，直到我得到 std::endl，我在其中写入所有流缓冲区

谁能指出它可能泄漏内存的地方？

这是我的标题：

```
#ifndef _MY_STREAM_BUF_H
#define _MY_STREAM_BUF_H

#include <iostream>
#include <algorithm>
#include <list>

#include "../../../Interface/EngineDefs.h"

namespace MyEngine
{
    class MyStreamBuf : public std::streambuf
    {
    public:
        MyStreamBuf();
        ~MyStreamBuf();

        void AddStream(std::streambuf* sb);
        void RemoveStream(std::streambuf* sb);
        bool IsStreamAdded(std::streambuf* sb);

    private:
        std::list<std::streambuf*> mStreamBufs;
        std::string mLine;

        int32_t overflow(int32_t c);
        int32_t sync();

    };
}

#endif 
```

cpp文件：

```
#include "../../../Include/Core/Logging/MyStreamBuf.h"

namespace MyEngine
{
    MyStreamBuf::MyStreamBuf() : std::streambuf()
    {

    }

    MyStreamBuf::~MyStreamBuf()
    {
        mStreamBufs.clear();
        mLine.clear();
    }

    void MyStreamBuf::AddStream(std::streambuf* sb)
    {
        if (sb)
            mStreamBufs.push_back(sb);
    }

    void MyStreamBuf::RemoveStream(std::streambuf* sb)
    {
        if (sb)
            mStreamBufs.remove(sb);
    }

    bool MyStreamBuf::IsStreamAdded(std::streambuf* sb)
    {
        if (sb)
            return (std::find(mStreamBufs.begin(),mStreamBufs.end(),sb) != mStreamBufs.end());
        else
            return false;
    }

    int32_t MyStreamBuf::overflow(int32_t c)
    {
        int32_t r1 = 0, r2 = 0;

        if (c == EOF)
           return !EOF;
        else
        {
            mLine += c;
            return r1 == EOF || r2 == EOF ? EOF : c;
        }
    }

    int32_t MyStreamBuf::sync()
    {
        int32_t res = 0;

        for(std::list<std::streambuf*>::iterator it = mStreamBufs.begin(); it != mStreamBufs.end(); ++it)
        {
            if (*it)
            {
                (*it)->sputn(mLine.c_str(),mLine.length());
                res &= (*it)->pubsync();
            }
        }               

        mLine.clear();

        return res == 0 ? 0 : -1;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T02:32:22.143

您没有破坏`streambuf`对象，因此这是典型的内存泄漏。

```
void MyStreamBuf::RemoveStream(std::streambuf* sb)
{
    delete sb; // need this to flush and avoid leak

    if (sb) // do you really need to check if it's null?
        mStreamBufs.remove(sb);
} 
```

请注意，这并不是真正的最佳解决方案，因为拥有指向 a 的指针`streambuf`并不意味着所有权。例如，`std::cout.rdbuf()`可能是您要添加的内容，但不是您想要添加的内容`delete`。（我不知道你的班级应该做什么。）

您需要确定所有权语义。要么`MyStreamBuf`拥有所有`mStreamBufs`，要么不拥有，或者您可以为每个添加所有权标志，但无论如何每个所有者都需要在某个时候销毁其对象。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-08T22:20:09.653

您是否认为 std::streambuf 没有虚拟析构函数？实际上（如果你将使用动态多态性）你的析构函数不会被调用当然 mStreamBufs 的元素真的没有被删除..

# c# - 以更易读的格式显示双精度科学记数法

> ID：10066992
> 
> 赞同：-1
> 
> 时间：2012-04-08T22:12:43.620
> 
> 标签：c#, string-formatting, scientific-notation

我正在通过第三方库从 PLC 读取一个值，但是当保存为双精度值时，该值似乎是科学计数法。

然而， PLC 中的值是`1.234`，在调试应用程序时，存储在 double 中的值是`5.27326315571927E-315`

我将其显示在标签中，但是我想将其显示`1.234`为科学记数法。

我怎样才能转换这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T22:27:32.367

作为一个疯狂的猜测，我认为你应该从你的库中读取 4 个字节（浮点数）而不是双倍（8 个字节）。

因为`5.27326315571927E-315`几乎*为零*。

```
double d = 5.27326315571927E-315;
byte[] b = BitConverter.GetBytes(d);
float f = BitConverter.ToSingle(new byte[] { b[0], b[1], b[2], b[3] }, 0); 
```

f`1.2345`现在是

# wordpress - 无法从 1 个服务器调用 4sq API，其他服务器 = OK

> ID：10066993
> 
> 赞同：0
> 
> 时间：2012-04-08T22:12:59.987
> 
> 标签：wordpress, api, foursquare

在 2 个不同的服务器上获得 2 个（Wordpress）站点（与 2 个不同的托管合作伙伴）

我曾经能够在两台服务器上调用 4sq API，而无需使用 OAuth 方法，没有任何问题。

上周，在一台服务器上，我收到一个错误（未指定），我用 PHP 编写的 4sq 例程停止工作。

使用的 PHP 代码：

```
 $response = wp_remote_get( 'https://api.foursquare.com/v2/venues/<venueid>?client_id=<client-id>&client_secret=<client-secret>&v=20120408' );
                        if( is_wp_error( $response ) ) {
                           echo 'Something went wrong!';
                        } else {
                           echo 'Response:<pre>';
                           print_r( $response );
                           echo '</pre>';
                        } 
```

必须是 Foursquare 突然阻止我的网站（显然不再工作的网站）以某种原因调用它的 API 的东西。

这不可能是超载，因为我的网站一天（现在）有数百名访问者。

已经向 api[at]foursquare.com 发送了一封电子邮件，但没有得到他们的回复（也不是通过 twitter）

有任何想法吗 ？我可以使用任何简单的（不是 OAUTH）PHP 例程从 4sq 获取更重要的错误消息，这样我就可以看到有什么问题？

有什么方法可以联系 Foursquare 以便他们回复我的请求？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T10:03:02.180

您的主机可能更改了某些服务器设置或其网络配置。您可以从该服务器访问其他服务吗？在这两种情况下，您都应该询问您的房东。

# mysql - MYSQL 如何选择同时具有另一个表的 WHERE EXISTS 条件和主表中的正常 WHERE 条件的数据？

> ID：10066996
> 
> 赞同：1
> 
> 时间：2012-04-08T22:13:12.127
> 
> 标签：mysql

如果表 2 中的 SubjectB 列与表 1 中的 Subject A 列匹配，则以下代码将获取数据。

```
SELECT
UID
FROM
Table1
WHERE EXISTS (
    SELECT 1
    FROM Table2
    WHERE SubjectB = SubjectA
) 
```

我想在右括号后添加一个附加条件：

```
AND another_column_from_table1 > 10 
```

但是该语法似乎无效。使用 WHERE EXISTS ... AND 条件进行查询的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T22:29:21.540

鉴于您的初始查询，您应该能够编写：

```
SELECT UID
  FROM Table1
 WHERE EXISTS (SELECT 1
                 FROM Table2
                WHERE SubjectB = SubjectA
              )
   AND another_column_from_table1 > 10; 
```

简单地将条件添加到查询末尾不应该有语法错误。从评论来看，这似乎在语法上被接受，但不产生任何输出。调试它的明显技术是：

```
SELECT UID, another_column_from_table1
  FROM Table1
 WHERE EXISTS (SELECT 1
                 FROM Table2
                WHERE SubjectB = SubjectA
              ) 
```

这将显示列中的值；据推测，由于添加额外过滤条件时结果集为空，因此该选择的第二列中的值都将小于 10（或 null）。

如果 Table1 和 Table2 中的条目之间存在一对一的关系，那么您可以使用 JOIN 代替：

```
SELECT t1.UID
  FROM Table1 AS t1
  JOIN Table2 AS t2 ON t2.SubjectB = t1.SubjectA
 WHERE t1.another_column_from_table1 > 10; 
```

如果 Table1 中的每一行在 Table2 中可能有几行，那么您需要添加 DISTINCT：

```
SELECT DISTINCT t1.UID
  FROM Table1 AS t1
  JOIN Table2 AS t2 ON t2.SubjectB = t1.SubjectA
 WHERE t1.another_column_from_table1 > 10; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T22:20:28.793

你为什么不运行这个？

```
SELECT UID FROM Table1, Table2
WHERE SubjectB = SubjectA AND another_column_from_table1 > 10 
```

可能加入会不那么反模式:)