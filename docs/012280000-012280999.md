# StackOverflow 问答 12280000-12280999

# .net - 如何使用 VB.net 获取 excel 文件的确切行数？

> ID：12280007
> 
> 赞同：1
> 
> 时间：2012-09-05T11:02:31.090
> 
> 标签：.net, vb.net, excel

我刚开始使用 VB.net，在我的应用程序中，我需要在 excel 文件中使用确切的行数我看了这篇文章 [Reading line count using vb.net](https://stackoverflow.com/questions/6829367/reading-line-count-using-vb-net) 我尝试了所有答案，但是从来没有得到确切的行数，我也在一些网站上尝试过其他代码，但也没有！有人可以帮我吗？

你好实际上我使用 SQL SERVER 2008 我试过这段代码

```
Imports System.Diagnostics.Process
Imports System.IO
Imports System.Data.DataTable
Imports Microsoft.Office.Tools
Imports Excel
Imports Microsoft.Office.Interop

Public Class Form1
    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As  System.EventArgs) Handles Button1.Click
        Dim selectedFile As String = String.Empty

        OpenFileDialog1.ShowDialog()
        selectedFile = OpenFileDialog1.FileName

        If (selectedFile IsNot Nothing) Then
            ListBox1.Items.Add(selectedFile)

        End If
    End Sub

    Private Sub Button6_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button6.Click
        Dim fullPath As String
        Dim fileResult As String
        Dim numRow As Integer
        fullPath = Path.GetFullPath(ListBox1.SelectedItem)

        fileResult = Path.GetFileName(fullPath)
        Dim file_count As Integer = File.ReadAllLines(fullPath).Length
        MsgBox(file_count) 
```

但是再次计数不正确，我真的不知道为什么！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-27T18:13:19.070

我想要使​​用 Microsoft.Office.Interop.Excel 和 vb.net 2010 将 Excel 工作表导入 sql 2008 的例程使用的行，并且只使用：

usedRowsCount = xlWorksheet.UsedRange.Rows.Count

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T14:57:45.323

您好，我终于得到了解决方案：

```
Imports Microsoft.Office.Interop.Excel
Imports System.Data.DataTable
Imports Microsoft.Office.Interop

private Sub Button6_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button6.Click
    Dim fullPath As String
    Dim fileResult As String
    Dim numRow As Integer
    fullPath = Path.GetFullPath(ListBox1.SelectedItem)

    fileResult = Path.GetFileName(fullPath)

    Dim obook As Excel.Workbook
    Dim oapp As Excel.Application
    oapp = New Excel.Application
    obook = oapp.Workbooks.Open(fullPath)
    numRow = 3

    While (obook.ActiveSheet.Cells(numRow, 1).Value IsNot Nothing)
        numRow = numRow + 1
    End While

    MsgBox(numRow)

End Sub 
```

并且您必须添加以下参考：

```
Microsoft Excel 12.0 Library
Microsoft Office 12.0 Library
Microsoft Office Tools v9.0
Microsoft visual Basic for application extensibility 
```

希望能帮助到你 ：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T11:59:54.470

将excel文件的数据放入数据表并计算行数。

```
Public Class Form1

    Private Sub getexcelfile_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        Dim excelfile As New OpenFileDialog()
        excelfile.ShowDialog()
        If (excelfile.ShowDialog() = DialogResult.Cancel) Then
            Return
        Else
            Dim file As String = excelfile.FileName
            Dim str As String = "Provider=Microsoft.Jet.OLEDB.4.0;" + "Data Source=" + file + ";Extended Properties=Excel 8.0;"
            Dim con As New OleDb.OleDbConnection(str)
            con.Open()
            Dim ds As New OleDb.OleDbDataAdapter("Select * from [Sheet1$]", con)
            Dim dt As New DataTable()
            ds.Fill(dt)
            Dim rowcount As Integer
            rowcount = dt.Rows.Count()

        End If

    End Sub
End Class 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-06T04:22:21.743

```
Public Class Form1

Private Sub getexcelfile_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim excelfile As New OpenFileDialog()
    excelfile.ShowDialog()
    If (excelfile.ShowDialog() = DialogResult.Cancel) Then
        Return
    Else
        Dim file As String = excelfile.FileName
        Dim str As String = "Provider=Microsoft.Jet.OLEDB.4.0;" + "Data Source=" + file + ";Extended Properties=Excel 8.0;"
        Dim con As New OleDb.OleDbConnection(str)
        con.Open()
        Dim ds As New OleDb.OleDbDataAdapter("Select * from [Sheet1$]", con)
        Dim dt As New DataTable()
        ds.Fill(dt)
        Dim rowcount As Integer
        rowcount = dt.Rows.Count()

    End If

End Sub
End Class 
```

# c - 将文本文件中的“查找”模式替换为“替换”作为输入和输出文件的 C 程序应该具有替换的模式

> ID：12280008
> 
> 赞同：0
> 
> 时间：2012-09-05T11:02:33.100
> 
> 标签：c, replace

我在网上搜索但没有得到如何做到这一点的确切想法，因为 m 能够编写的代码只是针对该模式的一次出现，但如果该模式有不同的出现行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T11:11:53.450

如果您使用的是 Unix 或类似系统（如 Linux 或 MacOS X），那么您已经有一个命令行程序来执行此操作：`sed`.

否则，您必须从原始文件中读取并写入新文件，在读取和写入时替换文本。之后，您必须将新文件重命名为旧的原始文件。

至于文本的实际查找，如果它是一个固定的字符串，您可以使用例如`strstr`，否则请查看[正则表达式](http://en.wikipedia.org/wiki/Regular_expressions)。

**编辑：**如何做到这一点[`sed(1)`](http://linux.die.net/man/1/sed)：

```
$ sed -i 's/xyz/abc/g' infile.txt 
```

上面的命令将读取`infile.txt`、替换所有出现的文本`xyz`并将`abc`其写回`infile.txt`。

**编辑：**如何搜索/替换：

```
FILE *input = fopen("input.txt", "r");
FILE *output = fopen("temp.txt", "w");

char buffer[512];
while (fgets(buffer, sizeof(buffer), input) != NULL)
{
    /* The text to find */
    static const char text_to_find[] = "xyz";

    /* The text to replace it with */
    static const char text_to_replace[] = "abc";

    char *pos = strstr(buffer, text_to_find);
    if (pos != NULL)
    {
        /* Allocate memory for temporary buffer */
        char *temp = calloc(
            strlen(buffer) - strlen(text_to_find) + strlen(text_to_replace) + 1, 1);

        /* Copy the text before the text to replace */
        memcpy(temp, buffer, pos - buffer);

        /* Copy in the replacement text */
        memcpy(temp + (pos - buffer), text_to_replace, strlen(text_to_replace));

        /* Copy the remaining text from after the replace text */
        memcpy(temp + (pos - buffer) + strlen(text_to_replace),
               pos + strlen(text_to_find),
               1 + strlen(buffer) - ((pos - buffer) + strlen(text_to_find)));

        fputs(temp, output);

        free(temp);
    }
    else
        fputs(buffer, output);
}

fclose(output);
fclose(input);

/* Rename the temporary file to the original file */
rename("input.txt", "temp.txt"); 
```

此代码已经过[测试可以工作](http://ideone.com/2kgeW)。

**注意：**如果你不知道*指针算法*是什么，那么上面的代码可能很难理解和理解，你只需要相信我它会做它应该做的事情。:)

# ruby-on-rails - 设计：在条件 X 上只允许 1 个单个控制器#action 的干净方法？

> ID：12280015
> 
> 赞同：0
> 
> 时间：2012-09-05T11:02:47.037
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, cancan

如果满足条件 X，允许登录用户仅访问某个控制器#action 的最佳方法是什么？

*   例如，用户已停用他的帐户（ user.is_deleted == true ）
*   如果用户登录我想将他重定向到 /reactivate
*   如果用户尝试了任何其他 URL，例如 /profiles /search 它应该重定向到 /reactivate

我已经在 applicationcontroller 中尝试了 before_filters，但登录和注销方法除外，但它们无法正常工作，与其他操作混淆，所以我真的在寻找一种干净的方法来做到这一点，有人建议吗？

目前我正在使用

```
def after_sign_in_path_for(resource)
  @user = User.where(:id => current_user.id).first

  if @user.is_deleted == true
    "/reactivate"
  end 
```

结尾

**但是 **这仅适用于用户登录**** 之后他们可以做类似 /home /search 等的事情所以我想“锁定”应用程序。我曾想过，也许需要使用 can can 之类的东西来代替自定义代码。

你知道一个工作可维护的干净的方法来做到这一点吗？

编辑：

做了这样的事情（你看到凌乱和休息）

```
 def welcome_redirect
    if user_signed_in?
      if not current_user.welcome == 0
        if not params[:controller] == "home" && params[:action] == "welcome"
          if not params[:controller] == "modal"
            if not params[:controller] == "profiles"
              redirect_to profiles_path
            end
          end
        end
      end
    end
  end 
```

编辑2：

这似乎有效：

```
 def ensure_account_not_deleted
    if user_signed_in?
      @user = User.where(:id => current_user.id).first
      if params[:controller] != "users" && params[:action] != "reactivate" && @user.is_deleted == true
        redirect_to '/reactivate'
      end
    end
  end 
```

*   另一个之前的过滤器弄乱了一些值，导致我刚刚发现它不起作用！感谢所有导致此解决方案的建议*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:37:59.800

有什么问题：

```
#Application Controller

before_filter :ensure_account_not_deleted

def ensure_account_not_deleted
  if params[:controller] != "users" && parmas[:action] != "reactivate" && @user.is_deleted == true
    redirect_to '/reactivate'
  end
end 
```

**编辑：**

我编写了代码来排除重新激活一遍又一遍的重定向。

我在这里假设两件事：

1.  处理重新激活的控制器是 UsersController。

2.  该动作称为“重新激活”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:44:48.320

我也有类似的检查，如果用户帐户被停用，那么他不应该能够访问该应用程序。我做了

```
class SessionsController < Devise::SessionsController
  ....
  def create
    resource = build_resource
    #to check if user is active or the organisation he belongs to is active
    if current_user and current_user.organisation and (!current_user.is_active or !current_user.organisation.is_active)
      sign_out current_user
      flash[:notice] = "Account deactivated. Contact Admin."
      redirect_to root_path and return
    end
    super
  end
  ....
end 
```

并添加

```
before_filter :authenticate_user! 
```

对所有控制器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T12:55:34.397

我有 'root_path 作为 root :to => "sessions#new"'。在我的应用程序中，每个用户（除了超级管理员）都属于一个组织。超级管理员可以激活/停用用户/组织。如果用户被停用，则不应允许他登录。如果组织被停用，则不应允许属于该组织的用户登录。我已经覆盖了会话控制器，因为 1) 使用 ip 地址 n 时间维护用户登录/注销时间以进行报告。2) 禁止不属于公司的用户登录。3）检查用户是否活跃或他所属的组织是否活跃

# c#-4.0 - 从 ASP.NET MVC 3 升级到 MVC 4，参数被替换为路由

> ID：12280017
> 
> 赞同：3
> 
> 时间：2012-09-05T11:02:50.527
> 
> 标签：c#-4.0, asp.net-mvc-4, asp.net-mvc-routing

我最近将我的项目从 MVC3 升级到 MVC4，从那时起，我的一些操作参数被错误地传递。

该操作具有以下签名：

```
public JsonResult FooAction(int id, int id2, string name, string name2, List<Object1> templates, Dictionary<string, string> dictionary1, Dictionary<string, List<string>> dictionary2); 
```

如果 JSON 调用传递一个空数组：

```
"dictionary2":[] 
```

然后`dictionary2`设置为路线：

```
{key = "controller", value = "MyController"}
{key = "action", value = "MyAction"}
{key = "id", value = "123123"} 
```

显然我希望它只是一本空字典 - 有什么办法可以防止这种行为吗？

[编辑] 我应该提到我正在使用默认路由行为：

```
routes.MapRoute(
    "Default",
    "{controller}/{action}/{id}",
    new { controller = "Home", action = "Index", id = "" } 
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T15:20:53.877

我设法通过`[Bind(Prefix = "dictionary2")]`在参数定义之前添加来获得所需的行为，即

```
public JsonResult FooAction(int id, int id2, string name, string name2, List<Object1> templates, Dictionary<string, string> dictionary1, [Bind(Prefix = "dictionary2")] Dictionary<string, List<string>> dictionary2); 
```

但它也打败了我。

或者其他方式，通过实现自己的`ModelBinder`：

```
public class StringDictionaryModelBinderProvider: IModelBinderProvider
{
    public IModelBinder GetBinder(Type modelType)
    {
        if (modelType == typeof (Dictionary<string, string>) || modelType == typeof (IDictionary<string, string>))
            return new StringDictionaryModelBinder();

        return null;
    }

    private class StringDictionaryModelBinder : DefaultModelBinder
    {
        public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
        {
            bindingContext.FallbackToEmptyPrefix = false;
            return base.BindModel(controllerContext, bindingContext);
        }
    }
} 
```

并在应用程序启动中：

```
ModelBinderProviders.BinderProviders.Add(new StringDictionaryModelBinderProvider()); 
```

但是还是打不过我。

# oracle - FLASHBACK 命令为未知命令 Oracle 11gR2 Express Edition

> ID：12280018
> 
> 赞同：1
> 
> 时间：2012-09-05T11:02:53.963
> 
> 标签：oracle, oracle11g

我在 Oracle 11gR2 数据库中创建了一个表。我有一个名为*store*的用户，它被授予角色*connect*和*resource*。上面提到的表是由 user *store*创建的。现在我使用命令 **DROP TABLE my_table 删除了表；** 现在，我想恢复已删除的表，使用 FLASHBACK 命令作为 **FLASHBACK TABLE BIN$yrMKlZaVMhfgNAgAIMenRA==$0 TO BEFORE DROP;** 但它显示错误为“未找到闪回命令”。Oracle 11g 中是否删除了闪回功能？

# python - 如何使用python根据单元格值获取Excel单元格行和列

> ID：12280022
> 
> 赞同：1
> 
> 时间：2012-09-05T11:02:57.047
> 
> 标签：python, xlrd

如何根据python中的xl单元格值识别单元格行和单元格列...

sheet.cell(row,col) 给出值，但如果我们有值，那么如何获取 shell 的相应行和列值

我进行了搜索，但我可以知道如何根据单元格值识别单元格详细信息..

请帮助我提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:17:10.917

您将必须遍历工作表，然后遍历工作表中的行，然后遍历一行中的单元格。您必须跟踪行号和列号，因为 xlrd Cell 类似乎没有存储：

```
import sys
import xlrd

_ordA = ord('A')

def find_val_in_workbook(wbname, val):
    wb = xlrd.open_workbook(wbname)
    for sheet in wb.sheets():
        for rowidx in range(sheet.nrows):
            row = sheet.row(rowidx)
            for colidx, cell in enumerate(row):
                if cell.ctype != 2:
                    continue
                if cell.value != val:
                    continue
                if colidx > 26:
                    colchar = chr(_ordA + colidx / 26)
                else:
                    colchar = ''
                colchar += chr(_ordA + colidx % 26)
                print '{} -> {}{}: {}'.format(sheet.name, colchar, rowidx+1, cell.value)

find_val_in_workbook(sys.argv[1], float(sys.argv[2])) 
```

`.xls`使用文件名和要搜索的值调用脚本

# performance - 升级 Grails 2.1 后，在 Mac Os X 上编译 gsps 非常慢（资源/Less 插件）

> ID：12280023
> 
> 赞同：3
> 
> 时间：2012-09-05T11:03:07.557
> 
> 标签：performance, memory, gsp, grails-2.0

我们注意到，在最近从 1.37 -> 2.1 升级后，我们的堆栈在编译 gsp 文件时非常慢。这似乎很断断续续 - 如果我重新启动我的 Mac 并启动我的堆栈 - 页面加载很好，或者如果我把它放在一夜之间，否则我会在一天的一半时间里突然页面需要几分钟才能启动。

**资源/少插件？**

我们正在使用资源插件 + less（最近添加） - 所以可能是这样，但是我们的团队成员在 Linux 上运行并且没有遇到任何问题。

**记忆？**

在研究解决方案时，注意到很多人都说 Grails 2 更需要内存……我的堆栈使用以下设置运行：

```
/Library/Java/Home/bin/java -server -Xmx768M -Xms768M -XX:PermSize=256m -XX:MaxPermSize=256m -Dfile.encoding=UTF-8 -Xdock:name=Grails -Xdock:icon=/Users/andrewbredon/springsource/grails-2.1.0/media/icons/grails.icns -Xms512M -Xmx512M -XX:MaxPermSize=1024m -classpath /Users/andrewbredon/springsource/grails-2.1.0/lib/org.codehaus.groovy/groovy-all/jars/groovy-all-1.8.6.jar:/Users/andrewbredon/springsource/grails-2.1.0/dist/grails-bootstrap-2.1.0.jar:/System/Library/Java/Support -Dgrails.home=/Users/andrewbredon/springsource/grails-2.1.0 -Dtools.jar=/Library/Java/Home/lib/tools.jar org.codehaus.groovy.grails.cli.support.GrailsStarter --main org.codehaus.groovy.grails.cli.GrailsScriptRunner --conf /Users/andrewbredon/springsource/grails-2.1.0/conf/groovy-starter.conf --classpath   console 
```

有人遇到类似问题吗？有人有什么想法吗？

# scala - 在类型擦除下使用不同的证据参数重载

> ID：12280026
> 
> 赞同：1
> 
> 时间：2012-09-05T11:03:18.187
> 
> 标签：scala, overloading, type-erasure

给定类型擦除，解决以下重载定义的最有效和最优雅的方法是什么：

```
trait Signal

trait Step[T] {
  def ar(implicit ev: T <:< Boolean): Signal
  def ar(implicit ev: T <:< Float  ): Signal
} 
```

不使用不同的名称`Boolean`和`Float`参数化？理想情况下是这样，`T <:< Boolean union Float`但那不存在......我可以不用额外的隐式间接来做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T11:08:29.090

额外的间接是这样的：

```
object Step {
  sealed trait SignalSource[T] { def toFloat(t: T): Float }
  implicit object BooleanSource extends SignalSource[Boolean] {
    def toFloat(t: Boolean) = if (t) 1f else 0f
  }
  implicit object FloatSource extends SignalSource[Float] {
    def toFloat(t: Float) = t
  }
}
trait Step[T] {
  def ar(implicit ev: Step.SignalSource[T]) : Signal
} 
```

# c# - 多行文本框的问题

> ID：12280027
> 
> 赞同：2
> 
> 时间：2012-09-05T11:03:27.007
> 
> 标签：c#, asp.net, html

我的网页中有三个文本框（c#）。其中之一是多行文本框。运行应用程序后，当我按下制表符时，单行文本框中的文本突出显示，但多行文本框中的文本不突出。

当我在浏览器中按 Tab 时，如何使多行文本框中的文本突出显示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T11:11:28.387

多行文本框不支持此功能。但如果您想选择此文本，请使用以下代码。

```
 <asp:TextBox ID="txt" runat="server" TextMode ="MultiLine"  Rows="3" onfocus="this.select();" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T11:10:33.147

您是否尝试将`tabindex`属性添加到输入字段？例如

```
tabindex="3" 
```

这是一个例子：[http ://www.htmlcodetutorial.com/forms/_INPUT_TABINDEX.html](http://www.htmlcodetutorial.com/forms/_INPUT_TABINDEX.html)

# matrix - hlsl矩阵乘法

> ID：12280031
> 
> 赞同：3
> 
> 时间：2012-09-05T11:03:36.813
> 
> 标签：matrix, hlsl

我只是在玩 HLSL 。我想在向量“pos”中获取向量“inputPos”。case2 正在工作，但 case1 没有。为什么 ？两种情况不一样吗？M * M_Inv * inputPos = inputPos。为什么案例 1 没有给出正确的价值？

```
//case 1
pos = mul( float4( inputPos, 1), c_mView );     // Line1
pos = mul ( pos ,  c_mViewInverse );            // Line2

//case2
pos = mul ( mul( float4( inputPos, 1), c_mView ) ,  c_mViewInverse ); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:28:40.840

可能在您的情况下，变量 pos 是 float3，所以如果您在第二个操作中不提供 w 组件，这会打乱您的计算。（在情况 2 中，您直接使用第一个 mul 的结果，这将是一个 float4）

```
pos = mul( float4( inputPos, 1), c_mView );
pos = mul ( float4(pos,1) ,  c_mViewInverse ); 
```

# php - 解析 & 作为 php 中变量的一部分

> ID：12280032
> 
> 赞同：0
> 
> 时间：2012-09-05T11:03:41.153
> 
> 标签：php

我有这个：

```
mysite.com/index.php?refferer=http://www.refferersite.com/index.php?var1=a&var2=b 
```

这个

```
http://www.refferersite.com/index.php?var1=a&var2=b 
```

会变成这样：

```
http://www.refferersite.com/index.php?var1=a 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T11:04:53.207

你需要[urlencode()](http://php.net/manual/en/function.urlencode.php)你的输入

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T11:05:25.297

在 url 上使用[urlencode 。](http://php.net/manual/en/function.urlencode.php)

然后链接将变为：

```
mysite.com/index.php?refferer=http%3A%2F%2Fwww.refferersite.com%2Findex.php%3Fvar1%3Da%2a6var2%3Db 
```

如您所见，与号已转义。

# android - 不可见的音频文件

> ID：12280033
> 
> 赞同：1
> 
> 时间：2012-09-05T11:03:41.747
> 
> 标签：android, audio, android-sdcard

我正在开发应用程序，该应用程序还在 SD 卡上下载和保存 mp3 文件（这不是应用程序的主要任务）。这些文件我只在应用程序中使用。是否有可能使这些文件对用户不可见，尤其是对于他们的音频播放器？例如，当我在索尼手机上打开嵌入式播放器时，会自动加载这些 mp3 文件 - 我不想要它。谢谢你的帮助。卢卡斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:12:22.967

您可以在保存 mp3 文件的文件夹中创建[.nomedia](http://developer.android.com/guide/topics/data/data-storage.html#SavingSharedFiles)空文件：

> 在您的外部文件目录中包含一个名为 .nomedia 的空文件（注意文件名中的点前缀）。这将阻止 Android 的媒体扫描仪读取您的媒体文件并将它们包含在画廊或音乐等应用程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:05:38.733

通过 using 使用应用程序的内部存储`Context.MODE_PRIVATE`，这样您的应用程序将是唯一可以访问这些文件的应用程序。看到[这个](http://developer.android.com/guide/topics/data/data-storage.html)，应该对你有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T11:06:09.660

您可以`MODE_PRIVATE`按照本[文档](http://developer.android.com/guide/topics/data/data-storage.html)中的说明保存文件。

或者按照上述文档的旁注中的说明进行操作：

> **从媒体扫描仪隐藏您的文件**
> 
> 在您的外部文件目录中包含一个名为 .nomedia 的空文件（注意文件名中的点前缀）。这将阻止 Android 的媒体扫描仪读取您的媒体文件并将它们包含在画廊或音乐等应用程序中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T11:11:50.607

**有两个选项供您选择。**

1）加密存储在 sdcard 上的文件，并在使用前再次解密。

2) 在您保存 mp3 文件的外部存储目录文件夹中创建 .nomedia 文件。

**使用第二个选项**这些文件仍然可以从您的原始应用程序或 Astro 或 Linda 等资源管理器访问，但会阻止 Android 的媒体扫描仪读取您的媒体文件并将它们包含在画廊或音乐等应用程序中。

# javascript - 如何将 javascript 添加到 Wordpress 侧边栏中

> ID：12280043
> 
> 赞同：0
> 
> 时间：2012-09-05T11:04:14.050
> 
> 标签：javascript, wordpress

我想将手风琴区域放入我的 Wordpress 侧边栏（不是 .com）

因此你知道我必须添加一点 JS 代码。但是WP忽略了这一点。这里的代码是

```
<script type='text/javascript' src='http://www.heptasarim.com/wp-content/themes/clean-v1.2/js/hizmetler.js'>
</script>

<div id="panel" style="display:none; background-color: #4ab4d7; padding: 20px; font-size: 17px; font-weight: bold; color: #fff; text-align: center; border-bottom: 1px solid #337689">
SEO Hizmetleri
</div>

<a href="#" class="buton" style="display: block; width: 176px; height: 27px; text-indent: -9999; margin: 0 auto; margin-top: -1px; position: relative">Buton</a> 
```

但不知何故我不能用这种方式。示例（侧边栏右上角）[Kurumsal SEO](http://www.heptasarim.com/kurumsal-seo)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:46:33.667

WordPress 附带的 jQuery 库以“**无冲突**”模式加载，即`$`快捷方式不可用，使用的时间越长`jQuery`：

[http://codex.wordpress.org/Function_Reference/wp_enqueue_script#jQuery_noConflict_wrappers](http://codex.wordpress.org/Function_Reference/wp_enqueue_script#jQuery_noConflict_wrappers)

# mysql - 声纳：本地或外部 MySQL 数据库？

> ID：12280047
> 
> 赞同：1
> 
> 时间：2012-09-05T11:04:40.977
> 
> 标签：mysql, sonarqube

我们正在尝试使用 MySQL DB 在组织级别设置一个专用/单个 Sonar 实例，其中包含近 60 个项目（不同语言）。目标是确保系统以最佳方式运行，即 Sonar 和 MySQL DB。

以下是我们计划采购的 VM 的硬件规格。

RAM：8GB，硬盘：100GB，操作系统：Windows 2008 服务器

对于这个设置，我们想要的唯一问题是，是让 Sonar 和 MySQL 在同一台机器上运行，还是让一台专用机器在同一网络中运行 MySQL 服务器。

任何输入都受到高度赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T12:07:47.103

声纳安装由两部分组成：声纳服务器和声纳批处理（通常通过 Jenkins 等 CI 软件运行）。

我们的建议是让这两个部分都尽可能靠近数据库。这对于在进行分析时大量查询和更新数据库**的批处理部分**来说更为重要。让数据库远离运行声纳分析的 CI 服务器会对性能产生巨大影响。

# iphone - 在 iOS 中暂停时启动 locationManager

> ID：12280048
> 
> 赞同：2
> 
> 时间：2012-09-05T11:04:42.707
> 
> 标签：iphone, ios, xcode, locationmanager

我搜索了很多天的解决方案，但我没有找到任何让我满意的解决方案。

我已经启动了`LocationManager`，并且工作正常。现在，我想连接`LocationManager`一个时间表。例如，在上午 9 点到下午 1 点之间，位置管理器应该工作，在下午 1 点到下午 3 点之后应该关闭，然后到午夜位置管理器必须打开。

当应用程序暂停并关闭时，如何触发操作`LocationManager`？

我写了这样的东西：

```
[NSTimer scheduledTimerWithTimeInterval:30 target:self selector:@selector(doInBackground:) userInfo:nil repeats:YES];

- (void) doInBackground:(NSTimer*)time {
    ScheduleModel *schMod = [[ScheduleModel alloc]init];
    if(![schMod isScheduleActiveNow]){
        [locationManager stopUpdatingLocation];
        NSLog(@"LocationManager OFF");
    } else if(!locationManager){
        [locationManager startUpdatingLocation];
        NSLog(@"LocationManager ON");
    }
    [schMod release];
} 
```

但它只有在工作时才`LocationManager`有效。当我`LocationManager`关闭时，似乎没有什么可以触发 action `doInBackground`。

有没有解决这个问题的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T12:58:17.857

为了实现这样的功能，您必须注意有关 ios 应用程序状态及其多任务处理能力的一些要点。第一件事是即使应用程序没有运行，您也需要注册应用程序以获取位置更新。通过显着的位置更改属性，您可以跟踪与应用程序状态无关的位置。另一件事是您需要在特定时间间隔内更新位置。我认为可以通过触发本地通知服务来实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:17:30.783

当应用程序暂停时，如果您没有注册后台位置服务并启动位置管理器实例更新，则无法通过计时器让应用程序再次开始更新。您的选择是：

1.  让位置管理器保持更新，但仅在您打算激活的时间响应事件。
2.  仅在进入后台状态时更改为重要的位置更改更新。该应用程序将在位置发生重大变化时唤醒，然后您可以检查时间并根据需要通过开始持续更新来做出响应。
3.  设置一个受监控的区域，在退出该区域时唤醒并做出相应的响应。

在后台持续更新，如果不是必需的，也不是对用户电池的负责任的处置。如果你解释更多你想要完成的事情，我可能会有更好的建议。

您可以在 github 上的处理程序中看到我在后台状态下所做的一些工作：

[TTLLocationHandler](https://github.com/dsdavids/TTLocationHandler)

# facebook - facebook like按钮在jquery ui对话框中消失

> ID：12280051
> 
> 赞同：0
> 
> 时间：2012-09-05T11:04:52.583
> 
> 标签：facebook, jquery-ui, wordpress, facebook-likebox

我开发了一个 word press 插件，当用户单击链接时会显示 jQuery UI 对话框。

该对话框包含一个 facebook 按钮。该按钮通常出现在对话框之外，但不会显示在对话框中。

当我加载页面并在页面加载完成之前赶紧点击链接时，按钮显示并正常工作！

我使用了 FB 调试器，没有任何警告。

jquery函数：

```
 <script type="text/javascript">
    var timer;
    var isclose=<?php echo get_option('WPVS_close')?>;
    jQuery(document).ready(function() {

    //jQuery(function(){        
    //popup box jquery settings

    jQuery(".cdialog").dialog("modal");
    jQuery(".cdialog").dialog({                     
                    autoOpen: false,
                    modal:true,
                    title: "",
                    zIndex: 9998,
                    closeOnEscape: true,
                    resizable: false,
                    width: <?php echo get_option('WPVS_width');?>,
                    height: <?php echo get_option('WPVS_height');?>,
                    beforeClose: function(event, ui) { clearTimeout(timer);    clearInterval(timer); },
                    open: function(event, ui) {
                        delay=<?php echo get_option('WPVS_delay');?> ;
                        isclose=<?php echo get_option('WPVS_close'); ?>;
                        timer=setInterval( "delaytime()" , 1000);
                        jQuery(".ui-dialog-titlebar", ui.dialog).hide();
                        jQuery(".ui-dialog-titlebar-close", ui.dialog).show();
                        if (!isclose||urll==location.href){jQuery("#closebutton").hide();};
                    }

                    });
  jQuery(function() {
       jQuery( "#closebutton" ).button({
        icons: {
            primary: "ui-icon-close"
        },
        text: false
    });

    jQuery( "#closebutton" ).click(function(event)
    {
        jQuery(".cdialog").dialog("close");
    });

});
    });
       </script> 
```

包含对话框的 div：

```
<div  class="cdialog"  title="" >
<p>Please Share Our Page On Social Networks Or Wait  <b class="ctimer" ></b> seconds<b class="ctimernn" ></b> To Be Redirected</p>
<div><fb:like href="'.get_option('ste_like').'" send="false" width="450" show_faces="true"></fb:like></div>
<div><a href="https://twitter.com/share" class="twitter-share-button" data-lang="en" data-text="'.get_option('ste_tweet').'" data-url="'.get_option('ste_tweet_url').'">Tweet</a></div>
<g:plusone callback="plusdone" href="'.get_option('WPVS_gplus').'"></g:plusone>         
</div> 
```

包含已安装的插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:41:07.290

我有同样的问题。实际上，您需要将其放在对话框页面中。这对我有用。

```
<script> 
    jQuery(document).ready(function() {
       FB.XFBML.parse();
     });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:31:10.330

尝试重新解析 Like 按钮，因为它是在 Facebook SDK 初始化后加载的。触发弹出窗口时调用以下代码应该可以解决问题：

```
FB.XFBML.parse(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T23:36:41.613

那太粗略了……我将 facebook 功能包含在标题中。当我将它放入正文或页脚时，它工作正常并且不再消失......感谢所有努力，

# java - 在生产中使用 p6spy

> ID：12280055
> 
> 赞同：1
> 
> 时间：2012-09-05T11:04:57.237
> 
> 标签：java, database, hibernate, deployment, p6spy

有人在生产环境中使用 p6spy 登录吗？

我想启用记录一个表的所有语句并包括堆栈跟踪。我感兴趣的表只包含几行（通常实际上只有 2 行），每 2-3 秒读取和更新一次。我担心 p6spy 日志会对所有与数据库相关的操作产生性能影响。

初始测试未显示启用或禁用 p6spy 日志的情况之间有任何可测量的差异。有没有人有同样的经历？在生产中使用 p6spy 通常安全吗？

环境：java应用、hibernate、postgresql

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T21:10:55.987

我在生产环境中使用 p6spy（不是自愿的，它深深嵌入在一些遗留代码中）。由于它，还没有遇到性能损失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-21T14:10:20.863

好吧，根据我玩过的内容，**p6spy 会产生影响，具体取决于您登录的次数**。也许是因为事实，测试的表更复杂。我已经看到在阈值设置的情况下影响最小，没有记录任何内容，但是您记录的语句越多，您的影响就越大。

如果记录堆栈跟踪，我会担心性能。

我无法参考任何官方数据，但是在这种情况下，最好的方法是测试您的用例。

# delphi - Delphi XE2 不会将字符串列表标记为已排序

> ID：12280063
> 
> 赞同：2
> 
> 时间：2012-09-05T11:05:27.973
> 
> 标签：delphi, delphi-xe2

我在 Delphi XE2 中对字符串列表进行排序时遇到问题。这是一个例子：

```
procedure AddText();
var
  StrList:  TStringList;
begin
  StrList := TStringList.Create();
  StrList.Add('Test1');
  StrList.Sort();
  WriteLn('Sorted: ' + BoolToStr(StrList.Sorted, true)); // Prints "Sorted: false"
  StrList.Add('Test2');
  StrList.Sort();
  WriteLn('Sorted: ' + BoolToStr(StrList.Sorted, true)); // Prints "Sorted: false"
  StrList.Add('Test3');
  StrList.Free();
end; 
```

据我了解，这个问题是由于`TStringList.Sorted`从未设置为 true 的事实（既不直接也不使用 SetSorted）。它只是我还是它是一个错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T12:57:07.397

该`Classes`单元中没有任何内容`TStringList.Sort`可以让您期望它会更改属性。该`TStringList.Sort`方法只是`CustomSort`使用默认排序函数调用。它不是列表状态（已排序或未排序）的指示符；它仅确定列表是否使用内部排序算法进行排序，并将新项目添加到正确的位置而不是末尾。从[文档](http://docwiki.embarcadero.com/Libraries/en/System.Classes.TStringList.Sorted)中：

> 指定列表中的字符串是否应自动排序。
> 
> 将 Sorted 设置为 true 以使列表中的字符串自动按升序排序。将 Sorted 设置为 false 以允许字符串保留在插入的位置。当 Sorted 为 false 时，可以通过调用 Sort 方法随时对列表中的字符串进行升序排列。
> 
> 当 Sorted 为 true 时，不要使用 Insert 将字符串添加到列表中。相反，使用 Add，它将在适当的位置插入新字符串。当 Sorted 为 false 时，使用 Insert 将字符串添加到列表中的任意位置，或使用 Add 将字符串添加到列表末尾

不过，你一开始就用错了。只需将所有字符串添加到`StringList`, 然后设置`Sorted := True;`. 它将正确设置属性值并`Sort`自动为您调用内部方法。

```
procedure AddText();
var
  StrList:  TStringList;
begin
  StrList := TStringList.Create();
  StrList.Add('Test1');
  StrList.Add('Test2');
  StrList.Add('Test3');
  StrList.Sorted := True;
  // Do whatever
  StrList.Free;
end; 
```

（您特别不想`Sort()`在添加每个项目后调用；这非常缓慢且效率低下。）

# position - 更改 UITabBarItem 图像位置

> ID：12280065
> 
> 赞同：1
> 
> 时间：2012-09-05T11:05:41.743
> 
> 标签：position, uitabbaritem, uiappearance

有谁知道如何使用 iOS5 中的外观代理对象更改 UITabBarItem 中图像的位置？

非常感谢

# c# - 如何拆分 web.config？

> ID：12280066
> 
> 赞同：7
> 
> 时间：2012-09-05T11:05:41.380
> 
> 标签：c#, web-config

我想拆分 web.config 并将这些设置放在外部文件中。

```
<customErrors mode="Off" defaultRedirect="~/Home/ErrorPage">
  <error statusCode="403" redirect="~/Home/ErrorPage"/>
  <error statusCode="404" redirect="~/Home/ErrorPage"/>
</customErrors>

<system.net>
  <mailSettings>
    <smtp deliveryMethod="Network" from="noreplay@company.no">
      <network host="smtp.company.com" port="25" password="" userName=""/>
    </smtp>
  </mailSettings>
</system.net> 
```

我用

```
 <appSettings file="my.config"/> 
```

在外面有我的设置。

但是标准设置呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T11:09:16.247

许多（尽管不是全部）部分都有一个`configSource`属性，您可以使用与使用该部分`file`属性的方式非常相似的方式`appSettings`。

[更多信息在 MSDN](http://msdn.microsoft.com/en-us/library/system.configuration.sectioninformation.configsource.aspx)

* * *

```
 <customErrors configSource="MyErrors.config" /> 

  <system.net>
    <mailSettings>
      <smtp configSource="MySmtp.config" />
    </mailSettings>
  </system.net> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:09:24.863

您可以将文件的某些部分分开，但不能将所有内容都放入单独的文件中。

您还应该考虑这样做会获得什么。

# django - 向 django 管理员更改链接添加“下一个”网址

> ID：12280067
> 
> 赞同：5
> 
> 时间：2012-09-05T11:05:54.137
> 
> 标签：django, django-admin

在我的 django 项目中，我创建了一个指向管理界面的链接，以便用户可以编辑对象：

```
<a href="{% url admin:mode_change object.id %}">modify object</a> 
```

这工作正常，但在用户完成管理界面中的对象编辑后，我希望自动将用户带回原始 URL（或其他一些 URL）。目前，在用户修改对象后，她/他最终会在管理界面中查看所有`model`条目。

有没有办法为管理员链接提供返回 url？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-05T13:20:32.810

这似乎有效：

```
admin.py:
class ModelAdmin(admin.ModelAdmin):
    form = ModelForm

    def response_change(self, request, obj):
        res = super(ModelAdmin, self).response_change(request, obj)
        if "next" in request.GET:
            return HttpResponseRedirect(request.GET['next'])
        else:
            return res 
```

并在模板中（`currentUrl`视图中生成的变量在哪里）：

```
<a href="{% url admin:mode_change object.id %}?next={{ currentUrl }}">modify object</a> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-10-27T10:39:30.230

对于这个问题，“response_post_save_change”方法会更好，因为只有在成功保存后才会调用它。在 Django 3.1 上，这对我有用：

```
def response_post_save_change(self, request, obj):
    res = super().response_post_save_change(request, obj)
    if "next" in request.GET:
        return HttpResponseRedirect(reverse(...))
    else:
        return res 
```

# android - OpenGL ES2 Android - 将 2D 纹理映射到 GL_TRIANGLES 立方体

> ID：12280068
> 
> 赞同：0
> 
> 时间：2012-09-05T11:05:56.910
> 
> 标签：android, opengl-es, textures, uv-mapping

我正在尝试将 256*256 纹理映射到立方体上。当我这样做时，正面和背面如预期的那样，左右面在 z 方向上反转，顶面和底面被“弄脏”成重复的模糊。这个问题我之前已经介绍过，但是我能找到的唯一解决方案是使用四边形，这在 OpenGL ES2.0 的 Android 实现中不可用，或者创建一个包含所有面的顶点的顶点列表（而不仅仅是8 个顶点），然后用索引 0-23（而不是 0-7）引用它们。

我使用的代码给出了上面的结果，如下所示：

```
private float vertices[] = {

    //Front 
    -1.0f, -1.0f, 1.0f,  //0 Bottom Left
    1.0f, -1.0f, 1.0f,  //1 Bottom Right
    -1.0f, 1.0f, 1.0f,  //2 Top Left
    1.0f, 1.0f, 1.0f,  //3 Top Right

    //Back
    -1.0f, -1.0f, -1.0f, //4 Bottom Left
    1.0f, -1.0f, -1.0f, //5 Bottom Right
    -1.0f, 1.0f, -1.0f, //6 Top Left        
    1.0f, 1.0f, -1.0f //7 Top Right 
};

//Order to draw points in vertices array
private short indices[] = {
    //Faces definition
    0,1,2, 2,1,3, //Front
    5,4,7, 7,4,6, //Back
    1,5,3, 3,5,7, //Right 
    4,0,6, 6,0,2, //Left
    2,3,6, 6,3,7, //Top
    4,5,0, 0,5,1 //Bottom
};

private float textureVertices[] = {
    0.0f, 1.0f, //Front
    1.0f, 1.0f, 
    0.0f, 0.0f,
    1.0f, 0.0f,

    1.0f, 1.0f, //Back
    0.0f, 1.0f, 
    1.0f, 0.0f,
    0.0f, 0.0f,

    1.0f, 1.0f,
    0.0f, 1.0f, //Right 
    1.0f, 0.0f,
    0.0f, 0.0f,

    1.0f, 1.0f, //Left
    0.0f, 1.0f, 
    1.0f, 0.0f,
    0.0f, 0.0f,

    0.0f, 1.0f, //Top
    1.0f, 1.0f, 
    0.0f, 0.0f,
    1.0f, 0.0f,

    0.0f, 1.0f, //Bottom
    1.0f, 1.0f, 
    0.0f, 0.0f,
    1.0f, 0.0f

};

public void draw(GL10 gl){
    gl.glBindTexture(GL10.GL_TEXTURE_2D, textureIDs[0]);

    gl.glEnable(GL10.GL_CULL_FACE);
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);

    gl.glFrontFace(GL10.GL_CCW);
    gl.glCullFace(GL10.GL_BACK);

    gl.glVertexPointer(3, GL10.GL_FLOAT, 0, verticesBuffer); 
    gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, textureBuffer); 
    gl.glDrawElements(GL10.GL_TRIANGLES, indices.length,GL10.GL_UNSIGNED_SHORT,indicesBuffer);

    gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
    gl.glDisable(GL10.GL_CULL_FACE);
} 
```

[我认为将方形纹理映射到三角形](https://stackoverflow.com/questions/4308309/mapping-a-square-texture-to-a-triangle)的帖子中接受的答案几乎涵盖了我之后的内容，如果确实有可能以我期望的方式进行索引和纹理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:26:29.340

您的`vertices`数组应与数组的布局相匹配`textureVertices`。这意味着 8 个顶点不足以渲染纹理立方体，因为同一位置的顶点可能具有不同的纹理坐标，具体取决于它们所属的面，因为`indices`它们是纹理和顶点数组的索引。

考虑一个旋转的立方体，使其边缘面向你。在边缘的左侧，纹理结束。在右侧，纹理开始。

# java - 将 json 数据拉到 ListView

> ID：12280073
> 
> 赞同：0
> 
> 时间：2012-09-05T11:06:10.260
> 
> 标签：java, android, json

我使用 httpClient 将 json 数据拉到 ListView。我能够解析 json 数据，但不知道如何在 ListView 上显示这些记录，我尝试按照以下方式解析

```
HttpGet httpget = new HttpGet("http://10.0.2.2:8000/api/ecp/merchantinfo/?format=json");
      try {
          HttpEntity entity;

          HttpResponse response;
          response = httpclient.execute(httpget);
          entity = response.getEntity();
          InputStream is = entity.getContent();
          BufferedReader reader = new BufferedReader(new InputStreamReader(is));
          StringBuilder sb = new StringBuilder();

          String line = null;
          try {
              while ((line = reader.readLine()) != null) {
                  sb.append((line + "\n"));
              }
             Toast.makeText(Landing.this, sb.toString(), Toast.LENGTH_SHORT).show();

          } catch (IOException e) {
              e.printStackTrace();
          } finally {
              try {
                  is.close();
              } catch (IOException e) {
                  e.printStackTrace();
              }
          } 
```

xml文件如下

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    xmlns:android="http://schemas.android.com/apk/res/android">
    <TableRow>

        <TextView
            android:id="@+id/tv_Land"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textAppearance="?android:attr/textAppearanceLarge" />
    </TableRow>
    <TableRow>
    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">
    </ListView>

    </TableRow>

</TableLayout> 
```

现在我需要在listview中提取名称字段json如下

```
{"meta": {"limit": 20, "next": null, "offset": 0, "previous": null, "total_count": 1}, "objects": [{"categories": [{"api_key": "635c1a2fe3924626ddc38cc365a084d62e0201aa", "id": 1, "is_active": true, "name": "test1", "resource_uri": "/api/ecp/merchantcategory/1/"}], "contact": [{"ContactUsAddressCity": "kathmandu", "ContactUsAddressFax": "8989898", "ContactUsAddressLine1": "anamnagar32", "ContactUsAddressLine2": "kathmandu", "ContactUsAddressState": "AR", "ContactUsAddressZip": "78787", "ContactUsBusinessHours": "tetsgsasjajash nsakjaskjas nsajnjashashjsa", "ContactUsEmail": "timus2001@gmail.com", "ContactUsPhone": "78898998", "api_key": "635c1a2fe3924626ddc38cc365a084d62e0201aa", "id": 1, "resource_uri": "/api/ecp/merchantcontact/1/"}], "create_time": "2012-09-04T15:54:34", "current_state": 1, "graphics": [{"api_key": "635c1a2fe3924626ddc38cc365a084d62e0201aa", "bg": "/media/000001_background.png", "bgcolor": "#D92727", "button": "/media/000001_top.png", "fontcolor": "#1440CF", "id": 1, "photo": "/media/000001_icon.png", "resource_uri": "/api/ecp/merchantgraphics/1/", "splash": "/media/000001_splash.png"}], "id": 1, "modified_time": "2012-09-04T15:54:34", "name": "Super restro and bar", "resource_uri": "/api/ecp/merchantinfo/1/", "utcStateCreated": null, "utcStateDisabled": null, "utcStateEnabled": null, "utcStateUnsubscribed": null}]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:10:14.587

获取 JSON 字符串后，创建一个 jason 对象..

```
JSONObject object = new JSONObject(sb.trim());
JSONArray objects = object.getJSONArray("objects"); 
```

然后解析json数组...

检查链接：http: [//developer.android.com/reference/org/json/JSONObject.html](http://developer.android.com/reference/org/json/JSONObject.html)

# arrays - 打印垃圾值的数组哈希

> ID：12280080
> 
> 赞同：1
> 
> 时间：2012-09-05T11:06:41.633
> 
> 标签：arrays, perl, hash

我正在尝试从 perl 程序中的数组哈希打印数据。但它会打印一些垃圾值以及原始数据：

```
#!/usr/bin/perl

my %Quarter = (
                June => ["06/03/2012", "06/10/2012", "06/17/2012", "06/24/2012"],
                July => ["07/01/2012", "07/08/2012", "07/15/2012", "07/22/2012"],
                August => ["08/05/2012", "08/12/2012", "08/19/2012", "08/26/2012"],
);

foreach my $month ( %Quarter ) {
        print "$month\n";
} 
```

输出：

```
July
ARRAY(0x9281af8)
June
ARRAY(0x9281bdc)
August
ARRAY(0x929ade8) 
```

知道这个程序出了什么问题。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T11:14:48.487

在 Perl 中，散列可以很容易地转换为具有相同数量元素的数组。每个偶数元素是一个键，后面的（奇数）元素是对应的值。

现在，`foreach`是一个遍历数组而不是哈希的运算符。因此，您的代码执行它的工作：循环变量迭代一个键、一个值、下一个键、下一个值等。

有几种方法可以迭代哈希：

1.  遍历所有键/值对。你通常会这样做`while (my ($key, $value) = each %hash) { ... }`
2.  从哈希中检索所有键并遍历它们：`foreach my $key (keys %hash) { ... }`
3.  如果您不需要键而只需要值，那么您还可以从哈希中获取所有值并使用`foreach my $value (values %hash) { ... }`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T12:01:23.877

其他人回答了有关如何迭代日数组的问题，但以正确顺序打印月份的问题是散列没有排序。我有两种可能的解决方案。

第一个涉及手动迭代月份键，如下所示：

```
foreach my $month_name (qw(June July August)) {
    print $month_name . ': ' . join ', ' => @{$Quarter{$month_name}};
} 
```

或者您需要将数据结构提供为哈希数组：

```
my @months = (
    {name => 'June', days => ["06/03/2012", "06/10/2012", "06/17/2012", "06/24/2012"]},
    # ...
);

foreach my $month (@months) {
    print $month->{name} . ': ' . join ', ' => @{$month->{days}};
} 
```

蒂姆托迪！希望有帮助。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T11:10:03.723

在 foreach 循环中，$month 是对数组的引用，你必须这样做

```
use Data::Dumper;
print Dumper\%Quarter; 
```

或者

```
foreach my $month (keys %Quarter ) {
    print "$_\n" for @{$Quarter{$month}};
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T11:10:24.863

你想做什么？如果要打印月份名称，则需要循环`keys %Quarter`. 如果您希望键和值配对，请使用[`each`](http://perldoc.perl.org/functions/each.html). 如果您在这样的数组上下文中使用哈希，您将获得所有键*和*所有值。

```
foreach my $month ( keys %Quarter ) {
        print "$month\n";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T20:34:35.627

您的问题尚未得到解答-如果我没记错的话....我会说，您看到的“垃圾”不是数据，而是说明了它是什么，它是您的匿名数组分配给您的哈希键。

所以拿你的代码应该是：

```
#!/usr/bin/perl

my %Quarter = (
            June => ["06/03/2012", "06/10/2012", "06/17/2012", "06/24/2012"],
            July => ["07/01/2012", "07/08/2012", "07/15/2012", "07/22/2012"],
            August => ["08/05/2012", "08/12/2012", "08/19/2012", "08/26/2012"],
);

#foreach my $month ( %Quarter ) {
#    print "$month\n";
#}
while(my ($k,$v) = each %Quarter) {
  foreach my $x (@$v) {
    print $x."\n";
  }
} 
```

# facebook - 通过测试用户发布操作时获取“BadMethodCallException” - facebook graph api

> ID：12280082
> 
> 赞同：1
> 
> 时间：2012-09-05T11:06:47.380
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我在我的 facebook 应用程序上创建了自己的操作并发送审批。他们要求我在使用“Auth Dialog Preview User”测试我的操作后重新提交该操作，并确保该操作出现在它的时间线上。

当我尝试通过 facebook 的 javascript-sdk 从测试用户发布操作时，我收到控制台错误

消息：“调用非对象上的成员函数”类型：“BadMethodCallException”

通过管理员帐户成功发布帖子。但是当我将帐户切换到测试用户时，它失败了。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T04:02:47.067

认为我有同样的问题。使用测试帐户发布操作后得到空响应。

这是因为默认情况下，Facebook 只允许应用程序的基本信息权限。所以 OG Actions 被拒绝了。

尝试这样做，

1.  登录测试账户
2.  前往设置
3.  转到应用程序
4.  删除您的应用
5.  打开你的应用

这将使它重新授权应用程序，然后您的应用程序有权通过测试帐户发布 OG 操作。

100% 为我工作:)

# linux - 如何知道哪个用户空间进程正在写入 SD 卡？

> ID：12280083
> 
> 赞同：0
> 
> 时间：2012-09-05T11:06:46.887
> 
> 标签：linux, linux-kernel, linux-device-driver, usb-mass-storage

这是在 sdhci_send_command 中使用 WARN_ON 生成的内核堆栈**

```
*****WARNING: at /vobs/iandroid/src/kernel/drivers/mmc/host/mx_sdhci.c:495 sdhci_send_command+0x150/0x86c()
Modules linked in: g_mot_android(-) mxc91341_oh_udc sipcttydrv aplogger coredump bploader sipcdrv mu_drv
[<c0082e3c>] (dump_stack+0x0/0x14) from [<c009cda4>] (warn_slowpath+0x68/0x84)
[<c009cd3c>] (warn_slowpath+0x0/0x84) from [<c02495e0>] (sdhci_send_command+0x150/0x86c)
 r3:00000033 r2:00000000
 r7:00000000 r6:c657bf5c r5:c654a5c0 r4:c040b510
[<c0249490>] (sdhci_send_command+0x0/0x86c) from [<c024a1e0>] (sdhci_request+0x188/0x1bc)
[<c024a058>] (sdhci_request+0x0/0x1bc) from [<c02409e4>] (mmc_wait_for_req+0x1f8/0x220)
 r8:c654a400 r7:c657bef0 r6:c657bf5c r5:00001000 r4:00000001
[<c02407ec>] (mmc_wait_for_req+0x0/0x220) from [<c0247fa8>] (mmc_blk_issue_rq+0x1f4/0x7b0)
[<c0247db4>] (mmc_blk_issue_rq+0x0/0x7b0) from [<c0248a14>] (mmc_queue_thread+0x134/0x154)
[<c02488e0>] (mmc_queue_thread+0x0/0x154) from [<c00b2e88>] (kthread+0x54/0x80)
 r8:00000000 r7:00000000 r6:00000000 r5:c02488e0 r4:fffffffc
[<c00b2e34>] (kthread+0x0/0x80) from [<c009f3a8>] (do_exit+0x0/0x738)
 r5:00000000 r4:00000000
---[ end trace 6dcb56938527653f ]---***** 
```

我怎样才能知道哪个进程正在写入 SD 卡？

# raphael - Raphael JS 3D 效果投影

> ID：12280088
> 
> 赞同：0
> 
> 时间：2012-09-05T11:07:10.463
> 
> 标签：raphael, graphael

我正在尝试制作一个相当复杂的 Raphael JS 甜甜圈图。

我遇到了几个问题，其中一个是 3D 效果，我打算通过添加 7 个阴影（发光）或甜甜圈副本来解决这个问题，以模拟形状的 7px 厚度。

我怎么能以最好的方式做到这一点？先感谢您...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T23:01:46.327

七个阴影似乎不是最好的方法，因为它的计算成本很高，因为它看起来不太好，而且在处理矢量图形时通常应该避免考虑像素。

如果你想画一段圆柱体——画出来。包括侧面。即使是纯色，它也会创造出合理的 3d 错觉，您可以通过使用渐变来模拟照明，使其看起来更漂亮。您必须跟踪哪些面实际上是可见的，但几乎任何 3D 方法都是这种情况，包括阴影。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-30T01:05:36.363

@KennethB 也许这些插件可以帮助你：[https](https://github.com/bkuzmic/raphael-charts-plugin) ://github.com/bkuzmic/raphael-charts-plugin和[https://github.com/PuffyCoffee/3D-Pie-chart](https://github.com/PuffyCoffee/3D-Pie-chart)。下载这些插件并研究代码，这些插件有 MIT 许可证并使用 Raphael。

# javascript - 无法将 Asp.net 控件的值传递给 javascript 函数

> ID：12280091
> 
> 赞同：0
> 
> 时间：2012-09-05T11:07:28.030
> 
> 标签：javascript, asp.net, google-maps-api-3, google-maps-markers

我想将两个文本框的纬度和经度值发送到一个 java 脚本函数，该函数在地图上的该位置显示一个标记。

我已经编写了以下代码，但它不起作用：

```
<script type="text/javascript">
var map;
function init()
{
    var mapoptions=
    {
        center: new google.maps.LatLng(17.379064211298, 78.478946685791),
        zoom: 8,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map=new google.maps.Map(document.getElementById("map_can"), mapoptions);
}    
function placemark()
{
   var ulatlng= new google.maps.LatLng(document.getElementById('<%=TextBox1.ClientID %>'),document.getElementById('<%=TextBox2.ClientID %>'));
   var marker = new google.maps.Marker({position:ulatlng,map:map});
}   
</script> 
```

按钮控制代码：

```
<asp:Button ID="Button1" runat="server" Text="Button" OnClientClick="placemark()" /> 
```

不显示标记。Chrome 控制台也不会显示任何错误。我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:24:05.737

根据[google API V3 参考](https://developers.google.com/maps/documentation/javascript/reference#LatLng)，构造函数是

```
LatLng(lat:number, lng:number, noWrap?:boolean) 
```

所以你的功能可能是：

```
function placemark()
{
   var ulatlng= new google.maps.LatLng(document.getElementById('<%=TextBox1.ClientID %>').value,document.getElementById('<%=TextBox2.ClientID %>').value);
   var marker = new google.maps.Marker({position:ulatlng,map:map});
} 
```

并将您的按钮定义更新为：

```
<asp:Button ID="Button1" runat="server" Text="Button" OnClientClick="placemark(); return false;" /> 
```

但可能会更好：

```
function placemark(lat, lng)
{
   var ulatlng= new google.maps.LatLng(lat,lng);
   var marker = new google.maps.Marker({position:ulatlng,map:map});
} 
```

并将您的按钮更新为：

```
<asp:Button ID="Button1" runat="server" Text="Button" OnClientClick="placemark(document.getElementById('<%=TextBox1.ClientID %>').value,document.getElementById('<%=TextBox2.ClientID %>').value); return false" /> 
```

无论哪种方式，请确保您包含“return false”，以便您的页面不会回发，从而导致刷新。

如果您想更清洁：

澳交所：

```
<asp:Button ID="uxBtnPlaceMarker" runat="server" Text="Place Marker" /> 
```

后面的代码：

```
 protected void Page_Load(Object sender, EventArgs args)
   {
       //...Do whatever you do here...
       this.uxBtnPlaceMarker.OnClientClick = string.Format("placemark(document.getElementById('{0}').value,document.getElementById('{1}').value); return false", TextBox1.ClientID, TextBox2.ClientID);
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:20:08.967

您应该使用文本框的 .value 属性。例如

```
 var mapCan = document.getElementById("map_can").value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T11:14:05.600

尝试获取文本框值：

```
var ulatlng= new google.maps.LatLng(document.getElementById('<%=TextBox1.ClientID %>').value,document.getElementById('<%=TextBox2.ClientID %>').value) 
```

您还可以尝试缩小地图。标记可能放错了位置并显示在其他地方（Lat Long 已交换）。测试用正确的值替换文本框并确保标记显示

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T12:17:21.503

```
var ulatlng=  document.getElementById(TextBox1).value; 
```

像这样使用这将工作

# android - 重启后警报未按时间正确触发

> ID：12280096
> 
> 赞同：0
> 
> 时间：2012-09-05T11:07:50.063
> 
> 标签：android, android-alarms

我正在使用 AlramManager 使用以下方法设置警报：

```
 public static void scheduleAlarmReceiverOnce(Context context,String did,long time) {
    AlarmManager alarmMgr = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
    PendingIntent pendingIntent =PendingIntent.getBroadcast(context, 0, new Intent(context, AlarmReciever.class),PendingIntent.FLAG_CANCEL_CURRENT);
    alarmMgr.set(AlarmManager.RTC_WAKEUP,time, pendingIntent);
} 
```

我在这里打电话

```
 Utils.scheduleAlarmReceiverOnce(this, did,Calendar.getInstance().getTimeInMillis()+30000); 
```

它的工作正常意味着警报在我的广播中准确地出现在我显示的吐司显示准确时间为 30 秒的地方。我的问题是，当我重新启动或重新启动时，我正在计算并减去浪费的时间并再次安排警报，但剩下的时间......在我的启动接收器上，我再次启动我的服务，其中警报被重新安排。

```
 Utils.scheduleAlarmReceiverOnce(this, did,Calendar.getInstance().getTimeInMillis()+leftime); 
```

Whwre lefttime 我得到了正确的..正好在 17000 或 20000 左右，即；大约 20 秒但我的警报立即触发，无需等待 20 秒。

帮助请.. 提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:43:22.160

好的，我得到了答案...逻辑是正确的，只是我的日期减法传递了一个负值 long，我试图将其添加到 Calendar.getInstance().getCurrentTimeMillis...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:19:02.960

最简单的解决方案是将时间存储在您在警报中设置的 Sharedprefernce / Database 中，并在您重新启动设备时再次设置该时间。

因此，您的警报会在您重新启动之前设置的确切时间调用。

在您当前的代码中尝试这个。

```
PendingIntent pendingIntent =PendingIntent.getBroadcast(context, 0, new Intent(context, AlarmReciever.class),0); 
```

# c# - 执行 PowerPoint 自动化时如何避免 RPC_E_CALL_REJECTED 异常？

> ID：12280097
> 
> 赞同：7
> 
> 时间：2012-09-05T11:07:57.797
> 
> 标签：c#, powerpoint, office-interop, comexception

当我的代码尝试创建 的新实例时`Microsoft.Office.Interop.PowerPoint.Application`，有时会出现以下异常：

```
System.Runtime.InteropServices.COMException (0x80010001): Retrieving the COM class factory for component with CLSID {91493441-5A91-11CF-8700-00AA0060263B} failed due to the following error: 80010001 Call was rejected by callee. (Exception from HRESULT: 0x80010001 (RPC_E_CALL_REJECTED)).
   at System.Runtime.Remoting.RemotingServices.AllocateUninitializedObject(RuntimeType objectType)
   at System.Runtime.Remoting.Activation.ActivationServices.CreateInstance(RuntimeType serverType)
   at System.Runtime.Remoting.Activation.ActivationServices.IsCurrentContextOK(RuntimeType serverType, Object[] props, Boolean bNewObj)
   at System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck)
   at System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache)
   at System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean fillCache)
   at System.Activator.CreateInstance(Type type, Boolean nonPublic) 
```

我有时会说，因为即使给出相同的输入，它也不会始终如一地发生。此外，它也发生在我也与 PowerPoint 自动化 API 交互的代码的其他部分（同样缺乏一致性）。

我已经从 MSDN 本身尝试了[这个](http://msdn.microsoft.com/en-us/library/ms228772%28v=vs.100%29.aspx)解决方案，这似乎是最推荐的解决方案。但是，它似乎没有任何影响，因为我仍然观察到相同的行为。

我的问题是：

1.  MSDN 解决方案是否适用于 PowerPoint 自动化？
2.  如何验证我是否已将其正确应用到我的代码中？
3.  有没有人有替代解决方案？

我正在使用 C#、.NET 4 和 PowerPoint 2007。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-10-16T06:03:24.347

我以前遇到过这个问题，[Paul B](https://stackoverflow.com/users/1059776/paul-b)确实是正确的。这取决于您是否从主线程（即`This_AddIn`）调用 Powerpoint OM。如果是，ppt 不应该抛出这些异常。但是，如果您从另一个线程调用 ppt，则必须实施`IMessageFilter`以有效处理这些 windows 消息泵错误，因为 ppt 优先于对 OM 的主线程调用，而不是来自其他线程的调用，因此调用拒绝。

还有一个警告需要进一步的样板代码来处理额外`COMException`的 s，例如`0x800AC472 (VBA_E_IGNORE)`. [这里](https://codereview.stackexchange.com/questions/28680/is-brute-force-the-accepted-best-practice-for-handling-excel-com-busy-exceptio?noredirect=1#comment58978_28680)有一个例子。

因此，完整的解决方案是实现`IMessageFilter`和使用类似[sepp2k 的](https://codereview.stackexchange.com/a/583/23788)代码来包装您的 OM 调用，以处理`COMException`可能抛出的其他类型的调用。

因此，对于像他这样包装代码：

```
private void TryUntilSuccess(Action action)
{
    bool success = false;
    while (!success)
    {
        try
        {
            action();
            success = true;
        }

        catch (System.Runtime.InteropServices.COMException e)
        {
            if ((e.ErrorCode & 0xFFFF) == 0xC472)
            {   // Excel is busy
                Thread.Sleep(500); // Wait, and...
                success = false;  // ...try again
            }
            else
            {   // Re-throw!
                throw e;
            }
        }
    }
} 
```

你可以像这样用 lamdas 调用它：

```
TryUntilSuccess(() =>
{
    RegisterFilter(); // register this thread for IMessageFilter use
    ppt_app.DoSomething();        
    UnRegisterFilter(); // unregister this thread for IMessageFilter use
};) 
```

这种两管齐下的方法的原因是该`IMessageFilter`策略比抛出异常更有效，并且比无法处理来自应用程序的繁忙消息的次数更多。但是，在其他时候，您将不得不处理异常，因此您必须同时做...

有关包含包装器的[IMessageFilter 实现](http://blogs.msdn.com/b/andreww/archive/2008/11/19/implementing-imessagefilter-in-an-office-add-in.aspx)，请参见此处

嗯！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T08:43:37.627

1.  我没有尝试过，但 Andrew Whitechapel 描述了 Office 的相同方法，所以我想它应该可以工作：http: [//blogs.msdn.com/b/andreww/archive/2008/11/19/implementing-imessagefilter-in- an-office-add-in.aspx](http://blogs.msdn.com/b/andreww/archive/2008/11/19/implementing-imessagefilter-in-an-office-add-in.aspx)

2.  试试看 ：）

3.  另一种方法是通过捕获错误并重试来实现某种等待机制（[这里](http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/e02a2999-b525-41af-9f47-a8b907c15817)也提到过）。

# php - PHP 表单没有重新寄售其已发布

> ID：12280099
> 
> 赞同：0
> 
> 时间：2012-09-05T11:08:14.150
> 
> 标签：php, sql-server, post

我有对 MSSQL 数据库的 PHP 查询。它看起来像这样：

```
<?php 

    if (isset($_POST['form6'])) {
        $Title=$_POST['Title'];
        $Synopsis=$_POST['Synopsis'];
        $Article=$_POST['Article'];
        $DateUploaded= date("Y-m-d H:i:s");
        $Deleted=$_POST['Deleted'];

        $myServer = "**********";
        $myUser = "**********";
        $myPass = "******";
        $myDB = "*********";

        $dbhandle = mssql_connect($myServer, $myUser, $myPass) or die("Couldn't connect to SQL Server on $myServer"); 
        mssql_select_db($myDB) or die;

        $dbTABLE = "Tablename";
        $query_sql = sprintf("INSERT INTO %s (Title, Synopsis, Article, DateUploaded, Deleted)   VALUES ('%s','%s','%s','%s','%s')",
        addslashes($dbTABLE),
        addslashes($Title),
        addslashes($Synopsis),
        addslashes($Article),
        addslashes($DateUploaded),
        addslashes($Deleted));

        if ($result = mssql_query($query_sql, $dbhandle)) {
            print "Your information has been successfully added to the database.";
            header('Location: News.php');
        }
    }
?> 
```

最初它位于一个单独的 .php 文件中，并在表单的“操作”上执行。然而，为了减少重定向的数量，我将它移动到与表单相同的页面，并在顶部包含了 if 语句，以尝试让它在名为 form6 的表单发布时执行。

这是表格行。：

```
<FORM method="post" name="form6" id="form6" ENCTYPE="multipart/form-data" action="<?php echo $_SERVER['PHP_SELF']; ?>"> 
```

然而，这一切似乎只是刷新页面，没有数据被添加到数据库中，也没有命中标题以重定向到 News.php。

我也尝试过，没有任何动作，同样的结果。我的问题是为什么这不会使它命中 php 函数/查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T11:10:23.333

您正在检查该`<form`行中实际上从未包含值的元素：

```
if (isset($_POST['form6'])) 
```

您需要检查实际的表单元素（输入）以查看是否发送了数据。

您应该检查诸如此类的实际值，`$_POST['Title']`以查看是否已从表单发送数据。

如果要包含表单名称，请在表单内使用如下隐藏字段：

```
<input type='hidden' name='form6' value='1'> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T11:12:14.987

您需要在表单中添加一个提交按钮，例如：

```
<form method="post" name="form6" id="form6" ENCTYPE="multipart/form-data" action="">
    <input type="submit" name="formsubmit"/>
</form> 
```

然后在php中检查

```
 if (isset($_POST['formsubmit'])) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T11:19:23.927

另一种不包括制作特殊隐藏字段的方法：

将“form6”添加到您的操作网址：

```
<FORM method="post" name="form6" id="form6" ENCTYPE="multipart/form-data" 
      action="<?php echo $_SERVER['PHP_SELF'].'?form6'; ?>"> 
```

如果您检查表单名称，请改用 GET，但请记住，**其他值仍在 POST 变量中**

```
if (isset($_GET['form6'])) { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T11:12:20.307

你为什么`<Form` `name`在 if 条件下检查财产

```
if (isset($_POST['form6'])) 
```

删除它并检查

```
if (isset($_POST['Title'])) 
```

# c# - 使用 defaultValue 时，如何在实体框架中获取插入实体的 ID？

> ID：12280104
> 
> 赞同：12
> 
> 时间：2012-09-05T11:08:28.607
> 
> 标签：c#, entity-framework, entity

有没有办法用 defaultValue 发送一个属性，但用数据库计算结果更新它？数据库中有一个触发器，输入 -1 会触发一个计算新值的过程。如何找回价值？

```
<Property Name="ID" Type="int" Nullable="false" StoreGeneratedPattern="None" DefaultValue="-1" />

var x = new Stuff();
db.Stuff.AddObject(x);
db.SaveChanges();
return x.ID //gives -1, but the computed value should be different. 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-05T11:21:32.180

您需要在 savechanges 之后重新加载实体。因为它已被 EF 无法跟踪的数据库触发器更改。所以我们需要从数据库中重新加载实体，

```
var x = new Stuff();
db.Stuff.AddObject(x);
db.SaveChanges();
db.Entry(x).GetDatabaseValues();

return x.ID; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-03-17T07:54:09.963

如果您使用的是 EF 核心，它可能是这样的：

```
 public int CreateMyEntity(MyEntityType myEntity)
 {
      Microsoft.EntityFrameworkCore.ChangeTracking.EntityEntry<MyEntityType> created = _context.MyEntityType.Add(myEntity);
      _context.SaveChanges()
      return created.Entity.Id;
  } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-02T12:54:57.263

我遇到了同样的问题，我的密钥在调用后不会更新`SaveChanges`，它只会为`context.Entry(newObj).GetDatabaseValues()`.

就我而言，在 EntityFramework 模型中设置`StoreGeneratedPattern`为`Identity`（在键上）会导致键在调用`SaveChanges`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-11T20:12:06.967

我正在使用数据传输对象 (DTO) 从前端隐藏数据层的详细信息 - 然后将值从它分配给 db 对象。My CustomerId 是调用 SaveChanges() 后自动刷新的身份。不需要其他方法调用。并且由于“客户”是一个 ref 对象，它被传播到前端。

```
public static void Add(DTO.Customer customer)
{
    MyEntities db = new MyEntities();

    var customerToAdd = new MyEntities.Data.Customer { Address = customer.Address, FirstName = customer.FirstName, LastName = customer.LastName, etc... };
    db.Customers.Add(customerToAdd);

    db.SaveChanges();
    customer.CustomerId = customerToAdd.CustomerId;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-06-11T08:25:13.803

```
using (var context = new EntityContext())
{
    var customer = new Customer()
    {
        Name = "John"
    };

    context.Customers.Add(customer);

    context.SaveChanges();      

    int id = customer.CustomerID;
} 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-09-05T11:17:05.287

```
 using (var context = new MyContext())
   {
       context.MyEntities.AddObject(newObject);
       context.SaveChanges();

       int id  = newObject.Id; // Will give u the autoincremented ID
   } 
```

# c# - 加载 xml/xaml 并定义键绑定

> ID：12280106
> 
> 赞同：0
> 
> 时间：2012-09-05T11:08:37.980
> 
> 标签：c#, wpf, mvvm

这是我的 xaml 的一部分：

```
<DataGrid ItemsSource="{Binding listImages, UpdateSourceTrigger=PropertyChanged}" AutoGenerateColumns="False" Name="dataGrid1" Height="341" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Margin="10,10,10,0" Width="225" CanUserResizeRows="False" CanUserResizeColumns="False" CanUserReorderColumns="False" CanUserAddRows="False" IsHitTestVisible="True" OverridesDefaultStyle="False" SelectedIndex="0" SelectionUnit="FullRow" SelectionMode="Single">
<DataGrid.InputBindings>

    <KeyBinding Key="a" Command="{Binding Path=KeyPressed}"/>                    
    <KeyBinding Key="s" Command="{Binding Path=KeyPressed}"/>
    <KeyBinding Key="d" Command="{Binding Path=KeyPressed}"/> 

</DataGrid.InputBindings>
<DataGrid.RowStyle>
    <Style TargetType="DataGridRow">
        <Setter Property="Background" Value="{Binding rowColor}"/>
    </Style>
</DataGrid.RowStyle>
<DataGrid.Columns>                   
    <DataGridTextColumn Header="ImageName" Binding="{Binding imageName}" Width="112" />
    <DataGridTextColumn Header="Tag" Binding="{Binding tag}" Width="110" />
</DataGrid.Columns> 
```

我想加载一个 .xaml ，其中只定义了这个 datagrid 或者更好的是只定义了**KeyBindings**。这是因为用户可以更改可以绑定哪些键。

示例：Tom 想要使用键 z,x,c 而不是 a,s,d。为此，他编辑默认 xml/xaml（位于某处）并更改 KeyBinding 的**Key**参数并加载它。

新的 xml/xaml 将如下所示：

```
<DataGrid ItemsSource="{Binding listImages, UpdateSourceTrigger=PropertyChanged}" AutoGenerateColumns="False" Name="dataGrid1" Height="341" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Margin="10,10,10,0" Width="225" CanUserResizeRows="False" CanUserResizeColumns="False" CanUserReorderColumns="False" CanUserAddRows="False" IsHitTestVisible="True" OverridesDefaultStyle="False" SelectedIndex="0" SelectionUnit="FullRow" SelectionMode="Single">
<DataGrid.InputBindings>

    <KeyBinding Key="z" Command="{Binding Path=KeyPressed}"/>                    
    <KeyBinding Key="x" Command="{Binding Path=KeyPressed}"/>
    <KeyBinding Key="c" Command="{Binding Path=KeyPressed}"/> 

</DataGrid.InputBindings>
<DataGrid.RowStyle>
    <Style TargetType="DataGridRow">
        <Setter Property="Background" Value="{Binding rowColor}"/>
    </Style>
</DataGrid.RowStyle>
<DataGrid.Columns>                   
    <DataGridTextColumn Header="ImageName" Binding="{Binding imageName}" Width="112" />
    <DataGridTextColumn Header="Tag" Binding="{Binding tag}" Width="110" />
</DataGrid.Columns> 
```

有可能遵循 MVVM 模式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:18:46.983

我不会将用户的键绑定选择保留为 XAML。`Binding`标签等对用户没有任何意义。

而是以其他更友好的方式保留键绑定，甚至可能是一个简单的 ini 样式文本文件，例如：

```
Command1Key=z
Command2Key=x
Command3Key=c 
```

将它们加载到 ViewModel 中后，您可以将它们作为`InputBindingCollection`属性公开给视图，然后视图可以绑定到该属性。

# java - 如何在 osgi 容器中找到 WAB 中的所有包？

> ID：12280108
> 
> 赞同：1
> 
> 时间：2012-09-05T11:08:47.770
> 
> 标签：java, maven, wab

我编写了一个 WAB 包并部署在 osgi 容器中。在这个 WAB 包中，我导出了一个包，比如`"com.company.b2b.test.framework"`. 现在我编写了一个简单的 osgi 包，它依赖于 WAB 包。我`"com.company.b2b.test.framework"`通过在`pom.xml`文件中创建一个条目来导入包，并写在一个使用这个包中的几个类的 java 类上。构建在 Eclipse 中失败，并出现以下错误：

```
package com.company.b2b.test.framework does not exist 
```

WAB bundle的包结构如下：

```
company.b2b.test-framework-1.1-SNAPSHOT.jar
      |
      |__META-INF
      |
      |__OSGI-INF
      |
      |__WEB-INF
              |
              |__classes
                    |
                    |__com
                         |
                         |__company
                                |
                                |__b2b --> test --> framework 
```

在 wab bundle 中，我们看到所有的类实际上都在 下`WEB-INF/classes/ directory`，这就是原因，其他简单的 bundle 无法找到所需的包。任何人都可以建议我如何导出包`"com.company.b2b.test.framework"`以便任何其他包可以直接访问这个包吗？

# pycharm - pycharm 无法识别 python 函数

> ID：12280109
> 
> 赞同：4
> 
> 时间：2012-09-05T11:08:49.433
> 
> 标签：pycharm

我刚刚更新到 pycharm 2.6，因为更新 pycharm 不再识别默认的 python 函数。对于默认函数，我的意思是 super() str() 等函数。

有人知道如何解决这个问题吗？我已经尝试删除并重新添加解释器和其他东西，但似乎没有任何效果。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:21:50.777

这是一个已知的错误，请[在此处跟踪进度](http://youtrack.jetbrains.com/issue/PY-7451)。

**更新**：在[PyCharm 2.6.1+](http://www.jetbrains.com/pycharm/download/index.html)中修复。

# jquery - 使用文本框作为 jQuery 函数的输入

> ID：12280111
> 
> 赞同：-1
> 
> 时间：2012-09-05T11:08:54.327
> 
> 标签：jquery, html

我是 jQuery 新手，想知道是否可以将 TextBox 作为 jQuery 函数的参数传入。像这样的东西：

```
<input id="MyInput" value="" type="text" >

//how/what to pass in this function to change the value of the input?
function SetValueTextBox(? ?)  
{
//change the value of the MyInput Textbox

} 
```

当然，我有超过 1 个文本框，我想在其中使用它，因此这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:12:02.287

你可以这样做（不是 100% 确定你在寻找什么）：

```
function SetValueTextBox(textboxid, value)  
    {
    //change the value of the MyInput Textbox
    $('#' + textboxid).val(value);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T11:12:27.783

```
function ChangeValue(value) {
  $("#MyInput").val(value);
} 
```

请学习 jQuery 并阅读它的文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T11:10:41.367

DOM 元素可以设置为变量以及 jQuery 对象。

```
function SetValueTextBox(el, val) {
    el.val(val);
}

var field = $("#MyInput");
SetValueTextBox(field, "new value"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T11:13:05.473

如果你想改变文本框中显示的值，你可以使用类似的东西：

```
jQuery("#MyInput").val("something"); 
```

你甚至可以使用 jQuery-less，使用：

```
document.getElementById("MyInput").value = "something" 
```

在这种情况下，您可能希望`"something"`用您的参数之一替换。

# jquery - 使用 JQuery 自动完成不匹配时如何显示错误？

> ID：12280113
> 
> 赞同：0
> 
> 时间：2012-09-05T11:09:03.660
> 
> 标签：jquery, autocomplete

JQuery 有一个很酷的[自动完成功能](http://jqueryui.com/demos/autocomplete/)。我想要的是，如果自动完成中没有匹配的条目（例如 zadasdasda 中的用户类型）来向用户标记这一点，因为用户只能在这个特定字段中输入与数据库中一组值中的值匹配的内容。在以某种方式说只使用选项列表之前，有太多可能的条目（> 1,000）。我只想检查在我自己编写回调之前在 JQuery 中没有任何东西可以执行此操作。我找不到任何东西只想仔细检查。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T11:44:16.267

也许这会有所帮助。如果我了解您的需求，这是一种方法。

就我而言，自动完成功能通过 Ajax 从服务器获取数据。

```
$("#myselect").autocomplete({
  source: function(request, response) {
    $.ajax({
      url: searchUrl,
      dataType: "json",
      data: request,                    
      success: function (data) {
        // No matching result
        if (data.length == 0) {
          alert('No entries found!');
          $("#myselect").autocomplete("close");
        }
        else {
          response(data);
        }
      }});
    },
  dataType: "json",
  autoFill: false,      
  scroll: false,
  minLength: 2,
  cache: false,
  width: 100,
  delay: 500,           
  select: function(event, ui) { 
    //eventuallydosomething(ui.item.value);
    $("#myselect").autocomplete("close");
  } 
}); 
```

您感兴趣的部分是从服务器返回数据时：

```
 success: function (data) {
      // If we get no matching result
      if (data.length == 0) {
        alert('No entries found!');
        $("#myselect").autocomplete("close");
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:32:16.110

可以用`autocomplete._response`自己的函数替换，然后调用默认的jQueryUI函数

```
var __response = $.ui.autocomplete.prototype._response;
$.ui.autocomplete.prototype._response = function(content) {
    __response.apply(this, [content]);
    this.element.trigger("autocompletesearchcomplete", [content]);
}; 
```

然后将事件处理程序绑定到 autocompletesearchcomplete 事件（内容是搜索的结果，一个数组）：

```
$("input").bind("autocompletesearchcomplete", function(event, contents) {
    if(contents.length<1){
     $("#results").html("No Entries Found");
    }
   else{
      $("#results").html("");
   }
}); 
```

[演示](http://jsfiddle.net/AtTJc/)

示例的[来源](https://stackoverflow.com/questions/4718968/detecting-no-results-on-jquery-ui-autocomplete)

# facebook - 向其他用户发送 facebook_question

> ID：12280119
> 
> 赞同：0
> 
> 时间：2012-09-05T11:09:19.487
> 
> 标签：facebook, sdk

使用 Facebook，我可以使用`/me/questions?question=question&options=["answer1","answer2"]`.

但我无法向其他用户发送问题。使用另一个用户的 ID 而不是“我”我得到一个错误：

```
{
    "message": "(#240) Requires a valid user is specified (either via the session or via the API parameter for specifying the user.", 
    "type": "OAuthException", 
    "code": 240
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:17:43.467

基本上，您需要一个包含指定用户 ID 的 publish_stream 权限的令牌。看：

[https://developers.facebook.com/docs/reference/api/user/#questions](https://developers.facebook.com/docs/reference/api/user/#questions)

# android - 保存网页链接的最佳格式

> ID：12280127
> 
> 赞同：0
> 
> 时间：2012-09-05T11:09:42.497
> 
> 标签：android, android-webview, android-file

保存网页链接的最佳格式是什么？

我希望它被保存，以便我可以在我的应用程序中显示链接（或代表链接的文件），然后可以在 WebView 中显示实际页面。

我尝试创建一个 URL 文件，但似乎没有用于打开此文件格式的预定义程序。

PS 我需要这种格式才能被默认浏览器识别

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:20:05.220

找不到合适的格式 - 通过将链接保存到 txt 文件解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:13:39.593

在我看来，SharedPreference 是最好的方法。

# ruby-on-rails - ActiveRecord 模型默认排除某些查询条件？

> ID：12280130
> 
> 赞同：0
> 
> 时间：2012-09-05T11:09:47.123
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, default

在 AR 中是否可以默认排除某些条件，这样您就不必在所有应用程序查询中定义它们？

*   例如，排除所有 Profile.activate == false 的模型配置文件？

我有很多 AR 查询，现在在每个查询中都有一个语句 .where(:active => true ) 以防止将错误的查询添加到记录集中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:12:37.083

查看 default_scope，它似乎可以满足您的要求：[http ://apidock.com/rails/ActiveRecord/Scoping/Default/ClassMethods/default_scope](http://apidock.com/rails/ActiveRecord/Scoping/Default/ClassMethods/default_scope)

# seo - Javascript 提供的工具提示 - 对 Google / SEO 不利？

> ID：12280131
> 
> 赞同：1
> 
> 时间：2012-09-05T11:09:54.823
> 
> 标签：seo, tooltip

我有一个客户想要在他的网站上看到他在竞争对手上看到的功能。它本质上是一组图标，当您将鼠标悬停在它们上时，会出现一个扩展的工具提示，其中包含内容、链接等......

工具提示不是隐藏的 div。工具提示内容不会出现在页面本身的源代码中。我相信工具提示的文本是通过 javascript 从外部文件（例如 XML 文件或类似的东西）调用的。

我的问题是：

a) 由于工具提示内容实际上不在页面上，它甚至会影响 SEO 工作吗？

b) 谷歌会考虑这种垃圾邮件（或充其量是有问题的）吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:16:27.810

> a) 由于工具提示内容实际上不在页面上，它甚至会影响 SEO 工作吗？

它丝毫不会影响SEO的努力

> b) 谷歌会考虑这种垃圾邮件（或充其量是有问题的）吗？

不。

我还应该从可访问性的角度指出，这也是非常糟糕的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T11:17:26.393

a) 不，从外部脚本加载的所有内容都不会被视为与 SEO 相关。所以就像你没有额外的内容一样。

如果您的文本在 display: none 或 visibility: hidden ，它会影响 SEO，但要确保用户可以访问内容。

b) 不，因为您只是想提供额外的信息，而 Google 不会使用它。当内容被隐藏且用户无权访问时，Google 会将其视为垃圾邮件。

# wpf - Web App V Win App - 显示差异

> ID：12280132
> 
> 赞同：0
> 
> 时间：2012-09-05T11:09:55.313
> 
> 标签：wpf, asp.net-mvc, layout

我一直在搜索这方面的任何信息，但没有成功。

我正在更新一个有两个版本的应用程序。一个 WPF Windows 应用程序和一个 MVC Web 应用程序。要求是它们必须看起来相同。

为什么当我将 100px X 100px 的图像添加到 web 应用程序中的图像看起来比 win 应用程序中的图像大时？

如果我添加边距，则项目之间的空间在 win 应用程序中看起来比在 web 应用程序中更多。

我以为我弄错了，所以我对两者进行了物理测量并确认了差异。

我希望两个应用程序中的 100X100 图像看起来相同，并且不想放大尺寸，因为这会扭曲图像。

谁能解释为什么会发生这种情况以及我可以通过什么方式解决它？

非常感谢

弗雷德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:28:16.930

假设在 XAML 或 CSS 中没有对图像应用样式，它们仍然可能不同，因为 WPF 像素是独立于设备的。

我想您可以设置 WPF 应用程序的 ScaleTransform 以匹配所需的大小，但请记住，这将根据显示器大小和 Windows DPI 设置而有所不同。

# c# - 如何为 mongo 反序列化配置类

> ID：12280133
> 
> 赞同：1
> 
> 时间：2012-09-05T11:09:55.087
> 
> 标签：c#, mongodb, serialization, bson

我有一堂课：

```
class Product
{
    public String Name { get; private set; }
    private List<Release> releases;
    private List<Area> areas;

    public List<Release> Releases
    {
        get
        {
            return new List<Release>(releases);
        }
        private set
        {
            releases = value
        }
    }

    public List<Area> Area
    {
        get
        {
            return new List<Area>(areas);
        }
        private set
        {
            areas = value
        }
    }

    public Product(String Name)
    {
        this.Name = Name;
        this.Releases = new List<Release>();
        this.Areas = new List<Area>();
    }

    public Product(String Name, List<Release> Releases, List<Area> Areas)
    {
        this.Name = Name;
        this.Releases = Releases;
        this.Areas = Areas;
    }
} 
```

我的理解是 Mongodb bson 序列化程序将无法自动反序列化`Product`对象，因为所有属性/字段都没有公共读写访问权限，并且我不提供无参数构造函数。我如何才能将其配置为完全可反序列化？我查看了 mongodb.org 上的序列化教程，但它没有涵盖这种情况。我还发现了这个[https://jira.mongodb.org/browse/CSHARP-476](https://jira.mongodb.org/browse/CSHARP-476)增强，但它看起来还没有实现。

目前我有另一个类`ProductDoc`，它具有相同的字段/属性，但它们具有完全的公共读写访问权限，并且我提供了一个无参数构造函数，因此 mongodb 驱动程序可以毫无问题地自动映射这种类型，我只是将`Product`对象转换为`ProductDoc`对象，反之亦然我需要读写数据库。但这似乎很hacky，即使它很简单。

更新：

似乎我的公共属性上的 set 访问器是私有的并不重要，只是属性本身是公共的，并且缺少无参数构造函数似乎也不会影响反序列化过程。谁能确认这是如何工作的？以及[这里](http://www.mongodb.org/display/DOCS/CSharp+Driver+Quickstart#CSharpDriverQuickstart-DecideifyouwanttoworkwiththeBsonDocumentobjectmodelorwithyourowndomainclasses)的信息是否正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:33:53.310

快速入门教程是正确的。你可以使用私有的 getter 和 setter。但是，如果您担心的话，编写一个测试程序来尝试一些东西总是最好的答案。“公共”读/写表示 getter 或 setter 之一需要是公共的。

# java - 阻止 Wicket 中的重复请求

> ID：12280136
> 
> 赞同：4
> 
> 时间：2012-09-05T11:10:13.607
> 
> 标签：java, request, wicket, servlet-filters

检票口页面具有通过按数字键激活的链接。 `onClick()`方法调用数据库逻辑来保存一些值。当用户连续按下按钮并且检票口在完成第一个请求之前又收到一个请求时，就会出现问题。结果是`StalePageException`。

```
 org.apache.wicket.request.mapper.StalePageException
at org.apache.wicket.request.handler.PageProvider.getStoredPage(PageProvider.java:301)
at org.apache.wicket.request.handler.PageProvider.resolvePageInstance(PageProvider.java:257)
at org.apache.wicket.request.handler.PageProvider.getPageInstance(PageProvider.java:165)
at org.apache.wicket.request.handler.ListenerInterfaceRequestHandler.getPage(ListenerInterfaceRequestHandler.java:100)
at org.apache.wicket.request.handler.ListenerInterfaceRequestHandler.respond(ListenerInterfaceRequestHandler.java:165)
at org.apache.wicket.request.cycle.RequestCycle$HandlerExecutor.respond(RequestCycle.java:784)
at org.apache.wicket.request.RequestHandlerStack.execute(RequestHandlerStack.java:64)
at org.apache.wicket.request.cycle.RequestCycle.execute(RequestCycle.java:255)
at org.apache.wicket.request.cycle.RequestCycle.processRequest(RequestCycle.java:212)
at org.apache.wicket.request.cycle.RequestCycle.processRequestAndDetach(RequestCycle.java:283)
at org.apache.wicket.protocol.http.WicketFilter.processRequest(WicketFilter.java:188)
at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:244)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

问题是如何过滤所有请求，直到第一个请求完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:56:06.283

之前在 wicket-user 列表中提出了类似的问题，答案是禁用您的组件/防止进一步交互，直到请求结束。

在您的情况下，只需删除/阻止`onClick()`的行为就足够了。

*   [双击提交按钮](http://apache-wicket.1842946.n4.nabble.com/double-click-on-submit-button-td1922241.html)
*   [防止在 ModalWindow 中双击 AjaxButtons](http://apache-wicket.1842946.n4.nabble.com/Preventing-double-click-of-AjaxButtons-in-ModalWindow-td2289480.html)
*   [如何防止用户双击非 Ajax 组件](http://apache-wicket.1842946.n4.nabble.com/How-to-prevent-user-from-double-clicking-a-non-Ajax-component-td3328308.html)

另外值得一提的是，如果是Ajax请求，可以指定*drop行为*，这样在发送多个请求的场景下，只处理最后一个。您可以通过覆盖`AbstractDefaultAjaxBehavior.getChannelName()`并返回任何以`|d`.

# python - 如何在python中移回一个文件夹

> ID：12280143
> 
> 赞同：38
> 
> 时间：2012-09-05T11:10:37.100
> 
> 标签：python, operating-system

实际上需要走一些路并执行一些命令，下面是代码

**代码**：

```
import os
present_working_directory = '/home/Desktop/folder' 
```

现在我在`folder`

```
if some_condition == true :
    change_path = "nodes/hellofolder"
    os.chdir(change_path)
    print os.getcwd()
if another_condition  == true:
    change_another_path = "nodes" 
    os.chdir(change_another_path) 
    print os.getcwd()

**Result**:
'/home/Desktop/folder/nodes/hellofolder'
python: [Errno 1] No such file or directory 
```

实际上这里发生的事情是当我第一次使用目录时`os.chdir()`，该目录已更改为

`'/home/Desktop/folder/nodes/hellofolder'`,

但是对于第二个，我需要通过移回一个文件夹来运行文件

```
'/home/Desktop/folder/nodes' 
```

那么任何人都可以让我如何将一个文件夹移回python

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-09-05T11:13:04.823

就像你在 shell 中一样。

```
os.chdir("../nodes") 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-07-18T14:51:23.940

这是一种非常独立于平台的方法。

```
In [1]: os.getcwd()
Out[1]: '/Users/user/Dropbox/temp'

In [2]: os.path.normpath(os.getcwd() + os.sep + os.pardir)
Out[2]: '/Users/user/Dropbox/' 
```

然后你有了路径，你可以 chdir 或任何它。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2012-09-05T11:13:20.080

打电话

```
os.chdir('..') 
```

与任何其他语言相同:)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-05-11T18:30:40.993

### 您的问题的确切答案是`os.chdir('../')`

### 用例：

```
Folder1:
    sub-folder1:(you want to navigate here)
Folder2:
    sub-folde2:(you are here) 
```

要导航到`sub-folder1`from `sub-folder2`，您需要这样写“ `../Folder1/sub-folder1/`”

然后，把它放进去`os.chdir("../Folder1/sub-folder1/")`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-05T11:20:41.207

考虑使用绝对路径

```
import os
pwd = '/home/Desktop/folder'

if some_condition == true :
    path = os.path.join(pwd, "nodes/hellofolder")
    os.chdir(path)
    print os.getcwd()
if another_condition  == true:
    path = os.path.join(pwd, "nodes")
    os.chdir(path) 
    print os.getcwd() 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-11-07T17:46:52.277

我的问题是先用这个命令解决的`import os`，然后添加 `os.path.normpath(os.path.abspath(__file__) + os.sep + os.pardir)`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-11T07:27:28.143

上面提到的答案是正确的。以下是更多 a 它通常发生在您的 Python 脚本位于嵌套目录中并且您想从当前工作目录上移一级以加载文件时。

这个想法是简单地重新格式化路径字符串并用'../'作为前缀。所以一个例子就是。

```
'../current_directory/' + filename 
```

此格式类似于在终端中使用时的格式。如有疑问，请启动终端并尝试一些命令。格式反映在编程语言中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-11T12:54:40.580

在您的脚本中定义此函数，并在您想返回一个文件夹时调用它：

```
import os

def dirback():
    m = os.getcwd()
    n = m.rfind("\\")
    d = m[0: n+1]
    os.chdir(d)
    return None 
```

# javascript - Javascript - 在非转义字符上拆分字符串的正则表达式，例如 | 但忽略\|

> ID：12280149
> 
> 赞同：9
> 
> 时间：2012-09-05T11:10:50.183
> 
> 标签：javascript, regex

我从我拆分的文件中读取了一个字符串 | 特点。例如字符串是

```
1|test pattern|prefix|url|postfix 
```

所以 split 必须总是给我 5 个子字符串，在上述情况下是

```
["1", "test pattern", "prefix", "url", "postfix"] 
```

当这五个子字符串中的任何一个包含 | 时，问题就出现了。特点。我会将其存储为转义\|

```
1|test pattern|prefix|url \| title |postfix 
```

现在，您可以看到 string.split('|') 不会给我想要的结果。期望的结果是

```
["1", "test pattern", "prefix", "url \| title ", "postfix"] 
```

我尝试了一些正则表达式，但这些都没有给出预期的结果。

```
string.split(/[^\\]\|/)  //["", "", "prefi", "$url \| $titl", " postfix"] 
```

看起来这只有在负面回顾的情况下才有可能，但我无法让一个工作

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T12:05:12.857

另一种解决方案：

```
"1|test pattern|prefix|url \\| title |postfix"
.replace(/([^\\])\|/g, "$1$1|")
.split(/[^\\]\|/); 
```

也就是说，您需要使用另一个反斜杠来转义初始字符串中的反斜杠以使其工作：

```
"1|test pattern|prefix|url \\| title |postfix"
                           ^ 
```

[可在此处](http://jsfiddle.net/s5stR/)获得工作演示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T11:43:46.767

不幸的是 Javascript 不支持lookbehinds。我认为没有简单的解决方案，但以下可能适合作为解决方法：

```
// use two backslashes in your string!
var string = '1|test pattern|prefix|url \\| title |postfix';

// create an arbitrary unique substitute character
var sub = "-";

string.replace(/\\\|/g,sub).split(/\|/);

/* replace the substituted character again in your array of strings */ 
```

或者你可以使用这样的东西：

```
string.split(//\|\b//) 
```

但是，当涉及空格时，这在某些情况下可能会失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T12:24:45.090

而不是使用`split()`您可以匹配您感兴趣的所有事件：

```
var rx = /([^\\\|]|\\\|?)+/gi, item, items = [];
while (item = rx.exec(str)) {
    items.push(item[0]);
} 
```

[在Fiddle](http://jsfiddle.net/3uJYm/)中查看它的实际效果

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-30T22:45:14.330

```
'foo|bar\\|baz'.match(/(\\\||[^|])+/g) 
```

这将查找包含*转义的拆分字符*或任何不是拆分字符的字符的所有字符序列。

# php - 在 CGridView 单元格中呈现部分

> ID：12280151
> 
> 赞同：0
> 
> 时间：2012-09-05T11:10:54.680
> 
> 标签：php, gridview, yii

我想在 CGridView 的单元格中呈现一个 php 视图文件。

因此我写了这段代码：

```
$this->widget('zii.widgets.grid.CGridView', array(
  'dataProvider'=>$dataProvider,
  'columns'=>array(
      array(
          'value'=>array($this, 'renderPartial("_lineProblems")')
      )))); 
```

但我得到这个错误：

`BookController and its behaviors do not have a method or closure named "renderPartial('_lineProblems' )".`

堆栈跟踪显示这是问题：

```
call_user_func_array(array(BookController, "renderPartial('_lineProblems' )"), array("data" => line, "row" => 0, 0 => CDataColumn)) 
```

我不明白这个错误。$this 是 BookController 的一个实例，而 BookController 是 CController 的子级。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T09:03:54.257

[在另一个Yii 程序员](http://www.yiiframework.com/forum/index.php/topic/35276-renderpartial-in-cgridview-cell/)的帮助下找到了解决方案

```
$controller = $this;

$this->widget('zii.widgets.grid.CGridView', array(
  'dataProvider'=>$dataProvider,
  'columns'=>array(
      array(
          'name'=>'errors',
          'value'=>function($data, $row) use ($controller){
                return $controller->renderPartial('_lineProblems', array('errors'=>$data->errors), true);
          }
      )
  ),
)); 
```

# jquery - 使用 jQuery Ajax 上传 PhoneGap 文件

> ID：12280153
> 
> 赞同：2
> 
> 时间：2012-09-05T11:11:01.473
> 
> 标签：jquery, cordova, file-upload

我使用 PhoneGap 开发移动应用程序，并想问是否有办法使用 jQuery 的 ajax 将文件上传到服务器 (php)。我使用 ajax 是因为我想避免从网页重定向（当然，我想重定向到我自己的页面）。所以，这是我的一些代码：

```
$.ajax({
    url: url,
    data: $("#myform").serialize(),
    type: "post",
    dataType: "json"
}); 
```

我在下面尝试了这些组合，但没有任何效果。任何想法 ？

```
contentType: false
cache: false
processData: false
contentType: "multipart/form-data" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T19:23:15.603

您可能必须使用 PhoneGap 的 FileTransfer 类。

文档和一些示例代码在这里：[http ://docs.phonegap.com/en/2.0.0/cordova_file_file.md.html#FileTransfer](http://docs.phonegap.com/en/2.0.0/cordova_file_file.md.html#FileTransfer)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T20:43:04.087

```
<script>
$(document).ready(function(){
$('#button').click(function(){
    var formData = new FormData($('form')[0]);
    alert(formData)
    $.ajax({
        url: '/testupload2/',  //server script to process data
        type: 'POST',
        xhr: function() {  // custom xhr
            myXhr = $.ajaxSettings.xhr();
            if(myXhr.upload){ // check if upload property exists
            myXhr.upload.addEventListener('progress',progressHandlingFunction, false); // for handling the progress of the upload
            }
            return myXhr;
        },
        //Ajax events

        success: function(data){
            alert('Done')
        },
        error: function(jqXHR, textStatus, errorThrown){
            alert("Some Error!")
        },
        // Form data
        data: formData,
        //Options to tell JQuery not to process data or worry about content-type
        cache: false,
        contentType: false,
        processData: false
    });
});

function progressHandlingFunction(e){
    if(e.lengthComputable){
        $('progress').attr({value:e.loaded,max:e.total});
    }
}
</script> 
```

HTML 正文部分：

```
<body>
<form enctype="multipart/form-data">
<input name="file" type="file" />
<input type="button" id ="button" value="Upload" />
</form>
<progress>
    progressHandlingFunction()
</progress>
</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T11:15:16.490

您不能轻松地使用 AJAX 调用上传文件。

您可以对它进行基础编码或以不同的方式传输它，但是有很多[用于 jQuery 的文件上传插件](https://www.google.com/search?&q=jquery+file+upload+plugin)可以帮助您。

# mysql - 如何在 mysql 中查询图形/分层数据

> ID：12280154
> 
> 赞同：3
> 
> 时间：2012-09-05T11:11:06.023
> 
> 标签：mysql, database, graph, relational-database, hierarchy

假设我有一个层次结构的对象表：

```
A
|--B
|--C
|  +--D
+--E 
```

它们存储在“父子”表中，因此：

```
parent  child
A       B
A       C
C       D
A       E 
```

我如何查询这个以获得上面定义的结构？我想我需要一些能产生如下信息的东西：

```
object  full_path
A       NULL
B       A
C       A
D       A.C
E       A 
```

我无法弄清楚如何处理嵌套超过一层的对象。感觉我可能需要遍历表（不知道这在 SQL 中是否可行），或者使用我以前从未遇到过的某种查询。

附加信息：

1.  A 不必是唯一的孤立对象。
2.  孩子们可能有多个父母，但现在我很高兴能找到更容易解决的方案。`GROUP BY`我可以通过简单的and`MIN`语句将多父结构转换为单父结构。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T18:40:53.693

The other answers are correct, there is no recursive functionality in mysql. This link describes how to approach hierarchies in mysql: [http://explainextended.com/2009/03/17/hierarchical-queries-in-mysql/](http://explainextended.com/2009/03/17/hierarchical-queries-in-mysql/)

I found the link on two other SO questions: [How to do MySQL Looped Join which tests if results are complete?](https://stackoverflow.com/questions/12141637/how-to-do-mysql-looped-join-which-tests-if-results-are-complete) and [Hierarchical Data in MySql](https://stackoverflow.com/questions/2347067/hierarchical-data-in-mysql) .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T23:29:06.603

基本上这行不通！

您需要定义根节点。顺便说一句，您的“树”与您的层次定义不匹配。

这将是一个更好的方法：

```
parent  child
-       A
A       B
A       C
C       D
-       E 
```

减去的父条目是根节点。这反映了你的树。

Sql 不提供层次结构查询。但是你可以迭代一个技巧：

*   [http://forums.asp.net/t/1207630.aspx/1](http://forums.asp.net/t/1207630.aspx/1)

可以在这里找到一个很好的解释：

*   [http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)
*   [mysql递归？](https://stackoverflow.com/questions/4345909/mysql-recursion)

我会尝试找到根节点并使用递归来连接文本。

根节点将是：

```
SELECT * FRON objects WHERE parent = '-' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T14:24:12.137

你不能用 mysql 来做，因为 mysql 不支持递归函数，但如果你不需要无限深度，你可以使用自连接来获取树。否则，您需要编程语言中的递归函数，或者您可以使用嵌套集，这样可以更轻松地选择子树。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T19:36:31.443

MySQL 不支持递归查询。但是，如果您可以使用[嵌套集](http://en.wikipedia.org/wiki/Nested_set_model)来简化获取子树。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-05T11:26:42.140

如果你有一个键（varchar）mu 可以按它排序。关键值如下所示：

```
001
001.001
001.001.001
001.001.002
001.001.003
002
002.001
002.001
003
003.001
...
... 
```

# php - 使用php在curl中获取空变量

> ID：12280157
> 
> 赞同：1
> 
> 时间：2012-09-05T11:11:26.003
> 
> 标签：php, curl, yahoo-api, yahoo-finance

我正在尝试使用 Curl 执行 url，但输出为空。

但是，如果我们在浏览器中复制粘贴相同的 url，我们将获得价值

```
http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.quotes%20where%20symbol%20in%20%28%22YHOO%22,%22AAPL%22,%22GOOG%22,%22MSFT%22%29&env=http://datatables.org/alltables.env&format=json 
```

但是，当我尝试使用 Curl 在 php 中获取价值时，我得到 Null

php代码

```
 <?php

$BASE_URL = "http://query.yahooapis.com/v1/public/yql"; 

    // Form YQL query and build URI to YQL Web service
    $yql_query = 'select * from yahoo.finance.quotes where symbol in ("YHOO","AAPL","GOOG","MSFT")&env=http://datatables.org/alltables.env';
    $yql_query_url = $BASE_URL . "?q=" .$yql_query. "&format=json";

    // Make call with cURL
    $session = curl_init($yql_query_url);
    curl_setopt($session, CURLOPT_RETURNTRANSFER,true);
    $json = curl_exec($session);

    echo "<pre>";
    print_r($json);exit;

?> 
```

有什么建议吗？？？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:14:24.850

您需要为此使用`json_decode`。

检查手册 -

[http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

现在检查这个工作代码——（至少在我的结尾工作）——

```
<?php

$yql_query_url = "http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.quotes%20where%20symbol%20in%20%28%22YHOO%22,%22AAPL%22,%22GOOG%22,%22MSFT%22%29&env=http://datatables.org/alltables.env&format=json"; 

    // Make call with cURL
    $session = curl_init($yql_query_url);
    curl_setopt($session, CURLOPT_RETURNTRANSFER,true);
    $json = curl_exec($session);

$jsonnew=json_decode($json,true);

    echo "<pre>";
    print_r($jsonnew);

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T11:35:07.330

以下代码对我有用

```
<?php

$BASE_URL = "http://query.yahooapis.com/v1/public/yql"; 
    $query = 'select%20*%20from%20yahoo.finance.quotes%20where%20symbol%20in%20%28"YHOO","AAPL","GOOG","MSFT"%29&env=http://datatables.org/alltables.env&format=json';
    echo $yql_query_url = $BASE_URL . "?q=" .$query;

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL,$yql_query_url);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

    $content = curl_exec ($ch);
    curl_close ($ch);
    print_r($content);
?> 
```

查询必须正确编码。

核实

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T13:52:40.237

我得到了错误。

在 CURL 中使用之前，我必须使用“urlencode”函数对 Url 进行编码

IE

代替

```
$yql_query_url = $BASE_URL . "?q=" .$yql_query. "&format=json"; 
```

我必须使用

```
$yql_query_url = $BASE_URL . "?q=" .urlencode($yql_query). "&format=json"; 
```

它有效:) 大声笑

# ruby - 捆绑安装未从 gemfile 安装 gem

> ID：12280160
> 
> 赞同：1
> 
> 时间：2012-09-05T11:11:30.853
> 
> 标签：ruby, ruby-on-rails-3, bundler

我正在尝试在 Windows 7 机器上设置我的 rails 应用程序。我使用安装程序安装了 Ruby 1.9.3。我还安装了 Rails 3.2.2。

现在，我正在尝试从我的应用程序根目录运行 bundle install 。此命令用于安装所有必需的 gem。但是，当我在这台新机器上运行时，它没有安装。我必须一一手动安装所有的宝石。

我知道这有点奇怪，但我第一次面对这个..!!

编辑1：请参阅下面的屏幕截图。

注意：在此处发布之前，我已经手动安装了一些 gem。我在下面遇到的与 DevKit 相关的错误刚刚在我尝试安装 json gem 时出现。

![在此处输入图像描述](../Images/b7e5bdfc344732286b94e0e43790c151.png)

手动安装更多 gems 后：

![在此处输入图像描述](../Images/5279cba22443e19a352a516761466f9f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:48:36.050

如果您阅读该错误，它会告诉您需要[DevKit](http://rubyinstaller.org/add-ons/devkit/)才能在 Windows 上安装该 gem。所以安装它并按照说明进行操作，然后再试一次；)`json`安装 gem 之后，它应该安装`Gemfile`.

（`json`gem 是 Rails 的依赖项）

# activerecord - 带有自定义参数的关系中的 Yii 复合键

> ID：12280167
> 
> 赞同：0
> 
> 时间：2012-09-05T11:11:58.130
> 
> 标签：activerecord, yii, has-many, composite-key, relation

我想在 ActiveRecord 中使用复合键。我有两张桌子。

报价和评论。报价包含 pk - **id**；评论 pk 是复合**模块**、**节**、**cid**

**module** - 模块名称，评论来自哪里。

**section** - 此模块的部分

**cid** - 标识符，在这种情况下，这是报价的 id。

在评论中，我像这样定义了主键。

```
public function primaryKey()
{
    return array('module', 'section', 'cid');
} 
```

下一个，我想获取那些记录，与报价相关的内容。因此，在 Quotes 我声明了关系：

```
'comments' => array(self::HAS_MANY, 'Comment', 'module, section, cid', 'params' => array(
                ':ypl0' => '"quotes"',
                ':ypl1' => '"quote"',
                ':ypl2' => 'id'
            )), 
```

所需的结果是：

```
SELECT * FROM quotes q

LEFT JOIN comments c ON (c.cid = q.id AND module = "quotes" AND section = "quote")

WHERE c.id IS NULL 
```

SQL 正在工作，关系 - 不是。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:39:59.267

尝试以下未经测试的代码

```
'comments' => array(self::HAS_MANY, 'Comment', 'cid','condition'=>'module=:param1 AND section=:param2','params' => array(':param1' => 'quotes',':param2' => 'quote',)), 
```

# struts2 - Struts2 - 如何在填充选择框的选项时转义值

> ID：12280169
> 
> 赞同：0
> 
> 时间：2012-09-05T11:11:59.863
> 
> 标签：struts2, struts

我有以下代码：

```
<s:select name="user.primaryGroup.id" list="#groupListAction.groups" listKey="id" listValue="name"
  headerKey="" headerValue="Please select" id="addUser-primaryGroup" /> 
```

问题是选项文本将具有未转义的 HTML，例如`<b>Name</b>`. 这将导致选项以粗体显示。我怎样才能防止这种情况？只有`<s:property/>`标签似乎逃脱了 html。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:20:00.760

那是真的.. 根据文档，只有[属性标签](http://struts.apache.org/2.0.12/docs/property.html)具有`escape`默认设置为 true 的参数。[选择标签](http://struts.apache.org/2.0.12/docs/select.html)没有这样的参数，所以恐怕您必须转义HTML服务器端...您可以使用JSoup或类似的库进行HTML操作...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-27T15:55:04.767

您可以改用这种方法： html select with struts iterator `<s:iterator`>

```
<select id="xxx" size="1" name="xxx">
   <option value=""> <s:text name="page.search.emptyOption" /></option>          
   <s:iterator value="xxx">                     
      <s:if test="%{key.indexOf('|') == -1}">
         <option value="">XXXXXXXXXXXXXXXXX</option>
      </s:if>
   </s:iterator>
</select> 
```

这将允许您使用`<s:property>`标签控制情况并逃脱它。

# iphone - SimpleAudioEngine 无法播放

> ID：12280194
> 
> 赞同：3
> 
> 时间：2012-09-05T11:13:07.720
> 
> 标签：iphone, objective-c, ios5, cocos2d-iphone, simpleaudioengine

我想在我的游戏中播放背景音乐和音效。我导入 SimpleAudioEngine.h 并调用方法：

```
[[SimpleAudioEngine sharedEngine] playBackgroundMusic:@"backgroundMusic.caf"];
[[SimpleAudioEngine sharedEngine] playEffect:@"soundEffect.caf"]; 
```

但它不适用于装有 iOS 5.1 的 iPod Touch 上的 iOS 5.1 模拟器。.caf 扩展名可能是问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:29:05.447

据我记得，CocosDenshion 中的音效是用 OpenAL 实现的。它适用于 .caf 文件。确保将您的 .caf 文件复制到应用程序包中。也许它根本找不到具有这样名称的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T09:22:52.797

你应该先 preloadEffect [[SimpleAudioEngine sharedEngine] preloadEffect: [NSString stringWithUTF8String: pszFilePath]];

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T12:51:42.167

ru 导入这个文件...

```
 #import "SimpleAudioEngine.h" 
```

如果是，那么 X-Code 中没有问题.. 尝试任何其他文件或调试您的代码..

# html - dl可以出现在两列吗？

> ID：12280195
> 
> 赞同：0
> 
> 时间：2012-09-05T11:13:13.340
> 
> 标签：html

我知道如何使用`dl dt dl`，但他们只是在一列中列出？可以分两列吗？

还是我必须追求桌子而不是`dl`？有什么想法吗？

对不起，我需要多说一点。我的意思是我可以只使用一个 dl，一个 dt 在左一个右。所以例如代码`<dl><dt>1</dt><dt>2</dt><dt>3</dt><dt>4</dt><dt>5</dt><dt>6</dt></dl>`

有什么办法可以让它像 1 2 3 4 5 6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:31:50.923

如果您需要`dd`'s in column 结构，只需为它们分配一个浮点数，如下所示：

```
dl {
    width: 80%;
}
dt {
    width: 8em;
}
dd {
    float:left;           
    margin-left: 1em;
} 
```

[jsfiddle 演示](http://jsfiddle.net/mQJq7/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:35:54.810

如果您希望列表看起来像数据列表，那么您必须仅使用 dl,dt 标签。或者您以不同的样式显示它，或者您希望将数据显示为 2 列，那么您最好遵循 **David Thomas** 指定的 url。然后您也不满意，您可以通过使用一些工具创建相同的图像来显示该数据，例如照相馆或其他...

# javascript - 无法打印道场增强网格

> ID：12280197
> 
> 赞同：0
> 
> 时间：2012-09-05T11:13:15.723
> 
> 标签：javascript, dojo, grid

我有一个增强的网格并激活了“打印机”插件。此外，我制作了一个 dijit/button 并将其连接到一个 onClick 事件，该事件调用一个打印方法。该事件被触发，所以没有问题。问题是，它不起作用。我在 Opera 控制台中收到以下消息：

```
Uncaught exception: TypeError: Cannot convert 'str' to object

Error thrown at line 511, column 21 in <anonymous function: trim>(str) in http://localhost/ci/assets/js/dojo/_base/lang.js:
return str.trim();
called from line 131, column 3 in <anonymous function: _loadCSSFiles>(cssFile) in http://localhost/ci/assets/js/dojox/grid/enhanced/plugins/Printer.js:
cssFile = lang.trim(cssFile);
called from line 282, column 5 in <anonymous function: map>(arr, callback, thisObject, Ctr) in http://localhost/ci/assets/js/dojo/_base/array.js:
out[i] = callback(arr[i], i, arr);
called from line 130, column 2 in <anonymous function: _loadCSSFiles>(cssFiles) in http://localhost/ci/assets/js/dojox/grid/enhanced/plugins/Printer.js:
var dl = array.map(cssFiles, function(cssFile){
called from line 226, column 2 in <anonymous function: _wrapHTML>(title, cssFiles, body_content) in http://localhost/ci/assets/js/dojox/grid/enhanced/plugins/Printer.js:
return this._loadCSSFiles(cssFiles).then(function(cssStrs){
called from line 125, column 3 in <anonymous function: exportSelectedToHTML>(str) in http://localhost/ci/assets/js/dojox/grid/enhanced/plugins/Printer.js:
_this._wrapHTML(args.title, args.cssFiles, args.titleInBody + str).then(onExported);
called from line 128, column 2 in <anonymous function: exportSelected>(type, writerArgs, onExported) in http://localhost/ci/assets/js/dojox/grid/enhanced/plugins/Exporter.js:
return onExported(this._goThroughGridData(this.grid.selection.getSelected(), writer));
called via Function.prototype.apply() from line 375, column 68 in <anonymous function: hitch>() in http://localhost/ci/assets/js/dojo/_base/lang.js:
return method.apply(scope, arguments || []);
called from line 124, column 2 in <anonymous function: exportSelectedToHTML>(args, onExported) in http://localhost/ci/assets/js/dojox/grid/enhanced/plugins/Printer.js:
this.grid.exportSelected("table", args.writerArgs, function(str){
called from line 94, column 2 in <anonymous function: printSelected>(args) in http://localhost/ci/assets/js/dojox/grid/enhanced/plugins/Printer.js:
this.exportSelectedToHTML(args, lang.hitch(this, this._print)); 
```

这是事件的代码：

```
 require([
                    "dijit/registry"
                ],function(registry) {
                    var grid = registry.byId('grid');
                    grid.printSelected({
                        "title": "test"
                    });
                }); 
```

有人知道我能做什么来让这个插件工作吗？
PS：我也试过用谷歌浏览器打印，但这都不行……

# php - 使用 php mysql 每行显示 2 或 3 张图像

> ID：12280198
> 
> 赞同：0
> 
> 时间：2012-09-05T11:13:18.003
> 
> 标签：php, mysql

嗨，我从 mysql db 表中显示图像，但它以一种方式显示，一行有一张图像。但我每行需要 3 或 4 张图像。我的编码如下。请给出一些想法。

```
<?php 
    include_once("config.php");
    $result=mysql_query("SELECT * FROM merchant");
    while($res=mysql_fetch_array($result))
    {
?>
<?php echo $res['description'];?></p>
    <img src="<?php echo $res['image'];?>" width="80" height="80"/>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T11:17:00.603

像这样在桌子上做，*你可能需要稍微修复它，但它是如何工作的*

```
<table>

<?php 
        include_once("config.php");
        $result=mysql_query("SELECT * FROM merchant");
        $count = 0;
        while($res=mysql_fetch_array($result))
        {
            if($count==3) //three images per row
            {
               print "</tr>";
               $count = 0;
            }
            if($count==0)
               print "<tr>";
            print "<td>";
            ?>
                    <?php echo $res['description'];?></p>

                    <img src="<?php echo $res['image'];?>" width="80" height="80"/>

                <?php
            $count++;
            print "</td>";
        }
        if($count>0)
           print "</tr>";
        ?>

</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:26:43.987

使用 a`<table>`来显示。

```
<?php 
    include_once("config.php");
    $result=mysql_query("SELECT * FROM merchant");
    $count = 0;
    echo '<table>';
    while($res = mysql_fetch_array($result))
    {
        if($count % 2 == 0) echo '<tr>';
        ?>
    <td>
        <p><?php echo $res['description'];?></p>
        <img src="<?php echo $res['image']; ?>" width="80" height="80"/>
    </td>
<?php
    if($count % 2 == 0) echo '</tr>';
} ?> 
```

# windows-phone-7 - XNA 内部集成

> ID：12280201
> 
> 赞同：0
> 
> 时间：2012-09-05T11:13:21.293
> 
> 标签：windows-phone-7, xna

我正在尝试将“inneractive SDK”集成到 WP7 的 XNA 游戏中。它应该很简单：

```
InneractiveAd.DisplayAd("MY_APP_ID", InneractiveAd.IaAdType.IaAdType_Banner, ??? , 120); 
```

但我不知道在类型的“rootGrid”字段中放什么：System.Windows.Control.Grid

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T20:38:54.597

System.Windows.Control.Grid 是 Silverlight 控件，您尝试使用的广告服务适用于 Silverlight Windows Phone 应用程序，而不是 XNA。你可以

*   创建一个 Silverlight/XNA 项目，将您当前的 XNA 游戏移动到该项目的一个框架中，并将广告放置在另一个框架中；或者

*   使用更通用的广告控件，例如[这个](http://wp7adrotator.codeplex.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:38:45.243

我叫 Nirit，是 inneractive 的支持经理。

我们的 WP7 SDK 目前支持 Silverlight，XNA 版本还没有准备好，但它确实在我们的路线图上。

在 Mango 上，XNA 可以与 Silverlight 结合使用，因此在这种情况下，您可以使用我们的 SDK。有关组合 XNA 和 Silverlight 项目的更多信息，请查看[此链接](http://msdn.microsoft.com/en-us/library/hh202938%28v=vs.92%29.aspx)。

如果 Silverlight 不适合您，请尝试我们的服务器 API（M2M 协议）。

我们的服务器 API 可以在[这里](https://inneractive.jira.com/wiki/display/DevWiki/Server+API+integration)找到。

如果您有任何其他问题、建议或意见，请随时通过仪表板上的“联系支持”链接与我联系。

# iphone - 我应该为每个标签栏使用一个单独的 UINavigationController

> ID：12280202
> 
> 赞同：5
> 
> 时间：2012-09-05T11:13:25.897
> 
> 标签：iphone, objective-c, ios, xcode, cocoa

根据[Apple](https://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/CombiningViewControllers.html)，我可以组合`UINavigationController`和`UITabBarController`使用代码，例如

```
MyViewController1* vc1 = [[MyViewController1 alloc] init];
MyViewController2* vc2 = [[MyViewController2 alloc] init];
MyViewController3* vc3 = [[MyViewController3 alloc] init];

MyNavRootViewController* vc4 = [[MyNavRootViewController alloc] init];
UINavigationController* navController = [[UINavigationController alloc]
                        initWithRootViewController:vc4];

NSArray* controllers = [NSArray arrayWithObjects:vc1, vc2, vc3, navController, nil];
tabBarController.viewControllers = controllers; 
```

在这个设置中，只有**vc4**有`UINavigationController`，但是如果我想要**vc1-vc3**也有`UINavigationController`？

```
MyViewController1* vc1 = [[MyViewController1 alloc] init];
UINavigationController* nv1 = [[UINavigationController alloc]
                        initWithRootViewController:vc1];

MyViewController1* vc2 = [[MyViewController2 alloc] init];
UINavigationController* nv2= [[UINavigationController alloc]
                        initWithRootViewController:vc2];

MyViewController1* vc3 = [[MyViewController3 alloc] init];
UINavigationController* nv3 = [[UINavigationController alloc]
                        initWithRootViewController:vc3];

NSArray* controllers = [NSArray arrayWithObjects:nv1, nv2, nv3, nil];
tabBarController.viewControllers = controllers; 
```

这是正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:16:02.860

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

// Override point for customization after application launch.

self.tabBarController = [[[UITabBarController alloc] init] autorelease];

 self.tabBarController.viewControllers = [self initializeTabBarItems];
self.navigationController = [[UINavigationController alloc]init];
[self.navigationController setNavigationBarHidden:YES];
self.window.rootViewController = self.navigationController;
[self.navigationController pushViewController:_tabBarController animated:YES];
[self.window makeKeyAndVisible];
return YES;
}
- (NSArray *)initializeTabBarItems
{
NSArray * retval;

/* Initialize view controllers */
UIViewController *viewController1 = [[[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil] autorelease];
UIViewController *viewController2 = [[[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil] autorelease];
UIViewController *viewController3 = [[[ThirdViewController alloc]initWithNibName:@"ThirdViewController" bundle:nil]autorelease];
UIViewController *viewController4 = [[[FourthViewController alloc] initWithNibName:@"FourthViewController" bundle:nil] autorelease];
UIViewController *viewController5  = [[[FivfthViewController alloc] initWithNibName:@"FivfthViewController" bundle:nil] autorelease];

/* Initialize navigation controllers */
UINavigationController * navigationController1 = [[UINavigationController alloc] initWithRootViewController:viewController1];
UINavigationController * navigationController2 = [[UINavigationController alloc] initWithRootViewController:viewController2];
UINavigationController * navigationController3 = [[UINavigationController alloc] initWithRootViewController:viewController3];
UINavigationController * navigationController4 = [[UINavigationController alloc] initWithRootViewController:viewController4];
UINavigationController * navigationController5 = [[UINavigationController alloc] initWithRootViewController:viewController5];

/*  Release View Controllers */
[viewController1 release];
[viewController2 release];
[viewController3 release];
[viewController4 release];
[viewController5 release];

/* Stuff Navigation Controllers into return value */
retval = [NSArray arrayWithObjects:viewController1,viewController2,viewController3,viewController4,viewController5,nil];

/* Release Navigation Controllers */
[navigationController1 release];
[navigationController2 release];
[navigationController3 release];
[navigationController4 release];
[navigationController5 release];

return (retval);
} 
```

你可以试试这个....

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T11:27:38.293

是的，霍华德，你的方法很好。[**苹果**](https://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/CombiningViewControllers.html)也这么说。我在使用时也遵循相同的方法，它对我很有用`UITabbarController`。`UINavigationController`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T11:16:54.380

TabBarController 的每个选项卡都应该有一个 UINavigationController。所以你的第二种方法是正确的。我不认为您可以为所有选项卡重用相同的导航控制器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T11:20:46.170

**是的，您的方法是正确的。**

如果您必须将视图导航到选项卡，那么该选项卡应该具有导航控制器。

```
UINavigationController * navigationCtrl = [[UINavigationController alloc] initWithRootViewController:firstTabViewCtrl];
[arrTabs addObject:navigationCtrl]; 
```

无论哪种方式，选项卡内都不需要导航控制器。

```
 [arrTabs addObject:firstTabViewCtrl]; 
```

# email - 可以发送和接收从本地主机发送的邮件的软件

> ID：12280204
> 
> 赞同：0
> 
> 时间：2012-09-05T11:13:33.030
> 
> 标签：email

我正在使用一个软件，它可以从本地主机发送邮件，然后接收那些发送的电子邮件并向我展示。而且我能够确定我的应用程序的邮件功能正常工作。

但是最近我的硬盘崩溃了，我丢失了所有以前的数据。所以现在我再次搜索该软件，但问题是我忘记了它的名称..

有没有人用过这种软件...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:24:09.550

您可能指的是“剪纸”：

[http://papercut.codeplex.com/](http://papercut.codeplex.com/)

# vba - 访问 ListBox 属性时出现无效限定符错误

> ID：12280208
> 
> 赞同：1
> 
> 时间：2012-09-05T11:13:41.090
> 
> 标签：vba, ms-access

这里 lstName 是 Access 表单中列表框的名称。

```
Private Sub cmdUp(lstName As String, SQLName As String, IDName As String, ColumnName As String)
  Dim sText As String
  Dim pText As String
  'check: only proceed if there is a selected item
  If lstName.ItemsSelected.Count = 1 Then
  (...) 
```

调用过程后：

```
Call cmdUp(lstSchemaName.Name, "eo_ListSchema", "SchemaID", "SchemaName") 
```

我在这一行得到错误：

```
If lstName.ItemsSelected.Count = 1 Then 
```

错误是：

```
Invalid Qualifier 
```

所以基本上 VBA 无法理解那个 lstName。是一个列表，它应该从中找到选择了多少项。我发现在 VBA 中“字符串不是对象，因此字符串变量上没有可以调用的方法”。

应该有一个简单的解决方案，但我找不到。如何处理此类问题？

非常感谢任何帮助！

埃德加拉斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:28:31.350

您需要在 cmdUp 过程中将 ListBox 作为 Lsitbox 传递

```
Private Sub cmdUp(lstName As ListBox, SQLName As String, IDName As String, ColumnName As String) 
```

或使用其名称找到适当的控件，例如：

```
Dim myListBox As ListBox = Me.FindControl(lstName)
if myListBox.ItemSelected.Count = 1 Then
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T11:22:51.053

您可以将列表框作为列表框传递，字符串将没有任何属性，或者您可以传递字符串和表单对象，这可能更安全。

```
Call cmdUp(Me, lstSchemaName.Name, "eo_ListSchema", "SchemaID", "SchemaName")

Private Sub cmdUp(frm as Form, lstName As String, _
     SQLName As String, IDName As String, ColumnName As String)

   Frm(lstName) ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T11:23:45.703

`lstName`因为您传入的只是列表框的字符串名称，而不是实际的列表框实例。

由于这`lstName`是一个字符串，调用`lstName.ItemsSelected`无效。

您应该能够改为传递列表框：

```
Private Sub cmdUp(lstBox As ListBox, SQLName As String, IDName As String, ColumnName As String)
... 
```

然后使用：

```
Call cmdUp(lstSchemaName, "eo_ListSchema", "SchemaID", "SchemaName") 
```

# php - cakePHP2x 中的 AuthComponent::getModel() 替代方案是什么？

> ID：12280209
> 
> 赞同：1
> 
> 时间：2012-09-05T11:13:42.197
> 
> 标签：php, cakephp-2.0

我正在使用记住我的组件。实际上，将 CakePHP 1.3 应用程序迁移到 CakePHP 2x。我被这最后一段代码卡住了，它是 RememberMeComponent。

我在这里看到的设置 cookie 的脚本是：

```
function make( ) {
    $data = array(
        $this->ident_field => $this->_create_token( ),
        $this->token_field => $this->_create_token( ),
    );

    $this->Cookie->name = $this->cookie_name;
    $this->Cookie->time = $this->period;
    $this->Cookie->key = base64url_encode(implode('::', $data));
    $this->Cookie->secure = true;

    $this->Auth->getModel()->save(array($this->Auth->userModel => array_merge(array('id' => $this->Auth->user('id')), $data)), false);

} 
```

并检查：

```
function check( ) {
    $cookie = $this->Cookie->read($this->cookie_name);

    if (empty($cookie)) {
        return false;
    }

    $data = explode('::', base64url_decode($cookie));

    $user = $this->Auth->getModel( )->find('first', array(
        'conditions' => array(
            $this->Auth->userModel.'.ident' => $data[0],
        ),
    ));

    if ( ! $user) {
        return false;
    } 
```

函数 base64url_encode 在引导程序中定义 - 因此，它是有效的函数。

现在有一行：

```
$this->Auth->getModel()->save(array($this->Auth->userModel => array_merge(array('id' => $this->Auth->user('id')), $data)), false); 
```

这给了我一个错误：

```
Error: Call to undefined method AuthComponent::getModel()   
File: /var/www/FlintStones/Controller/Component/RememberMeComponent.php 
```

我检查了[Auth Component](http://api.cakephp.org/class/auth-component)文档，但是它没有任何选项可以让我找到 auth 的模型。

提前致谢。

PS：我们不能直接转到自动登录（您可能已经想到了），或者如果您也可以参考快速分步，请分享。我什至可能会考虑这一点，但到目前为止，它只是为了获得 Auth 模型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T21:17:02.930

I had the same issue in the same component.

[How to get $settings data out of CakePHP 2.0 FormAuthenticate object](https://stackoverflow.com/questions/8198125/how-to-get-settings-data-out-of-cakephp-2-0-formauthenticate-object)

Summary:

Use `$this->Auth->userModel` to get the model. If the value is `null`, it will default to `'User'`.

# event-handling - javafx.fxml.LoadException：找不到控制器方法“MyFunction”

> ID：12280215
> 
> 赞同：0
> 
> 时间：2012-09-05T11:14:09.923
> 
> 标签：event-handling, javafx-2

如下所述，我有一个链接到 TextField （`text`变量）的 EventHandler，并且我想从存在于同一类（MyFunction）中的这个处理程序中调用一个函数，所以我收到了错误（这篇文章的标题）：

**代码 ：**

```
class Example implements Initializable{
  //...
  public void initialize(URL fxmlFileLocation, ResourceBundle resources) {
    //...
    text.setOnKeyPressed(new EventHandler<KeyEvent>(){
        @Override
        public void handle(KeyEvent event) {
            if(event.getCode() == KeyCode.ENTER){

                MyFunction(text.getText());
            }
        }
    });
  //...
  }//function initialize ends here

  public void MyFuction(String text){
      //...
  }
 //...
 }//Class ends here 
```

我正在使用 javaFX 2.2，我希望我的要求很明确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T20:33:35.703

问题似乎出在您的 FXML 文件中。您可能正在做这样的事情：`<Button text="Button" onAction="#MyFuction"/>`虽然`onAction`处理程序应该接受扩展类型的单个参数`javafx.event.Event`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T11:54:39.173

试着把你的方法放在`@FXML`前面。`MyFuction()`

# c - pthread_join 函数在执行后杀死线程还是我们需要调用 pthread_cancel/pthread_exit？

> ID：12280216
> 
> 赞同：2
> 
> 时间：2012-09-05T11:14:16.087
> 
> 标签：c, linux, pthreads

`pthread_join()`函数在执行后杀死线程或者我们需要调用`pthread_cancel()`/ `pthread_exit()`？

我正在调用`pthread_cancel()`/ `pthread_kill()`，它返回 3 即没有附加线程 ID 的线程。

```
#include <stdio.h>
#include <pthread.h>
#include <unistd.h>
#include <signal.h>

void * run (void *);

int main() {
pthread_t p1, p2;
int a = 9;
printf("%d\n", pthread_create(&p1, NULL, &run, (void*)&p1));
printf("%d\n", pthread_create(&p2, NULL, &run, (void*)&p2));

printf("%d\n", pthread_join(p1, NULL));
//usleep(1000);
printf("%d\n", pthread_join(p2, NULL));

printf("before exit\n");
printf("%d\n", pthread_cancel(p1));
printf("after exit\n");
printf("%d\n", pthread_cancel(p2));
printf("both thread exited\n");

printf("%d\n", pthread_join(p1, NULL));
printf("%d\n", pthread_join(p2, NULL));
printf("terminated\n");

printf("%d\n", pthread_kill(p1, 0));
printf("%d\n", pthread_kill(p2, 0));
printf("ext\n");

printf("%d\n", pthread_join(p1, NULL));
printf("%d\n", pthread_join(p2, NULL));
printf("jion\n");

return 0;
}

void *run (void *p) {

int *i = (int*)p;
printf("created i = %d\n", *i);
} 
```

这是我正在使用的代码。在这个 pthread_cancel on wards 中，所有函数都返回 3，这意味着线程已经被杀死。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T11:16:39.827

`pthread_join`不杀死线程，它等待线程完成。如果你想杀死一个线程，然后使用`pthread_kill`. 但这必须在*之前* `pthread_join`完成，否则线程已经退出。

`pthread_cancel`请求线程在下一个取消点终止，并且可能比使用`pthread_kill`.

`pthread_exit`退出当前线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:17:45.203

`pthread_join()`添加后

```
/* Last thing that main() should do */
   pthread_exit(NULL); 
```

有关更多详细信息，请参阅[此处](https://computing.llnl.gov/tutorials/pthreads/)。

pthread_join() 用于使 main() 线程等待，直到所有线程完成它的执行。当特定线程完成它的执行时，控制到达 pthread_join()。因此，如果您尝试取消/终止该特定线程，则会返回错误。

**示例代码**

```
 #include <pthread.h>
    #include <stdio.h>
    #include <stdlib.h>
    #define NUM_THREADS 4

    void *BusyWork(void *t)
    {
       int i;
       long tid;
       tid = (long)t;
       printf("Thread %ld starting...\n",tid);
       pthread_exit((void*) t);                 //Exits that current thread.
    }

    int main (int argc, char *argv[])
    {
       pthread_t thread[NUM_THREADS];
       int rc;
       long t;
       void *status;

       for(t=0; t<NUM_THREADS; t++) {
          printf("Main: creating thread %ld\n", t);
          rc = pthread_create(&thread[t], NULL, BusyWork, (void *)t); 
          if (rc) {
             printf("ERROR; return code from pthread_create() is %d\n", rc);
             exit(-1);
             }
          }

      /* Wait for completion */
       for(t=0; t<NUM_THREADS; t++) {
          rc = pthread_join(thread[t], &status);
          if (rc) {
             printf("ERROR; return code from pthread_join() is %d\n", rc);
             exit(-1);
             }
printf("Main: completed join with thread %ld having a status of %ld\n",t,(long)status);
          }

    printf("Main: program completed. Exiting.\n");
    pthread_exit(NULL); // Exits main thread.
    } 
```

对于@Joachim Pileborg

```
#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>
#define NUM_THREADS 4

void *BusyWork(void *t)
{
   int i;
   long tid;
   tid = (long)t;

   printf("Thread %ld starting...\n",tid);

   for(i = 0; i <10000000; i++)
        printf("\n Thread: %ld,  %d", tid, i);

   pthread_exit((void*) t);                 //Exits that current thread.
}

int main (int argc, char *argv[])
{
   pthread_t thread[NUM_THREADS];
   int rc;
   long t;
   void *status;

   for(t=0; t<NUM_THREADS; t++) {
      printf("Main: creating thread %ld\n", t);
      rc = pthread_create(&thread[t], NULL, BusyWork, (void *)t);
      if (rc) {
         printf("ERROR; return code from pthread_create() is %d\n", rc);
         exit(-1);
         }
      }

//printf("Main: program completed. Exiting.\n");
pthread_exit(NULL); // Exits main thread(work will be done).
//return 0;//( Threads will exit once main exits.)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T11:18:50.490

一些上下文会很好......但如果你只是在等待一个线程（大概你只有一个你关心的）终止/返回，那么 pthread_join 就足够了。

> pthread_join() 函数等待线程指定的线程终止。如果该线程已经终止，则 pthread_join() 立即返回。

[http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_join.3.html](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_join.3.html)

检查手册页的使用/警告。

# java - struts.xml 看不到我的图块

> ID：12280219
> 
> 赞同：1
> 
> 时间：2012-09-05T11:14:24.773
> 
> 标签：java, jsp, struts2, tiles

嗨，我是 Struts2 的新手，我有这样的问题

我用瓷砖写网络应用程序这是我的应用程序的结构

![在此处输入图像描述](../Images/acce8b0354a1bd4892324677db2402a0.png)

这是我的`web.xml`

```
<filter>
    <filter-name>struts2</filter-name>
    <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<listener>
    <listener-class>
        org.apache.struts2.tiles.StrutsTilesListener
    </listener-class>
</listener>
<context-param>
    <param-name>tilesDefinitions</param-name>
    <param-value>/WEB-INF/tile/tiles.xml</param-value>
</context-param> 
```

这是我的`tiles.xml`

```
<tiles-definitions>
    <definition name="baseLayout" template="/jspf/base_layout/base_layout.jsp">
        <put-attribute name="title" value="" />
        <put-attribute name="header" value="/jspf/header.jsp" />
        <put-attribute name="menu" value="/jspf/menu.jsp" />
        <put-attribute name="body" value="" />
        <put-attribute name="footer" value="/jspf/footer.jsp" />
    </definition>
    <definition name="news.tiles" extends="baseLayout">
        <put-attribute name="title" value="index.title" />
        <put-attribute name="body" value="/jsp/news_list.jsp" />
    </definition>
    <definition name="create.tiles" extends="baseLayout">
        <put-attribute name="title" value="news.add" />
        <put-attribute name="body" value="/jsp/add_news.jsp" />
    </definition>
    <definition name="edit.tiles" extends="baseLayout">
        <put-attribute name="title" value="news.edit" />
        <put-attribute name="body" value="/jsp/edit_news.jsp" />
    </definition>
</tiles-definitions> 
```

那是我的`struts.xml`

```
<struts>
    <constant name="struts.enable.DynamicMethodInvocation"
              value="false" />
    <constant name="struts.custom.i18n.resources" value="properties.locale" />
    <constant name="struts.devMode" value="false" />

    <package name="tiles" extends="struts-default" namespace="/">
        <result-types>
            <result-type name="tiles"
                         class="org.apache.struts2.views.tiles.TilesResult" />
        </result-types>
        <action name="newsList" class="by.bulgak.newsmanagement.action.NewsAction" >
            <result type="tiles">news.tiles</result>
        </action>
        <action name="addNewsForm" class="by.bulgak.newsmanagement.action.AddNewsFormAction">
            <result type="tiles">create.tiles</result>
        </action>
        <action name="editNewsForm" class="by.bulgak.newsmanagement.action.EditNewsFormAction">
            <result type="tiles">edit.tiles</result>
        </action>

        <action name="addNews" class="by.bulgak.newsmanagement.action.AddNewsAction">
            <result name="success"></result>
            <result name="error"></result>
        </action>

        <action name="deleteNews" class="by.bulgak.newsmanagement.action.DeleteNewsAction">
            <result name="success"></result>
            <result name="error"></result>
        </action>

        <action name="editNews" class="by.bulgak.newsmanagement.action.EditeNewsAction">
            <result name="success"></result>
            <result name="error"></result>
        </action>

        <action name="deleteNewsList" class="by.bulgak.newsmanagement.action.DeleteNewsListAction">
            <result name="success"></result>
            <result name="error"></result>
        </action>
    </package>
    <package name="locale" namespace="/" extends="struts-default">
        <action name="locale" class="by.bulgak.newsmanagement.action.LocaleAction">
            <result>index.jsp</result>
        </action>
    </package>
</struts> 
```

当我添加所有瓷砖时就像这样

![在此处输入图像描述](../Images/49b44a856b18cec67f19442986655e0a.png)

当我启动我的应用程序并调用 addNews 操作浏览器时，我会看到这个

```
HTTP Status 500 -

type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

org.apache.tiles.definition.NoSuchDefinitionException: news.tiles
    org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:578)
    org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:246)
    org.apache.struts2.views.tiles.TilesResult.doExecute(TilesResult.java:105)
    org.apache.struts2.dispatcher.StrutsResultSupport.execute(StrutsResultSupport.java:186)
    com.opensymphony.xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:374)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:278)
    org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)
    org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:236)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:236)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:192)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:511)
    org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
note The full stack trace of the root cause is available in the Apache Tomcat/7.0.27 logs. 
```

请告诉我哪里出错了

谢谢）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:29:41.537

在您的 web.xml 中放置这些条目。

```
 <context-param>
  <param-name>org.apache.tiles.impl.BasicTilesContainer.DEFINITIONS_CONFIG</param-name>
  <param-value>/WEB-INF/tile/tiles.xml,/org/apache/tiles/classpath-defs.xml</param-value>
 </context-param> 
```

# amazon-web-services - AWS Elastic Beanstalk 中的自定义 URL

> ID：12280220
> 
> 赞同：29
> 
> 时间：2012-09-05T11:14:27.023
> 
> 标签：amazon-web-services, cloud-hosting, amazon-elastic-beanstalk

AWS Elastic Beanstalk 建议使用以下格式的 url：[http://{appname}.elasticbeanstalk.com/](https://tarta.ai)

但我需要将其更改为我自己的网址，例如[https://tarta.ai](https://tarta.ai)

怎么做？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-17T03:51:34.400

**注意**：我将 Amazon Route53 用于我的域。

* * *

我知道这是一个老问题，但由于我刚刚为我的一个应用程序完成了这个过程，我决定在这里分享它，这也可能对其他人有所帮助。这是我经历的步骤

1.  登录您的 AWS 账户
2.  转到您的 EC2 面板并选择您的区域
3.  从左侧导航菜单中选择负载均衡器
4.  找到与您的 Beanstalk 应用程序相关的负载均衡器
5.  在描述选项卡中获取托管区域 ID
6.  打开 Route53 面板
7.  选择您的域托管区域
8.  为 .YOUR-DOMAIN.com 添加记录
9.  选择别名选项为是
10.  搜索与您的应用相关的负载均衡器
11.  使用您在步骤 5 中获取的内容确认它是托管区域 ID
12.  [也为www.YOUR-DOMAIN.com](http://www.YOUR-DOMAIN.com)执行步骤 8-11 。

* * *

**参考**

*   [http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customdomains.html](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customdomains.html)

*   [http://aws.typepad.com/aws/2011/05/moving-ahead-with-amazon-route-53.html](http://aws.typepad.com/aws/2011/05/moving-ahead-with-amazon-route-53.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-05T13:18:54.493

使用 Amazon [Route53。](http://aws.amazon.com/route53/)ELB，包括那些使用 ElasticBeanstalk 生成的，都被分配了 CNAME。您不能只将顶级域指向 CNAME，因为它违反了 RFC。您可以将 CNAME 记录指向它，例如[http://www.appname.com](http://www.appname.com)，但它仍然不会在[http://appname.com](http://appname.com)响应。这是一个恼人的问题；例如，考虑一下[AWS 论坛上的这个 7 页主题。](https://forums.aws.amazon.com/message.jspa?messageID=185427)

最简单的解决方案是 Route53。它使用特殊的顶点记录将 TLD 映射到 ELB，从而完全避免了这个问题。您也可以使用 EIP 的公共实例将流量转发到 ELB，尽管[这会引起可扩展性问题。](http://shlomoswidler.com/2011/01/aws-auto-scaling-and-elb-with-reliable-root-domain-handling.html)

# c++ - 从指针向量到 const 指针向量的重新解释是否安全？

> ID：12280222
> 
> 赞同：10
> 
> 时间：2012-09-05T11:14:39.790
> 
> 标签：c++, vector, constants, reinterpret-cast

这种转换类型安全吗

```
vector<int*> a;
const vector<const int*>& b = reinterpret_cast<const vector<const int*>&>(a); 
```

在这种情况下，静态转换显然不起作用，因为模板参数正在改变。但是通过重新解释演员表，我只是将 constness 添加到本质上相同的类型中。那么这对于所有实际目的来说应该是安全的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T11:16:48.713

与将引用转换为不相关类型的任何使用一样`reinterpret_cast`，它提供未定义的行为，因此是不安全的，除非您将“安全”定义为“在我的编译器上工作”。

# c++ - 如何在控制台 Win32 应用程序中设置计时器？

> ID：12280224
> 
> 赞同：1
> 
> 时间：2012-09-05T11:14:47.613
> 
> 标签：c++, winapi, timer

> **可能重复：**
> [我可以在控制台 C++ 应用程序中使用 SetTimer() API](https://stackoverflow.com/questions/7531650/can-i-use-a-settimer-api-in-a-console-c-app)

我希望在控制台 win32 应用程序中用 c++ 创建一个计时器。我用谷歌搜索它并找到 SetTimer() 的大多数结果，但作为用于窗口控制或其他的示例。

我需要我的计时器开始计数，在计时器开始后我立即调用一个函数，在计时器结束后，我调用另一个函数。我将使用线程。

我是 C++ 的菜鸟，所以这可以用 SetTimer 函数来完成吗？

谢谢 。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T11:27:26.030

这不是你的方式，`SetTimer`它基于 Windows 消息系统，并且不能在控制台应用程序*中使用 box*。您将需要手动创建消息泵循环并执行其他几项几乎无法满足控制台应用程序结构和控制流程的工作。

您可以改用[Waitable Timers 对象](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687012%28v=vs.85%29.aspx)。它们专门设计用于与线程一起用作同步对象。

使用示例：

```
#define _WIN32_WINNT 0x0500

#include <windows.h>
#include <stdio.h>

int main()
{
    HANDLE hTimer = NULL;
    LARGE_INTEGER liDueTime;

    liDueTime.QuadPart=-100000000;

    // Create a waitable timer.
    hTimer = CreateWaitableTimer(NULL, TRUE, "WaitableTimer");
    if (NULL == hTimer)
    {
        printf("CreateWaitableTimer failed (%d)\n", GetLastError());
        return 1;
    }

    printf("Waiting for 10 seconds...\n");

    // Set a timer to wait for 10 seconds.
    if (!SetWaitableTimer(hTimer, &liDueTime, 0, NULL, NULL, 0))
    {
        printf("SetWaitableTimer failed (%d)\n", GetLastError());
        return 2;
    }

    // Wait for the timer.
    if (WaitForSingleObject(hTimer, INFINITE) != WAIT_OBJECT_0)
        printf("WaitForSingleObject failed (%d)\n", GetLastError());
    else printf("Timer was signaled.\n");

    return 0;
} 
```

另请参阅观察 Windows 计时器的好文章：http: [//www.codeproject.com/Articles/1236/Timers-Tutorial](http://www.codeproject.com/Articles/1236/Timers-Tutorial)

# java - 来自 ant 在 linux 中构建的 java 类的数据库

> ID：12280227
> 
> 赞同：0
> 
> 时间：2012-09-05T11:14:51.400
> 
> 标签：java, linux, hibernate, ant

我想使用 ant 和 build.xml（源类 java 作为模型表）生成 derby 数据库？
在正常情况下（我的意思是发展阶段）。建造它我没有问题。只需右键单击 ant 文件并构建（使用 eclipse）生成数据库。
问题是当我遇到实现步骤时（在 linux 中）。

我正在使用 bin/ant -f build.xml 命令，但它不会生成并给出如下错误：

```
[HibernateTools] Executing Hibernate Tool with a Hibernate Annotation/EJB3 Configuration
[HibernateTools] 1\. task: hbm2ddl (Generates database schema)
[HibernateTools] log4j:WARN No appenders could be found for logger (org.hibernate.cfg.annotations.Version).
[HibernateTools] log4j:WARN Please initialize the log4j system properly.
[HibernateTools] log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info. 
```

构建成功但是我找不到文件数据库是什么？
有人有经验吗？
@ alonso 嗨，谢谢，我想是的，我尝试使用 -v 并给我这个：

```
[root@APPTTPDEV01 TimesheetEJB_jar]# /home/rpangemanan/apache-ant-1.7.0/bin/ant  -v build.xml
Apache Ant version 1.7.0 compiled on December 13 2006
Buildfile: build.xml
Detected Java version: 1.6 in: /usr/java/jdk1.6.0_32/jre
Detected OS: Linux
parsing buildfile /home/rpangemanan/glassfish/domains/domain1/applications/j2ee-apps/Timesheet/TimesheetEJB_jar/build.xml with URI = file:/home/rpangemanan/glassfish/domains/domain1/applications/j2ee-apps/Timesheet/TimesheetEJB_jar/build.xml
Project base dir set to: /home/rpangemanan/glassfish/domains/domain1/applications/j2ee-apps/Timesheet/TimesheetEJB_jar

BUILD FAILED
Target "build.xml" does not exist in the project "HelloWorld".
        at org.apache.tools.ant.Project.tsort(Project.java:1821)
        at org.apache.tools.ant.Project.topoSort(Project.java:1729)
        at org.apache.tools.ant.Project.topoSort(Project.java:1692)
        at org.apache.tools.ant.Project.executeTarget(Project.java:1298)
        at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
        at org.apache.tools.ant.Project.executeTargets(Project.java:1181)
        at org.apache.tools.ant.Main.runBuild(Main.java:698)
        at org.apache.tools.ant.Main.startAnt(Main.java:199)
        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:257)
        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:104) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T03:13:24.087

默认情况下，ant 将始终使用`build.xml`，因此提供它的名称应该是多余的。

然而，提供构建**目标**很重要。您尝试执行的是`build.xml`文件中的目标`build.xml`，该目标在您的项目中不存在？蚂蚁文档说：

> 当省略 [.. *the target* ..] 时，使用在项目标签的默认属性中指定的目标。

试一试

```
bin/ant 
```

这应该执行 build.xml 和项目的默认目标。您是否也将您的 ant 文件放入 ANT_HOME 目录？如果不是，您需要使用 -f 指定文件的**绝对**位置（如`/home/user/build.xml`）。

一个好的做法是向`/<path to ant>/bin`您添加 PATH 并`ant`在 build.xml 所在的目录中使用该命令。

带有的警告`log4j`可以忽略。这只是意味着，您还没有定义日志附加程序，它指定日志消息的存储方式（例如，在一个文件或多个文件或其他一些流中）。在这种情况下，它们会打印到控制台，这对你来说应该没问题（现在）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T04:31:19.480

嗨，我终于发现问题出在哪里
了
缺少的是'ij'（在javadb\bin上找到）我必须像这样创建真正的数据库德比

```
connect 'jdbc:derby://localhost/1527/timesheet_db;create=true'; 
```

然后用 ant 再次构建

# android - 连续单击按钮时出现媒体播放器问题？

> ID：12280231
> 
> 赞同：0
> 
> 时间：2012-09-05T11:15:21.463
> 
> 标签：android, media-player

我正在使用 android 的默认媒体播放器播放 mp3 声音，我在下面播放声音的代码

> ```
> MediaPlayer mp=MediaPlayer.create(hello.this,R.raw.abc);
>           if(mp!=null)
>           {
>               mp.start();
>           } 
> ```

我需要在同一个按钮单击时播放相同的声音。当我在一段时间后连续单击按钮时声音不起作用并且我收到错误 MediaPlayer(7395): error (-19, 0)。

有没有人有这个问题的想法，请发给我

预先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:27:29.587

称呼

```
mp.reset(); 
```

因为每次你都在 decalaring 对象

或在类级别 Mediaplayer OBject 上声明

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:17:46.883

我已经找到了解决这个问题的方法。我已经使用下面的代码纠正了这个问题，也可以帮助其他人。

谢谢

调用方法如

```
PlaySound(R.raw.abc); 
```

//方法

```
private void PlaySound(int Sound_id) 
    {
        mplayer = MediaPlayer.create(Act_Oceanwaves.this,Sound_id);
        if(mplayer!=null)
        {           
            mplayer.start();
        }
        mplayer.setOnCompletionListener(new OnCompletionListener() 
        {

            @Override
            public void onCompletion(MediaPlayer mp) 
            {               
                mp.release();
            }

        });   

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T11:35:58.683

制作媒体播放器的全局变量并尝试这种方式

```
 MediaPlayer mp;

          if (mp!=null) {
              mp.stop();
              mp.release();
            }
          mp= MediaPlayer.create(hello.this,R.raw.abc);
          mp.start(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T11:41:24.720

```
 mp = new MediaPlayer();
    mp.create(this, R.raw.testmed);
    mp.setVolume(100, 100);
    mp.setOnPreparedListener(this);
    mp.prepare(); 
```

然后你需要定义它，它应该可以工作：

```
 public void onPrepared(MediaPlayer player) {
       mp.start();
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T10:23:26.497

```
you can play music like below

 // for play the song

     MediaPlayer mp = new MediaPlayer();

                 try 
                {                   
                     mp.reset();
                     mp.setDataSource(songPath);                        
                     mp.prepare();
                     mp.start();                    
                     btnPlay.setBackgroundResource(R.drawable.img_btn_pause);                   

                 } catch (IOException e) {
                        Log.v(getString(R.string.app_name), e.getMessage());
                } 
```

# c# - RX challenge 5 复杂事件处理使用 LINQ 语言集成查询（Spoiler Alert）

> ID：12280233
> 
> 赞同：2
> 
> 时间：2012-09-05T11:15:32.917
> 
> 标签：c#, system.reactive

在 RX 站点的[复杂事件处理研讨会](http://channel9.msdn.com/Series/Rx-Workshop/Rx-Workshop-Event-Processing)中，挑战 5 使用 Buffer 完成。我有一个使用 LINQ 点或 Lamba 表示法的解决方案。出于兴趣，我想将其转换为 LINQ 语言集成查询符号。

接下来是挑战和我的代码。由于某种原因`result2`无法正常工作，它使 UI 无响应并且输出看起来被截断。这是什么时髦的东西，是我的查询，你能解决它吗？

挑战（[在此处](http://ecn.channel9.msdn.com/content/RxWorkshop/Challenge5.zip)下载）

```
IObservable<object> Query(IObservable<StockQuote> quotes)
{
    // TODO: Change the query below to compute the average high and average low over
    //       the past five trading days as well as the current close and date.
    // HINT: Try using Buffer.

    return from quote in quotes
           where quote.Symbol == "MSFT"
           select new { quote.Close, quote.Date };
} 
```

我的解决方案

```
IObservable<object> Query(IObservable<StockQuote> quotes)
{
    // TODO: Change the query below to compute the average high and average low over
    //       the past five trading days as well as the current close and date.
    // HINT: Try using Buffer.

    var result1 = quotes.Where(qt => qt.Symbol == "MSFT").Buffer(5, 1).Select(quoteList =>
    {
        var avg = quoteList.Average(qt => qt.Close);
        return new { avg, quoteList.Last().Close, quoteList.Last().Date };
    });

    var result2 = from quote in quotes
                  where quote.Symbol == "MSFT"
                  from quoteList in quotes.Buffer(5, 1)
                  let avg = quoteList.Average(qt => qt.Close)
                  select new { avg, quoteList.Last().Close, quoteList.Last().Date };

    return result2;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:30:03.003

两种解决方案都多次订阅引号（甚至超过两次 - 记住多个 from 子句会导致 SelectMany 调用），所以那里已经有问题了:-)。再试一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:58:35.820

我认为查询应该看起来更像这样：

```
 var result =
            from quote in quotes
            where quote.Symbol == "MSFT"
            from quoteList in quotes.Buffer(5, 1)
            let avgHigh = quoteList.Average(qt => qt.High)
            let avgLow = quoteList.Average(qt => qt.Low)
            select new { avgHigh, avgLow, quote.Close, quote.Date }; 
```

但这与您的差异只有很小的差异 - 只是没有必要做`quoteList.Last()`when `quote`would do & 问题要求 & 的平均值`High`，`Low`而不是`Close`.

据我所知，问题与图表有关，与 Rx 组件无关。我认为图表经常重绘以至于阻塞。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T09:34:32.787

该问题要求同时绘制两个图（电流、平均值）。我不相信可以使用绑定 monad ( `SelectMany`) 来独立组合问题指定的这两个流的最新值。

向下的理解`quotes.Buffer`将绑定到缓冲流的速率。

或者：

```
 quotes = quotes.Publish().RefCount();
        return Observable.CombineLatest
            (
                first: quotes,
                second: quotes.Buffer(5, 1).Select(
                        buffer => new { High = buffer.Average(q => q.High), Low = buffer.Average(q => q.Low) }),
                resultSelector: (l, r) => new { l.Close, l.Date, r.High, r.Low }
            ); 
```

以与源相同的速率移动，从而产生平滑的图形。

# tcp - netstat的RECV_Q和tcp中的RECV BUF是什么关系

> ID：12280237
> 
> 赞同：0
> 
> 时间：2012-09-05T11:15:48.023
> 
> 标签：tcp

我总是注意到netstat中RECV_Q的大小总是小于RECV_BUF。例如：我使用getsockopt方法获取服务器套接字的RECV_BUF值，值为20000。我以这种方式阻止服务器：仅接受来自客户端的连接，但在客户端发送时不接收来自客户端的任何数据一路数据。

我使用 commond 'sudo netstat -talunp | grep 14455'(14455 是服务器 pid。) 结果是：""" tcp 15299 0 127.0.0.1:50005 127.0.0.1:44055 ESTABLISHED 14455/python """

也就是说RECV_Q是15299，小于RECV_BUF(20000)。</p>

我很困惑RECV_Q和RECV_BUF之间的关系是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:10:12.437

如果`RECV_BUF`您指的是套接字接收缓冲区的大小，则它是套接字接收缓冲区的大小，其中 RECV_Q 是其中实际的数据量。

# ios - ARC-Type 转换导致编译器错误

> ID：12280246
> 
> 赞同：1
> 
> 时间：2012-09-05T11:16:37.377
> 
> 标签：ios, automatic-ref-counting, type-conversion

我在 ARC 环境中遇到类型转换问题。如果有人也愿意解决它：

当我使用这行代码时：

`OSStatus status = SecItemCopyMatching((CFDictionaryRef) CFBridgingRetain(attributeQuery), (CFTypeRef*)&attributeResult);`

然后我有错误：

`cast of an indirect pointer to an objective C pointer to 'CFTypeRef *' is disallowed with ARC.`

请建议我解决这个问题的任何方法..提前谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:28:36.587

问题是您对attributeResult 使用NSDictionary 而不是CFDictionary。试试这个，它应该可以工作（我使用的是相同的代码）：

```
CFMutableDictionaryRef outDictionary = NULL;
if (!SecItemCopyMatching((__bridge CFDictionaryRef)tempQuery, (CFTypeRef *)&outDictionary) == noErr)
...
} else {
  // load the saved data from Keychain.
  keychainItemData = [self secItemFormatToDictionary:(__bridge NSDictionary *)outDictionary];
}
if(outDictionary) CFRelease(outDictionary); 
```

# php - Googledrive 应用程序的刷新令牌会过期吗？

> ID：12280250
> 
> 赞同：2
> 
> 时间：2012-09-05T11:16:55.223
> 
> 标签：php, google-drive-api

我们在授权 googledrive 应用程序时获得的刷新令牌是否过期，或者我们可以使用相同的刷新令牌多年？如果它们过期了，那么我们如何用 php 处理这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T13:23:03.447

刷新令牌不会过期，但用户可以随时撤销它们。要处理这种情况，您的应用程序应将用户重定向回授予访问页面并请求新的刷新令牌。

检查[https://developers.google.com/drive/credentials#retrieve_oauth_20_credentials](https://developers.google.com/drive/credentials#retrieve_oauth_20_credentials)上的 PHP 代码，以获取一个示例，该示例展示了如何处理 OAuth 流程并在需要时构建授权 URL。

# struts2 - 如何使用选项创建选择多个表单？

> ID：12280252
> 
> 赞同：0
> 
> 时间：2012-09-05T11:16:58.610
> 
> 标签：struts2

我想创建一个这样的表单：

```
<select name="selectedStatut" size="5" id="form_selectedStatut" multiple="multiple">
    <option value="1">Editable</option>
    <option value="2">Traitement du systeme en cours</option>
    <option value="3">Diffusee au souscripteur</option>
    <option value="4">Diffusee au commercial</option>
    <option value="5">Diffusee au client</option>
    <option value="6">Supprimee</option>
</select> 
```

我使用以下代码：

```
<s:select label="Statut" multiple="true" size="5"  list="#{'1':'Editable','2':'Traitement du systeme en cours','3':'Diffusee au souscripteur','4':'Diffusee au commercial','5':'Diffusee au client','6':'Supprimee'}"  name="selectedStatut">
                  </s:select> 
```

但我在下面得到这个表格：

```
<select name="selectedStatut" size="5" id="form_selectedStatut" multiple="multiple">
    <option value="Editable">Editable</option>
    <option value="Traitement du systeme en cours">Traitement du systeme en cours</option>
    <option value="Diffusee au souscripteur">Diffusee au souscripteur</option>
    <option value="Diffusee au commercial">Diffusee au commercial</option>
    <option value="Diffusee au client">Diffusee au client</option>
    <option value="Supprimee">Supprimee</option>
</select> 
```

我错过了什么 ？感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:10:23.917

你需要这样做`listKey="key"`并且`listValue="value"`：

```
<s:select label="Statut" multiple="true" size="5"  
       list="#{'1':'Editable','2':'Traitement du systeme en cours','3':'Diffusee au souscripteur','4':'Diffusee au commercial',
               '5':'Diffusee au client','6':'Supprimee'}"  
       name="selectedStatut" listKey="key" listValue="value"/> 
```

# java - 在 Android 中执行 Java 字节码

> ID：12280254
> 
> 赞同：5
> 
> 时间：2012-09-05T11:17:02.853
> 
> 标签：java, android, bytecode

我正在尝试在 Android 中执行 Java 程序。使用链接[How to execute the dex file in android with command?](https://stackoverflow.com/questions/10199863/how-to-execute-the-dex-file-in-android-with-command) 作为参考。我的问题是，我可以在 eclipse 的模拟器上运行 Java 程序吗？当我尝试 adb install HelloWorld.apk（在命令提示符中）时，它说缺少 AndroidManifest.xml。我可以选择吗？请帮忙。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T11:30:42.623

Android 使用 Dalvik VM，而不是 Java VM。因此，您无法在 Android 设备上执行标准 Java 程序。此外，Android 程序受到各种 XML 文件的支持，如 Android Manifest、布局文件、资源文件等。Android Manifest 尤其重要，因为它包含有关可以启动应用程序的哪个部分的信息，哪个是服务或接收器，应用程序需要什么权限，应用程序需要哪些硬件和软件功能，与它兼容的Android版本等。

简而言之：不，您不能在 Android 上执行普通的 java 程序。

# attributes - 具有属性的 Maven Eclipse 插件类路径容器？

> ID：12280257
> 
> 赞同：3
> 
> 时间：2012-09-05T11:17:12.043
> 
> 标签：attributes, optional-parameters, maven-eclipse-plugin

我可以在我的 pom 中设置 classpathContainer 参数，以便为命令 eclipse:eclipse 配置 Maven Eclipse 插件。如果我设置：

```
<classpathContainers>
    <classpathContainer>org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/jdk1.6.0_29</classpathContainer>
</classpathContainers> 
```

我进入我的**.class**

```
 <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/jdk1.6.0_29"/> 
```

但是我需要：

```
<classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/jdk1.6.0_29">
    <attributes>
        <attribute name="owner.project.facets" value="java"/>
    </attributes>
</classpathentry> 
```

如何向 classpathContainer 添加属性？

提前致谢。

# c# - C# 运行一个 exe 并等待它关闭

> ID：12280259
> 
> 赞同：0
> 
> 时间：2012-09-05T11:17:18.220
> 
> 标签：c#, windows

希望您可以通过下面的代码帮助我，当用户登录到某台 PC 时，下面的程序会运行。进程运行后exe关闭我希望PC注销，下面的myProcess_Exited方法没有运行，你能发现任何问题吗？

谢谢史蒂文

```
private void myProcess_Exited(object sender, System.EventArgs e)
 {
         System.Diagnostics.Process proc1 = new System.Diagnostics.Process();
         proc.StartInfo.FileName = "C:\\windows\\SysWOW64\\shutdown.exe";
         proc1.StartInfo.Arguments = "/l";
         proc1.StartInfo.UseShellExecute = false;
         proc1.StartInfo.RedirectStandardOutput = false;
         proc1.Start();
         Application.Exit();
}

private void Form1_Load(object sender, EventArgs e)
{
             System.Diagnostics.ProcessStartInfo p = new                                            System.Diagnostics.ProcessStartInfo(@"K:\App\pc\stub.exe");
             p.Arguments = "-RunForever";
             proc = new System.Diagnostics.Process();
             proc.StartInfo = p;
             proc.EnableRaisingEvents = true;
             proc.Exited += new EventHandler(myProcess_Exited);
             proc.Start();
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:21:14.660

下面的工作非常好。

```
 Process proc = new Process();

    private void myProcess_Exited(object sender, System.EventArgs e)
    {
        System.Diagnostics.Process proc1 = new System.Diagnostics.Process();
        proc1.StartInfo.FileName = "C:\\windows\\SysWOW64\\shutdown.exe";
        proc1.StartInfo.Arguments = "/l";
        proc1.StartInfo.UseShellExecute = false;
        proc1.StartInfo.RedirectStandardOutput = false;
        proc1.Start();
        Application.Exit();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        System.Diagnostics.ProcessStartInfo p = new System.Diagnostics.ProcessStartInfo(@"K:\App\pc\stub.exe");
        p.Arguments = "-RunForever";
        Process proc = new System.Diagnostics.Process();
        proc.StartInfo = p;
        proc.StartInfo.CreateNoWindow = true;
        proc.EnableRaisingEvents = true;
        proc.Exited += new EventHandler(myProcess_Exited);
        proc.Start();
    } 
```

# asp.net-mvc - 未在 asp.net mvc 中为 RadioButton 设置值

> ID：12280262
> 
> 赞同：0
> 
> 时间：2012-09-05T11:17:21.783
> 
> 标签：asp.net-mvc

我将 asp.net mvc 与 ViewEngine Razor 一起使用，并在页面的 html 中编写 Radiobuttons：

```
<form id="ProductForm" method="post" action="@Url.Action("..", "..", new { area = "..." })">
<fieldset>
<div style="float: left; width: 550px; margin-top: 5px;">
                    <div class="editor-label">
                        <label for="DescriptionId">FullDescription</label>
                    </div>
                    <div class="editor-field">
                        <div style=" border: 1px solid Gray;">
                            <input type="hidden" name="DescriptionId" id="DescriptionId"/>
                            <div>
                                <input type="radio" name="radioDescription" id="radioDescriptionNew" value="New" checked="checked" />New
                                <input type="radio" name="radioDescription" id="radioDescriptionExist" value="Exist" />Exist
                                <span id="DescriptionChooseHref" style=" visibility: hidden;">(<a href="#">Select</a>)</span>
                            </div>
                            <div>
                                <textarea id="DescriptionText" style=" width: 530px; height: 200px; margin: 5px 0 5px 5px" placeholder="Full Description"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
...
</fieldset>
</form> 
```

但是当我运行我的网站时，我会在 HTML 中看到：

```
<input type="radio" name="radioDescription" value checked="checked" />
<input type="radio" name="radioDescription" value /> 
```

我做错了什么？谢谢。

# php - 单独创建一个php文件

> ID：12280263
> 
> 赞同：0
> 
> 时间：2012-09-05T11:17:23.193
> 
> 标签：php, html, file

好吧，我下面的代码一次性创建了所有文件，而不是依次经过 1、2、3、4 等等

```
$i = 0;
while($i < $pages)
{
    $met = $this->articles();
    $myFile = trim($met.".php");

    $fh = fopen($myFile, 'w') or die("Can't create files.");
    $stringData = "<html><head><meta name=\"description\" content=\"" . $met. "\" />
                   <meta name=\"keywords\" content=\"" . $met . "\" /><h1>" . $met . "</h1>
                   <base href='http://gumpic.com/'>".$this->show_web("http://gumpic.com")."</html>";
    fwrite($fh, $stringData);
    fclose($fh);
    $i++;
}

echo "We've created your " . $pages . " pages."; 
```

我将如何通过加载页面，在页面上打印哪些页面已经完成？喜欢;

1.  完全的
2.  完全的
3.  完全的
4.  待办的

另外，无论如何我可以加快这个脚本的速度。它非常慢，仅在大约 3 分钟内创建 2k 个文件，然后给我一个内部错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:26:04.093

考虑使用一些模板语言，因为每次分配和链接你的输出肯定会产生糟糕的性能。

一些好的库是：

*   [Twig](http://twig.sensiolabs.org/) [我通常的选择]；
*   [聪明的](http://www.smarty.net/);
*   [TI](http://phpti.com/) [纯 PHP，少量用于较小目的]；

如果您还没有这样做，请考虑编写命令行工具 - 回显到控制台将比写入屏幕更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:31:33.263

```
ob_start();
$i = 0;
while($i < $pages)
{
    $met = $this->articles();
    $myFile = trim($met.".php");

    $fh = fopen($myFile, 'w') or die("Can't create files.");
    $stringData = '<html>
                    <head>
                        <meta name="description" content="' . $met. '" />
                        <meta name="keywords" content="' . $met . '" />
                    </head>
                    <body>     
                    <h1>"' . $met . '"</h1>
                   <base href="http://gumpic.com/">'.$this->show_web("http://gumpic.com").'</body>
                  </html>';
    fwrite($fh, $stringData);
    fclose($fh);
    echo 'Created page ' . ($i+1) . '<br/>';
    flush();
    ob_flush();
    $i++;
}

echo "Done generating " . $i . "pages."; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T11:23:58.897

该脚本的速度主要取决于硬盘驱动器的速度。操作系统如何处理打开和写入访问。

如果您想要显示进度，只需`echo("Processing ".$i."\n");`在`while`循环中包含一个并用 . 刷新缓冲区`flush()`。确保`echo str_repeat(" ", 1024), "\n";`在脚本开始时发送以强制浏览器显示内容而无需等待大量数据。

用于`set_time_limit()`为您的脚本提供更多处理时间。

# teechart - Silverlight 2010 的 TeeChart 包

> ID：12280271
> 
> 赞同：0
> 
> 时间：2012-09-05T11:17:44.423
> 
> 标签：teechart

Silverlight 是否有任何特定的 tchart 包（与 2010 相比）。? 如果是这样，请提供必要的细节？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:25:40.103

是的，它被称为 TeeChart.Silverlight.dll，包含在 TeeChart for .NET 2012 版本中。可在[此处](http://www.steema.com/download/net)下载功能齐全的评估版。

# javascript - Onclick 禁用其他超链接

> ID：12280275
> 
> 赞同：2
> 
> 时间：2012-09-05T11:17:53.160
> 
> 标签：javascript, html

我有一个 django 模板，我在其中呈现一个包含对象的列表，这些对象将形成一个超链接，例如

```
{% for o in list_o %}
  <a href="{% url tolink o.lan,o.id %}">{% o.name %}</a>
{% endfor %} 
```

当用户单击其中一个已形成的链接时，我想禁用或模糊其他链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:41:09.767

```
function handleLinks(linkIDList, disable) {
    if (disable) {
        $(linkIDList).attr("disabled","true");
    } else {
         $(linkIDList).removeAttr("disabled");
    }
} 
```

假设你所有的链接标签都有 ID 使用我创建的这个函数。

将 onclick="handleLinks('#link1,#link2',true)" 添加到您的链接。

该函数采用 jQuery 格式“#id,#id2,#id3”的 id 列表，布尔值 true 禁用 false 启用。

如果您不使用 jQuery，只需说并提供一个变通的解决方案！

# sed - 用单个字符替换所有出现的 n 个空格

> ID：12280278
> 
> 赞同：0
> 
> 时间：2012-09-05T11:18:08.983
> 
> 标签：sed

我想使用 sed （这是最好的工具吗？）从这里开始：

```
foo     bar    buzz     fuzz 
```

对此：

```
foo|bar|buzz|fuzz 
```

如何才能做到这一点 ？

非常感谢 ：）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:20:47.977

假设您的项目之间有 5 个空格，并且它们位于名为 test.txt 的文件中：

```
sed -i "s/     /|/g" test 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T11:21:07.873

```
$ sed 's/\s\s*/|/g' < input 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T11:25:16.977

## 使用 [:SPACE:] POSIX 类

如果空格的数量可能发生变化，或者可能是空格和制表符的混合，那么您希望使用 POSIX 类在当前模式空间内全局用单个管道符号替换一系列空白字符。例如：

```
$ echo 'foo     bar    buzz     fuzz' | sed 's/[[:space:]]\+/|/g'
foo|bar|buzz|fuzz 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T12:09:43.743

如果你有 GNU sed：

```
sed -r 's/ +/|/g' 
```

# jquery - 从 Fullcalendar 中删除天数

> ID：12280289
> 
> 赞同：1
> 
> 时间：2012-09-05T11:19:08.063
> 
> 标签：jquery, fullcalendar

我正在使用 FullCalendar 的“agendaWeek”视图，我只在周日至周四举办活动。

有没有办法完全从视图中删除那个星期五和星期六？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T20:11:41.917

您可以使用选项周末=false，然后您需要编辑函数（在库中）以排除您想要的日期：

```
function skipWeekend(date, inc, excl) { ... } 
```

在您需要在周视图中编辑对此函数的调用后：

```
function AgendaWeekView and BasicWeekView 
```

干杯，

# silverlight - Silverlight 将数组元素绑定到文本块

> ID：12280299
> 
> 赞同：0
> 
> 时间：2012-09-05T11:20:04.597
> 
> 标签：silverlight, xaml, data-binding

```
 private int[] g1 = new int[9];

    public int[] G1 
    { 
        get { return g1; }
        set { NotifyPropertyChanged("G1[]"); }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    private void NotifyPropertyChanged(string propName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propName));
        }
    }

    <TextBlock x:Name="R1G1" Text="{Binding G1[0]}" HorizontalAlignment="Left" Margin="0,0,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="80" Height="80"/> 
```

G1 在一个方法中填充了从 1 到 9 的整数。

问题：文本块的文本设置为 0，无法更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:27:40.490

```
NotifyPropertyChanged("G1[]"); 
```

应该

```
NotifyPropertyChanged("G1"); 
```

您确定数组包含值 1 到 9 吗？它没有显示在代码中。

TextBlocks 不能用于输入文本。请改用文本框。

绑定可能需要一个`Mode=TwoWay`

最后（此问题不需要）：数组不支持向数组发送更改通知（添加、删除、移动元素）您可以为此使用 ObservableCollection。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T19:53:46.150

哇……住手！使用 an`ObservableCollection<int>`而不是数组。ObservableCollection 实现了 INotify。

# android - 功能自定义标题：无法在 API 11 及更高版本上组合自定义标题

> ID：12280303
> 
> 赞同：7
> 
> 时间：2012-09-05T11:20:24.110
> 
> 标签：android, tabactivity, titlebar, android-tabactivity, custom-titlebar

我有一个项目，我在其中设置：

*   minSdkversion 设置为 10
*   MainActivity 是一个 TabActivity

onCreate 方法中的代码是这样的：

```
super.onCreate(savedInstanceState);

requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
setContentView(R.layout.main);
getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.custom_title);
... 
```

使用以前的设置，一切正常！但是，如果我将 minSdkVersion 设置为 11 或更高，则会发生此异常：

```
android.util.AndroidRuntimeException: You cannot combine custom titles with other title features 
```

我不明白为什么这只是改变 minSdkVersion。我在这个网站上对这个问题很感兴趣。我尝试设置：

*   Theme.NoTitleBar 在主布局和清单文件之后
*   我把这 3 行放在所有可能的位置
*   如果我评论第一行，当我在我的 CustomTitle 布局的 TextView 引用上调用某些内容时会发生 NullPointerException
*   我尝试在 theme.xml 文件声明中设置 "windowNoTitle" = true

由于我仅使用 API 11 提供的功能，因此我想在将 App 加载到 Store 之前将 minSdk 设置为 11。我能怎么做 ？？我需要帮助

**编辑**：在清单中使用 minSdkVersion = 10 和 Theme.NoTitleBar 时，会发生同样的错误。删除它，一切都像以前一样。当 API 为 11 或更高版本时，任何人都可以提供用于设置自定义标题的工作代码（清单和活动代码）吗？非常感谢

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-30T11:51:13.143

由我自己修复。我不知道为什么，只是简单地为每个活动的声明添加清单文件“主题”属性，一切正常：

由此：

```
<activity
        android:name=".CheckActivity"
        android:configChanges="orientation"
        android:screenOrientation="portrait"
</activity> 
```

对此：

```
<activity
        android:name=".CheckActivity"
        android:configChanges="orientation"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme" >
</activity> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T10:06:47.260

@kinghomer我实际上已经在2.2（API 8）上尝试过CUSTOM_TITLE。让我试试 API 11 并回复您！

在此之前，您无需在任何地方制作 Theme.NoTitleBar，可以直接在 .java 文件中进行控制。给我一点时间，会回来的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-13T08:18:13.007

res/values-v11 默认使用这段代码：</p>

```
<style name="AppBaseTheme" parent="android:Theme.Holo.Light">
        <!-- API 11 theme customizations can go here. -->
</style> 
```

将“android:Theme.Holo.Light”更改为“@android:style/Theme”就可以了！

提示：如果你的项目没有“res/values-v11”，那么检查你的项目引用的“lib项目”。</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-22T06:15:34.397

除了接受的答案之外，还有另一种方法可以解决这个问题：

```
<application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/CustomTheme" > 
```

在基于 xml 的 mainifest 中分配一个`theme`属性`application`，它应该适用于所有活动。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-01T06:01:20.473

当您尝试添加自定义标题栏并通过`ActionBarActivity`或扩展活动时会出现此问题`AppcomActivity`。这两个活动类已经定义了标题栏。因此，当您尝试添加自己的自定义标题栏时，会出现冲突，使用哪个标题栏 - 您的自定义标题栏或扩展活动提供的标题栏。

要解决此问题，只需扩展您的活动，`Activity`其中没有任何预定义的标题栏，因此您的活动将被接受而不会发生任何冲突。

```
public void MyActivy extends Activity
{

    // your code

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-14T08:24:23.633

我刚刚添加`android:theme="@android:style/Theme"`到文件`activity`中`AndroidManifest.xml`，它工作得非常好。

```
<activity
        android:name=".MainActivity"
        android:theme="@android:style/Theme" >
</activity> 
```

希望这也适用于你。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-21T06:30:13.480

在您的`AndroidManifest`文件中，使用此代码段而不是您的代码段。

由此：

```
android:theme="@style/AppTheme"> 
```

对此：

```
android:theme="@style/custom_title"> 
```

# jquery - 使用 jquery 在 li 中搜索重复项，如果找到则删除两者

> ID：12280307
> 
> 赞同：3
> 
> 时间：2012-09-05T11:20:30.777
> 
> 标签：jquery, filter, html-lists

我知道可以使用 Jquery 搜索重复的`<li>`标签并将其删除，但我实际上想要做的是在找到重复项时，删除 li 的两个实例。

例子：

```
<li>foo
<li>bar
<li>foo
<li>test
<li>me
<li>bar 
```

Jquery 应该返回输出

```
<li>test
<li>me 
```

有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T11:26:18.853

我首先想到的是：

```
$("li").filter(function() {
    var text = this.innerHTML,
        el = $(this).siblings("li").filter(function() {
            return this.innerHTML == text;
        }).remove();
    return el.length > 0;
}).remove();​ 
```

**演示：http:** [//jsfiddle.net/x5QQZ/](http://jsfiddle.net/x5QQZ/)

# ruby - 如何区分 CDA 和 XML 文件？

> ID：12280311
> 
> 赞同：1
> 
> 时间：2012-09-05T11:20:44.063
> 
> 标签：ruby, mime-types, content-type, hl7, cda

我有 ruby​​ 模块，它将根据 CDA 模式验证 XML 文件。XML 文件类型是

```
text/xml 
```

如果文件被标识为 CDA，则

1.我需要为文件设置什么内容类型，以便呈现 XML 文件的应用程序可以将其识别为 CDA。

我搜索过“CDA 的内容类型”、“CDA 的 MIME 类型”等等，但我找不到答案。

任何链接，建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T21:10:59.017

CDA 与任何其他 XML 文件一样只是 XML。它将有一个关联的模式，它必须对其进行验证。针对 CDA.xsd 对 XML 的验证使其成为 CDA（临床文档体系结构）文件。

所以，我想回答这个问题，它将是 text/xml MIME 类型，就像任何其他 XML 文件一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-11T17:30:34.120

CDA 的规范媒体类型是 text/xml，请参阅 CDA R2 规范中的此[示例](http://hl7.ihelse.net/hl7v3/infrastructure/cda/cda.html#d3e786)。在交换 CDA 时，意图是元数据将与文档一起交换。该元数据具有旨在帮助消费者识别相关文档是否为 CDA 以及如果是则它是什么类型的 CDA 的元素。Keith Boone 有一些关于该主题的博客文章； [在 XDS 中对文档进行分类](http://motorcycleguy.blogspot.com/2013/05/classifying-documents-in-xds.html)和xds[格式代码的目的是什么](http://motorcycleguy.blogspot.com/2013/12/what-is-purpose-of-xds-formatcode.html)都是好的开始。

# debugging - 如何将 Sybase 错误消息偏移量转换为存储过程行号

> ID：12280314
> 
> 赞同：1
> 
> 时间：2012-09-05T11:20:48.833
> 
> 标签：debugging, stored-procedures, sybase

我正在尝试在 Sybase 中调试一个长存储过程，但收到如下错误消息：

```
 Number (257) Severity (16) State (1) Server (DZUCRINSI225) Procedure (Calculate_FX_Haircut) Implicit conversion from datatype 'CHAR' to 'NUMERIC' is not allowed.  Use the CONVERT function to run this query. (4068EE10) 
```

我不知道错误发生在 SP 的什么地方。我怎样才能找到它？我猜消息中的'4068EE10'可能是一个偏移量，但我不知道如何利用它来查找行号。任何人都可以帮忙吗？

我应该补充一点，我正在使用 Embarcadero Rapid SQL 作为 Sybase 服务器的接口。我不确定“4068EE10”是由 Sybase 还是 Embarcadero 添加的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T12:36:34.440

我很久没有使用 Rapid Sql，但是当 SQL 失败是 SP 时，Sybase 客户端接口 Open Client 肯定会向客户端发送包含行号的消息。也许 Rapid SQL 正在取消 ODBC 连接，而中间件在服务器消息处理中丢弃了 Sybase 特定的东西？

您可以更改您的数据源以使用本机 Sybase 连接 - 我希望 Rapid Sql 能够管理吗？

为什么不尝试在 Sybase sql 客户端 isql 中运行这个 SP？

您会发现收到一条包含 SP 名称和行号的消息。

# java - 当日期从android应用程序发送到php时获得1天的差异

> ID：12280316
> 
> 赞同：0
> 
> 时间：2012-09-05T11:20:55.627
> 
> 标签：java, php, android

我正在开发人们可以进入休假应用程序的 android 应用程序。在这里，用户从 Android 日历中选择日期，并从此选定的日期纪元值发送到 php 页面，以转换纪元可读日期格式，我得到 1 天的差异。

在 php 页面上，我使用休假次数和起始日期计算休假的截止日期，但这里我得到错误的值，因为 php 上的起始日期与 android 应用程序上的选定日期不同。

请帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:19:52.830

原来是时区问题。日期在创建时获得默认时区。但如果涉及不同的时区，它会在 0 天和 1 天之间产生差异。特别是如果您创建一个日期，则传输时间戳（如 long int）并从中创建另一个日期。

有关更多详细信息，请参阅对问题的评论:-)

# xslt - position()=1 工作正常，但 position()<5

> ID：12280319
> 
> 赞同：2
> 
> 时间：2012-09-05T11:21:11.040
> 
> 标签：xslt, foreach

我是 XSLT 的新手，我正在使用 w3schools“自己尝试”页面进行一些测试。我正在使用以下演示：

[http://www.w3schools.com/xsl/tryxslt.asp?xmlfile=cdcatalog&xsltfile=tryxsl_choose](http://www.w3schools.com/xsl/tryxslt.asp?xmlfile=cdcatalog&xsltfile=tryxsl_choose)

这包含以下行：

```
<xsl:for-each select="catalog/cd"> 
```

我正在测试过滤呈现的 HTML，`position()`但在使用`<`操作数时遇到问题。

* * *

我尝试了以下方法：

```
<xsl:for-each select="catalog/cd[position()=1]"> 
```

这将返回 XML 数据中的第一项（如预期的那样）。

* * *

然后我尝试了：

```
<xsl:for-each select="catalog/cd[position()<5]"> 
```

我期待这会返回前 4 个项目，但我没有得到任何结果。

我的猜测是，也许`position()=1`正在做一个字符串比较，这就是为什么它返回第一项，但它不能理解`position()<5`为一个字符串不能以这种方式进行比较？

为什么会发生这种情况，获得我希望达到的结果的正确语法是什么？

* * *

**更新：**在阅读@joocer 的回复并自己测试后，使用`>`操作数确实有效，但结果相反：

```
<xsl:for-each select="catalog/cd[(position()>5)]"> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T13:26:49.013

它看起来很像 w3schools 正在使用的 libxslt 版本中的一个错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T11:40:14.963

即使在引号内，您也必须输入`<`as`&lt;`这样它就不会与元素标记的开头混淆。我认为这样做是为了让容错解析器更容易从错误中恢复，并且流解析器可以更快地跳过内容。他们总是可以在`<`外面寻找`CDATA`并知道这是一个元素的开始或结束标记。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T11:34:31.583

我不知道为什么，但是反转条件是可行的，所以不要寻找小于 5，而是寻找不超过 4

```
<xsl:for-each select="catalog/cd[not(position()>4)]"> 
```

# iphone - 如何在sqlite中插入值

> ID：12280321
> 
> 赞同：1
> 
> 时间：2012-09-05T11:21:16.937
> 
> 标签：iphone, xcode, ipad, sqlite

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory , NSUserDomainMask, YES);
NSString *documentsDir = [paths objectAtIndex:0];

NSFileManager *fileManager = [NSFileManager defaultManager];
NSError *error;
NSString *dbPath =[documentsDir stringByAppendingPathComponent:@"register.sqlite"];
BOOL success = [fileManager fileExistsAtPath:dbPath]; 
sqlite3_stmt *selectstmt;
if(!success)
        {
             NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"register.sqlite"];
            success = [fileManager copyItemAtPath:defaultDBPath toPath:dbPath error:&error];

            if (!success) 
                NSAssert1(0, @"Failed to create writable database file with message '%@'.", [error localizedDescription]);
        }

if (sqlite3_open([dbPath UTF8String], &database) == SQLITE_OK) {

    sql = "select lastname,email,firstname from reg_FORM";

    if(sqlite3_prepare_v2(database, sql, -1, &selectstmt, NULL) == SQLITE_OK) {

         while(sqlite3_step(selectstmt) == SQLITE_ROW) {

             lastname = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 0)];
                    email=[NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 1)];
                    firstname=[NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 2)];
                    NSLog(@"----%@",lastname);
                    NSLog(@"----%@",email);
                    NSLog(@"----%@",firstname);

                }
        sqlite3_finalize(selectstmt);
            }     
        sqlite3_close(database);
        } 
```

我正在使用此代码检索 db 中的值，但我确实知道如何在 db 中插入数据。我正在尝试下面的代码，但它不起作用

```
const char *sql = "insert into reg_FORM (firstname,lastname,email,company,phone) VALUES (aaa,aaa,aaa,aaaa,1223)";
            sqlite3_exec(database, [[NSString stringWithFormat:@"insert into reg_FORM (firstname,lastname,email,company,phone) VALUES (aaa,aaa,aaa,aaaa,1223)"] UTF8String], NULL, NULL, NULL); 
```

//给出在db中插入值的代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:26:48.020

```
{
    BOOL returnValue = YES;
    sqlite3_stmt *insertStmt = nil;
    sqlite3 *UserDB ;   
    if (sqlite3_config(SQLITE_CONFIG_SERIALIZED) == SQLITE_OK)
    {
        NSLog(@"Can now use sqlite on multiple threads, using the same connection");
    }

    int ret = sqlite3_enable_shared_cache(1);
    if(ret != SQLITE_OK)
    {

    }
    // Open the database. The database was prepared outside the application.
    if (sqlite3_open([app.dataBasePath UTF8String], &UserDB) == SQLITE_OK)
    {
            if(insertStmt == nil) 
            {   
                NSString *strValue = [NSString stringWithFormat:@"insert into languagemaster Values(?,?)"];
                const char *sql = [strValue UTF8String];
                if(sqlite3_prepare_v2(UserDB, sql, -1, &insertStmt, NULL) != SQLITE_OK)
                {
                    NSLog(@"Error while creating insertStmt in tblUserAccount %@", [NSString stringWithUTF8String:(char *)sqlite3_errmsg(UserDB)]);
                    returnValue = NO;
                }
            }

            if(sqlite3_bind_int(insertStmt, 1, langid) ) // langid is int
            {
                return NO;
            }
            if(sqlite3_bind_text(insertStmt, 2, [strLanguageName  UTF8String], -1, SQLITE_TRANSIENT) != SQLITE_OK)   // strLanguageName is string
            {
                return NO;
            }   

            if(SQLITE_DONE != sqlite3_step(insertStmt)) 
            {           
                NSLog(@"Error while Executing insertStmt in tblLocation %@", [NSString stringWithUTF8String:(char *)sqlite3_errmsg(UserDB)]);           
                returnValue = NO;
            }

            sqlite3_reset(insertStmt);

            if (insertStmt) 
            {
                sqlite3_finalize(insertStmt);
                insertStmt = nil;
            }
    }
    sqlite3_close(UserDB);  

    return returnValue;                           
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:46:24.853

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory , NSUserDomainMask, YES);
NSString *documentsDir = [paths objectAtIndex:0];

NSFileManager *fileManager = [NSFileManager defaultManager];
NSError *error;
NSString *dbPath =[documentsDir stringByAppendingPathComponent:@"register.sqlite"];
BOOL success = [fileManager fileExistsAtPath:dbPath]; 
sqlite3_stmt *selectstmt;
if(!success)
{
    NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"register.sqlite"];
    success = [fileManager copyItemAtPath:defaultDBPath toPath:dbPath error:&error];

    if (!success) 
        NSAssert1(0, @"Failed to create writable database file with message '%@'.", [error localizedDescription]);
}

if (sqlite3_open([dbPath UTF8String], &database) == SQLITE_OK) {

    const char *sql = "insert into reg_FORM (firstname,lastname,email,company,phone) VALUES ('sdcbb','bbbb','bbbb','bbbb',1111122)";
    sqlite3_prepare_v2(database,sql, -1, &selectstmt, NULL); 
    if(sqlite3_step(selectstmt)==SQLITE_DONE)
    {
        NSLog(@"insert successfully");
    }
    else
    {
        NSLog(@"insert not successfully");

    }

    sqlite3_finalize(selectstmt);
    sqlite3_close(database);
} 
```

# css - 滑动可扩展内联菜单

> ID：12280323
> 
> 赞同：2
> 
> 时间：2012-09-05T11:21:22.320
> 
> 标签：css, menu, inline, sliding, expandable

我有一个简单（外观）菜单的概念，它**仅使用 CSS**扩展和缩回子菜单。

这是概念化的：

![在此处输入图像描述](../Images/cf6a41d302bc4875c4004d527a4420a6.png)

```
<ul>
    <li><a href="#">home</a></li>
    <li><a href="#">main one</a>
        <ul>
            <li><a href="#">sub one</a></li>
            <li><a href="#">sub two</a></li>
            <li><a href="#">sub three</a></li>
        </ul>
    </li>
    <li><a href="#">main two</a>
        <ul>
            <li><a href="#">sub one</a></li>
            <li><a href="#">sub two</a></li>
        </ul>
    </li>
    <li><a href="#">main three</a></li>
</ul> 
```

我已经使用嵌套的无序列表对上面的基本框架进行了编码（忽略缺少类、id、管道符号等），但是我在保持所有内容内联时遇到了麻烦。所有列表都是`list-style-type: none`并且所有列表项都向左浮动。

另外，我不知道如何防止自动换行，以便将整个列表项作为一个整体移动到一个新行，而不是分成两部分。

此外，我可以将什么属性与转换属性结合使用以使嵌套列表在鼠标单击时滑出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:06:38.460

我可以想到两种方法：

**1.**使用`a:focus + ul`（`a:active + ul`对于IE）使菜单在点击时展开。

[**演示**](http://dabblet.com/gist/3635623)

*优点*：

*   它具有出色的浏览器支持：即使在 IE8 中也能按预期工作；有点在 IE7 中，尽管您需要将鼠标悬停在链接上才能看到菜单展开；
*   保留您当前的 HTML 结构，您只需添加`tabindex='1'`到您想要在单击时触发操作的链接（如展开的子菜单）

*缺点*：

*   您不能同时有多个处于“扩展”状态的子菜单；
*   它不是持久的；这意味着一旦您单击页面中的其他位置，展开子菜单的链接就会失去焦点 => 子菜单折叠；

*它是如何工作的*：

*   `a:focus`选择具有焦点的链接（链接在单击后获得焦点并保持焦点直到单击其他内容）
*   `a:focus + ul`选择无序[**列表**](http://www.w3.org/TR/selectors/#adjacent-sibling-combinators)`ul`（[](http://www.w3.org/TR/selectors/#adjacent-sibling-combinators)
***   `a:focus + ul li`选择作为上述无序列表后代的列表项*   `a:focus + ul a`选择作为上述无序列表后代的链接**

 *** * *

**2.**使用复选框破解。

[**演示**](http://dabblet.com/gist/3636352)

*优点*：

*   您可以一次展开多个子菜单；
*   它是持久的；当您单击页面上的其他位置时，展开的菜单不会折叠；

*缺点*：

*   你需要改变你的 HTML 结构；
*   不适用于 IE8 或更早版本；

*它是如何工作的*：

*   `input[type=checkbox]:checked`选中选中的复选框；复选框隐藏在这里（设置`display: none`在它们上面），但是单击 a会选中与单击的属性值相同`label`的复选框；`id``for``label`
*   `input[type=checkbox]:checked ~ ul`选择作为选中复选框的兄弟（不一定相邻）的无序列表 - 请参阅：[**通用兄弟组合器**](http://www.w3.org/TR/selectors/#general-sibling-combinators)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:26:16.090

将主要的一个孩子设置为

```
display:none; 
```

和主要的悬停

将它们设置为

```
display:block; 
```**

# scroll - 滚动一个垂直居中的 DIV，而不在同一个框中滚动另一个

> ID：12280326
> 
> 赞同：0
> 
> 时间：2012-09-05T11:21:33.380
> 
> 标签：scroll, css-position, vertical-alignment

整晚都在做这个，没想到会这么难。我的目标在这个小提琴中用文字解释，如果你只想跳到那个：http: [//jsfiddle.net/6VZeD/](http://jsfiddle.net/6VZeD/)

基本上，我想要一个浮动的、固定大小的推荐框包含两个元素，`a.part`和`.full`，这两个元素都是垂直居中的，即使有多行也是如此。当`.full`溢出导致滚动条时，我想在保持垂直居中的`.full`同时滚动。`a.part`我不能绝对定位`a.part`，因为它需要以任何尺寸垂直居中。所以我包裹`a.part`在一个绝对定位的元素中，但它会随着`.full`. 没有布埃诺。

为简单起见，我在小提琴中留下了一些元素，但如果它很重要，我使用 jQuery isotope 来定位固定大小的框，并且我正在扩展框（宽度、高度、上边距和左边 -边距变化）悬停。所以我很高兴在 中添加 div `.testimonial`，但我无法包装任何东西`.testimonial`（尽管我可以向其中添加类）。我开始探索涉及 .hide() 和 .offset() 的 jQuery 解决方案，但事情开始变得混乱，尤其是因为我大量使用 CSS 过渡。所以我希望尽可能避免使用Javascript。

这是小提琴HTML：

```
<div class="box praise testimonial">
    <div class="abs1">
        <a class="part" href="#">stay vertically centered!<br/>even if you scroll!</a>
    </div>
    <div class="abs2">
        <div class="full">
            <p>This text is larger than its containing box, and I want a scrollbar to appear. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum vitae nisl at justo sodales congue. Praesent sed arcu sit amet dolor molestie venenatis. Curabitur et consequat libero. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Sed posuere lectus nec est viverra faucibus scelerisque massa fermentum. Donec ultricies bibendum tincidunt. Sed sit amet mi massa, a egestas arcu. Maecenas vitae libero metus. Proin dolor lorem, molestie ut ullamcorper sit amet, varius sit amet urna. Nunc aliquet scelerisque dui, et tristique quam molestie vitae. Etiam ac justo sapien. Etiam ipsum ante, porttitor posuere placerat id, congue quis neque. Nunc et elementum odio. Sed vulputate semper erat, a lobortis dolor porttitor ut.</p>
        </div>
    </div>
</div>
<div class="box praise testimonial">
    <div class="abs1">
        <a class="part" href="#">stay vertically centered!<br/>even if you scroll!</a>
    </div>
    <div class="abs2">
        <div class="full">
            <p>this<br/>should<br/>stay<br/>centered<br/>too!</p>
        </div>
    </div>
</div>​ 
```

和CSS：

```
body {
    color: #fff;
}
a { color: #fff; font-size: 18px; font-weight: bold; text-decoration: none; }
.box {
    display: inline-block;
    position: relative;
    float: left;
    overflow: hidden;
    margin: 20px;
    background: #777;
}
.testimonial, .testimonial .abs1, .testimonial .abs2, .testimonial a.part, .testimonial .full {
    height: 250px;
    width: 250px;
}
.testimonial:hover {
    overflow: auto !important;
}
.testimonial a.part {
    display: table-cell;
    vertical-align: middle;
    text-align: right;
}
.testimonial .abs1 {
    position: absolute;
    top: 0;
    left: 0;
}
.testimonial .abs2 {
    position: absolute;
    top: 0;
    left: 0;
}
.testimonial .full {
    display: table-cell;
    vertical-align: middle;
    opacity: 0.5
} 
```

任何帮助都会赢得我永恒的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:48:58.417

试试[这个小提琴中的解决方案，](http://jsfiddle.net/FZzAK/)它还将多行文本集中在图像上。

# php - PHP清理不可点击的网址但保留img

> ID：12280327
> 
> 赞同：0
> 
> 时间：2012-09-05T11:21:40.197
> 
> 标签：php, regex

我如何从描述中清除所有不在标签内的 url。并且还保留所有img url？

例如，结果应该是这样的：

之前的描述：

```
this is my description www.url.com and other stuff. 
i have a picture <img src="www.url.com"> and other desc stuf..
sample text goes here and here.. 
```

之后的描述应该是：

```
this is my description and other stuff. 
i have a picture <img src="www.url.com"> and other desc stuf..
sample text goes here and here.. 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:57:18.280

```
$string = 'this is my description www.url.com and url.com and http://www.url.com other stuff. 
i have a picture <img src="www.url.com"> and other desc stuf..
sample text goes here and here..';

echo preg_replace('/[^\"](http(s?):\/\/)?(www)?\.?([A-Za-z0-9\-]){2,25}\.(com|net|org)[^\"]/', ' ', $string); 
```

输出：

```
this is my description and and other stuff. 
i have a picture <img src="www.url.com"> and other desc stuf..
sample text goes here and here.. 
```

不确定这是否是您要查找的内容。

它显然不匹配所有可能的 URL，但它是您可以开始的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:51:44.503

好吧，这非常困难，您最好尝试其他选择。一个 URL 有很多不同的形状和形式，要为所有类型的 URL 创建一个 100% 可靠的正则表达式是非常困难的。

首先，如果您需要匹配 100% 的 url，或者 x% 也足够好并且误报是可以的，那么您必须做出选择。

然后你可以用一个点匹配所有单词，通过 parse_url 运行它，如果这给你一个好的结果，把它从文本中删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T11:48:50.137

```
$words = explode(' ', $description);
foreach ($words as $k => $v)
    if (filter_var($v, FILTER_VALIDATE_URL) || preg_match("/([a-z0-9\.]+)\.([a-z0-9][a-z0-9]+)/i", $v))
        unset($words[$k]);
$description = implode(' ', $words); 
```

此解决方案删除格式正确的 URL 和域，但它是一个近似解决方案，因为我不知道（恕我直言）一个词是*whereis.it 之类的域还是**will.i.am*之类的简单词。

# javascript - 将 js 函数调用到 for 块中

> ID：12280332
> 
> 赞同：0
> 
> 时间：2012-09-05T11:22:07.980
> 
> 标签：javascript, python, radio-button, tornado

我有这个问题。我从 Tornado 中获取数据向量。这个向量是“用户”。我有这个块

```
{% if users %}
{% for user in users %}
            <form name="form_user_{{ user.id }}" method="post" action="/networks/{{ net.id }}/rights">
              <tr>
                <td>
                  <div>
                    {{ escape(user.name) }}
                    <input type='hidden' name="id" value='{{ user.id }}'>
                  </div>
                </td>
                <td>

                  <label class="radio inline" onclick="document.forms['form_user_{{ user.id }}'].submit();">
                    <input type="radio" name="optionsRadios" id="optionsRadios1" value="0">
                    None
                  </label>
                  <label class="radio inline" onclick="document.forms['form_user_{{ user.id }}'].submit();">
                    <input type="radio" name="optionsRadios" id="optionsRadios2" value="1">
                    Read
                  </label>
                  <label class="radio inline" onclick="document.forms['form_user_{{ user.id }}'].submit();">
                    <input type="radio" name="optionsRadios" id="optionsRadios3" value="4">
                    Read + Commands
                  </label>

                  {{ xsrf_form_html() }}
                </td>

              </tr>
            </form>
            {% end %}
          {% end %} 
```

现在我有一个这样的js函数：

```
$(document).ready(function(){
    //function check(){

    {% if users %}
      {% if user.perm == 1 %}

      $('input:radio[name=optionsRadios]:nth(1)').attr('checked',true);
      //$('input:radio[name=sex]')[1].checked = true;

      {% elif user.perm == 4 %}  

      $('input:radio[name=optionsRadios]:nth(2)').attr('checked',true);
      //$('input:radio[name=sex]')[2].checked = true;

      {% else %}

      $('input:radio[name=optionsRadios]:nth(0)').attr('checked',true);
      //$('input:radio[name=sex]')[0].checked = true;

      {% end %}
    {% end %}

  }); 
```

但是 Tornado 告诉我，当用户列表为空时，变量 user 没有被初始化。所以我会将函数调用到 for 块中，将函数命名为例如 function check(){} 我不知道......只有当程序进入 for 块时，我才能如何调用函数？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:50:07.817

为什么你不能把它`{{user.perm}}`放到隐藏的输入中，然后从 js 代码中获取呢？

如果你想这样做，那么就这样做：

```
$(document).ready(function(){
    //function check(){

    {% for user in users %}
      {% if user.perm == 1 %}

      $('input:radio[name=optionsRadios]:nth(1)').attr('checked',true);
      //$('input:radio[name=sex]')[1].checked = true;

      {% elif user.perm == 4 %}  

      $('input:radio[name=optionsRadios]:nth(2)').attr('checked',true);
      //$('input:radio[name=sex]')[2].checked = true;

      {% else %}

      $('input:radio[name=optionsRadios]:nth(0)').attr('checked',true);
      //$('input:radio[name=sex]')[0].checked = true;

      {% end %}
    {% end %}

  }); 
```

# c++ - 外部标头中的未知数据类型

> ID：12280333
> 
> 赞同：0
> 
> 时间：2012-09-05T11:22:08.450
> 
> 标签：c++, visual-studio, dll, include

我正在尝试使用一个库编写一个 .dll，该库附带一些运行没有问题的演示项目。当我尝试#include 标头时，编译器抱怨未定义某些数据类型。这是生成的错误示例

```
1>c:\program files (x86)\audiokinetic\wwise v2012.1.4 build 4260\sdk\include\ak\wwise\utilities.h(82) : error C2061: syntax error : identifier 'LPCWSTR'
1>c:\program files (x86)\audiokinetic\wwise v2012.1.4 build 4260\sdk\include\ak\wwise\utilities.h(90) : error C2061: syntax error : identifier 'LPCWSTR'
1>c:\program files (x86)\audiokinetic\wwise v2012.1.4 build 4260\sdk\include\ak\wwise\utilities.h(97) : error C2061: syntax error : identifier 'LPCWSTR'
1>c:\program files (x86)\audiokinetic\wwise v2012.1.4 build 4260\sdk\include\ak\wwise\utilities.h(107) : error C2061: syntax error : identifier 'LPCWSTR'
1>c:\program files (x86)\audiokinetic\wwise v2012.1.4 build 4260\sdk\include\ak\wwise\utilities.h(110) : error C2061: syntax error : identifier 'DWORD'
1>c:\program files (x86)\audiokinetic\wwise v2012.1.4 build 4260\sdk\include\ak\wwise\utilities.h(113) : error C2061: syntax error : identifier 'DWORD' 
```

添加

```
#include <windows.h>
#include <atlstr.h> 
```

这个外部实用程序.h 文件解决了问题，但作为它的第 3 方头文件，我不认为我应该编辑它，并且考虑到这些其他演示项目#include 与我相同的头文件，似乎表明问题出在其他地方。

谁能想到会发生这种情况的原因。我尝试使用的库是 Wwise（声音引擎）。这是我链接的 .libs 列表

```
AkSoundEngine.lib
AkMemoryMgr.lib
AkStreamMgr.lib
AkMusicEngine.lib
CommunicationCentral.lib
dxguid.lib
ws2_32.lib
dsound.lib
dinput8.lib
xinput.lib 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:28:21.897

通常，这可以通过更改包含标题的顺序来解决。

假设一个名为的文件`header.h`具有以下内容：

```
LPCWSTR foo; 
```

在你主要：

```
// This is fail.
#include "header.h"
#include <windows.h> 
```

尝试：

```
// Success!
#include <windows.h>
#include "header.h" 
```

# android - 加载 ListView 时的 ProgressBar（使用 AsyncTask）

> ID：12280336
> 
> 赞同：5
> 
> 时间：2012-09-05T11:22:14.640
> 
> 标签：android, android-layout, android-ui

我试图在加载自定义 ListView 时显示进度条，然后隐藏它。我正在使用异步任务，但由于某种原因 - 未设置内容视图并且之前的布局视图被卡住，直到加载所有列表视图。

这是我的代码：

```
private ListView listViewGameResults;   
    protected View dialogLayout;
    protected ArrayList<Game> listGames;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState); 
        setContentView(R.layout.adresults);
        GameResultsLoader gameResultsLoader = new GameResultsLoader();              
        gameResultsLoader.execute();        
    }

    private class GameResultsLoader extends AsyncTask<Void, Void, Void> {       
        private GameResultsAdapter adapter;

        public GameResultsLoader() {            
        }

        @Override
        protected void onPreExecute() { 
        }

        @Override
        protected Void doInBackground(Void... params) { 
            try {
            listGames = GameResultsCache.getInstance().getGameResults();
            adapter = new GameResultsAdapter(getBaseContext(), listGames);
            listViewGameResults = (ListView)findViewById(R.id.listViewGameResults);
            } 
            catch (Exception e) {
                // TODO Auto-generated catch block
                finish();
            }

            return null;
        }

        @Override
        protected void onPostExecute(Void res) {
            listViewGameResults.setAdapter(adapter);
            listViewGameResults.setDivider(null);
            listViewGameResults.setDividerHeight(0);
            ProgressBar pb = (ProgressBar)findViewById(R.id.progressbar_loading);
            pb.setVisibility(View.GONE);            
        }
    } 
```

我的布局中的 ProgressBar 和 ListView：

```
<ProgressBar
       style="?android:attr/progressBarStyle"
       android:layout_centerInParent="true"
       android:id="@+id/progressbar_loading"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content" />
    <ListView
         android:id="@+id/listViewGameResults"
         android:layout_width="fill_parent"
         android:layout_height="fill_parent"
         android:layout_marginTop="1dip"
         android:layout_below="@+id/upperstrip"
         android:layout_above="@+id/ivDownStrip" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T11:34:59.587

您需要设置gone的默认可见性。`progressBar`设置`onPreExecute()`Visible并`onPostExecute()`设置gone。

```
<ProgressBar
       style="?android:attr/progressBarStyle"
       android:layout_centerInParent="true"
       android:id="@+id/progressbar_loading"
       android:visibility="gone"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content" />
    <ListView
         android:id="@+id/listViewGameResults"
         android:layout_width="fill_parent"
         android:layout_height="fill_parent"
         android:layout_marginTop="1dip"
         android:layout_below="@+id/upperstrip"
         android:layout_above="@+id/ivDownStrip" /> 
```

你的活动应该是这样的

```
public class demo extends Activity{
    private ListView listViewGameResults;   
        protected View dialogLayout;
        protected ArrayList<Game> listGames;
    progressBar progress;
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState); 
            setContentView(R.layout.adresults);
            progress=(ProgressBar)findViewByid(R.id.progressbar_loading);
            GameResultsLoader gameResultsLoader = new GameResultsLoader(this);              
            gameResultsLoader.execute();        
        }
    } 
```

使用一个单独的类`AsyncTask`

```
public class GameResultsLoader extends AsyncTask<Void, Void, Void> {       
        private GameResultsAdapter adapter;
        Demo demo;
        public GameResultsLoader(Demo demo) {   
        this.demo=demo;         
        }

        @Override
        protected void onPreExecute() { 
        demo.progress.setvisibility(View.Visible);
        }

        @Override
        protected Void doInBackground(Void... params) { 
            try {
            listGames = GameResultsCache.getInstance().getGameResults();
            adapter = new GameResultsAdapter(getBaseContext(), listGames);
            listViewGameResults = (ListView)findViewById(R.id.listViewGameResults);
            } 
            catch (Exception e) {
                // TODO Auto-generated catch block
                finish();
            }

            return null;
        }

        @Override
        protected void onPostExecute(Void res) {
            listViewGameResults.setAdapter(adapter);
            listViewGameResults.setDivider(null);
            listViewGameResults.setDividerHeight(0);
            ProgressBar pb = (ProgressBar)findViewById(R.id.progressbar_loading);
            demo.progress.setVisibility(View.GONE);            
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-16T10:19:43.867

如果您使用的是在主线程上工作的 asnkTask，那么应用程序的负载会更大。所以更好的解决方案是使用 Service.class。 **下载此示例**检查此链接所有解决方案都在那里并下载它：您还必须从重新启动此应用程序中获取列表。 [https://github.com/PankajSavaliyaGit/Upload-List](https://github.com/PankajSavaliyaGit/Upload-List)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T11:27:39.940

您必须编写代码以在 preExecute 方法中启动 progressDialog 并在 postExecute 关闭它。

```
@Override
protected void onPreExecute() {
     proDialog = new ProgressDialog(context);
     proDialog.setTitle("App name");
     proDialog.setMessage("Loding...");
     proDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
     //proDialog.setIcon(R.drawable.)
     proDialog.setCancelable(true);
     proDialog.show();
}

@Override
protected void onPostExecute(Void res) {
     proDialog.dismiss();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-06T18:50:12.520

您可以做的第一件事是将进度条码放在`OnCreate`方法之后。但最好的办法是为进度条创建一个简单的方法，并且只在`OnCreate`方法中调用它。

以下代码对我来说很好：

```
private void showDialog() {
    progressDialog = new ProgressDialog(this);
    progressDialog.setTitle("Have a nice time");
    progressDialog.setMessage("Please wait while showing Titles :) ");
    progressDialog.setCancelable(true);
    progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
    progressDialog.show();
} 
```

然后在里面调用这个方法`OnCreate`

```
showDialog(); 
```

当数据准备好查看时，您可以使用以下命令停止 Progress：

```
progressDialog.dismiss(); 
```

我希望这是有帮助的。

# iphone - UIButton 与另一个 UIButton 重叠时没有响应

> ID：12280339
> 
> 赞同：2
> 
> 时间：2012-09-05T11:22:24.440
> 
> 标签：iphone, uikit, uibutton

我有一个`UIViewController`叫`MyViewController`. MyViewController 的视图有一个`UIButton`称为`MyFirstButton`子视图。然后 MyViewController 的视图添加了另一个名为`MySubView`. `MySubView`直接放在上面`MyFirstButton`，所以`MyFirstButton`看不到。`MySubView`反过来又`UIButton`被称为`MySecondButton`子视图。

问题是 - 如果 MySecondButton 的框架与 MyFirstButton 的框架重叠，`MySecondButton`则不响应。

我试图通过将`userInteractionEnabled`MyViewController 的视图设置为 NO 并将 设置为 YES来修复它`MySubView`，但它没有帮助。按钮仍然没有响应。如何启用位于另一个上方的按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:34:26.247

您不能对 MySecondButton 下的特定 MyFirstButton 使用该操作...我不认为可以这样做..您实际上可以做的是在单击时隐藏 MySecondButton 以显示 MYFirstButton，然后在单击 MYFirstButton 时执行其操作并在第一个顶部再次显示 MYSecondButton :) 同样隐藏子视图 2 ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:41:32.520

尝试这个，

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    UIButton *firstButton=[UIButton buttonWithType:UIButtonTypeRoundedRect];
    [firstButton setTitle:@"first" forState:UIControlStateNormal];
    firstButton.frame=CGRectMake(40, 70, 80, 80);
    [firstButton addTarget:self action:@selector(firstButtonClicked) forControlEvents: UIControlEventTouchUpInside];
    [self.view addSubview:firstButton];

    UIView *view=[[UIView alloc]initWithFrame:CGRectMake(0, 0, 80, 80)];
    [firstButton addSubview:view];
    UIButton *secondButton=[UIButton buttonWithType:UIButtonTypeRoundedRect];
    [secondButton setTitle:@"second" forState:UIControlStateNormal];
     secondButton.frame=CGRectMake(0, 0, 80, 80);
    [secondButton addTarget:self action:@selector(secondButtonClicked) forControlEvents: UIControlEventTouchUpInside];
    [view addSubview:secondButton];
    // Do any additional setup after loading the view, typically from a nib.
}
-(void)firstButtonClicked {
    NSLog(@"first");
}
-(void)secondButtonClicked {
    NSLog(@"second");
} 
```

# objective-c - 类似于 Xcode 4 中的渐变按钮栏

> ID：12280341
> 
> 赞同：3
> 
> 时间：2012-09-05T11:22:38.303
> 
> 标签：objective-c, macos, cocoa, interface-builder

我正在寻找的栏是编辑器区域和调试区域之间的分隔栏：

![](../Images/133840228a867b2da6e72493ce7ba7c2.png)

具体来说，我希望按钮没有边框，并且我希望有垂直分隔符（在“无选择”的左侧）。

我还没有在 Mountain Lion 中完成任何 AppKit 的工作，所以在我开始实现我自己的自定义控件之前，我想知道我是否忽略了一个新控件（或现有控件的选项），或者是否有人已经实现了自定义控制这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:20:52.983

它只是带有自定义背景图像（即银色效果）的 NSButtons 和作为控制图像的“图像”。

快速查看 Xcode.app/Contents/OtherFrameworks/DevToolsInterface.framework/Versions/A/Resources 将显示相关图像。

# jquery - jQuery：关于 serialize() 的输出

> ID：12280342
> 
> 赞同：0
> 
> 时间：2012-09-05T11:22:41.367
> 
> 标签：jquery

我在使用 序列化表单后得到这个输出`serialize()`。

```
cambio_estado_factura%5Bestado%5D=1 
```

正如[文档](http://api.jquery.com/serialize/)所说，我期望这种格式的东西：

```
a=1&b=2&c=3&d=4&e=5 
```

这是我要序列化的形式：

```
<form id="cambio_estado" action="">
    <div class="fld ">
        <label for="cambio_estado_factura_estado">Estado</label>
        <ul class="radio_list">
            <li>
                <input name="cambio_estado_factura[estado]" type="radio" value="1" id="cambio_estado_factura_estado_1">
                <label for="cambio_estado_factura_estado_1">Recibida</label>
            </li>
            <li>
                <input name="cambio_estado_factura[estado]" type="radio" value="2" id="cambio_estado_factura_estado_2">
                <label for="cambio_estado_factura_estado_2">Registrada</label>
            </li>
        </div>
    <input id="cambio_estado" type="submit" value="Cambiar">
</form> 
```

这是jQuery代码：

```
$('form#cambio_estado').submit(function(e){
    e.preventDefault();
    alert();
    console.log($('form#cambio_estado'));
    var datos_formulario = $('form#cambio_estado').serialize();
    console.log(datos_formulario);
    $.post($("section#consultarFactura").data("url-cambio-estado"),
        {"cambio_estado_factura": datos_formulario }
    );

}); 
```

任何想法？

jQuery 1.6.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:30:29.763

这实际上是`serialize()`.

您的问题是表单中的名称是`cambio_estado_factura[estado]`. 这实际上会转换为`cambio_estado_factura%5Bestado%5D`，这是元素的转义名称。`Serialize()`将采用您为表单上每个元素使用的名称。如果您想在结果查询字符串上显示不同的名称，请在表单本身上使用适当的名称。

一个例子 - 这个表格将`a=1&a=2`在调用`serialize()`它时返回。

```
<form>
    <input type="text" name="a" value="1" />
    <input type="text" name="b" value="2" />
</form> 
```

编辑：

参考您的评论，这是我的示例`parse_str`：

```
parse_str('cambio_estado_factura%5Bestado%5D=1', $arr);
var_dump($arr);
echo $arr["cambio_estado_factura"]["estado"] == 1 ? "Value set" : "Value not set"; 
```

这将返回：

```
array
 'cambio_estado_factura' => 
    array
      'estado' => string '1' (length=1)

Value set 
```

这意味着您假设您的阵列是单级的，而实际上它是多级的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:32:45.340

该字符串已被编码。

```
%20 is space
%5B is '['
and %5D is ']' 
```

由于您已`cambio_estado_factura[5Bestado]`作为数组给出，因此它传递的最终输出只是一个参数：

```
cambio_estado_factura[5Bestado] = 1 
```

[**这与URL 编码**](http://en.wikipedia.org/wiki/Percent-encoding)相同，它是将内容传输到 URL 的安全方式。这也是预期的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T11:33:04.100

它采用`name`输入，这`name="cambio_estado_factura[estado]"`也是，由于两个输入控件共享相同的名称，表单将只提交一个。

> 在表单提交中发送数据时使用该名称。不同的控件响应不同。例如，您可能有多个 ID 不同但名称相同的单选按钮。提交时，响应中只有一个值。

所以要小心在表单中使用唯一的名称。

# applescript - 苹果脚本错误

> ID：12280346
> 
> 赞同：0
> 
> 时间：2012-09-05T11:22:52.460
> 
> 标签：applescript

我想在 Application 文件夹中搜索已安装的应用程序，但下面的代码无法做到这一点，请建议我正确的方法。

```
tell application "Finder"

    if folder "Applications" of startup disk contains "Safari" then
        return true
    else
        return false
    end if
end tell 
```

我得到了现有应用程序的 chk 代码，如果应用程序不存在在这种情况下，AppleScript 会弹出一个标题为“选择应用程序”的对话框，询问“AppYouDontHave 在哪里？”，请更正。

修改代码

```
tell application "Finder"
    if application "Safari" exists then
        tell application "Safari"
            set safariVersion to version
            return version
        end tell
    else
        false
    end if
end tell 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:10:42.827

获取身份证

```
get id of application "Safari" 
```

返回“com.apple.Safari”

```
 try
        exists application id "com.apple.Safari"
    on error
        return false
    end try 
```

这应该解决您修改后的评论：

```
try
    tell application "Finder" to set theApp to get first item of folder "Applications" of the startup disk whose name is "Safari.app"
on error
    return false
end try
version of theApp 
```

# javascript - 如何在javascript中将字符串转换为预期日期格式？

> ID：12280348
> 
> 赞同：0
> 
> 时间：2012-09-05T11:23:01.443
> 
> 标签：javascript, jquery

我有字符串 08082012，现在我需要将其转换为 js/jquery 中的预期日期格式，例如格式为 M/d/y。所以结果将是 2012 年 8 月 8 日。

你们能建议我实现的可能方法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:31:48.020

如果您知道，它只能让这 4 种不同的格式使用子字符串。

```
date = "08082012";

if(date.length == 8)
{
       new_date = date.substring(0,2) + "/" +  date.substring(2,4) + "/" +  date.substring(4);
}

if(date.length == 7)
... 
```

# python - 跟踪 QTreeWidget 中的变化

> ID：12280349
> 
> 赞同：2
> 
> 时间：2012-09-05T11:23:05.810
> 
> 标签：python, qt, pyqt, signals-slots, qtreewidget

我有一个可编辑的`QTreeWidget`，并希望每次用户编辑一个项目时更新一些内部结构。但是，当某些项目发生变化时，没有专门发出信号。有`itemChanged()`，但它不仅在项目更改时发出，而且在*创建*时也发出。到目前为止，我找不到一种优雅的方式来区分这两种情况。

我发明的唯一解决方案是这样的：

```
# slot for itemClicked()
def EditName(self, item, column):
    self.oldname = item.text(0)

# slot for itemChanged()
def RenameFile(self, item, column):
    newname = item.text(0)
    if newname != self.oldname:
        # Do something with newname here 
```

但是，这不是很方便，因为`self.oldname`每当我向树中添加新项目时，我都必须手动设置，这在代码中的很多地方都会发生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T17:52:13.637

跟踪更改的一种方法是创建一个子类`QTreeWidgetItem`并重新实现其[`setData`](http://doc-snapshot.qt-project.org/4.8/qtreewidgetitem.html#setData)功能。

然后，重新实现的函数可以检查[`role`](http://doc-snapshot.qt-project.org/4.8/qt.html#ItemDataRole-enum)参数以查看要采取的操作：

```
class TreeWidgetItem(QtGui.QTreeWidgetItem):
    def __init__(self, *args, **kwargs):
        QtGui.QTreeWidgetItem.__init__(self, *args, **kwargs)
        self.setFlags(self.flags() | QtCore.Qt.ItemIsEditable)

    def setData(self, column, role, value):
        if role == QtCore.Qt.EditRole:
            # do important stuff here...
            print 'before: "%s", after: "%s"' % (
                self.text(column), value.toString())
        QtGui.QTreeWidgetItem.setData(self, column, role, value) 
```

# android - 使用http post android发送cookie

> ID：12280350
> 
> 赞同：7
> 
> 时间：2012-09-05T11:23:07.030
> 
> 标签：android, http, zend-framework, post, cookies

大家好，我正在尝试在 android 中发送带有 http post 的 cookie

这是我的代码

```
webUrl = "XXXXXX";
        webView = (WebView) findViewById(R.id.webview);
        try
        {
            CookieStore cookieStore = new BasicCookieStore();
            Cookie cookie = new BasicClientCookie("session_id", "1234");
            cookieStore.addCookie(cookie);

            DefaultHttpClient httpclient = new DefaultHttpClient();

            BasicHttpContext mHttpContext = new BasicHttpContext();

            mHttpContext.setAttribute(ClientContext.COOKIE_STORE, cookieStore);

             HttpGet httpget = new HttpGet("XXXXX");

             HttpResponse response = httpclient.execute(httpget);
             HttpEntity entity = response.getEntity();

             Log.i("TAG", "Login form get: " + response.getStatusLine());
             if (entity != null) {
                 entity.consumeContent();
             }
             Log.i("TAG", "Initial set of cookies:");
             List<Cookie> cookies = httpclient.getCookieStore().getCookies();
             if (cookies.isEmpty()) {
                 Log.i("TAG", "None");
             } else {
                 for (int i = 0; i < cookies.size(); i++) {
                     Log.i("TAG", "- " + cookies.get(i).toString());
                 }
             }

            HttpPost httpost = new HttpPost("XXXXX");

            List <NameValuePair> nvps = new ArrayList <NameValuePair>();
            nvps.add(new BasicNameValuePair("session_id", "1234"));
            nvps.add(new BasicNameValuePair("selected_cid", "1234"));
            nvps.add(new BasicNameValuePair("selected_kaisai_id", "1234"));
            nvps.add(new BasicNameValuePair("iid", "1234"));
            nvps.add(new BasicNameValuePair("tid", "1234"));

            httpost.setEntity(new UrlEncodedFormEntity(nvps));

            response = httpclient.execute(httpost);
            entity = response.getEntity();

            Log.i("TAG", "Login form get: " + response.getStatusLine());
            if (entity != null) {
                entity.consumeContent();
            }

            Log.i("TAG", "Post logon cookies:");
            cookies = httpclient.getCookieStore().getCookies();
            if (cookies.isEmpty()) {
                System.out.println("None");
            } else {
                for (int i = 0; i < cookies.size(); i++) {
                    Log.i("TAG", "- " + cookies.get(i).toString());
                }
            }
            httpclient.getConnectionManager().shutdown();        
        }
        catch(Exception e)
        {
            Log.i("TAG", e.getMessage());
        }
        WebSettings webSettings = webView.getSettings();
        webSettings.setJavaScriptEnabled(true);
        String postData = "session_id=1234";
        webView.postUrl(webUrl, EncodingUtils.getBytes(postData, "BASE64")); 
```

我可以发布来自 postData 的数据，但不能发布 cookie cookie 没有显示在 webview 中这是 PHP 端

```
public function cookietestAction()
    {
        echo "mixi for netrecorder tester<br/>\n";

        echo "<br/>Cookies...<br/>\n\n";
        $request = new Zend_Controller_Request_Http();
        $sessionid = $request->getCookie('session_id');
        echo "<br/>\nsessionid = ".$sessionid."<br/>\n";

        $selected_cid = $request->getCookie('selected_cid');
        echo "\nselected_cid = ".$selected_cid."<br/>\n";

        $selected_kaisai_id = $request->getCookie('selected_kaisai_id');
        echo "\nselected_kaisai_id = ".$selected_kaisai_id."<br/>\n";

        $iid = $request->getCookie('iid');
        echo "\niid = ".$iid."<br/>\n";

        $tid = $request->getCookie('tid');
        echo "\ntid = ".$tid."<br/>\n";

        if($this->getRequest()->isPost())
        {
            echo "<br/>POST data only...<br/>\n\n";
            $post = $this->getRequest()->getPost('session_id');
            echo "<br/>\nsession_id=".$post."<br/>\n";
            $post = $this->getRequest()->getPost('selected_cid');
            echo "selected_cid=".$post."<br/>\n";
            $post = $this->getRequest()->getPost('selected_kaisai_id');
            echo "selected_kaisai_id=".$post."<br/>\n";
            $post = $this->getRequest()->getPost('tid');
            echo "tid=".$post."<br/>\n";
            $post = $this->getRequest()->getPost('iid');
            echo "iid=".$post."<br/>\n";
        }
} 
```

谁能告诉我怎么了？谢谢你

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-05T11:29:39.587

添加 cokie 像这样使用它：它应该添加在标题中

```
 post.addHeader("Cookie", " PHPSESSID="+PHPSESSID+"; gc_userid="+gc_user+"; gc_session="+gc); 
```

对你来说应该是这样的：

```
 httpost.addHeader("Cookie","session_id = 1234;"...) 
```

# android - 如何在android phonegap中将一个页面导航到另一个页面？

> ID：12280351
> 
> 赞同：28
> 
> 时间：2012-09-05T11:23:14.953
> 
> 标签：android, cordova

我是 PhoneGap 的新手。

我的申请必须有 2 页。首先是加载正常。第一页包含一个按钮，单击该按钮应移至第二页。如何加载第二页？我应该再准备一项扩展 DriodGap 的活动吗？

我还有一个问题：如何捕捉返回按钮事件？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-09-05T11:35:10.177

导航到另一个 html 页面的代码。

```
<!DOCTYPE HTML>
<html>
  <head>
    <title>PhoneGap</title>

          <script type="text/javascript" charset="utf-8" src="cordova-1.5.0.js"></script>      
          <script type="text/javascript" charset="utf-8">

             function onLoad()
             {
                  document.addEventListener("deviceready", onDeviceReady, true);
             }

             function onDeviceReady()
             {
                  // navigator.notification.alert("PhoneGap is working");
             }

             function callAnothePage()
             {
                window.location = "test.html";
             }

          </script>

  </head>

  <body onload="onLoad();">
        <h1>Welcome to PhoneGap</h1>
        <h2>Edit assets/www/index.html</h2>
        <button name="buttonClick" onclick="callAnothePage()">Click Me!</button>
  </body> 
```

**返回事件的代码。**

```
<script type="text/javascript" charset="utf-8">

             document.addEventListener("deviceready", onDeviceReady, true);

             function onDeviceReady()
             {     
                   document.addEventListener("backbutton", BackKeyDown, true);
             }

             function BackKeyDown()
             {
                 navigator.notification.alert();
                 //navigator.app.exitApp();  // For Exit Application
             }
        </script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-11-26T12:03:32.083

您需要像这样从 Javascript 重定向：

**HTML 代码：**

```
<a id="loginLnk" href="javascript:(void)">Login</a> 
```

**Javascript代码：**

```
document.getElementById("loginLnk").addEventListener("click", function(){window.location = "/test.html";}); 
```

# php - 分布式 Web 应用程序的 PHP utf-8 最佳实践和风险

> ID：12280358
> 
> 赞同：1
> 
> 时间：2012-09-05T11:23:45.590
> 
> 标签：php, utf-8, mbstring

我已经阅读了有关此主题的几篇文章，但我仍然想与社区分享一些疑问。

我想为我开发的应用程序DaDaBIK添加完整的utf-8支持；该应用程序可以与不同的 DBMS（如 MySQL、PostgreSQL、SQLite）一起使用。数据库中使用的字符集可以是 ANY。我不能设置或假设字符集。

我的方法是使用 iconv 函数转换我从 utf-8 中的数据库读取的所有内容，然后在我必须写入数据库时​​将其转换回原始字符集。这将允许我假设我正在使用 utf-8。

您可能知道，问题在于 PHP 本身不支持 utf-8，即使假设使用 mbstring，也有（根据[http://www.phpwact.org/php/i18n/utf-8](http://www.phpwact.org/php/i18n/utf-8)）几个 PHP 函数可能会产生 utf-8 问题并且没有 mbstring 对应关系，例如 PREG 扩展、strcspn、trim、ucfirst、ucwords....

由于我使用了一些外部库，例如 adodb 和 htmLawed，我无法控制所有源代码......在这些库中，有几种使用这些函数的案例......你有什么建议吗？最重要的是，wordpress 等非常流行的应用程序如何处理这个（恕我直言大）问题？我怀疑他们在代码中没有任何“修剪”......他们只是冒险（例如数据损坏）或者有什么我看不到？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:47:05.560

首先：**PHP 本身就支持 UTF-8。**只有少数处理字符串的核心函数不应该用于多字节字符串。

这完全取决于您正在谈论的功能以及您使用它们的目的。PHP 字符串是无编码字节数组。因此，大多数标准函数仅适用于原始字节。`trim`只是在字符串的开头和结尾查找某些字节并将它们修剪掉，这对于 UTF-8 编码的字符串非常有效，因为 UTF-8 完全兼容 ASCII。`str_replace`在字符串中查找字符（字节）并替换或删除它们的类似函数也是如此。

唯一真正的问题是使用偏移量的函数，例如`substr`. 默认函数使用字节偏移量，而您确实需要更智能的*字符偏移量*，它不一定对应于字节。对于这些功能，`mb_`通常存在等价物。

`preg_``/u`使用修饰符支持 UTF-8 就好了。

例如，如果您有一个库使用`substr`潜在的多字节字符串，请使用不同的库，因为它是一个坏库。

请参阅[每个程序员绝对、积极需要了解的关于使用文本](http://kunststube.net/encoding/)的编码和字符集的知识，以更深入地讨论和揭开 PHP 和字符集的神秘面纱。

此外，字符串在数据库中的编码方式无关紧要。您可以为数据库设置连接编码，这将导致它为您转换所有内容并始终以所需的客户端编码返回您的数据。无需在 PHP 中对所有内容进行图标转换。

# eclipse - Eclipse 错误：无法打开 .obj 文件

> ID：12280359
> 
> 赞同：1
> 
> 时间：2012-09-05T11:23:48.213
> 
> 标签：eclipse

我正在将 CDT 插件用于 Eclipse 进行 C/C+ 开发。但我无法编译代码，它显示以下错误链接：致命错误 LNK1104：无法打开文件'C:\Program.obj' 可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:07:00.780

一种解决方法是确保获取源文件并在没有空格的路径中生成目标文件（不像“ `C:\Program Files (x86)\...`”）

如果您可以在定义的任何路径周围添加双引号，另一种解决方法是检查项目的设置。还要检查`.project`文件本身的内容。

# java - 如何将文件的访问权限（存储在文件表中）分配给用户（存储在我的用户表中）

> ID：12280370
> 
> 赞同：1
> 
> 时间：2012-09-05T11:24:34.393
> 
> 标签：java

我正在用java编写一个存储库程序，我有一个包含存储库用户的用户表和一个包含存储库中所有导入文件的文件表，在MYSQL数据库中。如何设置我的文件对用户的访问权限？事实上，我怎样才能确定哪个用户对存储库中的哪个文件具有女巫访问权限（读、写、读和写）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:32:50.270

如果您正在编写文件存储库，那么文件访问权限应该是您的 mocel 的概念。您通常不会有一个专门的用户来运行文件存储库程序，并且所有文件都将拥有该用户的权限。

然后授权用户后的程序将从它的数据库表中读取用户对他们想要获取的文件具有什么样的权限。

由于您将文件作为 BLOB 对象物理存储在数据库中，因此您应该创建另一个表来存储用户对这些文件的权限。

```
create table privileges (
    userid bigint,
    fileid bigint,
    read bool,
    write bool,
    PRIMARY KEY (userid,fileid)
) 
```

然后，每当您想检查用户是否具有对文件的读取权限时

```
select userid, fileid from user u join privileges p on u.id=p.userid join files f on f.id=p.fileid and p.read=1 
```

# python - Python：RuntimeError：%S 的超类 __init__() 从未被调用

> ID：12280371
> 
> 赞同：15
> 
> 时间：2012-09-05T11:24:38.527
> 
> 标签：python, pyqt, runtime-error, superclass, deep-copy

我尝试对`setParent`Python 中的对象（从不同类继承的类的实例 - 具体来说，）执行一些操作 () `QtGui.QLabel`，但在运行时引发了上述错误。该对象本身有一些具有实际内容的字段（在调试时验证），但由于某种原因我不能“使用”它。错误是什么意思，我该如何解决？对于一些附加信息，我会说该对象是在我尝试对其执行此操作之前从静态方法返回的。

子类有`__init__()`自己的功能：

```
def __init__(self, image, father):
        super(AtomicFactory.Image, self).__init__(father)
        self.raw_attributes = image.attributes
        self.attributes = {}
        father.addChild(self)
        self.update() 
```

现在我写了一个类似的代码，一个简单的代码，`widget.setParent(mw)`当窗口被移动时，它在行上有同样的错误。

```
#!/usr/bin/env python
import sys
import copy
from PyQt4 import QtCore, QtGui

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    main_widget=QtGui.QWidget()
    widget = QtGui.QPushButton('Test')
    widget.resize(640, 480)
    widget.setParent(main_widget)
    widget.move(0, 0)
    widget2=QtGui.QPushButton('Test2')
    widget2.i=0
    widget2.resize(600, 200)
    widget2.setParent(main_widget)
    widget2.move(640, 0)
    def onResize(event):
        print event
        mw=copy.deepcopy(main_widget)
        widget.setParent(mw)
        widget2.setParent(mw)
        widget.move(0, 0)
        widget2.move(640, 480)
        main_widget_width=main_widget.width()
        widget_width=widget.width()
        width2=main_widget_width-widget_width
        height2=widget2.height()
        widget2.resize(width2, height2)
        widget2.move(640, 0)
    main_widget.resizeEvent=onResize
    def onClick():
        size=(widget2.width(), widget2.height())
        if(widget2.i%2==0):
            widget2.resize(int(size[0]/2), int(size[1]/2))
        else:
            widget2.resize(size[0]*2, size[1]*2)
        widget2.i+=1
    QtCore.QObject.connect(widget, QtCore.SIGNAL('clicked()'), onClick)
    main_widget.show()
    sys.exit(app.exec_()) 
```

出了什么问题？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-05T11:37:25.963

如果要继承`QObject`（或`QWidget`），则必须始终调用超类`__init__`：

```
class MyObject(QObject):
    def __init__(self, *args, **kwargs):
        super(MyObject, self).__init__(arguments to parent class)
        #other stuff here 
```

你也可以`__init__`在一些指令之后调用父类，但在你这样做之前你不能调用`QObject`方法或使用`QObject`属性。

* * *

**编辑**：在您的情况下，您正在尝试`deepcopy`a `QWidget`，但这是**不可能**的。Python 可能能够复制 的*包装器*，`QWidget`但它`QWidget`本身是一个 C++ 对象，python 无法使用 的默认实现来处理`copy.deepcopy`，因此每当您调用复制实例的方法时，您都会得到 ，`RuntimeError`因为底层的 C++ 对象没有被初始化适当地。

酸洗这些物体也是如此。Python 能够腌制*wrapper*，而不是 C++ 对象本身，因此在取消腌制实例时，结果是一个损坏的实例。

为了支持`deepcopy()`该类`QWidget`应该实现该`__deepcopy__`方法，但它并*没有*那样做。

如果要复制小部件，则必须自己手动实现所有机制。

# linux - 我在哪里可以找到 Elastic Beanstalk 中 Linux AMI 上的 Tomcat 7 安装文件夹？

> ID：12280372
> 
> 赞同：74
> 
> 时间：2012-09-05T11:24:39.443
> 
> 标签：linux, tomcat, amazon-elastic-beanstalk

我有一个弹性 beanstalk linux-tomcat ami 实例，其中安装了示例应用程序并在公共 dns 上运行。我可以通过 ssh 进入实例，但找不到 tomcat 7 所在的位置（即编辑 server.xml 的 conf 目录）。我已经用 64 位和 32 位 ami 试过了。关于我在哪里可以找到这个的任何想法？我看了下：

```
/etc
/usr/share 
```

我确实在（为空）`elasticbeanstalk-tomcat7-deployment`下找到了一个文件。`tmp`

我做了一个：

```
sudo yum install tomcat7 
```

示例应用程序也由公共 DNS 提供`:8080`并在公共 DNS 上运行。所以我（认为）有 2 个 tomcat 服务器在同一个 beanstalk 实例上运行。在这种情况下，我试图找到 Tomcat 7 文件夹的位置（在 port 上服务页面`80`）。

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-09-05T13:35:25.910

自 2012 年底以来，通常低于`/usr/share/tomcat7`.

在此之前，它通常在`/opt/tomcat7`.

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2012-09-05T13:25:40.917

不确定这是否会有所帮助。我正在使用类似的 Amazon Linux AMI，它的 tomcat7 位于 /usr/share/tomcat7 下。

如果您的机器上已经运行了 Tomcat，您可以尝试：

```
ps -ef | grep tomcat 
```

或者

```
ps -ef | grep java 
```

检查它从哪里运行。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-07-29T17:38:25.480

*   如果你想找到 webapp 文件夹，它可能在这里：

> **/var/lib/tomcat7/webapps/**

*   但是你也可以输入这个来找到它：

> **查找 / -name 'tomcat_version' -type d**

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-03-21T09:35:22.380

使用“whereis”命令。

> **$ whereis tomcat8**
> tomcat8: /usr/sbin/tomcat8 /etc/tomcat8 /usr/libexec/tomcat8 /usr/share/tomcat8

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-10-03T22:18:20.537

截至 2012 年 10 月 3 日，使用示例应用程序部署的新“Elastic Beanstalk for Java with Apache Tomcat 7”Linux x64 AMI 在此处安装：

```
/etc/tomcat7/ 
```

/etc/tomcat7/tomcat7.conf 文件有以下设置：

```
# Where your java installation lives
JAVA_HOME="/usr/lib/jvm/jre"

# Where your tomcat installation lives
CATALINA_BASE="/usr/share/tomcat7"
CATALINA_HOME="/usr/share/tomcat7"
JASPER_HOME="/usr/share/tomcat7"
CATALINA_TMPDIR="/var/cache/tomcat7/temp" 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-03-10T16:40:02.127

以下环境变量在 Debian Wheezy 7 和 Tomcat 7 上为我工作：

```
CATALINA_HOME=/usr/share/tomcat7
CATALINA_BASE=/var/lib/tomcat7
CATALINA_TMPDIR=/tmp/tomcat7 
```

（我确实手动创建了 /tmp/tomcat7 ）

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-06-06T20:17:38.330

截至 15 年 6 月 6 日，Web 根位置使用 Tomcat 位于 /tmp/deployment/application/ROOT。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-07-23T04:10:34.823

我的服务器是 CentOS 7，我通过以下方式安装 tomcat：

```
sudo yum install tomcat
sudo yum install tomcat-webapps tomcat-admin-webapps 
```

我在以下位置找到了我的 webapps 文件夹：

```
/usr/share/tomcat/ 
```

和

```
/var/lib/tomcat/ 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-04-23T11:55:12.590

就我而言，在 Ubuntu 16.04 服务器上，默认的 tomcat 安装位于：

```
/var/lib/tomcat8 
```

# c# - 以编程方式在 XsltListViewWebPart 上显示添加新项

> ID：12280376
> 
> 赞同：1
> 
> 时间：2012-09-05T11:25:01.943
> 
> 标签：c#, sharepoint, sharepoint-2010

我正在尝试在现有 XlstListviewwebpart 上显示“添加新项目”链接。但是下面的代码不起作用。我在这里找到了这个：http: [//suryapulipati.blogspot.be/2011/08/sharepoint-2010-show-add-new-item-or.html](http://suryapulipati.blogspot.be/2011/08/sharepoint-2010-show-add-new-item-or.html)

但工具栏节点始终为空 ![在此处输入图像描述](../Images/2bd6578b7e7c41336d90d071bb039671.png)

```
private void ShowAddOrganisationLinkOnHomePage(string webUrl)
{
    Logger.LogDebug("NLSponsoringSiteConfigSponsoringCentralEventReceiver", "ConfigureOrganisationDashboard(SPWeb currentWeb)", "BEGIN");           
    SPSecurity.RunWithElevatedPrivileges(delegate()
    {
        SPFile pageOrganisation = null;
        using (SPWeb oHomeWeb = new SPSite(webUrl).OpenWeb())
        {
            try
            {                       
                pageOrganisation = oHomeWeb.GetFile("default.aspx");
                pageOrganisation.CheckOut();
                string idWebPartRootOrganisation = "ID_RootOrganisation";
                oHomeWeb.AllowUnsafeUpdates = true;
                using (SPLimitedWebPartManager mgrPageManager = pageOrganisation.GetLimitedWebPartManager(PersonalizationScope.Shared))
                {
                    SPList organisations = oHomeWeb.GetSafeListByName(SponsoringCommon.Constants.LISTNAMES_ORGANISATIONS2);
                    XsltListViewWebPart lvwpOrganisation = mgrPageManager.WebParts[idWebPartRootOrganisation] as XsltListViewWebPart;
                    SPView oCustomView = organisations.Views[SponsoringCommon.Constants.VIEWS_ORGANISATION_DASHBOARD_NAME];

                    PropertyInfo nodeProp = oCustomView.GetType().GetProperty("Node", BindingFlags.NonPublic | BindingFlags.Instance);
                    XmlNode node = nodeProp.GetValue(oCustomView, null) as XmlNode;
                    XmlNode toolbarNode = node.SelectSingleNode("Toolbar");
                    if (toolbarNode != null)
                    {
                        if (!toolbarNode.Attributes["Type"].Value.Equals("Freeform"))
                        {
                            toolbarNode.Attributes["Type"].Value = "Freeform";
                        }
                    }
                    oCustomView.Update();
                    mgrPageManager.SaveChanges(lvwpOrganisation);                          
                }
            }
            catch (Exception)
            {
                oHomeWeb.AllowUnsafeUpdates = false;
                if (pageOrganisation != null) pageOrganisation.UndoCheckOut();
                throw;
            }
            finally
            {
                pageOrganisation.CheckIn(string.Empty);
                oHomeWeb.AllowUnsafeUpdates = false;
            }                       
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T07:41:13.177

我确实喜欢这样：

```
using (SPLimitedWebPartManager mgrPageManager = pageOrganisation.GetLimitedWebPartManager(PersonalizationScope.Shared))
                        {
                            SPList organisations = oHomeWeb.GetSafeListByName(SponsoringCommon.Constants.LISTNAMES_ORGANISATIONS2);
                            XsltListViewWebPart lvwpOrganisation = mgrPageManager.WebParts[idWebPartRootOrganisation] as XsltListViewWebPart;
                            Functions.SetToolbarType(lvwpOrganisation, "Freeform");

                            mgrPageManager.SaveChanges(lvwpOrganisation);                          
                        }

 public static void SetToolbarType(XsltListViewWebPart lvwp, string viewType)
        {
            try
            {
                MethodInfo ensureViewMethod = lvwp.GetType().GetMethod("EnsureView", BindingFlags.Instance | BindingFlags.NonPublic);
                object[] ensureViewParams = { };
                ensureViewMethod.Invoke(lvwp, ensureViewParams);
                FieldInfo viewFieldInfo = lvwp.GetType().GetField("view", BindingFlags.NonPublic | BindingFlags.Instance);
                SPView view = viewFieldInfo.GetValue(lvwp) as SPView;
                Type[] toolbarMethodParamTypes = { Type.GetType("System.String") };
                MethodInfo setToolbarTypeMethod = view.GetType().GetMethod("SetToolbarType", BindingFlags.Instance | BindingFlags.NonPublic, null, toolbarMethodParamTypes, null);
                object[] setToolbarParam = { viewType }; //set the type here
                setToolbarTypeMethod.Invoke(view, setToolbarParam);
                view.Update();
            }
            catch { }
        } 
```

# php - 致命错误：在中找不到类“JLog”

> ID：12280379
> 
> 赞同：0
> 
> 时间：2012-09-05T11:25:25.250
> 
> 标签：php, joomla

我将我的 Joomla 站点存储在本地主机（xampp 服务器）中。当我转到站点 URL 时，页面显示以下错误消息：

```
******Fatal error: Class 'JLog' not found in C:\xampp\htdocs\kwazulu\libraries\joomla\error\error.php on line 35**2**** 
```

请帮我解决这个问题

谢谢，莫汉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-31T00:02:35.670

我发现我的库/joomla/log/ 文件夹是空的，所以我重新下载了相应的 joomla 版本包并将原始库/joomla/log/ 文件从包复制到我的 joomla 库/joomla/log/ 目录。错误消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:42:14.720

将此添加到您的模型文件中...

```
jimport( 'joomla.error.log' ); 
```

希望这会帮助你......

# sql-server-2005 - SQL Server 表值函数参数

> ID：12280381
> 
> 赞同：0
> 
> 时间：2012-09-05T11:25:34.703
> 
> 标签：sql-server-2005, table-valued-parameters

我得到了下表值函数（在 SQL Server 2005 中）。运行--1的时候出现编译错误，但是--3是ok的，--2是用来生成--3使用的参数，应该和--1一样。但为什么 --1 得到错误？

```
create function test_udf_nz_2 (
    @a datetime
    ,@b datetime
)
returns @result TABLE(
    c1 datetime
    ,c2 datetime
)
as
begin
    insert into @result
    select @a, @b
    return
end

declare
    @dt_report_date DATETIME 
    ,@v_stores VARCHAR(MAX) 

select @dt_report_date = '20120831'
        ,@v_stores = '152'
--1
select * from dbo.test_udf_nz_2( DATEADD(hour,0,DATEDIFF(d,0,@dt_report_date)), DATEADD(hour,24,DATEDIFF(d,0,@dt_report_date))) AS t

--2
--select DATEADD(hour,0,DATEDIFF(d,0,@dt_report_date)), DATEADD(hour,24,DATEDIFF(d,0,@dt_report_date))

--3
select * from dbo.test_udf_nz_2( '20120831', '20120901') AS t 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:47:58.487

才发现。数据库的兼容级别设置为sql server 2000 (8.0)。

我不知道函数不能在 2000 年的表值函数的参数中使用...

# php - PHP POST/GET 请求加密

> ID：12280386
> 
> 赞同：1
> 
> 时间：2012-09-05T11:25:53.143
> 
> 标签：php, url, encryption, openssl, communication

我需要通过如下网址发送敏感数据。

```
http://www.mydomain.com/handlingfile.php?username="abc"&password="pass"&BankAccount="0983479" 
```

为了进行安全通信，加密参数值的最佳方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T11:27:27.053

*   不要对浏览器加密大惊小怪，切换到 https 进行保存传输。这就是“发明”的目的。每年花几美元就可以[买到一张证书](http://ssl.comodo.com/index.php?key5sk1=b6a407ee80fecb5c8af545524e90a0583449b316&key5sk2=2128&key5sk3=1346844637000&key5sk4=2128&key5sk5=1346844645000&key5sk6=1904&key5sk7=1346844657000&key6sk1=&key6sk2=CH210118089&key6sk3=7&key6sk4=nl-nl&key6sk5=NL&key6sk6=0&key6sk7=Google&key6sk8=11331&key6sk9=16801050&key6sk10=true&key6sk11=90463528d44a0bbabc54cd37bb7657a75d8859d8&key6sk12=2032&key7sk1=2&key7sk2=196112&key1sk1=ors&key1sk2=Google)。当浏览器中显示“锁定”图标时，它会给您的用户一种“安全环境”的感觉。
*   不要在 url 中发送您的用户名和密码，而是在您的表单中使用 post 操作。
*   考虑使用 oAuth 服务，以便用户使用 facebook 或 google 帐户登录。您不需要存储凭据，只需存储您从 oAuth 收到的令牌。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T11:28:36.170

使用**SSL**，它是在客户端和服务器请求之间加密数据的正确方法。

`MD5`另一种方法可能是使用类似or的单向加密将加密的密码和银行帐号存储在数据库中`SHA1`，并在 URL 中以相同的加密方式传递加密的密码和银行账户，并从数据库中匹配它们。

但最好还是使用**SSL**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T11:30:35.773

```
use
urlencode
and
rawurldecode 
```

您还可以使用自己的算法使用 javascript 加密数据。但这些都不安全

# java - 使用 SkyDrive REST API 从 java 桌面客户端检索 OAuth 2.0（隐式授权）的访问令牌。

> ID：12280391
> 
> 赞同：7
> 
> 时间：2012-09-05T11:26:15.517
> 
> 标签：java, rest, oauth-2.0, onedrive

我正在尝试使用 SkyDrive REST API 从 Java 桌面客户端应用程序实现 OAuth 2.0 隐式授权。我使用以下代码：

```
Desktop.getDesktop().browse(new URL(st.toString()).toURI());
JOptionPane.showMessageDialog(null, "Press ok to continue once you have authenticated."); 
```

我的代码打开网络浏览器并要求用户登录，然后 SkyDrive 以下列形式将访问令牌发送到浏览器 url：

```
https://login.live.com/oauth20_desktop.srf?lc=1033#access_token=EwAwAq1DBAAUlbRW..... 
```

我想要做的是从我的 java 程序中读取这个访问令牌。我试图从控制台读取 httpconnection：

```
HttpURLConnection con = (HttpURLConnection) url.openConnection();
BufferedReader reader = new BufferedReader( new InputStreamReader(url.openStream()));
while(reader.readLine()!=null){
System.out.println(reader.readLine()); 
```

但似乎 java httpurlconnection 不处理 javascript 响应。它回复：

```
<html dir="..... Windows Live ID requires JavaScript to sign in. This web browser either does not support JavaScript, or scripts are being blocked......<body onload="evt_LoginHostMobile_onload(event);"> 
```

那么，有没有办法直接从java中检索访问令牌？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T14:23:15.783

我有同样的问题。经过几个小时的头脑风暴，我终于找到了解决方案。我使用 JavaFX 库来创建一个 WebView。然后你可以拦截位置变化。

```
import java.net.MalformedURLException;
import java.net.URL;
import java.util.HashMap;
import java.util.Map;

import javafx.application.Application;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.layout.BorderPane;
import javafx.scene.web.WebEngine;
import javafx.scene.web.WebEvent;
import javafx.scene.web.WebView;
import javafx.stage.Stage;

public class Authenticate extends Application {

    static final String APP_ID = "...";
    static final String REDIRECT_URL = "https://login.live.com/oauth20_desktop.srf";
    static final String RESPONSE_TYPE = "token";
    static final String SCOPE = "wl.signin%20wl.offline_access";

    private Scene scene;

    @Override
    public void start(final Stage stage) throws Exception {
        final String url = "https://login.live.com/oauth20_authorize.srf?client_id="+APP_ID
                +"&scope="+SCOPE+"&response_type="+RESPONSE_TYPE+"&oauth_callback=oob&redirect_uri="+REDIRECT_URL;
        BorderPane borderPane = new BorderPane();

        WebView browser = new WebView();
        WebEngine webEngine = browser.getEngine();

        webEngine.load(url);
        borderPane.setCenter(browser);

        webEngine.setOnStatusChanged(new EventHandler<WebEvent<String>>() {
            public void handle(WebEvent<String> event) {
                if (event.getSource() instanceof WebEngine) {
                    WebEngine we = (WebEngine) event.getSource();
                    String location = we.getLocation();
                    if (location.startsWith(REDIRECT_URL) && location.contains("access_token")) {
                        try {
                            URL url = new URL(location);
                            String[] params = url.getRef().split("&");
                            Map<String, String> map = new HashMap<String, String>();
                            for (String param : params) {
                                String name = param.split("=")[0];
                                String value = param.split("=")[1];
                                map.put(name, value);
                            }
                            System.out.println("The access token: "+map.get("access_token"));
                            stage.hide();
                        } catch (MalformedURLException e) {
                            e.printStackTrace();
                        }
                    }
                }
            }
        });

        // create scene
        stage.setTitle("Skydrive");
        scene = new Scene(borderPane, 750, 500);
        stage.setScene(scene);
        stage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

# php - 为 foreach 提供的参数无效 - Joomla

> ID：12280394
> 
> 赞同：0
> 
> 时间：2012-09-05T11:26:39.193
> 
> 标签：php, joomla, joomla1.5

我在安装 Joomla 时遇到了这个问题。

```
Warning: Invalid argument supplied for foreach() components/com_content/models/frontpage.php on line 104 
```

我试图用谷歌搜索这个错误，但没有任何可以解决我的问题的方法。不知何故，这个错误导致我的模板中断，并且无法加载其中的某些部分。

错误在网站前端不可见，但会显示在 error_log 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:31:52.567

您的首页上可能没有导致 foreach 抛出此警告的内容。

```
$Arows = $this->_getList($query, $limitstart, $limit);
...
foreach ($Arows as $row)
... 
```

将项目（文章）分配到首页并再次检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:34:22.410

这意味着参数不是数组或对象。

您可以通过使用[is_array](http://php.net/manual/en/function.is-array.php)或[is_object](http://php.net/manual/en/function.is-object.php)跳过 foreach来首先测试它是否是一个数组，并且只有在有东西时才执行。

# java - 如何使用 silverlight-selenium 自动化使用 Selenium 和 java 的 silverlight 应用程序

> ID：12280395
> 
> 赞同：2
> 
> 时间：2012-09-05T11:26:38.933
> 
> 标签：java, silverlight, selenium-rc

参考以下帖子，我正在探索使用 silverlight-selenium 自动化 Silverlight 应用程序。 [http://code.google.com/p/silverlight-selenium/](http://code.google.com/p/silverlight-selenium/)。在此，他们提到“silverlight-selenium RC 客户端扩展目前可用于以下 Selenium RC 客户端驱动程序：Java 和 .Net。”

是否可以将 Selenium 和 Java 与 silverlight-selenium.jar 一起使用来自动化 silverlight 应用程序？

如果是，该怎么做..？有什么建议么..？

提前致谢。

# iphone - 在 xCode ( Windows ) 上发布 iPhone 应用程序

> ID：12280396
> 
> 赞同：0
> 
> 时间：2012-09-05T11:26:41.163
> 
> 标签：iphone, ios, xcode, windows-7

我在 Windows 7 上使用 xCode 制作了一个 Hello world 简单应用程序，我想发布它并将其移动到我的 iPhone 3g

如果有任何教程请告诉我:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:58:53.913

1.  它是 Xcode ;)
2.  要在您自己的设备（而不是模拟器）上运行您的应用程序，您必须成为 iOS 开发者计划 (developer.apple.com) 的成员，该计划的费用为每年 99 美元。使用该程序，您将能够下载测试版内容、发布到 AppStore（或尝试……；）），观看有关如何开发的视频，……</li>

# linux - Flume 在 Linux 中运行失败

> ID：12280403
> 
> 赞同：1
> 
> 时间：2012-09-05T11:26:57.027
> 
> 标签：linux, flume

当我将水槽安装到 Linux 中时。我在运行水槽时收到了一些警告，我按照这个过程安装了水槽。

```
>> sudo tar -xvf flume-ng-1.1.0-cdh4.0.1\(1\).tar.gz
>> export PATH=/home/hduser/downloads/flume-1.1.0- cdh4.0.1/bin:$PATH
>> $ sudo cp conf/flume-conf.properties.template conf/flume.conf 
```

为了运行水槽，我使用了这个命令

```
>> $ bin/flume-ng agent -n agent -f conf/flume.conf 
```

但它显示了一些警告

```
hadoopmaster@HadoopMaster:/home/hduser/downloads/flume-ng$ sudo bin/flume-ng agent -n agent -f conf/flume.conf
Warning: No configuration directory set! Use --conf <dir> to override.
Warning: JAVA_HOME not set!
+ exec /usr/bin/java -Xmx20m -cp '/home/hduser/downloads/flume-ng/lib/*' -Djava.library.path= org.apache.flume.node.Application -n agent -f conf/flume.conf
log4j:WARN No appenders could be found for logger (org.apache.flume.lifecycle.LifecycleSupervisor).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T22:23:03.267

如果要从 log4j appender 获取输出，则需要将 -c conf 添加到命令行。例如：

```
export JAVA_HOME=... # recommended to set JAVA_HOME properly
./bin/flume-ng agent -c conf -f conf/flume.conf -n agent 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-05T08:56:37.947

您必须在`flume-env.sh`文件中设置 Java_Home 路径

导出 Java_Home =`/user/lib/jvm/java_version_name`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-09T08:26:58.627

请设置 HADOOP_HOME 环境变量。

# git - 如何从 github 拉取/获取分支到本地？

> ID：12280404
> 
> 赞同：2
> 
> 时间：2012-09-05T11:26:58.057
> 
> 标签：git, github

我需要切换到本地分支主到 github 分支功能/ABF-3-project-structure

我运行以下命令。

```
git pull feature/ABF-3-project-structure 
```

![这是命令的输出](../Images/43395cce69f5834910e6da9f23058d8c.png)

![在此处输入图像描述](../Images/43395cce69f5834910e6da9f23058d8c.png)

请帮帮我。我已经尝试了至少 3 个小时，但仍然没有运气

谢谢， 埃纳穆尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:31:04.033

我不确定我是否理解您的问题，但可以使用以下代码切换到上述分支：`git checkout feature/ABF-3-project-structure`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T11:35:30.913

试试这个：

```
git pull {repo} {remotebranchname}:{localbranchname}

git pull origin abc:abc 
```

如果您在主分支上，您还应该首先签出一个分支：

```
 git checkout -b abc 
```

这应该从master创建新的分支“abc”并直接检查它。比你应该运行：

```
 git pull origin abc 
```

将新分支拉到您当地的 abc 分支

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T06:22:12.717

我通过向 github 添加 ssh 密钥解决了这个问题。我以前在 git 上工作而没有在 github 上设置 ssh 密钥。

这很简单。我刚刚添加了 ssh 密钥并运行了前面的命令。这解决了我的问题。:)

# iphone - 选择同一视图的任何表格单元格时如何关闭视图？

> ID：12280407
> 
> 赞同：1
> 
> 时间：2012-09-05T11:27:09.807
> 
> 标签：iphone, objective-c

我正在创建一个应用程序，我需要用州名称（如阿萨姆邦、卡纳塔克邦等）填充文本字段。我在文本字段附近创建了一个按钮。单击该按钮时，会将一个表格视图（填充了许多状态）作为子视图添加到文本字段所在的该视图中。我的问题是当用户选择任何一种状态时，我想用状态名称关闭表格视图。我将视图添加为子视图，但在从中选择状态时无法关闭视图。请帮助我。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:51:20.927

尝试这个，

```
-(void)tableView:(UITableView *)tableView1 didSelectRowAtIndexPath:(NSIndexPath *)indexPath { 
    your_viewController *vc=[[your_viewController alloc]init];
    UINavigationController *navController=[[UINavigationController alloc]initWithRootViewController:vc];
    [self.navigationController dismissModalViewControllerAnimated:YES];
    [navController release];
    [vc release];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:38:13.517

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath { 
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle: nil]; 
    youroldview *rvc = [storyboard instantiateViewControllerWithIdentifier:@"identifierof_oldview"];

    [self.navigationController pushViewController:rvc animated:YES];
} 
```

如果它是基于导航的应用程序，它将导航到该视图，否则您应该使用

```
[self presentModalViewController:rvc animated:YES]; 
```

# java - @PathVariable 列表 在 Spring MVC 中

> ID：12280408
> 
> 赞同：2
> 
> 时间：2012-09-05T11:27:14.360
> 
> 标签：java, spring, spring-mvc, propertyeditor, path-variables

在 Spring MVC 控制器中，`@PathVariable Long... ids`当传递像`1,2,3`.

如果参数声明为，`@PathVariable UUID... ids`则逗号分隔不起作用：返回 400 响应。

我可以实现一个自定义`PropertyEditor`来处理`UUID[]`或`List<UUID>`吗？我能找到的唯一例子是单个值，而不是集合/数组。

**更新**

根据[下面 Phil Webb 的回答](https://stackoverflow.com/a/12867729/774395)，在将问题报告为 Spring JIRA 上的错误后，SpringSource 的好心人在 Spring 3.2 中添加了对此的支持

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T22:04:22.597

此问题将在 Spring 3.2 中修复。有关详细信息，请参阅[https://jira.springsource.org/browse/SPR-9765](https://jira.springsource.org/browse/SPR-9765)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T13:28:02.173

您可以通过这种方式注册自定义转换器：

```
import org.springframework.core.convert.converter.Converter;
class UUIDConverter implements Converter<String, UUID> {

    @Override
    public UUID convert(String source) {
        return UUID.fromString(source);
    }

} 
```

并使用 Spring MVC 注册它：

```
<bean id="conversionService" class="org.springframework.format.support.FormattingConversionServiceFactoryBean">
    <property name="converters">
        <set>
            <bean class="....UUIDConverter"/>
        </set>
    </property>
</bean>

<mvc:annotation-driven conversion-service="conversionService"> 
</mvc:annotation-driven> 
```

现在，如果您提交 UUID，它应该会正确映射到列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-28T12:07:25.497

对于基于注释的配置，您只需向`@Component`类添加注释

```
package com.demo.config.converters;
import org.springframework.core.convert.converter.Converter;
import org.springframework.stereotype.Component;
import java.util.UUID;

@Component
public class StringToUUIDConvertor
  implements Converter<String, UUID> {

    @Override
    public UUID convert(String source) {
        try {
            return UUID.fromString(source);
        }
        // just changing default message to the one I like to see.
        catch (IllegalArgumentException ex){
            throw new IllegalArgumentException("Invalid input UUID string");
        }
    }
} 
```

# sql - 为什么外键必须只与主键相关？

> ID：12280417
> 
> 赞同：3
> 
> 时间：2012-09-05T11:27:55.880
> 
> 标签：sql, foreign-keys, foreign-key-relationship

在 SQL 中，外键仅引用主键。为什么它不能引用聚集的唯一非空索引列？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T11:42:40.007

并非所有 RDBMS 都是如此。[SQL Server](http://msdn.microsoft.com/en-us/library/ms177463%28v=sql.90%29.aspx) (2008/R2) 允许在作为唯一键约束或唯一索引的非空列上使用外键（即，候选键甚至不需要是聚集索引）。例如：

```
CREATE TABLE Parent
(
    ParentUnique1 INT NOT NULL,
    ParentUnique2 INT NOT NULL,
    Name NVARCHAR(50) NOT NULL
);
-- Some arbitrary PK
ALTER TABLE Parent ADD CONSTRAINT PK_Parent PRIMARY KEY(Name);
-- Unique Key Constraint
ALTER TABLE Parent ADD CONSTRAINT U_Parent UNIQUE(ParentUnique1);
-- Unique Index (NonClustered)
CREATE UNIQUE INDEX IX_Parent ON Parent(ParentUnique2);

CREATE TABLE Child1
(
    ChildID INT NOT NULL,
    ParentID INT NOT NULL,
    CONSTRAINT FK_Child1Parent FOREIGN KEY(ParentID) REFERENCES Parent(ParentUnique1)
);

CREATE TABLE Child2
(
    ChildID INT NOT NULL,
    ParentID INT NOT NULL,
    CONSTRAINT FK_Child2Parent FOREIGN KEY(ParentID) REFERENCES Parent(ParentUnique2)
); 
```

# php - 用左连接连接多个表

> ID：12280418
> 
> 赞同：0
> 
> 时间：2012-09-05T11:28:13.770
> 
> 标签：php, mysql, join

我有以下查询：

```
$products_query = 
  tep_db_query("select op.orders_products_id, op.orders_id, op.products_id, ".
                      "op.products_model, op.products_name, op.products_quantity, ".
                      "p.products_id from " . TABLE_ORDERS_PRODUCTS . " op " .
                  " left join " . TABLE_PRODUCTS . " p " .
                  " on (op.products_id = p.products_id) where orders_id = '" . 
                  (int)$cuttinglist['orders_id'] . "'"); 
```

这将两个具有相同 ID 的表连接在一起。我将如何加入第三张桌子，名为：

```
"TABLE_ORDERS_PRODUCTS_ATTRIBUTES" 
```

具有与以下相同的 ID：

```
"TABLE_ORDERS_PRODUCTS" 
```

使用的ID是：

```
"orders_products_id" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:31:19.243

为了更容易阅读您的代码（因此您不需要在任何地方都有这么多的连接和引号，您可以执行如下查询：

```
$sql='
select 
    op.orders_products_id, 
    op.orders_id, op.products_id,
    op.products_model, 
    op.products_name, 
    op.products_quantity,
    p.products_id 
from 
    '.TABLE_ORDERS_PRODUCTS.' op 
        left join '.TABLE_PRODUCTS.' p 
            on op.products_id = p.products_id
        left join '.TABLE_ORDERS_PRODUCTS_ATTRIBUTES.' Attrib
            on op.orders_products_id=Attrib.orders_products_id
where 
    orders_id = "' .(int)$cuttinglist['orders_id'] . '"
';
$products_query = tep_db_query($sql); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T11:31:09.167

```
$products_query = 
  tep_db_query("select op.orders_products_id, op.orders_id, op.products_id, ".
                  "op.products_model, op.products_name, op.products_quantity, ".
                  "p.products_id from " . TABLE_ORDERS_PRODUCTS . " op " .
              " left join " . TABLE_PRODUCTS . " p " .
              " on (op.products_id = p.products_id) "
              " left join " . TABLE_ORDERS_PRODUCTS_ATTRIBUTES . " pa " .
              " on (op.products_id = pa.orders_products_id) where orders_id = '" . 
              (int)$cuttinglist['orders_id'] . "'"); 
```

# c# - 禁用 ComboBox C# 中的项目

> ID：12280426
> 
> 赞同：4
> 
> 时间：2012-09-05T11:28:35.873
> 
> 标签：c#, visual-studio-2010, combobox, visual-studio-2005

`ComboBox`我发现在[这里](http://msdn.microsoft.com/en-us/library/xftychcy%28v=vs.80%29.aspx)禁用某些项目似乎是一个简单的解决方案。它指出：

> 您可以通过在表达式的开头添加一个反斜杠来禁用列表框或组合框中的项目。

但是，如果我写

```
testBox.Items.Add("\Test item"); 
```

或者

```
testBox.Items.Add(\"Test item"); 
```

它在 VS2010 中给出了语法错误。也许这个功能在 2005 年以后的版本中被禁用了？

如果我像这样通过 VS2010 设计器放置一个项目

```
\Test item 
```

或者我写

```
testBox.Items.Add("\\Test item"); 
```

然后它会出现一个反斜杠，而不是被禁用。

因此我的问题是：**这种方法是否可用，我只是不明白如何使用它，或者我必须创建一个自定义 ComboBox 来实现我的目标（在标题中）？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T11:38:58.107

可悲的是，组合框控件不可能。

我建议从组合框列表中删除该项目，而不是尝试禁用它。

使用这三种方式之一：

```
// To remove item with index 0:
comboBox1.Items.RemoveAt(0);
// To remove currently selected item:
comboBox1.Items.Remove(comboBox1.SelectedItem);
// To remove "Tokyo" item:
comboBox1.Items.Remove("Tokyo"); 
```

如果您绝对需要禁用项目，则需要创建一个自定义组合框。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T11:37:24.637

**更新 1：** 这不起作用，但我将其保留原样，因此下面的评论是有意义的。

**更新2：** 回答你的问题......经过一番谷歌搜索后，我相信你使用WinForms实现这一目标的唯一选择是按照你的建议创建你自己的控件。

我怀疑处理以多个反斜杠开头的项目的规则也适用于转义序列。怎么样：

```
testBox.Items.Add("\]Test Item"); 
```

我无法对其进行测试，但看起来它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T11:30:26.130

一般来说：您需要通过编写来转义反斜杠`\\`。否则，编译器会尝试将其解释`\T`为转义序列（不存在）。我猜设计师已经为你做了这个，但你可以随时查看生成的源代码；）

关于禁用组合框项目：您链接的文档似乎适用于 ListBoxes，而不是 ComboBoxes。此外，它指的是 VisualFox Pro，而不是 Windows.Forms。所以我想这行不通；）

根据[这个讨论](http://www.vbforums.com/showthread.php?555303-RESOLVED-Disable-some-items-in-a-combobox)，您将需要对控件进行子类化并覆盖其绘制处理程序。

但在此之前，我会简单地删除（甚至不添加）您希望禁用的那些项目。

# java - 如何从java中的整数中获取枚举？

> ID：12280428
> 
> 赞同：1
> 
> 时间：2012-09-05T11:28:39.173
> 
> 标签：java

> **可能重复：**
> [如何从 Java 中的索引中获取枚举值？](https://stackoverflow.com/questions/6692664/how-to-get-enum-value-from-index-in-java)

我有一个像这样的枚举：

```
public enum EnumTest {
    ONE, TWO, THREE
} 
```

我如何有一个像 1=ONE 2=TWO 3=THREE 这样的整数

现在我得到一个像 2 这样的整数并想从中生成 EnumTest 并且它应该返回 TWO **如何做到这一点？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T11:33:15.860

或者，为了获得更大的灵活性：

```
public enum EnumTest {
    ONE(1), TWO(2), THREE(3);

    private int value;

    EnumTest(int value) {
       this.value = value;
    }

    static EnumTest getByValue(int i) {
      for (EnumTest e : values()) {
          if (e.value == i) {
              return e;
          }
      }
      return null;
    }
} 
```

考虑一下看到此枚举的未来开发人员，如果您留下未记录的`values()`使用，任何人都可以通过添加新项目来破坏它。因为没有文档强制元素的顺序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T11:31:48.040

您需要将`int`与`enum`值相关联。

你可以做

```
static final EnumTest[] VALUE = { null, ONE, TWO, THREE };

return VALUE[num]; 
```

或者

```
return EnumTest.values()[num-1]; 
```

或使用地图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T11:31:29.623

像这样得到它`EnumTest.values()[Number-1]`，其中 Number 是你的数字（即 1、2、3）。

（从数字中减去 1，因为例如，`ONE`它将在索引 0 处，并且`EnumTest.values()[1]`会给你`TWO`。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T11:36:23.687

如果您只想要序数，这里有一些有用的信息：

*   您可以使用例如 EnumTest.ONE.ordinal() 获得枚举常量的序数
*   您可以使用 EnumTest.values() 检索所有枚举常量

从那里，你可以做你想做的事。

如果要添加具有任意值的属性，可以在枚举中创建属性 + 构造函数 + getter：

```
public enum EnumTest {
    THREE(3), ONE(1), TWO(2);
    private int val;
    EnumTest(int val) { this.val = val; }
    int getVal() { return val; }
} 
```

这更稳定（如果您重命名/插入/移动它们，值会保持不变）。

但是你确定你真的需要得到一个 int 值吗？您应该尽可能使用枚举常量，例如 EnumTest.THREE 而不是 3。

我建议谷歌搜索有关 Java 枚举的各种教程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T11:37:29.830

尝试`EnumTest.ordinal()`获取 int 值。它将从 0 开始。
要从值中获取枚举，您可以使用`EnumTest.values()[i]`.

谢谢。

# javascript - jQuery Roundabout - 元素的错误位置

> ID：12280429
> 
> 赞同：1
> 
> 时间：2012-09-05T11:28:48.743
> 
> 标签：javascript, jquery, animation, positioning

我正在使用[jQuery Roundabout](http://fredhq.com/projects/roundabout)创建一个简单的 JS Roundabout。我用

```
$(document).ready(function(){
    $('.roundabout').roundabout({
    });
}); 
```

并给元素以下CSS：

```
.roundabout-holder {
    list-style: none;
    padding: 0;
    margin: 0;
    height: 10em;
    width: 10em;
}
.roundabout-moveable-item {
    height: 4em;
    width: 4em;
    cursor: pointer;
    background-color: #ccc;
    border: 1px solid #999;
}
.roundabout-in-focus {
    cursor: auto;
} 
```

出于某种原因，我的测试页面上的元素对齐方式不正确。我已经尝试了多种方法来解决问题，但我无法弄清楚是什么导致了问题。使用我在网站上的默认设置，水平对齐应该在一条线上。知道这里可能出了什么问题吗？

![图片1](../Images/e5dacca40cffb0bbf165fc927721694a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:42:33.610

确保您已将 API 设置`tilt`为 0。

```
$('.roundabout').roundabout({
    tilt: 0
}); 
```

此外，如果您将图像放置在 中`.roundabout-moveable-item`，则需要确保将图像的宽度设置为`100%`.

```
.roundabout-moveable-item img {
    width: 100%;
} 
```

# mysql - 如何在 Django 中同时处理修改数据库？

> ID：12280432
> 
> 赞同：0
> 
> 时间：2012-09-05T11:29:08.253
> 
> 标签：mysql, django

像这样的一些代码（上传图像时执行）：

```
gallery = Gallery.objects.get(id=album_id)
index = gallery.photo_num +1                #index will be used in later
gallery.photo_num = index
gallery.save() 
```

一张一张上传效果很好，但是如果我同时上传多张图片，使用多上传jQuery插件。“gallery.photo_num”会乱

我怎样才能修改我的代码，这样我就可以避免这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T14:39:17.853

假设您使用的是 Django 1.4+，您可以使用[`select_for_update`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#select-for-update)：

```
gallery = Gallery.objects.select_for_update().get(id=album_id) 
```

这将锁定该行，直到发生更新操作。

# iphone - 无法使用 Socialize SDK 注销 Facebook

> ID：12280436
> 
> 赞同：0
> 
> 时间：2012-09-05T11:29:31.440
> 
> 标签：iphone, ios, facebook, sdk

我正在使用 Socialize SDK 代替 Sharekit 在我的应用程序中集成邮件、推特和脸书。

我只需要在用户的个人资料上发布一些字符串，这对 facebook 和 twitter 都很好。

以下是工作流程：

1.  用户点击分享，选择facebook/twitter。

2.  如果是第一次分享，会弹出facebook/twitter登录界面

3.  用户登录并认证后，共享成功。

4.  如果用户第二次分享，facebook/twitter登录界面不会弹出认证，分享成功。

5.  如果用户想要退出 facebook/twitter，他会进入设置面板并点击 twitter/facebook 按钮退出。

    [注销后返回分享时，用户点击twitter，弹出登录屏幕，但当用户点击facebook时，阴影框出现几秒钟后消失，用户使用之前的帐户登录。]

    我将如何解决这个问题？

我试过使用

```
[SocializeThirdPartyFacebook removeLocalCredentials] and also 

[SZFacebookUtils unlink]; 
```

我该怎么做

我也尝试清除所有缓存和 cookie，但结果仍然相同

```
 NSHTTPCookieStorage* cookies =   [NSHTTPCookieStorage sharedHTTPCookieStorage];
        NSArray* facebookCookies = [cookies cookiesForURL:
                                    [NSURL URLWithString:@"http://login.facebook.com"]];

        for (NSHTTPCookie* cookie in facebookCookies) {

            NSLog(@"In For");
            [cookies deleteCookie:cookie];

            NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
            [defaults removeObjectForKey:kSocializeFacebookAuthAppId];
            [defaults removeObjectForKey:kSocializeFacebookAuthLocalAppId];
            [defaults removeObjectForKey:kSocializeFacebookStringForAPI];
            [defaults removeObjectForKey:kSocializeConsumerKey];
            [defaults removeObjectForKey:kSocializeConsumerSecret]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:58:12.037

Facebook 和 twitter SDK 将访问令牌保存在 cookie 中。

因此，当您尝试在代码中使用日志记录机制时，您必须清除所有缓存和 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T07:49:30.687

我解决了它：

1.在facebook应用程序的高级设置中，我启用了本地/桌面应用程序

2.基本设置禁用SSO

3.增加de-auth回调url提前设置

4.添加以下代码：

```
NSHTTPCookie *cookie;
    NSHTTPCookieStorage *storage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
    for (cookie in [storage cookies])
    {
        NSString* domainName = [cookie domain];
        NSRange domainRange = [domainName rangeOfString:@"facebook"];
        if(domainRange.length > 0)
        {
            [storage deleteCookie:cookie];
        }
    } 
```

# google-chrome-extension - chrome.webRequest.onResponseStarted.addListener

> ID：12280437
> 
> 赞同：0
> 
> 时间：2012-09-05T11:29:38.470
> 
> 标签：google-chrome-extension

在清单中添加了这些行

```
permissions": [ "tabs","webRequest", "webRequestBlocking", "http://*/*", "https://*/*","ftp://*/*","contextMenus","proxy","cookies"], 
```

我的 chrome 版本是 21.0.1180.89 我尝试在 background.js 页面中使用 chrome api

```
var callbackFunction = function(details){
alert("response started ");
}

chrome.webRequest.onResponseStarted.addListener(callbackFunction); 
```

但我收到以下错误

```
"Uncaught TypeError: Cannot read property 'onResponseStarted' of undefined" 
```

# android - Android：如何以编程方式创建 GridLayout [不是 GridView]？

> ID：12280442
> 
> 赞同：16
> 
> 时间：2012-09-05T11:29:44.517
> 
> 标签：android, android-layout, grid-layout

我正在开发一个“匹配以下”应用程序。应用程序使用的xml如下：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/lytLinear"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/txtQuestion"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingBottom="30dp"
        android:text="Match the following questions with their answers." />

    <GridLayout
        android:id="@+id/lytGrid"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:columnCount="3"
        android:columnWidth="300dp"
        android:orientation="vertical"
        android:rowCount="5"
        android:stretchMode="columnWidth" >

        <LinearLayout
            android:id="@+id/Q1Lyt"
            android:layout_width="160dp"
            android:layout_height="50dp"
            android:layout_column="0"
            android:layout_row="0"
            android:background="@drawable/shape_qn"
            android:gravity="center" >

            <TextView
                android:id="@+id/Q1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_column="0"
                android:layout_row="0"
                android:text="Question1" />
        </LinearLayout>

        <LinearLayout
            android:id="@+id/A1Lyt"
            android:layout_width="160dp"
            android:layout_height="50dp"
            android:layout_column="1"
            android:layout_row="0"
            android:background="@drawable/shape"
            android:gravity="center"
            android:text="Answer1" >

            <TextView
                android:id="@+id/A1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_column="0"
                android:layout_row="0"
                android:text="Answer1" />
        </LinearLayout>

        <LinearLayout
            android:id="@+id/Q2Lyt"
            android:layout_width="160dp"
            android:layout_height="50dp"
            android:layout_column="0"
            android:layout_row="1"
            android:background="@drawable/shape_qn"
            android:gravity="center" >

            <TextView
                android:id="@+id/Q2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Question2" />
        </LinearLayout>

        <LinearLayout
            android:id="@+id/A2Lyt"
            android:layout_width="160dp"
            android:layout_height="50dp"
            android:layout_column="1"
            android:layout_row="1"
            android:background="@drawable/shape"
            android:gravity="center" >

            <TextView
                android:id="@+id/A2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_column="0"
                android:layout_row="0"
                android:text="Answer2" />
        </LinearLayout>
   </GridLayout>
 </LinearLayout> 
```

我尝试了以下代码来创建网格布局。但是，对于子线性布局，我无法找到以编程方式设置 android:layout_column 和 android:layout_row 参数的方法。

```
GridLayout gridLayout = new GridLayout(this);
    gridLayout.setColumnCount(2);
    gridLayout.setRowCount(15);

    LinearLayout lyt1 = new LinearLayout(this);
    LinearLayout.LayoutParams prmsLinLyt = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT); 
```

任何指针？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T01:36:10.353

您可以通过以下方式以编程方式创建它：

```
GridLayout gridLayout = new GridLayout(getContext());

// Add Title
GridLayout.Spec titleTxtSpecColumn = GridLayout.spec(2, GridLayout.BASELINE);
GridLayout.Spec titleRowSpec = GridLayout.spec(0);
TextView titleText = new TextView(getContext());
titleText.setText("Title");

gridLayout.addView(titleText, new GridLayout.LayoutParams(titleRowSpec , titleTxtSpecColumn)); 
```

有关更多详细信息，请参阅 ApiDemos 示例。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-05T11:52:00.183

你应该试试这个：

```
 gridLayout.setLayoutParams(prmsLinLyt); 
```

如果你想给出价值......

```
LinearLayout.LayoutParams prmsLinLyt = new LinearLayout.LayoutParams(90,100);

where layout_width = 90
and layout_height= 100 
```

# jquery - 当 droptarget 完全被另一个元素遮挡时，停止 jquery droppable 接受

> ID：12280446
> 
> 赞同：0
> 
> 时间：2012-09-05T11:30:09.587
> 
> 标签：jquery, jquery-ui, jquery-droppable

在我的用户界面中，我有许多弹出对话框，其中一些包含 jquery 可放置目标。它们工作正常，但是当一个弹出窗口完全覆盖放置目标时，我想阻止事件传播。

我试图在弹出对话框上放置一个事件处理程序以阻止 drop 事件传播，但这不起作用。

使用范围和接受选项似乎并不可行，因为对象和目标或多或少是相同的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T00:28:16.687

最简单的方法可能是`disable`在打开对话框时对被遮挡的 dropable 使用该方法。`enable`然后在对话框关闭事件中调用该方法。禁用所有不在最近打开的对话框中的 droppable 也可能有意义。

不幸的是，将选项设置`greedy`为 true 只会停止嵌套 dropable 的传播，因此这也不是您的选择。

# jquery - 使用 JQuery 捕获密码输入类型的值

> ID：12280450
> 
> 赞同：1
> 
> 时间：2012-09-05T11:30:25.547
> 
> 标签：jquery, html, login

目标是登录网站而不必刷新屏幕。我正在使用文本框来捕获电子邮件/用户名和密码框（输入类型 =“密码”）。然后，理想情况下，我想将这些值传递回 Web 服务以使用 JQuery/AJAX 进行身份验证。然而，我遇到的问题是 JQuery 无法访问 Password 字段的值，总是传回一个空字符串而不是密码。

我了解能够通过脚本访问某人密码的安全隐患，但是有没有办法、一些解决方法或技术来完成我正在尝试的事情？

谢谢你，G

**更新：** 我如何因提问而被扣分？这是一个愚蠢的问题吗？尽管答案可能证明值得进行几次“DOH”扣除……事实证明，表格上有两个密码字段，每个字段都有相同的 ID。我从空的那里得到了价值。我感谢大家的回应和帮助。与往常一样，我被引导到一些有用的链接和信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T11:34:28.453

就使用 JS 读取值而言，密码输入没有什么特别之处。请参阅[此现场演示](http://jsfiddle.net/HyLfx/)以获取证明。

如果未提交该字段，则说明您的基本方法有问题。

也许您正在调用`serialize()`但没有给输入命名。如果不查看您的代码，就不可能知道实际问题是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T11:34:58.240

```
<input type="password" name="password" /> 
```

和 javascript

```
$(function(){
  $.post('your-url', {password: $("input[name='password']").val()}, callback(info){
   // proccess success
  },
  'json' // or other dataType
}); 
```

阅读更多[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

和 PHP 可能：

```
if(isset($_POST["password"])){
 //proccess info server
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T11:31:49.563

只需通过 AJAX 提交整个表单，您不需要从表单中获取单个值，将 post 原样放置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T11:36:49.187

jQuery 在访问密码字段值方面没有问题 -[检查一下](http://jsfiddle.net/NgeDq/)。

只要您通过普通`HTTP`而[不是](http://en.wikipedia.org/wiki/OAuth)`HTTPS`.

# ios - 用于 ios 的 Apache Tika 替代品

> ID：12280454
> 
> 赞同：0
> 
> 时间：2012-09-05T11:30:45.450
> 
> 标签：ios, apache-tika

我知道 Apache Tika 是一个文本提取器。它可以从 doc、pdf、ppt 和许多其他文件格式中提取文本。现在我在 ios 中需要这个功能，所以我想知道 Apache Tika for ios 有什么替代品吗？

如果 ios 没有这样的库，你可以告诉我可以提取指定文件格式的工具。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:41:50.920

[libopc](http://libopc.codeplex.com/documentation)用于从 docx、xlsx、pptx 中提取文本。

[旧 MS 格式的Antiword](http://www.winfield.demon.nl/)。

[您也可以使用 CoreGraphics 从 PDF 中提取字符串，也可以](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_pdf_scan/dq_pdf_scan.html)使用[PDFiPhone](https://github.com/zachron/pdfiphone)。

如果您还想从 HTML 文档中提取文本，请查看[NSXMLParser](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html)。

# jquery - 在 IE 上切换后 DIV（页脚）没有被按下

> ID：12280458
> 
> 赞同：1
> 
> 时间：2012-09-05T11:31:05.790
> 
> 标签：jquery, css, html

这在 FF 和 IE9 上运行良好，但在 IE7 和 8 中失败。

我有两个隐藏的 div，其中包含一个表单。单击按钮后，带有表单的正确 div 将显示在下面。所有这些都可以正常工作，但在 IE7 和 8 中，页脚将与表单重叠，并且不会被切换事件向下推。

这是我的html（简化）：

```
 <div class="row" id="contactesp">
        <div class="twelve columns">
            <!-- Contact Form 7 plugin shows the form here -->
        </div>
    </div>
    <div class="row" id="contactmund">
        <div class="twelve columns">
            <!-- Contact Form 7 plugin shows the form here -->
        </div>
    </div>
    <!-- Footer -->
    <footer role="contentinfo" id="content-info">
        <div class="row">Content here</div>
    </footer> 
```

我的 CSS（其中一些）：

```
 #content-info {
     background-color: #1C3F94;
     clear: both;
     color: #FFFFFF;
     float: none;
     margin: 20px -20px 0;
     padding: 0 4%;
     display:block;
 }
 #contactesp, #contactmund {
     display: none;
     height: auto;
     overflow: hidden;
 } 
```

我还在表单中添加了溢出：隐藏但无济于事。这是我的jQuery：

```
 jQuery(document).ready(function ($) {
        $('.enesp').on('click',function(){
            $('#contactmund').hide();
            $('#contactesp').toggle();
        });
        $('.enmund').on('click',function(){
            $('#contactesp').hide();
            $('#contactmund').toggle();
        });
    }); 
```

该站点在此处获取完整代码：[http](http://www.institutoespanol.net/contacto/) ://www.institutoespanol.net/contacto/当您单击地图框中的任一按钮时，就会出现问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:07:38.610

只需设置*position: 相*对于**<footer>**标签。重叠问题将得到解决。

```
footer{ position:relative; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T11:26:39.953

以下列方式重构您的 html，

```
<html>
    <head></head>
    <body>

        <div class="main-page">
            <!-- All the main content here, all the divs as you want put it at this place. -->
        </div>

        <div class="footer">
            <!-- Footer contents -->
        </div>
    </body>
</html> 
```

并分配这个 css

```
.main-page {
    height: 100%;
    padding-bottom:60px;   /* Height of the footer */
}

.footer {
   position:absolute;
   bottom:0;
   width:100%;
   height:60px;   /* Height of the footer */
} 
```

可能这会有所帮助。这种结构消除了我的一些`ie`错误。

另外请注意，请检查[此链接](http://ryanfait.com/resources/footer-stick-to-bottom-of-page/)以编写粘性页脚。这或多或少与处理 html 页面结构的概念相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T07:23:54.387

我希望这有帮助！
[http://jsfiddle.net/qUESn/1/](http://jsfiddle.net/qUESn/1/)

# wordpress - Wordpress 生成的页面，其中包含来自 url 的值

> ID：12280463
> 
> 赞同：0
> 
> 时间：2012-09-05T11:31:14.620
> 
> 标签：wordpress, url, plugins, categories, taxonomy

我目前正在尝试使用自定义分类法构建 wordpress 产品目录。我想要一个可浏览的多级类别系统，所以如果我点击目录菜单，它将显示所有顶级父类别，如果我点击其中一个类别，而不是显示该特定类别中的帖子，我希望它列出它的所有子类别。

为此，我目前正在使用两个稍作修改的插件：

多列分类列表和分类图像。

我的方法是让分类列表显示自定义链接链接 www.xyz.com/wp/product?cat=doors

并且产品页面将处理 $_GET 数据 cat 并以某种方式将其转发到简码，因此它将是 [mctl taxonomy='productcategories' parent='$_GET['parentid']'] 。

所以对于 TLDR：如何将变量从 URL 传递到简码或插件。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:38:24.020

没关系，我想通了。我只需要编辑插件 php 并在那里使用 $_GET[''] 东西。

# triggers - SQL Server 触发器删除或级联删除

> ID：12280466
> 
> 赞同：1
> 
> 时间：2012-09-05T11:31:21.617
> 
> 标签：triggers, sql-server-2012

首先，在基本的 CRUD 之前，我没有做太多的 SQL 代码，但我参与了一个项目，在该项目中我可以访问 SQL Server，并且由我来编写 SQL。

我一直在忙于在 stackoverflow 上寻找解决方案，但是（作为新的）它对我来说没有任何意义。

我正在使用 SQL Server 2012。

我有以下关系（有外键约束）

```
Client > Order > OrderItems 
```

**命令**

```
Id
ClientId 
```

**订单项**

```
Id
OrderId 
```

我正在使用 EF，当我在客户端调用我的删除方法时，我需要删除表中`orders`的所有相关项目`orderitems`

我需要添加一个触发器来删除`orders`and `orderitems`，但我不确定如何执行此操作，或者级联删除（我听说过）是否最好？

任何人都有一个快速的例子和建议如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:47:48.957

对于简单的情况，使用级联删除。

如果您有更复杂的要求，请使用触发器或存储过程进行删除

[http://msdn.microsoft.com/en-us/library/aa902684(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa902684(v=sql.80).aspx)

# java - 斯坦福依赖解析器

> ID：12280467
> 
> 赞同：2
> 
> 时间：2012-09-05T11:31:26.543
> 
> 标签：java, stanford-nlp

我试过斯坦福依赖解析器。我得到了以下解析树和关系。但我需要一个依赖图。如何得到它。有什么方法可以将依赖关系转换为图形？请帮我。我是 java 和 stanford 工具的新手。

程序是一组指令

```
(ROOT
  (S
    (NP (NNP Program))
    (VP (VBZ is)
      (NP
        (NP (DT a) (NN set))
        (PP (IN of)
          (NP (NN instruction)))))))

nsubj(set-4, Program-1)
cop(set-4, is-2)
det(set-4, a-3)
root(ROOT-0, set-4)
prep_of(set-4, instruction-6) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T05:56:14.073

你一定已经解决了这个问题，但我认为这可能对其他人有所帮助。您可能想查看[斯坦福解析器主页](http://nlp.stanford.edu/software/lex-parser.shtml)。

你可以在哪里找到[tydevi](https://sourceforge.net/projects/tydevi/)和[DependenSee](http://chaoticity.com/dependensee-a-dependency-parse-visualisation-tool/)

*   `tydevi`是键入的 Dependency Viewer，它制作了一个句子的 Stanford Dependencies 分析图片（由 Bernard Bou 撰写），以及

*   `DependenSee`是一个依赖解析可视化工具，可以制作斯坦福依赖输出的图片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T15:33:11.027

@Sakthi 这里是一个实现[http://keithschwarz.com/interesting/code/?dir=topological-sort](http://keithschwarz.com/interesting/code/?dir=topological-sort)

您还可以使用带有左右指针的 N​​ode 类来实现自己的快速实现。

也可以利用 XML DOM 对象。这样做的好处是，您可以使用 XPATH。缺点是，这是一个非常昂贵的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T23:23:11.200

我很确定您一定已经找到了答案，但以防万一。有一个方法 toDotFormat() 可以在依赖项上调用。这允许以 DOT 格式存储结果，使用 GraphViz 可以轻松地将其读取为图形。使用 GV，您可以将其呈现为多种不同的格式，例如 png。

# jquery - 我可以在 Twitter Bootstrap 中重命名轮播以避免冲突吗？如果有怎么办？

> ID：12280468
> 
> 赞同：2
> 
> 时间：2012-09-05T11:31:28.453
> 
> 标签：jquery, twitter-bootstrap, carousel

我正在使用 Twitter 引导程序。我在我网站的一个地方使用包含的轮播来旋转 DIV 列表，一次显示一个 div。

它是这样启动的：

`$('.carousel').carousel({interval: 5000});`

Bootstrap Carousel 非常基础，在站点的其他地方我需要一个轮播，它允许我一次显示多个项目、添加回调等，所以我想使用[jq.carousel](http://5509.github.com/jq.carousel/#sample)或[jQuery Carousel](http://www.thomaslanciaux.pro/jquery/jquery_carousel.htm)之类的东西。这两个都使用与 Bootstrap 相同的函数名称，并像这样启动：

`var $carousel = $('.mycarouselclass').carousel();`

所以……有冲突。在一个站点上使用这两个插件有哪些不同的方法？有没有办法重新定义一个插件，以便用不同的名称调用它？如果您认为我以错误的方式处理这个问题，请说出来，我非常愿意接受建议和学习 :)

**基于评论的附加信息：** 如果可能的话，我想保持缩小的插件 js 文件不变，所以我对一种在外部重命名一个实例的方法感兴趣，以便将来的插件升级很容易。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T12:01:04.747

在加载第二个轮播插件之前，在本地重命名第一个中的函数，如下所示：

```
<script type='text/javascript' src="bootstrapCarousel.js"></script>
<script type='text/javascript'>
    $.fn.bootstrapCarousel = $.fn.carousel;
    delete $.fn.carousel;
</script>
<script type='text/javascript' src="nonBootstrapCarousel.js"></script> 
```

然后，如果您想要您调用的引导程序版本，`.bootstrapCarousel()`而对于另一个版本，它只是`.carousel()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T07:06:07.270

虽然 Timm 的回答仍然有效，但 Twitter Bootstrap 插件提供了自己的`.noConflict()`方法来避免命名空间冲突。

对于 TB 2.3.x，请参阅[此页面](http://getbootstrap.com/2.3.2/javascript.html#overview)，对于最新的 3 ，请点击[此链接](http://getbootstrap.com/javascript/)。顺便说一句，两个版本都使用相同的方法。

```
var bootstrapButton = $.fn.button.noConflict() // return $.fn.button to previously assigned value
$.fn.bootstrapBtn = bootstrapButton            // give $().bootstrapBtn the Bootstrap functionality 
```

通过阅读 TB 的插件代码之一，我发现该插件保留了预加载的插件，该插件在内部变量中使用相同的命名空间，`var old = $.fn.carousel`并在调用时将其放回`.noConflict()`。如果先加载其他插件并加载TB，则很方便。

如果您先加载 TB，则需要`.noConflict()`在加载将使用相同命名空间的其他插件之前调用。否则以后加载一个可能会出现错误。

# c++ - StackWalk64 不适用于发布版本

> ID：12280472
> 
> 赞同：0
> 
> 时间：2012-09-05T11:31:39.463
> 
> 标签：c++, windows, stack-trace

以下是我的代码，仅来自开源。为什么 StackWalk64 不适用于`release build`和`debug build without pdbs`

**头文件**

```
#ifndef STACK_TRACE_H_
#define STACK_TRACE_H_

#include <string>
#include <deque>

struct StackItem {
  std::string m_name;
  std::string m_file;
  int m_line;

  StackItem() : m_line(0) {}
};

class StackTraceImpl;

class StackTrace {
public:
  typedef std::deque<StackItem>         ItemContainer;
  typedef ItemContainer::const_iterator ItemIterator;

  ItemContainer   m_items;
  StackTraceImpl *m_impl;
public:

  StackTrace();
  virtual ~StackTrace();
  void print() const;

  void popFront() { 
    m_items.pop_front(); 
  }
  ItemIterator begin() const { 
    return m_items.begin(); 
  }
  ItemIterator end() const { 
    return m_items.end(); 
  }

};

#endif 
```

**文件**

```
#include <windows.h>
#include <DbgHelp.h>
#include <tlhelp32.h>
#include <vector>

#include <iostream>

#include "StackTrace.h"

std::size_t const SYMBOL_NAME_MAXLEN = 1024;

struct SymStartup {
  HANDLE process;
  SymStartup(HANDLE process) : process(process) {
    char current[MAX_PATH];
    std::string path;
    if (GetCurrentDirectoryA(MAX_PATH, current) > 0) {
      path += current;
      path += ";";
    }

    if (GetModuleFileNameA(NULL, current, MAX_PATH) > 0) {
      std::string filePath = current;
      std::string::size_type pos = filePath.find_last_of('\\');
      if (pos != std::string::npos)
        filePath.erase(pos);

      path += filePath;
      path += ";";
    }

    if (GetEnvironmentVariableA("_NT_SYMBOL_PATH", current, MAX_PATH) > 0) {
      path += current;
      path += ";";
    }

    if (GetEnvironmentVariableA("_NT_ALTERNATE_SYMBOL_PATH", current, MAX_PATH) > 0) {
      path += current;
      path += ";";
    }

    if (GetEnvironmentVariableA("SYSTEMROOT", current, MAX_PATH) > 0) {
      path += current;
      path += ";";
      path += current;
      path += "\\system32";
      path += ";";
    }

    if (!SymInitialize(process, path.c_str(), FALSE))
      throw 1;

    DWORD options = SymGetOptions();
    options |= SYMOPT_LOAD_LINES;
    options |= SYMOPT_FAIL_CRITICAL_ERRORS;

    options = SymSetOptions(options);
  }

  ~SymStartup() {
    if (process)
      SymCleanup(process);
  }
};

//inline std::string wstr2str(std::wstring const& ws)
//{
//  using namespace std;
//  std::string mbs;
//  ctype<wchar_t> const& conv(use_facet<ctype<wchar_t> >(locale()));
//
//  mbs.reserve(ws.size());
//  for (wstring::const_iterator it = ws.begin(); it != ws.end(); ++it)
//    mbs.push_back(conv.narrow(*it, '?'));
//
//  return mbs;
//}

std::string wstr2str(const std::wstring &wstr) {
    std::string strTo;
    char *szTo = new char[wstr.length() + 1];
    szTo[wstr.size()] = '\0';
    WideCharToMultiByte(CP_ACP, 0, wstr.c_str(), -1, szTo, (int)wstr.length(), NULL, NULL);
    strTo = szTo;
    delete[] szTo;
    return strTo;
}

class StackTraceImpl {
private:            
  void load_modules(HANDLE process, DWORD processID) {
    HANDLE snap = CreateToolhelp32Snapshot(TH32CS_SNAPMODULE, processID);
    if (snap == INVALID_HANDLE_VALUE)
      return;

    MODULEENTRY32 entry;
    entry.dwSize = sizeof(entry);

    if (Module32First(snap, &entry)) {
      do {
        std::string fileName    = wstr2str(entry.szExePath);
        std::string moduleName  = wstr2str(entry.szModule);
        SymLoadModule64(process, NULL, fileName.c_str(), moduleName.c_str(), (DWORD64) entry.modBaseAddr, entry.modBaseSize);
      } while (Module32Next(snap, &entry));
    }
    CloseHandle(snap);
  }

  void retrieve_context(CONTEXT& context) {
    std::memset(&context, 0, sizeof(context));
    context.ContextFlags = CONTEXT_FULL;
    RtlCaptureContext(&context);
  }

  void retrieve_frame(CONTEXT& context, STACKFRAME64& frame, DWORD& imageType) {
    std::memset(&frame, 0, sizeof(frame));
#ifdef _M_IX86
    imageType = IMAGE_FILE_MACHINE_I386;
    frame.AddrPC.Offset = context.Eip;
    frame.AddrPC.Mode = AddrModeFlat;
    frame.AddrFrame.Offset = context.Ebp;
    frame.AddrFrame.Mode = AddrModeFlat;
    frame.AddrStack.Offset = context.Esp;
    frame.AddrStack.Mode = AddrModeFlat;
#elif _M_X64
    imageType = IMAGE_FILE_MACHINE_AMD64;
    frame.AddrPC.Offset = context.Rip;
    frame.AddrPC.Mode = AddrModeFlat;
    frame.AddrFrame.Offset = context.Rsp;
    frame.AddrFrame.Mode = AddrModeFlat;
    frame.AddrStack.Offset = context.Rsp;
    frame.AddrStack.Mode = AddrModeFlat;
#elif _M_IA64
    imageType = IMAGE_FILE_MACHINE_IA64;
    frame.AddrPC.Offset = context.StIIP;
    frame.AddrPC.Mode = AddrModeFlat;
    frame.AddrFrame.Offset = context.IntSp;
    frame.AddrFrame.Mode = AddrModeFlat;
    frame.AddrBStore.Offset = context.RsBSP;
    frame.AddrBStore.Mode = AddrModeFlat;
    frame.AddrStack.Offset = context.IntSp;
    frame.AddrStack.Mode = AddrModeFlat;
#else
#error "Platform not supported!"
#endif
  }

public:
  void retrieve(StackTrace::ItemContainer& items) {
    HANDLE process = 0;

    try {
      items.clear();
      process = GetCurrentProcess();
      SymStartup startup(process);
      load_modules(process, GetCurrentProcessId());

      HANDLE thread = GetCurrentThread();

      CONTEXT context;
      retrieve_context(context);

      DWORD imageType = 0;
      STACKFRAME64 frame;
      retrieve_frame(context, frame, imageType);

      std::vector<char> symbolData(sizeof(IMAGEHLP_SYMBOL64) + SYMBOL_NAME_MAXLEN, 0);

      IMAGEHLP_SYMBOL64* symbol = reinterpret_cast<IMAGEHLP_SYMBOL64*>(&symbolData[0]);                    
      symbol->SizeOfStruct = sizeof(IMAGEHLP_SYMBOL64);
      symbol->MaxNameLength = SYMBOL_NAME_MAXLEN;

      IMAGEHLP_LINE64 m_line;
      std::memset(&m_line, 0, sizeof(IMAGEHLP_LINE64));
      m_line.SizeOfStruct = sizeof(IMAGEHLP_LINE64);

      for (int frameNum = 0; true; ++frameNum) {
        if (!StackWalk64(imageType, process, thread, &frame, &context, NULL, &SymFunctionTableAccess64, &SymGetModuleBase64, NULL))
          break;

        if (frame.AddrPC.Offset == frame.AddrReturn.Offset)
          break;                        

        if (frame.AddrPC.Offset != 0) {
          StackItem item;

          DWORD64 displacement64 = 0;
          if (SymGetSymFromAddr64(process, frame.AddrPC.Offset, &displacement64, symbol)) {
            char symbolName[SYMBOL_NAME_MAXLEN];
            std::strncpy(symbolName, symbol->Name, SYMBOL_NAME_MAXLEN);

            UnDecorateSymbolName(symbol->Name, symbolName, SYMBOL_NAME_MAXLEN, UNDNAME_COMPLETE);
            item.m_name.assign(symbolName, symbolName + std::strlen(symbolName));
          }

          DWORD displacement = 0;
          if (SymGetLineFromAddr64(process, frame.AddrPC.Offset, &displacement, &m_line)) {
            item.m_line = m_line.LineNumber;
            item.m_file.assign(m_line.FileName, m_line.FileName + std::strlen(m_line.FileName));
          }
          items.push_back(item);
        }
        if (frame.AddrReturn.Offset == 0)
          break;
      }
    } catch (...) {
    }                
  }
};

StackTrace::StackTrace() : m_impl(new StackTraceImpl) {
  m_impl->retrieve(m_items);
  if (m_items.size() > 1)
            m_items.erase(m_items.begin(), m_items.begin() + 2);
}

StackTrace::~StackTrace() {
}

void StackTrace::print() const {
  for (StackTrace::ItemIterator it = m_items.begin(), end = m_items.end(); it != end; ++it)
            std::cout  << it->m_file << "(" << it->m_line << ") : " << it->m_name << std::endl;
} 
```

**主文件**

```
#include "StackTrace.h"
void func1() {
  StackTrace st;
  st.print();
}
void func2() {
  func1();
}
void func3() {
  func2();
}
void func4() {
  func3();
}
void func5() {
  func4();
}
void func6() {
  func5();
}
int main ( int argc, char **argv ) {
  func5();
  return 0;
} 
```

**调试构建输出**

```
E:\Avinash\my_work\StackWalk64>Debug\StackWalk64.exe
e:\avinash\my_work\stackwalk64\stackwalk64\stackwalk64main.cpp(3) : func1
e:\avinash\my_work\stackwalk64\stackwalk64\stackwalk64main.cpp(8) : func2
e:\avinash\my_work\stackwalk64\stackwalk64\stackwalk64main.cpp(11) : func3
e:\avinash\my_work\stackwalk64\stackwalk64\stackwalk64main.cpp(14) : func4
e:\avinash\my_work\stackwalk64\stackwalk64\stackwalk64main.cpp(17) : func5
e:\avinash\my_work\stackwalk64\stackwalk64\stackwalk64main.cpp(23) : main
f:\dd\vctools\crt_bld\self_x86\crt\src\crtexe.c(555) : __tmainCRTStartup
f:\dd\vctools\crt_bld\self_x86\crt\src\crtexe.c(371) : mainCRTStartup
(0) : BaseThreadInitThunk
(0) : RtlInitializeExceptionChain
(0) : RtlInitializeExceptionChain 
```

**发布构建输出**

```
E:\Avinash\my_work\StackWalk64>Release\StackWalk64.exe
f:\dd\vctools\crt_bld\self_x86\crt\src\crtexe.c(555) : __tmainCRTStartup
(0) : BaseThreadInitThunk
(0) : RtlInitializeExceptionChain
(0) : RtlInitializeExceptionChain 
```

**删除 PDB 文件后**

```
E:\Avinash\my_work\StackWalk64\Debug>StackWalk64.exe
(0) :
(0) :
(0) :
(0) :
(0) :
(0) :
(0) :
(0) :
(0) : BaseThreadInitThunk
(0) : RtlInitializeExceptionChain
(0) : RtlInitializeExceptionChain 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T12:59:18.157

您不能期望在优化的代码上可靠地遍历堆栈。消除堆栈帧是代码优化器的首要任务。“省略帧指针”优化是一项重要的优化，它释放了一个额外的寄存器 (EBP)，这对于 x86 代码总是很重要。它通常默认关闭，但代码生成器在可以内联函数时仍会应用它。

最强的是“内联函数扩展”优化，它用目标函数体中的代码替换了函数调用。这对您的测试代码有很好的影响，它完全消除了您的*所有*功能。换句话说，func1() 中的代码被移到了 main() 中。

禁用这些优化是不明智的，它会极大地影响代码的效率。C 和 C++ 语言的设计速度很快，可调试性不是主要考虑因素。这就是为什么首先存在调试和发布配置的原因。请记住，您的测试代码过于人为，无法可靠地指示实际代码中会发生什么。你会从堆栈跟踪中得到*一些东西*，而不是你在调试代码时习惯的东西。

# java - Jmeter：在发布 JMS 消息时为多个线程使用相同的 ConnectionFactory

> ID：12280475
> 
> 赞同：6
> 
> 时间：2012-09-05T11:31:48.370
> 
> 标签：java, jms, jmeter

如果将大量 JMS 消息发布到队列上，我正在使用 Jmeter 的 JMS 点对点采样器来测试性能。

Jmeter 目前为每个线程（根据提供的线程数）创建一个新的**QueueConnectionFactory**和**QueueConnection 。**我想这不是通过前端发生的，单个连接工厂处理不同的线程。

我们如何确保它只为所有线程创建一个连接？Jmeter有什么选择吗？还是我们应该修改代码？如果有人能引导我朝着正确的方向前进，那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T12:56:24.320

从 2.7 版开始，JMeter 没有创建一个 QueueConnection 并在线程间共享它的选项。只有 InitialContext 被缓存。

[我在JMeter Bugzilla](https://issues.apache.org/bugzilla/buglist.cgi?bug_status=NEW&bug_status=ASSIGNED&bug_status=REOPENED&bug_status=NEEDINFO&bug_severity=Enhancement&product=JMeter&order=Bug%20Number&list_id=88553)上打开了一个增强请求：

*   [https://issues.apache.org/bugzilla/show_bug.cgi?id=53833](https://issues.apache.org/bugzilla/show_bug.cgi?id=53833)

关于你所说的现实生活，这真的取决于模拟的是什么：

*   如果您想使用一个代理模拟一个应用程序，那么您说的是真的

*   但是，如果您想使用一个代理模拟多个应用程序，那么当前的 JMeter 方法更接近现实。

问候

菲利普·M。

# node.js - 返回 mongoose 中的集合数组

> ID：12280477
> 
> 赞同：0
> 
> 时间：2012-09-05T11:31:50.277
> 
> 标签：node.js, authentication, mongoose

我是 mongoose 的新手，为了将 mongoose 集合转换为数组，我尝试了很多搜索，但它返回一个错误，即 toArray() 不是方法。所以这是我尝试转换为数组的另一种方法.我正在使用passport js方法进行身份验证，为此我需要将所有用户信息作为一个数组。我正在尝试实现中给出的示例

[https://github.com/jaredhanson/passport-local/blob/master/examples/express3/app.js](https://github.com/jaredhanson/passport-local/blob/master/examples/express3/app.js)

猫鼬驱动的数据。

这是我试图将猫鼬集合转换为数组的片段。

```
ContactProvider.prototype.findByusername=function(callback){
    var users=Post.find({});
    var user=toObject((JSON.parse(users))) ;
    callback(null,user);

}; 
```

我收到以下错误

```
undefined:1
[object Object]
 ^
SyntaxError: Unexpected token o
    at Object.parse (native)
    at ContactProvider.findByusername (/home/r121/Desktop/nilesh/cmarin-MongoDB-Node-Express-Blog-4a5e5e9/postprovider.js:60:26)
    at Object.<anonymous> (/home/r121/Desktop/nilesh/cmarin-MongoDB-Node-Express-Blog-4a5e5e9/app.js:138:37)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

我应该如何返回这些集合的数组。有人可以指导我使用语法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:03:45.667

一个简单的解决方案是利用 .find() 方法的回调，然后在返回的结果上调用 toObject()。例子

```
Post.find({}).exec(function(err, o) {
    callback(err, o)
}); 
```

编辑：由于 JohnnyHK 评论中提到的原因，删除了多余的 toObject() 调用

# sql-server - 在 INSERT 触发器中动态构建 UPDATE 语句

> ID：12280482
> 
> 赞同：0
> 
> 时间：2012-09-05T11:32:07.170
> 
> 标签：sql-server, sql-server-2008, triggers

我想在触发器中动态构建一个 UPDATE 语句，所以我需要一些临时变量和长度相关函数的帮助，并使用临时变量来指定 UPDATE 语句中的字段/更新值：

```
stSQL as string
stSQL = ""

IF FieldA=<criteria> then
 stSQL = "FieldB = we_ci_db.dbo.ztblTest.FieldA"
endif

IF FieldG=<criteria> then
 if len(stSQL)>0 then stSQL=stSQL & " AND "
 stSQL = "FieldH = we_ci_db.dbo.ztblTest.FieldF"
else
 if len(stSQL)>0 then stSQL=stSQL & " AND "
 stSQL = "FieldH = we_ci_db.dbo.ztblTest.FieldG"
endif

UPDATE ztblTest
SET stSQL
WHERE TestID IN (SELECT DISTINCT TestID FROM inserted) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:43:53.360

在我看来，您似乎不需要构建字符串、使用动态 SQL 或拥有所有这些`IF`条件。两个简单的内联`CASE`表达式似乎可以做到这一点：

```
UPDATE z
SET FieldB = CASE WHEN i.FieldA = <criteria> THEN i.FieldA ELSE i.FieldB END,
    FieldH = CASE WHEN i.FieldG = <criteria> THEN i.FieldF ELSE i.FieldG END
FROM dbo.ztblTest AS z
INNER JOIN inserted AS i
ON z.TestID = i.TestID; 
```

# c# - 如何检查是否已选择/切换 Winforms 控件？

> ID：12280486
> 
> 赞同：1
> 
> 时间：2012-09-05T11:32:14.940
> 
> 标签：c#, winforms, controls

如何检查当前活动表单的任何控件（复选框/单选按钮）是否已被选中/切换？

我的目标是创建一个名为**Save changes automatically**的选项，它可以保存 and 的当前状态`check boxes`，`radio buttons`因此我需要知道何时选择/切换任何控件（以执行保存设置方法）。我不想为每个控件创建一个单独的事件处理程序，如果可能的话，我正在寻找一个通用的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T11:36:00.100

这不是用户界面的工作。

使用数据绑定在代码隐藏中更改模型并让模型触发/升级更改。

* * *

为您提供一点帮助：

您的复选框和其他控件**不在**您的数据所在的位置。他们应该只显示数据。

使用复选框的布尔属性和单选框的 int/enum 属性创建一个对象（模型）。设置从控件到属性的数据绑定。

然后您可以在属性的 Setter 中实现必要的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:06:27.990

正如 Henk 建议的那样，您可以使用诸如 MVC之类[的关注点分离模式来分离 UI 和域逻辑。](http://en.wikipedia.org/wiki/Separation_of_concerns)当用户对某些 UI 小部件进行更改时，您会更新模型中的值，例如通过设置属性。然后，属性设置器可以更新`IsDirty`（或 HasChanges，...）字段。UI 将读取此属性，UI 将根据 IsDirty 的值决定需要做什么。（显示一个 MessageBox("Do you want to save your changes") 或其他）

我确实认为当您用 标记问题时，Henk 正在思考网络问题`WinForms`。您可能没有使用模式来分离 UI 和域逻辑。（并且 UI 和域代码已经如此交织在一起，以至于您当前的截止日期不允许您现在引入模型）

`Form`您可以通过将 IsDirty 字段放在您的字段上并`Changed EventHandlers`设置 IsDirty 值来实现相同的目的。通过对表单进行子类化（即，将 IsDirty 放在您的“FormBase”上）和您的控件（例如通过引入水印），您可以为所有表单提供开箱即用的这种行为。

# iphone - iOS TestFlight 设备上的 SIGSEGV 崩溃

> ID：12280491
> 
> 赞同：5
> 
> 时间：2012-09-05T11:32:40.770
> 
> 标签：iphone, ios, segmentation-fault, ad-hoc-distribution, testflight

我有一个奇怪的崩溃，它只发生在 TestFlight ad hoc 发行版上。我知道是什么导致了崩溃（一个简单的 while 循环，见下文），但我不明白为什么它不会在我的模拟器、iPhone 或 iPad（带有开发配置文件）上崩溃。

我一直在分发临时构建以跟踪崩溃，但我最终放弃了。如何更有效地跟踪此错误？

这是 TestFlight 崩溃报告：

```
 Exception reason

SIGSEGV

Stacktrace

PRIMARY THREAD THREAD 0

0 Meernotes 0x0019649a testflight_backtrace + 158
1 Meernotes 0x001970c4 TFSignalHandler + 244
2 libsystem_c.dylib 0x32d9d7ec _sigtramp + 48
3 libobjc.A.dylib 0x37d34eac _ZN12_GLOBAL__N_119AutoreleasePoolPage3popEPv + 224
4 libobjc.A.dylib 0x37d34eac _ZN12_GLOBAL__N_119AutoreleasePoolPage3popEPv + 224
5 libobjc.A.dylib 0x37d34dc8 _objc_autoreleasePoolPop + 12
6 CoreFoundation 0x358e1cfe _CFAutoreleasePoolPop + 18
7 UIKit 0x333d5c92 _wrapRunLoopWithAutoreleasePoolHandler + 42
8 CoreFoundation 0x35965b1a __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 18
9 CoreFoundation 0x35963d56 __CFRunLoopDoObservers + 258
10 CoreFoundation 0x359640b0 __CFRunLoopRun + 760
11 CoreFoundation 0x358e74a4 CFRunLoopRunSpecific + 300
12 CoreFoundation 0x358e736c CFRunLoopRunInMode + 104
13 GraphicsServices 0x37583438 GSEventRunModal + 136
14 UIKit 0x333f3cd4 UIApplicationMain + 1080
15 Meernotes 0x000850da main (main.m:16)
16 Meernotes 0x0008508f start + 39 
```

这是触发它的代码（但在模拟器/iphone上很好）：

```
 while (textStillFits) {

        textToBeKeptBeforeCutting = textToBeKept;
        textToBeMovedBeforeCutting = textToBeMoved;

        rangeCutOffPosition = [settings determineFirstCutOffRangeOfString:textToBeMoved];
        textToBeKeptTemp = [textToBeMoved substringToIndex:rangeCutOffPosition.location];
        textToBeMovedTemp = [textToBeMoved substringFromIndex:rangeCutOffPosition.location];
        textToBeMoved = textToBeMovedTemp;
        textToBeKept = [NSString stringWithFormat:@"%@%@", textToBeKept, textToBeKeptTemp];
        NSUInteger l = [settings linesOfText:textToBeKept];
        if (l > maxLines) {
            textStillFits = NO;
            textToBeKept = textToBeKeptBeforeCutting;
            textToBeMoved = textToBeMovedBeforeCutting;
            // brakes here!
        }else {
            textStillFits = YES;
        }
    } 
```

我看过这个，但没有帮助：[ad hoc iphone sigsegv crash](https://stackoverflow.com/questions/12060211/ad-hoc-iphone-sigsegv-crash-while-debug-on-device-simulator-works)

更多上下文，正如@ott 提到的 NSNotFound 可能会导致这种情况：

```
 -(NSRange)determineFirstCutOffRangeOfString:(NSString *)s {

    NSRange rangeSpace = [s rangeOfString:@" " options:NSCaseInsensitiveSearch];
    NSRange rangeReturn = [s rangeOfString:@"\n" options:NSCaseInsensitiveSearch];
    if (rangeSpace.location == NSNotFound && rangeReturn.location == NSNotFound) {
        rangeSpace = NSMakeRange(1, 0); // don't take 0,0 as this will lead to endless loop
        rangeReturn = NSMakeRange(1, 0);
        NSLog(@"NEITHER SPACE NOR RETURN FOUND");
    }

    NSRange rangeCutOffPosition = NSMakeRange(0, 0);
    if (rangeSpace.location < rangeReturn.location) {
        // i.e. if the space char is the lowest char where you can cut off
        rangeCutOffPosition = NSMakeRange(rangeSpace.location+1,0); // +1, i.e. always cut off AFTER the space
    }  else {
        // i.e. if the return char is the lowest char where you can cut off
        rangeCutOffPosition = NSMakeRange(rangeReturn.location+1,0); // +1, i.e. always cut off AFTER the return
    }

    return rangeCutOffPosition;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T14:22:34.953

他们最新的[sdk 1.2.4](https://testflightapp.com/sdk/download/)解决了这个问题！

# sql - 将 3 个 SQL 查询加入一个结果集

> ID：12280496
> 
> 赞同：1
> 
> 时间：2012-09-05T11:32:55.047
> 
> 标签：sql, join

这是 3 个查询，重要的是所有三个查询都基于日期范围，并且需要将 qry 1 assestnumber 与 snissued 和 snredeemed 匹配。提前致谢

```
select 
    assetnumber, sum(mocalc),sum(micalc), sum(cocalc),sum(cicalc)
from 
    drops
where  
    dropdate > '09/01/2012' 
    and dropdate < dateadd(hour,-0,getdate())
group by 
    assetnumber

select 
    snissued,sum(amount) 
from 
    tickets
where  
    dateissued > '09/01/2012' 
    and dateissued < dateadd(hour,-0,getdate())
group by 
    snissued

select 
    snredeemed,sum(amount) 
from 
    tickets
where  
    dateredeemed > '09/01/2012' 
    and dateredeemed < dateadd(hour,-0,getdate())
group by 
    snredeemed 
```

在第一个中，我总结了我正在使用的 4 个文件，并按指定日期范围内的资产编号分组

第二，我从另一个表格中提取日期范围内已签发的金额总和第三，我从另一个表格中提取日期范围内的金额总和

对于输出，我想要第一个表，然后是 2 个额外的列 snissued（总金额）和 snredeemed（总金额）

这是当前输出

```
qry 1
0-2459-36182    843 869 14  40
0-2621-31924    64700   86900   3000    25200
0-2739-41401    5702    5738    204 236 
```

求 2

```
0-2459-36182    162800
0-2621-31924    145000
0-2739-41401    298200 
```

求 3

```
0-2459-36182    157200
0-2621-31924    157800
0-2739-41401    292800 
```

这是我想要的结果

```
0-2459-36182    843     869     14      40     162800  157200  
0-2621-31924    64700   86900   3000    25200  145000  157800
0-2739-41401    5702    5738    204     236    298200  292800 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:36:54.147

```
select 
    q1.*, snissuedsum, snredeemedsum
from
(
    select assetnumber, sum(mocalc) q11,sum(micalc) q12, sum(cocalc) q13,sum(cicalc) q14
    from drops 
    where  dropdate > '09/01/2012' 
    and dropdate < dateadd(hour,-0,getdate()) 
    group by assetnumber 
) q1
left join
(
    select snissued,sum(amount) snissuedsum 
    from tickets 
    where  dateissued > '09/01/2012' 
    and dateissued < dateadd(hour,-0,getdate()) 
    group by snissued 
) q2
  on q1.assetnumber = q2.snissued
  left join
(     
    select snredeemed,sum(amount) snredeemedsum
    from tickets 
    where  dateredeemed > '09/01/2012' 
    and dateredeemed < dateadd(hour,-0,getdate()) 
    group by snredeemed 
) q3
  on q1.assetnumber = q3.snredeemed 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:50:23.543

据我所知，您并没有像其他人建议的那样寻找 UNION，而是需要 3 行才能有 2 个额外的列显示每个资产编号的 snissued 和 snredeemed。那是对的吗？如果是这样，请在所有 3 上进行左连接，类似于：

```
select DRPS.assetnumber, DRPS.MOCALCSUM,DRPS.MICALCSUM,
    DRPS.COCALCSUM,DRPS.CICALCSUM,ISSUED.TotalIssued,REDEEMED.TotalRedeemed
from (select assetnumber, sum(mocalc) AS [MOCALCSUM],sum(micalc) AS [MICALCSUM],
        sum(cocalc) AS [COCALCSUM],sum(cicalc) AS [CICALCSUM]
        from drops
        where  dropdate > '09/01/2012' and dropdate < dateadd(hour,-0,getdate())
        group by assetnumber) AS DRPS
LEFT JOIN (select snissued,sum(amount) AS [TotalIssued] from tickets
    where  dateissued > '09/01/2012' and dateissued < dateadd(hour,-0,getdate())
    group by snissued) AS ISSUED
    ON DRPS.assetnumber=ISSUED.snissued
LEFT JOIN (select snredeemed,sum(amount) AS [TotalRedeemed] from tickets
    where  dateredeemed > '09/01/2012' and dateredeemed < dateadd(hour,-0,getdate())
    group by snredeemed) AS REDEEMED
    ON DRPS.assetnumber=REDEEMED.snredeemed 
```

希望是对的！发布任何错误，我会更正。

# wpf - 如何在 WPF 中为 Model3D 设置不透明度？

> ID：12280498
> 
> 赞同：2
> 
> 时间：2012-09-05T11:33:01.910
> 
> 标签：wpf, 3d, opacity

除了遍历所有材质并设置画笔的不透明度之外，有没有办法在 WPF 中为 Model3D 设置不透明度？

遍历所有材质并设置画笔的不透明度似乎只在部分时间起作用。

谢谢

# iphone - 在 iphone 应用程序中归档颜色效果

> ID：12280504
> 
> 赞同：1
> 
> 时间：2012-09-05T11:33:19.073
> 
> 标签：iphone, ipad, core-animation, core-graphics

我正在尝试制作一个“感觉应用程序”，它有一个图像，它的颜色会改变到用户触摸它的那个位置。我`UIPanGestureRecognizer`为此实施并找到了触摸，但无法更改图像特定部分的颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:05:19.537

试试这个代码块....

您想要更改颜色意味着更改 stokeColor 并且您想要更改画笔的大小意味着查看注释行

```
#pragma mark touches stuff...

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    lastTouch = [touch locationInView:imageView];

   }

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    currentTouch = [touch locationInView:imageView];

    CGColorRef strokeColor = [UIColor brownColor].CGColor;
    UIGraphicsBeginImageContext(imageView.frame.size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    [imageView.image drawInRect:CGRectMake(0, 0, imageView.frame.size.width, imageView.frame.size.height)];
    CGContextSetLineCap(context, kCGLineCapRound);
    CGContextSetLineWidth(context, 10);  // u can change the brush size here

       CGContextSetStrokeColorWithColor(context, strokeColor); // u need to change this to required color

            CGContextSetBlendMode(context,kCGBlendModeDarken ); // try the various blend modes

    CGContextBeginPath(context);
    CGContextMoveToPoint(context, lastTouch.x, lastTouch.y);
    CGContextAddLineToPoint(context, currentTouch.x, currentTouch.y);
    CGContextStrokePath(context);
    imageView.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    lastTouch = [touch locationInView:imageView];
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    lastTouch = [touch locationInView:imageView];
} 
```

我希望这能帮到您...

# extjs - EXTJS：滚动问题

> ID：12280509
> 
> 赞同：0
> 
> 时间：2012-09-05T11:33:40.017
> 
> 标签：extjs

当数据在网格中加载并出现滚动时，我可以通过向上/向下箭头键导航它。但是当指针向下看不到网格中的内容时，我的意思是网格不会自动向上移动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:45:37.927

看起来您的网格未正确渲染。从您的描述来看，您的网格比它所属的面板大。请发布一些代码和屏幕截图。

# ios - 在uitableview中设置背景

> ID：12280510
> 
> 赞同：0
> 
> 时间：2012-09-05T11:33:45.393
> 
> 标签：ios, xcode, uitableview, uiimageview

好吧，我有一个表格视图，我想设置背景。

我试过这个：

```
self.mapMain.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"maptest.png"]]; 
```

还有这个：

```
NSString *backgroundPath = [[NSBundle mainBundle] pathForResource:@"maptest" ofType:@"png"];
UIImage *backgroundImage = [UIImage imageWithContentsOfFile:backgroundPath];
UIColor *backgroundColor = [[UIColor alloc] initWithPatternImage:backgroundImage];
self.mapMain.backgroundColor = backgroundColor;
[backgroundColor release]; 
```

但问题是这样的：我可以看到图像，但就像它在每个单元格中重复一样。如果我在列表之后滚动，我可以看到图像的其余部分。我想要的是图像是静态的，而不是在每个单元格中重复。所以图像是iphone屏幕的高度，每个单元格高度是80。

我也尝试在我的视图控制器中插入一个 UIImageview，然后做了，`Edit>Arrange>send to Back`但发送到后面是不可点击的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:39:16.687

在 viewDidLoad 中试试这个

```
[self.tableView setBackgroundView:[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"maptest"]]]; 
```

# php - 从数据源请求数据表中第 0 行的未知参数“1”

> ID：12280513
> 
> 赞同：5
> 
> 时间：2012-09-05T11:34:01.347
> 
> 标签：php, codeigniter-2, jquery-datatables

当我尝试将数据从我的数据库检索到表中时，我收到此错误：

```
DataTables warning (table id = 'student_table'): Requested unknown 
parameter '1' from the data source for row 0 
```

下面是我使用的javascript

```
<script type="text/javascript" charset="utf-8">
$(document).ready(function() {
    $('#student_table').dataTable( {
        "bProcessing": true,
        "bServerSide": true,
        "sServerMethod": "POST",
        "sAjaxSource": "<?php echo base_url()?>index.php/data/all"
    } );            
} );
</script> 
```

检索到的 JSON 数据：

```
{"sEcho":0,"iTotalRecords":3,
"iTotalDisplayRecords":3,
"aaData":[["85","t1","1D"],["74","test475","4A"],
["777","maiz","5"]],"sColumns":"id,name,class"} 
```

下面是我的表：

```
<table class="datatable tables" id="student_table">
    <thead>
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Class</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="dataTables_empty">Loading data from server</td>
        </tr>
    </tbody>
</table> 
```

PHP 代码（点燃的数据表）

```
$this->load->library('datatables');

$this->datatables->select('admission,name,class');
$this->datatables->from('students');
echo $this->datatables->generate(); 
```

我正在使用 codeigniter 和 DataTables。

为什么会出现该错误以及如何将数据检索到表中？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-02T07:22:20.390

我也有同样的问题。问题在这里：

```
<tr>
          <td class="dataTables_empty">Loading data from server</td>
</tr> 
```

您有三个`<TH>`但只有一个`<td>` 添加两个`<td>`将修复您的错误。还有一件事，如果没有数据可用，它将自动显示消息，您不需要显示消息。在这种情况下，您可以删除它，因为它会自动完成：

```
<tr>
          <td class="dataTables_empty">Loading data from server</td>
</tr> 
```

为了自定义消息，将此作为选项传递`"sEmptyTable": "Loading data from server"`

```
$('.datatable ).dataTable({
  "bFilter": false,
   "bPaginate": false,
   "bLengthChange": false,
   "bInfo": false,
   "oLanguage": {
    "sEmptyTable": '',
    "sInfoEmpty": ''
   },
   "sEmptyTable": "Loading data from server"
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T11:45:25.237

您正在使用 POST 方法来获取数据。如果您按照 php 提供的[datatables](http://datatables.net)示例进行操作，则使用 GET 方法。我假设当您使用排序或搜索时，所有请求都是 GET。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T06:39:23.490

几个想法可能会有所帮助......

1.  确保来自服务器的响应格式正确，带有正确的标头。例如 [https://stackoverflow.com/a/4064468/661584](https://stackoverflow.com/a/4064468/661584)我自己不确定点火器/php，但可能是个问题。

2.  不确定 sColumns 参数本身是否正确，认为这是为了在客户端重新排序 cols ......并且仅与 sName 一起使用，请参阅 [http://datatables.net/usage/columns#sName](http://datatables.net/usage/columns#sName) 和 [http://datatables.net /用法/服务器端](http://datatables.net/usage/server-side)

所以这可能会搞砸。

3.  如果它是别的东西，也许看看[这里](https://stackoverflow.com/a/12985883/661584)的答案......可能会有所帮助。

祝你好运

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T12:52:57.270

我们遇到了类似的问题...

但是，在你发疯之前 - 检查表中的数据。在我们的例子中，我们的数据在填充表格的数据中使用了超链接和花引号——当从 CSV 文件上传数据时，这些引号和花引号被去掉了。简短的故事是 IE 无法处理它，但 Chrome 和 Firefox 忽略了它。

# makefile - makefile 和 CMakeList 之间的主要区别是什么

> ID：12280515
> 
> 赞同：5
> 
> 时间：2012-09-05T11:34:06.573
> 
> 标签：makefile, cmake

我搜索了 makefile 和 CMakeLists 之间的主要区别，但发现了一些微弱的区别，例如 CMake 自动依赖解析而 Make 是手动的。

我正在寻求重大差异，我迁移到 CMake 有哪些优点和缺点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-06T08:02:59.593

您可以将 CMake 与[Autotools](http://en.wikipedia.org/wiki/GNU_build_system)进行比较。这更有意义！如果你这样做，那么你会发现 make 的缺点是创建 Autotools 的原因，以及 CMake 相对于 make 的明显优势。

> Autoconf 解决了一个重要问题——可靠地发现特定于系统的构建和运行时信息——但这只是便携式软件开发难题的一部分。为此，GNU 项目开发了一套集成实用程序来完成 Autoconf 开始的工作：GNU 构建系统，其最重要的组件是 Autoconf、Automake 和 Libtool。

Make不能那样做。反正不是开箱即用。你可以让它做到这一点，但跨平台维护它需要很多时间。

CMake 解决了相同的问题（以及更多问题），但与 GNU 构建系统相比具有一些优势。

1.  用于编写 CMakeLists.txt 文件的语言可读且易于理解。
2.  它不仅仅依赖 make 来构建项目。它支持多种生成器，如 Visual Studio、Xcode、Eclipse 等。

将 CMake 与 make 进行比较时，使用 CMake 有更多优点：

1.  系统库的跨平台发现。
2.  工具链的自动发现和配置。
3.  以与平台无关的方式更容易将文件编译到共享库中，并且通常比 make 更易于使用。

总体而言，与 make 相比，CMake 显然是首选，但您应该注意一些事项。

*   CMake 不仅仅是制作，因此它可以更复杂。从长远来看，学习如何使用它是值得的，但如果你只有一个平台上的小项目，那么也许 make 可以做得更好。
*   CMake 的文档起初看起来很简洁。那里有教程，但是要涵盖很多方面，而且它们在涵盖所有方面做得并不好。所以你会发现大部分只是介绍性的东西。您必须从文档和实际示例中找出其余部分：有很多使用 CMake 的开源项目，因此您可以研究它们。

# asp.net - 根据 JSON 内容动态选择类型

> ID：12280517
> 
> 赞同：0
> 
> 时间：2012-09-05T11:34:18.480
> 
> 标签：asp.net, asp.net-mvc, json, dynamic, deserialization

在 ASP.NET MVC 4 应用程序中，我从包含“字段”数组的外部服务器获得 JSON 响应。每个字段都有一个单独的类型，并包含该类型值的数组。

我想将该 JSON 反序列化为 DynamicObject 以便我可以访问单个值属性，或者我需要某种子类选择器来决定需要从“ValueBase”类派生的哪个类来访问不同的单个值对象的属性。

我希望你明白我的意思……这有点复杂。

我已经尝试将其反序列化为 DynamicObject（即从 DynamicObject 派生的类）。但是当我在视图中访问该对象的动态属性时收到错误消息，我想显示的属性不存在。

那么，从 DynamicObject 派生的类如何必须接受并授予对 JSON 代码提供的各个不同“值”属性的访问权限？

如果这是不可能的或错误的方法，我将如何实现一个合适的类型选择器类？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:41:45.997

我自己有点解决了。

我没有将返回的 JSON 对象（更准确地说是 JSON 数组）直接转换为特定的类，而是将其作为*动态*对象获取，并将其提供给包含另一个类的实例集合的类的构造函数，该对象实际上应该是（无论如何我都会从网络服务返回一个 JSON 数组）。在集合类的构造函数中，我根据 JSON 对象的值来决定新对象将是哪个继承类，并将其放入集合中。是的，我不知何故走那条路，但它有效。

看起来像这样：

```
public CollectionClass(dynamic dyn)
{
  foreach(var item in dyn.items) {
    switch((string)item.external_id) { // might have used a Dictionary instead but...
      case "member":
        this._collection.Add(new Member(item));
        break;
      case "date":
        this._collection.Add(new Date(item));
        break;
      default: break;
    }
  }
} 
```

成员类本身包含一个类似的构造函数，它也需要一个*动态*参数。它还根据*item*内部的值“建立自己” 。

如果有任何更简单的方法或实现这一目标的“皇家之路”，我将不胜感激任何进一步的建议。

# php - 将 onclick 事件应用于选项

> ID：12280529
> 
> 赞同：0
> 
> 时间：2012-09-05T11:35:06.393
> 
> 标签：php, zend-framework, onclick, mootools, zend-form

我正在使用 zend 表单来创建表单。我也在为 javascript 使用 mootools。

```
$this->addElement('radio', 'alone', array(
    'label' => 'Are you going to be taking part with anyone else?',
    'required' => true,
    'onClick' => 'showFields();',
    'multiOptions' => array(
        'yes' => 'Yes',
        'no' => 'No'
    ))
); 
```

目前，如果选择了任何选项，onclick 事件就会起作用。我如何让它工作只是被选中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:40:01.337

你可以试试这个...

```
$this->addElement('radio', 'alone', array(
    'label' => 'Are you going to be taking part with anyone else?',
    'required' => true,
    'onClick' => 'showFields(this);',
    'multiOptions' => array(
        'yes' => 'Yes',
        'no' => 'No'
    ))
); 
```

在你的功能中......

```
function showFields(elem)
{
    if(elem.value != 'yes')
        return false;

    // rest of the code
} 
```

# java - 当我们的 jar 附带的类被添加到 Java 标准库时会发生什么？

> ID：12280533
> 
> 赞同：4
> 
> 时间：2012-09-05T11:35:16.313
> 
> 标签：java, time, compatibility, java-8, jsr310

我目前正在考虑将 JSR-310 的一小部分添加`javax.time.Duration`到我们的库中。

目前这工作得很好。

但是 JSR-310 计划集成到 Java 8 中！在 Java 8 上执行我们的应用程序时，如果`javax.time.Duration`标准库中同时存在一个类，并且我们的 jar 文件附带了同一个类，会发生什么情况？

其中一个课程会被默默忽略吗？（哪一个？）当 Java 8 VM 尝试从我们的库中加载类时会出错吗？

我需要注意任何兼容性问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T11:39:11.267

JVM 遵循类路径来确定要加载的类。如果有多个，后面的类将被忽略。

对于 JVM 本身包含的类，这些是在类路径之前搜索的引导类路径的一部分。

除非 API 发生重大变化，否则您不应该注意到差异，并且您的额外 JAR 将在 Java 8 中有效地被忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:27:51.967

现在可以澄清这个问题。

JDK1.8 类将位于`java.time`命名空间中，并且不能被覆盖（因为它们深入Java 的核心）。

有一个[backport 项目](https://github.com/ThreeTen/threetenbp)可用，它允许在 JDK1.7 上使用非常相似的 API。那使用`org.threeten.bp`命名空间。这个想法是，向前推进到 JDK1.8 将只需要在大多数情况下重命名包。

`javax.time`名称空间不再使用。

# jquery - Jquery Selector 选择具有某些标题的类的 div

> ID：12280534
> 
> 赞同：0
> 
> 时间：2012-09-05T11:35:19.947
> 
> 标签：jquery

我想隐藏一个标题包含 (0%) 的类图表的 div

例如我有 5 个 div

```
<div class="charts" title ="book1 (0%)" ></div>

<div class="charts" title ="book2 (10%)" ></div>

<div class="charts" title ="book3 (20%)" ></div>

<div class="charts" title ="book4 (0%)" ></div>

<div class="charts" title ="book5 (0%)" ></div> 
```

我正在用 jquery 做，但没有运气

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T11:37:10.650

```
$('div.charts[title*="(0%)"]').hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:38:19.487

您可以使用 jQuery 的[属性等于](http://api.jquery.com/attribute-equals-selector/)选择器：

```
$('.charts[title*="(0%)"]').hide(); 
```

# asp.net - 从 .cs 文件重定向到 ASPX 文件

> ID：12280543
> 
> 赞同：0
> 
> 时间：2012-09-05T11:35:43.727
> 
> 标签：asp.net, web, httpresponse

在 asp.net 网站上，在 WebForm 上，在按钮 onclick 事件之后，我正在调用代码后面的方法，如下所示

```
 protected void Button1_Click(object sender, EventArgs e)
 {
     MyClass obj = new MyClass();
     String res = obj.CallMe("some parameters");
 } 
```

MyClass 位于**MyClass.cs**文件中的位置。**CallMe()**内部：

```
public String CallMe("some parameters")
{
   String to_return ="";
   //some code : to_return="something";
   string page_name= // some code returns a name of page to redirect to
   if(page_name is null)
   { return to_return; }
   else
      //redirect to page_name;
} 
```

由于我们无权访问 HttpResponse 对象，如何从 .cs 文件重定向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:43:38.103

如果从网页中调用您的类，您可以访问`HttpContext.Current`该类中的静态实例。只需导入 System.Web 命名空间并正常调用：

```
using System.Web;
System.Diagnostics.Debug.WriteLine(HttpContext.Current.Timestamp.ToString());
HttpContext.Current.Response.Redirect("http://www.google.com"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T11:49:04.757

试试这个

```
if(HttpContext.Current != null)
     HttpContext.Current.Response.Redirect("~"); 
```

使用 HttpContext 您可以获得当前的请求、响应等。但是请注意始终检查以确保当前上下文不为空，尤其是当您从业务层类调用时。

[ASP.Net 论坛](http://forums.asp.net/t/1666153.aspx)

# c# - 自定义设置提供程序中断设计器

> ID：12280550
> 
> 赞同：0
> 
> 时间：2012-09-05T11:36:02.443
> 
> 标签：c#, winforms, visual-studio-2012, windows-forms-designer

在项目中的每个表单设计器上都出现此错误。我刚刚添加了 RegistrySettingsProvider.cs，这开始发生了。应用程序工作得很好，没有任何错误、警告。

问题很奇怪。当我进行更改时它没有发生，但是当我重新启动 Visual Studio 2012 时它开始出现。

找到了类似的线程[http://social.msdn.microsoft.com/Forums/en-US/vbide/thread/f72f7629-19e3-4ce8-bff7-64a08b114b26/](http://social.msdn.microsoft.com/Forums/en-US/vbide/thread/f72f7629-19e3-4ce8-bff7-64a08b114b26/) 但没有解决方案。

```
at Microsoft.VisualStudio.Design.VSTypeResolutionService.System.ComponentModel.Design.ITypeResolutionService.GetType(String typeName, Boolean throwOnError, Boolean ignoreCase)
at Microsoft.VisualStudio.Design.VSTypeResolutionService.System.ComponentModel.Design.ITypeResolutionService.GetType(String name, Boolean throwOnError)
at Microsoft.VisualStudio.Shell.Design.VirtualTypeBuilder.ExecuteExpression(Resolver resolver, CodeExpression expression)
at Microsoft.VisualStudio.Shell.Design.VirtualTypeBuilder.FillAttributes(Resolver resolver, CodeTypeMember member, Attribute[]& customAttributes, MemberAttributes& memberAttributes)
at Microsoft.VisualStudio.Shell.Design.VirtualTypeBuilder.InitializeFromType(ITypeResolutionService typeResolutionService, CodeTypeDeclaration typeDecl, String namespaceName)
at Microsoft.VisualStudio.Shell.Design.VirtualTypeBuilder.InitializeFromType(ITypeResolutionService typeResolutionService, CodeNamespace ns)
at Microsoft.VisualStudio.Editors.SettingsGlobalObjects.SettingsFileGlobalObject.BuildType()
at Microsoft.VisualStudio.Editors.SettingsGlobalObjects.SettingsFileGlobalObject.GetObjectType()
at Microsoft.VisualStudio.Shell.Design.GlobalType.get_ObjectType()
at Microsoft.VisualStudio.Shell.Design.GlobalObject.GetHashCode()
at System.Collections.Generic.ObjectEqualityComparer`1.GetHashCode(T obj)
at System.Collections.Generic.Dictionary`2.Insert(TKey key, TValue value, Boolean add)
at Microsoft.VisualStudio.Shell.Design.GlobalObjectService.TrackGlobal(GlobalObjectProvider p, GlobalType g)
at Microsoft.VisualStudio.Shell.Design.GlobalObjectService.GetGlobalObjects(Type baseType)
at Microsoft.VisualStudio.Design.Serialization.CodeDom.AggregateTypeResolutionService.GetTypeFromGlobalObjects(String name, Boolean throwOnError, Boolean ignoreCase)
at Microsoft.VisualStudio.Design.Serialization.CodeDom.AggregateTypeResolutionService.GetType(String name, Boolean throwOnError, Boolean ignoreCase)
at Microsoft.VisualStudio.Design.Serialization.CodeDom.AggregateTypeResolutionService.GetType(String name)
at System.ComponentModel.Design.DesignerHost.System.ComponentModel.Design.IDesignerHost.GetType(String typeName)
at Microsoft.VisualStudio.Design.VSDesignSurface.EnsureExtensions(IComponent component)
at Microsoft.VisualStudio.Design.VSDesignSurface.CreateInstance(Type type)
at System.ComponentModel.Design.DesignerHost.System.ComponentModel.Design.IDesignerHost.CreateComponent(Type componentType, String name)
at System.ComponentModel.Design.Serialization.DesignerSerializationManager.CreateInstance(Type type, ICollection arguments, String name, Boolean addToContainer)
at System.ComponentModel.Design.Serialization.DesignerSerializationManager.System.ComponentModel.Design.Serialization.IDesignerSerializationManager.CreateInstance(Type type, ICollection arguments, String name, Boolean addToContainer)
at System.ComponentModel.Design.Serialization.TypeCodeDomSerializer.Deserialize(IDesignerSerializationManager manager, CodeTypeDeclaration declaration)
at System.ComponentModel.Design.Serialization.CodeDomDesignerLoader.PerformLoad(IDesignerSerializationManager manager)
at Microsoft.VisualStudio.Design.Serialization.CodeDom.VSCodeDomDesignerLoader.PerformLoad(IDesignerSerializationManager serializationManager)
at Microsoft.VisualStudio.Design.Serialization.CodeDom.VSCodeDomDesignerLoader.DeferredLoadHandler.Microsoft.VisualStudio.TextManager.Interop.IVsTextBufferDataEvents.OnLoadCompleted(Int32 fReload) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:54:55.163

通过在主窗体中的 IntializeComponent 方法之后在运行时设置提供程序解决了我的问题。

```
public FormMain()
{
    InitializeComponent();
    var registrySettingsProvider = new RegistrySettingsProvider();
    Settings.Default.Providers.Add(registrySettingsProvider);
    foreach (SettingsProperty property in Settings.Default.Properties)
    {
        property.Provider = registrySettingsProvider;
    }
} 
```

并确保覆盖 Settings Provider 中的 Name 属性。

```
public override string Name
{
    get { return "RegistrySettingsProvider"; }
} 
```

# opencv - 如何用 LBP 性能评估 Adaboost？

> ID：12280551
> 
> 赞同：0
> 
> 时间：2012-09-05T11:36:03.317
> 
> 标签：opencv

我已经使用本地二进制模式生成了一个级联来进行对象识别。似乎评估检测率的工具是 opencv_performance.exe 但我发现它只适用于 haar cascades ？我的级联有什么问题吗？我需要更改格式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T12:33:23.530

您可以编写自己的评估器并使用与 opencv_performance 相同的指标。您需要更改加载级联的旧函数以及进行检测的函数（更改为 detectMultiScale），

另一个指标的建议是联合交集（IOU），它计算两个矩形（groundtruth rect 和检测到的rect）的重叠百分比。

伪代码将是：IOU = area(intersection(rect1,rect2)) / area(union(rect1,rect2)) 并与例如大于 0.5 进行比较。

看看这里：[http ://answers.opencv.org/question/117/performance-evaluation-for-detection/](http://answers.opencv.org/question/117/performance-evaluation-for-detection/)

# windows - 远程 linux 上的 Windows 公共 ssh 密钥

> ID：12280553
> 
> 赞同：0
> 
> 时间：2012-09-05T11:36:07.830
> 
> 标签：windows, linux, ssh, key

我在 Windows 7 上创建了公共 ssh 密钥，我想将它安装在远程 Debian 上。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:26:44.677

这里的这个问题是题外话，可能会移到[http://serverfault.com](http://serverfault.com)。

但是，将你的公钥复制到远程debian系统`scp`（我没有Windows机器，所以我会给你Linux指导，试着理解它们并根据你的操作系统修改它们）：

`scp /path/to/public/key.pub user@debian-server:~/.ssh/key.pub`

它将询问您的密码以登录，然后它将复制密钥并注销。使用 ssh 再次登录您的计算机并执行以下操作：

```
ssh user@debian-server
chmod 700 .ssh
cd .ssh
cat key.pub >> authorized_keys
chmod 600 authorized_keys
exit 
```

现在，如果在 debian 服务器上的 sshd_config 中启用了 RSA 身份验证方法，您应该能够在不发出密码的情况下远程登录。

注意：这`chmod`部分不是全球要求的，但有时文件和文件夹的错误权限会阻止您正确登录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T11:46:01.743

您必须将您的公钥存储`.ssh/authorized_keys`在您的 debian 机器上。

`openssh-server`如果已安装，您将在主目录中找到 .ssh 文件夹。

# c++ - 智能指针不够智能

> ID：12280558
> 
> 赞同：-9
> 
> 时间：2012-09-05T11:36:36.640
> 
> 标签：c++, smart-pointers

这是一个例子：

```
template<typename T>
struct smart { //Smart Pointer class
    smart();
    ~smart();
    smart(const smart& copy);
    T* target;
    int count;
};

struct atest {
    smart<atest> next;
};

void Garbage() {
    smart_ptr<atest> Test=smart<atest>(new atest);
//Test.count == 1
    Test->next=Test;
//Test.count == 2
//Test.target == Test->next.target
}
//Test.count == 1
//Test'll never be deleted! because it contains itself.

int main() {
    for (int i=0;i<10000000;i++) {
        Garbage();
    }
} 
```

有一个解决方法可以在方法结束`Test`后删除自己吗？`Garbage`这是另一个问题，智能指针中还有另一个漏洞吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:46:42.483

你的问题很模糊，但我认为这是关于循环引用，你应该使用“弱”智能指针以避免这种情况。[您可以在此处](http://www.codeproject.com/Articles/8394/Smart-Pointers-to-boost-your-code#Using%20weak_ptr%20to%20break%20cycles)阅读有关如何使用weak_ptr 打破循环的更多信息。

# objective-c - 如何在 iOS 中将图像裁剪为多边形？

> ID：12280561
> 
> 赞同：2
> 
> 时间：2012-09-05T11:36:43.070
> 
> 标签：objective-c, ios

我想将 UIImageview 上的图像裁剪成任何形状

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T17:30:45.907

您设置剪切路径，瞧：

```
// Load image thumbnail
    NSString *imageName = [self.picArray objectAtIndex:indexPath.row];
    UIImage *image = [UIImage imageNamed:imageName];        
    CGSize imageSize = image.size;
    CGRect imageRect = CGRectMake(0, 0, imageSize.width, imageSize.height);    

    UIGraphicsBeginImageContextWithOptions(imageSize, NO, 0.0);
    // Create the clipping path and add it
    UIBezierPath *path = [UIBezierPath bezierPathWithRoundedRect:imageRect cornerRadius:5.0f];
    [path addClip];
    [image drawInRect:imageRect];
    UIImage *roundedImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext(); 
```

这段代码加载一个图像并通过对矩形进行四舍五入创建路径，结果是最终图像已被裁剪，即圆角。RoundedImage 是结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:47:42.513

您可以使用`CGImageMask`.

Apple 的 QuartzDemo 的 QuartzMaskingView 类中有一个示例。

# javascript - Graphiti 中的形状是否有任何可调整大小的限制？

> ID：12280564
> 
> 赞同：0
> 
> 时间：2012-09-05T11:36:49.993
> 
> 标签：javascript, raphael, draw2d, graphiti-js

在 Graphiti 示例中：[拖放编辑策略](http://draw2d.org/graphiti/jsdoc/#!/example/edit_policy_constraint)

*   当我们拖动任何形状时，它会被拖动到我们定义的某个有限区域。

*   但是当我们要调整任何形状的大小时，它会在拖动限制之外调整大小（调整大小没有限制）。

有什么办法可以在一定程度上限制可调整大小的属性。

因为我们设置了它的拖动限制，但没有控制它的调整大小限制。可能有什么方法可以实现这一点。

如果有人知道，请告诉我。在此先感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:57:00.443

目前，调整大小没有限制。我尝试在下一个版本中实现这一点。

# android - html5 中的 hls 在 android chrome 浏览器中不起作用

> ID：12280567
> 
> 赞同：5
> 
> 时间：2012-09-05T11:36:58.027
> 
> 标签：android, html5-video, http-live-streaming

在“Android 手机的 chrome 浏览器”中播放视频时出现问题。

在那里我放置了 HTML5 视频标签并提供 m3u8 文件的链接作为视频标签的来源。但它不能在“Android 的 chrome 浏览器”中播放。

但是，如果我提供与浏览器相同的 m3u8 文件链接，则它会在 Android 的视频播放器中播放视频。

那么在 HTML5 video 标签中播放视频应该怎么做呢？

**注意：我已经用 Android 4.0.3 和 4.1 进行了检查**

提前致谢，

萨加尔乔希

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:50:39.790

我认为这取决于编码，通过查看服务器日志请求播放列表，但由于没有找到 webm 内容，因此没有播放任何内容。

这真的很不幸，因为股票浏览器用来播放 h264 视频就很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-01T21:16:41.327

我最终使用 video.js 的 VHS 来解决这个问题[https://github.com/videojs/http-streaming](https://github.com/videojs/http-streaming)。

就我而言，我使用的是 Android 的原生 HLS 支持不支持的碎片化 MP4。要解决此问题，您需要强制 VHS 覆盖本机支持：

```
<video id="player" class="video-js" width="360" height="640" controls playsinline muted preload="auto" poster="https://example.com/poster.jpg">
  <source src="https://example.com/stream.m3u8" type="application/x-mpegURL">
</video>

<script src="https://unpkg.com/video.js/dist/video.min.js"></script>
<script src="https://unpkg.com/@videojs/http-streaming/dist/videojs-http-streaming.min.js"></script>
<script>
  const player = videojs('player');
  player.play({
    overrideNative: true // <-- this fixes Android Chrome
  });
</script> 
```

我之前使用的是 hls.js，但片段 MP4 有几个问题。绝对推荐 video.js/VHS。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-10T08:11:34.517

hls 链接不能直接在 android chrome 上工作你需要一个 hls javascript 库才能让它工作，看看这段代码

```
<video id="my-video" style="width:640px height:480px;" controls>
                            <source src="{put your source link here}">
                        </video>
                    </div>
<script src="http://hlsbook.net/wp-content/examples/hls.min.js"></script>
<script>
  if ( Hls.isSupported() ) {
    var video = document.getElementById('my-video');
    var hls = new Hls();
    hls.loadSource('{put your source link here}');
    hls.attachMedia(video);
    hls.on(Hls.Events.MANIFEST_PARSED, function() {
      video.play();
    });
  }
</script> 
```

并记住源链接不适用于 android 平台，它仅适用于 ios-safari 平台，因为 ios-safari 平台不需要 hls javascript，因为 Safari 移动不支持媒体源扩展，因此不适用于 hls.js . 因此，对于 android，您需要在 hls.loadSource 的 script 标签中添加视频链接，它将适用于 android chrome。

# janrain - janrain 参与弹出模式窗口

> ID：12280570
> 
> 赞同：0
> 
> 时间：2012-09-05T11:37:02.430
> 
> 标签：janrain

janrain 参与 facebook 登录在弹出窗口中打开，如何使其在与模式窗口相同的窗口中打开。请帮助我。我的代码是这样的，

```
 janrain.settings.buttonBorderRadius = '2';
                    janrain.settings.buttonBackgroundStyle = 'gray';
                    janrain.settings.language = 'en';
                    janrain.settings.linkClass = 'janrainEngage'; 
```

我尝试添加它，`janrain.settings.flags='stay_in_window';`但它不起作用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T22:46:02.207

在页面上包含此 javascript 设置：

```
janrain.settings.popup = false; 
```

更多信息在这里：http: [//developers.janrain.com/documentation/widgets/social-sign-in-widget/social-sign-in-widget-api/settings/](http://developers.janrain.com/documentation/widgets/social-sign-in-widget/social-sign-in-widget-api/settings/)

# r - 如何删除包含某些列的“0”的行，同时保留 R 中剩余行的行 ID

> ID：12280571
> 
> 赞同：5
> 
> 时间：2012-09-05T11:37:03.957
> 
> 标签：r

我正在尝试解决它，但无法做到。我想删除所有具有 '0' 值的行，但保持剩余行的 ID 号完整。

```
ID  B   C   D
1_2 34  42  12
1_3 34  32  2
1_4 0   0   0
1_5 12  33  12 
```

输出应该是

```
ID  B   C   D
1_2 34  42  12
1_3 34  32  2
1_5 12  33  12 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T13:55:43.717

如果要删除 B、C 或 D 列包含 0 或 many 的行：

```
DF[apply(DF[c(2:4)],1,function(z) !any(z==0)),] 
```

或仅当所有列 B、C、D 包含 0 时：

```
DF[apply(DF[c(2:4)],1,function(z) any(z!=0)),] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:00:04.870

如果 tmp 是您的原始 data.frame 的名称，则以下工作：

```
tmp2 <- data.frame(Reduce(rbind,apply(tmp,1,function(x){if(any(x==0)){NULL}else{x}}))) 
```

# android - 哪个 android 选项卡支持带有 USB 主机功能的 v4L2？

> ID：12280574
> 
> 赞同：0
> 
> 时间：2012-09-05T11:37:10.443
> 
> 标签：android

我需要知道一些支持 V4L2 和主机功能的 android 平板电脑的名称。假设如果插入 USB 相机。任何人都可以命名任何具有这种功能的平板电脑吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T06:45:21.940

我已经测试了以下工作：

*   宏碁 A500 和 A501
*   三星 Galaxy Tab 10.1"（原版）
*   Evorea 7" 平板电脑
*   Ampe A10 四核 10.1" 平板电脑

我现在正在测试三星 Galaxy Tab 10.1 2，它似乎无法正常工作，但这可能是我正在使用的 USB 适配器的问题。

# javascript - 在页面显示之前加载 Javascript 警报

> ID：12280575
> 
> 赞同：7
> 
> 时间：2012-09-05T11:37:16.077
> 
> 标签：javascript, html, safari

在我的手机上，在 safari 中如果我转到具有`alert("Hello")`body onload 事件的默认页面，则会显示警报，并且我的默认页面在后台完全可见。如果我然后转到另一个站点，例如 bbc.co.uk，然后在地址栏中输入我的默认页面的网址，则警报会在后台显示 BBC 内容，就像在页面之前加载警报一样已加载。

一旦整个页面可见，我如何只显示消息。我读过它`window.onload`会等到所有内容都加载后才会触发警报，但我一定是出了点问题，因为行为没有改变。我也试过：

```
$(document).ready(function () {
    window.onload= alert('Test');
}); 
```

和

```
<meta http-equiv="Pragma" content="no-cache"/> 
```

以防它与缓存有关，但我认为这不是问题。有任何想法吗 ？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-05T11:41:42.870

您将对函数的引用传递给`window.onload`而不是实际调用。

尝试

```
window.onload = function(){
 alert('test');
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T11:40:49.247

如果您要显示警报框，请使用 window.onload 两者都没有意义，这里的代码可以正常工作

**window.onload**（即使在旧浏览器中也实现），当整个页面加载时触发

```
 window.onload = function(){  alert('test'); } 
```

**jQuery 提供 document.ready**，它将这些抽象出来，并在页面的 DOM 准备好时立即触发

```
$(document).ready(function () {     
 alert('Test');  
}); 
```

检查答案：[window.onload vs $(document).ready()](https://stackoverflow.com/questions/3698200/window-onload-vs-document-ready)

`window.onload`是内置的 Javascript 事件，但由于它的实现在浏览器（FF/IE6/IE8/Opera）之间存在*微妙的*怪癖，jQuery 提供了 document.ready，它将这些抽象出来，并在页面的 DOM 准备好后立即触发（doesn '不要等待图像等）。

`document.ready`是一个 jQuery 函数，包装并提供以下事件的*一致性：*

*   `document.ondomcontentready`/ `document.ondomcontentloaded`- 加载文档的 DOM 时触发的新事件（可能在加载图像等*之前的一段时间）；*再次，在 IE 和世界其他地方略有不同
*   和 window.onload （即使在旧浏览器中也可以实现），它会在整个页面加载（图像、样式等）时触发

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T11:41:32.370

```
$(window).load(function() {
      alert('Test');
}); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-09-28T17:51:47.143

```
<!DOCTYPE html>
<html>
<body onload="show_popup()">

<script>
function show_popup() {
    alert("Popup shows");
}
</script>

</body>
</html>
```

# r - 制作 3d 曲面

> ID：12280582
> 
> 赞同：3
> 
> 时间：2012-09-05T11:37:36.047
> 
> 标签：r, 3d, wolfram-mathematica, geometry-surface

我有数据`x`和`y`时间`z=z1, z=z2 and z=z3`。我想在 3d 图表上绘制数据并用 3d 曲面近似曲线并了解曲面方程。这会更容易在 R 或 Mathematica 上实现吗？例如，我怎样才能在 R 中做到这一点？谢谢

数据（示例）：

```
For z=0
y   0.00    1.50    1.92    2.24
x   0.0000  0.0537  0.0979  0.2492

For z=2
y   0.00    2.21    2.83    3.07
x   0.0000  0.0173  0.0332  0.0655

For z=5
y   0.00    0.29    2.49    3.56
x   0.0000  0.0052  0.0188  0.0380 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T13:04:15.517

在数学中：

假设你有一组点 qt：

```
ListPointPlot3D[qt] 
```

![数学图形](../Images/61f30854ed11bd5ba47e6f9c61bb4c62.png)

您可以轻松构建插值函数：

```
Plot3D[Interpolation[qt][x, y], {x, -2, 2}, {y, -2, 2}, Ealuated -> True] 
```

![数学图形](../Images/45ccc6facb334bffd1477f96b6d03d1a.png)

如果你需要一个显式的函数模型，你可以提出一个并计算它的参数：

```
model = a x^2 + b y^2;
fit = FindFit[qt, model, {a, b}, {x, y}];
Show[Plot3D[model /. fit, {x, -2, 2}, {y, -2, 2}, PlotRange -> All], 
     ListPointPlot3D[qt, PlotStyle -> Directive[PointSize[Medium], Red]]] 
```

![数学图形](../Images/b773ca12a37df1ae73edf1425f56d298.png)

**编辑**

绘制漂亮的图表相当容易：

![数学图形](../Images/52419b6769db63f870044c1d797171ba.png)

# android - 当我在“drawable”文件夹中加载图像时 - 具有不同的图像尺寸

> ID：12280586
> 
> 赞同：1
> 
> 时间：2012-09-05T11:38:00.953
> 
> 标签：android, drawable

面对这样的情况。当我在“drawable”文件夹中加载图像时 - 具有不同的图像尺寸。下载前**的图像以像素为单位大小相同**，以字节为单位大小不同

解释什么是错的以及如何对抗它？

![在此处输入图像描述](../Images/fb317bee6e0be6dff4e635eb63d6eaec.png)

```
if (menu_item.get_Item_Use() == true ) {

            imageView.setImageResource(R.drawable.ic_menu_arrow_icon);
        } else {    

            imageView.setImageResource(R.drawable.ic_menu_arrow_icon_pressed);

        } 
```

![在此处输入图像描述](../Images/3ce11edcc5c365435f1b9cf379e02a28.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:23:53.740

明白了，android从你下载它们的文件夹中获取第一张照片，然后是你复制的那些

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:24:58.380

看看你的截图：有一些奇怪的东西......

> drawable-hdpi -> ic_menu_arrow_icon_pressed.png

和

> drawable-xhdpi -> ic_menu_arrow_icon.png

这些drawable的图标看起来像快捷方式？？

# c++ - 在 C++ 中访问列表列表的元素

> ID：12280593
> 
> 赞同：7
> 
> 时间：2012-09-05T11:38:29.457
> 
> 标签：c++, stl, iterator, doubly-linked-list

我有一个这样的列表列表：

```
 std::list<std::list<double> > list; 
```

我在其中填充了一些带有双精度的列表（实际上很多，这就是我不使用向量的原因。所有这些复制都占用了很多时间。）

假设我想访问可以访问的元素，就像`list[3][3]`列表不是列表而是向量或二维数组一样。我该怎么做？

我知道访问列表中的元素是通过使用迭代器来完成的。我不知道如何摆脱双重。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T11:41:38.060

```
double item = *std::next(std::begin(*std::next(std::begin(list), 3)), 3); 
```

不过，使用向量通常会有更好的性能；访问列表的元素`n`是 O(n)。

如果您担心拼接容器内部的性能，您可以使用`deque`, 它具有`operator[]`，从两端摊销常量插入和删除，以及从内部线性时间插入和删除。

对于 C++03 编译器，您可以`begin`自己实现`next`：

```
template<typename Container>
typename Container::iterator begin(Container &container)
{
    return container.begin();
}
template<typename Container>
typename Container::const_iterator begin(const Container &container)
{
    return container.begin();
}
template<typename T, int n>
T *begin(T (&array)[n])
{
    return &array[0];
}

template<typename Iterator>
Iterator next(Iterator it, typename std::iterator_traits<Iterator>::difference_type n = 1)
{
    std::advance(it, n);
    return it;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:07:29.377

要严格回答您的问题，[Joachim Pileborg 的](https://stackoverflow.com/users/440558/joachim-pileborg)回答是要走的路：

```
std::list<std::list<double> >::iterator it = list.begin();
std::advance(it, 3);
std::list<double>::iterator it2 = (*it).begin();
std::advance(it2, 3);
double d = *it2; 
```

现在，根据您的问题和进一步的评论，尚不清楚您是始终将元素添加到列表的末尾还是可以将它们添加到任何地方。如果你总是添加到最后，`vector<double>`会更好。A`vector<T>`不需要在每次大小增加时都被复制；只有当它的*容量*增加时，这是一个非常不同的事情。

除此之外`reserve()`，正如其他人之前所说，使用 对重新分配有很大帮助。您不需要为所有向量的组合大小保留，而只需为每个单独的向量保留。所以：

```
std::vector<std::vector<double> > v;
v.reserve(512); // If you are inserting 400 vectors, with a little extra just in case 
```

而且你也会为每个`vector<double>`里面预留`v`。就这样。

考虑到您的列表将占用更多空间。对于`double`内部列表中的每个，它必须分配至少两个额外的指针，并且还必须为全局最少内的每个列表分配两个额外的指针。这意味着你的容器占用的总内存大约是向量的三倍。而所有这些分配和管理也需要额外的运行时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T11:45:57.930

要真正回答您的问题，您可能应该查看[`std::advance`](http://en.cppreference.com/w/cpp/iterator/advance).

# ios - 确定 iOS 设备上的 3G 功能

> ID：12280595
> 
> 赞同：0
> 
> 时间：2012-09-05T11:38:39.567
> 
> 标签：ios, 3g, reachability, cellular-network

我已经在互联网上搜索了一段时间，但我似乎无法确定运行应用程序的设备是否支持 3G 数据。

我不想看到它当前是否处于活动状态，这就是 Reachability 类所做的，我想知道设备是否具有 3G 硬件。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:49:09.840

您是否考虑过检测设备的类型？

如果是 iPhone 3G/3GS/4/4S 或带 3G 的 iPad，它就有 3G。否则没有。

也许这个库可以帮助你：[UIDevice Extension](https://github.com/erica/uidevice-extension)

我不确定它是否能告诉你 iPad 是否是 3G，但对于 iPhone/iPodTouch 来说它可能运行良好......

**编辑 ：**

您可以使用此代码获取设备类型：

```
[UIDevice currentDevice] platformType] 
```

或者直接获取 NSString ：

```
[[UIDevice currentDevice] platformString] 
```

# gps - 修改代码以在 GPS 中仅接收 RMC 输出

> ID：12280596
> 
> 赞同：0
> 
> 时间：2012-09-05T11:38:48.650
> 
> 标签：gps, nmea

我正在为我的应用程序使用 GPS 模块。我只想要 RMC 数据。那么我应该在我的代码中做什么才能只获取这些数据，即应该禁用所有其他格式，如 GGA、GSA、VTG。

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:08:11.830

您不能禁用其他消息，也没有理由这样做。一些 GPS 单元支持启用/禁用消息的命令，但它不是标准的。

只需`switch`在代码中的句子识别字段中使用一个语句，并`case`为`GPRMC`.

# java - 从java调用系统命令来保存日志文件

> ID：12280600
> 
> 赞同：0
> 
> 时间：2012-09-05T11:38:54.393
> 
> 标签：java, exception, redirect, logging, console

我在从 Java 调用系统命令时遇到问题。我尝试了以下方法：

```
if (!found) {
    dbContents += ";" + getPreviousValue(i, dbContents);

    try {
        String cmd = "echo \"Device " + headers[i] + " no data incoming at " + timeString + "\" >> /home/envir/11/log.txt";
        Runtime.getRuntime().exec(cmd);
        Console.out("N");
    }
    catch(IOException ioe) {
        System.out.println(ioe);
} 
```

问题是文件“log.txt”永远不会被创建。我检查了 if 子句是否曾经执行过，我可以看到该消息

```
Console.out("N"); 
```

确实出现了，所以我不知道为什么前两行代码没有。

这是打印“N”的证据： ![在此处输入图像描述](../Images/b47378e2f33455dcfd9ef3d17e65660b.png)

我必须说这是我第一次使用这种从 java 文件中调用系统命令的东西，所以这很可能是一个新手错误。

如果有人对此有答案，我将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:41:37.537

您的命令很可能失败。任何错误消息都会发送到您忽略的 Process.getErrorStream() ，因此您看不到它。

在您的情况下，如果您想做的所有事情都附加到日志文件中，那么最好的方法是使用 Java。它更快，更清洁，更有可能工作。

```
PrintWriter pw = new PrintWriter(new FileWriter("/home/envir/11/log.txt", true));
pw.println("Device " + headers[i] + " no data incoming at " + timeString);
pw.close(); 
```

问题可能是“echo”不是您系统上的程序。如果您正在运行一个 shell，它将具有仅在该 shell 运行时可用的命令。

BTW`>>`是一种只有 shell 才能理解的语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T11:48:43.063

也许您的文件未创建，因为未评估重定向（“>>”）。尝试像这样包装你的电话：

```
String cmd = "sh -c \"echo \\\"Device " + headers[i] + " no data incoming at " + timeString + "\\\" >> /home/envir/11/log.txt\""; 
```

无论如何，你为什么不使用类似 FileWritter 的东西？

# ruby-on-rails - Rails 模型返回 nil ID

> ID：12280603
> 
> 赞同：2
> 
> 时间：2012-09-05T11:39:03.200
> 
> 标签：ruby-on-rails, ruby

我需要获取某个对象的 id。这可能是我想念的非常简单的事情。我需要的对象来自数据库，我可以检索它的属性，但不能检索 id。

```
Part.where("code ='p8z68vprogen3'").first
# => <Part id: 486, code: "p8z68vprogen3", etc...>

Part.where("code ='p8z68vprogen3'").first.id
# => nil

Part.where("code ='p8z68vprogen3'").first.code
# => "p8z68vprogen3" 
```

这是模型：

```
class Part < ActiveRecord::Base
  has_many :build_parts
  has_many :builds, :through => :build_parts
  belongs_to :category
  attr_accessible :code,:link,:description,:category_id
end 
```

我想这与`attr_accessible`or相关`attr_accessor`，我试图摆弄它们但没有，所以我寻求帮助。

编辑：要求重新加载以任何方式返回错误我尝试获取对象（在哪里或 find_by_）

```
part_needed = Part.where("code ='p8z68vprogen3'").first
# => <Part id: 486, code: "p8z68vprogen3", etc..>

part_needed.reload
# ActiveRecord::RecordNotFound: Couldn't find Part without an ID 
```

此外，部件表已经填充，但这里是创建条目的代码：

```
part = Part.new(
    :description => objs[1],
    :code => objs[2],
    :category_id => tips[objs[3].to_i]
)
part.save! 
```

这段代码是在另一部分代码中执行的，而不是在我尝试获取 ID 之前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:11:49.723

重新启动您的机器。我知道这听起来不合逻辑。我遇到了一个问题，我有两个相同类的对象，第一个/最后一个方法返回最后一个对象。重新启动对我有用。（rails 3.1.1，ruby 1.9.2p320（2012-04-20 修订版 35421）[i686-linux]））

# iphone - 如何使用 UITextInputMode

> ID：12280606
> 
> 赞同：3
> 
> 时间：2012-09-05T11:39:12.477
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我需要创建一种检测键盘输入语言的方法。例如，当键盘语言是法语时做某事，而英语什么时候做其他事情

我在网上搜索找到了，`UITextInputMode` 但我不知道如何使用它，如果你能帮助我，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T11:42:10.160

这很简单，你可以这样做：

```
UITextInputMode *textInput = [UITextInputMode currentInputMode];
NSString *primaryLanguage = textInput.primaryLanguage;
NSLog(@"Current text input is: %@", primaryLanguage); 
```

如 Apple 文档中所述，*“此属性的值是 BCP 47 语言代码，例如“es”、“en-US”或“fr-CA”*。

如果您需要收到有关更改的通知，请将您的控制器添加为观察者`UITextInputCurrentInputModeDidChangeNotification`

# charts - JavaFX 2.x：使用 StackPane 对更多不同类型的图表进行分层

> ID：12280614
> 
> 赞同：1
> 
> 时间：2012-09-05T11:39:45.300
> 
> 标签：charts, javafx

有了这个建议，

[https://forums.oracle.com/forums/thread.jspa?threadID=2435573&tstart=0](https://forums.oracle.com/forums/thread.jspa?threadID=2435573&tstart=0)

我尝试使用 StackPane 但第二个图表替换了第一个。

如何在同一张图中绘制两个或多个不同的图表（如我的示例）？

这是我的代码

```
public class XyChartInSplitStackpane extends Application {
SplitPane               splitPane1 = null;
@Override
public void start(Stage stage) {
stage.setTitle("Line plot");

final CategoryAxis xAxis1 = new CategoryAxis();
final NumberAxis yAxis1 = new NumberAxis();

yAxis1.setTickUnit(1);
yAxis1.setPrefWidth(35);
yAxis1.setMinorTickCount(10);

yAxis1.setTickLabelFormatter(new NumberAxis.DefaultFormatter(yAxis1){
    @Override
public String toString(Number object){
        String label;
        label = String.format("%7.2f", object.floatValue());
        return label;
}
});
final BarChart<String, Number>barChart1 = new BarChart<String, Number>(xAxis1, yAxis1);

barChart1.setAlternativeRowFillVisible(false);
barChart1.setLegendVisible(false);
barChart1.setAnimated(false);

XYChart.Series series1 = new XYChart.Series();

series1.getData().add(new XYChart.Data("Jan", 1));
series1.getData().add(new XYChart.Data("Feb", 2));
series1.getData().add(new XYChart.Data("Mar", 1.5));
series1.getData().add(new XYChart.Data("Apr", 3));
series1.getData().add(new XYChart.Data("May", 2.5));
series1.getData().add(new XYChart.Data("Jun", 5));
series1.getData().add(new XYChart.Data("Jul", 4));
series1.getData().add(new XYChart.Data("Aug", 8));
series1.getData().add(new XYChart.Data("Sep", 6.5));
series1.getData().add(new XYChart.Data("Oct", 13));
series1.getData().add(new XYChart.Data("Nov", 10));
series1.getData().add(new XYChart.Data("Dec", 20));

barChart1.getData().addAll(series1); 

final CategoryAxis xAxis2 = new CategoryAxis();
final NumberAxis yAxis2 = new NumberAxis(1, 21,0.1);

yAxis2.setTickUnit(1);
yAxis2.setPrefWidth(35);
yAxis2.setMinorTickCount(10);

yAxis2.setTickLabelFormatter(new NumberAxis.DefaultFormatter(yAxis2){
    @Override
public String toString(Number object){
        String label;
        label = String.format("%7.2f", object.floatValue());
        return label;
}
});
final LineChart<String, Number>lineChart2 = new LineChart<String, Number>(xAxis2,  yAxis2);

lineChart2.setCreateSymbols(false);
lineChart2.setAlternativeRowFillVisible(false);
lineChart2.setLegendVisible(false);
lineChart2.setAnimated(false);

XYChart.Series series2 = new XYChart.Series();

series2.getData().add(new XYChart.Data("Jan", 2));
series2.getData().add(new XYChart.Data("Feb", 10));
series2.getData().add(new XYChart.Data("Mar", 8));
series2.getData().add(new XYChart.Data("Apr", 4));
series2.getData().add(new XYChart.Data("May", 7));
series2.getData().add(new XYChart.Data("Jun", 5));
series2.getData().add(new XYChart.Data("Jul", 4));
series2.getData().add(new XYChart.Data("Aug", 8));
series2.getData().add(new XYChart.Data("Sep", 16.5));
series2.getData().add(new XYChart.Data("Oct", 13.9));
series2.getData().add(new XYChart.Data("Nov", 17));
series2.getData().add(new XYChart.Data("Dec", 10));

Set<Node> nodes1 = barChart1.lookupAll(".series0");    
for (Node n: nodes1) {        
    n.setStyle("-fx-blend-mode:  src-over");        
}

lineChart2.getData().addAll(series2);
Set<Node> nodes2 = lineChart2.lookupAll(".series0");    
for (Node n: nodes2) {        
    n.setStyle("-fx-stroke: red; -fx-background-color: red, white; -fx-blend-mode: src-over; -fx-opacity: 0.5");
}    

splitPane1 = new SplitPane();   
StackPane stackpane = new StackPane();
stackpane.getChildren().add(barChart1);                
stackpane.getChildren().add(lineChart2);

splitPane1.setOrientation(Orientation.VERTICAL);
splitPane1.getItems().addAll(stackpane);    
splitPane1.setDividerPosition(0, 1);

Scene scene = new Scene(splitPane1, 800, 600);

stage.setScene(scene);
stage.show();
}

 public static void main(String[] args) {
launch(args);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T04:03:13.063

据我所见，您将其添加`series`到两个不同的图表中

IE。 `lineChart2.getData().addAll(series2);`&`barChart1.getData().addAll(series1);`

但是，如果这是有意为之，将其他数据添加到其中一个图表中，您只需使用：`barChart1.getData().addAll(series1, series2);`

# git - 如何从分支中获取一些提交并将这些提交与 git 中的另一个分支合并

> ID：12280615
> 
> 赞同：0
> 
> 时间：2012-09-05T11:39:45.947
> 
> 标签：git, branch

好的，我有以下情况。我有一个名为**develop**的分支。
从开发中，我创建了一个名为**AIOEC-393**的分支。
它包含以下提交：

> nicoladj77 重新安装 wordpress 938f469
> 
> nicoladj77 AIOEC-122：为 ai1ec_events 添加提要 2254569
> 
> nicoladj77 AIOEC-122：删除已解析的 css 文件 d10e29e
> 
> nicoladj77 AIOEC-122：向函数 38054dd 添加了注释
> 
> nicoladj77 AIOEC-393：开始移动文件 6f92360
> 
> nicoladj77 AIOEC-393 移动类并取出 require_once 调用 b7ab691
> 
> nicoladj77 AIOEC-393：开始移动基础容器 87e8b91
> 
> nicoladj77 AIOEC-393：按照建议移动了类并重构了一段时间我… … 1093032

我需要创建另一个基于**develop的分支，并且只包含****AIOEC-393**的最后四个提交（当然是以 AIOEC-393 开头的提交）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:41:17.520

`git cherry-pick`可以做到这一点。只需将要合并到当前分支的提交 ID 作为命令的参数提供。这将“挑选”提交，即使提交属于不同的分支。

或者，也应该起作用的是：

1.  克隆/签出分支
2.  回退一些提交（reset --hard commit_ID）
3.  Cherry-pick 你想要的提交

这避免了做一个变基。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T11:52:35.053

如果提交是您分支上的第一次提交，您可以简单地签出最后一次提交并在其位置创建一个新分支：

```
git checkout -b new_branch <id of "AIOEC-393: Starting to move files 6f92360"> 
```

如果在新分支中您想要的提交之前还有其他提交（您不想要），请创建一个新分支并将其变基：

```
git checkout -b new_branch <last commit you want>
git rebase --onto develop <commit before your commits> new_branch 
```

或者，创建一个分支`develop`并挑选您想要的提交：

```
git checkout -b new_branch develop
git cherry-pick <commit before your commits>..<last commit you want> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T12:58:01.683

我建议您使用`rebase onto`. 假设我们有以下回购：

```
user@HOST c:/_TEMP/FOO (AIOEC-393) $ git lga
* 8c2d5c5 - (HEAD, AIOEC-393) commit5 (Yanflea 2 minutes  ago)
* 3c20e52 - commit4 (Yanflea 2 minutes  ago)
* c5383af - commit3 (Yanflea 2 minutes  ago)
* fb11e98 - commit2 (Yanflea 2 minutes  ago)
* e019261 - (develop) commit1 (Yanflea 2 minutes  ago)
* 0cfe064 - (master) Initial commit (Yanflea 2 minutes ago) 
```

并且您希望获得`AIOEC-393`除*commit2*之外的分支的所有提交。

让我们移动到一个“临时”分支（这样`AIOEC-393`就不会被修改）：

```
$ git checkout -b develop-target 
```

然后使用*commit2*作为pivot的`rebase onto`命令：

 *```
$ git rebase --onto develop fb11e98 develop-target 
```

让我们看看日志：

```
user@HOST c:/_TEMP/FOO (develop-target) $ git lga
* 7bcb162 - (HEAD, develop-target) commit5 (Yanflea 2 minutes ago)
* 3c89459 - commit4 (Yanflea  2 minutes ago)
* e6ed5f7 - commit3 (Yanflea  2 minutes ago)
* e019261 - (develop) commit1 (Yanflea  2 minutes ago)
* 0cfe064 - (master) Initial commit (Yanflea  2 minutes ago) 
```

现在我们只需要快进 from `develop`to `develop-target`（然后 remove `develop-target`）：

```
$ git checkout develop
$ git rebase develop-target
$ git branch -d develop-target 
```

日志：

```
user@HOST c:/_TEMP/FOO (develop) $ git lga
* 7bcb162 - (HEAD, develop) commit5 (Yanflea 2 minutes ago)
* 3c89459 - commit4 (Yanflea 2 minutes ago)
* e6ed5f7 - commit3 (Yanflea 2 minutes ago)
* e019261 - commit1 (Yanflea 2 minutes ago)
* 0cfe064 - (master) Initial commit (Yanflea 2 minutes ago) 
```*

# sql-server - 这是根据列值左连接表的正确方法吗

> ID：12280617
> 
> 赞同：2
> 
> 时间：2012-09-05T11:39:50.427
> 
> 标签：sql-server, left-join

我需要一些关于左连接条件的帮助，我的查询如下

```
declare @emp table (id int, name varchar(100))
insert into @emp values (1,'Emp1')
insert into @emp values (2,'Emp2')
insert into @emp values (3,'Emp3')
insert into @emp values (4,'Emp4')
insert into @emp values (5,'Emp5')

--selecT * from @emp

declare @salary table(salaryid int, empid int, salary decimal(10,2))
insert into @Salary values (3,3,10000)
insert into @Salary values (4,4,15000)
insert into @Salary values (3,5,10000)

declare @oldsalary table(oldsalaryid int, empid int, oldsalary decimal(10,2))
insert into @oldsalary values (1,1,20000)
insert into @oldsalary values (2,2,25000)

--select * from @Salary
--select * from @oldsalary

declare @rating table (salaryid int, rating varchar(10))
insert into @rating values (4, 'D')
insert into @rating values (3, 'C')
insert into @rating values (1, 'B')
insert into @rating values (2, 'A')
--select * from @rating 

select e.id, e.name, isnull(os.oldsalary, s.salary) salary, r.rating from @emp e 
left join @salary s on e.id=s.empid
left join @oldsalary os on e.id=os.empid
left join @Rating r on r.salaryid = isnull(os.oldsalaryid, s.salaryid) 
```

这是输出

```
id  name    salary  rating
1   Emp1    20000   B
2   Emp2    25000   A
3   Emp3    10000   C
4   Emp4    15000   D
5   Emp5    10000   C 
```

从查询中可以看出，如果 oldsalaryid 为空，则使用 saleid 加入评级表。所以左连接完全基于列的值。这是正确的方法吗，通过查看数据，一切似乎都正确显示。我可以使用这个查询吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:42:00.710

您实际上告诉 SQL Server 要做的是从 @emp 表中返回所有值。然后，@salary 表中与@emp 表匹配的所有项目都被拉入。之后，@oldsalary 表中与@emp 表上的值匹配的所有值都被拉入。与@评级表。

我更喜欢这种只使用左连接而不是左连接和右连接组合的方法。它让阅读代码的人非常清楚地了解复合连接中的主要表是什么。因此，您不需要来回阅读语句的 FROM 部分。

# sparql - 一个使用 Jena ARQ 进行选择、描述和构造的 SPARQL 端点

> ID：12280622
> 
> 赞同：2
> 
> 时间：2012-09-05T11:40:16.977
> 
> 标签：sparql, jena, arq

我构建了一个简单的网页作为前端用户界面，供用户输入 sparql 查询。我使用 Jena ARQ 作为后端（我使用 Grails）sparql 查询引擎。目前，用户只能输入“选择”查询，我使用：

```
ResultSet results = qexec.execSelect(); 
```

执行查询并返回结果。但现在，我还希望用户从同一页面向后端发送 Describe 和 Construct 查询。正如在这个线程中讨论的那样：[Jena Sparql 和construct](https://stackoverflow.com/questions/2976809/jena-sparql-and-construct)，我们需要使用

```
Model results = qexec.execConstruct() 
```

在后端。所以我的问题是，在后端，我如何知道查询字符串是 Select 查询、Describe Query 还是 Construct 查询，以便我可以从 execSelect()、execDescribe() 或 execConstruct() 中进行选择？我需要为前端更改什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:21:56.173

[Query 类](http://jena.apache.org/documentation/javadoc/arq/com/hp/hpl/jena/query/Query.html)具有查找查询类型的方法：

```
if (qexec.getQuery().isSelectType()) {
    ResultSet results = qexec.execSelect();
    // ...
} else {
    Model results = qexec.execConstruct();
    // ...
} 
```

为了完整起见，您可能应该同时处理`DESCRIBE`和`ASK`。

# android - 在 Android 中使用 Spring RestTemplate 时出现 NullPointerException

> ID：12280629
> 
> 赞同：3
> 
> 时间：2012-09-05T11:41:09.830
> 
> 标签：android, spring, azure, nullpointerexception, resttemplate

我正在使用托管在 Windows Azure 上的 Spring 3 MVC 服务器，并使用它为用户提供通过 Web 浏览器和 Android 设备进行的交互。所有代码都是用 Java 编写的。

当我通过浏览器与服务器交互时，一切正常，当使用 Android 与服务器交互时，如果服务器作为 localhost 运行，它工作正常。但是，当我使用 Android 客户端与 Azure 托管服务器交互时，我随机（但总是最终）得到一个`NullPointerException`，所以有时代码运行良好但最终会出现。正是我得到`NullPointer`更改的地方，但它总是在 HTTP 调用期间使用`RestTemplate`.

另一个奇怪的事情是，在调试中运行 Android 应用程序时，代码将运行到代码中的某个任意点（仍然在`RestTemplate`调用时崩溃），但堆栈跟踪`NullPointerException`将指向之前进行的调用。

我为调用所做的一般代码类似于以下内容：

```
 private class ChangeDirectory extends AsyncTask< String, Void, Boolean >
{
    @Override
    protected Boolean doInBackground(String... directoryName) {

        RestTemplate restTemplate = new RestTemplate();
        restTemplate.getMessageConverters().add( new StringHttpMessageConverter() );

        String url = "http://" + Constants.DNS +"/ui/android/cloud/change_directory";

        restTemplate.put(url, 
                         directoryName[0]);
        return true;
    }
} 
```

堆栈跟踪如下所示：

```
09-05 11:32:05.081: E/AndroidRuntime(535): Caused by: java.lang.NullPointerException
09-05 11:32:05.081: E/AndroidRuntime(535):  at org.springframework.http.client.SimpleClientHttpResponse.getStatusCode(SimpleClientHttpResponse.java:62)
09-05 11:32:05.081: E/AndroidRuntime(535):  at org.springframework.web.client.DefaultResponseErrorHandler.hasError(DefaultResponseErrorHandler.java:46)
09-05 11:32:05.081: E/AndroidRuntime(535):  at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:476)
09-05 11:32:05.081: E/AndroidRuntime(535):  at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:438)
09-05 11:32:05.081: E/AndroidRuntime(535):  at org.springframework.web.client.RestTemplate.put(RestTemplate.java:364)
09-05 11:32:05.081: E/AndroidRuntime(535):  at com.artmaps.im.activity.HomeActivity$ChangeDirectory.doInBackground(HomeActivity.java:192)
09-05 11:32:05.081: E/AndroidRuntime(535):  at com.artmaps.im.activity.HomeActivity$ChangeDirectory.doInBackground(HomeActivity.java:1)
09-05 11:32:05.081: E/AndroidRuntime(535):  at android.os.AsyncTask$2.call(AsyncTask.java:264)
09-05 11:32:05.081: E/AndroidRuntime(535):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
09-05 11:32:05.081: E/AndroidRuntime(535):  ... 5 more 
```

指向`restTemplate.put(url, directoryName[0]);` 调用

我试过在服务器端放入语句，当这些`NullPointer`s 被抛出时，服务器似乎没有收到请求，因为没有达到语句。

任何有关原因的帮助`NullPointerException`将不胜感激，因为我对此感到非常困惑，尤其是有时它有效，有时却无效

[编辑：根据https://jira.springsource.org/browse/ANDROID-102](https://jira.springsource.org/browse/ANDROID-102)，在查看更多内容后，Android 框架的 Spring 中似乎存在一个错误

这有点帮助，但仍然不能解释为什么它有时会起作用，并且只会在与基于 Azure 的服务器交互时失败

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T10:30:55.650

以为我会发布我发现的内容，以防其他人陷入困境。事实证明，这与我在问题编辑中发布的错误有关。

我通过删除 Spring`RestTemplate`调用并改为使用`DefaultHttpClient`来解决这个问题。

例如改变这个：

```
RestTemplate restTemplate = new RestTemplate();
    restTemplate.getMessageConverters().add( new StringHttpMessageConverter() );

    String url = "http://" + Constants.DNS +"/ui/android/cloud/change_directory";

    restTemplate.put(url, 
                     directoryName[0]);
    return true; 
```

对此：

```
String url = "http://" + Constants.DNS +"/ui/android/cloud/change_directory";
        try {

            HttpClient client = new DefaultHttpClient();
            HttpPut putRequest = new HttpPut(url);
            putRequest.setEntity(new StringEntity(directoryName[0]));
            client.execute(putRequest);

        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:17:48.980

`ClientHttpRequestFactory`我在实现自定义扩展时遇到了同样的问题`SimpleClientHttpRequestFactory`。我也会得到随机的 NullPointerExceptions。

解决方案是扩展`HttpComponentsClientHttpRequestFactory`而不是`SimpleClientHttpRequestFactory`在方法中执行必要的逻辑`postProcessHttpRequest(HttpUriRequest httpRequest)`。

这是一个自定义`HttpComponentsClientHttpRequestFactory`访问和设置标题中的用户代理字段的快速示例：

```
public class CustomHTTPRequestFactory extends HttpComponentsClientHttpRequestFactory {

    public CustomHTTPRequestFactory() {
        super();
    }

    @Override
    protected void postProcessHttpRequest(HttpUriRequest httpRequest) {
        httpRequest.setHeader("User-Agent", "my-user-agent-string");
        super.postProcessHttpRequest(httpRequest);
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T15:23:21.267

如果您收到此错误，则可能是您在使用 Gzip 压缩时遇到问题：这是解决方法，在 ICS 和 JB 上进行了测试，但这应该适用于任何地方：

灵感来自 [http://android-developers.blogspot.fr/2011/09/androids-http-clients.html](http://android-developers.blogspot.fr/2011/09/androids-http-clients.html)

```
 RestTemplate restTemplate = new RestTemplate() {
        @Override
        protected ClientHttpRequest createRequest( URI url, HttpMethod method ) throws IOException {
            ClientHttpRequest request = super.createRequest( url, method );
            HttpHeaders headers = request.getHeaders();
            headers.setAcceptEncoding( ContentCodingType.GZIP );

            return request;
        }
    };

    if ( Build.VERSION.SDK_INT < Build.VERSION_CODES.FROYO ) {
        System.setProperty( "http.keepAlive", "false" );
    }

    try {
        long httpCacheSize = 10 * 1024 * 1024; // 10 MiB
        File httpCacheDir = new File( getCacheDir(), "http" );
        Class.forName( "android.net.http.HttpResponseCache" ) //
                .getMethod( "install", File.class, long.class )//
                .invoke( null, httpCacheDir, httpCacheSize );
    } catch ( Exception httpResponseCacheNotAvailable ) {
        Ln.v( "Http cache disabled" );
    } 
```

其中 Ln 是 RoboGuice 日志库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T15:03:51.857

我解决了升级到 1.0.1 Spring Framework 并使用 String.format 和**Locale**作为 URL 和**ClientHttpFactory**的问题。

```
private class ChangeDirectory extends AsyncTask< String, Void, Boolean >
{
    @Override
    protected Boolean doInBackground(String... directoryName) {

        RestTemplate restTemplate = new RestTemplate(true); // default converters
        restTemplate.setRequestFactory(new HttpComponentsClientHttpRequestFactory());
        String url = String.format(Locale.getDefault(),"http://%s/ui/android/cloud/change_directory", Constants.DNS);

        restTemplate.put(url, directoryName[0]);
        return true;
    }
} 
```

我希望这对你有用。

# mysql - 使用mysql的in子句过程中的错误

> ID：12280632
> 
> 赞同：0
> 
> 时间：2012-09-05T11:41:20.453
> 
> 标签：mysql, stored-procedures, dataset, call, vb.net-2010

用mysql写程序。但是当我在 mysql 中调用此过程时出现错误。在数据集中没有得到正确的结果。我想在单个参数中传递所有这些电话号码。

```
my procedure
------------
CREATE  PROCEDURE pro_dndtesting1(in p text)
begin
  select fld_phonenumber from tbl_dndno_1 where fld_phonenumber in (p) and fld_opstype='A';
end
$$

 am getting error when i call this procedure in mysql

 calling statement
 -----------------
  call pro_dndtesting1("9942321400","9490582992","9490597318","9494363015","9703210545","9494304399","8790989211","9133733635","8706744769","8197401062","7382936474","9949290637","994961722")

error 
------
 Error Code: 1318\. Incorrect number of arguments for PROCEDURE smsdnd.pro_dndtesting1; expected 1, got 2614

my aspx.vb code
----------------
  For i = 0 To Ds.Tables(0).Rows.Count - 1
                    Dim dq As String = ""

                    excelphone = Ds.Tables(0).Rows(i).Item(0).ToString
                    TextBox2.Text = TextBox2.Text + """" & excelphone & """" & ","

                Next
                Dim n As Integer
                n = TextBox2.Text.Length

                TextBox2.Text = TextBox2.Text.Substring(0, TextBox2.Text.Length - 1)
                Dim dnd As New DataSet1TableAdapters.pro_dndtesting1TableAdapter
                Dim dnddt As DataSet1.pro_dndtesting1DataTable = dnd.GetData(TextBox2.Text) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:20:19.367

*   首先 - 你应该使用逗号分隔的文本，例如 - '1112233,1115555,2223333'。
*   其次 - 使用[FIND_IN_SET](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_find-in-set)函数过滤表中的记录。

例如：

```
CREATE PROCEDURE pro_dndtesting1(IN p VARCHAR(255))
BEGIN
  SELECT
    fld_phonenumber
  FROM
    tbl_dndno_1
  WHERE
    FIND_IN_SET(fld_phonenumber, p);
END 
```

运行程序：

```
CALL pro_dndtesting1('1112233,1115555,2223333'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:04:54.790

这里，`p`不是数组。该[`in`子句](http://www.tutorialspoint.com/mysql/mysql-in-clause.htm)需要一个数组，而您提供的是`string`. 因此，错误。

现在，为了解决这个问题，我猜你不能将数组传递给 mysql 存储过程，所以你可能希望使用 for 循环在 proc 本身中构建数组并解析`p`字符串，并最终将其传递给查询。

希望这可以帮助。

### 编辑

我明白了，您传递了很多参数，但您的 proc 只是将第一个参数作为输入。这也是错误的，也是这里的主要错误。如果`p`参数输入为

```
p="9942321400--9490582992--9490597318--9494363015--9703210545--9494304399--8790989211--9133733635--8706744769--8197401062--7382936474--9949290637--994961722" 
```

然后，您可以使用上述解决方案。

# jquery - 在实体框架和 jQuery 之间传输数据？

> ID：12280641
> 
> 赞同：0
> 
> 时间：2012-09-05T11:41:43.113
> 
> 标签：jquery, asp.net-mvc, entity-framework, tag-it

我正在使用[Tag-it jquery 插件，](http://aehlke.github.com/tag-it/)该插件使用名为“sampleTags”的变量来存储一些值，以便在用户编写某些内容以赋予他们自动完成功能时使用它。

```
var sampleTags = ['c++', 'java', 'php', 'coldfusion'] 
```

我的问题是：

1.  `tblTags`我从像这样使用 EF调用的表中检索我的标签名称

    ```
    Array MyTags=db.tblTags.ToArray(); 
    ```

    我使用 asp.net mvc，如何将 MyTags 的值放入 sampleTags 中，以便为我的用户提供依赖于我的数据的自动完成功能？

2.  如何验证用户输入的数据并更新我的数据库？

这种方式对我不起作用

```
 $(function () {       
        var sampleTags = new Array();

        $.ajax({
            url: '/mp3/GetTags',
            type: 'POST',
            contentType: 'application/json; charset=utf-8',
            failure: function () { 
                 alert('Error contacting service!'); 
            },
            success: function (data) {
                for (var j = 0; j < data.d.length; j++) {
                    // Now you can use something like data.d[j].studentID;
                    sampleTags[j] = data.d[j].item;
                }

                $('#allowSpacesTags').tagit({
                    availableTags: sampleTags,
                    allowSpaces: true
                });
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:13:51.880

您可以将 MyTags 变量设置为 ViewBag，并将 ViewBag 内容设置为 sampleTags 或检查 sampleTags 是否具有接收 Json 的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T23:03:29.863

个人不是 viewBag 的粉丝，但无论如何，我喜欢使用 return JSON 方法将数据从控制器传回视图：

```
public JsonResult someMethod()
{
    //populate your tags into say, tagX
    return Json(tagX);
} 
```

然后在 JavaScript 端，通过 $.ajax() 调用接收 JSON 数据，其中 dataType 设置为 JSON 和 POST，然后根据需要反序列化/转换为 JavaScript 数组（如果您的插件需要）。

要回答您关于反序列化的评论：

```
$.ajax({
                    url: '../WebServices/SomeService.asmx/SomeSearch',
                    type: 'POST',
                    data: "{'jsonFilterObject':" + JSON.stringify(jsonFilterObject) + "}",
                    contentType: 'application/json; charset=utf-8',
                    failure: function () { alert('Error contacting service!'); },
                    success: function (data) {
                        for (var j = 0; j < data.d.length; j++) {
                            //Now you can use something like data.d[j].studentID;
}
                    }); 
```

# c - 分段错误——无法理解错误的原因

> ID：12280642
> 
> 赞同：-2
> 
> 时间：2012-09-05T11:41:46.740
> 
> 标签：c, segmentation-fault

我不明白这里分段错误的原因。代码是：

```
struct node {
    int data;
    struct node* next;
};

void add(int a,struct node *lista)
{
    struct node *p;
    p=(struct node*)malloc(sizeof(struct node*));

    p->data=a;
    p->next=NULL;

    while(lista->next!=NULL)       <--- The segmentation fault is here. 
        lista=lista->next;                    
    lista->next=p;

    return lista;

}

int main(void)
{
    struct node *list=NULL;
    list_print(list);

    list=node123();
    list_print(list);

    add(7, &list);
    list_print(list);

    return 0;
} 
```

将新节点添加到列表末尾的添加功能在朋友的计算机和设置上完美地工作。我得到分段错误。我认为问题在于`lista->next`表达，但我不明白为什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:45:46.137

`void add(int a,struct node *lista)`...第二个参数是一个结构节点指针。

`struct node *list=NULL;`-- list 是一个结构节点指针。

`add(7, &list);`-- &list 是一个结构节点 **; 这是不正确的，可能会导致 add() 的 `while(lista->next!=NULL) 取消引用失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T11:45:58.667

```
p = (struct node*)malloc(sizeof(struct node*)); 
```

这当然是错误的。您不能分配大小与指针本身一样大的内存，而应与实际结构一样大。利用

```
p = malloc(sizeof(struct node)); 
```

甚至**更好**

```
p = malloc(sizeof(*p)); 
```

**[并且不要为了上帝的爱而将 malloc() 的返回值转换。](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)**

此外，您声明`list`为`struct node *`，并且您的`add()`函数还需要`struct node *`- 因此将其**地址**传递给函数是错误的。代替

```
add(7, &list); 
```

写

```
add(7, list); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T11:50:36.163

您声明“添加”不返回任何类型的数据（无效）。但是您要返回“列表”。要么使函数在指向“list”指针的指针上工作（将 **list 作为参数而不是 *list）。或者让它返回一个列表类型： struct list* add(

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T11:47:27.757

您正在传递列表的地址，但函数只需要一个指针，为了通过引用传递“列表”，您必须更改添加到的声明：

```
void add(int a,struct node **lista); 
```

然后使用 (*lista) 而不是 'list' 。例如： (*lista)-> 下一个 ...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T11:46:03.277

1 - 您必须在 writhin lista->next 之前检查 lista 是否不为空

2 - malloc 中有错误： `p=(struct node*)malloc(sizeof(struct node));`

要分配的大小是 a 的大小`node`，您分配的是指针的大小`struct node*`。

3 -`add(7 , lista)`不是`add(7 , &lista)`因为 lista 已经是一个指针。

# javascript - iFrame 注入

> ID：12280644
> 
> 赞同：0
> 
> 时间：2012-09-05T11:41:55.803
> 
> 标签：javascript, iis, iframe, coldfusion, windows-server-2003

最近我的一个网站被 iframe 注入攻击：

`<iframe scrolling="no" frameborder="0" src="http://www.example.com/" width="0" height="1"></iframe>`

它发生在随机时间并被插入随机包含文件等。

我们已经对所有计算机进行了彻底的病毒扫描，更改了所有 ftp/远程桌面密码，但问题仍然存在。

我们还使用搜索程序查找字符串“http://www.example.com/”，但无济于事。我们在服务器上有超过 100,000 个文件，因此很难找到源。除此之外，服务器公司表示他们无法为我们提供帮助，因为目前没有广告软件/病毒！

我们正在使用冷融合。

一些建议将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:24:50.627

检查你的数据库。它肯定是通过 SQL 注入插入到你的文本字段表列中的。停止在您的服务器上寻找病毒实际上是在您的coldfusion页面上解决方法以避免sql注入（主要是您的公共页面，如联系我们）。

始终在 sql 中使用标记。

# colors - 更改悬停时 NSIS 链接的样式

> ID：12280645
> 
> 赞同：0
> 
> 时间：2012-09-05T11:41:56.257
> 
> 标签：colors, installation, hover, hyperlink, nsis

我的 NSIS 安装程序页面中有一个链接，我正在尝试更改其样式（颜色）。该链接在我的 .ini 页面中声明如下：

> [字段 8]
> Type=Link
> Left=14
> Top=18
> Right=206
> Bottom=28
> Text=go to google...
> State=https://google.com/

然后在 .nsh 文件中我更改其样式调用：

> ReadIniStr $1 "${TEMP}\browse.ini" "Field 8" "HWND"
> SendMessage $1 ${WM_SETFONT} $7 0
> SetCtlColors $1 0x000000 透明

它确实改变了链接的样式，但是当我将其悬停时，它会回到原来的样式并在刷新时变回（当我将窗口拖到上方或按下将刷新字段的按钮时）默认样式看起来像一个按钮，我希望它看起来像一个带下划线的标签。我还尝试将其标记并与 Linker::link 链接，但使用 NSIS_SkinCrafter_Plugin::skin 更改页面皮肤使其消失，我无法将其恢复。

你能建议我的问题的解决方案吗？我只想要一个带有蓝色下划线的文本，当悬停时会在浏览器中打开一个网页

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:06:47.303

尝试[链接器](http://nsis.sourceforge.net/Linker_plug-in)插件，它可以将标签更改为链接。

```
FindWindow $0 "#32770" "" $HWNDPARENT
GetDlgItem $0 $0 1006
Linker::link /NOUNLOAD $0 "http://www.google.com/" 
```

# php - 获取当前帖子的分类术语以将它们显示为 id

> ID：12280646
> 
> 赞同：2
> 
> 时间：2012-09-05T11:41:57.990
> 
> 标签：php, wordpress, wordpress-theming, taxonomy, custom-post-type

我有以下代码，基本上希望它在 data-type="HERE" 部分显示术语的 slug。这是在 wordpress 安装之外的静态 html 页面上。

我让它将自定义帖子类型显示为列表，但无法让它显示“类别”分类中的术语。

```
<?php $args = array( 'post_type' => 'case_study' ); ?>
<?php require($_SERVER['DOCUMENT_ROOT'] . '/news/wp-load.php'); query_posts($args );  if (have_posts()) : while (have_posts()) : the_post(); ?>
    <li data-id="id-<?php the_ID(); ?>" data-type="DISPLAY TAXONOMY OF CATERGORIES TERMS HERE">
        <a href="<?php the_permalink(); ?>" title="<?php the_title(); ?>">
            <?php the_post_thumbnail('case-study-thumb'); ?>
            <?php the_title(); ?>
        </a>
    </li>
<?php endwhile; ?>
<?php else: ?>
    <li>No Case Studies found</li>
<?php endif; ?> 
```

任何帮助将不胜感激！

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:10:21.243

您可以简单地使用[`get_the_category`](http://codex.wordpress.org/Function_Reference/get_the_category)，例如：

```
$data_type = '';
$categories= get_the_category();
if (is_array($categories)) foreach($categories as $cat) {
  $data_type .= ', '.$cat->cat_name;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:18:00.093

我在论坛上发现了一个答案，很有魅力！

```
<?php $terms = get_the_terms( $post->ID , 'categories' ); foreach( $terms as $term ) {  print $term->slug;  unset($term); }?> 
```

'print $term->slug;' 也就是说，slug 可以更改为 name 以打印分类术语的名称:-)

# excel - Excel 2010 中图片集合的替代方案

> ID：12280649
> 
> 赞同：1
> 
> 时间：2012-09-05T11:42:03.887
> 
> 标签：excel, excel-2003, excel-2010, vba

这是来自**xls**文件的一些代码。在 Excel 2010 中它不起作用。`Pictures`我在对象资源管理 器中找不到集合

```
Private Sub Worksheet_Calculate()

        Dim oPic As Picture
        'make them invisible
        For Each oPic In Me.Pictures
                    If Left(oPic.Name, 2) = "jq" Then
                                oPic.Visible = False
                    End If
        Next

end sub 
```

等效的 2010 代码是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T11:46:02.397

使用它来循环浏览 Excel 中的图片

```
Sub Sample()
    Dim shp As Shape

    For Each shp In ActiveSheet.Shapes
        If shp.Type = msoPicture Then
            Debug.Print shp.Name
        End If
    Next
End Sub 
```

# php - 在 PHP 中组合 sql 查询

> ID：12280653
> 
> 赞同：5
> 
> 时间：2012-09-05T11:42:15.290
> 
> 标签：php, mysql, sql, join

您好，目前正在使用此代码

```
 $qry_display = "
SELECT 
    student_id,
    fname,
    sex,
    lname,
    mname,
    level,
    photo,
    birth_date,
    birth_place,
    address,
    father,
    father_occupation,
    father_phone,
    father_company,
    father_degree,
    mother,
    mother_occupation,
    mother_phone,
    mother_company,
    mother_degree,
    adviser_id 
from 
    tbl_enroll 
where 
    student_id='$id' 
    AND level='$lvl'

";
    $sql_display = mysql_query($qry_display) or die (mysql_error()); 
```

**上面的代码从tbl_enroll**获取大部分数据。现在我想在 **tbl_er**上获取一些数据。**tbl_enroll**和**tbl_er**与**student_id的主键连接，也与****tbl_section**连接一次。**tbl_er**和**tbl_section**与 section_id 的外键相连。

到目前为止，我正在考虑执行多个 sql 查询并使用一个 mysql_query 触发器，但它不会工作，因为触发器不会与三个 sql 查询一起工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T11:47:28.683

只有[`JOIN`](http://dev.mysql.com/doc/refman/5.0/en/join.html)三个表：

```
SELECT t1.*, t2.*, t3.*
from tbl_enroll t1
JOIN tbl_el t2 ON t1.student_id = t2.student_id
JOIN tbl_section t3 ON t2.section_id = t3.section_id
where student_id='$id' AND a.level='$lvl' 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-05T11:44:43.053

你应该[加入](http://dev.mysql.com/doc/refman/5.0/en/join.html)表格。这不是关于 php，而是关于 sql。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T11:47:34.210

```
 SELECT te.XXX,tr.YYYY,ts.ZZZ, ..... 
   from tbl_enroll te 
   inner join tbl_er tr on tr.student_id = te.student_id
   inner join tbl_section ts on ts.section_id = te.section_id
   where student_id='$id' and level='$lvl'; 
```

您可以在查询开始时从 te、tr 或 ts 中选择任何字段。不要忘记在字段前面加上 te、tr 或 ts 前缀，这样在执行查询时就不会出现模糊的引用；）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-05T11:49:56.337

您可以按照系统税尝试

```
select tb1.filds,tb2.fields ... from table1 as tb1, table2 as tb2 .. where tb1.id = tb2.id and tb2.id  = tb3.id ... 
```

在哪里条件必须正确检查。

否则你可以使用 Join Query .. .Join Query 更好

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-05T11:47:10.240

```
Combining two queries..

SELECT t1.* FROM tbl_er as t1, tbl_enroll as t2
WHERE t1.student_id= t2.student_id ORDER BY id DESC 
```

您必须在两个表中定义学生 ID。

# solr - 如何使用deletedPkQuery

> ID：12280654
> 
> 赞同：0
> 
> 时间：2012-09-05T11:42:19.580
> 
> 标签：solr, lucene

我有一个带有 2 个实体的 data-config.xml，比如

```
<entity name="full" PK="ID" ...>
...
</entity> 
```

和

```
<entity name="delta_build" PK="ID" ...>
...
</entity> 
```

实体 delta_build 用于增量导入，查询是

```
?command=full-import&entity=delta_build&clean=false 
```

我想使用 deletedPkQuery 删除索引。所以我已将它们添加到实体“delta_build”

```
deltaQuery="select -1 as ID from dual"

deltaImportQuery="select * from product where a.id='${dataimporter.delta.ID}' "

deletedPKQuery="select product_id as ID from modified_product where gmt_create &gt; to_date('${dataimporter.last_index_time}','yyyy-mm-dd hh24:mi:ss') and modification = 'deleted'" 
```

deltaQuery 和 deltaImportQuery 只是为了避免 delta 导入任何记录，当然 delta 导入已通过完全导入实现。我只想使用 delta 删除索引。

但是当我点击查询时

```
?command=delta-import 
```

deltaQuery 和 deltaImportQuery 可以在 log 中找到，并且没有 deletedPKQuery。配置文件有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T16:56:59.110

我立即看到两个原因。1\. 使用 '${dataimporter.delta.product_id}' 而不是 '${dataimporter.delta.ID}' 2\. 使用 deletedPkQuery 而不是 deletedPKQuery。

# android - 有谁知道 getevent 的输出是什么意思？

> ID：12280657
> 
> 赞同：15
> 
> 时间：2012-09-05T11:42:34.840
> 
> 标签：android, touch, adb, event-log

我试图找出 adb shell 中 getevent 命令的输出格式。

例如，输出如下所示：

`adb shell getevent -t | grep event1`

-t 标志提供了一个时间戳，而 grep 将消息过滤到仅触摸屏的事件。

> 22779-197145：/dev/input/event1：0003 003a 00400001
> 
> 22779-197999：/dev/input/event1：0003 0039 82c30a97
> 
> 22779-218477：/dev/input/event1：0003 003a 00390001
> 
> 22779-219301：/dev/input/event1：0003 0039 82c30aa4
> 
> 22779-230623：/dev/input/event1：0003 003a 002f0001
> 
> 22779-231416：/dev/input/event1：0003 0039 82c10aae
> 
> 22779-242769：/dev/input/event1：0003 003a 00190001
> 
> 22779-243623：/dev/input/event1：0003 0039 82c60ac1
> 
> 22779-253328：/dev/input/event1：0003 003a 00000002
> 
> 22779-254213：/dev/input/event1：0003 0039 82da0ae4
> 
> 22779-415590：/dev/input/event1：0003 003a 00000000
> 
> 22779-416444：/dev/input/event1：0003 0039 800b1549

问题是我不知道如何处理这些信息。虽然秒最后一个字段在两个代码之间交替（建议对应于 X 和 Y 值），但最后一个字段似乎包含巨大或非常小的数字。

此外，时间戳对我来说也是陌生的。我想知道破折号之后的部分是否是纳秒？

有谁知道我在哪里可以找到这些东西的格式？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-10T14:08:54.810

`/dev/input/eventX`由`evdev`linux 内核子系统使用，它是通用输入事件层处理事件并将时间戳传递给应用程序。您可以尝试使用此工具获得更多关于 Android 上发生的事情的人类可读输出`getevent`，如下所示：

```
$ adb shell getevent -lp /dev/input/event1 
```

要获得 all`getevent`的选项，请执行以下操作：

```
$ adb shell getevent --help 
```

[您可以在此处](http://source.android.com/tech/input/getevent.html)和[Wiki 上](http://en.wikipedia.org/wiki/Evdev)阅读有关`getevent`工具的更多信息。`evdev`

根据内核来源，evdev 使用纳秒分辨率时间格式（ ） ，如果您想在线查看，`ktime`来源在`linux/next/include/linux/ktime.h`或[此处。](http://code.metager.de/source/xref/linux/next/include/linux/ktime.h#4)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-29T20:48:18.277

看起来您的代码片段中没有触摸屏触摸，或者可能没有记录 x 和 y。

通常，`X`触摸屏的坐标在下方`0003 0035`和`Y`下方`0003 0036`，而`0003 0039`通常是手指向下（最后一个字段看起来更像`00000000`）和手指向上（最后一个字段看起来更像`ffffffff`）。

不完全确定`0003 003a`它的用途，但它似乎并不重要，而且绝对不是十六进制`X`或`Y`十六进制。

此外，时间戳以秒为单位。时间戳中破折号之前的部分表示 1970 年 1 月 1 日 UTC 的 Unix Epox，破折号​​之后的时间戳变成基于自上述时间和日期以来的秒数的日期。

希望这会增加一些清晰度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-15T04:01:17.160

0x35 = X 轴

0x36 = Y 轴

按照此链接获取 getevent 工具

[https://source.android.com/devices/input/getevent](https://source.android.com/devices/input/getevent)

要查看每个细节的含义，请遵循此头文件。

[https://android.googlesource.com/kernel/msm.git/+/android-msm-hammerhead-3.4-kk-r1/include/linux/input.h](https://android.googlesource.com/kernel/msm.git/+/android-msm-hammerhead-3.4-kk-r1/include/linux/input.h)

# html - 为什么我的 Webfonts 不显示在 Windows 机器和 iPhone 上？

> ID：12280658
> 
> 赞同：0
> 
> 时间：2012-09-05T11:42:35.867
> 
> 标签：html, css, fonts, webfonts

我在[www.tomrankinmusic.com设计了一个非常基本的控股页面](http://www.tomrankinmusic.com)

我已将 Webfonts 嵌入到页面中，并在 Mac OSX Lion 10.7.4 上的最新 Firefox、Safari 和 Chrome 中检查它们正确显示的位置，但是它们没有在 Windows XP Pro 上的 Chrome 和 IE6 中显示，并且默认为 Times New Roman。

这是什么原因，我该如何纠正？

另外一个问题是，我知道 iPhone 只能识别 SVG 字体，我在 myfonts.com 上购买时无法访问 SVG 字体。有没有其他方法可以在 Safari Mobile 上显示网络字体？

此外，IE6 在页面上显示带有灰色背景的大标志 - 我什至不确定我是否应该担心 IE6 的性能，但是，你知道网上冲浪的公众。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:54:01.917

你也可以使用这个转换器，如果 FS 会有问题[http://fontface.codeandmore.com/](http://fontface.codeandmore.com/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-05T11:44:36.007

HI 现在将您的字体转换为该***[站点](http://www.fontsquirrel.com/fontface/generator)*** 并应用于您的页面

# javascript - javascript中的Spotify身份验证？

> ID：12280664
> 
> 赞同：0
> 
> 时间：2012-09-05T11:42:52.543
> 
> 标签：javascript, spotify

我目前正在为一个乐队构建一个应用程序，该应用程序希望为拥有 spotify 高级帐户的人提供奖励内容。

Spotify api 目前是否提供了一种验证和获取用户信息的方法，例如。他们的帐户状态（免费/高级）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:47:48.143

来自[Spotify WebAPI](https://developer.spotify.com/technologies/web-api/)

```
The Web API may be used to explore Spotify’s music catalogue. 
Please refer to the following instructions.

Services

These are the available services.

    lookup
    search 
```

所以答案是：不，你不能。请与他们联系以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T19:24:27.983

蛇眼的回答是对的。使用 Spotify Web API，您无法获取该信息。

但是，既然您说您正在编写一个应用程序并且您提到了 javascript，我猜您正在使用此处记录的 Spotify Apps API：

[https://developer.spotify.com/technologies/apps/](https://developer.spotify.com/technologies/apps/)

抱歉，您仍然无法获取该信息，但如果可以，它可能是模型的属性~Session：

[https://developer.spotify.com/technologies/apps/docs/beta/a5a59ca068.html](https://developer.spotify.com/technologies/apps/docs/beta/a5a59ca068.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-21T14:33:09.250

我知道这个问题被标记为已解决，但随着时间的推移，情况发生了变化：

来自 1.0 API 的新[会话类](https://developer.spotify.com/docs/apps/api/1.0/api-models-session.html)现在提供以下信息：

“产品”属性给出

> 当前登录用户的账户产品，例如“premium”/“daypass”/“free”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-12T10:05:32.807

作为 2019 年查看此帖子的任何人的更新：

您现在可以为经过*身份验证*的用户检索有关个人数据的大量用户信息。您可以生成身份验证令牌，并在获得用户许可的情况下使用它来访问有关用户信息的私人数据。

关于 Spotify 的 API 的更多细节可以在这里找到：[https ://developer.spotify.com/documentation/web-api/](https://developer.spotify.com/documentation/web-api/)

# asp.net-mvc - ASP MVC4 使用默认包而不是我自己的包？

> ID：12280665
> 
> 赞同：0
> 
> 时间：2012-09-05T11:43:00.860
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-optimization

我的 Application_Start() 中有以下代码：

```
 protected void Application_Start() {

        AreaRegistration.RegisterAllAreas();
        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        RoleConfig.CreateRoles();
        BundleConfig.RegisterBundles(BundleTable.Bundles); 
```

和：

```
namespace WebUx {
    public class BundleConfig {
        // For more information on Bundling, visit http://go.microsoft.com/fwlink/?LinkId=254725
        public static void RegisterBundles(BundleCollection bundles) {

            bundles.Add(new ScriptBundle("~/bundles/admin").Include(
                        "~/Scripts/admin/adminControl.js",
                        "~/Scripts/admin/adminModalOpen.js",
                        "~/Scripts/admin/adminModalOpen.js",
                        "~/Scripts/admin/getExamOptions.js",
                        "~/Scripts/admin/getParams.js", 
```

当我使用调试中断 Application_Start 的第一行然后检查 BundleTable.Bundles 时，我看到 BundleCollection 中已经有条目。

这些条目不是我的条目，它们似乎与我的应用程序中的文件无关。相反，它们似乎是默认值。例如，我的应用程序只有一个 jQuery 文件，而 BundleCollection 有七个与 jQuery 相关的 js 文件。

有谁知道这些文件如何/为什么在 BundleCollection 中以及它们是如何设置的？

例如：我如何以及为什么找到名为 moo、dojo、prototype、ext 等的包。这些不是我创建的包，所以它们都是从哪里来的。我在这里完全糊涂了。找不到任何会导致创建这些捆绑包的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:45:36.087

我认为您可能正在查看一些默认的排序约定，而不是包中实际包含的文件。我的预感是您正在查看 FileSetOrderList，它基本上为几个通常需要首先出现的知名 js 框架（即 jquery）进行了一些订单提升。

`ResetAll()`你可以通过调用你的包集合来摆脱所有的默认约定。但总的来说，如果您要包含 *.js，它们只会帮助隐式排序。

# php - 如何让外部页面优惠券/优惠券表格在 OpenCart 中工作？

> ID：12280666
> 
> 赞同：8
> 
> 时间：2012-09-05T11:43:03.167
> 
> 标签：php, forms, opencart, coupon

我的 OpenCart 环境中有另一个页面，比如说关于我们的页面，它在下面有这些表单，假设用户在他们的购物车中有物品，这些表单应该可以工作，但它们不能：

在此处输入您的优惠券代码：

```
<form action="index.php?route=checkout/cart" method="post" enctype="multipart/form-data" id="basket">
    <input type="text" value="" id="coupon" name="coupon"/>
    <input type="hidden" value="coupon" name="next"/>
    <input type="submit" class="button" value="Apply Coupon"/>
</form> 
```

在此处输入您的礼券代码：

```
<form action="index.php?route=checkout/cart" method="post" enctype="multipart/form-data" id="basket">
    <input type="text" value="" name="voucher"/>
    <input type="hidden" value="voucher" name="next"/>
    <input type="submit" class="button" value="Apply Voucher"/>
</form> 
```

这是用于优惠券代码系统但它不起作用（此代码默认未编辑）：

**/catalog/controller/checkout/cart.php**

```
// VOUCHER
// IF THE USER HAS ENTERED A VOUCHER
if (isset($this->request->post['voucher']) && $this->request->post['voucher']) {
    foreach ($this->request->post['voucher'] as $key) {
        if (isset($this->session->data['vouchers'][$key])) {
            unset($this->session->data['vouchers'][$key]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T11:13:25.867

# 优惠券/代金券/运费

这三个系统块是 OpenCart 中的模块。它们循环在一起，您可以编辑文件，例如使一些空白或使用`if/else`语句仅显示某些模块。

您不能在 中调用表单本身`cart.tpl`，它必须是：

```
<div class="right"> 
    <!-- eVoucher System -->
    <?php foreach ($modules as $module) { ?>
        <?=$module?>
    <?php } ?>
    <!-- eVoucher System --> 
</div> 
```

# Shipping/Voucher 和 Coupon 模块的文件位置

这将循环并显示模块 tpl 文件、运输、优惠券和凭证。它们的位置很奇怪

```
/catalog/view/theme/default/total/coupon.tpl
/catalog/view/theme/default/total/shipping.tpl
/catalog/view/theme/default/total/voucher.tpl 
```

我们没有全部使用它们，所以我们已经取消了凭证和运输。优惠券形式如下：

```
<div>
  <div class="cart-heading"><?php echo $heading_title; ?></div>
  <div class="cart-content" id="coupon"><?php echo $entry_coupon; ?>&nbsp;
    <input type="text" name="coupon" value="<?php echo $coupon; ?>" />
    &nbsp;<a id="button-coupon" class="button"><span><?php echo $button_coupon; ?></span></a></div>
</div>
<script type="text/javascript">
<!--
//
//  jQuery dependent based on .post so make sure
//  your footer or header jQuery call is before this
//
$('#button-coupon').bind('click', function() {
    $.ajax({
        type: 'POST',
        url: 'index.php?route=total/coupon/calculate',
        data: $('#coupon :input'),
        dataType: 'json',       
        beforeSend: function() {
            $('.success, .warning').remove();
            $('#button-coupon').attr('disabled', true);
            $('#button-coupon').after('<span class="wait">&nbsp;<img src="catalog/view/theme/default/image/loading.gif" alt="" /></span>');
        },
        complete: function() {
            $('#button-coupon').attr('disabled', false);
            $('.wait').remove();
        },      
        success: function(json) {
            if (json['error']) {
                $('#basket').before('<div class="warning">' + json['error'] + '<img src="catalog/view/theme/default/image/close.png" alt="" class="close" /></div>');
            }

            if (json['redirect']) {
                location = json['redirect'];
            }
        }
    });
});
//-->
</script> 
```

这就是这些文件的方式和位置，`total`还有一个控制器，`coupon`并且所有其他模块都是控制器和标准 MVC 驱动的。

# 外部优惠券购物车表格

因此，对于如您所愿在外部页面上使用，提取 tpl 文件和`$modules`and`$module`循环，代码应该是：

（在 SEO URI 的情况下确保“斜线”index.php）

当然，例如，在您的关于我们页面上：

```
<strong>Please enter your coupon:</strong>

<form action="/index.php?route=total/coupon/calculate" method="post" enctype="multipart/form-data" id="basket">
    <input type="text" value="" id="coupon" name="coupon"/>
    <input type="hidden" value="coupon" name="next"/>
    <input type="submit" class="button" value="Apply Coupon"/>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T19:09:52.087

我试过把这些表格放在一个页面上，它们对我有用。输入优惠券/优惠券代码会将我带到结帐页面，这些代码已经为我准备好了。

# java - 确定方法是否为 `RemotableViewMethod`

> ID：12280667
> 
> 赞同：2
> 
> 时间：2012-09-05T11:43:03.573
> 
> 标签：java, android, reflection, remoteview

我正在构建一个包含 ProgressBar 的小部件。如果 Widget 正在计算，我将 ProgressBar 的可见性设置为`VISIBLE`，`INVISIBILE`如果所有计算都停止，则设置为 。应该没有问题，因为它`setVisibility`被记录为 `RemotableViewMethod`. 然而，HTC 的一些人似乎忘记了它，（即在 Wildfire S 上），因此调用`RemoteViews.setVisibility`将导致崩溃。出于这个原因，我尝试实施检查，如果`setVisibility`真的可以调用。我为它写了这个方法：

```
private boolean canShowProgress(){
        LogCat.d(TAG, "canShowProgress");
        Class<ProgressBar> barclz = ProgressBar.class;
        try {
            Method method = barclz.getMethod("setVisibility", new Class[]{int.class});
            Annotation[] anot = method.getDeclaredAnnotations();
            return anot.length > 0;
        } catch (SecurityException e) {
            LogCat.stackTrace(TAG, e);
        } catch (NoSuchMethodException e) {
            LogCat.stackTrace(TAG, e);
        }
        return false;
    } 
```

这会起作用，但*真的很难看，因为如果存在**任何*注释，它将返回“True” 。我看了看，RemoteView 本身是如何进行查找的，发现了这个：

```
if (!method.isAnnotationPresent(RemotableViewMethod.class)) {
                throw new ActionException("view: " + klass.getName()
                        + " can't use method with RemoteViews: "
                        + this.methodName + "(" + param.getName() + ")");
            } 
```

但我不能这样做，因为类`RemotableViewMethod`不能通过 sdk 访问。如何知道它是否可以访问？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T11:43:03.573

通过写我的问题，我有了按名称查找类的想法，并且它起作用了。所以我将我的方法更新为以下内容：

```
private boolean canShowProgress(){
        LogCat.d(TAG, "canShowProgress");
        Class<ProgressBar> barclz = ProgressBar.class;
        try {
            Method method = barclz.getMethod("setVisibility", new Class[]{int.class});
            Class c = null;
            try {
                c = Class.forName("android.view.RemotableViewMethod");
            } catch (ClassNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return (this.showProgress= (c != null && method.isAnnotationPresent(c)));

        } catch (SecurityException e) {
            LogCat.stackTrace(TAG, e);
        } catch (NoSuchMethodException e) {
            LogCat.stackTrace(TAG, e);

        }
        return false;
    } 
```

完美无瑕

# mysql - MySQL 缓慢变化的维度 SCD2 + ON DUPLICATE KEY UPDATE

> ID：12280670
> 
> 赞同：0
> 
> 时间：2012-09-05T11:43:05.270
> 
> 标签：mysql, database, scd

我希望让 MySQL 处理缓慢变化的维度该表设置为使用“生效日期”作为控件 - 因此表结构类似于此处[http://en.wikipedia.org/wiki/Slowly_sharing_dimension](http://en.wikipedia.org/wiki/Slowly_changing_dimension) Type II 底部示例。

是否可以使用此功能来更新/插入，或者最好将功能分开，例如插入 = 检查现有然后插入，更新 = 更新原始列，插入新列

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:56:51.460

不，这是不可能的。如果该行已经存在，则该语句将更新该行，因此您最终只会得到一条记录和松散的历史信息。您需要先更新旧记录（将 end_date 设置为当前日期），然后插入新记录（end_date 为 NULL）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-08T16:00:43.690

我有这种方法的实现，没有任何选择（但有插入/更新）。MySQL：5.7 这是表结构：

```
CREATE TABLE UserStatusLog (
  `user_id` int(11) NOT NULL,
  `status_type` tinyint(8) NOT NULL, // we are logging multiple statuses in one table
  `status_value` int(11) NOT NULL, // actual value of the status
  `is_last` tinyint(1) DEFAULT '1', // marking flag
  `start_ts` timestamp NOT NULL DEFAULT '1970-01-01 00:00:01', // when this status_value became actual
  `finish_ts` timestamp NOT NULL DEFAULT '2030-01-01 00:00:00', // end of actuality for this status
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP, // just for logging
  `updated` timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP, // just for logging
  PRIMARY KEY (`user_id`,`status_type`,`finish_ts`),
  UNIQUE KEY `uniq` (`user_id`,`status_type`,`is_last`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

我们正在尝试将新值插入日志：

```
INSERT IGNORE INTO UserStatusLog
(user_id, status_type, status_value, is_last, start_ts, finish_ts)
VALUES ($user_id, $type, $value, NULL, '2017-12-08 15:45:34', '2030-01-01 00:00:00')
ON DUPLICATE KEY UPDATE is_last = IF(start_ts < '2017-12-08 15:45:34' && status_value != VALUES(status_value), 
2 /* THIS IS A "SPECIAL VALUE" for is_last */
, is_last); 
```

然后，我们通过 mysql_affected_rows(); 比较查询结果；

*   **0**有一条 start_ts 大于新的记录，oe
*   **1**这是第一个用户在日志中的记录，需要进行更新，为此记录标记为is_last：

    UPDATE UserStatusLog SET is_last = 1 WHERE user_id = $user_id AND status_type = $type AND finish_ts = '2030-01-01 00:00:00' LIMIT 1;

*   **2**有一条记录，比新的 start_ts 更老，我们用 is_last = 2 (SPECIAL VALUE) 更新了它：

    更新 test.mock_20171208_47d9ac21808ee65d605ca32205888648 SET is_last = NULL, finish_ts = '2017-12-08 15:45:45' 其中 user_id = $user_id AND status_type = $type AND is_last = 2 LIMIT 1; // 插入新的，真正的最后一条记录 INSERT INTO test.mock_20171208_47d9ac21808ee65d605ca32205888648 (user_id, status_type, status_value, is_last, start_ts, finish_ts) VALUES ($user_id, $type, $value, $is_last = 1, '2017-12-08 15: 45:45', '2030-01-01 00:00:00');

# c++ - 在linux中动态排列应用程序窗口

> ID：12280673
> 
> 赞同：0
> 
> 时间：2012-09-05T11:43:26.690
> 
> 标签：c++, bash, gnome

我想动态地使用 bash 脚本/c++ 代码将桌面上存在的窗口排列在彼此之上。我知道其窗口将出现在 gnome 桌面上的应用程序的名称。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:11:35.807

看看[恶魔派](http://burtonini.com/blog/computers/devilspie)。这是一个窗口匹配实用程序，专为 Metacity 窗口管理器 IIRC 编写。它允许您为某些类型的窗口执行自定义操作。在您的情况下，您可以简单地匹配*所有*窗口并设置它们各自的位置/几何形状（我不知道魔鬼派的手册，但我很确定它可以做到这一点）。

还有一个后继者，称为[Devil's Pie 2](http://www.gusnan.se/devilspie2/)，它使用基于 Lua 的规则。但是，我没有关于它的任何进一步信息。

# android - 如何从PC中提取apk文件？

> ID：12280674
> 
> 赞同：6
> 
> 时间：2012-09-05T11:43:34.177
> 
> 标签：android, xml, apk

我能够从 PC 中提取我的应用程序 apk 文件。我使用的步骤是1.在myapp.apk.zip之后添加.zip

APK 文件已成功解压。但我看不到 XML 文件的内容。

XML 文件的格式不正确。这是我的申请。仅用于学习目的。

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-05T11:46:09.517

使用 APKTool 反编译 Android 应用程序

打开命令提示符并运行以下命令。

```
apktool d apkfile ./FolderName 
```

[在这里查看](http://www.miui-au.com/add-ons/apktool/)更多信息。[视频教程](http://www.youtube.com/watch?v=tJrWeoGXpDY)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:45:52.707

我猜内容可能被混淆了。所以 XML 不是人类可读的。

# objective-c - UIWebView with -webkit-translated elements screenshot

> ID：12280677
> 
> 赞同：2
> 
> 时间：2012-09-05T11:43:42.120
> 
> 标签：objective-c, ipad, screenshot

我有一个 UIWebView，它包含一些看起来像这样的元素：

```
<div class="bbib wbg rect" id="rect" style="-webkit-transform: perspective(100px) translate3d(6px, 63px, -48px) rotateY(-106deg); ">
</div> 
```

我需要截取这个 webview 的截图（它是全尺寸的，对于 iPad，1024x768），但是当我使用

```
UIGraphicsBeginImageContextWithOptions(self.frame.size, NO, 0.0);
[self.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *screenshot = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
return screenshot; 
```

（此代码属于 UIView 类别），图像上的元素位于其原始位置（无平移/旋转）。这不好。

如何解决？

# ruby-on-rails - 如何在heroku上使用本地宝石？

> ID：12280684
> 
> 赞同：3
> 
> 时间：2012-09-05T11:43:59.097
> 
> 标签：ruby-on-rails, heroku, gem

我的 RoR 应用程序上有 gem 声明式授权的修改版本。

它在 vendor/gems/declarative_authorization 下。

我的 gemfile 有

```
gem "declarative_authorization", '= 0.5.5', path: "vendor/gems/declarative_authorization/" 
```

它在部署和测试上运行良好，但是当我尝试推送到 heroku 时，它运行后`bundle install`给我一个错误，因为它找不到该 gem 提供的功能。具体方法`filter_access_to`找不到。

`heroku restart`不能解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:46:07.537

我终于让它工作了。

我的解决方案是使用 :git 而不是 :path

```
gem 'gem_name', '= 0.x.x', git: 'git://........../gem_name.git' 
```

# image-gallery - NIToolBarPhotoViewController 显示所选图像中的图像

> ID：12280686
> 
> 赞同：0
> 
> 时间：2012-09-05T11:44:06.350
> 
> 标签：image-gallery, photo-gallery, nimbus, nimbus-ios, photoviewer

我正在使用 Nimbus 显示照片。我有一个 tableviewcontroller 显示文件名列表。当用户选择特定文件（如果是图像）时，它会显示从 NIToolBarPhotoViewController 扩展的 viewcontroller 中的所有图像文件，从我的照片源数组的第一个元素开始，即 photoFiles，它是列表中的第一个元素。

我正在返回这样的滚动视图页面的总数：

```
- (NSInteger)numberOfPagesInPagingScrollView:(NIPhotoAlbumScrollView *)photoScrollView {
    return self.photoFiles.count;
} 
```

但是，我无法从特定索引启动 photoview 作为方法：

```
 - (UIImage *)photoAlbumScrollView: (NIPhotoAlbumScrollView *)photoAlbumScrollView
                     photoAtIndex: (NSInteger)photoIndex
                        photoSize: (NIPhotoScrollViewPhotoSize *)photoSize
                        isLoading: (BOOL *)isLoading
          originalPhotoDimensions: (CGSize *)originalPhotoDimensions 
```

根据示例 NetworkPhotoAlbumViewController 直接调用。在启动 photoview 之前，我怎样才能让它获取特定的索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:44:17.570

在 viewDidLoad 添加这一行

```
[self.photoAlbumView setCenterPageIndex:photoIndex]; 
```

设置显示照片的索引

# orm - 为每个组件启用 Coldfusion ORM

> ID：12280688
> 
> 赞同：2
> 
> 时间：2012-09-05T11:44:10.037
> 
> 标签：orm, coldfusion, components, cfc

我已经开始在 Coldfusion 9 中使用 ORM，但是我遇到了一个问题，我设置了一个 CFC，`persistant=true`以便在我运行时`myCFC.init()`分配属性的默认值 - 但我不想要将此 CFC 与 ORM 一起使用。

问题是 Coldfusion 抛出错误**“为 cfc myCFC 定义的表 myCFC 不存在”。**

有没有办法让我的应用程序忽略某些 CFC？或者只关注特定的 CFC，除了`persistant=true`

或者，我可以在不使组件持久化的情况下让我的默认属性值生效吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:42:27.070

> 或者，我可以让我的默认属性值生效而不使组件持久化吗？

是的，只需将它们设置在您的**init()**方法中。

```
<cfcomponent name="person" persistent="false" output="false">

 <cfproperty name="gender"><!--- Non-persistent CFC: you can't set a default here --->

 <cffunction name="init" output="false>
  <cfset variables.gender = "m"><!--- Set the default here --->
 </cffunction>

</cfcomponent> 
```

您还需要在持久 CFC 中为任何复杂或动态值默认值（例如数组或当前日期）执行此操作，因为您只能在属性声明中设置简单的默认值（例如文字字符串或整数）。

```
<cfcomponent name="person" persistent="true" table="persons" output="false">

 <cfproperty name="gender" default="m"><!---Persistent CFC, so this simple default will be set --->
 <cfproperty name="dateCreated"><!---You can't set a default dynamic date value --->

 <cffunction name="init" output="false>
  <cfset variables.dateCreated= Now()><!--- Set the current datetime here --->
 </cffunction>

</cfcomponent> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:47:46.373

您在开头和第一个之间放置的任何代码都将被执行。我假设您使用 CFproperty 标签来设置您的默认值。相反，请使用以下结构：

```
<cfcomponent name="aCFC">

    <!---
    || Psuedo Constructor code: this code runs when the object is created.
    ||--->

    <cfset defaultVar_1 = "default value">
    ...etc

    <cffunction name="firstFunction">
        ...
    </cffunction>
</cfcomponent> 
```

# jsf-2 - 带参数的jsf2模板组件

> ID：12280691
> 
> 赞同：0
> 
> 时间：2012-09-05T11:44:26.923
> 
> 标签：jsf-2

我有一个 jsf 模板页面。在这个模板中，我想使用带参数的组件。实际上我想迭代集合。该集合应由特定页面的参数确定。参数名称为 selectedMenu。我如何在我的 bean 中使用它？

```
<div id="notes">
                    selectedMenu: #{selectedMenu}
                    <h:form>
                        <h:inputHidden value="#{notatkaController.searchForm.kategoria}">
                            <f:param value="#{selectedMenu}" />
                        </h:inputHidden>
                        <ui:repeat value="#{notatkaController.items}" var="item" varStatus="iter">
                            <f:param value="#{selectedMenu}" />
                            <p class="q-title"><strong><h:outputText value="#{item.ntaData}" /></strong></p>
                            <p class="answer"><h:outputText value="#{item.ntaDane}" escape="false" /></p>                                    
                        </ui:repeat>
                        <span>Moje notatki</span>
                        <textarea>Tu wpisz treść swojej notatki</textarea>
                        <span>[+] dodaj notatkę</span>
                    </h:form>
                </div> 
```

我的豆子：

```
@ManagedBean(name = "notatkaController")
@ViewScoped
public class NotatkaController extends AbstractController<Notatka> implements Serializable {

@EJB
private pl.alfaprojekt.model.session.NotatkaFacade ejbFacade;
 private NotatkaSearchForm searchForm;

public DataModel getItems() {
    if (items == null)
        items = getPagination().createPageDataModel();
    return items;
}

public PaginationHelper getPagination() {
    if (pagination == null) {
        if (paginationSize == null)
            paginationSize = 10;
        pagination = new PaginationHelper(paginationSize) {

            @Override
            public int getItemsCount() {
                return getFacade().countByParam(getSearchForm());
            }

            @Override
            public DataModel createPageDataModel() {
                if (rapId == null)
                    return new ListDataModel(getFacade().findRangeByParam(getSearchForm(), new int[]{getPageFirstItem(), getPageFirstItem() + getPageSize()}));
                else {
                    Long uzyId = SessionUtil.getUser().getUzyId();
                    return new ListDataModel(convertToRaportWierszList(getFacade().findRangeByParam(getSearchForm(), new int[]{getPageFirstItem(), getPageFirstItem() + getPageSize()}), uzyId));
                }
            }
        };
    }
    return pagination;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T20:27:45.087

我不确定我是否理解了这个问题，但我回答的问题是：

我想动态显示一些东西。我想告诉它在访问页面时要显示什么。

**看法：**

然后，您可以使用以下内容：

```
<f:event listener="#{myBean.myMethod}" type="preRenderView" /> 
```

**豆：**

```
public void myMethod(ComponentSystemEvent event){
//your logic here
} 
```

**带参数：**

```
<f:metadata>
    <f:event listener="#{myBean.myMethod}" type="preRenderView" id="fevent"/>
    <f:attribute name="myParam" value="#{mySecondBean.param)" />
</f:metadata> 
```

和

```
public void myMethod(ComponentSystemEvent event){
String id = (String) event.getComponent().getAttributes().get("myParam");
} 
```

# analytics - 使用 Auth2.x 的谷歌分析认证

> ID：12280692
> 
> 赞同：0
> 
> 时间：2012-09-05T11:44:30.477
> 
> 标签：analytics

我正在开发和应用程序，它可以为用户生成关联表的数量，当用户选择合适的客户端时，他可以根据用户 ID、密码和表 ID 查看报告。

现在，谷歌改变了认证流程，引入了 Auth2.x 流程来认证用户。

有没有人可以帮助我解决这个问题，这将是一个很大的帮助。

我是 .net 开发人员，因此非常感谢 dotnet 的任何帮助。

提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:02:58.900

看看这个链接[https://developers.google.com/analytics/resources/articles/gdata-migration-guide](https://developers.google.com/analytics/resources/articles/gdata-migration-guide)。查看“在 Google API 控制台中创建项目”部分，它将引导您完成整个过程。这就是我使用的，它有帮助。

# python - Chaco：从 chaco 图中获取索引和值

> ID：12280693
> 
> 赞同：2
> 
> 时间：2012-09-05T11:44:33.500
> 
> 标签：python, indexing, plot, range, chaco

我正在开发一个有两个相邻的地块的程序。第一个图有一个 ZoomTool、一个 PanTool 和一个 RangeSelection 工具。第二个图应根据左侧图中所做的更改（缩放等）进行修改。

缩放后是否有可能获得新的索引和值？以及如何在进行范围选择后获得新的索引范围？该索引也应该是右图的新索引，直到不再选择所选部分。

我将在此文本下方发布我的代码，但您也可以[在此处查看](http://paste.ubuntu.com/1185777/)

这是我的代码：

```
#=================================================
# Code
#=================================================

# Enthought library imports
from traits.api import HasTraits, Int, Instance
from traits.api import *
from traitsui.api import Item, View, Group, HGroup, VGroup
from enable.api import Component
from enable.component_editor import ComponentEditor
from traitsui.menu import OKButton, CancelButton
# Chaco imports
from chaco.tools.api import RangeSelection, RangeSelectionOverlay
from chaco.chaco_plot_editor import ChacoPlotEditor, ChacoPlotItem
from chaco.api import Plot, ArrayPlotData, OverlayPlotContainer, create_line_plot, create_scatter_plot, add_default_axes, add_default_grids, PlotAxis, PlotLabel
from chaco.tools.api import PanTool, BroadcasterTool, ZoomTool
# Numpy imports
from numpy import linspace, pi, sin, tan

def main():
    # normally this function gets its values out of other files
    x1 = -2*pi
    x2 = pi
    y1 = 0
    y2 = 2
    uebergabe = {"xlim":[x1,x2], "ylim":[y1,y2], "ranges":[x1,x2]}
    return uebergabe

class Trait(HasTraits):
    plot = Instance(Component)    

    #creates the container
    container = OverlayPlotContainer(padding = 50, fill_padding = True,
                        bgcolor = "lightgray", use_backbuffer=True)
    container2 = OverlayPlotContainer(padding = 50, fill_padding = True,
                        bgcolor = "lightgray", use_backbuffer=True)

    # Traits
    xmin = Float
    xmax = Float
    ymin = Float
    ymax = Float
    rangeXMin = Float
    rangeXMax = Float

    # TraitsUI view
    traits_view = View(Group(
        HGroup(
            VGroup(Item("container", editor = ComponentEditor(), show_label = False)),
            VGroup(Item("container2", editor = ComponentEditor(), show_label = False))),        
        HGroup(Item("xmin"), Item("xmax"), Item("ymin"), Item("ymax"), show_border = True, label = "Plotborders"),
        HGroup(Item("rangeXMin", label="x_min"), Item("rangeXMax", label="x_max"), show_border = True, label="Range of right plot")), 
        buttons = [OKButton, CancelButton], resizable = True, width = 1000, height = 800)

    # Constructor
    def __init__(self):
        super(Trait, self).__init__()

        uebergabe = main()

        # initialize traits
        self.xmin = uebergabe["xlim"][0]
        self.xmax = uebergabe["xlim"][1]
        self.ymin = uebergabe["ylim"][0]
        self.ymax = uebergabe["ylim"][1]
        self.rangeXMin = uebergabe["ranges"][0]
        self.rangeXMin = uebergabe["ranges"][1]

        self._create_Container()

    def _create_Container(self):

        #creating dict of plots and the broadcaster
        plots = {}
        broadcaster = BroadcasterTool()

        #=====================first container===========================

        #first plot
        index = linspace(-2*pi,2*pi,1000)
        plot = create_line_plot((index, sin(index)+0.5), color = "blue", index_bounds=(self.xmin, self.xmax), value_bounds = (self.ymin, self.ymax))
        plot.bgcolor = "white"
        plot.border_visible = True
        value_mapper = plot.value_mapper
        index_mapper = plot.index_mapper
        add_default_grids(plot)
        add_default_axes(plot)

        # range selection
        self.rangeselect = RangeSelection(plot, left_button_selects = False, auto_handle_event = False)
        plot.active_tool = self.rangeselect
        plot.overlays.append(RangeSelectionOverlay(component=plot))

        #adds plot to the container
        self.container.add(plot)

        # second plot
        index2 = linspace(-5*pi,4*pi,1000)
        plot = create_line_plot((index2, tan(index2)), color = "black", index_bounds=(self.xmin, self.xmax), value_bounds = (self.ymin, self.ymax))
        plot.value_mapper = value_mapper
        value_mapper.range.add(plot.value)
        plot.index_mapper = index_mapper
        index_mapper.range.add(plot.index)

        # Create a pan tool and give it a reference to the plot
        pan = PanTool(plot, drag_button="left")
        broadcaster.tools.append(pan)

        # allows to zoom
        zoom = ZoomTool(plot, tool_mode="box", always_on = False, visible = True)
        plot.overlays.append(zoom)

        #adds plot to the container
        self.container.add(plot)

        # appends broadcaster to the container
        self.container.tools.append(broadcaster)

        # title of the container
        self.container.overlays.append(PlotLabel("left plot", component=self.container, overlay_position = "top"))

        #==============end of first container===========================

        #====================second container===========================

        #first plot2
        index3 = linspace(-10*pi,10*pi,500)
        plot2 = create_scatter_plot((index3, sin(index3)), color = "blue", index_bounds=(self.rangeXMin, self.rangeXMax), value_bounds = (self.ymin, self.ymax))
        plot2.bgcolor = "white"
        plot2.border_visible = True
        plot2.value_mapper = value_mapper # the plot uses the same index and
        plot2.index_mapper = index_mapper # value like the plots of container1
        #value_mapper.range.add(plot2.value)
        #index_mapper.range.add(plot2.index)
        add_default_grids(plot2)
        add_default_axes(plot2)

        #adds plot to the container
        self.container2.add(plot2)

        # title of the container
        self.container2.overlays.append(PlotLabel("right plot", component=self.container, overlay_position = "top"))

        #=============end of second container===========================
gui = Trait()
gui.configure_traits() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T12:59:46.440

您可以使用 sync_trait() 在两个特征之间同步值：

```
self.sync_trait("xmin", index_mapper.range, "_low_value")
self.sync_trait("xmax", index_mapper.range, "_high_value")
self.sync_trait("ymin", value_mapper.range, "_low_value")
self.sync_trait("ymax", value_mapper.range, "_high_value")

self.sync_trait("rangeXMin", plot2.index_mapper.range, "low", False)
self.sync_trait("rangeXMax", plot2.index_mapper.range, "high", False) 
```

要捕获范围选择更改：

```
self.rangeselect.on_trait_change(self.on_selection_changed, "selection")

def on_selection_changed(self, selection):
    if selection != None:
        self.rangeXMin, self.rangeXMax = selection 
```

要捕捉轴范围变化：

```
index_mapper.on_trait_change(self.on_mapper_updated, "updated")

def on_mapper_updated(self, mapper, name, value):
    if not self.rangeselect.selection:
        self.rangeXMin = mapper.range.low
        self.rangeXMax = mapper.range.high 
```

这是完整的代码：

```
# -*- coding: utf-8 -*-
#=================================================
# Code
#=================================================

# Enthought library imports
from traits.api import HasTraits, Int, Instance
from traits.api import *
from traitsui.api import Item, View, Group, HGroup, VGroup
from enable.api import Component
from enable.component_editor import ComponentEditor
from traitsui.menu import OKButton, CancelButton
# Chaco imports
from chaco.tools.api import RangeSelection, RangeSelectionOverlay
from chaco.chaco_plot_editor import ChacoPlotEditor, ChacoPlotItem
from chaco.api import Plot, ArrayPlotData, OverlayPlotContainer, create_line_plot, create_scatter_plot, add_default_axes, add_default_grids, PlotAxis, PlotLabel
from chaco.tools.api import PanTool, BroadcasterTool, ZoomTool
# Numpy imports
from numpy import linspace, pi, sin, tan

def main():
    # normally this function gets its values out of other files
    x1 = -2*pi
    x2 = pi
    y1 = 0
    y2 = 2
    uebergabe = {"xlim":[x1,x2], "ylim":[y1,y2], "ranges":[x1,x2]}
    return uebergabe

class Trait(HasTraits):
    plot = Instance(Component)    

    #creates the container
    container = OverlayPlotContainer(padding = 50, fill_padding = True,
                        bgcolor = "lightgray", use_backbuffer=True)
    container2 = OverlayPlotContainer(padding = 50, fill_padding = True,
                        bgcolor = "lightgray", use_backbuffer=True)

    # Traits
    xmin = Float
    xmax = Float
    ymin = Float
    ymax = Float
    rangeXMin = Float
    rangeXMax = Float

    # TraitsUI view
    traits_view = View(Group(
        HGroup(
            VGroup(Item("container", editor = ComponentEditor(), show_label = False)),
            VGroup(Item("container2", editor = ComponentEditor(), show_label = False))),        
        HGroup(Item("xmin"), Item("xmax"), Item("ymin"), Item("ymax"), show_border = True, label = "Plotborders"),
        HGroup(Item("rangeXMin", label="x_min"), Item("rangeXMax", label="x_max"), show_border = True, label="Range of right plot")), 
        buttons = [OKButton, CancelButton], resizable = True, width = 1000, height = 500)

    # Constructor
    def __init__(self):
        super(Trait, self).__init__()

        uebergabe = main()

        # initialize traits
        self.xmin = uebergabe["xlim"][0]
        self.xmax = uebergabe["xlim"][1]
        self.ymin = uebergabe["ylim"][0]
        self.ymax = uebergabe["ylim"][1]
        self.rangeXMin = uebergabe["ranges"][0]
        self.rangeXMin = uebergabe["ranges"][1]

        self._create_Container()

    def _create_Container(self):

        #creating dict of plots and the broadcaster
        plots = {}
        broadcaster = BroadcasterTool()

        #=====================first container===========================

        #first plot
        index = linspace(-2*pi,2*pi,1000)
        plot = create_line_plot((index, sin(index)+0.5), color = "blue", index_bounds=(self.xmin, self.xmax), value_bounds = (self.ymin, self.ymax))
        plot.bgcolor = "white"
        plot.border_visible = True
        value_mapper = plot.value_mapper
        index_mapper = plot.index_mapper
        add_default_grids(plot)
        add_default_axes(plot)

        self.sync_trait("xmin", index_mapper.range, "_low_value")
        self.sync_trait("xmax", index_mapper.range, "_high_value")
        self.sync_trait("ymin", value_mapper.range, "_low_value")
        self.sync_trait("ymax", value_mapper.range, "_high_value")

        # range selection
        self.rangeselect = RangeSelection(plot, left_button_selects = False, auto_handle_event = False)
        plot.active_tool = self.rangeselect
        plot.overlays.append(RangeSelectionOverlay(component=plot))
        self.rangeselect.on_trait_change(self.on_selection_changed, "selection")

        #adds plot to the container
        self.container.add(plot)

        # second plot
        index2 = linspace(-5*pi,4*pi,1000)
        plot = create_line_plot((index2, tan(index2)), color = "black", index_bounds=(self.xmin, self.xmax), value_bounds = (self.ymin, self.ymax))
        plot.value_mapper = value_mapper
        value_mapper.range.add(plot.value)
        plot.index_mapper = index_mapper
        index_mapper.range.add(plot.index)

        # Create a pan tool and give it a reference to the plot
        pan = PanTool(plot, drag_button="left")
        broadcaster.tools.append(pan)

        # allows to zoom
        zoom = ZoomTool(plot, tool_mode="box", always_on = False, visible = True)
        plot.overlays.append(zoom)

        #adds plot to the container
        self.container.add(plot)

        # appends broadcaster to the container
        self.container.tools.append(broadcaster)

        # title of the container
        self.container.overlays.append(PlotLabel("left plot", component=self.container, overlay_position = "top"))

        #==============end of first container===========================

        #====================second container===========================

        #first plot2
        index3 = linspace(-10*pi,10*pi,500)
        plot2 = create_scatter_plot((index3, sin(index3)), color = "blue", index_bounds=(self.rangeXMin, self.rangeXMax), value_bounds = (self.ymin, self.ymax))
        plot2.bgcolor = "white"
        plot2.border_visible = True
        plot2.value_mapper = value_mapper # the plot uses the same index and
        #plot2.index_mapper = index_mapper # value like the plots of container1
        self.sync_trait("rangeXMin", plot2.index_mapper.range, "low", False)
        self.sync_trait("rangeXMax", plot2.index_mapper.range, "high", False)

        plot2.index_mapper.range.low = 0
        plot2.index_mapper.range.high = 2        
        #value_mapper.range.add(plot2.value)
        #index_mapper.range.add(plot2.index)
        add_default_grids(plot2)
        add_default_axes(plot2)

        #adds plot to the container
        self.container2.add(plot2)

        # title of the container
        self.container2.overlays.append(PlotLabel("right plot", component=self.container, overlay_position = "top"))

        index_mapper.on_trait_change(self.on_mapper_updated, "updated")

        #=============end of second container===========================

    def on_mapper_updated(self, mapper, name, value):
        if not self.rangeselect.selection:
            self.rangeXMin = mapper.range.low
            self.rangeXMax = mapper.range.high

    def on_selection_changed(self, selection):
        if selection != None:
            self.rangeXMin, self.rangeXMax = selection

gui = Trait()
gui.configure_traits() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-05T15:25:27.957

我相信有一种更简单的方法可以做你想做的事：每个`Plot`对象都有一个`range2d`属性。如果将第二个 range2d 设置为指向第一个绘图的 range2d，则您已经完成了半行的工作。这是一个完整的例子：

```
class ConnectedRange(HasTraits):
    container = Instance(HPlotContainer)
    traits_view = View(Item('container', editor=ComponentEditor(),
                       show_label=False),
                      width=1000, height=600, resizable=True, title="Connected Range")

    def _container_default(self):
        x = linspace(-14, 14, 100)
        y = sin(x) * x**3
        plotdata = ArrayPlotData(x = x, y = y)
        scatter = Plot(plotdata)
        scatter.plot(("x", "y"), type="scatter", color="blue") 
        line = Plot(plotdata)
        line.plot(("x", "y"), type="line", color="blue")

        scatter.tools.append(PanTool(scatter)) 
        scatter.tools.append(ZoomTool(scatter))
        line.tools.append(PanTool(line)) 
        line.tools.append(ZoomTool(line))

        # connect the ranges so that zooming in one zooms in the other
        scatter.range2d = line.range2d
        return HPlotContainer(scatter, line) 
```

# java - 来自休眠的MySql查询语法错误

> ID：12280698
> 
> 赞同：0
> 
> 时间：2012-09-05T11:44:43.157
> 
> 标签：java, mysql, hibernate

以下查询未执行。它正在抛出错误。我无法识别错误。它是由hibenate生成的。驱动类 org.gjt.mm.mysql.Driver，方言：org.hibernate.dialect.MySQLDialect 请帮帮我，这是错误。

jdbc:mysql://localhost:3306/mydb

```
select this_.Student_Id as Student1_8_0_, this_.student Name as student2_8_0_, 
       this_.address as address8_0_, this_.Father Name as Father4_8_0_, 
       this_.Mother Name as Mother5_8_0_, this_.Primary Contact No as Primary6_8_0_,
       this_.Secondary Contact No as Secondary7_8_0_, this_.Occupation as Occupation8_0_, 
       this_.Mode_Id as Mode9_8_0_, this_.Class_Id as Class10_8_0_, 
       this_.Route_No as Route11_8_0_ 
from Tbl_Student this_ 
```

如果我`select * from Tbl_Student`像这样运行它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:49:34.510

您应该使用反引号将用空格分隔的列名括起来：

```
`this_`.`Father Name`, .. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:54:57.147

那个代码是什么？是你的 HQL 语句还是 Hibernate 生成的 SQL 语句？

如果是您的 HQL 语句：
您必须使用属性名称，即 Java 成员名称作为列名称。

如果是Hibernate生成的SQL语句：
你的映射可能有错误，并且你在Father_Name、Mother_Name、Primary_Contact_No和Secondary_Contact_No中使用了空格而不是下划线。

# java - 如何编译具有 Apache Commons 依赖项的 servlet 类？

> ID：12280699
> 
> 赞同：0
> 
> 时间：2012-09-05T11:44:44.753
> 
> 标签：java, servlets, compilation, javac

我想使用 apache commons 文件上传，但我是 Java servlet 和 Apache Tomcat 的新手。请有人指导我如何通过命令提示符手动编译 servlet 类，而不是使用 NetBeans 或其他 IDE。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:46:10.340

只需在编译时将您依赖的 JAR 添加到 CLASSPATH 中。您需要包含 HttpServlet 以及所有 Apache Commons JAR 的那个。使用 -cp 选项设置 CLASSPATH，*而不是*环境变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T11:51:16.647

Tomcat 应用程序开发文档，其中包括有关如何构建 servlet 的说明以及许多其他相关内容。见这里：http: [//tomcat.apache.org/tomcat-7.0-doc/appdev/index.html](http://tomcat.apache.org/tomcat-7.0-doc/appdev/index.html)

您只需要修改示例（例如“build.xml”文件）以将附加依赖项的 JAR 文件添加到类路径中。

# wordpress - 如何查找脚本错误

> ID：12280700
> 
> 赞同：0
> 
> 时间：2012-09-05T11:44:46.683
> 
> 标签：wordpress, robot

在过去的 10 个小时里，我的网站一直处于关闭状态。据我的主人说：

> [图片http://www.yetzira.com/wp-content/uploads/2011/03/ben10.jpg](http://www.yetzira.com/wp-content/uploads/2011/03/ben10.jpg)似乎 受到大量连接的严重打击。

这导致该服务器上的所有站点长时间停机。我不知道如何编写脚本，也不记得曾经使用过可以调用此图像的脚本。如何在我的 wordpress 网站中找到这个脚本？

我的目标是找到这个脚本并删除它，但我不知道该怎么做。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:58:28.943

不是脚本问题，您的图像可能已被[热链接](http://en.wikipedia.org/wiki/Inline_linking)（由另一个站点使用）。

*   您应该查看您的服务器日志以查找该站点是什么（使用引用信息）。

*   您可以删除此文件以避免服务器再次关闭

*   可以尝试防止盗链，试试[http://www.htaccesstools.com/hotlink-protection/](http://www.htaccesstools.com/hotlink-protection/)

# regex - 正则表达式匹配大写单词的字符串，由单个空格分隔，字符串长度 <= 20

> ID：12280704
> 
> 赞同：2
> 
> 时间：2012-09-05T11:44:55.923
> 
> 标签：regex, string, limit

好的，这里是：目标是制作匹配“BLABLA BLA B BLAB”字符串的正则表达式，例如：

```
^[A-Z](\s?[A-Z])*$ 
```

但主要问题是匹配字符串的长度可以是 1 到无穷大之间的任何值。那么是否有可能制作一个行为与上述完全相同的正则表达式，但仅当字符串长度小于或等于 20 个字符时才匹配？（字符串开头和/或结尾处不允许有空格。）

**我知道**在这种情况下，最好在正则表达式之外更改字符串长度（例如，在我的应用程序的代码中，已经这样做了），但我只是好奇我是否遗漏了一些简单的东西？

编辑：20 个字符是字符串的全长，包括单词之间的可选**单个空格。**字长可以是 1 个字符或更多。因此，“AAAAABBBBBDDDDDEEEEE”（20 个大写字母）应该匹配，“AAAAABBBBB CCCCDDDDD”应该匹配（中间有 1 个空格），“AAAA BBBB CCCC DDDDD”应该匹配（中间有 3 个**单个**空格，字符串长度为 20），“ A A B" 应该匹配（中间有一个空格，总长度 < 20），"AAAAABBBBBCCCCCDDDDDF" 不应该匹配（因为字符串长度为 21）等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T12:28:01.663

试试这个

```
^(?=.{1,20}$)[A-Z](\s?[A-Z])*$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:07:26.120

用这个：

```
^(?=.{1,20}$)([A-Z]+\s?)+[A-Z]$ 
```

# c++ - 在 Windows 中使用 rinside 和 qt

> ID：12280707
> 
> 赞同：4
> 
> 时间：2012-09-05T11:45:17.687
> 
> 标签：c++, r, qt, rcpp, rinside

我开始在 C++ 中使用 rinside 和 rcpp。我只想从零开始，所以我的 QT 项目除了创建一个 RInside 实例之外什么都没有，我有一个我无法解决的问题。我在项目中只有一个对话框。

我的项目文件：

```
QT       += core gui

TARGET = rcpp-rinside
TEMPLATE = app

SOURCES += main.cpp\
    dialog.cpp

HEADERS  += dialog.h

FORMS    += dialog.ui

INCLUDEPATH += C:\R\R-2.15.1\include
INCLUDEPATH += C:\R\R-2.15.1\library\Rcpp\include
INCLUDEPATH += C:\R\R-2.15.1\library\RInside\include

LIBS += -LC:\R\R-2.15.1\bin\i386 -lR
LIBS += -LC:\R\R-2.15.1\library\Rcpp\lib\i386\ -lRcpp
LIBS += -LC:\R\R-2.15.1\library\RInside\lib\i386\ -lRInside 
```

主文件：

```
#include <QtGui/QApplication>
#include "dialog.h"

int main(int argc, char *argv[])
{
    RInside R(argc, argv);

    QApplication a(argc, argv);

    Dialog w;

    w.show();

    return a.exec();
} 
```

对于其他文件，那里什么都没有，因为它只是一个空表单。当我构建它时，我遇到了很多错误，如下所示：

```
C:\R\R-2.15.1\library\RInside\lib\i386\/libRInside.a(RInside.o):RInside.cpp:(.text+0x39c): undefined reference to `__gxx_personality_sj0'
C:\R\R-2.15.1\library\RInside\lib\i386\/libRInside.a(RInside.o):RInside.cpp:(.text+0x3bb): undefined reference to `_Unwind_SjLj_Register'
C:\R\R-2.15.1\library\RInside\lib\i386\/libRInside.a(RInside.o):RInside.cpp:(.text+0x419): undefined reference to `_Unwind_SjLj_Unregister'
C:\R\R-2.15.1\library\RInside\lib\i386\/libRInside.a(RInside.o):RInside.cpp:(.text+0x471): undefined reference to `_Unwind_SjLj_Resume'
C:\R\R-2.15.1\library\RInside\lib\i386\/libRInside.a(RInside.o):RInside.cpp:(.text+0x4cc): undefined reference to `__gxx_personality_sj0'
C:\R\R-2.15.1\library\RInside\lib\i386\/libRInside.a(RInside.o):RInside.cpp:(.text+0x4eb): undefined reference to `_Unwind_SjLj_Register'
C:\R\R-2.15.1\library\RInside\lib\i386\/libRInside.a(RInside.o):RInside.cpp:(.text+0x608): undefined reference to `_Unwind_SjLj_Unregister'
C:\R\R-2.15.1\library\RInside\lib\i386\/libRInside.a(RInside.o):RInside.cpp:(.text+0x64c): undefined reference to `_Unwind_SjLj_Unregister'
C:\R\R-2.15.1\library\RInside\lib\i386\/libRInside.a(RInside.o):RInside.cpp:(.text+0x746): undefined reference to `_Unwind_SjLj_Unregister'
C:\R\R-2.15.1\library\RInside\lib\i386\/libRInside.a(RInside.o):RInside.cpp:(.text+0x7f6): undefined reference to `_Unwind_SjLj_Resume'
C:\R\R-2.15.1\library\RInside\lib\i386\/libRInside.a(RInside.o):RInside.cpp:(.text+0x84c): undefined reference to `__gxx_personality_sj0'
C:\R\R-2.15.1\library\RInside\lib\i386\/libRInside.a(RInside.o):RInside.cpp:(.text+0x86b): undefined reference to `_Unwind_SjLj_Register'
C:\R\R-2.15.1\library\RInside\lib\i386\/libRInside.a(RInside.o):RInside.cpp:(.text+0x8c6): undefined reference to `_Unwind_SjLj_Unregister'
C:\R\R-2.15.1\library\RInside\lib\i386\/libRInside.a(RInside.o):RInside.cpp:(.text+0x9c5): undefined reference to `_Unwind_SjLj_Resume'
C:\R\R-2.15.1\library\RInside\lib\i386\/libRInside.a(RInside.o):RInside.cpp:(.text+0x9ec): undefined reference to `__gxx_personality_sj0' 
```

我正在使用 R-2.15.1、RInside 0.2.7、Rcpp 0.9.10、QT 4.8.0、MinGW 4.6.1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T11:58:13.323

您*必须*使用与 R 相同的工具链构建的 Qt 版本——即编译器的 MinGW 构建。

作为从 Qt 源代码开始的概念验证，我做了一次。

除此之外，我*强烈建议从`qtdensity.pro`*我的 RInside 包示例附带的*文件开始。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T15:42:09.957

在链接到 Rcpp 之前，您必须告诉链接器链接到 RInside。请参阅[此 rcpp-devel 帖子](http://lists.r-forge.r-project.org/pipermail/rcpp-devel/2012-November/004771.html)。

要让 qtdensity 在 windows 下工作，您需要修改 qtdensity.pro 文件的第 46 行：

```
QMAKE_LIBS += $$RLDFLAGS $$RBLAS $$RLAPACK $$RCPPLIBS $$RINSIDELIBS 
```

并切换 $$RCPPLIBS 和 $$RINSIDELIBS 的顺序：

```
QMAKE_LIBS += $$RLDFLAGS $$RBLAS $$RLAPACK $$RINSIDELIBS $$RCPPLIBS 
```

如前所述，您还必须在 qtdensity.pro 文件中将单引号替换为双引号。这些修改将在 RInside 的下一个版本中（当前为 0.2.9）。

此外，您必须使用相同的编译器来构建 Rcpp & RInside 并编译您的 Qt 应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T13:07:42.363

只是为了分享我迄今为止在 Windows 7 64 位和 Windows XP SP3 32 位中使用 Rcpp 和 Rinside 的“经验”。我安装了最新版本的 R (2.15.1) 并从源代码安装了 Rcpp 和 RInside。

> install.packages("路径/Rcpp_x.xxtar.gz",repos=NULL,type="source",INSTALL_opts="--no-multiarch")

*   在 win7 中，如果没有 --no-multiarch 选项，我无法安装。
*   我可以在两个系统中编译 RInside 的所有标准示例（在 Makefile.win 中总是使用 --arch32）
*   我可以在 Win7 中运行所有可执行文件。在 WinXP 中，我有错误“无法加载基础包”
*   对于 QT 示例 qtdensity，我不再有“__gxx_personality_sj0”和 co。错误（这是一个小改进）。相反，我有以下错误：

> C:/R/R-2.15.1/library/RInside/lib/i386/libRInside.a(RInside.o):RInside.cpp:(.text+0xbd1): 未定义`Rcpp::Function::Function(std::string const&)' C:/R/R-2.15.1/library/RInside/lib/i386/libRInside.a(RInside.o):RInside.cpp:(.text+0xccd): undefined reference to`对 Rcpp::Language'C 的 vtable 的引用:/R/R-2.15.1/library/RInside/lib/i386/libRInside.a(RInside.o):RInside.cpp:(.text+0xcd9): 未定义引用`Rcpp::Language::update()' C:/R/R-2.15.1/library/RInside/lib/i386/libRInside.a(RInside.o):RInside.cpp:(.text+0xce1): undefined reference to`Rcpp::Function::~Function( )' C:/R/R-2.15.1/library/RInside/lib/i386/libRInside.a(RInside.o):RInside.cpp:(.text+0xd2c): 未定义引用 `Rcpp::DottedPair: ：操作员'

我认为这仅与未正确包含的库相关。- 我发现的另一件事：处理 qtdensity.pro 中 rcpp 和 rinside 的标头和库的脚本仅在我将简单引号更改为双引号时才起作用：而不是：

> $$system($$R_HOME/bin/Rscript -e \'Rcpp:::CxxFlags()\')

我改为：

> $$system($$R_HOME/bin/Rscript -e \"Rcpp:::CxxFlags()\")

还在玩它，会让你知道接下来会发生什么:) Andry

# trigger.io - 使用 trigger.io 获取相机拍摄的图像的 dataUrl

> ID：12280712
> 
> 赞同：1
> 
> 时间：2012-09-05T11:45:28.357
> 
> 标签：trigger.io

[我在尝试使用与示例“如何使用反向地理编码构建基于位置的混合移动应用程序”](http://trigger.io/cross-platform-application-development-blog/2012/05/15/how-to-build-a-location-based-hybrid-mobile-app-with-reverse-geocoding/ "如何使用反向地理编码构建基于位置的混合移动应用程序")中使用的代码类似的代码获取使用相机拍摄的图像的 dataUrl 时遇到问题。我正在使用 Android 2.3.5 的三星 Galaxy S2 上测试代码。

我用来获取 dataUrl 的代码是非常标准的 javascript：

```
var toDataURL = function toDataURL(uri, callback)
{
    forge.logging.log('toDataURL...');
    forge.logging.log(uri);
    var image = document.createElement('img');
    image.src = uri;
    image.onload = function ()
    {
        forge.logging.log('toDataURL image.onload...');

        // create canvas
        var canvas = document.createElement('canvas');
        canvas.id = 'canvas';
        canvas.width = image.width;
        canvas.height = image.height;

        var context = canvas.getContext('2d');

        // draw image to canvas
        context.drawImage(image, 0, 0, image.width, image.height, 0, 0,  canvas.width,  canvas.height);

        // get data url 
        var dataUrl = canvas.toDataURL();
        callback(dataUrl);
        forge.logging.log('...toDataURL image.onload');
    };
    forge.logging.log('...toDataURL');
}; 
```

问题是canvas.toDataURL返回的dataUrl总是空的（'data:,'）。作为参数传递的 uri 记录为：

> I/Forge (18019): [FORGE] 'content://io.trigger.forgeb6367d6ee13011e1b9ed12313d1adcbe/file___height=640&type=image&uri=content%3A%2F%2Fmedia%2Fexternal%2Fimages%2Fmedia%2F44%23Intent%3Bend&width=480&name=Image '

这是从调用 forge.file.URL 返回的，带有参数：

> D/Forge (18019)：本地调用“file.URL”，带有 task.params：{“uri”：“content://media/external/images/media/45#Intent;end”，“name”：“Image ","type":"image","width":480,"height":640}

大概这与权限有关。我的问题是，我必须做什么才能使代码正常工作？或者是否有其他方法可以获取用相机拍摄的文件内容？（我的目标是将照片的内容发送到网络服务。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T19:03:55.940

我将仔细查看代码以尝试在此处重新创建 - 感谢您的代码片段 - 但与此同时可能有一个更简单的解决方案。

如果您需要做的只是向用户显示图像然后将其上传到 Web 服务，您可以使用 file.getImage、file.URL 和 request.ajax。[从这里](https://github.com/trigger-corp/Forge-Demo-Apps/blob/master/camera/src/index.html)和[这里](http://docs.trigger.io/en/v1.4/modules/file.html#notes)的代码拼凑在一起：

```
forge.file.getImage({width: 300, height: 300}, function (file) {
  // Get a URL to the returned file object which can be used from the local webview.
  forge.file.URL(file, function (url) {
    document.getElementById('img').src = url;
  });
  forge.request.ajax({
    url: "http://example.com/file_upload",
    files: [file]
  });
}); 
```

这对你有用吗？

# javascript - 如何将 JSON 数据加载到 Jqgrid 中？

> ID：12280713
> 
> 赞同：3
> 
> 时间：2012-09-05T11:45:34.037
> 
> 标签：javascript, jquery, json, jqgrid

我使用以下方式将数据加载到jqgrid中。我无法将**json数据**加载到jqgrid中。所以我将json解析为像**mydata = json.parse(jsondata)**这样的数组。然后我绑定这个***数组(mydata)***使用数据类型进入 jqgrid **：“本地”** 。我的问题是**如何将 json 数据绑定到 jqgrid？**

```
 $("#datagrid").jqGrid({

                    datatype: "local", 
                    data: mydata,
                    colNames:['companyid','company', 'price', 'Change','perchange','LastUpdated'],
                    colModel:[
                        {name:'companyid',index:'companyid', width:100,editable:true,editoptions:{size:10}},
                        {name:'company',index:'company', width:100,editable:true},
                        {name:'price',index:'price', width:100,editable:true,editoptions:{size:10}},
                        {name:'Change',index:'Change', width:100,editable:true,editoptions:{size:25}},
                        {name:'perchange',index:'perchange', width:100, align:"right",editable:true,editoptions:{size:10}},
                        {name:'LastUpdated',index:'LastUpdated', width:200, align:"right",editable:true,editoptions:{size:10}}
                    ],
                    rowNum:10,
                    rowList:[3,6],
                    loadonce: true,
                    pager: '#navGrid',
                    sortname: 'companyid',
                    sortorder: "asc", 
                    height: 210,
                    width:600,
                    onSelectRow: function(id)
                                 {
                                    getID = jQuery("#datagrid").jqGrid('getCell', id, 'companyid')
                                 },
                    viewrecords: true,
                    caption:"JQ GRID"
                }); 
```

JSON格式：

```
 [
        {
            "company": "test",
            "price": 98,
            "Change": 8,
            "perchange": 8,
            "LastUpdated": "2",
            "companyid": 2
        },
        {
            "company": "test123",
            "price": 1,
            "Change": 1,
            "perchange": 1,
            "LastUpdated": "1",
            "companyid": 3
        },
        {
            "company": "abc",
            "price": 1234,
            "Change": 123,
            "perchange": 1,
            "LastUpdated": "1",
            "companyid": 1
        }
    ] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T12:19:30.927

首先，您需要定义`id`输入数据中的行。`id`每行 ( )的属性`<tr>`将设置在相应的值中。因为您已经拥有`companyid`可以扮演角色的角色，所以添加`key: true`到.`"companyid"``colModel`

直接从服务器加载日期（包括从文件加载）的问题，您可以通过添加`jsonReader`描述输入数据的格式来解决。因为您使用`loadonce: true`,输入数据`total`的属性将被忽略，您可以使用`records`以下简单形式：`page``jsonReader`

```
jsonReader: {repeatitems: false, root: function (obj) { return obj; }} 
```

对应的演示在[这里](http://www.ok-soft-gmbh.com/jqGrid/user-2.htm)。

如果您需要从您发布的数据数组中加载数据，您的代码应该可以直接工作（参见[另一个演示](http://www.ok-soft-gmbh.com/jqGrid/user-1.htm)）。我想使用在解析JSON数据时还有其他问题，但是您没有发布相应的代码。

关于`id`和的建议`key: true`仍在发生。您可以交替使用`localReader: {id: "companyid"}`第二种情况和相同的属性`id: "companyid"`。`jsonReader`我个人更喜欢使用`key: true`，因为代码易于阅读并且独立于所使用的阅读器。

# c++ - 为 iPhone sdk 编译 swiften 库

> ID：12280729
> 
> 赞同：5
> 
> 时间：2012-09-05T11:46:30.833
> 
> 标签：c++, ios, iphone, swiften

关于图书馆的简短描述：图书馆[链接](http://swift.im/swiften/)

我想为 iPhone sdk编译 swift 库（即[http://swift.im/git/swift/tag/?id=swift-2.0beta1 ）。](http://swift.im/git/swift/tag/?id=swift-2.0beta1)我检查了它的文档文件夹和编译方式，但他们只提到了 Windows 和 Unix 的编译步骤（即此页面包含编译文件的链接[http://swift.im/download/#apt](http://swift.im/download/#apt)）。但我不知道如何为 iPhone sdk 编译它。他们提到的步骤没有得到。那么，任何人都可以解释一下吗？在检查了一个文件后，我知道应该可以为 iPhone 编译。

他们提到的另一个问题是它在 GNU 通用公共许可证 v3 下，所以我可以将它用于商业应用程序，特别是苹果批准它吗？

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T12:27:02.160

Figures`Swiften`已经内置了对 iOS 设备或模拟器构建的支持。我能够构建它，但还没有测试它。

我将假设您是 z XCode 4.4（或足够现代的东西）并**以在 iPhone > 3GS 上运行的 iOS 5.1 为**目标。另外，我假设您想要构建 swiften-1.0。（如果为早期的 iPhone 构建，请改`armv7`回`armv6`下方）

为了构建它，涉及几个步骤。

# 修复路径和 SDK 版本

`swift-1.0/BuildTools/SCons/SConstruct`在文件编辑器中打开，然后：

1.  将第 232 行从

    `env["XCODE_PLATFORM_DEVELOPER_BIN_DIR"] = "/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin"`

    到

    `env["XCODE_PLATFORM_DEVELOPER_BIN_DIR"] = "/Applications/Xcode.app/Contents" + "/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin"`

2.  在第 234 行，更改`armv6`为`armv7`

3.  在第 239 行，将“4.0”更改为“5.1”
4.  将第 240 行从

    `env["XCODE_SDKROOT"] = "/Developer/Platforms/" + sdkPart + ".platform/Developer/SDKs/" + sdkPart + sdkVer + ".sdk"`

    到

    `env["XCODE_SDKROOT"] = "/Applications/Xcode.app/Contents" + "/Developer/Platforms/" + sdkPart + ".platform/Developer/SDKs/" + sdkPart + sdkVer + ".sdk"`

# 复制`crt_externs.h`到`swift-1.0/`

（来自 Matt Galloway 的[iPhone 编译提升](http://www.galloway.me.uk/2009/11/compiling-boost-for-the-iphone/)）

复制`crt_externs.h`到`swift`'目录；在 中时`swift-1.0/`，执行：

```
cp /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/usr/include/crt_externs.h . 
```

# 下载并构建`openssl`

`swiften`需要`openssl`，但iOS没有内置的，所以你必须手动下载和编译。在终端中执行以下命令：

```
cd <swift-directory>/3rdParty/OpenSSL
wget http://www.openssl.org/source/openssl-1.0.1c.tar.gz 
```

这将下载 openssl 的源代码；为了构建它，我使用了[来自 GitHub 的脚本](https://github.com/st3fan/ios-openssl)。仍在`<swift-directory>/swift-1.0/3rdParty/OpenSSL`，执行，

```
wget --no-check-certificate https://raw.github.com/st3fan/ios-openssl/master/build.sh 
```

编辑`build.sh`- 将第 10 行从 更改`1.0.1b`为`1.0.1c`。

现在，`chmod +x build.sh`最后`./build.sh`。这将需要几分钟的时间来构建`openssl`。

# 建造`swiften`

你快到了 - 将目录更改为的根目录`swift`，然后执行

```
./scons Swiften allow_warnings=yes target=iphone-device openssl="<swift-directory>/3rdParty/OpenSSL" 
```

这将构建一个库，用于链接为设备构建的应用程序；如果您想在模拟器中运行它，请更改`target=iphone-device`为`target-iphone-simulator`上面的行。库文件`libSwiften.a`可以在`<swift-directory>/Swiften`.

# join - 加入VB6后字符串中的空格

> ID：12280733
> 
> 赞同：0
> 
> 时间：2012-09-05T11:46:44.153
> 
> 标签：join, vb6

```
Private Sub FKeyButton_Click(Index As Integer)

    Dim curChild As Form
    Set curChild = frmMain.ActiveForm

    Dim funcStr As String
    Dim funcStrA(3) As String
    funcStrA(0) = "F"
    funcStrA(1) = str(Index)
    funcStrA(2) = "_Click"

    funcStr = Join(funcStrA, "")

    If ExistsFunction(funcStr, curChild) Then
        CallByName curChild, funcStr, VbMethod
    End If

End Sub 
```

结果应该是，当单击按钮时，调用实际 mdichild 中的函数。

例如，单击索引为“7”的按钮，字符串“funcStr”的值应为“F7_Click”。但值为“F 7_Click”，exist函数返回false。

我认为问题出在连接内，但我也尝试过修剪，但没有效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T11:52:08.360

实际上，如果我没记错的话，就是`Str()`函数。它在前面添加一个空格作为标志的占位符。使用`CStr()`或直接分配`Index`给`funcStrA(1)`并让它隐式转换为字符串。

# testing - 如何通过 Arquillian 的 JavaScript 确认来测试按钮单击？

> ID：12280734
> 
> 赞同：3
> 
> 时间：2012-09-05T11:46:58.063
> 
> 标签：testing, selenium, selenium-webdriver, jsf-1.2, jboss-arquillian

我正在用 Arquillian 测试我的 JSF。

一个简单的按钮如下所示：

```
<h:form id="myForm">
  <a4j:commandLink value="delete" 
   ajaxSingle="true" id="delete"
   action="#{controller.delete(object)}" 
   reRender="something" status="globalStatus" 
   onclick="if(!confirm('do you really wanna delete this?')){return false;}" />
</h:form> 
```

控制器功能将如下所示

```
delete(Object object){ 
  do something 
} 
```

我的测试看起来像这样

```
@RunWith(Arquillian.class)
public class TestCategoryPage extends Browser 

@Test
@RunAsClient
public void delete_test(){
browser.open(URL);
browser.click("id=myForm:cbDelete");
Assert.assertTrue("something", browser.isElementPresent("xpath=//p[contains(text(), 'deleted successfull')]")); 
```

所有其他测试都在工作，但是当我运行这个测试时，我得到以下异常：

> com.thoughtworks.selenium.SeleniumException：错误：出现意外确认！[你真的想删除这个吗？] 在 com.thoughtworks.selenium.HttpCommandProcessor.throwAssertionFailureExceptionOrError(HttpCommandProcessor.java:112)

有什么办法可以捕捉到这个javascript确认吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:26:02.383

在“删除成功”消息之前似乎有一个确认弹出。如果是这种情况，您需要处理弹出的警报。尝试关注

```
driver.switchTo().alert().accept(); 
```

或者您可以使用 javascript 执行程序来覆盖确认框：

```
js.executeScript("window.originalConfirm = window.confirm;window.confirm = function(m) { return true; };"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T08:56:29.157

一种选择是查看 Arquillian Graphene：[https ://docs.jboss.org/author/display/ARQGRA/Getting+Started](https://docs.jboss.org/author/display/ARQGRA/Getting+Started)

Graphene 内置了对 ajax 等待的支持。作为 Selenium API 的包装器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T21:02:02.230

好吧，基本上我使用 jsexecutor 来处理 js 的“瓶颈”：

```
//jsCLick on element function:

public void jsClick(String cssSelector){
JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("var x = $(\'"+cssSelector+"\');");
        stringBuilder.append("x.click();");
        js.executeScript(stringBuilder.toString());
} 
```

考虑到 Prashant Shukla 的 condiration 帖子，他建议你正确的想法，你可以按照以下方式行事：

```
public void jsAlertHandle(){
  JavascriptExecutor js = (JavascriptExecutor) driver;
            StringBuilder stringBuilder = new StringBuilder();
            stringBuilder.append("window.confirm;");
            stringBuilder.append("window.confirm = function(m) { return true; };");
            js.executeScript(stringBuilder.toString());
}
jsAlertHandle(); 
```

希望现在这对你来说变得更清楚了）

# android - 将我的 xml 提要中的值解析为 android 中的肥皂调用

> ID：12280736
> 
> 赞同：1
> 
> 时间：2012-09-05T11:47:07.963
> 
> 标签：android, xml-parsing, android-ksoap2

嗨，这是我的 xml 提要。

```
<feed>
  <Order>
   <orderid>1</orderid>
   <login>krishna</login>
   <total>399.99</total>
   <payment_method>Check (manual processing)</payment_method>                                  
   <firstname>krishnaveni</firstname>
   <lastname>v</lastname>
  </Order>
  <Order>
   <orderid>65</orderid>
   <login>krishna</login>
   <total>399.99</total>
   <payment_method>Phone Ordering</payment_method>
   <firstname>krishnaveni</firstname>
   <lastname>v</lastname>
 </Order>
</feed> 
```

下面的 CustomizedListview.java 从上面的 xml 提要执行 listview...它工作...在这里我必须单击列表中的任何顺序意味着它是转到下一个活动..下一个活动一个状态（微调器）字段。 .状态值的更新取决于上面的orderid ...我如何开发dis ...**在插入示例中必须显示从customisedlistview解析的orderid值...现在我希望状态更新取决于这个orderid** ..如何我可以管理我的代码吗……请帮帮我……

这是我的 android 代码： CustomizedListview：

```
 public class CustomizedListView extends Activity {
// All static variables
static final String URL = "http://192.168.1.168/xcart432pro/orderdetails.xml";
static final String KEY_SONG = "Order"; // parent node
static final String KEY_ID = "orderid";
static final String KEY_TITLE = "orderid";
static final String KEY_DATE = "date";
static final String KEY_ARTIST = "payment_method";
static final String KEY_STATUS = "status";
static final String KEY_DURATION = "total";
static final String KEY_FNAME = "firstname";
static final String KEY_LNAME = "lastname";
static final String KEY_NAME = "login";

ListView list;
LazyAdapter adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.list);

    ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML from URL
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_SONG);
    // looping through all song nodes <song>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_ID, parser.getValue(e, KEY_ID));
        map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
        map.put(KEY_ARTIST, parser.getValue(e, KEY_ARTIST));
        map.put(KEY_STATUS, parser.getValue(e, KEY_STATUS));
        map.put(KEY_FNAME, parser.getValue(e, KEY_FNAME));
        map.put(KEY_LNAME, parser.getValue(e, KEY_LNAME));
        songsList.add(map);
    }

    list=(ListView)findViewById(R.id.list);

    // Getting adapter by passing xml data ArrayList
    adapter=new LazyAdapter(this, songsList);        
    list.setAdapter(adapter);

    // Click event for single list row
    list.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            // Starting new intent
            Intent in = new Intent(getApplicationContext(), InsertionExample.class);

             startActivity(in);                 

        }
    });     
} 
```

}

这是我的 InsertionExample.java：

```
public class UpdationExample extends Activity{
EditText userName, userPassword ;
private final String NAMESPACE = "http://xcart.com";
private final String URL = "http://192.168.1.168:8089/XcartLogin/services/Updation?wsdl";
private final String SOAP_ACTION = "http://xcart.com/insertData";
private final String METHOD_NAME = "insertData";
static final String KEY_NAME = "orderid";
Button btninsert;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
      Intent in = getIntent();

    // Get XML values from previous intent
    String orderid = in.getStringExtra(KEY_NAME);

    // Displaying all values on the screen
    TextView lblName = (TextView) findViewById(R.id.textView1);

    lblName.setText(orderid);
    btninsert = (Button)findViewById(R.id.btn_insert);
    btninsert.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
         insertValues();
        }
    });
}

public void insertValues(){
 SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
 EditText userName = (EditText) findViewById(R.id.editText1);
 String user_Name = userName.getText().toString();
 EditText userPassword = (EditText) findViewById(R.id.editText2);
 String user_Password = userPassword.getText().toString();

 //Pass value for userName variable of the web service
    PropertyInfo unameProp =new PropertyInfo();
    unameProp.setName("userName");//Define the variable name in the web service method
    unameProp.setValue(user_Name);//Define value for fname variable
    unameProp.setType(String.class);//Define the type of the variable
    request.addProperty(unameProp);//Pass properties to the variable

  //Pass value for userPassword variable of the web service
    PropertyInfo passwordProp =new PropertyInfo();
    passwordProp.setName("userPassword");
    passwordProp.setValue(user_Password);
    passwordProp.setType(String.class);
    request.addProperty(passwordProp);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.setOutputSoapObject(request);
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    try{
     androidHttpTransport.call(SOAP_ACTION, envelope);
        SoapPrimitive response = (SoapPrimitive)envelope.getResponse();

        TextView result = (TextView) findViewById(R.id.textView2);
        result.setText(response.toString());

 }
 catch(Exception e){

 }
} 
```

}

这里用户名和密码的更新取决于上面 xml 提要中的 orderid

# jsoup - jsoup 获取输出存储？

> ID：12280738
> 
> 赞同：0
> 
> 时间：2012-09-05T11:47:17.337
> 
> 标签：jsoup

我正在使用卡巴斯基反病毒软件运行 Windows。

我执行了一个

```
 Document document = Jsoup.connect(link).get(); 
```

链接一些如何碰巧是一个病毒网站。每当我运行此命令时，我的防病毒窗口都会弹出并告诉“网站被阻止，因为有木马”。

我的问题是我们什么时候得到？网站物理存储在哪里？（文档）（或）它是否在内存中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:53:34.367

`Document`存储在内存中。但我认为这里的警报是当您通过“下载”网站时引起的`get()`。卡巴斯基将扫描您的传入流量，如果有病毒/木马/...阻止它。

# c# - 更新查询不起作用c#

> ID：12280740
> 
> 赞同：-3
> 
> 时间：2012-09-05T11:47:21.637
> 
> 标签：c#, sql, sql-server, sqlcommand

我在 sql management studio 中使用过这个查询并且它有效，我尝试了一个没有`and`条件的缩短查询并且它有效，为什么`and`条件会破坏代码？

```
string dbQuery = "update log_file set updated = @true where urn = @urn and companyid = @companyid";
cmd.Parameters.Add(new SqlParameter("@urn", SqlDbType.Int)).Value = urn;
cmd.Parameters.Add(new SqlParameter("@companyid", SqlDbType.Int)).Value = companyid;
cmd.Parameters.Add(new SqlParameter("@true", SqlDbType.Bit)).Value = 0;

cmd.CommandText = (dbQuery);
cmd.CommandType = CommandType.Text;
cmd.Connection = conn;
cmd.ExecuteNonQuery(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:53:17.790

如果`and companyid = @companyid`导致它不起作用（并且我假设您的意思是更新没有发生而不是收到错误消息，那么唯一的解释是您传递的 companyid 不正确。可能您在 Management Studio 中的测试正在使用您认为它应该具有的值，而不是它实际具有的值。

您应该在调试会话中确认所有参数都正确，然后找出不正确的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T11:53:41.120

将 Bit 类型替换为 false

```
cmd.Parameters.Add(new SqlParameter("@true", SqlDbType.Bit)).Value = false; 
```

如果要使用 0 作为值，请将类型参数替换为 Int

# android - 升级安卓版本时安卓单选按钮不可见

> ID：12280741
> 
> 赞同：0
> 
> 时间：2012-09-05T11:47:23.383
> 
> 标签：android, xml, radio-button

我在 android 2.3.3 中开发了一个应用程序，然后将其升级到 4.0.3，现在正在发生的是单选按钮在屏幕上不可见（尽管它们在 xml 文件中存在/可见）但是在他们的空间点击他们的中心部分可见

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:05:12.090

尝试通过 Manifest.xml 文件更改应用程序的主题.....

希望这会帮助您查看单选按钮，因为它会更改应用程序的 UI...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:52:36.957

是的，将其升级到 4.0.3 后，它将不可见..它也发生在我身上。您必须检查布局 API，例如 simple_list_item1、item2、下拉列表等...

# javascript - 如何处理单页网站中基于 document.write() 的广告标签？

> ID：12280742
> 
> 赞同：0
> 
> 时间：2012-09-05T11:47:24.860
> 
> 标签：javascript, document.write

我在 jQueryMobile 之上为 iPhone/Android 编写了一个网站。这意味着没有页面刷新。相反，所有站点都呈现在一个页面中，并且只有 URL 末尾的主题标签会更改并导致页面转换。

现在我想嵌入来自我们的一位广告合作伙伴的基于 JavaScript 的广告代码。此脚本代码通过将广告（图像或基于 js 的广告）`document.write()`写入网站。

**例子：**

```
<script>
 for (var i in adTags){
  var adTag = adTags[i];
  var jscode = adTag.jscode; // Contains document.write() call in <script> Block
  var container = $("#" + adTag.containerId);
  container.html(jscode);
 }
</script> 
```

这里的问题是，虽然`document.write()`在页面刷新的静态站点上运行良好，但单页网站会被完全破坏，因为`document.write()`在 HTML 文档完全加载后的动态调用会清空`<body>`标签。

**例子：**

假设我的 HTML 之前看起来像这样：

```
<html>
 <head>
  <title>Foo</title>
 </head>

<body>
 Hello World
 <div id="ad1"></div>
 <div id="ad2"></div>
</body>

</html> 
```

运行上面的 JavaScript 代码后，我的 body 如下所示：

```
<body>
    <img src="http://www.adserver.com/foo.png">
</body> 
```

如您所见，`document.write()`完全删除`<body>`. 这是不能容忍的。

**那么，我要解决这个问题吗？**

* * *

**注意：**我已经尝试通过这样的覆盖来解决这个`document.write()`问题：

```
<script>
 var currentContainer = null;

 document.write = function(code){
  currentContainer.html(code);
 }

 for (var i in adTags){
  var adTag = adTags[i];
  var jscode = adTag.jscode; // Contains document.write() call in <script> Block
  var container = $(adTag.containerId);
  currentContainer = container;
  eval(jscode);
 }
</script> 
```

现在，虽然这乍一看效果很好，但这里的问题是 AdTag 的调用会`document.write()`加载另一段 JavaScript，如下所示：

`<script src="http://www.adserver.com/more.js"></script>`

此 js 文件包含另一个调用，`document.write()`该调用将再次调用我的自定义（覆盖）`document.write()`函数。现在的问题是，与此同时，我的 for() 循环继续并更改了变量 currentContainer 的内容，然后我的自定义`document.write()`函数将新内容写入错误的 div 容器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:45:38.147

我发现在 iframe 中运行广告代码是最好的解决方案。

# php - UTF-8：俄语字符和欧元符号不出现并存储在mysql表中

> ID：12280745
> 
> 赞同：0
> 
> 时间：2012-09-05T11:47:29.820
> 
> 标签：php, utf-8

我必须将用俄语编写的文本存储在 mySQL 表中，还必须从 mySQL 表中提取欧元符号并将其呈现给浏览器中的用户。我使用了 mysql_set_charset('utf8') 并且它成功地将俄语文本保存在数据库中，但是没有出现欧元符号。如果我删除该语句，则会出现欧元符号，但俄语字符存储不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:56:07.260

“utf8_general_ci”中的表可以毫无问题地存储俄语和欧元。 [http://www.collat​​ion-charts.org/mysql60/mysql604.utf8_general_ci.european.html](http://www.collation-charts.org/mysql60/mysql604.utf8_general_ci.european.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:03:20.780

如果您的意思是欧元没有发布在网页上。也许您的 html 文档未设置为 UTF-8。UTF-8 列出了欧元符号。

# iphone - 图表在 Core Plot 中显示绘图区域外，在 iPhone 上不可见

> ID：12280748
> 
> 赞同：1
> 
> 时间：2012-09-05T11:47:37.887
> 
> 标签：iphone, core-plot

我在我的 iPhone 应用程序中使用 Core Plot。我的 X 轴包含日期（即，可能是小时、一周和一个月。）我的 Y 轴包含天气信息。当用户选择颗粒位置时，Y 范围发生变化。使用自动标签格式。我的情节范围如下

```
NSDecimalNumber *max1= [[NSDecimalNumber alloc] initWithFloat:max];
NSDecimalNumber *min1 = [[NSDecimalNumber alloc] initWithFloat:min];
NSDecimalNumber *length = [max1 decimalNumberBySubtracting:min1];
plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(xLow)
                                                length:CPTDecimalFromFloat((oneUnit*7.0f))];
plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:[min1 decimalValue] 
                                                length:[length decimalValue]]; 
```

但问题是，对于绘制在绘图区域之外且不可见的图形的地方，我该如何调整绘图值？

# cakephp-2.1 - CakePHP 2.2.2 烘焙插件

> ID：12280756
> 
> 赞同：4
> 
> 时间：2012-09-05T11:48:13.313
> 
> 标签：cakephp-2.1

我正在尝试在我的应用程序中为我的插件烘焙模型、控制器和视图：admin。我正在使用 Windows 7。烘焙应用程序和应用程序内的烘焙工作。

这就是我正在做的事情：

1.  cd c:\wamp\www\propharm\app（也尝试不使用 \app）
2.  蛋糕烘焙插件管理模型

这是我的插件所在的文件夹：C:\wamp\www\propharm\app\Plugin

我从控制台得到这个响应。

```
Create the directory structure, AppModel and AppController classes for a
new plugin. Can create plugins in any of your bootstrapped plugin paths.

Usage:
cake bake plugin [-h] [-v] [-q] [<name>]

Options:

--help, -h     Display this help.
--verbose, -v  Enable verbose output.
--quiet, -q    Enable quiet output.

Arguments:

name  CamelCased name of the plugin to create.
      (optional) 
```

我试过这个：在 bootrap.php

```
CakePlugin::load('Admin'); 
```

它仍然无法正常工作。如果有人知道我做错了什么，请帮忙。谢谢。路易斯

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-05T22:11:29.837

1）烘焙你的插件：

```
cake bake plugin PluginNameInCamelCase 
```

2）烘烤其他一切：

```
cake bake controller ControllerName --plugin PluginNameInCamelCase 
```

有关烘焙插件的更多文档，请参阅此页面：[使用 CakePHP 创建您自己的插件](http://book.cakephp.org/2.0/en/plugins.html#creating-your-own-plugins)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-06T21:09:31.767

虽然上面的代码可以工作，但是这段代码提供了更多有用的选项。

第 1 步：创建插件

> 蛋糕烘焙插件 PluginNameInCamelCase

第 2 步：创建模型

> 蛋糕烘焙模型插件--PluginNameInCamelCase`

它将显示可用模型列表，选择您想要烘焙的用户模型、新闻模型等

第三步：创建控制器

> 蛋糕烘焙控制器插件 -- PluginNameInCamelCase

它将显示可用控制器列表，选择您想要烘焙的用户控制器、新闻控制器等

第 4 步：为您的插件创建最终视图文件

> 蛋糕烘焙视图插件--PluginNameInCamelCase

它将显示您要为其创建视图文件的可用控制器列表，选择并完成！

[阅读更多](http://a2znotes.blogspot.com/2014/11/code-generation-with-cakephp-creating-plugin.html)

# c# - C#/ Visual Studio 没有正确显示变音符号

> ID：12280757
> 
> 赞同：0
> 
> 时间：2012-09-05T11:48:19.217
> 
> 标签：c#, visual-studio, encoding, windows-phone

我正在通过 WebClient 下载 XML 文件，如下所示：

```
WebClient connect = new WebClient();
connect.DownloadStringCompleted += new DownloadStringCompletedEventHandler(connect_DownloadStringCompleted);
connect.DownloadStringAsync(new Uri("http://conn.info/api/v8/search/item_short.xml?apikey=123&lang=de&q="+textBox1.Text)); 
```

然后我解析它们

```
XElement erg = XElement.Parse(e.Result); 
```

但问题是，像“ü”或“ä”这样的德语字母将无法正确显示。相反，我得到一个“？” 对于我的输出中的每个字母（在 Windows Phone 设备上）。

这如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:51:00.750

好吧，您已经注意到变音符号丢失了。我建议将您的 WebClient 设置为 UTF8 模式：

```
connect.Encoding = System.Text.Encoding.UTF8; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:05:44.220

我在这里假设您的 XML 的编码是 ISO-8859-1。（我无法访问您在上面的代码中拥有的域）。尝试按如下方式设置编码：

```
connect.Encoding = Encoding.GetEncoding("ISO-8859-1"); 
```

[我用http://www.spiegel.de/thema/windows_phone_8/index.rss](http://www.spiegel.de/thema/windows_phone_8/index.rss)测试了一段代码，它对我有用。请找到结果的屏幕截图。我为你圈出了带有德语特殊字符的单词。

![在此处输入图像描述](../Images/30de95389bd585530acc76b940f54340.png)

# templates - 模板覆盖 Opencart

> ID：12280758
> 
> 赞同：1
> 
> 时间：2012-09-05T11:48:21.370
> 
> 标签：templates, opencart

我开发了一个**模块**，让*管理员*可以选择*指定日期*的**模板**。但我不知道如何在*前端*自动*覆盖***模板**。帮我解决这个问题。

 ****** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:38:47.757

您只需将“config_template”值更改为新的

```
$this->config->set('config_template', $new_value); 
```*****

# mysql - 查询找不到逗号分隔为表的字段的子字符串

> ID：12280763
> 
> 赞同：0
> 
> 时间：2012-09-05T11:48:47.213
> 
> 标签：mysql, sql

和函数没有按预期工作`LOCATE`。`FIND_IN_SET`如果每个函数的结果为 0 值，则其结果应为 1。

价值观

`concat(',',t_insercion.fkCno2011,',')` *值为* `,305,`

`v_curso_cnos.cnos` *值为* `,,305,606,`

功能

```
locate(v_curso_cnos.cnos, concat(',',t_insercion.fkCno2011,','))

find_in_set(concat(',',t_insercion.fkCno2011,','), v_curso_cnos.cnos) 
```

查询是：

```
SELECT r_cursoalumno.fkCurso AS idCurso,
       r_cursoalumno.fkPersona AS persona,
       v_curso_cnos.cnos,
       concat(',',t_insercion.fkCno2011,',') as idCno,
       locate(v_curso_cnos.cnos, concat(',',t_insercion.fkCno2011,',')) as cmp1, 
       find_in_set(concat(',',t_insercion.fkCno2011,','), v_curso_cnos.cnos) as cmp2
FROM v_curso_cnos
  INNER JOIN (r_cursoalumno
  LEFT JOIN t_insercion ON r_cursoalumno.fkPersona = t_insercion.fkPersona)
   ON v_curso_cnos.id = r_cursoalumno.fkCurso
WHERE r_cursoalumno.fkPersona = 20386 
```

查询结果是这样，但**locate**和**find_in_set**应该返回一个非零值。他们为什么不呢？

```
idCurso persona    cnos         idCno   cmp1   cmp2
____________________________________________________
453       20386  ,,305,608,    ,305,      0      0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:03:20.723

我认为您想在对 LOCATE 的调用中切换参数的顺序。

根据您的输出，`v_curso_cnos.cnos`返回`,,305,608,`，而`concat(',',t_insercion.fkCno2011,',')`返回`,305,`。

该[`LOCATE`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_locate)函数尝试在第二个字符串中查找第一个字符串的出现。在您的情况下，您试图`,,305,608,`在`,305,`.

[`FIND_IN_SET`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)**在逗号分隔的字符串列表中**搜索第一个字符串的出现。这意味着它假定所有 ',' 都是分隔符，而不是字符串的一部分。在您的情况下，您试图在`,305,`内查找`,,305,608,`，但该函数将您的第二个字符串解释为五个字符串的列表，`''`, `''`, `'305'`, `'608'`, 和`''`; 其中没有一个包含`,305,`. 此外，该文档还说明了以下内容：

> 如果第一个参数包含逗号 (“,”) 字符，此函数将无法正常工作。

# java - getNodeValue() 截断 org.w3c.dom.Node 中的属性内容

> ID：12280766
> 
> 赞同：1
> 
> 时间：2012-09-05T11:49:01.843
> 
> 标签：java, android, xml, string, dom

我正在使用 Android，需要从 URL 获取 XML 并检索一些值。下载没问题，但有些字段可以包含 HTML 实体（如 –）。当我从 Node 类 (org.w3c.dom.Node) 调用方法 getNodeValue() 时，该值在找到 & 字符时停止，并截断字符串。

例如：

```
<title>Episode #56 &#8211; Heroes</title> 
```

当我调用 getNodeValue() 时，只返回“第 56 集”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:52:35.380

你可以尝试这样的事情

```
String str = "<title>Episode #56 &#8211; Heroes</title>";
str = str.replaceAll("&", "amp;"); 
```

然后尝试解析'str'它应该可以工作。

这是带有 dom 解析器的纯示例实现。

```
public static void main(String[] args) throws XPathExpressionException {
    String str = "<title>Episode #56 &#8211; Heroes</title>";   
    str = str.replaceAll("&", "amp;");
    Document domDoc = null;
    try {
        DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder docBuilder = docFactory.newDocumentBuilder();
        ByteArrayInputStream bis = new ByteArrayInputStream(str.getBytes());
        domDoc = docBuilder.parse(bis);
    } catch (Exception e) {
        e.printStackTrace();
    }
    NodeList nlist = domDoc.getElementsByTagName("title");
    //System.out.println("child count  "+nlist.getLength());
    System.out.println("title value = "+nlist.item(0).getTextContent());
} 
```

# java - 如何在 Eclipse IDE 中将 JSON 关联到字符串

> ID：12280767
> 
> 赞同：3
> 
> 时间：2012-09-05T11:49:00.777
> 
> 标签：java, json

我有一个有效的 JSON 如下所示

```
{
    "employees": [
        {
            "firstName": "Peter",
            "lastName": "Jones"
        }
    ]
} 
```

请让我知道如何将它与 Eclipse IDE 中的字符串相关联

意味着我想做

```
String json = "{
    "employees": [
        {
            "firstName": "Peter",
            "lastName": "Jones"
        }
    ]
}" 
```

但它给出了一个编译错误，告诉字符串文字没有被双引号正确关闭

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-05T11:58:50.270

如果 JSON 字符串是从某处粘贴的，您可能需要选择“粘贴字符串时转义文本”选项。这样您就不必用手逃脱，这可能会很潮。

[http://tarlogonjava.blogspot.sg/2008/04/cut-and-paste-of-strings-in-eclipse.html](http://tarlogonjava.blogspot.sg/2008/04/cut-and-paste-of-strings-in-eclipse.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T11:51:12.560

```
String json = "{"
        + "    \"employees\": ["
        + "        {"
        + "            \"firstName\": \"Peter\","
        + "            \"lastName\": \"Jones\""
        + "        }"
        + "    ]}"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T11:55:48.733

在`java`您需要正确创建字符串时，如

```
 String json = "{"
+" \"employees\": [ "
+"    { "
+"         \"firstName\": \"Peter\","
+"         \"lastName\": \"Jones\""
+"    }"
+"    ]"
+"}";
 System.out.println(json); 
```

你会得到

```
 { "employees": [     {          "firstName": "Peter",         "lastName": "Jones"    }    ]} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T12:04:56.167

使用以下：

```
String json = "{\n"
    + "    \"employees\": [\n"
    + "        {\n"
    + "            \"firstName\": \"Peter\",\n"
    + "            \"lastName\": \"Jones\"\n"
    + "        }\n"
    + "    ]\n}";

System.out.println(json); 
```

输出 ：

```
{
    "employees": [
        {
            "firstName": "Peter",
            "lastName": "Jones"
        }
    ]
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-05-08T20:38:13.240

Eclipse 可以配置为为您输入转义字符。

在 Eclipse 的 Window 菜单下选择 Preferences，在 Preferences 中选择 Java -> Editor -> Typing。在 Typing 面板上有一个名为“In string literals”的复选框组，选中标记为“Escape text when paste into a string literals”的复选框。

选中该框后，您粘贴到编辑器中的任何文本都会被转义，使其成为有效的字符串文字，特别是它将转义双引号。

[（这与接受](https://stackoverflow.com/a/12280935/217324)的答案相同，但我实际上是在指定复选框在答案中的位置，而不是要求读者点击博客链接。）

# cordova - PhoneGap 应用程序的 A/B 测试

> ID：12280772
> 
> 赞同：9
> 
> 时间：2012-09-05T11:49:08.873
> 
> 标签：cordova, ab-testing

我尝试将 Google Mobile Analytics 用于 phonegap 应用程序。我知道谷歌分析支持上下文实验，但我找不到任何关于谷歌移动分析做同样的事情。

我的项目需要进行 A/B 测试，我一直在四处寻找是否可以使用 PhoneGap，因为我所有的 assets/css/js 将在应用商店中一起发货，并且不会通过远程服务器获得。

我正在考虑的一种解决方法是为一个屏幕创建 2 个不同的 html 版本，并将所有这些版本都发送到一个应用程序中。

这是明智之举吗？如果没有，有没有更好的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-06T10:43:01.043

任何 A/B 通用 Web 测试库**都不能用于 phonegap 应用程序**，主要原因有两个：

1.  您不能使用 Optimizely 之类的服务来配置您的实验，因为您的应用不像网站那样在线。Optimizely 需要浏览网站并将其加载到其用户界面中
2.  A/B 测试框架需要处理设备未连接互联网的情况

Arise.io（移动 A/B 测试框架）支持其框架的 phonegap 版本： [https ://arise.readthedocs.org/en/latest/phonegap.html](https://arise.readthedocs.org/en/latest/phonegap.html)

免责声明：我是 Arise.io 的创始人

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T02:02:18.540

由于您使用的是 Phonegap，因此您几乎可以使用任何 JS 库。

为每个 HTML 文件制作 2 个版本将变得繁琐且难以管理。IMO，它本质上是为自己加倍工作。相反，我建议使用 JS A/B 测试库。这里有几个：

1.  [基因化](http://ejohn.org/blog/genetic-ab-testing-with-javascript/)
2.  [优化——付费服务](https://www.optimizely.com/benefits)
3.  [视觉网站优化器——另一种付费服务](http://visualwebsiteoptimizer.com)

这些将允许您调整 Javascript 文件中的变量以反映模板中的更改。

如果您的应用程序要求用户始终保持连接，我相信您可以远程调整更改而无需用户更新应用程序。如果您使用 2 个 HTML 文件的方法，则必须在每次更新时发布更新。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-07-21T08:37:15.540

我创建了一个名为[CordovaUniversalAppServer](https://github.com/rogerdcarvalho/CordovaUniversalAppServer)的框架，它可以满足您的需求。但是，您需要通过远程服务器托管您的资产，但该解决方案确实可以离线工作（资产缓存在应用程序中）。它基本上允许您的服务器托管不同版本的 Cordova 捆绑包，实际应用程序将在加载时检查您的服务器是否有正确的资产，并保存这些以供离线使用。如果应用打开时设备处于离线状态，则使用缓存的资产。

因此，您可以通过服务器同时托管应用程序的“A”版本和应用程序的“B”版本。一些设备将运行版本 B，一些设备将运行版本“A”，具体取决于它们的配置方式。

# batch-file - 如何存储“调用”的输出？...批处理代码

> ID：12280776
> 
> 赞同：0
> 
> 时间：2012-09-05T11:49:24.873
> 
> 标签：batch-file

我正在使用 Windows XP。

我的批处理（文件）代码有这样一行：

```
 call echo %%x[%i%]%% 
```

我想将此行的输出存储到一个变量中，我想知道是否有人可以告诉我该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:15:57.933

如果要将其存储到变量中，为什么要回显它？

这应该做的工作

```
call set myVar=%%x[%i%]%% 
```

# java - 从tomcat读取属性

> ID：12280787
> 
> 赞同：14
> 
> 时间：2012-09-05T11:50:27.113
> 
> 标签：java, tomcat, properties

为您的应用程序读取配置文件的最佳做法是什么。tomcat 服务器中的哪些文件夹“在类路径上”。

我尝试将我的配置文件放入其中，`TOMCAT_HOME\conf`但仍然无法从我的 servlet 中读取它。

尝试使用这个（conf中有app.properties文件）：

```
this.getClass().getClassLoader().getResourceAsStream("/app.properties"); 
```

我没有太多的属性可能 10-15 我认为这不会是问题。我记得当我使用 jboss 时，这并没有那么多问题。

在我的应用程序中，我还指定了数据库连接弹簧，`context.xml`我可以在那里指定我的属性吗？或者这如何与tomcat一起使用？

我想让我的财产与我的战争/未打包的战争分开。

**更新**

问这个的原因是因为我不知道我的应用程序将部署在哪里（在什么位置）

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-05T12:09:21.820

有很多不同的方法，但这取决于您的需求：

要从`$TOMCAT_HOME/conf`目录加载属性文件，您需要使用`java.io.File`对象访问它，因为类加载器（如 in`this.getClass().getClassLoader().getResourceAsStream(...)`只能从类路径（在或下`WEB-INF/classes`）加载文件（和类）。`WEB-INF/lib``$TOMCAT_HOME/lib`

从 Tomcat 的配置目录加载文件的最简单示例是：

```
File configDir = new File(System.getProperty("catalina.base"), "conf");
File configFile = new File(configDir, "myconfig.properties");
InputStream stream = new FileInputStream(configFile);
Properties props = new Properties();
props.load(stream); 
```

请注意，这种方法将使您的代码依赖于 Tomcat（加载机制取决于 Tomcat 的系统属性可用这一事实）。**这是我完全不推荐的，**因此如果您**将属性文件移动到类路径内的文件夹中，**那么您应该能够按照您尝试的方式加载它，并且您的应用程序可以部署在任何容器中。

而且，您可以将属性配置为 JNDI 资源，但访问它们会很麻烦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T12:18:24.747

我不会引用特定配置文件的位置，而是使用 JNDI 绑定配置，以使应用程序仅依赖于配置数据和 Java EE 标准。我可以看到两个选项：

1.  如果您的属性文件中只有中等数量的配置条目，请考虑将它们设置为[环境条目](http://tomcat.apache.org/tomcat-7.0-doc/config/globalresources.html#Environment_Entries)并通过应用程序中的 JNDI 访问它们。

2.  或者，假设您想将属性保存在单独的属性文件中，您还可以创建一个 bean 来表示属性、一个工厂（使用属性文件初始化 bean）并将其作为[Resource Definition](http://tomcat.apache.org/tomcat-7.0-doc/config/globalresources.html#Resource_Definitions)连接到 JNDI 。
    这样一来，人们甚至可以定期重新读取属性文件，而无需重新启动应用程序、在各种配置源之间切换或类似的其他要求。

每个使用此配置的 Web 应用程序都必须在其中包含一个[资源引用](http://docs.oracle.com/cd/E13222_01/wls/docs81/webapp/web_xml.html#1045815)来`web.xml`引用配置 bean（或者如果使用选项 1，则引用每个 env.entry）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T12:07:04.590

把你的文件放在你的 webapp 的`WEB-INF/classes`. 这是默认的类路径目录。`conf`如果仅适用于 Tomcat 内部。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T11:54:25.627

据我所知，您也可以`datasource`在 tomcat 中进行配置。[Tomcat中的数据源](http://tomcat.apache.org/tomcat-6.0-doc/jndi-datasource-examples-howto.html)

在此之后，您可以`datasource`在您的应用程序中使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T12:11:13.670

虽然它可能是一个 PITA，但它可能也是一个你不知道它会部署在哪里的功能。那你就不能把自己“耦合”到那个事实！

根据 Java 堆栈的其余部分，最好的方法通常独立于 Tomcat。如果您使用的是 Spring，您可以说例如：

```
new ClassPathResource("**/myFile.properties") 
```

或者如果使用 Java Config，另一个例子：

```
@PropertySource("classpath:META-INF/MyWeb.properties") 
```

在纯 Java 中，您可以说：

```
InputStream stream = loader.getResourceAsStream(resourceName); 
```

其中 loader 是 ClassLoader 的一个实例

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-01-30T14:06:22.927

`add .properties file in apache-tomcat-7.0.78\conf folder` `File configDir = new File(System.getProperty("catalina.base"), "conf");` `File configFile = new File(configDir, "dashboardiframes.properties");` `InputStream stream = new FileInputStream(configFile);Properties properties = new Properties(); properties.load(stream);`

# sql-server - sql server 使用pivot

> ID：12280789
> 
> 赞同：-1
> 
> 时间：2012-09-05T11:50:33.093
> 
> 标签：sql-server, pivot

这是我的数据库结构：

> ![在此处输入图像描述](../Images/70db90d9ddd2ed4e6c587a058fb02880.png)

我想显示如下数据：

> ![在此处输入图像描述](../Images/8f0cc3105f6b20cc488626e47331374a.png)

我该怎么做 ？我应该使用枢轴吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:02:50.157

你可以用[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)这个。使用 PIVOT 有两种方法可以做到这一点，一种是您对要转换的列进行编码的静态 Pivot，另一种是在执行时确定列的动态 Pivot。

静态枢轴：

```
select *
from
(
  select dt, username, product,
    'product' 
      + cast(row_number() 
               over(partition by username order by product) as varchar(10)) productNum
  from yourtable
) x
pivot
(
  min(product)
  for productNum in ([product1], [product2], [product3])
) p
order by dt 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/f8eac/13)

动态枢轴：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = 
    STUFF((SELECT distinct ',' + Quotename('product' 
              + cast(row_number() 
               over(partition by username order by product) as varchar(10)))
             from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
    = 'SELECT dt, username,' + @cols + ' from 
       (
        select dt, username, product,
           ''product''
            + cast(row_number() 
               over(partition by username order by product) as varchar(10)) productNum
        from yourtable
       ) x
       pivot 
       (
          min(product)
          for productNum in (' + @cols + ')
       ) p 
        order by dt'

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/f8eac/12)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:28:43.243

是的，您应该使用枢轴。

但是，除非您知道会有多少产品，否则您将需要使用动态支点——[像这样](http://sqlserverpedia.com/blog/sql-server-2008/dynamic-pivot-in-tsql/)。

# android - 为什么 TabHost 中不显示父 Activity 的菜单？

> ID：12280793
> 
> 赞同：3
> 
> 时间：2012-09-05T11:50:46.517
> 
> 标签：android, menu, android-activity, android-tabhost

我有 Activity A 和 TabHost。我的 TabHost 有 2 个标签。第一个选项卡有活动 B，第二个选项卡有活动 C。

![在此处输入图像描述](../Images/709311066bf6243c8fcc8ef2c86128ec.png)

活动 A 有一个菜单。活动 B 和 C 没有任何菜单。当我点击 Activity AI 可以打开它的菜单，但是当我点击其中一个选项卡时，A 的菜单没有显示。这意味着活动 B 或 C 已激活，我无权访问 A 的菜单。

当它有这个 TabHost 时，我怎样才能访问 A 的菜单或其他资源？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T17:07:33.303

在您的选项卡式活动中尝试此代码：

```
@Override public boolean onCreateOptionsMenu(Menu menu) {
    if(getParent() != null) {
        return getParent().onCreateOptionsMenu(menu);
    }
} 
```

所以基本上你的选项卡式活动会将选项菜单请求“重定向”到主机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T06:03:29.423

您可以将 Acrivity A 的菜单放入 Acitvity B...

为此，您应该将活动 A 的对象声明为活动 B .....如下所示......

```
public static ActivityA a = null; 
```

并在活动 B 中声明**onMenuItemSelected()方法，如下所示......**

```
public boolean onMenuItemSelected(int featureId, MenuItem item) {
     return a.onMenuItemSelected(featureId, item);       
} 
```

# android - 在 Activity 中打开 android 中的文件

> ID：12280794
> 
> 赞同：0
> 
> 时间：2012-09-05T11:50:47.547
> 
> 标签：android

我有一个不同类型文件的输入流，例如 .png、.docx、.ppt、.pdf、.ods、.txt 文件，我通过我的网络服务下载这些文件。我没有这些文件的网址。这些文件存储在云端。我如何在活动窗口中的 android 应用程序中显示这些文件....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:00:47.480

您必须下载它们，在本地存储（在 SD 卡上）并触发`ACTION_VIEW`意图以使用分配的应用程序打开文件

# objective-c - 如何确定我是否有指向已释放对象的指针？

> ID：12280799
> 
> 赞同：3
> 
> 时间：2012-09-05T11:51:04.590
> 
> 标签：objective-c, xcode, debugging

在一个函数中，我正在处理一个有时可能已损坏的对象，在运行时，我能否以某种方式确定我的对象是否已损坏？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T12:08:33.827

真正做到这一点的唯一方法是利用 ARC（和 iOS 5，在此之前不起作用）的新事物，称为`__weak`指针。

还应注意`__weak`，根据定义，变量不保留。如果一个`__weak`变量保留了它的目标，那么根据定义，它不能释放自己。

基本上，`__weak`指针是一个变量，`NULL`当它被释放时会自动设置它自己。因此，您可以执行以下操作来确定对象是否被释放：

```
__strong id object; // required so that the object doesn't get deallocated right away
__weak id _weakRef;

object = [NSObject new];
_weakRef = object;

// do stuff with 'object'

if (_weakRef)
{
    // 'object' hasn't been deallocated yet, do something with it.
} 
```

但是，通常来说，您不会保留对对象的强引用和弱引用，因为这会导致`_weakRef`无用（只需检查您何时设置`object`为`nil`）。

我还告诫不要使用仅基于`__weak`变量的设计模式，尤其是在您制作框架的情况下。没有什么比将 iOS 5 用作目标部署更能说明“烦人”的了。

我希望这篇文章能帮助你更深入地了解弱引用是如何工作的，如果没有，你可以在这里阅读一篇很棒的维基百科文章：

[http://en.wikipedia.org/wiki/Weak_reference](http://en.wikipedia.org/wiki/Weak_reference)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:12:14.663

假设该对象是`NSObject`，只需在 Instruments 中启用 Zombies。然后你所要做的就是向有问题的对象发送消息。当您向它发送消息时，它将让您知道该对象是否已死亡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T11:56:37.930

简短的回答，不，没有办法判断您的对象是否已被释放。有关更多解释，请查看[此问题](https://stackoverflow.com/q/7797817/3009)。

# java - 它如何与 JSF2 中的 bean 验证消息和 i18n 一起工作？

> ID：12280800
> 
> 赞同：8
> 
> 时间：2012-09-05T11:51:04.677
> 
> 标签：java, jsf, jakarta-ee, bean-validation

我创建了验证消息（ValidationMessages.properties）文件以使 i18n 在我的项目中成为可能。

看起来像：

```
pwtNumber.error=PWT Number error.. 
```

我在 faces-config.xml 中定义了它：

```
<message-bundle>com.mycompany.web.i18n.ValidationMessages</message-bundle> 
```

在我的代码中，我以这种方式使用它：

```
 @Null(message = "{pwtNumber.error}")
    public String getPwtNummer() {
        return pwtNummer;
    } 
```

但问题是我没有收到错误消息，而是属性文件中的密钥。这是我得到的错误消息：

```
myForm:pwtNummer: {pwtNumber.error} 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T12:45:15.883

您将 JSF 内置验证与 JSR303 bean 验证混淆了。

`<message-bundle>`用于覆盖/指定 JSF 内置验证消息，而不是 JSR303 bean 验证消息。尽管您为 JSR303 bean 验证包文件使用了正确的文件名，`ValidationMessages.properties`但是 JSR303 bean 验证还要求将包文件放在类路径的根目录中（因此，**没有**任何包；在默认包中）。修复后，不要忘记删除不正确的`<message-bundle>`条目。

### 也可以看看：

*   [JSF 中的国际化，何时使用消息包和资源包？](https://stackoverflow.com/questions/2668161/jsf-when-to-use-message-bundle-and-resource-bundle)
*   [在 JSF 中使用 bean 验证进行本地化](https://stackoverflow.com/questions/10915770/localization-with-bean-validation-in-jsf)

# java - String.codePointAt 到底是做什么的？

> ID：12280801
> 
> 赞同：35
> 
> 时间：2012-09-05T11:51:09.377
> 
> 标签：java, string, unicode, codepoint

最近我在Java中遇到了String的[codePointAt](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#codePointAt%28int%29)方法。我还发现了其他一些*codePoint*方法：`codePointBefore`等`codePointCount`。它们肯定与 Unicode 有关，但我不明白。

现在我想知道何时以及如何使用`codePointAt`类似的方法。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-09-05T11:57:27.780

**简短的回答：**[它](http://unicode.org/glossary/#code_point)为您提供从`String`. 即该位置的字符的“unicode number”。

**更长的答案：** Java 是在 16 位（又名 a `char`）足以容纳任何存在的 Unicode 字符时创建的（这些部分现在称为[基本多语言平面或 BMP](http://en.wikipedia.org/wiki/Plane_%28Unicode%29#Basic_Multilingual_Plane)）。后来，Unicode 被扩展为包含代码点 > 2 ^(16)的字符。这意味着 a`char`不能再保存所有可能的 Unicode 代码点。

[UTF-16](http://en.wikipedia.org/wiki/UTF-16)是解决方案：它将“旧”Unicode 代码点存储在 16 位（即恰好一个`char`）和所有新的 32 位（即两个`char`值）中。这两个 16 位值称为“代理对”。现在严格来说 a`char`拥有一个“UTF-16 代码单元”，而不是过去的“一个 Unicode 字符”。

`char`现在，只要您不使用任何“新”Unicode 字符（或不真正关心它们），所有“旧”方法（仅处理）都可以使用，但如果您关心新字符（或者只需要完整的 Unicode 支持），那么您将需要使用*实际*支持所有可能的 Unicode 代码点的“代码点”版本。

**注意：**一个非常著名的不在 BMP 中的 unicode 字符示例（即仅在使用代码点变体时有效）是表情符号：即使是简单的Grinning [Face](https://www.fileformat.info/info/unicode/char/1f600/index.htm) U+1F600 也不能用单个`char`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-05T11:57:44.283

代码点支持大于 65535 的字符，即 Character.MAX_VALUE。

如果您有如此高字符的文本，则必须使用代码点或`int`代替`char`s。

它不是通过支持 UTF-16 来实现的，它可以使用一个或两个 16 位字符并将其转换为`int`

AFAIK，通常这仅适用于最近添加的[补充多语言](http://en.wikipedia.org/wiki/Plane_%28Unicode%29#Supplementary_Multilingual_Plane)和[补充表意](http://en.wikipedia.org/wiki/Plane_%28Unicode%29#Supplementary_Ideographic_Plane)字符，例如非繁体中文。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-17T04:26:41.773

下面的代码示例有助于阐明`codePointAt`

```
 String myStr = "13";
    System.out.println(myStr.length()); // print 4, because  is two char
    System.out.println(myStr.codePointCount(0, myStr.length())); //print 3, factor in all unicode

    int result = myStr.codePointAt(0);
    System.out.println(Character.toChars(result)); // print 1

    result = myStr.codePointAt(1);
    System.out.println(Character.toChars(result)); // print , because codePointAt will get surrogate pair (high and low)

    result = myStr.codePointAt(2);
    System.out.println(Character.toChars(result)); // print low surrogate of  only, in this case it show "?"

    result = myStr.codePointAt(3);
    System.out.println(Character.toChars(result)); // print 3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T11:57:20.897

简而言之，只要您在 Java 中使用默认字符集就很少 :) 但要获得更详细的解释，请尝试以下帖子：

[将字符与代码点进行比较？](https://stackoverflow.com/questions/1029897/comparing-a-char-to-a-code-point) [http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Character.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Character.html) [http://javarevisited.blogspot.com/2012/01/java-string-codepoint-get-unicode .html](http://javarevisited.blogspot.com/2012/01/java-string-codepoint-get-unicode.html)

希望这有助于为您澄清事情:)

# php - 如何在 PHP 中使用本机 SoapClient 进行 SOAP 调用？

> ID：12280802
> 
> 赞同：2
> 
> 时间：2012-09-05T11:51:09.683
> 
> 标签：php, xml, web-services, soap, soap-client

我想调用 Web 服务，该服务也在开发中，并且在 WSDL 中定义了一个函数，即 PlaceInvoiceFromStream。函数定义了一个要传递的参数，Invoice。WSDL 导入在 XSD shema 中定义的类型。

WSDL 看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<definitions name ="inService"
    xmlns:http="http://schemas.xmlsoap.org/wsdl/http/"
    xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns:xsdl="urn:oasis:names:specification:ubl:schema:xsd:Invoice-2"
    xmlns:tns="http://localhost/ebiz/ws/"
    xmlns="http://schemas.xmlsoap.org/wsdl/"
    targetNamespace="http://localhost/ebiz/ws/">
    <import namespace="urn:oasis:names:specification:ubl:schema:xsd:Invoice-2"
        location="http://localhost/ebiz/ws/Invoice.xsd"
    />
    <message name="getPlaceInvoiceInput">
        <part name="body" element="xsdl:Invoice"/>
    </message>
    <message name="getPlaceInvoiceOutput">
        <part name="body" type="xsd:string"/>
    </message>
    <portType name="inServicePortType">
        <operation name="PlaceInvoiceFromStream">
            <input message="tns:getPlaceInvoiceInput"/>
            <output message="tns:getPlaceInvoiceOutput"/>
        </operation>
    </portType>
    <binding name="inServiceBinding" type="tns:inServicePortType">
        <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
        <operation name="PlaceInvoiceFromStream">
            <soap:operation soapAction="PlaceInvoiceFromStream"/>
            <input>
                <soap:body use="literal"/>
            </input>
            <output>
                <soap:body use="literal"/>
            </output>
        </operation>
    </binding>
    <service name="inService">
        <port name="inServicePort" binding="tns:inServiceBinding">
            <soap:address location="http://localhost/ebiz/ws/soapServer.php"/>
        </port>
    </service>
</definitions> 
```

架构如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema xmlns:qdt="urn:oasis:names:specification:ubl:schema:xsd:QualifiedDataTypes-2" xmlns:ext="urn:oasis:names:specification:ubl:schema:xsd:CommonExtensionComponents-2" xmlns:udt="urn:oasis:names:specification:ubl:schema:xsd:UnqualifiedDataTypes-2" xmlns:cac="urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2" xmlns:cbc="urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="urn:oasis:names:specification:ubl:schema:xsd:Invoice-2" targetNamespace="urn:oasis:names:specification:ubl:schema:xsd:Invoice-2" elementFormDefault="qualified" attributeFormDefault="unqualified" version="2.1">
<xsd:import namespace="urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2" schemaLocation="../common/UBL-CommonAggregateComponents-2.1.xsd"/>
<xsd:import namespace="urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2" schemaLocation="../common/UBL-CommonBasicComponents-2.1.xsd"/>
<xsd:import namespace="urn:oasis:names:specification:ubl:schema:xsd:UnqualifiedDataTypes-2" schemaLocation="../common/UBL-UnqualifiedDataTypes-2.1.xsd"/>
<xsd:import namespace="urn:oasis:names:specification:ubl:schema:xsd:CommonExtensionComponents-2" schemaLocation="../common/UBL-CommonExtensionComponents-2.1.xsd"/>
<xsd:import namespace="urn:oasis:names:specification:ubl:schema:xsd:QualifiedDataTypes-2" schemaLocation="../common/UBL-QualifiedDataTypes-2.1.xsd"/>
<xsd:element name="Invoice" type="InvoiceType"/>
<xsd:complexType name="InvoiceType">
    <xsd:sequence>
        <xsd:element ref="ext:UBLExtensions"/>
        <xsd:element ref="cbc:UBLVersionID"/>
        <xsd:element ref="cbc:CustomizationID" minOccurs="0"/>
        <xsd:element ref="cbc:ProfileID" minOccurs="0"/>
        <xsd:element ref="cbc:ID"></xsd:element>
        <xsd:element ref="cbc:CopyIndicator" minOccurs="0"/>
        <xsd:element ref="cbc:IssueDate"/>
        <xsd:element ref="cbc:InvoiceTypeCode" minOccurs="0"/>
        <xsd:element ref="cbc:Note" minOccurs="0"/>
        <xsd:element ref="cbc:TaxPointDate" minOccurs="0"/>
        <xsd:element ref="cbc:DocumentCurrencyCode" minOccurs="0"/>
        <xsd:element ref="cbc:AccountingCost" minOccurs="0"/>
        <xsd:element ref="cbc:LineCountNumeric" minOccurs="0"/>
        <xsd:element ref="cac:InvoicePeriod" minOccurs="0"/>
        <xsd:element ref="cac:OrderReference" minOccurs="0"/>
        <xsd:element ref="cac:DespatchDocumentReference" minOccurs="0"/>
        <xsd:element ref="cac:ReceiptDocumentReference" minOccurs="0"/>
        <xsd:element ref="cac:ContractDocumentReference" minOccurs="0"/>
        <xsd:element ref="cac:AdditionalDocumentReference" minOccurs="0" maxOccurs="unbounded"/>
        <xsd:element ref="cac:Signature" minOccurs="0"/>
        <xsd:element ref="cac:AccountingSupplierParty"/>
        <xsd:element ref="cac:AccountingCustomerParty"/>
        <xsd:element ref="cac:BuyerCustomerParty" minOccurs="0"/>
        <xsd:element ref="cac:SellerSupplierParty" minOccurs="0"/>
        <xsd:element ref="cac:TaxRepresentativeParty" minOccurs="0"/>
        <xsd:element ref="cac:Delivery" minOccurs="0" maxOccurs="unbounded"/>
        <xsd:element ref="cac:DeliveryTerms" minOccurs="0"/>
        <xsd:element ref="cac:PaymentMeans" maxOccurs="unbounded"/>
        <xsd:element ref="cac:PaymentTerms" minOccurs="0" maxOccurs="unbounded"/>
        <xsd:element ref="cac:PrepaidPayment" minOccurs="0" maxOccurs="unbounded"/>
        <xsd:element ref="cac:AllowanceCharge" minOccurs="0" maxOccurs="unbounded"/>
        <xsd:element ref="cac:TaxTotal" maxOccurs="unbounded"/>
        <xsd:element ref="cac:LegalMonetaryTotal"/>
        <xsd:element ref="cac:InvoiceLine" maxOccurs="unbounded"/>
    </xsd:sequence>
</xsd:complexType> 
```

UBL 2.1 模式：[http ://docs.oasis-open.org/ubl/prd2-UBL-2.1/UBL-2.1.html#SCHEMAS](http://docs.oasis-open.org/ubl/prd2-UBL-2.1/UBL-2.1.html#SCHEMAS)

发票是复杂的数据，保存在 XML 文件中，包含命名空间和属性。它是这样开始的：

```
<?xml version="1.0" encoding="UTF-8"?>
<Invoice
 xmlns="urn:oasis:names:specification:ubl:schema:xsd:Invoice-2"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:cac="urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2"
 xmlns:cbc="urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2"
 xmlns:sac="urn:oasis:names:specification:ubl:schema:xsd:SignatureAggregateComponents-2"
 xsi:schemaLocation="urn:oasis:names:specification:ubl:schema:xsd:Invoice-2 http://localhost/ebiz/ws/Invoice.xsd"
 xmlns:ext="urn:oasis:names:specification:ubl:schema:xsd:CommonExtensionComponents-2"
 xmlns:sig="urn:oasis:names:specification:ubl:schema:xsd:CommonSignatureComponents-2">
    <ext:UBLExtensions>
        <ext:UBLExtension>
            <cbc:ID>INVOICE1</cbc:ID>
            <cbc:Name>InvoiceIssuePlaceData</cbc:Name>
            <ext:ExtensionAgencyURI>urn:invoice:issueplace</ext:ExtensionAgencyURI>
            <ext:ExtensionContent>
                <ext:InvoiceIssuePlace>MyCity</ext:InvoiceIssuePlace>
            </ext:ExtensionContent>
        </ext:UBLExtension>
    </ext:UBLExtensions>
    <cbc:UBLVersionID>2.1</cbc:UBLVersionID>
    <cbc:ID>01 1206-2406-568</cbc:ID>` 
```

ETC...

我试过这种方法：

```
// LOAD XML and TRANSFORM FOR SoapClient 
$xmlfile = "Invoice123.xml";
$xslfile = "xsltForSoapClientRequest.xsl";
$xmlDOM = new DOMDocument();
$xmlDOM->load($xmlfile);
$xslDOM = new DOMDocument();
$xslDOM->load($xslfile);
$proc = new XSLTProcessor;
$proc->importStyleSheet($xslDOM);
$transformedXML = $proc->transformToDoc($xmlDOM);
$xmldoc = simplexml_load_string($transformedXML);

// CREATE ARRAY
$xmlarr = xml2array($xmldoc->asXML());

$client = new SoapClient($wsdl,array('trace'=>1));
$result=$client->PlaceInvoiceFromStream($xmlarr); 
```

但没有成功。

XSL 转换更改为：

*   节点属性成为节点元素
*   复杂节点值变为“_”元素

xml2array 更改为：

*   属性成为单独的数组

因此，要发送到 Web 服务函数的 $xmlarr 格式如下：

```
array(2) {
  ["Invoice"]=>
  array(15) {
    ["ext:UBLExtensions"]=>
    array(1) {
      ["ext:UBLExtension"]=>
      array(4) {
        ["cbc:ID"]=>
        string(10) "INVOICE1"
        ["cbc:Name"]=>
        string(21) "InvoiceIssuePlaceData"
        ["ext:ExtensionAgencyURI"]=>
        string(25) "urn:invoice:issueplace"
        ["ext:ExtensionContent"]=>
        array(1) {
          ["ext:InvoiceIssuePlace"]=>
          string(7) "MyCity"
        }
      }
    }
    ["cbc:UBLVersionID"]=>
    string(3) "2.1"
    ["cbc:ID"]=>
    string(16) "01 1206-2406-568"
...

  ["Invoice_attr"]=>
  array(8) {
    ["xmlns"]=>
    string(54) "urn:oasis:names:specification:ubl:schema:xsd:Invoice-2"
    ["xmlns:xsi"]=>
    string(41) "http://www.w3.org/2001/XMLSchema-instance"
    ["xmlns:cac"]=>
    string(72) "urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2"
    ["xmlns:cbc"]=>
    string(68) "urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2"
    ["xmlns:sac"]=>
    string(75) "urn:oasis:names:specification:ubl:schema:xsd:SignatureAggregateComponents-2"
    ["xmlns:ext"]=>
    string(72) "urn:oasis:names:specification:ubl:schema:xsd:CommonExtensionComponents-2"
    ["xmlns:sig"]=>
    string(72) "urn:oasis:names:specification:ubl:schema:xsd:CommonSignatureComponents-2"
    ["xsi:schemaLocation"]=>
    string(93) "urn:oasis:names:specification:ubl:schema:xsd:Invoice-2 http://localhost/ebiz/ws/Invoice.xsd"
  }
} 
```

Web 服务调用的结果是：

```
SOAP-ERROR: Encoding: object has no 'UBLExtensions' property 
```

正确的 SOAP 请求应该采用什么形式？SOAP 请求需要什么样的数组形式？SOAP 是否基于 WSDL 和 XSD 理解“_”元素？还是单独数组中的属性？

提前感谢您在解决此问题方面提供的任何帮助...

# 更新：

改变了wsdl：

```
<message name="getPlaceInvoiceInput">
    <part name="Invoice" element="xsdl:InvoiceType"/> 
```

SoapClient 接受以下请求：

```
$xmlarr = array(
    "UBLExtensions"=>
    array(
      "UBLExtension"=>
      array(
        "ID"=>"INVOICE1",
        "Name"=>"InvoiceIssuePlaceData",
        "ExtensionAgencyURI"=>"urn:invoice:issueplace",
        "ExtensionContent"=>
        array(
          "InvoiceIssuePlace"=>"MyCity"
        )
      )
    ),
    "UBLVersionID"=>"2.1",
    "ID"=>"01 1206-2406-568",
    ... 
```

这不是我想要的。我需要键中的名称空间。应该更改/添加什么以使 SoapClient 能够接受请求数组中键中的命名空间，例如“ext:UBLExtensions”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:24:04.943

我相信你需要从水平开始`array`，`UBLExtensions`而不是`Invoice`水平。它会将您的顶级元素视为`Invoice`预期的位置，`UBLExtensions`并在找不到时抱怨：

```
SOAP-ERROR: Encoding: object has no 'UBLExtensions' property 
```

它不需要第二个`Invoice_attr`数组，数组元素的名称是模式中的元素名称，而不是`ref`值。查看`ref`架构中指向的内容（您似乎没有列出它），`element`应该有一个`name`.

# http - 带有“Content-Encoding: gzip”的 Http 响应，但内容未压缩

> ID：12280805
> 
> 赞同：1
> 
> 时间：2012-09-05T11:51:16.283
> 
> 标签：http, gzip, httpresponse, content-encoding

我有一个关于 gzip 的问题。假设服务器添加了“Content-Encoding: gzip”标头。但是，实际内容没有被压缩（假设压缩失败并且它正在发送没有压缩的数据）。这会产生什么影响？http 客户端（尤其是浏览器）将如何处理这个问题？

谢谢，纳伦德拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T12:53:01.723

HTTP 规范声明`Content-Encoding`响应标头指定用于解码内容的编码。但是，它没有说明在编码不匹配的情况下客户端应该做什么。所以由客户决定。

# c# - 将数据存储到 SQL，编码与否？

> ID：12280807
> 
> 赞同：4
> 
> 时间：2012-09-05T11:51:22.603
> 
> 标签：c#, asp.net, sql

最佳做法是什么？我正在制作一个`ASP.NET`网站，用户可以在其中输入要存储在 SQL 数据库中的文本数据。我`HttpUtility.HTNLEncode()`用来存储数据并`HTMLDecode`显示它。

这很好用，但它确实搜索（选择或自由文本）要困难得多。用户应该能够输入包含 <、"、' 和任何其他有问题的字符的文本。

最佳做法是什么？存储未编码的数据？那我该如何降低注射的风险呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T11:57:06.377

始终将用户输入未编码地存储在数据库中，并始终在输出之前对来自数据库的用户输入进行编码。

您还应该在持久化之前过滤/验证用户输入。

*   输入：用户输入 -> 验证/过滤 -> 保存到数据库
*   输出：来自数据库的内容 -> 编码 -> 输出到客户端

这是使用和重用用户数据的唯一合理方法。

另请参阅[http://msdn.microsoft.com/en-us/library/t4ahd590%28v=vs.80%29.aspx#cpconbestsecuritypracticesforwebapplicationsanchor4](http://msdn.microsoft.com/en-us/library/t4ahd590%28v=vs.80%29.aspx#cpconbestsecuritypracticesforwebapplicationsanchor4) 以及[HTML 在被持久化之前应该被编码吗？](https://stackoverflow.com/questions/2616369/should-html-be-encoded-before-being-persisted)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T12:16:03.530

这里有几个方面要介绍，所以我会尽力涵盖这些要点。要点是：

*   提交可能不安全的文本
*   存储不安全的文本
*   显示不安全的文本

ASP.NET 有一个验证机制（正如@Candie 所指出的）作为抵御攻击的第一道防线。如果您有一个需要提交 HTML、XML、JS 等的应用程序，您必须覆盖验证以允许它通过。

一旦数据通过，我会说存储是安全的。存储这些数据的最佳方式是使用存储过程，而不是动态 T-SQL，因为它可能导致[SQL 注入攻击](http://msdn.microsoft.com/en-us/library/ms161953%28v=sql.105%29.aspx)。

现在剩下的唯一问题来自在 HTML 中逐字显示该数据。如果您从字面上将内容转储到屏幕上，那么您的问题可能会开始变得更加明显。所以这就是你`HTMLEncode`发挥作用的地方。字符被转换为 HTML 等效代码，以免造成危险。Literal 控件提供了一个[.Mode](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.literal.mode.aspx)属性，因此该控件可以为您处理此问题。

最后，MSDN 上有一篇关于[How to: Protect against Script Exploits in a Web Application by Applying HTML Encoding to Strings](http://msdn.microsoft.com/en-us/library/a2a4yykt.aspx)的文章，也可能有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T11:58:48.777

您在页面 aspx 中调整 ValidateRequestMode

```
ValidateRequestMode="ValidateRequestMode.Disabled" 
```

链接：http: [//msdn.microsoft.com/en-us/library/system.web.ui.page.validaterequestmode.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.page.validaterequestmode.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T12:29:50.607

您需要问自己的问题是，为什么要对数据进行编码？

如果您试图避免 SQL 注入，那么您应该在将数据放入数据库之前对其进行验证。例如，如果您只想在输入中使用字母数字字符，那么您将在将其插入数据库之前对其进行检查。

如果他们正在输入 HTML，这使得检查文本变得更加困难，那么我建议使用存储过程。

如果您使用的是 MsSQL，那么[这可能会有所帮助。](http://www.4guysfromrolla.com/webtech/111499-1.shtml).

如果您使用的是 MySQL，那么我*认为* [这可能是指它们](http://dev.mysql.com/doc/refman/5.0/en/stored-routines.html)。

请记住，始终清理您的输入！

# java - 如何使类不允许创建新对象（新对象（））

> ID：12280808
> 
> 赞同：4
> 
> 时间：2012-09-05T11:51:36.223
> 
> 标签：java, new-operator

我正在开发一个库，我不希望用户直接使用`new`关键字创建类的实例，而是使用特殊的方法来创建对象。如果用户使用`new`关键字实例化一个类，编译器是否可能会出错。例如：

```
public class MyClass {
    private MyClass(int i) {  }

    public MyClass createMyClassInt(int i) {
        return new MyClass(i);
    }

    private MyClass(double d) { }

    public MyClass createMyClassDouble(double d) {
        return new MyClass(d);
    }
} 
```

所以当用户尝试实例化`MyClass myClass = new MyClass();`时，编译器会报错。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-05T11:54:09.127

您的代码*几乎*没问题 - 您所需要的只是使您的`create`方法静态，并给它们一个返回类型：

```
public static MyClass createMyClassInt(int i) {
  return new MyClass(i);
}

public static MyClass createMyClassDouble(double d) {
  return new MyClass(d);
} 
```

这些方法必须是静态的，这样调用者就不必*为了*创建一个新实例而必须引用一个实例:)

编辑：正如评论中所指出的，这可能也是值得的`final`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T11:55:43.797

如果你想通过特殊方法创建你的类，为什么不使用工厂设计模式？类中的静态方法，它返回类的新实例

如果您只是不想通过默认构造函数创建新类，并且想强制用户使用带参数的类，那么就不要实现默认构造函数

# sql - where 子句和 els 中的 case 语句什么都不做

> ID：12280811
> 
> 赞同：2
> 
> 时间：2012-09-05T11:51:47.297
> 
> 标签：sql

请检查以下查询

```
DECLARE @status varchar(1)
DECLARE @code varchar(50)

Set @status = '0'

select id,code from MasterTable where 
('07/31/2012' between  StartDate and EndDate) and 
Case when @status = '0' and Status=@status then 1 end = 1 
```

此查询适用于我，但不适用于`@Status=1`

我需要像这样的查询

```
if @Status = '0'
    select id,code from MasterTable where 
   ('07/31/2012' between  StartDate and EndDate) and Status = @Status
   if @code <> '0' 
        select id,code from MasterTable where 
        ('07/31/2012' between  StartDate and EndDate) and Status = @Status and code =@code
else
     select id,code from MasterTable where 
   ('07/31/2012' between  StartDate and EndDate) 
      if @code <> '0' 
        select id,code from MasterTable where 
        ('07/31/2012' between  StartDate and EndDate) and Status = @Status and code =@code 
```

我怎样才能实现这个用例 when 声明？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:55:06.017

您可以通过稍微改写查询来简化查询：

```
select  id,code 
from    MasterTable 
where   '07/31/2012' between  StartDate and EndDate)
        and (@status <> '0' or Status = @status) 
```

# javascript - Javascript 使用 div id 切换

> ID：12280813
> 
> 赞同：0
> 
> 时间：2012-09-05T11:51:51.317
> 
> 标签：javascript, jquery

大家好，我对 jquery 切换脚本有疑问..

```
<a class="clickMe">Text 1</a>
</br>
 <div class="sri"> - This text will be toggled</div>

<a class="clickMe">Text 2</a>
</br>
<div class="sri"> - This text will be toggled 2</div>

$('a.clickMe').click(function () {
// find first of following DIV siblings
// with class "textBox" and toggle it

$(this).nextAll('div.sri:first').show();
$('div.sri:visible').not($(this).nextAll('div.sri:first')).toggle();
}); 
```

上面的脚本工作正常，请查看[演示](http://jsfiddle.net/LTYa2/42/)

但是现在我需要`<div id`在不改变脚本功能的情况下使用什么来代替`<div class`...我尝试了很多方法但仍然遇到一些问题...我可能不必使用`<a class="clickMe">`有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:54:47.893

确保不要重复分配给元素的 ID。

以下是 XHTML 1.0 的一些规范：

> 在 XML 中，片段标识符属于 ID 类型，每个元素只能有一个 ID 类型的属性。因此，在 XHTML 1.0 中，id 属性被定义为 ID 类型。为了确保 XHTML 1.0 文档是结构良好的 XML 文档，XHTML 1.0 文档在上面列出的元素上定义片段标识符时必须使用 id 属性。有关在将 XHTML 文档作为媒体类型 text/html 提供服务时确保此类锚点向后兼容的信息，请参阅 HTML 兼容性指南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:55:33.573

具有唯一 ID：

```
<a class="clickMe" toggle="first">Text 1</a>
</br>
 <div id="first" class="text"> - This text will be toggled</div>

<a class="clickMe" toggle="second">Text 2</a>
</br>
<div id="second" class="text"> - This text will be toggled 2</div>

$('a.clickMe').click(function () {
   id = $(this).attr('toggle');
   $('.text').not('#' + id).hide();
   $('#' + id).show();
}); 
```

查看我的[Demo](http://jsfiddle.net/LTYa2/45/)或我编辑的[Demo](http://jsfiddle.net/LTYa2/49/)或第三个[Demo](http://jsfiddle.net/LTYa2/53/)。

# python - PyQt 窗口焦点

> ID：12280815
> 
> 赞同：10
> 
> 时间：2012-09-05T11:51:58.813
> 
> 标签：python, window, focus, pyqt, pyqt4

如果用户单击另一个窗口，我试图将焦点放在一个窗口上。

现在我有两个窗口：窗口 A 在后面，窗口 B 在前面。当窗口 B 出现时，它会禁用窗口 A。现在我想要的是，每当用户在窗口 B 之外单击时，它应该将焦点返回给窗口 B。

这是窗口 B 的代码：

```
class window_b(QtGui.QDialog):
    def __init__(self,parent=None):
        super(window_b, self).__init__(parent)
        window_a.setEnabled(False)
        self.ui = Ui_Form_window_b()
        self.ui.setupUi(self)
        self.setFocusPolicy(QtCore.Qt.StrongFocus)

    def focusOutEvent(self,event):
        self.setFocus(True)
        self.activateWindow()
        self.raise_()
        self.show() 
```

我尝试了`setFocus`and `activateWindow`，但它没有将焦点返回到窗口 B。

有什么建议么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-05T12:00:03.753

要`window_b`始终保持领先，您必须添加 windowflag `QtCore.Qt.WindowStaysOnTopHint`。在你`__init__`添加调用

```
self.setWindowFlags(PyQt4.QtCore.Qt.WindowStaysOnTopHint) 
```

我必须补充一点，这只是对窗口管理器的提示，并不保证会成功。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-03T21:47:13.657

`self.raise_()`后跟 a`self.activateWindow()`应该是您要查找的命令，尽管在我的 Debian 操作系统上似乎存在某种问题，例如，如果我单击最大化的窗口，该窗口将获得焦点，但它会也消失了，看起来像某种错误，`setTopLevelWindow`方法中的序列将绕过该行为：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

import sip
sip.setapi('QString', 2)
sip.setapi('QVariant', 2)

from PyQt4 import QtGui, QtCore, QtWebKit, QtNetwork

class myWindow(QtGui.QMainWindow):
    def __init__(self, parent=None):
        super(myWindow, self).__init__(parent)

        self.button = QtGui.QPushButton(self)
        self.button.setText("Show Dialog")

        self.dialog = QtGui.QDialog(self)
        self.dialog.setFocusPolicy(QtCore.Qt.StrongFocus)
        self.dialog.installEventFilter(self)

        self.button.clicked.connect(self.dialog.show)

        self.setCentralWidget(self.button)

    def eventFilter(self, obj, event):
        if event.type() == QtCore.QEvent.WindowDeactivate:
            self.setTopLevelWindow()
            self.dialog.close()

            return True

        return False

    def setTopLevelWindow(self):    
        if self.windowState() != QtCore.Qt.WindowMaximized:
            self.showMaximized()
            self.showNormal()

        else:
            self.showNormal()
            self.showMaximized()

        self.raise_()
        self.activateWindow()

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('myWindow')

    main = myWindow()
    main.show()

    sys.exit(app.exec_()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-11T12:39:32.783

```
class window_b(QtGui.QDialog):
    def __init__(self,parent=None):
        super(window_b, self).__init__(parent)
        window_a.setEnabled(False)
        self.ui = Ui_Form_window_b()
        self.ui.setupUi(self)
        self.setWindowModality(QtCore.Qt.ApplicationModal)
        self.setFocusPolicy(QtCore.Qt.StrongFocus)

    def focusOutEvent(self,event):
        self.setFocus(True)
        self.activateWindow()
        self.raise_()
        self.show() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-17T18:53:28.270

我在那里找到了一个简单的技巧，只需使用`self.showNormal()`它就可以了，将焦点返回到窗口，所以它是：

```
class window_b(QtGui.QDialog):
    def __init__(self,parent=None):
        super(window_b, self).__init__(parent)
        window_a.setEnabled(False)
        self.ui = Ui_Form_window_b()
        self.ui.setupUi(self)
        self.setFocusPolicy(QtCore.Qt.StrongFocus)

    def focusOutEvent(self,event):
        self.showNormal() 
```

而已！玩得开心编码

# ajax - 可以在特定页面元素上使用 jQuery Mobile 加载微调器吗？

> ID：12280817
> 
> 赞同：2
> 
> 时间：2012-09-05T11:52:02.257
> 
> 标签：ajax, jquery, jquery-mobile

我正在编写一个专为平板电脑设计的应用程序，每次选择表中的一行时我都需要加载数据。选择一行后，我想将微调器放置在将加载新数据的 div 上。

这可能吗，还是我需要阻止整个页面或引入 BlockUI 之类的东西？

我正在使用 jQuery Mobile 1.2.0 Alpha。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T11:59:45.030

像这样 ？？？

## [演示](http://jsfiddle.net/akhurshid/MsbqT/)

**jQuery：**

```
function loadData(id) {

    var btnID = id;
    $.ajax({

        url: "http://fiddle.jshell.net/akhurshid/g2tD5/show/",       

           beforeSend: function() {
            $('.loader').html('<img src="http://cdn.nirmaltv.com/images/generatorphp-thumb.gif" alt="Wait" />');
           },

           success: function(data) {           
               $('.loader').fadeTo('fast','0.0');
               $('#' + btnID).fadeTo('fast','0.0'); 

                var htmlData = $('.result').html(data).hide().css('opacity','0');

                $(htmlData).fadeTo('fast','1.0');                                 
           }
    });
} 
```

**HTML：**

```
<div id="wrapper">
    <div class="loader"></div>
    <div class="result"></div>
    <button id="load-btn" onclick="loadData(this.id);">Load Data Here</button>
</div> 
```

**CSS：**

```
#wrapper{
    width: 90%;
    margin: 20px auto;
    padding: 20px;
    overflow: hidden;
    border: 1px solid #777;
    background: #ccc;
}

.loader{
    width: 64px;
    height: 64px;
    top: 50%;
    left: 50%;
    position: absolute;
    z-index: 9999;
    display: block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T12:31:14.870

```
$.mobile.loadingMessageTextVisible = true;

$.mobile.showPageLoadingMsg("b", "please wait..."); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T00:50:16.520

这行得通吗？

例子：

*   [http://jsfiddle.net/UNmEh/](http://jsfiddle.net/UNmEh/)

JS

```
// show the loader
$.mobile.showPageLoadingMsg();

// Move the loader left 30 pixels
$('div.ui-loader').attr('style','left:30px;'); ​ 
```

HTML

```
<div data-role="page" id="placeholder-page">
</div> 
```

# android - 有效且动态地使用 Include 属性

> ID：12280820
> 
> 赞同：0
> 
> 时间：2012-09-05T11:52:15.520
> 
> 标签：android, xml

我们可以通过属性重用其他xml的所需元素（而不是整个布局）吗？我只想在 XML2 中使用 XML1 的一些元素，我可以在包含函数的帮助下使用它。例如，我想在 xml2 中使用 xml1 的所有元素，但不想要 xml1 的背景。请尽快回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:19:18.537

您可以考虑使用自定义视图......它通常工作得很好，而且可以重复使用！

编辑：就个人而言，我使用[Android Annotation](https://github.com/excilys/androidannotations) -> 查看[自定义视图](https://github.com/excilys/androidannotations/wiki/Enhance%20custom%20views)页面。

如果你不使用AA，请看[这个](http://developer.android.com/training/custom-views/create-view.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:57:14.513

你不能做那种事情。如果使用包含标签，则包含所有内容。

我建议您以更好的方式考虑您的布局包含，以便您可以有效地使用包含。

# c# - 动态更改样式表 C#

> ID：12280821
> 
> 赞同：0
> 
> 时间：2012-09-05T11:52:22.700
> 
> 标签：c#, asp.net

我想在下拉列表的选定索引更改上更改一组控件的样式表。

```
 <asp:PlaceHolder ID="plcPreview" runat="server">
<asp:DropDownList ID="ddlTest" runat="server" >
<asp:ListItem Text="Test1"></asp:ListItem>
<asp:ListItem Text="Test2"></asp:ListItem>
</asp:DropDownList>

<asp:TextBox ID="txtTest" runat="server"></asp:TextBox><br />

<ajax:ComboBox ID="cmbTest" runat="server" DropDownStyle="DropDownList" AccessKey="f"  Width="325" Height="20"
AutoCompleteMode="SuggestAppend" CaseSensitive="False" ItemInsertLocation="OrdinalText" style="margin-left:-3px;" TabIndex="3"> 
<asp:ListItem Text="Test1"></asp:ListItem>
<asp:ListItem Text="Test2"></asp:ListItem>
</ajax:ComboBox><br />
<div class="gridmain">

<asp:GridView ID="grvTest" runat="server" AutoGenerateColumns="true"
ShowHeader="True" CssClass="tabledata" Width="100%" >
<AlternatingRowStyle CssClass="pointer"  />
<RowStyle CssClass="even pointer" />
<HeaderStyle CssClass="headings" />
</asp:GridView>
</div>
</asp:PlaceHolder> 
```

我只想将不同的样式表应用于此占位符，而不是应用于整个页面，具体取决于下拉列表中选择的值。

我在后面的代码中使用它

```
 HtmlLink css = new HtmlLink();
                css.Href = "themes/" + theme + "/css/default.css";
                css.Attributes["rel"] = "stylesheet";
                css.Attributes["type"] = "text/css";
                plcPreview.Controls.Add(css); 
```

但是样式表会应用于整个页面。我希望它只应用于占位符而不是整个页面。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:57:16.310

加载时样式表对整个页面可见，似乎您正在加载样式表并将其添加到占位符，这将使其在页面呈现后对 DOM 的所有元素可见。

我认为最好的方法是使用 JQuery [addClass](http://api.jquery.com/addClass/)，试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:56:47.760

您不能仅将样式表应用于页面的一部分。如果您想实现该目标，您的 css 文件必须具有特定的 css 选择器，这些选择器仅匹配您要设置样式的部分以及其中的所有内容。

例如，在您的 css 中，您可以拥有以下内容：

```
<asp:placeholder id="plcPreview" ...>
   <div class="c" 
```

CSS：

```
#plcPreview
{
   color:black;
}

#a.c
{
    color:red;
} 
```

等等...

css 文件中与占位符之外的其他元素匹配的任何其他内容也将被匹配和设置样式。

# java - 在圆中查找切点

> ID：12280827
> 
> 赞同：3
> 
> 时间：2012-09-05T11:52:38.067
> 
> 标签：java, math

给出这个草图：

![在此处输入图像描述](../Images/426c8b069b22a52ac67f7afd22a32a3d.png)

是否有可能找到任何切点（蓝色的），让您知道：

*   圆的中心点（宽度/2，宽度/2）。
*   连接未知点到中心的直线的*度角*`start angle`（角度从点在CW方向计算）。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T11:59:10.643

是的，这绝对是可能的。

半径为`width/2`。

你知道角度，三角函数也知道。

这是一些代码：

```
double radius = width/2;
double x = (radius)*Math.cos(-angle); // angle is in radians
double y = (radius)*Math.sin(-angle); 
```

如果角度以度为单位，您可以像这样将其更改为弧度。

`angle = angle/180.0*Math.PI;`

* * *

**编辑**

由于您只需要正值，因此您可以使用已计算的`x`和来执行此操作`y`。

`x += radius;`

`y = radius - y;`

关于单位圆的视频：[http ://www.khanacademy.org/math/trigonometry/v/unit-circle-definition-of-trig-functions](http://www.khanacademy.org/math/trigonometry/v/unit-circle-definition-of-trig-functions)

# git - GIT：合并期间的提交优先级是什么？

> ID：12280829
> 
> 赞同：5
> 
> 时间：2012-09-05T11:52:39.120
> 
> 标签：git, branch

我想知道，在这种情况下合并期间选择提交的优先级是什么，如下所述。

我有`develop`分支。

```
D1 - D2 - D3 
```

然后我`release`从中创建了分支并添加了一些提交。

```
D1 - D2 - D3 - R4 - R5 
```

同时添加了一些开发提交

```
D1 - D2 - D3 - D6 
```

`release`然后，我使用以下命令从分支中删除一些提交`git rebase -i HEAD~3`：

```
D1 - x - x - R4 - R5 
```

* * *

`release`分支将如何合并到`develop`using `git merge --no-ff release`？我想要这样：

```
D1 - D2 - D3 - R4 - R5 - D6 
```

是否有可能我会通过提交删除获得合并分支？

```
D1 - x - x - R4 - R5 - D6 
```

我期待着关于“幕后”的解释:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T12:57:35.800

如果你做了 a `revert`in`release`它会在合并时恢复这些提交。如果你做了`rebase`它不会。那是因为`revert`显示您明确删除它们，并在历史记录中保留该事实。 `rebase`看起来这些提交从未发生在 中`release`，因此没有理由`merge`删除它们。

就优先级而言，两个分支无论如何都具有相同的优先级。回到分支共同的最后一次提交，如果每个分支以不同的方式更改某些内容，git 会将其显示为合并冲突。`rebase`不恢复这些提交的唯一原因是因为您重写了历史记录以使其看起来好像它们从一开始就从未出现在分支中。

顺便说一句，您确实意识到您可以在 git 中测试这些东西，无论是在克隆中还是通过小心您的分支，可能比提出问题所需的时间还短？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T10:32:10.707

作为其他答案的补充：

> 我想知道，在这种情况下合并期间选择提交的优先级是什么

Git 通常在合并期间没有“优先级”的概念。在合并期间，所有分支都同等重要，Git 会尝试合并来自所有分支的更改。

如果存在矛盾（例如不同的分支以不同的方式更改同一行），Git 不会以某种方式让一个分支“获胜”，而是会报告合并冲突。

这实际上是一个深思熟虑的设计决定。Linux 谈论在 Git 中合并：

> Linus：就我*个人*而言，我想要一些可重复且不聪明的东西。我理解*或*告诉我它做不到的事情。

[http://www.wincent.com/a/about/wincent/weblog/archives/2007/07/a_look_back_bra.php](http://www.wincent.com/a/about/wincent/weblog/archives/2007/07/a_look_back_bra.php)

因此，Git 故意不以某种方式巧妙地尝试找出哪个分支“更重要”——它只是将决定权留给了用户。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T12:54:39.017

你似乎知道`git-rebase`，所以：

```
$ git checkout develop
$ git rebase -i D1 release 
```

交互模式让您可以按照自己的方式选择和重新排序提交。

# jquery - 地图 google maps 结果 jquery

> ID：12280830
> 
> 赞同：0
> 
> 时间：2012-09-05T11:52:42.980
> 
> 标签：jquery, maps

我正在尝试将谷歌地图结果映射到缓存。问题在于数据变量在第一次搜索时始终未定义。它只会在第二次搜索后才有结果（使用相同的术语）。任何人都可以检查什么问题？

```
 if (!(me.data = me.googleSearchCache[ location ])) {
                var geocoderRequest = {
                    address: location
                }
                geocoder.geocode(geocoderRequest, function(results, status) {
                    if (status == google.maps.GeocoderStatus.OK) {
                        me.googleSearchCache[ location ]  = $.map(results, function(loc) {
                            return {
                                value : loc.formatted_address,
                                //bounds : loc.geometry.bounds,
                                lat : loc.geometry.location.lat(),
                                lng : loc.geometry.location.lng()
                            };
                        });
                    }
                 });
            }
            data = me.googleSearchCache[ location ];
            debug(data); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:26:35.173

谷歌地图地理编码请求是异步的，因此在您设置数据变量时结果不可用。它只会在地理编码请求的回调中立即可用。要查看，请在回调中执行 console.log。

# c++ - 常量类成员不是常量 - C++

> ID：12280832
> 
> 赞同：1
> 
> 时间：2012-09-05T11:52:51.023
> 
> 标签：c++, constants

我想知道当我将一个值传递给一个常量变量时​​，为什么这个变量会改变。

```
#include <cstdio>

struct point
{
    int x, y, z;
};

class A
{
    public:
        A(const point &p) :
           p(p)
        {
             printf("(%d,%d,%d)\n", p.x, p.y, p.z);
        }

        void do_smth()
        {
            printf("(%d,%d,%d)\n", p.x, p.y, p.z);
        }

        const point &p;
};

int main(int argc, const char *argv[])
{
    point p = {1, 1, 1};
    A a(p);
    p.y = 4;
    a.do_smth();
    return 0;
} 
```

标准输出：

```
(1, 1, 1)
(1, 4, 1) 
```

我使用没有额外参数的 g++ v4.7 来编译这段代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T11:54:59.920

好吧，类的`Point`内部`A`是恒定的，但是由于它是一个引用而*不是*恒定*的*，因此您可以随意更改，并且所有引用也会更改。为了简化，引用只是一种花哨的指针。`p`*`p``p`*

 ** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T11:55:07.177

`p`本身不是 const。`A.p`是...用引用引用非`const`变量`const`并不会神奇地使它成为`const`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T11:56:47.140

`const`意味着值*不能通过这个引用*改变，而不是它根本不会改变。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T11:55:36.370

您更改变量就地，它不是恒定的。你不能改变它的`do_smth()`方法，试试吧。

作为常量传递给某个类根本不会改变对象。*

# c# - 内存不足

> ID：12280843
> 
> 赞同：0
> 
> 时间：2012-09-05T11:53:28.450
> 
> 标签：c#, winforms, wcf-data-services

我正在使用 WCF 数据服务从我的 winforms 应用程序中的服务器获取数据。我正在尝试显示具有数百万条记录的庞大报告。尽管我正在明智地获取数据页面并将其存储到集合中，但内存不足。

这是用于查找总记录并为 List 分配内存的代码。

```
int totalRecords = ReportingService.Instance.CountRecords_ReportItemWiseSell(d1, d2);
List<Report_ItemWiseSellEntity> reportItems = new List<Report_ItemWiseSellEntity>(totalRecords); 
```

这是收集所有分页数据的代码

```
int totalPageCount = (totalRecords / pageSize) + 1;
lvReport.Items.Clear();
for (int i = 1; i <= totalPageCount; i++){
   var tmpItems = new List<Report_ItemWiseSellEntity>();
   tmpItems = ReportingService.Instance.GetItemWiseSellReport(d1, d2, i, pageSize);
   reportItems.AddRange(tmpItems);

   ... //other stuff
   tmpItems = null;
   Application.DoEvents();
} 
```

任何人都可以建议如何克服这个内存问题。还有其他选择吗？感谢您分享您的智慧和时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:41:22.887

除非 `... // other stuff`包含对问题至关重要的内容，否则您逐页获取数据对 WinForms 端的内存消耗没有帮助，因为您`Report_ItemWiseSellEntity`将从服务中检索到的所有实例累积添加到`reportItems`列表中。

由于您的 UI 永远无法同时显示“数百万条记录”，因此您的策略应该是在 WinForms 应用程序的内存中仅保留当前随时显示/处理的那些记录。您将需要重新考虑将数据绑定到 UI 的设计，并将数据“页面”的检索与用户通过 UI 对报表的导航进行协调。

# c++ - 后台程序接收大量控制台输入，而监视器程序在前台运行

> ID：12280844
> 
> 赞同：1
> 
> 时间：2012-09-05T11:53:34.443
> 
> 标签：c++, bash, watchdog

我已经整理了一个小的 bash 脚本，它启动然后定期检查我的主程序是否正在运行（控制台应用程序，没有 gui）。我的主要应用程序应该是设备（嵌入式）系统的核心，它需要连续运行。

```
# Start myProgram
   /path/to/myProgram &

while true
do
   if [  -n "`ps ax | grep -v grep | grep myProgram`" ]
   then
       sleep 5 2>&1 > /dev/null
   else
      /path/to/myProgram &
   fi
done 
```

我的主程序包含一个 c++ select()（带计时器）循环，它监视几个 TCP、UDP 和 Unix 域套接字以及标准输入。

在前台运行时，myProgram 按预期运行。当没有人向它发送数据时，它只是坐在 select() 每 2 秒超时一次，摆弄计时器等，然后再次等待。任何以 ENTER 结尾的键盘活动都会被抓取和处理。控制台输入提出“在控制台收到 N 个字节”消息（现在！）

但是，当我的脚本在后台启动 myProgram 时，我会收到一个恒定的“在控制台收到的”字节流”消息，就好像标准输入正在关闭并重新打开，或者其他一些应用程序正在向我的应用程序发送 ENTER 流。

有人可以解释一下吗？

事实上，如果处于后台的状态导致 stdin 关闭/重新打开 ovr 及以上，那么 myProgram 是否有可能检测到它是后台的并与 stdin 断开连接？我是否也需要断开与 stdout 和 stderr 的连接？猜猜这会让我成为一个守护进程。

最后，看门狗程序是否是跟踪 myProgram 仍在运行的更好方法？看门狗可以重启程序而不是重启整个机器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:27:12.727

只有前台作业可以将标准输入附加到终端。如果后台作业尝试从终端读取，它们将被挂起。您必须将工作留在前台，或从其他地方重定向标准输入。

# java - 使用 java-apns 检测推送问题

> ID：12280848
> 
> 赞同：6
> 
> 时间：2012-09-05T11:53:55.700
> 
> 标签：java, apple-push-notifications

我正在使用 Java-APNS 框架向 iOS 设备发送推送通知。它工作得很好（感谢开发人员！），当一切设置正确时，我可以发送到我的设备。但是，我想正确处理失败的情况。在某些情况下，应该收到一些记录在案的 APNS 错误代码：

[http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingWIthAPS/CommunicatingWIthAPS.html#//apple_ref/doc/uid/TP40008194-CH101-SW1](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingWIthAPS/CommunicatingWIthAPS.html#//apple_ref/doc/uid/TP40008194-CH101-SW1)

我将如何创建一些失败案例？我有自己的类来实现 ApnsDelegate 并用我的委托构造我的 ApnsService 对象。我尝试在我的 push 调用中传递一个无效的令牌以及一个用于有效负载的空字符串：

```
service.push("ab", "") 
```

但是我的 ApnsDelegate 的 messageSent 方法仍然被调用。我希望这最终会出现在 messageSendFailed 方法中，或者可能是 connectionClosed 但都没有被调用。有没有人测试过这个东西并让它工作？这是我的课程的一个例子......我实际上是在 Scala 中这样做的，但我想如果我发布 Java 会更好。当被调用时，它只会打印“Message sent to AB”。

```
public class ApnsSender implements ApnsDelegate {

    public void send(Notification Notification) {
        ApnsService service = getApnsService();

        String payload = getPayload(notification);

        service.push("ab", "");
    }

    private ApnsService getApnsService() { ... }

    private String getPayload(Notification notification) { ... }

    public void messageSent(ApnsNotification message) {
        String token = Utilities.toHexString(message.getDeviceToken());
        System.out.println("Message sent to " + token);
    }

    public void messageSendFailed(ApnsNotification message, Throwable e) {
        System.out.println("Message failed");
    }

    public void messageSent(DeliveryError e, Int messageIdentifier) {
        System.out.println("Message closed with error code " + e.code());
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T03:58:54.633

正如我在评论中提到的，我研究了[JavaPNS](http://code.google.com/p/javapns)作为替代方案，这是一个更好的框架。它目前也正在处理中（最后一次提交是在 2 天前发布时），因为[java-apns](https://github.com/notnoop/java-apns)自 2011 年 12 月以来尚未更新。

对于任何尝试向 iOS 设备发送推送通知的人，我建议将 java-apns 的使用替换为 JavaPNS。它对收到的错误数据包做出反应，并以易于访问的方式将结果传递给调用者。

# objective-c - 如何自定义 FBLoginVIew？

> ID：12280850
> 
> 赞同：34
> 
> 时间：2012-09-05T11:54:06.843
> 
> 标签：objective-c, ios, facebook, facebook-login, facebook-ios-sdk

为了在我的 ios 应用程序中连接到 facebook，我使用[Facebook SDK for iOS](http://developers.facebook.com/docs/sdk-reference/iossdk/3.0/class/FBLoginView/)中的 FBLoginVIew 。

它显示了一个不错的 FB 登录按钮，但我想使用我自己的图像和文本作为登录按钮。问题是我在任何地方都看不到如何定制它。

我已经设法通过覆盖 FacebookSDKResources.bundle/FBLoginView/images 中的图像来更改登录按钮背景图像，但我找不到更改登录按钮文本和位置的位置，所以它保持“登录”...

解决方案，有人吗？

谢谢

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-09-05T12:06:36.143

答案是浏览 FBLoginView 子视图，找到按钮和标签并自定义它们。

这是代码：

```
FBLoginView *loginview = 
[[FBLoginView alloc] initWithPermissions:[NSArray arrayWithObject:@"publish_actions"]];

loginview.frame = CGRectMake(4, 95, 271, 37);
for (id obj in loginview.subviews)
        {
            if ([obj isKindOfClass:[UIButton class]])
            {
                UIButton * loginButton =  obj;
                UIImage *loginImage = [UIImage imageNamed:@"YourImg.png"];
                [loginButton setBackgroundImage:loginImage forState:UIControlStateNormal];
                [loginButton setBackgroundImage:nil forState:UIControlStateSelected];
                [loginButton setBackgroundImage:nil forState:UIControlStateHighlighted];
                [loginButton sizeToFit];
            }
            if ([obj isKindOfClass:[UILabel class]])
            {
                UILabel * loginLabel =  obj;
                loginLabel.text = @"Log in to facebook";
                loginLabel.textAlignment = UITextAlignmentCenter;
                loginLabel.frame = CGRectMake(0, 0, 271, 37);
            }
        }

loginview.delegate = self;

[self.view addSubview:loginview]; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-01-27T16:38:59.150

我想将 FBLoginview 显示为 UIBarbutton，所以我做了一个简单的方法：

首先，我将 FBLoginView 添加为属性：

```
@property (nonatomic, strong) FBLoginView* loginView; 
```

然后我在视图之外添加了登录视图：

```
 self.loginView = [[FBLoginView alloc] init];
    self.loginView.frame = CGRectMake(-500, -500, 0, 0);
    [self.view addSubview:self.loginView];
    self.loginView.delegate = self; 
```

然后，我添加了一个标准系统 UIbarbuttonItem

```
 UIBarButtonItem* fbButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAction target:self action:@selector(fireFbLoginView)];
    [self.navigationItem setRightBarButtonItem:fbButton]; 
```

然后我将栏按钮设置为触发 FBLoginView 的点击动作；）

```
-(void)fireFbLoginView{
for(id object in self.loginView.subviews){
    if([[object class] isSubclassOfClass:[UIButton class]]){
        UIButton* button = (UIButton*)object;
        [button sendActionsForControlEvents:UIControlEventTouchUpInside];
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-09-25T09:56:55.007

*在我写这篇文章的时候，Facebook 已经发布了他们的 iOS SDK 3.0 版。*

ozba 的答案有点工作，但在我看来，它**不应该**被使用。

*   首先，也是最重要的，一般规则是迭代 SDK 组件的子视图/超级视图是不好的做法，因为**层次结构可能会在 SDK 版本之间发生变化**，从而导致难以跟踪和修复的错误。
*   其次，当按钮被点击时，一两秒钟，它又回到了原始文本。

我的解决方案非常简单。在 Facebook 下载的文件夹**FacebookSDK**中，您有一个名为**Samples**的文件夹。在那里，您必须查看**SessionLoginSample**。您可以看到他们有一个普通的*Round Rect Button*，通过拥有它的 ViewController ，它具有**FBLoginViewDelegate**，它可以根据 FBSession 状态更改文本。相信我，这真的很简单。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-04-08T23:56:57.180

或者阅读 Facebook 的文档来构建你自己的按钮：

[https://developers.facebook.com/docs/ios/login-tutorial/#login-apicalls](https://developers.facebook.com/docs/ios/login-tutorial/#login-apicalls)

像这样：

```
- (void) buttonSelector
{
[FBSession openActiveSessionWithReadPermissions:@[@"basic_info"]
                                       allowLoginUI:YES
                                  completionHandler:
     ^(FBSession *session, FBSessionState state, NSError *error) {

         if (FBSession.activeSession.state == FBSessionStateOpen) {

             //To get the use
             [[FBRequest requestForMe] startWithCompletionHandler:^(FBRequestConnection *connection,NSDictionary<FBGraphUser> *user, NSError *error) {
                 NSString *token = [[[FBSession activeSession] accessTokenData] accessToken];

             }];

         }
     }];

} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-05T12:22:19.700

更改 Facebook 资源包中的文本 en.lproj Localizable.strings ...我想它可以工作

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-03-26T02:37:14.087

我正在创建一个自定义 FB 按钮类，以防我需要为其他项目回收它，它仍然是第一个版本，但可以根据记录的状态更改按钮图像并轻松管理其大小。

有些方法是为了以防万一。

请注意，您还可以通过将其类设置为 FBCustomLoginView 及其委托来放置 NIB 文件中的按钮视图，但是您设置的任何大小都将始终重置为 FBLoginView 的默认大小，因此您必须始终在代码中设置特定大小。（我不知道如何从 NSCoder 获取框架的大小以避免这种情况）

代码是原样的，您可以编辑它并对其中的任何错误负责，我会在找到任何错误时编辑这个答案。我希望它对某人有用。

如果您从 NIB 添加它，您只需使用所需的文本和图像对其进行调整，其余的就像 FBLoginView 一样工作：

```
 _facebookLoginButton.label.text = nil;
    [_facebookLoginButton setLoggedImage:  [UIImage imageNamed: @"ic_link_fb_on.png"] notLoggedImage:  [UIImage imageNamed: @"ic_link_fb_off.png"]];
    [_facebookLoginButton wrapButtonToSizeWidth: IS_IPAD ? 38 : 30 height: IS_IPAD ? 38 : 30 ]; 
```

**FBCustomLoginView.h**

```
#import <Foundation/Foundation.h>
#import <FacebookSDK/FacebookSDK.h>

@interface FBCustomLoginView : FBLoginView <FBLoginViewDelegate>

/** The button actual button */
@property (nonatomic, strong) UIButton* button;

/** The button label */
@property (nonatomic, strong) UILabel* label;

/** To a single button without label, set the same frame for the login button view and the actual button */
- (void)setWrappedButtonFrame:(CGRect)frame;

/** Wraps button to specified size, maintaining frame origin */
- (void)wrapButtonToSizeWidth: (CGFloat) width height: (CGFloat) height;

/** Sets a default background image for all states */
- (void) setBackgroundImage: (UIImage*) image selectedImage: (UIImage*) selectedImage highlightedImage: (UIImage*) highlightedImage disabledImage: (UIImage*) disabledImage;

/** Sets a default background image */
- (void) setBackgroundImage: (UIImage*) image;

/** Resizes the background image to specified size */
- (void) setBackgroundImageSizeWidth: (CGFloat) width height: (CGFloat) height;

/** Place images to manage and differentiate between logged in and out states */
- (void) setLoggedImage: (UIImage*) loggedImage notLoggedImage: (UIImage*) notLoggedImage;

@end 
```

**FBCustomLoginView.m**

```
#import "FBCustomLoginView.h"

@interface FBCustomLoginView() {
    id<FBLoginViewDelegate> _delegate;
    UIImage* _loggedImage;
    UIImage* _notLoggedImage;
}

@end

@implementation FBCustomLoginView

@synthesize button = _button;
@synthesize label = _label;

#pragma mark - View lifecycle, superclass override
- (id)init {
    if (self = [super init]) {
        [self getReferences];
    }
    return self;
}

- (id)initWithFrame:(CGRect)frame {
    if(self = [super initWithFrame: frame]) {
        [self getReferences];
    }
    return self;
}

- (id)initWithCoder:(NSCoder *)aDecoder {
    if (self = [super initWithCoder: aDecoder]) {
        [self getReferences];
    }
    return self;
}

- (void) getReferences {

    for (id obj in self.subviews) {
        if ([obj isKindOfClass:[UIButton class]]) {
            self.button = obj;
        }

        if ([obj isKindOfClass:[UILabel class]]) {
            self.label =  obj;
        }
    }

}

- (void)setDelegate:(id<FBLoginViewDelegate>)delegate {
    _delegate = delegate;
    [super setDelegate: self];
}

#pragma mark - FBLoginViewDelegate

- (void)loginViewShowingLoggedInUser:(FBLoginView *)loginView {
    if (_loggedImage) {
        [self setBackgroundImage: _loggedImage];
    }
    [_delegate loginViewShowingLoggedInUser: loginView];
}

- (void)loginViewFetchedUserInfo:(FBLoginView *)loginView
                            user:(id<FBGraphUser>)user {
    [_delegate loginViewFetchedUserInfo: loginView user: user];
}

- (void)loginViewShowingLoggedOutUser:(FBLoginView *)loginView {

    if (_notLoggedImage) {
        [self setBackgroundImage: _notLoggedImage];
    }
    [_delegate loginViewShowingLoggedOutUser: loginView];
}

- (void)loginView:(FBLoginView *)loginView handleError:(NSError *)error {
    if ([_delegate respondsToSelector: @selector(loginView:handleError:)]) {
        [_delegate performSelector: @selector(loginView:handleError:) withObject: loginView withObject: error];
    }
}

#pragma mark - Custom methods

/** To a single button without label, set the same frame for the login button view and the actual button */
- (void)setWrappedButtonFrame:(CGRect)frame {
    [super setFrame: frame];

    if (_button) {
        [self setBackgroundImageSizeWidth: frame.size.width height: frame.size.height];
    }

}

/** Wraps button to specified size, maintaining frame origin */
- (void)wrapButtonToSizeWidth: (CGFloat) width height: (CGFloat) height {
    [super setFrame: CGRectMake(self.frame.origin.x, self.frame.origin.y, width, height)];
    if (_button) {
        [self setBackgroundImageSizeWidth: width height: height];
    }
}

- (void) setBackgroundImage: (UIImage*) image selectedImage: (UIImage*) selectedImage highlightedImage: (UIImage*) highlightedImage disabledImage: (UIImage*) disabledImage {

    [_button setBackgroundImage:image forState:UIControlStateNormal];
    [_button setBackgroundImage:selectedImage forState:UIControlStateSelected];
    [_button setBackgroundImage:highlightedImage forState:UIControlStateHighlighted];
    [_button setBackgroundImage:disabledImage forState:UIControlStateDisabled];
}

- (void) setBackgroundImage: (UIImage*) image {
    [self setBackgroundImage: image selectedImage:nil highlightedImage:nil disabledImage:nil];
}

- (void) setBackgroundImageSizeWidth: (CGFloat) width height: (CGFloat) height {
    _button.frame = CGRectMake(0, 0, width, height);
}

- (void) setLoggedImage: (UIImage*) loggedImage notLoggedImage: (UIImage*) notLoggedImage {
    _loggedImage = loggedImage;
    _notLoggedImage = notLoggedImage;

    [self setBackgroundImage: notLoggedImage];
}

@end 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-12-10T03:41:43.777

我想我找到了一种更简单的方法来自定义文本，例如 FBSDKLoginButton 的文本，而无需从头开始创建包含所有登录功能的完全自定义按钮。这很好，因为 FBSDKLoginButton 完成了所有工作——您只需更改文本。对不起，我只知道 Swift ......这是代码：

```
var fbButton = FBSDKLoginButton()
var titleText = NSAttributedString(string: "Your new button title")
fbButton.setAttributedTitle(titleText, forState: UIControlState.Normal) 
```

享受！

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-05-07T18:28:48.560

您所有问题的答案，包括按登录后的标签非常简单：就像 OZBA 的答案一样，只需完全删除`UILabel`（添加`[loginLabel removeFromSuperview];`：）

**这是完整的工作代码：**

```
- (void)setFacebookConnectButton{
    self.loginView.readPermissions = @[@"public_profile", @"email", @"user_friends"];
    [self.loginView setDelegate:self];
    for (id obj in self.loginView.subviews)
    {
        if ([obj isKindOfClass:[UIButton class]])
        {
            UIButton * loginButton =  obj;
            UIImage *loginImage = [UIImage imageNamed:@"fb_connect"];
            [loginButton setBackgroundImage:loginImage forState:UIControlStateNormal];
            [loginButton setBackgroundImage:nil forState:UIControlStateSelected];
            [loginButton setBackgroundImage:nil forState:UIControlStateHighlighted];
            [loginButton setTitle:nil forState:UIControlStateSelected];
            [loginButton setTitle:nil forState:UIControlStateHighlighted];

            [loginButton sizeToFit];
        }
        if ([obj isKindOfClass:[UILabel class]])
        {
            UILabel * loginLabel =  obj;
            loginLabel.text = @"";
            loginLabel.textAlignment = NSTextAlignmentCenter;
            loginLabel.frame = CGRectMake(0, 0, 271, 37);
            [loginLabel removeFromSuperview];
        }
    }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-02-17T17:47:22.680

请阅读 Facebook SDK 中的 README 文件。您必须在 info.plist 中添加 Row - FacebookBundleName 并将其命名为您的捆绑包。然后，使用此名称将包添加到您的项目并放入名为“lang.lproj”的文件夹中：例如：en.lproj - it.lproj - fr.lproj - es.lproj.... 进入这个文件夹，你必须添加 Localizable.strings 文件，然后您可以本地化很多短语，例如：

```
"FBLV:LogOutButton" = "Log Out";
"FBLV:LogInButton" = "Log In";
"FBLV:LoggedInAs" = "Logged in as: %@";
"FBLV:LoggedInUsingFacebook" = "Logged in using Facebook";
"FBLV:LogOutAction" = "Log Out";
"FBLV:CancelAction" = "Cancel"; 
```

希望对你有帮助！

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-03-13T12:53:00.893

我刚刚找到了按下登录按钮时按钮文本更新的答案。我遇到了同样的问题。

如何尝试将按钮标签的框架设置为 CGRectMake(0,0,0,0)。

我试过了，我认为它有效。

将此代码添加到 ozba 的答案中：

```
[loginLabel setFrame:CGRectMake(0, 0, 0, 0)]; 
```

希望这可以帮助。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-06-23T10:07:59.773

我考虑了这个问题，我个人并不是很喜欢接受的答案......出于各种原因。每个人都可以自由选择任何他喜欢的解决方案，但我决定分享我自己的解决方案。

```
for (UIButton *view in loginView.subviews) {
    if ([view respondsToSelector:@selector(addTarget:action:forControlEvents:)]) {
        [view setBackgroundImage:nil forState:UIControlStateNormal];
        [view setBackgroundImage:nil forState:UIControlStateHighlighted];
    }
} 
```

我使用`respondsToSelector`而不是`isKindOfClass`因为将来该类可能是自定义的。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-07-17T18:17:37.400

将 FB 视图定位在屏幕外，或大小为 0x0。然后，设置按钮的操作以将消息 buttonPressed: 发送到 FB 视图。我认为这是最简单的方法。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-09-13T14:14:52.963

在我的例子中，我在 Photoshop 中创建了一个好看的按钮，然后简单地将它放在 facebook 按钮的顶部。（我知道Apple不建议将视图放在按钮上但是迭代子视图对我来说并不好看）。很难理解为什么像 FB 这样的公司没有提供简单的方法来做到这一点。

```
UIImageView *fbImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"facebookButton.png"]];
CGRect newFrame = fBButtonFrame;
newFrame.origin.x = 0; newFrame.origin.y = 0;
[fbImageView setFrame:newFrame];
[fbImageView setUserInteractionEnabled:NO];

FBLoginView *loginView = [[FBLoginView alloc] init];
[loginView setFrame:fBButtonFrame];
[loginView addSubview:fbImageView];
[self.view addSubview:loginView]; 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-10-11T10:43:18.060

如果您参考[https://github.com/facebook/facebook-ios-sdk/blob/master/src/UI/FBLoginView.m](https://github.com/facebook/facebook-ios-sdk/blob/master/src/UI/FBLoginView.m)，第 299 行，您会看到文本是由 FBLoginView 中的实例方法提供的。因此，您可以通过从 FBLoginView 派生您自己的类并提供您自己的 logInText 实现来更改此文本：

```
@interface CustomFBLoginView : FBLoginView

@end

@implementation CustomFBLoginView

-(NSString*) logInText {
    return @"Some custom text";
}

@end 
```

这有点冒险，因为它确实取决于内部实现细节。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-05-30T08:39:11.553

自最新版本 4.X Facebook SDK 以来，

自定义登录变得更容易，使用`FBSDKLoginManager`

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-07-06T10:54:36.817

根据最新的 Facebook 登录 iOS 版本 2.3。

您可以使用以下代码片段通过任何自定义 UIButton 登录。

```
- (void)loginWithFacebook:(id) sender {
   FBSDKLoginManager *login = [[FBSDKLoginManager alloc] init];
   [login logInWithReadPermissions:@[@"public_profile",@"email"] handler:^(FBSDKLoginManagerLoginResult *result, NSError *error) {
    if (error) {
        // Process error
    } else if (result.isCancelled) {
        // Handle cancellations
    } else {
        // Login Successful here

        // Check for any particular permissions you asked
        if ([result.grantedPermissions containsObject:@"email"]) {
            // Do work
        }
     }
  }];
} 
```

这是链接：[https ://developers.facebook.com/docs/facebook-login/ios/v2.3#login-apicalls](https://developers.facebook.com/docs/facebook-login/ios/v2.3#login-apicalls)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-09-20T07:00:53.080

**最简单的解决方案**

```
let FB_LoginButton = FBSDKLoginButton()

let imgV = UIImageView(frame: FB_LoginButton.frame)
img.image = UIImage(named: "Your Image Name")

let textV = UILabel(frame: CGRect(x: 0, y: 0, width: FB_LoginButton.frame.size.width, height: 20)) // Set Frames as you need
textV.text = "Your Text"
textV.font = textV.font.fontWithSize(20)

// Swift 3
textV.font = textV.font.withSize(20)

imgV.addSubview(textV)
FB_LoginButton.addSubview(imgV) 
```

# c# - 奇怪的异常编译动态构建的表达式

> ID：12280852
> 
> 赞同：7
> 
> 时间：2012-09-05T11:54:25.210
> 
> 标签：c#, linq, c#-4.0, expression-trees

我正在使用 System.Ling.Expressions API 创建和编译表达式。编译工作正常，但在某些情况下，在运行编译的 lambda 时，我会得到无法解释的 NullReferenceExceptions 甚至 System.Security.Verification 异常。作为参考，该项目的目的是为 .NET 类型创建和编译自定义序列化程序函数。

以下是引发 NullReferenceException 的表达式的 DebugInfo：

```
.Lambda #Lambda1<System.Action`2[IO.IWriter,<>f__AnonymousType1`2[System.Int32[],System.Int32]]>(
    IO.IWriter $writer,
    <>f__AnonymousType1`2[System.Int32[],System.Int32] $t) {
    .Block() {
        .Invoke (.Lambda #Lambda2<System.Action`2[IO.IWriter,System.Int32[]]>)(
            $writer,
            $t.a);
        .Invoke (.Lambda #Lambda3<System.Action`2[IO.IWriter,System.Int32]>)(
            $writer,
            $t.b)
    }
}

.Lambda #Lambda2<System.Action`2[IO.IWriter,System.Int32[]]>(
    IO.IWriter $writer,
    System.Int32[] $t) {
    .Block() {
        .Invoke (.Lambda #Lambda4<System.Action`2[IO.IWriter,System.Int32]>)(
            $writer,
            .Call System.Linq.Enumerable.Count((System.Collections.Generic.IEnumerable`1[System.Int32])$t));
        .Call IO.SerializerHelpers.WriteCollectionElements(
            (System.Collections.Generic.IEnumerable`1[System.Int32])$t,
            $writer,
            .Lambda #Lambda3<System.Action`2[IO.IWriter,System.Int32]>)
    }
}

.Lambda #Lambda3<System.Action`2[IO.IWriter,System.Int32]>(
    IO.IWriter $writer,
    System.Int32 $t) {
    .Call $writer.WriteInt($t)
}

.Lambda #Lambda4<System.Action`2[IO.IWriter,System.Int32]>(
    IO.IWriter $w,
    System.Int32 $count) {
    .Call $w.BeginWritingCollection($count)
} 
```

异常在对#Lambda3 的调用中引发，该调用从WriteCollectionElements 重复调用。WriteCollectionElements 的实现如下：

```
static void WriteCollectionElements<T>(IEnumerable<T> collection, IWriter writer, Action<IWriter, T> writeAction)
        {
            foreach (var element in collection)
            {
                writeAction(writer, element);
            }
        } 
```

通过这个函数内部的调试，我已经确定在抛出异常时，collection、writer、writeAction 和 element 都是非空的。我传递给已编译 lambda 的参数是：

```
new { a = new[] { 20, 10 }, b = 2 } 
```

同样奇怪的是，如果我删除 b 属性并重新生成我的序列化程序函数，一切正常。在这种情况下，序列化程序的 DebugInfo 是：

```
.Lambda #Lambda1<System.Action`2[IO.IWriter,<>f__AnonymousType5`1[System.Int32[]]]>(
    IO.IWriter $writer,
    <>f__AnonymousType5`1[System.Int32[]] $t) {
    .Block() {
        .Invoke (.Lambda #Lambda2<System.Action`2[IO.IWriter,System.Int32[]]>)(
            $writer,
            $t.a)
    }
}

.Lambda #Lambda2<System.Action`2[IO.IWriter,System.Int32[]]>(
    IO.IWriter $writer,
    System.Int32[] $t) {
    .Block() {
        .Invoke (.Lambda #Lambda3<System.Action`2[IO.IWriter,System.Int32]>)(
            $writer,
            .Call System.Linq.Enumerable.Count((System.Collections.Generic.IEnumerable`1[System.Int32])$t));
        .Call IO.SerializerHelpers.WriteCollectionElements(
            (System.Collections.Generic.IEnumerable`1[System.Int32])$t,
            $writer,
            .Lambda #Lambda4<System.Action`2[IO.IWriter,System.Int32]>)
    }
}

.Lambda #Lambda3<System.Action`2[IO.IWriter,System.Int32]>(
    IO.IWriter $w,
    System.Int32 $count) {
    .Call $w.BeginWritingCollection($count)
}

.Lambda #Lambda4<System.Action`2[IO.IWriter,System.Int32]>(
    IO.IWriter $writer,
    System.Int32 $t) {
    .Call $writer.WriteInt($t)
} 
```

我在 Windows 7 VS Express C# 2010 上运行 .NET Framework 4（至少这是我的构建目标）。

有谁知道可能出了什么问题或尝试调试的下一步？如果有帮助，我很乐意发布更多信息。

编辑：从那以后（据我所知）我找到了解决这个错误的方法，尽管我还没有更接近理解它发生的原因。在生成我上面发布的表达式的代码中，我有以下内容：

```
MethodInfo writeCollectionElementsMethod = // the methodInfo for WriteCollectionElements with .MakeGenericMethod() called with typeof(T)
Expression<Action<IWriter, T> writeActionExpression = // I created this expression separately
ParameterExpression writerParameter, enumerableTParameter = // parameters of type IWriter and IEnumerable<T>, respectively

// make an expression to invoke the method
var methodCallExpression = Expression.Call(
    instance: null, // static
    method: writeCollectionElementsMethod,
    arguments: new[] {
        enumerableTParameter,
        writerParameter,
        // passing in this expression correctly would produce the weird error in some cases as described above
        writeActionExpression
    }
);

// make an expression to invoke the method
var methodCallExpressionV2 = Expression.Call(
    instance: null, // static
    method: writeCollectionElementsMethod,
    arguments: new[] {
        enumerableTParameter,
        writerParameter,
        // this did not cause the bug
        Expression.Constant(writeActionExpression.Compile())
    }
); 
```

但是，我不喜欢单独编译每个表达式，所以我最终完全取消了 WriteCollectionElements 函数，只是通过 Expression.Loop、Expression.Break 等动态创建了 foreach 循环。

因此，我不再被封锁，但仍然很好奇。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T03:19:06.903

如果您在 C# 中手动构建操作，resharper 会抱怨 Lambda1 和 Lambda2 隐式捕获 clousure 中的变量

```
Action<IWriter, int> lambda4 = ( (IWriter writer, int length) => writer.BeginWritingCollection(length));
Action<IWriter, int> lambda3 = ( (IWriter writer, int value) => writer.WriteInt(value));
Action<IWriter, int[]> lambda2 = ( (IWriter writer, int[] value) =>
   {
      lambda4(writer, ((IEnumerable<int>) value).Count());
      WriteCollectionElements((IEnumerable<int>)value, writer, lambda3);
   });
Action<IWriter, TheData> lambda1 = ((writer, data) =>
   {
      lambda2(writer, data.a);
      lambda3(writer, data.b);
   });
class TheData { int[] a; int b; } 
```

在这种情况下，resharper 声明： lambda2 表达式上的“隐式捕获的闭包：lambda2
” lambda1 表达式上的
“隐式捕获的闭包：lambda4”

对此的解释是[here](http://devnet.jetbrains.net/thread/436232)和[here](http://sparethought.wordpress.com/2012/08/17/implicit-closures-in-c-lambdas/)。如果删除到 WriteCollectionElements 的行，警告就会消失。本质上，JIT 编译为内部表达式调用创建一个包装类，捕获写入者的值和匿名类型，以便将 BeginWritingCollection 的操作交给 WriteCollectionElements 静态方法。

解决方案是将 lambda2 中的语句内联到 lambda1

```
Action<IWriter, int> lambda4 = ( (IWriter writer, int length) => writer.BeginWritingCollection(length));
Action<IWriter, int> lambda3 = ( (IWriter writer, int value) => writer.WriteInt(value));
Action<IWriter, TheData> lambda1 = ((writer, data) =>
   {
      lambda4(writer, ((IEnumerable<int>) value.a).Count());
      WriteCollectionElements((IEnumerable<int>)value.a, writer, lambda3);
      lambda3(writer, data.b);
   });
class TheData { int[] a; int b; } 
```

# c++ - 在哪里将“&”放在函数的参数中？

> ID：12280854
> 
> 赞同：5
> 
> 时间：2012-09-05T11:54:27.453
> 
> 标签：c++, function, parameter-passing

谁能告诉我有什么区别

```
void fun(MyClass &mc); 
```

和

```
void fun(MyClass& mc); 
```

在 C++ 中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T12:04:38.007

没有给出。

最初，C 将允许：

```
int x, *y; 
```

声明一个`int`,`x`和一个指向 int 的指针, `y`.

因此，类型定义的一部分——使它成为指针的位——可以与另一部分分开。

C++ 大量复制了这个。

然后添加引用，它们得到了类似的声明风格，除了 with`&`而不是`*`. 这意味着两者都`MyClass &mc`被`MyClass& mc`允许。

在谈到选择时`*`，Strousup[写道](http://www.stroustrup.com/bs_faq2.html#whitespace)：

> 两者都是“正确的”，因为两者都是有效的 C 和 C++ 并且都具有完全相同的含义。就语言定义和编译器而言，我们也可以说“int*p;”。或“int * p;”
> 
> “int* p;”之间的选择 和“int *p;” 不是关于对与错，而是关于风格和重点。C 强调表达；声明常常被认为只是一种必要的罪恶。另一方面，C++ 非常强调类型。
> 
> “典型的 C 程序员”会写“int *p;” 并解释它“*p is what is the int”强调语法，并可能指向C（和C++）声明语法来论证风格的正确性。实际上，* 绑定到语法中的名称 p。
> 
> “典型的 C++ 程序员”会写“int* p;” 并解释它“p 是指向 int 的指针”，强调类型。实际上 p 的类型是 int*。我显然更喜欢这种强调，并认为它对于很好地使用 C++ 的更高级部分很重要。
> 
> （仅）当人们试图用一个声明声明多个指针时，才会出现严重的混淆：
> 
> 整数* p, p1; // 可能的错误：p1 不是 int*
> 
> 将 * 靠近名称并不会显着降低此类错误的可能性。
> 
> 诠释*p，p1；// 可能的错误？
> 
> 每个声明声明一个名称可以最大限度地减少问题 - 特别是在我们初始化变量时。人们不太可能写：
> 
> int* p = &i; 诠释 p1 = p; // 错误：int 由 int* 初始化
> 
> 如果他们这样做，编译器会抱怨。
> 
> 每当某事可以通过两种方式完成时，就会有人感到困惑。每当有什么事情是口味问题时，讨论就会永远拖延下去。每次声明坚持一个指针并始终初始化变量，混淆的根源就消失了。有关 C 声明语法的详细讨论，请参阅 C++ 的设计和演变。

通过扩展，当涉及到 时，它`&`与`MyClass& mc`“典型的 C++”风格相匹配。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T11:56:31.967

对编译器来说没有区别。

第一个更接近通常的 C 语法，后者更接近 C++。

# backbone.js - 在 Backbone.Model 中使用 _.bindAll

> ID：12280855
> 
> 赞同：0
> 
> 时间：2012-09-05T11:54:26.963
> 
> 标签：backbone.js, this, underscore.js

我对*如何*使用仍然很困惑[`_.bindAll()`](http://underscorejs.org/#bindAll)。我知道**这**有时指的是另一个对象，因此我们需要使用`_.bindAll()`它来纠正它。

例如，这里我不能使用`this.setLevelTimer(false)`，因为`this`是指向`setTimeout`，所以我把`_.bindAll()`.

如果有多个实例`this`未正确指向怎么办。我使用多个`_.bindAll()`s 吗？

```
var model = Backbone.Model.extend({
    initialize: function(){

    }
    ...
    setLevelTimer : function (){

        if (delta < 0){
             this.gameOver();
        } else {
            gameState.timer = setTimeout(function(){
                return this.setLevelTimer(false);  //"this" does not work
            }, 30);
        }
    }
    ...
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:58:21.507

_.bindAll 将 this 对象绑定为**函数范围**的初始化对象。

如果您在函数内有嵌套范围，则 this 对象可能不同。

例如

```
setLevelTimer: function(){
  // this should equal to the initialized model
  $("a").click(function(){
    // the this variable here is the clicked DOM object - not the initialized model
  });
} 
```

这个问题的一个常见解决方案是在函数的第一行设置一个变量，然后你也可以在嵌套范围内使用它（当然只要它没有被重新定义），例如：

```
setLevelTimer: function(){
  // this should equal to the initialized model
  var that = this;
  $("a").click(function(){
    // the that variable here is the initialized model
  });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:04:51.360

`_.bindAll`将给定对象的函数属性'绑定到给`this`定对象。[文档](http://underscorejs.org/#bindAll)，[来源](http://underscorejs.org/docs/underscore.html#section-53)

您正在做的是假设`this`在您提供给的匿名函数中正确设置`setTimeout`，但那怎么可能，因为该匿名函数不是您的模型的函数属性。

这就是为什么您必须为匿名函数提供正确`this`的 ，至少有以下两种方式：

```
var self = this; // store correct this into a variable
gameState.timer = setTimeout(function(){
     return self.setLevelTimer(false); 
}, 30); 
```

或者

```
// use bind to bind your anonymous functio to the right this
gameState.timer = setTimeout(_.bind(function(){ 
   return this.setLevelTimer(false); 
}, this), 30); 
```

希望这会有所帮助（并为您解决问题）！

附言

至于回答你原来的问题。这个问题不是 的错`_.bindAll`，你应该`_.bindAll(this)`在你的`initialize`-function 中使用来保持 Backbone 对象的函数绑定到正确的`this`，但是由于 bindAll 不会影响你动态创建的匿名函数，你需要使用其他措施（一些其中我在上面描述过）以使它们与`this`您想要的绑定。

# oracle - Oracle APEX - 如何创建包含多个显示值的弹出 LOV？

> ID：12280857
> 
> 赞同：2
> 
> 时间：2012-09-05T11:54:30.130
> 
> 标签：oracle, oracle-apex, lov

我正在尝试在 Oracle Apex 4.1 中创建 LOV，其中将包含员工的姓名和姓氏，并且只返回他/她的 id。不起作用的语法如下所示：

```
选择
     FIRST_NAME,LAST_NAME 作为 display_value,
     USER_ID 作为 return_value
 来自 ALL_USERS
 按 1 订购

```

这将返回错误：在 LOV SQL 查询中选择的列数错误。非常感谢任何帮助或指导如何解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T11:58:27.167

你可以使用：

```
select
     FIRST_NAME || ', ' || LAST_NAME as display_value, 
     USER_ID as return_value 
 from ALL_USERS
 order by 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:57:25.333

作为文森特解决方案的替代方案，您还可以查看这个插件：[SkillBuilders Super LOV](http://apex-plugin.com/oracle-apex-plugins/item-plugin/skillbuilders-super-lov_75.html)
它允许多列，多列返回，并且看起来不错。
唯一的缺点是没有表格选项。（然而。这是一个插件限制）

# android - 如何防止 ListItem 内的 Button 突出显示

> ID：12280863
> 
> 赞同：6
> 
> 时间：2012-09-05T11:54:56.873
> 
> 标签：android, listview, highlight, listitem

所以我有一个带有 ListView 按钮的自定义列表项。按下时，按钮显示备用可绘制对象以向用户显示反馈。但是，当我单击该行时，每个按钮都显示为按下状态，就好像我单击了它们一样。

如何保持按钮显示其原始状态而不是 state_pressed？

布局/列表项：

```
<LinearLayout
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:orientation="horizontal"
    android:paddingBottom="10dp"
    android:paddingTop="10dp"
    android:descendantFocusability="blocksDescendants" >

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:orientation="vertical"
        android:paddingLeft="10dp"
        android:paddingRight="10dp"
        android:gravity="center_vertical|left" >

        <TextView
            android:id="@+id/txtMain"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:singleLine="true"
            android:textAppearance="?android:attr/textAppearanceLarge"
            style="@style/PrimaryText" />

        <TextView
            android:id="@+id/txtSub"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:singleLine="true"
            android:textAppearance="?android:attr/textAppearanceLarge"
            style="@style/SecondaryText" />
    </LinearLayout>

    <ImageButton
        android:id="@+id/imbResponse"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@null"
        android:focusable="false"
        android:duplicateParentState="false"
        android:src="@drawable/response_btn" 
        android:contentDescription="@string/response"
        android:layout_marginLeft="10dp"
        android:layout_marginTop="5dp"
        android:layout_marginRight="10dp"
        android:layout_marginBottom="5dp" />
</LinearLayout> 
```

可绘制/response_btn.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:state_focused="true" android:drawable="@drawable/res_m" />
    <item android:state_pressed="true" android:drawable="@drawable/res_m" />
    <item android:state_focused="false" android:state_pressed="false" android:drawable="@drawable/res_alt_m" />
</selector> 
```

我试图删除 state_focused 和 state_pressed，state_focused。按钮似乎从其父级获取 state_pressed 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-15T11:37:49.367

我发现`android:clickable="true"`对父视图的设置将阻止子视图状态被更改。

看到[这个答案](https://stackoverflow.com/a/20000101/2996064)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T04:40:11.113

这使我的应用程序更努力地工作，但它解决了问题：

```
...
mImageIcon.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                v.setBackgroundResource(R.drawable.my-background);
                break;
            case MotionEvent.ACTION_UP:
            case MotionEvent.ACTION_CANCEL:
                /*
                 * You can use another background rather than 0.
                 */
                v.setBackgroundResource(0);
                break;
            }

            return false;
        }// onTouch()
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-22T20:00:52.830

我也有这个问题，我用谷歌搜索了大约 3 个小时！现在我找到了解决方案。只需将 OnClickListener 添加到子视图。甚至在 OnClick 方法中什么都不做。它适用于 2.3 模拟器和我的 nexus 5。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T11:59:55.107

我认为您需要禁用父级的状态 `android:duplicateParentState="false"`

将此添加到您的`Button`

# jquery - 带有jquery的动态切换功能？

> ID：12280871
> 
> 赞同：1
> 
> 时间：2012-09-05T11:55:21.870
> 
> 标签：jquery

我正在尝试使用 jQuery 创建一个灵活的切换功能，其中我将要切换的项目的 ID 作为参数。该函数由将正确 ID 传递给函数的链接触发。

这是目前的代码：

```
function boldToggler(itemid){
$(itemid).toggle(function(){
    $(itemid).css("font-weight","bold");},
function(){
    $(itemid).css("font-weight","normal");});
} 
```

这是由这样的链接触发的：

```
<a href="javascript: boldToggler('h1')">toggle style for this item</a>
<a href="javascript: boldToggler('h2')">toggle style for this item</a> 
```

有没有办法让它工作？它可以节省我编写数百个切换函数的时间！

任何帮助都会很棒，谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T11:58:45.123

你的意思是这样的吗？

```
function boldToggler(itemid) {
    $(itemid).css("font-weight", function(i, val) {
        return val == "bold" ? "normal" : "bold";
    });
} 
```

**演示：http:** [//jsfiddle.net/kbQXd/](http://jsfiddle.net/kbQXd/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T12:03:40.503

也许这个替代代码可能有用 - 小提琴：http: [//jsfiddle.net/9zxbT/](http://jsfiddle.net/9zxbT/)

HTML

```
<a href="#" data-toggle="h1">toggle style for H1</a>
<a href="#" data-toggle="h2">toggle style for H2</a>

<h1>this is H1</h1>
<h2>this is H2</h2> 
```

CSS

```
.bold { font-weight: bold; } 
```

jQuery

```
$('a[data-toggle]').on('click', function(evt) {
    evt.preventDefault();
    $($(this).data('toggle')).toggleClass('bold');
}); 
```

这完全删除了您的内联处理程序，更好地分离了 javascript 和 CSS，并利用`data-*`属性来设置所需的选择器

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T12:00:14.913

将您的功能更改为此

```
function boldToggler(itemid){
$('#' + itemid).toggle(function(){
    $('#' + itemid).css("font-weight","bold");},
function(){
    $('#' + itemid).css("font-weight","normal");});
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T12:05:32.127

我很想稍微改变你的标记，让它更像 jQuery 风格：

```
<a href="#" class="boldToggler" data-selector="h1">toggle style for h1</a>
<a href="#" class="boldToggler" data-selector="h2">toggle style for h2</a> 
```

然后使用如下方法：

```
$('.boldToggler').click(function(){
    var itemSelector = $(this).data('selector');
    $(itemSelector).toggleClass('bold');
}); 
```

将 css 类定义为：

```
.bold{
 font-weight:bold;  
} 
```

现场示例：http: [//jsfiddle.net/NTSzs/](http://jsfiddle.net/NTSzs/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T11:58:03.440

你错过了'#'：

```
$('#'+itemid).css.... 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-05T11:59:12.190

您可以在 jQuery 中使用 toggleClass 方法。

```
<a href="javascript: $('h2').toggleClass(bold);">toggle style for this item</a> 
```

您只需要定义类：

```
.bold { font-weight: bold; } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-05T11:59:54.763

```
function boldToggler(itemid){
    if($('#'+itemid).css("font-weight") == "normal"){
        $('#'+itemid).css("font-weight",'bold');
    }else{
        $('#'+itemid).css("font-weight",'normal');
    }
} 
```

# php - 在 RHEL6 (PHP 5.3.3) 上安装 php-devel

> ID：12280872
> 
> 赞同：3
> 
> 时间：2012-09-05T11:55:26.440
> 
> 标签：php, redhat, pecl, oracle-call-interface

我试图在我们的服务器上安装 php oci_* 扩展是徒劳的，但我遇到了障碍。

到目前为止，我已经这样做了：

*   已安装 oracle 基础和开发库 (v10.2)
*   安装 php-pear 包

现在我正在尝试使用“pecl install oci8”安装 oci8，但我收到一条关于“phpize”命令未找到的错误消息。

我的谷歌搜索告诉我这是由于没有安装“php-devel”引起的，所以我尝试了各种不同的 yum 搜索，例如“yum search php-devel”、“yum search php5-devel”、“yum search php-dev”等......其中没有一个可以找到任何东西。

我最终找到了一个由具有 php-devel 的“utterramblings”托管的存储库。因此，现在当我使用该存储库进行 yum 搜索时，它可以找到“php-devel”：

> php-devel.i386 : 构建 PHP 扩展所需的文件

但是当我尝试安装它时，我得到了这个：

> 错误：包：php-devel-5.2.17-jason.2.i386 (utterramblings)

```
 Requires: php = 5.2.17-jason.2
       Installed: php-5.3.3-14.el6_3.i686 (@rhel-i386-server-6)
           php = 5.3.3-14.el6_3
       Available: php-5.2.13-jason.1.i386 (utterramblings)
           php = 5.2.13-jason.1
       Available: php-5.2.14-jason.1.i386 (utterramblings)
           php = 5.2.14-jason.1
       Available: php-5.2.16-jason.1.i386 (utterramblings)
           php = 5.2.16-jason.1
       Available: php-5.2.17-jason.2.i386 (utterramblings)
           php = 5.2.17-jason.2
       Available: php-5.3.2-6.el6.i686 (rhel-i386-server-6)
           php = 5.3.2-6.el6
       Available: php-5.3.2-6.el6_0.1.i686 (rhel-i386-server-6)
           php = 5.3.2-6.el6_0.1
       Available: php-5.3.3-3.el6.i686 (rhel-i386-server-6)
           php = 5.3.3-3.el6
       Available: php-5.3.3-3.el6_1.3.i686 (rhel-i386-server-6)
           php = 5.3.3-3.el6_1.3
       Available: php-5.3.3-3.el6_2.5.i686 (rhel-i386-server-6)
           php = 5.3.3-3.el6_2.5
       Available: php-5.3.3-3.el6_2.6.i686 (rhel-i386-server-6)
           php = 5.3.3-3.el6_2.6
       Available: php-5.3.3-3.el6_2.8.i686 (rhel-i386-server-6)
           php = 5.3.3-3.el6_2.8 
```

老实说，我不确定如何解决这个问题，大概它与我们安装的 php 版本有关，但我不确定我需要做什么来修复它。

这些是我们的详细信息：

红帽企业 Linux 服务器 6.1 版（圣地亚哥）[32 位]

PHP 5.3.3

谁能给我建议：

a）我需要做些什么来解决该问题并从该 repo 安装 php-devel

或者

b) 将我指向另一个 repo 的方向，这将使我能够轻松地为我们的服务器安装 php-devel

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T13:32:09.970

最终设法将其安装。

为了快速详细说明我为任何未来的观众做了什么，我跑了：

```
yum list installed 
```

找出我们安装的确切的 php 包（我认为是 5.5.3-14.el6_3 或类似的东西）。

然后在 rpm.pbone.net 上搜索相关的 php-devel 包以匹配该 php 包版本。

尝试安装它并失败，出现“失败的依赖”错误“需要安装 php-devel 的 automake”。

冉：

```
yum install automake 
```

然后尝试再次安装该软件包：

```
rpm -Uvh URLOFPACKAGE 
```

它安装正确，然后运行：

```
pecl install oci8 
```

并按照指示进行。

重新启动httpd服务并完成。

# java - 在 SalesForce 上具有有效 SAML2.0 断言的 invalid_grant 错误

> ID：12280876
> 
> 赞同：3
> 
> 时间：2012-09-05T11:55:33.257
> 
> 标签：java, salesforce, single-sign-on, saml-2.0, opensaml

我尝试使用 OpenSAML 为 SalesForce 实施 SSO。我的代码生成有效的 SAML 断言，由 salesforce SAML 验证器验证。但是当我尝试向 salesforce 发送断言时，我总是遇到这个错误：

```
{"error_uri":"https://na4.salesforce.comnull/setup/secur/SAMLValidationPage.apexp","error":"invalid_grant","error_description":"invalid assertion"} 
```

我使用以下代码向销售人员发送请求：

```
 SAMLResponseGenerator responseGenerator = new SalesforceSAMLResponseGenerator(container, strIssuer, strNameID, strNameQualifier, sessionId);

    String samlAssertion = Base64.encodeBase64String(responseGenerator.generateSAMLAssertionString());
    try {
        HttpClient httpClient = createHttpClient();
        HttpPost httpPost = new HttpPost("https://login.salesforce.com/services/oauth2/token");
        MultipartEntity entity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
        entity.addPart("grant_type", new StringBody("assertion"));
        entity.addPart("assertion_type", new StringBody("urn:oasis:names:tc:SAML:2.0:profiles:SSO:browser"));
        entity.addPart("assertion", new StringBody(samlAssertion));
        httpPost.setEntity(entity);
        HttpResponse httpResponse = httpClient.execute(httpPost);

        // Get the response
        BufferedReader rd = new BufferedReader(new InputStreamReader(httpResponse.getEntity().getContent()));
        StringBuffer buffer = new StringBuffer();
        String line = null;
        while ((line = rd.readLine()) != null) {
            buffer.append(line);
            buffer.append("\n");
        }
        rd.close();
        httpClient.getConnectionManager().shutdown();
        System.out.println(buffer.toString());
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

我的生成器生成了有效的 SAML（如果我可以信任 salesforce SAML 验证器的结果）。似乎 salesforce 无法解码断言，因为当我发送随机数据而不是 samlAssertion 时，我收到了相同的错误消息。

我还尝试使用 Base64.encodeBase64URLSafeString() 进行编码，但没有积极的结果。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T10:50:15.017

我的问题的解决方案非常简单。不要信任 SalesForce 的文档，只信任[协议规范](http://docs.oasis-open.org/security/saml/v2.0/saml-bindings-2.0-os.pdf):) 根据规范，我需要在 SAMLResponse 参数中发送 Base64 编码的 SAML。就这些。

我使用以下代码说明了解决方案：

```
 HttpClient httpClient = initHttpClient();
    HttpPost httpPost = new HttpPost("https://login.salesforce.com/");
    MultipartEntity entity = new MultipartEntity(HttpMultipartMode.STRICT);
    entity.addPart("SAMLResponse", new StringBody(Base64.encodeBase64String(samlAssertion)));
    httpPost.setEntity(entity);
    HttpResponse httpResponse = httpClient.execute(httpPost);

    Header location = httpResponse.getFirstHeader("Location");
    if (null != location) {
        System.out.println(location.getValue());
    } 
```

# html - 和 grails中的误解

> ID：12280890
> 
> 赞同：0
> 
> 时间：2012-09-05T11:56:30.287
> 
> 标签：html, grails, button, if-statement

我有一个 gsp 模板。我有变量。如果这个变量是`true`，那么创建一个额外的按钮，如果`false`- 什么也不做。

我的代码有什么问题？

```
<g:set var="removeButton">{{ removeButtonPossibility }}</g:set> // variable from model, is true or false
<g:if test="${removeButton == true}">
   <button id="removeDocument">Delete</button>
</g:if> 
```

它不起作用。但只是使用：`${removeButton}`通常打印`true`或`false`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:53:50.767

做简单的事怎么办？:)

```
<g:set var="removeButton" value="${removeButtonPossibility}" />
<g:if test="${removeButton}">
    <button id="removeDocument">Delete</button>
</g:if> 
```

或者，甚至更好：

```
<g:if test="${removeButtonPossibility}">
    <button id="removeDocument">Delete</button>
</g:if> 
```

# android - Android - 画布上的发光效果

> ID：12280893
> 
> 赞同：0
> 
> 时间：2012-09-05T11:56:35.907
> 
> 标签：android, canvas, paint, glow

我想制作一个 Android 应用程序并在画布上绘制我在其上绘制的圆圈、正方形等的发光效果。很像[Glow 的应用程序艺术](https://play.google.com/store/apps/details?id=com.natenai.artofglow)。

[发光的艺术 http://iphonecake.com/appcake/appimg/380120815-0.jpg](http://iphonecake.com/appcake/appimg/380120815-0.jpg)

这就是我现在所取得的成就，它似乎没有我为此使用 BlurMaskFilter() 的目标发光量。

[![矿](../Images/09e2bfa27cb2404429f1c1c0771cdbbb.png)](https://i.stack.imgur.com/iw4hF.png)

我尝试使用 setShadow() 和 setShader() 但辉光效果不够强。如果你能帮我解决这个问题，那将是一个很大的帮助，也可能会帮助其他用户......

问候萨阿德。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-05T12:04:00.093

[您可以考虑在PhotoShop](http://www.photoshop.com/)或[GIMP](http://www.gimp.org/)中创建您希望在应用程序中使用的具有发光效果的图像对象，并将它们导出为便携式网络图形。

我希望这有帮助。

# php - 用 PHP 计算上周结束的时间

> ID：12280895
> 
> 赞同：0
> 
> 时间：2012-09-05T11:56:40.510
> 
> 标签：php, mysql

我正在使用时间戳对数据库进行查询。现在我正在使用硬编码日期进行查询，

```
$dd1 = 20;//date("d",$ddb1);
    $mm1 = date("m");
    $yyyy1 = date("Y");
    $dd2 = 26;//date("d",$ddb2);
    $mm2 = date("m");
    $yyyy2 = date("Y"); 
```

但是每当我运行脚本时，我都需要代码来计算上周的数据（周一到周日）。例如，我今天（Wensday）运行脚本，所以计算的时间应该是上周从（周一到周日）。在本周的任何其他日子里，直到周日晚上 12:00:01 之前，都应该有相同的结果。

试图做类似的事情：

```
 //$ddb1 = time() - ($argv[1] * 24 * 60 * 60);
    //$ddb2 = time() - ($argv[2] * 24 * 60 * 60); 
```

从当前日期减去天数，但必须有一种自动方法来执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T11:58:52.910

```
$first_day = strtotime('Last Week');
$last_day = strtotime('Last Sunday');

echo "Last Monday was ".date('m-d-Y', $first_day);
echo "Last Sunday was ".date('m-d-Y', $last_day);

#Last Monday was 08-27-2012
#Last Sunday was 09-02-2012 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T11:59:17.727

为什么不直接使用[strtotime](http://au2.php.net/manual/en/function.strtotime.php)？

```
$lastsunday=strtotime("last Sunday");
$lastmonday=strtotime("last Sunday")-(7*86400); 
```

编辑：

```
<?php
    date_default_timezone_set('Australia/NSW');
    $lastSunday=strtotime("last Sunday");
    $lastMonday=strtotime("last Sunday")-(6*86400);

    echo "Last Sunday was ".date('d-m-Y', $lastSunday)."<br>";
    echo "Last Monday was ".date('d-m-Y', $lastMonday);

?> 
```

输出：

```
Last Sunday was 02-09-2012
Last Monday was 27-08-2012 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T12:02:34.480

获取最后一个星期日：

```
$last_sunday = strtotime('Last Sunday'); 
```

然后减去 6 天得到最后一个星期一：

```
$last_monday = date($last_sunday-86400*6) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T12:15:58.867

**试试这个：-**

```
/**
* int nth_day_of_month(int $nbr, str $day, int $mon, int $year)
*   $nbr = nth weekday to find
*   $day = full name of weekday, e.g. "Saturday"
*   $mon = month 1 - 12
*   $year = year 1970, 2007, etc.
* returns UNIX time
*/

function nth_day_of_month($nbr, $day, $mon, $year)
{
   $date = mktime(0, 0, 0, $mon, 0, $year);
   if($date == 0)
   {
      user_error(__FUNCTION__."(): Invalid month or year", E_USER_WARNING);
      return(FALSE);
   }
   $day = ucfirst(strtolower($day));
   if(!in_array($day, array('Sunday', 'Monday', 'Tuesday', 'Wednesday',
         'Thursday', 'Friday', 'Saturday')))
   {
      user_error(__FUNCTION__."(): Invalid day", E_USER_WARNING);
      return(FALSE);
   }
   for($week = 1; $week <= $nbr; $week++)
   {
      $date = strtotime("next $day", $date);
   }
   return($date);
} 

function getWeekNoByDay($year = 2007,$month = 5,$day = 1) {
    return ceil(($day + date("w",mktime(0,0,0,$month,1,$year)))/7);
} 
```

# php - TypeError：使用 jQuery 数据表库时未定义 oColumn

> ID：12280900
> 
> 赞同：18
> 
> 时间：2012-09-05T11:56:50.587
> 
> 标签：php, jquery, html, datatables, html-table

我在让 jQuery Datatables 库正确显示在我的 Joomla 网站表上时遇到问题。 [http://datatables.net](http://datatables.net)

该脚本对我的表格进行了一半的样式设置，然后放弃（我正在更改表格标题颜色和文本颜色，但没有数据表控件等）。

Firebug 也抛出以下错误：

```
 TypeError: oColumn is undefined 
```

在我的 Joomla 模板 index.php 中，我有以下内容`<head>`：

```
<script src="./datatables/js/jquery.js" type="text/javascript"></script>
<script src="./datatables/js/jquery.dataTables.js" type="text/javascript"></script>
<script type="text/javascript"> 
    jQuery.noConflict();                
    jQuery(document).ready(function() {
    jQuery('#staff_table').dataTable({
        "bLengthChange": true,
        "bFilter": true,
        "bSort": true,
        "bInfo": true,
        "bAutoWidth": true
        } );
    } );
</script> 
```

HTML / PHP 看起来像这样：

```
<h3>Members of Staff</h3>
<p>If you're looking for a member of staff at Tower Road Academy, you'll find their details here.</p>
<table class="staff_table" id="staff_table">
    <tr class="staff_table_head">
        <th>Name</th>
        <th>Job Title</th>
        <th>Email Address</th>
    </tr>

    <?php
        $result = mysql_query("SELECT * FROM itsnb_chronoforms_data_addstaffmember");

        while($row = mysql_fetch_array($result))
        { 
        echo '<tr>';  
        echo '<td>' . $row['staff_name'] . '</td><td>' . $row['staff_job'] . '</td><td><a     href=mailto:"' . $row['staff_email'] . '">' . $row['staff_email'] . '</a>' . '</td>';
        echo '</tr>';
        }
    ?>
</table> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-05T12:04:46.837

为了使数据表正常工作，您的表必须使用适当的`<thead>`和`<tbody>`标签构建。

> HTML 中所有需要的 DataTables 都是格式`<TABLE>`良好的（即有效的 HTML），带有标题（由`<THEAD>`HTML 标签定义）和正文（`<TBODY>`标签）

[数据表文档](http://datatables.net/blog/Getting_started_with_DataTables:_First_steps)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T12:09:04.993

排序它！，事实证明数据表在抛出错误之前对它接受的 html 非常严格。我在我的 html 中添加了标签，现在它正在工作，还请注意，您必须为标题列添加标签，而不是标签，因为这也会引发错误。

html 代码现在看起来像这样：

```
<h3>Members of Staff</h3>
 <p>If you're looking for a member of staff at Tower Road Academy, you'll find their      details here.</p>
 <table class="staff_table" id="staff_table">
 <thead>
 <tr class="staff_table_head">
 <th>Name</th>
<th>Job Title</th>
<th>Email Address</th>
 </tr>
</thead>

 <?php
$result = mysql_query("SELECT * FROM itsnb_chronoforms_data_addstaffmember");

while($row = mysql_fetch_array($result))
   {
echo '<tr>';  
echo '<td>' . $row['staff_name'] . '</td><td>' . $row['staff_job'] . '</td><td><a         href=mailto:"' . $row['staff_email'] . '">' . $row['staff_email'] . '</a>' . '</td>';
    echo '</tr>';
  }
 ?>
</table> 
```

并调用 jquery 等看起来像这样：

```
<script src="./datatables/js/jquery.js" type="text/javascript"></script>
    <script src="./datatables/js/jquery.dataTables.js" type="text/javascript"></script>

            <script type="text/javascript"> 

 jQuery(document).ready(function() {
jQuery('#staff_table').dataTable({
    "bLengthChange": true,
    "bFilter": true,
    "bSort": true,
    "bInfo": true,
    "bAutoWidth": true
} );
} );

  </script> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-19T06:29:55.007

希望这会对大家有所帮助，至少可以从中得到一些提示。

[http://datatables.net/forums/discussion/comment/42607](http://datatables.net/forums/discussion/comment/42607)

我的问题是，TypeError: col 未定义。

**总结答案：**

> 表的 THead 元素内的 TR 元素内的 TH 元素数必须等于表中 TBody 的 TR 元素内的 TD 元素数（或表行内的列数）。

**你可以阅读下面的解释：**

问题是，我没有在 thead 部分中放置足够的 Th 或 Td 元素，以等于我在 TBody 部分的 Tr 元素中打印为 Td 元素的列数。

以下代码确实给了我错误。

```
<thead>
 <tr>
    <th> Heading 1</th>
    <th> Heading 2</th>
 </tr>
</thead>
<tbody>
 <tr>
    <td> Column 1 </td>
    <td> Column 2</td>
    <td> Column 3</td>
 </tr>
</tbody>" 
```

但是，只需在 THead 元素中的 Tr 元素中再添加一个 Th 元素，它就可以像魅力一样发挥作用！:) 我从上面的链接中得到了提示。

而且，我发现 THead 的 Tr 元素中的所有 TH 元素也可以是 TD 元素，因为它也是 jQuery DataTables 所需级别的有效 HTML！

希望我能帮助你们中的一些人节省您的时间！:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T12:01:24.703

试试这个：

```
jQuery('#staff_table').dataTable({
                        "bPaginate": true,
                        "bLengthChange": true,
                        "bFilter": true,
                        "bSort": true,
                        "bInfo": true,
                        "bAutoWidth": true,
                     "aoColumns": [
                                        null,
                                        null //put as many null values as your columns

                    ]
                    }); 
```

# java - rsync 以有限的深度递归

> ID：12280908
> 
> 赞同：3
> 
> 时间：2012-09-05T11:57:20.567
> 
> 标签：java, linux, rsync

我有一个小型 Java 应用程序/服务，它使用 Java 7 的新`java.nio.file.WatchService`. 当发生新事件（新文件、修改、删除等）时，我会启动 rsync 执行以将文件从服务器 A 复制到服务器 B（反之亦然）。该命令使用 --delete 选项来确保从 A 中删除的文件也从 B 中删除。但是，要使用此功能，您必须启用`-r`（递归子目录）。通常这没什么大不了的，但根文件夹是 5GB 的数据（19000 个文件，1500 个文件夹）。Rsync 非常擅长它的功能，但仍然需要几分钟才能运行。

我遇到的问题是，如果两台服务器上的文件几乎同时更改，则在服务器 A 上创建的新文件可能会被同步 B-> A 的进程删除，因为`--delete`仅将源与目标进行比较并看到目标文件比源文件多。

由于我已经在使用 Java 应用程序反复查看每个目录，因此我不必将`-r`（递归）与 rsync 一起使用。我的第一个想法是用 rsync 限制递归的深度，但我不认为这是 rsync 的一个特性。我也考虑过使用`--exclude`，但不确定该模式可能是什么样子。有人有想法么？

作为参考，这里是生成的 rsync 命令的示例：

`rsync -r --no-group --no-owner --no-perms --update --checksum --verbose --progress --stats --delete --ignore-errors "/media/server1files/" "/server2::server2"`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T13:23:38.017

即使使用`-r`适当的模式来排除子文件夹，也要使用 is `--exclude "/**/*"`。

# c# - C# MVC4 启动慢的解决方案

> ID：12280910
> 
> 赞同：1
> 
> 时间：2012-09-05T11:57:20.910
> 
> 标签：c#, debugging, asp.net-mvc-4

我刚刚创建了一个新的 C# ASP MVC4 解决方案。和我以前的没什么不同。在解决方案中，我有五个项目，其中四个的代码与以前相同。

过去，当我选择调试时，应用程序需要几分钟才能启动。然而，现在它需要 4-5 倍的时间，而且似乎每个项目都在构建，即使我没有对项目进行任何更改。

这是正常行为吗？即使没有进行任何更改，项目是否通常每次都构建？

# sql - 分配值 SQL

> ID：12280921
> 
> 赞同：0
> 
> 时间：2012-09-05T11:58:06.910
> 
> 标签：sql, sql-server, tsql

我正在尝试找到一种更有效的方法来执行此操作，因为我已经走了游标路线，并且讨厌在 SQL 中使用游标所带来的性能损失。我正在尝试在有价值的项目之间分配付款并跟踪任何剩余金额。例如...

```
Payments             
--------
10,
20

Items
------
5,
5,
10 
```

实质上将返回第一笔付款 (10) 应用于前两项并已用尽。第二笔付款（20）适用于第三项，还剩 10 笔。我可以使用游标完成这项工作。只是好奇是否有人对如何更有效地做到这一点有一些想法。

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:53:38.190

假设您有一组有序的付款和项目 ID，您可以创建一个项目到付款的映射表，然后执行以下操作（请参阅[http://sqlfiddle.com/#!3/4b6f8/4](http://sqlfiddle.com/#!3/4b6f8/4)）：

```
-- Populate mapping table
INSERT INTO PaymentsForItems (ItemID, PaymentID)
SELECT ItemID,
       (SELECT MIN(PaymentID)
        FROM Payments p1
        WHERE (SELECT SUM(ItemValue)
               FROM Items i2
               WHERE i2.ItemID <= i1.ItemID) <=
              (SELECT SUM(PaymentValue)
               FROM Payments p2
               WHERE p2.PaymentID <= p1.PaymentID))
FROM Items i1; 
```

这不会显示剩余部分 - 不确定您希望如何表示它，但可以轻松地单独插入一行（例如，使用 NULL 作为 ID）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:25:44.557

您为什么不获取所有项目和付款，而不是光标，并在您的代码中处理它们？

它可能会更快，您必须采用两种方法来做到这一点。

在 Java 中：

```
PreparedStatement psItems = con.prepareStatement("SELECT itemId,item FROM items");
PreparedStatement psPayments = con.prepareStatement("SELECT payId,payment FROM payments");
ResultSet rsItems = psItems.executeQuery();
ResultSet rsPayments = psPayments.executeQuery();

int currPaymentLeft = 0;
int currentPayId = 0;
int currentItemId = 0;

while(rsItems.next()) {
    int priceItem = rsItems.getInt("item");
    currentItemId = rsItems.getInt("itemId");
    if (currPayment < priceItem) {
        // Here we are in the case where the last payment was over the items it bought.
        // Except if currPayment is 0\. In this case, there is no rest.
        if (currPayment > 0) {
            // This is the rest case
            // In currentPayId, we have the Id of a Payment 
            // where there is currPayment left which will be unused.
            // Do whatever you want with this Id and amount.
        }

        currPayment = 0;
        while(rsPayments.next()) {
            currPaymentLeft = rsItems.getInt("payment");
            int payId = rsItems.getInt("payId");
            if(payment >= priceItem) {
                currPaymentLeft -= priceItem;
                // Link currentPayId with currentItemId
                // Create a query, store it in a collection, wo what you want.

                // Get out of this while loop
                break;
            }
            // else, the payment is less than the priceItem
            // so this payment won't be of any use.
            // This is a total rest case
            // In currentPayId, we have the Id of a Payment 
            // where there is currPayment left which will be unused.
            // Do whatever you want with this Id and amount.
        }
    }
    else {
        currPaymentLeft -= priceItem;
        // Link currentPayId with currentItemId because itemId was paid with currentPayId
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T13:22:53.660

据我了解，您有两个不同但相似的事件-收到新的付款，并创建了新的成本项目。在每个关键时刻，您都需要更新另一个表，因此似乎需要存储过程或触发器，具体取决于您的插入机制。

创建新项目时，您会找到最早的未付款项付款，并减去该项目的成本。

同样，当创建新付款时，您`@amount`按顺序分配金额 ( )。

```
update items
set 
    paid = 
         case when @amount>=runningTotal then items.amount 
         else 
            case when @amount - (runningTotal - (amount-paid))>0 
                then @amount - (runningTotal - (amount-paid)) 
                else 0 
            end
         end        
from 
    items 
cross apply 
    (
        select sum(amount-paid) as runningTotal 
        from items
        where id <= items.id
    ) as rt 
```

（当然使用原子事务）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-06T10:04:35.207

我用 SQL server 2005 测试了这段代码，感觉还可以。希望它可以帮助一些人。

```
WITH tItems
AS
(
SELECT A.ItemId, A.ItemValue, (SELECT COALESCE(SUM(B.ItemValue), 0)
                               FROM Items B
                               WHERE B.ItemId < A.ItemId) AS PrevItemTotal,

                               (SELECT COALESCE(SUM(C.ItemValue), 0)
                                FROM Items C
                                WHERE C.ItemId <= A.ItemId) AS CurrItemTotal
FROM Items A
),
tPayments
AS
(
SELECT A.PaymentId, A.PaymentValue, (SELECT COALESCE(SUM(B.PaymentValue), 0)
                                     FROM Payments B
                                     WHERE B.PaymentId < A.PaymentId) AS PrevPaymentTotal,

                                    (SELECT COALESCE(SUM(C.PaymentValue), 0)
                                     FROM Payments C
                                     WHERE C.PaymentId <= A.PaymentId) AS CurrPaymentTotal
FROM Payments A
),
tDistribution
AS
(
SELECT *,
CASE
    WHEN PrevPaymentTotal - PrevItemTotal <= 0 THEN
        CASE
            WHEN PaymentValue - (PrevItemTotal-PrevPaymentTotal) <= ItemValue THEN PaymentValue - (PrevItemTotal-PrevPaymentTotal)
            ELSE ItemValue
        END
    ELSE -- PrevPaymentTotal - PrevItemTotal > 0
        CASE
            WHEN ItemValue - (PrevPaymentTotal - PrevItemTotal) < PaymentValue THEN ItemValue - (PrevPaymentTotal - PrevItemTotal)
            ELSE PaymentValue
        END
END AS Distribution
FROM tItems X, tPayments Y
WHERE Y.CurrPaymentTotal > X.PrevItemTotal AND Y.PrevPaymentTotal < X.CurrItemTotal
)

SELECT ItemId, ItemValue, PaymentId, PaymentValue, Distribution,
ItemValue - SUM (Distribution) OVER (PARTITION BY ItemId) AS Remaining
FROM tDistribution 
```

# opencv - 查找仿射变换图像中像素块相对于原始参考的方向

> ID：12280926
> 
> 赞同：0
> 
> 时间：2012-09-05T11:58:21.850
> 
> 标签：opencv, orientation, transform, patch, warp

在我的项目的一部分中，我需要计算仿射变换图像中补丁的方向。现在我的问题是我不知道如何找到相对于原始未变形图像的计算方向。

例如，在扭曲的图像中找到一个点（100,200）。我可以使用 8x8 相邻像素提取该点的方向。假设它是30度。找到该点的扭曲图像是对原始图像在每个轴上进行 60 度变换的结果。（俯仰、偏航和滚动）。（这种方向提取通常称为计算机视觉中的描述符提取）

现在变换矩阵是已知的。变换图像中点的方向也是已知的。参考点的位置是已知的（使用逆变换）。现在我想知道如果这个点（100,200）进入参考系（例如150,250），新的方向是什么。换句话说，关于参考图像的新方向是什么。

我知道如果我们只有滚动角旋转（60 度），这很容易解决。在这种情况下，参考系的方向将是 30+60 = 90 。

我尝试使用 OpenCV 实现它：

```
 cv::Mat rvec1(3,1,CV_32F); // rot vector related to B
        rvec1.at<float>(0,0)=0;
        rvec1.at<float>(1,0)=30*to_RAD;
        rvec1.at<float>(2,0)=0;

        cv::Mat rvec2(3,1,CV_32F); // rot vector related to A
        rvec2.at<float>(0,0)=0;
        rvec2.at<float>(1,0)=60*to_RAD;
        rvec2.at<float>(2,0)=0;

        cv::Mat R_A;
        cv::Mat R_B;

        cv::Rodrigues(rvec1, R_B);
        cv::Rodrigues(rvec2, R_A);

        cv::Mat R_combined= R_B*R_A;

        cv::Mat rvec_result;
        cv::Rodrigues(R_combined,rvec_result); 
```

我想使用 2 个旋转矢量创建旋转垫 A 和 B。在将这两个相乘后，我想将其转换为旋转向量。但我得到的唯一结果是**最后一行**出现运行时错误（cv::Rodrigues(R_combined,rvec_result);）

提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:27:19.107

好的，听起来您有两个旋转矩阵（您可以使用[罗德里格斯](http://opencv.willowgarage.com/documentation/cpp/calib3d_camera_calibration_and_3d_reconstruction.html#Rodrigues)来获取它们），将它们称为 A 和 B。您想知道如何组合它们。假设 A 代表箭头相对于补丁的方向，B 是补丁相对于原点的方向。让我们从补丁中心的原点开始。A 描述了箭头的方向。现在我们想将原点旋转 B，以便我们的原始参考轴现在位于 B 处，相对于新原点。要做到这一点

```
Combined = [B]*[A]; 
```

**更新**

我不知道为什么你的代码会给你一个错误，它对我来说非常有效。这是我运行的代码。

```
cv::Mat rvec1(3,1,CV_32F); // rot vector related to B
rvec1.at<float>(0,0)=0;
rvec1.at<float>(1,0)=30*M_PI/180;;
rvec1.at<float>(2,0)=0;

cv::Mat rvec2(3,1,CV_32F); // rot vector related to A
rvec2.at<float>(0,0)=0;
rvec2.at<float>(1,0)=60*M_PI/180;;
rvec2.at<float>(2,0)=0;

cv::Mat R_A;
cv::Mat R_B;

cv::Rodrigues(rvec1, R_B);
cv::Rodrigues(rvec2, R_A);

cv::Mat R_combined= R_B*R_A;

cv::Mat rvec_result;
cv::Rodrigues(R_combined,rvec_result);

std::cout << rvec1 << std::endl<<std::endl;
std::cout << rvec2 << std::endl<<std::endl;
std::cout << R_A << std::endl<<std::endl;
std::cout << R_B << std::endl<<std::endl;
std::cout << R_combined << std::endl<<std::endl;
std::cout << rvec_result << std::endl<<std::endl; 
```

这是我的输出

```
[0; 0.52359879; 0]

[0; 1.0471976; 0]

[0.49999997, 0, 0.86602545;
0, 1, 0;
-0.86602545, 0, 0.49999997]

[0.86602539, 0, 0.5;
0, 1, 0;
-0.5, 0, 0.86602539]

[-5.9604645e-08, 0, 1;
0, 1, 0;
-1, 0, -5.9604645e-08]

[0; 1.5707964; 0] 
```

# c# - 如何更改 TextBox.Text 而不会丢失 WPF 中的绑定？

> ID：12280927
> 
> 赞同：9
> 
> 时间：2012-09-05T11:58:23.443
> 
> 标签：c#, wpf, mvvm

在 WPF 应用程序中，我正在创建一个设置窗口来自定义键盘快捷键。

在文本框中，我处理 KeyDown 事件并将 Key 事件转换为人类可读的形式（以及我想要的数据形式）。

文本框是这样声明的

```
<TextBox Text="{Binding ShortCutText, Mode=TwoWay}"/> 
```

在事件处理程序中，我尝试同时使用

```
(sender as TextBox).Text = "..."; 
```

和

```
(sender as TextBox).Clear();
(sender as TextBox).AppendText("..."); 
```

在这两种情况下，绑定回视图模型都不起作用，视图模型仍然包含旧数据并且没有得到更新。在另一个方向（从视图模型到文本框）绑定工作正常。

有没有一种方法可以在不使用绑定的情况下从代码中编辑 TextBox.Text？或者我的流程中的其他地方是否有错误？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-05T12:01:57.853

```
var box = sender as TextBox;
// Change your box text..

box.GetBindingExpression(TextBox.TextProperty).UpdateSource(); 
```

这应该会强制您的绑定更新。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T12:05:06.010

不要更改 Text 属性 - 更改您要绑定的内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-02-27T13:39:08.880

如果您的绑定因设置新值而被破坏（这很奇怪，对于双向绑定，绑定应该保持不变），然后使用 ((TextBox)sender).SetCurrentValue(TextBox.TextProperty, newValue) 保持绑定不变。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T12:06:38.360

这成功了：

```
private static void SetText(TextBox textBox, string text)
    {
        textBox.Clear();
        textBox.AppendText(text);
        textBox.GetBindingExpression(TextBox.TextProperty).UpdateSource();
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-05T18:50:23.220

您根本不需要修改 TextBox 的值！在代码中你只需要修改你的相关值（*ShortCutText*）你也可以设置你的 TextBox 的**IsReadOnly** =" **True** " 属性。

```
<TextBox Text="{Binding Path=ShortCutText,Mode=OneWay}" 
         KeyDown="TextBox_KeyDown" IsReadOnly="True"/> 
```

您应该在您的类中实现*INotifyPropertyChanged*接口，如 MSDN 中所述：

[http://msdn.microsoft.com/library/system.componentmodel.inotifypropertychanged.aspx](http://msdn.microsoft.com/library/system.componentmodel.inotifypropertychanged.aspx)

修改*ShortCutText*属性的设置器（您的*TextBox*绑定到的）：

```
class MyClass:INotifyPropertyChanged
{
    string shortCutText="Alt+A";
    public string ShortCutText
    {
         get { return shortCutText; } 
         set 
             { 
                  shortCutText=value; 
                  NotifyPropertyChanged("ShortCutText");
             }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    void NotifyPropertyChanged( string props )
    {
        if( PropertyChanged != null ) 
            PropertyChanged( this , new PropertyChangedEventArgs( prop ) );
    }

} 
```

WPF 将自动订阅 PropertyChanged 事件。现在使用TextBox 的**KeyDown**事件，例如，像这样：

```
private void TextBox_KeyDown( object sender , KeyEventArgs e )
{
    ShortCutText = 
        ( e.KeyboardDevice.IsKeyDown( Key.LeftCtrl )? "Ctrl+ " : "" )
        + e.Key.ToString( );
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-24T23:02:25.490

我有类似的情况。

当我清除文本框时，这会丢失绑定。

我穿：`textbox1.Text = String.empty`

我为此改变：`textbox1.Clear()`

这是我的解决方案的重点

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-25T10:06:07.540

如果您使用 MVVM，则不应从 code 更改 TextBox 的 Text 属性，更改视图模型中的值，模式将完成同步视图的工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-15T14:23:55.967

您可以在 xaml 本身中配置它：

```
<TextBox Text="{Binding ShortCutText, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/> 
```

> UpdateSourceTrigger=PropertyChanged

# python - Django Haystack - 面数限制为 10 个吗？

> ID：12280932
> 
> 赞同：2
> 
> 时间：2012-09-05T11:58:42.397
> 
> 标签：python, django, elasticsearch, django-haystack

我正在索引产品列表，每个产品都有一个类别列表。类别大约1000个。

在搜索页面中，我想列出**所有**超过 1 个结果的类别。

* * *

我正在收集方面：

```
results.facet_counts() 
```

**不幸的是，这只是返回前 10 个类别！**

我似乎找不到让它返回更多的方法。

* * *

我正在使用最新版本的**Haystack**和**ElasticSearch**。

* * *

希望有人能帮忙！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:17:51.693

您可以在 json 查询中指定 facet 的大小，即您将返回的条目数：

```
{
    "query" : {
        "match_all" : {  }
    },
    "facets" : {
        "tag" : {
            "terms" : {
                "field" : "tag",
                "size" : 10
            }
        }
    }
} 
```

如果要取回所有条目，则需要配置一个较高的值。不确定如何将此参数添加到您正在使用的库中。希望答案无论如何都会有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-17T09:50:52.507

`get_queryset()`您可以将自定义方法覆盖`FacetedSearchView`为：

```
def get_queryset(self):
    options = {"size": 0} #unlimited results, use with caution
    qs = super().get_queryset()
    for field in self.facet_fields:
        qs = qs.facet(field, **options)
    return qs 
```

您还可以定义一个全局设置`ELASTIC_FACET_SIZE`并使用它。

```
from settings import ELASTIC_FACET_SIZE 

def get_queryset(self):
    options = {"size": ELASTIC_FACET_SIZE} #unlimited results, use with caution
    qs = super().get_queryset()
    for field in self.facet_fields:
        qs = qs.facet(field, **options)
    return qs 
```

这样你就不必弄乱 haystack 包源代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T15:49:41.200

现在它们限制为 100 个，请参阅[https://github.com/toastdriven/django-haystack/issues/658](https://github.com/toastdriven/django-haystack/issues/658)

# iphone - iPhone 应用程序因 exc_bad_access 随机崩溃

> ID：12280939
> 
> 赞同：1
> 
> 时间：2012-09-05T11:59:01.893
> 
> 标签：iphone, ios, exc-bad-access

我有一个有四个标签的应用程序。在每个选项卡中，我使用 nsurlconnection 连接到远程服务器，获取响应并相应地显示。在测试应用程序时，我随机崩溃。如果我再次尝试重现崩溃，我不会崩溃。我不明白崩溃的根本原因是什么。我启用了 NSZombie，符号化的崩溃日志，检查了内存泄漏但没有运气。

我在 Xcode 3 中启动项目，现在我将相同的项目导入 Xcode 4.2，那么 Xcode 的兼容性有什么问题吗？

我在所有选项卡中使用相同的名称作为 nsurlconnection，例如在选项卡 1 中，我将 nsurlconnection 定义为 conn，选项卡 2 将 nsurlconnection 定义为 conn。

这个定义会引起任何问题吗？

请帮我解决这个随机崩溃

```
 NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL: url];

                conn = [[NSURLConnection alloc] initWithRequest:request delegate:self];

                if(label != nil){
                progressView = [[ProgressView showHUDAddedTo:self.tabBarController.view animated:YES] retain];
                    progressView.labelText = label;
                }

                [request release];
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {

            NSLog(@"didReceiveresponse");
            if ([response isKindOfClass: [NSHTTPURLResponse class]]) {

                if([(NSHTTPURLResponse *)response statusCode] == 200){

                }
                else{
                    //show Connection Error Alert
                }
            }
            responseData = [[NSMutableData alloc]init];
        }

        - (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
            NSLog(@"didReceiveData");
            [responseData appendData:data];
        }

        - (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {

            [progressView hide:YES];

            NSLog(@"didFail");

           //show failed alert
        }

        - (void)connectionDidFinishLoading:(NSURLConnection *)connection {

            NSLog(@"didfinish loading");

            if([responseData length] > 0)
                {
    //handles response data

    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:07:00.143

我没有看到代码的猜测是，在一个选项卡中你制作一个 NSURLConnection 并在它完成时对结果做一些事情。如果在返回结果之前更改选项卡，则会导致它崩溃。

您需要在 viewDidDisappear 时取消 NSURLConnection，或者确保在完成时运行的任何代码都不包含任何会在选项卡不可见时导致崩溃的内容（例如设置标签文本）。

我处理这个问题的方法是有一个单独的类来执行完成时发送通知的 URL 请求。这样，在您的 viewDidAppear 方法中，您将 viewController 设置为侦听通知，并在 viewDidDisapper 方法中停止侦听通知。因此，如果在 URL 请求完成时您的视图不可见，则会触发通知但没有任何反应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:07:35.137

你能提供控制台的输出吗？这似乎不是 Xcode 的错误。当您尝试访问已释放的对象时，通常会出现这些类型的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T12:23:16.447

我相信您已经尝试过具有内存泄漏的仪器。尝试使用带有僵尸工具的乐器，您可以在乐器库中轻松找到它。使用此工具运行您的代码，如果此崩溃是由于任何僵尸对象造成的，那么您将很容易检测到该位置。

它帮助了我几次。

# php - 为用户启用黑名单的最佳方式

> ID：12280943
> 
> 赞同：4
> 
> 时间：2012-09-05T11:59:13.687
> 
> 标签：php, mysql, sql, optimization, blacklist

我想允许我的用户创建内容源的黑名单（用户/类别/单词/？）。他们不应该看到来自这些来源的任何内容。

例如：如果用户 A 将用户 B 列入黑名单，然后用户 B 上传了图片，则用户 A 请求查看图库，他不会看到 B 的图片，但他可以看到用户 C、D 的图片。 ..

当一个用户建立一个大的黑名单（例如 100 个来源）时，就会出现问题。那么 SQL 查询将非常长且复杂（“...and author != 'B' and category != 'C'...”）最终会杀死我的服务器。

处理这个问题的其他方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:07:09.690

在我看来，您正在使用动态 SQL 来构建此查询。您应该将黑名单存储在与 UserId 相关的表中，然后您可以编写一个使用`NOT IN`或`NOT EXISTS`构建最终结果集的存储过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:09:34.133

首先，在可以忽略的每一列上创建索引。这样，您的匹配标准会更快找到。

然后，您可以创建一个中间表来收集用户与他列入黑名单的内容之间的关系。

也许是这样的：

```
userId | blacklistType | blacklistId
1      | user          | 2
1      | category      | 12
1      | word          | 4 
```

现在，如果您想要用户 1 的所有类别，您可以进行查询

```
SELECT *
FROM categories
WHERE NOT EXISTS (
    SELECT userId
    FROM blacklist
    WHERE userId = 1
        AND blacklist.blacklistType = 'category'
        AND categories.id = blacklist.blacklistId
) 
```

（我不太确定这里的语法，但我希望你应该明白）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T12:33:25.920

查询可能看起来很复杂，但这并不重要。确保为这些列编制索引，并最好使用类别、作者等的数字。

那么你会有一个像这样的查询

```
SELECT * FROM .... WHERE author_id NOT IN (1,12,567,6788) AND category_id NOT IN (6654,23245,89795) 
```

# codeigniter - codeigniter 分页数字未正确显示

> ID：12280945
> 
> 赞同：-3
> 
> 时间：2012-09-05T11:59:26.730
> 
> 标签：codeigniter, pagination

Codeigniter 分页数字在结果页面中未正确显示，。

请帮助我。

/*控制器页面代码*/

```
 function search_all()
  {
    $this->load->view(‘prd’); 
  $config = array();
  $config[‘base_url’] =  base_url().’/product_search/search_all’;
  $config[“total_rows”] = $this->search_product_model->record_count();
    $config[“per_page”] = 8;
    $config[“uri_segment”] = 3;

    $this->pagination->initialize($config);

    $page = ($this->uri->segment(3)) ? $this->uri->segment(3) : 0;
    $data[“results”] = $this->search_product_model->
    get_search($config[“per_page”], $page);
    $data[“links”] = $this->pagination->create_links();

    //$this->load->view(“example1”, $data);
  $this->load->view(‘asd’, $data);
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:11:16.493

give search key in the record_count() function as parameters //You got 2 na.??

Then in placeof search_params put you same keys which are supplied to the record_count()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T04:50:14.050

我认为这有问题

```
 $config[“total_rows”] = $this->search_product_model->record_count(); 
```

为此，您没有传递搜索键，这样它就会计算它包含的所有数据。如果您根据搜索键获得记录计数，那就没问题了。像这样

```
 $config[“total_rows”] = $this->search_product_model->record_count('//search parameters'); 
```

在你的模型中：

```
Public function record_count($search_params)
{
   $this->db->where('product',$search_params);
   return $this->db->count_all(“products”);
} 
```

您可以根据需要进行修改，例如将“颜色”、“类型”传递给您的 record_count() 函数，并基于此，您建议获取“count_all”。我希望它对您有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T07:21:14.230

尝试这个

```
 function search_all()
 {               
   $config[‘base_url’] =  base_url(’product_search/search_all’);
   $config[“total_rows”] = $this->search_product_model->record_count();//2 in your case
   $config[“per_page”] = 8;
   $config[“uri_segment”] = 3;

$this->pagination->initialize($config);

$page = ($this->uri->segment(3)) ? $this->uri->segment(3) : 0;
$data[“results”] = $this->search_product_model->
get_search($config[“per_page”], $page);
$data[“links”] = $this->pagination->create_links();

//$this->load->view(“example1”, $data);
$this->load->view(‘asd’, $data);
} 
```

并在您的模型中：

```
 public function get_search($limit, $page)
{
 //Add this...???
  $this->db->limit($limit, $page);  //or try $this->db->limit($page,$limit)

} 
```

# php - PHP 和 Android GCM 推送通知 - 如何存储用户

> ID：12280946
> 
> 赞同：0
> 
> 时间：2012-09-05T11:59:25.717
> 
> 标签：php, android, zend-framework, push-notification

我的 Android 客户端应用程序等待来自 GCM Google 服务器的推送消息...在服务器端，我的网络必须存储设备的注册 ID，以便将推送通知发送到此特定设备（调用具有特定 PHP 类的 GCM 服务）。问题是，每次在 Google GCM 服务器上注册时，如何刷新设备的注册 ID？如何将网络应用程序上的每个用户关联到 android 应用程序的特定注册 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:19:07.663

您可以使用 PHpmyadmin 工具创建数据库并使用 php 脚本打开、存储注册 ID 和关闭数据库。

# sqlite - 来自sqlite中多个表的多个查询

> ID：12280947
> 
> 赞同：0
> 
> 时间：2012-09-05T11:59:31.357
> 
> 标签：sqlite, sum

我正在使用它，但没有找到任何值...我认为这个查询有错误...实际上我想知道如何在 sqlite 中使用多个表来使用多个求和、乘法等

```
SELECT 
  dhid, dprice, dname,
  SUM(dmilk) AS totalmilk,
  dprice*SUM(dmilk) AS totalmilkamt,
  SUM(ghee) AS toalghee,
  SUM(ghee*gheeprice) AS totalgheeamt,
  SUM(ghee*gheeprice)+dprice*SUM(dmilk)  AS totals,
  SUM(cashamount)   AS totalcash,
  SUM(ghee*gheeprice)+dprice*SUM(dmilk)-SUM(cashamount) AS balance 
FROM
  (         SELECT *
              FROM costumer
   LEFT OUTER JOIN salesdata
                ON costumer.dhid=salesdata.ddhid
   LEFT OUTER JOIN cashdata
                ON salesdata.ddhid=cashdata.uid
               AND utype='costumer')
   WHERE dmonth='$mikdatem'
     AND dyear='$mikdatey' 
     AND dhid='$dhid' 
ORDER BY dhid ASC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:03:27.760

您在上面的选择对我们没有帮助，因为我们没有基础数据来了解您想要做什么。

所以一般的答案是这样的：当使用分组函数（SUM/COUNT ...）时，您总是需要某种形式的“GROUP BY”来处理这些分组函数中未使用的列。

给出的例子：

```
SELECT name, sum(dmilk)
FROM milk_entry
GROUP BY name 
```

# asp.net - 动态数据在编辑页面上添加额外的列

> ID：12280948
> 
> 赞同：0
> 
> 时间：2012-09-05T11:59:33.847
> 
> 标签：asp.net, dynamic-data, asp.net-dynamic-data

我有一个动态数据站点，其中记录了项目名称和客户名称。插入页面工作正常，但编辑页面复制了编辑字段。所以在编辑页面上会有：

项目名称：[文本框]

项目名称：1 [文本框]

但是在插入页面上很好：

项目名称：[文本框]

有任何想法吗？

这是动态数据 aspx 页面代码：

```
<asp:DynamicDataManager ID="DynamicDataManager1" runat="server" AutoLoadForeignKeys="true">
    <DataControls>
        <asp:DataControlReference ControlID="FormView1" />
    </DataControls>
</asp:DynamicDataManager>

<h2 class="DDSubHeader">Edit Project</h2>

<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
        <asp:ValidationSummary ID="ValidationSummary1" runat="server" EnableClientScript="true"
            HeaderText="List of validation errors" CssClass="DDValidator" />
        <asp:DynamicValidator runat="server" ID="DetailsViewValidator" ControlToValidate="FormView1" Display="None" CssClass="DDValidator" />

        <asp:FormView runat="server" ID="FormView1" DataSourceID="DetailsDataSource" DefaultMode="Edit"
            OnItemCommand="FormView1_ItemCommand" OnItemUpdated="FormView1_ItemUpdated" RenderOuterTable="false">
            <EditItemTemplate>
                <table id="detailsTable" class="DDDetailsTable" cellpadding="6">
                    <asp:DynamicEntity ID="DynamicEntity1" runat="server" Mode="Edit" />
                    <tr class="td">
                        <td colspan="2">
                            <asp:LinkButton ID="LinkButton1" runat="server" CommandName="Update" Text="Update" />
                            <asp:LinkButton ID="LinkButton2" runat="server" CommandName="Cancel" Text="Cancel" CausesValidation="false" />
                        </td>
                    </tr>
                </table>
            </EditItemTemplate>
            <EmptyDataTemplate>
                <div class="DDNoItem">No such item.</div>
            </EmptyDataTemplate>
        </asp:FormView>

        <asp:LinqDataSource ID="DetailsDataSource" runat="server" EnableUpdate="true" />

        <asp:QueryExtender TargetControlID="DetailsDataSource" ID="DetailsQueryExtender" runat="server">
            <asp:DynamicRouteExpression />
        </asp:QueryExtender>
    </ContentTemplate>
</asp:UpdatePanel> 
```

这是背后的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.DynamicData;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace Halcyonetic.TimeService.Web.DynamicData.CustomPages.Projects
{
public partial class Edit : System.Web.UI.Page
{
    protected MetaTable table;

    protected void Page_Init(object sender, EventArgs e)
    {
        table = DynamicDataRouteHandler.GetRequestMetaTable(Context);
        FormView1.SetMetaTable(table);
        DetailsDataSource.EntityTypeName = table.EntityType.AssemblyQualifiedName;
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        Title = table.DisplayName;

    }

    protected void FormView1_ItemCommand(object sender, FormViewCommandEventArgs e)
    {
        if (e.CommandName == DataControlCommands.CancelCommandName)
        {
            Response.Redirect(table.ListActionPath);
        }
    }

    protected void FormView1_ItemUpdated(object sender, FormViewUpdatedEventArgs e)
    {
        if (e.Exception == null || e.ExceptionHandled)
        {
            Response.Redirect(table.ListActionPath);
        }
    }
}
} 
```

这是我的数据注释：

```
[MetadataType(typeof(ProjectMetadata))]
[ScaffoldTable(true)]
public partial class Project
{
}

[DisplayName("Projects")]
public partial class ProjectMetadata
{
    [Display(Name = "Project Name", Order = 1)]
    [ScaffoldColumn(true)]
    public object ProjectName { get; set; }

    [Display(Name = "Customer", Order = 2)]
    [ScaffoldColumn(true)]
    [UIHint("Customer")]
    public object Company { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T23:01:01.163

您发布的内容看起来像标准动态数据代码，但您可能希望更仔细地查看 DBML 或 EDX 文件中的关系（映射为关联）。看起来编辑模板是双重关联的东西......这很奇怪。抱歉，这并不具体，但也许会有所帮助。

# objective-c - 如何将自定义字体添加到 UILabel 但标签从情节提要中保留其大小

> ID：12280950
> 
> 赞同：1
> 
> 时间：2012-09-05T11:59:48.480
> 
> 标签：objective-c, ios, cocoa-touch

我目前正在继承 UILabel 以将字体更改为自定义字体，但是我也希望它保留我在情节提要中为每个标签设置的大小。有没有一种方法可以做到这一点，还可以检测当前选择的粗体样式等，并在可能的情况下用相关的自定义字体替换它？

这是我用来设置当前字体的代码。

```
- (id)initWithCoder:(NSCoder *)coder {
 self = [super initWithCoder:coder];
 if (self) {
    self.font = [UIFont fontWithName:@"FrutigerLT-Roman" size:17.0];
  }
  return self;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T12:04:17.253

要为您的应用添加自定义字体，请查看以下链接：[http ://shang-liang.com/blog/custom-fonts-in-ios4/](http://shang-liang.com/blog/custom-fonts-in-ios4/)

现在，为了保持故事板中设置的大小，应该没问题：

```
self.font = [UIFont fontWithName:@"FrutigerLT-Roman" size:self.font.pointSize]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:02:10.397

最后我写了自己的解决方案。

[https://stackoverflow.com/a/12281017/1565615](https://stackoverflow.com/a/12281017/1565615) @Nathan R. 帮助我获得了字体大小。

然后，我提取了 UIFont 描述的字体粗细组件并相应地更改了字体，这对于自定义字体非常有用，因为现在我可以在情节提要中设置字体大小和样式，它将在 UILabel 的子类版本中进行设置。

我希望有一种更简单的方法来识别正在使用的字体粗细类型，例如 font.fontWeight 我意识到我的解决方案是冗长的，但它可以工作，任何进一步的想法都会很有用。

```
- (id)initWithCoder:(NSCoder *)coder
{
  self = [super initWithCoder:coder];
  if (self)
  {
    NSString *fontInfo = self.font.description;//Complete font description
    NSArray *splitUpFontDescription = [fontInfo componentsSeparatedByString: @";"];//Split up
    NSString *fontWeight = [[NSString alloc]init];
    for (NSString *tempString in splitUpFontDescription)
    {
      if ([tempString rangeOfString:@"font-weight"].location != NSNotFound)//Font weight found
      {
        fontWeight = [tempString stringByReplacingOccurrencesOfString:@" "
                                                  withString:@""];//Remove whitespace
        fontWeight = [fontWeight stringByReplacingOccurrencesOfString:@"font-weight:"
                                                           withString:@""];
      }
    }
    NSLog(@"Font style (Weight) = *%@*",fontWeight);
    if ([fontWeight isEqualToString:@"normal"])
    {
      //Set to custom font normal.
      self.font = [UIFont fontWithName:@"FrutigerLT-Roman" size:self.font.pointSize];
    }
    else if([fontWeight isEqualToString:@"bold"])
    {
      //Set to custom font bold.
      self.font = [UIFont fontWithName:@"FrutigerLT-Bold" size:self.font.pointSize];
    }
  }
  return self;
} 
```

# c# - 使用内容生成操作的 WPF 和 WinRT 图像源

> ID：12280954
> 
> 赞同：0
> 
> 时间：2012-09-05T11:59:56.437
> 
> 标签：c#, .net, wpf, windows-8, buildaction

我有一个想要共享图像的 WinRT 应用程序和一个 .NET 应用程序。我一直在使用可移植类库，并希望尽可能多地共享代码。我还想只拥有所有图像的一份副本，并使用“添加链接”功能添加图像。

我的 WinRT 应用程序使用“内容”的构建操作，我使用这样的相对路径来引用我的图像：/Assets/Flags/Australia.png

我已使用添加链接将图像添加到我的 .NET 应用程序中，并使用了相同的“内容”构建操作，但我无法使其正常工作。它似乎只在我使用“资源”的构建操作并使用如下完整路径时才有效：/MyProject;component/Assets/Flags/Australia.png

我的可移植类库项目中有一个模型，其中包含一个返回标志图像路径的属性。两个应用程序都应该共享这个属性。我怎样才能实现这一点以及我使用什么构建操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:14:02.827

事实证明，共享是不可能的。我最终在 WinRT 和 WPF 中为我的图像路径使用了单独的属性。

# sorting - 具有 3 个类的多对多 Grails：按关系数排序

> ID：12280957
> 
> 赞同：1
> 
> 时间：2012-09-05T12:00:03.533
> 
> 标签：sorting, grails, many-to-many, grails-orm, transient

假设我们有 3 个域类：2 个类通过第 3 个类相互关联。

好的，一些代码：

```
class A {
     String subject
     String description

     static hasMany = [cs: C]

     static transients = ['numberOfCs']

     Long getNumberOfCs() {
         return cs.size()
     }
}

class B {
     String title
}

class C {
     A objectA
     B objectB

     static belongsTo = [a: A]
} 
```

很清楚吗？但愿如此。这与我的域完美配合。

可以看到瞬态属​​性numberOfCs，用来计算我的A对象相关的C实例个数。它工作得很好。

问题：列出我所有的 A 对象，我想按与 C 对象的关系数对它们进行排序，但是瞬态属性 numberOfCs 不能用于范围。

我该如何处理这种情况？我如何告诉 GORM 按 numberOfCs 对 As 列表进行排序，因为它是一个常规（非瞬态）字段？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:06:17.493

我不确定 Grails 的标准是否支持这一点，因为您既需要选择 A 对象本身，又需要通过子对象 ( `C`) 进行聚合。这意味着按所有 's 字段分组`A`，这不是自动完成的。

如果您只需要 A 中的一些字段，则可以按它们分组：

```
def instances = A.withCriteria {
  projections { 
    groupProperty('subject')
    count('cs', 'cCount')
  }
  order 'cCount'
} 
```

否则你只需要检索`id`s 并进行第二次查询，就像[在这个问题](https://stackoverflow.com/a/2583357/207791)中一样。

另一种方法是使用[此处](http://www.intelligrape.com/blog/2010/12/31/create-transients-using-formula-in-grails/)描述的[派生属性](http://grails.org/doc/latest/guide/single.html#derivedProperties)（但不确定它是否会起作用）：

```
class A {
    static mapping = {
        numberOfCs formula: 'select count(*) from C where c.b_id = id'
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:59:27.337

我不会考虑您的问题 GORM 相关，而是一般的 Hibernate 甚至 SQL 相关。

看看[HQL Docu](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html)他们有很多例子。

检查以下 HQL 非常接近您的要求。

```
select mySortedAs from A mySortedAs left join mySortedAs.cs myCsOfA order by              
count(myCsOfA) 
```

我想我在某处看到您也可以执行类似 myCsOfA.length 或 myCsOfA.size 的操作

# c# - 使用 OPOS 打印机打印收据时减小字体大小

> ID：12280960
> 
> 赞同：1
> 
> 时间：2012-09-05T12:00:09.487
> 
> 标签：c#, .net, point-of-sale, epson, opos

我们如何在使用 OPOS 打印机打印时减小文本/字体的大小？我正在使用爱普生打印机和以下软件组件来完成这项工作。

*   .Net 的 OPOS ADK
*   适用于 .Net 的 Microsoft POS

用于打印一行的命令是

```
m_Printer.PrintNormal(PrinterStation.Receipt, "\u001b|cA" + "noob is printing"+ "\n"); 
```

是否有任何用于减小字体大小的转义字符？RecLineChars 设置为 42。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T03:27:20.827

我们使用以下内容：

```
// Scale the font to OPOS (1 to 4)
int fontSize = (int)Math.Round((format.FontSize.Value - 5) / 5.0);
if (fontSize < 1)
    fontSize = 1;
if (fontSize > 4)
    fontSize = 4;
_printerText += string.Format("\x1B|{0}C", fontSize); 
```

# c++ - 在 C++ 中在 Facebook 上进行身份验证

> ID：12280964
> 
> 赞同：1
> 
> 时间：2012-09-05T12:00:15.640
> 
> 标签：c++, facebook, authentication, oauth

我已经在互联网上搜索了几天，但似乎找不到任何像样的例子。我对 oauth2 流程的理解是（如果我错了，请纠正我）：

1.  客户端程序向 facebook 请求 request_token
2.  客户端程序启动一个浏览器，给它一个包含 client_id 和 request_token 的地址，然后让给浏览器
3.  用户登录/订阅并接受 request_token
4.  一旦焦点返回到客户端程序，程序就会发送它之前获得的 request_token 以检查它是否已被授权；如果是，则返回访问令牌
5.  只要 access_token 有效，客户端程序就可以自由访问它需要的任何内容

[oauth2 stub 和this page](http://cms.getsatisfaction.com/developers/authentication)似乎证实了这一点，但我找不到任何方法在 facebook 中获取 request_token。即使[在这里](http://www.reijo.org/scribbles/list-of-oauth-service-providers)我也找不到任何有用的东西。也可以获取包含 access_token 的 access_token 或 signed_request 。

我的程序应该运行的平台包括 MacOSX、iOS、Win32、Linux。我们目前可以进行 http/https 通信，并且可以接受特定平台的代码，例如 Win32 上的 ShellExecute()。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:42:24.503

为什么不查看[官方文档](https://developers.facebook.com/docs/authentication/)而不是查看实现 OAuth 1.0 的提供者的文档？

由于 Facebook 没有实现直接满足您要求的流程，因此您可以使用的下一个最佳流程是[Client Side Authentication flow](https://developers.facebook.com/docs/authentication/client-side/)。

它基本上是这样工作的：

1.  从您的应用程序中打开一些 Web 浏览器/视图，并将其定向到 Facebook 的`/dialog/oauth`端点，并将参数作为查询字符串。
2.  让用户登录并在其中授予您的应用程序访问权限。
3.  从浏览器视图中的响应重定向中捕获`access_token`片段。

如何从应用程序打开 Web 浏览器/视图以及如何捕获重定向在很大程度上取决于您使用的操作系统/库，但应该可以通过一些研究来实现。

# java - 如何制作具有 x、y 和 z 旋转速度的 3 个字段的旋转立方体？

> ID：12280966
> 
> 赞同：1
> 
> 时间：2012-09-05T12:00:35.203
> 
> 标签：java, html, css, animation, rotation

我在 Java、Visual Basic、HTML 和 CSS 方面有一些经验 哪种语言最容易创建具有中央旋转立方体和控制立方体 x、y 和 z 旋转速度的 3 个字段的界面？

谢谢你的建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T12:11:55.110

看看这里：

[http://codentronix.com/2011/05/10/html5-experiment-a-rotating-solid-cube/](http://codentronix.com/2011/05/10/html5-experiment-a-rotating-solid-cube/)

它使用 javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:14:34.610

如果你愿意，你可以`Java3D`使用它，几年前我用过它，我非常喜欢它:)

[这是一个](http://www.javaworld.com/javaworld/jw-12-1998/jw-12-media.html)包含有关 Java 3D 信息的站点。

[一个不错的教程......](http://www.java3d.org/tutorial.html)

[更长，更完整的教程......](http://java.sun.com/developer/onlineTraining/java3d/)

# android - 操作栏中的搜索小部件不显示默认文本

> ID：12280971
> 
> 赞同：3
> 
> 时间：2012-09-05T12:00:52.877
> 
> 标签：android

嗨，我的应用程序操作栏中的搜索小部件由于某种原因未显示默认文本。我确信我可能会遗漏一些东西。代码如下所示：-

```
 @Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    try{
        SearchView searchView = (SearchView) menu.findItem(R.id.action_search).getActionView();
        searchView.setOnQueryTextListener(this);
        }catch(Exception e){
            Log.v(TAG,"inflated"+e.getMessage()+"--"+e.getClass()+"-"+e.getClass());
        }
    return true;
} 
```

菜单/activity_main

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">

   <item android:id="@+id/action_search"
      android:title="@string/search_title"
      android:icon="@android:drawable/ic_menu_search"
      android:showAsAction="ifRoom|collapseActionView"
      android:actionViewClass="android.widget.SearchView" />
 </menu> 
```

值/字符串.xml

```
<resources>
<string name="search_title">Search Data</string>
</resources> 
```

搜索小部件工作正常，唯一的问题是默认文本“搜索数据”没有显示。有人能告诉我我做错了什么吗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T12:32:51.690

尝试使用这个

```
searchView.setQueryHint(getResources().getString(R.string.search_title)); 
```

# jquery - Jquery动画div和返回函数

> ID：12280973
> 
> 赞同：0
> 
> 时间：2012-09-05T12:00:57.193
> 
> 标签：jquery, jquery-animate

当我点击我的菜单栏时，我有一个从顶部向下的 div。我需要创建一个函数，在再次单击按钮链接时它会返回顶部。这是我到目前为止所尝试的：

**HTML**：

```
<div id="wrapper"><button id="top">&raquo;</button></div>
<div class="block"></div> 
```

**Javascript**：

```
$("#top").click(function(){
  $(".block").animate({"top": "+=300px"}, "slow");
}); 
```

**CSS**：

```
div {
  position:absolute;
  background-color:#abc;
  left:50px;
  width:90px;
  height:90px;
  margin-top:5px;
}

#wrapper {

    top: 80px;
 }  

.block {
     margin-top:-95px;
  }   
​ 
```

[现场演示](http://jsfiddle.net/FjqYU/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:06:22.313

尝试使用 jquery [toggle()](http://api.jquery.com/toggle/)。您的代码将如下所示：

```
$("#top").toggle(function(){
    $(".block").animate({"top": "+=300px"}, "slow");
}, function() {
    $(".block").animate({"top": "-=300px"}, "slow");
}); 
```

[现场演示](http://jsfiddle.net/FjqYU/6/)

由于似乎[不推荐使用 toggle()](http://api.jquery.com/category/deprecated/)，因此这是另一个使用 click 的解决方案：

```
$("#top").on("click", function(){
    if(!$(".block").hasClass('down'))
        $(".block").addClass('down').animate({"top": "+=300px"}, "slow");
    else
        $(".block").animate({"top": "-=300px"}, "slow").removeClass('down');
}); 
```

[现场演示](http://jsfiddle.net/FjqYU/10/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:07:53.560

您好，您可以这样做，只需分配差异即可。差异中的类。情况和你的工作将完成

```
$("#top").click(function(){
  if($(".block").hasClass('Down')==false && $(".block").hasClass('Stop')==false)
  {
    $(".block").animate({"top": "+=300px"}, "slow").addClass('Down');
  }
  else
  {
        $(".block").animate({"top": "0px"}, "slow").removeClass('Down').addClass('Stop');
  }

}); 
```

[现场演示](http://jsfiddle.net/FjqYU/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T12:18:13.343

```
$("#top").on('click', function(){
    var elm = $(".block");
    elm.animate({"top": ((parseInt(elm.css('top'), 10)>10?"-=":"+=")+"300px")}, "slow");
});​ 
```

[**小提琴**](http://jsfiddle.net/L6eLz/1/)

# c# - 分配创建的类实例有些重

> ID：12280976
> 
> 赞同：0
> 
> 时间：2012-09-05T12:01:13.810
> 
> 标签：c#, .net

这是我的课：

```
public class ContainerData
{
    private List<Dictionary<Contour<Point> , int>> ratioContoursCollection = new List<Dictionary<Contour<Point>,int>>();

    public List<Dictionary<Contour<Point>, int>> ratioContoursCollcProperty 
    {
        get { return ratioContoursCollection; }
        set { ratioContoursCollection = value; } 
    }
} 
```

我创建了一个类的实例：

```
ContainerData _CD = new ContainerData(); 
```

我需要用for 循环中`_CD`的和轮廓填充：`newTriangleRation`

```
for(i = 0; i < 5; i++)
{
    double newTriangleRatio = someFunc();
    Contour<Point> contours = someFunc2();  
    // assignment have to be here!!!
} 
```

知道如何实施吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T12:06:49.660

```
Dictionary<Contour<Point>,int> myDict = new Dictionary<Contour<Point>,int>();
for(i=0;i<5;i++)
{
 int newTriangleRatio = someFunc();
 Contour<Point> contours = someFunc2();
 myDict.Add(contours,newTriangleRatio);
}
_CD.RatioContoursCollcProperty.Add(myDict); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:07:00.987

我想它可能是这样的：

```
for(i=0;i<5;i++)
{
    double newTriangleRatio = someFunc();
    Contour<Point> contours = someFunc2();
    Dictionary<Contour<Point>, int> dict = new Dictionary<Contour<Point>, int>();
    dict.Add(contours, (int)newTriangleRatio);
    _CD.ratioContoursCollcProperty.Add(dict);
} 
```

虽然拥有 5 个只有一个键的字典对我来说没有多大意义......

# python - 如何从我的软件向 ubuntu 添加上下文菜单？

> ID：12280977
> 
> 赞同：1
> 
> 时间：2012-09-05T12:01:13.030
> 
> 标签：python, linux, ubuntu, contextmenu

> **可能重复：**
> [将 Java 应用程序放入文件管理器的上下文菜单](https://stackoverflow.com/questions/11549529/put-java-application-into-file-managers-context-menu)

我有一个软件，我在 Windows 中添加了一个注册表项，以便在 Windows 资源管理器中，该人可以右键单击任何图像，然后选择运行我的应用程序。（调整图像大小）

我想知道如何为 Ubuntu（或任何 Linux 发行版）执行此操作我已经阅读了许多操作指南，它们都包括使用软件添加到右键单击，但是，我希望能够创建正确的从我自己的代码中单击菜单。

我正在用 python 为 Linux 编写软件，它在 windows 中使用 c# 工作。

# eclipse - Eclipse 4.2 (Juno) - 将选项卡从一个编辑器区域拖到另一个？

> ID：12280986
> 
> 赞同：0
> 
> 时间：2012-09-05T12:01:59.320
> 
> 标签：eclipse, tabs, split, window, drag

拖动编辑器选项卡以创建拆分编辑器布局（2 个并排的编辑器）非常简单。

例如，这可能会产生以下布局，其中`|`指示窗口垂直拆分以产生两个水平相邻的编辑器：

```
[TabL1] [TabL2] [TabL3] | [TabR1] 
```

这样做一次后，我不能再拖一秒钟`TabL`坐在`TabR`. 将鼠标悬停在右侧编辑器区域上出现的唯一选项`TabL`是用于进一步拆分，或完全分离选项卡以驻留在其自己的窗口中。

尝试将分离的选项卡（在其自己的窗口中）拖动到任一编辑器区域时，也会出现相同的问题。

有人可以说明如何达到预期的结果吗？

真诚的感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:26:46.427

要将视图/编辑器拖放到现有堆栈中，您需要将鼠标悬停在与现有选项卡相邻的选项卡条上，您希望在其中放置新选项卡。您将在现有选项卡旁边看到一条短的垂直下降反馈线。

# git - 带有 git + 开发者连接的 Maven 发布插件

> ID：12280992
> 
> 赞同：4
> 
> 时间：2012-09-05T12:02:23.937
> 
> 标签：git, maven, maven-release-plugin

我正在尝试使用 Maven 发布插件从主干创建分支。

前任。repository.git/child1/child2/

该插件创建一个包含我的整个存储库的新分支。我怎样才能限制它创建一个只包含 child1 的分支？

目前 pom.xml 连接、开发者连接和 url 如下：

```
<scm>
  <connection>scm:git:ssh://githost/repository.git</connection>
  <developerConnection>scm:git:ssh://githost/repository.git</developerConnection>
  <url>scm:git:ssh://githost/repository.git</url>
  <tag>HEAD</tag>
</scm> 
```

在 svn 中，我们曾经通过在 developerConnection 中使用 child1 的绝对路径来实现这一点。

谢谢，

加亚特里

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T11:05:49.633

[使用 Git 发布多模块 maven 项目有](https://stackoverflow.com/questions/6727450/releasing-a-multi-module-maven-project-with-git)帮助 + 您需要升级到 2.3.2 版本的 maven-release-plugin

# android - Google Analytics 事件跟踪 - 最大字符串长度

> ID：12280993
> 
> 赞同：17
> 
> 时间：2012-09-05T12:02:28.597
> 
> 标签：android, string, events, google-analytics

我正在使用 Google Analytics 跟踪我的 Android 应用程序中的事件。我的问题是：事件中的字符串长度是否有限制？我在 Google 的开发指南网站上没有找到任何关于此主题的信息。

最好的祝福！

**编辑：** 我尝试了一个包含 2000 个字符的字符串 - 它有效。如果您需要更多（我不相信），请先尝试。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2014-07-18T10:47:01.077

根据官方文档，

*   [**事件类别**](https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#ec)的最大长度= 150 字节
*   [**事件操作**](https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#ea)的最大长度= 500 字节
*   [**事件标签**](https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#el)的最大长度= 500 字节
*   对于所有其他参数，您可以在[同一页面](https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters)中查看。

根据[此文档](https://developers.google.com/analytics/devguides/collection/protocol/v1/reference#maxlength)自动截断长文本：

> 如果任何值大于最大长度，它们将被自动截断。如果多字节字符超过最大长度，整个字符将被截断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T17:39:04.053

请注意，Google Analytics 会给出 414 错误并告诉您您的字符串太长，而实际上您发送的字符串格式错误。只需取一个适度的字符串并插入几个空格，您就可以自己查看了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-01T01:57:55.683

@Pang 的回答对于 Universal Analytics (UA) 是正确的。但是最新版本的 Google Analytics 不是 UA，是 Google Analytics 4 (GA4)，[GA4 有不同的限制](https://support.google.com/analytics/answer/9267744?hl=en)：

| 记录的项目 | 限制 |
| --- | --- |
| 不同名称的事件 | 每个应用实例 (app) 500 个 
自动收集的事件，例如 first_open 和 in_app_purchase，以及您通过增强测量收集的事件不计入限制。 |
| 事件名称的长度 | 40 个字符 |
| 每个事件的事件参数 | 25个事件参数 |
| 事件参数名称的长度 | 40 个字符 |
| 事件参数值的长度 | 100 个字符 |
| 用户属性 | 每处房产 25 |
| 用户属性名称的长度 | 24 个字符 |
| 用户属性值的长度 | 36 个字符 |
| 用户 ID 值的长度 | 256 个字符 |

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-12-30T20:09:40.387

最大事件标签字符串长度为 2048 字节：[https ://developers.google.com/analytics/devguides/collection/protocol/v1/reference#maxlength](https://developers.google.com/analytics/devguides/collection/protocol/v1/reference#maxlength)

# javascript - 在javascript函数中设置文本框的值

> ID：12280998
> 
> 赞同：0
> 
> 时间：2012-09-05T12:02:53.807
> 
> 标签：javascript, .net

我有一个文本框，我需要在 javascript 函数中设置其值。我计算网格中选中的复选框的数量，然后将值分配给隐藏字段，该隐藏字段的值又分配给文本框。以下是JS函数。

```
function CountChkBx_tpm() {
        var gvTrNomList = document.getElementById("gvTrNomList");
        var numChecked = document.getElementById("hdn2");
        var frm = document.forms['gvTrNomList'];
        var flag = false;
        for (var i = 0; i < document.forms[0].length; i++) {
            if (document.forms[0].elements[i].id.indexOf('IsTPMSelected') != -1) {
                if (document.forms[0].elements[i].checked) {
                    numChecked = numChecked + 1;
                }
            }
        }

        if (numChecked > 0)
            document.getElementById('<%=txtTPMRecom.ClientID %>').Value = numChecked;
        else
            document.getElementById('<%=txtTPMRecom.ClientID %>').Value = '0';
    } 
```

它在网格内的复选框的 OnClick 处被调用：

```
<ItemTemplate>
                                <asp:CheckBox type="checkbox" runat="server" ID="IsTPMSelected" onclick="CountChkBx_tpm()" />
                            </ItemTemplate> 
```

相同的功能用于另一个带有另一个 JS 函数的复选框来为另一个文本框设置值..这绝对没问题！有什么问题！！

```
 function CountChkBx() {
        var gvTrNomList = document.getElementById("gvTrNomList");
        var numChecked = document.getElementById("hdn");
        var frm = document.forms['gvTrNomList'];
        var flag = false;
        for (var i = 0; i < document.forms[0].length; i++) {
            if (document.forms[0].elements[i].id.indexOf('IsPocSelected') != -1) {
                if (document.forms[0].elements[i].checked) {
                    numChecked = numChecked + 1;
                }
            }
        }

        if (numChecked > 0) {

            document.getElementById('<%=txtCounterConfirmation.ClientID %>').value = numChecked;

        }
        else {
            document.getElementById('<%=txtCounterConfirmation.ClientID %>').Value = '0';
        }
    } 
```

这是用于以下复选框

```
 <ItemTemplate>
                                <asp:CheckBox type="checkbox" runat="server" ID="IsPocSelected" onclick="CountChkBx()" />
                            </ItemTemplate>
                        </asp:TemplateField> 
```

文本框是：

```
 <td style="width: 100px">
                            <asp:TextBox ID="txtCounterConfirmation" runat="server"></asp:TextBox>
                        </td>
                    </tr>
                    <tr>
                        </td>
                        <td style="width: 100px">
                            <asp:TextBox ID="txtTPMRecom" runat="server"></asp:TextBox>
                        </td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:22:04.510

据我认为你需要使用

```
document.getElementById('<%=txtTPMRecom.ClientID %>').value 
```

代替

```
document.getElementById('<%=txtTPMRecom.ClientID %>').Value 
```

结束 javscript 代码

```
function CountChkBx_tpm() {
        var gvTrNomList = document.getElementById("gvTrNomList");
        var numChecked = document.getElementById("hdn2");
        var frm = document.forms['gvTrNomList'];
        var flag = false;
        for (var i = 0; i < document.forms[0].length; i++) {
            if (document.forms[0].elements[i].id.indexOf('IsTPMSelected') != -1) {
                if (document.forms[0].elements[i].checked) {
                    numChecked = numChecked + 1;
                }
            }
        }

        if (numChecked > 0)
            document.getElementById('<%=txtTPMRecom.ClientID %>').value = numChecked;
        else
            document.getElementById('<%=txtTPMRecom.ClientID %>').value = '0';
    } 
```

# objective-c - 处理用户首次打开应用程序时显示登录屏幕的最佳方式是什么？

> ID：12280999
> 
> 赞同：0
> 
> 时间：2012-09-05T12:02:58.990
> 
> 标签：objective-c, ios, xcode4.3

我目前正在构建一个 iOS 应用程序，并试图找出呈现必要屏幕的最佳方式。

该应用程序是基于选项卡的应用程序，但在用户登录之前，选项卡栏及其子项不应可见。

目前，应用程序委托在调用时将 tabbarcontroller 设置为根视图控制器`application:didFinishLaunchingWithOptions`，然后如果需要，tab bar 控制器中的第一个控制器会显示登录视图控制器。

这种方法的问题是标签栏中的第一个视图控制器非常忙。它向外部 API 发出一些请求，其中一些首先*需要*有效的会话令牌。

除非有人可以提出更好的解决方案，否则我想做的是检查`application:didFinishLaunchingWithOptions`是否存在有效的会话 ID。如果有，将 tabBarController 设置为 rootViewController，如果没有，将登录控制器设置为根视图控制器。

任何人都可以看到这个想法的任何陷阱吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:05:48.540

使用 NSUserDefault 存储 bool 值，这将是第一次为 true，登录屏幕将与将 bool 值设置为 false 一起出现。所以第二个登录屏幕不会出现

在 application:didFinishLaunchingWithOptions 方法中添加这个：

```
 [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"FirstTime"];
 [[NSUserDefaults standardUserDefaults] synchronize]; 
```

现在

```
 if([[NSUserDefaults standardUserDefaults] boolForKey:@"FirstTime"] == YES)
 {
    [[NSUserDefaults standardUserDefaults] setBool:NO forKey:@"FirstTime"];
    [[NSUserDefaults standardUserDefaults] synchronize];
   //login screen
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:13:06.993

我在我的应用程序中使用了这两种方法，你描述的第一种是最好的，因为你不需要改变视图控制器层次结构。您确实应该在 NSUserDefaults 中存储一个布尔值，并在您的第一个视图控制器中存储另一个布尔值。检查标签栏的第一个视图控制器的 viewDidLoad 方法中的 userDefault bool 值以查看用户是否经过身份验证，如果没有，请将第一个视图控制器的布尔值设置为适当的值，并且不要执行您需要通过第三方 API 执行的操作，进行身份验证，将 bool 设置为适当的值并返回到第三方 API。