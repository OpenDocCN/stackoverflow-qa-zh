# StackOverflow 问答 000854000-000854999

# c# - 在VS08中，在F5上，有时WCF服务加载正确，有时我得到一个文件列表

> ID：854006
> 
> 赞同：0
> 
> 时间：2009-05-12T17:54:53.910
> 
> 标签：c#, .net, wcf

抱歉，但我不确定是什么导致了问题，而且问题现在没有发生。我得从记忆中描述。

所以我开始创建 WCF 服务应用程序。有时，当按 F5 运行项目时，我会得到正确的屏幕，屏幕显示：

## 服务1 服务

```
You have created a Service.

To test this service, you will need to create a client and use it to call the service. You can do this using the svcutil.exe tool from the command line with the following syntax: 
```

等等等等。但是在我做了一些编辑之后，有时我会再次运行项目，浏览器不会加载上面的屏幕，而是会显示包含文件的目录。

到底是怎么回事？我怎样才能解决（？）问题并防止它再次发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T19:09:30.963

尝试右键单击 .svc 文件并“设置为起始页”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T18:03:48.077

你用的是微软键盘吗？

我不时遇到同样的问题，最后意识到我有时会按 Backspace 键上方的 F Lock 键。这会将 F5 键切换为“打开”命令。

把我吓坏了，直到我想通了。

试一试，看看是不是这样。

杰法

# java - 在 Java 中创建平滑通知窗口的最佳方法是什么？

> ID：854007
> 
> 赞同：4
> 
> 时间：2009-05-12T17:54:57.030
> 
> 标签：java, user-interface, window, notifications

...类似于雷鸟或 Outlook 等电子邮件客户端生成的邮件，从托盘向上滑动或淡入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T19:56:17.720

简单的弹出窗口：查看[http://jtoaster.sourceforge.net/](http://jtoaster.sourceforge.net/)

对于花哨的东西，看看 Java 2D 可以做什么：

[http://java.sun.com/products/java-media/2D/samples/java2demo/Java2Demo.html](http://java.sun.com/products/java-media/2D/samples/java2demo/Java2Demo.html)

选中 Composite -> Composite FadeAnim。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T18:07:17.773

你的通知是为了什么？是针对已经存在的程序，还是在编写新的应用程序？

我问是因为 Adob​​e AIR 有一些功能可以做这种事情，无论是作为基于 Flex 的应用程序，还是以 HTML/JS 编写的 AIR 应用程序。但是，除非这是您从头开始构建的东西，否则您不会使用 AIR。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-13T05:03:35.720

Swing 的 Timer 类 ( [http://java.sun.com/docs/books/tutorial/uiswing/misc/timer.html](http://java.sun.com/docs/books/tutorial/uiswing/misc/timer.html) ) 可用于基本动画 - 只需使用计时器来更新包含您的内容的面板的位置。

去年我参加了一个 JavaOne 会议，他们用这个做了一些非常巧妙的事情。

幻灯片： http: [//progx.org/users/Gfx/FilthierRicherClientier.pdf](http://progx.org/users/Gfx/FilthierRicherClientier.pdf)

请特别注意第 29 页及以后的内容。

这是同一个人的网站，但有更多代码和屏幕截图等......

[http://today.java.net/pub/a/today/2007/10/23/create-moving-experiences-with-animated-transitions.html](http://today.java.net/pub/a/today/2007/10/23/create-moving-experiences-with-animated-transitions.html)

所有这一切的最终结果非常非常顺利。

# python - 从 Python 创建 SQL Server 数据库

> ID：854008
> 
> 赞同：3
> 
> 时间：2009-05-12T17:55:47.263
> 
> 标签：python, sql-server, pywin32, adodbapi

我正在使用 Python 和 pywin32 的 adodbapi 编写脚本来创建 SQL Server 数据库及其所有关联的表、视图和过程。问题在于 Python 的 DBAPI 要求将 cursor.execute() 包装在仅由 cursor.commit() 提交的事务中，并且您不能在用户事务中执行删除或创建数据库语句。关于如何解决这个问题的任何想法？

编辑：

似乎没有任何类似于 adodbapi 的 connect() 方法或其 cursor() 方法的自动提交参数。我很乐意使用 pymssql 而不是 adodbapi，但它会将 char 和 varchar 数据类型截断为 255 个字符。

我在发布之前确实尝试过这个；这是追溯。

```
Traceback (most recent call last):
  File "demo.py", line 39, in <module>
    cur.execute("create database dummydatabase")
  File "C:\Python26\lib\site-packages\adodbapi\adodbapi.py", line 713, in execute
    self._executeHelper(operation,False,parameters)
  File "C:\Python26\lib\site-packages\adodbapi\adodbapi.py", line 664, in _executeHelper
    self._raiseCursorError(DatabaseError,tracebackhistory)
  File "C:\Python26\lib\site-packages\adodbapi\adodbapi.py", line 474, in _raiseCursorError
    eh(self.conn,self,errorclass,errorvalue)
  File "C:\Python26\lib\site-packages\adodbapi\adodbapi.py", line 60, in standardErrorHandler
    raise errorclass(errorvalue)
adodbapi.adodbapi.DatabaseError: 
--ADODBAPI
Traceback (most recent call last):
   File "C:\Python26\lib\site-packages\adodbapi\adodbapi.py", line 650, in _executeHelper
    adoRetVal=self.cmd.Execute()
   File "<COMObject ADODB.Command>", line 3, in Execute
   File "C:\Python26\lib\site-packages\win32com\client\dynamic.py", line 258, in _ApplyTypes_
    result = self._oleobj_.InvokeTypes(*(dispid, LCID, wFlags, retType, argTypes) + args)
 com_error: (-2147352567, 'Exception occurred.', (0, u'Microsoft SQL Native Client', u'CREATE DATABASE statement not allowed within multi-statement transaction.', None, 0, -2147217900), None)
-- on command: "create database dummydatabase"
-- with parameters: None 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T18:55:13.843

“问题在于 Python 的 DBAPI 要求将 cursor.execute() 包装在仅由 cursor.commit() 提交的事务中”

“并且您不能在用户事务中执行删除或创建数据库语句。”

我不确定所有这些是否真的适用于所有 DBAPI 接口。

由于您没有显示错误消息，因此 ADODBAPI 接口可能不是这样。你真的试过了吗？如果是这样，您收到什么错误消息？

连接可能并不*总是*在创建“用户事务”。您通常可以打开连接`autocommit=True`以获取 DDL 样式的自动提交。

此外，您可能需要考虑使用不同的连接来运行 DDL。

例如，[http ://pymssql.sourceforge.net/ 显示 DDL 是这样执行的。](http://pymssql.sourceforge.net/)

```
import pymssql
conn = pymssql.connect(host='SQL01', user='user', password='password', database='mydatabase')
cur = conn.cursor()
cur.execute('CREATE TABLE persons(id INT, name VARCHAR(100))') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T19:10:19.340

如果数据库支持事务，adodbapi 连接对象`conn`会在每次提交后自动启动一个新事务。DB-API 要求默认关闭自动提交，它允许 API 方法将其重新打开，但我在 adodbapi 中没有看到。

您也许可以使用该`conn.adoConn`属性来解决此问题，使用 ADO api 而不是 DB-API 将您带出任何事务。让我知道这个是否奏效：

```
conn.adoConn.CommitTrans()
cursor.execute('CREATE DATABASE ...')
conn.adoConn.BeginTrans() 
```

这是[adodbapi commit() 方法](http://pywin32.cvs.sourceforge.net/viewvc/pywin32/pywin32/adodbapi/adodbapi.py?revision=1.9&view=markup#l_411)的来源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T18:28:29.020

在事务之外创建实际的数据库。我不熟悉python，但是必须有一种方法可以在数据库上执行用户给定的字符串，并将其与实际的 create db 命令一起使用。然后使用 adodbapi 执行所有表等并提交该事务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-01-11T10:11:36.567

我在尝试通过 adodbapi（例如 DBCC CHECKDB ...）运行命令时遇到了同样的问题，joeforker 的建议有所帮助。我仍然遇到的问题是 adodbapi 自动启动事务，因此无法在事务之外执行某些操作。

最后，我最终禁用了 adodbapi 的提交行为，如下所示：

```
self.conn = adodbapi.connect(conn_str)
# rollback the transaction that was started in Connection.__init__()
self.conn.adoConn.RollbackTrans() 
# prevent adodbapi from trying to rollback a transaction in Connection.close()
self.conn.supportsTransactions = False 
```

据我所知，这重新启用了标准 SQL Server 自动提交功能，即自动提交每个 SQL 语句。不利的一面是，如果我`Connection.commit()`不想在事务中运行某些东西，我无法再次启用事务（目前），因为当`supportsTransactions == False`.

# c# - 如何将十六进制转换为字节数组？

> ID：854012
> 
> 赞同：10
> 
> 时间：2009-05-12T17:56:40.537
> 
> 标签：c#, bytearray

我从 sql server 中复制并粘贴了这个二进制数据，目前我无法查询。

```
0xBAC893CAB8B7FE03C927417A2A3F6A60BD30FF35E250011CB25507EBFCD5223B 
```

如何将其转换回 C# 中的字节数组？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-05-12T18:00:37.787

像这样的东西：

```
using System;

public static class Parser
{    
    static void Main()
    {
        string hex = "0xBAC893CAB8B7FE03C927417A2A3F6A6"
                     + "0BD30FF35E250011CB25507EBFCD5223B";
        byte[] parsed = ParseHex(hex);
        // Just for confirmation...
        Console.WriteLine(BitConverter.ToString(parsed));
    }

    public static byte[] ParseHex(string hex)
    {
        int offset = hex.StartsWith("0x") ? 2 : 0;
        if ((hex.Length % 2) != 0)
        {
            throw new ArgumentException("Invalid length: " + hex.Length);
        }
        byte[] ret = new byte[(hex.Length-offset)/2];

        for (int i=0; i < ret.Length; i++)
        {
            ret[i] = (byte) ((ParseNybble(hex[offset]) << 4) 
                             | ParseNybble(hex[offset+1]));
            offset += 2;
        }
        return ret;
    }        

    static int ParseNybble(char c)
    {
        if (c >= '0' && c <= '9')
        {
            return c-'0';
        }
        if (c >= 'A' && c <= 'F')
        {
            return c-'A'+10;
        }
        if (c >= 'a' && c <= 'f')
        {
            return c-'a'+10;
        }
        throw new ArgumentException("Invalid hex digit: " + c);
    }
} 
```

（编辑：现在稍微高效一些 - 不需要子字符串......）

这可能`ParseNybble`会更有效率。例如，开关/案例*可能*更有效：

```
 static int ParseNybble(char c)
    {
        switch (c)
        {
            case '0': case '1': case '2': case '3': case '4':
            case '5': case '6': case '7': case '8': case '9':
                return c-'0';
            case 'A': case 'B': case 'C': case 'D': case 'E': case 'F':
                return c-'A'+10;
            case 'a': case 'b': case 'c': case 'd': case 'e': case 'f':
                return c-'a'+10;
        }
        throw new ArgumentException("Invalid hex digit: " + c);
    } 
```

或者可能是一个查找数组：

```
 // Omitted for brevity... I'm sure you get the gist
    private static readonly int[] NybbleLookup = BuildLookup();

    private int ParseNybble(char c)
    {
        if (c > 'f')
        {
            throw new ArgumentException("Invalid hex digit: " + c);
        }
        int ret = NybbleLookup[c];
        if (ret == -1)
        {
            throw new ArgumentException("Invalid hex digit: " + c);
        }
        return ret;
    } 
```

我没有对这些中的任何一个进行基准测试，我也不知道哪个是最快的。当前的解决方案可能是最简单的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-12T19:50:59.150

考虑利用已经公开了执行十六进制转换能力的框架类，例如 XmlReader：

```
public static byte[] HexToBytes(this string hexEncodedBytes, int start, int end)
{
    int length = end - start;
    const string tagName = "hex";
    string fakeXmlDocument = String.Format("<{1}>{0}</{1}>",
                           hexEncodedBytes.Substring(start, length),
                           tagName);
    var stream = new MemoryStream(Encoding.ASCII.GetBytes(fakeXmlDocument));
    XmlReader reader = XmlReader.Create(stream, new XmlReaderSettings());
    int hexLength = length / 2;
    byte[] result = new byte[hexLength];
    reader.ReadStartElement(tagName);
    reader.ReadContentAsBinHex(result, 0, hexLength);
    return result;
} 
```

用法：

```
string input = "0xBAC893CAB8B7FE03C927417A2A3F6A60BD30FF35E250011CB255";
byte[] bytes = input.HexToBytes(2, input.Length); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-12T18:00:35.803

简单的：

```
string hexnum = "0000000F"; // Represents 15
int value = int.Parse(hexnum, System.Globalization.NumberStyles.HexNumber); 
```

您所要做的就是让一个 int 将十六进制数分成 8 个十六进制数字组（每个十六进制数字为 4 位，CLR int 类型为 32 位，因此每个 int 有 8 个数字）。还有一个 byte.Parse() 的工作方式相同，但一次传入两个十六进制数字。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-12T18:31:14.803

像这样的东西：

```
 public byte[] ParseHexString(string text)
    {
        if ((text.Length % 2) != 0)
        {
            throw new ArgumentException("Invalid length: " + text.Length);
        }

        if (text.StartsWith("0x", StringComparison.InvariantCultureIgnoreCase))
        {
            text = text.Substring(2);
        }

        int arrayLength = text.Length / 2;
        byte[] byteArray = new byte[arrayLength];
        for (int i = 0; i < arrayLength; i++)
        {
            byteArray[i] = byte.Parse(text.Substring(i*2, 2), NumberStyles.HexNumber);
        }

        return byteArray;
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-12T18:00:32.373

您需要稍微修改一下（例如，跳过前两个字符），但它确实处理字符串中的空格：

```
 /// <summary>
    /// Decodes a hex string, ignoring all non-hex characters, and stores
    /// the decodes series of bytes into the shared buffer. This returns
    /// the number of bytes that were decoded.
    /// <para>Hex characters are [0-9, a-f, A-F].</para>
    /// </summary>
    /// <param name="hexString">String to parse into bytes.</param>
    /// <param name="buffer">Buffer into which to store the decoded binary data.</param>
    /// <returns>The number of bytes decoded.</returns>
    private static int DecodeHexIntoBuffer(string hexString, byte[] buffer)
    {
        int count = 0;

        bool haveFirst = false;
        bool haveSecond = false;
        char first = '0';
        char second = '0';

        for (int i = 0; i < hexString.Length; i++)
        {
            if (!haveFirst)
            {
                first = hexString[i];
                haveFirst = char.IsLetterOrDigit(first);

                // we have to continue to the next iteration
                // or we will miss characters
                continue;
            }

            if (!haveSecond)
            {
                second = hexString[i];
                haveSecond = char.IsLetterOrDigit(second);
            }

            if (haveFirst && haveSecond)
            {
                string hex = "" + first + second;

                byte nextByte;
                if (byte.TryParse(hex, NumberStyles.HexNumber, null, out nextByte))
                {
                    // store the decoded byte into the next slot of the buffer
                    buffer[count++] = nextByte;
                }

                // reset the flags
                haveFirst = haveSecond = false;
            }
        }

        return count;
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-10-12T14:21:36.277

实际上，有一种更简单的方法可以一次将两个字符转换为一个字节：

```
 /// <summary>
    /// This will convert a hex-encoded string to byte data
    /// </summary>
    /// <param name="hexData">The hex-encoded string to convert</param>
    /// <returns>The bytes that make up the hex string</returns>
    public static byte[] FromHex(string hexData)
    {
        List<byte> data = new List<byte>();
        string byteSet = string.Empty;
        int stringLen = hexData.Length;
        int length = 0;
        for (int i = 0; i < stringLen; i = i + 2)
        {
            length = (stringLen - i) > 1 ? 2 : 1;
            byteSet = hexData.Substring(i, length);

            // try and parse the data
            data.Add(Convert.ToByte(byteSet, 16 /*base*/));
        } // next set

        return data.ToArray();
    } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-09T08:16:52.747

缓慢而有趣的方式：D

```
public static byte[] StringToByteArray(string hex)
{
    hex = hex.Replace(" ", "");
    hex = hex.Replace(":", "");
    return Enumerable.Range(0, hex.Length)
            .Where(x => x % 2 == 0)
            .Select(x => Convert.ToByte(hex.Substring(x, 2), 16))
            .ToArray();
} 
```

-jD

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-09-30T18:31:18.530

我将它用于 C#，来自 Java 中的类似代码。

```
 private static char[] hexdigit = "0123456789abcdef".ToCharArray();

    public static string hexlify(string argbuf) {
        int arglen = argbuf.Length;
        char[] argca = argbuf.ToCharArray ();
        StringBuilder retbuf = new StringBuilder(arglen * 2);
        for (int i = 0; i < arglen; i++) {
            char ch = argca[i];
            retbuf.Append(hexdigit[(ch >> 4) & 0xF]);
            retbuf.Append(hexdigit[ch & 0xF]);
        }
        return retbuf.ToString();
    }

    public static string unhexlify(string argbuf) {
        int arglen = argbuf.Length;
        if (arglen % 2 != 0) {
            throw new ArgumentOutOfRangeException ("Odd-length string");
        }
        char[] argca = argbuf.ToCharArray ();
        StringBuilder retbuf = new StringBuilder(arglen / 2);
        for (int i = 0; i < arglen; i += 2) {
            int top = Convert.ToInt32 (argca[i].ToString (), 16);
            int bot = Convert.ToInt32 (argca[i + 1].ToString (), 16);
            if (top == -1 || bot == -1) {
                throw new ArgumentOutOfRangeException ("Non-hexadecimal digit found");
            }
            retbuf.Append((char) ((top << 4) + bot));
        }
        return retbuf.ToString();
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-03-10T09:54:04.427

也许这个很可爱！

```
string source = "Hello World!";
 using (SHA256 sha256Hash = SHA256.Create())
 {
     //From String to byte array
     byte[] sourceBytes = Encoding.UTF8.GetBytes(source);
     byte[] hashBytes = sha256Hash.ComputeHash(sourceBytes);
     string hash = BitConverter.ToString(hashBytes).Replace("-", String.Empty);
     Console.WriteLine("The SHA256 hash of " + source + " is: " + hash);
 } 
```

# ant - Ant exec 重构

> ID：854013
> 
> 赞同：7
> 
> 时间：2009-05-12T17:56:54.187
> 
> 标签：ant, refactoring

我的 build.xml 中有这段代码：

```
 <exec executable="cmd" osfamily="winnt">
        <arg value="/c"/>
        <arg value="xsltproc\bin\xsltproc.exe"/>
        <arg value="--xinclude"/>
        <arg value="-o"/>
        <arg value="dist/html/main.html"/>
        <arg value="xsl/html/docbook.xsl"/>
        <arg value="xml/main.xml"/>
    </exec>
    <exec executable="xsltproc" osfamily="unix">
        <arg value="--xinclude"/>
        <arg value="-o"/>
        <arg value="dist/html/main.html"/>
        <arg value="xsl/html/docbook.xsl"/>
        <arg value="xml/main.xml"/>
    </exec> 
```

序列是相同的......我想知道如何重构这个小片段以使其保持干燥。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-12T18:02:18.093

也许尝试使用带有 arg-line 的公共位的属性？像这样的东西：

```
<property name="xslt.common" value="--xinclude -o dist/html/main.html xsl/html/docbook.xsl xml/main.xml"/>
<exec executable="cmd" osfamily="winnt">
    <arg value="/c"/>
    <arg value="xsltproc\bin\xsltproc.exe"/>
    <arg line="${xslt.common}"/>
</exec>
<exec executable="xsltproc" osfamily="unix">
    <arg line="${xslt.common}"/>
</exec> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-12T18:05:51.117

定义一个[宏](http://ant.apache.org/manual/Tasks/macrodef.html)。

您可以将元素中的共享部分全局化，并有条件地执行特定部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T19:30:25.767

如果您通过 PATH 环境变量提供 xsltproc.exe，我**认为Unix 版本将在 NT 下工作。**您可以尝试删除 osfamily 并查看。

# ruby-on-rails - 更好的替代默认 Rails 脚手架样式表：scaffold.css？

> ID：854015
> 
> 赞同：10
> 
> 时间：2009-05-12T17:57:18.850
> 
> 标签：ruby-on-rails, stylesheet, scaffolding

我正在寻找比标准scaffold.css 更具吸引力的替代品？

有没有人遇到过一个样式表，它专门设计为比内置的脚手架.css 更有吸引力、更简洁的替代品？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-13T21:26:37.487

I'm going to assume the others are answering the wrong question with their focus on scaffold generation and guess that you really just want more attractive css.

I'd suggest [blueprint css framework](http://www.blueprintcss.org/) which has fairly attractive defaults. It's not specificly designed to replace scaffold.css but it doesn't take much to make it work.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-12T21:27:23.347

老实说，你不需要一个。为什么？因为你不应该使用它。脚手架正是它的本质，它可以在您构建应用程序时为您提供帮助，但不是长期的系统。

但是，如果您只是想要一些看起来不像 Playskool My First Web App 的研究生课程，请尝试 Ryan Bate 的（Railscasts Guy）Nifty Generator gem，网址为[http://github.com/ryanb/nifty-generators/tree /主人](http://github.com/ryanb/nifty-generators/tree/master)。它不仅看起来稍微好一点，而且还内置了一些漂亮的附加功能。

# php - 一个方法创建一个对象，我从另一个对象调用该方法

> ID：854020
> 
> 赞同：0
> 
> 时间：2009-05-12T17:59:16.553
> 
> 标签：php, cakephp

如果一个方法创建了一个对象并且我从另一个对象调用该方法，那么最后一个对象是否可以访问第一个对象的属性和方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T18:05:56.920

那里有一些无关的信息可能会让你感到困惑。

方法和对象（在这种情况下）彼此断开连接。所以问题就变成了，您是否将创建的对象存储在第二个对象可以访问的范围内？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T21:12:06.100

> 在路由器中，在一个方法中，包含的文件中是控制器代码。在模型和视图中，我需要访问控制器的属性和方法。在路由器中，在另一种方法中，我想将控制器对象返回给模型和视图。现在怎么办？？

如果我正确理解了这个问题，那么您对 ​​MVC 有点困惑。路由器类是一个蛋糕内部类，永远永远永远永远永远永远永远不会改变。而那些“*永远不会*”甚至不是复制粘贴的，它们是真正打字的。

其次，模型类甚至不知道任何称为控制器的东西。控制器*使用*模型，而不是相反。如果您的模型需要来自控制器的某些东西，请将其作为参数传递。除此之外的任何东西都只是糟糕的设计。

此外，可以从视图调用控制器操作，但强烈建议不要这样做。控制器是为视图准备所有数据的那个，因此视图不需要访问控制器（这有例外，超出了这个问题的范围）。

我建议您阅读一些[有关 MVC](http://book.cakephp.org/view/10/Understanding-Model-View-Controller)、[cake 的典型请求的](http://book.cakephp.org/view/21/A-Typical-CakePHP-Request)内容，并至少阅读[基本的博客教程](http://book.cakephp.org/view/219/Blog)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T18:01:26.707

如果它被返回/存储在某处，则可以访问公共字段和方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T18:07:09.287

**编辑：**鉴于标签的变化，这个答案不再相关。我已经留下它以保留评论...

**原答案：**

像这样？：

```
public MyObject CreateObject()
{
   return new MyObject() { FirstProperty = "Hello World" };
}

public Main()
{
    MyObject n = CreateObject();
    Console.WriteLine(n.FirstProperty);
} 
```

或这个？：

```
class Program
{
    MyObject _myObject;

    public void CreateObject()
    {
        _myObject = new MyObject() { FirstProperty = "Hello World" };
    }

    public Main()
    {
        Console.WriteLine(_myObject.FirstProperty);
    }
} 
```

在这两种情况下，请确保您可以访问对象的属性。如果这不是你的意思，我不确定如何回答你的问题，你需要澄清一下。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-12T18:11:20.170

仅当该方法保留对其创建的对象的引用时。

# javascript - 替换 iPhone 上的文档正文

> ID：854021
> 
> 赞同：3
> 
> 时间：2009-05-12T17:59:56.867
> 
> 标签：javascript, iphone, ajax, dom

我需要能够用从 ajax 请求获得的响应替换整个文档内容。

我尝试分配给`document.body.innerHTML`并尝试使用`document.write()`. 虽然这两者都可以在桌面 Safari 上使用，但我需要一个适用于 iPhone/iPod Touch 的解决方案。尝试修改`document.body.innerHTML`会产生异常 7，并且该`document.write()`函数在移动 safari 上未定义。

在等待表单发布完成时，我实际上是在显示一个活动指示器。我不希望 safari 在完整完成之前开始呈现响应，因为它可能需要一些时间才能完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-15T14:54:12.703

I just tested on my 3G iphone and it worked fine by setting document.body.innerHTML. I did use jQuery in my test to make sure the body was loaded before running the js:

```
<html>
<head>
<script type="text/javascript" src="/js/jquery.js"></script>
<script type="text/javascript">
$(document).ready(function () {  
    document.body.innerHTML = 'it worked';
});
</script>

</head>
<body>
This is a test
</body>
</html> 
```

# case - 无法在 Zsh 中更改字母的大小写

> ID：854025
> 
> 赞同：0
> 
> 时间：2009-05-12T18:00:37.457
> 
> 标签：case, zsh

我的 Zsh 中的代码

```
#!/bin/zsh
q=$1

open "http://mathworld.wolfram.com/$q.html" 
```

我将输入放入应用程序

```
triangle 
```

我在 Wolfram 遇到了一个错误，因为第一个字母一定很大。

**如何更改变量 q 中第一个字母的大小写？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T18:44:54.297

```
# q=triangle
# echo ${(C)q}
Triangle 
```

请参阅[参数扩展标志](http://chronos.cs.msu.su/zsh-man/zsh_15.html#SEC47)。

# c - 具有可变数量参数的函数

> ID：854027
> 
> 赞同：3
> 
> 时间：2009-05-12T18:00:50.077
> 
> 标签：c

考虑到这个功能

```
double avg(double v1,double v2,...)
{
    double sum=v1+v2;
    int counter=2;
    double temp;
    va_list pargs;
    va_start(pargs,v2);
    while((temp=va_arg(pargs,double))!=0.0)
    {
        sum+=temp;
        counter++;
    }
    va_end(pargs);
    return sum/counter;
} 
```

此调用`printf("%lf\n",avg(3.0,4.5,4.5,3.0,0.0))`返回正确的结果，但如果我删除`0.0`它打印的最后一个参数`-321738127312000000000.0000000`，但 sum 和 counter 具有正确的值。我有点不明白为什么我必须检查`!=0.0`并拥有最后一个参数`0.0`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-12T18:08:56.710

因为没有任何其他外部信息，函数不知道传入了多少参数。有几种策略可以解决这个问题：包含一个显式参数，即额外参数的数量，使用格式字符串来定义参数（例如与`printf`and`scanf`系列函数一样），或者使用诸如 0 之类的标记值来声明参数的结尾。

在您的情况下，如果您省略哨兵，该函数只会继续沿着堆栈向下移动，直到它达到零值，并且根据堆栈上的数据，您可能会得到截然不同的结果，所有这些都是不正确的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-12T18:08:15.400

如果您删除 != 0.0 您的程序会进行脏读，直到它读取一个归零的内存块。

你有两个选择：

*   指定您传递的参数数量，即 avg(3, 4.3, 2.0, 3.0);
*   指定终止符或标记，即 avg(4.3, 2.0, 3.0, 0.0);

**编辑**

出于好奇，我尝试使用可变参数宏来减轻对 esplicit 终止符的需求：

```
#define avg(v1, v2, ...) _avg((v1), (v2), __VA_ARGS__, 0.0)

double _avg(double v1,double v2,...) 
{ 
    /* same code, just prefixing function name with _ */ 
```

谨防：

```
avg(3.0, 3.0, 0.0, 100.0, 100.0) 
```

产生 3.0，因为您过早地终止了 va_list。您可以尝试使用另一个“奇怪”的哨兵值...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T18:08:53.030

最终，这与参数如何传递给函数有关。在堆栈上，参数只是按顺序加载，但函数无法知道它何时完成读取参数。不过，堆栈上仍有数据。

这就是 != 0.0 的测试所做的，它使用标记值 (0) 来标识系列的结尾。另一种方法是将项目数作为第一个参数传递给函数，然后使用 for 循环遍历变量 args。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-12T18:10:33.290

您需要有一个保护值 (0.0) 并检查它，因为编译器在构造堆栈帧时不一定要计算或分隔参数。因此，您可以继续读取（或写入）参数列表之外的数据，并进入包含返回指针、局部变量或其他任何内容的数据。如果您查看编译器对 va_arg 的实现，您可能会发现它所做的只是初始化一个超出变量地址 (v2) 的指针，然后将其增加您指定的大小 (double)。它会很乐意这样做，直到您遇到读取冲突。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-12T19:30:10.057

正如每个人都提到的那样，您的代码依赖于哨兵值来知道它何时到达列表的末尾。我个人认为对像avg()这样的函数使用哨兵是不合适的。我会更改函数以将参数的数量明确声明为第一个参数（如 dfa 所建议的那样）。

只有当您的域具有适合使用的值时，才可以使用标记值。例如，如果您只处理正数，那么您可以使用任何负数作为标记。但是，让 avg() 接受整个浮点数域更有意义。

# iphone - 解析 JSON 数组

> ID：854028
> 
> 赞同：0
> 
> 时间：2009-05-12T18:01:03.387
> 
> 标签：iphone, json, parsing, nsdictionary, touchjson

我使用 touchJSON 从 Web 服务中获取 JSON 数组。看起来像这样：

```
[{"icecream": {"title": "Banana"}}, {"icecream": {"title": "Strawberry"}}] 
```

我无法将其解析为 NSDictionary，因为 touchJSON 不支持 JSON 数组。

如何将我的 JSON 数组放入 NSDictionary？

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-12T18:09:51.903

您是否考虑尝试其他框架？[这](http://code.google.com/p/json-framework/)似乎支持 JSON 数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T18:11:31.760

[也许您可以使用JSON](http://www.json.org/)主页上列出的众多 JSON 实现中的另一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T19:36:20.483

您可以查看[JSON 网页](http://www.json.org/)，其中提供了用于解析数十种语言的代码的链接。但是，乍一看，您似乎正试图从一种类型的对象（JSON 数组）转换为另一种可能无法捕获所有关系（NSDictionary）的对象。完全免责声明：我以前从未使用过 NSDictionary。

# asp.net-mvc - 在 ASP.NET MVC 中，如何在动作中接收参数字典？

> ID：854034
> 
> 赞同：0
> 
> 时间：2009-05-12T18:02:16.207
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我的控制器中的大多数操作都有静态定义的参数列表，因此它们与标准教程示例很好地对应：

```
public ActionResult SomeAction(string id, string arg1, string arg2)
{
    // use arg1, arg2...
} 
```

但是我有一个麻烦的情况，视图动态地将表单组合在一起，因此参数集是完全动态的。我会对字符串名称到字符串值的映射感到满意。

我试过这个：

```
public ActionResult TroublesomeAction(string id, IDictionary<string, string> args)
{
    // loop through args...
} 
```

而是`args`通过了一个`null`. 获取我们这些天在错误消息中经常听到的著名“参数字典”的最简单方法是什么？

如果没有简单的方法，我将如何以艰难的方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T19:06:14.417

从控制器，我们可以访问：

```
Request.Form 
```

其中包含我需要的内容，因此无需映射到操作的参数。

# icalendar - iCal 附件中的 HTML

> ID：854036
> 
> 赞同：37
> 
> 时间：2009-05-12T18:02:30.950
> 
> 标签：icalendar

iCal 附件能否在描述属性中包含 HTML？如果是这样，有什么限制？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2009-05-13T18:07:46.283

经过一番研究和测试。答案是合格的不。意思是：你可以把它扔在那里，但你不应该。

RFC 并没有严格禁止它，但DESCRIPTION 不是HTML 内容的适当属性。

描述应该是您内容的纯文本版本。带有 text/html 的 FMTTYPE 声明的属性 X-ALT-DESC 是 HTML 内容的适当属性。

以下示例在 Outlook 和 Gmail/Google 日历中都有效，但 Thunderbird（w/Lightning）似乎不支持：（请原谅输出。它是由 Outlook 生成的）

```
X-ALT-DESC;FMTTYPE=text/html:<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//E
    N">\n<HTML>\n<HEAD>\n<META NAME="Generator" CONTENT="MS Exchange Server ve
    rsion 08.00.0681.000">\n<TITLE></TITLE>\n</HEAD>\n<BODY>\n<!-- Converted f
    rom text/rtf format -->\n\n<P DIR=LTR><SPAN LANG="en-us"></SPAN><SPAN LANG
    ="en-us"><FONT FACE="Calibri">Is this in HTML?</FONT></SPAN><SPAN LANG="en
    -us"></SPAN><SPAN LANG="en-us"></SPAN></P>\n\n<P DIR=LTR><SPAN LANG="en-us
    "><FONT FACE="Calibri">Bullets:</FONT></SPAN></P>\n\n<P DIR=LTR><SPAN LANG
    ="en-us"><FONT FACE="Calibri">1.&nbsp\;&nbsp\;&nbsp\;&nbsp\;&nbsp\;</FONT>
    </SPAN><SPAN LANG="en-us"></SPAN><SPAN LANG="en-us"></SPAN><SPAN LANG="en-
    us"></SPAN><SPAN LANG="en-us"></SPAN><SPAN LANG="en-us"> <FONT FACE="Calib
    ri">Test 1</FONT></SPAN></P>\n\n<P DIR=LTR><SPAN LANG="en-us"><FONT FACE="
    Calibri">2.&nbsp\;&nbsp\;&nbsp\;&nbsp\;&nbsp\;</FONT></SPAN><SPAN LANG="en
    -us"> <FONT FACE="Calibri">Test 2</FONT></SPAN><SPAN LANG="en-us"></SPAN><
    SPAN LANG="en-us"></SPAN></P>\n\n<P DIR=LTR><SPAN LANG="en-us"></SPAN><SPA
    N LANG="en-us"></SPAN><SPAN LANG="en-us"></SPAN></P>\n\n</BODY>\n</HTML> 
```

与电子邮件客户端中的任何 HTML 呈现一样，支持的标签和样式是有限的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-12T18:27:51.640

至少，描述中的 HTML 在 Outlook 中不会呈现为 HTML。如果您想包含 Outlook 可以识别的富文本，请从您的 Outlook 日历中导出一个事件，并查看它们的作用。我相信他们在描述中提供纯文本，然后为 HTML 创建另一个属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-08T20:09:03.607

对于像我一样在此页面上发生并希望专门为 Outlook 事件显示 HTML 内容的任何人...

正如接受的答案所述，说明不应包含任何 HTML。但是，您可以使用多部分/替代电子邮件将 HTML 放入事件内容（至少在 Outlook 中）。

```
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="_CAL_B598a1969806776.58663423_B_"
To: "Your Name" <yourname@example.com>
From: "John Doe" <john.doe@example.com>

--_CAL_B598a1969806776.58663423_B_
Content-Type: text/html; charset="iso - 8859 - 1"
Content-Transfer-Encoding: quoted-printable

<html><body>
<h1>Hello World</h1>
<p>This is a calendar event test</p>
</body></html>

--_CAL_B598a1969806776.58663423_B_
Content-Type: text/calendar; charset="utf - 8"; method=REQUEST
Content-Transfer-Encoding: base64

QkVHSU46VkNBTEVOREFSDQpNRVRIT0Q6UkVRVUVTVA0KUFJPRElEOi0vL1BIUC8vTWVl
dGluZ1JlcXVlc3QvL0VODQpWRVJTSU9OOjIuMA0KQkVHSU46VkVWRU5UDQpPUkdBTkla
RVI7Q049Sm9obiBEb2U6TUFJTFRPOmpvaG4uZG9lQGV4YW1wbGUuY29tDQpBVFRFTkRF
RTtST0xFPVJFUS1QQVJUSUNJUEFOVDtQQVJUU1RBVD1ORUVEUy1BQ1RJT047UlNWUD1U
UlVFO0NOPVlvdXIgTmFtZTpNQUlMVE86eW91cm5hbWVAZXhhbXBsZS5jb20NCkRFU0NS
SVBUSU9OOkhlbGxvIFdvcmxkIEV2ZW50DQpTVU1NQVJZOkhlbGxvIFdvcmxkIEV2ZW50
DQpEVFNUQVJUOjIwMTcwODE1VDE5MDAwMFoNCkRURU5EOjIwMTcwODE1VDIwMDAwMFoN
ClVJRDowMTIzNDU2Nzg5DQpDTEFTUzpQVUJMSUMNClBSSU9SSVRZOjUNCkRUU1RBTVA6
MjAxNzA4MDhUMjAwNDU3Wg0KVFJBTlNQOk9QQVFVRQ0KU1RBVFVTOkNPTkZJUk1FRA0K
U0VRVUVOQ0U6MA0KTE9DQVRJT046MTIzIEFueSBTdHJlZXQNCkJFR0lOOlZBTEFSTQ0K
QUNUSU9OOkRJU1BMQVkNCkRFU0NSSVBUSU9OOlJFTUlOREVSDQpUUklHR0VSO1JFTEFU
RUQ9U1RBUlQ6LVBUMTVNDQpFTkQ6VkFMQVJNDQpFTkQ6VkVWRU5UDQpFTkQ6VkNBTEVO
REFS

--_CAL_B598a1969806776.58663423_B_-- 
```

如果您想知道，Base64 编码转换为：

```
BEGIN:VCALENDAR
METHOD:REQUEST
PRODID:-//PHP//MeetingRequest//EN
VERSION:2.0
BEGIN:VEVENT
ORGANIZER;CN=John Doe:MAILTO:john.doe@example.com
ATTENDEE;ROLE=REQ-PARTICIPANT;PARTSTAT=NEEDS-ACTION;RSVP=TRUE;CN=Your Name:MAILTO:yourname@example.com
DESCRIPTION:Hello World Event
SUMMARY:Hello World Event
DTSTART:20170815T190000Z
DTEND:20170815T200000Z
UID:0123456789
CLASS:PUBLIC
PRIORITY:5
DTSTAMP:20170808T200457Z
TRANSP:OPAQUE
STATUS:CONFIRMED
SEQUENCE:0
LOCATION:123 Any Street
BEGIN:VALARM
ACTION:DISPLAY
DESCRIPTION:REMINDER
TRIGGER;RELATED=START:-PT15M
END:VALARM
END:VEVENT
END:VCALENDAR 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T18:18:05.307

根据[RFC](http://www.ietf.org/rfc/rfc2445.txt)，我认为这是可能的，但我怀疑这是一个好主意，因为它似乎有点安全漏洞。

# asp.net-mvc - 将数据从控制器返回到 asp.net mvc 中的视图

> ID：854054
> 
> 赞同：0
> 
> 时间：2009-05-12T18:07:14.373
> 
> 标签：asp.net-mvc

是否可以将复杂类型从控制器返回到 asp.net mvc 中的视图？到目前为止，我看过的所有示例都演示了传递简单的内在类型，如 int、string....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T18:18:23.090

您可以使用 ViewData Dictionary 将任何对象类型传递给视图。

只需放入您的控制器：

```
ViewData["example"] = (YourObject)data; 
```

然后在你看来：

```
<%= ((YourObject)ViewData["example"]).YourProperty %> 
```

如果你想将你的对象作为你的视图模型传递，那么：

```
return View("viewname", (YourObject)data); 
```

并确保您的视图如下所示：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<YourObject>" %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-12T20:52:59.063

您可以创建一个视图模型，然后在强类型视图中使用。您可以查看[Stephen Walther](http://stephenwalther.com/blog/archive/2009/04/13/asp.net-mvc-tip-50-ndash-create-view-models.aspx)的这篇博文，其中对此进行了解释。我一开始只是在 viewdata 中倾倒东西，但这很快就会让人困惑；）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T19:05:16.150

Use a ViewModel for your page.

you could use a view model containing both complex and simple objects, for example:

```
public class MyComplexViewModel
{
    public Address UserAddress { get; set;}
    public List<string> ValidZipCodes { get; set; }
    public string Message { get; set; }
} 
```

If your view inherits the generic ViewPage with something like this

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<MyComplexViewModel>" %> 
```

you could then in the view use the view model as Model.:

```
<%= Html.Encode(Model.UserAddress.SomeAddressProperty) %>
<%= Html.Encode(Model.ValidZipCodes.Count) %>
<%= Html.Encode(Model.Message) %> 
```

# iphone - MPMoviePlayer 音频专辑封面

> ID：854061
> 
> 赞同：1
> 
> 时间：2009-05-12T18:08:20.270
> 
> 标签：iphone, objective-c

我正在使用 MPMoviePlayer 流式传输 MP3 文件，并且我希望在背景中显示图像而不是默认的 Quicktime 徽标。

我找到了一种让图像覆盖播放器的方法，但问题是你必须点击图像外部才能显示播放器控件。当它们出现时，它们就在图像下方。

有人知道该怎么做吗？

谢谢，约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T03:53:51.413

backgroundColor 已被弃用，潜入私有视图结构是危险的。这对我来说很好：

```
 UIImageView *coverImageView = [[UIImageView alloc] initWithImage:coverImage];
        coverImageView.contentMode = UIViewContentModeScaleAspectFit;
        coverImageView.autoresizingMask = UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleHeight;
        coverImageView.frame = moviePlayerController.view.bounds;
        [moviePlayerController.view addSubview:coverImageView]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T18:31:58.403

iPhone 上的大多数应用程序都是由视图层次结构组成的。您可以向上到电影播放器​​的顶部根节点并递归地向下遍历子视图并将`hidden`值设置为 YES 直到找到正确的项目，然后`UIImageView`在该项目下方插入您的。这样，控件将保持在顶部，并且仍然响应用户输入。

您面临的风险是，如果 Apple 更改`MPMoviePlayer`UI 并打乱视图层次结构，但您可能会提前收到很多通知，并且可以修补您的应用程序以允许新的布局。

有一个问题是，这对于 appstore 应用程序是否符合犹太教规，但许多当前的应用程序（尤其是相机/拍照应用程序）正在这样做以摆脱标准的窗口元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-13T03:25:00.807

使用 AVAudioPlayer 并实现您自己的播放器 UI。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-04-23T05:13:02.567

它会工作检查这个

```
MPMoviePlayerController *moviePlayerController=[[MPMoviePlayerController alloc] initWithContentURL:theURL];
moviePlayerController.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"Default.png"]]; 
```

# php - 通过传递 URL 和 $_GET 参数来旋转 PDF？

> ID：854066
> 
> 赞同：0
> 
> 时间：2009-05-12T18:09:10.143
> 
> 标签：php, pdf, pdf-generation

我花了很多时间试图让 dompdf ( [http://www.digitaljunkies.ca/dompdf/](http://www.digitaljunkies.ca/dompdf/) ) 工作，但我一直遇到问题。我正在尝试从一个 PHP 脚本生成一个 PDF，该脚本会生成一个相当复杂的、填写好的 Web 表单。该脚本接受 $_GET 参数（记录号）并使用数据库中的数据相应地填写表单。将这些数据作为字符串或任何类型的值放入脚本中没有问题。我想知道将这种类型的数据转换为 PDF 的最佳方法是什么？

流程如下：用户填写表格并进入确认页面，我想添加一个“另存为 PDF”按钮。此时可能会发生以下两种情况之一，当前正在浏览器中显示的页面可以直接转为 pdf，或者可以使用 PHP 的 http_get( ) 函数并将 HTML 存储为字符串。从那里我在准备准确的 PDF 表示时遇到问题。

我听说过一些关于 fpdf 的讨论，但他们的例子并没有真正让我相信你可以使用动态数据作为源，但如果我对此有误，请纠正我。

任何输入将不胜感激。

——尼古拉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-12T19:07:28.893

好吧，我不知道 dompdf。奇怪的是，它使用了商业图书馆 (PDFlib) 或过时的 (?) 图书馆（CPDF，3 年未更新）。但是，只要它有效（概念很有趣）。

我不明白您所说的“使用动态数据作为源”是什么意思（或者更确切地说，我认为生成静态 PDF 没有意义！），但 FPDF 用于生成各种动态文档，例如电子商务产品中的发票。不过，我看到人们使用叉子（如[TCPDF](http://www.tcpdf.org/ "TCPDF - PDF 的 PHP 类")）来处理 Unicode 数据。

您无法使用 FPDF 将 HTML 页面转换为 PDF，但您可以使用带有数据的单元格的概念对布局进行非常精确的控制。
你可以在那里看到这样的代码：[http ://svn.prestashop.com/trunk/classes/PDF.php](http://svn.prestashop.com/trunk/classes/PDF.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T19:24:33.203

过去在遇到这个问题时，我使用 FPDF 在 PDF 模板上放置数据。然后，通过设置适当的 HTTP 标头，强制浏览器弹出“下载/另存为”框以供用户保存所述 PDF。

在适当扩展 FPDF/FPDI 的类中，使用以下内容从您已经创建的模板 PDF 生成 PDF ( [http://www.setasign.de/products/pdf-php-solutions/fpdi/](http://www.setasign.de/products/pdf-php-solutions/fpdi/) ) ：

```
$this->setSourceFile('pdf_template.pdf');
$template_page = $this->importPage(1, '/MediaBox');
$this->useTemplate($template_page, 0, 0); 
```

然后，让 FPDF 使用以下命令生成 PDF 用于输出：

```
$this->Output(); 
```

您还可以使用此处找到的脚本扩展 FPDF 以接受（有限的）HTML 格式：[http ://www.fpdf.org/en/script/script41.php](http://www.fpdf.org/en/script/script41.php)

# java - Java ResultSet getString 怪异？

> ID：854071
> 
> 赞同：0
> 
> 时间：2009-05-12T18:10:25.117
> 
> 标签：java, jdbc, resultset

这个让我难住了。

我有一个 java.sql.ResultSet ，我正在从中提取字符串值，如下所示：

```
address.setAddressLine1(rs.getString("AddressLine1"));
address.setAddressLine2(rs.getString("AddressLine2")); 
```

当我调试和检查 rs.getString("AddressLine1") 时，调试器说我有一个 30 个字符的字符串：“ATTN: ACCOUNTS PAYABLE”（删除了尾随空格）。但是，当我在此行之后立即检查我的地址对象时，它报告 addressLine1 是一个 30 个字符串的**空格**或其他一些空格。

当我调试和检查 rs.getString("AddressLine2") 时，调试器说我有一个 23 个字符的字符串：“10 Something Street”（删除了尾随空格）。当我在此行之后立即检查我的地址对象时，它报告 addressLine2 is **null**。

真正让我抓狂的是，这并没有发生在每个值上，只有少数值。

我的地址类正在存储带有完全愚蠢的 getter 和 setter 的普通旧字符串。真的，我保证！这是删除其他愚蠢属性的剪切和粘贴：

```
public class Address implements java.io.Serializable {

 private static final long serialVersionUID = 1L;
 private String addressLine1; 
 private String addressLine2; 

 public String getAddressLine1() {
  return addressLine1;
 }

 public void setAddressLine1(String addressLine1) {
  this.addressLine1 = addressLine1;
 }

 public String getAddressLine2() {
  return addressLine2;
 }

 public void setAddressLine2(String addressLine2) {
  this.addressLine2 = addressLine2;
 }
} 
```

这到底是怎么回事？这是某种奇怪的范围界定问题吗？它是某种字符编码的东西吗？

PS - 我正在使用 spring 的 SimpleJdbcTemplate，我正在与之交谈的“伪数据库”是通过 ODBC (sun.jdbc.odbc.JdbcOdbcDriver) 访问的 ProvideX。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-12T18:17:51.860

请注意 javadocs 关于 ResultSet 的说法：“为了获得最大的可移植性，每行中的结果集列应按从左到右的顺序读取，**并且每列应仅读取一次**。” 因此，当您使用调试器读取该列时，这是一次读取，然后您的代码会在调用 setAddressLine1 时再次读取它。

当您只查看 addressLine1 而不摆弄 ResultSet 时，它的行为如何？

# javascript - Jquery 自动完成链式请求

> ID：854075
> 
> 赞同：6
> 
> 时间：2009-05-12T18:11:16.817
> 
> 标签：javascript, jquery, asp.net-mvc, autocomplete

我有一个包含两个输入字段 City 和 Venue 的页面。我有来自 [Devbridge](http://www.devbridge.com/projects/autocomplete/jquery/#download)的自动完成插件，非常适合城市领域。我现在想让它在场地领域工作。我到目前为止的javascript是：

```
<script type="text/javascript">
    $(document).ready(function() {
        $('#Event_City').autocomplete({
          serviceUrl: '<%=Url.Action("GetCities", "Search") %>',
          minChars:2,
          width: 300,
          delimiter: /(,|;)\s*/,
          deferRequestBy: 150, //miliseconds
          params: { country: 'Yes' },
        });
        $('#Event_Venue').autocomplete({
          serviceUrl: '<%=Url.Action("GetVenues", "Search") %>',
          minChars:2,
          width: 300,
          delimiter: /(,|;)\s*/,
          deferRequestBy: 150, //miliseconds
          params: { city: $("#Event_City").val() },
        });
    });      
</script> 
```

第二个自动完成将一个附加参数（城市）传递给我的控制器上的操作。然后，我将使用它来限制我对那个城市的场馆的回应。接收到此参数，但不包含在#Event_City 中输入的当前值。相反，它包含默认值。

有谁知道在调用自动​​完成时如何评估价值？

我刚开始使用 Javascript，所以请保持温和。

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-12T18:58:37.550

@Ian Mckay - 为了让**场地**的自动完成功能根据城市进行过滤，您需要在城市的“更改”事件中绑定**如下**：

```
$(document).ready(function() {
    $('#Event_City').autocomplete({
      serviceUrl: '',
      minChars:2,
      width: 300,
      delimiter: /(,|;)\s*/,
      deferRequestBy: 150, //miliseconds
      params: { country: 'Yes' },
    }).change(function(){
        $('#Event_Venue').autocomplete({
          serviceUrl: '',
          minChars:2,
          width: 300,
          delimiter: /(,|;)\s*/,
          deferRequestBy: 150, //miliseconds
          params: { city: $("#Event_City").val() }
        });
    }); 
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-12T18:51:31.370

它包含默认值的原因是因为在加载页面时自动完成附加到文本框。为了使用新值更新它，插件需要为您提供一种方法来更新其参数对象的属性，或者允许您在第二个元素上销毁它，然后在每次用户更改第一个元素时重建它一个人的价值。您选择的 AutoComplete 库看起来非常轻量级（并不总是一件坏事......只是在你的情况下......）并且似乎不支持此功能。

我对你最好的建议是尝试另一个图书馆。我非常喜欢这个，因为它用途广泛（演示页面）：

[http://view.jquery.com/trunk/plugins/autocomplete/demo/](http://view.jquery.com/trunk/plugins/autocomplete/demo/)

# xcode - 如何在 Xcode 自动完成中从一个占位符跳转到下一个占位符？

> ID：854080
> 
> 赞同：6
> 
> 时间：2009-05-12T18:11:40.387
> 
> 标签：xcode

当 Xcode 为我自动完成一个方法时，它会给我蓝色的参数块。我总是进入第一个，然后我点击所有下一个，而不是通过键盘命令快速进入那里。我想有一些好消息要知道。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-12T18:14:26.217

默认为 Command-/，但您可以在 XCode 设置窗口的键绑定部分自定义它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-10-01T04:32:49.243

在 Xcode 3.2 (Snow Leopard) 中，您还可以使用 Tab 键在参数之间导航。就个人而言，我觉得这比 Command-/.

# php - Zend - 在数据库中存储会话数据

> ID：854092
> 
> 赞同：3
> 
> 时间：2009-05-12T18:15:11.413
> 
> 标签：php, zend-framework

寻找使用 Zend 框架在数据库中存储会话数据的示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-12T19:03:38.773

来自 Zend 自己，关于使用自定义会话处理程序保存会话数据：http: [//devzone.zend.com/article/141](http://devzone.zend.com/article/141)

否则，从 Zend 框架中尝试以下信息： http: [//framework.zend.com/wiki/display/ZFPROP/Zend_Session_SaveHandler_DbTable?showComments=false](http://framework.zend.com/wiki/display/ZFPROP/Zend_Session_SaveHandler_DbTable?showComments=false)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-12T19:15:22.220

您将需要考虑连接 Zend_Session_SaveHandler_DbTable

您可以在框架手册中找到其中的直接示例/指南

[http://framework.zend.com/manual/en/zend.session.savehandler.dbtable.html](http://framework.zend.com/manual/en/zend.session.savehandler.dbtable.html)

# iphone - 我的应用程序会在全球范围内使用，还是仅在我的国家/地区可用？

> ID：854093
> 
> 赞同：1
> 
> 时间：2009-05-12T18:15:31.507
> 
> 标签：iphone, app-store

几周后我将上传一个免费的应用程序到应用商店。我来自荷兰。它会在全球范围内提供，还是仅在此处提供？我很担心，因为 App Store 总是向我展示来自我国家的应用程序在顶部列表中，我真的怀疑有这么多应用程序来自这里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-12T18:21:49.233

由你决定。当您在 iTunes Connect 中提交您的应用程序以供审核时，系统会要求您选择哪些国家/地区的商店将列出该应用程序。

# php - 通过 SMTP 发送的两封电子邮件

> ID：854095
> 
> 赞同：0
> 
> 时间：2009-05-12T18:15:54.127
> 
> 标签：php, email, smtp

我使用了两个 PHP 电子邮件脚本并通过我的 SMTP 服务器对其进行路由，尽管它发送了两封相同的电子邮件。

当我使用 mail() 时，这不会发生，但我更愿意使用 SMTP。

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T19:10:55.690

如果您多次设置“收件人”和/或“收件人”标头，SMTP 服务器会将其解释为单独的电子邮件地址，因此您将收到多封电子邮件。

我建议使用 PEAR Mail 类。使用非常简单，可以为您处理大部分工作。它支持多个后端，包括 SMTP。同样，如果您想扩展您的类以发送 HTML 电子邮件，Mail_Mime 类可以很好地处理这个问题，提供设置纯文本正文和 HTML 正文的方法（以防收件人不支持 HTML）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T19:30:20.463

```
function send_email($from, $fromname, $to, $subject, $body, $alt = '')
{
    require_once('class.phpmailer.php');
    //include("class.smtp.php"); // optional, gets called from within class.phpmailer.php if not already loaded

    $mail = new PHPMailer(true); // the true param means it will throw exceptions on errors, which we need to catch

    $mail->IsSMTP(); // telling the class to use SMTP

    try
    {
        $mail->Host       = 'localhost'; // SMTP server
        $mail->SMTPDebug  = 2;                     // enables SMTP debug information (for testing)
        //$mail->AddReplyTo($from, $fromname);
        $mail->AddAddress($to);
        $mail->SetFrom($from, $fromname);
        $mail->Subject = $subject;
        //$mail->AltBody = $alt; // optional - MsgHTML will create an alternate automatically
        $mail->MsgHTML($body);
        $mail->Send();
        echo 'Message Sent OK';
    }
    catch (phpmailerException $e)
    {
        echo $e->errorMessage(); //Pretty error messages from PHPMailer
    }
    catch (Exception $e)
    {
        echo $e->getMessage(); //Boring error messages from anything else!
    }
} 
```

这是目前的功能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-13T00:17:59.993

因此，如果您只使用 PHPMailer 而不编辑它的代码，那不是您的脚本的错。也许检查您的 SMTP 服务器的配置？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-13T00:28:20.250

根据您的代码，如果是错误的类，您可能会收到两次“消息发送成功”（我不明白为什么会发生这种情况）。如果您不这样做，那么我会查看您的 SMTP 服务器（可能通过致电支持）。

我假设您已禁用回复以在这种情况下将其排除为原因？注意：我并不是说这会影响任何事情（除了您可能被归类为垃圾邮件）。

顺便说一句，我前段时间从 PHPMailer 转到[Swift Mailer并且从未回头。](http://swiftmailer.org/)如果您没有从支持中获得任何快乐，那么我至少会尝试使用 Swift Mailer 进行测试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-13T00:40:13.660

我同意 da5id 所说的，你为什么不把第二条错误信息拿出来。您是否进一步检查了接收者是否真的收到 2 条消息？

# iphone - CGAffineTransformMakeRotation() 的成本是多少？

> ID：854100
> 
> 赞同：0
> 
> 时间：2009-05-12T18:18:10.923
> 
> 标签：iphone, uikit

这是一个非常耗费成本的功能，会影响我的表现吗？我猜他们将那个用于主屏幕上的摆动按钮+核心动画。我只是想在开始浪费时间之前知道；）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-12T18:25:11.957

这似乎不太可能是一个性能问题——它可以解决像余弦、正弦和一些乘法这样的问题。不要一秒钟调用它数千次，你会没事的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-12T19:01:42.007

非常（非常）少。这也是您可以轻松衡量自己的东西；有关实施高分辨率计时的示例/信息，请参见以下 URL：

*   [http://developer.apple.com/qa/qa2004/qa1398.html](http://developer.apple.com/qa/qa2004/qa1398.html)
*   [http://code.google.com/p/plinstrument/source/browse/trunk/Source/PLInstrumentTime.h](http://code.google.com/p/plinstrument/source/browse/trunk/Source/PLInstrumentTime.h)
*   [http://code.google.com/p/plinstrument/source/browse/trunk/Source/PLInstrumentTime.m](http://code.google.com/p/plinstrument/source/browse/trunk/Source/PLInstrumentTime.m)
*   [http://code.google.com/p/plinstrument/](http://code.google.com/p/plinstrument/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T18:22:24.007

与所有事物一样，这取决于您使用它的方式和数量。它一直用于游戏开发，iPhone 非常适合。CoreAnimation 也非常快。如果您对此感到担心，我的建议是采用 Apple 提供的示例应用程序之一并通过 Instruments 运行它，以执行您自己的一些基准测试，看看它们是否可以满足您的需求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-12T18:53:29.557

所有 CGAffineTransformMakeRotation() 所做的只是为常规的旧 CGAffineTransform 填充矩阵。如果您认为您可以自己更快地填充（或预填充）矩阵，那么就去做吧（如果这还没有进行超级优化，我会感到非常惊讶）。

然后，当需要进行应用转换的实际工作时，我很确定 GPU 被告知要处理它，这样它就会运行得很快，并且你的主 CPU 不应该受到太大的影响。

如果你真的很担心，那么在 OpenGL 之上的 2D 空间中进行转换，以确保它是硬件优化的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-12T19:17:46.317

> 我只想在开始浪费时间之前知道

优化系统而不是个别线路。谁知道您的代码将调用转换多少次。最好让整个系统工作，对其进行分析，然后优化太慢的部分。

不要担心人们告诉您的个别呼叫速度很慢。如果您的代码很慢，请将此信息用作指针，但始终查看代码中的操作方式。

# php - 多个 PHP 会话

> ID：854105
> 
> 赞同：18
> 
> 时间：2009-05-12T18:18:37.757
> 
> 标签：php, session

我将为一个已经在同一域/服务器上运行另一个 PHP 应用程序的网站构建一个 PHP 应用程序。我的应用程序当然会使用会话，我不希望我的会话干扰现有的应用程序。例如，如果我想使用 $_SESSION['username']，可能其他应用程序也使用 $_SESSION['username']，这可能是个问题。我不是在寻找额外的安全层，我相信与我共享主机的应用程序。我只是想避免错误。

一种方法是执行 $_SESSION['MY_APP_NAME']['username'] 之类的操作，但我想知道是否有更简单的方法。

我在 PHP 文档中看到有一个名为“session_module_name”的函数。这个名字听起来不错，但文档并没有真正解释它的用途。

有什么建议吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-05-12T18:20:29.017

有一种更简单的方法：[session_name](http://us.php.net/session_name)。

在调用`session_start();`调用之前[`session_name("something");`](http://www.php.net/session_name)（您将某些内容更改为您想要调用的任何内容）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-17T02:02:42.323

另一件可以帮助您保持应用程序独立的事情是将会话存储移动到另一个位置，或者`session.save_path`在 php.ini 中设置到您选择的文件夹，或者[`session_save_path()`](http://www.php.net/session_save_path)在 session_start() 之前调用。

# c# - 解析 NHibernate 异常文本

> ID：854106
> 
> 赞同：2
> 
> 时间：2009-05-12T18:18:38.893
> 
> 标签：c#, .net, nhibernate

我试图让 NHibernate 为我加载一些记录（它已经部分设置，并且已经用于应用程序的其他部分），并且在处理 <any> 映射时，我遇到了这个异常：

```
[InvalidOperationException: any types do not have a unique referenced persister] 
```

有人可以帮我解析一下他们的意思吗？我可以为这句话想到许多完全不同的含义。我可以将第一部分解释为：

*   用 <any> 声明的类型不允许有 URP，但你的有
*   用 <any> 声明的类型必须有 URP，但你的没有
*   *您的任何*程序类型都应该...

对于其中任何一个，我可以将第二部分视为：

*   你有多个持久化器，但只允许一个
*   你没有持久化器，但需要一个
*   你有一个，但没有正确引用它

（是的，我仍然不清楚他们的大部分术语，但通常当我对某些部分不清楚时，错误消息至少足够清楚，我可以通过上下文弄清楚它们的含义。异常指向条目指向 NHibernate，而不是我的 .hbm.xml 文件中的错误映射或特定类中的属性。）

我查看了 API 文档，但在这里它们似乎完全没有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-12T18:23:45.720

我将其解释为您的第一个要点；我不明白你关于“第二部分”的问题。

# wcf - 从 silverlight 调用 https wcf 服务

> ID：854117
> 
> 赞同：1
> 
> 时间：2009-05-12T18:21:22.527
> 
> 标签：wcf, silverlight, https, silverlight-2.0

我正在尝试从 silverlight 访问 https wcf 服务。clientaccesspolicy 放在服务根目录上，我已经通过 silverlightspy 验证它显示它是有效的并且允许调用。我能够从桌面客户端成功调用该 web 服务，但是当尝试从 silverlight 调用时，它会抛出一个错误，调用....服务失败可能是跨域策略等无效....有什么想法吗？？？？这里也是服务跨域策略：

```
 <?xml version="1.0" encoding="utf-8"?>
<access-policy>  <cross-domain-access>    
<policy>
      <allow-from http-request-headers="SOAPAction">    
    <domain uri="*" />
      </allow-from> 
     <grant-to>   
     <resource include-subpaths="true" path="/" />
      </grant-to>  
  </policy>
  </cross-domain-access>
</access-policy> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T18:29:29.203

这是 silverlight + wcf 信息的重要来源：

[http://www.netfxharmonics.com/2008/11/Understanding-WCF-Services-in-Silverlight-2](http://www.netfxharmonics.com/2008/11/Understanding-WCF-Services-in-Silverlight-2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-13T20:03:55.283

您需要一个单独的域节点用于 https：

```
 <domain uri="https://*" /> 
```

从这篇文章：

[http://timheuer.com/blog/archive/2008/10/14/calling-secure-services-with-silverlight-2-ssl-https.aspx](http://timheuer.com/blog/archive/2008/10/14/calling-secure-services-with-silverlight-2-ssl-https.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-05-31T13:16:50.897

如果服务和 silverlight 应用程序是从同一个网站提供的，并且您使用的是 Silverlight 4，您可以通过以下方式在没有跨域策略文件的情况下完成此操作：

*   通过 https 访问 silverlight 应用程序
*   使用 ServiceReferences.ClientConfig 文件中的相对地址访问服务
*   在服务的 BasicHttpBinding 中使用传输模式安全性。

以下是 ServiceReferences.ClientConfig 的示例：

```
<configuration>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_IMyService" maxBufferSize="2147483647"
                    maxReceivedMessageSize="2147483647">
                  <!--Transport mode security (setup the same way on the server):-->
                    <security mode="Transport" />
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
          <!--Relative address (This is the part that requires SL4):-->
            <endpoint address="../Services/MyService.svc"
                binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IMyService"
                contract="MyApplication.MyService" name="BasicHttpBinding_IMyService" />
        </client>
    </system.serviceModel>
</configuration> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T18:24:30.383

你看过这里吗？

[从 Silverlight 调用 WCF 服务](https://stackoverflow.com/questions/122144/calling-wcf-service-from-silverlight/123432)

# mysql - 在 MySQL 中查找重复记录

> ID：854128
> 
> 赞同：703
> 
> 时间：2009-05-12T18:24:21.757
> 
> 标签：mysql, duplicates

我想提取 MySQL 数据库中的重复记录。这可以通过以下方式完成：

```
SELECT address, count(id) as cnt FROM list
GROUP BY address HAVING cnt > 1 
```

结果是：

```
100 MAIN ST    2 
```

我想拉它，以便它显示重复的每一行。就像是：

```
JIM    JONES    100 MAIN ST
JOHN   SMITH    100 MAIN ST 
```

关于如何做到这一点的任何想法？我试图避免做第一个，然后在代码中使用第二个查询查找重复项。

* * *

## 回答 #1

> 赞同：729
> 
> 时间：2009-05-12T18:33:40.133

关键是重写这个查询，以便它可以用作子查询。

```
SELECT firstname, 
   lastname, 
   list.address 
FROM list
   INNER JOIN (SELECT address
               FROM   list
               GROUP  BY address
               HAVING COUNT(id) > 1) dup
           ON list.address = dup.address; 
```

* * *

## 回答 #2

> 赞同：395
> 
> 时间：2012-03-19T17:57:56.147

```
SELECT date FROM logs group by date having count(*) >= 2 
```

* * *

## 回答 #3

> 赞同：212
> 
> 时间：2009-05-12T18:49:49.547

为什么不只是`INNER JOIN`桌子本身？

```
SELECT a.firstname, a.lastname, a.address
FROM list a
INNER JOIN list b ON a.address = b.address
WHERE a.id <> b.id 
```

`DISTINCT`如果地址可能存在两次以上，则需要A。

* * *

## 回答 #4

> 赞同：59
> 
> 时间：2014-01-08T13:45:14.083

我尝试了为这个问题选择的最佳答案，但这让我有些困惑。我实际上只需要在我的表中的一个字段上使用它。[此链接](http://www.askbeen.com/73571/how-to-find-duplicate-records-in-mysql-table)中的以下示例对我来说效果很好：

```
SELECT COUNT(*) c,title FROM `data` GROUP BY title HAVING c > 1; 
```

* * *

## 回答 #5

> 赞同：47
> 
> 时间：2011-06-20T10:34:41.790

```
select `cityname` from `codcities` group by `cityname` having count(*)>=2 
```

这是您要求的类似查询，它也 200% 工作且简单。享受！！！

* * *

## 回答 #6

> 赞同：47
> 
> 时间：2018-03-01T12:37:57.437

这不是更容易吗：

```
SELECT *
FROM tc_tariff_groups
GROUP BY group_id
HAVING COUNT(group_id) >1 
```

?

* * *

## 回答 #7

> 赞同：36
> 
> 时间：2012-01-26T00:39:48.783

**使用此查询按电子邮件地址**查找重复用户...

```
SELECT users.name, users.uid, users.mail, from_unixtime(created)
FROM users
INNER JOIN (
  SELECT mail
  FROM users
  GROUP BY mail
  HAVING count(mail) > 1
) dupes ON users.mail = dupes.mail
ORDER BY users.mail; 
```

* * *

## 回答 #8

> 赞同：22
> 
> 时间：2013-03-02T07:04:29.633

我们可以发现重复项也取决于多个字段。对于这些情况，您可以使用以下格式。

```
SELECT COUNT(*), column1, column2 
FROM tablename
GROUP BY column1, column2
HAVING COUNT(*)>1; 
```

* * *

## 回答 #9

> 赞同：14
> 
> 时间：2012-01-25T20:00:09.523

查找重复*地址*比看起来要复杂得多，尤其是在您需要准确性的情况下。在这种情况下，一个 MySQL 查询是不够的......

我在[SmartyStreets](http://smartystreets.com)工作，我们在那里解决验证和重复数据删除等问题，我已经看到了许多具有类似问题的不同挑战。

有几个第三方服务会为您在列表中标记重复项。仅使用 MySQL 子查询执行此操作不会考虑地址格式和标准的差异。USPS（针对美国地址）有一些制定这些标准的指导方针，但只有少数供应商获得了执行此类操作的认证。

因此，我建议您的最佳答案是将表格导出为 CSV 文件，例如，然后将其提交给有能力的列表处理器。[LiveAddress](https://smartystreets.com/products/liveaddress-lists)就是其中之一，它会在几秒钟到几分钟内自动为您完成。它将使用一个名为“Duplicate”的新字段和其中的值来标记重复的行`Y`。

* * *

## 回答 #10

> 赞同：13
> 
> 时间：2012-06-14T04:14:30.453

另一种解决方案是使用表别名，如下所示：

```
SELECT p1.id, p2.id, p1.address
FROM list AS p1, list AS p2
WHERE p1.address = p2.address
AND p1.id != p2.id 
```

在这种情况下，您真正​​要做的就是获取原始*列表*，从中创建两个**p**表示表 - ***p** 1*和***p** 2*，然后在地址列上执行连接（第 3 行）。第 4 行确保同一记录不会在您的结果集中多次出现（“重复的重复项”）。

* * *

## 回答 #11

> 赞同：12
> 
> 时间：2009-05-12T18:28:47.083

效率不会很高，但应该可以：

```
SELECT *
FROM list AS outer
WHERE (SELECT COUNT(*)
        FROM list AS inner
        WHERE inner.address = outer.address) > 1; 
```

* * *

## 回答 #12

> 赞同：11
> 
> 时间：2009-05-12T18:36:31.703

这将在一个表传递中选择重复项，没有子查询。

```
SELECT  *
FROM    (
        SELECT  ao.*, (@r := @r + 1) AS rn
        FROM    (
                SELECT  @_address := 'N'
                ) vars,
                (
                SELECT  *
                FROM
                        list a
                ORDER BY
                        address, id
                ) ao
        WHERE   CASE WHEN @_address <> address THEN @r := 0 ELSE 0 END IS NOT NULL
                AND (@_address := address ) IS NOT NULL
        ) aoo
WHERE   rn > 1 
```

这个查询实际上模拟`ROW_NUMBER()`了存在于`Oracle`和`SQL Server`

详情请看我博客中的文章：

*   [**分析函数：SUM、AVG、ROW_NUMBER**](http://explainextended.com/2009/03/08/analytic-functions-sum-avg-row_number/) - 在`MySQL`.

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2015-03-17T10:28:46.383

这还将向您显示有多少重复项，并将在没有连接的情况下对结果进行排序

```
SELECT  `Language` , id, COUNT( id ) AS how_many
FROM  `languages` 
GROUP BY  `Language` 
HAVING how_many >=2
ORDER BY how_many DESC 
```

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2009-05-12T19:09:28.127

```
 SELECT firstname, lastname, address FROM list
 WHERE 
 Address in 
 (SELECT address FROM list
 GROUP BY address
 HAVING count(*) > 1) 
```

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2012-12-01T12:06:33.437

```
select * from table_name t1 inner join (select distinct <attribute list> from table_name as temp)t2 where t1.attribute_name = t2.attribute_name 
```

对于您的桌子，它将类似于

```
select * from list l1 inner join (select distinct address from list as list2)l2 where l1.address=l2.address 
```

此查询将为您提供列表表中所有不同的地址条目...如果您有任何主键值作为名称等，我不确定这将如何工作。

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2012-12-15T04:31:42.143

最快的重复删除查询程序：

```
/* create temp table with one primary column id */
INSERT INTO temp(id) SELECT MIN(id) FROM list GROUP BY (isbn) HAVING COUNT(*)>1;
DELETE FROM list WHERE id IN (SELECT id FROM temp);
DELETE FROM temp; 
```

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2013-04-12T10:05:20.920

就个人而言，这个查询已经解决了我的问题：

```
SELECT `SUB_ID`, COUNT(SRV_KW_ID) as subscriptions FROM `SUB_SUBSCR` group by SUB_ID, SRV_KW_ID HAVING subscriptions > 1; 
```

该脚本的作用是显示在表中多次存在的所有订户 ID 以及找到的重复项的数量。

这是表格列：

```
| SUB_SUBSCR_ID | int(11)     | NO   | PRI | NULL    | auto_increment |
| MSI_ALIAS     | varchar(64) | YES  | UNI | NULL    |                |
| SUB_ID        | int(11)     | NO   | MUL | NULL    |                |    
| SRV_KW_ID     | int(11)     | NO   | MUL | NULL    |                | 
```

希望对您也有帮助！

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2013-01-25T05:56:53.803

```
SELECT t.*,(select count(*) from city as tt where tt.name=t.name) as count FROM `city` as t where (select count(*) from city as tt where tt.name=t.name) > 1 order by count desc 
```

用您的表替换**城市。**将**名称**替换为您的字段名称

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2009-05-12T18:46:07.180

```
 SELECT *
    FROM (SELECT  address, COUNT(id) AS cnt
    FROM list
    GROUP BY address
    HAVING ( COUNT(id) > 1 )) 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2018-02-09T07:36:42.713

```
 Find duplicate Records:

    Suppose we have table : Student 
    student_id int
    student_name varchar
    Records:
    +------------+---------------------+
    | student_id | student_name        |
    +------------+---------------------+
    |        101 | usman               |
    |        101 | usman               |
    |        101 | usman               |
    |        102 | usmanyaqoob         |
    |        103 | muhammadusmanyaqoob |
    |        103 | muhammadusmanyaqoob |
    +------------+---------------------+

    Now we want to see duplicate records
    Use this query:

   select student_name,student_id ,count(*) c from student group by student_id,student_name having c>1;

+--------------------+------------+---+
| student_name        | student_id | c |
+---------------------+------------+---+
| usman               |        101 | 3 |
| muhammadusmanyaqoob |        103 | 2 |
+---------------------+------------+---+ 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2021-05-24T20:47:05.283

我使用以下内容：

```
SELECT * FROM mytable
WHERE id IN (
  SELECT id FROM mytable
  GROUP BY column1, column2, column3
  HAVING count(*) > 1
) 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-08-06T20:32:36.393

要快速查看重复的行，您可以运行一个简单的查询

在这里，我正在查询表并列出所有具有相同 user_id、market_place 和 sku 的重复行：

```
select user_id, market_place,sku, count(id)as totals from sku_analytics group by user_id, market_place,sku having count(id)>1; 
```

要删除重复的行，您必须决定要删除哪一行。例如，具有较低 id（通常较旧）或其他一些日期信息的那个。就我而言，我只想删除较低的 id，因为较新的 id 是最新信息。

首先仔细检查是否会删除正确的记录。在这里，我在将被删除的重复项中选择记录（通过唯一 ID）。

```
select a.user_id, a.market_place,a.sku from sku_analytics a inner join sku_analytics b where a.id< b.id and a.user_id= b.user_id and a.market_place= b.market_place and a.sku = b.sku; 
```

然后我运行删除查询来删除欺骗：

```
delete a from sku_analytics a inner join sku_analytics b where a.id< b.id and a.user_id= b.user_id and a.market_place= b.market_place and a.sku = b.sku; 
```

备份，仔细检查，验证，验证备份然后执行。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2022-01-11T11:58:26.267

SELECT * FROM `bookings` WHERE DATE( `created_at`) = '2022-01-11' 并`code`在（`code`从`bookings` GROUP BY `code` HAVING COUNT( `code`) > 1中选择）按`id`DESC排序

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2015-01-02T12:55:18.003

`select address from list where address = any (select address from (select address, count(id) cnt from list group by address having cnt > 1 ) as t1) order by address`

内部子查询返回具有重复地址的行，然后外部子查询返回具有重复地址的地址列。外部子查询必须只返回一列，因为它用作运算符 '= any' 的操作数

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2015-01-14T11:02:28.517

[Powerlord 的答案](https://stackoverflow.com/a/854177/4073877)确实是最好的，我建议再做一个更改：使用 LIMIT 来确保 db 不会过载：

```
SELECT firstname, lastname, list.address FROM list
INNER JOIN (SELECT address FROM list
GROUP BY address HAVING count(id) > 1) dup ON list.address = dup.address
LIMIT 10 
```

如果没有 WHERE 并且在进行连接时使用 LIMIT 是一个好习惯。从小值开始，检查查询的重量，然后增加限制。

# jquery - ajax回调后JQuery slimbox重新绑定

> ID：854130
> 
> 赞同：1
> 
> 时间：2009-05-12T18:24:43.800
> 
> 标签：jquery, ajax, callback, slimbox

加载 ajax 内容后，我无法重新绑定 slimbox2。我意识到我需要在 ajax 加载时重新绑定函数，但我不知道该怎么做。我正在使用此代码生成外部内容。

```
$(document).ready(function() {

$('.content_box').hide();
$('.sf-menuUP a').click(function(){
$('.content_box').fadeIn('slow');
});

var hash = window.location.hash.substr(1);
var href = $('.sf-menuUP li a').each(function(){
    var href = $(this).attr('href');
    if(hash==href.substr(0,href.length-5)){
        var toLoad = hash+'.html #content';
        $('#content').load(toLoad)
    }                                           
});

$('.sf-menuUP li a').click(function(){

    var toLoad = $(this).attr('href')+' #content';
    $('#content').fadeOut('fast',loadContent);
    $('#load').remove();
    $('#wrapper').append('<span id="load">LOADING...</span>');
    $('#load').fadeIn('normal');
    window.location.hash = $(this).attr('href').substr(0,$(this).attr('href').length-5);
    function loadContent() {
        $('#content').load(toLoad,'',showNewContent())
    }
    function showNewContent() {
        $('#content').fadeIn('normal',hideLoader());
    }
    function hideLoader() {
        $('#load').fadeOut('normal');
    }
    return false;
}); 
```

});

我尝试添加

```
 // AUTOLOAD CODE BLOCK (MAY BE CHANGED OR REMOVED)
jQuery(function($) {
    $("a[rel^='lightbox']").slimbox({/* Put custom options here */}, null, function(el) {
        return (this == el) || ((this.rel.length > 8) && (this.rel == el.rel));
    });
}); 
```

到我脚本的底部，希望它会重新加载它。但没有运气。我读过 livequery 可以工作，但我不知道如何/在哪里/如何处理它。

我越来越绝望了。请问有人吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-12T18:36:21.097

我为您查看了[liveQuery](http://docs.jquery.com/Plugins/livequery)。这是您需要做的：

```
$("a[rel^='lightbox']").livequery(function(){ 
    $(this).slimbox({/* Put custom options here */}, null, function(el) {
            return (this == el) || ((this.rel.length > 8) && (this.rel == el.rel));
    }), function() {
        //remove slimbox? this is called when elements no longer match
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-08-01T04:43:57.037

我在尝试重新加载 slimbox 时遇到了同样的问题。为 slimbox 实现 livequery 就像 redonkeechong 所经历的那样破坏了画廊功能。

但我在 Slimbox 论坛上发现，您可以简单地将其添加到 AJAX 输出中。所以它看起来像...

```
<script type="text/javascript">
    $(document).ready(function() {
        $("a[rel^='lightbox']").slimbox({/* Put custom options here */}, null, function(el) {
                return (this == el) || ((this.rel.length > 8) && (this.rel == el.rel));
        });
    });
</script> 
```

或者，您可以将其保存到单独的文件中，并在 AJAX 调用后使用 getScript 方法...

`$.getScript('slimbox2/js/slimbox2.autoload.js')`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-13T05:39:42.853

叫我挑剔，但是当现在弹出时，下一个/上一个功能不起作用。livequery 也可以重新绑定这些吗？

这是 slimbox 的代码

```
/*!
    Slimbox v2.02 - The ultimate lightweight Lightbox clone for jQuery
    (c) 2007-2009 Christophe Beyls <http://www.digitalia.be>
    MIT-style license.
*/

(function($) {

    // Global variables, accessible to Slimbox only
    var win = $(window), options, images, activeImage = -1, activeURL, prevImage, nextImage, compatibleOverlay, middle, centerWidth, centerHeight, ie6 = !window.XMLHttpRequest,
        operaFix = window.opera && (document.compatMode == "CSS1Compat") && ($.browser.version >= 9.3), documentElement = document.documentElement,

    // Preload images
    preload = {}, preloadPrev = new Image(), preloadNext = new Image(),

    // DOM elements
    overlay, center, image, sizer, prevLink, nextLink, bottomContainer, bottom, caption, number;

    /*
        Initialization
    */

    $(function() {
        // Append the Slimbox HTML code at the bottom of the document
        $("body").append(
            $([
                overlay = $('<div id="lbOverlay" />')[0],
                center = $('<div id="lbCenter" />')[0],
                bottomContainer = $('<div id="lbBottomContainer" />')[0]
            ]).css("display", "none")
        );

        image = $('<div id="lbImage" />').appendTo(center).append(
            sizer = $('<div style="position: relative;" />').append([
                prevLink = $('<a id="lbPrevLink" href="#" />').click(previous)[0],
                nextLink = $('<a id="lbNextLink" href="#" />').click(next)[0]
            ])[0]
        )[0];

        bottom = $('<div id="lbBottom" />').appendTo(bottomContainer).append([
            $('<a id="lbCloseLink" href="#" />').add(overlay).click(close)[0],
            caption = $('<div id="lbCaption" />')[0],
            number = $('<div id="lbNumber" />')[0],
            $('<div style="clear: both;" />')[0]
        ])[0];
    });

    /*
        API
    */

    // Open Slimbox with the specified parameters
    $.slimbox = function(_images, startImage, _options) {
        options = $.extend({
            loop: false,                // Allows to navigate between first and last images
            overlayOpacity: 0.8,            // 1 is opaque, 0 is completely transparent (change the color in the CSS file)
            overlayFadeDuration: 400,       // Duration of the overlay fade-in and fade-out animations (in milliseconds)
            resizeDuration: 400,            // Duration of each of the box resize animations (in milliseconds)
            resizeEasing: "swing",          // "swing" is jQuery's default easing
            initialWidth: 250,          // Initial width of the box (in pixels)
            initialHeight: 250,         // Initial height of the box (in pixels)
            imageFadeDuration: 400,         // Duration of the image fade-in animation (in milliseconds)
            captionAnimationDuration: 400,      // Duration of the caption animation (in milliseconds)
            counterText: "Image {x} of {y}",    // Translate or change as you wish, or set it to false to disable counter text for image groups
            closeKeys: [27, 88, 67],        // Array of keycodes to close Slimbox, default: Esc (27), 'x' (88), 'c' (67)
            previousKeys: [37, 80],         // Array of keycodes to navigate to the previous image, default: Left arrow (37), 'p' (80)
            nextKeys: [39, 78]          // Array of keycodes to navigate to the next image, default: Right arrow (39), 'n' (78)
        }, _options);

        // The function is called for a single image, with URL and Title as first two arguments
        if (typeof _images == "string") {
            _images = [[_images, startImage]];
            startImage = 0;
        }

        middle = win.scrollTop() + ((operaFix ? documentElement.clientHeight : win.height()) / 2);
        centerWidth = options.initialWidth;
        centerHeight = options.initialHeight;
        $(center).css({top: Math.max(0, middle - (centerHeight / 2)), width: centerWidth, height: centerHeight, marginLeft: -centerWidth/2}).show();
        compatibleOverlay = ie6 || (overlay.currentStyle && (overlay.currentStyle.position != "fixed"));
        if (compatibleOverlay) overlay.style.position = "absolute";
        $(overlay).css("opacity", options.overlayOpacity).fadeIn(options.overlayFadeDuration);
        position();
        setup(1);

        images = _images;
        options.loop = options.loop && (images.length > 1);
        return changeImage(startImage);
    };

    /*
        options:    Optional options object, see jQuery.slimbox()
        linkMapper: Optional function taking a link DOM element and an index as arguments and returning an array containing 2 elements:
                the image URL and the image caption (may contain HTML)
        linksFilter:    Optional function taking a link DOM element and an index as arguments and returning true if the element is part of
                the image collection that will be shown on click, false if not. "this" refers to the element that was clicked.
                This function must always return true when the DOM element argument is "this".
    */
    $.fn.slimbox = function(_options, linkMapper, linksFilter) {
        linkMapper = linkMapper || function(el) {
            return [el.href, el.title];
        };

        linksFilter = linksFilter || function() {
            return true;
        };

        var links = this;

        return links.unbind("click").click(function() {
            // Build the list of images that will be displayed
            var link = this, startIndex = 0, filteredLinks, i = 0, length;
            filteredLinks = $.grep(links, function(el, i) {
                return linksFilter.call(link, el, i);
            });

            // We cannot use jQuery.map() because it flattens the returned array
            for (length = filteredLinks.length; i < length; ++i) {
                if (filteredLinks[i] == link) startIndex = i;
                filteredLinks[i] = linkMapper(filteredLinks[i], i);
            }

            return $.slimbox(filteredLinks, startIndex, _options);
        });
    };

    /*
        Internal functions
    */

    function position() {
        var l = win.scrollLeft(), w = operaFix ? documentElement.clientWidth : win.width();
        $([center, bottomContainer]).css("left", l + (w / 2));
        if (compatibleOverlay) $(overlay).css({left: l, top: win.scrollTop(), width: w, height: win.height()});
    }

    function setup(open) {
        $("object").add(ie6 ? "select" : "embed").each(function(index, el) {
            if (open) $.data(el, "slimbox", el.style.visibility);
            el.style.visibility = open ? "hidden" : $.data(el, "slimbox");
        });
        var fn = open ? "bind" : "unbind";
        win[fn]("scroll resize", position);
        $(document)[fn]("keydown", keyDown);
    }

    function keyDown(event) {
        var code = event.keyCode, fn = $.inArray;
        // Prevent default keyboard action (like navigating inside the page)
        return (fn(code, options.closeKeys) >= 0) ? close()
            : (fn(code, options.nextKeys) >= 0) ? next()
            : (fn(code, options.previousKeys) >= 0) ? previous()
            : false;
    }

    function previous() {
        return changeImage(prevImage);
    }

    function next() {
        return changeImage(nextImage);
    }

    function changeImage(imageIndex) {
        if (imageIndex >= 0) {
            activeImage = imageIndex;
            activeURL = images[activeImage][0];
            prevImage = (activeImage || (options.loop ? images.length : 0)) - 1;
            nextImage = ((activeImage + 1) % images.length) || (options.loop ? 0 : -1);

            stop();
            center.className = "lbLoading";

            preload = new Image();
            preload.onload = animateBox;
            preload.src = activeURL;
        }

        return false;
    }

    function animateBox() {
        center.className = "";
        $(image).css({backgroundImage: "url(" + activeURL + ")", visibility: "hidden", display: ""});
        $(sizer).width(preload.width);
        $([sizer, prevLink, nextLink]).height(preload.height);

        $(caption).html(images[activeImage][1] || "");
        $(number).html((((images.length > 1) && options.counterText) || "").replace(/{x}/, activeImage + 1).replace(/{y}/, images.length));

        if (prevImage >= 0) preloadPrev.src = images[prevImage][0];
        if (nextImage >= 0) preloadNext.src = images[nextImage][0];

        centerWidth = image.offsetWidth;
        centerHeight = image.offsetHeight;
        var top = Math.max(0, middle - (centerHeight / 2));
        if (center.offsetHeight != centerHeight) {
            $(center).animate({height: centerHeight, top: top}, options.resizeDuration, options.resizeEasing);
        }
        if (center.offsetWidth != centerWidth) {
            $(center).animate({width: centerWidth, marginLeft: -centerWidth/2}, options.resizeDuration, options.resizeEasing);
        }
        $(center).queue(function() {
            $(bottomContainer).css({width: centerWidth, top: top + centerHeight, marginLeft: -centerWidth/2, visibility: "hidden", display: ""});
            $(image).css({display: "none", visibility: "", opacity: ""}).fadeIn(options.imageFadeDuration, animateCaption);
        });
    }

    function animateCaption() {
        if (prevImage >= 0) $(prevLink).show();
        if (nextImage >= 0) $(nextLink).show();
        $(bottom).css("marginTop", -bottom.offsetHeight).animate({marginTop: 0}, options.captionAnimationDuration);
        bottomContainer.style.visibility = "";
    }

    function stop() {
        preload.onload = null;
        preload.src = preloadPrev.src = preloadNext.src = activeURL;
        $([center, image, bottom]).stop(true);
        $([prevLink, nextLink, image, bottomContainer]).hide();
    }

    function close() {
        if (activeImage >= 0) {
            stop();
            activeImage = prevImage = nextImage = -1;
            $(center).hide();
            $(overlay).stop().fadeOut(options.overlayFadeDuration, setup);
        }

        return false;
    }

})(jQuery); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-12-07T18:21:40.657

以这种方式更改您的 showNewContent() 回调如何...

```
function showNewContent() {
  // Attach slimbox to new content...
  $('#content').find("a[rel^='lightbox']").slimbox({}, null, function(el) {
       return (this == el) || ((this.rel.length > 8) && (this.rel == el.rel));
    }); 
  // ... and then bring up the new stuff.
  $('#content').fadeIn('normal',hideLoader());
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-30T02:09:09.740

```
<asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>
<script src="../slimbox-2.05/slimbox2.js" type="text/javascript"></script>
<script type="text/javascript">
    function pageLoad() {
        jQuery(function ($) {
            $("a[rel^='lightbox']").slimbox({/* Put custom options here */
            }, null, function (el) {
                return (this == el) || ((this.rel.length > 8) && (this.rel == el.rel));
            });
        });
    }
</script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-17T15:50:17.040

由于 livequery 已被弃用很长时间，我的解决方案是使用 jQuery 函数`.each()`，如下例所示：

```
function refreshSlimbox() {
    $('a[rel^=\'lightbox\']').each(function(){ 
        $('a[rel^=\'lightbox\']').slimbox({/* Put custom options here */}, null, function(el) {
            return (this == el) || ((this.rel.length > 8) && (this.rel == el.rel));
        }), function() {
            //remove slimbox? this is called when elements no longer match
        }
    });
} 
```

刷新我调用`refreshSlimbox()`ajax 准备好时

# .net - Visual Studio“开始调试”与“附加到进程”

> ID：854136
> 
> 赞同：2
> 
> 时间：2009-05-12T18:25:18.667
> 
> 标签：.net, vb.net, visual-studio, debugging

我有一个使用 .Net 2.0 框架的客户端/服务器应用程序。我正在使用 Visual Studio 2008 来构建和管理代码。

当我通过启动 .exe 运行应用程序的调试或发布版本时，我在数据库上得到一条插入语句，该语句试图为表的外键插入“0”，触发错误，因为主键另一个表的不为 0。

当我通过点击播放按钮（“开始调试”）运行应用程序时，插入语句使用正确的外键。

在第一种情况下，即使我在调试版本启动后“附加到进程”也会发生这种情况。

* * *

*我的问题：在应用程序启动后附加到应用程序的调试版本和从调试器启动应用程序有什么区别？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-12T18:48:28.317

如果您“开始调试”，您将在 vshost.exe[托管进程](http://msdn.microsoft.com/en-us/library/ms185331(VS.80).aspx)下运行。这将回收 AppDomain 创建，让您调试部分信任的应用程序，并可以沙盒 ClickOnce 应用程序。

这些功能都不是您的错误的可能原因（并且 vshost 对大多数人来说并不是什么大问题） - 所以我认为这可能是一个红鲱鱼。

您可能应该查看与获取 FK 值相关的多线程和时序问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T18:31:26.050

没有更多细节，很难说。但是，为了冒险进行不充分的猜测，我敢打赌您会看到时间问题（比赛条件或类似情况）。无论出于何种原因，您的服务器（我想）在“正常”启动时都会收到虚假数据。通过 IDE/调试器启动它会导致延迟，从而允许客户端进程（再次假设）有时间将正确的数据发送到服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-08T01:18:02.080

我知道这听起来很傻，但一个好主意是检查你是否有正确的参数，很容易忘记我们将它们添加到调试器而不是发布。

# iphone - 使用 CGAffineTransformMakeRotation() 旋转视图时可以设置旋转原点吗？

> ID：854137
> 
> 赞同：-2
> 
> 时间：2009-05-12T18:25:47.883
> 
> 标签：iphone, cocoa-touch, uikit

我有一个 UIImageView 我想旋转一点，但我需要定义一个特殊的旋转原点。我怎么能那样做？更准确地说，我有一个高脚杯的图像，我希望它在桌子上摆动。它的插座是方形的。因此，当向左摆动时，我的旋转原点必须是该正方形的左角。当向右摆动时，旋转原点必须是该正方形的右上角。

我怎么能那样做？我已经有了这个：

myView.transform = CGAffineTransformMakeRotation(.25);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T18:36:55.887

关于如何在[此处](https://stackoverflow.com/questions/839296/how-can-i-rotate-a-uiimageview-with-respect-to-any-point-other-than-its-center)实现这一点有一个类似的问题。

`anchorPoint`最好的答案是更改`UIView`.

# c# - LINQ to SQL - 跟踪新/脏对象

> ID：854140
> 
> 赞同：8
> 
> 时间：2009-05-12T18:26:13.330
> 
> 标签：c#, linq, linq-to-sql

有没有办法确定 LINQ 对象是否尚未插入数据库（新）或自上次更新以来已更改（脏）？我计划将我的 UI 绑定到 LINQ 对象（使用 WPF）并需要它的行为不同，具体取决于对象是否已经在数据库中。

```
MyDataContext context = new MyDataContext();
MyObject obj;
if (new Random().NextDouble() > .5)
    obj = new MyObject();
else
    obj = context.MyObjects.First();
// How can I distinguish these two cases? 
```

我能想到的唯一*简单*的解决方案是将新记录的主键设置为负值（我的 PK 是一个身份字段，因此将在 上设置为正整数`INSERT`）。这仅适用于检测新记录。它还需要身份 PK，并需要控制创建新对象的代码。

有一个更好的方法吗？看起来 LINQ 必须在内部跟踪这些对象的状态，以便它知道要做什么`context.SubmitChanges()`。有没有办法访问那个“对象状态”？

**澄清** 显然我最初的问题令人困惑。我不是在寻找插入或更新记录的方法。在给定任何 LINQ 对象的情况下，我正在寻找一种方法来确定该对象是否未插入（新）或自上次更新以来已更改（脏）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-12T20:13:33.543

ChangeSet 更改 = context.GetChangeSet();

如果 changes.Inserts.Contains(yourObject) 则它是新的，将在调用 SubmitChanges 时插入

如果 changes.Updates.Contains(yourObject)，它已经在数据库中，并且会在 SubmitChanges() 上更新

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-28T13:27:10.563

我为 LINQ 创建的每个对象（数据对象）创建一个部分类，并让每个对象实现 IDataObject 接口

```
/// <summary>
/// This interface is used to implement IsNew in all LINQ objects so a Generic Save method 
/// can be used.
/// </summary>
public interface IDataObject
{

    #region Properties

        #region IsNew
        /// <summary>
        /// Is this a new object
        /// </summary>
        bool IsNew
        {
            get;
        } 
        #endregion

    #endregion

} 
#endregion 
```

在每个数据对象中，如果 PrimaryKey 已设置，我实现 IsNew 属性以返回 true：

```
/// <summary>
/// Is this a new object
/// </summary>
public bool IsNew
{
    get
    {
        // initial value
        bool isNew = (this.CustomerID > 0);

        // return value
        return isNew;
    }
} 
```

然后在我的 DataContext 中，我将 ojbect 转换为保存为 IDataObject，如果它是新的，我在调用 SubmitChanges() 之前调用 InsertOnSubmit()。

这可能不是最简单的方法，但它允许一般保存所有对象。

每个表都需要几分钟来实现接口，但它允许调用通用 Save() 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T19:00:06.643

DataContext 对象在内部跟踪对数据的更改，因此它可以优化调用 SubmitChanges() 时生成的 SQL 查询。

如果您想将新对象插入数据库，而不是更新现有对象，您应该执行以下操作：

```
MyDataContext context = new MyDataContext();
MyObject obj;
if (new Random().NextDouble() > .5)
{
    obj = new MyObject();
    context.MyObjects.InsertAllOnSubmit(obj);
}
else
    obj = context.MyObjects.First(); 
```

现在，当您调用 SubmitChanges() 时，它会在必要时生成一个 INSERT 和一个 UPDATE。根据您在新对象上需要主键的速度，您可以立即提交它以提交对象、刷新更改跟踪并获取新的主键。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-04-19T20:47:33.870

有 INotifyPropertyChanging 和 INotifyPropertyChanged 接口，它们具有在插入时触发的特定方法，可以让您知道对象是否变脏。如果您使用 SQLMetal，它会自动执行此操作。如果您编写自己的实体类，您必须自己手动编写这些管道人员。但我不确定从可扩展性的角度来看这个解决方案是否合适。我没有测试它。似乎它可能有问题，因为它会在执行插入的机器上触发一个事件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T21:29:03.227

问题[如何将“IsDirty”属性添加到 LINQ to SQL 实体？](https://stackoverflow.com/questions/1117207/how-can-i-add-an-isdirty-property-to-a-linq-to-sql-entity)有[一个](https://stackoverflow.com/a/1117308/52277)[ongle](https://stackoverflow.com/users/57348/ongle)的答案，如何使用 PropertyChanged 事件实现 IsDirty 属性。

限制：如果属性已更改，则将 IsDirty 显示为 true，然后撤消。

# visual-studio-2008 - 如何使用 Visual Studio 2008 Team Suite 进行 Web 测试

> ID：854141
> 
> 赞同：0
> 
> 时间：2009-05-12T18:26:13.983
> 
> 标签：visual-studio-2008, testing, web-testing

有人可以指点我在 Visual Studio 2008 Team Suite 中使用 Web 测试的视频/博客/说明，它是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-06-08T18:55:15.390

请检查以下链接

VSTS Web 测试分步入门：7 分钟视频 - [http://blogs.msdn.com/ace_team/archive/2009/04/27/vsts-web-test-step-by-step-primer-7 -minute-video-by-microsoft-ace-performance-engineer-chris-lundquist-with-copious-notes-and-screen-shots-from-your-humble-correspondent.aspx](http://blogs.msdn.com/ace_team/archive/2009/04/27/vsts-web-test-step-by-step-primer-7-minute-video-by-microsoft-a-c-e-performance-engineer-chris-lundquist-with-copious-notes-and-screen-shots-from-your-humble-correspondent.aspx)

发布到 CodePlex 的性能测试视频 [http://blogs.msdn.com/b/jmeier/archive/2007/10/27/performance-testing-videos-posted-to-codeplex.aspx](http://blogs.msdn.com/b/jmeier/archive/2007/10/27/performance-testing-videos-posted-to-codeplex.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T18:41:41.400

[http://msdn.microsoft.com/en-us/library/ms182536.aspx](http://msdn.microsoft.com/en-us/library/ms182536.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T19:06:48.567

有一本书叫 Pro Visual Studio 2005 Team System，里面有一个很好的网络测试部分。

是的，我知道它适用于以前的版本，但两者之间并没有太大变化。

# testing - TDD 和 DDD，同时仍然了解领域

> ID：854142
> 
> 赞同：6
> 
> 时间：2009-05-12T18:26:33.110
> 
> 标签：testing, tdd, domain-driven-design

当您使用 DDD 从头开始​​一个新项目，并且仍然对域不太满意时，TDD 是有代价的。当您仍在了解域的细节时，您会发现很多您做错的事情，例如在其他类中更有意义的方法，或从构造函数中添加/删除参数，以及许多其他更改.

这些变化非常频繁，尤其是在开始时。通常（并且希望）每次更改都需要在单元测试中进行一些更改，这会增加更改成本（正如我之前所说，这仍然非常频繁）。

我的问题是：TDD 是否值得付出代价，即使在仍有大量变化发生的情况下，但希望它们很快会变得不那么频繁（例如，一旦我们对领域有更好的了解）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-12T19:31:45.717

> 当您仍在了解域的细节时，您会发现很多您做错的事情，例如在其他类中更有意义的方法，或从构造函数中添加/删除参数，以及许多其他更改.

理解一个领域的过程是一个设计过程，它有TDD的*帮助*，你必须理解它是一种设计技术。

那个在其他类中更有意义的方法——使用 TDD，您会更快、更快地意识到这一点*，*因为您在编写该方法时要做的第一件事就是为它编写一个测试。当您编写该测试时，您会看到（例如）您需要从另一个类中传递许多成员，这会告诉您 - 在您甚至编写方法之前 - “嘿，这属于那里！”

使用 TDD 来减少您所描述的客户流失。它不会消除它，但会减少它，因为您正在根据需要按需进行微观设计。这是即时设计。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-12T18:34:18.930

我相信是这样。测试驱动开发的一部分是你只构建你需要构建的东西——只构建让测试通过所需的东西。因此，如果您因为对领域有更清晰的了解而需要更改代码中的某些内容，那么使用 TDD 方法进行更改可能比不使用 TDD 方法的更改更少，因为您没有花时间构建不必要的东西。

还有其他优点 - 您知道您没有更改的代码部分仍然有效，因为它已经得到了测试。即使你重写了 50% 的代码，你也会知道你的另外 50% 是有效的。此外，您知道代码是可测试的——您一直在设计它以进行测试。将单元测试添加到原本没有任何设计的代码中通常是一件非常痛苦的事情——它通常以一种很难测试的方式编写。从一开始就进行测试的代码要好得多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-12T18:40:29.670

如果您仍处于相对较高水平设计域模型组件的地步，那么您不应该编写单元测试。在开始编写任何代码之前，您需要了解问题域以及类的职责。

如果您在类中摆弄构造函数和参数，那么不应将 TDD 视为一种成本 - 它可以帮助您发现和修复设计中的问题。这是对更好的对象模型和更少的维护的投资。

此外，如果您使用的是 ReSharper 或 CodeRush 之类的重构工具，我发现大多数早期的更改实际上并没有那么糟糕——只是带来了一些不便。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-12T18:32:57.060

TDD 应该在这种情况下*有所帮助，恕我直言。*单元测试的部分用处在于它们验证您在重构期间没有破坏任何东西。是的，代码中的一些更改将需要对测试进行更改，但这应该有助于澄清你在做什么，而不是让它变得更难。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-13T23:39:36.990

如上所述，TDD 更多的是关于测试和证明你的设计，而不是关于单元测试。TDD 不是单元测试，但单元测试可以从 TDD 中创建的测试演变而来。

TDD 绝对有助于理解域模型。TDD 可用于帮助定义域模型，因为它是一种设计技术，如 Carl Manaster 所述。TDD 将帮助您识别何时何地实施设计模式，是否/何时在错误的域中定义对象等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-12T18:35:55.607

最大的变化率，最有用的TDD。与具有高变更率的项目相比，具有固定需求的项目从 TDD 中获得的收益会更少。

# java - .Net 客户端与带有原始数据的 Java 服务器

> ID：854150
> 
> 赞同：0
> 
> 时间：2009-05-12T18:28:12.013
> 
> 标签：java, .net, sockets, compression, gzip

我正在将 .Net/C# 客户端写入 Solaris 上的 Java 服务器。

Java 服务器正在以我需要提取的 Gziped 格式写入原始字节数据，但我无法以正确的缓冲区大小读取数据。我阅读的消息不是确定性的不完整或完整的，无论如何都无法阅读第二条消息。我正在使用具有 DataAvailable 属性的 NetworkStream 类读取字节。

我的猜测是它可能与一个小/大端问题有关。我是否需要使用特殊的转换将数据从大端转换为小端？我是否需要使用 gzip 标头读取必要的字节？

我以前使用带有未压缩协议的同一服务器，之前使用带有 ReadLine 函数的 StreamReader 没有问题，但该协议是纯文本的。

编辑：不幸的是，我别无选择，因为给出了远程服务器和协议。是 GZip 格式的结尾部分还是我只需要相应地转换标题？未压缩的数据是纯 UTF8 编码的字符串，以换行符作为分隔符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T23:55:37.800

GZIP 格式并不复杂。它可以在[一个简单、可访问的规范文档 IETF RFC 1952](http://www.ietf.org/rfc/rfc1952.txt)中充分利用。

GZIP 格式指定字节的位顺序。它不能使用字节顺序标志进行调整。GZIP 流的生产者负责遵守这方面的规范，同样，GZIP 流的消费者也是如此。

如果我正在调试它，我会查看线路两端的字节并验证输入的字节是否与输出的字节相同。这足以抛开字节序问题。

如果您没有成功传输 GZIP 字节流，请尝试传输测试数据 - 16 个字节的 0xFF，然后是 16 个字节的 0xAA，等等。然后，验证这是来自另一端的数据。

对不起，我不知道你的意思是 *我读到的消息不是确定性的不完整或完整的，无论如何都无法阅读第二条消息。* 第二条消息？第二条信息是什么？字节序不应影响您收到的数据量。

在我看来，您对成功传输数据没有信心。我建议您在处理字节序问题和 GZIP 格式问题之前验证这一点。

# iphone - 如何在 iPhone-OS 中链接动画？

> ID：854160
> 
> 赞同：3
> 
> 时间：2009-05-12T18:30:40.717
> 
> 标签：iphone, cocoa-touch, uikit, core-animation

我想做一些复杂的动画。但我只知道如何为变化块设置动画。有没有办法链接动画，这样我就可以进行更改 A -> B -> C -> D -> E -> F （等等），而核心动画等待每个动画完成并且然后进行下一个？

特别是，我想这样做：我有一个显示立方体的 UIImageView。

阶段 1) 立方体平放在地板上

阶段 2) 立方体稍微向左旋转，而旋转原点在左下角。

阶段 3) 立方体稍微向右旋转，而旋转原点在右下角。

这些阶段重复 10 次，并在阶段 1) 停止。此外，随着时间的推移，摆动变得更小。

我知道如何为一个块中的一个变化设置动画，但是我怎么能在中间使用一些复杂的代码来做这样一个重复的事情呢？随着时间的推移，这不是一回事。它改变了，因为摆动变得越来越小，直到它停止。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-12T19:22:44.720

假设您正在使用 UIView 动画...

您可以提供一个动画“停止”方法，在动画实际完成时调用该方法（签出`setAnimationDelegate`）。因此，您可以将一系列动画排成队列并准备就绪。设置委托，然后启动第一个动画。当它结束时，它调用该`setAnimationDidStopSelector`方法（确保检查`finished`标志以确保它真的完成而不是暂停）。您还可以传递一个动画上下文，它可能是您的动画队列中的索引。它也可以是包含计数器的数据结构，因此您可以在每个循环中调整动画值。

因此，只需等待一个完成，然后启动下一个从队列中取出的问题。

如果您使用其他类型的动画，同样的方法也适用。你只需要设置你的数据结构，让它知道每个结束后要做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T19:20:10.293

您需要在动画块内设置动画委托。有关所有详细信息，请参阅 UIView 文档中的 setAnimationDelegate。

本质上，您的代理可以在动画结束时收到通知。使用上下文参数来确定动画中当前正在结束的步骤（第 1 阶段、第 2 阶段等）

该策略应该允许您将任意数量的动画块链接在一起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T18:33:52.990

我认为你的问题的答案是你需要对你想做的事情有更多的规范。您显然有一个想法，但更多详细说明将帮助您回答自己的问题。

# c# - BackgroundWorkerThread 在一个线程中访问

> ID：854171
> 
> 赞同：0
> 
> 时间：2009-05-12T18:32:10.277
> 
> 标签：c#, windows, winforms

我`BackgroundWorker`大部分时间都在 win form 应用程序中使用，以在获取数据时显示进度。我的印象`Work_completed`是保证在主 UI 线程上执行，但事实并非如此。如果我们创建一个线程并`worker.RunWorkerAsync`在其中调用，如果我们尝试更新任何 gui 控件，它就会中断。这是一个例子

```
private void StartButton_Click(object sender, EventArgs e)
{
    Thread thread1 = new Thread(new ThreadStart(PerformWorkerTask));
    _worker = new BackgroundWorker();
    thread1.Start();
}

public void PerformWorkerTask()
{
    _worker.DoWork += delegate
    {
        for (int i = 0; i < 10; i++)
        {
            Thread.Sleep(100);
        }
    };

    _worker.RunWorkerCompleted += delegate
    {
        // this throws exception
        MessageLabel.Text = "Completed";
    };
    _worker.RunWorkerAsync();

 } 
```

在这种情况下，我们如何让 backgroundworker 工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T18:50:03.803

从您的示例中很难看出 Thread (thread1) 有多好，但如果您确实需要这个 thread1，那么我认为您唯一的选择是在主线程上`MainForm.Invoke()`执行（或围绕它的一个小方法）。`RunWorkerAsync()`

**补充：**你可以使用这样的东西：

```
Action a = new Action(_worker.RunWorkerAsync);
this.Invoke(a); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T18:56:41.860

`RunWorkerAsync`[`SynchronizationContext`](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.aspx)通过从调用它的线程中获取它的线程同步魔法 。然后它保证事件将根据`SynchronizationContext`它获得的语义在正确的线程上执行。在[`WindowsFormsSynchronizationContext`](http://msdn.microsoft.com/en-us/library/system.windows.forms.windowsformssynchronizationcontext.aspx)使用 WinForms 时会自动使用 的情况下，通过发布到启动操作的线程的消息队列来同步事件。当然，这对你来说都是透明的，直到它破裂。

编辑：您必须`RunWorkerAsync`从 UI 线程调用它才能工作。如果您不能以任何其他方式执行此操作，最好的办法是在控件上调用操作的开头，以便在 UI 线程上启动工作程序：

```
private void RunWorker()
{
    _worker = new BackgroundWorker();

    _worker.DoWork += delegate 
    {
        // do work
    };

    _worker.RunWorkerCompleted += delegate 
    {
        MessageLabel.Text = "Completed";
    };

    _worker.RunWorkerAsync();
}

// ... some code that's executing on a non-UI thread ...
{
    MessageLabel.Invoke(new Action(RunWorker));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T20:49:05.623

听起来问题只是您想对 GUI 组件进行更改，而您实际上并不确定您是否在 GUI 线程上。Dan 发布了一个安全设置 GUI 组件属性的有效方法，但我发现以下快捷方法最简单：

```
 MessageLabel.Invoke(
                (MethodInvoker)delegate
                {
                    MessageLabel.Text = "Hello World";
                }); 
```

如果这种方法有任何问题，我想知道它们！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T18:46:07.320

在此处提供的代码中，您将在与 UI 线程不同的线程中添加 BackgroundWorker 事件的委托。

尝试在主 UI 线程中添加事件处理程序，应该没问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-12T18:49:17.783

我相信 BackgroundWorker 旨在自动利用新线程。因此创建一个新线程只是为了调用 RunWorkerAsync 是多余的。您正在创建一个线程只是为了创建另一个线程。可能发生的事情是这样的：

1.  您从线程 1（GUI 线程）创建一个新线程；调用这个线程 2。
2.  从线程 2 开始，您启动 RunWorkerAsync，它本身又创建了另一个线程；调用这个线程 3。
3.  RunWorkerCompleted 的代码在线程 2 上运行，也就是调用 RunWorkerAsync 的线程。
4.  由于线程 2 与 GUI 线程（线程 1）不同，因此会出现非法跨线程调用异常。

（下面的建议使用 VB 而不是 C#，因为那是我更熟悉的；我猜你可以弄清楚如何编写适当的 C# 代码来做同样的事情。）

摆脱无关的新线程；只需声明 _worker WithEvents，将处理程序添加到 _worker.DoWork 和 _worker.RunWorkerCompleted，然后调用 _worker.RunWorkerAsync 而不是定义自定义 PerformWorkerTask 函数。

**编辑**：要以线程安全的方式更新 GUI 控件，请使用如下代码（或多或少[从 MSDN 的这篇文章中](http://msdn.microsoft.com/en-us/library/ms171728.aspx)复制）：

```
delegate void SetTextCallback(System.Windows.Forms.Control c, string t);

private void SafeSetText(System.Windows.Forms.Control c, string t)
{
  if (c.InvokeRequired)
  {
    SetTextCallback d = new SetTextCallback(SafeSetText);
    d.Invoke(d, new object[] { c, t });
  }

  else
  {
    c.Text = t;
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-12T19:08:46.597

您可以通过执行以下操作使您现有的代码工作：

```
this.Dispatcher.BeginInvoke(() => MessageLabel.Text = "Completed") 
```

代替

```
MessageLabel.Text = "Completed" 
```

您可能遇到了跨线程数据访问问题，因此您必须确保在 UI 线程上访问 MessageLabel 的属性。这是一种方法。其他一些建议也是有效的。要问自己的问题是：为什么要创建一个除了创建 BackgroundWorker 线程之外什么都不做的线程？如果有原因，那很好，但是从您在此处显示的内容来看，您没有理由无法从事件处理程序创建和启动 BackgroundWorker 线程，在这种情况下，不会出现跨线程访问问题，因为 RunWorkerCompleted 事件处理程序将在 UI 线程上调用其委托。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-12T21:31:40.000

处理这些一般性问题的最好方法是处理一次。在这里，我发布了一个小类，它包装了 backgroupdworker 线程并确保完成的工作总是在 UI 线程上执行。

* * *

```
使用 System.Windows.Forms；
命名空间 UI.Windows.Forms.Utilities.DataManagment
{
    公共类数据加载器
    {
        私有BackgroundWorker _worker；
        私人 DoWorkEventHandler _workDelegate;
        私人 RunWorkerCompletedEventHandler _workCompleted;
        私有 ExceptionHandlerDelegate _exceptionHandler;
        公共静态只读控件 ControlInvoker = new Control();

```
 public DoWorkEventHandler WorkDelegate
    {
        get { return _workDelegate; }
        set { _workDelegate = value; }
    }

    public RunWorkerCompletedEventHandler WorkCompleted
    {
        get { return _workCompleted; }
        set { _workCompleted = value; }
    }

    public ExceptionHandlerDelegate ExceptionHandler
    {
        get { return _exceptionHandler; }
        set { _exceptionHandler = value; }
    }

    public void Execute()
    {
        if (WorkDelegate == null)
        {
            throw new Exception(
                "WorkDelegage is not assinged any method to execute. Use WorkDelegate Property to assing the method to execute");
        }
        if (WorkCompleted == null)
        {
            throw new Exception(
                "WorkCompleted is not assinged any method to execute. Use WorkCompleted Property to assing the method to execute");
        }

        SetupWorkerThread();
        _worker.RunWorkerAsync();
    }

    private void SetupWorkerThread()
    {
        _worker = new BackgroundWorker();
        _worker.WorkerSupportsCancellation = true;
        _worker.DoWork += WorkDelegate;
        _worker.RunWorkerCompleted += worker_RunWorkerCompleted;

    }

    void worker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        if(e.Error !=null && ExceptionHandler != null)
        {
            ExceptionHandler(e.Error);
            return;
        }
        ControlInvoker.Invoke(WorkCompleted, this, e);
    }
} 
```

}

 `And here is the usage. One thing to note is that it exposes a static property ControlInvoker that needs to be set only once (you should do it at the beginning of the app load)

Let's take the same example that I posted in question and re write it

DataLoader loader = new DataLoader();
loader.ControlInvoker.Parent = this; // needed to be set only once

private void StartButton_Click(object sender, EventArgs e)
{

```
Thread thread1 = new Thread(new ThreadStart(PerformWorkerTask));
_worker = new BackgroundWorker();
thread1.Start(); 
```

}

public void PerformWorkerTask()
{

        loader.WorkDelegate = delegate { 
                                         // get any data you want 
                                         for (int i = 0; i < 10; i++)
                                        {
                                            Thread.Sleep(100);
                                        }

                                       };
        loader.WorkCompleted = delegate
                                   {
                                       // access any control you want 
                                       MessageLabel.Text = "Completed";

                                   };
        loader.Execute();` 
```

 `}

干杯

# html - 使用 HTML 的 AIR 应用程序不会选择 alt 和标题标签来显示工具提示

> ID：854182
> 
> 赞同：1
> 
> 时间：2009-05-12T18:34:04.313
> 
> 标签：html, image, air

我正在构建一个 HTML 应用程序以在 Adob​​e AIR 容器中运行，但元素的标签和元素的`alt`标签不像浏览器那样显示工具提示。`img``title``a`

无论如何要启用它，还是以另一种方式显示它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-12T18:45:58.273

在 AIR 中，您可以保证 Javascript 将被启用，因此只需输入一个使用 title/alt 属性的 Javascript 工具提示。

# macos - OS X 上的多个鼠标

> ID：854185
> 
> 赞同：18
> 
> 时间：2009-05-12T18:34:24.533
> 
> 标签：macos, input, mouse

我正在开发一个 OS X 应用程序，它应该从两只鼠标中获取输入。我想独立阅读每只鼠标的动作。最好的方法是什么？

如果那不可能，有没有办法以编程方式禁用/启用任一鼠标？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-18T23:13:52.383

HID 类设备接口绝对是您所需要的。基本上有两个步骤：

首先，您需要找到鼠标设备。为此，您需要构建一个匹配的字典，然后用它搜索 IO Registry。[这里](http://developer.apple.com/documentation/devicedrivers/conceptual/HID/basics/basics.html#//apple_ref/doc/uid/TP40000970-CH211-CHDGCEDC)有一些示例代码，您需要在字典中添加一些额外的元素，这样您就可以获得鼠标而不是系统上的所有 HID 设备。这样的事情应该可以解决问题：

```
// Set up a matching dictionary to search the I/O Registry by class
// name for all HID class devices`
hidMatchDictionary = IOServiceMatching(kIOHIDDeviceKey);

// Add key for device usage page - 0x01 for "Generic Desktop"
UInt32 usagePage = 0x01;
CFNumberRef usagePageRef = ::CFNumberCreate( kCFAllocatorDefault, kCFNumberLongType, &usagePage );
::CFDictionarySetValue( hidMatchDictionary, CFSTR( kIOHIDPrimaryUsagePageKey ), usagePageRef );
::CFRelease( usagePageRef );

// Add key for device usage - 0x02 for "Mouse"
UInt32 usage = 0x02;
CFNumberRef usageRef = ::CFNumberCreate( kCFAllocatorDefault, kCFNumberLongType, &usage );
::CFDictionarySetValue( hidMatchDictionary, CFSTR( kIOHIDPrimaryUsageKey ), usageRef );
::CFRelease( usageRef ); 
```

然后，您需要从上面找到的设备中收听 X/Y/按钮队列。此[示例代码](http://developer.apple.com/documentation/devicedrivers/conceptual/HID/workingwith/workingwith.html#//apple_ref/doc/uid/TP30000105-TP9 "HID Class Device Interface")应该为您指明正确的方向。使用回调比轮询更有效！

The HID code looks much more complex than it is - it's made rather "wordy" by the CF stuff.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-15T00:12:00.593

看起来[HID 管理器](http://developer.apple.com/documentation/devicedrivers/conceptual/HID/intro/intro.html)就是您要找的东西。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-16T07:40:48.183

您将要查看 I/O 套件和 HID（人机接口设备）管理器的东西。

HID 管理器是[I/O Kit](http://developer.apple.com/documentation/DeviceDrivers/Conceptual/AccessingHardware/AH_Device_Access_IOKit/AH_Device_Access_IOKit.html#//apple_ref/doc/uid/TP30000378-BAJDAJDJ)的一部分，因此查看那里可能会有用。有两个用于 HID 管理的 API，[旧的 API](http://developer.apple.com/documentation/devicedrivers/conceptual/HID/intro/intro.html#//apple_ref/doc/uid/TP40000970-CH202-DontLinkElementID_6)有点痛苦，然后你有新的[10.5 及更高版本的 API](http://developer.apple.com/technotes/tn2007/tn2187.html)，它会更舒服一些。

要理解的重要一点是，这可能不仅仅是一个快速修复，它可能需要一些重要的工作才能使其运行。如果您可以假设您将安装 10.5 或更高版本，那么使用 Leopard API 肯定会有所帮助。

还; 取决于您如何完成您正在做的事情，隐藏鼠标光标可能对您很重要，因为即使您从两只鼠标都接收到信息，它仍可能会移动很多。如果您的应用程序抓取屏幕，我会使用 CoreGraphics 禁用光标并自己绘制。

您也可以考虑为这些 API 之一找到一个包装器，可以在[这个问题](https://stackoverflow.com/questions/507044/direct-access-to-keyboard-events-in-osx)中找到一个示例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-15T00:17:22.640

除非您可以强制其中一只鼠标不被当作鼠标处理，否则两者都会继续控制指针。但是，您可以使用 IOKit 编写自定义 USB HID 驱动程序，以允许您的应用程序从一只或两只鼠标中读取数据（尽管这可能会干扰将它们用作普通鼠标）。[为 USB 设备构建定制的用户客户端驱动程序](http://developer.apple.com/hardwaredrivers/customusbdrivers.html)是了解如何直接与 USB 鼠标交互的好起点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-15T00:03:56.107

您可以查看 USB/PS-2 设备中断。即使您不想重写所谓的驱动程序，它也可能很有用，因为所有鼠标都通过它发送数据。

您还可以查看此页面，该页面可能会给出一些提示[http://multicursor-wm.sourceforge.net/](http://multicursor-wm.sourceforge.net/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-20T17:05:00.997

maybe it's a solution for you to use `usb->rsr232` converter and go by reading the serial port by yourself ?

# linux - 让 sed 用参数替换文本

> ID：854186
> 
> 赞同：3
> 
> 时间：2009-05-12T18:34:41.350
> 
> 标签：linux, bash, scripting, sed, replace

好吧，我知道这是一个简单的问题，但我似乎无法让这个 sed 命令工作。我正在尝试获取一个文本文件并将其中的一部分从占位符文本替换为研究代码。当脚本首次运行时，将要替换它的研究代码使用参数传递到脚本中。问题是，当我尝试用变量 $study 替换占位符文本时，它会用字面上的“$study”替换它。

现在我的论点是这样设置的：

> 出口研究=$ 1
> 
> 出口标签=$2
> 
> 出口模式=$3
> 
> 出口选择=$4

我的 sed 命令如下所示：

> sed -i.backup -e 's/thisisthestudycodereplacethiswiththestudycode/$study/' freq.spx

是否有一些简单的方法可以让 sed 不看字面的 $study，或者此时以另一种方式做会更好？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-12T18:37:10.457

使用双引号而不是单引号。

因为`'`引用可以防止 shell 变量扩展，而`"`引用不能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T21:00:34.887

你可能不会遇到这个问题，但以防万一......

如果`$study`可能包含对`sed`.

```
mv freq.spx freq.spx.backup && \
    awk -v "study=$study" '{
        gsub(/thisisthestudycodereplacethiswiththestudycode/, study);
        print;
    }' freq.spx.backup > freq.spx 
```

`$study`虽然很尴尬（哈哈，双关语！），但无论' 的内容如何，​​这总是有效的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-11T05:34:57.473

试试这个............ sed -e 's/%d/'$a'/g' amar.htm , amar.htm 有字符串 "%d " 这确实是要替换的，而 "a" 是要替换的字符串。

# graphics - 是否有任何资源可以为软件产品和游戏提供价格合理的图形和声音？

> ID：854191
> 
> 赞同：0
> 
> 时间：2009-05-12T18:35:44.327
> 
> 标签：graphics, resources, audio

在制作软件，特别是游戏时，图形和声音等资源是“怪异”的东西，超出了开发人员的大脑和可行性范围。我的意思是......声音效果就像酷哔声：世界上谁能制作它们？我猜我们几乎没有人；）

那么：对于此类内容是否有任何良好的法律资源，允许在应用程序中使用它们？所有这些开发人员如何在不立即被起诉的情况下，制作出具有优美音乐、优美声音和精美图形的酷炫应用程序？他们从哪里获得高质量的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T18:40:29.733

[我在哪里可以获得免费的游戏音频、图形和其他资源？](https://stackoverflow.com/questions/742569/best-place-for-game-audio-graphics-etc)

# windows - 在 Windows 上从命令行轻松运行程序

> ID：854196
> 
> 赞同：2
> 
> 时间：2009-05-12T18:36:44.683
> 
> 标签：windows, powershell, path

Linux 允许我通过将二进制文件放置在几个位置来获得较短的系统路径。我不必编辑路径，因为我刚刚安装了一个新应用程序，而且我不必寻找我想要运行的应用程序。我如何使用 PowerShell 作为我用来启动程序的程序，在 Windows (Vista) 上完成同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T18:44:56.777

Windows Vista 现在通过[mklink](https://ss64.com/nt/mklink.html)具有符号链接。

也许您可以设置一个“C:\bin”文件夹并生成符号链接以指向原始二进制文件。这是假设 Windows Vista 的符号链接的工作方式与 Linux 中的符号链接类似。[这是一个简短的教程](http://www.howtogeek.com/howto/windows-vista/using-symlinks-in-windows-vista/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-13T03:41:48.980

听起来向您的`path`环境变量添加一些目录可能会有所帮助。在命令提示符下，您可以使用 set 命令查看所有环境变量。然后您可以剪切并粘贴您的路径并`set`再次使用以添加到它。

如果您更喜欢 GUI 路线，请右键单击*我的电脑*→*属性*→（在 Windows Vista 和 Windows 7 中转到左侧的*“高级系统设置” 。在 Windows XP 中，跳过此步骤）→**高级选项卡*→ 在底部有一个`Environmental Variables`按钮。

当从命令行调用某些内容时，Windows 首先检查路径中标记的所有目录。在您的应用程序目录位于路径中后，您可以在不完全限定路径的情况下执行它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-12T23:30:10.477

许多程序在注册表中创建应用程序路径条目 (HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\App Paths)。对于这些应用程序，您可以像这样启动它们：

```
PS> Start-Process <application name>
PS> Start-Process excel 
```

如果您没有提供[Start-Process](https://docs.microsoft.com/en-us/powershell/module/Microsoft.PowerShell.Management/Start-Process)的 PowerShell V2，则可以使用 V1 上的[PowerShell 社区扩展](http://pscx.codeplex.com)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-12T18:40:03.977

您始终可以添加一个 .cmd 文件作为别名。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-13T07:48:11.410

使用专门的 PowerShell，您可以为要启动的程序创建别名。不过，我怀疑这实际上比编辑`PATH`环境变量要少。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-12T23:13:26.400

我将应用程序安装到`C:\bin`.

# apache - 嵌套 Apache Tiles 模板

> ID：854199
> 
> 赞同：1
> 
> 时间：2009-05-12T18:37:21.923
> 
> 标签：apache, jsp, struts2, tiles2

所以我发现了这个：[http ://tiles.apache.org/framework/tutorial/advanced/nesting-extending.html](http://tiles.apache.org/framework/tutorial/advanced/nesting-extending.html)

这是示例：

```
<definition name="myapp.homepage" template="/layouts/classic.jsp">
  <put-attribute name="title" value="Tiles tutorial homepage" />
  <put-attribute name="header" value="/tiles/banner.jsp" />
  <put-attribute name="menu" value="/tiles/common_menu.jsp" />
  <put-attribute name="body">
    <definition template="/layouts/three_rows.jsp">
      <put-attribute name="one" value="/tiles/headlines.jsp" />
      <put-attribute name="two" value="/tiles/topics.jsp" />
      <put-attribute name="one" value="/tiles/comments.jsp" />
    </definition>
  </put-attribute>
  <put-attribute name="footer" value="/tiles/credits.jsp" />
</definition> 
```

所以我定义了这个：

```
<definition name="mgmt.base.layout" extends="base.layout">
     <put-attribute name="body">
         <definition template="/WEB-INF/mgmt/config/mgmtBody.jsp"/>
             <put-attribute name="adminLeft"  value="/WEB-INF/mgmt/config/left.jsp"/>
             <put-attribute name="adminRight" value="/tiles/blank.html"/>
         </definition>
     </put-attribute>
</definition> 
```

但有趣的是，即使是他们自己的文档也是错误的：

**2009-05-12 11:20:56,088 [main] 错误 - org.apache.commons.digester.Digester.error(Digester.java:1635)：第 17 行第 68 列解析错误：属性“名称”是必需的且必须为元素类型“定义”指定。org.xml.sax.SAXParseException：属性“名称”是必需的，并且必须为元素类型“定义”指定。**

即使我为它定义了一个名称，它仍然会给出以下错误：

**2009-05-12 11:35:31,818 [main] 错误 - org.apache.commons.digester.Digester.error(Digester.java:1635)：第 21 行第 19 列解析错误：元素类型的内容“put-属性”必须匹配“空”。org.xml.sax.SAXParseException：元素类型“put-attribute”的内容必须匹配“null”。**

这是什么意思？！！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2011-01-19T12:48:59.500

将 DTD 版本更改为 2.1 解决了我的问题！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-12T21:54:05.983

您使用的模式要求 put-attribute 是叶节点，即不能包含子元素 - 所以您不能这样做。了解较新版本的架构（必须在 Tiles 文档或示例中）是否允许嵌套切片模板。

-卡勒

所以基本上我使用的是旧版本的磁贴并使用新版本的架构：这是旧嵌套架构的语法：http: [//tiles.apache.org/2.0/framework/tutorial/advanced/nesting-extending.html](http://tiles.apache.org/2.0/framework/tutorial/advanced/nesting-extending.html)

# bash - 如何使用 Cron 备份我的 PostgreSQL 数据库？

> ID：854200
> 
> 赞同：17
> 
> 时间：2009-05-12T18:37:37.333
> 
> 标签：bash, postgresql, cron, backup

我可以在脚本中运行诸如 vacuumdb、pg_dump 和 psql 之类的命令，如果我像这样为它们添加前缀：

```
/usr/bin/sudo -u postgres /usr/bin/pg_dump -Fc mydatabase > /opt/postgresql/prevac.gz
/usr/bin/sudo -u postgres /usr/bin/vacuumdb --analyze mydatabase
/usr/bin/sudo -u postgres /usr/bin/pg_dump -Fc mydatabase > /opt/postgresql/postvac.gz
SCHEMA_BACKUP="/opt/postgresql/$(date +%w).db.schema"
sudo -u postgres /usr/bin/pg_dump -C -s mydatabase > $SCHEMA_BACKUP 
```

当我 sudo 到 root 时，这些在 Redhat 的命令行上运行，然后如您在上面的命令中看到的，我对 postgres 执行 sudo -u。

但是当我尝试从 cron 启动它时，**我在所有文件中得到零字节——这意味着它没有正常运行。**而且我在我可以看到的日志中没有任何线索。

我的 /etc/crontab 文件底部有这个条目

```
00 23 * * * root /etc/db_backup.cron 
```

是的，/etc/db_backup.cron 是 chmod ug+x，由 root 拥有，文件顶部显示“#!/bin/bash”（减去双引号）。

有谁知道给了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-05-12T18:48:35.787

由于您似乎拥有超级用户权限，您可以将这些命令放入 postgres 用户的 crontab 中，如下所示：

```
sudo su postgres
crontab -e 
```

然后将 pg_dump/vacuumdb 命令放在那里。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-06-05T21:20:20.153

我有一个备份服务器上所有数据库的动态 bash 脚本。它获取所有数据库的列表，然后在执行备份之前清空每个数据库。所有日志都写入一个文件，然后将该日志通过电子邮件发送给我。如果你愿意，这是你可以使用的东西。

将下面的代码复制到一个文件中，并将该文件添加到您的 crontab 中。我已将 pg_hba.conf 设置为信任本地连接。

```
#!/bin/bash
logfile="/backup/pgsql.log"
backup_dir="/backup"
touch $logfile
databases=`psql -h localhost -U postgres -q -c "\l" | sed -n 4,/\eof/p | grep -v rows\) | grep -v template0 | grep -v template1 | awk {'print $1'}`

echo "Starting backup of databases " >> $logfile
for i in $databases; do
        dateinfo=`date '+%Y-%m-%d %H:%M:%S'`
        timeslot=`date '+%Y%m%d%H%M'`
        /usr/bin/vacuumdb -z -h localhost -U postgres $i >/dev/null 2>&1
        /usr/bin/pg_dump -U postgres -i -F c -b $i -h 127.0.0.1 -f $backup_dir/$i-database-$timeslot.backup
        echo "Backup and Vacuum complete on $dateinfo for database: $i " >> $logfile
done
echo "Done backup of databases " >> $logfile

tail -15 /backup/pgsql.log | mailx youremail@domain.com 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-02-02T19:01:05.630

我已经像这样设置了我的 cron。从周一到周五每 59 分钟一班

```
*/59 * * * 1-5 sh /home/my_user/scripts/back_my_bd.sh 
```

运行备份的脚本位于**back_my_bd.sh**文件中，内容为：

```
pg_dump -U USERDATABASE DATABASENAME > /home/my_user/sql/mybackup.sql 
```

我在主目录中创建了 .pgpass 文件，以允许在不指定用户和密码的情况下进行备份

```
localhost:5432:DATABASENAME:USER:PASSWORD 
```

对不起，我的英语不好！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-12T18:47:45.087

您的环境变量可能未在 cron 中设置。

在您的正常会话中，您可能已经定义了以下变量：

```
PG_PORT
PG_HOST
PG_DATABASE
PG_USERNAME
PG_PASSWORD 
```

在你的脚本中添加一个“env”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-06-19T11:30:15.937

您的 pg_hba.conf 中可能为您的 postgres 用户提供了“ident”身份验证。在这种情况下，选项“-u postgres”会失败。在备份脚本中将用户更改为 postgres 或配置不同的身份验证方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-04T21:08:53.333

获取数据库列表的另一个版本：
`psql -lqt | grep -vE '^ +(template[0-9]+|postgres)? *\|' | cut -d'|' -f1| sed -e 's/ //g' -e '/^$/d'`

因为我的`psql -lqt`输出是：

```
 abcdefghij         | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | 
 postgres           | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | 
 template0          | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres          +
                    |          |          |             |             | postgres=CTc/postgres
 template1          | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres          +
                    |          |          |             |             | postgres=CTc/postgres
 abc                | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-15T06:26:00.463

数据库=`psql -h localhost -U postgres -q -x -t -c "\l" | grep 'Name' | sed 's/ //g' | sed 's/Name|//g'`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-20T13:14:05.927

而不是以下命令：databases=`psql -h localhost -U postgres -q -c "\l" | sed -n 4,/\eof/p | grep -v rows\) | grep -v template0 | grep -v template1 | awk {'print $1'}`

您可以在下面使用：数据库=`psql -t -c "select datname from pg_database where datname not like 'template%';" | grep -v '^$'`

第一个返回'|' 对于模板数据库和一个空行。

第二个更干净。

# php - 表单提交后 $_POST 为空

> ID：854205
> 
> 赞同：9
> 
> 时间：2009-05-12T18:38:34.103
> 
> 标签：php, html, forms, post

我在我的服务器上设置了这个测试页面。请告诉我为什么`$_POST`即使我提交表单，数组也不包含任何内容。我已经在三种不同的浏览器中尝试过，但没有任何反应。

```
<?php print_r($_POST);?>

<form method="post">

<p><label>Email: </label>
<input type="text" id="login_email" />
</p>

<p><label>Password: </label>
<input type="password" id="login_password" />
</p>

<p><label>Remember Me?: </label>
<input type="checkbox" id="login_remember" />
</p>

<p>
<input type="submit" value="Login" />
</p>

</form> 
```

我多年来一直在编写 PHP，而这从未发生过。这段代码有什么问题？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2009-05-12T18:40:41.230

您的输入元素没有名称属性。应该：

```
<input type="text" id="login_email" name="login_email" /> 
```

如果输入元素没有名称属性，则它不会作为 POST 数据的一部分发送。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-12T18:40:15.473

那么，您没有针对表单标签的操作吗？它应该是脚本名称：

```
<form method="post" action="scriptname.php"> 
```

...而且您也没有为每个表单输入设置名称 - 浏览器不会提交 ID 作为元素名称。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-12T18:41:26.173

```
<form method="POST" action="<?php echo $PHP_SELF; ?>

<p><label>Email: </label>
<input type="text" name="login_email" />
</p>

<p><label>Password: </label>
<input type="password" name="login_password" />
</p>

<p><label>Remember Me?: </label>
<input type="checkbox" name="login_remember" />
</p>

<p>
<input type="submit" value="Login" />
</p>

</form> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-12T18:41:12.383

输入元素没有名称属性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-12T21:09:38.960

我建议你基于 Zend_View 帮助器编写类似以下函数的东西。

```
formText($name, $value = null, array $attribs = null)
formPassword($name, $value = null, array $attribs = null)
formLabel($id, $text, array $attribs = null)
formHidden($name, $value = null, array $attribs = null)
formSubmit($name = null, $text = null, array $attribs = null)
formSelect($name, $selected, array $attribs = null, array $options = null)
formCheckbox($name, $default, array $attribs = null, array $options = null) 
```

然后你就再也不会忘记/错过这样的事情了。

```
<form method="POST" action="<?php echo $PHP_SELF; ?>

<p>
<?php
echo formLabel('login_email', 'Email'), ':',
     formText('login_email'); 
?>
</p>

<p>
<?php
echo formLabel('login_password', 'Password'), ':',
     formPassword('login_password'); 
?>
</p>

<p>
<?php
echo formCheckbox('login_remember'), ' ', 
     formLabel('login_remember', 'Remember me');
?>
</p>

<p>
<?php
echo formSubmit(null, 'Login');
?>
</p>
</form> 
```

提示：

*   如果 id 未在 attribs 中定义，则 id 与 name 相同，除了在 for="$id" 属性中使用 id 的标签，并且 formHidden 也不应该有默认 id。
*   formCheckbox 在其自身之前写入一个同名的 formHidden 并带有负值，因此如果未选中该复选框，您将获得一个返回值。
*   formCheckbox options 是一个数组，其中包含选中或未选中的值。
*   使用带有 FILTER_VALIDATE_BOOLEAN 的过滤器从复选框中读取返回值，以检查它是否被标记。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-12T20:45:23.617

您的所有输入元素都需要一个名称属性。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-13T04:09:41.613

您忘记了使脚本正常工作的名称属性。您还可以在标签中包含“for”标签以匹配输入的名称属性。这不是必需的，但可以帮助您的表单的 CSS 格式：

```
<p>
<label for="login_email">Email: </label>
<input type="text" name="login_email" id="login_email" />
</p> 
```

如果您必须在 6 个月后重新使用它，则有助于匹配所有内容并使您的代码更加精简和可读。如果您不打算填充 action 属性，我会将其包含在您的操作中：

```
<form method="POST" action="<?php echo $PHP_SELF; ?> 
```

这将确保您的页面符合表单的要求以及您的脚本应该执行的情况。似乎是一个简单的疏忽。希望这可以帮助。

# sql-server - 使用 Ms SQL SERVER 全文搜索匹配词

> ID：854216
> 
> 赞同：1
> 
> 时间：2009-05-12T18:41:26.237
> 
> 标签：sql-server, full-text-search

我需要使用全文在 sql 中编写一个查询，该查询按匹配单词计数的顺序返回记录

示例：在数据库中

```
row 1 = "brown cow" //1 match
row 2 = "lazy dog" //2 matches 
```

用户输入：“快速棕色狐狸跳过懒狗”

两个输入都将返回顶部的第 2 行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T18:55:51.517

I don't see anything that natively does this. You might have to create a function which compares the results to your search string in order to determine how many matches exist.

You could then pass the results of the free text search into that function which would return a match count. Finally, you'd order the results by the match count.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T20:00:04.237

在 MS SQL 中，对于游击方法，您可以执行以下操作：

```
select * from MATCHTABLE where patindex('%'+MATCHCOLUMN+'%','The quick brown fox jumps over the lazy dog')>0 
```

其中 MATCHTABLE 是包含两个示例行的表，而 MATCHCOLUMN 是包含文本的列名。

但是，这种方法的性能与全文搜索不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T22:16:57.490

鉴于以下假设：

1.  您的表格已启用全文
2.  您的表名为“example”，包含 2 个名为“exampleID”和“exampleText”的列（exampleText 在您的全文索引中）
3.  您可以解析用户输入，如每个示例所示：

**parsedUserInput** = 'The','quick','brown','fox','jumps','over','the','lazy','dog'

然后我认为你正在寻找的是这样的：

```
SELECT display_term as term
,document_count as numberOfOccurences 
FROM sys.dm_fts_index_keywords (db_id(),object_id('example'))
WHERE display_term IN({parsedUserInput}) 
```

否则，也许排名对您有用...

**parsedUserInput** = "The" OR "quick" OR "brown" OR "fox" OR "jumps" OR "over" OR "the" OR "lazy" OR "dog"

```
SELECT 
ranks.rank AS rank
,e.exampleID
FROM example e
INNER JOIN CONTAINSTABLE (  example, exampleText, ' **{parsedUserInput}** '   ) AS ranks
    ON e.exampleID = ranks.[KEY]
WHERE ranks.rank > 0 -- return only rows that have a rank
order by ranks.rank desc 
```

# visual-studio-2008 - 水晶报表汇总

> ID：854220
> 
> 赞同：3
> 
> 时间：2009-05-12T18:42:07.530
> 
> 标签：visual-studio-2008, crystal-reports

所以我两组 tblTenant.ID tblTransaction.TenantID

在 tblTransactions 中有两个我想要操作的字段，AmountCharged 和 AmountPaid。如何将两个字段相加并按组减去它们？即，每个租户将把他们所有的 amountCharged 相加，然后将他们的 AmountPaid 相加和减去。

例如，SQL 将是：

```
SELECT SUM(tblTransactions.AmountCharged) - SUM(tblTransactions.AmountPaid) FROM tblTransactions
Where tblTrascactions.TenantID = x 
```

其中“x”是组的租户 ID。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-12T18:55:13.127

我能想到的最简单的方法是在您的详细信息行上创建一个公式字段，即 AmountCharged-AmountPaid 并将其隐藏。然后只需右键单击它并在组中插入一个总和。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-12T18:58:29.860

可以用一个晶体公式来完成...

```
SUM({tblTransactions.AmountCharged}, {tblTrascactions.TenantID}) - 
SUM({tblTransactions.AmountPaid}, {tblTrascactions.TenantID}) 
```

或者

```
SUM({tblTransactions.AmountCharged} - {tblTransactions.AmountPaid}, {tblTrascactions.TenantID}) 
```

然后在tenantID 组页脚中显示该公式。

# sharepoint - 将列表项继承到 WSS 3 中的子站点列表

> ID：854226
> 
> 赞同：2
> 
> 时间：2009-05-12T18:44:26.793
> 
> 标签：sharepoint, wss

有没有办法从 Windows SharePoint Services 3.0 SP1 中的子集合继承列表项到子网站？

我们希望有一个网站集级别的可用联系人列表，并将这些联系人向下继承到网站级别的列表。然后，子站点级别将能够拥有特定于其自身的联系人以及在父站点中创建的任何联系人。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-13T01:43:59.550

我能想到的最简单的想法是使用 dataview webpart 来显示父站点中的列表项和子站点中的另一个。

拥有你想象的list之间的继承关系，确实很酷，但绝对不是开箱即用的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-13T10:55:22.510

最近我一直在使用 jQuery 处理这样的需求。两个 Web 服务调用以从当前站点和父站点获取数据，然后合并并显示数据客户端。它不是标准的 SharePoint 列表视图，但如果这是您正在寻找的，您可以非常接近。

我的博客上有一个类似的例子：

[http://tqcblog.com/2009/05/04/sharepoint-discussion-with-jquery/](http://tqcblog.com/2009/05/04/sharepoint-discussion-with-jquery/)

# php - php中的动态类属性$$value

> ID：854231
> 
> 赞同：39
> 
> 时间：2009-05-12T18:45:12.503
> 
> 标签：php, class, dynamic, variables, properties

我如何引用只知道字符串的类属性？

```
class Foo
{
    public $bar;

    public function TestFoobar()
    {
        $this->foobar('bar');
    }

    public function foobar($string)
    {
         echo $this->$$string; //doesn't work
    }
} 
```

评估字符串的正确方法是什么？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2009-05-12T18:47:37.600

使用字符串变量引用对象的成员变量时，只需使用一个 $。

```
echo $this->$string; 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2010-04-13T17:28:32.480

如果要使用属性值来获取属性的名称，则需要使用“{”括号：

```
$this->{$this->myvar} = $value; 
```

即使它们是对象，它们也可以工作：

```
$this->{$this->myobjname}->somemethod(); 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2009-05-12T18:55:14.543

As the others have mentioned, $this->$string should do the trick.

However, this

```
$this->$$string; 
```

will actually evaluate string, and evaluate again the result of that.

```
$foo = 'bar';
$bar = 'foobar';
echo $$foo; //-> $'bar' -> 'foobar' 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-12T18:48:10.967

你很亲密。您刚刚添加了 1 个额外的 $ 符号。

```
public function foobar($string)
{
     echo $this->$string; //will work
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-08-03T15:33:01.457

要记住确切的语法，请记住您使用的 a`$`比通常使用的要多。当您用于`$object->property`访问对象属性时，动态访问是通过`$object->$property_name`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-12T18:48:42.247

```
echo $this->$string; //should work 
```

仅`$$string`在访问仅将其名称存储在字符串中的局部变量时才需要。由于通常在一个类中您访问它就像`$obj->property`，您只需要添加一个`$`。

# eclipse - Eclipse 中的排序方法

> ID：854232
> 
> 赞同：47
> 
> 时间：2009-05-12T18:45:29.367
> 
> 标签：eclipse, code-formatting

是否有一种简单的方法可以在 Eclipse 中对类中的方法进行排序？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2009-05-12T18:49:23.947

> 选择类，源 > 排序成员
> 
> 您可以在 Java 首选项中设置顺序

通过[Ecipe 论坛](https://web.archive.org/web/20100218080217/http://dev.eclipse.org/newslists/news.eclipse.newcomer/msg02539.html)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-05-12T18:48:41.560

在 Eclipse[新闻组](https://web.archive.org/web/20100218080217/http://dev.eclipse.org/newslists/news.eclipse.newcomer/msg02539.html)上找到它：

> 选择类，源 > 排序成员

# jquery - 根据单元格列中的数据样本添加排序器解析器

> ID：854241
> 
> 赞同：0
> 
> 时间：2009-05-12T18:47:28.537
> 
> 标签：jquery, tablesorter

这是这个项目的最后一部分，感谢所有帮助修改其他部分的语法的人。我正在使用 jQuery 的 tablesorter 插件。基本上，我想要完成的是让我的自定义排序函数根据它是否有一个类来选择一个表头，即“SortableHeader”。然后，它必须根据该列中的数据决定将什么元数据解析器添加到该特定列的标题中。我采用了更复杂的方法，并决定从单个单元格（例如列的第一行）中抽取数据样本，并将其与不同的模式或正则表达式进行比较，然后排序器将添加正确的元数据解析器根据比较结果，例如，如果匹配日期模式，排序器将添加日期解析器，如果匹配 URL 模式，

1.  我不知道如何从列中选择单行，我尝试过查找，但我只找到遍历表中所有行的教程，而不是根据列标题从列中选择单行信息。

2.  我不确定如何在 jQuery 中执行模式和/或正则表达式。例如，查找 2009 年 3 月 2 日形式的日期的日期正则表达式/模式如何在 jQuery 中查找？

我目前有以下大纲

```
 //Add parser to each table header that has a class="SortableHeader"
    $("th[class='SortableHeader']").each(function(column){
        //Take a sample of data from a single cell in this column 
        // compare it to various patterns to determine what type 
       //of data it contains in order to apply the appropriate parser   
    }); 
```

执行排序搜索的示例标题部分将是：

```
<table id="myTable" summary="Table is used to list available workshops"  cellspacing="0">
            <thead>
                <tr>
                    <th class="SortableHeader"><a rel = "Header" href="#" title="Sort title in decending order" class="">Title</a></th>
                    <th><a rel = "Header" href="#" title="Sort instructor in descending order" class="">Instructor</a></th>
                    <th class="SortableHeader"><a rel = "Header" href="#" title="Sort column in decending order" class="">Date</a></th>
                    <th>Start/End</th>
                    <th><a rel = "Header" href="#" title="Sort column in decending order" class="">Seats Available</a></th>
                    <th><a rel = "Header" href="#" title="Sort column in decending order" class="">Enrolled</a></th>
                    <th><a rel = "Header" href="#" title="Sort column in decending order" class="">Pre-Requisites</a></th>
                    <th>Workshop Actions</th>
                </tr>
            </thead> 
```

我的最后一个问题是，是否有更简单的方法可以做到这一点？我想我可以从标题中获取标题并将解析器选择器作为基础，但我想避免这种情况，因为它似乎不太灵活，我必须对特定字符串进行硬编码以检查标题header 反对，并且任何实现此功能的人都只能使用那些特定的字符串作为标题的标题，以便应用特定的排序解析器。如果可以的话，我想避免这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-13T00:43:45.473

1.  使用返回第一行中的列的选择器，然后从中选择所需的列。

    var firstColumn = $("#myTable TBODY TR:first TD")[0];

2.  我会尝试强制日期和数字类型的值，然后当您查看各种字符串类型变体（URL 等...）时，您可以进入子类型和正则表达式匹配

3.  如果您想让它更具说明性，我只需在列标题中添加另一个类，以指示您要在排序中使用的比较器。

    <th class="SortableHeader DataTypeDate">...</th> <th class="SortableHeader DataTypeURL">...</th>

初始化排序时，您可以使用 hasClass 方法查看列是否具有与之关联的特定日期类型。

```
$("#myTable THEAD TR:first TH").each(function(column) {
    if ($(this).hasClass("DataTypeDate")) {
        // ...
    }
}); 
```

# javascript - 制作叠加层 仅使用 HTML-CSS 进行缩放调整大小后保持原位

> ID：854252
> 
> 赞同：0
> 
> 时间：2009-05-12T18:48:55.850
> 
> 标签：javascript, html, css

我在将有图片库的网站上工作。设计师的想法是让切换照片的按钮在照片上方一点。

像这样

[示例 http://img57.imageshack.us/img57/1253/showq.png](http://img57.imageshack.us/img57/1253/showq.png)

目前我已经为此制作了一个 javascript 解决方案 - 它获取照片的位置并将绝对定位应用于按钮 div。有一些缺点 - 它在 Opera 和 IE 中运行不稳定。此外，我还必须制作一些肮脏的 haxx 以使其在缩放后保持在原位。我想知道是否有更好的方法来做到这一点，最好不用javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T18:57:46.803

如果我理解正确，您正在尝试将这些箭头按钮相对于图像垂直居中。仅使用 CSS（不需要 javascript）就可以轻松完成此操作。这是一个[例子](http://www.jakpsatweb.cz/css/css-vertical-center-solution.html)。

基本思想是您使用几个 div 加上一些绝对/相对定位。有一个外部 div 将整个事物的顶部放到父元素的中心，然后有一个内部 div 拉起您的内容，以便内容居中而不是元素的顶部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T19:20:36.390

一种流行的技术是将整个图像分成两个巨大的（大部分是透明的）链接。照片的左半部分将带您到上一张图像，右半部分将带您到下一张。

当然，您可以适当地放置按钮的图像，它们*会*四处移动，但我认为您发现的问题是您必须在按钮移动时不断移动鼠标才能浏览大量图像....好吧，有了这个想法，您只需要将鼠标放在中间附近，它应该保持在照片上方（因此是一个方向）。

示例： http: [//gizmodo.com/photogallery/dreamhomespshop/1008251500](http://gizmodo.com/photogallery/dreamhomespshop/1008251500)

将鼠标悬停在图像上，您会看到它完全处于活动状态。我敢肯定，与您的实现不完全相同，但这个概念适用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T19:27:47.613

你的意思是像[这里](http://bivakbenoordenhout.nl/)？（荷兰网站，请参阅顶部中心栏中的照片浏览器）

浏览器缩放在 Firefox 和 safari 等浏览器中运行良好，因为它们会缩放所有内容并重新校正像素值。要在 ie(6) 中进行缩放，您需要在 em 中设置所有样式。但是无论如何，浏览器缩放对于像素数据来说都很糟糕……</p>

只要容器元素是相对定位的，按钮的绝对定位（左 0 和右 0）就不是问题。

# javascript - document.getElementById() VS。getElementById()

> ID：854253
> 
> 赞同：3
> 
> 时间：2009-05-12T18:48:58.720
> 
> 标签：javascript, getelementbyid

我通常通过执行以下操作为某些事件注册 javascript 函数：

```
myBtn.Attributes.Add("onClick", "Validate(getElementById('"+txtFirstName.ClientID + "'));"); 
```

我一直单独使用`getElementById`，或者换句话说，没有附加文件。但是最近当我尝试使用`getElementById`而不是`document.getElementById`. 为什么是这样？奇怪的是，我有一个网站，其中一个页面允许我使用 just `getElementById`，但另一个页面会引发 javascript 错误，因为如果我这样做它就找不到元素`getElementById`，而且只有我这样做它才会起作用`document.getElementById`。

有谁知道这是为什么？我应该在`document.getElementById`任何地方使用，不管它是否在没有文档前缀的情况下工作？

编辑：这与一页使用 AJAX 而另一页不使用这一事实有什么关系吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-12T18:54:28.900

When you use `getElementById()` and it works that mean that the function where it's called is running on the context of the document, that's is this == document.

So, you should ALWAYS use `document.getElementById` to avoid that kind of errors.

Anyway, I would even stop using getElementById altogether and start using [JQuery](http://jquery.com/), i'm sure you'll never regret it.

Your code would look something like this if you used JQuery:

```
$("#myBtnID").click(function () { Validate($("#myTextboxID"))}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-12T18:54:30.257

Any function or variable you access without an owning object (ex: document.getElementById) will access the property from window.

So getElementById is actually window.getElementById, which isn't natively defined (unless you defined it before (ex: getElementById = document.getElementById).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T18:52:06.953

您应该只使用[document.getElementById](http://www.w3schools.com/HTMLDOM/met_doc_getelementbyid.asp)（即使我建议使用原型或 jquery 之类的库来使用 $ 符号）。

如果您能够单独使用 getElementById，那只是因为您使用的浏览器正在使用某种技巧来使其工作，但正确的方法是使用文档变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-12T18:54:00.367

You should use the full `document.getElementById()`. If you find that too verbose, you could use jQuery:

```
$('#' + id) 
```

or you could create an alias at the top of your script:

```
var byID = document.getElementById; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-12T18:54:41.770

The correct way is indeed [document.getElementById()](https://developer.mozilla.org/En/Document.getElementById).

The reason (speculation) it might work by itself is that depending on where you use it the current context may in fact be the document object, thus inexplicitly resulting in document.getElementById().

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-12T18:52:30.617

我真的不知道如何解释它，但它是因为 getElementById() 在页面的 html 结构中找到了一个元素。一些浏览器知道默认情况下您要搜索文档，但其他浏览器需要额外的指导，因此需要文档。

# vb6 - 用于 Sheridan 3d 控件的本机 VB 6 替代品（如 ssCommand、ssCheck 等）

> ID：854255
> 
> 赞同：2
> 
> 时间：2009-05-12T18:49:09.483
> 
> 标签：vb6

我正在开发一个 VB6 应用程序，我想摆脱旧的 Sheridan 控件并用内置的 VB6 控件替换它们。

但是，其中一些控件具有一些不错的属性，例如 ssCommand 按钮上的 ForeGround。标准的 VB6 命令按钮没有前景属性。

我知道 VB6 可能有很多我可以启用的其他控件，但我不清楚哪些是相当“标准”的（即，不是第三方控件）。我想让这个应用程序尽可能简单，而不是创建依赖项。（是的，我知道 VB6 的*任何*组件长期以来都会成为废弃软件。我只是期望内置 VB6 控件具有更高级别的兼容性，因为它可能被使用得更多，因此“重击”更多，并且它的缺陷会更广为人知.

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-12T21:28:01.847

在我看来，应该删除threed32.ocx（Sheridan SSControls），因为它存在许多问题。它[不再受支持](http://msdn.microsoft.com/en-us/vbrun/ms788708.aspx)，所有控件[在可见时都会获得焦点，](http://support.microsoft.com/kb/172673)包括面板和框架（！），很难升级到 VB.NET - 还有更多。对于我的公司来说，这些功能强大到足以胜过它提供的额外功能——我们正在从我们所有的程序中删除它。

有些讨论过于悲观恕我直言。VB6 还不是废弃软件——我们并不是[注定要失败](http://www.johnniemoore.com/blog/archives/000869.php)的——尽管毫无疑问有一天我们将不得不升级代码。微软[说](https://stackoverflow.com/questions/447007/will-windows-7-support-the-vb6-runtime/592740#592740)：

> Windows Vista、Windows Server 2008 和 Windows 7 的整个生命周期都支持 VB6 运行时，即五年的主流支持和五年的扩展支持。

Microsoft 仍然支持他们的许多 VB6 控件。**检查**[在线列表](http://msdn.microsoft.com/en-us/vbrun/ms788708.aspx)并仅使用他们**支持**的控件。这些是 Clay 在原始问题中寻找的标准、经过测试、支持的控件。如果您想使用第三方组件，请检查他们是否仍然被供应商支持。我同意在引入依赖项之前，您应该始终认真考虑您获得了多少好处，这可能是一个令人头疼的支持问题。如果您使用特殊组件，请尝试将它们包装在抽象层中。如果您需要更换它们，它可能会在以后节省一些痛苦。您可以隐藏所有花哨的功能，但您真正需要的功能除外。

最后一句话 - 不要在 SSCommand 中使用 ForeColor 属性。没有相应的 BackColor 属性，因此您无法保证您的特殊前景色会与系统背景“按钮面”颜色形成对比。就像[雷蒙德说](http://blogs.msdn.com/oldnewthing/archive/2007/12/12/6648399.aspx)的那样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-11-19T12:11:14.103

有时，一点点独创性会大有帮助。例如，我希望我的 VB6 命令按钮具有自定义背景和前景色，即使这违反了“Windows 标准外观”；但是，由于我的项目不是商业项目，因此我还没有准备好为该功能投入大量资金。所以我尝试了一些方法，最后确定了对我来说是一个非常可行的解决方案：我用标签控件覆盖了我的按钮，现在有了看起来绝对真实的多色按钮。我可以以编程方式控制按钮颜色，以反映各种操作状态，甚至超越简单的“点击/不点击”组合。我的一个应用程序使用一组五个按钮，这些按钮根据组合的按钮值呈现各种颜色。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T19:33:14.950

我认为将应用程序保持为“普通香草”是一个值得的目标。当然简化了部署。

我想说找到 VB6 标准组件的最佳方法是在干净的机器上安装 VB6（加上服务包）。所有可用的组件都是标准的。

如果您无法执行此操作，请针对项目中每个选中的组件或引用，研究引用的文件（dll、ocx 等）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-12T19:43:40.177

在这种情况下，您将面临一场艰苦的战斗。尝试消除对早已失效的组件的依赖可能是一个好主意，但在这种情况下，您已经使用了一种废弃的技术。我很清楚，用更现代的技术（EG、.NET）重建应用程序是不可行的，所以你的选择有限。

1.  用最匹配的现有 VB6 控件替换 Sheridan 控件，然后相应地更新代码。这将是一个复杂而困难的过程，您正确地假设在许多情况下不会有匹配项——Sheridan（现为 Infragistics）通过提供 VB6 中没有的 UI 功能来建立他们的业务。在许多情况下，您的 UI 必须经过认真调整才能支持这一点。
2.  考虑自己在 VB6 甚至 .NET 中编写“足够好”的控件版本（后者使用来自[此 StackOverflow 问题](https://stackoverflow.com/questions/459250/can-net-custom-controls-be-used-in-vb6-form)的建议）。
3.  考虑用（可能早已放弃）开源 VB6 控件替换这些控件。谷歌将成为您的朋友。我推荐这条路线的原因是多年来许多 UI 元素已在 ActiveX 中表示为开源的——如果它们是开源的，您至少可以在它们上“支持自己”。

我知道您要进行普通的开箱即用的 VB6 部署，但对于某些 UI 元素，这可能不可行。如果您可以将您的 UI 重新构建为 #1 规范，那么就去做吧，但是您可能有很多工作要做，所以可能是时候考虑在一个受支持的现代平台上进行重新构建了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-12T19:47:55.567

我经历过这个，你会很长时间的，恕我直言，对结果不太满意。

无论如何，VB6 都不是一个长期的解决方案。为什么不把它们留在里面？是的，它们被遗弃了，但我使用它们并且无论如何都不需要支持。（而且在第一次购买后它就下地狱了。）我的经验是它们非常可靠。我会接受它，如果您有现场问题，请提供现场解决方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-12T19:00:41.230

我不得不不同意你的推理。人们可能会期望那些靠你成为快乐顾客为生的人提供更好的支持。

任何依赖 VB6 销售的供应商都可能很快破产。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-11-28T12:09:01.593

何苦？如果您的产品有效，请不要担心。我发现 Sheridan 控件非常可靠。如果您没有遇到任何问题，请不要理会他们。

# java - 如何在 IntelliJ IDEA 的应用程序运行配置文件中将目录添加到类路径？

> ID：854264
> 
> 赞同：233
> 
> 时间：2009-05-12T18:51:03.943
> 
> 标签：java, intellij-idea, classpath

我正在尝试将目录添加到应用程序运行配置文件的类路径中

如果我在 VM 设置中使用 -cp x:target/classes 覆盖，则会收到以下错误：

```
java.lang.NoClassDefFoundError: com/intellij/rt/execution/application/AppMain 
```

关于如何将目录添加到我的项目的类路径的任何想法？

* * *

## 回答 #1

> 赞同：311
> 
> 时间：2014-07-19T19:02:02.263

在 Intellij 13 中，它看起来又略有不同。以下是 Intellij 13 的说明：

1.  单击项目视图或通过单击窗口左边框上的“1：项目”按钮或按 Alt + 1 取消隐藏它
2.  找到您的项目或子模块并单击它以突出显示它，然后按 F4，或右键单击并选择“打开模块设置”（在 IntelliJ 14 上它变为 F12）
3.  单击依赖项选项卡
4.  单击右侧的“+”按钮，然后选择“Jars 或目录...”
5.  找到您的路径，然后单击确定
6.  在“选择所选文件的类别”对话框中，选择`Classes`（即使它是属性），再次按 OK 和 OK
7.  您现在可以运行您的应用程序，它将在类路径中具有选定的路径

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2012-03-14T15:45:48.953

看来 IntelliJ 11 已经改变了方法，并且检查的答案不再适用于我。万一其他人通过搜索引擎到达这里，这是我在 IntelliJ 11 中解决它的方法：

1.  转到项目结构，单击模块，然后单击您的模块
2.  选择“依赖项”选项卡
3.  单击右侧的“+”按钮并选择“罐子或目录...”
4.  添加您想要的目录（注意您可以多选），然后单击确定
5.  在出现的对话框中，选择“类”而不是“jar 目录”
6.  确保您在运行目标中使用该模块

请注意，第 5 步似乎是关键区别。如果您选择“jar 目录”，它将在 IDE 中看起来完全一样，但不会在运行时包含路径。事后似乎无法确定您之前是否选择了“类”或“jar 目录”。

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2010-07-22T09:05:02.270

您可以尝试java 应用程序启动器的**-Xbootclasspath/a:path**选项。通过描述，它指定“以冒号分隔的directires、JAR 档案和ZIP 档案的路径，以附加到默认的引导类路径。”

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2009-05-12T19:24:56.057

我在您的模块依赖项选项卡中（在项目结构对话框中）使用 Idea 8。添加“模块库”。在那里您可以选择要添加的 Jar 目录。然后确保运行配置文件在运行时使用正确模块的类路径和 JDK（这是在运行配置对话框中。

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2019-09-21T08:33:48.777

设置“VM 选项”，例如：“-cp $Classpath$;your_classpath”

[![虚拟机选项](https://i.stack.imgur.com/sWhna.png)](https://i.stack.imgur.com/sWhna.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-16T15:09:07.443

假设您的类路径中只需要**x:target/classes**。然后，您只需将此文件夹添加到您的类路径和 %IDEA%\lib\idea_rt.jar。现在它将起作用。就是这样。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-08-09T12:02:11.990

只需检查该类的目录/包是否标记为“Sources Root”。我相信在您的情况下，该包应该是应用程序或执行。

为此，请右键单击包，然后选择 Mark Directory As->Sources Root。

[![1](https://i.stack.imgur.com/NQzRl.png)](https://i.stack.imgur.com/NQzRl.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-06-10T21:17:58.787

您无需指定类文件夹。Intellij 应该能够加载它。如果“项目编译器输出”为空，您将收到此错误。

只需确保设置了以下值： **Project Settings -> Project -> Project Compiler output** to your ***projectDir/out***文件夹

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2021-03-08T09:03:19.723

*   打开设置
*   在项目设置下，选择“项目设置（1）”
*   在左侧，选择“模块”
*   选择所需的模块
*   选择“来源”选项卡
*   在树形结构中，找到要添加的目录。然后添加为源或测试源。

# javascript - Javascript 对象混淆

> ID：854269
> 
> 赞同：1
> 
> 时间：2009-05-12T18:52:28.027
> 
> 标签：javascript, javascript-events

我在这里很好地混淆了自己。我的情况如下。

```
function DesignPad() {  
 function EditBar() {  
  ...  
  this.removeHandler = function() {  
    **// how do I call Dragger.removeAsset**  
  }  
 }  
 function Dragger(){  
  ...  
  this.removeAsset = function() {}  
 }  
 this.init = function() {  
  this.editBar = new EditBar();  
  this.dragger = new Dragger();  
 }  
}  

var dp = new DesignPad();  
... 
```

我似乎无法调用 Dragger.RemoveAsset。我明白为什么，我的问题是我该怎么称呼它？

我试图将类似的东西分开（例如 Dragger / EditBar），但我似乎在我的事件处理程序中混杂了各种各样的东西。关于这些东西有什么建议、好的阅读材料等吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-12T19:31:30.897

我发现[Douglas Crockford 的 Javascript](http://www.crockford.com/javascript/)是对 JavaScript 的最佳介绍。尤其是雅虎的视频，例如：[JavaScript 编程语言](http://yuiblog.com/blog/2007/01/24/video-crockford-tjpl/)，您可以在其中了解对象是如何在 JS 中创建和继承的。

您的问题的解决方案是：

```
function DesignPad() {  
  var that = this;
 function EditBar() {  
  this.removeHandler = function() {  
    print("RemoveHandler");
    that.dragger.removeAsset();
  }  
 }  
 function Dragger() {  
  this.removeAsset = function() {
    print("RemoveAsset");
  }  
 }  
 this.init = function() {  
  this.editBar = new EditBar();  
  this.dragger = new Dragger();  
 }
}  

var dp = new DesignPad();
dp.init();
dp.editBar.removeHandler(); 
```

但正如其他人注意到的那样，您可以重构一些东西:)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T19:00:04.333

在我看来，您应该重构该代码以使其更简单。

我认为您的问题来自嵌套函数是私有的，因此您无法从外部访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T19:04:37.680

Dragger 的实例是您的 DesignPad 对象的“属性”吗？如果是这样，您可以将对该对象的引用传递给您的 removeHandler() 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T19:37:39.797

试试这个：

```
function DesignPad() {  

 function EditBar(s) {  
  super = s;
  this.removeHandler = function() {
    alert('call 1'); 
    super.dragger.removeAsset();  
  }  
 } 

 function Dragger(s){
  super = s;  
  this.removeAsset = function() {
      alert('call 2'); 
    }  
 }  

 this.init = function() {  
  this.editBar = new EditBar(this);  
  this.dragger = new Dragger(this);  
 }  

}  

var dp = new DesignPad(); 
dp.init()
dp.editBar.removeHandler();
alert('end'); 
```

# open-source - 如果 Pentaho 是开源的，我可以直接使用它吗？

> ID：854270
> 
> 赞同：16
> 
> 时间：2009-05-12T18:52:28.467
> 
> 标签：open-source, pentaho

我看到[Pentaho](http://www.pentaho.com/)想就他们的软件向我收费。我如何才能获得仪表板的底层开源软件，以了解它可以做什么，而无需与 Pentaho 营销人员打交道？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-05-12T18:58:42.620

Most commercial open source editions have a community edition that the community hacks on **if the license permits it***. Pentaho is no different from them and has a [community edition](http://community.pentaho.com/).

In these cases, the "community edition" is not the same thing as the commercial product you would buy. You may find a lot of the gloss and even some, if not a lot of the features are missing. There's no support. Yadda yadda yadda. You get the picture.

*As others have noted, not all "open source" apps need to distribute the source code in the same way as, a GPL application would. Open source, in rawest forms, just means as a licensed user, you get to see the source code.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-05-14T08:16:54.243

只是为了提供有关 pentaho 做什么和不提供什么的详细信息——他们确实提供了一个非常完整的 BI 平台作为社区版的一部分。

企业版包含的唯一内容是基于 Web 的仪表板设计器和其他一些零碎的东西 - 即根本没有。

如上所述，成为 pentaho 订阅客户的好处是他们提供支持，这对我们最终实施非常有用。

不过，也请查看他们的论坛 - 他们非常活跃，只要您的问题不是完整的新手问题，他们也会非常有帮助。尽管有支持协议，但我有时会使用论坛，因为我知道它可以更快。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-12T18:55:44.497

"Open source" is not the same thing as "free" (either "as in beer" or "as in speech").

As much as I'm not a fan of Stallman in general, this article will probably help clear up the distictions a bit: [Why "Open Source" misses the point of Free Software](http://www.gnu.org/philosophy/open-source-misses-the-point.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-12T18:55:45.230

Open Source != Free

IANAL, but I'd say you're bound to the license that the software is under.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-07-27T03:56:43.233

Suds 可以从[http://sourceforge.net/projects/pentaho/免费下载代码](http://sourceforge.net/projects/pentaho/)

他们也有一个 IRC 聊天频道，我发现它非常有帮助。

# .net - Paging in GridView using SqlDataSource

> ID：854275
> 
> 赞同：1
> 
> 时间：2009-05-12T18:53:32.520
> 
> 标签：.net, sql-server, pagination

I have a GridView that accesses data from a SqlDataSource in DataSet mode. I have paging enabled and it works, but on large datasets it takes an extraordinarily long time to pull data.

It seems like the SqlDatSource is pulling all the data, and then it's being paged at the UI level. This is obviously a lousy solution. I've looked at [Tips on speeding up a SqlDataSource?](https://stackoverflow.com/questions/685980/tips-on-speeding-up-a-sqldatasource) and it seems to be on the same topic - it looks like I'll need to implement some paging code into my SELECT statement, I'm just not sure how to do that. I'm not opposed to pulling it into a SProc if I have to, but leaving the SELECT command in the SqlDataSource would be better.

I know MySQL has LIMIT X,Y (where X is number of rows to retrieve and Y is offset). TOP doesn't seem to do the same thing, and I don't know how to get the paging information from the GridView into the SqlDataSource either.

Is that the best way to do this? (And if so, where do I start?) Or is there a better way to get effective paging from a SqlDataSource in a GridView?

(I'm using C# if it matters, but I don't think it should.)

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T19:04:53.983

ROW_NUMBER() is your friend, use like in this example:

```
DECLARE @test TABLE (LastName varchar(25),FirstName varchar(25))
INSERT INTO @test values ('Jones','Billy')
INSERT INTO @test values ('Jones','Suzie')
INSERT INTO @test values ('Jones','Beth')
INSERT INTO @test values ('Jones','Ron')
INSERT INTO @test values ('Jones','Dan')
INSERT INTO @test values ('Smith','Abby')
INSERT INTO @test values ('Smith','Debbie')
INSERT INTO @test values ('Smith','Joe')
INSERT INTO @test values ('Smith','Dan')
INSERT INTO @test values ('Brown','Matt')
INSERT INTO @test values ('Brown','Rob')

;WITH TestRank AS
(
    select
        LastName,FirstName, row_number() over(order by LastName,FirstName) AS RowNumber
        from @test
)
SELECT
    LastName,FirstName
    FROM TestRank
    WHERE RowNumber>=3 AND RowNumber<=5
    ORDER BY RowNumber 
```

have the application keep track of what is showing on a page. If you want to show 10 rows on a page return 1-11, display 1-10, if rowcount==11 display "next" link.

# java - Parsing RTF Documents with Java/JavaCC

> ID：854288
> 
> 赞同：8
> 
> 时间：2009-05-12T18:55:32.703
> 
> 标签：java, parsing, rtf, javacc

Is anybody familiar with the the RTF document format and parsing using any Java libaries. The standard way people have done this is by using the RTFEditorKit in the JDK Swing API:

[Swing RTFEditorKit API](http://java.sun.com/javase/6/docs/api/javax/swing/text/rtf/RTFEditorKit.html)

but it isn't that accurate when it comes to parsing RTF documents. In fact there's a comment in the API:

> The RTF support was not written by the Swing team. In the future we hope to improve the support provided.

I don't think I'm going to wait for this to happen :)

The other approach taken is to define a grammar using JavaCC and generate a parser. This works better, but I'm having trouble finding a complete grammar. I've tried:

[PMD Applied JavaCC Grammar](http://pmdapplied.com/RTFParser.jj)

which is ok and the following (which is the best so far).

[Koders RTFParserDelegate and ETranslate Grammar](http://www.koders.com/java/fidDCE957FF940C81AB9D209FCFF20EFCE51B559958.aspx)

There are various implementations of the ETranslate grammar about (I know the [Nutch](http://lucene.apache.org/nutch/) API may use this). **Does anybody know which is the most accurate grammar or whether there is a better approach to this?**

I could start ploughing through the JavaCC docs to understand the .jj files and test it against the RTF files... this is my current approach, but it's taking a while... any help would be appreciated

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:59:52.057

> 有谁知道哪个是最准确的语法，或者是否有更好的方法？

很多年前，我花了一些时间用 C#阅读[RTF](http://msdn.microsoft.com/en-us/library/office/aa140277%28v=office.10%29.aspx)（[维基百科）。](http://en.wikipedia.org/wiki/Rich_Text_Format)我之所以说阅读，是因为如果您详细了解 RTF 并按照设计的方式使用它，您会意识到 RTF 并不意味着在编辑时被作为一个整体阅读并一遍又一遍地作为一个整体进行解析。在文档中，您将找到 RTF 的[语法](http://msdn.microsoft.com/en-us/library/office/aa140284%28v=office.10%29.aspx)，但不要误以为您应该使用词法分析器/解析器。在文档中，他们为 RTF提供了一个[示例阅读器。](http://msdn.microsoft.com/en-us/library/office/aa140295%28v=office.10%29.aspx)

请记住，RTF 是在很多年前创建的，当时内存以 KB 而不是 MB 为单位，并且以传统方式编辑数百页的长文档会占用系统资源。因此，RFT 能够在更小的小节中进行编辑，而无需加载或修改整个文档。这就是它能够在内存有限的情况下处理如此大的文档的原因。这也是为什么语法起初看起来很奇怪的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-13T11:46:54.937

Presumably, the source of OpenOffice contains what you're looking for.

# java - 使用 spring/struts 框架在 JSP 头文件中显示用户全名的最佳方式？

> ID：854296
> 
> 赞同：4
> 
> 时间：2009-05-12T18:57:01.233
> 
> 标签：java, spring, jsp, struts, tiles

我有一个使用 Spring 与 services/dao/database 集成的 JSP struts 应用程序。基本上，struts 使用 spring 从数据库中获取数据，它构建表单并将它们转发到 JSP 文件。

我有一个使用 Tiles 注入到每个 JSP 文件中的头文件。我想在标题内的每一页上显示“Welcome John Doe”。其中“John Doe”是当前登录用户的名称。

最好的方法是什么？我能想到的解决方案是：

1.  使用 Spring Filter 捕获 http 请求。使用包含用户 id(*) 的 cookie 从数据库加载用户，并将名称放在名为“CurrentUser”的会话 bean 中

2.  在“header.jsp”中，获取spring应用上下文。使用它，加载 bean “CurrentUser”并获取名称。将名称放在 html 中。

我想我可以让这个工作。但我不确定这是最好的方法。对我的方法有任何想法吗？

* * *

(*) 当然，cookie 会被加密

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-13T15:28:07.090

尽管对于您相当简单的用例来说它*可能*是一个非常大的锤子，但我们已经通过使用[ELResolver](http://java.sun.com/javaee/5/docs/api/javax/el/ELResolver.html)获得了一个非常简洁的 spring-jsp 集成（需要 jsp 2.1！） 。通过遵循[本教程](http://java.sun.com/mailers/techtips/enterprise/2007/TechTips_Jan07.html)，您基本上可以将任何 Spring 托管 bean 注入您的 el-context 并允许使用 jsp-el 访问它，如下所示：

${spring.mybean.myproperty}

您可以选择将预定义的 bean 注入到您的 el-context 中，或者只是将“mybean”传递给 getBean 并允许几乎所有 spring 管理的东西都可以从 jsp 访问。mybean 可以很容易地成为会话范围的 spring bean。

不过，我不完全确定这将如何与瓷砖对齐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T19:03:07.137

`User`您还没有在 Session 中存储某种对象吗？

如果是这样，我只需向该域对象添加一个“getFullName()”方法，并在返回它时让 DAO 填充它。理想情况下，您应该在用户登录时填充`User`对象，将其存储在会话中，并且不需要在每个页面请求上再次从数据库中加载所有用户的详细信息。

（你没有使用 Spring Security 吗？如果是这样，它们提供了一种非常简单的方法来`UserDetails`在 Session 中存储 -like 对象，并且可以轻松访问它。）

我会投票反对你的两种方法，因为

1.  这意味着（至少）每个页面请求有一个额外的数据库调用
2.  如果其他用户在同一个上下文中共享同一个 bean，这将不起作用。此外，您真的不应该让 JSP 文件（这是您的表示层）直接与数据服务交互。

# objective-c - 在数组控制器上使用谓词过滤相关对象

> ID：854301
> 
> 赞同：5
> 
> 时间：2009-05-12T18:58:58.110
> 
> 标签：objective-c, cocoa, core-data, cocoa-bindings

我有一个使用核心数据和绑定的应用程序。我想要一个 NSSearchField 可以搜索绑定到 NSTableView 的 NSArrayController。数组控制器包含具有“名称”字段的核心数据对象。我已经像这样设置了 NSSearchField：

```
Bind To: the array controller
Controller Key: filterPredicate
Predicate Format: name contains[c] $value 
```

这行得通。我想扩展它，以便它可以搜索与数组控制器中的对象相关的对象字段。数组控制器中的每个对象都与另一种称为“tag”的对象具有一对多关系，该对象具有一个名为“name”的字段。我尝试了以下方法：

```
Bind To: the array controller
Controller Key: filterPredicate
Model Key Path: tags
Predicate Format: name contains[c] $value 
```

然而，这不起作用。当文本输入到 NSSearchField 中时，NSTableView 中什么也没有发生。它有什么问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-12T20:01:23.250

绑定到`tags`作为模型键路径尝试将搜索字段谓词绑定到键路径 arrayController.filterPredicate.tags。由于数组控制器的 filterPredicate 属性没有 tags 属性，您可能会收到正在静默记录的“未找到键”异常。相反，回想一下 NSArrayController 的 filterPredicate 应用于数组的成员，您希望绑定设置如下：

```
Bind To: <array controller>
Controller Key: filterPredicate
Predicate Format: ANY self.tags contains[c] $value 
```

`self.tags`可以写成 just `tags`，但我认为这更清楚地表明标签是应用谓词的对象的属性。

# php - Download contents of the PHP generated page from another PHP script

> ID：854302
> 
> 赞同：1
> 
> 时间：2009-05-12T18:59:26.723
> 
> 标签：php, code-generation, download, content-disposition

I have a PHP script on a server that generates the XML data on the fly, say with Content-Disposition:attachment or with simple echo, doesn't matter. I'll name this file www.something.com/myOwnScript.php

On another server, in another PHP script I want to be able to get this file (to avoid "saving file to disk") as a string (using the path www.something.com/myOwnScript.php) and then manipulate XML data that the script generates.

Is this possible without using web services? security implications?

Thanks

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-12T19:01:54.127

Simple answer, yes:

```
$output = file_get_contents('http://www.something.com/myOwnScript.php');

echo '<pre>';
print_r($output);
echo '</pre>'; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-12T19:03:25.047

If you want more control over how you request the data (spoof headers, send post fields etc.) you should look into cURL. [link text](http://php.net/curl)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T19:07:34.837

如果您在共享主机上，您可能会发现无法使用`file_get_contents`. 这主要是因为它是允许您包含远程文件的相同权限集的一部分。反正...

如果你被困在这种情况下，你也许可以使用[CURL](http://php.net/manual/en/curl.examples-basic.php)：

```
<?php
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, "example.com");
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        $output = curl_exec($ch);
        curl_close($ch);     
?> 
```

它是更多的代码，但它仍然很简单。您还可以通过高度可配置的浏览器发布数据、设置标题、cookies……任何您可以做的事情。当人们试图阻止机器人时，这非常有用。

# iphone - How to set rectangle border for custom type UIButton

> ID：854306
> 
> 赞同：12
> 
> 时间：2009-05-12T19:01:07.093
> 
> 标签：iphone, objective-c, cocoa-touch

I am trying to set an image as the background of a custom UIButton. I was able to set a background image for the "rounded rect" UIButton in interface builder, but now the borders have vanished. Is there any way to retain the borders? Also, I would like to make the borders show up rectangular instead of rounded.

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2011-10-06T09:47:56.803

```
 #import <QuartzCore/QuartzCore.h> // don't forget to add this in your file
    CALayer * layer = [yourUIButton layer];
    [layer setMasksToBounds:YES];
    [layer setCornerRadius:0.0]; //when radius is 0, the border is a rectangle
    [layer setBorderWidth:1.0];
    [layer setBorderColor:[[UIColor grayColor] CGColor]]; 
```

i know this is an old question, but still i would like to post my answer here. since i was looking for answer but got this resolved myself in an easy way.

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-05-12T19:29:33.427

查看 的`cornerRadius`和`borderWidth`的`borderColor`属性`CALayer`。这些属性是 iPhone OS 3.0 的新属性。

您可能想要子类`UIButton`化，然后在构造函数中设置这些属性。您的按钮有一个图层属性，您可以访问以设置这些边框属性。

这是一个例子：

```
- (id)initWithFrame:(CGRect)frame {
if(self = [super initWithFrame:frame]) {

    [self.layer setBorderWidth:1.0];
    [self.layer setCornerRadius:5.0];
    [self.layer setBorderColor:[[UIColor colorWithWhite:0.3 alpha:0.7] CGColor]];
}

return self;
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-01-18T10:57:54.890

您还可以在 IB 中使用“用户定义的运行时属性”来设置圆角，如下图所示。

[http://i.stack.imgur.com/uBkuB.png](http://i.stack.imgur.com/uBkuB.png)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-03-14T17:46:37.887

我想补充一下 nanshi 和 Jonathan 提供的答案。

为了访问图层的`border`和`cornerRadius`属性，您首先需要导入 QuartzCore 框架。

`#import <QuartzCore/QuartzCore.h>`

否则您将无法访问这些属性。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-13T06:47:34.863

当您在按钮中设置背景图像时，按钮轮廓消失。将它们包含在您的图像中，如果您需要不同的尺寸，请查看 UIImage

`stretchableImageWithLeftCapWidth:topCapHeight:`

方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-08-02T12:50:52.760

您可以通过访问按钮的 layer 属性来设置 CALayer 的边框属性。

首先，添加石英

```
#import <QuartzCore/QuartzCore.h> 
```

设置属性：

```
[[myButton layer] setBorderWidth:2.0f];
[[myButton layer] setBorderColor:[UIColor greenColor].CGColor]; 
```

# c# - check box focus appearance to look like mousehover

> ID：854307
> 
> 赞同：0
> 
> 时间：2009-05-12T19:01:24.503
> 
> 标签：c#, winforms

I'm trying to find out how to make the appearance of a check box look like it does when you hover a mouse over it. I have a group of check boxes without labels and I want to indicate focus this way. I'm currently drawing a focus rectangle around them and it works fine but I'd like to try it this way instead.

I know I can paint it myself but I figure it's being done already so I'd rather take advantage of that if possible.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-22T18:37:56.273

您可以使用 CheckBoxRenderer（如果您的应用程序使用视觉样式）或 ControlPaint.DrawCheckBox（如果您不使用视觉样式）。

如果您想使用视觉样式，但您的最终用户可能有或没有视觉样式，或者如果他们会在通过远程桌面连接时运行应用程序（很可能），则需要检查 VisualStyleRenderer.IsSupported 静态属性以确定使用哪种方法；在不支持视觉样式的情况下尝试使用 VisualStyleRenderer（CheckBoxRenderer 从中下降）将导致异常。

# css - Fixed footer obscure firefox search match

> ID：854315
> 
> 赞同：0
> 
> 时间：2009-05-12T19:02:35.080
> 
> 标签：css, firefox, search, hidden, footer

I have a site with a fixed footer at the bottom of every page. The content area above the footer has a appropriate margin to ensure that content does not hide behind the footer when scrolling down.

However, when a simple text search if performed in the browser (firefox) the search term is usually hidden behind the footer as the page normally (without the footer that is) scrolls to just bring the search term into view.

How can I work around this issue?

I have one idea in mind: Make the content area of a fixed height (browser viewport height - footer height) and give it a scroll instead of the browser. Not the best solution but that is an option. What would be the drawbacks to this option?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-12T19:06:53.247

我之前在自己的一个项目中就注意到了这一点，但是，这个小小的不便真的足够重要，足以让您更改页面的布局吗？我不会**仅仅**因为它不必要地增加了代码的复杂性而建议您正在考虑的修复程序，并且用户体验可能会受到影响（比您描述的问题要严重得多）。

我就顺其自然吧。

# c# - Silverlight - TreeView 顶部和第一个 TreeViewItem 之间的空间

> ID：854321
> 
> 赞同：1
> 
> 时间：2009-05-12T19:04:01.550
> 
> 标签：c#, silverlight, treeview

我对**[这个](https://stackoverflow.com/questions/852899/silverlight-space-above-below-treeview-items)**有一个必然的问题。

如何更改 TreeView 控件顶部和第一个 TreeViewItem 之间的间距？具体来说，我想减少控件顶部和第一项之间的空间。与其他问题一样，我猜我需要重新设置 TreeView 的样式。但是，我需要改变什么风格，哪个属性控制那个特定的空间？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T19:26:06.507

您可以使用 TreeView 的填充：

```
<TreeView Name="treeView1" Padding="0,50,0,0 ">
            <TreeViewItem Header="test" Selected="TreeViewItem_Selected">
                <TreeViewItem Header="sub test" />
            </TreeViewItem>
        </TreeView> 
```

这将在树视图内部的顶部添加 50 的填充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-13T13:05:49.677

[我在这里](http://silverlight.net/forums/t/95549.aspx)的 Silverlight,net 论坛上收到了我的问题的答案。本质上，我需要添加一个控件模板并更改 ItemPresenter 上的边距。

```
<ctl:TreeView>
  <ctl:TreeView.Template>
    <ControlTemplate TargetType="ctl:TreeView">
      <Grid x:Name="Root" >
        <Grid.Resources>
          <SolidColorBrush x:Key="BorderBrush" Color="#FF000000" />
        </Grid.Resources>
        <Border x:Name="Border" BorderBrush="{StaticResource BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="2">
          <Border Padding="{TemplateBinding Padding}" Background="{TemplateBinding Background}" Margin="1">
            <ScrollViewer x:Name="ScrollViewer" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto" Background="{x:Null}" BorderBrush="Transparent" BorderThickness="0" IsTabStop="False" TabNavigation="Once">
              <ItemsPresenter x:Name="TreeItems" Margin="5" />
            </ScrollViewer>
          </Border>
        </Border>
      </Grid>
    </ControlTemplate>
  </ctl:TreeView.Template>
<ctl:TreeView> 
```

# c# - XML 异常：无效字符

> ID：854335
> 
> 赞同：13
> 
> 时间：2009-05-12T19:06:51.717
> 
> 标签：c#, xml, linq-to-xml

我正在开发一个小项目，该项目从一个长时间运行的应用程序中接收字符串形式的 XML 数据。我正在尝试将此字符串数据加载到`XDocument`( `System.Xml.Linq.XDocument`) 中，然后从那里执行一些 XML Magic 并为数据报告创建一个 xlsx 文件。

有时，我收到包含无效 XML 字符的数据，当尝试将字符串解析为. 时`XDocument`，我收到此错误。

> [System.Xml.XmlException] 消息：'?'，十六进制值 0x1C，是无效字符。

由于我无法控制远程应用程序，因此您可以期待任何类型的角色。

我很清楚 XML 有一种方法可以在其中放置诸如`&#x1C`或类似的字符。

如果可能的话，我真的很想保留所有数据。如果没有，那就顺其自然吧。

* * *

我曾考虑过以编程方式编辑响应字符串，然后返回并尝试在抛出异常时重新解析，但我尝试了一些方法，但似乎都没有成功。

谢谢你的想法。

代码是这样的：

```
TextReader  tr;
XDocument  doc;

string           response; //XML string received from server. 
... 
tr = new StringReader (response);   

try
{
    doc = XDocument.Load(tr);
}
catch (XmlException e)
{
    //handle here?
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-08-02T15:40:09.153

您可以使用*XmlReader*并将*XmlReaderSettings.CheckCharacters*属性设置为*false*。尽管有无效字符，这将使您能够读取 XML 文件。从那里您可以将其导入传递给 XmlDocument 或 XDocument 对象。

[您可以在我的博客](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)中了解更多信息。

要将数据加载到*System.Xml.Linq.XDocument*，它看起来有点像这样：

```
XDocument xDocument = null;
XmlReaderSettings xmlReaderSettings = new XmlReaderSettings { CheckCharacters = false };
using (XmlReader xmlReader = XmlReader.Create(filename, xmlReaderSettings))
{
    xmlReader.MoveToContent();
    xDocument = XDocument.Load(xmlReader);
} 
```

更多信息可以在[这里](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)找到。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-12T19:26:33.573

XML 几乎可以处理任何字符，但有范围、[控制代码等](http://www.w3.org/TR/xml/#NT-Char)，它不会。

如果你不能让他们修复他们的输出，你最好的选择是清理你收到的原始数据。您需要用您记下的字符引用格式替换非法字符。

（你甚至不能求助于 CDATA，因为那里没有办法逃避这些字符。）

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-05-12T19:13:09.540

[这篇博文](http://seattlesoftware.wordpress.com/2008/09/11/hexadecimal-value-0-is-an-invalid-character/)中描述的内容会有帮助吗？

基本上，他创建了一个净化 xml 流。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T19:10:23.490

如果您的输入不是 XML，您应该使用 Tidy 或 Tagsoup 之类的东西来清理混乱。

他们会接受任何输入，并希望从中创建有用的 DOM。

我不知道如何调用相关的黑暗面库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-12T19:15:08.413

垃圾进垃圾出。如果远程应用程序正在向您发送垃圾，那么您将得到的就是这些。如果他们认为他们正在发送 XML，那么就需要对其进行修复。在这种情况下，解决他们的错误并没有给他们任何好处。

您还应该确保他们认为他们发送的内容。%1C 对他们意味着什么？他们想要它是什么？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-12T19:15:48.443

恕我直言，最好的解决方案是修改代码/程序/任何产生无效 XML 的东西，这些 XML 被提供给您的程序。不幸的是，这并不总是可能的。在这种情况下，您需要在尝试加载文档之前转义所有 < 0x20 的字符。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-12T19:20:49.137

如果您确实无法修复源 XML 数据，请考虑采用我在[此答案](https://stackoverflow.com/questions/844599/how-should-i-strip-invalid-xml-characters-from-a-stream-in-j2me-org-xml-sax-saxp/844647#844647)中描述的方法。基本上，您创建一个[TextReader](http://msdn.microsoft.com/en-us/library/system.io.textreader.aspx)子类（例如 StripTextReader），它包装现有的 TextReader (tr) 并丢弃无效字符。

# java - 使用 Jettison 在 Java 中从 JSON 到 DOM

> ID：854344
> 
> 赞同：3
> 
> 时间：2009-05-12T19:09:53.787
> 
> 标签：java, xml, json, dom, jettison

到目前为止，这是一个失败的故事，欢迎提出任何建议。我尝试了以下方法：

## XMLStreamReader to Document 使用 JAXP 和 Saxon

编码：

```
JSONObject obj = new JSONObject("{\"alice\":{\"bob\": \"a\"}}");
AbstractXMLStreamReader reader = new MappedXMLStreamReader(obj);

StAXSource source = new StAXSource(reader);
Document document = XMLUtils.createDocument();
DOMResult result = new DOMResult(document);
Transformer identity = TransformerUtils.getIdentityTransformer();
identity.transform(source, result);
result.getNode(); 
```

这失败了，因为我们使用的 Saxon 转换器不支持 StAXSource。例外是：

```
org.orbeon.saxon.trans.DynamicError: A source of type javax.xml.transform.stax.StAXSource is not supported in this environment
    org.orbeon.saxon.event.Sender.send(Sender.java:185)
    org.orbeon.saxon.IdentityTransformer.transform(IdentityTransformer.java:29)
    org.orbeon.oxf.xml.TransformerWrapper.transform(TransformerUtils.java:597)
    org.apache.jsp.gaga_jsp._jspService(gaga_jsp.java:93)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:98)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:328)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:315)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:265)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803) 
```

## XMLStreamReader to Document 使用 JAXP 和 Xalan

编码：

```
JSONObject obj = new JSONObject("{\"alice\":{\"bob\": \"a\"}}");
AbstractXMLStreamReader reader = new MappedXMLStreamReader(obj);

StAXSource source = new StAXSource(reader);
Document document = XMLUtils.createDocument();
DOMResult result = new DOMResult(document);
Transformer identity = orbeon.apache.xalan.processor.TransformerFactoryImpl.newInstance().newTransformer();
identity.transform(source, result);
result.getNode(); 
```

Xalan 2.5.1（我们正在使用的版本）失败了。最新版本是 2.7.1，也许他们在该版本中添加了对 StAXSource 的支持。

```
javax.xml.transform.TransformerException: Can't transform a Source of type javax.xml.transform.stax.StAXSource
    orbeon.apache.xalan.transformer.TransformerIdentityImpl.transform(TransformerIdentityImpl.java:372)
    org.apache.jsp.gaga_jsp._jspService(gaga_jsp.java:82)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:98)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:328)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:315)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:265)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803) 
```

## 使用 XMLEventWriter 和 DOMResult 的 XMLStreamReader 到文档

编码：

```
JSONObject obj = new JSONObject("{\"alice\":{\"bob\": \"a\"}}");
AbstractXMLStreamReader streamReader = new MappedXMLStreamReader(obj);
XMLInputFactory readerFactory = XMLInputFactory.newInstance();
XMLEventReader eventReader = readerFactory.createXMLEventReader(streamReader);

Document document = XMLUtils.createDocument();
DOMResult result = new DOMResult(document);
XMLOutputFactory outputFactory = XMLOutputFactory.newInstance();
XMLEventWriter eventWriter = outputFactory.createXMLEventWriter(result);
eventWriter.add(eventReader);
eventWriter.close();

result.getNode(); 
```

这导致了 Xerces 中的 NPE：

```
java.lang.NullPointerException
    orbeon.apache.xerces.dom.CoreDocumentImpl.setXmlVersion(CoreDocumentImpl.java:850)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    com.sun.xml.internal.stream.writers.XMLDOMWriterImpl.writeStartDocument(XMLDOMWriterImpl.java:583)
    com.sun.xml.internal.stream.writers.XMLEventWriterImpl.add(XMLEventWriterImpl.java:96)
    com.sun.xml.internal.stream.writers.XMLEventWriterImpl.add(XMLEventWriterImpl.java:72)
    org.apache.jsp.gaga_jsp._jspService(gaga_jsp.java:95)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:98)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:328)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:315)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:265)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803) 
```

## 使用 XMLEventWriter 和 Writer 的 XMLStreamReader 到文档

编码：

```
JSONObject obj = new JSONObject("{\"alice\": {\"bob\": \"a\"}}");
AbstractXMLStreamReader streamReader = new MappedXMLStreamReader(obj);
XMLInputFactory readerFactory = XMLInputFactory.newInstance();
XMLEventReader eventReader = readerFactory.createXMLEventReader(streamReader);

StringWriter stringWriter = new StringWriter();
XMLOutputFactory outputFactory = XMLOutputFactory.newInstance();
XMLEventWriter eventWriter = outputFactory.createXMLEventWriter(stringWriter);
eventWriter.add(eventReader);
eventWriter.close();

out.print(stringWriter.toString()); 
```

使用 Java 5，它会寻找`com.bea.xml.stream.MXParserFactory`无处可寻的：

```
javax.xml.stream.FactoryConfigurationError: Provider com.bea.xml.stream.MXParserFactory not found
    javax.xml.stream.FactoryFinder.newInstance(FactoryFinder.java:72)
    javax.xml.stream.FactoryFinder.find(FactoryFinder.java:178)
    javax.xml.stream.FactoryFinder.find(FactoryFinder.java:92)
    javax.xml.stream.XMLInputFactory.newInstance(XMLInputFactory.java:136)
    org.apache.jsp.gaga_jsp._jspService(gaga_jsp.java:79)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:98)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:328)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:315)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:265)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803) 
```

使用 Java 6，它会导致 Sun 的 NPE `XMLEventAllocatorImpl`：

```
java.lang.NullPointerException
    com.sun.xml.internal.stream.events.XMLEventAllocatorImpl.getXMLEvent(XMLEventAllocatorImpl.java:82)
    com.sun.xml.internal.stream.events.XMLEventAllocatorImpl.allocate(XMLEventAllocatorImpl.java:55)
    com.sun.xml.internal.stream.XMLEventReaderImpl.nextEvent(XMLEventReaderImpl.java:86)
    com.sun.xml.internal.stream.writers.XMLEventWriterImpl.add(XMLEventWriterImpl.java:72)
    org.apache.jsp.gaga_jsp._jspService(gaga_jsp.java:85)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:98)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:328)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:315)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:265)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803) 
```

## 使用 BadgerFishDOMDocumentParser

代码：

```
ByteArrayInputStream bais = new ByteArrayInputStream("{\"alice\": {\"bob\": \"a\"}}".getBytes());
Document resDOM = new BadgerFishDOMDocumentParser().parse(bais); 
```

这为我们提供了 Sun 的 NPE `XMLEventAllocatorImpl`：

```
java.lang.NullPointerException
    com.sun.xml.internal.stream.events.XMLEventAllocatorImpl.getXMLEvent(XMLEventAllocatorImpl.java:82)
    com.sun.xml.internal.stream.events.XMLEventAllocatorImpl.allocate(XMLEventAllocatorImpl.java:55)
    com.sun.xml.internal.stream.XMLEventReaderImpl.nextEvent(XMLEventReaderImpl.java:86)
    com.sun.xml.internal.stream.writers.XMLEventWriterImpl.add(XMLEventWriterImpl.java:72)
    org.codehaus.jettison.AbstractDOMDocumentParser.parse(AbstractDOMDocumentParser.java:66)
    org.apache.jsp.gaga_jsp._jspService(gaga_jsp.java:79)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:98)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:328)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:315)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:265)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803) 
```

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-07-06T23:58:41.833

不，出于某种原因，我认为 Xalan 不支持 Stax。[撒克逊人](http://saxon.sourceforge.net/)有，所以也许你可以试试？

但如果没有，也许你应该从 Stax 构建一个 DOM 树，使用[链接文本](http://staxmate.codehaus.org)，就像[这篇文章](http://www.cowtowncoder.com/blog/archives/2009/06/entry_270.html)解释的那样？Xalan 确实接受 DOM 源作为输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T20:26:04.617

JSON 不是 XML - 看起来您正在尝试使用 XML 解析器解析 JSON 对象？但是，我可能会误解您的意思。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-11-05T23:05:30.433

我也遇到了这个问题，并且经历了与 OP 相同的挫折。在某处的woodstox 邮件列表中提到了这种行为作为错误。但是，我能够开发一个解决方案。我编写了一个非常基本的 XMLEventReader，它包装了一个 XMLStreamReader，它做得很好。两个重要说明： 1) 此代码按原样提供；具体来说，除了我自己的有限使用之外，我还没有彻底测试过它，2）这个问题在互联网上的其他地方几乎不存在，以及这似乎是 Jettison 应该执行的一个相对基本的操作，强烈建议我，我们正在做一些根本错误的事情，这个解决方案不应该是必要的。用你自己的判断。

首先，这是一个有效的 XMLEventReader：

```
import java.util.LinkedList;
import java.util.Queue;

import javax.xml.stream.XMLEventReader;
import javax.xml.stream.XMLStreamException;
import javax.xml.stream.XMLStreamReader;
import javax.xml.stream.events.XMLEvent;

import com.sun.xml.internal.stream.events.AttributeImpl;
import com.sun.xml.internal.stream.events.CharacterEvent;
import com.sun.xml.internal.stream.events.CommentEvent;
import com.sun.xml.internal.stream.events.DTDEvent;
import com.sun.xml.internal.stream.events.EndDocumentEvent;
import com.sun.xml.internal.stream.events.EndElementEvent;
import com.sun.xml.internal.stream.events.NamespaceImpl;
import com.sun.xml.internal.stream.events.ProcessingInstructionEvent;
import com.sun.xml.internal.stream.events.StartDocumentEvent;
import com.sun.xml.internal.stream.events.StartElementEvent;

public class WorkingXMLEventReader implements XMLEventReader {

    private final XMLStreamReader streamReader;
    private final Queue<XMLEvent> eventQueue = new LinkedList<XMLEvent>();

    public WorkingXMLEventReader (XMLStreamReader streamReader) {
        this.streamReader = streamReader;
    }

    @Override public Object next () {
        try {
            return nextEvent();
        } catch (XMLStreamException x) {
            return null;
        }
    }

    @Override public void remove () {
        throw new UnsupportedOperationException("WorkingXMLEventReader iterator interface does not support remove()");
    }

    @Override public void close () throws XMLStreamException {
        streamReader.close();
        eventQueue.clear();
    }

    @Override public String getElementText () throws XMLStreamException {
        return streamReader.getElementText();
    }

    @Override public Object getProperty (String key) throws IllegalArgumentException {
        return streamReader.getProperty(key);
    }

    @Override public boolean hasNext () {
        try {
            return !eventQueue.isEmpty() || streamReader.hasNext();
        } catch (XMLStreamException x) {
            return false;
        }
    }

    @Override public XMLEvent nextEvent () throws XMLStreamException {
        if (eventQueue.isEmpty())
            parseEvents(eventQueue, streamReader, streamReader.next());
        return eventQueue.remove();
    }

    @Override public XMLEvent nextTag () throws XMLStreamException {
        if (eventQueue.isEmpty())
            parseEvents(eventQueue, streamReader, streamReader.nextTag());
        return eventQueue.remove();        
    }

    @Override public XMLEvent peek () throws XMLStreamException {
        return eventQueue.peek();
    }

    protected static void parseEvents (Queue<XMLEvent> events, XMLStreamReader reader, int type) {
        switch (type) {
        case XMLEvent.START_ELEMENT: 
            events.add(new StartElementEvent(reader.getName()));
            break;
        case XMLEvent.END_ELEMENT: 
            events.add(new EndElementEvent(reader.getName()));
            break;
        case XMLEvent.CDATA:
            events.add(new CharacterEvent(reader.getText(), true, false));
            break;
        case XMLEvent.SPACE:
            events.add(new CharacterEvent(reader.getText(), false, true));
            break;
        case XMLEvent.CHARACTERS: 
            events.add(new CharacterEvent(reader.getText(), false, false));
            break;
        case XMLEvent.ATTRIBUTE:
            for (int n = 0; n < reader.getAttributeCount(); ++ n) {
                AttributeImpl attr = new AttributeImpl(reader.getAttributePrefix(n), 
                        reader.getAttributeNamespace(n), reader.getAttributeLocalName(n), 
                        reader.getAttributeValue(n), reader.getAttributeType(n));
                events.add(attr);
            }
            break;
        case XMLEvent.NAMESPACE:
            for (int n = 0; n < reader.getNamespaceCount(); ++ n) {
                NamespaceImpl ns = new NamespaceImpl(reader.getNamespacePrefix(n), 
                        reader.getNamespaceURI(n));
                events.add(ns);
            }
            break;
        case XMLEvent.PROCESSING_INSTRUCTION:
            events.add(new ProcessingInstructionEvent(reader.getPITarget(), reader.getPIData()));
            break;
        case XMLEvent.COMMENT:
            events.add(new CommentEvent(reader.getText()));
            break;
        case XMLEvent.START_DOCUMENT:
            events.add(new StartDocumentEvent(reader.getEncoding(), reader.getVersion()));
            break;
        case XMLEvent.END_DOCUMENT:
            events.add(new EndDocumentEvent());
            break;
        case XMLEvent.DTD:
            events.add(new DTDEvent(reader.getText()));
            break;
        }   
    }

} 
```

接下来，这里是如何将它用于 OP 的示例：

```
XMLStreamReader streamReader = new MappedXMLStreamReader(new JSONObject("{\"alice\":{\"bob\": \"a\"}}"));
XMLEventReader eventReader = new WorkingXMLEventReader(streamReader);

Document document = DocumentBuilderFactory.newInstance().newDocumentBuilder().newDocument();
XMLEventWriter eventWriter = XMLOutputFactory.newInstance().createXMLEventWriter(new DOMResult(document));
eventWriter.add(eventReader);
eventWriter.close();

// test
Source testSource = new DOMSource(document);
Result testResult = new StreamResult(System.out);
TransformerFactory.newInstance().newTransformer().transform(testSource, testResult); 
```

输出应该是这样的：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?><alice><bob>a</bob></alice> 
```

希望这可以帮助某人。

# visual-studio-2008 - 内置数据库

> ID：854352
> 
> 赞同：2
> 
> 时间：2009-05-12T19:11:33.270
> 
> 标签：visual-studio-2008, sql-server-2005

什么是内置数据库？我应该怎么做才能在 Visual Studio 2008 的解决方案资源管理器窗口中获取我的 MS SQL 数据库的副本，以便当我复制解决方案文件夹时，数据库文件将与它一起复制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T19:41:30.960

除了已经提到的[SQL Express](http://www.microsoft.com/express/sql/default.aspx)，您还可以使用[SQL Server Compact Edition](http://www.microsoft.com/Sqlserver/2005/en/us/compact.aspx)。

来自 MS SQL Server 站点“SQL Server Compact 3.5 是一个免费、易于使用的嵌入式数据库引擎，让开发人员能够构建在所有 Windows 平台（包括 Windows XP、Vista、Pocket PC 和 Smartphone）上运行的强大的 Windows 桌面和移动应用程序。”

SQL Server 站点上还提供了[Compact 和 Express 版本](http://download.microsoft.com/download/A/4/7/A47B7B0E-976D-4F49-B15D-F02ADE638EBE/Compact_Express_Comparison.doc)之间的比较文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T19:19:05.740

内置数据库类似于 SQLite 或已弃用的 MS Access Jet 引擎；允许在不依赖外部程序的情况下访问数据库结构的系统。

这回答了你的“是什么”问题。其余的取决于你在做什么，这是令人困惑的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T19:23:46.683

我认为 VS 的内置数据库使用 Sql Server Express Edition。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T19:25:11.017

简单的答案是单击项目/添加新项目选择数据，然后选择您想要的类型。LINQ to SQL 可能是最简单的开始。

对于 ADO.Net，选择“数据集”。然后从服务器资源管理器中，您可以添加到您的数据的连接。从那时起，您只需拖放即可。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-12T19:26:41.047

[从http://www.microsoft.com/express/](http://www.microsoft.com/express/)安装 SQL Server Express 。

# python - 如何在 Google App Engine 上构建 flex 和 python 代码之间建立通信

> ID：854353
> 
> 赞同：0
> 
> 时间：2009-05-12T19:11:49.760
> 
> 标签：python, apache-flex, google-app-engine

我想使用带有 GAE 的 flex 客户端进行通信，我可以使用 XMl 从 GAE 到 FLex 进行通信，但是我应该如何从 flex3 发布到 App Engine 上的 python 代码。

谁能给我一个关于如何将登录信息从 Flex 发送到 python 的提示任何想法都给我一些例子.....请给我一些帮助

问候， 拉迪卡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T19:54:38.240

我已经能够使用在[GAE SWF 项目](http://gaeswf.appspot.com/)中找到的示例在 GAE 上使用 flex ，它使用[PyAMF](http://pyamf.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T19:22:11.367

使用 URLRequest 类从 Flex 向您的 AppEngine 应用程序执行 HTTP 发布。

# php - 您如何看待返回选择对象而不是语句结果？

> ID：854359
> 
> 赞同：1
> 
> 时间：2009-05-12T19:12:37.700
> 
> 标签：php, database, zend-framework

我很想知道从像'$selectObj = getSomethingByName($name)'这样的方法返回一个选择对象然后将它传递给像'getResult($selectObj)'这样的另一个方法是否是个好主意诡计。这个想法是能够将选择对象传递给任何有用的函数，如'setLimit(10)'或addCriteria('blabla')，具体取决于我的模型......

但是这样做是个好主意吗？它可能是“不安全的”，因为用户将能够自己修改对象，我不应该这样做..

我以前像上面那样做简单的方法，但是将结果作为一行返回......但是当你有复杂的语句取决于不同的表时，有时会很痛苦..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-12T19:52:56.137

您面临的问题（取决于不同表的复杂语句）通常是 ORM 框架的一个古老而普遍的问题。SQL 可以做很多事情，而 ORM 做得不是很好。不可避免地，您必须通过在 Controller 或 View 中编写大量复杂的代码来弥补复杂性的不同。

相反，使用[域模型](http://en.wikipedia.org/wiki/Domain_model)模式并将复杂的多表数据库逻辑封装到一个地方，这样您的控制器和视图就不必了解所有杂乱的细节。他们只知道您的领域模型类的接口，并且该类有唯一的责任知道如何从数据库中获取信息。

记住：一个模型“ [HAS-A](http://en.wikipedia.org/wiki/Has-a) ”表（或多个表）——而不是模型“ [IS-A](http://en.wikipedia.org/wiki/Is-a) ”表。

# visual-studio-2008 - Visual Studio 在批处理文件中插入无效字符

> ID：854360
> 
> 赞同：67
> 
> 时间：2009-05-12T19:12:38.417
> 
> 标签：visual-studio-2008, batch-file

我有一些批处理文件用于帮助自动化创建和重新加载开发数据库的过程。在 Visual Studio（即，在 VS 数据库项目中）创建和维护这些批处理文件是有意义的。它们看起来很简单，像这样：

```
@echo off
echo Setting server and db from defaults.
set SERVERNAME=(LOCAL)
set DB=PLEDGES
echo Creating tables on server %SERVERNAME% and database %DB%
sqlcmd -S %SERVERNAME% -d %DB% -E -i DropAllTables.sql
sqlcmd -S %SERVERNAME% -d %DB% -E -i dbo.UserType.Table.sql
sqlcmd -S %SERVERNAME% -d %DB% -E -i dbo.RegisteredUser.Table.sql
echo Done creating tables. 
```

问题是当我运行它们时，这是输出：

```
C:\>∩╗┐
'∩╗┐' is not recognized as an internal or external command,
operable program or batch file.
Creating tables on server (LOCAL) and database PLEDGES
Done creating tables. 
```

换句话说，Visual Studio 不知何故地插入了一组字符，Windows 命令处理器将其解释为命令，即“∩╗┐”。谷歌搜索没有返回任何内容。有没有其他人遇到过这个？关于修复的想法？

我有一个解决方法（只需在每个文件的开头添加一个空行，它会显示错误，但其他工作正常），但是每次我运行其中一个时，我自己的肛门保留方面都会生气文件。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2009-06-03T09:00:19.880

Ray 说 Visual Studio 的默认文本格式类似于 UTF-8 是正确的。虽然 Notepad++ 是一个很棒的工具，我自己也使用它，但还有一个替代方法，您可以告诉 Visual Studio 以 ASCII 格式存储您的文本文件：

在 VS2008 中，在解决方案资源管理器中选择您的文件，然后选择 File...Save myfile.bat As...

在保存按钮上的向下箭头上，选择使用编码保存。

在高级保存选项对话框中保存时，在编码下拉列表中选择 US-ASCII。根据需要设置行尾，或将其保留为当前设置。

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2009-05-12T19:17:19.470

正在发生的事情是 VisualStudio 很聪明，并且隐藏了您的批处理文件已以非 ASCII 字符编码保存的事实（例如，您的文件是 UTF-8 或其他一些非 ASCII 编码）。

我的项目团队已经被这个问题抓住了几次（如果文件被检入 CVS，它会使文件变得一团糟）。

我倾向于使用Notepad++，看看右下角的编码（应该说是ANSI），如果你需要改变它去格式菜单并改变类型然后保存。

Visual Studio 看起来应该相同，但文件大小应该减半！

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-07-08T14:36:56.113

在视觉工作室中纠正这个问题的另一种方法是......

1.  右键单击解决方案资源管理器中的文件，然后选择“打开方式”
2.  选择“...带编码”选项之一
3.  从编码列表中选择 US-ASCII
4.  保存文件

现在，无论何时打开它，它都应该保留所选的编码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-17T20:49:46.097

虽然这在我寻求解决 Visual basic 中的问题时很有用，但解决方案是告诉 VB 使用 ASCII 编码，如下所示：

```
Try
        outFile = My.Computer.FileSystem.OpenTextFileWriter(myPath, True, System.Text.Encoding.ASCII)
        outFile.WriteLine(macroText)
        outFile.Close()
 Catch ex As Exception 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-16T11:54:35.857

我也遇到过这个问题，只有在创建用于 Antlr4 的语法文件时才明显。我使用这些步骤：

1.  在解决方案资源管理器中右键单击文件，然后选择“打开方式”
2.  选择“二进制编辑器”
3.  在打开的十六进制编辑器中按三下 DEL 并保存

# windows - 在 Windows 共享上强制执行文件命名约定？

> ID：854362
> 
> 赞同：2
> 
> 时间：2009-05-12T19:13:04.920
> 
> 标签：windows, naming-conventions, filenames

简单的问题，但我似乎无法在任何地方找到答案。Windows 中有没有办法或通过第三方实用程序在 Windows 网络共享中强制执行文件命名约定？

我确信这在 Sharepoint 中很容易，但我希望能够将用户限制为他们保存到文件夹中的文件名格式。我可以创建一个保存后程序来在事后查找异常，但我想尝试强制用户在保存时根据我们的标准命名文件。

如果某些东西在服务器端不可用/可配置，这可以通过 Excel 中的 VBA 或保存文件对话框中的 Word 来完成吗？

谢谢你的帮助。

一个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-12T19:36:17.287

如何监视文件夹的更改，并且一旦创建了具有“错误”文件名的文件，您就会以某种方式提醒用户？

理想情况下，您需要在文件系统级别上使用某种“挂钩”，如果文件名错误，它也会让您的文件操作失败；但我认为用户（不是内核）级别没有任何东西可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T19:43:18.973

您必须编写一个程序来充当共享的网关来强制执行此操作。您还必须限制对共享的访问，以便用户无法绕过该程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T19:21:41.897

据我所知，没有什么可以限制文件名。

除非你自己写，否则什么都没有。

# iphone - 当我改变它的中心时，为什么我的视图会四处移动？

> ID：854367
> 
> 赞同：1
> 
> 时间：2009-05-12T19:13:31.020
> 
> 标签：iphone, cocoa-touch, uikit

我认为它的框架的来源决定了视图的位置。但是当我像这样改变中心属性时

```
myView.center = CGPointMake(myView.center.x - 20, myView.center.y); 
```

我的视图将向左移动 20 个单位。我想更改中心点以相对于该点进行一些旋转。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-12T19:25:35.183

如果要更改旋转点，请改为设置 anchorPoint。anchorPoint 在视图中的图层上，但应用于视图的旋转仍然使用锚点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-12T19:21:07.187

来自 UIView 的[Apple API](http://developer.apple.com/iPhone/library/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/instp/UIView/center)：

> 中心在其父视图的坐标系中指定。设置此属性会相应地更改框架属性的值。
> 
> 更改框架矩形会自动重新显示接收器，而无需调用 drawRect: 方法。如果您希望在框架矩形更改时调用 drawRect: 方法，请将 contentMode 属性设置为 UIViewContentModeRedraw。

因此，本质上，更改`center`,`frame`或`bounds`将适当地重新定位和调整视图大小，从而相应地更改其他两个属性。

# c# - 如何制作数组大小上限

> ID：854371
> 
> 赞同：1
> 
> 时间：2009-05-12T19:14:24.653
> 
> 标签：c#, linq

我有两个字符串数组

```
string[] input; //user input could be any size
string[] output; //a copy of user input but, should not be larger than 50 
```

如果输入长度 <= 50，则输出是输入的精确副本。

如果输入数组长度 > 50，那么它将仅从输入中复制 50 个元素

它**必须具有**第**一个**和**最后一个**元素，并**均匀地**`input`选择其余元素；它不仅仅是简单地获取前 50 个元素或后 50 个元素。

 **最有效的方法是什么？

更新说 input[] 有 98 个元素。然后您将获取第一个和最后一个元素，然后将其余元素除以 2 以获得 50 个元素

```
98-2=96
96/2=48

2+48=50 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T19:23:30.847

就像是：

```
public static T[] CopyEvenly<T>(T[] from, int size)
{
    if (from.Length <= size)
    {
        return (T[]) from.Clone();
    }
    T[] ret = new T[size];
    for (int i=0; i < size; i++)
    {
        ret[i] = from[(i * (from.Length + size - 1)) / size];
    }
    return ret;
} 
```

如果你到达乘法溢出的阶段，这将失败`int`，诚然。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-12T19:26:00.547

```
for (float i = 0, int count = 0; count < 50; i+= arraySize / 50.0f, count++)
{
output[count] = input[(int)i];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T20:11:08.510

我认为您在处理 int 除法时遇到了近似问题，请尝试将其保持为双精度，直到获得索引：

```
static T[] CopyEvenly<T>(T[] source, int size)
{
    if (size >= source.Length)
        // or copy it to a new one if you prefer
        return source;

    T[] ret = new T[size];
    // keep everything in doubles
    double factor = (double)(source.Length - 1) / (double)(size - 1);
    for (int i = 0; i < ret.Length; i++)
    {
        // cast to int just now
        int inputIndex = (int)((double)i * factor);

        ret[i] = source[inputIndex];
    }
    return ret;
} 
```

我希望我正确理解了您的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T20:39:51.143

这可能很遥远，但我认为尝试会很有趣。希望我不会让事情变得更混乱。

```
static T[] CopyEvenly<T>(T[] srcArray, int size)
{
   int factor=srcArray.Length/size; //this will be the "step" size
   T[] retArray=new T[size];

   int counter = 0;

   //add element 0 and every [factor]'ith element until 1 less than size
   while (counter < size - 1 && counter<srcArray.Length)
   {
      retArray[counter] = srcArray[counter * factor];
      counter++;
   }

   //add the last element
   retArray[size] = srcArray[srcArray.Length - 1];

   return retArray;
} 
```

# c# - 在 COM DLL 和 C# 之间进行通信

> ID：854372
> 
> 赞同：3
> 
> 时间：2009-05-12T19:14:30.457
> 
> 标签：c#, .net, dll, com, shell-extensions

前几天我问了一个关于覆盖图标的[问题。](https://stackoverflow.com/questions/843506/shell-icon-overlay-c)在帮助下，我想出了如何让它发挥作用。

以下是图标覆盖的工作原理（据我所知）：在外壳绘制图标之前，它会联系系统中的所有图标覆盖处理程序以确定它是否应该在该特定图标上绘制覆盖。

**我的设置：**
我有一个注册的外壳扩展（图标覆盖处理程序），我想用它来显示图标覆盖。此外，我有一个 .NET 应用程序 (C#)，它将使用我想要显示覆盖的所有文件和文件夹的名称等写入数据库（最有可能是 SQLite）。

**我的问题是：**
如何让 Shell 扩展（我认为它基本上是一个 COM DLL）回调到我的 .NET 应用程序中？或者这是否有点矫枉过正，我应该直接从数据库中读取 Shell Extension 吗？

**可能的解决方案？**

1.  让外壳扩展（图标覆盖处理程序）读取数据库并确定是否显示覆盖。
2.  让外壳扩展调用回 .NET 应用程序以确定是否显示覆盖。

我希望这是有道理的，如果没有，我会尝试详细说明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T19:19:24.613

COM DLL 不能直接与 .NET 程序集对话。您可能需要[将 .NET 程序集公开为 COM 对象](https://stackoverflow.com/questions/769332/how-to-call-c-dll-function-from-vbscript)并改为与此 COM 对象通信。但这实际上在您的场景中可能是矫枉过正。另一种选择是将与 .NET 程序集中的数据库通信的功能公开为一些可从 shell etension 调用的可互操作服务 (WCF?)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-12T20:13:28.787

是的，如果您将程序集标记为 COM 可见并运行 regasm，那么您的 COM dll 可以导入生成的类型库并调用 CoCreateInstance 以获取对您的 .NET 类的引用。

[但是，将 .NET 框架拉到 shell 扩展](http://www.mastropaolo.com/2006/11/08/shell-extensions-in-c-andor-vbnet/)中有点吓人。因此，您可能希望确保在进程外调用 .NET 代码......即 CLSCTX_LOCAL _SERVER 到 CoCreateInstance。

# .net - Windows 服务无法复制到文件共享

> ID：854379
> 
> 赞同：5
> 
> 时间：2009-05-12T19:16:38.393
> 
> 标签：.net, file-io, windows-services, networking, samba

我有一个 Windows 服务设置将文件从本地目录复制到 samba 共享。

该服务通过 UNC 路径连接到服务器（即 \remoteserver\shareddir）。

我已经以运行服务的用户身份登录，并且能够使用 UNC 路径在 samba 共享上复制文件和创建文件。

但是，在运行该服务时，我收到提示登录错误的 io 异常。我在那个盒子上运行了进程监视器，观察服务，我可以看到它找到了 UNC 路径，但在尝试写入共享时出现登录错误。

这是使用普通的 .net System.IO.File.Copy 调用。

我不明白这些错误，因为在同一用户下登录时，我可以在共享上复制和创建文件。

有任何想法吗？

**编辑：异常文本**

> 主处理循环中的错误 (DoWork())：登录失败：未知用户名或密码错误。
> 
> System.Exception：MyService.ProcessExportTransferfileDirectories 和值错误：D:\Export、\RemoteServer\intray、D:\Export\Archive ---> System.IO.IOException：登录失败：未知用户名或密码错误。
> 
> 在 System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath) 在 System.IO.__Error.WinIOError() 在 System.IO.File.Move(String sourceFileName, String destFileName)
> 在 MyService.Consumer.BusinessLogic.WmsFacade.MoveAndArchiveFile (String sourceFolder, String targetFolder, String archiveFolder, String rootFolder, LogCategory logCategory, LogCounter logCounter) --- 内部异常堆栈跟踪结束 --- 在 MyService.Consumer.BusinessLogic.WmsFacade.MoveAndArchiveFile(String sourceFolder, String targetFolder, String archiveFolder , String rootFolder, LogCategory logCategory, LogCounter logCounter) 在 MyService.Consumer.BusinessLogic.WmsFacade.ProcessExportTransfer(IDictionary`2 fileDirectories) 在 MyService.Core.TimedWorkerProvider.DoWork()

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-13T18:22:07.443

它最终成为一个权限问题 - 在作为在 samba 共享上设置的不同用户运行服务后，它运行没有问题，复制文件。

仍然不明白为什么当使用不同的帐户时，我可以使用 Windows 资源管理器在共享上复制/创建文件，但是当服务在同一帐户下运行时，它根本无法访问共享:(

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-12T19:43:01.363

我建议先映射一个驱动器，然后将文件复制到映射的驱动器而不是共享。

您可以使用 dos net use 命令映射驱动器。例如：

```
System.Diagnostics.Process.Start("net", "use h: \remoteserver\shareddir /User:domian\me password") 
```

这应该可以解决任何登录问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T19:40:54.347

在您的情况下，一个非常有用的工具是[process monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)。只需以管理员身份运行它并添加以下过滤器：

```
Process Name is "your_process.exe" AND Operation is "CreateFile" 
```

您将看到有关您的进程尝试使用的文件的详细信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T19:44:51.280

> 如前所述，当我使用运行该服务的同一帐户登录时，我可以毫无问题地复制到共享并在共享上创建文件。– Oded 1 分钟前

您是否在本地安全策略中授予用户帐户作为服务运行的“作为服务登录”权限？

# nhibernate - 如何使用流利的 nhibernate 创建每个类的表映射？

> ID：854389
> 
> 赞同：0
> 
> 时间：2009-05-12T19:18:01.573
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping, table-per-class

我正在尝试使用流利的 nhibernate 创建类似于以下内容的映射：

```
<class name="IAccountManager" 
    abstract="true" 
    table="IAccountManager">

    <id name="Id">
            <generator class="hilo"/>
    </id>

    <union-subclass
            table="DefaultAccountManager"
            name="DefaultAccountManager">
            <property name="FirstName"/>
    </union-subclass>

    ... more subclasses
</class> 
```

关于如何做到这一点的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-12T22:53:21.160

Fluent NHibernate 目前不支持联合子类。FNH 允许您混合使用 fluent 和 hbm 映射，因此您应该为这种情况保留 hbm 映射。

# python - 在 Python 中更改键盘锁

> ID：854393
> 
> 赞同：21
> 
> 时间：2009-05-12T19:19:37.190
> 
> 标签：python, windows

在 Python 中，有没有办法以编程方式*更改*CAPS LOCK/NUM LOCK/SCROLL LOCK 状态？

这不是一个真正的笑话问题 - 更像是一个笑话程序的真正问题。我打算用它来让灯光做一些有趣的事情......

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-05-13T16:32:23.753

在 Linux 上，这里有一个 Python 程序来闪烁所有的键盘 LED 灯：

```
import fcntl
import os
import time

KDSETLED = 0x4B32
SCR_LED  = 0x01
NUM_LED  = 0x02
CAP_LED  = 0x04

console_fd = os.open('/dev/console', os.O_NOCTTY)

all_on = SCR_LED | NUM_LED | CAP_LED
all_off = 0

while 1:
    fcntl.ioctl(console_fd, KDSETLED, all_on)
    time.sleep(1)
    fcntl.ioctl(console_fd, KDSETLED, all_off)
    time.sleep(1) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-05-12T19:28:17.113

如果您使用的是 Windows，我相信您可以使用[SendKeys](https://pypi.python.org/pypi/SendKeys/)。

[http://www.rutherfurd.net/python/sendkeys](https://web.archive.org/web/20121125032946/http://www.rutherfurd.net/python/sendkeys)

```
import SendKeys

SendKeys.SendKeys("""
{CAPSLOCK}
{SCROLLOCK}
{NUMLOCK}
""") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-09-02T09:24:45.170

可能对 OP 没有用，但值得分享，因为有人可能会像我一样寻找答案，但如果不使用第三方模块就找不到解决方案。这就是我打开大写锁定的方法

```
import ctypes

def turn_capslock():
    dll = ctypes.WinDLL('User32.dll')
    VK_CAPITAL = 0X14
    if not dll.GetKeyState(VK_CAPITAL):
        dll.keybd_event(VK_CAPITAL, 0X3a, 0X1, 0)
        dll.keybd_event(VK_CAPITAL, 0X3a, 0X3, 0)

    return dll.GetKeyState(VK_CAPITAL)
print(turn_capslock()) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-09T13:30:03.070

要使用 SendKeys 将 CAPS LOCK 设置为特定值，首先检测 CAPS LOCK 的状态很重要。以下是如何在 python 中执行此操作（在 windows 下）：

```
import win32api,win32con

def IsCapsLockOn():
    # return 1 if CAPSLOCK is ON
    return win32api.GetKeyState(win32con.VK_CAPITAL) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-07-09T17:37:38.620

## 对于 Windows：

```
#https://stackoverflow.com/questions/21549847/send-key-combination-with-python
#https://msdn.microsoft.com/en-us/library/8c6yea83(v=vs.84).aspx 

import win32com.client as comclt
wsh= comclt.Dispatch("WScript.Shell")
wsh.SendKeys("abc") #types out abc directly into wherever you have your cursor (ex: right into this editor itself!)

wsh.SendKeys("{NUMLOCK}{CAPSLOCK}{SCROLLLOCK}") #toggles the state of NumLock, CapsLock, and ScrollLock; remove whichever one you don't want to toggle 
```

资料来源：

1.  [用python发送组合键](https://stackoverflow.com/questions/21549847/send-key-combination-with-python)
2.  [https://msdn.microsoft.com/en-us/library/8c6yea83(v=vs.84).aspx](https://msdn.microsoft.com/en-us/library/8c6yea83(v=vs.84).aspx)

另外，请注意 Uri 关于如何读取 CapsLock 状态的回答。要将 LED 状态专门设置为 true 或 false，不能只是盲目地切换，您必须首先知道当前状态是什么。他向您展示了如何读取 CapsLock 状态。以下是如何读取所有 3 个 LED 状态：

```
#https://stackoverflow.com/questions/854393/change-keyboard-locks-in-python/854442#854442abc
#https://support.microsoft.com/en-us/kb/177674
import win32api,win32con

def isCapsLockOn():
    "return 1 if CapsLock is ON"
    return win32api.GetKeyState(win32con.VK_CAPITAL)

def isNumLockOn():
    "return 1 if NumLock is ON"
    return win32api.GetKeyState(win32con.VK_NUMLOCK)

def isScrollLockOn():
    "return 1 if ScrollLock is ON"
    return win32api.GetKeyState(win32con.VK_SCROLL)

print("IsCapsLockOn = ", IsCapsLockOn())
print("isNumLockOn = ", isNumLockOn())
print("isScrollLockOn = ", isScrollLockOn()) 
```

## 对于 Linux：

还不知道所有细节，但从这里开始：[Change keyboard locks in Python](https://stackoverflow.com/questions/854393/change-keyboard-locks-in-python/858992#858992)。

## 是否有适用于任何操作系统的通用 Python 模块？

还不知道。

## 有关的：

1.  [如何在 Python 中生成键盘事件？](https://stackoverflow.com/questions/13564851/how-to-generate-keyboard-events-in-python)- 我需要调查一下。
2.  [https://pypi.org/project/keyboard/](https://pypi.org/project/keyboard/) - 看起来它需要`sudo`Linux。这不好，但我需要更多地研究它。
3.  另一个仅限 Windows 的模块如下所示：[https ://pypi.org/project/SendKeys/](https://pypi.org/project/SendKeys/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-14T20:57:44.467

用这个：

```
from win32api import GetKeyState
from win32con import VK_CAPITAL

GetKeyState(VK_CAPITAL) 
```

1 == 真 0 == 假

您也可以获得其他密钥，这里是列表：[https ://docs.microsoft.com/en-au/windows/win32/inputdev/virtual-key-codes](https://docs.microsoft.com/en-au/windows/win32/inputdev/virtual-key-codes)

# php - 确定 Twitter Search Api 返回的页面数量

> ID：854394
> 
> 赞同：3
> 
> 时间：2009-05-12T19:19:42.430
> 
> 标签：php, twitter

有没有一种好方法可以确定 twitter 搜索 api 返回了多少页面，或者有没有一种方法可以确定返回了多少值并将其除以每页的推文数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-12T20:39:54.903

不。API 不公开这个；不是因为它不是一个有用的功能，而是因为提供它的性能方面。

为了获得完整的结果计数，搜索算法有必要对每个查询完全迭代其索引。然后，当您返回第二页时，它必须从第 2 页开始迭代其索引以再次为您提供计数。这意味着获取所有数据将是 O(n^2)（因为返回 N 个页面中的每一个都需要扫描所有后面的页面）而不是预期的 O(n)。

因为大多数请求者只想要几页结果，所以查询只返回部分结果是一种常见的优化，只返回一个指向索引的指针以允许搜索在它停止的点继续。

由于这些原因，大多数大规模分页 API 的行为方式类似。要获得准确的计数，您必须通过遍历页面来强制查询完全迭代其索引。这给远程服务带来了高成本，并且让您多次返回允许服务适当地限制您的查询，因此它不会对其他用户产生负面影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T19:51:25.030

因此，您可能会在页面中运行一个循环，直到您提供一个空的查询结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T20:44:37.470

值得一提的是，总页数也可以根据控制每页返回的推文数量*（最多 100 条）的***rpp**参数而变化。

 *根据[search API docs](http://apiwiki.twitter.com/Twitter-Search-API-Method%3A-search)，**page**参数只返回最多约 1500 个总结果的页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T19:43:57.787

不，结果不包括页数。ATOM 数据确实包含一个“下一页”元素，您可以迭代地遵循该元素，直到该元素不再存在。

```
<link type="application/atom+xml" rel="next" href="http://search.twitter.com/search.atom?lang=en&amp;max_id=1775692928&amp;page=11&amp;q=YOURQUERY"/> 
```

# c# - 帮助：如何在 ASP.NET 开发服务器上启用 Windows 身份验证？

> ID：854395
> 
> 赞同：11
> 
> 时间：2009-05-12T19:20:06.330
> 
> 标签：c#, asp.net, visual-studio, wcf, iis

我希望你们中的任何人都知道如何解决我们遇到的这个问题。

我们正在尝试通过 Web 托管 WCF 服务。我们将 web.config 设置为让服务需要 Windows 身份验证。我们遇到的问题如下：

当我们在常规 IIS 中托管服务时，服务运行良好，并且“Windows 身份验证”模式没有问题。但是，当我们尝试从开发人员框中运行它时，我们会收到以下错误：“此服务的安全设置需要 Windows 身份验证，但托管此服务的 IIS 应用程序未启用它。”

我们的开发人员箱不是通过常规 IIS 托管服务，而是通过 Visual Studio 的 APS.NET 开发服务器托管服务。我们尝试进入 Web 项目属性并说启用 NTLM 身份验证，但仍然没有解决它。有谁知道如何修理它？VS ASP.NET 开发服务器甚至支持 Windows 身份验证吗？使用 Windows 身份验证托管服务的唯一选择是使用 IIS 并忘记 ASP.NET 开发服务器吗？

谢谢查克

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-26T15:30:43.913

为了配置 IIS Express 安全设置：

1.  在任务栏（系统托盘）中查找 IIS express 符号。
2.  右键单击并选择“所有应用程序”。
3.  单击您要更改的站点的名称（尽管我相信更改是站点范围的）
4.  单击下面配置部分中的路径（它将打开 applicationhost.config 文件）
5.  搜索身份验证部分并进行更改

可以在此处找到示例更改：

[http://toadcode.blogspot.ca/2011/08/security-config-in-iis-express.html](http://toadcode.blogspot.ca/2011/08/security-config-in-iis-express.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-21T02:02:13.457

ASP.Net 开发服务器非常有限。它只提供来自运行它的同一台机器的请求，它不会提供超出其应用程序范围的文件。它基于 Cassini 服务器。Cassini 不支持 WCF Web 服务。ASP.Net Development Server 的文档说它确实支持 NTLM。如果您只是从本地计算机浏览到一个页面，它应该可以正常工作，除非该页面引用了不可用的资源。

查看[http://msdn.microsoft.com/en-us/library/58wxa9w5.aspx](http://msdn.microsoft.com/en-us/library/58wxa9w5.aspx)了解更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-01-15T16:07:45.920

我会在您的本地开发机器上安装和配置 IIS，并优先使用它而不是使用内置的网络服务器。要使用本地 IIS 进行调试，请在项目属性的 Web 选项卡上选择“用户本地 IIS Web 服务器”。使用 IIS 而不是内置的网络服务器也意味着您可以以与在生产服务器上配置的方式完全相同的方式配置您的应用程序，这将减少您迁移到生产环境时的潜在意外情况。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-09-21T17:22:31.423

我的授权问题的解决方案是进入 F4 项目属性并设置以下内容：

```
Anonymous Authentication: Disabled

Windows Authentication: Enabled 
```

显然，这些属性直接更新 IIS applicationHost.config。

[http://provenstyle.com/blog/2015/10/02/Visual-Studio-2015-Windows-Authentication-And-IIS-Express/](http://provenstyle.com/blog/2015/10/02/Visual-Studio-2015-Windows-Authentication-And-IIS-Express/)

# django - 在 Django 模板中使用字符串文字作为模板标签的参数

> ID：854406
> 
> 赞同：10
> 
> 时间：2009-05-12T19:22:42.487
> 
> 标签：django, templates, django-templates

我发现自己经常做的一件事是将字符串文字作为参数传递给模板标签或函数；例如：

```
{% url my-url 'my_param' %} 
```

不幸的是，django 模板引擎不允许你这样做。所以我发现自己在我的视图代码中经常这样做：

```
my_context_dict['MY_PARAM'] = 'my_param' 
```

然后在我看来代码：

```
{% url my-url MY_PARAM %} 
```

或者创建一系列我个人尽量避免的 URL 映射。

是否可以在 Django 模板中使用字符串文字？或者可能是更优雅的解决方案？我在这里或文档中没有看到任何内容。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-12T19:30:19.697

这感觉不对，但却是对的。

```
<a href="{% url someting "param1" "param2" %}">text</a> 
```

嵌套`""`的 's 似乎不应该工作。他们是这样。Django`{% %}`材料只是简单地从 HTML 中提取出来，而不考虑周围的上下文。所以“重复”`"`的根本不是真正的重复。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-05-12T19:29:11.323

使用双引号而不是单引号：

```
{% url my_view "my_param" %} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T05:53:49.037

非常奇怪 - 我有一个 django 项目，它使用单引号来传递字符串值，它运行得很好。

```
<a href="{% url categories 'vendor' %}"</a>
<a href="{% url categories 'crew' %}"</a> 
```

经过进一步调查，事实证明[这在 django 1.5 中发生了变化](https://docs.djangoproject.com/en/1.5/releases/1.5/#overview)。它现在甚至需要在 url 模式名称周围加上引号。

# internet-explorer - Internet Explorer 缓存位置

> ID：854412
> 
> 赞同：28
> 
> 时间：2009-05-12T19:23:39.023
> 
> 标签：internet-explorer, caching

当前用户的 IE 缓存在哪里？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-05-12T19:25:38.363

默认情况下，临时 Internet 文件（用于 Internet Explorer）的位置是：

**Windows 95、Windows 98 和 Windows ME**

```
c:\WINDOWS\Temporary Internet Files 
```

**视窗 2000 和视窗 XP**

```
C:\Documents and Settings\\[User]\Local Settings\Temporary Internet Files 
```

**Windows Vista 和 Windows 7**

```
%userprofile%\AppData\Local\Microsoft\Windows\Temporary Internet Files

%userprofile%\AppData\Local\Microsoft\Windows\Temporary Internet Files\Low 
```

**视窗 8**

```
%userprofile%\AppData\Local\Microsoft\Windows\INetCache 
```

**视窗 10**

```
%localappdata%\Microsoft\Windows\INetCache\IE 
```

**Microsoft Edge 缓存**

```
%localappdata%\Microsoft\Edge\User Data\Default\Cache 
```

一些信息来自[Windows 俱乐部](http://www.thewindowsclub.com/temporary-internet-files-folder-location)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-05-12T19:33:34.030

如果要以独立于平台的方式查找文件夹，则应查询注册表项：

```
HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\User Shell Folders\Cache 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-05-12T19:32:44.780

该`Temporary Internet Files`文件夹的位置取决于您的 Windows 版本以及您是否使用用户配置文件。

*   如果您有**Windows Vista**，则临时 Internet 文件位于以下位置（请注意，在您的 PC 上，它们可能位于 C 以外的某个驱动器上）：

    > C:\Users[用户名]\AppData\Local\Microsoft\Windows\Temporary Internet Files\ C:\Users[用户名]\AppData\Local\Microsoft\Windows\Temporary Internet Files\Low\

    请注意，您必须更改 Windows 资源管理器的设置以显示所有类型的文件（包括受保护的系统文件）才能访问这些文件夹。

*   如果您有**Windows XP**或**Windows 2000**，则临时 Internet 文件位于此位置（请注意，在您的 PC 上，它们可能位于 C 以外的某个驱动器上）：

    > C:\Documents and Settings[用户名]\Local Settings\Temporary Internet Files\

    如果您只有一个用户帐户，请将 [username] 替换为 Administrator 以获取`Temporary Internet Files`文件夹的路径。

*   如果您有**Windows Me**、**Windows 98**、**Windows NT**或**Windows 95**，则`index.dat`文件位于以下位置：

    > C:\Windows\Temporary Internet Files\
    > C:\Windows\Profiles[用户名]\Temporary Internet Files\

    请注意，在您的计算机上，Windows 目录可能不是`C:\Windows`其他目录。如果您的`Profiles`目录中`Windows`没有目录，请不要担心 - 这只是意味着您没有使用用户配置文件。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-10-17T10:22:31.577

我不知道 XP 的答案，但对于后者：

`%USERPROFILE%\AppData\Local\Microsoft\Windows\Temporary Internet Files\Low`和`%USERPROFILE%\AppData\Local\Microsoft\Windows\Temporary Internet Files\Content.IE5`- 这些是缓存位置。其他提到`%USERPROFILE%\AppData\Local\Microsoft\Windows\Temporary Internet Files`，但这不是此目录中的缓存，只是存储在其他地方的文件的反映。

但是您可以枚举`%USERPROFILE%\AppData\Local\Microsoft\Windows\Temporary Internet Files`并获取您需要的所有文件，但您应该感到沮丧的是，file walker 没有检测到资源管理器显示的所有内容。

此外，如果您使用我提供的链接，您可能需要WinAPI 中的[ExpandEnvironmentStrings](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724265%28v=vs.85%29.aspx)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-10-21T13:13:17.623

如果您使用的是 Dot.Net，那么您需要的代码是

Environment.GetFolderPath(Environment.SpecialFolder.InternetCache)

如果您希望代码删除这些文件以及 FireFox 临时文件和 Flash 共享对象/Flash Cookie，请单击我的名字

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-12-25T12:14:17.440

在windows serven和8及以后的这个位置可以找到IE Cache

C:\Users\Username\AppData\Local\Microsoft\Windows\INetCache

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-09T16:51:08.280

如果它已被移动，您也可以（在 IE 11 中，我很确定这至少可以转换为 10）：

*   工具 - Internet 选项
*   在浏览历史记录下单击设置
*   在当前位置下，它显示目录名称

注意：查看文件按钮将在那里打开一个 Windows 资源管理器窗口。

例如，我的显示 C:\BrowserCache\IE\Temporary Internet Files

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-18T07:05:11.807

您在寻找 Windows API 吗？

只需使用带有 CSIDL_INTERNET_CACHE 标志的[SHGetFolderPath](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762181%28v=vs.85%29.aspx)函数或带有[FOLDERID_InternetCache](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762188%28v=vs.85%29.aspx)标志的 SHGetKnownFolderPath 来获取确切的位置。这样您就不必担心操作系统。前一个功能适用于 Windows XP。后者适用于 Windows Vista+。

# html - 使用锚点设计调用网站

> ID：854416
> 
> 赞同：1
> 
> 时间：2009-05-12T19:24:17.057
> 
> 标签：html, anchor, css-position

当我使用锚集 (...#xxx) 访问该站点时，顶部的图像会移到视口之外。

正常行为：[http](http://soc.org/index.php?id=4)
://soc.org/index.php?id= 4 损坏的设计：[http ://soc.org/index.php?id=4#c272](http://soc.org/index.php?id=4#c272)

顶部图像是绝对定位的。google-analytics 代码后面有一些空白行。如果我删除它们，它会起作用。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T20:07:54.207

如果关闭溢出更容易看到发生了什么：div.upperPage 上的隐藏

您可以看到锚点导致内容滚动，而不是整个页面。但是，我不知道有任何规范说明应该滚动哪些元素才能达到锚点要求。

# asp.net - 如何在 ie7 中设置边距以打印连续表单（发票）？

> ID：854428
> 
> 赞同：0
> 
> 时间：2009-05-12T19:26:15.040
> 
> 标签：asp.net, internet-explorer

我正在尝试打印发票。但是无论我做什么来设置边距，它都不适合在纸上。你有什么想法打印出发票以继续表格吗？

PS。我正在使用 ASP.NET 进行编码并通过 IE7 打印出来

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-13T05:08:48.457

我插入了一个覆盖整个 div 的 div。我将它设置为相对位置和其绝对的子 div。所以我可以在

左边距：-40px

和

边距顶部：50px。

# java - 如何将 logback-access 与 Tomcat 5.5 结合使用？

> ID：854430
> 
> 赞同：2
> 
> 时间：2009-05-12T19:26:28.707
> 
> 标签：java, tomcat, tomcat5.5, logback

我在 Tomcat 5.5 服务器上运行了几个 Web 应用程序，并且我正在努力改进/更新整个系统中使用的整体日志记录系统。我已经在 logback-classic 上取得了一些成功。但是，当我尝试使用 logback-access（即访问 lbAccessStatus servlet）时，我得到了这个异常：

```
例外

javax.servlet.ServletException：
  Wrapper 找不到 servlet 类
    ch.qos.logback.access.ViewStatusMessagesServlet
  或者它依赖的类

org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:433)
...

根本原因

java.lang.ClassNotFoundException：
  ch.qos.logback.access.ViewStatusMessagesServlet

org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1386)
...

```

[我根据文档](http://logback.qos.ch/access.html)进行了所有设置：

```
  普通/库：
    logback-classic-0.9.15.jar
    logback-core-0.9.15.jar
  服务器/库：
    logback-access-0.9.15.jar

```

在图书馆四处走动似乎没有帮助。logback-classic 似乎工作正常，只是 logback-access 会导致问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-05-28T11:20:30.407

我已经让它工作了。使用**maven 和 logback-classic**，jar 以**WEB-INF/lib**结尾，并且运行良好。仅在部署旧版本的 WAR 时，我才看到相同的错误。

**我的pom.xml**的依赖项部分的摘录

 **```
<dependency>
  <groupId>org.slf4j</groupId>
  <artifactId>slf4j-api</artifactId>
  <version>${slf4j.version}</version>
</dependency>
<dependency>
    <groupId>ch.qos.logback</groupId>
    <artifactId>logback-classic</artifactId>
    <version>0.9.21</version>
</dependency> 
```

**...以及我的web.xml**的相关部分：

```
 <servlet>
    <servlet-name>LogbackViewStatusMessages</servlet-name>
    <servlet-class>ch.qos.logback.classic.ViewStatusMessagesServlet</servlet-class>
  </servlet>
  <!-- see http://localhost:8080/oam-portal-portlets/logs -->
  <servlet-mapping>
    <servlet-name>LogbackViewStatusMessages</servlet-name>
    <url-pattern>/logback</url-pattern>
  </servlet-mapping> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-03T04:47:39.770

我还没有使用tomcat的logback-access。我只用它和码头...

不过，我建议尝试以下设置：

```
common/lib:
  logback-access-0.9.15.jar
  logback-classic-0.9.15.jar
  logback-core-0.9.15.jar
server/lib:
  logback-access-0.9.15.jar
  logback-core-0.9.15.jar 
```

logback-access 具有 logback-core 作为依赖项。由于您在服务器（Valve）和您的 web 应用程序（ViewStatusMessagesServlet）中都使用它，因此您应该将它添加到两个类路径中。

您可以（并且应该？）也将 logback-access、logback-classic 和 logback-core 添加到您的 webapp 类路径中，而不是将其添加到 common/lib，使其可用于所有 webapps。

希望有帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-07-26T21:05:51.273

如果你也将 logback-access 放在 common/lib 中，那么所有的 jar 都在那里，它应该在任何地方都可用。你试过吗？

在 Tomcat 6 中也重新设计了日志记录。是否可以升级？

# vim - gvim中的垂直分裂和折叠

> ID：854433
> 
> 赞同：0
> 
> 时间：2009-05-12T19:26:41.343
> 
> 标签：vim

我在自动拆分和折叠方面遇到问题。在我的 ~/.gvimrc 文件的最后，我有 command `vsplit`，所以当我使用 gvim 而不是 vim 时，它会打开两个窗格。当我打开一个通常通过命令行折叠的文件时会出现问题，如`gvim example.cpp`. 这将在两个窗格中打开 example.cpp 文件；但是，第一个窗格是折叠的，而第二个不是。这是一个小烦恼，但我想知道是否有人建议在窗口首次出现时折叠第二个（或所有）缓冲区。

如果有区别，我`set foldmethod=indent`在我的 ~/.vimrc 文件中使用，我的版本是 7.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-13T04:29:15.947

这很奇怪，它也发生在这里，我猜肯定有一个错误，因为除了`'foldmethod'`设置之外，其他设置在第二个窗格上都是有效的。

无论如何，我找到了一个简单的解决方法。我在我的末尾有这个，`.vimrc`你正在寻找的东西现在可以在我的 vim 上运行：

```
set foldmethod=indent
set sw=2
set tw=2

vsplit +edit 
```

现在，当我打开一个文件时，窗口一分为二，并且都正确折叠。

解决方法是在第二个窗格上执行 ex 命令`:edit`，以便重新加载缺少的设置（尽管似乎只`'foldmethod'`缺少）。这就是`+edit`after the`vsplit`所做的。

希望这可以解决您的问题。

# variables - 在 Lua 中补间一个值

> ID：854436
> 
> 赞同：1
> 
> 时间：2009-05-12T19:27:05.913
> 
> 标签：variables, loops, lua, interpolation

我是怎么处理这个的？我想在 x 时间内将一个值从一个值补间到另一个值。同时还考虑到在开始和结束时有一个“轻松”会很好。

我知道，我真的不应该问，但我自己试过了，我被困住了。请假设要导致延迟，您需要调用函数 wait(time)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-13T12:56:25.620

一种可能对您有用的简单方法是沿单位圆内插： ![单位圆](https://upload.wikimedia.org/wikipedia/commons/thumb/8/8f/Unit_circle.svg/186px-Unit_circle.svg.png)

为此，您只需评估圆上的点，这可确保相当平滑的移动以及缓入和缓出。您可以通过更改更改角度的速度来控制插值的速度。

假设您正在执行一维插值（即简单的标量插值，例如从 3.5 到 6.9 或其他），使用从 -π/2 到 π/2 的 Y 值可能会很方便。这些由正弦函数给出，您需要做的就是应用适当的缩放：

```
angle = -math.pi / 2
start = 3.5
end = 6.9
radius = (end - start) / 2
value = start + radius + radius * math.sin(angle) 
```

我不是 100% 确定这是否是合法的 Lua，没有测试它。如果没有，转换可能很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-13T07:46:51.883

您可以查看[Tweener ActionScript 库](http://code.google.com/p/tweener/)以获取灵感。

例如，您可以[从这里](http://code.google.com/p/tweener/source/browse/trunk/as3/caurina/transitions/Equations.as)借用必要的方程式。

如果您需要进一步的帮助，请询问。

# .net - 客户端从服务器复制到同一台服务器，没有往返？

> ID：854441
> 
> 赞同：-1
> 
> 时间：2009-05-12T19:28:13.150
> 
> 标签：.net, networking, network-shares, roundtrip

这受到启发，[Does File.Copy() from a network share to another share on another share copy the file over the network?](https://stackoverflow.com/questions/555341/does-file-copy-from-a-network-share-to-another-share-on-the-same-machine-copy-t)

在 .NET 中，客户端是否可以让服务器将服务器文件复制到同一服务器上的不同位置，而无需通过客户端往返文件？

是否有对这种操作的内置支持，如果没有，你将如何启用这样的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T19:42:08.913

假设它不存在，我会通过在远程机器上安装新软件来启用它。远程机器上的软件会进行复制，我会（通过网络）与这台机器上的软件通信。我希望我希望远程机器上的软件作为服务运行。

可能已经有内置软件支持此功能（我不知道远程计算机上安装了什么）：例如，您是否安装并运行了 IIS？例如，WebDAV 支持 COPY 命令。

# html - CSS 问题：如何使组合图像中的图像垂直触摸？ 在Toggle Squares页面中，我在 JavaScript 生成的每个单元格中都有一个由 <img /> 组成的表格。我应用了以下 CSS： .game, .game td, .game 问问题 问问题 2009-05-12T19:31:26.280 3183 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 在Toggle Squares页面中，我在 JavaScript 生成的每个单元格中都有一个由 <img /> 组成的表格。我应用了以下 CSS： .game, .game td, .game tr, .game img { border: none; border-spacing: 0; padding: 0; margin: 0; } 为了消除所有的间距。但是，现在我在两个相邻行之间得到了一条细的背景线。我怎样才能消除它？ 该页面是有效的 XHTML + CSS。 谢谢你的帮助。 问候， 什洛米鱼。 将 cellpadding="0" 和 cellspacing="0" 属性添加到表中，或尝试使用 border-collapse: collapse; border-width: 0; 在 css.. htmlcssdhtml 4 5 回答 5 This answer is useful 5 将 cellpadding="0" 和 cellspacing="0" 属性添加到表中，或尝试使用 border-collapse: collapse; border-width: 0; 在 css.. 于 2009-05-12T19:38:25.050 回答 This answer is useful 3 .game td img { display: block; } 图像带有自己的空白 于 2009-05-12T19:43:53.000 回答 This answer is useful 1 固定的： .game, .game td, .game tr, .game img { border: none; border-spacing: 0; padding: 0; margin: 0; vertical-align: middle; } 于 2009-05-12T19:43:17.663 回答 This answer is useful 1 问题是：内联图像被视为一个字母，上升 = 图像的高度，下降 = 字体的下降。这意味着仅包含图像的表格单元格的高度大于图像高度。 解决这个问题的最简单方法是将整个表格的 line-height 设置为零，从而抑制文本行中的下降或设置 display: block 所有图像，从而将它们从行内格式化上下文中移出到块格式化上下文中。 于 2009-05-12T19:48:28.920 回答 This answer is useful 0 我能够使用以下代码获得您正在寻找的效果： 该代码描绘了四个纯色 jpeg 彼此相邻，形成一个正方形，中间没有空格： <html> <head> <style> td { margin 0px; padding: 0px;} table { border-collapse:collapse;} </style> </head> <body> <table> <thead /> <tbody> <tr><td><img src="test.jpeg" /></td><td><img src="test.jpeg" /></td></tr> <tr><td><img src="test.jpeg" /></td><td><img src="test.jpeg" /></td></tr> </tbody> </table> </body> 于 2009-05-12T19:44:58.690 回答 Related 1 php - 分页问题 0 javascript - 谷歌地图矩形选择工具：如何在keydragzoom库中保持矩形显示 1 ruby-on-rails - Rails 3 模型关系 2 c# - 如何显示图片目录中的图像？ 4 c# - 精心设计的查询命令和/或规范 1 android - Eclipse 不会启动 Android 模拟器，也不会安装应用程序 3 c++ - 如何在支持 C++11 的 Windows 上安装 64 位 Qt？ 1 android - 使用 int 变量有什么问题？使应用程序崩溃 9 twitter-bootstrap - 带有 CKEditor 的引导程序等于问题 2 php - DocumentFragment 中的返回元素失败，因为节点不再存在 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：854455
> 
> 赞同：0
> 
> 时间：
> 
> 标签：html, css, dhtml

在[Toggle Squares](http://www.shlomifish.org/MathVentures/toggle-squares/)页面中，我在 JavaScript 生成的每个单元格中都有一个由 <img /> 组成的表格。我应用了以下 CSS：

```
.game, .game td, .game tr, .game img
{ 
  border: none;
  border-spacing: 0;
  padding: 0;
  margin: 0;
} 
```

为了消除所有的间距。但是，现在我在两个相邻行之间得到了一条细的背景线。我怎样才能消除它？

该页面是有效的 XHTML + CSS。

谢谢你的帮助。

问候，

[什洛米鱼](http://www.shlomifish.org/)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-12T19:38:25.050

将 cellpadding="0" 和 cellspacing="0" 属性添加到表中，或尝试使用

```
border-collapse: collapse; 
border-width: 0; 
```

在 css..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-12T19:43:53.000

```
.game td img {
 display: block;
} 
```

图像带有自己的空白

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T19:43:17.663

固定的：

```
.game, .game td, .game tr, .game img
{ 
  border: none;
  border-spacing: 0;
  padding: 0;
  margin: 0;
  vertical-align: middle;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-12T19:48:28.920

问题是：内联图像被视为一个字母，上升 = 图像的高度，下降 = 字体的下降。这意味着仅包含图像的表格单元格的高度大于图像高度。

解决这个问题的最简单方法是将整个表格的 line-height 设置为零，从而抑制文本行中的下降或设置 display: block 所有图像，从而将它们从行内格式化上下文中移出到块格式化上下文中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-12T19:44:58.690

我能够使用以下代码获得您正在寻找的效果：

该代码描绘了四个纯色 jpeg 彼此相邻，形成一个正方形，中间没有空格：

```
<html>
<head>
    <style>
        td { margin 0px; padding: 0px;}
        table { border-collapse:collapse;}
    </style>
</head>
<body>
    <table>
        <thead />
        <tbody>
            <tr><td><img src="test.jpeg" /></td><td><img src="test.jpeg" /></td></tr>                   
            <tr><td><img src="test.jpeg" /></td><td><img src="test.jpeg" /></td></tr>
        </tbody>
    </table>
</body> 
```

# javascript - Firefox Firebug 扩展 - 冻结 Javascript 功能？

> ID：854461
> 
> 赞同：10
> 
> 时间：2009-05-12T19:33:02.893
> 
> 标签：javascript, jquery, debugging, firefox, firebug

如何在 firebug 中冻结 Javascript，以便我可以检查它在 html 中所做的更改？例如，如果我有一个 jQuery 翻转效果并且我想在那个时间点检查 html 代码。

我相信 Dreamweaver CS4 有这个名为 freeze javascript and live code 的功能。Firebug 或其他 Firefox 扩展中是否有免费的等价物？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-12T19:41:54.563

“冻结”我假设你的意思是调试，是的，Firebug 肯定有。

首先，您必须进入 Firebug 上的“脚本”选项卡。如果站点上禁用了脚本，请启用它。

现在，转到下拉列表并选择要调试的 JavaScript 文件。这通常是带有内联 JavaScript 的页面本身或链接页面。找到要冻结的代码行，然后单击行号的左侧。你会看到一个红点出现 - 这个点表示代码将在执行期间冻结在那里。一旦代码在那里，您可以通过转到“HTML”选项卡来访问当前的 HTML。您还将看到 Firebug 脚本窗格右上角的图标亮起，允许您继续执行、单步执行、单步执行或单步跳出每一行代码，观察执行的每一行的 HTML 更改。

请注意，Firebug 允许您逐行执行代码，这意味着最小化的 JavaScript 文件（其中所有代码都压缩到一行）对于调试来说绝对是糟糕的，因为您无法分辨 Firebug 在哪里。因此，出于调试目的，我强烈建议您获取文件的非最小化版本。

如果您需要更多帮助，我建议您查看[Firebug 文档](http://getfirebug.com/docs.html)，其中有一些很好的指南。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2010-09-10T15:51:20.977

Break on mutate（选择 html 选项卡时的暂停按钮）是我能找到的最接近此功能的东西。下次更改时它将暂停。这只是您想要的东西之一，但可能很有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-01-24T18:21:02.647

不完全是 Firefox 功能，但看起来足够接近（至少在我理解问题的方式上）：

1.  获取[作弊引擎](http://www.cheatengine.org/)
2.  打开火狐进程
3.  勾选“启用速攻”
4.  将速度设置为 0
5.  申请
6.  现在所有脚本都已有效暂停

[您可以在此处](http://www.elated.com/res/File/articles/development/javascript/creating-a-javascript-clock/clock.html)的 javascript 时钟上对此进行测试。

我有点失望，没有人为 Firefox 创建一个插件，它会做同样的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T19:41:41.753

在 Firebug 的 Script 选项卡中，您可以在 Javascript 中设置断点，这将允许您单步执行代码、设置监视以及执行您在其他调试器中会执行的其他操作。您还可以切换到 HTML 选项卡，查看在“冻结”Javascript 时所做的更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-12T20:20:22.113

在 Firebug 中，转到脚本选项卡。在顶部，您可以看到：

```
Inspect | all | <filename> 
```

单击以选择包含要跟踪的 javascript 的文件。选择文件后，单击行号以放置断点（将出现一个大红点）。

您可以在不同的文件中放置多个断点。如果刷新页面（F5），断点不会消失。

本[教程](http://michaelsync.net/2007/09/30/firebug-tutorial-script-tab-javascript-debugging)也应该对您有所帮助。

# php - 带有 Server 2008 和 PHP 的 Windows SMTP 服务器

> ID：854462
> 
> 赞同：0
> 
> 时间：2009-05-12T19:33:03.703
> 
> 标签：php, iis, smtp, windows-server-2008

由于某种原因，iis smtp 服务器和 php 无法正常通信。我已经通过远程登录并执行邮件命令验证了 smtp 正在工作，并且我能够收到一封电子邮件。此外，我点击此链接[http://support.microsoft.com/?id=297700](http://support.microsoft.com/?id=297700)并能够收到一封电子邮件。但是每当我尝试从 PHP 发送电子邮件时，什么都没有发生。更疯狂的是没有写入 smtp 日志。日志文件应位于 c:\windows\system32\logfiles\smtpsvc1，但 smtpsvc1 文件夹不存在，并且 mailroot 下的 drop、picking、queue 或 badmail 文件夹中没有电子邮件消息。

我不太确定为什么不存在这方面的日志。我授予了网络服务用户对该日志文件文件夹的权限，但无济于事。所以我想我的问题的要点是如何让 PHP 和 iis smtp 发送电子邮件。

我将 smtp 配置为将电子邮件发送到远程 MailEnable 服务器**而不是**交换。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-12T19:35:17.740

不是一个直接的答案，但您知道默认情况下 SMTP 日志记录未打开，您需要通过 IIS 管理器启用它。所以，在你这样做之前，你不会得到任何日志。您将能够判断是否启用了日志记录，因为 SMTP 启动/初始化将生成日志条目，而与任何其他活动无关。如果您的日志文件为空，则 SMTP 未运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T19:37:12.637

该测试仅适用于 2000 年，至少是论文所说的那样。你应该[在这里试试](http://blogs.iis.net/bills/archive/2006/09/19/How-to-install-PHP-on-IIS7-_2800_RC1_2900_.aspx)

# jboss - 如何设置 Jetty 6 和 Jboss 4.0.5 虚拟主机？

> ID：854467
> 
> 赞同：2
> 
> 时间：2009-05-12T19:34:36.977
> 
> 标签：jboss, jetty, virtualhost

我在同一个 JBoss/Jetty 服务器上部署了 2 个 webapp。在 Jetty 5.1.14 中，我有以下 jetty-web.xml 配置其中一个应用程序作为虚拟主机（在同一端口上）运行：

```
<Configure class="org.jboss.jetty.JBossWebApplicationContext"> 
  <Call name="addVirtualHost"><Arg>app2.localhost.com</Arg></Call> 
</Configure> 
```

这工作得很好。不幸的是，它根本不适用于 Jetty 6.1.17。首先，“JBossWebApplicationContext”现在似乎被称为“JBossWebAppContext”，其次，我可以找到的文档表明我应该使用如下所示的 jetty-web.xml：

```
<Configure class="org.jboss.jetty.JBossWebAppContext"> 
  <Set name="VirtualHosts"> 
    <Array type="java.lang.String"> 
      <Item>app2.localhost.com</Item> 
    </Array> 
  </Set> 
</Configure> 
```

但这也不起作用。这两个 webapps 部署没有错误，但是当我尝试访问虚拟主机名下的第二个应用程序时，它只是访问第一个应用程序。两个应用程序都在根上下文中（这是不可协商的）。

如何使虚拟主机工作？

（顺便说一句，几天前我有一个朋友在 serverfault 上发布了这个，但没有人回答。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-08T17:38:48.370

如果您将它包含在每个 web 应用程序的 jetty6-web.xml 中，则此语法有效。

```
<Configure class="org.jboss.jetty.JBossWebAppContext">
  <Set name="VirtualHosts">
    <Array type="java.lang.String">
      <Item>host1.domain.com</Item>
      <Item>host2.domain.com</Item>
    </Array>
  </Set>
</Configure> 
```

如果所有 webapps 在同一个容器中运行，它们都需要定义虚拟主机。出于某种原因，部署一个带有虚拟主机的 WAR 和一个没有虚拟主机的 WAR 是行不通的。

# c# - 在 C# 中，如何根据名称向对象添加事件处理程序？

> ID：854476
> 
> 赞同：2
> 
> 时间：2009-05-12T19:36:17.987
> 
> 标签：c#, .net, reflection

我正在尝试根据一个或多个事件的*名称*将事件处理程序添加到“myObject” 。'myObject' 有一个名为 'MyEvent' 的事件，我有一个名为 'MyEventHandler' 的公共事件处理程序（我不需要按名称获取，但在下面执行以获取 MethodInfo）。

这是我到目前为止所拥有的：

```
EventInfo eventInfo = myObject.GetType().GetEvent("MyEvent");
MethodInfo handlerInfo = GetType().GetMethod("MyEventHandler");

if (eventInfo != null && handlerInfo != null)
   eventInfo.AddEventHandler(
      this,
      Delegate.CreateDelegate(eventInfo.EventHandlerType, handlerInfo)
   ); 
```

我收到此错误：

> 绑定到目标方法时出错。

我是在正确的轨道上还是有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T19:53:49.520

我用这段代码取得了成功：

```
eventInfo.AddEventHandler(this, Delegate.CreateDelegate(typeof(eventInfo.EventHandlerType.FullName), this, "MyEventHandler")); 
```

编辑：添加：eventInfoEventHandlerType.FullName，因此它根据事件处理程序类型更加动态。

# ajax - 如何使用 Facebook 的“自动完成任何内容”建议式下拉菜单

> ID：854478
> 
> 赞同：0
> 
> 时间：2009-05-12T19:36:39.190
> 
> 标签：ajax, web-services, facebook, autocomplete, autosuggest

当你在 Facebook 上编辑你最喜欢的音乐或电影时，你会注意到一个自动完成的建议列表，它基本上是一个“一切”列表（品牌名称、音乐艺术家、电影等）。人们如何在他们自己的情况下使用该列表代码？它是 Facebook API 的一部分吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T19:58:41.460

他们在他们的 FBML 字段中封装了一些功能，但他们的开发者 wiki 显示[了他们如何做他们所做的事情](http://wiki.developers.facebook.com/index.php/FBJS/Examples/Typeahead)。但是，如果您想使用他们的数据，您将不得不[使用 HTTP 代理](http://www.fiddler2.com/fiddler2/)并弄清楚将哪些参数发送到他们的服务器。还有一些参数似乎是基于会话的，所以我不知道您将如何将其集成到您自己的应用程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-09-07T01:34:41.067

这工作了一段时间，但现在他们需要会话 cookie，所以我们必须希望他们向图形 api 添加对此的支持，除非你想与代理对抗。

# excel - 创建用于从 Word 复制到 Excel 的表格

> ID：854482
> 
> 赞同：0
> 
> 时间：2009-05-12T19:37:27.613
> 
> 标签：excel, vba, merge, ms-word

所以，我需要在 MS Word 表格中完成一些数据，并在 excel 中进行操作。我决定通过 VBA 子程序从 word 到 excel 来“节省时间”。我的源 Word 文档包含二十几张表。

我拿了我的源文档的表格，提取了我的数据并制作了一个带有新表格的新文档，只需要我将其复制并粘贴到 Excel 中。

然而，虽然复制前的决赛桌看起来不错。当我将它复制到 excel 时，它会将包含整个段落的单元格分解为单独的单元格。

正如大多数 excel 窥视者所知道的那样，即使解决方案看起来像在 excel 中，进行合并和居中 - 只保留选择中最上面的单元格中的内容！

所以，任何关于更好的合并和中心，或者更好的“节省时间”的建议，都会很棒。

这是到目前为止的代码示例：

```
Sub First()

Dim tableLength, tableIndex
tableLength = ThisDocument.Tables.Count

Dim tblReport As Table
Dim docReport As Document

Set docReport = Documents.Add
Set tblReport = docReport.Tables.Add(Selection.Range, 1, 2)

With tblReport

Dim fieldOne, subvalueAription, subvalueA, subvalueB, subvalueC

For tableIndex = 1 To tableLength

    fieldOne = ThisDocument.Tables(tableIndex).Rows(2).Cells(2).Range.Text
    subvalueA = Trim(ThisDocument.Tables(tableIndex).Rows(4).Cells(2).Range.Text)
    subvalueB = "A: " & Trim(ThisDocument.Tables(tableIndex).Rows(5).Cells(2).Range.Text)
    subvalueC = "B: " & Trim(ThisDocument.Tables(tableIndex).Rows(6).Cells(2).Range.Text)
    subvalueAription = subvalueA & subvalueB & subvalueC & "C: "

    Dim rowNext As row
    Set rowNext = .Rows.Add
    rowNext.Cells(1).Range.Text = fieldOne
    rowNext.Cells(2).Range.Text = subvalueA & subvalueB & subvalueC

Next

End With

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-14T08:39:21.867

Excel 使用与 Word 不同的行终止符。为了避免 Word 表格中的文本被拆分为多个 Excel 单元格的问题，您需要自己处理行终止符转换。

```
'Word > Excel
 newText = Replace(wordText, vbCrLf, vbLf) 
```

我是凭记忆发布的，但这就是问题的根源。

# wpf - Silverlight 项目 - 表达混合

> ID：854490
> 
> 赞同：0
> 
> 时间：2009-05-12T19:41:15.797
> 
> 标签：wpf, silverlight, xaml, expression-blend

有没有办法在 silverlight web 项目中应用位图效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-12T19:53:16.977

Silverlight2 目前不支持任何形式的位图效果。将位图效果添加到 Silverlight 应用程序中的任何元素（例如投影）的解决方法，您必须手动创建 UI 元素的阴影，并将其导出为图像，并将其作为图像放置在 Silverlight 应用程序中图片。

如果您使用的是 Expression Design，您只需将其复制并粘贴到 Expression Blend（确保您的剪贴板设置为 Silverlight XAML），它就会自动将位图效果转换为单独的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T19:54:12.390

您将能够在 silverlight 3 中。不要认为在早期版本中是可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-13T18:09:36.107

这现在可以在 Silverlight 3 中实现，几个月前发布了测试版。WPF 的 BitmapEffects 被认为太慢而无法移植，但有效果。两个是内置的——BlurEffect 和 DropShadowEffect。此外，您可以像在 WPF 中一样在 HLSL 中编写自己的像素着色器，以实现广泛的效果。

一些链接：Expression Blend 3 预览：[http ://www.microsoft.com/downloads/details.aspx?FamilyID=A04AA0AE-87BE-4201-A65E-E792859122FC&displaylang=en](http://www.microsoft.com/downloads/details.aspx?FamilyID=A04AA0AE-87BE-4201-A65E-E792859122FC&displaylang=en)

在 WPF 或 Silverlight 中运行的一些 ShaderEffects：http: [//www.codeplex.com/wpffx/](http://www.codeplex.com/wpffx/)

Silverlight 3 测试版：[http ://silverlight.net/getstarted/silverlight3/default.aspx](http://silverlight.net/getstarted/silverlight3/default.aspx)

# java - 为我们的 SMTP 服务器配置 Spring 的 MailSender 时出现问题（但 GMail 有效）

> ID：854493
> 
> 赞同：4
> 
> 时间：2009-05-12T19:41:35.547
> 
> 标签：java, spring, smtp, jakarta-mail

我在使用 Spring 的[MailSender](http://static.springframework.org/spring/docs/1.2.x/api/org/springframework/mail/MailSender.html)接口和具体实现[JavaMailSenderImpl](http://static.springframework.org/spring/docs/1.2.x/api/org/springframework/mail/javamail/JavaMailSenderImpl.html)通过 SMTP 发送邮件时遇到一些问题。我可以通过 GMail 发送邮件，但不能通过我们公司的 SMTP 服务器（[Postfix](http://www.postfix.org/)）。

## 正确的配置

为了查看我的配置是否正确，我使用了出色的邮件发件人[ssmtp](http://www.google.com/search?q=ssmtp)。它是一个简单的实用程序（能够模拟 Sendmail），仅用于通过 SMTP 发送邮件。

下面是我用来发送邮件的两个命令。第一个用于 GMail，第二个用于我们公司的 SMTP 服务器。两封邮件都按原样到达，因此后面的配置文件是正确的。

```
$ ssmtp -C gmail-smtp.conf john.doe@gmail.com < gmail-message.txt 
$ ssmtp -C other-smtp.conf john.doe@thecompany.net < other-message.txt 
```

下面列出了 ssmtp 配置文件和消息文件的内容。可以在以下位置查看配置文件的结构： http: [//linux.die.net/man/5/ssmtp.conf](http://linux.die.net/man/5/ssmtp.conf)：

*gmail-message.txt：*

```
To: john.doe@gmail.com
From: john.doe@gmail.com
Subject: Sent using the SMTP-server of GMail

Some content. 
```

*gmail-smtp.conf：*

```
mailhub=smtp.gmail.com:587
UseSTARTTLS=yes
AuthUser=john.doe@gmail.com
AuthPass=john_password 
```

*其他消息.txt：*

```
To: john.doe@thecompany.net
From: john.doe@thecompany.net
Subject: Sent using the SMTP-server of TheCompany

Some content. 
```

*其他-smtp.conf：*

```
# No username or password = no authentication
hostname=thecompany.net
mailhub=mail.thecompany.net:25 
```

## 针对 GMail 的 MailSender 配置

我使用此 Spring MailSender 配置通过 GMail 成功发送邮件：

```
...
<bean id="mailSender" class ="org.springframework.mail.javamail.JavaMailSenderImpl" >
    <property name="host" value="smtp.gmail.com" />
    <property name="port" value="587" />
    <property name="username" value="john.doe@gmail.com" />
    <property name="password" value="john_password" />
    <property name="javaMailProperties">
    <props>
        <prop key="mail.smtp.starttls.enable">true</prop>
    </props>
    </property>
</bean>
... 
```

## 问题（通过公司 SMTP 服务器发送）

使用此 MailSender 配置：

```
...
<bean id="mailSender" class ="org.springframework.mail.javamail.JavaMailSenderImpl" >
    <property name="host" value="mail.thecompany.net" />
    <property name="port" value="25" />
</bean>
... 
```

我得到这个例外：

```
org.springframework.mail.MailSendException; nested exceptions (1) are:
Failed message 1: javax.mail.SendFailedException: Invalid Addresses;
nested exception is:
com.sun.mail.smtp.SMTPAddressFailedException: 504 5.5.2 <rat>: Helo command rejected: need fully-qualified hostname

at org.springframework.mail.javamail.JavaMailSenderImpl.doSend(JavaMailSenderImpl.java:422)
at org.springframework.mail.javamail.JavaMailSenderImpl.send(JavaMailSenderImpl.java:308)
at org.springframework.mail.javamail.JavaMailSenderImpl.send(JavaMailSenderImpl.java:297)
... (The rest are methods I've created, which are irrelevant) 
```

我**也**得到*504 5.5.2 : Helo command denied: need full-qualified hostname* if I remove *hostname=* thecompany.net from *other-smtp.conf* using **ssmtp**。我想我必须以某种方式提供主机名。我的计算机名称是*rat*但它似乎想要*thecompany.net*。

任何和所有的帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2011-06-22T12:31:02.263

要添加以完成 matt b 的上一个[答案](https://stackoverflow.com/questions/854493/problem-configuring-springs-mailsender-for-our-smtp-server-but-gmail-works/854603#854603)，javamail 的正确选项是`smtp.mail.localhost`

```
<property name="javaMailProperties">
    <props>
        <prop key="mail.smtp.localhost">thecompany.net</prop>
    </props>
</property> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-22T13:38:02.850

尝试使用正确的值 ( *thecompany.net* ) 添加属性“mail.smtp.localhost”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T20:03:28.803

您可以在属性中传递您需要使用 SMTP 服务器设置的额外属性（主机名）`javaMailProperties`吗？

```
<bean id="mailSender" class ="org.springframework.mail.javamail.JavaMailSenderImpl" >
    <property name="host" value="mail.thecompany.net" />
    <property name="port" value="25" />
    <!-- addition: -->
    <property name="javaMailProperties">
        <props>
            <prop key="hostname">thecompany.net</prop>
        </props>
    </property>
</bean> 
```

不太确定`hostname`JavaMail API 中正确的密钥名称是什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T19:53:30.580

我认为在你的情况下这是一个地址解析问题。确保可以使用您部署此代码的机器上的给定名称访问邮件服务器。如果不只是在您的主机文件中添加一个条目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-12T11:58:56.873

SMTPTransport mailFrom() 按以下顺序设置发件人的地址：

```
SMTPMessage.getEnvelopeFrom()
mail.smtp.from property
From: header in the message
System username using the InternetAddress.getLocalAddress() method 
```

您只需将属性添加`from`到`javaMailProperies`您的电子邮件地址

# iphone - 在 iPhone SDK 中确定图像的尺寸

> ID：854499
> 
> 赞同：0
> 
> 时间：2009-05-12T19:42:34.700
> 
> 标签：iphone, cocoa-touch, image

简单地说，是否有可能使用 iPhone SDK 或与 iPhone SDK 兼容的库/框架以某种方式捕获图像的尺寸（特别是宽度和高度）？也许从 EXIF 元数据中提取维度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-12T19:47:24.913

从[Apple API](http://developer.apple.com/iphone/library/documentation/uikit/reference/UIImage_Class/Reference/Reference.html#//apple_ref/occ/instp/UIImage/size) for 中，从您的图像数据或文件`UIImage`创建一个，然后使用该属性获取表示图像尺寸的结构。`UIImage``size``CGSize`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-06-01T03:31:52.817

如果您的`UIImage`名字是`image`，您可以获取它的大小，然后使用该大小来获取宽度和高度，如下所示：

```
CGSize mySize = [image size];
CGFloat imageWidth = mySize.width;
CGFloat imageHeight = mySize.height; 
```

# c# - Ways in .NET to get an array of int from 0 to n

> ID：854500
> 
> 赞同：5
> 
> 时间：2009-05-12T19:42:50.693
> 
> 标签：c#, .net, arrays

I'm searching the way(s) to fill an array with numbers from 0 to a random. For example, from 0 to 12 or 1999, etc.

Of course, there is a `for`-loop:

```
var arr = int[n];
for(int i = 0; i < n; i++)
{
  arr[i] = i;
} 
```

And I can make this method been an extension for `Array` class. But is there some more interesting ways?

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-05-12T19:48:56.203

This already exists(returns IEnumerable, but that is easy enough to change if you need):

```
arr = Enumerable.Range(0, n); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-12T19:47:24.630

The most interesting way in my mind produces not an array, but an `IEnumerable<int>` that enumerates the same number - it has the benefit of O(1) setup time since it defers the actual loop's execution:

```
public IEnumerable<int> GetNumbers(int max) {
    for (int i = 0; i < max; i++)
        yield return i;
} 
```

This loop goes through all numbers from `0` to `max-1`, returning them one at a time - but it only goes through the loop when you actually need it.

You can also use this as `GetNumbers(max).ToArray()` to get a 'normal' array.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T20:07:34.083

The best answer depends on why you need the array. The thing is, the value of any array element is equal to the index, so accessing any element is essentially a redundant operation. Why not use a class with an indexer, that just returnes the value of the index? It would be indistinguishable from a real array and would scale to any size, except it would take no memory and no time to set up. But I get the feeling it's not speed and compactness you are after. Maybe if you expand on the problem, then a better solution will be more obvious.

# html - firefox 无法加载 HTML 并告诉保存“未键入的二进制数据”

> ID：854517
> 
> 赞同：0
> 
> 时间：2009-05-12T19:46:27.643
> 
> 标签：html, firefox, dom, header, flash

在我们的网站中，媒体文件在 Flash 的帮助下加载时以 HTML 格式播放。启用自动播放时，我们在 Firefox 中遇到问题。似乎当 HTML 从流中加载一些二进制数据时，会破坏 HTML 标头，因此无法检测到 MIME-TYPE，因此要求保存 UNTYPED-BINARY 数据。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T19:49:36.703

服务器正在发送错误的 MIME 类型。我能给出的最佳建议是确保在服务器上正确设置 MIME 类型。另外，请确保您为 firefox 安装了 Flash 播放器。在您的代码中放置 flashplayer 检测：http: [//www.adobe.com/devnet/flashplayer/articles/swfobject.html](http://www.adobe.com/devnet/flashplayer/articles/swfobject.html)

# sql - SQL查询父子不同

> ID：854531
> 
> 赞同：0
> 
> 时间：2009-05-12T19:49:09.013
> 
> 标签：sql, sql-server, parent-child

我有一对 SQL 服务器表。

P 包含 id 和 name。PR 包含 id、interestrate、tiernumber、fromdate、todate 和 P.id。PR 可能包含每个 p.id / tier 列出的许多行。（等级是产品在任何给定日期期间可能具有的费率列表。）

例如：产品 1 层 1 从 2008 年 1 月 1 日到 2009 年 1 月 1 日开始，有 6 个费率，每个费率显示 1 行。产品 1 层 2 开始于 2009 年 1 月 2 日等等等等

我需要一个显示 P.name 和 PR.tiernumber 和日期的视图......但我只想要一行来代表层。

这很简单：

```
SELECT DISTINCT P.ID, P.PRODUCTCODE, P.PRODUCTNAME, PR.TIERNO, 
  PR.FROMDATE, PR.TODATE, PR.PRODUCTID
FROM dbo.PRODUCTRATE AS PR INNER JOIN dbo.PRODUCT AS P 
  ON P.ID = PR.PRODUCTID
ORDER BY P.ID DESC 
```

这给了我正确的数据......但是：这不允许我看到 PR.ID，因为这会否定不同的。

我需要限制结果集，因为用户只需要查看层列表，我需要查看显示所有数据的 PR.ID。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T20:03:10.987

```
SELECT P.ID, P.ACUPRODUCTCODE, P.PRODUCTNAME, PR.TIERNO, 
  PR.FROMDATE, PR.TODATE, PR.PRODUCTID, MIN(PR.ID)
FROM dbo.PRODUCTRATE AS PR INNER JOIN dbo.PRODUCT AS P 
  ON P.ID = PR.PRODUCTID
GROUP BY P.ID, P.ACUPRODUCTCODE, P.PRODUCTNAME, PR.TIERNO, 
  PR.FROMDATE, PR.TODATE, PR.PRODUCTID
ORDER BY P.ID DESC 
```

应该做的工作。GROUP BY 代替 DISTINCT，使用汇总函数 (MIN) 来获取 PR.ID 的特定值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T20:03:47.303

听起来您想用同一个查询完成两件不同的事情，这没有意义。您要么需要产品/等级/日期信息列表，要么需要利率列表。

如果你想选择一个特定的 PR.ID 来处理你的数据，那么你需要决定规则是什么——是什么决定了你想取回哪个 ID？

# ruby-on-rails - Internet Explorer（所有版本）的 Rails 和 restful_authentication 问题

> ID：854536
> 
> 赞同：1
> 
> 时间：2009-05-12T19:50:10.680
> 
> 标签：ruby-on-rails, internet-explorer

我部署了一个在 Safari、Firefox 和 Opera 中运行良好的 rails 应用程序。但是，当我尝试从 Internet Explorer 6+ 登录时，我被带到了正确的页面，但没有任何显示。消息来源说一切都在那里，但页面只是空白。当我点击刷新时，一切正常。有人有这方面的经验吗？

* * *

***相关代码：***

**##应用程序控制器**

```
# Filters added to this controller apply to all controllers in the application.
# Likewise, all the methods added will be available for all controllers.

class ApplicationController < ActionController::Base
  helper :all # include all helpers, all the time 
  layout 'public'
  before_filter :presenter

  include AuthenticatedSystem
  # See ActionController::RequestForgeryProtection for details
  # Uncomment the :secret if you're not using the cookie session store
  protect_from_forgery  :secret => 'secrete code'

  # See ActionController::Base for details 
  # Uncomment this to filter the contents of submitted sensitive data parameters
  # from your application log (in this case, all fields with names like "password"). 
  # filter_parameter_logging :password

  def index
  end

  def terms
  end

  def contact
    @contact = Contact.new
  end

  def send_contact_request
    @contact = Contact.new(params['contact'])

    if @contact.save
     begin
        UserMailer.deliver_contact_message(@contact)
        flash[:notice] = @presenter.notify("notification", "Success!", "Your message has been delivered.")
        redirect_to root_path
     rescue
        flash[:notice] = @presenter.notify("error", "Error!", "There was an error delivering your request.")
        render :action=>"contact"
    end
    else
      render :action=>"contact"
    end
  end

  def schedule
    @schedule = Schedule.new
  end

  def schedule_testing
    @schedule = Schedule.new(params['schedule'])

    if @schedule.save && @schedule.agreed?
        UserMailer.deliver_testing_request(@schedule)
        flash[:notice] = @presenter.notify("notification", "Success!", "Your request has been delivered.")
        redirect_to root_path
    else
      flash[:notice] = @presenter.notify("error", "Error!", "There was an error delivering your request.")
      render :action => "schedule"
    end
  end

  protected
    def presenter 
      @presenter = AdminPresenter.new(:param => current_user)
    end
end 
```

**##sessions 控制器**

```
# This controller handles the login/logout function of the site.  
class SessionsController < ApplicationController

  # Be sure to include AuthenticationSystem in Application Controller instead
  include AuthenticatedSystem

  layout 'public'

  before_filter :presenter

  # render new.rhtml
  def new
  end

  def create
    logout_keeping_session!
    user = User.authenticate(params[:email], params[:password])
    if user
      # Protects against session fixation attacks, causes request forgery
      # protection if user resubmits an earlier form using back
      # button. Uncomment if you understand the tradeoffs.
      # reset_session
      self.current_user = user
      new_cookie_flag = (params[:remember_me] == "1")
      handle_remember_cookie! new_cookie_flag
      if user.password_changed?    
        redirect_back_or_default(admin_index_path)
        flash[:notice] = @presenter.notify("notification", "Welcome!", "Logged in successfully.")
      else
        redirect_to edit_admin_user_path(user)        
        flash[:notice] = @presenter.notify("warning", "Welcome!", "Please change your password to something more memorable.")
      end
    else
      note_failed_signin
      @email       = params[:email]
      @remember_me = params[:remember_me]
      render :action => 'new'
    end
  end

  def destroy
    logout_killing_session!
    redirect_to admin_index_path
    flash.now[:notice] = @presenter.notify("notification", "Success!", "You have been logged out.")
  end

protected
  # Track failed login attempts
  def note_failed_signin
    @email = params[:email]
    flash[:notice] = @presenter.notify("error", "Error!", "Could not log you in as #{@email}.")
    logger.warn "Failed login for '#{params[:email]}' from #{request.remote_ip} at #{Time.now.utc}"
  end

    def presenter
      @presenter = AdminPresenter.new(:param => @map)
    end
end 
```

**##log 对 IE 的响应**

```
Processing SessionsController#create (for IP ADDY at 2009-05-12 14:44:57) [POST]
  Session ID: fccb95ca6fd7a7730b7a585f1c8457a3
  Parameters: {"commit"=>"Log in", "authenticity_token"=>"8a05db56dbd6e7116fb82e4f3fdb77df75383ede", "password"=>"secret", "email"=>"secret@secret.com"}
Cookie set: auth_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (email = 'zkwentz@gmail.com' and activated_at IS NOT NULL) LIMIT 1[0m
  [4;35;1mSQL (0.0ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mCOMMIT[0m
Cookie set: auth_token=; path=/
Redirected to /admin
Completed in 1ms (DB: 0) | 302 Found [http://www.gessnerengineering.com/session]

Processing AdminController#index (for IP ADDY at 2009-05-12 14:44:57) [GET]
  Session ID: fccb95ca6fd7a7730b7a585f1c8457a3
  [4;35;1mUser Load (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 12) LIMIT 1[0m
  [4;36;1mProfile Load (0.0ms)[0m   [0;1mSELECT * FROM `profiles` WHERE (approved = 0) [0m
  [4;35;1mProject Load (0.0ms)[0m   [0mSELECT * FROM `projects` WHERE (approved = 0) [0m
  [4;36;1mMap Load (0.0ms)[0m   [0;1mSELECT * FROM `maps` WHERE (approved = 0) [0m
  [4;35;1mProfile Load (0.0ms)[0m   [0mSELECT * FROM `profiles` WHERE (score_approved = 0) [0m
Rendering template within layouts/admin
Rendering admin/index
  [4;36;1mProfile Load (0.0ms)[0m   [0;1mSELECT * FROM `profiles` WHERE (`profiles`.user_id = 12) LIMIT 1[0m
  [4;35;1mRole Load (0.0ms)[0m   [0mSELECT * FROM `roles` WHERE (`roles`.`id` = 1) [0m
Rendered admin/users/_user_bar (0.1ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `roles` WHERE (`roles`.`id` = 1) [0m
Completed in 3ms (View: 2, DB: 3) | 200 OK [http://www.gessnerengineering.com/admin] 
```

**##log 对 Firefox 的响应**

```
Processing SessionsController#create (for IP ADDY at 2009-05-12 14:46:57) [POST]
  Session ID: 163aa367284e7734a17c545fcf85bc95
  Parameters: {"commit"=>"Log in", "authenticity_token"=>"bc549a7f2ae4a937044db12e283c1af13e045b50", "password"=>"secret", "email"=>"secret@secret.com"}
Cookie set: auth_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (email = 'zkwentz@gmail.com' and activated_at IS NOT NULL) LIMIT 1[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.0ms)[0m   [0mCOMMIT[0m
Cookie set: auth_token=; path=/
Redirected to /admin
Completed in 2ms (DB: 0) | 302 Found [http://www.gessnerengineering.com/session]

Processing AdminController#index (for IP ADDY at 2009-05-12 14:46:57) [GET]
  Session ID: 163aa367284e7734a17c545fcf85bc95
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 12) LIMIT 1[0m
  [4;35;1mProfile Load (0.0ms)[0m   [0mSELECT * FROM `profiles` WHERE (approved = 0) [0m
  [4;36;1mProject Load (0.0ms)[0m   [0;1mSELECT * FROM `projects` WHERE (approved = 0) [0m
  [4;35;1mMap Load (0.0ms)[0m   [0mSELECT * FROM `maps` WHERE (approved = 0) [0m
  [4;36;1mProfile Load (0.0ms)[0m   [0;1mSELECT * FROM `profiles` WHERE (score_approved = 0) [0m
Rendering template within layouts/admin
Rendering admin/index
  [4;35;1mProfile Load (0.0ms)[0m   [0mSELECT * FROM `profiles` WHERE (`profiles`.user_id = 12) LIMIT 1[0m
  [4;36;1mRole Load (0.0ms)[0m   [0;1mSELECT * FROM `roles` WHERE (`roles`.`id` = 1) [0m
Rendered admin/users/_user_bar (0.1ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `roles` WHERE (`roles`.`id` = 1) [0m
Completed in 4ms (View: 2, DB: 3) | 200 OK [http://www.gessnerengineering.com/admin] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T19:53:14.030

[尝试使用W3 Schools Validator](http://validator.w3.org/)之类的工具来验证您的标记 (HTML) 。IE 有时（令人惊讶地）对标记更加严格，有时如果它无法“弄清楚”，它就会爆炸并且不会渲染元素。验证器有时可以追踪未关闭的标签等。

# c++ - 内存中像素数据的布局？

> ID：854541
> 
> 赞同：1
> 
> 时间：2009-05-12T19:51:31.693
> 
> 标签：c++, c, image

我正在为基于 PNG 的图像格式编写 C++ 库。对我来说，一个停止点是我不确定我应该如何在内存中布置像素数据。据我所知，有两种实用的方法：

1.  一个大小数组（宽*高）；每个像素都可以通过 array[y*width + x] 访问。
2.  一个大小（高度）的数组，包含指向大小（宽度）数组的指针。

PNG (libpng) 的标准参考实现使用上述方法 2，而我看到其他人使用方法 1。是一种比另一种更好，或者每种方法都有其优缺点，必须妥协制作？此外，大多数图形显示系统使用哪种格式（也许是为了便于将我的库的输出用于其他 API）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-12T20:02:15.013

在我的头顶上：

*   让我选择 #2 的一件事是您的内存要求有点放松。如果您选择#1，系统将需要能够分配`height * width`大量***连续***内存。而在 #2 的情况下，它可以自由地从空闲区域分配较小的连续内存块`width`（也可以`height`）。（当您考虑每个像素的通道时，即使是中等大小的图像，#1 也可能会失败。）
*   此外，如果出于图像处理目的需要交换行（或列）（指针交换就足够了），它可能会稍微好一些。
*   #2 的缺点当然是额外的间接级别，它渗透到每次访问和要维护的指针数组中。但考虑到当今的处理器速度和内存，这几乎不是问题。
*   #2 的第二个缺点是数据不一定彼此相邻，这使得处理器更难将正确的内存页面加载到缓存中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-12T20:00:08.807

方法 2（将数组分割成行）的优点是您可以逐步执行内存操作，例如调整图像大小或打乱图像，而无需一次重新分配整个内存块。对于非常大的图像，这可能是一个优势。

单个数组的优点是您的计算更简单，即向下走一行

```
pos += width; 
```

而不必引用指针。对于中小型图像，这可能更快。除非您要处理数百 Mb 的图像，否则我会使用方法 1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T20:17:34.643

我怀疑 libpng 这样做（样式 2）有几个可能的原因：

1.  避免大量分配（如前所述），并且可以轻松处理非常大的 PNG，尤其是在没有 VM 的系统中
2.  （也许）允许交错解码ala interleaved JPEG（如果PNG支持）
3.  易于某些转换（垂直翻转）（不太可能）
4.  易于缩放（插入或删除行而不需要完整的第二个缓冲区，或加宽/变窄行）（不太可能但可能）

这种方法的问题（假设每一行都是一个分配）是更多的分配/空闲开销，并且可能会鼓励内存碎片。

除非您有充分的理由，否则请使用样式 1（单一分配），并且可能会舍入到您正在使用的体系结构的“良好”边界（可能是 4、8、16 甚至更多字节）。请注意，许多库函数可能会寻找没有填充的样式 1 - 考虑一下您将如何使用它以及将它们传递到哪里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T20:14:49.203

Windows 本身使用方法 1 的变体。图像的每一行填充为 4 字节的倍数，颜色的顺序是 B、G、R，而不是更正常的 R、G、B。缓冲区的第一行也是图像的底行。

# asp.net - 这些叫做 <% ... %> 是什么？以及在页面中可以使用哪些方式

> ID：854542
> 
> 赞同：3
> 
> 时间：2009-05-12T19:51:56.417
> 
> 标签：asp.net, .net, webforms, tags

在 .Net 网络表单中...

这些特殊标签叫什么？

我知道2： `<%-- comment --%>` 评论

和`<%# used with Eval and Bind #>`

那么#是什么意思呢？还有更多吗？

我知道您可以在其中放置一些基本的逻辑和函数调用，但我从未找到任何真正描述如何使用和应该使用的东西。

我希望这不是重复的，但很难搜索`<%#`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-12T19:54:28.677

它们也被称为蜂刺：
[在 ASP.Net 中，<%= 和 <%# 之间有什么区别](https://stackoverflow.com/questions/517721/in-asp-net-what-is-the-difference-between-and)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-12T19:53:21.157

服务器标签。它们被称为服务器标签。

当然还有更多。

`<%= "string constant" %>`- 它将给定的字符串输出到 HTML 输出

`<%= BO.Customer.GetName () %>`- 将对返回字符串结果的函数执行相同的操作

`<% RenderMyCoolControl %>`- 如果没有“=”字符，则假定您的函数将使用 Response.Write 将某些内容呈现给 HTML 输出

或者您可以直接使用它：`<% Response.Write ("string constant") %>`

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T19:55:37.207

用于绑定表达式；例如 Eval 和 Bind，最常见于 GridView、Repeater 等数据控件中

> 还有更多吗？

看看这里：

[内联标签](http://naspinski.net/post/inline-aspnet-tags-sorting-them-all-out-(3c25242c-3c253d2c-3c252c-3c252c-etc).aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-12T20:10:40.677

这里有一个相当完整的列表：

> [ASP.NET “特殊”标签](https://stackoverflow.com/questions/649428/asp-net-special-tags)

正如那里接受的答案所说，它们是“[服务器端脚本标签](http://www.microsoft.com/technet/prodtechnol/windows2000serv/reskit/iisbook/c06%5Fasp%5Fserver-side%5Fscripting.mspx?mfr=true)”

# asp.net - 将单个文件 aspx 转换为后面的代码

> ID：854545
> 
> 赞同：7
> 
> 时间：2009-05-12T19:52:35.777
> 
> 标签：asp.net, visual-studio-2008, code-behind

我正在使用 VS 2008 .Net 3.5 中的网站（不是 Web 应用程序），它使用单文件 .aspx 模型，其中服务器代码包含在 html 的头部而不是使用 .aspx.cs页面后面的代码。

我想快速转换文件以使用代码隐藏模型，但到目前为止，我能做到这一点的唯一方法是删除文件，创建一个新的同名代码隐藏 aspx 页面，然后手动复制在 aspx 相关代码到 .aspx 页面和服务器代码到 .aspx.cs 页面。

有没有更快的方法来做到这一点？

我看过两篇*似乎*回答了这个问题的文章，但遗憾的是没有： [Working with Single-File Web Forms Pages in Visual Studio .NET](http://msdn.microsoft.com/en-us/library/aa290385(VS.71).aspx#vstchworkingwithsingle-filewebformspagesinvisualstudioanchor5)和 [How do you convert an aspx or master page file to page and code behind？](https://stackoverflow.com/questions/46938/how-do-you-convert-an-aspx-or-master-page-file-to-page-and-code-behind)

两者都提供了一个简单的解决方案，让 VS 完成腿部工作，您只需将其指向一个文件并拍摄。无论出于何种原因，它们都不起作用。第一篇文章似乎是指 VS 2002，而第二篇文章似乎是指一个 Web 应用程序。

网站有希望吗？

另外，也许我看错了，单页模型有优势吗？我确实计划很快将整个网站转换为 Web 应用程序，单页模型在 Web 应用程序中是否运行良好？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-05-18T22:35:55.437

如果手动转换太费时间，并且自动转换不起作用，我认为您唯一的其他选择就是构建自己的转换器。您可以编写一个简单的控制台应用程序，它在命令行上采用目录路径并处理该目录中的每个文件。这不是太难 - 在这里，我会带你开始：

```
using System;
using System.IO;

class Program
{
    const string ScriptStartTag = "<script language=\"CS\" runat=\"server\">";
    const string ScriptEndTag = "</script>";

    static void Main(string[] args)
    {
        DirectoryInfo inPath = new DirectoryInfo(args[0]);
        DirectoryInfo outPath = new DirectoryInfo(args[0] + "\\codebehind");
        if (!outPath.Exists) inPath.CreateSubdirectory("codebehind");
        foreach (FileInfo f in inPath.GetFiles())
        {
            if (f.FullName.EndsWith(".aspx"))
            {
                //  READ SOURCE FILE
                string fileContents;
                using (TextReader tr = new StreamReader(f.FullName))
                {
                    fileContents = tr.ReadToEnd();
                }
                int scriptStart = fileContents.IndexOf(ScriptStartTag);
                int scriptEnd = fileContents.IndexOf(ScriptEndTag, scriptStart);
                string className = f.FullName.Remove(f.FullName.Length-5).Replace("\\", "_").Replace(":", "_");
                //  GENERATE NEW SCRIPT FILE
                string scriptContents = fileContents.Substring(
                    scriptStart + ScriptStartTag.Length,
                    scriptEnd-(scriptStart + ScriptStartTag.Length)-1);
                scriptContents =
                    "using System;\n\n" +
                    "public partial class " + className + " : System.Web.UI.Page\n" +
                    "{\n" +
                    "    " + scriptContents.Trim() +
                    "\n}";
                using (TextWriter tw = new StreamWriter(outPath.FullName + "\\" + f.Name + ".cs"))
                {
                    tw.Write(scriptContents);
                    tw.Flush();
                }
                //  GENERATE NEW MARKUP FILE
                fileContents = fileContents.Remove(
                    scriptStart,
                    scriptEnd - scriptStart + ScriptEndTag.Length);
                int pageTagEnd = fileContents.IndexOf("%>");
                fileContents = fileContents.Insert(PageTagEnd,
                    "AutoEventWireup=\"true\" CodeBehind=\"" + f.Name + ".cs\" Inherits=\"" + className + "\" ");
                using (TextWriter tw = new StreamWriter(outPath.FullName + "\\" + f.Name))
                {
                    tw.Write(fileContents);
                    tw.Flush();
                }
            }
        }
    }
} 
```

30 分钟编码，30 分钟调试。有一些明显的错误 - 例如，如果您的代码在**内部**的任何地方都包含一个结束脚本标记，那么它将无法正确导出。结果不会很漂亮，但这应该可以处理 90% 的代码，并且您应该能够手动清理任何问题结果。那里，有帮助吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-12T20:27:40.540

基本上你需要创建一个类文件。从 System.Web.UI.Page 继承类，然后将页面的 page 指令更改为指向后面的代码。

```
<%@ Page Language="C#" AutoEventWireup="true"  CodeBehind="Default.aspx.cs" Inherits="_Default" %> 
```

其中 Inherits 是您的类文件的名称，CodeBehind 是您刚刚创建的代码文件。您可能需要重新加载项目以使解决方案资源管理器显示嵌套的文件，但即使您不这样做，它也应该可以工作。

您还可以查看接受的答案以寻找替代方案。[IIS 如何知道它是服务于网站还是 Web 应用程序项目？](https://stackoverflow.com/questions/836811/how-does-iis-know-if-its-serving-a-web-site-or-a-web-application-project/836831#836831)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-12T19:59:10.493

老实说，我不知道捷径。

您可能最好的选择是创建一个新页面并复制粘贴直到一切正常，然后删除您的源，将您的新文件重命名为旧名称并重建。

不理想，但可能是最快/最干净/最安全的移植方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-11-20T12:26:50.530

非常感谢！如果您的代码是用 VB.Net 编写的，这里是一个稍微修改过的版本。只需在包含 aspx 站点的每个文件夹中编译并运行转换器。

```
using System.IO;
namespace Converter
{
    class Program
    {
        const string ScriptStartTag = "<script runat=\"server\">";
        const string ScriptEndTag = "</script>";

        static void Main(string[] args)
        {
            string currentDirectory = System.Environment.CurrentDirectory;

            var inPath = new DirectoryInfo(currentDirectory);
            var outPath = new DirectoryInfo(currentDirectory);
            if (!outPath.Exists) inPath.CreateSubdirectory("codebehind");
            foreach (FileInfo f in inPath.GetFiles())
            {
                if (f.FullName.EndsWith(".aspx"))
                {
                    //  READ SOURCE FILE
                    string fileContents;
                    using (TextReader tr = new StreamReader(f.FullName))
                    {
                        fileContents = tr.ReadToEnd();
                    }
                    int scriptStart = fileContents.IndexOf(ScriptStartTag);
                    int scriptEnd = fileContents.IndexOf(ScriptEndTag, scriptStart);
                    string className = f.FullName.Remove(f.FullName.Length - 5).Replace("\\", "_").Replace(":", "_");
                    //  GENERATE NEW SCRIPT FILE
                    string scriptContents = fileContents.Substring(
                        scriptStart + ScriptStartTag.Length,
                        scriptEnd - (scriptStart + ScriptStartTag.Length) - 1);
                    scriptContents =
                        "Imports System\n\n" +
                        "Partial Public Class " + className + " \n Inherits System.Web.UI.Page\n" +
                        "\n" +
                        "    " + scriptContents.Trim() +
                        "\nEnd Class\n";
                    using (TextWriter tw = new StreamWriter(outPath.FullName + "\\" + f.Name + ".vb"))
                    {
                        tw.Write(scriptContents);
                        tw.Flush();
                    }
                    //  GENERATE NEW MARKUP FILE
                    fileContents = fileContents.Remove(
                        scriptStart,
                        scriptEnd - scriptStart + ScriptEndTag.Length);
                    int pageTagEnd = fileContents.IndexOf("%>");

                    fileContents = fileContents.Insert(pageTagEnd,
                        "AutoEventWireup=\"false\" CodeBehind=\"" + f.Name + ".vb\" Inherits=\"" + className + "\" ");
                    using (TextWriter tw = new StreamWriter(outPath.FullName + "\\" + f.Name))
                    {
                        tw.Write(fileContents);
                        tw.Flush();
                    }
                }
            }
        }

    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-15T21:42:10.633

如果您的 aspx 文件有 2 个部分并且您能够以机械方式将其拆分，为什么您不只编写一个小型解析器来自动化工作？应该不难，它只是纯文本操作和递归文件查找。

# wpf - VS2008 Express 中的 WPF 稳定性

> ID：854546
> 
> 赞同：3
> 
> 时间：2009-05-12T19:52:53.077
> 
> 标签：wpf, visual-studio, visual-studio-2008, xaml, stability

我在 xaml 编辑器中遇到稳定性问题。一天重启 25 次 VS 就变得乏味了。是否有可以最小化问题的策略或提供视觉显示的开源替代方案？任何帮助将不胜感激！我不想跳出窗外，但我会……我会的！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-12T22:58:33.120

如果您不需要设计器，您可以将 XAML 文件的默认编辑器切换到“源代码编辑器”，它仍然提供补全功能，并且速度更快、响应更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T23:06:40.610

安装产品修补程序后，Visual Studio XAML 设计器的稳定性大大提高。这是一种可能对您的情况有所帮助的方法：http: [//support.microsoft.com/kb/958017](http://support.microsoft.com/kb/958017)

希望这可以帮助！

# c# - 后台工作人员不会报告进度

> ID：854548
> 
> 赞同：18
> 
> 时间：2009-05-12T19:53:06.433
> 
> 标签：c#, wpf, backgroundworker, progress

我有一个后台工作人员运行一个长的数据库任务。我想在任务运行时显示进度条。不知何故，后台工作人员不会报告任务的进度。

这就是我所拥有的：

```
BackgroundWorker _bgwLoadClients;

_bgwLoadClients = new BackgroundWorker();
_bgwLoadClients.WorkerReportsProgress = true;
_bgwLoadClients.DoWork += new DoWorkEventHandler(_bgwLoadClients_DoWork);
_bgwLoadClients.RunWorkerCompleted += new RunWorkerCompletedEventHandler(_bgwLoadClients_RunWorkerCompleted);
_bgwLoadClients.ProgressChanged += new ProgressChangedEventHandler(_bgwLoadClients_ProgressChanged);
_bgwLoadClients.RunWorkerAsync(parms);

private void _bgwLoadClients_DoWork(object sender, DoWorkEventArgs e)
{
    DataTable dt = getdate();
    e.Result = dt;
}

void _bgwLoadClients_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    progressBar1.Value = e.ProgressPercentage;
} 
```

我在 WPF 中这样做，但我想它不会有所作为。

提前致谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-05-12T20:15:01.217

您需要将 DoWork 方法分解为可报告的进度，然后调用 ReportProgress。

举个例子：

```
private void Something_DoWork(object sender, DoWorkEventArgs e) 
{
    // If possible, establish how much there is to do
    int totalSteps = EstablishWorkload();

    for ( int i=0; i<totalSteps; i++)
    {
        // Do something...

        // Report progress, hint: sender is your worker
        (sender as BackgroundWorker).ReportProgress((int)(100/totalSteps)*i, null);
    }

} 
```

如果您的工作无法预先确定，请尝试添加您自己的百分比：

```
private void Something_DoWork(object sender, DoWorkEventArgs e) 
{
    // some work

    (sender as BackgroundWorker).ReportProgress(25, null);

    // some work

    (sender as BackgroundWorker).ReportProgress(50, null);

    // some work

    (sender as BackgroundWorker).ReportProgress(60, null);

    // some work

    (sender as BackgroundWorker).ReportProgress(99, null);
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2011-02-11T08:18:51.240

在属性窗口或代码中将 backgroundworker 对象的**WorkReportProgress**属性修改为**true 。**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-12T20:00:41.333

您必须手动调用[`ReportProgress()`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.reportprogress.aspx)来引发[ProgressChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.progresschanged.aspx)事件。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-12T20:03:12.670

您需要在 DoWork 方法中调用 worker.ReportProgress(percentComplete)。percentComplete 应根据总工作量计算。例如：

```
for(int i =0; i != 100; i++) {
    // do something
    worker.ReportProgress(i);
} 
```

有时很难将作业分成几个块来报告进度。不幸的是 BackgroundWorker 不能解决这个问题，你必须自己做。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-12T19:59:17.950

只报告dowork事件的进展

```
private void _bgwLoadClients_DoWork(object sender, DoWorkEventArgs e) {
    int progresValue0to100 = 75;
    (sender as System.ComponentModel.BackgroundWorker).ReportProgress(progresValue0to100);
    //do your jobs..
} 
```

它像这样工作

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-12T21:47:07.430

必须通过调用 BackgroundWorker 上的 ReportProgress 方法从 DoWork 事件中发送进度。在您的情况下，您无法报告任何进度，因为所有工作都是在 DoWork 功能之外完成的。您只能在调用 getdate() 之前和之后报告进度，但不能在调用期间报告进度，因为 BackgroundWorker 线程很忙。

# iphone - 控制在导航栏中显示的 UIImageView 中加载的图像的位置

> ID：854558
> 
> 赞同：0
> 
> 时间：2009-05-12T19:54:26.210
> 
> 标签：iphone

我在导航栏上显示图像（我使用 UIImageView）。你能告诉我如何将它定位在导航栏上的某个 x、y 位置吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T20:04:02.687

假设您将 UIImageView 添加为 UINavigationBar 视图的子视图，您可以使用 UIView 方法`initWithFrame:`选择特定`CGRect`的在其中绘制图像视图。此方法允许您根据 superview 的坐标系指定 UIImageView 应在哪个矩形内绘制。

有关详细信息，请参阅[此 Apple 文档页面](http://developer.apple.com/iphone/prerelease/library/documentation/UIKit/Reference/UINavigationBar_Class/Reference/UINavigationBar.html)（必须注册为 iPhone 开发人员）。

# c# - Visual Studio 热键偶尔会更改，特别是 F6 与 Ctrl-Shift-B 用于构建。为什么？

> ID：854563
> 
> 赞同：97
> 
> 时间：2009-05-12T19:54:54.807
> 
> 标签：c#, visual-studio-2008

我总是按`F6`下去构建我的项目。突然，我的一些 Visual Studio 实例希望我使用`Ctrl`- `Shift`- `B`。它与键盘无关——菜单选项的实际文本从“ `F6`”变为“ `Ctrl`-- ”。`Shift``B`

关于如何解决的任何答案，以及**是什么原因造成**的？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2009-05-12T20:00:48.307

键盘映射损坏问题可能吗？检查工具/选项，环境/键盘。应该会看到您的键盘映射方案的下拉菜单，并在其旁边看到一个重置按钮。点击重置按钮。

我不对这种搞砸你的设置负责——在这样做之前保存它们，以防你搞砸了狗。

哦，如果那里的 narcs 关心，我认为这是一个有效的问题，如果有人投票关闭它，就会被淘汰。当然，既然我已经这么说了，那是肯定的，不是吗？

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2009-05-12T20:00:28.573

您的键盘方案已更改 - 转到工具/选项/环境/键盘并将默认键盘方案设置为“Visual C# 2005”

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2016-02-11T09:27:40.240

这是因为您可能选择了“常规开发设置”作为 Visual Studio 的默认环境设置（通常我们在安装 VS 后第一次启动时会这样做，因为它会弹出一个对话框来选择默认环境设置）。

如果您只想更改键盘热键设置，您只需按照其他人提出的解决方案（**工具 > 选项 > 环境 > 键盘 > Visual C# 2015**）。***但这****只会将键盘设置更改为 C# 设置，而将其余设置仅保留为常规设置。*

如果您真的打算将整个环境更改为 C# 设置，请遵循此方法。

**解决方案 1：**

1.  转到“工具”（菜单）
2.  “导入和导出设置”
3.  “导入选定的环境设置”
4.  选择“是，保存我当前的设置”或“否，只需导入新设置，覆盖我当前的设置”
5.  “您要导入哪个设置集合？”
6.  在“默认设置”树下选择“Visual C#”节点（您可能会看到一个黄色警告标志，无需担心），然后单击“完成”按钮。

或者你可以做同样的事情

**解决方案 2：**

1.  转到“工具”（菜单）
2.  “导入和导出设置”
3.  “重置所有设置”
4.  选择“是，保存我当前的设置”或“否，只需导入新设置，覆盖我当前的设置”
5.  从列表中选择“Visual C#”，然后单击“完成”按钮。

这两种方法都会给您相同的结果，将您的完整环境更改为“Visual C#”。

享受编码:)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2010-04-13T09:47:40.047

如果您有其他键绑定并且不想重置批次，请使用：`Tools -> Options -> Environment -> Keyboard`

然后在下拉列表中找到`Build.BuildSolution`或`Build.RebuildSolution`（根据您的喜好）选择，将光标放在并拍打。它会向您显示当前分配给您的内容，对我来说是遍历拆分窗格（也许当您第一次使用拆分窗格时它会覆盖？我一直想知道为什么我的家庭开发机器是用我的工作机器构建的没有，想起来我从来没有在家里使用过拆分窗格）然后点击分配。`Global``Use shortcut in``Press Shortcut Key``F6``F6``F6`

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-05-12T20:23:37.723

这是因为您安装了 VMWare。它重新映射该键，以便可以使用 F6 在虚拟机上开始调试。

也惹恼了我。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-04-04T15:12:26.273

您可以重新分配`SHIFT`+`F6`以仅构建当前项目：

1/ 前往`Tools -> Options -> Environment -> Keyboard`

2/ 显示包含以下内容的命令：`Build.BuildSelection`

3/ 聚焦该字段`Press shortcut keys`并按`Shift`+`F6`分配它

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-04T22:25:54.040

Notepad++ 的 NPPscripting 插件在 NP++ 运行时破坏了我整个操作系统的 Ctrl-Shift-B。卸载插件（我不得不从 Notepad++ 插件文件夹中手动删除 DLL）为我修复了损坏的键映射。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-05-27T13:04:05.557

我安装了 TPFanControl，它在全球范围内捕获了++ `Ctrl`。[我使用了这个答案](https://superuser.com/questions/57041/how-to-find-which-program-captures-global-keyboard-shortcut)中提到的工具来找出哪个程序注册了哪些快捷方式。`Shift``B`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-01-24T17:22:15.247

我的解决方案中有一个陈旧的版本（包含的库显然使用旧的 DLL 版本，并且在运行时我得到了 MissingMethodException）所以我删除了 C# 项目中的所有 \bin 目录，重新启动了 Visual Studio，突然这个问题现在影响了我这是我开始使用 Visual Studio 3 年多以来的第一次。

不知道这会如何影响我的用户设置，但显然确实如此。他们从使用“Visual C# 2005”键盘配置文件变为“默认”

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-11-17T12:28:54.300

工具 -> 选项 -> 环境 -> 键盘

搜索此命令：“ClassViewContextMenus.ClassViewProjectBuild”

分配 F6

# nhibernate - where 子句作为参数

> ID：854566
> 
> 赞同：1
> 
> 时间：2009-05-12T19:55:52.153
> 
> 标签：nhibernate

在转换遗留应用程序时，我们需要将命名查询转换为 nhibernate。问题是正在设置 where 子句。

这是映射

```
<resultset name="PersonSet">
<return alias="person" class="Person">
  <return-property column="id" name="Id" />
  <return-property column="ssn" name="Ssn" />
  <return-property column="last_name" name="LastName" />
  <return-property column="first_name" name="FirstName"/>
  <return-property column="middle_name" name="MiddleName" />
</return>
</returnset>

<sql-query name="PersonQuery" resultset-ref="PersonSet" read-only="true" >
  <![CDATA[
  SELECT
  person.ID as {person.Id},
  person.SSN as {person.Ssn},
  person.LAST_NAME as {person.LastName},
  person.MIDDLE_NAME as {person.MiddleName},
  person.FIRST_NAME as {person.FirstName},
  FROM PERSONS as person
  where :value
  ]]>
</sql-query> 
```

和 c# 代码：

```
String query = "person.LAST_NAME = 'Johnson'";
HibernateTemplate.FindByNamedQueryAndNamedParam("PersonQuery", "value", query); 
```

错误：

> 在哪里 ？]; 错误代码 []; 在预期条件的上下文中指定的非布尔类型表达式，靠近“@p0”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-26T13:49:59.350

这不起作用，因为您尝试替换`:value`为`"person.LAST_NAME = 'Johnson'"`希望查询变为

```
SELECT person.ID, person.SSN, person.LAST_NAME, person.MIDDLE_NAME, person.FIRST_NAME
FROM PERSONS as person
where person.LAST_NAME = 'Johnson' 
```

这行不通。您只能动态替换“约翰逊”部分，而不是整个条件。因此，真正产生的是

```
SELECT person.ID, person.SSN, person.LAST_NAME, person.MIDDLE_NAME, person.FIRST_NAME
FROM PERSONS as person
where 'person.LAST_NAME = \'Johnson\'' 
```

这显然不是 WHERE 部分的有效条件，因为只有一个文字但没有列和运算符来比较该字段。

如果您只需要匹配`person.LAST_NAME`将 xml-sql-query 重写为

```
<sql-query name="PersonQuery" resultset-ref="PersonSet" read-only="true" >
  <![CDATA[
  SELECT
  ...
  FROM PERSONS as person
  where person.LAST_NAME = :value
  ]]>
</sql-query> 
```

并且在 C# 代码集中

```
String query = "Johnson"; 
```

如果您需要一次按不同列甚至多列动态过滤，请使用过滤器。例如像这样（我对你的休眠映射文件做了一些假设）

```
<hibernate-mapping>
  ...
  <class name="Person">
    <id name="id" type="int">
      <generator class="increment"/>
    </id>
    ...
    <filter name="ssnFilter" condition="ssn = :ssnValue"/>
    <filter name="lastNameFilter" condition="lastName = :lastNameValue"/>
    <filter name="firstNameFilter" condition="firstName = :firstNameValue"/>
    <filter name="middleNameFilter" condition="middleName = :middleNameValue"/>
  </class>
  ...
  <sql-query name="PersonQuery" resultset-ref="PersonSet" read-only="true" >
  ...
    FROM PERSONS as person
  ]]>
  </sql-query>
  <!-- note the missing WHERE clause in the PersonQuery -->
  ...
  <filter-def name="ssnFilter">
    <filter-param name="ssnValue" type="int"/>
  </filter-def>
  <filter-def name="lastNameFilter">
    <filter-param name="lastNameValue" type="string"/>
  </filter-def>
  <filter-def name="middleNameFilter">
    <filter-param name="midlleNameValue" type="string"/>
  </filter-def>
  <filter-def name="firstNameFilter">
    <filter-param name="firstNameValue" type="string"/>
  </filter-def>
</hibernate-mapping> 
```

现在在你的代码中你应该能够做到

```
String lastName = "Johnson";
String firstName = "Joe";

//give me all persons first
HibernateTemplate.FindByNamedQuery("PersonQuery");

//just give me persons WHERE FIRST_NAME = "Joe" AND LAST_NAME = "Johnson"
Filter filter = HibernateTemplate.enableFilter("firstNameFilter");
filter.setParameter("firstNameValue", firstName);
filter = HibernateTemplate.enableFilter("lastNameFilter");
filter.setParameter("lastNameValue", lastName);
HibernateTemplate.FindByNamedQuery("PersonQuery");

//oh wait. Now I just want all Johnsons
HibernateTemplate.disableFilter("firstNameFilter");
HibernateTemplate.FindByNamedQuery("PersonQuery");

//now again give me all persons
HibernateTemplate.disableFilter("lastNameFilter");
HibernateTemplate.FindByNamedQuery("PersonQuery"); 
```

如果您还需要更多动态查询（例如，甚至更改运算符 (=, !=, like, >, <, ...) 或者您必须在逻辑上组合限制（其中 lastname = "foo" **OR** firstname" = "foobar" ) 那么现在是时候研究

[休眠标准 API](https://www.hibernate.org/hib_docs/v3/api/org/hibernate/criterion/package-summary.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T20:04:54.167

我不熟悉这种 HibernateTemplate 语法，但看起来您正在查询 SQL 中的原始字段名而不是别名。试试这个：

```
String query = "person.LastName = 'Johnson'"; 
```

或许：

```
String query = "[person.LastName] = 'Johnson'"; 
```

或者，可能：

```
String query = "{person.LastName} = 'Johnson'"; 
```

取决于在将最终 SQL 查询发送到服务器之前进行何种预处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-26T11:32:54.463

那是因为 :value 是查询中的绑定变量；您不能简单地将其替换为包含任意字符串（将成为查询的一部分）的字符串，而只能使用实际*值*。在您的情况下，该值为“person.LAST_NAME = 'Johnson'”，它实际上是一个字符串，而不是布尔值。布尔值将是*true*或*false*，这两者对于您尝试归档的内容都相当无用。

绑定变量或多或少地替换文字，而不是复杂的表达式。

# jquery - 如何使用悬停意图显示面板

> ID：854573
> 
> 赞同：1
> 
> 时间：2009-05-12T19:57:45.287
> 
> 标签：jquery, css

嗨，这是非常基本的 jQuery 东西，但我有点迷茫。所以我有一个 310px 的图像，大部分是从页面中隐藏的，例如：

```
.bottom-panel {
    position: fixed;
    width: 874px;
    height: 310px;
    display: block;
    bottom: -300px;
    left: 150px;
    background: url(theimg.png) transparent no-repeat;
} 
```

只有 10px 高的小标签贴在底部。我正在尝试使用 hoverIntent 插件创建交互性，将鼠标悬停在小标签上会导致 CSS 更改为

```
bottom: 0px; 
```

只要鼠标在 .bottom-panel 中的任何位置，就可以在页面上保持“展开”

有人可以给我一个小片段或一些指导来帮助我实现这一目标吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-12T20:17:10.917

首先，您可以确保 jQuery 的标准悬停适合您：

```
$('.bottom-panel').hover(function() {
  $(this).animate({bottom: 0}, 'fast');
}, function() {
  $(this).animate({bottom: -300}, 'fast');
}); 
```

一旦你按照你想要的方式工作，你需要做的就是用'hoverIntent'替换'hover'这个词，你应该很高兴。

# c# - .NET 中的错误？

> ID：854581
> 
> 赞同：2
> 
> 时间：2009-05-12T19:59:11.633
> 
> 标签：c#, .net, debugging

我非常犹豫地提出这个问题，因为我知道，每当您认为您在 .NET 框架之类的东西中发现了错误时，很可能只是您做错了什么。无论如何，我真的无法弄清楚是什么导致了我现在的情况。

我正在用 C# 构建光线追踪器，在特殊情况下，永远不会调用方法的 return 语句。奇怪的是，完全不相关的事情会影响这种行为何时发生。

你可以在这里看到有问题的方法：

```
public Primitive FindNearest(ref float distance, Ray ray, ref RayCollision collisionResult)
{
    if (!_initialized) InitUnit();

    Primitive hitPrimitive = null;

    //Search the planes
    foreach (var plane in RenderEngine.Scene.Planes)
    {
        RayCollision collision = plane.Intersect(ray, ref distance);
        if (collision != RayCollision.Miss)
        {
            hitPrimitive = plane;
            collisionResult = collision;
        }
    }

    if (_spatialStructure == null)
    {
        //Default collision detection
        foreach (Primitive primitive in _primitives)
        {
            //RayCollision collision = primitive.Intersect(ray, ref distance);
            //if (collision != RayCollision.Miss)
            //{
            //    hitPrimitive = primitive;
            //    collisionResult = collision;
            //}
        }
    }
    else
    {
        //hitPrimitive = _spatialStructure.GetClosestIntersectionPrimitive(ray, ref distance, out collisionResult);
        //Console.WriteLine("Was here");

        RayCollision collision;
        Primitive prim = _spatialStructure.GetClosestIntersectionPrimitive(ray, ref distance, out collision);

        if (collision != RayCollision.Miss)
        {
           hitPrimitive = prim;
           collisionResult = collision;
        }
    }

    return hitPrimitive;
} 
```

只有一个线程在调用此方法，并且在每次调用时，都会执行 Console.Writeline 语句，但永远不会到达 return 语句。该方法被调用了数百次，每次调用时，“was here”都会打印到控制台。

如果我注释掉第二个 foreach（包含所有注释的那个），则返回语句正常到达，但无论如何都不会到达被注释掉的代码。其他类型的代码重组也可以使其按预期运行，但同样不是出于任何对我有意义的原因。

这种行为看起来更像是在 C 中可能遇到的一些内存损坏问题，所以我没有任何关于可能导致这种情况的线索——除了 .NET 中的一个错误。

顺便说一句，我使用的 .NET 版本是 3.5 sp1。

**更新 3**

最后发现断点被吃掉了，因为我是Release模式。我猜你每天都会学到一些新东西。

**更新 2**

似乎我太专注于奇怪的行为，以至于我没有在我的代码中看到错误。我已经更改了代码以反映这一点，但我仍然遇到从不触发 return 语句中的断点的问题——这指向了 Visual Studio (2008) 而不是 .net 中的错误。但是我的代码现在可以工作了，我想我必须解决这个问题。

**更新**

这是进入 Console.Writeline 函数的反汇编，这是控制流消失之前的最后一个已知位置（没有可进入的源代码）。我看不懂汇编，所以我不知道它是什么意思，但对外面的人来说可能有意义。

```
0000002a  mov         r11,qword ptr [rbx+20h] 
0000002e  mov         rax,qword ptr [r11] 
00000031  mov         rdx,rdi 
00000034  mov         rcx,r11 
00000037  call        qword ptr [rax+000001A0h] 
0000003d  lea         rdx,[rbp+8] 
00000041  mov         rcx,rbx 
00000044  call        FFFFFFFFFFF0C410 
00000049  jmp         0000000000000050 
0000004b  jmp         0000000000000050 
0000004d  nop         dword ptr [rax] 
00000050  lea         rsp,[rbp+10h] 
00000054  pop         rdi  
00000055  pop         rbp  
00000056  pop         rbx  
00000057  rep ret          
00000059  push        rbx  
0000005a  push        rbp  
0000005b  push        rdi  
0000005c  sub         rsp,30h 
00000060  mov         rbp,qword ptr [rcx+20h] 
00000064  mov         qword ptr [rsp+20h],rbp 
00000069  lea         rbp,[rbp+20h] 
0000006d  lea         rdx,[rbp+8] 
00000071  mov         rcx,qword ptr [rbp+30h] 
00000075  call        FFFFFFFFFF56F3E9 
0000007a  nop              
0000007b  add         rsp,30h 
0000007f  pop         rdi  
00000080  pop         rbp  
00000081  pop         rbx  
00000082  rep ret 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T21:08:34.420

这个故事的寓意是，如果你问“这是 {.NET, C#, Windows} 中的错误吗”，那么答案可能是“否”。数以百万计的人在使用这些东西，所以*你*成为发现错误的人的机会非常小——即使有错误，其他人也会首先找到它。

例外情况是，您是世界上少数可能经历过该错误的人之一。这使您更有可能找到它。这可能是因为您使用的是测试版，或者因为您在软件的某个不起眼的角落工作。

但是很多人会看到“return statement never executed”的错误。由于您不太可能是第一个看到此错误的人，因此您根本不可能遇到错误。

*感谢那个告诉我，事实上，几年前我还没有在 TOPS-10 操作系统中发现错误的人*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T20:03:17.397

你怎么知道子程序没有抛出异常？尝试将其全部包装在 try/catch 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T20:04:23.573

Trace执行后调用方法会发生什么？

如果答案是，正如我所料，“没有”，这几乎肯定是一个线程问题。您的线程每次都被锁定在同一点（不太可能），或者您调用的方法在将方法添加到堆栈和从中检索返回值之间被选择或阻塞。

# c# - 如何为活动目录的用户授予 FTP 文件夹的权限

> ID：854585
> 
> 赞同：1
> 
> 时间：2009-05-12T20:00:16.013
> 
> 标签：c#, .net, asp.net, active-directory, ftp

我有一个在 FTP 站点上创建文件夹的 asp.net Web 应用程序，但我需要将该文件夹的权限授予活动目录的某些用户。

创建文件夹时，如何在我的应用程序中以编程方式执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-15T07:25:21.347

标准 FTP 不允许更改权限或文件所有权，但 FTP 服务器通过自定义 SITE 命令允许此类事情是相当普遍的。至少，这对于 UNIX 托管的 FTP 服务器很常见。

尝试使用标准 FTP 客户端连接到服务器并键入`site help`. 这应该会为您提供可用的自定义 SITE 命令列表。然后，您可以通过键入来获取特定命令的用法`site help <cmd>`。

我不确定您对基于 Windows 的服务器的选择是什么，因为权限模型比标准 UNIX 权限更精细。在 UNIX 服务器上，您通常可以更改组所有权和权限，但除非您是 root，否则不允许更改文件所有者。我不应该说以 root 身份登录 FTP 服务器是一个非常糟糕的主意。

我希望这会有所帮助。

R

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-11-05T08:39:47.990

我假设您正在创建文件夹并希望在 ac# 应用程序中设置权限。

您想查看 DirectorySecurity 类 ( [msdn](http://msdn.microsoft.com/en-us/library/system.security.accesscontrol.directorysecurity.aspx) )

您为新创建的目录创建一个 directorySecurity 类，然后添加 FileSystemAccessRules 以根据 AD 用户和组定义适当的访问权限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-15T16:32:04.060

您没有说明您正在运行哪种 FTP 服务器，或者您希望 AD 用户以何种方式与新文件夹交互。我假设您正在使用 IIS 的 FTP 服务，并且您需要您的 AD 用户能够使用 FTP 来访问新文件夹。

IIS 使用与 Windows 中的其他文件访问方法相同的访问权限（从文件夹属性视图上的安全选项卡访问）。

我创建了一个 WinForm，它将执行以下操作：创建一个新的本地用户帐户（并将它们添加到一个组中），在我们的 FTP 服务器的基本目录下创建一个新目录，创建一个新的虚拟 FTP 文件夹（以便用户可以映射一个连接到文件夹），最后让新用户完全控制新目录（因为该目录是一个虚拟文件夹，新用户可以通过 FTP 完全控制）。

听起来您不需要创建新用户，只需要授予他们更改新目录的权限即可。在我的应用程序中，我调用了一个批处理文件并传递了一些参数。

修改目录（或文件）访问权限的命令是：

```
cacls [The path to your new directory] /E /P [The AD user name]:C 
```

我不记得这些参数是什么意思了。我建议您研究该命令以确保它完全符合您的要求。

要从 VB.Net 执行此操作：

```
Shell(System.Configuration.ConfigurationSettings.AppSettings.Item("CACLS_batPath") & " " & strFolderPath & " " & _strUserName, AppWinStyle.NormalFocus, True, -1) 
```

这将打开一个可见的命令窗口并执行批处理文件，并将参数传递给它。（我突然想到我在 WinForms 中执行此操作，从 ASP.Net 调用它可能不是那么容易，请在此处查看有关从 ASP.Net 执行批处理文件的信息：http: [//codebetter.com/博客/brendan.tompkins/archive/2004/05/13/13484.aspx](http://codebetter.com/blogs/brendan.tompkins/archive/2004/05/13/13484.aspx) )

BAT文件的内容是：

```
echo "update file permissions"
cacls %1 /E /P %2:C
REM PAUSE 
```

祝你好运！

# asp.net - RegisterClientScriptResource + AJAX 更新面板

> ID：854590
> 
> 赞同：0
> 
> 时间：2009-05-12T20:01:12.190
> 
> 标签：asp.net, ajax, custom-controls

我有一个问题真的让我觉得很愚蠢。我有一个继承文本框的自定义控件。这个文本框（至少对于这个例子来说）只是有一个嵌入在 .dll 中的 .js 文件。

长话短说，当不在 AJAX 更新面板中时效果很好。所以我做了一些研究，发现而不是使用：Page.ClientScript.RegisterClientScriptResource，我应该使用 ScriptManger.RegisterClientScriptResource - 我已经在 overrdive 渲染方法中完成了这个，但是 javascript 仍然没有触发。

有谁知道我做错了什么？

示例：我的项目中有一个名为 Scripts 的文件夹 - 它包含 myscript.js 我的程序集名为 Jim.Bob.Controls

我向我的控件添加属性，即： Attributes.Add("onclick", "Test2();");

在覆盖渲染中：

```
ScriptManager.RegisterClientScriptResource(this.Page, typeof(CustomTextBox), "Jim.Bob.Controls.Scripts.myscript.js"); 
```

但是我仍然收到“预期对象”错误。

我需要我的文本框来使用并且没有 AJAX。我将 System.Web.Extensions 导入到我的项目中以访问 ScriptManger

有人可以告诉我我做错了什么吗？再一次，这整个事情在没有 AJAX 的情况下工作得很好，我已经把必要的东西放到了 AssemblyInfo.cs (WebResource:,,,,etc)

提前致谢 ：-）

--- 更新 --- 我恢复了控件，在非 AJAX 网络中尝试它，我遇到了同样的问题。不知道为什么我有问题，我在同一个程序集中有另一个自定义控件，它工作得很好 - 让它们以完全相同的方式设置，唯一的区别是正在工作的那个继承 WebControl，那个不继承 TextBox 。 ..在一个正在工作的地方，我像Go一样发出html并做它在不工作的地方我有Attributes.Add（“onclick”，“CustomFunction（）;”）;

另外，如果我做 Attributes.Add("onclick", "alert('hello');"); 它工作正常。

抱歉发了这么长的帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T20:09:22.117

尝试通过`this`而不是`this.Page`. ScriptManager 将只为正在更新的控件（即 UpdatePanel 的子级）输出脚本。

我刚刚注意到您在渲染期间正在执行此操作。为时已晚。请改用 PreRender。

# c# - 如何检查深层 lambda 表达式中的空值？

> ID：854591
> 
> 赞同：14
> 
> 时间：2009-05-12T20:01:21.490
> 
> 标签：c#, linq, lambda

如何检查深层 lamda 表达式中的空值？

例如，我有一个嵌套了好几层的类结构，我想执行以下 lambda：

```
x => x.Two.Three.Four.Foo 
```

如果二、三或四为空，我希望它返回空，而不是抛出 System.NullReferenceException。

```
public class Tests
{
    // This test will succeed
    [Fact]
    public void ReturnsValueWhenClass2NotNull()
    {
        var one = new One();
        one.Two = new Two();
        one.Two.Three = new Three();
        one.Two.Three.Four = new Four();
        one.Two.Three.Four.Foo = "blah";

        var result = GetValue(one, x => x.Two.Three.Four.Foo);

        Assert.Equal("blah", result);
    }

    // This test will fail
    [Fact]
    public void ReturnsNullWhenClass2IsNull()
    {
        var one = new One();

        var result = GetValue(one, x => x.Two.Three.Four.Foo);

        Assert.Equal(null, result);
    }

    private TResult GetValue<TModel, TResult>(TModel model, Expression<Func<TModel, TResult>> expression)
    {
        var func = expression.Compile();
        var value = func(model);
        return value;
    }

    public class One
    {
        public Two Two { get; set; }
    }

    public class Two
    {
        public Three Three { get; set; }
    }

    public class Three
    {
        public Four Four { get; set; }
    }

    public class Four
    {
        public string Foo { get; set; }
        public string Bar { get; set; }
    }
} 
```

更新：

一种解决方案是像这样捕获 NullReferenceException：

```
 private TResult GetValue<TModel, TResult>(TModel model, Expression<Func<TModel, TResult>> expression)
    {
        TResult value;
        try
        {
            var func = expression.Compile();
            value = func(model);
        }
        catch (NullReferenceException)
        {
            value = default(TResult);
        }
        return value;
    } 
```

但我讨厌承担捕获异常的费用，在我看来，异常并不例外。我希望在我的领域中经常出现这种情况。

更新 2：

另一种解决方案是像这样修改属性获取器：

```
 public class One
    {
        private Two two;
        public Two Two
        {
            get
            {
                return two ?? new Two();
            }
            set
            {
                two = value;
            }
        }
    } 
```

这对我的域来说基本上没问题，但有时我真的希望一个属性返回 null。我检查了 Josh E 的答案是否有帮助，因为它在某些情况下非常接近我所需要的。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-05-12T20:07:56.580

您可以使用通用的辅助扩展方法来做到这一点，例如：

```
public static class Get {
    public static T IfNotNull<T, U>(this U item, Func<U, T> lambda) where U: class {
        if (item == null) {
            return default(T);
        }
        return lambda(item);
    }
}

var one = new One();
string fooIfNotNull = one.IfNotNull(x => x.Two).IfNotNull(x => x.Three).IfNotNull(x => x.Four).IfNotNull(x => x.Foo); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-05-12T20:17:59.823

你不能以简洁的方式做到这一点。您可以将 lambda 设置为多行，也可以使用嵌套的三元运算符：

```
var result = GetValue(one, x => x.Two == null ? null :
                                x.Two.Three == null ? null :
                                x.Two.Three.Four == null ? null :
                                x.Two.Three.Four.Foo; 
```

丑陋，我知道。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-05-12T21:57:32.640

简洁地做到这一点需要一个尚未实现的运算符。我们考虑添加一个运算符“.?” 到 C# 4.0 这将具有您想要的语义，但不幸的是它不符合我们的预算。我们将考虑将其用于该语言的假设未来版本。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2010-05-19T14:52:22.447

您现在可以在 codeplex 上使用[Maybe项目。](http://maybe.codeplex.com/)

语法是：

```
string result = One.Maybe(o => o.Two.Three.Four.Foo);

string cityName = Employee.Maybe(e => e.Person.Address.CityName); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-10T11:39:08.043

我编写了一个扩展方法，使您能够做到这一点：

```
blah.GetValueOrDefault(x => x.Two.Three.Four.Foo); 
```

它使用表达式树在返回表达式值之前在每个节点处构建一个嵌套条件检查空值；创建的表达式树被编译为 a`Func`并被缓存，因此同一调用的后续使用应该几乎以本机速度运行。

如果您愿意，您还可以传入默认值以返回：

```
blah.GetValueOrDefault(x => x.Two.Three.Four.Foo, Foo.Empty); 
```

我在[这里](http://geekswithblogs.net/mrsteve/archive/2013/01/10/getvalueordefault-expression-object-graph-arbitrary-length-depth-expression-tree.aspx)写了一篇关于它的博客。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-12T21:07:04.843

我不熟悉 c#，但也许有一些方法可以从 ruby​​ 中实现“andand”模式，它可以在不污染实现的情况下完全解决这个问题。

这个概念在 Haskell 中也被称为 Maybe Monad。

[这篇](http://incrediblejourneysintotheknown.blogspot.com/2008/12/maybe-monad-in-c.html)文章的标题似乎很有希望。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-12T20:17:28.263

始终在使用它们之前初始化您的属性。将构造函数添加到类一、二、三和四。在构造函数中初始化您的属性，使其不为空。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-12T20:44:24.773

您可以修改您的吸气剂以读取如下内容：

```
private Two _two;
public Two Two
{
     get 
     {
       if (null == _two)
         return new Two();
       else
         return _two;
      }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-12T21:22:09.220

我发现合并运算符有时对此很有用。这仅在您可以放入对象的默认/空等效版本时才有帮助。

例如，有时当我破解开放 XML 时......

```
IEnumeratable<XElement> sample;
sample.Where(S => (S.Attribute["name"] ?? new XAttribute("name","")).Value.StartsWith("Hello"))... 
```

根据检索默认对象的方式，这可能很冗长，上面的示例不是很好用，但您明白了。对于读取 XML 属性的特殊情况，我有一个扩展方法，它返回属性值或空字符串。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-16T14:40:21.063

我将一个函数转换为使用大量 if 语句以避免空值的 .IFNotNull 方法，用于从 4 和 5 级深的 XSD 转换的类。

下面是几行转换后的代码：

```
ProdYear.PRIOR_CUMULATIVE_CARBON_DIOXIDE_VALUE = year.IfNotNull(x => x.PRIOR_CUMULATIVE).IfNotNull(y => y.CARBON_DIOXIDE).IfNotNull(z => z.VALUE).ToDouble();  
ProdYear.PRIOR_CUMULATIVE_CARBON_DIOXIDE_UOM = year.IfNotNull(x => x.PRIOR_CUMULATIVE).IfNotNull(y => y.CARBON_DIOXIDE).IfNotNull(z => z.UOM); 
```

以下是一些有趣的统计数据：

1) 这种新方法用 If 语句运行该变体的时间要长 3.7409 倍。
2) 我将函数行数从 157 减少到 59。
3) DevExpress 的[CodeRush](http://devexpress.com/Products/Visual_Studio_Add-in/Coding_Assistance/)有一个“维护复杂性”分数。当我转换为 Lambda 语句时，它从 984 增加到 2076，这在理论上更难维护。

# javascript - 这个js怎么知道$get是function(id) { return document.getElementById(id); }

> ID：854595
> 
> 赞同：0
> 
> 时间：2009-05-12T20:02:29.007
> 
> 标签：javascript

所以我一直在看一篇[博客文章](http://couldbedone.blogspot.com/2007/08/restoring-lost-focus-in-update-panel.html)，里面有一些 javascript，我正在看一些我不太关注的东西：

```
function pageLoadedHandler(sender, args) {  
    if (typeof(lastFocusedControlId) !== "undefined" 
         && lastFocusedControlId != "")   
    {  
        var newFocused = $get(lastFocusedControlId);  
        if (newFocused) {    
            focusControl(newFocused);
        }
    } 
```

在上面的方法中它调用**$get**我假设它是一个别名

```
 function(id) { 
     return document.getElementById(id); 
 } 
```

提供的 js 文件中没有声明 $get 的地方。

这是一个保留的别名吗？有人可以提供提供它的链接吗？如果不是，它怎么知道 $get 是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-12T20:07:01.480

我相信您正在查看 ASP.NET 的 AJAX 快捷方式。

[http://mattberseth.com/blog/2007/08/the_everuseful_get_and_find_as.html](http://mattberseth.com/blog/2007/08/the_everuseful_get_and_find_as.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T20:09:25.577

您提到的示例基于 ASP .NET，[$find](http://www.asp.net/AJAX/Documentation/Live/ClientReference/Global/FindShortCutMethod.aspx)和[$get](http://www.asp.net/AJAX/Documentation/Live/ClientReference/Global/GetShortCutMethod.aspx)是MS Ajax 框架提供的两个[“快捷方式”功能](http://mattberseth.com/blog/2007/08/the_everuseful_get_and_find_as.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T20:10:30.443

是的，我找到了他们：引用 Msdn

**Sys.UI.DomElement $get 方法**

> 提供 Sys.UI.DomElement 类的 getElementById 方法的快捷方式。该成员是静态的，可以在不创建类实例的情况下调用。

[http://www.asp.net/AJAX/Documentation/Live/ClientReference/Global/GetShortCutMethod.aspx](http://www.asp.net/AJAX/Documentation/Live/ClientReference/Global/GetShortCutMethod.aspx)

[http://msdn.microsoft.com/en-us/library/bb397717.aspx](http://msdn.microsoft.com/en-us/library/bb397717.aspx)

很难搜索 $get

# sql - 如何编写排除某些结果但包含缺少用于排除的关联的结果的查询？

> ID：854596
> 
> 赞同：1
> 
> 时间：2009-05-12T20:02:36.290
> 
> 标签：sql, mysql

我有一个用于查询服务条款的搜索表，我将其称为“条款”。规定在拥有和属于多关系中可能有一定的资格要求，但也可能根本没有要求。我的问题是，当我根据特定要求排除某些条款时，那些根本没有要求的条款也被排除在外。

表结构：

```
provisions
* id
* title

requirements
* id
* title

provisions_requirements
* provision_id
* requirement_id 
```

假设一个需求是这样的：

```
Canadian Citizenship (id 4) 
```

这将显示在以下表格中：“排除具有以下要求的服务：加拿大公民身份”。

因此，查询的排除部分将是：

```
requirements.id NOT IN (4) 
```

但是，我只得到至少有一个要求的条款，因为那些没有要求的条款不包括在联接中。

实际查询如下：

```
SELECT DISTINCT `provisions`.id 
FROM `provisions` 
LEFT OUTER JOIN `provisions_requirements` 
  ON `provisions_requirements`.provision_id = `provisions`.id 
LEFT OUTER JOIN `requirements` 
  ON `requirements`.id = `provisions_requirements`.requirement_id 
WHERE (requirements.id NOT IN ('1')) 
LIMIT 0, 10 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-12T20:13:47.257

所以你想要所有的服务，*除了*那些有加拿大公民要求的服务（req_id 4）？

试试这个：它*试图*与 4匹配`requirement_id`，但`WHERE`子句中的条件使它只有找到没有这样匹配的条款才满足条件。

```
SELECT p.id
FROM provisions p LEFT OUTER JOIN provisions_requirements r
 ON (p.id = r.provision_id AND r.requirement_id IN (4))
WHERE r.requirement_id IS NULL
LIMIT 0, 10; 
```

没有`DISTINCT`是必要的。无需加入`requirements`表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T20:14:40.360

```
SELECT
     P.id
FROM
     Provisions P
WHERE
     NOT EXISTS
     (
          SELECT
               *
          FROM
               Provision_Requirements PR
          WHERE
               PR.provision_id = P.id AND
               PR.requirement_id = 4
     ) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-05-12T20:11:41.347

试试这个：

```
SELECT DISTINCT `provisions`.id 
FROM `provisions` 
LEFT OUTER JOIN `provisions_requirements` ON `provisions_requirements`.provision_id = `provisions`.id 
LEFT OUTER JOIN `requirements` ON `requirements`.id = `provisions_requirements`.requirement_id and (requirements.id NOT IN ('1'))
LIMIT 0, 10 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-05-12T22:31:34.147

您的查询在 99% 中，还包括对 NULL 的测试

```
SELECT DISTINCT `provisions`.id 
FROM `provisions` 
LEFT OUTER JOIN `provisions_requirements` 
  ON `provisions_requirements`.provision_id = `provisions`.id 
LEFT OUTER JOIN `requirements` 
  ON `requirements`.id = `provisions_requirements`.requirement_id 
WHERE (requirements.id NOT IN ('1')) 
or requirements.id is NULL -- test for null
LIMIT 0, 10 
```

这将包括那些在 provision_requirements 表中没有条目的行

# c# - 使用 SSL 的 CheckoutFile 方法上的 Sharepoint List webservice 错误

> ID：854598
> 
> 赞同：1
> 
> 时间：2009-05-12T20:03:04.667
> 
> 标签：c#, web-services, sharepoint

我正在尝试从 SharePoint 文档库中签出文件，然后再下载到我的客户端应用程序进行编辑。

```
//documentPath = https://192.168.1.10/Utility/Phys/Document%20Library/document.xml
//listWebServiceURL = https://192.168.1.10/Utility/Phys/Document%20Library/_vti_bin/lists.asmx
private void CheckOutFile(string documentPath)
{
    string listWebServiceUrl = this.GetListServiceURL(documentPath);
    bool checkedOut;

    using (Lists listWebService = new Lists())
    {
        listWebService.Credentials = CredentialCache.DefaultCredentials;
        listWebService.Url = listWebServiceUrl;
        checkedOut = listWebService.CheckOutFile(documentPath, "true", string.Empty);
    }
} 
```

当checkOut = listWebService.CheckOutFile(documentPath, "true", string.Empty); 行运行我得到一个 SOAPServerException。

((System.Xml.XmlElement)((System.Web.Services.Protocols.SoapException)(ex)).Detail).InnerText 对象引用未设置为对象的实例。

对此的任何帮助将不胜感激。

谢谢你，
基思

编辑：我已经针对不使用 SSL 的 SharePoint 库测试了上述代码，它似乎工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-15T14:33:16.903

也许这是一个替代的访问映射问题（“对象未设置”错误是一个迹象）？你有一个[https://192.168.1.10/](https://192.168.1.10/)在管理中心->操作->全局配置->备用访问映射，是吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T21:03:40.700

我相信您必须在 listWebService.CheckOutFile 的最后一个参数中提供时间值。它可能在抱怨 string.Empty。尝试输入一个字符串，例如；“格林威治标准时间 2009 年 5 月 12 日 22:00:00”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-03-23T16:53:31.010

我刚刚遇到了这个对象引用错误，并通过将域添加到 URL 来使其工作。 [http://servername](http://servername) - 出现错误，但 [http://servername.domain.com](http://servername.domain.com) -*结帐有效*

有意义的是，通过完全限定，它显然位于 Intranet 区域中以进行备用访问映射。

# ruby - 带有 Ruby 连接的 SimpleDB 库

> ID：854602
> 
> 赞同：0
> 
> 时间：2009-05-12T20:03:27.867
> 
> 标签：ruby, amazon-web-services, amazon-simpledb

亚马逊的 SimpleDB 是否有可以从 Ruby 类生成连接的 Ruby 库？例如，如果您为 Game 和 Ball 定义 Ruby 类，并且每个 Game 都有一个 Ball，则应该生成代码，在给定 Game 实例的情况下查询适当的 Ball，这与 ActiveRecord 的工作方式非常相似。

[RightAWS](http://rightaws.rubyforge.org/)是我能找到的最流行的 Ruby AWS 库，但它不能处理这个问题。如果没有库可以做，那么每个人都只是手动执行此操作，还是有一种优雅的方式来生成正确的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-13T21:14:04.137

他们一直在尝试创建我知道的类似这样的东西，但可能最好的支持解决方案是将[datamapper](http://datamapper.org/)与可用的 sdb 适配器之一一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-08-31T08:27:20.470

您可能想查看[SimpleRecord](http://github.com/appoxy/simple_record/)和它的 belongs_to 关系映射。

# cocoa - 用于显示目录列表的 Cocoa Control/View

> ID：854620
> 
> 赞同：0
> 
> 时间：2009-05-12T20:09:07.560
> 
> 标签：cocoa, macos, user-interface

我是 Cocoa 开发的新手——我想在控件/视图中显示任意数量的目录路径。什么是最好的内置控件/视图类型？

要求：

*   这应该只是一个平面列表，而不是完整的文件系统浏览器。*   用户应该能够选择一个（或多个）项目并将其删除（我将提供一个删除按钮）*   用户应该能够将项目添加到此列表（我将提供一个启动 OpenPanel 的按钮，允许他们选择路径）

有什么建议么？

另外，我在哪里可以找到其中一个“|+|-|” 键入按钮控件以添加/删除许多 Mac UI 中常见的项目？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T20:18:39.323

如果您只是想将目录路径显示为列表，也许您正在寻找[NSTableView类。](http://developer.apple.com/documentation/Cocoa/Reference/ApplicationKit/Classes/NSTableView_Class/Reference/Reference.html)[NSOutlineView](http://developer.apple.com/documentation/Cocoa/Reference/ApplicationKit/Classes/NSOutlineView_Class/Reference/Reference.html)类是 NSTableView 的子类，它允许您在分层列表中对项目进行分组。两个类都可以选择多行，因此可以删除多个项目。

在回答您的第二个问题时，常见的 +/- square 控件是在 Interface Builder 中实现`NSButton`的，其`Gradient`样式为 square (equal width and height set) 。+ 和 - 图标只是`Image`在检查器中使用属性设置的图像 -`NSAddTemplate`用于 + 按钮和`NSRemoveTemplate`- 按钮。

# sql - 限制 SQL 查询的结果

> ID：854626
> 
> 赞同：0
> 
> 时间：2009-05-12T20:10:21.553
> 
> 标签：sql

我试图限制从查询返回的结果。如果用户可以访问的实体多于为当前用户列出的实体，则该用户不应出现在列表中。使用下面的数据，并假设用户 1 正在运行查询，因为具有 UserId 2 的用户具有用户 1 没有的匹配项，即使它们具有重叠的值，用户 2 也应该从查询结果中排除。

```
Table1
UserId   EntityId
1        100
1        101
1        102
2        100
2        101
2        102
2        200
2        201 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-12T20:15:58.330

看起来您正试图限制 SQL 中的用户，而不是与数据库交互的应用程序（例如 webapp）。如果是这种情况，您需要使用内置数据库权限限制对表的访问。

您可以创建一个基于用户过滤结果的视图，拒绝用户编辑视图的能力，并拒绝用户访问表。获得结果的唯一方法是使用视图，该视图将过滤它们的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T20:16:21.497

用户 1 是否有可能同时拥有用户 2 缺少的匹配项和用户 2 匹配用户 1 缺少的匹配项？如果没有，您可以只`count`检查用户拥有多少特权，如果它高于当前用户，则不要返回它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T20:23:48.003

您可以使用一系列嵌套查询来做到这一点：

```
select A.* from Table1 A where A.UserId NOT IN
   (select B.UserId from Table1 B where B.EntityId NOT IN 
       (select C.EntityId from Table1 C where C.UserId=1)); 
```

*底部最里面的查询为我们提供了属于 UserId 1 的 EntityId。我们在下一个查询中使用该列表来查找所有具有不在*此列表中的 EntityId 的 UserId 。有了我们不想要的 UserIds 列表，最外层的查询转储剩余 UserIds 的所有行。这些将具有 UserId 1 的 EntityIds 集的子集

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-12T20:24:50.357

试试这个：

```
select A.UserId, A.EntityId
from Table1 A
where not UserId in (
    select B.UserId
    from Table1 B
    left outer join Table1 C
      on C.UserId=@UserId
      and C.EntityId=B.EntityId
    where B.UserId is null
) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-12T20:45:49.950

我不确定您使用的是哪个数据库，但在 MS SQL Server 中，您可以确定登录的用户并限制您的结果。有一个名为 suser_sname() 的系统函数将返回当前正在运行查询的用户。例如，如果我运行“select suser_sname()”，它将返回“jj”（假设我的用户名是 jj）。

您作为示例提供的表似乎使用只是一个 int 的 UserID，因此您必须创建一个将登录用户与用户 ID 链接的表。然后只需创建一个视图，该视图使用连接来限制登录用户的视图结果。

这是一个示例：（我没有测试此代码，因此可能存在一些语法问题）

```
UserIDSName Table:
SUser   UserID
jj      1
bob     2 
```

然后创建一个视图：

```
create view Table1View
as

select userid, entityId 

from Table1 t1

inner join UserIDSName uid on
    t1.userid = uid.userid
    and uid.SUser = suser_sname() 
```

同样，我不太确定您是否使用 SQL Server，但我想您可以在其他数据库中找到类似的功能。还应该注意的是，您可以使用 where 子句在客户端轻松实现此目的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-12T20:54:47.673

在 Oracle 中，您可以使用虚拟专用数据库来完成此操作。它也称为细粒度访问控制。

您还可以定义一个过滤掉其他用户行的视图，并且您可能应该禁止直接访问该表。这样，对客户端的访问将是透明的，同时确保没有用户可以看到其他用户的行。

# c# - 如何设计一个需要在所有客户端计算机上同步通知的应用程序

> ID：854629
> 
> 赞同：0
> 
> 时间：2009-05-12T20:10:36.870
> 
> 标签：c#, .net

我们有一个需要扩展的 asp.net 应用程序，以便在发生更新时通知用户。即使没有打开 asp.net 应用程序，也需要通知所有用户。所有人的所有通知都必须同时发生，因此电子邮件不是一种选择。该应用程序将在企业网络上运行，该网络具有运行 Windows XP 的标准化客户端计算机。大约 45 个用户/客户端计算机需要接收这些更新。

我最初的想法是创建一个在每台客户端计算机上运行的 Windows 服务，并在工作时间轮询 Web 服务（比如每分钟）。发生更新时，它将设置通知时间（例如更新后 5 分钟）。当客户端计算机轮询 Web 服务时，它们将接收更新并使用通知时间在客户端计算机上安排通知。客户端计算机将根据服务器上的时间而不是本地计算机上的时间安排通知。如果这工作正常，所有客户端计算机将在完全相同的时间通知用户。

这个解决方案有意义吗？你会怎么做？

**编辑**：如果客户端关闭或断开连接，他们将不会收到更新，并且他们将来不需要接收更新。这些更新仅在短时间内相关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T20:15:05.413

我会说使用“推送”方法，其中每个客户端都向主机注册（来自服务），并且当主机获得更新时，它会通知所有注册的客户端（服务）。但在我看来，您还需要考虑一些问题；如果一个（或多个）客户端在更新时只是关闭了怎么办？他们收到迟到的通知，还是根本没有？如果一组用户的网络出现故障怎么办？这是否会使所有用户的更新无效？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T20:16:01.543

我不会进行轮询，因为您的所有计算机都会这样做并且轮询不是“同步的”。至少，没有推送那么多。使用推送方法（如 juggernaut - [http://juggernaut.rubyforge.org/](http://juggernaut.rubyforge.org/)或 Flash 中的推送）。我也很确定 Windows 内置了某种推送客户端，但我不是桌面应用程序开发人员......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T20:15:46.083

不是很熟悉 ASP - 但这听起来不像您需要特定语言的答案。只需将您的更新发布到网络服务器，然后您的客户就可以在闲暇时轮询该服务器。给他们最后 X 次更新，他们可以决定是否需要更新他们的 UI。无论如何，这样的设计会更好，因为如果您的应用程序脱离了 ASP（或者您设计了需要此信息的其他客户端），它就会采用标准 (HTTP) 通信格式（RESTful 设计）。

还有 Windows 命令：

```
net send <message> 
```

网络管理员可以使用它来将消息推送到该网络上的计算机

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T20:54:20.200

您是否考虑过全双工 WCF？它可以做你需要的。

# c# - 在以下情况下mvc如何工作-C#

> ID：854644
> 
> 赞同：0
> 
> 时间：2009-05-12T20:14:33.277
> 
> 标签：c#, model-view-controller, design-patterns

K 所以去年我在java中做了一个家谱程序作为一个小组项目，我们使用了MVC，但我真的忘记了它是如何工作的，并且笔记不再在线了。
更糟糕的是，由于我们的项目并不大，教授说要结合模型和控制器。
所以现在我正在尝试做一个甜蜜的项目来添加到我的就业能力组合中，我不知道 MVC 是如何真正起作用的。

在以下情况下，我的模型、视图和控制器之间的关系应该是什么样的，我可能会从中找出其余的

1.  模型有一个称为位置的状态，视图需要知道它何时发生变化，以便更新它的显示
2.  View 有一个按钮，模型需要知道它何时被点击

解决了这些问题后，我很可能可以自己完成其余的工作。

或者，如果有人知道任何有信息的好网站，我也不反对重新学习。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T20:21:48.570

这是一个可能有帮助的 CodeProject：http: [//www.codeproject.com/KB/cs/model_view_controller.aspx](http://www.codeproject.com/KB/cs/model_view_controller.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-13T12:37:10.503

> 1.  模型有一个称为位置的状态，视图需要知道它何时发生变化，以便更新它的显示

为视图创建一个名为 IMyScreen 的接口或类似的东西 将方法 UpdateLocation 添加到接口或类似的东西 创建一个对 IMyScreen 类型的状态和视图可见的变量或属性函数。将其称为 MyScreen 让 View 实现 IMyScreen 并将当 Location 状态更改时更新 View 所需的代码放在 UpdateLocation 方法中。在 View 的初始化例程中，将 View 注册为当前的 MyScreen。修改与 Location 一起使用的代码，以便在 MyScreen.UpdateLocation 发生更改时触发它。

理想情况下，视图会创建一个命令对象运行它的执行方法。执行方法将拉入它需要的任何参数，修改位置，然后调用 MyScreen.UpdateLocation。但是您应该专注于一次更改一件事并将其保存以备后用。

> 2.  View 有一个按钮，模型需要知道它何时被点击

这有点模糊。通常，像这样的按钮要么执行操作，要么指示状态（复选框、选项等）

如果它执行一个动作，那么理想的方法是创建一个 ICommand 接口。它有一种方法执行。使用初始化例程传入任何需要的参数。将修改模型所需的代码放在 execute 方法中。单击按钮时，它会执行类似的操作

```
Sub MyButton_Click
   ModifyCommand ThisCommand = New ModifyCommand(Parm1, Parm2, Parm3)
   ModifyCommand.Execute
End Sub 
```

如果您需要查询按钮​​的状态，则使用 IMyScreen 接口并添加一个名为 ButtonClicked 的属性。当单击按钮时，在视图中设置一个标记，表明它已被单击。当模型需要知道按钮是否已被单击时，它称为 MyScreen.ButtonClicked。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T20:45:17.593

这是 ASP.NET-MVC 中的一个很好的示例：http: [//www.codeplex.com/mvcsamples](http://www.codeplex.com/mvcsamples)。模型只是数据，视图是显示数据的 UI 代码，控制器决定显示什么视图。

# c - 如何在没有 MSVCR90D.dll 的情况下创建 Win32 DLL？

> ID：854653
> 
> 赞同：2
> 
> 时间：2009-05-12T20:15:55.943
> 
> 标签：c, winapi, compiler-construction

我正在尝试使用一个简单的函数重新创建现有的 C Win32 DLL。我已经设法使用 VS C++ 2008 Express 做到了这一点，并且我的新 DLL 可以在我的 Vista 开发机器和客户端的 XP 机器上运行。但是，它不适用于其他网站。我检查了依赖项，我的 DLL 需要 MSVCR90D.dll 和 KERNEL32.dll，而原始 DLL 只需要 KERNEL32.dll。

什么是 MSVCR90D.dll，如何创建一个没有这种依赖关系的简单 Win32 DLL？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-12T20:17:13.647

MSVCR90D.dll 末尾的 D 表明您在调试模式下编译了 .exe。您应该只在发布模式下分发您的应用程序。

[您可以通过让他们安装 Microsoft Visual C++ 2008 Redistributable Package x86](http://www.microsoft.com/downloads/details.aspx?FamilyID=9b2da534-3e03-4391-8a4d-074b9f2bc1bf&displaylang=en)或[x64](http://www.microsoft.com/downloads/details.aspx?familyid=bd2a6171-e2d6-4230-b809-9a8d7548c1b6&displaylang=en)来确保他们拥有所需的一切。否则，您可以通过在计算机上找到它们来简单地复制他们需要的文件（首先检查 %systemroot%\system32）

请参阅[此 MSDN 链接](http://msdn.microsoft.com/en-us/library/ms235299.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-12T22:35:01.690

名称中的“D”表示调试。这是 Visual Studio 的调试版本的明确指示。使用发布版本，一切都会好起来的。

如果目标系统还没有 C 运行时，一般应该使用官方安装程序来安装。您可能想了解的一些运行时版本如下：

*   VS2005 [x86](http://www.microsoft.com/downloads/info.aspx?na=47&p=1&SrcDisplayLang=en&SrcCategoryId=&SrcFamilyId=9b2da534-3e03-4391-8a4d-074b9f2bc1bf&u=details.aspx%3ffamilyid%3d32BC1BEE-A3F9-4C13-9C99-220B62A191EE%26displaylang%3den)
*   VS2005 SP1 [x86](http://www.microsoft.com/downloads/info.aspx?na=47&p=3&SrcDisplayLang=en&SrcCategoryId=&SrcFamilyId=9b2da534-3e03-4391-8a4d-074b9f2bc1bf&u=details.aspx%3ffamilyid%3d200B2FD9-AE1A-4A14-984D-389C36F85647%26displaylang%3den)
*   VS2008 [x86](http://www.microsoft.com/downloads/details.aspx?familyid=9b2da534-3e03-4391-8a4d-074b9f2bc1bf&displaylang=en) [x64](http://www.microsoft.com/downloads/info.aspx?na=47&p=5&SrcDisplayLang=en&SrcCategoryId=&SrcFamilyId=9b2da534-3e03-4391-8a4d-074b9f2bc1bf&u=details.aspx%3ffamilyid%3dBD2A6171-E2D6-4230-B809-9A8D7548C1B6%26displaylang%3den)
*   VS2008 SP1 [x86](http://www.microsoft.com/downloads/info.aspx?na=47&p=2&SrcDisplayLang=en&SrcCategoryId=&SrcFamilyId=9b2da534-3e03-4391-8a4d-074b9f2bc1bf&u=details.aspx%3ffamilyid%3dA5C84275-3B97-4AB7-A40D-3802B2AF5FC2%26displaylang%3den)

您还可以开发一个完整的安装包，其中包括应用程序所需的可再发行 DLL（但*绝不*是调试 DLL），并使用称为合并模块的技术将并行 (SxS) 程序集正确安装到系统程序集缓存中. 如果您已完整安装 Visual Studio（不是免费的 VS Express 版本），则此方法更容易，但生成的安装包仍然可能无法很好地处理旧平台（例如 Win 2K 或 9x）上运行时的安装。

MSDN 文章[Redistributing Visual C++ Files](http://msdn.microsoft.com/en-us/library/ms235299.aspx)描述了规则是什么，以及如何尽可能轻松地遵守它们。它提供了一个起点，让您了解更多与部署相关的许多问题。

如果您要替换其功能的原始 DLL 没有对 MSVCR90.DLL 的引用，则它必须已静态链接到运行时。您可能应该检查将调用您的 DLL 的预期应用程序的假设。在单个进程中混合 C 运行时库并不总是那么容易。如果宿主应用程序已经在使用 MSVCR90.DLL，那么您也应该这样做。但是，这是一个比手头特定问题的答案更大的问题，因此我鼓励您对其进行研究并根据需要提出新问题。

避免安装以后的运行时 DLL 的另一种方法是链接到 MSVCRT.DLL，它作为系统组件与现代版本的 windows 一起分发。这是 Visual C 6.0 附带的运行时，针对关键问题进行了轻微更新，并保持最新以匹配操作系统。它根本不适用于 64 位构建，而且很难欺骗 Visual Studio 使用它来代替较新的运行时。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-12T20:43:54.290

与 C 运行时库的静态版本链接。该设置位于项目属性中的“代码生成”下。这样您就完全不用担心 MSVCR* DLL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T20:20:29.930

检查您客户的机器是否在他的系统上安装了 2008 运行时。如果没有，您可以将其安装在他/她的系统上，或者使用您的应用程序静态编译运行时。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-10-04T05:10:05.720

您可能想要做的是构建 DLL 的 Release 版本，对其进行测试，然后分发它，而不是现在分发的 Debug 版本。

但是，可以制作依赖于 MSVCR90.DLL（该 DLL 的非调试版本）的调试 DLL。为此（VS 2008 SP1，其他 VS 的说明类似）：

1.  转到项目属性（右键单击解决方案资源管理器窗格中的项目，从菜单中选择属性）。
2.  进入配置属性\C/C++\代码生成。
3.  在运行时库下，您可能选择了“多线程调试 DLL”。将其更改为“多线程 DLL”。

您必须重新编译所有内容，但您现在应该链接非调试 VS DLL。

# eclipse-plugin - Eclipse 插件：从 WorkBench 打开一个新窗口

> ID：854658
> 
> 赞同：1
> 
> 时间：2009-05-12T20:16:13.133
> 
> 标签：eclipse-plugin, swt, eclipse-rcp

我是开发 Eclipse 插件的新手，我已经做了很多工作。这就是我卡住的地方。我有一个带有按钮的视图。当用户点击按钮时，我希望打开一个新窗口（该窗口是一个带有文本区域、按钮和其他 SWT 小部件的表单）。我已经完成了窗口的创建。

编译应用程序后，我得到了一个新的 eclipse 工作台实例（如预期的那样），但是当我打开视图并单击按钮时，窗口不显示。这是窗口代码片段：

```
public class NewWindow {
    private Display display;
    private Shell shell;

    public NewWindow(){

        this.display = new Display();
    shell = new Shell(displaySWT.TITLE | SWT.MIN | SWT.CLOSE);
    shell.setText("fffffffffffff");

              // additional code here
               ...
               ...

    shell.open();
    this.shellSleep();  // this methode is implemented in my code
} 
```

这是调用此类的代码片段：

……

```
this.btnCreateNewQuery.addSelectionListener(new SelectionListener(){
            public void widgetDefaultSelected(SelectionEvent e){

            }
            public void widgetSelected(SelectionEvent e){                                   NewWindow b = new NewWindow();

        }
    }); 
```

……

我不明白为什么窗口不显示。我试图修复它，但还没有找到任何东西。我在这个网站上读过一些东西，但我不明白它们的意思。这是链接： [如何让工作台窗口在基于 Eclipse 的项目中打开模式对话框？](https://stackoverflow.com/questions/443245/how-do-i-get-the-workbench-window-to-open-a-modal-dialog-in-an-eclipse-based-proj)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-13T19:28:48.133

Eddy，这很容易解决。只是不要创建一个新的显示。重用工作台中的那个：

```
public NewWindow() {
        this.display = PlatformUI.getWorkbench().getDisplay();
        shell = new Shell(display, SWT.TITLE | SWT.MIN | SWT.CLOSE);
        shell.setText("fffffffffffff");

              // additional code here
               ...
               ...

        shell.open();
        this.shellSleep();  // this methode is implemented in my code
} 
```

或者，您可以关闭显示变量并将 null 传递给 Shell 构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T20:30:28.460

我不认为你想创建一个新的 Shell。而是将父 Shell 传递给您的新类。我发现为新窗口扩展一个 Dialog 类（或 Dialog 本身）更容易。然后在您的构造函数中，您可以调用 super(Shell parent) 为您初始化所有环境/GUI 内容，然后您可以按照您想要的方式布局对话框区域。然后要打开新窗口，请执行 dialog.open()。

# c# - 如何写入控制台输入并获取控制台句柄？

> ID：854666
> 
> 赞同：1
> 
> 时间：2009-05-12T20:17:28.933
> 
> 标签：c#, console

我希望用户能够在输入流中拥有一些他们可以更改的数据。我查看了以下函数，但我不确定如何从 Console 类中获取 Console 句柄。

```
 [DllImport("kernel32", CharSet = CharSet.Auto, SetLastError = true)]
    public static extern bool WriteConsoleInput(
        IntPtr hConsoleInput,
        [Out] INPUT_RECORD[] lpBuffer,
        int nLength,
        out int lpNumberOfEventsWritten);

    public static void WriteConsoleInput()
    {
        UInt32 STD_INPUT_HANDLE = 0xfffffff6;
        IntPtr hConsoleInput = GetStdHandle(STD_INPUT_HANDLE);

        INPUT_RECORD[] lpBuffer = new INPUT_RECORD[2];

        // I tried using uChar (short) as well. 
        lpBuffer[0].Event.KeyEvent.wVirtualKeyCode = 0x41; // A
        lpBuffer[1].Event.KeyEvent.wVirtualKeyCode = 0x5A; // Z

        int nLength = lpBuffer.Length;
        int lpNumberOfEventsWritten;
        if (!WriteConsoleInput(
            hConsoleInput,
            lpBuffer,
            nLength,
            out lpNumberOfEventsWritten))
        {
            // Don't get here.
            Console.WriteLine("Error: {0}", GetLastError());
        }
    } // A breakpoint here shows that lpNumberOfEventsWritten is 2

    ...
    ...
    ...

    Console.Write("Input something: ");
    WriteConsoleInput();
    String input = Console.ReadLine();
    Console.WriteLine("input = {0}", input); 
```

我在“输入内容：”后面的屏幕上看不到任何内容。如果我只是按回车，输入是一个空字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T23:07:43.900

这行得通吗？

```
public class ConsoleHandles
{
  private const uint STD_INPUT_HANDLE = 0xfffffff6;
  private const uint STD_OUTPUT_HANDLE = 0xfffffff5;
  private const uint STD_ERROR_HANDLE = 0xfffffff4;

  [DllImport("kernel32.dll")]
  private static extern int GetStdHandle(uint nStdHandle);

  public Int32 Stdin { get { return GetStdHandle(STD_INPUT_HANDLE ); } }
  //etc
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T23:06:56.787

而不是混合托管和非托管（这可能会混淆假设`System.Console`），我建议只使用 P/Invoke 整个方式。

MSDN 有一个例子：http: [//msdn.microsoft.com/library/ms685035](http://msdn.microsoft.com/library/ms685035)

# c# - Resharper 4.5 中的解决方案范围分析中断？

> ID：854674
> 
> 赞同：7
> 
> 时间：2009-05-12T20:18:47.967
> 
> 标签：c#, .net, visual-studio, resharper, resharper-4.5

自从我升级到 resharper 4.5 后，我在解决方案范围内的分析方面遇到了麻烦。

我不断地得到误报，并且让我的代码不存在的错误报告错误。

我发现摆脱错误的唯一方法是打开每个报告的错误文件，找到有问题的类型/类，打开这些文件，然后再次关闭所有内容，这似乎迫使 resharper 重新分析所有内容。

我相信@jira 已经存在缺陷，但我正在寻找有关如何快速强制 resharper 重新分析错误文件的方便提示...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-13T09:21:49.183

当这种情况发生在我身上时，我使用 shift+alt+Page-Down 滚动到解决方案中的下一个错误。只是通过错误发送垃圾邮件将使 Resharper 重新分析文件。不是一个好的解决方案，但它有效。

编辑：如果您转到菜单 ReSharper -> Windows ->“解决方案中的错误”，您将看到一个名为“解决方案中的错误”的窗口。右侧有一个按钮，名为“重新分析有错误的文件”。您甚至可以将其放在快捷方式上。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-21T19:51:58.020

定期删除您的 resharper 缓存文件 - 特别是如果您已从以前的版本升级。您很可能在解决方案文件夹下的某处有一个 _Resharper.* 文件。这整个文件夹结构可能会被吹走，当 Resharper 对我行为不端时，我会这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-21T14:34:45.320

根据您的解决方案有多大，这可能是一个巨大的痛苦，但我偶尔也会遇到同样的问题，如果我构建的项目显示错误，它就会消失。

例如，就在昨天，它找不到我们的一个较小项目的 Excel 库，并且它完全是红色的，尽管没有任何改变，所有 DLL 都已找到并引用，并且没有明显错误。我刚刚重建了那个单独的项目，它编译没有错误，红条立即消失了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-13T21:37:08.437

看起来像 resharper 中的一个问题。通常最好直接向他们报告，然后等待他们发​​现这个问题。

此外，它更像是一个错误报告而不是一个编程问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-17T10:57:27.610

这里也一样，但话又说回来，我多年来一直在得到误报（或负数）。对我来说，两个失败点是 WPF（特别是 XAML）和在代码文件中使用 Unicode（即，使用非拉丁字母进行编程。）

我建议简单地将其关闭，尤其是考虑到您为此付出的性能代价。

# objective-c - 是否可以使用 distcc 设置 Linux 机器来构建我的 XCode 项目？

> ID：854675
> 
> 赞同：4
> 
> 时间：2009-05-12T20:18:56.967
> 
> 标签：objective-c, linux, xcode, build, distributed

我有一个 mac mini，我在上面做一些 iphone 和其他实验性开发。构建我尝试过的一些大型项目（如 3d 引擎等）的速度非常慢。使用 distcc 对分布式构建有一些支持，我有一个四核 linux 盒子就在它旁边闲置着。

问题是：是否可以在 linux 机器上设置一个 distcc 环境来构建普通的 mac 目标 c 或 c++ 项目，甚至是 iphone 项目？有没有人尝试/成功做到这一点，还是不可能？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-12T22:13:04.643

是的，这是可能的。不，这并不容易。但我已经为你完成了大部分艰苦的工作，我什至在[toolwhip.googlecode.com](http://toolwhip.googlecode.com/)上收集了所有内容。源代码中的各种 README 描述了已完成的工作。我现在无法为它提供支持，但我正在使用它并取得了非常积极的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-12T20:24:42.730

大多数 Apple 工具链（当然不包括 Xcode）的源代码都可以[在这里](http://www.opensource.apple.com/release/developer-tools-312/)找到，包括[distcc](http://www.opensource.apple.com/source/distcc/distcc-1088/)。一切都将在 Darwin 上运行，因此一种可能性是通过您 Linux 机器上的 Darwin 中的 VM 运行它们。看起来许多流行的 Linux 发行版已经有了 distcc 包（例如[Ubuntu](http://packages.ubuntu.com/dapper/distcc)），尽管我不确定它们与 Apple 的代码有何不同。

# .net - Linq 动态选择转换问题

> ID：854676
> 
> 赞同：0
> 
> 时间：2009-05-12T20:19:08.573
> 
> 标签：.net, asp.net, linq, linq-to-sql, casting

我想运行一个查询来获取 logType 的不同“logName”项的字符串数组。以下效果很好：

```
Dim stringArray() As String = (From item In dc.Vw_Logs 
    Where item.LogType = [Passed in logType] 
    Select item.LogName Distinct).ToArray() 
```

但是，这仅在设置了特定 LogType 时才有效。我希望 logType 子句是可选的。为了尝试实现这一点，我重写了查询：

```
Dim q = From item In dc.Vw_Logs Distinct
If not logType is nothing Then 
    q = q.Where(Function(item) item.LogType = logType)
End If
q.Select(Function(item) item.LogName)
Dim stringArray() As String = q.ToArray() 
```

有了这个我得到以下错误：

```
Value of type '1-dimensional array of Vw_Log' cannot be converted 
to '1-dimensional array of String' 
```

解决这个问题的最佳方法是什么？我想避免迭代每个项目和铸造。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T20:38:33.363

错误是因为 q 不是字符串，而是 dc.Vw_Logs 中包含的类型。

我不再在 VB 中进行太多编程，但这应该会让你很接近。

```
Dim q = From item In dc 
        Where (logType Is Nothing Or item.LogType = logType) 
        Select item.LogName Distinct

logType Is Nothing Or item.LogType = logType 
```

如果 logType 有值，您将获得匹配的项目；否则，您将获得所有物品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T21:41:17.347

问题是这条线

```
q.Select(Function(item) item.LogName) 
```

不会改变 q，它只是丢弃选择的结果，这样当你这样做时

```
Dim stringArray() As String = q.ToArray() 
```

您正在尝试将原始 q（类型为 Vw_Log）转换为字符串数组。将最后两行替换为：

```
Dim stringArray() As String = q.Select(Function(item) item.LogName).ToArray() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T20:28:04.003

不要重复使用 q。第一个赋值是 Vw_Log()，第二个是 String()。

您也可以结合最后两行来避免这种情况。

# asp.net - ASP.Net ViewState 压缩：我应该打扰吗？

> ID：854677
> 
> 赞同：2
> 
> 时间：2009-05-12T20:20:20.397
> 
> 标签：asp.net, .net-3.5, viewstate

所以基本上我正在开发一个试图针对手机进行优化的网站（这包括几乎所有支持浏览器的手机）由于该网站的性质，我希望它尽快加载。在这一点上，我认为页面大小约为 30k 左右。

现在我正在使用视图状态，主要用于数据网格之类的东西，而不是我自己“保存”任何字段。

我已经看到很多这样的例子[（我发誓不是我的博客）](http://www.bloggingdeveloper.com/post/How-To-Compress-ViewState-in-ASPNET-20-ViewState-Compression-with-SystemIOCompression.aspx)考虑到 2.0，但没有任何处理 3.5 这让我想知道从那时起是否没有任何变化，或者压缩视图状态已经失宠。

问题是，我应该费心尝试压缩视图状态还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-12T20:40:02.033

> 我正在使用视图状态，主要用于数据网格之类的东西，而不是我自己“保存”任何字段。

我最担心的是网格。您自己保存的字段往往是简单的变量，例如数据库 ID 或用户名。这些不会引起那么多问题，因为它们很小。整个网格可能包含大量数据，这就是您遇到麻烦的地方。

请记住，用户必须将视图状态的内容从浏览器上传到服务器，然后在每次回发时将它们下载回来。如果你有一个 100Mbit 的网络服务器连接——比如在企业局域网中，网络表单往往更受欢迎——那么 viewstate 就很棒。但是对于手机浏览器，许多用户可能会使用拨号上网，甚至更糟：*按字节付费*。在这种情况下，我会尝试尽可能关闭它，并且只在必要时启用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-03-21T11:10:12.943

压缩和解压缩内存中的数据

首先，我们需要一种方法来压缩和解压缩内存中的字节数组。我将这个简单的静态类放在一起，它公开了两种方法：压缩和解压缩。根据 MSDN，两个可用的类 GZipStream 和 DeflateStream 使用相同的算法，因此选择哪一个无关紧要。

下面的代码真的很简单，不需要再解释了：

```
 using System.IO;
    using System.IO.Compression;

    public static class Compressor {

      public static byte[] Compress(byte[] data) {
        MemoryStream output = new MemoryStream();
        GZipStream gzip = new GZipStream(output, 
                          CompressionMode.Compress, true);
        gzip.Write(data, 0, data.Length);
        gzip.Close();
        return output.ToArray();
      }

      public static byte[] Decompress(byte[] data) {
        MemoryStream input = new MemoryStream();
        input.Write(data, 0, data.Length);
        input.Position = 0;
        GZipStream gzip = new GZipStream(input, 
                          CompressionMode.Decompress, true);
        MemoryStream output = new MemoryStream();
        byte[] buff = new byte[64];
        int read = -1;
        read = gzip.Read(buff, 0, buff.Length);
        while(read > 0) {
          output.Write(buff, 0, read);
          read = gzip.Read(buff, 0, buff.Length);
        }
        gzip.Close();
        return output.ToArray();
      }
    } 
```

您需要将此类保存在 .cs 文件中并将其放在 ASP.NET 应用程序的 App_Code 目录中，确保它包含在正确的自定义命名空间中（如果您未指定任何命名空间，则该类将在内置的 ASP 命名空间）。

压缩 ViewState

现在，我们可以实际压缩页面的 ViewState 了。为此，我们必须重写 LoadPageStateFromPersistenceMedium 和 SavePageStateToPersistenceMedium 这两个方法。该代码仅使用一个附加隐藏字段 __VSTATE 来存储压缩的 ViewState。如您所见，通过查看页面的 HTML，__VIEWSTATE 字段为空，而我们的 __VSTATE 字段包含压缩后的 ViewState，以 Base64 编码。让我们看看代码。

```
 public partial class MyPage : System.Web.UI.Page {

      protected override object LoadPageStateFromPersistenceMedium() {
        string viewState = Request.Form["__VSTATE"];
        byte[] bytes = Convert.FromBase64String(viewState);
        bytes = Compressor.Decompress(bytes);
        LosFormatter formatter = new LosFormatter();
        return formatter.Deserialize(Convert.ToBase64String(bytes));
      }

      protected override void SavePageStateToPersistenceMedium(object viewState) {
        LosFormatter formatter = new LosFormatter();
        StringWriter writer = new StringWriter();
        formatter.Serialize(writer, viewState);
        string viewStateString = writer.ToString();
        byte[] bytes = Convert.FromBase64String(viewStateString);
        bytes = Compressor.Compress(bytes);
        ClientScript.RegisterHiddenField("__VSTATE", Convert.ToBase64String(bytes));
      }

      // The rest of your code here...

    } 
```

在第一种方法中，我们只是从 Base64 解码，解压缩和反序列化 __VSTATE 的内容，然后将其返回给运行时。在第二种方法中，我们执行相反的操作：在 Base64 中序列化、压缩和编码。然后将 Base64 字符串保存到 __VSTATE 隐藏字段中。LosFormatter 对象执行序列化和反序列化任务。

您可能还想创建一个新类，例如 CompressedPage，从 System.Web.UI.Page 继承，您在其中重写两个方法，然后从该类继承您的页面，例如 MyPage : CompressedPage。请记住，.NET 只有单一继承，通过这种方式，您“花费”了唯一的继承机会来使用 ViewState 压缩。另一方面，在每个类中重写这两种方法是浪费时间，因此您必须选择最适合您需要的方法。

以上内容由 Dario Solera 在 codeproject 上首次发表。 [http://www.codeproject.com/Articles/14733/ViewState-Compression](http://www.codeproject.com/Articles/14733/ViewState-Compression)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T20:29:17.900

我不认为在 2.0 中保存视图状态应该与在 3.5 中保存视图状态相同。减少视图状态的最好方法是不使用它，但这并不总是可行的。

在这些情况下，您应该尝试权衡带宽与服务器上所需的额外处理时间。知道它是否值得的唯一方法是去做并衡量影响。

**编辑**

我见过的另一个选择是将视图状态保存在服务器上。它可以保存在内存、数据库或磁盘中。取决于您的环境要求。这将是最大的带宽节省。

[这是一篇代码项目文章](http://www.codeproject.com/KB/aspnet/ViewStatePersistance.aspx)
[看起来不错的文章](http://it.toolbox.com/blogs/codesharp/my-oh-my-own-view-state-27012)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-11-22T06:11:12.457

Compression of the viewstate can only reduce it by 50% or so. I went a few steps ahead and used ViewState Substitution technique where the ViewState is replaced by a GUID on the Page. The actual ViewState data is saved in a database on the server itself, what the client (browser) gets and submits is just a 62byte token. It reduced by 200-300KB large ViewStates to 62 bytes.

Here I have written how to do this with code.. [http://ashishnangla.com/2011/07/21/reducing-size-of-viewstate-in-asp-net-webforms-by-writing-a-custom-viewstate-provider-pagestatepersister-part-12/](http://ashishnangla.com/2011/07/21/reducing-size-of-viewstate-in-asp-net-webforms-by-writing-a-custom-viewstate-provider-pagestatepersister-part-12/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-12T20:36:23.757

拥有 ViewState 与拥有快速加载的网页相反。为什么需要 ViewState？重新考虑您的设计并尽可能少地使用。我会将会话数据的负担放在服务器和/或数据库上，直到有理由将一些数据保留在 ViewState 中。

# c++ - netbeans 中的 C++ 编译器错误

> ID：854681
> 
> 赞同：9
> 
> 时间：2009-05-12T20:20:55.280
> 
> 标签：c++, windows, netbeans, mingw

从阅读 Netbeans 帮助到浏览 Google，我什么都试过了。此代码在**Dev-Cpp**中运行良好，但在**Netbeans 6.5.1**中运行良好。Netveans 还在我检查的旁边放置了感叹号`#include <iostream>`，并且位于 netbeans 的包含路径中，并且位于包含文件夹中：

```
#include <iostream>
int main() {
    std::cout << "Test"  << "\n";
    return (0);
} 
```

我的构建工具设置为：

家庭： `MinGW`

**基本目录**：`C:\Dev-Cpp\bin`

**C编译器**：`C:\Dev-Cpp\bin\gcc.exe`

**C++ 编译器**： `C:\Dev-Cpp\bin\g++.exe`

**Fortran 编译器**：`C:\Dev-Cpp\bin\g77.exe`

**制作命令**：`C:\Dev-Cpp\bin\make.exe`

**调试器命令**： `C:\Dev-Cpp\bin\gdb.exe`

我得到错误：

```
Running "C:\Dev-Cpp\bin\make.exe  -f Makefile CONF=Debug" in C:\Documents and Settings\Babiker\Desktop\Temp\Test

! was unexpected at this time.

C:\Dev-Cpp\bin\make.exe: *** [.validate-impl] Error 255

Build failed. Exit value 2. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-12T22:43:49.337

错误的原因是 Netbeans 与 MinGW 的 make 不兼容。

您可以选择支持的 make 版本：

*   Cygwin 的品牌。[Cygwin](http://www.cygwin.com "赛格温")是一种祝福。它可以为 Windows 带来尽可能多的 Unix。
*   MinGW 自己的[MSYS](http://www.mingw.org/wiki/msys)，它“是 GNU 实用程序的集合，例如 bash、make、gawk 和 grep，以允许构建依赖于存在传统 UNIX 工具的应用程序和程序”。它的下载量也比 Cygwin 小得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T13:46:20.240

MinGW make 工具与 NetBeans 不兼容。请改用 msys make 工具。

当您选择使用msys 的make 工具时，请注意安装在没有空格的路径中。

例如 C:\Program Files\MinGW\msys\1.0\bin\make 将失败。一个不错的选择是 C:\MinGW\msys\1.0\bin\make。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-07-12T21:54:18.500

我建议你为 netbeans 使用 codeblocks 编译器我希望这会对你有所帮助

只有一个简单的方法来配置 netBeans，首先你从[Code::Blocks IDE Downlowd](http://space.dl.sourceforge.net/project/codeblocks/Binaries/10.05/Windows/codeblocks-10.05mingw-setup.exe)和[MSYS 1.0.11下载并安装 Code::Blocks IDE](http://space.dl.sourceforge.net/project/mingw/MSYS/BaseSystem/msys-core/msys-1.0.11/MSYS-1.0.11.exe)

所有设置将自动配置

但你必须做的一件事

select 是 make 命令

从

C:\msys\1.0\bin\make.exe ![在此处输入图像描述](https://i.stack.imgur.com/C6F56.png)

我希望这对你有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T21:01:41.030

这可能无关紧要，但您的 make 环境是否与正确的文件类型相关联？所以它不是试图用普通的 c 编译器或类似的东西编译一个 .cpp 文件？我从来没有使用过你的环境，但我认为这样的事情总是可能的。

在那张纸条上，您的代码在 .cpp 文件中，而不是 .c 文件中？或者，也许您将它放在 .cxx 文件中（我以前在 C++ 中看到过，很少见，但我已经看到过），并且 .cxx 与 C++ 无关，因此对于未知类型，它“默认”为 C ?

也许查看您的 makefile 也将有助于提供一些见解。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-13T07:11:31.800

我尝试在 netbeans 6.5 中运行此代码，它运行良好。我从问题中不明白如何添加感叹号。

我建议检查链接器选项以确保 netbeans 正确链接到 C++ 标准库。

您可以通过右键单击项目文件 -> 属性找到此选项。

# django - Django BooleanField 作为单选按钮？

> ID：854683
> 
> 赞同：58
> 
> 时间：2009-05-12T20:21:19.567
> 
> 标签：django, django-models, django-forms

Django 1.0.2 中是否有一个小部件可以将 a 呈现`models.BooleanField`为两个单选按钮而不是复选框？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2010-10-18T16:16:23.557

Django 1.2 为模型表单添加了“widgets”元选项：

在您的 models.py 中，为您的布尔字段指定“选择”：

```
BOOL_CHOICES = ((True, 'Yes'), (False, 'No'))

class MyModel(models.Model):
    yes_or_no = models.BooleanField(choices=BOOL_CHOICES) 
```

然后，在您的 forms.py 中，为该字段指定 RadioSelect 小部件：

```
class MyModelForm(forms.ModelForm):
    class Meta:
        model = MyModel
        widgets = {
            'yes_or_no': forms.RadioSelect
        } 
```

我已经使用 SQLite db 对此进行了测试，该数据库还将布尔值存储为 1/0 值，并且在没有自定义强制函数的情况下似乎可以正常工作。

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2009-05-12T20:42:45.790

您可以通过覆盖 ModelForm 中的字段定义来做到这一点：

```
class MyModelForm(forms.ModelForm):
    boolfield = forms.TypedChoiceField(
                   coerce=lambda x: x == 'True',
                   choices=((False, 'False'), (True, 'True')),
                   widget=forms.RadioSelect
                )

    class Meta:
         model = MyModel 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2009-09-10T15:31:37.460

稍微修改 Daniel Roseman 的答案，您可以通过使用 ints 来简洁地解决 bool("False") = True 问题：

```
class MyModelForm(forms.ModelForm):
    boolfield = forms.TypedChoiceField(coerce=lambda x: bool(int(x)),
                   choices=((0, 'False'), (1, 'True')),
                   widget=forms.RadioSelect
                )

class Meta:
     model = MyModel 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2014-07-02T05:12:33.163

这是我能找到的最简单的方法（我使用的是 Django 1.5）：

```
class MyModelForm(forms.ModelForm):
    yes_no = forms.BooleanField(widget=RadioSelect(choices=[(True, 'Yes'), 
                                                            (False, 'No')])) 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2014-08-19T13:27:51.350

在 Django 1.6 中，以下内容对我有用：

```
class EmailSettingsForm(ModelForm):

    class Meta:
        model = EmailSetting
        fields = ['setting']
        widgets = {'setting': RadioSelect(choices=[
            (True, 'Keep updated with emails.'),
            (False, 'No, don\'t email me.')             
        ])} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-01-12T10:23:50.367

与@eternicode 的答案相同，但不修改模型：

```
class MyModelForm(forms.ModelForm):
    yes_no = forms.RadioSelect(choices=[(True, 'Yes'), (False, 'No')])

    class Meta:
        model = MyModel
        widgets = {'boolfield': yes_no} 
```

我认为这只适用于 Django 1.2+

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2010-05-26T21:55:51.460

这是一个使用 lambda 的快速而肮脏的强制函数，它解决了“False”-> True 问题：

```
...
boolfield = forms.TypedChoiceField(coerce=lambda x: x and (x.lower() != 'false'),
... 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2011-07-20T13:42:58.890

由于@Daniel Roseman 的答案存在问题，bool('False') --> True，所以现在我在这里结合了两个答案来制定一个解决方案。

```
def boolean_coerce(value):
    # value is received as a unicode string
   if str(value).lower() in ( '1', 'true' ):
       return True
   elif str(value).lower() in ( '0', 'false' ):
       return False
   return None

class MyModelForm(forms.ModelForm):
boolfield = forms.TypedChoiceField(coerce= boolean_coerce,
               choices=((False, 'False'), (True, 'True')),
               widget=forms.RadioSelect
            )

class Meta:
     model = MyModel 
```

现在这将起作用:)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-06-18T08:35:12.517

还要记住 MySQL 使用 tinyint 作为布尔值，所以 True/False 实际上是 1/0。我使用了这个强制功能：

```
def boolean_coerce(value):
    # value is received as a unicode string
    if str(value).lower() in ( '1', 'true' ):
        return True
    elif str(value).lower() in ( '0', 'false' ):
        return False
    return None 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2013-03-05T13:12:39.460

另一个解决方案：

```
from django import forms
from django.utils.translation import ugettext_lazy as _

def RadioBoolean(*args, **kwargs):
    kwargs.update({
        'widget': forms.RadioSelect,
        'choices': [
            ('1', _('yes')),
            ('0', _('no')),
        ],
        'coerce': lambda x: bool(int(x)) if x.isdigit() else False,
    })
    return forms.TypedChoiceField(*args, **kwargs) 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-07-22T05:49:08.563

django 3.0 版更新：

```
BOOLEAN_CHOICES = (('1', 'True label'), ('0', 'False label'))
  # Filtering fields
    True_or_false_question = forms.ChoiceField(
        label="Some Label3",
  # uses items in BOOLEAN_CHOICES
        choices = BOOLEAN_CHOICES,
        widget = forms.RadioSelect
    ) 
```

它给出了一个项目符号按钮列表，我不知道如何让它不这样做

# vhdl - 为什么我不能增加这个`std_logic_vector`

> ID：854684
> 
> 赞同：15
> 
> 时间：2009-05-12T20:21:21.003
> 
> 标签：vhdl

这里发生了什么？为什么我会收到“运算符参数类型不匹配”，我能做些什么来解决它？

```
--
-- 32-bit counter with enable and async reset
--
architecture synthesis1 of counter_32bit is    
signal nextvalue : std_logic_vector ( 31 downto 0 );    
begin

  --
  -- combo
  --
  nextvalue <= value + 1; -- here

  --
  -- sequential
  --
  ff:process( clk, rst )
  begin

    if( rst = '1' ) then
      value <= 0; -- and here...
    elsif( clk'event and ( clk ='1' ) ) then
      if( ena = '1' ) then
         value <= nextvalue;
      end if;
    end if;

  end process ff;    

end synthesis1; 
```

谢谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-05-13T07:30:46.900

您不能直接增加 std_logic ，您需要将其转换为`unsigned`并返回`std_logic_vector`使用`numeric_std`包的结果。

```
use ieee.numeric_std.all
...
nextvalue <= std_logic_vector( unsigned(value) + 1 ); 
```

例如，请参阅[如何使用 IEEE.NUMERIC_STD 执行 STD_LOGIC_VECTOR 加法](https://web.archive.org/web/20160322172912/http://objectmix.com/vhdl/190708-how-do-perform-std_logic_vector-addition-using-ieee-numeric_std.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-06T21:57:50.963

试试这个代码：

```
use IEEE.STD_LOGIC_ARITH.ALL;
use IEEE.STD_LOGIC_UNSIGNED.ALL;
...
nextvalue <= value + "1"; 
```

在我的情况下，这个解决方案是有效的！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-02T11:52:33.260

另一种方法是在这种情况下重载“+”，您可以编写：

```
function "+" ( a : std_logic_vector; b : integer ) return std_logic_vector is
    variable result : unsigned(a'range);
begin
    result := unsigned( a ) + 1 ;
    return std_logic_vector( result ) ;
end function ; 
```

创建一个包并将此功能包含在该包中，这样就可以解决问题。另一件事确实包括 ieee numeric_std 包，因为它包含转换函数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-08T19:55:28.227

除了已经提供的答案之外，您还可以重写代码，定义`nextvalue`为具有`unsigned`数据类型（如下）。注意`nextvalue <= to_unsigned(0, 32);`清除计数器的使用，以及`rising_edge(clk)`触发上升沿的使用。

```
-- 32-bit counter with enable and async reset
architecture synthesis1 of counter_32bit is    
    signal nextvalue : unsigned ( 31 downto 0 );    
begin

    ff:process( clk, rst )
    begin

        if( rst = '1' ) then
            nextvalue <= to_unsigned(0, 32); -- reset the count
        elsif rising_edge(clk) then
            if( ena = '1' ) then
                nextvalue <= nextvalue + 1;  -- increment the count
            end if;
        end if;

    end process ff;

    -- Concurrent assignment statement
    value <= std_logic_vector(nextvalue);

end synthesis1; 
```

这种形式的并发分配似乎是根据我在书籍和网上找到的更新计数器的首选方法。

此外，如果您继续使用`std_logic_vector`for 类型`nextvalue`，清除它的首选方法似乎`nextvalue <= (others => '0');`不仅仅是`nextvalue <= 0;`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-21T04:25:56.400

简而言之，STD_LOGIC_VECTOR 就是一个比特向量。它本身没有任何意义，因此您不能期望 vhdl 在语义上假设增量操作将对其起作用。这里关于将其转换为无符号的其他帖子应该可以解决问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-20T16:48:46.007

这也将起作用：

```
nextvalue <= value + '1'; 
```

不知道你是否真的精通VHDL。如果您使用的是 std_logic_arith 包，则以下语法在逻辑上是正确的

# wpf - 如何构建带有重复标题的分页 ItemsControl 或 Panel？

> ID：854685
> 
> 赞同：1
> 
> 时间：2009-05-12T20:21:34.683
> 
> 标签：wpf, silverlight, panel, itemscontrol

我正在尝试构建一个 Panel 或 ItemsControl ，它将以以下形式显示项目：

标题 1

*   子项 1
*   子项 2
*   分项 3

标题 2

*   子项 1
*   子项 2

这很容易，但这里的问题是我需要能够以分页方式拆分项目。根据控件的高度，不适合的内容将出现在下一页（依此类推）。如果子项之间发生拆分，我还需要在下一页上重新显示相应的标题。

I made some progress working with MeasureOverride and ArrangeOverride but I keep running into dead-ends. It's really frustrating because this is something that is computationally trivial but a nightmare to accomplish in WPF/Silverlight. If you have ever worked with reporting packages, the concept is very similar to this.

I keep coming back to the fact that I can't determine the height until after I have added the children to the control (using Dispatcher.BeginInvoke).

Does anyone have any suggestions for accomplishing this? Thanks in advance!

* * *

**Edit**

[[WPF] ObservableCollection and ListBoxItem DataTemplate generation problem](https://stackoverflow.com/questions/840161/wpf-observablecollection-and-listboxitem-datatemplate-generation-problem)

This above link is very similar to what mdm20 has suggested, but I am still stuck. Everytime I try to get the ActualHeight, it returns 0\. Additionally, the ItemContainerGenerator in Silverlight 3 returns null for the container unless I wrap the call in a Dispatcher.BeginInvoke operation.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-13T13:56:15.600

如果我必须实现这一点，我认为我不会尝试在面板中执行此操作。我认为您需要一组项目、一个标题模板、一个分页模板和一个项目模板。您可以使用以下方法获取模板的高度：

```
 Size maxSize = new Size(0, 30);
    UIElement templateRoot = template.LoadContent() as UIElement;
    templateRoot.Measure(maxSize);
    Size size = templateRoot.DesiredSize; 
```

您实际上需要在模板中指定一个高度才能使其正常工作。我认为您只关心高度，所以我将宽度设为 0。

获得模板高度后，您可能必须设置某种地图来跟踪哪些对象在哪个页面上。每次大小更改或项目源更改时，都必须重新创建。

之后，您只需根据您所在的页面将项目添加为控件中包含的面板的子项。

这就是我会尝试做的方式..如果这有任何意义:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-13T14:08:45.643

在构建a 之前，确实不可能直接测量`UIElement`它，但您可能能够以预先知道它们将占用多少空间的方式构建列表元素。例如，您可以使用`Grid`布局每个元素，用已知高度的行（比如`headerHeight`）作为标题，用已知高度的行作为每个子项（比如`subitemHeight`）。`headerHeight`然后，您可以通过论坛+ `numSubitems`*计算每个元素的高度`subitemHeight`。此外，如果您知道项目的数量会相当少，比如少于 1000 个，那么您可能只想继续并提前创建它们，因为此时性能损失可能是可以容忍的。

我同意这种事情可能很烦人，但正是框架的灵活性造成了问题。这个高度计算问题使得在 ListBox 或 ListView 中制作平滑滚动但仍然虚拟化的项目列表变得如此困难。

# jsp - JSP 页面转发：相对 URL 问题？

> ID：854686
> 
> 赞同：0
> 
> 时间：2009-05-12T20:21:41.703
> 
> 标签：jsp, url

我的 JSP 站点有点问题。

我将它分为三个部分：一个主文件夹，其中有一个“资源”和一个“动作”文件夹。我将显示站点的文件存放在主文件夹中，并将验证和操作文件存放在“actions”文件夹中。

进入网站后，用户必须登录。我通过“操作”中的脚本验证用户是否已注册以及他们的密码是否有效。从这个脚本中，我`jsp:forward`为用户的登录信息提供了相应的脚本，即如果登录屏幕无效，则为主页，如果有效，则为主页。

让我吃惊的是，通过`jsp:forward`主页，它无法访问 CSS，因为它认为它仍在“操作”目录中，而我知道它在主文件夹中，因此可以访问“资源”中的文件”文件夹通过“./resources/”。

我的问题是，我可以使用另一种机制将页面设置为主页，还是我仅限于使用`jsp:forward`并因此必须处理认为我们处于“操作”中的相对 URL？

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T20:39:38.010

你能重定向而不是转发吗？这将使 URL 与目标页面的位置相匹配：

```
response.sendRedirect('url'); 
```

# jvm - 在一个运行时实例中运行 java 程序

> ID：854687
> 
> 赞同：2
> 
> 时间：2009-05-12T20:21:42.983
> 
> 标签：jvm, java

我想知道这样的事情是否可能：我有一个 java 程序，它接受参数并将输出提供给控制台。我需要多次运行它——它（jar 文件）运行平稳，但启动和停止 java 运行时的开销很大。有没有办法一次实例化java运行时（或vm，我不确定如何调用它），然后以某种方式连接到该运行时几次并执行jar？

我希望尽管我对 Java 术语一无所知，但有人能够回答我的问题：D。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-12T20:25:54.053

编写一个调用 JAR 的 Main-class 的包装类，并使用适当的参数重复调用 AppClass.main() 应该很简单：

```
// wraps class MyWrapped
class MyWrapper {

public static void main(String[] args) {
   for (each set of command-line args) {
       MyWrapped.main(arguments);
   }
} 
```

请记住，Java 应用程序的 main() 方法并没有什么特别之处，它只是一个您可以自己调用的静态方法。如果设计得当，它甚至可以被多个线程同时调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T20:26:02.993

设计创建一个多次执行代码的主包装器可能会更好。从这些方面考虑。实例化一个类文件并根据需要多次调用方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T20:45:07.843

有什么理由不能让这个循环运行？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-13T16:53:00.837

请注意，列出的明显方法不会在实例之间重新加载类。如果您修改静态字段，这些字段不会重新初始化！

如果这可能是一个问题，请考虑重写以解决此问题。另一种方法可能是研究基于 OSGi 容器的解决方案，因为它们不允许单独的段互相看到，因此每个调用都有自己加载的类。

# asp.net-mvc - 如何取消 ASP.NET MVC 操作

> ID：854689
> 
> 赞同：0
> 
> 时间：2009-05-12T20:21:56.477
> 
> 标签：asp.net-mvc, vb.net, model-view-controller

这应该很简单，但答案让我望而却步。如果我的控制器中有保存操作，但保存失败，我如何取消操作而不影响用户输入的内容？例如，Index 是“MyTable”的强类型：

```
Function Index() As ActionResult
    ViewData("message") = "Hello"
    Return View(New MyTable)
End Function

<ActionName("Index"), AcceptVerbs(HttpVerbs.Post)> _
Function Save(ByVal form As MyTable) As ActionResult
    Try
        SaveMyData(form)
        Return RedirectToAction("Index")
    Catch
        AddModelError("form", "An error occurred.")
        ???
    End Try
End Function 
```

在 Catch 中，如果我放置 Return View(form)，我会丢失通过 ViewData 传递的消息。如果我重定向到索引，我将丢失用户输入的内容。我想我以前见过处理这个问题的简单（正确）方法，但如果你不知道要搜索什么，就很难找到。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T21:13:33.650

您不需要显式地实际存储表单值，因为它们由框架保留。

替换你的“？？？？？？” 使用以下内容将警告您的视图出现错误（通过 ModelState 属性）并重新显示输入的值：

```
Return View(form) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-13T01:51:16.800

> 在 Catch 中，如果我放置 Return View(form)，我会丢失通过 ViewData 传递的消息。

据我了解，您不会丢失通过 ViewData 传递的消息 - 该函数根本无法运行。

而且我强烈建议不要进行重定向或使用 TempData 来实现您想要实现的目标，这没有任何意义，也不是 MVC 应该工作的方式。

继续你所拥有的，我将有一个私有函数，两个动作都调用它来返回视图。它将您的 ViewData("message") 放在一个地方，并且您仍然在表单中拥有以前的值（以及像 Josh E 所说的那样在 ModelState 内部）。

警告：来自 C# 程序员的 VB.NET 空中代码 ;-)

```
Function Index() As ActionResult
    Return IndexView(New MyTable)
End Function

<ActionName("Index"), AcceptVerbs(HttpVerbs.Post)> _
Function Save(ByVal form As MyTable) As ActionResult
    Try
        SaveMyData(form)
        Return RedirectToAction("Index")
    Catch
        AddModelError("form", "An error occurred.")
    End Try

    Return IndexView(form)
End Function

Private Function IndexView(ByVal form As MyTable) As ActionResult
    ViewData("message") = "Hello"
    Return View(form)
End Function 
```

HTH，查尔斯

附言。我想补充一点，我觉得很奇怪你有一个索引页面，它会发回自己，然后如果帖子有错误，它会重新显示索引页面，但如果没有任何错误，它会重定向回索引页面.

我不知道该应用程序在做什么，但似乎您正在使用索引页面/视图做太多事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T20:31:02.203

您可以在重定向期间使用 TempData 存储表单中的数据，并在 Index 操作中从 TempData 获取数据。这是[对 TempData 的讨论](http://blogs.teamb.com/craigstuntz/2009/01/23/37947/)。

然后，您的操作将如下所示（请原谅我对 VB.Net 语法的二年级知识）：

```
Function Index() As ActionResult
    ViewData("message") = "Hello"

    If TempData["FormData"] == Nothing
        Return View(New MyTable)
    Else
        Return View(TempData["FormData"])
    EndIf
End Function

<ActionName("Index"), AcceptVerbs(HttpVerbs.Post)> _
Function Save(ByVal form As MyTable) As ActionResult
    Try
        SaveMyData(form)
    Catch
        AddModelError("form", "An error occurred.")
        TempData["FormData"] = form;
    End Try

    Return RedirectToAction("Index")
End Function 
```

TempData 将存储来自同一主机的恰好一个请求的数据。它与Rails中的*flash*功能几乎相同。

# c# - 使用互操作打印 Excel

> ID：854693
> 
> 赞同：15
> 
> 时间：2009-05-12T20:22:44.497
> 
> 标签：c#, excel, interop, printing

有人知道如何使用 C# 和 Excel 互操作以编程方式打印 excel 文件吗？如果是这样，你能提供代码吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-05-13T11:45:32.833

In order to print, you can make use of the [Worksheet.PrintOut()](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.excel.worksheet.printout.aspx) method. You can omit any or all of the optional arguments by passing in [Type.Missing](http://msdn.microsoft.com/en-us/library/system.type.missing.aspx). If you omit all of them, it will default to printing out one copy from your active printer. But you can make use of the arguments to set the number of copies to print, collation, etc. See help on the [Worksheet.PrintOut()](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.excel.worksheet.printout.aspx) method for more.

The example they show in the help file is:

```
private void PrintToFile()
{
    // Make sure the worksheet has some data before printing.
    this.Range["A1", missing].Value2 = "123";
    this.PrintOut(1, 2, 1, false, missing, true, false, missing);
} 
```

But unless you need to change the default settings, you can simply pass in [Type.Missing](http://msdn.microsoft.com/en-us/library/system.type.missing.aspx) for all the arguments. Here's an example using automation to open an Excel Workbook, print the first page, and then shut down:

```
void PrintMyExcelFile()
{
    Excel.Application excelApp = new Excel.Application();

    // Open the Workbook:
    Excel.Workbook wb = excelApp.Workbooks.Open(
        @"C:\My Documents\Book1.xls",
        Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, 
        Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, 
        Type.Missing, Type.Missing,Type.Missing,Type.Missing);

    // Get the first worksheet.
    // (Excel uses base 1 indexing, not base 0.)
    Excel.Worksheet ws = (Excel.Worksheet)wb.Worksheets[1];

    // Print out 1 copy to the default printer:
    ws.PrintOut(
        Type.Missing, Type.Missing, Type.Missing, Type.Missing, 
        Type.Missing, Type.Missing, Type.Missing, Type.Missing);

    // Cleanup:
    GC.Collect();
    GC.WaitForPendingFinalizers();

    Marshal.FinalReleaseComObject(ws);

    wb.Close(false, Type.Missing, Type.Missing);
    Marshal.FinalReleaseComObject(wb);

    excelApp.Quit();
    Marshal.FinalReleaseComObject(excelApp);
} 
```

Hope this helps!

Mike

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-24T10:01:31.567

重要的改进是选择打印机的代码，例如：

```
var printers = System.Drawing.Printing.PrinterSettings.InstalledPrinters;

int printerIndex = 0;

foreach(String s in printers)
{
    if (s.Equals("Name of Printer"))
    {
        break;
    }
    printerIndex++;
}

xlWorkBook.PrintOut(Type.Missing, Type.Missing, Type.Missing, Type.Missing,printers[printerIndex], Type.Missing, Type.Missing, Type.Missing); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-10T13:23:21.813

已经给出的所有答案都很好，但我只是认为我可以通过更多选项来显示对话框和定义打印页面的方向，从而使其更简单。

```
private void PrintExcel()
{
    string filePath = "C:\file\location\here\";
            Excel.Application excelApp = new Excel.Application();

    // Open Workbook:
    Excel.Workbook wb = excelApp.Workbooks.Open(filePath);

    // Define the orientation for the page
    ((Excel._Worksheet)wb.ActiveSheet).PageSetup.Orientation = Excel.XlPageOrientation.xlLandscape;

    //Decide which worksheet to print
    Excel.Worksheet ws = (Excel.Worksheet)wb.Worksheets[1];

    // Option to print with or to show dialogue box
    bool userDidntCancel = excelApp.Dialogs[Excel.XlBuiltInDialog.xlDialogPrint].Show();

    // Option to print out wihtout the dialogue box. 
    // WARNING: Do not use Dialogue option and this at the same time. 
    // It will print the page even if you cancel the dialogue print option.
    ws.PrintOut();

    // Cleanup your code
    GC.Collect();
    GC.WaitForPendingFinalizers();

    Marshal.FinalReleaseComObject(ws);

    wb.Close(false, Type.Missing, Type.Missing);
    Marshal.FinalReleaseComObject(wb);

    // Close/Exit File
    excelApp.Quit();
    Marshal.FinalReleaseComObject(excelApp);

} 
```

我希望这对某人有所帮助。:D

# tomcat - 撒克逊 XMLBeans Tomcat

> ID：854711
> 
> 赞同：1
> 
> 时间：2009-05-12T20:27:06.097
> 
> 标签：tomcat, saxon, xmlbeans

我们最近更新了 Tomcat Web 服务。我们真正更新的唯一事情是我们将 XMLBeans 更新到了 2.4 版，将 Saxon 更新到了 9 版。

运行它 Netbeans 和 eclipse，我们的项目现在工作正常，但是当尝试部署到 tomcat 时，我们得到以下结果。

我们尝试将 JAXEN 更新到 1.1.1 版，但没有任何乐趣。

有任何想法吗？

我们在部署中遇到的错误是：

```
java.lang.IllegalArgumentException: dom4j-core,jdom,xml-apis,xerces,junit-Extension-Name
        at java.util.jar.Attributes$Name.(Attributes.java:440)
        at java.util.jar.Attributes.getValue(Attributes.java:99)
        at org.apache.catalina.util.ManifestResource.getRequiredExtensions(ManifestResource.java:186)
        at org.apache.catalina.util.ManifestResource.processManifest(ManifestResource.java:155)
        at org.apache.catalina.util.ManifestResource.(ManifestResource.java:52)
        at org.apache.catalina.util.ExtensionValidator.validateApplication(ExtensionValidator.java:186)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4154)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:525)
        at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:626)
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:511)
        at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1220)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:297)
        at com.sun.jmx.mbeanserver.DynamicMetaDataImpl.invoke(DynamicMetaDataImpl.java:213)
        at com.sun.jmx.mbeanserver.MetaDataImpl.invoke(MetaDataImpl.java:220)
        at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:815)
        at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:784)
        at org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1458)
        at org.apache.catalina.manager.ManagerServlet.deploy(ManagerServlet.java:820)
        at org.apache.catalina.manager.ManagerServlet.doGet(ManagerServlet.java:348)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:690)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:196)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:525)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:263)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:584)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
        at java.lang.Thread.run(Thread.java:595) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T22:09:12.917

问题是由 MANIFEST.MF 文件包含`Extension-List`Tomcat 不喜欢的属性值的 JAR 文件引起的。Tomcat 期望此属性的值是一个以空格分隔的扩展名列表（请参阅[ManifestResource 源代码](http://kickjava.com/src/org/apache/catalina/util/ManifestResource.java.htm)），但您的一个 JAR 似乎有逗号分隔的列表`dom4j-core,jdom,xml-apis,xerces,junit`。此列表中没有空格，因此 Tomcat 认为这都是一个大扩展名。

扩展名也用于在清单中为其他属性的名称添加前缀。例如，下面是有效清单的一部分：

```
扩展列表：ant qdox commons-attributes-api javadoc
蚂蚁扩展名：蚂蚁
ant 实现版本：1.5
ant-Implementation-URL：http://www.ibiblio.org/maven/ant/jars/ant-1.5。
 罐
qdox 扩展名：qdox
qdox 实现版本：1.5

```

属性名称只能包含字母、数字、连字符和下划线，因此扩展名也必须遵循相同的规则。带有逗号的扩展名显然是无效的，这就是你得到上述异常的原因。

我查看了官方[JAR 文件规范](http://java.sun.com/javase/6/docs/technotes/guides/jar/jar.html)，但这似乎没有说明这些扩展名应该如何分隔。

我不能说哪个 JAR`Extension-List`在其清单中有这个逗号分隔的属性。但是，我会首先检查最新版本的 XMLBeans 和 Saxon 中的 JAR 文件。如果您的项目在升级之前工作，那么问题很可能是由最近发生的变化引起的。

修复当然是编辑有问题的清单文件以在其`Extension-List`属性中使用空格而不是逗号。

祝你好运！

# php - APC 中的操作码缓存和丢失的文件

> ID：854715
> 
> 赞同：3
> 
> 时间：2009-05-12T20:27:46.843
> 
> 标签：php, apc

我们使用 APC 作为操作码缓存。有没有办法让 APC 缓存不存在的文件？我们设置了`apc.stat = 0`和`apc.include_once_override = 1`。`include_once`为了提高调用文件系统上可能不存在的文件的性能，是否还有更多工作要做？如果它存在，显然我们想要包含它。但是，如果它不存在，它将*永远*不存在，我们不希望 PHP`open()`在每个请求中调用该文件进行检查。

对于某些背景：我们有一个基础站点，但会为每个客户提供对站点的定制。有些客户有自定义登录页面，有些客户有完全独特的页面，等等。

我们以一种稍微不寻常的方式使用 Zend 框架，以允许我们根据需要覆盖控制器。我们的站点可能有一个名为 的控制器`LoginController`，定义在一个文件中`controllers/LoginController.php`。但是，我们的客户“公司”可能需要自定义登录页面，因此我们将编写一个名为`Company_LoginController`defined in a directory的新类`controllers/company/LoginController.php`。（这种命名约定使我们能够与 Zend Framework 的“模块”概念保持一致。）

当我们处理类时，我们基本上会做这样的事情：

```
include_once APPLICATION_PATH . '/controllers/company/LoginController.php';
if (class_exists("Company_LoginController")) {
    echo 'customer-specific controller exists';
} else {
    include_once APPLICATION_PATH . '/controllers/LoginController.php';
    echo 'customer-specific controller does not exist; using default';
} 
```

如果文件`/controllers/company/LoginController.php`存在，APC 将在第一次请求时缓存它，并且不再从文件系统中获取它。但是，如果该文件`/controllers/company/LoginController.php`不存在，我*不*希望 APC 多次检查该文件是否存在。有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-12T21:14:09.403

您可以在公司目录中创建空文件吗？由于 APC 不会加载它们两次，因此在服务器第一次启动时让一些空文件被“加载”并没有什么害处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-12T21:36:03.253

jmucchiello 的回答让我对简单性投了赞成票，但如果由于某种原因这不切实际，你总是可以用艰难的方式做事。

下面是一个粗略的，未经测试的例子，但它应该传达基本思想，即自己手动将文件的存在存储在APC中

```
function conditional_include($file) {
  $key = 'file-exists-' . $file;
  //fetch cache key; if it does not exist, then...
  if(($fileExists = apc_fetch($key)) === false) {
    //actually hit the disk to look for the file, and store the result
    apc_store($key, $fileExists = (file_exists($file) ? 1 : 0));
  }

  //only include the file if it exists.
  if($fileExists)
   include_once $file;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-05-08T18:46:49.693

如果您使用 Zend Framework，我建议您使用 Zend_Loader 自动加载魔法来确保加载您需要的文件。通过使用自动加载器，您可以从 ZF 中删除几乎所有的 include_once 调用（除了 Zend_Loader 类中的调用）警告 - 确实取决于您的类和文件命名样式，但您可以重写/扩展自动加载器来解决这个问题。

这可能不是您所追求的，但我希望它对您有所帮助..

# .net - 关于如何编写静态分析规则 (FXCop) 以确保删除事件委托的任何想法

> ID：854716
> 
> 赞同：7
> 
> 时间：2009-05-12T20:27:47.997
> 
> 标签：.net, event-handling, delegates, static-analysis, fxcop

我们一直在进行一次大的内存泄漏分析，发现其中一个促成因素是未删除事件上的委托，导致对象不能足够快（或有时永远）被 GC。

有人对如何在 FXCop 中编写规则以确保我们从处理程序中删除委托有任何想法吗？

我刚刚看到[这个](https://stackoverflow.com/questions/341017/fxcop-custom-rule-inspecting-winform-control-properties)，因此我会在那里询问更多信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-12T14:43:38.333

你需要更具体。您无需检查所有事件委托是否都已取消订阅，因为在通常情况下，订阅者的寿命比发布者的寿命短。并且仅当您的订阅者看起来比发布者寿命更长时才会发生内存泄漏，因此存在引用，这会阻止 GC 收集发布者对象。

现在我们需要验证，如果您订阅了一个相对短暂的对象上的事件，您最终会取消订阅它。

在这种情况下，我可以提出一个启发式方法：分析所有局部变量对象（由当前代码块 {} 限定）和您显式 Dispose 的所有对象。对于这些对象上的每个事件，计算您订阅它们的次数和取消订阅的次数。如果第一个数字更大，则发出警告。

当然这并不能涵盖所有情况，但是我想没有静态方法可以涵盖此问题中的所有情况，您需要一些足够好的方法。

*我不会在这里提到动态分析和代码审查的优势，因为它是一个单独的主题，与问题无关。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-14T21:37:45.293

[好的，除了实现实际检查的问题（在我看来，这与路径覆盖](http://en.wikipedia.org/wiki/Code_coverage)非常相似，因此不实用） - 这是编写新 FxCop 规则的方法：

起初，一些对我有帮助的文章：

*   [编写自己的自定义规则](http://www.binarycoder.net/fxcop/html/)

*   [三个重要的 FXCop 规则](http://msdn.microsoft.com/en-us/magazine/cc163930.aspx)

实施一个简单的规则没什么大不了的。在您的项目中，您需要一个 Rules.xml 文件作为嵌入式资源（参见[此处](http://www.binarycoder.net/fxcop/html/rule_metadata_xml.html)）。您从 Check() 方法派生您的类`BaseIntrospectionRule`并将您的代码添加到：

```
public override ProblemCollection Check( TypeNode typeNode )
{
  if( type.IsPublic )
  {
    Problems.Add( new Problem( ... ) );
  }
  return Problems;
} 
```

我以前做过这个。我希望它仍然像描述的那样工作:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-14T13:27:54.177

您能否强制规定所有事件订阅都应通过 WeakReferences 处理？我认为这应该比分析程序的实际流程更容易实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T20:36:08.047

假设实现处理程序的对象以某种方式具有对带有事件的对象的引用是否安全？如果是这种情况，你最好弄清楚如何以另一种方式打破循环。

不久前，我们在 ASP.NET 页面上的事件处理程序中也发生过类似的事情。实现处理程序的对象也有对页面的引用。在尽可能多地从架构上断开链接之后，剩下的几个链接被更改为 WeakReferences。没有更多的内存问题！

# workflow - 基于网络的工作流解决方案

> ID：854719
> 
> 赞同：2
> 
> 时间：2009-05-12T20:28:13.097
> 
> 标签：workflow, business-process-management, diagrams

主要任务是处理经过某些特定工作流程的文档，这些工作流程由清晰的图形（图表）表示。我们需要文档版本控制、不同的角色和权限，最重要的是，我们需要让用户创建工作流图（包括所有这些用于转换、邮件通知、日历事件等的保护条件）。

我见过一些解决方案都不能满足最后一个要求。非常感谢任何基于 Web 的开源解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-23T01:20:47.790

如上所述，BEA Aqualogic Studio 确实很棒，但价格相当昂贵。看看 Intalio BPM，它是开源的，并且符合 BPMN 2.0。

JBoss 有一些与BEA 提供的产品类似的产品，而且它们是免费的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T20:33:59.767

您是否研究过 BEA Weblogic？

# visual-c++ - 从应用程序中获取当前 IP 地址 (VC++ 2005)

> ID：854722
> 
> 赞同：0
> 
> 时间：2009-05-12T20:29:25.187
> 
> 标签：visual-c++, command-line, ip-address, system

我想从包含机器当前 IP 地址的应用程序发送一封电子邮件。

我有适当的电子邮件代码，它可以工作。我只需要将 ipaddress 添加到电子邮件的正文中（即我没有以编程方式使用 IP 地址做任何事情）。

我希望有一种非常简单的方法，比如通过系统命令运行 ipconfig 并获取结果文本。

我宁愿不必打开套接字。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-01T23:58:32.023

我已将“Jason Heine”（不知道如何标记名称）代码更新为 c++。现在它应该工作了。顺便告诉他。所以这就是我得到的：

```
using namespace System;
using namespace System::Net;

void main(){
  String ^strHostName = String::Empty;
  // Getting Ip address of local machine...
  // First get the host name of local machine.
  strHostName = Dns::GetHostName();
  Console::WriteLine("Local Machine's Host Name: " + strHostName);

  // Then using host name, get the IP address list..
  IPHostEntry^ ipEntry = Dns::GetHostEntry(strHostName);
  array<IPAddress^> ^addr = ipEntry->AddressList;

  for (int i = 0; i < addr->Length; i++)
  {
      Console::WriteLine("IP Address {0}: {1} ", i, addr[i]->ToString());
  }
  Console::ReadKey();
} 
```

我希望这能帮到您。

在我的电脑上测试了 wifi 和 LAN 连接以及一些用于“VMware Player”的虚拟卡，我得到了 4 个 IPv6，然后被 4 个 IPv4 所关注。如果您只需要 IPv4，您可以使用：

```
using namespace System;
using namespace System::Net;

void main(){
  String ^strHostName = String::Empty;
  // Getting Ip address of local machine...
  // First get the host name of local machine.
  strHostName = Dns::GetHostName();
  Console::WriteLine("Local Machine's Host Name: " + strHostName);

  // Then using host name, get the IP address list..
  IPHostEntry^ ipEntry = Dns::GetHostEntry(strHostName);
  array<IPAddress^> ^addr = ipEntry->AddressList;

  for (int i = 0; i < addr->Length; i++)
  {
      if(addr[i]->ToString()->Length < 20){
          Console::WriteLine("IP Address {0}: {1} ", i, addr[i]->ToString());
      }
  }
  Console::ReadKey();
} 
```

然后我得到只有 IPv4。只是数字从 4 开始。但对我来说没关系。您可以添加一个新变量来重新计算编号:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T20:35:33.680

使用[`gethostbyname`](http://msdn.microsoft.com/en-us/library/ms738524(VS.85).aspx)（不推荐）或更新的[`getaddrinfo`](http://msdn.microsoft.com/en-us/library/ms738520(VS.85).aspx). MSDN 链接也包含示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T20:37:16.000

**编辑：好吧，如果我读到您使用的是 VC++ 而不是 c# 会有所帮助.....**

所以你可以忽略我的回答，或者把它作为指导......

给你：

```
using System;
using System.Net;

namespace testProgram
{
    class Program
    {
        static void Main()
        {
            String strHostName = string.Empty;
            // Getting Ip address of local machine...
            // First get the host name of local machine.
            strHostName = Dns.GetHostName();
            Console.WriteLine("Local Machine's Host Name: " + strHostName);

            // Then using host name, get the IP address list..
            IPHostEntry ipEntry = Dns.GetHostEntry(strHostName);
            IPAddress[] addr = ipEntry.AddressList;

            for (int i = 0; i < addr.Length; i++)
            {
                Console.WriteLine("IP Address {0}: {1} ", i, addr[i].ToString());
            }
            Console.ReadLine();

        }
    }

} 
```

这将为您提供所需的所有信息，然后您可以解析出您需要和不需要的信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-12T21:06:03.130

此代码将循环所有适配器并检查第一个已启动的适配器。

```
#include <afxtempl.h>
#include <afxsock.h>
#include <iphlpapi.h>

u_long GetFirstIpAddressUp(SOCKET s)
{
#define MAX_ADAPTERS    30
#pragma comment(lib, "Iphlpapi.lib")
    IP_ADAPTER_ADDRESSES AdapterAddresses[MAX_ADAPTERS];           
    PIP_ADAPTER_ADDRESSES pAdapterAddresses = AdapterAddresses;                                              
    DWORD dwBufLen = sizeof(AdapterAddresses);
    if (GetAdaptersAddresses(AF_INET, 0, NULL, AdapterAddresses,&dwBufLen) == ERROR_SUCCESS)
    {
        do {
            if ((pAdapterAddresses->OperStatus == IfOperStatusUp))
            {
                sockaddr_in* pAdr = (sockaddr_in*)pAdapterAddresses->FirstUnicastAddress->Address.lpSockaddr;
                return pAdr->sin_addr.S_un.S_addr;
            }
        pAdapterAddresses = pAdapterAddresses->Next;
        } while(pAdapterAddresses);
    }
    return INADDR_ANY;  // No adapters are up
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-12T20:31:51.487

我相信您可能需要查看 winsock2.h

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-12T21:07:34.267

当然 getaddrinfo 适用于您的情况，但我想我会提到，如果您不只是想读取 ip，您可以使用 windows [IP Helper api](http://msdn.microsoft.com/en-us/library/aa366073(VS.85).aspx)来完成 ipconfig 实用程序的大部分工作。

# nhibernate - NHibernate：拦截器返回值的含义

> ID：854725
> 
> 赞同：7
> 
> 时间：2009-05-12T20:30:20.007
> 
> 标签：nhibernate, interceptor

我认为这是一个简单的问题，但我的谷歌搜索对此很薄弱。

关于生成的 ID 和级联，我遇到了以下链接中描述的问题：

[https://www.hibernate.org/hib_docs/nhibernate/html/example-parentchild.html](https://www.hibernate.org/hib_docs/nhibernate/html/example-parentchild.html)（朝向底部）

我使用他们建议的拦截器方法修复了它。一切似乎都在工作，所以我很高兴。

也就是说，我不知道返回值的意义是什么，例如：

```
 public override bool OnLoad(object entity, object id, object[] state, string[] propertyNames, IType[] types)
    {
        if (entity is Persistent) ((Persistent)entity).OnLoad();
        return false;
    }

    public override bool OnSave(object entity, object id, object[] state, string[] propertyNames, IType[] types)
    {
        if (entity is Persistent) ((Persistent)entity).OnSave();
        return false;
    } 
```

在这两种情况下都返回 false。

当我在谷歌上搜索 NHibernate 拦截器时，我看到了很多关于如何编写拦截器的示例。有些反而返回 true ( [http://www.lostechies.com/blogs/rhouston/archive/2008/03/27/creating-a-timestamp-interceptor-in-nhibernate.aspx](http://www.lostechies.com/blogs/rhouston/archive/2008/03/27/creating-a-timestamp-interceptor-in-nhibernate.aspx) )。我不知道这里有什么区别。我的代码正在运行，但拦截器对我来说似乎很有用，所以我想更好地理解。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-12T21:02:23.043

我相信返回值应该指示拦截器方法中的状态参数是否已更改。你是对的——目前对谷歌来说这是一个艰难的选择——NHibernate 网站最近移动了，谷歌似乎没有像以前那样找到更多有用的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T20:45:45.533

休伊，

阅读这篇文章，我不是 .net 程序员，但这篇文章非常有用：

[http://knol.google.com/k/fabio-maulo/nhibernate-chapter-11/1nr4enxv3dpeq/14#](http://knol.google.com/k/fabio-maulo/nhibernate-chapter-11/1nr4enxv3dpeq/14#)

> 第 11 章拦截器和事件 应用程序对 NHibernate 内部发生的某些事件做出反应通常很有用。这允许实现某些类型的通用功能，以及 NHibernate 功能的扩展。
> 
> 11.1。拦截器 IInterceptor 接口提供从会话到应用程序的回调，允许应用程序在保存、更新、删除或加载持久对象之前检查和/或操作持久对象的属性。一种可能的用途是跟踪审计信息。例如，以下 IInterceptor 在创建 IAuditable 时自动设置 createTimestamp 并在更新 IAuditable 时更新 lastUpdateTimestamp 属性。

希望它能多一点启发你。

# lucene - 任何人都可以为 Lucene 推荐一些好的教程吗？

> ID：854740
> 
> 赞同：6
> 
> 时间：2009-05-12T20:35:53.990
> 
> 标签：lucene

任何人都可以建议我一些关于 Lucene 的好教程。我正在阅读 Lucene in Action，但它似乎是当前 lucene 的旧版本。大多数方法已弃用。

从哪儿开始？我在谷歌上搜索了一下。

谢谢，卡皮尔

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-12T20:47:27.577

确实有一些变化，但它们并不像看起来那么重要。我能想到的最根本的变化是 IndexSearcher.search() 方法的 api 发生了变化，但让你的代码适应新的用法并不难。

一般来说，旧方法仍然存在，但被标记为已弃用。这是一件好事，因为[参考手册](http://lucene.apache.org/java/2_4_1/api/core/index.html)指定了您应该使用什么。

Lucene in Action 是一本很棒的书。如果可能的话，看看 KenE 推荐的第二版，否则我想你会用第一版、手册和一些常识来获得很长的路要走。正如我所说，这些变化并不像你想象的那样令人生畏。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-12T20:42:19.987

Lucene in Action 第二版可在[此处获得电子版](http://www.manning.com/hatcher3/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-14T06:04:41.987

[Lucidimagine](http://www.lucidimagination.com/)是一家提供与 Lucene 相关的支持和咨询的公司。请参阅[他们的 Lucene 教程](http://www.lucidimagination.com/Community/Hear-from-the-Experts/Articles/Getting-Started-Lucene)。他们也有一个[搜索引擎](http://www.lucidimagination.com/search/)索引大量 Lucene 相关材料。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-07-13T23:20:18.263

我发现这个网站很有用 [http://www.avajava.com/tutorials/lessons/how-do-i-perform-a-range-query.html](http://www.avajava.com/tutorials/lessons/how-do-i-perform-a-range-query.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T10:30:32.350

可以在[此处找到快速入门教程。](http://oak.cs.ucla.edu/cs144/projects/lucene/index.html)

# c# - C#：如何从 mdi 父级中删除滚动条？

> ID：854745
> 
> 赞同：0
> 
> 时间：2009-05-12T20:36:32.867
> 
> 标签：c#, visual-studio-2008

好吧，我刚刚完成了几个相关问题的检查，一个似乎有答案，但链接已损坏，另一个没有很好地说明。

当孩子移出父母的界限时，我只是试图删除 mdi 父母上的滚动条。

[http://img224.imageshack.us/img224/4788/mdiscrollbars.jpg](http://img224.imageshack.us/img224/4788/mdiscrollbars.jpg)

我想要完成的是重现可以出现在 mmo 中的菜单，您可以在屏幕上移动和离开。我以为它有多种形式，但如果我错了或者我做得很艰难，请纠正我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T20:57:31.833

我发现[这个](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/819be1ea-b43f-447c-bb01-bf07ce36dcde)使用互操作。

该链接还显示了如何防止子窗体超出 mdi 父级的边界。

链接中提供的代码可以解决问题，但您必须添加以下 using 指令：

```
using System.Runtime.InteropServices; 
```

如链接线程中所述，有一点闪烁，但您可能想尝试一下。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-07-16T19:45:27.537

这是一种更简单的方法，无需轻弹。看这个：

```
 protected override void WndProc(ref Message m)
    {
        if (m.Msg != 3)
        {
            base.WndProc(ref m);
        }
    } 
```

# sql - 有没有一种方法可以让 CASE WHEN 测试其中一个结果而不是运行两次？

> ID：854747
> 
> 赞同：0
> 
> 时间：2009-05-12T20:37:58.713
> 
> 标签：sql, mysql, code-reuse

有没有办法使用 CASE WHEN 测试中的值作为其结果之一，而无需两次写出 select 语句（因为它可能又长又乱）？例如：

```
 SELECT id,
     CASE WHEN (
         (SELECT MAX(value) FROM my_table WHERE other_value = 1) IS NOT NULL
     )
     THEN (
         SELECT (MAX(value) FROM my_table WHERE other_value = 1
     ) 
     ELSE 0
 END AS max_value
     FROM other_table 
```

有没有办法可以将 SELECT 语句（用于测试）的第一次运行的结果也用作 THEN 值？我尝试在第一次 SELECT 之后使用“AS max_value”，但它给了我一个 SQL 错误。

**更新**：哎呀，正如 Tom H. 指出的那样，我在原来的问题中忘记了“IS NOT NULL”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-12T20:44:06.223

你的陈述甚至运行吗？它不是 CASE 语句中的布尔表达式。如果您不使用布尔值，MySQL 是否默认检查 NULL 值？

我认为这可能是您正在寻找的：

```
SELECT
     id,
     COALESCE(
     (
          SELECT
               MAX(value)
          FROM
               My_Table
          WHERE
               other_value = 1
     ), 0) AS max_value
FROM
     Other_Table 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-12T20:45:12.510

这个例子展示了如何在子查询中准备一堆值，并在外部 SELECT 的 CASE 中使用它们。

```
select
    orderid,
    case when maxprice is null then 0 else maxprice end as maxprice
from (
    select
        orderid = o.id,
        maxprice = (select MAX(price) from orderlines ol 
                    where ol.orderid = o.id)
    from orders o
) sub 
```

不确定这是否是您所追求的，问题尚不清楚（例如，您的 2 MAX() 查询似乎是精确的副本。）

# excel - Excel图表多个Y值与一个X值

> ID：854748
> 
> 赞同：1
> 
> 时间：2009-05-12T20:38:04.113
> 
> 标签：excel, charts

我有多个列代表 Y 值，每个列对应一个特定的 x 值。我正在做一个散点图。在绘制每个系列时，我可以轻松地选择 y 值，因为它们存在于列中，但每列的 x 值是恒定的，我似乎无法弄清楚如何针对几个 y 列值重复恒定的 x 值。有人知道如何在文本框“X-Values”中提供一个可重复的值吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-09T03:13:06.523

像这样排列您的数据，然后选择包含所有 Y 值的单元格范围，然后从功能区中执行插入图表 | 散点图。

这是你所期望的吗？此图表中的每个*系列*代表一*列*数据。X 值不重复，也不需要重复。

![在此处输入图像描述](https://i.stack.imgur.com/hSshT.jpg)

您可能需要稍微调整值的范围，您可以通过“抓取”范围的蓝色/紫色轮廓并调整其大小来做到这一点，例如：

![在此处输入图像描述](https://i.stack.imgur.com/VdCLs.jpg)

如果您不喜欢默认/数字 X 轴标签，则最初将图表创建为折线图，然后格式化系列以使“无折线”出现，结果应该看起来像散点图，除了它将使用类别标签：

![在此处输入图像描述](https://i.stack.imgur.com/F6taq.jpg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-10-03T22:59:41.730

我不知道您是否还需要了解如何执行此操作，但我遇到了同样的问题，这里的第一个答案启发了我尝试一些东西......并且它奏效了。基本上，您只需在单独的列中为相应的 y 值重复 x 值 n 次。假设您的 x 值为 2.5、5、7.5 和 10，您的 y 值为 1、2、3、4、5、6、7、8（每个 x 有 2 个 y），在 A 列中您将输入 2.5， 2.5, 5, 5, 7.5, 7.5, 10, 10，然后在 B 列中输入 1,2,3,4,5,6,7,8。希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T21:10:53.387

如果我正确理解了您的问题，您可能应该将您的数据重塑为一个系列，以便您拥有 2 列和多行。A 列保留 x 值，B 列保留相应的 y 值。

所以，从这里：

```
 A  B  C  D ...
1  10 13 16 17
2  11 14    18
3  12 
```

对此：

```
 A  B  C  D ...
1  xa 10
2  xa 11
3  xa 12
4  xb 13
5  xb 14
6  xc 16
7  xd 17
8  xd 18 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-12T10:33:08.303

假设你有这样的数据：

```
 A  B ...
1  3  2
2     5
3     7 
```

您可以在“公式”->“名称管理器”中创建一个命名公式（让我们称之为`ConstA1`）

```
=Sheet1!$A$1*ROW(Sheet1!$B$1:$B$3)/ROW(Sheet1!$B$1:$B$3) 
```

并在散点图上系列的“系列 X 值”字段中引用它

```
=Book1!ConstA1 
```

`=Sheet1!$B$1:$B$3`在 Y 轴上绘图时。还可以考虑使用数据表。
灵感：[链接](https://www.mrexcel.com/forum/excel-questions/673749-create-one-dimensional-array-single-cell-repeating-cells-value-n-times.html)

# html - 如何在类似于大网站的纯css中进行设计

> ID：854751
> 
> 赞同：0
> 
> 时间：2009-05-12T20:39:25.700
> 
> 标签：html, css, jsf

创建与浏览器兼容且纯 CSS 的网页的最佳实践/方法是什么，当然内容除外。我注意到像 yahoo.com 这样的大牌网站专门使用 CSS 进行布局，这可以很好地在手持设备中呈现内容。由于我有机会重新设计外部网站，我想采用这种方法，但我不知道如何去做。注意：我使用的是 JSF，但标准的 HTML/CSS 建议同样受欢迎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-12T20:58:52.690

EvanK 关于使用 CSS 框架的建议是一个好主意，我个人会推荐[Compass](http://wiki.github.com/chriseppstein/compass)，在我看来它确实代表了一种思考 CSS 的新方式，而且通常非常优雅。许多其他海报都提到了蓝图。Compass 实际上使用 Blueprint（或您选择的其他框架）并将其进一步抽象化，允许您动态生成新的网格模板。从本质上讲，它为您提供了一个更加程序化的框架来使用 Blueprint 和[SASS](http://haml.hamptoncatlin.com/docs/sass)。

然而，在你研究一个框架之前，了解一些基础知识是必不可少的。[W3Schools](http://www.w3schools.com/css/)是一个不错的起点，然后是一些不错的设计博客，例如[A List Apart](http://www.alistapart.com/)。

在最小化跨浏览器问题方面，[CSS 重置](http://developer.yahoo.com/yui/reset/)是必不可少的，这是 Yahoo 采用的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-12T20:54:43.290

我打算推荐相同的..这是我喜欢的两个，似乎是最受欢迎/支持的

[http://www.blueprintcss.org/](http://www.blueprintcss.org/)

[http://960.gs/](http://960.gs/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T20:47:13.737

我认为对你来说一个好的第一步是研究使用某种 CSS 框架。根据 Wikipedia 的说法，此类框架的目标是“允许更轻松、更符合标准的网页样式”，这听起来就像您要问的一样。

至于使用*哪些*CSS 框架，我自己无法推荐任何东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-12T20:55:38.623

你需要学习如何使用 CSS。网上有很多教程。

这是一个很好的：[http ://www.barelyfitz.com/screencast/html-training/css/positioning/](http://www.barelyfitz.com/screencast/html-training/css/positioning/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-12T20:57:37.310

我建议使用 CSS 框架来开始。一旦你习惯了一个框架，你就会为你的页面获得一个很好的网格结构（就像大牌专业人士使用的那样），并迅速加快你的开发时间。

因为你提到了 yahoo，所以我推荐他们的[YUI Grids CSS](http://developer.yahoo.com/yui/grids/)进行布局。

我更喜欢[blueprintcss](http://blueprintcss.org/)，因为它对默认浏览器样式进行了样式重置，并且还具有用于打印的样式表。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-12T21:54:30.650

除了框架之外，为了实现一个跨浏览器兼容的站点，我建议您最初以符合标准的浏览器（如 Firefox）为目标，然后仅在它工作后，将支持扩展到不符合标准的浏览器（如 IE6）。

我的经验是，最初定位非标准浏览器（如 IE6）然后使站点跨浏览器兼容是非常困难的（几乎是不可能的）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-13T02:14:23.867

制作纯 CSS 布局确实没有什么秘诀。用 CSS 布局网站有很多方法，真正需要的是对该技术有扎实的理解。

有些人在框架方面取得了成功。我真的不能说它们是否是一个好主意，但一个好处是它们抽象了构建 CSS 网站的一些坚韧不拔的细节。

但无论如何你都应该学习它。我向真正想坐下来了解 CSS 真正工作原理的人推荐两个网站：

[SitePoint CSS 参考：概念](http://reference.sitepoint.com/css/concepts) - 可能是对 CSS 工作原理最全面的解释，是一本易于阅读的指南

[W3 CSS 2.1 Spec](http://www.w3.org/TR/CSS2/) - 一本难读的书，但它确实解释了一切是如何工作的

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-12T20:57:43.067

尽可能多地了解 CSS。很多时候，人们对 CSS 布局感到沮丧是因为他们不了解所有的来龙去脉。

注意诸如选择器模式匹配之类的事情——这将对简化你的标记产生很大的影响。

请记住，可以将表格用于表格数据。表格标签的存在是有原因的。

一个非常有用的资源：[http ://csswizardry.com/web-design+/](http://csswizardry.com/web-design+/)

# c# - 如何在 SyndicationFeed 对象的序列化输出中添加换行符？

> ID：854758
> 
> 赞同：2
> 
> 时间：2009-05-12T20:40:13.610
> 
> 标签：c#, .net, syndication, syndication-feed

我正在使用[SyndicationFeed](http://msdn.microsoft.com/en-us/library/system.servicemodel.syndication.syndicationfeed.aspx)类来生成一个 Atom 提要和一个 Atom10FeedFormatter 来对其进行序列化。当文件写入磁盘时，我希望能够在元素之间添加换行符。我意识到提要读者不在乎，但是当我通过[http://feedvalidator.org/](http://feedvalidator.org/)运行我的文档时，它会将整个文档视为一行，这使得它可以查看我的错误在哪里，因为每个错误都是在“第 1 行”。

例如，而不是这样的输出：

```
<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom"><title type="text">Title For My Feed</title><subtitle type="text">Subtitle for my feed.</subtitle><id>uuid:d2ad3f53-6f1a-4495-ba92-ab3231413f97;id=1</id><updated>2009-05-12T19:42:56Z</updated><author><name>Matt</name>... 
```

我想得到这样的输出：

```
<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title type="text">Title For My Feed</title>
  <subtitle type="text">Subtitle for my feed.</subtitle>
  <id>uuid:d2ad3f53-6f1a-4495-ba92-ab3231413f97;id=1</id>
  <updated>2009-05-12T19:42:56Z</updated>
  <author>
    <name>Matt</name>
    ... 
```

这是我用来序列化的代码，以防万一：

```
XmlWriter atomWriter = XmlWriter.Create(@"atom.xml");
Atom10FeedFormatter atomFormatter = new Atom10FeedFormatter(TheFeed);
atomFormatter.WriteTo(atomWriter);
atomWriter.Close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T20:48:34.580

XmlWriter 类有一个 Settings 属性，可让您以多种方式格式化 xml，包括行格式和缩进。

这是[MSDN 参考资料](http://msdn.microsoft.com/en-us/library/system.xml.xmlwritersettings_members.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-12T22:07:15.230

[约瑟夫的回答](https://stackoverflow.com/questions/854758/how-can-i-add-line-breaks-to-the-serialized-output-of-a-syndicationfeed-object/854800#854800)因将我指向正确的课程而受到赞誉。以下是寻找 teh codez 的其他人的详细信息。

我所要做的就是告诉 XmlWriter 对象缩进输出。这很容易通过将设置对象的 Indent 属性更改为 true 来实现。所以我序列化提要的原始代码（上面）被编辑如下：

```
XmlWriterSettings WriterSettings = new XmlWriterSettings();
WriterSettings.Indent = true;

XmlWriter atomWriter = XmlWriter.Create(@"atom.xml", WriterSettings);
Atom10FeedFormatter atomFormatter = new Atom10FeedFormatter(TheFeed);
atomFormatter.WriteTo(atomWriter);
atomWriter.Close(); 
```

# c# - 除了 [un] 装箱之外，.NET 的 Dictionary 与 HashTable 还有哪些其他改进？

> ID：854759
> 
> 赞同：4
> 
> 时间：2009-05-12T20:40:53.000
> 
> 标签：c#, data-structures, migration, .net-1.1

试图说服某人从 .NET 1.1 切换

我看到有人说在 .NET 1.1 后使用 Dictionary 类的一个优点是由于不必拆箱/转换对象而提高了性能。除此之外还有其他改进吗？

或者从 .NET 1.1 移出的任何其他一般优势？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-12T20:46:00.777

[乔治](http://en.wikipedia.org/wiki/Name_That_Tune)，我可以用两个词来回答这个问题：

类型安全。

现在我将展开。迁移到 .NET 2.0 的最大好处可能是泛型和泛型集合。与不必对值类型进行装箱和拆箱的性能改进相比，IMO 更大的好处（这并不是什么大不了的事，除非你有大量的整数 ArrayLists 可以连续处理），那就是不必来回转换目的。或者，用两个词来说，“类型安全”。您在编译时就知道集合的基础类型是什么，并且您不能偏离它。使用非泛型集合，您可以将任何旧的东西扔在那里，除非您在投射之前反思类型（这比装箱对性能的影响更大），否则您可能会在糟糕的时候抛出 InvalidCastException .

也就是说，为什么要停在 2.0？.NET 3.0 具有 WCF 和 WPF，它们是很好的新的交流和呈现方式。.NET 3.5 具有 LINQ 和 lambda 表达式，它们*将*改变您处理集合的方式。

告诉你的朋友停止生活在黑暗时代。是时候更新了！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-12T20:57:15.093

对 .NET 1.1 的支持何时停止？它已经不受支持了吗？您看到错误修复的机会有多大？

此外，了解 .NET 1.1 的人数每年都在减少。不久之后，了解 VB6 的人将超过了解 .NET 1.1 的人。

升级的时间已经过去了。除非您仍然需要支持 Windows 2000 或更低版本，否则您没有太多理由不这样做。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-12T20:44:03.760

假设您已经意识到使用强类型集合的一般优势，`null`现在是一个有效值。如果为键查找返回旧的 HashTable `null`，则可能意味着该键不存在，或者可能意味着该键引用该值`null`。你真的不知道。

使用字典，如果您进行直接查找并且键不存在，则会引发异常。

此外，.Net 2.0 集合利用泛型来支持强类型枚举 ( `IEnumerable<T>`)。.Net 中 IEnumerable 的实现使用惰性求值，这使得以前几乎不可能完成的各种有趣的事情变得简单（而且高效！）。10 次中可能有 9 次通过函数传递或返回数组或 ArrayList，您可以使用 IEnumerable 代替。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-12T20:50:54.373

其他优点：

GridView、母版页、站点地图、LINQ！！！！（3.5 框架）

任何开发人员（或公司）都没有理由继续在 VS 2003 中编写**新**代码，或者至少我可以这么认为。

现在，如果它是在 1.1 框架上编写的旧项目，那完全是另一回事了……

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-12T21:21:00.080

从 VS2003 和 .NET 1.1 至少跳到 VS2005 和 .NET 2.0 是非常值得的。.NET Framework 2.0 之后的更高版本似乎都是附加的。没有或没有很多破坏 .NET 类库。他们只是添加了新的命名空间和类。VS2008 以及据我了解的后续版本都将支持向后兼容回 .NET 2.0。这使得升级您的 IDE 几乎是微不足道的（我认为您必须将项目转换为 VS2008 项目类型），并且您可以在仍然使用旧版本的框架的同时获得新的 IDE 增强的好处。我记得我只从 VS2008 IDE 中享受的一些更大的事情是在 ASP .NET 中工作时的拆分视图、新的 CSS 窗口和 javascript 智能感知（VS2008 SP1 我相信这个功能）。

仅从个人经验来看，我们确实在 Active Reports 方面遇到了一些问题。我们必须升级它的版本以使用新的 IDE/框架，当我们从 VS2008 从 VS2005 迁移时，我们的一些 SSIS 包项目没有正确打开，因为我们仍在 SQL Server 2005 上，所以一定要检查你的任何依赖项在您的 2003 IDE 上使用您可能正在运行的任何 3rd 方应用程序。

Ralphondo 是正确的，如果我有代表，我会投票给他。泛型肯定会改变游戏规则，并且可以防止您不得不自己创建类型化集合来获得类型安全。说真的......谷歌搜索你在 .NET 1.1 和更高版本中必须做的事情。区别是白天和黑夜。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-12T20:47:10.557

由于是强类型，`Dictionary<,>`因此在编译时受到限制，因此类型安全。尝试添加不适当的值将导致编译错误。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-12T20:47:57.263

使用泛型可以使您的 Dictionary 类型安全，因此在编译时您会发现可能试图添加错误对象的代码。这比由于意外数据类型而导致的运行时崩溃要好。此外，枚举器是为数据键入的，使其更易于使用。不再需要转换 Current 属性。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-12T20:48:04.797

如果您将主题限制为通用容器，那么不会。但是，.NET 2.0 在其他领域也引入了许多改进。有关更完整的改进列表，请参阅[http://msdn.microsoft.com/en-us/library/t357fb32.aspx 。](http://msdn.microsoft.com/en-us/library/t357fb32.aspx)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-12T20:48:29.820

这不完全是与性能相关的问题，但是 IDE 呢？VS2008 IDE 要好得多，从稳定性到功能，再到附加组件…… winForm 设计器都更容易使用。

# outlook - 如何从 Outlook 表单中删除旧签名？

> ID：854760
> 
> 赞同：0
> 
> 时间：2009-05-12T20:40:53.577
> 
> 标签：outlook, outlook-2007, outlook-2003, outlook-form

我修改了一个现有的表格，并将其作为 .oft 文件保存在我的桌面上。每当我发送此表格时，我都会显示一个旧签名。

如果我双击 .oft 文件，我会看到带有旧签名的正文，然后是下面的新签名。我想删除卡在正文中的旧签名。让我感到困惑的是，当我在 Outlook 表单中打开该文件时，它永远不会在消息中包含签名，这就是为什么当我运行表单时我看不到这个签名，除非我发送它，当我打开它时我会在预览中看到它我看到我的 Outlook 表单的消息。

* * *

我设法将文件另存为html。我看到页面底部的签名。

如何删除或修改 html 文件以删除该签名并取回原始文件。

我还尝试另存为 html，删除签名，保存，然后使用宏加载 html。但是经常无法保存。

```
Sub MakeHTMLMsg()
Set objMsg =3D Application.CreateItem(olMailItem)
Set fso =3D CreateObject("Scripting.FileSystemObject")
Set ts =3D fso.OpenTextFile("c:\testfile.htm", 1)=20
strText =3D ts.ReadAll
objMsg.HTMLBody =3D strText
objMsg.Display
Set fso =3D Nothing
Set ts =3D Nothing=20
Set objMsg =3D Nothing
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-04T22:30:28.843

如果您或合作者不小心在邮件正文（包括签名）中保存了带有 RTF 的 .oft Outlook 表单，据我所知，此富文本将永远卡在 .oft 中（除非您决定破解它在十六进制编辑器中）。正如其他人在网络的黑暗角落所建议的那样，您可以运行表单，删除邮件正文，并将其保存为 .oft - 但不幸的是，这不适用于 RTF。RTF 卡住了。我发现隐藏此文本的唯一方法是使用此 VBScript Outlook 宏将 MailItem 的 BodyFormat 类型更改为纯文本。RTF 字节将保留在您的 .oft 中，但至少没有人会查看它们。

```
Sub ChangeToPlainTextAndPublishForm()
    Dim objOL       ' As Outlook.Application
    Dim objItem     ' As Outlook.ContactItem
    Dim objFD       ' As Outlook.FormDescription
    Const olPersonalRegistry = 2
    Const olDiscard = 1

    Set objOL = CreateObject("Outlook.Application")
    Set objItem = objOL.CreateItemFromTemplate("C:\MyPath\MyForm.oft")
    Set objFD = objItem.FormDescription

    objItem.BodyFormat = OlBodyFormat.olFormatPlain

    'Publish to personal forms library
    With objFD
        .DisplayName = "myForm"
        .PublishForm olPersonalRegistry
    End With
    objItem.Close olDiscard

    Set objFD = Nothing
    Set objItem = Nothing
    Set objOL = Nothing
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-13T22:35:14.800

明白了，添加消息框。然后去运行这个表格。瞧。删除不需要的签名。另存为

谢谢你

# windows-7 - user32.dll 的 Windows 7 RC x86 调试符号

> ID：854765
> 
> 赞同：1
> 
> 时间：2009-05-12T20:42:55.773
> 
> 标签：windows-7

Windows 7 RC x86 符号包似乎不包含`user32.dll`或符号`KernelBase.dll`。我尝试从 microsoft 符号服务器（使用[symchk](http://msdn.microsoft.com/en-us/library/cc267474.aspx)）下载符号，但没有成功。

有没有人能够为Windows 7 候选版本获得调试符号`user32.dll`？`KernelBase.dll`我真的很怀念在调试器中有一个完整的调用堆栈。

# javascript - 没有 jQuery 的 OnClick

> ID：854772
> 
> 赞同：51
> 
> 时间：2009-05-12T20:44:38.610
> 
> 标签：javascript, onclick

如何在`onclick` **没有**jQuery 的情况下制作，无需 HTML 中的额外代码，例如：

```
<a href="#" onclick="tramtramtram"> 
```

只是使用外部 js 文件？

```
<script type="text/javascript" src="functions.js"></script> 
```

* * *

我需要替换这段代码：

```
$("a.scroll-up, a.scroll-down").click(function(){
    SNavigate($(this).attr("href").substr(7));return false;
}); 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2009-05-12T20:52:20.063

当这个锚点只包含一个点击处理的函数时，你可以写

```
document.getElementById('anchorID').onclick=function(){/* some code */} 
```

否则，您必须使用 DOM 方法 addEventListener

```
function clickHandler(){ /* some code */ }
var anchor = document.getElementById('anchorID');
if(anchor.addEventListener) // DOM method
  anchor.addEventListener('click', clickHandler, false);
else if(anchor.attachEvent) // this is for IE, because it doesn't support addEventListener
   anchor.attachEvent('onclick', function(){ return clickHandler.apply(anchor, [window.event]}); // this strange part for making the keyword 'this' indicate the clicked anchor 
```

还记得在加载所有元素时调用上面的代码（例如在 window.onload 上）

- 编辑

我看到你添加了一些细节。如果你想替换下面的代码

```
$("a.scroll-up, a.scroll-down").click(function(){SNavigate($(this).attr("href").substr(7));return false;}); 
```

使用不使用 jQuery 的东西，这应该可以完成工作

```
function addEvent(obj, type, fn) {
        if (obj.addEventListener)
                obj.addEventListener(type, fn, false);
        else if (obj.attachEvent)
                obj.attachEvent('on' + type, function() { return fn.apply(obj, [window.event]);});
}
addEvent(window, 'load', function(){
   for(var i=0, a=document.anchors, l=a.length; i<l;++i){
      if(a[i].className == 'scroll-up' || a[i].className == 'scroll-down'){
         addEvent(a[i], 'click', function(e){ SNavigate(this.href.substr(7)); e.returnValue=false; if(e.preventDefault)e.preventDefault();return false});
      }
   }
}); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-05-12T20:48:56.933

这个怎么样 ：

```
document.getElementById("lady").onclick = function () {alert('onclick');}; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-12T20:52:44.900

W3C 建议：

```
element.addEventListener('click',doSomething,false) 
```

微软使用：

```
element.attachEvent('onclick',doSomething) 
```

您可以进行一些功能检测并确定要使用的调用。

来自[http://www.quirksmode.org/js/events_advanced.html](http://www.quirksmode.org/js/events_advanced.html)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-12T20:52:27.863

在 html 中没有额外的代码，这是一种方法：

```
<html><body><head><script>  // This script could be in an external JS file
function my_handler(elt) {
    alert("Yay!");
    return false;
}

function setup() {
    document.getElementById('lady').onclick = my_handler;
}

window.onload = setup;
</script></head>
<body><a href='#' id='lady'>Test</a></body>
</html> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-12T20:48:25.577

```
<script>
 function tramtramtram(){
     alert("tram it!");
 }
</script>

<a href="#" onclick="tramtramtram()">tramtram</a> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-12T20:51:12.123

var el =document.getElementById('lady'); el.addEventListener("点击", tramtramtram, false );

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-12T21:20:29.317

加载文档时执行此脚本（用您的东西替换警报）：

```
var rgLinks = document.getElementsByTagName("A");

for (var x=0; x<rgLinks.length; x++) {
    el = rgLinks[x];

    if (el.className == 'scroll-down' || el.className == 'scroll-down')
        {
        el.onclick = function () {alert('onclick');};
        }
    } 
```

也许这就是你要问的...

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-12T20:49:49.770

只需使用[onclick](http://www.w3schools.com/jsref/jsref_onClick.asp)属性。

```
<a href="#" onclick="functionName(someParam)"> 
```

或者用javascript来做，

```
document.getElementById("anchorID").onclick = function(){
   some code
}; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-12T20:52:08.800

您需要使用 getElementById 添加 onclick 处理程序。但是，您需要在某处启动您的代码。如果没有 jQuery，您只能使用 body onload 处理程序：

```
<body onload="myinitfunction()"> 
```

myinitfunction 可以在外部 js 文件中。

# powershell - 我应该避免在 Powershell 脚本中使用“dir”别名吗？

> ID：854783
> 
> 赞同：2
> 
> 时间：2009-05-12T20:46:14.003
> 
> 标签：powershell, scripting

powershell 指南建议避免在脚本中使用别名，例如拼写`Get-Content`而不是使用`gc`，以及使用`Foreach-Object`而不是`%`。

在大多数情况下，我认为这是一个很好的建议，但我很难用`dir`别名来跟踪它，至少在与文件系统（相对于注册表等）一起使用时是这样。在我看来，就可读性而言，它`dir`与 一样好或更好。它也不像( ) 或( )`Get-ChildItem`那样神秘，尽管可能没有 cmd.exe 脚本背景的人可能不同意。`gc``Get-Content``lp``Out-Printer`

有人对此有意见吗？我应该继续使用`dir`，还是尝试更“正确”？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-12T21:00:04.373

别名很适合打字。但是在一个脚本中，把它拼出来。你会失去什么？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-12T21:01:13.077

我个人避免在脚本中使用别名，但我在命令行中使用它们。我有两个例外是？用于 Where-Object 和 % 用于 ForEach-Object。我一直在使用这些。但这只是我的个人惯例。因此，没有正当理由不能使用其他内置别名。

但是您绝对应该避免使用非标准别名。Doug Finke 为 PowerShell ISE 制作了一个函数，可将您的别名扩展为真实姓名。

[http://dougfinke.com/blog/index.php/2009/01/03/expand-alias-for-powershell-integrated-scripting-environment/](http://dougfinke.com/blog/index.php/2009/01/03/expand-alias-for-powershell-integrated-scripting-environment/)

我为 PowerShell ISE 创建了一个脚本，它显示了您的脚本所依赖的非标准命令。它还考虑了别名。

[http://einsteintech.spaces.live.com/blog/cns!89E05724AF67A39E!840.entry](http://einsteintech.spaces.live.com/blog/cns!89E05724AF67A39E!840.entry)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-14T11:50:19.957

PowerShell 的理念是在命令提示符下使用您喜欢的任何内容。这就是为什么您将 'ls' 和 'dir' 作为 Get-ChildItem 的别名。但是，在编写脚本、单行代码或将与他人共享的任何内容时，请始终使用完整的命令名称和完整的参数名称以避免混淆。特别是，切勿在脚本中使用自定义别名，因为它们会在您的环境之外破坏脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T23:32:03.530

我不明白为什么......我从来没有避免过“ls”:)

# php - PHP Memcache 用户创建的对象

> ID：854784
> 
> 赞同：1
> 
> 时间：2009-05-12T20:46:59.650
> 
> 标签：php, memcached, user-object

需要一些有关 Memcache 的帮助。

我创建了一个类并希望将其对象存储在 Memcache 中，发现这样做有问题，请告诉我哪里出错了。以下是我的代码

```
// Class defined by me
    class User
    {
    public $fname;
    public $age;        
        /**
         * @return unknown
         */
        public function getfname() {
            return $this->fname;
        }

        /**
         * @return unknown
         */
        public function getage() {
            return $this->age;
        }

/**
         * @return unknown
         */
        public function setfname() {
            return $this->fname;
        }

        /**
         * @return unknown
         */
        public function setage() {
            return $this->age;
        }
    }

//Code for Storing
<?php
$objMemcache = new Memcache();
        $objMemcache->connect('127.0.0.1', 11211);

$obj = new User();
$obj->setfname('John');
$obj->setage(32);

$objMemcache->set('user1', $obj, false, 60);

$obj1 = new User();
$obj1->setfname('Doe');
$obj1->setage(23);

$objMemcache->set('user2', $obj1, false, 60);

var_dump($objMemcache->get('user1'));

?> 
```

问题是当我尝试使用 $objMemcache->get($key) 检索对象时，我无法确定对象是否实际存储在 Memache 中，var_dump 函数什么也不打印。

请帮忙。

* * *

你能解释一下我的代码中的错误吗？

感谢灵魂合并、弗兰克和凯文，解决方案奏效了，只是另一个疑问。

将类变量设为私有可以正常工作，但是当我尝试使用 json_encode() 将类对象转换为 JSON_STRING 时，它再次给了我一个空值，对此有任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T21:18:51.033

你的课错了，试试这个：

```
<?php

// use this to display errors
ini_set('error_reporting',E_ALL);
ini_set('display_errors',true);

// Class defined by me
class User
{
    private $fname;
    private $age;        
    /**
     * @return string
     */
    public function getfname() {
            return $this->fname;
    }

    /**
     * @return string
     */
    public function getage() {
            return $this->age;
    }

    /**
     * @return void
     */
    public function setfname($value) {
            $this->fname = $value;
    }

    /**
     * @return void
     */
    public function setage($value) {
            $this->age = $value;
    }
}

$objMemcache = new Memcache();
$objMemcache->connect('127.0.0.1', 11211);

$obj = new User();
$obj->setfname('John');
$obj->setage(32);
$objMemcache->set('user1', $obj, false, 60);

$obj1 = new User();
$obj1->setfname('Doe');
$obj1->setage(23);
$objMemcache->set('user2', $obj1, false, 60);

var_dump($objMemcache->get('user1')); 
```

# c# - 如何将菜单与 WPF MVVM 合并？

> ID：854786
> 
> 赞同：2
> 
> 时间：2009-05-12T20:47:07.887
> 
> 标签：c#, wpf, mvvm, menu

[我见过](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)的默认 MVVP有多个通过数据模板呈现的 ViewModel 对象。每个 ViewModel 通过自己的属性公开命令。

我想使用菜单合并ViewModel命令，因此选择不同的选项卡时，菜单会根据ViewModel所做的。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-13T12:16:34.547

[此链接](http://kentb.blogspot.com/2009/05/mvvm-infrastructure-activeawarecommand.html)为执行此操作提供了一个很好的框架。

# asp.net-mvc - 为什么微软为 ASP.NET 选择 MVC？

> ID：854807
> 
> 赞同：3
> 
> 时间：2009-05-12T20:49:12.487
> 
> 标签：asp.net-mvc, model-view-controller, design-patterns, mvp, passive-view

除了作为一个 30 年的模式之外，MVC 从来都不适用于当前的应用程序。MVP 是它的继任者，旨在处理 90 年代出现的基于事件的应用程序。Passive View 和 Supervising Controller 似乎已经升到了顶峰。对于这两个，几乎没有必要谈论 MVC/MVP。

具体来说，ASP.NET MVC 中的控制器操作是否会带回创建该视图的视图？在 MVC 中，控制器不会创建视图或与它们对话。将 ASP.NET MVC 称为 MVC 实现有多准确？或者，它的准确名称是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-12T20:59:41.363

我认为是 Ruby on Rails 启发了 MS 创建 asp.net MVC。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-05-14T03:11:02.793

ASP.NET MVC 只是 Microsoft 对在 Ruby on Rails 和 Django 等 Web 框架中成功实现 MVC 的认可。意识到许多 Web 开发人员希望采用更亲力亲为的 Web 开发方法，这种方法包含“固执的”编程模型（约定优于配置）并偏离 ASP.NET WebForms 提供的有状态抽象。

它是 Smalltalk MVC 模式的精确实现吗？不，这是恐慌的结果吗？不。这是 Ruby on Rails 和 Django 都成功的结果吗？是的。

我碰巧喜欢这个模型，因为它包含 .NET 和 ASP.NET 堆栈提供的丰富框架，同时在方法和使用基于约定的开发方面保持简约。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-05-12T21:07:17.200

足够接近，这是一种销售策略。

他们将 ASP.NET 与其他自称为 MVC 的技术进行对比。因此，将其命名为在同一类别中被感知是具有竞争力的。

与准确的技术识别相比，微软更经常通过产品定位获胜。（加上长期交货，恕我直言。）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-12T21:23:06.253

ScottGu 在他关于第一个 MVC 演示的帖子的第一部分中没有找到[答案](http://weblogs.asp.net/scottgu/archive/2007/10/14/asp-net-mvc-framework.aspx)。简短的回答是人们要求它，微软决定接受它。它与当前的 .Net 模型相匹配，可以添加尽可能多的选项，使框架能够达到更大的目标市场，并为开发人员提供适合项目的正确工具。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-14T00:46:20.813

由 ASP.NET MVC 实现的 MVC 不是旧的 MVC 模式。在我称之为“经典”的 MVC 中，视图可以直接但只读地访问模型，在 ASP.NET MVC 中，直接从视图访问业务模型被认为是一种不好的形式。你最终得到的是非常类似于监督控制器 + 被动视图的东西：

```
public class MvcExampleController : Controller
{
    public ActionResult ActionMethod(BoundInputData inputData)
    {
        var results   = DoActualWorkInTheModelWith(inputData);
        var viewModel = CreateViewModelFromThe(results);

        return View(viewModel);
    }
} 
```

对我来说，这看起来更像是一个监督控制器，而不是经典的 MVC。在模型中完成工作后，视图将传递给 ViewModel（又名 PresentationModel）。ViewModel 通常与视图中的 UI 元素具有 1 对 1 的关系，并且可能看起来或可能不像实际模型中的对象。作用于 ViewModel 而不是实际 Model 的 View 对我来说很像 Passive View。

我不会讨论这是否是“真正的”MVC 实现，但如果您的论点是 ASP.NET MVC 不使用现代 Web 设计模式，我不得不不同意。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-12T21:09:51.797

最好的猜测，每个人都听说过 MVC。MVC 作为一种“最佳实践”已经被打败了很长一段时间，因此整整一代（或两、三代）开发人员看到 MVC 并产生快乐的想法。

此外，许多其他框架都以类似的方式支持 MVC，因此微软可能觉得有必要这样做。

简而言之，我非常怀疑它是否有强大的技术原因。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-12T21:32:06.723

您可以使用当前的 ASP.NET 框架推出自己的 MVC，并且仍然保留回发模型。

[http://www.codeproject.com/KB/aspnet/RollingYourOwnMVCwithASP.aspx](http://www.codeproject.com/KB/aspnet/RollingYourOwnMVCwithASP.aspx)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-26T02:45:00.860

这是一个很好的问题，很多人在 MVC 早期都问过这个问题。这是该项目的主要开发人员之一 Phil Haack 的答案！

[http://haacked.com/archive/0001/01/01/everything-you-wanted-to-know-about-mvc-and-mvp-but.aspx](http://haacked.com/archive/0001/01/01/everything-you-wanted-to-know-about-mvc-and-mvp-but.aspx)

检查出来，阅读链接，然后从那里开始。

此外，辩论的答案可能是 S#arp 架构。他们在 MVC 之上构建了一个层，使其更像 MVP。如果您正在寻找这些方面的东西，请查看它们。

祝你好运！

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2009-05-12T21:19:44.433

我认为这更像是一个“恐慌营销决策”，而不是一个技术决策。RoR 每秒都在窃取市场，MSFT 完全惊慌失措，所以 MSFT 觉得他们必须提供一些东西，让他们有机会再次将一些炒作带回“他们的阵营”......

他们还需要通过将这个大肆宣传的词与他们自己联系起来来帮助他们的开发人员重新获得自尊，这样 .Net 开发人员就可以再次照照镜子，而不会因为他们自平台以来不了解 MVC 而感到羞耻选择没有为他们提供这种模式（开箱即用）

对于中等技能 (.Net) 开发人员来说，当中等技能的 RoR 开发人员启动 rake 并在 .Net 开发人员之前完成工作和运行的概念证明时，在不到 15 分钟的时间内创造了一个峰值，这真的很难不觉得自己像个恐龙。已完成启动 vstudio.exe ... ;)

我想这是一个有争议的观点，但这是我的，我会捍卫它直到痛苦的结局......;）

今天有无数这样的例子，是的，MVC 和脚手架会给你一个初始速度提升，是的。但是对于可维护性、代码重用、封装以及几乎所有*真正*重要的事情 - MVC 并不是“灵丹妙药”，而且大多数时候 WebForms 从长远来看要优越得多（当然，除非像卫生纸一样使用）

# java - 使用 maven 通过 JNI 构建/部署/使用项目

> ID：854808
> 
> 赞同：4
> 
> 时间：2009-05-12T20:49:35.043
> 
> 标签：java, maven-2, build-process, java-native-interface

我正在尝试使用 maven 构建一个依赖于 OpenCV 计算机视觉库的 JNI 包装器的项目。我已经能够通过使用 FreeHEP 的 NAR maven 插件在此处“maven-ize”OpenCV 包装器：[http](http://ubaa.net/shared/processing/opencv/) : //ubaa.net/shared/processing/opencv/，但该插件的文档有些缺乏。

我已经能够创建一个依赖于 OpenCV jni 项目（我称之为 OpenCVJava）的项目（imagedetect）。imagedetect 将编译，但是，任何测试、集成测试或包目标都会失败，并显示有关 java.library.path 中缺少库的错误。

```
!!! required library not found : no OpenCV in java.library.path
Verify that the java.library.path property is correctly set and 'libcxcore.so', 'libcv.so', 'libcvaux.so', 'libml.so', and 'libhighgui.so' are placed (or linked) in one of your system shared libraries folder 
```

这尤其令人沮丧——我知道解决这个问题的唯一方法是以某种方式追踪 opencv 库的 .nar 文件，手动提取它们，设置 java.library.path，然后调用 gnaraly java 命令来实际执行具有正确类路径/库路径的测试/应用程序。这是行不通的——特别是如果这个问题持续存在于传递依赖中。

我怎样才能使这个构建/测试/执行系统更干净？我没有使用 FreeHEP，但我想坚持使用 maven，因为它使我们最常见的用例变得更加简单。

FreeHEP Nar 插件：http: [//java.freehep.org/freehep-nar-plugin/intro.html](http://java.freehep.org/freehep-nar-plugin/intro.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-12T21:42:40.310

我对 FreeHEP 不熟悉，但是如果您在设置 surefire 上的 java.library.path 以运行您的测试时遇到问题，我在以下位置找到了一个示例：[http](http://buildanddeploy.com/node/14) ://buildanddeploy.com/node/14 这有点涉及发布，但展示了如何让 maven 将本机库复制到一个目录，然后您将 java.library.path 指向该目录。过去我自己也使用过类似的方法。

还要看错误，是否需要设置 LD_LIBRARY_PATH 来修复它？如果是这样，您也应该在 Maven 中获得此设置。

这是一个如何为surefire设置的示例（来自[http://docs.codehaus.org/display/MAVENUSER/Projects+With+JNI）：maven-surefire-plugin](http://docs.codehaus.org/display/MAVENUSER/Projects+With+JNI) once target/tmplib java.library.tmpdir target/tmplib

# version-control - 对源代码控制中的变更集的好评

> ID：854809
> 
> 赞同：3
> 
> 时间：2009-05-12T20:49:39.193
> 
> 标签：version-control, tfs, changeset

当我们在版本控制系统（例如 TFS）中注册代码时，我们需要制定编写注释的指南。

例如，当我们提交错误修复时，我们会创建一个评论“已修复错误#...”

我们试图就这个话题集思广益，但大多数想法带来的附加值太少。

我将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-12T20:55:39.513

通常，我们在我工作的地方所做的评论是对所做更改的快速概述。一些简短而简单的东西。

最初它似乎没有增加太多价值，但在回顾历史试图找出什么时候发生变化时会很有帮助（不仅仅是“错误#####”）。有几次我需要返回源代码控制历史来尝试查找特定行为或代码段何时发生更改，并且快速概览可以更容易地追踪可能发生的位置。如果您只是给出一个错误编号，那么您必须做更多的工作才能找到该基本信息（拉起错误跟踪器并找到错误）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-13T01:02:49.493

我对这个主题的（相当简洁的）指导是“记录你*为什么*要做出改变而不是*什么*”。

即，您不应该说“MyClass.cs 和 FooBar.cs 中的已修复错误”，因为该评论是相当不相关的——他们只需查看变更集即可找到这些详细信息。与 TFS 一样，将变更集链接到工作项意味着在注释中包含工作项引用是非常多余的。相反，一个简短的句子解释了更改的原因，例如“在编辑器中修复了潜在的 XSS 漏洞”，这是在查看大量更改集历史时最有用的内容。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-12T21:42:28.313

对于将在发行说明中提及的更改，请在更改集注释或链接的错误报告（如果有）中**包含建议的发行说明条目。**

通过写出发行说明条目，您被迫退后一步，从用户的角度查看编辑。这鼓励您简洁地描述问题所在以及修复如何解决问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-12T20:59:39.693

您可以将 TFS 配置为要求任何代码签入都具有与之关联的 TFS 任务。

在我工作的地方使用它的项目团队要求将所有错误和/或功能作为任务输入到 TFS 中 - 并且任何代码签入都与其适用的任务相关联。

评论也是必需的，但他们对您编写的内容没有任何严格的指导方针，除了要注意是否不需要将更改合并到另一个分支。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-12T20:56:28.637

如果更改在某处有关联票证或错误，那么在这种情况下，编号和标题（带有链接）就足够了。

否则，只需说明您实施了哪些更改。定期评论指南适用，您可以查看一些流行的项目日志以查看好的示例。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-06T10:16:24.517

在可能的情况下（例如在使用 TFS 进行错误跟踪和源代码控制时）将签入直接链接到适当的工作项。如果做不到这一点，请在变更集注释中添加工作项/错误 #。这是变更集注释的最低可接受级别。

签入注释应描述所做更改的意图，仅在必要时添加有关更改实现预期结果的方式的详细信息。一个好的起点是相应工作项的标题。

一两句话是评论的一个很好的目标长度。不要太笼统，评论毫无意义（例如“修复 xyz 中的错误”），但也不要在不必要的细节层下隐藏更改的意图。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-12T20:57:12.147

如果可能的话，我喜欢包含对 bug 的引用（票证、问题、它的名称），因为这为更改提供了上下文和动机。另外，我喜欢尽量接近一行来回答“发生了什么变化”和“为什么”这样的问题。在发表评论时，我试图在 6 个月内回想我未来的自己，回顾日志、差异和票证，以了解我到底在想什么。进入太多细节似乎从来没有帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-04-09T11:32:29.960

+1 用于粘贴错误问题标题，该标题应该提供信息。

+1 说明原因，如果需要，除了错误标题。

+1 在您想通知客户时注意发布说明。

+1 用于集成 SCM、错误跟踪和 CI，并使它们在问题/错误上相互链接。

# iis - Windows Server 2003 x64 中的 ActivePDF 工具包

> ID：854812
> 
> 赞同：0
> 
> 时间：2009-05-12T20:50:09.303
> 
> 标签：iis, windows-server-2003, 64-bit

我最近将我的应用程序迁移到了 64 位操作系统（从 32 位 Win2k3）并且发现一个依赖项 - ActivePDF 根本无法在 x64 下运行。我不确定它是设计使然，还是只是没有经过 64 位操作测试。有没有办法让它以某种方式在 32 位模式下运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-12T20:56:34.597

我与 ActivePDF 合作了很多，并且知道他们在支持方面表现出色，如果您有支持合同，我会尝试。

我不知道具体关于 64 位。我们最终将工具包换成 iText，因为当时不支持 Acrobat 9。64位我也有类似的命运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-02-08T22:57:41.343

There was certainly a x64 bug in the ActivePDF toolkit. It ran fine on x64 hosts, as long as it was able to run in an 32bit threat - so you had to configure IIS to provide 32bit support.

The bug was recently fixed, the toolkit now provides native x64 support.

# c# - 哪个正则表达式能够在 C# 的公式中选择 excel 列名？

> ID：854827
> 
> 赞同：3
> 
> 时间：2009-05-12T20:54:36.737
> 
> 标签：c#, regex, excel

我想在 C# 中实现 excel 公式自动填充。

假设这个公式位于 B100：

```
=SUM($B$99:B99) 
```

我想让这个公式在 C100 有所不同：

```
=SUM($B$99:C99) 
```

这个公式只是一个例子。一些真实的例子是：

```
=(SUM($B${0}:B{0})/SUM({1}!$B${0}:{1}!B{0}) -1)

=SUM(B{0}:B{1})

=B{0} + B{1}

=C{0}+ B{1}

=$B${0}+ AC{1} 
```

（考虑 {0} 和 {1} 实际上是数字）

**一般来说，我需要做**的是选择这些列名并“增加”它们。不应更新公式中由 $ 包围的列名。

如何用正则表达式识别这些字段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-13T19:40:18.970

这是一个仅处理公式的正则表达式解决方案。我会把 Excel 的东西留给你。如果您有一组代表您的公式的字符串，您可以通过它运行它们以增加您的列名。

一些评论：

*   **彻底测试！**也许手动做一张表并将您的努力与生成的结果进行比较。
*   这不应意外更改适合单元命名模式的函数名称。如果您知道您的公式具有包含数字的 Excel 函数名称，请留意它们并 - 再次 - **验证结果**。
*   正则表达式不会验证您输入的内容是公式 - 我认为您只是在使用公式。换句话说，我没有检查字符串是否以“=”符号开头。如果您打算通过此方法为其他单元格值提供非公式，则使用 formula.StartsWith("=") 添加检查 if 分支中使用 IsMatch 的位置。要理解我所指的内容，请在我的示例中添加一个额外的测试字符串，例如“Check out T4 generation”——如果没有进行 StartsWith("=") 检查，那么它将匹配并且 T4 将变为 U4。

正则表达式模式实际上是最简单的部分。它只会匹配任何字母数字序列，并忽略 $A$1 和 $A1 类型的单元格。棘手的部分是增加列的逻辑。我添加了评论以澄清这一点，所以请喝杯咖啡并阅读：）

我确信这可以得到增强，但这是我有时间的。

```
using System.Text.RegularExpressions;

static void Main(string[] args)
{
    string[] formulas = { "Z1", "ZZ1", "AZ1", "AZB1", "BZZ2",
                        "=SUM($B$99:B99)","=SUM($F99:F99)", "=(SUM($B$0:B0)/SUM(1!$B$11:22!B33) -1)",
                        "=SUM(X80:Z1)", "=A0 + B1 - C2 + Z5", "=C0+ B1",
                        "=$B$0+ AC1", "=AA12-ZZ34 + AZ1 - BZ2 - BX3 + BZX4",
                        "=SUMX2MY2(A2:A8,B2:B8)",   // ensure function SUMX2MY2 isn't mistakenly incremented
                        "=$B$40 + 50 - 20"          // no match
                        //,"Check out T4 generation!"  // not a formula but it'll still increment T4, use formula.StartsWith("=")
                        };

    // use this if you don't want to include regex comments
    //Regex rxCell = new Regex(@"(?<![$])\b(?<col>[A-Z]+)(?<row>\d+)\b");

    // regex comments in this style requires RegexOptions.IgnorePatternWhitespace
    string rxCellPattern = @"(?<![$])       # match if prefix is absent: $ symbol (prevents matching $A1 type of cells)
                                            # (if all you have is $A$1 type of references, and not $A1 types, this negative look-behind isn't needed)
                            \b              # word boundary (prevents matching Excel functions with a similar pattern to a cell)
                            (?<col>[A-Z]+)  # named capture group, match uppercase letter at least once
                                            # (change to [A-Za-z] if you have lowercase cells)
                            (?<row>\d+)     # named capture group, match a number at least once
                            \b              # word boundary
                            ";
    Regex rxCell = new Regex(rxCellPattern, RegexOptions.IgnorePatternWhitespace);

    foreach (string formula in formulas)
    {
        if (rxCell.IsMatch(formula))
        {
            Console.WriteLine("Formula: {0}", formula);
            foreach (Match cell in rxCell.Matches(formula))
                Console.WriteLine("Cell: {0}, Col: {1}", cell.Value, cell.Groups["col"].Value);

            // the magic happens here
            string newFormula = rxCell.Replace(formula, IncrementColumn);
            Console.WriteLine("Modified: {0}", newFormula);
        }
        else
        {
            Console.WriteLine("Not a match: {0}", formula);
        }
        Console.WriteLine();
    }
}

private static string IncrementColumn(Match m)
{
    string col = m.Groups["col"].Value;
    char c;

    // single character column name (ie. A1)
    if (col.Length == 1)
    {
        c = Convert.ToChar(col);
        if (c == 'Z')
        {
            // roll over
            col = "AA";
        }
        else
        {
            // advance to next char
            c = (char)((int)c + 1);
            col = c.ToString();
        }
    }
    else
    {
        // multi-character column name (ie. AB1)
        // in this case work backwards to do some column name "arithmetic"
        c = Convert.ToChar(col.Substring(col.Length - 1, 1));   // grab last letter of col

        if (c == 'Z')
        {
            string temp = "";
            for (int i = col.Length - 1; i >= 0; i--)
            {
                // roll over should occur
                if (col[i] == 'Z')
                {
                    // prepend AA if current char is not the last char in column and its next neighbor was also a Z
                    // ie. column BZZ: if current char is 1st Z, it's neighbor Z (2nd Z) just got incremented, so 1st Z becomes AA
                    if (i != col.Length - 1 && col[i + 1] == 'Z')
                    {
                        temp = "AA" + temp;
                    }
                    else
                    {
                        // last char in column is Z, becomes A (this will happen first, before the above if branch ever happens)
                        temp = "A" + temp;
                    }
                }
                else
                {
                    temp = ((char)((int)col[i] + 1)).ToString() + temp;
                }
            }
            col = temp;
        }
        else
        {
            // advance char
            c = (char)((int)c + 1);
            // chop off final char in original column, append advanced char
            col = col.Remove(col.Length - 1) + c.ToString();
        }
    }

    // updated column and original row (from regex match)
    return col + m.Groups["row"].Value;
} 
```

* * *

结果应如下所示（为简洁起见，我删除了单元格分解）：

```
Formula: Z1
Modified: AA1

Formula: ZZ1
Modified: AAA1

Formula: AZ1
Modified: BA1

Formula: AZB1
Modified: AZC1

Formula: BZZ2
Modified: CAAA2

Formula: =SUM($B$99:B99)
Modified: =SUM($B$99:C99)

Formula: =SUM($F99:F99)
Modified: =SUM($F99:G99)

Formula: =(SUM($B$0:B0)/SUM(1!$B$11:22!B33) -1)
Modified: =(SUM($B$0:C0)/SUM(1!$B$11:22!C33) -1)

Formula: =SUM(X80:Z1)
Modified: =SUM(Y80:AA1)

Formula: =A0 + B1 - C2 + Z5
Modified: =B0 + C1 - D2 + AA5

Formula: =C0+ B1
Modified: =D0+ C1

Formula: =$B$0+ AC1
Modified: =$B$0+ AD1

Formula: =AA12-ZZ34 + AZ1 - BZ2 - BX3 + BZX4
Modified: =AB12-AAA34 + BA1 - CA2 - BY3 + BZY4

Formula: =SUMX2MY2(A2:A8,B2:B8)
Modified: =SUMX2MY2(B2:B8,C2:C8)

Not a match: =$B$40 + 50 - 20 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-13T05:19:17.270

你确定你没有把这弄得太复杂，对吧？这是 Excel 本机所做的事情。示例：在上面的示例中突出显示单元格 B100。请注意，在单元格的轮廓中，单元格的右下角有一个小黑框。这使您可以自动填充。单击该黑框并将其向右拖动（到单元格 C100）。您应该只对一列进行自动填充，C100 应该有 =SUM($B$99:C99)。如果你改为向下拖动，你会得到 =SUM($B$99:B100)。

如果您的目标是在 C# 中重复这种行为，我猜想做到这一点的最佳方法是弄清楚如何连接到 Excel 的 AutoFill 函数。我不知道你在 C# 中是如何做到这一点的，但它们在 VBA 中肯定是可用的（你可以只录制一个宏，执行上述步骤，然后查看生成的代码以查看 AutoFill VBA 代码）。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-13T13:46:44.523

+！用于自动化 Excel 并在那里完成工作。

但是，如果你一心想用 C# 来做，你可以从这里开始[http://ewbi.blogs.com/develops/2004/12/excel_formula_p.html](http://ewbi.blogs.com/develops/2004/12/excel_formula_p.html)。也许一旦你消化了所有用于标记公式的规则，你就可以创建一个 RE。

# c++ - 何时以及为什么会生成 std ::__non_rtti_object 异常？

> ID：854864
> 
> 赞同：9
> 
> 时间：2009-05-12T21:02:11.077
> 
> 标签：c++, exception, visual-studio-2005, rtti

我正在使用 Visual Studio 并执行有效的动态转换。RTTI 已启用。

编辑：更新代码更真实

```
struct base
{
    virtual base* Clone()
    {
        base* ptr = new base;
        CopyValuesTo( ptr );
        return ptr;
    }
    virtual void CopyValuesTo( base* ptr )
    {
       ...
    }
    virtual ~base()
    {
    }
}

struct derived : public base
{
    virtual base* Clone()
    {
        derived* ptr = new derived;
        CopyValuesTo( ptr );
        return ptr;
    }
    virtual void CopyValuesTo( base* ptr )
    {
       ...
    }
    virtual ~derived()
    {
    }
}  

void Class1::UseNewSpec( base* in_ptr ) //part of a totally unrelated class
{
    derived* ptr = dynamic_cast<derived *>(in_ptr);
    if( !ptr )
       return;
    delete m_ptr;
    m_ptr = ptr->Clone(); //m_ptr is a member of Class1 of type base*
}

//usage : 
Class1 obj;
derived new_spec; 
obj.UseNewSpec( &new_spec ); 
```

我的调试器说在抛出异常时 in_ptr 是正确的类型。谷歌似乎特别没有帮助。有任何想法吗？干杯。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-12T21:08:05.873

[https://docs.microsoft.com/en-us/cpp/cpp/typeid-operator?view=vs-2019](https://docs.microsoft.com/en-us/cpp/cpp/typeid-operator?view=vs-2019)有关于 __non_rtti_object_exception 的信息。

来自 MSDN：

> 如果指针未指向有效对象，则抛出 __non_rtti_objectexception，表示尝试分析触发错误的 RTTI（如访问冲突），因为该对象在某种程度上是无效的（错误的指针或代码未编译/GR)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-12T21:06:47.433

围绕 dynamic_cast 的 RTTI 异常、失败或错误可能意味着您执行了非法转换。 `dynamic_cast<derived*>(ptrToBase)`当且仅当类`derived`和类`base`都满足以下约束时才有效：该类或其基类之一具有虚拟成员函数。

这个虚成员函数可以是任何东西，包括析构函数。如果您没有任何其他成员函数，您可以尝试：

```
struct base
{
    virtual ~base(){}
    ...
}

struct derived : public base
{
    ...
} 
```

现在`base`有一个虚成员函数，派生的也有。尝试一下，看看它是否能解决您的问题。

编辑添加：

@carleeto - 在“它已经有一个虚拟析构函数”中，它是否==base？

如果派生具有虚拟析构函数但基是非虚拟 dtor，那么您仍然可能会收到此错误。

此外，您应该验证对象没有被破坏——一旦析构函数运行，调用 dynamic_cast 就不再安全了。尝试向 ctors 和 dtors 添加跟踪。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-12T21:30:33.293

我根据你的伪代码运行了一个测试，它可以工作。因此，如果您的构建配置中真正启用了 RTTI，那么它一定是您发布的内容中未捕获的另一个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-12T21:25:08.183

确保在所有源文件中都启用了 RTTI。

否则指针无效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-12T21:07:23.673

是否`base`包含任何`virtual`方法？它必须为了`dynamic_cast`工作。

# installation - 如何制作简单包装 EXE 文件的 MSI

> ID：854873
> 
> 赞同：34
> 
> 时间：2009-05-12T21:06:25.407
> 
> 标签：installation, windows-installer

经过太多的实验，我得出的结论是，Windows Installer 只是一种糟糕的技术。但客户需要 MSI 文件。

那么，如何创建一个 MSI 文件，将 EXE 文件提取到临时目录并使用与传递给 EXE 文件的选项相同或相似的选项运行它？

*[Msiexec（命令行选项）](http://technet.microsoft.com/en-us/library/cc759262.aspx)*中解释了 MSI 的选项（MSI 的低级“运行”是 msiexec 选项 package.msi）。

编辑：mjmarsh 的 WiX 解决方案看起来很有效。我只是还没有机会尝试（关键时间）。如果它有效，我会接受它。

编辑：它不起作用。缺少的部分：似乎没有有人看管/无人看管。

无论如何，唯一能完成这项工作的就是让自定义操作终止其父进程！

编辑：所以有人发布作为进一步的答案，将整个事情包装为安装后的自定义操作。理论上是可能的，但由于可能需要重新启动（感谢 MS 的 .NET 4 有时需要重新启动），我们必须做进一步的黑客攻击。所以从优势矩阵来看：

```
Transparency: No. One big custom action.
Customizability: No.
Standardization: No. 
Management and reporting: No. Appears to work but will not.
Security: No benefit.
Validation: No. The hackery required to survive reboot makes this sure to not work.
Resiliency: Completely defeated.
Rollback: No. Rollback didn't work when we were using MSI anyway.
Patching & Updates: No. We have a local solution anyway.
Logging: No. Appears to work but will not. 
```

没有意义。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-12T21:27:58.087

嗯，有免费的方式和$$$方式。我无法在此处记录所有内容，但这应该可以帮助您入门。

顺便说一句，是的，Windows Installer 是一项令人抓狂的技术。很多时候，我认为一项任务很简单，但实际上它变得复杂了。你一定要沉浸其中才能理解它。

无论如何，这里是：

**免费：WiX**（[**这里**](http://wix.sourceforge.net/)）

这是从一组 XML 配置文件生成 MSI 文件的免费工具。我会让你在网上找到教程，但这是症结所在：

您可以使用 WXS 文件中的以下标记将 EXE 压缩到安装程序中：

```
<Binary Id="MYEXE" src="<path to my exe?"/> 
```

然后您可以创建一个自定义操作来启动您的 EXE 文件：

```
<CustomAction Id="EXECA_CALLMYEXE" Return="check" Execute="deferred" BinaryKey="MYEXE"
      ExeCommand="my command line"/> 
```

然后你将你的自定义操作插入到`InstallExecuteSequence`适当的位置（我几乎总是在`InstallInitialize`和之间的某个地方运行我的`InstallFinalize`）

```
<InstallExecuteSequence>
   <Custom Action="EXECA_CALLMYEXE" After="InstallInitialize"><![CDATA[Not REMOVE]]></Custom> 
```

**$$$: 获取 InstallShield** ([**这里**](http://www.installshield.com/))

首先创建一个“基本 MSI”项目，并确保您说您*不希望生成 setup.exe*。您可以在 Release 设置中进行设置。

然后你基本上做与 WiX 相同的事情，但你有一个 UI。

*   您可以通过使用直接编辑器并将您的 EXE 文件放在“二进制”表中来指定您的帮助程序 EXE 文件
*   您可以创建自定义操作以从左侧树中的“自定义操作”节点启动该 EXE 文件
*   您可以插入自定义操作，方法是选择“安装序列”并将其放在我之前所说的和`InstallExecuteSequence`之间的某个位置。`InstallInitialize``InstallFinalize`

对不起，我不能更详细，但这应该是一个好的开始。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-12T21:27:22.317

我认为创建 .MSI 文件的最简单方法是使用[WiX](http://wix.sourceforge.net/)。

[WiX 教程中的第 1 课](http://www.tramontana.co.hu/wix/lesson1.php)是创建简单安装所需的全部内容。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-06-30T02:44:25.247

约书亚，我非常理解你的沮丧。MSI 至少可以说很古怪——一种全新的部署方式。尽管如此，正确应用 MSI 仍可提供最佳部署，尤其是对于企业客户而言。

您的安装程序 EXE 执行哪些操作？它主要是文件复制、一些 COM 注册和一些注册表写入，还是运行复杂的安装逻辑、设置数据库等......？我问的原因是因为它可能会很快为您创建一个运行良好的 WIX MSI，因此您可以放弃 EXE 方法。

从 MSI 内部运行 EXE 确实是可能的，但它需要正确的排序，并且它保证比简单的 MSI 给你带来更多的忧郁。如果应用程序很小，并且在安装过程中没有做任何疯狂的事情，我很乐意为您提供基本的 WIX 转换。

*   **[部署工具及其优缺点总结](https://stackoverflow.com/a/1546941/129130)**
*   **[使用 MSI 文件的优点](https://serverfault.com/a/274609/20599)**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-23T09:45:41.340

添加到`weir's`答案，更改`custom action attribute`如下：

```
<!--Run Action-->
    <CustomAction Id="RunWrappedExe"
                  Return="asyncNoWait"
                  FileKey="ApplicationFileId"
                  Execute="deferred"
                  ExeCommand=""
                  HideTarget="no"
                  Impersonate="yes"/> 
```

设置`Return=asyncNoWai`不等待`exe`返回。安装程序完成它的工作并正常关闭。同时，`exe`继续执行。

-马杜雷什

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-11-03T19:47:50.153

没有解决方案。我们去了 NSIS，因为由于 MSI 嵌套问题，企业 MSI 安装无论如何都会被破坏（有一天*尝试*从 MSI 内部安装 EXE 包装 MSI）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-11-04T09:36:33.550

维克斯可以做到。这是我的 wix 3.5 示例代码：

```
<?xml version='1.0'?>
<Wix xmlns='http://schemas.microsoft.com/wix/2006/wi'>
   <Product Id='*' UpgradeCode="11111111-2222-3333-4444-555555555555" 
        Name='My Setup' Language='1033' Version='1.0.0.0' 
        Manufacturer='Your company'>

    <Package Description='pak' InstallerVersion='200' Compressed='yes' />

    <Media Id='1' Cabinet='setup.cab' EmbedCab='yes' />

    <Directory Id='TARGETDIR' Name='SourceDir'>
        <Directory Id="TempFolder">
            <Directory Id="INSTALLLOCATION" Name="~_tmpdir">
                <Component Id='MyComponent' DiskId='1' Guid=''>
                    <File Id="File0" Name="setup.exe" Source="setup.exe" />
                    <File Id="File1" Name="file1.txt" Source="file1.txt" />
                </Component>
            </Directory>
        </Directory>
    </Directory>

    <Feature Id='InstallFeature' Title='Install Feature' Level='1'>
        <ComponentRef Id='MyComponent' />
    </Feature>

    <!-- Run Action -->
    <CustomAction Id="RunWrapExe" Return="ignore" Execute="deferred" 
                  FileKey="File0" ExeCommand="setup.exe param here"  
                  HideTarget="no" Impersonate="no" />

    <InstallExecuteSequence>
        <Custom Action="RunWrapExe" 
                After="InstallFiles">NOT REMOVE~="ALL"</Custom>
    </InstallExecuteSequence>

   </Product>
</Wix> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-21T09:34:20.120

如果您不想管理 MSI，而只执行 EXE，请尝试[Exe to MSI Converter Free](http://download.cnet.com/Exe-to-Msi-Converter-Free/3000-2216_4-10969236.html)。您只需输入 EXE 的路径并获得 MSI。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-17T19:45:33.263

还有一个[免费版本的 MSI Wrapper](http://www.exemsi.com/getting-started)。它还支持卸载和升级。此外，它只会在“添加”或“删除”程序中创建一个条目。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-07-21T00:24:43.173

试试这个：

在 MSI 包中，有一个行为调用“安装后启动应用程序”，这意味着您的 exe 文件将在 MSI 安装后执行（MSI 已关闭）。

尝试在那里执行你的exe，所以当你的exe调用其他MSI包时，它不会与第一个冲突。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-11-27T10:57:40.020

我遇到了同样的问题（包装 EXE，从 EXE 调用其他 MSI，包括 .net 设置等），这是我的解决方案：

我使用 InstallAware 构建安装程序 exe。它有自己的 MSI Wrapper，用 MSI 包装生成的 EXE。

它工作正常，EXE 可以毫无问题地调用其他 MSI（包括 .net 设置、其他 3rd 方设置），但这是因为启动 MSI 在启动设置 EXE 文件后结束（“返回”）权限，这样它们避免了递归 MSI 调用的 MSI 限制。

但是 - 一些使用 MSI 部署工具的客户（公司）要求 MSI（msiexec）只有在设置过程结束后才能返回（结束），这是上述解决方案的问题。

所以 - 要解决这个问题：

还有另一个 MSI Wrapper (exemsi.com) 生成仅在 EXE 设置结束后返回的 MSI，但要使用它，您必须使用 InstallAware 的另一个唯一选项：

InstallAware 可以选择使用自己的本机引擎生成 EXE 设置，而不是基于 Windows Installer 引擎，以避免 MSI 递归限制。将这两者结合起来，您就有了完美的解决方案。

希望这会对某人有所帮助，尽管自从这个问题首次发布以来已经过去了很多年。

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2015-11-13T07:25:27.757

简单的技巧：

[项目形象](http://i.stack.imgur.com/my6E8.png)

```
using System;
using System.Diagnostics;
using System.IO;
using System.Reflection;
using System.Runtime.InteropServices;

namespace Setup
{
    internal class Program
    {
        [DllImport("kernel32.dll")]
        private static extern IntPtr GetConsoleWindow();

        [DllImport("user32.dll")]
        private static extern bool ShowWindow(IntPtr hWnd, int nCmdShow);

        private static void Main(string[] args)
        {
            ShowWindow(GetConsoleWindow(), 0);
            Stream st = Assembly.GetExecutingAssembly().GetManifestResourceStream("Setup.MSI.Temp.msi");
            string path = Path.Combine(System.IO.Path.GetTempPath(), "Temp.msi");
            using (var fileStream = new FileStream(path, FileMode.Create, FileAccess.Write))
            {
                st.CopyTo(fileStream);
            }
            Process p = new Process();
            p.StartInfo.FileName = path;
            p.Start();
            p.WaitForExit();
            File.Delete(path);
        }
    }
} 
```

* * *

## 回答 #12

> 赞同：-4
> 
> 时间：2015-09-26T01:36:57.550

不，伙计，只需使用 Inno Setup 的向导。它会生成一个设置 EXE，但不会生成一个 MSI。大约 5 分钟，您将拥有一个 Windows 安装程序。

只需[下载](http://www.jrsoftware.org/isdl.php#stable)它，安装它，将其指向您的 EXE，然后按照屏幕上的提示进行操作

# mysql - 在 Rails 中处理许多传入的电子邮件：MySQL vs. Imap / Pop3 vs. 其他解决方案

> ID：854878
> 
> 赞同：0
> 
> 时间：2009-05-12T21:07:00.617
> 
> 标签：mysql, ruby-on-rails, performance, email, parsing

在我正在开发的应用程序中，用户可以将他们的电子邮件帐户转发到我们系统中的地址（例如 email@userid.amazingstuff.com ）。他们为什么要这样做并不重要，但我需要一些专业的建议来解决这个问题。

基本思想是，我们的邮件服务器接收传入（转发）的邮件，并且 mailpoller（循环运行）从邮件服务器下载邮件，处理它们（获取文本，将它们分配给帐户等）并保存它们通过“IncomingMail”ActiveRecord 模型。

但我不确定轮询器应该如何连接服务器？通过 Imap/Pop？或者我应该使用 MySQL 将邮件存储在邮件服务器上并直接连接到数据库？或者这是一个坏主意？

我需要一个快速、可靠和可扩展的系统。

谢谢你的建议！

* * *

**更新**
我认为像 MySQL 这样的数据库总是比解析文件系统快。它还应该易于扩展。我没有考虑使用 DBMail ( [http://www.dbmail.org/](http://www.dbmail.org/) )。有没有人使用这个解决方案的经验？或任何进一步的提示/评论？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-08-08T18:16:39.757

Pop 应该可以工作，在这里查看一些示例代码： [http ://www.ruby-doc.org/stdlib/libdoc/net/pop/rdoc/classes/Net/POP3.html](http://www.ruby-doc.org/stdlib/libdoc/net/pop/rdoc/classes/Net/POP3.html)

# asp.net - 如何从 WebService 中捕获所有异常？

> ID：854886
> 
> 赞同：0
> 
> 时间：2009-05-12T21:09:25.043
> 
> 标签：asp.net, web-services

我有一个对远程 Web 服务的 Web 引用，它在几个不同的类中被调用。我只想捕获来自此 Web 服务的所有异常。我怎样才能做到这一点（例如扩展它的基础、自动生成的类）而不干扰和修改所有上层代码？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2009-05-12T21:20:17.180

你不能，你为什么要这样做？“捕获所有异常”或“处理所有异常”几乎总是一个错误。你想达到什么目的？

* * *

1.  我建议您将其记录在服务器上，而不是客户端上。
2.  当你对上层隐藏异常时你会做什么？假装没发生？

将 SoapException 包装在您自己的一个中可能是有意义的。也许。那只是因为 SoapException 非常特定于 Web 服务。在这种情况下，是的，您需要将每个调用包装在 try/catch 中。最好的方法是在外观类中，它也可以具有用于包装 SoapException 或将其转换为您自己的代码的通用代码。

尽管如此，除非您准备好控制代码生成，否则您最终还是要手动完成。

# ruby-on-rails - 输出原始 javascript 的 RJS 方法

> ID：854892
> 
> 赞同：0
> 
> 时间：2009-05-12T21:10:41.953
> 
> 标签：ruby-on-rails, rjs

我有一个页面，我在其中从一系列选择框中动态添加元素。我正在使用 RJS 来执行此操作，并且效果很好。现在，div 中的这些元素是一系列带有删除按钮的元素，以防用户想要删除文本区域。这是我碰壁的地方。

这是运行删除按钮的代码。据我所知，这很好用：

```
<%= link_to image_tag("/images/button_delete.gif", :alt=>"Delete"), :controller=>"report", :action=>"remove", :id=>@sentence.id %> 
```

在我的报表控制器中，上面的代码调用了这个非常简单的方法：

def remove @sentence_id = params[:id] end

同样，我认为这是有效的。现在，当我通过点击按钮激活此操作时，我们转到 RJS 文件 remove.rjs：

```
page.remove 'sentence_'+@sentence_id 
```

这就是我在浏览器中得到的，而不是一个愉快地删除的元素！

```
try 
{
     Element.remove("sentence_63");
} 
catch (e) 
{ 
     alert('RJS error:\n\n' + e.toString()); 
     alert('Element.remove(\"sentence_63\");'); 
     throw e; 
} 
```

我的理解是，当当前上下文中没有页面时会发生这种情况。这方面的在线文档有点薄。

任何帮助表示赞赏！干杯，亚伦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T21:46:08.383

尝试链接到远程。这将为您构建 ajax 调用，并应从页面中删除该元素。

然后 link_to_remote 语法与 link_to 语法略有不同，所以也不要让你绊倒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T22:04:43.440

您的删除链接设置为普通链接，即

```
<a href="/report/remove" id="sentence_63">
  <img src="/images/button_delete.gif" alt="Delete" />
</a> 
```

这会触发一个正常的 HTTP 请求。由于您的意图是触发 AJAX 请求，请尝试 PJ Davis 的推荐并使用[`link_to_remote`](http://api.rubyonrails.org/classes/ActionView/Helpers/PrototypeHelper.html#M001613)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T22:13:02.723

由于您的`remove`函数似乎并未真正删除记录，因此如果您只想从页面中删除 HTML 元素，您可以使用Elements`link_to_function`的 Prototype[`remove()`方法](http://www.prototypejs.org/api/element/remove)。此外，如果您有最新版本的 Rails（例如 2.3.2），您可以利用[`dom_id`帮助](http://api.rubyonrails.org/classes/ActionView/Helpers/RecordIdentificationHelper.html#M001606)程序自动生成`sentance_id`ID 属性

`<%= link_to_function(image_tag("button_delete.gif", :alt=>"Delete"), "$('#{dom_id(@sentence}').remove();" %>`

像这样的方法可以帮助减少控制器中的方法数量（除非您打算在控制器中做其他事情）

# flash - Flash AS3 - 对象未设置为空

> ID：854897
> 
> 赞同：2
> 
> 时间：2009-05-12T21:13:03.790
> 
> 标签：flash, actionscript-3

我有我在 Flash 中构建的菜单系统，它允许您选择一个项目并将其向上或向下移动。如果从菜单中删除对象，我希望将所选项目设置为 null，因此它不会再尝试移动。

我有一个全局（用于当前影片剪辑时间线）变量：

```
var selectedPlaylistItem:MovieClip; 
```

它存储选择了哪个菜单项（菜单项只是电影剪辑），如果删除了该项目，我将所选项目设置为空：

```
function removeFromPlaylist(sender:playlist_content_item) {
    if(sender == selectedPlaylistItem) {
        //Not sure why this isn't working, but at some point I need to figure it out.
        selectedPlaylistItem = null;
        trace(selectedPlaylistItem); 
```

该跟踪将显示 null 没有任何问题，但在我的下一个向上移动项目的函数中，在我将其设置为 null 之后，它仍然设置为它被删除之前的对象：

```
function playlistUp(sender:MovieClip) {
    trace(selectedPlaylistItem); 
```

该跟踪将显示原始对象。

有谁知道为什么这不起作用？为什么在这样设置后它不保持为空？

谢谢

* * *

更新：

所以我尝试了这个，看看我是否能弄清楚发生了什么：

```
 this.selectedPlaylistItem = null;
    trace(selectedPlaylistItem);
    setTimeout(function() {trace(selectedPlaylistItem);}, 4000); 
```

但是当跟踪在 4 秒后发生时，它说它仍然是选定的对象，即使紧随其后的跟踪将其显示为空，并且我在代码中到处查看，但没有任何地方会被重置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-13T15:11:05.370

这段代码“生活”在哪里？如果它在时间线上，则可能会再次调用您设置 selectedPlaylistItem 的代码，无论如何，我会在您设置 selectedPlaylistItem 的位置粘贴一些跟踪或断点，以查看它是否被意外调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T21:30:04.917

据我所见，它应该保持为空。您能否发布一些其他代码，即在什么上下文中调用这两个函数？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-16T19:45:05.743

您的代码是否恰好超过两帧或更多？我的猜测是它再次运行代码。因此，在脚本的进程中，当当前帧尚未渲染时，它将被设置为 null，但如果它循环回到（比如说）第 1 帧，那么它可能会被调用一些代码来再次设置该变量，因此您会在 4 秒后看到它设置为某个值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T23:18:10.603

如果`selectedPlaylistItem`在您运行时在屏幕上可见，请在`removeFromPlaylist()`将其归零之前尝试从显示列表中删除该对象。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2009-05-13T15:20:52.297

是否已从对象中删除所有事件侦听器和/或您是否使用[弱引用](http://www.gskinner.com/blog/archives/2006/07/as3_weakly_refe.html)？：

> 弱引用是垃圾收集器不计数的引用（即，它不计入引用计数，并且不遵循标记清除）。这意味着如果一个对象的唯一引用是弱引用，它将在下一次 GC 扫描时可用于收集。
> 
> 与事件侦听器关联的引用经常被开发人员忘记，这通常会导致侦听器永远不会从内存中删除。这就是为什么弱引用事件侦听器在 AS3 中如此方便 - 如果您忘记删除侦听器，您不会妨碍垃圾收集器收集对象的能力。

```
// params: eventName, listener, capturePhase, priority, useWeakReference
someObj.addEventListener("eventName",myFunct,false,0,true); 
```

# language-agnostic - 如何使用 md5 计算碰撞的可能性？

> ID：854899
> 
> 赞同：0
> 
> 时间：2009-05-12T21:13:34.477
> 
> 标签：language-agnostic, statistics, md5, hash

我有长度可以在 1 到 256 个字符之间变化的键`*`；如何计算使用[md5](http://en.wikipedia.org/wiki/MD5)时任意两个键发生碰撞的概率（尝试每个键的蛮力解决方案）？

`*`字符集仅限于`[a-z.-]`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-12T21:18:46.667

看看[生日悖论](http://en.wikipedia.org/wiki/Birthday_paradox)，这将帮助您分析这一点。简而言之，由于 MD5 是 128 位散列，您需要 2 ^(64)项才能将冲突的可能性上升到 50%。那里有一个假设，即 MD5 均匀分布在 128 位空间上，我相信它不会这样做，但会接近。

如果您想了解这些数字是如何与您的密钥空间相抗衡的，假设您的所有密钥都是 256 个字符，您有 26 ^(256)个可能的密钥，或者 2 ^(1023)，当然之后您有 100% 的碰撞机会2 ^(128)键 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-12T21:16:49.087

检查[生日问题](http://en.wikipedia.org/wiki/Birthday_problem)。这正是您正在寻找的。

# treeview - 尝试将 HierarchicalDataTemplate 的 ItemsSource 属性绑定到 CollectionViewSource（以执行分组和过滤）

> ID：854903
> 
> 赞同：2
> 
> 时间：2009-05-12T21:14:33.210
> 
> 标签：treeview

问题：我们希望将 HierarchicalDataTemplate 的 ItemsSource 属性绑定到 CollectionViewSource，以执行分组和过滤。

背景：我们正在处理的原始问题与过滤 TreeView 有关。具体来说，我们发现使用 CollectionViewSource 进行过滤是有效的，但会导致 TreeView 节点崩溃。这很可能是因为 View 的 Refresh 函数重新生成了它的对象列表，这导致 TreeView 重新生成了它的节点，导致原始节点的扩展状态丢失。我们通过编写一个类似于 CollectionViewSource 的类来解决这个问题，但通过在适当的位置编辑对象列表来保留视图，这样当它由于过滤而发生变化时，关联的 TreeView 节点不会被破坏。

这对我们来说非常有效，我们希望在 TreeView 的更深层次上使用它，让我们回到我们的问题上。目前，我们有一个 HierarchicalDataTemplate，如下所示：

```
<HierarchicalDataTemplate

    x:Key="tableTemplate"

    ItemsSource="{Binding Path=DataItems}"

    ItemTemplateSelector="{StaticResource tableGroupsTemplateSelector}"

    > 
```

相反，我们希望它表现得像这样：

```
<HierarchicalDataTemplate

    x:Key="tableTemplate"

    ItemTemplateSelector="{StaticResource tableGroupsTemplateSelector}"

    >

    <HierarchicalDataTemplate.ItemsSource>

        <Binding>

            <Binding.Source>

                <CollectionViewSource

                    Source="{Binding Path=DataItems}"

                    />

            </Binding.Source>

        </Binding>

    </HierarchicalDataTemplate.ItemsSource> 
```

不幸的是，这种方法似乎不起作用。据我们所知，CVS 中的绑定永远不会触发。没有出现绑定错误；我们尝试附加转换器并设置断点，但从未命中断点。我们还尝试了各种其他解决方案，包括：使用 RelativeSource、将 CollectionViewSource 移动到模板的资源中以及将 TreeViewItem 合并到模板中。但是，没有任何效果。

顺便说一句，我确实意识到 ViewModel 方法可以启用过滤。但是，在我们的开发周期中，我无法进行这种类型的更改，因此我正在寻找替代方案，例如 CollectionViewSource 方法。

您可以提供的任何帮助将不胜感激。

谢谢，

-克雷格

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-12T21:39:28.380

在我的应用程序中，我发现实现树视图过滤的最简单方法是将可见性绑定到列出对象的属性。

这种方法可能对您不起作用，但如果您想在这里尝试一下，这是我所做的一个示例。

在树视图资源中，您添加一个样式触发器。您可以将触发器绑定到您显示的对象上的任何属性，如果您想添加一些逻辑来检查项目并决定是否应该显示它，则可以添加值转换器。

```
<TreeView.Resources>
   <Style TargetType="TreeViewItem">
         <Style.Triggers>
               <DataTrigger Binding="{Binding Path=Display}" Value="False">
                    <Setter Property="Visibility"  Value="Collapsed"/>
               </DataTrigger>
         </Style.Triggers>
   </Style>
</TreeView.Resources> 
```

如果“显示”属性为假，触发器将折叠树视图项。

为避免向对象添加“显示”属性，您可以执行以下操作：

```
 public class PositionVisibilityConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {

            int positions = (int) value;
            if (positions > 0)
                return true;
            return false;
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            throw new System.NotSupportedException();
        }
    } 
```

并在 TreeView Style 绑定中添加值转换器：

```
<TreeView.Resources>
   <Style TargetType="TreeViewItem">
         <Style.Triggers>
               <DataTrigger Value="False">
                    <Binding Path="Positions">
                        <Binding.Converter>
                            <local:PositionVisibilityConverter/>
                        </Binding.Converter>
                    </Binding>
                    <Setter Property="Visibility"  Value="Collapsed"/>
               </DataTrigger>
         </Style.Triggers>
   </Style>
</TreeView.Resources> 
```

如果要检查整个对象，则不需要指定路径。

这个方法对我来说效果最好，试试吧。

# plone - 如何使用 plone 作为框架

> ID：854905
> 
> 赞同：1
> 
> 时间：2009-05-12T21:15:18.280
> 
> 标签：plone, plone-3.x

我正在创建一个允许人们辩论主题的网络应用程序。我开始使用 Django 进行原型设计并拥有一个功能性应用程序。我还没有决定使用什么框架。

我已经阅读了有关 Plone 应用程序和 Plone 框架的信息。我似乎找不到任何关于使用 Plone 作为框架的在线文档。我正在寻找一个教程或其他东西，它将向我展示如何从 Plone 开始构建一个 Web 应用程序。我只想在选择我的框架之前评估 Plone。

有人对学习如何使用 Plone 作为框架有任何参考或建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-14T09:47:37.100

你应该从这里开始：

[http://plone.org/documentation](http://plone.org/documentation)

一本非常好的书是： http: [//www.packtpub.com/Professional-Plone-web-applications-CMS/book](http://www.packtpub.com/Professional-Plone-web-applications-CMS/book)

Plone 建立在 Zope 应用服务器 (zope.org) 之上。您也应该阅读 zope 书。免费。

freenode 上的 IRC 频道 (#plone) 充满了愿意提供帮助的专家。他们喜欢讨论:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-15T17:36:21.473

不要使用 Plone 作为框架。

Plone 是一个 CMS。你可以用它作为框架，你可以使用 Zope2 应用服务器 + Zope3 组件架构，但我不建议这样做。Plone 被设计为 CMS，那么为什么要将它用作框架？

为什么不应该使用 Plone 作为框架？：

1.  克隆很慢！！！30 秒。每次重启都太多了。当您更改某些内容时，您需要重新启动。Autorestart( [http://plone.org/products/collective.autorestart](http://plone.org/products/collective.autorestart) ) 没有帮助，你仍然需要在任何时候重新启动 Plone 你改变一个 zcml、portlet 的代码，有时还有 python 代码。
2.  克隆太复杂了。这么大的代码库。不同的编码风格（旧的 Zope2，新的组件基础 Zope3，一些部分是用 Grok 编写的）。
3.  您将需要编写 xml（通用设置）。
4.  没人能说你必须使用 Archetypes、Formlib、z3c.form 还是 Dexterity？
5.  Plone 没有很好的文档。旧文档 (plone.org/documentation) 太多，没有地方可以阅读正确的方法。唯一好的文档在 Martin Aspeli 的书 (martinaspeli.net/plone-book) 中，但您需要更多文档，而且这本书尚未开放，因此您需要购买。
6.  Plone 有很多产品，但如果你需要真正稳定和高质量的东西，你需要自己编写。
7.  克隆很慢！！！忘记测试驱动的开发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-29T12:37:05.893

我认为选择框架最重要的因素是是否存在良好的文档。如果你找不到好的文档以你想要的方式使用 plone 而不必先在这里询问，这就是你需要的所有“评估”。

我会坚持使用 Django。

# python - 这种 Python 生产者-消费者无锁方法是线程安全的吗？

> ID：854906
> 
> 赞同：6
> 
> 时间：2009-05-12T21:15:48.043
> 
> 标签：python, locking, thread-safety, producer-consumer

我最近编写了一个使用简单生产者/消费者模式的程序。它最初有一个与不正确使用 threading.Lock 相关的错误，我最终修复了该错误。但这让我思考是否有可能以无锁的方式实现生产者/消费者模式。

我的要求很简单：

*   一个生产者线程。
*   一个消费者线程。
*   队列只能放置一项。
*   生产者可以在当前项目被消耗之前生产下一个项目。因此，当前项目丢失了，但这对我来说没关系。
*   消费者可以在生产下一个项目之前消费当前项目。因此，当前项目被消耗了两次（或更多），但这对我来说没关系。

所以我写了这个：

```
QUEUE_ITEM = None

# this is executed in one threading.Thread object
def producer():
    global QUEUE_ITEM
    while True:
        i = produce_item()
        QUEUE_ITEM = i

# this is executed in another threading.Thread object
def consumer():
    global QUEUE_ITEM
    while True:
        i = QUEUE_ITEM
        consume_item(i) 
```

我的问题是：这段代码是线程安全的吗？

立即评论：这段代码并不是真正无锁的——我使用 CPython，它有 GIL。

我对代码进行了一些测试，它似乎可以工作。它转换为一些由于 GIL 而具有原子性的 LOAD 和 STORE 操作。但我也知道当 x 实现方法`del x`时操作不是原子的。`__del__`因此，如果我的项目有一个`__del__`方法并且发生了一些令人讨厌的调度，事情可能会中断。或不？

另一个问题是：我必须施加什么样的限制（例如对生产项目的类型）才能使上述代码正常工作？

我的问题只是关于利用 CPython 和 GIL 的怪癖以提出无锁（即没有像 threading.Lock 这样的锁在代码中显式）解决方案的理论可能性。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-12T21:50:51.433

诡计会咬你。只需使用队列在线程之间进行通信。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-13T02:03:19.270

是的，这将按照您描述的方式工作：

1.  生产者可能会产生一个可跳过的元素。
2.  消费者可能会消费相同的元素。

> **但我也知道当 x 实现del**方法时 del x 操作不是原子的。因此，如果我的项目有一个**del**方法并且发生了一些令人讨厌的调度，事情可能会中断。

我在这里看不到“del”。如果在 consumer_item 中发生了 del，那么**del**可能发生在生产者线程中。我不认为这会是一个“问题”。

不过不要打扰使用它。你最终会在毫无意义的轮询周期中耗尽 CPU，而且它并不比使用带锁的队列快，因为 Python 已经有一个全局锁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T21:31:55.553

这并不是*真正*的线程安全，因为生产者可以`QUEUE_ITEM`在消费者消费之前覆盖它并且消费者可以消费`QUEUE_ITEM`两次。正如你所提到的，你可以接受，但大多数人不是。

对 cpython 内部有更多了解的人将不得不回答你更多的理论问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T21:32:56.987

我认为在生产/消费时线程可能会被中断，特别是如果项目是大对象。编辑：这只是一个疯狂的猜测。我不是专家。

此外，线程可以在另一个开始运行之前产生/消耗任意数量的项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-12T21:34:05.080

只要您坚持追加/弹出，您就可以使用列表作为队列，因为两者都是原子的。

```
QUEUE = []

# this is executed in one threading.Thread object
def producer():
    global QUEUE
    while True:
        i = produce_item()
        QUEUE.append(i)

# this is executed in another threading.Thread object
def consumer():
    global QUEUE
    while True:
        try:
            i = QUEUE.pop(0)
        except IndexError:
            # queue is empty
            continue

        consume_item(i) 
```

在像下面这样的类作用域中，您甚至可以清除队列。

```
class Atomic(object):
    def __init__(self):
        self.queue = []

    # this is executed in one threading.Thread object
    def producer(self):
        while True:
            i = produce_item()
            self.queue.append(i)

    # this is executed in another threading.Thread object
    def consumer(self):
        while True:
            try:
                i = self.queue.pop(0)
            except IndexError:
                # queue is empty
                continue

            consume_item(i)

    # There's the possibility producer is still working on it's current item.
    def clear_queue(self):
        self.queue = [] 
```

您必须通过查看生成的字节码找出哪些列表操作是原子的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-12T22:07:49.723

正如你所说，这`__del__`可能是一个问题。如果只有`__del__`在我们完成将新对象分配给`QUEUE_ITEM`. 我们需要类似的东西：

```
increase the reference counter on the old object
assign a new one to `QUEUE_ITEM`
decrease the reference counter on the old object 
```

我很害怕，但我不知道这是否可能。

# java - 如何使用 Hibernate 以最佳方式更新对象中的单个属性？

> ID：854911
> 
> 赞同：0
> 
> 时间：2009-05-12T21:18:20.833
> 
> 标签：java, hibernate, optimization

我有一个对象：

```
public class Data {
    private long           id;
    private long           referenceCount;
    private Blob           dataCache;

    /* getters and setters for the above */
} 
```

与此相对应的是一个映射：

```
<hibernate-mapping>
  <class name=Data" table=DATA">

    <id name=id" type="long">
      <column name=DATA_ID" precision="20" scale="0" />
      <generator class="assigned" />
    </id>

    <property name="referenceCount" type="long" generated="always" insert="false" update="false">
      <column name="REFERENCE_COUNT" precision="10" scale="0" not-null="true" />
    </property>
    <property name=dataCache" type="blob">
      <column name="DATA" />
    </property>
  </class>
</hibernate-mapping> 
```

'dataCache' 的内容可能非常大。

棘手的地方在于：referenceCount 的值由触发器设置，由与 Data 实体没有映射关系的对象调用。一旦我保存了这个对象，我必须刷新一个数据对象——它可能已经被会话加载，也可能没有——以保持引用计数正确。撇开这是否被视为一个好主意不谈，我必须确保 referenceCount 的值在我的本地会话中是最新的，但我不想重新加载 dataCache blob。我可以在该属性上设置惰性属性，但我不确定它会按照我希望的方式运行。

我该怎么做？我想我可以看到它的一种方式是：“如果它不存在，我如何从会话缓存中删除一个对象而不加载该对象？”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T23:08:03.010

根据[这个论坛帖子](https://forum.hibernate.org/viewtopic.php?t=962140)，字段类型`java.sql.Blob/Clob`，应该支持延迟加载。因此，人们会期望`Session.refresh()`对 的持久实例执行 a`Data`会，正如文档所指定的那样，从底层数据库重新读取给定实例的状态，但不会加载`dataCache`.

尽管如此，我还是建议您将 移动`dataCache`到单独的类并将其映射为强制性的一对一关系。确保您没有从`Data`to级联刷新`DataCache`。这样，您就可以完全控制刷新的内容和加载的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T21:59:42.013

当对象在数据库上触发触发器以使其与持久值保持同步时，为什么不让对象更新域中的 referenceCount。

# mercurial - 提交的 Mercurial 樱桃采摘更改

> ID：854930
> 
> 赞同：60
> 
> 时间：2009-05-12T21:23:26.970
> 
> 标签：mercurial, change-management

比如说，我对我的代码做了很多更改，只需要提交其中的一些更改。有没有办法在 mercurial 中做到这一点？我知道它`darcs`有这样的功能。

我知道`hg transplant`可以在分支之间执行此操作，但我需要这样的东西来在当前分支中提交代码，而不是在从其他分支添加更改集时。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2010-10-05T13:35:48.523

如果您在 Windows 上使用**TortoiseHg 1.x**，[此功能](http://tortoisehg.bitbucket.io/manual/1.0/commit.html#change-selection)开箱即用（无需扩展）。

1.  运行 TortoiseHg 提交工具。
2.  选择一个您只想提交其更改子集的文件。
3.  单击预览窗格中的块选择选项卡。
4.  双击或使用空格键来切换应包含在提交中的更改块。

* * *

对于**TortoiseHg 2.x**，Hunk Selection 选项卡现在消失了。取而代之的是[搁置工具](http://tortoisehg.bitbucket.io/manual/2.1/shelve.html)。它比旧的大块选择具有更多功能。这些新功能是以增加一些复杂性为代价的。

![在此处输入图像描述](https://i.stack.imgur.com/3eD6e.png)

请注意，使用此功能时无需显式启用 Mercurial Shelve 扩展。根据 Steve Borho（TortoiseHg 首席开发人员）在[回答另一个 TortoiseHg 问题时](https://stackoverflow.com/a/2609348/154439 "如何查看 Tortoise HG 发出的 Mercurial 命令？")说：*“我们有一个搁置扩展的本地副本并直接调用它。”*

* * *

对于**TortoiseHg 2.7+**，此功能已得到改进并重新引入。它现在直接内置到 Commit 工具中：

![提交工具中的更改选择示例](https://i.stack.imgur.com/A7W10.png)

请注意，在左侧的文件列表中，顶部的文件被选中以指示它将被包含，第二个文件未被选中，因为它不会被包含，第三个文件 Sample.txt 被填充（Null 复选框指示符）因为只有从该文件中选择的更改才会包含在提交中。

将包含的对 Sample.txt 的更改在图像的右下角更改选择部分中进行检查。将被排除的更改未选中，差异视图显示为灰色。另请注意，搁置工具的图标仍然可用。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2009-05-13T12:04:51.773

Chad 提到的 MQ 是一种方法。还有更轻量级的解决方案：

*   [记录扩展](https://www.mercurial-scm.org/wiki/RecordExtension)，其工作方式与 darcs 记录大致相同。它与 mercurial 一起分发。
*   [搁置扩展](https://www.mercurial-scm.org/wiki/ShelveExtension)，允许您“搁置”某些更改，允许您仅提交更改的子集（未搁置的更改）

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2011-12-26T21:08:18.620

我觉得我错过了一些东西，因为已经没有人提出这个建议了。

普通的“hg commit”命令可用于选择性地选择要提交的内容（您不必在本地工作目录中提交所有待处理的更改）。

如果您有一组这样的更改：

```
M ext-web/docroot/WEB-INF/liferay-display.xml
M ext-web/docroot/WEB-INF/liferay-portlet-ext.xml
M ext-web/docroot/WEB-INF/portlet-ext.xml 
```

您可以只提交其中两个更改...

```
hg commit -m "partial commit of working dir changes" ext-web/docroot/WEB-INF/liferay-display.xml ext-web/docroot/WEB-INF/liferay-portlet-ext.xml 
```

从命令行不是超级方便，因为您必须手动键入文件以选择性地提交（与像乌龟这样的 GUI 复选框过程相比），但它几乎一样简单，不需要扩展。并且文件通配可能有助于减少打字（就像上面那样，两个提交的文件在其路径名中唯一地共享“liferay”。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2009-05-13T20:35:02.813

Mercurial Queues 教程对于这个用例来说很糟糕。我看到的所有示例都假设您尚未提交并且正在刷新单个补丁。大多数时候情况并非如此，您有 2 或 3 个提交要压缩在一起或以其他方式更改。

假设你有这样的历史：

```
---O---O---A---B---C 
```

第一个示例是压缩提交 A、B 和 C。首先 init mq：

```
$ hg qinit 
```

现在我们需要将提交 A、B 和 C “导入”到补丁队列中。让我们假设它们是最后 3 次提交。我们可以使用“-N”修订语法来导入它们，如下所示：

```
$ hg qimport -r -3:-1 
```

这意味着作为补丁从 3 个补丁导入到最后一次提交。您可以使用 . 检查这些补丁程序的状态`hg qseries`。它应该显示如下内容：

```
$ hg qseries
101.diff
102.diff
103.diff 
```

其中数字 101、102 和 103 对应于提交 A、B 和 C 的本地修订号。现在*应用*了这些补丁，这意味着它们描述的更改已经在工作副本中。您可以摆脱工作副本的更改并将它们从提交历史记录中删除，仅以补丁形式保存它们，方法是使用`hg qpop`. 您可以说`hg qpop; hg qpop`将更改 C 和 B 从堆栈中弹出，或者指定要“弹出”的补丁。在这种情况下，它会是这样的：

```
$ hg qpop 101.diff
now at: 101.diff 
```

您现在在补丁队列中有提交 B 和 C 的补丁，但它们没有应用（它们的更改已“丢失” - 它们仅存在于补丁队列区域中）。现在您可以将这些补丁折叠到最后一个中，即我们创建一个新的提交，它相当于更改 A+B+C 的总和。

```
$ hg qfold -e 102.diff 103.diff 
```

这将显示您的编辑器，以便您可以更改提交消息。默认情况下，消息将是更改 A、B 和 C 的提交消息的串联，由星号分隔。这里的好处是，`hg qfold`如果您使用 bash 并获取 hg-completion 脚本，它将使用制表符完成补丁。这留下了这样的历史，其中 A+B+C 是一个单一的提交，它是我们感兴趣的 3 个补丁的组合：

```
---O---O---A+B+C 
```

另一个用例是，如果我们有与以前相同的历史记录，但我们想要删除补丁 B 并合并 A+C。这实际上与上面非常相似。当您进入 qfold 步骤时，您只需折叠最后一次提交而不是最后 2 次提交：

```
$ hg qfold -e 103.diff 
```

这会将 B 的更改留在补丁队列中，但它不会应用于工作副本，并且它的提交不在历史记录中。你可以通过运行看到这一点：

```
$ hg qunapplied
102.diff 
```

历史现在看起来像这样，其中 A+C 是结合了更改 A 和 C 的单个提交：

```
---O---O---A+C 
```

最后一个用例可能是您只需要应用提交 C。您可以通过运行上面的 qimport 来做到这一点，并且您会弹出所有您不想要的补丁：

```
$ hg qpop -a 
```

-a 标志意味着弹出所有补丁。现在您可以只应用您想要的一个：

```
$ hg qpush 103.diff 
```

这给你留下了这段历史：

```
---O---O---C 
```

完成所有这些后，您需要完成队列摆弄。这可以通过以下方式完成：

```
$ hg qfinish -a 
```

所以我们到了。您现在可以运行*`hg push`*并且只提交您想要的内容，或者*`hg email`*向邮件列表提交一个连贯的补丁。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2017-02-07T07:28:45.870

一段时间过去了。现在看来最好的选择是`hg commit --interactive`

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-01-18T11:44:25.223

您可以使用随 Mercurial 分发的[记录扩展](https://www.mercurial-scm.org/wiki/RecordExtension)。

您需要先在`~/.hgrc`文件中启用它，方法是将其添加到以下`[extensions]`部分：

```
[extensions]
record= 
```

然后，只需键入`hg record`而不是`hg commit`，您就可以选择要提交的文件的更改。

您还可以使用[crecord 扩展](https://www.mercurial-scm.org/wiki/CrecordExtension)，它提供了一个更好的界面来查看和选择更改。（不过，它没有与 Mercurial 一起分发，而且我看到它偶尔会弄乱提交，因此它不是完全没有错误的。）

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-05-12T21:28:52.907

我相信[Mercurial Queues](https://www.mercurial-scm.org/wiki/MqExtension)填补了 Mercurial 的这个角色。那里有[一个很好的教程](https://www.mercurial-scm.org/wiki/MqTutorial)链接。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-05-24T22:51:31.743

试试 qct（Qt 提交工具）。它有一个“选择更改”功能，可以启动一个 3 向合并工具，让您撤消单个更改。提交后，您“撤消”的那些更改会回来。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2010-10-07T21:42:34.690

我使用[提交补丁](http://porkrind.org/commit-patch/)。这是一个脚本，可让您在提交之前编辑差异。Emacs 的 diff-mode 和 vc-mode 真的很棒。

过去我使用crecord，但它有与unicode相关的错误（实际上记录扩展有错误，crecord依赖于）。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2014-04-17T19:37:35.807

首先，您必须忘记您所知道的关于 GUI 的所有内容并返回命令行。接下来从命令行执行此操作：

**hg stat > filelist.txt**

这会将所有修改过的文件通过管道传输到一个名为 filelist.txt 的文本文件中

接下来编辑您的文件列表以仅包含您希望提交的文件。

最后使用文件集 sytnax 提交：

**hg commit "set: 'listfile:test.txt'"**

# stored-procedures - 如果我使用存储过程，我会使用 ORM 吗？

> ID：854931
> 
> 赞同：5
> 
> 时间：2009-05-12T21:23:27.203
> 
> 标签：stored-procedures, orm

如果我使用存储过程，我可以使用 ORM 吗？

编辑：

如果我可以使用 ORM，那是否会破坏使用 ORM 的数据库不可知性的部分原因？换句话说，如果我将自己绑定到具有存储过程的特定数据库（或者该假设是否错误），我为什么还要使用 ORM？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-12T21:27:54.593

使用 ORM 访问存储过程是 ORM 的最佳用途之一。它会给你强类型的对象，而你仍然可以完全控制 SQL。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-12T21:30:12.513

根据我的经验，我会让 ORM 处理“CRUD”操作，并将专业工作留给存储过程。通常，将存储过程用于“CRUD”操作是多余的，让 ORM 处理它可以大大提高您的工作效率。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-12T21:25:33.427

是的，你可以，所有主要的 ORM 都支持存储过程。

至于您的假设，您是特别正确的，当您将存储过程与 ORM 一起使用时，您将项目耦合到特定数据库。但实际上 99% 的情况是您不需要更改数据库提供程序，因此在这种情况下，您使用 ORM 不是为了从具体的数据库提供程序中抽象出来，而是帮助自己完成对象关系映射任务——这是 ORM 的主要任务以及最初是为哪个 ORM 制作的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-12T21:28:22.687

它提出了一个有趣的观点。

有了 ORM 和相对简单的查询，为什么还需要存储过程？SP 与数据库密切相关。ORM 使您不必维护大量特定于 DB 的代码。*可以*隔离和管理特定于 DB 的内容。

我建议 ORM 是降低复杂性并将所有处理放在它所属的代码中的绝佳机会。

使用数据库做它最擅长的事情——存储数据。

将您的应用程序用于它最擅长的事情——处理数据。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-10-18T15:34:00.723

您可以同时使用 ORM 功能和存储过程功能。特别是使用 ORM 直到它适合您，但如果您在性能方面遇到问题或需要一些低级调整 - 在您的业务逻辑中包含存储过程。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-12T21:31:03.480

是的，您可以，但您需要花一些时间研究 ORM 围绕存储过程提供的功能。

大多数将允许您运行返回强类型对象/实体的存储过程。更高级的 ORM 将允许您插入存储过程以执行 CRUD 操作（因此您的通用查询、删除等通过存储过程而不是动态查询进行）。

通常，ORM 非常适合生成临时查询和获取强类型实体，但具有强大的存储过程支持的好处是允许您（有时）更轻松地访问您的 RDMS 的本机功能，这些功能可能不会作为一等公民在ORM - 特别是如果 ORM 支持许多数据库引擎。

跟进您的编辑：

通常你会想要使用 ORM 提供的临时查询引擎，但是正如我之前提到的 - 有时你想要使用 ORM 未公开的功能进行查询。

强类型实体的好处是无价的，因为这意味着您通常拥有域对象，而不是数据读取器、数据表等。您可以在检索到的实体中干净地封装行为和逻辑。

其他好处的列表确实很长 - 例如，使用 LightSpeed ORM（和大多数其他），您的实体将支持标准绑定接口、错误报告接口、验证等。在查询方面，您将失去延迟加载等，除非你自己写。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-12T21:32:47.610

数据库“不可知性”（？）并不是使用 ORM 的唯一原因。但是，您可以利用与数据库交互的 99% 独立于数据库，并且在 1%（或 2% 或 10% 或其他）中，您可能需要存储过程以提高速度/清晰度/复杂性。如果您更改了数据库，则需要重写它们。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-13T01:10:59.550

我在工作中经常使用 netTiers，我们让它为我们生成存储过程。这些只处理基本的 CRUD 操作，但它们非常快并且为我节省了大量时间。netTiers 还将让我们创建自定义存储过程并使用这些过程生成我们的数据访问代码。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-12T21:27:32.377

可以，但是许多更高级的 ORM 功能往往会变得更麻烦。像[iBatis](http://ibatis.apache.org/)这样的东西很容易与存储过程集成，而更复杂的引擎（如 (N?)Hibernate）的更复杂的功能（如动态 SQL 的生成和大字段的延迟加载）可能会变得比它们的价值更麻烦。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2010-10-19T14:51:54.897

我相信任何能让你从重复工作中解放出来并专注于解决问题的工具都是有效的。当涉及到基本的 CRUD 操作时，ORM 似乎就是那种工具——即使使用 SP 来更好地实现需求（比如在钉子上使用锤子，它只是完成任务的正确工具）。

关键是：没有黑色或白色，只有灰色的刻度。非常无能和编码错误的应用程序以“与数据库无关”为借口来解释数据库资源的过度使用。在许多情况下，与数据库紧密联系也不好。目标是：在不浪费客户 IT 资源的情况下获得最大程度的“数据库不可知论”。

没有“旧与新”之分，只是人们说极端“纯粹”的方法更好。我真的不相信。我相信，与任何工具一样，“最佳”（注意引号）方法是使用 ORM，直到仍然是使您的数据访问的正确工具。当您达到浪费资源并降低可伸缩性和 TI 资源的“价值生活”（我忘记了葡萄牙语“vida útil”的英语表达）的程度时，请在 ORM 中使用 SP。或者，换句话说，当它用于手头的处理时使用SP，就像锤子用于钉子一样。

# javascript - 让 javascript 强制 Selenium 测试失败

> ID：854934
> 
> 赞同：1
> 
> 时间：2009-05-12T21:24:40.400
> 
> 标签：javascript, selenium, assertions, testcase

有没有办法让 js 代码强制 Selenium 测试失败？对于（可能是坏的）示例，如果我有以下内容：

```
return document.getElementById('foo').innerHTML == 'hello' 
```

有没有一种方法可以使“runScript”命令失败，具体取决于 js 代码是返回真还是假？（我知道其他 Selenium 命令可以使用该示例，但我想要一个更通用的解决方案。）

我是否需要学习如何扩展 Selenium 以添加另一个命令？

我对 Selenium 也比较陌生，所以使用 Selenium-rc 可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T16:25:17.887

`assertExpression`会给你你想要的。

例如，如果您提到的 JavaScript 表达式未计算为 true，则以下行将导致您的测试失败。

```
<tr>
<td>assertExpression</td>
<td>javascript{this.browserbot.getCurrentWindow().document.getElementById('foo').innerHTML == 'hello'}</td>
<td>true</td>
</tr> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T21:43:04.177

这取决于你想如何使用硒。在 selenese 套件中有对 verifyText 等的调用（只是 google 用于 selenese 套件和 verifyText、waitForCondition）。如果您在例如 java 中使用 selenium 远程控制，那么您在 java 代码中执行断言。使用遥控器将脚本发送到页面，然后返回代码评估返回的内容。比较/断言是在 java 客户端中完成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-13T06:51:16.230

eval('asdfklj;'); //硒击中它。老实说，我自己从未使用过它。需要尽快学习它，但我假设它可以轰炸 javascript 错误。

# asp.net-mvc - 附加场景中的 linq datacontext GetModifiedMembers

> ID：854937
> 
> 赞同：0
> 
> 时间：2009-05-12T21:25:38.107
> 
> 标签：asp.net-mvc, auditing, optimistic-locking

我正在尝试在 asp.net MVC 应用程序中实现乐观锁定，并提供审计跟踪。

审计框架依赖于能够在 SubmitChanges 期间调用 DataContext.GetModifiedMembers，我猜这很有意义。

乐观锁定使用 ROWVERSION 时间戳，序列化为 base64 并放入视图中的隐藏字段。

我的编辑操作如下所示：

```
[AcceptVerb(HttpVerb.Post)] 
public ActionResult Edit(MyType myType)
{ 
   context.MyTypes.Attach(myType, true);
   context.SubmitChanges(ConflictMode.FailOnFirstConflict);
} 
```

执行此操作时，DataContext.GetModifiedMembers 将始终返回 MyType 上的所有属性，而不仅仅是在数据库和提供的值之间更改的属性，这会破坏审计。具体来说，它将每个属性都从它们的新值更改为新值，所以它甚至不像我可以对列表做任何聪明的事情。

我尝试先加载对象，然后再附加它，但这会产生重复键异常。

然后我尝试使用UpdateModel，即

```
[AcceptVerb(HttpVerb.Post)] 
public ActionResult Edit(int id, FormCollection col)
{ 
   var mt = context.MyTypes.Single( mt =>  mt.id = id);
   UpdateModel(mt);
   context.SubmitChanges(ConflictMode.FailOnFirstConflict);
} 
```

这适用于审计，但无法通过乐观锁定。而不是 ChangeConflictException 我得到一个 InvalidOperationException 因为 UpdateModel 正在更改 concurrentTS 字段（这显然是只读的）。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-13T21:07:37.813

到目前为止的进展包括完成最后一部分，捕获 InvalidOperationException 并查找文本“成员 'ConcurrencyTimestamp' 的值”，并将其作为 ChangeConflictException 重新抛出。

这似乎可以解决问题，但它并不漂亮。

# c# - 绑定到字典的 DataGridView

> ID：854953
> 
> 赞同：30
> 
> 时间：2009-05-12T21:29:39.223
> 
> 标签：c#, .net, winforms, datagridview, dictionary

我有一个`Dictionary`包含项目和价格的。这些项目是唯一的，但会在应用程序的整个生命周期中慢慢添加和更新（也就是说，我事先不知道项目字符串）。我想将此结构绑定到 DataGridView，这样我就可以在我的表单上显示更新，例如：

```
Dictionary<string, double> _priceData = new Dictionary<string, double>();
BindingSource _bindingSource = new BindingSource();
dataGridView1.DataSource = _bindingSource;
_bindingSource.DataSource = _priceData; 
```

但不能，因为`Dictionary`没有实现`IList`（或`IListSource`、、`IBindingList`或`IBindingListView`）。

有没有办法做到这一点？我需要保留一个唯一的项目列表，还要更新现有项目的价格，所以`Dictionary`我认为 a 是理想的数据结构，但我找不到在表单上显示数据的方法。

* * *

更新：

Marc 下面的建议效果很好，但我仍然不确定如何在执行期间更新 DataGridView。

我有一个类级变量：

```
private DictionaryBindingList<string, decimal> bList; 
```

然后实例化它`Main()`：

```
bList = new DictionaryBindingList<string,decimal>(prices); 
dgv.DataSource = bList; 
```

然后在程序执行期间，如果将新条目添加到字典中：

```
prices.Add("foobar", 234.56M); bList.ResetBindings(); 
```

我认为这会刷新 DataGridView。为什么不？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2009-05-13T03:38:54.100

或者，在 LINQ 中，它又好又快：

```
var _priceDataArray = from row in _priceData select new { Item = row.Key, Price = row.Value }; 
```

这应该可以绑定到“项目”和“价格”列。

要将其用作网格视图中的数据源，您只需使用`ToArray()`.

```
dataGridView1.DataSource = _priceDataArray.ToArray(); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2009-05-12T21:33:13.180

有几个问题`Dictionary`; 第一个是（如您所见）它没有实现必要的`IList`/ `IListSource`。第二个是项目没有保证的顺序（实际上，没有索引器），使得通过索引（而不是按键）进行随机访问是不可能的。

然而......它可能是可行的一些烟雾和镜子; 如下所示：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Windows.Forms;

static class Program
{
    [STAThread]
    static void Main()
    {
        Dictionary<string, decimal> prices =
            new Dictionary<string, decimal>();
        prices.Add("foo", 123.45M);
        prices.Add("bar", 678.90M);

        Application.EnableVisualStyles();
        Form form = new Form();
        DataGridView dgv = new DataGridView();
        dgv.Dock = DockStyle.Fill;
        form.Controls.Add(dgv);
        var bl = prices.ToBindingList();
        dgv.DataSource = bl;
        Button btn = new Button();
        btn.Dock = DockStyle.Bottom;
        btn.Click += delegate
        {
            prices.Add(new Random().Next().ToString(), 0.1M);
            bl.Reset();
        };
        form.Controls.Add(btn);
        Application.Run(form);
    }

    public static DictionaryBindingList<TKey, TValue>
        ToBindingList<TKey, TValue>(this IDictionary<TKey, TValue> data)
    {
        return new DictionaryBindingList<TKey, TValue>(data);
    }
    public sealed class Pair<TKey, TValue>
    {
        private readonly TKey key;
        private readonly IDictionary<TKey, TValue> data;
        public Pair(TKey key, IDictionary<TKey, TValue> data)
        {
            this.key = key;
            this.data = data;
        }
        public TKey Key { get { return key; } }
        public TValue Value
        {
            get
            {
                TValue value;
                data.TryGetValue(key, out value);
                return value;
            }
            set { data[key] = value; }
        }
    }
    public class DictionaryBindingList<TKey, TValue>
        : BindingList<Pair<TKey, TValue>>
    {
        private readonly IDictionary<TKey, TValue> data;
        public DictionaryBindingList(IDictionary<TKey, TValue> data)
        {
            this.data = data;
            Reset();
        }
        public void Reset()
        {
            bool oldRaise = RaiseListChangedEvents;
            RaiseListChangedEvents = false;
            try
            {
                Clear();
                foreach (TKey key in data.Keys)
                {
                    Add(new Pair<TKey, TValue>(key, data));
                }
            }
            finally
            {
                RaiseListChangedEvents = oldRaise;
                ResetBindings();
            }
        }

    }
} 
```

请注意，自定义扩展方法的使用完全是可选的，并且可以在 C# 2.0 等中删除，只需使用即可`new DictionaryBindingList<string,decimal>(prices)`。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-02-25T07:16:56.937

可能这是最简单的方法：

```
Dictionary<char, double> myList = new Dictionary<char, double>();

        dataGridView1.Columns.Add("Key", "KEY");
        dataGridView1.Columns.Add("Values", "VALUES");

        foreach (KeyValuePair<char,double> item in , myList)
        {
            dataGridView1.Rows.Add(item.Key, item.Value);
        } 
```

如果使用这个，你的 datagridview 应该是可排序的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-19T05:55:17.717

我认为这将解决我几个月前面临的问题。

使用字典，因为你想更新项目价格，当你完成更新并想在数据网格中显示时就这样做。希望能帮到你

```
Grd.DataSource=null;
Grd.DataSource = Dictionary.Values.ToList(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-05-13T09:03:59.797

因为`Dictionary<TKey, TValue>`您可以使用这些关键字进行绑定：`Key`和`Value`.

这是`ComboBox`绑定的示例，但可以将字典绑定到`DataGridView`（将`DataPropertyName`列设置为`Key`或`Value`）。

```
 ComboBox1.DataSource =
        new BindingSource(Pricelevel.GetPricelevels(), null); // GetPricelevels() returns Dictionary<string, string>

    ComboBox1.ValueMember = "Key";
    ComboBox1.DisplayMember = "Value"; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-13T03:26:42.520

像这样创建一个类：

```
class MyRow
{
    public string key;
    public double value;
    public string Key {get {return key;}}
    public string Value {get {return value;}}
} 
```

然后列出它们：

```
List<MyRow> rows = new List<MyRow>(); 
```

然后将它们插入该列表，并将数据绑定到该列表。

顺便说一句，如果你有 LINQ，我认为有一种`ToArray`方法可以简化这一切......

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-06-06T02:34:50.537

作为对 Marc 建议的扩展，我想提出以下解决方案，该解决方案还允许对字典进行运行时操作：

```
public class DictionaryBindingList<TKey, TValue> : BindingList<KeyValuePair<TKey, TValue>>
{
    public readonly IDictionary<TKey, TValue> Dictionary;
    public DictionaryBindingList()
    {
        Dictionary = new Dictionary<TKey, TValue>();
    }

    public void Add(TKey key, TValue value)
    {
        base.Add(new KeyValuePair<TKey, TValue>(key, value));
    }

    public void Remove(TKey key)
    {
        var item = this.First(x => x.Key.Equals(key));
        base.Remove(item);
    }

    protected override void InsertItem(int index, KeyValuePair<TKey, TValue> item)
    {
        Dictionary.Add(item.Key, item.Value);
        base.InsertItem(index, item);
    }

    protected override void RemoveItem(int index)
    {
        Dictionary.Remove(this[index].Key);
        base.RemoveItem(index);
    }

    public int IndexOf(TKey key)
    {
        var item = this.FirstOrDefault(x => x.Key.Equals(key));
        return item.Equals(null) ? -1 : base.IndexOf(item);
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-10T14:50:40.873

作为 Bleiers DictionaryBindingList 的扩展，我做了一个小改动，以允许添加值覆盖现有值。我正在使用带有 WAMP websocket 的方法，因此它允许我仅通过更新集合来保持值更新，接下来我需要将事件绑定到值上。

```
 public void Add(TKey key, TValue value)
    {
        if (Dictionary.ContainsKey(key))
        {
            int position = IndexOf(key);
            Dictionary.Remove(key);
            Remove(key);
            InsertItem(position, new KeyValuePair<TKey, TValue>(key, value));
            return;
        }
        base.Add(new KeyValuePair<TKey, TValue>(key, value));
    } 
```

# c# - 为什么要投射列表 进入 IList 导致性能下降？

> ID：854959
> 
> 赞同：14
> 
> 时间：2009-05-12T21:30:54.133
> 
> 标签：c#, list, generics

我正在做一些性能指标，但我遇到了一些对我来说似乎很奇怪的事情。我对以下两个函数计时：

```
 private static void DoOne()
      {
         List<int> A = new List<int>();
         for (int i = 0; i < 200; i++) A.Add(i);
          int s=0;
         for (int j = 0; j < 100000; j++)
         {
            for (int c = 0; c < A.Count; c++) s += A[c];
         }

      }

   private static void DoTwo()
      {
         List<int> A = new List<int>();
         for (int i = 0; i < 200; i++) A.Add(i);
         IList<int> L = A;
         int s = 0;
         for (int j = 0; j < 100000; j++)
         {
            for (int c = 0; c < L.Count; c++) s += L[c];
         }

      } 
```

即使在发布模式下编译，计时结果也始终显示 DoTwo 比 DoOne 多花费约 100 倍：

```
 DoOne took 0.06171706 seconds.
 DoTwo took 8.841709 seconds. 
```

鉴于 List 直接实现 IList 的事实，我对结果感到非常惊讶。谁能澄清这种行为？

## 血淋淋的细节

回答问题，这里是项目构建偏好的完整代码和图像：

> [死图链接](http://img178.imageshack.us/img178/9456/projpref.tif)

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Diagnostics;
using System.Collections;

namespace TimingTests
{
   class Program
   {
      static void Main(string[] args)
      {
         Stopwatch SW = new Stopwatch();
         SW.Start();
         DoOne();
         SW.Stop();

         Console.WriteLine(" DoOne took {0} seconds.", ((float)SW.ElapsedTicks) / Stopwatch.Frequency);
         SW.Reset();
         SW.Start();
         DoTwo();
         SW.Stop();

         Console.WriteLine(" DoTwo took {0} seconds.", ((float)SW.ElapsedTicks) / Stopwatch.Frequency);

      }

      private static void DoOne()
      {
         List<int> A = new List<int>();
         for (int i = 0; i < 200; i++) A.Add(i);
         int s=0;
         for (int j = 0; j < 100000; j++)
         {
            for (int c = 0; c < A.Count; c++) s += A[c];
         }

      }
      private static void DoTwo()
      {
         List<int> A = new List<int>();
         for (int i = 0; i < 200; i++) A.Add(i);
         IList<int> L = A;
         int s = 0;
         for (int j = 0; j < 100000; j++)
         {
            for (int c = 0; c < L.Count; c++) s += L[c];
         }

      }
   }
} 
```

感谢所有好的答案（尤其是@kentaromiura）。我会结束这个问题，尽管我觉得我们仍然错过了这个难题的一个重要部分。为什么通过它实现的接口访问一个类会慢得多？我能看到的唯一区别是通过接口访问函数意味着使用虚拟表，而通常可以直接调用函数。为了查看是否是这种情况，我对上述代码进行了一些更改。首先我介绍了两个几乎相同的类：

```
 public class VC
  {
     virtual public int f() { return 2; }
     virtual public int Count { get { return 200; } }

  }

  public class C
  {
      public int f() { return 2; }
      public int Count { get { return 200; } }

  } 
```

如您所见，VC 使用的是虚函数，而 C 没有。现在到 DoOne 和 DoTwo：

```
 private static void DoOne()
      {  C a = new C();
         int s=0;
         for (int j = 0; j < 100000; j++)
         {
            for (int c = 0; c < a.Count; c++) s += a.f();
         }

      }
      private static void DoTwo()
      {
           VC a = new VC();
         int s = 0;
         for (int j = 0; j < 100000; j++)
         {
            for (int c = 0; c < a.Count; c++) s +=  a.f();
         }

      } 
```

事实上：

```
DoOne took 0.01287789 seconds.
DoTwo took 8.982396 seconds. 
```

这更可怕——虚函数调用慢了 800 倍？？所以向社区提出几个问题：

1.  你能重现吗？（考虑到以前所有人的表现都更差，但没有我的那么糟糕）
2.  你可以解释吗？
3.  （这可能是最重要的）——你能想办法避免吗？

波阿斯

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-05-12T22:04:29.807

给所有试图对这样的东西进行基准测试的人的说明。

不要忘记**代码在第一次运行之前不会被 jit**。这意味着当您第一次运行一个方法时，运行该方法的成本可能主要取决于加载 IL、分析 IL 并将其 jit 到机器代码中所花费的时间，特别是如果它是一个微不足道的方法。

如果您要做的是比较两种方法的“边际”运行时成本，那么最好将它们运行两次并*仅考虑第二次运行*以进行比较。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-13T09:14:17.853

**一对一分析：**

*使用 Snippet 编译器进行测试。*

使用您的代码结果：

> 0.043s vs 0.116s

消除临时 L

> 0.043s vs 0.116s - 进水

通过在两种方法的 cmax 中缓存 A.count

> 0.041s vs 0.076s

```
 IList<int> A = new List<int>();
     for (int i = 0; i < 200; i++) A.Add(i);

     int s = 0;
     for (int j = 0; j < 100000; j++)
     {
        for (int c = 0,cmax=A.Count;c< cmax;  c++) s += A[c];
     } 
```

现在我将尝试减慢 DoOne，首先尝试，在添加之前强制转换为 IList：

```
for (int i = 0; i < 200; i++) ((IList<int>)A).Add(i); 
```

> 0,041s 0,076s - 所以添加是流入的

所以它仍然只有一个可能发生减速的地方：`s += A[c];` 所以我试试这个：

```
s += ((IList<int>)A)[c]; 
```

0.075s 0.075s - TADAaan！

所以在接口版本上访问 Count 或索引元素似乎更慢：

编辑：只是为了好玩看看这个：

```
 for (int c = 0,cmax=A.Count;c< cmax;  c++) s += ((List<int>)A)[c]; 
```

> 0.041s 0.050s

所以不是演员表问题，而是反映问题！

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-05-15T08:22:34.177

首先，我要感谢所有人的回答。在弄清楚我们正在发生的事情的道路上真的很重要。特别感谢@kentaromiura，他找到了了解事情真相所需的关键。

通过 IList<T> 接口使用 List<T> 速度变慢的原因是 JIT 编译器缺乏内联 Item 属性 get 函数的能力。通过它的 IList 接口访问列表所导致的虚拟表的使用可以防止这种情况发生。

作为证明，我编写了以下代码：

```
 public class VC
      {
         virtual public int f() { return 2; }
         virtual public int Count { get { return 200; } }

      }

      public class C
      {
         //[MethodImpl( MethodImplOptions.NoInlining)]
          public int f() { return 2; }
          public int Count 
          {
            // [MethodImpl(MethodImplOptions.NoInlining)] 
            get { return 200; } 
          }

      } 
```

并将 DoOne 和 DoTwo 类修改为以下内容：

```
 private static void DoOne()
      {
         C c = new C();
         int s = 0;
         for (int j = 0; j < 100000; j++)
         {
            for (int i = 0; i < c.Count; i++) s += c.f();
         }

      }
      private static void DoTwo()
      {
         VC c = new VC();
         int s = 0;
         for (int j = 0; j < 100000; j++)
         {
            for (int i = 0; i < c.Count; i++) s += c.f();
         }

      } 
```

果然功能时间现在和以前非常相似：

```
 DoOne took 0.01273598 seconds.
 DoTwo took 8.524558 seconds. 
```

现在，如果您删除 C 类中 MethodImpl 之前的注释（强制 JIT 不内联） - 时间变为：

```
DoOne took 8.734635 seconds.
DoTwo took 8.887354 seconds. 
```

瞧——这些方法花费的时间几乎相同。您仍然可以看到 DoOne 方法仍然稍快，这与虚函数的额外开销一致。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-12T21:37:05.437

我认为问题在于您的时间指标，您使用什么来衡量经过的时间？

仅作记录，这是我的结果：

```
DoOne() -> 295 ms
DoTwo() -> 291 ms 
```

和代码：

```
 Stopwatch sw = new Stopwatch();

        sw.Start();
        {
            DoOne();
        }
        sw.Stop();

        Console.WriteLine("DoOne() -> {0} ms", sw.ElapsedMilliseconds);

        sw.Reset();

        sw.Start();
        {
            DoTwo();
        }
        sw.Stop();

        Console.WriteLine("DoTwo() -> {0} ms", sw.ElapsedMilliseconds); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-05-12T21:51:17.207

我看到界面版本有一些重大损失，但远不及您看到的幅度损失。

您能否发布一个**完整的小**程序来演示该行为以及您如何编译它以及您使用的框架的确切版本？

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-12T22:08:38.317

我的测试显示，在发布模式下编译时，接口版本慢了大约 3 倍。在调试模式下编译时，它们几乎是并驾齐驱的。

```
--------------------------------------------------------
 DoOne Release (ms) |  92 |  91 |  91 |  92 |  92 |  92
 DoTwo Release (ms) | 313 | 313 | 316 | 352 | 320 | 318
--------------------------------------------------------
 DoOne Debug (ms)   | 535 | 534 | 548 | 536 | 534 | 537
 DoTwo Debug (ms)   | 566 | 570 | 569 | 565 | 568 | 571
-------------------------------------------------------- 
```

**编辑**

在我的测试中，我使用了该方法的略微修改版本，`DoTwo`因此它可以直接与`DoOne`. （此更改对性能没有任何明显的影响。）

```
private static void DoTwo()
{
    IList<int> A = new List<int>();
    for (int i = 0; i < 200; i++) A.Add(i);
    int s = 0;
    for (int j = 0; j < 100000; j++)
    {
       for (int c = 0; c < A.Count; c++) s += A[c];
    }
} 
```

`DoOne`为and (modified)生成的 IL 之间的唯一区别在于 , and的`DoTwo`指令`callvirt`使用and而不是它本身。`Add``get_Item``get_Count``IList``ICollection``List`

我猜测运行时必须做更多的工作才能在`callvirt`通过接口时找到实际的方法实现（并且 JIT 编译器/优化器在编译时可以比接口调用更好地处理非接口调用）释放模式）。

有人可以证实这一点吗？

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-12T21:45:31.367

我已经使用[Jon Skeet 的 Benchmark Helper](http://msmvps.com/blogs/jon_skeet/archive/2009/01/26/benchmarking-made-easy.aspx)运行了这个，我没有看到你的结果，这两种方法的执行时间大致相同。

# mysql - 密码哈希和加盐 - 这是一个好方法吗？

> ID：854961
> 
> 赞同：7
> 
> 时间：2009-05-12T21:31:25.337
> 
> 标签：mysql, encryption, hash, passwords, salt

我正在做一些研究或搜索处理密码散列和加盐的不同方法，并遇到了这个有趣的链接：

[http://phix.me/salt/](https://web.archive.org/web/20090228183138/http://phix.me/salt)

现在，基本上这个提议是创建两个用户函数，一个用于散列，一个用于检查散列。

盐是伪随机的，但实际上是基于密码的（让我觉得很糟糕？）。

散列函数还伪随机地在散列字符串中“撒”盐。

哈希检查功能反转撒盐，然后进行实际的哈希检查。

现在，我知道每个密码散列的唯一盐 = 好，但也有逻辑散列密码并创建存储在 db 函数中的盐可能 = 坏。

我喜欢盐不明显的想法，它也不需要基于一些希望一致的值，例如用户名、用户 ID、出生日期等，但正如我所说，我确实对实施表示怀疑。

那么，人们对“最佳方法解决方案”的看法和想法是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-12T22:09:11.903

[盐不需要保密](https://stackoverflow.com/questions/213380/the-necessity-of-hiding-the-salt-for-a-hash/215165#215165)。对于给定的密码，它确实需要是不可预测的。

从密码中提取盐完全没有抓住重点。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-12T21:41:48.190

盐的目的是使[彩虹表](http://en.wikipedia.org/wiki/Rainbow_table)的使用变得异常昂贵，因此尝试 1 几乎正确地解决了这个问题。基于密码的盐消除了破坏彩虹表的可变性，并且试图将其隐藏在散列密码字段中是毫无意义的。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-05-12T22:16:28.070

我之前问过一个[类似](https://stackoverflow.com/questions/674904/salting-your-password-best-practices)的问题。共识是这样的：

你如何加盐并不重要，只要你：

1.  在你散列之前加盐
2.  使用每个密码唯一的随机盐
3.  使用足够大的盐来制作彩虹桌。

您甚至可以将您的盐存储在您的散列密码旁边，并感到非常自信。

就我个人而言，我发现 GUID（字符串格式）非常适合 Salts。它们需要一行代码来生成，并且字符串格式的大小足以让彩虹表花费数千年的时间来计算。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-12T21:36:28.790

*（编辑答案，因为我最初误读了这篇文章，并认为他只是将盐与未加盐的哈希混合在一起）*

他的技术看起来确实不错，它们会起作用，但它们并不比普通的腌制方法“更好”。这只是通过默默无闻来做安全的尝试，它并不比自己制作随机的“哈希加扰”方法并希望攻击者没有弄清楚更好。

事实上，在许多情况下，攻击者实际上很容易找出这些功能。如果该站点是公开注册的站点，则攻击者可以重复注册具有已知密码的帐户，然后使用这些密码的已知 md5 散列来对密码加扰算法进行逆向工程。即使看看他的“尝试4”的结果，我也可以很容易地做到这一点。

如果您想真正安全地存储您的密码，请远离 MD5 甚至 SHA1，转而使用加盐的、**较慢**的散列函数。这是一篇关于该主题的精彩文章：[彩虹表足够了：您需要了解的有关安全密码方案的知识](http://www.matasano.com/log/958/enough-with-the-rainbow-tables-what-you-need-to-know-about-secure-password-schemes/)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-05-12T21:37:58.303

之前有很多类似的问题被问到：

*   [PHP 密码的安全哈希和盐](https://stackoverflow.com/questions/401656/secure-hash-and-salt-for-php-passwords)
*   [“双重哈希”密码是否比仅哈希一次更安全？](https://stackoverflow.com/questions/348109/is-double-hashing-a-password-less-secure-than-just-hashing-it-once)
*   [我应该使用什么算法将密码散列到我的数据库中？](https://stackoverflow.com/questions/116684/what-algorithm-should-i-use-to-hash-passwords-into-my-database)

这应该让您了解如何散列密码。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-12T21:41:02.607

对我来说，这似乎只是为（正如 Chad Birch 指出的*被误解*的）加盐哈希方法添加了**混淆**，**而不是更多的安全性。**

 ** * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-22T16:59:04.840

有趣的是，这不仅仅是**混淆，不是更多的安全性**，而是实际上**的混淆，更少的安全性，**因为“尝试 4”仅与它使用的 CRC32 函数一样好（CRC32 仅传递密码，而不是密码+盐） - 这是倒台。

根据 Chad 的帖子，要破解“尝试 4”，只需 CRC32 加载密码，然后反转他编写的函数，留下一个加盐的 md5 哈希和盐（然后您将测试其有效性） . 只需通过计算 md5(password+salt) （其中密码是您正在尝试的密码）来测试这对，盐是您通过反转算法计算的盐。如果 md5 等于散列的前 32 个字符，则您已经破解了密码。

在某些方面，“尝试 4”比“尝试 1”更糟糕，因为它仅与整个例程中调用的最差函数一样好，在本例中为 CRC32（密码）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-22T18:40:41.743

我无法查看原始问题中的链接（该网站仅返回 404 not found 错误），但问题中描述的方法并没有真正使用加盐哈希。

本质上，这种方法只是使用非标准哈希：给定一个特定的密码，数据库中将存储一个唯一值。这就是使彩虹表攻击起作用所需的全部内容：我可以为可能的密码字典预先计算哈希值并查找任何匹配项。现在，我将不得不专门为这个非标准哈希函数预先计算彩虹表。

In a proper implementation of salted hashes, when the passord is created, a random salt is combined with the password and hashed. Then random salt used and the hash are stored. Even if I know the password, I cannot predict what the hash will be since there will be a different hash for each of the many possible salt values. Now an attacker needs to precompute a rainbow table for each possible salt value: this takes a much larger effort.

# c# - 在 C# 中显示多行静态文本的最佳方法？

> ID：854965
> 
> 赞同：3
> 
> 时间：2009-05-12T21:32:30.590
> 
> 标签：c#, text, lines

我在 C# 中进行提示，指示用户如何使用该程序，然后才能访问它。

显示多行静态文本的最佳方式是什么？使用一堆标签似乎不是正确的方法...... xD

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-12T21:33:53.520

使用标记为只读和多行的文本输入框。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-12T21:37:25.140

如果您使用的是 WinForms，您可能需要考虑将 WebBrowser 控件添加到您的表单 - 然后您可以将浏览器指向您随程序发送的 html 文件。这允许您使用所有 html 来指导您的用户，以及将他们指向您的网站以获取更多帮助或信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-12T21:37:25.420

如果文本中有换行符，则一个标签可以包含多行文本。

# linux - 在文件中查找二进制块

> ID：854967
> 
> 赞同：3
> 
> 时间：2009-05-12T21:32:54.070
> 
> 标签：linux, command-line, binary

我有一大块相当随机的二进制数据。我想找到该块在文件中的位置、出现的次数以及偏移的字节（或扇区）。关于如何做到这一点的任何想法？

谢谢，贾斯汀

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-12T22:27:23.963

我相信没有现有的命令完全符合您的要求。如果你的块很小并且你的文件适合内存，那么编写你自己的很容易。只需扫描文件内容，在每个位置应用 strncmp。

如果您的文件非常大但仍适合您的地址空间，您可以使用 mmap 执行相同的操作。

[如果您的块不小，那么使用Boyer-Moore 算法](http://en.wikipedia.org/wiki/Boyer-Moore_string_search_algorithm)而不是 strncmp可能会更好。这仍然不是太多的工作，因为已经有可以使用的实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-12T21:41:47.253

我会为此推荐[X-Ways WinHex](http://www.x-ways.net/winhex/)。我发现自己经常使用它来搜索硬盘驱动器或大型磁盘映像文件上的任意数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T23:57:04.020

你可以用 grep 来做这些

这将输出带有字节偏移量的行

`grep --text --byte-offset 'ls' /bin/ls`

添加一个`--count`参数以获取匹配的总数。

# linq-to-sql - 如何使用 LINQ 在 foreach 命令中插入多行？

> ID：854971
> 
> 赞同：0
> 
> 时间：2009-05-12T21:33:21.010
> 
> 标签：linq-to-sql, c#-3.0

我写了这些行：

```
foreach (var catId in CatIds)
{
    AdCategory.AdId = LastAd.AdID;
    AdCategory.CategoryId = catId;
    EngineDB.Ad_Categories.InsertOnSubmit(AdCategory);
    EngineDB.SubmitChanges();
} 
```

CatIds 是一个整数数组。
此命令正确插入第一个元素，但下一个循环会导致此异常：
**“无法添加已存在的实体。”**
我该如何解决。
请尽快帮助我！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-12T21:41:08.457

正如吉米所说，您需要在循环中创建一个新的 AdCategory。您可能也不希望每次都调用 SubmitChanges，此调用使用事务来确保一次添加所有项目，或者根本不添加。

尝试类似：

```
foreach (var catId in CatIds)
{
    var AdCategory = new AdCategory()
    {
        AdId = LastAd.AdID,
        CategoryId = catId
    }
    EngineDB.Ad_Categories.InsertOnSubmit(AdCategory);
}

EngineDB.SubmitChanges(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T21:36:35.623

您需要在循环中创建一个新的 AdCategory。否则，如错误所述，您会一次又一次地插入相同的对象。

你也应该搬家

```
EngineDB.SubmitChanges(); 
```

在循环之外，因此您只需对数据库进行 1 次调用。

# visual-studio - VS 2005 工具箱搞砸了

> ID：854973
> 
> 赞同：1
> 
> 时间：2009-05-12T21:33:39.917
> 
> 标签：visual-studio, visual-studio-2005

我不确定它何时发生，但在某些时候，我的 Visual Studio 2005 增长了一个名为“#13119”的组，我无法删除（当我打开代码文件时它甚至显示在工具箱中 - 这是唯一的里面的东西。

有没有什么办法解决这一问题？我尝试重置工具箱，但没有帮助。这不是什么大问题，而是令人厌烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T21:37:56.760

好像您遇到了这个问题：http:
[//zinovate.com/weblog/archive/2009/01/16/38234.aspx](http://zinovate.com/weblog/archive/2009/01/16/38234.aspx)

来自博客文章：

> 1.  确保您可以看到盒子上的所有文件夹。我们正在前往隐藏文件的领域：（在工具 --> 文件夹选项下）
>     
>     
> 2.  如果 Visual Studio 已打开，请关闭它。
>     
>     
> 3.  转到此处：C:\Users\YOUR_USER_NAME\AppData\Local\Microsoft\VisualStudio\9.0\
>     
>     
> 4.  将以下文件备份到临时文件夹中以确保安全并删除原始文件。
>     
>     
>     *   toolboxIndex_reset.tbd
>     *   工具箱索引.tbd
>     *   toolbox_reset.tbd
>     *   工具箱.tbd
> 5.  重新启动 Visual Studio，将重新创建文件。工具箱需要几秒钟才能重新填充。

# windows - 如何使用 VBScript 从文本文件中读取？

> ID：854975
> 
> 赞同：9
> 
> 时间：2009-05-12T21:33:54.007
> 
> 标签：windows, scripting, vbscript

我正在寻找一种使用 VBScript 读取和写入文本文件的简单方法。

我认为这是一种可接受的写入文件的方法。

```
 Dim f, 
 Dim fso

 Set fso = CreateObject("Scripting.FileSystemObject")
 Set f = fso.CreateTextFile("C:\test.txt", True, True)

 f.WriteLine("Data to Add to file.")
 f.Close 
```

但是，我想知道如何以类似的方式从文件中读取。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-05-12T21:47:01.580

先用方法[`OpenTextFile`](https://docs.microsoft.com/en-us/office/vba/language/reference/user-interface-help/opentextfile-method)，然后...

使用以下方法一次读取文件[`ReadAll`](https://docs.microsoft.com/en-us/office/vba/language/reference/user-interface-help/readall-method)：

```
Const ForReading = 1
Dim file, content

Set file = fso.OpenTextFile("C:\test.txt", ForReading)
content = file.ReadAll 
```

或逐行使用方法[`ReadLine`](https://docs.microsoft.com/en-us/office/vba/language/reference/user-interface-help/readline-method)：

```
Const ForReading = 1
Dim dict, file, row, line

Set dict = CreateObject("Scripting.Dictionary")
Set file = fso.OpenTextFile ("c:\test.txt", ForReading)
row = 0
Do Until file.AtEndOfStream
  line = file.Readline
  dict.Add row, line
  row = row + 1
Loop

file.Close

'Loop over it
For Each line in dict.Items
  WScript.Echo line
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-27T03:23:35.840

```
Dim obj : Set obj = CreateObject("Scripting.FileSystemObject")
Dim outFile : Set outFile = obj.CreateTextFile("in.txt")
Dim inFile: Set inFile = obj.OpenTextFile("out.txt")

' Read file
Dim strRetVal : strRetVal = inFile.ReadAll
inFile.Close

' Write file
outFile.write (strRetVal)
outFile.Close 
```

# .net - 通过 ThreadPool 循环时，我的 ThreadStatic 变量中的值是否仍然存在？

> ID：854976
> 
> 赞同：14
> 
> 时间：2009-05-12T21:33:55.253
> 
> 标签：.net, multithreading, threadpool, thread-static

我正在使用 ThreadStatic 变量来存储一些数据，但我担心我存储在线程上的数据在我完成并释放回 ThreadPool 后仍然存在。在完成线程之前，我是否需要担心清除我的 ThreadStatic 变量？或者 ThreadPool 会在为下一个 QueueUserWorkItem “传递出去”之前为我做这件事吗？这对我来说尤其重要，因为我需要确保我的应用程序中的其他线程在 ThreadStatic 变量方面具有干净的工作状态。谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-13T01:05:46.910

线程池（通过设计）使线程在调用之间保持活动状态。这意味着 ThreadStatic 变量将在对 QueueUserWorkItem 的调用之间保持不变。

这种行为也是你不应该指望的。ThreadPool 将（最终，自行决定）释放线程并让它们结束，并根据需要构造新线程。

但是，如果您遇到此问题，我会质疑您的设计。如果您需要在 QueueUserWorkItem 中使用特定的、确定性的 ThreadStatic 数据，您的线程例程可能是您自己进行线程处理的良好候选者。ThreadStatic 和 ThreadPool 并不总是一个很好的组合 - 您不一定有足够的控制权（因为 ThreadPool 管理线程）来真正利用并从 ThreadStatic 变量中受益。你永远不会知道两个工作项是否会在同一个线程上，不同的线程上，以及是否应该（重新）初始化 threadstatic 变量等。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-12T21:56:08.010

我希望它们会保留在方法之间。当然，如果有疑问，请在工作方法开始时重置线程静态变量。或使用`try`/`finally`清除每个工作单元*后的值。*

（编辑）

很容易证明它们确实存在。以上快速开始打印大于 0 的数字（如果不同的工作人员被隔离，每次 0 是我们所期望的）：

```
[STAThread]
static void Main()
{
    for (int i = 0; i < 50; i++)
    {
        ThreadPool.QueueUserWorkItem(DoStuff);
    }
    Console.ReadLine();
}
static void DoStuff(object state)
{
    Console.WriteLine(Thread.CurrentThread.ManagedThreadId + ": " + value++);
    Thread.Sleep(20);
}
[ThreadStatic]
static int value; 
```

# java - org.hibernate.hql.ast.QuerySyntaxException 与 Hibernate

> ID：854978
> 
> 赞同：12
> 
> 时间：2009-05-12T21:34:11.320
> 
> 标签：java, hibernate

我是使用 Hibernate 和 Java 的新手。我收到以下异常。我在网上找到的关于这个错误的东西似乎没有帮助。有任何想法吗？例外：

```
java.lang.IllegalArgumentException: org.hibernate.hql.ast.QuerySyntaxException: 

ApplPerfStats is not mapped [select count(c) from ApplPerfStats c]
    at org.hibernate.ejb.AbstractEntityManagerImpl.throwPersistenceException(AbstractEntityManagerImpl.java:601)
    at org.hibernate.ejb.AbstractEntityManagerImpl.createQuery(AbstractEntityManagerImpl.java:96)
    at com.icesoft.icefaces.samples.datatable.jpa.CustomerDAO.findTotalNumberCustomers(CustomerDAO.java:89)
    at com.icesoft.icefaces.samples.datatable.ui.SessionBean.getDataPage(SessionBean.java:189)
    at com.icesoft.icefaces.samples.datatable.ui.SessionBean.access$0(SessionBean.java:185)
    at com.icesoft.icefaces.samples.datatable.ui.SessionBean$LocalDataModel.fetchPage(SessionBean.java:245)
    at com.icesoft.icefaces.samples.datatable.ui.PagedListDataModel.getPage(PagedListDataModel.java:121)
    at com.icesoft.icefaces.samples.datatable.ui.PagedListDataModel.getRowCount(PagedListDataModel.java:100)
    at com.icesoft.faces.component.datapaginator.DataPaginator.isModelResultSet(DataPaginator.java:1091)
    at com.icesoft.faces.component.datapaginator.DataPaginatorRenderer.encodeBegin(DataPaginatorRenderer.java:201) 
```

这个地方叫：

```
@SuppressWarnings("unchecked")
public Long findTotalNumberCustomers() {
    EntityManagerHelper.log("finding number of Customer instances", Level.INFO, null);
    try {
        String queryString = "select count(c) from ApplPerfStats c";
        return (Long) getEntityManager().createQuery(queryString).getSingleResult();
    } catch (RuntimeException re) {
        EntityManagerHelper.log("find number of Appl_perf_stats failed",
                Level.SEVERE, re);
        throw re;
    }
} 
```

映射到数据库表的类：

```
package com.icesoft.icefaces.samples.datatable.jpa;

import java.sql.Timestamp;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name = "Appl_perf_stats", uniqueConstraints = {})
public class ApplPerfStats implements java.io.Serializable {
..... 
```

谢谢，

谭

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-12T22:50:39.357

尝试在文件中的 ,`class`下添加一个元素。`persistence-unit``persistence.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence ...>

    <persistence-unit name="unit">
        <class>com.icesoft.icefaces.samples.datatable.jpa.ApplPerfStats</class>
        ...
     </persistence-unit>
<persistence> 
```

除了 JPA/EntityManager 之外，我还没有做更多的事情，所以我不知道是否有办法添加整个包。AFAIK，使用时`hibernate.cfg.xml`，必须直接指定每个持久类。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-12-24T13:57:55.597

它发生在我身上，直到我开始使用完整的类名，例如：

```
String queryString = "select count(c) from com.my.classes.package.ApplPerfStats c"; 
```

但我不喜欢这种方法，因为它的重构并不友好。一个更容易处理的是：

```
String queryString = "select count(c) from " + ApplPerfStats.class.getName() +  c"; 
```

javashlook 的解决方案似乎是一个捷径——但它增加了更多的 XML 配置，我尽量避免。如果只有一种基于注释的方式来指定...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-11-16T17:18:31.427

我遇到了同样的问题，我通过将 aspectj 条目添加到我的 pom.xml 来解决，见下文。我想如果您使用注释是有道理的。否则，您需要在 XML 文件中指定映射。我在使用带有 JPA 注释的 jar 的项目中遇到了这个问题。

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>aspectj-maven-plugin</artifactId>
            <version>1.2</version> <!-- NB: do use 1.3 or 1.3.x due to MASPECTJ-90 - wait for 1.4 -->
            <dependencies>
                <!-- NB: You must use Maven 2.0.9 or above or these are ignored (see MNG-2972) -->
                <dependency>
                    <groupId>org.aspectj</groupId>
                    <artifactId>aspectjrt</artifactId>
                    <version>${aspectj.version}</version>
                </dependency>
                <dependency>
                    <groupId>org.aspectj</groupId>
                    <artifactId>aspectjtools</artifactId>
                    <version>${aspectj.version}</version>
                </dependency>
            </dependencies>
            <executions>
                <execution>
    <configuration>
        <weaveDependencies>
        <weaveDependency>                                     <groupId>your.project</groupId>                        <artifactId>your.artifact</artifactId>                     </weaveDependency>                    
        </weaveDependencies>
        </configuration>
                    <goals>
                        <goal>compile</goal>
                        <goal>test-compile</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <outxml>true</outxml>
                <aspectLibraries>
                    <aspectLibrary>
                        <groupId>org.springframework</groupId>
                        <artifactId>spring-aspects</artifactId>
                    </aspectLibrary>
                </aspectLibraries>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T21:38:56.633

您应该指定一个列来进行计数

```
select count(c.someColumn) from ApplPerfStats c 
```

或尝试计数（*）

```
select count(*) from ApplPerfStats c 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-25T10:41:49.890

我遇到了这个问题，但在我的情况下，问题是由于 gradle 版本。
当我将系统从 linux 更改为 mac 时，我不得不从**gradle-1.0-milestone-3**切换到**gradle-1.0-milestone-4**，因为里程碑 3 在 OSX 中不起作用。在 gradle-1.0-milestone-4 中，我遇到了同样的问题，然后我不得不将我的 gradle 版本降级为 gradle-1.0-milestone-1。现在它工作正常

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-11T12:04:16.237

我也遇到了这个问题...

您尚未在 persistence.xml 配置文件中声明实体类：

```
<property name="hibernate.archive.autodetection" value="class, hbm"/> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-22T07:21:25.513

我知道这件事已经很久了，但是以上答案都没有解决我的问题。

我已经在 persistence.xml 文件中声明了实体。最后，整个问题只是**实体名称在我的系统上区分大小写**。

这个 jpql 是错误的

> SELECT u FROM **user** u WHERE userId = 1？

但是这个工作正常

> SELECT u FROM **User** u WHERE userId = 1？

# mysql - 生产环境中随机长 DB 查询/Memcache 获取

> ID：854979
> 
> 赞同：0
> 
> 时间：2009-05-12T21:34:13.240
> 
> 标签：mysql, ruby-on-rails, ruby, memcached, sysadmin

我无法诊断我在 ubuntu scalr/ec2 生产环境中遇到的问题。

问题显然是随机的，数据库查询和/或 memcache 查询将花费比应有的更长的时间。我见过一个简单的 select 语句需要 130 毫秒或 Memcache 提取需要 65 毫秒！每个请求可能会发生几次，导致某些请求花费的时间是应有的两倍。

为了诊断问题，我编写了一个非常简单的脚本，它只连接到 MySql 服务器并运行查询。

```
require 'mysql'

mysql = Mysql.init
mysql.real_connect('', '', '', '')

max = 0
100.times do
  start = Time.now
  mysql.query('select * from navigables limit 1')
  stop = Time.now

  total = stop - start
  max = total  if total > max
end

puts "Max Time: #{max * 1000}"

mysql.close 
```

该脚本始终返回非常高的最大时间，因此我消除了任何 Rails 作为问题的根源。我还在 Python 中编写了相同的东西来消除 Ruby。事实上，Python 也花费了过多的时间！

MySql 和 Memcache 都在自己的盒子上，所以我考虑了网络延迟，但看`ping`s 和`traceroute`ing 看起来很正常。

在各自的机器上运行查询/获取也会返回预期的时间，并且我在我的登台机器上运行相同版本的 gems 而没有这个问题。

我真的很难过这个......对我可以尝试诊断的任何想法有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-14T03:52:13.803

我唯一的想法是它可能是磁盘？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-12-15T18:14:14.603

Mysql 使用查询缓存来存储 SELECT 及其结果。这可以解释您在连续选择中获得的恒定速度。尝试 EXPLAIN-inig 查询以查看您是否正在使用索引。

我不明白为什么 memcache 会成为问题（除非它崩溃并重新启动？）。检查您的服务器日志中是否存在可疑的服务故障。

# javascript - 如何在div中的几个中获得1个隐藏字段

> ID：854982
> 
> 赞同：1
> 
> 时间：2009-05-12T21:35:32.880
> 
> 标签：javascript, jquery

我在 1 个 div 中有 3 个隐藏字段。当我参考这个 div 时，如何在这个 div 中获取 1 个隐藏字段。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-12T21:54:40.600

这也将起作用（jQuery）：

```
$('#my_div').find('input[type=hidden]:first') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-12T21:48:08.380

假设您有一个 DIV，如下所示：

```
<div id="mydiv">
    <input type="hidden">
    <input type="hidden">
    <input type="hidden">
</div> 
```

您可以使用 jQuery 执行以下操作来选择所有这些：

```
$('input:hidden','#mydiv'); 
```

使用该选择器，现在您在 jQuery 集合中拥有所有 3 个隐藏字段。您可以通过以下几种方法从中选择要使用的一种：

```
$('input:hidden:first','#mydiv'); // get first one using first
$('input:hidden:last','#mydiv'); // get last one using last
$('input:hidden','#mydiv').eq(0); // get first one using eq
$('input:hidden','#mydiv').eq(1); // get second one using eq
$('input:hidden','#mydiv').eq(2); // get third one using eq
$('input:hidden:eq(0)','#mydiv'); // get first one using eq in selector 
```

选项包括：

*   [`first`](http://docs.jquery.com/Selectors/first)- 获取集合中的第一个匹配元素。
*   [`last`](http://docs.jquery.com/Selectors/last)- 获取集合中最后一个匹配的元素。
*   [`eq(N)`](http://docs.jquery.com/Traversing/eq#index)- 获取第 N 个匹配元素，从 0 开始。
*   [`:eq(N)`](http://docs.jquery.com/Selectors/eq#index)- 获取选择器字符串中的第 N 个匹配元素，从 0 开始。

我个人是选项 3 的粉丝，因为我不喜欢在我的选择器中有太多废话。

上面的一个警告是，通过使用`:hidden`选择器，我们可能会匹配其他隐藏的输入元素（即不可见）。如果您希望发生这种情况，或者即使您不希望发生这种情况，您也可以这样做：

```
$('input[type=hidden]', '#mydiv').eq(0); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-12T21:38:51.890

没有任何代码很难提供帮助，但我会说给隐藏字段一个 ID 并使用：

```
var hdn = document.getElementById("id"); 
```

或者，如果您使用的是 Jquery，请使用：

```
var hdn = $("#id"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-12T21:38:48.130

```
var firstHidden = $("input[type='hidden']:first", ref); 
```

[:first 伪类](http://docs.jquery.com/Selectors/first)和[属性选择器](http://docs.jquery.com/Selectors/attributeEquals#attributevalue)

或者

```
var firstHidden = $("input:hidden:first", ref); 
```

[:hidden 伪类](http://docs.jquery.com/Selectors/hidden)（要小心，因为 :hidden 也会找到 style="display: none" 的元素）

或者

```
var firstHidden = $("input[type='hidden']", ref).eq(0); 
```

[.eq()](http://docs.jquery.com/Traversing/eq#index)

其中 'ref' 变量是对 DIV 元素的引用

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-12T21:43:30.590

如果是这样：

```
<div id="somediv">
    <input type="hidden"/>
    <input type="hidden"/>
    <input type="hidden"/>
</div> 
```

而你正在使用 jquery，你可以这样写：

```
$("#somediv > input[type='hidden']:eq(1)") 
```

它应该返回对第一个隐藏字段的引用。如果你想要第二个，使用“eq(2)”等等。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-12T21:48:18.490

我会为你想要找到的隐藏分配一个类 - 程序员在 4 年后回顾它会更容易一些。我使用“id”作为隐藏的示例。一旦你用 jQuery 找到它——你可以使用 .val() 来获取它的值。

HTML：

```
<div id="mydiv">
  <input type='hidden' name='mydiv_id' class='idField' value='test1' />
  <input type='hidden' name='mydiv_hidden2' class='option2' value='test2' />
  <input type='hidden' name='mydiv_hidden3' class='option3' value='test3' />
</div> 
```

jQuery：

```
//execute on document ready:
$(function() {
  var div = $('#mydiv'); //some jquery/dom element "div"

  // use the jQuery selector with "div" as our context.
  var $hidden = $('input.idField', div);

  alert($hidden.val()); // should alert 'test1'
}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-18T18:59:41.193

作为参考，如果您没有像原始海报那样使用 jQuery 并假设上面的结构：

```
<div id="mydiv">
  <input type="hidden">
  <input type="hidden">
  <input type="hidden">
</div>

var div = document.getElementById('mydiv');
var inputs = div.getElementsByTagName('input');
for(var i = 0; i < inputs.length; i++){
  // Match your input with inputs[i].name, etc.
} 
```

# c# - .NET 的迷你 Web 服务器

> ID：854993
> 
> 赞同：15
> 
> 时间：2009-05-12T21:37:52.580
> 
> 标签：c#, .net, vb.net, windows-services

我编写了一个 VB.NET Windows 服务，我想知道是否有一些库或其他东西可以为我提供一个非常简单的迷你 Web 服务器。如果我的服务正在运行，我希望能够在浏览器中输入：

[http://localhost:1234](http://localhost:1234)

并有一个状态页面弹出。它将只有一个页面和非常简单的 html。在我自己尝试和过度设计之前，有人知道这样做的简单方法吗？哈哈

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-12T21:43:27.813

查看 System.Net.HttpListener 类。您可以指定要侦听的端口，它会很快启动并运行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-12T21:46:43.237

如果您使用的是 .NET 2.0，您可以使用WindowsXP SP2 和 Windows 2003 Server 提供的组件`System.Net.HttpListener`来创建自己的 Web 服务器。`HTTP.SYS`

[在http://msdn.microsoft.com/sv-se/magazine/cc163879(en-us).aspx](http://msdn.microsoft.com/sv-se/magazine/cc163879(en-us).aspx)上有一篇关于在不使用 IIS 的情况下使用 http.sys 托管 Web 服务的文章

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-12T21:41:03.057

您应该查看 Windows Communication Foundation。该框架允许您托管自己的 HTTP 端点，您可以在其上提供任何您想要的服务。这是[MSDN 上的示例](http://msdn.microsoft.com/en-us/library/bb412178.aspx)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-12T21:53:19.590

可能[是来自 Microsoft 的 Cassini 服务器](http://www.asp.net/downloads/archived/cassini/)（或[来自 UltiDev 的 Cassini 的变体](http://ultidev.com/products/Cassini/)），它使用的技术与您在没有 IIS 的 Visual Studio 中调试 ASP.NET 或 Web 服务时使用的技术相同。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-13T20:14:52.533

我实际上找到了一个非常好的库，其中包含我正在寻找的内容：

[http://www.codeproject.com/cs/internet/minihttpd.asp](http://www.codeproject.com/cs/internet/minihttpd.asp)

如果其他人需要一个小型迷你网站，请查看该链接。我试过了，很喜欢。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-12T21:52:25.567

试试[卡西尼](http://www.ultidev.com/Products/Cassini)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-25T12:24:17.563

还有一些建议：

*   [NancyFX](https://github.com/NancyFx/Nancy/wiki/Documentation)（寻找自我主机）
*   [皮艇](http://kayakhttp.com/)
*   [WebServiceHost](http://msdn.microsoft.com/en-us/library/system.servicemodel.web.webservicehost.aspx)（与 WCF 服务结合使用）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-12T22:43:35.873

试试 WebDev.WebServer.exe。您可以使用它传递参数，例如我们的端口和目录。******`