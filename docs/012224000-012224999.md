# StackOverflow 问答 12224000-12224999

# javascript - HTML 选择，在 DOM 中选择了正确的选项，但在 Firefox 中显示了错误的项目

> ID：12224000
> 
> 赞同：3
> 
> 时间：2012-09-01T00:39:21.127
> 
> 标签：javascript, jquery, html, firefox

这实际上是从[另一个 SO question](https://stackoverflow.com/questions/12219587/multiple-ember-selects-bound-to-a-single-controller-selects-do-not-synchronize)中整理出来的问题。

在此处的 jsFiddle 示例[http://jsfiddle.net/5WrcD/2/show/](http://jsfiddle.net/5WrcD/2/show/)中，当您更改一个时`select`，另一个获得同步的值。`select`请在打开 Firebug 并扩展两个菜单的情况下尝试此操作。

当您第一次加载页面并将 first select 更改为`20`时，`selected="selected"`两者都变为`20`DOM，但未显示在显示中。

知道为什么会这样吗？

该示例使用`Ember.js`库，但无论如何显示应该反映 DOM 状态，对吗？

> 这个错误只发生在 Firefox 中，这是一个 Firefox 特定的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T09:45:28.340

我刚刚通过`val`为选择元素设置了类似的问题。

我`select`有两个条目，我想以编程方式（jQuery）激活第二个条目，这可以通过更改`selected`属性来完成，但是 Firefox 17.0 没有重绘选择，它没有显示新的 selected `option`。

```
<select id="yesno">
<option value="true" selected="selected">Yes</option>
<option value="false">No</option>
</select> 
```

这个 jQuery-Snippet 成功了，现在我在以编程方式修改它时看到 FF 17.0 中的选择“No”：

```
var yesnosel = $("#yesno");
yesnosel.val("false");
yesnosel.find("option").removeAttr("selected");
yesnosel.find("option[value='false']").attr("selected", "selected"); 
```

设置`val`可能就足够了，但我还想要一个更新的`selected option`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T00:50:19.153

适用于 Chrome/Safari，不适用于 FF。也许这两个 Ember.js 警告意味着什么：

1.  警告：默认情况下，计算属性很快就会被缓存。要在您的应用中启用此功能，请设置`ENV.CP_DEFAULT_CACHEABLE = true`. ember-0.9.8.1.js（第 65 行）

2.  警告：{{view}} 助手影响模板的方式即将改变。以前，子视图中的模板将使用新视图作为上下文。很快，视图将在渲染其模板时保留其父上下文。您可以通过设置提前选择加入新行为`ENV.VIEW_PRESERVES_CONTEXT = true`。有关更多信息，请参阅[https://gist.github.com/2494968](https://gist.github.com/2494968)。您应该尽快更新您的模板；这个默认值很快就会改变，并且该选项将在 1.0 版本之前完全取消。

* * *

## 更新#1：

看起来关闭所有选定的（在创建元素之后）也有帮助。附加到脚本的末尾：

```
setTimeout( function (){ $('option').prop('selected',false); } , 100 );
// Anonymized as per Fabrício Matté's suggestion 
```

**注意：**可能会有一个回调，您可以在其中执行此操作，而不是在 100 毫秒后自动运行它。

* * *

## 更新#2：

看起来您可以删除 Ember 创建的内容，而不是设置选项的属性：

```
App.myController = Ember.Object.create({
   //content: 10    /* comment out, remove, or set to '' instead of 10 */
}); 
```

**注意：**我不使用 Ember，所以我不知道这是否会影响任何事情

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T02:15:15.407

几行 jQuery =)

[http://jsfiddle.net/xXC9t/](http://jsfiddle.net/xXC9t/)

# python - 清理 Google App Engine 中未过期的会话

> ID：12224001
> 
> 赞同：0
> 
> 时间：2012-09-01T00:39:41.917
> 
> 标签：python, google-app-engine, session, cookies

我正在使用[gae-sessions](https://github.com/dound/gae-sessions)。客户端是一个 iOS 应用程序，我希望会话在应用程序的生命周期内持续存在（因此会话过期或无效的唯一方法是用户注销或用户删除应用程序时，否则会话没有过期日期）。我不认为我想使用 cookie，因为 cookie 是短暂的（或者我应该吗？）

所以我正在做的是创建一个新会话，获取为该会话自动生成的 SID（会话 id，一个随机字符串），并将该字符串发送回客户端并将其保存在那里。现在每次用户发送请求时，会话 id 也被发送过来，我使用这个 id 获取当前会话：

```
# gets the session with given session id
session = gaesessions.Session(sid = session_id) 
```

首先，这种方法有什么问题吗？有一个更好的方法吗？

现在，当用户注销时，很容易提交请求以使具有给定 ID 的会话无效。但是，如果用户删除该应用程序，我将无法获得该会话并删除它。那么我将如何清理不再有效的会话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T04:15:37.680

我想知道你为什么需要一个会话。只需将数据存储在数据存储中的某个每个用户对象中。然后很容易引用该用户。我假设您已经在存储会话以外的某种用户数据。

但是，此答案并不能解决问题，您永远不知道用户是否删除了该应用程序，因此您将永远拥有该用户数据。这更像是一个政策问题，而不是技术问题。

如果您确实想删除用户数据，则需要设置某种策略（即，如果您在 2 年内未登录，我们将删除您的帐户）。在这种情况下，您的到期时间基本上是 2 年。您将需要一个定期运行并清除过期用户（或会话）的 cron 作业。

顺便说一句，gae-sessions 包括过期会话的示例清理代码，包括 cron 处理程序。

# iphone - 如何在 iPhone 上隐藏加载

> ID：12224007
> 
> 赞同：1
> 
> 时间：2012-09-01T00:40:52.230
> 
> 标签：iphone, xcode, jquery-mobile

![在此处输入图像描述](../Images/de52a761e915843d3d952cfbdfc4127b.png)

您可以在页脚下方看到“正在加载”。我该如何摆脱它？它也显示在 iPhone 设备上。

我认为这与 jQuery 作为本地文件夹有关

```
<script src="js/1.7_jquery.min.js"></script> 
```

代替

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

我没有在 xcode 上做任何事情来隐藏“正在加载”？请告知我是否需要在 info.plist 上做任何事情？

**更新：**看起来它不是 jQuery，因为在查看时加载仍然出现在实时浏览器上。

# php - 检索包含指定值的键列表的最快方法

> ID：12224008
> 
> 赞同：0
> 
> 时间：2012-09-01T00:41:10.420
> 
> 标签：php, arrays

创建检索键列表的函数的最快/最佳方法是什么，所有键都包含数组中的特定值：

```
$array = ( 0 => 0,
           1 => 0,
           2 => 1,
           3 => 2,
           4 => 1 );

$keys= retrieve_keys_with_value( 1, $array );
var_dump($keys);
/* 
array(2) {
  [0] => int(2)
  [1] => int(4)
}
*/ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-01T00:43:39.443

```
$keys = array_keys($array, 1); 
```

[http://www.php.net/manual/en/function.array-keys.php](http://www.php.net/manual/en/function.array-keys.php)

您可能还想传递第三个参数（严格检查）。默认为`false`。

*记住。它是 PHP，几乎总是有你正在做的事情的功能*；）

# python - 如何在 Tornado 中设置自定义未处理的异常处理程序？

> ID：12224014
> 
> 赞同：5
> 
> 时间：2012-09-01T00:43:32.423
> 
> 标签：python, web, tornado

我正在尝试通过覆盖该`tornado.web.Application._handle_request_exception`方法来实现自定义未处理的请求异常日志记录：

```
def _handle_request_exception(self, e):
    logging.error('error')  # Just for test. 
```

但我看到相同的日志输出，如：

```
2012-09-01 03:35:09,947 [7399] root ERROR: Uncaught exception GET / (127.0.0.1)
HTTPRequest(...)
Traceback (most recent call last): 
```

而不是我的自定义消息。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T21:47:29.683

好吧，首先，`_handle_request_exception`方法是 in `RequestHandler`，而不是`Application`。

其次，您不能在主命名空间中使用新定义覆盖绑定方法：

```
def _handle_request_exception(self, e):
    logging.error('error') 
```

您需要对类进行子`RequestHandler`类化：

```
class BaseHandler(tornado.web.RequestHandler):
    def _handle_request_exception(self, e):
        logging.error('error') 
```

然后，您的所有处理程序都应继承自`BaseHandler`.

# c# - 如何使用 C#/.NET 检索打印机图标

> ID：12224018
> 
> 赞同：2
> 
> 时间：2012-09-01T00:43:59.350
> 
> 标签：c#, .net, printing, printers

> **可能重复：**
> [我可以通过 .Net 获取与已安装打印机关联的图标吗？](https://stackoverflow.com/questions/4680932/can-i-get-the-icon-associated-with-an-installed-printer-through-net)

如何使用 C#.NET 检索与打印机关联的图标？理想情况下，我希望在“打印机和设备”文件夹中显示图标，以便在我的应用程序中使用打印机。

一种方法是使用已安装的打印机对文件夹的路径进行硬编码，然后一个接一个地手动检索图标。这个问题已经[在这里](https://stackoverflow.com/questions/4680932/can-i-get-the-icon-associated-with-an-installed-printer-through-net)问过了。

但是，这种方法依赖于扫描给定文件夹、获取关联的打印机、将打印机名称与检索到的名称匹配并显示它们。

由于两个原因，这种方法可能不稳定：

1.  这涉及将位置硬编码到打印机（可能因操作系统/版本而异）

2.  无法保证显示的打印机名称将与应用程序中已登记的打印机名称相匹配。

是否有不涉及扫描/手动方法的编程/托管方法，但可以将图标作为某些托管 .NET 对象的属性检索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T17:42:00.713

使用[KnownFolders](http://msdn.microsoft.com/en-us/library/bb762584%28VS.85%29.aspx)，您可能可以获得所有已安装打印机的图标及其路径。

有一个带有 GUID {76FC4E2D-D6AD-4519-A663-37BD56068185} 的 FOLDERID_PrintersFolder，它是设备和打印机文件夹。

[对于 C#，您可以在Windows® API Code Pack for Microsoft® .NE​​T Framework](http://archive.msdn.microsoft.com/WindowsAPICodePack)中访问它们。

现在要获取图标，您创建此控制面板项的快捷方式，用记事本查看它，里面会有图标的路径。就我而言，它是'C:\Users\xxx\appdata\Local\Microsoft\Device Metadata\dmrccache\en-US\4a65bbe0-2f89-48c1-b84c-8ffdf878dc43\DeviceInformation\thinkpad.ico'。

使用[Shell Links](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776891%28v=vs.85%29.aspx#Shellink_Creating_Shortcut)或[在目录中创建应用程序快捷方式](https://stackoverflow.com/questions/234231/creating-application-shortcut-in-a-directory)来创建快捷方式

# javascript - 如何动态添加到 JavaScript 对象？

> ID：12224024
> 
> 赞同：0
> 
> 时间：2012-09-01T00:46:36.327
> 
> 标签：javascript, jquery

我似乎无法弄清楚如何获得以下结果......

```
var errors;
errors = { username: "username_error", email: "email_error" }; 
```

...在此代码中循环数据时：

```
var errors = {}
$.each(data,function(k,v)
{
   errors[k] = v; // doesn't seem to work
}); 
```

它确实产生了一个不同格式的对象。

编辑：控制台日志。

预期成绩：

```
Object
email: "email_error"
username: "username_error"
__proto__: Object
 edit:25
Object
__proto__: Object 
```

生成的结果：

```
Object
email: Array[1]
0: "email_error"
length: 1
__proto__: Array[0]
username: Array[1]
0: "username_error"
length: 1
__proto__: Array[0]
__proto__: Object 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T01:00:49.110

根据您在日志输出中发布的结果，其中的对象似乎`data`是数组。尝试用这个替换作业：

```
errors[k] = v.length>0 ? v[0] : "" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T01:01:16.427

尝试这个

```
var errors = {}
$.each(data,function(k,v)
{
   errors[k] = v[0];

}); 
```

[**演示**](http://jsfiddle.net/J4Jqk/2/)。

# iphone - iPhone SDK：NSScanner 随机崩溃

> ID：12224027
> 
> 赞同：2
> 
> 时间：2012-09-01T00:47:05.337
> 
> 标签：iphone, ios, xcode, crash, nsscanner

我有一个应用程序可以扫描网站上的文本以获取信息并将其放入我的应用程序中。所以在这种情况下，我正在检索用户在 facebook 上的通知数量。一切正常，只是应用程序随机崩溃。这是我在文本中搜索数字的代码：

```
 NSScanner *theScanner = [NSScanner scannerWithString:facebookTextF];
NSScanner *theScanner2 = [NSScanner scannerWithString:facebookTextFa];

[theScanner scanUpToString:@"Notifications" intoString:&facebookTextFa] ;
[theScanner scanUpToString:@"\n" intoString:&facebookTextF] ;
NSString *NotificationsValue;
if ([facebookTextF isEqualToString:@"Notifications"]) {
    NotificationsValue = @"0";
    NSLog(@"%@", NotificationsValue);

       } else {
    [theScanner2 scanUpToString:@"Notifications" intoString:nil] ;
    [theScanner2 setScanLocation:([theScanner2 scanLocation] + 13)];
    [theScanner2 scanUpToString:@"\n" intoString:&facebookTextFa] ;

               NSLog(@"%@", facebookTextFa);

                    } 
```

此代码运行良好，但只是随机崩溃。这是我得到的崩溃日志：

```
iphone[654:907] *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[NSConcreteScanner setScanLocation:]: Range or index out of bounds' 
```

***第一掷调用堆栈：（0x3361b6c3 0x398b397f 0x3361b5e5 0x34d2632f 0x25147 0x34dbf78b 0x335f09ff 0x335f06b1 0x335ef321 0x3356239d 0x33562229 0x39fad31b 0x3402b8f9 0x22267 0x22208）的libc ++ abi.dylib：终止叫做抛出一个异常

无论如何，此崩溃都是随机发生的。例如，如果我让它运行一段时间，7 分钟后只是随机崩溃。不知道出了什么问题。谢谢你的关注。如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T05:01:03.010

您收到该错误消息是因为（显然）该字符串有时没有“通知”一词，因此 theScanner2 将其扫描位置设置为字符串的末尾。然后，当您尝试将扫描位置设置为提前 13 个字符时，它会超过字符串的末尾，并且您会收到超出范围的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T05:03:10.183

尝试在 NSScanner 中设置超出范围的 setScanLocation 意味着字符串的结尾以及通过设置扫描位置不存在的字符串的结尾

# php - 正则表达式在 2 个字符串之间查找一个字符串，该字符串位于 2 个子字符串不能包含单词的字符串之间

> ID：12224029
> 
> 赞同：3
> 
> 时间：2012-09-01T00:47:26.603
> 
> 标签：php, regex, html-table, negative-lookahead

我的问题的标题有点复杂，我知道，但这基本上是我想做的：

假设我有这段文字：

```
[table]
[tr]
[td]test str 1[/td]
[td]test str 2[/td]
[/tr]
[/table] 
```

会有一个正则表达式，它可以让我找到：

*   [td] 和 [/td] 标记之间的字符串
*   其中从 [td] 到 [/td] 的整个部分本身就在 [table] 和 [/table] 标记之间
*   [table] 和 [td] 标签之间的文本不能包含 [/table] 标签
*   [/td] 和 [/table] 标签之间的文本不能包含
    [table] 标签

这听起来很明显，但它应该是一个安全的正则表达式，因为这个正则表达式将用于处理用户输入，如果用户要在表格之外输入 [td]（所有标签都转换为 html），它可以影响用于我网站页面布局的表格。

所以它应该首先匹配“test str 1”，然后再匹配“test str 2”，但前提是该字符串在 td 标记内，而 td 标记又应该在表标记内，而表标记之间可能不是另一个表标记.

这与我得到的一样接近：

```
/\[table(.*?)\]((?!\[\/table\]).*?)\[td(.*?)\](.*?)\[\/td\]((?!\[table(.*?)\]).*?)\[\/table\]/si 
```

但我认为我在 table 标签不应该存在的部分中遗漏了一些东西，所以在 table 和 td 标签之间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T13:48:33.400

HTML 是一种上下文无关语言，而正则表达式用于正则语言。如果您查看形式语言的乔姆斯基层次结构，您会发现您尝试做的事情不可能以任何可靠的方式完成。

# python - Django facebook 应用程序：缺少签名请求

> ID：12224031
> 
> 赞同：4
> 
> 时间：2012-09-01T00:48:13.563
> 
> 标签：python, django, django-views, django-urls, pythonanywhere

受 Hacker News 20 分钟内写一个 facebook 应用程序的启发，我正在编写一个 facebook 应用程序，主页运行良好：显示空的诗歌列表。但是，我无法创建从一个视图到另一个视图的链接。

我正在使用 django，这里有一些代码：

来自 urls.py

```
urlpatterns = patterns('',
    url(r'^$', 'crosswords.ugly.views.home', name='home'),
    url(r'^create/$', 'crosswords.ugly.views.create', name='create'), 
```

从views.py：

```
@canvas_only
def create(request):
    if request.method == 'GET':
        return render(request, 'create.html', {
            'form': PoemEntryForm(request.GET)
        }) 
```

来自：模板：home.html

```
<p>Would you like to create a <a href="/create/">new poem</a>?</p> 
```

请让我知道是否有任何特定文件可以发布以阐明问题，我会这样做。我在 urls.py 和 home.html 中尝试了 /create/、/create 甚至 create/ 的各种变体。

问题是我不断收到此消息：

> 400 错误请求
> 
> 缺少签名请求。

尝试单击 home.html 中的链接时。经验丰富的 django、facebook 或开发人员的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T01:22:28.227

我找到了问题的答案：

问题是我没有`<a href="site{% url url_name %}">...`按照 urls.py 中的定义使用。在这种情况下，创造了`<a href="site{% url create %}">...`奇迹:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T01:06:01.853

在花了几个小时试图弄清楚为什么我的应用页面上的一个简单链接会带来可怕的消息“400 Bad Request - Missing signed_request”之后。我遇到了这个帖子，我终于开始解谜了。

[单击链接时缓慢加载 Facebook 画布应用程序（如果目标顶部）](https://stackoverflow.com/questions/9811509/slow-load-facebook-canvas-app-when-click-on-links-if-target-top)

简而言之：您不需要在视图上使用任何装饰器（例如@canvas_only 或@facebook_required）。相反，正如建议的那样，在您第一次获得该信息（例如 FB 用户 ID 和名称）时，将信息保存在会话中。我是在我的主页上做的（唯一一个用@canvas_only 装饰的视图）。注意事项：为了能够在会话中存储某些内容，您需要在 settings.py 中启用它：在 MIDDLEWARE 部分中应该已经可以了，但也可以通过取消注释条目 'django. contrib.sessions'。
现在执行一个同步数据库（python manage.py syncdb）以确保创建了相关表（我假设会话存储在数据库中）。如果您需要它来进一步调用 FB API，还将 access_token 存储在会话中（request.session ['signed_request'

但是，真正导致问题的原因是重定向到视图末尾的页面，例如。使用redirect() 或使用HttpResponseRedirect()。这会触发 GET 请求而不是 POST。
哦，顺便说一句，我有没有提到所有的 GET 请求都变成了 POSTS？哈哈哈它变得混乱嘿？此外，还有一些严重的安全隐患需要考虑。

我自己也刚开始玩这些东西，所以请把目前的信息当作提示和线索，而不是诫命。

# c++ - 使用 Qt 的打印功能

> ID：12224039
> 
> 赞同：1
> 
> 时间：2012-09-01T00:50:35.783
> 
> 标签：c++, qt, printing

我会让这个相当快，因为​​这是一个非常简单的问题。如何在 Qt 中创建一个插槽，打印出我的文本编辑器中的所有内容。只是一个打印按钮，其行为与您期望的打印按钮行为一样。我正在阅读有关 QPrintDialog 的信息，但我无法让它工作。这是我尝试过的：

```
QPrintDialog printDialog(printer, this);
if(printDialog.exec() == QDialog::Accepted){
    ui->textBox->print(printer);
} 
```

我尝试在它之前做 QPrinter *printer = new QPrinter ......但这给了我各种各样的错误，我有点认为它会。我已经有#include QPrintDialog 那么我该如何真正让它工作呢？非常感谢任何帮助或建议。

编辑：我一直在寻找我的问题的答案，如果有意义的话，我发现了一个似乎更接近工作的代码。

QPrinter 打印机；

```
QPrintDialog *printDialog = new QPrintDialog(&printer, this);
printDialog->setWindowTitle("Print Document");
if (printDialog->exec() != QDialog::Accepted)
         return; 
```

但是，现在我收到一条错误消息：

```
C:\Documents and Settings\Me\My Documents\C++ Projects\Qt Gui Applications\WordWrite-build-desktop-Qt_4_8_1_for_Desktop_-_MinGW__Qt_SDK__Debug\..\WordWrite\wordwritemain.cpp:130: error: aggregate 'QPrinter printer' has incomplete type and cannot be defined 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T01:27:41.877

我在诺基亚网站的帮助部分解决了问题的答案。我使用的代码是：

```
QPrinter printer;
QPrintDialog *printDialog = new QPrintDialog(&printer, this);
printDialog->setWindowTitle("Print Document");
if (printDialog->exec() != QDialog::Accepted){
    ui->textBox->print(&printer);
} 
```

这基本上是我之前所做的，除了：

*   我添加了 &printer 而不是打印机

`- I added #include <QPrinter>`

无论如何感谢您的帮助，我希望这对未来的文本编辑器开发人员有所帮助。

# go - Go Tour 练习 #7：二叉树等价

> ID：12224042
> 
> 赞同：67
> 
> 时间：2012-09-01T00:51:37.210
> 
> 标签：go

我正在尝试在 go tour 中解决[等效的二叉树](https://tour.golang.org/concurrency/7)练习。这就是我所做的；

```
package main

import "tour/tree"
import "fmt"

// Walk walks the tree t sending all values
// from the tree to the channel ch.
func Walk(t *tree.Tree, ch chan int) {
    if t.Left != nil {
        Walk(t.Left, ch)
    }
    ch <- t.Value
    if t.Right != nil {
        Walk(t.Right, ch)
    }

}

// Same determines whether the trees
// t1 and t2 contain the same values.
func Same(t1, t2 *tree.Tree) bool {
    ch1 := make(chan int)
    ch2 := make(chan int)
    go Walk(t1, ch1)
    go Walk(t2, ch2)
    for k := range ch1 {
        select {
        case g := <-ch2:
            if k != g {
                return false
            }
        default:
            break
        }
    }
    return true
}

func main() {
    fmt.Println(Same(tree.New(1), tree.New(1)))
    fmt.Println(Same(tree.New(1), tree.New(2)))
} 
```

但是，如果树中没有更多元素，我不知道如何发出信号。我不能使用`close(ch)`on`Walk()`因为它会在发送所有值之前关闭通道（因为递归。）有人可以帮我吗？

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-09-01T03:18:16.490

[golang-nuts 组](https://groups.google.com/forum/?fromgroups=#!topic/golang-nuts/gva8SmZGmek)中提出了一个使用[闭包](http://golang.org/doc/codewalk/functions/)的优雅解决方案，

```
func Walk(t *tree.Tree, ch chan int) {
    defer close(ch) // <- closes the channel when this function returns
    var walk func(t *tree.Tree)
    walk = func(t *tree.Tree) {
        if t == nil {
            return
        }
        walk(t.Left)
        ch <- t.Value
        walk(t.Right)
    }
    walk(t)
} 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-09-01T01:07:57.013

如果您的 Walk 函数不会自行递归，您可以使用 close() 。即步行会做：

```
func Walk(t *tree.Tree, ch chan int) {
    walkRecurse(t, ch)
    close(ch)
} 
```

walkRecurse 或多或少是您当前的 Walk 函数，但在 walkRecurse 上递归。（或者您将 Walk 重写为迭代 - 这当然更麻烦）使用这种方法，您的 Same() 函数必须了解通道已[关闭](http://golang.org/pkg/builtin/#close)，这是通过表单的通道接收完成的

```
k, ok1 := <-ch
g, ok2 := <-ch 
```

`ok1`当和`ok2`不同时采取适当的行动`false`

另一种方法，但可能不符合练习的精神，是计算树中的节点数：

```
func Same(t1, t2 *tree.Tree) bool {
    countT1 := countTreeNodes(t1)
    countT2 := countTreeNodes(t2)
    if countT1 != countT2 {
        return false
    }
    ch1 := make(chan int)
    ch2 := make(chan int)
    go Walk(t1, ch1)
    go Walk(t2, ch2)
    for i := 0; i < countT1; i++ {
        if <-ch1 != <-ch2 {
            return false
        }
    }
    return true
} 
```

您必须实现 countTreeNodes() 函数，该函数应该计算 *Tree 中的节点数

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2014-07-04T19:43:50.100

这是使用此处和[Google Group](https://groups.google.com/forum/?fromgroups=#!topic/golang-nuts/gva8SmZGmek)线程中的想法的完整解决方案

```
package main

import "fmt"
import "code.google.com/p/go-tour/tree"

// Walk walks the tree t sending all values
// from the tree to the channel ch.
func Walk(t *tree.Tree, ch chan int) {
    var walker func(t *tree.Tree)
    walker = func (t *tree.Tree) {
        if (t == nil) {
            return
        }
        walker(t.Left)
        ch <- t.Value
        walker(t.Right)
    }
    walker(t)
    close(ch)
}

// Same determines whether the trees
// t1 and t2 contain the same values.
func Same(t1, t2 *tree.Tree) bool {
    ch1, ch2 := make(chan int), make(chan int)

    go Walk(t1, ch1)
    go Walk(t2, ch2)

    for {
        v1,ok1 := <- ch1
        v2,ok2 := <- ch2

        if v1 != v2 || ok1 != ok2 {
            return false
        }

        if !ok1 {
            break
        }
    }

    return true
}

func main() {
    fmt.Println("1 and 1 same: ", Same(tree.New(1), tree.New(1)))
    fmt.Println("1 and 2 same: ", Same(tree.New(1), tree.New(2)))

} 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2016-11-10T18:15:26.680

我就是这样做的，不同之处在于您可以将其包装`Walk`到匿名函数`defer close(ch)`中。因此您不必定义其他命名的递归函数

```
package main

import (
    "golang.org/x/tour/tree"
    "fmt"
)
// Walk walks the tree t sending all values
// from the tree to the channel ch.
func Walk(t *tree.Tree, ch chan int) {
    if t == nil {
        return
    }
    Walk(t.Left, ch)
    ch <- t.Value
    Walk(t.Right, ch)
}
// Same determines whether the trees
// t1 and t2 contain the same values.
func Same(t1, t2 *tree.Tree) bool {
    ch1, ch2 := make(chan int), make(chan int)
    go func() {
        defer close(ch1)
        Walk(t1, ch1)
    }()
    go func() {
        defer close(ch2)
        Walk(t2, ch2)
    }()
    for {
        v1, ok1 := <- ch1
        v2, ok2 := <- ch2
        if ok1 != ok2 || v1 != v2 {
            return false
        }
        if !ok1 && !ok2 {
            break
        }
    }
    return true
}

func main() {
    ch := make(chan int)
    go func () {
        defer close(ch)
        Walk(tree.New(3), ch)
    }()
    for i := range ch {
        fmt.Println(i)
    }

    fmt.Println(Same(tree.New(1), tree.New(1)))
    fmt.Println(Same(tree.New(1), tree.New(2)))
    fmt.Println(Same(tree.New(10), tree.New(10)))
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-03-15T11:59:02.790

虽然我的第一个直觉是也包含递归遍历并关闭通道，但我觉得这不符合练习的精神。

练习文本包含以下信息：

> 该函数`tree.New(k)`构造一个随机结构（但始终排序）的二叉树，其中包含 values `k, 2k, 3k, ..., 10k`。

这清楚地表明生成的树正好有 10 个节点。

因此，本着本练习的精神和简单性，我采用了以下解决方案：

```
package main

import (
    "fmt"
    "golang.org/x/tour/tree"
)

func Walk(t *tree.Tree, ch chan int) {
    if t.Left != nil {
        Walk(t.Left, ch)
    }
    ch <- t.Value
    if t.Right != nil {
        Walk(t.Right, ch)
    }
}

func Same(t1, t2 *tree.Tree) bool {
    ch1 := make(chan int)
    ch2 := make(chan int)

    defer close(ch1)
    defer close(ch2)

    go Walk(t1, ch1)
    go Walk(t2, ch2)

    for i := 0; i < 10; i++ {
        if <-ch1 != <-ch2 {
            return false
        }
    }

    return true
}

func main() {
    fmt.Println(Same(tree.New(1), tree.New(2)))
} 
```

如果目标是在任意大小的树上运行，那么对封闭通道做出反应是更好的解决方案，但我觉得这是一个简单的练习，有意设置约束以使新的 Gopher 更容易。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-11-21T08:06:20.677

这是我想出的解决方案：

```
func Walker(t *tree.Tree, ch chan int){
    if t==nil {return}
    Walker(t.Left,ch)
    ch<-t.Value
    Walker(t.Right,ch)   
}

func Walk(t *tree.Tree, ch chan int){
   Walker(t,ch)
   close(ch)
}

func Same(t1, t2 *tree.Tree) bool{
    ch:=make(chan int)
    dh:=make(chan int)
    go Walk(t1,ch)
    go Walk(t2,dh)

    for i:=range ch {
        j,ok:=<-dh
        if(i!=j||!ok)  {return false} 
    }

    return true
} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2020-08-22T03:50:36.387

这是我的解决方案。

```
package main

import (
  "golang.org/x/tour/tree"
  "fmt"
)

// Walk walks the tree t sending all values
// from the tree to the channel ch.
func Walk(t *tree.Tree, ch chan int) {
    if t == nil {
        return
    }

    Walk(t.Left, ch)
    ch <- t.Value
    Walk(t.Right, ch)
}

// Same determines whether the trees
// t1 and t2 contain the same values.
func Same(t1, t2 *tree.Tree) bool {
    ch1,ch2 := make(chan int),make(chan int)

    go func() {
        Walk(t1, ch1)
        close(ch1)
    }()

    go func() {
        Walk(t2, ch2)
        close(ch2)
    }()

    for {
        v1, ok1 := <- ch1
        v2, ok2 := <- ch2

        if ok1 == false && ok2 == false {
            return true
        }

        if v1 != v2 {
            return false
        }
    }

    return false
}

func main() {
    fmt.Println(Same(tree.New(1), tree.New(1))) 
    fmt.Println(Same(tree.New(1), tree.New(2))) 
} 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-06-19T18:45:02.760

这是我的解决方案。它正确地检查两个序列长度的差异。

```
package main

import "code.google.com/p/go-tour/tree"
import "fmt"

func Walk(t *tree.Tree, ch chan int) {
    var walker func (t *tree.Tree)
    walker = func (t *tree.Tree) {
        if t.Left != nil {
            walker(t.Left)
        }
        ch <- t.Value
        if t.Right != nil {
            walker(t.Right)
        }
    }
    walker(t)
    close(ch)
}

func Same(t1, t2 *tree.Tree) bool {
    chana := make (chan int)
    chanb := make (chan int)

    go Walk(t1, chana)
    go Walk(t2, chanb)

    for {
        n1, ok1 := <-chana
        n2, ok2 := <-chanb        
        if n1 != n2 || ok1 != ok2 {
            return false
        }
        if (!ok1) {
            break
        }
    }
    return true; 
} 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-07-27T09:42:17.077

你几乎是对的，没有必要使用这个`select` 语句，因为你会经常经历这个`default` 案例，这是我的解决方案，它不需要计算发束中的节点数：

```
func Same(t1, t2 *tree.Tree) bool {
    ch1, ch2 := make(chan int), make(chan int)
    go Walk(t1, ch1)
    go Walk(t2, ch2)
    for i := range ch1 {
        j, more := <-ch2
        if more {
            if i != j { return false }
        } else { return false }
    }

    return true
} 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2020-04-08T20:39:53.617

```
package main

import (
    "fmt"
    "golang.org/x/tour/tree"
)

// Walk walks the tree t sending all values
// from the tree to the channel ch.
func Walk(t *tree.Tree, ch chan int) {
    if t != nil {
        Walk(t.Left, ch)
        ch <- t.Value
        Walk(t.Right, ch)
    }
}

// Same determines whether the trees
// t1 and t2 contain the same values.
func Same(t1, t2 *tree.Tree) bool {
    ch1, ch2 := make(chan int), make(chan int)
    go func() { Walk(t1, ch1); close(ch1) }()
    go func() { Walk(t2, ch2); close(ch2) }()
    for v1 := range ch1 {
        if v1 != <-ch2 {
            return false
        }
    }
    return true
}

func main() {
    fmt.Println(Same(tree.New(1), tree.New(1)))
    fmt.Println(Same(tree.New(2), tree.New(1)))
} 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2021-11-23T17:27:10.760

使用带有匿名函数的 goroutine

```
go func() {
    .... // logic
    close(ch)// last close channel or defer close channel
    // do not use close() outside of goroutine
}() 
```

这是易于阅读的代码

行走功能

```
func Walk(t *tree.Tree, ch chan int) {
    if t.Left != nil {
        Walk(t.Left, ch)
    }
    ch <- t.Value
    if t.Right != nil {
        Walk(t.Right, ch)
    }
} 
```

相同的功能

```
func Same(t1, t2 *tree.Tree) bool {
    ch1 := make(chan int)
    ch2 := make(chan int)

    go func() {
        Walk(t1, ch1)
        close(ch1)
        }()
    }()

    go func() {
        Walk(t2, ch2)
        close(ch2)
        }()
    }()

    for {
        v1, ok1 := <- ch1
        v2, ok2 := <- ch2

        if !ok1 && !ok2 {
            // both closed at the same time (and all values until now were equal)
            return true
        }

        if !ok1 || !ok2 || v1 != v2 {
            return false
        }
    }
    return true
} 
```

主要功能

```
func main() {
    c := make(chan int)
    t1 := tree.New(1)
    go func() {
        Walk(t1, c)
        close(c)
    }()

    for i := range c {
        fmt.Print(i) // 12345678910
    }

    fmt.Println("")
    result1 := Same(tree.New(1), tree.New(1))
    fmt.Println(result1) // true
    result2 := Same(tree.New(1), tree.New(2))
    fmt.Println(result2) // false
} 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-02-05T22:15:12.620

试图使用地图结构解决这个问题。

```
func Same(t1, t2 *tree.Tree) bool {
    countMap := make(map[int]int)
    ch := make(chan int)
    go Walk(t1, ch)
    for v := range ch {
        countMap[v]++
    }
    ch = make(chan int)
    go Walk(t2, ch)
    for v := range ch {
        countMap[v]--
        if countMap[v] < 0 {
            return false
        }
    }
    return true
} 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2018-03-28T13:56:08.753

以前的所有答案都没有解决有关`Same`功能的任务。问题是：

```
// Same determines whether the trees
// t1 and t2 contain the same values.
func Same2(t1, t2 *tree.Tree) bool 
```

它不应该考虑树的结构。这就是为什么以下测试失败的原因，在这两行中都给了我们错误：

```
fmt.Println("Should return true:", Same(tree.New(1), tree.New(1)))
fmt.Println("Should return false:", Same(tree.New(1), tree.New(2))) 
```

记住？

> 函数 tree.New(k) 构造一个随机结构（但总是排序的）二叉树，其中包含值 k、2k、3k、...、10k。

您只需检查两棵树是否具有相同的值。并且任务描述清楚地注意到：

`Same(tree.New(1), tree.New(1))`应该返回`true`，`Same(tree.New(1), tree.New(2))`应该返回`false`。

因此，要解决任务，您需要缓冲一棵树的所有结果，并检查第二棵树的值是否在第一棵树中。

这是我的解决方案，它并不理想:)：

```
// Same determines whether the trees
// t1 and t2 contain the same values.
func Same(t1, t2 *tree.Tree) bool {
    ch1, ch2 := make(chan int), make(chan int)
    go Walk(t1, ch1)
    go Walk(t2, ch2)

    var tv1 = []int{}

    for v := range ch1 {
        tv1 = append(tv1, v)
    }

    inArray := func(arr []int, value int) bool {
        for a := range arr {
            if arr[a] == value {
                return true
            }
        }
        return false
    }

    for v2 := range ch2 {
        if !inArray(tv1, v2) {
            return false
        }
    }

    return true
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-01-19T02:05:56.763

您应该避免让打开的通道无人看管，否则线程可能会永远等待并且永远不会结束。

```
package main

import "code.google.com/p/go-tour/tree"
import "fmt"

func WalkRecurse(t *tree.Tree, ch chan int) {
    if t == nil {
        return
    }

    WalkRecurse(t.Left, ch)
    ch <- t.Value
    WalkRecurse(t.Right, ch)
}

// Walk walks the tree t sending all values
// from the tree to the channel ch.
func Walk(t *tree.Tree, ch chan int) {
    WalkRecurse(t, ch)
    close(ch)
}

// Same determines whether the trees
// t1 and t2 contain the same values.
func Same(t1, t2 *tree.Tree) bool {
    var ch1, ch2 chan int = make(chan int), make(chan int)
    go Walk(t1, ch1)
    go Walk(t2, ch2)

    ret := true
    for {
        v1, ok1 := <- ch1
        v2, ok2 := <- ch2

        if ok1 != ok2 {
            ret = false
        }
        if ok1 && (v1 != v2) {
            ret = false
        }
        if !ok1 && !ok2 {
            break
        }
    }

    return ret
}

func main() {
    ch := make(chan int)
    go Walk(tree.New(1), ch)
    for v := range ch {
        fmt.Print(v, " ")
    }
    fmt.Println()

    fmt.Println(Same(tree.New(1), tree.New(1)))
    fmt.Println(Same(tree.New(1), tree.New(2)))
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-03-21T14:26:57.243

我的版本

```
package main

import (
    "fmt"
    "golang.org/x/tour/tree"
)

// Walk walks the tree t sending all values
// from the tree to the channel ch.
func WalkRec(t *tree.Tree, ch chan int) {
    if t == nil {
        return
    }
    WalkRec(t.Left, ch)
    ch <- t.Value
    WalkRec(t.Right, ch)
}

func Walk(t *tree.Tree, ch chan int) {
    WalkRec(t, ch)
    close(ch)
}

// Same determines whether the trees
// t1 and t2 contain the same values.
func Same(t1, t2 *tree.Tree) bool {
    ch1 := make(chan int)
    ch2 := make(chan int)
    go Walk(t1, ch1)
    go Walk(t2, ch2)

    for {
        x, okx := <-ch1
        y, oky := <-ch2
        switch {
        case okx != oky:
            return false
        case x != y:
            return false
        case okx == oky && okx == false:
            return true
        }

    }

}

func main() {
    ch := make(chan int)
    go Walk(tree.New(1), ch)
    fmt.Println(Same(tree.New(1), tree.New(1)))
    fmt.Println(Same(tree.New(2), tree.New(1)))
    fmt.Println(Same(tree.New(1), tree.New(2)))
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-05-09T18:31:27.677

我写了 2 个版本，总是把两个频道都读到最后：

```
package main

import (
    "fmt"
    "golang.org/x/tour/tree"
)

func Walk(t *tree.Tree, ch chan int) {
    var walker func(t *tree.Tree)
    walker = func(t *tree.Tree) {
        if t == nil {
            return
        }
        walker(t.Left)
        ch <- t.Value
        walker(t.Right)
    }
    walker(t)
    close(ch)
}

func Same(t1, t2 *tree.Tree, sameChan func(ch1, ch2 chan int) bool) bool {
    ch1, ch2 := make(chan int), make(chan int)
    go Walk(t1, ch1)
    go Walk(t2, ch2)

    return sameChan(ch1, ch2)
}

func sameChan1(ch1, ch2 chan int) bool {
    areSame := true
    for {
        v1, ok1 := <-ch1
        v2, ok2 := <-ch2

        if !ok1 && !ok2 {
            return areSame
        }

        if !ok1 || !ok2 || v1 != v2 {
            areSame = false
        }
    }
}

func sameChan2(ch1, ch2 chan int) bool {
    areSame := true
    for v1 := range ch1 {
        v2, ok2 := <-ch2

        if !ok2 || v1 != v2 {
            areSame = false
        }
    }
    for _ = range ch2 {
        areSame = false
    }
    return areSame
}

func main() {
    fmt.Println(Same(tree.New(1), tree.New(1), sameChan1))
    fmt.Println(Same(tree.New(2), tree.New(1), sameChan1))
    fmt.Println(Same(tree.New(1), tree.New(2), sameChan1))

    fmt.Println(Same(tree.New(1), tree.New(1), sameChan2))
    fmt.Println(Same(tree.New(2), tree.New(1), sameChan2))
    fmt.Println(Same(tree.New(1), tree.New(2), sameChan2))
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-06-22T15:30:42.630

这就是我使用中序遍历的方式

```
package main

import (
    "fmt"
    "golang.org/x/tour/tree"
)

// Walk walks the tree t sending all values
// from the tree to the channel ch.
func Walk(t *tree.Tree, ch chan int) {
    if t != nil {
        Walk(t.Left, ch)
        ch <- t.Value
        Walk(t.Right, ch)
    }
}

// Same determines whether the trees
// t1 and t2 contain the same values.

func Same(t1, t2 *tree.Tree) bool {
    c1, c2 := make(chan int), make(chan int)
    go Walk(t1, c1)
    go Walk(t2, c2)
    if <-c1 == <-c2 {
        return true
    } else {
        return false
    }
}

func main() {
    t1 := tree.New(1)
    t2 := tree.New(8)
    fmt.Println("the two trees are same?", Same(t1, t2))
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-09-10T02:56:58.317

因为问题刚刚说树只有10个节点，那么以下是我阅读其他答案后的答案：</p>

```
func Walk(t *tree.Tree, ch chan int) {
    defer close(ch)

    var walker func(t *tree.Tree)
    walker = func(t *tree.Tree) {
        if t == nil {
            return
        }

        walker(t.Left)
        ch <- t.Value
        walker(t.Right)
    }
    walker(t)
}

func Same(t1, t2 *tree.Tree) bool {
    ch1, ch2 := make(chan int), make(chan int)
    go Walk(t1, ch1)
    go Walk(t2, ch2)

    for range make([]struct{}, 10) {
        if <-ch1 != <-ch2 {
            return false
        }
    }
    return true
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-09-23T07:19:11.157

这是一个不依赖于不同树长度的解决方案，也不依赖于遍历顺序：

```
package main

import (
    "fmt"
    "golang.org/x/tour/tree"
)

// Walk walks the tree t sending all values
// from the tree to the channel ch.
func Walk(t *tree.Tree, ch chan int) {
    var walk func(*tree.Tree)
    walk = func(tr *tree.Tree) {
        if tr == nil {
            return
        }

        walk(tr.Left)
        ch <- tr.Value
        walk(tr.Right)
    }

    walk(t)
    close(ch)
}

func merge(ch chan int, m map[int]int) {
    for i := range ch {
        count, ok := m[i]
        if ok {
            m[i] = count + 1
        } else {
            m[i] = 1
        }
    }
}

// Same determines whether the trees
// t1 and t2 contain the same values.
func Same(t1, t2 *tree.Tree) bool {
    ch1 := make(chan int, 100)
    ch2 := make(chan int, 100)
    m := make(map[int]int)

    go Walk(t1, ch1)
    go Walk(t2, ch2)

    merge(ch1, m)
    merge(ch2, m)

    for _, count := range m {
        if count != 2 {
            return false
        }
    }

    return true
} 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-04-03T01:33:15.123

对于感兴趣的人，如果您想知道如何在不创建单独的递归函数的情况下解决这个问题，这里有一个使用堆栈的答案：

```
func Walk(t *tree.Tree, ch chan int) {
    defer close(ch)
    visitStack := []*tree.Tree{t}
    visited := make(map[*tree.Tree]bool, 1)
    for len(visitStack) > 0 {
        var n *tree.Tree
        n, visitStack = visitStack[len(visitStack)-1], visitStack[:len(visitStack)-1]
        if visited[n] {
            ch <- n.Value
            continue
        }
        if n.Right != nil {
            visitStack = append(visitStack, n.Right)
        }
        visitStack = append(visitStack, n)
        if n.Left != nil {
            visitStack = append(visitStack, n.Left)
        }
        visited[n] = true
    }
} 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-10-18T16:08:55.803

一个明确的答案：

```
package main

import "golang.org/x/tour/tree"
import "fmt"

// Walk walks the tree t sending all values
// from the tree to the channel ch.
func Walk(t *tree.Tree, ch chan int) {
    if t == nil {
        return
    }
    Walk(t.Left, ch)
    ch <- t.Value
    Walk(t.Right, ch)
}

func WalkATree(t *tree.Tree, ch chan int) {
    Walk(t, ch)
    close(ch)
}

// Same determines whether the trees
// t1 and t2 contain the same values.
func Same(t1, t2 *tree.Tree) bool {
    ch1 := make(chan int)
    ch2 := make(chan int)
    go WalkATree(t1, ch1)
    go WalkATree(t2, ch2)
    var v1, v2 int
    var ok1, ok2 bool
    for {
        v1, ok1 = <- ch1
        v2, ok2 = <- ch2
        if !ok1 && !ok2 {
            return true
        }
        if !ok1 && ok2 || ok1 && !ok2 {
            return false
        }
        if v1 != v2 {
            return false
        }
    }
}

func main() {
    fmt.Println(Same(tree.New(1), tree.New(1)))
} 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-12-09T13:48:53.750

这是我的解决方案，没有`defer`魔法。我认为这会更容易阅读，所以值得分享:)

**奖励**：这个版本*实际上*解决了巡回练习中的问题并给出了正确的结果。

```
package main

import (
    "golang.org/x/tour/tree"
    "fmt"
)

// Walk walks the tree t sending all values
// from the tree to the channel ch.
func Walk(t *tree.Tree, ch chan int) {
    walkRecursive(t, ch)
    close(ch)
}

func walkRecursive(t *tree.Tree, ch chan int) {
    if t != nil {
        walkRecursive(t.Left, ch)
        ch <- t.Value
        walkRecursive(t.Right, ch)
    }
}

// Same determines whether the trees
// t1 and t2 contain the same values.
func Same(t1, t2 *tree.Tree) bool {
    var br bool
    ch1, ch2 := make(chan int), make(chan int)
    go Walk(t1, ch1)
    go Walk(t2, ch2)

    for i:= range ch1 {
        if i == <-ch2 {
            br = true
        } else {
            br = false
            break
        }
    }
    return br
}

func main() {
    ch := make(chan int)
    go Walk(tree.New(1), ch)

    for i := range ch {
        fmt.Println(i)
    }

    fmt.Println(Same(tree.New(1), tree.New(2)))
    fmt.Println(Same(tree.New(1), tree.New(1)))
    fmt.Println(Same(tree.New(2), tree.New(1)))
} 
```

所以输出如下：

```
1
2
3
4
5
6
7
8
9
10
false
true
false 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2020-02-11T04:41:03.217

```
package main

import (
    "fmt"
    "golang.org/x/tour/tree"
)

// Walk walks the tree t sending all values
// from the tree to the channel ch.
func Walk(t *tree.Tree, ch chan int) {
    walkRecursive(t, ch)
    close(ch)
}

func walkRecursive(t *tree.Tree, ch chan int) {
    if t == nil {
        return
    }
    walkRecursive(t.Left, ch)
    ch <- t.Value
    walkRecursive(t.Right, ch)
}

// Same determines whether the trees
// t1 and t2 contain the same values.
func Same(t1, t2 *tree.Tree) bool {
    ch1 := make(chan int)
    ch2 := make(chan int)
    go Walk(t1, ch1)
    go Walk(t2, ch2)

    for {
        v1, ok1 := <-ch1
        v2, ok2 := <-ch2
        if ok1 != ok2 {
            return false
        }
        if !ok1 {
            return true
        }
        if v1 != v2 {
            return false
        }
    }
}

func main() {
    fmt.Println(Same(tree.New(1), tree.New(2)))
} 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2020-06-03T19:21:18.130

到目前为止还没有在这个线程中看到它。[我使用了func](https://www.youtube.com/watch?v=t9bEg2A4jsw)中介绍的 nil 通道技术

通过在 goroutine iife 中启动它们来解决关闭通道的问题。

我想我可以检查更多的性能是否平等。

```
package main

import (
    "fmt"
    "reflect"
    "sort"

    "golang.org/x/tour/tree"
)

// Walk walks the tree t sending all values
// from the tree to the channel ch.
func Walk(t *tree.Tree, ch chan int) {
    ch <- t.Value
    if t.Right != nil {
        Walk(t.Right, ch)
    }
    if t.Left != nil {
        Walk(t.Left, ch)
    }

}

// Same determines whether the trees
// t1 and t2 contain the same values.
func Same(t1, t2 *tree.Tree) bool {

    c1 := make(chan int)
    s1 := []int{}

    go func() {
        Walk(t1, c1)
        close(c1)
    }()

    c2 := make(chan int)
    s2 := []int{}

    go func() {
        Walk(t2, c2)
        close(c2)
    }()

    for c1 != nil || c2 != nil {
        select {
        case v, ok := <-c1:
            if !ok {
                c1 = nil
                sort.Ints(s1)
                continue
            }
            s1 = append(s1, v)
        case v, ok := <-c2:
            if !ok {
                c2 = nil
                sort.Ints(s2)
                continue
            }
            s2 = append(s2, v)
        }
    }
    return reflect.DeepEqual(s1, s2)
}

func main() {
    fmt.Println(Same(tree.New(1), tree.New(1)))
} 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2021-03-27T08:20:10.213

如果一个人正在使用带有自己的`Walk`逻辑的递归调用，并且希望向通道消费者发出信号表明没有更多项目，那么似乎可以将一个人的大部分`Walk`逻辑放入第二个函数中，调用该第二个函数，等待它完成，然后关闭频道。

在下面的示例中，第二个（“inner Walk”）函数是直接在函数内部的“闭包” `Walk`，但它不是必须的。

```
package main

import "golang.org/x/tour/tree"
import "fmt"

// Walk walks the tree t sending all values
// from the tree to the channel ch.
func Walk(t *tree.Tree, ch chan int) {
    defer close(ch)
    var iw func(*tree.Tree)
    iw = func(it *tree.Tree) {
        if it == nil {
            return
        }
        iw(it.Left)
        ch <- it.Value
        iw(it.Right)
    }
    iw(t)
}

// Same determines whether the trees
// t1 and t2 contain the same values.
func Same(t1, t2 *tree.Tree) bool {
    ch1 := make(chan int)
    ch2 := make(chan int)
    go Walk(t1, ch1)
    go Walk(t2, ch2)
    for {
        v1, more1 := <- ch1
        v2, more2 := <- ch2
        if (!more1 && !more2) {
            return true
        }
        if more1 != more2 || v1 != v2 {
            return false
        }
    }
}

func main() {
    fmt.Println(Same(tree.New(1), tree.New(1)))
    fmt.Println(Same(tree.New(1), tree.New(2)))
} 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2021-06-05T23:42:23.203

这是一个非递归解决方案（即在大输入上不会出现堆栈空间问题），它也不需要单独的已访问地图 - 它只使用单个堆栈数据结构。避免访问映射的技巧是从堆栈中删除已访问的条目，而是`tree.Tree`为已访问的条目创建新实例，同时删除左侧，这样它就不会重新访问左侧。

```
package main

import "fmt"
import "golang.org/x/tour/tree"

func Pop(stack []*tree.Tree) (*tree.Tree, []*tree.Tree) {
    last := len(stack) - 1
    node := stack[last]
    stack[last] = nil
    return node, stack[:last]
}

// Walk walks the tree t sending all values
// from the tree to the channel ch.
func Walk(t *tree.Tree, ch chan int) {
    defer close(ch)
    stack := []*tree.Tree{t}
    var node *tree.Tree
    for len(stack) > 0 {
        node, stack = Pop(stack)
        if node.Left != nil {
            stack = append(stack, &tree.Tree{nil, node.Value, node.Right}, node.Left)
            continue
        }

        ch <- node.Value

        if node.Right != nil {
            stack = append(stack, node.Right)
        }
    }
}

// Same determines whether the trees
// t1 and t2 contain the same values.
func Same(t1, t2 *tree.Tree) bool {
    ch1, ch2 := make(chan int), make(chan int)
    go Walk(t1, ch1)
    go Walk(t2, ch2)
    for {
        v1, ok1 := <-ch1
        v2, ok2 := <-ch2
        if v1 != v2 {
            return false
        }
        if !ok1 || !ok2 {
            return ok1 == ok2
        }
    }
}

func PrintTree(t *tree.Tree) {
    ch := make(chan int)
    go Walk(t, ch)
    for i := range ch {
        fmt.Printf("%d ", i)
    }
    fmt.Println()
}

func main() {
    PrintTree(tree.New(1))
    PrintTree(&tree.Tree{Value: 1, Right: &tree.Tree{Value: 2}})

    fmt.Println("1 and 2 same (false): ", Same(tree.New(1), tree.New(2)))
    fmt.Println("1 and 1 same (true): ", Same(tree.New(1), tree.New(1)))
    fmt.Println("empty same (true): ", Same(&tree.Tree{}, &tree.Tree{}))
    fmt.Println("diff length same (false): ", Same(&tree.Tree{Value: 1}, &tree.Tree{Value: 2, Left: &tree.Tree{Value: 2}}))
} 
```

输出是：

```
1 2 3 4 5 6 7 8 9 10 
1 2 
1 and 2 same (false):  false
1 and 1 same (true):  true
empty same (true):  true
diff length same (false):  false 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2021-09-10T09:07:39.033

稍微改变传入参数的数量怎么样？

```
package main

import (
    "fmt"
    "golang.org/x/tour/tree"
)

// Walk walks the tree t sending all values
// from the tree to the channel ch.
func Walk(t *tree.Tree, ch chan int, recursion bool) {
    if t != nil {
        ch <- t.Value
        Walk(t.Left, ch, true)
        Walk(t.Right, ch, true)
    }

    if !recursion {
        close(ch)
    }
}

// Same determines whether the trees
// t1 and t2 contain the same values.
func Same(t1, t2 *tree.Tree) bool {
    t1_map := map[int]int{}
    t2_map := map[int]int{}
    t1_ch := make(chan int)
    t2_ch := make(chan int)

    go Walk(t1, t1_ch, false)
    go Walk(t2, t2_ch, false)

    for value := range t1_ch {
        t1_map[value]++
    }

    for value := range t2_ch {
        t2_map[value]++
    }

    if len(t1_map) != len(t2_map) {
        return false
    }

    for t1_key, t1_value := range t1_map {
        t2_value, t2_exists := t2_map[t1_key]

        if (!t2_exists) || (t1_value != t2_value) {
            return false
        }
    }

    return true
}

func main() {
    t1 := tree.New(1)
    t2 := tree.New(2)
    t3 := tree.New(1)

    fmt.Println(Same(t1, t2))
    fmt.Println(Same(t1, t3))
    fmt.Println(Same(t3, t2))
} 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2021-10-01T16:30:57.053

在作者的情况下，他们应该只更改 Same 函数以避免无限循环：

```
func Same(t1, t2 *tree.Tree) bool {
    ch1 := make(chan int)
    ch2 := make(chan int)

    go Walk(t1, ch1)
    go Walk(t2, ch2)

    if <-ch1 != <-ch2 {
        return false
    }

    return true
} 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2021-10-03T18:59:52.790

这可以使用迭代方法来解决（这将节省内存）。使用基于[此](https://www.geeksforgeeks.org/inorder-tree-traversal-without-recursion/)示例的迭代方法：

```
// Walk walks the tree t sending all values
// from the tree to the channel ch.
func Walk(t *tree.Tree, ch chan int) {
    stack := make([]*tree.Tree, 0)
    for {
        if t != nil {
            stack = append(stack, t)
            t = t.Left
        } else if(len(stack) > 0) {
            lastIndex := len(stack) - 1
            t = stack[lastIndex]
            stack = stack[:lastIndex]

            ch <- t.Value

            t = t.Right
        } else {
            close(ch)
            return
        }
    }
} 
```

# php - 如何每隔几秒钟检查一次 Facebook 图形 API 是否有新帖子？

> ID：12224043
> 
> 赞同：0
> 
> 时间：2012-09-01T00:51:46.663
> 
> 标签：php, facebook-graph-api, scripting, job-scheduling

Facebook 有一个图形 API，您可以使用它来访问公共 Facebook 帖子。我想编写一个脚本（PHP？），每隔几秒钟检查一次是否有针对特定查询的新帖子并将新结果输入数据库。

脚本启动后，我希望它不会停止几个月并不断运行。我是否必须使用某种调度程序来执行此操作，或者可以以编程方式完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T00:54:45.217

您可以在 linux 上使用[crontab或在 Windows 上使用](http://en.wikipedia.org/wiki/Cron)[计划任务](http://en.wikipedia.org/wiki/Windows_Task_Scheduler)来运行您的 php 脚本：

```
 php -f /path/to/script.php 
```

# c# - 如何以编程方式复制包含的文件

> ID：12224044
> 
> 赞同：1
> 
> 时间：2012-09-01T00:51:58.037
> 
> 标签：c#, visual-studio-2008

我有一个 Visual C# 2008 项目。在我的项目浏览器中，我有一个 SQL CE 数据库（sdf 文件），因此我可以在设计器中使用数据库和数据集。在运行时，sdf 文件被复制到输出目录。当用户保存自己的数据库时，此 sdf 文件将复制到用户选择的任何文件名，并将其数据集保存到副本中。到目前为止没有问题。

如果可能的话，我想以不同的方式做到这一点。我不想在程序首次运行时复制 sdf 文件，而是对其进行设置，以便当用户保存他们的数据库时，然后它使用他们选择的名称复制出 sdf 文件并将他们的数据集保存到其中.

我已经阅读了将文件写为二进制文件的方法，这确实有效，但它需要几行似乎不必要的代码。有没有办法只是告诉程序“嘿，继续快速复制这个 sdf 文件”？毕竟，该程序能够在您首次运行时自动执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T00:59:31.967

将数据库文件添加为项目中的资源。然后，当您希望文件出现时，只需将字节数组写入文件即可。

例子：

```
File.WriteAllBytes("destination path", Properties.Resources.YourResourceName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-06T22:12:26.340

我喜欢与您分享我的知识堆栈用户您可以分析此代码找到可以提供帮助的东西

使用系统；

使用 System.Collections.Generic；

使用 System.ComponentModel；

使用 System.Data；

使用 System.Drawing；

使用 System.Linq；

使用 System.Text；

使用 System.Windows.Forms；

使用 System.Data.SqlServerCe；

使用 System.IO；

```
namespace localdatabaseconnect 
```

{

```
public partial class Form1 : Form

{
    public Form1()
    {
        InitializeComponent();
    }
    string conString = Properties.Settings.Default.locallyConnectionString;
    private void button1_Click(object sender, EventArgs e)
    {

        // Open the connection using the connection string.
        using (SqlCeConnection con = new SqlCeConnection(conString))
        {
            con.Open();

            // Insert into the SqlCe table. ExecuteNonQuery is best for inserts.
            int id = int.Parse(textBox1.Text);
            string nom = textBox2.Text;
            string prenom = textBox3.Text;
            using (SqlCeCommand com = new SqlCeCommand("INSERT INTO testme (id,nom,prenom) VALUES(@id,@nom,@prenom)", con))
            {
                com.Parameters.AddWithValue("@id", id);
                com.Parameters.AddWithValue("@nom", nom);
                com.Parameters.AddWithValue("@prenom", prenom);
                com.ExecuteNonQuery();
            }
            con.Close();
        }
    }

    private void button2_Click(object sender, EventArgs e)
    {
        using (SqlCeConnection con = new SqlCeConnection(conString))
        {
            con.Open();
            // Read in all values in the table.
            using (SqlCeCommand com = new SqlCeCommand("SELECT * FROM testme", con))
            {
                SqlCeDataReader reader = com.ExecuteReader();
                while (reader.Read())
                {
                    string num = reader[0].ToString();
                    MessageBox.Show("hi"+num);
                }
            }
            con.Close();
        }
    }

    private void button3_Click(object sender, EventArgs e)
    {

        string path = "c:\\ChekatyResources";
     try{

      if (!Directory.Exists(path))
        {

      // Try to create the directory.
          DirectoryInfo di = Directory.CreateDirectory(path);
         MessageBox.Show("file is created");
         }
       else {

          MessageBox.Show("file is exist");

          }
          }
            catch (IOException ioex)
           {
  MessageBox.Show(ioex.Message);
           }

       }

    private void Form1_Load(object sender, EventArgs e)
    {
        //string executable = System.Reflection.Assembly.GetExecutingAssembly().Location;

        //string path = (System.IO.Path.GetDirectoryName(executable));
        //MessageBox.Show(path);
        //File.WriteAllBytes("destination path",);
        string paths = "c:\\";
        AppDomain.CurrentDomain.SetData("DataDirectory", paths);

        string connStr = @"Data Source =c:\ChekatyResources\locally.sdf;";

        if (!File.Exists(@"c:\ChekatyResources\locally.sdf"))
        {

            SqlCeEngine engine = new SqlCeEngine(connStr);
            engine.CreateDatabase();

            SqlCeConnection conn = null;

            try
            {
                conn = new SqlCeConnection(connStr);
                conn.Open();

                SqlCeCommand cmd = conn.CreateCommand();
                cmd.CommandText = "CREATE TABLE testme(id int, prenom ntext,nom ntext)";
                cmd.ExecuteNonQuery();
            }
            catch
            {

            }
            finally
            {
                conn.Close();
            }
        }
        else { MessageBox.Show("it's exist"); }
    }
} 
```

}

# jquery - 如果没有 jQuery 将字段验证为 URL，如何在 MVC4 中使用 type="url"？

> ID：12224046
> 
> 赞同：5
> 
> 时间：2012-09-01T00:52:05.260
> 
> 标签：jquery, asp.net-mvc, validation

情况如下：我有一个很棒的大文本输入框用于 URL：[https ://asafaweb.com](https://asafaweb.com)

不过，这不需要遵守 URL 的严格定义；我允许没有方案的地址，然后出于可用性目的默认使用 HTTP。例如，“stackoverflow.com”将被视为有效 URL。但也有一些 URL 由于各种原因我不想允许（即它们已被列入黑名单或它们是内部 IP 地址范围）。

我想将输入的类型设置为“url”而不是默认的“文本”，以便移动设备上的用户获得专为 URL 上下文设计的键盘（即 iOS 为您提供“.com”按钮），问题是一旦我这样做，与 ASP.NET MVC 捆绑的默认不显眼的 jQuery 验证需要一个带有方案的 URL，从而破坏了我的无方案 URL 支持。

这是一个 MVC4 站点，我有一个 HTML 助手，如下所示：

```
@Html.TextBoxFor(m => m.ScanUrl, new { type = "url" }) 
```

然后，ScanUrl 属性有一个自定义 ValidationAttribute，它会执行所有定制检查以确保可以扫描 URL。

如何在没有 jQuery 验证插入和想要确保 URL 是*严格*的URL 的情况下保持现有的验证模式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-03T01:26:07.223

如果您不需要在此站点的任何地方进行严格的 URL 验证，那么修改 jQuery Validation 验证 URL 的方式可能是处理该问题的最简单方法。如果您使用的是 MVC 4 附带的版本，您会在 jquery.validate.js 的第 1034 行找到它。

您可以在插件脚本中调整正则表达式，或者您可以在加载 jQuery Validation 后修补 url 验证方法：

```
<script src="/Scripts/jquery.validate.js"></script>
<script>
  // To no-op url validation completely.
  jQuery.validator.methods.url = function(value, element) {
    return this.optional(element) || true;
  };

  // Or, continue validating everything else as previously, 
  //  but not require the protocol (double check my change to the regex...).
  jQuery.validator.methods.url = function(value, element) {
    return this.optional(element) || /^(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value);
  };    
</script> 
```

之后对其进行修补的主要优点是您不会被绑定到脚本的调整版本，并且可以在以后更新 jQuery Validation 本身而不会丢失您自定义的 url 验证器。这对您来说可能很明显，但可能有助于其他人稍后找到此答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T03:00:05.477

如果焦点不在/更改上，您可以使用 javascript 自动将架构添加到输入中的 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T01:48:56.093

您还可以告诉 jQuery Validation 插件根据您指定的选择器选择性地忽略输入字段，该选择器可以是您添加到所有要忽略的元素的类，例如`class="ignorejQueryValidate"`，或者在您的情况下，所有带有`type="url"`.

请参阅[jQuery 文档](http://docs.jquery.com/Plugins/Validation/validate)中有关验证插件方法的`ignore`选项部分。`validate()`

```
@using (Html.BeginForm("SomeAction", "SomeController", FormMethod.Post, new { id = "myForm"}))
{
    @Html.TextBoxFor(m => m.ScanUrl, new { type = "url", @class = "ignorejQueryValidate" })
}

$("#myForm").validate({
    ignore: ".ignorejQueryValidate"
}); 
```

或者

```
@using (Html.BeginForm("SomeAction", "SomeController", FormMethod.Post, new { id = "myForm" }))
{
    @Html.TextBoxFor(m => m.ScanUrl, new { type = "url" })
}

$("#myForm").validate({
    ignore: "input[type=url]"
}); 
```

# css - 连续的 CSS 过渡

> ID：12224047
> 
> 赞同：6
> 
> 时间：2012-09-01T00:52:39.130
> 
> 标签：css, css-transitions

有没有办法`background-position`使用 CSS3 过渡连续动画背景图像的属性？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-01T01:02:48.407

是的，这是可能的 - [**DEMO**](http://jsfiddle.net/djsSq/1/)

```
div
{
    background: url(http://lorempixel.com/100/100);
    height: 100px;
    width: 100px;

    -webkit-animation: slide 2s linear infinite;
       -moz-animation: slide 2s linear infinite;
            animation: slide 2s linear infinite;
}

@-webkit-keyframes slide
{
    0%   {background-position: 0 0;}
    100% {background-position: 100px 0;}
}​

@-moz-keyframes slide
{
    0%   {background-position: 0 0;}
    100% {background-position: 100px 0;}
}

@keyframes slide
{
    0%   {background-position: 0 0;}
    100% {background-position: 100px 0;}
} 
```

​</p>

# c++ - 模板类和基类？

> ID：12224048
> 
> 赞同：3
> 
> 时间：2012-09-01T00:52:54.447
> 
> 标签：c++, templates, base-class

我有一个`IStructure`由许多类派生的基类。

其中一些类“引用”其他`IStructure`类。例如，我的班级`class GuiButton : public IStructure`有一个成员`Textstring`（也派生自`IStructure`）。

现在我只是对此闪闪发光，所以我可以直截了当，所以这对你们中的一些人来说可能看起来很奇怪。我想要一个引用`IStructure`. 例如：

```
class GuiButton : public IStructure {
public:
    Reference<Textstring> Text;
}; 
```

我知道你们中的一些人可能想知道我为什么不这样做`Textstring* Text`。这是因为其中一些引用是“外部的”。`Reference`模板类仅保存有关`IStructure`（即名称等）的信息。其中一些类非常大，实例化整个类以仅使用该`Name`属性是没有意义的。那有意义吗？

所以现在我的问题：

```
class Textstring : public IStructure; 
```

我可以`Textstring`使用我的模板来引用 a：

```
Reference<Textstring> Text; 
```

现在问题来了：我有一些方法要求我向上转换到“IStructure”，例如：

```
void RegisterReference(Reference<IStructure> &reference); 
```

所以我不能这样做：

```
Reference<Textstring> txt("TextName");
RegisterReference(txt); // error 
```

我知道我可以通过不`Reference`作为模板来解决这个问题，但我真的很想这样做，因为它更容易理解和知道引用的类型。

有什么方法可以做到这一点？

谢谢你的帮助！

-亚历克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T01:21:05.117

正如@dasblinkenlight 建议的那样，您可以模板化您的库函数。或者，您可以在`Reference`类中添加一些“差异”：

```
template<typename T>
class Reference
{
    // ...
public:
    template<typename U>
    Reference(Reference<U> const & r) {
        // "copy" r into *this
    }
}; 
```

或使用转换运算符

```
template<typename T>
class Reference
{
    // ...
public:
    template<typename U>
    operator Reference<U>() {
        // convert Reference<T> into Reference<U>
    }
}; 
```

这种方法的缺点是每次需要向上转换时实际上都是在创建新对象。

## 编辑

感谢 Luc Danton 指出这一点。我编写的代码处理方式比向上转换要多。它会做任何可用的转换。为了更好地限制事情，我们可以做这样的事情（在 C++11 中）：

```
template<typename T>
class Reference
{
    // ...
public:
    template<typename U,
      typename = typename std::enable_if<std::is_base_of<T, U>::value>::type>
    Reference(Reference<U> const & r) {
        // "copy" r into *this
    }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T01:13:34.293

您可以在 的类型参数上使您的函数成为模板`Reference`，如下所示：

```
template <typename R>
void RegisterReference(Reference<R> &r); 
```

# drupal - 迁移到 Drupal 7 后，如何更正“选择列表”字段（和相应数据）中更改的键|标签对？

> ID：12224049
> 
> 赞同：2
> 
> 时间：2012-09-01T00:53:20.313
> 
> 标签：drupal, drupal-7, migration, cck, drupal-fields

我大部分时间都是通过 Drupal 6 将 Drupal 5 站点迁移到 Drupal 7。CCK 内容迁移做得很好，但有一个例外：“选择列表”格式中的所有字段都有键|标签对的几个问题之一在他们的“允许值”列表中。

如果原来的“允许值”列表没有使用键|标签对，像这样：

```
Alabama
Alaska
Arizona 
```

迁移到 Drupal 7 时，允许的值会自动更新为 key|label 格式，如下所示：

```
1|Alabama
2|Alaska
3|Arizona 
```

这不会那么糟糕，只是数据库中的实际数据没有相应地改变，所以对于现有数据，您会看到“Alabama”而不是“1”。据推测，任何新数据都会存储“1”而不是“Alabama”。此外，在编辑节点时，尽管该字段存在数据，但在选择列表中预先选择了值“-None-”。

在某些情况下，“允许值”列表确实使用了键|标签对（以字符串作为键），如下所示：

```
movie|Movie
television|Television
product_or_service|Product or Service 
```

在这些情况下，密钥存储在数据库中。与前一种情况一样，在编辑节点时会预先选择值“-None-”（而不是显示现有数据）。迁移到 Drupal 7 时，键|标签对没有更改，尽管我注意到空格已被删除，例如：

```
product_or_service | Product or Service 
```

变成：

```
product_or_service|Product or Service 
```

但这里的问题是密钥显示在节点（如 product_or_service）而不是标签（如产品或服务）中。

在所有情况下，从视图中的这些选择列表创建的公开过滤器都不会返回任何结果。我尝试使用不是选择列表的其他字段（如文本字段）创建公开的过滤器，并且工作得很好（一旦在该视图的高级选项中选择了“使用 AJAX”）。

所以问题是：推进这些领域的最佳方式是什么？我想对现有节点和新节点一致地使用 key|label 数据。如果可能的话，我希望避免回溯到 Drupal 6 以重新开始迁移过程！

我在网上只找到了两个关于这个问题的参考资料。一个人似乎在遇到同样的问题后手动更新了数据（参见[这篇文章](http://smbjorklund.no/upgrade-drupal-6-7-how-hard-it)的单条评论）。我不反对这样的解决方案，因为我们没有太多节点，但我需要一些非常具体的指导说明如何做到这一点（我通过 phpMy Admin 访问我的数据库，如果你知道我的意思的话）。

另一个人似乎已经[在 Drupal 6 中修复了它](http://lists.drupal.org/pipermail/support/2012-May/021596.html)——但我希望避免回溯到 6，因为我们已经在 Drupal 7 中并且几乎完成了（除了这个）！在这种情况下，我可能也需要具体的指示。

有人经历过吗？或者知道一个智能/简单的解决方案？任何想法或建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:53:16.593

1) 用正确的字符串替换 DB 中的数值。我会使用 php 来执行此操作，例如：

```
$countries = db_query('SELECT nid, field_country_value FROM field_data_field_countries')->fetchAll();

$search = array(1,2,3);
$replace = array('Alabama', 'Alaska', 'Arizona');

while($country = db_fetch_array($countries)) {
    $country_name = str_replace($search, $replace, $country['field_country_value']);
    db_query('UPDATE field_data_field_countries SET field_country_value=:field_country_value WHERE nid=:nid', 
        array(':field_country_value'=>$country_name, ':nid'=>$country['nid']));
} 
```

这可以从任何自定义模块运行。（我很抱歉，其中一些是在 Drupal 7 而不是 Drupal 6 代码中，但你明白了）

2）确保键与数据库中的数据匹配 - 一旦它们相同，那么当您编辑节点时，它应该选择正确的值。如果您遇到问题，请在键的值和存储在数据库中的值之间进行比较 - 这应该突出显示任何细微的差异，例如额外的空格......

# git - 如果 rstudio，如何从 git 选项卡中获取文件

> ID：12224056
> 
> 赞同：5
> 
> 时间：2012-09-01T00:57:24.633
> 
> 标签：git, r

我是个笨蛋，一直在将 .Rpoj、.Rbuildignore 和 .gitignore 上传到 github。其中一些文件在拉取它们时会与其他项目贡献者的本地存储库混淆。完成后我已经弄清楚如何解决这个问题，但它涉及命令行代码：

```
git reset --hard (number of last good commit)
git push -f origin HEAD^:master 
```

我宁愿不做这种猴子生意。有没有办法从 git 选项卡窗口中删除这些讨厌的文件，这样我就不会再不小心上传它们了。我什至不知道要搜索什么才能找到答案。

这是我在本地存储库中需要但希望从 RStudio 的 git 选项卡窗口中消失的文件的屏幕截图。

![在此处输入图像描述](../Images/1ebf98253b375cd68507b0e10f350217.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T01:59:06.410

将以下行添加到`.gitignore`文件中：

```
.gitignore
.Rbuildignore
pacman.Rproj 
```

# android - Activity 未找到异常 Android

> ID：12224067
> 
> 赞同：0
> 
> 时间：2012-09-01T01:00:14.350
> 
> 标签：android, android-intent

这是logcat中的错误：

```
FATAL EXCEPTION: Thread-8
android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.slehmann.volumetimechanger.MAINACTIVITY } 
```

这是我的清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.slehmann.volumetimechanger"
    android:versionCode="1"
    android:versionName="1.0" >
    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:screenOrientation="portrait"
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="com.slehmann.volumetimechanger.APP" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <receiver  android:process=":remote" android:name="AlarmReceiver"/>
          <activity
            android:screenOrientation="portrait"
            android:label="@string/app_name"
            android:name=".splash" > 
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

这是我的意图：

```
} finally {
    Intent openMenus = new Intent("com.slehmann.volumetimechanger.MAINACTIVITY");
    startActivity(openMenus);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T01:04:22.590

你应该使用

```
} finally { Intent openMenus = new Intent("com.slehmann.volumetimechanger.APP"); startActivity(openMenus); } 
```

或者

```
 } finally { Intent openMenus = new Intent(CLASSNAME.this, TARGETCLASSNAME.class); startActivity(openMenus); } 
```

或更改`manifest.xml`

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:screenOrientation="portrait"
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="com.slehmann.volumetimechanger.MAINACTIVITY" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <receiver  android:process=":remote" android:name="AlarmReceiver"></receiver>
      <activity
        android:screenOrientation="portrait"
        android:label="@string/app_name"
        android:name=".splash" > 
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T03:54:49.083

您的活动名称已`MainActivity`进入`manifest`并且当调用意图时然后使用`MAINACTIVITY`发生的那个原因。记住`uppercase`and `lowercase`。

还有一件事：

只有一项活动应注册到 Launcher 类别。

```
<activity android:name=".FirstClassName"
      android:label="@string/app_name">
 <intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
 </intent-filter>
</activity> 
```

其他活动应该像这样声明，没有额外的权限。

```
<activity android:name=".SecondClassName"/> 
```

所以声明成清单：

```
<activity
    android:screenOrientation="portrait"
    android:name=".MainActivity"
    android:label="@string/title_activity_main" >

</activity> 
```

去除

```
<intent-filter>
     //
      </intent-filter> 
```

从 MainActivity 声明的清单中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T01:40:27.793

你犯了一个愚蠢的错误，你的活动名称是**MainActivity**并且在你的意图调用中你已经将它声明为**MAINACTIVITY**因为这个原因发生了。就像——

```
finally {
                Intent openMenus = new Intent("com.slehmann.volumetimechanger.MainActivity");
                startActivity(openMenus);
            } 
```

# php - sql语句的语法问题

> ID：12224068
> 
> 赞同：0
> 
> 时间：2012-09-01T01:00:18.737
> 
> 标签：php, sql

我创建了一个函数，但它不起作用。盯着它看了 15 分钟，尝试了不同的方法，我无法让它工作。谁能告诉我我的语法有什么问题？变量`$user_id`是一个数字并且`$input`是一个字符串。我知道 mysql 已被弃用，这是我正在做的事情。我只想知道sql有什么问题，因为毕竟是sql问题。

```
function insert_what_i_do( $user_id, $input) 
{
    if (mysql_result(mysql_query("SELECT `user_id` FROM `profile` WHERE `user_id` = $user_id"), 0) !== 1) 
    {
        mysql_query("INSERT INTO `profile` (user_id, what_i_do) VALUES ($user_id, '$input')");    
    } 
    else 
    {
        mysql_query("UPDATE `profile` SET `what_i_do` = '$input' WHERE `user_id` =  $user_id");
    }
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T01:06:31.220

这是 plain `MySQL`，请仔细看看我在那里做了什么，不建议再使用`mysql_*`function ，因为它们已被弃用。注意引用的`$input`?

```
<?php
    function insert_what_i_do( $user_id, $input) {
        $input = mysql_real_escape_string($input);
        $query = mysql_query("SELECT `user_id` FROM `profile` WHERE `user_id` = '".(int)$user_id."'");
        $num = mysql_num_rows($query);
        if($num) {
            $query = mysql_query("UPDATE `profile` SET `what_i_do` = '".$input."' WHERE `user_id` =  '".(int)$user_id."'");
        } else {
            $query = mysql_query("INSERT INTO `profile` (`user_id`, `what_i_do`) VALUES ('".(int)$user_id."', '".$input."')");
        }
    }
?> 
```

你需要学习使用 PDO：

```
<?php
    $db = new PDO('mysql:host=localhost;dbname=testdb;charset=UTF-8', 'username', 'password', array(PDO::ATTR_EMULATE_PREPARES => false, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION));
    function insert_what_i_do( $user_id, $input) {
        global $db;
        $stmt = $db->query("SELECT `user_id` FROM `profile` WHERE `user_id` = :user_id");
        $stmt->execute(array(':user_id' => $user_id));
        $num = $stmt->rowCount();
        if($num) {
            $stmt = $db->query("UPDATE `profile` SET `what_i_do` = :input WHERE `user_id` = :user_id");
            $stmt->execute(array(':user_id' => $user_id, ':input' => $input));
        } else {
            $stmt = $db->query("INSERT INTO `profile` (`user_id`, `what_i_do`) VALUES (:user_id, :input)");
            $stmt->execute(array(':user_id' => $user_id, ':input' => $input));
        }
    }
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T01:15:22.823

解决 PHP 问题后，请注意，您当前尝试在 3 个 mysql 查询/语句中执行的操作可以一次性完成 - 假设这`user_id`是主键或唯一键：

```
INSERT INTO profile 
  (user_id, what_i_do) 
VALUES 
  ('$user_id', '$input')
ON DUPLICATE KEY UPDATE 
  what_i_do = VALUES(what_i_do) ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T01:07:24.850

您似乎错过了更新查询中的单引号`$input`：

```
mysql_query("UPDATE `profile` SET `what_i_do` = '$input' WHERE `user_id` =  $user_id"); 
```

但我也看不到你*建立*mysql 连接的任何地方。

# scala - 隐含的 Scala 错误还是我？

> ID：12224070
> 
> 赞同：1
> 
> 时间：2012-09-01T01:00:38.670
> 
> 标签：scala

切入正题

“转换” int 为字符串

```
 implicit def int2string(i: Int): String = {
    "foo"
  } 
```

接受字符串并打印的方法

```
def printString(i: String) = print(i) 
```

使用 Int 参数调用 printString

```
printString(_:Int) 
```

那不应该显示“foo”吗？但是`printString(i:String)`永远不会被调用。

`printString(1)`打印“富”

这里有问题还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T01:06:06.910

那是因为`printString(_:Int)`它实际上所做的是在一个函数中转换该表达式，该函数接受一个 Int 并且可能永远不会被调用......请参阅：

```
scala> implicit def int2string(i: Int): String = "foo"
int2string: (i: Int)String

scala> def printString(i: String) = print(i)
printString: (i: String)Unit 
```

这里没有语法错误意味着它正在工作。举例说明：

```
scala> printString(_:Int)       // Function from Int to Unit 
res0: Int => Unit = <function1> 
```

编译器将外部表达式转换为`{ x:Int => printString(x) }`，然后应用隐式转换，因为隐式在范围内，所以结果是`{ x:Int => printString(int2string(x)) }`。

一个不起作用的，因为没有从 Object 到 String 的转换：

```
scala> printString(_:Object)
<console>:10: error: type mismatch;
 found   : java.lang.Object
 required: String
              printString(_:Object) 
```

现在要实际查看打印，我们需要调用它：

```
scala> val foo = printString(_:Int)
foo: Int => Unit = <function1>

scala> foo(5)
foo 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T01:12:21.263

下面的 Scala REPL 几乎讲述了整个故事，它永远不会被调用是因为`printString(_:Int)`它不是函数调用。您正在创建一个新函数。

如果你直接传入 int，一切正常。

```
scala>  implicit def int2string(i: Int): String = {
     |     "foo"
     |   }
int2string: (i: Int)String

scala> def printString(i: String) = print(i)
printString: (i: String)Unit

scala> val x = printString(_:Int)
x: Int => Unit = <function1>

scala> x(10)
foo

// This works because you have implicit def, 
// and this will be printString(int2string(10)) 
// when your argument is a Int.
scala> printString(10) 
foo
scala> 
```

# android - 使用 PhoneGap 删除 Android 中的缓存

> ID：12224076
> 
> 赞同：1
> 
> 时间：2012-09-01T01:01:26.843
> 
> 标签：android, cordova

我想删除 Android 中的缓存。我正在使用 PhoneGap 技术。实际上，在黑莓或 iOS 中一切正常，但在 Android 中存在问题。在我的应用程序中，有一个自动建议的电台名称列表。用户第一次选择站台时还好，但是下次用户选择同一个站台时，站名显示大字体（白色背景（与我原来的站台列表不同的单个列表），我认为是由于缓存）。

我认为这是由于 Android 使用 Chrome。您能否建议我如何删除此缓存？

```
<input id="getStationDesc" name="getStationDesc" type="text" class="log_txtfield" disabled="disabled"/>
<script>
    var obj = actb(document.getElementById('getStationDesc'),stationList);
    //setTimeout(function(){obj.actb_keywords = custom2;},10000);
    this.actb_timeOut = -1;
    // Number of elements autocomplete can show (-1: no limit)
    this.actb_lim = 10;
    // should the auto complete be limited to the beginning of keyword?
    this.actb_firstText = true;
    // Enable Mouse Support
    this.actb_mouse = true;
    // Delimiter for multiple autocomplete.
    // Set it to empty array for single autocomplete
    this.actb_delimiter = new Array(' ',',');
    // Show widget only after this number of characters is typed in.
    this.actb_startcheck = 1;

    this.actb_bgColor = '#dbe3ec';
    this.actb_textColor = '#00256a';
    this.actb_hColor = '#dbe3ec';
    this.actb_fFamily = 'arial';
    this.actb_fSize = '16px';   
    this.actb_hStyle = 'text-decoration:underline;font-weight="bold";text-align="left"';
    function FillValues()
    {
        document.getElementById('getStationCode').value = document.getElementById('getStationDesc').value.substring(0,3);               
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T06:37:41.960

您可以在 Phonegap 中手动清除缓存。我以前每次都在应用程序加载之前删除应用程序的缓存。试试这个代码，

```
super.clearCache();
super.loadUrl("file:///android_asset/www/index.html"); 
```

如果你愿意，你也可以在应用程序结尾使用。

更新：另一种解决方案，

在你的 actb() 函数之后，调用页面创建，

```
$("#index").trigger("pagecreate");
/*#index is the id of the page*/ 
```

# java - 有没有办法在不访问应用程序代码的情况下中断正在运行的 JVM 中的睡眠线程？

> ID：12224077
> 
> 赞同：1
> 
> 时间：2012-09-01T01:01:37.720
> 
> 标签：java

Eclipse 3.7.2 在 Solaris 11 X86 中存在漏洞 - 它的主线程随机进入睡眠状态并且永远不会从中唤醒。我希望中断睡眠，以便主线程继续运行。可能吗？

更多细节在这里：[Eclipse 永远挂起，线程转储说主线程正在休眠](https://stackoverflow.com/questions/12187369/eclipse-hangs-forever-thread-dump-says-main-thread-is-sleeping)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T01:15:29.337

我认为中断正在运行您未编写的代码的线程不是一个好主意——您可能会导致死锁、损坏的数据结构等。或者它可能是良性的。但这是你的风险...

是的，可以做你想做的事。如果您可以在该应用程序中运行您自己的一些代码，那么您可以监视线程，直到您看到一个具有特定名称并且已经休眠很长时间的线程，然后很容易地中断它：

```
Thread.enumerate()
Thread.getName()
Thread.interrupt() 
```

要让您的代码与程序的其余部分同时运行，您可以修改启动器：修改类路径，创建一个带有 main 方法的类，该方法启动您自己的监控线程，然后调用真正的 main 方法。

或者，您可以将监视线程编写为 Java 代理并使用“-javaagent”开关。有关详细信息，请参阅[http://docs.oracle.com/javase/7/docs/api/java/lang/instrument/package-summary.html](http://docs.oracle.com/javase/7/docs/api/java/lang/instrument/package-summary.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T02:55:25.073

对于 Eclipse，您 >>DO<< 可以访问代码……因为 Eclipse 是开源的。

下载代码，修改它（例如实现看门狗）并重建它可能会更好/更清洁/更简单。

您可能还应该将此报告为 Eclipse 错误。

# angularjs - Angular jsFiddle 示例不起作用

> ID：12224078
> 
> 赞同：3
> 
> 时间：2012-09-01T01:01:49.233
> 
> 标签：angularjs, jsfiddle

我不明白为什么[这](http://jsfiddle.net/zishe/8HxjM/60/)不起作用。错误是

```
Error: Argument 'TodoCtrl' is not a function, got undefined 
```

我想问题很简单，但我无法解决。一般来说，我想定期更改文本。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-01T02:57:46.523

为了让你的小提琴工作，我改变了以下内容：

1.  **将onLoad**更改为**无包装（正文）**
2.  将框架更改为**AngularJS 1.0.1**

这是一个基于您的原始小提琴的[示例小提琴](http://jsfiddle.net/Spu5y/2/)，请注意以下基于绕过 jQuery 进行 DOM/模型更新的更改：

1.  使用Angular 内置的[$timeout](http://docs.angularjs.org/api/ng.$timeout)服务来代替，`setInterval`因为`clearInterval`如果很容易避免，就不应该在 AngularJS 之外修改模型。如果您想这样做，请务必查看[$apply](http://docs.angularjs.org/api/ng.$rootScope.Scope#$apply)。
2.  每当您在 JavaScript 中更新模型时，任何绑定的 UI 元素都会自动更新。

# php - PHP mail() - 服务器错误

> ID：12224079
> 
> 赞同：1
> 
> 时间：2012-09-01T01:01:49.747
> 
> 标签：php, forms, email

我正在尝试使用简单的 PHP mail() 函数从网站创建用户反馈。我使用 W3 中的“PHP Secure E-mail”示例脚本作为基础。由于电子邮件的性质，没有必要增加安全性或使用与该主题相关的其他帖子中建议的某些库，例如 swift mailer。

加载基本表单并选择“发送邮件”按钮后，我收到“服务器错误”消息和以下支持信息：

> [“网站在检索http://www.examplewebsite/formsuccessful.php?forename=Joe&surname=Blogs&email=j.oe.blogs%40example.co.uk&subject=TEST+2&message=Test+Content](http://www.examplewebsite/formsuccessful.php?forename=Joe&surname=Blogs&email=j.oe.blogs%40example.co.uk&subject=TEST+2&message=Test+Content)时遇到错误 它可能已关闭维护或配置不正确。”

文件“formsuccessful.php”文件肯定在服务器上的正确文件夹中 - 除非我忽略了另一个设置来启用这种类型的 PHP 脚本？

我已经包含了下面的表单和 PHP 代码，以防其中有错误。

当然会感谢一些帮助，我已经在这个房子周围跳舞了很多次，我再也看不到树上的木头了。

干杯。

PHP：

```
<?php
function spamcheck($field)
  {
  $field1=filter_var($field, FILTER_SANITIZE_EMAIL);
  if(filter_var($field1, FILTER_VALIDATE_EMAIL))
    {
    return TRUE;
    }
  else
    {
    return FALSE;
    }
  }

if (isset($_REQUEST['email']))
  {

  $mail = $_REQUEST['email'];
  $mailcheck = spamcheck($mail);
  if ($mailcheck==FALSE)
    {
    echo "Invalid input";
    }
  else
    {
    $email = $_REQUEST['email'] ;
    $subject = $_REQUEST['subject'] ;
    $message = $_REQUEST['message'] ;
    $name = $_REQUEST['forename']." ".$_REQUEST['surname'];
    mail("admin@examplewebsite.com", "Subject: "$subject,
    "Message: "$message, "From: "$email," ",$name );
    }
  }
else{
    //reload page with message highlighting error
    }
?> 
```

HTML 表单：

```
<form method="REQUEST" action="formsuccessful.php">
            <fieldset class="master">
            <legend class="master" style="text-align:left;"><b><u>Personal     Details:</u></b></legend>
                <ol class="master">
                    <li class="master"><label class="master"     for"forname">Forename<em class="master">*</em></label><input class="left" type="text"     name="forename" size="30" /></li>
                <li class="master"><label class="master" for"surname">Surname<em class="master">*</em></label><input type="text" name="surname" size="30" /></li>
                <li class="master"><label class="master" for"email">Your Email<em class="master">*</em></label><input type="text" name="email" size="30" /></li>
            </ol>
        <legend class="master" style="text-align: left;"><b><u>Email Contents:</u></b></legend>
            <ol class="master">
                <li class="master"><label class="master" for="subject">Subject:<em class="master">*</em></label><input type="text" name="subject" size="30" /></li>
                <li class="master"><label class="master" for="message">Content:<em class="master">*</em></label><textarea cols="50%" rows="20" onkeyup="checkContent()" name="message" id="message"></textarea></li>
                <li class="master"><input type="submit" value="Send Email" /></li></ol>
        </fieldset>
    </form> 
```

等着让我指出明显的犯罪行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T01:15:34.020

您似乎在这里有一些错误：

```
mail("admin@examplewebsite.com", "Subject: "$subject,
  "Message: "$message, "From: "$email," ",$name ); 
```

如果你想连接，你需要使用类似的东西：

```
mail("admin@examplewebsite.com", "Subject: " . $subject,
  "Message: " . $message, "From: " . $email); 
```

您还有一个参数太多，我不确定您想对最后一部分做什么，`," ", $name`但这不是最后一个参数的有效输入，请[参阅`mail`](http://php.net/manual/en/function.mail.php).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T02:03:30.520

您的表单正在使用不正确的方法“REQUEST”，它应该是 GET 或 POST。另一方面，您使用的 php 代码似乎是正确的，但@jeroen 已经指出的邮件功能除外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T02:07:11.373

将表单方法更改为“发布”

另外，我认为这不会产生影响，但在表单操作中使用完整的 URL。

即：form method="POST" action="http://www.example.com/path/to/file/formsuccessful.php"

# c++ - 无法在 Windows 中运行 Qt 应用程序

> ID：12224080
> 
> 赞同：0
> 
> 时间：2012-09-01T01:02:18.360
> 
> 标签：c++, qt, dll, mingw, dependency-walker

我使用 MinGW GCC 创建了默认 MainWindow 的可执行文件（没有更改任何代码），并将 .exe 文件从调试目录移动到另一个目录，其中我有**QtCored4.dll**、**QtGuid4.dll**和**QtNetworkd4.dll**。

当我单击可执行文件时，我收到错误消息：

> 程序入口点_ZN7QWidget8winEventEP6tagMSGPI在动态链接库QtGuid4.dll中找不到。

使用 Dependency Walker 打开我的可执行文件会给我以下通知：

> 错误：由于隐式依赖模块中缺少导出函数，至少一个模块具有未解析的导入。警告：至少没有找到一个延迟加载依赖模块。警告：由于延迟加载依赖模块中缺少导出功能，至少有一个模块存在未解析的导入。

我真的不知道我要去哪里错了，希望有任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T01:32:45.567

您要么错过了一个由 QtGuid4.dll 动态加载的 DLL（依赖项步行器应该指出这一点），要么该 DLL 错过了符号，因为它是使用不同的配置编译的。您的可执行文件是否像 DLL 一样使用调试设置编译？您是否也有“普通”DLL（没有“d”）？

# rdf - 在 Jena 中设置 OWL 推理器

> ID：12224083
> 
> 赞同：0
> 
> 时间：2012-09-01T01:02:40.607
> 
> 标签：rdf, semantic-web, jena, owl

我试图在 Turtle 中定义（在 turtle 中）一个对称的传递谓词并从中获得推论。

这是我定义谓词的方式：

```
:similar a owl:SymmetricProperty; a owl:TransitiveProperty . 
```

我如何使用它（相同的乌龟文件）：

```
:a :similar :b .
:b :similar :c . 
```

然后我发出一个 sparkl 查询“select ?x where ?x:similar :c”希望得到 a 和 b。

我试图像这样设置模型：

```
OntModel ont = ModelFactory.createOntologyModel( OntModelSpec.OWL_MEM );      
ont.read("file:./myontology.turtle",null,"TURTLE"); 
InfModel model = ModelFactory.createInfModel(ReasonerRegistry.getOWLReasoner(), ont); 
```

然后在我的 QueryExecutionFactory.create 中使用 InfModel。不工作。

我也尝试过：

```
OntModel model = ModelFactory.createOntologyModel( OntModelSpec.OWL_DL_MEM_RULE_INF );
model.read("file:./myontology.turtle",null,"TURTLE"); 
```

也没有运气。什么是正确的方法？我错过了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:19:51.500

找到了答案。以下工作正常：

```
OntModel model = ModelFactory.createOntologyModel(OntModelSpec.OWL_MEM_MICRO_RULE_INF);
model.read("file:./myontology.turtle",null,"TURTLE"); 
```

我对前缀有一些问题。另外，我将 :similar 声明为一个类，并假设子类将继承 owl:SymmetricProperty 和 owl:TransitiveProperty。似乎不是那样工作

# java - 在运行时刷新java程序

> ID：12224088
> 
> 赞同：3
> 
> 时间：2012-09-01T01:04:18.540
> 
> 标签：java, swing, jtable, runtime, defaulttablemodel

我有java程序这样做：从数据库中获取数据并将它们附加到JTable中。

当我将数据添加到数据库中时，我无法刷新 JTable 以查看新数据，我应该关闭程序并再次运行它。

如何刷新/重新加载程序以查看数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T01:17:39.353

好的，我会给你一个快速的解决方案：

```
package stack;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import javax.swing.JTable;
import javax.swing.table.DefaultTableModel;

public class Test {
    JTable table = new JTable();

    public void selectFrom(){
        Connection conn = null;
        Statement st = null;
        ResultSet rs = null;
        DefaultTableModel model=(DefaultTableModel)table.getModel();
        int rc= model.getRowCount();
        for(int i = 0;i<rc;i++){
            model.removeRow(0);
        }
        try{
            Class.forName("org.postgresql.Driver");
            conn = DriverManager.getConnection("jdbc:postgresql://localhost:5432/mydb","postgres","123");
            st = conn.createStatement();
            rs = st.executeQuery("select * from mytable");
            while(rs.next()){
                //Populate table
            }
        }catch(Exception e){
            e.printStackTrace();
        }finally{
            try {
                rs.close();
            } catch (SQLException e) {
                e.printStackTrace();
            }
            try {
                st.close();
            } catch (SQLException e) {
                e.printStackTrace();
            }
            try {
                conn.close();
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }
    }

    private void insertInto(){
        Connection conn = null;
        PreparedStatement pst = null;
            try{
                Class.forName("org.postgresql.Driver");
                conn = DriverManager.getConnection("jdbc:postgresql://localhost:5432/mydb","postgres","123");
                pst = conn.prepareStatement("INSERT INTO mytable(id,first_column) VALUES(?,?)");
                //Insert into table using pst
                pst.execute();

                selectFrom();
            }catch(Exception e){
                e.printStackTrace();
            }finally{
                try {
                    conn.close();
                } catch (SQLException e) {
                    e.printStackTrace();
                }
                try {
                    pst.close();
                } catch (SQLException e) {
                    e.printStackTrace();
                }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T01:26:24.927

如果使用`DefaultTableModel`请参阅[`addRow`方法](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableModel.html#method_summary)。否则只需创建一个新模型并调用[`JTable.setModel(TableModel)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#setModel%28javax.swing.table.TableModel%29).

# xcode - Xcode无法访问存储库“（null）”

> ID：12224094
> 
> 赞同：2
> 
> 时间：2012-09-01T01:05:04.813
> 
> 标签：xcode, git, repository

Xcode git 问题再次出现。现在，当我定期创建新项目（在工作区内部或外部）时，我似乎无法让源代码控制操作正常工作。但是，我可以在 Organizer 中看到存储库，并且可以毫无问题地使用外部工具，包括 git 命令行工具。当我通过 File->Source Control 菜单尝试任何操作时，我只看到...

无法访问存储库“（null）”

我已经看到其他人为 SVN 报告了这一点，我不将其用于这些项目。有什么建议吗？

谢谢，~查克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:16:53.723

如果您的项目位于，假设`/usr/local/projects/your_project`，那么*Xcode在定位 .git 存储库时存在问题，并且**Xcode*中的 git 功能不适用于该项目。

相反，只需将您的项目存储在`~/Documents/projects/your_project`其中，*Xcode*的 git 功能应该会再次开始工作。

# php - PHP日期时间戳错误

> ID：12224102
> 
> 赞同：0
> 
> 时间：2012-09-01T01:06:18.450
> 
> 标签：php

我一辈子都想不通为什么从下面的代码返回的 unix 时间戳显示为 Fri, 31 Aug 2012 06:26:00 GMT。我已经在我的服务器以及[http://www.onlineconversion.com/unix_time.htm](http://www.onlineconversion.com/unix_time.htm)上对此进行了测试。返回的日期/时间实际上应该是 Fri, 31 Aug 2012 02:26:41 PM。

```
$stringtime = strtotime(DATE("m/d/y G:i", STRTOTIME("2012-08-31 02:26:41"))); 
```

谁能告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T01:09:42.853

Unix 时间戳始终为 GMT（无时间偏移）。您可能需要在 php.ini 或代码中设置偏移量，以允许您看到 4 小时的差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T01:12:38.877

您需要先使用`date_default_timezone_set`函数设置时区，即

```
date_default_timezone_set('America/Los_Angeles'); 
```

[**手动**](http://php.net/manual/en/function.date-default-timezone-set.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T01:52:54.613

`strtotime()`将输入字符串转换为 unix 时间戳。如果您的输入字符串没有时区信息，PHP 必须猜测您指的是哪个时区。它并没有真正猜测......它会查看您的默认时区。

UNIX 时间戳是自 1970 年 1 月 1 日 UTC 以来的秒数。所以如果你这样做：

```
echo strtotime('1970-01-01 00:00:00');
// depends on your default time zone 
```

您可能期望为零。但是您没有在字符串中指定时区，因此它将使用默认时区。实际输出会有所不同。

```
date_default_timezone_set('UTC');
echo strtotime('1970-01-01 00:00:00');
// always 0 
```

现在它将为零。或者您可以消除歧义：

```
echo strtotime('1970-01-01 00:00:00 UTC');
// always 0 
```

同样，当您使用 时`date()`，PHP 在显示时间时应用默认时区。

您问题中的代码实际上并未显示您的错误在哪里。所以我不能真正告诉你你的问题是什么，除了你不明白 PHP 如何处理时间戳和时区。

如果您的时间戳是正确的，那么您可能只需要使用`date_default_timezone_set()`来设置您的时区。这将影响未来所有对`date()`.

你也可能对使用这个`DateTime`类感兴趣，它比从 1970 年开始计算秒数更简单。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-01T01:17:32.950

不要使用 G。这会将其转换为 Gmt 及其使用的唯一格式字符。您只是格式字符串错误

'D, d 我的 h:i:s A'

$stringtime = date('D, d MY h:i:s A', strtotime("2012-08-31 02:26:41"));

# java - 从字符串创建对象名称

> ID：12224105
> 
> 赞同：2
> 
> 时间：2012-09-01T01:06:59.770
> 
> 标签：java, swing, events, actionlistener, jmenuitem

几个小时前我问了这个[问题](https://stackoverflow.com/q/12223196/230513)，但我想我没有很好地解释自己。这是我的代码：

```
for (a = 1; a < 14; a++) {
    JMenuItem "jmenu"+a = new JMenuItem(String.valueOf(a));
    "jmenu"+a.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            rrr[a] = a;
            texto.setFont(texto.getFont().deriveFont((float) a));
            current = a;
        }
    });
    tamano.add("jmenu"+a);
} 
```

我需要做的是`JMenuItem`使用这些名称创建几个 s：

```
jmenu1
jmenu2
jmenu3
jmenu4
etc... 
```

- -编辑 - -

我想要的是每个`JMenuitem`都有不同的名称：

```
JMenuItem "jmenu"+a  //with this I can't create the JMenuItem; it's not permitted
  = new JMenuItem(); //I dont care about this 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-01T01:20:01.970

您不能以编程方式命名变量。如果您想要 14 个不同的组件，则创建一个数组或列表来保存这些组件，然后在循环中创建这些组件并将它们添加到您的数组/列表中。如果你想要第 n 个组件，你可以使用 components[n] 或 list.get(n) 来获取它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-01T01:25:16.613

这里有2个问题

首先是建立`JMenuItem`阵列

```
JMenuItem[] menuItems = new  JMenuItem[14];  
for (int a = 1; a < 14; a++) {
    menuItems[a] = new JMenuItem(String.valueOf(a));
    menuItems[a].addActionListener(new MenuItemAction(a));
    tamano.add(menuItems[a]);
} 
```

第二个是使用`ActionListener`. 因为每个菜单都有自己的关联值，所以在这里使用具体类比匿名类更好：

```
class MenuItemAction extends AbstractAction {
    private final int associatedValue;

    public MenuItemAction(int associatedValue) {
       this.associatedValue = associatedValue;
    }

    public void actionPerformed(ActionEvent e) {
       JMenuItem menuUtem = (JMenuItem)e.getSource();
       System.out.println(associatedValue);
       // do more stuff with associatedValue
   }
} 
```

# ruby-on-rails-3 - 设计和omniauth没有找到登录用户

> ID：12224110
> 
> 赞同：0
> 
> 时间：2012-09-01T01:07:54.137
> 
> 标签：ruby-on-rails-3, devise, omniauth

在遵循 railscast (http://railscasts.com/episodes/235-omniauth-part-1) 之后，我在我的 rails3 应用程序中使用了设计和omniauth。

我可以登录，并且在我的数据库中看到 sign_in_count 列正在增加。

但是，when`user_signed_in?`总是返回 false，并`current_user?`返回 a `no method error`。

我看到其他答案说问题是由 rails.js 引起的，但我没有使用 rails.js。

我的控制器是

```
    定义创建
        omn​​iauth = request.env["omniauth.auth"]

        身份验证 = Authentication.find_by_provider_and_uid(omniauth['provider'],omniauth['uid'])
        如果认证
            sign_in_and_redirect(:user, authentication.user)

        elsif 当前用户
            current_user.authentications.create!(:provider => omniauth['provider'], :uid => omniauth['uid'])
            重定向到 root_url
        别的
            用户 = User.new
            user.apply_omniauth(omniauth)
            如果 user.save(:validate => false)
                登录（：用户，用户）

                重定向到 root_url
            别的
                flash[:notice] = "创建帐户时出错"
                重定向到 root_url
            结尾
        结尾

    结尾

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T14:37:11.797

我要在这里冒个险，说一个两年前的 Railscast 可能有点过时了。来自问题和评论的几件事。首先，你*必须*包含 Devise 的`:omniauthable`模块，否则，嗯，它不会工作。是的，在那之后你不会得到任何路线匹配`/auth/facebook`，因为你必须告诉它那在哪里。

首先，我将向您指出[Devise Wiki](https://github.com/plataformatec/devise/wiki/OmniAuth%3a-Overview)上有关设置的文章。其次，我会插上一点，给你最近一篇关于将[Google OAuth 与 Devise 结合](http://blog.janders223.com/2012/05/rails-3-with-devise-google-and-google-apps-authentication/)使用的博文。最后，我将为您提供通用[Devise Wiki](https://github.com/plataformatec/devise/wiki/_pages)的链接以及关于如何使用 Devise 完成各种令人敬畏的事情的近 50 篇文章。这些由社区更新，并且通常经常更新，因此它们应该包含最新的做事方式。

# css - 谷歌样式表编译器 CSS 重命名

> ID：12224112
> 
> 赞同：0
> 
> 时间：2012-09-01T01:08:18.350
> 
> 标签：css, google-closure-compiler, google-closure-stylesheet

目前，我只在 javascript 文件上使用 Closure Compiler。现在我还想用更短的名称缩小和重命名 CSS 类。

有没有办法避免在我的 .js 文件中重写每个基于 jquery CSS 字符串的选择器（即`$('#SomeID')`或`$('.SomeClass'))`基于变量的选择器？由于大多数 HTML 是在运行时实际生成的，我可以轻松地移动骨架 HTML最初在.js文件的页面中，并让document.ready函数首先将应用程序所需的骨架HTML放在页面上。这会避免重写CSS选择器还是仍然需要将选择器重写为属性一个对象？

该文档在这里，但我没有发现它很清楚[http://code.google.com/p/closure-stylesheets/#Renaming](http://code.google.com/p/closure-stylesheets/#Renaming)

感谢您的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T06:31:11.427

您的问题的简短回答是“不，没有”。

鉴于您已在此处指定使用 jQuery 选择器，我们可以看到任何用于这项工作的工具都需要重写您的所有三个 HTML、CSS 和 JS 代码。

尤其是 JS 代码将非常棘手，因为可以使用子字符串构建 jQuery 选择器 - 例如`$('#prefix_' + suffix)`. 我不知道你是否做过这种事情，但这样做的能力使得几乎不可能编写一个完全可靠的工具来重命名你的 ID 和类，但仍然让你的 JS 代码正常工作。如果您的代码相对简单，则可以编写它以便它为您工作，但没有人会发布一个如此容易破坏的通用工具。

此外，我不相信这样的工具会特别有用。这听起来像是过度优化的情况。

优化很棒——努力使您的网站尽可能快是件好事。但良好优化的关键艺术之一是*优化你最慢的区域*。如果代码中的主要瓶颈是类名的长度，我会感到非常惊讶。

因此，我的建议是花时间找出代码中真正的瓶颈在哪里，并处理这些问题。效果可能远远大于您迄今为止所做的所有缩小工作。

# r - 如何促进 R 中的嵌套 for 循环？

> ID：12224113
> 
> 赞同：0
> 
> 时间：2012-09-01T01:08:32.347
> 
> 标签：r, loops, for-loop, nested

我嵌套了如下的 for 循环。我需要 p:q=1:300 和 n=20。函数“mark”是我感兴趣的模型（Package RMark）。我知道 rbind 可能很慢，但我不知道应该用什么来替换它。否则我还能做些什么来使这个功能更快？谢谢。

```
foo<-function(data, p, q, n){
results.frame <- data.frame()
for (i in 1:n){
    for (i in p:q) {
        run.model<-mark(data[sample(nrow(data), i),], model="Occupancy")       
        results<-data.frame(summary(run.model)$real$p, Occupancy=summary(run.model)$real$Psi, se.p=t(as.matrix(summary(run.model, se=T)$real$p$se)), se.Psi=summary(run.model, se=T)$real$Psi$se, stations=i)
        results.frame<-rbind(results.frame, results)
        } 
    }
write.table(results.frame, "C:\\RWorkspace\\simulation_results.txt")
return(results.frame)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T01:16:08.470

是的，`rbind`可能很慢；更快的方法通常是使矩阵开始时具有正确的大小并适当地填充它。填充矩阵而不是数据框通常也更快。

但是，根据您指定的大小，我怀疑这`mark`是减慢功能的原因，这样做您不会获得太多明显的加速。通过在循环中存储单个结果`run.model`然后在循环中注释该行来测试它会很容易；这将告诉您仅存储结果花费了多少时间。（您也可以“分析”该功能，但这会更简单。）

编辑：我实际上是错的；您指示的尺寸足够大，`rbind`很可能会导致问题。在我的系统上，它相当快并且有相当多的内存，`rbind`使用数据帧需要 7.73 秒，而使用`n=20`0.09 秒`n=1`，所以很明显正在发生一些内存搅动。至于加速，矩阵`n=20`只需 1.00 秒`rbind`，填充只需 0.033 秒。

```
foo <- function(data, p, q, n){
  # make a single results line; remove this line when you put in your code 
  results <- c(1, Occupancy=2, se.p=3, se.Psi=4, stations=5)
  # make the matrix the right size to start with
  results.frame <- matrix(ncol=5, nrow=(q-p+1)*n)
  for (i in 1:n){
    for (j in p:q) {
      # get results here; commented out to show loop speed only
      # put in your actual code here instead
      results.frame[ 1+(i-1)*(q-p+1)+(j-p), ] <- results
    } 
  }
  # get the names right by taking the names from the last time through the loop
  colnames(results.frame) <- names(results)
  results.frame
} 
```

# .net - 将 Windows 窗体 (VB.NET) 中不同控件的代码放在单独的类和单独的文件中

> ID：12224114
> 
> 赞同：0
> 
> 时间：2012-09-01T01:09:24.747
> 
> 标签：.net, vb.net, winforms

我有一个带有不同按钮、文本框和选项卡控件的 Windows 窗体应用程序。

双击按钮/选项卡/文本框时，源代码会在 Form 类（在单个文件中）中自动生成。

双击控件后，如何使代码在单独的类和单独的文件中自动生成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T01:13:45.270

这是不可能的。此外，当双击一个控件时，它不仅会在类中生成代码，还会以 Designer.cs 的形式生成代码，它会自动将所有事件链接到生成的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T01:15:19.577

你不能，我不确定你为什么认为它首先属于单独的类和文件。

如果您在设计时将控件放在窗体上，它们将成为窗体类的属性（成员）。您不是在编写新的按钮类、文本框类和选项卡控件类——您是在访问表单类的成员。IDE 不可能将它们放在单独的代码单元中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T05:36:33.427

自动它是不可能的......

您可以使用 Partial Class 来做到这一点............您需要手动将所有控制事件移动到同一文件的另一个 Partial 类:)

# c# - RestSharp：是否可以更改 http 版本？

> ID：12224116
> 
> 赞同：2
> 
> 时间：2012-09-01T01:09:44.200
> 
> 标签：c#, http, restsharp

是否可以更改 RestSharp 使用的 http 协议版本？即我猜默认是1.1，我想把它改成1.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-02-26T08:47:47.967

```
var client = new RestClient(url);

client.ConfigureWebRequest(r => { r.ProtocolVersion = HttpVersion.Version10; }); 
```

# android - 在 Eclipse for Android 中查找 tools/emulator.exe

> ID：12224118
> 
> 赞同：1
> 
> 时间：2012-09-01T01:09:50.483
> 
> 标签：android, eclipse

我开始在 Android 中开发，但我在使用 Eclipse 时遇到了一些问题。

我刚刚重新安装了当前的 SDK，但是在尝试向 Eclipse 显示路径时，出现以下错误：

> 找不到 C:\Program Files (x86)...droid\android-sdk\tools\emulator.exe！

我很确定我找到了正确的文件夹..这里到底发生了什么？有人告诉我新的 SDK 不会造成这个问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-05-07T16:53:51.797

在某处解压缩您的 sdk zip，复制工具目录的全部内容，将其替换为您的实际 sdk 工具文件夹内容。

如果需要，重新启动 eclipse。

# javascript - Backbone-relational 无法实例化两个 RelationalModel 对象

> ID：12224122
> 
> 赞同：7
> 
> 时间：2012-09-01T01:11:46.910
> 
> 标签：javascript, model-view-controller, backbone.js, backbone-relational

我正在尝试实施 BackboneRelational 并不断获得

> “每个类型不能实例化多个具有相同 id 的 Backbone.RelationalModel！”

```
class App.Models.User extends Backbone.RelationalModel
  urlRoot : '/api/users'
  idAttribute: 'id'

  relations: [
    type: Backbone.HasMany
    key: 'plots'
    relatedModel: 'App.Models.Plot'
    collectionType: 'App.Collections.Plots'
    includeInJSON: false
    reverseRelation:
      key: 'user_id',
      includeInJSON: 'id'
  ]

class App.Models.Plot extends Backbone.RelationalModel
  urlRoot : '/api/plots'
  idAttribute: 'id' 
```

如果我将其中一个模型切换为 extends Backbone.Model 我可以实例化两者，但我会收到所有有关关系功能已损坏的警告。

我正在努力实现以下目标：

```
 plot = new App.Models.Plot({id : 700})
 plot.fetch()
 plot.get('user') 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-01T01:29:36.613

“每个 id 一个模型”情况背后的一般想法是，Backbone Relational 使用数据存储 ( `Backbone.Relational.store`) 来消除对已加载模型的重复请求。

幸运的是，它还提供了[一些帮助](https://github.com/PaulUithol/Backbone-relational#methods-on-the-type-itself)程序来帮助通过商店访问模型。与其提供 ID 并获取绘图，不如使用`findOrCreate`您会发现附加到的方法`App.Models.Plot`：

```
plot = App.Models.Plot.findOrCreate(700)
user = plot.get('user') 
```

# html - 具有 3x3 矩阵的 html5 非仿射图像转换

> ID：12224127
> 
> 赞同：4
> 
> 时间：2012-09-01T01:12:25.373
> 
> 标签：html, homogenous-transformation

是否有任何直接的方法可以在不使用 3d 变换的情况下使用 canvas/css/svg 对图像进行非仿射变换？通过非仿射变换，我的意思是在图像上应用一个 3x3 齐次矩阵，你知道，做“透视”变换。

# php - jQuery/PHP - 所见即所得编辑器保存 $_POST 数据

> ID：12224128
> 
> 赞同：0
> 
> 时间：2012-09-01T01:12:28.150
> 
> 标签：php, jquery

[我找到了一个名为 Redactor Redactor Home Page](http://redactorjs.com/)的 WYSIWYG 编辑器。所以我想实现这个，这样我就可以接受它并实际保存数据。有没有人有任何经验可以告诉我如何获得他们所说的 POST 数据？他们真的没有为我详细描述它，至少[在这里发布“教程”](http://redactorjs.com/docs/settings/)然后转到 UploadFields，在那里他们试图描述如何获取 POST 数据。

我有一个客户很想在他的网站上有这个，任何提示或建议将不胜感激，Necro。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T01:38:16.653

作为设置的一部分，这要求您`textarea`在页面中有一个。确保该元素具有 name 属性，并且当您的表单被提交时，它将转到服务器。

```
<form method="POST" action="/save_text.php">
    <textarea id="redactor_content" name="content"></textarea>
    <input type="submit" value="Save" />
</form>

<script type="text/javascript">
$(document).ready(
    function() {
        $('#redactor_content').redactor();
    }
);
</script> 
```

在 save_text.php 中，您的文本将位于`$_POST['content']`.

# java - 循环中的嵌套 if 语句与两个单独的循环

> ID：12224132
> 
> 赞同：4
> 
> 时间：2012-09-01T01:13:09.337
> 
> 标签：java

这是源代码：

```
public int indexOf(Object o) {
    if (o == null) {
        for (int i = 0; i < size; i++)
            if (elementData[i]==null)
                return i;
    } else {
        for (int i = 0; i < size; i++)
            if (o.equals(elementData[i]))
                return i;
        }
    }
    return -1;
} 
```

为什么没有这个：只有一个循环和 if 语句。

```
public int indexOf(Object o) {

   for (int i = 0; i < size; i++){
       if (o == null) {
             if (elementData[i]==null)
                return i;
        else {
             if (o.equals(elementData[i]))
                return i;
        }
    }

    return -1;
} 
```

第一个片段必须有两个循环，但有人说上面的代码性能很好。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T01:26:17.303

实际上，两个片段都做同样的事情。但是，第二个片段的性能可能会更差，因为比较语句会被多次评估，而不是第一个片段中只有一个比较。每个代码片段经历的循环迭代次数相同，但所需的比较次数不同。就那么简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T01:26:19.240

想法是第一个只需要比较`o`一次`null`，而第二个必须在循环中的每次通过时进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T01:26:49.533

使用单个循环，您必须在每次迭代时重新检查条件 - 因此需要更多工作。

对于第一个示例，您只需检查一次条件。

如果在没有优化的情况下编译（以字面方式），那么第二个示例会更慢。

但是，大多数编译器确实有技巧，可以将第二个示例中的代码转换为与第一个示例等效的机器代码。但是，这在很大程度上取决于编译器优化标志（即优化的内容 - 运行时间或代码大小）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T01:30:58.830

第二种形式检查是否`o == null`，`size - 1`次数更少。

假设无论如何都没有为您完成这样的优化。如果不尝试，这不会是假设。

有时在循环中的最终机器代码中使用较少的指令也有好处，尽管它不太可能产生任何影响。

减少可能分支的数量也可以提高性能，因为预取错误指令的可能性较小。（感谢安德烈亚斯亨宁）。

总而言之，当您需要优化某些东西时，将事物移出循环的想法是一件足够合理的事情，但在这种情况下可能并不重要。

刚看到你的评论。考虑到有多少代码进入 ArrayList.indexOf，这是一个合理的地方来做你能想到的每一个小小的挤压。

# eclipse - 在 Eclipse PyDev 中调试 Python Curses 应用程序？

> ID：12224149
> 
> 赞同：0
> 
> 时间：2012-09-01T01:17:32.397
> 
> 标签：eclipse, python-2.7, pydev, ncurses, curses

我使用 Eclipse 和 PyDev 编写了以下基本的 python 诅咒应用程序。

```
#!/usr/bin/python

import curses

myscreen = curses.initscr()
curses.noecho()
curses.curs_set(0)
myscreen.keypad(1) 

myscreen.border(0)
myscreen.addstr(12, 25, "Python Curses")
myscreen.refresh()

while True:
    event = myscreen.getch()
    if event == ord("q"): break
    if event == ord("a"):
        myscreen.addstr(12, 25, "You Pressed A")
        myscreen.refresh()
    if event == ord("b"):
        myscreen.addstr(12, 25, "You Pressed B")
        myscreen.refresh()

curses.endwin() 
```

该程序在 linux 终端中运行良好，但是当我尝试在 Eclipse PyDev 中运行它时抛出一个错误“curses.curs_set(0) _curses.error: curs_set() returned ERR”如果我删除该行，我最终会得到很多破折号，它等待输入。

是否可以在 Eclipse 中调试 python curses 代码，或者他们的另一个 IDE 是否更适合 python curses 开发？

诅咒也适用于交互式控制台应用程序吗？（我希望做的不仅仅是基本的用户输入，可以通过 readlines 完成。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T11:08:13.687

由于 PyDev 没有真正的终端替代品（即：控制台输出不是真正的 tty），您必须在终端中从外部启动程序并使用远程调试器进行调试。请参阅： http: [//pydev.org/manual_adv_remote_debugger.html](http://pydev.org/manual_adv_remote_debugger.html)

请注意，您可以在 Eclipse 中配置外部启动以启动用于启动程序的外部 shell。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-02T20:32:51.480

感谢法比奥的回答。这对我有用，但是 PyDev 手册“[远程调试器](http://pydev.org/manual_adv_remote_debugger.html)”页面并没有让它变得非常简单，所以这是我必须做的额外工作。

我必须先将插件“pysrc”目录放在我的 PyDev PYTHONPATH 中，否则提到的 PyDev 调试服务器按钮不可用（我想我还必须重新启动 Eclipse）。

![将 pysrc 目录放入您的 PYTHONPATH](../Images/c19be83807d0b62ce4780e8f7ab08b14.png)

我在 Windows 上的 cygwin 下使用 python 来开发我的 curses 应用程序，所以我设置了一个外部工具配置（再次按照 Fabio 的建议）来打开 MinTTY 并从 bash 脚本运行我的 python 程序。bash 脚本还包含一个睡眠，所以我可以看到任何退出错误。

![设置外部工具运行](../Images/a9fe1cfccf0ff16103231006a063700e.png)

还要设置 2 个环境变量：INSIDE_PYDEV_DEBUGGER（这将告诉我的应用程序联系调试服务器）和 PYTHONPATH 以及它需要的插件模块的目录。

![设置外部工具环境变量](../Images/c37c660ebc4c5d3dde0f4fed5d15086c.png)

然后在我的python程序开始时我放了：

```
import os
if 'INSIDE_PYDEV_DEBUGGER' in os.environ:
    import pydevd
    pydevd.settrace() 
```

然后我启动 PyDev 调试服务器并运行外部工具，终端打开，程序在调试器中停止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T03:08:22.533

尝试使用[凯特](http://kate-editor.org/)。它是带有内置终端仿真器的程序员文本编辑器，因此 curses 应该可以正常工作。

# php - CakePHP 2.0 表单验证

> ID：12224153
> 
> 赞同：0
> 
> 时间：2012-09-01T01:18:06.140
> 
> 标签：php, cakephp, cakephp-2.0

我有一个简单的创建新帐户页面，其中包含用户名、电子邮件、确认电子邮件、密码和确认密码字段。所有验证都在用户模型下，目前所有输入字段都是必需的。

用户登录后，会出现一个设置页面，他们可以在其中更新电子邮件和密码。输入字段是电子邮件、确认电子邮件、密码和确认密码（与创建帐户页面没有用户名字段的输入字段相同）。但是，我希望验证在设置下有所不同，并且不需要任何字段。在不影响创建新帐户页面的验证规则的情况下，我将如何解决此问题？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T04:07:31.110

正如 CakePHP 所认为的那样，您似乎并不需要任何“必需”字段。

就 CakePHP 而言，“必需”意味着该字段必须在每次保存该模型时提交。它与字段中是否有内容（即'notEmpty'）无关。

所以 - 对于你的情况，你可能只是为每个字段设置正常的数据验证规则（即 minLength、notEmpty、有效的电子邮件......等等等等，并且对两个页面都很好。提交的任何数据都必须通过验证——如果没有提交，没什么大不了的。

你总是可以设置：

```
'required' => 'create' //or update 
```

if you need to verify that that field exists in the data for a save or update... but I've personally never found that necessary and have created many pages like you've described.

Per the book [[here]](http://book.cakephp.org/2.0/en/models/data-validation.html#required):

> required => true does not mean the same as the validation rule notEmpty(). required => true indicates that the array key must be present - it does not mean it must have a value. Therefore validation will fail if the field is not present in the dataset, but may (depending on the rule) succeed if the value submitted is empty (‘’).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T01:45:27.630

您可以使用`'on'`，如下所示：

```
array(
        'rule' => 'required',
        'on'   => 'create' // or 'update'
) 
```

或者您可以尝试在控制器中取消设置验证，但第一个更干净。

# heroku - 在 Heroku 上使用 Ebean 和 Play 框架

> ID：12224161
> 
> 赞同：3
> 
> 时间：2012-09-01T01:20:59.620
> 
> 标签：heroku, playframework-2.0, ebean

我在 Play Framework 2 中使用 Ebean 来存储一些基本信息。这个应用程序被推送到 Heroku。一切似乎都很好，我可以用 Ebean 写/读，但是几个小时后，当我访问应用程序时，存储的所有内容都消失了。

从[这个来源](http://www.quora.com/What-are-the-potential-downsides-of-using-Heroku)我知道，当应用程序不经常访问时，它需要启动。这意味着，运行中的应用程序会在空闲一段时间后关闭，对吧？

> *很少访问的免费应用程序需要几秒钟（有时更长）才能启动 - 如果您需要您的应用程序快速响应，即使是在一段时间内第一次访问时也可以升级到付费计划*

我发现这个问题[Heroku 没有永久文件系统？](https://stackoverflow.com/questions/12123050/no-permanent-filesystem-for-heroku)这解释了heroku上没有永久文件系统。

因此，Ebean 将数据存储在文件系统上，这意味着它们会在一段时间后被擦除，因为 Heroku 上没有永久文件系统。

我应该提到我在 Heroku 上使用**免费应用程序。**任何建议如何解决这个问题？也许我错过了一些配置，或者什么......

**编辑**

我使用保存在文件中的 H2 数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T12:57:41.717

为什么不使用免费计划中提供的 Heroku 的 Postgresql？

最近几天使用它有一些问题，所以配置它应该没有问题，即： [https ://stackoverflow.com/a/12196800/1066240](https://stackoverflow.com/a/12196800/1066240)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T15:56:52.303

来自[heroku 文档](https://devcenter.heroku.com/articles/dynos#the-dyno-manifold)：

> 已扩展 web dyno（运行 web 进程类型的 dyno）数量以便仅运行一个 web dyno 的应用程序将在一个小时不活动后让该 web dyno 空闲。...运行超过 1 个 web dyno 的应用程序永远不会闲置。工人测功机永远不会闲置。

关于文件系统生命周期：

> 临时文件系统
> 
> 每个 dyno 都有自己的临时文件系统，以及最近部署的代码的新副本。在 dyno 的生命周期中，它的运行进程可以将文件系统用作临时暂存器，但是任何其他 dyno 中的进程都看不到写入的文件，并且在停止或重新启动 dyno 时，写入的任何文件都将被丢弃。

因此，由于您将 H2 与存储在文件系统上的文件一起使用，数据将在不活动一小时后丢失。

要存储您的数据，我强烈建议您使用[Postgres Heroku 插件](https://addons.heroku.com/heroku-postgresql)，它免费提供 10.000 行。

# spring - Spring MVC 3.1：url映射问题

> ID：12224164
> 
> 赞同：-1
> 
> 时间：2012-09-01T01:21:51.143
> 
> 标签：spring, spring-mvc, url-mapping

我是 Spring MVC 框架的新手，在使用两个不同的控制器进行基本 URL 映射时遇到了一些问题。我正在使用@Controller 和@RequestMapping。

以下导致 /people 和 /accounts 的 404 错误。

这是我的 Spring MVC 3.1 设置：

**索引.jsp**

```
<!DOCTYPE html>
<html>
<head>
    <title>t-diggity</title>
</head>
<body>
    <h1>integration</h1>
    <a href="/people/">Contact List</a><br>
    <a href="/accounts/">Account List</a><br>
</body>
</html> 
```

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xmlns="http://java.sun.com/xml/ns/javaee"
     xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
     version="2.5">

<display-name>t-diggity</display-name>

<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    <init-param>
            <param-name>contextAttribute</param-name>
            <param-value>org.springframework.web.servlet.FrameworkServlet.CONTEXT.spring</param-value>
        </init-param>
    </filter>
    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>

    <servlet>
        <servlet-name>spring</servlet-name>
        <servlet-class>
            org.springframework.web.servlet.DispatcherServlet
        </servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>classpath:applicationContext.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

<servlet-mapping>
        <servlet-name>spring</servlet-name>
        <url-pattern>/people/*</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>spring</servlet-name>
        <url-pattern>/assets/*</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>spring</servlet-name>
        <url-pattern>/accounts/*</url-pattern>
    </servlet-mapping>

</web-app> 
```

**控制器＃1：PersonController.java**

```
@Controller
@RequestMapping("/people/")
public class PersonController {

    @Autowired
    private PersonService personService;

    @RequestMapping("/")
    public String listPeople(Map<String, Object> map) 
    {
        map.put("person", new Person());
        map.put("peopleList", personService.listPeople());
        return "people";
    }

    @RequestMapping(value = "/addPerson", method = RequestMethod.POST)
    public String addPerson(@ModelAttribute("person") Person person, BindingResult result
    {
        personService.addPerson(person);
        return "redirect:/people/";
    }

    @RequestMapping("/delete/{personId}")
    public String deletePerson(@PathVariable("personId") String personId) 
    {
        personService.removePerson(personId);
        return "redirect:/people/";
    }
} 
```

**控制器 #2：AccountController.java**

```
@Controller
@RequestMapping("/accounts")
public class AccountController {

    @Autowired
    private AccountService accountService;

    @RequestMapping("/")
    public String listAccounts(Map<String, Object> map) 
    {
        map.put("account", new Account());
        map.put("accountList", accountService.listAccounts());
        return "accounts";
    }

    @RequestMapping(value = "/addAccount", method = RequestMethod.POST)
    public String addPerson(@ModelAttribute("account") Account account, 
                            BindingResult result) 
    {
        accountService.addAccount(account);
        return "redirect:/accounts/";
    }

    @RequestMapping("/delete/{accountId}")
    public String deleteAccount(@PathVariable("accountId") String accountId) {
        accountService.removeAccount(accountId);
        return "redirect:/accounts/";
    }

} 
```

我希望我的错误是一个小错误，我是 URL 映射的新手，所以它可能是小错误......我会很感激任何指导，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T08:52:08.573

更改`index.jsp`为：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>

<!DOCTYPE html>
<html>
<head>
    <title>t-diggity</title>
</head>
<body>
    <h1>integration</h1>
    <a href="<c:url value="/people/"/>">Contact List</a><br>
    <a href="<c:url value="/accounts/"/>">Account List</a><br>
</body>
</html> 
```

锚 URL 不包括根上下文。`c:url`标签将为您处理此问题。

`web.xml`将映射更改为：

```
<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

如果 Web 应用程序中的所有内容都由 Spring MVC 控制，通常不需要单独映射控制器。

并像这样映射你`@Controllers`：

```
@Controller
@RequestMapping("/people")
public class PersonController {

    @RequestMapping("/")
    public String listPeople(Map<String, Object> map) {
        ...
        return "people";
    }

} 
```

我在这里所做的就是丢失for的尾随`/`。`@RequestMapping``/people`

# android - 检索系统默认 Android 联系人图片

> ID：12224167
> 
> 赞同：4
> 
> 时间：2012-09-01T01:22:53.247
> 
> 标签：android, contacts, default, android-contacts

我知道这听起来可能很奇怪，但我想检索系统默认的联系人图片。你知道，当没有联系人图片时使用的那个图标。它在不同版本的 Android 之间有所不同，但通常是一张空白的脸，或者一个灰色的 android，或者其他什么。

我可以从系统中获取该图像并在我的应用程序中使用它吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-01T01:26:30.987

您可以在模拟器附带的资源的可绘制文件夹中找到它们。

`\android-sdk\platforms\android-v#\data\res\drawable\`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T01:31:25.223

我不认为您可以在应用程序中以编程方式获取图片，因为该图像是 android 的电话应用程序私有的。

如果您想将图片复制到您的文件夹，它将出现在

```
/packages/apps/Phone/res/drawable-hdpi/picture_unknown.png 
```

在 AOSP 代码中

# jquery - 将鼠标悬停在表格上时更改表格中文本的颜色

> ID：12224168
> 
> 赞同：0
> 
> 时间：2012-09-01T01:23:23.643
> 
> 标签：jquery, jquery-hover, onhover

当我将鼠标悬停在表格上时，我需要改变表格中文本的颜色。为此，我使用：

```
$('.afishaitem_active').hover(
    function(){
        $(this).css({'border':'solid 1px #ED5353','background-color':'#FFF','color':'#ED5353'});
        $('.afishaitem_up_left_active').css('color','#000'); 
    },
    function(){
        $(this).css({'border':'none','background-color':'#ED5353','color':'#FFF'});
        $('.afishaitem_up_left_active').css('color','#000');
    }
); 
```

和表：

```
<table id="afishaitem_active" class="afishaitem_active" cellpadding="0" cellspacing="0" border="0">
    <tr>
        <td>
            <table cellpadding="0" cellspacing="0" border="0" id="afishaitem_up">
                <tr valign="top">
                    <td class="afishaitem_up_left_active">'.$d.'</td>
                    <td class="afishaitem_up_right_active">data</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr valign="top" style="line-height:11px">
        <td class="afishaitem_seet_active">seet</td>
    </tr>
    <tr valign="top">
        <td class="afishaitem_name_active">name</td>
    </tr>
</table> 
```

将鼠标悬停在表格上时，边框样式和背景颜色会发生变化，但文本颜色不会。

为什么文字的颜色没有变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T20:24:38.940

从您的表中删除此类 afishaitem_up_left_active .. 它应该可以解决您的问题..

```
<td class="afishaitem_up_left_active">'.$d.'</td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T01:30:15.517

您将`'color','#000'`鼠标悬停和鼠标移出，将鼠标悬停（第一个功能）更改为您希望它在悬停时更改为的颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T01:32:31.760

在你的`mouseover`功能中，你有

```
$('.afishaitem_up_left_active').css('color','#000'); 
```

在您的`mouseout`功能中，您具有相同的功能

```
$('.afishaitem_up_left_active').css('color','#000'); 
```

如果它们相同，则不会发生颜色变化，可以更改`#000`为您想要的任何颜色。

```
$('.afishaitem_active').hover(
        function(){
            $(this).css({'border':'solid 1px #ED5353','background-color':'#FFF','color':'#ED5353'});
            $('.afishaitem_up_left_active').css('color','#ED5353'); //changed color
        },
        function(){
            $(this).css({'border':'none','background-color':'#ED5353','color':'#FFF'});
            $('.afishaitem_up_left_active').css('color','#FFF'); //changed color
        }
    );​ 
```

[**试试看**](http://jsfiddle.net/ecm6T/4/)

# windows - What is the folder location of installed printers?

> ID：12224169
> 
> 赞同：1
> 
> 时间：2012-09-01T01:23:56.493
> 
> 标签：windows, icons, printers

I would like to retrieve icon of the installed printers. From what I could search, one of the approach is to retrieve the icon of the .dll or .exe and have it be the icon of the printer. However, it's easy to find printer installed through GUI at:

Control Panel\Hardware and Sound\Devices and Printers

But, is there a physical location on hard drive to this list ? Is this created on the fly ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T01:37:17.440

There is no physical disk folder that contains a list of printers.

If you have the PIDL for the printer in the shell namespace you can easily get its icon using SHGetFileInfo. Getting the PIDL is a little harder but not impossible.

I have done this in the past with a function that enumerates the virtual printer folder (CSIDL_PRINTERS), and compares the name of each item within it against the name of the printer I am looking for. When you find a matching name you have the PIDL, and you can then get the icon.

For example (this code is not complete of course, you will need to flesh it out):

```
SHGetFolderLocation(hwnd, CSIDL_PRINTERS, 0, 0, &pidlPrinters);
SHBindToObject(0, pidlPrinters, 0, IID_IShellFolder, &psfPrinters);
psfPrinters->EnumObjects(hwnd, SHCONTF_NONFOLDERS, &pEnum);
while (pEnum->Next(1, &pidl, 0) == S_OK)
{
    psf->GetDisplayNameOf(pidl, SHGDN_NORMAL, &strName);
    StrRetToBuf(&strName, pidl, chBuf, _countof(chBuf));
    if (_wcsicmp(chBuf, pszPrinterToLookFor) == 0)
    {
        // printer matches
        // build full pidl (pidlPrinters + pidl)
        // pass to SHGetFileInfo with SHGFI_PIDL flag to get icon
    }
} 
```

# bash - 是否可以在 Bash 和 Zsh shell 中使用相同的提示和配置文件设置？

> ID：12224171
> 
> 赞同：1
> 
> 时间：2012-09-01T01:24:58.213
> 
> 标签：bash, terminal, zsh

当我的代码不是 DRY 时，我开始发痒，并且由于各种原因，我在 Bash 和 Zsh 之间来回切换。有没有办法在多个配置文件之间复制/粘贴，而不是指向一个中央文件，`source`它在每个配置文件中，将我的提示、别名、RVM 配置和设置一起保存在一个文件中？

查看 Ryan Bates 的点文件，似乎 .bashrc 是执行此操作的地方。这是首选的解决方案吗？[https://github.com/ryanb/dotfiles/commit/ac7e0c55ce038cbeadd8da2f521eb034d09eb131](https://github.com/ryanb/dotfiles/commit/ac7e0c55ce038cbeadd8da2f521eb034d09eb131)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-05-26T05:18:02.770

[我的 dotfiles](https://github.com/haletom/dotfiles)被编写为可在两者中运行，`{ba,z}sh`并且在两个 shell 中具有相同的行为。

*   提示设置必须在每个 shell 的基础上完成。
*   在ing文件之前使用`zsh`'s`emulate bash``source``bash`
*   [数组索引需要更详细的语法才能移植](https://stackoverflow.com/q/56310835/5353461)

要确定您所在的外壳，请使用：

```
if [ -n $BASH_VERSION ]; then
    # Bash specific
else
    # zsh specific
fi 
```

此外，请参阅[我的常用 bash 和 zsh 函数](https://github.com/HaleTom/dotfiles/blob/master/bash/.config/bash/functions)`bash`，以获取在和中等效的有用函数`zsh`。

# zend-framework2 - 如何检查 ZF2 视图模板是否存在？

> ID：12224176
> 
> 赞同：3
> 
> 时间：2012-09-01T01:25:59.827
> 
> 标签：zend-framework2

我知道如何为 ViewModel 设置特定的模板。但是，在 ViewModel 中设置模板之前，如何检查当前模板路径堆栈中是否确实存在不同的模板？这个想法是我可以重用单个操作来基于查询参数呈现视图。我想先检查一下，如果视图不存在，那么我可以将响应状态代码设置为 404 而不是通用服务器错误消息。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-01T11:23:06.493

您可以执行以下操作，假设您想从控制器执行此操作

```
 $template = 'non/existant/template';
    $resolver = $this->getEvent()
        ->getApplication()
        ->getServiceManager()
        ->get('Zend\View\Resolver\TemplatePathStack');

    if (false === $resolver->resolve($template)) {

        // does not exist
    } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-06T20:18:45.310

如果您想从另一个视图检查视图是否存在（也许您正在加载部分视图），您可以使用

```
<?php if ($this->resolver('layouts/default')) : ?>
    <?php $this->render('layouts/default'); ?>
<?php endif; ?> 
```

[测试 ZF2 中是否存在视图](http://richardjh.org/blog/test-that-a-view-exists-in-zf2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-30T13:31:45.543

如果您使用的是 ZF2Twig，它应该是：

```
$template = "non/existant/twig-template";
/** @var \ZfcTwig\View\TwigResolver $resolver */
$resolver = $this->getServiceLocator()->get('ZfcTwig\View\TwigResolver');
if (false === $resolver->resolve($template)) {
    // Twig template does not exist
} 
```

# android - 为 Android 绑定挂载时参数无效

> ID：12224180
> 
> 赞同：0
> 
> 时间：2012-09-01T01:26:25.963
> 
> 标签：android, bind, mount

当使用 mount(".","/","",MS_BIND,NULL)

返回无效参数错误。

那MS_BIND不能在android中使用吗？此外，android mount shell 命令没有 --bind 选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T20:13:53.040

有一个`--bind`选项，除了它是`-o bind`.

# c# - 如何读取 GPU 负载？

> ID：12224181
> 
> 赞同：5
> 
> 时间：2012-09-01T01:26:26.783
> 
> 标签：c#, performance, gpu, video-card

我正在编写一个程序来监视计算机的各种资源，例如 CPU 使用率等。我还想监控 GPU 使用情况（GPU 负载，而不是温度）。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Diagnostics;
using DannyGeneral;

namespace CpuUsage
{
    public partial class Form1 : Form
    {
        private bool processEnded;
        private Process[] processList;
        private string timeStarted;
        private string timeEnded;
        private List<float> processValues;
        private bool alreadyRun;
        private DateTime dt;
        private DateTime dt1;
        private PerformanceCounter theCPUCounter;
        private PerformanceCounter theMemCounter;
        private PerformanceCounter specProcessCPUCounter;
        private float cpuUsage;
        private float memUsage;
        private List<float> Values;

        public Form1()
        {
            InitializeComponent();

            processEnded = false;
            processList = Process.GetProcesses();
            for (int i = 0; i < processList.Count(); i++)
            {
                listView1.Items.Add(processList[i].ProcessName);
            }
            processValues = new List<float>();
            alreadyRun = false;
            dt = DateTime.Now;

            Values = new List<float>();
                theCPUCounter = new PerformanceCounter("Processor", "% Processor Time", "_Total");
                theMemCounter = new PerformanceCounter("Memory", "Available MBytes");
                specProcessCPUCounter = new PerformanceCounter("Process", "% Processor Time", Process.GetCurrentProcess().ProcessName);

                Logger.Write("The Program Started At ***   " + DateTime.Now.ToShortTimeString());

        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            memUsage = theMemCounter.NextValue();
            label1.Text = memUsage.ToString();
            Logger.Write("Memory Usage   " + memUsage.ToString());
            cpuUsage = this.theCPUCounter.NextValue();
            label2.Text = cpuUsage.ToString();
            Logger.Write("Cpu Usage   " + this.cpuUsage.ToString());
            Values.Add(cpuUsage);
            isProcessRunning();
            if (alreadyRun == true)
            {
                processValues.Add(cpuUsage);
            }

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T01:37:15.410

`video card's own CPU`称为`GPU`. _

查找与此相关的性能计数器`video`（使用`Start->Run->PerfMon`或`PerfMon`在`Start`菜单的搜索框中输入；右键单击图表并选择`Add Counter...`）。

如果您的显卡制造商没有为 GPU 提供任何性能计数器，那么您将没有任何可用的。

# objective-c - 使用谓词过滤 UITableView 的内容

> ID：12224185
> 
> 赞同：0
> 
> 时间：2012-09-01T01:27:46.550
> 
> 标签：objective-c, ios, uitableview, core-data

我有一个从 CoreData 填充的表，我想根据布尔属性进行过滤。如果该地点被标记为收藏，我想在表格视图中显示该地点。代码如下：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return  [self.clubs count];
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    AppDelegate *del = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    self.type = del.type;
    self.searchTxt = del.searchTxt;
    //Core data fetch
    NSManagedObjectContext *managedObjectContext = [[SDCoreDataController sharedInstance] backgroundManagedObjectContext];
    if(!self.clubs){
        self.clubs = [[NSArray alloc] init];
    }
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"name" ascending:NO];

    NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"Place"];
    fetchRequest.sortDescriptors =[NSArray arrayWithObjects:sortDescriptor, nil];
    [sortDescriptor release];

    [managedObjectContext performBlockAndWait:^{
        NSError *error = nil;
        self.clubs = [managedObjectContext executeFetchRequest:fetchRequest error:&error];
    }];   

    if (self.clubs == nil) {
        // Handle the error
    }

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    NSPredicate *predicate;
    predicate = [NSPredicate predicateWithFormat:@"favourite == 0"];
    NSArray *myArray2 = [self.clubs filteredArrayUsingPredicate:predicate];
    Place * place = [myArray2 objectAtIndex:indexPath.row];

    PlaceListCustomCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) 
    {
        cell = [[[PlaceListCustomCell alloc] initWithFrame:CGRectZero ]autorelease];
    }

    UIColor *background = [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:@"table_row_bg.png"]];

    cell.backgroundColor = background;

    [background release];
    // Configure the cell
    cell.placeName.text = place.name;
    cell.townName.text = place.addressline2;
    cell.type.text = place.type;
    cell.disclosure.image = [UIImage imageNamed:@"disclosure_icon.png"];
    if(place.promo ==[NSNumber numberWithBool:YES]){
        cell.promotag.image = [UIImage imageNamed:@"promo_tag.png"];
    }
    cell.reviewNumber.text = @"0 Reviews";
    cell.reviewView.image = [UIImage imageNamed:@"rating_3.png"];
    //Check if there is an image. If not, set the default image
    if (place.image != nil) 
    {
        cell.imageView.image = [UIImage imageWithData:place.image];

    }
    else 
    {
        cell.imageView.image = [UIImage imageNamed:@"no-image-available.jpg"];    
    }

    return cell;

}
@end 
```

由于我尝试在 cellForRow 中添加谓词，此当前方法已损坏，我们将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T02:03:57.440

您应该设置数据数组，使其已正确排序以显示在表格视图中。

更好的是，您应该使用`NSFetchedResultsController`内存效率更高且不易出错的内存。

您不应该在`cellForRowAtIndexPath`. 这不太可能奏效，而且肯定会非常低效。

*请不要只将不相关的代码转储到问题中。*

# c - x86_64 汇编约定保存参数寄存器

> ID：12224188
> 
> 赞同：2
> 
> 时间：2012-09-01T01:28:56.923
> 
> 标签：c, assembly, x86-64

我正在编写一些 x86_64 程序集来调用 C 函数。我的 C 函数接受 1 个参数，因此程序集将参数放在`%rdi`. ABI pdf（链接如下）表示其他 6 个参数寄存器（rsi、rdx、rcx、r8、r9）不会在函数调用中保留。但是，由于我的 C 函数只接受一个`long`参数，我是否可以保证 C 函数是否会破坏其他 5 个寄存器？我的假设是，只有当参数的值发生变化时，参数寄存器才会被破坏：

```
void foo(int a, int b) {
    a++; /* %rdi will be changed, but %rsi won't be changed when control returns. */
} 
```

我之所以问，是因为我想在我的 C 函数调用中保留其他 5 个参数寄存器的值（无需手动从堆栈中显式推送/弹出它们）。

x86_64 ABI - [http://www.x86-64.org/documentation/abi-0.99.pdf](http://www.x86-64.org/documentation/abi-0.99.pdf)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-01T01:34:05.020

没有任何保证。您必须将它们保存在堆栈中以确保它们不会被更改。它们是否被改变将取决于编译器。

如果你想以某种方式确保它们不会被改变，你可以在汇编中编写函数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-01T10:14:01.320

查看第 21 页上的表格。所有寄存器都有一个“保留是/否”列。它对所有用于传递参数的寄存器都说“否”。

无论您是否传递参数，都不需要保留参数寄存器。您可能无法取回您的参数。

# php - htaccess 重写规则和目录索引

> ID：12224189
> 
> 赞同：1
> 
> 时间：2012-09-01T01:29:04.760
> 
> 标签：php, apache, .htaccess, mod-rewrite, url-rewriting

我的重写规则和目录索引有问题

```
DirectoryIndex invite.php about.php account.php

RewriteRule ^/?([a-z0-9_-]+)/?$ /user.php?u=$1 [L] 
```

可以说`about.php`是在about文件夹中。当我去 www.url.com/about/about.php 时，它工作正常。但是当我去时`www.url.com/about/`，它会进入我的`user.php`页面。当我去`www.url.com/about`，（没有结束斜线），它去`www.url/about/?u=about`

谁能帮我？

同时，我正在尝试设置用户可以去的地方，`www.url.com/andrewliu`而不是`www.url.com/user.php?u=andrewliu`

我想我需要以某种方式修复我的结尾斜杠和重定向？

谢谢！

编辑

我有这个

```
DirectoryIndex invite.php about.php account.php

RewriteEngine on 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteCond %{REQUEST_FILENAME}\.php -f 
RewriteRule ^(.*)$ $1.php
RewriteRule ^/?([a-z0-9_-]+)/?$ /user.php?u=$1 [L]
RewriteCond %{QUERY_STRING} !^b= [NC]
RewriteRule ^(business)/(.*)$ /$1/index.php?b=$2 [L,NC,QSA] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T01:37:27.137

您需要添加检查以查看请求是否针对存在的文件或目录。您需要在规则之前添加这些条件：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/?([a-z0-9_-]+)/?$ /user.php?u=$1 [L] 
```

这使得当您转到 时`/about/`，由于它是一个存在的目录，因此不会应用此规则。但是，如果您转到`/andrewliu`，只要那不是文件或目录就可以。

# objective-c - 线程正在杀死我的应用程序

> ID：12224193
> 
> 赞同：0
> 
> 时间：2012-09-01T01:29:57.480
> 
> 标签：objective-c, ios

寻找一些关于稳定我的应用程序的建议。首先是一些要求 - 带有 PII（个人识别信息）的文件在磁盘上时必须加密。缩略图和徽标位于自定义 TableViewCells（如果可用）中，必须在显示前解密。

有几层线程正在进行。有一个中央函数 getFileData 用于检查文件是否在设备上，或者是否需要从网络获取文件。我希望保持 UI 响应，并且（我认为）这就是我的问题。

**这是一些代码：** 这是在我的应用程序中处理文件的主要方法。它决定文件在哪里解密并将其交还给回调：

```
 -(void)fetchFileData:(UserSession *) session
              onComplete: (void(^)(NSData* data)) onComplete 
{
    NSURL *url = [File urlForMail:self.fileId andSession:session];
    //NSLog(@"File id: %@", self.fileId);
    NSString *encryptionKey = session.encryptionKey;
    dispatch_queue_t cryptoQ = dispatch_queue_create(FILE_CRYPTOGRAPHY_QUEUE, NULL);

    dispatch_async(cryptoQ, ^(void){
        // Get the file and d/encrypt it
        NSError *error = nil;
        if ([File fileExistsAtUrl:url] == YES) { 
            NSLog(@"file is on disk.");
            NSData *localEncryptedFile = [File getDataForFile:url];
            NSData *decryptedFile = [RNDecryptor decryptData:localEncryptedFile 
                                                withPassword:encryptionKey 
                                                       error:&error];
            onComplete(decryptedFile);
            dispatch_release(cryptoQ);
        } else { 
            //NSLog(@"File is not on disk");
            NSDictionary *remoteFile = [session.apiFetcher getFileContent:self.fileId 
                                                                 andToken:session.token];
            if (remoteFile && [[remoteFile objectForKey:@"success"] isEqualToString:@"true"]) {                
                NSData *remoteFileData = [remoteFile objectForKey:@"data"];
                NSString *mimeType = [remoteFile objectForKey:@"mimeType"];
                self.mimeType = mimeType;
                NSData *encryptedData = [RNEncryptor encryptData:remoteFileData 
                                                    withSettings:kRNCryptorAES256Settings 
                                                        password:encryptionKey 
                                                           error:&error];
                [encryptedData writeToURL:url atomically:YES];
                onComplete(remoteFileData);
                dispatch_release(cryptoQ);
            }
        }
    }); 
```

下面是一个 getFileData 调用者的例子：

```
 +(void)loadThumbnailForMail: (NSNumber*)thumbnailId 
                    session: (UserSession*)session 
                   callback: (void(^)(NSData* data))callback
{
    File *file = [File findFile:thumbnailId inContext:session.mailDatabase.managedObjectContext];    
    dispatch_queue_t fetchQ = dispatch_queue_create(FILE_FETCHER_QUEUE_LABEL, NULL);
    dispatch_async(fetchQ, ^(void) { 
        if (file) {
            [file fetchFileData:session onComplete:^(NSData *data) {
                if (data && file.mimeType) {
                    callback(data);
                }
            }];
        }        
    });    
    dispatch_release(fetchQ);    
} 
```

下面是调用 loadThumbnailForMail 的 TableViewCell 示例：

```
 -(void)loadAndShowThumbnailImage:(Mail*) mail
{
    UIImage *placeHolder = [UIImage imageNamed:@"thumbnail_placeholder.png"];
    [self.thumbnailImageForMail setImage:placeHolder];
    dispatch_queue_t loaderQ = dispatch_queue_create(THUMBNAIL_FETCHER, NULL);
    dispatch_async(loaderQ, ^ {
        [File loadThumbnailForMail: mail.thumbnailId 
                           session: [UserSession instance] 
                          callback: ^(NSData *data) {
                              dispatch_async(dispatch_get_main_queue(), ^{
                                  UIImage *thumbnailImage = [UIImage imageWithData:data];
                                  [self.thumbnailImageForMail setImage:thumbnailImage];
                              });
                      }];
    });
    dispatch_release(loaderQ);
} 
```

我认为我的问题是我的 loadThumbnailImage 中的回调。如果用户滚动得足够快，我怀疑可能有两个线程试图访问同一个 TableViewCell

```
(MyCell *cell = (MyCell*)[tableView dequeueReusableCellWithIdentifier:CellTableIdentifier];) 
```

它并不总是立即发生，但最终，在滚动单元格的 tableView 列表后，应用程序崩溃：*** 由于未捕获的异常 'NSGenericException' 导致应用程序崩溃，原因：'*** Collection <__NSCFSet: 0xde6a650> 在被更改时发生了突变枚举。

我需要在单元格中保存解密的图像，当图像可用但导致应用程序崩溃时，第一个解决方案（上面）为我执行此操作。我想知道如果我在解密图像时将图像放在内存中并在我启动所有线程以获取和解密它们之前检查 loadAndShowThumbnailImage 中的缓存，那么某种内存缓存是否有助于改善这一点。

想法？我已经为此努力了一周，现在尝试不同的事情，并希望能有一些新的视角。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:36:12.023

基于贾斯汀链接和随后的研究，我最终朝着这个方向前进：[在 UITableView 中，为已离开屏幕的单元格取消 GCD 操作的最佳方法？](https://stackoverflow.com/questions/10408611/in-a-uitableview-best-method-to-cancel-gcd-operations-for-cells-that-have-gone)

# iphone - 使用分段控制

> ID：12224198
> 
> 赞同：1
> 
> 时间：2012-09-01T01:30:41.660
> 
> 标签：iphone, objective-c, xcode, cocoa-touch

好的，我有一个选项卡式视图，所以有两个视图控制器。在一个视图控制器中，我有一个分段控件，并且要知道选择了哪个段，我有一个连接到它的操作。像这样：

```
-(IBAction)selectAngle:(id)sender{
    clickedSegment = [myAngleType selectedSegmentIndex];
} 
```

这`clickedSegment`是我在标题中作为属性公开的整数。现在我想`clickedSegment`在我的另一个视图控制器中使用 this 的值，但是每当我创建该 VC（分段控制器之一）的实例并尝试使用`clickedSegment`时，无论我选择其他段 1 还是段 2，我总是得到 0 作为值.它总是零。我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T01:47:28.317

您没有正确使用合成设置器，您应该像这样设置它：

```
-(IBAction)selectAngle:(id)sender{
    self.clickedSegment = [myAngleType selectedSegmentIndex];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T02:10:59.333

您的第二个视图控制器如何知道第一个视图控制器中的任何属性？这是不可能的，除非您明确获得对它的引用。

```
// in second view controller
FirstViewController *firstVC = 
   (FirstViewController*)[self.tabBarController.viewControllers objectAtIndex:0];

NSLog(@"clicked segment: %d", firstVC.clickedSegment); // assuming int 
```

# android - 用于 google.maps onclick 的 Android Intent

> ID：12224200
> 
> 赞同：0
> 
> 时间：2012-09-01T01:30:45.310
> 
> 标签：android

我正在从用户输入两个值，即经度和纬度，并且有一个显示位置按钮，单击时它使用这两个经度和纬度值显示位置。我只需要在 showlocation() 或按钮上使用意图

请检查我的代码

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"

    android:orientation="horizontal" >

 <EditText android:id="@+id/lat"
        android:layout_weight="50"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:hint="@string/lat" />

 <EditText
     android:id="@+id/longi"
     android:layout_width="0dp"
     android:layout_height="wrap_content"
     android:layout_weight="50"
     android:ems="10"
     android:hint="@string/longi" >

     <requestFocus />
 </EditText>

 <Button
     android:layout_width="1dp"
     android:layout_height="wrap_content"
     android:layout_weight="100"
     android:text="@string/button_send"
     android:onClick="showlocation()" />
</LinearLayout>

public void showlocation(){

        String uri = "http://maps.google.com/maps?saddr=" + "9982878"+","+"76285774"+"&daddr="+"9992084"+","+"76286455";
        Intent intent = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse(uri));
        intent.setClassName("com.google.android.apps.maps", "com.google.android.maps.MapsActivity");
        startActivity(intent); 
         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T01:55:03.070

不是很清楚你想要什么。

尝试将`onClick`按钮上的属性设置为`showLocation`而不是`showLocation()`

之后，您需要`public`在您的`Activity`

```
public void showLocation(View v) {
    // do what you want if the button is clicked by user

} 
```

或者您可以`onClick`在您的 上删除该属性，向该按钮`button`添加`id`属性以便您可以在您的 上找到它`Activity`，然后让您的`Activity implements onClickListener`

```
Button yourbutton = (Button) findViewById(R.id.ID_YOU_DEFINE);
yourbutton.setOnClickListener(this);

// You have to override this method since your activity implements it.
@Override
public void onClick(View v) {
    switch (v.getId()) {
    case R.id.ID_YOU_DEFINE :
        // do what you want if button with id ID_YOU_DEFINE is clicked

    case R.id.OTHER_ID :
        // do what you want

    }

} 
```

# web-hosting - 如何限制从特定地理区域访问网站

> ID：12224203
> 
> 赞同：0
> 
> 时间：2012-09-01T01:31:05.117
> 
> 标签：web-hosting

我想限制来自特定地理区域的所有用户访问我的网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T02:15:27.700

您可以使用 PHP 来执行此操作：

```
 <?php 
$ip = $_SERVER['REMOTE_ADDR'];
$file = file_get_contents("http://api.hostip.info/?ip={$ip}");
 if(stristr($file, 'bad country') === FALSE) {
    echo 'ya\'ll may visit this here site.';
  }

else {
echo "nope!";
}
?> 
```

# cocoa - 为什么 kCIAttribute(Max|Min) 和 kCIAttributeSlider(Max|Min) 有时值不同

> ID：12224204
> 
> 赞同：1
> 
> 时间：2012-09-01T01:31:07.137
> 
> 标签：cocoa, core-image, cifilter

在 CoreImage 中，CIFilter 具有一组 Max/Min 值和一组 SliderMax/Min 值。

Max/Min 的文档说“过滤器参数的最大/最小值”，SliderMax/Min 说“最大/最小值，指定为浮点值，用于控制输入值的滑块过滤器参数。”

我想知道为什么这些可能是不同的值，例如，对于 CIHueAdjust 的 inputAngle 参数，max/min 为 0/0 但sliderMax/Min 为 3.14/-3.14？

还有，像大多数过滤器一样，将最大值/最小值设置为 0/0 有什么用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T01:43:46.577

我敢打赌，值`0`表示没有最大值/最小值，数据类型可表示的任何值都对过滤器有效。

至于为什么会有一个单独的滑块值，那是因为您呈现给用户的内容通常与接受的内容不同。例如，CIHueAdjust 可以接受任何值进行实际调整，但呈现给用户的滑块没有理由超出 -3.14..3.14 的范围（因为超出此范围的任何值都等效于该范围内的值） .

# c# - 如何使用代码优先实体框架设置默认日期

> ID：12224205
> 
> 赞同：1
> 
> 时间：2012-09-01T01:31:09.157
> 
> 标签：c#, entity-framework, ef-code-first

我正在尝试使用带有代码优先方法的实体框架为最后一个日期 (DateAdded) 属性设置默认值。这是我的代码：

```
namespace BackOffice.Models
{
    public class UsersContext : DbContext
    {
        public UsersContext()
            //: base("DefaultConnection")
            : base("ProofPixDB")
        {
        }

        public DbSet<UserProfile> UserProfiles { get; set; }
    }

    [Table("UserProfile")]
    public class UserProfile
    {
        [Key]
        [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
        public int UserId { get; set; }
        public string UserName { get; set; }

        //public DateTime DOB { get; set; }
        [DataType(DataType.Date)]
        public DateTime? DOB { get; set; } //This allows null

        [Required]
        [DataType(DataType.Date)]
        public DateTime DateAdded { get; set; }

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T09:46:06.287

您可以在构造函数中设置它：

```
public class UserProfile()
{
   DateAdded = DateTime.Now;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T09:58:43.310

我曾经在以下链接中处理过这个问题：

[设置默认值](http://madbuildertools.blogspot.fr/2011/08/managing-default-values-for-entities-in.html)

基本上使用带有反射的“工厂”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T00:01:21.183

我最终在回发时设置了这个，如下所示：

```
// POST: /Account/Register

    [HttpPost]
    [AllowAnonymous]
    [ValidateAntiForgeryToken]
    public ActionResult Register(RegisterModel model)
    {
        if (ModelState.IsValid)
        {
            // Attempt to register the user
            try
            {
                DateTime rightNow = DateTime.Now;

                //WebSecurity.CreateUserAndAccount(model.UserName, model.Password); //too limited used CreateUserAndAccount method below
                var extendedUserProperties = new { SubscriberId = subscriber.SubscriberId, Email = model.Email, DateAdded = rightNow };
                WebSecurity.CreateUserAndAccount(model.UserName, model.Password, extendedUserProperties);
                Roles.AddUserToRole(model.UserName, Request.Form["RoleName"]);
                WebSecurity.Login(model.UserName, model.Password);

                return RedirectToAction("Index", "Home");
            }
            catch (MembershipCreateUserException e)
            {
                ModelState.AddModelError("", ErrorCodeToString(e.StatusCode));
            }
        }

        // If we got this far, something failed, redisplay form
        return View(model);
    } 
```

# php - PHP Seclib 关闭连接 SSH

> ID：12224208
> 
> 赞同：1
> 
> 时间：2012-09-01T01:32:10.200
> 
> 标签：php, ssh, phpseclib

我正在使用 phpseclib 连接到我的服务器并运行 python 脚本。这是 phpseclib [http://phpseclib.sourceforge.net/](http://phpseclib.sourceforge.net/)问题是，python 脚本是这样制作的，一旦你运行它就不能结束它。结束它的唯一方法是结束 ssh 会话。请不要问为什么会这样，说来话长……但是 ctrl+c 并没有结束它，除了结束会话之外什么都没有。我知道 phpseclib 应该在命令执行完成后自动关闭连接，但从技术上讲，我的命令在我结束会话之前永远不会执行，所以我需要 phpseclib 中的一个函数来结束 ssh 会话。我尝试在我的 php 脚本中使用 exit() 和 die()，脚本只是挂起（php 脚本），因为它认为它仍在执行命令，所以它不会超过那行代码。终止 php 代码（通过浏览器或命令行）也不会停止 python 脚本。如果有人可以提供帮助，那就太好了。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T21:06:25.747

试试 $ssh->setTimeout(5) 什么的。例如。

[http://phpseclib.sourceforge.net/ssh/examples.html#timeout](http://phpseclib.sourceforge.net/ssh/examples.html#timeout)

# json - Backbone.js + REST

> ID：12224211
> 
> 赞同：2
> 
> 时间：2012-09-01T01:32:49.960
> 
> 标签：json, rest, backbone.js

我对 Backbone.js 非常陌生，并且一直在遵循一些教程来编写下面的脚本。我想要实现的是在使用我的路由时从休息 api 中检索 JSON 数据。如果您查看朋友路线的人员功能，您可以看到我的目标。我哪里错了？

```
<!DOCTYPE html>
<html>
<head>
    <title>I have a back bone</title>
</head>
<body>
    <button id="add-friend">Add Friend</button>
    <ul id="friends-list">
    </ul>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.3/underscore-min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min.js"></script>
<script>
Friend = Backbone.Model.extend({
    name: null,
    age: null,
});
FriendDetailModel = Backbone.Model.extend();
FriendDetailCollection = Backbone.Collection.extend({
    url: 'slim/index.php/friends/',
    model: FriendDetailModel

});

Friends = Backbone.Collection.extend({
    initialize: function(models, options) {
        this.bind("add",options.view.addFriendLi);
    }
});
AppView = Backbone.View.extend({
    el: $("body"),
    initialize: function() {
        this.friends= new Friends(null, {view:this});
    },
    events: {
        "click #add-friend":  "showPrompt",
    },
    showPrompt: function () {
        var friend_name = prompt("Who is your friend?");
        var friend_age = prompt("What is your friends age?");
        var friend_model = new Friend({name: friend_name, age: friend_age});

        this.friends.add(friend_model);
    },
    addFriendLi: function(model) {
        $("#friends-list").append("<li>" + model.get('name') + " " + model.get('age') + "</li>");
    }
});
var appview = new AppView;

AppRouter = Backbone.Router.extend({
    routes: {
        "friends":"people",
        "person/:name":"personDetail"
    },

    people: function() {
        console.log('all the people');
        var people = new FriendDetailCollection;
            people.fetch({
                    success: function(data) {
                            console.log(data);
                    }

    },

    personDetail: function(name) {
        console.log('one person named ' + name);
    }
});

var approuter = new AppRouter;
Backbone.history.start();
</script>
</body>
</html> 
```

运行 people.fetch Console.log 后显示

```
d
_byCid: Object
_byId: Object
length: 4
models: Array[4]
__proto__: x 
```

如果我做 console.log(data.toJSON()); 它返回

```
[] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T15:58:04.930

我最终通过执行以下操作解决了问题：

我在路由器之外创建了一个新集合：

```
var people = new FriendDetailCollection; 
```

当我创建视图时，我指定了我之前创建的集合。

```
friendview = new FriendView({collection: people}); 
```

我的 FriendView 中有错字。以前我有 _.bind(this, 'render')。它需要是

```
_.bindAll(this,'render'); 
```

此外，我将 console.log 放在 FriendView 中的 render() 函数中。

```
FriendView = Backbone.View.extend({
        el: $("body"),
        initialize: function() {
                _.bindAll(this,'render');
                this.collection.bind('reset', this.render);
        },
        render: function() {
                console.log(this.collection.toJSON());
        }

}); 
```

# python - 如何在运行时将变量传递给 SQLAlchemy ORM 定义？

> ID：12224215
> 
> 赞同：1
> 
> 时间：2012-09-01T01:34:58.203
> 
> 标签：python, sqlalchemy, pyramid, paster

我已经定义了一个名为 File 的新 Column 类型，它应该让我只将文件名存储在数据库中。然后我会将实际文件存储在根+子文件夹+名称的文件系统中。

```
File(root, subfolder="", max_length=100,  **kwargs) 
```

我遇到的问题是我想在 PasteDeploy 配置文件中定义根。如何在运行时定义它以便我可以访问配置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T03:05:49.807

为什么不避免自定义列类型的复杂性，只将文件路径存储为列，并提供一些可以为您加载文件数据的属性或混合属性？

```
class Data(Base):
    path = Column(String)

def myview(request):
    data = Data(path='foo')

    root_path = request.registry.settings['data_root']
    with open(os.path.join(root_path, data.path), 'rb') as fp:
        file_data = fp.read()
    # ... 
```

显然，如果您愿意，您可以将其中的一些功能包装到 Data 的方法中。

无论如何，访问 INI 设置的方法是以下之一：

1.  在从设置/配置对象启动应用程序期间。
2.  在请求期间，您可以将设置传入 from `request.registry.settings`。
3.  在请求期间，您可以通过并从那里访问活动请求`pyramid.threadlocal.get_current_request()`，您可以获取设置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T03:22:23.457

对我来说，这听起来像你的架构需要更多的思考。即使您实现了自定义列类型，该类型仍然必须映射到您的引擎支持的 SQL 列类型。对于文件夹和文件名，这是最自然的两`varchar`列。那么为什么不在你的类中使用两个字段，and`path`呢？`filename``String(256)`

至于可配置的根，这听起来像是您想指定与`path`此根的相对关系，以便您只能在一个地方更改它。在数据库中拥有大部分配置，除了存储在配置文件中的一件事，对我来说是一种代码味道。我认为最好让根成为其他配置表中的列，并使用 a`ForeignKey`以这种方式引用根。

# core-plot - 如何确定CP的版本？

> ID：12224217
> 
> 赞同：1
> 
> 时间：2012-09-01T01:36:18.123
> 
> 标签：core-plot

简单的问题：有没有一种简单的方法可以检查应用程序中运行的当前 Core-Plot 版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T17:08:17.833

一旦它被编译到应用程序中，就不会。

# android - 使用 phonegap 从相机或图库中选择图像

> ID：12224227
> 
> 赞同：5
> 
> 时间：2012-09-01T01:37:48.217
> 
> 标签：android, cordova, jquery-mobile

```
<script type="text/javascript" charset="utf-8">

var pictureSource;   // Picture source

var destinationType; // Sets the format of returned value 

// Wait for PhoneGap to connect with the device

document.addEventListener("deviceready", onDeviceReady, false);

// PhoneGap is ready to be used!

function onDeviceReady() 

{

   pictureSource = navigator.camera.PictureSourceType;

    destinationType = navigator.camera.DestinationType;

}

function capturePhoto() {

    navigator.camera.getPicture(onPhotoURISuccess, onFail, { quality: 25, destinationType: 
Camera.DestinationType.FILE_URI });

}

function onPhotoURISuccess(imageURI) {

    createFileEntry(imageURI);
}

function createFileEntry(imageURI) {

    window.resolveLocalFileSystemURI(imageURI, copyPhoto, fail);    
}

function copyPhoto(fileEntry) {

    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function(fileSys) { 
        fileSys.root.getDirectory("photos", {create: true, exclusive: false}, 

function(dir) { 

  fileEntry.copyTo(dir, "file.jpg", onCopySuccess, fail); 

            }, fail); 
    }, fail); 
}

function onCopySuccess(entry) {

    console.log(entry.fullPath)
}

function fail(error) {

    console.log(error.code);
}

    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T10:43:11.557

您应该使用[PhoneGap 2.0.0 相机对象](http://docs.phonegap.com/en/2.0.0/cordova_camera_camera.md.html#Camera)。该文档提供了完整的照片捕获示例。

此外，`navigator.camera.getPicture( cameraSuccess, cameraError, [ cameraOptions ] );`使用相机拍摄照片或从设备的相册中检索照片。图像以 base64 编码字符串或图像文件的 URI 形式返回。

我希望这有帮助。

# ajax - Rails3 Twitter Bootstrap：异步加载 div

> ID：12224228
> 
> 赞同：0
> 
> 时间：2012-09-01T01:37:58.310
> 
> 标签：ajax, ruby-on-rails-3, twitter-bootstrap

我有一组沿左侧垂直堆叠的导航药丸。每次单击药丸时，我都希望 div “report-html-content” 加载由控制器操作生成的 html 内容，这些内容对应于：`program_reports_path(@program)`。

看起来很简单（当然，当然。）这是视图：

```
<div class="container">
  <div class="row">
    <div class="span2">
      <ul class="nav nav-pills nav-stacked">
        <li>
          <a href="#" data-toggle="pill">Trend lines for all questions</a>
        </li>
        <li>
           <%= link_to "Summary of all questions", program_reports_path(@program), 
                :remote => true, id: "reports-navlist", data: {toggle: "tab"} %>
        </li> 
        <li class="active">
          <a href="#" data-toggle="pill">Trend lines for all questions</a>
        </li>
        <li>
          <a href="#" data-toggle="pill">Details on all questions</a>
        </li>
      </ul>
    </div>
    <div class="span10" id="report-html-content">
    </div>
  </div>
</div> 
```

这是控制器动作：

```
 def report1
    @program = Program.find(params[:program_id])
    render :partial => "report1", layout: false
  end 
```

它几乎可以工作。除了由于某种原因要求 nav-pill set 对不同的 URL 执行 remote: true 之外，选项卡的激活和停用不再起作用。

我有两个问题：

1）你能看到我的错误吗？

2) 对我来说，使用 Rails 3 和 Twitter Bootstrap 实现这一目标的最佳实践方式是什么，并指出我绝对希望使用 ajax 获取单击选项卡的内容，因为这些报告的计算成本可能很高。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T21:45:51.020

像这样覆盖显示事件：

```
<div class="container">
  <div class="row">
    <div class="span2">
      <ul id="tabs" class="nav nav-pills nav-stacked">
        <li>
          <a href="#" data-toggle="pill">Trend lines for all questions</a>
        </li>
        <li>
          <a href="#" data-toggle="pill" id="reports-navlist">Summary of all questions</a>
        </li>
        <li class="active">
          <a href="#" data-toggle="pill">Trend lines for all questions</a>
        </li>
        <li>
          <a href="#" data-toggle="pill">Details on all questions</a>
        </li>
      </ul>
    </div>
    <div class="span10" id="report-html-content">
    </div>
  </div>
</div>

<script>
  $(function() {
    $('#tabs').bind('show', function(e) {
      if ($(e.target).attr('id') == 'reports-navlist')
        $.ajax({
          url: '<%= program_reports_path(@program) -%>',
          data: { toggle: "tab" }
        })
    });
  });
</script> 
```

[您可以在http://twitter.github.com/bootstrap/javascript.html#tabs](http://twitter.github.com/bootstrap/javascript.html#tabs)阅读有关选项卡事件的更多信息

# java - 如何在 JTextField 中使用 2 个 JComboBox 中的值？

> ID：12224229
> 
> 赞同：2
> 
> 时间：2012-09-01T01:37:59.590
> 
> 标签：java, swing, nullpointerexception, jcombobox

我试图做的是创建 2 个 JComboBox 和 2 个 JTextField 框。我需要能够编写在第一个 JComboBox 中使用温度类型（华氏、摄氏和开尔文）的代码，并将第一个温度类型转换为在第二个 JComboBox 中选择的任何温度类型。这必须通过使用在第一个 JTextField 框中输入的任何数字（这将是所选温度类型的初始值）并在第二个 JTextField 框中转换为新的温度类型来完成。这是我进步的程度...

当我运行我的测试时，我在第 40 行得到一个`NullPointerException`，我不知道我是否正确格式化了 if 语句中使用的双精度，以使新值在第二个 JTextField 框中再次显示为字符串。在我编写所有其他 if 语句来处理所有其他场景之前，我正在寻找一些关于我到目前为止所做的事情是否正确的指针。

```
package temperatureConverter;

import java.awt.FlowLayout;
import java.awt.event.ItemListener;
import java.awt.event.ItemEvent;
import javax.swing.JFrame;
import javax.swing.JComboBox;
import javax.swing.JTextField;

public class TempConverter extends JFrame
{
    private JComboBox firstComboBox;
    private JComboBox secondComboBox;
    private JTextField initialTemp;
    private JTextField convertedTemp;
    //private enum TempType { FAHRENHEIT, CELSIUS, KELVIN};
    private static final String[] tempType = { "Fahrenheit", "Celsius", "Kelvin" }; 

    public TempConverter()
    {
        super("Temperature Converter");
        setLayout(new FlowLayout());

        firstComboBox = new JComboBox(tempType);
        firstComboBox.setMaximumRowCount(3);
        firstComboBox.addItemListener(null);
        add(firstComboBox);
        secondComboBox = new JComboBox(tempType);
        secondComboBox.setMaximumRowCount(3);
        secondComboBox.addItemListener(null);
        add(secondComboBox);
        initialTemp = new JTextField ("", 10);
        initialTemp.addActionListener(null);
        add(initialTemp);
        convertedTemp = new JTextField ("", 10);
        convertedTemp.addActionListener(null);
        add(convertedTemp);
    }
    String theInitialTempType = (String) firstComboBox.getSelectedItem();
    String theTempTypeToConvertTo = (String) secondComboBox.getSelectedItem();
    String theChosenTemp = initialTemp.getSelectedText();
    String theNewTemp = convertedTemp.getSelectedText();

    private class textHandler implements ItemListener
    {
        public void itemStateChanged (ItemEvent event)
        {
            double convertedNumberForTheChosenTemp = Double.parseDouble(theChosenTemp);
            double convertedNumberForTheNewTemp = Double.parseDouble(theNewTemp);
            //String string1 = "";
            //String string2 = "";

            if ( theInitialTempType == tempType[0] && theTempTypeToConvertTo == tempType[1] )
            {
                 convertedNumberForTheNewTemp = (convertedNumberForTheChosenTemp   -  32)  *  5 / 9; 
                 String result = String.valueOf(convertedNumberForTheNewTemp);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T02:05:46.330

由于您有 的两个实例`JComboBox`，因此此[示例](https://stackoverflow.com/a/3191882/230513)显示了第一个组合中的选择如何更改第二个组合中显示的内容。例如，`Fahrenheit`在第一个组合中选择会将第二个组合的模型更改为仅显示`Celsius`或`Kelvin`。等等。

附录：正如@Andrew 建议的那样，您必须将所有四个[实例变量](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)的初始化移动到构造函数中。这是`main()`我用来测试您的代码的：

```
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {

        @Override
        public void run() {
            TempConverter f = new TempConverter();
            f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            f.pack();
            f.setVisible(true);
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T01:43:47.353

```
String theInitialTempType = (String) firstComboBox.getSelectedItem(); 
```

此代码行位于创建字段的构造函数之外。属性在类的其他方法中使用，因此声明`String theAttribute`需要在构造函数之外。

另一方面，实例的创建/初始化需要在其他字段创建之后进行，所以在构造函数的最后，`theAttribute = anotherAttribute.getSelectedText();`

但即使这样也不正确。在那个阶段，这些字段是空的，因此尝试从它们计算结果是没有意义的。计算应由最终用户控制，并按操作完成。调查`ActionListener`- 它可以添加到字段中并会触发`Enter`

# android - 为什么 glClear 在 OpenGLES 中阻塞？

> ID：12224230
> 
> 赞同：9
> 
> 时间：2012-09-01T01:38:14.707
> 
> 标签：android, opengl-es, opengl-es-2.0, glsurfaceview

我正在尝试分析我的渲染器，但我看到了一些我无法解释的奇怪的分析行为。

我正在使用 glSurfaceView，我已将其设置为连续渲染。

这就是我`onDrawFrame()`的结构

```
public void onDrawFrame(GL10 unused) {
    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT | GLES20.GL_DEPTH_BUFFER_BIT);
    executeAllDrawCommands();
} 
```

这在轻负载下表现得很慢，所以我创建了一个计时器类并开始对其进行分析。我对我所看到的感到非常惊讶。

我对我的 onDrawFrame 方法进行了一些探测，如下所示：

```
public void onDrawFrame(GL10 unused) {
   swapTimer.end();

   clearTimer.start();
     GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT | GLES20.GL_DEPTH_BUFFER_BIT);
   clearTimer.end();

   drawTimer.start();
     executeAllDrawCommands();
   drawTimer.end();

   swapTimer.start();
} 
```

`clearTimer`测量调用 glClear 所需`drawTimer`的时间，测量运行我的所有绘图调用`swapTimer`所需的时间，并测量从 onDrawFrame 退出到它返回的时间（调用 eglSwapBuffers 所用的时间）。

当我运行一个负载非常轻的场景时，我得到了一些我无法解释的非常奇怪的数字：

```
swapTimer  : 20ms (average)
clearTimer : 11ms (average)
drawTimer  :  2ms (average) 
```

我预计交换时间会有点长，因为我相信设备在 ~30fps 时强制启用 vsync，但我不知道为什么实际的“清除”调用会阻塞 11 毫秒？我以为它只是应该发出一个异步命令并返回？

当我画一个更繁忙的场景时，数字变化很大：

```
swapTimer  :  2ms (average)
clearTimer :  0ms (average)
drawTimer  : 44ms (average) 
```

在这个场景中，我的绘图调用花费了太多时间，以至于它看起来隐藏了很多垂直同步周期，并且清除调用上的阻塞完全消失了。

有什么解释为什么 glClear 在我的轻载场景中阻塞？

链接到我的“计时器”类源代码，以防有人怀疑我的测量技术： http: [//pastebin.com/bhXt368W](http://pastebin.com/bhXt368W)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-02T12:51:06.877

> 我放了一个glFinish（和finishTimer.start（）/ end（）围绕它），它总是远离glClear。相反，现在 glFinish 需要一些毫秒数，并且 glClear 变得即时。

这就解释了。

当您的场景非常轻且绘图渲染速度非常快时，清除和用新颜色填充像素的时间将需要一些时间（这总是需要时间，否则渲染器落后并且正在绘制新的东西）。较新的 Android 设备具有填充率限制。例如，Nexus One 有一个 30 Hz 的填充率锁定 - 无论您的实际绘图速度有多快，屏幕都会以该频率同步。如果绘图在 30 Hz 以下完成，渲染器将与屏幕同步。这就是您注意到此延迟的原因，即使您移除`glClear()`呼叫，您也应该注意到这一点。渲染器比屏幕更新更快。

当渲染器有许多对象要绘制时，同步将停止（给定您繁忙的场景的配置文件数据），因为渲染器现在在屏幕更新之后。

当您使用`glFinish()`时，它会删除`glClear()`函数否则会导致的时间，通过遵循填充率逻辑，这意味着`glFinish()`现在是确保与屏幕同步的函数。

**计算**：

F = 1/T

**简单的场景**：

F = 1/T = 1/((20+11+2)*10^-3) =~ 30 Hz

同步的延迟时间出现在您的分析器中。渲染器正在与屏幕同步。这意味着如果您删除`glClear()`或`glFinish()`呼叫，*延迟*将出现在其他地方。

**重场景**：

F = 1/T = 1/((2+0+44)*10^-3)) =~ 22 Hz

同步的延迟时间不会出现在您的分析器中。渲染器是在屏幕的更新频率之后。

> 似乎这都与vsync有关

这似乎是正确的。

# documentation - COBOL 88 级数据类型

> ID：12224233
> 
> 赞同：2
> 
> 时间：2012-09-01T01:39:02.803
> 
> 标签：documentation, cobol, glossary

这里非常基本的问题。

我必须为 COBOL 程序编写数据词汇表。该数据词汇表包含有关每个变量的以下详细信息：

1.  姓名
2.  数据类型
3.  值范围（如果适用）
4.  行号
5.  全名

我有几个变量，包括 88 级开关。我的问题是：这些 88 级开关是否算作变量，我应该将它们包含在数据词汇表中吗？或者，从我必须使用的数据词汇表结构来看，在这种情况下是否应该忽略它们？

当我在这里时，另一个简单的问题。填充词是否应该包含在数据词汇表中？这个程序特别包含很多填充变量，大多数是简单的“PIC X”变量。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T07:24:01.123

假设我理解被问到的问题。

如果您可以举一个带有 COBOL 布局和数据词汇表条目的示例，一个有 88 条目，一个没有 88 条目，将会有所帮助。不过，我会尽力回答这个问题。

不，88 级条目不是变量，它们不会增加或减少记录的长度。它们只是允许您创建条件语句。

话虽如此，您的数据词汇表是否应该只包含有助于记录长度的变量？

如果是，那么每个 88 项不应有单独的数据词汇表条目。但是，它可能有助于解释给定变量的值 [s]（3 甚至 5 甚至是预期值的额外行）。

```
01 record-store.
 02 location pic 9(4).
   88 dist-center value 100, 101, 102.
 02 value    pic 9(6).
 02 paid     pic X(1).
   88 yes value 'Y', 'y'.
   88  no value 'N', 'n'. 
```

您的数据词汇表将/可能是：

# **地点**

*   名称：地点
*   数据类型：整数
*   取值范围：0-9999
*   行号：20
*   全名：数据的位置
*   预期值：
    *   100、101、102 用于配送中心
    *   1-99为客户
    *   103-9999 无效

现在知道了您的预期值，您可能会返回并更改您的 88 值？

```
...
 02 location pic 9(4).
   88 dist-center value 100, 101, 102.
   88 customers   value 1 thru 99.
   88 invalid     value 0, 103 thru 9999.
... 
```

**如果没有，那么：**

您可以在 88 级条目之前有一个单独的数据词汇表条目。

您的数据词汇表将/可能是：

# **地点**

*   名称：地点
*   数据类型：整数
*   取值范围：0000-9999
*   行号：20
*   全名：数据的位置

## ***中心***

*   名称：中心
*   数据类型：布尔值
*   取值范围：100、101、102
*   行号：5
*   Fuller Name:**地点**是配送中心吗

## ***顾客***

*   姓名：客户
*   数据类型：布尔值
*   取值范围：1-99
*   行号：5
*   全名：**位置**是客户吗

## ***无效的***

*   名称：无效
*   数据类型：布尔值
*   取值范围：0001、0010、0100
*   行号：5
*   全名：**位置**是否是无效值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T23:42:30.500

'PIC X' FILLER 变量可能是 88 级工作存储中的标志，因此非常重要。

例如，我们经常使用这种类型的构造：

```
01 FILLER                     PIC X.
    88 OPTION-IS-ON        VALUE 'Y', FALSE 'N'.
    88 OPTION-IS-OFF       VALUE 'N'. 
```

这定义了一个我们只使用它的条件引用的标志。例如，我们可能会这样使用它：

```
SET OPTION-IS-ON TO TRUE.     | This puts a 'Y' in the PIC X
   .
   .
   .
IF OPTION-IS-ON
   do something
END-IF 
```

在这种情况下，我们永远不需要引用实际的标志值本身，因此您不需要给它命名。

88 级中的 'FALSE' 只允许您指定使用语句时存储的内容：

```
SET OPTION-IS-ON TO FALSE     | This puts an 'N' in the PIC X 
```

这当然与说：

```
SET OPTION-IS-OFF TO TRUE     | This also puts an 'N' in the PIC X 
```

这一切都取决于当时什么更具可读性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T12:16:40.437

像往常一样，这取决于。:-)

88 级值似乎属于第 3 部分“值范围”，特别是如果它们记录了某些变量允许的唯一值。

如果文档用于重建记录，则 FILLER 字段当然很重要。如果您只是想记录其他字段的用法，它们并不是很有趣。

# php - 设置用户 last_visit 的正确方法

> ID：12224234
> 
> 赞同：0
> 
> 时间：2012-09-01T01:39:57.153
> 
> 标签：php, zend-framework

实现更新用户上次访问数据库的正确方法是什么？

我在 users 表中有列 last_visit 并将此代码添加到 bootstrap.php 文件

```
protected function _initUser() {
        $this->bootstrap(array('db'));

        $auth = Zend_Auth::getInstance();
        $identity = $auth->getIdentity();
        if($identity) {
            $userModel = new Model_User();
            $user_id = $identity->id;
            $userModel->updateLastVisit($user_id, date("Y-m-d H:i:s"));
        }
    } 
```

这样好吗？或者我应该用这种不同的方式吗？

**编辑**

我最终这样做了，因此每 5 分钟才查询一次数据库。我可以保持现在的状态还是需要进行更多更改才能使其更好地工作（从性能的角度来看）

```
protected function _initUser() {

    $auth = Zend_Auth::getInstance();
    if($auth->hasIdentity()) {
        $currentUser = $auth->getIdentity();
        if((time() - strtotime($currentUser->last_visit)) > 60*5) {
            $last_visit = date("Y-m-d H:i:s");
            $currentUser->last_visit = $last_visit;
            $this->bootstrap(array('db'));
            $user = new Model_User();
            $user->updateLastVisit($currentUser->id, $last_visit);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T02:54:47.710

[**您应该在分派请求时使用插件挂钩**](http://framework.zend.com/manual/en/zend.controller.plugins.html)执行这种操作，就像检查用户是否登录时一样。虽然它通过引导类工作，但从架构的角度来看，这与应用程序的横切关注点（请参阅面向[方面](http://en.wikipedia.org/wiki/Cross-cutting_concern)[的编程](http://en.wikipedia.org/wiki/Aspect-oriented_programming)）。

您甚至可以在您的**访问检查插件中**执行此操作，类似于@FAngel 建议的内容：在登录后或获取 cookie 后存储新日期， **避免每次用户重新加载页面时都请求数据库**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:19:23.153

**上次登录：**更新 LoginController 中的日期时间。示例：[https](https://gist.github.com/2842698) ://gist.github.com/2842698（第 100 行），或者正如 Keyne 已经说过的，将它放在一个特殊的插件中。

**上次访问：**我们将这些数据临时存储在 key-value storage(memached) 中，每 5 分钟使用一次 cronjob 保存数据。所以你的数据库没有任何性能问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T01:53:53.523

如果您的速度没有问题，那没关系。现在每个请求都有一堆操作（即使它看起来很简单——Zend 会在这两行后面做很多工作）。如果你争取几十毫秒 - 这些线是第一批改进的候选者之一。我认为您不需要具有最新的可能值。因此，在登录后或用户因启用“记住我”而自动登录时更新 last_visit 就足够了。

# httpresponse - Load Runner - 捕获初始页面加载时间 - 忽略回调请求

> ID：12224239
> 
> 赞同：0
> 
> 时间：2012-09-01T01:40:28.090
> 
> 标签：httpresponse, loadrunner, page-load-time, response-time

我们需要在回调请求在页面上加载数据时捕获初始页面加载/绘制时间。我们正在使用 Load Runner 性能测试。事务的平均响应时间为 9-10 秒。但是，我们更感兴趣的是页面绘制与加载每个 Web 部件中的数据的速度（忽略 JavaScript 回调请求）。是否有任何设置/方法可以在 Load Runner 中捕获此类数据？

如果 Load Runner 无法按照上面的需要捕获/区分数据，是否有任何其他工具可以在我们进行负载测试时手动执行来与浏览器一起使用？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T05:17:47.957

> ...how quickly the page paints...

This is a GUI level event, so you will need a virtual user type which samples at the GUI to answer this issue. If you combine a GUI Virtual User (QTP-based) with a protocol level virtual user (HTTP) for a common named event (Login vs Login_GUI) then you will be able to measure the time inside of the browser.

GUI Virtual Uses have been part of the definition for LoadRunner since version 1.0\. They began as XRunner defined, moved to WinRunner defined and now are defined by QuickTest Professional.

# command-line-interface - 如何从 adb 命令行运行（不安装）apk 文件

> ID：12224240
> 
> 赞同：1
> 
> 时间：2012-09-01T01:40:30.677
> 
> 标签：command-line-interface, apk

我已经使用“adb install”命令安装了一个应用程序，并且可以在 android 设备中找到相应的 .apk 和 .so 文件。我可以看到应用程序在 GUI 上正确安装，我可以通过单击图标从 GUI 运行它。当我终止 adb 内的进程时，应用程序已成功关闭。

我的问题是是否可以通过命令行执行应用程序？我已经尝试过“./”，但它给了我错误。此外，这个问题并不特定于特定的应用程序，但总的来说，我想知道我们是否可以通过 CLI 运行任何 apk 文件。

我在许多论坛上进行了搜索，但他们都给出了“安装”应用程序的程序，而不是如何“运行”它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-16T12:40:16.223

**adb -d shell “我开始 -a** android.intent.action.MAIN -n com.example.kuyniamaxu/.KuyActivity”

# javascript - 为什么我在使用 Flexslider 时会收到“未捕获的类型错误”？

> ID：12224249
> 
> 赞同：0
> 
> 时间：2012-09-01T01:43:04.653
> 
> 标签：javascript, jquery, wordpress, flexslider

我不断收到此消息：

> 未捕获的类型错误：对象 [object Object] 没有方法“flexslider”

我以前也遇到过同样的问题。然后问题是页面正在加载两个 jQuery 库。但我不认为这次是这样。

你有什么主意吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T08:47:00.707

冲突可能是个问题。您可能应该使用 noConflict()

```
http://api.jquery.com/noconflict/ 
```

使用诸如 Firebug 之类的东西检查负载 - 只是为了确保。该错误表明未加载某些内容。

```
<script src=".../jquery.flexslider-min.js"> </script>
<script type="text/javascript">
jQuery = jQuery.noConflict();
jQuery(window).load(function() {
jQuery('.featured-slider').flexslider();
});
/script> 
```

# objective-c - 使用 iPhone 联系人通过短信邀请朋友

> ID：12224250
> 
> 赞同：2
> 
> 时间：2012-09-01T01:43:19.663
> 
> 标签：objective-c, ios

是否有一个脚本或一种简单的方法来提供一个功能，让某人可以从他们的列表中选择联系人并通过短信邀请他们加入应用程序？我见过许多具有此功能的应用程序，例如 viber 和其他一些应用程序。

# ajax - Django 使用 request.method == 'POST' 进行无休止的分页？

> ID：12224251
> 
> 赞同：2
> 
> 时间：2012-09-01T01:43:25.467
> 
> 标签：ajax, post, django-endless-pagination

我正在尝试让[Django Endless 分页](http://code.google.com/p/django-endless-pagination/)在搜索表单上工作。我在网上看到的所有示例和教程都展示了如何使用简单的查询集来完成`.all()`，但我需要通过 POST 中的搜索结果进行过滤。

这是我现在的视图：

```
@page_template("core/search_box.html")
def search(request,template = "core/search.html",page_template = "core/search_box.html",extra_context = None):
if request.is_ajax():
    #template=page_template()
    #users = Skill_User.objects.filter(skill__name__icontains=content).order_by('-level')
    #return render_to_response( template , {'page_template': page_template,'menu_home_active':True, 'form':search_form, 'result':users} , context_instance )
    return HttpResponse("AJAX")
elif request.method == 'POST':
    search_form = SearchForm( request.POST )
    # If Form is Valid
    if search_form.is_valid():
        type  = search_form.cleaned_data['type']
        content  = search_form.cleaned_data['content']
        print 'CONTENT ' + str(content)
        if (type == 'O'):
            users = Skill_User.objects.filter(skill__name__icontains=content).order_by('-level')
        elif (type == 'G'):
            users= {}
    return render_to_response( template , {'page_template': page_template,'menu_home_active':True, 'form':search_form, 'result':users} , context_instance=RequestContext(request) )
else:
    return HttpResponse("NOT OK") 
```

所以搜索是在 POST 上完成的。但是我怎样才能将这个搜索 POST 东西传递给由无限分页插件完成的 ajax 查询呢？我注释掉了该`request.ajax()`部分中的所有内容，我只需要用与 POST 请求后相同的数据填充“用户”。基本上，现在当我向下滚动时，我会显示“AJAX”，并且我也想要查询的其余部分。

有任何想法吗？我没有在网上找到任何明显的关于此的内容。我来自 PHP 背景，我会考虑`$_SESSION[]`变量。Django中有类似的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T04:18:52.963

好的，它可以使用一个简单的`request.session[""]`对象。

# node.js - 如何卸载旧的 express(1) 可执行文件并更新到最新版本

> ID：12224252
> 
> 赞同：4
> 
> 时间：2012-09-01T01:43:26.607
> 
> 标签：node.js, express

我更新到最新的 express 候选版本，但它似乎没有更新 express(1) 可执行文件，它停留在 2.4.3 版上。我试过

```
npm uninstall express -g 
```

无济于事。我也试过

```
npm update express -g 
```

这似乎已将 /usr/local/lib 中的 express 文件更新为 3.0.0rc4 但 express(1) 可执行文件在我执行 express -v 时仍显示版本 2.4.3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T21:27:45.260

当您将 express 更新到最新版本时：

```
$ npm install -g express 
```

我打算从快速`3.0.0rc3`发布到`3.1.0`. 最新版本将 express(1) 可执行文件放在`/usr/local/share/npm/bin/express`

但检查版本：

```
$ express --version
3.0.0rc3 
```

那是不对的。我刚安装了3.1.0，怎么回事？

我来到这里看到彼得莱昂斯回答：

```
$ which express
/usr/local/bin/express 
```

是的，这不对，我想要那个在`/usr/local/share/npm/bin/express`. 所以我根据他的回答删除了它，并且：

```
$ express --version
-bash: express: command not found 
```

什么效果？啊，我需要退出终端（cmd + Q）并重新启动它。或者正如彼得在下面评论的那样`hash -r`，用于刷新路径哈希。

完成后：

```
$ which express
/usr/local/share/npm/bin/express
$ express --version
3.1.0 
```

很好，已经修好了！现在回到我实际上打算用快递做什么......我现在什至不记得了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T04:35:00.117

键入`which express`以查看可执行文件在文件系统中的位置。您可能安装了多个版本，并且一旦您了解可以在哪个版本中卸载/删除它们。

# ios - ... [关闭

> ID：12224266
> 
> 赞同：-4
> 
> 时间：2012-09-01T01:46:17.290
> 
> 标签：ios, xcode

这很愚蠢，但我必须知道 ( % ) 符号的含义，因为我想添加天数。

这是一个例子。

```
int seconds = 78120;
int forHours = (seconds1 / 3600),
    remainder = (seconds1 % 3600),
    forMinutes = remainder / 60,
    forSeconds = remainder % 60;
    NSString *Time = [NSString stringWithFormat:@"%02i:%02i:%02i",forHours,forMinutes,forSeconds];
    Label.text = Time; 
```

**结果：21:42:00**

我希望结果像（ **0天，21:42:00**）一样（**DD，HH：mm：ss**）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-01T01:48:20.343

这称为[模运算](http://en.wikipedia.org/wiki/Modulo_operation)。当你除以一个数字时剩下的就是（并且只考虑整数）。

例子：

```
3 % 2 = 1
6 % 2 = 0
6 % 3 = 0
6 % 4 = 2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T01:50:57.377

%（模）给出除法后的余数。

因此，您可以在开始时添加天数，然后使用模数来获取以天为单位的删除后的秒数：

```
int seconds = 78120;
int days = seconds / 86400;

// Equivalent to: seconds = seconds - days * 86400 /*# seconds in a day*/;
seconds = seconds % 86400; // seconds remaining less than a day

int forHours = (seconds1 / 3600),
    remainder = (seconds1 % 3600), // seconds remaining within an hour
    forMinutes = remainder / 60,
    forSeconds = remainder % 60; // seconds remaining less than a minute 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-01T01:53:18.200

模数 (%) 运算符返回整数除法的余数。

a = 13% 5；

在这里，a 将等于 3。

尝试：

```
int fordays = seconds1 / 86400,
    remainder = seconds1 % 86400,
    forHours = remainder / 3600,
    remainder = remainder % 3600,
    forMinutes = remainder / 60,
    forSeconds = remainder % 60; 
```

1 天 = 86400 秒。

# php - 如何在重定向页面上分配帖子全局变量？

> ID：12224267
> 
> 赞同：0
> 
> 时间：2012-09-01T01:46:56.570
> 
> 标签：php, redirect, post

我有一个登录表单，它从用户名、密码和提交按钮发送 3 个帖子值。但是我的表单处理器有 3 个页面，一个是**验证**字段的 validation.php，第二个是**read.php**，它根据 db 检查发布的值，第三个是**login.php**，它是登录成功的结果。全部成功后分别重定向到对方。这里的问题是，当我尝试从**read.php**（重定向页面）而不是**validate.php**（操作页面）中的表单访问用户发布的值时，我收到未定义索引的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T01:55:44.860

我真的不明白您为什么要进行所有这些重定向，但是如果您想让数据更加持久，您可以使用会话变量，因为`$_POST`超全局仅针对当前请求设置。

第一个文件.php

```
<?php
session_start();

$_SESSION['posted_data'] = $_POST; 
```

其他文件

```
<?php
session_start();
var_dump($_SESSION['posted_data']); 
```

但是，如前所述，您可能真的想重新考虑执行所有请求。

**更新**

除了您将丢失您的数据这一事实之外，您还会执行多个（不需要的）请求来简单地汇总表单。当您完成所有工作时，应该发生的唯一重定向是成功页面。有关更多信息，请参见：[http ://en.wikipedia.org/wiki/Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)

如果您希望保持代码干净，您总是可以只[包含其他文件](http://php.net/manual/en/function.include.php)或采用[OOP 方法](http://en.wikipedia.org/wiki/Object-oriented_programming)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-01T01:56:16.090

你应该只做一页来完成所有的工作。脚本似乎并不太复杂，所以我建议将所有内容放在一页上。您没有提供任何代码，所以我将向您展示一个一般示例。我只是输入它没有重读所以它不是纯粹的 PHP 语法，只是精神：

```
<?php
$login=$_POST['login'];
$pwd=$_POST['pwd'];

$dbcheck = mysql_fetch_array(mysql_query("SELECT COUNT(1) FROM table WHERE user =$login and pwd = $pwd"))
if($dbcheck[0] > 0) {
  //Login success
  //Setup your session variables, cookies, etc
  //Then you can do your redirect here
} else {
  //Page for wrong login
} 
```

# javascript - Javascript将变量传递为null？

> ID：12224279
> 
> 赞同：0
> 
> 时间：2012-09-01T01:49:39.203
> 
> 标签：javascript, jquery

老实说，我想不出更好的标题，我是编写自己的 javascript 的新手。

基本上，我有以下脚本，它将一个`hex`值转换为一个`rgb`值：

```
$(".submit").click(function() {
    function hex2rgb(hex) {
        if (hex.length < 3) {
            $(".result").text("Error");
        }
        if (hex[0] == "#") {
            hex = hex.substr(1);
        }
        if (hex.length == 3) {
            var temp = hex;
            hex = '';
            temp = /^([a-f0-9])([a-f0-9])([a-f0-9])$/i.exec(temp).slice(1);
            for (var i = 0; i < 3; i++) hex += temp[i] + temp[i];
        }
        var triplets = /^([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i.exec(hex).slice(1);
        return {
            red: parseInt(triplets[0], 16),
            green: parseInt(triplets[1], 16),
            blue: parseInt(triplets[2], 16)
        }
    }
    var hex = $(".hex").val();
    var rgb = hex2rgb("#" + hex);
    $(".result").text("rgba(" + rgb.red + "," + rgb.green + "," + rgb.blue + ",1)");
});​ 
```

[工作示例：http: [//jsfiddle.net/charlescarver/JkeKV/5/](http://jsfiddle.net/charlescarver/JkeKV/5/)]

当文本框中输入的位数小于 3（不完整的`hex`代码）时，它将文本更改`.result`为错误。代码本身工作正常，但控制台抛出一个错误说......

> TypeError: 'null' 不是对象（评估 '/^([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2}) $/i.exec(hex).slice')

我假设如果代码少于 3 位，它只会显示错误，而不是尝试继续`if (hex.length == 3) {}`运行，它似乎正在这样做。这是正确的吗？

另外，使用`if (hex.length == 3) {}`或转换为`if (hex.length >= 3) {`的函数会更好吗？我只是在想这个，因为位数必须是？`hex``rgb``3 >= x <= 6`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T01:52:35.863

它将移至下一条语句，因为当出现错误时您没有从函数中*调用*`if`：`return`

```
if (hex.length < 3) {
  $(".result").text("Error");
  return;
} 
```

另一种方法是对*通过*该验证`else`的其余代码使用：

 *```
if (hex.length < 3) {
  $(".result").text("Error");
} else {
  if (hex[0] == "#") {
    // ...
} 
```

关于您的其他问题，我会使用，`if (hex.length >= 3 && hex.length <= 6) {}`因为正如您所说，您想验证`3 >= x <= 6`.*

# jquery - IMG 热点 - 启用可点击区域

> ID：12224280
> 
> 赞同：2
> 
> 时间：2012-09-01T01:50:01.980
> 
> 标签：jquery, html, css

![在此处输入图像描述](../Images/cbe4809850b08daf75706ce5af222ba1.png)

我需要启用上面的图像，以便可以单击 3 个部分。

我想将其保留为图像，并且我假设我需要将热点与 jquery 一起使用（jquery 我首选的动态语言）。

有人可以用这个为我指出正确的方向吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T02:16:25.073

好吧，这是一种奇怪的解决方案，正如@Dan 在他的评论中指出的那样，图像映射可能是一个更好的选择。

但至少这里有一个 jQuery 解决方案：http: [//jsfiddle.net/zMXD8/1/](http://jsfiddle.net/zMXD8/1/)

JavaScript：

```
$('#menu').click(function (e) {
  var elements = 3;
  var element_height = $(this).height() / elements;
  var mouse_y = e.offsetY;

  for (var i = 1; i <= elements; i++) {
    if ((i - 1) * element_height < mouse_y && i * element_height > mouse_y) {
      alert("Clicked element #" + i);
      return;
    }
  }

  alert("Error in calculation");
});
​ 
```

只需将图像保存在`img`与图像相同大小的容器中，然后复制粘贴上面的代码即可`id`。`#menu`

# html - HTML表格在一个TD中构建两个菜单

> ID：12224282
> 
> 赞同：3
> 
> 时间：2012-09-01T01:50:26.910
> 
> 标签：html, css, html-table, valign

我有一张有 1 行 2 列的表。我有两个菜单，我想放在 1 列中。一个到顶部，第二个到底部。`valign`不起作用，我不知道如何使它起作用，第二个中的文本可以`td`改变，所以如果它增长第二个菜单应该被推到底部，

请在下面查看我当前的代码：

```
<table>
  <tr>
     <td>
      <table>
       <tr>
        <td  valign="top">
          <div class="left">
                <ul>
                   <li><a href="#">one</a></li>
                   <li><a href="#">two</a></li>
                   <li><a href="#">three</a></li>
                </ul>                                     
         </div>
         </td>
        </tr>
        <tr>
         <td valign="bottom">
           <div class="left">
               <ul>
                  <li><a href="#">four</a></li>
                  <li><a href="#">five</a></li>
              </ul>        
           </div>
         </td>
      </tr>
     </table>
    </td>
    <td valign="bottom">
       <div>
       some text here
    </div>
   </td>
 </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T02:14:52.917

您的代码没有任何问题

尝试在所有表格标签上添加边框 =“1”。`<table border ="1">`你想清楚

尝试调整你的最后一个`<div>`

或您指定的 colspan`<td>`

![在此处输入图像描述](../Images/6035d92fa1348e305ed4e5764dfbde97.png)

使用此代码更新的新版本将使：

```
<table border="1">
  <tr>
     <td>
      <table border ="1">
       <tr>
        <td  valign="top">
          <div class="left">
                <ul>
                   <li><a href="#">one</a></li>
                   <li><a href="#">two</a></li>
                   <li><a href="#">three</a></li>
                </ul>                                     
         </div>
         </td>
        </tr>
        <tr>
         <td valign="bottom">
           <div class="left">
               <ul>
                  <li><a href="#">four</a></li>
                  <li><a href="#">five</a></li>
              </ul>        
           </div>
         </td>
      </tr>
     </table>
    </td>
    <td valign="bottom" style="display:block; margin-left:auto; margin-right: auto;">
        <div>
       some text here some text here some text here some text here some text here some text here some text here some text here 
        </div>
   </td>
 </tr> 
```

![在此处输入图像描述](../Images/ad625279154197eb6c28e719a9231367.png)

# wcf - Azure 模拟器端口不同

> ID：12224287
> 
> 赞同：2
> 
> 时间：2012-09-01T01:52:07.300
> 
> 标签：wcf, azure

当我在正常模式下运行 WCF 时，它可以工作，但是当我在本地 PC 上通过 Azure 计算机模拟器运行时，端口号不同。例如，WCF 页面在 address: 下打开`http://localhost:81/ServiceName1.svc`，但 WSDL 地址显示

您还可以将服务描述作为单个文件访问：

`http://pc-name1:82/ServiceName1.svc?singleWsdl`

`http://localhost:81/ServiceName1.svc`当我尝试使用 WCF 测试客户端进行连接时，当我尝试获取地址或地址时它不起作用`http://pc-name1:82/ServiceName1.svc`

你知道可能会发生什么吗？有人在使用 Azure 模拟器时注意到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T05:11:39.123

您是否参加过[在 Windows Azure 中托管 WCF 练习](http://msdn.microsoft.com/en-us/spazuretrainingcourse_azurefromsponpremusingjquery_topic2.aspx)？解释了这种行为。您需要更新 WCF - KB981002- WCF：修补程序汇总更新，这将为您的 WCF 服务添加特殊行为：

> 7.关于上面的System.ServiceModel配置：
> 
> 1.  对于此示例，除了服务主端点外，我们还公开了元数据交换 (MEX) 端点。这将公开服务元数据，从而允许将服务引用添加到 Visual Studio 中的此服务。
> 2.  useRequestHeadersForMetadataAddress 行为是在 KB981002-WCF：修补程序汇总更新中定义的特殊行为。它允许 WCF 在负载均衡器后面提供正确的元数据。Windows Azure Web 角色在一台或多台物理服务器之间进行负载平衡。

# asp.net-mvc - 我如何知道我的网站是在 IIS6 还是 IIS7 中托管？

> ID：12224289
> 
> 赞同：1
> 
> 时间：2012-09-01T01:52:51.650
> 
> 标签：asp.net-mvc, iis, iis-7, iis-6

我的 ASP.NET MVC 站点需要在 IIS6 或 IIS7 中运行，当它在 IIS6 中运行时，我需要一个后缀为“.mvc”的 url。

我知道我可以添加 AppSetting，但是否知道该站点是在 IIS6（IIS7 经典模式）还是 IIS7 下运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T01:56:12.673

**除非**您使用 MVC1 ，否则您**不需要**在 IIS 上拥有 MVC 扩展。MVC2 及更高版本在 IIS6 上与无扩展 URL 一起工作得很好。

 **但是，要回答您的问题，请查看之前的问题：[如何使用 C# 检测 IIS 版本？](https://stackoverflow.com/questions/446390/how-to-detect-iis-version-using-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-15T07:28:30.140

您可以使用浏览器开发工具 (F12) 从客户端检查 http 响应标头。**

# ruby-on-rails - 命名所有控制器以进行设计

> ID：12224292
> 
> 赞同：1
> 
> 时间：2012-09-01T01:53:34.100
> 
> 标签：ruby-on-rails, namespaces, devise

我正在使用带有多个模型（确切地说是三个）的设计，每个角色都有一些不同的交互。例如，在用户模型注册后，我重写了一个设计方法，将他们重定向到特定的欢迎路径，在雇主模型中，我将他们带到信用卡表单等。

因此，我需要命名所有内容。命名视图和控制器并不难，但是，我想知道是否有一种方法可以命名控制器而不必指定每个设计控制器。

例如，有没有办法基本上做到这一点：

```
devise_for :employers, :controller => "employers" 
```

而不必这样做：

```
devise_for :employers, :controllers => { 
 :registrations => "employers/registrations",
 :sessions => "employers/sessions",
 :confirmations => "employers/confirmations",
 :passwords => "employers/passwords",
 :unlocks => "employers/unlocks",
 :mailer => "employers/mailer"
} 
```

可能看起来微不足道，但是当您要维护三个模型时，它可能会变得有点多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-29T17:28:28.323

看看在[命名空间内设计](https://stackoverflow.com/a/4502272/389105)的以下答案。在 routes.rb 中简单地命名空间不会产生预期的结果。您必须为所需的每个操作生成控制器。例如，对于会话，您必须在控制器 Employer 命名空间中创建一个名为 Sessions 的新控制器：

```
bundle exec rails g controller employer/sessions 
```

然后从设计会话控制器子类化新的会话控制器，以引入正确处理会话所需的所有设计方法：

```
class Employer::SessionsController < Devise::SessionsController
end 
```

并将 config/routes.rb 中的 'devise_for :employers, :controller => "employers"' 行更改为以下内容：

```
devise_for :employers, :controllers => { :sessions => "employer/sessions" } 
```

最后，作为可选步骤，您可以生成视图到 app/views/employer/sessions 目录。您可以在 config/initializers/devise.rb 中通过我的设置**“config.scoped_views = true”执行此操作，并运行以下命令生成范围为雇主的视图：**

```
rails generate devise:views users 
```

这应该在 app/views/employer/sessions/new 生成模板。否则，新的会话控制器将只使用默认视图模板。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T02:24:02.203

只需说：`devise_for :employers, :path => "employers"`？

# ruby-on-rails - 如何创建只能通过随机生成的 URL 访问的视图？

> ID：12224295
> 
> 赞同：2
> 
> 时间：2012-09-01T01:54:27.157
> 
> 标签：ruby-on-rails, url, routing, registration

我想设置一个注册过程，在该过程中，用户最初从站点请求更多信息，然后收到一封电子邮件，其中包含指向实际注册页面的链接。该链接应为随机生成的 URL，否则应限制对注册页面的访问。换句话说，不应该通过在浏览器中手动输入 URL 来访问注册页面。

我将不胜感激有关如何最好地实现这些功能的任何建议。

我是 Rails 的新手，所以如果这个问题是基本的或者已经被覆盖，我提前道歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T02:06:44.487

您需要将随机令牌存储在数据库中。由于您将其发送到电子邮件地址，因此您可能还希望存储电子邮件，以便在他们注册时将其添加到您的用户模型中。以下是您可以做的一些相关部分（尽管您需要填补空白）。

本质上，您需要`RegistrationToken.new(:email => "their email address")`在控制器中使用 生成注册令牌。

该模型实现了随机令牌的生成：

```
class RegistrationToken < ActiveRecord::Base
  # the secret is just to make the random number generator more secure
  @@secret = 6345
  def initialize
    # info at http://www.ruby-doc.org/core-1.9.3/Random.html
    seed = Random.new().integer(1000000000) + @@secret
    token = Random.new(seed).integer(1000000000);
    # you might want to generate random numbers larger than 1 billion
    # for more security (maybe with 64 bit integers?)
  end
end 
```

以及数据库的迁移：

```
class CreateRegistrationTokens
  def change
    create_table :products do |t|
      t.string :email
      t.integer :token
      t.timestamps
    end
  end
end 
```

然后你只需要设置你的控制器和视图。

对于您的注册控制器，您只需要以下内容：

```
class RegistrationsController < ActiveRecord::Base
  def new
    @registration_token = RegistrationToken.find(params[:token]).first
    if @registration_token.nil?
      raise 'Invalid token' # or whatever you want, eg. redirect to a page
    end
    # otherwise render the registration form (can do implicit render)
  end
  def create
    @registration_token = RegistrationToken.find(params[:token]).first
    if @registration_token.nil?
      raise 'Invalid token' # or whatever you want, eg. redirect to a page
    end
    # otherwise create the user, eg.
    User.create(params[:user].merge(:email => @registration_token.email))
    @registration_token.destroy
  end
end 
```

上面的控制器操作基本上确保它们只有在数据库中找到匹配的令牌时才能注册。

# python - Python脚本问题

> ID：12224298
> 
> 赞同：0
> 
> 时间：2012-09-01T01:55:23.927
> 
> 标签：python

所以这是我为我的伙伴公司客户支持编写的脚本。基本上，它所做的是使用脚本中的 IP 电话进行呼叫，它可以工作，但有问题。这是代码：

```
import urllib, urllib2, sys
num = sys.argv[1]
print 'Calling'
phones = [
'http://phone1/index.htm',
'http://phone2/index.htm',
'https://phone3/index.htm',
'https://phone4/index.htm',
'https://phone5/index.htm'
]
data = urllib.urlencode({"NUMBER":num, "DIAL":"Dial", "active_line":1})
while 1: 
    for phone in phones:
        try:
            urllib2.urlopen(phone,data) # make call
            urllib2.urlopen(phone+"?dialeddel=0") # clear logs
        except: pass 
```

第一个问题是它只使用电话一...现在它被设置为不断调用，出于调试目的，我似乎只接到电话一...第二个问题是脚本不会终止。ctrl+c 不起作用...终止它的唯一方法（据我所知）是结束 ssh 会话。现在，我是 python 新手，所以这两个可能只是愚蠢的错误，所以希望有人能提供帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T02:05:50.150

尝试像这样替换 try catch 块，

```
try:
    <code>
except Exception as exp:
    <code> 
```

使用以下代码时。

```
except:
    pass 
```

系统将捕获 SystemExit、KeyboardInterrupt 和其他您可能不想捕获的东西。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T02:09:34.480

您的 try 块可能正在捕获 Ctrl-C。尝试修改它，以便只捕获您期望的特定异常。有关 Ctrl-C 作为例外的更多信息，请参阅[KeyboardInterrupt 。](http://docs.python.org/library/exceptions.html#exceptions.KeyboardInterrupt)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T02:13:52.917

代替：

```
try:
    urllib2.urlopen(phone,data) # make call
    urllib2.urlopen(phone+"?dialeddel=0") # clear logs
except: pass 
```

和：

```
urllib2.urlopen(phone,data) # make call
urllib2.urlopen(phone+"?dialeddel=0") # clear logs 
```

所以你可以看到回溯并找到错误

# database - 使用 OLE DB 提供程序在 Fox Pro 中列出主键？

> ID：12224299
> 
> 赞同：2
> 
> 时间：2012-09-01T01:55:43.200
> 
> 标签：database, primary-key, foxpro, visual-foxpro

如何使用 OLE DB 提供程序列出 Fox Pro 中表的主键？

使用 C# 并将我的构建切换到 x86 而不是 x64 我能够使用 Fox Pro 的 oledb 提供程序来显示有关表的一些信息：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data.OleDb;
using System.Data;

namespace obtainFoxSchema
{
    class Program
    {
        static void Main(string[] args)
        {
            OleDbConnection connection = new OleDbConnection(
                "Provider=VFPOLEDB.1;Data Source=X:\\FREETABLES\\DATA;"
            );
            connection.Open();
            DataTable tables = connection.GetSchema(
                System.Data.OleDb.OleDbMetaDataCollectionNames.Tables
            );

            foreach (System.Data.DataRow rowTables in tables.Rows)
            {
                Console.Out.WriteLine(rowTables["table_name"].ToString());
                DataTable columns = connection.GetSchema(
                    System.Data.OleDb.OleDbMetaDataCollectionNames.Columns,
                    new String[] { null, null, rowTables["table_name"].ToString(), null }
                );
                foreach (System.Data.DataRow rowColumns in columns.Rows)
                {
                    Console.Out.WriteLine(
                        rowTables["table_name"].ToString() + "." +
                        rowColumns["column_name"].ToString() + " = " +
                        rowColumns["data_type"].ToString()
                    );
                }
            }
            Console.Out.WriteLine("stop");
        }
    }
} 
```

但是我真的不知道在返回的对象中在哪里查找表之间的主键或外键。

有什么想法可能在哪里？

是的，我在另一个问题中找到了此代码，但我自己使用 Excel 2007 的获取外部数据构建了连接字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T13:45:02.353

我在推特上看到了你的帖子。我作为 VFP 开发人员回答这个问题，在 Visual Studio 和 C# 方面经验很少。

不确定您是否需要以编程方式或只需要获取详细信息。您是否尝试将数据库添加到服务器资源管理器？根据 Visual FoxPro 帮助文件...

通过 Visual FoxPro OLE DB 提供程序连接到 Visual FoxPro 数据库或表 打开 Visual Studio。

1.  从视图菜单中，选择服务器资源管理器。
2.  在服务器资源管理器窗格中，右键单击数据连接，然后单击添加连接
3.  在“数据链接属性”对话框中，单击“提供者”选项卡。
4.  为 Visual FoxPro 选择 Microsoft OLE DB 提供程序。
5.  将出现“数据链接属性”对话框中的“连接”选项卡。

如果这没有帮助，有一个 DDEX 提供程序，但它可能仅适用于特定版本的 Visual Studio。

[http://vfpx.codeplex.com/wikipage?title=Sedna&referringTitle=Home#DDEX](http://vfpx.codeplex.com/wikipage?title=Sedna&referringTitle=Home#DDEX)

如果您使用的是实体框架，则有一个提供者：

[http://vfpefprovider.codeplex.com/](http://vfpefprovider.codeplex.com/)

瑞克

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-04T18:43:19.770

您可以从 connection.GetOleDbSchemaTable 方法中获取主键和外键。

例子：

```
using(var connection = new OleDbConnection(@"provider=vfpoledb;data source=c:\NorthwindData\Northwind.dbc")) {
    connection.Open();
    DataTable primaryKeys = connection.GetOleDbSchemaTable(OleDbSchemaGuid.Primary_Keys, null);
    DataTable foreignKeys = connection.GetOleDbSchemaTable(OleDbSchemaGuid.Foreign_Keys, null);
} 
```

但是，主键数据表不会让您知道主键是否是 AutoInc。如果您对获取 VFP 特定架构信息感兴趣，那么您可能想尝试使用[VfpClient](http://vfpclient.codeplex.com/)而不是 OleDb 类。

VfpClient 示例：

```
using(var connection = new VfpConnection(@"c:\NorthwindData\Northwind.dbc")) {
    connection.Open();
    DataTable primaryKeys = connection.GetSchema(VfpConnection.SchemaNames.PrimaryKeys);
    DataTable foreignKeys = connection.GetSchema(VfpConnection.SchemaNames.ForeignKeys);
} 
```

顺便说一句... VfpClient 包括一个与VS2010 和VS2012 一起使用的DDEX 提供程序。

# javascript - 隐藏 farbtastic 颜色代码

> ID：12224302
> 
> 赞同：0
> 
> 时间：2012-09-01T01:56:02.710
> 
> 标签：javascript, jquery

有一个很棒的[http://acko.net/blog/farbtastic-jquery-color-picker-plug-in/](http://acko.net/blog/farbtastic-jquery-color-picker-plug-in/)

我需要做两件事：

一种。隐藏我们可以在下面看到的颜色代码

```
<input readonly="readonly" type="text" id="color"  name="color" value="#123456" /> 
```

湾。将此代码保留在其他隐藏字段中。

怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T02:40:34.100

试试这个

**HTML**

```
<form>
    <input type="text" id="color" name="color" />
    <input type="hidden" id="colorValue" name="colorValue" />
</form>
<div id="colorpicker"></div>​ 
```

**JS**

```
$(document).ready(function() {
    var picker = $.farbtastic('#colorpicker');
    picker.setColor("#fff");
    picker.linkTo(function onColorChange(color) {
        $('#color').css({'background-color':color});
        $('#colorValue').val(color);
    });
}); 
```

[**演示**](http://jsfiddle.net/FMpxd/2/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T02:20:00.923

我看不到您所指的脚本，页面不会加载，但我很确定您只需将类型更改为`hidden`，当它隐藏时，您还可以删除该`readonly`属性：

```
<input type="hidden" id="color" name="color" value="#123456" / > 
```

我假设脚本自动更新了您提到的字段，如果它被隐藏，它仍然会更新它。

# css - IE 和 FF 中的@font-face

> ID：12224312
> 
> 赞同：0
> 
> 时间：2012-09-01T01:58:16.160
> 
> 标签：css, fonts, embed, font-face

[我正在尝试使用使用 Font Squirrel（此处为 jsfiddle](http://jsfiddle.net/Koubenec/zL2PP/1/) ）创建的 @font-face 工具包嵌入字体。虽然嵌入似乎在 Chrome 中工作，但 IE 和 Firefox 都不显示该字体。我已经研究了 CSS 几个小时，但似乎找不到问题所在。非常感谢任何输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T02:06:13.917

至少在 Firefox 中，@font-face URL 需要相对于文档根目录。换句话说，在 Firefox 中从站点外部的 URL 导入字体将不起作用。IE 可能也是如此，但我不确定。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-01T02:08:31.543

你可以试试这个结构：

```
@font-face {
  font-family: 'WebFont';
  src: url('myfont.woff') format('woff'),  /* Firefox 3.6+, IE9+, Chrome 6+, Safari 5.1+*/
       url('myfont.ttf') format('truetype');  /* Safari 3—5, Chrome4+, Firefox 3.5, Opera 10+ */
} 
```

取自[CSS3Please](http://css3please.com/)。

# wpf - ListBox SelectedItem Binding Broken

> ID：12224313
> 
> 赞同：2
> 
> 时间：2012-09-01T01:58:20.790
> 
> 标签：wpf, data-binding, mvvm, telerik, prism

I am using `WPF` having a strange issue with `RadListBox` SelectedItem databinding, trying to figure out but no luck. Following is my scenario

1.  I am using `Telerik` Controls (`RadListBox`, and `RadButton`)
2.  `RadButton` is placed inside a `ItemsControl`, `RadListBox` and `ItemsControl` are bind to same `ItemsSource`.
3.  I am using `PRISM` and `MVVM`.
4.  What I want is when I click on button, the same item is selected from `RadListBox` automatically, *(This part working fine)*.
5.  **Problem:** As soon as I click on any item of `RadListBox` and then click back on any button the item selection stops working.
6.  **Edit: I tried the same thing with standard WPF ListBox by adding attached behavior for selection changed event and attached property of Command and CommandParameter, it works fine, so it looks like an issue with Telerik `RadListBox` ?**

Now let me come to code.

**ViewModel Class**

```
public class MainViewModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    // Create the OnPropertyChanged method to raise the event 
    protected void OnPropertyChanged(string name)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(name));
        }
    }

    public DelegateCommand<object> StudentSelected { get; set; }
    public DelegateCommand<object> ButtonPressed { get; set; }

    private void OnStudentSelected(object par)
    {
        //Debugger.Break();
        if (handled == false)
        {
            Student std = par as Student;
            if (std != null)
            {
                SelectedStudent = std;
            }
        }
        handled = false;
    }

    private void OnButtonPressed(object par)
    {
        //Debugger.Break();
        handled = true;
        String std = par as String;
        if (std != null)
        {
            foreach (Student st in _students)
            {
                if (st.Name.Equals(std))
                {
                    SelectedStudent = st;
                    break;
                }
            }
        }
    }    

    private Student _selectedstudent;
    private bool handled = false;

    public MainViewModel()
    {
        StudentSelected = new DelegateCommand<object>(OnStudentSelected);
        ButtonPressed = new DelegateCommand<object>(OnButtonPressed);
    }

    public Student SelectedStudent
    {
        get
        {
            return _selectedstudent;
        }
        set
        {
            _selectedstudent = value;
            OnPropertyChanged("SelectedStudent");
        }
    }

    private ObservableCollection<Student> _students;
    public ObservableCollection<Student> Students
    {
        get
        {
            return _students;
        }
        set
        {
            _students = value;
            OnPropertyChanged("Students");
        }
    }
}

public class Student
{
    public String Name { get; set; }
    public String School { get; set; }
} 
```

**MainView XAML**

```
 <telerik:RadListBox Grid.Column="0" Grid.Row="0" ItemsSource="{Binding Students}" Command="{Binding StudentSelected}" CommandParameter="{Binding RelativeSource={RelativeSource Mode=Self}, Path=SelectedItem}" SelectedItem="{Binding SelectedStudent, Converter={StaticResource DebugConverter}}">
<!-- The above debug converter is just for testing binding, as long as I keep on clicking button the Converter is being called, but the moment I click on RadListBoxItem the Converter is not called anymore, even when I click back on buttons -->
                <telerik:RadListBox.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Name}"></TextBlock>
                    </DataTemplate>
                </telerik:RadListBox.ItemTemplate>
            </telerik:RadListBox>
            <Label Grid.Row="0" Grid.Column="1" Content="{Binding SelectedStudent.Name}"></Label>
            <StackPanel Grid.Column="1" Grid.Row="1" Orientation="Horizontal">
                <ItemsControl ItemsSource="{Binding Students}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <telerik:RadButton Width="100" Height="70" Content="{Binding Name}" Command="{Binding RelativeSource={RelativeSource FindAncestor, 
    AncestorType={x:Type Window}}, Path=DataContext.ButtonPressed}" CommandParameter="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Content}">
                        </telerik:RadButton>
                    </DataTemplate>    
                    </ItemsControl.ItemTemplate>

                </ItemsControl>
            </StackPanel> 
```

**and finally populating the ViewModel and setting the Datacontext**

```
MainViewModel mvm = new MainViewModel();
            ObservableCollection<Student> students = new ObservableCollection<Student>();
            students.Add(new Student { Name = "Student 1", School = "Student 1 School" });
            students.Add(new Student { Name = "Student 2", School = "Student 2 School" });
            students.Add(new Student { Name = "Student 3", School = "Student 3 School" });

            mvm.Students = students;

            //Bind datacontext
            this.DataContext = mvm; 
```

Please give your suggestions and share you expertise from WPF Jargon?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T09:33:45.703

Finally I figured out the issue, I just need to replace the `RadListBox` `SelectedItem` binding to `TwoWay`

```
<telerik:RadListBox Grid.Column="0" Grid.Row="0" ItemsSource="{Binding Students}" Command="{Binding StudentSelected}" CommandParameter="{Binding RelativeSource={RelativeSource Mode=Self}, Path=SelectedItem}" SelectedItem="{Binding SelectedStudent, Mode,TwoWay, Converter={StaticResource DebugConverter}}"> 
```

# macos - 支持不同 (macports) gcc 版本中的 arch / arch_only 标志

> ID：12224314
> 
> 赞同：5
> 
> 时间：2012-09-01T01:58:24.520
> 
> 标签：macos, gcc, osx-snow-leopard, x86-64, macports

我在 OSX 雪豹上并使用 macports 来获取更新版本的 gcc。

gcc 的 -arch_only 编译器标志是什么意思？我对它的作用感到困惑（我知道“-arch x86_64”生成一个 64 位二进制文​​件，但仅此而已），以及为什么对它的支持似乎在 gcc 版本之间有所不同。

macports gcc 4.4 支持它，macports 4.6-4.8 不支持并给出此错误：

```
gcc-mp-4.8: error: unrecognized command line option '-arch_only' 
```

与此相关，对“-arch”的支持似乎也因版本而异。4.4 支持，4.6 不支持，4.7 和 4.8 支持。

# ruby - 在 JRuby 中将 java 类加载到 gem 中的问题

> ID：12224317
> 
> 赞同：1
> 
> 时间：2012-09-01T01:59:29.220
> 
> 标签：ruby, jvm, gem, jruby

我正在尝试将 JRuby 支持添加到我的 C 扩展 gem 中，方法是编写一个 Java 类并在 gem 安装在 JRuby 上时执行它。有问题的代码位于[这个分支](https://github.com/dockyard/pg_array_parser/tree/jruby-compatibility)上，重要的文件是[java 类](https://github.com/dockyard/pg_array_parser/blob/jruby-compatibility/ext/pg_array_parser/PgArrayParserService.java)和[在 JRuby 中使用时加载它的代码](https://github.com/dockyard/pg_array_parser/blob/jruby-compatibility/lib/pg_array_parser.rb)

在这一点上，我只是想确保我的 gem 配置正确，并完全期望它不符合规范。

当我尝试运行 rspec（或 IRB 中的 gem）时，我得到以下回溯

```
NameError: cannot load Java class com.dockyard.PgArrayParser
  get_proxy_or_package_under_package at org/jruby/javasupport/JavaUtilities.java:54
                      method_missing at /Users/dan/.rbenv/versions/jruby-1.6.7.2/lib/ruby/site_ruby/shared/builtin/javasupport/java.rb:51
                       PgArrayParser at /Users/dan/Projects/dockyard/pg_array_parser/lib/pg_array_parser.rb:6
                              (root) at /Users/dan/Projects/dockyard/pg_array_parser/lib/pg_array_parser.rb:3
                             require at org/jruby/RubyKernel.java:1033
                             require at /Users/dan/.rbenv/versions/jruby-1.6.7.2/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36
                              (root) at /Users/dan/Projects/dockyard/pg_array_parser/lib/pg_array_parser.rb:2
                             require at org/jruby/RubyKernel.java:1033
                             require at /Users/dan/.rbenv/versions/jruby-1.6.7.2/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36
                              (root) at /Users/dan/Projects/dockyard/pg_array_parser/lib/pg_array_parser.rb:1
                             require at org/jruby/RubyKernel.java:1033
                             require at /Users/dan/.rbenv/versions/jruby-1.6.7.2/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36
                              (root) at /Users/dan/Projects/dockyard/pg_array_parser/spec/spec_helper.rb:1
                                load at org/jruby/RubyKernel.java:1058
                     load_spec_files at /Users/dan/Projects/dockyard/pg_array_parser/spec/parser_spec.rb:746
                             collect at org/jruby/RubyArray.java:2331
                     load_spec_files at /Users/dan/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746
                                 run at /Users/dan/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/rspec-core-2.10.1/lib/rspec/core/command_line.rb:22
                                 run at /Users/dan/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/rspec-core-2.10.1/lib/rspec/core/runner.rb:69
                             autorun at /Users/dan/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/rspec-core-2.10.1/lib/rspec/core/runner.rb:10
                                call at org/jruby/RubyProc.java:270
                                call at org/jruby/RubyProc.java:224 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T17:58:37.010

最近我自己开发了一个[JRuby 扩展](https://github.com/tychobrailleur/fibonacci-jrubyext)，以下是我通过实验发现的一些问题——它们似乎也会给你带来问题：

*   java 包必须与类所在的 Ruby 模块相匹配。如果你的类在`PgArrayParser`模块中，你的类必须是`pgarrayparser`（全部小写）。
*   如果你想实例化一个`PgArrayParserEngine`类，那么你`BasicLibraryService`必须被调用`PgArrayParserEngineService`。
*   使用时`@JRubyMethod`，指定方法的名称。

我发现[Yoko 关于这个主题的文章以及](http://yokolet.blogspot.ie/2011/05/extending-jruby.html)[最近](http://huangzhimin.com/2012/08/23/how-to-write-a-jruby-gem-part-2/)的这篇文章最有用。

我已经将这些不同的元素应用到你的项目中[，](https://github.com/tychobrailleur/pg_array_parser/tree/jruby-compat)我可以从 IRB 调用方法——第一个规范通过了！

# types - 如何解决 Coq 中类型等式无效的目标？

> ID：12224318
> 
> 赞同：7
> 
> 时间：2012-09-01T01:59:53.323
> 
> 标签：types, equality, proof, coq

我的证明脚本给了我愚蠢的类型等式，比如`nat = bool`我 `nat = list unit`需要用来解决相互矛盾的目标。

在正常的数学中，这将是微不足道的。给定集合`bool := { true, false }`， `nat := { 0, 1, 2, ... }`我知道`true ∈ bool`，但是`true ∉ nat`，因此`bool ≠ nat`。在 Coq 中，我什至不知道如何表述`true :̸ nat`。

## 问题

有没有办法证明这些等式是错误的？或者，这不可能吗？

（Ed.：删除了一长串失败的尝试，仍然可以在历史记录中查看。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T09:22:10.893

**tl; dr**基数参数是显示类型不相等的唯一方法。您当然可以通过一些反思更有效地自动化基数论证。如果您想走得更远，请通过构建一个 Universe 为您的类型提供语法表示，确保您的证明义务被框架为表示的语法不等式，而不是类型的语义不等式。

### 作为平等的同构

人们普遍认为（甚至可能在某处有证明）Coq 的逻辑与*同构*集合在*命题上相等*的公理是一致的。事实上，这是 Vladimir Voevodsky 的 Univalence Axiom 的结果，目前人们对此非常感兴趣。我必须说，它是一致的（在没有类型大小写的情况下）似乎非常合理，并且可以构造一种计算解释，通过插入任何给定时刻所需的同构的任何组件，以某种方式在相等类型之间传输值。

如果我们假设这样一个公理是一致的，我们会发现逻辑中的类型不等式仅通过反驳类型同构的存在才能成立。结果，您的部分解决方案至少在原则上是它所在的位置。可枚举性是显示非同构的关键。我不确定它的状态`nat = (nat -> nat)`可能是什么，但是*从系统外部*可以清楚地看出，每个居民`nat -> nat`都有一个范式，并且范式有很多：至少有可能存在一致的公理或反射原则这使逻辑更具*内涵*，并验证了该假设。

### 自动化基数参数

我可以看到您可以采取两个步骤来改善目前的情况。不太激进的步骤是通过更好地使用反射来改进用于制作这些基数论证的通用技术。你是这样做的理想人选，因为一般来说，你希望证明一个有限集不同于一些更大的集。假设我们有一些 的概念`DList A`，是 的不同元素的列表`A`。如果你可以构造一个*详尽* `DList A`的和*更长* `DList B`的，那么你可以反驳`A = B`。

*归纳递归*对 DList 有一个很好的定义，但是 Coq 没有归纳递归。幸运的是，它是我们可以通过仔细使用索引来模拟的定义之一。原谅我的非正式语法，但让我们有

```
Parameters
  A   : Set
  d   : A -> A -> bool
  dok : forall x y, d x y = true -> x = y -> False 
```

那是`d`为了“不同”。`d`如果一个集合已经有可判定的相等性，你可以很容易地装备它。`d`不需要太多工作就可以为我们的目的配备一个足够大的设备。实际上，这是关键的一步：遵循 SSReflect 团队的智慧，我们通过与`bool`而不是合作`Prop`，利用我们领域的狭小优势，让计算机完成繁重的工作。

现在，让我们拥有

```
DListBody : (A -> bool) -> Set 
```

其中 index 是列表的*新鲜度测试*

```
dnil  : DListBody (const true)       (* any element is fresh for the empty list *)
dsnoc : forall f, (xs : DListBody f) -> (x : A) -> is_true (f x) ->
          DListBody (fun y => f y /\ d x y) 
```

如果你愿意，你可以定义存在性的`DList`包装`DListBody`。不过，也许这实际上隐藏了我们想要的信息，因为要详尽地展示这样的东西是这样的：

```
Exhaustive (f : A -> bool)(mylist : DListBody f) = forall x : A, is_false (f x) 
```

因此，如果您可以为有限枚举写下 DListBody，那么您可以仅通过包含琐碎子目标的案例分析来证明它是详尽无遗的。

然后，您只需要进行一次归类论证。当您想反驳类型之间的相等性时（假设您已经有合适的候选人`d`），您会详尽地列举较小的并从较大的列表中展示更长的列表，仅此而已。

### 在宇宙中工作

更激进的选择是首先质疑你为什么要实现这些目标，以及它们是否真的意味着你想要的。真正的类型应该是什么？这个问题有多种可能的答案，但至少在某种意义上它们是“基数”是公开的。如果您想将类型视为更加具体和语法，如果它们是由不同的构造构建的，那么您可能需要通过在*Universe 中*工作来为类型配备更具体的表示。您为类型定义“名称”的归纳数据类型，以及将名称解码为类型的方法，然后根据名称重新构建您的开发。您应该会发现名称的不等式遵循普通的构造函数歧视。

问题是 Coq 中的宇宙构造可能有点棘手，这也是因为不支持归纳递归。这在很大程度上取决于您需要考虑的类型。也许您可以归纳定义一些`U : Set`然后实现递归解码器`T : U -> Set`。这对于简单类型的宇宙来说当然是合理的。如果你想要一个依赖类型的宇宙，事情会变得有点棘手。你至少可以做这么多

```
U : Type   (* note that we've gone up a size *)
NAT : U
PI : forall (A : Set), (A -> U) -> U

T : U -> Set
T NAT = nat
T (PI A B) = forall (a : A), T (B a) 
```

但请注意， 的域`PI`未编码在 中`Set`，而不是在 中`U`。归纳递归的 Agdans 可以克服这一点，定义`U`并`T`同时

```
U : Set   (* nice and small *)
NAT : U
PI : forall (A : U), (T A -> U) -> U   (* note the use of T *)

T : U -> Set
T NAT = nat
T (PI A B) = forall (a : T A), T (B a) 
```

但 Coq 不会有这个。同样，解决方法是使用索引。这里的成本`U`不可避免地很大。

```
U : Set -> Type
NAT : U nat
PI : forall (A : Set)(B : A -> Set),
       U A -> (forall a, U (B a)) -> U (forall a, B a) 
```

But you can still get a lot of stuff done with a universe built that way. For example, one can equip such a universe with a computationally effective [extensional equality](https://personal.cis.strath.ac.uk/conor.mcbride/pub/JOTT/coq/ott.v).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T01:59:53.323

### 扩展*部分*解

作为参考，这是我的证明`nat = bool -> False`。（它很长，但我希望很容易看到这个证明的一般结构。）

```
Goal nat = bool -> False.
  (* For any two types, if they are actually identical, the identity is an
     isomorphism. *)
  assert (forall (T U : Set), T = U ->
              exists (f : T -> U) (g : U -> T),
              (forall t, (g (f t)) = t) /\ (forall u, (f (g u)) = u))
          as Hiso
  by (intros T U H; rewrite H; exists (@id U); exists (@id U);
          split; intro; reflexivity).
  (* our nat = bool *)
  intro HC.
  (* combining the facts gives an iso between nat and bool *)
  pose proof (Hiso nat bool HC); clear HC Hiso.
  inversion H as [phi [phi_inv [Hl Hr]]]; clear H Hr.
  (* this breaks because ||bool|| = 2 while ||nat|| > 2 -- we get collisions *)
  assert (forall m n o,
              phi m = phi n \/ phi n = phi o \/ phi m = phi o)
   by (intros m n o;
        case (phi m); case (phi n); case (phi o); clear; tauto).
  (* building the collision for 0, 1 and 2 *)
  pose proof (H 0 1 2) as HC; clear H.
  (* (false) identity preservation for 0, 1, 2 *)
  pose proof (Hl 0) as H0; pose proof (Hl 1) as H1;
  pose proof (Hl 2) as H2; clear Hl.
  (* case analysis on phi calls yields equalities on non-equal numbers... *)
  destruct (phi 0); destruct (phi 1); destruct (phi 2);
  (* ...rewriting leads to an equality '0 = 2' or '0 = 1' or '1 = 2'... *)
  try (rewrite H2 in H0); try (rewrite H1 in H0); try (rewrite H2 in H1);
  (* ...which can be used to solve by constructor inequality *)
  try inversion H0; inversion H1.
Qed. 
```

如您所见，这实际上不适用于大型有限类型（即使是自动化的）——这些术语太大了。对此的任何改进都会很棒。

# css - 使用 CSS3 滤镜模糊定义的边缘

> ID：12224320
> 
> 赞同：90
> 
> 时间：2012-09-01T02:00:01.880
> 
> 标签：css

我用这段代码模糊了一些图像

```
img {
  filter: blur(5px);
  -webkit-filter: blur(5px);
  -moz-filter: blur(5px);
  -o-filter: blur(5px);
  -ms-filter: blur(5px);
} 
```

图像的边缘也变得模糊。是否可以在保持边缘定义的同时模糊图像？像嵌入模糊之类的？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-09-01T02:06:10.663

您可以将其放入`<div>`with`overflow: hidden;`并将其设置`<img>`为`margin: -5px -10px -10px -5px;`。

**演示：** [[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/ThinkingStiff/b8fLU/)]]]

### 输出

![](../Images/a061a1728cb83def5207ea74f0d8b3ae.png)

### CSS

```
img {
    filter: blur(5px);
        -webkit-filter: blur(5px);
        -moz-filter: blur(5px);
        -o-filter: blur(5px);
        -ms-filter: blur(5px);
    margin: -5px -10px -10px -5px;
}

div {
    overflow: hidden;
}
​ 
```

### HTML

```
<div><img src="http://placekitten.com/300" />​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​&lt;/div>​​​​​​​​​​​​ 
```

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2014-09-16T18:49:33.763

我能够使用

`transform: scale(1.03);`

应用于图像的属性。由于某种原因，在 Chrome 上，如果存在任何相对定位的父元素，则提供的其他解决方案将不起作用。

检查[http://jsfiddle.net/ud5ya7jt/](http://jsfiddle.net/ud5ya7jt/)

这样，图像将略微放大 3% 并且边缘将被裁剪，这在模糊图像上应该不是问题。它在我的情况下效果很好，因为我使用高分辨率图像作为背景。祝你好运！

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-04-29T16:21:51.383

我`-webkit-transform: translate3d(0, 0, 0);`与`overflow:hidden;`.

DOM：

```
<div class="parent">
    <img class="child" src="http://placekitten.com/100" />
</div> 
```

CSS：

```
.parent {
    width: 100px;
    height: 100px;
    overflow: hidden;
    -webkit-transform: translate3d(0, 0, 0);
}
.child {
    -webkit-filter: blur(10px);
} 
```

演示：http: [//jsfiddle.net/DA5L4/18/](http://jsfiddle.net/DA5L4/18/)

该技术适用于 Chrome34 和 iOS7.1

### 更新

[http://jsfiddle.net/DA5L4/50/](http://jsfiddle.net/DA5L4/50/)

如果您使用最新版本的 Chrome，则无需使用`-webkit-transform: translate3d(0, 0, 0);`hack。但它不适用于 Safari（webkit）。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2014-07-21T19:53:05.440

你也可以保留整个视频，你不必剪掉一些东西。
您可以在白色模糊的边缘上叠加嵌入阴影。

这看起来也很好:)

只需将此代码粘贴到您的视频的父级：

```
.parent {
    -webkit-box-shadow: inset 0 0 200px #000000;
       -moz-box-shadow: inset 0 0 200px #000000;
            box-shadow: inset 0 0 200px #000000;
} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-02-16T04:00:55.430

在 IMG 可以设置为**position:absolute**的许多情况下，您可以使用**clip**来隐藏模糊的边缘 - 而外部 DIV 是不必要的。

```
img {
    filter: blur(5px);
        -webkit-filter: blur(5px);
        -moz-filter: blur(5px);
        -o-filter: blur(5px);
        -ms-filter: blur(5px);
    position: absolute;
    clip: rect(5px,295px,295px;5px);
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-02-24T15:01:11.323

今天我自己解决了同样的问题，我想提出一个（目前）适用于主要浏览器的解决方案。此页面上的其他一些答案确实有效，但最近的更新，无论是浏览器还是操作系统，都使大多数/所有这些答案无效。

关键是将图像放置在容器中，并从其溢出：隐藏父容器中转换：缩放该容器。然后，模糊被应用到容器内的 img，而不是容器本身。

工作小提琴：[https ://jsfiddle.net/x2c6txk2/](https://jsfiddle.net/x2c6txk2/)

HTML

```
<div class="container">
    <div class="img-holder">
        <img src="https://unsplash.it/500/300/?random">
    </div>
</div> 
```

CSS

```
.container {
    width    : 90%;
    height   : 400px;
    margin   : 50px 5%;
    overflow : hidden;
    position : relative;
}

.img-holder {
    position  : absolute;
    left      : 0;
    top       : 0;
    bottom    : 0;
    right     : 0;
    transform : scale(1.2, 1.2);
}

.img-holder img {
    width          : 100%;
    height         : 100%;
    -webkit-filter : blur(15px);
    -moz-filter    : blur(15px);
    filter         : blur(15px);
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-01-25T08:46:01.610

只是对已接受答案的一些提示，如果您使用绝对位置，负边距将不起作用，但您仍然可以将顶部、底部、左侧和右侧设置为负值，并使父元素溢出隐藏。

如果您不知道图像大小，则有关将剪辑添加到位置绝对图像的答案有问题。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-10-18T06:22:20.037

将图像插入到一个 with`position: relative;`和`overflow: hidden;`

**HTML**

```
<div><img src="#"></div> 
```

**CSS**

```
div {
    position: relative;
    overflow: hidden;
}
img {
    filter: blur(5px);
        -webkit-filter: blur(5px);
        -moz-filter: blur(5px);
        -o-filter: blur(5px);
        -ms-filter: blur(5px);
} 
```

这也适用于可变大小的元素，例如动态 div。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2021-09-17T07:04:11.097

# 最新答案 (2021)

改用`backdrop-filter`！它像模糊一样`filter`但没有任何边缘，并且没有任何妥协，例如调整图像大小或缩放图像。

```
.blurred::after {
  content: "";
  position: absolute;
  width: 100%;
  height: 100%;
  backdrop-filter: blur(10px); /* apply the blur */
  pointer-events: none; /* make the overlay click-through */
}

.blurred {
  position: relative;
  width: 500px;
  height: 300px;
  background: no-repeat center center;
  background-image: url('https://besthqwallpapers.com/Uploads/26-5-2019/94041/thumb2-tesla-model-x-2019-exterior-front-view-new-gray-model-x.jpg');
  background-size: cover;
}
```

```
<div class="blurred"></div>
```

请记住，这在 IE 中[不受支持](https://caniuse.com/#feat=css-backdrop-filter)，并且仅在显式启用时才在 firefox 中有效。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-07-08T12:31:34.583

您可以通过裁剪图像并应用将模糊效果设置为 0 像素的包装元素来阻止图像重叠其边缘。这是它的样子：

**HTML**

```
<div id="wrapper">
  <div id="image"></div>
</div> 
```

**CSS**

```
#wrapper {
  width: 1024px;
  height: 768px;

  border: 1px solid black;

  // 'blur(0px)' will prevent the wrapped image
  // from overlapping the border
  -webkit-filter: blur(0px);
  -moz-filter: blur(0px);
  -ms-filter: blur(0px);
  filter: blur(0px);
}

#wrapper #image {
  width: 1024px;
  height: 768px;

  background-image: url("../images/cats.jpg");
  background-size: cover;

  -webkit-filter: blur(10px);
  -moz-filter: blur(10px);
  -ms-filter: blur(10px);
  filter: blur(10px);

  // Position 'absolute' is needed for clipping
  position: absolute;
  clip: rect(0px, 1024px, 768px, 0px);
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-06-01T07:39:16.653

最简单的方法是在包含图像的 div 中添加一个透明边框，并将其 display 属性设置为 inline-block，如下所示：

## CSS：

```
div{
margin: 2rem;
height: 100vh;
overflow: hidden;
display: inline-block;
border: 1px solid #00000000;
}

img {
-webkit-filter: blur(2rem);
filter: blur(2rem);
} 
```

## HTML

```
<div><img src='https://images.unsplash.com/photo-1557853197-aefb550b6fdc?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=375&q=80' /></div> 
```

[这是一个描述相同的代码笔： https](https://codepen.io/arnavozil/pen/ExPYKNZ) ://codepen.io/arnavozil/pen/ExPYKNZ

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-10-08T07:05:43.693

如果您使用背景图片，我发现最好的方法是：

```
filter: blur(5px);
margin-top: -5px;
padding-bottom: 10px;
margin-left: -5px;
padding-right: 10px; 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2012-09-01T02:05:37.820

您可以尝试在其他元素上添加边框：

DOM：

```
<div><img src="#" /></div> 
```

CSS：

```
div {
   border: 1px solid black;
}
img {
    filter: blur(5px);
} 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2014-11-05T22:05:46.950

我发现，就我而言，我不必添加包装器。

我刚刚添加了 -

```
margin: -1px; 
```

或者

```
margin: 1px; // any non-zero margin
overflow: hidden; 
```

我的模糊元素是绝对定位的。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2015-10-02T08:31:47.177

这是我提出的一个解决方案，可以保持 100% 的图像并且不需要裁剪：

基本上，我将图像平铺在 3x3 网格中，然后模糊所有内容，然后放大中心图像，在模糊后效果时有效地创建重复边缘，这有点奇怪，css3 没有内置的重复边缘。

链接到方法/代码： [如何使用 CSS3 模糊图像而不裁剪或褪色边缘？](https://stackoverflow.com/questions/32903140/how-to-blur-an-image-using-css3-without-cropping-or-fading-the-edges)

# android - Android 错误“无法找到明确的活动类”

> ID：12224321
> 
> 赞同：5
> 
> 时间：2012-09-01T02:00:16.563
> 
> 标签：android

我已经在这几个小时了，无法弄清楚。当我调试时，它给出了上述错误。我是新手，所以如果很明显我错过了什么，请保持温和...

这是从第一个活动中引入崩溃的代码，它仍然标记为“主要”：

```
//-- Menu Press --

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

//-- Handle item selection
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.menu_settings:
            Intent menu = new Intent(this, Menu.class);
            menu.putExtra("plWin", plWin);
            menu.putExtra("plLoss", plLoss);
            menu.putExtra("plDraw", plDraw);
            startActivity(menu);
            return true;
        case R.id.menu_reset:
            if (opCounter > plCounter) {
                plLoss++;
            }else if (opCounter < plCounter) {
                plWin++;
            }else {
                plDraw++;
            }
            opCounter = 0;
            plCounter = 0;
            return true;
        default:
            return false;
    }

} 
```

第二个活动，当前名为“菜单”：

```
public class Menu extends Activity {

Intent menu = getIntent();
int wins = menu.getIntExtra("plWin", 0);
int losses = menu.getIntExtra("plLoss", 0);
int draws = menu.getIntExtra("plDraw", 0);

private TextView winNum = null;
private TextView lossNum = null;
private TextView drawNum = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.menu);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

    //-- Win Counter --
    LinearLayout winView = (LinearLayout) findViewById(R.id.plLeft);
    winNum = (TextView) winView.findViewById(R.id.winNum);
    winNum.setText("" + wins);

    //-- loss Counter --
    LinearLayout lossView = (LinearLayout) findViewById(R.id.plMid);
    lossNum = (TextView) lossView.findViewById(R.id.lossNum);
    lossNum.setText("" + losses);

    //-- Draw Counter --
    LinearLayout drawView = (LinearLayout) findViewById(R.id.plRight);
    drawNum = (TextView) drawView.findViewById(R.id.drawNum);
    drawNum.setText("" + draws);
}

public void onBackPressed() {
    finish();
    super.onBackPressed();
} 
```

}

这是我的清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.sesto.life.counter"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="9"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".Main"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity 
        android:name="com.sesto.life.counter.Menu"
        android:label="@string/title_activity_menu" >

    </activity>  

</application> 
```

我正在寻找想法。谢谢大家

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-01T03:10:14.733

我只看到一个可能的错误是 at `Intent menu = new Intent(this, Menu.class);` 。请检查`Menu.class`是您的`Menu class`但不是`Android Menu View`（位于`android.view.Menu`）。logcat 告诉它`android.view.Menu`在`manifest`. 将鼠标指针悬停在上方`Menu.class`以检查您为此导入了哪个类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T02:09:21.417

改变

```
<activity 
        android:name="com.sesto.life.counter.Menu"
        android:label="@string/title_activity_menu" >

</activity> 
```

到

```
<activity 
    android:name=".Menu"
    android:label="@string/title_activity_menu" >

</activity> 
```

看看是否有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-28T09:46:27.237

当我忘记在清单文件中添加活动时收到此错误消息。

# python - 在 python 属性“内容”中使用美丽的汤

> ID：12224323
> 
> 赞同：1
> 
> 时间：2012-09-01T02:00:49.227
> 
> 标签：python, beautifulsoup

我正在使用布尔“Hello！Python”中的以下代码：

```
import urllib2
from bs4 import BeautifulSoup
import os

def get_stock_html(ticker_name):
    opener = urllib2.build_opener(urllib2.HTTPRedirectHandler(),urllib2.HTTPHandler(debuglevel=0),)
    opener.addhaders = [('User-agent', "Mozilla/4.0 (compatible; MSIE 7.0; " "Windows NT 5.1; .NET CLR 2.0.50727; " ".NET CLR 3.0.4506.2152; .NET CLR 3.5.30729)")]
    url = "http://finance.yahoo.com/q?s=" + ticker_name
    response = opener.open(url)
    return ''.join(response.readlines())

def find_quote_section(html):
    soup = BeautifulSoup(html)
    # quote = soup.find('div', attrs={'class': 'yfi_rt_quote_summary_rt_top'})
    quote = soup.find('div', attrs={'class': 'yfi_quote_summary'})
    return quote

def parse_stock_html(html, ticker_name):
    quote = find_quote_section(html)
    result = {}
    tick = ticker_name.lower()

    result['stock_name'] = quote.find('h2').contents[0]

if __name__ == '__main__':
    os.system("clear")
    html = get_stock_html('GOOG')
    # print find_quote_section(html)
    print parse_stock_html(html, 'GOOG') 
```

收到以下错误：

```
Traceback (most recent call last):
  File "dwlod.py", line 33, in <module>
    print parse_stock_html(html, 'GOOG')
  File "dwlod.py", line 25, in parse_stock_html
    result['stock_name'] = quote.find('h2').contents[0]
AttributeError: 'NoneType' object has no attribute 'contents' 
```

我是一个新手，真的不知道该怎么做。书是错的吗？

**添加**

我刚刚替换`result['stock_name'] = quote.find('h2').contents[0]`为：

```
x = BeautifulSoup(html).find('h2').contents[0]
return x 
```

现在，什么都没有返回，但错误不再出现。那么，原来的python语法有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T03:17:46.200

虽然雅虎财经已经有一段时间没有真正改变他们的布局，但似乎他们可能在这本书出版后稍微调整了一下，你需要的信息，比如`h2`包含股票代码的信息，可以在`yfi_rt_quote_summary`其中找到容器位于某个东西的上放`yfi_quote_summary`

```
def find_quote_section(html):
    soup = BeautifulSoup(html)        
    quote = soup.find('div', attrs={'class': 'yfi_rt_quote_summary'})
    return quote 
```

另请注意，`result`如果我们想打印某些东西，我们需要`None`返回：

```
def parse_stock_html(html, ticker_name):
    quote = find_quote_section(html)
    result = {}
    tick = ticker_name.lower()
    result['stock_name'] = quote.find('h2').contents[0]
    return result

>>> print parse_stock_html(html, 'GOOG')
{'stock_name': u'Google Inc. (GOOG)'}
>>> 
```

顺便说一句，`find`只需找到第一个匹配项。

```
>>> help(BeautifulSoup(html).find)
find(self, name=None, attrs={}, recursive=True, text=None, **kwargs) method of BeautifulSoup.BeautifulSoup instance
    Return only the first child of this Tag matching the given
    criteria. 
```

这似乎是空的，`BeautifulSoup`也有`findall`返回所有匹配项。

```
>>> BeautifulSoup(html).findAll('h2')[3].contents[0]
u'Google Inc. (GOOG)' 
```

似乎第四个值是我们正在寻找的那个......不过，我确定你没有这样做，但请不要每次都解析整个文档，这可能会非常昂贵。

# java - 为什么/如何对象没有 init 方法？

> ID：12224324
> 
> 赞同：-4
> 
> 时间：2012-09-01T02:00:48.823
> 
> 标签：java, object, methods, init

这可能是一个简单的 OOP 问题，我是 Java 的新手，所以我想知道为什么对象没有 init 方法，如果对象没有，那么它在哪里使用，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T02:37:28.167

在 Java 中，您有构造函数来初始化实例。如果您正在创建一个框架，那么为现有实例引入您自己的类似 init 的方法（构建后）并不是一个糟糕的模式，因为有更安全的方法可以在构建后而不是在构建期间访问成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T02:12:07.647

对象具有初始化它的构造函数。虽然没有init方法。

# c++ - 使用 C++ 尾随返回类型时 auto 是什么意思？

> ID：12224325
> 
> 赞同：15
> 
> 时间：2012-09-01T02:01:31.893
> 
> 标签：c++, c++11

而不是平时

```
void foo (void ) {
    cout << "Meaning of life: " << 42 << endl;
} 
```

`C++11`允许是另一种选择，使用追踪回报

```
auto bar (void) -> void {
    cout << "More meaning: " << 43 << endl;
} 
```

**在后者中 -`auto`旨在代表什么？**

另一个例子，考虑函数

```
auto func (int i) -> int (*)[10] {

} 
```

**`auto`同样的问题，这个例子中的含义是什么？**

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-01T02:03:38.247

一般来说，`auto`C++11 中的 new 关键字表示表达式的类型（在这种情况下是函数的返回类型）应该从表达式的结果中推断出来，在这种情况下，在`->`.

没有它，函数将没有类型（因此不是函数），编译器最终会感到困惑。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-09-01T05:14:01.183

考虑代码：

```
template<typename T1, typename T2>
Tx Add(T1 t1, T2 t2)
{
    return t1+t2;
} 
```

这里的返回类型取决于表达式`t1+t2`，而表达式又取决于`Add`调用方式。如果您将其称为：

```
Add(1, 1.4); 
```

`T1`会`int`，而且`T2`会`double`。结果**类型**现在是`double`(int+double)。因此**`Tx`**应该（必须）使用`auto`和指定`->`

```
 template<typename T1, typename T2>
    auto Add(T1 t1, T2 t2) -> decltype(t1+t2)
    {
        return t1+t2;
    } 
```

[你可以在我的文章](http://www.codeproject.com/Articles/71540/Explicating-the-new-C-standard-C-0x-and-its-implem#TrailingReturn)中读到它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-25T22:47:36.947

我认为答案相对简单，这里的其他答案未涵盖。

基本上，没有`auto`，就会有歧义，因此委员会决定“您需要`auto`在这里避免这些歧义”。

```
class A {
    T B;
};

class B;

A* f();

f()->B; 
```

现在，是什么`f()->B`意思？它是一个没有参数的函数，它返回一个`B`（带有尾随返回类型语法），还是一个对 的函数调用`A* f()`？

如果我们在尾随返回类型语法的开头没有`auto`required，我们将无法判断。使用`auto`，很明显这是一个函数调用。

因此，为了避免此处的不明确性，我们只*需要* `auto`在任何使用尾随返回类型的函数声明的开头。

# java - Java-Eclipse 读取 excel 文件时出错

> ID：12224326
> 
> 赞同：1
> 
> 时间：2012-09-01T02:01:39.547
> 
> 标签：java, android, database, excel

我是java新手，但是学得很快。我正在尝试让我的 Android 应用程序从 EditText 获取用户输入，在 Excel 列中搜索匹配的字符串，然后返回另一列（同一行）的值。

我在构建路径上添加了一个 jxl.jar，我的代码似乎应该可以工作。自学，我正在慢慢弄清楚调试。问题似乎是找不到源android.jar（如果我没记错的话）。我找到了它，现在我得到“源附件不包含文件 instrumentation.class 的源”

这是我第一个使用 excel 的应用程序。我是否需要以某种方式解决 Android 清单？

这是我的代码，以防万一，非常感谢任何帮助！：

```
public class Frame_Bore extends Activity {
private String inputFile;

public void setInputFile(String inputFile) {
    this.inputFile = "c:/Desktop/AAS Work/PDA Programs/JBDB.xls";
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.framebore);

    Button Btn1 = (Button) findViewById(R.id.button1);
    final EditText T1 = (EditText) findViewById(R.id.et1);
    final EditText T2 = (EditText) findViewById(R.id.et2);

    Btn1.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            String t1Value = T1.getText().toString();
            File inputWorkbook = new File(inputFile);
            Workbook w;
            String bore = null;

            try {
                w = Workbook.getWorkbook(inputWorkbook);
                Sheet sheet = w.getSheet("Frame-Bore");

                int y = 6;
                while (y < 200) {
                    int x = 2;
                    Cell columnB = sheet.getCell(x, y);
                    String motorframe = columnB.getContents();

                    if (motorframe == t1Value) {
                        Cell columnC = sheet.getCell(x + 1, y);
                        bore = columnC.getContents();
                    } else {
                        y = y + 1;
                    }

                }
            } catch (BiffException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            } finally {
                T2.setText("" + bore);
            }
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T21:24:53.220

将文件放入 assets 文件夹并像这样访问它：

```
InputStream is = null;
        try {
            is = context.getAssets().open("JBDB.xls");
            workbook = Workbook.getWorkbook(is);

        } catch (IOException e) {

            e.printStackTrace();
        } catch (BiffException e) {

            e.printStackTrace();

        }
        if(workbook!=null)
        sheet = workbook.getSheet("Frame-bore"); 
```

`context`是您的主要活动上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T03:01:49.387

您正在尝试从您的模拟器访问 c: 驱动器（“c:/Desktop/AAS Work/PDA Programs/JBDB.xls”），这是不可能的。如果您在设备中运行它，您需要将您的 excel 文件放在资源文件夹或 SD 卡中。

模拟器具有虚拟 SD 卡，其局限性在于它不能直接从计算机访问任何其他驱动器。但是，您可以通过创建一个代表您的 android 应用程序执行操作的 web 服务来做到这一点。您需要从您的 android 应用程序中调用此 Web 服务。

# android - Android 禁用 ActionBarSherlock 顶部图标单击

> ID：12224327
> 
> 赞同：1
> 
> 时间：2012-09-01T02:02:04.637
> 
> 标签：android, actionbarsherlock

我一直在寻找一种方法来禁用 ABSherlock 操作栏中的顶部图标单击。设置这个`getSupportActionBar().setDisplayHomeAsUpEnabled(false);`似乎也不起作用。目前我的顶部图标点击是可点击的，只要你点击它，它就会突出显示整个图标。我不想要返回功能，我只想让它不可点击。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-01T02:13:57.570

[`setHomeButtonEnabled(boolean)`](http://developer.android.com/reference/android/app/ActionBar.html#setHomeButtonEnabled(boolean))

> 启用或禁用操作栏一角的“主页”按钮。（请注意，这是操作栏上的应用程序主页/向上功能，而不是系统范围的主页按钮。）
> 
> 对于目标为 < API 14 的包，这默认为 true。对于目标为 API 14 或更高版本的包，应用程序应调用此方法以启用与 home/up 功能的交互。
> 
> 设置`DISPLAY_HOME_AS_UP`显示选项将自动启用主页按钮。

# objective-c - XCode 4.4.1 忽略 LD_RUNPATH_SEARCH_PATHS

> ID：12224328
> 
> 赞同：7
> 
> 时间：2012-09-01T02:02:17.550
> 
> 标签：objective-c, xcode, cocoa, sbjson

我正在处理 XCode 的一个奇怪行为：

```
dyld: Library not loaded: /Library/Frameworks/SBJson.framework/Versions/A/SBJson 
```

基本上它忽略了实际上是我的`Runpath Search Path`( ) 配置。`LD_RUNPATH_SEARCH_PATHS``@loader_path/../Frameworks`

我现在无法加载任何嵌入式框架：/

`otool`说

```
otool -L /Users/kilian/Library/Developer/Xcode/DerivedData/r-ghohkslxtxgpnuepmblogfjtuefx/Build/Products/Debug/r.app/Contents/MacOS/r
/Users/kilian/Library/Developer/Xcode/DerivedData/r-ghohkslxtxgpnuepmblogfjtuefx/Build/Products/Debug/r.app/Contents/MacOS/r:
  /System/Library/Frameworks/Cocoa.framework/Versions/A/Cocoa (compatibility version 1.0.0, current version 19.0.0)
  /Library/Frameworks/SBJson.framework/Versions/A/SBJson (compatibility version 1.0.0, current version 37.0.0)
  /System/Library/Frameworks/Foundation.framework/Versions/C/Foundation (compatibility version 300.0.0, current version 945.0.0)
  /usr/lib/libobjc.A.dylib (compatibility version 1.0.0, current version 228.0.0)
  /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 169.3.0)
  /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit (compatibility version 45.0.0, current version 1186.0.0) 
```

PS 如果您想知道我是否将副本添加到框架构建阶段，答案是肯定的。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-01T06:19:41.557

## 短版

问题是，当您构建时`SBJSON.framework`，安装名称未配置为使用`@rpath`. 因此，当您的应用程序加载动态库时，它会查找`/Library/Frameworks`而不是您的应用程序的运行路径告诉它查找的位置。

要修复它，您需要更改`SBJSON.framework`目标上的构建设置。将*动态库安装名称*设置更改为`@rpath/${EXECUTABLE_PATH}`. 然后再次构建，链接到新构建的框架，你就可以开始了。

## 长版

框架的核心只是动态库。这意味着库中包含的代码不会嵌入到您的应用程序中，而是*在运行时*`SBJSON.framework`从包中拉入。为此，您的应用需要知道在哪里寻找动态库。

 *这样做的方式是，当您链接到一个框架时，链接器实际上并没有将整个库嵌入到您的应用程序中。相反，它只是添加了一小部分，告诉应用程序在运行时在哪里可以找到库。当然，这意味着编译器必须知道库在运行时的位置。它通过查看动态库的“安装名称”来查找该信息。

动态库的“安装名称”本质上只是库的预期路径。从历史上看，大多数动态库和框架都是在系统范围内共享的。`Foundation.framework`和之类的东西`CoreData.framework`，例如，存在于 中`/System/Library/Frameworks`，所有应用程序都可以合理地期望在那里找到它们。因此，在`CoreData.framework`构建时，其安装名称设置为`/System/Library/Frameworks/...`. 当 Xcode 将您的应用程序与 Core Data 链接时，它会查看框架的安装名称，并告诉它在应用程序启动时在该路径的框架中加载。

这一切都很好，但是当您需要在应用程序中嵌入框架时，它对您没有帮助。您不*知道*应用程序在运行时将位于系统的哪个位置。用户可以从 运行它`/Applications`，但他们也可以从 运行它`~/Downloads`。您无法提供单一路径作为安装名称，该名称在运行时始终正确指向框架。

为了解决这个问题，您可以将框架的安装名称设置为`@loader_path/../Frameworks`. 当动态加载器看到`@loader_path`时，它会将其替换为当前正在加载的应用程序的路径。使用此安装名称将允许将框架安装在`Frameworks`任何应用程序的文件夹中。

然而，事情仍然不完美。该框架仍在规定它应该放在哪里。例如，如果另一个应用程序想要将框架放在`Libraries`文件夹中，那么它就很不走运。框架负责它可以放置的位置，而不是应用程序。这是依赖树的反转，并不理想。无论其他框架做什么，应用程序都应该能够从*它*想要存储它的任何地方加载框架。

因此，在 OS X 10.5`@rpath`中引入了。如果 dylib 或框架的安装名称以 开头`@rpath`，则加载器将转身询问应用程序“运行路径搜索路径”是什么，并将其替换。这允许应用程序指定其框架的位置。通过使用`@rpath`，框架将决策委托给应用程序。应用程序可以根据需要使用`@loader_path`，也可以根据需要指定绝对路径。它甚至可以指定一整套应用程序将使用的共享文件夹。

## 你的问题

所以，关于你的问题。您正确地将应用程序的运行路径搜索路径设置为`@loader_path/../Frameworks`. 但是，框架的安装名称没有使用`@rpath`; 事实上，它仍然使用硬编码的路径来`/Library/Frameworks/...`. 由于框架的安装名称不使用`@rpath`，因此甚至不咨询应用程序的运行路径。它只是试图从`/Library`文件夹中链接 SBJSON。由于它不存在，因此您的应用程序在启动之前就崩溃了。

您需要更改 SBJSON 框架的安装名称以使用`@rpath`. 将*动态库安装名称*设置为`@rpath/${EXECUTABLE_PATH}`。（`${EXECUTABLE_PATH}`是内部动态库的相对路径，来自包含框架的文件夹。）

使用新安装名称构建框架后，您应该能够链接到新框架，确保将其复制到应用程序包的`Frameworks/`文件夹中，一切顺利！

`@rpath`PS 如果这还不是很清楚，Mike Ash 对和朋友们做了很好的评论。你可以[在这里找到它](http://www.mikeash.com/pyblog/friday-qa-2009-11-06-linking-and-install-names.html)。*

# ruby-on-rails - FactoryGirl 是否在每次创建时创建记录；从不在 rspec 中的控制台工作

> ID：12224329
> 
> 赞同：1
> 
> 时间：2012-09-01T02:03:06.323
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec

我在规范中有以下代码：

```
it 'should save some favorite locations' do
  user=FactoryGirl.create(:user)  # not adding anything 
```

它似乎没有向数据库写入任何内容。FactoryGirl 是否打算在模型规范中写一些东西？如果我从 rails 控制台运行，它确实会添加到数据库中。为什么 rspec 中的测试没有运行这个？这就是它的预期工作方式吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T03:47:00.520

如果您已将 rspec 配置为对每个测试使用数据库事务，或使用数据库截断，则创建的任何记录都将回滚或销毁。

要检查它是否真的添加了一些东西，你可以尝试：

```
it 'should save some favorite locations' do
  user=FactoryGirl.create(:user)  # not adding anything
  User.find(user.id).should_not be_nil # ensure it is in database 
```

如果通过，则将其添加到数据库中。

如果您在测试中使用数据库事务，则每次测试后都会回滚数据库。如果您需要使用在多个测试中创建的记录，您可以使用：

```
before(:all) do
  @user=FactoryGirl.create(:user)
end
after(:all) do
  @user.destroy # with create in before(:all), it is not in a transaction
                # meaning it is not rolled back - destroy explicitly to clean up.
end 
```

# ruby - 在延迟的 sinatra 请求中使用 send_file

> ID：12224331
> 
> 赞同：4
> 
> 时间：2012-09-01T02:03:30.167
> 
> 标签：ruby, sinatra

我试图在异步 sinatra 请求期间返回一个文件，如下所示：

```
aget "/test" do
  if(File.exists?("test.tar"))
    send_file("test.tar", :filename => "test.tar", :type => "application/octet-stream")
    return
  end

  EM.defer(proc{
      # create test.tar
    },
    proc{ |r|
      send_file("test.tar", :filename => "test.tar", :type => "application/octet-stream")
    }) 
```

但是，当我这样做时，似乎出现错误：

```
wrong number of arguments (0 for 1)
file: file.rb
location: call
line: 29 
```

回溯：

```
/var/lib/gems/1.9.1/gems/rack-1.4.1/lib/rack/file.rb in call
    def call(env)
/var/lib/gems/1.9.1/gems/async_sinatra-1.0.0/lib/sinatra/async.rb in block in body
    response.body = Array(async_handle_exception {response.body.call})
/var/lib/gems/1.9.1/gems/async_sinatra-1.0.0/lib/sinatra/async.rb in async_handle_exception
    yield
/var/lib/gems/1.9.1/gems/async_sinatra-1.0.0/lib/sinatra/async.rb in body
    response.body = Array(async_handle_exception {response.body.call})
/var/lib/gems/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb in invoke
    body(res.pop)
/var/lib/gems/1.9.1/gems/async_sinatra-1.0.0/lib/sinatra/async.rb in block in async_catch_execute
    invoke { halt h }
/var/lib/gems/1.9.1/gems/async_sinatra-1.0.0/lib/sinatra/async.rb in async_handle_exception
    yield
/var/lib/gems/1.9.1/gems/async_sinatra-1.0.0/lib/sinatra/async.rb in async_catch_execute
    async_handle_exception do
/var/lib/gems/1.9.1/gems/async_sinatra-1.0.0/lib/sinatra/async.rb in block in async_schedule
    native_async_schedule { async_catch_execute(&b) }
/var/lib/gems/1.9.1/gems/eventmachine-1.0.0.beta.4/lib/eventmachine.rb in call
    end.each { |j| j.call }
/var/lib/gems/1.9.1/gems/eventmachine-1.0.0.beta.4/lib/eventmachine.rb in block in run_deferred_callbacks
    end.each { |j| j.call }
/var/lib/gems/1.9.1/gems/eventmachine-1.0.0.beta.4/lib/eventmachine.rb in each
    @next_tick_mutex.synchronize do
/var/lib/gems/1.9.1/gems/eventmachine-1.0.0.beta.4/lib/eventmachine.rb in run_deferred_callbacks
    @next_tick_mutex.synchronize do
/var/lib/gems/1.9.1/gems/eventmachine-1.0.0.beta.4/lib/eventmachine.rb in run_machine
    run_machine
/var/lib/gems/1.9.1/gems/eventmachine-1.0.0.beta.4/lib/eventmachine.rb in run
    run_machine
/var/lib/gems/1.9.1/gems/thin-1.3.1/lib/thin/backends/base.rb in start
    EventMachine.run(&starter)
/var/lib/gems/1.9.1/gems/thin-1.3.1/lib/thin/server.rb in start
    @backend.start
/var/lib/gems/1.9.1/gems/rack-1.4.1/lib/rack/handler/thin.rb in run
    server.start
/var/lib/gems/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb in run!
    handler.run self, :Host => bind, :Port => port do |server|
/var/lib/gems/1.9.1/gems/sinatra-1.3.2/lib/sinatra/main.rb in block in <module:Sinatra>
    at_exit { Application.run! if $!.nil? && Application.run? }

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T12:56:38.350

您收到的错误是因为您使用的函数需要 1 个参数并且您没有提供任何参数。如果您可以向我们展示第 29 行附近的代码，我或有人可以为您指出。

# android - 从活动的 OnCreate 启动的 AsyncTask，仅当此类 AsyncTask 当前未运行时。我该如何实现呢？

> ID：12224335
> 
> 赞同：2
> 
> 时间：2012-09-01T02:03:55.643
> 
> 标签：android, multithreading, android-asynctask, threadpool

在打开一个新屏幕（活动）时，我希望我的程序启动一个新的异步任务，它将永远每隔 X 间隔运行一次。如果另一个已经在运行，我不想创建一个。

我已经尝试了很多关于全局变量、共享首选项标志等的事情。有没有办法可以扩展 AsyncTask 但将线程池更改为 1，这样就不会启动重复项？

或者这个问题有更明显的解决方案吗？

注意：首选项的问题是，如果设备重新启动，它可能会将标志保存为永久“真”，表示有一个任务正在运行，而实际上没有任务正在运行，从而阻止新任务运行。

我愚蠢地尝试这样的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T02:13:00.370

将 Asynctask 存储在字段中

```
task =  new NewAsyncTask().execute(); 
```

每次检查是否完成并重新分配给同一个字段 new Asynctask

```
if(task.getStatus() == AsyncTask.Status.FINISHED)
  task =  new NewAsyncTask().execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T02:12:17.110

如果您希望每隔一秒在后台运行一些东西，那么您将需要使用 Service 或 IntentService。事实上，如果您使用服务，那么您将不必担心线程重复，因为除非您创建多个服务，否则总是只有一个在后台运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T02:33:44.907

使用单例模式，例如：

```
public class SingletonTask extends AsyncTask {
  private static SingletonTask instance;

  public static startTask(params, callback) {
    if (instance == null) {
      instance = new SingletonTask(params, callback);
      instance.execute();
    }
  }
  ....

  onPostExecute() {
    instance = null;
  }
} 
```

然后从您的活动中调用`SingletonTask.startTask(...)`.

免责声明：即时键入，不会编译。

# ios - 即使我的应用程序没有运行，也保证在网络重新连接后上传

> ID：12224336
> 
> 赞同：8
> 
> 时间：2012-09-01T02:04:02.510
> 
> 标签：ios, multitasking, reachability

我正在指定一个 iOS 应用程序（将在我们公司之外构建），它将用户的数据条目上传到服务器。如果设备未连接到 Internet，我们希望将数据保存在设备上，并在重新连接网络时上传。（该应用程序将主要在大部分时间断开连接的 iPod Touch 设备上运行）。

如果用户在重新连接网络后解锁设备并重新打开我们的应用程序，那么上传到服务器应该很容易，因为应用程序正在运行。

但是，如果应用程序未运行，“未运行”可能意味着以下一项或多项：

*   设备已重启
*   用户已锁定设备并且它就在他的口袋里
*   应用程序崩溃
*   用户退出应用
*   用户开始使用其他应用程序，因此我们的应用程序不再在前台运行
*   还有其他情况吗？

在上述情况下，是否有办法（最好是省电的方式）确保在 Internet 连接恢复后立即上传本地数据？答案是否因上述哪种情况导致应用程序无法运行而有所不同？

设备是否需要最低 iOS 版本才能使上述部分（或全部）未运行的案例在应用程序未运行时仍能上传？

*如果这些是明显的新手问题，我深表歉意——我不是 iOS 专家。*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T13:43:26.783

[Instapaper](http://blog.instapaper.com/post/24293729146)和[News.me](http://blog.news.me/post/21643399885/introducing-paper-boy-automatically-download-your-news)（该技术的先驱）使用了一种有趣的技术，您可以使用区域监控来启动后台下载或上传。Marco (Instapaper) 在博客中谈到了他与 Apple 的沟通（在[Build and Analyze 播客的第 80 集中），因此它](http://5by5.tv/buildanalyze/80)*应该*在 App Store 中被允许。

* * *

**简而言之**，该技术是您设置某些区域（地理围栏），例如“家”或“工作”，并响应`locationManager:didEnterRegion:`（和类似的）回调。一旦您进入预先指定的区域，您的应用将从后台唤醒，您可以检查是否有任何数据要上传。

这种技术不能*保证*在网络重新连接时上传数据，但它可以让您的应用程序在 iPod Touch 用户回到他们的 WiFi 网络时自动上传信息。

这应该很可能是每天至少一次，这可能对您来说足够频繁，也可能不够频繁。您可以在尝试初始上传时添加时间戳，并在成功获取服务器上事件（数据条目）的正确顺序后随上传一起发送。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T03:19:00.267

没有办法确保这一点。如果您的应用程序“未运行”（根据您的问题中描述的定义），它将无法响应设备网络状态的变化。它应该设置为在下次应用程序再次运行时恢复上传操作。

编辑：您描述的某些案例可能确实为您的应用程序提供了不同的机会。具体来说，如果用户通过按下主页按钮“退出”应用程序或在前台启动另一个应用程序，您的应用程序可能会继续在后台运行，并可能响应网络可达性的变化。

可以在后台执行的操作的性质和持续时间都有很好的记录，并且支持多任务处理的任何版本的 iOS 都支持。我建议您查看与[App States 和 Background Services](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)相关的文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T09:32:02.980

如果您正在构建一个 RESTful API，那么我建议您使用[RestKit](https://github.com/RestKit/RestKit)，它`request queue`可以检查设备上的网络状态，并在确保网络访问权限后开始上传。您可以在此处阅读更多相关信息：http: [//mobile.tutsplus.com/tutorials/iphone/advanced-restkit-development_iphone-sdk/](http://mobile.tutsplus.com/tutorials/iphone/advanced-restkit-development_iphone-sdk/)。阅读有关请求队列和后台下载/上传的部分。需要注意的是，[RestKit](https://github.com/RestKit/RestKit)是一个大图书馆，有它的优点和缺点。我不完全确定这个队列如何与应用程序生命周期一起工作，如果它保存请​​求队列，即使应用程序被终止。您将不得不对此进行调查。RestKit 确实支持后台上传/下载，但如前所述，我认为如果应用程序终止且不处于后台状态，则无法进行任何上传。

如果 API 不是 Rest，我不建议使用 RestKit。

您可以在此处下载并试用 RestKit：[https](https://github.com/RestKit/RestKit) ://github.com/RestKit/RestKit 。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T13:12:36.293

*   设备已重启->**真的无法恢复，除非您打开应用程序！！！**
*   用户已锁定设备并将其放在口袋里 --> 应用程序应用程序状态为 UIApplicationStateInactive 但它正在后台运行。**您仍然可以对通知和加速度计事件做出反应。尝试可达性类并记录更改！**
*   应用程序崩溃 -->**没办法，除非打开应用程序**
*   用户退出应用程序-> 应用程序位于后台。在那里，您有最多**10 分钟**的**完全**使用您的应用程序的限制（就像应用程序“Pastebot”一样）
*   用户开始使用其他应用程序，因此我们的应用程序不再在前台运行 -->**与用户退出应用程序相同**

在多任务处理方面，Apple 说：

*   *真正的多任务处理*仅适用于某些用途，因为有音频背景播放、VOIP（如 Skype）、导航应用程序
*   所有其他应用程序可以在应用程序关闭后/在后台请求特定的时间，以完成某些任务（如发送电子邮件、短信或上传/下载重要数据）

来自开发文档的重要引用：

> 您的应用委托的**applicationDidEnterBackground:**方法大约有 5 秒的时间来完成所有任务并返回。在实践中，此方法应尽快返回。如果该方法在时间用完之前没有返回，您的应用程序将被终止并从内存中清除。如果您仍然需要更多时间来执行任务，请调用**beginBackgroundTaskWithExpirationHandler:**方法来请求后台执行时间，然后在辅助线程中启动任何长时间运行的任务。无论您是否启动任何后台任务，applicationDidEnterBackground: 方法仍必须在 5 秒内退出。

# .net - SqlCommand.BeginExecuteNonQuery 回调 - WPF - 调用失败

> ID：12224338
> 
> 赞同：0
> 
> 时间：2012-09-01T02:04:39.030
> 
> 标签：.net, wpf, asynchronous, ado.net

从链接中的代码在这一行得到一个错误

```
this.Invoke(new DisplayInfoDelegate(DisplayStatus),
                            String.Format("Ready(last error: {0}", ex.Message)); 
```

是的，我知道 Invoke 不是 WPF。
此示例来自 Forms，我找不到 WPF 示例。
我需要修改什么才能使其在 WPF 中工作？

[SqlCommand.BeginExecuteNonQuery 方法（AsyncCallback，对象）](http://msdn.microsoft.com/en-us/library/7b6f9k7k%28v=vs.100%29.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T07:12:22.993

任何 UI 操作都必须在 UI 线程中执行。所以你应该编组代表。它可以是 Dispatcher.Invoke 或 Dispatcher.BeginInvoke。

任务也可以这样做。这是示例：[http ://www.albahari.com/threading/part5.aspx#_Task_Schedulers_and_UIs](http://www.albahari.com/threading/part5.aspx#_Task_Schedulers_and_UIs)

# mysql - 如何在网上商店中为变体管理建立数据库

> ID：12224340
> 
> 赞同：0
> 
> 时间：2012-09-01T02:05:08.787
> 
> 标签：mysql, e-commerce, webshop

我正在寻找有关如何为拍卖方设置数据库的指南。

我的问题是，有很多不同的产品类型——比如绘画、衣服、电脑等。它们有不同的规格，应该可以在拍卖中只设置尺寸为 L 的产品 A——或者整个产品库存例如

在这种情况下，我应该如何构建我的数据库以获得最佳性能和编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T02:18:28.450

我建议以下数据库/对象结构：

```
[Auction] n..1 [Category] 1..n [Variation Attribute] 1..n [Attribute Value] 
```

然后，拍卖有一个类别和几个引用变体属性的属性值：

```
[Auction] = [Category], [Name], [Description]
[Auction_AttrVal] = [AuctionID], [VarAttrID], [AttrValID] 
```

首先，您可以拥有某种类别表，其中包含“绘画”、“衣服”、“计算机”等项目。拍卖/产品被分配到一个类别。

然后每个类别定义此特定类别的变体属性。例如，“衣服”类别的“尺寸”或“计算机”类别的“CPU”。您还可以为变体属性添加预定义值，以限制变体的数量并避免“3GhZ”与“3 GhZ”之类的差异。

这种机制还允许轻松过滤搜索结果。您选择一个类别并简单地将所有变体属性加载为过滤器（或将标志添加到属性以将其声明为这样）并将过滤值提供给最终用户。

此外，您可以为类别强制设置变体属性，以强制创建拍卖的用户（我假设它是消费者对消费者）为他们的拍卖提供足够的信息。

代码可能非常通用和简单。数据库结构具有高度的灵活性和可扩展性。性能比一张桌子好得多。您可能应该为表创建一个索引（为 field `AuctionID`）`Auction_AttrVal`。如果没有正确解释数据库结构，请告诉我。

# facebook - 让 facebook 应用程序在子目录中运行

> ID：12224350
> 
> 赞同：0
> 
> 时间：2012-09-01T02:06:26.733
> 
> 标签：facebook, connect

我希望能够有一个在子目录中运行的 Facebook 应用程序（例如示例应用程序）。

例如，我的网站的域是：example.com。

我创建了单独的测试和生产站点。因此，www.example.com/test 是测试站点，生产站点是 www.example.com。

我正在我的 Joomla 测试站点上使用 JomSocial 测试 Facebook Connect，并希望使用我的 Facebook 登录名登录到 www.example.com/test。

我设置了一个 Facebook 应用程序如下：

应用域：example.com 站点 URL：[http ://www.example.com/test](http://www.example.com/test)

当我从测试站点使用 Facebook Connect 登录时，它会将我带回到 www.example.com 而不是 www.example.com/test/

所以我的问题是，如何设置我的 Facebook 应用程序示例，以便在我从测试站点登录时返回到我的测试站点？

我期待着您的回音。

非常感谢，

乔伊斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T09:44:11.890

您可以通过转到 joomla/components/jomsocial/configuration 来更改用户在登录时进入的页面。在右侧，您将看到更改登录/注销的选项。

# cross-browser - 谷歌网页字体和 IE9

> ID：12224357
> 
> 赞同：0
> 
> 时间：2012-09-01T02:07:31.237
> 
> 标签：cross-browser, internet-explorer-9, google-webfonts

我正在开发一个使用嵌入式 Google 网络字体的登录页面。当我在本地在 IE9 中测试页面时，它默认以 IE9 兼容性视图和 IE7 文档模式呈现——但它看起来很好（我相信它这样做是因为本地文件被认为是“内联网”，而 IE9 会自动在兼容性视图中呈现这些文件）。

然而，当我手动将浏览器和文档模式切换到 IE9 时——这是页面在实际服务时呈现的方式——谷歌网络字体不再工作。

谷歌网络字体应该可以在 IE9 上运行，那么这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:46:33.287

在本地查看页面时，这似乎是跨域问题或其他问题。相同的页面，一旦上传到我的服务器，默认以 IE9 标准模式呈现，谷歌字体工作正常。

# google-app-engine - 在 Google App Engine 上实施关键字搜索？

> ID：12224364
> 
> 赞同：0
> 
> 时间：2012-09-01T02:09:37.647
> 
> 标签：google-app-engine, search, google-cloud-datastore

我正在尝试在 GAE 的数据存储中实现对某个实体类型的关键字/标签搜索：

```
class Docs(db.Model):
    title = db.StringProperty()
    user = db.StringProperty()
    tags = db.StringListProperty() 
```

我还编写了一个非常基本的搜索函数（使用虚假的标签列表，而不是数据存储值），它接受一个查询字符串并将其与每组标签匹配。它根据与标签匹配的查询词数对 Docs 进行排名。这几乎就是我需要做的所有事情，除了使用实际的数据存储。

我不知道如何获取实际的数据存储值。为了使我的搜索功能正常工作，我需要数据存储中所有实体的列表，这是不可能的 (?)。

我还尝试研究 GAE 的实验性全文搜索和关系索引实体作为一种在不使用我编写的函数的情况下搜索数据存储的方法。两者都没有成功。

关于如何根据标签搜索实体的任何其他想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T04:06:17.947

这是一个非常简单的查询，如果您需要查找所有带有“findme”标签的文档，很简单：

```
num_results = 10
query = Docs.all().filter("tags in", "findme")
results = query.fetch(num_results) # get list of results 
```

有据可查： [https ://developers.google.com/appengine/docs/python/datastore/queries](https://developers.google.com/appengine/docs/python/datastore/queries)

# arrays - 减少多个数组中相似元素的最有效顺序，因此数组有 0 个元素

> ID：12224367
> 
> 赞同：0
> 
> 时间：2012-09-01T02:10:17.150
> 
> 标签：arrays

有人可以帮助我解决这个问题吗？我需要找出一种方法以最佳/最快的顺序消除多个数组中的相似元素，以便将我的数组驱动为 0 个元素。IE 如果我有以下数组：

```
 'a    {1,12,10,31}'
         'b    {12,21}'
         'c    {12,18,5,21}'
         'd    {12,18,21}' 
```

我想删除 12 -> 21 （b 完成）然后 -> 18 （d 完成）

这个问题确实与软件不兼容有关......任何想法都会有所帮助。谢谢，帕特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T02:15:57.460

好吧，这取决于多个数组的数量。如果你只有两个，你可以单独对它们进行排序，并按顺序同时遍历它们，然后删除。

但是，当您拥有任意数量的数组时，这会很快变得复杂。

在这种情况下，最简单的方法是：

1.  将所有内容（合并）放在一个数组中（名为 ARRAY）

2.  对数组进行排序（ARRAY）

3.  迭代数组 (ARRAY)，同时删除仅出现一次的元素，并留下多次出现的元素的单个副本

4.  然后对于每个原始数组（例如 A、B、C、D），与 ARRAY 一起迭代这个原始数组（例如 A），并删除 A 中也存在于 ARRAY 中的元素。

对于第 4 步，您可能需要类似（用伪 C 代码编写）：

```
foreach (A = arrays [A, B, C, D]) { // for each original array
  int j=0;
  for (int i=0;i<A.size;i++) { // iterating over array A
    // increase index j to iterate ARRAY (find closest # in ARRAY >= A[i])
    while (j<ARRAY.size-1 && A[i]>ARRAY[j]) j++;

    if (ARRAY[j]==A[i]) /* remove it */;
    else /* keep it */;
  }
} 
```

# php - 发送 507 推送消息后 APNS 关闭连接

> ID：12224369
> 
> 赞同：3
> 
> 时间：2012-09-01T02:10:41.077
> 
> 标签：php, ios, push-notification

我已将我的应用程序提交到苹果商店，现在我想将 APNS 发送给用户。我想从我的桌面通过这个 php 代码发送 7000 条推送消息：

```
<?php

// Put your private key's passphrase here:
$passphrase = '*****';

// Put your alert message here:
$message = 'text here';

////////////////////////////////////////////////////////////////////////////////

$ctx = stream_context_create();
stream_context_set_option($ctx, 'ssl', 'local_cert', 'ck.pem');
stream_context_set_option($ctx, 'ssl', 'passphrase', $passphrase);

// Open a connection to the APNS server
$fp = stream_socket_client(
    'ssl://gateway.push.apple.com:2195', $err,
    $errstr, 60, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx);

if (!$fp)
    exit("Failed to connect: $err $errstr" . PHP_EOL);

echo 'Connected to APNS</br>' . PHP_EOL;

// Create the payload body
$body['aps'] = array(
    'alert' => $message,
    'sound' => 'default'
    );

// Encode the payload as JSON
$payload = json_encode($body);

////////////////////////////////////////////////////////////////////////
    function selectfromdb(){
    $x = array();
    $con = mysql_connect("localhost","root","root");
    mysql_select_db("my_db", $con);
    mysql_query("set character_set_server='utf8'");
    mysql_query("set names 'utf8'");
    $result = mysql_query("SELECT idip FROM id");
    $c = 0;
    while($r = mysql_fetch_array($result))
    {
        $x[$c] = $r['idip'];
        $c++;
    }
    return $x;
}
///////////////////////////////////////////////////////////////////////
$y = selectfromdb();
$i = 0;
while ($i < sizeof($y)){
// Build the binary notification
$msg = chr(0) . pack('n', 32) . pack('H*',$y[$i]) . pack('n', strlen($payload)) . $payload;

// Send it to the server
$result = fwrite($fp, $msg, strlen($msg));

if (!$result)
    echo 'Message not delivered</br>' . PHP_EOL;
else
    echo 'Message successfully delivered</br>' . PHP_EOL;

    $i++;
}
echo 'end</br>';

// Close the connection to the server
fclose($fp);
?> 
```

但它只是发送了 507，然后它说：消息未传递给所有其余部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:55:13.710

问题是苹果在发送到不可用设备 ID 的 X 消息后关闭了连接。通过使用 APNS 反馈服务清理您的设备 ID 集合/数据库，然后完成您的 APNS 消息的部署。

# macos - 指向错误位置的可执行路径，我该如何更新

> ID：12224371
> 
> 赞同：1
> 
> 时间：2012-09-01T02:11:37.470
> 
> 标签：macos

我最近使用 npm 更新了 nodejs 可执行文件，现在可执行文件指向错误的位置。当我在终端中运行 which 命令时，它指向旧的不存在的位置。如何更新可执行路径或快捷方式。我不是 unix 人，所以不确定设置在哪里。

我不一定需要更新环境中所有应用程序的路径，只是想知道为什么旧可执行文件的路径仍然徘徊并指向错误的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T16:41:07.060

我认为`which`永远不会返回不存在的东西。`$PATH`它会根据环境变量中的搜索顺序向您显示正在找到的可执行文件的版本。

这个`$PATH`变量是在你的 shell 中设置的。在终端中输入`$PATH`以查看您的路径变量设置为什么。（可能类似于`/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin`）

有关更改 shell 路径变量的一些说明，请参阅此问题：[在 Mac OS X Lion 上设置环境变量](https://stackoverflow.com/questions/7501678/set-environment-variables-on-mac-os-x-lion)

您能否提供更具体的示例来说明这些东西在哪里，以及您正在查看哪些文件，因为我认为您的描述没有意义（关于“指向不存在的旧位置”）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T06:17:21.860

bash 缓存您已运行的可执行文件的路径。您可以使用“hash -r”重置缓存（或启动新的 bash 会话或终端）。

# c++ - strncpy 运行时检查失败 #2 错误 c++

> ID：12224372
> 
> 赞同：0
> 
> 时间：2012-09-01T02:11:54.020
> 
> 标签：c++, runtime

当我编译并运行我的程序时，除了我收到“运行时检查失败 #2”错误之外，似乎一切都可以正常处理手头的任务。顺便说一句，这是我的硬件任务，这是我第一次尝试使用任何 cstring 函数，所以我确定这是我出错的地方。基本上我将 2 个字符串附加在一起，我几乎 100% 确定它与我的结果参数溢出有关。只是不知道如何解决它。

```
#include <iostream>
#include <cstring>
using namespace std;

void concat(const char a[ ], const char b[ ], char result[ ], int result_maxlength);
int main()
{
  char a[] = "Woozle";
  char b[] = "Heffalump";
  char c[5];
  char d[10];
  char e[20];
  concat(a, b, c, 5);
  concat(a, b, d, 10);
  concat(a, b, e, 20);
  cout << c << "\n";
  cout << d << "\n";
  cout << e << "\n";
  return 0;
}
void concat(const char a[ ], const char b[ ], char result[ ], int result_maxlength)
{
strncpy (result,a, result_maxlength);
strncat (result, b, result_maxlength);
result[result_maxlength-1] = '\0';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T04:20:27.913

`strncat`非常没用，因为`num`参数不是目标的总大小，而是要复制的字节数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T08:06:03.750

到目前为止，有几个人已经指出了这段代码的几个问题。似乎很少有人谈论的一个非常微妙的问题是：根据 POSIX 规范，`strncpy`如果移动的非空字符数达到指定的限制（'n'），则不会在字符串上设置空终止符的行为. 但是，它会尾部填充空值以达到“n”。因此：

```
char ar[3];
strncpy(ar, "food", sizeof(ar)/sizeof(ar[0])); 
```

这将以 a(0) = 'f'、a(1) = 'o' 和 ar(2) = 'o' 结束。**不会附加空终止符。忽略最后一个字符**正是因为这个原因，人们对调用这个运行时库函数感到如此头晕目眩。考虑到这一点很重要。因此，您会经常看到这样的代码。

```
char ar[3];
strncpy(ar, "food", sizeof(ar)/sizeof(ar[0])-1);
ar[sizeof(ar)/sizeof(ar[0])-1] = 0; 
```

这可能会得到你真正想要的东西，即 ar = "fo"。充足的空间情况逆转了这一点。如果您有一个有足够空间的缓冲区，如果副本的源字符串在到达“n”之前到达它自己的终止符，则“n”将用空值填充直到到达“n”。因此：

```
char ar[30];
strncpy(ar, "food", sizeof(ar)/sizeof(ar[0])-1);
ar[sizeof(ar)/sizeof(ar[0])-1] = 0; 
```

将导致 ar = "food" 在 'd' 后面有 26 个零字符。让人们保持警惕，不那么明显的 memset-to-zero 调用：

```
char ar[30];
strncpy(ar, "", sizeof(ar)/sizeof(ar[0])); 
```

是的，这是错误的，我知道。

话虽如此，显然 strncat() 的行为与您的代码似乎也反映了您目前可能认为的不同，这不足为奇。例如，最后一个参数未指定目标中要限制的字符数。相反，它描述了限制从源复制的字符数。换句话说，随着您继续添加新琴弦，尾部空间限制器应该不断变短。当然，要知道多少涉及跟踪每个步骤复制的字符，正如有人指出的那样，这使得 strncat 边界线在许多情况下无用，提供的混乱多于实用程序。

作为参考，可以在此处查看具有已定义行为的精确定义[strncpy](http://www.unix.com/man-page/POSIX/3posix/strncpy/)和[strncat](http://www.unix.com/man-page/posix/3/strncat/)。在继续你的作业之前，我强烈建议你清楚地阅读两者。

# jquery - jQuery - 在页面加载后使用函数计数元素

> ID：12224376
> 
> 赞同：0
> 
> 时间：2012-09-01T02:12:33.560
> 
> 标签：jquery

好的，这是此示例的设置：

我有 50 个结果，所以我运行：

```
function divcount() {
 mycount =  $('div.item').length; 
}

divcount();
$('div#test').append(mycount); 
```

要获得这些结果的计数......然后显示该计数。问题是页面使用 AJAX 调用来过滤结果并从 DOM 中删除 div.item。对于此示例，它被削减为 3 个结果。在鼠标单击（单击激活 AJAX 调用）后，我想计算结果 3，并在#test 中显示 3 个结果……但它使用的是原始的 50 而不是 3。

我想过把：

```
function updatedivcount() {
 updatedcount =  $('div.item').length; 
} 
```

进入鼠标点击动作，但这不起作用。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T02:19:41.273

您需要将更新代码放在调用的`success`回调中`$.ajax()`。像这样的东西：

```
$("#id_of_button").click(function () {
  $.ajax({
    // ...
    success: function (data) {
      // Do something with the results...
      $('div#test').text($('div.item').length);
    }
  });
}); 
```

# python - Python 排序函数不执行任何操作

> ID：12224377
> 
> 赞同：3
> 
> 时间：2012-09-01T02:12:44.153
> 
> 标签：python, sorting, dictionary

我有一本看起来像的字典`a = {'10': 2.0, '3': 2.0, '7': 1.0, '6': 1.0}`

我用：

```
it = iter(sorted(nums.items()))

try:
    while(True):
        print it.next()

except StopIteration:
    print "\n\n" 
```

打印按键值排序的元素，但它不起作用。我明白了

```
('10', 1.0)
('3', 1.6666666666666667)
('6', 1.0)
('7', 1.0) 
```

这不是我想要的。我也尝试了很多其他的东西，但那些都不起作用..有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T02:14:46.063

这是按字符串的值对键进行排序（即按字母顺序 - “1”在“3”之前在“6”之前......）而不是它们的整数值。如果你想按数值对键进行排序，你可以这样做

```
iter(sorted(nums.items(), key=lambda x: int(x[0]))) 
```

# java - 从类创建 HSQL 创建表查询

> ID：12224379
> 
> 赞同：5
> 
> 时间：2012-09-01T02:13:10.040
> 
> 标签：java, spring, hibernate, hsqldb

我有一个经常使用的项目，目前正在更新。有几个地方可以安装这个项目，并且将来不确定在哪里使用哪个版本以及将来可能会更新到哪个版本。不过，现在它们都一样。

我的问题源于这样一个事实，即休眠实体类可能会有很多变化，并且必须很容易更新到新版本，没有任何麻烦，并且不会丢失数据库内容。只需替换 WAR 并启动，它应该会自行迁移。

*据我所知，除非hibernate.hbm2ddl.auto=create* ，否则 Hibernate 不会更改表，但实际上会丢弃所有数据？

所以现在当 Spring 上下文完全加载时，它会执行一个 bean，它将通过从 versionX 到 versionY 的所有更改（之前保存在数据库中的版本）将数据库迁移到当前版本，并手动更改桌子。

做一些硬编码的 ALTER TABLE 来添加一些列并不麻烦，但是当涉及到添加完整的新表时，不得不写所有这些感觉很愚蠢......

**所以我的问题是**：

*   有没有办法将实体类和方言发送到某个地方的 Hibernate 代码，并取回用于创建表的有效 SQL 查询？

*   甚至更好的是，以某种方式创建一个 SQL 字符串来向表中添加列，方言安全？

我希望这不是一个愚蠢的问题，而且当谈到 Hibernate 时，我并没有错过一些明显的东西......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T08:56:18.190

have you tried

```
hibernate.hbm2ddl.auto=update 
```

it retains all the database with the data and append only columns and tables you have changed in entity.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T08:34:14.773

我认为您无法完全自动化此操作。Hibernate 有 hbm2ddl 工具（可作为 ant 任务或 maven 插件使用）从您的 hibernate 配置中生成所需的 DDL 语句以创建一个空数据库，但我不知道有任何工具可以在两者之间进行自动“差异”版本。在任何情况下，您最好手动仔细进行差异，因为只有您足够了解您的对象模型才能为现有实体的新属性等选择正确的默认值。

一旦你计算出你的差异，你就可以使用像[liquibase](http://www.liquibase.org)这样的工具来管理它们，并在应用程序启动时处理将更新实际应用到数据库。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T08:12:45.200

也许你应该尝试不同的方法。不要在运行时更新时生成模式，而是“手动”制作一个（尽管可以基于休眠生成的脚本）。

在数据库中存储一个版本号，并为每个下一个版本创建一个更新脚本。您现在唯一需要做的就是确定数据库当前是哪个版本，然后依次运行必要的更新脚本以将其更新到当前版本。

为了使其更加健壮，您可以进行单元/集成测试，该测试运行每个可能的数据库更新并检查结果数据库的完整性。

我将这种方法用于我构建的应用程序，它可以完美运行。此模式的另一个实现示例是 Android。他们的 API 中有升级方法

[http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#onUpgrade(android.database.sqlite.SQLiteDatabase, int, int)](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#onUpgrade%28android.database.sqlite.SQLiteDatabase,%20int,%20int%29)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-04T09:09:44.897

不要使用 Hibernate 的 ddl。如果您想迁移，它会丢弃您的数据。我建议你看看 Liquibase。Liquibase 是一个数据库版本控制。它使用变更集工作。每个变更集都可以手动创建，或者您可以让 Liquibase 读取您的 Hibernate 配置并生成变更集。

Liquibase 可以通过 Spring 启动，因此它应该适合您的项目；-)

# ruby-on-rails - Rails 3.1：JSON 格式的持久“模板丢失”

> ID：12224380
> 
> 赞同：0
> 
> 时间：2012-09-01T02:13:49.207
> 
> 标签：ruby-on-rails, ruby-on-rails-3

[我有一个与这个问题中提到](https://stackoverflow.com/q/3798822/242826)的问题非常相似的问题。但是，答案中描述的解决方案都不起作用。

当尝试访问我的路由时，无论有无`.json`扩展，以及使用 jQuery`$.ajax`和`$.getJSON`（使用正确的 Accept 标头），我收到以下异常：

> 缺少模板用户/事件/索引、应用程序/索引与 {:handlers=>[:erb, :builder, :coffee, :haml], :formats=>[:json], :locale=>[:en, :en ]}。

因为我只需要这个控制器的 JSON 响应，所以我没有也不想要这个控制器的任何模板。

我的控制器定义如下：

```
class Users::EventsController < ApplicationController

  respond_to(:json)

  def index
    # Some extra code here...
    respond_with(@data)
  end
end 
```

有了这些路线（在“用户”范围内）：

```
resources(:events, :only => [:index, :show]) do
  collection do
    get ':year/:month', :to => 'events#index', :format => :json
  end
end 
```

`do |format|`添加块并明确使其呈现为 JSON时，问题仍然存在。

在 Rails 3.1.1 和 3.2 上都试过这个，得到了同样的问题。

它看起来像一个服务器端问题，因为使用“.json”访问不起作用。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T02:22:41.707

经过一番修补后，我发现了这个问题的实际原因。

在控制器的某个时刻，我有以下代码块：

```
@array.map { |a| return a['id'] } 
```

关键字使用`return`不正确，导致整个操作提前返回，从而导致问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-18T04:43:01.840

当通过 JSON 发出密码重置请求时，我们在自定义设计控制器中遇到了类似的问题（请确保也正确使用 CSRF）。

### 有问题的代码

```
responds_to :json => [:create, :our_custom_method1, :our_custom_method2] 
```

### 工作代码

```
responds_to :json 
```

对允许更多路由接受 JSON 的安全方面不满意，但我们稍后会进一步锁定它。

# java - 为什么要求我将 xml 中的字符串作为 @string 引用？

> ID：12224388
> 
> 赞同：0
> 
> 时间：2012-09-01T02:15:23.477
> 
> 标签：java, android, eclipse, string, reference

![@string/ 引用错误](../Images/d4f01a994de0574b63e9afaf1f9eba8d.png)

`android:text="Button"`不起作用。我应该在 中为它创建一个特殊的字符串，并将值为 的按钮`values/strings.xml`更改`android:text="Button"`为。`android:text="@string/button"``"Button"`

它以前工作的问题是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T02:34:19.923

这些不仅仅是错误警告，每个 ide 中都有一个名为 lint 的工具，它可以帮助程序员以该语言的标准格式编写代码。在 android 标准做法是使用 string.xml 来存储您在 xml 中使用的所有字符串值，因此 lint 会显示警告，您不应该直接设置标签硬编码，而是将它们添加到字符串资源中，然后设置资源 id。

使用字符串值有一些好处，比如

*   如果您想为您的应用程序提供多语言支持，那么可以为此使用多个字符串资源。
*   可以随时更改而无需更改源代码。
*   所有资源都自动添加到 R.java 中，因此您也可以在课堂上使用它们。

ETC

您可以在这里找到更多信息 -

[字符串资源](http://developer.android.com/guide/topics/resources/string-resource.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T02:20:50.970

[硬编码字符串“第三行”，应该使用@string 资源](https://stackoverflow.com/questions/8743349/hardcoded-string-row-three-should-use-string-resource)

这回答了我的问题，谢谢，但如果你有什么要补充的，我很高兴从你们那里知道。最好的。

艾伦

# iphone - UILabel alpha 也会导致文本褪色

> ID：12224389
> 
> 赞同：2
> 
> 时间：2012-09-01T02:15:25.470
> 
> 标签：iphone, objective-c, ios, ipad

有没有办法让我可以设置 UILabel 的 alpha，但它不会淡出 UILabel 的文本？仅仅意味着背景？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-01T02:22:10.147

由于文本是标签的一部分，如果您为标签设置 alpha，则文本会适当地淡化。您想要的是`backgroundColor`使用适当的 alpha 设置 a：

```
myLabel.backgroundColor = [UIColor colorWithRed:1 green:0 blue:0 alpha:0.5]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T02:18:50.117

您可能必须创建一个背景视图（`UIView`就足够了），并将其`UILabel`放在顶部（不是作为子视图，因为背景视图的 alpha 值会影响其所有子视图）

# windows - 使用批处理自动 USB 备份

> ID：12224393
> 
> 赞同：0
> 
> 时间：2012-09-01T02:16:34.403
> 
> 标签：windows, batch-file

这是我的自动 USB 备份

```
ECHO OFF
CLS
ECHO.
ECHO Back Up USB? Y/N
ECHO. 
Set /P M=Select and press enter.
IF %M%==Y GOTO yes
IF %M%==N GOTO EOF
:yes
set /p drive= What drive?
mkdir D:\Users\%USERNAME%\Desktop\STUFF\BACKUP
XCOPY "%drive%" "D:\Users\%USERNAME%\Desktop\STUFF\BACKUP" /Y /E 
```

当它到达 mkdir 行时，它就退出了，可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:18:20.273

我假设此文件旨在驻留在您的 PC 上的某个地方，并允许您选择要备份的驱动器。我在我的博客上有一篇文章，详细介绍了如何创建备份 bacth 文件，您可以将其保存在您拥有的每个驱动器的根目录中，并将它们备份到 c: 驱动器上自己的文件夹中。你可以在这里看看：[http ://www.scotthelme.co.uk/blog/backing-up-your-usb-drives/](http://www.scotthelme.co.uk/blog/backing-up-your-usb-drives/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T03:12:52.750

REM 出来`ECHO OFF`，看看发生了什么。您实际上可以编辑您的问题并发布它显示的内容的副本。（右击`C:\`左上角的小图标，选择编辑 -> 标记。用鼠标选择要复制的文本，然后按 [ENTER]。文本现在在剪贴板中，您可以将其粘贴到你的问题。

您的用户名中有空格吗？加上双引号`d:\users\%username\desktop\stuff\backup`

你进来`drive`干什么？只是一个驱动器号？如果是这样，`set drive=%drive%:\`

顺便说一句，除非您实际创建了 label ，否则`:eof`当您`GOTO :EOF`.

# wordpress - 仅在资源管理器中出现奇怪的 Wordpress“找不到网页”错误

> ID：12224395
> 
> 赞同：0
> 
> 时间：2012-09-01T02:18:46.930
> 
> 标签：wordpress, internet-explorer

我的 Wordpress 3.4.1 博客中出现奇怪的“找不到网页”错误。我已经禁用了所有可能成为问题的插件。此错误仅在 Explorer 和 Opera 中发生，但在 Firefox、Chrome 和 Safari 中运行良好。这仅发生在事件管理器插件下的两个部分中，但我什至禁用了该部分，但仅在一个内容发布中发生。另一个奇怪的项目是这个盒子随机显示在每个显示中，所以它不是固定的。在我失去所有头发之前，任何人都可以帮助我或指出正确的方向吗？我不确定是否允许我在 stackoverflow.com 上发布问题链接

借助 Internet Explorer 中的调试栏，我设法找到了一些生成的代码：

```
<html><head>
    <link rel="stylesheet" type="text/css" href="ErrorPageTemplate.css">

    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

    <title>HTTP 400 Bad Request</title>

    <script language="javascript" type="text/javascript" src="errorPageStrings.js">
    </script>
    <script language="javascript" type="text/javascript" src="httpErrorPagesScripts.js">
    </script>

</head><body onload="javascript:initHomepage(); expandCollapse('infoBlockID', true); initGoBack(); initMoreInfo('infoBlockID');">

    <table border="0" cellSpacing="0" cellPadding="0" width="730">

    <!-- Error title -->
        <tbody><tr>
            <td id="infoIconAlign" vAlign="top" rowSpan="2" width="60" align="left">
                <img id="infoIcon" alt="Info icon" src="info_48.png">
            </td>
            <td id="mainTitleAlign" vAlign="middle" width="*" align="left">
                <h1 id="mainTitle">The webpage cannot be found</h1>
            </td>
        </tr>

        <tr>
            <!-- This row is for HTTP status code, as well as the divider-->
            <td id="http400Align" class="errorCodeAndDivider" align="right"><id id="http400">&nbsp;HTTP 400</id>
                <div class="divider"></div>
            </td>
        </tr>

    <!-- Error Body -->

    <!-- What you can do -->
        <tr>
            <td>
                &nbsp;
            </td>
            <td id="likelyCausesAlign" vAlign="top" align="left">
                <h3 id="likelyCauses">Most likely causes:</h3>
                <ul>
                    <li id="causeErrorInAddress">There might be a typing error in the address.</li>
                    <li id="causeLinkOutOfDate">If you clicked on a link, it may be out of date.</li>
                </ul>
            </td>
        </tr>

        <tr>
            <td>
                &nbsp;
            </td>
            <td id="whatToTryAlign" vAlign="top" align="left">
                <h2 id="whatToTry">What you can try:</h2>
            </td>
        </tr>

    <!-- retype address -->
        <tr>
            <td>
                &nbsp;
            </td>
            <td id="retypeAddressAlign" vAlign="middle" align="left">
                <h4>
                    <table>
                      <tbody><tr>
                          <td vAlign="top">
                              <img class="actionIcon" border="0" alt="" src="bullet.png">
                          </td>
                          <td vAlign="top">
                              <id id="retypeAddress">Retype the address.</id>
                          </td>
                      <tr>
                    </tr></tbody></table>
                </h4>
            </td>
        </tr>

    <!-- back to previous page -->
        <tr>
            <td>
                &nbsp;
            </td>
            <td id="goBackAlign" vAlign="middle" align="left">
                <h4>
                    <table>
                      <tbody><tr>
                          <td vAlign="top">
                              <img class="actionIcon" border="0" alt="" src="bullet.png">
                          </td>
                          <td vAlign="top">
                              <span id="goBackContainer"><a href="javascript:history.back();">Go back to the previous page.</a></span><noscript id="goBack">Go back to the previous page.</noscript>
                          </td>
                      </tr>
                    </tbody></table>
                </h4>
            </td>
        </tr>

    <!-- top level domain-->
        <tr>
            <td>
                &nbsp;
            </td>
            <td id="mainSiteAlign" vAlign="middle" align="left">
                <h4>
                    <table>
                      <tbody><tr>
                          <td vAlign="top">
                              <img class="actionIcon" border="0" alt="" src="bullet.png">
                          </td>
                          <td vAlign="top">
                              <id id="mainSite1">Go to </id><span id="homepageContainer"><noscript id="mainSite2">the main site</noscript><a href=""></a></span><id id="mainSite3">&nbsp;and look for the information you want.</id>
                          </td>
                      </tr>
                    </tbody></table>
                </h4>
            </td>
        </tr>

    <!-- InfoBlock -->
        <tr>
            <td id="infoBlockAlign" vAlign="top" align="right">
                &nbsp;
            </td>
            <td id="moreInfoAlign" vAlign="middle" align="left">
                <h4>
                    <table>
                      <tbody><tr>
                          <td vAlign="top">
                              <a onclick="javascript:expandCollapse('infoBlockID', true); return false;" href="#"><img id="infoBlockIDImage" class="actionIcon" border="0" alt="More information" src="down.png"></a>
                          </td>
                          <td vAlign="top">
                              <span id="moreInfoContainer"><a href="javascript:expandCollapse('infoBlockID', true);">More information</a></span>
                              <noscript>&lt;ID id="moreInformation"&gt;More information&lt;/ID&gt;</noscript>
                          </td>
                      </tr>
                    </tbody></table>
                </h4>
                <div style="display: none;" id="infoBlockID" class="infoBlock">
                    <p id="errorExplanation">This error (HTTP 400 Bad Request) means that Internet Explorer was able to connect to the web server, but the webpage could not be found because of a problem with the address.</p>
                    <p id="moreInfoSeeHelp">For more information about HTTP errors, see Help.</p>
                </div>
            </td>
        </tr>
    </tbody></table> 
```

我希望这有帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T03:19:43.703

在做了一个 Windows GREP 之后，我设法找到了罪魁祸首 Wordpress 插件。这是有道理的“All in One Adsense and YPN”。现在一切都很好。感谢那些愿意尝试提供帮助的人。

# php - 需要 mysql 查询的帮助

> ID：12224397
> 
> 赞同：0
> 
> 时间：2012-09-01T02:18:49.740
> 
> 标签：php, mysql

前三个查询工作正常，但最后一个不是。第二个查询可以正常工作，`$status !== ''` 但最后一个`$status !== ''` 查询没有执行查询，任何人都可以帮助我

```
if (isset($_POST['go'])) {

     $status = $_POST[status];
     if ($status == 4){
             $status = '' ;
     }

    if ($topic == 100 && $subtopic == '' && $status == '' ) {
    $queryString = "select * from tblquiz where userid='$_SESSION[numericuserid]' LIMIT $start, $limit" ;
    $countString = "select * from tblquiz where userid='$_SESSION[numericuserid]'";
    }  // NOTE : THIS QUERY IS WORKING PERFECT

       elseif ($topic !== '' && $subtopic !== '' && $status !== '' ) {
    $queryString = "select * from tblquiz where qstatus=$status AND  qtopic='$topic[topicname]' AND subtopic='$_POST[subtopic]' AND userid='$_SESSION[numericuserid]' LIMIT $start, $limit" ;
    $countString = "select * from tblquiz where qstatus=$status AND  qtopic='$topic[topicname]' AND subtopic='$_POST[subtopic]' AND      userid='$_SESSION[numericuserid]'";
       }  // NOTE : THIS QUERY IS WORKING PERFECT

       elseif ($topic !== '' && $subtopic !== '' && $status == '' ) {
    $queryString = "select * from tblquiz where   qtopic='$topic[topicname]' AND subtopic='$_POST[subtopic]' AND userid='$_SESSION[numericuserid]' LIMIT $start, $limit" ;
    $countString = "select * from tblquiz where   qtopic='$topic[topicname]' AND subtopic='$_POST[subtopic]' AND userid='$_SESSION[numericuserid]'";
       }  // NOTE : THIS QUERY IS WORKING PERFECT

       elseif  ($topic == 100 && $subtopic == '' && $status !== '') {
    $queryString = "select * from tblquiz where qstatus= $status AND userid='$_SESSION[numericuserid]' LIMIT $start, $limit" ;
    $countString = "select * from tblquiz where qstatus= $status AND userid='$_SESSION[numericuserid]' ";
     }  **// NOTE : THIS QUERY IS NOT WORKING** 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T02:23:08.790

```
select * from tblquiz where qstatus= '$status' 
```

qstatus 缺少引号？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T02:27:09.063

在您的 elseif 子句中，您检查 $status 是否为空，如果是则设置 $querystring 和 $countstring。这意味着您尝试查询

```
qstatus= AND 
```

这应该产生了一个 SQL 错误。在尝试调试时打印出您的 sql 语句总是一个好主意。

# visual-studio-2010 - 在 IIS 中手动分配 WCF 应用程序

> ID：12224398
> 
> 赞同：3
> 
> 时间：2012-09-01T02:18:53.737
> 
> 标签：visual-studio-2010, wcf, iis, iis-7, iis-7.5

在 Visual Studio“WCF 服务应用程序”项目中，在属性->网页上，如果我选择“使用本地 IIS Web 服务器”->“创建虚拟目录”...它会在默认网站中成功创建 IIS 应用程序本地 IIS 7.5 安装。到目前为止，一切都很好。

但是，我想使用默认网站以外的网站。我在其他网站上托管服务的尝试没有奏效。我试过了：

1.  删除 Visual Studio 成功创建的 IIS 中的应用程序/虚拟目录。
2.  使用先前由 Visual Studio 自动创建的 IIS 应用程序中的相同设置，在不同的网站中手动创建一个新的 IIS 应用程序。
3.  转到Visual Studio，项目属性-> web，然后选择“Visual Studio 开发服务器”。节省。这只是一个“擦除”步骤。
4.  在同一个属性页面上，我再次选择“使用本地 IIS Web 服务器”并点击保存（不按“创建虚拟目录”）。

在最后一步，我希望它能保存。它没有。它弹出一条消息说虚拟目录不存在。但正如我所说，它确实存在，因为我之前手动创建了它。

我自己对这个问题的猜测：

*。我创建的非默认网站与默认网站在某种程度上有所不同，在某种程度上我还没有确定。*。Visual Studio 不适合使用不在默认网站中的虚拟目录。

有什么建议或澄清吗？

我已激活 IIS“失败的请求跟踪”，但没有为此问题创建记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T04:46:46.973

您要做的是查看您的第二个站点是 IIS（您希望 WCF 服务在其下运行的站点）并查看新的主机名，或者如果您去管理网站 -> 高级设置并查看是什么在绑定之后。所以它可能会显示类似： http:*:80:localhost2 。localhost2 是您需要的。它也可能是一个 IP 地址，不知道你是如何设置的。

因此，然后在 Use Local IIS Server -> Project URL 中的 WCF 项目属性中输入站点的主机名。因此，例如，它可能类似于： `http://localhost2/yourservice.svc`.

# math - 优化：尽量减少涂装错误

> ID：12224405
> 
> 赞同：5
> 
> 时间：2012-09-01T02:21:22.813
> 
> 标签：math, optimization

给您一个 m*n 网格，其中每个单元格标记为“b”或“w”。你也会得到黑白颜料。您可以使用 k 笔画，每种颜色（黑色或白色），笔画定义为同一行中连续无色单元格的着色（这意味着笔画不能超出行的长度，如果您在该行结束之前拿起你的刷子，那是该笔划的结束）。目的是尽量减少错误的数量，如果您用错误的颜色绘制单元格或单元格保持未绘制，则会发生错误。最优策略是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:12:13.463

知道一行问题的解决方案（给定 BW 行上 k 笔画的最小错误数是多少）可用于解决问题。

对于每一行，列出给定笔画数的错误数`k_i = [0, 1, ..., min k needed to cover i-th row]`。现在我们有了`n`（不同大小的）列表。`k`要找出在哪些行中使用“k”笔划，从列表的开头迭代弹出元素就足够了，其中笔划覆盖了大多数单元格。

所以，主要任务是解决一行问题，我不知道如何:-)

设 C 为连续颜色变化的次数。比覆盖行的最小笔画数是`ceil( (C+1)/2 )`. 这可以通过交替笔画颜色与第一个笔画来完成，以覆盖整行和最后一个笔画中最远变化之间的下一个笔画。第一个笔画具有一个（或两个）末端的颜色。

我认为，通过类似的方法，当没有足够的笔画覆盖整行时，可以找到错误的数量。必须省略一种颜色的某些范围。这是通过以下方式完成的：

*   从不在边界上的颜色开始（省略第一个笔画），

*   有些笔画不是在最后一笔画的最远变化之间，而是在更近的变化之间。

我不确定，但似乎找到几个最小的相同颜色部分就足够了，这将是一个错误。可能这些部分离末端有多远很重要。

那是现在...

# javascript - 如何从选择的 HTML 下拉菜单中提取值？

> ID：12224408
> 
> 赞同：0
> 
> 时间：2012-09-01T02:22:36.480
> 
> 标签：javascript, html, css

如何在上面的 div 中显示选定的选项名称？如果用户选择了蓝色，我希望蓝色显示在上方。

```
<div id='text"> selection goes here</div>
<select id="dropdownselect">
<option> Red </option>
<option> White </option>
<option> Blue </option>
</select> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T02:28:41.543

使用以下内容获取所选选项的文本：

```
var select = document.getElementById("dropdownselect");
var selectedText = select.options[select.selectedIndex].text; 
```

然后，要将值添加到`div`id `text`，请使用：

```
document.getElementById("text").innerHTML = selectedText; 
```

如果要在每次选项更改时反映所选值，则需要将`onchange`事件附加到`select`，结合上面的代码结果如下：

```
var select = document.getElementById("dropdownselect");
select.onchange = function () {
  var selectedText = this.options[this.selectedIndex].text;
  document.getElementById("text").innerHTML = selectedText;
};​ 
```

这是一个有效的**[演示](http://jsfiddle.net/BunMV/)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T02:29:33.283

只需添加`onchange` `javascript`事件：

```
<div id="text"> selection goes here</div>
<select id="dropdownselect" onchange="document.getElementById('text').innerHTML = this.options[this.selectedIndex].text;">
    <option> Red </option>
    <option> White </option>
    <option> Blue </option>
</select>​​​​​​​​​​​​​​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T02:26:09.587

您应该使用 javascript 框架使其更容易。我个人使用 jQuery，在这种情况下，获取值的 javascript 是：

```
$("#dropdownselect").val() 
```

您可以使用以下方法自动更改它：

```
<select id="dropdownselect" onChange="$('#text').text($(this).val());"> 
```

MooTools 或我以前没有使用过的其他框架也提供了类似的功能。

可以通过以下方式使用 jQuery：

```
<script src="jquery.js"><!-- assuming you have a jquery file at this location --> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T02:30:29.550

```
var selectBox = document.getElementById("dropdownselect"),
    textDiv = document.getElementById("text");
textDiv.innerText = selectBox.options[selectBox.selectedIndex].text; 
```

但我也建议使用 jQuery。

# php - 帖子未显示在页面提要上

> ID：12224410
> 
> 赞同：-1
> 
> 时间：2012-09-01T02:22:46.777
> 
> 标签：php, facebook, facebook-graph-api

我尝试使用 facebook api 将 facebook 状态发布到页面。我得到那些帖子的数组返回（id）。但它没有显示在页面时间线上。我尝试访问这些页面的 facebook 提要图。我得到了结果。

fb 页面：[https](https://www.facebook.com/testscrap?ref=hl) ://www.facebook.com/testscrap?ref=hl （没有时间线显示）。但我实际上有一个从 facebook graph 访问的帖子（[https://www.facebook.com/348759318542072/posts/350492115035459](https://www.facebook.com/348759318542072/posts/350492115035459)）

我哪里错了？

这是要发布的代码：

```
$feed_dir       = "/{$page['page_id']}/feed/";
$msg_body       = array (
        'access_token'  => $page['access_token'],           
        'message'       => 'Jingle bell jingle bell jingle all the way',            
        'picture'       => 'http://assets.kompas.com/data/photo/2012/08/26/0958534620X310.jpg',
    );

try {
    $result = $this->data['fbinstance']->api($feed_dir, 'post', $msg_body);
    jlog($result);
} catch (Exception $e) {
    $err_str = $e->getMessage();
    jlog($err_str);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T03:22:36.577

从评论复制到作者的帖子：

> 正如我在另一条评论中所说，无论我清空了多少缓存并更改了浏览器，我都遇到了 Facebook 在页面和群组上的缓存问题。但它迟早会出现。如果您有权访问它，请尝试使用其他用户。

Facebook 有时更新缓存的速度可能会很慢，因此显示新帖子的速度也会很慢。所以一个成功的请求应该可以工作，只需与其他用户一起测试。

# concurrency - 为什么函数会提前返回？

> ID：12224412
> 
> 赞同：0
> 
> 时间：2012-09-01T02:23:00.143
> 
> 标签：concurrency, go

我刚刚开始学习围棋，并且一直在巡回演出。最后一个练习是编辑一个网络爬虫以并行且不重复爬取。

这是练习的链接：http: [//tour.golang.org/#70](http://tour.golang.org/#70)

这是代码。我只更改了爬取和主要功能。所以我会发布这些以保持整洁。

```
 // Crawl uses fetcher to recursively crawl
    // pages starting with url, to a maximum of depth.
    var used = make(map[string]bool)
    var urlchan = make(chan string)
    func Crawl(url string, depth int, fetcher Fetcher) {
        // TODO: Fetch URLs in parallel.
        // Done: Don't fetch the same URL twice.
        // This implementation doesn't do either:
        done := make(chan bool)
        if depth <= 0 {
            return
        }
        body, urls, err := fetcher.Fetch(url)
        if err != nil {
            fmt.Println(err)
            return
        }
        fmt.Printf("\nfound: %s %q\n\n", url, body)
        go func() {
            for _, i := range urls {
                urlchan <- i
            }
            done <- true
        }()
        for u := range urlchan {
            if used[u] == false {
                used[u] = true
                go Crawl(u, depth-1, fetcher)
            }
            if <-done == true {
                break
            }
        }
        return
    }

    func main() {
        used["http://golang.org/"] = true
        Crawl("http://golang.org/", 4, fetcher)
    } 
```

问题是当我运行程序时，爬虫在打印后停止

```
 not found: http://golang.org/cmd/ 
```

这仅在我尝试使程序并行运行时发生。如果我让它线性运行，那么所有的网址都会正确找到。

注意：如果我做的不对（我的意思是并行性），那么我道歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T05:04:33.633

*   小心goroutine。
*   因为当 main 例程或`main()`func 返回时，所有其他 goroutine 将立即被杀死。
*   你`Crawl()`看起来像递归，但它不是，这意味着它会立即返回，而不是等待其他`Crawl()`例程。而且您知道，如果由`Crawl()`调用的第一个`main()`返回，则该`main()`func 认为其任务已完成。
*   你可以做的是让`main()`func 等到最后一个`Crawl()`返回。`sync`包，或将`chan`有所帮助。
*   您可能可以看一下我几个月前所做的最后一个解决[方案](https://gist.github.com/2317744)：

    ```
    var store map[string]bool

    func Krawl(url string, fetcher Fetcher, Urls chan []string) {
        body, urls, err := fetcher.Fetch(url)
        if err != nil {
            fmt.Println(err)
        } else {
            fmt.Printf("found: %s %q\n", url, body)
        }
        Urls <- urls
    }

    func Crawl(url string, depth int, fetcher Fetcher) {
        Urls := make(chan []string)
        go Krawl(url, fetcher, Urls)
        band := 1
        store[url] = true // init for level 0 done
        for i := 0; i < depth; i++ {
            for band > 0 {
                band--
                next := <- Urls
                for _, url := range next {
                    if _, done := store[url] ; !done {
                        store[url] = true
                        band++
                        go Krawl(url, fetcher, Urls)
                    }
                }
            }
        }
        return
    }

    func main() {
        store = make(map[string]bool)
        Crawl("http://golang.org/", 4, fetcher)
    } 
    ```

# c++ - 检查错误时，我的重载 >> 运算符中的无限循环

> ID：12224414
> 
> 赞同：1
> 
> 时间：2012-09-01T02:23:24.857
> 
> 标签：c++, error-handling, operator-overloading, infinite-loop, cin

```
std::istream & operator >>(std::istream & ins, Rational & target)
{
    int num, den;
    char symb;          
    std::cout << "Please enter a rational number: ";
    ins >> num >> symb >> den;
    std::cout << std::endl;

    if(validateInput(num, symb, den)){
        target = Rational(num, den);            
        return ins;
    }
    else{
        std::cin >> target;
    }
}

bool validateInput(int num, char symb, int den)
{
    if(symb != '/'){
        std::cout << "Error: Illegal format. Please use '2/4'." << std::endl;
        return false;
    }
    if((static_cast<int>(num) != num) && (static_cast<int>(den) != den)){
        std::cout << "Error: Not a valid rational number." << std::endl;
        return false;
    }
    if(den == 0){
        std::cout << "Error: Cannot divide by 0." << std::endl;
        return false;
    }

    return true;
} 
```

它采用“x/y”格式的有理数，例如 2/4。如果我输入正确，它工作正常。如果我输入 2p4，它会给出正确的错误（我遗漏了一个“/”），然后要求输入一个新号码。如果分母中为0，也会报错并要求新的数。

但是检查它是否是一个有效的数字似乎不起作用。如果我输入“a/4”，它将无限循环直到崩溃。我不知道为什么。检查调试器，它返回到 ins >> 语句，但不向用户询问任何内容。

我假设我的逻辑在某个地方是错误的。请注意，我对 C++ 还很陌生，仍在学习。我之前尝试过异常处理，但仍然没有正确地学习它，所以我重新选择了我更熟悉的东西。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T02:53:22.120

该问题的基本要点是，如果流的状态变坏，C++ 流格式化的提取运算符将停止工作，您必须重置状态才能使它们再次工作。

你还有其他问题。

首先，您的验证功能揭示了您缺乏经验：`static_cast<int>(intval) == intval`将永远是真实的并且什么也不确认。其次，您无法验证您确实已成功从流中提取值（这是导致无限循环的原因：您所做的就是一遍又一遍地验证失败。）

因此，当您提取值时，您应该验证一切正常，如下所示：

```
int num, den;
char symb;
// Remember to flush unfinished lines
std::cout << "Please enter a rational number: " << std::flush; 
if (std::cin >> num >> symb >> den)
    // you extracted an integer, a character and an integer succesfully
    // perhaps check that the character is '/' and denominator is non-zero
else
    // there was an error: what should we do? 
```

“我们应该做什么”部分远非显而易见：您*可以*重置流并从中删除第一个违规字节，然后再试一次，如果您认为这是合理的（并且直观）。但是，由于数字太大，提取也可能失败，在这种情况下，这可能会导致奇怪的行为：考虑以下输入（在具有共同`long`大小的实现上）：

```
3111111111111111111111111111111111111111111111111/3 
```

如果你没有任何实际的规范，需要考虑的是面向行的输入：首先读取一行并尝试解析它；如果它看起来不正常，请忽略它并尝试下一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T11:43:08.503

输入流的一个重要概念是它们不依赖于任何特定设备。也就是说，`str >> rational`应该在什么时候工作，什么时候`str`是控制台，什么时候是文件，什么时候是字符串，等等。所以提取器应该提取。它不应该提示，也不应该解释它不喜欢什么。所有这些事情都应该在调用提取器的代码中完成。

提取器中的验证很好，但是当检测到错误时，通常的报告方式是抛出异常。你可以让你的异常做任何你喜欢的事情，持有一个错误代码或一个文本字符串，或者对不同的错误有不同的异常。调用提取器以捕获异常并确定适当的响应是代码的责任。

```
static_cast<int>(num) != num 
```

因为`num`是一个 int，所以`static_cast`不做任何事情。这个测试永远不会失败。

int main() { try { std::cout << "请输入一个有理数："; 有理 r; 标准::cin >> r; } catch(...) { std::cout << "出了点问题\n"; } }

出于测试目的，我将重写此版本`main()`以使用 stringstream 作为输入源，并使用`"2/4"`or`"2^4"`或我想要测试的任何内容对其进行初始化；这样可以省去每次都输入的麻烦。

# .net - .net 4.5 中的空间数据和地图

> ID：12224418
> 
> 赞同：0
> 
> 时间：2012-09-01T02:25:25.403
> 
> 标签：.net, dictionary, spatial, bing

我正在学习如何在 .NET 中使用[System.Data.Spatial](http://msdn.microsoft.com/en-us/library/system.data.spatial.aspx)命名空间我有一个小应用程序，可以从 localdb 保存和检索一些空间数据。我现在需要的是在 Web 应用程序的某个地图中显示这些数据。我还不知道 Bing 地图是否是最佳选择，但既然是 Microsoft 技术，我认为集成可能会更容易。为了能够在地图中显示这些数据，我需要学习什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T03:40:13.607

你可以试试`SharpMap`，那是 .NET 的 OpenSource 空间库，你可以在 code plex 上找到这些库。

[http://www.codeplex.com/SharpMap](http://www.codeplex.com/SharpMap)

# android - Android ActionBarSherlock 更改文本样式/大小/颜色

> ID：12224422
> 
> 赞同：2
> 
> 时间：2012-09-01T02:26:27.573
> 
> 标签：android, actionbarsherlock

我想更改我的 actionbarsherlock 操作栏的文本样式/字体大小/字体颜色。我将在下面展示我的尝试，但它只显示错误“ `error: Error: No resource found that matches the given name (at 'android:textColor' with value '@color/black').`”和“ `error: Error: No resource found that matches the given name (at 'android:textSize' with value '@dimen/20dp').`”有人可以告诉我它是如何完成的吗？

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<style name="ABSTheme" parent="Theme.Sherlock.Light.ForceOverflow">
    <item name="android:actionBarStyle">@style/ABSTheme.ActionBar</item>
    <item name="actionBarStyle">@style/ABSTheme.ActionBar</item>
</style>

<style name="ABSTheme.ActionBar" parent="Widget.Sherlock.Light.ActionBar.Solid">
    <item name="android:displayOptions">showHome|useLogo</item>
    <item name="displayOptions">showHome|useLogo</item>
    <item name="titleTextStyle">@style/ABSTheme.ActionBar.TextAppearance</item>
</style>

<style name="ABSTheme.ActionBar.TextAppearance" parent="@style/TextAppearance.Sherlock.Widget.ActionBar.Menu">
      <item name="android:textSize">@dimen/20dp</item>
      <item name="android:textColor">@color/black</item>
 </style>
</resources> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T03:30:46.777

**wdziernia**是对的。对于尺寸，您可以只做 20dp，对于颜色，您可以指定一个十六进制颜色，如#ffffff。

如果您想在其他 xml 文件中使用预定义的值，您可以通过在 values/colors.xml 中创建一个如下所示的 xml 文件来创建自己的值：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<color name="black">#ffffff</color>
</resources> 
```

然后在您的样式 xml 文件中，您可以引用 @color/black。在这种情况下，您可以只使用 android 内置的黑色：`@android:color/black`而不是`@color/black`(`@android:`使用 android 内置。

You can do a similar thing specifying dimensions by name in a separate xml file as well.

# phpmyadmin - 为 PHPMyAdmin 创建一个 root 密码

> ID：12224431
> 
> 赞同：97
> 
> 时间：2012-09-01T02:29:21.800
> 
> 标签：phpmyadmin

PHPMyAdmin 给我一条消息说用户（root）没有密码。

那么，我该如何创建一个呢？

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2012-09-01T02:40:22.823

打开 phpMyAdmin 并选择 SQL 选项卡。然后键入以下命令：

```
SET PASSWORD FOR 'root'@'localhost' = PASSWORD('your_root_password'); 
```

还要更改为以下行`config.inc.php`：

```
$cfg['Servers'][$i]['auth_type'] = 'cookie'; 
```

使 phpMyAdmin 提示您输入 MySQL 用户名和密码。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2017-02-07T14:45:47.267

要以 UI 简单的方式在 PHPMyAdmin 中创建 root 密码，您可以按照以下简单步骤操作：

*   使用 root 帐户（无密码）-> 用户帐户访问 phpMyAdmin。

[![在此处输入图像描述](../Images/443a7bc43a7aa6cda51e69b03b2d316c.png)](https://i.stack.imgur.com/8v90b.png)

单击根>编辑权限

[![在此处输入图像描述](../Images/9eb8284827ad5e3661ef4379b10d338e.png)](https://i.stack.imgur.com/WfxHx.png)

然后点击更改密码

[![在此处输入图像描述](../Images/06a190f5ace13c74825eeb2b6fec43d7.png)](https://i.stack.imgur.com/1Tc8N.png)

输入您想要的密码 -> 开始

[![在此处输入图像描述](../Images/4605be9e7c2e36188f21b9253052489c.png)](https://i.stack.imgur.com/K45x6.png)

注销并使用新密码重新登录

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2012-09-03T22:48:51.657

好吧，我相信我已经解决了密码配置“问题” - WampServer 2.2 - Windows 7。

我做的三个步骤：

1.  在 MySQL 控制台中设置一个新密码。要做到这一点： `mysqladmin -u root password 'your_password'`

2.  在`phpMyAdmin`用户中单击并为用户设置相同的密码`root`。

3.  最后，在`config.inc.php`. 不要更改此文件中的任何其他内容。

这对我有用。祝你好运！

丹尼尔

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-09-01T02:33:23.453

PHPMyAdmin 告诉您您的 MySQL 服务缺少 root 密码。您可以通过访问 MySQL 命令行界面来更改它。`mysqladmin -u root password newpass`

[http://www.howtoforge.com/setting-changeing-resetting-mysql-root-passwords](http://www.howtoforge.com/setting-changing-resetting-mysql-root-passwords)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-07-16T17:34:33.847

在 linux (debian 9) 上重置 mysql(Maria DB) root 密码后，您只需编辑位于 /etc/phpmyadmin/config-db.php 的 phpmyadmin db 配置文件

> # gedit /etc/phpmyadmin/config-db.php（作为根）

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-01-04T12:18:37.640

这里的简单步骤，您可以轻松设置 phpMyAdmin 密码。

1.  转到`C:\xampp\phpMyAdmin`并查找`config.inc.php`文件
2.  在 Notepad++ 等文本编辑器中打开`config.inc.php`文件。
3.  `$cfg['Servers'][$a]['auth_type'] = 'config';`在`config.inc.php`文件中找到行。
4.  将单词更改`$cfg['Servers'][$a]['auth_type'] = 'config';`为`$cfg['Servers'][$a]['auth_type'] = 'cookie';`in `config.inc.php`file 并保存更改。
5.  现在打开浏览器并输入`localhost/phpmyadmin`. 输入用户名是**root**。密码为*空*表示为空。您不输入任何内容，然后按 GO 按钮。
6.  现在您可以看到**更改密码**链接。请点击该链接。
7.  设置您的 phpMyAdmin 密码并再次重新输入，然后按 GO 按钮。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2017-09-08T04:11:08.850

1.  转到 phpmyadmin

2.  打开用户帐户部分：

    ![打开用户帐户部分](../Images/a1292a324eef09e3070c6483011e0e48.png)

3.  使用编辑权限

4.  更改密码和用户名

    ![更改密码和用户名](../Images/51dc22dbe2c1d30405c2b77319553781.png)

5.  为数据库添加权限

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2014-05-19T09:51:33.050

*   去`http://localhost/security/index.php`
*   选择语言，它会重定向到`http://localhost/security/xamppsecurity.php`
*   您将在此处找到更改密码的选项

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-07-19T14:31:22.807

我只需要更改`config.inc.php`位于`C:\wamp\apps\phpmyadmin4.1.14`.

在这里输入正确的密码...

```
$cfg['Servers'][$i]['password'] = 'Put_Password_Here'; 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-04-11T12:18:34.613

我刚刚遇到了 mysql 用户密码问题 - 错误 1045: Access denied for user: 'root@localhost' (Using password: NO) - 当我试图在我的操作系统上进行 do-release-upgrade 时。所以我分两步纠正了它。

首先，由于我没有访问 phpmyadmin 的权限，所以我按照 ThoKra 的教程中的“恢复 MySQL 根密码”步骤操作： [https ://www.howtoforge.com/setting-changeing-resetting-mysql-root-passwords](https://www.howtoforge.com/setting-changing-resetting-mysql-root-passwords)

其次，对于我知道密码的用户之一，我根据SonDang的信息通过phpmyadmin本身对其他用户进行了一些密码更改。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-07-19T09:16:54.317

如果您尝试过`mysqladmin -u root password 'your_password'`并且 MySQL 说`denied access`，您需要更改 my.ini 以使该值为`password`空白。然后再试`mysqladmin -u root password 'your_password'`一次。它应该更改您的密码并`my.ini`再次打开并将值更改`password`为以前的值。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2012-09-01T02:31:51.163

我相信你正在寻找的命令是`passwd`

# android - 我可以通过编程将 LayoutParams 设置为片段吗

> ID：12224433
> 
> 赞同：5
> 
> 时间：2012-09-01T02:30:09.980
> 
> 标签：android, android-layout

如何`LayoutParams`以`Fragment` **编程**方式设置？

实际上：我想`Fragments`以`LinearLayout` **编程**方式添加两个，我需要`android:layout_weight`为它们设置。我是新手`Fragment`。`Fragments`我不知道将两个添加到一个中是否是一个好方法`Layout`

对不起。我的英语不是很好。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T01:02:10.947

```
LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(0, LayoutParams.MATCH_PARENT);
params.weight = 3.0f;
fragment.getView().setLayoutParams(params); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-09T21:34:02.653

要在单个父 LinearLayout 中执行 2 个或更多片段的添加/替换/删除/附加/分离事务，我建议遵循以下基本步骤：

在您的 Fragment 类中，确保为您的 Fragment 指定 LayoutParams，将 layout_height（或水平方向的 layout_width）设置为“0”，同时将 layout_weight 设置为某个值：

```
@Override
public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, Bundle savedInstanceState) {
    return inflater.inflate(R.layout.fragment_a, container, false);
}

@Override
public void onActivityCreated(@Nullable Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(0, ViewGroup.LayoutParams.MATCH_PARENT);
    params.weight = 1.0f;
    FragmentManager manager = getActivity().getFragmentManager();
    FragmentA fragmentA = (FragmentA) manager.findFragmentByTag("A");
    fragmentA.getView().setLayoutParams(params);
} 
```

在这里，我展示了单个 Fragment (FragmentA) 类的代码，但请确保在要使用的每个片段中都有相似的块。

现在，在拥有 LinearLayout 的 Activity 内部，这是一个在单个 LinearLayout 中添加此类片段的示例：

```
public void addA(View v) {
        FragmentA fragmentA = new FragmentA();
        FragmentTransaction transaction = fragmentManager.beginTransaction();
        transaction.add(R.id.linearLayout, fragmentA, "A");
        transaction.commit();
} 
```

其中 linearLayout 将是我们活动布局中片段的父级。

# go - 在 golang 中使用 template.ParseFiles 的多个文件

> ID：12224436
> 
> 赞同：20
> 
> 时间：2012-09-01T02:30:48.577
> 
> 标签：go, go-templates

例如.go，我有

```
package main

import "html/template"
import "net/http"

func handler(w http.ResponseWriter, r *http.Request) {
    t, _ := template.ParseFiles("header.html", "footer.html")
    t.Execute(w, map[string] string {"Title": "My title", "Body": "Hi this is my body"})
}

func main() {
    http.HandleFunc("/", handler)
    http.ListenAndServe(":8080", nil)
} 
```

在 header.html 中：

```
Title is {{.Title}} 
```

在页脚.html 中：

```
Body is {{.Body}} 
```

转到时`http://localhost:8080/`，我只看到“标题是我的标题”，而不是第二个文件 footer.html。如何使用 template.ParseFiles 加载多个文件？最有效的方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-01T15:41:42.117

只有第一个文件用作主模板。其他模板文件需要从第一个开始包含，如下所示：

```
Title is {{.Title}}
{{template "footer.html" .}} 
```

`"footer.html"`将数据从`Execute`through 传递到页脚模板后的点- 传递的值成为`.`包含的模板。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-12-04T07:13:20.807

user634175 的方法有个小缺点：`{{template "footer.html" .}}`第一个模板中的 必须是硬编码的，这使得将footer.html 更改为另一个footer 很困难。

这里有一点改进。

header.html：

```
Title is {{.Title}}
{{template "footer" .}} 
```

页脚.html：

```
{{define "footer"}}Body is {{.Body}}{{end}} 
```

这样footer.html就可以改成任何定义“footer”的文件，制作不同的页面

# django - 与中间模型的 M2M 关系的基于类的视图

> ID：12224442
> 
> 赞同：6
> 
> 时间：2012-09-01T02:32:38.993
> 
> 标签：django, many-to-many

我在两个使用中间模型的模型之间建立了 M2M 关系。为了便于讨论，让我们使用手册中的示例：

```
class Person(models.Model):
    name = models.CharField(max_length=128)

    def __unicode__(self):
        return self.name

class Group(models.Model):
    name = models.CharField(max_length=128)
    members = models.ManyToManyField(Person, through='Membership')

    def __unicode__(self):
        return self.name

class Membership(models.Model):
    person = models.ForeignKey(Person)
    group = models.ForeignKey(Group)
    date_joined = models.DateField()
    invite_reason = models.CharField(max_length=64) 
```

我想利用 Django 的基于类的视图，以避免编写 CRUD 处理视图。但是，如果我尝试使用默认的 CreateView，它就不起作用：

```
class GroupCreate(CreateView):
    model=Group 
```

这会呈现一个包含 Group 对象上所有字段的表单，并为成员字段提供一个多选框，这对于简单的 M2M 关系是正确的。但是，没有办法指定 date_joined 或invite_reason，并且提交表单会出现以下 AttributeError：

“无法在指定中间模型的 ManyToManyField 上设置值。请改用 Membership 的 Manager。”

有没有一种巧妙的方法来覆盖通用 CreateView 的一部分，或者编写我自己的自定义视图来使用 mixins 来做到这一点？感觉这应该是框架的一部分，因为 Admin 界面使用内联自动处理与中间体的 M2M 关系。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T14:48:54.967

您必须扩展`CreateView`：

```
from django.views.generic import CreateView

class GroupCreate(CreateView):
    model=Group 
```

并覆盖`form_valid()`：

```
from django.views.generic.edit import ModelFormMixin
from django.views.generic import CreateView

class GroupCreate(CreateView):
    model = Group

    def form_valid(self, form):
        self.object = form.save(commit=False)
        for person in form.cleaned_data['members']:
            membership = Membership()
            membership.group = self.object
            membership.person = person
            membership.save()
        return super(ModelFormMixin, self).form_valid(form) 
```

正如[文档](https://docs.djangoproject.com/en/dev/topics/db/models/#extra-fields-on-many-to-many-relationships)所说，您必须为和`membership`之间的每个关系创建 new 。`group``person`

我在这里看到了`form_valid`覆盖： [Using class-based UpdateView on a mtm with an intermediary model](https://stackoverflow.com/questions/11467287/using-class-based-updateview-on-a-m-t-m-with-an-intermediary-model)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-29T16:43:21.513

```
class GroupCreate(CreateView):
    model = Group

    def form_valid(self, form):
        self.object = form.save(commit=False)

        ### delete current mappings
        Membership.objects.filter(group=self.object).delete()

        ### find or create (find if using soft delete)
        for member in form.cleaned_data['members']:
            x, created = Membership.objects.get_or_create(group=self.object, person=member)
            x.group = self.object
            x.person = member
            #x.alive = True # if using soft delete
            x.save()
        return super(ModelFormMixin, self).form_valid(form) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T11:58:00.963

就在几天前，我面临着同样的问题。Django 在处理中间 m2m 关系方面存在问题。

这是我发现有用的解决方案：

```
1\. Define new CreateView
class GroupCreateView(CreateView):
    form_class = GroupCreateForm
    model = Group
    template_name = 'forms/group_add.html'
    success_url = '/thanks' 
```

然后更改已定义表单的保存方法 - GroupCreateForm。Save 负责将更改永久保存到 DB。我无法仅通过 ORM 完成这项工作，因此我也使用了原始 SQL：

```
1\. Define new CreateView
class GroupCreateView(CreateView):

class GroupCreateForm(ModelForm):
    def save(self):
        # get data from the form
        data = self.cleaned_data
        cursor = connection.cursor()
        # use raw SQL to insert the object (in your case Group)
        cursor.execute("""INSERT INTO group(group_id, name)
                          VALUES (%s, %s);""" (data['group_id'],data['name'],))
        #commit changes to DB
        transaction.commit_unless_managed()
        # create m2m relationships (using classical object approach)
        new_group = get_object_or_404(Group, klient_id = data['group_id'])
        #for each relationship create new object in m2m entity
        for el in data['members']:
            Membership.objects.create(group = new_group, membership = el)
        # return an object Group, not boolean!
        return new_group 
```

注意：我已经稍微改变了模型，如你所见（我有自己独特的 IntegerField 作为主键，不使用序列号。这就是它进入的方式`get_object_or_404`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T04:39:32.843

'作为参考，我最终没有使用基于类的视图，而是做了这样的事情：

```
def group_create(request):
    group_form = GroupForm(request.POST or None)
    if request.POST and group_form.is_valid():
        group = group_form.save(commit=False)
        membership_formset = MembershipFormSet(request.POST, instance=group)
        if membership_formset.is_valid():
            group.save()
            membership_formset.save()
            return redirect('success_page.html')
    else:
        # Instantiate formset with POST data if this was a POST with an invalid from,
        # or with no bound data (use existing) if this is a GET request for the edit page.
        membership_formset = MembershipFormSet(request.POST or None, instance=Group())

    return render_to_response(
        'group_create.html',
        {
            'group_form': recipe_form,
            'membership_formset': membership_formset,
        },
        context_instance=RequestContext(request),
    ) 
```

这可能是基于类的实现的起点，但它很简单，不值得我花时间尝试将它硬塞到基于类的范例中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-09T19:21:07.943

只有一条评论，当使用 CBV 时，您需要使用 commit=True 保存表单，因此创建组并提供可用于创建成员资格的 id。否则，commit=False 时，组对象还没有 id 并出现错误。

# iphone - 在iOS中单击不同的键盘按钮时如何在文本字段中显示不同的字母

> ID：12224446
> 
> 赞同：1
> 
> 时间：2012-09-01T02:33:58.647
> 
> 标签：iphone, ios, uikeyboard, uikeyinput

我通过调用 UIView 来做一个键盘，我有很多不同字母的按钮。我不知道如何在文本字段中获取不同的字母，因为当我触摸不同的按钮时，它会在文本字段中显示相同的字母。告诉用户触摸不同按钮的代码是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T02:48:31.353

所有按钮都应调用相同的 IBAction。

我的被​​称为“-(IBAction)addCharacter:(id)sender”。

然后，您只需执行以下操作：

```
-(IBAction)addCharacter:(id)sender
{
    //you can send an UIButton directly too.
    UIButton *charBtn = (UIButton *)sender;
    NSString *buttonPressed = charBtn.currentTitle.
    //Your UITextField gets modified here.
    //This method will append whatever button is pressed at the end of the string.
    someTextField.text = [someTextField.text stringByAppendingString:buttonPressed];
} 
```

这就是基础。显然，如果您的键盘需要删除最后一个字符，您将需要修改，但使用此基本代码应该很容易做到。

# ios - 无法将 iOS 应用上传到 iOS 应用商店

> ID：12224452
> 
> 赞同：-2
> 
> 时间：2012-09-01T02:35:55.313
> 
> 标签：ios, app-store

我很难将这个应用程序加载到 iOS App Store。我对钥匙串、证书和配置文件的想法非常不满，这可能只是我最后一个 iOS 应用程序。不过，我想尝试将此应用程序上传到我过去 3 个月使用的应用程序商店。无论如何，无论我如何尝试解决这个问题，我都会遇到很多问题。

当我在创建开发人员配置文件并从证书颁发机构执行整个请求证书之后从开发中心下载证书并尝试双击它时，没有任何反应，并且它不会上传到我的钥匙串。请记住，这是我一生中唯一使用过的 Apple 电脑。

当我尝试根据 Apple 的教程创建分发配置文件时，我在 Organizer Provisioning Profiles 中得到*Valid signing identity not found 。*

当我尝试从 Organizer 中的 Archive 进行验证或分发时，它一直在纠缠我寻找开发人员的个人资料，而我没有。当我尝试搜索此主题时，Apple 的开发中心的帮助为零。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T16:53:21.857

Apple 有一份[完整的技术说明 2250](http://developer.apple.com/library/ios/#technotes/tn2250/_index.html)，与解决代码签名问题有关，这对我一直很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T13:59:28.773

试试这个[http://www.youtube.com/watch?v=THKpJrMu204](http://www.youtube.com/watch?v=THKpJrMu204) 这是提交应用程序的 5 个视频系列。我见过的最好的教程——user784044

# mysql - 如何找到不同配对行之间的天数？

> ID：12224461
> 
> 赞同：0
> 
> 时间：2012-09-01T02:39:40.230
> 
> 标签：mysql, sql

我一直在绞尽脑汁想如何在没有 PHP 代码的情况下在一个查询中做到这一点。

简而言之，我有一个记录电子邮件活动的表。为了这个例子，这里是数据：

```
recipient_id     activity     date
1                delivered    2011-08-30
1                open         2011-08-31
2                delivered    2011-08-30
3                delivered    2011-08-24
3                open         2011-08-30
3                open         2011-08-31 
```

目标：我想向用户显示一个数字，告诉用户有多少收件人在 24 小时内打开了他们的电子邮件。

EG“在 24 小时内打开电子邮件的用户：13 位读者”

在上述示例数据的情况下，该值将是“1”。（收件人 1 收到一封电子邮件并在第二天打开它。收件人 2 从未打开它，收件人 3 等了 5 天。）

谁能想到在单个查询中表达目标的方法？

提醒：为了计算，此人必须有一个“已交付”标签和至少一个“打开”标签。每个“打开”标签对每个收件人只计算一次。

** 编辑 ** 抱歉，我使用的是 MySQL

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T03:05:01.880

这是mysql中的一个版本。

```
select count(distinct recipient_id)
from email e1
where e1.activity = 'delivered'
  and exists
        (select * from email e2
         where e1.recipient_id = e2.recipient_id
           and e2.activity = 'open'
           and datediff(e2.action_date,e1.action_date) <= 1) 
```

基本原则是，您希望为在 24 小时内也有打开的收件人找到已交付的行。

这`datediff()`是在 mysql 中进行日期算术的好方法——其他数据库将在此步骤的确切方法上有所不同。其余的 sql 将在任何地方工作。

SQLFiddle在这里： [http ://sqlfiddle.com/#!2/c9116/4](http://sqlfiddle.com/#!2/c9116/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T03:03:07.803

未经测试，但应该可以工作；）不知道您使用哪种 SQL 方言，所以我使用了 TSQL [DATEDIFF](http://www.w3schools.com/sql/func_datediff.asp)函数。

```
select distinct opened.recipient_id -- or count(distinct opened.recipient_id) if you want to know number
from actions as opened 
inner join actions as delivered 
on opened.recipient_id = delivered.recipient_id and delivered.activity = 'delivered'
where opened.activity = 'open' and DATEDIFF(day, delivered.date, opened.date) <= 1 
```

编辑：我把打开和交付混淆了 - 现在被替换了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T03:04:06.930

假设：MySql，表名为“TABLE”

好的，我不是 100% 的，因为我没有表的副本来运行它，但我认为你可以做这样的事情：

```
SELECT COUNT(DISTINCT t1.recipient_id) FROM TABLE t1
INNER JOIN TABLE t2 ON t1.recipient_id = t2.recipient_id AND t1.activity != t2.activity
WHERE t1.activity in ('delivered', 'open') AND t2.activity in ('delivered', 'open')
AND ABS(DATEDIFF(t1.date, t2.date)) = 1 
```

基本上，您将一个表加入到自身上，其中活动不匹配，但接收者 ID 匹配，并且状态为“已交付”或“打开”。您最终会得到的结果如下所示：

```
1 delivered 2011-08-30 1 open 2011-08-31 
```

然后，您将在两个日期之间进行差异（使用绝对值，因为我们不知道它们将处于哪个顺序）并确保它等于 1（或 24 小时）。

# java - 位图内存错误 Android

> ID：12224466
> 
> 赞同：0
> 
> 时间：2012-09-01T02:40:59.683
> 
> 标签：java, android, memory, bitmap

我正在制作一个 Android 游戏，但是当我加载我的位图时，我得到一个内存错误。我知道这是由非常大的位图（它是游戏背景）引起的，但我不知道如何才能避免出现“位图大小扩展 VM 预算”错误。我无法重新缩放位图以使其更小，因为我无法使背景更小。有什么建议么？

哦，是的，这是导致错误的代码：

```
space = BitmapFactory.decodeResource(context.getResources(),
            R.drawable.background);
    space = Bitmap.createScaledBitmap(space,
            (int) (space.getWidth() * widthRatio),
            (int) (space.getHeight() * heightRatio), false); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T02:58:25.063

您将不得不对图像进行采样。显然，您不能将其“缩放”到小于屏幕，但是对于小屏幕等，它不必像大屏幕那样具有高分辨率。

长话短说，您必须使用 inSampleSize 选项进行下采样。如果图像适合屏幕，实际上应该很容易：

```
 final WindowManager wm = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);
    final Display display = wm.getDefaultDisplay();

    final int dimension = Math.max(display.getHeight(), display.getWidth());

    final Options opt = new BitmapFactory.Options();
    opt.inJustDecodeBounds = true;

    InputStream bitmapStream = /* input stream for bitmap */;
    BitmapFactory.decodeStream(bitmapStream, null, opt);
    try
    {
        bitmapStream.close();
    }
    catch (final IOException e)
    {
        // ignore
    }

    final int imageHeight = opt.outHeight;
    final int imageWidth = opt.outWidth;

    int exactSampleSize = 1;
    if (imageHeight > dimension || imageWidth > dimension)
    {
        if (imageWidth > imageHeight)
        {
            exactSampleSize = Math.round((float) imageHeight / (float) dimension);
        }
        else
        {
            exactSampleSize = Math.round((float) imageWidth / (float) dimension);
        }
    }

    opt.inSampleSize = exactSampleSize; // if you find a nearest power of 2, the sampling will be more efficient... on the other hand math is hard.
    opt.inJustDecodeBounds = false;

    bitmapStream = /* new input stream for bitmap, make sure not to re-use the stream from above or this won't work */;
    final Bitmap img = BitmapFactory.decodeStream(bitmapStream, null, opt);

    /* Now go clean up your open streams... : ) */ 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T04:13:26.340

这可能会对您有所帮助：http: [//developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

来自 Android 开发者网站，关于如何有效显示位图 + 其他内容的教程。=]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T05:15:36.897

*   我不明白你为什么要使用`ImageBitmap`？为背景。如果有必要，没关系。否则请使用`Layout`并设置其背景，因为您使用的是背景图像。这个很重要。（检查 Android 文档。他们已经明确指出了这个问题。）

您可以通过以下方式执行此操作

```
 Drawable d = getResources().getDrawable(R.drawable.your_background);
 backgroundRelativeLayout.setBackgroundDrawable(d); 
```

*   在大多数 android 设备中，Intent 大小等于 16MB。您必须按照这些说明[有效地加载大型位图](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

# php - 只向我的 SQL DB 写入一行

> ID：12224467
> 
> 赞同：0
> 
> 时间：2012-09-01T02:41:32.640
> 
> 标签：php, mysql, sql

我正在尝试将一行从一个表移动到另一个表，但它不起作用。它的第一行很好，但没有什么我可以让其余的回声好，只是不要进入我的数据库。

```
$result = mysql_query("SELECT * FROM coffees WHERE id='$id'");

while($row = mysql_fetch_array($result)) {
  mysql_query("INSERT INTO coffeeorder(coffeetype,topping,shots,milk,size,price) VALUES ('coffeetype', 'topping', 'shots', 'milk', 'Size', 'price')");

  echo $row['coffeetype'] . " " . $row['topping']." " . $row['shots']." " . $row['milk']." " . $row['size']." $" . $row['price']."<br />";

  $totalPrice = $totalPrice + $row['price'];
} 
```

任何想法为什么这不起作用？

完整代码：

```
<?php 
session_start();
if(isset($_SESSION["id"])){

$id = $_SESSION["id"];
$name = $_SESSION["name"];

}else {header('Location: index.php');}

 include_once "dbcon.php";
    $totalPrice = 0;
    $result = mysql_query("SELECT * FROM coffees WHERE id='$id'");
while($row = mysql_fetch_array($result))
  {

      mysql_query("INSERT INTO `coffeeorder`(`coffeetype`,`topping`,`shots`,`milk`,`size`,`price`) VALUES ('".$row['coffeetype']."', '".$row['topping']."', '".$row['shots']."', '".$row['milk']."', '".$row['size']."', '".$row['price']."')");

  echo $row['coffeetype'] . " " . $row['topping']." " . $row['shots']." " . $row['milk']." " . $row['size']." $" . $row['price']."<br />";

  $totalPrice = $totalPrice + $row['price'];

  }
    echo "Total Price $".$totalPrice;

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T02:46:57.047

请尝试移至 PDO：

```
<?php
    $db = new PDO('mysql:host=localhost;dbname=testdb;charset=UTF-8', 'username', 'password', array(PDO::ATTR_EMULATE_PREPARES => false, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION));
    $stmt = $db->query("SELECT * FROM coffees WHERE id=:id");
    $stmt->execute(array(':id' => $id));
    $row = $stmt->fetch(PDO::FETCH_ASSOC);

    $stmt = $db->query("INSERT INTO coffeeorder(coffeetype,topping,shots,milk,size,price) VALUES (:coffeetype, :topping, :shots, :milk, :size, :price)");
    $stmt->execute(array(':coffeetype' => $row['coffeetype'], ':topping' => $row['topping'],':shots' => $row['shots'],':milk' => $row['milk'],':size' => $row['size'],':price' => $row['price']));
    echo $row['coffeetype'] . " " . $row['topping']." " . $row['shots']." " . $row['milk']." " . $row['size']." $" . $row['price']."<br />";

    $totalPrice = $totalPrice + $row['price'];

?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T02:54:05.160

您还可以在一个查询中同时执行插入和选择：

```
INSERT INTO `coffeeorder` (
    `coffeetype`,
    `topping`,
    `shots`,
    `milk`,
    `size`,
    `price`
)
SELECT
    `coffeetype`,
    `topping`,
    `shots`,
    `milk`,
    `size`,
    `price`
FROM `coffees`
WHERE `id`='$id' 
```

但是，这会导致多个表中的重复数据。你真正应该做的是把你的表设置得有点不同，在 coffeeorder 表中，而不是存储关于咖啡的所有信息，只存储咖啡的 id。然后在查询出订单的时候，就可以加入咖啡桌，获取咖啡信息。

```
SELECT
   `coffee`.`coffeetype`,
   `coffee`.`topping`,
   `coffee`.`shots`,
   `coffee`.`milk`,
   `coffee`.`size`,
   `coffee`.`price`
FROM `coffeeorder`
    JOIN `coffee`
        ON `coffee`.`id`=`coffeeorder`.`coffee_id` 
```

这是数据库最擅长的（我猜除了存储数据）。

# c++ - 访问属于 WiFi 侦听器回调成员函数的类的成员

> ID：12224476
> 
> 赞同：0
> 
> 时间：2012-09-01T02:44:44.690
> 
> 标签：c++, callback

我有一个 WiFi 侦听器注册为具有固定第 3 方接口的回调（指针函数）。我使用函数的静态成员来注册回调函数，然后该静态函数通过静态强制转换调用非静态成员。主要问题是我无法与班级的任何成员接触生成的 char * buff，我什至无法更改也是班级成员的 int 标志。所有都会导致运行时访问冲突。我能做些什么？请在下面查看我的一些代码。其他问题在代码后说明。

```
void *pt2Object;

TextWiFiCommunication::TextWiFiCommunication()
{
    networkDeviceListen.rawCallback = ReceiveMessage_thunkB;
    /* some other initializing */
}

int TextWiFiCommunication::ReceiveMessage_thunkB(int eventType, NETWORK_DEVICE    *networkDevice)
{
     if (eventType == TCP_CLIENT_DATA_READY)
            static_cast<TextWiFiCommunication *>(pt2Object)->ReceiveMessageB(eventType,networkDevice);
     return 1;
}
int TextWiFiCommunication::ReceiveMessageB(int eventType, NETWORK_DEVICE *networkDevice)
{
     unsigned char outputBuffer[8];
// function from an API that reads the WiFi socket for incoming data
     TCP_readData(networkDevice, (char *)outputBuffer, 0, 8);
     std::string tempString((char *)outputBuffer);
     tempString.erase(tempString.size()-8,8);  //funny thing happens the outputBuffer is double in size and have no idea why
     if (tempString.compare("facereco") == 0)
         cmdflag = 1;
     return 1;
 } 
```

因此，在运行时没有访问冲突的情况下，我无法更改变量 cmdflag。我不能将 outputBuffer 声明为类成员，因为没有写入任何内容，因此我必须在函数中执行此操作。我无法将 outputBuffer 复制到我班级的字符串类型成员。调试器向我展示了 strlen.asm 代码。不知道为什么。我怎样才能解决这个问题？我似乎被囚禁在ReceiveMessageB这个函数中。

提前致谢！

其他一些奇怪的问题包括：即使我将缓冲区大小称为 8。当我使用 outputBuffer 并用它初始化一个字符串时，该字符串的大小为 16。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T04:10:21.670

您可能会遇到访问冲突，因为 p2tObject 未指向有效对象，而是指向垃圾。p2tObject 什么时候初始化？它指向什么？

为此，您的代码应如下所示：

```
...
TextWifiCommunication twc;
p2tObject = reinterpret_cast<void*>(&twc);
... 
```

关于字符串错误， TCP_readData 不太可能以空值终止您给它的字符数组。C 字符串在第一个 '\0'（空）字符处结束。当您将 C 字符串转换为 std::string 时，std::string 会从 C 字符串指针复制字节，直到找到空终止符。在您的情况下，它恰好在 16 个字符之后找到它。

要从 TCP 字节流中读取最多 8 个字符，缓冲区应为 9 个字符长，并且缓冲区的所有字节应初始化为 '\0'：

```
...
unsigned char outputBuffer[9] = { 0 };
// function from an API that reads the WiFi socket for incoming data
TCP_readData(networkDevice, (char *)outputBuffer, 0, 8);
std::string tempString((char *)outputBuffer);
... 
```

# ios - UIImagePickerController 和外部显示

> ID：12224487
> 
> 赞同：2
> 
> 时间：2012-09-01T02:48:19.633
> 
> 标签：ios, ipad, uiimagepickercontroller

我正在编写一个 iPad 信息亭类型的应用程序，它允许访问者使用前置摄像头录制视频并查看相机胶卷中针对外部显示器的现有视频。我只是在学习 XCode，并在针对 iOS 5 的 Xcode 4.4.1 中工作。最近似乎发生了很多变化，这使得学习变得更加困难，所以我试图让事情尽可能简单，这就是我为什么使用 UIImagePicker。

一切都如我所愿，但有一个例外——我无法在外接显示器和 iPad 之间随意切换。当用户录制视频时，它在 iPad 上是全屏的。没关系，但是在他们停止录制后，视频会立即发送到外部显示器以供批准，并且 UIPopover 中会留下一个占位符图像。我宁愿看到/做的是在 iPad 上保持视频预览全屏，或者将视频定位到 UIPopover。

原因是从用户访问 iPad 的位置不容易看到外部显示器。因此，他们被要求批准（单击使用）他们无法真正看到的东西。把它放在iPad上会好得多。下面的代码是我用来记录的。

其他一切都很好，我希望用户从库中选择视频并显示在外接显示器上，因为这是默认行为，它可以正常工作。

到目前为止我能找到的最接近的答案是：[UIImagePickerController in an existing UIPopoverController](https://stackoverflow.com/questions/4627498/uiimagepickercontroller-in-an-existing-uipopovercontroller)

有没有一种简单的方法可以禁用外部显示器或阻止发送视频预览？

```
 - (IBAction)useCameraRoll:(id)sender
{
    if([self.popoverController isPopoverVisible]) {
        [self.popoverController dismissPopoverAnimated:YES];
    } else {
        if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeSavedPhotosAlbum])
        {

            UIImagePickerController *imagePicker =
            [[UIImagePickerController alloc] init];
            imagePicker.delegate = self;
            imagePicker.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
            imagePicker.mediaTypes = [NSArray arrayWithObjects:(NSString *) kUTTypeMovie, nil];

            imagePicker.allowsEditing = NO;

            self.popoverController = [[UIPopoverController alloc] initWithContentViewController:imagePicker];
            //self.popoverController = [[UIPopoverController alloc] setContentViewController:animated];

            self.popoverController.delegate = self;

            [self.popoverController
             presentPopoverFromBarButtonItem:sender  permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];

            newMedia = NO;

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:14:29.460

巧合的是，我一直在使用 iPad 开发类似的信息亭应用程序。就我而言，它利用一些增强现实在外部显示器上显示相关内容。我使用 iPad 屏幕作为增强现实体验的配置面板。

我发现，解决这个问题的最佳方法是为每个显示器使用带有两个 UIScreens 的单独窗口。这使您能够正确地制作体验。我不确定你是否已经在使用这种方法，但如果你没有，那么这就是要走的路。

要开始使用，您可以阅读[ExternalDisplay](http://developer.apple.com/library/ios/#samplecode/ExternalDisplay/Introduction/Intro.html)代码示例。摘自：

从 iOS 开发人员库中的 ExternalDisplay 示例代码：

> 要在外部显示器上显示内容，请执行以下操作：
> 
> 1.  使用 UIScreen 类的屏幕类方法来确定外部显示器是否可用。
>     
>     
> 2.  如果外部屏幕可用，则获取屏幕对象并查看其 availableModes 属性中的值。此属性包含屏幕支持的配置。
>     
>     
> 3.  选择与所需分辨率对应的 UIScreenMode 对象，并将其分配给屏幕对象的 currentMode 属性。
>     
>     
> 4.  创建一个新的窗口对象 (UIWindow) 来显示您的内容。
>     
>     
> 5.  将屏幕对象分配给新窗口的屏幕属性。
>     
>     
> 6.  配置窗口（通过添加视图或设置 OpenGL ES 渲染上下文）。
>     
>     
> 7.  显示窗口。

此外，[UIScreen](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScreen_Class/Reference/UIScreen.html)文档也很有帮助。

# asp.net-mvc - 如何从 jake 运行和停止 IISExpress

> ID：12224490
> 
> 赞同：3
> 
> 时间：2012-09-01T02:48:46.890
> 
> 标签：asp.net-mvc, integration-testing, iis-express, phantomjs, jake

我可以使用以下咖啡脚本行启动 IIS express 以运行我的 mvc 3 应用程序：

```
iisex = jake.createExec(['iisexpress /path:' + process.cwd() + ' /port:9090 /systray:false'], {printStdout: true})
#listening code here
iisex.run() 
```

然后我运行一些茉莉花测试使用

```
ex = jake.createExec(['phantomjs run_jasmine_test.coffee http://localhost:9090/app/applebees_testrunner.html'], {printStdout: true}); 
```

测试通过，现在我想杀死 IISExpress。

问题是现在我有一个长时间运行的进程，并且该进程希望我“按 q”停止服务器。有没有办法将 aq 发送到正在运行的进程以使服务器停止？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:39:09.137

也许这会有所帮助。有没有办法让您运行以下命令（需要以管理员权限打开的 cmd 行 - 手动执行此操作）。iis重置/停止

# jquery - 使用数据属性减少标记

> ID：12224491
> 
> 赞同：0
> 
> 时间：2012-09-01T02:48:54.843
> 
> 标签：jquery, json, html, jquery-animate

我有两个几乎相同的动画......它们之间的区别是“左右”定位。我想为 .forward 和 .backward 重用第一个代码块......我猜这可以通过使用 HTML 5 数据属性或变量来完成，但我不知道如何去吧。

```
 .hover-area { position:relative; width:100%; height:50px; }
  .backward, .forward { position:absolute; }
  .backward{ left:0px; }
  .forward { right:0px; }​

  <div class="hover-area">
      Hover Area
      <div class="backward" data-animate-on='{"left":"20"}' data-animate-off='{"left":"0"}'>Previous</div>
      <div class="forward" data-animate-on='{"right":"20"}' data-animate-off='{"right":"0"}'>Next</div>
  </div>

    $('.forward').css({opacity:0, right:0});
    $('.hover-area').hover(function() {
        $(this).find('.forward').stop()
            .animate({right:20}, {queue:false, duration:300, easing:'easeOutCubic'})
            .animate({opacity:'0.95'}, {queue:false, duration:400, easing:'easeOutCubic'});
    },function() {
        $(this).find('.forward').stop()
            .animate({right:0}, {queue:false, duration:550, easing:'easeOutSine'})
            .animate({opacity:'0'}, {queue:false, duration:300, easing:'easeOutSine'});
    });

    $('.backward').css({opacity:0, left:0});
    $('.hover-area').hover(function() {
        $(this).find('.backward').stop()
            .animate({left:20}, {queue:false, duration:300, easing:'easeOutCubic'})
            .animate({opacity:'0.95'}, {queue:false, duration:400, easing:'easeOutCubic'});
    },function() {
        $(this).find('.backward').stop()
            .animate({left:0}, {queue:false, duration:550, easing:'easeOutSine'})
            .animate({opacity:'0'}, {queue:false, duration:300, easing:'easeOutSine'});
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T02:57:20.213

使用该[`.data()`](http://api.jquery.com/jQuery.data/)函数获取数据属性并将它们用于`.animate()`：

```
$('.backward,.forward').css({opacity:0, right:0});
    $('.hover-area').hover(function() {
        $(this).find('.backward,.forward').stop()
            .animate($(this).data("animate-on"), {queue:false, duration:300, easing:'easeOutCubic'})
            .animate({opacity:'0.95'}, {queue:false, duration:400, easing:'easeOutCubic'});
    },function() {
        $(this).find('.backward,.forward').stop()
            .animate($(this).data("animate-off"), {queue:false, duration:550, easing:'easeOutSine'})
            .animate({opacity:'0'}, {queue:false, duration:300, easing:'easeOutSine'});
    }); 
```

这是一个**[演示](http://jsfiddle.net/D2tCd/)**。​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T02:59:15.960

这似乎是 CSS3 变换动画的不错选择。添加单个类`forward`或`backward`，不包含所有数据属性，并使用 CSS 指定动画属性。

```
.goforward {
    left: 20px;
    transition-property: left;
    transition-duration: 3s;
} 
```

然后只需添加/删除类即可开始动画：

```
$(".forward").addClass("goforward"); 
```

演示：http: [//jsfiddle.net/EMUcV/1/](http://jsfiddle.net/EMUcV/1/)

# javascript - javascript日期库重复十月

> ID：12224492
> 
> 赞同：3
> 
> 时间：2012-09-01T02:49:57.750
> 
> 标签：javascript, datetime

在试图找出我在处理日历时遇到问题的原因时，我遇到了这个问题。当月份设置为 8 时，日期设置为 10 月，当月份设置为 9 时，日期设置为 10 月。测试代码

```
var d = new Date();
document.write(d.getMonth());
d.setMonth(8);
document.write(d.getMonth());
d.setMonth(9);
document.write(d.getMonth());

output:
799 
```

当前日期是 2012 年 8 月 31 日，月份数应该是 7，因为 javascript 月份是从 0 开始的。

有人可以解释一下吗？我已经能够在不止一台计算机上重现它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T02:53:39.873

9 月只有 30 天 - 当您将日期设置为 31（或在某个月的 31 日创建日期）然后将月份更改为少于 31 天的月份 JavaScript 将日期滚动到下个月（在这种情况下十月）。换句话说，日期溢出。

```
> var d = new Date()
> d
Fri Aug 31 2012 22:53:50 GMT-0400 (EDT)
// Set the month to September, leaving the day set to the 31st
> d.setMonth(8) 
> d
Mon Oct 01 2012 22:53:50 GMT-0400 (EDT)

// Doing the same thing, changing the day first
> var d = new Date()
> d
Fri Aug 31 2012 22:53:50 GMT-0400 (EDT)
> d.setDate(30)
> d
Thu Aug 30 2012 22:53:50 GMT-0400 (EDT)
> d.setMonth(8)
Sun Sep 30 2012 22:53:50 GMT-0400 (EDT) 
```

所以简单的答案是，因为今天的日期是 8 月 31 日，而 9 月 31 日是 10 月 1 日。

# ruby-on-rails - 如何在没有相应视图文件的情况下调用 application_controller.rb 中的操作？

> ID：12224493
> 
> 赞同：0
> 
> 时间：2012-09-01T02:49:57.757
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model-view-controller

我正在尝试单击链接来调用此操作。

```
<% link_to "popup", :action => 'user_logs_out', :controller => 'application'%> 
```

在我的应用程序控制器中，我有这个动作：

```
def user_logs_out
    gon.display_sign_out_popup = true
end 
```

我怎样才能调用这个动作？它总是显示模板错误。由于该操作只需要设置一个布尔值，因此我觉得不需要为其提供视图文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T02:55:10.353

如果你真的想要一个动作什么都不渲染，你可以使用[`render :nothing => true`](http://guides.rubyonrails.org/layouts_and_rendering.html#using-render).

```
def user_logs_out
  display_sign_out_popup = true
  render :nothing => true
end 
```

但是，几乎可以肯定您没有理由要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T02:55:23.250

你必须把

```
def user_logs_out
    display_sign_out_popup = true
    respond_to do |format|
      format.js
    end
end 
```

您还必须`:remote => true`输入您的 link_to

...如果您想从头开始学习身份验证，我会推荐 Hartl 的免费教程：[http ://ruby.railstutorial.org/book/ruby-on-rails-tutorial?version=3.2#cha-modeling_users](http://ruby.railstutorial.org/book/ruby-on-rails-tutorial?version=3.2#cha-modeling_users)

# android - 键盘弹出时的固定布局

> ID：12224495
> 
> 赞同：0
> 
> 时间：2012-09-01T02:51:56.933
> 
> 标签：android, android-layout, android-relativelayout, android-softkeyboard

我有一个包含edittext和其他组件的列表视图，当我单击edittext时，键盘弹出，导致列表视图进入底部并清除edittext中的任何文本

任何固定布局或解决此问题的想法

项目.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/t"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingLeft="7dip"
        android:paddingTop="7dip"
        android:text="Mate name"
        android:textSize="20dip" >
    </TextView>

    <RelativeLayout
        android:id="@+id/relativeLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/n"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:drawablePadding="0dip"
            android:drawableRight="@drawable/icon_name" />

        <EditText
            android:id="@+id/eventname"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_toLeftOf="@+id/n" >
        </EditText>
    </RelativeLayout>

    <TextView
        android:id="@+id/t"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingLeft="7dip"
        android:paddingTop="7dip"
        android:text="Match friend"
        android:textSize="20dip" >
    </TextView>

    <RelativeLayout
        android:id="@+id/relativeLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/buttonpartner"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:drawablePadding="0dip"
            android:drawableRight="@drawable/icon_friend" />

        <EditText
            android:id="@+id/editpartner"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_toLeftOf="@+id/buttonpartner" >
        </EditText>
    </RelativeLayout>

    <TextView
        android:id="@+id/t3"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingLeft="7dip"
        android:paddingTop="7dip"
        android:text="Start Mate date"
        android:textSize="20dip" >
    </TextView>

    <RelativeLayout
        android:id="@+id/relativeLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/d"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:drawablePadding="0dip"
            android:drawableRight="@drawable/icon_cal" />

        <EditText
            android:id="@+id/editd"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_toLeftOf="@+id/d" >
        </EditText>
    </RelativeLayout> 
```

添加事件.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/MyList"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:descendantFocusability="beforeDescendants"
         >
    </ListView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T09:56:44.527

您可以将应用程序设置为全屏模式。当你这样做时，即使键盘弹出，元素也是固定的。

我的一个示例 theme.xml 文件：

```
<style name="theme_loading" parent="android:Theme">
    <item name="android:windowBackground">@drawable/loading</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowFullscreen">false</item>
    <item name="android:textSize">14sp</item>
    <item name="android:textColor">@color/textOptionsColor</item>
    <item name="android:radioButtonStyle">@style/rbStyle</item>
    <item name="android:buttonStyle">@style/ButtonStyle</item>
</style> 
```

# php - 对用于产品定制的 PHP 电子商务框架的建议？

> ID：12224497
> 
> 赞同：3
> 
> 时间：2012-09-01T02:52:08.523
> 
> 标签：php, magento, e-commerce, prestashop

我正在对一个项目进行一些尽职调查，用户可以在该项目中大量定制具有几乎无数选项的各种产品。员工/管理员需要设置新的产品类别和属性，为每个属性上传选项，为每个属性选项配置成本大小。

我以前用过 Magento，一直在看[Prestashop 的数据模型](http://doc.prestashop.com/download/attachments/1409078/prestashop-datamodel.png)。过去，为 Magento 开发功能对我来说一直感觉就像在 tar 中游泳，我开始转向滚动自定义构建。

对于那里的经济大师；是否有允许这种事情的 PHP 框架？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T03:12:23.550

我向您推荐 Pimcore。我只是在开发 eshop，其中的产品有很多不同的属性，我只是喜欢 Pimcore 处理它的方式。它是一个通用的 cms，而不是电子商务，但如果您制作定制的解决方案，它的对象方法只适合您。在 Pimcore 中，您可以随时*设置新的产品类别和属性*，但您总是需要一些编程支持。更简单的方法是只拥有一个产品类，并让它具有允许进行预期定制的属性，例如对象砖（您可以添加到产品中的一组附加属性）或表格（只是一个用户可以指定任何内容的简单结构并且您可以根据需要对其进行解释）。它是基于 Zend 的非常灵活的系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-30T09:09:00.987

美好的一天，我们有简单的**pimcore - magento 桥**，

它包括 2 个扩展：

magento 扩展[https://github.com/oleksandrmakhno/api-bridge-pimcore](https://github.com/oleksandrmakhno/api-bridge-pimcore)

pimcore 插件[https://github.com/oleksandrmakhno/api-bridge-magento](https://github.com/oleksandrmakhno/api-bridge-magento)

使用自定义 api 逻辑轻松扩展它，享受 :)

# xna - XNA 生涩渲染

> ID：12224498
> 
> 赞同：0
> 
> 时间：2012-09-01T02:52:22.637
> 
> 标签：xna

我不知道我在哪里犯错。我在 youtube 上看到了一些演示，它们实时渲染了大约 100 万个粒子（令人惊叹）。但是，当我只想渲染 2500 个小正方形（Texture2D）时，系统就会崩溃——一切都变得缓慢而生涩。在这里，我按原样呈现循环 - 简单的平铺到平铺渲染。网格为 50 x 50，Texture2D Tile 只有 5x5 大 png 图像和 GridNode 3x3。我是 XNA 的新手，所以请不要打我太多... :-)

谁能告诉我，我做错了什么？

非常感谢

```
for (x = FromCol; x <= ToCol; x++)
            {
                for (y = FromRow; y <= ToRow; y++)
                {
                    Color aColor = new Color((byte)(x * 20), (byte)(y * 15), (byte)(60 + x));

                    CoordX = DisplayArea.Left + (int)Math.Round((x - FromCol) * zoomWidth - (restCol * ZoomingX) - indent_x);//
                    CoordY = DisplayArea.Top + (int)Math.Round((y - FromRow) * zoomHeight - (restRow * ZoomingY) - indent_y);//

                    dodraw = ((CoordX) > DisplayArea.Left) & (CoordX < (DisplayArea.Right - indent_x)) & ((CoordY) > DisplayArea.Top) & (CoordY < (DisplayArea.Bottom-indent_y));

                    l = CoordX + indent_x;
                    t = CoordY + indent_y; 
                    r = l + (int)Math.Round(ColWidth * ZoomingX);
                    b = t + (int)Math.Round(RowHeight * ZoomingY);

                    if (l < DisplayArea.Left) l = DisplayArea.Left;
                    if (t < DisplayArea.Top)  t = DisplayArea.Top;
                    if (r > (DisplayArea.Left + DisplayArea.Width)) r = DisplayArea.Left + DisplayArea.Width;
                    if (b > DisplayArea.Top + DisplayArea.Height) b = DisplayArea.Top + DisplayArea.Height;

                    SpriteBatch.Draw(Tile, new Rectangle(l, t, r - l, b - t), aColor);

                    if (dodraw) SpriteBatch.Draw(GridNode, new Vector2(CoordX, CoordY), Color.White);
                } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T08:34:58.900

赛斯的回答几乎是正确的。当你向 GPU 发送一个批次时——当你绘制一些东西时——它会占用相对大量的 CPU 时间。实际上，您仅限于每帧发送*几百个*批次 - 您的“批次限制”。

`SpriteBatch`通过将尽可能多的精灵打包到一个批次中来解决这个问题。它实际上只在`End()`^([1])中绘制东西。但是，如果它们共享一个纹理，它只能将精灵批处理在一起。

**您在这里几乎遇到了最坏的情况：看起来您正在交错纹理，强制`SpriteBatch`为每个精灵启动一个新批次。**

所以首先要做的是检查这是否*真的*是你的问题的原因。一个快速的方法是设置`SpriteSortMode.Texture`(in `SpriteBatch.Begin`) 并查看性能是否有所提高。这将完全符合听起来的样子——在绘制顺序中按纹理对精灵进行分组，从而减少纹理更改的数量，从而减少批次。

然后你就可以开始着手解决这个问题了。如果您可以继续使用`SpriteSortMode.Texture`，那很好。您还可以将循环转换为两个单独的循环。`SpriteBatch`或者您可以在一个循环中填充两个单独的对象 -`SpriteBatch`基本上充当缓冲区^([1])。

或者，如果您真的需要交错的这些纹理，则使用**sprite sheet**。

最后，我[在 GameDev 网站上写了这个相当流行的答案，](https://gamedev.stackexchange.com/a/9289/288)其中更详细地介绍了这个主题。

* * *

[1] 使用时除外`SpriteSortMode.Immediate`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T03:40:33.453

您正在对 Draw 方法进行 2500 次调用。每次告诉 CPU 向 GPU 发出指令时，都会产生巨大的处理开销。这就是为什么你的表现比*在一次绘制调用*中绘制一百万个粒子的游戏更差的原因。

一次绘制 1000 个三角形比绘制 1 个三角形 1000 次要快得多。

# php - 如何在 HTML 上保存投票获取和保存投票结果

> ID：12224503
> 
> 赞同：0
> 
> 时间：2012-09-01T02:54:22.457
> 
> 标签：php, jquery, mysql, html, web-services

我对此有点困惑。我正在使用 HTML/CSS 制作网页。我有一些 JQUERY 的东西，比如 SlideShow。我想在那里添加一个民意调查，但我不确定如何保存和加载它。

我想以最简单的方式做到这一点。

我也不确定在哪里保存结果。我在想当用户点击“提交”时，它会将信息保存到文本文件中，它也会从中得到结果。

我猜我也可以使用数据库。

任何人都知道我将如何做到这一点？任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T03:09:48.850

如果您不使用某种 CMS 平台（例如 wordpress 或 joomla）以及此类平台可能提供的一些扩展，那么设置投票将不是一项简单的任务。

就存储/检索数据的最佳方法而言，与将数据写入文本文件相比，数据库更为常见（也更容易）。

[如果您不熟悉与 php 和 mysql 的数据库交互， http://www.w3schools.com/php/php_mysql_intro.asp](http://www.w3schools.com/php/php_mysql_intro.asp)是一个很好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T03:09:50.507

访问[http://www.w3schools.com/php/php_intro.asp](http://www.w3schools.com/php/php_intro.asp)并学习如何使用 ajax。

通过 javascript 将数据从 html 发送到一个简单的 php 脚本。写入 sqlite 甚至 mysql，并以相同的方式检索数据。即时投票！然后您可以学习（或让其他人为您做）适当的安全性和错误处理，以获得良好和稳定的用户体验:)

要获得更好的详细信息，您必须向我们提供您正在构建的网络的范围！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T03:10:11.097

实现这一目标的最佳方法是使用数据库。它将为您节省大量时间和大量编码。

*   对于初学者，您应该阅读这个关于 PDO 或 MySQLi 的不错的[TUTORIAL](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)，但我个人推荐 PDO，它更易于使用且易于理解。
*   下一步是您在该轮询中加载的信息以及如何将其发送到将其插入数据库的处理器，请确保您尽可能使表单可读，因为您将处理它并保存它并您还将阅读它以显示在客户端浏览器上。
*   网上有很多例子，打开谷歌搜索一下。
*   确保优化您的 HTML 代码和 PHP 代码，即使您正在为您的站点/博客编写代码，如果代码格式不正确或缩进不正确，您将在 2-3 年内不明白您在那里做了什么。
*   没有最简单的方法。

# c# - Matlab 绘图

> ID：12224504
> 
> 赞同：0
> 
> 时间：2012-09-01T02:54:39.353
> 
> 标签：c#, visualization, matlab, matlab-deployment

给定`t1,t2,t3,t4` 为实值参数，以及以下格式的约束：

```
(t1>=0 and t2>=0 and t3>=0 and t4>=0) 
```

和

```
((t2<=5) or (t1+t2+t3+t4<=3)) 
```

可以使用 matlab 的 .net 库绘制此约束吗？（我正在使用 C#）。

我关心的是： 1.这有四个维度，我不确定在Matlab中如何表示图形；2.基本上这个约束可能会导致一个凸多边形，这样的多边形可以在Matlab中绘制吗？

我是 Matlab 的新手，因此如果可能的话，一些代码片段和结果对我很有帮助。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T03:25:37.433

我只能解决它的 Matlab 方面，因为我不熟悉 C#，但我认为 Matlab .NET 编译器应该能够导出所有函数？

1：您可以使用动画 3D 散点图（以及曲面、网格、线图等变体）绘制 4 维数据。如果你仔细想想，你的普通 3D 视频游戏基本上是一个 4D 情节。对于散点图，从 0 秒开始，仅绘制 t4 = 0、x=t1、y=t2、z=t3 的点。在 1 秒时，仅绘制 t4=1 的那些。在 2 秒时，只有 t4=2，依此类推，直到达到 max(t4)，然后循环返回。

您还可以将颜色用作第 4 维，以便在 3D 空间中拥有彩色点。

我认为，从可以概括到其他情节的点。

请参阅[http://www.mathworks.com/help/techdoc/ref/scatter3.html](http://www.mathworks.com/help/techdoc/ref/scatter3.html)和[http://www.mathworks.com/help/techdoc/ref/surf.html](http://www.mathworks.com/help/techdoc/ref/surf.html)。

2：让我澄清一些事情。鉴于您的初始条件，没有坐标可以是负数：

*   `t2<=5`定义了一个无限 4 维空间的“板”，它在 3 维空间中是无限的，在 1 维空间中是有限的（它有 5 个单位厚）。板的一条边位于原点 和 之间，连接到原点的其他三个边沿和轴`<0, 5, 0, 0>`在正方向上延伸至无穷远`t1`。`t3``t4`
*   `t1+t2+t3+t4<=3`定义一个有限的 4 维金字塔，其尖端位于原点，底部朝该`<+, +, +, +>`方向。

给定您的`OR`，结果是这两个空间的并集。(hyper)pyramid 已经是 (hyper)slab 的一个子集，所以第二个表达式是多余的。平板是微不足道的，所以我将展示如何只可视化金字塔。

为了将其可视化，我认为您应该将 t4 设置为 10 个不同的值，并将其他 3 个参数中的每一个都绘制为不同颜色的表面。

一个例子：

```
clc
clear
close all

n = 10;

% Manually calculated maximae of x, y, z axes
x = [0 0; 0 3];
y = [0 0; 3 0];
z = [3 3; 0 0];   % surf can only draw polygons, not triangles, so we just squash two points together

% Actual t will be derived from this algorithmically
t = [3 3; 3 3];

% So plots don't replace each other
hold on

for i = 0:0.1:1
    % Manually derived
    surf(x*i, y*i, z*i, t*(1-i));
end
hold off

% Just some aesthetic stuff
xlabel('t1'); 
ylabel('t2'); 
zlabel('t3');
grid on
colormap('hot') 
```

![在此处输入图像描述](../Images/32a4b7b0cf215140f0d8c9add2f5619f.png)

对于不同的 t4，每种颜色都是金字塔的底部（尖端位于原点） - 您可能会想象 3D 金字塔会随着时间的推移而“缩小”。

我不知道相关性，但凸多边形在 Matlab 中非常好：

```
plot([0 0 1 1 2 2 3 3 0], [0 2 2 1 1 2 2 0 0]); axis([-1 4 -1 4]) 
```

# javascript - jQuery无限循环，动画很多项目？

> ID：12224506
> 
> 赞同：0
> 
> 时间：2012-09-01T02:54:57.773
> 
> 标签：javascript, jquery

首先，这是一个 jFiddle，它可以帮助您了解我的来源：http: [//jsfiddle.net/gfyans/x9fGS/](http://jsfiddle.net/gfyans/x9fGS/)（这很粗糙，现在是凌晨 4 点，所以它不是世界上最棒的代码）。

基本上我想做的是在我的文档中创建一堆 div 并同时为每个 div 的不透明度设置动画。

我让它创建网格并一个接一个地制作动画，但我被困在并发动画上。我认为 setInterval 不适合用于我想要的东西？

谢谢，格雷格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T03:41:18.793

您只能设置一个触发事件到所有框的时间间隔。就像在这个片段中一样：

```
var boxes$ = $('.boxItem');

// Triggers the event for all the boxes
function forceAnimate() {
    boxes$.trigger('box.animate');
}

setInterval(forceAnimate, interval); 
```

这是一个[**工作演示**](http://jsfiddle.net/f0t0n/WrSqS/)，希望对您有所帮助。

# iphone - 如何检测我的用户正在使用哪个 iOS 设备？

> ID：12224508
> 
> 赞同：7
> 
> 时间：2012-09-01T02:55:12.190
> 
> 标签：iphone, objective-c, ipad, device, uidevice

我正在寻找一种方法来检测我的应用程序正在运行的设备。我对软件版本不感兴趣。我搜索了很多问题，但没有一个（令人惊讶）满足我的需求，原因如下：

**解决方案1：**

```
NSString *deviceType = [UIDevice currentDevice].model; 
```

这不起作用，因为它只给了我“iPad”。我想知道是 iPad、iPad 2、新 iPad、iPhone 3GS、iPhone4 等。

**解决方案 2：**不测试设备类型，检查单个功能

这不适用，因为我希望这些数据收集用户统计信息，而不是执行任何特定于设备的操作。

**解决方案 3：使用**[此处](https://gist.github.com/1323251)找到的 UIDeviceHardware

这段代码看起来已经过时了，似乎可以访问设备上的私人数据。甚至存在争议，使用它的应用程序是否会获得批准。更重要的是，我不知道它是如何工作的 :) 另一种方法也可以在[这里找到](https://github.com/erica/uidevice-extension)

我提到的最后两个中的任何一个都可以安全使用吗？他们未来是否合规？它们是否符合 Apple 的审批规则？

或者有没有其他方法可以解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T03:52:34.427

Apple 在其示例代码中使用了这样的 API。要引用`LargeImageDownsizing`示例项目，请在第`LargeImageDownsizingViewController.m`83 行开始的文件中：

> 可以选择适当的结果图像大小和图块大小，但留给开发人员作为练习。请注意，设备类型/版本字符串（例如“iPhone2,1”可以在运行时通过使用 sysctlbyname 函数来确定：

```
size_t size;
sysctlbyname("hw.machine", NULL, &size, NULL, 0);
char *machine = malloc(size);
sysctlbyname("hw.machine", machine, &size, NULL, 0);
NSString* _platform = [NSString stringWithCString:machine encoding:NSASCIIStringEncoding];
free(machine); 
```

_platform 在我的情况下将`iPod4,1`用于 iPod touch 第 4 代。

此代码是您发布的两个 Github 示例的根目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T03:47:45.880

从技术上讲，`[UIDeviceHardware platform]`应该可以正常工作，您应该按原样将其发送到您的服务器。如果平台 ID 在未来的操作系统中发生变化，您还应该将 iOS 版本与平台 ID 一起发送，以免您遇到麻烦。

因为`sysctlbyname`这里使用的函数有据可查，所以我认为 Apple 不能使用 2.5 号规则来对付你。但是，仍然存在第 17.1 条规则：

> 17.1 未经用户事先许可，应用程序不得传输有关用户的数据，并为用户提供有关数据使用方式和使用地点的信息的访问权限

设备平台是否与用户有关是有争议的。我的建议是你应该提交应用程序，假设你没有违反 17.1 并且永远不要提及这一点。审阅者很可能不知道您在幕后做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T07:45:06.247

您提到的 UIDeviceHardware 已经足够好，但有点过时了。你可以试试[这个](https://github.com/eagle-dan1349/EDDeviceHardware) Made it more apple-style，所以他们可能会更喜欢它。

# iphone - 未找到 AVFoundation/AVCaptureDevice.h

> ID：12224515
> 
> 赞同：2
> 
> 时间：2012-09-01T02:56:10.717
> 
> 标签：iphone, objective-c

我想在 theos 调整中使用此标头**#import < AVFoundation/AVCaptureDevice.h >**，但出现此错误：

> AVFoundation/AVCaptureDevice.h：不是这样的文件或目录

我还将 AVFoundation 框架添加到 makefile 中。

如果我这样做**#import < AVFoundation/AVFoundation.h>** 工作正常，但我需要这个头文件**AVCaptureDevice.h**

帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T03:00:17.777

编辑：抱歉，由于某种原因，我完全错过了您帖子的下半部分。只需导入整个 AVFoundation 框架。它将为您包含 AVCaptureDevice 标头。

* * *

对于 Theos 项目，您需要将框架添加到您的 makefile。

查找此行（如果不存在，请手动添加）：

```
*YOUR_PROJECT_NAME*_FRAMEWORKS 
```

您可以在其中添加要使用的任何公共框架。假设您的应用名为“myVideo”并且您想要添加 AVFoundation 框架，您可以这样做：

```
myVideo_FRAMEWORKS = AVFoundation 
```

作为附加信息，如果您想添加更多框架，请执行以下操作：

```
myVideo_FRAMEWORKS = AVFoundation UIKit 
```

# mysql - 如何从教义内部连接访问树枝中的对象方法

> ID：12224516
> 
> 赞同：0
> 
> 时间：2012-09-01T02:56:43.560
> 
> 标签：mysql, arrays, join, symfony, twig

我有一个成员实体和一个朋友实体。我通过加入表格来获得成员的所有朋友。我通过 加入朋友的成员`member_id`。

表结构：

成员 `member_id, full_name, email, password, date_joined`

朋友们 `friendship_id, member_id, friend_id`

一切都很好，但我无法`full_name`获得`friend_id`. 我运行命令行来生成实体中的 getter、setter 和连接信息。

在 twig 中，我从控制器中获取了 friends 数组并调用`friend.fullName`返回我的名字，而不是我的朋友的名字，但我加入了`member_id`，所以这很好。

我需要在没有 2 个查询的情况下获取`fullName`id的`member`。`friend_id`

前任。

`member_id: 1, full_name:John`

朋友 `member_id: 22, full_name:Billy`

我可以打电话`friend.friendId`，它会返回 22，我很难得到`fullName`

会员单位

```
<?php

namespace Pixbelly\AppBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;

/**
* Pixbelly\AppBundle\Entity\Members
*
* @ORM\Table(name="members")
* @ORM\Entity(repositoryClass="Pixbelly\AppBundle\Repository\MembersRepository")
 */
class Members
{
/**
 * @var integer $memberId
 *
 * @ORM\Column(name="member_id", type="integer", nullable=false)
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="IDENTITY")
 */
private $memberId;

/**
 * @var string $fullName
 *
 * @ORM\Column(name="full_name", type="string", length=255, nullable=false)
 */
private $fullName;

/**
 * @var string $email
 *
 * @ORM\Column(name="email", type="string", length=255, nullable=false)
 */
private $email;

/**
 * @var string $password
 *
 * @ORM\Column(name="password", type="string", length=255, nullable=false)
 */
private $password;

/**
 * @var \DateTime $dateJoined
 *
 * @ORM\Column(name="date_joined", type="datetime", nullable=false)
 */
private $dateJoined;

/**
 * @ORM\OneToMany(targetEntity="Friends", mappedBy="member")
 */
protected $friends;

public function __construct()
{
    $this->friends = new ArrayCollection();
}

/**
 * Get memberId
 *
 * @return integer 
 */
public function getMemberId()
{
    return $this->memberId;
}

/**
 * Set fullName
 *
 * @param string $fullName
 * @return Members
 */
public function setFullName($fullName)
{
    $this->fullName = $fullName;

    return $this;
}

/**
 * Get fullName
 *
 * @return string 
 */
public function getFullName()
{
    return $this->fullName;
}

/**
 * Set email
 *
 * @param string $email
 * @return Members
 */
public function setEmail($email)
{
    $this->email = $email;

    return $this;
}

/**
 * Get email
 *
 * @return string 
 */
public function getEmail()
{
    return $this->email;
}

/**
 * Set password
 *
 * @param string $password
 * @return Members
 */
public function setPassword($password)
{
    $this->password = $password;

    return $this;
}

/**
 * Get password
 *
 * @return string 
 */
public function getPassword()
{
    return $this->password;
}

/**
 * Set dateJoined
 *
 * @param \DateTime $dateJoined
 * @return Members
 */
public function setDateJoined($dateJoined)
{
    $this->dateJoined = $dateJoined;

    return $this;
}

/**
 * Get dateJoined
 *
 * @return \DateTime 
 */
public function getDateJoined()
{
    return $this->dateJoined;
}

/**
 * Add friends
 *
 * @param Pixbelly\AppBundle\Entity\Friends $friends
 * @return Members
 */
public function addFriend(\Pixbelly\AppBundle\Entity\Friends $friends)
{
    $this->friends[] = $friends;

    return $this;
}

/**
 * Remove friends
 *
 * @param Pixbelly\AppBundle\Entity\Friends $friends
 */
public function removeFriend(\Pixbelly\AppBundle\Entity\Friends $friends)
{
    $this->friends->removeElement($friends);
}

/**
 * Get friends
 *
 * @return Doctrine\Common\Collections\Collection 
 */
public function getFriends()
{
    return $this->friends;
}
} 
```

朋友实体

```
<?php

namespace Pixbelly\AppBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Pixbelly\AppBundle\Entity\Friends
 *
 * @ORM\Table(name="friends")
 * @ORM\Entity(repositoryClass="Pixbelly\AppBundle\Repository\FriendsRepository")
 */
class Friends
{
 /**
 * @var integer $id
 *
 * @ORM\Column(name="friendship_id", type="integer", nullable=false)
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="IDENTITY")
 */
private $friendshipId;

/**
 * @var integer $memberId
 *
 * @ORM\Column(name="member_id", type="integer", nullable=false)
 */
private $memberId;

/**
 * @var integer $friendId
 *
 * @ORM\Column(name="friend_id", type="integer", nullable=false)
 */
private $friendId;

/**
 * @ORM\ManyToOne(targetEntity="Members", inversedBy="friends")
 * @ORM\JoinColumn(name="member_id", referencedColumnName="member_id")
 */
protected $member;

/**
 * Get friendshipId
 *
 * @return integer 
 */
public function getFriendshipId()
{
    return $this->friendshipId;
}

/**
 * Set memberId
 *
 * @param integer $memberId
 * @return Friends
 */
public function setMemberId($memberId)
{
    $this->memberId = $memberId;

    return $this;
}

/**
 * Get memberId
 *
 * @return integer 
 */
public function getMemberId()
{
    return $this->memberId;
}

/**
 * Set friendId
 *
 * @param integer $friendId
 * @return Friends
 */
public function setFriendId($friendId)
{
    $this->friendId = $friendId;

    return $this;
}

/**
 * Get friendId
 *
 * @return integer 
 */
public function getFriendId()
{
    return $this->friendId;
}

/**
 * Set member
 *
 * @param Pixbelly\AppBundle\Entity\Members $member
 * @return Friends
 */
public function setMember(\Pixbelly\AppBundle\Entity\Members $member = null)
{
    $this->member = $member;

    return $this;
}

/**
 * Get member
 *
 * @return Pixbelly\AppBundle\Entity\Members 
 */
public function getMember()
{
    return $this->member;
}
} 
```

# php - Javascript 行为与 PHP 包含文件不一致

> ID：12224520
> 
> 赞同：1
> 
> 时间：2012-09-01T02:57:41.803
> 
> 标签：php, javascript

我有一个非常简单的 javascript 动画，看起来像这样

```
$(function() {
$('#slider1').cycle();
$('#slider2').cycle();
}); 
```

然后我像这样在这个脚本中调用：

```
<script type="text/javascript" src="js/slider.js"></script> 
```

然后 id 为“slider1”和“slider2”的 div 包含在 php 包含文件中，这些文件被调用到页面中，如下所示：

```
<?php include('assets/col1.php'); ?> 
```

包含文件中的代码如下所示：

```
<div id="slider1">
<img src="images/image1.png" />
<img src="images/imgae2.png" />
<img src="images/image3.png" />
<img src="images/image4.png" />
</div> 
```

除非您使用 IE8 或 IE9，否则它工作正常。javascript 将在大约 75% 的时间内工作，这就是为什么这让我感到困惑。当您加载页面或返回页面时，每隔一段时间它就不会激活 javascript，并且所有图像都呈现在一长列中（基本上是没有 js 函数的样子）

我怀疑它在 IE9 加载 PHP 和 javascript 的顺序中的某些东西，但我只是 js 和 php 的新手，所以关于如何解决这个问题的一些非常明确的帮助会非常棒。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T03:01:12.163

好长的故事……

PHP 将返回解释的 HTML。每次包含文件时，PHP 都会刷新缓冲区，这意味着某些内容会先于其他内容返回到浏览器。发生这种情况时，页面仍处于加载状态。

因此，您需要确保调用`$(document).ready(function(e){ ... });`. 这将使您的代码有机会在执行 javascript 之前完成刷新缓冲区并加载到浏览器中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T06:20:25.337

我在使用Dojo的时候也遇到过类似的问题，解决方法如下： 将主div或父div的显示样式设置为none：

```
<div id="g_body" style="display:none"> 
```

现在，一旦 Dojo 完成加载，我使用 dojo.ready 函数将显示样式更改为阻塞：

```
require(["dojo/ready", "dojo/parser", "dijit/registry"], function(ready, parser, registry){
  ready(function(){
    if(document.getElementById("g_body")!= null){
        document.getElementById("g_body").setAttribute("style","display:block");
    }
  });
}); 
```

然后页面仅在 Dojo 元素完全加载时显示。

我相信 jQuery 中有类似的东西，但我不确定。大概：

```
$(document).ready(function() {}); 
```

希望这可以帮助。

# c# - 如何更改网络浏览器控件中的下拉框？

> ID：12224535
> 
> 赞同：4
> 
> 时间：2012-09-01T02:59:56.897
> 
> 标签：c#, drop-down-menu, webbrowser-control

所以我有一个要更改的列表框，如下所示：

![在此处输入图像描述](../Images/c1ba04a518069e44b2298ccbcb3b12ef.png)

如何更改 7 月值？我需要将其 100% 自动化并将其更改为 1 月。我在各种网站上创建了很多帐户，需要将它们全部改回相同的生日。是的，我知道我必须找到它的 ID，等等。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-01T09:20:51.560

查看网站的 HTML 并识别下拉列表的**id**和**值**，例如：

```
<select id="bdayMonthId" size="1" name="bdayMonth">
    <option value="">Month</>
    <option value="Jan">January</>
    <option value="Feb">February</>
    <option value="Mar">March</>
</select> 
```

要在 WebBrowser 控件中预先选择下拉列表值，请使用以下 Winform 代码：

```
webBrowser1.Document.GetElementById("bdayMonthId").SetAttribute("value", "Feb"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-14T21:25:26.803

我对你的问题有点困惑。如果您只想更改 HTML 中的元素，[Jeremy](https://stackoverflow.com/users/495455/jeremy-thompson)的答案是最好的也是最简单的方法。如果您想调用文档的 javascript，这应该可以：

假设网络浏览器的文档包含以下 HTML：

```
<html>
    <head>
    <title>Invoke Test</title>
    </head>
    <body>
        <div id="testdiv">Waiting...</div>
        <script>
            function changeDate(date) {
                var x=document.getElementById("testdiv");
                x.innerHTML = date;
            }
        </script>
    </body>
</html> 
```

要调用 webbrowser 文档的 javascript 方法，您可以使用如下内容：

```
private void button1_Click(object sender, EventArgs e)
{
    object o = webBrowser1.Document.InvokeScript("changeDate('june')");
} 
```

不需要 System.Web、ASP、ScriptManagers 或 Interop。控制 webbrowser 和文档对象和事件所需的所有工具都带有 webbrowser 控件。

# .net - 弱命名的 .NET 程序集是否包含带有哈希的清单

> ID：12224540
> 
> 赞同：2
> 
> 时间：2012-09-01T03:00:10.160
> 
> 标签：.net, security, hash

具有强名称的 .NET 程序集的一个特性是抗篡改。一旦计算出程序集内容的哈希值，就会使用私钥对其进行加密，然后将其保存为程序集清单的一部分。我想知道 - 如果程序集没有强名称怎么办，散列会发生什么？它是否未加密保存到清单中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T12:01:08.860

PE 格式文件的哈希证据和 .Net 程序集的强名称之间存在差异。请参阅[http://blogs.msdn.com/b/shawnfa/archive/2005/02/28/382027.aspx](http://blogs.msdn.com/b/shawnfa/archive/2005/02/28/382027.aspx)以获得很好的解释。

# macos - Mac OSX 上的 wcout 问题

> ID：12224543
> 
> 赞同：4
> 
> 时间：2012-09-01T03:00:37.657
> 
> 标签：macos, unicode, char

我正在尝试使用 unicode 字符在终端中绘制一些简单的方框图。但是我注意到 wcout 不会为方框图字符输出任何内容，甚至不会输出占位符。所以我决定编写下面的程序并找出支持哪些 unicode 字符，发现 wcout 拒绝输出任何高于 255 的内容。我需要做些什么才能使 wcout 正常工作吗？为什么不能访问任何扩展的 unicode 字符？

```
#include <wchar.h>
#include <locale>
#include <iostream>

using namespace std;

int main()
{
    for (wchar_t c = 0; c < 0xFFFF; c++)
    {
        cout << "Iteration " << (int)c << endl;
        wcout << c << endl << endl;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2020-12-28T14:54:58.570

我不推荐使用`wcout`，因为它不可移植、效率低下（总是执行转码）并且不支持所有 Unicode（例如代理对）。

相反，您可以使用[开源 {fmt} 库](https://github.com/fmtlib/fmt)来便携式打印 Unicode 文本，包括[绘图字符](https://en.wikipedia.org/wiki/Box_Drawing_(Unicode_block))，例如：

```
#include <fmt/core.h>

int main() {
  fmt::print("┌────────────────────┐\n"
             "│   Hello, world!    │\n"
             "└────────────────────┘\n");
} 
```

打印（[https://godbolt.org/z/4EP6Yo](https://godbolt.org/z/4EP6Yo)）：

```
┌────────────────────┐
│   Hello, world!    │
└────────────────────┘ 
```

**免责声明**：我是 {fmt} 的作者。

# gnuplot - Gnuplot更改直方图中条形的颜色

> ID：12224545
> 
> 赞同：15
> 
> 时间：2012-09-01T03:00:59.330
> 
> 标签：gnuplot, histogram

是否可以动态更改 Gnuplot 脚本中的条形颜色？我有以下脚本

```
reset
fontsize = 12
set term postscript enhanced eps fontsize
set output "bargraph_speedup.eps"
set style fill solid 1.00 border 0
set style histogram
set style data histogram
set xtics rotate by -45
set grid ytics linestyle 1
set xlabel "Benchmarks" font "bold"
set ylabel "Relative execution time vs. reference implementation" font "bold"
set datafile separator ","
plot 'bm_speedup.dat' using 2:xtic(1) ti "Speedup" linecolor rgb "#00FF00" 
```

生成此图：

![生成的图](../Images/57484bf0fcd0975accc384fbdda9aeb0.png)

是否可以将零以下的条形颜色设为红色？

谢谢，
斯文

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-02T23:37:43.417

`boxes`您可以使用以下样式模仿此行为：

我的测试数据：

```
zip 2
baz 2
bar -1
cat 4
foo -3 
```

然后用 gnuplot 绘图：

```
set style line 1 lt 1 lc rgb "green"
set style line 2 lt 1 lc rgb "red"
set style fill solid
plot 'test.dat'  u (column(0)):2:(0.5):($2>0?1:2):xtic(1) w boxes lc variable
#                  #xval:ydata:boxwidth:color_index:xtic_labels 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-01T06:33:11.367

您可以将数据文件分成两部分，正值和负值，并分别绘制它们：

```
plot 'bm_speedup_pos.dat' using 2:xtic(1) ti "Faster" linecolor rgb "#00FF00", \
     'bm_speedup_neg.dat' using 2:xtic(1) ti "Slower" linecolor rgb "#FF0000" 
```

或者，如果你只需要生成几张图，几次，一种常见的技术是在 gnuplot 中生成原始图，然后在图像编辑器中对其进行后期处理以调整颜色。如果你走那条路，我建议让 gnuplot 以 SVG 格式生成图形，这将为你提供比任何位图格式更好看的图形。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-01T06:08:36.887

直方图似乎不允许您这样做。可能是这样的：

```
set boxwidth 0.3
f(v)=v<0?1:2
plot 'bm_speedup.dat' using 0:2:(f($2)):xticlabels(1) with boxes ti "Speedup" lc variable 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-09T21:12:07.807

实际上，您也可以使用 linecolor rgb 变量并给出如下颜色：

```
plot 'bm_speedup.dat' using 2:xtic(1):($2 >= 0 ? 0x00FF00 : 0xFF0000) ti Speedup lc rgb variable 
```

# lua - 我可以从 Lua 中的父函数中提取堆栈值吗？

> ID：12224548
> 
> 赞同：2
> 
> 时间：2012-09-01T03:01:33.513
> 
> 标签：lua, stack

我的游戏引擎将一个值作为函数的参数推送到 lua 堆栈，然后使用 lua_pcall 调用它。lua 代码将运行并调用其他 lua 函数。最终，这个 lua 代码将调用一个 C 函数。此函数是否可以检索最初压入堆栈的值？

就像这样：

```
<engine function A>
  pushes parameter value X on to stack for lua
<lua func>
<lua func>
<lua func>
<engine function B>
  can I extract the values X that was pushed by function A here? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T05:09:52.090

是的，通过 getinfo、getlocal 和 getupvalue 的组合，您可以获得所有这些信息（您甚至可以使用 set* 函数更改这些值）。

这是来自[MobDebug](https://github.com/pkulchenko/MobDebug)的片段，它返回堆栈信息以及每个级别的局部变量和上值表。每个级别的变量将按照它们在代码中出现的顺序（从参数开始）进行索引。对于每个 get* 函数，您可以使用它们的 C 等效项（lua_getinfo、lua_getlocal 和 lua_getupvalue），但逻辑应该完全相同。

```
local function stack(start)
  local function vars(f)
    local func = debug.getinfo(f, "f").func
    local i = 1
    local locals = {}
    while true do
      local name, value = debug.getlocal(f, i)
      if not name then break end
      if string.sub(name, 1, 1) ~= '(' then locals[name] = {value, tostring(value)} end
      i = i + 1
    end
    i = 1
    local ups = {}
    while func and true do -- check for func as it may be nil for tail calls
      local name, value = debug.getupvalue(func, i)
      if not name then break end
      ups[name] = {value, tostring(value)}
      i = i + 1
    end
    return locals, ups
  end

  local stack = {}
  for i = (start or 0), 100 do
    local source = debug.getinfo(i, "Snl")
    if not source then break end
    table.insert(stack, {
      {source.name, source.source, source.linedefined,
       source.currentline, source.what, source.namewhat, source.short_src},
      vars(i+1)})
    if source.what == 'main' then break end
  end
  return stack
end 
```

# javascript - 如何将某些内容附加到javascript变量

> ID：12224555
> 
> 赞同：1
> 
> 时间：2012-09-01T03:03:16.693
> 
> 标签：javascript

我有一个`<select>`标签

我想重定向用户onchange

我有一个代码，它工作正常

代码是

```
<select onchange="if (this.value) window.location.href=this.value">
<option value="&s=1">1</option>
<option value="&s=2">2</option>
<option value="&s=3">3</option>
<option value="&s=4">4</option>
</select> 
```

这里的问题是：

当前链接是：`http://anlink.com/page.php?categ=4&subc=2`

当我更改选项时

我被重定向到`http://anlink.com/&s=1`

但我希望它重定向到

```
http://anlink.com/page.php?categ=4&subc=2&s=1 
```

所以，我想将javascript代码编辑成这样

```
if (this.value) window.location.href=
http://anlink.com/page.php?categ=4&subc=2 + this.value 
```

我没有尝试这段代码，但我认为它会失败

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T03:29:34.370

这应该适合你：

```
<script type="text/javascript">
function changeLocation(field) {
    loc = String(window.location);
    newLoc = loc.replace(/\&s=\d$/gi, "") + field.value;
    window.location = newLoc;
}   
</script>
<select onchange="changeLocation(this)">
<option value="&s=1">1</option>
<option value="&s=2">2</option>
<option value="&s=3">3</option>
<option value="&s=4">4</option>
</select> 
```

它将任何实例替换`&s=`为后面的数字，而没有任何内容。然后它添加新值。这样做的原因是在 a`&s=`不存在的情况下。

如果您希望根据 URL 中的“s”更改“s”值（即，当您加载 URL 中的页面时`&s=3`，您也希望选择位于“3”），请执行以下操作变化：

添加`onload="adjustS()"`到身体

为选择添加一个 id（我使用了“s”）

添加以下功能：

```
function adjustS() {
    sLoc = String(String(window.location).match(/\&s=\d$/gi)).replace(/\&s=/gi, "");
    document.getElementById("s").selectedIndex = Number(sLoc)-1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T03:05:59.327

尝试：

```
window.location.href += this.value 
```

**编辑：**

```
var href = window.location.href;
var re = /&s\=\d$/;
if (re.test(href)) {
  window.location.href = href.replace(re, this.value);
} else {
  window.location.href += this.value;
} 
```

# html - 使用位置时不显示下拉菜单：绝对；

> ID：12224558
> 
> 赞同：0
> 
> 时间：2012-09-01T03:03:42.247
> 
> 标签：html, css

我刚刚将我的网站变成了响应式布局，并且在此过程中，我设法让我的下拉菜单不起作用。当悬停在**“下拉菜单”**上时，除非我使用位置：相对，否则它们不会显示。他们在使用 position: absolute 之前工作过——但现在他们似乎只使用 position relative。使用相对时，它使用的宽度会弄乱导航栏。

使用相对：[http](http://d.pr/i/tp5R)
://d.pr/i/tp5R 使用绝对：[http ://d.pr/i/j7r1](http://d.pr/i/j7r1)

**我的子菜单的 CSS**

```
div.left_first_header ul.sub-menu {
    width: 125px;
    top: 14px;
    z-index: 2;
    height: 100%;
    position: absolute;
    -webkit-border-radius: 0px 0px 4px 4px;
    -moz-border-radius: 0px 0px 4px 4px;
    background: url(images/drop_down_bg.jpg);
    padding-left: 15px;
    padding-right: 15px;
    background-repeat: repeat;
} 
```

**用于下拉功能的 jQuery**

```
jQuery(document).ready(function ($) {
    jQuery("ul.dropdown li").hover(function() {
        $('ul:first',this).css('visibility', 'visible');
    }, function() {
        jQuery(this).removeClass("hover");
        jQuery('ul:first',this).css('visibility', 'hidden');
    });
}); 
```

**我的网站**
[http://wpvault.com/kahlam/](http://wpvault.com/kahlam/)

考虑到现在是凌晨 4 点，我可能犯了一个非常愚蠢的简单错误。

如果我遗漏了什么，我深表歉意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T03:36:15.847

没有必要为此使用 jQuery。尝试使用 CSS`:hover`

```
<div class="left_first_header">
    <ul class="dropdown">
        Dropdown
        <ul class="sub-menu">
            <li>item</li>              
        </ul>
    </ul>
</div> 
```

CSS：

```
.left_first_header .sub-menu {
    width: 125px;
    top: 14px;
    z-index: 2;
    height: 100%;
    position: absolute;
    -webkit-border-radius: 0px 0px 4px 4px;
    -moz-border-radius: 0px 0px 4px 4px;
    background: url(images/drop_down_bg.jpg);
    padding-left: 15px;
    padding-right: 15px;
    background-repeat: repeat;
    display: none;
}

.left_first_header .dropdown:hover .sub-menu {
    display: block;
}​ 
```

CSS 演示：http: [//jsfiddle.net/TZbfJ/](http://jsfiddle.net/TZbfJ/)

编辑：但如果你仍然想使用 jquery，试试这个：

```
.left_first_header .sub-menu {
    width: 125px;
    top: 14px;
    z-index: 2;
    height: 100%;
    position: absolute;
    -webkit-border-radius: 0px 0px 4px 4px;
    -moz-border-radius: 0px 0px 4px 4px;
    padding-left: 15px;
    padding-right: 15px;
    background-repeat: repeat;
    display: none;
    background-color: blue;     
    margin-top: 4px;    
}

.dropdown {
    background-color: red;
    position: relative;
    margin: 20px;
} 
```

JS：

```
$(function(){
    $(".dropdown").mouseenter(function(){
        $(this).find(".sub-menu").show();        
    }).mouseleave(function(){
       $(this).find(".sub-menu").hide();
    });
}) 
```

jQuery 演示：http: [//jsfiddle.net/63hkm/](http://jsfiddle.net/63hkm/)

# java - 如何在 Java 中解析这个 XML 文件

> ID：12224559
> 
> 赞同：-5
> 
> 时间：2012-09-01T03:03:45.647
> 
> 标签：java, xml, dom, sax, stax

我在 xml 中有以下文件，我需要用 Java 解析它。该文件有 200 多行，我只给出了两行作为示例。

请帮助解析大文件的最佳方法，即 DOM、SAX、StaX 和一个工作示例来 prase 这个文件将不胜感激 - 谢谢

```
<?xml version="1.0"?>
<vdb>
    <database_data>
        <table_data name="Messages">
            <row rowid="1">
                <col name="firstname"> yong </col>
                <col name="lastname"> mook </col>
                <col name="nickname"> mkyong </col>
                <col name="salary"> 100000 </col>
             </row>
            <row rowid="2">
                <col name="firstname"> foo </col>
                <col name="lastname"> yah </col>
                <col name="nickname"> fyah </col>
                <col name="salary"> 200000 </col>
            </row>
        </table_data>
    </database_data>
</vdb> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T03:10:20.960

看看[Java API for XML Processing](http://docs.oracle.com/javase/tutorial/jaxp/index.html) for starters

# php - 如何将变量放入 PHP 中的调用范围？

> ID：12224563
> 
> 赞同：0
> 
> 时间：2012-09-01T03:05:01.767
> 
> 标签：php

内置的 PHP 函数 parse_str( $str ) 解析查询字符串并将其中的变量设置到当前范围内。有什么方法可以让我创建自己的函数来执行类似的操作并将值返回到调用者的范围内？

例子：

```
function checkset()
{
    global $inputs;
    for( $counter = 0, $varname = func_get_arg($counter), $counter++)
    {
        if(isset($inputs[$varname]))
        {
            calling_scope( $varname, $inputs[$varname] );
        }
    }
    return;
} 
```

其中，calling_scope($varname, $value) 是一个函数，它在函数被调用的范围内将 $$varname 设置为 $value。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T03:10:13.737

您不能将变量注入调用范围。但是，您可以使用[`extract`](http://php.net/manual/en/function.extract.php)将关联数组中的键/值转换为本地范围内的变量。这可能与您将要获得的一样接近。

```
function checkset() {
  return array('name' => 'bob', 'age' => 45);
}

extract(checkset());
echo $name; // bob
echo $age;  // 45 
```

# php - move_uploaded_file() wordpress 插件

> ID：12224564
> 
> 赞同：1
> 
> 时间：2012-09-01T03:05:16.577
> 
> 标签：php, file-upload

我正在创建一个 wordpress 插件并尝试创建一个上传功能。但是，我收到这些错误：

```
Warning: move_uploaded_file(logos/5041796eeedf21346468206.jpg) [function.move-uploaded-file]: failed to open stream: No such file or directory in /Applications/XAMPP/xamppfiles/htdocs/wordpress/wp-content/plugins/logo-updating/logo_menu.php on line 15

Warning: move_uploaded_file() [function.move-uploaded-file]: Unable to move '/Applications/XAMPP/xamppfiles/temp/phpeIJRwj' to 'logos/5041796eeedf21346468206.jpg' in /Applications/XAMPP/xamppfiles/htdocs/wordpress/wp-content/plugins/logo-updating/logo_menu.php on line 15 
```

我的上传代码：

```
$tmp = $_FILES['logoUpload']['tmp_name'];

$extension = explode(".", $_FILES['logoUpload']['name']);
$everything = count($extension);

$ext = $extension[$everything - 1];

$newName = uniqid().time().".".$ext;
$newName2 = uniqid().time()."_banner.".$ext;

move_uploaded_file($tmp, "logos/".$newName);

$fullLink = "logos/".$newName; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T06:01:30.833

```
$path_array  = wp_upload_dir();
    $path = str_replace('\\', '/', $path_array['path']);

        $target_path_sia = uniqid().$_FILES["file"]["name"];
      move_uploaded_file($_FILES["file"]["tmp_name"],$path. "/" . $target_path_sia);
      echo "Stored in: " . $path. "/"  .$target_path_sia; 
```

# asp.net-mvc-3 - 性能优势？传递类实例或仅传递 ID。(ASP.net MVC3)

> ID：12224566
> 
> 赞同：0
> 
> 时间：2012-09-01T03:05:26.597
> 
> 标签：asp.net-mvc-3, c#-4.0

我正在开发的小型 Web 应用程序变得越来越大。我注意到，在发布表单或仅调用其他函数时，我传递了由 ID 或 Model 类的整个实例组成的参数。

从性能的角度来看，传递整个模型对象（填充值）对我来说更好还是应该传递 ID，然后从数据库中检索？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T05:10:14.380

为了性能优势，您可以做很多事情，常见的事情是

1) 在 LINQ 使用中获取尽可能多的记录，例如自定义分页（skip and take 方法）

2）在控制器中使用数据缓存，对与视图绑定的列表使用缓存依赖项

3）使用编译查询来获取记录。（[见这里](http://www.codeproject.com/Articles/38174/How-to-improve-your-LINQ-query-performance-by-5-X)）

应用所有这些并查看可标记的页面加载速度。

编辑：对于 ID 建议，在这个问题中，如果您仅传递 ID 并从数据库中获取模型的其余部分或传递填充模型，那么两者都会对性能产生相同的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T23:01:45.483

不要解决尚不存在的问题。使用工具来衡量性能问题，然后尝试解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T12:32:24.423

最好从用例中考虑这些。例如，如果我想通过 ID 获取一个项目，那么我传递的是 ID，而不是填写了 ID 的整个对象。

我使用 WCF 服务来托管我的 BLL 并连接到我的 DAL，因此传递数据是一项代价高昂的工作，所以我很少这样做。

如果我需要更新一个对象，我会传递这个对象，如果我只想对一个对象执行一个操作，例如删除或获取，我会使用 ID。

硅

# gnuplot - 在gnuplot中的同一图上有多条拟合线？

> ID：12224567
> 
> 赞同：3
> 
> 时间：2012-09-01T03:05:39.997
> 
> 标签：gnuplot, curve-fitting

我正在尝试尝试一些简单的回归线作为 gnuplot 图的基础。但是，无论我做什么，我都无法在图表上获得超过一条拟合线。这甚至可能吗？这是我的（当前）gnuplot 程序....

```
set title "Foo" font "Arial Bold,14"
set term epscairo size 8,5
set style line 1 lw 0 pt 7 lc rgb "black"
set key outside
set pointsize .75
set ylabel "Y Range" font "Arial Bold"
set xlabel "X Range" font "Arial Bold"
set grid ytics
set yrange [-1:100]
set xrange [1:80]
set output 'graph.ps'

f1(x) = a1*x + b1
fit f1(x) "data/dvdate/1" using 2:3 via a1,b1

f2(x) = a1*x + b1
fit f2(x) "data/dvdate/2" using 2:3 via a1,b1

f3(x) = a1*x + b1
fit f3(x) "data/dvdate/3" using 2:3 via a1,b1

plot f1(x) title '# 1', f2(x) title '# 2', f3(x) title '# 3' 
```

结果是我得到了一个 .ps 文件，其中一行（不覆盖其他行）和三个数据系列标签。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T13:08:26.610

您需要在每次拟合中使用不同的变量 (a1,b1)。

```
f2(x) = a2*x + b2
fit f2(x) "data/dvdate/2" using 2:3 via a2,b2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-04T13:13:00.247

您可以使用“！”在 gnuplot 中调用外部程序 并且循环将生成一个临时文件以立即加载。

```
!rm filetoload
! for ((i=1;i<=50;i++)); do echo "f$i(x)=a$i*x+b$i; fit f$i(x) './file$i' u 1:2 via a$i, b$i">> filetoload;done
!cat filetoload
load "filetoload" 
```

将产生：

```
f1(x)=a1*x+b1; fit f1(x) file1 u 1:2 via a1, b1
f2(x)=a2*x+b2; fit f2(x) file2 u 1:2 via a2, b2
f3(x)=a3*x+b3; fit f3(x) file3 u 1:2 via a3, b3
... 
```

随心所欲地适应

# c - 关于 C 中的函数定义的困惑

> ID：12224569
> 
> 赞同：3
> 
> 时间：2012-09-01T03:05:56.003
> 
> 标签：c, function

我找到了这个函数定义

```
void *func(void *param) {

} 
```

实际上，我对这个函数定义有些困惑。void * 在函数的返回类型和参数中是什么意思。我是C的初学者。所以请不要介意。谢谢

```
void *func(void *param) {
  int s = (int)param;
  ....
} 
```

看看我发现的上面的程序。我认为应该是

```
int *s = (int *)param; 
```

不是吗？我很困惑

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T03:07:06.923

`void *`意味着它是一个没有特定类型的指针，把它想象成一个通用指针，不像`int *`一个 int 指针。

如果需要，您可以将其转换为不同的类型（例如，如果您要使用指针进行指针运算）。

您可能会发现这个 SO 使用问题：[Concept of void pointer in C programming](https://stackoverflow.com/questions/692564/concept-of-void-pointer-in-c-programming)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T03:13:38.320

它只是意味着该函数`func`接受一个参数，该参数是一个指针（指向任何东西）并返回一个指针（指向任何东西）。当您使用 a`void *`时，您是在告诉编译器“这是一个指针，但此时它指向什么并不重要”。

当您想实际使用它所指向的数据时，您需要将其转换为指向其他类型的指针。例如，如果它指向一个`int`，您可以创建一个`int *`变量并取消引用：

```
int *int_ptr = (int *)param;
// now (*int_ptr) is the value param is pointing to 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T03:52:29.143

你可以把它想象成一个原始指针，只不过是一个地址，想想看，指针只不过是地址正确，所以它们应该都是相同的大小，在大多数现代系统中都是 32 位或 64 位，但如果那就是如果它们的大小都相同，为什么我们要说`int *`或`char *`等等，那是因为我们需要一种方法来解释我们指向的类型，`int *`这意味着当我们取消引用时转到该地址并将 4 个字节解释为`int`或`char *`意味着当我们取消引用到那个地址并获得一个字节时，当你取消引用一个`void *`井时会发生什么，你得到的`warning: dereferencing ‘void *’ pointer`基本上我们真的不能，如果你做它的影响取决于编译器，当我们对其进行算术运算时同样适用。

那么为什么要麻烦使用它们呢？好吧，我个人不喜欢，有些团体也不特别喜欢它们，从根本上说，它们允许您创建相当通用的子例程，一个很好的例子是`memset`将一块内存设置为某个字节值，它的第一个参数是 a`void *`所以它不会不要抱怨是否给出`char *`或`int *`适当的注意它在每个字节的基础上工作，并且您需要正确计算数组的总大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T04:01:58.760

```
void *func(void *param) {

} 
```

param 是一个 void 指针，表示它是任何引用类型的指针。由于 void 指针没有对象类型，除非是大小写，否则它不能被取消引用。

```
so void *param;
   int *s=(int*)param; 
```

在这里，因为 param 是一个指针变量，所以你必须将它转换为指针变量。而不是像你在那里所做的那样转换为 int 类型。

例如

```
int x;
 float r;
 void *p=&x;
 int main()
 {
   *(int *)p=2;
     p=&r;
   *(float*)p=1.1;
 } 
```

在这个例子中 p 是一个空指针。现在在 main 方法中，我将 p 转换为 int 指针，然后转换为 float 指针，以便它可以先引用一个整数，然后再引用一个浮点数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-01T03:20:40.367

返回任何类型的指针。它可以是任何数据类型。

# c++ - 将创建多少个对象？

> ID：12224572
> 
> 赞同：0
> 
> 时间：2012-09-01T03:06:18.790
> 
> 标签：c++, oop

这是我的问题 - 执行此代码后将创建多少个对象？

```
 class vehicle
        { public:
            int Weight, HorsePower;
            vehicle(int x, int y)
            { Weight = x;
              HorsePower = y;
            }
        };
        class car : public vehicle
        { public:
            car(int x, int y) : vehicle(x, y)
            { }
        };
        class motorcycle : private vehicle
        { public:
            motorcycle(int x, int y): 
            { Weight = x;
              HorsePower = y;
            }
        };

        int _tmain(int argc, _TCHAR* argv[])
        { car Ferrari(4056,540);
          motorcycle Suzuki(429,103);
          return 0;
        } 
```

我和我的朋友争论的是我的观点是 4 个对象——汽车、摩托车和 2 个车辆，因为每个对象都派生出车辆。这是真的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T03:15:12.760

代码格式错误： `vehicle`没有默认构造函数，唯一的构造函数`motorcycle`需要其`vehicle`基类的默认构造函数。

假设添加了一个默认构造函数（并且从 的构造函数中删除`vehicle`了无关的构造函数），我在此处显示的用户代码中计算了 16 个：`:``motorcycle`

*   `main`: `argc`和的两个论点`argv`

*   八在`Ferrari`: `car`, `vehicle`, `Weight`, and的构造中`HorsePower`加上构造函数的 and 参数和构造`x`函数`y`的and参数。`car``x``y``vehicle`

*   六个在`Suzuki`: `motorcycle`, `vehicle`, `Weight`,的构造中，`HorsePower`加上构造函数的`x`and`y`参数`motorcycle`。

我希望我没有错过任何一个。计算在 C++ 程序中创建的*对象*的数量是一件愚蠢的事情：创建了很多很多对象，而且通常这并不重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T03:10:02.593

只会创建两个*实例*（对象）。`Ferrari`是单个对象，即使它的类 ( `car`) 扩展自`vehicle`. 同样的事情`Suzuki`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T08:18:46.527

答案是“2”。尽管两个对象都继承了一个基类，但基类被“吸收”到了其中。每个对象有效地充当基类的单个实例，“新东西”分层在顶部。

这样想：想象一下拿一个高尔夫球，然后用纱线/等包裹它，直到它与棒球的尺寸/重量/等相同。它看起来与高尔夫球不同，如果你把它拆开，你就可以接触到“里面”的高尔夫球，但它仍然是一个单一的物体。实际上，棒球*是一个**有*外壳的高尔夫球。但总的来说，它仍然是一个单一的物体，即使“高尔夫球”可以单独存在，也可以用其他东西包裹起来制成新类型的物体（如保龄球）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T03:50:27.107

我会选择两个。

因为 a `car`and`motorcycle`不能是与其基类分开的实体。您不会有 4 个单独的实例。您也不能独立调用 4 个析构函数。这种直接派生的低级实现也表示 2。派生类将具有与 Base + 相同的字段以及它的额外字段。你不能实例化`car`没有它的`vehicle`一部分。因此，至少在我看来，你不能称它为一个单独的对象。

我也认为这个问题的形式很模糊。多少个对象是什么意思？我认为应该正确说明将创建多少个实例。或者有多少不同的对象类型。

总共会有两个实例。一个是 a `car`，一个是 a`motorcycle`并且两者同时存在`vehicle`。

PS。另一个交叉检查突然出现在我的脑海中。打电话`sizeof(Ferrari)`，`motorcycle(Suzuki)`。总结一下。然后添加 2x`vehicle`并获得它们的大小。4 个实例的总和应该不同，更大。我认为这足以说明，少于“4 个对象 - 汽车、摩托车和 2 辆车”

# emacs - Emacs init.el 文件不加载

> ID：12224575
> 
> 赞同：19
> 
> 时间：2012-09-01T03:07:59.087
> 
> 标签：emacs, init

当我打开 emacs 时，缓冲区中出现以下消息`*Messages*`，并且我的 init.el 文件（位于`~/.emacs.d/init.el`）没有加载。

```
Loading 00debian-vars...done
Loading /etc/emacs/site-start.d/50cedet-common.el (source)...
Error while loading 50cedet-common: Cannot open load file: cedet-autogen
Loading /etc/emacs/site-start.d/50dictionaries-common.el (source)...
Loading debian-ispell...
Loading /var/cache/dictionaries-common/emacsen-ispell-default.el (source)...done
Loading debian-ispell...done
Loading /var/cache/dictionaries-common/emacsen-ispell-dicts.el (source)...done
Loading /etc/emacs/site-start.d/50dictionaries-common.el (source)...done
Loading /etc/emacs/site-start.d/50haskell-mode.el (source)...
Loading /usr/share/emacs/site-lisp/haskell-mode/haskell-site-file.el (source)...done
Loading /etc/emacs/site-start.d/50haskell-mode.el (source)...done
Loading /etc/emacs/site-start.d/50php-elisp.el (source)...done
Loading /etc/emacs/site-start.d/51speedbar.el (source)...done
For information about GNU Emacs and the GNU system, type C-h C-a. 
```

当我用谷歌搜索或查看 emacs wiki 时，我找不到任何关于 cedet 的有用信息。奇怪的是，当我使用`M-x eval-buffer`or时`M-x load-file`，一切正常。`HOME`应该是这样，我正在运行 version `23.3.1`。

在这发生之前，我一直试图让 jshint 与 emacs 一起工作，但我不确定这是否完全相关[https://github.com/daleharvey/jshint-mode](https://github.com/daleharvey/jshint-mode)。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-01T05:56:36.020

先删除`~/.emacs`文件。有关详细信息，请参阅[Emacs Wiki](http://www.emacswiki.org/emacs/DotEmacsDotD)。

# php - 将数组拆分为定义值的较小部分

> ID：12224578
> 
> 赞同：-3
> 
> 时间：2012-09-01T03:08:31.330
> 
> 标签：php, arrays

我有一个包含 200-7000 个值的数组。我想根据定义的值将此数组拆分为更小的块。

例如：

该数组有 1731 个值，我想将其分解为更小的数组，每个数组只有*50 个*值。

这是怎么做到的？我坚持的部分是将其分解为每个 50 个值。

先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T03:11:29.853

[https://www.php.net/array_chunk](https://www.php.net/array_chunk)

array_chunk($array, 50) 返回一个数组，每个值都是一个数组，每个值都来自 $array 的 50 个值。

```
//make an array with numbers from 1 to 500
$array = range(1, 500);
//break that array up into chunks of 50.
$newArray = array_chunk($array, 50);
//display the new array
var_dump($newArray); 
```

示例：[http ://codepad.viper-7.com/JNzSWO](http://codepad.viper-7.com/JNzSWO)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T03:16:03.853

使用数组块函数：

> 将数组分块成大小较大的块。最后一个块可能包含小于 size 的元素。

用法：

```
array array_chunk ( array $input , int $size [, bool $preserve_keys = false ] ) 
```

例子：

输入：

```
<?php
    $input_array = array('a', 'b', 'c', 'd', 'e');
    print_r(array_chunk($input_array, 2));
    print_r(array_chunk($input_array, 2, true));
?> 
```

输出：

```
Array
(
    [0] => Array
        (
            [0] => a
            [1] => b
        )

    [1] => Array
        (
            [0] => c
            [1] => d
        )

    [2] => Array
        (
            [0] => e
        )

)
Array
(
    [0] => Array
        (
            [0] => a
            [1] => b
        )

    [1] => Array
        (
            [2] => c
            [3] => d
        )

    [2] => Array
        (
            [4] => e
        )

) 
```

所以，如果你有一个`array`named `$a`，你会使用：

```
$components = array_chunk($a, 50, true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T03:16:22.013

使用[array_chunk()](https://www.php.net/array_chunk)

例如：

```
$array = range(1, 1731);
if(count($array) => 200 || count($array) <= 7000)){
    $split = array_chunk($input_array, 50, true);
} else {
    $split = $array;
}
var_export($split); 
```

`$split`如果初始数组的计数器大于 200 且小于 7000，将有大约 35 个数组

# android - 查看页面停止向某个方向滑动

> ID：12224581
> 
> 赞同：5
> 
> 时间：2012-09-01T03:09:32.383
> 
> 标签：android, android-viewpager

如何阻止 viewpager 仅向一个方向滚动。例如，只允许向右滑动，但不允许向左滑动。我完全被卡住了，任何帮助将不胜感激。请注意，我需要让它适用于 Android 2.2 版，所以我使用 ViewPager 的兼容性库。

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T03:33:36.120

您必须制作自己的 ViewPager 来扩展原始 ViewPager 并覆盖 onTouchEvent 方法

```
public class CustomViewPager extends ViewPager {

    float lastX = 0;

    boolean lockScroll = false;

    public CustomViewPager(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public CustomViewPager(Context context) {
        super(context);
    }

    @Override
    public boolean onTouchEvent(MotionEvent ev) {

        switch (ev.getAction()) {
        case MotionEvent.ACTION_DOWN:
            lastX = ev.getX();
            lockScroll = false;
            return super.onTouchEvent(ev);
        case MotionEvent.ACTION_MOVE:

            if (lastX > ev.getX()) {
                lockScroll = false;
            } else {
                lockScroll = true;
            }

            lastX = ev.getX();
            break;
        }

        lastX = ev.getX();

        if(lockScroll) {
            return false;
        } else {
            return super.onTouchEvent(ev);
        }

    }

} 
```

# database - 有没有办法从 fox pro 9 免费表的目录中检索模式？

> ID：12224590
> 
> 赞同：0
> 
> 时间：2012-09-01T03:10:16.590
> 
> 标签：database, database-schema, foxpro, visual-foxpro

在寻找一种方法来发现 Sage ABRA Suite 中的字段之间的关系时，我得到了一个答案，听起来好像你有一个使用 Visual Fox Pro 的免费表目录，你会被困在猜测架构到底是什么：

> “这只是一组 VFP 免费表，还是还有 VFP 数据库？如果有数据库，您将拥有带有 DBC、DCT 和 DCX 扩展名的文件。”

*   来自[任何用于了解现有 Foxpro 数据库模型的工具？](https://stackoverflow.com/questions/8154533/any-tools-for-understanding-existing-foxpro-database-model)

真的是这样吗？我检查了我的 ABRA 安装的数据目录（根据它的 ODBC 连接的自由表目录）是否有带有 *.DBC、*.DCT 和 *.DCX 扩展名的文件，但我没有找到任何文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T14:34:54.387

如果您拥有 MSDN Professional（或更高版本）的许可证，则您拥有 Visual FoxPro 的许可证。看结构很简单：

```
使用 {表名} NOUPDATE
修改结构
```

如果您没有通过 MSDN 获得 Visual FoxPro，而您所需要的只是表的结构，您可能会发现类似以下有用的工具：DBF Viewer 2000

[http://www.dbf2002.com/](http://www.dbf2002.com/)

看起来您可以修改结构，因此您也应该能够窥视结构。50 美元的解决方案不错。免费试用，让您看看它是否有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T11:18:43.987

是的，在它只是自由表的情况下，您只会根据表间关系和数据如何挂在一起的一般结构来建立模式，如果这已经由 Sage 发布，因为在任何地方都没有定义这个的元数据信息。

# google-apps-script - 使用 HtmlService 提交表单时打开新的 html 页面

> ID：12224592
> 
> 赞同：3
> 
> 时间：2012-09-01T03:10:21.057
> 
> 标签：google-apps-script

我有一个使用 HtmlService 实现的表单。当我提交它时，我希望看到不同的 Html 页面，而不是上面带有表单的页面。基本上这个新页面应该替换表单页面。我该怎么做。我试图从提交表单时调用的流程表单函数创建一个模板表单。但它没有用。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T02:28:37.270

有关使用 HtmlService 提供多个 html 页面的示例，请参阅[此答案。](https://stackoverflow.com/a/16697525/1677912)基本思想是编写`doGet()`接受一个查询参数，该参数将用于选择要服务的 html 页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T08:39:35.637

我不知道任何服务器端重定向机制（您可以在模板中使用）。但是，一种方法是通过客户端的 Ajax。例如，看看我在[VALET](https://script.google.com/d/1CwQEHJ-qbeRc743T-aIPlyBZpQFP7zaWmNjKQCioVZCr2MH2vTNPBwfw/edit)中是如何做到的（打开 index.html 并从第 240 行开始查看）。

顺便说一句：我还尝试[重新加载](https://stackoverflow.com/questions/3715047/how-to-reload-a-page-using-javascript)一个似乎不起作用的页面（可能是由于`window`和`document`对象的限制）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T04:15:55.750

您可以使用带有 HTML 服务的 doPost() 来加载另一个 html 页面。

[看到这个答案。](https://stackoverflow.com/a/11300412)

# matlab - Matlab 中的非运算符行为异常

> ID：12224594
> 
> 赞同：2
> 
> 时间：2012-09-01T03:10:28.997
> 
> 标签：matlab, math, floating-point

在我的代码中，我需要检查向量的两个连续成员之间的差异对是否相等/不相等，然后相应地做一些事情。现在这是 Matlab 中发生的一件奇怪的事情，如果我有两对两个连续的数字，那么当我使用

```
(x(i+3) - x(i+2)) ~= (x(i+1)-x(i)) 
```

`1`即使双方平等，它也给了我一个。我认为原因是存在一些舍入错误，但不太确定。例如，

```
x = [0,0.16,0.32,0.48,0.64,0.80];
>>a = x(5) - x(4)

a =

 0.1600

>>b = x(4) - x(3)

b =

 0.1600

>>a-b

ans =

5.5511e-17 
```

知道如何摆脱这个问题吗？对于这种问题，是否有任何不同的策略可以绕过`~=`或运营商？`==`

提前谢谢各位。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T03:42:41.620

您不应该以这种方式比较浮点数的相等性。`abs(a-b)<eps`如果您正在测试相等性，则使用更可靠的方法。

# cakephp - 自我“HABTM”或“HasMany Through”概念混淆

> ID：12224596
> 
> 赞同：7
> 
> 时间：2012-09-01T03:11:00.507
> 
> 标签：cakephp, associations, has-many-through, has-and-belongs-to-many, cakephp-2.1

**赏金：**

+500 代表赏金到一个好的解决方案。我已经把头撞在墙上两周了，我已经准备好寻求帮助了。

**表/模型（简化以显示关联）**

*   节点
    *   ID
    *   姓名
    *   node_type_id
*   节点关联
    *   ID
    *   node_id
    *   other_node_id
*   节点类型
    *   ID
    *   姓名

**大概的概念：**

用户可以创建节点类型（例如“电视台”、“电视节目”和“演员”......任何东西）。如果我提前知道节点类型是什么以及每个节点之间的关联，我会为它们制作模型 - 但我希望这是非常开放的，以便用户可以创建他们想要的任何节点类型。然后，（特定节点类型的）每个节点可以与任何其他节点类型的任何其他节点相关。

**描述和我尝试过的：**

每个节点都应该能够与任何/每个其他节点相关。

我的假设是，要做到这一点，我必须有一个关联表 - 所以我制作了一个名为“node_associations”的关联表，其中包含`node_id`和`other_node_id`.

然后我建立了我的关联（通过我相信使用 hasMany）：（以下是我对我的设置的最好回忆......它可能会稍微偏离）

```
//Node model
public $hasMany = array(
    'Node' => array(
        'className' => 'NodeAssociation',
        'foreignKey' => 'node_id'

    ),
    'OtherNode' => array(
        'className' => 'NodeAssociation',
        'foreignKey' => 'other_node_id'
    )
);

//NodeAssociation model
public $belongsTo = array(
    'Node' => array(
        'className' => 'Node',
        'foreignKey' => 'node_id'

    ),
    'OtherNode' => array(
        'className' => 'Node',
        'foreignKey' => 'other_node_id'
    )
); 
```

起初，我以为我做到了——这是有道理的。但后来我开始尝试检索数据，并且在过去的两周里一直在用头撞墙。

**示例问题：**

可以说我有以下节点：

*   美国全国广播公司
*   急诊室
*   乔治·克鲁尼
*   安东尼·爱德华兹
*   今晚秀：雷诺
*   杰·雷诺
*   狐狸
*   居家男人

如何设置我的数据结构以能够提取所有电视台，并包含他们的电视节目，其中包含他们的演员（例如）？这将是简单的正常模型设置：

```
$this->TvStation->find('all', array(
    'contain' => array(
        'TvShow' => array(
            'Actor'
        )
    )
)); 
```

然后，也许我想检索所有男演员并包含包含电视台的电视节目。或者晚上 9 点开始的电视节目，包含演员和电台……等等。

但是 - 使用 HABTM 或 HasMany Through self（更重要的是，未知数据集），我不知道模型是哪个字段（node_id 或 other_node_id），总体上我无法理解我会如何得到内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T06:19:34.273

### 理念

让我们尝试用约定来解决这个问题，node_id 将是别名按字母顺序排在第一位的模型，而 other_node_id 将是第二个模型。

对于每个包含的模型，我们动态创建一个到 Node 类的 HABTM 关联，​​为每个关联创建一个别名（参见`bindNodes`方法`bindNode`）。

我们查询的每个表都添加了一个额外的条件，`node_type_id`以仅返回该类型节点的结果。NodeType 的 id 是通过选择的`getNodeTypeId()`并且应该被缓存。

为了在深度相关的关联中使用条件过滤结果，您需要手动添加额外的连接，为每个具有唯一别名的可连接创建连接，然后使用别名连接每个节点类型本身以便能够应用条件（例如选择所有具有演员 x) 的电视频道。在 Node 类中为此创建一个辅助方法。

### 笔记

我用`foreignKey`for`node_id`和`associationForeignKey`for`other_node_id`我的演示。

### 节点（不完整）

```
<?php
/**
 * @property Model NodeType
 */
class Node extends AppModel {

    public $useTable = 'nodes';

    public $belongsTo = [
        'NodeType',
    ];

    public function findNodes($type = 'first', $query = []) {
        $node = ClassRegistry::init(['class' => 'Node', 'alias' => $query['node']]);
        return $node->find($type, $query);
    }

    // TODO: cache this
    public function nodeTypeId($name = null) {
        if ($name === null) {
            $name = $this->alias;
        }
        return $this->NodeType->field('id', ['name' => $name]);
    }

    public function find($type = 'first', $query = []) {
        $query = array_merge_recursive($query, ['conditions' => ["{$this->alias}.node_type_id" => $this->nodeTypeId()]]);
        if (!empty($query['contain'])) {
            $query['contain'] = $this->bindNodes($query['contain']);
        }
        return parent::find($type, $query);
    }

    // could be done better    
    public function bindNodes($contain) {
        $parsed = [];
        foreach($contain as $assoc => $deeperAssoc) {
            if (is_numeric($assoc)) {
                $assoc = $deeperAssoc;
                $deeperAssoc = [];
            }
            if (in_array($assoc, ['conditions', 'order', 'offset', 'limit', 'fields'])) {
                continue;
            }
            $parsed[$assoc] = array_merge_recursive($deeperAssoc, [
                'conditions' => [
                    "{$assoc}.node_type_id" => $this->nodeTypeId($assoc),
                ],
            ]);
            $this->bindNode($assoc);
            if (!empty($deeperAssoc)) {
                $parsed[$assoc] = array_merge($parsed[$assoc], $this->{$assoc}->bindNodes($deeperAssoc));
                foreach($parsed[$assoc] as $k => $v) {
                    if (is_numeric($k)) {
                        unset($parsed[$assoc][$k]);
                    }
                }
            }
        }
        return $parsed;
    }

    public function bindNode($alias) {
        $models = [$this->alias, $alias];
        sort($models);
        $this->bindModel(array(
            'hasAndBelongsToMany' => array(
                $alias => array(
                    'className' => 'Node',
                    'foreignKey' => ($models[0] === $this->alias) ? 'foreignKey' : 'associationForeignKey',
                    'associationForeignKey' => ($models[0] === $alias) ? 'foreignKey' : 'associationForeignKey',
                    'joinTable' => 'node_associations',
                )
            )
        ), false);
    }

} 
```

### 例子

```
$results = $this->Node->findNodes('all', [
    'node' => 'TvStation', // the top-level node to fetch
    'contain' => [         // all child associated nodes to fetch
        'TvShow' => [
            'Actor',
        ]
    ],
]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T23:17:02.470

我认为不幸的部分问题是您希望您的解决方案在代码中包含用户数据。由于您的所有节点类型都是用户数据，因此您要避免尝试将它们用作应用程序中的类方法，因为它们可能是无限的。相反，我会尝试创建对您想要的数据操作进行建模的方法。

我在提供的数据模型中看到的一个遗漏是一种记录类型之间关系的方法。在您的示例中，您提到了 TvStation -> TvShows -> Actor 等之间的关系。但是这些数据关系在哪里定义/存储？由于您的所有节点类型都是用户定义的数据，我认为您希望/需要在某处记录存储这些关系。似乎 node_types 需要一些关于给定类型的有效或所需子类型是什么的额外元数据。将此记录在某处可能会使您在创建查询时的情况更简单一些。考虑您要询问数据库的所有问题或查询可能会有所帮助。如果您无法使用数据库中的数据回答所有这些问题，那么您可能缺少一些表。模型关联只是表中已经存在的数据关系的代理。如果存在差距，则您的数据模型中可能存在差距。

我认为这不是您正在寻找的答案，但希望它可以帮助您找到正确的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T18:57:17.000

我认为您的模型之间的关系不正确。我想这已经足够了：

```
// Node Model
public $hasAdBelongsToMany = array(
    'AssociatedNode' => array(
        'className' => 'Node',
        'foreignKey' => 'node_id'
        'associationForeignKey' => 'associated_node_id',
        'joinTable' => 'nodes_nodes'
    )
); 
```

// 表格

**节点**

*   ID
*   姓名
*   node_type_id

**节点节点**

*   ID
*   node_id
*   关联节点id

**节点类型**

*   ID
*   姓名

然后您可以尝试使用[ContainableBehavior](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)来获取您的数据。例如，要查找属于 TVStation 的所有 TVShow：

```
$options = array(
    'contain' => array(
        'AssociatedNode' => array(
            'conditions' => array(
                'AssociatedNode.node_type_id' => $id_of_tvshows_type
            )
        )
    ),
    conditions => array(
        'node_type_id' => $id_of_tvstations_type
    )
);
$nodes = $this->Node->find('all', $options); 
```

**编辑 ：**

您甚至可以有二级条件（参见[本节](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html#containing-deeper-associations)最后一个示例，查看“标记”模型条件）。尝试这个：

```
$options = array(
    'contain' => array(
        'AssociatedNode' => array(
            'conditions' => array(
                'AssociatedNode.node_type_id' => $id_of_tvshows_type
            ),
            'AssociatedNode' => array(
                'conditions' => array( 'AssociatedNode.type_id' => $id_of_actors_type)
            )
        )
    ),
    conditions => array(
        'node_type_id' => $id_of_tvstations_type
    )
);
$nodes = $this->Node->find('all', $options); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-01T18:02:49.677

为什么不在节点模型中创建一个方法？

就像是：

```
 <?php 
        // first argument is a nested array filled with  integers 
(corresponding to node_type_id)
        //second one id of a node
    //third one corresponds to the data you want(empty at beginning in most case)
    public function custom_find($conditions,$id,&$array){

        //there may several type of nodes wanted: for instances actors and director of a serie, so we loop
        foreach($conditions as $key_condition=>$condition){

            //test to know if we have reached the 'bottom' of the nested array: if yes it will be an integer '2', if no it will be an array like '2'=>array(...)
            if(is_array($condition))){
                   //this is the case where there is deeper levels remaining

                        //a find request: we ask for the node defined by its id,
 //and the child nodes constrained by their type: ex: all actors of "Breaking Bad"
                        $this->id=$id;
                $result=$this->find('all',array(
                        'contain' => array(
                                'OtherNode' => array(
                                        'conditions'=>array('node_type_id'=>$key_condition)
                                )
                        )
                )
             );

                //we add to $array the nodes found. Ex: we add all the actors of the serie, with type_id as key
                        $array[$key_condition]=$result['OtherNode'];

                         //Then  on each node we just defined we call the function recursively. Note it's $condition not $conditions
                foreach($array[$key_condition] as &$value){
                    $this->custom_find($condition,$value['Node']['id'],$value);
                }

            }else{
                //if we simply add data
                        $this->id=$id;
                $result=$this->find('all',array(
                        'contain' => array(
                                'OtherNode' => array(
                                        'conditions'=>array('node_type_id'=>$value)
                                )
                        )
                )
             );

             $array[$condition]=$result['OtherNode'];
            }

        }

    } 
```

该代码几乎肯定是错误的，只是为了让您了解我的意思。

编辑：

**它能做什么：**

它是一个递归函数，它接受嵌套的条件数组和节点的 id，并返回嵌套的节点数组。

例如： $conditions=array('2','4'=>array('5','6'=>array('4')))

**这个怎么运作：**

对于单个节点，它返回与数组中的条件相对应的所有子节点：然后它对条件更深一层的子节点执行相同的操作，直到没有更多的级别。

# java - 如何将带有特殊字符 (UTF-8) 的 HTML 页面保存到 txt 文件

> ID：12224601
> 
> 赞同：2
> 
> 时间：2012-09-01T03:12:21.687
> 
> 标签：java, html, utf-8

我需要制作一个将html保存到txt文件的java代码。

问题是 UTF-8 中的特殊字符被破坏了。

像“Hamamélis”这样的词以这种方式保存“Hamamï¿½lis”。

我写的代码在下面列出：

```
 URLConnection conn;
                    conn = site.openConnection();
                    conn.setReadTimeout(10000);
                    Charset charset = Charset.forName("UTF8");
                    BufferedReader in = new BufferedReader( new InputStreamReader(  conn.getInputStream(), "UTF-8"   )   );
                    buff = in.readLine(); 
```

之后：

```
out = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(Nome), "UTF-8"));
out.write(buff);
out.close(); 
```

任何人都可以建议我一个解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T06:58:48.187

一个可能的错误是在第一段代码的第 4 行中省略了“UTF-8”中的连字符。请参阅[字符集](http://docs.oracle.com/javase/7/docs/api/java/nio/charset/Charset.html)文档。

否则，代码似乎是正确的。但是我们当然不能直接测试它，因为我们没有您的数据。

为了比较，这是我写的一个小类。以与您的代码类似的方式，此类正确地将您的“Hamamélis”示例的重音“e”写入 UTF-8 中预期的单个（非规范化）字符的两个八位字节：十六进制“C3”和“A9”。

```
 import java.io.File;
import java.io.FileOutputStream;
import java.io.OutputStreamWriter;
import java.io.BufferedWriter;
import java.io.IOException;

public class ReaderWriter {
    public static void main(String[] args) {
        try {
            String content = "Hamamélis. Written: " + new java.util.Date();

            File file = new File("some_text.txt");

            // Create file if not already existent. 
            if (!file.exists()) {
                file.createNewFile();
            }

            FileOutputStream fileOutputStream = new FileOutputStream( file );
            OutputStreamWriter outputStreamWriter = new OutputStreamWriter( fileOutputStream, "UTF-8" );
            BufferedWriter bufferedWriter = new BufferedWriter( outputStreamWriter );
            bufferedWriter.write( content );
            bufferedWriter.close();

            System.out.println("ReaderWriter 'main' method is done. " + new java.util.Date() );

        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

正如 icktoofay 评论的那样，您应该深入挖掘以准确发现所涉及的八位字节。使用我今天在 Mac App Store 上找到的“[文件查看器”应用程序这样的十六进制编辑器来查看您保存的文件中的确切八位字节。](http://itunes.apple.com/us/app/file-viewer/id495987613?mt=12)

如果八位位组是 C3 和 A9，那么问题只是您用来将文件视为文本的文本编辑器使用了错误的字符编码。例如，您可以在 Web 浏览器中打开该文本文件，并使用其菜单命令将文件重新解释为 UTF-8。

如果八位字节不是 C3 和 A9，我会进一步检查输入的八位字节。

如果您不了解计算机中的文本文件实际上包含数字（不是人类意义上的文本），那么请从编码中休息一下，阅读这篇有趣的文章： [每个软件开发人员绝对、肯定必须了解 Unicode 和字符集的绝对最小值（没有借口！）乔尔·斯波尔斯基](http://www.joelonsoftware.com/articles/Unicode.html)

# c# - 在 Unity iOS 上发出 HTTP 请求的方法？

> ID：12224602
> 
> 赞同：20
> 
> 时间：2012-09-01T03:12:24.217
> 
> 标签：c#, ios, multithreading, http, unity3d

我需要使用所有标准 RESTful 方法发送 HTTP 请求并访问请求的主体，以便使用它发送/接收 JSON。我调查过，

# WebRequest.HttpWebRequest

这几乎可以完美运行，但是在某些情况下，例如，如果服务器关闭，GetResponse 函数可能需要几秒钟才能返回——因为它是一个同步方法——在这段时间内冻结应用程序。此方法的异步版本 BeginGetResponse 似乎不能异步工作（无论如何在 Unity 中），因为它仍然会在该期间冻结应用程序。

# UnityEngine.WWW#

出于某种原因，仅支持 POST 和 GET 请求——但我还需要 PUT 和 DELETE（标准 RESTful 方法），所以我没有再费心去研究它。

# 系统线程

为了在不冻结应用程序的情况下运行 WebRequest.HttpWebRequest.GetResponse，我研究过使用线程。线程似乎在编辑器中工作（但似乎非常不稳定 - 如果您在应用程序退出时不停止线程，即使您停止它，它也会永远在编辑器中运行），并且当构建到 iOS 设备时，它会尽快崩溃当我尝试启动一个线程时（我忘记写下错误并且我现在无权访问它）。

# 在原生 iOS 应用程序中运行线程并连接到 Unity 应用程序

可笑，甚至不会尝试这个。

# 统一网

这个。我想知道他们是如何管理的。

这是我正在尝试的 WebRequest.BeginGetResponse 方法的示例，

```
// The RequestState class passes data across async calls.
public class RequestState
{
   const int BufferSize = 1024;
   public StringBuilder RequestData;
   public byte[] BufferRead;
   public WebRequest Request;
   public Stream ResponseStream;
   // Create Decoder for appropriate enconding type.
   public Decoder StreamDecode = Encoding.UTF8.GetDecoder();

   public RequestState()
   {
      BufferRead = new byte[BufferSize];
      RequestData = new StringBuilder(String.Empty);
      Request = null;
      ResponseStream = null;
   }     
}

public class WebRequester
{
    private void ExecuteRequest()
    {
        RequestState requestState = new RequestState();
        WebRequest request = WebRequest.Create("mysite");
        request.BeginGetResponse(new AsyncCallback(Callback), requestState);
    }

    private void Callback(IAsyncResult ar)
    {
      // Get the RequestState object from the async result.
      RequestState rs = (RequestState) ar.AsyncState;

      // Get the WebRequest from RequestState.
      WebRequest req = rs.Request;

      // Call EndGetResponse, which produces the WebResponse object
      //  that came from the request issued above.
      WebResponse resp = req.EndGetResponse(ar);
    }
} 
```

...基于此： http: [//msdn.microsoft.com/en-us/library/86wf6409 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/86wf6409(v=vs.71).aspx)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-26T17:11:11.427

好的，我终于设法编写[了自己的解决方案](http://wiki.unity3d.com/index.php/WebAsync)。我们基本上需要一个**RequestState**、一个**Callback Method**和一个**TimeOut Thread**。在这里，我将复制[在 UnifyCommunity](http://wiki.unity3d.com/index.php/WebAsync)（现在称为 unity3d wiki）[**中**](http://wiki.unity3d.com/index.php/WebAsync)[所做的事情。](http://wiki.unity3d.com/index.php/WebAsync)**这是过时的代码，但比那里的要小，所以在这里显示一些东西更方便。现在我已经删除（在 unit3d wiki 中）`System.Action`并且`static`为了性能和简单性：**

 **## 用法

```
static public ThisClass Instance;
void Awake () {
    Instance = GetComponent<ThisClass>();
}
static private IEnumerator CheckAvailabilityNow () {
    bool foundURL;
    string checkThisURL = "http://www.example.com/index.html";
    yield return Instance.StartCoroutine(
        WebAsync.CheckForMissingURL(checkThisURL, value => foundURL = !value)
        );
    Debug.Log("Does "+ checkThisURL +" exist? "+ foundURL);
} 
```

## WebAsync.cs

```
using System;
using System.IO;
using System.Net;
using System.Threading;
using System.Collections;
using UnityEngine;

/// <summary>
///  The RequestState class passes data across async calls.
/// </summary>
public class RequestState
{
    public WebRequest webRequest;
    public string errorMessage;

    public RequestState ()
    {
        webRequest = null;
        errorMessage = null;
    }
}

public class WebAsync {
    const int TIMEOUT = 10; // seconds

    /// <summary>
    /// If the URLs returns 404 or connection is broken, it's missing. Else, we suppose it's fine.
    /// </summary>
    /// <param name='url'>
    /// A fully formated URL.
    /// </param>
    /// <param name='result'>
    /// This will bring 'true' if 404 or connection broken and 'false' for everything else.
    /// Use it as this, where "value" is a System sintaxe:
    /// value => your-bool-var = value
    /// </param>
    static public IEnumerator CheckForMissingURL (string url, System.Action<bool> result) {
        result(false);

        Uri httpSite = new Uri(url);
        WebRequest webRequest = WebRequest.Create(httpSite);

        // We need no more than HTTP's head
        webRequest.Method = "HEAD";
        RequestState requestState = new RequestState();

        // Put the request into the state object so it can be passed around
        requestState.webRequest = webRequest;

        // Do the actual async call here
        IAsyncResult asyncResult = (IAsyncResult) webRequest.BeginGetResponse(
            new AsyncCallback(RespCallback), requestState);

        // WebRequest timeout won't work in async calls, so we need this instead
        ThreadPool.RegisterWaitForSingleObject(
            asyncResult.AsyncWaitHandle,
            new WaitOrTimerCallback(ScanTimeoutCallback),
            requestState,
            (TIMEOUT *1000), // obviously because this is in miliseconds
            true
            );

        // Wait until the the call is completed
        while (!asyncResult.IsCompleted) { yield return null; }

        // Deal up with the results
        if (requestState.errorMessage != null) {
            if ( requestState.errorMessage.Contains("404") || requestState.errorMessage.Contains("NameResolutionFailure") ) {
                result(true);
            } else {
                Debug.LogWarning("[WebAsync] Error trying to verify if URL '"+ url +"' exists: "+ requestState.errorMessage);
            }
        }
    }

    static private void RespCallback (IAsyncResult asyncResult) {

        RequestState requestState = (RequestState) asyncResult.AsyncState;
        WebRequest webRequest = requestState.webRequest;

        try {
            webRequest.EndGetResponse(asyncResult);
        } catch (WebException webException) {
            requestState.errorMessage = webException.Message;
        }
    }

    static private void ScanTimeoutCallback (object state, bool timedOut)  { 
        if (timedOut)  {
            RequestState requestState = (RequestState)state;
            if (requestState != null) 
                requestState.webRequest.Abort();
        } else {
            RegisteredWaitHandle registeredWaitHandle = (RegisteredWaitHandle)state;
            if (registeredWaitHandle != null)
                registeredWaitHandle.Unregister(null);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T17:18:13.687

我让线程在 iOS 上工作 - 我相信它是由于鬼线程或其他原因而崩溃的。重新启动设备似乎已经修复了崩溃问题，所以我将只使用带有线程的 WebRequest.HttpWebRequest。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-02T20:33:56.330

There is a way of doing this asynchronously, without using IEnumerator and yield return stuff. Check out the eDriven framework.

HttpConnector class: [https://github.com/dkozar/eDriven/blob/master/eDriven.Networking/Rpc/Core/HttpConnector.cs](https://github.com/dkozar/eDriven/blob/master/eDriven.Networking/Rpc/Core/HttpConnector.cs)

I've been using JsonFX with HttpConnector all the time, for instance in this WebPlayer demo: [http://edrivenunity.com/load-images](http://edrivenunity.com/load-images)

Not having PUT and DELETE is not a big issue, since all of it could be done using GET and POST. For instance I'm successfully communicating with Drupal CMS using its REST service.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-30T22:25:06.340

```
// javascript in the web player not ios, android or desktop you could just run the following code:

var jscall:String;
    jscall="var reqScript = document.createElement('script');";
    jscall+="reqScript.src = 'synchmanager_secure2.jsp?userid="+uid+"&token="+access_token+"&rnd='+Math.random()*777;";
    jscall+="document.body.appendChild(reqScript);";
Application.ExternalEval(jscall);
// cs
string jscall;
    jscall="var reqScript = document.createElement('script');";
    jscall+="reqScript.src = 'synchmanager_secure2.jsp?userid="+uid+"&token="+access_token+"&rnd='+Math.random()*777;";
    jscall+="document.body.appendChild(reqScript);";
    Application.ExternalEval(jscall);

// then update your object using the your return in a function like this
// json return object always asynch
function sendMyReturn(args){
     var unity=getUnity();
     unity.SendMessage("object", "function", args );
}
sendMyReturn(args); 
```

或者您可以出于安全目的通过 AJAX 函数预先编写的自定义标头发送它，您需要签名的标头和从服务器返回的签名请求我更喜欢 md5 签名相对它们不是那么大**

# java - 整数 v/s 整数

> ID：12224604
> 
> 赞同：3
> 
> 时间：2012-09-01T03:13:07.653
> 
> 标签：java, wrapper, primitive

[在 oracle 文档java.lang](http://docs.oracle.com/javase/7/docs/api/java/lang/package-summary.html)页面上阅读此内容：

> 通常需要将原始类型的值表示为对象。包装类`Boolean`, `Character`, `Integer`, `Long`,`Float`和`Double`用于此目的。

我不确定我理解为什么需要这些。它说它们具有有用的功能，例如`equals()`. 但如果我能做到`(a==b)`，我为什么要声明它们`Integer`，使用更多内存和使用`equals()`？2的内存使用情况有何不同？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-01T03:16:26.213

[Java 的泛型系统](http://docs.oracle.com/javase/tutorial/java/generics/types.html)只支持类类型。而且由于原语不是类，它们不能与泛型一起使用。但是，原语的包装类可以用作泛型类型。例如，您可以不声明`ArrayList<int>`，但可以使用 实现类似的功能`ArrayList<Integer>`。

它也偶尔用于将变量的值初始化为`null`. 然而，基元不能设置为`null`; 该特权是为对象保留的。

```
// This is OK
Integer iDontKnowValueYet = null;

// Compile error!
int iDontKnowThisYetEither = null; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T04:53:18.367

像 int、char、double 这样的东西都是原语，这意味着它们不需要使用“new”来实例化。Integer、Character、Double 之类的对象在计算机上占用更多空间（因为对象的开销更大），但您可以使用 Integer.parse() 之类的方法。通常，使用原语，并且仅在需要其中一种方法时才使用对象版本。

要回答关于 a==b 与 a.equals(b) 的问题：

```
Integer a = new Integer(5);
Integer b = new Integer(5); 
```

即使它们是相同的值（这是 .equals 测试的），它们也不是同一块内存，因为您两次说“新”。a!=b 但 a.equals(b)

```
Integer a = new Integer(5);
Integer b = a; 
```

现在它们使用相同的内存，意思是如果你改变一个，你就同时改变它们（除非你再次使用“new”）。a==b 和 a.equals(b)

```
//using last code block
b = new Integer(5); 
```

现在再次 a!=b 但 a.equals(b)==true 因为它们再次具有相同的值但它们位于不同的内存块上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T03:15:42.563

当您将整数放入数据结构中时，它们通常被包装在包装类中。因此，.equals 方法用于确定何时在数据结构上调用 .contains 方法。

其他有用的方法： toString toHexString parseString

# actionscript-3 - 舞台文字。如何将用户输入存储在变量中？

> ID：12224605
> 
> 赞同：0
> 
> 时间：2012-09-01T03:13:15.997
> 
> 标签：actionscript-3, air

我有一个在我的手机上工作的 stageText 对象。我可以在该字段中输入并显示文本。如何捕获输入文本并将其存储在变量中以备后用？谢谢你。

```
var qatAccessCode:StageText = new StageText();
qatAccessCode.softKeyboardType = SoftKeyboardType.NUMBER;
qatAccessCode.restrict = "0-9";
qatAccessCode.returnKeyLabel = ReturnKeyLabel.GO;
qatAccessCode.stage = this.stage;
qatAccessCode.viewPort = new Rectangle(225, 765, 200, 35 ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T03:19:05.523

你制作了一个字符串变量。和 stageText 添加更改事件。`text`并在发生事件时存储 stageText 属性。稍后使用 String 变量。

```
import flash.display.Sprite;
import flash.display.StageAlign;
import flash.display.StageScaleMode;
import flash.geom.Rectangle;
import flash.text.ReturnKeyLabel;
import flash.text.SoftKeyboardType;
import flash.text.StageText;
import flash.events.Event;

var str:String;
var stageText:StageText = new StageText();
stageText.softKeyboardType = SoftKeyboardType.NUMBER;
stageText.restrict = "0-9";
stageText.returnKeyLabel = ReturnKeyLabel.GO;

stageText.stage = this.stage;
stageText.viewPort = new Rectangle(10, 10, 300, 40 );
stageText.addEventListener(Event.CHANGE, onChange);
function onChange(e:Event):void
{
    str = stageText.text;

    trace(str);
} 
```

# javascript - 我想将查询字符串变量添加到 JSON 名称/值对

> ID：12224607
> 
> 赞同：0
> 
> 时间：2012-09-01T03:13:32.317
> 
> 标签：javascript, asp.net, json, keyvaluepair

我有一个 .asp 页面，其 url 为`page.asp?id=33&album=ourcookout` page.asp 调用一个 file.js 在 file.js 中有一行函数下`url: "post_file.php",` 我如何在 JSON 名称 / 末尾获取我的 id=33 和 album=cookout价值对。

我正在寻找的最终结果是 url: `post_file.php?id=33&album=cookout`，但这可能会更改为任何 ID 号和任何专辑名称。

.js 文件如何动态地将变量添加到这个键中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T03:41:20.513

在您的 asp 文件中，添加隐藏字段；

```
<input type="hidden" id='myID' value="<%= Request("id") %>" />
<input type="hidden" id='myAlbum' value="<%= Request("album") %>" /> 
```

在运行 javascript 之前，请确保在您的页面上输出这些内容。

现在，在准备好 JSON 之前，将以下内容添加到您的 javascript 文件中；

```
var myID = document.getElementById("myID").value;
var myAlbum = document.getElementById("myAlbum").value; 
```

然后将JSON准备更改为；

```
url: "post_file.php?id=" + myID + "&album=" + myAlbum 
```

# xml - System.Xml.XmlException：解析 EntityName 时出错

> ID：12224609
> 
> 赞同：1
> 
> 时间：2012-09-01T03:13:42.890
> 
> 标签：xml, xslt, sqlxml

我正在尝试转换一些 XML [由 sql 查询返回，例如 SELECT ... FOR XML RAW('EmailData'),ROOT('Emails'),type] 但无论出于何种原因，这行给我带来了问题：

```
<Emails>
  <EmailData ID="370" C_ID="93" Co_ID="019" MemberName="Twin Cities Orthopedics – Savage" Commit_Program_ID="92" SubmittedBy="9175" AccountExecInfo="Jessica Cooley, jcooley@cc.com" PortfolioExecInfo="Seth Bull, 000.581.5006, sbulling@CCDD.com" SupplierRepInfo="Matt Matts, 000.000.4236 Ext-37, Matt.Matts@ker.com" MemberInfoLink="https://nf.CCDD.com/asp/memberinfo.asp?memid=7893&amp;co=019" DocumentLink="https://nf.CCDD.com/asp/maintanance.asp?doc_id=630" TermsAndCondLink="https://nf.CCDD.com/TermsAndConditions.asp?CPID=92" Doc_Source_ID="BTM" SubmittedByInfo="Automated Tier Update" />
</Emails> 
```

Cuplrit 似乎是 MemberName 属性值......因为当我返回一个空字符串而不是上述值时，我没有得到异常。您是否看到任何无效字符？'-' 是 xml 的无效字符吗？

我的 XSL 转换代码：

```
public static SqlXml Transform(SqlXml inputDataXML, SqlXml inputTransformXML)
        {
            try
            {
                MemoryStream memoryXml = new System.IO.MemoryStream();
                XslCompiledTransform xslt = new XslCompiledTransform();
                XmlReader output = null;

                xslt.Load(inputTransformXML.CreateReader());

                // Output the newly constructed XML
                XmlTextWriter outputWriter = new XmlTextWriter(memoryXml, System.Text.Encoding.Default);
                xslt.Transform(inputDataXML.CreateReader(), null, outputWriter, null);
                memoryXml.Seek(0, System.IO.SeekOrigin.Begin);
                output = new XmlTextReader(memoryXml);

                return new SqlXml(output);
            }
            catch(Exception ex)
            {
                byte[] byteArray = Encoding.ASCII.GetBytes( "<error>" + ex.ToString() + "</error>");
                    MemoryStream stream = new MemoryStream( byteArray );
                    XmlReader reader = new XmlTextReader(stream);
                SqlXml x = new SqlXml(reader);

                return x;
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T08:38:20.347

成员名称值中的连字符可能实际上是“em-dash”或“en-dash”而不是正常的连字符，例如，如果数据是从 Microsoft Word 复制并粘贴的，则可能会发生这种情况，进入数据库时​​。

尝试找出 SQL 中字符的 ASCII 值。它将是 150 或 151。

```
SELECT ASCII(SUBSTRING(MemberName, 23, 1)) FROM Member WHERE .... 
```

如果是这样，它们可能需要在 XML 中`&#x2013;`分别编码为和“—”。

这在很大程度上取决于 XML 的编码。例如，尝试在 IE 中打开以下文件（其中包含短划线和短划线），看看它们的处理方式有何不同

```
<?xml version="1.0" encoding="WINDOWS-1252"?>
<Emails> <EmailData MemberName="Twin Cities Orthopedics –— Savage"/> </Emails> 
```

上面的文件应该可以工作，但下面的文件不应该。

```
<?xml version="1.0" encoding="utf-8"?>
<Emails> <EmailData MemberName="Twin Cities Orthopedics –— Savage"/> </Emails> 
```

将它们编码为`&#x2013;`并且`&#x2014;`在这两种情况下都可以使用。

# php - 在 PHP 中使用类/OOP

> ID：12224612
> 
> 赞同：-1
> 
> 时间：2012-09-01T03:14:41.623
> 
> 标签：php, oop

在 OOP 之外，我非常精通 PHP——我现在才开始涉足。

我一直在看视频和阅读教程，但它们仍然很混乱......

如果我有

**文件 1 (class.time.php)**

```
class Time {
    function GetTime(){
        $time = date('H:i:s');
        printf($time);
    }
} 
```

然后在另一个 php 页面中，我得到了

**文件 2 (page.php)**

我可以

```
include('class.time.php'); 
```

然后我可以在这个页面的任何地方做

```
$time = new Time; //Calling the class and setting the class to a variable
$time->GetTime(); //This is BASICALLY saying (run the 'GetTime' function in the 'Time Class' 
```

我的主要问题是，上面的评论（这基本上是说.....）是否正确？还是有更好的思考方式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T03:36:34.280

# 关于方法调用

我将对您的陈述进行一个更正，更准确地暗示面向对象的全部含义。您的评论内容如下：

> 在“时间类”中运行“GetTime”函数

这只是有点准确，对其进行阐述可能会为您阐明 OOP。为了这篇文章的目的，我可能会这样改写它：

> *运行绑定到 $time 中存储的对象*的“GetTime”方法（在 Time 类中定义）

 *看到不同？你不仅仅是从一个类中调用一个函数，你说的是“从类中获取处理指令，但是将这些指令绑定到这个*特定*的对象，然后执行。

这听起来像是切碎的话，但它对于理解封装至关重要。类的对象共享它们的方法定义，但它们**不共享数据**。

您可以将对象视为本质上由两个事物组成的集合：

1.  一块存储它自己的个人数据的内存
2.  指向一组对该数据具有特殊访问权限的方法的指针

（方法与数据关系的“特殊”性质是隐式或显式的，由您决定）

当您开始使用“成员变量”（有时称为“对象属性”、“实例变量（aka ivars）”或类似名称）时，这种区别很明显。考虑这个示例代码：

```
class Person {
  public $name;
  public printName() {
    echo $this->name;
  }
}

$me = new Person();
$you = new Person();

$me->name = "Chris";
$you->name = "Alex";

$me->printName(); // "Chris"
$you->printName(); // "Alex" 
```

这突出了一个事实，即每个对象都有自己的实例变量内存。它们共享这些变量的定义，以及为处理这些变量而编写的代码块。

我对这个答案的总体意图特别感兴趣的是特殊变量`$this`：同一方法定义中的同一变量实际上指向不同的对象，具体取决于您在哪个对象上调用该方法。

# 关于`new`

现在到上一行，您的评论内容为（关于`$time = new Time`）：

> 调用类并将类设置为变量

我的表达方式是：

> 创建这个类的一个实例，并允许我通过 $time 访问该实例

**在继续之前，实例**这个词将是一个重要的概念。你不*调用一个类*，你*调用一个方法*，并且你不（至少在 PHP 中）将变量的值设置为一个类，你将它们设置为指向类的*实例*。有时人们可以互换使用*实例*和*对象*这两个词，这很好。但是您不应该将它们与单词*类*互换使用。

**让我们获得技术**：

当您使用`new`运算符时，从技术上讲，您是在告诉 PHP 做两件事：

1.  获取一些新鲜的内存，*正好足以*存储类中定义的所有成员变量
2.  在该新对象上调用特殊方法以允许我初始化我的对象

因此，如果您调用`new`两次，您会为 2 个对象获取足够的内存，依此类推。PHP 使用您的类定义来确定要为您分配多少内存，并找到要调用的特殊方法。

该特殊方法称为`__construct`，并保证在创建对象时调用，该特殊`$this`变量指向您闪亮的新内存。这是您如何使用它的示例：

```
class Foo {
 private $createdTime;
 public function __construct() {
  $this->createdTime = time();
 }
}

$myFoo = new Foo; 
```

即使您没有看到它，它也`__construct()` *被*调用并且 的值已`$createdTime`被初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T03:17:47.050

这是正确的，但语法应该是：

```
$time = new Time();
$time->GetTime(); 
```

（不要忘记括号，否则你指的是类属性）

此外，最好将您的方法声明为公共、受保护或私有。如果要从类外部调用 GetTime 方法，则它需要是公共的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T03:18:02.680

是的，基本上你的假设是正确的（除了语法错误）。

然而，这不是一个很好的 OO 设计。

看看这个，它给出了一些 OO 设计的好例子：http: [//www.math-cs.gordon.edu/courses/cs211/ATMExample/](http://www.math-cs.gordon.edu/courses/cs211/ATMExample/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T03:39:00.637

由于在这种情况下“获取时间”永远不会改变并且不接受任何参数，因此您最好将其放入静态方法中，因为在这种情况下实例化一个类是一种浪费

例如：

```
class Time {
    static public function GetTime(){
        $time = date('H:i:s');
        printf($time);
    }
}

Time::GetTime(); // gets the time, no need to do $time = new Time(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-27T07:25:55.430

在我看来，您这样做是正确的，但是对于使用简单的内置日期函数，通过类使用它可能会使它过于复杂。

下面是一篇优秀的 PHP 学习 OOP 的文章 [PHP OOP 初学者](http://code.tutsplus.com/tutorials/object-oriented-php-for-beginners--net-12762)*

# jquery - 在 load() 中传递多个 GET 变量？

> ID：12224617
> 
> 赞同：0
> 
> 时间：2012-09-01T03:15:49.200
> 
> 标签：jquery

我有一个未包含在“表单”标签中的 HTML 表单。只有输入然后使用 JQuery 的 load() 方法通过 GET 传递。

这就是它的编码方式。

```
$("#loader").load("mail.php", {
            name: $("input[name=name]").val(),
            email: $("input[name=email]").val(),
            phone: $("input[name=phone]").val(),
            city: $("input[name=city]").val(),
            subject: $("input[name=subject]").val(),
            message: $("textarea[name=message]").val()
        }); 
```

问题：有没有一种方法可以将所有输入传递给 load() 方法，而不必编写每个输入？

像这样的东西：

```
$("#loader").load("mail.php", allinputs); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T03:20:56.470

假设您有一个父容器，其中包含所有称为“容器”的项目。

```
$('.container').click(function(){
    var allInputs = $('.container :input').serialize();
    $('#loader').load('mail.php', allInputs);
}); 
```

[这样的事情可能会帮助你走得更远。](http://jsfiddle.net/CCKra/)

# macos - 如何在 Mac OS X Snow Leopard 上运行 bash 脚本？

> ID：12224621
> 
> 赞同：2
> 
> 时间：2012-09-01T03:16:01.280
> 
> 标签：macos, bash, unix

我所有的 bash 脚本似乎都不能在 Mac OS X Snow Leopard 上运行。我创建了一个虚拟 bash shell 脚本（dummy.sh）。脚本的权限是

```
-rwxr-xr-x@ 
```

该脚本有以下几行：

```
#!/bin/bash
echo 
```

我的 $PATH 是

```
/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/local/git/bin:/usr/X11/bin 
```

但是，每次我尝试在终端中运行 dummy.sh 时，都会收到此错误：

```
-bash: dummy.sh: command not found 
```

bash 被确认在 /bin

有人可以帮我确定为什么我不能运行我创建的 shell 脚本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T03:17:23.773

你没有'。在您的路径中，并且没有使用显式路径调用它。

# android - XML Parser 返回 null 作为第一行

> ID：12224624
> 
> 赞同：0
> 
> 时间：2012-09-01T03:16:21.737
> 
> 标签：android, android-xml, android-resources, android-parser

我正在使用 XML Parser 从 XML 文件中读取数据。

XML Parser 将第一行读取为空，然后从这样创建的 xml 文件中返回其他数据。

以下是 XML 解析代码：

```
XmlResourceParser parser = getResources().getXml(R.xml.contacts);

        int eventType = -1;
        try {
            while (eventType != XmlResourceParser.END_DOCUMENT) 
            {
                if(eventType == XmlResourceParser.START_TAG) 
                {
                    if(parser.getName().toString().equals("contact") && parser.getName().toString().equals("null"))
                        col.append(parser.getAttributeValue(null, "name") + "\n");
                        col.append(parser.getAttributeValue(null, "phone") + "\n \n");
                }
                eventType = parser.next();
            }
        }
        catch (XmlPullParserException e) {

            e.printStackTrace();
        } 
```

以下是 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<contacts>
    <contact name="Prathama Blood Center" phone="079 26600101" />
    <contact name="Green Cross" phone="079 25507013"/>
    <contact name="Crossworld Blood Bank" phone="079 26568004"/>
    <contact name="Adarsh Voluntary Blood Bank" phone="079 22746672"/>
    <contact name="Red Cross" phone="079 27551790"/>
</contacts> 
```

以下是我得到的屏幕：

![在此处输入图像描述](../Images/ca2776680d063fb66ef12b99ad1ed7f7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T03:25:09.983

现在你`if`唯一的范围扩展到第一个`col.append`我不确定你为什么需要那个 if 语句（因为它永远不会正确）这是范围应该是什么：

```
if(parser.getName().toString().equals("contact") && parser.getName().toString().equals("null"))
{ //here
    col.append(parser.getAttributeValue(null, "name") + "\n");
    col.append(parser.getAttributeValue(null, "phone") + "\n \n");
}//and here 
```

# css - CSS 解析媒体查询支持

> ID：12224629
> 
> 赞同：2
> 
> 时间：2012-09-01T03:17:34.053
> 
> 标签：css, resolution, media-queries, dpi, liquid-layout

目前，似乎只有 Firefox 和 Internet Explorer (!) 支持`min-resolution`和`max-resolution`CSS 媒体查询（请参阅[此处](http://www.browsersupport.net/CSS/@media_%28min-resolution%29)和[此处](http://www.browsersupport.net/CSS/%40media_%28max-resolution%29)）。我们什么时候可以期望 Webkit 浏览器支持这些媒体查询？特别是，哪些版本的 Chrome 和 Safari 将支持它们？如果开发版本不支持查询，是否计划支持它们？具有讽刺意味的是，带有 Retina 显示屏的 Macbook Pro 上的 Safari 尚不支持此查询。

谢谢您的帮助！

# r - 在R中处理具有不等长度行的矩阵

> ID：12224630
> 
> 赞同：0
> 
> 时间：2012-09-01T03:17:38.470
> 
> 标签：r, matrix, division

我想划分两个矩阵：`numer1`和`denom1`。问题是它们的行长不相等。该脚本每周运行一次，因此尺寸也每周更改一次。

本星期：

```
dim(numer1) = 998 rows, 99 columns 

dim(denom1) = 997 rows, 99 columns. 
```

上个星期：

```
dim(numer1) = 999 rows, 99 columns 

dim(denom1) = 998 rows, 99 columns. 
```

有没有办法比较这些矩阵并删除较大矩阵中的最后一行（在本例中为`numer1`）？

这是我尝试过的：

```
fun1 <- as.data.frame(abs(numer1[-last(numer1),]/denom1)) 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T03:27:57.950

这个怎么样：

```
rows <- 1:pmin(nrow(numer1), nrow(denom1))
frac1 <- numer1[rows,] / denom1[rows,] 
```

# javascript - 使用javascript在点击时更改图像大小

> ID：12224646
> 
> 赞同：1
> 
> 时间：2012-09-01T03:22:39.597
> 
> 标签：javascript, asp.net

我正在使用 ASP.NET,C# 来开发我的网络应用程序，我有一个按钮（创建为图像），当用户单击此按钮时，它的大小应该在一小部分时间内减小，然后它应该返回又是正常大小，我该如何执行此效果？我已经为按钮点击创建了一个 javascript 函数，我想使用 Javascript 来实现这个效果

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T04:30:32.860

尝试以下操作：

HTML

```
<img src="images/someimage.jpg" onclick="handleClick(this)" style="width:100px"/> 
```

JavaScript：

```
function handleClick(sender)
{ 
    var thisWidth=parseInt(sender.style.width.replace('px',''));

    sender.style.width=(thisWidth-10) + 'px';

    setTimeout(function(){
        sender.style.width=(thisWidth+10) + 'px';
    },500);
} 
```

点击后，图片的宽度会减小 10 像素，500 毫秒后会恢复到正常大小。

希望对你有帮助！

# c - += 赋值后是否返回左侧的值？

> ID：12224648
> 
> 赞同：1
> 
> 时间：2012-09-01T03:22:56.497
> 
> 标签：c

C 标准（最好是 C89,90）是怎么说的：

```
int a,b;
a = 4;
b = (a += 1); 
```

?

我已经对其进行了测试，结果是`b=5`，这是我所期望的。我只是想对标准感到放心。这同样适用于类似的运算符，如`*=`, `/=`,`&=`等。我知道`=`在赋值后肯定会返回左侧的值。根据标准，我只想知道`+=`,`*=`等的行为是否相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T03:49:03.090

赋值运算符不会“返回”一个值：它们产生一个值，或者按照标准的说法，有一个值。

该值属于左操作数，尽管它不是左值。这是摘录：

> (3.3.16) 赋值表达式在赋值后具有左操作数的值，但不是左值。

所有这些`= *= /= %= += -= <<= >>= &= ^= |=`都是赋值运算符，因此它们在这方面的行为方式相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T03:28:55.747

除非有副作用，否则这不是问题。

赋值运算符不是序列点，这意味着无法保证评估的顺序。

如果你按照你给出的（`b = (a += 1);`）使用它，那不是问题。

但是，在其他情况下，这可能是一个问题，例如：

```
b = (a += 1) + a; // undefined 
```

请注意，在此示例中，变量`a`被引用了两次。这意味着我们不知道是否先评估`(a += 1)`或`a`先评估。所以我们不知道第二个引用`a`是在添加之前还是之后`1`。

如果你只引用你用`+=`and co 分配的每个变量。一次，那么副作用就不是问题了，你可以指望和相关的运算符在赋值**后**`+=`返回值。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T03:29:31.723

这应该导致`b = 5`和`a = 5`。这是因为`a+=1`需要`a`并添加`1`到它。然后它分配`a`给`b`。

我对你的问题有点困惑，但是，`*=`所有的工作方式都是一样的。`/=``-=`

例如，您可以只拥有`int c = 7`; 然后在下一行做`c*=3`。这将使`c = 21`. 如果在您的示例中，您不想要`a = 5`; 那么就不要做`a+=1`，而是做`a+1`。**

# java - JTable.removeColumn() 方法抛出异常

> ID：12224650
> 
> 赞同：3
> 
> 时间：2012-09-01T03:23:06.823
> 
> 标签：java, swing, jtable, swingworker, event-dispatching

要仅从 JTable 的视图中隐藏一列，我正在使用该`removeColumn()`方法。但它抛出异常

```
Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: 7 >= 7
at java.util.Vector.elementAt(Vector.java:470)
at javax.swing.table.DefaultTableColumnModel.getColumn(DefaultTableColumnModel.java:294)
at javax.swing.plaf.basic.BasicTableHeaderUI.paint(BasicTableHeaderUI.java:648) 
```

我认为，从视图中删除列后，如果我修改了模型，则会弹出此异常。是因为模型正在更新表时视图中没有列吗？

在 JTable 中隐藏列的最佳方法是什么？而不是将大小设置为 0

编辑：异常不会定期发生。这是一个随机例外。无论如何这里是代码：

```
 @Override
        protected Object doInBackground() throws Exception {
        ........
        resultDTO=//get data from database
        tableModel.setDataVector(resultDTO.getAllRows(), tableModel.getColumnNames());    
        // hide column
        table.removeColumn(table.getColumnModel().getColumn(7));
            System.out.println("table column count : " + table.getColumnCount());
            System.out.println("model column count : " + tableModel.getColumnCount());
        ........
        .........       
        }

initial result (with out any data in table, at application startup): 
table column count : 7
model column count : 8

after populating data (first running of above method):
table column count : 7
model column count : 8

after few times executing : 
table column count : 7
model column count : 8
Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: 7 >= 7
    at java.util.Vector.elementAt(Vector.java:470)
    at javax.swing.table.DefaultTableColumnModel.getColumn(DefaultTableColumnModel.java:294)
    at javax.swing.plaf.basic.BasicTableHeaderUI.paint(BasicTableHeaderUI.java:648)
    at javax.swing.plaf.synth.SynthTableHeaderUI.paint(SynthTableHeaderUI.java:173) 
```

有时当我第一次加载数据时会发生上述异常，有时则不会。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T04:56:44.120

您正在尝试在[Event Dispatching Thread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)之外更新 UI 组件，这绝不是一个好主意

```
protected Object doInBackground() throws Exception {
    ........
    resultDTO=//get data from database
    // This shouldn't be done here
    tableModel.setDataVector(resultDTO.getAllRows(), tableModel.getColumnNames());  
    // and neither should this
    // hide column
    table.removeColumn(table.getColumnModel().getColumn(7)); 
```

竖起大拇指使用`SwingWorker`虽然。问题是，Swing 组件不是线程安全的，您永远不应该尝试在 EDT 之外更新它们，因为它们会导致意外结果（就像您刚刚遇到的那样）。

我建议使用`publish`/`process`方法，而不是直接设置行数据。如果您无法决定何时删除该列，我会在工作人员执行之前或在工作人员`done`方法中删除它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T06:40:59.057

阅读有关[SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)的教程并使用

*   `process()`

*   `publish()`

*   `setProgress()`

用于通知、添加、删除、`Swing JComponents`修改`doInBackground()`

# arrays - 循环计数数组

> ID：12224651
> 
> 赞同：0
> 
> 时间：2012-09-01T03:23:09.900
> 
> 标签：arrays, count

我有一个循环...

```
while($rows=mysql_fetch_array($result))
    {

        $staff[] = $rows['staff'];
        $a = array_count_values($staff);
        $b = count($a);
        echo"$b<br>";

    } 
```

那个输出

```
1
1
1
2
2
2
3
3
4
5
5 
```

在我的研究中，一定是这样，我希望结果是这样的

```
3   (is equal to three 1's)
3   (is equal to three 2's)
2   (is equal to two 3)
1   (is equal to one 4)
2   (is equal to two 5's) 
```

有什么帮助吗？

我想要的是获取数组中相同元素的数量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T03:32:29.673

据我了解您的担忧，这应该可以解决问题：

```
$staff = array();
while($rows=mysql_fetch_array($result))
{
    $staff[] = $rows['staff'];
}
$a = array_count_values($staff);
print_r($a); 
```

# unity3d - 使用 unityscript 为基于统一 3d 的 iOS 应用程序编写弹出窗口

> ID：12224653
> 
> 赞同：0
> 
> 时间：2012-09-01T03:23:42.613
> 
> 标签：unity3d

我正在尝试为基于统一 3d ios 的应用程序编写弹出插件，我想编写一个插件，该插件将创建一个打开新窗口的按钮，并在新窗口中放置一个网站链接。我知道如何生成一个按钮，但后来我卡住了，帮助任何人？！，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:18:44.083

如果您将插件理解为一组 GUI 元素，您可以使用新的`ModalWindow`(v4.1.2) 或通过`GUI`该类进行自定义。

[http://docs.unity3d.com/Documentation/Components/GUIScriptingGuide.html](http://docs.unity3d.com/Documentation/Components/GUIScriptingGuide.html) [http://docs.unity3d.com/Documentation/ScriptReference/GUI.html](http://docs.unity3d.com/Documentation/ScriptReference/GUI.html)

如果您不喜欢 UnityGUI，您可以获取其他一些第三方库来完成您的工作，例如 NGUI：[http ://www.tasharen.com/?page_id=140](http://www.tasharen.com/?page_id=140)

查看 Unity 的 Asset Store 以获取更多软件包。

# python - Readlines() 与 Read() - 我可以在两个函数之间来回转换数据吗？

> ID：12224663
> 
> 赞同：-4
> 
> 时间：2012-09-01T03:27:57.627
> 
> 标签：python

我有一个包含以下功能的模块文件：

```
def replace(filename):
    match = re.sub(r'[^\s^\w]risk', 'risk', filename)
    return match

def count_words(newstring):
    from collections import defaultdict
    word_dict=defaultdict(int)
    for line in newstring:
        words=line.lower().split()
        for word in words:
            word_dict[word]+=1

    for word in word_dict:
        if'risk'==word:
           return word, word_dict[word] 
```

当我在 IDLE 中执行此操作时：

```
>>> mylist = open('C:\\Users\\ahn_133\\Desktop\\Python Project\\test10.txt').read()
>>> newstrings=replace(mylist)    
>>> newone=count_words(newstrings) 
```

test10.txt 仅包含用于测试的单词，例如：

#

风险风险更大的风险。风险？

#

我收到以下错误：

```
Traceback (most recent call last):
  File "<pyshell#134>", line 1, in <module>
    newPH = replace(newPassage)
  File "C:\Users\ahn_133\Desktop\Python Project\text_modules.py", line 56, in replace
    match = re.sub(r'[^\s^\w]risk', 'risk', filename)
  File "C:\Python27\lib\re.py", line 151, in sub
    return _compile(pattern, flags).sub(repl, string, count)
TypeError: expected string or buffer 
```

无论如何运行这两个函数而不保存`newstrings`到文件中，使用打开它`readlines()`，然后运行`count_words`函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T05:56:07.717

要运行模块，您只需执行`python modulename.py`或`python.exe modulename.py`- 或双击图标。

但我想你的问题真的不是你的问题标题所说的，所以你真的应该学习[如何调试 python](https://www.google.com/search?q=python+debugging+tutorial)

# c - NULL 指针是否 < 任何其他指针（NULL 除外）？

> ID：12224664
> 
> 赞同：4
> 
> 时间：2012-09-01T03:28:17.390
> 
> 标签：c, pointers

关于C标准的另一个问题。我已经对此进行了测试，并且我总是`NULL < ptr`正确的，`ptr`任何指针都不同于`NULL`. 但我知道标准说指针算术和比较只在数组的范围内定义。我只是不确定特定的比较`NULL < ptr`是否合法。

**编辑**：我一直在阅读 K&R，我发现以下引用：

> 任何指针都可以有意义地比较是否等于或不等于零。但是对于算术或与不指向同一数组成员的指针的比较，行为是未定义的。

我不确定这是否会影响已经对此问题给出的答案。无论如何，我仍然不确定是否`p > NULL`始终保证返回 true，`p`指针在哪里`!=NULL`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T03:30:06.627

`NULL < ptr`无效：空指针不能进行关系比较。这样做会产生未定义的行为。

您是正确的，您只能以关系方式比较指向同一对象的指针（指向数组中的元素或聚合的子对象）。由于空指针不指向任何对象，因此您无法将其与任何对象进行相关比较。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T03:31:48.140

仅定义与另一个 NULL (=true) 或不 (=false) 的比较。

NULL*通常*定义为零，因此*通常*比较小于，但实际上它没有定义

# anchor - 使用锚滚动时突出显示导航项

> ID：12224665
> 
> 赞同：0
> 
> 时间：2012-09-01T03:28:19.137
> 
> 标签：anchor, highlight

我对 jQuery 很陌生，所以我需要有更多经验的人来帮助我。我有一个包含 3 个项目的导航 - 关于联系人的工作

默认情况下，我选择了工作，但我希望它将活动类更改为曾经被点击过的类。我有锚滚动工作，但我想让它在点击时突出显示到正确的导航项目。此外，如果向下滚动页面并进入下一部分时可以自动更改突出显示。

这是我用于锚滚动的 jQuery。

```
 <script>$(function() {
    var main-nav = $("#main-nav"), pos = main-nav.offset();
    $(window).scroll(function() { 
        if($(this).scrollTop() > (pos.top + 10) && $(this).scrollTop() < 15000 && main-nav.css('position') == 'static') { main-nav.addClass('fixed');  } 
        else if($(this).scrollTop() <= pos.top && main-nav.hasClass('fixed')){ main-nav.removeClass('fixed'); }
        else if($(this).scrollTop() > 15000 && main-nav.hasClass('fixed')){ main-nav.removeClass('fixed'); }
        })
    });
    </script>
    <script>$(function() {
            $('ul.nav a').bind('click',function(event){
                var $anchor = $(this);

                $('html, body').stop().animate({
                    scrollTop: $($anchor.attr('href')).offset().top
                }, 1500,'easeInOutExpo');
                /*
                if you don't want to use the easing effects:
                $('html, body').stop().animate({
                    scrollTop: $($anchor.attr('href')).offset().top
                }, 1000);
                */
                event.preventDefault();
            });
        });
    </script> 
```

这是CSS

```
 #main-nav{
      font: bold 12px 'Bitter', serif;
      width: 145px;
      float: right;
    }
    #main-nav li{
      float: left;
      list-style: none;
      margin: 10px 2px 0 2px;
      color: #c4c5c5;
    }
    #main-nav li:last-child{
      margin-right: 0;
    }
    #main-nav a{
      text-decoration: none;
      color: #c4c5c5;
    }
    #main-nav a:hover{
      text-decoration: none;
      color: #919292;
    }
    #main-nav a.active{
      color: #919292;
    } 
```

这是HTML

```
 <div id="main-nav" class="">
                <ul class="nav">
                    <li><a class="active" href="#work">Work</a></li>
                    <li>/</li>
                    <li><a href="#anchor-about">About</a></li>
                    <li>/</li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </div> 
```

如果有人可以帮助我，我将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T04:01:26.413

由于您使用`active`类来指定应突出显示的锚点，因此您只需要确保正确的锚点具有该类。修复单击导航项目时的问题很简单，在您的`$('ul.nav a').bind`添加中：

```
 $('ul.nav a').removeClass('active');
  $(this).addClass('active'); 
```

[这是一个 jsbin](http://jsbin.com/ezalib/2/edit)。

要在页面滚动时突出显示导航，您只需将页面的 scrollTop 与 DOM 中元素的偏移量进行比较……类似于您当前在`$(window).scroll`.

# python - mrjob：是否可以在 VPC 中运行作业流程？

> ID：12224671
> 
> 赞同：3
> 
> 时间：2012-09-01T03:29:44.240
> 
> 标签：python, amazon-web-services, amazon-emr, amazon-vpc, mrjob

我正在使用 mrjob 在 EMR 上运行一些 MapReduce 任务，并且我想在 VPC 中运行作业流。我查看了 mrjob 和 boto 的文档，似乎没有一个支持这一点。

有谁知道这是否可行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T15:49:22.057

现在（v 0.3.5）是不可能的。我在 github 项目上提出了拉取请求，以添加对 boto 的 'api_params' 参数的支持，因此您可以将参数直接传递给 AWS API，并使用 'Instances.Ec2SubnetId' 参数在 VPC 子网中运行作业流程.

# c# - NHibernate 的自包含 Hello World 类型示例

> ID：12224676
> 
> 赞同：1
> 
> 时间：2012-09-01T03:30:27.547
> 
> 标签：c#, .net, sql, database, nhibernate

几个月来，我一直在为 NHibernate 教程大惊小怪（是的……字面意思），但没有成功。我只想获得一个基本的“hello world”级别示例，这样我就可以使用它并将其按摩到一个适当的用例中，但我永远无法超越已弃用的代码或丢失的库文件。

由于 NHibernate 的受欢迎程度，我只能假设是我的错。有人会 pleeeeeeasee 引导我找到一个我可以下载并运行的独立示例吗？我绝对会感激的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T10:28:40.023

非常感谢大家（迭戈除外）的帮助。特别感谢 Michael Buen 对使用 Fluent NHibernate 的建议。

这里有一个很好的 NHibernate 3.0 示例，我开始工作了：[http ://www.d80.co.uk/post/2011/02/20/Linq-to-NHibernate-Tutorial.aspx](http://www.d80.co.uk/post/2011/02/20/Linq-to-NHibernate-Tutorial.aspx)

现在我需要做的就是准确地了解正在发生的事情并将其塑造成我的用途。

# ruby - 是否可以在 Sinatra / Synchrony 中模拟 JS 的 setTimeout？

> ID：12224678
> 
> 赞同：2
> 
> 时间：2012-09-01T03:30:36.343
> 
> 标签：ruby, node.js, timeout, sinatra

我可能正在寻找 node.js 的替代品——关于它的一些非常好的东西是 setTimeout() 和 setInterval()。

我发现 Sinatra 有一个[名为 Synchrony 的插件](https://github.com/igrigorik/em-synchrony)，它看起来像是我可能实际使用的东西。

只创建一个新线程并让它做一个busywait之类的是否合理？

# java - GWT Eclipse java 插件：代码辅助在事件处理程序中不起作用

> ID：12224681
> 
> 赞同：1
> 
> 时间：2012-09-01T03:30:50.930
> 
> 标签：java, eclipse, gwt

我正在使用 GWT 插件 2.4.0 开发 Eclipse（3.6.2、3.7.2、4.2.0）。

在这些日子里，我发现代码辅助在 EntryPoint 类的事件处理程序中不起作用。我重新安装了整个环境，然后它在那个时候工作。但是今天又疯了。我看不出有任何理由。

有没有人经历过这样的现象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T23:29:26.997

当我还没有导入各种类（如 ClickHandler）时，就会发生这种情况。

# java - BouncyCastle GCM/CCM ArrayIndexOutOfBoundsException

> ID：12224686
> 
> 赞同：4
> 
> 时间：2012-09-01T03:33:20.843
> 
> 标签：java, cryptography, aes, bouncycastle, aes-gcm

谁能给我一个在 BouncyCastle 中使用 GCM 和/或 CCM 模式与 AES 的示例？
我的代码是这样的：

```
SecretKeySpec   key = new SecretKeySpec(keyBytes, "AES");
IvParameterSpec ivSpec = new IvParameterSpec(ivBytes);
Cipher          cipher = Cipher.getInstance("AES/GCM/NoPadding", "BC");
byte[] block = new byte[1048576];
int i;
long st,et;

cipher.init(Cipher.ENCRYPT_MODE, key, ivSpec);

BufferedInputStream bIn=new BufferedInputStream(new ProgressMonitorInputStream(null,"Encrypting ...",new FileInputStream("input")));
CipherInputStream       cIn = new CipherInputStream(bIn, cipher);
BufferedOutputStream bOut=new BufferedOutputStream(new FileOutputStream("output.enc"));

int ch;
while ((i = cIn.read(block)) != -1) {
    bOut.write(block, 0, i);
}
cIn.close();
bOut.close();

Thread.sleep(5000);

cipher.init(Cipher.DECRYPT_MODE, key, ivSpec);

BufferedInputStream fis=new BufferedInputStream(new ProgressMonitorInputStream(null,"Decrypting ...",new FileInputStream("output.enc")));
//FileInputStream fis=new FileInputStream("output.enc");
//FileOutputStream ro=new FileOutputStream("regen.plain");
BufferedOutputStream ro=new BufferedOutputStream(new FileOutputStream("regen.plain"));

CipherInputStream dcIn = new CipherInputStream(fis, cipher);

while ((i = dcIn.read(block)) != -1) {
        ro.write(block, 0, i);
}

dcIn.close();
ro.close(); 
```

但在 GCM 模式下解密时会引发此异常（第 70 行是`bOut.write(block, 0, i);`）：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException
    at java.lang.System.arraycopy(Native Method)
    at org.bouncycastle.crypto.modes.CCMBlockCipher.processPacket(Unknown Source)
    at org.bouncycastle.crypto.modes.CCMBlockCipher.doFinal(Unknown Source)
    at org.bouncycastle.jcajce.provider.symmetric.util.BaseBlockCipher$AEADGenericBlockCipher.doFinal(Unknown Source)
    at org.bouncycastle.jcajce.provider.symmetric.util.BaseBlockCipher.engineDoFinal(Unknown Source)
    at javax.crypto.Cipher.doFinal(DashoA13*..)
    at javax.crypto.CipherInputStream.a(DashoA13*..)
    at javax.crypto.CipherInputStream.read(DashoA13*..)
    at javax.crypto.CipherInputStream.read(DashoA13*..)
    at enctest.Main.main(Main.java:70) 
```

在 CCM 模式下加密时出现此异常（第 70 行是`bOut.write(block, 0, i);`）：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException
    at java.lang.System.arraycopy(Native Method)
    at org.bouncycastle.crypto.modes.CCMBlockCipher.processPacket(Unknown Source)
    at org.bouncycastle.crypto.modes.CCMBlockCipher.doFinal(Unknown Source)
    at org.bouncycastle.jcajce.provider.symmetric.util.BaseBlockCipher$AEADGenericBlockCipher.doFinal(Unknown Source)
    at org.bouncycastle.jcajce.provider.symmetric.util.BaseBlockCipher.engineDoFinal(Unknown Source)
    at javax.crypto.Cipher.doFinal(DashoA13*..)
    at javax.crypto.CipherInputStream.a(DashoA13*..)
    at javax.crypto.CipherInputStream.read(DashoA13*..)
    at javax.crypto.CipherInputStream.read(DashoA13*..)
    at enctest.Main.main(Main.java:70) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T12:21:54.417

对于 CCM 模式有一个小问题：IV 的大小应该小于块大小。您的代码在以下情况下崩溃：

```
BlockCipher ctrCipher = new SICBlockCipher(cipher);
byte[] iv = new byte[blockSize];
byte[] out;

iv[0] = (byte)(((15 - nonce.length) - 1) & 0x7);

System.arraycopy(nonce, 0, iv, 1, nonce.length); 
```

尝试使用 15 字节的“IV”代替（IV 实际上是一个 NONCE，但`IvParameterSpec`用于 NONCE）。

另一个问题是，当无法从底层流中检索任何数据时以及何时调用该`cipher.doFinal()`方法时，都会调用该方法。请注意，这是一个写得非常糟糕的类，当它被抛出时也会被删除 - 这是标签验证失败时出现的异常（！！！）。您最好创建自己的基于. 我已更改代码以引发特定的基于异常而不是忽略异常，并保持状态以查看是否已在基础密码上执行。它不应该调用两次。`CipherInputStream``close()``CipherInputStream``BadPaddingException``CipherInputStream``IOException``boolean``doFinal()``doFinal()`

因此，您在这里运行的是 Java JCE 错误。我可能会将它放在 Oracle 错误数据库中，直到现在我的所有错误报告都被完全忽略了。

针对最新版本的 OpenJDK 7 和 Bouncy Castle 1.47（2012-08-30 或类似版本）进行了测试。

# perl - 为什么我在下面的 perl one liner 中需要大括号？

> ID：12224687
> 
> 赞同：6
> 
> 时间：2012-09-01T03:33:21.990
> 
> 标签：perl

我看到了一个 perl one liner 来生成一些 8 个字符的随机字符串：

`perl -le 'print map { ("a".."z")[rand 26] } 1..5'`

`{}`但如果没有for 地图，这是行不通的。这是为什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-01T04:02:36.383

见[`perldoc -f map`](http://perldoc.perl.org/functions/map.html)。 `map`有两种形式：`map({block} @array)`和`map(expression, @array)`。后一种形式可以像这样使用：

```
perl -le 'print map(("a".."z")[rand 26], 1..5)'
perl -le 'print map +("a".."z")[rand 26], 1..5' 
```

* * *

原因

```
perl -le 'print map ("a".."z")[rand 26], 1..5' 
```

不起作用是因为它解析为

```
perl -le 'print(((map("a".."z"))[rand(26)]), 1..5)' 
```

换句话说，`"a".."z"`成为 的唯一参数`map`，这是无效的。这可以通过一组额外的括号或一元来消除歧义`+`。

# javascript - 使用 jQuery + Javascript 识别空文本节点

> ID：12224697
> 
> 赞同：1
> 
> 时间：2012-09-01T03:36:34.903
> 
> 标签：javascript, jquery, dom

你会认为这很容易——但我正在经历最艰难的时期。

这是我要确定的内容：

```
<span class="cw-value-one"></span> 
```

这是我目前使用的：

```
 $('span.cw-value-one').each(function(){
        var textNode = $(this).text();
        var type = typeof textNode;
        var len = textNode.length;
        if($(this).is(':empty')){
            $(this).siblings('span.cw-value-two').css({"position": "relative", "left": "1em"});
        }
    }); 
```

好的，所以`textNode = ""`，`type = string`和`len = 1`- 这些都无助于识别空文本节点，因为`a`它的类型为字符串，长度为 1。jQuery`.is(':empty')`也不起作用。

那么，您如何识别 JQuery 或纯 Javascript 中的空文本节点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T03:41:44.803

您可能在 span 中使用`trim()`空格来删除文本周围的 span 内的空格（如果有）。

**[现场演示](http://jsfiddle.net/rajaadil/3QG6m/)**

```
 var textNode = $(this).text().trim(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T04:09:54.657

尝试检查文本的长度。

```
$('span.cw-value-one').each(function(){
        var textNode = $(this).text();
        var type = typeof textNode;
        var len = textNode.length;

        if(len <= 0){
            $(this).siblings('span.cw-value-two').css({"position": "relative", "left": "1em"});
        }
    });​ 
```

我还建议修剪文本。如果您想修剪文本，请务必查看此内容，即不喜欢修剪。[JavaScript 中的 .trim() 在 IE 中不起作用](https://stackoverflow.com/questions/2308134/trim-in-javascript-not-working-in-ie)

# regex - 范围内的正则表达式

> ID：12224699
> 
> 赞同：0
> 
> 时间：2012-09-01T03:37:21.200
> 
> 标签：regex

抱歉这些愚蠢的问题，但我自己找不到线索

我是 regexp 语言的初学者，我希望有人帮助在 content-range Http=Header 中查找和替换以下值

```
Content-Range: bytes x-xxxxx/xxxx 
```

我想找到该`xxxx`值并将其替换为，`yyyyy`因此该值将是

```
x-xxxxxx/yyyy 
```

例如

`0-423423/7777777`成为`0-423423/9999999`

任何人都可以帮助我吗

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T03:43:33.393

由于您没有提供有关实现语言的详细信息，因此这里是正则表达式和 PCRE 样式的替换

### 正则表达式

```
(\d+-\d+)/\d+ 
```

### 替代品

```
$1/1234512345 
```

您的替换值在哪里`1234512345`（您要更改的斜线后面的数字）

# c - 将 char 数组反序列化为 int 和 int[] 和结构？

> ID：12224703
> 
> 赞同：1
> 
> 时间：2012-09-01T03:38:13.797
> 
> 标签：c, arrays, struct, embedded, deserialization

我可以`struct`通过将它视为一个值数组来填充它`unsigned char`吗？

我通过 RS232 UART 从微控制器接收字符数据。使用 C，我如何反序列化我的数据类型 uint16_t、uin32_t、int32_t[]、...中的 char 数组

例如

```
uin16_t StartID = ARRAY[0];
uin16_t EndID = ARRAY[246]; 
```

……有这样的吗？在 C# 中有有效的反序列化函数，但在 C 中没有

为以后

```
if (StartID == 11)
    printf("good"); 
else 
    printf("bad"); 
```

我使这个结构在以后使用 Data 时更容易工作。有没有办法将数据从我的 ARRAY[248] 获取到我的结构中？

```
typedef struct
{
  //Header 6byte
  uint16_t StartID; // Check if its 1 or in hex 0b
  uint16_t ID;      
  uint16_t LoadID;  

  //Payload 240 byte
  int32_t POS01[3];  
  int32_t POS02[3];
  int32_t POS03[3];
  int32_t POS04[3];
  int32_t POS05[3];
  int32_t POS06[3];
  int32_t POS07[3];
  int32_t POS08[3];
  int32_t POS09[3];
  int32_t POS10[3];
  int32_t POS11[3];
  int32_t POS12[3];
  int32_t POS13[3];
  int32_t POS14[3];
  int32_t POS15[3];
  int32_t POS16[3];
  int32_t POS17[3];
  int32_t POS18[3];
  int32_t POS19[3];
  int32_t POS20[3];

  //End 2byte
  uint16_t EndID; // Check if its 47 or in hex 2F

} DATA_POS; //TOTAL = 248byte 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T03:53:16.243

C有一个特性叫做`pointers`：

```
uin16_t *StartID = (void*)&ARRAY[0];
uin16_t *EndID = (void*)&ARRAY[246]; 
```

以其他格式访问数据的其他方法包括`unions`：

```
 union 
   {
      uint32_t *u32;
      uint16_t *u16;
      uint8_t  *u8;
   } u; 
```

如您所见，有时功能不需要专用功能。

但是请注意，由于以这种方式访问​​数据，在某些平台上可能会出现对齐问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T22:15:30.877

有许多类似的方法。您可以使用 C`union`来避免使用显式指针。您可以使用“memcpy”将内容复制`unsigned char[]`到结构的内存中`DATA_POS`。或者您可以在从串行端口读取时直接在该内存上写入。

你没有提到字节序是否是一个问题，所以我也会解决这个问题。

A`union`允许您以不同的数据类型访问相同的内存块。例如：

```
#include <stdio.h>

#define chars_per_int (sizeof(int) / sizeof(char))

// Note that every member of a union exists at the same memory location,
// so changing the value of one will change the value of all
union IntAsChars {
    unsigned int integerValue;
    unsigned char characterValue[chars_per_int];
};

int main() {
    int i;
    union IntAsChars value;

    value.integerValue = 0x1234abcd;

    for (i = 0; i < chars_per_int; i++) {
        printf("Character value is: %x\n", value.characterValue[i]);
    }

    return 0;
} 
```

上面的代码将相同的`sizeof(int)`字节视为一串字符值，并打印每个字节的数值。

根据您的代码，您正在寻找一个像

```
union data_representation {
    unsigned char char_data[248];
    DATA_POS data_pos;
};

union data_representation data; 
```

这将让您从串行部分填写，但从您的代码中`data.char_data`引用。`data.data_pos.StartID`

但是请注意，不同的体系结构可以以不同的顺序存储整数的各个字节。英特尔架构传统上使用小端表示。上面代码的输出在 x86 上会有所不同：

```
Character value is: cd
Character value is: ab
Character value is: 34
Character value is: 12 
```

和 SPARC：

```
Character value is: 12
Character value is: 34
Character value is: ab
Character value is: cd 
```

最安全的通用方法是在系统之间发送大端数据（在这种情况下，通过串行端口）并使用`ntohs`/`ntohl`转换为本地主机的表示。这些函数将“网络”（大端）短（`ntohs`）或长（`ntohl`）数据转换为本地系统使用的任何格式。`ntoh`表示`n`etwork `to` `h`ost，后缀是`s`hort 或`l`ong 值。从主机格式转换为大端格式有相应的`htons`和函数。`htonl`

因此，您仍然需要填充，但使用和`data.char_data`读取数据以获取本机值。`ntohs(data.data_pos.StartID)``ntohl(data.data_pos.POS04[1])`

制作自己的转换例程甚至可能有意义，这样您就没有下面的`ntohl`/ `ntohs sprinkled throughout your code later. For example, the`convert_to_host_format` 函数将 248 个字符的输入数组转换为具有适当字节序的 DATA_POS 结构。

```
void convert_POS_to_host_format (int32_t dest[3], int32_t src[3]) {
    dest[0] = ntohl(src[0]);
    dest[1] = ntohl(src[1]);
    dest[2] = ntohl(src[2]);
}

DATA_POS convert_to_host_format (char buffer[248]) {
    DATA_POS host_data;
    union data_representation data;

    memcpy((void*)data.char_data, (void*)buffer, sizeof(buffer));

    host_data.StartID = ntohs(data.data_pos.StartID);
    host_data.ID = ntohs(data.data_pos.ID);
    host_data.LoadID = ntohs(data.data_pos.LoadID);

    convert_POS_to_host_format (host_data.POS01, data.data_pos.POS01);
    convert_POS_to_host_format (host_data.POS02, data.data_pos.POS02);
    convert_POS_to_host_format (host_data.POS03, data.data_pos.POS03);

    /* ... */

    convert_POS_to_host_format (host_data.POS19, data.data_pos.POS19);
    convert_POS_to_host_format (host_data.POS20, data.data_pos.POS20);

    host_data.EndID = ntohs(data.data_pos.EndID);

    return host_data;
} 
```

如果您想跳过`union`,`memcpy`可用于通过直接写入保存以下内容的内存来获得相同的结果`DATA_POS`：

```
void convert_POS_to_host_format (int32_t POS[3]) {
    POS[0] = ntohl(POS[0]);
    POS[1] = ntohl(POS[1]);
    POS[2] = ntohl(POS[2]);
}

DATA_POS convert_to_host_format (char buffer[sizeof(DATA_POS)]) {
    DATA_POS host_data;

    /* Write the contents of 'buffer' directly into the memory location of
     * 'host_data'.
    memcpy((void*)host_data, (void*)buffer, sizeof(DATA_POS));

    /* Convert values to host byte order in place. */
    host_data.StartID = ntohs(host_data.StartID);
    host_data.ID = ntohs(host_data.ID);
    host_data.LoadID = ntohs(host_data.LoadID);

    convert_POS_to_host_format (host_data.POS01);
    convert_POS_to_host_format (host_data.POS02);
    convert_POS_to_host_format (host_data.POS03);

    /* ... */

    convert_POS_to_host_format (host_data.POS19);
    convert_POS_to_host_format (host_data.POS20);

    host_data.EndID = ntohs(data.data_pos.EndID);

    return host_data;
} 
```

您甚至可以在*读取*UART 数据时使用指针直接写入 DATA_POS 结构。下面将结构 ( `&data`) 的地址视为无符号字符指针。

使用上面的 convert_to_host_format 结构这样的函数来解决字节顺序问题仍然是一个好主意。但是，如果您不需要能够在多个架构上运行，那么以下内容应该足以满足您的需求。

```
DATA_POS data;
int i;
char *write_buffer;

write_buffer = (unsigned char*) &data;

for (i = 0; i < sizeof(DATA_POS); i++) {
    write_buffer[i] = read_byte_from_uart();
} 
```

如果您有什么需要我澄清的，请告诉我。

# image-processing - 找到具有良好阈值的饱和度

> ID：12224704
> 
> 赞同：1
> 
> 时间：2012-09-01T03:38:24.293
> 
> 标签：image-processing, matlab

我是 matlab 的新手，我想对我的图像设置阈值。[我想找到紫色细胞的饱和度，以区分哪一个是癌症，因为癌症有特定的饱和度](https://i.stack.imgur.com/tRdhQ.jpg) ，但我不知道该怎么做。这是我的代码。它永远不会进入 if 部分！在这些代码中，我使用红色通道，但我想这是错误的！此外，分割部分已经完成，紫色单元格被分割。我唯一需要的是一个好的门槛。请指导我..谢谢这里是代码：

```
imshow(segmented_images{2})
hsvImage = rgb2hsv(segmented_images{2});
%%segmented_images{2} is a segmented image
Rchannel = hsvImage(:,:,1);
Rchannel=int8(Rchannel);

if Rchannel > 2736*3765

 message = sprintf('it is a cancer image');
    reply = questdlg(message, 'Continue with Demo?', 'OK','cancel', 'OK');
    if strcmpi(reply, 'cancel')
        % User canceled so exit.
        return;
    end
end

 [1]: http://i.stack.imgur.com/jn2X9.jpg 
```

![在此处输入图像描述](../Images/eb914aed027ab17be30da1503b5389a1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T02:04:36.680

使用自动计算的二进制阈值会很棘手。如果可能，请使用颜色信息。光靠强度信息可能是不够的。

以下是一些需要考虑的选项：

1.  在不同的色彩空间中工作。RGB 通常不像 HSI 那样有用的色彩空间。如果您转换为 HSI，然后为图像中的所有像素绘制 H 与 S 或 H 与 I 的图，您应该能够发现紫色癌症与周围组织颜色之间的差异。在灰度图像中执行此操作要困难得多。
2.  不要对图像进行二值化，而是考虑使用分水岭算法。这会将图像分割成不仅仅是一个前景和一个背景。或者，比这更好...
3.  尝试均值偏移聚类，这可能非常适合这个问题。均值偏移会在相邻的、颜色相似的区域中找到斑点，即使它们具有奇怪的形状。

[http://www.cs.cityu.edu.hk/~wzhao2/mean_shift.htm](http://www.cs.cityu.edu.hk/~wzhao2/mean_shift.htm)

[http://www.mathworks.com/matlabcentral/fileexchange/10161-mean-shift-clustering](http://www.mathworks.com/matlabcentral/fileexchange/10161-mean-shift-clustering)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T13:42:46.223

不是真正的编程问题。这样的阈值完全取决于您正在处理的数据和应用程序。这是您需要从对数据的统计和经验分析中得出的结论。这里没有人能给你这个。

# database - VS2012 中缺少本地数据库缓存模板

> ID：12224705
> 
> 赞同：2
> 
> 时间：2012-09-01T03:38:34.257
> 
> 标签：database, caching, local, visual-studio-2012

我有一个基于本地数据库缓存模板的 VS 2010 项目。一切都很好。

我想在VS2012中写一个类似的项目，但是我找不到相同的模板。有一个专门使用 SQL CE 4.0 的“本地数据库”模板，但即使这样也不会显示所需的配置数据库同步对话框。

谁能指出这个模板可能在哪里？（或者它是否已从 VS2012 中删除并被更新的技术所取代？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:02:47.650

刚刚发现是Visual Studio 2012的BUG *，**已经在**[Microsoft Connect](http://connect.microsoft.com/VisualStudio/feedback/details/761198/visual-studio-2012-professional)*上提交了。

# slider - Drupal 7 nivo 滑块

> ID：12224708
> 
> 赞同：1
> 
> 时间：2012-09-01T03:39:32.953
> 
> 标签：slider, nivo-slider

我看到你和我有同样的问题。你能用 nivo 滑块脚本解决这个问题，直到所有图像都下载完成？

# jquery - 使用 jQuery 对 /home 目录的 AJAX url 请求

> ID：12224709
> 
> 赞同：2
> 
> 时间：2012-09-01T03:39:34.373
> 
> 标签：jquery, ajax, absolute-path

我的网站分为 public_html 目录和包含我所有 PHP 脚本的私有端 /home 目录。

我正在尝试利用 jQuery 的 .ajax 请求来访问我的 public_html 目录之外的 PHP 脚本，但是在这样做时遇到了麻烦。我知道 AJAX 请求不允许域外请求，但是有没有办法“说服”AJAX 我的请求的合法性，因为它实际上在我的域内？

我当前的代码：

```
$.ajax({
    type: "GET",
    url: "/path/to/script",
    success: function(resp){
        alert(resp);
    },
    error: function(){
        alert('%$!@');
    }
}); 
```

我将如何才能在比我的 www 根目录更深的目录中访问这些脚本？我希望保持一定的隐私和对我的脚本的控制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-21T12:25:24.667

我可能误解了这个问题，所以我在这里有三个不同的答案。第一个与您使用的“域”一词有关。如果您使用 http 访问公共内容，使用 https 访问私有内容，您最好的选择可能是不要尝试。浏览器对于让 AJAX 代码访问主网页加载方法之外的内容变得非常挑剔。对于我自己的网站项目，我决定将所有内容移至 https 模式，并在通过 http 访问的目录中只留下两个文件：“favicon.ico”的副本和新的“index.html”，其中包含以下内容：

```
 <!DOCTYPE html>
 <html>
 <head>
   <meta charset="UTF-8" />
   <meta name="Author" content="Me" />
   <meta name="Copyright" content= "(C) by Me" />
   <title>Switching to https mode ...</title>
 </head>
 <body onload="window.name='Redirect';window.open('https://www.mysite.com/index.html',
 'Redirect');">
 &nbsp;<h1><noscript><span style="color:#ff0000;">
 This site requires JavaScript to work properly.</span></noscript></h1>
 </body>
 </html> 
```

下一个答案。检查您的 php.ini 文件以了解“open_basedir”的设置方式。它需要是一个比您希望 Web 服务器出于任何目的访问的所有目录更接近目录树主干的目录。请注意，Apache 设置为使用 PHP 的方式，有时它的 /bin 目录中可能有一个 php.ini 文件的副本，并且您会希望两个 .ini 文件中的 open_basedir 设置相同。

最后一个答案：使用 AJAX 调用的 .php 文件中的相对路径需要非常小心——但首先让我们回顾一下简单的东西。假设您的基本目录是：

```
 /Base  //(ignoring drive letter and any "baser" directories here) 
```

在该目录中，您有一些 .html 文件，它们将调用一些 .php 文件，也在该目录中。您可以通过在 XMLHttpRequest 对象的 JavaScript 代码中使用类似的内容来访问它们，在这些 .html 文件之一中：

```
 AJAXobj.open("GET", "./task1.php?URLdata=hi", true); 
```

“./”指定“与此 .html 文件相同的目录”。同时，让我们假设您有一个子目录：

```
 /Base/SubDir 
```

在该目录中，您有一些 .html 文件，它们将像以前一样在 /Base 目录中调用相同的 .php 文件。对于子目录中的 .html 文件，您将需要这个稍微不同的 JavaScript：

```
 AJAXobj.open("GET", "../task1.php?URLdata=hi", true); 
```

“../”指定“包含此 .html 文件的父目录”。

现在是棘手的事情。假设，在 task1.php 文件中，您需要访问不同子目录中的一些数据：

```
 /Base/DataDir 
```

事实证明，.html 文件的位置可能决定了您需要在 .php 文件中指定的路径！进一步来说：

A）如果 task1.php 文件（在 /Base 目录中）直接访问另一个（/DataDir）子目录中的文件，则需要这样的东西：

```
 file("./DataDir/DatFile.txt", FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES); 
```

--无论调用task1.php的.html文件位于何处，这都是正确的

B) 如果 .php 文件为该文件创建一个字符串，并返回该字符串以进行 AJAX 处理（因为 .html 文件中的更多 JavaScript 代码将访问数据文件），那么 PHP 创建的字符串将取决于.html 文件的位置，或者：

```
 "./DataDir/DatFile.txt" 
```

对于 /Base 目录中的任何 .html 文件，或

```
 "../DataDir/DatFile.txt" 
```

对于 /Base/SubDir 中的任何 .html 文件

一个简单的解决方案可能是有两个非常相似的 .php 文件，比如 task1a.php 和 task1b.php 另一种可能是指定绝对路径而不是相对路径：

```
 "https://www.mysite.com/DataDir/DatFile.txt" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T04:31:32.197

你得到什么错误信息？（检查控制台）。浏览器会告诉您问题是否是跨源的。您可能需要在服务器上为该路径设置别名。我认为 Ajax 不会让您在不使用“file:///” uri 方案的情况下进入根目录之下。我不知道文件uri方案是否可以在Ajax中使用。别名肯定会起作用。这是在您的 httpd.conf 文件中完成的

# python - 在 matplotlib 中标记轴

> ID：12224710
> 
> 赞同：0
> 
> 时间：2012-09-01T03:39:52.163
> 
> 标签：python, matplotlib

我有一个包含 10 列和 100 行的二维网格数据，我正在使用该`imshow`命令绘制数据的颜色图。因为有 10 列和 100 行我得到一个矩形图，所以为了获得正确的纵横比，我更改`extent`了命令中的。所以我的 x 轴范围是 100 到 200，这是我想要的，但我的 y 轴范围是 0 到 100，但我希望它的范围是 0.0001 到 0.001。这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T03:55:45.570

您可能需要指定`aspect='auto'`更改纵横比的选项。

```
import matplotlib.pyplot as plt
import numpy as np

data = np.random.random((100, 10))
extent = [0.0001, 0.001, 100, 200]

plt.figure(1)
plt.imshow(data)

plt.figure(2)
plt.imshow(data, extent=extent)

plt.figure(3)
plt.imshow(data, extent=extent, aspect='auto')

plt.show() 
```

# javascript - 正则表达式中的一个错误

> ID：12224711
> 
> 赞同：0
> 
> 时间：2012-09-01T03:40:06.033
> 
> 标签：javascript, regex, replace

```
var text = "Price: 123 dollar."
text.replace(/((\d+\.?\d+?)|(\d{1,3}(\,\d{3})+)) *([a-zA-Z]+)/, function(a,b,c){
document.write(a+" | "+b+" | "+c);
return;
} 
```

现在的输出是：**123 美元 | 123 | 123**

但我需要输出为：**123 美元 | 123 | 美元**

它适用于正则表达式 /\b((?:\d+.)?\d+) *([a-zA-Z]+)/

想不通..为什么b和c是一样的？！

**修复：**解决方案是删除不必要的捕获组：

/(( **?:** \d+.?\d+?)|( **?:** \d{1,3}( **?:** \,\d{3})+)) *([a-zA-Z]+)/

谢谢@Mythril 和@cababunga

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T03:45:03.327

因为您创建了更多捕获组。这意味着替换功能的更多参数，试试这个：

```
var text = "Price: 123 dollar."
text.replace(/((\d+\.?\d+?)|(\d{1,3}(\,\d{3})+)) *([a-zA-Z]+)/, function(a,b,c,d,e,f){
    document.write(a+" | "+b+" | "+f);}
); 
```

# ios - CCSprite scale - 如何更改缩放方法？

> ID：12224713
> 
> 赞同：1
> 
> 时间：2012-09-01T03:40:16.133
> 
> 标签：ios, cocos2d-iphone, ccsprite, kobold2d

我想通过最近邻法缩放 CCSprite。但是只是设置 sprite.scale 会导致缩放模糊（我认为它是双线性的）

那么如何改变缩放的方法呢？那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:15:16.387

试试这个：

```
[sprite.texture setAliasTexParameters]; 
```

请记住，这将影响所有使用纹理的精灵。

# c# - C# 控制台应用程序 - 自动截断 140 个字符的推文

> ID：12224716
> 
> 赞同：0
> 
> 时间：2012-09-01T03:40:33.770
> 
> 标签：c#, twitter, twitter-oauth

我有一个 C# 控制台应用程序，想发布推文。我目前正在使用 TweetSharp 作为 api 包装器。当发布超过 140 个字符的推文时，我收到一个禁止错误。有没有办法将这些推文自动截断为 140 个字符？

我尝试通过 .Substring(0, 140) 手动执行此操作，但我认为 TweetSharp 在发布时会自动转换为 UTF-8，如果字符串中有与号，TweetSharp 会将我的 140 截断文本字符串转换为 141+然后无法发布的字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T06:50:16.380

你可以做这样的事情。

只需截断您的字符串并使用附加代码删除禁止的剩余部分。

```
var myResult = TruncateString(yourinput, 137).VariableSafeString(); 
```

这里是使用 remove 截断。

```
private string TruncateString(string input, int length)
{
    if (input == null || input.Length < length)
        return input;

    return input.Remove(length, input.Length - length) + "...";
} 
```

以及一些扩展方法

```
public static class StringMethods
{
    /// <summary>
    /// Remove nordic characters and accents
    /// Example
    ///     "ÅÄÖ / \\íå íàøëîñü ôîðìû äëÿ îòïðàâêè" will be returned as "AAO / \\ia iaøeinu oiðiu aey ioiðaaee"
    /// </summary>
    /// <param name="s"></param>
    /// <returns></returns>
    public static string RemoveDiacritics(this string s)
    {
        string normalizedString = s.Normalize(NormalizationForm.FormD);
        StringBuilder stringBuilder = new StringBuilder();
        for (int i = 0; i < normalizedString.Length; i++)
        {
            char c = normalizedString[i];
            if (CharUnicodeInfo.GetUnicodeCategory(c) != UnicodeCategory.NonSpacingMark)
                stringBuilder.Append(c);
        }
        return stringBuilder.ToString();
    }

    /// <summary>
    /// Make string variable safe
    /// Example
    ///     "ÅÄÖ / \\íå íàøëîñü ôîðìû äëÿ îòïðàâêè" will be returned as "AAOiaiaeinuoiiuaeyioiaaee"
    /// </summary>
    /// <param name="s"></param>
    /// <returns></returns>
    public static string VariableSafeString(this string s)
    {
        return Regex.Replace(s.RemoveDiacritics(), "[^0-9a-zA-Z]+", "");
    } 
} 
```

我想你可能需要稍微调整一下正则表达式。祝好运并玩得开心点 ：）

# php - 初始运行后无法执行 jquery post 或 ajax

> ID：12224717
> 
> 赞同：1
> 
> 时间：2012-09-01T03:41:14.033
> 
> 标签：php, jquery

初次成功点击后，我似乎无法使下面的代码工作。我尝试了 $.post 和 ajax 都无济于事。删除任何项目的初始单击有效，但随后的单击无效

```
<script>    
$(document).ready(function(){
$('[id^="del"]').click(function(){
    var valname = $(this).attr('id').split('del_');
    /*$.post("delthis.php", {id: ""+valname[1]+""}, function(data) {
            $("#dynamic_section").html(data);
    });*/
    $("#dynamic_section").load('delthis.php', {"id":valname[1]} );
    return false;
  });
});
</script>

<body>

<div id='static_section'>This is the static section</div>
<div id='dynamic_section' style='border: 1px solid black;'>
<?php
// db connection here
$sql = mysql_query("SELECT * from test_table ORDER BY id");
while ($row = mysql_fetch_array($sql))
{
?>
<p><a href='#' id='del_<?php echo $row['id']; ?>'>Hello <?php echo $row['id']; ?></a></p>
<?php
} 
?>
</div> 
```

这是简单的 delthis.php 文件：

```
<?php
// db connection 
//$id = $_POST['id'];
$id = $_REQUEST['id'];

$sql = mysql_query("DELETE from test_table WHERE id = '$id'");

$sql = mysql_query("SELECT * from test_table ORDER BY id");
while ($row = mysql_fetch_array($sql))
   $html .= '<p><a href="#" id="del_' . $row['id'] . '">Hello ' . $row['id'] . '</a></p>';

echo $html;

?> 
```

感谢任何帮助/指针。蒂亚！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T03:55:36.480

问题是您替换了#dynamic_section 的所有内容，因此您必须“重新绑定”点击事件。试试这个。

```
<script>    
$(document).ready(function(){
    function doPost(evt) {
        evt.preventDefault();
        var valname = $(this).attr('id').split('del_');
        $.post("delthis.php", {id: ""+valname[1]+""}, function(data) {
            $("#dynamic_section").html(data);
            $('[id^="del"]').click(doPost);
        });
    }

    $('[id^="del"]').click(doPost);
});
</script> 
```

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T03:56:37.507

加载完动态部分后，您需要将点击功能分配给您的链接

这是我的方法。

```
<script>    

$(document).ready(function(){
  callback();
});

function callback(){
  $('[id^="del"]').click(function(){
   var valname = $(this).attr('id').split('del_');
   $("#dynamic_section").load('delthis.php', {"id":valname[1]}, function(){ callback() });
   return false;
  });

}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T12:18:18.737

试过这个并且效果很好：

```
 $('[id^="del"]').live('click', function(){ 
```

我想知道这与发布的其他解决方案相比有何优缺点。相似的？

谢谢。

# php - 需要一次错误php

> ID：12224727
> 
> 赞同：-3
> 
> 时间：2012-09-01T03:43:05.420
> 
> 标签：php, apache

我有以下错误

```
[error] [client ::1] PHP Fatal error:  require_once(): Failed opening required '../entidad/usuariosEntidad.php' 
```

我已经更改了包含的 requiere_once 以使代码正常工作，但我不知道为什么我的文件 usuariosEntidad.php 具有权限 777

文件的结构是..
-entidad/
usuariosEntidad.php -servicio/
usuariosServicio.php -vista/util/indexUtil.php
index.php

所以我试图从 usuariosServicio 调用UsuariosEntidad

```
requiere_once '../entidad/usuariosEntidad.php'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T03:55:57.490

也许路径是错误的......检查**[file_exists](http://php.net/manual/en/function.file-exists.php)**

```
if(!@file_exists('../entidad/usuariosEntidad.php') ) {
    echo 'can not include';
} else {
   include('../entidad/usuariosEntidad.php');
} 
```

你也可以尝试给出绝对路径

```
include($_SERVER['DOCUMENT_ROOT'].'/entidad/usuariosEntidad.php'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T04:40:53.593

如果该`entdadad`目录与 . 位于同一目录中`index.php`，如上所示，那么您不需要`../`以 . 开头`require_once`。它应该是：

```
require_once 'entidad/usuariosEntidad.php'; 
```

# ios - 从 iCloud 打开 txt 文件

> ID：12224731
> 
> 赞同：0
> 
> 时间：2012-09-01T03:43:39.227
> 
> 标签：ios, icloud, uidocument

在我的应用程序中，我正在尝试做一件简单的事情 - 将一个 txt 文件和一个图像文件保存到 iCloud，然后将其取回以在应用程序上打开它。

现在，我可以将 txt 和图像文件都保存到 iCloud 中——没问题。我什至可以从 iCloud 中提取文档的 URL 和文件名——那里也没有问题。但我的问题是，如何打开 txt 文件？从 iCloud 打开 txt 文件并获取文本内容的示例代码是什么？我的 txt 文件文档是 UIDocument 的子类，如果有帮助的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:11:45.493

好吧，我注意到在你问这个问题后大约 4 个月。也许这对这里的其他寻求灵魂有帮助。

基本上，在 iOS 上，您首先通过查询所有文档来打开 UIDocument，然后打开 iCloud 响应您的内容。以下是您开始查询的方式：

```
NSURL *baseURL = [[NSFileManager defaultManager] URLForUbiquityContainerIdentifier:nil];
if (baseURL)
{
    _metadataQuery = [[NSMetadataQuery alloc] init];
    [_metadataQuery setSearchScopes:[NSArray arrayWithObject:NSMetadataQueryUbiquitousDocumentsScope]];

    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"%K like '*'", NSMetadataItemFSNameKey];
    [_metadataQuery setPredicate:predicate];

    CL_DLog(@"Start query - %d",[_metadataQuery startQuery]);
} 
```

在执行上述代码之前，订阅这些通知以接收响应

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(queryDidFinish:) name:NSMetadataQueryDidFinishGatheringNotification object:_metadataQuery];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(queryDidFinish:) name:NSMetadataQueryDidUpdateNotification object:_metadataQuery]; 
```

然后在您的回复中，您可以打开文档

YourUIDocumentClassName *document = [[YourUIDocumentClassName alloc] initWithFileURL:documentURL];

```
if ([document documentState] != UIDocumentStateClosed)
{
    CL_DLog(@"FYI - metadata document state is not StateClosed.");
}

[document openWithCompletionHandler:^(BOOL success) {
.... 
```

您可以在 icloud 和 UIDocument 上查看 Apple 的会话[https://developer.apple.com/videos/wwdc/2012/?id=218](https://developer.apple.com/videos/wwdc/2012/?id=218)

希望能帮助到你。

# c++ - 为什么我不能使用带有 auto 的大括号初始化一个值并将其传递给这个函数

> ID：12224733
> 
> 赞同：1
> 
> 时间：2012-09-01T03:44:13.827
> 
> 标签：c++, c++11, auto, initializer-list

**为什么我不能用 auto 初始化一个值并将其传递给一个需要 decltype 作为参数的函数？**

让我设置场景，给你看一个小程序。

* * *

这是一个返回值的函数。

```
int Function(void); 
```

在这种情况下，它恰好是一个整数，但返回类型可能会发生变化。
这就是为什么下一个函数编写如下：

```
void What_I_Take_Depends_On_Function(decltype(Function()) x); 
```

如果有人决定改变 Function 的返回类型，那么*这个*函数的减速就不需要改变了。是的，函数的定义可能无法正确处理新类型，或者如果函数的返回类型更改为 void 会有问题，但这与我的问题无关。

```
#include <iostream>
#include <cstdlib>

int Function(void){return 5;}

void What_I_Take_Depends_On_Function(decltype(Function()) x){return;}

int main(){

    //assignments(Edit: these are initializations)
    int  var1 = Function();
    auto var2 = Function();

    //initializations
    int  var3 {Function()};
    auto var4 {Function()};

    What_I_Take_Depends_On_Function(var1); //works
    What_I_Take_Depends_On_Function(var2); //works
    What_I_Take_Depends_On_Function(var3); //works
    What_I_Take_Depends_On_Function(var4); //COMPILER ERROR

    //cannot convert ‘std::initializer_list<int>’ to ‘int’ for argument ‘1’ to ‘void What_I_Take_Depends_On_Function(int)’

    return EXIT_SUCCESS;
} 
```

那么为什么 var4 是 initializer_list 而不是 int 呢？
不能 auto 只是推断 Function 将返回一个 int，
然后将减速更改为类似于 var3 的减速吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T01:06:09.003

大括号初始化列表是 C++11 新的统一初始化语法，*如果该变量的类型已知*`{...}`，它可用于初始化任何自动、静态或成员变量。以下是一些有效的 C++11 初始化示例：

 *```
class S
{
private:
  int _m;
public:
  S(int m) : _m { m }  // <== initialization of a member
  {}
};

int main() {

  constexpr unsigned i { 10 }; // <== initialization of a constexpr

  S s { i };  // <== initialization by calling constructor

  /* ... */
} 
```

在**上述任何情况下**都`std::initializer_list`不会生成 a。大括号初始化列表`{...}`仅意味着编译器将尝试为给定数据类型识别**合适的构造函数**，其参数列表与大括号初始化列表的内容匹配（第 8.5.4 节）。

有**两种特殊情况：**

1.  如果为给定数据类型定义**的构造函数之一****将 a`std::initializer_list<T>`作为参数**，并且大括号初始化列表的内容都可以隐式转换为`T`. 当您使用其中一种内置容器类型时就是这种情况，例如

    ```
    std::vector<int> vec { 1, 2, 3 }; 
    ```

    `std::vector<T>`有一个构造函数`std::vector<T>(const std::initializer_list<T>)`，因此大括号初始化列表将被转换为 a`std::initializer_list<int>`并因此复制到向量构造函数中。构造函数将遍历列表并一一追加元素。

    当列表仅包含一个参数时，这有点陷阱：

    ```
    std::vector<int> vec { 10 }; 
    ```

    在这里，同样的事情发生了，所以你会得到一个包含一个元素的向量`10`。这与使用旧式语法不同：

    ```
    std::vector<int> vec(10); 
    ```

    这会调用`std::vector<int>(const size_t)`构造函数，即它创建一个包含 10 个默认初始化元素的向量。

2.  如果要初始化的变量的类型不是预先确定的，即**在`auto`声明中使用的时候：**

    ```
    auto v { 1, 2, 3 }; 
    ```

    在这种情况下（第 7.1.6.4/6 节），编译器无法识别合适的构造函数，因为*任何*采用三个整数（或可转换为整数）参数的数据类型都是可能的候选者。`std::initializer_list<int>`这里的规则是编译器假定`v`. 这也是你的情况。

换句话说，使用大括号初始化列表很好（甚至鼓励）初始化，但你不能轻易地将它与`auto`. 要解决您的问题，您需要明确声明数据类型

```
int var4 { Function() }; 
```

或者，为了保持灵活性，也可以`decltype`在这里使用：

```
decltype(Function()) var4 { Function() }; 
```

或者，您可以使用旧式语法：

```
auto v (Function()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T04:03:25.510

不，`auto`不会“只是推断 Function 将返回一个 int”；*auto*说明符的工作方式在 7.1.6.4 中有明确定义，如下所示：

> (7.1.6.4/p6) 一旦根据 8.3 确定了*declarator-id的类型，则使用**declarator-id*声明的变量的类型由使用模板参数推导规则的初始值设定项的类型确定。让`T`是已为变量标识符确定的类型`d`。通过`P`将`T`的 替换为`auto`新发明的类型模板参数`U`，或者，如果初始值设定项是`braced-init-list`(8.5.4)，则使用`std::initializer_list<U>`. `d`然后`A`使用函数调用 (14.8.2.1) 中的模板参数推导规则确定为变量推导的类型，其中`P`是一个函数模板参数类型，初始化器`d`是对应的参数。如果扣除失败，则声明格式错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T05:05:50.090

我对语法有误解。
我习惯于像这样初始化变量：

```
int i{0}; 
```

但是，我需要用括号而不是括号来初始化这种类型。
谢谢雷蒙德*

# javascript - Element.appendChild() 在 IE 中被冲洗 .. 解决方法？（与 innerText 与 textContent 相关）

> ID：12224739
> 
> 赞同：3
> 
> 时间：2012-09-01T03:45:47.363
> 
> 标签：javascript, internet-explorer

我听说使用`el.innerText||el.textContent`会产生不可靠的跨浏览器结果，所以我正在遍历 DOM 树以递归方式收集文本节点，并将它们写入 HTML 正文中的标签。

该脚本所做的是**从 window.location 读取哈希子字符串值并将它们写入 HTML**。

该脚本在 Chrome 和 Firefox 中为我工作，但**在 IE 中令人窒息**。

我用这样的 URL 语法调用页面：

```
http://example.com/pagename.html#dyntext=FOO&dynterm=BAR&dynimage=FRED 
```

* * *

**更新更新更新**

**解决方案：**

我将脚本移到之前`</body>`（它们应该在的位置）然后删除`console.log(sPageURL);`，现在它可以**在 Chrome、Firefox、IE8 和 IE9**中运行。

当您只是放置文本而不是获取文本时，这是我针对 innerText 与 textContent 跨浏览器问题的解决方法。在这种情况下，从 window.location 获取哈希子字符串值并将它们写入页面。

```
<html>
<body>

<span id="dyntext-span" style="font-weight: bold;"></span><br />
<span id="dynterm-span" style="font-style: italic;"></span><br />
<span id="dynimage-span" style="text-decoration: underline;"></span><br />

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>

<script>
$(document).ready(function() {
        var tags = ["dyntext", "dynterm", "dynimage"];
        for (var i = 0; i < tags.length; ++i) {
            var param = GetURLParameter(tags[i]);
            if (param) {
                var dyntext = GetURLParameter('dyntext');
                var dynterm = GetURLParameter('dynterm');
                var dynimage = GetURLParameter('dynimage');
            }
        }

        var elem = document.getElementById("dyntext-span");
        var text = document.createTextNode(dyntext);
        elem.appendChild(text);
        var elem = document.getElementById("dynterm-span");
        var text = document.createTextNode(dynterm);
        elem.appendChild(text);
        var elem = document.getElementById("dynimage-span");
        var text = document.createTextNode(dynimage);
        elem.appendChild(text);     
});

function GetURLParameter(sParam) {
    var sPageURL = window.location.hash.substring(1);
    var sURLVariables = sPageURL.split('&');
    for (var i = 0; i < sURLVariables.length; i++) {
        var sParameterName = sURLVariables[i].split('=');
        if (sParameterName[0] == sParam) {
            return sParameterName[1];
        }
    }
}

</script>

</body>
</html> 
```

* * *

**最后更新**

如果您的哈希子字符串值**需要空格**（例如包含三个单词的语言短语），则将单词与 URI 中的字符分开，并在创建每个文本节点时`+`将 unicode 字符替换为空格，如下所示：`\u002B`

```
var elem = document.getElementById("dyntext-span");
var text = document.createTextNode(dyntext.replace(/\u002B/g, " "));
elem.appendChild(text);
var elem = document.getElementById("dynterm-span");
var text = document.createTextNode(dynterm.replace(/\u002B/g, " "));
elem.appendChild(text);
var elem = document.getElementById("dynimage-span");
var text = document.createTextNode(dynimage.replace(/\u002B/g, " "));
elem.appendChild(text); 
```

现在像这样形成你的URI：

```
http://example.com/pagename.html#dyntext=FOO+MAN+CHU&dynterm=BAR+HOPPING&dynimage=FRED+IS+DEAD 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T15:37:44.827

在`console.log()`代码中，您必须在 IE 中打开开发工具。缺少`head`元素也可能导致一些问题。还是仅在此帖子中丢失？

# java - 使用 Play 进行用户管理！框架 2.0.3

> ID：12224744
> 
> 赞同：7
> 
> 时间：2012-09-01T03:48:14.860
> 
> 标签：java, playframework, playframework-2.0

我是 Play 的新手！我是一名 Django 开发人员，我开始使用 Play！几天前。我找不到有关如何将新用户注册到我的应用程序的信息。我不想使用 OAuth，我只想通过密码加密来管理我自己的数据库中的用户。顺便说一句，我使用的是Java版本。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-01T11:35:04.760

目前还没有准备好，但是我建议您使用[play-authenticate](http://joscha.github.com/play-authenticate/)（[现场演示](https://play-authenticate.herokuapp.com/)）作为基础。

这是目前 Play 2 最先进的身份验证和授权解决方案。它结合了用于授权（角色和权限）的 deadbolt-2 + 自己的身份验证，这使得它开始时非常舒适。

尽管它的基本思想是提供一种使用 OAuth 对用户进行身份验证的方法 - 这`providers`是一个可配置的选项，因此您可以禁用它并仅基于电子邮件提供商。

请注意对您很重要...**没有**内置用户管理，但是我可以确保在当前状态下它只需要添加几个操作来创建您需要的内容。我在我的几个项目中这样做，很快就会发送一个包含这些更改的拉取请求。

编辑：默认情况下，所有提供程序都启用了虚拟凭据，当然它会无法运行。您需要禁用它们`conf/play.plugins`（仅通过删除不需要的行）很可能您必须只**保留**这些行以保持 deadbolt + PA 与邮件：

```
1500:com.typesafe.plugin.CommonsMailerPlugin
10000:be.objectify.deadbolt.DeadboltPlugin
10005:service.PaUserServicePlugin
10040:providers.PaUsernamePasswordAuthProvider 
```

另外不要忘记设置正确的 SMTP 凭据，`conf/play-authenticate/smtp.conf`以确保密码恢复正常工作。

# sql-server-2008 - SQL 的任何其他解决方案“媒体集有 2 个媒体系列，但只提供了 1 个。必须提供所有成员。” 错误？

> ID：12224745
> 
> 赞同：22
> 
> 时间：2012-09-01T03:48:27.830
> 
> 标签：sql-server-2008

我正在尝试将一个 200mb 的数据库恢复到 SQL 2008 中，我收到此错误“媒体集有 2 个媒体系列，但只提供了 1 个。必须提供所有成员。”。我做了一些研究，发现在备份过程中指定了两个目标文件时会发生这种情况。我在备份时显然没有指定两个文件目的地，但我不确定因为大多数人说这是偶然发生的（facepalm）。我为可能的解决方案做了更多的谷歌搜索，但所有人都指出唯一的解决方案是重做备份过程或找到其他文件，这在我的情况下都是不可能的，因为服务器已经关闭并且我已经删除了所有我来自该服务器的文件（谁知道我的 .bak 文件会失败？）。

任何人？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-01T21:33:46.940

Codeguy007 非常正确。如果您在 INITIAL 备份中指定两个不同的备份位置，然后尝试仅从备份过程中创建的两个备份文件之一进行还原，则会出现此错误。如果您的服务器已经关闭并被擦除，那么您将被冲洗掉。但为了将来参考，您需要：

1.  开始备份向导过程
2.  确保只指定一个备份位置
3.  在选项页面上，单击“备份到新媒体集...”并指定新名称和描述

以后从该位置进行的所有恢复都应该可以正常工作。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-01T04:04:17.150

看到这个线程。Microsoft Project Manager for SQL Backup 解释了该错误。

[http://social.msdn.microsoft.com/Forums/en-US/sqltools/thread/abf50e00-c9b0-4809-9e61-43ed8a53e968/](http://social.msdn.microsoft.com/Forums/en-US/sqltools/thread/abf50e00-c9b0-4809-9e61-43ed8a53e968/)

基本上你可以将你的备份分散到 2 个文件中（就像 RAID 0 不是他所说的那样），如果你试图从一个文件中恢复，你会得到这个错误。您需要恢复这两个文件，并且不能只从一个文件中恢复。我不知道该告诉您什么，也许您错误地收到了错误消息。否则，我希望您没有对旧服务器的驱动器进行清理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-10T06:15:17.467

我自己刚刚经历了这个，我只是想确认其他人所说的并发出警告。当我第一次尝试通过向导从 2008 R2 创建备份时，备份目标已经自动添加了一个“NULL”目标。

没有意识到，我只是添加了另一个文件位置，所以最终结果是一个只有一半数据的文件。

就这么个东东！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-12T15:16:43.153

我也通过经验了解到这一点。

因此，请确保您使用一个媒体集或仅使用一个文件创建备份文件，以便将来恢复它不会有问题：

[![在此处输入图像描述](../Images/086572f15577ec01d5aefe52abd54c0d.png)](https://i.stack.imgur.com/OK3Q5.png)

# java - Guava 的 HashBasedTable cellSet()

> ID：12224747
> 
> 赞同：3
> 
> 时间：2012-09-01T03:48:52.167
> 
> 标签：java, guava

我有以下设置。

```
Table<Integer, Integer, Float> store = HashBasedTable.create();

int i = 0, j = 0;

for (List<String> stack_i : stacks) {
  j = 0;

  for (String entry_j : stack_i) {
    Float alpha = doSomeMagic(entry_j, token);
    if (alpha != null)
      store.put(i, j, alpha);
    j++;
  }
  i++;
}

if (store.cellSet().size() > 0) {
  for (Table.Cell<Integer, Integer, Float> cell : store.cellSet()) {
    if (cell.getValue() > max) {
      max = cell.getValue();
      maxchainIndex = cell.getRowKey();
    }
  }
} 
```

我遇到的问题是我收到以下 JVM 错误：

> 严重：java.lang.IllegalAccessError：试图访问方法 com.google.common.collect.Iterators.emptyModifiableIterator()Ljava/util/Iterator；从类 com.google.common.collect.StandardTable$CellIterator 在 com.google.common.collect.StandardTable$CellIterator.(StandardTable.java:310) 在 com.google.common.collect.StandardTable$CellIterator.(StandardTable.java :306) 在 com.google.common.collect.StandardTable$CellSet.iterator(StandardTable.java:280)

错误发生在行

```
for(Table.Cell<Integer,Integer,Float> cell:store.cellSet()) 
```

我看不出我在这里做错了什么。我查过了，店里至少有 1 件商品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:36:11.183

对我来说看起来不错，我能够成功运行以下命令。你能在没有任何额外元素的情况下运行它来消除任何与 for 循环无关的有趣业务吗？

```
Table<Integer, Integer, Double> abc = HashBasedTable.create();
abc.put(1, 1, 10d);
for (Table.Cell<Integer, Integer, Double> x : abc.cellSet()) {
    System.out.println(x.toString());
} 
```

# jquery - 父窗口调整大小？

> ID：12224749
> 
> 赞同：0
> 
> 时间：2012-09-01T03:49:10.360
> 
> 标签：jquery

我需要访问 iframe 的父窗口，这个脚本也加载到 iframe 窗口中。所以基本上我有这个标记。

身体 | 框架 | 身体 | 脚本

```
$(window.parent.document).resize(resizeModal); 
```

所以我需要在模态窗口内一次，以便在它的父窗口调整大小后运行基金“resizeModal（）”，但它不起作用:(

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T04:39:47.183

我最初假设 iframe 中的脚本不能影响父页面，但看起来你可以：

[在 iframe 中运行的 javascript 会影响主页吗？](https://stackoverflow.com/questions/951946/can-javascript-running-inside-an-iframe-affect-the-main-page)

您可以通过以下方式在 iframe 和父窗口之间共享变量

```
window.whatever = "value"; 
```

或`parent.`财产。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T04:46:08.423

尝试这个：

```
$("#element", top.document); 
```

top.document 告诉选择器以 myid 元素为目标，该元素存在于最顶层文档（您的父页面）中。为了使其工作，必须将 jquery 加载到通过 iframe 查看的文件中。

但为什么不换一种方式呢？父窗口正在监听事件以调整大小并将事件发送到 iframe？

```
$(window).resize(function () { 
    $("#iframe").content().find("#anything");
}); 
```

# ruby - ruby 将数组输入到类中

> ID：12224752
> 
> 赞同：0
> 
> 时间：2012-09-01T03:51:23.960
> 
> 标签：ruby

所以我有一个数组（立即定义）：

```
some_array = ["a", "b", "c"] 
```

我稍后宣布这个类：

```
class Report
    def initialize(name)
        @name=name
     end
 end 
```

我想将数组包含在这个类中，这样我就可以使用数据了。我可以像任何其他初始化数据一样导入它吗？所以基本上我有一个我想在一个类中使用的数组.. 每次我这样做我都会得到未定义的变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-08-15T21:05:28.537

`initialize`在创建类的实例时调用。尝试

```
some_array = ["a", "b", "c"]

class Report
  def initialize(name)
    @name=name
  end
end

# Create instance of Report:
report = Report.new some_array

# Check if instance variable @name has been set as expected:
report.instance_variable_get(:@name) 
```

我希望你觉得这有帮助。

# javascript - 需要一个支持 HTML5 的 JS 框架 . 哪些不会创建或破坏视图？

> ID：12224753
> 
> 赞同：0
> 
> 时间：2012-09-01T03:51:24.867
> 
> 标签：javascript, jquery, model-view-controller, html5-audio

<audio> 标签的怪癖之一是它必须在加载时嵌入到页面中，并且不能被破坏和重新创建。

谁能告诉我 Backbone.js 或许多其他 MV* 框架之一是否加载页面以使 <audio> 标记保留在页面上？

谢谢，stackOverflow 万岁！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T16:50:53.273

在大多数现代浏览器中播放音频元素根本不需要添加到 DOM。事实上，我认为即使是 IE9 也不再需要这个。距离我上次进行一轮测试已经过去几个月了，但我每天都在使用 HTML 音频。你有一个具体的案例，这是一个问题吗？

除非您告诉它，否则 Backbone 不会破坏页面上的任何元素。即使您将视图附加到主体，您仍然可以编写渲染函数以不破坏已经存在的内容。

# c++ - 在 NMLVCUSTOMDRAW C++ 中获取列 ID

> ID：12224754
> 
> 赞同：1
> 
> 时间：2012-09-01T03:51:45.833
> 
> 标签：c++, listview, custom-draw

我需要获取将绘制的列 ID。这是我的一些代码，我尝试获取项目 ID 和列 ID 以使用 ListView_GetItemText 并设置要绘制的项目的正确颜色。

```
switch( ((LPNMLVCUSTOMDRAW)lParam)->nmcd.dwDrawStage){
case CDDS_PREPAINT:
    return CDRF_NOTIFYITEMDRAW;
    break;
case CDDS_ITEMPREPAINT:
   {
    LPNMLVCUSTOMDRAW customDraw = (LPNMLVCUSTOMDRAW)lParam;
    int itemid = (customDraw->nmcd).dwItemSpec //this is item id
    //column id is missing                                                                                          
    return CDRF_NEWFONT;
        break;
   }
default: return CDRF_DODEFAULT;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T22:36:03.900

如果你包括

```
case CDDS_ITEMPREPAINT | CDDS_SUBITEM:
     int iSubItem = ((LPNMLVCUSTOMDRAW)lParam)->iSubItem;
break; 
```

这将为您提供专栏。没有发生这种情况的原因是您必须通过函数头中传递的 LRESULT 指针返回将来要接收的通知，例如

如果你的函数头看起来像：

```
::OnNMCustomdraw(NMHDR* pNMHDR, LRESULT* pResult) 
```

你需要：

```
*pResult |= CDRF_NOTIFYITEMDRAW;
*pResult |= CDRF_NOTIFYSUBITEMDRAW;
*pResult |= CDRF_NOTIFYPOSTPAINT;
*pResult |= CDRF_NOTIFYPOSTERASE; 
```

在你的函数结束时

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T04:04:43.153

`NMLVCUSTOMDRAW`包含一个名为 的成员`iSubItem`，这将告诉您正在绘制哪个“列”。

该[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774778(v=vs.85).aspx)是这样描述该成员的：

> `iSubItem`
> 
> 类型：`int`
> 
> ... 正在绘制的子项的索引。如果正在绘制主要项目，则此成员将为零。

您应该可以通过`customDraw->iSubItem`. 如果你不能，那么你需要确保你已经`_WIN32_IE` （直接或间接）定义为至少`0x0400`.

# java - 读取文本文件的最快方法

> ID：12224756
> 
> 赞同：2
> 
> 时间：2012-09-01T03:51:57.710
> 
> 标签：java, string, performance, file-io, text-files

哪种方式读取文本文件最快？1.7 的新特性是否提供了我们可以更快地读取文本文件的任何功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T04:39:36.293

我建议使用 BufferedReader，因为它的读取速度比 InputStream 之类的要快。

```
String filePath = ".../.../file.txt";
BufferedReader in = new BufferedReader(new FileReader(new File(pathPath)));
String line = null;
while((line = in.readLine()) != null)
    System.out.println(line);
in.close();  //very important to close streams 
```

您还需要尝试捕获。您也可以尝试使用 Scanner，但我认为它不如 BufferedReader 快。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-01T07:14:41.470

Java 1.4+ 包括新的*nio*（新输入/输出）包，用于更快的文件传输和检索。考虑看一个类似的答案：[Java NIO FileChannel 与 FileOutputstream 性能/实用性](https://stackoverflow.com/questions/1605332/java-nio-filechannel-versus-fileoutputstream-performance-usefulness)或 Oracle 网站上的官方示例：http: [//docs.oracle.com/javase/1.4.2/docs/guide/nio/example/索引.html](http://docs.oracle.com/javase/1.4.2/docs/guide/nio/example/index.html)

# android - 警告：未找到 dns 服务器

> ID：12224762
> 
> 赞同：4
> 
> 时间：2012-09-01T03:53:01.050
> 
> 标签：android, android-emulator, dns

我想在我手动输入 dns 设置的 android 模拟器中访问互联网，如以下链接中所述 [如何为 Android 模拟器设置 Internet 选项？](https://stackoverflow.com/questions/2437366/android-emulator-internet-access)

但是当我启动模拟器时，它仍然显示没有找到 dns 服务器的警告，因此我的 android 模拟器中没有互联网连接。我怎么解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T12:44:40.697

在 Eclipse 中：

窗口>首选项>Android>启动

默认模拟器选项：-dns-server 8.8.8.8,8.8.4.4

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-04T03:25:26.230

我尝试了上述方法，但除非在主机操作系统（Linux）上设置名称服务器，否则没有效果：

```
nano /etc/network/interfaces 

auto eth0
dns-nameservers 8.8.8.8 8.8.4.4 
```

# windows-server-2008 - 导出证书 Windows Server 2008

> ID：12224764
> 
> 赞同：0
> 
> 时间：2012-09-01T03:53:58.823
> 
> 标签：windows-server-2008, ssl-certificate

我需要在 Windows Server 2008 上导出自己创建的 SSL 证书的私钥。但是在 Microsoft 管理控制台（证书位于个人->证书文件夹中）选项“是，导出私钥”是灰色的。

阅读提供的帮助部分，它告诉证书在创建过程中需要“可导出”。然而，它也说，如果它是使用 Windows Server 2003 创建的，它只是一个限制。它没有说明如何在 Windows 2008 Server 上修复它。

证书是自签名的。我想导出为 PKCS12 格式。我以管理员身份访问 MMC，所以不应该有任何权限问题。如何使此证书“可导出”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:36:00.547

我试图在我的 IIS 服务器上导出证书，并且我成功地从 IIS 控制台导出了证书！你试过这个吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T15:26:48.030

我制作了一个新证书并使其“可导出”（如评论中所建议）：

> 如果您导入了证书并且没有设置“将私钥标记为可导出”，那么您将无法导出它 - 标志无法更改。

# iphone - 我是否应该询问网站是否需要将他们的 RSS 提要用作我的应用程序的数据？

> ID：12224765
> 
> 赞同：2
> 
> 时间：2012-09-01T03:54:05.470
> 
> 标签：iphone, ios, rss

我是否应该询问网站是否需要将他们的 RSS 提要用作我的 iPhone 应用程序的数据？

我见过几个使用 rss feed 作为后端的应用程序。他们是否征求了他们用作来源的网站的许可？大多数网站对应用程序每秒或每小时可以为 RSS 提要进行多少次调用都有限制。但是，如果我的应用程序分布在多个用户中，那么调用 rss 提要的并不是一个真正的用户。

我的另一个想法是将 rss 提要缓存在某个不同的服务器上一段时间，但随后用户可能无法获得最新的提要。我会将下载的应用程序缓存在用户的手机上，但多长时间才有意义？

我不想因为使用来自网站的 RSS 提要而被起诉，但是向每个网站征求许可就太过分了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T04:05:11.237

大多数 RSS 提要可供公众订阅，因此如果您的应用订阅它们，应该不会有问题。但是，如果您担心，您可以联系该网站（我相信他们会很感激），在您的应用中发布指向他们网站的链接（一个不错的手势），或者按照您说的做并将提要缓存为只要您认为它可以在不更新的情况下运行。

我不是 100% 确定这是否有帮助，但这里有三篇关于 RSS 许可的文章：

[http://wiki.creativecommons.org/Syndication](http://wiki.creativecommons.org/Syndication)

[http://wiki.creativecommons.org/RSS_1.0](http://wiki.creativecommons.org/RSS_1.0)

[http://wiki.creativecommons.org/RSS_2.0](http://wiki.creativecommons.org/RSS_2.0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T04:07:46.427

您不需要请求许可来使用 RSS 提要 - 这就是它的隐含用途 - 内容联合。

但是，您应该在重新发布之前检查内容的版权状态。假装内容是你的，而不是在需要的地方引用它，或者违反内容的使用条款，这些行为可能会让你陷入困境。

至于刷新率，如果刷新是由用户触发的，那我就不用担心了——这是 RSS 客户端的正常行为。如果您正在自动寻找内容更新，那么将更新设置为间隔几分钟将是尊重的。

但是，如果您正在创建一个具有广泛分布的应用程序，并且它将访问相同的 RSS 提要，那么您几乎可以肯定应该将内容缓存在您自己的服务器上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-07T15:25:02.673

仅仅因为提要可供公众使用并不意味着版权法不适用。您必须先获得许可。

# jquery - 在长时间运行的 AJAX 调用期间导航离开页面时防止 Django 异常

> ID：12224767
> 
> 赞同：1
> 
> 时间：2012-09-01T03:54:17.177
> 
> 标签：jquery, django, exception, python-2.7

在我的应用程序中，我在页面加载时使用 Jquery 触发 Ajax 获取请求。如果调用花费了异常长的时间，则用户可能会在其标准浏览会话期间导航离开初始页面。最终，这个 ajax 调用完成并返回一个响应。问题是，此时用户已经离开了页面，并且没有任何东西在监听响应。发生这种情况时，我会在日志中收到此异常。

```
----------------------------------------
Exception happened during processing of request from ('98.x.x.x', 36495)
Traceback (most recent call last):
  File "M:\Python2.7\App\lib\SocketServer.py", line 582, in process_request_thread
    self.finish_request(request, client_address)
  File "M:\Python2.7\App\lib\SocketServer.py", line 323, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "M:\Python2.7\App\lib\site-packages\django\core\servers\basehttp.py", line 139, in __init__
    super(WSGIRequestHandler, self).__init__(*args, **kwargs)
  File "M:\Python2.7\App\lib\SocketServer.py", line 640, in __init__
    self.finish()
  File "M:\Python2.7\App\lib\SocketServer.py", line 693, in finish
    self.wfile.flush()
  File "M:\Python2.7\App\lib\socket.py", line 303, in flush
    self._sock.sendall(view[write_offset:write_offset+buffer_size])
error: [Errno 10053] An established connection was aborted by the software in your host machine
---------------------------------------- 
```

我怎样才能防止这种情况发生？

例外中列出的所有文件都不是我的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T20:16:36.193

这个问题在功能上与[How to cancel an ajax request in Django when new page is requested](https://stackoverflow.com/questions/9005111/how-to-cancel-an-ajax-request-in-django-when-new-page-is-requested)相同，答案是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T07:19:56.070

这只会在您使用 django 开发服务器时发生，该服务器会尝试在控制台上记录异常。

但是，对于其他网络服务器（如 apache），您会得到类似的异常，但可能没有那么多描述性。

# objective-c - 如何配置 UIScrollView 使可见区域永远不会超出背景图像？

> ID：12224769
> 
> 赞同：1
> 
> 时间：2012-09-01T03:55:10.810
> 
> 标签：objective-c, ios, cocoa-touch, uiscrollview

在花了半个晚上试图让我自己工作之后，我终于转向 StackWisdom：

我正在尝试使用一种视差滚动背景图像（类似于 Windows Phone 7 上的 UI）来实现一个水平的分页 UIScrollView。我已经设法使用 scrollViewDidScroll 让滚动工作得很好。对于 3 页示例，我使用的是 1460x480/2920x960 像素（3*320 点 + 2*250 宽度填充）的图像。根据我在 scrollViewDidScroll 中使用的因素，滚动视图的右边缘也可以正常工作。

但是，当在第 1 页并尝试向左滚动时，可以看到背景图像在屏幕的边界处结束，并且窗口的（灰色、白色等）背景变得可见。如何配置滚动​​视图，以便在内容区域的左侧有一个额外的，例如 250 像素的背景图像？我尝试过插入、偏移、重新定位内容区域及其无数组合，但无济于事。

另外，这里是早上5:30，我累了。-_-

来源：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    CGRect screenRect = [[self window] bounds];

    // Create and configure scroll view
    UIScrollView *scrollView = [[UIScrollView alloc] initWithFrame:screenRect];
    [scrollView setDelegate:self];
    [scrollView setPagingEnabled:YES];
    [scrollView setShowsHorizontalScrollIndicator:NO];

    [[self window] addSubview:scrollView];

    pageControl = [[UIPageControl alloc] initWithFrame:CGRectMake(50, 50, 200, 50)];
    [pageControl setNumberOfPages:3];
    [pageControl setCurrentPage:0];
    [pageControl setBackgroundColor:[UIColor clearColor]];
    [[self window] addSubview:pageControl];

    backgroundImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"desert_panorama_cropped.png"]];
    [scrollView addSubview:backgroundImageView];

    // Create first content view
    screenRect.origin.x = 0;
    ContentView *firstContentView = [[ContentView alloc] initWithFrame:screenRect string:@"Page 1"];
    [scrollView addSubview:firstContentView];

    // Create second content view
    screenRect.origin.x = screenRect.size.width;
    ContentView *secondContentView = [[ContentView alloc] initWithFrame:screenRect string:@"Page 2"];
    [scrollView addSubview:secondContentView];

    // Create third content view
    screenRect.origin.x = screenRect.size.width * 2.0;
    ContentView *thirdContentView = [[ContentView alloc] initWithFrame:screenRect string:@"Page 3"];
    [scrollView addSubview:thirdContentView];

    CGRect contentRect = screenRect;
    contentRect.size.width *= 3.0;
    [scrollView setContentSize:contentRect.size];

    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];
    return YES;
}

- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    float x = scrollView.contentOffset.x;
    NSLog(@"Scrollview did scroll to offset: %f", x);

    CGRect backgroundImageFrame = backgroundImageView.frame;
    backgroundImageFrame.origin.x = x/1.5;
    backgroundImageView.frame = backgroundImageFrame;
}

- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    int newOffset = scrollView.contentOffset.x;
    int newPage = (int)((newOffset)/(scrollView.frame.size.width));
    [pageControl setCurrentPage:newPage];
} 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T04:16:16.253

我认为您所要做的就是在这一行中添加一个常量，如下所示：

```
backgroundImageFrame.origin.x = x/1.5 - 250; 
```

# security - 来自辅助角色的 HTTP 与 HTTPS Azure 存储连接

> ID：12224770
> 
> 赞同：2
> 
> 时间：2012-09-01T03:55:18.183
> 
> 标签：security, azure, storage

Azure 工作角色，处理敏感数据，但性能很重要。相同的地理位置和亲和力组。

连接到 Azure 存储时，我应该使用 HTTPS 吗？或者 HTTP 是否足够安全，因为它都在 Azure 中？

换句话说，Worker角色和存储服务器之间的通信是否发生在内部网络上？或者它是通过互联网，可以被拦截，我需要使用 HTTPS 来保护传输的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T04:22:03.570

如果存储帐户与辅助角色位于同一数据中心，则流量会通过本地网络，并且应该不会被窃听。

# git - Refname 'master' 不明确

> ID：12224773
> 
> 赞同：59
> 
> 时间：2012-09-01T03:55:45.770
> 
> 标签：git

我查看了所有其他模棱两可的 refname 问题，但似乎都没有帮助。为什么我会收到此警告？

```
$ git checkout master
warning: refname 'master' is ambiguous.
$ git show-ref master
eef61c00da690f093063ac5a728e22fd21648104 refs/heads/master
$ git branch -a
  checkers
  exercises
* master
$ git remote -v
$ 
```

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-09-01T07:07:01.577

TL;DR：保存和删除标签，如[Ashutosh Jindal](https://stackoverflow.com/users/325742/ashutosh-jindal) [评论](https://stackoverflow.com/questions/12224773/git-refname-master-is-ambiguous/12225704?noredirect=1#comment28041784_12225704)（请参阅“[在 git 中重命名标签？](https://stackoverflow.com/q/1028649/6309) ”）：

```
git tag tag-master master
git tag -d master 
```

* * *

原答案：

我看到的大多数来源（如[这个常见问题解答](http://www.mono-project.com/GitFAQ#I_get_an_ambiguous_warning_when_checking_out_a_branch)）都指向相同的原因：

> 当您尝试结帐本地分支时，您会得到一个

```
warning: refname 'branch-name' is ambiguous 
```

> **如果您创建了一个与远程标签同名的本地分支，就会发生这种情况**。
> Git 应该检出你的本地分支，但它却试图检出标签，它会感到困惑。
> 
> 几棵树的初始导入是有问题的，因为它们包含同名的分支和标签。从那以后，我们通过**[重命名标签](http://www.mono-project.com/GitFAQ/fixup-tags.sh)**解决了很多这些问题。

在您的情况下，您没有远程，但是像您的分支一样命名的本地标签就足够了。

歧义在**[gitrevision中指定](http://git-scm.com/docs/gitrevisions)**

### `<refname>`, 例如`master`, `heads/master`,`refs/heads/master`

> 一个符号引用名称。例如`master`，通常表示 . 引用的提交对象`refs/heads/master`。
> **如果你碰巧同时拥有`heads/master`and `tags/master`，你可以明确`heads/master`**告诉 git 你指的是哪一个。
> 当`<refname>`有歧义时，通过以下规则中的第一个匹配来消除 a 的歧义：
> 
> 如果`$GIT_DIR/<refname>`存在，这就是你的意思（这通常只对`HEAD`, `FETCH_HEAD`, `ORIG_HEAD`,`MERGE_HEAD`和有用`CHERRY_PICK_HEAD`）；
> 
> *   否则，`refs/<refname>`如果存在；
> *   否则，`refs/tags/<refname>`如果存在；
> *   否则，`refs/heads/<refname>`如果存在；
> *   否则，`refs/remotes/<refname>`如果存在；
> *   否则，`refs/remotes/<refname>/HEAD`如果它存在。

因此，请检查在您的存储库中`master`可以找到的位置。

并且`git checkout heads/master`永远有效。
警告：默认情况下，这会以[DETACHED HEAD 模式](https://stackoverflow.com/a/3965714/6309)检出分支。请参阅“[为什么`git checkout`使用显式 ' `refs/heads/branch`' 会给出分离的 HEAD？](https://stackoverflow.com/a/3965714/6309) ”。

为避免这种情况，并且仍然使用明确的 ref，请键入：

```
git checkout -B master heads/master 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2015-01-22T23:01:15.007

虽然这不适用于 OP 的情况，但`refname is ambiguous`在不小心做了 a`git branch origin/branch`而不是`git checkout origin/branch`. 这创建了一个名为 的本地分支`origin/branch`，这使得它与远程分支不明确。解决问题很简单`git branch -D origin/branch`（安全，因为`-D`在本地分支上运行）。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-03-05T23:19:41.653

这只是发生在我身上。我不知何故有一个包含 sha 的文件 .git/master。不知道那是怎么到那里的，但是当我删除它时，错误就消失了。如果您仔细阅读接受的答案，这是“预期行为”，但如果您这样做，您将看不到 .git/master，例如 git show-ref master 因为它遵循略有不同的规则。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-20T10:02:48.870

如果您错误地配置了两个具有相同名称的远程服务器，则会出现此消息，从而产生歧义。

检查你的`.git/config`文件。如果您有多个远程仓库配置了相同的配置：

`fetch = +refs/heads/*:refs/remotes/origin/*`.

您应该将其中一个更改为不同的名称，例如：

`fetch = +refs/heads/*:refs/remotes/another_repo/*`

# ruby-on-rails - 有没有臭味的替代品

> ID：12224775
> 
> 赞同：1
> 
> 时间：2012-09-01T03:56:13.497
> 
> 标签：ruby-on-rails

[http://rubygems.org/gems/reek](http://rubygems.org/gems/reek)不确定这是否正在积极开发中，是否有该`reek`工具的替代品。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-26T08:40:05.117

1.  [鲁博科普](https://github.com/bbatsov/rubocop)
2.  [红宝石评论家](https://github.com/whitesmith/rubycritic)
3.  [猎犬](https://github.com/thoughtbot/hound)
4.  [红宝石皮棉](https://github.com/YorickPeterse/ruby-lint)
5.  [裁缝](https://github.com/turboladen/tailor)

# java - 如何访问元素列表值

> ID：12224777
> 
> 赞同：1
> 
> 时间：2012-09-01T03:56:41.117
> 
> 标签：java, list

我读了一个文本文件，每行添加到一个`list`

```
List row = new ArrayList();
...
row.add(line); 
```

然后我遍历 List 和我打印的每个“记录”，如下所示：

```
System.out.println(row.get(i)); 
```

该语句返回

`[some, text, here]`

如何访问此处的每个字符串`[some, text, here]`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T03:59:50.790

我认为您正在阅读[CSV](http://en.wikipedia.org/wiki/Comma-values)文件，因此您可以使用 , 作为参数进行[拆分](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29)，以使您的返回值类似于 [some],[text],[here] 然后您将可以访问整个字符串的每个单词.

假设您想要访问文本，您只需使用以下内容：

```
System.out.println(row.get(i)).split(',')[2]; 
```

PS 如果 [ 和 ] 也是一个问题，您可以通过首先使用[子字符串](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#substring%28int%29)来删除它们，以仅使用您需要的子字符串。

# python - 如何在 Pandas 中按子级索引进行过滤

> ID：12224778
> 
> 赞同：6
> 
> 时间：2012-09-01T03:57:04.573
> 
> 标签：python, pandas

我有一个“df”，它有一个多级索引（STK_ID，RPT_Date）

```
 sales         cogs     net_pft
STK_ID RPT_Date                                      
000876 20060331          NaN          NaN         NaN
       20060630    857483000    729541000    67157200
       20060930   1063590000    925140000    50807000
       20061231    853960000    737660000    51574000
       20070331  -2695245000  -2305078000  -167642500
       20070630   1146245000   1050808000   113468500
       20070930   1327970000   1204800000    84337000
       20071231   1439140000   1331870000    53398000
       20080331  -3135240000  -2798090000  -248054300
       20080630   1932470000   1777010000   133756300
       20080930   1873240000   1733660000    92099000
002254 20061231 -16169620000 -15332705000  -508333200
       20070331   -763844000   -703460000    -1538000
       20070630    501221000    289167000   118012200
       20070930    460483000    274026000    95967000 
```

如何编写一个命令来过滤“RPT_Date”包含“0630”的行（这是Q2报告）？结果应该是：

```
 sales         cogs     net_pft
STK_ID RPT_Date                                      
000876 20060630    857483000    729541000    67157200
       20070630   1146245000   1050808000   113468500
       20080630   1932470000   1777010000   133756300
002254 20070630    501221000    289167000   118012200 
```

我正在尝试使用`df[df['RPT_Date'].str.contains('0630')]`，但 Pandas 拒绝工作，因为`'RPT_Date'`它不是列而是 sub_level 索引。

感谢您的提示...

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-01T13:47:53.513

要在列上使用“str.*”方法，您可以重置索引，使用列“str.*”方法调用过滤行，然后重新创建索引。

```
In [72]: x = df.reset_index(); x[x.RPT_Date.str.endswith("0630")].set_index(['STK_ID', 'RPT_Date'])
Out[72]: 
                      sales        cogs    net_pft
STK_ID RPT_Date                                   
000876 20060630   857483000   729541000   67157200
       20070630  1146245000  1050808000  113468500
       20080630  1932470000  1777010000  133756300
002254 20070630   501221000   289167000  118012200 
```

但是，这种方法并不是特别快。

```
In [73]: timeit x = df.reset_index(); x[x.RPT_Date.str.endswith("0630")].set_index(['STK_ID', 'RPT_Date'])
1000 loops, best of 3: 1.78 ms per loop 
```

另一种方法建立在 MultiIndex 对象的行为与元组列表非常相似的事实之上。

```
In [75]: df.index
Out[75]: 
MultiIndex
[('000876', '20060331') ('000876', '20060630') ('000876', '20060930')
 ('000876', '20061231') ('000876', '20070331') ('000876', '20070630')
 ('000876', '20070930') ('000876', '20071231') ('000876', '20080331')
 ('000876', '20080630') ('000876', '20080930') ('002254', '20061231')
 ('002254', '20070331') ('002254', '20070630') ('002254', '20070930')] 
```

在此基础上，您可以使用 df.index.map() 从 MultiIndex 创建一个布尔数组，并使用结果过滤帧。

```
In [76]: df[df.index.map(lambda x: x[1].endswith("0630"))]
Out[76]: 
                      sales        cogs    net_pft
STK_ID RPT_Date                                   
000876 20060630   857483000   729541000   67157200
       20070630  1146245000  1050808000  113468500
       20080630  1932470000  1777010000  133756300
002254 20070630   501221000   289167000  118012200 
```

这也快了很多。

```
In [77]: timeit df[df.index.map(lambda x: x[1].endswith("0630"))]
1000 loops, best of 3: 240 us per loop 
```

# android - 当我单击该项目并禁用android中剩余列表项中存在的所有按钮时，如何启用listview项目的按钮？

> ID：12224779
> 
> 赞同：3
> 
> 时间：2012-09-01T03:57:35.090
> 
> 标签：android, android-layout

我编写了以下代码，但它仅适用于前 3 个列表项，其余的会引发空指针异常。

```
list.setOnItemLongClickListener(new OnItemLongClickListener() {

        public boolean onItemLongClick(AdapterView<?> arg0, View arg1,final int arg2, long arg3) {
            // TODO Auto-generated method stub

            for(int i = 0; i <=list.getLastVisiblePosition(); i++)
            {
                System.out.println("onItemLongClick"+i);
                if(i==arg2)
                {
                    (list.getChildAt(i).findViewById(R.id.mark)).setVisibility(View.VISIBLE);
                    (list.getChildAt(i).findViewById(R.id.deleteitem)).setVisibility(View.VISIBLE);

                }
                else{
                    (list.getChildAt(i).findViewById(R.id.mark)).setVisibility(View.GONE);
                    (list.getChildAt(i).findViewById(R.id.deleteitem)).setVisibility(View.GONE);
                }
            }

            (list.getChildAt(arg2).findViewById(R.id.deleteitem)).setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Toast.makeText(AllMessagesActivity.this, "Delete at" +arg2, Toast.LENGTH_LONG).show();
                }
            });
         (list.getChildAt(arg2).findViewById(R.id.mark)).setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Toast.makeText(AllMessagesActivity.this, "Mark Spam at" +arg2, Toast.LENGTH_LONG).show();
                }
            });
            return false;
        }
    }); 
```

在列表项中只有一个文本项和两个按钮。当我单击一个列表项时，只有该项目的两个按钮必须可见，其余的列表项按钮不可见。当您单击其他列表项时，先前选定的项目按钮也会禁用。上面的代码仅适用于列表的前 3 项，但并不适用于所有项目。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T06:25:08.817

您需要在适配器中为此列表视图处理此问题。查看类似问题：

[如何禁用列表视图中的子项（使其颜色为灰色且不可点击）](https://stackoverflow.com/questions/5938514/how-to-disable-a-child-item-in-a-listviewmake-its-color-gray-and-unclickable)

[Android：如何在创建列表时禁用列表项](https://stackoverflow.com/questions/2183610/android-how-to-disable-list-items-on-list-creation)

[如何禁用列表视图中的项目？](https://stackoverflow.com/questions/2662358/how-to-disable-items-in-a-list-view)

本教程也很有用：

[http://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

具体来说，您可能想查看该教程的第 2 部分，其中他展示了如何更改被选中的列表项。你会在你的情况下做类似的事情，除了你会改变其他人，也许做一些簿记来跟踪“活动”列表项。

祝你好运。

# sql - 通用导入表 AA - ZZ 创建

> ID：12224783
> 
> 赞同：0
> 
> 时间：2012-09-01T03:59:30.927
> 
> 标签：sql, oracle

我需要一个通用样式导入表。每列中使用的数据将来可能会添加/更改。所以我想创建一个宽表，只记录每列代表的内容，然后通过可以提供有意义的列名的视图查询表。

除了粘贴 600 多列之外，还有没有办法编写脚本来创建这种类型的表？也许还有一个比这种方法更好用的特性。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T06:49:41.653

您可以编写一个 PL/SQL 脚本来构建创建表字符串，然后使用立即执行语句执行它。你确定数据库设计是正确的吗？600 列听起来像标准化还没有完成。

```
declare
    l_sql     varchar2(32000);
begin
     l_sql := 'create table mytable (';
     for i in 1 .. 600 loop
           l_sql := l_sql || ' col'||i||' char(10)';
           if i<600 then
              l_sql := l_sql || ',';
           end if;
     end loop;
     l_sql := l_sql || ')';
     execute immediate l_sql;
end;
/ 
```

# eclipse - Mylyn 3.8.1 中用于 Eclipse 4.2 的通用 Web 存储库连接器

> ID：12224784
> 
> 赞同：0
> 
> 时间：2012-09-01T03:59:36.603
> 
> 标签：eclipse, eclipse-plugin, redmine, mylyn, redmine-plugins

我是 Mylyn 的新手，我想将它与 Redmine 2.0 集成。我[为 Redmine 2.0 找到了这个 Mylyn 插件](http://danmunn.github.com/redmine_mylyn_connector/)。但是当我安装 Mylyn 3.8.1（[目前最新](http://www.eclipse.org/mylyn/downloads/)）时，我找不到“通用 Web 存储库连接器”来创建与 Redmine 的链接。

与 Eclipes 4.2 兼容并具有“通用 Web 存储库连接器”的 Mylyn 版本是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T08:44:33.333

“通用 Web 存储库连接器”是一个孵化器项目。您会发现使用此 [0] 链接作为存储库 url。安装后，您可以按照 [1] 中的说明进行操作

*   [0] [http://download.eclipse.org/mylyn/incubator/3.8](http://download.eclipse.org/mylyn/incubator/3.8)
*   [1] [http://www.redmine.org/projects/redmine/wiki/HowTo_Mylyn](http://www.redmine.org/projects/redmine/wiki/HowTo_Mylyn)

# c# - 为什么 list.count 在此代码中返回 0

> ID：12224789
> 
> 赞同：1
> 
> 时间：2012-09-01T04:01:06.780
> 
> 标签：c#, .net, loops, infinite-loop

我想找到这个数字的所有因素并将这些因素存储到一个列表中，但是这个 list.count 返回零

```
 List<double> listOfFactors = new List<double>();
    public void FindFactors()
    {
        double num = 600851475143 / 2;
        for (int i = 1; i <= num; i++)
        {
            if (600851475143 % i == 0)
            {
                listOfFactors.Add(i);
            }
        }
    } 
```

主要功能代码

```
 class Program
{
    static void Main(string[] args)
    {
        Calculate cl = new Calculate();
        cl.FindFactors();
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T04:05:09.677

此代码陷入无限循环。原因是这里`num`是300425737571，但最大值`int`是2147483647。for循环永远不会结束。

```
Console.WriteLine(int.MaxValue);
Console.WriteLine(int.MaxValue+1); 
```

> 2147483647
> 
> -2147483648

**编辑#1**

这是要循环的 3000 亿个项目。假设（慷慨地）每次迭代需要 100 条 CPU 指令。这意味着大约*30 万亿*条指令，在 2.5GHz 处理器上应该在大约 1000 秒（15 分钟）内完成。

**编辑#2**

两个小时后，完成。您会很高兴知道结果是`15`：

*   71
*   839
*   1471
*   6857
*   59569
*   104441
*   486847
*   1234169
*   5753023
*   10086647
*   87625999
*   408464633
*   716151937
*   8462696833

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T04:30:44.663

我是java中的新手，但问题可能是您为“double”创建了列表，但是您正在添加一些“int”。尝试为“int”创建列表。

```
List<int> listOfFactors = new List<int>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T05:15:11.720

我不认为实际上你运行这个程序直到最后或者你的调试有问题，我通过像这样将它除以 2 进一步减少了 num

```
for(int i=1;i<=(num/2);++i) 
```

当 i 越过 dbaseman 指示的整数限制时，它有一次达到零，然后由于“600851475143 % i”，它沿着“零试图除以双精度数”的行抛出错误。看看这个。

**编辑：**

以上是第一击。如果你避免了 i 等于 0 的情况，那么这里就更进一步了。

正如'dBaseman'所说，它会在某个时候达到负值。**在 mod 操作中，减号总是产生 0（任何 % -i =0）。因此，从 -1 到 -2147483648（这是整数的负数范围）的所有整数值都将产生在列表中添加一个元素。**

然后我会采取积极的态度（再次记住，你正在避免将我的情况设为零）。现在它再次将一些分隔符加载到列表中。

一段时间后，它会再次进入负面状态，填充将继续添加更多 2147483648 元素。现在列表的计数超过了 short int 的最大值。

因此**，当您调用 count 时介意它是一个整数，它将分配一个字节，但它读取的内容是 double**。所以输出为零，因为这里没有发生适当的转换（我的假设）。也许 .Net 假设列表计数永远不会超过 int 限制。我希望这有帮助。

# python - 使用 xpath 和 scrapy 在属性中使用变量

> ID：12224794
> 
> 赞同：0
> 
> 时间：2012-09-01T04:03:39.893
> 
> 标签：python, xpath, scrapy

在使用scrapy框架时，我需要一些帮助来弄清楚如何在xpath属性中使用变量

例如 hxs.select('/tr[@name="tag_1"]/td/text()').extract()

但是有 100 个标签，所以 tag_1、tag_2、tag_3 等我试图循环遍历它，但是我使用 @name="tag_" + x 时，scrapy 出错了，其中 x 是循环变量，但它没有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T06:10:51.703

我认为这可能只是引号放置不当的问题，请尝试以下操作：

```
for x in range(100):
    str_selector = '/tr[@name="tag_{0}"]/td/text()'.format(x)
    hxs.select(str_selector) 
```

# android - 带有 USB 2.0 的平板电脑是否支持 USB 主机模式而无需 root 呢？

> ID：12224796
> 
> 赞同：0
> 
> 时间：2012-09-01T04:04:36.837
> 
> 标签：android, usb

带有 USB 2.0 的平板电脑是否支持 USB 主机模式而无需 root ？

我想购买平板电脑来测试我的项目，该项目涉及将数据从平板电脑发送到 8051。我需要 root 平板电脑吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:08:54.333

如何连接 android 和 usb midi，因为当我在谷歌上搜索时，我发现它不同于常规和困难，而且我的 8051 板使用 midi 没有被检测到

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:20:03.750

[来源](http://developer.android.com/guide/topics/connectivity/usb/index.html)：Android 3.1（API 级别 12）支持 USB 主机模式。[...] 对 USB 主机和附件模式的支持最终取决于设备的硬件

有些表仍然只运行 Android 2.x，它们不支持 USB 主机模式。有些可能只是没有用于主机模式的 USB 硬件。

USB 主机模式的一个重要提示是 A 型 USB 端口，如 PC 和笔记本电脑上的 USB 端口。

# .net - 有什么理由比 CefGlue 更喜欢 CefSharp（反之亦然）？

> ID：12224798
> 
> 赞同：55
> 
> 时间：2012-09-01T04:05:06.537
> 
> 标签：.net, webkit, c++-cli, pinvoke, chromium

在为 .Net 提供体面的 Chromium Embedded Framework (CEF) 实现的领域中，两个主要选项似乎是 CefSharp 和 CefGlue。它们的方法不同（CefGlue 使用 P/Invoke 调用 CEF 非托管代码，CefSharp 使用 CEF 库周围的混合模式 C++/CLI 包装器）。

混合模式程序集是否比 P/Invoke 调用更好？在所有其他条件相同的情况下，似乎 CefGlue（P/Invoke 库）为 CEF 项目提供了一个“更薄”的包装器，这意味着响应上游库中的更新可能会更快。

有没有人有这两个图书馆的经验可以分享差异化因素是什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-03-19T16:46:30.360

从某种意义上说，它们大致相同，无论您选择哪种方式，您都应该能够在 2014 年摆脱困境。我们前段时间有过这个问题，这里我们想出了什么：

## 头孢夏普

优点：

1.  WinForms 是一个非常古老和成熟的项目。如果您要使用 WinForms，这可能是要走的路；
2.  它有一个 NuGet 包，因此易于使用和更新；
3.  支持更新版本的 WPF (.NET 4+)；

缺点：

1.  正如@Uwe Keim 所提到的，他们最近才开始支持 WPF，所以它不如 Xillium.CefGlue 成熟；
2.  社区不能接受你的需求；
3.  不支持单声道。

## 头孢胶

优点：

1.  它对 .NET 2.0 很友好。您的代码将能够在其上运行。（这对我们至关重要）
2.  一个反应迅速的社区，可以帮助您完成/修复您需要做的事情；
3.  更成熟的WPF支持；
4.  单声道支持。

缺点：

1.  据我所知，没有 NuGet 包，您需要自己添加库并更新它们

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2018-07-14T18:12:42.080

现在是 2018 年。项目的命运发生了很大变化。CefSharp 非常活跃，几乎每天都会在 GitHub 存储库中更新。问题正在得到解决，目前只有 57 个未解决的问题和 1787 个已关闭。CefGlue 似乎效果不佳。邮件列表濒临死亡，最近没有更新。GitHub 上有两个分支解决了最后发布的 CefGlue 版本之外的问题。

否则基本面没有改变。CefSharp 依赖于 C++/CLI 代码，这原本是实现 .NET-to-C++ 互操作的简单方法。但这只能在 Windows 机器上和针对 .NET Framework 的完整桌面版本的项目中工作。

但不是 Mono，不是 .NET Core（与 Xamarin 和 UWP 应用程序相关），或任何旨在可移植到另一个操作系统的库或项目。在这种情况下，C++/CLI 不是一个选项，pinvoke 必须是后备。所以头孢胶。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2018-10-27T12:47:07.180

现在是 2018 年末，老实说，它看起来很严峻。

CefSharp 虽然正在积极开发中并且有一些不错的文档，但仍然不支持 .NET Core 或 Mono，使其无法用于任何与 .NET Core、.NET Standard 或 Mono 相关的东西（我们专门将 Linux 用于生产服务器，所以这是一个很难不，可悲的是）。

相比之下，根据其他海报，CefGlue 显然确实支持 .NET Core/Mono。**然而**，这很重要，该项目转移到 GitLab 并且没有附加任何许可证。该网站也无法访问（至少是我找到的那个）并且文档不存在。

[这里](https://github.com/Litee/unofficial.xilium.cefglue)有一个叉子，但它似乎再次处于非活动状态。[这里](https://github.com/VitalElement/CefGlue.Core)还有一个非官方的 .NET Core 端口，但这似乎对 Avalonia 有很强的依赖性。

但是，有[Chromely](https://github.com/mattkol/Chromely/wiki/Getting-Started#chromely-packages)，它似乎支持跨平台并且基于 CefSharp 和 CefGlue（以及这些的非官方端口）。不过，这似乎是一个成熟的浏览器，而不是用于在应用程序中嵌入某些内容的库。

由于我最初是在寻找一种简单的方法来在我的应用程序中嵌入无头浏览器以进行爬取（消除安装 Chrome 的需要），因此我还研究了 Awesomium，但他们似乎已经转移到一个名为“Ultralight”的新项目中"，它不支持 C#，目前没有绑定。

作为最后的努力，似乎有[Optimus](https://bitbucket.org/RusKnyaz/optimus/wiki/Home)，它似乎支持 .NET Standard，并且是 .NET 中 WebBrowser 的完整实现，减去 GUI。我会尝试一下，如果它有效（或无效），可能会编辑这个答案。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-06-30T01:23:52.203

为了完成[Artem 的回答](https://stackoverflow.com/a/22512687)，**CefSharp**仅提供与 C# 的基本 javascript 集成，而**CefGlue**通过公开 CEF 提供的所有 javascript 绑定提供了一个非常完整的集成解决方案。

关于 Nugets 包，我刚刚为针对 3.2272.2035 CEF 版本的 .Net 4.5创建了**CEFGlue nuget 包：** [Unofficial.CefGlue.WPF](https://www.nuget.org/packages/Unofficial.CefGlue.WPF/)和[Unofficial.CefGlue.WindowsForm](https://www.nuget.org/packages/Unofficial.CefGlue.WindowsForm/)。

# java - 如何在 Ubuntu Desktop 12.04 上设置 ANT_HOME？

> ID：12224804
> 
> 赞同：7
> 
> 时间：2012-09-01T04:05:47.570
> 
> 标签：java, bash, ubuntu, ant, environment-variables

看起来 Ubuntu 以非常相似的方式使用`~/.bashrc`, `~/.bash_profile`, `~/.pam_profile`, `/etc/environment`, and `/etc/profile`。我希望能够将配置添加到其中之一（哪个是适当的），以设置`ANT_HOME`为我的 Ant 安装根目录的绝对路径（恰好是`/opt/apache/ant/1.8.4/apache-ant-1.8.4/`）。这个变量需要像任何普通的环境变量一样被“尊重”，我可以随时打开一个终端`echo`。如果我能以这样的方式设置它，让 Java 在运行时从`System.getProperty("")`调用中读取它，那也很好。

*   我使用哪个文件？
*   我如何实际设置它以使其满足我的上述要求？

在此先感谢您的任何帮助或指点！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-01T04:24:39.430

**对于全局设置，系统范围的环境变量**

*   利用`/etc/environment`
*   不要使用`/etc/profile`, 或`/etc/bash.bashrc`

从[这个](https://help.ubuntu.com/community/EnvironmentVariables)页面：

> `/etc/environment`[...] 专门用于系统范围的环境变量设置。它不是一个脚本文件，而是由赋值表达式组成，每行一个。具体来说，此文件存储系统范围的区域设置和路径设置。

Using`/etc/profile`是一种非常 Unix-y 的方式，但在 Ubuntu 下它的功能大大减少。它的存在只是为了指向`/etc/bash.bashrc`和收集来自`/etc/profile.d`.

在我的系统上，profile.d 中唯一有趣的条目是`/etc/profile.d/bash_completion.sh`.

**对于本地或每用户设置**

推荐的 Ubuntu 页面的早期版本`~/.pam_environment`，但该页面当前建议如果这不起作用，您应该使用

*   > `~/.profile`- 这可能是放置环境变量分配的最佳文件，因为它在启动过程桌面会话期间由 DisplayManager 自动执行，当从文本控制台登录时由登录 shell 自动执行。

*   `~/.bash_profile`或`~./bash_login`- 如果其中之一存在，当 bash 作为登录 shell 启动时，bash 会执行它而不是“~/.profile”。Bash 会更`~/.bash_profile`喜欢 `~/.bash_login`. [...] 默认情况下，这些文件不会影响图形会话。”

*   `~/.bashrc`- “...可能是最容易设置变量的地方”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-02T07:32:30.170

首先，使用以下代码打开 bash 文件。

xxx@xxx-desktop:~$ sudo gedit /etc/bash.bashrc

然后，插入 Java home 作为 JDK 位置的路径，将 ANT home 作为路径 ANT 位置，如下所述，在 bash 文件的末尾。我根据我的机器输入了位置的路径。

```
 export ANT_HOME=/usr/share/ant
 export JAVA_HOME=/usr/lib/jvm/java-6-sun
 set path=$path $ANT_HOME/bin 
```

最后，保存并关闭文件。如果配置正确，终端必须使用命令“ant –version”显示以下注释。

```
 xxx@xxx-desktop:~$ ant -version 
```

Apache Ant 1.7.1 版本于 2008 年 11 月 10 日编译 说明配置没问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-01T04:30:53.640

首先，在 *nix 上设置环境变量时省略尾部斜杠是标准做法。（你的末尾有一个斜杠）。所以你应该写：

出口 ANT_HOME=/opt/apache/ant/1.8.4/apache-ant-1.8.4

... 并不是：

出口 ANT_HOME=/opt/apache/ant/1.8.4/apache-ant-1.8.4/

~/.bashrc, ~/.bash_profile 如果您只关心*您的*用户帐户*并且*使用 bash shell，则它们是很好的选择。对于设置环境变量，您使用哪一个并没有太大区别。.bashrc 会在你每次打开一个新的 shell 时重置它，而 .bash_profile 会在你每次登录时重置它。

/etc 中的文件将为您系统上的*所有*用户设置它（但它可以在本地被覆盖）。如果您要构建不同的用户，并且希望他们都拥有相同的环境变量，那么 /etc/profile 将是放置它的好地方。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-01T06:58:42.767

我更愿意将所有环境变量放到不同的文件中，并将`source`其从`$HOME/.xsessionrc`. `.xsessionrc`只是一个 shell 脚本，它在新的 X 会话之后由 gdm、kdm 等登录管理器执行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-01T05:52:26.593

要从 java 中读取变量，请使用`System.getenv().get("ANT_HOME")`. [在此处](http://docs.oracle.com/javase/tutorial/essential/environment/env.html)阅读更多相关信息。

至于在哪里设置它，我更喜欢使用 ~/.bashrc，除非你要从其他用户运行你的程序，或者使用`sudo`. 那么你应该使用`/etc/environment`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-26T08:31:41.417

# 全局设置环境变量的最佳方法

**第1步：** 像这样
设置所有变量`/etc/environment`

```
JAVA_HOME=/usr/lib/jvm/java-6-sun
ANT_HOME=/usr/....<path to ant home>
set path="/usr/bin:<path2>:$JAVA_HOME/bin:$ANT_HOME/bin" 
```

**第 2 步：** 在每个用户
的末尾添加此行`~/.bashrc`

```
source /etc/environment 
```

**第 3 步：**
执行以下命令进行更改。

```
source ~/.bashrc 
```

希望能帮助到你..！！

# android - id 0 没有键盘使用默认键盘映射：/system/usr/keychars/qwerty.kcm.bin

> ID：12224808
> 
> 赞同：0
> 
> 时间：2012-09-01T04:06:55.990
> 
> 标签：android, android-button

当我单击此`btn_shapes`代码`btn_alphabet`中`btn_know`的 `btn_shapes`id 0 没有键盘使用默认键盘映射：/system/usr/keychars/qwerty.kcm.bin

```
public class Eng extends Activity implements OnClickListener {

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.eng);

    Button alphabet = (Button) findViewById(R.id.btn_alphabet);
    alphabet.setOnClickListener((OnClickListener)this);

    Button bshapes = (Button) findViewById(R.id.btn_shapes);
    bshapes.setOnClickListener((OnClickListener)this);

    Button know = (Button) findViewById(R.id.btn_know);
    know.setOnClickListener((OnClickListener)this);

}

public void onClick(View v) {
    // TODO Auto-generated method stub
    switch(v.getId()){

    case R.id.btn_alphabet:
        Intent s_alphabet = new Intent(this, Alphabet.class);
        startActivity(s_alphabet);
        break;

    case R.id.btn_shapes:
        Intent s_shapes = new Intent(this, Bshapes.class);
        startActivity(s_shapes);
        break;

    case R.id.btn_know:
        Intent s_know = new Intent(this, Know.class);
        startActivity(s_know);
        break;

    }

} 
```

}

# operating-system - 32 位应用程序在 64 位操作系统上运行得更快还是更慢？

> ID：12224809
> 
> 赞同：16
> 
> 时间：2012-09-01T04:06:57.460
> 
> 标签：operating-system, 32bit-64bit

我主要在 32 位嵌入式系统上工作，使用本机 32 位类型（int、float）通常比 16 位等价物更快。减速来自处理器在对其执行操作之前将任何 16 位数字扩展到 32 位。

现在我已经转向 PC 和 64 位操作系统。我的问题是 - 32 位类型会导致 64 位机器减速吗？

例如，如果我将 MyApp.exe 构建为 32 位应用程序，它会在 64 位操作系统上运行得更慢还是更快？

我了解应用程序的性能涉及许多因素，我故意将这些因素排除在问题之外（IO 速度、更快的内存等）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-01T04:42:38.923

有时 32 位应用程序运行得更快，有时它们运行得更慢。有很多竞争因素会影响性能。一般来说，两个方向的差异都不是很大。

我看不出如何合理地从性能考虑中排除任何因素，因为性能总是发生在所有因素都在起作用的现实世界中。速度不是理论上的，不能孤立地对待。

这是一篇文章，作者做了一些基准测试：

[http://www.osnews.com/story/5768](http://www.osnews.com/story/5768)

他发现 32 位二进制文​​件在他的测试中速度更快。那是在 2004 年初的 SPARC 上。

这是英特尔 2010 年关于迁移到 64 位应用程序的文章：

[http://software.intel.com/en-us/articles/moving-from-32-bit-applications-to-64-bit-applications-en/](http://software.intel.com/en-us/articles/moving-from-32-bit-applications-to-64-bit-applications-en/)

根据这篇文章，64 位二进制文​​件可以为您提供更快的数学运算，因此如果正确优化，数学繁重的代码应该会更快。否则，您的 64 位代码可能会更慢，特别是因为它需要更多内存，这可能会导致访问 RAM 花费更多时间（更频繁的缓存未命中）。

# jquery-mobile - 更新时，Knockout.js observableArray 在 jQuery-mobile 中无法正确呈现

> ID：12224811
> 
> 赞同：0
> 
> 时间：2012-09-01T04:07:30.440
> 
> 标签：jquery-mobile, knockout.js

我正在尝试使用 knockout.js 和 jquery mobile 编写一个简单的 todo 应用程序。当我只使用敲除（在添加项目时动态替换主页中的文本）时，该代码运行良好。但是，将项目添加到 ko.observableArray 后，jquery mobile 将无法正确呈现。

我可以在一瞬间看到代码正确呈现，然后页面刷新并且不再显示任何列表项。

的HTML：

```
<div data-role="page">
    <div data-role="header">
        <h1>Lists</h1>
    </div>

    <div data-role="content">
        <ul data-bind="foreach: lists" data-role="listview" data-inset="true">
            <li data-bind="text: name"></li>
        </ul>

        <form data-bind="submit: addList">
            <input data-bind="value: newListName" placeholder="new list name" />
            <button type="submit">Add New List</button>
        </form>
    </div>

    <div data-role="footer" data-position="fixed">
        <h1>Footer</h1>
    </div>
</div> 
```

Javascript：

```
function List(data) {
    var self = this;
    self.name = ko.observable(data.name);
    self.tasks = ko.observableArray([]);
}

function TaskListViewModel() {
    var self = this;

    self.currentList = ko.observable(new List({ name: "Inbox" }));
    self.newListName = ko.observable('');
    self.lists = ko.observableArray([self.currentList()]);

    self.addList = function() {
        self.currentList(new List({ name: this.newListName() }));
        self.lists.push(self.currentList());
        self.newListName('');
    };
} 
```

更具体地说，我可以看到一个带有“收件箱”的列表项，下面有一个文本字段，然后是一个按钮。当我在字段中输入另一个列表项并单击“添加”时，我可以立即看到正确呈现的所有内容。然后它刷新，我看不到任何列表项。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T14:43:15.093

听起来好像正在提交表单并重新加载页面。在此处尝试解决方法：[jquery mobile and knockout form submit binding](https://stackoverflow.com/questions/10967034/jquery-mobile-and-knockout-form-submit-binding)

# mysql - 连接多个列然后拆分它们 - MySQL

> ID：12224814
> 
> 赞同：0
> 
> 时间：2012-09-01T04:07:42.643
> 
> 标签：mysql, split, concat

这是我需要的一个真正的两步过程。我有一个有 26 列的表，如下所示：

```
ColumnA   ColumnB   ColumnC  ColumnD  ColumnE  ColumnF

winter       0        0      summer   0        Dog

0          spring    fall      0      0        0

0            0        0      summer   car      0 
```

我需要能够将列中的所有单词连接到一个由 | 分隔的列中 但在其他列中省略任何零。第 27 列中的第一行应如下所示**Winter|summer|dog**。然后我需要能够将第 27 列**冬季|夏季|狗**中的结果分为第 28 列冬季、第 29 列夏季、第 20 列狗

结果将如下所示：

```
Column28    Column29    Column30

winter      summer      dog

spring      fall

summer      car 
```

我正在使用的程序不允许我使用通配符，所以我需要将 26 列转储为 3，因为 26 列中的任何一行中最多包含三个单词。我有 750,000 行，搜索将永远进行。

可能有一种更简单的方法，只需将任何列中非 0 的第一个实例移动到第 28 列，将行中非零的第二个实例移动到第 29 列，等等。我在 26 之前还有一堆其他列我在上面发布的列，例如姓名、电话等，您应该注意这些列，因为您不能只在第 27 列中连续说出第一个零。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T04:36:07.910

（我会将其作为答案而不是评论发布，因为我认为它非常重要）

解决这个问题以及今年你必须编写的其他 27 个令人讨厌的查询的唯一可持续解决方案是更好的数据库设计。

您应该作为起点仔细阅读的概念称为“[数据库规范化](http://en.wikipedia.org/wiki/Database_normalization)”，它教您一种在一组规则和模式内对域建模的方法，这些规则和模式为您提供灵活的存储（相对），避免像您的 OP（即只有 10% 有用数据的行，甚至更少的列，可用工具的彻底弯曲以使任何有用的事情发生）。

这些概念可能看起来势不可挡（例如，[让我入门的书有](https://rads.stackoverflow.com/amzn/click/com/0123735688)976 页），但作为原则，它们可以非常简单地演示。为此，我把它留给维基百科作为一个不错的起点。

基本上，我们有一个“标准形式”系统，有点像数据库设计的“进度级别”。第一个（“第一范式”是命名法）单独会为你想用这些数据做什么创造奇迹，并且基本上让你思考这个：**我用这张表建模什么单一的原子？**

我通常会在这里提供一个小例子，但维基百科是如此易于访问，我相信你会很容易地从他们关于[第一范式](http://en.wikipedia.org/wiki/First_normal_form)的文章中开始吸收。

然后，当然，你会对[第二](http://en.wikipedia.org/wiki/Second_normal_form)范式和[第三](http://en.wikipedia.org/wiki/Third_normal_form)范式感兴趣。就市场趋势而言，这就是收益递减的点（即几年后回归更高的形式）。但是，我要重申，如果您只扎实地学会了如何在您的建模域中实现第一个范式，您的生活会好得多:-)

一旦确定了这一点，您将需要快速复习 SQL 的`JOIN`概念，因为这些规则本质上会将您的域分解为原子片段，并且您的许多任务将开始需要在查询中进行简单的连接。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T04:35:49.063

```
SELECT *, SUBSTRING_INDEX(Column27, '|', 1) AS Column28,
          replace(substring(substring_index(Column27, '|', 2), length(substring_index(Column27, '|', 1)) + 1), '|', '') AS Column29,
          replace(substring(substring_index(Column27, '|', 3), length(substring_index(Column27, '|', 2)) + 1), '|', '') AS Column30
FROM (SELECT *, CONCAT_WS('|', NULLIF(ColumnA, 0), NULLIF(ColumnB, 0), ..., NULLIF(ColumnZ, 0)) AS Column27
      FROM MyTable) 
```

# ruby-on-rails - virtualbox + vagrant 和 VMWare fusion 的区别

> ID：12224821
> 
> 赞同：8
> 
> 时间：2012-09-01T04:09:29.207
> 
> 标签：ruby-on-rails, vmware, virtualization, vagrant

我已经运行 VMWare fusion 一段时间了，并使用它来创建我的 ubuntu rails 开发环境和 Web 服务器的新实例。

我正在尝试过渡到使用 virtualbox 和 vagrant。

据我了解，virtualbox 运行虚拟机，vagrant 管理实例。在 VMWare Fusion 中，它同时进行 VM 和实例管理。**这是否意味着将 virtualbox 与 vagrant 一起使用与仅使用 VMWare Fusion 几乎相同？**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-05T04:07:47.360

是的，你加粗的最后一个问题是正确的。Vagrant 是一个很棒的工具，可以将 VM 打包并定义为配置文件。VirtualBox 和部署者（木偶、厨师）一样完成繁重的工作。正如作者所说，他站在巨人的肩膀上。如果您厌倦了将环境擦拭干净，或者您想要一个真正原始的登台环境，我想离开融合。将 fusion 用于永久框或运行 X11 GUI。Vagrant 也可以在你构建好之后重新打包你的虚拟机。所以你可以使用某人的基础镜像并重新打包它。VMware 也可以做到这一点，但通过配置文件 afaik 并不容易。

Vagrant 似乎没有停止 capify，但它与 rails/ruby 无关。我的意思是，我只会将它用于分期和单独开发或开发团队。也许不是产品供应。

VirtualBox 直接与 VMWare 进行比较。一旦 vagrant 达到 1.0，它计划将支持 vmware fusion，然后您将可以选择 vm 平台。

还可以查看与 vagrant 相关的图书馆员厨师。一套非常酷的厨师预制食谱。

# javascript - 在新行（html）中动态添加更多文本字段

> ID：12224823
> 
> 赞同：2
> 
> 时间：2012-09-01T04:10:14.600
> 
> 标签：javascript, html, dom

我使用了来自[http://viralpatel.net/blogs/dynamic-add-textbox-input-button-radio-element-html-javascript/](http://viralpatel.net/blogs/dynamic-add-textbox-input-button-radio-element-html-javascript/) html-javascript/ 的代码。我的代码是这样的：

```
<HTML>
<HEAD>
<TITLE>Dynamically add Textbox, Radio, Button in html Form using JavaScript</TITLE>
<SCRIPT language="javascript">
function add() {

    for (i=1; i<=5; i++)
      {
        //Create an input type dynamically.
        var element = document.createElement("input");

        //Assign different attributes to the element.
        element.setAttribute("type", i);
        element.setAttribute("name", i);
        element.setAttribute("value", i);

        var foo = document.getElementById("fooBar");

        //Append the element in page (in span).
        foo.appendChild(element);
      }

}
</SCRIPT>
</HEAD>
<BODY>
<FORM>
<H2>Dynamically add element in form.</H2>
Select the element and hit Add to add it in form.
<BR/>
<INPUT type="button" value="Add" onclick="add()"/>

<span id="fooBar">&nbsp;</span>

</FORM>
</BODY>
</HTML> 
```

该代码有效。但不是水平添加它，我希望每个新文本字段都添加到一个新行中。我尝试在循环函数中使用`</script><br/><script>`、`<html><br/></html>`、`document.write("\n")`和`document.write("\r\n")`，但它不像我想要的那样工作。我应该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T04:13:45.520

为什么不这样做呢？

```
var br = document.createElement("br");
foo.appendChild(br); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T04:13:34.817

您可以更改输入的显示样式。

```
function add() {

    for (i=1; i<=5; i++)
      {
        //Create an input type dynamically.
        var element = document.createElement("input");

        //Assign different attributes to the element.
        element.setAttribute("type", i);
        element.setAttribute("name", i);
        element.setAttribute("value", i);
        element.style.display = "block";

        var foo = document.getElementById("fooBar");

        //Append the element in page (in span).
        foo.appendChild(element);
      }
} 
```

祝你好运！我建议你开始使用 jQuery 来处理你的 javascript 任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T04:14:19.307

您可以尝试在输入元素之后添加一个新的 br 元素。

```
 for (i=1; i<=5; i++)
  {
    //Create an input type dynamically.
    var element = document.createElement("input");

    //Assign different attributes to the element.
    element.setAttribute("type", i);
    element.setAttribute("name", i);
    element.setAttribute("value", i);

    var brElement = document.createElement("br");

    var foo = document.getElementById("fooBar");

    //Append the element in page (in span).
    foo.appendChild(element);
    foo.appendChild(brElement );
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T04:16:09.450

您可以简单地将其添加到您的 CSS

```
input{display:block;} 
```

# jquery - jQuery 冲突 a.fn.cssOriginal=a.fn.css 和 a[c].css("box-sizing")

> ID：12224826
> 
> 赞同：0
> 
> 时间：2012-09-01T04:10:29.657
> 
> 标签：jquery

我有两个相互冲突的 jQuery 文件。我收到了错误：

```
Uncaught TypeError: Object 0px has no method 'css' 
```

经过多次调整和修补，我想出了如何解决这个问题。但是，我认为这不是一个适当的解决方案，我想获得有关替代适当解决方案的反馈。

这些文件是来自 1) 模板和 2) 幻灯片的 jQuery 插件文件；调整屏幕大小时调整容器和其他元素的大小。

问题的根源在于幻灯片 jquery 插件声明：

a.fn.css原始=a.fn.css;

每当调用 a[c].css("box-sizing") 或类似内容时，我都可以将错误读取到模板的 jquery 文件的行中。

**我通过在整个模板的 jquery 函数文件**中将 .css 替换为 .cssOriginal 来解决这个问题。**但我感到不安。首先，幻灯片只会在某些页面中使用。**

 **如何防止模板的 .css 调用受到幻灯片插件文件的影响？

幻灯片中的所有 jQuery 文件都包含一个 jQuery.noConflict(); 在最后。

从模板来看，这部分代码是冲突的根源：

```
e.matchHeight = function (a, c, f) {
    var j = e(window),
        h = a && b[a];

    if (!h) {
        var h = b[a] = {
            id: a,
            elements: c,
            deepest: f,
            match: function () {
                var a = this.revert(),
                    b = 0;

                e(this.elements).each(function () {
                    b = Math.max(b, e(this).outerHeight())
                }).each(function (c) {
                    var d = "outerHeight";
                    "border-box" == a[c].css("box-sizing") && (d = "height");

                    var g = e(this),
                        c = a[c],
                        d = c.height() + (b - g[d]());

                    c.css("min-height", d + "px")
                })
            },
            revert: function () {
                var a = [],
                    b = this.deepest;

                e(this.elements).each(function () {
                    var c = b ? e(this).find(b + ":first") : e(this);
                    a.push(c.css("min-height", ""))
                });

                return a

            },
            remove: function () {
                j.unbind("resize orientationchange", k);
                this.revert();
                delete b[this.id]
            }
        }, k = function () {
            h.match()
        };

        j.bind("resize orientationchange", k)
    }

    return h
}; 
```

从幻灯片来看，这部分代码是问题的根源：

```
a.fn.cssOriginal=a.fn.css;

    a.fn.css=function(c,d){

        var e=this,f={};
        if(typeof c=="string")if(d)f[a.camelCase(c)]=d;
        else return e.cssOriginal(c);
        else f=c;
        f=a.cssPropertySupporter(f);
        var g=a("body").data("cssPerspective");
        if(f.transform)a.each(b,function(a,b){var c=b+(b?"T":"t")+"ransform";
        var d=f.transform;
        f[c]=(g&&!/perspective/gi.test(d)?"perspective("+g+") ":"")+d});
        e.cssOriginal(f); 
        return e

    } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T04:22:47.600

我认为您首先在页面中包含幻灯片 jquery-plugin 和模板 jquery-plugin。如果是这种情况，您可以在两个插件之间包含一个衬里 java-script 吗？一个班轮脚本可能包含如下内容：

```
a.fn.css=a.fn.cssOriginal; 
```

我还没有尝试过，但请尝试一下，因为这应该可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T04:27:14.183

这些脚本是否可以一起工作？

据我所知，`var e`两者都设置了，所以它可能会在它们之间造成问题。

我建议研究一个不同的幻灯片插件。**

# java - Java 套接字，简单的多人游戏，发送数据

> ID：12224827
> 
> 赞同：1
> 
> 时间：2012-09-01T04:10:42.523
> 
> 标签：java, sockets, multiplayer

所以我正在开发一款非常简单的多人 Java 游戏，只需点击屏幕，您的玩家就会直线移动到该位置，并向所有其他连接的玩家显示您的玩家移动，这里是三个类：

机器人：

```
import java.applet.Applet;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.Socket;
import java.net.UnknownHostException;
import java.util.ArrayList;

public class Bots extends Applet implements MouseListener, Runnable{

Thread gameLoop;
ArrayList<Player> players = new ArrayList<Player>();

//Socket stuff for multiplayer client
final static String SERVER_ADDR = "localhost";
final static int SERVER_PORT = 1025;
static Socket socket;
static volatile BufferedReader br;
static PrintWriter pw;

//Double buffer stuff
Graphics g; 
Image offscreen;
Dimension dim;

@Override
public void run() {
    //Starts the main game loop
    Thread t = Thread.currentThread();
    //Checks to see if the thread is alive
    while (t == gameLoop){
        try{
        Thread.sleep(1000/60);
        //Repaints the screen
        players.get(0).move();
        repaint();

        if (socket != null){
            sendMove();
        }
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
}

public void start(){
    gameLoop = new Thread(this);
    gameLoop.start();
}

public void stop(){
    gameLoop = null;
}

public void init(){
    this.setSize(640,480);
    dim = this.getSize();

    addMouseListener(this);

    //More double buffer stuff
    offscreen = createImage(this.getSize().width,this.getSize().height);
    g = offscreen.getGraphics();

    //Adds the initial player
    players.add(new Player(320,240,8,8,"Jeremy"));
    multiplayer();
}

public void paint(Graphics bufferGraphics){
    g = offscreen.getGraphics(); 
    g.clearRect(0,0,dim.width,dim.height);

    g.setColor(Color.BLACK);
    for (Player player: players){
        g.fillOval(player.x, player.y, player.width, player.height);
    }

    bufferGraphics.drawImage(offscreen,0,0,this);
}

public void multiplayer(){

    try {
        socket = new Socket(SERVER_ADDR, SERVER_PORT);
        InputStreamReader isr;
        isr = new InputStreamReader(socket.getInputStream());
        br = new BufferedReader(isr);
        pw = new PrintWriter(socket.getOutputStream(), true);
    } catch (UnknownHostException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    multiplayerThread();

}

public void sendMove(){
    //pw.println(players.get(0).name+":X"+players.get(0).x+":Y"+players.get(0).y);
}

public void multiplayerThread(){
    new Thread(){
        public void run() { 
            String line;
             try {
                while ((line = br.readLine()) != null) {
                    boolean newClient = true;
                    for (Player player: players){
                        if (line.startsWith(player.name)){
                            if (line.startsWith(players.get(0).name)){
                                //Do nothing
                                newClient = false;
                            } else {
                                String[] tempLine = line.split(":");
                                player.x = Integer.parseInt(tempLine[1].substring(1));
                                player.y = Integer.parseInt(tempLine[2].substring(1));
                                newClient = false;
                            }
                        }
                        System.out.println(line);
                    }
                    if (newClient && !line.contains("Welcome")){
                        String[] tempLine = line.split(":");
                        players.add(new Player (Integer.parseInt(tempLine[1].substring(1)),Integer.parseInt(tempLine[2].substring(1)),8,8,tempLine[0].substring(0)));
                    }

                }
             }
             catch (IOException ioe) {
             }
        }
    }.start();
}
@Override
public void mouseClicked(MouseEvent me) {
    // TODO Auto-generated method stub

}

@Override
public void mouseEntered(MouseEvent arg0) {
    // TODO Auto-generated method stub

}

@Override
public void mouseExited(MouseEvent arg0) {
    // TODO Auto-generated method stub

}

@Override
public void mousePressed(MouseEvent me) {
    // TODO Auto-generated method stub
    players.get(0).x2 = me.getX();
    players.get(0).y2 = me.getY();
    players.get(0).calculateMove();
}

@Override
public void mouseReleased(MouseEvent arg0) {
    // TODO Auto-generated method stub

}

public void update(Graphics g) 
{ 
     paint(g); 
}
} 
```

球员等级：

```
 import java.awt.Rectangle;

public class Player {

    public String name;
    public int x;
    public int y;
    public int width;
    public int height;

    public int x2;
    public int y2;
    public int longest;
    public int numerator;
    public int shortest;
    public int dx1,dy1,dx2,dy2;
    public boolean moving;

    public Player(int x, int y, int width, int height, String name) {
        this.x = x;
        this.y = y;
        this.x2 = x;
        this.y2 =y;
        this.width = width;
        this.height = height;
        this.name = name;
    }

    public Rectangle getBounds(){
        Rectangle r;
        r = new Rectangle(x - width/2, y-height/2,width,height);
        return r;
    }

    public void move(){
        if (this.x2 != this.x && this.y2 != this.y){
            this.numerator += this.shortest ;
            if (!(this.numerator<this.longest)) {
                this.numerator -= this.longest ;
                this.x += this.dx1 ;
                this.y += this.dy1 ;
            } else {
                this.x += this.dx2 ;
                this.y += this.dy2 ;
            }
            this.moving = false;

        }
    }

    public void calculateMove(){
         int w = x2 - x ;
            int h = y2 - y ;
            int dx1 = 0, dy1 = 0, dx2 = 0, dy2 = 0 ;
            if (w<0) dx1 = -1 ; else if (w>0) dx1 = 1 ;
            if (h<0) dy1 = -1 ; else if (h>0) dy1 = 1 ;
            if (w<0) dx2 = -1 ; else if (w>0) dx2 = 1 ;
            int longest = Math.abs(w) ;
            int shortest = Math.abs(h) ;
            if (!(longest>shortest)) {
                longest = Math.abs(h) ;
                shortest = Math.abs(w) ;
                if (h<0) dy2 = -1 ; else if (h>0) dy2 = 1 ;
                dx2 = 0 ;            
            }
            this.shortest = shortest;
            this.longest = longest;
            this.numerator = longest >> 1 ;
            this.dx1 = dx1;
            this.dy1 = dy1;
            this.dx2 = dx2;
            this.dy2 = dy2;
            this.moving = true;
            }

} 
```

最后是我的 BotsServer 类：

```
 import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.IOException;
import java.io.PrintWriter;

import java.net.ServerSocket;
import java.net.Socket;

import java.util.ArrayList;
import java.util.List;

class BotsServer
{
   private final static int PORT_NO = 1025;
   private ServerSocket listener;
   private List<Connection> clients;
   BotsServer() throws IOException
   {
      listener = new ServerSocket(PORT_NO);
      clients = new ArrayList<Connection>();
      System.out.println("listening on port "+PORT_NO);
   }
   void runServer()
   {
      try
      {
         while (true)
         {
            Socket socket = listener.accept();
            System.out.println("accepted connection");
            Connection con = new Connection(socket);
            synchronized(clients)
            {
               clients.add(con);
               con.start();
               con.send("Welcome!");
            }
         }
      }
      catch (IOException ioe)
      {
         System.err.println("I/O error: "+ioe.getMessage());
         return;
      }
   }
   private class Connection extends Thread
   {
      private volatile BufferedReader br;
      private volatile PrintWriter pw;
      private String clientName;
      Connection(Socket s) throws IOException
      {
         br = new BufferedReader(new InputStreamReader(s.getInputStream()));
         pw = new PrintWriter(s.getOutputStream(), true);
      }
      @Override
      public void run()
      {
         System.out.println("test");
         String line;
         try
         {
            while ((line = br.readLine()) != null){
                System.out.println(line);
               send(line);
            }
         }
         catch (IOException ioe)
         {
            System.err.println("I/O error: "+ioe.getMessage());
         }
         finally
         {
            synchronized(clients)
            {
               clients.remove(this);
            }
         }

      }

      private void send(String message)
      {
         pw.println(message);
      }

   }
   public static void main(String[] args)
   {
      try
      {
         System.out.println("ChatServer starting");
         new BotsServer().runServer();
      }
      catch (IOException ioe)
      {
         System.err.println("unable to create server socket");
      }
   }
} 
```

我认为问题出在 BotsServer 类中，我提出：

```
System.out.println("test"); 
```

在运行中，但只有在客户端第一次连接时才会被调用，它应该循环吗？任何帮助都很棒！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T04:23:24.263

`BotServer.Connection`是一个`Thread`。a的`run`方法`Thread`只被调用一次。您的测试打印在内部，但不在任何循环内部，因此每个您`run()`只会打印一次。所以你看到的行为对我来说很有意义。为什么你认为它应该循环？`BotServer.Connection``start()`

# cocoa - 视图选择更改时，自定义 NSViewController 表示对象不会更新

> ID：12224831
> 
> 赞同：0
> 
> 时间：2012-09-01T04:12:28.287
> 
> 标签：cocoa, binding, nsoutlineview, nstreecontroller

我有一个自定义的 NSViewController，它也是一个 NSOutlineViewDataSource。我还有一个窗口，其中 NSOutlineView 绑定到我的视图控制器的实例作为数据源，并且 NSOutlineView 绑定到视图：自定义视图控制器的属性。

控制器很好地填充了大纲视图。但是，视图中的选择不会自动更新控制器的代表对象属性。唯一似乎触发了表示对象变化的事情是当我直接调用 setRepresentedObject: 时......这有点违背了目的。

知道为什么会这样吗？代表*对象*应该自动更新，对吗？提前致谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T07:45:33.843

如果我理解你的问题，那么你就不明白这`representedObject`是为了什么。`representedObject`是代表视图控制器正在显示的*所有*数据的模型对象。它不是显示内容集合的视图的当前选择。您的`representedObject`自定义顶级视图控制器将是一个`NSArray`或其他集合类，其中包含您在视图控制器中显示的数据集。如果正确使用模式，更改`representedObject`自定义顶级视图控制器的效果应该是换出一个全新的数据集。

通常，表格类型视图中各个元素的视图控制器都有自己的`representedObject`，并且该对象不会更改。例如，如果您`NSCollectionView`在视图中使用 each 元素`NSCollectionViewItem`由`NSViewController`. `representedObject`for each`NSCollectionViewItem`告诉它要在其小视图中呈现哪些数据。

`NSOutlineView`其超类`NSTableView`的不同之处在于它们的单元通常`NSCells`不是完整的`NSViews`，除非您选择在 Mac OS X 10.7 或更高版本中以这种方式使用它们。即使在这种情况下，您通常也没有一个`NSViewController`子类来管理每个单元格。因此，视图控制器`representedObject`模式不会在用户选择的单个元素的级别上使用。如果您想要跟踪`NSOutlineView`'s 的选择，有很多`NSTableView`方法可以让您做到这一点。

# haskell - Haskell parMap 和并行性

> ID：12224842
> 
> 赞同：9
> 
> 时间：2012-09-01T04:15:27.313
> 
> 标签：haskell, parallel-processing, conways-game-of-life

我有一个康威生命游戏的实现。如果可能的话，我想通过使用并行性来加速它。

```
life :: [(Int, Int)] -> [(Int, Int)]
life cells = map snd . filter rules . freq $ concatMap neighbours cells
    where rules (n, c) = n == 3 || (n == 2 && c `elem` cells)
          freq = map (length &&& head) . group . sort

parLife :: [(Int, Int)] -> [(Int, Int)]
parLife cells = parMap rseq snd . filter rules . freq . concat $ parMap rseq neighbours cells
    where rules (n, c) = n == 3 || (n == 2 && c `elem` cells)
          freq = map (length &&& head) . group . sort

neigbours :: (Int, Int) -> [(Int, Int)]
neighbours (x, y) = [(x + dx, y + dy) | dx <- [-1..1], dy <- [-1..1], dx /= 0 || dy /= 0] 
```

在分析中，邻居占了所花费时间的 6.3%，所以虽然很小，但我预计通过并行映射它会显着加快速度。

我用一个简单的功能进行了测试

```
main = print $ last $ take 200 $ iterate life fPent
    where fPent = [(1, 2), (2, 2), (2, 1), (2, 3), (3, 3)] 
```

并将并行版本编译为

```
ghc --make -O2 -threaded life.hs 
```

并将其作为

```
./life +RTS -N3 
```

事实证明，并行版本速度较慢。我在这里错误地使用了 parMap 吗？这甚至是可以使用并行性的情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T13:57:09.963

我不认为你的测量是正确的。你`parLife`的确实比`life`. 事实上，在我的机器（Phenom X4，4 核）上，前者只需要后者大约 92.5% 的时间，考虑到你说你期望只有 6% 的改进，这是相当不错的。

您的基准测试设置是什么？你试过使用[`criterion`](https://github.com/bos/criterion)吗？这是我所做的：

```
import Criterion
import Criterion.Main

-- your code, minus main

runGame f n = last $ take n $ iterate f fPent
    where fPent = [(1, 2), (2, 2), (2, 1), (2, 3), (3, 3)]

main = defaultMain
    [ bench "No parallelism 200" $ whnf (runGame life)    200
    , bench "Parallelism 200"    $ whnf (runGame parLife) 200 ] 
```

编译`ghc --make -O2 -o bench`并运行`./bench -o bencht.hmtl +RTS -N3`.

[这是报告的详细结果](http://imgur.com/TvVcj)。

# wcf - WCF Web 服务测试中的服务逻辑测试和客户端逻辑测试有什么好处？

> ID：12224850
> 
> 赞同：0
> 
> 时间：2012-09-01T04:18:20.220
> 
> 标签：wcf, testing, nunit, automated-tests

我为企业项目开发 WCF Web 服务。我在服务逻辑业务层使用 NUnit 测试在服务器端进行测试，在客户端我使用 WCFTestClient 调用 Web 服务方法。我必须为我的项目做自动化测试，但我真的不知道哪种方法更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T04:28:36.927

我建议你们两个。从服务的角度来看，服务逻辑测试很重要，它必须按预期工作，这就是您测试的内容。

现在，从服务客户端的角度（顾名思义）来看，客户端测试也很重要。我的意思是，客户端测试可以帮助您设计清晰可用的服务 API。当您测试您的服务用户将做什么时，您会从另一个角度了解情况。

# javascript - jQuery change() 和 bind("change") 不起作用

> ID：12224852
> 
> 赞同：2
> 
> 时间：2012-09-01T04:19:21.563
> 
> 标签：javascript, jquery, html, ajax, dom

这个问题已经被问过了，但我坚持最基本的水平。除了选择标记并试图通过 jquery 捕获更改事件外，我没有在我的 html 中添加任何内容。这是我的代码：

```
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script>
  $('#target').bind("change", function{
    alert('Changed');
  });
</script>
</head>
<body>
<form>
  <select id="target">
    <option value="option1" selected="selected">Option 1</option>
    <option value="option2">Option 2</option>
  </select>
</form>
</body> 
```

甚至 change() 函数也不起作用。

```
<script>
  $('#target').change(function() {
    alert('Changed');
  });
</script> 
```

请帮我找出我做错了什么。在 Stackoverflow 上的一个类似问题中，我得到了[http://jsfiddle.net/78x9Q/4/](http://jsfiddle.net/78x9Q/4/)作为答案。但即使是该代码的精确复制粘贴也不适合我。

PS： jQuery 正在加载，因为我测试它并发现使用这个：

```
<script>
$(function() {
  alert('Changed');
});
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T04:22:22.623

您的代码不起作用，因为您在 dom 尚未构建时尝试使用它。用这个：

```
$(document).ready(function () {
  // your code
}); 
```

然后，您的代码将在 dom 已构建时运行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-01T04:21:54.150

这：

```
<script>
  $('#target').change(function() {
    alert('Changed');
  });
</script> 
```

应该是这样的：

```
<script>
  $(function () {
    $('#target').change(function() {
      alert('Changed');
    });
  });
</script> 
```

这意味着您在文档准备好之前执行绑定。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-01T04:23:40.343

像这样使用它

```
$(document).ready(function () {
   $('#target').change(function() {
     alert('Changed');
   });
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-01T04:22:39.880

您需要将 jquery 代码包装在文档就绪事件中

# facebook-graph-api - 地点的 Facebook Graph API 查询限制？

> ID：12224853
> 
> 赞同：2
> 
> 时间：2012-09-01T04:19:29.720
> 
> 标签：facebook-graph-api

谁能向我解释以下场景中发生了什么？

我输入以下网址：

[https://graph.facebook.com/search?q=United-States&type=place&access_token=MY_ACCESS_TOKEN&limit=1000](https://graph.facebook.com/search?q=United-States&type=place&access_token=MY_ACCESS_TOKEN&limit=1000)

Facebook 只返回 411 个位置，然后当我执行“下一个”分页时，没有返回任何位置。

似乎有一个限制或某些东西阻止我看到更多结果。这在第一次只显示 411 和然后分页也不起作用中都显示出来。有没有人遇到过这个和/或有解决方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:46:36.383

在我看来，当我运行这个查询时，我只看到我或朋友喜欢那个地方的地方。

根据我的经验，Facebook 的位置 API 充其量是错误的。

如果您要查找所有地点，最好使用第三方服务（我一直在查看[Factual](http://developer.factual.com/)）来查找此信息，然后查询 Facebook API 以获取您需要的有关该信息的数据。

# mysql - 关于 Web 的 MySQL 设计

> ID：12224856
> 
> 赞同：0
> 
> 时间：2012-09-01T04:20:02.557
> 
> 标签：mysql, database, database-design

我正在解决课堂上的一个问题，以设计一个存储与一个人相关联的事件列表的 web 的 mySQL 表示。因此，对于这个表/表，它将有 2 列，其中一列是人名，另一列是事件。但是，一个人通常会有 30 到 1000 个事件，因此我们计划为整个 6000 名学生的本科班使用的这张表将有数百万个条目。有没有更好的方法将它存储在 mySQL 中，占用**更少的空间**，但仍然能够检索单个事件和参加它的人员列表，就像它是一个两列的表一样容易？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T04:48:53.900

是的，有一种称为*many-to-many*的技术，基本上将您的一个表分成三个，当您考虑到确实有三个实体正在建模时（作为一个良好的完整性检查），这一点至关重要

1.  人
2.  事件
3.  一个人与一个事件的关联

您将其建模为三个表，前两个表基本上各有两列：一个具有唯一索引（称为“主键”），第二个是语义名称（人名、事件名称）。请注意，您也可以在其中添加任意数量的列，而只需增加一个存储空间（您的第一步很可能是在事件表中添加一个日期列）。

第三个表很有趣，它只包含 2 列，每列都是数字，这两个列都是对其他表的引用（每一行很简单：(person_id, event_id)）。我们称这些“外键”。

这种结构意味着几件事：

1.  无论某人参加了多少活动，该人只代表一次。
2.  与活动相同，无论有多少参加者
3.  出席是一个“一流”的实体，并且可以增长到包括它自己的属性（即“角色”）

这种结构之所以称为多对多，是因为每个人可能参加许多活动，而每个活动可能有许多参加者。

该设计的典型特征是没有重复单个领域知识，只有必要时重复“键”以模拟真实世界的领域。（即在您的第一个示例中，考虑名称更改将需要未知数量的更新，并可能导致数据异常，避免这种情况是[数据库规范化](http://en.wikipedia.org/wiki/Database_normalization)的主要关注点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T04:44:03.390

不要担心“空间”。这不是 1970 年代，我们不会用完穿孔卡片上的列来存储数据。您应该关心用正确的、最*规范*的数据结构表达您的需求。使用适当的索引应该没有问题，而不是这样的数据量。

请记住，索引需要在您将包含在子句中的任何内容上定义，有时您可能需要为使用和`WHERE`获取的大型列表添加额外的索引。`ORDER BY``LIMIT`

尽可能或实际使用整数标识符而不是字符串。这些存储为少量字节，通常为 4，而可变长度字符串通常至少是字符串的长度（以字节为单位加 1）。

一个适当规范化的数据库无论如何都会使用数字标识符，所以如果事情不是一个大问题，这种情况。只有当您遇到无法使用其他方法轻松解决的合法性能问题时，您才会反对这一点，或者故意对数据进行非规范化。

与往常一样，通过生成大量虚拟数据来测试您的架构并查看其执行情况。由于您事先对需求有一个很好的了解，请在这些级别上进行一些测试，然后，为了安全起见，尝试 2 倍、5 倍和 10 倍的数据，看看您的设计有多大的灵活性。只要您知道您将体验到什么样的规模，就有性能限制是可以的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T04:23:35.400

mySQL 关系数据库是专门为处理此类问题而设计的。处理数百万个条目不是问题。复杂的查询可能需要几秒钟，但会执行得非常好。

最好的设计是每行存储 1 个事件。你的方式听起来是最好的方式。祝你好运。

# android - 如何以编程方式将 HTML5 文件添加到 Android？

> ID：12224860
> 
> 赞同：1
> 
> 时间：2012-09-01T04:21:26.567
> 
> 标签：android, html

我用 HTML5 开发了一个游戏。它包含 JavaScript 和 HTML 文件。现在我想将它们添加到我的 Android 应用程序中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-01T04:57:28.167

您需要添加`Webview`以`HTML5` 加载要加载的文件，这可以像这样完成

```
 public class HelloWebView extends Activity { 

     WebView webview;

     public void onCreate(Bundle savedInstanceState) { 
     super.onCreate(savedInstanceState); 
     setContentView(R.layout.main); 

     webview = (WebView) findViewById(R.id.webview); 
     webview.getSettings().setJavaScriptEnabled(true); 
     webview.setWebViewClient(new HelloWebViewClient()); 
     webview.loadUrl("file:///android_asset/test.html"); 
     WebSettings settings = webview.getSettings(); 
     settings.setJavaScriptEnabled(true); 
     settings.setDatabaseEnabled(true); 
     String databasePath = this.getApplicationContext().getDir("database",  Context.MODE_PRIVATE).getPath(); 
     settings.setDatabasePath(databasePath);
     webview.setWebChromeClient(new WebChromeClient() { 
     public void onExceededDatabaseQuota(String url, String databaseIdentifier, long currentQuota, long estimatedSize, long totalUsedQuota, WebStorage.QuotaUpdater quotaUpdater) { 
            quotaUpdater.updateQuota(5 * 1024 * 1024); 
        } 
    }); 
    } 
```

并将您的`HTML5`文件放在资产中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T05:02:40.833

**Android 开发者网站**应该是首先想到的。检查[Web 视图](http://developer.android.com/reference/android/webkit/WebView.html)页面。

对于教程，您可以查看： [http ://www.mkyong.com/android/android-webview-example/](http://www.mkyong.com/android/android-webview-example/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T04:24:01.740

您可以在您的 android 设备中使用 webview 来加载托管您的 html5 游戏的页面。

# iphone - 更新博客文章问题的 TableView

> ID：12224866
> 
> 赞同：0
> 
> 时间：2012-09-01T04:22:24.297
> 
> 标签：iphone, ios, xcode, uitableview, refresh

我正在尝试获取一个博客应用程序来刷新文章，并添加自上次发布以来可能已经编写的任何新文章。

TableView 使用数组 _allEntries。有人告诉我，当用户单击刷新按钮时，我应该清除数组，清除后，运行原始启动代码来解析 rss 并重新填充表格视图。我正在这样做：

```
[_allEntries removeAllObjects];
[self refresh]; 
```

但是，当我这样做时，它会因错误而崩溃：

```
*** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 4 beyond bounds for empty array' 
```

关于我做错了什么的任何想法？

编辑：这是我的 viewDidLoad 和刷新代码，以及更新代码。

```
- (void)viewDidLoad { [super viewDidLoad]; 
self.allEntries = [NSMutableArray array]; 
self.queue = [[[NSOperationQueue alloc] init] autorelease]; 
self.feeds = [NSArray arrayWithObjects:@"feedurlhere", nil]; 
[self refresh]; 
} 
- (void)refresh {

for (NSString *feed in _feeds) {
    NSURL *url = [NSURL URLWithString:feed];
    ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
    [request setDelegate:self];
    [_queue addOperation:request];
}

}

-(void)updatearticle {
[_allEntries removeAllObjects];
[self refresh];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T05:06:20.010

它在您第一次加载时起作用，因为在您调用刷新之前，提要已在您的 viewDidLoad 方法中填充。当您删除所有对象然后调用刷新时，数组中没有任何内容，因此出现越界错误。您应该将所有代码（[self refresh] 除外）移出 viewDidLoad 并进入 refresh 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T05:05:46.767

如果`_allEntries`用作表格视图的数据源，则必须调用`[self.tableView reloadData]`after `[_allEntries removeAllObjects]`。

# jquery - 如何使用 jQuery 将 textchange 值传递给控制器

> ID：12224881
> 
> 赞同：0
> 
> 时间：2012-09-01T04:25:26.960
> 
> 标签：jquery

我的视图页面中有多行。每一行都有一个文本框。当其中一个文本字段中的值发生更改时，我需要将同一行中的前一个单元格和新值都传递给控制器​​，我该怎么做？

```
$(document).ready(function () {
  $("#Quantity").keyup(function () {

    var url = '@Url.Content("~/")' + "Show/Movie";
    var qtity = '#Timing';

    $.getJSON(url, {
      quantity: $(qtity).val()
    }, function (data) {
      $(".TotalPrice").val(data);
    });

  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T06:28:32.820

您可以将当前值存储为`data`元素：

```
$(document).ready(function () {
  $("#Quantity").keyup(function () {
    var url = '@Url.Content("~/")' + "Show/Movie";
    var qtity = $('#Timing');
    quantity={};
    quantity.current=qtity.val();
    quantity.prev = qtity.data('qty') || ""; //get data of the prev state
    qtity.data('qty',qtity.val()); // set data for next change

    $.getJSON(url, quantity , function (data){ $(".TotalPrice").val(data); } );

  });
}); 
```

# angularjs - Angular.JS：我应该如何组织一个同时使用资源和范围的服务？

> ID：12224883
> 
> 赞同：2
> 
> 时间：2012-09-01T04:25:48.677
> 
> 标签：angularjs

好的，这是交易。我有一个同时处理`$resource`和的服务`$scope`，而且我对 Angular.JS 不够熟悉，无法相信自己能够正确组织它。该服务可以将资源与保持与后端的活动连接的 WebSocket 相关联。每当后端通知服务对给定资源的更改时，资源的属性就会更改以匹配，因此网页会使用新值实时自动更新。

这种 Websockety 的优点被称为“Frisch”，我目前组织它的方式是：

该类`Frisch`是传统的并且完全独立于 Angular.JS 模块系统。它有一个`angularize`设置 Angular.JS 资源绑定的方法：

```
var Frisch = function(url) {
  ... create a websocket ...

  this.angularize = function(scope, record) {
    this.websocketCallback = function(attributes) {
      ... update `record` with the new values ...
      scope.$apply(); scope.$digest();
    }
  };
}; 
```

同时，我的控制器看起来像这样：

```
var MyController = function(MyModel, $scope) {
  $scope.myModel = MyModel.get(... stuff ...);
  new Frisch('/some/websocket/url').angularize($scope, $scope.myModel);
};
MyController.$inject = ['MyModel', '$scope']; 
```

所以这是我的第一个 Angular.JS 项目，我觉得事情肯定可以组织得更好。具体来说，感觉`$scope`和资源都必须传递给`angularize`.

我猜想有更多 Angular-y 的方式来做这件事，比如服务或提供者之类的。也许某种方式将 Frisch-ness “混入”到模型工厂中（在这种情况下，`MyModel`）。但我无法完全理解如何做到这一点......

# java - SpringMVC 验证问题

> ID：12224884
> 
> 赞同：1
> 
> 时间：2012-09-01T04:26:13.900
> 
> 标签：java, spring, spring-mvc, validation

我在控制器类中遇到了一些问题。我有一个登录页面，第一次调用控制器时使用带有 GET 请求注释的方法。当表单发布时，它将使用带有 POST 请求注释的方法。

只有当表单发布时，我才想执行验证。所以验证检查放在 POST 方法（@Valid）中。我有一个@InitBinder 函数，但是当我发布表单时它不会被执行，因此验证类不会返回错误消息，'result.hasErrors()' 方法也不会被设置为 false。如果我将 @Valid 放在 GET 上，我会得到验证，这意味着 result.hasErrors() 被设置为 false。

我不确定@InitBinder 函数何时执行，或者如何只允许在 POST 的请求下执行。目前，当页面是 GET 时执行的唯一消息是“欢迎它是一个 get”，这就是我想要的，但是 POST 我得到了“错误！！！这是一个帖子'并且验证不会被执行。下面是一些代码：

控制器类中的代码

```
@InitBinder("login")
protected void initBinder(WebDataBinder binder){
    binder.setValidator(new LoginValidation());

} 
```

* * *

除了显示页面之外，我在 GET 中没有做任何事情

```
@RequestMapping(value="login.htm", method=RequestMethod.GET)
 public ModelAndView onSubmit(HttpServletRequest request,HttpServletResponse response,Model model, @ModelAttribute("login") Login login,BindingResult result )
            throws ServletException {

            return new ModelAndView("login","errorMsg", "Welcome it was a get");             

} 
```

* * *

```
@RequestMapping(value="login.htm", method=RequestMethod.POST)
public ModelAndView handleRequest(HttpServletRequest request,
        HttpServletResponse response, @Valid @ModelAttribute Login login, BindingResult result, ModelMap m) throws Exception {

         if(result.hasErrors()){

             return new ModelAndView("login", "errorMsg", "Errors was detected");

        }else{

            if (authenticationManager.Authenticate(login) == true){

                return new ModelAndView("main","welcomeMessage", message);
            }           

            return new ModelAndView("login","errorMsg", "Error!!! It was a post");

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T05:17:28.177

There were white spaces in my parameters. Using binder.registerCustomEditor(String.class, new StringTrimmerEditor(true)) in the @InitBinder("login") solved the problem

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T04:19:01.450

第一次使用 GET 请求页面时，验证有效，这主要是因为在请求页面时字段为空白，并且每次请求页面时，@InitBinder("login") 都会在页面上发生任何事情之前执行。

即使视图中的字段留空，验证在页面为 POST 时也没有失败的原因主要是由于空格，因为验证在页面 GET 请求上运行，并在数据期间将对象返回到带有空格的视图捆绑。

为了解决这个问题，我计算了验证逻辑中字段的长度并将其记录到服务器。当调查日志时，我发现这些字段不是 NULLS，因为验证逻辑主要检查 NULLS。

空格的解决方案：在@Controller @InitBinder 函数中包括：

```
binder.registerCustomEditor(String.class, new StringTrimmerEditor(true)); 
```

这将修剪掉空白

# php - 如何使用 xampp lite 安装 php_sdo

> ID：12224886
> 
> 赞同：0
> 
> 时间：2012-09-01T04:26:28.737
> 
> 标签：php, xml, apache, dll

实际上我`SDO_DAS_XML::create();`在我的 php 代码中使用了函数，它需要`php_sdo.dll`. 所以我从网上安装它并将其保存在`C:\xampplite\php\ext`位置，然后将其添加到我的`php.ini`文件中。但即使当我从 xampp 启动 apache 时它仍然无法正常工作，它会显示警告 `PHP Startup: sdo: Unable to inilialize module`。*使用模块*API =20060613*编译的模块。PHP 编译模块 API=20090626.* 这些选项需要匹配。

请帮助我如何添加`php_sdo`我的 xampp。我用的是windows xp。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:03:05.330

我从[这篇文章](https://stackoverflow.com/questions/2394532/apache-is-unable-to-initialize-module-because-of-modules-and-phps-api-dont)中得出的结论是，您下载的 dll 文件可能是为比您拥有的版本更旧的 PHP 版本编译的。您可以尝试[这个 dll 文件](http://ioosd.in/download/php_sdo.dll)，因为它不会给我带来 PHP 5.3.1 的问题

# performance - 在每个子集上找到最大值

> ID：12224887
> 
> 赞同：3
> 
> 时间：2012-09-01T04:26:57.380
> 
> 标签：performance, algorithm, optimization, graph-algorithm

（我在这里敲我的头。令 X={x1,x2,...,xn} 是一个整数集。令 A1,A2,...Am 是 X 的 m 个子集。对于任何 i 和 j， Ai 和 Aj 不一定是不相交的，现在的目标是有效地找到每个 Ai (i=1,...,m) 上的最大值，同时尽可能减少操作次数。

例如，给定 X={2,4,6,3,1}，其子集 A1={2,3,1}，A2={2,6,3,1}，A3={4,2， 3,1}。我们需要分别找到 Max{A1}、Max{A2}、Max{A3}。

求Max{A1}、Max{A2}、Max{A3}的蛮力方法是扫描每个Ai中的所有元素，需要(m*d)次操作，其中m是X的子集数，和 d X 的子集 {Ai} 的平均长度。

现在，我有一些观察：

(1) 对于任意集合 Y⊆X，max{Y}≤max{X}，

例如，由于 Max{X}=6 且 6 在 A2 中，则可以直接找到 Max{A2}=6。

(2) 对于任意两个集合 A 和 B，如果 A∩B 不为空，则 Max{A} 和 Max{B} 可以识别为：

首先，我们找到 A 和 B 之间的共同部分，表示为 c=max{A∩B}。

然后，我们找到 Max{A}=Max{Max{A-(A∩B)}, c} 和 Max{B}=Max{Max{B-(A∩B)}, c}。

我不确定是否还有其他一些有趣的观察可以找到这些最大值。任何想法都受到热烈欢迎！

我的问题是，如果对于一般情况下 X={x1,x2,...,xn} 并且 X 有 m 个子集，表示为 A1,A2,...Am，是否有一些更有效的技术可以找到这样的最大值 Max{Ai} (i=1,...,m) ？

您的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T04:33:00.200

假设给定集合的典型表示，没有比蛮力渐近更好的方法。简单地扫描集合以找到每个集合中的最大成员需要线性时间，而线性时间是最佳的，因为必须读取集合的每个成员以确定最大值。

现在，如果输入表示不仅仅是每个集合中元素的列表，则可能会应用其他边界和算法。例如，如果我们知道输入集是排序的，并且集的长度作为输入的一部分给出，我们显然可以在时间上找到最大元素，仅与子集的数量有关，但与它们的长度无关。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T04:55:33.343

如果您的集合是在散列中实现的（或者，更一般地说，如果您可以在 O(1) 时间内检查集合中是否存在值），您可以改进蛮力方法。

不是遍历子集的元素并保持最大值，而是按降序遍历父集的元素，检查子集中这些元素的存在。第一个找到的元素必然是子集的最大值。从技术上讲，这在一般情况下仍然需要 O(n) 时间（n = 子集肉体），但在实践中通常会带来很大的性能优势。（如果您有任何关于子集数量和大小的数据，并且他们喜欢这种方法，那么在平均情况下，您可以改进 O(n)。）

然而，这种方法需要对父集的元素进行排序（n log n），因此只有当子集的数量远大于父集的肉体时才值得。

# entity-framework - 实体框架多开发人员问题的迁移

> ID：12224892
> 
> 赞同：1
> 
> 时间：2012-09-01T04:27:45.430
> 
> 标签：entity-framework, database-migration

我们正在使用 Code First Migrations EF 5.0.0.rc，当团队中的两个人同时创建迁移然后提交他们的更改时，我们遇到了问题。

这看起来是因为 Update-Database 再次比较了最新的迁移模型哈希或没有我更改的东西，因为它是由其他人提交的。所以是基于最新迁移的数据库状态，然后忽略我之前已经应用的更改。

当使用本地数据库来简化开发和远程工作时，这是一种非常丑陋的行为。我想这应该会有所不同，始终使用当前模型进行比较，而不是迁移文件模型哈希中声明的最新模型。

或者我们做错了什么？有人有这个问题吗？迁移工具真的很棒，但是很难在不同的环境中工作，如果没有这个功能就可以远程工作，我们正在苦苦挣扎，因为这看起来很基本的功能。

谢谢，莱昂纳多

# php - Issue Regarding Join Statements (Or Other Efficient Method) in MySQL

> ID：12224893
> 
> 赞同：0
> 
> 时间：2012-09-01T04:27:48.257
> 
> 标签：php, mysql

It took a while to come up with a title as I wasn't sure what to title it. Basically my problem deals with `SQL queries` and coming up with an efficient method to go about what I am trying to do.

To give it in an example, say we have two tables:

```
Table 1 (Articles): ID | ArticleName | AuthorID
Table 2 (Users):    ID | AuthorName 
```

What I am attempting to do is pull, say the last 5 articles. From here, with each article it pulls it has a while loop to query the second table to pull `AuthorName where ID=AuthorID`.

In essence, we have one query for the 5 articles and then another **five** queries to get the author names. This is further compounded on pages with 10-20 or more articles, where there's an extra 10-20+ queries.

Is there a more efficient method to join these statements together and have it pull the AuthorName for *each* article it pulls?

The reason for using AuthorID in table 1 is so that if usernames are changed, it doesn't break anything. Along with this, it (as far as I understand) cuts down a lot on the database storage.

I'm still somewhat new to SQL though so any ideas on how to resolve this would be much appreciated.

Thanks in advance, and if there are any questions please don't hesitate to ask!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T04:32:14.653

```
SELECT * FROM `Articles` INNER JOIN `Users` ON `Articles`.`AuthorID`=`Users`.`ID` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T04:50:28.010

There's two ways to do this. You can either do a one-shot query that `JOIN`s in the additional authors table and presents a complete result set, or you can do a two pass where you fetch all the authors in a subsequent call using `SELECT ... FROM Authors WHERE ID IN (...)` using the distinct identifiers from the first query.

For small lists and small tables the `JOIN` method will almost always be more convenient. For large lists the two-pass approach seems "dumber" but often out-performs doing the join in the database. For instance, if the number of articles is very large and the number of authors is small then the `JOIN` adds significant amounts of work to the large query that could be eliminated by making a small secondary query after the fact.

For this case, with less than one million records and small fetch sizes, go with `JOIN`.

# iphone - 如何使用 iPhone SDK 改变图像的形状？

> ID：12224895
> 
> 赞同：0
> 
> 时间：2012-09-01T04:28:27.827
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ios5

我正在创建一个 iPhone 应用程序，我想让用户能够更改给定图像的形状，如下所示。我怎样才能做到这一点？

![在此处输入图像描述](../Images/b98ef3651fcc1ed635ec0faeae547080.png)

请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T04:44:42.120

**SPUserResizableView**是一个用户可调整大小、用户可重新定位的 UIView 子类。它以 Pages iOS 应用程序中可调整大小的图像视图为模型。任何 UIView 都可以作为 SPUserResizableView 的内容视图提供。随着视图被重新定位和调整大小， setFrame: 将相应地在内容视图上调用。

有关示例代码，请参阅[SPUserResizableView](https://github.com/spoletto/SPUserResizableView)链接。

# android - 使用 sqlEscapeString() 后如何取消转义字符串

> ID：12224898
> 
> 赞同：1
> 
> 时间：2012-09-01T04:29:19.800
> 
> 标签：android, sqlite, escaping

所以我一直在寻找最简单、最有效的方法来为我的应用程序在 SQLite 中逃避恶意字符串。这里的大多数答案通常都有正则表达式路线。我偶然发现了一个找到[sqlEscapeString](http://developer.android.com/reference/android/database/DatabaseUtils.html#sqlEscapeString%28java.lang.String%29)的答案。

有一个问题。当它转义它时，它似乎也在字符串的末尾添加了单引号，所以它从 this:`Test's`到: `'Test''s'`。现在我真的不知道它为什么会这样做，但我希望有人能对 Android 中存在的新功能起到相反的作用。`DatabaseUtils`似乎没有它的伴侣功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T08:37:23.240

我想说防止恶意字符串的最有效方法是让 SQLite 完成这项工作。Android 包装了该功能并使用`ContentValues`、 `String[]`或`Object[]`参数，具体取决于您用于查询数据库的方法，以保存转义值。：

[SQLiteDatabase.insert(...)](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#insert%28java.lang.String,%20java.lang.String,%20android.content.ContentValues%29)

[SQLiteDatabase.query(...)](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#query%28java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)

[SQLiteDatabase.update(...)](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#update%28java.lang.String,%20android.content.ContentValues,%20java.lang.String,%20java.lang.String%5B%5D%29)

[SQLiteDatabase.delete(...)](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#delete%28java.lang.String,%20java.lang.String,%20java.lang.String%5B%5D%29)

[SQLiteDatabase.execSQL(...)](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#execSQL%28java.lang.String,%20java.lang.Object%5B%5D%29)

在使用上述方法时，`?`在你的 SQL 语句中放置一个你想要转义的字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-28T18:48:31.167

我为反向 sqlEscapeString() 创建了一个 unescape() 方法。

```
public String unescapeString(String string) {
    if (string == null)
        return null;

    StringBuilder sb = new StringBuilder(string);

    sb = sb.deleteCharAt(0);
    sb = sb.deleteCharAt(sb.length() - 1);

    return sb.toString().replaceAll("''", "'");
} 
```

# java - java中的XML文档遍历器

> ID：12224899
> 
> 赞同：1
> 
> 时间：2012-09-01T04:29:20.397
> 
> 标签：java, xml, dom

每个人都知道我们可以使用 DocumentTraversal 的 NodeIterator 遍历整个 xml 文档。我的应用程序需要一些额外的工作，所以我决定编写我自己的 XML 遍历器并支持 java Stack<>。

这是我的代码（我不擅长编码，所以代码和逻辑可能看起来很乱）。

```
public class test
{
    private static Stack<Node> gStack = new Stack<Node>();

    public static void main(String[] args) throws XPathExpressionException
    {
        String str =
            "<section>"
                + "<paragraph>This example combines regular wysiwyg editing of a document with very controlled editing of semantic rich content. The main content can be"
                + "edited like you would in a normal word processor. Though the difference is that the content remains schema valid XML because Xopus will not allow you to perform actions"
                + "on the document that would render it invalid.</paragraph>"
                + "<paragraph>The table is an example of controlled style. The style of the table is controlled by three attributes:</paragraph>"
                + "<unorderedlist>"
                + "<item><paragraph><emphasis>alternaterowcolor</emphasis>, do all rows have the same color, or should the background color alternate?</paragraph></item>"
                + "<item><paragraph><emphasis>border</emphasis>, a limited choice of border styles.</paragraph></item>"
                + "<item><paragraph><emphasis>color</emphasis>, a limited choice of colors.</paragraph></item>"
                + "</unorderedlist>"
                + "<paragraph>You have quite some freedom to style the table, but you can't break the predefined style.</paragraph>"
                + "</section>";

        Document domDoc = null;
        try
        {
            DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder docBuilder = docFactory.newDocumentBuilder();
            ByteArrayInputStream bis = new ByteArrayInputStream(str.getBytes());
            domDoc = docBuilder.parse(bis);
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }

        Element root = null;
        NodeList list = domDoc.getChildNodes();
        for (int i = 0; i < list.getLength(); i++)
        {
            if (list.item(i) instanceof Element)
            {
                root = (Element) list.item(i);
                break;
            }
        }

        NodeList nlist = root.getChildNodes();

        System.out.println("root = " + root.getNodeName() + "  child count = " + nlist.getLength());
        domTraversor(root);
    }

    private static void domTraversor(Node node)
    {
        if (node.getNodeName().equals("#text"))
        {
            System.out.println("textElem = " + node.getTextContent());
            if (node.getNextSibling() != null)
            {
                gStack.push(node.getNextSibling());
                domTraversor(node.getNextSibling());
            }
            else
            {
                if (node.getParentNode().getNextSibling() != null)
                    domTraversor(node.getParentNode().getNextSibling());
            }
        }
        else
        {
            if (node.getChildNodes().getLength() > 1)
            {
                gStack.push(node);
                Node n = node.getFirstChild();
                if (n.getNodeName().equals("#text"))
                {
                    System.out.println("textElem = " + n.getTextContent());
                    if (n.getNextSibling() != null)
                    {
                        gStack.push(n.getNextSibling());
                        domTraversor(n.getNextSibling());
                    }
                }
                else
                {
                    gStack.push(n);
                    domTraversor(n);
                }
            }
            else if (node.getChildNodes().getLength() == 1)
            {
                Node fnode = node.getFirstChild();
                if (fnode.getChildNodes().getLength() > 1)
                {
                    gStack.push(fnode);
                    domTraversor(fnode);
                }
                else
                {
                    if (!fnode.getNodeName().equals("#text"))
                    {
                        gStack.push(fnode);
                        domTraversor(fnode);
                    }
                    else
                    {
                        System.out.println("textElem = " + fnode.getTextContent());
                        if (fnode.getNodeName().equals("#text"))
                        {
                            if (node.getNextSibling() != null)
                            {
                                gStack.push(node.getNextSibling());
                                domTraversor(node.getNextSibling());
                            }
                            else
                            {
                                if (!gStack.empty())
                                {
                                    Node sibPn = gStack.pop();
                                    if (sibPn.getNextSibling() == null)
                                    {
                                        sibPn = gStack.pop();
                                    }
                                    domTraversor(sibPn.getNextSibling());
                                }
                            }
                        }
                        else
                        {
                            if (fnode.getNextSibling() != null)
                            {
                                domTraversor(fnode.getNextSibling());
                            }
                            else
                            {
                                if (!gStack.empty())
                                {
                                    Node sibPn = gStack.pop().getNextSibling();
                                    domTraversor(sibPn);
                                }
                            }
                        }
                    }
                }
            }
        }
    }
} 
```

它适用于某些 xml 文档，但不适用于具有类似标签的文档。

```
<unorderedlist>
    <item>
        <paragraph>
            <emphasis>alternaterowcolor</emphasis>
            , do all rows have the same color, or should the background
            color
            alternate?
        </paragraph>
    </item>
    <item>
        <paragraph>
            <emphasis>border</emphasis>
            , a limited choice of border styles.
        </paragraph>
    </item>
    <item>
        <paragraph>
            <emphasis>color</emphasis>
            , a limited choice of colors.
        </paragraph>
    </item>
</unorderedlist> 
```

如果任何元素具有三个以上的嵌套子级，我的代码就会停止并且不会进一步运行，这就是这种情况。

有没有人有更好的实现，请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T05:13:35.627

试试这个方法

```
Element e;
NodeList n;
Document doc=StudyParser.XMLfromString(xmlString);
String starttag=doc.getFirstChild().getNodeName();
   Log.e("start",starttag );
   n=doc.getElementsByTagName(starttag);
   for(int i=0;i<n.getLength();i++){
       e=(Element)n.item(i);
       NodeList np = e.getElementsByTagName("item");
       for(int j=0;j<np.getLength();j++){
           e=(Element)n.item(i);
           try{
           String para=StudyParser.getValue(e, "paragraph");
           Log.e("paravalue",para);
           String emp=StudyParser.getValue(e, "emphasis");       
           Log.e("empval",emp);
           }catch(Exception e){
               e.printStackTrace();
           }
       }
   } 
```

**StudyParser 类**

```
 import java.io.BufferedInputStream;
    import java.io.ByteArrayOutputStream;
    import java.io.IOException;
    import java.io.InputStream;
    import java.io.InputStreamReader;
    import java.io.StringReader;
    import java.io.UnsupportedEncodingException;
    import java.net.MalformedURLException;

    import javax.xml.parsers.DocumentBuilder;
    import javax.xml.parsers.DocumentBuilderFactory;
    import javax.xml.parsers.ParserConfigurationException;

    import org.apache.http.HttpEntity;
    import org.apache.http.HttpResponse;
    import org.apache.http.client.methods.HttpPost;
    import org.apache.http.impl.client.DefaultHttpClient;
    import org.apache.http.util.EntityUtils;
    import org.w3c.dom.Document;
    import org.w3c.dom.Element;
    import org.w3c.dom.Node;
    import org.w3c.dom.NodeList;
    import org.xml.sax.InputSource;
    import org.xml.sax.SAXException;

    public class StudyParser {
    public StudyParser() {

    }

public final static Document XMLfromString(String xml){
     Document doc = null;

        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            try {

          DocumentBuilder db = dbf.newDocumentBuilder();

          InputSource is = new InputSource();
              is.setCharacterStream(new StringReader(xml));
              doc = db.parse(is); 

        } catch (ParserConfigurationException e) {
          System.out.println("XML parse error: " + e.getMessage());
          return null;
        } catch (SAXException e) {
          System.out.println("Wrong XML file structure: " + e.getMessage());
                return null;
        } catch (IOException e) {
          System.out.println("I/O exeption: " + e.getMessage());
          return null;
        }

            return doc;

  }
public static String getXMLstring(String xml){   
      String line = null;

      try {

        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(xml);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        line = EntityUtils.toString(httpEntity);

      } catch (UnsupportedEncodingException e) {
        line = "<results status=\"error\"><msg>Can't connect to server</msg></results>";
      } catch (MalformedURLException e) {
        line = "<results status=\"error\"><msg>Can't connect to server</msg></results>";
      } catch (IOException e) {
        line = "<results status=\"error\"><msg>Can't connect to server</msg></results>";
      }

      return line;

  }
public static String getXML(InputStream is)throws IOException {

    BufferedInputStream bis = new BufferedInputStream(is);
    ByteArrayOutputStream buf = new ByteArrayOutputStream();
    int result = bis.read();
    while(result != -1) {
      byte b = (byte)result;
      buf.write(b);
      result = bis.read();
    }        
    return buf.toString();
}
public final static String getElementValue( Node elem ) {
       Node kid;
       if( elem != null){
           if (elem.hasChildNodes()){
               for( kid = elem.getFirstChild(); kid != null; kid = kid.getNextSibling() ){
                   if( kid.getNodeType() == Node.TEXT_NODE  ){
                       return kid.getNodeValue();
                   }

               }
           }
       }
       return "";
   }
 public static int numResults(Document doc){    
        Node results = doc.getDocumentElement();
        int res = -1;

        try{
          res = Integer.valueOf(results.getAttributes().getNamedItem("Categories").getNodeValue());
        }catch(Exception e ){
          res = -1;
        }

        return res;
      }

      public static String getValue(Element item, String str) {    
        NodeList n = item.getElementsByTagName(str);    
        return StudyParser.getElementValue(n.item(0));
      }

} 
```

只是动态 xml 的普通演示，我假设相同的 xml，但不使用**getElementByTagName**有很多属性你可以检查accodringlly see

```
 doc = StudyParser.XMLfromString(xml);
   String starttag=doc.getFirstChild().getNodeName();
   Log.e("start",starttag );
   n=doc.getElementsByTagName(starttag);
   for(int i=0;i<n.getLength();i++){
       e=(Element)n.item(i);
           try{
             Log.e("1234",""+ e.getTextContent());

           }catch(Exception e){
               e.printStackTrace();
           }

   } 
```

# java - 与其他 Timer 动作同步音效

> ID：12224901
> 
> 赞同：2
> 
> 时间：2012-09-01T04:29:38.627
> 
> 标签：java, swing, timer

我有这个计时器，它应该以 1 秒的间隔启动各种操作。这是一个非常简单的想法，可以模拟 5 秒倒计时（字面意思）。开始时，更新 JLabel 以将其文本设置为“5”。同时，一个小的 mp3 声音文件播放用户在屏幕上看到的数字。然后，一秒钟后，文本更改为“4”，播放不同的 mp3，播放数字 4。依此类推，直到我们到达零。

这一切都有效，但我无法让视觉更新与音频部分精确同步。mp3 似乎总是在屏幕更新之前播放。起初，我认为我只需要在每个 mp3 的开头加上一点额外的静默，在反复试验的基础上，直到事情同步。但是，无论我在每个 mp3 前添加多少静音，我仍然会在屏幕更新之前听到音频。所有的变化是每个“一秒”更新之间的延迟。

无论如何，这是我正在使用的代码。谁能帮我把这个同步？也许我需要第二个计时器？我不确定那将如何工作。提前致谢！

```
class Countdown extends JFrame implements ActionListener {

    private Timer countdownTimer = new Timer(1000, this);
    int countdownSeconds;
    MyJFrame myFrame;

    public Countdown(MyJFrame thisFrame) {

        int countdownSeconds = 5;
        countdownTimer.start();
        myFrame = thisFrame;
    }

    @Override
    public void actionPerformed(ActionEvent e) {

            if (countdownSeconds == 0) {
                myFrame.updateCountdown(myFrame, "Go");
                SoundEffect.play("launch.mp3");
                countdownTimer.stop();
            } else {
                myFrame.updateCountdown(myFrame, Integer.toString(countdownSeconds));
                if (countdownSeconds == 5) {SoundEffect.play("five.mp3");}
                if (countdownSeconds == 4) {SoundEffect.play("four.mp3");}
                if (countdownSeconds == 3) {SoundEffect.play("three.mp3");}
                if (countdownSeconds == 2) {SoundEffect.play("two.mp3");}
                if (countdownSeconds == 1) {SoundEffect.play("one.mp3");}
                countdownSeconds--;
            }
        }
    }

public void updateCountdown(MyJFrame thisFrame, String numSec) {
    lblCountdown.setText(numSec);
}

import java.io.FileInputStream;
import javazoom.jl.player.Player;

public class SoundEffect {

    public static void play(String mp3File) {
        try {
            FileInputStream mp3_file = new FileInputStream(mp3File);
            Player mp3 = new Player(mp3_file);
            mp3.play();
        }
        catch(Exception e) {
            System.out.println(e);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T06:40:25.407

我非常怀疑您是否能够完美地同步这些内容，但我可以解释为什么当前的方法行不通。

Swing 组件必须在*Event Dispatch Thread*上更新，就像使用`Timer`. 当您更新标签的文本时，它将在*Event Dispatch Thread*上安排重绘。注意*schedule*这个词，而不是*perform*。

但是，*Event Dispatch Thread*目前正忙于播放您的声音，所以实际`repaint`操作只有在您调用`mp3.play()`.

现在您可以（如果允许，不确定播放 MP3 的线程规则）尝试在不同的设备上播放 mp3 `Thread`（例如，通过使用辅助非 Swing 计时器）。但是，由于您永远无法完全控制实际重绘何时发生，并且只能控制重绘计划的时间，因此视觉和听觉更新仍然可能不同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T06:30:20.143

问题的主要部分归结为：

```
if (countdownSeconds == 5) {SoundEffect.play("five.mp3");} 
```

..导致..

```
public class SoundEffect {

    public static void play(String mp3File) {
        try {
            FileInputStream mp3_file = new FileInputStream(mp3File);
            Player mp3 = new Player(mp3_file);
            mp3.play();
        }
        catch(Exception e) {
            System.out.println(e);
        }
    }
} 
```

哇！现在不是***加载***剪辑的时候！

相反，它们应该在计时器开始之前加载。我认为文件 I/O 是（可察觉的）滞后或延迟的**真正**原因。

# android - 页面卷曲动画到布局

> ID：12224902
> 
> 赞同：5
> 
> 时间：2012-09-01T04:29:56.463
> 
> 标签：android, android-layout, animation, page-curl

我想在更改时赋予页面卷曲效果`Layout`，曾[**参考 Harism Pagecurl**](https://github.com/harism/android_page_curl)挖掘它，因此知道它对预生成视图（位图）的赋予效果，但要求如下......

1.  布局可以很复杂，包含各种控件（按钮、Textview 等）。
2.  我可以单击 Button、TextView 并可以处理其事件。
3.  当我触摸不包含任何控件的区域时，能够以卷曲效果滑动布局。

欢迎任何想法或解决方法，这很棘手。

# linux - 如何从 linux 的命令行将 Sublime Text 2 文件打开到选项卡，而不是新窗口

> ID：12224904
> 
> 赞同：43
> 
> 时间：2012-09-01T04:30:22.530
> 
> 标签：linux, ubuntu, sublimetext2

我有 ST2 设置，因此我可以执行“sublime file.txt”，它将在 ST2 窗口中打开。但是我怎样才能让它在当前打开的窗口中的新选项卡中打开呢？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-09-03T06:43:11.677

试试 Sublime 命令行帮助

subl --help 崇高文本 2 构建 2217

```
Usage: subl [arguments] [files]         edit the given files
   or: subl [arguments] [directories]   open the given directories
   or: subl [arguments] -               edit stdin

Arguments:
  --project <project>: Load the given project
  --command <command>: Run the given command
  -n or --new-window:  Open a new window
  -a or --add:         Add folders to the current window
  -w or --wait:        Wait for the files to be closed before returning
  -b or --background:  Don't activate the application
  -s or --stay:        Keep the application activated after closing the file
  -h or --help:        Show help (this message) and exit
  -v or --version:     Show version and exit

--wait is implied if reading from stdin. Use --stay to not switch back
to the terminal when a file is closed (only relevant if waiting for a file).

Filenames may be given a :line or :line:column suffix to open at a specific
location. 
```

打开新窗口后，应按照默认行为将后续文件添加到那里。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-04-25T06:16:58.673

这适用于 Ubuntu 12.04：

```
subl filename 
```

或者

`subl -n filename`（如果您希望它在单独的窗口中打开）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-02-11T05:04:14.037

```
subl fileName 
```

如果你想打开一个新文件，请使用

```
subl -n new_file_name 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-03T13:09:41.453

另一种选择是：打开文件。

```
[sublime index.html script.js styles.css] 
```

打开一个文件夹 [ sublime folderName ]

# bash - 当我运行 shell 命令时，有没有办法让我的 emacs 识别我的 bash 别名和自定义函数？

> ID：12224909
> 
> 赞同：36
> 
> 时间：2012-09-01T04:31:07.163
> 
> 标签：bash, shell, emacs, environment-variables

在我的 shell 环境中，我有别名和自定义函数。当我在 emacs 实例中（我总是使用`emacs -nw`）并执行 shell 命令（`M-!`）时，我无法使用它们。这是有道理的，因为我想它会启动它自己的子外壳来执行这些操作......但是有没有办法（可能在我的`.emacs`）中让它工作？也许即使它涉及在执行任何给定的 shell 命令之前默认采购一个环境？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-01T16:20:54.867

以下是我对我认为是相关问题的评论：

我认为`M-x` **shell-command**和`M-x` **compile**都通过调用进程在劣质 shell 中执行命令。在您的 .emacs 中尝试以下操作（或仅评估）：

```
(setq shell-file-name "bash")
(setq shell-command-switch "-ic") 
```

我注意到，在对上述内容进行评估之后，会选择 .bashrc 别名供`M-x`shell-command 和`M-x`compile 使用，即

`M-x`编译`RET` **your_alias** `RET`

然后应该工作。

我的环境：Emacs 24.1（预测试 rc1），OSX 10.7.3

[来源](https://stackoverflow.com/a/10958134/1046267)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T14:40:07.663

阅读[http://www.gnu.org/software/bash/manual/bashref.html#Bash-Startup-Files](http://www.gnu.org/software/bash/manual/bashref.html#Bash-Startup-Files)

对于非交互式 shell，唯一的来源文件是 BASH_ENV 环境变量的值。您调用 emacs 就像`BASH_ENV=~/.bashrc emacs` **emacs**是否将 bash 用于 shell 命令一样——某些程序专门使用“/bin/sh”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-13T23:37:37.547

要在按照[https://stackoverflow.com/a/12228646/8869495](https://stackoverflow.com/a/12228646/8869495)中描述的技术执行命令之前`shell-command`进行阅读，而不会由于为整个 Emacs 会话定义而产生潜在的副作用，请在您的（或）文件中尝试此操作：`~/.bashrc``$BASH_ENV``~/.emacs.d/init.el``.emacs`

```
;; I want M-! (shell-command) to pick up my aliases and so run .bashrc:
(setq shell-file-name "bash-for-emacs.sh")  ; Does this: BASH_ENV="~/.bashrc" exec bash "$@"
(setq shell-command-switch "-c") 
```

如第二行中的注释所述，还安装（在您的`$PATH`）一个名为的脚本`bash-for-emacs.sh`，其中包含：

```
#!/bin/bash

BASH_ENV="~/.bashrc" exec bash "$@" 
```

请注意，您`~/.bashrc`可能需要更改以定义非交互式别名，即使`[ -z "$PS1" ]`是 true（这表示非交互式 shell）。这就是我为自己的环境（例如）采用的方法，位于[https://github.com/jcburley/UnixHome](https://github.com/jcburley/UnixHome)。

此外，这假设您想像我一样使用 Bash 作为 Emacs 生成的 shell。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-05-28T22:00:05.223

我们需要在非交互式 shell 中启用别名扩展，最好仅在从 emacs 调用它们时（以避免在我们运行其他 shell 时造成细微差异）。对我有用的是创建两个文件： ~/.alias 有我所有的别名，例如

```
alias python python27 
```

和 ~/.aliasExpand 有

```
source ~/.alias
shopt -s expand_aliases 
```

当然，我也将 .bashrc 中的所有别名替换为

```
source ~/.alias 
```

最后，我将其添加到我的 .emacs 中：

```
(setenv "BASH_ENV" "~/.aliasExpand") 
```

我尝试了 Keith Flower 的解决方案（使贝壳交互），我得到了

> bash：无法设置终端进程组（-1）：设备 bash 的 ioctl 不合适：此 shell 中没有作业控制

请注意，我是通过 Glenn Jackman 和 Nicholas Dudebout 的提示得到的。

如果您愿意冒险让所有 shell 都具有别名扩展，并且不介意为每个 emacs shell 运行所有 .bashrc，则可以将其简化为添加

```
shopt -s expand_aliases 
```

到你的 .bashrc 和

```
(setenv "BASH_ENV" "~/.bashrc") 
```

到你的 .emacs

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-19T11:42:41.020

直接设置`shell-command-switch`会大大`shell-command`增加速度（如果您使用许多`(ba|z)sh`插件），它由各种非交互式函数调用，如`shell-command-to-string`, `eshell-remote-command`,... 以及其他函数对其的大量调用，所有这些都不需要`.bashrc`或`.zshrc`

例如，在我的机器上（也可能是你的机器）：

```
(benchmark-elapse (let ((shell-command-switch "-c")) (shell-command "")))
0.005170422
(benchmark-elapse (let ((shell-command-switch "-ic")) (shell-command "")))
0.242628824
;; Empty ~/.zshrc: 0.168341049 
```

`shell-command`因此，我们应该选择找到一种仅在交互调用时才使用交互 shell 的方法

```
;;;###autoload
(defun my-shell-command-interactive-a (fn &rest args)
  "Use interactive shell for `shell-command' when invoked interactively.
Setting the \"-i\" switch all the time will significantly slow
down `shell-command' because there may too many files to source."
  (let ((shell-command-switch (if (called-interactively-p 'interactive)
                                  ;; Replace the first "-"
                                  (replace-regexp-in-string
                                   "\\(-\\).*\\'"
                                   "-i"
                                   shell-command-switch
                                   nil
                                   nil
                                   1)
                                shell-command-switch)))
    (apply fn args)))

(dolist (cmd '(shell-command async-shell-command)) 
   (advice-add cmd :around #'my-shell-command-interactive-a)) 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-09-01T04:52:36.780

将别名和函数放在 中`.bashrc`，而不是`.bash_profile`. 后者仅在登录 shell 中执行，前者在所有 shell 中执行。

# javascript - 如何将事件绑定到从 AJAX 请求注入的 HTML

> ID：12224913
> 
> 赞同：3
> 
> 时间：2012-09-01T04:31:40.637
> 
> 标签：javascript, jquery, html, ajax, dom

所以我`html`通过 AJAX 请求注入：

**阿贾克斯响应**

```
 <div id="my-element">HTML from AJAX request</div> 
```

问题是带有 id 的元素`#my-element`来自 AJAX 请求，但我也需要绑定事件。例如：

```
 $(document).ready(function() {
    $("#my-element").click(function() {
        alert("hit");
    });
 }); 
```

显然，上面的事件永远不会触发，因为当页面准备好时，还没有从 AJAX 请求中注入 HTML。解决此问题的最佳解决方案是什么？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T04:33:13.293

尝试使用`jQuery.on`功能：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

```
$(document).on('click', '#my-element', function () { ... }); 
```

然后它甚至可以使用动态添加的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T04:33:03.603

在通过 AJAX 请求注入 html 完成后添加您的事件，
或者
您可以使用`on`方法

也见这个例子

[动态创建元素的事件绑定？](https://stackoverflow.com/questions/203198/jquery-event-binding-on-dynamically-created-elements)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T04:35:37.047

使用`on`方法让它活起来。

```
$(function(){
    $("#my-element").on("click",function() {
        alert("hit");
    });
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-01T04:32:58.300

在将 html 插入 DOM 之后，在 ajax 调用的成功回调中进行绑定。

# google-app-engine - 在请求结束后，在带有 NDB 的 Appengine 上，当异步放置导致争用异常时会发生什么？

> ID：12224915
> 
> 赞同：5
> 
> 时间：2012-09-01T04:32:21.837
> 
> 标签：google-app-engine, app-engine-ndb

使用 ndb，假设我 put_async'd 40 个元素，使用@ndb.toplevel，向用户写入输出并结束请求，但是其中一个 put_async 导致争用异常，响应是 500 还是 200？或者让我们说如果它是一项任务，该任务会重新执行吗？

一种解决方案是在请求结束之前获取所有这 40 个请求并捕获这些异常（如果它们发生），但我不确定它是否会影响性能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T10:04:31.670

据我了解，使用 @ndb.toplevel 会导致处理程序在退出之前等待所有异步操作完成。从文档：

> 为方便起见，您可以使用 @ndb.toplevel 装饰请求处理程序。这告诉处理程序在其异步请求完成之前不要退出。这反过来又让您发送请求而不必担心结果。[https://developers.google.com/appengine/docs/python/ndb/async#intro](https://developers.google.com/appengine/docs/python/ndb/async#intro)

因此，通过添加 @ndb.toplevel ，直到异步方法完成执行后才会真正返回响应。使用 @ndb.toplevel 消除了对所有已触发的异步调用调用 get_result 的需要（为方便起见）。~~因此，基于此，如果异步查询失败，请求仍将返回 500，因为所有异步查询都需要在返回之前完成。~~ **更新：以下**

如果使用任务（我假设您的意思是任务队列），如果请求失败，任务队列将重试请求。所以你的处理程序可能是这样的：

```
def get(self):
    deferred.defer(execute_stuff_in_background, param,param1)
    template.render(...) 
```

一旦处理程序返回，execute_stuff_in_background 将执行所有昂贵的放置。如果任务中存在争用问题，您的原始处理程序仍将返回 200。

如果您怀疑会出现争用问题，或许可以考虑分片或使用 fork-join 队列实现来处理写入（请参阅此处的实现：[http ://www.youtube.com/watch?v=zSDC_TU7rtc#t= 41m35](http://www.youtube.com/watch?v=zSDC_TU7rtc#t=41m35) )

~~**编辑：简短回答** 如果异步请求失败，请求将失败（返回 500），因为 @ndb.toplevel 在退出之前等待所有结果完成。~~ **更新：**看了下面@alexis 的答案后，我重新运行了我的原始测试（我关闭了数据存储写入并在用@ndb.toplevel 装饰的处理程序中调用了put_async），响应间歇性提高500（我假设这取决于执行时间）。基于此和下面@alexis 的回答，如果异步任务抛出异常并且调用函数用@ndb.toplevel 修饰，则不要期望结果为500

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-15T13:42:16.857

这很奇怪，我使用顶层并期望相反的行为。这就是我观察到的。自从第一次回答这个问题以来，有什么变化吗？正如文档所说：

> 这反过来又让您发送请求而不必担心结果。

您可以尝试以下单元测试（使用测试床）：

```
@ndb.tasklet
def raiseSomething():
    yield ndb.Key('foo','bar').get_async()
    raise Exception()

@ndb.toplevel
def callRaiseSomething():
    future = raiseSomething()
    return "hello"

response = callRaiseSomething()
self.assertEqual(response, "hello") 
```

该测试通过。NDB 记录一个警告：“suspended generator raiseSomething(tests.py:90) raiseSomething()引发了 Exception()”，但它不会重新引发异常。

ndb.toplevel 只等待 RPC，但对实际结果不做任何事情。如果你的装饰函数本身是一个小任务，它会首先调用 get_result() 。此时将引发异常。然后它将等待剩余的“孤立”RPC，并且只有在引发异常时才会记录一些内容。

所以我的回应是：请求会成功（返回200）

# sql-server-2008 - SQL Server Express 2008 连接字符串未出现在 web.config 中

> ID：12224925
> 
> 赞同：1
> 
> 时间：2012-09-01T04:34:54.733
> 
> 标签：sql-server-2008

我需要一些帮助。

我正在使用 VS 2010 Pro。当我创建一个空的 ASP.NET 网站并通过以下方式向其中添加用户时：

1.  Asp.Net 配置向导或
2.  通过带有 createuser 向导的 Register.aspx 页面

一切正常。我的 App_Data 文件夹中有一个 ASPNETDB.MDF。成员资格和角色、登录和注销都按预期工作。

问题是 web.config 文件没有显示到 SQL Server Express 数据库文件的连接字符串。会员元素等也丢失了。

但是，如果我创建一个 ASP.NET 网站（不是一个空的 ASP.NET 网站），那么 web.config 文件会包含所有信息。

我试过这个

1.  带有 VS 2010 Pro 和 IIS 7.5 的 Windows 7 Ultimate
2.  Windows XP Professional 与 VS 2010 Pro 与 VS 内置开发服务器

结果相同。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T16:43:41.580

谢谢您的帮助

我找到了答案。

ASPNETDB.MDF 的连接字符串不出现在 web.config 中。

应用程序使用 machine.config 文件中定义的机器范围连接字符串。

[有关更多详细信息，请在此处](https://stackoverflow.com/questions/12218942/sql-server-express-2008-connection-string-missing-in-web-config)查看我的答案。

# vb.net - 如何在 VB.net 中为扩展方法创建 DLL？

> ID：12224934
> 
> 赞同：3
> 
> 时间：2012-09-01T04:38:37.510
> 
> 标签：vb.net, dll, visual-studio-extensions

女士们先生们，我正在尝试创建一个可以在几个不同项目之间共享的 DLL，其中包括我为简化代码而编写的各种扩展方法。了解此类 DLL 在 C# 和 VB.net 项目之间共享是可行的。然而，到目前为止，我一直无法创建 DLL，甚至无法包含子项目并以这种方式引用它并能够访问我的扩展。

我可以在对象浏览器中看到引用，但导入语句不会将我的子项目引用作为选项。VB.net 不允许我将扩展放在类中，而且我似乎无法在网络上找到任何可以解释这一点的线索。提前致谢。

例子...

 ````
Imports System.Runtime.CompilerServices
Imports System.Text.RegularExpressions
Module Extensions

    <System.Runtime.CompilerServices.Extension()>
    Public Function ToEnum(Of T)(ByVal value As String) As T
        Try
            Return (CType([Enum].Parse(GetType(T), value.Replace(" ", ""), True), T))
        Catch ex As Exception
            Return (CType([Enum].Parse(GetType(T), 0, True), T))
        End Try

    End Function
End Module 
````  `* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T05:15:37.087

您需要使用 Public 关键字标记您的扩展模块。此外，请确保您的项目属性在您的消费项目中列出您的库项目作为参考；仅仅出现在对象浏览器中并不意味着您已经正确设置了引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T05:25:27.237

The following console application code is perhaps nonsensical, but leverages your exact code above with the exception that I made your module `Public` versus the default of `Friend`.

In my solution, `ClassLibrary3` is the VB class library project and included as a reference in the console application project.

```
Imports ClassLibrary3.Extensions

Module Module1

    Sub Main()
        Dim f As String = "hello"

        Console.WriteLine(f.ToEnum(Of System.ConsoleColor)())
    End Sub

End Module 
````

# php - 创建一个单独的文件以使用 php 连接到 mysql

> ID：12224936
> 
> 赞同：0
> 
> 时间：2012-09-01T04:38:49.770
> 
> 标签：php, database

当用户第一次注册或登录时，我想为我的 php 应用程序使用单个文件连接到数据库

什么是代码与下面的相同是好的：

```
$username="root";
$password="root";
$database="test";

    function Save($name)
    {
        global $username;
        global $password;
        global $database;

        $link = mysql_connect('localhost', $username, $password);
        if (!$link) {
            die('Could not connect: ' . mysql_error());
        }
        @mysql_select_db($database) or die( "Unable to select database");
        $query = "INSERT INTO test (name)" .
                 "VALUES ('" . $name . "')";
        mysql_query($query);
        mysql_close();
    } 
```

另外，我怎样才能满足该文件的要求？它应该位于应用程序文件夹的根目录中，但我应该在 require '/filename.php' 之后先反斜杠，还是应该先放双点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T04:44:50.623

如果文件在同一目录中，您可以简单地使用：`include_once "db.php";`

如果它在父目录中（即上一级），则使用： `include_once "../db.php";`

另一种方法是在全局 DOCUMENT_ROOT 中附加文件名（就像其他人在下面给出的示例一样）。

而且，避免使用 mysql_* 函数。请改用 PDO 或 mysqli。

祝你好运。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T04:42:03.870

您的问题本质上归结为“我如何在任何地方包含根目录中的文件”。嗯，有两个答案。

第一个答案是只使用`inlude($_SERVER['DOCUMENT_ROOT']."/connect.php");`，但是要输入很多内容，尤其是在包含很多内容的情况下。

就我个人而言，我喜欢以`chdir($_SERVER['DOCUMENT_ROOT']);`Then 开始我的脚本，我不必再担心我在哪里 - 我将永远在根文件夹中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T04:42:52.700

1.  `save`如果每个请求都会有很多这样的调用，那么在 every 上打开 mysql 连接可能并不好。
2.  `inlude($_SERVER['DOCUMENT_ROOT'] . '/db.php');`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T04:45:08.017

几点评论：首先，如果您不需要在其他地方使用密码和用户名和数据库，您应该在函数中定义它们。

其次，如果我没记错的话，如果你把“/”放在路径前面，它将把你一直带到文件系统的根目录，我猜这个用户将无权访问。话虽如此，我会使用“..”来向上导航层次结构。所以使用： require_once("../path/to/file.php")

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-01T04:47:30.880

与其将包含文件放在文档根目录中，不如为常见的包含文件创建一个目录，并将其添加`include_path`到`php.ini`. 然后你就可以做`include 'connect.php';`。

# java - 所有java包都可以在android编程中使用吗？

> ID：12224950
> 
> 赞同：2
> 
> 时间：2012-09-01T04:43:08.487
> 
> 标签：java, android

我想知道我是否可以将我在编程中使用的 java 包用于 android 编程。

# .htaccess - .htaccess 将完整 URL 作为 $_GET 传递到其他 PHP 链接

> ID：12224953
> 
> 赞同：0
> 
> 时间：2012-09-01T04:44:05.770
> 
> 标签：.htaccess

从`.htacces`文件中，如何将完整 URL 作为 GET 变量传递/重定向到另一个 URL？

喜欢：

```
http://www.test.com/foo/bar.asp 
```

将被重定向到：

```
http://www.newsite.com/?url=http://www.test.com/foo/bar.asp 
```

带有**带域的完整网址**。
我试过了：

```
RewriteEngine on
RedirectMatch 301 ^/(.*)\.asp http://www.newsite.com/?url=%{REQUEST_URI} 
```

但它会像这样：

```
http://www.newsite.com/?url=?%{REQUEST_URI} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T04:52:49.590

```
RewriteEngine on
RedirectMatch 301 ^/(.*)\.asp http://www.newsite.com/?url=$1.asp 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-01T05:11:22.807

如果初始域和协议始终相同，那么您可以使用

```
RedirectMatch 301 ^/(.*)\.asp http://www.newsite.com/?url=http%3A%2F%2Fwww.test.com%2F$1\.asp 
```

# r - 使用 Rcpp 从 C++ 调用 R 函数

> ID：12224954
> 
> 赞同：3
> 
> 时间：2012-09-01T04:44:21.370
> 
> 标签：r, inline, rcpp

我正在自学 Rcpp 并注意到 Rcpp 糖没有示例功能。所以我决定从 C++ 调用基础库中的示例函数。我有两个问题：

1.关于参数prob的类型，我应该使用NumericVector吗？使用矢量类型是否合法？

2\. 关于输出的类型，我应该使用 IntegerVector 吗？使用 NumericVector 类型是否合法？

似乎所有这些类型都很好（参见下面的代码），但我想知道哪种类型更好用。

```
<!-- language-all: lang-html -->
library(inline)
library(Rcpp)

src1 <- '
   RNGScope scope;

  NumericVector thenum(1),myprob(3);

  myprob[0]=0.1;
  myprob[1]=0.5;
  myprob[2]=0.4;

  Environment base("package:base");
  Function sample = base["sample"];

  thenum = sample(3,Named("size",1),Named("prob",myprob));

  return wrap(thenum);
'

src2 <- '
  RNGScope scope;

  IntegerVector theint(1);
  vector<double> myprob(3);
    myprob[0]=0.1;
  myprob[1]=0.5;
  myprob[2]=0.4;
  Environment base("package:base");
  Function sample = base["sample"];

  theint = sample(3,Named("size",1),Named("prob",myprob));

  return wrap(theint);
'

fun1 <- cxxfunction(signature(),body=src1,plugin="Rcpp")
fun2 <- cxxfunction(signature(),body=src2,include='using namespace std;',plugin="Rcpp")

fun1() ## work!
fun2() ## oh this works too! 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T15:17:00.657

因为您是`sample()`从 R 调用的，所以整数和数字都*像在 R 本身中一样*工作：

```
R> set.seed(42); sample(seq(1L, 5L), 5, replace=TRUE)
[1] 5 5 2 5 4
R> set.seed(42); sample(seq(1.0, 5.0), 5, replace=TRUE)
[1] 5 5 2 5 4
R> 
```

# javascript - 获取当前网页 URL

> ID：12224957
> 
> 赞同：0
> 
> 时间：2012-09-01T04:45:05.147
> 
> 标签：javascript, web

> **可能重复：**
> [Javascript 中的请求地址](https://stackoverflow.com/questions/1029387/request-address-in-javascript)

我在我的网页中使用 Facebook 插件，如图所示：

```
<iframe 
   src="http://www.facebook.com/plugins/like.php?href=YOUR_URL"
   scrolling="no" 
   frameborder="0"
   style="border:none; width:120px; height:30px">
</iframe> 
```

如何使用 JavaScript 获取网页的当前 URL？我需要分配当前 URL 而不是`href=YOUR_URL`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T04:48:36.313

只是不要输入`href`参数。Facebook 将默认为当前页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T04:50:56.443

用这个：

```
window.location.href (or simply location.href) 
```

location.href 的[定义](http://www.w3schools.com/jsref/prop_loc_href.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T04:53:22.460

jQuery 是你的朋友：

```
var original = $("iframe").attr('src');
var url = window.location;
$("iframe").attr('src', original + url);​ 
```

HTML

```
<iframe src="http://www.facebook.com/plugins/like.php?href="></iframe>​ 
```

[http://jsfiddle.net/charlescarver/2JEay/](http://jsfiddle.net/charlescarver/2JEay/)

# perforce - Perforce 命令“P4 更改”如何工作

> ID：12224959
> 
> 赞同：2
> 
> 时间：2012-09-01T04:45:30.343
> 
> 标签：perforce, changelist

我正在开发一个应该与 Perforce 集成的应用程序。在基本 Perforce 命令的学习阶段，我有一个关于“p4 更改”如何工作的问题。一旦更改列表被提交，比如说，影响文件

> 1.  '//仓库/Web/content/main.css'
> 2.  '//仓库/工具/app/init.py'

如果我们现在发出命令：

> 'p4 更改 //depot/Web/...'

然后更改列表将显示在结果中。那么 Perforce 是如何管理这些信息的呢？它会分解路径并存储吗？或者它是否进行在线子字符串查询？

我看到 Perforce 数据库模式中有一个字段“公共路径”，在这种情况下，值应该是：

> '//仓库/...'

那么在这种情况下，Perforce 是如何获取信息的呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T14:47:46.330

对于每个更改，Perforce 服务器都会记录哪些文件受到该更改的影响。

这是记录在服务器数据库中的有关更改列表的许多元数据之一。

该信息被诸如“p4 describe”之类的命令用来查找正确的文件集。

Perforce 服务器包含一个复杂的模式匹配引擎，它可以快速搜索数据库以定位影响特定文件集的更改集，如文件模式所述。

这是服务器的核心操作，因此针对此行为进行了高度优化。

# concurrency - 练习：Web Crawler - 并发不起作用

> ID：12224962
> 
> 赞同：3
> 
> 时间：2012-09-01T04:46:11.603
> 
> 标签：concurrency, go

我正在浏览 golang 并进行最后的练习，以将网络爬虫更改为并行爬取而不是重复爬取 ( [http://tour.golang.org/#73](http://tour.golang.org/#73) )。我改变的只是抓取功能。

```
 var used = make(map[string]bool)

    func Crawl(url string, depth int, fetcher Fetcher) {
        if depth <= 0 {
            return
        }
        body, urls, err := fetcher.Fetch(url)
        if err != nil {
            fmt.Println(err)
            return
        }
        fmt.Printf("\nfound: %s %q\n\n", url, body)
        for _,u := range urls {
            if used[u] == false {
                used[u] = true
                Crawl(u, depth-1, fetcher)
            }
        }
        return
    } 
```

为了使其并发，我在调用 Crawl 函数之前添加了 go 命令，但程序没有递归调用 Crawl 函数，只找到“ [http://golang.org/](http://golang.org/) ”页面而没有其他页面。

为什么我在函数 Crawl 的调用中添加 go 命令时程序不起作用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-03T15:09:22.453

问题似乎是，在爬虫可以跟踪所有 URL 之前，您的进程正在退出。由于并发性，该`main()`过程在工作人员完成之前退出。

为了避免这种情况，您可以使用[`sync.WaitGroup`](http://golang.org/pkg/sync/#WaitGroup)：

```
func Crawl(url string, depth int, fetcher Fetcher, wg *sync.WaitGroup) {
    defer wg.Done()
    if depth <= 0 {
         return
    }
    body, urls, err := fetcher.Fetch(url)
    if err != nil {
        fmt.Println(err)
        return
    }
    fmt.Printf("\nfound: %s %q\n\n", url, body)
    for _,u := range urls {
        if used[u] == false {
           used[u] = true
           wg.Add(1)
           go Crawl(u, depth-1, fetcher, wg)
        }
    }
    return
} 
```

`Crawl`并调用`main`如下：

```
func main() {
    wg := &sync.WaitGroup{}

    Crawl("http://golang.org/", 4, fetcher, wg)

    wg.Wait()
} 
```

另外，[不要依赖 map 是线程安全的](http://golang.org/doc/go_faq.html#atomic_maps)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-23T07:55:37.360

这是一种方法，再次使用[sync.WaitGroup](http://golang.org/pkg/sync/#WaitGroup)但将 fetch 函数包装在匿名 goroutine 中。为了使 url map 线程安全（意味着并行线程不能同时访问和更改值），应该将 url map 包装在一种新类型中，其中包含[sync.Mutex](https://golang.org/pkg/sync/#Mutex)类型，即`fetchedUrls`我示例中的类型，并使用`Lock`and`Unlock`搜索/更新地图时的方法。

```
type fetchedUrls struct {
    urls map[string]bool
    mux sync.Mutex
}

// Crawl uses fetcher to recursively crawl
// pages starting with url, to a maximum of depth.
func Crawl(url string, depth int, fetcher Fetcher, used fetchedUrls, wg *sync.WaitGroup) {
    if depth <= 0 {
        return
    }
    used.mux.Lock()
    if used.urls[url] == false {
        used.urls[url] = true
        wg.Add(1)
        go func() {
            defer wg.Done()
            body, urls, err := fetcher.Fetch(url)
            if err != nil {
                fmt.Println(err)
                return
            }
            fmt.Printf("found: %s %q\n", url, body)
            for _, u := range urls {
                Crawl(u, depth-1, fetcher, used, wg)
            }
            return
        }()
    }
    used.mux.Unlock()
    return
}

func main() {
    wg := &sync.WaitGroup{}
    used := fetchedUrls{urls: make(map[string]bool)}
    Crawl("https://golang.org/", 4, fetcher, used, wg)
    wg.Wait()
} 
```

输出：

```
found: https://golang.org/ "The Go Programming Language"
not found: https://golang.org/cmd/
found: https://golang.org/pkg/ "Packages"
found: https://golang.org/pkg/os/ "Package os"
found: https://golang.org/pkg/fmt/ "Package fmt"

Program exited. 
```

# ruby - 如何获得按字母顺序排列的下一个 unicode 字符？

> ID：12224963
> 
> 赞同：2
> 
> 时间：2012-09-01T04:46:13.430
> 
> 标签：ruby, string, unicode, character-encoding, alphabetical

如何在给定字符之后按字母顺序输入 Ruby 1.8.7 unicode 字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T05:30:15.930

如果您的意思是“代码页中的下一个”，那么您可以随时修改字节并找出答案。如果您按顺序浏览代码页，您可能最终会陷入没有指定字符的漏洞。如果您可以想象这样的术语，这将意味着“Unicode-abetically”。

如果您的意思是“按字母顺序”，那么您就不走运了，因为这没有任何意义。字母顺序的概念因一种语言而异，有时甚至是特定于上下文的。有些语言甚至根本没有对其字符的固定顺序。这就是为什么某些系统除了*编码之外还有**排序规则*的原因。排序规则定义了顺序，但出于排序的目的，许多字母通常被认为是等价的，这使事情变得更加复杂。

 *Ruby 1.8.7 通常也不了解 Unicode，并假装一切都是 8 位 ASCII 字符串和一个字节字符。Ruby 1.9 可以将多字节 UTF-8 解析为单独的字符，这可能会使这个练习变得更容易。*

# android - Android SQLite 插入或替换

> ID：12224964
> 
> 赞同：9
> 
> 时间：2012-09-01T04:46:46.097
> 
> 标签：android, sqlite, insert

我正在尝试 SQLite 中的 INSERT OR REPLACE 语法，但到目前为止没有成功，因为没有插入任何行。

我的创建表查询是

```
 create table providers (provider_id text not null, provider_name text not null,  provider_channel_id text not null, channel_name text not null);CREATE UNIQUE INDEX channel_id ON providers (provider_channel_id); 
```

我的 INSERT OR Replace 查询是

```
INSERT OR REPLACE INTO providers (provider_channel_id, channel_name, provider_id, provider_name) VALUES ('1', '2', '3', '4') 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-05-03T13:25:39.250

我找到的解决方案 .replace 而不是 insert 你还应该在表中有一个行 ID 并将其设置为 PRIMARY KEY

```
 bdd.replace(table,null, contentValues); 
```

# javascript - 带有 KendoUI 组件的 Javascript 变量范围

> ID：12224969
> 
> 赞同：0
> 
> 时间：2012-09-01T04:48:34.503
> 
> 标签：javascript, scope, kendo-ui

我正在尝试从 Kendo AutoComplete 组件中捕获文本并将其保存到一个变量中，以便以后在其他组件中使用。代码如下，我在[jsbin.com](http://jsbin.com/agopuz/10/edit)有一个代码链接。注意：代码 jsbin.com 在 IE9 中对我不起作用，Firefox 和 Chrome 可以正常工作。

当在 autoComplete 控件中进行选择时，我附加了我的 onSelect 函数。然后我将 dataItem 分配给我的变量“selectedGeoname”。我成功地将对象的文本属性写入屏幕上的元素，并使用警报确认 selectedGeoname 已由对象填充。

但是，当我稍后尝试使用该变量将值传递给另一个组件时，该变量为空。我实例化了这两个组件并在 $(document)ready 中声明了变量。我不得不相信这完全是范围，所以也许你们中的一个 javascript 向导可以帮助可怜的老 .Net 家伙修复此代码。

谢谢，

格雷格

```
HTML as follows:

<!DOCTYPE html>

<html>  
  <head>
    <link href="http://cdn.kendostatic.com/2012.2.710/styles/kendo.common.min.css"
    rel="stylesheet" type="text/css" />
    <link href="http://cdn.kendostatic.com/2012.2.710/styles/kendo.default.min.css"
    rel="stylesheet" type="text/css" />
    <link href="http://cdn.kendostatic.com/2012.2.710/styles/kendo.dataviz.min.css"
    rel="stylesheet" type="text/css" />
    <link href="http://cdn.kendostatic.com/2012.2.710/styles/kendo.mobile.all.min.css"
    rel="stylesheet" type="text/css" />
    <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    <script src="http://cdn.kendostatic.com/2012.2.710/js/kendo.all.min.js"></script>
    <title></title>
  </head>

  <body>
    <p>
      <label for="customer">Choose a customer:</label>
      <input id="customer" />
      <div id="result"></div>
    </p>
    <p>
      <label for="stores">Choose a store:</label>
      <input id="stores" />
    </p>
    <script type="text/javascript">
      $(document).ready(function () {

        $("#customer").kendoAutoComplete({
          dataTextField: "name",
          dataSource: {
            serverFiltering: true,
            transport: {
              read: {
                url: "http://ws.geonames.org/searchJSON",
                dataType: "json",
                data: {
                  featureClass: "P",
                  style: "full",
                  maxRows: 12,
                  name_startsWith: function () {
                    return $("#customer").val();
                  }
                }
              }
            },
            schema: {
              data: "geonames"
            }
          },
          filter: "startswith",
          placeholder: "Select Customer...",
          height: 500,
          suggest: true,
          select: onSelect
        });

        var selectedGeoname;

        function onSelect(e) {
          var dataItem = this.dataItem(e.item.index());
          selectedGeoname = dataItem;

          //output
          $("#result").html(selectedGeoname.name);
          alert(selectedGeoname);
        }

        $("#stores").kendoDropDownList({
          autoBind: false,
          enable: true,
          dataTextField: "StoreName",
          dataValueField: "StoreId",
          dataSource: {
            serverFiltering: true,
            transport: {
              read: {
                url: '@Url.Action("JsonGetStores", "Home")',
                data: {
                  customer: selectedGeoname
                }
              }
            }
          }
        });

      });
    </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T12:40:37.140

您可以将此代码用作您的 onSelect 来实现此目的：

```
 function onSelect(e) {

        selectedGeoname = this.value();

      //output
        $("#result").html(selectedGeoname.name);
        alert(selectedGeoname);
    } 
```

当从 AutoComplete 对象的上下文中调用时，`this.value()`可用于获取 AC 输入元素的值。

如果您需要访问范围之外的变量的当前值，您可以使用此方法： `$("#customer").data("kendoAutoComplete").value()`.

希望这可以帮助！

# iphone - 无法构建 xcode4.3，因为获取命令失败，退出代码为 1

> ID：12224971
> 
> 赞同：2
> 
> 时间：2012-09-01T04:48:41.087
> 
> 标签：iphone, ios, xcode4.3, cordova, phonegap-plugins

我也是开发 iphone 和 phonegap 的新手。现在我想使用**Phonegap**创建 iphone 应用程序。所以我在我的 lion mac 上安装了**Phonegap 2.0 。**现在我想使用 phonegap运行**UIWebView 。**我已按照此链接获取[我的指南](http://docs.phonegap.com/en/2.0.0/guide_cordova-webview_ios.md.html)：

当我运行该项目时，我在 XCode 4.3 中收到以下错误：

```
clang: error: unsupported option '--DNS_BLOCK_ASSERTIONS=1'
Command/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1 
```

我附上了错误的屏幕截图。

![在此处输入图像描述](../Images/4242010f58c1b0d8cc95d22837a3d09b.png)

![在此处输入图像描述](../Images/9871b62dea32406d1a0f8b80f633c7e2.png)

请帮我解决问题并在 phonegap 2.0 CordovaLib 中运行 UIWebview。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T08:00:02.190

错误是

```
clang: error: unsupported option '--DNS_BLOCK_ASSERTIONS=1' 
```

应该是`-DNS_BLOCK_ASSERTIONS=1`

转到构建设置，搜索“其他 c 标志”/“其他 c++ 标志”，然后更改`--DNS_BLOCK_ASSERTIONS=1`为`-DNS_BLOCK_ASSERTIONS=1`

# javascript - 循环重叠图像

> ID：12224972
> 
> 赞同：0
> 
> 时间：2012-09-01T04:48:41.567
> 
> 标签：javascript, image, css-float, alignment

我是 JavaScript 的新手。我有一个函数应该循环相同的图像和文本 26 次。并像多段图像和文本一样显示它们。然而，我的循环与文本和图像重叠，如下所示。![我不想要的格式](../Images/9ffecb333f6a95fcbd3c1348a85de7cc.png)

我希望我的代码显示如下所示的图像。![我要显示的格式。](../Images/078edc74533b3b807d9d2c84ca878900.png)

我怎样才能解决这个问题？我的 JavaScript 代码看起来像这样

```
function getData() {
  var stringData = '';

  for (i = 0; i < 26; i++) {
    stringData = stringData + '<div><image src="img/sample-image.png" width="10% "height="10%" align="left" border="0"/>' + 'In this example a sample of the album photo on the site shall appear alongside a simple description of the album. To view the album select the album.</div><br/>';
  }

  document.getElementById("list-menu").innerHTML = '' + stringData + '';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T04:54:52.397

只需添加[两个`<br />`s 就可以了。](http://jsfiddle.net/WmneH/)，除此之外，请尝试[`clear: both`在您的 div CSS](http://jsfiddle.net/WmneH/1/)中。

# python - 国际象棋游戏的开始/设置被破坏

> ID：12224974
> 
> 赞同：0
> 
> 时间：2012-09-01T04:49:35.440
> 
> 标签：python

我花了很长时间试图弄清楚这个问题，我需要一双新的眼睛和一个更了解python的人。

我开始实现一个国际象棋游戏来帮助我学习python，而我基本上只实现了移动棋子和显示棋盘。这是问题：

- 当我将任何顶级玩家的棋子向前移动 1 或 2 个空格时，一切都很好。

- 当我将任何底部玩家的棋子向前移动 2 个空格时，一切都很好。

- 当我将任何底部玩家的棋子向前移动 1 个空间时，一切都会出错。在显示屏上，新位置的整行变成了棋子，但在打印结果后，所有空位现在都“属于”底部玩家（它们应该不属于任何人，0）。

我试过用相同的结果测试不同的列。

这是该问题的说明：

设置

```
1 [R][k][B][K][Q][B][k][R]
2 [P][P][P][P][P][P][P][P]
3 [ ][ ][ ][ ][ ][ ][ ][ ]
4 [ ][ ][ ][ ][ ][ ][ ][ ]
5 [ ][ ][ ][ ][ ][ ][ ][ ]
6 [ ][ ][ ][ ][ ][ ][ ][ ]
7 [P][P][P][P][P][P][P][P]
8 [R][k][B][K][Q][B][k][R]
   a  b  c  d  e  f  g  h 
```

好的

```
Enter a move [r0,c0,r1,s1]: [2,a,3,a]

1 [R][k][B][K][Q][B][k][R]
2 [ ][P][P][P][P][P][P][P]
3 [P][ ][ ][ ][ ][ ][ ][ ]
4 [ ][ ][ ][ ][ ][ ][ ][ ]
5 [ ][ ][ ][ ][ ][ ][ ][ ]
6 [ ][ ][ ][ ][ ][ ][ ][ ]
7 [P][P][P][P][P][P][P][P]
8 [R][k][B][K][Q][B][k][R]
   a  b  c  d  e  f  g  h 
```

好的

```
Enter a move [r0,c0,r1,s1]: [2,a,4,a]

1 [R][k][B][K][Q][B][k][R]
2 [ ][P][P][P][P][P][P][P]
3 [ ][ ][ ][ ][ ][ ][ ][ ]
4 [P][ ][ ][ ][ ][ ][ ][ ]
5 [ ][ ][ ][ ][ ][ ][ ][ ]
6 [ ][ ][ ][ ][ ][ ][ ][ ]
7 [P][P][P][P][P][P][P][P]
8 [R][k][B][K][Q][B][k][R]
   a  b  c  d  e  f  g  h 
```

好的

```
Enter a move [r0,c0,r1,s1]: [7,a,5,a]

1 [R][k][B][K][Q][B][k][R]
2 [P][P][P][P][P][P][P][P]
3 [ ][ ][ ][ ][ ][ ][ ][ ]
4 [ ][ ][ ][ ][ ][ ][ ][ ]
5 [P][ ][ ][ ][ ][ ][ ][ ]
6 [ ][ ][ ][ ][ ][ ][ ][ ]
7 [ ][P][P][P][P][P][P][P]
8 [R][k][B][K][Q][B][k][R]
   a  b  c  d  e  f  g  h 
```

？？不好？？- （移动后，所有'blank'空格都属于底部玩家，并且第6行（如下图）的所有类型变量都设置为pawn）

```
Enter a move [r0,c0,r1,s1]: [7,a,6,a]

1 [R][k][B][K][Q][B][k][R]
2 [P][P][P][P][P][P][P][P]
3 [ ][ ][ ][ ][ ][ ][ ][ ]
4 [ ][ ][ ][ ][ ][ ][ ][ ]
5 [ ][ ][ ][ ][ ][ ][ ][ ]
6 [P][P][P][P][P][P][P][P]
7 [ ][P][P][P][P][P][P][P]
8 [R][k][B][K][Q][B][k][R]
   a  b  c  d  e  f  g  h 
```

和代码：

```
#!/usr/bin/python

import sys

# This is easy to solve with a simple tiny wrapper:
class Callable:
    def __init__(self, anycallable):
        self.__call__ = anycallable

class Piece:
    Arr_Slot = 0
    Row = 0
    Col = 0
    Sym = "[ ]"
    Id = ""
    Player = 0
    def __init__(self, row, col, player):
        self.Row = row
        self.Col = col
        self.Player = player
        self.Arr_Slot = self.Arr_Slot + 1

class Blank(Piece):
    Sym = "[ ]"
    Id  = "Blank"
    Row = 0
    Col = 0
    def __init__(self,row,col):
        self.Row = row
        self.Col = col

class King(Piece):
    Sym = "[K]"
    Id = "King"

class Queen(Piece):
    Sym = "[Q]"
    Id = "Queen"

class Rook(Piece):
    Sym = "[R]"
    Id = "Queen"

class Bishop(Piece):
    Sym = "[B]"
    Id = "Bishop"

class Knight(Piece):
    Sym = "[k]"
    Id = "Knight"

class Pawn(Piece):
    Sym = "[P]"
    Id = "Pawn"
    def TryMove(board,row0,col0,row1,col1):
        type = board.Board[row0][col0].Id
        player = board.Board[row0][col0].Player

    if player == 1:
        if (row1 == (row0+1) or ((row1 == (row0+2)) and row0 == 1)) and (col0 == col1):
            if board.Board[row1][col1].Player != player:
                board.Board[row1][col1].Sym = board.Board[row0][col0].Sym
                board.Board[row1][col1].Id  = board.Board[row0][col0].Id
                board.Board[row1][col1].Player = board.Board[row0][col0].Player
                board.MakeBlank(row0,col0)
                return 1
            else:
                print "Error: Spot taken by same player"
                return 0
        else:
            print "Error: Illegal move"
            return 0
    elif player == 2:
        if (row1 == (row0-1) or ((row1 == (row0-2)) and row0 == 6)) and (col0 == col1):
            if board.Board[row1][col1].Player != player:
                board.Board[row1][col1].Sym = board.Board[row0][col0].Sym
                board.Board[row1][col1].Id  = board.Board[row0][col0].Id
                board.Board[row1][col1].Player = board.Board[row0][col0].Player
                board.MakeBlank(row0,col0)
                return 1
            else:
                print "Error: Spot taken by same player"
                return 0
        else:
            print "Error: Illegal move"
            return 0
    else:
        print "Error: Don't own that spot"
    TryMove = Callable(TryMove)

class Board:
    """The game board"""
    Board_Dims = 8
    Arr_Slot = 0
    Board = []
    def __init__(self):
        self.Board = [[Piece for i in range(self.Board_Dims)] for j in range(self.Board_Dims)]

    def AddPiece(self, Piece):
        self.Board[Piece.Row][Piece.Col] = Piece
        self.Board[Piece.Row][Piece.Col].Arr_Slot = self.Arr_Slot
        self.Arr_Slot = self.Arr_Slot + 1
    def MakeBlank(self,row,col):
        self.Board[row][col].Sym = "[ ]"
        self.Board[row][col].Id = "Blank"
        self.Board[row][col].Player = 0
    def PrintBoard(self):
        sys.stdout.write("\n")
        for i in range(self.Board_Dims):
            sys.stdout.write(str(i+1) + " ")
            for j in range(self.Board_Dims):
                sys.stdout.write(self.Board[i][j].Sym)
            sys.stdout.write("\n")
        sys.stdout.write("   a  b  c  d  e  f  g  h\n")
    def TryMove(self, row0, col0, row1, col1):
        type = self.Board[row0][col0].Id
        player = self.Board[row0][col0].Player
        if type == "Blank":
            print "Error: No piece there"
            return 0
        if type == "Pawn":
            return Pawn.TryMove(self,row0,col0,row1,col1)

GameBoard = Board()

GameBoard.AddPiece(King(0,3,1))
GameBoard.AddPiece(Queen(0,4,1))
GameBoard.AddPiece(Rook(0,0,1))
GameBoard.AddPiece(Rook(0,7,1))
GameBoard.AddPiece(Knight(0,1,1))
GameBoard.AddPiece(Knight(0,6,1))
GameBoard.AddPiece(Bishop(0,2,1))
GameBoard.AddPiece(Bishop(0,5,1))
for i in range(GameBoard.Board_Dims):
GameBoard.AddPiece(Pawn(1,i,1))

GameBoard.AddPiece(King(7,3,2))
GameBoard.AddPiece(Queen(7,4,2))
GameBoard.AddPiece(Rook(7,0,2))
GameBoard.AddPiece(Rook(7,7,2))
GameBoard.AddPiece(Knight(7,1,2))
GameBoard.AddPiece(Knight(7,6,2))
GameBoard.AddPiece(Bishop(7,2,2))
GameBoard.AddPiece(Bishop(7,5,2))

for j in range(GameBoard.Board_Dims):
GameBoard.AddPiece(Pawn(6,j,2))

for i in range(2,5):
for j in range(GameBoard.Board_Dims):
    GameBoard.AddPiece(Blank(i,j))

GameBoard.PrintBoard()
result = 1
while 1:
inp = raw_input("Enter a move [r0,c0,r1,s1]: ")
r1 = int(inp[1])-1
c1 = int(ord(inp[3]))-97
r2 = int(inp[5])-1
c2 = int(ord(inp[7]))-97
result = GameBoard.TryMove(r1,c1,r2,c2)
if result == 0:
    print "ERROR: TRY AGAIN"
print GameBoard.Board[3][3].Player
print GameBoard.Board[3][3].Sym
GameBoard.PrintBoard() 
```

注释掉这些行：

```
board.Board[row1][col1].Sym = board.Board[row0][col0].Sym
board.Board[row1][col1].Id  = board.Board[row0][col0].Id
board.Board[row1][col1].Player = board.Board[row0][col0].Player 
```

让它基本上什么都不做，所以我想你可以说这是问题所在，但它适用于相反的玩家，而且它是相同的代码，所以我不确定问题是否真的在这些行中.

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T06:14:54.430

我会采取完全不同的方法，而不是使用*板*来存储位置和空白*件*，我会将位置信息存储`Piece`在设置时生成的 32 s 中，并且只使用`Board`类来存储其上的件列表并执行`Board.draw()`

例如类似的东西：

```
class Piece(object):
    symbol = " "
    name = None
    def __init__(self, side, col, row):
        self.side = side
        self.col = col
        self.row = row

class Pawn(Piece):
    symbol = "P"
    name = "Pawn"
    def __init__(self, side, col):
        if side == "white":
            row = 2
        else:
            row = 7
        super(Pawn, self).__init__(self, side, col, row) 
    def move(col, row):
        if self.check_if_move_is_valid(col, row):
            self.col = col
            self.row = row

... same for other pieces...

class Board(object):
    def __init__(self):
        self.pieces = list()
        for col in range(1,9):
            self.pieces.append(Pawn("white", col))
            self.pieces.append(Pawn("black", col))
        self.pieces.append(Rook("white"), 1)
        self.pieces.append(Rook("black"), 8)
        ... etc ...

    def draw():
        grid = create_empty_grid(8)
        for piece in self.pieces:
             grid[piece.row][piece.col] = piece.symbol
        for row in grid:
             print ''.join(row) 
```

# ruby - 哈希红宝石合并

> ID：12224975
> 
> 赞同：0
> 
> 时间：2012-09-01T04:49:59.233
> 
> 标签：ruby, hash

我的 txt 文件包含几行，我想将每一行添加到散列中，键为前 2 个单词，值为第 3 个单词...以下代码没有错误，但逻辑可能有误...应该是最后一行打印散列的所有键...但没有任何反应...请帮助

```
 def word_count(string)
        count = string.count(' ')
        return count
    end
    h = Hash.new

    f = File.open('sheet.txt','r')
    f.each_line do |line|
        count = word_count(line)
        if count == 3
            a = line.split
            h.merge(a[0]+a[1] => a[2])
        end
    end
    puts h.keys 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T05:08:25.977

[`Hash#merge`](https://ruby-doc.org/core/Hash.html#method-i-merge)不会修改您调用它的哈希值，它会返回合并的哈希值：

> **合并（其他哈希）→新哈希**
> 
> 返回包含*other_hash*内容和*hsh*内容的新哈希。[...]

注意*Returns a new hash...*部分。当你这样说时：

```
h.merge(a[0]+a[1] => a[2]) 
```

您将构建的新值合并到副本中`h`，然后丢弃合并的哈希；最终结果是`h`永远不会添加任何东西，并且在您完成所有工作后最终是空的。

你想用来[`merge!`](https://ruby-doc.org/core/Hash.html#method-i-merge-21)修改哈希：

```
h.merge!(a[0]+a[1] => a[2]) 
```

或继续使用`merge`但保存返回值：

```
h = h.merge(a[0]+a[1] => a[2]) 
```

或者，由于您只添加一个值，只需分配它：

```
h[a[0] + a[1]] = a[2] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T04:57:08.433

如果要将每行的前三个单词添加到哈希中，无论有多少单词，都可以删除该`if count == 3`行。`if count > 2`或者，如果您想确保至少有三个单词，您可以将其更改为。

此外，穆是正确的。你会想要 h.merge！

# spring - 带有身份验证的 Twitter 问题的 Spring 集成

> ID：12224979
> 
> 赞同：1
> 
> 时间：2012-09-01T04:51:30.353
> 
> 标签：spring, twitter-oauth, spring-integration

我正在尝试使用**Spring Integration with Twitter**在我的 Windows XP 机器上使用独立程序向我的 Twitter 帐户发布消息。但我收到以下错误 -

```
WARNING: POST request for "https://api.twitter.com/1/statuses/update.json" resulted in 401 (Unauthorized); invoking error handler
Exception in thread "main" org.springframework.integration.MessageHandlingException: error occurred in message handler [org.springframework.integration.twitter.outbound.StatusUpdatingMessageHandler#0]
    at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:79)
    at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:115)
    at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:102)
    at org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:77)
    at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:157)
    at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:128)
    at com.skilledmonster.spring.integration.twitter.TwitterOutbound.main(TwitterOutbound.java:20)
Caused by: org.springframework.social.RevokedAuthorizationException: The authorization has been revoked. Reason: Unknown
    at org.springframework.social.twitter.api.impl.TwitterErrorHandler.handleClientErrors(TwitterErrorHandler.java:96)
    at org.springframework.social.twitter.api.impl.TwitterErrorHandler.handleError(TwitterErrorHandler.java:58)
    at org.springframework.web.client.RestTemplate.handleResponseError(RestTemplate.java:486)
    at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:443)
    at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:415)
    at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:294)
    at org.springframework.social.twitter.api.impl.TimelineTemplate.updateStatus(TimelineTemplate.java:236)
    at org.springframework.social.twitter.api.impl.TimelineTemplate.updateStatus(TimelineTemplate.java:224)
    at org.springframework.integration.twitter.outbound.StatusUpdatingMessageHandler.handleMessageInternal(StatusUpdatingMessageHandler.java:57)
    at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:73)
    ... 6 more 
```

这是我的代码 -

**twitter-outbound.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:int="http://www.springframework.org/schema/integration"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:twitter="http://www.springframework.org/schema/integration/twitter"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/integration/twitter 
    http://www.springframework.org/schema/integration/twitter/spring-integration-twitter-2.1.xsd 
    http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
    http://www.springframework.org/schema/integration 
    http://www.springframework.org/schema/integration/spring-integration-2.1.xsd 
    http://www.springframework.org/schema/context 
    http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:component-scan
        base-package="com.apress.prospringintegration.social.twitter" />

    <context:property-placeholder location="/twitter.properties" />

    <int:channel id="twitterOutbound" />

    <twitter:outbound-channel-adapter twitter-template="twitterTemplate" channel="twitterOutbound" />

    <bean id="twitterTemplate"
        class="org.springframework.social.twitter.api.impl.TwitterTemplate">
        <constructor-arg value="${twitter.consumer-key}" />
        <constructor-arg value="${twitter.consumer-secret}" />
        <constructor-arg value="${twitter.access-token}" />
        <constructor-arg value="${twitter.access-token-secret}" />
    </bean>
</beans> 
```

**TwitterConfigurationTemplate.java**

```
package com.skilledmonster.spring.integration.twitter;

import org.springframework.beans.factory.annotation.Value;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.social.twitter.api.impl.TwitterTemplate;

@Configuration
public class TwitterConfigurationTemplate {
      @Value("${consumer-key}") 
        private String consumerKey; 

        @Value("${consumer-secret}") 
        private String consumerSecret; 

        @Value("${access-token}") 
        private String accessToken; 

        @Value("${access-token-secret}") 
        private String accessTokenSecret; 

        @Bean 
        public TwitterTemplate twitterTemplate() { 
            TwitterTemplate twitterOperations = 
                    new TwitterTemplate( 
                            consumerKey, consumerSecret, accessToken, accessTokenSecret); 
            return twitterOperations; 
        } 
} 
```

**TwitterOutbound.java**

```
package com.skilledmonster.spring.integration.twitter;

import java.util.Calendar;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
import org.springframework.integration.Message;
import org.springframework.integration.MessageChannel;
import org.springframework.integration.message.GenericMessage;

public class TwitterOutbound {

    public static void main(String[] args) {

        ApplicationContext context = new ClassPathXmlApplicationContext("/twitter-outbound.xml", TwitterOutbound.class);

        MessageChannel input = context.getBean("twitterOutbound", MessageChannel.class);

        Message<String> message = new GenericMessage<String>("Testing new Twitter samples for #springintegration"+Calendar.getInstance().getTimeInMillis());
        input.send(message);

    }

} 
```

**twitter.properties**

```
twitter.consumer-key=onj5cG1P9pe7n9qA8UI4EA 
twitter.consumer-secret=2l7hqMafKYaTkVBW3YfuBfGdzCtmICOJwjOOCEeQ 
twitter.access-token=792995125-dXmN1Pbw7sE4WttvAbX7ssxEn4lHaVd6uOX3IMxk 
twitter.access-token-secret=a1EuvvONcphdqXpfJVjCdaIBDlMZSUL5pgimWuEtg 
```

仅供参考 - 我确实使用 twitter4j 测试了我的 twitter 令牌和密钥，它似乎成功地将消息发布到 twitter。

这是我的 twitter4j 代码-

**OAuthSetup.java**

```
package com.skilledmonster.spring.integration.twitter;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.util.Calendar;

import twitter4j.Status;
import twitter4j.Twitter;
import twitter4j.TwitterException;
import twitter4j.TwitterFactory;
import twitter4j.auth.AccessToken;
import twitter4j.auth.RequestToken;
public class OAuthSetup {
  /**
   * @param args
   */
  public static void main(String args[]) throws Exception {
      // The factory instance is re-useable and thread safe.
      Twitter twitter = new TwitterFactory().getInstance();

//insert the appropriate consumer key and consumer secret here

      twitter.setOAuthConsumer("onj5cG1P9pe7n9qA8UI4EA", 
          "2l7hqMafKYaTkVBW3YfuBfGdzCtmICOJwjOOCEeQ");
      RequestToken requestToken = twitter.getOAuthRequestToken();
      AccessToken accessToken = null;
      BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
      while (null == accessToken) {
        System.out.println("Open the following URL and grant access to your account:");
        System.out.println(requestToken.getAuthorizationURL());
        System.out.print("Enter the PIN(if aviailable) or just hit enter.[PIN]:");
        String pin = br.readLine();
        try{
           if(pin.length() > 0){
             accessToken = twitter.getOAuthAccessToken(requestToken, pin);
           }else{
             accessToken = twitter.getOAuthAccessToken();
           }
        } catch (TwitterException te) {
          if(401 == te.getStatusCode()){
            System.out.println("Unable to get the access token.");
          }else{
            te.printStackTrace();
          }
        }
      }
      //persist to the accessToken for future reference.
      System.out.println(twitter.verifyCredentials().getId());
      System.out.println("token : " + accessToken.getToken());
      System.out.println("tokenSecret : " + accessToken.getTokenSecret());
      //storeAccessToken(twitter.verifyCredentials().getId() , accessToken);
      Status status = twitter.updateStatus("Testing new Twitter samples for springintegration # "+Calendar.getInstance().getTimeInMillis());
      System.out.println("Successfully updated the status to [" + status.getText() + "].");
      System.exit(0);
    }
} 
```

谁能建议我这里出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T10:52:07.870

您用于访问 Twitter 的令牌已被撤销，或者可能对您正在使用的消费者 ID/应用程序 ID 无效。

`org.springframework.social.RevokedAuthorizationException: The authorization has been revoked`

您将需要执行新的授权以获取用于您的应用程序的令牌和机密，或者，在 twitter 应用程序配置页面 (https://dev.twitter.com/apps/) 上，您可以专门为您的个人用途。这对于方便地测试应用程序而无需执行 OAuth 很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T19:43:38.577

我认为问题在于属性文件中键值中的空格:-)

这是我博客上的[完整示例。](http://www.skilledmonster.com/frameworks/spring/integration/spring-integration-with-twitter-how-to-post-tweets-to-your-twitter-account/)

# iphone - UIActionSheet 和 Twitter 用户名选择

> ID：12224981
> 
> 赞同：1
> 
> 时间：2012-09-01T04:52:37.223
> 
> 标签：iphone, objective-c, ios, twitter

我正在尝试实现一种方法，让用户从他们在 iPhone（iOS5 及更高版本）上设置的 Twitter 帐户中进行选择。我可以让用户名出现在 UIActionSheet 中，但由于某种原因，UIActionSheet 在调用该方法后需要大约 5 秒才能出现。

我想可能是因为检索 Twitter 帐户列表需要一段时间，但在我的日志中它们会立即出现，所以不是这样。

有任何想法吗？

```
- (void)TwitterSwitch {
    ACAccountStore *accountStore = [[ACAccountStore alloc] init];

// Create an account type that ensures Twitter accounts are retrieved.
    ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

    NSMutableArray *buttonsArray = [NSMutableArray array];

// Request access from the user to use their Twitter accounts.
    [accountStore requestAccessToAccountsWithType:accountType withCompletionHandler:^(BOOL granted, NSError *error) {

       // Get the list of Twitter accounts.
        NSArray *accountsArray = [accountStore accountsWithAccountType:accountType];

       NSLog(@"%@", accountsArray);

       [accountsArray enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {

           [buttonsArray addObject:((ACAccount*)obj).username];
        }];

       NSLog(@"%@", buttonsArray);

        UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:nil delegate:self cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil];
        for( NSString *title in buttonsArray)
            [actionSheet addButtonWithTitle:title];
        [actionSheet addButtonWithTitle:@"Cancel"];
        actionSheet.cancelButtonIndex = actionSheet.numberOfButtons-1;
        [actionSheet showFromTabBar:self.tabBarController.tabBar];
}]; 

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T05:44:45.720

我认为问题可能在于 requestAccessToAccountsWithType:withCompletionHandler: 可以在任意队列上调用处理程序，并且您正在显示该处理程序中的 UI 元素（操作表）。由于与 UI 的交互只能在主线程上完成，这可能是个问题。我尝试将一些代码移动到另一个方法中，并在主线程上调用它——这要快得多：

```
- (void)TwitterSwitch {
    ACAccountStore *accountStore = [[ACAccountStore alloc] init];

    // Create an account type that ensures Twitter accounts are retrieved.
    ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

    // Request access from the user to use their Twitter accounts.
    [accountStore requestAccessToAccountsWithType:accountType withCompletionHandler:^(BOOL granted, NSError *error) {

        // Get the list of Twitter accounts.
        NSArray *accountsArray = [accountStore accountsWithAccountType:accountType];

        NSLog(@"%@", accountsArray);
        [self performSelectorOnMainThread:@selector(populateSheetAndShow:) withObject:accountsArray waitUntilDone:NO];
        }];
}

-(void)populateSheetAndShow:(NSArray *) accountsArray {
    NSMutableArray *buttonsArray = [NSMutableArray array];
    [accountsArray enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {

            [buttonsArray addObject:((ACAccount*)obj).username];
        }];

        NSLog(@"%@", buttonsArray);

        UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:nil delegate:self cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil];
        for( NSString *title in buttonsArray)
            [actionSheet addButtonWithTitle:title];
        [actionSheet addButtonWithTitle:@"Cancel"];
        actionSheet.cancelButtonIndex = actionSheet.numberOfButtons-1;
        [actionSheet showInView:self.view];
} 
```

请注意，我更改了显示工作表的方式，因为在我的测试应用程序中我没有标签栏控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T05:09:07.377

您始终可以使用多线程来加速您的任务。以下是您的操作方法：

```
dispatch_queue_t twitterAccounts = dispatch_queue_create("DisplayTwitterAccounts", NULL);
    dispatch_async(twitterAccounts, ^{
        dispatch_async(dispatch_get_main_queue(), ^{
        //Your Code goes here
        });
    });
dispatch_release(twitterAccounts); 
```

注意 dispatch_async(dispatch_get_main_queue()): 这是因为 UIKit 调用只能发生在主线程中。（参考：斯坦福 CS193P 课程幻灯片）。

“DisplayTwitterAccounts”只是队列的名称，因此您可以在调试器/控制台中查找它。

# javascript - 交换对象上两个属性的值

> ID：12224987
> 
> 赞同：9
> 
> 时间：2012-09-01T04:53:03.490
> 
> 标签：javascript

我正在尝试制作一个简单的函数，它将交换相同或不同全局对象上的两个属性的值。

```
object1 = {"key 1":"value 1"};
object2 = {"key 2":"value 2"};

swapValuesInObject ("object1['key 1']","object2['key 2']",true)
// should result in:
// object1 === {"key 1":"value 2"};
// object2 === {"key 2":"value 1"}; 
```

另一个例子：

```
object1 = {"key 1":"value 1", "key 2":"value 2"};

swapValuesInObject ("object1['key 1']","object1['key 2']",1===1)
// should result in:
// object1 === {"key 1":"value 2", "key 2":"value 1"}; 
```

到目前为止，这是我能想到的，但并不多。忙于如何完成任务。

```
function swapValuesInObject(property1, property2, condition) {
    if (condition) {
        // temp assignment
        var Obj1Value = property1;

        // do the switcheroo
        array1 = array2Value;
        array2 = array1Value;
    }
    return true;
}; 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-08-11T14:17:07.470

使用 ES6 解构，您现在可以在没有临时变量的情况下进行交换。这不仅适用于交换变量值，也适用于`[a, b] = [b, a]`涉及对象属性的更复杂的表达式，如下所示`[obj.key1, obj.key2] = [obj.key2, obj.key1]`：为避免更多冗余，您需要使用交换功能：

```
function swap(obj, key1, key2) {
   [obj[key1], obj[key2]] = [obj[key2], obj[key1]];
}
swap(obj, 'key1', 'key2'); 
```

同样的想法适用于两个对象和两个键：

```
function swap(obj1, key1, obj2, key2) {
   [obj1[key1], obj2[key2]] = [obj2[key2], obj1[key1]];
}
swap(obj1, 'key1', obj2, 'key2'); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-01T05:04:07.297

我会这样做：

```
var obj1 = {
    "key1" : "value1",
    "key2" : "Value2"
};
var obj2 = {
    "key3" : "value3",
    "key4" : "Value4"
};

function swap(sourceObj, sourceKey, targetObj, targetKey) {
    var temp = sourceObj[sourceKey];
    sourceObj[sourceKey] = targetObj[targetKey];
    targetObj[targetKey] = temp;
}

swap(obj1, "key1", obj1, "key2");
swap(obj1, "key1", obj2, "key4"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-22T05:35:49.493

简单来说，

```
var obj = {
 "key1": "value1",
 "key2": "Value2" 
} 
```

将**value1**分配给**key2** & **value2**分配给**key1**

```
[obj['key1'], obj['key2']] = [obj['key2'], obj['key1']]; 
```

# php - 在准备好的语句上返回 True 或 False

> ID：12224991
> 
> 赞同：0
> 
> 时间：2012-09-01T04:53:26.400
> 
> 标签：php, mysqli

我刚开始学习 mysqli（20 分钟前），我对某些事情感到困惑。在下面的示例中，我能够将数据插入服务器。我如何使函数在成功时返回 true，在失败时返回 false。是否像替换`return true`if 语句为真和`return false`else 语句一样简单，还是比这更高级？如果我想在成功时返回真而在失败时返回假，我必须写什么？

```
function insert($firstName, $lastName) {
   if ($stmt = $mysqli->prepare("INSERT INTO CodeCall (FirstName, LastName) values (?, 

   ?)")) {

/* Bind our params */
$stmt->bind_param('ss', $firstName, $lastName);

/* Execute the prepared Statement */
$stmt->execute();

/* Echo results */
echo "Inserted {$lastName},{$firstName} into database\n";

/* Set our params for second query */
$firstName = "John";
$lastName  = "Ciacia";

/* Execute second Query */
$stmt->execute();

    return true;

/* Close the statement */
$stmt->close(); 
    }
    else {
/* Error */
return false;
    }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T06:24:28.333

当您使用 execute 方法执行 INSERT 查询（也包括 UPDATES 和 DELETES 查询）时，它在成功时返回 TRUE，在失败时返回 FALSE。所以你可以做这样的事情：

```
function insert($firstName, $lastName) {
    $stmt = $mysqli->prepare("INSERT INTO CodeCall (FirstName, LastName) values (?, ?)");

    /* Bind our params */
    $stmt->bind_param('ss', $firstName, $lastName);

    /* Execute the prepared Statement */
    if ( $stmt->execute() ) {
        /* Echo results */
        echo "Inserted {$lastName},{$firstName} into database\n";

        /* Set our params for second query */
        $firstName = "John";
        $lastName  = "Ciacia";

        /* Execute second Query */
        $stmt->execute();

        $result = true;
    } else {
        /* Error */
        $result = false;
    }

    /* Close the statement */
    $stmt->close(); 

    return $result;
} 
```

# php - 创建目录的异常

> ID：12224992
> 
> 赞同：0
> 
> 时间：2012-09-01T04:53:41.863
> 
> 标签：php, directory

我是 php 的初学者。我的问题是，我使用以下代码创建一个目录并将一些文件复制到其中（我使用了从 so 本身获取的代码）。代码工作正常创建目录并复制文件。但我收到这样的警告。

```
function copyr($source, $dest) 
{ 
    // Simple copy for a file 
    if (is_file($source)) {
        chmod($dest, 0777);
        return copy($source, $dest); 
    } 

    // Make destination directory 
    if (!is_dir($dest)) { 
        mkdir($dest); 
    }

    chmod($dest, 0777);

    // Loop through the folder 
    $dir = dir($source); 
    while (false !== $entry = $dir->read()) { 
        // Skip pointers 
        if ($entry == '.' || $entry == '..') { 
            continue; 
        } 

        // Deep copy directories 
        if ($dest !== "$source/$entry") { 
            copyr("$source/$entry", "$dest/$entry"); 
        } 
    } 

    // Clean up 
    $dir->close(); 
    return true; 
} 

copyr("agentSourcefolder", "testTemp5"); 
```

.

```
Warning: chmod() [function.chmod]: No such file or directory in /home/websiteName/public_html/php_file_upload2.php on line 9 
```

在此之后我必须从服务器获得响应，我该怎么办？我用了

```
header("Location: http://www.websiteName.com/"); 
```

但它显示以下错误

```
Warning: Cannot modify header information - headers already sent by (output started at /home/websiteName/public_html/php_file_upload2.php:9) in /home/websiteName/public_html/php_file_upload2.php on line 41 
```

如果已经创建了目录，则此代码可以正常工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T04:59:45.520

这个：

```
Warning: Cannot modify header information - headers already sent by (output started at /home/websiteName/public_html/php_file_upload2.php:9) in /home/websiteName/public_html/php_file_upload2.php on line 41 
```

是因为您在将`header('location:')`任何内容写入屏幕后通过调用。`<?php`所有这些处理都应该在将任何内容写入页面之前完成，例如回显、跳出 php 等。还要确保在开始行之前没有空格。

另一个错误可能是因为您尝试 chmod 的文件不存在或尚不存在。或者您可能需要提供 mkdir 的绝对路径。喜欢`$_SERVER['DOCUMENT_ROOT']."/path-to-new-dir/"`

# javascript - 使用 JavaScript 替换类名值

> ID：12224994
> 
> 赞同：0
> 
> 时间：2012-09-01T04:54:18.230
> 
> 标签：javascript, classname

我想用字符串替换每次出现的数字：`???`。

这是一个示例字符串：

```
<em>Chelsea</em> 1-4 Atletico Madrid 
```

如何在 JavaScript 中做到这一点？

```
 <a href="https://www.google.com/url?sa=t&amp;source=web&amp;cd=9&amp;cad=rja&amp;ved=0CFEQtwIwCA&amp;url=http%3A%2F%2Fwww.whoateallthepies.tv%2Fchelsea%2F137070%2Fsuper-cup-chelsea-1-4-atletico-madrid-falcao-on-fire-as-blues-flop-in-monaco-photos-highlights.html&amp;rct=j&amp;q=chelsea&amp;ei=1odBUImpBIWA0AWM1oC4BA&amp;usg=AFQjCNEwdCCckt15XTkHSAf2fsUnGk9IJg&amp;sig2=IOrD6hfMrviW9ods0DG2dw" class="l" onmousedown="return rwt(this,'','0','','9','AFQjCNEwdCCckt15XTkHSAf2fsUnGk9IJg','IOrD6hfMrviW9ods0DG2dw','0CFEQtwIwCA',null,event)" title="Super Cup: Chelsea 1-4 Atletico Madrid – Falcao On Fire As Blues Flop In Monaco (Photos ...">Super Cup: <em>Chelsea</em> 1-4 Atletico Madrid – Falcao On <b>...</b></a> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T04:59:38.913

所以基本上你只希望文本节点而不是 HTML 内容受到替换的影响。

不幸的是，与函数不同，没有简单的方法来获取文本节点`getElementBy*`，因此您必须手动搜索：

```
var elems = document.getElementsByTagName('*'), l = elems.length, i,
    children, m, j;
for( i=0; i<l; i++) {
  children = elems[i].childNodes;
  m = children.length;
  for( j=0; j<m; j++) {
    if( children[j].nodeType == 3) children[j].nodeValue = children[j].nodeValue.replace(/\d+/g,'???');
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T05:03:36.087

您只想将所有数字替换为`???`?

```
var text = "1-4 Atletico Madrid – Falcao On";
var replaced=text.replace(/\d/g, "???");
​alert(​replaced);​ 
```

将此作为起点，因为您只想获取文本，而不是其他 html 部分。

# asp-classic - 包含文件时，经典 ASP 调试不起作用

> ID：12224997
> 
> 赞同：0
> 
> 时间：2012-09-01T04:55:45.063
> 
> 标签：asp-classic

在我的包含文件夹中，我有文件 SqlOperations.asp

```
<% 
    Option Explicit

    Function CheckSqlConnection()
        Dim sqlConnection, connString 
        connString = "Provider=SQLOLEDB.1;Persist Security Info=False; uid=sa; pwd=123456789;Initial Catalog=UserDatabase;Data Source=lakpa-pc"
        Err.Clear
        On Error Resume Next
        SET sqlConnection = Server.CreateObject("ADODB.Connection")
        sqlConnection.Open connString

        If Err.Number <> 0 Then
            CheckSqlConnection = false
        End If

        CheckSqlConnection = sqlConnection
        On Error Goto 0
    End Function

    Function ExecuteNonQuery(sqlQuery)
        Dim checkSql, sqlCmd
        checkSql = CheckSqlConnection
        If checkSql == False Then
            Response.Write("Please check your connection string <br/>" & vbCrlf)
            Response.End
            ExecutenonQuery = False
            Exit Function
        End If
        checkSql.Execute(sqlQuery) 
        ExecuteNonQuery = True
    End Function

 %> 
```

然后当我从根文件夹中的 UserInformation.asp 调用它时

```
<!--#include file="include/SqlOperations.asp" -->
<%
    OPTION EXPLICIT

    dim fName, mName, lName,age,address,postCode,telephone, queryVal
    fName = Request.Form("fName")
    mName = Request.Form("mName")
    lName = Request.Form("lName")
    age = Request.Form("age")
    address= Request.Form("address")
    postCode = Request.Form("postCode")
    telephone = Request.Form("telephone")
    if fName <>"" then
        queryVal = "INSERT INTO UserInfo(FirstName, MiddleName, LastName, age, Address, PostCode, Telephone) VALUES('" + fName +"','" + mName+"','" + lName+"','" + age +"','" + address +"','" + postCode +"','" + telephone +"')"
        ExecuteNonQuery queryVal

    end if

 %> 
```

调试不工作。但是如果我删除包含行，那么调试就可以了，我得到了错误

```
Microsoft VBScript runtime error: Variable is undefined: 'ExecuteNonQuery 
```

我只是不明白。我是 ASP 经典的新手。谁能告诉我它发生的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T04:58:15.093

对于功能是 ASP 经典，您需要使用括号，EG，

```
ExecuteNonQuery(queryVal) 
```

应该解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T05:01:42.400

那么问题是语法，我很困惑。我使用了“If checkSql == False Then”，语法错误，它应该只有一个“=”符号。好吧，我对其进行了一些修改，现在它工作正常。这是用于将 ASP Classic 与 MSSQL 连接起来。可能会对某人有所帮助。感谢凯恩的回复：）

```
 Function CheckSqlConnection()
    Dim sqlConnection, connString 
    connString = "Provider=SQLOLEDB.1;Persist Security Info=False; uid=sa; pwd=123456789;Initial Catalog=UserDatabase;Data Source=lakpa-pc"
    Err.Clear
    On Error Resume Next
    SET sqlConnection = Server.CreateObject("ADODB.Connection")
    sqlConnection.Open connString

    If Err.Number <> 0 Then
        CheckSqlConnection = false
    End If

    set CheckSqlConnection = sqlConnection
    On Error Goto 0
End Function

Function ExecuteNonQuery(sqlQuery)
    Dim checkSql
    set  checkSql = CheckSqlConnection
    If checkSql = False Then
        Response.Write("Please check your connection string <br/>" & vbCrlf)
        Response.End
        ExecutenonQuery = False
        Exit Function
    End If
    checkSql.Execute(sqlQuery) 
    ExecuteNonQuery = True
End Function

Sub SqlConnectionClose(SqlConn)
    SqlConn.Close()
End Sub 
```

# ios - iOS Facebookk SDK 3 帖子在我的时间线上看不到朋友的帖子

> ID：12224998
> 
> 赞同：-1
> 
> 时间：2012-09-01T04:55:53.820
> 
> 标签：ios, facebook

我正在使用 Facebook SDK 3.0 从 iphone 在我的墙上发布提要。我正在使用来自 facebook SDK 示例的这段代码`Scrumptious`

```
 [FBRequestConnection
     startWithGraphPath:@"me/feed"
     parameters:self.postParams
     HTTPMethod:@"POST"
     completionHandler:^(FBRequestConnection *connection,
                         id result,
                         NSError *error) {
} 
```

并将 my 传递`postParams`给参数。它已成功发布在我的墙上，我可以看到我的帖子。但是当我的朋友上我的墙时，他们看不到我的帖子。当我使用 Facebook sdk 发布任何内容时，我需要它，我的朋友能够看到我的帖子。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T01:37:50.097

您需要在 Facebook 中更改您的应用设置

首先你去账户设置 -> 应用程序 -> 选择你的应用程序 -> 编辑 -> 你名字的出版物：谁可以在你的 Facebook 传记中看到你创建的这个应用程序出版物？

然后你把它改成朋友或一切或你想要的

# android - 我想创建一个可以阻止安卓手机中不需要的电话的应用程序？

> ID：12224999
> 
> 赞同：1
> 
> 时间：2012-09-01T04:56:21.070
> 
> 标签：android

是否可以创建一个应用程序来阻止安卓手机中不需要的电话？像 [这样](https://play.google.com/store/apps/details?id=com.netqin.mm&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5uZXRxaW4ubW0iXQ..)

任何特定的 API 和指南

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T06:02:23.597

buddy goto [Link](https://stackoverflow.com/a/9904826/1218762)，在这里您将了解如何阻止来电。只需按照我的代码。