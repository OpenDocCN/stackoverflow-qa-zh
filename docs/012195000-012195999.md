# StackOverflow 问答 12195000-12195999

# linux - 创建静态库时嵌入所有外部引用

> ID：12195000
> 
> 赞同：0
> 
> 时间：2012-08-30T10:38:41.933
> 
> 标签：linux, gcc, shared-libraries, static-libraries, ld

我需要为包装我的 C++ 库的 C 代码创建一个包装库。有没有办法以这样的方式创建该包装器库，即用户只需要链接这个包装器库，而不必在链接器命令行上包含所有（C++）库？

我的测试项目的结构如下所示：

```
.
├── lib
│   ├── cpp
│   │   ├── print.cc
│   │   └── print.h
│   ├── lib.cc
│   ├── lib.h
└── main.c 
```

main.c 是一个使用我的库的示例 C 应用程序。lib.h 和 lib.cc 文件是包含 C 绑定的包装库。我的 C++ 库位于 cpp 子文件夹中。

目前，我通过使用以下命令链使其工作：

```
cd lib
g++ -c lib.cc
ar rcs libib.a lib.o
cd ..
gcc -Ilib -Llib main.c -lib -lstdc++ 
```

但是，正如您所见，用户的链接器步骤需要包含我的 C++ 库中使用的 C++ 库。在这种情况下，libstdc++.so（如果使用 -static，则为 libstdc++.a）。

我想在我的 libib.a 中包含所有 C++ 库，以便用户可以简单地使用以下命令进行编译：

```
gcc -Ilib -Llib main.c -lib 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T12:52:33.500

在 Linux 上，共享库也可以通过链接其中的其他共享库来创建。所以你可以

1.  将所有源代码（包括 C 包装代码）编译`-fPIC`成`*.pic.o`文件
2.  将所有这些文件合并到链接所需库的共享库中，例如

    `g++ -shared *.pic.o -o libmy.so -lQt -lrt -lstdc++`

然后你可以简单地使用你的`libmy.so`as`gcc main.o -L. -lmy`这将链接其他库。

例如在[Parma Polyhedra Library](http://bugseng.com/products/ppl/)，它有一个`libppl_c.so`用 C 语言包装的`libppl.so`C++ 语言。用于`ldd`列出依赖库：

```
 % ldd /usr/lib/x86_64-linux-gnu/libppl_c.so.4
linux-vdso.so.1 =>  (0x00007fffa17cf000)
libppl.so.9 => /usr/local/lib/libppl.so.9 (0x00007fcfec5f1000)
libpwl.so.5 => /usr/local/lib/libpwl.so.5 (0x00007fcfec3ed000)
libgmpxx.so.4 => /usr/lib/x86_64-linux-gnu/libgmpxx.so.4 (0x00007fcfec1c5000)
libgmp.so.10 => /usr/lib/x86_64-linux-gnu/libgmp.so.10 (0x00007fcfebf56000)
libstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007fcfebc4f000)
libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007fcfeb9cc000)
libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007fcfeb645000)
libgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007fcfeb42f000)
libgmp.so.3 => /usr/lib/libgmp.so.3 (0x00007fcfeb1d2000)
/lib64/ld-linux-x86-64.so.2 (0x00007fcfecf11000) 
```

这是在 Debian/Sid/AMD64 上

一般建议是避免构建静态库（使用`ar`和可能`ranlib`）。而是构建共享库。

您不能在静态库上做等效的事情，因为静态库只是一系列目标文件，仅此而已。（您梦寐以求的依赖信息没有元数据空间）。

# comments - Antlr v3 注释处理 VHDL

> ID：12195004
> 
> 赞同：0
> 
> 时间：2012-08-30T10:39:09.113
> 
> 标签：comments, antlr, vhdl, pragma

我在编写的 VHDL 语法中遇到了 ANTLR 问题。VHDL 没有真正的多行注释，也没有编译指示，因此工具供应商发明了一种基于注释的机制来排除代码的某些部分，例如

```
-- pragma translate_off  
code to disregard  
-- pragma translate_on 
```

（'--' 在 VHDL 中引入注释）其中 pragma 的实际代码各不相同，“synopsys translate off”和“rtl translate_off”是已知的变体。
ANTLR 语法处理注释的部分现在是

```
@lexer::members {   
    private static final Pattern translateOnPattern = Pattern.compile("\\s*--\\s*(rtl_synthesis\\s+on|(pragma|synthesis|synopsys)\\s+translate(\\s|_)on)\\s*");  
    private static final Pattern translateOffPattern = Pattern.compile("\\s*-- \\s*(rtl_synthesis\\s+off|(pragma|synthesis|synopsys)\\s+translate(\\s|_)off)\\s*");     
    private boolean translateOn = true;
    }  
    [...]  
    COMMENT    
    :   '--' ( ~( '\n' | '\r' ) )*     
    {     
        $channel = CHANNEL_COMMENT;   
        String content = getText();  
        Matcher mOn = translateOnPattern.matcher(content);   
        if(mOn.matches()) {
            translateOn = true;
            }  
        Matcher mOff = translateOffPattern.matcher(content);   
        if(mOff.matches()) {
            translateOn = false;
        }
    }
    ; 
```

问题是我的评论进入了隐藏频道，虽然我可以通过使用正则表达式在词法分析器操作中处理评论来识别这些编译指示，但我还没有找到一种方法将所有即将到来的标记定向到隐藏通道，直到“--编译指示翻译_on ”。这是可能的还是您通常会使用不同的方法？

# java - Java注解在方法之前和之后执行一些代码

> ID：12195015
> 
> 赞同：11
> 
> 时间：2012-08-30T10:39:46.553
> 
> 标签：java, swing, annotations, mouse-cursor

我正在编写一个摇摆应用程序，我希望在执行某些方法时有“等待”光标。我们可以这样做：

```
public void someMethod() {
    MainUI.getInstance().setCursor(Cursor.getPredefinedCursor(Cursor.WAIT_CURSOR));
    //method code
    MainUI.getInstance().setCursor(Cursor.getDefaultCursor());
} 
```

我想要实现的是一个 java 注释，它将在方法执行之前设置等待光标，并在执行后将其设置为正常。所以前面的例子看起来像这样

```
@WaitCursor    
public void someMethod() {
    //method code
} 
```

我怎样才能做到这一点？也欢迎提出有关解决此问题的其他变体的建议。谢谢！

PS - 我们在我们的项目中使用 Google Guice，但我不知道如何使用它来解决问题。如果有人会为我提供类似问题的简单示例，那将非常有帮助

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-30T11:05:41.980

你可以使用 AspectJ，或者使用自带 AOP 的 Google Guice。

具有使用注释注释的方法的对象`WaitCursor`必须使用 Guice 注入。

你定义你的注释

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
@interface WaitCursor {} 
```

您添加一个 MethodInterceptor ：

```
public class WaitCursorInterceptor implements MethodInterceptor {
    public Object invoke(MethodInvocation invocation) throws Throwable {
        // show the cursor
        MainUI.getInstance().setCursor(Cursor.getPredefinedCursor(Cursor.WAIT_CURSOR));
        // execute the method annotated with `@WaitCursor`
        Object result = invocation.proceed();
        // hide the waiting cursor
        MainUI.getInstance().setCursor(Cursor.getDefaultCursor());
        return result;
    }
} 
```

并定义一个模块，在其中将拦截器绑定到具有注释的任何方法上。

```
public class WaitCursorModule extends AbstractModule {
    protected void configure() {
        bindInterceptor(Matchers.any(), Matchers.annotatedWith(WaitCursor.class), new WaitCursorInterceptor());
    }
} 
```

[您可以在此页面](http://code.google.com/p/google-guice/wiki/AOP)上看到更多高级用途

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T10:50:49.290

您可能希望将[AspectJ](http://www.eclipse.org/aspectj/doc/next/progguide/semantics-advice.html)中的 around() 建议与您的注释结合使用，以将 around() 建议与您的注释限定的所有方法相关联。

# url - 在弹性搜索中使用 GET/POST 时结果不同

> ID：12195017
> 
> 赞同：21
> 
> 时间：2012-08-30T10:39:56.570
> 
> 标签：url, post, get, elasticsearch

我正在通过 Elastic Search Head 插件尝试弹性搜索。

当我通过 POST 提交查询时，结果与预期一致。

但是，当我使用 GET 尝试相同的查询时，我总是会取回索引中的所有值。

那么：如何通过 GET 将查询传递给弹性搜索服务器，以便我可以在 URL 中使用搜索字符串？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-30T11:29:38.560

如果您发送 GET，则正文可能甚至不会发送到 elasticsearch，因此您基本上不会向`_search`端点发送任何查询，这就是为什么您要返回所有内容（当然只有基于默认大小参数的前 10 个结果）。

查看[URI request](http://www.elasticsearch.org/guide/reference/api/search/uri-request.html)`q` ，它允许您使用URI 中的参数发送基本查询。您可以使用[Lucene 查询语法](http://www.lucenetutorial.com/lucene-query-syntax.html)并指定链接页面中列出的一些其他参数。如果您想执行更高级的查询，您可能希望将它们表示为 JSON 查询，以便获得 elasticsearch [Query DSL](http://www.elasticsearch.org/guide/reference/query-dsl/)的所有好处，但您需要将它们作为请求的主体提供。

**更新**
深入研究 elasticsearch head 插件，当您选择 GET 方法时，查询不会作为请求正文发送，而是在 URL 本身中发送，并且没有指定参数的名称，如下所示：

```
http://localhost:9200/_search&{"query":{"term":{"text":"john"}}} 
```

这可能是插件本身的一个错误，elasticsearch 找不到查询，这就是为什么你会得到所有结果。这意味着在使用 elasticsearch head 发送查询时，只有 POST 方法有效。

Elasticsearch 允许使用 GET 和 POST 来执行查询。如果您使用 GET，您可以将查询作为正文发送或使用源参数，如下所示：

```
http://localhost:9200/_search?source={"query":{"term":{"text":"john"}}} 
```

# php - 搜索键替换值

> ID：12195022
> 
> 赞同：0
> 
> 时间：2012-08-30T10:40:07.833
> 
> 标签：php, arrays

假设我有一个数组：

```
$myArray = array('alfa' => 'apple', 'bravo' => 'banana', 'charlie' => 'cherry', 'delta' => 'danjou pear'); 
```

我想在其中搜索某些键，如果找到，则根据其他数组替换这些键的值：

```
$myReplacements = array('bravo' => 'bolognese', 'lie' => 'candy'); 
```

我知道我可以这样做：

```
function array_search_replace($haystack, $replacements, $exactMatch = false) {
    foreach($haystack as $haystackKey => $haystackValue) {
        foreach($replacements as $replacementKey => $replacementValue) {
            if($haystackKey == $replacementKey || (!$exactMatch && strpos($haystackKey, $replacementKey) !== false)) {
                $haystack[$haystackKey] = $replacementValue;
            }
        }
    }
    return $haystack;
} 
```

但是，真的没有更聪明/更快的方法吗？

编辑：我还需要能够搜索关键部分，以便 'lie' 和 'charlie' 匹配。

EDIT2：预期结果是：

```
var_dump(array_search_replace($myArray, $myReplacements));

array(4) { ["alfa"]=> string(5) "apple" ["bravo"]=> string(9) "bolognese" ["charlie"]=> string(5) "candy" ["delta"]=> string(11) "danjou pear" }

var_dump(array_search_replace($myArray, $myReplacements, true));

array(4) { ["alfa"]=> string(5) "apple" ["bravo"]=> string(9) "bolognese" ["charlie"]=> string(6) "cherry" ["delta"]=> string(11) "danjou pear" } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T10:42:02.120

你可以使用PHP的[`array_replace`](http://php.net/manual/en/function.array-replace.php)函数。

另外，[`array_merge`](http://php.net/manual/en/function.array-merge.php)做类似的事情。

在您的代码中：

```
$finalArray = array_replace($myArray, $myReplacements); 
```

### 完整的 PHP 代码

```
<?php
    $myArray = array('alfa' => 'apple', 'bravo' => 'banana', 'charlie' => 'cherry', 'delta' => 'danjou pear');
    $myReplacements = array('bravo' => 'bolognese', 'lie' => 'candy');
    $finalArray = array_replace($myArray, $myReplacements);
    print_r($finalArray);
?> 
```

### 输出

```
Array
(
    [alfa] => apple
    [bravo] => bolognese
    [charlie] => cherry
    [delta] => danjou pear
    [lie] => candy
) 
```

### 在这里摆弄：[http ://codepad.viper-7.com/60o5xT](http://codepad.viper-7.com/60o5xT)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T10:45:38.937

这是你需要的吗？

```
<?php
$myArray = array('alfa' => 'apple', 'bravo' => 'banana', 'charlie' => 'cherry', 'delta' => 'danjou pear');
$myReplacements = array('bravo' => 'bolognese', 'lie' => 'candy');
print_r(array_merge($myArray, $myReplacements));
?> 
```

输出：

```
Array
(
    [alfa] => apple
    [bravo] => bolognese
    [charlie] => cherry
    [delta] => danjou pear
    [lie] => candy
) 
```

使用[array_merge](http://php.net/manual/en/function.array-merge.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T10:47:52.647

您可以使用以下代码直接替换匹配的密钥

```
<?php
$base = array("orange", "banana", "apple", "raspberry");
$replacements = array(0 => "pineapple", 4 => "cherry");
$replacements2 = array(0 => "grape");

$basket = array_replace($base, $replacements, $replacements2);
print_r($basket);
?> 
```

**输出：**

```
Array
(
    [0] => grape
    [1] => banana
    [2] => apple
    [3] => raspberry
    [4] => cherry
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T10:50:03.050

PHP中的数组是散列，你不需要搜索一个键，你可以在O(1)时间内访问它。

```
$myArray = array('alfa' => 'apple', 'bravo' => 'banana', 'charlie' => 'cherry', 'delta' => 'danjou pear');
$myReplacements = array('bravo' => 'bolognese', 'lie' => 'candy');

var_dump($myArray);

foreach($myReplacements as $k => $v) {
  if(array_key_exists($k, $myArray)) {
    $myArray[$k] = $v;
  }
}

var_dump($myArray); 
```

输出：

```
array(4) {
  ["alfa"]=>
  string(5) "apple"
  ["bravo"]=>
  string(6) "banana"
  ["charlie"]=>
  string(6) "cherry"
  ["delta"]=>
  string(11) "danjou pear"
}
array(4) {
  ["alfa"]=>
  string(5) "apple"
  ["bravo"]=>
  string(9) "bolognese"
  ["charlie"]=>
  string(6) "cherry"
  ["delta"]=>
  string(11) "danjou pear"
} 
```

# mef - MEF 依赖问题

> ID：12195026
> 
> 赞同：0
> 
> 时间：2012-08-30T10:40:11.547
> 
> 标签：mef

简单的例子。

应用程序 A 有一个贯穿使用的类库 C。

应用程序 A 使用 MEF 从插件目录中发现和加载插件模块 P1 和 P2。每个插件一个组件。

P1 和 P2 都依赖于 C（类库）。

构建过程将确保 P1 使用的 C 版本与 A 引用的版本相同。

**我假设我不会一次加载同一个程序集的多个副本？**默认情况下，我最终会在插件目录和 A 的应用程序目录中获得 C 的副本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:53:06.167

为确保您不会得到重复的程序集，您可以`Copy Local`在插件项目中将合同 (C) 库的属性更改为 false，这样在构建时，它不会被复制到输出目录。

我认为你应该没问题，因为由于 Fusion 加载器规则，CLR 不会加载相同的程序集两次 - 首先是查看目标程序集是否已经加载到`AppDomain`. 但是，您必须小心，因为`Assembly.LoadFrom`如果实际发现程序集在磁盘上具有不同的位置，则使用的任何代码都可能导致发生异常。

# android - Jeremy Feinstein 的 Android 滑动菜单

> ID：12195031
> 
> 赞同：0
> 
> 时间：2012-08-30T10:40:17.753
> 
> 标签：android

[我使用来自https://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)的 Android 滑动菜单示例克隆了 repo 。我成功地建立了图书馆。但是在构建示例项目时，我遇到了四个相同的错误：

```
No resource identifier found for attribute 'viewBehind' in package 'com.slidingmenu.example' 
```

谁能解释这个错误的含义以及我应该怎么做才能修复这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:42:05.273

转到项目首选项。在 android 下你可以看到项目使用的库。删除带有“x”的那个并将正确的库添加到示例中。

# php - PHP OOP 用户类

> ID：12195035
> 
> 赞同：-1
> 
> 时间：2012-08-30T10:40:29.957
> 
> 标签：php, oop

我目前正在编写一个完整的应用程序。当然，最重要的功能之一是用户管理。我已经完全想到了这一点，但我仍然不确定一个主题。

**用户类应该包含什么，不应该包含什么？**

我至少将 us​​er_id 和用户名保存在 User 对象中似乎是合乎逻辑的。由于，我会经常需要这个。但是诸如电子邮件、地址、真实姓名等信息呢？您是否也将这些信息放在 User 对象中？

我正在考虑这样做：我将 user_id 和用户名保存在对象本身中，所以我可以使用方法 getUserId() 和 getUsername() 访问它。这个方法，令人惊讶的是，将返回 $this->userId 和 $this->username。

关于其他信息，例如地址，我正在考虑添加方法。但我不会将此信息存储在实例变量中。就像 getAddress() 方法会调用 UserMapper 一样，我还将在其中创建一个方法来获取地址。

```
<?php
//UserMapper
public function getAdress() {
 $this->database->query('SELECT adress FROM users WHERE user_id = ?', array($this->getUserId));
 return $database('adress');
}

//User
public function getAdress() {
 return $this->userMapper->getAdress();
}
?> 
```

或者我应该为这些信息创建另一个类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:50:32.453

一些想法...

您可能拥有系统用户，并且您可能拥有不同于任何用户的管理凭据。我倾向于避免使用“用户”作为此类名称，并且通常更喜欢“登录”和/或“凭据”之类的名称。

您可能有多种类型的凭据，...除了用户名/密码之外，您可能还具有 oauth、openid 等凭据。通常，“用户名”将是电子邮件地址。

可能已经有库可以处理您想做的事情。

我可能会将用户的联系信息与其登录凭据分开存储，但这取决于应用程序的类型。具体而言，它取决于任何给定的“用户”是否总是只有一个且只有一个物理地址。

一旦你有了某种登录类，我就会倾向于有某种权限类，将登录名加入他们有权查看/更新的对象。

顺便说一句，您拼写错误的地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:54:30.193

区分用户和个人很重要。

一个人有姓名、地​​址、出生日期和其他关于他的事实。用户拥有凭据、秘密问题、系统权限等。

现在，问问自己用户和人之间的关系是什么。正如上面的布赖恩回答的那样，默认情况下将两者分成不同的类和表是一个好主意，因为这样会更容易。

这里有一些理由来打破这些。

1.  用户可能会在其存在的整个过程中保持不变，而依附于用户的人可能不会。
2.  在权限和角色的上下文中很少需要有关此人的信息，因此这是不必要的在您的用户类中浮动的额外数据。这个名单还在继续……

我通常将用户内容分解为以下类

```
 User (
        id
        login
        password
        password_expiredate
        enabled
        otherflags
        ) //(occasionally email, if it is used as login)

   Person (
        pid     // If it is not one to one between user and person
        user_id FK
        Name
        DOB
        Email 
        other relevant information
       )
   Address
       ( 
       person_pid
       type //home,work, etc
       Street
       City
       State
       Zip
       Country
       )
   Phone
      (
       person_pid
       type
       number
      ) 
```

至于创建类，一般来说，我不确定这是否是一种好习惯，但我允许用户包含一个人，而这个人又包含具有各自功能的 Address 和 Phone 类。

以我的经验，结构的规范化允许灵活开发将使用人和用户的业务规则。

此外，一个人不必是用户。

# javascript - DyGraph 依赖

> ID：12195038
> 
> 赞同：1
> 
> 时间：2012-08-30T10:40:45.040
> 
> 标签：javascript, charts, dygraphs

我试图使用 Dygraph 来表示图表，我在 中找到了代码`https://github.com/danvk/dygraphs`，但是它有很多依赖文件，我觉得它很烦人。是否有一个文件可以容纳所有必需的 js 文件以使其正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T06:35:42.107

您只需要包含该文件：

[https://github.com/downloads/danvk/dygraphs/dygraph-combined.js](https://github.com/downloads/danvk/dygraphs/dygraph-combined.js)

用于使用 dygraphs。将其下载到您的 webroot 并从那里包含它。不要直接从 github URL 包含它。没有其他依赖项。（我已经用了几个月了）

# forms - 是否允许在没有标签控件的情况下使用标签？

> ID：12195052
> 
> 赞同：5
> 
> 时间：2012-08-30T10:41:38.143
> 
> 标签：forms, html, label

我需要在页面中显示一个列表，比方说，应该或多或少呈现如下的人员属性：

> **姓名：** 姓名
> **日期：** 2000年 1 月 1 日
> **其他：**其他

阅读他们说的[文档：](http://www.w3.org/TR/html401/interact/forms.html#edef-LABEL)

> *LABEL 元素**可**用于将信息附加到控件。*

*那么，包含属性名称（如name*、*date* ......）是否是正确的标签，即使没有`<input>`关联的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T10:52:13.923

不，根据[昆汀的回答](https://stackoverflow.com/a/12195140/20578)。

但是，在 HTML5 中，可[`<dl>`用于](https://html.spec.whatwg.org/multipage/grouping-content.html#the-dl-element)`<label>`不合适的通用关联。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-30T10:46:39.263

不。

它说它可以将信息与控件相关联。

它并没有说它可以将信息与其他任何东西联系起来。

另请参阅[较新的（但草案）规范](http://www.w3.org/TR/html5/forms.html#category-label)：

> 一些元素（并非所有元素都与表单相关）被归类为可标记元素。这些是可以与标签元素相关联的元素。
> 
> 按钮输入（如果type属性不处于隐藏状态）keygen仪表输出进度选择textarea

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T10:58:41.327

`label`不，这样使用元素是不正确的。

这里重要的是*may*的含义。

> LABEL 元素***可***用于将信息附加到控件。

[RFC 2119](http://www.ietf.org/rfc/rfc2119.txt)（[HTML4 规范遵循](http://www.w3.org/TR/html401/conform.html)）定义*可能*：

> **May：**这个词，或者形容词“OPTIONAL”，意味着一个项目是真正可选的

所以在这里，*可能*并不意味着该`label`元素可以用于其他目的；它只是意味着不需要使用`label`带有控件的元素。

* * *

就替代方案而言，这取决于您想要实现的目标。如果您只是想严格遵循规范，那么我建议为每对使用`p`and 一个元素。`strong`如果您希望数据对计算机更有意义，您可以考虑使用其中一种[Microformat 规范](http://microformats.org/wiki/Main_Page#Specifications)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T11:18:38.360

到目前为止，我部分同意答案，但想补充一点，如果您出于某种原因想要使用标签，那么我将在只读控件中显示属性值，然后您的标签将有效。

我已经使用适当的样式来区分只读控件和功能控件，以避免混淆您的用户。这是在一系列页面上，这些页面建立了在向导中从用户那里收集的信息。

我有这个到 W3C 的链接——“编辑草案”，而不是上面的链接，它是“工作草案”，它指出你可以将它与任何元素相关联——只要它是“可标记的”——即使这是一个表单部分的子部分。前面说过，可标记元素不必在表单中。

[http://dev.w3.org/html5/spec/single-page.html#the-label-element](http://dev.w3.org/html5/spec/single-page.html#the-label-element)

# android - 使用 Phonegap 的视频会议应用程序的最佳工具

> ID：12195058
> 
> 赞同：1
> 
> 时间：2012-08-30T10:42:19.937
> 
> 标签：android, jquery, cordova, sencha-touch, smartphone

我将使用 Phone-gap 为跨平台（iPad 和 Android）构建一个视频会议应用程序。

哪个是最好的工具：Sencha Touch、jQuery mobile 或其他工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:47:16.110

我认为这是最好的 Sencha Touch 移动框架，原因有很多......

1.  它基于 HTML5 构建
2.  更流畅的滚动和动画
3.  原生包装
4.  设备支持

# c# - 我如何为文本字段生成动态 id 并从 asp.net 4 mvc3 中的模型数组中获取数据

> ID：12195059
> 
> 赞同：2
> 
> 时间：2012-08-30T10:42:23.137
> 
> 标签：c#, arrays, asp.net-mvc-3, dynamic, model

这是我第一次发帖！:)

我必须将我的模型数组从我的控制器类返回到视图页面。我想将数据放入文本框中并为每个文本框生成动态 id，以通过 JavaScript 进一步使用数据（这就是我寻找动态 id 的原因）。

# 模型

```
public partial class BhBuyerChart
{
    public string Date { get; set; }
    public string Quantity { get; set; }

    public BhBuyerChart(string n, string d)
    {
        Date = n;
        Quantity = d;
    }
} 
```

* * *

# 控制器

```
public ActionResult test()
{
     BhBuyerChart[] model = new BhBuyerChart[7];

     DataTable dt = (DataTable)ExecuteDB(ERPTask.AG_GetAllShipmentRecord, CurrentUserId);
     List<BhBuyerChart> ItemList = null;
     ItemList = new List<BhBuyerChart>();
     int i = 0;
     foreach (DataRow dr in dt.Rows)
     {
         model[i] = new BhBuyerChart(dr["Shipmentdate"].ToString(), dr["ShipmentQuantity"].ToString());
         i++;
     };

     return View(model);
} 
```

* * *

# 看法

## 第一次尝试

```
<div>
    <% for (int i=0; i<2; i++) {%>
    <%: Html.TextBoxFor(m => m[i].Quantity, new { id = "Quantity"})%>    <%--value can assign from model but dnt know how to assing dynamic id --%>

    <input type="text" value="<%= i %>" id="text<%=i %>"/>                 <%--dynamic id can be assinged dnt knw how to assing model value here in textbox --%>
    <% } %>
</div> 
```

## 第二次尝试

```
<div>
<% int i = 0; %>
<% foreach (ERP.Domain.Model.BhBuyerChart user in Model) {  %>
      <% i++; %>
      <input type="text"; id="textbox<% i %>" ; value="<% user.Quantity %>" />   
 <% } %>
 </div> 
```

* * *

非常感谢大家的关注和帮助，期待您的回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:46:23.930

您需要 Steven Sanderson 制作的出色扩展，称为`BeginCollectionItem`. 对于模型中的每一行，每个输入都将继承一个唯一的 guid，您可以将其重用于验证或其他内容。

有关如何逐步使用扩展的更多信息，请参阅 Steven Sanderson 博客上的文章：[编辑可变长度列表，ASP.NET MVC 2-style](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)

这篇文章是为 MVC2 编写的，但它也适用于 MVC3。它应该在 MVC4 中工作，但我还没有测试过。

# 看法

```
<% foreach (var item in Model) {
    <% using(Html.BeginCollectionItem("bhBuyerItem")) { %>
        <%= Html.TextBoxFor(m => m.Quantity) %>
        <%= Html.TextBoxFor(m => m.Date) %>
    <% } %>
<% } %> 
```

# 扩展方法

```
public static class HtmlPrefixScopeExtensions
{
    private const string idsToReuseKey = "__htmlPrefixScopeExtensions_IdsToReuse_";

    public static IDisposable BeginCollectionItem(this HtmlHelper html, string collectionName)
    {
        var idsToReuse = GetIdsToReuse(html.ViewContext.HttpContext, collectionName);
        string itemIndex = idsToReuse.Count > 0 ? idsToReuse.Dequeue() : Guid.NewGuid().ToString();

        // autocomplete="off" is needed to work around a very annoying Chrome behaviour whereby it reuses old values after the user clicks "Back", which causes the xyz.index and xyz[...] values to get out of sync.
        html.ViewContext.Writer.WriteLine(string.Format("<input type=\"hidden\" name=\"{0}.index\" autocomplete=\"off\" value=\"{1}\" />", collectionName, html.Encode(itemIndex)));

        return BeginHtmlFieldPrefixScope(html, string.Format("{0}[{1}]", collectionName, itemIndex));
    }

    public static IDisposable BeginHtmlFieldPrefixScope(this HtmlHelper html, string htmlFieldPrefix)
    {
        return new HtmlFieldPrefixScope(html.ViewData.TemplateInfo, htmlFieldPrefix);
    }

    private static Queue<string> GetIdsToReuse(HttpContextBase httpContext, string collectionName)
    {
        // We need to use the same sequence of IDs following a server-side validation failure,  
        // otherwise the framework won't render the validation error messages next to each item.
        string key = idsToReuseKey + collectionName;
        var queue = (Queue<string>)httpContext.Items[key];
        if (queue == null) {
            httpContext.Items[key] = queue = new Queue<string>();
            var previouslyUsedIds = httpContext.Request[collectionName + ".index"];
            if (!string.IsNullOrEmpty(previouslyUsedIds))
                foreach (string previouslyUsedId in previouslyUsedIds.Split(','))
                    queue.Enqueue(previouslyUsedId);
        }
        return queue;
    }

    private class HtmlFieldPrefixScope : IDisposable
    {
        private readonly TemplateInfo templateInfo;
        private readonly string previousHtmlFieldPrefix;

        public HtmlFieldPrefixScope(TemplateInfo templateInfo, string htmlFieldPrefix)
        {
            this.templateInfo = templateInfo;

            previousHtmlFieldPrefix = templateInfo.HtmlFieldPrefix;
            templateInfo.HtmlFieldPrefix = htmlFieldPrefix;
        }

        public void Dispose()
        {
            templateInfo.HtmlFieldPrefix = previousHtmlFieldPrefix;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:19:59.343

经过几次尝试，我想我能够做到这一点

```
<%for (int i = 0; i <= 1; i++)%>
<%  {  %>
  <div style="width:100%; float:left">
     <%: Html.TextBoxFor(m => m[i].Date, new { id= i+500 })%>
     <%: Html.TextBoxFor(m => m[i].Quantity, new { id = i })%>

     <%: Html.TextBoxFor(m => m[i].Quantity) %>

   </div> 
```

```
<script type="text/javascript">
    var val = [[], []];
    for (k = 0; k <= 1; k++) {
        val[k][0] = document.getElementById(k+300).value;
        val[k][1] = parseInt(document.getElementById(k).value);

    }
</script> 
```

这将从模型数组中获取动态数据并为每个文本框创建动态 id 并使用动态 id 将它们分配给变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T11:01:09.767

我认为这应该为你做。实际上，您要做的是在控制器内部构建一个新方法，以便您可以使用更新后的值 POST 回控制器。此外，您不希望`Quantity`字段具有不同的名称，因为它们不会绑定 - 因此您构建的每个字段都会在生成 HTML 时`Quantity`在`name` **and** `id`属性中说明。

如果我误解了您的需求，请发表评论。

# 控制器

```
public ActionResult test()
{
     BhBuyerChart[] model = new BhBuyerChart[7];

     DataTable dt = (DataTable)ExecuteDB(ERPTask.AG_GetAllShipmentRecord, CurrentUserId);
     List<BhBuyerChart> ItemList = null;
     ItemList = new List<BhBuyerChart>();
     int i = 0;
     foreach (DataRow dr in dt.Rows)
     {
         model[i] = new BhBuyerChart(dr["Shipmentdate"].ToString(), dr["ShipmentQuantity"].ToString());
         i++;
     };

     return View(model);
}

[HttpPost]
public ActionResult test(ICollection<BhBuyerChart> charts)
{
    // This allows you to POST to the controller with the modified values

    // Note that based on what you're collecting client side the charts
    // will ONLY contain the Quantity value, but they will all have one.
    // If you need the date you can either show a text box for that or
    // even place the date inside a hidden field.
} 
```

# 看法

```
<form method="post" action="/{controllername}/test">
...
<div>
    <% for (int i=0; i<2; i++) {%>
        <!-- This line will both bind the value and allow you to POST -->
        <!-- this form back to the controller with the new values -->

        <!-- NOTE: each control is actually going to be named the same -->
        <!-- but when it's posted will post in order to the collection -->
        <%: Html.TextBoxFor(m => m[i].Quantity) %>

        <!-- You may or may not want this here so that you can get the -->
        <!-- value of the date back to the server during a POST -->
        <%: Html.HiddenFor(m => m[i].Date) %>
    <% } %>
</div>
...
</form> 
```

# JavaScript

现在在 JavaScript 中，您可以使用 jQuery 简单地获取所有`Quantity`像这样命名的元素的列表，并从该数组中使用它们。

```
// with this ([0].Quantity) being the template
// we'll use a simple wildcard selector to find
// all of them that end with Quantity.

var elems = $("[name$=Quantity]")

// now you have a list of the elements that you
// can use to populate the other array with -
// getting the value with a statement like...

var val = elems[0].val(); 
```

# python - 与客户端证书的 SSL 连接

> ID：12195063
> 
> 赞同：3
> 
> 时间：2012-08-30T10:42:36.367
> 
> 标签：python, encryption, twisted, ssl

客户端是否可以使用已经通过其他方式交换的服务器证书建立与服务器的 SSL 连接？

关键是使用已经与客户端的证书加密连接，而不必依赖服务器来提供它。服务器仍将拥有客户端使用的证书的私钥。

这个问题不是特定于语言的，但感谢特定于 python 和 twisted 的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T11:01:09.150

SSL/TLS 中的证书仅用于身份验证，加密本身由握手期间协商的共享密钥完成。

如果要使用证书，则至少需要 SSL/TLS 服务器拥有证书（可能是 TCP 客户端）。您确实可以在建立连接时交换客户端和服务器的角色。也就是说，SSL/TLS 服务器不一定是 TCP 服务器，但可以是 TCP 客户端。请参阅[规范词汇表](https://www.rfc-editor.org/rfc/rfc4346#appendix-B)中的定义：

> ```
>  client
>       The application entity that initiates a TLS connection to a
>       server.  This may or may not imply that the client initiated the
>       underlying transport connection.  The primary operational
>       difference between the server and client is that the server is
>       generally authenticated, while the client is only optionally
>       authenticated. 
> ```

但是，这样做可能会导致困难。就像传统 SSL/TLS 连接中的服务器无法检测请求是否通过 MITM（检查服务器证书完全由客户端负责，无需客户端证书身份验证），使 TCP 客户端成为 SSL/ TLS 服务器使 TCP 客户端很难知道它正在与预期的 TCP 服务器通信：服务器实际上可能是一个 MITM。您需要考虑这是否适合您的需求。

在 Python 中，您应该能够`server_side`使用[`ssl.wrap_socket`](http://docs.python.org/library/ssl.html#ssl.wrap_socket).

> 服务器仍将拥有客户端使用的证书的私钥。

这根本没有意义。私钥应由证书颁发方保密。

也许您正在使用预共享密钥机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:49:10.713

在 TLS 中，服务器（用于连接的一方`listen`）总是需要一个证书。客户端证书只能用于对等身份验证，但不能用于通道加密。

还要记住，如果没有一些基础设施以某种方式验证证书（例如使用证书颁发机构或信任数据库），您不能简单地“加密”连接。没有证书有效性验证的加密不适用于活跃的对手（谷歌搜索“中间人攻击”以获得更多详细信息）。

# android - 设置 > 位置和安全 > 屏幕解锁。资源？

> ID：12195066
> 
> 赞同：-2
> 
> 时间：2012-08-30T10:42:40.923
> 
> 标签：android

我想为我的应用程序使用一个锁定设置，看起来像这样设置“设置 > 位置和安全 > 屏幕解锁”，但我不知道如何在哪里找到这部分 android (2.3.3) 的源代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:22:40.313

基本上，请把 Android 源码拉到你的机器上：http: [//source.android.com/](http://source.android.com/) 然后，寻找 package: `com.android.settings`。应用程序的一切都在`Settings`那里。

# jquery - 按行自定义 Jqgrid UI

> ID：12195068
> 
> 赞同：0
> 
> 时间：2012-08-30T10:42:45.150
> 
> 标签：jquery, jqgrid

**你好专家**

我在我的 Web 应用程序中使用 jQuery 网格，它非常好用。现在我对它有一个特殊的要求。

> 我可以像我想要一些行文本一样自定义它的显示吗？根据某些条件通过它，而另一些则按原样显示。请参阅附图以获得更多说明。

例如 ，

我在一个网格中有三行。网格有一个**isRemoved**隐藏列，其值为 true 或 false。现在，如果此列的值为 true，则网格的整行都已删除，这意味着该行的所有文本都已删除。如果此列的值为 false，则它会正常显示（没有删除线）。

**我怎样才能做到这一点？**

```
Thank You
Mihir Parekh 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:20:17.920

[http://jsfiddle.net/piyushsardana/yN4kM/8/](http://jsfiddle.net/piyushsardana/yN4kM/8/)

检查这个小提琴。现在在这里我有 Client colName(colModal:name) 作为隐藏列，我有两行。一个有值 test，另一个有 test1。现在我在 loadComplete 中获取我的行数据，并根据我将 css 类应用于该行的值。

希望能帮助到你。

# java - 是否可以从普通的 java 文件中禁用 tomcat 缓存

> ID：12195074
> 
> 赞同：1
> 
> 时间：2012-08-30T10:43:29.607
> 
> 标签：java, caching, tomcat, tapestry

嗨，我需要禁用单个页面的 tomcat 缓存。我已经通过了裁判，

[按页面控制服务器端缓存（Tomcat）？](https://stackoverflow.com/questions/10195690/control-server-side-caching-by-page-tomcat) & [Java servlet 如何禁用页面缓存](https://stackoverflow.com/questions/3976624/java-servlet-how-to-disable-caching-of-page)

这里的解决方案是我需要这样做::

// 设置标准 HTTP/1.1 无缓存标头。response.setHeader("Cache-Control", "private, no-store, no-cache, must-revalidate");

// 设置标准 HTTP/1.0 无缓存标头。response.setHeader("Pragma", "no-cache");

但我没有那个特定页面的任何 servlet 类。我猜我需要将上面的代码片段添加到 servlet 类中。我正确吗？有没有办法从普通的java文件中禁用单个页面的tomcate缓存，，，？？

有关我的技术和框架的更多信息::

我们有一个名为 Tapestry(3) 的框架。我们有一个名为 ApplicationServlet 的 servlet 类。它将 .jwc 文件（包含非静态部分）和 html 结合在一起以创建一个新的 html 页面。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:54:12.917

您可以通过 servlet 过滤器（仅匹配相关页面）设置 HTTP 标头来完成此操作：

```
 public void doFilter(ServletRequest request, ServletResponse response, 
            FilterChain chain) throws IOException, ServletException { 
        try { 
            HttpServletResponse res = (HttpServletResponse) response; 
            // Set standard HTTP/1.1 no-cache headers.
            // Set standard HTTP/1.0 no-cache header.
            res.addHeader(...)             
            chain.doFilter(request, response); 
        }...
    } 
```

# c++ - substr 导致分段错误

> ID：12195075
> 
> 赞同：-1
> 
> 时间：2012-08-30T10:43:31.060
> 
> 标签：c++, linux, string

我有以下字符串：

> B�#012a#016�G�6�)_#014�d%|1401 01 000][M00FEB11002FA]_13:40:39,08-30-2012�:�</p>

我编写了这个简单的代码来获取位于 | 之后的值 1401。

问题是当我调用 substr 时出现分段错误，代码是这样的：

```
string test = "B�#012a#016�G�6�)_#014�d%|1401 01 000][M00FEB11002FA]_13:40:39,08-30-2012�:�";
    int jj = test.find("]");

for (int j = jj  ; j > 0 ; j--)
{
    if (test.at(j) == '|')
    {
        test = test.substr(j+1);
        test = test.substr(0,test.find_first_of(' '));
    }
} 
```

有人可以说我做错了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T10:49:54.457

> 问题是当我调用 substr 时出现分段错误，代码是这样的：

不。分段错误是由您未能处理引发的异常调用的，`at`因为在您第一次修改字符串后，后续`at`调用将访问字符串边界之外的索引。

如果在字符串修改后离开循环，它会起作用。

`string::rfind`也就是说，通过将整个外循环替换为 ，并将两个`substr`调用替换为一个调用，可以大大简化代码：

```
int end = test.find("]");
int start = test.rfind("|", end);
test = test.substr(start + 1, test.find(' ', start) - start); 
```

（`find_first_of`这里也不需要。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T10:50:19.587

有两个可能的问题：

1.  当你找到你正在寻找的部分时，你会*继续*循环，但现在使用的字符串与你开始时的不同。`break`在`if`块内添加一个。
2.  如果不可打印字符为零（与 相同`'\0'`），则字符串将仅包含一个字符，即第一个`'B'`。然后您开始循环*而不检查*调用是否返回有效位置，如果这种情况为真`find`，它实际上将是。`string::npos`

# iphone - 将 Tap 事件与 ImageView 分开

> ID：12195076
> 
> 赞同：0
> 
> 时间：2012-08-30T10:43:33.540
> 
> 标签：iphone, objective-c, cocoa-touch, uiview, uitapgesturerecognizer

我有一个使用 TapGestureRecognizer 的视图。我将 TapGestureRecognizer 用于单击和双击事件。到目前为止，一切都很好。现在我在 View 的顶部添加了一个 ImageView ，图像视图框架是`imageView.frame=CGRectMake(50,290,205,100);`

现在无论我在哪里点击 View ，我的 @selectors 都会被调用。我只想跳过 ImageView 的点击事件。怎么做 ？

我尝试使用

```
if(recognizer.state == UIGestureRecognizerStateRecognized)
{
    CGPoint point = [recognizer locationInView:recognizer.view];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T10:57:52.943

您必须实施此检查

```
if(!CGRectContainsPoint(image.view.frame, point))
  {
     //Complete your Work
   } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T10:57:58.380

这样做......我希望这会帮助你......

每当您点击屏幕时，此委托方法都会调用..

在这种方法中，请检查触摸和手势识别器将提供一些有关您的点击的数据.....基于此您可以继续......

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
{
    NSLog(@"%@",touch.description);
    NSLog(@"%@",gestureRecognizer.description);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T10:49:22.330

您需要检查接触点，

```
if(!CGRectContainsPoint(image.view.frame, point))
   {
      //Do you work here
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T10:50:06.647

做这个：

```
if(recognizer.state == UIGestureRecognizerStateRecognized)
{
    CGPoint point = [recognizer locationInView:recognizer.view];
    if(CGRectContainsPoint(imageView.frame,point)
    {
       //igonre
    }
    else
    {
      // continue
    }
} 
```

# css - 针对 Windows 7 的条件 CSS

> ID：12195080
> 
> 赞同：2
> 
> 时间：2012-08-30T10:43:41.917
> 
> 标签：css, conditional, google-font-api

我可以在网上找到很多这样的讨论，但是我找不到任何人专门针对我的问题：

我将 Google Webfonts 用于网站。在除 Windows 7 之外的所有平台上，字体看起来都不错。但在 Windows 7 上，我需要调整某些字体版本的字体粗细。我可以成功地为 IE 9 使用条件语句，但我如何仅在 Windows 7 中实际定位 FF 和 Chrome？Win XP（IE 8及以下，还有FF、Chrome）的字体渲染很完美，Mac OS也很好（FF、Safari、Chrome）。

我发现了很多黑客，但没有一个会改变特定 Windows 版本的 CSS，而不管浏览器......？？？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T10:49:51.377

没有 JavaScript 就无法完成。具体来说，您需要检查`navigator.userAgent`的值。如果它包含`NT 6.1`，则表示客户端正在运行 Windows 7。`NT 6.0`适用于 Windows Vista，并且`NT 5.1`是 Windows XP。不幸的是，使用纯 CSS 无法做到这一点。

一个样品：

```
var usAg = navigator.userAgent;
if(usAg.indexOf("NT 6.1") != -1) {
    //Windows 7, apply styles here, for instance:
    var el = document.getElementById("your_id");
    el.style.fontWeight = "700";
} 
```

我希望这有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T10:46:04.910

您必须使用 Javascript 来检测 Windows 7。下面是一个示例：

```
<script type="text/javascript">
  window.onload = function () {
    if (navigator.userAgent.indexOf('Windows NT 6.1') > 0)
      document.head.innerHTML += '<link rel="stylesheet" type="text/css" href="path/to/css" />'
  }
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T10:47:08.717

我推荐脚本[http://cssuseragent.org/](http://cssuseragent.org/)。

以下是使用 cssua.js检测[Windows 7的方法：](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724832.aspx)

```
if (cssua.ua.windows_nt === "6.1") {
    /* target Win 7 and Win 2008 R2 */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T10:47:55.073

请查看：[http ://www.quirksmode.org/js/detect.html](http://www.quirksmode.org/js/detect.html)

使用 Windows 的 NT 版本，您可以定位 CSS。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T11:07:19.657

感谢大家的快速解答！因为我安装了 jQuery，这就是我解决它的方法：

```
$(document).ready(function (){
   if (navigator.userAgent.indexOf('Windows NT 6.1') > 0)
   {
        $('body').css({'font-weight':'300'});   
   }
}); 
```

# apache-flex - 字节数组到图像

> ID：12195081
> 
> 赞同：0
> 
> 时间：2012-08-30T10:43:42.637
> 
> 标签：apache-flex

我想为包含图像和标签的列表实现一个 itemRenderer。列表的数据提供者是我从后端获得的对象列表：

```
public class Object {
private String label;

private byte[] content; 
```

}

我的项目渲染器：

```
<s:MXDataGridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                      xmlns:s="library://ns.adobe.com/flex/spark" 
                      xmlns:mx="library://ns.adobe.com/flex/mx">
<s:layout>
    <s:HorizontalLayout/>
</s:layout>
<mx:Image source="{data.content}"/>
<s:Label text="{data.label}"/> 
```

我只有一个破碎的图像。有没有人知道我为什么以及如何解决这个问题。提前感谢亚约

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:38:04.790

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/Image.html#source](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/Image.html#source)

*   一个 Bitmap 或 BitmapData 实例。
*   表示 DisplayObject 子类的类。
*   BitmapFill 实例化该类并创建它的位图呈现。DisplayObject 的一个实例。BitmapFill 将其复制到 Bitmap 中进行填充。
*   外部图像文件的名称。

spark.components.Image 不能使用 ByteArray 实例作为源。所以你需要将它转换为 Bitmap 实例。

像这样的东西：

```
<?xml version="1.0"?>
<s:MXDataGridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark">

    <fx:Script><![CDATA[
        private var _bytesLoader:Loader;

        override public function set data(value:Object):void
        {
            super.data = value;

            _loadBytes(data.bytes as ByteArray);
        }

        private function _loadBytes(bytes:ByteArray):void
        {
            _destroyBytesLoader();

            if (!bytes)
            {
                return;
            }

            _createBytesLoader();
            try
            {
                _bytesLoader.loadBytes(bytes);
            }
            catch (e:*)
            {
                _destroyBytesLoader();
            }
        }

        private function _createBytesLoader():void
        {
            _bytesLoader = new Loader();
            _bytesLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, _bytesLoader_completeHandler);
            _bytesLoader.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR, _bytesLoader_errorHandler);
            _bytesLoader.contentLoaderInfo.addEventListener(AsyncErrorEvent.ASYNC_ERROR, _bytesLoader_errorHandler);
        }

        private function _destroyBytesLoader():void
        {
            if (!_bytesLoader)
            {
                return;
            }

            _bytesLoader.contentLoaderInfo.removeEventListener(Event.COMPLETE, _bytesLoader_completeHandler);
            _bytesLoader.contentLoaderInfo.removeEventListener(IOErrorEvent.IO_ERROR, _bytesLoader_errorHandler);
            _bytesLoader.contentLoaderInfo.removeEventListener(AsyncErrorEvent.ASYNC_ERROR, _bytesLoader_errorHandler);

            try
            {
                _bytesLoader.unload();
            }
            catch (e:*){}

            _bytesLoader = null;
        }

        private function _bytesLoader_completeHandler(event:Event):void
        {
            try
            {
                myImage.source = Bitmap(_bytesLoader.content).bitmapData.clone();
            }
            catch (e:*)
            {
            }
            _destroyBytesLoader();
        }

        private function _bytesLoader_errorHandler(event:Event):void
        {
            _destroyBytesLoader();
        }

        ]]></fx:Script>

    <s:layout>
        <s:HorizontalLayout />
    </s:layout>

    <s:Image id="myImage"/>
    <s:Label text="{data.label}" />

</s:MXDataGridItemRenderer> 
```

# jquery - 如果为空，则将默认值设置为下拉列表 - jquery

> ID：12195082
> 
> 赞同：0
> 
> 时间：2012-08-30T10:43:43.447
> 
> 标签：jquery

一个非常简单但我发现它非常困难。我有一个下拉菜单，其中在运行时生成值。

```
 <select id="cmbCitySub" name="cmbCitySub" multiple="multiple">
         <asp:Literal ID="litCitySub" runat="server"></asp:Literal>
  </select> 
```

我在下拉菜单中使用了 jquery 多选插件。

```
$('#cmbCitySub').multiselect({
    noneSelectedText: 'Select CitySub',
    selectedList: 1,
    multiple: false
}).multiselectfilter(); 
```

我上面的下拉菜单是可选的，即如果用户没有选择任何值，则应设置默认值 0。我已经在 jquery 中尝试过，但失败了……！！

```
if ($('#cmbCitySub').val() == null) 
     {
     $('#cmbCitySub').val('0');
     }
var sCitySub = $('#cmbCitySub').val();
alert(sCitySub); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:47:49.413

```
if(document.getElementById('cmbCitySub').selectedIndex == -1)
var sCitySub = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T10:52:07.503

试试下面的代码。

```
 if($('#cmbCitySub option').length == 0)
      {
        $("#cmbCitySub").html("<option value='0'>No Value</option>");
        $("#cmbCitySub").val(0);
        alert($("#cmbCitySub").val());
      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T10:59:47.503

由于没有为默认值“Select Citysub”指定值，因此值字段将为空

所以，试试这样的检查：

```
if($.trim($('#cmbCitySub').val()) == '')
{
$('#cmbCitySub').val('0');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T11:12:49.983

```
Check the value of DropDown in doccument load of your page like this.
<script src="Scripts/jquery-1.4.1.js" type="text/javascript"></script>
<script type="text/javascript">
     $(document).ready(function () {
        alert('No of Options Present in the Dropdown :' + $('#cmbCitySub option').length);
        if ($('#cmbCitySub option').length == 0) {
            $("#cmbCitySub").html("<option value='0'>No Value</option>");  
            $("#cmbCitySub").val(0);  
            alert('Current Value:' + $("#cmbCitySub").val());
        }
    });

</script> 
```

# algorithm - Knight的最短路径图数据结构与算法

> ID：12195084
> 
> 赞同：0
> 
> 时间：2012-08-30T10:43:49.843
> 
> 标签：algorithm, data-structures, shortest-path, chess, search-tree

我对以前的 Stack Overflow 帖子有一个问题@ [Knight's Shortest Path on Chessboard](https://stackoverflow.com/questions/2339101/knights-shortest-path-chess-question)

我理解'好的，这是一个图形问题，它的稀疏矩阵就像'的回复：

```
(a1,b3)=1,
(a1,c2)=1,
  ..... 
```

它描述了现有的边缘。但是我仍然不知道这个图的数据结构应该是什么样子（它是一个邻接矩阵吗？上面表示为“稀疏矩阵”，还是其他什么？），以便 Dijkstra 的算法可以很容易地使用它。

[http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)。

从算法描述来看，如果图数据结构是一组顶点，并且有可用的邻居顶点信息，看起来很方便。但我们如何实现这一目标？

如何为该图写出示例数据结构？我正在寻求了解如何将它方便地链接到 Dijkstra 的算法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T10:46:49.947

该图非常稀疏（64 个顶点，每个顶点最多有 8 条边），因此邻接矩阵是一种浪费的 IMO。

一个更好的结构将是[邻接列表](http://en.wikipedia.org/wiki/Adjacency_list)：

```
v1->v2,v3,v4,v5
v2->v1,...
... 
```

这个想法确实是持有一个`Set<Vertex>`, 并且`Vertex`类型有一个*字段*: `List<Vertex> neighbors`，它将包含所有顶点的相邻顶点。

在这种情况下，不需要一些额外的权重信息——因为该图是未加权的。

另外 - **Dijkstra 的算法**在这里是多余的。同样，该图是未加权的——因此，一种更简单（易于编程和理解）且更快（运行时）的算法来找到最短路径是未加权图的[**BFS**](http://en.wikipedia.org/wiki/Breadth-first_search)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:56:06.277

由于只有 64 个图块，因此您可以方便地将邻接矩阵放入一个由 64 个整数组成的数组中，每个整数为 64 位。当然它是稀疏的，但它也很小，所以如果它存在的话（与单个位相比，指针相当大），浪费也会很小。

当位向量稀疏时，从位向量中提取索引列表也特别容易，但*您甚至不需要*- 您可以让前面成为位向量队列，而“已访问”集可以是单个位向量。

编辑：好的，如果你使用那个技巧，实际上你可能仍然需要它，但它仍然只需要几个快速操作，比如 bitscan 和`x &= x -1`.

# jsp - Liferay - 获取数据目录

> ID：12195099
> 
> 赞同：0
> 
> 时间：2012-08-30T10:44:30.823
> 
> 标签：jsp, liferay, portlet, liferay-6

如何在 Liferay portlet (JSP) 中获取文件夹的`data`目录（通常在 liferay 的主目录中）？我尝试使用`DLFolderLocalServiceUtil`，但我失败了。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T13:24:49.453

以下属性指定文档的存储位置：

```
dl.store.file.system.root.dir=${liferay.home}/data/document_library 
```

所以我认为你可以使用：

```
String documentPath = PropsUtil.get("dl.store.file.system.root.dir") 
```

在您的自定义插件中获取此属性的值。

**注意**（来自 Olaf[评论](https://stackoverflow.com/questions/12195099/liferay-obtain-data-directory#comment16343444_12195099 "奥拉夫对问题的评论")的灵感）![](../Images/102ad27f0ee8437657fad2b937249ceb.png)
如果您想访问从`Documents & Media`portlet 上传的文件/文档，最好使用[DLApp*Services](https://github.com/liferay/liferay-portal/tree/master/portal-service/src/com/liferay/portlet/documentlibrary/service "github上服务的源文件")来获取它们。这将有助于您的实施干净，也将有助于顺利升级，因为 Liferay 可以自由更改其存储`Documents & Media`portlet 文件的方式。谢谢奥拉夫。

# php - 简单的 userprofile-URL 无需重写地址规则

> ID：12195103
> 
> 赞同：0
> 
> 时间：2012-08-30T10:44:34.833
> 
> 标签：php, .htaccess, mod-rewrite

我正在一个有很多个人资料的网站上工作。我想要的是，您可以简单地导航到其中一个带有类似 www.mywebsite.com/userX 的 URL 的配置文件（就像带有 twitter.com/userX 的 twitter）。

我已经知道如何通过使用 .htaccess 和 rewriterule 来实现这一点，但问题是它将整个 URL 更改为类似 www.mywebsite.com/?username=userX 的内容。它必须只加载一个特定的 PHP 文件而不重写地址栏中的 URL。

谁知道我怎么能做到这一点？

（ps对不起我的平均英语）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:14:33.463

见精品文章：

[http://www.phpriot.com/articles/search-engine-urls](http://www.phpriot.com/articles/search-engine-urls)

它解释说，是的，您需要一个看起来像这样的 mod_rewrite（放置在 .htaccess 文件中）规则：

```
RewriteEngine on
RewriteRule ^/news/([0-9]+)\.html /news.php?news_id=$1

And this maps requests from

/news.php?news_id=63

to

/news/63.html 
```

另一种可能性是用 forcetype 来做，它强制任何东西沿着特定的路径使用 php 来评估内容。因此，在您的 .htaccess 文件中，输入以下内容：

```
<Files news>
    ForceType application/x-httpd-php
</Files> 
```

然后 index.php 可以根据 $_SERVER['PATH_INFO'] 变量采取行动：

```
<?php
    echo $_SERVER['PATH_INFO'];
    // outputs '/63.html'
?> 
```

# wpf - 单独程序集中的全局样式

> ID：12195114
> 
> 赞同：0
> 
> 时间：2012-08-30T10:45:20.073
> 
> 标签：wpf, wpftoolkit, wpf-4.0

对于我的应用程序主题，我创建了一个单独的类库 MyApp.Themes.dll。在这个库的根文件夹中，我有 Standard.xaml：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <ResourceDictionary.MergedDictionaries>
    <ResourceDictionary 
      Source="pack://application:,,,/MyApp.Themes;component/Standard/Accordion.xaml"/>
  </ResourceDictionary.MergedDictionaries>
</ResourceDictionary> 
```

在标准文件夹中，我有 Accordion.xaml：

```
<ResourceDictionary xmlns:layoutPrimitivesToolkit="..."
                    xmlns:layoutToolkit="..."
                    ...>
  <!--  layoutPrimitivesToolkit:AccordionButton  -->
  <Style TargetType="layoutPrimitivesToolkit:AccordionButton">
    ...
  </Style>

  ...
</ResourceDictionary> 
```

这是 WPF Toolkit Accordion 控件的默认样式，除了 AccordionItem 的样式被修改为将背景设置为透明（而不是蓝色，这是一个已知的错误）。

对于这两个 xaml 文件，构建操作都设置为“资源”。现在，在 MyApp WPF 项目中引用 MyApp.Themes 库后，在 App.xaml 中我写了以下内容：

```
<Application.Resources>
  <ResourceDictionary>
    <ResourceDictionary.MergedDictionaries>
    <ResourceDictionary             
        Source="pack://application:,,,/MyApp.Themes;component/Standard.xaml" />
    </ResourceDictionary.MergedDictionaries>
  </ResourceDictionary>
</Application.Resources> 
```

它不起作用（没有错误；只是样式未应用）。如果我直接在 App.xaml 中复制和粘贴 Accordion.xaml 样式，那么它可以工作。有人建议添加虚拟资源字典，所以我在 App.xaml 中 MergedDictionaries 结束标记后添加了以下内容：

```
<Style TargetType="{x:Type layoutToolkit:AccordionItem}" /> 
```

再次，它不起作用。有人可以帮我解决这个问题吗？顺便说一句，我没有尝试其他人建议的方法 - 使用 basedOn。如果我必须这样做，我想在 MyApp.Themes 中进行，因为它可以更好地在 App.xaml 中使用主题。先感谢您。

UPDATE1：如果我直接将 Accordion.xaml 内容复制并粘贴到 Standard.xaml 就可以了

UPDATE2：我在 Standard.xaml 中尝试了本地程序集资源文件 URI（http://msdn.microsoft.com/en-us/library/aa970069.aspx）：

```
<ResourceDictionary Source="pack://application:,,,/Standard/Accordion.xaml"/> 
```

它抛出一个错误，说未找到标准/手风琴.xaml。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:04:30.267

.NET 中似乎存在错误。请参阅下面的线程：

[引用包含合并字典的资源字典时遇到问题](https://stackoverflow.com/questions/1229395/trouble-referencing-a-resource-dictionary-that-contains-a-merged-dictionary)

此外，微软网站上有一个连接页面：

[https://connect.microsoft.com/VisualStudio/feedback/details/609601/merge-dictionaries-does-not-work-when-we-merge-merged-dictionaries#tabs](https://connect.microsoft.com/VisualStudio/feedback/details/609601/merge-dictionaries-does-not-work-when-we-merge-merged-dictionaries#tabs)

# java - 如何从 Class 创建新类？

> ID：12195116
> 
> 赞同：0
> 
> 时间：2012-08-30T10:45:23.117
> 
> 标签：java, android, class

只是出于好奇。如何从构造函数不需要参数的 Class 创建一个新类？这是一个例子：

```
public static BroadcastReceiver startBroadcastReceiver(Context context, Class<?> receiverClass, String receiverTag) {
    BroadcastReceiver receiver = null;

    IntentFilter intentFilter = new IntentFilter(receiverTag);

    receiver = new receiverClass(); // <---- What's the correct syntax?

    if (receiver != null && intentFilter != null) {
        context.registerReceiver(receiver, intentFilter);
    }

    return receiver;
} 
```

我是这样称呼它的：

```
MyTools.startBroadcastReceiver(context, MyBroadcastReceiver, MyBroadcastReceiver.TAG); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:48:59.980

用这个：

```
try{
    receiver = (BroadcastReceiver) receiverClass.newInstance();
}catch(Exception e){
    //do stuff
} 
```

你会叫它

```
MyTools.startBroadcastReceiver(context, MyBroadcastReceiver.class, MyBroadcastReceiver.TAG); 
```

# qt - 存储来自 qdialog 的变量以在 qmainwindow 中使用

> ID：12195117
> 
> 赞同：4
> 
> 时间：2012-08-30T10:45:25.317
> 
> 标签：qt, store, qdialog, qmainwindow

我创建了一个 dialog.h、dialog.cpp 和一个 dialog.ui，我在对话框中有 qlineedit，还有 ok 和 cancel 按钮，我想存储这些 linedit 信息以在不同的主窗口中使用文件。这是我的对话代码。

```
#include <QtGui/QApplication>
#include "dialog.h"
#include "ui_dialog.h"

void Dialog::startplanevolume()
{
    if (xMax==0)
    {
        ui->label_17->setText("Error: Can't start, invalid \nmeasures");
    }
    else
    {
        this->accept();        
    }
}

// Define the length of the volume
void Dialog::bmprange()
{
// Getting some proprieties for the lenght of the volume
QString XMAX=ui->lineEdit->text();
xMax=XMAX.toDouble();

if (xMax==0)
{
    ui->label_17->setText("Error: invalid measures");
}
else
{
    ui->label_17->setText("Valid measures");
}
}

Dialog::Dialog(QWidget *parent) :
    QDialog(parent),
    ui(new Ui::Dialog)
{
    ui->setupUi(this);

  // Control volume measures
    // Making the lineedit objects only accept numbers
    ui->lineEdit->setValidator(new QIntValidator(this));
    connect(ui->lineEdit, SIGNAL(textChanged(QString)), this, SLOT(bmprange()));

  // Start planevolume
    connect(ui->pushButton, SIGNAL(clicked()), this, SLOT(startplanevolume()));
    connect(ui->pushButton_2, SIGNAL(clicked()), this, SLOT(hide()));

}

Dialog::~Dialog()
{
    delete ui;
}

void Dialog::changeEvent(QEvent *e)
{
    QDialog::changeEvent(e);
    switch (e->type()) {
    case QEvent::LanguageChange:
        ui->retranslateUi(this);
        break;
    default:
        break;
    }
} 
```

如何在 mainwindow.cpp 中使用 xMax 的值？

这是我的对话.h

```
#ifndef DIALOG_H
#define DIALOG_H

#include <QDialog>

namespace Ui {
    class Dialog;
}

class Dialog : public QDialog {
    Q_OBJECT
public:
    Dialog(QWidget *parent = 0);
    ~Dialog();

protected:
    void changeEvent(QEvent *e);

private:
    Ui::Dialog *ui;
    double xMax, yMax, zMax, xMMax, yMMax, zMMax, list[6];

public slots:
    void bmprange();
    void startplanevolume();

};

#endif // DIALOG_H 
```

这是我的 main.cpp

```
#include <QtGui/QApplication>

#include "planevolume.h"
#include "dialog.h"

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);

    Dialog *dialog= new Dialog;

    if (dialog->exec())
    {
        planevolume mainwindow;
        mainwindow.show();
        return app.exec();
    }

return 0;
} 
```

那么我想用 xMax 在主窗口 planevolume.cpp 中计算一些东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:27:05.547

我认为您可以在对话框中创建一个 getter 函数。对话框关闭后，您可以使用创建的 getter 函数访问该变量。

您可以将返回的变量作为参数提供给主窗口 (planvolume.cpp)。

我希望这会有所帮助。

编辑：

在 dialog.h / dialog.cpp 添加一个函数：

```
double Dialog::getXMax()
{
     return xMax;
} 
```

之后，您可以访问 main.cpp 中的变量：

```
Dialog *dialog= new Dialog;

if (dialog->exec())
{
    double xMax = dialog->getXMax();
    planevolume mainwindow;
    mainwindow.show();
    return app.exec();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T12:19:04.410

虽然您可以声明`xMax`为公共成员并直接使用它，但更优雅和 OO 风格的方法是编写一个在您的类区域中`Dialog`声明的“getter”函数：`public``Dialog`

```
(...)
public:
    Dialog(QWidget *parent = 0);
    ~Dialog();
    double getxMax() { return xMax; }
(...) 
```

您还需要`setter`在您的`planevolume`类中使用一个函数，该函数也在该`public`区域中声明，如下所示：

```
void setxMax(double xMax); 
```

这个函数的主体将负责对 的值做任何必要的事情`xMax`。

最后，在您的`main()`函数中，您将执行以下操作：

```
if (dialog->exec())
{
    planevolume mainwindow;
    mainwindow.setxMax(dialog->getxMax());   // This passes xMax to main window
    mainwindow.show();
    return app.exec();
} 
```

`show()`或者，您可以重载`planevolume`as

```
planevolume::show(double xMax)
{
  // Do whatever you want with XMax

  show();   // And call original show function
} 
```

在这种情况下，您不需要该`setter`功能，只需调用

```
mainwindow.show(dialog->getxMax()); 
```

# javascript - 跨多个域的 json 响应

> ID：12195118
> 
> 赞同：0
> 
> 时间：2012-08-30T10:45:26.660
> 
> 标签：javascript, json, cross-domain

好吧，我正在做一个网站，该网站应该从数据库中读取标记，然后将它们填充到地图上。如果我在本地工作，它可以正常工作，但是当我指向一个 php 文件在线时，因此不同的域（从 db 请求数据）我没有得到任何响应，并且我有 JSON.parse：意外的数据结束。请注意，我不想更改 php 文件中的任何内容，因为另一个网站已经在使用此文件。调用和执行请求的函数如下所示......非常感谢您的帮助。

```
function ajaxrequestDB() {
    var AJAX = null; // Initialize the AJAX variable.

    if (window.XMLHttpRequest) { // Does this browser have an XMLHttpRequest object?
        AJAX=new XMLHttpRequest(); // Yes -- initialize it.
    } 
    else { // No, try to initialize it IE style
        AJAX=new ActiveXObject("Microsoft.XMLHTTP"); // Wheee, ActiveX, how do we format c: again?
    } // End setup Ajax.

    if (AJAX==null){ // If we couldn't initialize Ajax...
    alert("Your browser doesn't support AJAX."); // Sorry msg.
    return false // Return false, couldn't set up ajax
    }
        AJAX.onreadystatechange = function() { // When the browser has the request info..
            if (AJAX.readyState==4 || AJAX.readyState=="complete") 
            { // see if the complete flag is set.

            //alert(AJAX.responseText);
        var result =JSON.parse(AJAX.responseText);
            //alert(AJAX.responseText);

    for (var i=0; i<result.length; i++) { 
         for (var j=0; j<gmarkers.length; j++) { 
               if (gmarkers[j].myname == result[i].name) {
                    gmarkers[j].setVisible(true);                                  
                    gcircle[j].bindTo('center', gmarkers[j], 'position');
                    gcircle[j].setVisible(true);  
                    var cat = gmarkers[j].mycategory;

                }

            }
    }           

            callback(AJAX.responseText, AJAX.status); // Pass the response to our processing function

        } // End Ajax readystate check.
        }

    //var url='http://localhost/refresh.php'; //this works !
    var url='http://anotherdomain.org/Scripts/refresh.php'; 
    AJAX.open("GET", url, true); // Open the url this object was set-up with.
    AJAX.send(); // Send the request.           

}
function callback(x, y) {
    // alert(x);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:54:14.217

[由于相同的来源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，Ajax 查询传统上需要发送到同一台服务器。

您可以通过添加允许来自其他站点的连接

```
<?php header("Access-Control-Allow-Origin: *"); ?> 
```

给你 PHP 脚本。

另一种方法是使用[JSONP](http://en.wikipedia.org/wiki/JSONP)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:04:34.363

您必须使用 JSONP 等跨域技术。浏览器不允许访问不同域中的服务器。

# c# - 常量、Web 服务、命名空间和共享程序集

> ID：12195123
> 
> 赞同：2
> 
> 时间：2012-08-30T10:45:36.470
> 
> 标签：c#, .net-assembly, datacontract

我的项目中有大量程序集。

*   **合同.Common** ; 包含所有`DataContract`常用的s。
*   **合约同步**；更多功能
*   **合同任务**；更多功能
*   随着产品的发展，另外六个具有更多功能的组件。

一般来说，由于**Contract.Common**被其他 WCF 合同程序集引用。遵循一些最佳实践，阅读更多[WCF 架构和演进/版本](https://stackoverflow.com/questions/10796987/wcf-architecture-and-evolution-version)，有一个静态常量类，例如我的 NamespacePrefix，我用于所有合同。

尽管我正在开发一个独立于通用合同的新合同，但这是第一次。我们称之为**Contract.NewStuff**

按照规范，新合约在我的通用合约库中重用命名空间前缀常量（这意味着它需要引用它）。

对于我的 web 服务客户端，我引用了我的合同程序集并使用它来连接到各种 web 服务并调用它们。

**问题**

由于**Contract.NewStuff**仅在编译时将公共库用于常量（没有运行时程序集），我如何阻止我的客户也必须引用我的**Contract.Common**程序集？

我知道我的 Common Contract 只是一个 20KB 的程序集，我不应该担心它。但是有 300,000 多台机器使用**Contract.NewStuff**，我不明白为什么我应该浪费资源发送该程序集，在未来的版本中更新它等等......

* * *

**更新 1**

使用[添加文件作为链接](https://stackoverflow.com/questions/1116465/how-do-you-share-code-between-projects-solutions-in-visual-studio)选项。没有引用，单一的地方来编辑常量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:56:08.703

您可以将具有常量的类移动到新程序集，以便 Contract.Common 和 Contract.NewStuff 将引用它。我想您甚至可以在编译后“扔掉带有常量的程序集”，因为常量在 C# 编译时嵌入在 IL 代码中，并且不会在运行时每次需要时从常量程序集中读取。
另一个选项是将常量类“链接”到您的 Contract.NewStuff 程序集。在这种情况下，您将在两个项目中没有文件常量类重复。[将文件添加为链接](https://stackoverflow.com/questions/1116465/how-do-you-share-code-between-projects-solutions-in-visual-studio)

# java - Hibernate LAZY fetch 未初始化实例

> ID：12195124
> 
> 赞同：4
> 
> 时间：2012-08-30T10:45:36.987
> 
> 标签：java, hibernate, lazy-loading, fetch

两天前我遇到了懒惰关联的问题，但仍然没有找到这种行为的解释。这是我简化的类层次结构：

```
@Entity
@Table(name="A")
public class A
{
    @Id
    @GeneratedValue
    @Column(name="ID")
    private int id;
    @OneToMany(mappedBy="a", fetch=FetchType.LAZY, cascade=CascadeType.ALL) 
    private Set<B> listB = new HashSet<B>();
}

@Entity
@Table(name="B")
public class B
{
    @Id
    @GeneratedValue
    @Column(name="ID")
    private int id;
    @ManyToOne(fetch=FetchType.LAZY)
    @JoinColumn(name="A_ID")
    private A a;
    @ManyToOne(fetch=FetchType.LAZY)      // ERROR!
    // @ManyToOne(fetch=FetchType.EAGER)  // OK
    @JoinColumn(name="C_ID")
    private C c;
}

@Entity
@Table(name="C")
public class C {
    @Id
    @GeneratedValue
    @Column(name="ID")
    private int id; 
} 
```

当我尝试从 db: A->B->C 读取简单结构时，我得到以下结果：

```
System.out.println(a.getId());                  // 1
for (B b : a.getListB()) {                      
    System.out.println(b.getId());              // 1
    C c = b.getC();
    System.out.println(c.getId());              // 0 !!!
} 
```

如您所见，C 的实例未正确初始化。将 B 类中字段 c 的获取类型从 LAZY 更改为 EAGER 后，一切正常！

我怀疑有一些 CGLIB 魔法，但在规范和谷歌中都找不到线索。有人可以解释一下吗？

谢谢你的帮助！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:01:06.880

如果您想了解延迟加载，请参阅此[答案](https://stackoverflow.com/questions/2192242/what-is-lazy-loading-in-hibernate)；它很好地定义了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:07:08.257

固定的。我的问题不正确。对不起。我的实体类的 getter 和 setter 有 final 修饰符。它打破了单值关联，例如多对一。假设我在休眠日志中遗漏了一些警告......我认为在这种情况下最好通过休眠抛出异常。

# c++ - Box2d C++ AccessViolation 使用 b2fixture out of method

> ID：12195129
> 
> 赞同：1
> 
> 时间：2012-08-30T10:45:43.997
> 
> 标签：c++, box2d, access-violation

我正在创建 box2d 多边形，我想在将夹具连接到身体的方法之外创建夹具，但是当我这样做时，我会遇到访问冲突。

我已经逐步完成了代码，box2d 肯定正在获取夹具对象。

当我将夹具连接到方法内的主体时，它工作正常。当我尝试调用方法时，它会引发访问冲突错误

```
 b2FixtureDef* LineSegment::GenerateFixture(b2Vec2 vertices[4],b2Body* body,b2World* world){
    b2BodyDef bodyDef;
    //bodyDef.type = b2_kinematicBody;
    bodyDef.position.Set(_currentStepStartPosition.x,_currentStepStartPosition.y);
    body =world->CreateBody(&bodyDef);
    int32 count = 4;
    b2PolygonShape polygon;
    polygon.Set(vertices, count);
    b2FixtureDef fixtureDef2;
    fixtureDef2.shape = &polygon;
    fixtureDef2.density = 1.0f;
    fixtureDef2.friction = 0.3f;
    body->CreateFixture(&fixtureDef2);/// works if i attatch the fixture here here
    return &fixtureDef2;
} 
```

当我在这里附加夹具时调用方法失败

```
 bool LineSegment::GenerateNextBody(b2Body* retBody){
    b2BodyDef bodyDef;
    bodyDef.type = b2_staticBody;
    bodyDef.position.Set(_currentStepStartPosition.x,_currentStepStartPosition.y);
    retBody =world->CreateBody(&bodyDef);
    _currentStep++;
    b2Vec2 vertices[4];
    if(_inclinePerStep != 0){
    GetVertsInclineSquare(vertices,_stepWidth,_thickness,_inclinePerStep);
    }else{
        GetVertsSquare(vertices,_stepWidth,_thickness);
    }
    if(_currentStep == 1){
        _GameWorldVerticies[0] =b2Vec2((_currentStepStartPosition.x+vertices[0].x)*PTM_RATIO,(_currentStepStartPosition.y+vertices[0].y)*PTM_RATIO);
        _GameWorldVerticies[3] =b2Vec2((_currentStepStartPosition.x+vertices[3].x)*PTM_RATIO,(_currentStepStartPosition.y+vertices[3].y)*PTM_RATIO);

    }
    b2FixtureDef* fixture = GenerateFixture(vertices,retBody,world);

    //retBody->CreateFixture(fixture); throws a access violation if i attatch the fixture here
    _currentStepStartPosition.x += vertices[2].x+(vertices[2].x);
    _currentStepStartPosition.y +=(_inclinePerStep/2);
    if(_steps <= _currentStep){
        _GameWorldVerticies[1] =b2Vec2((_currentStepStartPosition.x+vertices[1].x)*PTM_RATIO,(_currentStepStartPosition.y+vertices[1].y)*PTM_RATIO);
        _GameWorldVerticies[2] =b2Vec2((_currentStepStartPosition.x+vertices[2].x)*PTM_RATIO,(_currentStepStartPosition.y+vertices[2].y)*PTM_RATIO);
        return false;
    }
    return true;
} 
```

**更新**

新片段

```
 b2FixtureDef* fixtureDef2 = new b2FixtureDef();
    fixtureDef2->shape = &polygon;
    fixtureDef2->density = 1.0f;
    fixtureDef2->friction = 0.3f;
    //body->CreateFixture(&fixtureDef2);/// works if i attatch the fixture here here
    return fixtureDef2; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T11:10:54.343

问题是您返回一个指向局部变量 in 的指针`GenerateFixture`，这是*未定义的行为*。该变量`fixtureDef2`在堆栈上，当函数返回时，堆栈的该区域不再有效。当您延迟调用该`CreateFixture`函数时，指针现在将指向*该*函数的堆栈区域。

要解决这个问题，您可以使用例如在堆上创建它`new`。

# php - 通过管理员将输入字段添加到 cakephp 表单

> ID：12195135
> 
> 赞同：0
> 
> 时间：2012-08-30T10:46:22.120
> 
> 标签：php, cakephp

我正在努力找出是否可以做到这一点，但是我有一个带有许多输入字段的 cakephp 表单，提交后我将它们写入文本文件，我可以通过单击按钮在此处动态添加字段，但是：

我的问题是，如果我有一个管理页面，我如何让它动态地将字段添加到页面并让它们永远留在那里，而不仅仅是那个会话？

真的很难弄清楚如何做到这一点，任何指导将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:58:59.167

让他们坚持下去。您需要存储表单及其具有的字段：“Form hasMany FormField”。这些字段应该描述一种类型，以便 FormHelper 将呈现正确的输入。

当您想显示表单时，再次从数据库中读取该信息并根据您存储的信息呈现表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T11:00:40.890

我猜你已经有一个 javascript 函数可以动态地将字段添加到你的管理页面。那是对的吗？

我不使用 CakePHP，但我使用的一般解决方法是使用 javascript 函数同时更新数据库中存储表单布局的表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T04:42:56.923

以下是一些可用于实现目标的 Jquery Form builder 插件。

1.  [http://www.berthou.com/us/2009/09/05/dynamic-forms-builder-with-jquery/](http://www.berthou.com/us/2009/09/05/dynamic-forms-builder-with-jquery/)
2.  [https://github.com/botskonet/jquery.formbuilder](https://github.com/botskonet/jquery.formbuilder)
3.  [http://code.google.com/p/jquery-form-b​​uilder-plugin/](http://code.google.com/p/jquery-form-builder-plugin/)
4.  [http://www.elizaibeth.com/2010/11/23/dynamic-jquery-form-b​​uilders/](http://www.elizaibeth.com/2010/11/23/dynamic-jquery-form-builders/)

这是[PHP FormBuilder 类](http://www.designaeon.com/php-form-builder-class/)与教程的极好链接，您可以将其用作 CakePHP 的供应商库。

# iphone - 在 iPhone 上收到本地通知时显示视图控制器的问题

> ID：12195136
> 
> 赞同：0
> 
> 时间：2012-08-30T10:46:25.690
> 
> 标签：iphone, objective-c, ios, uiviewcontroller, uilocalnotification

以下代码是我在应用程序收到特定本地通知时显示视图控制器的最新尝试：

```
- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification{
    NSLog(@"Notification Received.  UserInfo: %@", [notification.userInfo valueForKey:@"notificationType"]);
    if ([[notification.userInfo valueForKey:@"notificationType"] isEqualToString:@"backup"])
    {
        NSLog(@"Backup notification received.");
        NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
        [defaults setObject:@"Yes" forKey:@"shouldBackup"];
        [defaults synchronize];
        SettingsViewController *vc = [self.window.rootViewController.tabBarController.viewControllers objectAtIndex:3];
        [self.window.rootViewController.tabBarController.navigationController pushViewController:vc animated:NO];
    }
    else
    {
        NSLog(@"Did receive notification: %@, set for date:%@ .", notification.alertBody, notification.fireDate);
    }
} 
```

然后，我在 viewDidAppear 方法中使用了这段代码来确定是否执行备份：

```
if ([[defaults objectForKey:@"shouldBackup"] isEqualToString:@"Yes"]){
        [defaults setObject:@"No" forKey:@"shouldBackup"];
        [defaults synchronize];

        HUD = [[MBProgressHUD alloc] initWithView:self.navigationController.view];
        [self.navigationController.view addSubview:HUD];

        HUD.delegate = self;
        HUD.labelText = @"Backing Up Your Data..";
        HUD.minSize = CGSizeMake(135.f, 135.f);

        [HUD showWhileExecuting:@selector(performBackup) onTarget:self withObject:nil animated:YES];
    } 
```

但是，似乎从未调用 viewDidAppear，任何人都可以解释我做错了什么吗？我现在尝试了几种不同的方法，但我似乎无法让它发挥作用..

谢谢，

泰辛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:19:16.270

您需要将 SettingsViewController 从 NavigationController 推送到堆栈上，以便调用其委托方法（在本例中为 viewDidAppear）。看来您的根视图控制器是 TabBarController。在这种情况下，将 UINavigationControllerDelegate 添加到您的根 VC，可以在此处找到有关下一步操作的更多信息[http://www.touchthatfruit.com/viewwillappear-and-viewdidappear-not-being-ca](http://www.touchthatfruit.com/viewwillappear-and-viewdidappear-not-being-ca)

另外，您确定 viewDidAppear 没有被调用，或者只是其中的代码没有被调用？添加断点以查找。

最后，你有没有 [super viewDidAppear:animated]; 在 SettingsViewController 的 viewDidAppear 方法中？

如果一切都失败了，您可以随时从父视图控制器手动调用 viewDidAppear :)

希望这可以帮助！

# ruby-on-rails - Feedzirra 安装不正确？

> ID：12195139
> 
> 赞同：1
> 
> 时间：2012-08-30T10:46:38.780
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, feedzirra

我正在尝试在我的 Rails 3.2 应用程序中使用 Feedzirra 来进行简单的提要解析。我在网上找到了这个：http: [//asciicasts.com/episodes/168-feed-parsing](http://asciicasts.com/episodes/168-feed-parsing)。我按照那里的说明安装了 gem，但我相信这个说明有些过时了，因为它指的是`config.gem`在我的文件中放置一行`config/environment.rb`，它不能容纳这样的调用。我收到一个`uninitialized constant ApplicationController::Feedzirra`错误，我不知道为什么。

我将此代码放在我的应用程序控制器中：

```
before_filter :load_blog_feed

def load_blog_feed
  feed = Feedzirra::Feed.fetch_and_parse(feed_url)
  @blog_posts = feed.entries[0...3]
end 
```

我把这条线放在`config/application.rb`：

```
config.gem "pauldix-feedzirra", :lib => "feedzirra", :source => "http://gems.github.com" 
```

最后，我把这段代码放在一个视图中：

```
<div id="blog_feed">
  <% @blog_posts.each do |post| %>
    <p>
      <span class="post_title"><%= link_to "#{post.title} >>", post.url %></span><br>
      by <span class="post_author"><%= post.author %></span> on <span class="post_date"><%= post.published %></span>
    </p>
  <% end %>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:08:15.700

对于 Rails 3.2，更准确地说，将以下行添加到**config/application.rb**文件：

```
config.gem "feedzirra", :lib => "feedzirra", :source => "http://gems.github.com" 
```

和以下行到**Gemfile**：

```
gem 'feedzirra' 
```

然后运行：

```
bundle install 
```

然后您就可以在您的应用程序中顺利使用 feedzirra。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:54:48.620

使用捆绑器！

地方

----- 已编辑

`gem 'feedzirra'`

进入 Gemfile，然后运行`bundle install`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T03:41:37.540

好的，我找到了答案……只需包含`gem 'feedzirra'`在您的 Gemfile 中并运行`bundle install`. `gem 'pauldix-feedzirra'`不过，似乎不起作用。

# internet-explorer - 在 IE 中使用锚点重定向

> ID：12195141
> 
> 赞同：1
> 
> 时间：2012-08-30T10:46:45.143
> 
> 标签：internet-explorer, redirect, anchor

在会话超时时，我重定向到一个错误页面，其中包含包含哈希书签的先前 URL 的 QueryString。但在 IE 8 和 9 中，window.location.hash 部分在重定向后不可用。

例如 SessionTimedOut?returnUrl=mylastpage#bookmark5

重定向后，bookmark5 哈希不会出现在 IE 中，或者奇怪的是它无法读取 window.location.hash 返回 null。

它适用于 FF 和 Chrome，如果我不事先重定向，可以读取书签。

ta

# php - 数据库中的 codigniter 下拉列表

> ID：12195146
> 
> 赞同：-3
> 
> 时间：2012-08-30T10:46:58.967
> 
> 标签：php, codeigniter, drop-down-menu

//模型

```
function shop_dropdown()
{
    $this->db->select('shop'); 
    $this->db->from('shop');
    //$this->db->where('category_online', 1);
    $query = $this->db->get();
    foreach($query->result_array() as $row)
    {
        $data[$row['id']]=$row['name'];
    }
    return $data;

} 
```

控制器//

```
function shop_dropdown()
{
    $data = array();

    $this->load->model('shop_model');
    $shop['select_options'] =              $this->shop_model->shop_dropdown();
    $this->load->view('shop/product_view', $shop);

} 
```

看法//

```
<?php 
    echo form_dropdown('shop', $select_options);

?> 
```

这不起作用。请帮助我从数据库中创建一个下拉列表。如果您可以编写新代码。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:10:20.073

我不确定你是否有自动加载表单助手，如果没有，除非你在控制器中加载它，否则你不能使用 form_dropdown 函数。我没有看到您在任何地方加载表单助手。

[http://codeigniter.com/user_guide/helpers/form_helper.html](http://codeigniter.com/user_guide/helpers/form_helper.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:07:53.347

像这样修改

```
function shop_dropdown()
{
   $data = array();
   $this->load->model('shop_model');
   $shop = $this->shop_model->shop_dropdown();
   $this->load->view('shop/product_view', $shop);
} 
```

在你看来

```
echo form_dropdown('shop', $shop->option);//option is an value taking form database 
```

就是这样。如果对您有用，请接受答案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T09:07:10.417

您正在模型中选择“商店”列。我认为你的模型应该是这样的

```
function shop_dropdown()
{
$this->db->select('id,name'); //column names you want to select, can be optional if you want to select all columns. 
$this->db->from('shop');   //table name, required
//$this->db->where('category_online', 1);
$query = $this->db->get();
foreach($query->result_array() as $row)
{
 $data[$row['id']]=$row['name'];  //make sure 'id' and 'name' ,columns are present in table
}
return $data;

} 
```

我希望你已经编辑了 application/config/databse.php

# c# - 在mysql更新查询中使用c#datetime

> ID：12195147
> 
> 赞同：2
> 
> 时间：2012-08-30T10:47:02.487
> 
> 标签：c#, mysql, dll

我正在尝试使用来自 MySQL 网站的 .net 的 mysql 连接器从 C# 到 MySQL（版本 5.5.27）运行查询。

我正在开发的 .dll 的最终目标是跟踪我读过的行。

我用来读取数据库的查询是：

```
string strSQL = "SELECT date,ask,bid,volume FROM gbpjpy where `read` = 0"; 
```

要阅读日期，我有：

```
DateTime dateTime = mysqlReader.GetDateTime(0); 
```

这很好用。

该表有 5 列，最后一列称为“读取”。选择查询和解析完成后，我立即执行以下查询：

```
string sqlFormattedDate = dateTime.ToString("yyyy/MM/dd HH:mm:ss");
string query = "UPDATE gbpjpy SET `read` = 1 WHERE `date` = " + sqlFormattedDate; 
```

但是，当我检查日志时，出现以下错误：

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“01:20:08”附近使用正确的语法。

读入的第一个日期是 2012/08/30 01:20:08（这就是它在 MySQL 表中的显示方式，因此它是从 01:20:08 获得的）。

我试过 var sqlFormattedDate，将 ToString 重载更改为 yyyy-MM-dd（使用破折号而不是正斜杠）和 dateTime.ToString() 都无济于事。

为什么 MySQL 没有拾取整个字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T10:49:44.903

基本上，您应该避免直接在查询中包含值。

毫无疑问，您*可以*在值周围加上引号……但您不应该这样做。相反，您应该使用参数化 SQL，并将值放入参数中。这样一来，您就不会进行容易出错的字符串转换，避免 SQL 注入攻击（针对字符串参数），并将代码与数据分开。

（作为一个如何巧妙地破坏它的示例，您当前的代码将使用“当前文化”的日期和时间分隔符 - 这可能不是`/`and `:`。您可以通过指定`CultureInfo.InvariantCulture`... 来解决这个问题，但最好不要进行转换。）

查找有关您正在使用`Parameters`的任何类型（例如）的属性的文档，这有望为您提供示例。在参数化 SQL 的文档中甚至可能有一个教程部分。例如，[此页面](http://dev.mysql.com/doc/refman/5.0/es/connector-net-examples-mysqlcommand.html#connector-net-examples-mysqlcommand-parameters)*可能*是您所追求的。`Command``MySqlCommand.Parameters`

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:50:38.260

我想您必须将日期的整个值放在引号中。如果你真的连接你的查询，它看起来像

```
UPDATE gbpjpy SET `read` = 1 WHERE `date` = yyyy/MM/dd HH:mm:ss 
```

该等号只会取值直到第一个空格。

相反，它应该看起来像

```
UPDATE gbpjpy SET `read` = 1 WHERE `date` = 'yyyy/MM/dd HH:mm:ss' 
```

这是这种情况下的特殊原因，但是，像这样连接查询会导致[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)的真正可能性。根据经验，您不应该这样做。您可以使用参数化查询，并且可能有一个用于执行此操作的 .NET 连接器的 API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-10T15:44:44.030

将信息放入参数中允许代码根据需要进行格式化。很可能，您的原始问题可能源于在您的日期格式中使用斜杠而不是破折号。我会假设斜杠可以工作，但我见过的大多数文档都有用 MySqlDateTimes 分隔日期的破折号。*

# java - 子字符串崩溃

> ID：12195151
> 
> 赞同：1
> 
> 时间：2012-08-30T10:47:11.147
> 
> 标签：java, substring

我不知道为什么，但是如果我创建一个子字符串，应用程序就会崩溃！

这是代码：

```
while(data_mio.moveToNext())
{
    titolo_da_inserire=data_mio.getString(prodotto);
    titolo_da_inserire=titolo_da_inserire.substring(0,35)+"...";
    personList.add( new Prodotto_per_lista(
                      R.drawable.freccia_1, titolo_da_inserire,
                      Integer.parseInt(data_mio.getString(id_immagine)))
                  );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:48:29.413

实际上声明`String titolo_da_inserire`就像，

```
String titolo_da_inserire = ""; 
```

现在，在使用之前`subString()` **检查**String titolo_da_inserire的长度

```
if(titolo_da_inserire.length() >= 35)
 titolo_da_inserire = titolo_da_inserire.substring(0,35)+"...";
else
 titolo_da_inserire = titolo_da_inserire.substring(0,titolo_da_inserire.length())+"..."; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T11:07:17.170

如果您的`titolo_da_inserire` **String**少于 35，那么它将抛出`java.lang.StringIndexOutOfBoundsException`您的应用程序崩溃的方式

**样本**

```
String st ="string";

st = st.substring(0,15); // throws exception String index out of range

System.out.println(st); 
```

所以你需要检查长度

```
if(st.length()>15)

{

st = st.substring(0,15);

System.out.println(st);

} 
```

# wpf - 作为 Visual Studio 2010 编辑器装饰的一部分添加的 ComboBox 不会更改选择

> ID：12195158
> 
> 赞同：1
> 
> 时间：2012-08-30T10:47:34.443
> 
> 标签：wpf, visual-studio-2010, visual-studio-extensions, visual-studio-sdk

我正在开发 Visual Studio 2010 编辑器装饰扩展。由于整个 VS 编辑器是基于 WPF 的，因此可以添加任意 WPF 组件。当我将 ComboBox 作为新装饰添加到编辑器时，我可以单击 ComboBoxItem 但 ComboBox 选择不会改变。代码看起来像这样：

```
var cbox = new ComboBox();
var cboxitem = new ComboBoxItem();
cboxitem.Content = "Item 1";
cbox.Items.Add(cboxitem);
var cboxitem2 = new ComboBoxItem();
cboxitem2.Content = "Item 2";
cbox.Items.Add(cboxitem2);

Canvas.SetLeft(cbox, 100);
Canvas.SetTop(cbox, _view.ViewportTop);
_adornmentLayer.AddAdornment(AdornmentPositioningBehavior.ViewportRelative, null, null, cbox, null); 
```

我错过了什么吗？

# objective-c - 为什么 addSubview 不显示？

> ID：12195163
> 
> 赞同：3
> 
> 时间：2012-08-30T10:47:49.700
> 
> 标签：objective-c, ios

我想以编程方式添加`myView`到父视图。但它不会出现在屏幕上。代码有什么问题？

```
@interface ViewController ()
@property (nonatomic,weak) UIView *myView;
@end

@implementation ViewController
@synthesize myView = _myView;

- (void)viewDidLoad
{
    [super viewDidLoad];
    CGRect viewRect = CGRectMake(10, 10, 100, 100);
    self.myView = [[UIView alloc] initWithFrame:viewRect];
    self.myView.backgroundColor = [UIColor redColor];
    [self.view addSubview:self.myView];
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T11:22:30.010

代替

```
@property (nonatomic,weak) UIView *myView; 
```

和

```
@property (strong, nonatomic) UIView *myView; 
```

它应该工作:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-24T07:58:11.783

```
@interface ViewController ()

@end

@implementation ViewController

UIView *myView;

-(void)viewDidLoad
{
    [super viewDidLoad];

    CGRect viewRect = CGRectMake(10, 10, 100, 100);

    myView = [[UIView alloc] initWithFrame:viewRect];

    myView.backgroundColor = [UIColor redColor];

    [self.view addSubview:myView];
} 
```

试试这个，它会工作......</p>

# c++ - 如何永久更改 ListView 中项目的颜色？

> ID：12195174
> 
> 赞同：0
> 
> 时间：2012-08-30T10:48:43.070
> 
> 标签：c++, winapi, listview, common-controls

我已经创建了一个列表视图

```
list[0]=CreateWindow(WC_LISTVIEW,L"",WS_DLGFRAME|WS_CHILD|WS_VISIBLE|LVS_REPORT|LVS_SINGLESEL,-,-,-,-,hwnd,NULL,hInstance,NULL);
LVCOLUMN lvcolumn;
lvcolumn.mask = LVCF_FMT|LVCF_TEXT|LVCF_WIDTH;
lvcolumn.fmt = LVCFMT_CENTER;
lvcolumn.pszText = L"a";
lvcolumn.cx = 100;
ListView_InsertColumn(list[0],0,&lvcolumn);
lvcolumn.pszText = L"b";
ListView_InsertColumn(list[0],1,&lvcolumn);
lvcolumn.pszText = L"c";
ListView_InsertColumn(list[0],2,&lvcolumn);
lvcolumn.pszText = L"d";
ListView_InsertColumn(list[0],3,&lvcolumn); 
```

我使用 LPNMLVCUSTOMDRAW 插入颜色项目

```
case WM_NOTIFY:
    if( ((LPNMHDR)lParam)->code == NM_CUSTOMDRAW){
        switch( ((LPNMLVCUSTOMDRAW)lParam)->nmcd.dwDrawStage){
            case CDDS_PREPAINT:
                return CDRF_NOTIFYITEMDRAW;
                break;
            case CDDS_ITEMPREPAINT:
            {
                LPNMLVCUSTOMDRAW customDraw = (LPNMLVCUSTOMDRAW)lParam;

                customDraw->clrText = getcolor();
                return CDRF_NEWFONT;
                break;
            }
            default: return CDRF_DODEFAULT;
        }
    }
    break; 
```

getcolor 是函数响应 colorref。每个项目都有自己的文本颜色。但是当父窗口隐藏并再次显示时，项目颜色会发生变化。那么如何保持它不改变或者我们有另一种方法来设置文本颜色

还有一个我通过这种方式创建了一个新的列表视图项目（以防有人需要它）

```
ListView_InsertItem(hwndlist,&lvitem);
ListView_SetItemText(hwndlist,i,k,(LPWSTR)strarr[k].c_str()); 
```

# dojo - Dojo/Dijit SimpleTextarea 和 RadioButton（与 Spring-JS 集成）不支持通过“必需”属性进行验证，但在 FireFox 中有效？

> ID：12195177
> 
> 赞同：0
> 
> 时间：2012-08-30T10:48:51.423
> 
> 标签：dojo, dijit.form, spring-js

我在将 DOJO javascript 库与 Spring 框架集成时遇到了一些问题。具体来说，问题是如何验证文本区域和单选按钮。我正在使用 Spring-Js 库来装饰标准的 html 表单元素，例如

```
<form:input path="actionDescription" id="actionDescriptionId"/>
                    <script type="text/javascript">
                        Spring.addDecoration(new Spring.ElementDecoration({
                            elementId : "actionDescriptionId",
                            widgetType : "dijit.form.SimpleTextarea",
                            widgetAttrs : { disabled : false,
                                            required: true,
                                            rows: "4",
                                            cols: "60",
                                            placeHolder: "Enter description of fault",
                                            style: "width:auto;height:50px;"    
                                 }}));  
                    </script> 
```

我一直在 FireFox 中开发（使用 Firebug），我现在才意识到（在查看 Dojo/Dijit 文档之后）dijit.form.SimpleTextArea 不支持“必需”属性。我以前从未检查过它，因为它在 FireFox 中一切正常。我有一个表单按钮，单击该按钮将验证所有装饰元素，并且在 Firefox 中，包括文本区域和单选按钮在内的所有组件都会弹出一个漂亮的工具提示，指示该字段是必需的。使用的代码行是这样的：

```
<script type="text/javascript">
        Spring.addDecoration(
                new Spring.ValidateAllDecoration({elementId:'proceed', event:'onclick'}));
    </script> 
```

这很棒，因为它会阻止表单提交，直到完成所有必填字段。单选按钮弹出一个很好的消息说用户必须选择一个选项，并且文本区域弹出一个很好的消息告诉用户输入一些东西。但是，它在 Safari 或 IE 中不起作用。验证不适用于这些其他浏览器上的文本区域和单选按钮，因此服务器端验证用于将用户重定向回表单。尽管这可行，但我更喜欢首先阻止表单提交并具有一致的错误报告，而不是客户端和服务器端错误消息的混合。

当 dijit textarea 组件不应该支持“必需”属性时，我真的很难理解为什么它在 firefox 中工作？我喜欢使用 spring-js 来增强基本组件的想法，但我真的不明白如何在 FireFox 中使用 digit.form.SimpleTextarea 装饰元素并根据 digit 文档进行验证，但没有任何支持验证？

我想知道是否有其他使用 Spring-Js/Spring-DOJO 集成的 Spring 开发人员遇到过这种行为，以及他们是否对它的工作原理有更深入的了解。我真正想要的是在包括 IE 在内的所有浏览器中验证文本区域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:45:45.857

好的，所以问题在于 Firefox 中的 HTML5 为文本区域和单选按钮提供了验证行为。由于我的目标受众是 IE（可能是 IE6），我不能依赖 HTML5 表单验证，因此我坚持认为 DOJO 的文本区域和单选按钮的 Dijit 小部件不支持验证。

感谢[http://www.harelmalka.com/?p=137](http://www.harelmalka.com/?p=137)我创建了一个解决方法来启用文本区域的验证。然而，对于单选按钮，我提供了一个默认选择来否定验证的需要。

# cuda - 在CUDA中将结构数组从主机复制到设备

> ID：12195190
> 
> 赞同：0
> 
> 时间：2012-08-30T10:49:29.353
> 
> 标签：cuda

我正在尝试将一组结构从 CUDA 中的主机复制到设备。例如：

```
#define N  1000;
#define M 100000;

typedef struct {
     int i;
     float L[N];    
}t ; 

__global__ void kernel() {
  //do something
}

main () {
   t *B, *B_d;   // Pointer to host & device arrays of structure
   int size = M * sizeof(t);

   B=(t*)calloc(M,sizeof(t));
   cudaMalloc((void **) &B_d, size);   // Allocate array of structure on device
  // readind B from file ...
  cudaMemcpy(B_d, B, size, cudaMemcpyHostToDevice);
  kernel<<<1, 1 >>>();

} 
```

这是对还是错？以及如何使用内核功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:59:33.500

现在您可以将您的内核声明为接受类型为 (t *) 的参数并将您的 B 传递给内核调用。

一些评论： 1\. 在内核调用中只使用 1 个线程是非常无效的。为了获得最佳结果，您需要在块中拥有 32 个线程的倍数。2\. 拥有结构数组将不允许您的代码有效地使用内存带宽。为了获得最佳结果，您需要进行合并读取。

# php - 2个大型MySQL数据库表的比较时间

> ID：12195195
> 
> 赞同：0
> 
> 时间：2012-08-30T10:49:53.090
> 
> 标签：php, mysql

我已经导入了 2 个我想比较到 MySQL 表中的 .csv 文件。现在我想使用连接来比较它们。

但是，每当我在查询中包含这两个表时，我都没有得到 phpMyAdmin 的响应（有时它显示“超出最大执行时间）。

两个 db 表中的记录大小最大为 73k。我不认为那是巨大的数据。即使是一个简单的查询，如

```
SELECT *
FROM abc456, xyz456 
```

似乎挂了。我做了一个解释，我在下面得到了这个。我不知道能从中得到什么。

```
id  select_type     table   type    possible_keys   key     key_len     ref    rows     Extra
1   SIMPLE  abc456  ALL     NULL    NULL    NULL    NULL    73017   
1   SIMPLE  xyz456  ALL     NULL    NULL    NULL    NULL    73403   Using join buffer 
```

有人可以帮忙吗？

更新：添加了具有复合键的表结构。该表中将插入大约 100000 多条记录。

```
CREATE TABLE IF NOT EXISTS `abc456` (
`Col1` varchar(4) DEFAULT NULL,
`Col2` varchar(12) DEFAULT NULL,
`Col3` varchar(9) DEFAULT NULL,
`Col4` varchar(3) DEFAULT NULL,
`Col5` varchar(3) DEFAULT NULL,
`Col6` varchar(40) DEFAULT NULL,
`Col7` varchar(200) DEFAULT NULL,
`Col8` varchar(40) DEFAULT NULL,
`Col9` varchar(40) DEFAULT NULL,
`Col10` varchar(40) DEFAULT NULL,
`Col11` varchar(40) DEFAULT NULL,
`Col12` varchar(40) DEFAULT NULL,
`Col13` varchar(40) DEFAULT NULL,
`Col14` varchar(20) DEFAULT NULL,
KEY `Col1` (`Col1`,`Col2`,`Col3`,`Col4`,`Col5`,`Col6`,`Col7`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T10:52:23.323

看起来您正在查询中进行纯[catesian 联接](http://www.tutorialspoint.com/sql/sql-cartesian-joins.htm)。

您不应该加入某些字段的表格吗？如果你这样做并且查询仍然需要很长时间才能执行，你应该放置适当的索引来加速查询。

花费这么长时间的原因是它试图将第一个表的每一行连接到第二个表的每一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T12:58:16.227

您需要一个连接条件，以某种方式确定应匹配哪些行：

`SELECT * FROM abc456, xyz456 WHERE abc456.id = xyz456.id`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T06:23:19.147

1.  在连接列上添加索引。这应该有助于提高性能。

2.  使用 MySQL Workbench 或 MySQL Client（控制台）进行长查询。phpmyadmin 并非旨在显示返回 100k 行的查询 :)

3.  如果您真的必须使用 phpmyadmin 并且需要运行长查询，则可以使用 Firefox 扩展来防止 phpmyadmin 超时：[phpMyAdmin Timeout Preventer（直接链接！）](http://releases.mozilla.org/pub/mozilla.org/addons/11571/phpmyadmin_timeout_preventer-0.4-fx.xpi)

有一个直接链接，因为我找不到英文描述。

# ios - 以编程方式退出应用程序或转到仪表板（主页） - IOS

> ID：12195197
> 
> 赞同：4
> 
> 时间：2012-08-30T10:50:01.207
> 
> 标签：ios, objective-c

我想以编程方式退出我的应用程序，我用谷歌搜索，有人建议使用 exit(1)，但我猜苹果不支持。如果是这种情况，我如何以编程方式退出我的应用程序。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-30T11:07:35.163

`exit(0);`会工作但不要使用它

您不应强制关闭应用程序，因为终止应用程序的标准方法是按下主页按钮（或使用多任务栏）

> # 不要以编程方式退出
> 
> * * *
> 
> 永远不要以编程方式退出 iOS 应用程序，因为人们倾向于将其解释为崩溃。但是，如果外部环境阻止您的应用程序按预期运行，您需要告诉您的用户这种情况并解释他们可以做些什么。根据应用程序故障的严重程度，您有两种选择。
> 
> **显示一个有吸引力的屏幕，描述问题并提出更正建议。**屏幕提供反馈，让用户确信您的应用程序没有问题。它使用户处于控制之中，让他们决定是否要采取纠正措施并继续使用您的应用程序，或者按下主页按钮并打开另一个应用程序
> 
> **如果您的应用程序的某些功能无法正常工作，请在人们激活该功能时显示屏幕或警报。**仅当人们尝试访问不起作用的功能时才显示警报。

^([来源](https://developer.apple.com/library/ios/qa/qa1561/_index.html))

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T11:08:59.173

我相信你没有正确阅读评论，因此在这里发布你的问题的答案：“不要那样做。因为苹果不允许应用程序像那样崩溃。”

看这里。[如何在处理本地通知后优雅地退出我的 iOS 应用程序](https://stackoverflow.com/questions/7254666/how-do-i-exit-my-ios-app-gracefully-after-handling-a-local-notification)，这里[在 iOS 4.0 中退出应用程序，](https://stackoverflow.com/questions/3097244/exit-application-in-ios-4-0)这里有票价讨论。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T11:13:08.407

iOS4 发布后，APPLE 增加了多任务处理（新功能）。此功能使用户能够在后台保持应用程序处于暂停状态，如果在这两者之间他必须进行一些其他活动（例如接听电话）。所以苹果认为你的应用应该在后台维护，直到用户从后台删除应用。在此之后，如果您想退出使用`exit(0);`，使用它会进一步导致 AppStore 拒绝

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-08-30T11:13:10.623

**这是在您的应用程序中完成`exit`功能**的错误方法。**当我阅读您的问题时，我想到了这一点，从未在任何地方应用过，所以如果您要实现它，请小心！**

 **```
- (void) exitApp
{
      NSArray *array = [[[NSArray alloc] init] autorelease];
      NSLog(@"%@",[array objectAtIndex:10]); //will crash here, looks like exit.
} 
```

PS您可以将此代码放在您的`UIAlertView`询问**退出确认**中，例如`Do you really want to exit?`。在`YES`按下按钮时，您可以调用`[self exitApp];`用户认为他将退出应用程序。**

# node.js - Node.js 套接字挂起错误

> ID：12195201
> 
> 赞同：1
> 
> 时间：2012-08-30T10:50:05.090
> 
> 标签：node.js

将 http.createServer 与 node.js 一起使用时，出现以下错误：

```
events.js:48
    throw arguments[1]; // Unhandled 'error' event
                   ^
Error: socket hang up
at createHangUpError (http.js:1092:15)
at Socket.onend (http.js:1155:27)
at TCP.onread (net.js:349:26) 
```

简单的代码：

```
http.createServer(
  connect_cache({rules: [{regex: /.*/, ttl: 60000}]}),
  function(b_request, b_response){ ..... }
); 
```

那么，错误是什么意思呢？我该如何解决？

感谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:09:45.950

`http.createServer()`最多期望一个函数作为其参数，然后将其设置为`request`事件的处理程序。`connect_cache()`没有作为处理程序的正确签名。大概它被编写为在 Connect 下使用的中间件或在其上构建的东西（如 Express），但您不能将 Connect 中间件直接传递给 ; 的实例`http.Server`。您需要创建一个 Connect 对象，将中间件传递给它，然后将 Connect 对象传递给`http.createServer()`.

# objective-c - NSAppleScript 和无响应的界面 - Objective-C

> ID：12195203
> 
> 赞同：2
> 
> 时间：2012-08-30T10:50:07.583
> 
> 标签：objective-c, cocoa, thread-safety, applescript

我想从我的应用程序中运行几行 applescript 代码。标准方法是使用 NSAppleScript 类。但是，由于该代码可能需要几分钟才能完成，因此我必须使用单独的线程，否则界面将停止。[正如这里](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/ThreadSafetySummary/ThreadSafetySummary.html)所说，最大的问题是NSAppleScript 类只能在主线程上运行。

因此，如果我在单独的线程上运行代码，我的应用程序就会崩溃；如果我在主线程上运行它，它就会停止。有任何想法吗？

此外，我考虑使用 NSTask 和 osascript 命令，但我在某处（找不到链接）看到 osascript 不支持用户输入，例如对话框和其他东西。我不确定这是否属实，但如果是这样，那么 osascript 不是解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T17:09:22.397

所以我最终为此编写了一个助手，通过 NSTask 启动。这是代码，以防有人感兴趣：

对于启动器：

```
NSArray* args = [NSArray arrayWithObject: <<AS code here>>];

task = [NSTask new];
[task setLaunchPath: [[NSBundle mainBundle] pathForResource: @"ASHelper" ofType: @""]];
[task setArguments: args];
[task launch]; 
```

和帮手：

```
int main(int argc, const char * argv[])
{
    @autoreleasepool {
        NSString* source = [NSString stringWithCString: argv[1] length: strlen(argv[1])];
        NSAppleScript* as = [[NSAppleScript alloc] initWithSource: source];
        [as executeAndReturnError: nil];
    }
    return 0;
} 
```

# arrays - KineticJS 中的数组

> ID：12195204
> 
> 赞同：0
> 
> 时间：2012-08-30T10:50:09.673
> 
> 标签：arrays, undefined, shape, kineticjs

我对 javascript 和 kinetic-js 还很陌生。

不久前，我使用 Kinetic-js 3.9.0 创建了一个包含 Shape 的脚本。是这样的（只是相关的代码）：

```
popup = new Kinetic.Shape({
  drawFunc: function() {
    item = itemlist[0];
  },
  itemlist: []
} 
```

使用 3.9.0 可以在 Firefox 中运行，但从 3.9.2 开始，它不再工作了。错误控制台给出消息“TypeError：popup.itemlist 未定义”。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:06:26.410

我认为您应该在声明弹出对象后初始化 itemlist 变量。

Kinetic 似乎在其构造方法中不接受用户变量。

```
<!DOCTYPE HTML>
<html>
<head>
    <style>

    body {
        margin: 0px;
        padding: 0px;
    }
    </style>
    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v3.10.5.js"></script>

    <script>
        function draw() {
            var stage = new Kinetic.Stage({
                container : "container",
                width : 800,
                height : 600
            });

            var layer = new Kinetic.Layer();

            var popup = new Kinetic.Shape({
                drawFunc: function(context) {
                    context.fillText(this.itemlist[0], 10,10);
                    context.fillText(this.itemlist[1], 10,50);
                    context.fillText(this.itemlist[2], 10,90);

                    this.fill(context);
                    this.stroke(context);       
                },
                fill: "red", 
                stroke: "green", strokeWidth:1
            });
            popup.itemlist = ["one", "two", "three"];

            layer.add(popup);

            // Add the layer to the stage
            stage.add(layer);
        };
        window.onload = draw;

    </script>
    </head>
    <body>
        <div id="container"></div>
    </body>
</html> 
```

# gwt - GWT 自动刷新

> ID：12195207
> 
> 赞同：0
> 
> 时间：2012-08-30T10:50:25.407
> 
> 标签：gwt

我在 GWT 项目中工作。根据要求，我必须为我的一个屏幕提供自动刷新功能。我的前辈告诉我`<meta http-equiv="refresh" content="300">`在那个屏幕页面中使用。

但由于 GWT 代码仅用 java 编写，所以我想知道如何在 java 文件中使用它。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:45:47.493

取决于您管理历史的方式以及您是否不使用地点。您可以在计时器内使用位置重新加载事件。

如果您正在使用地点，则可以使用地点控制器每 30 秒重新导航到同一地点

```
Timer t = new Timer() {
    public void run() {
        Window.Location.reload();
    }
};
t.scheduleRepeating(30000); 
```

# c# - WCF 数据服务可以将对象更新到它的子对象吗？

> ID：12195208
> 
> 赞同：0
> 
> 时间：2012-08-30T10:50:26.333
> 
> 标签：c#, wcf-data-services

例子：

```
Parent
class Product
{
    int id {get; set;}
    string title {get; set;}
    Location loc {get; set;}
} 

Child
class Location
{
    int id {get; set;}
    int CityID {get; set;}
} 
```

我可以更新产品和位置，将产品发送到 WCF 数据服务方法“更新”吗？

产品得到更新，但孩子没有！是的，WCF 服务另一端的 EntityData 模型设置为所有关系托管。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T22:09:25.690

[OData 协议](http://msdn.microsoft.com/en-us/library/dd541188%28v=PROT.10%29.aspx)不支持深度更新。支持深度插入，但 WCF 数据服务不支持。您可以通过调用类似的方法来批处理更改并发送一个有效负载`context.SaveChanges(SaveChangesOptions.Batch);`，但请注意，并非所有服务都支持批处理，并且可能会返回 405 Method Not Allowed。

# python - 字符串和整数不等式

> ID：12195211
> 
> 赞同：2
> 
> 时间：2012-08-30T10:50:37.790
> 
> 标签：python

> **可能重复：**
> [Python 如何比较字符串和整数？](https://stackoverflow.com/questions/3270680/how-does-python-compare-string-and-int)

我今天在 Python 中遇到了一个奇怪的比较。这是我发现的：

```
'101' > -1
True

'101' < -1
False

'101' > 100
True

'101' < 100
False

'101' < 1
False 
```

我不确定这些表达式正在测试什么。任何提示都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T10:54:46.420

从[语言参考](http://docs.python.org/reference/expressions.html#not-in)：

> 运算符 <、>、==、>=、<= 和 != 比较两个对象的值。对象不必具有相同的类型。如果两者都是数字，则将它们转换为通用类型。否则，不同类型的对象总是比较不相等，并且顺序一致但任意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:54:15.043

当您订购数字和非数字类型时，数字类型排在第一位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T11:03:24.350

当您将数字和非数字类型一起比较时，无论两个变量的值是什么，数字类型都必须放在第一位才能使表达式为真。

当您在 python 中比较两个不兼容的类型时，它会按字母顺序比较类型的名称。有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/3270680/how-does-python-compare-string-and-int)。

我不知道为什么这个表达式需要被测试。Prehaps它们可以用来检查类型，例如

如果 foo < bar 为真并且已知 bar 不是数值变量，则 foo 必须是数值并且可以用于计算等。

# continuous-integration - 在另一个构建运行时排队而不是运行 TeamCity 构建

> ID：12195216
> 
> 赞同：4
> 
> 时间：2012-08-30T10:50:47.660
> 
> 标签：continuous-integration, teamcity, teamcity-7.1

我们繁忙的企业服务器在 30 个代理上运行 550 个活动构建配置。我们需要一种方法来防止某些构建在其他构建运行时运行。我已经了解了人工制品的依赖关系，但这并不能解决我们的问题，因为构建不相互依赖，它们只是共享一些资源，如服务器端口号和数据库连接。一些构建配置在同时运行时会相互冲突，我们需要通过一种方法在多个其他构建中的一个运行时将构建排队（而不是运行它）来防止这种情况发生。

我们已经使用了一些愚蠢的技巧，比如将构建限制为特定的代理等......我正在考虑添加一个第一个构建步骤来检查数据库表中的标志或其他东西，但这会在我们真正需要的时候添加很多失败的构建是正确的构建队列。

我错过了什么吗？TeamCity 中是否已经存在此功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-02T19:09:15.520

看起来您需要的东西正在以[TeamCity 8 Shared Resources](http://confluence.jetbrains.com/display/TW/TeamCity+Shared+Resources)的形式出现。[您已经可以在此处](http://confluence.jetbrains.com/display/TW/Download+Latest)访问 EAP 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T06:44:23.147

我非常尊重 550 个配置和 30 个代理。

我想你已经找到了解决方案：

1.  每个代理拥有一个环境
2.  为特定代理分配配置

我可以想象它的工作量。但我认为它更干净，并且比同时运行多个配置的限制工作得更快。

# php - 使用 MSIE 从 ISO-8859-1 中的 UTF8 页面发布表单

> ID：12195221
> 
> 赞同：0
> 
> 时间：2012-08-30T10:51:08.527
> 
> 标签：php, html, internet-explorer, character-encoding

我正在处理的一个项目要求我将一个位于 UTF-8 编码页面上的 HTML 表单发布到仅接受 ISO-8859-1 编码的服务器，然后在 iFrame 中显示结果。这在 FF、Chrome、Safari 中运行良好……但在 MSIE（甚至 9）中不起作用。IE 坚持以 UTF-8 格式发布表单。我无法访问要发布到的服务器，也无法更改要发布的页面的字符集。

表单包含 2 个具有恒定值的元素，但其中一些值包含德语变音符号（Ä、Ö 和 Ü）。

所以我想出的解决方案是将表单发布到“代理脚本”，它解码请求值，通过 cURL 发布所有内容并返回结果。但是托管此站点的服务器当然不支持 cURL。

那么有人知道如何解决这个问题吗？我现在可以使用任何简单有效的解决方案（甚至是一些非常奇怪的 Javascript 解决方案）。

问候，杰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:57:01.160

这是一个简单的技巧：

在表单中插入一个隐藏的输入字段，其中包含一个实体，该实体仅出现在您发布（或执行 GET）接受的服务器的字符集中。

示例：如果表单位于服务 ISO-8859-1 的服务器上，并且表单将发布到期望 UTF-8 的服务器，则在表单中插入如下内容：

```
<input name="iehack" type="hidden" value="&#9760;" /> 
```

然后，IE 将“检测”表单包含 UTF-8 字符，并在您 POST 或 GET 时使用 UFT-8。奇怪，但它确实有效。

# php - Amazon AWS PHP SDK - 集群无法启动 - 给定的 SSH 密钥名称无效

> ID：12195224
> 
> 赞同：3
> 
> 时间：2012-08-30T10:51:33.003
> 
> 标签：php, amazon-web-services, emr

我正在尝试创建一个 PHP 页面来启动集群并将作业添加到工作流中。

```
$response = $emr->run_job_flow($nameOfRun, array(
        'Ec2KeyName' => 'hadoop',
        'HadoopVersion' => '0.20',
        'KeepJobFlowAliveWhenNoSteps' => $clusterAlive,
        'InstanceGroups' => array(
                array( // Group #1
                        'InstanceCount' => $numOfMaster,
                        'InstanceRole' => 'MASTER',
                        'InstanceType' => $masterInstanceType,
                        'Market' => 'ON_DEMAND',
                        'Name' => 'Master',
                ),
                array( // Group #2
                        'InstanceCount' => $numOfSlaves,
                        'InstanceRole' => 'CORE',
                        'InstanceType' => $slaveInstanceType,
                        'Market' => 'ON_DEMAND',
                        'Name' => 'Slaves',
                )
        ),
        'Placement' => array(
                'AvailabilityZone' => 'us-east-1d'
        )
)); 
```

集群启动，我可以看到作业流 ID。但它在启动后立即开始关闭。当我执行`elastic-mapreduce --list`时，该集群的状态为 Failed。

任何已知问题或我做错的任何地方？可用性区域是否可能导致问题？

我从 AWS 控制台检查，它给出了这个错误 -`The given SSH key name was invalid` 我检查了，我在 config.inc.php 中提供的访问密钥和密钥是正确的并且可以工作。

问候， Kartikeya Sinha

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T12:19:54.407

看起来有四个不同的陷阱可能导致错误，如此[AWS 线程中所述：](https://forums.aws.amazon.com/message.jspa?messageID=208470)

1.  从控制台指定确切的密钥对名称。
2.  指定存在于与端点所在区域不同的区域中的密钥对。
3.  为不同的 AWS 服务使用密钥对，而不是为 EC2 使用密钥对。
4.  使用重命名的密钥对 pem 文件，它应该与控制台中的密钥对匹配（实际上是 1 的特殊情况）。

如果一切正常，请尝试删除密钥对并创建一个新的。

* * *

根据对[PHP SDK](http://docs.amazonwebservices.com/AWSSDKforPHP/latest/#m=AmazonEMR/run_job_flow)文档的阅读，我认为问题在于您根本没有指定`EC2KeyName`（您的评论表明您不想将特定的 pem 文件绑定到 EC2 实例；您只想使用秘密访问密钥和访问密钥）。

> Ec2KeyName - 字符串 - 可选 - 指定 Amazon EC2 密钥对的名称，该密钥对可用于以用户名为“hadoop”的身份通过 ssh 连接到主节点。[约束：该值必须介于 0 到 256 个字符之间，并且必须匹配以下正则表达式模式：
> 
> [\u0020-\uD7FF\uE000-\uFFFD\uD800\uDC00-\uDBFF\uDFFF\r\n\t]*]

此参数指的是您可以与 EC2 实例关联的 pem 密钥对文件。您的评论表明您正在专门谈论 AccessKeys 和 SecretAccessKeys，它们是不同的概念。pem 文件使您`ssh`可以访问 EC2 实例。后者授权您使用 AWS API。

您应该能够终止该可选参数并让作业正常工作，尽管您将无法在`ssh`没有 pem 文件的情况下进入其附属的 EC2 实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:13:46.887

我错的地方：（这解决了我的情况）AWS SDK的config.ini.php文件中指定的访问密钥和秘密密钥的密钥对的名称和启动集群时要提供的EC2KeyName应该是相同的.

# java - 一步一步的谷歌 SSO (java)？

> ID：12195225
> 
> 赞同：13
> 
> 时间：2012-08-30T10:51:37.847
> 
> 标签：java, oauth-2.0, single-sign-on

我迷失在所有打开的谷歌单点登录浏览器标签中:)

我已经有一个应用程序，我想将它放到 Google 市场上。强制集成是 Google SSO。我已经用 Spring 在 Struts2 上构建了应用程序。

所以现在我需要一些说明如何进行这种集成。一个例子将是完美的。或者如何开始，使用哪种技术，最好的方法，任何类似的东西......

另外，**我是否必须**使用 Google App Engine 进行 SSO 集成？老实说，我很困惑：）

**编辑**

我从这里开始：[developers.google.com/google-apps/marketplace/sso](http://developers.google.com/google-apps/marketplace/sso)因为我用的是Java，如果你看底部的入门，我想用step2，但是链接死了。从那以后我就卡住了...

[这里](https://developers.google.com/google-apps/help/open-source#sso)的链接也死了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T18:01:09.737

我用 Apache 的 HttpClient 制作的。这是我的解决方案，非常适合我。

首先指向授权url：

`https://accounts.google.com/o/oauth2/auth?scope=https://www.googleapis.com/auth/userinfo.profile+https://www.googleapis.com/auth/userinfo.email&state=%2Fprofile&response_type=code&client_id=<YOUR_CLIENT_ID>&redirect_uri=<YOUR_CALLBACK_URL>`

然后从您的获取参数`redirect_uri`并构建请求正文以获取`access_token`：

```
 String code =  request.getParameter("code");
    String foros = "code="+code +
                "&client_id=<YOUR_CLIENT_ID>" +
                "&client_secret=<YOUR_CLIENT_SECRET>" +
                "&redirect_uri="+getText("google.auth.redirect.uri") +
                "&grant_type=authorization_code"; 
```

然后使用 HttpClient 进行 POST 并使用简单的 JSON 解析器解析出访问令牌。

```
 HttpClient client = new HttpClient();
    String url = "https://accounts.google.com/o/oauth2/token";
    PostMethod post = new PostMethod(url);
    post.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");

    try {
        post.setRequestEntity(new StringRequestEntity(foros, null, null));
    } catch (UnsupportedEncodingException e) {
        throw new RuntimeException(e);
    }
    String accessToken = null;
    try {
        client.executeMethod(post);
        String resp = post.getResponseBodyAsString();
        JSONParser jsonParser = new JSONParser();
        Object obj = jsonParser.parse(resp);
        JSONObject parsed = (JSONObject)obj;            
        accessToken = (String) parsed.get("access_token");
    } catch (HttpException e) {
        throw new RuntimeException(e);
    } catch (IOException e) {
        throw new RuntimeException(e);
    } catch (ParseException e) {
        throw new RuntimeException(e);
    } 
```

现在您有了访问令牌，您现在可以访问**所有**Google API。例如，获取所有用户信息：

```
 GetMethod getUserInfo = new GetMethod("https://www.googleapis.com/oauth2/v1/userinfo?access_token="+accessToken);

    String googleId = null;
    String email = null;
    String name = null;
    String firstName = null;
    String lastName = null;
    try {
        client.executeMethod(getUserInfo);
        String resp = getUserInfo.getResponseBodyAsString();
        JSONParser jsonParser = new JSONParser();
        Object obj = jsonParser.parse(resp);
        JSONObject parsed = (JSONObject)obj;
        googleId = (String) parsed.get("id");
        email = (String) parsed.get("email");
        name = (String) parsed.get("name");
        firstName = (String) parsed.get("given_name");
        lastName = (String) parsed.get("family_name");
    } catch (IOException e) {
        throw new RuntimeException(e);
    } catch (ParseException e) {
        throw new RuntimeException(e);
    } 
```

您现在可以保存这些数据并将其用于登录您的应用程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T09:10:14.080

您可以遵循 Google Apps Marketplace 的 Java 教程，该教程解释了如何执行单点登录：[https ://developers.google.com/google-apps/marketplace/tutorial_java](https://developers.google.com/google-apps/marketplace/tutorial_java)

本教程还包括一个 zip 的下载链接，其中包含应用程序源和所有必需的库，包括第 2 步：http: [//apps-marketplace-resources.googlecode.com/files/helloworld-java-2011050303.zip](http://apps-marketplace-resources.googlecode.com/files/helloworld-java-2011050303.zip)

以下是文档中损坏的链接的有效链接：

*   第二步：[http ://code.google.com/p/step2/](http://code.google.com/p/step2/)
*   openid4java：[http ://code.google.com/p/openid4java/](http://code.google.com/p/openid4java/)
*   gdata-java-client：[http ://code.google.com/p/gdata-java-client/](http://code.google.com/p/gdata-java-client/)

# javascript - 谷歌地图有限区域不起作用

> ID：12195226
> 
> 赞同：-1
> 
> 时间：2012-08-30T10:51:45.483
> 
> 标签：javascript, google-maps, google-maps-api-2

[Google Maps v3 - 限制可视区域和缩放级别](https://stackoverflow.com/questions/3818016/google-maps-v3-limit-viewable-area-and-zoom-level)

问题已在上面的链接中解决。但我不在`google.maps.Map`我的项目中使用。

`var map = new google.maps.Map(document.getElementById("map_canvas"));`

我使用了 GMap2。

`var map = new GMap2(document.getElementById("map_canvas"));`

但是这个版本不工作。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:42:01.303

在 Google Maps API v2 上查看实施帮助的第一个地方应该始终是[Mike William 的 v2 教程](http://econym.org.uk/gmap/)。

本页[第 7 部分限制地图缩放和平移的范围。](http://econym.org.uk/gmap/range.htm)应该申请。

请记住，v2 已弃用，可能会在 2013 年 5 月 19 日停止工作。

# c# - 拆分两个字符串并重新加入

> ID：12195227
> 
> 赞同：0
> 
> 时间：2012-08-30T10:51:48.253
> 
> 标签：c#

我目前正在为结帐过程开发地址选择器，它目前有一个功能，可以在像这样在结帐时找到的所有字段之后添加一个逗号。

![在此处输入图像描述](../Images/fdecae84ac505a3818aaf403ac9836f6.png)

这是使用完成的，

```
ddl.Items.Add(new ListItem(string.Join(", ", lines.ToArray()), address.ID.ToString())); 
```

这很好，直到你添加一个名字，这是必须的，所以他们可以使用他们的帐户在礼物的情况下交付给不同的人，或者如果你想订购一些东西并让其他人签收产品。我希望我的名字/姓氏之间没有逗号，但是......我不能简单地通过不在前两个字段上添加逗号来做到这一点，因为在很多情况下不会输入名字在收货地址上。

这是它当前的显示方式 ![在此处输入图像描述](../Images/659a601d021cb7658a4bf305fc66edc4.png)

我在想最好的方法是将名称拆分为一个单独的字符串，然后将地址的其余部分拆分为另一个，添加逗号，然后将字符串重新合并为一个。

如果有人能想到更好的方法来做到这一点，请分享您的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:00:35.950

1 你也可以使用

```
string.Concat(lines.ToArray()).Replace(" ",","); 
```

2 或者用foreach迭代并构建stringBuilder

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T12:38:40.067

这个方法我用过

```
 StringBuilder fullName = new StringBuilder();

            List<string> lines = new List<string>();
            if (!string.IsNullOrEmpty(address.Name))
                fullName.AppendFormat("{0} ", address.Name);
            if (!string.IsNullOrEmpty(address.Name1))
                fullName.AppendFormat("{0} ", address.Name1);
            if (!string.IsNullOrEmpty(address.Name2))
                fullName.Append(address.Name2);

            if (!string.IsNullOrEmpty(fullName.ToString()))
                lines.Add(fullName.ToString()); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-30T11:28:28.370

```
String = String.Replace(","," "); 
```

或者

```
String = String.Replace(","," "); 
```

这将做你想要的。

# c++ - 使用 TCL API 启用包自动加载的 C++ 应用程序

> ID：12195236
> 
> 赞同：1
> 
> 时间：2012-08-30T10:52:19.650
> 
> 标签：c++, tcl, tcl-api

我想让我的 C++ 应用程序为`C:\Tcl\lib`. 我将下面的 tcl 命令传递给`Tcl_Eval()`我的 C++ 代码。并且期望“ `package require <package name>`”会自动找到包并加载它。

```
set ::auto_path [file join {C:\Tcl\lib}] 
```

但它不像在 TCL shell 中那样工作 - TCL shell`pkgIndex.tcl`在 auto_path 中查找，所以当“ `package require`”时，它可以找到正确的包或共享库。是否可以使其在 C++ 应用程序中工作？或者有没有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-20T14:10:22.447

好的，我想我知道问题可能出在哪里。这`auto_path`是一个*Tcl 目录列表*——使用它的代码在列表中迭代`foreach`——用于搜索包（和自动加载的脚本，我认为这是一种旧机制，它比它的价值更麻烦）。然而，您使用的是单个元素，即`file join`. 这在 Windows 以外的平台上通常无关紧要，因为目录分隔符在`/`那里（这只是 Tcl 的普通非空白字符），但在 Windows 上，目录分隔符是`\`Tcl 的列表元语法字符。

这是什么意思？好吧，之后：

```
set ::auto_path [file join {C:\Tcl\lib}] 
```

我们可以问那个*清单*上的东西是什么。例如，我们可以打印列表的第一个元素……</p>

```
puts [lindex $::auto_path 0] 
```

那输出什么？大概是这样的：

```
C:Tcllib 
```

哎呀！反斜杠被视为引用字符，留下了一个完全不起作用的路径。那是行不通的。

解决方法是使用不同的方式来构建`auto_path`. 我想你会发现这正是你真正想要的：

```
set ::auto_path [list {C:\Tcl\lib}] 
```

尽管这是一种替代方法（仍在使用`list`; 在所有情况下，它都是无故障列表构造的最佳选择）：

```
set ::auto_path [list [file normalize {C:\Tcl\lib}]] 
```

（我敢打赌，您正试图将其`file join`用作 ghetto `file normalize`。不要那样做。很长一段时间以来，这一直是不好的做法，尤其是现在我们有一个实际上可以执行您想要的操作的命令。）

# sql - 是否有任何内置函数来计算 SQL Server 中的百分比

> ID：12195242
> 
> 赞同：0
> 
> 时间：2012-08-30T10:52:32.283
> 
> 标签：sql, sql-server, percentage

我在编写 SQL 查询以在 % 模式下获取结果时遇到问题，我熟悉SQL Server`SUM()`的`COUNT()`功能，但在查询内部实现逻辑时遇到问题，我希望得到以下形式的结果：-

```
UserName---  % of AccepectResult----   % of RejectResult 
```

我的表结构是这样的，有两列`Name`（用户名）和`Result`：

```
NAME     Result
---------------
USer1       A
USer1       A
USer1       A
USer1       R
USer1       R
USer1       A
USer2       A
USer2       A
USer2       A
USer2       A
USer2       R

A - Accepted Result
R - Rejected Result 
```

我正在尝试像这样编写此查询..

```
select * into #t1  from 
(
    select UserName , count(Result) as Acc
    from Test where result = 'A'
    group by UserName 
) as tab1

select * into #t2 from 
(
    select UserName , count(Result) as Rej
    from Test where result = 'R'
    group by UserName 
) as tab2

select #t1.UserName , 
      #t1.Acc , 
      #t2.Rej , 
     (#t1.Acc)*100/(#t1.Acc + #t2.Rej)  as AccPercentage,
     (#t2.Rej)*100/(#t1.Acc + #t2.Rej)  as RejPercentage

 from #t1
 inner join #t2 on #t1.UserName = #t2.UserName

drop table #t1

drop table #t2 
```

是否有任何其他方法可以编写此查询以及任何用于在 SQL Server 中计算百分比的内置函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T10:58:19.900

您不需要加入表。相反，您可以像这样使用`SUM`或`COUNT`运行：

使用`SUM`功能：

```
SELECT Name, 100 * 
SUM(CASE WHEN Result = 'A' THEN 1 ELSE 0 END)/COUNT(result)
AS Accept_percent
,100 * 
SUM(CASE WHEN Result = 'R' THEN 1 ELSE 0 END)/COUNT(result)
AS Reject_percent
FROM t
Group by Name; 
```

或使用`COUNT`功能：

```
SELECT Name, 100 * 
COUNT(CASE WHEN Result = 'A' THEN 1 ELSE NULL END)/COUNT(result)
AS Accept_percent
,100 * 
COUNT(CASE WHEN Result = 'R' THEN 1 ELSE NULL END)/COUNT(result)
AS Reject_percent
FROM t
Group by Name; 
```

或使用`SubQuery`：

```
SELECT Name, 100 * 
(SELECT COUNT(result) FROM t WHERE result='A' And Name = main.Name)/COUNT(result)
AS Accept_percent
, 100 * 
(SELECT COUNT(result) FROM t WHERE result='R' And Name = main.Name)/COUNT(result)
AS Reject_percent 
FROM t main
Group by Name; 
```

# [*看到这个 SQLFiddle*](http://sqlfiddle.com/#!3/b949f/7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:56:16.760

不，没有。您必须乘以 100 并明确划分您的两个数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T11:01:51.403

尝试这样的事情：

```
select username, (100 * sum(case result when 'A' then 1 else 0 end) / count(*)) as accepted, 
                 (100 * sum(case result when 'R' then 1 else 0 end) / count(*)) as rejected 
    from test
    group by username 
```

# ios - 如何反序列化 json 对象并分配给 iOS 中的 NSDictionary

> ID：12195245
> 
> 赞同：14
> 
> 时间：2012-08-30T10:52:38.183
> 
> 标签：ios, json, nsdictionary, deserialization, nsdata

这是我处理服务器响应的代码。

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
 {
 NSLog(@"connectionDidFinishLoading : %@", [[NSString alloc] initWithData:self.data    encoding:NSUTF8StringEncoding]);
 } 
```

这是消息服务器对我的响应，NSLog JSON 显示在控制台中。

```
connectionDidFinishLoading : {"ErrorCode":"CssParameterException","ErrorMessage":"An error has occurred, please try again later.","Success":false} 
```

我的问题是：如何反序列化 JSON 并将其存储到局部变量中`NSDictionary *jsonData`？

有什么建议么？请给我一些代码示例，谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-30T10:56:57.613

```
NSError *e = nil
NSDictionary *JSON = [NSJSONSerialization JSONObjectWithData: responseData options: NSJSONReadingMutableContainers error: &e]; 
```

如果你有 NSString 响应

```
NSError *e = nil
    NSDictionary *JSON = [NSJSONSerialization JSONObjectWithData: [responseString dataUsingEncoding:NSUTF8StringEncoding] options: NSJSONReadingMutableContainers error: &e]; 
```

# c++ - 带有 cvfilter2d 的 opencv。我得到黑色图像

> ID：12195246
> 
> 赞同：1
> 
> 时间：2012-08-30T10:52:41.170
> 
> 标签：c++, c, opencv

我正在尝试使用 cvfilter2d 应用图像过滤器

```
 cvmSet(kernel,0,0,5);
    cvmSet(kernel,0,1,5);
    cvmSet(kernel,0,2,5);   
    cvmSet(kernel,1,0,-3);
    cvmSet(kernel,1,1,0);
    cvmSet(kernel,1,2,-3);
    cvmSet(kernel,2,0,-3);
    cvmSet(kernel,2,1,-3);
    cvmSet(kernel,2,2,-3); 
```

然后我应用这个

```
cvFilter2D(imgMedia,imgRestitucion , kernel, cvPoint(-1,-1) ); 
```

但我的结果是黑色图像...我该怎么办？有什么选择吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:25:15.183

最后我找到了解决方案。

您所要做的就是使用 cvRealScalar 数字初始化内核。

```
for(int y=0;y<9;y++) {
    for(int x=0; x<9; x++) {
        cvSet2D(kernel,x,y,cvRealScalar(-0.00132704 ));
    }
} 
```

然后您可以将图像过滤器应用于 ker，当您使用 cvFilter2D 时，您不会得到黑色图像。

# c# - 从另一个具有相同值的项目调用 windows 窗体

> ID：12195247
> 
> 赞同：0
> 
> 时间：2012-08-30T10:52:43.033
> 
> 标签：c#, vb.net, winforms

我打开一个表单并在该表单中初始化一个函数。进度条正在运行。然后我隐藏具有相同功能的表单。现在我需要用相同的进度条值显示另一个项目的窗口。是否可以在没有新关键字的情况下调用相同的表单？

注意：我用于隐藏表单的函数在 VB.NET 中，而要显示表单的函数在 C#.net

这是我的代码 VB.NET（隐藏窗口的函数）

```
Private Sub btnSend_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnSend.Click

Dim objUpload As New UploadingList
objUpload.Show()
objUpload.Hide()
objUpload.UploadFiles()

End Sub 
```

这个 uploadfiles() 函数初始化进度条并上传文件。所以如果我需要从 C# 项目中显示窗口，我该怎么办？如果我创建一个新项目，进度条值也会变为默认值。这个问题有什么解决办法吗？

```
private void btnFiles_Click(object sender, EventArgs e)
        {
            ICloudProvider.UploadingList objUpload = new ICloudProvider.UploadingList();
            objUpload.Show();
        } 
```

如果我遵循 C# 中的上述函数，所有控件都将返回其默认值。所以进度条没有进度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:48:05.067

在窗体上创建一个公共共享变量以存储对在 VB 程序中创建的实例的引用。

该表单将具有以下行：

```
Public Shared Instance as UploadingList 
```

创建表单时，需要设置此变量：

```
Dim objUpload As New UploadingList
UploadingList.Instance = objUpload
objUpload.Show()
objUpload.Hide()
objUpload.UploadFiles() 
```

现在从您的 C# 程序中，您无需创建表单的新实例，而只需使用现有的实例：

```
private void btnFiles_Click(object sender, EventArgs e)
{
  ICloudProvider.UploadingList objUpload = ICloudProvider.UploadingList.Instance;
  if(objUpload!=null)
  {
    objUpload.Show();
  }
} 
```

请记住在窗体关闭时将 Instance 变量设置为 null（在 VB 中为空）。

# objective-c - NSOperation：完成任务后更新 UI

> ID：12195248
> 
> 赞同：0
> 
> 时间：2012-08-30T10:52:52.643
> 
> 标签：objective-c, cocoa, nsoperationqueue, performselector

我用 NSOperation 和 NSOperationQueue 建立了一个测试项目。只有一个文本框：`@property (weak) IBOutlet NSTextField *textbox;`

在后台执行此操作：

```
- (void)main
{
    NSURL *url = [NSURL URLWithString:@"http://google.com"];
    ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
    [request startSynchronous];
    NSError *error = [request error];
    if (!error) {
        NSString *response = [request responseString];
        NSLog(@"MainThread: %@", ([NSThread isMainThread] ? @"YES" : @"NO"));
        [[AppDelegate sharedManager] performSelectorOnMainThread:@selector(pageLoaded:)
                                           withObject:response
                                        waitUntilDone:NO];
} 
```

以及在主线程上调用的选择器：

```
- (void)pageLoaded:(NSString*)document
{
    [textbox setStringValue:document]; // does nothing
    NSLog(@"Textbox: %@", textbox); // returns nil
} 
```

为什么文本框返回零？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:52:28.700

嗯，我有两个想法：

1.  一个**现实**的：`[AppDelegate sharedManager]`从你调用`applicationDidFinishLaunching`的对象返回不同的对象。如果将 AppDelegate 添加到 XIB + 你有一个单独的单例实例，这是可能的。
2.  一个**神秘**的：只有一个 AppDelegate，但属性值不知何故无效。如果是这种情况，解决问题的最简单方法是将“弱”更改为“分配”（以确定它是否正在发布问题），而不是重新定义*setTextbox*以查找谁调用它。

但我敢打赌它是#1。

# asp.net - 基于前一行的asp.net vb gridview coulours

> ID：12195249
> 
> 赞同：1
> 
> 时间：2012-08-30T10:53:03.797
> 
> 标签：asp.net, vb.net, gridview

我有一个`GridView`来自 sql server 的显示结果，所有值都应该遵循上一个值，例如 3373 必须在 3372 之前。只要值不遵循上一个值，我就需要为 gridview 上的行着色。有时缺少值，因此我需要确定是否缺少值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:02:26.810

您可以使用 OnRowDataBound 事件来存储最后一个值并进行比较。像这样的东西：

```
Private _lastRowValue As Integer =  -1 

Protected  Sub OnGridViewRowDataBound(ByVal sender As Object, ByVal e As GridViewRowEventArgs) 
    If e.Row.RowType = DataControlRowType.DataRow Then
      If _lastRowValue <> -1 Then
          ' read current row value, compare and then format, e.g. like this 
          e.Row.Cells(1).Text = "<i>" + e.Row.Cells(1).Text + "</i>"
      End If
      _lastRowValue = ... ' read value from cell 
    End If
End Sub 
```

# php - Windows上的xampp内部服务器错误500

> ID：12195252
> 
> 赞同：0
> 
> 时间：2012-08-30T10:53:15.827
> 
> 标签：php, xampp, internal-server-error

我正在为 Windows 使用 xampp BAsic Package（版本 1.8.0）的 xampp 安装程序版本。我在 htdocs 目录下有一个名为 my-proj 的项目。当我打开这个项目的主页时，主页会打开，但是每当我点击任何其他链接时，都会从主页上显示以下错误消息：

```
The website encountered an error while retrieving http://localhost:xxxx/.../abc.php. It may be down for maintenance or configured incorrectly.

HTTP Error 500 (Internal Server Error): An unexpected condition was encountered while the server was attempting to fulfill the request. 
```

在我的项目目录/my-proj/public_html/.htaccess中有一个.htaccess文件，.htaccess文件内容如下：

```
#####errorpage#####
#ErrorDocument 500 /error/500.html
#####end:errorpage##### 
```

我尝试以两种方式运行我的项目 - (1) 通过激活 c:\xampp\apache\conf 中 htpd.conf 文件中的 LoadModule rewrite_module Modules/mod_rewrite.so 行并将 AllowOverride None 行更改为 AllowOverride All在 htpd.conf 文件中和 (2) 通过停用 htpd.conf 中的 mod_rewrite 行并删除 .htaccess 文件，但我无法运行我的项目。

关于如何解决这个问题的任何想法或任何人都可以建议 .htaccess 文件的内容应该是什么？

# javascript - 将值绑定到代码隐藏中的 jQuery UI 选择控件

> ID：12195253
> 
> 赞同：2
> 
> 时间：2012-08-30T10:53:18.353
> 
> 标签：javascript, jquery, .net, jquery-ui

我正在尝试将值绑定到代码隐藏中的选择控件。选择控件是 jquery UI 多选。

该代码是：

.aspx 页面：

```
 <select id="countries" runat="server" class="multiselect" multiple="multiple" name="countries[]"> 
```

.cs 页面：

```
for(int i=0; i<=25;i++)
        {
            countries.Items.Add(i.ToString());
        } 
```

当我运行时，我收到以下解析器错误

无法从“Multiple”属性的字符串表示“multiple”创建“System.Boolean”类型的对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T12:23:04.630

我在 Page_Load 后面的代码中添加了以下代码，它运行良好。达它！

```
languages.Attributes.Add("multiple", "multiple"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:24:23.630

尝试多个 =“真”。并且不要忘记关闭选择标签。

# lisp - LISP - 计算列表中每个值的出现次数

> ID：12195256
> 
> 赞同：0
> 
> 时间：2012-08-30T10:53:31.300
> 
> 标签：lisp, common-lisp, unique, duplicate-removal

我为糟糕的英语道歉。
我有一个任务是编写一个名为“make-bag”的函数，它计算列表中每个值的出现次数
并返回一个点对列表，如下所示：'((value1 . num-occurences1) (value2 . num-occurrences2) ...) 例如：

```
 (make-bag '(d c a b b c a))
((d . 1) (c . 2) (a . 2) (b . 2)) 
```

（列表不必排序）

我们的讲师允许我们使用函数`MAPCAR`and `FILTER`（假设已实现），但我们不允许使用`REMOVE-DUPLICATES`and `COUNT-IF`。他还要求我们使用递归。

有没有办法只计算每个值一次而不删除重复项？如果有办法，可以通过递归来完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:01:01.717

首先，我同意 Joswig 先生的观点 - Stackoverflow 不是要求家庭作业答案的地方。但是，我将以一种你可能无法直接使用它的方式回答你的问题，而无需进行一些额外的挖掘，并且能够理解哈希表和词法闭包的工作原理。反过来，这将是一个很好的锻炼你的进步。

> 有没有办法只计算每个值一次而不删除重复项？如果有办法，可以通过递归来完成吗？

是的，哈希表很简单，这里有两个例子：

```
;; no state stored
(defun make-bag (lst)
  (let ((hs (make-hash-table)))
    (labels ((%make-bag (lst)
               (if lst
                   (multiple-value-bind (val exists)
                       (gethash (car lst) hs)
                     (if exists
                         (setf (gethash (car lst) hs) (1+ val))
                         (setf (gethash (car lst) hs) 1))
                     (%make-bag (cdr lst)))
                   hs)))
      (%make-bag lst)))) 
```

现在，如果您尝试评估此表单两次，每次都会得到相同的答案：

```
(gethash 'a (make-bag '(a a a a b b b c c b a 1 2 2 1 3 3 4 5 55)))
> 5
> T

(gethash 'a (make-bag '(a a a a b b b c c b a 1 2 2 1 3 3 4 5 55)))
> 5
> T 
```

这是第二个例子：

```
;; state is stored....
(let ((hs (make-hash-table)))
  (defun make-bag (lst)
    (if lst
        (multiple-value-bind (val exists)
            (gethash (car lst) hs)
          (if exists
              (setf (gethash (car lst) hs) (1+ val))
              (setf (gethash (car lst) hs) 1))
          (make-bag (cdr lst)))
        hs))) 
```

现在，如果您尝试两次评估此表格，您将得到第二次加倍的答案：

```
(gethash 'x (make-bag '(x x x y y x z z z z x)))
> 5
> T

(gethash 'x (make-bag '(x x x y y x z z z z x)))
> 10
> T 
```

为什么答案翻了一番？

如何将哈希表的内容转换为关联列表？

另请注意，递归函数通常会“吃”列表，有时还会有一个累加器，用于累加每一步的结果，并在最后返回。如果没有哈希表和使用 remove-duplicates/count-if 的能力，逻辑会变得有点复杂，因为您被迫使用基本功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T12:58:40.413

好吧，这就是答案，但为了让它作为一个学习练习更有用，我会留下一些空白，你必须填写。

还要注意，对这个任务使用哈希表会更有利，因为对存储在哈希表中的元素的访问时间是固定的（通常非常小），而对存储在列表中的元素的访问时间具有线性复杂性，所以会随着更长的列表而增长。

```
(defun make-bag (list)
  (let (result)
    (labels ((%make-bag (list)
               (when list
                 (let ((key (assoc (car <??>) <??>)))
                   (if key (incf (cdr key))
                       (setq <??>
                             (cons (cons (car <??>) 1) <??>)))
                   (%make-bag (cdr <??>))))))
      (%make-bag list))
    result)) 
```

此功能可能有变体，但它们大致基于相同的原理。

# sql - sql server 多部分标识符“”无法绑定存储过程

> ID：12195257
> 
> 赞同：0
> 
> 时间：2012-08-30T10:53:38.807
> 
> 标签：sql, sql-server, stored-procedures, sql-function

我创建了一个存储过程，我在其中调用了两个函数。

我收到一个错误：

> 消息 4104，级别 16，状态 1，过程 Add_Translation，第 25 行
> 无法绑定多部分标识符“.word”。

这是我的存储过程：

```
ALTER PROCEDURE [dbo].[Add_Translation]
   @english nvarchar(70), 
   @kurdish nvarchar(70),
   @english_category int,
   @kurdish_category int,
   @result int out
AS
BEGIN
    SET NOCOUNT ON;

    if @english is not null and @kurdish is not null and @english_category is not null and @kurdish_category is not null
    begin
        declare @intEnId int=-1;
        exec @intEnId = Check_English_word @text = @english;

        declare @identityEnglish int;
        declare @identityKurdish int;

        if @intEnId = -1
        begin
            insert into english_table values(@english, @english_category);
            set @identityEnglish = SCOPE_IDENTITY();
        end
        else
        begin
            set @identityEnglish = (select e.english_id from english_table e where UPPER(.word)=UPPER(@english)); 
        end

        declare @intKuId int=-1;
        exec @intKuId=Check_Kurdish_Word @word=@kurdish;

        if @intKuId =-1
        begin
            insert into kurdish_table values(@kurdish, @kurdish_category);

            set @identityKurdish = SCOPE_IDENTITY();
        end
        else
        begin
            set @identityKurdish = (select k.kurdish_id from kurdish_table k where upper(k.word)=upper(@kurdish));
        end

        declare @translated int =0;

        exec @translated = Check_Translation @english_id = @identityEnglish, @kurdish_id = @identityKurdish;

            if @translated=0
        begin
            insert into transactions values(@identityEnglish, @identityKurdish);
            set @result = 1;
        end
        else
        begin
            set @result = 2;
        end
    end
    else
    begin
        set @result = 0;
    end
END 
```

这是第一个功能：

```
ALTER FUNCTION [dbo].[Check_English_word] 
(
@text nvarchar(70) 
)
RETURNS int
AS
BEGIN

    DECLARE @Result int
    set @Result=-1;

    if @text is not null
    begin

        SELECT @Result = e.english_id 
            from english_table e 
            where UPPER(e.word) = UPPER(@text); 
    end

    RETURN @Result
END 
```

第二个功能：

```
ALTER FUNCTION [dbo].[Check_Kurdish_Word] 
(
@word nvarchar(70) 
)
RETURNS int
AS
BEGIN
    DECLARE @Result int
    set @Result=-1;

if @word is not null
    begin
        SELECT @Result = k.kurdish_id 
            from kurdish_table k  
            where UPPER(k.word) = UPPER(@word); 
    end

    RETURN @Result
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:58:39.800

您`e`在这一行中缺少一个

```
 set @identityEnglish=(select e.english_id from english_table e 
              where UPPER(.word)=UPPER(@english)); 
```

将其更改为

```
 set @identityEnglish=(select e.english_id from english_table e 
              where UPPER(e.word)=UPPER(@english)); 
```

此外，在进行插入时指定列是一种好习惯 - 即

```
insert into english_table values(@english,@englsih_category); 
```

应该

```
insert into english_table (word, category) values(@english,@englsih_category); 
```

# c# - 如何自动验证视图中的所有控件是否都设置了绑定？

> ID：12195259
> 
> 赞同：3
> 
> 时间：2012-08-30T10:53:41.903
> 
> 标签：c#, wpf, unit-testing, data-binding

寻找一种方法来自动验证，例如使用单元测试，我的 WPF 应用程序中的所有控件都设置为绑定。

我正在使用数据绑定来启用应用程序中的本地化。例如，视图中的 TextBlock 控件将其 Text 属性绑定到视图模型中的“SomeLocalizedLabel”属性。

我需要确保不会错过任何控件，并且我所有的“TextBlock”控件都将它们的“Text”属性绑定到某些东西。

*   我可以在 ViewModel 级别检查本地化本身的正确性。
*   [我可以使用Caliburn.Testability 程序集](http://devlicio.us/blogs/rob_eisenberg/archive/2008/10/25/unit-test-wpf-data-bindings-with-caliburn.aspx)或[其他方法](http://habanerolabs.com/Blogs/tabid/247/PostID/29/Unit-Testing-WPF-Bindings-Adding-a-Fluent-interface.aspx)检查所有公共 ViewModel 属性是否绑定到视图中的某些内容。

这里缺少的是测试视图级别。UI 测试框架不是我正在寻找的解决方案，因为我希望可以快速编写和执行的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T12:50:04.523

在这里查看我的帖子：

*   [如何检查 XAML 元素是否支持 AutomationId 属性](https://stackoverflow.com/questions/12112745/how-to-check-if-a-xaml-element-supports-automationid-attribute/12115119#12115119)

您可以使用提到的机制来检查所有 XAML 并查看元素的 Text 属性，并确定它们是否错过了绑定。

LocBaml 是一个通过 XAML 提取可本地化属性的工具......然后在没有的地方生成报告。

# objective-c - 单击按钮以使用 Xcode 播放声音时调试器中的错误

> ID：12195261
> 
> 赞同：0
> 
> 时间：2012-08-30T10:53:50.903
> 
> 标签：objective-c, ios, debugging, audio

当我运行应用程序并单击已链接声音的按钮之一时，我在调试器中收到这组消息。我的代码中没有明显的错误。请帮忙，因为我不知道如何解决它。当第一次单击按钮时，它需要一段时间才能做出反应。然后以后就好了。

```
2012-08-30 11:48:46.738 Jeffrey![3321:c07] Has ad showing
2012-08-30 11:48:49.831 Jeffrey![3321:3403] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2012-08-30 11:48:49.837 Jeffrey![3321:3403] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2012-08-30 11:48:49.849 Jeffrey![3321:3403] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2012-08-30 11:48:49.856 Jeffrey![3321:3403] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2012-08-30 11:48:52.588 Jeffrey![3321:c07] Has ad showing 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:05:44.490

这是 iOS 模拟器的正常行为，不应在实际设备上发生。延迟来自模拟器/设备加载声音文件并在播放之前对其进行解码，解决方案是预加载声音，以便在点击按钮时准备好。

# java - 休眠会话工厂 Android

> ID：12195262
> 
> 赞同：1
> 
> 时间：2012-08-30T10:53:56.920
> 
> 标签：java, android, hibernate

我正在尝试在 Android 上使用 Hibernate。（Eclipse Android 2.2 SDK）
似乎在包含的行中有一个编译错误

```
HibernateUtility.getSessionFactory().openSession(); 
```

这是 HibernateUtility 类：

```
public class HibernateUtility {

    private static final SessionFactory sessionFactory;

    static {
        try {
            // Create the SessionFactory from standard (hibernate.cfg.xml) 
            // config file.
            sessionFactory = new Configuration().configure().buildSessionFactory();
        } catch (Throwable ex) {
            // Log the exception. 
            System.err.println("Initial SessionFactory creation failed." + ex);
            throw new ExceptionInInitializerError(ex);
        }
    }

    public static SessionFactory getSessionFactory() {
        return sessionFactory;
    }
} 
```

eclipse中的编译错误是：

> javax.naming.Referenceable 类型无法解析。它是从所需的 .class 文件中间接引用的

我从我的 java sdk (Sun JDK macosx) 中复制了一个文件 rt.jar，其中包含包 javax.namaing.*，编译错误似乎已解决。但我现在从 Android SDK Logcat 得到下面的运行时错误。

> 08-30 15:21:05.123: W/dalvikvm(240): VFY: 无法找到签名中引用的类 (Lorg/hibernate/SessionFactory;) 08-30 15:21:05.123: I/dalvikvm(240): 可以找不到方法 org.hibernate.SessionFactory.openSession，引用自方法 com.example.testfordatabase.EtityDao.insert 08-30 15:21:05.123: W/dalvikvm(240): VFY: 无法解析接口方法 102: Lorg/ hibernate/SessionFactory;.openSession()Lorg/hibernate/classic/Session; 08-30 15:21:05.123: D/dalvikvm(240): VFY: 在 0x000b 处替换操作码 0x72 08-30 15:21:05.123: D/dalvikvm(240): VFY: Lcom/example 中的死代码 0x000e-003f /testfordatabase/EtityDao;.insert (Lcom/example/testfordatabase/entity;)V 08-30 15:21:05.123: D/step1(240): Step1 08-30 15:21:05.133: E/dalvikvm(240) ：找不到类“org.hibernate.cfg.Configuration”，从方法 com.example.testfordatabase.HibernateUtility 引用。08-30 15:21:05.133: W/dalvikvm(240): VFY: 无法解析 Lcom/example/testfordatabase/HibernateUtility 中的新实例 65 (Lorg/hibernate/cfg/Configuration;)；08-30 15:21:05.133: D/dalvikvm(240): VFY: 在 0x0000 处替换操作码 0x22 08-30 15:21:05.133: D/dalvikvm(240): VFY: Lcom/example 中的死代码 0x0002-000f /testfordatabase/HibernateUtility;。()V 08-30 15:21:05.133: W/dalvikvm(240): VFY: 无法找到签名中引用的类 (Lorg/hibernate/SessionFactory;) 08-30 15:21:05.133: W/System.err (240): Initial SessionFactory creation failed.java.lang.NoClassDefFoundError: org.hibernate.cfg.Configuration 08-30 15:21:05.133: W/dalvikvm(240): Exception Ljava/lang/ExceptionInInitializerError; 在 Lcom/example/testfordatabase/HibernateUtility 期间抛出；。08-30 15:21:05.133: D/AndroidRuntime(240): 关闭 VM 08-30 15:21:05.133: W/dalvikvm(240): threadid=1: 线程退出但未捕获异常 (group=0x4001d800) 08 -30 15:21:05.173: E/AndroidRuntime(240): 致命异常: main 08-30 15:21:05.173: E/AndroidRuntime(240): java.lang.ExceptionInInitializerError 08-30 15:21:05.173: E /AndroidRuntime(240): at com.example.testfordatabase.EtityDao.insert(EtityDao.java:35) 08-30 15:21:05.173: E/AndroidRuntime(240): at com.example.testfordatabase.MainActivity$1.onClick (MainActivity.java:34) 08-30 15:21:05.173: E/AndroidRuntime(240): 在 android.view.View.performClick(View.java:2408) 08-30 15:21:05.173: E/AndroidRuntime (240): 在 android.view.View$PerformClick.run(View.java:8816) 08-30 15:21:05.173:

请帮助：D谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:31:22.643

并非所有标准 java 类都可以在 android 上使用。其中之一是包 javax.naming - 这就是你得到这个问题的原因。不过，您可以从其他来源添加缺失的课程。（甚至撕掉它们 orr rt.jar ） - 但是这样做你最终可能会复制完整的 java 运行时。无论如何，我发现hibernate对于android来说有点太重了。

# php - 使用 sed 替换为引号

> ID：12195264
> 
> 赞同：-1
> 
> 时间：2012-08-30T10:53:59.510
> 
> 标签：php, unix, sed

我想替换`,name=`为`"|"` 我可以替换`,name`为`|`using

```
$commandSed =exec("sed -i 's/,name=/|/g' " . $userPath . "Export.txt"); 
```

我如何也包括引号？

```
$commandSed =exec("sed -i 's/,name=/"|"/g' " . $userPath . "Export.txt"); 
```

这不起作用，并且没有完成替换

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:47:36.387

您可以通过用反斜杠转义双引号来在双引号命令行中包含双引号：

```
$commandSed =exec("sed -i 's/,name=/\"|\"/g' " . $userPath . "Export.txt"); 
```

但是，我会提醒您，您在这里所做的可能不是实现您的真正目标的最佳方式，无论那是什么。这听起来有点像[XY 问题](http://mywiki.wooledge.org/XyProblem)。

这里的大局是什么？你*真正*想做什么？

# php - 删除 [ ] 之间的文本

> ID：12195265
> 
> 赞同：1
> 
> 时间：2012-08-30T10:54:07.347
> 
> 标签：php, regex, preg-replace

我有

```
string = 'blah blah [unwanted text] blah' 
```

如何使用 PHP 返回`'blah blah blah'`？即我想删除方括号之间的文本。我会用`preg_replace`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T10:56:32.843

您可以使用此正则表达式： `\[.*?\]`

`echo preg_replace('/\[.*?\]/', '', "blah blah [unwanted text] blah");`

[http://codepad.org/cNvpQOSg](http://codepad.org/cNvpQOSg)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T11:01:08.440

是的，您可以使用`preg_replace('/\[[^]]*\]\s*/', '', $your_string)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T10:57:57.040

完整的解决方案：

```
$input = preg_replace('/\[[^\]]*\]\W*/i', '', $input); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T11:00:20.000

```
<?php
$string = 'blah blah [unwanted text] blah';
$x=explode("[",$string);
$y=explode("]",$string);
echo $x[0].$y[1];
?> 
```

- 使用它，以便您可以按预期获得输出。

# jquery - 带有 ajax 加载内容的 jQuery on()

> ID：12195266
> 
> 赞同：1
> 
> 时间：2012-08-30T10:54:12.800
> 
> 标签：jquery

我正在尝试“ajaxify”标准链接。我正在使用 jQuery on() 函数来拦截点击并动态检索内容：

```
$('.nextLink').on("click", function(e) {
    url = $(this).attr( 'href' ).replace( /^#/, '' );
    $.get(url, null, function(response) {
        $('#searchResults').replaceWith(response);
    });
}); 
```

这工作正常，除了标准链接行为仍然发生，所以我使用 ajax 获取内容，但随后它被整页刷新擦除。我尝试从处理程序返回 false 以防止正常提交

```
$('.nextLink').on("click", function(e) {
    ...
    return false;
} 
```

这可行，但是我在 ajax 加载的内容中也有链接。我的理解是 jQuery 的 on() 函数应该为使用 ajax 加载的内容重新绑定处理程序，但似乎添加`return false`可以防止这种情况发生。

所以看来我处于catch-22 的情况，我可以允许事件冒泡发生，允许'on()' 正常工作但是我也得到一个非ajax 提交，或者我可以阻止标准提交但是这个休息`on()`

有人能告诉我处理这种情况的最佳方法吗？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T10:55:10.130

> ...这工作正常，除了标准链接行为仍然发生，所以我使用 ajax 获取内容，但随后它被整页刷新擦除...

用于`preventDefault()`停止默认操作

```
$('.nextLink').on("click", function(e) {
   e.preventDefault();
   ... 
```

还要将处理程序绑定到新添加的元素上，您需要使用事件委托来捕获 的父元素上的单击事件`.nextLink`，例如使用

```
 $('#searchResults').on("click", ".nextLink", function(e) ... 
```

[请参阅jQuery 文档](http://api.jquery.com/on/)上的 on() 用法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T10:56:55.203

您希望您的文档收听`.nextLink`链接，无论它们是否在一开始就存在：

```
$(document).on("click", '.nextLink', function(e) {

    e.preventDefault();

    url = $(this).attr( 'href' ).replace( /^#/, '' );
    $.get(url, null, function(response) {
        $('#searchResults').replaceWith(response);
    });

}); 
```

这样`.nextLink`，无论何时创建事件，您都可以在 上监听事件 - 检查[jQuery on() 文档](http://api.jquery.com/on/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T11:04:14.830

在新加载的内容上重新注册`click`处理程序很容易，这样您就不必使用事件委托：

```
function doload(ev) {
    ev.preventDefault();

    url = $(this).attr( 'href' ).replace( /^#/, '' );
    $.get(url).done(function(response) {
        $('#searchResults').replaceWith(response);
        $('#searchResults .nextLink').on('click', doload);  // re-register new content
    });
}

$('.nextLink').on('click', doload); 
```

# c# - 在 C# WinForm 应用程序中显示全年

> ID：12195267
> 
> 赞同：-1
> 
> 时间：2012-08-30T10:54:13.177
> 
> 标签：c#, winforms

是否可以在 MonthCalendar 控件中显示全年（而不是逐月）。如果没有，还有其他选择还是我必须自己控制。我需要以图形方式显示在特定日期或特定时间间隔内发生的一些事件，并且我需要将它们显示为全年，因此标准 MonthCalendar 的显示在这种情况下不适用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:16:24.730

是的，您最多可以显示 12 个月。真诚地，我没有用这个控件做很多工作，但是在[MonthCalendar Members](http://msdn.microsoft.com/en-us/library/system.windows.forms.monthcalendar_members%28v=vs.71%29)中的 msdn 中我发现了[MonthCalendar.SetCalendarDimensions 方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.monthcalendar.setcalendardimensions%28v=vs.71%29)：

> 设置要显示的月份的列数和行数。

所以你需要这样做：

```
myMonthCalendarControl.SetCalendarDimensions(4, 3); 
//I used 4 columns and 3 rows because the product should be not greater than 12 
```

# php - 列出扩展特定类的所有类

> ID：12195270
> 
> 赞同：1
> 
> 时间：2012-08-30T10:54:23.220
> 
> 标签：php, zend-framework

在 Zend Framework 项目中，我想获取扩展特定类的所有类的列表。问题是，这些类不在列表中，`get_declared_classes()`因为它们尚未加载。

它应该像一个插件列表一样工作，所有“公共可见”类都扩展了一个特定的类，所以我可以“过滤”它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T11:01:19.087

如果这些类没有加载，PHP 不知道它们。所以你必须先加载所有类，或者解析类的源代码，注意哪个类`extends`是什么，然后构建你的依赖树

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:35:23.190

好吧，看来，我没有一个好主意；）我会更改系统以从数据库中获取所有插件，因此它不再需要类信息。感谢您的回答并指导我正确的方式;-)

# javascript - 在javascript函数中更改文档背景图像

> ID：12195271
> 
> 赞同：0
> 
> 时间：2012-08-30T10:54:35.490
> 
> 标签：javascript, html, css

我想在 javascript 函数中更改 html 文档背景图像，但我遇到了一些困难。这就是我所拥有的：

```
function changeBgImage(){

    document.background = "url('images/SecondBackground.png')";

} 
```

但正如我所说，不工作..有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T10:57:18.260

采用

```
document.body.style.backgroundImage = "url('images/SecondBackground.png')"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T10:57:54.337

```
function changeBGImage() {
  document.body.style.backgroundImage = "url(http://images.cheezburger.com/completestore/2010/7/9/fe8e91c5-c3f1-40cf-a034-983e8683ba73.jpg)";
}; 
```

这样就行了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T10:57:25.920

你很接近，但你也需要 .body 。

```
document.body.style.background = "url('images/SecondBackground.png')"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T10:58:07.503

尝试这样的事情

```
 document.getElementById("id of body").setAttribute("style","background-url:'images/SecondBackground.png'") 
```

# php - PHP 克隆关键字

> ID：12195273
> 
> 赞同：6
> 
> 时间：2012-08-30T10:54:45.863
> 
> 标签：php

> **可能重复：**
> [什么是 php 中的对象克隆？](https://stackoverflow.com/questions/2144506/what-is-object-cloning-in-php)

我正在研究一个经常使用“克隆”关键字的现有框架，不确定这样做是否是个好主意？我真的不明白需要使用“克隆”关键字。

例如看看这个编码

IE

```
 public function getStartDate ()
  {
    return clone $this->startDate;
  } 
```

对我来说，这个功能应该如下所示，我看不到克隆的需要。

```
 public function getStartDate ()
  {
    return $this->startDate;
  } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T11:12:24.397

使用克隆的原因是 PHP 在处理对象时总是返回对象作为引用，而不是作为副本。

这就是为什么在将对象传递给函数时不需要用 & （引用）指定它：

```
function doSomethingWithObject(MyObject $object) { // it is same as MyObject &object
   ...
} 
```

因此，为了获得对象副本，您必须使用 clone 关键字这是一个关于 php 如何处理对象以及 clone 做什么的示例：

```
class Obj {
    public $obj;
    public function __construct() {
        $this->obj = new stdClass();
        $this->obj->prop = 1; // set a public property
    }
    function getObj(){
        return $this->obj; // it returns a reference
    }
}

$obj = new Obj();

$a = $obj->obj; // get as public property (it is reference)
$b = $obj->getObj(); // get as return of method (it is also a reference)
$b->prop = 7;
var_dump($a === $b); // (boolean) true
var_dump($a->prop, $b->prop, $obj->obj->prop); // int(7), int(7), int(7)
// changing $b->prop didn't actually change other two object, since both $a and $b are just references to $obj->obj

$c = clone $a;
$c->prop = -3;
var_dump($a === $c); // (boolean) false
var_dump($a->prop, $c->prop, $obj->obj->prop); // int(7), int(-3), int(7)
// since $c is completely new copy of object $obj->obj and not a reference to it, changing prop value in $c does not affect $a, $b nor $obj->obj! 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T11:02:47.470

也许`startDate`是一个对象。

然后。当您返回时`clone $this->startDate`- 您将获得该对象的完整副本。您可以使用它、更改值、调用函数。而且，在它们影响数据库或文件系统之前 - 它是安全的，并且`startDate`不会修改实际对象。

但是，如果您只是按原样返回对象 - 您只返回一个引用。以及您对对象执行的任何操作 - 您对原始对象执行此操作。你所做的任何改变都会影响到这一点`startDate`。

这仅适用于对象，不会影响数组、字符串和数字，因为它们是值类型变量。

您应该阅读有关值类型变量和引用类型变量的更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T11:02:19.220

尽管它在[另一个问题](https://stackoverflow.com/questions/2144506/what-is-object-cloning-in-php)中得到了完美的解释（感谢您指出这个@gerald）

只是一个快速的答案：

如果没有克隆，该函数将返回对 startDate 对象的引用。随着克隆它返回一个副本。

如果返回的对象稍后会更改，它只会更改副本而不更改原始对象，原始对象也可能会在其他地方使用。

# php - AS3 到 php 创建在线文件夹

> ID：12195276
> 
> 赞同：0
> 
> 时间：2012-08-30T10:54:53.483
> 
> 标签：php, actionscript-3

我有一个 AS3 flash 应用程序，需要为每个用户创建一个文件夹/路径（在线），并在这些文件夹中获取一些 xml 文件。

我可以让 php 编写这些 xml 文件，但前提是路径/文件夹已经存在。如果没有，则返回错误：

```
[<a href='function.fopen'>function.fopen</a>]: failed to open stream: No such file or directory in /home/edicoes/public_html/test//savexml.php on line 20 
```

这是php代码：

```
<?php
$XMLFile = $_POST["xmlfile"];
$filename = $_POST["filename"];

//mkdir($User, '0777'); //I tried mkdir, to no avail. It's only for offline?

$handle = fopen($filename, 'w+');
fwrite($handle, $XMLFile );
fclose($handle);

echo "result=success";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:03:53.993

您只需要先创建目录。确保 apache 有权在父目录（chmod 777）中创建目录。

如果有人用：
xmlfile=恶意php代码
文件名=something.php调用你的代码
，然后用浏览器调用php页面怎么办？

您应该关心安全性，至少在 php 代码中添加“.xml”扩展名。

# jquery - 无法在 chrome 中禁用 jquery 中的图像按钮

> ID：12195281
> 
> 赞同：0
> 
> 时间：2012-08-30T10:55:37.413
> 
> 标签：jquery, telerik

无法在 chrome 中禁用 jquery 中的图像按钮

在侧面cshtml页面代码中：

```
@(Html.Telerik().Grid<object>().Name("testGrid").Columns(columns =>{
columns.Bound(item).ClientTemplate("<input type='text' width='20px' onchange=testGrid.OnPriceLockChange(this)' class='price' /><img src='" + @Url.Content("~/images/Tier/PlusT.png") + "' width='16' height='16' border='0' alt='Add Tier' title='Add Tier' onclick=testGrid.OnAddTierClick(this);' />").Title("Lock").Width(120); 
```

在 Jquery 内部-

```
$.each(rows, function (index, row) {
var images = row.find("img");
$.each(images, function (index, image) {
  $(image).attr("disabled", "disabled");
     });
} 
```

此代码在 IE 中有效，但在 Chrome 中无效。

我也尝试过`$(image).attr("disabled", true);`，但不能在 chrome 中工作。

只有`$(image).removeAttr("onclick");`在 Chrome 和 IE 中工作。

但在那之后无法`onclick`再次绑定。

请给出一些建议，如何在 chrome 中禁用 jquery 中的按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:13:59.957

您不能禁用图像。仅适用于内置（标准化）的输入字段。

这`onclick=testGrid.OnAddTierClick(this);`也不是附加 onClick 处理程序的首选方式。这是古老而懒惰的方式。jquery 方式更好/更易于维护，并且逻辑与视图（html）松散耦合。

禁用检查不是内置的，因此请自行检查。这是一个例子。

前html：

```
<img src="http://placehold.it/16x16" alt="Add Tier" title="Add Tier" class="addTierButton"/> 
```

javascript:

```
$('.addTierButton').click(function(){
    if($(this).attr('disabled') !== true){
        //onAddTierClick logic here...
    }
}); 
```

甚至更短：

```
$('.addTierButton[disabled!="true"]').click(function(){
        //onAddTierClick logic here...
}); 
```

如果您想添加行并保留您使用的绑定`.on()`

```
$(_selector_for_parent_container_).on('click','.addTierButton[disabled!="true"]', function(){
        //onAddTierClick logic here...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-06T15:48:48.547

VDP的答案很棒！我使用了以下，这就像一个魅力。

```
if ($('#' + controlid + '_Image1').attr('disabled') == 'disabled') return; 
```

# box2d - 将 Box2d 添加到 Cocos3d

> ID：12195286
> 
> 赞同：0
> 
> 时间：2012-08-30T10:55:59.587
> 
> 标签：box2d, cocos3d

我想将 Box2d 包含到一个 Cocos3d 项目中（是的，我知道它是一个 2d 物理引擎），但我无法让它工作。Xcode 找不到 box2d h 文件。我尝试设置搜索路径，但没有效果。有什么建议么？例如它找不到 Box2D/Collision/b2BroadPhase.h。

我做了如下：

1.  从工作中的 cocos2d 项目中复制 Box2d 文件夹，并将其放在我的 Cocos3d 项目中的 libs 文件夹中。

2.  使用以下选择将文件添加到 cocos3d 项目：

    *   复制到目标文件夹未选中
    *   为任何添加的文件夹创建组（即不创建文件夹引用）
    *   添加到目标已检查
3.  在此之后，我在整个项目的“用户标题搜索路径”和“标题搜索路径”中添加了“库”，它似乎被继承到目标特定设置。选中“始终搜索用户路径”。

我发现了很多关于此的问题，并且我尝试了许多其他解决方案。这是我最近的尝试。这有什么可疑的吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T12:29:38.137

我的错误是我只将“libs”声明为标题搜索路径。当我将“projectName/libs”声明为搜索路径时，该项目现在构建。

这很奇怪，因为我试图说明绝对搜索路径，但我没有让它起作用。我想我拼写正确。

希望这可以帮助某人！

# php - mysql休眠进程

> ID：12195287
> 
> 赞同：0
> 
> 时间：2012-08-30T10:56:02.097
> 
> 标签：php, mysql

我有一个连接到 MySQL 的 PHP 脚本执行一些操作并结束。

最后有一个`mysqli_close($link);`说法。

我仍然在 MySQL 进程列表中有该用户的睡眠进程，但不知道从哪里来？

据我所知，一旦 PHP 脚本结束，它应该关闭连接，即使`mysqli_close`最后没有 a （但有一个）。

那么该用户的那些休眠进程在哪里呢？

如果我重新启动`httpd`他们都会死。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T12:26:44.527

mysqli 提供持久连接。也就是说，它在 PHP 开发人员的连接模型和 dbms 模型之间提供了一层。

当您使用持久连接时，PHP 程序会使用 `mysqli_close()`. 但是，与 DBMS 的连接由 PHP 运行时维护，为下一次打开调用做好准备。

这在繁忙的网站上提供了巨大的加速，因为从 PHP 运行时（或任何其他 dbms 客户端）打开连接并且 dbms 很昂贵。

对我来说，您的大量空闲连接（其中 10 个）闻起来很像一个持久连接池。

这可以解释你所看到的吗？

# asp.net - 如何将双击鼠标事件添加到列表框？

> ID：12195288
> 
> 赞同：1
> 
> 时间：2012-08-30T10:56:04.823
> 
> 标签：asp.net, webforms, listbox

我想将双击鼠标事件添加到列表框。当我双击一个项目时，我想获取特定项目并分配一个方法。我一直在寻找该领域的教程，但尝试过但不知何故不起作用。

感谢您的帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:16:24.783

这段代码对我有用

```
protected void Page_Load(object sender, EventArgs e)
{
    if (Request["__EVENTARGUMENT"] != null && Request["__EVENTARGUMENT"] == "event 1")
    {
        // code for the event
    }
    ListBox1.Attributes.Add("ondblclick", ClientScript.GetPostBackEventReference(ListBox1, "event 1"));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T11:16:22.837

```
<%@ Page Language="C#" %>
<script runat="server">
void Page_Load(Object sender, EventArgs e){
   if(Request.Params["ListBox1Hidden"] != null
    && (string)Request.Params["ListBox1Hidden"] == "doubleclicked" {
    //This means It was double click
    Response.Write("Double Click was fired selected item is " 
    + ListBox1.SelectedItem.Text);
   }
}
void Button1_Click(object sender, EventArgs e) {
   Response.Write("Button was clicked");
}
</script>
<html>
<head>
    <script language="javascript">
    function ListBox1_DoubleClick() {
       /* we will change value of this hidden field so 
                that in 
                page load event we can identify event.
                       */
       document.forms[0].ListBox1Hidden.value = "doubleclicked";
       document.forms[0].submit();
    }
</script>
</head>
<body>
    <form runat="server">
        <div>Double click on Listbox
            <br />
            <asp:ListBox id="ListBox1" 
                    ondblclick="ListBox1_DoubleClick()" runat="server">
                <asp:ListItem Value="1">One</asp:ListItem>
                <asp:ListItem Value="2">Two</asp:ListItem>
                <asp:ListItem Value="3">Three</asp:ListItem>
                <asp:ListItem Value="4">Four</asp:ListItem>
            </asp:ListBox>
            <input type="hidden" name="ListBox1Hidden" />
        </div>
        <div>click on button
            <br />
            <asp:Button id="Button1" onclick="Button1_Click" 
                runat="server" Text="Button"/>
        </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-30T11:04:51.540

在列表框中发送所选项目的简单示例：

```
private void listBox1_MouseDoubleClick(object sender, MouseEventArgs e)
{
    string test = listBox1.SelectedItem.ToString();
} 
```

# c# - 调用 CompleteAdding 后添加到 BlockingCollection

> ID：12195293
> 
> 赞同：11
> 
> 时间：2012-08-30T10:56:20.487
> 
> 标签：c#, .net-4.0

我正在使用 Producer-Consumer 模式，我使用了一种`BlockingCollection`产生数据并从中消费数据的模式。我调用一个方法来生成数据，然后将 设置为`BlockingCollection`，`CompleteAdding`以便消费者使用`BlockingCollection`. 经过一些处理后，应用程序想要向 中添加一些其他数据`BlockingCollection`，但它不能因为它设置为`CompleteAdding`，我该如何设置`CompleteAdding`为 false，或者如何使用来自 的所有数据`BlockingCollection`，而不是等待`ComleteAdding`？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-30T10:58:10.227

你不能 - 调用的全部意义`CompleteAdding`在于说，“永远不会有任何数据添加到这个集合中。一旦它是空的，你就知道你已经完成了。” 您的要求有点像说：“在我关闭网络连接后，如何重新打开它以便写入更多数据？”

*您想要*建议的事实表明您应该重新考虑您的设计。也许您现在应该创建一个新`BlockingCollection`的？或者也许你*真的*不想打电话`CompleteAdding`开始？

# api - 编辑包含在 jar 文件中的任何文件

> ID：12195299
> 
> 赞同：0
> 
> 时间：2012-08-30T10:56:43.403
> 
> 标签：api, jar, java

我想在 Eclipse 中用我的 java 代码实现以下内容。

我需要编辑 jar 文件目录中的 .dict 文件。

我的目录结构就像

`C:\Users\bhavik.kama\Desktop\Sphinx\sphinx4-1.0beta6-bin\sphinx4-1.0beta6\modified_jar_dict\*WSJ_8gau_13dCep_16k_40mel_130Hz_6800Hz.jar*\dict\**cmudict04.dict**`

带有粗体字符的文本是我要编辑的文本文件名

和带有斜体格式的文本是我的 .jar 文件

现在我如何编辑这个 cmudict04.dict 文件，该文件位于运行时与 java 应用程序的 WSJ_8gau_13dCep_16k_40mel_130Hz_6800Hz.jar\dict\ 目录中。

我想要带有我编辑过的更新文件的 jar 文件。

请问你能给我任何帮助吗？

提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:13:06.433

您不能编辑包含在 Jar 文件中的文件并将其保存在 Jar 文件中......如果没有，首先提取文件，更新它并通过将旧 Jar 的内容复制到新 Jar 来创建新 Jar一，删除旧的并在其位置重命名新的...

我的建议是找到更好的解决方案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T11:04:35.157

我建议使用[java.util.zip](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/zip/package-summary.html)。使用这些类，您可以读取和写入存档中的文件。但不能保证修改内容，因为它可能会被缓存。

**示例教程**

[http://www.javaworld.com/community/node/8362](http://www.javaworld.com/community/node/8362)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T05:04:40.760

我已成功编辑 jar 文件并将其按原样包装回来......使用以下代码

```
public void run() throws IOException
    {
      Manifest manifest = new Manifest();
      manifest.getMainAttributes().put(Attributes.Name.MANIFEST_VERSION, "1.0");
    //  JarOutputStream target = new JarOutputStream(new FileOutputStream("E:\\hiren1\\WSJ_8gau_13dCep_16k_40mel_130Hz_6800Hz.jar"), manifest);
     // add(new File("E:\\hiren1\\WSJ_8gau_13dCep_16k_40mel_130Hz_6800Hz/"), target);
      JarOutputStream target = new JarOutputStream(new FileOutputStream("C:\\Users\\bhavik.kama\\Desktop\\Sphinx\\sphinx4-1.0beta6-bin\\sphinx4-1.0beta6\\modified_jar_dict\\WSJ_8gau_13dCep_16k_40mel_130Hz_6800Hz.jar"), manifest);
         add(new File("C:\\Users\\bhavik.kama\\Desktop\\Sphinx\\sphinx4-1.0beta6-bin\\sphinx4-1.0beta6\\modified_jar_dict\\WSJ_8gau_13dCep_16k_40mel_130Hz_6800Hz/"), target);

      target.close();
    }

    private void add(File source, JarOutputStream target) throws IOException
    {
      BufferedInputStream in = null;
      try
      {
        if (source.isDirectory())
        {
          //String name = source.getPath().replace("\\", "/");

            if(isFirst)
            {
                firstDir = source.getParent() + "\\";
                isFirst = false;
            }
            String name = source.getPath();
            name = name.replace(firstDir,"");
          if (!name.isEmpty())
          {
            if (!name.endsWith("/"))
              name += "/";
            JarEntry entry = new JarEntry(name);
            entry.setTime(source.lastModified());
            target.putNextEntry(entry);
            target.closeEntry();
          }
          for (File nestedFile: source.listFiles())
            add(nestedFile, target);
          return;
        }
        String name = source.getPath();
        name = name.replace(firstDir,"").replace("\\", "/");
        //JarEntry entry = new JarEntry(source.getPath().replace("\\", "/"));
        JarEntry entry = new JarEntry(name);
        //JarEntry entry = new JarEntry(source.getName());
        entry.setTime(source.lastModified());
        target.putNextEntry(entry);
        in = new BufferedInputStream(new FileInputStream(source));

        byte[] buffer = new byte[1024];
        while (true)
        {
          int count = in.read(buffer);
          if (count == -1)
            break;
          target.write(buffer, 0, count);
        }

        target.closeEntry();
      }
      finally
      {
        if (in != null)
          in.close();
      }

    } 
```

# sql-server-2008-r2 - 等待数据库引擎恢复句柄失败

> ID：12195300
> 
> 赞同：1
> 
> 时间：2012-08-30T10:56:44.710
> 
> 标签：sql-server-2008-r2

我一直在尝试在本地计算机上安装 sql server 2008 r2，在安装结束时出现此错误“等待数据库引擎恢复句柄失败”。该向导显示无法安装某些组件（包括数据库引擎）的进度。我需要一些与此相关的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:13:25.503

这个问题可能会在几个不同的场景中弹出。请检查日志是否有错误。

如果 Microsoft® 系统文件夹丢失或缺少正确权限，则可能发生此错误的一种情况。

请使用以下步骤：

> 1.单击 Windows® 开始按钮，然后单击运行。
> 
> 2\. 键入 %appdata% 并单击确定。
> 
> 3.浏览到 Microsoft 文件夹。
> 
> 4.找到保护文件夹以分配正确的权限：

注意：如果 Microsoft 文件夹中缺少 Protect 文件夹，您需要通过右键单击并选择文件夹在此位置创建它。确保将文件夹命名为“保护”。

> 1.右键单击保护文件夹并选择属性。
> 
> 2.单击安全选项卡。确保列出了系统和您登录的 Windows 用户帐户，并且两者都具有完全控制权。
> 
> 3.单击添加开始添加帐户。对于 Windows Vista®/Windows 7，您需要先单击编辑。
> 
> 4.在“输入要选择的对象名称”框中，键入单词 System，然后按键盘上的 Enter。现在应该列出系统帐户。从用户名列表中选择系统，然后在允许列下选择完全控制。单击应用。
> 
> 5.按照步骤 3-4 为您登录的 Windows 用户帐户查找、添加和分配完全控制权限。
> 
> 6.点击确定

.

尝试安装 SQL Server 2008 R2。

即使这不能解决您的问题，您也可以查看为安装方案提供解决方法的 msdn 博客，看看是否可以解决问题？

# ios - IOS : MPVideoView, Whats its controller & Delegate

> ID：12195301
> 
> 赞同：0
> 
> 时间：2012-08-30T10:56:46.317
> 
> 标签：ios, uiwebview, mpmovieplayercontroller, mpmovieplayer

这可能是因为我大脑冻结，但我不相信我以前遇到过 MPVideoView。

所以我有一个带有 HTML5 演示的 UIWebview，然后播放一个视频（在 Web 视图中），它似乎创建了一个 MPVideoView 类型的新视图。这是 Apple 用于显示 HTML5 视频内容的私有类吗？

它有任何委托方法吗？那我可以自动播放吗？

我可以移动控件吗，我猜它们是该视图的子视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:39:20.407

您可以使用 MPMoviePlayerController 播放 HTML5 视频（考虑到您有视频的链接）使用以下代码

```
moviePlayer1 = [[MPMoviePlayerController alloc]
initWithContentURL:videoURL];

moviePlayer1.view.frame = CGRectMake(0, 0, 200, 110);
[self.view addSubview:moviePlayer1.view];
[[NSNotificationCenter defaultCenter]addObserver:self 
                                        selector:@selector(movieFinishedCallback:)
                                            name:MPMoviePlayerPlaybackDidFinishNotification
                                          object:moviePlayer1];
[moviePlayer1 play]; 
```

委托方法可以在[这里找到](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html)

# javascript - 使用 javascript 模数更新瓷砖位置的行

> ID：12195302
> 
> 赞同：0
> 
> 时间：2012-08-30T10:56:49.643
> 
> 标签：javascript, jquery

我想创建一个`position:absolute`由每行 5 个图块组成的图块网格，因为我不确定将存在多少个图块我想创建一些循环通过图块并动态添加顶部和左侧位置的 javascript ：

第一行：顶部：0；left:0 然后 51px 然后 102px ...第二行：top:51px; 左：0 然后 51px 然后 102px .. 第三行 ...

我知道我需要在循环中使用模数，但我真的只熟悉选择像 i%4 == 0 这样的 1 项，而不是实际影响整行？

谁能解释我如何做到这一点？

JS

```
var list = $('ul').children();

for ( var i = 0; i < list.length; i++ ) {

    console.log(i);
    console.log( list[i] );    

    // first 5 top: 0 left: 0,51,102,153,204
    // second 5 top:51 left: 0,51,102,153,204
    // third 5 top: 102 left: 0,51,102,153,204
    $( list[i] ).css({
        left: i*51        
    });   

} 
```

在这里小提琴：http: [//jsfiddle.net/Z7TwF/4/](http://jsfiddle.net/Z7TwF/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:01:16.567

利用

```
left: (i % 5) * 51
top: Math.floor(i / 5) * 51 
```

这将得到除以 5 的余数，并将其与 51 相乘。顶部的值需要被截断，Javascript 没有用于欧几里得除法的运算符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T11:05:46.640

```
var list = $('ul').children();

for ( var i = 0; i < list.length; i++ ) {
    $( list[i] ).css({
        top: (parseInt(i / 5) * 51) + "px",
        left: ((i % 5) * 51) + "px"        
    });   
} 
```

# objective-c - 在超级视图中查找子视图的位置

> ID：12195303
> 
> 赞同：2
> 
> 时间：2012-08-30T10:56:51.673
> 
> 标签：objective-c, ios

您好，我有超级视图，其中有许多 UIImageViews。我已将 UIPanGesture 添加到超级视图中，在我的情况下为“View.m”。当用户在superview中拖动它时，我需要获取该UIImageView（子视图）的引用或换句话说对象。如果这可以通过'hittest'完成，那么让我知道如何在gestureHandler中使用它并且作为hittest返回UIView ，我如何将 UiView 转换为 UIImageView。这是我的代码

```
//
//  View.m
//  PuzzleGame
//
//  Created by Noman Khan on 8/29/12.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//

#import "View.h"
#define  noOfRows 5
#define  noOfCols 4
@implementation View
@synthesize imageArray;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }

    return self;
}

// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.

- (void)initImageView {
    int x = 1;
    int y = 1;
//    int width = 190;
//    int height = 198;
    int width = sizeOfRows;
    int height = sizeOfCols;

    UIImageView *imgView=[[UIImageView alloc]initWithFrame:CGRectMake(x,y,width-10,height+5)]; 
    imgView.image=[UIImage imageNamed:@"iceage_01.png"];
    [self addSubview:imgView];

    x=x+(width-9);
    y=y+(sizeOfCols+9);

    UIImageView *imgView1=[[UIImageView alloc]initWithFrame:CGRectMake(x,y,width-10,height+5)]; 
    imgView1.image=[UIImage imageNamed:@"iceage_02.png"];
    [self addSubview:imgView1];

- (void)drawRect:(CGRect)rect
{
    imageArray=[[NSArray alloc]initWithObjects:[UIImage imageNamed:@"iceage_01.png"],[UIImage imageNamed:@"iceage_02.png"],[UIImage imageNamed:@"iceage_03.png"],[UIImage imageNamed:@"iceage_04.png"],[UIImage imageNamed:@"iceage_05.png"],[UIImage imageNamed:@"iceage_06.png"],[UIImage imageNamed:@"iceage_07.png"],[UIImage imageNamed:@"iceage_08.png"],[UIImage imageNamed:@"iceage_09.png"],[UIImage imageNamed:@"iceage_10.png"],[UIImage imageNamed:@"iceage_11.png"],[UIImage imageNamed:@"iceage_12.png"],[UIImage imageNamed:@"iceage_13.png"],[UIImage imageNamed:@"iceage_14.png"],[UIImage imageNamed:@"iceage_15.png"],[UIImage imageNamed:@"iceage_16.png"],[UIImage imageNamed:@"iceage_17.png"],[UIImage imageNamed:@"iceage_18.png"],[UIImage imageNamed:@"iceage_19.png"],[UIImage imageNamed:@"iceage_20.png"], nil];
    CGContextRef content=UIGraphicsGetCurrentContext();

    CGContextSetLineWidth(content, 2);
    CGContextSetStrokeColorWithColor(content, [UIColor whiteColor].CGColor);

    int totalWidth=self.frame.size.width;
    int totalHeight=self.frame.size.height;

     sizeOfRows=totalHeight/noOfRows;
     sizeOfCols=totalWidth/noOfCols;
    //making rows
    int x = 0,y = 0;

    for (int i=0; i<noOfRows+1; i++) {
        CGContextMoveToPoint(content, x, y);
        CGContextAddLineToPoint(content, 1000, y);
        CGContextStrokePath(content);
        //y=y+200;
        y=y+sizeOfRows;
    }
    //making colums
    x=0,y=0;
    for (int i=0; i<noOfCols+1; i++) {
        CGContextMoveToPoint(content, x, y);
        CGContextAddLineToPoint(content, x, 1000);
        CGContextStrokePath(content);
        //x=x+192;
        x=x+sizeOfCols;
    }

    [self initImageView];

    UIPanGestureRecognizer *panGesture=[[UIPanGestureRecognizer alloc]initWithTarget:self action:@selector(panHandler:)];
    [self addGestureRecognizer:panGesture];
    //    CGContextMoveToPoint(content, 20, 20);
    //    CGåContextAddLineToPoint(content, 50, 50);
    //    
    //    CGContextStrokePath(content);
}

- (void)panHandler:(UIGestureRecognizer *)sender{

    CGPoint point=[sender locationInView:self];

    if (sender.state == UIGestureRecognizerStateBegan) {
        NSLog(@"BEgin");
        UIView *v=[[UIView alloc]initWithFrame:CGRectMake(75, 75, 100, 100)];
     v   = [self hitTest:point withEvent:nil];
      //  UIImageView *imv=(UIImageView*)v;   
        [self addSubview:v];
    }
    if (sender.state == UIGestureRecognizerStateChanged) {
        NSLog(@"moved");
    }
    if (sender.state == UIGestureRecognizerStateEnded) {
        NSLog(@"end");
    }
   // NSLog(@"In Pan Handler");

}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T11:38:06.153

是的，您可以使用 hittest。Hittest 以递归方式工作，以下是关于 hittest 的一些要点。1.它调用pointInside:withEvent: of self 2.如果它,hitTest:withEvent:,返回nil。您的视图层次结构已结束。你没有进一步的看法。3.如果返回YES，则将消息传递给子视图，从顶层子视图开始，一直到其他视图，直到某个子视图返回非nil对象或所有子视图都收到该消息。4.如果没有nil对象返回nil，则返回self

UIImageView 是 UIView 的子类，因此您可以将最热门的返回视图转换为 UIImageView：
UIImageView *imageView = (UIImageView *)[[UIView alloc]initWithFrame:CGRectMake(75, 75, 100, 100)];

您可以使用视图的 Tag 属性进行更好的处理。

# backbone.js - 将一个属性传递给同一 Backbone 模型上的另一个属性

> ID：12195304
> 
> 赞同：0
> 
> 时间：2012-08-30T10:56:52.187
> 
> 标签：backbone.js

我有一个名为 Summary 的 Backbone 模型，它具有 Total 和 DisplayTotal 属性。我想做的只是复制 Total 的值并将其传递给 DisplayTotal。

也可以为 DisplayTotal 设置默认值吗？

```
defaults:{
    "DisplayTotal" : this.Total,
} 
```

如果可能，一旦设置了 Total 属性，它也应该将其值设置为 DisplayTotal。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:17:16.600

有几件事反对这种方法。

### 第 1 页。`defaults`在类定义时间解释

所以`this`不应该是你所期望的，可能`this`会是`window`这样的。

### 第 2 页。通过`Model.get()`函数访问主干属性

所以你的例子是不正确的，它应该是这样的：

```
defaults:{
  "DisplayTotal" : this.get( "Total" ),
} 
```

但是点**P.1。**仍然使这不起作用。

您还有一个实现您想要的方法的列表：

### S.1。初始化`DisplayTotal`_`Model.initialize()`

```
initialize: function(){
  this.set( "DisplayTotal", this.get( "Total" ) );
} 
```

### S.2。延迟`DisplayTotal`初始化到*运行时间*

```
defaults:{
  "DisplayTotal" : function() { return this.get( "Total" ) }
} 
```

非常危险的解决方案，您可能会遇到*上下文*问题`this`。

### S.3。`DisplayTotal`随时更新`Total`更新

```
initialize: function(){
  this.on( "change:Total", this.setDisplayTotal, this );
},

setDisplayTotal: function(){
  this.set( "DisplayTotal", this.get( "Total" ) );
} 
```

但我担心你应该把这个和**S.1 结合起来。**由于我不认为该事件`change`是在第一组属性中触发的。

# scala - 如何覆盖具有依赖返回类型的方法？

> ID：12195312
> 
> 赞同：5
> 
> 时间：2012-08-30T10:57:14.823
> 
> 标签：scala, scala-2.9, path-dependent-type

我在 Scala 2.9.2 实现一个声明依赖返回类型的方法时遇到了麻烦。以下代码

```
object DependentTypesQuestion {
  def ??? = throw new UnsupportedOperationException
  trait X {
    trait Y
  }
  trait Z {
    def z(x: X): x.Y
  }
  object Z extends Z {
    override def z(x: X): x.Y = ???
  }
} 
```

在 2.9.2 下编译期间会产生以下错误消息：

```
overriding method z in trait Z of type (x: DependentTypesQuestion.X)x.Y;  method z has incompatible type 
```

在 2.10.0-M4 中，问题似乎已得到解决，但不幸的是，我的项目目前与 2.9 相关联。

> 是否可以在 2.9.2 中解决此问题？

（或者，是否有 2.9.3 的前景，其中包括 2.10 的反向移植修复？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T11:49:25.107

如果您真的坚持使用 2.9.x，那么以下可能是您的解决方法，

```
object DependentTypesQuestion {
  def ??? = throw new UnsupportedOperationException
  trait X {
    trait Y
  }
  trait Z[D[_ <: X with Singleton]] {
    def z[T <: X with Singleton](x: T): D[T]
  }

  type Dep[T <: X with Singleton] = T#Y

  object Z extends Z[Dep] {
    override def z[T <: X with Singleton](x: T): x.Y = ???
  }
} 
```

# android - 基于下拉菜单的语言更改

> ID：12195322
> 
> 赞同：2
> 
> 时间：2012-08-30T10:57:57.883
> 
> 标签：android, drop-down-menu, localization

我的 android 应用程序有一个下拉列表，用户可以从中更改语言，如英语、爪哇语等。当用户更改语言时，应用程序语言将更改。这是一个简单的应用程序，只有一个布局。请任何人帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:03:39.450

我不相信你的字符串的即时翻译；即使是最好的自动翻译器也会产生不准确的输出。此外，通过这种方式处理翻译，您会增加相当多的复杂性、开销和依赖性（例如，拥有网络连接）。

拥有“多语言应用程序”（如您所说）的问题是众所周知的，解决它的过程称为[国际化和本地化](http://en.wikipedia.org/wiki/Internationalization_and_localization)。一般来说，当您使用框架或编程语言时，您可以查找与该主题相关的现有包/库——几乎可以肯定的是，其他人已经花费了大量时间来构建一个好的机制来促进这一点。

安卓也不例外；它是在内置本地化支持的情况下开发的。Android 开发者文档有一个 [全面](http://developer.android.com/guide/topics/resources/localization.html)的本地化指南，你应该看看。您仍然需要以某种方式翻译您的文本，但是如何为用户提供特定于语言环境的消息的许多“基础工作”已经为您准备好了。

最后一点——Android 文档还提供了一个名为“ [Hello, L10n](http://developer.android.com/training/basics/supporting-devices/languages.html) ”的教程，它将引导您了解创建本地化应用程序的基础知识。希望这可以帮助！

# qt - 使用 Qt 获取当前的 OpenGL 上下文

> ID：12195328
> 
> 赞同：0
> 
> 时间：2012-08-30T10:58:14.857
> 
> 标签：qt, opengl

我用一些 OpenGL 调用编写了一个基于 Qt 的 dll。如果我从 Qt 应用程序加载我的 DLL，并使用用于渲染的 QGLWidget，则从 DLL 调用 QGLContext::currentContext 会返回正确的上下文。但是如果在非基于 Qt 的程序中使用我的 DLL，则不会返回 QGLContext。结果，我无法在非基于 Qt 的应用程序中使用 QGLShaderProgram。

我做错了什么？

PS Direct 调用我的库中的 glCreateProgram 等似乎工作正常，但我想使用 Qt 类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:10:19.027

> 我想使用 Qt 类。

然后您应该在使用 Qt 的应用程序中使用您的 DLL。通过需要 Qt 类，您的 DLL 现在需要***Qt***。如果您希望您的 DLL 在 Qt 不可用时工作，那么您不应该使用 Qt。

此外，着色器和程序的 Qt 类不是您在 30 分钟内完成的。

# javascript - 有没有办法修改以前用 RegisterStartupScript 注册的启动脚本？

> ID：12195329
> 
> 赞同：0
> 
> 时间：2012-08-30T10:58:14.923
> 
> 标签：javascript, asp.net

我有一个控件，它必须发出一个 javascript 数据数组，这些数据在整个页面生命周期中累积。

控件不知道数据何时完成累积，因此它不知道何时调用`RegisterStartupScript`.

那我该怎么做呢？我最初的计划是在`RegisterStartupScript`每次添加数据时调用，但使用相同的`key`，只有第一次调用会呈现任何内容。

因此，也许更好的问题标题是“当脚本可以在整个页面生命周期中更改时，我如何知道何时调用 RegisterStartupScript？”

# php - Echo 返回数字而不是字符串

> ID：12195331
> 
> 赞同：0
> 
> 时间：2012-08-30T10:58:18.173
> 
> 标签：php, sql, echo, rounding

为什么 echo 提供`16`而不是 SQL 查询`UPDATE...`？

```
for ($i=0;...) {
    $lat = round(($deg + $min/60 + $sec/3600),6);

    $query = "UPDATE `Parking` 
              SET lat=" . $lat . " 
              WHERE id = " . $i+16 . "";
    $result=ejecutar_query($query);
    echo $query;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T11:02:04.400

试试这样：

```
 $query = "UPDATE `Parking` 
           SET lat=" . $lat . " 
           WHERE id = " . ($i+16);
 $result=ejecutar_query($query);
 echo $query; 
```

这个可以吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T11:03:42.873

正确的代码是（ check:($i+16) ）：

```
for ($i=0;...) {
    $lat = round(($deg + $min/60 + $sec/3600),6);

    $query = "UPDATE `Parking` 
              SET lat=" . $lat . " 
              WHERE id = " . ($i+16) . "";
    $result=ejecutar_query($query);
    echo $query;
} 
```

因为 PHP 不是几乎没有类型的语言，所以 + 运算符将所有内容都转换为 int。

# c# - 从 Gridview 到 Formview 的编辑命令

> ID：12195333
> 
> 赞同：0
> 
> 时间：2012-08-30T10:58:22.950
> 
> 标签：c#, asp.net, gridview, formview

我有一个列出一些 SQL 数据的 Gridview。我有一个带有编辑模板的 Formview 设置。然后我想要 Gridview 中的 LinkBut​​ton，在 formview 中打开编辑，并在 gridview 中选择条目。

我有这个从 Gridview 捕获我的编辑命令，但是我不知道如何触发我的 Formview？

```
public void newsEdit_Command(Object sender, CommandEventArgs e) {
    //Trigger formview edit from here...
    //e.CommandArgument contains my ID of the selected row in gridview.
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T12:19:30.500

以你想要的方式，我认为这是不可能的。

您可以通过以下简单方式进行操作：

1）在网格视图中显示数据，当用户在网格视图中选择一行时，在表单视图中显示该行数据（或者您可以使用详细信息视图）

2）在表单视图中显示数据后，现在编辑它的行。

# mysql - Mysql加入多个外键

> ID：12195334
> 
> 赞同：0
> 
> 时间：2012-08-30T10:58:34.377
> 
> 标签：mysql, join

我有一个 PHP/MySQL 应用程序，但以前的开发人员已经在数据库中完成了这个

```
tbl_cat columns:

cat_id | cat_name

tbl_products columns have cat_id assigned:

category_1 | category_2 | category_3 
```

我需要做的是分配`tbl_cat.cat_name`给（`category_1`等`category_2`...）

我知道`as`这里是错误的，但只是为了证明它必须与此类似：

```
SELECT * FROM tbl_products 
LEFT JOIN tbl_cat 
ON category_1=cat_id AS cat_1 
AND category_2=cat_id AS cat_2 
AND category_3=cat_id AS cat_3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:44:29.843

`select`使用 join 时的正常语法是：

```
SELECT        
      table_alias_1.column_1 AS column_alias_1,
      table_alias_2.column_2 AS column_alias_2,
      table_alias_3.column_3 AS column_alias_3
FROM  table_1 AS table_alias_1
LEFT JOIN table_2 AS table_alias_2 
     ON table_alias_1.column_1 = table_alias_2.column_2
LEFT JOIN table_3 AS table_alias_3
     ON table_alias_2.column_3 = table_alias_3.column_3; 
```

table_1 是否与 table_2 相同并不重要，只要它们具有不同的别名，您就可以将表连接到自身。

您不能在 select 语句中声明赋值**。select 语句中的`=`符号将被解释为比较运算符而不是赋值运算符。

** 此规则有一个例外 - MySQL 提供的非标准扩展，它不是 ANSI-SQL 的一部分，但它用于分配值变量，这些变量将在 select 之外而不是在其中使用；赋值运算符`:=`不是`=`；这基本上是 ANSI SQL 标准的替代品`SELECT ... INTO ...`。

# type-conversion - 如何在我的 ZSH 提示符中输出当前历史事件编号（%! 或 %h）-1？

> ID：12195338
> 
> 赞同：1
> 
> 时间：2012-08-30T10:58:42.270
> 
> 标签：type-conversion, command-prompt, interpolation, zsh, prompt

在我的 ZSH 提示中，我希望能够输出当前的历史事件编号（`%!`或`%h`）-1

如果当前历史事件编号是！256，我想将其减一并在我的提示符中输出结果（即！255）。

这是它现在的样子以及我想要的样子：

![我当前 ZSH 提示的屏幕截图](../Images/a87bf2598801605716b392e897a32163.png)

下面是我当前的 ZSH 主题（与此问题有关的代码位于**previous_history_event_number ()**函数中，该函数由**return_code_enabled=**声明触发：

```
# ------------------------------------------------------------------------------
#          FILE:  hced.zsh-theme
#   DESCRIPTION:  oh-my-zsh theme file.
#                 (Credits to authors of blinks.zsh-theme and dieter.zsh-theme
#                  from which themes I've taken useful bits.)
#        AUTHOR:  hced
#       VERSION:  0.0.1
#    SCREENSHOT:
# ------------------------------------------------------------------------------

function _prompt_char() {
  if $(git rev-parse --is-inside-work-tree >/dev/null 2>&1); then
    echo "%{%F{blue}%}±%{%f%k%b%}"
  else
    echo ' '
  fi
}

ZSH_THEME_GIT_PROMPT_PREFIX=" [%{%B%F{blue}%}"
ZSH_THEME_GIT_PROMPT_SUFFIX="%{%f%k%b%K{black}%B%F{green}%}]"
ZSH_THEME_GIT_PROMPT_DIRTY=" %{%F{red}%}*%{%f%k%b%}"
ZSH_THEME_GIT_PROMPT_CLEAN=""

PROMPT='%{%f%k%b%}
%{%K{black}%B%F{green}%}%n%{%B%F{blue}%}@%{%B%F{cyan}%}%m%{%B%F{green}%} %{%b%F{yellow}%K{black}%}%~%{%B%F{green}%}$(git_prompt_info)%E%{%f%k%b%}
%{%K{black}%}$(_prompt_char)%{%K{black}%} %#%{%f%k%b%} '

#RPROMPT='!%{%B%F{cyan}%}%!%{%f%k%b%}'

function previous_history_event_number () {
    prev_hist_num=("%!"-1)
    declare -i prev_hist_num
    echo "$prev_hist_num gave exit code: "
}

# elaborate exitcode on the right when >0
return_code_enabled="%(?..%{$fg[red]%}$(previous_history_event_number)%?%{$reset_color%})"
return_code_disabled=
return_code=$return_code_enabled

RPS1='${return_code}  !%{%B%F{cyan}%}%!%{%f%k%b%}'

function accept-line-or-clear-warning () {
    if [[ -z $BUFFER ]]; then
        time=$time_disabled
        return_code=$return_code_disabled
    else
        time=$time_enabled
        return_code=$return_code_enabled
    fi
    zle accept-line
}
zle -N accept-line-or-clear-warning
bindkey '^M' accept-line-or-clear-warning 
```

免责声明：我不是程序员，所以`previous_history_event_number ()`函数中的代码现在非常（非常）无能为力。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T15:47:00.917

如果在提示中添加 atom 时显示当前历史事件编号，则可以使用修饰符`%!`将其放入变量中：`(%)`

```
V='%!'
integer HISTORY_EVENT_NUMBER=${(%)V}-1 
```

# c# - 从 web.config 向 .cs 文件请求密钥

> ID：12195339
> 
> 赞同：1
> 
> 时间：2012-08-30T10:58:42.910
> 
> 标签：c#, asp.net, css

场景：

我在 appSettings 的 web.config 中有一个键：

```
<add key="stylet" value="http://localhost/style.css"/> 
```

我有一个带有以下代码的 .cs 文件：

```
response.ContentType = "text/html";
response.Write("<html>");
response.Write("<head>");
response.Write(@"<title>See the page</title>");
response.Write(@"<link rel='stylesheet' type='text/css' />");
response.Write("</head>");
response.Write("<body>");
response.Write("<br /><table style='width: 500px'>");
response.Write("<tr><td class='ArticleIntro'>");
response.Write(propertyValue);
response.Write("</td></tr>");
response.Write("</table>");
response.Write("</body>");
response.Write("</html>"); 
```

问题：

我如何请求 .cs 文件中的密钥？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T11:00:38.907

您可以为此使用[ConfigurationManager](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.aspx)类：

```
var value = ConfigurationManager.AppSettings["stylet"];
response.Write(@"<link href='"+ value +"' type='text/css' />"); 
```

# ruby-on-rails - Rails 引擎和命名空间。需要命名空间的情况？

> ID：12195342
> 
> 赞同：0
> 
> 时间：2012-08-30T10:58:46.727
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-engines

我对引擎中的命名空间有点困惑。在使用哪里的 Rails 引擎中`isolate_namespace`，

```
module Blog
  class Engine < Rails::Engine
    isolate_namespace Blorgh
  end
end 
```

何时需要**使用**命名空间引用对象`Blog`（例如`Blog::Post`vs just `Post`）？

例如，在`Post`引擎资源的控制器中，可以这样做`Post.find`吗？什么时候绝对需要你使用`Blog::Post`？

同样在模型关联中，假设 Post `has_many :comments`。不知何故，我期望将其定义如下：

```
class Post < ActiveRecord::Base
  :has_many "blog/comments"
end 
```

因为一切都是命名空间（模型，表名，...），但它看起来`has_many :comments`只是工作。为什么在关联键中不使用命名空间，并且在`Comment`主机应用程序中存在资源的情况下，rails 如何知道`Comment`我指的是哪个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T12:23:51.223

当您在某个模块中时，您可以在不提供模块名称的情况下引用该模块的其他成员，例如：

```
module Foo

  class Bar
    def initialize
      @baz = Baz.new # same as Foo::Baz.new
    end
  end
  class Baz

  end
end 
```

如果`Baz`当前模块中不存在，它将级联查找定义，最终调用`const_missing`（在此基础上构建 Rails 中的类的自动加载），如果没有找到则抛出错误。

[您的其他问题在这里](http://edgeapi.rubyonrails.org/classes/Rails/Engine.html)得到解答。

# iphone - 来自 Facebook 页面的事件的 RSS 格式

> ID：12195345
> 
> 赞同：1
> 
> 时间：2012-08-30T10:58:59.510
> 
> 标签：iphone, objective-c, ios, facebook, ipad

我成功地使用这个 URL 在 FB 中获取了一个页面的 RSS 提要。

```
https://facebook.com/feeds/page.php?id=PAGE_ID_HERE&format=rss20 
```

它以 RSS 格式返回值。然后使用常规`NSXMLParser`方法或一些这样的解析协议，我能够解析它们。但不幸的是它返回了页面的所有细节，例如事件、注释等。

我只想获取事件。[这里](https://stackoverflow.com/questions/12124159/getting-events-from-facebook-page)有说明，一旦我们获得通用访问令牌，我们就可以使用 Graph API 来实现它。我的问题是，我们不能像上面的 URL 那样简单地获取 Facebook 页面中事件的 RSS 提要吗？请指教。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T12:26:14.643

看起来 FB API 和所有从 Facebook 访问数据的 RESTful 方法都将被淘汰，取而代之的是 Graph API 和 FQL，无论你喜欢哪个。

Graph API的方式是解析返回的JSON： `https://graph.facebook.com/PAGE_ID/events?access_token=TOKEN_HERE`

在浏览 FQL 文档后，我找不到使用它的方法。所以，看起来你最大的希望在于 Graph API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:34:22.493

我真的很想知道如何做到这一点。我们有一个 facebook 页面，并在我们的网站上从这个页面进行直播。现在我们也想从网站的 facebook 页面中获得一个事件列表。有可能吗？

# javascript - 画布图像到图像文件

> ID：12195349
> 
> 赞同：2
> 
> 时间：2012-08-30T10:59:14.547
> 
> 标签：javascript, image, html, canvas

所以我有一个用户在其上签名的画布，现在我不想将其转换为 base 64 字符串，我只是想将其保存为图像本身。html5最简单的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T11:02:46.037

您可以通过这种方式轻松做到这一点（在这种情况下将格式指定为**png**）：

```
var img = canvas.toDataURL("image/png"); 
```

您可以指定不同的图像格式。看看这个[答案](https://stackoverflow.com/questions/923885/capture-html-canvas-as-gif-jpg-png-pdf)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T11:06:40.440

我在这里回答了一个类似的问题：

[模拟用户事件](https://stackoverflow.com/questions/12176692/simulating-user-event/12179451#12179451)

## 假设您在本地保存

您可以使用从数据 URL 创建图像的路线，但保存它是目前使用 HTML5 不是很好的棘手部分。如果浏览器`download`包含`a tag`.

显然，如果您拥有比标准网页更高的权限...即您正在设计浏览器插件-那么还有其他选择...

如果我自己实现这样的东西，我会承认使用 Flash 插件来处理保存到本地计算机。

## 假设您正在远程保存

听起来你并没有保存到服务器，但如果是这样，这很容易，只需将 base64 信息发布到用服务器端脚本语言（即 PHP）编写的脚本并获取它来写入数据直接作为文件的二进制文件。显然，您必须确保安全地执行此操作，但是，您不希望将任何二进制数据写入服务器的文件系统。

## 两全其美

如果您有开发时间，那么在本地保存画布图像（不使用 Flash）的最佳方法是创建一个服务器端脚本，该脚本不是将数据保存到您的服务器，而是实际写入您直接发送回来的 Base64 信息作为实现的二进制图像文件。这样，您可以创建一个表单，将您的 Base64 数据发布到新选项卡，此请求由服务器端评估，并返回二进制图像......此时浏览器会询问用户他们希望将其保存在哪里图片。

您需要定义正确的标题来强制下载图像*（而不是在浏览器中显示）*。强制执行此操作的一个简单更改是将服务器端脚本的`Content-type`标头设置为`'image/octect-stream'`...还有其他标头选项可以设置，哪些是最好的研究*（即控制文件名的标头等）*。

**反射.php**

```
<?php

/// a simple example..

if ( array_key_exists('data', $_POST) && ($data = $_POST['data']) ) {

  header('Content-type: image/octet-stream');
  echo base64_decode( $data );
  exit;

} 
```

**和形式...**

```
<form action="reflect.php" method="post" target="_blank">
  <input name="data" type="hidden" value=" ... Base64 put here with JS ... ">
</form> 
```

*（整个表单应该是动态创建并使用 JavaScript 自动提交的）*

**改善用户体验**

有一些方法可以避免创建新选项卡，但您必须进行研究以确保这些其他方法不会导致跨浏览器问题......例如，您可以将表单数据作为 iframe 的一部分发布*（其中将隐藏该过程）*，或者直接在当前窗口上发布数据*（..并希望所有浏览器都收到正确的请求并打开下载而不是替换您的页面内容 - 大多数现代浏览器应该处理这个）*。

**提高安全性**

对于自动返回二进制数据的 PHP 脚本，您应该保持对该脚本的访问由`one time use key`/`authentication token`或类似的东西保护，并限制您愿意接受多少 Base64 数据。它似乎不会造成安全风险 - 因为您不会以任何方式修改您的服务器与用户发送的内容 - 但是这个世界上狡猾的人可能会拿走您的脚本并使用它来向其他用户发送下载请求.. . 如果下载*（并被证明是不需要的木马或病毒）*将使您的服务器隐含提供狡猾的文件。

## 总而言之

由于将图像保存到桌面之类的简单事物需要付出努力，因此我不会责怪您执行以下操作：

*   将图像嵌入页面*（从画布获取快照后）*并要求用户右键单击并*另存为...*

希望未来的事情会让这种情况变得更好......

# php - SQLite 不运行并且没有错误

> ID：12195350
> 
> 赞同：0
> 
> 时间：2012-08-30T10:59:19.167
> 
> 标签：php, sqlite

我想在我的新网站上运行 SQLite，但它无法运行/工作。 `PHPINFO()`返回有关 SQLite 的以下信息：

```
pdo_sqlite
PDO Driver for SQLite 3.x   enabled
PECL Module version     1.0.1 $Id: pdo_sqlite.c,v 1.10.2.6.2.2 2007/03/23 14:30:00 wez Exp $
SQLite Library  3.4.2 

SQLite
SQLite support  enabled
PECL Module version     2.0-dev $Id: sqlite.c,v 1.166.2.13.2.9 2007/05/19 17:58:22 iliaa Exp $
SQLite Library  2.8.17
SQLite Encoding     UTF-8 
```

这里是测试脚本：

```
<?php

error_reporting(E_ALL);

try {
    $db = sqlite_open('mysqlitedb');
    var_dump($db);
    var_dump(sqlite_last_error());
} catch (Exception $e) {
    var_dump($e);
} 
```

> ```
> // Output:
> // bool(false) NULL 
> ```

为什么它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:22:55.490

> 为什么它不起作用？

该[`sqlite_last_error`](http://php.net/sqlite_last_error)函数需要数据库资源句柄作为第一个参数，您不要使用它：

```
var_dump(sqlite_last_error()); 
```

此外，您的数据库资源句柄显然是错误的 - 所以根本不是数据库资源句柄。由于没有建立数据库连接，该函数无法给您错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:07:47.217

请用

```
sqlite_open('mysqlitedb', 0666, $sqliteerror) 
```

这样您就可以通过 $sqlliteerror 变量检索它不起作用的原因。

# solr - 如何在 apache solr 中自动跨分片传播文档？

> ID：12195352
> 
> 赞同：0
> 
> 时间：2012-08-30T10:59:24.267
> 
> 标签：solr, sharding

[我已经按照http://carsabi.com/car-news/2012/03/23/step-by-step-solr-sharding/](http://carsabi.com/car-news/2012/03/23/step-by-step-solr-sharding/)中的步骤设置了核心。现在我被困在如何将我的所有文档均匀地分布在创建的碎片中。我没有使用 tomcat 或 zookeeper。请帮忙。我无法弄清楚设置的确切步骤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T12:31:01.177

你发的那个链接不好。它将核心和碎片混合在一起，就好像它们是同一件事一样。

请参阅此处了解差异：
[http :](http://wiki.apache.org/solr/SolrTerminology)
[//wiki.apache.org/solr/SolrTerminology http://lucene.472066.n3.nabble.com/shard-versus-core-td2114829.html](http://lucene.472066.n3.nabble.com/shard-versus-core-td2114829.html)

ZK是你的朋友！

看看我最近的回复（推荐 ElasticSearch 或 SolrCloud）： [https ://stackoverflow.com/a/12180442/465710](https://stackoverflow.com/a/12180442/465710)

# django - 在要求登录之前重定向到预期页面

> ID：12195358
> 
> 赞同：0
> 
> 时间：2012-08-30T10:59:42.017
> 
> 标签：django, django-login

让我修改这个问题

我有一个自己的登录视图，如下所示，并且正在实现`@login_required`装饰器。

```
def do_login(request):
form = LoginForm()# create an instance of a login form
logged_in =request.user.is_authenticated() # get login status

if logged_in:
    message='You are logged in '
    return render_to_response('login.html',locals())# return  
if request.method == 'POST':
    usr=request.POST['username'] #get username
    passwrd=request.POST['password']# get password
    form=LoginForm(request.POST) # create instance of loginform
    user=authenticate(username=usr,password=passwrd)# authenticate user
    if user is not None:
        if user.is_active:
            login(request,user) #log user in
            return HttpResponseRedirect("/login_success/")
        else:
            pass
    else:
        return render_to_response('login.html',locals())
else:
    return render_to_response('login.html',locals()) 
```

这很有效，因为每当我尝试访问一个 url（例如更改密码）时，都会被带到登录页面以首先登录。在登录页面时，地址栏中显示的 url 是`http://myapp.com/login/?next=/change_password/`

现在，当我登录时被带到`http://myapp.com/login/login_success/`而不是`http://myapp.com/login/change_password/`. 登录后，我希望自动重定向到在`http://myapp.com/login/change_password/`被要求登录之前尝试访问的目标。请问我该如何解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:49:22.437

我发现了问题所在。我必须访问`next`参数中的 url，`{{request.GET.next}}`而不是`{{next}}`

所以我的代码改为：

在模板中，我向我的登录表单添加了一个隐藏输入并将其值设置为`{{request.GET.next}}`

```
<input type="hidden" name="next" value="{{ request.GET.next }}" /> 
```

所以在我的登录视图中，我现在可以访问隐藏字段的值，并在登录后使用该值进行重定向

```
def do_login(request):
form = LoginForm()# create an instance of a login form
logged_in =request.user.is_authenticated() # get login status

if logged_in:
    message='You are logged in '
    return render_to_response('reg/login.html',locals())# return  
if request.method == 'POST':
    usr=request.POST['username'] #get username
    passwrd=request.POST['password']# get password
    form=LoginForm(request.POST) # create instance of loginform
    user=authenticate(username=usr,password=passwrd)# authenticate user
    if user is not None:
        if user.is_active:
            login(request,user) #log user in
            return HttpResponseRedirect(request.POST['next'])
        else:
            pass
    else:
        return render_to_response('reg/login.html',locals())
else:
    return render_to_response('reg/login.html',locals()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:10:36.420

也许像这样

模板：

```
{% if user.is_authenticated %}
    <a href="{% url 'some_summary_url' %}">click me</a>
{% else %}
    <a href="{% url 'login' %}?next={% url 'some_summary_url' %}">click me</a>
{% endif %} 
```

看法：

```
return HttpResponseRedirect(request.GET.get('next', '/')) 
```

# javafx-2 - FXML 中是否有任何类似于 XAML 中的数据模板的标记技术？

> ID：12195359
> 
> 赞同：1
> 
> 时间：2012-08-30T10:59:44.120
> 
> 标签：javafx-2, fxml

例如，以声明方式为 ListView 中的项目指定 UI。

[XAML](http://msdn.microsoft.com/en-us/library/ms742521.aspx)方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T04:38:01.397

[查看FXML](http://docs.oracle.com/javafx/2/api/javafx/fxml/doc-files/introduction_to_fxml.html)文档简介中[实例声明](http://docs.oracle.com/javafx/2/api/javafx/fxml/doc-files/introduction_to_fxml.html#instance_declaration_elements)部分下标题为**fx:value**、**fx:factory**和**Builders的项目。**官方[FXML 教程](http://docs.oracle.com/javafx/2/fxml_get_started/fxml_tutorial_intermediate.htm#JFXMG169)中也有一个示例。

通常，[主文档页面](http://docs.oracle.com/javafx/)是一个很好的起点。

# c# - 更改数据源后如何更新 SuperGrid

> ID：12195363
> 
> 赞同：1
> 
> 时间：2012-08-30T10:59:51.700
> 
> 标签：c#, user-interface, datagrid, datasource, dotnetbar

在[DevComponents 中](http://www.devcomponents.com/dotnetbar/SuperDataGridControl.aspx)，如何在向数据源 () 添加新行后更新`SuperGridControl`GUI 。我确定已添加此元素（计数器正在增加），但没有可见更改。`List<MyCustomObject>`

我正在努力

```
superGrid.PrimaryGrid.InvalidateLayout();
superGrid.PrimaryGrid.InvalidateRender();
superGrid.Refresh();
superGrid.Invalidate();
superGrid.Update(); 
```

但它不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T13:15:09.160

使用`BindingList<>`代替`List<>`解决了这个问题

# javascript - jquery tabbed ui - 加载代码中的javascript不再工作

> ID：12195364
> 
> 赞同：0
> 
> 时间：2012-08-30T10:59:52.123
> 
> 标签：javascript, jquery, jquery-ui

我正在尝试将 jQuery 选项卡式小部件用作我的应用程序的菜单，并设法设置选项卡式界面，以便在单击选项卡时显示该部分的第一页。根据文档，如果您单击此页面上的链接并希望它加载到同一个选项卡中，那么您需要使用下面的代码。这部分有效，因为现在当我单击该页面上的图像超链接时，它会在选项卡式窗口中呈现新页面。

**但是，当我单击具有 javascript 的按钮时，该按钮不再起作用。这是所有 javascript 的情况。如何让 javascript 在新的选项卡式界面下再次运行？**

```
$('#example').tabs({
    load: function(event, ui) {
        $(ui.panel).delegate('a', 'click', function(event) {
            $(ui.panel).load(this.href);
            event.preventDefault();
        });
    }
}); 
```

编辑：因此，如果您在第 1 页文件中将以下行添加到 LeftyX 的代码中，则该按钮会导致 page4.html 打开，但不会在选项卡中执行此操作

```
<button onclick="location.href='Page4.html'">Test button </button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:58:49.207

它必须工作。
如果您向我们展示您的 HTML，我们可能会尽力提供帮助。
您可以查看我的[示例](http://leftyx.somee.com/jQueryUI_Tabs/index.html)并[下载](http://leftyx.somee.com/jQueryUI_Tabs/jQueryUI_Tabs.zip)代码。

尝试使用一些开发工具检查您的脚本中是否有任何错误（例如：Google Chrome 开发人员工具）

更新：

如果您使用的是按钮，则可以使用一些 HTML5 属性：

```
<button data-pagelink="Page4.html">Test button</button> 
```

并捕获点击事件：

```
$(ui.panel).delegate('button', 'click', function(event, o) {
    $(ui.panel).load(this.dataset.pagelink);
    event.preventDefault();
}); 
```

或使用超链接并将其转换为按钮：

```
<a id="thisIsAButton" href="Page4.html">go to page 4</a> 
```

有了这个：

```
$("#thisIsAButton").button(); 
```

# java - java中的CompareTo方法表现得很奇怪

> ID：12195365
> 
> 赞同：0
> 
> 时间：2012-08-30T10:59:59.140
> 
> 标签：java

我对`compareTo`java中的方法有疑问，这是代码：

```
for(int i = 0; i < btFolder.size(); i++) {

        String g = btFolder.get(i).toString();

        String[] subf = g.split(splitchar);

        String s = subf[subf.length-1].toUpperCase();

        if(s.compareTo(bt.toUpperCase()) == 0) {
            return g; 
        }
    }
    return null; //not found! 
```

这不会跳入`if-statement`，它应该是因为`s`和`bt`变量相等，我知道是因为我已经完成了作业并对其进行了调试。只是为了弄清楚`compareTo`我写了这段代码的方法返回什么：

```
 String g = btFolder.get(i).toString();

        String[] subf = g.split(splitchar);

        String s = subf[subf.length-1].toUpperCase();

        String btUp = bt.toUpperCase();

        int theSame = s.compareTo(btUp);

        if(theSame == 0) {
           putSharedPrefs("pathToBt", g); 
        }
        return null; 
```

变量`theSame`为0，表示`s`和`btUp`相等。而且，`the if-statement`永远不会被执行！

为什么会这样？有什么好的解决方案吗？

**编辑**

我也试过这个：

```
boolean equals = s.equalsIgnoreCase(bt);

        if(equals) {
            return g; 
        } 
```

是，但从不执行，我`boolean`还应该提到这是在 a 内部完成的，但这不应该引起任何问题吗？`true``if-statement``thread`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T11:15:19.420

在这个片段中

```
if(theSame == 0) {
       putSharedPrefs("pathToBt", g); 
} 
```

如果您可以调试并检查，`theSame`那么`0`请放置一个**sysout**并查看其是否打印。

因为你很确定 if 没有被执行；您正在调试的代码和正在执行的代码似乎不一样。当构建未部署并且您正在使用旧可执行文件调试新源时，这有时会在 Eclipse 中发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:07:16.337

为什么不这样做：

```
if (s.equalsIgnoreCase(bt) {
    return g; 
} 
```

我想你可以使用 compareTo 但是它也可以做其他事情......

# c# - 设置中包含的入门教程

> ID：12195368
> 
> 赞同：0
> 
> 时间：2012-08-30T11:00:03.777
> 
> 标签：c#, wpf, windows-installer, setup-project

我创建了一个 MSI 设置，我想在我的设置中添加一个“入门”教程，比如安装后的 DropBox 展示之旅，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:21:15.043

创建一个简单的表单应用程序作为项目的一部分，然后像评论所说的那样，创建一个自定义操作，在安装后启动可执行文件。然后，如果您想再次访问帮助应用程序，请编写一个进程启动方法以从应用程序启动可执行文件：

```
Process.Start("C:\\EXECUTABLE.exe"); 
```

# bash - Symfony 2 YAML 文件的脚本编辑会破坏格式并产生错误

> ID：12195370
> 
> 赞同：0
> 
> 时间：2012-08-30T11:00:12.043
> 
> 标签：bash, symfony, automation, yaml, symfony-2.1

我正在尝试编写新 Symfony 2.1 项目的整个安装过程，包括添加和配置我们所有的包及其依赖项。最终结果应该是一个设置所有内容的命令，因此开发人员既被迫进入我们的最佳实践设置，而不必花时间在这上面。

到目前为止，这是相当成功的，因为现在可以在大约一个小时内从 0 转到完全安装的 CMS（主要是由于 composer 安装）。你可以在这里看到结果：[https ://github.com/Kunstmaan/KunstmaanSandbox/blob/feature/update-to-2.1/README.md](https://github.com/Kunstmaan/KunstmaanSandbox/blob/feature/update-to-2.1/README.md)

这个项目的下一个阶段是修改 Symfony 配置 YAML 文件。但在这里我被困住了。

对于 parameters.yml，我使用 ruby​​ 脚本执行此操作，这里是相关的摘录，完整的脚本可以在这里找到：[https ://github.com/Kunstmaan/KunstmaanSandbox/blob/feature/update-to-2.1/app /Resources/docs/scripts/sandboxinstaller.rb](https://github.com/Kunstmaan/KunstmaanSandbox/blob/feature/update-to-2.1/app/Resources/docs/scripts/sandboxinstaller.rb)

```
parametersymlpath = ARGV[1]
projectname = ARGV[2]
parametersyml = YAML.load_file(parametersymlpath)
params = parametersyml["parameters"]
params["searchport"] = 9200
params["searchindexname"] = projectname
params["sentry.dsn"] = "https://XXXXXXXX:XXXXXXXX@app.getsentry.com/XXXX"
params["cdnpath"] = ""
params["requiredlocales"] = "nl|fr|de|en"
params["defaultlocale"] = "nl"
params["websitetitle"] = projectname.capitalize
File.open(parametersymlpath, 'w') {|f| f.write(YAML.dump(parametersyml)) } 
```

到目前为止一切顺利，但由于以下几行，相同类型的脚本在 config.yml 上失​​败：

```
imports:
    - { resource: @KunstmaanMediaBundle/Resources/config/config.yml }
    - { resource: @KunstmaanAdminBundle/Resources/config/config.yml }
    - { resource: @KunstmaanFormBundle/Resources/config/config.yml }
    - { resource: @KunstmaanSearchBundle/Resources/config/config.yml }
    - { resource: @KunstmaanAdminListBundle/Resources/config/config.yml } 
```

@ 是根据 YAML 规范的保留字符，Ruby 会抛出错误。

所以我切换到 php 和 Symfony yaml 组件，因为此时安装有一个完整的 symfony 安装，我想出了这个独立的命令：[https ://gist.github.com/3526251](https://gist.github.com/3526251)

但是当读取和转储 config.yml 文件时，例如上面的行会变成

```
imports:
    - 
      resource: @KunstmaanMediaBundle/Resources/config/config.yml
    - 
      resource: @KunstmaanAdminBundle/Resources/config/config.yml
    - 
      resource: @KunstmaanFormBundle/Resources/config/config.yml
    - 
      resource: @KunstmaanSearchBundle/Resources/config/config.yml
    - 
      resource: @KunstmaanAdminListBundle/Resources/config/config.yml 
```

这看起来像废话，我不完全确定这是否会奏效。

所以此时我正在考虑将完全修改的 config.yml 文件移动到安装脚本并覆盖原件。我宁愿不去那里，因为如果 symfony 标准项目发生变化，它将需要持续维护。

我想知道是否还有其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:03:52.260

这两种形式在语义上是等价的。它们分别称为内联块和缩进块。

# javascript - 如何识别屏幕尺寸

> ID：12195371
> 
> 赞同：0
> 
> 时间：2012-08-30T11:00:13.550
> 
> 标签：javascript, jquery, jquery-mobile, modal-dialog, mobiscroll

我正在开发一些移动网络应用程序（*这是我的第一次*），我遇到了这样的问题：尽管使用了特殊的移动框架，但某些尺寸的模态窗口在小屏幕上是不正确的。例如，我有一个 ipod 和 ipad：

![iPod](../Images/8dace9632d909d78617c7391e569eecc.png) ![iPad](../Images/d3a0d7c2a6cc262e8c2f23df7fdbffd8.png)

在 iPod 上，按钮的大小已经发生了一些变化。因此，可能有任何方法可以使用 js 来识别屏幕大小**，如类别（小、正常、大或可能只是获取数组的大小列表）**，然后基于它我会在源代码中做一些基本的更改.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T13:24:03.817

我强烈建议使用 css 媒体查询，而不是在 js 中识别宽度并以此为基础提供样式表。

CSS 媒体查询是标准化的：http: [//www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

另请参阅此处的示例和用法：http: [//css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:06:35.720

您可以使用 jquery 获取屏幕高度宽度，例如

```
alert("Width :"+$(window).width()+" Height :"+$(window).height()); 
```

你没有得到像小，大等尺寸规格。

您已经使用屏幕宽度和高度自己编写了响应式代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T11:08:58.143

使用 jquery 查找当前窗口的宽度

```
$(function() {
    showWidth($(this).width());
    $(window).resize(function() {
        showWidth($(this).width());
    });
});

function showWidth(wid) {
     var width = parseInt(wid);
     if (width < 1440) {
        //use wider stylesheet
    } else if ((width >= 901) && (width < 1440)) {
        //use wide stylesheet
    } else {
        //use small stylesheet
    }    
} 
```

# shopify - 我必须注册为 shopify 合作伙伴吗？

> ID：12195372
> 
> 赞同：0
> 
> 时间：2012-08-30T11:00:19.540
> 
> 标签：shopify

（我在这里重新发布这个问题是因为我在谷歌新闻组上试过但没有得到回应。）

我需要为我的客户建立一个商店，而客户已经有一个域和一个网站。我需要将电子商务功能集成到网站中。这将通过向 API 发送 AJAX 请求来完成。

我的问题是我是否需要为此获得合作伙伴帐户？我还不打算写一个人们会安装的应用程序，我只是为我的客户建立一个商店。它是怎么做的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:11:52.370

为此，您不需要 Shopify 合作伙伴帐户。相反，您可以在普通的 shopify 管理员中创建一个“私人应用程序”，这将为您提供使事情发生所需的 api 凭据。

shopify wiki 上的这篇文章很好地概述了入门过程（第一部分与您的情况最相关）：

[http://wiki.shopify.com/Using_the_shopify_api_gem_with_the_credentials_of_a_private_app](http://wiki.shopify.com/Using_the_shopify_api_gem_with_the_credentials_of_a_private_app)

# android - XML文件菜单帮助Android

> ID：12195374
> 
> 赞同：0
> 
> 时间：2012-08-30T11:00:25.203
> 
> 标签：android, xml

我有一个愚蠢的问题。我已经开始遇到这个问题了。

通常当您编写 XML 代码时，例如您编写：

安卓：

然后会显示一个菜单，其中包含您可以选择的所有选项。问题是现在该菜单不显示。我注意到的另一件事是所有代码都改变了这一点：

安卓：

现在是：

安卓1：

有没有人发现过这个？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:24:16.623

问题是我重复了这个：

xmlns:android="schemas.android.com/apk/res/android"; xmlns:android1="schemas.android.com/apk/res/android1";

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:06:47.350

不确定 android1 部分，但请检查一下。

在 Eclipse 的导航器中，右键单击您要打开的 xml

```
Open with -> Android Common XML Editor. 
```

此外，如果这不起作用。查看

```
Window -> Preferences -> XML -> XML files -> Editor -> Content Assist 
```

确保勾选与建议相关的复选框。您可以在此菜单上恢复默认设置

# ruby-on-rails - 奇怪的错误：创建用户后总是重定向不显示？

> ID：12195381
> 
> 赞同：0
> 
> 时间：2012-08-30T11:00:42.677
> 
> 标签：ruby-on-rails, actioncontroller

它很奇怪。我正在编写自定义用户注册，并希望在创建用户后重定向到其他页面，但它想调用显示操作。

这是我的控制器：

```
def create
  @user = User.new(params[:user])

respond_to do |format|
  if @user.save
    format.html { redirect_to users_verify_path }
  else
    format.html { render action: "new" }

  end
end 
```

end def verify ... 以 routes.rb 结尾：

```
 resources :users

       root :to => 'users#new'

        get "users/verify" 
```

当我将动作重命名为 SHOW 时，一切正常。如果我将其命名为 VERIFY - 它会告诉我：

```
 Unknown action

    The action 'show' could not be found for UsersController 
```

这是明显的错误，因为我删除了动作节目。但是为什么它会重定向到 show ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:07:07.630

尝试在资源之前写 get "users/verify" :users

或者

```
resources :users do
  member do
    get 'verify'
  end
end 
```

# sql - 在 SQL 中，连接后的 ON 条件与多个 JOINS 的末尾有什么区别

> ID：12195382
> 
> 赞同：10
> 
> 时间：2012-08-30T11:00:43.417
> 
> 标签：sql, sql-server

我一直很难在谷歌上搜索这个答案，但是....有人可以向我解释一下将 JOIN 的 ON 条件与 JOIN 本身放在一起与将 ON 放在所有其他 JOIN 的末尾之间的区别吗？ .

这是一个例子[http://sqlfiddle.com/#!3/e0a0f/3](http://sqlfiddle.com/#!3/e0a0f/3)

```
CREATE TABLE TableA (Email VARCHAR(100), SomeNameA VARCHAR(100))
CREATE TABLE Tableb (Email VARCHAR(100), SomeNameB VARCHAR(100))
CREATE TABLE Tablec (Email VARCHAR(100), SomeNameC VARCHAR(100))

INSERT INTO TableA SELECT 'joe@test.com', 'JoeA'
INSERT INTO TableA SELECT 'jan@test.com', 'JaneA'
INSERT INTO TableA SELECT 'dave@test.com', 'DaveA'
INSERT INTO TableB SELECT 'joe@test.com', 'JoeB'
INSERT INTO TableB SELECT 'dave@test.com', 'DaveB'
INSERT INTO TableC SELECT 'joe@test.com', 'JoeC'
INSERT INTO TableC SELECT 'dave@test.com', 'DaveC'

SELECT TOP 2 a.*,
             b.*,
             c.*
FROM   TableA a
       LEFT OUTER JOIN TableB b
                    ON a.email = b.email
       INNER JOIN TableC c
                    ON c.Email = b.email;

SELECT TOP 2 a.*,
             b.*,
             c.*
FROM   TableA a
       LEFT OUTER JOIN TableB b
       INNER JOIN TableC c
                    ON c.Email = b.email
                    ON a.email = b.email; 
```

我不明白为什么这两个 SELECT 语句会产生不同的结果。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-30T11:09:28.317

重要的是连接的顺序。将您的表达式视为每个连接都生成临时“虚拟”表。

所以当你写

```
FROM TableA a 
LEFT OUTER JOIN TableB b ON a.email = b.email
INNER JOIN TableC c ON c.Email = b.email ; 
```

那么顺序如下：

1.  `TableA`被留下来`TableB`产生临时关系`V1`
2.  `V1`是内联的`TableC`。

当你写的时候：

```
FROM TableA a 
LEFT OUTER JOIN TableB b 
INNER JOIN TableC c ON c.Email = b.email ON a.email = b.email; 
```

那么顺序如下：

1.  `TableB`内联`TableC`产生临时关系`V1`。
2.  `TableA`左连接到`V1`。

因此结果是不同的。一般建议在这种情况下使用括号来提高查询的可读性：

```
FROM TableA a 
LEFT OUTER JOIN
  (TableB b INNER JOIN TableC c ON c.Email = b.email)
ON a.email = b.email; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T11:03:46.673

在您的第二个示例中，该部分`ON a.email = b.email`属于`LEFT JOIN`.
如果这样写，则表示如下：

`INNER JOIN`表 C 与表 B 和`LEFT OUTER JOIN`结果与表 A。

结果将是 TableA 中的所有行与 TableB 中在 TableC 中也有条目的那些行相连接。

第一个例子的含义如下：

`LEFT OUTER JOIN`TableB 与 TableA 和`INNER JOIN`TableC 与结果。这相当于使用`INNER JOIN`for TableB。
说明：当您`LEFT OUTER JOIN`使用 TableA 和 TableB 时，您将从 TableA 中获取所有行，并且对于 TableB 中的匹配行，您也将获得该数据。在您的结果集中，您将拥有带有`b.email`=的行，`NULL`现在这将`INNER JOIN`使用 TableC 进行编辑。只要 TableC 中没有带有`email`=的条目，`NULL`您就会得到观察到的结果。

# java - Java 正则表达式提取字符串的常见元素并删除前导逗号

> ID：12195386
> 
> 赞同：1
> 
> 时间：2012-08-30T11:01:03.873
> 
> 标签：java, regex

我正在做一个关于设置交集的 codeeval 练习题。我认为网站期望输入和输出的方式故意使之复杂化。

问题的具体部分是取两组（实际上是字符串数组，确切的问题在[http://codeeval.com/open_challenges/30/](http://codeeval.com/open_challenges/30/)），找到它们的交集，按顺序打印它们，逗号分隔。我已经使用 TreeSet 解决了它，但它有点令人费解且过于复杂，现在我正在尝试使用正则表达式让它变得更简洁。

我找到了这个 -

```
String common = bothSets[0].replaceAll("[^" + bothSets[1] + "]", ""); 
```

在另一个关于堆栈溢出的问题中。它留下了前导逗号，我试图用它来修复

```
int subIndex = 0;
while(common.charAt(subIndex) == ',')
    subIndex++;

System.out.println(common.substring(subIndex, common.length())); 
```

除了在小字符串大小或空字符串大小等边缘情况下，它有效，然后它爆炸了。我认为只修复正则表达式并完全避免while循环会更干净，但我不知道如何在上述正则表达式中添加“删除前导逗号”。

最后，我的原始解决方案在这里 - [http://pastebin.com/10NuBevB](http://pastebin.com/10NuBevB) - 我是否正确地寻找像正则表达式方法这样的替代方法，我对那个 pastebin 代码不是特别满意，即使它有效并且这没有还没有。

任何方向表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T11:21:51.463

使用`TreeSet`s 和`retainAll`方法可能是计算实际交点的最清晰的方法。您可以使用两个在两个原始字符串上并行运行的正则表达式匹配器来做一些聪明的事情（利用您知道输入集已经排序的事实）但这可能是一种过于优化 - 保持简单明了，除非您知道（从分析）代码需要优化。

我唯一的评论是您生成输出的代码相当复杂，如何自己构建输出而不是后期编辑`toString`：

```
Iterator<String> iter = a.iterator();
if(iter.hasNext()) {
  // first entry with no comma
  System.out.print(iter.next());
}
while(iter.hasNext()) {
  // subsequent entries with a preceding comma
  System.out.print(",");
  System.out.print(iter.next());
}
System.out.println(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T11:16:07.440

据我了解你的问题 - 你有这样的字符串：

```
[1, 2, 3,4] 
```

你想让它看起来像这样：

```
1,2,3,4 
```

试试这个正则表达式 - 它匹配所有*[* , *]*和*空格*：

```
String common = bothSets[0].replaceAll("(\\[|\\]| )", ""); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T11:39:35.027

TreeSet 版本的变体：

```
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.util.Set;
import java.util.TreeSet;

public class MyTest {

    public static List<String> getDuplicates(List<String> dups) {
        final List<String> result = new ArrayList<String>();
        Set<String> set = new TreeSet<String>() {
            public boolean add(String s) {
                if (contains(s)) {
                    result.add(s);
                }
                return super.add(s);
            }
        };
        for (String t : dups) {
            set.add(t);
        }
        return result;
    }

    public static void main(String[] args) {

        String input = "7,8,9;8,9,10,11,12";
        String numbers = input.replace(';', ',');
        List<String> elements = Arrays.asList(numbers.split(","));

        System.out.println(getDuplicates(elements)); //[8, 9]

    }
} 
```

我假设列表不包含重复项。

# javascript - javascript/jQuery：在标题中添加换行符——适用于 IE9，但不适用于 IE8

> ID：12195391
> 
> 赞同：2
> 
> 时间：2012-08-30T11:01:09.163
> 
> 标签：javascript, jquery, html, css

我正在尝试以下方法在`title`属性中添加换行符。

```
<p id="test" title="1|2">test</p>

 var lineBreak = $("<div>&#10</div>").html();

 $("#test").attr("title", $("#test").attr("title").replace("|", lineBreak)); 
```

**IE9**中的工具提示结果是

```
1
2 
```

在**IE8**中，结果是

```
12 
```

是否有机会为 IE8 修复此问题？我真的需要这种方式，没有自定义工具提示等。

试试看@jsfiddle：http: [//jsfiddle.net/8ZCdb/](http://jsfiddle.net/8ZCdb/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T11:07:15.040

试试这个：

```
$("#test").attr("title", $("#test").attr("title").replace("|", "\n")); 
```

`\n`是纯文本中的换行符。

# javascript - 加载 XML 并获取标签。从 php 更改为 javascript

> ID：12195394
> 
> 赞同：0
> 
> 时间：2012-08-30T11:01:17.167
> 
> 标签：javascript, php, xml, tags

我有一个服务器端脚本，但现在我希望它在客户端运行，所以我想从 php 转换为 javascript。我真的不擅长js所以请帮忙。

这里的php代码：

```
 function getAlexaRank($theUrl)
    {
        $alexa_url = "http://data.alexa.com/data?cli=10&dat=snbamz&url=" . $theUrl;
        $doc = new DOMDocument();
        $doc->load($alexa_url);

        $popularities = $doc->getElementsByTagName("POPULARITY");
        foreach($popularities as $popularity)
        {
            return $popularity->getAttribute('TEXT');
        }
        return "-1";
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:37:27.930

参考以下链接使用js实现

[http://www.hiteshagrawal.com/javascript/javascript-parsing-xml-in-javascript](http://www.hiteshagrawal.com/javascript/javascript-parsing-xml-in-javascript)

# asp.net - Server.Transfer 丢失发布数据

> ID：12195396
> 
> 赞同：0
> 
> 时间：2012-08-30T11:01:19.080
> 
> 标签：asp.net, webforms, iis-6, server.transfer, postdata

我遇到了一个 Web 应用程序在 Server.Transfer 期间丢失发布数据的问题，但仅限于我们的生产环境。

表单由用户发布，然后发生 Server.Transfer，之后使用 postdata 生成响应。在我们的开发和暂存环境中一切正常，但在实时环境中，发布数据正在丢失。

数据仅在发生 Server.Transfer 时丢失 - 其他表单的发布数据被接受。

应用程序是 ASP.NET 4.0，Web 服务器是 IIS6。据我所知，配置是相同的，并且服务器已完全修补了 Windows 和 .NET Framework 更新。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T07:37:26.723

从来没有找到这个问题的根源，但我现在已经解决了这个问题。

# c# - .NET Framework 4.0 中的水晶报表

> ID：12195399
> 
> 赞同：6
> 
> 时间：2012-08-30T11:01:32.797
> 
> 标签：c#, crystal-reports, crystal-reports-2010

我们有一个使用**Visual Studio 2010用****.NET 3.5**编写的 WPF 应用程序。该解决方案由 8 个项目组成 - 全部在**.NET 3.5**中编译。该应用程序使用 Crystal Report。目标操作系统是 Windows 7。

 ****最近，由于某些 3rd 方 DLL 依赖项，**启动项目在****.NET 4.0**中编译- 这些 DLL 需要 .NET 4.0。在此更改并重建解决方案后，Crystal Report 抛出异常。

问题出现在`ReportClass`.

异常消息：

> 'CrystalDecisions.CrystalReports.Engine.ReportDocument' 的类型初始化程序引发了异常。

InnerException 的消息：

> “由于以下错误，检索具有 CLSID {4DB2E2BB-78E6-4AEA-BEFB-FDAAB610FD1B} 的组件的 COM 类工厂失败：80040154 类未注册（来自 HRESULT 的异常：0x80040154 (REGDB_E_CLASSNOTREG)）。”

我以前没有在 Crystal Report 工作过。这个问题的原因可能是什么？

请注意，编译为 .NET 3.5 时不会出现此问题。水晶报表用于启动项目。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-18T10:15:21.363

很可能是 X86/x64 的问题。

尝试将您的应用程序编译为面向 86 平台。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-01-10T21:28:02.537

这个问题让我呆了 2 天，而且它到处都有非常相似的答案，但它最终对我来说是双重的。我在这里添加，希望它至少可以节省一天的时间。

很多帖子都提到了这一点；转到 IIS -> 应用程序池 -> 单击应用程序池上的右键 -> 转到高级设置 -> 启用 32 位应用程序 = **True**

请注意，就我而言，我是在 64 位机器上构建和部署的，所以我将**True**设置为**False**并且它做到了。同样，很简单，但我认为与此无关，所以在我进行调整后，我的大脑一片空白。

另一个兴趣点是确保您确实在部署服务器上加载了 CRRuntime_xx.xxMSI。

感谢大家在一天结束时提供的惊人信息，它让我度过了难关。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-29T09:42:27.230

转到 IIS -> 应用程序池 -> 单击应用程序池上的右键 -> 转到高级设置 -> 启用 32 位应用程序 = True

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T11:57:58.060

当您安装 CR 时，它应该在 C:\inetpub\wwwroot\aspnet_client\system_web\4_0_30319\crystalreportviewers13 上安装几个文件（JS、html 等）。检查您的电脑上是否存在此文件夹。如果没有，我认为您需要将文件夹从程序文件复制到此位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-06T15:00:01.507

这些答案让我们找到了正确的地方，但直到我们进行了一些故障排除。它最终在我们运行 Visual Studio 2019 和 IIS Express的**本地开发机器上成为 32/64 位问题。**

在我们的案例中，问题是“为网站和项目使用 64 位版本的 IIS Express”的设置已在 Visual Studio 设置中启用。我们在开发机器上使用 32 位版本的水晶，因此我们必须**取消选中**此框才能使其正常工作。

[![在此处输入图像描述](../Images/e426c9a9cdea23932992c8b63544d059.png)](https://i.stack.imgur.com/p7Ega.jpg)****

# javascript - 转换 unix 时间戳转换

> ID：12195400
> 
> 赞同：2
> 
> 时间：2012-08-30T11:01:36.223
> 
> 标签：javascript, jquery

我有一个数组，它的时间存储在 Unix 时间戳和当天比赛的数量 ，， `[
{ "time": 1332547200000, "count": 2 }, { "time": 1332633600000, "count": 1 }, { "time": 1332720000000, "count": 4 }, { "time": 1332806400000, "count": 4 }, ... ]`

我正在尝试将其转换为日期格式为“20070101”的元素字符串，例如值，我应该以表单`"20070101, 46 \n"` `+20072102, 26 \n" +`等形式获取输出......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:36:13.280

:)

```
function pad2(number) {
   return (number < 10 ? '0' : '') + number
}

var ar = [{ "time": 1332547200000, "count": 2 }, { "time": 1332633600000, "count": 1 }, { "time": 1332720000000, "count": 4 }];

var output = ""
for (i=0; i<ar.length; i++) {
    var d = new Date(parseInt(ar[i].time));
    var year = ""+d.getFullYear();
    var month = pad2(d.getMonth());
    var date = pad2(d.getDate());
    var output = output+year+date+month+", "+ar[i].count+"\n";
}

document.write(output); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:12:49.037

```
var d = new Date(milliseconds);
var formatted = d.getFullYear()+d.getMonth()+d.getDate(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T11:46:57.670

那是一个 JSON 字符串，您可以`$.parseJSON`使用`jQuery`：

```
myJSON = $.parseJSON('[{ "time": 1332547200000, "count": 2 }, { "time": 1332633600000, "count": 1 }]');
var newJSON = new Array();
var i = 0;
$.each(myJSON, function(count, line){
     var newTime = new Date(parseInt(line.time));
     newTime = newTime.getFullYear()+''+('0' + (newTime.getMonth()+1)).slice(-2)+''+('0' + newTime.getDate()).slice(-2);
     $('#json').append(newTime+', '+line.count+'\n');
}); 
```

[演示 JSFIDDLE](http://jsfiddle.net/3uRed/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T11:17:22.570

这是你的小提琴

[小提琴](http://jsfiddle.net/FBRrj/)

和你的代码：

```
var a=[
{ "time": 1332547200000, "count": 2 }, { "time": 1332633600000, "count": 1 }, { "time": 1332720000000, "count": 4 }, { "time": 1332806400000, "count": 4 }, { "time": 1332892800000, "count": 5 }, { "time": 1332979200000, "count": 1 }, { "time": 1333065600000, "count": 1 }, { "time": 1333152000000, "count": 1 }, { "time": 1333324800000, "count": 2 }, { "time": 1333411200000, "count": 2 }, { "time": 1333497600000, "count": 3 }, { "time": 1333584000000, "count": 4 }, { "time": 1333670400000, "count": 3 }, { "time": 1333756800000, "count": 2 }, { "time": 1333843200000, "count": 2 }, { "time": 1333929600000, "count": 1 }, { "time": 1334102400000, "count": 9 }, { "time": 1334188800000, "count": 8 }, { "time": 1334275200000, "count": 6 }, { "time": 1334361600000, "count": 3 }, { "time": 1334448000000, "count": 2 }, { "time": 1334534400000, "count": 3 }, { "time": 1334620800000, "count": 3 }, { "time": 1334707200000, "count": 5 }, { "time": 1334793600000, "count": 4 }, { "time": 1334880000000, "count": 1 }, { "time": 1334966400000, "count": 5 }, { "time": 1335139200000, "count": 6 }, { "time": 1335225600000, "count": 3 }, { "time": 1335312000000, "count": 8 }, { "time": 1335398400000, "count": 8 }, { "time": 1335484800000, "count": 9 }, { "time": 1335571200000, "count": 4 }, { "time": 1338508800000, "count": 69 }, { "time": 1338595200000, "count": 30 }, { "time": 1338681600000, "count": 17 }, { "time": 1338768000000, "count": 70 }, { "time": 1338854400000, "count": 109 }, { "time": 1338940800000, "count": 80 }, { "time": 1339027200000, "count": 141 }, { "time": 1339113600000, "count": 94 }, { "time": 1339200000000, "count": 34 }, { "time": 1339286400000, "count": 26 }, { "time": 1339372800000, "count": 91 }, { "time": 1339459200000, "count": 166 }, { "time": 1339545600000, "count": 89 }, { "time": 1339632000000, "count": 121 }, { "time": 1339718400000, "count": 74 }, { "time": 1339804800000, "count": 48 }, { "time": 1339891200000, "count": 13 }, { "time": 1339977600000, "count": 58 }, { "time": 1340064000000, "count": 123 }, { "time": 1340150400000, "count": 110 }]

    function getformateddate(date)

    {
    var date= new Date(date);
    return date.getFullYear().toString()+date.getDate()+date.getMonth();
    }

var finalString='';
for (var i=0;i<a.length;i++)
    {
        finalString+=getformateddate(a[i].time)+' '+a[i].count+" \\"+"n"

    }

            document.write(finalString) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T11:28:50.970

不幸的是，原始javascript中似乎没有任何日期格式/零填充功能。我建议使用 jQuery 或其他库。这是原始解决方案。

```
var data = [
{ "time": 1332547200000, "count": 2 },
{ "time": 1332633600000, "count": 1 },
{ "time": 1332720000000, "count": 4 }
];

function pad(str, n) {
    if (str.length < n) {
        return pad("0" + str, n);
    } else {
        return str
    }            
}

for (var i = 0; i < data.length; i++) {
    var datum = data[i];
    var date = new Date(datum.time);

    var str = date.getFullYear()
              + pad((date.getMonth() + 1).toString(), 2)
              + pad(date.getDate().toString(), 2) 
              + ", " + datum.count + " \\n";  

    window.alert(str);
}​ 
```

# iphone - Xcode 此类与键视图的键值编码不兼容

> ID：12195407
> 
> 赞同：3
> 
> 时间：2012-08-30T11:02:03.410
> 
> 标签：iphone, xcode, cordova

我一直在广泛搜索这个问题，但没有找到答案。

问题是“此类不符合键视图的键值编码”

我已经尽可能地剥离了代码，但这个错误仍然不断弹出，让我抓狂！

我有以下 someSelector.h 文件

```
#import <UIKit/UIKit.h>
#import <QuartzCore/QuartzCore.h>

@interface someSelector : UIViewController {
    UIView *view;
}

@property (nonatomic, retain) IBOutlet UIView *view;

@end 
```

这是 someSelector.m 文件的相关位

```
#import "someSelector.h"

@synthesize view;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];

    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
} 
```

这是我得到的错误：

```
2012-08-30 12:42:51.714 SomeApp[2280:f803] *** Terminating app due to uncaught exception    'NSUnknownKeyException', reason: '[<UIApplication 0x6821350> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key view.' 
```

我想我已经尝试了所有可以尝试的东西。奥特莱斯似乎是正确的，我已经尝试将它们重新连接一千次。我还将文件所有者的类名命名为 someSelector，所以这似乎也是为了......

请帮帮我，我现在不知道...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-26T12:36:26.520

我有同样的问题，对我来说，解决方案是去那里`Target -> General -> Main Interface`然后删除那里的条目。将其完全留空。为我工作（虽然我在这里使用PhoneGap）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T11:24:11.353

请注意，它试图找到的类`view`是`UIApplication`. 最可能的原因是您有一个 .xib 文件，文件的所有者设置为`UIApplication`而不是`UIViewController`子类......或者您的文件所有者是合法的应用程序类，但您已将视图出口连接到它。

打开项目中的任何 .xib 文件，选择 File's Owner，并在身份检查器中验证其类名。

有时，通过将 .xib 文件作为源代码打开并进行文本搜索以查找“视图”，会更容易找到这些内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T11:09:04.290

someSelector 类 xib 文件存在一些问题，检查它是否显示任何警告并且 Abizem 是正确的，您不需要将视图声明为属性。

# sql-server-express - SQL Server 2008 Express 的数据库加密

> ID：12195409
> 
> 赞同：0
> 
> 时间：2012-08-30T11:02:04.883
> 
> 标签：sql-server-express

使用 TDE（透明数据加密）的数据库加密仅适用于企业版和开发者版。

有没有办法在不改变数据库底层架构的情况下为 SQL Server 2008 Express 数据库实现加密机制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:05:46.490

您可以使用良好的旧加密文件系统 (EFS) 并将数据库文件存储在加密文件夹中

# qt - qt如何链接win32库

> ID：12195413
> 
> 赞同：0
> 
> 时间：2012-08-30T11:02:21.550
> 
> 标签：qt, winapi

我正在使用 QT Creator 2.4.1。我想做一个网络实用程序。我正在使用 Windows 函数：GetAdaptersInfo()。

这需要链接 iphlpapi.lib。

要链接库，我尝试在**Projects->Build-Setup->Additional Arguments**中添加以下参数：

LIBS += -liphlpapi

或者

win32:LIBS += -liphlpapi

或者

LIBS += iphlpapi.lib

没有任何成功。我也试图给出完整的路径。谁能告诉我正确的链接方式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T14:51:08.377

这有效：

1.  添加`win32:LIBS += -lIphlpapi`到您的`.pro`文件中；
2.  清洁（*可选？*）；
3.  运行`qmake`；
4.  建造。

# java - 写入字节数组时出现 IOException

> ID：12195417
> 
> 赞同：1
> 
> 时间：2012-08-30T11:02:33.400
> 
> 标签：java, file-io, nio, ioexception

我`IOException: Map Failed`在尝试编写大字节数组时得到了。我使用下面的方法将字节数组写入文件

```
private static void write(byte[] data) throws Exception {
        File file = new File("C:/temp/file.json");
        int length = data.length;
        RandomAccessFile raf = new RandomAccessFile(file, "rw");
        FileChannel fc = raf.getChannel();
        MappedByteBuffer buffer = fc.map(FileChannel.MapMode.READ_WRITE, 0, length);
        for (int i = 0; i < length; i++) {
            buffer.put(data[i]);
        }
} 
```

字节数组约为 270mb。谁能解释我做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T11:07:52.967

我不知道为什么地图失败了，但我不会像你那样做。

```
FileOutputStream out = new FileOutputStream(filename);
out.write(data);
out.close(); 
```

要逐步做到这一点，您可以使用

```
FileOutputStream out = new FileOutputStream(filename);
for(int i = 0; i < data.length; i += 8192)
    out.write(data, i, Math.min(data.length-i, 8192));
out.close(); 
```

如果您有 32 位 JVM 并且重复调用此方法，则映射可能会失败。例如，您用完了虚拟内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T11:10:19.570

我认为该解决方案与具有该`mmap()`功能的 C 中的解决方案相同。如果您刚刚创建了文件，您应该在其中寻找`data.length-1`偏移并在该位置写入一个字节，以便在映射之前拥有该大小的文件。当我不在 C 中执行此操作时，我在访问映射内存时会出现内存损坏。

类似的东西应该可以工作：

```
private static void write(byte[] data) throws Exception {
        File file = new File("C:/temp/file.json");
        int length = data.length;
        RandomAccessFile raf = new RandomAccessFile(file, "rw");

        FileChannel fc = raf.getChannel();
        fc.position(size-1);
        ByteBuffer bf = ByteBuffer.wrap(new byte[]{0x00});

        bf.flip();  // Not sure if flip is needed !!!!!!!

        fc.write(bf);

        MappedByteBuffer buffer = fc.map(FileChannel.MapMode.READ_WRITE, 0, length);
        for (int i = 0; i < length; i++) {
            buffer.put(data[i]);
        }
} 
```

简单来说：你不能映射超过文件大小，这就是为什么你需要在映射之前增加文件大小。

这可以解释你的问题，但我认为打开一个`FileOutputStream`并直接在其中写入你的数据更合适。如果需要，您仍然可以在之后映射它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T11:09:32.410

您的 JVM 最大堆大小是否至少为 270*2 MB？您可以在用于启动 Java 的命令行上进行设置：

java ... -Xmx 1024m ...

# javascript - 中心表，即使它比父容器宽

> ID：12195418
> 
> 赞同：2
> 
> 时间：2012-08-30T11:02:34.893
> 
> 标签：javascript, jquery, css, html

我有一个场景，其中 HTML 页面的宽度受到限制（使用`max-width`），因此页面上的文本不会变得太宽（并且难以阅读）。

我还有一些数据显示在表格中（居中），只要表格适合父容器，它就可以正常工作。但有时表格会变得比父元素更宽，此时它不再居中，而是向左对齐。

有没有办法使表格居中，*即使它溢出其父级，它也能保持居中？*

鉴于我的 HTML 看起来像这样，需要什么 CSS 来完成此操作？

```
<div class=content>
  <p>Lorem ipsum...</p>
  <table>
      ...
  </table>
  <p>Lorem ipsum...</p>
</div> 
```

顺便提一句。这可能很明显，但我在这里只谈论水平居中。

这是我的场景的一个小提琴：http: [//jsfiddle.net/zrajm/tnAS3/](http://jsfiddle.net/zrajm/tnAS3/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T13:05:03.180

CSS`margin: 0 auto;`仅在表格适合其父元素时才有效，如果表格变得比它左对齐的大。

为了使比其父表更宽的表居中，需要设置负左边距。如果知道表格的确切尺寸，这可以直接在 CSS 中完成（使用类似的东西`margin-left: -130px`）。但是，如果表格的宽度可以变化，实现这一点的唯一方法是使用 Javascript 来调整左边距。

（下面的代码假设 jQuery 和问题中描述的 HTML 结构。）

```
var contentWidth = $('.content').width();
$('table').each(function (i, table) {
    var tableWidth, margin;
    table = $(table);
    tableWidth = table.width();
    if (tableWidth > contentWidth) {
        margin = (tableWidth - contentWidth) / 2;
        table.css('margin-left', '-' + margin + 'px');
    }
}); 
```

上面的脚本将寻找比 宽的表格`.content`，并且只修改它们的左边距。

（还有一个小提琴：http: [//jsfiddle.net/zrajm/tnAS3/2/](http://jsfiddle.net/zrajm/tnAS3/2/)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T11:41:47.563

你可以这样做：

```
.calss  
{    
    margin:auto;    
    width:??px ;        
    height:??px ;/*(or auto)*/        
} 
```

使用此代码，您的任何东西都是中心边距。
并且当您为表格声明固定宽度时，不能比它更宽。
你也可以给你的桌子一个宽度和高度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T11:06:55.633

我会尝试添加`margin: 0 auto;`到专门围绕表格的 div 的样式中。这应该将其置于其父级的中心。

```
<div class=content>
  <p>Lorem ipsum...</p>
  <div style="margin: 0 auto;">
    <table>
      ...
    </table>
  </div>
  <p>Lorem ipsum...</p>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T11:08:49.033

### 对于这个 HTML，*无需更改 HTML 部分*：

```
<div class=content>
  <p>Lorem ipsum...</p>
  <table>
      ...
  </table>
  <p>Lorem ipsum...</p>
</div> 
```

### CSS 将是：

```
table {margin: 0 auto;} /* You can set your width */ 
```

### 小提琴：http: [//jsfiddle.net/svHvR/1/](http://jsfiddle.net/svHvR/1/)

# .net - 使用 ASP.NET MVC 在我的操作方法中使用哪种重定向方法进行 SEO？RedirectToAction 还是 RedirectToActionPermanent？

> ID：12195421
> 
> 赞同：4
> 
> 时间：2012-08-30T11:02:42.947
> 
> 标签：.net, asp.net-mvc-3, redirecttoaction

我正在创建一个支持多种语言的网站。

我还想本地化 URL，以便它可以像这样工作：

*   www.domain.com/en/contact
*   www.domain.com/de/kontakt

为了实现这一点，我决定为每种语言使用不同的控制器。

我还添加了将访问者首选语言存储在 cookie 中的代码。

如果同一用户然后访问**www.domain.com**我希望代码检查该 cookie，然后将访问者重定向到具有适当语言的索引页面。

为了实现这一点，我在 global.asax 中有这个代码作为路线

```
 routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "en", action = "LanguageRedirect", id = UrlParameter.Optional } 
```

然后在**en**控制器中有**LanguageRedirect**操作方法：

```
 public ActionResult LanguageRedirect()
    {
        string cultureName="";
        HttpCookie cultureCookie = Request.Cookies["_culture"];

        if (cultureCookie != null)
        {
            cultureName = cultureCookie.Value;
            cultureName = cultureName.Substring(0, 2);
        }
        // Some custom code that checks valid languages
        if (!CultureHelper.isValidCulture(cultureName))
            cultureName = "en";

        return RedirectToAction("Index", cultureName);
    } 
```

我不确定关于 SEO 的适当重定向方法应该是什么？我应该只使用`RedirectToAction`还是应该使用`RedirectToActionPermanent`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T12:48:01.233

您应该使用`RedirectToAction`(302) 而不是`RedirectToActionPermanent`(301)。

如果已为资源分配了新的 URI 并且原始 URI 不再有效，则基本上应该 301 重定向。

参考：

[http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)

[https://webmasters.stackexchange.com/questions/26876/301-redirects-for-regional-variants-of-a-homepage](https://webmasters.stackexchange.com/questions/26876/301-redirects-for-regional-variants-of-a-homepage)

# android - 复用代码 Android NDK

> ID：12195426
> 
> 赞同：3
> 
> 时间：2012-08-30T11:02:52.637
> 
> 标签：android, android-ndk, android-library

我发现很多教程展示了如何开始使用 NDK 开发 Android 应用程序。

但我有一个相当“简单/愚蠢”的问题：

请考虑以下两个教程：

1.  [http://mobile.tutsplus.com/tutorials/android/ndk-tutorial/](http://mobile.tutsplus.com/tutorials/android/ndk-tutorial/)
2.  [http://www.indiedb.com/tutorials/creating-compiling-and-deploying-native-projects-from-the-android-ndk](http://www.indiedb.com/tutorials/creating-compiling-and-deploying-native-projects-from-the-android-ndk)
3.  [http://mindtherobot.com/blog/452/android-beginners-ndk-setup-step-by-step/](http://mindtherobot.com/blog/452/android-beginners-ndk-setup-step-by-step/)
4.  [http://marakana.com/forums/android/examples/49.html](http://marakana.com/forums/android/examples/49.html)

现在，在第二个教程中，他们正在构建`hello-jni`示例。

我的问题是：

使用后`ndk-build`

并生产：

![在此处输入图像描述](../Images/53712522ed563709642fac6b84d74a8b.png)

是否可以使用结果`libhello-jni.so`并将其分发给其他人而不是实际`C`代码？

例如修改`Android.mk`并替换`com_myproject_MyActivity.c`为`something.so`以包含共享库？：

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE := mylib
LOCAL_SRC_FILES := com_myproject_MyActivity.c
include $(BUILD_SHARED_LIBRARY) 
```

欢迎任何建议或教程。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T19:20:47.997

您可以使用预构建的 NDK 库，方法是将其复制到`libs/armeabi`（或任何适用的架构），然后在运行时加载。从 Android 构建系统的角度来看，它只是包含在 APK 中的另一个文件。

然而，问题在于 JNI 函数名称按照惯例包括它们所属的包和类的名称。所以从 SO 消费者项目的角度来看，它的使用看起来很不自然，因为没有一个 JNI 函数适合它的类。您可能必须发布一个伴随 JAR，其中声明了相应的 Java 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T09:29:30.813

Via [VitamioBundle](https://github.com/yixia/VitamioBundle),

You no need to do re-using code:

> is it possible to use the resulted libhello-jni.so and distribute this to others instead of the actual C code? For example modifying the Android.mk and replacing com_myproject_MyActivity.c to something.so in order to include the shared library?

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE := mylib
LOCAL_SRC_FILES := com_myproject_MyActivity.c
include $(BUILD_SHARED_LIBRARY) 
```

VitamioBundle can be considered as shared library,

Therefore, you can use it as your Android Library.

Let's fun.

# python - 连接字符串不适用于 Python 2.7 和 PostgreSQL 9.1

> ID：12195428
> 
> 赞同：0
> 
> 时间：2012-08-30T11:03:04.327
> 
> 标签：python

我正在使用 PyQT4 + PostgreSQL 9.1 制作用户管理系统。在编写以下代码以建立与数据库的连接时，出现语法错误：-

```
from PyQt4 import QtSql, QtGui , QtCore
import _sha256
import psycopg2

def createConnection(): 

    QSqlDatabase db = QSqlDatabase.addDatabase("QPSQL"); 
    db.setDatabaseName("mysite");
    db.setUserName("postgres");
    db.setPassword("password");
    db.setHostName("localhost");
    bool ok = db.open();
    if not db.open():
        QtGui.QMessageBox.critical(None, QtGui.qApp.tr("Cannot open database"),
                QtGui.qApp.tr("Unable to establish a database connection.\n"
                              "This example needs PostgreSQL support."),
                QtGui.QMessageBox.Cancel)
        return False

    query = QtSql.QSqlQuery()
    query.exec_("create table usermanagement(ID int primary key,"
                "userid int,firstname varchar(20), lastname varchar(20),usertype varchar(15),password varchar(20),)")
    query.exec_("insert into usermanagement values(1, 'Danny','Boyle','normaluser','normaluser')")

    return True 
```

错误信息如下：-

QSqlDatabase db = QSqlDatabase.addDatabase("QPSQL"); ^ SyntaxError: 无效的语法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:11:28.477

你不能在 Python 中声明变量类型；类名后跟空格后跟变量名不是 Python 语法。

做吧`db = QSqlDatabase.addDatabase("QPSQL")`。

（你有同样的问题`bool ok = ...`）

您的代码也没有定义`QSqlDatabase`从任何地方开始；大概你的意思是从某个地方导入它。

还要从代码中删除所有分号；它们不是 Python 中的语句终止符所必需的，并且被认为是不好的样式。

# javascript - 如何从 ASP.NET 检索 JSONdata 并将其发送到 jQuery？（实现全日历）

> ID：12195445
> 
> 赞同：2
> 
> 时间：2012-08-30T11:04:11.293
> 
> 标签：javascript, jquery, asp.net, json, fullcalendar

我正在尝试使用 ASP.NET（不是 MVC）将 JSON 数据转换为 jQuery 变量：

```
$(document).ready(function () {
    $('#calendar').fullCalendar({
        events: GetEvents(start, end) //This line is invalid
    }
} 
```

在 MVC 中，它可能只是`events: "/Calendar/GetEvents/"`，它会调用 CalendarController 的 GetEvents() 方法。

但由于我没有使用 MVC，我开始按照[本指南](http://decoding.wordpress.com/2008/11/14/aspnet-how-to-call-a-server-side-method-from-client-side-javascript/)尝试从客户端调用服务器端方法。

在第二步中，它告诉我必须创建一个静态方法才能执行此操作：

```
[System.Web.Services.WebMethod]
public static string Message()
{
    return "Hello from the server-side World!";
} 
```

但是我需要能够访问`Session[]`方法内部的非静态变量，所以我看不出这种方法是如何工作的。

**有没有更好的方法来从不涉及直接服务器端调用的 aspx.cs 方法中提取 JSON 数据？或者有没有办法让我使用我不知道的会话？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:19:29.060

不要直接使用 HttpContext.Current.Session 调用 Session，或者将其设为页面中的静态属性：

```
private static HttpSessionState MySession
{
  get
  {
    return HttpContext.Current.Session;
  }

  set
  {
    return HttpContext.Current.Session = value;
  }
} 
```

# iphone - 唤醒应用程序的 LocalNotifiction

> ID：12195448
> 
> 赞同：1
> 
> 时间：2012-08-30T11:04:27.673
> 
> 标签：iphone, uilocalnotification

在我的应用程序中，如果我的应用程序从后台终止，我想在特定时间设置本地通知，否则如果我的应用程序处于运行状态，那么我不想显示本地通知

我已经为本地通知编写了代码

```
NSCalendar *calendar1 = [NSCalendar autoupdatingCurrentCalendar];

        // Get the current date
        NSDate *pickerDate1 =self.dateEvening;//[self.dateEvening dateByAddingTimeInterval:60*1];// [self.pickerView date];

        // Break the date up into components
        NSDateComponents *dateComponents1 = [calendar1 components:( NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit ) 
                                                       fromDate:pickerDate1];
        NSDateComponents *timeComponents1 = [calendar1 components:( NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit ) 
                                                       fromDate:pickerDate1];

        NSDateComponents *dateComps1 = [[NSDateComponents alloc] init];
        [dateComps1 setDay:[dateComponents1 day]];
        [dateComps1 setMonth:[dateComponents1 month]];
        [dateComps1 setYear:[dateComponents1 year]];
        [dateComps1 setHour:[timeComponents1 hour]];

        [dateComps1 setMinute:[timeComponents1 minute]];
        [dateComps1 setSecond:[timeComponents1 second]];
        NSDate *itemDate1 = [calendar1 dateFromComponents:dateComps1];
        [dateComps1 release];

        UILocalNotification *localNotif1 = [[UILocalNotification alloc] init];
        if (localNotif1 == nil)
            return;
        localNotif1.fireDate = itemDate1;
        localNotif1.timeZone = [NSTimeZone defaultTimeZone];
        localNotif1.alertBody = @"Open application";

        localNotif1.alertAction = @"View";

        localNotif1.soundName = UILocalNotificationDefaultSoundName;

        [[UIApplication sharedApplication] scheduleLocalNotification:localNotif1];
        [localNotif1 release]; 
```

如果应用程序将从后台关闭，上面的代码可以正常工作，但如果我的应用程序处于运行状态，那么我不希望触发本地通知。

# javascript - 如何使用phonegap从android中的URL下载文件？

> ID：12195451
> 
> 赞同：0
> 
> 时间：2012-08-30T11:04:40.170
> 
> 标签：javascript, android, html, cordova, download

我想从 URL 下载一个文件。就像我点击下载按钮一样，文件 url 应该得到连接，它应该被下载到手机内存或 android 的 SDCard 中。

谁能帮助我如何使用phonegap让它工作？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:18:12.820

请使用 Phonegap 或 CoreDova 的[FileTransfer](http://docs.phonegap.com/en/2.0.0/cordova_file_file.md.html#FileTransfer) API。以下是来自同一来源的示例代码：

```
var fileTransfer = new FileTransfer();
var uri = encodeURI("http://some.server.com/download.php");

fileTransfer.download(
    uri,
    filePath,
    function(entry) {
        console.log("download complete: " + entry.fullPath);
    },
    function(error) {
        console.log("download error source " + error.source);
        console.log("download error target " + error.target);
        console.log("upload error code" + error.code);
    }
); 
```

要将文件保存在 SDCard 上，请使用[FileWriter](http://docs.phonegap.com/en/2.0.0/cordova_file_file.md.html#FileWriter)

```
function gotFileWriter(writer) {
    writer.onwriteend = function(evt) {
        console.log("contents of file now 'some sample text'");
        writer.truncate(11);  
        writer.onwriteend = function(evt) {
            console.log("contents of file now 'some sample'");
            writer.seek(4);
            writer.write(" different text");
            writer.onwriteend = function(evt){
                console.log("contents of file now 'some different text'");
            }
        };
    };
    writer.write("some sample text");
}

function fail(error) {
    console.log(error.code);
} 
```

# dojo - Always show dojo tooltip

> ID：12195455
> 
> 赞同：2
> 
> 时间：2012-08-30T11:04:57.470
> 
> 标签：dojo

I have the following code for adding tooltip for onclick of a span id as shown below:

```
new dijit.Tooltip({
            connectId: ['gridEditHelp'],
            label: 'Double click on an item in the below table to perform inline editing of attributes',
            position: ['above']
}); 
```

The problem is that I want the tooltip to be visible always on the web page.

Any ideas or existing API available for the same?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T14:01:13.350

Use `TooltipDialog` instead - or else you will have to mess with the `_MasterTooltip` manager (there's more or less only one global, reusable tooltip). Then call `dijit.popup.open` - and never call `.close`

```
dijit.popup.open({
     popup: new TooltipDialog({
            id: 'myTooltipDialog',
            style: "width: 300px;",
            content: "<p>I have a mouse leave event handler that will close the dialog."
        });,
     around: dojo.byId('thenode')
}); 
```

# python - 创建和测试数据库字段是否已在同一程序中创建

> ID：12195459
> 
> 赞同：0
> 
> 时间：2012-08-30T11:05:13.587
> 
> 标签：python, selenium

在编写 selenium 测试用例时，我发现了一个奇怪的情况，我正在保存一个表单，并且在保存表单时，我在数据库中创建了一个用户。现在发生了什么，该用户已在数据库中成功创建，但在同一 selenium 测试用例中获取它时，我遇到了`DOESNOTEXIST`异常。当我在数据库中手动检查时，新创建的用户就在那里。任何人都可以解释我如何在同一程序中创建和测试该用户是否已在 DB 上创建和测试？如果不可能，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T12:40:00.380

我得到了解决方案，实际上问题是`transaction handling`. 在整个程序中，django 使用 auto_commit 事务，因此只有在程序完全执行后才会发生数据库更改。因此，我不是使用 auto_commit 手动处理事务，而是使用`transaction.commit_manually`and`transaction.commit()`并`transaction.rollback()`在我希望它们保存的位置正确提交和回滚事务。

# windows - 是否可以在 Windows 7 中将 tableau 连接到 cloudera hive？

> ID：12195460
> 
> 赞同：0
> 
> 时间：2012-08-30T11:05:13.933
> 
> 标签：windows, hive, cloudera, tableau-api

我下载并安装了链接[http://www.tableausoftware.com/support/drivers](http://www.tableausoftware.com/support/drivers)中提供的 cloudera hive 驱动程序。但是当我尝试在 ODBC 连接中添加驱动程序时，它没有显示在那里。我读到了一些 cloudera hive 驱动程序仅适用于 windows 2008 的地方。我正在使用 windows 7。请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:24:11.883

今天有点晚了，但这里有一些来自 Tableau 知识库的更详细的文章，您或其他对此问题感兴趣的人可能会感兴趣。

[连接到 Hadoop Hive](http://kb.tableausoftware.com/articles/knowledgebase/cloudera-hadoop-hive-connection)

[Hadoop Hive 的额外功能](http://kb.tableausoftware.com/articles/knowledgebase/cloudera-hadoop-hive-extra-capabilities)

[使用 Hadoop Hive 进行性能设计](http://kb.tableausoftware.com/articles/knowledgebase/cloudera-hadoop-hive-performance)

[为 Tableau 连接管理 Hadoop 和 Hive](http://kb.tableausoftware.com/articles/knowledgebase/administering-hadoop-hive)

否则，如果您仍然无法连接到 Cloudera Hive 并且您是注册客户，或者已经下载了试用版，那么您可以随时发送电子邮件至 support@tableausoftware.com 并在那里寻求帮助。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T11:44:07.950

是的，可以在 Windows 7 上将 Tableau 连接到 cloudera Hive。

步骤是： 1\. 为 hive nohup HIVE_PORT=10000 hive --service hiveserver 启动 Thrift 服务器 & 2\. 从[https://ccp.cloudera.com/display/con/Cloudera+Connector+for+Tableau](https://ccp.cloudera.com/display/con/Cloudera+Connector+for+Tableau+License+Agreement)
安装 Hive ODBC 驱动程序 [+License+Agreement](https://ccp.cloudera.com/display/con/Cloudera+Connector+for+Tableau+License+Agreement)
3\. 打开 Tableau Connect to Data -> Cloudera Hadoop Hive -> 提供服务器 ip 和端口：10000（如果需要，您可以通过在启动 Hive 服务器时将 HIVE_PORT 更改为其他值来更改 thrift 服务器端口)

其余的都是直截了当的。还要确保在防火墙中打开所需的端口（10000 或您选择的任何端口）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T08:20:24.623

Please make sure that you tried to create the ODBC connection in ODBC 32bit, since the drivers and the Tableau desktop is a 32bit application. You can run the ODBC 32bit driver panel with the odbcad32.exe command line.

# css - Bootstrap 表溢出长的无空格文本

> ID：12195469
> 
> 赞同：68
> 
> 时间：2012-08-30T11:05:36.407
> 
> 标签：css, twitter-bootstrap, css-tables

我正在使用 Bootstrap，并且我有一个包含几列的表格，其中最后一个有时有很长的一段没有空格的文本。我注意到在某些屏幕尺寸下，表格会溢出其父 div 并与其兄弟表格创建丑陋的重叠。

我玩弄了它，我认为问题与没有间距的文本有关。我创建了一个[jsfiddle](http://jsfiddle.net/skhFC/2/)来演示我的意思。

如您所见，最左上角的表格表现良好，并且只是垂直增长以容纳更多文本。但是，由于较长的未加空格的文本，左下表导致右侧溢出，并且左下表的右列在其兄弟“下方”结束。

有没有人对我如何解决这个问题有任何提示，以便将很长的文本剪切或部分拆分到新行上？

 `* * *

## 回答 #1

> 赞同：130
> 
> 时间：2012-09-04T12:59:02.387

```
.the-table {
    table-layout: fixed;
    word-wrap: break-word;
} 
```

### 已弃用（即自动换行）

将以下样式添加到您的`<table>`

```
.the-table {
    table-layout: fixed;
    over-flow: break-word;
} 
```

然后，您可以根据需要通过 CSS 调整布局。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2016-05-25T08:37:58.343

这无需强制固定表格布局即可工作只需将其添加到 td 或任何

```
.is-breakable {
  word-break: break-word;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-10-01T10:38:33.063

我在 Internet Explorer 中使用这些解决方案时遇到了问题。

我使用以下样式使其最终起作用。

```
<td style="word-break: break-all"> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-08T08:29:51.013

你可以使用下面的css。这将包装文本并在文本末尾应用 ...。

例如 This_is_a_large_text 将更改为 This_is_a_lar...

```
td {
  max-width: 120px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
} 
```

您还可以添加工具提示以显示完整的文本值。

```
<td data-toggle="tooltip" title="${text}">${text}</td> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-14T11:56:47.653

阿尔伯斯的回答对我有用

```
.the-table {
 table-layout: fixed;
 word-wrap: break-word;
} 
```

在JS中动态加载它添加

```
 $("#"  + tableName ).addClass('the-table'); 
```

希望能帮助到你！！`

# mysql - 未知变量“默认存储引擎=myisam”

> ID：12195476
> 
> 赞同：1
> 
> 时间：2012-08-30T11:05:56.297
> 
> 标签：mysql, myisam, storage-engines

我正在尝试配置 Mysql（版本 14.15 Distrib 6.0.8-alpha，适用于 Win64）以使用 MyISAM 作为 Windows 7 上的默认存储引擎。我创建了 C:\my.cnf，其内容如下：

```
[mysql]
default-storage-engine=myisam 
```

在重新启动 mysql 服务并尝试从控制台运行 mysql 后，我收到以下错误消息：

```
mysql: unknown variable 'default-storage-engine=myisam' 
```

我一直在学习教程，并将上面的内容直接复制并粘贴到我的 my.cnf 文件中。

我尝试了以下组合：

```
set default-storage-engine=myisam
storage-engine=mysiam
set storage-engine=mysiam 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-30T11:32:18.547

我试着改变它，它对我有用。

我所做的只是将 [mysqld] 组中的值从“INNODB”更改为“MYISAM”，如下所示

从

```
default-storage-engine=INNODB 
```

到

```
default-storage-engine=MYISAM 
```

注意：它的`[mysqld]`组不是`[mysql]`组。[mysql] 组用于 MySQL 客户端，而不用于服务器。

或者，您可以通过执行更改默认存储引擎

```
"set global storage_engine=MYISAM" 
```

在这种情况下，您不需要重新启动服务器。

希望能帮助到你....

# sencha-touch - 当用户滚动到列表末尾时如何更新 Sencha Touch List

> ID：12195478
> 
> 赞同：2
> 
> 时间：2012-08-30T11:05:59.620
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我有一个应用程序，其中有大约 1000 条记录要显示在 localstore 的 sencha 列表中。如果我尝试一次性填充所有数据，则刷新列表需要很长时间（大约 1 分钟）。

现在我想加载包含初始 20 条记录的列表，然后它应该在用户向下滚动时加载下一个 20。当用户滚动到列表末尾时如何捕获事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T13:23:13.963

[这是Secncha Doc网站](http://docs.sencha.com/touch/2-0/#!/api/Ext.Component-cfg-plugins)的摘录

```
Ext.create('Ext.dataview.List', {
    config: {
        plugins: [
            {
                xclass: 'Ext.plugin.PullRefresh',
                pullRefreshText: 'Pull to refresh...'
            },
            {
                xclass: 'Ext.plugin.ListPaging',
                autoPaging: true
            }
        ],

        itemTpl: '<div class="item">{title}</div>',
        store: 'Items'
    }
}); 
```

从我这里我添加而不是 xclass: '' 你也可以使用 xtype: 'listpaging'。它也有效...

干杯，奥列格

PS。如果仍然不清楚，请在此处粘贴您的代码片段...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:03:52.197

要添加到 oleg sencha 不会分页，即您的分页逻辑必须在服务器端，插件只会将页面参数增加 1，这可以在商店的 ajaxProxy 中的 pageParam 配置中进行配置

# iphone - 如何从 iphone 库中获取视频

> ID：12195479
> 
> 赞同：0
> 
> 时间：2012-08-30T11:06:10.433
> 
> 标签：iphone

我想从库中挑选一个视频。这是我的代码。

```
picker1 = [[UIImagePickerController alloc] init];
picker1.delegate = self;
NSArray *mediaTypesAllowed = [UIImagePickerController availableMediaTypesForSourceType:UIImagePickerControllerSourceTypePhotoLibrary];

picker1.sourceType=UIImagePickerControllerSourceTypeSavedPhotosAlbum;
picker1.mediaTypes = mediaTypesAllowed;
[self presentModalViewController:picker1 animated:YES]; 
```

}

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
[picker dismissModalViewControllerAnimated:YES];
if ([picker isEqual:picker1])
{
    NSString *mediaType = [info valueForKey:UIImagePickerControllerMediaType];
    if([mediaType isEqualToString:@"public.movie"]){
        NSLog(@"%@",info);
    }
} 
```

问题是当我从库中选择视频时，模拟器被挂起。甚至委托方法 didFinishPickingMediaWithInfo 也没有调用

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T09:56:27.030

尝试这个

```
myImagePickerController.mediaTypes =
[[NSArray alloc] initWithObjects: (NSString *) kUTTypeMovie, nil]; 
```

或参考这个 [UIImagePickerControllerMediaType](http://zcentric.com/2008/08/28/using-a-uiimagepickercontroller/%22refer%20this%22) 希望这对你有帮助

# node.js - 节点 JS 加密，无法在带有重音符号的字符上创建 hmac

> ID：12195480
> 
> 赞同：12
> 
> 时间：2012-08-30T11:06:18.533
> 
> 标签：node.js, utf-8, hmac, non-ascii-characters, node-crypto

当我尝试加密的文本具有重音字符（例如ä、ï、ë）时，我在 NodeJS 中生成正确签名（使用 crypto.js）时遇到问题

```
generateSignature = function (str, secKey) { 
 var hmac = crypto.createHmac('sha1', secKey);
 var sig = hmac.update(str).digest('hex');
 return sig;
}; 
```

如果 'str' 不包含重音字符（如 ä、ï、ë 等字符），此函数将返回正确的 HMAC 签名。如果文本中存在重音字符，则不会返回正确的 HMAC。重音字符在 UTF8 编码中有效，所以我不知道为什么加密对它们有问题。可能是我需要以某种方式告诉加密我正在签署 utf8 编码的文本，但我不知道该怎么做。

这篇文章中描述了完全相同的问题：[NodeJS hmac 摘要问题与重音](https://stackoverflow.com/questions/9463157/nodejs-hmac-digest-issue-with-accents) 但是，帖子本身以及答案对我来说没有意义（因为他们正在将他们想要加密的数据传递到密钥应该加密的地方去）。

这是带有硬编码值的代码版本，用于 str 和 secKey：

```
 var crypto = require('crypto');

  str="äïë";  
  secKey="secret"; 
  var hmac = crypto.createHmac('sha1', secKey);
  var sig = hmac.update(new Buffer(str, 'utf8')).digest('hex');
  console.log("Sig:      " + sig);
  console.log("Expected: 094b2ba039775bbf970a58e4a0a61b248953d30b"); 
  // "Expected" was generated using http://hash.online-convert.com/sha1-generator 
```

输出：：

签名：39c9f1a6094c76534157739681456e7878557f58

预期：094b2ba039775bbf970a58e4a0a61b248953d30b

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-30T11:51:08.797

模块使用的默认编码`crypto`通常是[`'binary'`](http://nodejs.org/api/crypto.html#crypto_hash_update_data_input_encoding). 因此，您必须`'utf-8'`通过 a指定`Buffer`将其用作编码：

```
var sig = hmac.update(new Buffer(str, 'utf-8')).digest('hex'); 
```

这就是[另一个问题的答案](https://stackoverflow.com/a/9591184/15031)所展示的，只是关键：

```
var hmac = crypto.createHmac('sha1', new Buffer(secKey, 'utf-8')); 
```

* * *

您还可以使用[`Buffer`](http://nodejs.org/api/buffer.html#buffer_buffer)查看差异：

```
new Buffer('äïë', 'binary')
// <Buffer e4 ef eb>

new Buffer('äïë', 'utf-8')
// <Buffer c3 a4 c3 af c3 ab> 
```

* * *

[**编辑**]

运行您提供的示例代码，我得到：

```
Sig:      094b2ba039775bbf970a58e4a0a61b248953d30b
Expected: 094b2ba039775bbf970a58e4a0a61b248953d30b 
```

而且，稍微修改一下，我得到`true`：

```
var crypto = require('crypto');

function sig(str, key) {
  return crypto.createHmac('sha1', key)
    .update(new Buffer(str, 'utf-8'))
    .digest('hex');
}

console.log(sig('äïë', 'secret') === '094b2ba039775bbf970a58e4a0a61b248953d30b'); 
```

# c# - 从我的代码第一个“表”类中访问数据库连接

> ID：12195484
> 
> 赞同：1
> 
> 时间：2012-08-30T11:06:34.460
> 
> 标签：c#, asp.net-mvc, entity-framework-5

是否可以从代码第一个“表”类中访问当前连接？

我正在尝试编写一个 MVC 多租户应用程序（1 个应用程序，许多 db）我能想到的最简单的方法是在创建 dbcontext 时传递连接字符串（或租户名称）（我已经查看了其他方法这个，但并不真正理解它们）。但是，一旦我进入表类，我就无法访问当前的数据库连接来执行我需要的其他操作。

**示例代码**

```
public class ConnectionContext : DbContext
{
    public ConnectionContext(String connectionString) 
        : base(connectionString)
    {
        if (!this.Database.Exists())
            throw new Exception("Database does not exist");
    }

    public DbSet<Table1> Table1 { get; set; }
}

[Table("Table1")]
public class Table1
{
    [Key]
    public String Column1 { get; set; }

    public String Column2 { get; set; }

    public Int32 GetNoOfColumns()
    {
        using (var conn = new ConnectionContext("???")) // <-- **issue here**
        {
            //Code to get info

            return 0;
        }
    }

    public void Authorize()
    {
        using (var conn = new ConnectionContext("???")) // <-- **issue here**
        {
            this.Column2 = "Authorized";

            conn.Entry(this).State = EntityState.Modified;
            conn.SaveChanges();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:12:04.167

不确定这是否可能以我正在查看的方式进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:12:54.117

您不必使用连接字符串参数创建构造函数，您可以像这样创建 dbcontext 类：

```
public class ConnectionContext : DbContext
{
    public ConnectionContext() 
        : base("nameOrConnectionString")
    {
        if (!this.Database.Exists())
            throw new Exception("Database does not exist");
    }

    public DbSet<Table1> Table1 { get; set; }
} 
```

然后以这种方式调用您的连接上下文：

```
using (var conn = new ConnectionContext())
{
} 
```

# ruby-on-rails - 如何使用回形针将图像保存为渐进式图像？

> ID：12195485
> 
> 赞同：3
> 
> 时间：2012-08-30T11:06:36.867
> 
> 标签：ruby-on-rails, image, optimization, paperclip

如何使用回形针/Imagemagick 将图像保存为渐进式图像？

我正在使用的代码：

```
has_attached_file :photo, {
      :styles => {
          :medium => ["200x200#", :jpg] ,
          :small => ["192x256#", :jpg], 
          :thumb => ["50x50#", :jpg],
          :small_thumb =>["30x30#", :jpg] 
        },
        :convert_options => { 
          :medium => "-quality 60",
          :small => "-quality 60",
          :thumb => "-quality 60",
          :small_thumb => "-quality 60" 
        },
      :default_url => "/assets/default_:style.png" }.merge(PAPERCLIP_STORAGE_OPTIONS) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T12:37:44.817

只需添加您选择的`-interlace Line`。`convert_options`

[Doc](http://www.imagemagick.org/script/command-line-options.php#interlace)明确指出：

> 使用 Line 或 Plane 创建隔行扫描的 PNG 或 GIF 或渐进式 JPEG 图像。

# sql - 拆分字符串然后旋转结果

> ID：12195504
> 
> 赞同：2
> 
> 时间：2012-08-30T11:07:55.453
> 
> 标签：sql, sql-server, tsql, sql-server-2005, parsing

如果有一个从 .Net 应用程序传递的字符串，如下所示

```
2023|F66451,1684|648521,1684|600271,2137|019592 
```

我已经开始使用下面的方法解析字符串，但我需要透视从 Split（由 * 包围）函数返回的数据，以便插入到 #tmpExceptions 表中

```
DECLARE @ExceptionsList as nvarchar(MAX)

SET @ExceptionsList = '2023|F66451,1684|648521,1684|600271,2137|019592'

SET NOCOUNT ON;

DECLARE @CurrentLineItem as nvarchar(255)

CREATE TABLE #ParsePassOne
(
    LineItem nvarchar(255)
)

CREATE TABLE #tmpExceptions
(
    AccountNumber int,
    ClaimNumber nvarchar(50)
)

INSERT INTO #ParsePassOne
    SELECT value FROM Split( ',' ,@ExceptionsList)

WHILE EXISTS(SELECT LineItem FROM #ParsePassOne)
    BEGIN
        SELECT TOP 1 @CurrentLineItem = LineItem FROM #ParsePassOne

        *******
            SELECT value FROM Split( '|' ,@CurrentLineItem) 
            *******

        DELETE FROM #ParsePassOne WHERE LineItem = @CurrentLineItem
    END

SELECT * FROM #tmpExceptions

DROP TABLE #ParsePassOne
DROP TABLE #tmpExceptions 
```

到目前为止，返回的数据如下所示。我只需要将数据旋转到列，以便我可以插入它。我该怎么做？

![在此处输入图像描述](../Images/5ca1c22453f059b301f41498f57e38c4.png)

**拆分功能**

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
--Creates an 'InLine' Table Valued Function (TVF)
ALTER FUNCTION [dbo].[Split] 
   (  @Delimiter varchar(5), 
      @List      varchar(8000)
   ) 
   RETURNS @TableOfValues table 
      (  RowID   smallint IDENTITY(1,1), 
         [Value] varchar(50) 
      ) 
AS 
   BEGIN

      DECLARE @LenString int 

      WHILE len( @List ) > 0 
         BEGIN 

            SELECT @LenString = 
               (CASE charindex( @Delimiter, @List ) 
                   WHEN 0 THEN len( @List ) 
                   ELSE ( charindex( @Delimiter, @List ) -1 )
                END
               ) 

            INSERT INTO @TableOfValues 
               SELECT substring( @List, 1, @LenString )

            SELECT @List = 
               (CASE ( len( @List ) - @LenString ) 
                   WHEN 0 THEN '' 
                   ELSE right( @List, len( @List ) - @LenString - 1 ) 
                END
               ) 
         END

      RETURN 

   END 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T11:12:14.093

您可以将`WHILE EXISTS(SELECT LineItem FROM #ParsePassOne)`循环替换为

```
select *
from
(
select * from #parsepassone
    cross apply dbo.Split( '|' ,lineitem)  
) src
pivot
(max(value) for rowid in ([1],[2]))p 
```

或者用

```
insert #tmpExceptions (AccountNumber, ClaimNumber)
select [1],[2]
from
(
select e.rowid e, p.* from dbo.Split( ',' ,@ExceptionsList) e
    cross apply dbo.Split( '|' ,e.value) p ) s
pivot
(max(value) for rowid in ([1],[2]))p 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-23T18:23:16.160

如果您使用的是 SQL Server 2016，则可以使用 String_Split() 函数并使用交叉应用/透视进入单行

```
create table #t (v varchar(50), i int)
insert into #t (v, i) values ('2023|F66451',1)
,('1684|648521',2), ('1684|600271', 3), ('2137|019592', 4)

--Inorder to get into same row -pivoting the data
select * from (
select * from #t t cross apply (select RowN=Row_Number() over (Order by (SELECT NULL)), value from string_split(t.v, '|') ) d) src
pivot (max(value) for src.RowN in([1],[2])) p 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-28T11:43:33.123

我有一个类似的问题，我需要拆分和旋转列中的值，并且我需要将它们全部显示在视图中。

我想出了以下代码（适用于 SQL 2016 及更高版本）

```
/* Table */
DECLARE @data TABLE (id INT IDENTITY(1,1), [Name] VARCHAR(128) NOT NULL, [Selection] VARCHAR(512) NULL)

INSERT INTO @data ([Name],Selection)
VALUES('Bob','PC; Mouse; Keyboard; Network; Smartphone'),
('Mo','Violin; Hammer'),
('Jon','Magic; Blood; Teleporter'),
('Mhary','Vampire')

/* Pivot */
;WITH Data_RowNumber AS (
    SELECT
        id,
        [name],
        split.value,
        ROW_NUMBER() OVER (PARTITION BY id ORDER BY id) AS RowNumber
    FROM @data
    CROSS APPLY STRING_SPLIT([Selection],';') AS split
)
SELECT 
    id,
    [name],
    [1],[2],[3],[4],[5],[6]
FROM Data_RowNumber
PIVOT (
    MAX([value])
    FOR [RowNumber] IN ([1],[2],[3],[4],[5],[6])
    ) AS p 
```

# actionscript-3 - 像素弯曲器 4 色着色器

> ID：12195505
> 
> 赞同：0
> 
> 时间：2012-08-30T11:07:59.183
> 
> 标签：actionscript-3, pixel-shader, pixel-bender

我没有使用 Pixel Bender 的经验，并且着色语言对我来说似乎是胡言乱语，所以我想知道是否有人可以帮助我重写以下 as3 代码以用作 Pixel Bender 过滤器/着色器。它的工作方式是我想将 16777215 种颜色转换为我在调色板数组中定义的 4 种色调（首先是最浅的颜色，最后是最深的颜色）。结果令人满意，但性能很差，这就是我想做一个过滤器的原因。这是代码：（sbitmap 是我库中的图像）

```
var display:Bitmap = new Bitmap(new sbitmap());
var palette:Vector.<uint> = new <uint>[0x485B61, 0x4B8E74, 0xA6E76D, 0xD1FE85];
var data:BitmapData = display.bitmapData;

addChild(display);

const inc:int = int(0xFFFFFF/4)+1;

for(var i:int = 0; i < data.height; i++)
{
    for(var j:int = 0; j < data.width; j++)
    {
        var color:uint = data.getPixel(j, i);
        var pIndex:int = 0;

        for(var k:int = 0; k < 0xFFFFFF; k += inc)
        {
            if(color >= k && color < k + inc)
            {
                data.setPixel(j, i, palette[pIndex]);
                break;
            }

            pIndex++;
        }
    }
} 
```

这是我得到的结果：http: [//fc05.deviantart.net/fs70/f/2012/243/c/6/screen_shot_2012_08_30_at_1_19_10_pm_by_johnjensen-d5d1ms3.png](http://fc05.deviantart.net/fs70/f/2012/243/c/6/screen_shot_2012_08_30_at_1_19_10_pm_by_johnjensen-d5d1ms3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T11:48:23.707

Pixel Blender 语言并不难。下面非常简单的代码完成了您要执行的操作：

```
<languageVersion : 1.0;>

kernel untitled
<   namespace : "Your Namespace";
    vendor : "Your Vendor";
    version : 1;
>
{
    input image4 src;
    output pixel4 dst;

    void
    evaluatePixel()
    {       
        float4 px = sampleNearest(src,outCoord());
        dst = px;
        if(px.r < 0.25) {
            dst = float4(0.25, 0.25, 0.25, 1.0);
        } else if(px.r < 0.5) {
            dst = float4(0.5, 0.5, 0.5, 1.0);
        } else if(px.r < 0.75) {
            dst = float4(0.75, 0.75, 0.75, 1.0);
        } else {
            dst = float4(1.0, 1.0, 1.0, 1.0);
        }
    }
} 
```

请注意，RGBA 值是从（0.0 到 1.0）的浮点数。一个像素是一个由四个浮点数组成的数组。可以将 px[0], px[1], px[2], px[3] 写成 px.r, px.g, px.b, px.a。

有关详细信息，请参阅 Pixel Blender 参考：http: [//www.adobe.com/content/dam/Adobe/en/devnet/pixelbender/pdfs/pixelbender_reference.pdf](http://www.adobe.com/content/dam/Adobe/en/devnet/pixelbender/pdfs/pixelbender_reference.pdf)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T11:53:00.197

```
<languageVersion : 1.0;>

kernel test
<   namespace : "Your Namespace";
vendor : "Your Vendor";
version : 1;
>
{
input image4 src;
output pixel4 dst;

void
evaluatePixel()
{
    pixel4 k1=pixel4(0.282,0.71,0.38,1);
    pixel4 k2=pixel4(0.294,0.557,0.455,1);
    pixel4 k3=pixel4(0.65,0.91,0.475,1);
    pixel4 k4=pixel4(0.82,0.99,0.52,1);
    pixel4 s;
    s = sampleNearest(src,outCoord());
    if (s.r<0.25) dst=k1; else
    if (s.r<0.5) dst=k2; else
    if (s.r<0.75) dst=k3; else dst=k4;
}
} 
```

抓住。您使用的算法仅基于红色组件，因此过滤器仅检查“.r”以获取基于 1 的浮点值。

# objective-c - MPMediaItemPropertyPersistentID 有多独特？

> ID：12195507
> 
> 赞同：8
> 
> 时间：2012-08-30T11:08:03.130
> 
> 标签：objective-c, ios, itunes, icloud, mpmediaitem

MPMediaItemPropertyPersistentID 有多独特？将 ID 列表同步到连接到同一 iTunes 帐户的另一台设备时，它甚至可以工作吗？

我想实现一个 iCloud 同步播放列表解决方案，它将 ID 存储为一个列表，我需要知道这是否可行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T15:28:28.727

根据[文档](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMediaItem_ClassReference/Reference/Reference.html) *（强调我的）* ...

> MPMediaItemPropertyPersistentID 标识符的值在应用程序启动和不更改媒体项同步状态的同步之间保持不变。**不保证该值在同步/非同步/同步周期内保持不变。**

因此，鉴于它甚至不会在此基础上持续存在，如果它以足够强大的方式在设备上持续存在，我会感到惊讶，如果有的话。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-02T15:32:19.487

据我了解，这是不可能的。我认为这个 ID 只对每个设备都是持久的。它不是 iTunes Store 中特定歌曲的唯一标识符。它只是您自己同步歌曲的 ID。

当您阅读文档时，您会看到这个 ID 是多么脆弱。

> “不保证该值在同步/不同步/同步周期中持续存在。”

因此，如果您将歌曲数据库与 iTunes 同步，并可能从您的 iOS 设备中删除一首歌曲，然后再次同步并将其放回您的设备，您可能无法再次获得该歌曲的相同 ID。并且肯定不会跨其他设备。

因此，我认为，除非您为 iTunes 目录中的每首歌曲或您自己的 Mac 上的 iTunes 目录（Mac 必须处理 ID）获得全球相同的标识符，否则您尝试做的事情不会奏效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-02T15:37:08.237

其他答案有点模糊，所以这里是我自己的经验和测试的答案：

1）您不能`MPMediaItemPropertyPersistentID`用来获取设备之间相等的 ID。
2)`MPMediaItemPropertyPersistentID`当设备与另一个 iTunes 库同步或从设备中删除所有音乐然后再次同步时，将会发生变化。

当歌曲在设备上同步时，iTunes 会创建并存储 ID。如果未同步，则删除 ID。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-29T10:52:16.043

如果有人像我一样登陆这里，使用谷歌搜索：

在我的设备升级 iOS 后，我确认了 middaparka 上面所说的内容，当时我的音乐应用程序尝试使用升级前的 persistentID。ID已经改变，我最终（不知不觉地）从我的图书馆听了很多我通常不听的歌曲......

所以我接受了 middaparka 的建议，并通过对 title、artistName、albumTitle 和 duration 的哈希进行异或运算来构造一个 persistentKey。在核心数据库初始化期间构建 persistentKey 将在以后节省时间，因为在获取“正常操作代码”中的项目时避免了多个字符串比较。

persistentKey 策略对歌曲有效。但是，当我从标题、艺术家和发行年份对专辑进行哈希处理时，我最终遇到了一次冲突。

1976 年，我有两张由不同艺术家发行的同名专辑。当专辑名称和艺术家的哈希值异或时，它们相互抵消了。我最终在持续时间内使用哈希而不是艺术家，这很有效。

我可能最终会改进生成persistentKeys的算法......

# joomla - Joomla 2.5 输出中没有空格

> ID：12195511
> 
> 赞同：1
> 
> 时间：2012-08-30T11:08:10.803
> 
> 标签：joomla, editor, components, text-rendering

我在泡菜里。我设计了一个本地安装的 Joomla 2.5 站点。我通常为我的客户配备 JCE 编辑器，但在设计时以 HTML 模式运行。当所有内容都准备好后，我决定测试 WYSIWYG 模式以确保没有出错。不幸的是，有些事情发生了。观察缺少空格：

![在此处输入图像描述](../Images/1c45af25468a64b808ec05a7a10aeb2b.png)

非常有趣的是，仅在从所见即所得视图中保存时才会出现该问题。

起初我认为 JCE 出现故障（尽管编辑器本身继续显示空格），所以我尝试重新安装。然后我尝试了其他编辑器——CKEditor 和 TinyMCE。他们也出现了同样的症状。

为了找出问题，我在 HTML 视图中粘贴干净标记后检查了数据库，并在保存为所见即所得视图后再次检查了数据库。这是结果：

![在此处输入图像描述](../Images/5594634be2c7cc163fba7c5f4e6b324c.png)

因此，根据数据库字段，在 HTML 或 WYSIWYG 视图中的保存过程似乎工作正常......但是为什么根据用于编辑的方法不同，提供给浏览器的输出会有所不同？

![在此处输入图像描述](../Images/b0b0d3397971dc308a783409ebca70ce.png)

到目前为止，我已经检查了实体编码、CSS（尽管这显然不是 CSS 问题），并尝试在另一台本地服务器上安装。行为没有变化。

我真的可以使用一些建议。

预先感谢您的帮助。

Z

PS：这是最新版本的 Joomla (2.5.6)，在 Apache 上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:35:23.147

当我们不断输入一些文本时，就会出现这个问题。实际上，这不是通过为该部门使用正确的 css 样式来解决此问题的问题。

```
<style type="text/css">#divid {width:750px;word-wrap;break-word;"}</style> 
```

您必须为您的部门使用这种 css 样式。这肯定会解决这个问题...

# android - 除了 Spinner 之外的 Android 中的下拉控件

> ID：12195518
> 
> 赞同：0
> 
> 时间：2012-08-30T11:08:27.143
> 
> 标签：android, android-spinner

我正在使用`spinner`并寻找其他类似的控件`Eclipse`，我需要更改`spinner`.

```
ArrayAdapter<String> Timeadapter = new ArrayAdapter(this,android.R.layout.simple_spinner_item, TimeIntervals); 
```

为此，我使用过`simple_spinner_dropdown_item`，但它`spinner`通过前面的单选按钮更改了整个视图

```
ArrayAdapter<String> Timeadapter = new ArrayAdapter(this,android.R.layout.simple_spinner_dropdown_item, TimeIntervals); 
```

但是我正在寻找的输出视图不存在。

请帮忙，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:57:24.663

我在想这个 mihgt 可以帮助你[多选对话框](http://labs.makemachine.net/2010/03/android-multi-selection-dialogs/)，这可能也有帮助[单选对话框](http://phaniraghav.wordpress.com/2011/07/01/android-dialog-listview-for-single-selection/)无论如何你总是可以从[这里](http://developer.android.com/guide/topics/ui/dialogs.html)获得帮助，我希望这对你有用

# ios - 区域语言环境不适用于 iOS

> ID：12195523
> 
> 赞同：0
> 
> 时间：2012-08-30T11:08:55.283
> 
> 标签：ios, localization

我需要将瑞士的地区语言环境添加到我的应用程序中，该应用程序已经具有正常的德语本地化。

所以我刚刚添加了它，现在我的项目中有一个用于瑞士的 Localizable.String。在电话中，我将语言设置为德语，将地区设置为瑞士。

但是，当我选择德语作为语言并选择瑞士作为地区时，代码仍然显示德语文本没有从瑞士文件中提取翻译。

所有其他正常的国家语言环境都可以正常工作。

这是iOS中的错误吗？

很多人认为

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:19:43.633

General-International-Language 菜单中没有瑞士语言，这意味着您无法选择它进行本地化。区域负责格式化（例如日期、时间和货币格式）。

# android - Android保存机密文件

> ID：12195526
> 
> 赞同：0
> 
> 时间：2012-08-30T11:09:02.763
> 
> 标签：android, android-sdk-2.3

目前我正在开发一个将文件存储在文件夹中的应用程序。`res/raw`据我所知，这些文件只能读取但不能写入？

我的问题是，当有人输入序列号时，我需要更改此文件，以便激活某些功能主义者。

此外，我不太喜欢将文件公开放在 SD 卡上，因为用户应该无法获取这些文件的内容。

我怎样才能解决这个问题？

**首先想到的是：** 我存储在共享首选项中的序列号和其他设置信息......另外我的问题是，用户是否可以访问共享首选项，以便他可以看到，自己更改这些设置？

如果没有，那么我可以存储信息以激活那里的功能主义者。

有人有其他建议吗？

# java - 从石英重复作业（Spring + Quartz 应用程序） - 作业链接

> ID：12195537
> 
> 赞同：2
> 
> 时间：2012-08-30T11:09:53.837
> 
> 标签：java, spring, quartz-scheduler

我的石英工作有以下设置 -

```
 <bean id="jobDetail" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
    <property name="targetObject" ref="actualObject" /><br>
    <property name="targetMethod" value="processData"/>
    <property name="concurrent" value="false"/>
</bean>

    <bean id="simpleTrigger" class="org.springframework.scheduling.quartz.SimpleTriggerFactoryBean">
    <property name="jobDetail" ref="jobDetail" />
    <property name="startDelay" value="10000" />
    <property name="repeatInterval" value="1000" />
</bean> 
```

这对我很有用。我想做的是在 processData 完成后再次调用它。我知道旧的 while(true) 方法最适合，但我想用石英来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T16:24:57.990

首先，你必须解释为什么你“*想用石英做这个*”，因为“*好旧的 while(true)* ”是实现你的用例的正确方法（当然你需要一个额外的线程，但 Quartz 也需要它）。这听起来像是过度设计，所以你最好有充分的理由。

话虽如此，您有两个选择：

*   重新安排作业以在您离开时立即运行。原则：

    ```
    public class HelloJob implements Job {

        public HelloJob() {
        }

        public void execute(JobExecutionContext context) throws JobExecutionException
        {
            //do your job...

            Trigger trigger = newTrigger().build();
            JobDetail job = newJob(HelloJob.class).build();
            context.getScheduler().scheduleJob(trigger, job);
        }
    } 
    ```

    您不需要您的 XML 配置，但必须安排此作业以某种方式首次运行（例如直接`@PostConstruct`使用`Scheduler`）。您的工作完成后，它将再次运行刚刚重新安排的相同工作。

*   [`JobChainingJobListener`](http://quartz-scheduler.org/api/2.1.5/org/quartz/listeners/JobChainingJobListener.html)可能对您有用，请参阅：[Quartz Scheduler 可以串行运行作业吗？](https://stackoverflow.com/questions/12134903)

*与“ good old while(true)* ”相比，这两种解决方案都非常重量级。

# jquery - 没有图像的四舍五入

> ID：12195538
> 
> 赞同：0
> 
> 时间：2012-08-30T11:09:58.410
> 
> 标签：jquery, html, css

我想用这个图形制作一个网站，但我的问题是曲线，我不想创建曲线的图像，因为布局可以在分辨率广告的基础上调整大小，因为我必须在里面做一些过渡。可以使用 jQuery 或 css 3 来制作这样的布局吗？我知道半径边界等，但像这样我不知道该怎么做。有可能吗？背景是白色的，但在左边和右边我有一些带有 nes 和 rss 的 div。（注意：曲线左右边框有阴影

![在此处输入图像描述](../Images/64965d2db2dd7bb8fb4116212c1757bf.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T11:40:19.240

好的，我玩弄了凯尔的解决方案并设法得到了一些东西

小提琴：http: [//jsfiddle.net/G6SHH/3/](http://jsfiddle.net/G6SHH/3/)

```
div
{
    height: 500px;
    width: 200px;
    background: #ccc;
    border-radius: 50px 0px 0px 50px / 250px 0px 0px 250px;
}

div:after {
    background-color: white;
    border-radius: 50px 0 0 50px / 250px 0 0 250px;
    content: "";
    display: block;
    height: 498px;
    position: relative;
    right: -154px;
    width: 138px;
} 
```

**这仅适用于现代浏览器**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T11:21:51.450

你可以让左侧做*这*件事，但不能让右侧`border-radius`不接受负值。

```
div
{
    height: 500px;
    width: 200px;
    background: #ccc;
    border: 3px solid #333;
    border-radius: 50px 0px 0px 50px / 250px 0px 0px 250px;
}​ 
```

[http://jsfiddle.net/G6SHH/](http://jsfiddle.net/G6SHH/)

* * *

当然，您总是可以在顶部覆盖另一个 div，但这是不需要的标记，老实说看起来很奇怪。

[http://jsfiddle.net/G6SHH/1/](http://jsfiddle.net/G6SHH/1/)

您将不得不为此使用 img 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T11:40:10.673

我猜你必须玩 Radius，

这是我尝试过的链接：http: [//jsfiddle.net/amandeepj/45XzA/](http://jsfiddle.net/amandeepj/45XzA/)但是，我无法实现凹形边框，即 DIV 的右侧边框，如有问题的图像所示。

无论如何，我会使用图像作为背景。在这种情况下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T11:40:20.360

查看此解决方案：

现场演示：[http](http://codepen.io/anon/full/emAHu)
://codepen.io/anon/full/emAHu 源代码：[http ://codepen.io/anon/pen/emAHu](http://codepen.io/anon/pen/emAHu)

**特点：**
* 您可以将内容放入`div`您可以设置为站点包装器的布局中。
*一切都是`%age`基于的，这意味着一切都是灵活的

**html**

```
<div>
  <p>Content inside the paragragh</p>
</div> 
```

**css**

```
div{
  position: absolute;
  background: url("http://placehold.it/400x400");
  width: 400px;
  height: 400px;
  border-radius: 50px 0px 0px 50px / 250px 0px 0px 250px;
    /* border-radius: 40% 0 0 40%; */
  padding: 25px;
}

div:after{
  content: "";
  display: block;
  width: 100%;
  height: 100%;
  background: white;
  position: absolute;
  top: 0;
  left: 60%;
  border-radius: 50px 0px 0px 50px / 250px 0px 0px 250px;
  /*  border-radius: 40%; */
} 
```

# excel - 自定义格式化宏：需要打印带小数点的个位数整数

> ID：12195540
> 
> 赞同：0
> 
> 时间：2012-08-30T11:10:17.537
> 
> 标签：excel, formatting, custom-formatting, vba

我正在研究一个小宏，以将文件输出为 prn，该 prn 将用作其他软件的输入。我已经让一切正常工作，唯一的问题是其他软件要求所有整数都用小数点打印。

顺便说一句，使用 excel 2007

即，如果单元格值为 0，则应将其打印为“0”。不是空白。同样，如果值为 8，则应打印为“8”。这不是大多数值的问题，因为绝大多数值都像 123.45765 等。

该代码告诉我它在第 4 行的 .NumberFormat(""0."") 中的小数点后需要一个 )

```
Windows("bdf_generator").Activate
With Worksheets(2).Range("E2:H9592").FormatConditions _
.Add(xlCellValue, xlBetween, "=0", "=9")
FormatConditions(1).NumberFormat=(""0."")
With Selection.FormatConditions(1).StopIfTrue = False
End With
End With 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:11:11.303

`FormatConditions(1).NumberFormat=(""0."")`在您的情况下，由于两个双引号 ( `""`) 环绕，该行不正确`0.`。另请注意，`FormatConditions(1).NumberFormat = "0."`应在前面加上`Selection.`，否则会在运行时引发错误。试试这个，因为我相信它更清晰（你会得到智能感知）：

```
Windows("bdf_generator").Activate
Dim r As Excel.Range
Set r = Worksheets(2).Range("E2:H9592")
Dim fc As Excel.FormatCondition
Set fc = r.FormatConditions.Add(xlCellValue, xlBetween, "=0", "=9")
fc.NumberFormat = "0."
fc.StopIfTrue = False 
```

# ms-access - 字段名中的连字符导致 MS-Access 中的 INSERT 语句失败

> ID：12195544
> 
> 赞同：3
> 
> 时间：2012-08-30T11:10:25.253
> 
> 标签：ms-access, ms-access-2007

我已经获得了一个 MS-Access 应用程序来维护和更熟悉 Oracle 作为 dbms 我不时遇到问题..

今天，当列名使用连字符时，MS-Access 似乎有问题......

以下插入语句与 NotInList 事件耦合，以向列表框添加额外条目。

> INSERT INTO tblProductInfo ( ProductInfo-Product ) "SELECT """ & NewData & """ AS ProductInfo-Product;"

但它不起作用（不再？第一次报告问题，不确定原始开发人员是否对其进行了测试）。

我已经用单记录追加查询对其进行了测试，看起来连字符是罪魁祸首，我只是找不到逃避它的方法。

> 插入 tblProductInfo ( ProductInfo-Product ) 值 ("myData")

给出的错误是“INSERT INTO 语句中的语法错误”

似乎没有其他方法可以指定 MS-Access 字段名，是吗？（方括号仅用于 SELECT 语句，

所以......我在呼吁 Stackoverflow 众神的智慧，并希望有人知道如何解决这个问题......

提前致谢 ！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T11:11:01.317

你需要方括号：

```
"INSERT INTO tblProductInfo ([ProductInfo-Product]) Values (""" & NewData & """)" 
```

或者更好的是，避免字段和表名中出现奇怪的字符和空格。

方括号用于字段或表名有问题的任何 sql 语句：

*   这是一个保留字
*   它包含一个空格
*   它包括一个特殊字符

您甚至可以将它们与 DDL 一起使用：

```
Create Table  tblProductInfo ( [ProductInfo-Product]  Text(50)) 
```

# sql - 从视图中的选择表中获取最新日期列的值

> ID：12195546
> 
> 赞同：1
> 
> 时间：2012-08-30T11:10:28.337
> 
> 标签：sql, sql-server, sql-view

说我有一个观点，叫`vProducts`

`vProducts`从中选择数据`tblProducts, tblCategories, tblProductPrices`

这 3 个表中的每一个都有一个名为`dateUpdated`type的列`DateTime`。

在我看来，我希望有一个专栏，也称为`dateUpdated`

这应该是或`dateUpdated`中`tblProducts`的最新版本。`tblCategories``tblProductPrices`

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T11:28:49.057

您总是可以只使用一个`CASE`语句来确定三个日期中的哪一个是最近的一个：

```
CREATE VIEW vProducts AS
   SELECT
      (your list of columns here....),      
      DateUpdated = 
        CASE    
          WHEN p.DateUpdated >= c.DateUpdated AND p.DateUpdated >= pr.DateUpdated
            THEN p.DateUpdated
          WHEN c.DateUpdated >= p.DateUpdated AND c.DateUpdated >= pr.DateUpdated
            THEN c.DateUpdated
          WHEN pr.DateUpdated >= c.DateUpdated AND pr.DateUpdated >= p.DateUpdated
            THEN pr.DateUpdated
          ELSE
            '19000101'
        END

    FROM 
        dbo.tblProducts p
    INNER JOIN 
        dbo.tblCategories c ON .......
    INNER JOIN 
        dbo.tblProductPrices pr ON ......... 
```

三个条件之一应始终适用（否则您将获得`19000101`价值）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:14:07.667

用于`UNION`从三个表中获取所有日期，然后`ORDER`它们：

```
;WITH cte AS
(
    SELECT dateUpdated FROM tblProducts
    UNION ALL 
    SELECT dateUpdated FROM tblCategories 
    UNION ALL
    SELECT dateUpdated FROM tblProductPrices
)
SELECT dateUpdated FROM cte 
ORDER BY dateUpdated DESC 
```

# html - 自动调整大小到所有分辨率

> ID：12195548
> 
> 赞同：0
> 
> 时间：2012-08-30T11:10:34.577
> 
> 标签：html, flash, web, resolution

我想在 Flash 中创建一个网站，但我有一个大问题：我不知道如何将其调整为所有分辨率。

我尝试将 HTML 选项卡中的“匹配电影”更改为“百分比”，但没有成功，因为我的左侧和右侧仍有白色边框！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T12:09:54.497

你试过这个吗？

```
stage.scaleMode = StageScaleMode.EXACT_FIT;
stage.align = StageAlign.TOP_LEFT; 
```

# node.js - 使用 node.js 向 Google API 发出“授权请求”（使用everyauth 身份验证）

> ID：12195549
> 
> 赞同：0
> 
> 时间：2012-08-30T11:10:34.360
> 
> 标签：node.js, oauth-2.0, everyauth

我在 node.js 上有一个应用程序，使用everyauth 身份验证返回表单的令牌

```
{ access_token: 'ya29.AHES6ZTlm9qdoFuY9sdpdmFTJISGaQ_69LnW8fszSzPjSCs',
  token_secret:
    { token_type: 'Bearer',
     expires_in: 3600,
     id_token: 'eyJhbGciOisdUzI1NiJ9.eyJpc3MiOiJhY2NvdW50cy5nb29nbGUuY29tIiwiaWQ
iOiIxMTQ0MDU3NTM5MTg1NTk1Mzc3NzciLCJhdWQiOiI0NDcwOTkyNjgzMjAuYXBwcy5nb29nbGV1c2V
yY29udGVudC5jb20iLCJjaWQiOiI0NDcwOTkyNjgzMjAuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20
iLCJ0b2tlbl9oYXNoIjoicEFXMDBIaUdaSWNRaWMtM09TLU9vQSIsImlhdCI6MTM0NjMyMzQwMiwiZXh
wIjoxMzQ2MzI3MzAyfQ.HUAhg2hdBUB2n1oUFW_9MOxAyr2O7u8GFkShxggTL2o2tBpwIi0_jLIuD1ri
mGkZwdlR5DwjODe4w2w2rLzPpb3YPCeh19zWg7pxP0huqvuVl3cPLXOkWxke46WIH9KNSQbV3oX34GA4
jTvzEV2-HCR_-GhDeG245FTSpxYpTnE',
     refresh_token: '1/Ns-89zzHPbIJlFYXAOCn4dKqxklN4Wc0Og-Gga5XSJA' } } 
```

此时我如何提出“[授权请求](https://developers.google.com/drive/about-auth#authorizing_with_stored_credentials)”（获取文件列表）？

我试过以这种形式使用 node-auth：

```
googleOAuth = new OAuth("https://accounts.google.com/o/oauth2/auth",
            "https://accounts.google.com/o/oauth2/token", 
            config.clientID, config.secret, 
            "1.0A", undefined, "HMAC-SHA1");

 googleOAuth.get('https://www.googleapis.com/drive/v2/files/list', token.access_token, token.token_secret.id_token,  function (error, data) {
  if(error){ 
    console.log(error)
  }else{ 
    console.log(data)
  }
}); 
```

在谷歌提示上单击“允许访问”后，googleOAuth.get 会记录错误

```
{"error":{"statusCode":401,"data":"{\n \"error\": {\n  \"errors\": [\n   {\n    \"domain\": \"global\",\n    \"reason\": \"authError\",\n    \"message\": \"Invalid Credentials\",\n    \"locationType\": \"header\",\n    \"location\": \"Authorization\"\n   }\n  ],\n  \"code\": 401,\n  \"message\": \"Invalid Credentials\"\n }\n}\n"}} 
```

我应该通过什么身份验证`get`来获取有效的文件列表？

使用两个身份验证库似乎很奇怪。不过，我不确定如何使用everyauth 发出签名请求。它似乎仅用于“使用”服务登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:37:58.047

1）在我的everyauth注册用户功能中，我更新了范围以包括谷歌驱动器。

```
exports.register = function register (everyauth, conf, users) {
  everyauth['google']
    .appId(conf.google.clientID)
    .appSecret(conf.google.secret)
    .scope('https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/userinfo.profile') // ADDED ADDITIONAL SCOPE VALUE HERE
    .findOrCreateUser(function (sess, token, accessTokenExtra, googleUserData) {
      var user = users.find('google', token);
      if (user) {
        return user;
      } else {
        return users.add('google', sess.id, token, accessTokenExtra, googleUserData);
      }
    })
    .redirectPath('/');
}; 
```

2）在我的请求中，我放弃了 node-oauth 并使用请求，并将访问令牌作为参数。

```
// was googleOAuth.get('http.... etc
request('https://www.googleapis.com/drive/v2/files?access_token= + token.access_token,  function (error, response, body) {
    if(error){
      callback(error, null);
    }else{
      callback(null, data);
    }
}); 
```

3）此时，我现在返回 403 错误，而不是 401 错误。

缺少的操作是根据此问题的答案[https://stackoverflow.com/a/10370391/1408316在我的控制面板中设置 Google Drive API 和 Google Drive SDK](https://stackoverflow.com/a/10370391/1408316)

# javascript - iframe 叠加 onclick 变换

> ID：12195554
> 
> 赞同：0
> 
> 时间：2012-08-30T11:10:50.313
> 
> 标签：javascript, css, iframe, onclick, transform

只是想知道我是否走在正确的轨道上......也许可以参考这个问题 [CSS Animation onClick](https://stackoverflow.com/questions/4847996/css-animation-onclick)

```
 $(#alpha).onClick(function({
    $('#alpha').addClass('.blowup');});

.blowup {
-webkit-transform: scale(1.5);
   -moz-transform: scale(1.5);
    -ms-transform: scale(1.5);
     -o-transform: scale(1.5);
        transform: scale(1.5);
} 
```

这不起作用-> [http://jsfiddle.net/HQjMc/50/](http://jsfiddle.net/HQjMc/50/) z-index 的东西？我确实有一个似乎不会影响目标 iframe 的 href onclick 覆盖...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T12:06:00.910

这是一个仅限 CSS 的解决方案：

### HTML

```
<div id='alpha'>
    <iframe src="http://time.is"></iframe>
</div>​ 
```

### CSS

```
#alpha {
    opacity:0.38;
    filter:alpha(opacity=38);

  -webkit-transition: all 0.3s ease-out; 
     -moz-transition: all 0.3s ease-out; 
       -o-transition: all 0.3s ease-out; 
          transition: all 0.3s ease-out; 

    -moz-transform:scale(0.25);
    -moz-transform-origin:0 0;
    -o-transform:scale(0.25);
    -o-transform-origin:0 0;
    -webkit-transform:scale(0.25);
    -webkit-transform-origin:0 0 
}

#alpha:hover {
    opacity:0.38;
    filter:alpha(opacity=38);

    -webkit-transform: scale(1.5);
       -moz-transform: scale(1.5);
        -ms-transform: scale(1.5);
         -o-transform: scale(1.5);
            transform: scale(1.5);
}

#alpha > iframe {
    positon:fixed;
    zoom:1;
} 
```

### 例子

[小提琴](http://jsfiddle.net/epoch/7nF2t/)_

*ps：这不适用于Internet Explorer*

​</p>

# mongodb - mongodb-架构设计

> ID：12195556
> 
> 赞同：0
> 
> 时间：2012-08-30T11:10:53.937
> 
> 标签：mongodb, schema

我使用 mongodb 作为我的后端。我有电影、音乐、书籍等的数据，我将它们存储在一个集合中。每个 bson 条目的必填字段是“_id”、“name”、“category”。其余字段取决于条目所属的类别。例如，我有一个电影记录存储之类的。

```
{
  "_id": <some_id>,
  "name": <movie_name>,
  "category": "movie",
  "director": <director_name>,
  "actors": <list_of_actors>,
  "genre": <list_of_genre>
} 
```

对于音乐，我有，

```
{
  "_id": <some_id>,
  "name": <movie_name>,
  "category": "music"
  "record_label": <label_name>
  "length": <length>
  "lyrics": <lyrics>
} 
```

现在我有 12 个不同的类别，其中只有 _id、name 和 category 是公共字段。其余的字段对于不同的类别都是不同的。我是决定将所有数据存储在一个集合中，还是应该为每个类别制作不同的集合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:05:00.740

如果您要跨类别搜索，最好使用单个集合。拥有单个集合可能会降低插入性能，但如果您没有很高的写入需求，那应该没关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T13:55:32.177

MongoDB 允许您在文档中存储任何字段结构，即使每个文档都不同，所以这不是问题。通过拥有这 3 个一致的字段，您可以将它们用作索引的一部分并处理您的查询。这是无模式数据库提供帮助的一个很好的例子，因为您可以将所有内容存储在一个集合中。

以这种方式使用单个集合不会影响性能。事实上，实际上有一个好处，因为您可以[稍后](http://docs.mongodb.org/manual/sharding/)将集合分片作为扩展策略。分片是在集合级别完成的，因此您可以基于 _id 字段进行分片以使它们均匀分布，或者使用您的类别字段为每个分片设置某些类别，甚至组合使用。

要注意的一件事是未来的查询要求。如果您确实需要索引其他字段，那么您可以使用[稀疏索引](http://docs.mongodb.org/manual/core/indexes/#sparse-indexes)，这意味着没有索引字段的文档不会在索引中，因此不会在索引中占用任何空间；一个方便的优化。

如果您进行了更新，您还[应该注意增加文档。](http://blog.serverdensity.com/mongodb-schema-design-pitfalls/)这确实会对性能产生重大影响。

# mysql - 具有列名的多列的最大值？

> ID：12195558
> 
> 赞同：4
> 
> 时间：2012-08-30T11:10:56.313
> 
> 标签：mysql, sql

我已经探索了许多关于如何从多个列中返回最大值以及列名的问题和答案。但是我还没有解决这个问题在这里这个问题会解释：

[多列的SQL MAX？](https://stackoverflow.com/questions/71022/sql-max-of-multiple-columns)

但我不知道如何找出具有最大价值的列名？有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T11:16:28.240

您可以使用[GREATEST](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_greatest)函数查找所有列中的最大值：

```
SELECT @var_max_val:= GREATEST(col1, col2, col3, ...) AS max_value,
       CASE @var_max_val WHEN col1 THEN 'col1'
                         WHEN col2 THEN 'col2'
                         ...
       END AS max_value_column_name
FROM table_name
WHERE ... 
```

# mysql - eclipse indigo中的Mysql

> ID：12195560
> 
> 赞同：0
> 
> 时间：2012-08-30T11:11:01.723
> 
> 标签：mysql, eclipse, hibernate, eclipse-plugin

我已经运行了一个 Hibernate 应用程序，它应该在其中创建一个表名并为&`Userdet`插入值。但是当我拖下 MySQL 数据库便便时，我找不到任何表已创建。但是 Hibernate 应用程序运行成功。`username``userID`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T12:42:07.383

你可能使用“create-drop”吗？当 SessionFactory 关闭时，这会导致模式被删除。如果是这样，通过 Hibernate 创建数据库的其他选项是*create*和*update*。

其他常见错误是连接数据库而不是假设和/或检查错误的模式。

# continuous-integration - 我怎样才能覆盖 TeamCity 7.1 中使用 Git 分支支持的分支名称？

> ID：12195563
> 
> 赞同：17
> 
> 时间：2012-08-30T11:11:05.930
> 
> 标签：continuous-integration, teamcity, git-branch, teamcity-7.1

我有一个 CI 构建从 Github 中提取功能分支并将它们构建/打包到本地文件夹中，使用基于项目、分支和内部版本号的文件夹命名约定。

对于命名分支（feature1，feature2），这很好用。

问题是，当我向主人提交时，TeamCity 将 teamcity.build.branch 公开为`<default>`- 这意味着当构建步骤扩展时

`E:\Packages\MyProject\%teamcity.build.branch%\`

它以`E:\Packages\MyProject\<default>`- 结束，然后使构建步骤崩溃，因为它不是有效的 Windows 路径。

我*可以*在完全限定的构建参数中看到主分支名称：

```
teamcity.build.branch                         <default>
teamcity.build.checkoutDir                    C:\TeamCity\BuildAgents\agent-mulder\work\2151838a7933464d
teamcity.build.default.checkoutDir            2151838a7933464d
teamcity.build.id                             16347
teamcity.build.vcs.branch.github_myproject    refs/heads/master 
```

但理想情况下，我需要将**master**作为 teamcity.build.branch 用于我的构建步骤。

我可以在运行时转换参数吗？覆盖行为？我什至尝试将 VCS 分支名称设置为 DO_NOT_USE，希望“master”不再与默认值匹配——但这似乎也不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-13T13:55:55.123

在 teamcity 7 中，返回开发的只是 %vcsroot.branch%。

就我而言，我有

```
%MajorVersion%.%MinorVersion%.%PatchVersion%-%vcsroot.branch% 
```

这些都在构建参数中设置。数字格式是 %BuildFormatSemVer% 这是上面的东西和 . {0}

```
%BuildFormatSemVer%.{0} 
```

哪个返回

```
#1.0.0-develop.4 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T08:36:39.243

不理想，但我能够通过在 git 中创建一个名为“teamcity”的新分支并将其设置为 TeamCity 中的默认分支来解决它，它似乎要求该分支实际存在，因为它在我创建分支时工作，但当您输入假名时没有。

希望他们真的解决了这个问题，因为这绝对是一个 hack。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T14:18:08.757

我们在创建管道时多次遇到这个问题。当尝试使用 Gitflow 工作流自动构建功能和发布分支时，它是最明显的。我们能够做的是在我们希望使用它的时候使用`teamcity.build.vcs.branch.github_myproject`一个正则表达式来清理字符串。`sed`这主要是为了调试目的给工件加水印。

更大的问题，至少对我们来说，是 TeamCity 7.1.1 版本不会自动触发任何不是 VCS 根中默认构建的依赖构建。显然这是一个巨大的痛点，因为我们现在将不得不在工具中手动单击。除了使用 HTTP API 调用正确构建步骤的 git 中的钩子之外，我们还没有想出一个干净的方法来解决这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-12T00:56:02.047

我不知道这是否以前被回答过，或者不再相关。

在 TeamCity 10.0.2 中创建自定义参数，例如 %Git.Reference%。如果您需要从 TC 拉（或推）到 git，请将其设置为“ref/head/Dev”或“ref/Head/yourbranch”。在您的“VCS 根”参考中使用它。

# php - PHP海量文件拷贝

> ID：12195564
> 
> 赞同：0
> 
> 时间：2012-08-30T11:11:07.747
> 
> 标签：php, batch-file

如果我有一个名为 file.html 的文件，我如何通过 PHP 对该文件进行 10 个克隆，以便将它们重命名为 file1....file10？

```
$filename = 'file.html'
$copyname = 'file2.html'
if ($file = @fopen($copyname, 'x')) {
    // We've successfully created a file, so it's ours.  We'll close
    // our handle.
    if (!@fclose($file)) {
        // There was some problem with our file handle.
        return false;
    }

    // Now we copy over the file we created.
    if (!@copy($filename, $copyname)) {
        // The copy failed, even though we own the file, so we'll clean
        // up by itrying to remove the file and report failure.
        unlink($copyname);
        return false;
    }

    return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T11:13:31.060

小文件方法：这允许您在保存文件之前对文件的内容做一些事情：

```
$text = file_get_contents('file.html');
for($i = 0; $i < 100; $i++) {
    file_put_contents('file'.$i.'.html', $data);
} 
```

更大的文件方法：这不允许您在保存文件之前访问文件的内容，它只告诉底层操作系统进行复制（相当于 linux bash 命令`cp file.html file1.html`）：

```
for($i = 0; $i < 100; $i++) {
    copy('file.html', 'file'.$i.'.html');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:13:41.143

只需循环运行您的代码：

```
$filename = 'file.html'
for($i=1; $i<=10; $i++) {
    $copyname = "file$i.html";
    copy($filename, $copyname);
} 
```

随意添加错误检查和处理。

# ruby-on-rails - Rails3 activerecord 连接不能返回连接表中的值？

> ID：12195565
> 
> 赞同：2
> 
> 时间：2012-08-30T11:11:08.953
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我已经关联了两个模型问题和答案，问题模型有很多答案，所以我的查询是

```
Question.joins("inner join answers on questions.correct_answer_id = answers.id").select("answers.answer")

SELECT answers.answer FROM `questions` inner join answers on questions.correct_answer_id = answers.id 
```

在 mysql 查询中返回正确答案，但为什么是 rails？我只有

```
[#<Question >, #<Question >] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T07:11:49.603

如果您选择使用 Question 模型，您将获得一个模仿 Question 模型的结果集。当您加入答案时-您将获得其中包含答案值的对象-但它们（在外部）仍然看起来像问题模型...因为这就是您在技术上要求的（称为“问题。 ...”）。

要获得实际的 Answer 对象，您可以翻转查询并执行以下操作：

```
Answer.joins("inner join questions on questions.correct_answer_id = answers.id").select("answers.answer") 
```

（根据需要调整 - 此代码未经测试）。

或者您可以按照 sumiskyi 的建议进行操作，并将调用添加到实际列中：

```
 Question.joins("inner join answers on questions.correct_answer_id = answers.id").select("answers.answer").map(&:answer) 
```

因为该列应该隐藏在那个空的 Question 模型上，即使您在顶层看不到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T11:24:26.687

`[#<Question >, #<Question >]`只是数组`inspect`，每个元素都应该有一个`answer`方法。

----- 已编辑

您还需要从问题表中选择字段

```
Question.joins("inner join answers on questions.correct_answer_id = answers.id").
  select("questions.*, answers.answer") 
```

# postgresql - Heroku 的进化错误

> ID：12195568
> 
> 赞同：6
> 
> 时间：2012-08-30T11:11:42.350
> 
> 标签：postgresql, heroku, playframework, playframework-2.0

我尝试将一些演变推向 Heroku：

```
2012-08-30T10:58:00+00:00 heroku[slugc]: Slug compilation finished
2012-08-30T10:58:02+00:00 heroku[web.1]: Starting process with command `target/start -Dhttp.port=32436 -Xmx384m -Xss512k
 -XX:+UseCompressedOops`
2012-08-30T10:58:03+00:00 app[web.1]: Play server process ID is 2
2012-08-30T10:58:05+00:00 app[web.1]: [←[37minfo←[0m] play - database [default] connected at [Database-address]
2012-08-30T10:58:05+00:00 app[web.1]: CREATE TABLE `unapprovedteaminfo` (
---
Copy of 1.sql
---
2012-08-30T10:58:05+00:00 app[web.1]: VALUES (1, 2, 2, '2012-01-01 00:00:00', 'k');
2012-08-30T10:58:05+00:00 app[web.1]: ERROR: syntax error at or near "`"
2012-08-30T10:58:05+00:00 app[web.1]:   Position: 14 [ERROR:0, SQLSTATE:42601]
2012-08-30T10:58:05+00:00 app[web.1]: Oops, cannot start the server.
2012-08-30T10:58:05+00:00 app[web.1]: PlayException: Database 'default' is in inconsistent state! [An evolution has not
been applied properly. Please check the problem and resolve it manually before marking it as resolved.]
2012-08-30T10:58:05+00:00 app[web.1]:   at play.api.db.evolutions.Evolutions$.checkEvolutionsState(Evolutions.scala:155)

2012-08-30T10:58:05+00:00 app[web.1]:   at play.api.db.evolutions.Evolutions$.databaseEvolutions(Evolutions.scala:308)
2012-08-30T10:58:05+00:00 app[web.1]:   at play.api.db.evolutions.Evolutions$.evolutionScript(Evolutions.scala:284)
2012-08-30T10:58:05+00:00 app[web.1]:   at play.api.db.evolutions.EvolutionsPlugin$$anonfun$onStart$1.apply(Evolutions.s
cala:412)
2012-08-30T10:58:05+00:00 app[web.1]:   at play.api.db.evolutions.EvolutionsPlugin$$anonfun$onStart$1.apply(Evolutions.s
cala:410)
2012-08-30T10:58:05+00:00 app[web.1]:   at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59
)
2012-08-30T10:58:05+00:00 app[web.1]:   at scala.collection.immutable.List.foreach(List.scala:45)
2012-08-30T10:58:05+00:00 app[web.1]:   at play.api.db.evolutions.EvolutionsPlugin.onStart(Evolutions.scala:410)
2012-08-30T10:58:05+00:00 app[web.1]:   at play.api.Play$$anonfun$start$1.apply(Play.scala:60)
2012-08-30T10:58:05+00:00 app[web.1]:   at play.api.Play$$anonfun$start$1.apply(Play.scala:60)
2012-08-30T10:58:05+00:00 app[web.1]:   at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59
)
2012-08-30T10:58:05+00:00 app[web.1]:   at scala.collection.immutable.List.foreach(List.scala:45)
2012-08-30T10:58:05+00:00 app[web.1]:   at play.api.Play$.start(Play.scala:60)
2012-08-30T10:58:05+00:00 app[web.1]:   at play.core.StaticApplication.<init>(ApplicationProvider.scala:51)
2012-08-30T10:58:05+00:00 app[web.1]:   at play.core.server.NettyServer$.createServer(NettyServer.scala:132)
2012-08-30T10:58:05+00:00 app[web.1]:   at play.core.server.NettyServer$$anonfun$main$5.apply(NettyServer.scala:153)
2012-08-30T10:58:05+00:00 app[web.1]:   at play.core.server.NettyServer$$anonfun$main$5.apply(NettyServer.scala:152)
2012-08-30T10:58:05+00:00 app[web.1]:   at scala.Option.map(Option.scala:133)
2012-08-30T10:58:05+00:00 app[web.1]:   at play.core.server.NettyServer$.main(NettyServer.scala:152)
2012-08-30T10:58:05+00:00 app[web.1]:   at play.core.server.NettyServer.main(NettyServer.scala)
2012-08-30T10:58:06+00:00 heroku[web.1]: Process exited with status 255
2012-08-30T10:58:06+00:00 heroku[web.1]: State changed from starting to crashed 
```

这些演变与 H2 配合得很好，我想 POSTGRESQL 语法一定有一些问题。无论如何，我现在遇到的问题是，即使我更改 1.sql 并在 Heroku 上推送新版本，日志中也会出现相同的错误 - 复制的 1.sql 不会根据新推送的版本而更改.

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-30T12:25:48.607

如果您要发送到为 `1.sql`生成的 Heroku 文件`H2`，它们很有可能会发生冲突，相反，请将 Heroku 的 url 设置为`application.conf`as`db.default.url`并首先在本地主机上以 dev 模式运行它以生成有效的 Postres SQL。此外，您还需要注释掉`db.default.user`和`db.default.password`设置，因为 Heroku 的 URL 已经包含此信息。

如果您不知道当前连接的 URL，您可以在以下位置找到它：

[https://postgres.heroku.com/](https://postgres.heroku.com/) -> `YourDBs`->*数据库名称*-> `Connection settings`->`JDBC URL`

要从 localhost（或其他机器，不在 Heroku 的空间）连接，您需要将此参数添加到 URL：

```
&ssl=true&sslfactory=org.postgresql.ssl.NonValidatingFactory 
```

多亏了这种方法，您可以在本地测试您的应用程序，并建立与远程 Heroku 数据库的连接，（不要感到惊讶 - 这种组合将比使用`local app + local DB`or慢得多`Heroku app + Heroku DB`）无论如何测试它比重复将小修复推送到云更好.

此外，您将能够从 localhost 执行进化 - 无需将代码推送到 Heroku，如果您的 SQL 有问题，这确实是一种更短的方法。

此外，这是在本地开发模式下打开 SQL 日志记录并寻找冗余 SQL 查询的好时机，如果您将删除所有不必要的查询并在 localhost 上感到满意，那么在部署到 Heroku 后，您会更加满意： )

### 重置

如果您将创建正确的`1.sql`文件，那么您很可能需要重置包含无效结构的数据库（因为我认为这还不是问题，因为您只是从本地移动到 Heroku）。首先找到当前应用程序的数据库名称（使用 bash，在应用程序的文件夹中）：

```
heroku pg 
```

然后重置它（它会破坏所有数据，因此如果您不想丢失数据，请先考虑备份！）：

```
heroku pg:reset HEROKU_DATABASE_SOMEBASE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-30T14:44:18.293

我认为您对 VALUES 中数据时间字段的定义有一些问题。我发布了我的 play 2.4、Slick 3.0.3 和 postgres 的工作演变配置设置。我自动生成了放在进化文件夹中的 *.sql 文件。

[在游戏 2 中重新生成进化脚本](https://stackoverflow.com/questions/10806926/regenerate-evolution-scripts-in-play-2/33438552#33438552)

干杯

# android - 需要帮助修复我的课程：“这个处理程序类应该是静态的，否则可能会发生泄漏”

> ID：12195569
> 
> 赞同：1
> 
> 时间：2012-08-30T11:11:46.280
> 
> 标签：android

我创建了一个简单的淡入淡出图像类以在我的应用程序中使用。但是...由于缺乏知识，我有一个无法修复的错误。我发现这篇文章[这个处理程序类应该是静态的，否则可能会发生泄漏：IncomingHandler](https://stackoverflow.com/questions/11407943/this-handler-class-should-be-static-or-leaks-might-occur-incominghandler)但我不知道如何在我的类中解决这个问题。这是一个非常简单的课程。创建、初始化并开始使用它。

我希望有人可以帮助我解决此警告，并且在我们处理此警告时，也非常欢迎对我的代码或评论提供一些提示和提示；）

MainActivity.java

```
package com.example.crossfadeimage;

import android.app.Activity;
import android.os.Bundle;

public class MainActivity extends Activity {

    Xfade xfade = new Xfade();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // INIT(current activity, image id's, time between fades, fade speed)
        xfade.init(this, new int[]{ R.id.image1, R.id.image2, R.id.image3 }, 3000, 500);
        xfade.start();

    }

} 
```

Xfade.java

```
package com.example.crossfadeimage;

import android.app.Activity;
import android.os.Handler;
import android.os.Message;
import android.view.animation.AlphaAnimation;
import android.view.animation.Animation;
import android.widget.ImageView;

public class Xfade {

    private Activity activity;

    // Handler
    private Handler handlerTimer = new Handler();
    private static final int UPDATE_STUFF_ON_DIALOG = 999;
    private int updateTime;

    private Animation fadeIn;
    private Animation fadeOut;

    public int[] xfadeImages;

    public int xfadeCounter = 1;

    public void init(Activity thisActivity, int[] images, int time,
            int animationSpeed) {

        activity = thisActivity;
        xfadeImages = images;
        updateTime = time;

        // Set Animations
        fadeIn = new AlphaAnimation(0, 1);
        fadeIn.setDuration(animationSpeed);

        fadeOut = new AlphaAnimation(1, 0);
        fadeOut.setDuration(animationSpeed);

        // Hide all images except the first
        // which is always visible
        for (int image = 1; image < xfadeImages.length; image++) {

            ImageView thisImage = (ImageView) activity
                    .findViewById(xfadeImages[image]);
            thisImage.setVisibility(4);

        }

    }

    public void start() {

        handlerTimer.removeCallbacks(taskUpdateStuffOnDialog);
        handlerTimer.postDelayed(taskUpdateStuffOnDialog, updateTime);

    }

    private Runnable taskUpdateStuffOnDialog = new Runnable() {
        public void run() {

            Message msg = new Message();
            msg.what = UPDATE_STUFF_ON_DIALOG;
            handlerEvent.sendMessage(msg);

            // Repeat this after 'updateTime'
            handlerTimer.postDelayed(this, updateTime);
        }
    };

    private Handler handlerEvent = new Handler() {

        @Override
        public void handleMessage(Message msg) {
            switch (msg.what) {
            case UPDATE_STUFF_ON_DIALOG: {
                crossFade();
            }
                break;
            default: {
                super.handleMessage(msg);
            }
                break;
            }
        }
    };

    public void crossFade() {

        if (xfadeCounter == 0) {
            ImageView lastImage = (ImageView) activity
                    .findViewById(xfadeImages[xfadeImages.length - 1]);
            lastImage.setVisibility(4);
        }

        if (xfadeCounter < xfadeImages.length) {

            ImageView thisImage = (ImageView) activity
                    .findViewById(xfadeImages[xfadeCounter]);
            thisImage.setVisibility(0);
            thisImage.startAnimation(fadeIn);

            xfadeCounter++;

        } else {

            // Hide all images except the first
            // before fading out the last image
            for (int image = 1; image < xfadeImages.length; image++) {

                ImageView thisImage = (ImageView) activity
                        .findViewById(xfadeImages[image]);
                thisImage.setVisibility(4);

            }

            // Fadeout
            ImageView lastImage = (ImageView) activity
                    .findViewById(xfadeImages[xfadeImages.length - 1]);
            lastImage.startAnimation(fadeOut);

            // LastImage is faded to alpha 0 so it doesn't have to be hidden
            // anymore
            xfadeCounter = 1;

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T11:22:38.280

这允许您修改视图并将处理程序设置为静态。

```
package com.testing.test;

import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.widget.TextView;

public class MainActivity extends Activity implements Runnable {

    private static final int THREAD_RESULT = 1000;

    private TextView mTextView;

    private static Handler mHandler;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mTextView = (TextView) findViewById(R.id.text);
    }

    @Override
    protected void onResume() {
        super.onResume();
        mHandler = new CustomHandler(this);
        new Thread(this).start();
    }

    @Override
    public void run() {

        // Do some threaded work

        // Tell the handler the thread is finished
        mHandler.post(new Runnable() {

            @Override
            public void run() {
                mHandler.sendEmptyMessage(THREAD_RESULT);
            }
        });
    }

    private class CustomHandler extends Handler {

        private MainActivity activity;

        public CustomHandler(MainActivity activity) {
            super();
            this.activity = activity;
        }

        @Override
        public void handleMessage(Message msg) {
            switch (msg.what) {
            case THREAD_RESULT:
                activity.mTextView.setText("Success!");
                break;
            }
        }

    }

} 
```

# asp.net - Asp.Net Web Api - 发布英国日期格式

> ID：12195570
> 
> 赞同：8
> 
> 时间：2012-08-30T11:11:46.487
> 
> 标签：asp.net, asp.net-web-api, date-format

我希望我的用户能够以英国格式将日期发布到 asp.net web api 控制器，例如 2012 年 1 月 12 日（2012 年 12 月 1 日）。

据我所知，默认情况下，只接受 us 格式。

我可以在某处更改某些内容以使英国格式成为默认格式吗？我尝试更改 web.config 中的全球化设置，但这没有效果。

保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T13:03:50.907

使用自定义模型绑定器完成此操作，这与 MVC3 中的模型绑定器略有不同：

```
public class DateTimeModelBinder : IModelBinder
    {

        public bool BindModel(HttpActionContext actionContext, ModelBindingContext bindingContext)
        {
            var date = bindingContext.ValueProvider.GetValue(bindingContext.ModelName).AttemptedValue;

            if (String.IsNullOrEmpty(date))
                return false;

            bindingContext.ModelState.SetModelValue(bindingContext.ModelName, bindingContext.ValueProvider.GetValue(bindingContext.ModelName));
            try
            {
                bindingContext.Model = DateTime.Parse(date);
                return true;
            }
            catch (Exception)
            {
                bindingContext.ModelState.AddModelError(bindingContext.ModelName, String.Format("\"{0}\" is invalid.", bindingContext.ModelName));
                return false;
            }
        }
    } 
```

在我的 Global.asax.cs 文件中，添加这一行以告诉 api 将此模型绑定器用于 DateTime 值：

```
GlobalConfiguration.Configuration.BindParameter(typeof(DateTime), new DateTimeModelBinder()); 
```

这是我的 api 控制器中的方法：

```
public IList<LeadsLeadRowViewModel> Get([ModelBinder]LeadsIndexViewModel inputModel) 
```

我的 LeadsIndexViewModel 类有几个 DateTime 属性，它们现在都是有效的英国日期时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-03T13:06:23.050

好吧，我还想在全球范围内解决这个问题……并在此过程中扯掉了很多头发。事实证明，WebApi 中没有扩展点，人们希望拦截传入的表单数据并根据需要对其进行修改。那不是很好吗。因此，缺少这些，我尽可能深入地研究 WebApi 源代码，看看我能想出什么。我最终重用了负责解析表单数据的类来创建模型。我只添加了几行来专门处理日期。下面的那个类可以像这样添加到配置中：

```
 private static void PlaceFormatterThatConvertsAllDatesToIsoFormat(HttpConfiguration config)
  {
             config.Formatters.Remove(
                 config.Formatters.FirstOrDefault(x => x is JQueryMvcFormUrlEncodedFormatter));

             config.Formatters.Add(
                 new IsoDatesJQueryMvcFormUrlEncodedFormatter());
} 
```

格式化程序：

```
using System;
using System.Collections.Generic;
using System.Globalization;
using System.IO;
using System.Net.Http;
using System.Net.Http.Formatting;
using System.Threading.Tasks;
using System.Web.Http.ModelBinding;

namespace WebApi.Should.Allow.You.To.Set.The.Binder.Culture
{
    // This class replaces WebApi's JQueryMvcFormUrlEncodedFormatter 
    // to support JQuery schema on FormURL. The reasong for this is that the 
    // supplied class was unreliable when parsing dates european style.
    // So this is a painful workaround ...
    /// <remarks>
    /// Using this formatter any string that can be parsed as a date will be formatted using ISO format
    /// </remarks>
    public class IsoDatesJQueryMvcFormUrlEncodedFormatter : FormUrlEncodedMediaTypeFormatter
    {

        // we *are* in Israel
        private static readonly CultureInfo israeliCulture = new CultureInfo("he-IL");

        public override bool CanReadType(Type type)
        {
            if (type == null)
            {
                throw new ArgumentNullException("type");
            }
            return true;
        }

        public override Task<object> ReadFromStreamAsync(Type type
            , Stream readStream
            , HttpContent content
            , IFormatterLogger formatterLogger)
        {
            if (type == null)
            {
                throw new ArgumentNullException("type");
            }

            if (readStream == null)
            {
                throw new ArgumentNullException("readStream");
            }

            // For simple types, defer to base class
            if (base.CanReadType(type))
            {
                return base.ReadFromStreamAsync(type, readStream, content, formatterLogger);
            }

            var result = base.ReadFromStreamAsync(
                                typeof(FormDataCollection), 
                                readStream, 
                                content, 
                                formatterLogger);

            Func<object, object> cultureSafeTask = (state) =>
            {
                var innterTask = (Task<object>)state;
                var formDataCollection = (FormDataCollection)innterTask.Result;
                var modifiedCollection = new List<KeyValuePair<string, string>>();

                foreach (var item in formDataCollection)
                {
                    DateTime date;
                    var isDate =
                        DateTime.TryParse(item.Value,
                                            israeliCulture,
                                            DateTimeStyles.AllowWhiteSpaces,
                                            out date);

                    if (true == isDate)
                    {
                        modifiedCollection.Add(
                            new KeyValuePair<string, string>(
                                item.Key,
                                date.ToString("o")));
                    }
                    else
                    {
                        modifiedCollection.Add(
                            new KeyValuePair<string, string>(
                                item.Key,
                                item.Value));
                    }
                }

                formDataCollection = new FormDataCollection(modifiedCollection);

                try
                {
                    return
                        formDataCollection.ReadAs(type, String.Empty, RequiredMemberSelector, formatterLogger);
                }
                catch (Exception e)
                {
                    if (formatterLogger == null)
                    {
                        throw;
                    }

                    formatterLogger.LogError(String.Empty, e);

                    return GetDefaultValueForType(type);
                }
            };

            return
                Task.Factory.StartNew(
                cultureSafeTask
                            , result);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T11:21:28.343

这里有一个将 jQuery 日期选择器本地化为 en-gb 的示例：[http ://weblogs.asp.net/hajan/archive/2010/10/05/integration-of-jquery-datepicker-in-asp-net-website -localization-part-3.aspx](http://weblogs.asp.net/hajan/archive/2010/10/05/integration-of-jquery-datepicker-in-asp-net-website-localization-part-3.aspx)

另外，我看到您尝试将文化设置为 en-GB，但我不知道您是否尝试在 Web.Config 中设置 UI 文化（而且我不知道这是否会影响 MVC 中的 jQuery 包):

```
<globalization requestEncoding="utf-8" responseEncoding="utf-8" culture="en-GB" uiCulture="en-GB"/> 
```

...或者如果这不起作用（呵呵），为什么不将值作为字符串传递，然后在您的 api 控制器中解析它：

```
using System.Globalization;

// fetch the en-GB culture
CultureInfo ukCulture = new CultureInfo("en-GB");
// pass the DateTimeFormat information to DateTime.Parse
DateTime myDateTime = DateTime.Parse("StringValue" ,ukCulture.DateTimeFormat); 
```

# android - 将 Nextbook next7p12 平板电脑与 PC 连接

> ID：12195573
> 
> 赞同：1
> 
> 时间：2012-08-30T11:12:04.937
> 
> 标签：android, android-emulator

我带来了 Nextbook Premium 7se 平板电脑来测试 Android 应用程序。我连接了电脑并在设置中打开了调试模式，但我无法连接 eclipse 来测试我所有正在开发的应用程序。而且平板电脑没有驱动软件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T10:14:06.083

发现没有连接eclipse的选项。如果没有驱动程序软件，我们无法将任何设备与 eclipse 和关于 Nextbook 连接，即使该公司没有证明驱动程序适用于 windows 或用于调试。所以最好导出APK并通过复制到手机内存来安装它。

# .net - 如何让 While 活动在 WF 4.0 中异步运行

> ID：12195578
> 
> 赞同：2
> 
> 时间：2012-08-30T11:12:15.270
> 
> 标签：.net, workflow-foundation-4

我正在使用 WF 4.0 构建工作流。工作流是使用重新托管的工作流设计器构建的。我写了一个名为`FetchSqlDataReader`继承的自定义活动`AsyncCodeActivity`。

的多个实例`FetchSqlDataReader`在一个`Parallel`活动中。

每个实例都执行一个存储过程并返回 a`SqlDataReader`作为其输出参数。

我想迭代每个数据读取器（并行）并在每次迭代期间执行更多活动。

我尝试使用[AsyncNativeActivity](http://blogs.msdn.com/b/tilovell/archive/2011/06/09/wf4-they-have-asynccodeactivity-why-not-asyncnativeactivity.aspx)。我创建了一个自定义活动，它继承了`AsyncNativeActivity`. 在`BeginExecute`我的 custom 部分`WhileAsyncNativeActivity`，我执行以下操作：

```
while(context.GetValue(Condition))
{
    context.ScheduleAction(Body);
} 
```

`Condition``InArgument<Boolean>`是设置为 的类型`while(dataReader.Read())`。
`context`是类型`NativeActivityContext`
`Body`是类型`ActivityAction`。包含我在重新托管的工作流设计器中拖放的其他活动

。`Body`

这里的想法是只要数据读取器获取值，执行`Body`（所有活动`WhileAsyncNativeActivity`）

我发现`context.ScheduleAction(Body)`只调用时间表（喘气:)） Body 而不会执行它。

如果我的数据阅读器有 1000 行，在条件迭代调用几次`OutOfMemory`后我会得到一个异常。`while``context.ScheduleAction`

如何让 While 活动异步执行？有没有办法我可以调用`ScheduleAction`然后立即执行该操作（我猜不是因为 WF 引擎负责活动执行）。我也试过打电话，`ScheduleActivity`也失败了`OutOfMemory`

在我找到一种方法开始`WhileAsyncNativeActivity`工作之前，我将数据阅读器传递给一个自定义活动，从`AsyncCodeActivity`该活动派生的活动将在内部执行阅读器的迭代，然后通过反射加载一些程序集并通过将它们传递给数据阅读器来调用它们的方法. 然而，这意味着在这些函数中编写的代码在程序集中，不能作为最终用户可以使用工作流设计器配置的活动公开。

我不能做的事情：

1.  无法使用数据集。正在检索的数据量很大（超过 500,000 行数据） - 每个存储过程，我正在并行执行其中的 6 个。

2.  因为我依赖于`SqlDataReader`我无法将我的数据转换为`IEnumerable`集合，这意味着我无法使用`ParallelForEach`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:59:26.847

您不能创建一个列表，然后将 ParallelFor 与异步活动结合使用来处理该列表吗？

# ios - 嵌入 html5 的网站上的 MP4 视频无法在 iOS 上播放

> ID：12195581
> 
> 赞同：1
> 
> 时间：2012-08-30T11:12:24.187
> 
> 标签：ios, html, ffmpeg, mp4

所以我的网站上有几个视频是我用 iPhone 4 拍摄的，然后转换为 mp4、webm 和 ogg，这样我就可以在 html5 中使用它们。问题是，该视频根本无法在我测试的 4 台 iOS 设备上播放，也不能在 Android 版 Chrome 上播放。

Chrome 问题可能是因为某些 mp4 实际上是 m4v 文件，但在将视频手刹编码到 iphone 4 presset 并以 mp4 格式编码后，它仍然无法播放。

你问会发生什么？好吧，它显示播放按钮被一个对角线划掉，Safari 上的调试控制台不会显示任何消息，直到我尝试直接访问视频。然后它说：无法播放 QuickTime 电影。

我能做些什么？我一直在尝试使用 ffmpeg 进行编码，尝试了一些不同的解决方案，有些甚至在 stackoverlow 上找到了，但无济于事。视频在显示尺寸和 MB 方面确实变短了，但没有任何方法可以解决手头的问题。

几个星期以来，我一直在努力纠正这个问题。欢迎任何帮助和/或建议。

谢谢你。

顺便说一句，所有视频都在网站的注册用户部分，但我在主页上有一个用于调试的视频，所以请随意测试。

[https://sidnerwebsite.sytes.net](https://sidnerwebsite.sytes.net)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T11:50:52.457

该问题似乎是由于 iOS 需要 iOS 信任的中间证书才能通过 SSL 连接播放视频引起的。禁用将网站重新路由到其 ssl 对应项后，视频会在 iOS 上正确显示。

# java - 如何确定哪个类通过 System.out 发送消息

> ID：12195583
> 
> 赞同：2
> 
> 时间：2012-08-30T11:12:43.697
> 
> 标签：java

例如，我有一个重定向的应用程序`System.out`；

```
 System.setOut(new PrintStream(System.out){
    @Override
    public void print(String string)
    {
      //TODO: find out who sent the print before processing string
    }
  }); 
```

我希望能够确定哪个类将打印调用发送到标准输出？我认为这是不可能的，但除非`SO`这样说，否则不能完全得出结论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T11:24:52.243

获取[堆栈](http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html#getStackTrace%28%29)跟踪并从当前索引中找到类名。

```
StackTraceElement[] trace = Thread.currentThread().getStackTrace(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T11:19:41.010

您可以抛出异常，并检查堆栈跟踪。显然不适合生产代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T11:27:43.613

如果您有最新版本的 HotSpot 或 OpenJDK，您可以使用`Reflection.getCallerClass(2 or 3)`这比生成完整堆栈跟踪更有效，但不可移植。

否则，获取堆栈跟踪的最有效方法是

```
StackTraceElement[] stes = Thread.currentThread.getStackTrace(); 
```

这样可以避免创建 Exception 或 Throwable。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T11:25:04.583

有很多方法：SecurityManager 可能是最好的。检查这篇文章，尤其是第二个答案：[如何使用堆栈跟踪或反射找到方法的调用者？](https://stackoverflow.com/questions/421280/in-java-how-do-i-find-the-caller-of-a-method-using-stacktrace-or-reflection)

# c++ - g++编译错误

> ID：12195584
> 
> 赞同：0
> 
> 时间：2012-08-30T11:12:45.490
> 
> 标签：c++, compiler-errors

所以我有这个非常基本的 OOP 示例，我想在 Xubuntu 中编译它，但我得到了错误

CThermo.h 文件

```
class CThermo
{
public:
    void SetTemp(int newTemp);
    int ReturnTemp();
    void ChangeTemp(int deltaTemp);
private:
    int m_temp;
}; 
```

CThermo.cpp 文件

```
#incude "CThermo.h"

void CThermo::SetTemp(int newTemp)
{
    m_temp = newTemp;
}

int CThermo::ReturnTemp()
{
    return m_temp;
}
void CThermo::ChangeTemp(int deltaTemp)
{
    m_temp += deltaTemp;
} 
```

main.cpp 文件

```
#include "CThermo.h"
#include <iostream>
using std::cout;

int main()
{
    CThermo roomTemp;

    roomTemp.SetTemp(20);
    cout << "the temp is : "<< roomTemp.ReturnTemp() << "\n";
    roomTemp.ChangeTemp(5);
    cout << "after changing the temp, the room temp is : " << roomTemp.ReturnTemp();
    cout << "test";
    return 0;
} 
```

编译的命令是“g++ main.cpp -o Main”，这是我得到的错误

```
/tmp/ccXajxEY.o: In function `main':
main.cpp:(.text+0x1a): undefined reference to `CThermo::SetTemp(int)'
main.cpp:(.text+0x26): undefined reference to `CThermo::ReturnTemp()'
main.cpp:(.text+0x6c): undefined reference to `CThermo::ChangeTemp(int)'
main.cpp:(.text+0x78): undefined reference to `CThermo::ReturnTemp()'
collect2: error: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T11:14:40.423

您必须使用以下命令编译 main.cpp 和 CThermo.cpp：

`g++ CThermo.cpp main.cpp -o Main`

# xml - XSLT - 重新排序逗号分隔的字符串

> ID：12195587
> 
> 赞同：1
> 
> 时间：2012-08-30T11:12:51.307
> 
> 标签：xml, xslt, sorting, xslt-2.0

我希望有人能够提供帮助。我有一个逗号分隔的字符串，例如`A10,A12,A11,S10,S11,S12`This need to be reordered to`S10,A10,S11,A11,S12,A12`

订购标准如下，

*   S 在 A 之前
*   年份按顺序递增，因此 9 之前 10 之前 11 之前 12 之前 13 等等......

因此，对于以下输入 XML：

```
<root>
    <row>A10,A12,A11,S10,S11,S12</row>
</root> 
```

期望的输出：

```
<root>
    <row>S10,A10,S11,A11,S12,A12</row>
</root> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T12:28:31.580

在 2.0 中：

```
<xsl:perform-sort select="tokenize(row, ',')">
  <xsl:sort select="xs:integer(substring(., 2))"/>
  <xsl:sort select="substring(., 1, 1)" order="descending"/>
</xsl:perform-sort> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T12:30:56.477

**请注意**：

此问题中的要求不涵盖某些可能的输入，因此，两个当前的解决方案 - Michael Kay 和此解决方案 - 可能会产生不同的结果。

前者产生的结果总是按数字排序（并且可能违反交替`S`的`A`要求。

`S`此解决方案产生的结果`A`总是按此顺序交替，但可能并不总是满足数字排序要求。

**示例 1**：

```
A8,A10,A12,A11,S9,S10,S11,S12 
```

**Michael Kay 的解决方案产生**：

```
A8,S9,S10,A10,S11,A11,S12,A12 
```

这里没有满足“S 总是在 A（交替）之前”的要求

**当前的解决方案产生**：

```
S9,A8,S10,A10,S11,A11,S12,A12 
```

这里满足了交替要求，但没有满足数字排序要求。

* * *

**这种转变**：

```
<xsl:stylesheet version="2.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema" exclude-result-prefixes="xs">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

    <xsl:variable name="vTokens" select="tokenize(/*/row, ',')"/>

    <xsl:variable name="vASeq" as="xs:string*">
     <xsl:perform-sort select="$vTokens[starts-with(.,'A')]">
      <xsl:sort select="substring(.,2)" data-type="number"/>
     </xsl:perform-sort>
    </xsl:variable>

    <xsl:variable name="vSSeq" as="xs:string*">
     <xsl:perform-sort select="$vTokens[starts-with(.,'S')]">
      <xsl:sort select="substring(.,2)" data-type="number"/>
     </xsl:perform-sort>
    </xsl:variable>

 <xsl:template match="/">
     <root>
      <row>
        <xsl:sequence select=
        "string-join(
                     (for $i in 1 to count($vSSeq)
                        return
                          ($vSSeq[$i], $vASeq[$i])
                      ),
                      ','
                           )
        "/>
      </row>
     </root>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<root>
    <row>A10,A12,A11,S10,S11,S12</row>
</root> 
```

**产生想要的正确结果：**

```
<root>
   <row>S10,A10,S11,A11,S12,A12</row>
</root> 
```

# java - 将 dd-MMM-yyyy 转换为 MM/dd/yyyy 格式

> ID：12195588
> 
> 赞同：2
> 
> 时间：2012-08-30T11:12:52.050
> 
> 标签：java, sql-server

我的日期字符串为“02-SEP-2012”。我想将其转换为 8/02/2012 格式。

```
String deliverydate="02-SEP-2012";
SimpleDateFormat sdf=new SimpleDateFormat("MM/dd/yyyy");

Date date=sdf.parse(deliveryDate); 
```

这给了我

```
java.text.ParseException: Unparseable date: "01-Sep-2012" 
```

如何解析这个？我想在 MS SQL 中插入这个日期。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T11:18:17.833

# 2018/Java 10

```
String deliverydate="02-SEP-2012";
DateTimeFormatter formatter = new DateTimeFormatterBuilder()
                .parseCaseInsensitive()
                .appendPattern("dd-MMM-yyyy")
                .toFormatter(Locale.UK);
LocalDate ld = LocalDate.parse(deliverydate, formatter);
System.out.println(ld); 
```

# 原始答案

查看两个字符串，`02-SEP-2012`并且`MM/dd/yyyy`- 它们的格式不同。

日期解析器期望字符串与格式化程序的格式相同

```
String deliverydate="02-SEP-2012";
SimpleDateFormat sdf=new SimpleDateFormat("dd-MMM-yyyy");

Date date=sdf.parse(deliveryDate);

sdf=new SimpleDateFormat("MM/dd/yyyy");
System.out.println(sdf.format(date)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T11:16:07.443

你应该使用：

```
SimpleDateFormat sdf = new SimpleDateFormat("dd-MMM-yyyy");
Date date = sdf.parse(deliveryDate); 
```

然后重新格式化：

```
sdf.applyPattern("MM/dd/yyyy");
System.out.println(sdf.format(date)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T11:17:03.760

在 sql 服务器中：

你可以使用 convert() 函数..

你可以试试

```
Insert into <table> (date_col,<othercolumns>)
select CONVERT(date,'02-SEP-2012'),<othercolumns> 
```

例子：

```
declare @date varchar(20) ='02-SEP-2012'
select CONVERT(date,@date) 
```

结果：

```
2012-09-02 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T11:18:24.910

```
String deliverydate="02-SEP-2012";
SimpleDateFormat sdf=new SimpleDateFormat("MM-dd-yyyy");
Date date=sdf.parse(deliveryDate); 
```

你试过这个“-”而不是“/”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T11:17:15.300

更改`SimpleDateFormat`

```
SimpleDateFormat sdf=new SimpleDateFormat("dd-MMM-yyyy"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-30T11:38:33.937

如果提供的日期不是有效格式，则使用 parse(String source) 方法可能会引发 java.text.ParseException 异常。因此您应该使用有效格式。

# c# - 在 Windows 窗体中绘图

> ID：12195594
> 
> 赞同：0
> 
> 时间：2012-08-30T11:13:19.547
> 
> 标签：c#, winforms

我是使用 Windows 窗体和 C# 绘制任何东西的初学者，我有一个问题（我无法在互联网上找到答案）。所以这是我的问题：我正在尝试构建简单的应用程序，我使用轨迹栏来操纵矩形的大小。

```
 namespace Drawing
{
    public partial class Form1 : Form
    {
        int size = 10;
        public Form1()
        {
            InitializeComponent();
            CenterToScreen();
        }

        protected override void OnPaint(PaintEventArgs pe)
        {

            Graphics g = pe.Graphics;
            Rectangle rect = new Rectangle(50,50, size,size);
            LinearGradientBrush IBrush = new LinearGradientBrush(rect, Color.Green, Color.Yellow,
                LinearGradientMode.BackwardDiagonal);
            g.FillRectangle(IBrush, rect);

        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        private void Form1_Paint(object sender, PaintEventArgs e)
        {

        }

        private void trackBar1_Scroll(object sender, EventArgs e)
        {
           size = trackBar1.Value;
 // I was trying to put here OnPaint method but it doesnt work.
        }

    }
} 
```

而且我只是不知道当 tracBar1_Scroll 发生时如何调用 OnPaint 方法？有什么建议么？先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T11:15:25.490

调用[`this.Invalidate()`](http://msdn.microsoft.com/en-us/library/598t492a.aspx)这将触发导致`OnPaint`关闭的事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T11:23:14.553

一种可能性是将您的绘图代码放入一个单独的函数中，该函数从`Form1_Paint`和调用`trackBar1_Scroll`。

此方法将`Graphics`对象作为参数。像这样的东西：

```
private void DrawStuff( Graphics g )
{
    // your drawing logic goes here
} 
```

然后`modify _Paint`如下`_Scroll`：

```
private void Form1_Paint( object sender, PaintEventArgs e )
{
    DrawStuff( e.Graphics );
}

private void trackBar1.Scroll( object sender, EventArgs e )
{
    Graphics g = this.CreateGraphics();

    DrawStuff( g );

    g.Dispose();
} 
```

或者，您可以强制您的表单无效，这也会触发`_Paint`被调用：

```
private void trackBar1.Scroll( object sender, EventArgs e )
{
    this.Invalidate();
} 
```

请注意，它`Invalidate()`有 6 个重载，它们允许您对需要为绘图无效的内容进行不同级别的控制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T11:18:30.373

你也应该看看这个链接：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.trackbar.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.trackbar.aspx)

它包含有关您可能会发现有用的跟踪栏的所有信息，例如 InvokePaintBackground 方法或 BackColour

# ruby - 以编程方式将电子邮件转换为 HTML 或 PDF

> ID：12195596
> 
> 赞同：2
> 
> 时间：2012-08-30T11:13:25.107
> 
> 标签：ruby, email

我正在尝试以编程方式将邮箱中的电子邮件转换为 HTML 或 PDF。

我的主要动机是能够在网页上创建电子邮件摘要，并能够扩展特定电子邮件并查看电子邮件的全部内容。

我认为 PDF 可能是一种选择，因为我不必担心将电子邮件中的内容（例如图像）链接到图像的存储位置。

我从 ruby​​ Mail gem 开始，我也遇到了[mhonarc](http://www.mhonarc.org/)。我不确定 mhonarc 是否对我正在尝试做的事情来说太过分了，所以我决定在这里询问是否有替代方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T12:18:29.233

Gem [pdfkit](https://github.com/pdfkit/PDFKit)用于生成 PDF。请阅读自述文件，gem 在您的系统中需要 wkhtmltopdf 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T12:33:38.047

我会通过 IMAP 库进行电子邮件转换（现在可能有更新的库），然后从浏览器中的一个简单的 Sinatra 应用程序提供所有内容。您可以使用模板语言生成简单的 html 输出和逻辑。当然你也可以使用 prawn 来生成 pdf。到达那里的许多不同方式......不知道为什么你不只是加载电子邮件并显示部分内容。生活可以如此简单。

# php - PHP无法上传多张图片

> ID：12195599
> 
> 赞同：0
> 
> 时间：2012-08-30T11:13:30.723
> 
> 标签：php, image, upload

我有一个表格，最多可以上传五张图片。图片的名称和扩展名应该被插入到数据库表'images'中，然后上传到_uploads/name_of_the_album/目录。

问题是，当我选择一些图片并点击上传时，只有第一张图片正确上传，其他图片失败。

这是我的代码：

```
if(isset($_FILES['image']) === true){
    $files = $_FILES['image'];

    $allowed_ext = array('jpg', 'jpeg', 'png', 'gif');

    $album_id = (int)$_GET['album_id'];
    $album_name = $_GET['album_name'];

    for($i=0; $i<count($files['name']); $i++){
        $name = $files['name'][$i];
        $tmp_name = $files['tmp_name'][$i];
        $size = $files['size'][$i];

        $ext = explode('.', $files['name'][$i]);
        $ext = strtolower(end($ext));

        $img_name = explode('.', $files['name'][$i]);
        $img_name = strtolower(current($img_name));

                    //do some testing echos to see the result
        //echo $img_name."<br>";

                     //here i'm going to add some validation as soon as
                     // i fix the multi-upload problem

        //insert image into database
        $query_insert_image = "INSERT INTO `images` (album_id, image_name, image_ext) VALUES ({$album_id}, '{$img_name}', '{$ext}') ";
        $insert_image = mysql_query($query_insert_image, $connection) or die(mysql_error());

        if(mysql_affected_rows() == 1){

            move_uploaded_file($tmp_name, '../_uploads/'.$album_name.'/'.$name);
        }

        //redirect
        redirect_to("view_album.php?succeed=1");
    }//end the for loop

    //echo '<pre>',print_r($files, true),'</pre>';
} 
```

这是表单的一些代码：

```
<form action="" method="post" enctype="multipart/form-data" name="formUploadImages" id="formUploadImages">
    <p>
        <label for="image">Choose one or more Image(s):</label><br />
        <input type="file" name="image[]" id="image" /><br />
        <input type="file" name="image[]" id="image" /><br />
        <input type="file" name="image[]" id="image" /><br />
        <input type="file" name="image[]" id="image" /><br />
        <input type="file" name="image[]" id="image" />
    </p>
...... 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T11:31:11.753

我认为你正在从自己的脚下砍树枝。

```
redirect_to("view_album.php?succeed=1"); 
```

重定向意味着刷新页面，这意味着执行结束。`for`当第一个循环结束并上传第一张图片后触发重定向时，`for`将不会继续下一次迭代。

当然，解决方法是在 for 循环之后推送该行（并且永远不要期望在重定向之后执行任何操作 - 除非标头已经发送）。

大多数功能`redirect_to()`（它不是基于另一个功能的核心功能`header()`）也确保执行停止（有一行调用`header()`和另一行调用`die()`/ `exit()`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T13:23:37.833

试试这个 php 代码，为我工作：

```
for($i=1;$i<6;$i++)
{
if(!empty($_FILES['image_upload'.$i])):
$target = "images/".$_FILES['image_upload'.$i]['name'];
$image_upload.= ",".mysql_real_escape_string(($_FILES['image_upload'.$i]['name']));
move_uploaded_file($_FILES['image_upload'.$i]['tmp_name'], $target);
endif;
} 
```

在您的根目录中创建一个名为“images”的文件夹，所有图像都将移动到该文件夹​​中。html 表单可能如下所示：

```
<form action="" method="post" enctype="multipart/form-data" name="formUploadImages" id="formUploadImages">
<p>
    <label for="image">Choose one or more Image(s):</label><br />
    <input type="file" name="image_upload1" id="image_upload1" /><br />
    <input type="file" name="image_upload2" id="image_upload2" /><br />
    <input type="file" name="image_upload3" id="image_upload3" /><br />
    <input type="file" name="image_upload4" id="image_upload4" /><br />
    <input type="file" name="image_upload5" id="image_upload5" />
</p> 
```

……

这段代码在我这边运行，根据您的需要进行一些编辑后可能对您有用。快乐编码！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T11:27:03.877

foreach($_POST['image'] as $report_id){
$sql="INSERT INTO `images`(album_id, image_name, image_ext) VALUES ('{$album_id}', '{$report_id}', '{$ext}') "; $queryExe=mysql_query($sql); }

在 "//insert image into database" 之后替换此代码代替您的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T11:30:58.663

[http://php.net/manual/en/features.file-upload.multiple.php](http://php.net/manual/en/features.file-upload.multiple.php)

阅读警告块“自 PHP 5.2.12 起，max_file_uploads 配置...”。也许这就是问题所在。

还有一些很好的例子，也许你应该使用 foreach 而不是 for。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T11:31:47.917

1) 在 Web 服务器的根文件夹中创建一个 .htaccess 文件。

2) 将以下代码放在 .htaccess 文件中并保存。

```
php_value upload_max_filesize 20M
php_value post_max_size 20M
php_value max_execution_time 200
php_value max_input_time 200 
```

现在，您可以使用 html 表单中的文件字段和 PHP 中可用的 move_uploaded_file() 函数以简单的方式上传最大 20MB 的文件。

# c++ - 在嵌套循环/循环不变量中检查一次

> ID：12195600
> 
> 赞同：1
> 
> 时间：2012-08-30T11:13:31.597
> 
> 标签：c++, loops, invariants

在嵌套循环中每次迭代只做一次的最聪明的方法是什么？我无法提取不变部分，因为外循环非常复杂。这是我的 C++ 示例：

```
void foo::bar() {
    if(oldCycle == tree.cycle) {
        doSomething();
        oldCycle++;
    }
} 
```

这个方法经常被调用，直到 tree.cycle 增加。oldCycle 是 foo 的私有成员变量

```
claas foo {
public: ...

private:
int oldCycle;
}; 
```

编译器会优化此代码还是每次迭代都会运行 if 检查？

编辑：这里像请求带有循环的代码：第一个循环在 mexFunction() 方法中，算法在 matlab 中启动并调用 mexFunction。

```
void mexFunction(...) {
    for( tree.cycle = 0; tree.cycle<maxIt; tree.cycle++ ) {
        foo->startfoo();
    }
} 
```

这是另一个循环：

```
void foo::startfoo() {
    for(tree.cur_it = 0; tree.cur_it <=39; tree.cur_it++ ) {
        bar();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T11:28:01.280

对于一般情况，您无法真正优化这一点，因为您需要以一种或另一种方式从集合中删除特殊情况。

但是，对于特殊处理第一个元素的特殊情况*（*例如，当打印带有分隔符的范围时`"1, 2, 3"`），您可以使用 Knuth 的“循环半”：

*天真的循环：*

```
for (unsigned int i = 0; i != values.size(); ++i)
{
    if (i != 0) { std::cout << ", "; }
    std::cout << values[i];
} 
```

*循环半：*

```
if (!values.empty())
{
    for (unsigned int i = 0; ; )
    {
        std::cout << values[i];
        ++i;
        if (i == values.size()) { break; }
        std::cout << ", ";
    }
} 
```

后一种构造涉及更多，但可以为您节省大部分错误检查`i != 0`。

也就是说，即使您以幼稚的方式编写代码，一个好的编译器也会进行部分展开是很合理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:28:58.233

对于简单的情况，我更喜欢这种方法。

```
if ( ! values.empty())
{
    std::cout << values[0];

    for (size_t z = 1; z < values.size(); z++)
    {
        std::cout << ", " << values[z];
    }
} 
```

# c - 在客户端启动服务器后，如何通过“C”中的套接字向服务器发送消息？

> ID：12195607
> 
> 赞同：0
> 
> 时间：2012-08-30T11:13:57.407
> 
> 标签：c, sockets, vb6, client-server

我创建了一个客户端（在 C 中），它试图连接到服务器（在 VB 6.0 中），直到建立连接。如果服务器准备好监听，然后我们运行客户端程序尝试连接并发送消息，它工作正常并且客户端也收到响应。但是当我们在服务器之前启动客户端程序时，它会在很短的时间间隔后尝试连接到服务器，直到它被连接（在无限循环中）。当我们打开服务器时，客户端成功连接到服务器但没有发送消息。在这种情况下，我无法找到问题所在。我已经检查了客户端没有发送任何消息的“wireshark”。

当服务器在客户端之前运行而不是在其他情况下，程序为什么运行良好？

请建议如何找到问题。这是客户端程序的代码：

```
int
tcp_send()
{
    int sd, newSd, rc, i, cliSd, servLen, num, k, p;
    struct sockaddr_in servAddr;
    struct hostent *h;
    char si[4];
    char line[MAX_MSG];
    char message[MAX_MSG];
    struct  timeval tp;
    time_t now;
    char msg[MAX_MSG];  
    char str[MAX_MSG];

    strcpy(msg, "Hello World");

    servAddr.sin_family = AF_INET;
    servAddr.sin_addr.s_addr = inet_addr("111.1.1.11");
    servAddr.sin_port = htons(SERVER_PORT);

    /* create socket */
    sd = socket(AF_INET, SOCK_STREAM, 0);
    if(sd<0) 
    {
        exit(1);
    }
    rc = -1;    
    for (;rc!=0;)
    {
        /* connect to server */
        rc = connect(sd, (struct sockaddr *) &servAddr, sizeof(servAddr));
        if(rc<0) 
        {
            sleep(2);
        }

    }

    memset(message, 0, sizeof(message));
    memset(si, 0, sizeof(si));
    num = strlen(msg);
    integertostring(si, num, 4);
    memcpy(message, si, 4);
    memcpy(message + strlen(message), msg, strlen(msg));

    rc = send(sd, message, strlen(message), 0);
    if(rc<0)
    {
      close(sd);
      exit(1);

    }

    sleep(1);
    read_line(sd,line);
    memset(line,0x0,MAX_MSG);

    return SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T11:59:51.100

尝试失败`close`后的套接字`connect`并重新创建它。

# android - 我想在图像视图上做动画来改变图像视图的宽度，如下所示

> ID：12195608
> 
> 赞同：0
> 
> 时间：2012-08-30T11:13:58.617
> 
> 标签：android, android-layout

我想在imageview上做动画如下 ![第一张图片](../Images/93c7172557ea48944ffe5e0bdf2ded2d.png)

![第二张图片](../Images/bc7f4fe25b26b8c6642b5fc50542be1a.png)

![第三张图片](../Images/ced9469dc6bbdc45e6a9d44a5eedd1a1.png)

需要动画才能喜欢这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:50:36.763

找到解决方案 ScaleAnimation 解决了这个问题

```
int maxValue = 6085;
final float scale = this.getResources().getDisplayMetrics().density;
linearLayout1 =(LinearLayout) findViewById(R.id.iv1);linearLayout2 =(LinearLayout) findViewById(R.id.iv2);

linearLayout1.setLayoutParams(new LinearLayout.LayoutParams(calculatePercentage(maxValue,3853),(int) (20 * scale + 0.5f)));
        linearLayout2.setLayoutParams(new LinearLayout.LayoutParams(calculatePercentage(maxValue,3026), (int) (20 * scale + 0.5f)));

ScaleAnimation anim1 = new ScaleAnimation(0.0f, 10.0f, 1.0f, 1.0f, Animation.RELATIVE_TO_SELF,1.0f, Animation.RELATIVE_TO_SELF, 0.5f);
        ScaleAnimation anim2 = new ScaleAnimation(0.0f, 10.0f, 1.0f, 1.0f, Animation.RELATIVE_TO_SELF,0.0f, Animation.RELATIVE_TO_SELF, 1.0f);
            anim1.setDuration(7000);
            anim2.setDuration(7000);
           linearLayout1.startAnimation(anim1);
           linearLayout2.startAnimation(anim2); 
```

和计算百分比的代码

```
public int calculatePercentage(int maxValue,int value)
    {
        Log.v(TAG, "maxValue  :  "+maxValue);
        Log.v(TAG, "Value  :  "+value);
        float division =(float)(value)/(float)maxValue;
        int percenatgeValue =(int) (division*100);
        Log.v(TAG, "percenatgeValue  :  "+percenatgeValue);
        return percenatgeValue;
    } 
```

# sql-server - LINQ to 实体中的 string.contains 导致执行速度非常慢

> ID：12195610
> 
> 赞同：2
> 
> 时间：2012-08-30T11:14:01.793
> 
> 标签：sql-server, entity-framework-4

这个 LINQ 表达式：

```
var result = entities.Cases
            .Where(c => c.House.Address.Contains("otte"))
            .ToList(); 
```

在服务器上执行这个 sql：

```
SELECT 
...
--rows
...
FROM  [dbo].[Case] AS [Extent1]
INNER JOIN [dbo].[House] AS [Extent2] ON [Extent1].[HouseID_FK] = [Extent2].[HouseID]
WHERE [Extent2].[Address] LIKE '%otte%' 
```

这大约需要 100 毫秒才能完成。

这个 LINQ 表达式：

```
var value = "otte";
var result = entities.Cases
            .Where(c => c.House.Address.Contains(value))
            .ToList(); 
```

在服务器上执行这个 sql：

```
exec sp_executesql N'SELECT 
...
--rows
...
FROM  [dbo].[Case] AS [Extent1]
INNER JOIN [dbo].[House] AS [Extent2] ON [Extent1].[HouseID_FK] = [Extent2].[HouseID]
WHERE [Extent2].[Address] LIKE @p__linq__0 ESCAPE N''~''',N'@p__linq__0     nvarchar(4000)',@p__linq__0=N'%otte%' 
```

这大约需要 1400 毫秒才能完成。

如果我将“value”声明为常量，我也可以让它生成“fast”sql，但我希望能够在运行时更改“value”的值。有什么方法可以强制实体框架不生成“exec sp_executesql” - 样式 sql，因为这显然要慢得多？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:34:49.233

从[这里开始](http://msdn.microsoft.com/en-us/library/ms175580%28SQL.105%29.aspx)，我建议 SQL Server (LINQ/EF) 试图超越您，并且可以告诉您将使用不同的参数重新使用该查询，并且使用 sp_executesql 是当前推荐的方式一致地运行该查询（很确定它是这样 SQL Server 可以有效地缓存查询）。您可能会输掉这一查询，但通过重复使用来弥补损失？

您可以考虑修改数据库以要求[简单](http://msdn.microsoft.com/en-us/library/ms186219%28v=sql.105%29.aspx)或[强制](http://msdn.microsoft.com/en-us/library/ms175037%28v=sql.105%29.aspx)参数化（您想要“强制”），但这可能会导致任何其他查询的性能显着下降，但 YMMV.

我建议避免在 SQL Server 本身中进行任何字符串比较......这些天 RAM 非常丰富，我发现偶尔只提升两个相应的数据集并比较 C# 中的字符串值会更快（再次, YMMV)

如果做不到这一点，请根据您的要求尝试[SOUNDEX](http://msdn.microsoft.com/en-us/library/ms187384.aspx)或[DIFFERENCE](http://msdn.microsoft.com/en-us/library/ms188753.aspx)与[LIKE](http://msdn.microsoft.com/en-us/library/ms179859.aspx)或[CHARINDEX](http://msdn.microsoft.com/en-us/library/ms186323.aspx)，看看在性能方面是否有任何提升。

祝你好运。

# c# - InvalidProgramException 试图通过 Reflection.Emit 调用静态方法

> ID：12195611
> 
> 赞同：2
> 
> 时间：2012-08-30T11:14:02.430
> 
> 标签：c#, .net-3.5, reflection.emit

我正在尝试制作一种动态类型，它基本上将一些方法包装在静态类上。我创建了一个名为 Wrap 的静态方法，它有一个应该是接口的通用参数和一个普通参数，它是具有静态方法的类的类型。

例如

```
IInterfaceTest obj = StaticInterface.Wrap<IInterfaceTest>(typeof(StaticClassNameHere));
obj.TestInterfaceMethod(); 
```

但是我生成的代码显然在某个地方被破坏了，因为我在调用该方法时得到了 InvalidProgramException。

我的代码基于我制作的测试类的 ILDasm 输出，据我所知，我正在输出相同的代码。但它不起作用...

```
public static class StaticInterface
{
    private static AssemblyBuilder _asm = null;
    private static ModuleBuilder _mod = null;
    private static Type _thisType = typeof(StaticInterface);
    private static int _count = 0;
    public static T Wrap<T>(Type type)
    {
      ILGenerator ilgen;

      if (_asm == null)
      {
         _asm = AppDomain.CurrentDomain.DefineDynamicAssembly(new System.Reflection.AssemblyName(_thisType.Name), AssemblyBuilderAccess.Run);
         _mod = _asm.DefineDynamicModule(_thisType.Name);
      }

      string newTypeName = _thisType.Name + "._" + _count++;

      TypeBuilder typBuilder = _mod.DefineType(newTypeName, System.Reflection.TypeAttributes.Class | System.Reflection.TypeAttributes.Public);
      typBuilder.AddInterfaceImplementation(typeof(T));

      ConstructorBuilder conBuilder = typBuilder.DefineDefaultConstructor(System.Reflection.MethodAttributes.Public);

      foreach (MethodInfo method in typeof(T).GetMethods())
      {
         ParameterInfo[] parameters = method.GetParameters();
         Type[] paramTypes = new Type[parameters.Length];

         for (int j = 0; j < parameters.Length; j++)
         {
            paramTypes[j] = parameters[j].ParameterType;
         }

         MethodBuilder mth = typBuilder.DefineMethod(method.Name,
            MethodAttributes.Public | MethodAttributes.Virtual | MethodAttributes.HideBySig | MethodAttributes.NewSlot | MethodAttributes.Final,
                        method.ReturnType,
                        paramTypes);

          ilgen = mth.GetILGenerator();
          ilgen.Emit(OpCodes.Nop);

          for (short j = 0; j < parameters.Length; j++)
          {
             ilgen.Emit(OpCodes.Ldarg, j + 1);
          }

          MethodInfo callMeth = type.GetMethod(method.Name, BindingFlags.Public | BindingFlags.Static, null, paramTypes, null);

          ilgen.EmitCall(OpCodes.Call, callMeth, null);

          if (method.ReturnType != null && method.ReturnType != typeof(void))
          {
             ilgen.Emit(OpCodes.Stloc_0);
             Label end = ilgen.DefineLabel();
             ilgen.Emit(OpCodes.Br_S, end);

             ilgen.MarkLabel(end);
             ilgen.Emit(OpCodes.Ldloc_0);
          }

          ilgen.Emit(OpCodes.Ret);
       }

       typBuilder.CreateType();

       return (T)_asm.CreateInstance(newTypeName, false, BindingFlags.Public | BindingFlags.Instance, null, null, null, null);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T11:25:35.997

主要是，我认为这与您对返回类型的处理有关：

```
ilgen.EmitCall(OpCodes.Call, callMeth, null);
if (method.ReturnType != null && method.ReturnType != typeof(void))
{
    ilgen.Emit(OpCodes.Stloc_0);
    Label end = ilgen.DefineLabel();
    ilgen.Emit(OpCodes.Br_S, end);

    ilgen.MarkLabel(end);
    ilgen.Emit(OpCodes.Ldloc_0);
}
ilgen.Emit(OpCodes.Ret); 
```

*   你还没有定义任何本地人，所以`Stloc_0`并且`Ldloc_0`是非法的
*   分支只是......分支到下一行（所以什么都不做），所以这基本上是“存储到 X，从 X 加载”，如果我们不关心分配的副作用，这是一个无操作X
*   *无论如何*，这完全没有必要- 只需将返回值留在堆栈上，因为它需要匹配（意思是：如果该方法没有返回值，那很好；如果它*确实*返回了一个值，那么该值已经是堆栈上的值 - 即正是我们想要的）

所以更简单（和有效）的实现只是：

```
ilgen.EmitCall(OpCodes.Call, callMeth, null);
ilgen.Emit(OpCodes.Ret); 
```

# c - 对 C 中的空零感到困惑

> ID：12195616
> 
> 赞同：1
> 
> 时间：2012-08-30T11:14:14.430
> 
> 标签：c, null, char

假设您有：

```
char[5] = "March"; 
```

这在 C 中不起作用，虽然：

```
char[0]='M'
char[1]='a'
char[2]='r'
char[3]='c'
char[4]='h'
char[5]='\0' 
```

出于某种原因，我不得不对 C 说，`char[6]="March"`而不是`char [5]`.

为什么是这样？进入`char[6]`什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T11:18:31.250

首先，`char`不是 C 中的有效变量，它是*关键字*。你可能是说

```
char xyzzy[6]; 
```

或类似的东西，这将创建一个名为`xyzzy`. 但是，一旦解决了，*就什么*都没有了`xyyzy[6]`。该语句表示一个由*六个*字符`char xyzzy[6];`组成的数组，其索引通过inclusive: ，即六个元素。*`0``5``{0,1,2,3,4,5}`*

 *无论如何，除非您*需要*更大的数组，否则您通常最好让编译器选择大小：

```
char xyzzy[] = "March"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T11:15:59.233

**在这种情况下，字符串文字`"March"`具有隐式空终止符，因此`char[]`数组需要`6`元素来存储它。**引用C99 标准的第*6.4.5 节字符串文字的相关点：*

> 字符串文字是用双引号括起来的零个或多个多字节字符序列，如“xyz”。
> 
> 在翻译阶段 7 中，将一个字节或值为零的代码附加到由一个或多个字符串文字产生的每个多字节字符序列。

在这两种情况下，代码都超出了数组的末尾。该代码当前具有未定义的行为。

改成：

```
char a[6] = "March"; 
```

第二个代码片段访问数组末尾之外的索引，因为索引从`0`到`N - 1`，其中`N`是数组中的元素数。对于数组`char a[5];`，有效索引是`0, 1, 2, 3, 4`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T11:17:55.040

如果从 0 到 5 包括在内，则有 6 个元素。

因此，您必须声明 a`char[6]`才能`str[0]`必须`str[5]`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T11:18:03.523

`char [5]`意味着，你有 5x sizeof(char) 的内存。0-5 是 sizeof(char) 的六倍：0 第一，1 第二，2 第三，3 第四，4 第五，5 第六。所以你需要一个 6 倍 sizeof(char): 的段`char [6]`。第一个单元格为零，也占用空间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T11:18:45.117

char[6] 中没有任何内容，但您仍然需要一个大小为 6 的 char[] 来保存包括空终止符字节在内的 6 个字符。它们将通过 char[5] 进入 char[0]。char[6] 仍未定义。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-30T15:05:26.263

`Char`是关键字而不是变量名，所以不要把它当做一个。

数组索引：即从0开始计算数组中字符的个数，即a[0]。

假设数组中有 5 个字符（例如：tiger），那么 a[0] = 't' 和 a[4] = 'r' 以及在这种情况下的所有字符串文字，字符数组以 '\0 结尾' 即 EOF
字符。因此，要存储一个包含 n 个字符的数组，使用 [n] 编译器将在该数组的末尾添加 '\0'。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-30T11:16:20.620

空终止符 \0 进入最后一个插槽。它在那里是因为否则将无法检查字符串的长度。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-30T11:19:21.560

```
char array[n] 
```

表示一个 n 元素长数组，而不是最后一个索引为 的数组`n`。因为在 C 中，数组是从零开始的，这意味着 n 元素数组的最后一个有效索引是`n - 1`. 由于字符串有一个零终止符，而“March”是 5 个字母，所以一共有 6 个字符，所以你必须写`char str[6] = "March";`. 如果现在这令人困惑，请不要包括数组的长度；对于初始化的数组，编译器会自动填充它，所以你可以改写`char str[] = "March";`。*

# jquery-mobile - 什么是在 Worklight 中关闭 EntityManagerFactory？

> ID：12195620
> 
> 赞同：0
> 
> 时间：2012-08-30T11:14:31.673
> 
> 标签：jquery-mobile, openjpa, ibm-mobilefirst

我正在 IBM Worklight 平台上试验基于表单的身份验证，我目前正在学习位于[此处](http://wpcertification.blogspot.co.uk/2012/06/how-to-enable-authentication-in.html)的教程。

我有一些奇怪的行为，第一次尝试登录时它只会重新加载登录页面，但如果我第二次尝试使用完全相同的详细信息，它就可以工作。这种行为是一致的，我每次都能重现它。

仔细观察 JS 控制台，我可以看到正在打印：

```
openjpa-1.2.2-r422266:898935 nonfatal user error&amp;gt; org.apache.openjpa.persistence.InvalidStateException: The factory has been closed.  The stack trace at which the factory was closed is available if Runtime=TRACE logging is enabled.
    at org.apache.openjpa.kernel.AbstractBrokerFactory.assertOpen(AbstractBrokerFactory.java:673)
    at org.apache.openjpa.kernel.AbstractBrokerFactory.newBroker(AbstractBrokerFactory.java:182)
    at org.apache.openjpa.kernel.DelegatingBrokerFactory.newBroker(DelegatingBrokerFactory.java:142)
    at org.apache.openjpa.persistence.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:192)
    at org.apache.openjpa.persistence.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:145)
    at org.apache.openjpa.persistence.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:56)
    at sun.reflect.GeneratedMethodAccessor70.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean$ManagedEntityManagerFactoryInvocationHandler.invoke(AbstractEntityManagerFactoryBean.java:434)
    at $Proxy36.createEntityManager(Unknown Source)
    at org.springframework.orm.jpa.EntityManagerFactoryUtils.doGetTransactionalEntityManager(EntityManagerFactoryUtils.java:195)
    at org.springframework.orm.jpa.EntityManagerFactoryUtils.getTransactionalEntityManager(EntityManagerFactoryUtils.java:142)
    at org.springframework.orm.jpa.EntityManagerFactoryAccessor.getTransactionalEntityManager(EntityManagerFactoryAccessor.java:129)
    at org.springframework.orm.jpa.JpaTemplate.execute(JpaTemplate.java:174)
    at org.springframework.orm.jpa.JpaTemplate.executeFind(JpaTemplate.java:151)
    at org.springframework.orm.jpa.JpaTemplate.findByNamedQuery(JpaTemplate.java:343)
    at com.worklight.core.auth.impl.AuthenticationDAO.getAssociatedIdentities(AuthenticationDAO.java:93)
    at com.worklight.core.auth.impl.AuthenticationContext$1.run(AuthenticationContext.java:513)
    at com.worklight.core.auth.impl.AuthenticationContext$1.run(AuthenticationContext.java:492)
    at com.worklight.core.util.RssBrokerUtils.doInTransaction(RssBrokerUtils.java:123)
    at com.worklight.core.auth.impl.AuthenticationContext.saveAuthenticationResult(AuthenticationContext.java:492)
    at com.worklight.core.auth.impl.AuthenticationContext.processRequest(AuthenticationContext.java:244)
    at com.worklight.core.auth.impl.AuthenticationFilter.doFilter(AuthenticationFilter.java:99)
    at org.eclipse.equinox.http.servlet.internal.FilterRegistration.doFilter(FilterRegistration.java:81)
    at org.eclipse.equinox.http.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:35)
    at com.worklight.gadgets.serving.filters.AuthenticityFilter.doFilter(AuthenticityFilter.java:74)
    at org.eclipse.equinox.http.servlet.internal.FilterRegistration.doFilter(FilterRegistration.java:81)
    at org.eclipse.equinox.http.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:35)
    at com.worklight.gadgets.serving.filters.InstanceAuthenticationFilter.doFilter(InstanceAuthenticationFilter.java:65)
    at org.eclipse.equinox.http.servlet.internal.FilterRegistration.doFilter(FilterRegistration.java:81)
    at org.eclipse.equinox.http.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:35)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:130)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:68)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at org.eclipse.equinox.http.jetty.internal.HttpServerManager$InternalHttpServiceServlet.service(HttpServerManager.java:317)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:390)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:939)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:756)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

搜索该堆栈跟踪揭示了一个[先前的问题](https://stackoverflow.com/questions/4563474/invalidstateexception-while-trying-to-enter-data-into-db)SO，据此建议某些东西正在调用`close()`. `EntityManagerFactory`我不确定这是在哪里/为什么会发生，因为所有这些都将在 Worklight 下进行管理。

这是我用于身份验证过程的 JS，在`js/auth.js`

```
var Authenticator = function() {
    var LOGIN_PAGE_SECURITY_INDICATOR = 'j_security_check';
    var USERNAME_INPUT_ID = '#usernameInputField';
    var PASSWORD_INPUT_ID = '#passwordInputField';
    var LOGIN_BUTTON_ID = '#loginButton';
    function onFormSubmit() {
        WL.Logger.debug("Entering auth.js.onFormSubmit()");
        var reqURL = './' + LOGIN_PAGE_SECURITY_INDICATOR;
        var params = {
            j_username : $(USERNAME_INPUT_ID).val(),
            j_password : $(PASSWORD_INPUT_ID).val()
        };
        onSubmitCallback(reqURL, {
            parameters : params
        });
    }
    return {
        init : function() {
            WL.Logger.debug("Inside auth.js.init");
            $(LOGIN_BUTTON_ID).bind('click', onFormSubmit);
        },
        isLoginFormResponse : function(response) {
            WL.Logger.debug("Inside auth.js.isLoginFormResponse " + response.responseText);
            if (!response || response.responseText == null) {
                WL.Logger.debug("Entering auth.js.isLoginFormResponse (), return false");
                return false;
            }
            var indicatorIdx = response.responseText.search(LOGIN_PAGE_SECURITY_INDICATOR);
            WL.Logger.debug("Entering auth.js.isLoginFormResponse (), return " + (indicatorIdx >= 0));
            return (indicatorIdx >= 0);
        },
        onBeforeLogin : function(response, username, onSubmit, onCancel) {
            WL.Logger.debug("Inside auth.js.onBeforeLogin");
            onSubmitCallback = onSubmit;
            onCancelCallback = onCancel;
            if (typeof (username) != 'undefined' && username != null) {
                $(USERNAME_INPUT_ID).val(username);
            } else {
                $(USERNAME_INPUT_ID).val('');
            }
            $(PASSWORD_INPUT_ID).val('');
        },
        onShowLogin : function() {
            WL.Logger.debug("Inside auth.js.onShowLogin");
            $.mobile.changePage("#loginPage");
        },
        onHideLogin : function() {
            WL.Logger.debug("Inside auth.js.onHideLogin");
            $.mobile.changePage("#page3");

        }
    };
}(); 
```

就像我提到的，第一次登录失败，它只是重新加载登录表单，我可以在 JS 控制台中看到上面的堆栈跟踪，但第二次它工作正常。我想知道第一次尝试时是否没有正确初始化某些东西，但第二次就可以了。谁能提出什么问题？

这些是我正在使用的页面元素：

```
<div data-role="page" id="page3">
            <div data-theme="a" data-role="header">
              <h3>Autenticated Page - Page3</h3>
            </div>
            <div data-role="content">
              <h3>You are logged in -Page3</h3>
              <a href="#page1">Go to page1</a>
            </div>
            <div data-theme="a" data-role="footer">
              <input type="button" value="Logout" 
              onclick="WL.Client.logout('SampleAppRealm', {onSuccess:  WL.Client.reloadApp});" />
            </div>
          </div>

          <div data-role="page" id="loginPage">
            <div data-theme="a" data-role="header">
              <h3>Hello JQuery Mobile</h3>
            </div>
            <div data-role="content">
              <div id="loginForm">
                Username:<br/>
                <input type="text" id="usernameInputField" autocorrect="off" autocapitalize="off" /><br />
                Password:<br/>
                <input type="password" id="passwordInputField" autocorrect="off" autocapitalize="off"/><br/>    
                <input type="button" id="loginButton" value="Login" />
              </div>
            </div>
            <div data-theme="a" data-role="footer">
              <h3>Copyright stuff</h3>
            </div>
          </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T11:45:38.637

我不知道 EntityManagerFactory 位，但听起来并不相关。

通过阅读问题中的场景，听起来好像在让应用程序成功连接到 Worklight Server 之前发生了登录尝试。确保您的应用程序首先连接到 Worklight Server，并且只有在这样做之后，才会进行登录。

应用程序完成加载后立即`connectOnStartup:true`使用或`initOptions.js`使用[WL.Client.Connect 。](http://pic.dhe.ibm.com/infocenter/wrklight/v6r0m0/index.jsp?topic=/com.ibm.worklight.help.doc/apiref/r_wl_client_connect.html)

此外，[请阅读这些 IBM Worklight 入门培训模块](http://www.ibm.com/developerworks/mobile/worklight/getting-started.html#security)。

# apache - Apache 将目录重定向到 index.php

> ID：12195622
> 
> 赞同：0
> 
> 时间：2012-08-30T11:14:35.253
> 
> 标签：apache, .htaccess, redirect, indexing

我正在尝试将一个简单的文件夹重定向到 /folder/index.php。

我的 URL 如下所示：site.com/folder，我想要 site.com/folder/index.php。通过网络，我只找到了相反的方式，但我确实想查看我的 index.php，以便以后可以使用 site.com/folder/index.php#344 之类的链接

我位于 /folder/ 的 .htaccess 如下所示：

```
Options -Indexes
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^/(.+)$ index.php
</IfModule> 
```

当然它不起作用。也许是 apache 忽略了我的文件？也许其他一些 .htaccess 正在干扰？我不知道，因为我是apache的新手...

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T17:37:07.820

你可以跳过这个 mod_rewrite 的东西并使用 mod_dir：

```
DirectoryIndex index.php 
```

有了 htaccess 文件中的那个，`/folder`你`http://site.com/folder`会得到`index.php`.

# google-apps-script - 以匿名方式执行 Google Apps 脚本仅显示“点击我”按钮

> ID：12195623
> 
> 赞同：0
> 
> 时间：2012-08-30T11:14:35.007
> 
> 标签：google-apps-script

我有一个运行良好的谷歌应用程序脚本，它从 GET/POST 获取参数以生成 pdf 并通过邮件发送并将其存储在谷歌驱动器中。

如果我由我的用户执行该脚本，一切正常。

我尝试向所有人发布，当我尝试打开生成的 url 时以我的用户身份继续执行我只看到一个按钮“点击我”

怎么了 ？？

我需要从 GAE 调用这个脚本来执行文档上的一些东西。

任何人都可以帮助我吗？

这是我的脚本的网址：[脚本](https://script.google.com/a/macros/onsrl.it/s/AKfycbzNBjVVgHZXhwrTULDyT2aoyjBp-Qgd_RTWgX2zu6AnKgQqcTTL/exec)

谢谢桑德罗

**编辑**

这是我的测试代码：

```
 function doGet() { 
     var output = ContentService.createTextOutput() 
         .setMimeType(ContentService.MimeType.TEXT) 
         .setContent("Hello World"); 
     return output; } 
```

我已经发布为 webapp，执行设置为我自己，访问设置为所有人，包括匿名。

当我尝试以匿名用户身份访问时，我总是看到那个按钮:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T05:18:56.277

您没有更新版本（请参阅菜单：文件 > 管理版本）然后重新发布应用程序，因此您获得的是旧代码（也就是您从“脚本作为 webapp”获得的示例代码）。测试 URL 始终是最新的代码，但真正的 URL 有一个明确的版本。

# java - 理解 Java 中 null 和 '\u000' 的区别

> ID：12195628
> 
> 赞同：51
> 
> 时间：2012-08-30T11:14:44.957
> 
> 标签：java, null, char

我读到一本书*（Bruce Eckel 的 Thinking in Java，第 4 版，第 47 页*`null`）等于`'\u000'`. 然后我想知道到底是`'\u000'`什么意思。

根据我的理解， null 是什么都没有或什么都没有。并且`'\u000'`与这个定义相矛盾。

谁能澄清这个关于`null`and 的问题`'\u000'`？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-30T11:23:20.870

语言规范是定义 null 的地方，它说

> 还有一种特殊的 null 类型，即表达式 null 的类型，它没有名称。因为 null 类型没有名字，所以不可能声明一个 null 类型的变量或强制转换为 null 类型。空引用是空类型表达式的唯一可能值。空引用始终可以转换为任何引用类型。在实践中，程序员可以忽略 null 类型，只是假装 null 只是一个可以是任何引用类型的特殊文字。[*--链接到文档（第 4.1 节）*](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html)

和

> null 类型有一个值，即 null 引用，由文字 null 表示，它由 ASCII 字符组成。空文字始终是空类型。[*--链接到文档（第 2.3 节）*](http://docs.oracle.com/javase/specs/jvms/se5.0/html/Concepts.doc.html)

而是一个听起来很循环的定义，但值`null`是*空引用*本身 - 只是另一个指针。空引用的值并不真正相关，可能取决于实现者，但可能是零或其他不能与另一个对象地址混淆的值。

这里可能会引起混淆，因为有一个名为**null 字符**的字符值带有 value `\u0000`。这是 char 类型的默认值。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-30T11:18:56.923

`\u000``null`将是具有 ASCII 代码 0 的字符的 unicode 表示，但与Java 使用的无关。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-08-30T11:24:52.397

'\u0000' 十进制等效值为 00 字符等效值为 NUL。

来自 Javadoc 中的字符：http: [//docs.oracle.com/javase/1.4.2/docs/api/java/lang/Character.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Character.html)

```
static char MIN_VALUE 
      The constant value of this field is the smallest value of type char, '\u0000'. 
```

这是 unicode 值，在 CHAR 中相当于 NULL，即它是 NULL CHARACTER，而不是文字 NULL。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T11:17:12.057

`null`是一个文字，您可以看到规范 *在实践中说您可以简单地假装它“只是一个可以是任何引用类型的特殊文字”。*

正如@assylias 所说，您读到的内容肯定不是来自java :)

# c# - 如何通过 wpf 中的行和列获取网格子项？

> ID：12195629
> 
> 赞同：5
> 
> 时间：2012-08-30T11:14:50.793
> 
> 标签：c#, wpf, xaml, grid

```
<Grid x:Name="LayoutRoot" HorizontalAlignment="Center" VerticalAlignment="Center" >
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="Auto"/>
    </Grid.ColumnDefinitions>
    <Button Width="150" Height="50" x:Name="Btn1" Content="Button1" Grid.Row="0" Grid.Column="0"/>
    <Button Width="150" Height="50" x:Name="Btn2" Content="Button2" Grid.Row="0" Grid.Column="1"/>
    <Button Width="150" Height="50" x:Name="Btn3" Content="Button3" Grid.Row="2" Grid.Column="0"/>
    <Button Width="150" Height="50" x:Name="Btn4" Content="Button4" Grid.Row="2" Grid.Column="1"/>
</Grid> 
```

wpf中的C#代码

```
Visual childVisual = (Visual)VisualTreeHelper.GetChild(LayoutRoot,0); 
```

使用上面的代码，我可以获得网格的第一个子项（LayoutRoot）。但是我想通过它的行或列来获取网格子项。我该怎么做。

提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-30T11:17:47.787

`Grid.Children`根据每个孩子的内容[`Grid.GetRow`](http://msdn.microsoft.com/en-us/library/system.windows.controls.grid.getrow.aspx)和[`GetColumn`](http://msdn.microsoft.com/en-us/library/system.windows.controls.grid.getcolumn.aspx)回报进行过滤。

例如

```
var itemsInFirstRow = LayoutRoot.Children
                          .Cast<UIElement>()
                          .Where(i => Grid.GetRow(i) == 0); 
```

# javascript - Backbone - 复选框保持选中状态？

> ID：12195630
> 
> 赞同：1
> 
> 时间：2012-08-30T11:14:59.453
> 
> 标签：javascript, jquery, dom, backbone.js, dom-events

我正在尝试将一个复选框连接到我的视图，但只要我勾选它，它就会保持选中状态，即使我再次单击它？

这是视图的一部分：

```
views.PaginatedView = Backbone.View.extend({
    events: {
        'click input.completedEnquiries': 'filterCompletedEnquiries'
    },
    filterCompletedEnquiries: function (e) {
        return e.currentTarget.checked;
    }
}); 
```

这是模板：

```
<label>Show Completed: <input type="checkbox" class="completedEnquiries" /></label> 
```

我不知道我在这里做错了什么？

## 编辑

这是问题的Jsfiddle：http: [//jsfiddle.net/9cvVv/167/](http://jsfiddle.net/9cvVv/167/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T11:56:56.907

问题是`e.currentTarget.checked`从您的事件处理程序返回。返回`true`或`false`从该处理程序返回将为您选中或取消选中该框

```
 filterCompletedEnquiries: function(e) {
        //return e.currentTarget.checked;
    }, 
```

注释掉该 return 语句，它工作正常。您仍然可以获取信息，但不要从该方法返回任何内容。

```
 filterCompletedEnquiries: function(e) {
        var isChecked = e.currentTarget.checked;
        // do stuff here, based on it being checked or not
    }, 
```

## 编辑

这是一个示例，基于评论中的对话：

```
 views.PaginatedView = Backbone.View.extend({
    events: {
        'click input.completedEnquiries': 'completedEnquiriesClicked'
    },

    // this is explicitly an event handler, and that's all it should be used for
    completedEnquiriesClicked: function(e){
      this.showCompletedEnquiries = e.currentTarget.checked;
    },

    doSomething Else: function (e) {
        // now that we need to know, we can just check that attribute
        if (this.showCompletedEnquiries){
          // do something here
        }
    }
}); 
```

这只是您拥有的众多选项之一，可以按照您想要的方式进行工作。

# php - 将流数据中的 streamitem_creator 加入用户表

> ID：12195632
> 
> 赞同：0
> 
> 时间：2012-08-30T11:15:10.483
> 
> 标签：php, mysqli

我有两张桌子。一个保存用户状态内容，另一个保存用户。如何编写用户查询以获取他们在流数据中给定流项目的用户记录？目前，它只抓取位于用户表顶部的用户。

```
$check = "SELECT streamitem_id, streamitem_timestamp, streamitem_content FROM streamdata WHERE streamitem_creator="$user1_id." AND streamitem_id=".$last." AND streamitem_type_id=1 ORDER BY streamitem_timestamp DESC";
$check1 = mysqli_query($mysqli,$check);
$resultArr = mysqli_fetch_array($check1);
$json['streamitem_id'] = $resultArr['streamitem_id'];
$json['streamitem_timestamp'] = Agotime($resultArr['streamitem_timestamp']);
$json['streamitem_content'] = $resultArr['streamitem_content'];
mysqli_free_result($check1);

$check = "SELECT * FROM users";
$check1 = mysqli_query($mysqli,$check);
$resultArr = mysqli_fetch_array($check1);
$json['username'] = $resultArr['username'];
$json['id'] = $resultArr['id'];
$json['first'] = $resultArr['first'];
$json['middle'] = $resultArr['middle'];
$json['last'] = $resultArr['last'];
mysqli_free_result($check1);

-- Table structure for table `streamdata`
--

    CREATE TABLE IF NOT EXISTS `streamdata` (
      `streamitem_id` int(11) NOT NULL auto_increment,
      `streamitem_type_id` int(11) NOT NULL,
      `streamitem_creator` int(11) NOT NULL,
      `streamitem_target` int(11) NOT NULL,
      `streamitem_timestamp` datetime NOT NULL,
      `streamitem_content` varchar(5000) NOT NULL,
      PRIMARY KEY  (`str

    eamitem_id`)
        ) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=1953 ;

    -- Table structure for table `users`
    --

    CREATE TABLE IF NOT EXISTS `users` (
      `id` int(11) NOT NULL auto_increment,
      `first` varchar(64) NOT NULL,
      `middle` varchar(64) NOT NULL,
      `last` varchar(64) NOT NULL,
     `username` varchar(64) NOT NULL,
      PRIMARY KEY  (`id`)
    ) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=150 ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:54:58.277

查询以获取给定流项目的用户详细信息和流详细信息：

```
$check = "
SELECT * FROM users u 
INNER JOIN streamdata s ON
    (s.streamitem_creator = u.id AND s.streamitem_id = {$last})"; 
```

请注意，将原始变量值插入查询是不好的做法。特别是如果它们来自用户输入。查看[mysqli_real_escape_string](http://www.php.net/manual/en/mysqli.real-escape-string.php)或尝试使用准备好的语句。

# asp.net - ASP.NET 报告 - 是否有任何工具允许从其他报告的一部分生成复合报告

> ID：12195633
> 
> 赞同：0
> 
> 时间：2012-08-30T11:15:10.813
> 
> 标签：asp.net, crystal-reports, telerik, devexpress, reporting

假设我有 10 个报告，每个报告包含 1 个或多个表格和图表。
我想允许用户从报表 1 中选择条形图、从报表 2 中选择网格和饼图、从报表 3 中选择网格等来创建复合报表。

我想我在**Telerik**中有一个解决方案，我可以将多个报告组合在一起，作为子报告，并隐藏除用户想要包含的元素之外的所有元素（表格、图表）。如果所有元素都放置在最小尺寸的面板中，那么空白应该会随着元素被隐藏而消失。我已经使用这种方法进行了快速测试，它似乎有效。

我的问题是，这是满足要求的最佳方式吗？是否有其他工具（如**Crystal Reports**、**ActiveReports**和**DevExpress** ）更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T16:59:22.703

朱尔斯

您是否尝试在运行时合并这些报告？在 ActiveReports 中，这 3 个报表可以单独运行，然后可以将这三个报表组合起来创建一个报表文档，或者将其中的各个页面组合在一起创建另一个报表文档。然后可以在任何查看器中查看此文档，打印或导出为 pdf 和 excel 等。

在设计时，这是可行的，但不值得。需要一些代码来确保首先根据用户对某种报告的选择正确创建布局，然后您必须确保在运行报告之前输入正确的数据。

# javascript - xmlHttp.responseText 未知错误定义

> ID：12195635
> 
> 赞同：0
> 
> 时间：2012-08-30T11:15:14.090
> 
> 标签：javascript, asp.net, sql, sql-server, xmlhttprequest

我在一个 html（使用 xmlHttp.responseText）页面中创建了一个 javascript，我在该页面中从一个查询数据库（MSSQL）中用户名的用户编号的 aspx 页面请求一个值。当我加载 html (IE8) 时，我得到了这个“未知的运行时错误行：30”。应该是什么导致了问题？需要帮忙。这是我的代码：

1.  这是 HTML 页面和 Javascript：

    ```
     <!DOCTYPE html>
       <html>
       <head>
       <script type="text/javascript">
       function showUsernum(str)
       {
          var xmlHttp;   
           if (str=="")
       {
        document.getElementById("textExists").innerHTML="";
        return;
        }
       if (window.xmlHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
             xmlHttp=new xmlHttpRequest();
        }
     else
        {// code for IE6, IE5
             xmlHttp=new ActiveXObject("Microsoft.xmlHttp");
        }

      xmlHttp.onreadystatechange=function()
       {
          if (xmlHttp.readyState==4 && xmlHttp.status==200)
          {
        //alert(str);
              document.getElementById("textExists").innerHTML=xmlHttp.responseText;
          }
       }

       xmlHttp.open("GET","http://localhost/Base_Data/default.aspx?q="+str,true);
       xmlHttp.send();
     }
     </script>
     </head>
     <body>

    <form action=""  method="post"> 
    <label>UserName
    <input type="text" name="textUser" id="textUser" onchange="showUsernum(this.value)">
    </label>
    </form>
    <br/>
    <div >
    <form name="form1" method="post" action="">
    <label>
    <div id="textExists">Exists?</div>
    </label>
    </form>
    </div>
    </body> 
    ```

2.  这是我的 ASP 代码。

    ```
    protected void Page_Load(object sender, EventArgs e)
    {
        Response.Expires = -1;
        SqlConnection conn;
                string connection = ConfigurationManager.ConnectionStrings ["BaseData"].ConnectionString;
                conn = new SqlConnection(connection);
                string sql = "SELECT USERNUM FROM useraccount WHERE USERNAME ='" + Request.QueryString["q"] + "'";
                SqlCommand cmd = new SqlCommand(sql, conn);

                conn.Open();
                string contNm = Convert.ToString(cmd.ExecuteScalar());
                Response.Write("textExists=" + contNm );

                conn.Close();

      } 
    ```

真的很感激任何回应。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:19:53.610

The problem is that you're trying to assign whole page, including `<html>` tag and everything, into a single DOM element and IE doesn't really like that.

To have the server send only raw HTML without whole document you need to clear the Response. In addition you are not disposing properly of the database objects and you are exposed to SQL Injection attacks, so optimized code would be:

```
string connection = ConfigurationManager.ConnectionStrings ["BaseData"].ConnectionString;
using (SqlConnection conn = new SqlConnection(connection))
{
    conn.Open();
    string sql = "SELECT USERNUM FROM useraccount WHERE USERNAME=@user";
    string contNm = "";
    using (SqlCommand cmd = new SqlCommand(sql, conn))
    {
        cmd.Parameters.AddWithValue("@user", Request.QueryString["q"]);
        contNm = Convert.ToString(cmd.ExecuteScalar());
    }
    Response.Clear();
    Response.Write("textExists=" + contNm);
    Response.End();
    conn.Close();
} 
```

# c# - 如何使用 Aspose.Tasks 从 mpp 文件中读取自定义列值

> ID：12195639
> 
> 赞同：0
> 
> 时间：2012-08-30T11:15:30.020
> 
> 标签：c#, asp.net-mvc-3, ms-project, aspose

我正在处理 ac# 和 MVC3 项目，我正在使用 Aspose.Tasks 从 mpp 文件中提取数据，一切都很好 - 除了我找不到如何读取自定义列的值的方法。自定义列是指未列在 MS Project 列名中的列（例如 Insight、Cyclic 等）。

我想知道这里是否有人已经弄清楚并与我分享一些想法？我希望 Aspose.Tasks 允许我通过列名或列索引获取列值，这肯定会解决我的问题，但是在读取 mpp 文件时，我似乎无法从 Aspose 生成的属性中找到任何方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:49:19.170

最初 Aspose.Tasks API 在某些方面与[MPXJ](http://mpxj.sf.net)相似。现在在这个特定领域似乎并非如此，但我会告诉您 MPXJ 如何处理这个问题，这可能会帮助您在 Aspose.Tasks 中找到等效的功能。

MPXJ 提供了 Task.getFieldByAlias() 方法，它允许您使用用户可见的自定义列名称而不是列的标准 MS 项目名称来检索您感兴趣的字段。

还有 ProjectFile.getTaskFieldAliasMap() 将为您提供用户可见名称与用于表示自定义列类型的枚举之间的映射。

# javascript - 使按钮自动单击

> ID：12195640
> 
> 赞同：0
> 
> 时间：2012-08-30T11:15:33.607
> 
> 标签：javascript, jquery

在我的拼写游戏中，当一个字母完成时，我希望自动选择下一个要拼写的单词。目前，用户必须单击按钮才能转到下一个。

目前我有这个

```
var noExist = $('td[data-word=' + listOfWords[rndWord].name + ']').hasClass('wordglow2');
if (noExist) {
    $('.minibutton').click('enable');

} else {
    $('.minibutton').click('disable');
    $("#mysoundclip").attr('src', listOfWords[rndWord].audio);
    audio.play();
    $("#mypic").attr('src', listOfWords[rndWord].pic);
    pic.show();
}

}); 
```

我试过换线...

```
$('.minibutton').click('enable'); 
```

至...

```
$('.minibutton').trigger('click') 
```

它不起作用，有什么想法吗？

**谢谢**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T11:26:57.840

您应该考虑重构，以便转到下一个单词的操作独立于它的触发方式。那会更干净，您不必做假点击之类的技巧。

```
function gotoNextWord(){
    // ...
} 
```

和设置

```
$('.minibutton').on('click', gotoNextWord); 
```

我并没有完全理解你的代码，但它会变成这样：

```
// ...
if (noExist) {
    gotoNextWord();    

} else {
    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:24:46.500

尝试这个

```
if (noExist) {
    $('.minibutton').click('enable'); // if your button successfully enable then write below line after it.
    $('.minibutton').click();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T11:17:16.383

只是：`$('.minibutton').click();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T11:19:18.407

禁用

```
$('.minibutton').unbind('click').click(function(e){
   e.preventDefault();
}); 
```

启用

```
$('.minibutton').unbind('click'); 
```

# android - android dexclassloader 获取所有类的列表

> ID：12195642
> 
> 赞同：8
> 
> 时间：2012-08-30T11:15:45.243
> 
> 标签：android, classloader

我在我的 android 应用程序中使用来自 assets 或 sdcard 的外部 jar。为此，我正在使用 DexClassLoader。

```
DexClassLoader cl = new DexClassLoader(dexInternalStoragePath.getAbsolutePath(),
                        optimizedDexOutputPath.getAbsolutePath(),
                        null,
                        getClassLoader()); 
```

加载一个类：

```
Class myNewClass = cl.loadClass("com.example.dex.lib.LibraryProvider"); 
```

它工作得非常好，但现在我想在我的 DexClassLoader 中获取所有类名的列表，我发现[它](http://docs.oracle.com/javase/6/docs/api/java/lang/instrument/Instrumentation.html#getInitiatedClasses%28java.lang.ClassLoader%29)可以在 java 中工作，但在 android 中没有这样的东西。

问题是我如何从 DexClassLoader 获取所有类名的列表

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-30T12:17:38.847

`classes.dex`要列出包含您使用的文件的 .jar 文件中的所有类`DexFile`，而不是`DexClassLoader`，例如像这样：

```
String path = "/path/to/your/library.jar"
try {
    DexFile dx = DexFile.loadDex(path, File.createTempFile("opt", "dex",
            getCacheDir()).getPath(), 0);
    // Print all classes in the DexFile
    for(Enumeration<String> classNames = dx.entries(); classNames.hasMoreElements();) {
        String className = classNames.nextElement();
        System.out.println("class: " + className);
    }
} catch (IOException e) {
    Log.w(TAG, "Error opening " + path, e);
} 
```

# android - Android OpenGL ES 2.0 交换纹理失败

> ID：12195648
> 
> 赞同：0
> 
> 时间：2012-08-30T11:16:11.720
> 
> 标签：android, opengl-es, opengl-es-2.0

我已经搜索了很多，所有类似的问题和解决方案都还没有为我工作。所以我希望有人能认识到我的问题

问题描述：
我想做的是交换我正在渲染的纹理。当应用程序启动时，我加载了一个纹理并且它渲染得很好。后来我想替换它并再次调用相同的加载函数，从而生成一个新的纹理 ID。当我使用新的纹理 ID 进行渲染时，我遇到了模型完全变黑的问题。

因此，如果我运行上面的代码，则会发生以下情况：

```
Bitmap bmp = BitmapFactory.decodeResource(this.getResources(), 
    R.drawable.sphere_map1);
currentTexture = TextureHelper.loadTextureToOGL(bmp); 
```

我遇到了完全黑色纹理的问题。

下面是我用来加载纹理和绘制模型的一些重要函数如果有人需要其他代码，请告诉我。因为这是我的第一篇文章，所以也可以随意对文章的结构提出建议。

预先感谢！

```
 public static int loadTextureToOGL(Bitmap bitmap) {
    int texId[] = { -1 };
    GLES20.glGenTextures(1, texId, 0);
    int textureId = texId[0];
    glBindTexture(GLES20.GL_TEXTURE_2D, textureId);

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
    glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, mMinFilter);
    glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MAG_FILTER, mMaxFilter);
    GLUtils.texImage2D(GLES20.GL_TEXTURE_2D,0, GL_RGBA, bitmap, 0);
    GLES20.glGenerateMipmap(GLES20.GL_TEXTURE_2D);

    GeneralUtil.printGLErrorInHex();
    bitmap.recycle();

    return textureId;
}

public void draw(float[] mvp) {
    glUseProgram(mProgram);

    glEnableVertexAttribArray(mPositionHandle);
    glEnableVertexAttribArray(mNormalHandle);
    glEnableVertexAttribArray(mTexCoordHandle);

    GLES20.glActiveTexture(GLES20.GL_TEXTURE0);
    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, currentTexture);
    glUniform1i(mEnvTex0Handle, 0);

    glUniformMatrix4fv(mMVPHandle, 1, false, mvp, 0);

    glUniform3f(mColorHandle, red, green, blue);
    glUniform1f(mAttSpecularHandle, attSpecular);
    glUniform1f(mAttDiffuseHandle, attDiffuse);
    glUniform1f(mAttAmbientHandle, attAmbient);

    GeneralUtil.printGLErrorInHex();
    if (model != null) {
        glDrawArrays(GL_TRIANGLES, 0, model.getmNFaces() * 3);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T19:43:14.697

所以我想我找到了我的问题。

我没有从 GL 线程运行 glTexImage 调用，而是从 UI 线程运行它。我没有意识到它自己创建了一个 GL 线程。

# vb.net - vb.net windows应用程序中的甘特图

> ID：12195649
> 
> 赞同：-1
> 
> 时间：2012-08-30T11:16:14.933
> 
> 标签：vb.net, gantt-chart

我正在寻找在 vb.net windows 应用程序中开发甘特图应用程序。我想知道是否有任何免费的第三方工具或一些演示应用程序，以便我可以了解它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T11:27:06.100

您可以在 VB.NET 中使用[GDI API](http://msdn.microsoft.com/en-us/library/aa289159%28v=vs.71%29.aspx)轻松绘制甘特图。看看[codeproject](http://www.codeproject.com/Articles/20731/Gantt-Chart)文章。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T13:29:36.710

您可以使用 System.Windows.Forms.DataVisualization.Charting 来执行此操作。这是一些示例代码。

```
 Dim newSeries As New Series

    openConn()'opens the connection
    openRS("SELECT * FROM Data")'pull data from database
    Do Until rs.EOF
        newSeries = New Series'create a new dataSeries
        yPlot1 = CDbl(rs.Fields("Start Date").Value.ToOADate())'set beginning of bar
        yPlot2 = CDbl(DateAdd(DateInterval.Day, rs.Fields("Duration").Value, rs.Fields("Start Date").Value).ToOADate())'set end of bar
        newSeries.ChartType = SeriesChartType.RangeBar
        newSeries.YValuesPerPoint = 2
        newSeries.CustomProperties = "DrawSideBySide=false"
        xOrdinal = rs.Fields("Ordinal").Value
        newSeries.Points.AddXY(xOrdinal, yPlot1, yPlot2)
        newSeries.Points(0).ToolTip = rs.Fields("Task Name").Value.ToString
        newSeries.Name = rs.Fields("Task Name").Value.ToString
        newSeries.Points(0).Color = Color.FromKnownColor(DirectCast([Enum].Parse(GetType(KnownColor), CStr(rs.Fields("Color").Value.ToString)), KnownColor))
        newSeries.Points(0).AxisLabel = rs.Fields("Ordinal Name").Value.ToString
        seriesList.Add(newSeries)
        rs.MoveNext()
    Loop

    rs = Nothing
    cn.Close()
    cn = Nothing

    Chart1.Series.Clear()
    For Each plotSeries As Series In seriesList
        Chart1.Series.Add(plotSeries)
    Next
    Chart1.ChartAreas(0).AxisX.Interval = 1
    Chart1.ChartAreas(0).AxisY.Interval = 7
    Chart1.ChartAreas(0).AxisX.IsReversed = True
    Chart1.ChartAreas(0).AxisY.IsStartedFromZero = False
    Chart1.ChartAreas(0).AxisY.IsMarginVisible = False
    Chart1.ChartAreas(0).AxisY.IntervalType = DateTimeIntervalType.Days

    Chart1.ChartAreas(0).AxisY.Minimum = CDbl(#4/1/2012#.ToOADate())
    Chart1.ChartAreas(0).AxisY.Maximum = CDbl(#6/30/2012#.ToOADate())
    Chart1.ChartAreas(0).AxisY.LabelStyle.Format = "ddd M/d"

    Chart1.Update() 
```

您将需要在您的表单 (Chart1) 上有一个图表控件。当然，您的数据可能会有所不同，但这可能会为您提供您缺少的步骤。您还可以查看以下文档以获取更多详细信息。

[http://wiki.visualwebgui.com/pages/images/6/6a/MSChartsGanttChartAndPrinting.pdf](http://wiki.visualwebgui.com/pages/images/6/6a/MSChartsGanttChartAndPrinting.pdf)

# javascript - jQuery modal 弹出在行为上与确认和警告对话框相似

> ID：12195656
> 
> 赞同：0
> 
> 时间：2012-08-30T11:16:33.180
> 
> 标签：javascript, jquery, modal-dialog

我需要一个自定义的 jquery 模态对话框，它可以托管任何内容并从浏览器中出来（如果浏览器很小）。应该可以将对话框移动到浏览器之外的任何位置，例如警报和确认对话框。

我看到的所有对话都仅限于浏览器，但是确认导航对话行为是我所需要的。有没有可能实现？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:26:38.933

你试过 window.open(...) 吗？阅读[http://www.w3schools.com/jsref/met_win_open.asp](http://www.w3schools.com/jsref/met_win_open.asp)

# deployment - 自动化部署软件

> ID：12195658
> 
> 赞同：0
> 
> 时间：2012-08-30T11:16:37.943
> 
> 标签：deployment, automation

请问有没有一些gui软件可以在windows平台下部署应用程序和数据库？我需要从一个地方从多台服务器的更改列表中配置、安装、更新和卸载应用程序（通过鼠标单击是最佳选择）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:41:58.480

看看[夸蒂](http://Www.kwatee.net)。它在 Windows、Linux 或 Mac 上的 tomcat/mysql 下运行。它有一个用于配置和部署管理的 web gui，但您也可以使用 CLI 脚本实现自动化。

# java - JBoss 部署错误：原因：java.lang.RuntimeException：application.xml 中列出的 .war 模块在 .ear 中不存在

> ID：12195663
> 
> 赞同：3
> 
> 时间：2012-08-30T11:16:48.643
> 
> 标签：java, eclipse, deployment, jboss

我正在使用 jboss-5.1.0.GA 和 jdk1.6。我在 C:\atgcertenv20120601\jboss-5.1.0.GA\server\AllStocks\deploy\stock.ear 中有我的 stock.ear。运行时出现部署错误。找到以下错误跟踪。

```
15:41:17,518 ERROR [ProfileDeployAction] Failed to add deployment: stock.ear
org.jboss.deployers.spi.DeploymentException: Exception determining structure: Ab
stractVFSDeployment(stock.ear)
        at org.jboss.deployers.spi.DeploymentException.rethrowAsDeploymentExcept
ion(DeploymentException.java:49)
        at org.jboss.deployers.structure.spi.helpers.AbstractStructuralDeployers
.determineStructure(AbstractStructuralDeployers.java:85)
        at org.jboss.deployers.plugins.main.MainDeployerImpl.determineStructure(
MainDeployerImpl.java:1004)
        at org.jboss.deployers.plugins.main.MainDeployerImpl.determineDeployment
Context(MainDeployerImpl.java:440)
        at org.jboss.deployers.plugins.main.MainDeployerImpl.addDeployment(MainD
eployerImpl.java:390)
        at org.jboss.deployers.plugins.main.MainDeployerImpl.addDeployment(MainD
eployerImpl.java:300)
        at org.jboss.system.server.profileservice.repository.MainDeployerAdapter
.addDeployment(MainDeployerAdapter.java:86)
        at org.jboss.system.server.profileservice.repository.ProfileDeployAction
.install(ProfileDeployAction.java:61)
        at org.jboss.system.server.profileservice.repository.AbstractProfileActi
on.install(AbstractProfileAction.java:53)
        at org.jboss.system.server.profileservice.repository.AbstractProfileServ
ice.install(AbstractProfileService.java:361)
        at org.jboss.dependency.plugins.AbstractControllerContext.install(Abstra
ctControllerContext.java:348)
        at org.jboss.dependency.plugins.AbstractController.install(AbstractContr
oller.java:1631)
        at org.jboss.dependency.plugins.AbstractController.incrementState(Abstra
ctController.java:934)
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(Abstr
actController.java:1082)
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(Abstr
actController.java:984)
        at org.jboss.dependency.plugins.AbstractController.change(AbstractContro
ller.java:822)
        at org.jboss.dependency.plugins.AbstractController.change(AbstractContro
ller.java:553)
        at org.jboss.system.server.profileservice.repository.AbstractProfileServ
ice.activateProfile(AbstractProfileService.java:306)
        at org.jboss.system.server.profileservice.ProfileServiceBootstrap.start(
ProfileServiceBootstrap.java:271)
        at org.jboss.bootstrap.AbstractServerImpl.start(AbstractServerImpl.java:
461)
        at org.jboss.Main.boot(Main.java:221)
        at org.jboss.Main$1.run(Main.java:556)
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.RuntimeException: Error determining structure: stock.ear
        at org.jboss.deployment.EARStructure.determineStructure(EARStructure.jav
a:293)
        at org.jboss.deployers.vfs.plugins.structure.StructureDeployerWrapper.de
termineStructure(StructureDeployerWrapper.java:73)
        at org.jboss.deployers.vfs.plugins.structure.VFSStructuralDeployersImpl.
doDetermineStructure(VFSStructuralDeployersImpl.java:196)
        at org.jboss.deployers.vfs.plugins.structure.VFSStructuralDeployersImpl.
determineStructure(VFSStructuralDeployersImpl.java:221)
        at org.jboss.deployers.structure.spi.helpers.AbstractStructuralDeployers
.determineStructure(AbstractStructuralDeployers.java:77)
        ... 21 more
Caused by: java.lang.RuntimeException: stk_bootstrap.war module listed in applic
ation.xml does not exist within .ear vfsfile:/C:/jboss-5.1.0.GA/server/AllStocks/deploy/ stock.ear/
        at org.jboss.deployment.EARStructure.determineStructure(EARStructure.jav
a:272)
        ... 25 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T11:34:46.407

战争真的在耳边吗？您可以使用 WinRAR 或类似工具打开 .ear 并检查。

你在使用 Eclipse 吗？如果在 Eclipse 中关闭自动构建，它不会在打包 ear 之前创建 war 或 ejb.jar。您可以手动执行或在 Project -> Build Automatically 下启用它。

您是否将 .war 包含在 .ear 项目中？右键单击项目、属性并在“部署程序集”下进行检查。

![在此处输入图像描述](../Images/dd9d91cb276daf443acc2a0b576fe72b.png)

# ios - iOS中UIImageView上的动画之间的延迟

> ID：12195676
> 
> 赞同：-1
> 
> 时间：2012-08-30T11:17:24.010
> 
> 标签：ios, animation, ios5

我有一个由一组图像组成的动画，然后我在其上运行

```
[myUIImageView startAnimating] 
```

**我希望动画运行一次，然后停止 3 秒，然后重复。**

我需要在一个单独的线程中运行这个动画，所以我有

```
NSThread *animationThread = [[NSThread alloc] initWithTarget:self selector:@selector(startAnimTask) withObject:nil waitUntilDone:NO]; 
[animationThread start]; 
```

在我的 viewDidLoad 中，然后

```
-(void) startAnimTask {

   //create array of images here; animationDuration (3) and animationRepeatCount (1)
   [self setUpAnimation];

   while (true){
       [myUIImageView startAnimating];
       usleep(3);        
       [myUIImageView stopAnimating];
       usleep(3);    
   }
} 
```

使用这种方法，我收到了内存警告。我还尝试在 MainThread 上运行启动和停止，但没有成功。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T11:34:39.573

做这个：

```
 [myUIImageView startAnimating];
 [self performSelector:@selector(startAnimTask) 
         withObject:nil 
         afterDelay:(myUIImageView.animationDuration+3.0)]; 
```

现在选择器是：

```
 -(void)startAnimTask
 {
   [myUIImageView startAnimating];
   //repeat again then add above selector code line here
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T11:25:40.063

UI 不是线程安全的，所以 UI 调用应该只在主线程中执行，也许就是这种情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T11:32:34.107

我认为你可以这样做：

```
 [self performSelector:@selector(startAnimTask) 
             withObject:nil 
             afterDelay:0.1];

  [self performSelector:@selector(startAnimTask) 
             withObject:nil 
             afterDelay:3.0]; 
```

在*startAnimTask*方法中编写您的动画逻辑代码。

享受编码:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T11:45:18.407

试试这种方法来完成你的任务：

```
[self performSelector:@selector(myTask) 
             withObject:nil 
             afterDelay:3.0];

-(void)myTask{

//Write your logic for animation

} 
```

# c# - 读取 XML 值 Web 服务

> ID：12195681
> 
> 赞同：0
> 
> 时间：2012-08-30T11:17:45.400
> 
> 标签：c#, asp.net, xml, web-services

我想在运行时读取 xml，而不将其保存在路径上

经过我的搜索，我发现，在控制台应用程序中，我需要使用 Console.Out 来显示结果

```
xmlSerializer.Serialize(Console.Out, patient); 
```

在 Windows / Web 应用程序中，我们需要设置路径

```
StreamWriter streamWriter = new StreamWriter(@"C:\test.xml"); 
```

但我需要在不保存的情况下读取 xml，我正在使用 Webserive 我需要读取它并决定它是否有效

我希望我清楚地定义它..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:24:28.420

使用[`XmlDocument`](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)对象。
有几种加载 XML 的方法，您可以使用[`XmlDocument.Load()`](http://msdn.microsoft.com/en-us/library/875kz807.aspx)并在其中指定您的 URL，或者使用[`XmlDocument.LoadXml()`](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.loadxml.aspx)从字符串加载 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:25:01.617

您可以使用[XmlDocument.LoadXml](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.loadxml.aspx)类来读取接收到的 xml。无需将其保存到磁盘。

```
try
{
    XmlDocument doc = new XmlDocument();
    doc.LoadXml(receivedXMLStr);
    //valid xml
}
catch (XmlException xe)
{ 
    //invalid xml
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T11:25:29.043

使用 Linq2Xml..

```
XElement doc;
try
{
doc=XElement.Load(yourStream);
}
catch
{
//invalid XML
}

foreach(XElement node in doc.Descendants())
{
node.Value;//value of this node
nodes.Attributes();//all the attributes of this node
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T11:39:42.180

您需要使用该`Deserialize`选项来读取 xml。按照以下步骤来实现它，

1.  创建一个目标类。它的结构应该代表 xml 输出。
2.  创建类后，使用以下代码将您的 xml 加载到目标对象中

    ```
    TargetType result = null;
    XmlSerializer worker = new XmlSerializer(typeof(TargetType));
    result = worker.Deserialize("&lt;xml>.....&lt;/xml>"); 
    ```

现在 xml 被加载到对象“结果”中并使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T18:45:49.677

感谢大家的回复，我想加载我的 XML 而不将其保存在本地路径上，因为节省了创建许多 XML。

最后我找到了从内存流上的类加载 XML 的解决方案，我认为这个解决方案非常简单并且可以优化

```
XmlDocument doc = new XmlDocument();
System.Xml.Serialization.XmlSerializer serializer2 = new System.Xml.Serialization.XmlSerializer(Patients.GetType());
System.IO.MemoryStream stream = new System.IO.MemoryStream();
serializer2.Serialize(stream, Patients);
stream.Position = 0;
doc.Load(stream); 
```

# delphi - Delphi XE2 VCL 样式，如何在 TBitBtn 上禁用 VCL 样式？

> ID：12195687
> 
> 赞同：1
> 
> 时间：2012-08-30T11:17:56.430
> 
> 标签：delphi, delphi-xe2, vcl-styles

我在 Delphi XE2 中使用新的 VCL 样式系统，它工作正常，但在一个表单上我想要例外。此表单包含多个 TBitBtn 控件，每个 TBitBtn 控件都有自己的字体颜色（clRed、clBlue、clLime 等），与其他控件不同。由于 Style 实现，所有 TBitBtn 控件的 Caption 都以黑色而不是设置颜色显示。是否有任何可以在 TBitBtn 控件上注册的 TStyleHook，它在该表单上禁用了 TBitBtn 控件上的样式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T17:57:55.057

[`TBitBtn`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Buttons.TBitBtn)组件没有使用vcl风格的钩子，这个控件使用类`TButtonGlyph`（在Vcl.Buttons单元的实现部分定义和实现）使用Windows主题或者当前的vcl风格来绘制按钮，这个类（ TButtonGlyph) 在本单元之外无法访问，所以你在这里不走运。

我想到的唯一选择是创建一个插入器类并拦截控件的`CN_DRAWITEM`消息`TBitBtn`，然后执行您自己的代码来绘制按钮。

```
 TBitBtn = class(Vcl.Buttons.TBitBtn)
  private
   procedure MyDrawItem(const DrawItemStruct: TDrawItemStruct);
  public
   procedure CNDrawItem(var Message: TWMDrawItem); message CN_DRAWITEM;
  end;

procedure TBitBtn.CNDrawItem(var Message: TWMDrawItem);
begin
  MyDrawItem(Message.DrawItemStruct^);
end;

procedure TBitBtn.MyDrawItem(const DrawItemStruct: TDrawItemStruct);
begin
  //the new code goes here.
end; 
```

# ssas - PowerPivot 登录系统到 SSAS

> ID：12195690
> 
> 赞同：1
> 
> 时间：2012-08-30T11:18:03.573
> 
> 标签：ssas, powerpivot

是否可以在 PowerPivot 中创建一个系统，我可以在其中选择我想用来登录 SSAS 服务器的特定用户？通过系统，我的意思是类似于带有用户/密码数据或任何类似内容的弹出窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:55:20.403

SSAS 仅适用于 Windows 身份验证，所以不，您不能这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:59:43.280

它仅支持 Windows 身份验证。引用自 MSDN

“SQL Server Analysis Services 仅支持 Windows 身份验证”

有关如何使用 Kerberos 身份验证进行设置的信息，请参阅以下知识库：http: [//support.microsoft.com/kb/917409](http://support.microsoft.com/kb/917409)

看看这是否提供任何见解： [http ://www.powerpivotblog.nl/tag/kerberos](http://www.powerpivotblog.nl/tag/kerberos)

# jquery - 从另一个页面加载此下拉菜单后，Jquery 立即更改选择语法

> ID：12195702
> 
> 赞同：0
> 
> 时间：2012-08-30T11:18:41.967
> 
> 标签：jquery, select, drop-down-menu, onchange

我有以下代码将元素从远程页面（在同一域下）加载到当前页面中。#Anhui 元素包含一个下拉菜单，我希望在加载后以选择语法在菜单中添加一些值。我想添加的价值是：

```
size="5" onChange="this.form['CAT_Custom_221342'].value=this[this.selectedIndex].value" 
```

这是我得到的事件代码，请帮助我进一步编辑它，谢谢。

```
function StateAnhui() { 
$('#SuburbSelect').load('/Country/CN/_CN_suburbs.html #Anhui'); 
} 
```

**这是加载的下拉菜单：**

```
<div id="Anhui">
<fieldset class="suburbSelect">
<label for="suburbSelect">安徽 / Province  </label> 
<select>

    <option value="合肥">合肥</option>
    <option value="巢湖">巢湖</option>
    <option value="蚌埠">蚌埠</option>
    <option value="安庆">安庆</option>
    <option value="六安">六安</option>
    <option value="滁州">滁州</option>
    <option value="马鞍山">马鞍山&lt;/option>
    <option value="阜阳">阜阳</option>
    <option value="宣城">宣城</option>
    <option value="铜陵">铜陵</option>
    <option value="淮北">淮北</option>
    <option value="芜湖">芜湖</option>
    <option value="宿州">宿州</option>
    <option value="淮南">淮南</option>
</select>
</fieldset>
</div> 
```

**加载后，我希望下拉列表是这样的：**

```
<div id="Anhui">
<fieldset class="suburbSelect">
<label for="suburbSelect">安徽 / Province  </label> 
<select size="5" onChange="this.form['CAT_Custom_221342'].value=this[this.selectedIndex].value">

    <option value="合肥">合肥</option>
    <option value="巢湖">巢湖</option>
    <option value="蚌埠">蚌埠</option>
    <option value="安庆">安庆</option>
    <option value="六安">六安</option>
    <option value="滁州">滁州</option>
    <option value="马鞍山">马鞍山&lt;/option>
    <option value="阜阳">阜阳</option>
    <option value="宣城">宣城</option>
    <option value="铜陵">铜陵</option>
    <option value="淮北">淮北</option>
    <option value="芜湖">芜湖</option>
    <option value="宿州">宿州</option>
    <option value="淮南">淮南</option>
</select>
</fieldset>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:29:26.123

为什么你不能只使用一个 jquery 函数呢

```
$(document).ready(function(){

$('#Anhui select').change(function(){

 $(this).attr('size', 5) ;
this.form['CAT_Custom_221342'].value=$(this).val();

});

}); 
```

# c++ - Kinect 骨架离线提取

> ID：12195704
> 
> 赞同：0
> 
> 时间：2012-08-30T11:18:46.517
> 
> 标签：c++, kinect

我想做的是：
我有一些用 kinect 记录的图像，我只有深度和彩色图像。
有没有办法使用它和 MS Kinect SKD 来提取骨架数据？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T00:34:37.757

Kinect SDK 没有该功能。这样做的唯一方法（在我看来）是创建自己的算法或使用 OpenCV（用于 C# 的 EMGU）或类似方法。

检查此链接： http: [//myrandomtechnotes.blogspot.mx/2010_12_01_archive.html](http://myrandomtechnotes.blogspot.mx/2010_12_01_archive.html)

PS你知道Kinect Studio吗？

# html - CSS3 box-sizing 属性

> ID：12195707
> 
> 赞同：0
> 
> 时间：2012-08-30T11:18:55.693
> 
> 标签：html, css, properties

我不明白我应该如何使用 box-sizing 属性。因为这：

```
<!DOCTYPE html>
<html>
    <head>
        <style type="text/css"> 
        div.container
        {
            width:10em;
            border:1em solid;
        }
        div.box
        {
            box-sizing:border-box;
            -moz-box-sizing:border-box; /* Firefox */
            -webkit-box-sizing:border-box; /* Safari */
            width:50%;
            border:1em solid red;
            float:left;
        }
        </style>
    </head>
    <body>

        <div class="container">
        <div class="box">1</div>
        <div class="box">2</div>
        </div>

    </body>
</html> 
```

相当于：

```
<!DOCTYPE html>
<html>
    <head>
        <style type="text/css"> 
        div.container
        {
            width:10em;
            border:1em solid;
        }
        div.box
        {
            width:3em;
            border:1em solid red;
            float:left;
        }
        </style>
    </head>
    <body>

        <div class="container">
        <div class="box">1</div>
        <div class="box">2</div>
        </div>

    </body>
</html> 
```

那么我什么时候应该使用该属性，而这正是这样做的呢？我使用了 w3 [http://www.w3schools.com/cssref/css3_pr_box-sizing.asp中的示例](http://www.w3schools.com/cssref/css3_pr_box-sizing.asp)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T11:22:53.727

`box-sizing: border-box`当您无法根据框的边距、边框和内边距指定确切的内容宽度时最有用，因为您事先不知道（也无法控制）这些值是什么。

在你的第一个例子中，如果你*不知道*盒子里有多少填充或它的边框有多厚，让它使用边框模型允许你只设置`width: 50%`以确保盒子总是占据 50% 的宽度它的容器，不管边界和填充。在第二个例子中，如果你设置`width: 50%`了内容的宽度；边框和填充将添加到它，导致它实际上扩展超过其容器宽度的 50%。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T11:23:23.537

在第一个示例中，您将宽度设置为`50%` *加上*一些边框，但由于属性的存在，`box-sizing:border-box;`整个宽度*包括*内部边框，因此框的宽度为*%*`50`（如果有的话，还可以选择填充）

 *这等效于第二个示例（没有`box-sizing:border-box;`），其中总宽度为，`1em + 3em + 1em = 5em`即`50%``10em`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-30T11:24:47.173

[**box-sizing**](https://developer.mozilla.org/en-US/docs/CSS/box-sizing) CSS 属性用于更改用于计算元素宽度和高度的默认 CSS 框模型。可以使用此属性来模拟不正确支持 CSS 框模型规范的浏览器的行为。

注意：永远不要使用[http://www.w3schools.com/](http://www.w3schools.com/)进行学习。有关更多详细信息，请参阅[w3fools.com](http://w3fools.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T11:49:00.777

实际上，当我们在垂直和水平方向的 div 元素中使用填充时，它会在总宽度和高度中添加填充。

```
like our div width is 100px and we give 5px padding from left and right side so div will calculate total of 100px + 5px + 5px = 120. 
```

所以如果我们`box-sizing`在这里使用属性，我们就不需要调整宽度，因为它不会计算 padding 的额外宽度。

看演示： -http: [//tinkerbin.com/JtOC6ZJr](http://tinkerbin.com/JtOC6ZJr)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-08T10:24:23.627

使用灵活盒模型时需要注意的一个问题是，该模块仍然是一个草案，并且跨浏览器支持和实现仍然不完整。你可以找到一篇关于这个主题的好帖子[http://webdevhub.co.uk/css3-flexible-box-model/](http://webdevhub.co.uk/css3-flexible-box-model/)*

# liferay - 是否可以将 Liferay SDK 放在与源代码不同的位置？

> ID：12195717
> 
> 赞同：5
> 
> 时间：2012-08-30T11:19:24.083
> 
> 标签：liferay

我想请教您使用 Liferay SDK 进行开发的最佳实践。我已经下载了 SDK，我已经准备好 Eclipse，它可以工作，我可以创建新的 portlet 并运行本地 Liferay 实例来测试它。

这是我的情况——我拥有的所有源代码都在 Eclipse 工作区中，目前它只是我正在处理的 portlet。

Liferay SDK 我的位置与工作区完全不同。假设 ~/dev/liferay_sdk。Eclipse 工作区位于 ~/workspace。

起初，它不是那样工作的。Eclipse 由于某种原因无法找到或使用 Liferay SDK。当我将 Eclipse/Liferay 配置中的“项目验证”更改为“忽略”“Liferay 插件 SDK 无效”时，它开始正常工作。

例如，当需要构建 WAR 时，就会出现下一个问题。在工作区的 portlet 目录中存在“build.xml”文件。但是里面指的是另外一个xml文件，应该是上一个目录，这个指的是相对位置更多的东西，以此类推。

简而言之，它假定您在 Liferay SDK 中拥有 portlet 等。像“~/dev/liferay_sdk/portlets”。

我的问题是，我完全错了，还是你能建议我最好的做法？

我不想混合 SDK 和代码，这对我来说听起来不对。

感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:07:58.337

我认为，最佳实践仍然是您的 portlet 项目位于 Liferay Plugins SDK 目录中。这样，您就可以利用 Liferay IDE 插件的所有优势，例如 Eclipse。因为据我了解 Liferay IDE 不允许您在其他位置拥有 portlet 项目。从 Liferay SDK 目录中将项目导入 Eclipse 非常容易，这不是问题。

但是当我尝试将 portlet 项目保存到 Git 存储库时，我也遇到了同样的问题。带有符号链接的可能解决方案并非在每个系统上都能正常工作。因此，我稍微修改了 build.xml 文件，以便能够从任何目录运行 ant 任务。对于 portlet，它是这样的：

```
<project name="your-portlet" basedir="." default="deploy">
    <property file="build.properties" />

    <property name="project.dir" value="${liferay.sdk.home}" />

    <import file="${project.dir}/build-common-plugin.xml" />
</project> 
```

请注意，您应该在 build.properties 中定义属性“liferay.sdk.home”，它应该是 Liferay 插件 SDK 的路径。

至于其他类型的 Liferay 插件（主题、钩子等），您应该导入另一个构建文件来构建该类型的插件。例如，对于主题，它将是：

```
<import file="${project.dir}/themes/build-common-theme.xml" /> 
```

希望你能明白这一点。:) 但是在做这样的事情之前要三思而后行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T13:42:06.320

Liferay 插件是在 Liferay Plugins SDK 中开发的，它被称为***SDK***是有充分理由的。

我没有发现 plugins-SDK 和捆绑在一起的代码有任何问题，以下是几个原因：

如果您在 github 上查看 liferay[插件存储库](https://github.com/liferay/liferay-plugins "插件 SDK 中的 Liferay 插件")，您会发现所有示例 portlet 和其他插件都存储在 plugins-SDK 内各自的文件夹中。

因此，如果您想开发 liferay 插件（有或没有 IDE），最佳实践（*我认为唯一有效的方法*）是在插件 SDK 的各个文件夹中创建项目，如文件夹内的 portlet 项目、`portlets`文件夹内的挂钩项目`hooks`等.

如果您在此 IDE 中创建插件项目（Liferay 项目）时使用了[Liferay IDE](http://www.liferay.com/community/wiki/-/wiki/Main/Liferay+IDE+Getting+Started+Tutorial "Liferay IDE 入门")，则您指定 SDK 和服务器运行时，它的作用是在插件 SDK 中创建项目并在创建的项目中复制`.settings`, `.classpath`&`.project`文件. 它不会像 eclipse 通常为其他项目所做的那样在您的工作区中创建项目。

希望我已经设法解释清楚，这就是你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T17:56:23.613

我已经对其他答案感到非常满意，这可以通过评论分发，但是单独的答案提供了更多的结构化选项：

正如 Prakash 所说，这样做还不错。除了他的回答之外，您不需要将代码放在工作区目录中。Eclipse 很乐意将它放在文件系统中的任何位置 - 因此，当您使用 Eclipse 时，您甚至不关心您的代码到底在哪里（当您将它检查到版本控制中时 - 对吗？ - 您实际上不需要关心。

如果您想使用 Liferay 的 OOTB ant 脚本：它们完全适合您描述的设置：在 SDK 目录中工作。这实际上还不错，但是如果您不喜欢它，您只需要接受如果不更改它就无法使用 build.xml（就像 Artem 建议的那样）。

另一种选择是使用 maven - 这也绕过了 sdk（和 Liferay IDE 集成），因此您可以再次自由地将源代码放在您喜欢的任何地方，让 maven 完成剩下的工作。

我可以想象 Artem 的建议有一些相当深奥和罕见的问题（比如当你暗示一些相对位置时引用自定义父主题）但我认为这是非常次要的，所以如果这对你有用：继续。请记住，您不满足 SDK 所做的基本假设，因此您可能必须更改违反假设的内容。如果你记住这一点，我无法想象这太难了。

当然，该解决方案缺少的是包含 build.${username}.properties 的简洁处理 - 您必须拥有自己的定义 ${liferay.sdk.home} 的 build.properties。如果你不是在一个团队中工作，那没关系。否则，您将不得不自己发明（并对其进行编码）或依赖全局参数来配置每个团队成员。

# php - 用PHP提交表单时浏览器不断刷新

> ID：12195721
> 
> 赞同：-2
> 
> 时间：2012-08-30T11:19:35.630
> 
> 标签：php, javascript

在连续提交表单时，我收到了带有以下消息的警报。

**“要显示此页面，Firefox 必须发送将重复之前执行的任何操作（例如搜索或订单确认）的信息。”**

提前谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:41:47.663

我过去曾试图避免这种情况，我相信这是不可能的。这是因为浏览器询问是否应该重新提交 $_POST 和 $_GET 信息。

据我所知，这是无法避免的，要避免这种情况，您应该只重定向到 URL，而不是刷新页面。

希望这可以帮助。:)

# php - 将数组拆分为大小交替的块

> ID：12195728
> 
> 赞同：1
> 
> 时间：2012-08-30T11:19:57.520
> 
> 标签：php, arrays, split, chunks

我有一个数组：

```
Array
(
    [0] => 0
    [1] => 1
    [2] => 2
    [3] => 3
    [4] => 4
    [5] => 5
    [6] => 6
    [7] => 7
    [8] => 8
    [9] => 9
) 
```

我想将数组拆分为交替的块。（尺寸 2 然后 3 然后 2 然后 3 等等）

```
Array
(
    [0] => Array
        (
            [0] => 0
            [1] => 1
            [2] => 2
        )

    [1] => Array
        (
            [0] => 3
            [1] => 4
        )

    [2] => Array
        (
            [0] => 5
            [1] => 6
            [2] => 7
        )

    [3] => Array
        (
            [0] => 8
            [1] => 9
        )

) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T11:42:44.120

那应该工作：

```
$a = array(0 => 0,1 => 1,2 => 2,3 => 3,4 => 4, 5 => 5, 6 => 6,7 => 7,8 => 8,9 => 9);
$chunks = array();
$i=1;
while(count($a)){
    $chunks[] = array_splice($a, 0,(2+($i%2)),array());

    $i++;
}

echo "<pre>";
var_dump($chunks); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T11:23:03.427

您可以[`array_splice`](http://php.net/manual/en/function.array-splice.php)用于拆分数组，但是您需要设置条件对吗？你想在什么基础上拆分它们？

您可以使用[`array_merge`](http://php.net/manual/en/function.array-merge.php)将它们带回`array`数组中。

如果是您当前的代码，代码将是：

### PHP 代码

```
<?php
    $array = array(0,1,2,3,4,5,6,7,8,9);
    $final = array(
        array_splice($array, 0, 3),
        array_splice($array, 1, 2),
        array_splice($array, 1, 2),
        array_splice($array, 1, 2),
    );
    print_r($final);
?> 
```

### 输出

```
Array
(
    [0] => Array
        (
            [0] => 0
            [1] => 1
            [2] => 2
        )

    [1] => Array
        (
            [0] => 4
            [1] => 5
        )

    [2] => Array
        (
            [0] => 6
            [1] => 7
        )

    [3] => Array
        (
            [0] => 8
            [1] => 9
        )

) 
```

### 在这里摆弄：[http ://codepad.org/JzxcZ2Q1](http://codepad.org/JzxcZ2Q1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-30T09:29:58.267

重复调用 of`array_splice()`似乎是一个很好的方法。这是 István Őri 答案的更简洁版本。从 5 中减去即可消除使用模运算符的需要。

代码：（[演示](https://3v4l.org/YQ5Sp)）

```
$array = range(1, 10);

$chunks = [];
$chunkSize = 3;

while ($array) {
    $chunkSize = 5 - $chunkSize;
    $chunks[] = array_splice($array, 0, $chunkSize);
}
var_export($chunks); 
```

此代码段`$array`在迭代时进行修改。 `array_splice()`不断从数组的前面删除元素。最终数组将变为空并且`while()`条件将失败——打破循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T11:31:42.990

您可以使用它，它不是最优雅的，但它会为您解决问题 - 您可以很好地修改它并对其进行调整以进一步适应您的目的：

```
<?php

$originalArray = array(0,1,2,3,4,5,6,7,8,9);

$counter=count($originalArray);
$isTwo=true;
$newArray=array();
$arrElement=0;
$i=0;
while($i<$counter)
{
    if($isTwo)
    {
        $newArray[$arrElement]= array();
        for($j=0; $j<2; $j++)
        {
            $newArray[$arrElement][$j]=$originalArray[$i+$j];
        }
        $i+=2;
        $isTwo=false;
        $arrElement++;
    }
    else
    {
        $newArray[$arrElement]= array();
        for($j=0; $j<3; $j++)
        {
            $newArray[$arrElement][$j]=$originalArray[$i+$j];
        }
        $i+=3;
        $isTwo=true;
        $arrElement++;
    }
}
    var_dump($newArray);
?> 
```

输出：

```
array(4) {
  [0]=>
  array(2) {
    [0]=>
    int(0)
    [1]=>
    int(1)
  }
  [1]=>
  array(3) {
    [0]=>
    int(2)
    [1]=>
    int(3)
    [2]=>
    int(4)
  }
  [2]=>
  array(2) {
    [0]=>
    int(5)
    [1]=>
    int(6)
  }
  [3]=>
  array(3) {
    [0]=>
    int(7)
    [1]=>
    int(8)
    [2]=>
    int(9)
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-31T08:05:12.763

```
$tobechunked_arr = array(0,1,2,3,4,5,6,7,8,9);
$chunk_size_arr = array(3,2,3,2);
$j = 0;
foreach($chunk_size_arr as $key => $val)
{
    for($i = 0; $i < $val; $i++)
    {
        $result_arr[$key][] = $tobechunked_arr[$j];
        $j++;
    }
}

echo "<pre>";
print_r($result_arr); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-30T11:23:40.213

试试这个

```
<?php
$input_array = array('a', 'b', 'c', 'd', 'e');
print_r(array_chunk($input_array, 2));
print_r(array_chunk($input_array, 2, true));
?> 
```

**更新**

```
<?php 
$myArray = array("abc","def","ghi","jkl","mno","pqr","stu","vwx","yz");
$newArray = array_chunk($myArray, 2, false);
// Now process the multidimensional array made from array_chunk()
$i = 0;
foreach ($newArray as $inner_array) {
    $i++;
    echo "<h2>Chunk $i</h2>";
    while (list($key, $value) = each($inner_array)) {    
        echo "$key: $value <br />"; 
    }
}
?> 
```

**输出**

**块 1**

0：ABC

1：定义

**块 2**

0：吉

1：jkl

**块 3**

0: 无

1：pqr

**块 4**

0：斯图

1：vwx

**块 5**

0：yz

# c# - 如何将int数组值复制到字节数组中？仅复制 C# 中的值

> ID：12195729
> 
> 赞同：1
> 
> 时间：2012-08-30T11:19:59.670
> 
> 标签：c#, arrays, integer, bytearray

嗨我有这种数组

```
int[] arrayint = new int[32]; 
```

它包含

```
arrayint[0] = 99
arrayint[1] = 121
arrayint[2] = 99
arrayint[3] = 66
... 
```

有没有一种简单的方法可以将该整数数组复制到一个字节数组中，就像我想要制作这个字节数组一样

```
byte[] streambit; 
```

它应该与arrayint值相同

我想成为这样的输出

```
streambit[0] = 99
streambit[1] = 121
streambit[2] = 99
streambit[3] = 66
... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T11:21:34.583

```
streambit = arrayint.Select(i => (byte)i).ToArray(); 
```

只需确保您没有大于 255 的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T11:35:42.163

没有 LINQ（例如，在针对 .Net 2.0 时很有用）：

```
byte[] bytearray = Array.ConvertAll<int, byte>(arrayint, (z) => (byte)z); 
```

* * *

嗯，是的，比 LINQ 快得多：

测试代码（可以改进，但这给出了一个想法）：

```
private static void Main(string[] args)
{
    int[] arrayint = new int[40000];

    arrayint[0] = 99;
    arrayint[1] = 157;
    arrayint[2] = 1;
    arrayint[3] = 45;

    byte[] bytearray;

    Stopwatch sw = Stopwatch.StartNew();
    for (int i = 0; i < 10000; i++)
    {
        bytearray = Array.ConvertAll<int, byte>(arrayint, (z) => (byte)z);
    }

    sw.Stop();
    Console.WriteLine("ConvertAll took {0} ms", sw.ElapsedMilliseconds);

    sw = Stopwatch.StartNew();
    for (int i = 0; i < 10000; i++)
    {
        bytearray = arrayint.Select(z => (byte)z).ToArray();
    }

    sw.Stop();
    Console.WriteLine("LINQ took {0} ms", sw.ElapsedMilliseconds);

    Console.ReadLine();
} 
```

结果：

> ConvertAll 花了 1865 毫秒
> 
> LINQ 耗时 6073 毫秒

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T11:32:35.920

```
streambit=arrayint.Where(x=>x>=0&&x<=255).Select(y=>(byte)y).ToArray(); 
```

# google-drive-api - 目标帐户的 Google Drive Storage 购买链接

> ID：12195735
> 
> 赞同：0
> 
> 时间：2012-08-30T11:20:31.857
> 
> 标签：google-drive-api

Google Drive 的正常购买链接是[https://www.google.com/settings/storage/](https://www.google.com/settings/storage/) 我想确保此链接对特定帐户开放，例如：

[https://www.google.com/settings/storage/?authuser=target@account.com](https://www.google.com/settings/storage/?authuser=target@account.com)

此解决方案仅适用于已登录的帐户。

# instruments - Instrument-多设备执行

> ID：12195736
> 
> 赞同：2
> 
> 时间：2012-08-30T11:20:36.767
> 
> 标签：instruments

我可以使用命令行为单个设备/模拟器运行仪器，但我需要在两个设备上运行它。手动我可以通过打开两个新的 Instruments 窗口并制作两个 js 副本并导入它来实现这一点。但我需要使用命令行来实现这一点。任何人都可以帮助我实现这一目标，或者是否有人有相同的指导方针？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T07:05:40.950

我也为此苦苦挣扎，这是我解决方案的一部分。我所做的是：

使用预先选择的脚本 .js 文件在仪器中创建跟踪文件并将其保存到磁盘。

读取所有连接设备的 UDID。循环遍历所有连接的设备并将跟踪文件中的 UDID 替换为当前的 UDID。在同一个循环中打开仪器。

```
for line in $(system_profiler SPUSBDataType | sed -n -e '/iPad/,/Serial/p' -e '/iPhone/,/Serial/p' | grep "Serial Number:" | awk -F ": " '{print $2}'); do
  UDID=${line}
  file$x $(replace 345w67ww89ww0w98w762wewq33e2 with ${UDID})
  open -a Instruments /PATH/TO/TRACE/file$x
done 
```

此解决方案将打开 Instruments 的多个窗口。您可以使用 appleScript 浏览它们以单击录制按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-24T09:18:37.810

实现它的另一种方法是打开两个单独的 Instrument 实例并执行它

# java - 带有相对地址的 Java URL

> ID：12195739
> 
> 赞同：1
> 
> 时间：2012-08-30T11:20:44.367
> 
> 标签：java, url, relative-path

快速提问：

对于某些启动，我需要将带有 url 的 java URL 类传递给特定文件。但是我在我的应用程序的资源中拥有这个文件。所以我问是否可以使用相对地址创建 java URL 类？我从来没有见过这样的东西，所以我想知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:25:39.967

尝试先创建一个`File`对象（您可以在其中提供资源的相对路径），然后将其转换为 URL：

```
File file = new File("resources/myresource.abc");
URL url = file.toUrl(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T11:37:32.947

您可以获得相对于您的 java 类文件所在位置的 URL，并在同一位置引用文件。这是使用类的[getResource()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#getResource%28java.lang.String%29)方法完成的。将资源放在一个名为“resources”的文件夹中，与您的 .class 文件位于同一位置。然后你可以得到一个相对于类位置的 url，如下所示：

```
URL url = <InsertYourClassName>.class.getResource("resources/<InsertNameOfResource>"); 
```

这将获得一个相对于您所在班级的 url 路径，并在资源文件夹中查找您的资源。只需将资源放在与您的类相同的目录中，而不是放在这样的资源文件夹中，就可以实现相同的目的：

```
URL url = <InsertYourClassName>.class.getResource("<InsertNameOfResource>"); 
```

希望这可以帮助 ：）

# php - 电子邮件营销统计实施

> ID：12195741
> 
> 赞同：1
> 
> 时间：2012-08-30T11:20:58.203
> 
> 标签：php, mysql

我很快将负责制作电子邮件活动经理，其中一部分将是一个统计屏幕，显示有多少电子邮件已成功发送，有多少未发送，以及有多少人实际打开了电子邮件。

我无法理解的主要事情是如何编码处理人们打开电子邮件的部分。

我知道您可能可以使用 1x1 白色像素来执行此操作，然后可能以某种方式让服务器根据图像文件名检测到它已加载并从中触发脚本。但并非所有电子邮件客户端都启用了图像，并且在某些情况下它们被完全禁用等。我也认为这种方法已经过时了？

我想知道像 Cheetah Mail 等大玩家是如何做到这一点的。

使用 PHP/MySQL 执行此操作的最佳方法是什么？

* * *

感谢您的回复。这些是订阅者的选择，并且电子邮件正文中将有几个链接将转到我们网站上的某些位置。跟踪这些内容很容易，因为链接会附加一个字符串，这样可以很容易地检测他们是否通过电子邮件访问了该网站。

如果 whitepixel 是目前要走的路，我该如何将该像素的加载链接到在我的服务器上触发的脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:51:57.620

首先，我建议为此使用现成的解决方案，而不是自己构建 - 这是一个复杂的领域，其他人已经解决了这些问题。

至于具体问题，您可以在每封邮件中创建一个图像标签，如下所示：

```
<img src="http://myserver.com/images/transparent.php?emailID=$IDofCurrentCampaign&uid=$emailAddressOfRecipient"> 
```

当请求此图像时，查询字符串意味着它不会被缓存，并且您的 php 脚本可以将活动和电子邮件地址存储在数据库中；然后，您需要使用图像 mime 类型进行响应，并发送回透明 gif。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:26:47.373

大多数人不喜欢这样被跟踪，因此不会自动加载您的像素。

尽管如此，白色像素“信标”仍然是目前最好的方法。

您当然可以要求您的观众点击一个链接，但这也需要接收者采取行动，并且不会为您提供打开电子邮件的真实人数。

# git - 将存储库推送到 GitHub

> ID：12195747
> 
> 赞同：1
> 
> 时间：2012-08-30T11:21:27.267
> 
> 标签：git, github

我在自己的服务器上建立了自己的 Git 存储库，并创建了一个存储库。我是 Git 新手，目前我所做的只是`git add *`,`git commit`和`git push`. 我对 git 不是很熟悉。

现在，我很想在 Git Hub 上创建一个存储库，以便远程 GitHub 存储库具有与我自己服务器上相同的更改列表。

我不认为你可以给我一个步骤列表，以及每个步骤将做什么的解释？我主要担心的是我不想破坏我当前的存储库。

更新：谢谢大家。我仍然不太了解 GIT 是如何工作的（我相信我会在某个时候），但是：[https](https://github.com/mercmobily/hotplate) ://github.com/mercmobily/hotplate :D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T11:27:25.453

没有时间编写完整的解决方案，但基本上您需要：

```
# create a nickname for your github account. In this case it is github
git remote add github your-github-repo-path 
```

继续在本地提交更改并推送它们。当您还想推送到 github 时，请执行：

```
#push the changes to the repo on the 'github' nickname, to the branch master
git push github master 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T11:25:51.873

这里有一些可能对[GIT_HOW_TO](http://sirupsen.com/starting-with-git/)有所帮助但我相信互联网上有太多资源可以帮助你做到这一点。[在他们的Help_Page](https://help.github.com/articles/creating-a-new-repository)上很好地提到了在 github 上设置您的 repo 的步骤请仔细阅读，如果您有任何问题，请随时提出。顺便说一句，欢迎使用 Git :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T11:26:35.700

在 GitHub 上创建一个新的存储库，如下所示：[https ://help.github.com/articles/creating-a-new-repository](https://help.github.com/articles/creating-a-new-repository)

然后从这里执行第 4 步和第 5 步：[https ://stackoverflow.com/a/8012698/705048](https://stackoverflow.com/a/8012698/705048)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T11:27:36.657

创建存储库并将远程路径添加到本地计算机

在本地机器上切换到远程 git 路径

```
cd ../../../

git pull "name " master 

pwd:"enter your password"

git add Filename

git commit -m "Comments on files"

git push "name" master 
```

我希望这可以帮助你，如果我穿了，请纠正我

# java - RMI 小程序客户端调用导致异常

> ID：12195748
> 
> 赞同：0
> 
> 时间：2012-08-30T11:21:27.890
> 
> 标签：java, exception, applet, client, rmi

我在端口 1099 上进行了 RMI 注册，并成功通过公共 IP 重新绑定。通过在服务器实现类的构造函数中调用 super (1100) 在固定端口 1100 上导出远程对象。但是当我启动小程序客户端时，我得到以下异常：

```
//   java.rmi.ServerException: RemoteException occurred in server thread; nested exception is: 
    java.rmi.ConnectException: Connection refused to host: public-ip; nested exception is: 
    java.net.ConnectException: Connection refused
    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:353)
    at sun.rmi.transport.Transport$1.run(Transport.java:177)
    at sun.rmi.transport.Transport$1.run(Transport.java:174)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.rmi.transport.Transport.serviceCall(Transport.java:173)
    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:553)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:808)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:667)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
    at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(Unknown Source)
    at sun.rmi.transport.StreamRemoteCall.executeCall(Unknown Source)
    at sun.rmi.server.UnicastRef.invoke(Unknown Source)
    at java.rmi.server.RemoteObjectInvocationHandler.invokeRemoteMethod(Unknown Source)
    at java.rmi.server.RemoteObjectInvocationHandler.invoke(Unknown Source)
    at $Proxy0.userRegister(Unknown Source)
    at rmi.source.Client.init(Client.java:117)
    at com.sun.deploy.uitoolkit.impl.awt.AWTAppletAdapter.init(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.rmi.ConnectException: Connection refused to host: RNI-SERVER-PUB-IP; nested exception is: 
    java.net.ConnectException: Connection refused
    at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:619)
    at sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:216)
    at sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:202)
    at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:128)
    at java.rmi.server.RemoteObjectInvocationHandler.invokeRemoteMethod(RemoteObjectInvocationHandler.java:194)
    at java.rmi.server.RemoteObjectInvocationHandler.invoke(RemoteObjectInvocationHandler.java:148)
    at $Proxy5.join(Unknown Source)
    at rmi.source.ServerImpl.userRegister(ServerImpl.java:71)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:322)
    at sun.rmi.transport.Transport$1.run(Transport.java:177)
    at sun.rmi.transport.Transport$1.run(Transport.java:174)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.rmi.transport.Transport.serviceCall(Transport.java:173)
    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:553)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:808)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:667)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.net.ConnectException: Connection refused
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:337)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:198)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:180)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at java.net.Socket.connect(Socket.java:528)
    at java.net.Socket.<init>(Socket.java:425)
    at java.net.Socket.<init>(Socket.java:208)
    at sun.rmi.transport.proxy.RMIDirectSocketFactory.createSocket(RMIDirectSocketFactory.java:40)
    at sun.rmi.transport.proxy.RMIMasterSocketFactory.createSocket(RMIMasterSocketFactory.java:146)
    at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:613)
    ... 22 more 
```

不知道该怎么做。有任何想法吗？

# python - 使用第三方界面将电子邮件发送到邮件列表

> ID：12195753
> 
> 赞同：0
> 
> 时间：2012-08-30T11:21:45.487
> 
> 标签：python, django, email, mailchimp

我有一个存储在数据库中（通过 Django 管理界面管理）的用户详细信息（包括电子邮件地址）列表（大约 400 个），并且想偶尔向这些用户的子集发送批量电子邮件（通讯）。

使用 Django 管理界面，我可以轻松地对用户进行分类以定义子集，并可以通过任何必要的方式公开我的电子邮件地址列表。

我可以编写一个 Django 接口来发送电子邮件，但这意味着编写一个模板接口，这是我真的不想做的事情。我宁愿在第三方提供商上生成电子邮件，然后以某种方式发送到我的列表。

到目前为止，我发现的最佳解决方案是使用 MailChimp。它们提供了一个 API，MailChimp 邮件列表可以通过该 API 与外部列表同步。它们提供了一个界面来创建电子邮件和分组功能，因此可以将电子邮件发送到邮件列表的子集（同样可以通过 API 管理组）。

完美，几乎。我对将电子邮件地址存储在外部主机上并不是特别舒服，而且由于担心我的数据库损坏，通过 API 进行同步更不舒服。

有人对此有什么建议吗？有什么方法可以使用第三方界面来创建电子邮件（多部分/MIME）消息，然后发送到我可以创建的（安全）网络服务中可用的电子邮件地址列表？

有没有其他人这样做过？使用 MailChimp API 的人有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:41:07.297

看看[Mailgun](http://www.mailgun.com/)。他们有一个广泛的 API。
我还没有经验，因为到目前为止 Mailchimp 满足了我的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:47:43.993

我有一些使用 MailChimp API 的经验，并且必须说它是我使用过的最好的 API 之一。我正在使用一个非常简单的名为[mailsnake](https://github.com/Leftium/mailsnake)的应用程序连接到 MailChimp API（它实际上只是包装你的调用并直接询问 MailChimp，所有这些都在 40 行中）来构建我自己的中间件。

并回答具体问题：您为什么害怕同步？如果您想与 MailChimp 同步列表，这不是很成问题。我很确定您只能将数据库中的用户订阅和更新到 MailChimp 中，而完全忘记以相反方式进行的任何同步。如果您尝试订阅或更新已取消订阅 MailChimp 的用户，MailChimp 只会抱怨，但不会发生任何不好的事情。

# java - 在 Java 中创建自定义注释以强制大写或小写

> ID：12195757
> 
> 赞同：0
> 
> 时间：2012-08-30T11:21:55.927
> 
> 标签：java

通过强制 pojo 字段的大写或小写来感谢在 JAVA 中创建自定义注释的任何帮助。喜欢得到类似下面的东西

```
// CaseMode enum would be
public enum CaseMode {
   UPPER, LOWER;
}

@Target({ ElementType.FIELD, ElementType.METHOD })
@Retention(RetentionPolicy.RUNTIME)
public @interface Case {
    // NEED HELP HERE
}

public class Customer {
    @Case(value=CaseMode.UPPER)
    private String fName; 
    { set; get; }
} 
```

默认情况下，客户对象中的 setter 方法应根据注释强制数据以大写或小写形式存储。感谢任何帮助来获得这个。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T12:25:26.697

注解是 Java 中的被动元素；他们不能有任何行为。正如@maba 所说，您不能在注释声明中编写任何代码。

为了获得与您尝试做的类似的事情，您需要能够检测注释并执行一些工作的东西。你有几个选择。

*   [编译时注释处理](https://stackoverflow.com/questions/2146104/what-is-annotation-processing-in-java)
*   [面向方面的编程](https://stackoverflow.com/questions/325640/aspect-oriented-programming-in-java)
*   [动态代理](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Proxy.html)/[代码生成库](https://stackoverflow.com/a/11387109/472393)

编写自定义编译时注释处理器允许您在编译之前对源代码进行预处理。

面向方面的编程既可以在编译时工作，也可以在运行时工作。它相对容易理解，但是需要一些工具与您的项目一起设置，具体取决于您将其部署在哪里。

动态代理也很简单，但是您需要更改代码访问对象的方式，可能是通过声明一些接口并使用这些接口而不是类等。

代码生成库属于复杂的一面，提供了很大的灵活性（例如，它们是 Hibernate 如何使用您的 POJO 对象发挥其魔力的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:31:52.513

您的陈述`// NEED HELP HERE`应符合以下规定：

```
@Target({ElementType.FIELD, ElementType.METHOD})
@Retention(RetentionPolicy.RUNTIME)
public @interface Case {
    CaseMode value();
} 
```

如果你认为你可以在那里有一些代码，那么你就错了。

# java - 为什么在谷歌应用引擎中增加了请求和安全请求配额？

> ID：12195758
> 
> 赞同：0
> 
> 时间：2012-08-30T11:21:56.827
> 
> 标签：java, google-app-engine, gae-quotas

当我使用请求 URL 作为`http://myapp.appspot.com`配额时，仅`Quota Details --> Requests`.

但是当我使用请求 URL 作为`https://myapp.appspot.com`配额时，`Quota Details --> Requests`和`Quota Details --> Secure Requests`.

当我使用请求`https`URL 时，为什么两者`Requests`和`Secure Requests`配额使用都会增加。

你能给我一个理由以及解决它的任何方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T12:27:29.223

[配额页面](https://developers.google.com/appengine/docs/quotas?hl=sv-SE#Requests)指出：

```
Secure Outgoing Bandwidth:
The amount of data sent by the application over a secure connection in response 
to requests. Secure outgoing bandwidth also counts toward the Outgoing Bandwidth 
quota. 
```

# java - 使用 HttpClient 4.2.1 为 Java Twitter 应用程序设置 OAuth 身份验证

> ID：12195759
> 
> 赞同：0
> 
> 时间：2012-08-30T11:22:12.227
> 
> 标签：java, rest, twitter, oauth, httpclient

我正在用 Java 构建一个需要 OAuth 身份验证的 twitter 应用程序，并且我正在尝试将 HttpClient 4.2.1 用于 ReST 事务。有没有人有关于如何设置 OAuth 身份验证凭据的代码示例，包括消费者密钥等？

例如基本身份验证：

```
client.getCredentialsProvider().setCredentials(
                new AuthScope("twitter.com", 80, AuthScope.ANY_REALM), 
                new UsernamePasswordCredentials("username", "password")); 
```

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:12:30.063

你看过[Twitter4J](http://twitter4j.org/)吗？它应该做你需要的一切，所以你可以按原样使用它或作为一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-08T12:25:14.530

You can use [scribe](http://www.richestlifestyle.com/richest-african-presidents/). It's documentation is detailed and lists other Apis you can access.

# tcp - TCP - 拥塞避免

> ID：12195760
> 
> 赞同：0
> 
> 时间：2012-08-30T11:22:13.647
> 
> 标签：tcp, congestion-control

我试图了解 TCP 拥塞避免机制，但我不明白一件事：TCP 拥塞避免是每个流还是每个链接？

换句话说：有 2 个路由器 A 和 B A 正在向 B 发送两个 TCP 流 - 当一个 TCP 流检测到拥塞时，它是否也会减小另一个流中的窗口大小？

当然，如果发生这种情况，另一个流会在一段时间内检测到拥塞，但是第二个流是否会“等待”直到它自己检测到拥塞？那将是非常无效的...

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:32:21.337

路由器在第 3 层 (IP) 上运行，不知道第 4 层 (TCP)，因此，路由器不参与 TCP 拥塞避免机制。该机制完全由 TCP 端点实现。它是由路由器丢弃 IP 数据包触发的，但（经典）路由器不知道 IP 数据包携带什么更高级别的协议。

从安全的角度来看，一个流不会影响另一个流这一事实是非常可取的。使用 NAT，您可以让许多主机共享相同的 IP 地址。从外部世界来看，所有这些主机看起来都是一台机器。因此，如果某些服务器降低了来自单个 IP 地址的所有 TCP 连接的吞吐量，以响应其中一个连接中丢弃的数据包，这将为非常讨厌的 DoS 攻击打开一扇门。

另一个问题是某些路由器可能配置为根据 IP ToS 字段丢弃数据包。例如，对延迟敏感的 SSH 流量可能会设置与批量 FTP 下载不同的 ToS。如果路由器被配置为考虑 ToS 字段，它可能会丢弃属于 FTP 连接的数据包，这应该触发拥塞避免，但不应该影响属于 SSH 连接的数据包，可以以更高的优先级处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T21:48:52.650

它减小了当前连接的窗口大小。每个连接的 RTT 和窗口都是独立维护的。

# c# - 为 postmessage 创建 lparam

> ID：12195761
> 
> 赞同：0
> 
> 时间：2012-08-30T11:22:16.250
> 
> 标签：c#, sendmessage, postmessage, param

我在为 postmessage 创建 lparam 时遇到了麻烦。我知道应用程序得到这样的密钥：

```
WM_KEYDOWN nVirtKey: VK_CONTROL cRepeat:1 ScanCode: 1D fExtended:0 fAltDown:0 fRepeat:0 fUp:0

WM_KEYDOWN nVirtKey: VK_LEFT cRepeat:1 ScanCode: 4B fExtended:1 fAltDown:0 fRepeat:0 fUp:0

WM_UP nVirtKey: VK_LEFT cRepeat:1 ScanCode: 4B fExtended:1 fAltDown:0 fRepeat:1 fUp:1

WM_UP nVirtKey: VK_CONTROL cRepeat:1 ScanCode: 1D fExtended:0 fAltDown:0 fRepeat:1 fUp:1 
```

你能告诉我我应该如何创建那个 lparam 吗？我读过msdn，我做了这样的lparam：`0x00011D00`但`0x00011D03`他们发送这样的废话：

```
WM_KEYDOWN nVirtKey: VK_CONTROL cRepeat:7424 ScanCode: 01 fExtended:0 fAltDown:0 fRepeat:0 fUp:0

WM_KEYDOWN nVirtKey: VK_LEFT cRepeat:1 ScanCode: 00 fExtended:0 fAltDown:0 fRepeat:0 fUp:0

WM_UP nVirtKey: VK_LEFT cRepeat:1 ScanCode: 00 fExtended:0 fAltDown:0 fRepeat:0 fUp:0

WM_UP nVirtKey: VK_CONTROL cRepeat:7427 ScanCode: 01 fExtended:0 fAltDown:0 fRepeat:0 fUp:0 
```

# javascript - 无法导入以 UTF-8 BOM 编码的较少文件

> ID：12195762
> 
> 赞同：3
> 
> 时间：2012-08-30T11:22:28.080
> 
> 标签：javascript, node.js, less

我将 less 编译器与 node.js 一起使用，并且我知道使用 BOM 以 UTF-8 编码的文件存在问题。为此，此解决方法效果很好：

```
data = data.replace(/^\uFEFF/, ''); // Strip potential BOM 
```

但是，在导入文件时，using`@import`语句仍然会在第一行给出语法错误。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:37:14.810

BOM 将在 less.js 的下一个版本 - 1.3.1 中被剥离。您也可以在 github 源页面上试用。

[https://github.com/cloudhead/less.js/commit/6696368eb351824f33dc0aac67143d8ea80a085a](https://github.com/cloudhead/less.js/commit/6696368eb351824f33dc0aac67143d8ea80a085a)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:25:35.860

UTF-8 文件中的[BOM](http://en.wikipedia.org/wiki/Byte_order_mark)没有意义。

您应该修复源文件，因为许多其他工具（正确地）会遇到此 BOM 的问题。所有认真的编辑都能够在没有 BOM 的情况下编写 UTF-8 文件。

如果您必须接收和处理此类文件，您应该使用例如自动修复它们（如果需要，在工作副本上操作）：

```
awk '{if(NR==1)sub(/^\xef\xbb\xbf/,"");print}' INFILE > OUTFILE 
```

（取自[Using awk to remove the Byte-order mark](https://stackoverflow.com/questions/1068650/using-awk-to-remove-the-byte-order-mark)）

# javascript - Facebook 工作经历 fql

> ID：12195764
> 
> 赞同：-1
> 
> 时间：2012-08-30T11:22:33.573
> 
> 标签：javascript, facebook, facebook-fql

我正在创建 facebook 应用程序，用户可以在其中获取朋友列表中所有朋友的公司名称

```
FB.api('/me', function(response) { 
    var query = FB.Data.query('select name,work,work_history,pic_square 
       from user where uid IN (SELECT uid2 FROM friend WHERE uid1={0})', response.id) 
    query.wait(function(rows){ 
      var data = ""; 
      for (var i = 0; i < rows.length;i++) { 
         data += rows[i].name + " => " +'<img src="' +rows[i].pic_square + '" alt="image" />' + "===> "; 
         if(rows[i].work[i]||rows[i].work_history[i]) { 
             data+=rows[i].work_history[0].company_name+ "<br/>"; 
         } 
         data += "<br />";
       } 
       document.getElementById('location').innerHTML = data; 
     }); 
   }); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:25:34.227

您应该查看[https://developers.facebook.com/blog/post/561/](https://developers.facebook.com/blog/post/561/)

FB.Data.query 很久以前就被弃用了。这是一个如何实现相同目标的示例：[http](http://www.fbrell.com/saved/b9b65bf81dc84b58fc1e167167b13112) ://www.fbrell.com/saved/b9b65bf81dc84b58fc1e167167b13112 （注意它只使用`work_history`，也请看一下`work`。

有几点需要考虑：

*   当您的 JS 字符串分布在更多行上时，请确保按照我所包含的示例进行连接，您将为自己省去很多麻烦。
*   为什么要检查 rows[i].work[i]？i 包含当前朋友的索引值。Work 和 work_history 是我以前工作的数组，您应该检查数组的长度并确保它> 0。

# android - Android - 在 api 8 中使用 view.setX() 和 setY

> ID：12195768
> 
> 赞同：15
> 
> 时间：2012-08-30T11:22:51.603
> 
> 标签：android, android-layout, position

我正在研究android api8。我想在屏幕上动态定位/放置视图。但要使用 setX 和 setY，我们需要 API 级别 11 及以上。我们如何在 API 8 中使用它，或者有什么替代方法吗？需要帮忙

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-30T11:35:52.327

您可以使用`LayoutParams`. 这些可以添加到 android 界面的组件中以设置它们的边界和位置。

一个示例（在 RelativeLayout 的子视图上设置 LayoutParams）

```
RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT); //The WRAP_CONTENT parameters can be replaced by an absolute width and height or the FILL_PARENT option)
params.leftMargin = 50; //Your X coordinate
params.topMargin = 60; //Your Y coordinate
childView.setLayoutParams(params); 
```

请注意，LayoutParams 的类型必须等于要添加它们的子视图的父级。（`LinearLayout.LayoutParams`对于 a `LinearLayout`，`RelativeLayout.LayoutParams`对于 a`RelativeLayout`等）。

此外，`childView.setLayoutParams(params);`您还可以`parentView.addView(childView,params);`在将项目添加到父容器时设置 Layoutparams 而不是。

**笔记！**坐标值以像素为单位。由于使用 DP 值来定义界面大小是最佳实践，因此您可以使用这段代码将 dp 转换为像素：

```
private int getPixels(int dipValue){ 
     Resources r = getResources();
     int px = (int)TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, dipValue,   r.getDisplayMetrics());
     return px; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-17T00:31:48.200

除了上面（Leon Lucardie 的回答）如果视图是 GroupView 并且当它被认为视图边缘超出屏幕时，您还必须放置：

```
params.rightMargin=currentRightMargin -yourX;
params.bottomMargin=currentBottomMargin -yourY; 
```

避免视图内部布局的扭曲

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-26T14:19:23.803

您可以通过以下方式使用[http://nineoldandroids.com/](http://nineoldandroids.com/)并从级别 1 获得 API 支持：

```
ViewPropertyAnimator.animate(view).translationYBy(-yourY).setDuration(0); 
```

# android - 为什么 Cursor 丢失了 sqlite 的排序 DESC

> ID：12195769
> 
> 赞同：1
> 
> 时间：2012-08-30T11:22:52.037
> 
> 标签：android, sqlite

我在sqlite中有一个查询

```
String[] args = { Report_DATETIME,Report_DATETIME, EMSUnitCode };
            String sql = "Select * from TR_ReportingAll Where  (Report_DATETIME<? or ( Report_DATETIME=? and EMSUnitCode!=?)) order by Report_DATETIME,EMSUnitCode DESC Limit 10";
            mCursor = database.rawQuery(sql, args); 
```

为什么 mCursor 的值是 ASC？当我得到 mCursor.moveToNext。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:28:29.707

您的排序标准是`Report_DATEIME ASC`，然后，具有相同 Report_DAEIME 的所有项目都按 排序`EMSUnitCode DESC`。`DESC`不适用于所有`ORDER BY`字段，但仅适用于您为其设置的字段，`ASC`如果未另行指定，则为默认顺序。因此，如果您想约会降序，请将您的订单更改为`order by Report_DATETIME DESC,EMSUnitCode DESC`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T11:29:15.170

您的结果按`Report_DATETIME ASC`第一个排序，然后任何相同的结果`Report_DATETIME`按`EMSUnitCode DESC`第二个排序。

# ruby-on-rails - 如何使用与我没有保存到数据库的对象相关的数据？

> ID：12195775
> 
> 赞同：0
> 
> 时间：2012-08-30T11:23:07.737
> 
> 标签：ruby-on-rails, actioncontroller

我需要使用他在表单中输入的用户数据，但不保存。

我在我的用户模型中添加了属性访问器：

```
 attr_accessible :paypal_email, :first_name, :last_name
   attr_accessor :first_name
   attr_accessor :last_name 
```

但是用户提交表单后如何使用它？我需要验证帐户详细信息，但没有保存它们，所以我需要在控制器中使用

```
 @user.first_name and @user.last_name 
```

**我的验证操作：**

```
 def verify

 @user = User.find(params[:user_id])
 require 'httpclient'
 require 'xmlsimple'

 clnt = HTTPClient.new

header =  {"X-PAYPAL-SECURITY-USERID" => "№№№№№№№№",
               "X-PAYPAL-SECURITY-PASSWORD" => "333333333",
               "X-PAYPAL-SECURITY-SIGNATURE" => "3333333333",
               "X-PAYPAL-REQUEST-DATA-FORMAT" => "NV",
               "X-PAYPAL-RESPONSE-DATA-FORMAT" => "XML",
               "X-PAYPAL-APPLICATION-ID" =>  "APP-2J632856DC989803F"
                }

data = {"emailAddress" => @user.paypal_email,
       "firstName"=> @user.first_name,
       "lastName" => @user.last_name,
       "matchCriteria" => "NAME",         
       "requestEnvelope.errorLanguage" => "en_US"}

 uri = "https://svcs.paypal.com/AdaptiveAccounts/GetVerifiedStatus"
 res = clnt.post(uri, data, header)
  @xml = XmlSimple.xml_in(res.content)

 if res.status == 200
    if @xml['accountStatus']!=nil
      account_status = @xml['accountStatus'][0]
      if account_status == "VERIFIED" 
        redirect_to :back
        flash[:success] = "Your account is verified"
      else 
        redirect_to :back
        flash[:error] = res.content
      end

    else
      redirect_to :back
      flash[:error] = res.content
  end  
  else 
    flash[:error] = "Oops! Can't conntect to PayPal"
end

end 
```

和错误：

```
 Invalid request parameter: lastName</message><parameter>lastName 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:57:56.343

在您的情况下，您应该使用 form_tag。form_tag 用于上传与任何模型对象无关的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:15:59.317

如果我正确理解您的问题，这很简单。

您希望验证表单 (HTML) 页面输入的 first_name 和 last_name 数据。

假设您已将 html 表单中各个输入字段的名称指定为 form_first_name 和 form_last_name。

您可以在控制器中分别使用 params[:form_first_name] 和 params[:form_last_name] 来访问它们。

# python - 只解析一级json

> ID：12195776
> 
> 赞同：13
> 
> 时间：2012-08-30T11:23:09.200
> 
> 标签：python, json

我有以下字符串：

```
'{
    "key1": "val1",
    "key2": ["a","b", 3],
    "key3": {"foo": 27, "bar": [1, 2, 3]}
}' 
```

我只想解析一个级别，所以结果应该是一个带键的一级字典，值应该只是一个字符串（不需要解析它）

对于给定的字符串，它应该返回以下字典：

```
{
    "key1": "val1",
    "key2": "['a','b', 3]",
    "key3": "{'foo': 27, 'bar': [1, 2, 3]}"
} 
```

有没有快速的方法呢？无需将整个字符串解析为 json 并将所有值转换回字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T12:18:27.020

几乎没有答案，但我只看到两种可能性：

1.  加载完整的 JSON 并转储您在问题中排除的值
2.  通过将值括在引号中来修改内容，以便 JSON 加载产生字符串值

老实说，我认为没有“*性能关键的*JSON 解析代码”之类的东西，它只是听起来不对，所以我会选择第一个选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T13:45:55.923

我认为您可以使用正则表达式解决此问题，它对我有用：

```
import re
pattern = re.compile('"([a-zA-Z0-9]+)"\s*:\s*(".*"|\[.*\]|\{.*\})')    
dict(re.findall(pattern, json_string)) 
```

但我不知道这是否更快，您需要尝试使用您的数据。

[编辑]

是的，它更快。我尝试了下面的脚本，正则表达式版本快了 5 倍。

使用 json 模块：

```
import json

val='''
{
    "key1": "val1",
    "key2": ["a","b", 3],
    "key3": {"foo": 27, "bar": [1, 2, 3]}
}
'''

for n in range(100000):
    dict((k,json.dumps(v)) for k,v in json.loads(val).items()) 
```

使用正则表达式：

```
import re

val='''{
    "key1": "val1",
    "key2": ["a","b", 3],
    "key3": {"foo": 27, "bar": [1, 2, 3]}
}'''

pattern = re.compile('"([a-zA-Z0-9]+)"\s*:\s*(".*"|\[.*\]|\{.*\})')    
for n in range(100000):
    dict(re.findall(pattern, val)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T11:57:17.487

如果它真的是你需要的，我现在不知道，但试试

```
>>> import json
>>> val = """
... {
... "key1": "val1",
... "key2": ["a","b", 3],
... "key3": {"foo": 27, "bar": [1, 2, 3]}
... }
... """
>>> dict((k,json.dumps(v)) for k,v in json.loads(val).items())
{u'key3': '{"foo": 27, "bar": [1, 2, 3]}', u'key2': '["a", "b", 3]', u'key1': '"val1"'} 
```

这有点棘手，因为您加载到 JSON 完整对象，而不仅仅是在字典中转储值。

# javascript - 在javascript中调用seam远程函数时处理连接错误

> ID：12195785
> 
> 赞同：0
> 
> 时间：2012-08-30T11:23:43.427
> 
> 标签：javascript, seam, seam2

我将 seam 2 与 javscript 远程对象一起使用，它工作正常，但我想知道如果服务器不可用如何处理。目前它在 javascript 弹出窗口上显示 503 错误，这非常糟糕。

我试过

```
try {
    var remoteObject= Seam.Component.getInstance("remoteObject");
    if(remoteObject){
        sessionChecker.remoteFunction(parameter, functionCallBack);
    }else{
        alert('error');
    }
} catch(err) {
    alert('error');
} 
```

但没有成功-> 仍然是烦人的默认弹出窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:02:48.920

看到[这个链接](https://issues.jboss.org/browse/JBSEAM-4026?page=com.atlassian.jira.plugin.system.issuetabpanels%3aall-tabpanel)。

附加的补丁文件或至少使用 Seam 2.2.2。

# mysql - mysql按时间戳搜索时间

> ID：12195787
> 
> 赞同：1
> 
> 时间：2012-08-30T11:23:51.450
> 
> 标签：mysql

我被这个问题困扰了一段时间，现在欢迎任何解决方案。

我在 MySQL 中有一个表，我正在存储一个`timestamp`.

现在让我们说，如果我只根据日期进行搜索，它就可以工作。

```
SELECT *
FROM   table
WHERE  timestamp > "2012-03-12"; 
```

这将获取时间戳值大于 2012-03-12 00:00:00 的所有数据。

我想要的是这样的查询：

```
SELECT *
FROM   table
WHERE  timestamp > "10:20:09"; 
```

无论日期如何，都将获取 tie 大于 10:20:09 的所有记录。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T11:30:13.343

使用此语句（它将从您的日期时间列中获取时间并将其与时间进行比较）

```
SELECT *
FROM   table
WHERE  DATE_FORMAT(yourDatecolumn, '%H:%i:s') > '10:20:00' 
```

**警告** 此时间格式适用于欧盟时间（其中 1pm = 13），如果您想要美国格式，请使用 '%h:%i:s'

# c++ - 检查联合实例之间是否相等的正确方法是什么？

> ID：12195794
> 
> 赞同：8
> 
> 时间：2012-08-30T11:24:23.650
> 
> 标签：c++, c, unions

我有一个多线程应用程序，它将数据存储为以下联合的实例数组

```
union unMember {
    float fData;
    unsigned int uiData;
}; 
```

存储此数组的对象知道联合中的数据是什么类型，因此在检索正确类型时我不会遇到 UB 问题。但是在程序的其他部分，我需要测试这些联合的 2 个实例之间的相等性，并且在这部分代码中，真正的内部数据类型是未知的。结果是我无法使用这种方法测试工会的平等性

```
 unMember un1;
  unMember un2;
  if (un1 == un2) {
     // do stuff
  } 
```

当我得到编译器错误时。因此，我只是比较联合的浮动部分

```
 if (un1.fData == un2.fData) {
     // compiles but is it valid?
  } 
```

现在鉴于我已经读到它是 UB 访问联合的任何部分，而该部分不是最后写入的部分（写起来很麻烦，但我想不出更清晰的方式来表达这一点）我想知道代码是否以上是检查我的联合实例是否相等的有效方法？

这让我意识到，在内部我不知道工会是如何运作的。我假设数据只是存储为位模式，并且您可以根据联合中列出的类型以您喜欢的任何方式解释它。**如果不是这种情况，那么测试两个联合实例是否相等的安全/正确方法是什么？**

最后，我的应用程序是用 C++ 编写的，但我意识到联合也是 C 的一部分，那么这两种语言对它们的处理方式有什么不同吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T11:31:20.063

通常，您需要预先添加某种当前联合类型的指标：

```
struct myData
{
    int dataType;
    union {
        ...
    } u;
} 
```

然后：

```
if (un1.dataType != un2.dataType)
    return (1 == 0);
switch(un1.dataType)
{
    case TYPE_1:
        return (un1.u.type1 == un2.u.type1);
    case TYPE_2:
        ...
} 
```

无论如何，语法

```
if (un1.fData == un2.fData) {
    // compiles but is it valid?
} 
```

它确实编译并且有效，可能由于两个原因而不起作用。一个是，正如你所说，也许 un2 包含一个整数而不是一个浮点数。但在这种情况下，平等测试通常无论如何*都会*失败。第二个是两个结构都包含一个浮点数，它们表示相同的数字，但有轻微的机器错误。然后测试会告诉你数字是不同的（它们是一点一点的），而它们的“含义”是相同的。

浮点数通常被比较为

```
if (dabs(f1 - f2) < error) 
```

为了避免这个陷阱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T11:42:13.810

在 C++ 中，不是最后写入的成员被认为是*未初始化*的（因此读取它们是未定义的行为）。在 C 中，它们被认为包含被写入成员的*对象表示，它可能是也可能不是有效的对象表示。*

那是，

```
union U {
    S x;
    T y;
} u;
u.x = 0;
T t = u.y;    // C++ - reading uninitialized memory - could crash
T t = u.y;    /* C - reading object representation of u.x - could crash */ 
```

*在实践中，如果代码与编写已分配成员的代码足够远*，则 C++ 读取联合未分配成员的行为将与 C 相同，因为编译器生成行为不同的代码的唯一方法是优化读取-写组合。

两种语言的*安全*方法（保证不会崩溃）是将内存内容作为数组进行比较，`char`例如使用`memcmp`：

```
union U u1, u2;
u1.x = 0;
u2.x = 0;

memcmp(&u1, &u2, sizeof(union U)); 
```

然而，这可能并不能反映工会成员的实际平等；例如，对于浮点类型，两个`NaN`can 值具有*相同*的内存表示并且比较不相等，而`-0.0`和`0.0`（负零和正零）具有*不同的*内存表示但比较相等。还有一个问题是这两种类型的大小不同，或者包含不参与值的位（*填充位*，在大多数现代商品平台上不是问题）。此外，结构类型可以包含用于对齐的填充。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T11:29:28.323

不同的类型可能具有不同的存储长度（两个字节与四个字节）。

当一个工会成员被写入时，所有可以保证的是写入的成员是正确的。

如果然后你比较不同的成员，你不知道额外的字节是什么。

测试联合相等性的正确方法是拥有一个结构，其中包含联合和指示当前正在使用的成员的成员，并打开该成员，其中开关的情况处理每个可能的联合成员的相等性检查，例如，您必须将使用中的信息与联合一起存储。

例如

```
enum test_enum
{
  TEST_ENUM_INT,
  TEST_ENUM_FLOAT
};

union test_union
{
  int
    test_int;

  float
    test_float;
};

struct test_struct
{
  enum test_enum
    te;

  union test_union
    tu;
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T12:03:02.627

我认为如果你实现了一个类，那将是最安全的。如果构造不提供功能（在这种情况下自动确定要评估的正确成员），那么构造可能不适合您的需要，您应该使用另一个构造；）这可能是自定义类，或者可能是`VARIANT`如果您使用 COM（这基本上是@lserni 提出的结构）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T14:06:14.083

一般来说，你问的是不可能的。只有您设置的变量中的内存才能保证是您所期望的。另一个内存基本上是随机的。**但是**，在您的情况下，您可以比较它，因为所有内容的大小都是相同的。如果我这样做，我只会比较无符号整数或做一个 memcmp。这一切都依赖于工会的所有成员都具有相同规模这一事实。例如，如果您添加了双倍投注，所有投注都将取消。这属于您可以在 C/C++ 中做和逃脱的小玩意，但维护起来要困难得多。您正在对联合进行假设，并且需要在代码中明确您做出此假设。未来的维护者可能会破坏它并导致各种难以调试的问题。

最好的办法是拥有一个带有类型标志的结构或使用类似[Boost Variant](http://www.boost.org/doc/libs/1_51_0/doc/html/variant.html)的东西。当使用这样的东西时，您将在未来证明自己并使用未来的维护者有机会知道或可以查找文档的标准代码。

另一个注意事项，在浮点数的情况下，您必须定义相等的含义。如果您想要模糊比较，那么您当然需要知道类型。如果您想要逐位比较，那么这很容易。

# jquery - 使用jquery的鼠标指针位置

> ID：12195801
> 
> 赞同：1
> 
> 时间：2012-08-30T11:24:49.170
> 
> 标签：jquery, safari, label

嗨，我正在研究鼠标指针位置功能，该功能除了 safari 外运行良好。我从几个小时以来一直在努力解决它，但找不到解决方案。这是我的函数小提琴[http://jsfiddle.net/PdCxm/](http://jsfiddle.net/PdCxm/)

```
<head>
<script type="text/javascript" src="jquery-1.7.2.js"></script>
<script type="text/javascript">
$(function(){
$('li').click(function(e){
    var pagex= e.clientX;
    $('.radiogrup').text(pagex)
    })

})

</script>

<style>

*{ margin:0}
ul{list-style:none}

label{display:block}

li{ padding-top:5px; width:115px; border:solid 1px #FF0000}
</style>

</head>

<body>
<ul>

<li>
<label>
<input type="radio" name="test"/>
</label>
</li>

<li>
<label>
<input type="radio" name="test"/>
</label>
</li>

</ul>

<div class="radiogrup">
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T11:31:07.117

有点儿

```
var evt;
$(document).click(function(e){
    evt = e.pageX;
});
$('li').click(function(e){
    $('.radiogrup').text(evt);
}); 
```

小解决方法：http: [//jsfiddle.net/PdCxm/7/](http://jsfiddle.net/PdCxm/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:37:03.370

尝试`e.originalEvent.pageX or e.originalEvent.clientX`代替`e.pageX or e.clientX`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T11:37:50.393

[在 Safari 中运行良好](http://jsfiddle.net/SxV3P/1/)[即它提供与在 Chrome 中相同的坐标]：

**HTML**

```
<ul>
    <li><label><input type="radio" name="test"/></label></li>
    <li>a row</li>    
    <li>a row</li>    
</ul>
<div id="coords"></div> 
```

**​Javascript**

 **```
$(function(){
    $('li').click(function(e){

        $('#coords').html(e.clientX + " " + e.clientY);

    });
});​ 
```

打开控制台检查是否有任何问题。**

# javascript - 使用jquery动态解析XML文件

> ID：12195804
> 
> 赞同：0
> 
> 时间：2012-08-30T11:24:52.743
> 
> 标签：javascript, jquery, jquery-plugins, xml-parsing

我知道下面的问题很常见，但我忍不住在这里发帖，因为我对我的代码中正在做什么有点困惑......

我正在发送 AJAX 请求并获取 XML 作为响应，截至目前，我正在根据标签名称解析它，如下所示：

```
$(xml).find('Details').each(function(){
                        //email=$(this).find('Email').text();
                         $tbl.append($('<tr>').append(

                             $('<td>').text($(this).find('name').text()),
                             $('<td>').text($(this).find('LastName').text()),
                             $('<td>').text($(this).find('City').text()),
                             $('<td>').html("<a href='insert.jsp?email="+$(this).find('Email').text()+"&mode=Search"+" ' >"+$(this).find('Email').text()+"</a>"),
                             $('<td>').html("<a href='MyServlet?email="+$(this).find('Email').text()+"&mode=Delete"+" ' >"+"Delete"+"</a>")
                             ));
                }); 
```

我正在尝试做的功能绝对可以正常工作，

**问题 ：**

如何在不知道标签名称或父标签的情况下动态解析 XML 响应？

我为此参考了以下链接：[使用 jQuery 进行 XML 解析]

而且我只能使用 jquery：任何形式的帮助都是可观的 .. 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T02:29:16.227

看看[遍历 API](http://api.jquery.com/category/traversing/)

有很多函数可以在不知道标签的情况下解析和移动 XML。对你来说一些关键的会是`children()` `next()` `siblings()`你已经知道的`each()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T12:09:18.600

我认为这可能会对您有所帮助，请检查[jquery](http://flexigrid.info/)插件以及基本[的 jquery-xml-parser。](http://blog.darkcrimson.com/2010/01/jquery-xml-parser/)

# javascript - 使用javascript / jquery对多个div中的输入文本进行排序？

> ID：12195807
> 
> 赞同：0
> 
> 时间：2012-08-30T11:25:02.757
> 
> 标签：javascript, jquery, sorting, html, textbox

文本框中显示三个字段（名字、姓氏和年龄）。每个字段都显示在单独的 div 中。有4条记录。单击每个字段上方的排序按钮时，应根据字段的数据类型对 div 记录进行排序，并应显示在 HTML 页面中。

[我尝试了此链接中的解决方案](https://stackoverflow.com/questions/10602817/sorting-of-div-data-using-jquery-or-javascript)

我不能使用它，因为记录显示在 div 内的文本框中。

```
 <div id="content">
    <div>
      <div class="price"><input type="text" class="pri" value="120"/></div>
      <div class="dateDiv">2012-05-09 20:39:38.0</div>
      <div class="distance">20 mile</div>
    </div>

    <div>
      <div class="price"><input type="text" class="pri"  value="123"/></div>
      <div class="dateDiv">2012-05-10 20:39:38.0</div>
      <div class="distance">30 mile</div>
    </div>

    <div>
        <div class="price"><input type="text" class="pri" value="100" /></div>
      <div class="dateDiv">2012-05-11 20:39:38.0</div>
      <div class="distance">50 mile</div>
    </div>

    <div>
      <div class="price"><input type="text" class="pri" value="124"/></div>
      <div class="dateDiv">2012-05-12 20:39:38.0</div>
      <div class="distance">60 mile</div>
     </div>
   </div> 
```

我怎样才能在javascript中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:44:44.253

你可以使用[knockoutjs](http://knockoutjs.com)来做类似的事情。

例如，html：

```
<div id="content" data-bind="foreach: lines">
    <div class="fname"><input type="text class="pri" data-bind="value: fname"/></div>
    <div class="lname" data-bind="text: lname"/>
    <div class="age" data-bind="text: age"/>
</div> 
```

Javascript：

```
function EachDivViewModel(line)
{
   this.fname = line.fname;
   this.lname = line.lname;
   this.age = line.age;
}

function YourViewModel()
{
   var self = this;
   self.lines = ko.observableArray([]); // this array will contain elements of EachDivViewModel type

   self.handlerForYourSortButtongs = function() {
      // Code here to sort the array based on the button clicked
      // The UI will automatically get updated as you reorder the elements in the lines array
   }
}

$(document).ready(function() {
   var yourViewModelInstance = new YourViewModel();
   // Code to get the lines here
   ko.applyBindings(yourViewModelInstance);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T12:34:50.807

[使用jquery.tinysort.min.js](http://jsfiddle.net/WXZxG/)看这个演示

也见[这个](http://jsfiddle.net/U8DPT/2/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-30T11:48:59.797

可以使用[tablesorter](http://tablesorter.com/docs/#Demo)来完成。

希望这会帮助你。

# api - 通过 API 获取 Yelp 场地的签到总数

> ID：12195812
> 
> 赞同：1
> 
> 时间：2012-08-30T11:25:20.100
> 
> 标签：api, checkin, yelp

我想标题是非常自我描述的。

有没有办法确定 Yelp 企业使用其 API 的签到总数？

我似乎无法在他们的 API 文档中找到它，而且实际的 API 响应也没有给出任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:49:14.363

目前没有，没有。完整的公共 API 记录在[http://www.yelp.com/developers/documentation](http://www.yelp.com/developers/documentation) - 如果您没有看到可用字段中列出的字段，则它不能供公众使用。

# mongodb - 我应该运行什么 mongodb 命令来了解服务器信息？

> ID：12195813
> 
> 赞同：2
> 
> 时间：2012-08-30T11:25:23.693
> 
> 标签：mongodb

比如我想知道mongodb用来运行的数据库目录是什么？

文档说默认数据在 /data/db 但是，没有这样的目录

我想知道是否有一个 mongodb 命令来获取那个简单的信息。我浏览了网络并找不到它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T11:43:51.980

您可以看到使用的[配置参数](http://www.mongodb.org/display/DOCS/Command+Line+Parameters)：

```
> db.serverCmdLineOpts() 
```

例如：

```
{
    "argv" : [
        "mongod",
        "--dbpath",
        "/usr/local/db"
    ],
    "parsed" : {
        "dbpath" : "/usr/local/db"
    },
    "ok" : 1
} 
```

任何未特别列出的参数都将使用它们的默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:52:12.513

只需在系统中的任何位置创建一个名为 data 的文件夹。然后通过更新路径让 Mongo 知道这个文件夹在哪里。

在 Windows 中，您将在命令行上运行它。

```
C:\mongodb\bin\mongod.exe --dbpath c:\test\mongodb\data 
```

这是您的 mongo 存储数据的地方。

# java - 集合的并发映射 - 为空时删除集合

> ID：12195814
> 
> 赞同：2
> 
> 时间：2012-08-30T11:25:25.810
> 
> 标签：java, concurrency, java.util.concurrent

我正在尝试在 java 中编写线程安全的 Map[K, Set[V]] 实现。

1.  如果将唯一键添加到地图中，则应创建（并添加到）新 Set
2.  如果将非唯一键添加到映射中，则应将现有 Set 添加到。
3.  如果从 Set 中删除一个值导致 Set 为空，则应从映射中删除该条目以避免内存泄漏。
4.  我想解决这个问题而不需要同步整个事情

我在下面包含了一个失败的测试用例，如果您有解决方案，请告诉我。

```
package org.deleteme;

import java.util.ArrayList;
import java.util.Collections;
import java.util.List;
import java.util.Set;
import java.util.concurrent.ConcurrentHashMap;
import java.util.concurrent.ConcurrentMap;
import java.util.concurrent.ExecutionException;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.Future;

import junit.framework.Assert;

import org.junit.Test;

public class ConcurrentSetMapTest {
    public static class ConcurrentSetMap<K, V> {
        private final ConcurrentMap<K, Set<V>> map = new ConcurrentHashMap<K, Set<V>>();

        public void add(K key, V value) {
            Set<V> set = map.get(key);
            if (set != null) {
                set.add(value);
            } else {
                Set<V> candidateSet = createConcurrentSet(value);
                set = map.putIfAbsent(key, candidateSet);
                if (set != null) {
                    // candidate set not accepted, use existing
                    set.add(value);
                }
            }
        }

        public void remove(K key, V value) {
            Set<V> set = map.get(key);
            if (set != null) {
                boolean removed = set.remove(value);
                if (removed && set.isEmpty()) {
                    // this is not thread-safe and causes the test to fail
                    map.remove(key, set);
                }
            }
        }

        public boolean contains(K key, V value) {
            Set<V> set = map.get(key);
            if (set == null) {
                return false;
            }
            return set.contains(value);
        }

        protected Set<V> createConcurrentSet(V element) {
            Set<V> set = Collections.newSetFromMap(new ConcurrentHashMap<V, Boolean>());
            set.add(element);
            return set;
        }
    }

    @Test
    public void testThreadSafe() throws InterruptedException, ExecutionException {
        ConcurrentSetMap<String, String> setMap = new ConcurrentSetMap<String, String>();
        ExecutorService executors = Executors.newFixedThreadPool(4);
        List<Future<?>> futures = new ArrayList<Future<?>>();

        futures.add(executors.submit(new TestWorker(setMap, "key1")));
        futures.add(executors.submit(new TestWorker(setMap, "key1")));
        futures.add(executors.submit(new TestWorker(setMap, "key2")));
        futures.add(executors.submit(new TestWorker(setMap, "key2")));

        for (Future<?> future : futures) {
            future.get();
        }
    }

    public static class TestWorker implements Runnable {
        ConcurrentSetMap<String, String> setMap;
        String key;

        public TestWorker(ConcurrentSetMap<String, String> setMap, String key) {
            super();
            this.setMap = setMap;
            this.key = key;
        }

        public void run() {
            int sampleSize = 100000;
            for (int i = 0; i < sampleSize; ++ i) {
                // avoid value clashes with other threads
                String value = Thread.currentThread().getName() + i;

                Assert.assertFalse("Should not exist before add", setMap.contains(key, value));
                setMap.add(key, value);
                Assert.assertTrue("Should exist after add", setMap.contains(key, value));
                setMap.remove(key, value);
                Assert.assertFalse("Should not exist after remove", setMap.contains(key, value));
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T11:36:08.333

不要写这样的地图，用别人的。我会使用 Guava 的[SetMultimap](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/SetMultimap.html)实现之一，例如[HashMultimap](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/HashMultimap.html)并使用[Multimaps.synchronizedSetMultimap](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multimaps.html#synchronizedSetMultimap%28com.google.common.collect.SetMultimap%29)对其进行同步。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T15:40:21.730

这是一个完全并发且线程安全的实现：

```
public class ConcurrentSetMap<K,V> {

  private final ConcurrentMap<K, Set<V>> _map = new ConcurrentHashMap<K, Set<V>>();

  public void add(K key, V value) {
    Set<V> curSet = _map.get(key);
    while(true) {

      if((curSet != null) && curSet.contains(value)) {
        break;
      }

      Set<V> newSet = new HashSet<V>();
      newSet.add(value);

      if(curSet == null) {

        curSet = _map.putIfAbsent(key, newSet);
        if(curSet != null) {
          continue;
        }

      } else {

        newSet.addAll(curSet);
        if(!_map.replace(key, curSet, newSet)) {
          curSet = _map.get(key);
          continue;
        }
      }

      break;
    }
  }

  public void remove(K key, V value) {
    Set<V> curSet = _map.get(key);

    while(true) {
      if((curSet == null) || !curSet.contains(value))  {
        break;
      }

      if(curSet.size() == 1) {

        if(!_map.remove(key, curSet)) {
          curSet = _map.get(key);
          continue;
        }

      } else {

        Set<V> newSet = new HashSet<V>();
        newSet.addAll(curSet);
        newSet.remove(value);
        if(!_map.replace(key, curSet, newSet)) {
          curSet = _map.get(key);
          continue;
        }
      }

      break;
    }
  }

  public boolean contains(K key, V value) {
    Set<V> set = _map.get(key);
    return set != null && set.contains(value);
  }
} 
```

将时间与@PeterLawrey 的答案（在我的盒子上）进行比较，他需要 2.9 秒，这需要 1.4 秒。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T09:47:37.120

我设法解决了我的问题:)

我在最初的帖子中没有提到我需要从集合中快速读取，而且我不太关心写入速度。为此，我想出了一个同步写访问但不需要同步读访问的解决方案。下面的代码现在通过了我的测试用例。

感谢大家的建议。

```
public static class ConcurrentSetMap<K, V> {
    private final ConcurrentMap<K, Set<V>> map = new ConcurrentHashMap<K, Set<V>>();

    public synchronized void add(K key, V value) {
        Set<V> set = map.get(key);
        if (set != null) {
            set.add(value);
        } else {
            map.put(key, createConcurrentSet(value));
        }
    }

    public synchronized void remove(K key, V value) {
        Set<V> set = map.get(key);
        if (set != null) {
            set.remove(value);
            if (set.isEmpty()) {
                map.remove(key);
            }
        }
    }

    public boolean contains(K key, V value) {
        return get(key).contains(value);
    }

    public Set<V> get(K key) {
        Set<V> set = map.get(key);
        return set == null ? Collections.<V> emptySet() : set;
    }

    protected Set<V> createConcurrentSet(V value) {
        Set<V> set = Collections.newSetFromMap(new ConcurrentHashMap<V, Boolean>());
        set.add(value);
        return set;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T11:34:25.607

您需要使用锁定，因为您正在执行多个需要共同原子的操作。

```
public class SynchronousMultiMap<K, V> {
    private final Map<K, Set<V>> map = new LinkedHashMap<K, Set<V>>();

    public synchronized void add(K key, V value) {
        Set<V> set = map.get(key);
        if (set == null)
            map.put(key, set = new LinkedHashSet<V>());
        set.add(value);
    }

    public synchronized void remove(K key, V value) {
        Set<V> set = map.get(key);
        if (set == null) return;
        set.remove(value);
        if (set.isEmpty()) map.remove(key);
    }

    public synchronized boolean contains(K key, V value) {
        Set<V> set = map.get(key);
        return set != null && set.contains(value);
    }

    @Test
    public void testThreadSafe() throws ExecutionException, InterruptedException {
        ExecutorService executors = Executors.newFixedThreadPool(3);
        List<Future<?>> futures = new ArrayList<Future<?>>();
        SynchronousMultiMap<String, Integer> setMap = new SynchronousMultiMap<String, Integer>();
        int sampleSize = 1000000;

        String[] keys = "key1,key2,key3,key4".split(",");
        for (int i = 0; i < 3; i++)
            futures.add(executors.submit(new TestWorker(setMap, keys, sampleSize, i)));

        executors.shutdown();
        for (Future<?> future : futures) {
            future.get();
        }
    }

    static class TestWorker implements Runnable {
        final SynchronousMultiMap<String, Integer> setMap;
        final String[] keys;
        final int sampleSize;
        final int value;

        public TestWorker(SynchronousMultiMap<String, Integer> setMap, String[] keys, int sampleSize, int value) {
            super();
            this.setMap = setMap;
            this.keys = keys;
            this.sampleSize = sampleSize;
            this.value = value;
        }

        public void run() {
            for (int i = 0; i < sampleSize; i += keys.length) {
                for (String key : keys) {
                    boolean contains = setMap.contains(key, value);
                    if (contains)
                        Assert.assertFalse("Should not exist before add", contains);
                    setMap.add(key, value);
                    boolean contains2 = setMap.contains(key, value);
                    if (!contains2)
                        Assert.assertTrue("Should exist after add", contains2);
                    setMap.remove(key, value);
                    boolean contains3 = setMap.contains(key, value);
                    if (contains3)
                        Assert.assertFalse("Should not exist after remove", contains3);
                }
            }
        }
    }
} 
```

运行需要 0.35 秒。使用 a`sampleSize=1000000`它需要 < 8 秒。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-03T22:21:02.227

**的**使用**`ConcurrentMap`。`ConcurrentSkipListSet`**

 ****`ConcurrentMap.putIfAbsent()`如果键不存在，则**调用以添加键集。****

 ****呼** `ConcurrentMap.remove( key, emptySet )`，哪里`emptySet`是空的`ConcurrentSkipListSet`。

如果与 对应的当前值为`key`空，则将其删除。****

# java - 如何在java中实现sqoop

> ID：12195816
> 
> 赞同：1
> 
> 时间：2012-08-30T11:25:33.293
> 
> 标签：java, hadoop, sqoop

我是hadoop的新手。我正在尝试使用 sqoop 将数据从 RDMS 导出到 HDFS。我正在通过命令行提示符实现这一点。[我在这里](https://stackoverflow.com/questions/9229611/how-to-use-sqoop-in-java-program)找到了在 java 中实现 sqoop 的指南，但是在哪里可以找到 sqoop.jar 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T11:59:12.710

[你可以从这里](http://mvnrepository.com/artifact/org.apache.sqoop/sqoop/1.4.1-incubating)下载 jar 。

# android - Android 标准 ListView 项目不会在长文本上放大

> ID：12195824
> 
> 赞同：2
> 
> 时间：2012-08-30T11:26:21.727
> 
> 标签：android, android-layout, android-listview

我在使用标准 android listview 时遇到问题。如果文本要长时间显示在我想要的一个列表视图项目中，则该项目会自行放大。

这是它现在的样子的截图： [http ://www.abload.de/image.php?img=unbenanntdjupi.png](http://www.abload.de/image.php?img=unbenanntdjupi.png)

我也在使用另一个带有自定义布局的列表视图，这没问题：列表视图项目会自行扩大。

仅供参考：我正在使用 actionbarsherlock，所以我从“SherlockListActivity”扩展了我的活动。

我希望你们中的一个可以帮助我......因为在这种情况下实现自定义列表视图是一个巨大的开销：/

提前致谢！

// 编辑：这是标准的“simple_list_item_single_choice”...实际上我不想自定义它。

```
<?xml version="1.0" encoding="utf-8"?>    
<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@android:id/text1"
        android:layout_width="match_parent"
        android:layout_height="?android:attr/listPreferredItemHeightSmall"
        android:textAppearance="?android:attr/textAppearanceListItemSmall"
        android:gravity="center_vertical"
        android:checkMark="?android:attr/listChoiceIndicatorSingle"
        android:paddingLeft="?android:attr/listPreferredItemPaddingLeft"
        android:paddingRight="?android:attr/listPreferredItemPaddingRight"
    /> 
```

这是我如何将其添加到我的布局的代码：

```
 <ListView 
        android:id="@id/android:list"
        android:layout_height="0dip"
        android:layout_width="fill_parent"
        android:layout_weight="1" /> 
```

// 在实现 iturki 的答案后进行编辑：它解决了 android 4.x 的问题，但不适用于 android 级别 10 的设备。

例外：

```
08-30 14:25:04.049: E/AndroidRuntime(843): FATAL EXCEPTION: main
08-30 14:25:04.049: E/AndroidRuntime(843): android.view.InflateException: Binary XML file line #2: Error inflating class android.widget.CheckedTextView
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.view.LayoutInflater.createView(LayoutInflater.java:518)
08-30 14:25:04.049: E/AndroidRuntime(843):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:332)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.widget.ArrayAdapter.getView(ArrayAdapter.java:323)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.widget.AbsListView.obtainView(AbsListView.java:1430)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.widget.ListView.makeAndAddView(ListView.java:1745)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.widget.ListView.fillDown(ListView.java:670)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.widget.ListView.fillFromTop(ListView.java:727)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.widget.ListView.layoutChildren(ListView.java:1598)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.widget.AbsListView.onLayout(AbsListView.java:1260)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.view.View.layout(View.java:7175)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.view.View.layout(View.java:7175)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.view.View.layout(View.java:7175)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.view.View.layout(View.java:7175)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.view.View.layout(View.java:7175)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.view.View.layout(View.java:7175)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.view.View.layout(View.java:7175)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1140)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.os.Looper.loop(Looper.java:123)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.app.ActivityThread.main(ActivityThread.java:3683)
08-30 14:25:04.049: E/AndroidRuntime(843):  at java.lang.reflect.Method.invokeNative(Native Method)
08-30 14:25:04.049: E/AndroidRuntime(843):  at java.lang.reflect.Method.invoke(Method.java:507)
08-30 14:25:04.049: E/AndroidRuntime(843):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-30 14:25:04.049: E/AndroidRuntime(843):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-30 14:25:04.049: E/AndroidRuntime(843):  at dalvik.system.NativeStart.main(Native Method)
08-30 14:25:04.049: E/AndroidRuntime(843): Caused by: java.lang.reflect.InvocationTargetException
08-30 14:25:04.049: E/AndroidRuntime(843):  at java.lang.reflect.Constructor.constructNative(Native Method)
08-30 14:25:04.049: E/AndroidRuntime(843):  at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.view.LayoutInflater.createView(LayoutInflater.java:505)
08-30 14:25:04.049: E/AndroidRuntime(843):  ... 42 more
08-30 14:25:04.049: E/AndroidRuntime(843): Caused by: java.lang.UnsupportedOperationException: Can't convert to dimension: type=0x2
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.content.res.TypedArray.getDimensionPixelSize(TypedArray.java:463)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.view.View.<init>(View.java:1957)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.widget.TextView.<init>(TextView.java:344)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.widget.CheckedTextView.<init>(CheckedTextView.java:58)
08-30 14:25:04.049: E/AndroidRuntime(843):  at android.widget.CheckedTextView.<init>(CheckedTextView.java:54)
08-30 14:25:04.049: E/AndroidRuntime(843):  ... 45 more 
```

我认为这些是最重要的几点：

```
android.view.InflateException: Binary XML file line #2: Error inflating class android.widget.CheckedTextView
...
Caused by: java.lang.UnsupportedOperationException: Can't convert to dimension: type=0x2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T11:41:42.033

改变：

```
android:layout_height="?android:attr/listPreferredItemHeightSmall" 
```

到：

```
android:layout_height="wrap_content" 
```

这将使您的列表行扩展以适合其内容。

# c# - 将自定义（隐藏）数据附加到 Microsoft Word 插件中的图像

> ID：12195825
> 
> 赞同：1
> 
> 时间：2012-08-30T11:26:28.513
> 
> 标签：c#, ms-word, vsto, ms-office, docx

我正在尝试在 Visual Studio 2010 和 C# 上使用 VSTO 为 Microsoft Word（2007 及更高版本）编写 Office 插件。

该插件会将图像插入从 Internet 下载的文档（来自自定义 CGI 脚本）。这些图像每天都会更新，因此我添加了一个按钮，可根据请求从服务器“刷新”所有图像。但是，我不确定如何“存储”图像的原始标识符以及嵌入在文档中的图像，以了解从服务器获取哪个图像。标识符的长度可以从几个字符到几百 (~200) 个字符不等，但它是一个 ASCII 标识符。

目前我像这样插入图片：

```
 public void InsertPictureFromIdentifier(String identifier)
    {
        Document vstoDocument = Globals.Factory.GetVstoObject(this.Application.ActiveDocument);

        Word.Selection selection = this.Application.Selection;
        if (selection != null && selection.Range != null)
        {
            // Insert the picture control
            var picture = vstoDocument.Controls.AddPictureContentControl(selection.Range, "mypic");
            // And update the image
            UpdatePicture(picture, identifier);
         }
    } 
```

然后在初始插入和刷新时都调用 UpdatePicture 来更新图像：

```
 public void UpdatePicture(PictureContentControl picture, string identifier)
    {
        const int BytesToRead = 1000000;

        // Download the image from the scrip
        var request = WebRequest.Create("http://my.server.com/graph.cgi?"+identifier);
        var response = request.GetResponse();
        var responseStream = response.GetResponseStream();
        var reader = new BinaryReader(responseStream);
        var memoryStream = new MemoryStream();
        Byte[] byteBuffer = new byte[BytesToRead];

        // Transfer to a memory stream
        var bytesRead = reader.Read(byteBuffer, 0, BytesToRead);
        while (bytesRead > 0)
        {
            memoryStream.Write(byteBuffer, 0, bytesRead);
            bytesRead = reader.Read(byteBuffer, 0, BytesToRead);
        }

        // Set the image from the memory stream
        picture.Image = new System.Drawing.Bitmap(memoryStream);
    } 
```

如您所见，我将标识符传递给更新 - 但问题是如何从第二天刷新时插入的“图片”中取回该标识符。我试过使用图片的标签，但仅限于 64 个字符。我什至尝试过使用图片的 Title 属性，但这似乎在其他一些最大限制上默默地失败了。

标识符需要在保存/加载之间保留，随文档中的图像移动，并且不可见（我不能只在带有标识符的图像之后添加文本）。

# nhibernate - 使用 FetchMany 的 NHibernate 查询返回不正确的结果

> ID：12195826
> 
> 赞同：0
> 
> 时间：2012-08-30T11:26:32.323
> 
> 标签：nhibernate

我有两个相关实体：**Job**和**Group**，具有**多对多**关系。

我正在执行一个简单的查询来检索特定的作业及其关联的组（通过**GroupRecipients**属性）：

```
var job = jobsRepo.Get()
                .Where(j => j.Id == jobKey.Id)
                .FirstOrDefault();

var countA = job.GroupRecipients.Count; 
```

其结果是**countA==2**，它对应于数据库中的状态。

当我添加一个 FetchMany 时，第一个奇怪的事情发生了：

```
var job = jobsRepo.Get()
                .FetchMany(x => x.GroupRecipients)
                .Where(j => j.Id == jobKey.Id)
                .FirstOrDefault();

var countB = job.GroupRecipients.Count; 
```

这导致**countB==1**。job.GroupRecipients 集合中只出现一项，这与数据库中的状态相矛盾。

但它变得更有趣。如果我连续运行以下命令：

```
var job = jobsRepo.Get()
                .Where(j => j.Id == jobKey.Id)
                .FirstOrDefault();

var countA = job.GroupRecipients.Count;

var jobB = jobsRepo.Get()
                .FetchMany(x => x.GroupRecipients)
                .Where(j => j.Id == jobKey.Id)
                .FirstOrDefault();

var countB = jobB.GroupRecipients.Count; 
```

然后我得到**countB==2**，预期的结果。再次删除带有 countA 的行会导致**countB==1**。

更多信息：我在**无状态会话的****事务**中执行查询。NHibernate 的版本是**3.3.1**

 ******因此，这两个问题可以概括如下：**

1.  FetchMany 返回部分结果
2.  一个查询以一种意想不到的方式依赖于另一个查询。

**对此行为的任何解释都非常受欢迎。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-20T11:41:36.957

这似乎是 LINQ 提供程序处理方式的错误或不匹配`FirstOrDefault`- 在我看来，它似乎为`LIMIT 1`查询添加了一个毯子，这显然不适用于急切加载（这会导致`OUTER JOIN`.

我通过在中间显式转换为可枚举来解决它：

```
var job = jobsRepo.Get()
                  .FetchMany(x => x.GroupRecipients)
                  .AsEnumerable()
                  .FirstOrDefault(j => j.Id == jobKey.Id); 
```

这有点骇人听闻，但可以解决问题。

很可能，您的第二个示例有效，因为第一个示例将实体加载到缓存中，因此 nHibernate 不需要转到数据库（并且遇到 LINQ 提供程序中的错误逻辑）。****

# php - 检查变量是否在函数中“全局”设置

> ID：12195827
> 
> 赞同：2
> 
> 时间：2012-08-30T11:26:34.563
> 
> 标签：php, function, isset

我正在尝试创建一个函数来执行以下语句的操作......

```
<?php
if(isset($var)){
    echo $var;
}
else {
    echo "";
}
?> 
```

到目前为止我已经这样做了......

```
<?php
function echo_ifset($dyn_var){
    $var = $dyn_var;
    if(isset($$var)){
        global $$var;
        echo $$var;
    }
} 
```

但是当我跑步时它没有显示任何东西..

```
echo_ifset('message');
// while message is a defined variable. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T11:30:10.333

如果您使用引用，则如果未定义变量，则警告（或错误，我的 PHP 有点生疏！）不会有任何问题：

```
function echo_ifset(&$var) { 
    if (isset($var)) { 
        echo $var; 
    };
} 
```

注意声明`&`之前`$var`，这是引用运算符。

然后，您可以使用以下命令调用它：

```
echo_ifset($message); 
```

如果你想定义一个方法来设置默认值，这个方法也很棒：

```
<?php 
function defaultValue(&$var, $default) { 
    if (!isset($var)) { 
        return $default; 
    }

    return $var;
} 
?> 
```

可以在以下位置找到一些额外的阅读材料：[http ://www.php.net/manual/en/language.references.pass.php](http://www.php.net/manual/en/language.references.pass.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:35:28.570

在 if 语句中删除一个 $：

```
function echo_ifset($dyn_var){
$var = $dyn_var;
if(isset($var)){
    global $$var;
    echo $$var;
};
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T11:29:59.933

您需要回显函数的返回值：

```
function ifset($dyn_var) {
  if (isset($dyn_var)) {
    return $dyn_var;
  }
  else {
    return "";
  }
} 
```

然后只需使用：

```
echo ifset($var); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T11:31:46.573

您已将消息作为字符串传递，因此不会显示它。

你已经过去了`echo_ifset($message)`。如果消息变量已经定义。

# fluent-nhibernate - Fluent Nhibernate 获取具有填充子集合的对象

> ID：12195832
> 
> 赞同：0
> 
> 时间：2012-08-30T11:26:43.427
> 
> 标签：fluent-nhibernate

我有

```
public class Parents {
    public Parents() {
        Childs = new HashedSet<Childs>();
    }
    public virtual int Id {get; set;}
    public virtual String Name {get; set;}
    public virtual ISet<Childs> Childs {get; protected set;} 
}

public class Childs {
    public virtual int Id {get; set;}
    public virtual String Name {get; set;}
    public virtual Parents Parent {get; set;}
} 
```

映射

```
....
.Override<Parents>(map => {
    map.HasMany(x => x.Childs).KeyColumn("parent_id").Cascade.SaveUpdate().Not.LazyLoad().AsSet().Fetch().Join();
})
 .Override<Childs>(map => {
      map.References(x => x.Parent, "parent_id");
})
.... 
```

如何使用 Link、HQL 或 AutoMapper 获取（选择）有孩子的父母？例如，我的测试用例中有这样的查询，

```
Parents parent = new Parents {Name = "parent test"};
Childs child   = new Childs {Name = "child test", Parent = parent};
session.Save(parent);
session.Save(child);
...
var myParent = session.QueryOver<Parents>().Where(x=>x.Id==1).List()[0];
Assert.IsTrue(myParent.Childs.Count>0);
... 
```

在日志中我看到查询：选择加入，但我只得到没有孩子的父母

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:33:11.603

您需要使“Childs”属性反转。

当它是逆时，它不被存储。在您的测试用例中，列表为空（您不将子项添加到父项，您只需将子项中的反向引用设置为父项）。如果它被存储，它现在正在做什么，NH 清除数据库中的列表并从父级中删除子级。

# facebook - “未捕获的 OAuthException：发生未知错误。” 在尝试制作墙帖时

> ID：12195835
> 
> 赞同：0
> 
> 时间：2012-08-30T11:26:54.517
> 
> 标签：facebook, facebook-graph-api, exception

我正在使用以下脚本发布 Facebook 页面墙的链接：

```
ini_set("zend.ze1_compatibility_mode", "off");
require_once('facebook-php-sdk/src/facebook.php');
$appId = 'XXXXXXXXXXXXXX';
$secret = 'XXXXXXXXXXXXXXXXXXXXXXXXXXXX';
$facebook = new Facebook(array('appId' => $appId, 'secret' => $secret));
$access_token = file_get_contents('https://graph.facebook.com/oauth/access_token?client_id='.$appId.'&client_secret='.$secret.'&grant_type=client_credentials');
$access_token = preg_replace('/^access_token=/', '', $access_token);
$attachment = array(
    'access_token' => $access_token,
    'message' => 'message text',
    'link' => 'http://www.domain.com/',
    'name' => utf8_encode('link title'),
    'description' => utf8_encode('link description'),
    'picture' => 'http://www.domain.com/images/picture.jpg'
);
$facebook->api('/XXXXXXXXXXXX/feed', 'POST', $attachment); 
```

它工作得很好，但自 2 周以来，它开始出现以下错误，而绝对没有进行任何修改：

```
Fatal error:  Uncaught OAuthException: An unknown error has occurred.
thrown in /path/to/public_html/facebook-php-sdk/src/base_facebook.php on line 1033 
```

通过一些原始调试，我发现如果我注释掉数组的`link`元素，`$attachment`问题就会消失。然而，它导致`name`在 Facebook 页面开始链接到图片文件，这绝对不是一个选项。

任何帮助将不胜感激。

**更新：**

我尝试通过 Graph API Explorer 执行此请求并得到相同的错误：

```
{
    "error": {
        "message": "An unknown error has occurred.", 
        "type": "OAuthException", 
        "code": 1
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T16:07:44.767

我遇到了同样的问题，一个简单的基于网络的程序偶尔会更新我客户的 facebook 页面，其中包含有关他的库存的状态更新。

据我所知，无论出于何种原因，此错误已被置于“无法修复”状态，并且相关功能已被弃用？

[https://developers.facebook.com/bugs/397106947003500?browse=search_5013a59fc630a7b70100468](https://developers.facebook.com/bugs/397106947003500?browse=search_5013a59fc630a7b70100468)

我不知道为什么 JUST THE LINK FUNCTIONALITY 会被弃用，我也不知道发布链接的新正确方法是什么，因为 Graph 文档仍然将“链接”列为正确的字段来执行此操作。任何人？

在上面的错误页面上，他提供了一个据称提供更多信息的链接，但该链接不起作用。我认为也许“.intern”部分不应该在那里，给了我这个网址......

[https://developers.facebook.com/blog/post/2012/07/25/platform-updates--operation-developer-love/](https://developers.facebook.com/blog/post/2012/07/25/platform-updates--operation-developer-love/)

...确实有效，但我没有看到与已弃用功能相关的任何信息，或者其他帮助我确定如何更改我的代码以发布链接的信息。也许对 Graph API 更了解的人可以提供帮助！

[我真的希望 Facebook 停止弃用东西；让它继续工作真的会造成任何伤害吗？他们称之为Operation Developer Love，但我怎么能喜欢无缘无故让我加班的东西呢？]

# php - joinleft 中的 zend 选择查询

> ID：12195839
> 
> 赞同：4
> 
> 时间：2012-08-30T11:27:05.320
> 
> 标签：php, mysql, zend-framework, model

如何在 Zend 模型中的 JOIN LEFT 中编写 SELECT 查询？例如如何将以下 mysql 查询转换为 zend 模型查询

```
 LEFT JOIN 
    (SELECT count(*) as game_count,topic_id,time as g_time from games_list WHERE type < 3 GROUP BY topic_id) t3
    ON chapter_list.id=t3.topic_id 
```

我想使用以下 zend 查询添加转换后的查询，并且我需要来自上述查询的 game_count 和以下结果。

```
 $query = $this->select()

    ->setIntegrityCheck(false)

    ->from(array('a' => 'chapter_list'), array('subtopic_id as topic','id as topic_id','grade','chapter_no as chapter','if(file_status=1,1,0) as ppt)','CONCAT("http://mysite.com?t=",subtopic_id) as link'))

    ->joinLeft(array('b' => 'subject_list'), 'a.subject = b.subject_id', array());

    return $this->fetchAll($query)->toArray(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T06:08:41.717

终于我明白了，

```
 $subquery1= $this->select()

    ->setIntegrityCheck(false)

    ->from('games_list', array('count(*) as game_count','topic_id','time as g_time'))

    ->where('type<?', 3)

    ->group('topic_id');

     //main query
     $query = $this->select()

    ->setIntegrityCheck(false)

    ->from(array('a' => 'chapter_list'), array('subtopic_id as topic','id as topic_id','grade','chapter_no as chapter','if(file_status=1,1,0) as ppt)','CONCAT("http://eskool.com/learn?t=",subtopic_id) as link'))

    ->joinLeft(array('b' => 'subject_list'), 'a.subject = b.subject_id', array())

    ->joinLeft(array('c' => $subquery1), 'a.id = c.topic_id', array('IFNULL(game_count,0)','g_time'))

    return $this->fetchAll($query)->toArray(); 
```

# c++ - 用于数学的 Node.js 与 C++

> ID：12195841
> 
> 赞同：24
> 
> 时间：2012-08-30T11:27:06.030
> 
> 标签：c++, performance, node.js, math, computation

我必须编写一个实现一些模糊逻辑的服务器程序，我选择用 Node.js 编写它以利用它的事件导向。我必须处理困难的数学计算问题，而且我不知道获得性能的最佳方法是什么：

1.  *全部用 Node.js 编写*，并使用 V8 引擎的强大功能来完成数学任务。
2.  *用 C++ 编写一个*实现所有数学函数的模块并从 Node.js 调用它。

在这两个平台上都有此类计算经验的人吗？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-30T11:45:42.147

既然您无论如何都需要 Node.js 部分，那么请继续，在 Node.js 中实现所有内容。如果它足够快，这很容易维护。很难预测虚拟机/JIT 编译器的威力。

如果不够快，首先考虑算法改进。如果这没有帮助，并且如果分析表明计算是问题，那么继续，用 C++ 重新实现它。但请注意，编写高性能 C++ 代码并非易事。确保您手头有一个好的分析器并经常测量。

一般来说，如果编写正确，我会说 C++ 代码会更快。棘手的部分是正确编写它。请查看这篇[关于 C++、Java、Scala、Go 的 Google 论文以](http://www.theregister.co.uk/2011/06/03/google_paper_on_cplusplus_java_scala_go/)获取更多信息。要点是 - 托管语言使编写和维护代码变得更加容易，但如果您需要原始性能，C++ 是最好的。但这是以需要大量专业知识为代价的，而且代码更难维护。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-09-04T19:01:46.083

denshade，您的 C 实现仅适用于 2e5 而不是 2e6，就像您为 js 所做的那样（链接到今天在 Github 上的 revs）：

*   [素数.c](https://github.com/denshade/speedFun/blob/525ead98ee74938c44be939e5199f680a71ef695/c/primes.c)
*   [素数.js](https://github.com/denshade/speedFun/blob/1ef846917a8b5b5fdf2805691110c2e41d814e6a/jscript/primes.js)

管道到 /dev/null，并将 js 也更改为 2e5，在我当前的计算机上，我得到大约 6.5 秒的 C 和大约 8.5 秒的 js（使用某些版本的节点）。

由于您的算法是 O(n^2)，我预计 2e6 需要大约 15 分钟，而不是 15 小时，但我还没有尝试过。也许由于某种原因它确实分崩离析。

（请注意，我无法直接发表评论，因为我是全新的 SO 并且没有代表。）

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-30T11:55:16.063

回答这类问题几乎是不可能的。这些事情的答案一如既往地取决于您的技能以及您愿意投入多少时间和精力。

C++ 总是具有更快和更高效的潜力，因为您可以更密切地控制所有重要的事情。缺点是你*必须*做所有重要的事情，而另一种语言的通用实现可能是由知道自己在做什么的人完成的，并且可能比 C++ 中的幼稚或快速实现更好

另外，您通常会发现瓶颈并不是您认为的那样，例如，如果读取数据的时间是计算的 20 倍，这并非不可能，那么速度有多快就无关紧要了。计算是。即使对于经验丰富的开发人员，对瓶颈所在位置的直觉也常常是严重错误的。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-01-01T17:32:28.517

```
http://benchmarksgame.alioth.debian.org/u64q/compare.php?lang=node&lang2=gpp 
```

上面的链接已经失效，现在正在返回——

[https://web.archive.org/web/20180324192118/http://benchmarksgame.alioth.debian.org/u64q/compare.php?lang=node&lang2=gpp](https://web.archive.org/web/20180324192118/http://benchmarksgame.alioth.debian.org/u64q/compare.php?lang=node&lang2=gpp)

C++ 使用 CPU，执行数学运算的速度比 Node.js 快 10 倍。

该网站移到这里 [https://benchmarksgame-team.pages.debian.net/benchmarksgame/which-programs-are-fastest.html](https://benchmarksgame-team.pages.debian.net/benchmarksgame/which-programs-are-fastest.html)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-03-03T16:17:08.583

我已经运行了@denshade 代码来删除打印，并且 100000 个数字的时间非常特殊：

*   **3 秒。**对于nodejs！

*   **6 秒。**对于 gcc/clang 编译的 c

*   **6 秒**。对于 hhvm ( php )

*   **带 opcache 的 php7 需要**14 秒****

***   **15 秒**for php7 w/o opcache** 

 **Nodejs 之所以如此之快，是因为它会随着时间的推移进行编译和优化。

所以，也许您只需要自己测试在这种情况下哪种语言最适合您的需求。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-03-04T14:52:16.040

使用 C++ 路线进行复杂的数学计算需要考虑的一件事是，您可能能够利用现有的高性能库，例如[BLAS](http://www.netlib.org/blas/)、LAPACK、ARMA 等。其他开发人员已经投入了大量时间和精力来提供高度优化的功能。我怀疑你会找到类似级别的 JavaScript 高性能库。当然，如果您在矩阵计算或线性代数方面有一个确定的瓶颈，那么这些 C++ 库之一就是您要走的路。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-04T14:22:16.463

以下是 Node.js 证明自己是完美技术合作伙伴的领域。

```
● I/O bound Applications
● Data Streaming Applications
● Data Intensive Real-time Applications (DIRT)
● JSON APIs based Applications
● Single Page Applications 
```

不建议将 Node.js 用于 CPU 密集型应用程序。

这是 API 比较： [https ://www.linkedin.com/pulse/nodejs-vs-java-which-faster-apis-owen-rubel](https://www.linkedin.com/pulse/nodejs-vs-java-which-faster-apis-owen-rubel)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-08-25T19:31:39.327

如果您的计算不是微不足道的，我想发出警告。当您进行大量计算时，JavaScript 非常糟糕。我的故事涉及一个简单的主要程序，您可以在这里找到：[https ://github.com/denshade/speedFun](https://github.com/denshade/speedFun)

长话短说。我创建了一个简单的，用 C 和 JavaScript 实现的低效质数检查功能。两者都以相同的方式实现。在 C 语言中，前 2000 000 个素数在 5 秒内得到验证。在 node.js 中运行时，javascript 中的相同函数持续了超过 16 个小时。**

# wix - 使用 WiX 更新清单文件

> ID：12195843
> 
> 赞同：1
> 
> 时间：2012-08-30T11:27:10.600
> 
> 标签：wix, wix3.5, wix-extension

我有一个应用程序的清单文件，它看起来像这样：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
  <assemblyIdentity name="xxx.exe" version="1.1.0.0" type="win32" processorArchitecture="x86" />
  <file name="xxxxxxxx.ocx" hashalg="SHA1">
    <comClass clsid="{4xxxxxxx76-D693-4156-93BA-B938A56F15D3}" description="" threadingModel="apartment" />
    <typelib tlbid="{8xxxxxx-3A75-4708-993D-6E0CD9564072}" version="1.0" helpdir="" flags="control,hasdiskimage" />
  </file>
  <dependency>
    <dependentAssembly>
      <assemblyIdentity name="Assembly numero uno" version="1.1.0.0" type="win32" publicKeyToken="7XXXXXXXXXXXD" />
    </dependentAssembly>
  </dependency>
</assembly> 
```

我想在标签`<dependency>`之后添加一个新部分。`</dependency>`新的`<dependency>`应该是这样的：

```
<dependency>
  <dependentAssembly>
    <assemblyIdentity name="Assembly number two" version="1.1.0.0" type="win32" publicKeyToken="7XXXXXXXXXXXD" />
  </dependentAssembly>
</dependency> 
```

如何使用 Wix 实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T05:32:44.447

首先，考虑在构建时修改清单。如果可能的话，它更可取 - 始终选择构建时复杂性而不是安装时复杂性。

`<dependency>`只有在元素内容取决于用户输入或目标系统状态的情况下，才将其留到安装时才有意义。在这种情况下，您应该使用 WiX 选项之一来修改 XML，或者[XmlFile](http://wix.sourceforge.net/manual-wix3/util_xsd_xmlfile.htm) @OleksandrPshenychnyy 提到的，或者[XmlConfig](http://wix.sourceforge.net/manual-wix3/util_xsd_xmlconfig.htm)。我更经常使用后者，因为它似乎更灵活。

如果您决定在安装时修改清单，您仍然可以让您的生活更轻松一些。在构建时将 XML 模式添加到清单中，并且仅在安装时根据用户输入或系统状态修改部分。假设它是`assemblyIdentity/version`属性。然后 WiX 片段可能如下所示：

```
<util:XmlConfig Id="VersionChange" ElementPath="assembly/dependency/dependentAssembly/assemblyIdentity[\[]@name='Assembly number two'[\]]" File="$(var.Manifest)" Name="version" Action="create" Node="value" On="install" PreserveModifiedDate="yes" Value="1.1.0.0" /> 
```

注意方括号转义技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T11:37:16.613

您可以使用带有 XmlFile 元素的 WisUtilExtention 库对 XML 文件执行一些操作。有关更多详细信息，请访问[此链接](http://wix.sourceforge.net/manual-wix3/util_xsd_xmlfile.htm)

# php - Selenium webdriver 使用 facebook php 库 - 隐式等待或等待元素存在？

> ID：12195847
> 
> 赞同：1
> 
> 时间：2012-08-30T11:27:19.837
> 
> 标签：php, selenium-webdriver

我正在尝试使用 webdriver 的 facebook php 库测试文件上传，似乎上传工作正常，因为源代码显示“正在加载”通知，但我似乎无法让测试等待文件在继续下一步之前上传。我找不到任何对隐式等待（不理想，但可能会奏效）或任何文档中存在的元素的引用或使用该库的人之间的讨论。任何帮助将非常感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:00:14.160

你可以做一个隐式等待：

```
$this->_session->timeouts()->implicit_wait(3000); // 1 sec = 1000 
```

# facebook - Twitter API OAuth 会话过期，Facebook 没有

> ID：12195848
> 
> 赞同：0
> 
> 时间：2012-08-30T11:27:21.410
> 
> 标签：facebook, facebook-graph-api, twitter, facebook-javascript-sdk, twitter-oauth

我使用 Twitter Anywhere API 和 OAuth 对我网站上的用户进行身份验证。带有 accessToken 的 cookie 会在两小时后过期，这就是用户需要定期登录和连接 Twitter 的原因。解决方法可能是将 auth_token 存储在 cookie 中，并在 twitter 设置的 cookie 过期后用户下次加载页面时提供它。现在我还不清楚：我还提供 Facebook 作为身份验证方法，并且它不会忘记登录。Facebook JS API 不会在我的页面上存储任何 cookie，那么它如何知道用户通过 Facebook 和我的应用程序进行了身份验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:43:45.923

你在说[这个](http://developers.facebook.com/docs/reference/javascript/)吗？请参阅**频道文件**部分。

编辑：以上链接已更改。而且，facebook api 也发生了变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:28:02.870

> Facebook JS API 不会在我的页面上存储任何 cookie，那么它如何知道用户通过 Facebook 和我的应用程序进行了身份验证？

它向 facebook.com 发出跨域请求，以查看*该*域下是否有 cookie，表明当前有用户在其他浏览器窗口/选项卡中登录 Facebook。

一旦它发现 a) 有一个登录用户 b) 该用户以前使用过您的应用程序 - 它会即时将他登录到您的应用程序并为您提供一个新的（短期）用户访问令牌来工作和。

# c# - 为什么这个通用方法实现不需要传递 Type 值？

> ID：12195850
> 
> 赞同：0
> 
> 时间：2012-08-30T11:27:21.617
> 
> 标签：c#, .net, linq, expression

我已经实现了 INotifyPropertyChanged 的​​强类型实现，除了不使用接口，我添加了一个基类来实现。

它工作正常，但我正在努力解决的问题是为什么在基本方法声明中使用 TValue（我确实使用了我在网上找到的一些代码中的这一部分）

`NotifyPropertyUpdate<TValue>(`...

但是在派生类中，它根本不需要传递`TValue`！

是什么告诉编译器在运行时解决这个问题而不是在构建时抱怨？

谢谢，

基类：

```
public class NotifyFuncPropertyChanged<T> : INotifyPropertyChanged
{
    #region Implementation of INotifyPropertyChanged

    public event PropertyChangedEventHandler PropertyChanged;

    protected void NotifyPropertyUpdate<TValue>(Expression<Func<T, TValue>> selector)
    {
        //get memberInfo from object selection
        MemberInfo memberInfoSelection;
        Expression body = selector;
        if (body is LambdaExpression)
        {
            body = ((LambdaExpression)body).Body;
        }
        switch (body.NodeType)
        {
            case ExpressionType.MemberAccess:
                memberInfoSelection =((MemberExpression)body).Member;
                break;
            default:
                throw new InvalidOperationException();
        }

        //send notifyupdate to memberInfo
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(memberInfoSelection.Name));
        }
    }

    #endregion
} 
```

用法（派生类）

```
public class NameTest : NotifyFuncPropertyChanged<NameTest>
{
    public string Name { get; set; }

    public void TestUpdateName()
    {
        this.NotifyPropertyUpdate(x => x.Name);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T12:58:50.023

C# 编译器有一个称为**类型推断**的功能。[您可以在语言规范](http://www.microsoft.com/en-gb/download/details.aspx?id=7029)的第 7.5.2 节中阅读它的所有复杂性，或者在[这里](http://msdn.microsoft.com/en-us/library/twcad0zb)有一个非常简短的介绍。

从规范：

> 当在没有指定类型参数的情况下调用泛型方法时， **类型推断**过程会尝试推断调用的类型参数。类型推断的存在允许使用更方便的语法来调用泛型方法，并允许程序员避免指定冗余类型信息。例如，给定方法声明：
> 
> ```
> class Chooser
> {
>   static Random rand = new Random();
>   public static T Choose<T>(T first, T second) {
>       return (rand.Next(2) == 0)? first: second;
>   }
> } 
> ```
> 
> `Choose`可以在不显式指定类型参数的情况下调用该方法：
> 
> ```
> int i = Chooser.Choose(5, 213);                   // Calls Choose<int>
> string s = Chooser.Choose("foo", "bar");      // Calls Choose<string> 
> ```
> 
> 通过类型推断，类型参数`int`和`string`由方法的参数确定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T11:30:50.463

编译器可以自动从参数中推断`TValue`出来。实际上，调用行编译为：

```
this.NotifyPropertyUpdate<string>(x => x.Name); 
```

当您调用几乎任何 LINQ 扩展方法时，您会看到同样的事情发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T11:29:02.050

编译器推断`TValue`. 它仍然发生在编译时，而不是运行时。

您传入以下 lambda: `x => x.Name`。编译器知道它`Name`是类型`string`，因此`TValue`是`string`。

# django - 在 Django 中，这些查询是等价的吗？

> ID：12195852
> 
> 赞同：0
> 
> 时间：2012-08-30T11:27:31.757
> 
> 标签：django, optimization

我必须优化我的查询，因为它们每个需要 4 分钟，我想这样做，但我不知道它是否有效，fitting_list 是一个查询集列表，但现在它只是一个

即将：

```
company_list.append(Company.objects.filter(uuid__in=fitting_list.manufacturer.company.uuid).distinct())
address_list.append(Address.objects.filter(company__in=fitting_list.manufacturer.company.uuid).distinct())
customer_list.append(Customer.objects.filter(company__in=fitting_list.manufacturer.company.uuid).distinct())
manufacturer_list.append(Manufacturer.objects.filter(uuid__in=fitting.manufacturer.uuid).distinct()) 
```

从：

```
for fitting_queryset in fitting_list:
    for fitting in fitting_queryset:
        company_list.append(Company.objects.filter(uuid=fitting.manufacturer.company.uuid).distinct())
        address_list.append(Address.objects.filter(company=fitting.manufacturer.company.uuid).distinct())
        customer_list.append(Customer.objects.filter(company=fitting.manufacturer.company.uuid).distinct())
        manufacturer_list.append(Manufacturer.objects.filter(uuid=fitting.manufacturer.uuid).distinct()) 
```

# sql - 使用 WHERE 子句中的许多 OR 语句优化查询

> ID：12195855
> 
> 赞同：7
> 
> 时间：2012-08-30T11:27:38.760
> 
> 标签：sql, sql-server, sql-server-2008

编写查询的最佳方法是什么，这将给出等效的结果：

```
SELECT X,Y,* FROM TABLE
WHERE (X = 1 AND Y = 2) OR (X = 2235 AND Y = 324) OR... 
```

表有聚集索引 (X, Y)。表很大（数百万），可能有数百个 OR 语句。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T11:30:57.913

您可以创建另一个包含 X 和 Y 列的表并在该表中插入值，然后与原始表连接

```
create table XY_Values(X int, Y int)

Insert into XY_Values values
(1,2),
(2235,324),
... 
```

然后

```
SELECT X,Y,* FROM TABLE T
join XY_Values V
on T.X=V.X
and T.Y=V.Y 
```

您可以在 XY_Values 上的 (X,Y) 上创建索引，这将提高性能

您也可以将 XY_Values 创建为表变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T11:33:20.050

这会做得更好

```
select t.* 
from table t
join (select 1 as x,2 as y
      union
      ...) t1 on t.x=t1.x and t.y=t1.y 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-30T11:31:52.463

我认为您可以用数百个 X 和 Y 值填充临时表，然后加入它们。

喜欢：

```
DECLARE @Temp TABLE
(
X int,
Y int
) 
```

预先填写您的搜索要求，然后加入。

（或保存搜索设置的其他物理表。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-24T14:06:20.527

如果您使用太多 or 语句，则执行计划不会使用索引。最好创建多个语句并使用 union all 合并结果。

```
SELECT X,Y,* 
FROM TABLE
WHERE (X = 1 AND Y = 2) 
union all
SELECT X,Y,* 
FROM TABLE
WHERE (X = 2235 AND Y = 324) 
union all... 
```

# c# - 函数返回类型

> ID：12195858
> 
> 赞同：0
> 
> 时间：2012-08-30T11:27:46.997
> 
> 标签：c#, vb.net

我有一个简单的函数，它基于这样的内联 SQL 语句（简化版）从数据库中返回单个列的数据：

```
Function GetId(ByVal name As String) As Object

    Dim sql As String = "Select Id From table where username = '" & name & "'"

    Using cmd As New SqlCommand
        cmd.Connection = conn
        cmd.CommandType = CommandType.Text
        cmd.CommandText = sql
        GetId = cmd.ExecuteScalar
    End Using

End Function 
```

如果 SQL 返回一行，它可以是 NULL 或整数，或者 SQL 不返回任何内容。

在代码的另一部分，我有：

```
Dim userId As Object = New Object

userId = GetBillingGroupToInvoice(name) 
```

在这里使用 Object 作为返回类型是否可以。如果不是，我应该指定什么作为这个函数的返回类型？这是在 VB 中，但在 C# 中的答案也可以。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T11:40:48.327

您的函数可能应该返回一个可为[空的 integer](http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx)，`Nothing`当您的 SQL 服务器不返回任何内容或`DBNull`（如果您不想在*No rows returned*和*DBNull*之间产生差异）时返回。

```
Function GetId(ByVal name As String) As Integer?

    Dim sql As String = "Select Id From table where username = '" & name & "'"

    Using cmd As New SqlCommand
        cmd.Connection = conn
        cmd.CommandType = CommandType.Text
        cmd.CommandText = sql
        Dim result = cmd.ExecuteScalar
        Return If(DBNull.Value.Equals(result), 
                  Nothing, 
                  DirectCast(result, Integer?))
    End Using

End Function 
```

* * *

然后，你会这样调用你的方法：

```
Dim userId = GetBillingGroupToInvoice(name)
If userId.HasValue Then
    'Do something with userId.Value'
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T11:30:13.600

如果 SQL 查询返回整数或空值，您可能希望函数返回可空的 int（`int?`在 C# 中）而不是对象，以提高类型安全性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T11:31:14.640

将返回类型（如果不是 DBNull）从 ExecuteScalar 转换为整数。您可以返回可为空的 int 类型（C# 中的 int?）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T11:32:27.070

您应该指定`Integer`返回类型而不是`Object`.

```
Function GetId(ByVal name As String) As Integer
    Dim sql As String = "Select Id From table where username=@name"
    Dim retValue as Integer = -1
    Using cmd As New SqlCommand
        cmd.Connection = conn
        cmd.CommandType = CommandType.Text
        cmd.CommandText = sql
        cmd.Parameters.Add("@name",SqlDbType.VarChar,30).Value=name
        Dim result = cmd.ExecuteScalar()
        if Not IsNothing(result) And Not IsDBNull(result) Then
            retValue=CType(result,Integer)
        End If
    End Using
    return retValue
End Function 
```

# sql - 选择表取决于文本框值

> ID：12195859
> 
> 赞同：0
> 
> 时间：2012-08-30T11:27:49.883
> 
> 标签：sql, vb.net, listview, select

我刚刚以编程方式创建了一个表。我将其命名为我的文本框值。

例子：

```
Create table " & Textbox1.text & " + ...... 
```

我想根据我的文本框值设置我的表名。

```
Select TaskNumber,Name,Age From '" & Textbox1.text & "' " 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:40:42.913

最好的做法是将您的文本框值放在一个变量中：

```
 Dim myTableName As String
    myTableName = TexBox1.text

    // SQL Connection
    Dim conStr As String = "Server=MyServer;Database=Mydatabase;Trusted_Connection = yes"
    Dim objCon As New SqlConnection(conStr)
    Dim obj As SqlCommand
    Dim strSQL as String
    obj = objConn.CreateCommand()

    // *************** Select statement *********
    strSQL = "SELECT TaskNumber, Name, Age FROM " & myTableName

    // **************** Create statement *********
    strSQL = "CREATE TABLE " & myTableName & "(" & _
    "Id int NOT NULL PRIMARY KEY IDENTITY, " & _
    "ColumnTest VARCHAR(30)) "

    // Execute the command
    obj.CommandText = strSQL
    obj.ExecuteNonQuery() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T12:01:14.050

尝试这个：

```
Dim query AS String = "Select TaskNumber,Name,Age From " & Textbox1.Text.Trim().Replace("'","") 
```

**.Replace("'","")**将防止由于 TextBox 文本中存在单引号而导致的 SQL 注入攻击。

**我会建议您在 TextBox 上使用*RegularExpressionValidator*来限制允许的字符。**

# android - 私人sd存储

> ID：12195860
> 
> 赞同：0
> 
> 时间：2012-08-30T11:27:50.833
> 
> 标签：android

我有一个应用程序可以拍照并将它们保存到 sd，问题是图片修改（删除、重命名、ecc）应该只通过应用程序完成，所以我需要一种方法让用户无法访问图片文件夹......可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T11:29:56.917

唯一的方法是加密您存储的文件。没有办法阻止用户安装 sdcard 来访问存储在其中的每个文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:32:29.383

在常见的 Android 架构中，SD 卡使用 FAT32 文件系统进行格式化。由于 FAT32 不支持任何访问控制机制，因此您不能依赖它。

因此唯一的可能性是加密。创建一个加密密钥并存储在私有应用数据文件夹中。然后使用它来加密要存储在 SD 卡上的隐私敏感文件。

# c# - 无限期运行的生产者/消费者应用程序

> ID：12195864
> 
> 赞同：0
> 
> 时间：2012-08-30T11:28:05.447
> 
> 标签：c#, multithreading, parallel-processing, producer-consumer

我要解决的问题是（据我所知）一个典型的生产者/消费者问题。我们有 24/7/365 的数据传入。传入的数据（称为原始数据）存储在表中，最终用户无法使用。然后我们选择所有未处理的原始数据，并开始一一处理。处理完每个数据单元后，将其存储在另一个表中，现在可以由客户端应用程序使用。从加载原始数据到持久化处理数据的过程平均需要 2 - 5 秒。但它高度依赖于我们用来处理数据的第三方网络服务。如果 Web 服务速度很慢，我们处理数据的速度就不再像获取数据并积累积压数据那样快，从而导致我们的客户失去实时提要。我们想让这个过程成为一个多线程的。

1.  **LOADING** - 一个加载器任务（生产者），它无限期地运行并将未处理的数据从 DB 加载到`BlockingCollection<T>`（或并发集合的一些其他变体）。我的选择`BlockingCollection`是因为它在设计时考虑了生产者/消费者模式并提供了`GetConsumingEnumerable()`方法。

2.  **PROCESSING** - 使用上述数据的多个消费者`BlockingCollection<T>`。在其当前的实现中，我有一个`Parallel.ForEach`循环`GetConsumingEnumerable()`，每次迭代都会启动一个具有两个任务延续的任务：任务的第一步是调用第三方 Web 服务，等待结果并输出结果以供第二个任务使用。第二个任务根据第一个任务的输出进行计算并输出第三个任务的结果，第三个任务基本上只是将该结果存储到第二个任务中`BlockingCollection<T>`（这个是输出集合）。所以我的消费者实际上也是生产者。理想情况下，任务 1 已加载的每个数据单元都将排队等待并行处理。

3.  **PERSISTING** - 单个消费者针对上述第二个消费者运行`BlockingCollection`并将处理过的数据保存到数据库中。

我面临的问题是上面列表中的第 2 项。它似乎不够快（仅通过使用`Parallel.ForEach`）。我尝试在内部`Parallel.ForEach`而不是直接启动一个带有延续的任务，而是启动一个包装线程，该线程将依次启动处理任务。但这导致 OutOfMemory 异常，因为线程数失控并很快达到 1200。我还尝试使用 ThreadPool 安排工作，但无济于事。

您能否告知我的方法是否足以满足我们需要做的事情，或者有更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T11:36:19.077

如果瓶颈是某个 3rd 方服务，并且这不会处理并行执行，但会将您的请求排队，那么您将无能为力。

但首先你可以试试这个：

*   使用线程池或任务（它们也会使用线程池） - 不要自己启动线程
*   尝试使您的请求异步而不是专门使用线程
*   通过性能分析器运行您的服务/应用程序并检查您在哪里“浪费”您的时间
*   对第 3 方服务进行尖峰/检查，看看它如何处理并行请求
*   考虑缓存来自该服务的答案（如果可能）

这就是我现在能想到的，没有更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T12:12:35.243

我最近遇到了一个与您的问题非常相似的问题，这是我所做的，希望对您有所帮助：

1.  看起来你的第一和第三部分相当简单，可以毫无问题地在各自的线程上进行管理，
2.  第二部分必须首先在一个新线程上启动，然后使用 System.Threading.timer 进行 Web 服务调用，调用 Web 服务的方法通过异步调用将响应（结果）传递给处理方法让它按照自己的节奏处理数据，

这解决了我的问题，我希望它也能帮助你，如果有任何疑问问我，我会在这里解释......

# android - 屏幕旋转后使用 CursorLoader 加载数据时出现异常

> ID：12195867
> 
> 赞同：2
> 
> 时间：2012-08-30T11:28:08.603
> 
> 标签：android, android-contentprovider, android-loadermanager

我的应用程序在 Nexus 7 平板电脑上运行时遇到一个奇怪的问题。我有两个片段使用 CursorLoader 从我的自定义 ContentProvider 加载数据。

当我启动应用程序时，它在横向和纵向模式下都运行良好，加载程序正确加载数据。当我旋转屏幕时会出现问题：我的 Activity 和两个 Fragment 都已正确重新创建，并且加载程序再次启动，如预期的那样。他们加载数据（调试时我看到两个加载器都调用了 onLoadFinished），但之后应用程序是 FC，但有以下异常：

```
08-30 13:10:03.310: E/AndroidRuntime(14964): FATAL EXCEPTION: ModernAsyncTask #4
08-30 13:10:03.310: E/AndroidRuntime(14964): java.lang.RuntimeException: An error occured while executing doInBackground()
08-30 13:10:03.310: E/AndroidRuntime(14964):    at android.support.v4.content.ModernAsyncTask$3.done(Unknown Source)
08-30 13:10:03.310: E/AndroidRuntime(14964):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
08-30 13:10:03.310: E/AndroidRuntime(14964):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
08-30 13:10:03.310: E/AndroidRuntime(14964):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
08-30 13:10:03.310: E/AndroidRuntime(14964):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
08-30 13:10:03.310: E/AndroidRuntime(14964):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
08-30 13:10:03.310: E/AndroidRuntime(14964):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
08-30 13:10:03.310: E/AndroidRuntime(14964):    at java.lang.Thread.run(Thread.java:856)
08-30 13:10:03.310: E/AndroidRuntime(14964): Caused by: java.lang.NullPointerException
08-30 13:10:03.310: E/AndroidRuntime(14964):    at android.content.ContentResolver.acquireUnstableProvider(ContentResolver.java:1094)
08-30 13:10:03.310: E/AndroidRuntime(14964):    at android.content.ContentResolver.query(ContentResolver.java:354)
08-30 13:10:03.310: E/AndroidRuntime(14964):    at android.content.ContentResolver.query(ContentResolver.java:313)
08-30 13:10:03.310: E/AndroidRuntime(14964):    at android.support.v4.content.CursorLoader.loadInBackground(Unknown Source)
08-30 13:10:03.310: E/AndroidRuntime(14964):    at android.support.v4.content.CursorLoader.loadInBackground(Unknown Source)
08-30 13:10:03.310: E/AndroidRuntime(14964):    at android.support.v4.content.AsyncTaskLoader.onLoadInBackground(Unknown Source)
08-30 13:10:03.310: E/AndroidRuntime(14964):    at android.support.v4.content.AsyncTaskLoader$LoadTask.doInBackground(Unknown Source)
08-30 13:10:03.310: E/AndroidRuntime(14964):    at android.support.v4.content.AsyncTaskLoader$LoadTask.doInBackground(Unknown Source)
08-30 13:10:03.310: E/AndroidRuntime(14964):    at android.support.v4.content.ModernAsyncTask$2.call(Unknown Source)
08-30 13:10:03.310: E/AndroidRuntime(14964):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
08-30 13:10:03.310: E/AndroidRuntime(14964):    ... 4 more 
```

老实说，stacktrace 没有帮助，因为它不包含对我的代码的任何引用，而且这是一个非常奇怪的问题，因为如上所述，这两个片段在我第一次启动应用程序时工作，在手机布局上正常工作，但是屏幕旋转后我的平板电脑布局崩溃。

编辑：

在这两个片段中，我在 onActivityCreated 方法中加载数据，只需调用 getLoaderManager.initLoader(....);

这就是我创建装载机的方式：

第一个片段

```
@Override
public Loader<Cursor> onCreateLoader(int id, Bundle args) {

    CursorLoader cursorLoader = new CursorLoader(getActivity(), MyContract.CONTENT_URI,
            null, null, null, null);

    return cursorLoader;
} 
```

第二个片段：

```
@Override
public Loader<Cursor> onCreateLoader(int id, Bundle args) {

    return new CursorLoader(getActivity(), MyContract.CONTENT_URI, null,
            null, null, null);
} 
```

这是我 CP 的内容 uri 的声明：

```
//MyContract class
public static final Uri CONTENT_URI = Uri.parse("content://" + MyProvider.AUTHORITY + "/items");

//In MyProvider class
public static final String AUTHORITY = "it.rciovati.mypackage.MyProvider" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-17T18:13:02.240

有一个错误在`android.content.ContentResolver.acquireUnstableProvider()`2013 年 11 月才被修复。可以在此处查看该错误的详细信息：

[https://bugzilla.mozilla.org/show_bug.cgi?id=904551](https://bugzilla.mozilla.org/show_bug.cgi?id=904551)

本质上，如果 Uri 为 null 并且会导致崩溃，则该函数无法处理。为了正确支持较旧的 Android 版本，您需要确保永远不会传入 null Uri，或者捕获抛出的 NPE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:39:50.023

我解决了。在我的布局中，我有一个加载其他数据的第三个片段，并且对其进行了错误检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T17:27:47.537

我也有同样的问题。事实证明，这是一个非常容易消除的错误。基于我的代码的示例

```
 Uri content_uri = null;

        if (bundle != null && bundle.containsKey("ID_BUNDLE_KEY")) {
            int word_id_to_query = bundle.getInt(ID_BUNDLE_KEY, 1);
            content_uri = ContentUris.withAppendedId(WordListContentProvider.CONTENT_URI, word_id_to_query);

        }

        cursorLoader = new CursorLoader(getActivity()
                .getApplicationContext(), content_uri,
                projections, SELECTION, SELECTION_ARGS, null); 
```

我的错误是使用“ID_BUNDLE_KEY”作为参数而不是 ID_BUNDLE_KEY。后者已经是最终的静态字符串变量。因此 bundle.containsKey 将始终返回 false。这导致 content_uri 的变量在传递给新的 CurorLoader 函数时包含“null”。我的建议是在您自己的代码中验证“空”uri 没有错误地传入。

有关额外信息，Android 4.1.2 AOSP 代码中 ContentResolver.java 的第 1094 行确实是当 [uri.getscheme() != "content"] 的条件返回 false 时，导致提供者为空。运行时库抱怨的是这个 null 提供程序。

# java - 使用 Ant 时出现 java.security.AccessControlException，但从控制台调用 java 时运行正常

> ID：12195868
> 
> 赞同：9
> 
> 时间：2012-08-30T11:28:13.393
> 
> 标签：java, ant

我有以下**Ant < java >**任务：

```
<property name="classpath-run.msg" refid="run.classpath"/>
<echo message="running the app with classpath = ${classpath-run.msg}"/>
<echo message="Java version used (ant.java.version): ${ant.java.version}"/>
<echo message="Java version used (    java.version): ${java.version}"/>
<java classname ="${project.MainClass.name}">
    <permissions>
        <grant class="java.security.AllPermission"/>
        <grant class="javax.management.MBeanTrustPermission" action="register"/>  
    </permissions>
    <classpath refid="run.classpath"/>
</java> 
```

当我运行**Ant**时，执行**任务失败（见下面的跟踪）。**当我复制粘贴回显的类路径并使用java -classpath ..**从命令行运行我的代码时，执行成功！**

 **在这两种情况下，都使用相同版本的**java**。

我怎么可能观察到不同的行为？**java.security.AccessControlException**位于堆栈跟踪的根目录，但我已经授予我的**Ant java**任务所有安全权限，包括显式地为也出现在堆栈跟踪中的操作**寄存器的****MBeanTrustPermission 。**

 **跟踪（在**Ant**下运行时）如下所示：

```
 [java] java.lang.ExceptionInInitializerError
 [java]     at org.apache.tools.ant.taskdefs.ExecuteJava.execute(ExecuteJava.java:194)
 [java]     at org.apache.tools.ant.taskdefs.Java.run(Java.java:771)
 [java]     at org.apache.tools.ant.taskdefs.Java.executeJava(Java.java:221)
 [java]     at org.apache.tools.ant.taskdefs.Java.executeJava(Java.java:135)
 [java]     at org.apache.tools.ant.taskdefs.Java.execute(Java.java:108)
 [java]     at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
 [java]     at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
 [java]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 [java]     at java.lang.reflect.Method.invoke(Method.java:601)
 [java]     at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
 [java]     at org.apache.tools.ant.Task.perform(Task.java:348)
 [java]     at org.apache.tools.ant.taskdefs.Sequential.execute(Sequential.java:68)
 [java]     at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
 [java]     at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
 [java]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 [java]     at java.lang.reflect.Method.invoke(Method.java:601)
 [java]     at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
 [java]     at org.apache.tools.ant.Task.perform(Task.java:348)
 [java]     at org.apache.tools.ant.taskdefs.MacroInstance.execute(MacroInstance.java:398)
 [java]     at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
 [java]     at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
 [java]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 [java]     at java.lang.reflect.Method.invoke(Method.java:601)
 [java]     at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
 [java]     at org.apache.tools.ant.Task.perform(Task.java:348)
 [java]     at org.apache.tools.ant.Target.execute(Target.java:390)
 [java]     at org.apache.tools.ant.Target.performTasks(Target.java:411)
 [java]     at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
 [java]     at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
 [java]     at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
 [java]     at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
 [java]     at org.apache.tools.ant.Main.runBuild(Main.java:809)
 [java]     at org.apache.tools.ant.Main.startAnt(Main.java:217)
 [java]     at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
 [java]     at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)
 [java] Caused by: java.lang.ExceptionInInitializerError
 [java]     at TranslationClient.main(TranslationClient.java:5)
 [java]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 [java]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
 [java]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 [java]     at java.lang.reflect.Method.invoke(Method.java:601)
 [java]     at org.apache.tools.ant.taskdefs.ExecuteJava.run(ExecuteJava.java:217)
 [java]     at org.apache.tools.ant.taskdefs.ExecuteJava.execute(ExecuteJava.java:152)
 [java]     ... 34 more
 [java] Caused by: net.sf.ehcache.CacheException: java.security.AccessControlException: access denied ("javax.management.MBeanTrustPermission" "register")
 [java]     at net.sf.ehcache.management.sampled.SampledMBeanRegistrationProvider.initialize(SampledMBeanRegistrationProvider.java:98)
 [java]     at net.sf.ehcache.management.provider.MBeanRegistrationProviderImpl.initialize(MBeanRegistrationProviderImpl.java:63)
 [java]     at net.sf.ehcache.CacheManager.doInit(CacheManager.java:454)
 [java]     at net.sf.ehcache.CacheManager.init(CacheManager.java:374)
 [java]     at net.sf.ehcache.CacheManager.<init>(CacheManager.java:356)
 [java]     at TranslationCache.<clinit>(TranslationCache.java:10)
 [java]     ... 41 more
 [java] Caused by: java.security.AccessControlException: access denied ("javax.management.MBeanTrustPermission" "register")
 [java]     at java.security.AccessControlContext.checkPermission(AccessControlContext.java:366)
 [java]     at java.lang.SecurityManager.checkPermission(SecurityManager.java:585)
 [java]     at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.checkMBeanTrustPermission(DefaultMBeanServerInterceptor.java:1848)
 [java]     at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:322)
 [java]     at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:512)
 [java]     at net.sf.ehcache.management.sampled.SampledMBeanRegistrationProvider.registerCacheManagerMBean(SampledMBeanRegistrationProvider.java:118)
 [java]     at net.sf.ehcache.management.sampled.SampledMBeanRegistrationProvider.initialize(SampledMBeanRegistrationProvider.java:95)
 [java]     ... 46 more 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-10-01T07:59:02.807

我有一个类似的问题。令我惊讶的是`fork="yes"`，java 任务中的一项工作就像一个魅力。我不必更改任何安全策略。

我会试试这个：

```
<java fork="yes" classname ="${project.MainClass.name}">
    <classpath refid="run.classpath"/>
</java> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-23T13:51:11.060

我在尝试使用**ant注册****MBean**时遇到了同样的问题，解决方案是添加到以下行：**`%JAVA_HOME%\jre\lib\security\java.policy`**

 **> 权限 javax.management.MBeanTrustPermission "注册";

参考：[来自蚂蚁用户的消息](http://ant.1045680.n5.nabble.com/java-security-AccessControlException-when-using-Ant-but-runs-ok-when-invoking-java-from-console-td5713529.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-30T11:39:24.903

显然，Ant 在运行您的程序时安装了一个`SecurityManager`并且您的 JAAS 安全性配置方式，代码没有正确运行所需的权限。

默认情况下没有`SecurityManager`安装，因此您的代码在直接从命令行执行时会正常运行。

您可以查阅[Java 任务的文档](http://ant.apache.org/manual/Tasks/java.html)并在“权限”下查看。******

# java - 2 同时 Android 触摸/未触发

> ID：12195870
> 
> 赞同：0
> 
> 时间：2012-08-30T11:28:28.620
> 
> 标签：java, android, multi-touch

所以你好。

我有一个简单的布局，里面有 2 个视图。两者都附加了一个 onTouchListener。

```
view.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View view, MotionEvent event) {
            System.out.println("Touching");

            return false;
        }
    }); 
```

但是当我在手机上打开应用程序并触摸第一个视图并且不松开手指并用另一根手指触摸第二个视图时，第二个视图不会触发触摸事件。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:41:09.347

我认为在这种情况下，两个触摸都作为多点触摸事件传递给第一个视图。所以这是一个事件，但包含（我忘记了细节）两个触摸位置。

# android - 当我从另一个线程发出请求时，我得到 NetworkOnMainThreadException

> ID：12195875
> 
> 赞同：0
> 
> 时间：2012-08-30T11:28:49.340
> 
> 标签：android, android-asynctask

我了解针对 HoneyComb 设备的 android.os.NetworkOnMainThreadException 的意义，但以下代码会引发相同的异常：

```
class MakeRequest extends AsyncTask<String,Integer,Void>
    {

        @Override
        protected Void doInBackground(String... params) {
            DefaultHttpClient cli = new DefaultHttpClient();
            try {
                String url = params[0].replace(" ", "%20");
                HttpResponse resp = cli.execute(new HttpGet(url));
                BufferedReader read = new BufferedReader(new InputStreamReader(resp.getEntity().getContent()));
                String tmp = "",rezultat = "";
                setResult("");

                while ((tmp = read.readLine()) != null)
                {
                    rezultat = rezultat + tmp;
                }
                setResult(rezultat);
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                setResult("");
                return null;
            }
            return null;
        }
//Sample call
HttpRequester cc = new HttpRequester();
MakeRequest test = cc.new MakeRequest();
test.doInBackground(url); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:31:57.010

尝试这个。

```
new MakeRequest().execute(url); 
```

# github - GitHub基本登录认证

> ID：12195878
> 
> 赞同：0
> 
> 时间：2012-08-30T11:29:14.353
> 
> 标签：github, github-api

我需要有关 Github 中基本身份验证的帮助。我的问题是当我想在“https://github.com/login/oauth/authorize/”中访问以获取获取 access_token 的代码时，如果我没有使用帐户登录在计算机中，我被重定向到 github 门户的登录页面。

我想知道是否可以预先登录github并且不要进行此重定向。

谢谢大家！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-25T03:22:43.883

您是否尝试过先登录然后点击链接进行授权？是的，它应该工作。

# php - 在php中查找填充的数组

> ID：12195879
> 
> 赞同：-4
> 
> 时间：2012-08-30T11:29:14.000
> 
> 标签：php, arrays, find

我有一个数组：

```
$array = array("1" => "", "2" => "" , "3" => "data1", "4" => "" , "5" => "data2", "6" => "" ); 
```

声明时`for`保留了一些空值。数组可能太长。我想要一种在 PHP 中查找填充数组编号的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T11:33:21.427

检查这个，会给你所有空数组键

```
 <?php
      $array = array("1" => "", "2" => "" , "3" => "data1", "4" => "" , "5" => "data2", "6" => "" );
      $new = array_filter($array, 'strlen');
      $result = array_diff($array, $new);
       print_r($result);
    ?> 
```

如果要删除空值键， [请使用 array_filter](http://php.net/manual/en/function.array-filter.php)

```
 <?php
      $array = array("1" => "", "2" => "" , "3" => "data1", "4" => "" , "5" => "data2", "6" => "" );
      $new = array_filter($array, 'strlen');
      print_r($new);
    ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T11:32:35.170

像这样的东西？

```
$newArray = array();

foreach($array as $key=> $value)
{
   if($value != '')
       $newArray[$key] = $value;
}

print_r($newArray); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T11:45:02.533

```
$array = array("1" => "", "2" => "" , "3" => "data1", "4" => "" , "5" => "data2", "6" => "" );

$array_with_keys = array();

foreach($array as $key=> $value)
{
   if($value != '')
       $array_with_keys[] = $key;
}

print_r($array_with_keys); 
```

> 由于您只需要键，这将返回一个带有键的数组，您可以使用它来使用[foreach](http://php.net/manual/en/control-structures.foreach.php)循环更新数据库

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T11:32:39.707

我不是 100% 确定你想要什么，但我认为这可能会对你有所帮助。如果这不是你想要的，请告诉我。

```
foreach ($array as $v) {
  if ($v) {
    // this value is not empty
  }
} 
```

# jquery - JQuery Ajax 发送的是 GET 而不是 POST

> ID：12195883
> 
> 赞同：94
> 
> 时间：2012-08-30T11:29:21.353
> 
> 标签：jquery, ajax

以下代码触发 GET 而不是 POST HTTP 请求。

```
function AddToDatabase() {
  this.url = './api/add';
}

AddToDatabase.prototype.postData = function(dataToPost) {
$.ajax({
    type: "POST",
    url: this.url,
    data: dataToPost,
    context: this,
    success: this.onSuccess
  });
};

var AddToDatabase = new AddToDatabase();
data = {data: 'coucou'};
AddToDatabase.postData(data); 
```

为什么，以及如何获得 POST ？

* * *

我在 Google Chrome Inspect 和 Firefox Inspect 中看到浏览器发送了一个 GET。这是来自 Chrome：

> 请求地址：http://localhost/SAMPLE-CODES/UPDATE%20MYSQL/api/add/ 请求方法：GET 状态码：200 OK

* * *

**解决了**

名为 './api/add' 的 URL 实际上是发布到 './api/add/index.php' 的。原来调用 './api/add `/index.php`' 或 './api/add `/`' 给了我一个 POST 请求。

这只是一个错误的 URL，但由于某种原因，我收到了对 '.api/add/' 的成功 GET 请求。

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2015-03-13T14:06:15.373

MVC上的一些问题。出于某种原因，当我删除 [HttPost] 时，它按预期工作，即使我告诉 ajax 使用 POST 。

*   事实证明你需要使用

> 类型：“发布”

*   即使 jQuery 页面上的示例说要使用

> 方法：“发布”

现在是 POST

但是在深入研究文档后，我发现了这一点。

![在此处输入图像描述](../Images/0f99b10c4b598f1828076cd7fdb537a8.png)

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2016-05-05T07:09:07.977

我遇到了这个问题，根据@FAngle 的建议，这是因为我的 .htaccess 正在删除尾部斜杠 - 我已将 url 设置为`/ajax/foo/bar/`and not `/ajax/foo/bar`。重定向将请求从 POST 更改为 GET。删除 / 问题解决了！

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-10-17T11:19:23.087

该 URL`'./api/add'`实际上被重定向到`'./api/add/index.php'`. `GET`因此，重定向后的新请求使用而不是发送这种奇怪的副作用`POST`

**解决方案**

*   使用完整的网址`'./api/add/index.php'`
*   或添加斜线`'./api/add/'`。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-12-24T18:14:44.943

我在我的 POST 发送 GET 的地方也注意到了这种行为。这个场景非常独特，但也许它会对某人有所帮助。

这发生在我的用户角色编辑页面上，当角色被选中或取消选中时，我使用 ajax（发布）作为即时操作。

我还将服务器配置为在用户的角色信息发生更改时重新验证用户（并重定向他们），以便刷新他们的声明。

残酷的循环结束为：

1.  第一次角色更新 -- POST -- 200 成功

2.  Next Role Update -- POST -- 302 Found -> Redirect *（直到我使用 Fiddler 而不是 Chrome 的网络监视器，我才注意到这一点）*

3.  来自 (2) 的重定向呼叫（相同的 URL）- GET -- 404 Not Found（因为我只允许发布）

4.  转到 (1)

当它检测到 ajax 请求（基于接受类型）时，我最终将服务器更改为绕过重新身份验证/声明更新。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-05-07T21:33:56.307

我发现使用`dataType: 'jsonp'`它时会将请求转换为`GET`. 我把`dataType: 'json'`它改成了从`GET`到`POST`。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-05-03T20:31:38.377

我有一个类似的问题，一旦我`https://`从我的网址中删除硬编码，它就开始为我工作。

```
jQuery.ajax({
 type: "POST",
 url: "www.someurl.com",//instead of "https://www.someurl.com"
 data: { foo:"bar"},
 success: function(d){ console.log(d); },
 dataType: "JSONP"
}); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-30T11:33:54.613

对我来说，你的代码看起来不错，但如果你想确定，你可以使用 $.post 而不是 $.ajax

```
$.post('ajax/test.html', function(data) {
 $('.result').html(data);
}); 
```

jquery 链接：[http ://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-06-07T19:25:29.163

我遇到了同样的问题，发现了这个问题，但答案并没有解决我的问题。我最终通过删除`contentType`ajax 请求中的字段来解决它。

```
contentType: "application/json", 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-08-30T11:57:35.630

查看您的 .htaccess 文件或搜索可能重定向您的请求的其他内容

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-12-03T15:07:36.817

一个非常常见的错误是我们使用按钮类型作为提交，而不是更改表单的方法（默认情况下是获取的）

确保你不使用按钮类型提交，如果你这样做了，你已经将表单方法更改为发布

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-07-28T19:22:39.707

我遇到了这个问题，结果证明是 IIS 中的 URL 重写模块。

我正在使用 ASP.NET MVC 和 WebAPI。我创建了强制小写 URL 的规则，因此社交网络不会将相同的 URL 视为两个不同的页面。

例如：

“ [http://url.com/View/Something/123GuidIdSomething](http://url.com/View/Something/123GuidIdSomething) ”

对比

“ [http://url.com/view/something/123guididsomething](http://url.com/view/something/123guididsomething) ”

然而，这在某种程度上弄乱了我的 ajax 请求。我禁用了规则，问题就解决了。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-01-19T14:04:01.257

就我而言，事实证明问题不在 AJAX 请求中。

我已附加`submit`到按钮的`type`属性中`input`，因此，提交表单时，默认情况下它是对`/`路径的 GET 请求。

最终，我将`type`属性替换为`button`并且它起作用了。

```
$.ajax({
          url: "login.php",
          type: "POST",
          data: $("#form").serialize(),
          success: (param) => {},
          error: (param) => {} 
 })
```

```
<form id="form">
    <label for="foo">Foo</label>
    <input type="text" name="foo" id="foo">
    <br>
    <label for="password">Password</label>
    <input type="password" name="password" id="password">
    <br>
    <input <!--type="submit"--> type="button" value="Send" id="submit">
</form>
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-06-04T15:51:51.047

我遇到了这个问题，问题似乎与从输入中获取的 url 参数的编码有关。Chrome 的开发工具仍然显示`POST`请求，但值是作为`GET`请求接收的。

给出问题的代码是：

```
$.ajax({
    method: 'POST',
    type: 'POST',
    url: '/ajax/test.php?firstname=' + $('#fname').val()+ "&lastname=" + $('#lname').val()+ "&email=" + $('#email').val(),
    success: function(msg) {

        alert("Success");          
    },
    error: function() {

        alert("Failure");
    }
}); 
```

修复方法是移动 以使用`data`参数，而不是将值放入 url：

```
$.ajax({
    method: 'POST',
    type: 'POST',
    url: '/ajax/test.php',
    data: {firstname: $('#fname').val(), lastname: 
    $('#lname').val(), email: $('#email').val()},
    success: function(msg) {

        alert("Success");

    },
    error: function() {
        alert("Failure");
    }
 }); 
```

# google-maps-api-3 - GoogleMaps V3 KML：缩放时更改标记大小

> ID：12195888
> 
> 赞同：1
> 
> 时间：2012-08-30T11:29:53.597
> 
> 标签：google-maps-api-3, kml, google-maps-markers

我目前正在使用 GoogleMaps V3 和 kml 图层开发一个新项目。我目前正在尝试实现的是根据缩放级别动态更改标记的大小。

经过一番搜索，我发现这篇文章基本上告诉我，在加载图层后，我无法缩放 kml 图层中的图标。[GoogleMaps V3 KML PlaceMark StyleURL 更改](https://stackoverflow.com/questions/10879287/googlemaps-v3-kml-placemark-styleurl-change)

所以看来我在这里只剩下三个选项了…… 1\. 为每个缩放级别制作一个 kml 层。2\. 使用第三方 kml 解析器，例如 geoxml_v3。3.直接在我的js代码中打印出我所有的标记。

如果我的项目成功，我的网站上将有大量标记，这导致我提出以下问题：

如果地图上满是标记，哪种方法可以使我的访问者网络浏览器的加载时间最短？

还有其他我应该考虑的方法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:48:12.830

选项：

1.  为每个缩放级别制作一个 kml 图层。
    *   [~] 需要 ~ <20 个 KML 文件
    *   [+] 保留了 KmlLayer 平铺渲染的优势
2.  使用第三方 kml 解析器，例如 geoxml_v3。
    *   [-] 使用本机 Google Maps API v3 对象呈现标记
    *   [+] 如果你想要一个可点击的侧边栏，更容易从外部访问对象。
3.  直接在我的 js 代码中打印出我所有的标记。
    *   [-] 失去了平铺渲染的优势
    *   [-] 大页面大小

最终结果将取决于标记的数量（标记越多，基于图块的渲染优势越大）、自动生成 KML 文件的舒适程度以及地图的功能（帖子中没有足够的信息可以说明）。

# android - 升级数据库。我可以更改表还是需要创建新表？

> ID：12195903
> 
> 赞同：0
> 
> 时间：2012-08-30T11:30:55.120
> 
> 标签：android, sqlite, upgrade

我在我的应用程序中使用了一个数据库，该数据库目前在 Google Play 上。现在我发布了一个更新，并在现有表中添加了一个新列。看起来我需要使用类`onUpgrade()`的方法`SQLiteOpenHelper`。我只是想知道是否需要重新创建整个表，这会导致备份/恢复（这很复杂）过程，或者我可以在升级时更改它？我该如何处理代码中的升级？实现`onUpgrade()`方法就够了吗？可能是什么好例子？非常感谢您的意见，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:33:16.620

是的，您可以更改 table 。无需再次创建。

```
 private static final String ALTER_USER_TABLE_ADD_USER_SOCIETY =  "ALTER TABLE user_table ADD user_society TEXT";
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
    {
        if(newVersion > oldVersion)
        {
            db.execSQL(ALTER_USER_TABLE_ADD_USER_SOCIETY);
        }
    } 
```

# asp.net - Web部署发布后如何在服务器上运行.bat文件

> ID：12195906
> 
> 赞同：7
> 
> 时间：2012-08-30T11:31:00.350
> 
> 标签：asp.net, asp.net-mvc, iis, publishing, webdeploy

我正在使用 Web Deploy 在 Visual Studio 2010 中发布 ASP.NET MVC 网站。在
自动发布后，有什么方法可以在服务器上运行 .bat 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T22:24:19.570

请参阅：[发布发布事件](https://stackoverflow.com/questions/1360579/post-publish-events)

您可以创建一个在您的 IIS 机器上运行的[Windows 服务](http://msdn.microsoft.com/en-us/library/zt39148a%28v=vs.80%29.aspx)[`FileSystemWatcher`](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)，并使用它来监视对您的 Web 根路径的更改，并在它检测到文件更改时运行一个[批处理文件](https://stackoverflow.com/questions/5519328/executing-batch-file-in-c-sharp)。

# sql-server - 实体框架中的枚举缺少列

> ID：12195907
> 
> 赞同：1
> 
> 时间：2012-08-30T11:31:01.537
> 
> 标签：sql-server, database, entity-framework, enums, entity-framework-5

我已经使用 Entity Framework 5 建立了一个代码优先模型。这些类有几个枚举。

我首先将模型类放在原型 ASP.NET MVC 项目中。我还添加了

```
Database.SetInitializer(new DropCreateDatabaseAlways<dbType>()); 
```

命令到 global.asax.cs 文件。

在 Visual Studio 中运行 MVC 应用程序产生了我在 SQL Server (2008 R2) 中想要的数据库架构。（枚举的 int 值列）

然后我将模型代码复制到实际使用的解决方案中，该解决方案分为几个项目，一个具有 EF 代码，另一个是 ASP.NET MVC 部分。

我还向 global.asax.cs 添加了相同的初始化程序

现在，当我运行该项目时，我确实在数据库中获得了正确的表，但是由于某些奇怪的原因，表中缺少枚举列！

如何让 EF 生成枚举列？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-30T12:33:01.177

枚举支持依赖于 .NET 4.5，因此它仅在项目以 .NET 4.5 为目标时才有效。

# android - 选中/取消选中 ListView 自定义适配器中的所有 CheckedTextView

> ID：12195909
> 
> 赞同：0
> 
> 时间：2012-08-30T11:31:08.300
> 
> 标签：android, checkbox, adapter, onclicklistener, checkedtextview

我有这样一个自定义适配器：

```
adapter = new ArrayAdapter<Item>(this,
            R.layout.file_manager, R.id.checkedTextItem,
            fileList) 
            {
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // creates view
            LayoutInflater inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View view = inflater.inflate(R.layout.item, null);
            view.setFocusable(false);
            CheckedTextView textView = (CheckedTextView) view
                    .findViewById(R.id.checkedTextItem);
            // put the image on the text view
            textView.setCompoundDrawablesWithIntrinsicBounds(
                    fileList[position].icon, 0, 0, 0);              
            textView.setTextColor(Color.WHITE);
            textView.setText(fileList[position].file);
            if(fileList[position].file.equalsIgnoreCase("select all") & (fileList[position].check == true))
            {   
                for(int i =0;i<fileList.length;i++)
                {
                    fileList[i].setItemCheck(true);
                    chosenFile = fileList[i].file;
                    File sel = new File(path + "/" + chosenFile);
                    if (sel.isFile())
                        resFiles.add(sel);
                }
                resFiles.remove(position);
            }
            else if(fileList[position].file.equalsIgnoreCase("select all") & (fileList[position].check == false))
            {
                { 
                    for(int i =0;i<fileList.length;i++)
                    {

                        fileList[i].setItemCheck(false);
                    }

                }
            }
            if(fileList[position].icon == R.drawable.directory_icon)
                textView.setCheckMarkDrawable(null);
            else if(fileList[position].icon == R.drawable.directory_up)
                textView.setCheckMarkDrawable(null);
            if(fileList[position].check == true)
                textView.setChecked(true);
            else
                textView.setChecked(false);

            // add margin between image and text (support various screen
            // densities)
            int dp5 = (int) (5 * getResources().getDisplayMetrics().density + 0.5f);
            textView.setCompoundDrawablePadding(dp5);

            textView.setFocusable(false);

            return view;

        }
    }; 
```

我有一个类项目，在那里我创建了布尔字段检查：+

```
public class Item {

    public String file;
    public int icon;
    public boolean check;

    public Item(String file, Integer icon, boolean check) {
        this.file = file;
        this.icon = icon;
        this.check = check;
    }
     public String getItemFile()
     {
         return file;
     }

     public int getItemIcon()
     {
         return icon;
     }
     public boolean getItemCheck()
     {
         return check;
     }

     public void setItemCheck(boolean check)
     {
         this.check = check;
     }

     public void setItemFile(String file)
     {
         this.file = file;
     }
     public void setItemIcon(int icon)
     {
         this.icon = icon;
     }
     public void toggle()
     {
         check = !check;
     }

    @Override
    public String toString() {
        return file + " "+ icon+ " "+ check;
    } 
```

}

还有我的 listView setOnItemClickListener，我在其中设置了项目的检查状态，这是使用 Item 类的 toggle() 方法单击的

```
lv.setOnItemClickListener(new android.widget.AdapterView.OnItemClickListener() {
          public void onItemClick(AdapterView<?> myAdapter, View myView, int myItemInt, long mylng) 
          {
            //String selectedFromList = (lv.getItemAtPosition(myItemInt).toString());
            myView.setFocusable(false);
            chosenFile = fileList[myItemInt].file;
            File sel = new File(path + "/" + chosenFile);
            Log.i("path",sel.toString());
            if (sel.isDirectory()) {

                firstLvl = false;

                str.add(chosenFile);

                fileList = null;
                path = new File(sel + "");

                loadFileList();
                lv.setAdapter(adapter);

            }
            else if (chosenFile.equalsIgnoreCase("up") && !sel.exists()) {

                // present directory removed from list
                String s = str.remove(str.size() - 1);

                // path modified to exclude present directory
                path = new File(path.toString().substring(0,
                        path.toString().lastIndexOf(s)));
                fileList = null;
                // if there are no more directories in the list, then
                // its the first level

                if (str.isEmpty()) {
                    firstLvl = true;
                }
                loadFileList();
                lv.setAdapter(adapter);
            }
            else
            {

                fileList[myItemInt].toggle(); 
                if (fileList[myItemInt].check == true)
                    resFiles.add(sel);
                else
                    resFiles.remove(sel);
                adapter.notifyDataSetChanged();
                Log.i(fileList[myItemInt].file,Boolean.toString(fileList[myItemInt].check));
            }   
    }

}); 
```

我想实现检查所有 CheckedTextView 的能力。我尝试在适配器的 getView() 方法中执行此操作。我可以检查所有项目，但问题在于取消选中。因为当我`fileList[i].setItemCheck(false);`在“全选”项目的检查状态为假时调用语句时，我无法通过单击检查所有项目。我怎样才能以更好的方式实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:43:07.497

我通过更改 setOnItemClickListener 方法解决了这个问题。问题是我试图检查我的 loadFileList() 方法中的所有项目，该方法确定所有可检查状态，但我应该处理单个检查和所有检查代码的不同部分。现在我在 setOnItemClickListener 的 else 语句中执行它......它看起来像这样：

```
 else
            {

                fileList[myItemInt].toggle(); 
                if(fileList[myItemInt].file.equalsIgnoreCase("select all") & (fileList[myItemInt].check == true))
                {
                    String selectAllFile = fileList[myItemInt].file;
                    File all = new File(path + "/" + selectAllFile);
                     for(int i =0;i<fileList.length;i++)
                        {
                            chosenFile = fileList[i].file;
                            File select = new File(path + "/" + chosenFile);
                             fileList[i].setItemCheck(true);

                             if (select.isFile())
                                 {          
                                     resFiles.add(select);
                                     resFiles.remove(all);

                                 }

                         }

                     adapter.notifyDataSetChanged();
                }

                else if(fileList[myItemInt].file.equalsIgnoreCase("select all") & (fileList[myItemInt].check == false))
                {
                    for(int i =0;i<fileList.length;i++)
                    {

                        fileList[i].setItemCheck(false);

                    }
                     adapter.notifyDataSetChanged();
                }
                if (fileList[myItemInt].check == true)
                    {
                    resFiles.add(sel);
                     if(fileList[myItemInt].file.equalsIgnoreCase("select all"))
                             {
                                String selectAllFile = fileList[myItemInt].file;
                                File all = new File(path + "/" + selectAllFile);
                                resFiles.remove(all);
                             }
                    }
                else
                resFiles.remove(sel);
                adapter.notifyDataSetChanged();
                Log.i(fileList[myItemInt].file,Boolean.toString(fileList[myItemInt].check));
            }   
    }

}); 
```

# java - Java - 从另一个字符串中提取一个字符串

> ID：12195917
> 
> 赞同：0
> 
> 时间：2012-08-30T11:31:25.090
> 
> 标签：java, string

我有一个这样的字符串：

```
http://www.fam.com/FAM#Bruno12/06/2011 
```

怎样才能切`http://www.fam.com/FAM#`得`12/06/2011`只得`Bruno`。

格式始终为：

```
http://www.fam.com/FAM#NAMEDATE 
```

有没有一种简单的方法可以做到这一点？你能解释一下怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:35:18.940

只需这样做：

```
myString = original.substring(23, original.length() - 10); 
```

*   `23`是为了`http://www.fam.com/FAM#`
*   `original.length() - 10`是为了`12/06/2011`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T11:37:25.240

采用 ：

```
String str = "http://www.fam.com/FAM#Bruno12/06/2011";
String[] arr = str.split("#|[\\d+/]"); // last index of arr is Bruno 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T11:34:14.637

使用正则表达式`#(.*?)\\d\\d/`来捕获它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T11:34:54.217

如果字符串始终以开头，`http://www.fam.com/FAM#`那么它很简单：即 23 个字符，因此从位置 23 获取子字符串（注意索引是从零开始的）。

```
String input = "http://www.fam.com/FAM#Bruno12/06/2011";
String result = input.substring(23); 
```

如果您想要`#`字符串中第一个之后的所有内容，则搜索`#`并获取它之后的所有内容：

```
int index = input.indexOf('#');
String result = input.substring(index + 1); 
```

（为简单起见，省略了错误检查）。

要删除日期，请删除最后 10 个字符。

`String`有关有用的方法，请参阅类的 API 文档。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T11:35:30.837

您应该使用标准的 URL 解析代码，如[您能否分享指向 URL 解析实现的链接？](https://stackoverflow.com/questions/3990640/could-you-share-a-link-to-an-url-parsing-implementation/3990658#3990658)

我希望 URL 解析器可以处理您的`Ref`（即“Bruno12/06/2011”）包含斜杠的事实。

```
URL url = new URL(inputString);
String nameDate = url.getRef(); 
```

用最简单、最清晰的形式表达你想做的事情。

# c# - Web 服务 401 未经授权的错误

> ID：12195918
> 
> 赞同：0
> 
> 时间：2012-08-30T11:31:26.487
> 
> 标签：c#, java, web-services, soap

我已经使用 c# 创建了 Web 服务。我使用 c# 客户端消耗了 401 Unauthorized 错误。所以，我设置属性 UseDefaultCredentials = true。

然后我尝试使用 java 客户端访问 Web 服务，我再次收到 401 Unauthorized 错误。我不知道如何使用 java 客户端存根。那么，有人可以指出我的方向。

我在 Eclipse 中得到了这些类文件

```
DemoWebServ.java
DemoWebServLocator.java
DemoWebServSoap.java
DemoWebServSoapProxy.java
DemoWebServSoapStub.java 
```

我需要通过使用上述存根提供用户名和密码来访问 Web 服务

**编辑 1**

在一些谷歌搜索中，我发现添加

```
 _call.setProperty(org.apache.axis.client.Call.USERNAME_PROPERTY, "USERNAME");
    _call.setProperty(org.apache.axis.client.Call.PASSWORD_PROPERTY, "PASSWORD"); 
```

将解决该问题，但即使在 DemoWebServSoapStub.java 中添加上述语句之后。我无法解决问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:09:19.397

想出了解决办法，

这是因为 IIS 中网站的匿名访问安全性。我使用我在 Windows 服务器上的帐户来设置匿名访问 uname/password。然后我使用了相同的组合

```
_call.setProperty(org.apache.axis.client.Call.USERNAME_PROPERTY, "USERNAME");
_call.setProperty(org.apache.axis.client.Call.PASSWORD_PROPERTY, "PASSWORD"); 
```

有效。我不知道它有多安全:(

# magento - Magento 在取货时固定送货地址

> ID：12195920
> 
> 赞同：0
> 
> 时间：2012-08-30T11:31:37.320
> 
> 标签：magento

我需要帮助找到可以为取件设置固定送货地址的地方。我希望在订单确认上打印我们公司的地址，而不是客户自己的地址。

但我似乎找不到合适的地点，可能需要自定义交付方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T11:48:09.740

您可以在服务器端使用 Javascript 和观察者 sales_order_place_before 将检查付款方式并根据此调整地址

# java - 在hadoop中实现多个映射器和单个reducer

> ID：12195921
> 
> 赞同：0
> 
> 时间：2012-08-30T11:31:40.890
> 
> 标签：java, hadoop, mapreduce

我是hadoop的新手。我有多个文件夹，其中包含用于处理 hadoop 中的数据的文件。我怀疑在 map-reducer 算法中实现 mapper。我可以指定多个映射器来处理多个文件并使用单个减速器将所有输入文件作为一个输出吗？如果可能，请给出实施上述步骤的指导方针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:02:41.340

如果您有多个文件，请使用[MultipleInputs](http://hadoop.apache.org/common/docs/r0.20.2/api/org/apache/hadoop/mapred/lib/MultipleInputs.html)

addInputPath() 方法可用于：

1.  添加多个路径和一个通用映射器实现
2.  使用自定义映射器和输入格式实现添加多个路径。

对于有一个 reducer，让每个映射的输出键相同……比如 1 或“abc”。这样，框架将只创建一个 reducer。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:03:28.797

如果要以相同的方式映射文件（例如，它们都具有相同的格式和处理要求），那么您可以配置一个映射器来处理所有文件。

您可以通过配置 TextInputFormat 类来做到这一点：

```
string folder1 = "file:///home/chrisgerken/blah/blah/folder1";
string folder2 = "file:///home/chrisgerken/blah/blah/folder2";
string folder3 = "file:///home/chrisgerken/blah/blah/folder3";
TextInputFormat.setInputPaths(job, new Path(folder1), new Path(folder2), new Path(folder3)); 
```

这将导致映射器处理文件夹 1、2 和 3 中的所有文件。

当然，如果您需要使用不同的输入类型，则必须适当地配置该类型。

# c# - 使用 iTextSharp 将图像插入 PDF

> ID：12195922
> 
> 赞同：3
> 
> 时间：2012-08-30T11:31:42.413
> 
> 标签：c#, .net, windows, pdf, itextsharp

我正在尝试使用 iTextSharp 将图像插入到新创建的 PDF 文档中——尽管我不确定我是否以正确的方式进行操作。我创建了一个图像对象，然后尝试将其添加到页面中 - 但没有显示图像 - 尽管我插入的文本确实出现在 PDF 文档中。

有没有人有任何想法？

```
public bool createPDF(string batchNumber, string userName, string path)
{
    // step 1: creation of a document-object
    Document myDocument = new Document(PageSize.A4.Rotate());

    try
    {
        // step 2:
        // Now create a writer that listens to this doucment and writes the document to desired Stream.
        PdfWriter.GetInstance(myDocument, new FileStream(path, FileMode.Create));

        // step 3:  Open the document now using
        myDocument.Open();

        // step 4: Now add some contents to the document
        // batch Header e.g. Batch Sheet
        myDocument.Add(new Paragraph("Number: " + batchNumber));
        myDocument.Add(new Paragraph("Created By: " + userName));

        iTextSharp.text.Image logo = iTextSharp.text.Image.GetInstance("code39-barcode.png");
        PdfPCell cell = new PdfPCell(logo);
        myDocument.Add(cell);
    }
    catch (DocumentException de)
    {
        Console.Error.WriteLine(de.Message);
    }
    catch (IOException ioe)
    {
        Console.Error.WriteLine(ioe.Message);
    }

    // step 5: Remember to close the document
    myDocument.Close();

    return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T21:18:17.280

阅读[本文](http://www.mikesdotnetting.com/Article/87/iTextSharp-Working-with-images)以了解如何添加图像

但是，我认为您错过了桌子上的一些东西。

您应该有一个表格并使用 table.addCell 添加单元格

```
PdfPTable table = new PdfPTable(3);

PdfPCell cell = new PdfPCell(new Phrase("Header spanning 3 columns")); 
```

阅读[本文](http://www.mikesdotnetting.com/Article/86/iTextSharp-Introducing-Tables)以了解如何使用表格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-23T07:29:47.680

删除这个：

```
PdfPCell cell = new PdfPCell(logo);
myDocument.Add(cell); 
```

并使用这个：

```
myDocument.Add(logo); 
```

它有效:)

# forms - Twitter Bootstrap：停止输入字段超出范围

> ID：12195931
> 
> 赞同：8
> 
> 时间：2012-08-30T11:31:59.537
> 
> 标签：forms, twitter-bootstrap, responsive-design

我在尝试解决此问题时遇到了麻烦。文档说我应该将跨度设置为等于父跨度，但是，当我这样做时，它会延伸到井容器的右侧。在移动设备上查看时看起来不错（向右延伸适当的量，填充井），但是，它在桌面上播放效果不佳（我希望字段在井内延伸）。

```
<div class="container">
    <div class="row">
        <div class="span4 offset4">
            <div id="login-panel">
                <div class="well bordered clearfix">
                    <div class="text-center">
                        <div class="page-header" style="border-bottom: none; margin: 0;">
                            <img src="library/img/logo-01.png"/>
                        </div>
                    </div>
                    <form method="POST" action="#" accept-charset="UTF-8" class="pull-left">
                        <legend>App name</legend>
                        <div class="control-group ">
                            <!-- username field -->
                            <div class="controls">
                                <label>Email</label>
                                <input class="span4" type="text" name="email" value="" id="email" placeholder="Your email address">
                            </div>
                        </div>

                        <div class="control-group">
                            <label>Password</label>
                            <!-- password field -->
                            <input type="password" name="password" id="password" placeholder="Password">
                        </div>
                        <div class="control-group ">
                            <p>
                                <input class="btn btn-default pull-left" type="submit" value="Sign-up">
                                <input class="btn btn-primary pull-right" type="submit" value="Login">
                            </p>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div> <!-- end row -->
</div> <!-- end container --> 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-07T16:33:41.343

文档实际上是在说：

> 用于匹配相同大小的网格列的输入**`.span1`**。**`.span12`**

但是你想做一个 full-width `<input>`，对吧？

## 制作一个`<input>`全宽

```
input.full-width {
    box-sizing: border-box;
    width: 100%;
    height: 30px;
} 
```

也`.pull-left`从`<form>`. 看看它是如何在[这个小提琴](http://jsfiddle.net/pMU2F/)上工作的。

* * *

### 编辑

由于 Bootstrap 2.2.0 使用捆绑`input-block-level`类来实现此效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-02T15:37:29.763

我最近在表单和面板主体上遇到了这个问题。经过检查，我注意到问题不在于输入，而在于表单本身超出了面板。我通过在表单上而不是输入上放置一个 max-width: 100% 来修复它。

# android - 无效的访问令牌格式 Twitter4j 2.2.6

> ID：12195940
> 
> 赞同：0
> 
> 时间：2012-08-30T11:32:28.383
> 
> 标签：android, twitter-oauth, twitter4j

这是我的堆栈跟踪，我不知道出了什么问题！

```
08-30 12:26:50.494: E/AndroidRuntime(19465): FATAL EXCEPTION: main
08-30 12:26:50.494: E/AndroidRuntime(19465): java.lang.IllegalArgumentException: Invalid access token format.
08-30 12:26:50.494: E/AndroidRuntime(19465):    at twitter4j.auth.AccessToken.<init>(AccessToken.java:50)
08-30 12:26:50.494: E/AndroidRuntime(19465):    at com.project.p.twitter.TwitterUtils.isAuthenticated(TwitterUtils.java:21)
08-30 12:26:50.494: E/AndroidRuntime(19465):    at com.project.p.activities.Activity$4.onClick(Activity.java:313)
08-30 12:26:50.494: E/AndroidRuntime(19465):    at android.view.View.performClick(View.java:3591)
08-30 12:26:50.494: E/AndroidRuntime(19465):    at android.view.View$PerformClick.run(View.java:14263)
08-30 12:26:50.494: E/AndroidRuntime(19465):    at android.os.Handler.handleCallback(Handler.java:605)
08-30 12:26:50.494: E/AndroidRuntime(19465):    at android.os.Handler.dispatchMessage(Handler.java:92)
08-30 12:26:50.494: E/AndroidRuntime(19465):    at android.os.Looper.loop(Looper.java:137)
08-30 12:26:50.494: E/AndroidRuntime(19465):    at android.app.ActivityThread.main(ActivityThread.java:4507)
08-30 12:26:50.494: E/AndroidRuntime(19465):    at java.lang.reflect.Method.invokeNative(Native Method)
08-30 12:26:50.494: E/AndroidRuntime(19465):    at java.lang.reflect.Method.invoke(Method.java:511)
08-30 12:26:50.494: E/AndroidRuntime(19465):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
08-30 12:26:50.494: E/AndroidRuntime(19465):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
08-30 12:26:50.494: E/AndroidRuntime(19465):    at dalvik.system.NativeStart.main(Native Method) 
```

它指向我这段代码

```
public static boolean isAuthenticated(SharedPreferences prefs) {

    String token = prefs.getString(OAuth.OAUTH_TOKEN, "");
    String secret = prefs.getString(OAuth.OAUTH_TOKEN_SECRET, "");

    AccessToken a = new AccessToken(token, secret);

    Twitter twitter = new TwitterFactory().getInstance();
    twitter.setOAuthConsumer(Constants.CONSUMER_KEY,
            Constants.CONSUMER_SECRET);
    twitter.setOAuthAccessToken(a);

    try {
        twitter.getAccountSettings();
        return true;
    } catch (TwitterException e) {
        return false;
    }
} 
```

特别是这条线

```
AccessToken a = new AccessToken(token, secret); 
```

当我使用 twitter4j 2.1.1 时一切正常，但由于其他原因我不得不更新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T20:15:04.673

Change

> twitter.getAccountSettings();

to

> twitter.verifyCredentials();

Worked for me..

[Edit]

Also capture the exception when creating the AccessToken with empty token and secret.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T11:17:37.137

无需从首选项中获取`OAuth.OAUTH_TOKEN`和`OAuth.OAUTH_TOKEN_SECRET`从首选项中获取，而是转到您在 Twitter 中的应用程序页面并创建您的访问令牌，您可以使用***详细信息***选项卡底部的按钮来执行此操作，它将为您提供所需的参数。

在您的代码中使用这些而不是令牌和秘密字符串。

我不知道这是否是解决这个问题的最健康的方法，因为我们正在对这些值进行硬编码，但它暂时解决了我的问题。

# php - 在搜索中需要帮助

> ID：12195942
> 
> 赞同：-9
> 
> 时间：2012-08-30T11:32:33.603
> 
> 标签：php, mysql

根据我的系统，我需要根据类别和子类别搜索品牌。

像这样的品牌表

```
id brandname categoryid subcategoryid
1   xys       1,2,3      1,5,6 
```

现在，当我搜索时，我选择类别然后根据类别所有子类别现在我选择子类别现在需要显示基于该类别和子类别的所有品牌。我的品牌表看起来像这样，因为同一个品牌有多个类别和子类别。请帮我解决这个问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T11:44:00.317

鉴于您的数据库设计，您可以这样做：

```
SELECT * FROM mytable WHERE
    FIND_IN_SET('5', categoryid) > 0 AND FIND_IN_SET('3', subcategoryid) > 0; 
```

这将找到类别 5 和子类别 3 中的所有项目。

```
SELECT * FROM mytable WHERE
    FIND_IN_SET('5', categoryid) > 0 AND (
        FIND_IN_SET('3', subcategoryid) > 0
        OR
        FIND_IN_SET('9', subcategoryid) > 0
    ); 
```

以上将找到类别 5、子类别 3 和 9 中的项目。当然，您也可以通过使用而不是限制到*两个*类别中的项目。`AND``OR`

但这一切都是不必要的昂贵。如果有一个品牌名称表，以及其他用于类别和子类别 ID 和链接的表，您会做得更好，如下所示：

```
// This is an article. Many-to-one relation with brands.
CREATE TABLE articles
(
    id        integer primary key not null auto_increment,
    name      varchar(...),
    brand_id  integer,
    //, other data
);

CREATE TABLE brands
(
    id        integer primary key not null auto_increment,
    name      varchar(...)
    //, other data
);

// Categories. Many-to-Many relationship with articles.
CREATE TABLE categories
(
    id        integer primary key not null auto_increment,
    name      varchar(...)
    //, other data
);

// Subcategories. These are independent from categories, which
// may be right or wrong, depending. Being independent, we do not
// store here parent_category_id.
CREATE TABLE subcategories
(
    id        integer primary key not null auto_increment,
    name      varchar(...)
    //, other data
);

// Many to many relationship between articles and categories

CREATE TABLE mtm_article_in_category
(
    article_id  integer not null,
    category_id integer not null
);

CREATE TABLE mtm_article_in_subcategory
(
    article_id  integer not null,
    subcategory_id integer not null
);

// Add article 5 to categories 25, 37 and 119:
INSERT IGNORE INTO mtm_article_in_category VALUES ( 5, 25 ), ( 5, 37 ), ( 5, 119 );
// Remove article 18 from subcategory 92
DELETE FROM mtm_article_in_category WHERE article_id = 18 AND subcategory_id = 92; 
```

通过这种方式，您可以运行更快的查询，并且不会遇到无法将文章分配到“这么多”类别（例如 50 个）等问题；如果您想将一篇文章从一个类别移动到另一个类别，也不会让人头疼，而您当前的设计几乎是不可能的。

> 我这样的搜索起初我选择了类别，所有子类别都基于类别。然后当我选择子类别时，所有品牌都基于该类别和子类别来。现在我一次添加一个品牌名称，包含多个类别和多个子类别。

我不得不说，“哦，我的上帝”。为了能够“选择所有子类别”/now/，您必须将其转换为

```
 category    subcategory
 4,5         1,7,9,19
 5           7,9,11 
```

在 5 1 5 7 5 9 5 19 5 7 5 9 5 11

然后运行 ​​a `DISTINCT`，最后将子类别用作`INNER JOIN`基于`FIND_IN_SET`。

第一步（“分解”一个CSV行）可以这样完成：http: [//www.marcogoncalves.com/2011/03/mysql-split-column-string-into-rows/](http://www.marcogoncalves.com/2011/03/mysql-split-column-string-into-rows/) ...你可以看到这一切都是微不足道的。

我希望目前您正在使用 PHP 进行拆分。

这样做之后，`INNER JOIN`价格非常昂贵。

我们把好钱扔在坏钱之后。您当前的数据库设计不允许轻松地做您想做的事。最简单的方法是：

```
// My search like this at first i chose category the all the subcategory
// come based on category.

$query = "SELECT subcategoryid FROM mytable WHERE FIND_IN_SET(:mycategory, categoryid) > 0;";
// and run the query.

$subcategories = array();
while($tuple = sql_fetch_tuple($exec))
{
    // Explode "1,2,3" into array {1, 2, 3}. Merge into subcategories removing
    // duplicates. Rinse. Repeat.
    $subcategories = array_unique(array_merge($subcategories, explode(',', $tuple['subcategoryid'])));
}
sql_free($exec);
// Now we have an array of subcategories.

// Then when i chose subcategory all the brand
// based on that category and subcategory come.

$subcat_query = array();
foreach($subcategories as $subcategory)
    $subcat_query[] = "FIND_IN_SET('$subcategory', subcategoryid)";
$subcat_query_sql = implode(' OR ', $subcat_query);

$query = "SELECT DISTINCT brand FROM mytable WHERE FIND_IN_SET(:cat, categoryid) AND ( $subcat_query_sql );";

// And here we get all brands. It is wise to save $subcat_query_sql in _SESSION.

// Next search will be:

// >Now i add one brand name
// > one time with multiple category and multiple subcategory.

// Note that you've subtly moved the target once more, now the 'category' has become "multiple".
$brands_arr[] = array();
foreach($brands as $brand)
    $brands_arr[] = "'" . sql_escape($brand) . "'";
$brands_sql = implode(',', $brands_arr);

// The cost of this $query is estimated as a significant percentage of U.S. gross internal product, so it ought to be cleared with the FED.

$query = "SELECT * FROM mytable WHERE brand IN ($brands_sql) AND FIND_IN_SET(:cat, categoryid) AND ( $subcat_query_sql );"; 
```

上述查询也有可能根本不返回*任何内容*。假设您查找子类别 5 和类别 12。根据您的要求，获取“所有子类别”和“所有类别”可能还会返回品牌 6 和子类别 9。然后这两行出来，

```
 Marlboro   5   12
 Lucky      6   9 
```

并且用户选择“Marlboro 6 12”。他不会得到任何东西 - 没有行会匹配该查询。

恐怕用户界面和工作流程/用例也需要研究。

# ios - 从 AIFF 转换的 AVAudioPlayer M4A 文件产生的延迟与从 ADTS AAC 转换的 M4A 不同

> ID：12195951
> 
> 赞同：1
> 
> 时间：2012-08-30T11:32:59.090
> 
> 标签：ios, audio, aac, m4a, adts

在开发节奏音乐游戏时，我注意到 AVAudioPlayer 在报告的 .currentTime 和音频文件中的实际位置之间存在延迟，该延迟因文件格式而异。

例如，播放 .m4a 文件将产生比播放 .aac 文件 (ADTS AAC) 更低的延迟。

这有点可以理解，我已经接受了这一点（因为根据文件类型，延迟是一个常数）。

我不明白的是，为什么这些不同的延迟也可能发生在 2 种 .m4a 文件中，即从原始 AIFF 文件转换而来的文件，以及首先转换为 ADTS AAC 然后转换为 .m4a 的文件

换句话说：

如果我运行：

```
afconvert -f m4af -d aac my_aif_file.aif 
```

我得到的文件播放延迟比这样创建的文件低：

```
afconvert -f adts -d aac my_aif_file.aif
afconvert -f m4af -d aac my_aif_file.aac 
```

任何理解这些不同结果的解释/解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:07:50.323

找到了问题 - 它是转换本身。

转换为 adts aac 时，转换后的音频具有大约 40 毫秒的静音前缀......奇怪......

# c# - 进行数据行 Select() 查询

> ID：12195952
> 
> 赞同：0
> 
> 时间：2012-08-30T11:33:01.557
> 
> 标签：c#, asp.net

问题是我有一个数据行数组，其中包含 ID 和父 ID 作为其字段。

我使用了以下代码，它返回了正确的值，

```
datarow [] dt = datarow.select("  Parent = '0' "); 
```

我只想选择那些没有“0”作为其父项的行。我知道 sql 我不知道选择函数是如何工作的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T11:56:12.270

尝试使用 LINQ - 这是一个使用示例，我认为这就是您想要的：

```
 DataTable dt = new DataTable("Example");
  dt.Columns.Add("ID", typeof(int));
  dt.Columns.Add("ParentID", typeof(int));
  dt.Rows.Add(1, 0);
  dt.Rows.Add(1, 1);

  var equal0 = dt.Rows.Cast<DataRow>().Where(x => x.Field<int>("ParentID") == 0);
  var notEqual0 = dt.Rows.Cast<DataRow>().Where(x => x.Field<int>("ParentID") != 0); 
```

你得到一个数据行列表，其父 id 等于 0 和一个不等于 0 的列表。

编辑：

我看到您正在尝试 Select - Where is an alternative and do you want to do。此过滤器基于布尔条件，因此您可以在 ParentID 大于 x 或小于等的情况下进行操作。

希望这个对你有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T11:51:03.780

试试这个 ：：

```
DataRow[] dt = dt.Select("Parent != '0'");
dt[0][Your Column Name] = your value; 
```

# powershell - 如何使用powershell从7z文件中部分提取文件夹

> ID：12195959
> 
> 赞同：2
> 
> 时间：2012-08-30T11:33:29.497
> 
> 标签：powershell, 7zip

我正在尝试自动安装我的平台。我制作了一个脚本，用于将可部署的构建压缩为 7zip 文件。

现在我需要将一些文件夹部分解压缩到特定目的地。

包
-app1
--folder11
---folder111
--folder12
-app2
--folder21
--folder22
...

我需要创建一个 powershell 脚本来将“app1”的内容提取到目标文件夹。

我一直在尝试使用以下命令，但结果与我预期的不一样。我一直在递归接收完整路径，而不是来自 folder11 的内容。

```
Set-Alias zip $ZipCommand
zip x $FilePath app1\folder11 -oc:DeployableFolder -r 
```

有任何想法吗？建议？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:37:01.290

我试过了，没有问题。

```
set-alias zip "c:\Program Files\outils\7-Zip\7z.exe"
zip x program.7z python-core-2.6.1\lib -oc:\data 
```

我最终得到了 ac:\data\python-core-2.6.1，它只包含 lib 文件夹及其所有子文件夹和文件。

我看到的唯一区别是输出路径中的反斜杠 \ 。

高温高压

# c# - 与实体框架同时使用相同数据（在其他客户端上接收更新）

> ID：12195960
> 
> 赞同：0
> 
> 时间：2012-08-30T11:33:39.553
> 
> 标签：c#, entity-framework

所以我有一个使用 Entity Framework 作为数据的应用程序，但现在我碰壁了，我还没有想出办法。

因此，基本用例是我有一组数据被频繁修改并显示给当时连接的每个用户。在客户端所做的更改不会立即保存到数据库中，而只会在用户提交更改后保存。现在，是否有可能构建一个系统来通知其他用户对数据库所做的修改并让他们自动刷新他们的上下文？我真的不想创建任何类型的轮询系统，而是接收事件或类似的东西。此外，绝对最好的事情是允许合并更改（比如我正在编辑 itemA，另一个用户编辑 itemB 并提交更改，我收到一个事件并且只更新 itemB 仍然保留我迄今为止所做的更改A项）。

可能使用的版本是基于 EF 4.3.1 ObjectContext 或基于 EF 5.0.0 DbContext 的版本。使用的数据库是 MS SQL。

# drupal - drupal主页工作 - 所有其他页面都给出404

> ID：12195963
> 
> 赞同：0
> 
> 时间：2012-08-30T11:33:50.230
> 
> 标签：drupal, web-hosting

我是drupal的新手，我可以正常访问网站主页，但无法打开其他页面。它显示像 404 页面错误。请在这些问题上帮助我。

网站名称： http: [//moserfarmshomes.com](http://moserfarmshomes.com)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:20:32.937

您的 clean-url 设置可能是错误的配置？查看 .htaccess 和 ?q=admin/config/search/clean-urls

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T12:55:48.090

尝试设置`$base_url`到**http://moserfarmshomes.com**`settings.php`

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T12:02:22.923

我认为您需要全新安装 Drupal。

尝试按照此视频的步骤操作：[http ://www.youtube.com/watch?v=7vPnlK1yiLw](http://www.youtube.com/watch?v=7vPnlK1yiLw)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T16:17:05.857

I had the same issue and for me it turned out I was missing the .htaccess in my install directory.

So check you copied that as well since it is a hidden file it's easy to forget this.**

# javascript - string parsing in javascript

> ID：12195969
> 
> 赞同：0
> 
> 时间：2012-08-30T11:34:07.703
> 
> 标签：javascript

I have a string like this:

```
S(08-01-2008) I[18] ф4(579.1900 UAH) E(05-07-2009)R[5](117.1900) V[0](0.0000) Up(22-04-2009) 
```

I need get **Up** value: **22-04-2009**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T11:35:51.820

Try

```
'S(08-01-2008) I[18] ф4(579.1900 UAH) E(05-07-2009) R5 V0 Up(22-04-2009)'
 .match(/Up\(.+\)/g); 
```

It returns an array of matched values, here `["Up(22-04-2009)"]`

Value only could be:

```
'S(08-01-2008) I[18] ф4(579.1900 UAH) E(05-07-2009) R5 V0 Up(22-04-2009)'
 .match(/Up\(.+\)/g)[0].split(/\(|\)/)[1]; 
```

Or

```
'S(08-01-2008) I[18] ф4(579.1900 UAH) E(05-07-2009) R5 V0 Up(22-04-2009)'
 .match(/Up\(.+\)/g)[0].replace(/Up\(|\)/g,''); 
```

If you're not sure 'Up(...)' exists in the string:

```
( 'S(08-01-2008) I[18] ф4(579.1900 UAH) E(05-07-2009) R5 V0 Up(22-04-2009)'
   .match(/Up\(.+\)/g) || ['not found'][0] ) 
 .replace(/Up\(|\)/g,''); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T11:38:58.483

```
extract = yourString.substr( -11,10); 
```

It will extract 10 chars starting by the 11th counting from end.

This assume that the up value is always at the end of your input string.

This one is much faster than regex, or split solutions if you just need one value.

More example at : [http://www.bennadel.com/blog/2159-Using-Slice-Substring-And-Substr-In-Javascript.htm](http://www.bennadel.com/blog/2159-Using-Slice-Substring-And-Substr-In-Javascript.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T11:47:04.547

You can easily [`match`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match) a regular expression or get some [`substring`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substring) from a certain (or computed) position, but let's try to *parse* it with a regex and [`split`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split):

```
var str = "S(08-01-2008) I[18] ф4(579.1900 UAH) E(05-07-2009)R[5](117.1900) V[0](0.0000) Up(22-04-2009)";

var parts = str.split(/\s*\(\s*(.+?)\s*\)\s*/);
var map = {};
for (var i=0; i+1<parts.length; i+=2)
    map[parts[i]] = parts[i+1]; 
```

Now, you can get the "Up" value from the map via

```
return map["Up"]; // "22-04-2009" 
```

In contrast to the other answers, this will result in `undefined` if there is no "Up" value in the string instead of throwing an exception. Also, you can get the other values from the map if you need them, for example `map["I[18] ф4"]` is `"I[18] ф4"`.

# winforms - DataGridViewCheckboxColumn 未设置基础数据

> ID：12195971
> 
> 赞同：0
> 
> 时间：2012-08-30T11:34:14.947
> 
> 标签：winforms, .net-3.5, datagridview, datagridviewcheckboxcell

我有一个绑定到 IEnumerable 的 DGV。T 有一个可以获取/设置的布尔属性。加载表时，访问 get 属性以填充 DataGridViewCheckboxColumn。我可以看到它在调试器中被击中。当我单击复选框列中的一个单元格时，复选框会按您的预期被选中，但基础数据源没有更新，并且没有调用属性设置器。复选框列的 ReadOnly 属性设置为 false。

我怎样才能得到它来更新底层绑定数据？

```
polygonListBindingSource.DataSource = m_displayPolygons.OrderBy(p => p.Name); 
```

我看过相关的问题，但他们的答案并不一致。一些建议在 DGV 上调用 EndEdit，另一些建议在绑定源上调用它。当单元格值更改以实际提交对基础数据类型的更改时，我真的必须订阅一个事件吗？这似乎很不自然。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T12:03:11.350

这是因为`DataGridView`只有在当前单元格失去焦点时才会提交其编辑。单击复选框不足以提交编辑。

这样做的标准是使用事件，通常是[`CurrentCellDirtyStateChanged`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.currentcelldirtystatechanged.aspx)事件：

```
void dataGridView1_CurrentCellDirtyStateChanged(object sender, EventArgs e)
{
    if (dataGridView1.IsCurrentCellDirty)
    {
        dataGridView1.CommitEdit(DataGridViewDataErrorContexts.Commit);
    }
} 
```

这有点不自然，但这是设计使然 - 这样您的数据源就不会被可能不是最终的编辑淹没。对于复选框来说不一定有这么大的问题，但对于文本框单元格来说是一个值得的设计决策。

# sql-server-2008 - SQL 前 10 名总计

> ID：12195972
> 
> 赞同：0
> 
> 时间：2012-08-30T11:34:18.117
> 
> 标签：sql-server-2008

如何根据另一列 (ID) 从一列 (Amount) 中选择前 10 个降序总计？

这就是我希望我想要的结果看起来像：

```
(Top 1)
Row 1: ID: 9, Amount: 10, Total: 15
Row 2: ID: 9, Amount: 5, Total: 15

(Top 2)
Row 3: ID: 500, Amount: 14, Total: 14

(Top 3)
Row 4: ID: 27, Amount: 3, Total: 9
Row 5: ID: 27, Amount: 3, Total: 9
Row 6: ID: 27, Amount: 3, Total: 9 etc. 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:45:02.350

试试这个：

```
;with cte as
    (select *,
     row_number() over(partition by ID order by Amount desc) as row_num
     from  your_table),
 cte1 as(
    select ID,SUM( Amount) as Total
    from   your_table
    group  by ID)
select top 10 c.ID,C.Amount,c1.Total
from cte c join cte1 c1
on c.ID=c1.ID
order by C1.Total desc 
```

# [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/5abcb/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:43:02.230

`select Row, ID, Amount, Total from ( select Row, ID, Amount, Total ,rank() over (order by Total desc) as Rank from t1 ) rt where Rank between 1 and 10`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T11:43:03.270

```
select * from t where id in 
(select top 10 id from t group by id order by sum(Amount) desc) 
```

如果您需要按 sum(Amount) 排序最终结果，这里是一个查询：

```
select t.*,t2.sum_amount from t 
inner join (select top 10 id,sum(Amount) as sum_amount 
                 from t 
              group by id 
              order by sum(Amount) desc) t2
        on (t.Id = t2.id)
order by t2.Sum_amount desc ,id 
```

# java - 如何隐藏 DefaultTableModel 中的特定列以使其在表中显示？

> ID：12195973
> 
> 赞同：2
> 
> 时间：2012-08-30T11:34:22.607
> 
> 标签：java, swing, jtable, swingx, defaulttablemodel

我正在使用 Java Swingx 框架。我的`DefaultTableModel`对象中有 4 列。我希望只显示 3 列。但是，我需要全部四个来计算。

## 实际数据模型

`S.No. | ID | GDC ID | Decsription`

## 我想在表格中显示什么

`S.No.| GDC ID | Decsription`

是否可以在渲染中仅隐藏或省略一列？请指导我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T11:41:42.837

*   默认最小尺寸是`10 pixels`宽度，

*   [您可以从 JTable 视图中删除/添加列，列在 XxxTableModel 中](https://stackoverflow.com/a/10089138/714968)，您可以隐藏和显示任何列

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T12:07:50.677

无需调整您的模型，或尝试使该列非常小。`JTable`为此具有内置功能：[`removeColumn`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#removeColumn%28javax.swing.table.TableColumn%29)方法。如该方法的javadoc中所述

> 从此 JTable 的列数组中删除 aColumn。注意：此方法不会从模型中删除数据列；它只是删除了负责显示它的 TableColumn。

还要注意以下方法的存在：

*   [`JTable#convertColumnIndexToModel`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#convertColumnIndexToModel%28int%29)
*   [`JTable#convertColumnIndexToView`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#convertColumnIndexToView%28int%29)

由于视图（`JTable`）中的列顺序和列数可能与模型中的不同，您需要这些方法在视图和模型之间切换

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T11:37:04.073

您可以通过将其宽度设置为 0 来隐藏它。

```
_table.getColumn("ID").setPreferredWidth(0);
_table.getColumn("ID").setMinWidth(0);
_table.getColumn("ID").setWidth(0);
_table.getColumn("ID").setMaxWidth(0); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-27T12:49:29.553

试试这个来删除一个列：

```
myTableModel = new DefaultTableModel();
myTableModel.setColumnIdentifiers(new Object[]{"S.No.", "ID", "GDC ID", "Decsription"});
JTable myTable = new JTable(myTableModel);

// remember to save the references
TableColumn myTableColumn0 = guiLoteryNumbersTable.getColumnModel().getColumn(0);
TableColumn myTableColumn1 = guiLoteryNumbersTable.getColumnModel().getColumn(1);
TableColumn myTableColumn2 = guiLoteryNumbersTable.getColumnModel().getColumn(2);
TableColumn myTableColumn3 = guiLoteryNumbersTable.getColumnModel().getColumn(3);

myTable.getColumnModel().removeColumn(myTableColumn1); 
```

然后再次显示该列，保持顺序：

```
// 1- remove all the existent columns
myTable.getColumnModel().removeColumn(myTableColumn0);
myTable.getColumnModel().removeColumn(myTableColumn2);
myTable.getColumnModel().removeColumn(myTableColumn3);

// 2- add all the columns again in the right order
myTable.getColumnModel().addColumn(myTableColumn0);
myTable.getColumnModel().addColumn(myTableColumn1);
myTable.getColumnModel().addColumn(myTableColumn2);
myTable.getColumnModel().addColumn(myTableColumn3); 
```

对不起，但这是我所知道的最好的方式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T11:38:21.237

您操纵 getValueAt ， getColumnCount 来实现这一点。

所以例如你给它的getColumnCount 3

和 getValueAt - 如果列索引高于跳过的列，则跳过

JTable 将首先调用 getColumnCount 和 getRowCount 并为每个单元格获取调用 getValueAt。

注意：忽略这一点，请参阅下面的垃圾神链接。

# java - 从 JSP 写入 XML

> ID：12195977
> 
> 赞同：0
> 
> 时间：2012-08-30T11:34:31.437
> 
> 标签：java, xml, jsp

我将使用包含开始日期、结束日期等的 JSP 设计前端。最后我必须将这些读入 Java 对象并将其写入 XML 文件。我怎么能做到这一点..请帮助我解决这个要求。

谢谢，纳拉扬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:48:06.013

您可以使用任何`XML Parser`.In Jsp 页面获取属性值（开始日期、结束日期等）并使用`DOM`api 创建 XML。以下是简单示例。

```
 DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder docBuilder = docFactory.newDocumentBuilder();

    // root elements
    Document doc = docBuilder.newDocument();
    Element rootElement = doc.createElement("company");
    doc.appendChild(rootElement);

    Element startDate= doc.createElement("startDate");
    startDate.appendChild(doc.createTextNode(<your_Value>));
    doc.appendChild(startDate);

    // lastname elements
    Element endtDate= doc.createElement("endtDate");
    endtDate.appendChild(doc.createTextNode(<your_Value>));
    doc.appendChild(endtDate);

   TransformerFactory transformerFactory = TransformerFactory.newInstance();
    Transformer transformer = transformerFactory.newTransformer();
    DOMSource source = new DOMSource(doc);
    StreamResult result = new StreamResult(new File("C:\\file.xml"));

    // Output to console for testing
    // StreamResult result = new StreamResult(System.out);

    transformer.transform(source, result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T11:50:05.267

您需要在 JSP 中获取输入并将其传递给 Servlet。然后您可以使用[XStream](http://xstream.codehaus.org/tutorial.html)写入 XML。（我假设您在服务器上编写 XML，如果您需要在客户端计算机上编写 XML - 只需将 xstream 包 ii 导入您的 JSP 标头并放入 servlet 代码片段在你的 JSP 中）

```
<%@ page import="java.io.*,java.util.*, javax.servlet.*, com.thoughtworks.xstream.XStream" %>
<html>
    <head>
         <title>Handle Current Date & Time</title>
    </head>
    <body>
        <center>
            <h1>Display Current Date & Time</h1>
        </center>
        <%
            Date date = new Date();
            // initialize date from input
            // ...pass the date to the servlet
        %>
    </body>
</html> 
```

在 servlet 代码中：

```
Date date = /* get the date from the request*/
// then do something like this:
XStream xstream = new XStream();
xstream.alias("date", Date.class);
String xml = xstream.toXML(date);
// write the xml string to the file. 
```

# cluster-computing - Vertica 集群之间的连接池/分布是如何完成的？

> ID：12195978
> 
> 赞同：1
> 
> 时间：2012-08-30T11:34:32.873
> 
> 标签：cluster-computing, load-balancing, vertica

Vertica 集群中的连接池/分布如何？

我试图了解 Vertica 中的连接是如何处理的！就像 Oracle 处理它的连接一样，它是侦听器，或者连接如何在集群内平衡（为了更好的分布）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T14:45:10.770

Vertica 处理连接的流程基本如下：

*   一个节点接收连接，使其成为`Initiator Node`.
*   发起者节点生成查询执行计划并将其分发给其他节点。
*   节点填写执行计划的任何节点特定详细信息
*   节点执行查询
*   （这里忽略一些东西）*
*   节点将结果集发送回发起节点
*   发起者节点收集数据并进行最终聚合
*   发起者节点将数据发送回客户端。

通过 Vertica 进行连接的推荐方法是通过负载平衡器，因此没有单个节点会成为故障点。Vertica 本身不会在节点之间分配连接，而是将查询分配给其他节点。

我不太熟悉 Oracle 或系统如何进行数据连接过程的细节；所以希望我不会离你正在寻找的东西太远。

根据 /my/ 的经验，每个节点都可以处理多个连接。一旦您尝试将更多内容连接到节点，它将拒绝连接。这是从连接到 map 函数的 map-reduce 作业中体验到的。

*根据查询/数据/分区，可能需要在后台进行一些数据传输以完成每个节点的查询。发生这种情况时，它会减慢查询速度。

# java - 如何在 Android 中支持 unicode 字体？

> ID：12195984
> 
> 赞同：1
> 
> 时间：2012-08-30T11:35:04.900
> 
> 标签：java, android, web-services, unicode

我需要在我的应用程序中显示印地语和孟加拉语字体支持。怎么做。请帮忙。还告诉我如何从 XML 获得支持，因为我需要通过 Web 服务获取数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:43:25.797

我所做的是将选择的特定字体放入资产文件夹并使用以下代码：

```
public class CustomTextView extends TextView{
    public CustomTextView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        initFont();
    }

    public CustomTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
        initFont();
    }

    public CustomTextView(Context context) {
        super(context);
        initFont();
    }

    private void initFont() {
        Typeface tf = Typeface.createFromAsset(getContext().getAssets(),"myfont.ttf");
        setTypeface(tf);
    }
} 
```

但我面临的问题是，即使我在模拟器中获取字体，某些字体模式也不正确。

如果有人想在我的答案中添加更多内容，请回复，欢迎您。

# mysql - 学说 2.0：使用 SQL 时间戳

> ID：12195985
> 
> 赞同：12
> 
> 时间：2012-08-30T11:35:12.327
> 
> 标签：mysql, doctrine-orm, timestamp

我正在寻找一种使用`TIMESTAMP`而不是`DATETIME`MySql 来制作学说的方法。

另外我需要设置`ON UPDATE CURRENT_TIMESTAMP`和`CURRENT_TIMESTAMP`作为默认值。

我希望有可能在 PHP 注释中包含所有这些代码，以便将所有内容集中在一个位置。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-09-17T10:41:01.247

经过数小时的搜索，我找到了答案，我希望这可以帮助其他任何人寻找比实体生命周期和错误列类型更令人满意的解决方案（因为 a`TIMESTAMP`是具有特定行为的特定类型，而不仅仅是存储`datetime`值）

您需要做的就是添加

```
 * @ORM\Column(type="datetime", nullable=false)
 * @ORM\Version 
```

到您的注释和 Doctrine 都将创建一个`TIMESTAMP`列，`DEFAULT CURRENT_TIMESTAMP`然后将实际表值作为有效`\DateTime`对象返回。

[CTOP（原始海报的学分）](http://www.franzdeleon.me/2013/11/tip-how-to-add-timestamp-with.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T09:08:20.910

没有像`TIMESTAMP`在 mysql 中使用 Doctrine 这样的东西。但是，我自己修复了它，但必须对其进行测试：

*   创建一个文件：`Doctrine\DBAL\Types\TimestampType.php`
*   将代码从复制`TimeType.php`到`TimestampType.php`
*   将代码中的“时间”重命名为“时间戳”
*   创建一个新常量，并将时间戳添加到类型映射中：`Doctrine\DBAL\Types\Type.php`
*   创建调用`getTimestampTypeDeclarationSQL`的函数`Doctrine\DBAL\Platforms\AbstractPlatform.php`
*   在那个函数中，返回`TIMESTAMP`

我曾经`yaml`创建我的实体和代理，所以使用`yaml`：

```
type: timestamp 
```

我现在要测试这个“修复”/“解决方法”。我会告诉你。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-05-30T17:58:27.533

正如[Daniel Criconet](https://stackoverflow.com/a/13379378/4287833)所建议的，

`@ORM\Column(type="datetime", columnDefinition="TIMESTAMP DEFAULT CURRENT_TIMESTAMP")`

将使相应 MySQL 表中的特定列变为`TIMESTAMP`而不是`DATETIME`.

对于 YAML 版本，请参阅[原始答案](https://stackoverflow.com/a/13379378/4287833)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-07-30T23:17:29.163

```
/**
 * @var \DateTime
 * @ORM\Column(type="datetime", columnDefinition="timestamp default current_timestamp")
 */
protected $createdAt;

/**
 * @var \DateTime
 * @ORM\Column(type="datetime", columnDefinition="timestamp default current_timestamp on update current_timestamp")
 */
protected $updatedAt; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-01-04T20:23:05.270

@Polichism 提供了正确的逻辑，但补丁未被接受。相反，用户被指示添加自定义类型。我通过结合实现了这一点：

*   @Polichism 补丁中的逻辑
*   [Doctrine 推荐的自定义映射类型代码](http://doctrine-orm.readthedocs.org/en/latest/cookbook/custom-mapping-types.html)
*   Zf2 应用程序配置说明可在[此处找到](http://www.daredevel.com/working-with-datetime-in-doctrine2-and-zend-framework-2/)

最终版本可以在 GitHub 上找到：

*   [时间戳类](https://github.com/claytondaley/LegacyRS/blob/7822b76726c81920a36c621b4fe5836d43caf630/src/LegacyRS/Type/TimestampType.php)
*   [请参阅配置](https://github.com/claytondaley/LegacyRS/blob/7822b76726c81920a36c621b4fe5836d43caf630/config/module.config.php#L58)的“教义”部分

**注意：**我已经链接到特定的提交，以确保在以后删除文件时链接仍然有效。使用历史记录检查更新的版本。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-30T13:59:42.683

```
/** @ORM\Column(type="datetime", nullable=false ) */
    protected $created; 
```

这将创建时间戳并返回 datetime 对象

```
 public function __construct()
        {
            $this->created = new \DateTime();

        } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-25T21:07:16.817

`/** * @Column(type="datetime", options={"default": 0}) * @version=true */ private $data;`

像这样创建sql： `data TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL`

在 2.5.4 版本上测试

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-30T15:14:14.720

@ORM\Version 仅适用于每个实体的一个属性，因此如果您需要在表中拥有多个时间戳字段，则它不是一种选择。

# c# - 如果 GridView 是用户定义的，如何编辑 GridView 和更新值

> ID：12195986
> 
> 赞同：1
> 
> 时间：2012-08-30T11:35:12.360
> 
> 标签：c#, asp.net, gridview

我有一个`GridView`完全由用户定义的。的第一列`GridView`来自`ListBox1`。标头是使用定义的`ListBox2`。 ![在此处输入图像描述](../Images/ab1d69f841d703c51e450bee3ac5558c.png) 因此，我需要`GridView`用一些整数值更新 的行，并确保在`Gridview`单击按钮之前保持该值。

单击按钮后，我想读取`GridView`输入值的每一列，并在数据库中创建一个表，标题名称为列，然后复制`GridView`数据库中的表。

我附上了我的截图`GridView`。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T12:02:58.993

在 GridView 中实现 UPDATE 逻辑有两个关键点

1.  在 GridView 标记中，您必须为`OnRowUpdating`事件 添加事件处理程序`<asp:GridView ID="XXX" runat="Server" ..... OnRowUpdating="UpdateRecord" ..........>`
2.  然后你需要`"UpdateRecord"`用你的自定义代码来实现上面提到的这个方法，它基本上会从网格行中检索数据并将其更新到你的数据源你可以参考一些示例代码来了解如何实现[这里](http://www.dotnetfunda.com/articles/article29.aspx)

再次指出，在您的情况下，由于您也想动态创建表，因此您还需要另外执行此操作。就个人而言，我不知道你为什么会采用这样的设计，但在没有任何信息的情况下，我认为你最了解。

# iphone - 如何将高分辨率图像显示为缩略图？在 iPhone / iPad 中

> ID：12195989
> 
> 赞同：0
> 
> 时间：2012-08-30T11:35:18.250
> 
> 标签：iphone, xcode, ipad

我正在下载大小为 3.4 Mb 的图像，需要在预览图标中显示，然后是完整图像大小。但应用程序崩溃。通过objective c / iPhone sdk将非常高分辨率的图像显示为缩略图的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:44:58.260

是的，加载大量这种大小的图像，会加载大量内存。

有一些很好的扩展可以帮助您调整图像大小。看看这里，我用的，很简单，强烈推荐：http: [//vocaro.com/trevor/blog/2009/10/12/resize-a-uiimage-the-right-way/](http://vocaro.com/trevor/blog/2009/10/12/resize-a-uiimage-the-right-way/) 看看如果您只想要类扩展，请在帖子末尾。

但是，如果应用程序崩溃时只有一个 3.4 Mb 的图像，它不应该崩溃，并且可能是由于其他原因而发生的。

# objective-c - Retina 图形与非 Retina 图形管理

> ID：12195996
> 
> 赞同：1
> 
> 时间：2012-08-30T11:35:47.187
> 
> 标签：objective-c, xcode, ios-simulator, retina-display

我即将推出一个新应用程序，并希望提高图形质量。在我的例子中，图形是徽标和自定义按钮。我不知道这是否会影响 Core Plot，但这也是包的一部分。

有很多关于这个的帖子，但仍有一些我不完全理解的东西。

我正在阅读来自“amatn”的这句话：

```
It's trivial:

1.Only include @2x images in your project.
2.Make sure those images have the @2x suffix. 
The system will automatically downscale for non-retina devices.

The only exception is if you are doing manual, low level Core Graphics drawing. 
You need to adjust the scale if so. 99.9% though, you don't have to worry about this. 
```

来自这篇文章：[“非视网膜”图像版本的自动调整大小](https://stackoverflow.com/questions/8087997/automatic-resizing-for-non-retina-image-versions)

我的问题是：

```
1\. Should i do the testing on retina simulator only, as if i place a @2 grapic on 
non-retina it will be too big? ...or is there an other way of doing it?

2\. Should i always use a ImageView or is it OK to drag the image on the screen, 
this is the logo i am talking about?

3\. What about custom made buttons with images, how should i do with those?

4\. What is the normal process to manage the different screen sizes, do people 
add images for all displays or using this type of process? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T12:41:33.517

> 1.  我应该只在视网膜模拟器上进行测试，就好像我在非视网膜上放置一个@2 grapic 会太大？...或者有其他方法吗？

您在哪个模拟器上测试并不重要，因为只要正确命名非视网膜和视网膜图形（image 和 image@2x），就会自动显示正确的图像。

> 1.  我应该总是使用 ImageView 还是可以在屏幕上拖动图像，这就是我正在谈论的徽标？

当您将项目中的图像直接拖放到界面构建器中的视图上时，您并没有真正看到它发生，但它已经自动创建了包含您放入的图像的图像视图。

> 1.  带有图像的定制按钮怎么样，我应该如何处理这些？

```
[myButton setImage:[UIImage imageNamed:@"myFileName"]]; 
```

如上面的代码所示，当您引用 UI 元素应使用的图像时，您应该始终使用非视网膜文件名称。也就是说，如果 iOS 检测到设备是视网膜，它可以自动使用 @2x 版本代替它。

> 1.  管理不同屏幕尺寸的正常流程是什么，人们是否为所有显示器添加图像或使用此类流程？

是的，包括多种图像分辨率的常见做法，并且 iPhone 应用程序（不确定 iPad）需要包括视网膜和非视网膜图像。但无论要求如何，您绝对应该支持这两种设备分辨率，以让您的客户满意！