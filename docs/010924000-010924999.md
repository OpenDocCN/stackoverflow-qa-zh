# StackOverflow 问答 10924000-10924999

# javascript - 访问 bitly API 很慢还是我的代码？

> ID：10924015
> 
> 赞同：1
> 
> 时间：2012-06-07T00:07:09.490
> 
> 标签：javascript, api, social, sharing

我已经构建了一些共享图标，基本上似乎正在发生的事情是 bitly api 调用需要很长时间，所以第一次点击代码失败 - 但如果我再次点击它一切正常。

预期的行为是，当用户单击图标（twitter 或 facebook）时，会打开一个弹出窗口，其中会打开正确的社交网络共享窗口。

这是我的代码：

```
$j(document).ready(function() { 
var isShortened = false; 

function bit_url(url) { 
    var url = url; var username = "account"; 
    var key = "xxxxxxxxxxxxxxxxxxxxxxxxx"; 
    var fbShareURL = 'http://www.facebook.com/sharer/sharer.php'; 
    var twShareURL = 'http://twitter.com/intent/tweet'; 
    var articleTitle = encodeURIComponent('${title?html}'); 

    $j.ajax({ 
        url:"https://api-ssl.bit.ly/v3/shorten", 
        data:{longUrl:url,apiKey:key,login:username}, 
        dataType:"jsonp", 
        success:function(v) { 
            var bit_url = v.data.url; 
            $j("#facebookBtn").attr("href", fbShareURL + '?u=' + encodeURIComponent(bit_url) + '&amp;t=' + articleTitle); 
            $j("#twitterBtn").attr("href", twShareURL + '?text=Check out ' + articleTitle +' - &url=' + encodeURIComponent(bit_url) + '&via=account'); 
        } 
    }); 
}   

$j('.share-btn').click(function() { 
    var btnClicked = $j(this); 
    var url = ''; 

    if (isShortened == false){ 
        bit_url('${url?html}'); 
        setTimeout(function() {
            url = $j(btnClicked).attr('href'); 
            window.open(url,'share','width=665, height=350, scrollbars=no'); 
        }, 800); 
    } else { 
        url = $j(btnClicked).attr('href'); 
        window.open(url,'share','width=665, height=350, scrollbars=no'); 
    } 

    isShortened = true; 
    return false; 
}); 
}); 
```

任何想法将不胜感激。

# php - php 网页数组 - 希望能够通过 NEXT - PREV 链接循环浏览它们

> ID：10924021
> 
> 赞同：0
> 
> 时间：2012-06-07T00:07:35.287
> 
> 标签：php, arrays, navigation

根据 Hunter F 的回答，我的问题的解决方案几乎完成了。只需要进行一些调整。

我稍微修改了代码并在此处提交了一个新问题：[php array help required - if current array item = 'last or first item' then 'do something'](https://stackoverflow.com/q/10932663/1176165)

原始信息：

我希望能够创建一个带有 PREV 和 NEXT 链接的简单导航栏，我可以使用它来循环浏览页面列表。导航栏将是一个包含在所有要循环的页面中的 php。

所以我想起点是创建一个需要通过 PREV NEXT 链接循环的页面数组。

如....

```
$projectlist = array(
        'http://domain.com/monkey/',
        'http://domain.com/tiger/',
        'http://domain.com/banana/',
        'http://domain.com/parrot/',
        'http://domain.com/aeroplane/',
); 
```

我想选择重新排序、添加或删除链接。因此，拥有一个像这样的自包含主阵列对我来说似乎是一个合乎逻辑的选择，因为我只需要更新这个列表以供将来添加。

每个被链接的目录都有它自己的 index.php 文件，所以我把 index.php 部分从链接的末尾去掉了，因为它不需要……或者是吗？

...我很困惑如何从这里继续。

我想我需要计算出我当前在数组中的哪个页面，然后根据它生成 PREV 和 NEXT 链接。因此，如果我从“ [http://domain.com/parrot/](http://domain.com/parrot/) ”输入，我将需要相关 PREV 和 NEXT 页面的链接。

在下一阶段指导我的任何帮助或信息将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T01:34:53.273

```
$currentPath = explode('?', $_SERVER['REQUEST_URI']); //make sure we don't count any GET variables!
$currentPath = $currentPath[0]; //grab just the path
$projectlist = array(
        '/monkey/',
        '/tiger/',
        '/banana/',
        '/parrot/',
        '/aeroplane/',
);
if(! in_array($currentPath, $projectlist) ) {
    die('Not a valid page!'); //they didn't access a page in our master list, handle error here
}
$currentPageIndex = array_search($currentPath, $projectlist);

if($currentPageIndex == 0) { //if it's on the first page, we want them to go to the last page
    $prevlink = '<a href="'.$projectlist[ sizeof($projectlist)-1].'">Prev</a>';
} else { //otherwise just go to the n-1th page
    $prevlink = '<a href="'.$projectlist[$currentPageIndex-1].'">Prev</a>';
}

if($currentPageIndex  == sizeof($projectlist)-1 ) {     //if we're on the last page, have them go to the first page for "next"
    $nextlink = '<a href="'.$currentPageIndex[0].'">Next</a>';
} else {
    $nextlink = '<a href="'.$projectlist[$currentPageIndex+1].'">Next</a>';
} 
```

您可能要考虑的一件事是对链接中的 href 目标进行[urlencoding 。](http://php.net/manual/en/function.urlencode.php)

# php - 将字符串拆分为 HTML 实体

> ID：10924025
> 
> 赞同：0
> 
> 时间：2012-06-07T00:08:01.777
> 
> 标签：php, json, hyperlink, split

我正在尝试使用 PHP 创建一段文本的 JSON 表示，保留有关链接/格式等的信息。

本质上，我想转换这个字符串：

```
"Hello <a href='www.google.com'>World!</a>.  How are <b>you</b> today?" 
```

进入这 7 个 JSON 对象：

```
"1": {
    "_id": "1",
    "_type": "TEXT",
    "value": "Hello "
},
"2": {
    "_id": "2",
    "_type": "TEXT",
    "value": "World!",
    "_attributes": {
        "3": {
            "_id": "3",
            "_type": "LINK",
            "src": "www.google.com"
        }
    }
},
"4": {
    "_id": "4",
    "_type": "TEXT",
    "value": " How are "
},
"5": {
    "_id": "5",
    "_type": "TEXT",
    "value": "you",
    "_attributes": {
        "6": {
            "_id": "6",
            "_type": "FORMATTING",
            "bold": true,
        }
    }
},
"7": {
    "_id": "7",
    "_type": "TEXT",
    "value": " today?"
} 
```

我搜索了互联网/谷歌并找到了很多关于拆分 HTML 的内容，但似乎无法描述我想要的内容。我需要将纯文本与链接/格式分开，并为每个实体创建一个实体。

“FORMATTING”属性只是在适当的时候添加“bold”/“underline”/“subscript”等字段。

嵌套标签只会为其文本实体创建多个属性。

我还不知道如何处理一个单词加粗的 2 字超链接……也许它必须有 2 个超链接属性。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T06:03:14.897

DOMDocument 是您所需要的。如果您可以使用稍微不同的名字，那么您也几乎不需要做任何工作。

# logging - 记录大型 Powershell 脚本

> ID：10924031
> 
> 赞同：1
> 
> 时间：2012-06-07T00:08:51.213
> 
> 标签：logging, powershell

我正在为服务器安装编写一个大脚本，我希望它是全自动的，但也希望开发人员能够在它中断时修复它（因为它可能会！）。为此，我想象使用 Write-Output、Write-Debug、Write-Verbose、Write-Warning。

如何将所有这些写入（和时间戳）写入 .txt 文件？另外，我知道通常 Write-Error 通常用红色书写，但 .txt 文件中没有颜色。有没有办法帮助区分它们，比如给它们一个所有写入的前缀，比如调试、警告等？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T04:58:13.993

哦，来吧！为什么要使用文本文件老式日志记录，将信息分散在整个操作系统中，并且需要由负责生产的人员用镊子收集？

由于 PowerShell 在 .NET 上运行，您可以使用[Even Tracing for Windows](http://blogs.msdn.com/b/sergeim/archive/2008/12/10/how-to-do-etw-logging-from-net-application.aspx) (ETW) 或使用系统日志。

您可以为所有脚本创建和使用一个 PowerShell 日志，以便为负责生产的人员发布执行（信息）和错误（与良好的异常处理相协调）的详细信息。您可以为一个脚本专用一个日志（因为它存在一个用于 DNS 等的日志）

这是一个示例（PowerShell V2 有它自己的 CmdLets）：

```
# List of logs
Get-EventLog -list

# Creating your own log
New-EventLog -LogName "SlxScripting" -Source "MaSource"

# List of logs
Get-EventLog -list

# Writting in your own log
Write-EventLog -LogName "SlxScripting" -EventId 12 `
               -Message "Mon Message" 
               -Source "MaSource" -EntryType Warning

# Reading (consuming) in your own log
Get-EventLog -LogName "SlxScripting"  

# Suppressing your log (if needed)
Remove-EventLog -LogName "SlxScripting" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T01:32:48.673

`Write-(Error|Debug|Verbose)`不幸的是，不支持写入文件。所以我创建了这个 Write-Log 函数来解决这个缺点：

[http://poshcode.org/3270](http://poshcode.org/3270)

一些示例用法：

```
Write-Log -Message "It's all good!" -Path C:\MyLog.log -Clobber -EventLogName 'Application'
Write-Log -Message "Oops, not so good!" -Level Error -EventID 3 -Indent 2 -EventLogName 'Application' -EventSource "My Script"
Write-Log -Message "Just another example" -Level Warn 
```

# android - 什么是 Activity.setDefaultKeyMode？

> ID：10924032
> 
> 赞同：3
> 
> 时间：2012-06-07T00:09:01.623
> 
> 标签：android

我正在研究有关 Activity 的 API 文档。我看到一个方法'setDefaultKeyMode'，但我无法清楚地理解它的用途。有人请解释一下哪些所有键都受到影响以及默认行为与其他选项有何不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T00:14:30.090

没有太多要理解的——它是确定如何处理未以任何其他方式（如 by `onKeyDown`）处理的关键事件。默认情况下，他们只是“走开”。（不是系统键，应用程序键。）

该[方法的 Javadocs](http://developer.android.com/reference/android/app/Activity.html#setDefaultKeyMode%28int%29)描述了其他模式。

# json - 为 sling 的 userManager 自定义 json 渲染

> ID：10924035
> 
> 赞同：1
> 
> 时间：2012-06-07T00:10:38.453
> 
> 标签：json, jackrabbit, sling

我正在尝试使用 sling 的 userManager REST 接口构建我的应用程序的管理 UI，但我想自定义 json 渲染。例如，我希望[“获取组”](http://sling.apache.org/site/managing-users-and-groups-jackrabbitusermanager.html#Managingusersandgroups%2528jackrabbit.usermanager%2529-Getgroup)的响应仅在请求者是成员时才包含成员。

我从添加 libs/sling/group/json.esp 开始，但我不明白如何获取默认响应并对其进行自定义。即使我必须从头开始查询和形成 json，我在哪里可以找到有关可用于从 JCR/Sling 获取此数据的 API 的信息？

我发现我可以使用 ResourceTraversor 以 json 形式转储资源对象，但是在 esp 中使用 new Packages.org.apache.sling.servlets.get.impl.helpers.ResourceTraversor(-1, 10000, resource, true) 会抛出一个错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T14:36:37.373

这里有几点需要注意。

首先，您应该避免将代码放在`libs`目录下。您的应用程序代码应位于该`apps`目录下。当尝试为 URI 解析 servlet 时，Sling 将在检查`apps`之前进行检查`libs`，因此如果您需要完全覆盖 Sling 提供的功能，您可以将代码放在`apps`.

其次，当您请求时发生的事情（可能取决于您的设置方式）`http://localhost:8080/system/userManager/group/administrators.tidy.1.json`是由 Sling 的默认 GET servlet 处理的请求，因为它找不到其他适用的脚本或 servlet。出于研究目的，可能值得查看默认 get servlet 的代码`org.apache.sling.servlets.get.impl.DefaultGetServlet`，以了解它用于呈现 JSON 的内容。如果您需要以与默认 GET servlet 不同的方式处理用户组的呈现，那么您需要创建一个 servlet 来侦听对 type 资源的请求`sling/group`。为此目的创建一个 servlet 并将其注册到 OSGI 可能是理想的。 [http://sling.apache.org/site/servlets.html](http://sling.apache.org/site/servlets.html)提供您需要设置的各种属性，以确保 servlet 解析器找到您的 servlet。然后您的 servlet 将处理该请求，因此可以直接轻松地访问所请求的资源。

第三，您指定的特定需求是您不希望组成员呈现，除非请求用户是所请求组的成员。这更像是一个访问控制问题而不是渲染问题。Sling 和 Jackrabbit 开箱即用，对您可能希望如何设置应用程序做出尽可能少的假设。在这种情况下，您需要建立适用于您的特定用例的访问控制。Jackrabbit wiki ( [http://wiki.apache.org/jackrabbit/AccessControl](http://wiki.apache.org/jackrabbit/AccessControl) ) 中关于访问控制的 wiki 帖子在一定程度上涉及到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:53:13.603

使用 Paul Michelotti 的回答中的指示，我进一步研究并找到了适合我的问题的解决方案。

Sling 通过如下所示的 SCR 注释接受请求过滤器 (javax.servlet.Filter)

```
@SlingFilter(scope = SlingFilterScope.REQUEST, order = Integer.MIN_VALUE) 
```

每个请求在被 servlet 处理之前都被传递给过滤器。使用 resourceType，我能够区分对 group.1.json 和 group/mygroup.1.json 的请求。由于过滤器还可以访问当前用户，因此如果它不遵守我的安全模型并返回 404 状态代码，我可以决定拒绝该请求。

有关过滤器的详细信息，请参阅[此页面](http://sling.apache.org/site/filters.html)。您还可以查看示例项目[urlfilter](http://svn.apache.org/repos/asf/sling/trunk/samples/urlfilter)以了解使用说明。

# eclipse - 安装 Glassfish 以使用 Eclipse

> ID：10924036
> 
> 赞同：0
> 
> 时间：2012-06-07T00:10:41.107
> 
> 标签：eclipse, glassfish, installation

我在这里有 Eclipse 的 glassfish 配置。看一看：

![在此处输入图像描述](../Images/e3fcc2963ae4b8e7c8a7022c31cd6890.png)

完成按钮被禁用。我应该在这里做什么？我将它指向我安装 glassfish 的目录。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:05:35.270

我认为问题可能是您试图注册 GF 3.1.2 以使用 Java SE 5。Java EE 6 需要 Java SE 6 JDK 才能成功运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T02:28:49.917

好吧，我不知道它出了什么问题。又试了一次，果然奏效了！抱歉占用您的时间。

# android - Android（相机）- 如何将 stopPreview() 与 onPictureTaken() 同步？

> ID：10924038
> 
> 赞同：4
> 
> 时间：2012-06-07T00:11:04.640
> 
> 标签：android, camera, sync, surfaceview, preview

我有一个应用程序，客户端使用相机拍照。在人们点击我的“点击”按钮之前，图像的预览正在使用 SurfaceView 显示在平板电脑中。当用户点击点击按钮时，onPictureTaken 方法被调用，在该方法中，我保存图像并调用 camera.stopPreview() 方法（因此用户可以看到拍摄的照片）。

但是有一个问题......如果用户在拍摄照片的那一刻在平板电脑上移动，则在**调用 stopPreview 方法后实际显示的静态图片与我在字节数组中得到的不对应onPictureTaken 方法**。那里有几毫秒的延迟，当用户在拍摄照片之前在平板电脑周围移动时，差异会变得突出（我知道 99% 的人在拍照时不会移动平板电脑，但我的客户实际上注意到了这个问题并希望修复它......）。我已经尝试将保存操作移动到一个单独的线程，如下所示，这样 onPictureTaken 方法可以尽可能快地执行。不过，一点效果都没有……

```
private PictureCallback pictureCallback = new PictureCallback() {

    public void onPictureTaken(byte[] data, Camera camera) {

        camera.stopPreview();
        reference = data;

        new PictureCallbackHeavy().execute();
    }
}; 
```

我也尝试在调用 takePicture 方法之前调用 camera.stopPreview() （而不是在 onPictureTaken() 方法内）。但结果是一样的。

我可以做些什么来同步 stopPreview 方法，这样我就可以准确地显示拍摄的图像并且在 onPictureTaken() 回调的字节数组中？

先感谢您！！=)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:32:24.573

不幸的是，您不能仅通过调用 stopPreview() 来获得合理的良好预览图像，因为在拍摄照片和调用 onPictureTaken() 之间可能会经过相当长的一段时间，因为它的工作原理如下：

*   相机实际拍摄照片（这就是您要预览的内容）
*   onShutter() 被调用
*   调用原始图像数据的 onPictureTaken()（在某些设备上）
*   调用缩放预览图像的 onPictureTaken()（在某些设备上）
*   onPictureTaken() 用于最终压缩的图像数据被调用（我们这里说的那个）

因此，您必须将`byte[] data`onPictureTaken() 回调中的转换为位图，并将该位图映射到您应该放置在 SurfaceView 上方以显示静止预览图像的 ImageView 上。代码可能看起来像这样：

```
public void onPictureTaken(byte[] data, Camera camera) {
    camera.stopPreview();
    final Bitmap image = BitmapFactory.decodeByteArray(data, 0, data.length);
    surfaceView.setVisibility(SurfaceView.GONE);
    imageView.setVisibility(ImageView.VISIBLE);
    imageView.setImageBitmap(image);
    reference = data;
    new PictureCallbackHeavy().execute();
} 
```

# iphone - 以编程方式添加 UITabBarController 和 UITabs

> ID：10924039
> 
> 赞同：0
> 
> 时间：2012-06-07T00:11:14.373
> 
> 标签：iphone, ios, xcode

我需要以编程方式将 UItabbar 添加到 UIView。这是下面的代码，应用程序从 RootViewTableController 开始，然后被推送到此视图，但选项卡不起作用，也许是 MainWindow.xib 中的问题？：

```
//  TabBarController.h

@interface TabBarController : UITabBarController 
@end

//  TabBarController.m

#import "TabBarController.h"
#import "FirstV.h"

@implementation TabBarController

-(void)viewDidLoad {

NSMutableArray *listOfViewControllers = [[NSMutableArray alloc] init];
UIViewController *vc;

vc = [[UIViewController alloc] init];
vc.title = @"A";
[listOfViewControllers addObject:vc];
[vc release];
vc = [[UIViewController alloc] init];
vc.title = @"B";
[listOfViewControllers addObject:vc];
[vc release];

[self.tabBarController setViewControllers:listOfViewControllers animated:YES];
    [super viewDidLoad];
}

@end 
```

截图在这里：
![截屏](../Images/84bd7bcda4064caa8bcd2c7c93a71908.png)

如您所见，底部没有选项卡，我应该将 UItabbar 元素拖放到视图中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T02:41:39.783

试着把你的代码`[super viewDidLoad];` **放在**它应该放在的地方。

# c++ - 在类中的定义之前解析声明

> ID：10924047
> 
> 赞同：1
> 
> 时间：2012-06-07T00:11:43.200
> 
> 标签：c++, standards

[这里](https://stackoverflow.com/q/10923533/845568)的这个问题引起了我的一点兴趣。C++ 标准中是否有任何地方指定*必须*在成员函数的任何随附实现之前解析类中的所有声明？我已经看到了一些与此类似的其他问题，但在任何答案中都没有提及该标准。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T00:34:30.380

[class.mem] 说：

> `}`-2-在*class-specifier*结束时，类被认为是完全定义的对象类型 (3.9)（或完整类型）。在类*成员规范*中，类在函数体、默认参数和非静态数据成员（包括嵌套类中的此类内容）的*大括号或等式初始化器中被认为是完整的。**否则，它在其自己的类成员规范*中被视为不完整。

为了使类在函数体中完整，通常需要解析所有声明：如果不完全解析所有声明，您将无法知道未解析的内容是否会改变含义。虽然，可能与此相关的是 [basic.scope.class]/1 它说：

> 3) 如果在一个类中重新排序成员声明产生了一个在 (1) 和 (2) 下的替代有效程序，该程序是非良构的，不需要诊断。

这意味着可以在不解析整个类的情况下使用某些声明，因为如果稍后的另一个声明改变了含义，那么程序将是错误的。

当然，“好像”规则允许编译器选择任何实现，只要用户无法区分，所以也许编译器*可以*选择解析函数体，然后根据需要解析定义，但这很难告诉处理成员函数定义需要什么（考虑一个函数调用，它可能调用几个重载函数之一，可能涉及 enable_if 类型的技巧。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T00:35:14.783

该标准未指定编译器应如何解析翻译单元。相反，它在任何地方都指定了使用任何标识符来引用声明并且是无效的。

3.3.2p5：

> 在类成员的声明点之后，可以在其类的范围内查找成员名称。[注意：即使课程是不完整的课程也是如此。]

3.3.7p1：

> 以下规则描述了类中声明的名称范围。
> 
> 1.  类中声明的名称的潜在范围不仅包括名称声明点之后的声明区域，还包括所有函数体、非静态数据成员的*大括号或等号初始化器*以及其中的默认参数类（包括嵌套类中的此类内容）。
> 2.  `N`类中使用的名称`S`应在其上下文中引用相同的声明，并且在完成的范围内重新评估时`S`。违反此规则不需要诊断。
> 3.  如果对类中的成员声明重新排序会在 (1) 和 (2) 下产生一个替代的有效程序，则该程序是格式错误的，不需要诊断。
> 4.  在成员函数中声明的名称隐藏了同名的声明，其范围扩展到或超过成员函数类的末尾。
> 5.  延伸到或超过类定义结尾的声明的潜在范围也延伸到由其成员定义定义的区域，即使成员是在类外部的词法定义的（这包括静态数据成员定义、嵌套类定义、成员函数定义（包括成员函数体和在*declarator-id*之后的此类定义的声明部分的任何部分，包括参数声明子句和任何默认参数（8.3.6）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T00:34:08.403

这是解释 C++ 编程语言标准的草案。

[编程语言 C++ PDF](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/n3242.pdf)

我认为第 220 页对成员函数有一些解释。

# apache-flex - 在标签中设置文本

> ID：10924049
> 
> 赞同：0
> 
> 时间：2012-06-07T00:11:55.697
> 
> 标签：apache-flex, actionscript, flexbuilder

这应该非常简单，但我似乎无法在运行时设置标签的文本。它抛出“1120：未定义属性 lbl_param 的访问”

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               xmlns:mx="library://ns.adobe.com/flex/mx"
               width="398" height="85" minWidth="398" minHeight="85">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <s:Label id="lbl_param" x="19" y="10" width="105" height="29" text="Paramaters: "/>

    <fx:Script>
        <![CDATA[
            lbl_param.text = "test113";
        ]]>
    </fx:Script>
</s:Application> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T01:14:58.977

您设置 lbl_param.text 的代码应该在一个方法中：您可以在方法之外运行的脚本块中的唯一代码是类导入或变量定义。此示例将代码放在初始化事件处理程序中：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               xmlns:mx="library://ns.adobe.com/flex/mx"
               width="398" height="85" minWidth="398" minHeight="85" initialize="init()">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <s:Label id="lbl_param" x="19" y="10" width="105" height="29" text="Paramaters: "/>

    <fx:Script>
        <![CDATA[
           public function init():void{
            lbl_param.text = "test113";
           }
        ]]>
    </fx:Script></s:Application> 
```

免责声明：我在浏览器中编写了这段代码，它可能不是“编译器”完美的。

# layout - 主干视图未按顺序呈现

> ID：10924050
> 
> 赞同：0
> 
> 时间：2012-06-07T00:12:01.030
> 
> 标签：layout, backbone.js, underscore.js, requirejs, router

在我的应用程序中，我有这些布局的布局和视图。布局仅在登录/注销时更改，但另一种特殊情况是在页面加载时我需要加载正确的布局。但是，在我`defaultAction`的布局中，它返回后实际上并没有渲染，因此当视图尝试渲染时，`el`它应该包含在其中不存在。

```
// Filename: router.js
var app_router;
define( [ 'views/layouts/beta', 'views/beta/requestInvite', 'views/beta/login', 'views/app/dashboard' ],
function(betaLayout, requestInviteView, loginView, dashboardView) {
    var AppRouter = Backbone.Router.extend( {
        routes : {
            // Pages
            'login' : 'login',
            'dashboard' : 'dashboard',

            // Default
            '*actions' : 'defaultAction'
        },

        // Pages
        login : function() {
            loginView.render();
        },

        dashboard : function() {
            dashboardView.render();
        },

        // Default
        defaultAction : function(actions) {
            betaLayout.render();
            requestInviteView.render();
        }
    });

    var initialize = function() {
        app_router = new AppRouter;

        $('a').live('click', function() {
            var href = $(this).attr('href');

            // only navigate to real links
            if(href == undefined)
                return;

            app_router.navigate(href, {trigger: true});

            return false;
        });

        Backbone.history.start({pushState: true});
    };
    return {
        initialize : initialize
    };
}); 
```

我怎样才能让我的布局在我的视图之前完全呈现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T02:31:38.477

定义一个回调`betaLayout.render()`作为参数，在渲染实际完成时执行。

例如，`betaLayout.render()`看起来像：

```
render: function(callback) {
    /* code to render your element,
       using the following line when all
       asynchronous calls are complete */
    if (callback) callback();
} 
```

你`defaultAction`会像这样使用它，将第二个`render()`作为回调传递。

```
betaLayout.render(requestInviteView.render); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T03:16:51.890

问题是因为我的布局在我的视图初始化之前没有渲染，所以`el`是空的。我所做的是将所有对象转换为返回**object**而不是**instance**`render` ，并在初始化后让它们返回。这样，当我声明 a`new MyLayout`然后 a`new MyView`时，我可以保证`MyView`'s`el`是有效的。

# c# - jQuery 中是否有一些处理时间段数据类型的方法？

> ID：10924052
> 
> 赞同：0
> 
> 时间：2012-06-07T00:12:31.523
> 
> 标签：c#, javascript, jquery

我是 jQuery 新手，我所有的搜索请求都让我想到了处理日期/时间数据类型的方法。但我需要处理一段时间，以分钟为单位。例如，我想将`1708`分钟转换为`"1 day and 4 hours"`表达式，忽略分钟。`TimeSpan`例如，C# 中有数据类型，我可以执行以下操作：

```
public string ConvertMinutes()
        {
            //Number of minutes I have and want to convert
            int n = 1708;
            TimeSpan t = new TimeSpan(0, n, 0);

            string dayshelper = t.Days == 1 ? "day" : "days";
            string hoursHelper = t.Hours == 1 ? "hour" : "hours";

            //The result I want to get
            //For example "4 days and 2 hours"
            string result = string.Empty;
            result += t.Days == 0 ? string.Empty : string.Format("{0} {1}", t.Days, dayshelper);
            result += t.Hours == 0 ? "." : string.Format(" and {0} {1}.", t.Hours, hoursHelper);
            return result;
        } 
```

jQuery中有类似的东西吗？还是我必须自己从分钟数中获取天数和小时数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T00:28:41.637

只需在 javascript 中编写自己的函数即可将分钟转换为字符串。您需要做的就是进行模数除法以获得整个部分和提醒。继续除以 60 或 24，具体取决于您所处的维度，直到整个部分为 0。

所以1000秒我会做

1000 / 60 = 16 分钟 1000 % 60 = 40 秒提醒

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T00:29:43.187

jQuery 中没有类似的东西。Javascript 有一些内置的基本函数来处理日期，比如`new Date()`哪些会让你“现在”，或者`new Date().getTime()`哪些会让你进入时代。但是在约会方面并没有什么好的。

[http://www.datejs.com/](http://www.datejs.com/)

我非常喜欢这个图书馆。它运作良好并且可以做所有事情。享受！

否则，您始终可以手动编写函数。

# windows-8 - 开发 Windows 8 Metro 风格的应用程序需要 Windows 8 rc 预览版，对吗？

> ID：10924056
> 
> 赞同：0
> 
> 时间：2012-06-07T00:12:45.127
> 
> 标签：windows-8, microsoft-metro

没有适用于 Windows 8 的模拟器，因此为了开发 Metro 应用程序，我必须在设备上安装候选发布版本并在那里运行 Visual Studio，对吗？这就是这个[页面](http://msdn.microsoft.com/library/windows/apps/br211386)似乎建议的内容，但我只是想仔细检查一下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T01:00:50.373

是的，需要 Windows8。

但是，可以使用 VM。例如，我在 Win7/64 上的[Oracle VirtualBox](https://www.virtualbox.org/)中运行 Win8RP/64 和 VS2012RC 。

注意：为了开发 Metro Style App，您不应该安装 VirtualBox Extension Pack。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T12:33:05.683

是的，您需要 Windows 8 来开发 Windows 8 Metro 风格的应用程序。

Metro 风格应用依赖于一组新的 API，这些 API 仅通过 Windows 运行时 (WinRT) 在 Windows 8 中实现。

没有适用于 Windows 7 的模拟器，甚至没有适用于 Windows 8 的模拟器……Windows 8 有一个模拟器，实际上它只是与同一台机器的远程桌面会话。它不是模拟器。

虽然 Windows 8 不是最终版本，但我建议将 Windows 8 安装在 VHD（虚拟硬盘）中并将您的 PC 直接引导到 VHD。它比运行虚拟机更快（因为只有磁盘是虚拟的，其余的都是真实硬件），并且您可以保持 Windows 7 完好无损。

[这是我自 Developer Preview 以来一直在使用的](http://www.hanselman.com/blog/HowToGuideToInstallingAndBootingWindows8ConsumerPreviewOffAVHDVirtualHardDisk.aspx)。我有一个双启动配置，一种是用于从常规磁盘分区启动的 Windows 7，另一种是用于直接从磁盘上的 VHD 启动的 Windows 8。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T00:20:04.853

Metro UI 风格只是一种设计方法和[一些](http://blendinsider.com/technical/ux-guidelines-for-metro-style-app-development-2011-10-21/) [指导方针](https://ux.stackexchange.com/questions/7219/where-can-i-find-style-guide-for-metro-ui-for-web-applications)。您可以使用 Visual Studio 2010 和 2008 自由实现此类接口。使用 C# 和 WPF 一切皆有可能。但是，确实，新的 Visual Studio 具有一组 Metro 风格组件 (WPF)，使用它们您的开发过程会更快。唯一不能在 Windows 8 以外的操作系统上使用的是 WinRT 子系统。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T13:09:26.417

几乎所有构建 Metro 风格应用程序所需的开发工具都可以在 Windows 8 以外的操作系统上运行（Visual Studio 和包创建工具需要 Windows 8）。因此，应该可以使用 msbuild.exe（甚至 make/nmake）设置构建环境，该环境将在 Windows 8 以外的操作系统上编译和链接 Metro 风格的应用程序。

但是某些开发部分必须在 Windows 8 上完成 - 某些开发步骤的工具只能在 Windows 8 上运行。

# java - Android 活动堆栈控制。无法弄清楚如何删除历史记录

> ID：10924057
> 
> 赞同：1
> 
> 时间：2012-06-07T00:12:53.740
> 
> 标签：java, android, android-activity

我有以下 2 项活动（加上对这个问题不重要的更多活动）：

```
<activity android:name=".activities.HomeActivity" android:excludeFromRecents="true" />
<activity android:name=".activities.AdHocActivity" android:noHistory="true"/> 
```

`HomeActivity`是我为之保留历史的第一个也是唯一一个。用户可以从 Home 转到不同的地方，然后单击 Back 以返回主 HomeActivity。

我也有服务在警报运行并检查一些特定的事情。当满足特定标准时，我将展示我的`AdHocActivity`

```
Intent i = new Intent(context, AdHocActivity.class);
                i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                i.putExtra(BlockingActivity.INTENT_BLOCKED_PACKAGE_NAME, packageName);
                context.startActivity(i); 
```

`FLAG_ACTIVITY_NEW_TASK`必须显示来自 BroadcastReceiver 的 Activity

现在，这个 AdHoc 活动向用户显示了一些消息，*并*有一个按钮让用户返回`HomeActivity`

```
private void sendToMainApplication()
    {
        Intent i = new Intent(this, HomeActivity.class);
        startActivity(i);
        finish();
    } 
```

所有这些工作，但我得到了堆栈中的**第二个**实例。`HomeActivity`所以现在当用户点击“返回”时 - 我的主页活动会闪烁并返回（以前的副本）。

我只想要一个副本保持领先。我希望它像主播一样。如果它不存在 - 我想打开一个新的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T02:51:07.090

防止 HomeActivity 翻倍的技巧是这样称呼它：

```
private void sendToMainApplication()
    {
        Intent i = new Intent(this, HomeActivity.class);
        i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(i);
        finish();
    } 
```

# php - PHP SOAP Header 构造

> ID：10924063
> 
> 赞同：5
> 
> 时间：2012-06-07T00:13:27.783
> 
> 标签：php, soap, wsdl

所以基本上我希望 SOAP 标头是这样的：

```
<soapenv:Header>
  <v1:loginDetails>
     <v11:Id>0</v11:Id>
     <v11:username>MEMBERS</v11:username>
     $ <v11:password>0x909711E5,0xE301F82A,0x0E2783CC,0xAF6BC3DB,0x57727CFB</v11:password>
  </v1:loginDetails>
   </soapenv:Header>
<soapenv:Body>
  <v11:GetNextAvailableMemberNumberRequest>
     <v11:Id>1</v11:Id>
     <v11:memberId>1</v11:memberId>
  </v11:GetNextAvailableNumberRequest>
   </soapenv:Body>
</soapenv:Envelope> 
```

但是，现在我有了这个：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://www..com/membership/types/v1_0">
<SOAP-ENV:Header>
<ns1:loginDetails>
<item><key>siteId</key><value>0</value></item>
<item><key>Username</key><value>MEMBERSHIP</value></item>
<item><key>Password</key><value>P@ssw0rd</value></item>
</ns1:loginDetails>
</SOAP-ENV:Header>
<SOAP-ENV:Body>
<ns1:GetNextAvailableMemberNumberRequest/>
<param1>1</param1>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

这是我目前正在使用的 php 代码：

```
$client = new SOAPClient('http://192.168.180.128:8010//membershipService?wsdl',array('trace' => true));
$client->__setSoapHeaders(null);
$headerbody = array ('siteId' => '0','Username' => 'MEMBERSHIP',
'Password' => 'P@ssw0rd');
$header = new SOAPHeader('http://www.com/club/services/membership/types/v1_0','loginDetails',$headerbody);
$client->__setSoapHeaders($header); 
```

我哪里出错了？我似乎无法正确构建标题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-20T14:57:19.123

只需尝试使用匿名类而不是数组：

```
// Use standard class and set magic properties.
$header = new stdClass();
$header->siteId = '0';
$header->Username = 'MEMBERSHIP';
$header->Password = 'P@ssw0rd'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-05T14:05:26.140

将参数数组转换为对象效果很好

```
$auth = (object)array(
  'Username' => 'AzureDiamond',
  'Password' => 'hunter2',
);
$header = new SOAPHeader('http://my.ns/','loginDetails',$auth); 
```

但是，我发现它仍然没有完全正确地获取名称空间。以上产生

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"  xmlns:ns2="http://my.ns/">
  <SOAP-ENV:Header>
    <ns2:loginDetails>
      <Username>AzureDiamond</Username>
      <Password>hunter2</Password>
    </ns2:loginDetails>
  </SOAP-ENV:Header>
.... 
```

您会看到，虽然“loginDetails”标签在请求的命名空间中，但它的子元素却不在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-03T04:25:10.213

我刚刚遇到了一个非常相似的问题。

要修复它，您需要使用[SoapVar](http://php.net/manual/en/soapvar.soapvar.php)类。这允许您控制每个标签使用的命名空间。

```
$client = new SOAPClient('http://192.168.180.128:8010//membershipService?wsdl',array('trace' => true));
$ns = 'http://www.com/club/services/membership/types/v1_0';
$headerbody = new SoapVar([
    new SoapVar('0', XSD_STRING, null, null, 'siteId', $ns),
    new SoapVar('MEMBERSHIP', XSD_STRING, null, null, 'Username', $ns),
    new SoapVar('P@ssw0rd', XSD_STRING, null, null, 'Password', $ns),
], SOAP_ENC_OBJECT);
$header = new SOAPHeader($ns,'loginDetails',$headerbody);
$client->__setSoapHeaders($header); 
```

您的请求的 soap 标头应该如下所示：

```
<SOAP-ENV:Header>
    <ns1:loginDetails>
        <ns1:siteId>0</ns2:siteId>
        <ns1:Username>MEMBERSHIP</ns2:Username>
        <ns1:Password>P@ssw0rd</ns2:Password>
    </ns1:loginDetails>
</SOAP-ENV:Header> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-23T15:53:58.463

有错字：

```
$header = NEW stdClass() ; 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-06-20T14:06:05.427

$headerbody = array ('Id' => '0','username' => 'MEMBERSHIP', 'password' => 'P@ssw0rd');

请参考链接 [http://php.net/manual/en/class.soapheader.php](http://php.net/manual/en/class.soapheader.php)

还要确保您在 SOAPHeader 构造函数中传递了正确的命名空间（第一个参数）

# objective-c - 了解更多关于 UI 设计目的的子类化？

> ID：10924067
> 
> 赞同：0
> 
> 时间：2012-06-07T00:14:26.457
> 
> 标签：objective-c, ios, user-interface, subclassing

我正在寻找一些关于子类化的好信息。我真的一直在为界面设计目的研究子类化，例如，通过一个关于子类化 UIAlertView 的教程来实现不同的外观，但我想找到更多关于子类化作为一般技术的信息。我认为能够对目标 c 应用程序的任何基于 UI 的元素（例如 UIButton、UIToolbar、UITabBar 等）进行子类化将真正提高我作为开发人员的能力。所以，你们认为我应该查看的任何链接或出版物都会很棒！:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T00:22:13.147

子类化是一件很舒服的事情，因为一旦你精通它，实现自定义控件就变得非常容易。

每个类都有不同的子类注意事项，因此您确实需要阅读每个类的文档。它还有助于阅读该类的头文件（现在不在我的 Mac 上，但我认为您可以右键单击一个类名，它将有一个选项向您显示标题），因为它们通常在那里有很好的信息子类化。

我还建议查看[Cocoa Controls 网站](http://cocoacontrols.com/)。我认为那里的所有控件都有可用的源代码，因此您可以看到人们正在使用的技术。

# php - 将 str 的第一个字符大写但忽略一个或两个字母单词

> ID：10924071
> 
> 赞同：0
> 
> 时间：2012-06-07T00:15:09.350
> 
> 标签：php

我是新手，这对我来说很难。

我在变量中有一个文本：

```
$bio = 'text, text, tex ...'; 
```

我可以使用**ucfirst** php 函数使文本中的单词以大写字母开头。

**问题是我不希望带有一个、两个或三个字母的单词大写**，因为它看起来不专业。

**重要提示：**但我也想保持**字母“I”**大写，因为它是正确的英语语法。

**所以像这样的文本：** 这是一个没有 ucfirst 功能的文本，我认为它需要一些大写

**看起来像：** 这是一个没有 Ucfirst 函数的文本，**我**认为它需要一些大写

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T00:18:59.283

这将大写任何长度为 4 个或更多字母的单词（英文字母序列）：

```
$bio = preg_replace_callback('/[a-z]{4,}|\bi\b/i', function($match){
    return ucfirst($match[0]);
}, $bio); 
```

对于 5.3 之前的 PHP 版本：

```
$bio = preg_replace_callback('/[a-z]{4,}|\bi\b/i',
  create_function('$match', 'return ucfirst($match[0]);'), $bio); 
```

它将保留任何较短的单词，例如`I`and`add`和大写`i`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T00:18:50.983

我会使用正则表达式。如果您不想这样做，您可以使用 split，然后遍历标记并使用一堆 if-else，但正则表达式更酷。;)

这里有一个非常相似的问题：[Regex capitalize first letter each word, also after a special character like a dash](https://stackoverflow.com/questions/6251463/regex-capitalize-first-letter-every-word-also-after-a-special-character-like-a)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T00:22:08.730

嗯嗯？

```
$bio_x = explode(" ",$bio); if(strlen($bio_x[0]) > 3) $bio = ucfirst($bio); $bio = str_replace(" i "," I ",$bio); 
```

# android - 如何在旋转 ScrollView 时保持元素的纵横比？

> ID：10924074
> 
> 赞同：0
> 
> 时间：2012-06-07T00:16:13.370
> 
> 标签：android, orientation, scrollview, aspect-ratio

让我们假设一个 800x1280 像素的设备在纵向模式下具有以下布局：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/MyScrollView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fillViewport="true"
    android:scrollbars="none"
    android:fadingEdgeLength="0dip" >
    <LinearLayout
        android:id="@+id/MyLinearLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >
    </LinearLayout>
</ScrollView> 
```

并在 Activity 清单中使用**android:configChanges="orientation" 。**

动态地，我将两个子视图添加到 MyLinearLayout，其 Layout 的**width = MATCH_PARENT**和**height = getWindowManager().getDefaultDisplay().getHeight()**。所以，我可以在两个孩子之间垂直滚动，每个孩子都占据整个屏幕。

现在，当设备进入横向时，由于 MATCH_PARENT 属性，孩子的宽度从原来的 800 延伸到 1280 的尺寸。

在垂直方向上，它们不会被拉伸，因为它们最初是用 1280 的固定高度创建的，所以它们保持 1280 的高度。

垂直拉伸这些视图的正确方法是什么？

如果我尝试将 onConfigurationChanged 中的 child.setLayoutParams 设置为 width = MATCH_PARENT 和 height = 2048（即 1280 * 1280/800），则会出现异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T20:07:48.723

我正在使用动态实例化的 CanvasView（来自 S-Pen SDK）孩子。[在这个答案](https://stackoverflow.com/a/2997760/1000282)的帮助下，我能够做我想做的事。

我已经固有**com.samsung.sdraw.CanvasView**并覆盖了**onMeasure**以保持我想要的纵横比，我需要为每个孩子调用**setEnableZoom(false)**来纠正内容拉伸，它在横向模式下以双倍拉伸内容，走出屏幕边界。

# ruby-on-rails - Rails 控制器和实例变量

> ID：10924075
> 
> 赞同：5
> 
> 时间：2012-06-07T00:16:15.723
> 
> 标签：ruby-on-rails

典型的 Rails 控制器可能会执行以下操作：

```
class FoosController < ApplicationController
  def index
    @foos = Foo.all
  end
end 
```

我对 rails 了解得足够清楚，知道它`@foos`会返回一个 Foo 对象数组，但它`@foos`本身就是一个实例变量。

那么实例变量属于哪个对象呢？它会是 FoosController 类的一个实例吗？每次访问索引页时是否都会创建此对象的不同实例？如果我访问`@foo`引入了一个新变量的显示页面怎么办：

```
def show
  @foo = Foo.find(params[:id])
end 
```

此变量是否属于 @foos 所属的同一对象？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T00:20:00.063

1.  正确的; 它属于`FoosController`处理当前请求的实例。
2.  是的，每个请求都会创建一个新的控制器实例——这就是为什么可以使用实例变量来保存单个请求的状态。
3.  是的，但是：如果`index`未调用，则不会被初始化，在您显示的代码中执行操作时`@foos`没有`@foos`实例变量¹。`show`

* * *

¹ *如果您调用`index`from `show`， then`@foos`将被初始化并在页面上可用。并不是说您应该这样做，因为这令人困惑。*

# symfony - Doctrine ODM 嵌入文档父参考

> ID：10924076
> 
> 赞同：4
> 
> 时间：2012-06-07T00:16:16.537
> 
> 标签：symfony, doctrine-orm, odm

我目前正在处理嵌入文档，我需要从父文档中获取帐户信息以生成 URL。如何从嵌入文档的 getter 访问父文档？

```
/** @文档 */
类用户
{
    // ...

    /** @EmbedOne(targetDocument="Image") */
    私人$图像；

    /** @ReferenceOne(targetDocument="Account") */
    私人$帐户；
    // ...
}

/** @EmbeddedDocument */
班级形象
{
    私人 $url;

    公共函数 getUrl(){
       // 须藤代码。我该怎么做呢？
       返回 $this->getParent()->getAccount()->getDomain().$this->url;
    }
}

```

谢谢，科里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T15:37:52.627

如果您在访问图像时嵌入了它，恐怕您不能从用户文档中执行它

```
$image = $user->getImage(); 
```

所以你也可以访问这样的帐户

```
$account = $user->getAccount(); 
```

您应该编写一个 twig helper 或自定义函数来从用户文档构建您的 url

我希望这会有所帮助

# qt - 使用 Qt 时将键盘输入定向到小部件

> ID：10924079
> 
> 赞同：3
> 
> 时间：2012-06-07T00:16:36.257
> 
> 标签：qt, opengl, widget, keyboard-events

我正在使用 Qt 创建一个 GUI。基本上它是一个交互式地图，显示机器人在竞技场中实时移动，并允许用户通过使用鼠标和键盘键与机器人交互（告诉他们去/停止）。我使用 opengl 创建地图本身，一切正常，我可以看到机器人在地图上移动，我可以按键盘上的不同键并发送实际的机器人命令。

现在，我需要把这张地图变成一个更大的 GUI 的一部分，这个 GUI 也将这张地图与其他对象一起保存，并不是所有的对象都必须使用 opengl。因此，通过使用 Qt 创建器（设计器），我在我的 GUI 中有一些拖放选项卡，并且我还在我的 GUI 中添加了一个“dockwidget”。dockwidget 包含我之前创建的交互式地图。但是，现在我无法再使用键盘向我的地图发送命令。我仍然可以在我的地图上点击不同的机器人，我可以看到它们被选中并改变颜色（正如我编码它所做的那样），但按键没有相应的动作（因为它已经被编码）。

这就是地图本身的样子。[http://dl.dropbox.com/u/46437808/collision3.png](http://dl.dropbox.com/u/46437808/collision3.png)

这是作为停靠小部件的地图。（在小部件里面，我可以点击一个机器人，让它变成黄色）[https://www.dropbox.com/s/lpo43rl6z4268im/argHRI.png](https://www.dropbox.com/s/lpo43rl6z4268im/argHRI.png)

所以，我的问题是我们如何在使用 Qt 时将键盘输入定向到窗口中的特定小部件。根据我的阅读，这可能与设置焦点政策有关。因此，我尝试在构造函数中将我的dockwidget 的focuspolicy 设置为“StrongFocus”（以便它可以接受键盘输入），但这并没有帮助。

这是我将地图设置为码头小部件的代码，并且我也在尝试设置焦点。

```
 #include "ui_arghri.h"

argHRI::argHRI(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::argHRI)
{
    ui->setupUi(this);
    ui->dockMap->activateWindow();
    //ui->dockMap->keyboardGrabber();
    //ui->dockMap->grabKeyboard();
    ui->dockMap->setFocus();
    ui->dockMap->setFocusPolicy(Qt::StrongFocus);
}

argHRI::~argHRI()
{
    delete ui;
}

void argHRI::addMap(Map * map)
{

    qDebug()<<"argHRI::in AddMap test is "<<map->test;

    //ui->dockMap->show();
    ui->dockMap->setWidget(map);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:30:25.750

将处理 KeyPress 事件的事件过滤器添加到您的类。这里有例子：http: [//doc.qt.io/archives/qt-4.7/eventsandfilters.html](http://doc.qt.io/archives/qt-4.7/eventsandfilters.html) 只是不要忘记添加：

```
installEventFilter(this); 
```

给构造函数，否则它将无法工作。

# matlab - 在matlab中使用interp1命令的最有效方法有两列

> ID：10924082
> 
> 赞同：1
> 
> 时间：2012-06-07T00:16:48.977
> 
> 标签：matlab, interpolation

我有两列（相同大小）必须在 Matlab 中进行插值。第一列是以小时为单位的时间向量（9.5、9.6 9.73 10.13 等），另一列是与“以小时为单位的时间”列的每个元素相关联的股票价格。

我希望有一些与我的价格向量中缺少的每 15 分钟、30 分钟、45 分钟和 1 小时（60 分钟）相关的价格。因此，我的每小时时间列中也缺少这些元素（15、30、45 分钟和 60 分钟）。

如何线性插值两列以获得相同的大小，然后能够每 15 分钟（X.25 小时、X.5 小时、X.75 小时和 X 小时）关联一个价格？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T00:43:02.683

这是一个单行命令：

```
interp_prices = interp1(time, prices, 0:0.25:max(time)); 
```

# javascript - 如何获得上一个兄弟姐妹的名字

> ID：10924086
> 
> 赞同：3
> 
> 时间：2012-06-07T00:17:15.100
> 
> 标签：javascript, html, simple-html-dom, dom

我需要得到前一个兄弟的名字。为了简单起见，我有一些示例代码

```
<html>

 <head>
   <script type="text/javascript">
     function myFunction()
     {
      var itm=document.getElementById("item2");  
      alert(itm.previousSibling.name);
     }
   </script>
 </head>

 <body>
  <p name='pn'>paragraph</p>
  <button id='item2' onclick="myFunction()">Try it</button>
 </body>
</html> 
```

编辑：

```
<table id="sort">
    <tr name="nodrag nodrop">
        <td colspan=3><strong><a style="cursor:pointer;" class="toggle">Group 1</a></strong>  </td>
        <td style="text-align: right;"><a class="button3" href="#" ><span> Edit </span></a> <a class="button3" href="#" ><span> Delete </span></a></td>
    </tr>
    <tr id="1" class="tr_group"'>
        <td style="width:10px;" class="dragHandle">&nbsp;</td>
        <td><a href=# style="margin-left: 20px;">Umair Iqbal</a></td>
        <td><span style="font-size: 12px; color: #999; line-height: 100%;">A Student at TUM</span></td>
        <td style="text-align: right;"><a class="button3" href="#" ><span> Edit </span></a> <a class="button3" href="#" ><span> Delete </span></a></td>
    </tr> 
```

Ist 行是第二行的前一个兄弟。我想要第一行的名称，我所有的 id 都是动态的

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T00:27:02.987

使用 jQuery 将是：

```
$('#item2').prev().attr("name")​​​​​​​​​​;​ 
```

使用常规 javascript，您需要使用以下函数（以确保忽略空白节点）

```
getPreviousSiblingName(document.getElementById("item2"))

function getpreviousSiblingName(element) {
    var p = element;
    do p = p.previousSibling;
    while (p && p.nodeType != 1);
    return p.attributes["name"].value;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-07T00:37:06.987

那是因为您更有可能`previousSibling`成为文本节点而不是元素节点。您需要[previousElementSibling](https://developer.mozilla.org/en/DOM/Element.previousElementSibling)（在支持的情况下）或一个循环，`previousElement`直到[nodeType](https://developer.mozilla.org/en/nodeType)将是`1`（Node.ELEMENT_NODE）。

此外，`name`不适用于`p`元素（请参阅[https://developer.mozilla.org/en/DOM/Element.name](https://developer.mozilla.org/en/DOM/Element.name)）如果您使用自定义属性（如 HTML5`data-*`属性，在您的情况下`data-name`可能）可能会更好，并且因此使用[dataset](https://developer.mozilla.org/en/DOM/element.dataset)来获取属性的值，或通用的[getAttribute](https://developer.mozilla.org/en/DOM/element.getattribute)。

当然，像 jQuery 这样的库可以帮助抽象所有这些东西，解释只是与普通 JavaScript 有关。

# mysql - Rails 应用程序的数据库索引

> ID：10924088
> 
> 赞同：0
> 
> 时间：2012-06-07T00:17:29.673
> 
> 标签：mysql, sql, ruby-on-rails, activerecord, indexing

我有表格：产品、子类别和类别。Categories 有很多 Sub_Categories，Sub_Categories belongs_to Categories 有很多产品，产品属于 sub_categories。我的产品表有一个 sub_category_id；我的 sub_category 表有一个 category_id。索引这些表以增加应用程序加载时间的最有效方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T00:35:01.263

如果没有更多信息，为了更好地访问您的查询，您将索引这些：

```
categories on id
subcategories on id
subcategories on category_id
product on id
product on sub_category_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T00:39:18.187

您也可以使用急切加载。例如，如果您需要一个类别和几个子类别，请在更少的数据库查询中加载所有内容

```
Category.includes(:sub_categories).find(:id) 
```

. 请参阅[http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations](http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T00:41:27.043

Anil 的回答是正确的，但正如他所暗示的那样，您的问题太模糊了。我建议打开查询日志，并查看哪些查询在页面加载中占用了时间。然后进行有问题的查询，并输入`EXPLAIN {query}`mysql 提示符（您可以使用`rails dbconsole`或 Oracle 提供的独立 mysql 客户端访问）。查看瓶颈查询中使用的索引，并提出更具体的问题。

我猜您的很多查询都是按类别 ID 查询产品。将索引的 category_id 列添加到 Products 可能会通过避免加入来加快速度，但您有责任保持该列是最新的。

# facebook-graph-api - Utableview 照片显示然后变黑

> ID：10924092
> 
> 赞同：2
> 
> 时间：2012-06-07T00:18:08.457
> 
> 标签：facebook-graph-api, uitableview, uiimageview, sdwebimage

我目前正在使用从 Facebook 加载用户墙提要的 UITableview。我遇到的问题是，放入 tableview 的图像加载正常，但是当用户滚动时，它们变成完全黑色。这是我的 cellForRow 方法：

```
 if ([[objectTypes objectAtIndex:indexPath.row] isEqualToString:@"photo"]) {
    //this is a picture

    if ([facebookPictureObjectIDs objectAtIndex:indexPath.row]) 
                    {
                        if ([sourceArray objectAtIndex:indexPath.row]) {
                            if ([[sourceArray objectAtIndex:indexPath.row] rangeOfString:[facebookPictureObjectIDs objectAtIndex:indexPath.row]].location != NSNotFound) {

                                imageCell.imageview.image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:[sourceArray objectAtIndex:indexPath.row]]]];
                                NSLog(@"source array objectwith image ID: %@",[facebookPictureObjectIDs objectAtIndex:indexPath.row]);

                            }else {

                                NSLog(@"Same Image object id is: %@", [facebookPictureObjectIDs objectAtIndex:indexPath.row]);

                            }

                        }   else {
                            NSLog(@"Source Array object NIL NIL NIL");

                        }                 

                    }else {
                        NSLog(@"Else Called");
                    }

    [imageCell layoutSubviews];
    returnCell = imageCell;
   } 
```

谢谢你的帮助 ：）

# zend-framework - 未捕获的异常 'Zend_Application_Bootstrap_Exception' 与消息 '资源匹配 "autoloader" 未找到

> ID：10924093
> 
> 赞同：2
> 
> 时间：2012-06-07T00:18:14.370
> 
> 标签：zend-framework, zend-autoloader, zend-app-bootstrap

我是 Zend 框架的新手。我正在更新由另一个人开发的项目。我收到一个错误，例如

```
Generating config... PHP Fatal error:  Uncaught exception  
'Zend_Application_Bootstrap_Exception' with message 'Resource matching "autoloader" not found' 
in /project/aggrep/library/Zend/Application/Bootstrap/BootstrapAbstract.php:692

Stack trace:

#0 /project/aggrep/library/Zend/Application/Bootstrap/BootstrapAbstract.php(627):      
Zend_Application_Bootstrap_BootstrapAbstract->_executeResource('autoloader')

#1 /project/aggrep/library/Zend/Application/Bootstrap/BootstrapAbstract.php(584):  
Zend_Application_Bootstrap_BootstrapAbstract->_bootstrap('autoloader')

#2 /project/aggrep/library/Zend/Application.php(355): 
Zend_Application_Bootstrap_BootstrapAbstract->bootstrap('autoloader')

#3 /project/aggrep/process/init.php(27): Zend_Application->bootstrap('autoloader')

#4 /project/scripts/generate_distro.php(3): require('/project/aggrep...')

#5 {main}

thrown in /project/aggrep/library/Zend/Application/Bootstrap/BootstrapAbstract.php on line 692
Done 
```

我需要做什么或需要检查什么？有人请帮帮我吗？

谢谢，期待！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T14:17:27.383

这种错误来自不正确的引导。

在你`Bootstrap.php`有一堆以 开头的函数`_init`，例如。`public function _initAutoload()`. 所有这些都是在应用程序启动时自动执行的，但是如果需要特定的顺序，可以`$this->bootstrap('autoload');`在这些功能之一中使用，以确保资源`_initAutoload()`已被执行。

很有可能，一个函数`Bootstrap.php`正在请求一个`_initAutoload()`不存在/已被重命名的资源。

# c++ - -1 行出错？

> ID：10924094
> 
> 赞同：1
> 
> 时间：2012-06-07T00:18:27.597
> 
> 标签：c++, class, object

我有一个名为 PID 的类。我#include 类的标题。我一直在各种文件中使用这个类，包括错误指向的文件。编译器抱怨定义函数声明本身`void dispPid(char *name, PID &pid){}`。函数的所有内容都被注释掉了。该错误读取`AutoTrucker:-1: error: 'PID' has not been declared`没有其他错误。完整地注释掉函数可以完全消除错误，编译并正常工作。

真正让我困惑的是：

1.  错误指向第-1行
2.  该文件存在，并且包含在
3.  我使用上面的这个 PID 类作为指针：

```
PID *pid;
if (chk(arg2,"roll")){pid = &aircraft.ap.pid.wingLeveler;}
else if (chk(arg2,"heading") || chk(arg2,"hdg")){pid = &aircraft.ap.pid.headingHold;}
else if (chk(arg2,"pitch")){pid = &aircraft.ap.pid.pitchHold;}
... 
```

上面直接指定的这段代码可以编译并正常工作。那么给了什么？

**编辑 2：** 这真是一个吉米钻机，它让我感到恶心。不过是暂时解决了问题。那么给了什么？编译器不喜欢 PID 类作为函数参数，但它发现它在函数内部是可以接受的？我真的很想找到一个**合适的**解决方案，而不是传入一个 void 指针并转换它！

```
void dispPid(const char *name, void *tpid)
{
  PID &pid = *((PID*)tpid);
  ...
} 
```

**编辑：（**根据要求添加更多源代码）

```
void cmdsPid(char *buffer)
{
  if (chk(buffer,"pid"))
  {
    char *arg1 = next(buffer);
    if (chk(arg1,"ls"))
    {
      char *arg2 = next(arg1);
      if (chk(arg2,"") || chk(arg2,"all"))
      {
        /*
        Serial.println("Listing all PIDs:");
        dispPid("Roll",aircraft.ap.pid.wingLeveler);
        Serial.print("\t");
        dispPid("Heading",aircraft.ap.pid,headingHold);
        dispPid("Pitch",aircraft.ap.pid,pitchHold);
        Serial.print("\t");
        dispPid("V-Rate",aircraft.ap.pid.climbHold);
        Serial.print("\t\t");
        dispPid("Altitude",aircraft.ap.pid.altHold);
        dispPid("Throttle",aircraft.ap.pid.throttleHold);
        dispPid("Slip",aircraft.ap.pid.slipHold);
        */
      }
      else
      {
        Serial.print("Unknown argument");
      }
    }
    else if (chk(arg1,"w"))
    {
      char *arg2 = next(arg1);//name
      char *arg3 = next(arg2);//attr
      char *arg4 = next(arg3);//val
      double val = 0.0;
      bool onoff = false;
      if (chk(arg3,"inv"))
      {
        onoff = (chk(arg4,"off") || chk(arg4,"-"));
      }
      else if (chk(arg3,"max") || chk(arg3,"min"))
      {
        if (chk(arg4,"off") || chk(arg4,"-"))
        {
          onoff = false;
        }
        else
        {
          onoff = true;
          val = parseDoubleArg(arg4);
        }
      }
      else
      {
        val = parseDoubleArg(arg4);
      }
      PID *pid;
      if (chk(arg2,"roll")){pid = &aircraft.ap.pid.wingLeveler;}
      else if (chk(arg2,"heading") || chk(arg2,"hdg")){pid = &aircraft.ap.pid.headingHold;}
      else if (chk(arg2,"pitch")){pid = &aircraft.ap.pid.pitchHold;}
      else if (chk(arg2,"vrate")){pid = &aircraft.ap.pid.climbHold;}
      else if (chk(arg2,"alt")){pid = &aircraft.ap.pid.altHold;}
      else if (chk(arg2,"th")||chk(arg2,"thr")||chk(arg2,"thro")||chk(arg2,"throttle")){pid = &aircraft.ap.pid.throttleHold;}
      else if (chk(arg2,"slip")){pid = &aircraft.ap.pid.slipHold;}
      if (chk(arg3,"p")){pid->setPGain(val);}
      else if (chk(arg3,"i")){pid->setIGain(val);}
      else if (chk(arg4,"d")){pid->setDGain(val);}
      else if (chk(arg4,"max"))
      {
        if (onoff){pid->setLimitMax(val);}
        else{pid->disableMaxLimit();}
      }
      else if (chk(arg4,"min"))
      {
        if (onoff){pid->setLimitMin(val);}
        else{pid->disableMinLimit();}
      }
    }
    else
    {
      Serial.println("Unknown argument");
    }
  }
}

void dispPid(char *name, PID &pid){} 
```

PID 类（标头）：

```
#pragma once

#define PID_VERSION "1.1"

#include <inttypes.h>

#define allowLimitMax 1
#define allowLimitMin 2
#define invert 4
#define enabled 8

class PID
{
private:
    double pGain,iGain,dGain;
    double integrator;
    double *input,*output,*setpoint;
    double lastInput;
    double limitMax,limitMin;

    char settings;

public:
    struct Spid {
        double p,i,d,limitMax,limitMin;
        char settings;
    };

    PID();//constructor

    //getters
    double getPGain();
    double getIGain();
    double getDGain();
    double getLimitMax();
    double getLimitMin();
    bool isLimitMaxSet();
    bool isLimitMinSet();
    bool isInverted();

    //setters
    void setPGain(double newPGain);
    void setIGain(double newIGain);
    void setDGain(double newDGain);
    void setPIDGain(double newPGain, double newIGain, double newDGain);
    void setInput(double *newInput);
    void setOutput(double *newOutput);
    void setSetpoint(double *newSetpoint);
    void setIOS(double *newInput, double *newOutput, double *newSetpoint);
    void setLimitMax(double newLimitMax);
    void setLimitMin(double newLimitMin);
    void setLimits(double newLimitMin, double newLimitMax);
    void disableMaxLimit();
    void disableMinLimit();
    void disableLimits();
    void zeroOutIntegrator();
    void nullOut();
    void setInverted(bool newInvert);

    //actions
    void run();
    void run(double dt);

    void setFrom(Spid copy);
    void copy(Spid &copy);
}; 
```

# recursion - 优化斐波那契数列生成算法

> ID：10924096
> 
> 赞同：2
> 
> 时间：2012-06-07T00:18:40.220
> 
> 标签：recursion, fibonacci

众所周知，最简单的生成斐波那契数列的算法如下：

```
if(n<=0) return 0;
else if(n==1) return 1;
f(n) = f(n-1) + f(n-2); 
```

但是这个算法有一些重复的计算。例如，如果您计算 f(5)，它将计算 f(4) 和 f(3)。当您计算 f(4) 时，它将再次计算 f(3) 和 f(2)。有人可以给我一个更省时的递归算法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-03T16:28:53.887

在此处查找使用公式 [的 Erlang 中的实现](https://gist.github.com/pichi/8238258)![\begin{pmatrix}1&1\\1&0\end{pmatrix}^{n-1}=\begin{pmatrix}\mathrm{fib}(n)&\mathrm{fib}(n-1)\ \mathrm{fib }(n-1)&\mathrm{fib}(n-2)\end{pmatrix}](../Images/070b5dabbacff1bd815a3be743511aa0.png) 。它显示了很好的线性结果行为，因为`O(M(n) log n)`部分`M(n)`是大数字的指数。它在 2 秒内计算出一百万的 fib，其中结果有 208988 位。诀窍是您可以`O(log n)`使用（尾）递归公式计算乘法中的幂（尾表示`O(1)`在使用适当的编译器或重写循环时带有空格）：

```
% compute X^N
power(X, N) when is_integer(N), N >= 0 ->
    power(N, X, 1).

power(0, _, Acc) ->
    Acc;
power(N, X, Acc) ->
    if N rem 2 =:= 1 ->
            power(N - 1,   X,     Acc * X);
        true ->
            power(N div 2, X * X, Acc)
    end. 
```

在哪里`X`，`Acc`你用矩阵代替。`X`将以![\begin{pmatrix}1&1\1&0\end{pmatrix}](../Images/05259e35d5c377f93f5f4f433fae8ce7.png)和`Acc`身份启动`I`等于![\begin{pmatrix}1&0\0&1\end{pmatrix}](../Images/87ddecf8d7e2b897c998ca7b36762c6d.png)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T00:27:46.200

一种简单的方法是迭代地而不是递归地计算它。这将在线性时间内计算 F(n)。

```
def fib(n):
    a,b = 0,1
    for i in range(n):
        a,b = a+b,a
    return a 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-21T20:43:18.737

我已经阅读了一些以有效时间复杂度计算斐波那契的方法，以下是其中一些 -

**方法 1 - 动态编程** 现在这里的子结构是众所周知的，因此我将直接跳到解决方案 -

```
static int fib(int n) 
{ 
int f[] = new int[n+2]; // 1 extra to handle case, n = 0 
int i; 

f[0] = 0; 
f[1] = 1; 

for (i = 2; i <= n; i++) 
{ 
    f[i] = f[i-1] + f[i-2]; 
} 

return f[n]; 
} 
```

上面的空间优化版本可以按如下方式完成 -

```
static int fib(int n) 
 { 
    int a = 0, b = 1, c; 
    if (n == 0) 
        return a; 
    for (int i = 2; i <= n; i++) 
    { 
        c = a + b; 
        a = b; 
        b = c; 
    } 
    return b; 
} 
```

**方法 2-（使用矩阵 {{1,1},{1,0}} 的幂）**

这是一个 O(n)，它依赖于这样一个事实：如果我们将矩阵 M = {{1,1},{1,0}} 乘以 n 次（换句话说，计算幂（M, n ）），那么我们得到第 (n+1) 个斐波那契数作为结果矩阵中行和列 (0, 0) 的元素。该解决方案将有 O(n) 时间。

矩阵表示给出了斐波那契数的以下封闭表达式：fibonaccimatrix

```
static int fib(int n) 
{ 
int F[][] = new int[][]{{1,1},{1,0}}; 
if (n == 0) 
    return 0; 
power(F, n-1); 

return F[0][0]; 
} 

/*multiplies 2 matrices F and M of size 2*2, and 
puts the multiplication result back to F[][] */
static void multiply(int F[][], int M[][]) 
{ 
int x = F[0][0]*M[0][0] + F[0][1]*M[1][0]; 
int y = F[0][0]*M[0][1] + F[0][1]*M[1][1]; 
int z = F[1][0]*M[0][0] + F[1][1]*M[1][0]; 
int w = F[1][0]*M[0][1] + F[1][1]*M[1][1]; 

F[0][0] = x; 
F[0][1] = y; 
F[1][0] = z; 
F[1][1] = w; 
} 

/*function that calculates F[][] raise to the power n and puts the 
result in F[][]*/
static void power(int F[][], int n) 
{ 
int i; 
int M[][] = new int[][]{{1,1},{1,0}}; 

// n - 1 times multiply the matrix to {{1,0},{0,1}} 
for (i = 2; i <= n; i++) 
    multiply(F, M); 
} 
```

这可以优化为在 O(Logn) 时间复杂度下工作。我们可以在前面的方法中进行递归乘法得到幂（M，n）。

```
static int fib(int n) 
{ 
int F[][] = new int[][]{{1,1},{1,0}}; 
if (n == 0) 
    return 0; 
power(F, n-1); 

return F[0][0]; 
} 

static void multiply(int F[][], int M[][]) 
{ 
int x =  F[0][0]*M[0][0] + F[0][1]*M[1][0]; 
int y =  F[0][0]*M[0][1] + F[0][1]*M[1][1]; 
int z =  F[1][0]*M[0][0] + F[1][1]*M[1][0]; 
int w =  F[1][0]*M[0][1] + F[1][1]*M[1][1]; 

F[0][0] = x; 
F[0][1] = y; 
F[1][0] = z; 
F[1][1] = w; 
} 

static void power(int F[][], int n) 
{ 
if( n == 0 || n == 1) 
  return; 
int M[][] = new int[][]{{1,1},{1,0}}; 

power(F, n/2); 
multiply(F, F); 

if (n%2 != 0) 
   multiply(F, M); 
} 
```

**方法 3 (O(log n) 时间)** 下面是一个更有趣的递归公式，可用于在 O(log n) 时间内找到第 n 个斐波那契数。

如果 n 为偶数，则 k = n/2：F(n) = [2*F(k-1) + F(k)]*F(k)

如果 n 是奇数，则 k = (n + 1)/2 F(n) = F(k)*F(k) + F(k-1)*F(k-1) 这个公式如何工作？该公式可以从上述矩阵方程推导出来。斐波那契矩阵

两边取行列式，我们得到 (-1)n = Fn+1Fn-1 – Fn2 此外，由于任何方阵 A 的 AnAm = An+m，可以推导出以下恒等式（它们是从两个不同的系数获得矩阵产品）

FmFn + Fm-1Fn-1 = Fm+n-1

通过设置 n = n+1，

FmFn+1 + Fm-1Fn = Fm+n

设 m = n

F2n-1 = Fn2 + Fn-12

F2n = (Fn-1 + Fn+1)Fn = (2Fn-1 + Fn)Fn（来源：维基）

为了得到要证明的公式，我们只需要做以下事情 如果 n 是偶数，我们可以把 k = n/2 如果 n 是奇数，我们可以把 k = (n+1)/2

```
public static int fib(int n) 
{ 

    if (n == 0) 
        return 0; 

    if (n == 1 || n == 2) 
        return (f[n] = 1); 

    // If fib(n) is already computed 
    if (f[n] != 0) 
        return f[n]; 

    int k = (n & 1) == 1? (n + 1) / 2 
                        : n / 2; 

    // Applyting above formula [See value 
    // n&1 is 1 if n is odd, else 0\. 
    f[n] = (n & 1) == 1? (fib(k) * fib(k) +  
                    fib(k - 1) * fib(k - 1)) 
                   : (2 * fib(k - 1) + fib(k))  
                   * fib(k); 

    return f[n]; 
} 
```

**方法 4 - 使用公式** 在此方法中，我们直接实现斐波那契数列中第 n 项的公式。时间 O(1) 空间 O(1) Fn = {[(√5 + 1)/2] ^ n} / √5

```
static int fib(int n) { 
double phi = (1 + Math.sqrt(5)) / 2; 
return (int) Math.round(Math.pow(phi, n)  
                    / Math.sqrt(5)); 
} 
```

参考： http: [//www.maths.surrey.ac.uk/hosted-sites/R.Knott/Fibonacci/fibFormula.html](http://www.maths.surrey.ac.uk/hosted-sites/R.Knott/Fibonacci/fibFormula.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T00:21:49.877

提示：获得更快结果的一种方法是使用[Binet 公式](http://mathworld.wolfram.com/BinetsFibonacciNumberFormula.html)：

这是在 Python 中执行此操作的一种方法：

```
from decimal import *

def fib(n):
    return int((Decimal(1.6180339)**Decimal(n)-Decimal(-0.6180339)**Decimal(n))/Decimal(2.236067977)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-05T08:02:58.933

您可以保存结果并使用它们：

```
public static long[] fibs;

public long fib(int n) {
    fibs = new long[n];
    return internalFib(n);
}
public long internalFib(int n) {
    if (n<=2) return 1;
    fibs[n-1] = fibs[n-1]==0 ? internalFib(n-1) : fibs[n-1];
    fibs[n-2] = fibs[n-2]==0 ? internalFib(n-2) : fibs[n-2];
    return fibs[n-1]+fibs[n-2];
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-23T01:54:49.337

编辑：我实际上认为 Hynek Vychodil 的答案比我的要好，但我把它留在这里以防万一有人正在寻找替代方法。

我认为其他方法都是有效的，但不是最优的。使用 Binet 的公式原则上应该会给您正确的答案，但是四舍五入到最接近的整数会在 n 的较大值时产生一些问题。每次调用该函数时，其他解决方案将不必要地重新计算最多 n 的值，因此该函数未针对重复调用进行优化。

在我看来，最好的办法是定义一个全局数组，然后在需要时向数组添加新值。在 Python 中：

```
import numpy

fibo=numpy.array([1,1])
last_index=fibo.size

def fib(n):
    global fibo,last_index
    if (n>0):
        if(n>last_index):
            for i in range(last_index+1,n+1):
                fibo=numpy.concatenate((fibo,numpy.array([fibo[i-2]+fibo[i-3]])))
            last_index=fibo.size
        return fibo[n-1]
    else:
        print "fib called for index less than 1"
        quit() 
```

自然，如果您需要在 n>80（大约）时调用 fib，那么您将需要实现任意精度的整数，这在 python 中很容易做到。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-22T20:21:20.390

```
// D Programming Language 

void vFibonacci ( const ulong X, const ulong Y, const int Limit ) {    
       // Equivalent : if ( Limit != 10 ). Former ( Limit ^ 0xA ) is More Efficient However.
       if ( Limit ^ 0xA ) {    
           write ( Y, " " ) ;
           vFibonacci ( Y, Y + X, Limit + 1 ) ;
       } ;
} ;

// Call As    
// By Default the Limit is 10 Numbers
vFibonacci ( 0, 1, 0 ) ; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-13T06:17:24.247

F(n) = (φ^n)/√5 并四舍五入到最接近的整数，其中 φ 是黄金比例......

φ^n 可以在 O(lg(n)) 时间内计算，因此 F(n) 可以在 O(lg(n)) 时间内计算。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-10-02T07:48:16.753

这将执行得更快，O(n)

```
def fibo(n):
    a, b = 0, 1
    for i in range(n):
        if i == 0:
            print(i)
        elif i == 1:
            print(i)
        else:
            temp = a
            a = b
            b += temp
    print(b)
n = int(input())
fibo(n) 
```

# java - 当鼠标悬停在 JTable 上时滚动 JPanel

> ID：10924099
> 
> 赞同：2
> 
> 时间：2012-06-07T00:19:08.430
> 
> 标签：java, swing, jpanel, jscrollpane, mousewheel

我有一个`JTable`里面的`JPanel`。我可以使用鼠标的滚轮上下`JPanel`滚动，但是当我的鼠标悬停在 上时`JTable`，我必须将其移出表格才能`JPanel`使用滚轮向上滚动。`JPanel`如果鼠标悬停在上面，有没有办法可以使用滚轮上下滚动`JTable`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T21:46:59.860

我在上面的评论中采纳了至强的建议，​​并实现了一个鼠标滚轮监听器，它将鼠标滚轮事件转发到父组件。请参阅下面的代码。

```
public class CustomMouseWheelListener implements MouseWheelListener {

  private JScrollBar bar;
  private int previousValue = 0;
  private JScrollPane parentScrollPane;
  private JScrollPane customScrollPane;

  /** @return The parent scroll pane, or null if there is no parent. */
  private JScrollPane getParentScrollPane() {
    if (this.parentScrollPane == null) {
      Component parent = this.customScrollPane.getParent();
      while (!(parent instanceof JScrollPane) && parent != null) {
        parent = parent.getParent();
      }
      this.parentScrollPane = (JScrollPane) parent;
    }
    return this.parentScrollPane;
  }

  /**
   * Creates a new CustomMouseWheelListener.
   * @param customScrollPane The scroll pane to which this listener belongs.
   */
  public CustomMouseWheelListener(JScrollPane customScrollPane) {
    ValidationUtils.checkNull(customScrollPane);
    this.customScrollPane = customScrollPane;
    this.bar = this.customScrollPane.getVerticalScrollBar();
  }

  /** {@inheritDoc} */
  @Override
  public void mouseWheelMoved(MouseWheelEvent event) {
    JScrollPane parent = getParentScrollPane();
    if (parent != null) {
      if (event.getWheelRotation() < 0) {
        if (this.bar.getValue() == 0 && this.previousValue == 0) {
          parent.dispatchEvent(cloneEvent(event));
        }
      }
      else {
        if (this.bar.getValue() == getMax() && this.previousValue == getMax()) {
          parent.dispatchEvent(cloneEvent(event));
        }
      }
      this.previousValue = this.bar.getValue();
    }
    else {
      this.customScrollPane.removeMouseWheelListener(this);
    }
  }

  /** @return The maximum value of the scrollbar. */
  private int getMax() {
    return this.bar.getMaximum() - this.bar.getVisibleAmount();
  }

  /**
   * Copies the given MouseWheelEvent.
   * 
   * @param event The MouseWheelEvent to copy.
   * @return A copy of the mouse wheel event.
   */
  private MouseWheelEvent cloneEvent(MouseWheelEvent event) {
    return new MouseWheelEvent(getParentScrollPane(), event.getID(), event.getWhen(),
        event.getModifiers(), 1, 1, event.getClickCount(), false, event.getScrollType(),
        event.getScrollAmount(), event.getWheelRotation());
  }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:37:52.640

感谢 denshaotoko 分享您的代码。我已经按照相同的思路（事件转发）实现了一个解决方案，但将它直接放入滚动窗格中。认为它可能对其他人有用。

```
/**
 * Scroll pane that only scrolls when it owns focus. When not owning focus (i.e. mouse
 * hover), propagates mouse wheel events to its container.
 * <p>
 * This is a solution for <i>"I have a JTable inside a JPanel. When my mouse is hovering
 * over the JTable, I have to move it out of the table to scroll the JPanel."</i>
 */
public class ScrollWhenFocusedPane extends JScrollPane {
    // Note: don't leave users with "scroll on focus" behaviour
    // on widgets that they cannot focus. These will be okay.
    public ScrollWhenFocusedPane (JTree view) {super (view);}
    public ScrollWhenFocusedPane (JList view) {super (view);}
    public ScrollWhenFocusedPane (JTable view) {super (view);}
    public ScrollWhenFocusedPane (JTextArea view) {super (view);}

    @Override
    protected void processMouseWheelEvent (MouseWheelEvent evt) {
        Component outerWidget = SwingUtilities.getAncestorOfClass (Component.class, this);

        // Case 1: we don't have focus, so we don't scroll
        Component innerWidget = getViewport().getView();
        if (!innerWidget.hasFocus())
            outerWidget.dispatchEvent(evt);

        // Case 2: we have focus
        else {
            JScrollBar innerBar = getVerticalScrollBar();
            if (!innerBar.isShowing()) // Deal with horizontally scrolling widgets
                innerBar = getHorizontalScrollBar();

            boolean wheelUp = evt.getWheelRotation() < 0;
            boolean atTop = (innerBar.getValue() == 0);
            boolean atBottom = (innerBar.getValue() == (innerBar.getMaximum() - innerBar.getVisibleAmount()));

            // Case 2.1: we've already scrolled as much as we could
            if ((wheelUp & atTop) || (!wheelUp & atBottom))
                outerWidget.dispatchEvent(evt);

            // Case 2.2: we'll scroll
            else
                super.processMouseWheelEvent (evt);
        }
    }
} 
```

# c++ - C++ 继承和确定类型

> ID：10924100
> 
> 赞同：1
> 
> 时间：2012-06-07T00:19:26.053
> 
> 标签：c++, inheritance, polymorphism

所以我正在做一个个人项目（试图在 C++ 上做得更好），我正在努力让它工作：

我有一个带有纯虚函数 interactWith(A* target); 的 ABC 类 A

然后我有两个派生类，B类和C类。

但是，B 类必须与 C 类交互，而不是与另一个 B 类交互

我在 ABC 中找到了一种使用 if/else 和虚拟 getType() 的方法，但我很好奇是否有更优雅的方法，或者我是否只是在做一些非常愚蠢的事情，以及我是否正在做某事愚蠢的（这很有可能），我会从哪里开始寻找更好的解决方案（即更合适的设计模式）

请注意：我没有使用 boost，我现在宁愿避免它，等我真正擅长编程时开始学习它

欢迎您提供任何帮助。谢谢，麻烦您了

我应该注意的一点：B 类和 C 类将（应该）仅通过 A* 可见

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T00:32:20.967

您尝试实现的功能称为[*双重分派*](http://en.wikipedia.org/wiki/Double_dispatch)：一个对两个对象表现为虚拟的函数。

有几种方法可以实现它，其中一种更常见的是使用[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)。

Scott Meyers 有一个关于实现双重调度的优秀章节（在他的[“More Effective C++”](https://rads.stackoverflow.com/amzn/click/com/020163371X)一书中的第 31 条）。他从访问者模式的讨论开始，然后继续使用[RTTI](http://en.wikipedia.org/wiki/Run-time_type_information)实现一个非常好的实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T00:32:56.460

您几乎从不想使用类型切换。动态转换稍微好一点，但如果可能的话仍然要避免。

一个更好的选择是扭转局面，这样您就可以再次使用虚拟调度机制，通常称为“双重调度”或“模拟多方法”。它看起来像这样：

```
struct B;

struct A { 
  virtual void interactWith(A* target); 
  virtual void interactWithB(B* target);
};

struct B : A {
  virtual void interactWith(A* target) {
    target->interactWithB(this);
  }
  virtual void interactWithB(B* lhs) {
    // B vs. B stuff goes here, but with lhs and this in place of this and target
  }
};

struct C : A {
  virtual void interactWith(A* target) {
    // C vs. anything stuff goes here
  }
  virtual void interactWithB(B* lhs) {
    // B vs. C stuff goes here, again backward
  }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T00:28:07.130

使用 dynamic_cast

```
C* cTarget = dynamic_cast<C*>(target);
if(cTarget == NULL)
{
    //cTarget is not a C
}
else if(cTarget)
{
    //cTarget is a C
} 
```

dynamic_cast 做了一些花哨的东西（我不确定它做了什么）来确保强制转换是有效的，如果不是，它返回 NULL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T00:35:28.347

理想情况下，封装与 B 和 C 交互时需要在 B 和 C 之间有所不同的行为，并将其放入您调用的另一个虚拟方法中`target`——然后在 B 和 C 中适当地对该方法进行不同的实现。

如果上述内容过于混乱和分散，则表明您选择了错误的抽象作为您的对象。您最好放弃 A/B/C 类层次结构并将您的程序划分为不同的层次结构，但如果没有更具体的描述您正在尝试做什么，这是不可能的。过早的抽象（连同过早的优化）是没有经验的程序员经常犯的关键错误之一。

# xml - xmlstarlet xslt 转换无法删除节点

> ID：10924101
> 
> 赞同：1
> 
> 时间：2012-06-07T00:19:38.003
> 
> 标签：xml, xslt, xmlstarlet

我正在尝试使用 xmlstarlet 处理一大组 .Net 项目文件，但是尝试使用 xsl 删除`ProductVersion`的这种简单转换不起作用。

我试过`//ProductVersion`了，这个实例中的命名空间会引起问题吗？

运行.cmd

```
SET ProjFile=test.vbproj
SET TempFile=%TEMP%\temp.proj
xml tr clean.xsl %ProjFile% > %TempFile%
move /Y %TempFile% %ProjFile% 
```

干净的.xsl

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

    <xsl:strip-space elements="*"/>

    <xsl:template match='@*|node()'>
        <xsl:copy>
            <xsl:apply-templates select='@*|node()'/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="ProductVersion"/>
</xsl:stylesheet> 
```

测试.vbproj

```
<?xml version="1.0" encoding="UTF-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" DefaultTargets="Build" ToolsVersion="4.0">
  <PropertyGroup>
    <ProductVersion>9.0.30729</ProductVersion>
    <SchemaVersion>2.0</SchemaVersion>
  </PropertyGroup>
</Project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T00:30:20.550

您可以使用 xmlstarlet edit 子命令直接执行此操作：

```
xmlstarlet ed \
  -N ms=http://schemas.microsoft.com/developer/msbuild/2003 \
  -d '//ms:ProductVersion' test.vbproj 
```

或者，您可以修改 XSLT 以尊重命名空间：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:ms="http://schemas.microsoft.com/developer/msbuild/2003">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
    <xsl:strip-space elements="*"/>
    <xsl:template match='@*|node()'>
        <xsl:copy>
            <xsl:apply-templates select='@*|node()'/>
        </xsl:copy>
    </xsl:template>
    <xsl:template match="ms:ProductVersion"/>
</xsl:stylesheet> 
```

# svn - SVN 文件更新似乎没有更新

> ID：10924107
> 
> 赞同：0
> 
> 时间：2012-06-07T00:20:23.260
> 
> 标签：svn

好的，我做了一个

> svn更新

在我的仓库中，但一个特定的文件似乎没有更新。我认为这个问题的部分原因是其他人也在处理同一个文件。就像我在处理文件一样，他们显然做了一些重大调整。他们承诺了，我对自己说不用担心我的变化很小。所以我想我会更新以获得最新的东西，让我的更改被覆盖，因为我可以快速重做我的东西。不幸的是，事实并非如此。

当我进行更新时，SVN 显示文件已更新，但是当我打开文件时，没有任何变化。所以我猜SVN足够聪明，不会让我像我希望的那样覆盖我的文件。有了这个，我认为必须有一种方法来重置文件，或者强制它进行更改。我只是不太了解 SVN，无法这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T00:23:52.580

如果您先*删除*文件，然后运行`svn update`，则该文件将被存储库中的最新文件替换。不能涉及您的更改，因为您先将其删除。然而...

通常，Subversion 会将存储库中的更改*合并*到您的工作文件中。如果合并成功且没有冲突，您的更改*和*其他更改都将出现在您工作目录中的文件中`svn update`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-07T01:58:16.333

我认为您对 SVN 的工作方式有一些重大误解。看看 SVN 的书，了解如果 2 个人同时修改同一个文件会发生什么。

在给出答案之前，我将首先指出您问题中的错误：

1.  你不是`svn update`在 repo 上执行，你是在你的*工作副本上执行*
2.  如果您在本地工作副本中更改了文件 A，而其他人也更改了 A 并提交。当您更新工作副本时，SVN 将尝试合并您的更改，并且更改发生在 repo 中（从您之前的更新/结帐开始）。结果似乎您正在根据最新文件 A 修改文件。它**不会**覆盖您的本地更改。
3.  我不相信您的更新后“没有变化”。我打赌你仍然看到你的变化，因此你认为没有变化，对吗？

在谈到错误之后，答案是：如果你想放弃你对某个文件所做的更改，而使用存储库上的文件，你应该使用`svn revert`.

更新`svn revert`之前或之后的文件都应该工作。

# core-data - Core Data NSFetchedResultsController 的比较函数

> ID：10924109
> 
> 赞同：0
> 
> 时间：2012-06-07T00:20:33.480
> 
> 标签：core-data, nsfetchedresultscontroller

我正在使用 NSFetchedResultsController 将我的数据分成单独的部分。我给出的主要 sortDescriptor 是这样的：

> NSSortDescriptor *sortDescriptorSectionLetter = [[NSSortDescriptor alloc] initWithKey:@"sectionLetter" 升序：YES 选择器：@selector(localizedCompare:)];

现在我的 sectionLetter 的默认值为“#”。当 tableView 被分割并呈现时，它会将“#”部分放在表格的顶部。我希望它显示在列表的底部（就像联系人应用程序那样）。但我不知道如何做到这一点。

我还尝试了不同类型的字符作为默认字符而不是 #，例如 � 和 ~，但这似乎也不起作用。根据Core Data Programming Guide，我不能在这里传入自定义的比较函数。

所以我不确定我的选择是什么（除了自己进行切片并失去所有 FRC 代表的优点来重新加载我的带有动画的表格视图）。有什么好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:50:08.820

[请注意文档](http://developer.apple.com/library/ios/DOCUMENTATION/CoreData/Reference/NSFetchedResultsController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40008227-CH1-DontLinkElementID_2)中的注释`NSFetchedResultsController`：

> **子类化注释**
> 如果要自定义节和索引标题的创建，可以创建此类的子类。您覆盖 sectionIndexTitleForSectionName: 如果您希望部分索引标题不是部分名称的大写首字母。如果您希望索引标题不是通过在所有已知部分上调用 sectionIndexTitleForSectionName: 创建的数组，则覆盖 sectionIndexTitles。

# c++ - 无法从getsockname 获取本地主机IP 地址？

> ID：10924112
> 
> 赞同：0
> 
> 时间：2012-06-07T00:21:09.470
> 
> 标签：c++, c, sockets, localhost

我能够得到端口返回，但 IP 不是。我应该使用getsockname以外的其他东西吗？谢谢

```
 if ((sock = ::socket(AF_INET, SOCK_STREAM, 0)) == -1) {
            c.Format("Socket Error:  %d", GetLastError());
            tcpMESSAGE = 1;
            break;
        }

        server_addr.sin_family = AF_INET;         
        server_addr.sin_port = htons(4000); //port setting    
        server_addr.sin_addr.s_addr = INADDR_ANY; 

        if (::bind(sock, (struct sockaddr *)&server_addr, sizeof(struct sockaddr)) == -1) {
            c.Format("Bind Error:  %d", GetLastError());
            tcpMESSAGE = 1;
            break;
        }

        if(1==1){
            int len = sizeof server_addr;
            if(::getsockname(sock,(struct sockaddr*)&server_addr,&len) == -1)
                MessageBox("Error local host ip");

            c.Format("local addr %s:%u\n  errno: %d",inet_ntoa(server_addr.sin_addr),ntohs(server_addr.sin_port), errno);
            MessageBox(c);
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T01:18:18.163

您正在绑定到`INADDR_ANY`，但尚未将套接字连接到对等方，因此没有 IP`getsockname()`可返回。`connect()`通过或建立连接后`accept()`，`getsockname()`可以返回用于该连接的特定 IP。仅绑定是不够的，除非您绑定到特定的 IP，而您并没有这样做。

# javascript - 你能用Javascript得到一个字符串中点击的确切位置吗？

> ID：10924115
> 
> 赞同：1
> 
> 时间：2012-06-07T00:21:23.033
> 
> 标签：javascript, html, click, mootools

我有这个 html: `<span>some words here</span>`。单击它时，`span`它会变成一个带有该字符串的文本框。一旦出现带有字符串的文本框，有没有办法找出单击发生的字符并将光标放在字符串中的该点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T00:41:07.483

这是一个快速的 Fiddle（在 Chrome 中测试），适用于`<span>`包含换行符的 a，上述解决方案阻塞了它：

[http://jsfiddle.net/x2dLW/1/](http://jsfiddle.net/x2dLW/1/)

总结如下：

```
function swapArea(baseEl) {
  // Display <textarea> element, hide the <span>
}

function getCursorLoc (nodes, range) {
  var prevChars = 0;
  var clickContent = range.startContainer.textContent;
  var clickLine;

  //iterate backwards through nodes constituting <span> element contents
  for (x = nodes.length - 1; x >= 0; x--) {
    node = nodes[x];

    if (clickContent == node.textContent) {
      clickLine = node; //this is the line user clicked in
    }
    else if (clickLine && (node.nodeName == "#text") ) {
      //sum up length of text lines prior, +1 for the NewLine
      prevChars += node.textContent.length + 1;
    }
  }

  //return offset in line clicked + sum length of all previous lines' content
  return range.startOffset + prevChars;
}

function replaceAndSet(e) {
    //Capture the click target as Selection(), convert to Range();
    var userRange = window.getSelection().getRangeAt();

    newArea = swapArea(source);

    //spanLines holds siblings (nodeName #Text or <BR>) constituting <span> contents
    var spanLines = userRange.startContainer.parentElement.childNodes;
    var clickChar = getCursorLoc(spanLines, userRange);

    newArea.focus();
    newArea.setSelectionRange(clickChar, clickChar);    
}

var source = someSpan; //the span user clicks on
source.onclick = replaceAndSet; 
```

# python - 正则表达式：搜索具有多个部分的多个单词

> ID：10924120
> 
> 赞同：0
> 
> 时间：2012-06-07T00:22:04.063
> 
> 标签：python, regex, expression

我正在尝试实现搜索一组包含多个部分的多个单词。例如，我们有这些医学术语。

```
R Deep Transverse Metatarsal Ligament 4 GEODE
R Distal JointCapsule 1 GEODE
R Dorsal Calcaneocuboid Ligament GEODE
R Dorsal Carpometacarpal Ligament 2 GEODE
R Dorsal Cuboideavicular Ligament GEODE
R Dorsal Tarsometatarsal Ligament 5 GEODE
R Elbow Capsule GEODE
R F Distal JointCapsule 1 GEODE
R Fibular Collateral Bursa GEODE
R Fibular Collateral Ligament GEODE
R Fibular Ligament GEODE 
```

用户可以输入这样的搜索词：

例如，“R De Me Li”那么这应该找到“R Deep Transverse Metatarsal Ligament 4 GEODE”

例如，“Fi Colla” ==> “R Fibular Collat​​eral Bursa GEODE”、“R Fibular Collat​​eral Ligament GEODE”

例如，“弓形 ODE”==>“R 弯头胶囊 GEODE”

也就是说，即使用户输入了单词的某些部分，它也应该找到答案。如果有多个答案，它应该显示所有。我提前感谢您的帮助。

补充）哦..我忘记了一些东西。

例如，“ral lar” ==> 不应显示“R Fibular Collat​​eral Bursa GEODE”或“R Fibular Collat​​eral Ligament GEODE”，因为应考虑查询词的顺序。

此外，查询词之间的空格表示每一行（数据库）的不同词。

查询词的顺序应与每行（数据库）的词相同，但查询词可以比数据库词短。

eg, "R De Me 4" ==> "R Deep Transverse Metatarsal Ligament 4 GEODE" 其中我们可以看到 'Metatarsal' 和 'Ligament' 包括 'me'，但是第一个匹配 'Metatarsal' 很好，并且 4将被搜索。

此外，查询词的不同组合可以返回相同的结果。

例如。，

'汽车' ==> 'R 背侧腕掌韧带 2 GEODE'

'Do Car' ==> 'R 腕掌背侧韧带 2 GEODE'

'R Do Carp' ==> 'R 腕掌背侧韧带 2 GEODE'

注意：不区分大小写。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T01:49:19.740

您可以在标准发行版中使用[difflib执行此操作：](http://docs.python.org/library/difflib.html)

```
import difflib

s="""R Deep Transverse Metatarsal Ligament 4 GEODE
R Distal JointCapsule 1 GEODE
R Dorsal Calcaneocuboid Ligament GEODE
R Dorsal Carpometacarpal Ligament 2 GEODE
R Dorsal Cuboideavicular Ligament GEODE
R Dorsal Tarsometatarsal Ligament 5 GEODE
R Elbow Capsule GEODE
R F Distal JointCapsule 1 GEODE
R Fibular Collateral Bursa GEODE
R Fibular Collateral Ligament GEODE
R Fibular Ligament GEODE""".split('\n')

qs="""R De Me Li
Fi Colla
bow ODE""".split('\n')

for q in qs:
    print "results for '{}':".format(q)
    matches=difflib.get_close_matches(q,s,3,0.3)
    for i,e in enumerate(matches,1):
        print "\t{}. {}".format(i,e) 
```

印刷：

```
results for 'R De Me Li':
    1\. R Deep Transverse Metatarsal Ligament 4 GEODE
    2\. R Dorsal Calcaneocuboid Ligament GEODE
    3\. R Dorsal Cuboideavicular Ligament GEODE
results for 'Fi Colla':
    1\. R Fibular Collateral Bursa GEODE
    2\. R Fibular Collateral Ligament GEODE
results for 'bow ODE':
    1\. R Elbow Capsule GEODE 
```

结合cblab 关于将正则表达式与 difflib 结合[的答案](https://stackoverflow.com/a/10924574/298607)，您可以得到：

```
s="""R Deep Transverse Metatarsal Ligament 4 GEODE
R Distal JointCapsule 1 GEODE
R Dorsal Calcaneocuboid Ligament GEODE
R Dorsal Carpometacarpal Ligament 2 GEODE
R Dorsal Cuboideavicular Ligament GEODE
R Dorsal Tarsometatarsal Ligament 5 GEODE
R Elbow Capsule GEODE
R F Distal JointCapsule 1 GEODE
R Fibular Collateral Bursa GEODE
R Fibular Collateral Ligament GEODE
R Fibular Ligament GEODE""".split('\n')
s=set(s)
qs="""R De Me Li
Fi Colla
bow ODE
Car
Do Car
ral lar
R De Me 4
R Do Carp""".split('\n')

for q in sorted(qs):
    print "results for '{}':".format(q)
    pattern = r'.*' + re.sub(r'\W', '.*', q.strip()) + '.*'
    matches=[item for item in s if re.match(pattern, item, re.I)]
    for e in difflib.get_close_matches(q,s,3,0.33):
        if e not in matches: 
            matches.append(e)

    for i,e in enumerate(matches,1):
        print "\t{}. {}".format(i,e)
    else:
        if len(matches)==0:
            print "\tNo matches" 
```

印刷：

```
results for 'Car':
    1\. R Dorsal Carpometacarpal Ligament 2 GEODE
results for 'Do Car':
    1\. R Dorsal Carpometacarpal Ligament 2 GEODE
results for 'Fi Colla':
    1\. R Fibular Collateral Bursa GEODE
    2\. R Fibular Collateral Ligament GEODE
results for 'R De Me 4':
    1\. R Deep Transverse Metatarsal Ligament 4 GEODE
results for 'R De Me Li':
    1\. R Deep Transverse Metatarsal Ligament 4 GEODE
    2\. R Dorsal Calcaneocuboid Ligament GEODE
results for 'R Do Carp':
    1\. R Dorsal Carpometacarpal Ligament 2 GEODE
    2\. R Elbow Capsule GEODE
    3\. R Distal JointCapsule 1 GEODE
results for 'bow ODE':
    1\. R Elbow Capsule GEODE
results for 'ral lar':
    No matches 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T01:36:40.010

一个简单的 pythonic 解决方案，可以按照回答完成工作，并且*不区分大小写*：

```
import re

def search(request, base):
    pattern = r'.*' + re.sub(r'\W', '.*', request.strip()) + '.*'
    return [item for item in base if re.match(pattern, item, re.I)] 
```

基本上，我们创建了一个简单的正则表达式，它匹配任何包含请求的所有子字符串（所有由非单词字符分隔）的字符串以原始顺序匹配之前、中间和之后的任何内容。

例如，一个请求`'R De Me Li'`变成了一个模式`r'.*R.*De.*Me.Li.*'`

然后，我们*返回**所有匹配结果*的列表。由于. `re.I`_`re.match()`

然后，它按预期工作，您可以尝试使用基础：

```
>>> base = ['R Deep Transverse Metatarsal Ligament 4 GEODE',
'R Distal JointCapsule 1 GEODE',
'R Dorsal Calcaneocuboid Ligament GEODE',
'R Dorsal Carpometacarpal Ligament 2 GEODE',
'R Dorsal Cuboideavicular Ligament GEODE',
'R Dorsal Tarsometatarsal Ligament 5 GEODE',
'R Elbow Capsule GEODE',
'R F Distal JointCapsule 1 GEODE',
'R Fibular Collateral Bursa GEODE',
'R Fibular Collateral Ligament GEODE',
'R Fibular Ligament GEODE'] 
```

一些示例请求：

```
>>> search('R De Me Li', base)
['R Deep Transverse Metatarsal Ligament 4 GEODE']
>>> search('Fi Colla', base)
['R Fibular Collateral Bursa GEODE', 'R Fibular Collateral Ligament GEODE']
>>> search('bow ODE', base)
['R Elbow Capsule GEODE']
>>> search('Car', base)
['R Dorsal Carpometacarpal Ligament 2 GEODE']
>>> search('F', base)
['R F Distal JointCapsule 1 GEODE', 'R Fibular Collateral Bursa GEODE', 'R Fibular Collateral Ligament GEODE', 'R Fibular Ligament GEODE']
>>> search('F Ca', base)
['R F Distal JointCapsule 1 GEODE']
>>> search('F Co', base)
['R Fibular Collateral Bursa GEODE', 'R Fibular Collateral Ligament GEODE'] 
```

**注意：**仅当请求和项目中的顺序相同时才会匹配（即`'ode bow'`请求不匹配`['R Elbow Capsule GEODE']`，而`'bow ode'`会匹配）。

**注意：**我不认为模糊搜索在这里会有很大帮助，*至少一*开始是这样，因为它是基于距离，例如 Levenshtein 的（编辑距离），它在“Fi”和“Fibular”之间会很大（ 7 字中的 5 距离...在 35% 时我不认为匹配是个好主意...如果您非常确定请求仅包含完整的单词且可能有少量错误输入，则可以使用它）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T00:30:04.523

不是真正的“正则表达式”问题；您应该查看字符串的模糊比较，即 Levenshtein 距离或差异。

请参阅[https://stackoverflow.com/questions/682367/good-python-modules-for-fuzzy-string-comparison](https://stackoverflow.com/questions/682367/good-python-modules-for-fuzzy-string-comparison)

**编辑：**一些示例代码：

```
import Levenshtein

base_strings = [
    "R Deep Transverse Metatarsal Ligament 4 GEODE",
    "R Distal JointCapsule 1 GEODE",
    "R Dorsal Calcaneocuboid Ligament GEODE",
    "R Dorsal Carpometacarpal Ligament 2 GEODE",
    "R Dorsal Cuboideavicular Ligament GEODE",
    "R Dorsal Tarsometatarsal Ligament 5 GEODE",
    "R Elbow Capsule GEODE",
    "R F Distal JointCapsule 1 GEODE",
    "R Fibular Collateral Bursa GEODE",
    "R Fibular Collateral Ligament GEODE",
    "R Fibular Ligament GEODE"
]

def main():
    print("Medical term matcher:")
    while True:
        t = raw_input('Match what? ').strip()
        if len(t):
            print("Best match: {}".format(sorted(base_strings, key = lambda x: Levenshtein.ratio(x, t), reverse=True)[0]))
        else:
            break

if __name__=="__main__":
    main() 
```

实际输出：

```
Medical term matcher:
Match what? R De Me Li
Best match: R Deep Transverse Metatarsal Ligament 4 GEODE
Match what? Fi Colla
Best match: R Fibular Collateral Bursa GEODE
Match what? bow ODE
Best match: R Elbow Capsule GEODE
Match what? 
```

**编辑2：** “如果有多个答案，它应该显示所有” - 基础字符串都是*不同**程度*的答案。那么，问题是您要使用哪种相似性值截止值；也许像“所有答案至少与最佳匹配一样好 90%”？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T01:04:40.787

当所有粒子（输入中由空格分隔的字符串片段）出现在结果中时，以下代码假定您要考虑“匹配”。我在示例中使用了循环，但是您当然应该将其调整为使用`raw_input`.

虽然它使用正则表达式（允许多个空格），但使用的主要功能是`if particle in line`：

```
import re

entry = """R Deep Transverse Metatarsal Ligament 4 GEODE
R Distal JointCapsule 1 GEODE
R Dorsal Calcaneocuboid Ligament GEODE
R Dorsal Carpometacarpal Ligament 2 GEODE
R Dorsal Cuboideavicular Ligament GEODE
R Dorsal Tarsometatarsal Ligament 5 GEODE
R Elbow Capsule GEODE
R F Distal JointCapsule 1 GEODE
R Fibular Collateral Bursa GEODE
R Fibular Collateral Ligament GEODE
R Fibular Ligament GEODE
"""

searches = """R De Me Li
Fi Colla
bow ODE"""

for search in searches.split('\n'):
    print search, ':'
    termlist = re.split('\s', search)
    for line in entry.split('\n'):
        match = True
        for term in termlist:
            if not term in line:
                match = False
        if match:
            print '\t', line
    print 
```

# c# - 接收 HTTP 响应错误时发生错误

> ID：10924125
> 
> 赞同：1
> 
> 时间：2012-06-07T00:22:39.253
> 
> 标签：c#, .net, wcf, exception-handling

在使用 WCF 客户端进行测试时，我的 wcf 服务出现问题。当我调试时，我看到数据从函数返回，但在响应过程中出错。有人可以帮我弄清楚我错过了什么吗？

这是我的服务和配置文件：

```
public List<PO> GetAllPOs()
{
    var data = new List<PO>();
    try
    {
        var manager = new EntityReaderManager<PO>(ConfigurationManager.AppSettings("FilemakerDB"]);
        data = manager.GetEntityList();
    }
    catch (Exception ex)
    {
        ILogger logger = new Logger(typeof(FilemakerDataService)); 
        logger.Error(ex.Message);

    }

   return data;
} 
```

这是配置文件：

```
<system.serviceModel>    
    <diagnostics>
      <messageLogging logEntireMessage="true" logKnownPii="true" logMalformedMessages="true"
        logMessagesAtServiceLevel="true" logMessagesAtTransportLevel="true"
        maxSizeOfMessageToLog="2147483647" />
      <endToEndTracing propagateActivity="true" activityTracing="false"
        messageFlowTracing="true" />
    </diagnostics>

    <bindings>
    <wsHttpBinding>
      <binding name="Custom.WSHTTPBinding.Configuration" closeTimeout="10:10:00"
        openTimeout="10:10:00" receiveTimeout="10:10:00" sendTimeout="10:10:00"
        maxBufferPoolSize="655360" maxReceivedMessageSize="655360">

        <security mode="None" />
      </binding>
    </wsHttpBinding>
  </bindings>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="false" />
    <services>
      <service behaviorConfiguration="Custom.ServiceBehavior" name="AerWorldwide.Service.Web.FilemakerData.FilemakerDataService">
        <endpoint address="" binding="wsHttpBinding" bindingConfiguration="Custom.WSHTTPBinding.Configuration"
          name="Custom.WSHTTPBinding.Configuration" contract="AerWorldwide.Service.Web.FilemakerData.IFilemakerDataService">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
      </service>
    </services>
  <behaviors>
    <serviceBehaviors>
      <behavior name="Custom.ServiceBehavior">
        <serviceMetadata httpGetEnabled="true" />
        <serviceDebug includeExceptionDetailInFaults="true" />
      </behavior>
    </serviceBehaviors>
  </behaviors>    
</system.serviceModel> 
```

错误：

```
Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host.
    at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)
    at System.Net.PooledStream.Read(Byte[] buffer, Int32 offset, Int32 size)
    at System.Net.Connection.SyncRead(HttpWebRequest request, Boolean userRetrievedStream, Boolean probeRead)
Inner Exception: An existing connection was forcibly closed by the remote host
    at System.Net.Sockets.Socket.Receive(Byte[] buffer, Int32 offset, Int32 size, SocketFlags socketFlags) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T10:07:43.603

首先在您的服务上启用[跟踪](http://msdn.microsoft.com/en-us/library/ms733025.aspx)并查看异常的原因。

此外，您还可以考虑在服务器和客户端增加 ReaderQuotas，以便传递更大的数据而不会出现任何问题。示例如下所示：

```
<wsHttpBinding>
      <binding name="Custom.WSHTTPBinding.Configuration" closeTimeout="10:10:00"
        openTimeout="10:10:00" receiveTimeout="10:10:00" sendTimeout="10:10:00"
        maxBufferPoolSize="655360" maxReceivedMessageSize="655360">
         <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
              maxArrayLength="2147483647" maxBytesPerRead="2147483647"
              maxNameTableCharCount="2147483647" />
        <security mode="None" />
      </binding>
    </wsHttpBinding> 
```

我还在您的代码中看到您正在直接传递实体框架获取的对象。在某些情况下，实体框架对象不会反序列化并可能导致异常。创建一个简单的 POCO，然后填充获取的数据并返回 POCO。

# php - 为什么我不能运行两个 mysqli 查询？第二个失败

> ID：10924127
> 
> 赞同：9
> 
> 时间：2012-06-07T00:23:01.513
> 
> 标签：php, mysqli

是否有可能有两个这样的mysqli查询？

```
mysqli_query($dblink, "INSERT INTO images (project_id, user_id, image_name, date_created, link_to_file, link_to_thumbnail, given_name) VALUES ('$project_id', '$user_id', '$image_name', '$date_created', '$link_to_file', '$thumbnail', '$ImageName')");
mysqli_query($dblink, "INSERT INTO images_history (project_id, user_id, image_name, date_created, link_to_file, link_to_thumbnail, given_name, day, month, year) VALUES ('$project_id', '$user_id', '$image_name', '$date_created', '$link_to_file', '$thumbnail', '$ImageName', '$day', '$month', '$year')"); 
```

基本上我想更新我的数据库中的两个表。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-07T00:54:11.267

可以使用[mysqli_multi_query()](http://php.net/mysqli_multi_query)。

例子：

```
<?php

$mysqli = new mysqli($host, $user, $password, $database);

// create string of queries separated by ;
$query  = "INSERT INTO images (project_id, user_id, image_name, date_created, link_to_file, link_to_thumbnail, given_name) VALUES ('$project_id', '$user_id', '$image_name', '$date_created', '$link_to_file', '$thumbnail', '$ImageName');";
$query .= "INSERT INTO images_history (project_id, user_id, image_name, date_created, link_to_file, link_to_thumbnail, given_name, day, month, year) VALUES ('$project_id', '$user_id', '$image_name', '$date_created', '$link_to_file', '$thumbnail', '$ImageName', '$day', '$month', '$year');";

// execute query - $result is false if the first query failed
$result = mysqli_multi_query($mysqli, $query);

if ($result) {
    do {
        // grab the result of the next query
        if (($result = mysqli_store_result($mysqli)) === false && mysqli_error($mysqli) != '') {
            echo "Query failed: " . mysqli_error($mysqli);
        }
    } while (mysqli_more_results($mysqli) && mysqli_next_result($mysqli)); // while there are more results
} else {
    echo "First query failed..." . mysqli_error($mysqli);
} 
```

关键是，如果您想在一次调用中执行多个查询，则*必须*使用它。`mysqli_multi_query`出于安全原因，`mysqli_query`不会执行多个查询以防止 SQL 注入。

还要记住`mysqli_store_result`. `FALSE`如果查询没有结果集（哪些`INSERT`查询没有），则返回，因此您还必须检查它`mysqli_error`是否返回表示`INSERT`成功的空字符串。

请参阅：
[mysqli_multi_query](http://php.net/mysqli_multi_query)
[mysqli_more_results](http://www.php.net/manual/en/mysqli.more-results.php)
[mysqli_next_result](http://www.php.net/mysqli_next_result)
[mysqli_store_result](http://php.net/mysqli_store_result)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2019-11-09T20:09:39.137

Stack Overflow 上的一些答案是如此自相矛盾，以至于令人*震惊*。

> 关键是如果您想在一次调用中执行多个查询，则必须使用 mysqli_multi_query。**出于安全原因，mysqli_query 不会执行多个查询以防止 SQL 注入**。

它基本上说，“关键是你必须使用没有安全扣的枪支，因为普通武器不会让你一脚射中自己。所以这里是打破它的方法，现在你可以瘫痪自己一口气！”

尽管 OP 没有询问如何在一次调用中运行两个查询，尽管引用了**明确的警告**，即在一次调用中运行多个查询的能力**本质上是危险**的，但答案漫不经心地提供了规避此限制的方法。

最糟糕的是，所有这些危险而繁琐的混乱都是徒劳的。仅仅是因为**没有单一的理由在一次调用中运行多个查询。**一个一个地运行查询是一个数据库 API 的**用途**。

> 基本上我想更新我的数据库中的两个表。有一个更好的方法吗？

# 是的当然。只需使用两个准备好的查询。

```
$stmt = $dblink->prepare("INSERT INTO images 
(project_id, user_id, image_name, date_created, link_to_file, link_to_thumbnail, given_name) 
VALUES (?,?,?,?,?,?,?)");
$stmt->bind_param("ssssss", $project_id, $user_id, $image_name, $date_created, $link_to_file, $thumbnail, $ImageName);
$stmt->execute();

$stmt = $dblink->prepare("INSERT INTO images_history 
(project_id, user_id, image_name, date_created, link_to_file, link_to_thumbnail, given_name, day, month, year)
VALUES (?,?,?,?,?,?,?,?,?,?)");
$stmt->bind_param("ssssssssss", $project_id, $user_id, $image_name, $date_created, $link_to_file, $thumbnail, $ImageName, $day, $month, $year);
$stmt->execute(); 
```

它不仅更干净，而且**100% 安全，不受 SQL 注入**的影响。

如果您的查询之一失败，只需[向 mysqli 询问错误消息，然后修复错误](https://stackoverflow.com/questions/22662488/mysqli-fetch-assoc-expects-parameter-call-to-a-member-function-bind-param)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-11T06:46:34.660

> 一劳永逸！使用此函数可以在脚本中的任何位置获取无限数量的查询结果。

**功能：**

您只需将多查询的输出传递给函数，它就会返回在每个查询中找到的所有结果和错误。

```
 function loop_multi($result){
    //use the global variable $conn in this function
    global $conn;
    //an array to store results and return at the end
    $returned = array("result"=>array(),"error"=>array());
    //if first query doesn't return errors
      if ($result){
        //store results of first query in the $returned array
        $returned["result"][0] = mysqli_store_result($conn);
        //set a variable to loop and assign following results to the $returned array properly
        $count = 0;
        // start doing and keep trying until the while condition below is not met
        do {
            //increase the loop count by one
            $count++;
            //go to the next result
            mysqli_next_result($conn);
            //get mysqli stored result for this query
            $result = mysqli_store_result($conn);
            //if this query in the loop doesn't return errors
            if($result){
              //store results of this query in the $returned array
              $returned["result"][$count] = $result;
            //if this query in the loop returns errors
            }else{
              //store errors of this query in the $returned array
              $returned["error"][$count] = mysqli_error($conn);
            }
        }
        // stop if this is false
        while (mysqli_more_results($conn));
      }else{
        //if first query returns errors
        $returned["error"][0] = mysqli_error($conn);
      }
    //return the $returned array
    return $returned;
  } 
```

**用法：**

```
$query  = "INSERT INTO table1 (attribute1) VALUES ('value1');";
$query .= "INSERT INTO table2 (attribute2) VALUES ('value2');";
$query .= "SELECT * FROM table3;";

//execute query
$result = mysqli_multi_query($conn, $query);
//pass $result to the loop_multi function
$output = loop_multi($result); 
```

**输出**

$output 包括按查询排序的 2 个数组“结果”和“错误”。例如，如果您需要检查执行第三个查询时是否发生任何错误并获取其结果，您可以这样做：

```
if(isset($output['error'][2]) && $output['error'][2] !== ""){
  echo $output['error'][2];
}else{
  while($row = $output['result'][2]->fetch_assoc()) {
    print_r($row);
  }
} 
```

# ruby-on-rails - 视图中无法访问辅助方法

> ID：10924128
> 
> 赞同：0
> 
> 时间：2012-06-07T00:23:03.200
> 
> 标签：ruby-on-rails, helpers

在我看来，我有以下代码：

```
<%= gravatar_for @user %> 
```

以及我的助手中的以下代码：

```
module UsersHelper
    def gravatar_for(user)
        gravatar_id = Digest::MD5::hexdigest(user.email.downcase)
        gravatar_url = "http://gravatar.com/avatar#{gravatar_id}.png"
        image_tag(gravatar_url, alt: user.first_name.to_s + user.last_name.to_s, class: gravatar)
    end

end 
```

但是我收到一个错误：`undefined local variable or method`gravatar' for #<#:0x00000100a1cbf0>`

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T00:25:27.723

您`gravatar`在调用`image_tag`.

如果您要应用样式，请使用字符串`"gravatar"`. 否则，您需要确保方法或值`gravatar`存在/已初始化并且可用。

# iphone - 从具有 5 个组件的 UIPicker 格式化 UITextfield？

> ID：10924130
> 
> 赞同：0
> 
> 时间：2012-06-07T00:23:50.773
> 
> 标签：iphone, xcode, format

我有 1 个带有 5 个组件的 UIPicker，所有数字都是 1-9。我只希望所有 5 个组件都显示在 UITextfield 中。我觉得这方面的代码比我所拥有的要短得多：

```
NSString *result = [metricMillimeterArray objectAtIndex:[metricMillimeterPicker selectedRowInComponent:0 & [metricMillimeterPicker selectedRowInComponent:1]& [metricMillimeterPicker selectedRowInComponent:2]& [metricMillimeterPicker selectedRowInComponent:3]& [metricMillimeterPicker selectedRowInComponent:4]]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T00:46:29.270

我不知道您返回的对象是什么，但是如果

```
[metricMillimeterArray objectAtIndex:[metricMillimeterPicker selectedRowInComponent:0] 
```

命令返回字符串（一个字符长），那么您需要：

```
result = [NSString stringWithFormat:@"%d mm", 
    10000 * [metricMillimeterPicker selectedRowInComponent:0] + 
    1000 *  [metricMillimeterPicker selectedRowInComponent:1] + 
    100 *   [metricMillimeterPicker selectedRowInComponent:2] +
    10 *    [metricMillimeterPicker selectedRowInComponent:3] + 
            [metricMillimeterPicker selectedRowInComponent:4] ]; 
```

这是假设您的组件 4 是最不重要的，但是如果我弄错了那部分，则可以交换 10 的幂。

# ruby-on-rails - 为什么当我的 Rails 3.2.0 应用程序处于开发模式时，coffeescript 文件的更改没有被编译？

> ID：10924133
> 
> 赞同：3
> 
> 时间：2012-06-07T00:24:24.763
> 
> 标签：ruby-on-rails, ruby-on-rails-3, coffeescript, asset-pipeline

通常，我在开发模式下对 Rails 3.2.0 应用程序中的文件所做的任何更改都会`.js.coffee`在我刷新页面时生效。突然之间，这没有发生。如果我这样做`rake assets:precompile`，则显示更改，但如果我这样做，`rake assets:clean`它们将返回不显示。这是什么原因造成的？

编辑：重新启动服务器使更改显示。为什么这不像以前那样自动发生？

编辑：这是我的 development.rb

```
Myapp::Application.configure do
  # Settings specified here will take precedence over those in config/application.rb

  # In the development environment your application's code is reloaded on
  # every request. This slows down response time but is perfect for development
  # since you don't have to restart the web server when you make code changes.
  config.cache_classes = false

  # Log error messages when you accidentally call methods on nil.
  config.whiny_nils = true

  # Show full error reports and disable caching
  config.consider_all_requests_local       = true
  config.action_controller.perform_caching = false

  # Don't care if the mailer can't send
  config.action_mailer.raise_delivery_errors = false

  # Print deprecation notices to the Rails logger
  config.active_support.deprecation = :log

  # Only use best-standards-support built into browsers
  config.action_dispatch.best_standards_support = :builtin

  # Raise exception on mass assignment protection for Active Record models
  config.active_record.mass_assignment_sanitizer = :strict

  # Log the query plan for queries taking more than this (works
  # with SQLite, MySQL, and PostgreSQL)
  config.active_record.auto_explain_threshold_in_seconds = 0.5

  # Do not compress assets
  config.assets.compress = false

  # Expands the lines which load the assets
  config.assets.debug = true
  config.action_mailer.default_url_options = { :host => 'localhost:3000' }

  config.log_level = :warn

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T16:35:48.007

我是 Rails 的新手（嗯……我只学了不到 3 个月的编程

我猜：

您或某些安装更改了 config/application.rb 中的配置

可以签入文件吗：

是`config.assets.initialize_on_precompile`吗`false`？

更改并重`true`试。

还要检查`config.assets.compile`。是`true`吗？

您可以更改 Rails 3.2 中的默认值。所以，我建议你想想为什么会发生变化。

# javascript - 与使用 WebSockets 发送大量消息相比，发送大量消息是否有很多开销？

> ID：10924135
> 
> 赞同：7
> 
> 时间：2012-06-07T00:24:53.717
> 
> 标签：javascript, html, websocket

我知道对于 HTML 和发送数据，鼓励不经常发送大量数据，因为与标题、内容、标签、到期日期、cookie 等相关的开销。为了更好的用户体验和更少的延迟，最好发送大消息不经常比小更新频繁。

但是，WebSockets 就是这种情况吗？现在在我的网页上，我*非常*频繁地发送大量像素数据，因此客户不会遇到太多波动。但是，如果我不经常发送更新会更好吗？

我想我的问题归结为：“使用 WebSockets，不经常发送大消息比频繁发送小消息更有效吗？” 我想我听说这项技术摆脱了与发送和接收消息相关的大部分开销，因为它保持恒定的连接并且是全双工的，等等。

谢谢阅读。

编辑：帮助计算机

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T01:22:45.933

我想说的主要一点是，健谈与笨拙的接口不限于技术堆栈（WebSockets、HTTP、UDP、其他网络相关协议）。它们都具有相同的属性，并且必须以类似（如果不相同）的方式权衡许多请求与较大请求的影响。[这是一篇很棒的文章](http://shajisethu.blogspot.com/2006/01/chatty-or-chunky-interfaces.html)，可以更多地阅读该主题。

最后要注意的是，您的应用程序的性质也会最大程度地影响您的决定。实时股票交易系统将比简单的用户输入表单更健谈。

**编辑**

这是一个与 WebSocket 性能相关的类似问题：[HTTP vs Websockets 关于开销](https://stackoverflow.com/questions/5535256/http-vs-websockets-with-respect-to-overhead)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T10:17:33.473

发送大小 <=125 个八位字节有效负载的 WebSocket（客户端到服务器）消息的开销为 6 个八位字节。高达 64k 的有效载荷将是 8 个八位字节，超过 14 个八位字节。

由于 WebSocket 是基于 TCP 的协议，由于流/动态窗口大小调整，快速发送许多小消息将成批成较大大小的 TCP 段和无论如何发送的 IP 数据包。在网络上，它类似于更慢地发送大型 WS 消息。

当然，这只适用于异步发送的情况，即在发送另一条消息之前无需等待已发送消息的响应。

# python - 谷歌应用引擎数据库模型对象对象不可迭代错误

> ID：10924136
> 
> 赞同：2
> 
> 时间：2012-06-07T00:24:54.243
> 
> 标签：python, google-app-engine, google-cloud-datastore

我不知道我在 Google App Engine 中遇到以下代码错误。我想列出模型对象的所有元素。当我运行代码时，出现以下错误。谁能向我解释为什么我会收到这个错误？

**错误：**

```
Traceback (most recent call last):
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1536, in __call__
    rv = self.handle_exception(request, response, e)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1530, in __call__
    rv = self.router.dispatch(request, response)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1278, in default_dispatcher
    return route.handler_adapter(request, response)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1102, in __call__
    return handler.dispatch()
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 572, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 570, in dispatch
    return method(*args, **kwargs)
  File "C:\Users\evalentini\Desktop\Personal\Udacity Web Development Class\logintest\main.py", line 143, in get
    self.render("userlist.html", users=users)
  File "C:\Users\evalentini\Desktop\Personal\Udacity Web Development Class\logintest\main.py", line 73, in render
    self.write(render_str(template, **kw))
  File "C:\Users\evalentini\Desktop\Personal\Udacity Web Development Class\logintest\main.py", line 32, in render_str
    return t.render(params)
  File "C:\Program Files (x86)\Google\google_appengine\lib\jinja2\jinja2\environment.py", line 894, in render
    return self.environment.handle_exception(exc_info, True)
  File "C:\Users\evalentini\Desktop\Personal\Udacity Web Development Class\logintest\templates\userlist.html", line 3, in top-level template code
    {% for user in users: %}
TypeError: 'User' object is not iterable 
```

我编写了 requestHandler 对象（ListNames），它应该列出名称（下面的代码）：

**类列表名称（博客处理程序）：**

```
def get(self):
    users=User.all().get()
    self.render("userlist.html", users=users) 
```

**它使用我的用户模型：**

```
class User(db.Model):
    name=db.StringProperty(required=True)
    pwd=db.StringProperty(required=True)
    email=db.StringProperty(required=True) 
```

**和一个名为 render 的函数从 jinja 模板渲染页面：**

```
def render_str(template, **params):<br>
    t=jinja_env.get_template(template)
    <br>return t.render(params) 
```

**Jinja 模板如下：**

```
<html>

{% for user in users: %}
    <div style="{border: 1px solid; border-color: blue; padding: 1px;}">
        {{user.name}}
    </div>
{% endfor %}
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T00:44:09.823

您只获得 1 个用户

```
users=User.all().get() 
```

这将返回第一个实体

您需要使用 fetch() 来返回用户列表

```
users=User.all().fetch(1000) 
```

或传入查询，如：

```
users=User.all() 
```

最后一个不是最佳选择，因为它可能会返回太多用户，这会影响您的应用程序性能甚至更糟。

# jquery - 访问 JSON 值 jQuery

> ID：10924138
> 
> 赞同：0
> 
> 时间：2012-06-07T00:25:21.327
> 
> 标签：jquery, json

我有 JSON 像这样返回：

```
{
    "response": {
        "2012-07-01": {
            "Variations": [
                {
                    "ID": 293,
                    "InternalItemID": "xyz",
                    "RRP": "50.00",
                    "Price": "40.00",
                    "Available": 65,
                    "RedeemableDate": "2012-07-01"
                },
                {
                    "ID": 107,
                    "InternalItemID": "xxx",
                    "RRP": "50.00",
                    "Price": "10.00",
                    "Available": 15,
                    "RedeemableDate": "2012-07-01"
                },
                {
                    "ID": 200,
                    "InternalItemID": "Item name",
                    "RRP": "50.00",
                    "Price": "40.00",
                    "Available": 65,
                    "RedeemableDate": "2012-07-01"
                }
            ]
        }
    }
} 
```

我需要循环浏览它并访问各种值。

我目前正在尝试这样做：

```
var calevents = [];
$.each(data.response, function(index,item){
    calDate = index;
    child = item.Variations;
    if ($.isEmptyObject(child) == false){
        calPrice = child[0].Price;
        calID = child[0].ID;
        calAvailable = child[0].Available;
        calevents.push({
            'id': calID,
            'title': buildEventTitle(calAvailable,
                    calDate.substring(calDate.length,calDate.length-2),
                    child[0].Price, calID, child[0].RRP),
            'start': $.fullCalendar.parseDate(calDate),
            'end': $.fullCalendar.parseDate(calDate),
            'allDay': true
        });
    }
}); 
```

但我得到 child[0] is not defined 错误。

我哪里错了？

# javascript - jQuery：制作自动滚动的 Div

> ID：10924144
> 
> 赞同：0
> 
> 时间：2012-06-07T00:25:53.527
> 
> 标签：javascript, jquery, sidebar

谁能告诉我如何实现滚动“侧边栏”跟随用户滚动页面，但在到达“页脚”时停止

```
<div id="section">
    <div id="sidebar"> </div>
    <div id="hello"> </div>
</div>
<div id="footer"> </div> 
```

div 'section' 没有设定高度，这意味着只要 id 为 hello 的 div 增长，它就会增长。这意味着 'hello' 和 'section' 都没有设定高度

div 'section' 的宽度为 728，'hello' 的宽度为 400。'sidebar' 的宽度为 200。

我想要发生的是（使用jquery）当人滚动略过侧边栏时，侧边栏应该与页面一起滚动。但是侧边栏不应与页脚重叠。

因此侧边栏应该只与页面一起滚动直到 div 部分的末尾。

红色块（在我的[网站上](http://www.cyberfanatic.com/)）是要滚动的侧边栏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T02:51:48.663

像下面这样的东西应该让你开始（仅测试铬）：http: [//jsfiddle.net/MyFB9/3/](http://jsfiddle.net/MyFB9/3/)

## JS

```
var $sb = $('#sidebar'); 
var $foot = $('#footer');
var footerTop = $foot.offset().top;
$foot.html(footerTop);
$(document).scroll(function(){
    //+ 100 since the height of the sidebar is 100px

    if($(this).scrollTop() + 100 > footerTop){
        //when we get close, line up perfectly with the footer
        $sb.css({top:footerTop - 100}); 
    }else{
        //otherwise scroll with the page
        $sb.css({top:$(this).scrollTop()}); 
    }

    //Visualy display the position of the bottom edge of the sidebar
    $sb.html($sb.offset().top + 100)
}); 
```

## HTML

```
<div id="section">
    <div id="sidebar"> </div>
    <div id="hello"> </div>
</div>
<div id="footer"> </div>​ 
```

## CSS

```
#section{
 vertical-align:top;   
}
#sidebar, #hello{
 display:inline-block;
 position:relative;    
 vertical-align:top; 
 top:0px;
 left:0px;   
}
#sidebar{
 height:100px; 
 width:50px;
 background-color:red;   
}
#hello{
 height:900px; 
 width:50px;
 background-color:green;   
}
#footer{
 height:450px;
 width:100px;
 background-color:yellow;    
}
​ 
```

# actionscript - 截断 Actionscript 编号

> ID：10924146
> 
> 赞同：0
> 
> 时间：2012-06-07T00:26:25.373
> 
> 标签：actionscript

我在动作脚本中有一个数字，通过一些任意数学得出：

```
var value:Number = 45 * (1 - (1 /3));
trace(value);//30.00000000004 
```

现在，我想取这个数字的上限，除非它大于下一个较低整数的量小于某个 epsilon。在上面的例子中，我真的想四舍五入到 30，但只有在我知道我得到一个舍入错误的情况下：

```
Math.ceil(value); //I want 30, but get 31
Math.ceil(30.1);  //In this case, it's reasonable to get 31 
```

有没有一种优雅的方法来截断 actionscript 中的数字？或者轻松丢弃小于某个 epsilon 的数字的任何部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:28:29.270

这种方法对你有帮助吗？

```
var precision:int = 4;
var isActualCeilingValRequred:Boolean;
var thresholdValForCeiling:int = 100;

private function getCeilingValue(num:Number):Number
{
  var tempNum = num * Math.pow(10, precision);
  var decimalVal = tempNum % Math.pow(10, precision);

  if(decimalVal < thresholdValForCeiling) {
    return Math.floor(num);
  } else {
    return Math.Ceil(num);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T00:40:53.507

```
var value:Number = 45 * (1 - (1 /3));
trace(value);//30.00000000004

// Play with arbitraryPrecision until you are satisfied with
// the accuracy of your results
var arbitraryPrecision:int = 3;
var fixed:Number = value.toFixed(arbitraryPrecision);

trace(Math.ceil(fixed)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-22T17:24:01.103

将数字四舍五入到指定小数位数的基本方法是将数字乘以 10^DIGITS 将小数点 DIGITS 数字左移，执行四舍五入，然后除以相同的 10^DIGITS 以移动小数指向右边。

```
var value:Number = 45 * (1 - (1 / 3));
trace(value); // 30.000000000000004
trace(Math.ceil(value)); // 31
// Round the number to 13 decimal digits.
const POWER:Number = 1e13;
value = Math.round(value * POWER) / POWER;
trace(value); // 30
// Compute number's ceiling.
value = Math.ceil(value);
trace(value); // 30` 
```

它适用于您的示例，但有一个很大的问题。如果您将值更改为`450 * (1 - (1 / 3));`，您的原始问题将再次出现。现在要摆脱它，您必须四舍五入到 12 位十进制数字。基本上，双精度格式（数字）的有效位可以容纳大约 15 个有效数字。这意味着随着值增加十倍，小数点向左移动，并且您要删除的最后一个“4”位越来越接近小数点。所以代码变得更加复杂。

```
var value:Number = 450 * (1 - (1 / 3));
trace(value); // 30.000000000000004
trace(Math.ceil(value)); // 31
var exp:Number = Math.floor(Math.log(Math.abs(value)) * Math.LOG10E);
trace('exp=' + exp); // exp=2
const POWER:Number = Math.pow(10, 14 - exp);
value *= POWER;
trace(value); // 300000000000000.06
value = Math.round(value);
trace(value); // 300000000000000
value /= POWER;
trace(value); // 300 
```

如您所见，无论值的大小如何，它现在都可以工作。首先，我通过取数字绝对值的以 10 为底的对数，然后将其向下舍入来找到数字的指数。如果计算`a = value * Math.pow(10, exp);`，则值可以表示为 a * 10^b，其中 (1 ≤ |a| < 10)，称为归一化科学记数法。但这不是我们在这里所做的。现在我们知道小数点左边有多少位，我们将小数点向右移动，但不要太远，以保持一个 0 和我们想要去掉的这个错误数字，在右边小数点。因此，乘以 10^(14-exp)，四舍五入，然后除以相同的幂。

# jquery - 以垂直顺序填充 JQuery Mobile Scrollview 元素

> ID：10924149
> 
> 赞同：1
> 
> 时间：2012-06-07T00:26:48.707
> 
> 标签：jquery, jquery-mobile

我正在尝试使用 JQuery Mobile 创建一个类似于 Windows 8 开始菜单（Metro 风格）的菜单。

`Scrollview`为此，我将使用 JQuery Mobile 。（[见这个例子](http://code.jquery.com/mobile/latest/demos/experiments/scrollview/scrollview-direction.html)）

`Scrollview`按水平顺序添加元素（如下图所示）

![当前的](../Images/a028a94df41ea2953871fabe24f2ffc2.png) *上图为真实截图*

但我想将元素添加到`Scrollview`垂直顺序（如下图所示）

![目标](../Images/279d25fa50e267bc78d02e9b6df47095.png) *上图不是真的。这是我的目标。（我在 MS Paint 中创建了它：P）*

**所以，我的问题是：如何更改`Scrollview`垂直顺序的添加顺序？（如第二张图片）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:53:36.463

同意这篇[文章](https://stackoverflow.com/questions/4492678/to-swap-rows-with-columns-of-matrix-in-javascript-or-jquery)

您应该移动列表中的项目以重新排序所需的序列（例如翻译矩阵），一旦您获得了可以消除上述列表并重新创建它的内容，之后移动 jquery 将应用其效果。

我试过这个（使用你的例子，我已经在本地复制了页面），它不是很好，但你明白了。

```
<script>

$(document).ready(function(){

var arr = $.map( $(".threeByThree").children().text(), function(n){
   return n;
 });

var result = [];
var results;

while(arr.length){

    transform(arr.splice(0,8));     
}   

function transform(arr){

    var a = [
        [arr[0], arr[1], arr[2]],
        [arr[3], arr[4], arr[5]],
        [arr[6], arr[7], arr[8]]
    ],

    w = a.length ? a.length : 0,
    h = a[0] instanceof Array ? a[0].length : 0;

  if(h === 0 || w === 0) { return []; }

  var i, j, t = [];

  for(i=0; i<h; i++) {

    t[i] = [];

    for(j=0; j<w; j++) {

       t[i][j] = a[j][i];
    }
  }

results = result += t;
result += t; 

var rm = ',';

results = $.grep(results, function(value) {
  return value != rm;
});

}

$('.threeByThree').children().remove();

$.each(results, function(index, value){$('.threeByThree').append('<div class="square">'+value+'</div>');

});

});

</script> 
```

和

```
.threeByThree > .ui-scrollview-view {
    height: 300px;
    background-color: white;
} 
```

只是一个改进的测试。

# c# - 多扩展列表框选择问题

> ID：10924153
> 
> 赞同：3
> 
> 时间：2012-06-07T00:27:20.847
> 
> 标签：c#, winforms, listbox

我正在尝试使用 C# 中的多扩展 ListBox 用户控件执行以下操作。

假设我有一个项目列表框

```
item 1 
item 2 
item 3 
item 4 
item 5 
```

我选择第 1 项和第 2 项。

如果我按下`Ctrl + Down`键，列表框将更改为

```
item 3 
item 1
item 2 
item 4 
item 5 
```

现在，我让算法完美运行，但我无法保留所选项目的列表。按键后`Ctrl + Down/Up`，所有选中的项目都被移动了，但最后只选中了一个项目。

我想在按键后保留所选项目的列表。

我认为这是因为`Down/Up`MultiExtended 的 key的默认功能`ListBox`。

除了使用多重简单列表框和添加更多功能之外，还有什么方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T15:21:00.447

我用我自己的本地代码重新创建了你的问题，我遇到了同样的问题。

我发现对我来说问题在于尝试在 KeyDown 事件期间更改数据顺序。

我设法通过在 KeyDown 事件完成后处理订单更改来使其工作。

但是，我仍然需要恢复 ListBox 的选择。

这是我的代码：

```
public partial class mainForm : Form {

    delegate void noParamsDelegate();
    Stack<noParamsDelegate> methodsToCallWhenIdle = new Stack<noParamsDelegate>();

    void application_Idle( object sender, EventArgs e ) {
        if( methodsToCallWhenIdle.Count > 0 ) {
            methodsToCallWhenIdle.Pop()(); // Call the deligate at the top of the stack
        }
    }

    public mainForm() {
        InitializeComponent();

        Application.Idle += new EventHandler( application_Idle );
        bindExampleDataToListBox();
        listBox.KeyDown += new KeyEventHandler( listBox_KeyDown );
    }

    ListItems boundList = new ListItems();

    void listBox_KeyDown( object sender, KeyEventArgs e ) {
        if( e.Control && methodsToCallWhenIdle.Count == 0 ) {
            if( e.KeyCode == Keys.Down ) {
            copyOfSelectedItems = createCopyOfSelectedItems();
                methodsToCallWhenIdle.Push( moveSelectedDown );
            }
            if( e.KeyCode == Keys.Up ) {
                copyOfSelectedItems = this.createCopyOfSelectedItems();
                methodsToCallWhenIdle.Push( moveSelectedUp );
            }
        }
    }

    List<ListItem> copyOfSelectedItems = new List<ListItem>();
    void moveSelectedDown() {
        if( copyOfSelectedItems.Count > 0 ) {
            boundList.MoveDown( copyOfSelectedItems );
            restoreSelection( copyOfSelectedItems );
        }
    }
    void moveSelectedUp() {
        if( copyOfSelectedItems.Count > 0 ) {
            boundList.MoveUp( copyOfSelectedItems );
            restoreSelection( copyOfSelectedItems );
        }
    }

    void restoreSelection( List<ListItem> selectedItems ) {
        foreach( ListItem item in selectedItems ) {
            listBox.SetSelected( listBox.Items.IndexOf( item ), true );
        }
    }

    List<ListItem> createCopyOfSelectedItems() {
        List<ListItem> result = new List<ListItem>();
        foreach( ListItem listItem in listBox.SelectedItems ) {
            result.Add( listItem );
        }
        return result;
    }

    void bindExampleDataToListBox() {
        BindingSource bSrc = new BindingSource();
        boundList = getExampleData();
        bSrc.DataSource = boundList;
        bSrc.Sort = "OrderValue DESC";

        listBox.DataSource = bSrc;
        listBox.DisplayMember = "TextValue";

    }

    ListItems getExampleData() {
        ListItems result = new ListItems();
        result.Add( new ListItem() { TextValue = "Item 1", OrderValue = 0 } );
        result.Add( new ListItem() { TextValue = "Item 5", OrderValue = 4 } );
        result.Add( new ListItem() { TextValue = "Item 3", OrderValue = 2 } );
        result.Add( new ListItem() { TextValue = "Item 4", OrderValue = 3 } );
        result.Add( new ListItem() { TextValue = "Item 2", OrderValue = 1 } );
        return result;

    }
} 
```

我没有包括我对 ListItems 和 ListItem 的实现，因为它们与问题无关。但是，如果您想要它们的副本，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T16:01:32.853

您没有发布任何代码，但调用`e.SuppressKeyPress = true;`应该使它工作：

```
void listBox1_KeyDown(object sender, KeyEventArgs e) {
  if (e.Control && e.KeyCode == Keys.Down) {
    e.SuppressKeyPress = true;

    if (listBox1.SelectedIndices.Count > 0 && 
        listBox1.SelectedIndices[listBox1.SelectedIndices.Count - 1] < listBox1.Items.Count-1) {

      List<int> selected = new List<int>();
      for (int i = 0; i < listBox1.SelectedIndices.Count; i++) {
        selected.Add(listBox1.SelectedIndices[i]);
      }
      listBox1.SelectedIndices.Clear();

      for (int i = selected.Count - 1; i >= 0; i--) {
        object listboxItem = listBox1.Items[selected[i] + 1];
        listBox1.Items[selected[i] + 1] = listBox1.Items[selected[i]];
        listBox1.Items[selected[i]] = listboxItem;
        listBox1.SelectedIndices.Add(selected[i] + 1);
      }
    }
  }
} 
```

# android - Android MediaRecorder 导致强制停止错误

> ID：10924154
> 
> 赞同：0
> 
> 时间：2012-06-07T00:27:35.260
> 
> 标签：android, android-2.2-froyo, android-sdcard, android-mediarecorder

> **可能重复：**
> [MediaRecorder：setCamera() - 错误相机不可用](https://stackoverflow.com/questions/4886532/mediarecorder-setcamera-error-camera-is-not-aviable)

我正在制作一个允许用户录制音频并将其保存在 SD 卡中某处的应用程序。我正在使用 MediaRecorder 来录制音频。

我正在重用 androiddevblog 网站上的一些代码，因为 stackoverflow 上的另一个用户推荐它来检查这些教程。

我的问题是，每当我单击按钮录制音频时，我都会收到一条错误消息，提示“您的应用程序已被迫停止”。我已经在下面发布了我的录制功能代码。

编辑：我解决了我原来的问题。现在，当我将 recorder.stop() 添加到我的代码中时，我得到了一个非法状态异常。我也更新了下面的代码（唯一的变化是在 startRecorder 方法中）。有任何想法吗 ？

我知道根据我的代码不会记录任何内容。我想首先确保文件被创建和保存。

```
public class MyRecorderActivity extends Activity{

private Button audio;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.questionandanswer);
....
....

 audio = (Button) findViewById(R.id.audio_recordactivity);
    audio.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {

        startRecording();

        }
    });

 } 

  private String getFilename(){
        String filepath = Environment.getExternalStorageDirectory().getPath();
        File file = new File(filepath,AUDIO_RECORDER_FOLDER);

        if(!file.exists()){
                file.mkdirs();
        }

        return (file.getAbsolutePath() + "/");
  }

 private void startRecording(){
        MediaRecorder recorder = new MediaRecorder();

        recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
        recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
        recorder.setOutputFile(getFilename());

        try {
                recorder.prepare();
                recorder.start();
        } catch (IllegalStateException e) {
                e.printStackTrace();
        } catch (IOException e) {
                e.printStackTrace();
        }

        recorder.stop();
        recorder.reset();
        recorder.release();
   }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T01:52:59.293

我解决了我的问题。我忘了添加权限！

# gwt - java.lang.NoClassDefFoundError: org/json/JSONException 尝试使用源映射时

> ID：10924158
> 
> 赞同：0
> 
> 时间：2012-06-07T00:28:29.657
> 
> 标签：gwt

期待已久的超级开发模式[来了](http://code.google.com/p/google-web-toolkit/source/detail?r=11016)，我尝试使用它。构建 GWT 主干后，我创建了一个测试应用程序并成功编译它。然后，我将其添加到模块 XML 文件中，以启用 Chrome 的 Source Maps：

```
<!-- Allows debugging without DevMode  -->
<set-property name="compiler.useSourceMaps" value="true">
   <when-property-is name="user.agent" value="safari" />
</set-property> 
```

然后我尝试编译应用程序。输出如下：

```
Compiling module com.hsi.gwt.test.sdm.Hello_sdm
   Compiling 6 permutations
      Compiling permutation 0...
      Compiling permutation 1...
      Compiling permutation 2...
      Compiling permutation 3...
      Compiling permutation 4...
      Compiling permutation 5...
      Source Maps Enabled
   Compile of permutations succeeded
Linking into /Users/bbrudnoy/Workspaces/indigo-hsi/hello-sdm/war/hello_sdm
   Invoking Linker Export CompilationResult symbol maps
      [ERROR] Failed to link
java.lang.NoClassDefFoundError: org/json/JSONException
    at com.google.gwt.thirdparty.debugging.sourcemap.SourceMapGeneratorV3.mergeMapSection(SourceMapGeneratorV3.java:243)
    at com.google.gwt.core.linker.SymbolMapsLinker.link(SymbolMapsLinker.java:299)
    at com.google.gwt.core.ext.linker.impl.StandardLinkerContext.invokeLinkForOnePermutation(StandardLinkerContext.java:372)
    at com.google.gwt.dev.Link.finishPermutation(Link.java:491)
    at com.google.gwt.dev.Link.doSimulatedShardingLink(Link.java:453)
    at com.google.gwt.dev.Link.link(Link.java:200)
    at com.google.gwt.dev.Compiler.run(Compiler.java:262)
    at com.google.gwt.dev.Compiler.run(Compiler.java:198)
    at com.google.gwt.dev.Compiler$1.run(Compiler.java:170)
    at com.google.gwt.dev.CompileTaskRunner.doRun(CompileTaskRunner.java:88)
    at com.google.gwt.dev.CompileTaskRunner.runWithAppropriateLogger(CompileTaskRunner.java:82)
    at com.google.gwt.dev.Compiler.main(Compiler.java:177)
Caused by: java.lang.ClassNotFoundException: org.json.JSONException
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 12 more 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-07T17:32:55.207

如果您使用 Maven，则将以下内容添加到您的 pom.xml 文件中。它应该可以帮助您克服这个问题。

```
<dependency>
    <groupId>org.json</groupId>
    <artifactId>json</artifactId>
    <version>20090211</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T00:48:41.100

**编辑：**这在 GWT 2.5 中已修复

这是一个已知问题：[http ://code.google.com/p/google-web-toolkit/issues/detail?id=7397](http://code.google.com/p/google-web-toolkit/issues/detail?id=7397)

作为一种快速解决方法，您可以将 gwt-servlet-deps.jar 添加到类路径中。

顺便说一句，超级开发模式会自动生成源映射，您不需要在模块中启用它们（但现在您必须启用超级开发模式并使用 xsiframe 链接器）

# python - SQLAlchemy ExecutionContext.postfetch_cols 不存在

> ID：10924160
> 
> 赞同：0
> 
> 时间：2012-06-07T00:29:06.380
> 
> 标签：python, sqlalchemy

我查看了*ExecutionContext*类下的源*sqlalchemy/engine/base.py*，它不包含记录的这个方法 postfetch_cols() 。我已经检查了 0.7.7、0.6.9 稳定版本以及 0.8 我是不是很傻并且遗漏了什么？

 *当我这样做时，还检查了该方法不存在：

```
from sqlalchemy import *
engine = create_engine('sqlite:///:memory:')
metadata = MetaData(bind=engine)
t = Table('tableName', metadata, Column('a', String), Column('b', Integer) )
t.create()
engine.execute( t.insert(), {'a':'1', 'b':2} )
res = engine.execute(text('select * from tableName'))
res.postfetch_cols() #or res.context.postfetch_cols()

# AttributeError: 'SQLiteExecutionContext' object has no attribute 'postfetch_cols' 
```

sqlalchemy 文档： [http ://docs.sqlalchemy.org/en/rel_0_7/core/connections.html?highlight=postfetch_cols#sqlalchemy.engine.base.ResultProxy.postfetch_cols](http://docs.sqlalchemy.org/en/rel_0_7/core/connections.html?highlight=postfetch_cols#sqlalchemy.engine.base.ResultProxy.postfetch_cols)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:45:01.240

postfetch_cols() 仅适用于可能已触发默认值的 INSERT 和 UPDATE 语句。当前，在不适用此集合的语句的情况下，执行上下文不采取放置空白集合（或引发错误）的步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T00:54:32.013

文档中列出的函数是复数 ( `postfetch_cols`)，但您使用的是单数 ( `postfetch_col`)。

这只是您粘贴中的错字吗？*

# ruby - 数组的笛卡尔积与自身在Ruby中没有重复

> ID：10924168
> 
> 赞同：2
> 
> 时间：2012-06-07T00:30:20.810
> 
> 标签：ruby, arrays, cartesian-product

如何在不同时包含`[object i, object j]`and的情况下对数组进行笛卡尔积`[object j, object i]`？

目前，我有

```
array = %w{a b c}
unique_combinations = array.each_with_index.to_a.product(array.each_with_index.to_a).
  find_all{|(first_object, i), (second_object, j)| i < j}.
  map{|(first_object, i), (second_object, j)| [first_object, second_object]}
unique_combinations # => [["a", "b"], ["a", "c"], ["b", "c"]] 
```

这有效，但感觉有点冗长。

我可以做

```
array = %w{a b c}
combinations = array.product(array)
unique_combinations = combinations.find_all{|first_item, second_item| array.index(first_item) < array.index(second_item)} 
```

但这感觉就像我在丢弃信息，并且只有在数组中只有独特的项目时才会起作用。

另一种方法是

```
unique_combinations = []
array.each_with_index do |first_item, i|
  array.each_with_index do |second_item, j|
    next unless i < j
    unique_combinations << [first_item, second_item]
  end
end 
```

但这感觉太迫切而不是实用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T01:44:52.740

这叫[组合](http://en.wikipedia.org/wiki/Combination)？

```
a = %w{a b c}

a.combination(2).to_a
=> [["a", "b"], ["a", "c"], ["b", "c"]] 
```

# jquery - 用于移动 Web 应用程序的 jQuery Mobile 替代品？Zepto，XUI，还有什么？

> ID：10924169
> 
> 赞同：8
> 
> 时间：2012-06-07T00:30:32.187
> 
> 标签：jquery, iphone, ios, jquery-mobile, mobile-safari

我们在专为 iOS 设备设计的 PhoneGap 应用程序中使用 jQuery Mobile。

但它需要jQuery，它非常大。

使用 JQM 的主要原因是帮助处理页面转换、事件管理（例如，绑定、实时、打开）和触摸事件。

是否有提供类似功能的 JQM 的轻量级替代品？我们知道 Zepto 和 XUI。

我们不需要接口层，因为我们自己处理它。

您对这些替代方案有何经验？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T00:14:32.230

对于基于 HTML 的应用程序，我会推荐 Backbone 和 Zepto。两者都非常轻巧，功能强大且易于学习。您可以将 Zepto 用于基于 CSS3 的动画/过渡和事件，而 Backbone 可以帮助您以合理的方式组织代码。我使用这些工具的经验主要是针对用 Javascript 编写的移动设备的游戏。虽然性能不如原生（如预期的那样），但它确实还不错......对于更传统的“商业-y”应用程序，我认为 Zepto/Backbone 是完全可行的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T18:26:03.733

最终，我们构建了页面转换和点击事件处理。超级简单，最多两个小时的工作。这对我们来说是最好的选择，因为所有其他库都提供了比我们需要的更多的东西。如果您只需要基本的页面转换和点击事件，我们建议您也采用这条路线。否则，请查看前面提到的选项。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T08:26:31.983

你可以试试[JqMobi](http://jqmobi.com/testdrive/)。没用过，你需要做 UI 繁重的工作，而且它只在 webkit 上运行，但由于你只针对 iOS，这应该没问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T17:25:25.690

跟进 butr0s - Github 上的 StanAngeloff 一年多前基于 Zepto.js 编写了 Zoey：http: [//stanangeloff.github.com/zoey/](http://stanangeloff.github.com/zoey/)

虽然它最近没有更新，但它仍然是现代移动浏览器的优秀包装器。非常快，处理页面转换（单页应用程序和通过 AJAX 检索页面内容）。它还有一个类似于 jQuery UI 的合理主题系统，您可以对其进行扩展。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-17T04:29:41.677

我已经使用 jqMobi 几个月了，它给你很大的自由来构建几乎任何东西，并且给你没有太多界限的骨干，我认真地建议它！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-01T10:39:21.100

[EnyoJS Javascript 应用程序框架](http://enyojs.com/)似乎也很有趣

# javascript - 如何从 JavaScript 文件创建导航菜单？

> ID：10924172
> 
> 赞同：0
> 
> 时间：2012-06-07T00:30:49.440
> 
> 标签：javascript, menu, nav

我找到了几篇关于这个主题的帖子，但不幸的是没有一个有效（可能是因为我遗漏了一些东西）。

我的页面包括以下内容：

```
<footer>
  <script type="text/javascript" src="/js/footer.js"></script>
</footer> 
```

`footer.js`将有一个包含一些链接的名称和目标的散列，然后遍历散列并使用此数据创建列表并将其插入到文档中。外部 JS 文件的原因是它将在站点的每个页面上使用。

这篇文章似乎很相似：[如何在 JavaScript 中动态创建无序列表？](https://stackoverflow.com/questions/7677028/how-can-i-dynamically-create-an-unordered-list-in-javascript)

但是当我尝试发布的解决方案时，我在浏览器中没有输出。

如果我不必在页面中实际写出列表的 HTML，我愿意使用现有脚本来创建菜单（即，如果我可以在 footer.js 中创建列表的结构，然后使用另一个脚本，如 tinynav.js）。

# python - 如何使用 QStyledItemDelegate 仅绘制背景而不覆盖文本？

> ID：10924175
> 
> 赞同：3
> 
> 时间：2012-06-07T00:31:52.547
> 
> 标签：python, qt, delegates, background, paint

我应该如何使用委托仅更改树项的背景颜色？

如果不在文本上绘画，我无法弄清楚如何做到这一点。换句话说，当我使用下面的代码时，颜色会绘制在文本之上。文字*在*背景下...

```
def paint(self, painter, option, index):
    MyDelegate.paint(self, painter, option, index)

    painter.save()

    # set background color
    painter.setPen(QPen(Qt.NoPen))
    if self.item.is_set and option.state & QStyle.State_Selected:
        painter.setBrush(QBrush(QtGui.QColor(100, 200, 0, 200)))
    else:
        painter.setBrush(QBrush(Qt.NoBrush))

    painter.drawRect(option.rect)

    painter.restore() 
```

我想尽可能多地继承。

...

关于评论，我尝试应用答案“[将颜色设置为 QTableView 行](https://stackoverflow.com/questions/10219739/set-color-to-a-qtableview-row)”......但我似乎无法让它在 Python 中工作。我不确定 optionV4.backgroundBrush() 的效果如何。该选项是否通过引用使用，以便应该在没有返回值的情况下使用此更改？

（这些在没有覆盖的情况下使用`paint`）

```
def initStyleOption(self, option, index):
    print("initStyleOption...")
    MyBaseDelegate.initStyleOption(self, option, index)

    optionV4 = QtGui.QStyleOptionViewItemV4(option)
    optionV4.backgroundBrush = QBrush(QtGui.QColor(100, 200, 100, 200)) 
```

我也试过这个：

```
def initStyleOption(self, option, index):
    MyBaseDelegate.initStyleOption(self, option, index)
    option.backgroundBrush = QBrush(QtGui.QColor(100, 200, 100, 200)) 
```

...和这个：

```
def initStyleOption(self, option, index):
    option.backgroundBrush = QBrush(QtGui.QColor(100, 200, 100, 200))
    MyBaseDelegate.initStyleOption(self, option, index) 
```

根据文档，这不应该返回任何东西，所以我假设选项是通过引用传递的，这是有道理的。

我找到了另一个例子，它有效（虽然我没有试图理解它）

```
def paint(self, painter, option, index):
    option = QtGui.QStyleOptionViewItemV4(option)  # Needed for "widget"
    self.initStyleOption(option, index)  # <--- I did not override this

    option.backgroundBrush = QBrush(QtGui.QColor(100, 200, 100, 200))
    option.widget.style().drawControl(QStyle.CE_ItemViewItem, option, painter)

    ColumnBaseDelegate.paint(self, painter, option, index) 
```

...但是背景颜色被选择颜色覆盖。由于我试图在选择项目时更改背景颜色，所以这是一个问题。是否有不同的画笔或方法来处理选择颜色？我需要某些类型的物品是不同的颜色。

我尝试了在绘制我自己的背景之前演示反转选择状态的答案，但由于某种原因它为我绘制了一个空背景。把它涂在油漆上虽然有效......

```
def paint(self, painter, option, index):

    if option.state & QStyle.State_Selected:
        option.state &= ~QStyle.State_Selected  # Invert state

        # This "cast", which is needed to get option.widget, seems to be
        #   needed for backgroundBrush as well.
        option = QtGui.QStyleOptionViewItemV4(option)  # Cast for widget
        option.backgroundBrush = QBrush(QColor(100, 200, 100, 200))

        option.widget.style().drawControl(QStyle.CE_ItemViewItem, option, painter)

    super(MyDelegate, self).paint(painter, option, index) 
```

我不明白为什么，所以我现在不会将它添加到答案中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T01:31:36.373

要覆盖所选项目的背景颜色，您可以禁用`initStyleOption`. 例如：

```
import sys
from PyQt4.QtCore import *
from PyQt4.QtGui import *

class SelectionColorDelegate(QStyledItemDelegate):
        def __init__(self, parent):
        super(SelectionColorDelegate, self).__init__(parent)

    def initStyleOption(self, option, index):
        # let the base class initStyleOption fill option with the default values
        super(SelectionColorDelegate,self).initStyleOption(option, index)
        # override what you need to change in option
        if option.state & QStyle.State_Selected:
            option.state &= ~ QStyle.State_Selected
            option.backgroundBrush = QBrush(QColor(100, 200, 100, 200))

if __name__ == "__main__":
    app = QApplication(sys.argv)    
    treeWidget = QTreeWidget()
    treeWidget.setColumnCount(2)
    for i in range(5):
        item = QTreeWidgetItem(["Item %d"%i, "data" ])
        treeWidget.addTopLevelItem(item)
        for j in range(3):
            subItem = QTreeWidgetItem(["SubItem %d, %d"%(i,j), "subdata"])
            item.addChild(subItem)
        treeWidget.expandItem(item)

    treeWidget.setItemDelegate(SelectionColorDelegate(treeWidget))    
    treeWidget.show()   

    app.exec_()
    sys.exit() 
```

显然，背景也是在调用`QTreeView.drawRow`委托`paint`函数之前绘制的，因此对于缩进的项目，该背景的一部分保持默认颜色。

# shopify - 修改fulfillment.tracking_url 变量？

> ID：10924181
> 
> 赞同：1
> 
> 时间：2012-06-07T00:32:22.413
> 
> 标签：shopify

作为我正在构建的 Shopify 应用程序的一部分，我想修改`fulfillment.tracking_url`电子邮件变量。

具体来说，当客户通过电子邮件发送他们的跟踪号时，我想更改默认运营商的跟踪 URL，以便所有跟踪链接都是这种格式：

`http://example-store.myshopify.com/tools/track?n=1Z18E08VYW76416035`

那可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T12:35:41.097

目前这是不可能的，但这是 Shopify 正在考虑提供的东西。一旦发布，我们将通过即将发布的 Shopify 开发人员时事通讯和[@shopifyapi 通知](http://twitter.com/shopifyapi)您。

# jquery - jquery 总结了两个不同的值，但是如何？

> ID：10924182
> 
> 赞同：0
> 
> 时间：2012-06-07T00:32:34.757
> 
> 标签：jquery, json, sum

我很难对两种不同的值求和。我有一个从 json 请求中获得的值，如下所示：

```
function bakVormShipping(targetClass){
  $.getJSON('http://shop.com/cart/?format=json', function(data){
    $.each(data.cart.shipping.methods, function(index, methods){
      if (index == "core|10292|40695" || index == "core|10292|40693" || index == "core|10292|40718"){
        $('<strong/>').html('€' + (+methods.price.price_incl).toFixed(2)).appendTo(targetClass); // this is value 1
      }
    });
  });
} 
```

另一个值位于 html 页面中某处的 div 中，如下所示：

```
<div class="total">Totaal (incl.btw):
  <span class="grandTotal">
    {{ page.cart.total.price | money }} // this is value 2
  </span>
</div> 
```

甚至可以将这两个值相加吗？如果是这样，有人可以给我一些例子或一些指导吗？我用 parseFloat 等尝试了很多东西，但它什么都不返回，NaN 或未定义。所以一些帮助更受欢迎:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T01:01:23.820

请不要在客户端进行价格计算（“永远不要相信客户端”，因为它们可能会被黑客入侵。因此，您最终会在客户端和服务器端复制代码）。

相反，请考虑使用 Ajax 回调服务器以进行重新计算，并根据需要更新网页。

[http://en.wikipedia.org/wiki/Ajax_](http://en.wikipedia.org/wiki/Ajax_(programming) （编程）

[http://api.jquery.com/category/ajax/](http://api.jquery.com/category/ajax/)

如果服务器当前没有执行您需要的所有计算，解决问题的唯一安全方法是修改服务器代码。

# django - 如何在 django 中获取 latin1 cookie 的值？

> ID：10924183
> 
> 赞同：0
> 
> 时间：2012-06-07T00:32:55.377
> 
> 标签：django, cookies, character-encoding, wsgi

我需要获取以 latin1 编码的 cookie 的值；只是 using`request.COOKIES['cookiename']`在第一个 hibit 字符处截断它（大概是因为从那时起它不是有效的 utf8）。

我在 mod_wsgi 下运行 django；cookie 由不运行 python 且无法轻易更改的不同服务器设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T02:22:02.360

您可以使用 访问原始 cookie 标头`request.META["HTTP_COOKIE"]`，然后使用[`Cookie`](http://docs.python.org/library/cookie.html)库对其进行解析。

例如：

```
>>> import Cookie
>>> x = Cookie.SmartCookie()
>>> x.load(request.META["HTTP_COOKIE"])
>>> x['spam']
<Morsel: foo='eggs'> 
```

# html - CSS 宽度和边距百分比不符合我的要求

> ID：10924192
> 
> 赞同：0
> 
> 时间：2012-06-07T00:34:25.053
> 
> 标签：html, css

```
<html>
<head>
<style>
html, body {
background-color: red;
height: 100%;
width: 100%;
overflow: hidden;
}
* { margin: 0; padding:0; }
.topbar {
   min-width: 100%;
   min-height: 50%;
   background-color: green;
}
.fill {
  min-width: 100%;
  min-height: 50%;
  background-color: white;
}
.container {
  min-width: 100%;
  min-height: 50%;
  background-color: blue;
}
</style>

</head>
<body>
<div class="topbar">
  "topbar
  <div class="fill">
    "fill"
    <div class="container">
     "container" 
    </div>
  </div>
</div>
</body>
</html> 
```

为什么“填充”没有在屏幕上占据其包含元素“顶栏”的全部 50%？

为什么“容器”没有在屏幕上占据完整 50% 的包含元素“填充”？

单独的问题：我的目标是创建一个可以适应*几乎*所有桌面/笔记本电脑屏幕的布局。我现在不关注手机屏幕布局。我正在尝试将宽度和高度用作布局的百分比。请建议这是否是正确的方法或向我指出替代方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T00:55:13.600

因为身体的高度是不确定的。你需要一个父dom

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T00:55:35.617

当您对高度和宽度使用百分比时，父元素必须具有特定的像素大小......

在这种情况下，“topbar”类的大小应该以像素为单位

# c - 减少 C 中的 If 语句

> ID：10924194
> 
> 赞同：1
> 
> 时间：2012-06-07T00:34:46.303
> 
> 标签：c, optimization, if-statement

我试图计算我的四个变量中有多少大于 0，所以我写了这些 if 语句来实现我的目的。所有数字将为正数或 0：

```
 if(a1>0){counter++;}
            if(a2>0){counter++;}
            if(a3>0){counter++;}
            if(a4>0){counter++;}

            printf("%d", counter); 
```

很明显，如果要增加变量的数量，我会遇到一些麻烦。有没有更有效的方法来写这个？

感谢您花时间帮助我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T00:48:17.720

如果你正在寻找一个单一的声明，

```
 counter+= (a1>0) + (a2>0) + (a3>0) + (a4>0); 
```

应该做。如果您决定将数据打包到数组中，

```
#define SIZE(x) (sizeof(x)/sizeof*(x))
int x, a[4];
for(x=0; x<SIZE(a); x++)
    counter += (a[x]>0); 
```

仍然相当紧凑。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-07T00:38:29.187

从根本上说，您必须告诉编译器要检查哪个内存地址，以及将结果放在哪里。

如果您有很多局部变量，您可能需要考虑使用数组或类似的数据结构来保存它们，而不是大量单独声明的变量。在这种情况下，您也可以定义一个数组来保存计数器结果，并使用循环构造。

如果你没有大量的局部变量，我怀疑你当前的方法和它一样好（你可以通过在数组中放置一个指向每个变量的指针然后使用循环来获得幻想，但数组初始化将在至少与当前`if`声明一样繁琐）。

如果命名，我不会更改您的程序逻辑以使用数组，单个变量更自然。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-07T00:43:43.600

如果你只是使用一个数组呢？像这样：

```
int a[4];
int counter;
int i; // iterator
for(i=0;i<4;i++){
    if(a[i]>0){
        counter++;
    }
}
printf("%d", counter); 
```

那将是更快、更短的代码，但如果你必须有单独的变量，你的方法会尽可能高效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T00:36:53.167

使用数组而不是单独的变量。然后只需循环遍历数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T00:41:48.657

如果所有变量都属于同一类型，则可以将指向它们的指针存储在数组中，并使用循环来检查和递增计数器。

# jquery - 单击时选择背景颜色

> ID：10924201
> 
> 赞同：0
> 
> 时间：2012-06-07T00:35:43.603
> 
> 标签：jquery

如果我有一个带有指定背景颜色的内联样式的 div，如何使用 jQuery 获取单击时的颜色值？

```
$(".myDiv").click(function(){
   var myColor = $(this)....
});

<div class="myDiv" style="background-color:#8080C0"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T00:36:52.013

```
$(this).css('background-color') 
```

[http://jsfiddle.net/zerkms/eWWXT/](http://jsfiddle.net/zerkms/eWWXT/)

# php - json_encode 不会编码法语字符

> ID：10924207
> 
> 赞同：2
> 
> 时间：2012-06-07T00:36:21.433
> 
> 标签：php, json, encoding, utf-8

我正在尝试使用法语字符。*无论出于何种原因，除非我强制使用 ISO-8859-1 字符集（我真的*不想这样做），否则 PHP 不会正确输出它们；它不会让我使用 UTF-8。

因此`print_r()`，当我强制执行 ISO-8859-1 时，执行我的数组会产生以下结果：

```
Array
(
[0] => stdClass Object
    (
        [language] => fr
        [langselect] => î
        [s1next] => Prochain
        [hascodespan] => Avez-vous déjà un code d'enregistrement?
        [s2prev] => Précédent
        [s2next] => Oui, j'ai déjà un code.
        [ecodedescription] => Un E-Code vous donne un accès exclusif à des événements vraiment cool. Si vous êtes dans le besoin d'un code, vous pouvez en acheter un dans notre boutique en ligne en visitant ce lien <a href="#"> boutique en ligne</ a>.
        [purchase] => Cliquez ici pour acheter en ligne billets
        [ecodespan] => S'il vous plaît entrer votre e-code
        [ecodelocdescription] => Votre code peut être trouvé ci-dessous le code à barres sur votre billet
        [s3prev] => Précédent
        [s3next] => Prochain
        [validationtext] => Validation E-Code ... Un instant.
    )

) 
```

使用 UTF-8 时，输出如下：

```
Array
(
[0] => stdClass Object
    (
        [language] => fr
        [langselect] => �
        [s1next] => Prochain
        [hascodespan] => Avez-vous d�j� un code d'enregistrement?
        [s2prev] => Pr�c�dent
        [s2next] => Oui, j'ai d�j� un code.
        [ecodedescription] => Un E-Code vous donne un acc�s exclusif � des �v�nements vraiment cool. Si vous �tes dans le besoin d'un code, vous pouvez en acheter un dans notre boutique en ligne en visitant ce lien <a href="#"> boutique en ligne</ a>.
        [purchase] => Cliquez ici pour acheter en ligne billets
        [ecodespan] => S'il vous pla�t entrer votre e-code
        [ecodelocdescription] => Votre code peut �tre trouv� ci-dessous le code � barres sur votre billet
        [s3prev] => Pr�c�dent
        [s3next] => Prochain
        [validationtext] => Validation E-Code ... Un instant.
    )

) 
```

在这两种情况下，执行 a 都会`json_encode()`产生以下结果：

```
[
    {
        language: "fr",
        langselect: null,
        s1next: "Prochain",
        hascodespan: null,
        s2prev: null,
        s2next: null,
        ecodedescription: null,
        purchase: "Cliquez ici pour acheter en ligne billets",
        ecodespan: null,
        ecodelocdescription: null,
        s3prev: null,
        s3next: "Prochain",
        validationtext: "Validation E-Code ... Un instant."
    }
] 
```

我将我的数据库设置为 UTF-8，但由于某种奇怪的原因，每次我插入任何带有法语字符的内容时，它都会将自身恢复为某种西欧编码。

主要是，我确实需要`json_encode()`返回有效结果，以便在翻译中使用它。我试过`iconv()`and `utf8_encode()`，但无济于事。

任何帮助将*不胜*感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T00:49:07.710

除了数据库编码，请务必检查以下内容：

*   文件的 utf8 编码 (js/php)
*   utf8 html内容：`<meta HTTP-EQUIV="content-type" CONTENT="text/html; charset=utf-8">`
*   您的数据库连接的utf8： `SET character_set_connection = 'utf8'`
*   你的mysql表的utf8：`ALTER TABLE table CONVERT TO CHARACTER SET utf8;`
*   您的查询结果的 utf8 格式：`SET character_set_results = 'utf8'`
*   您的数据库客户端的utf8：`SET character_set_client = 'utf8'`
*   您的数据库服务器的utf8：`SET character_set_database = 'utf8'`和`SET character_set_server = 'utf8'`
*   在某些情况下，当硬编码值需要编码时，必须在文件中强制使用 utf8。例如，您需要在 php/js/xml 文件顶部添加注释，使用`charset=utf-8`, 以便超编辑或您喜欢的编辑器可以检测到它。

rgds。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T00:55:51.150

基本的; 你的 .php 文件在上面吗？

**header("内容类型：文本/html；charset=utf8\n");**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T23:46:48.633

我设法弄清楚了。这不是我真正想要的解决方案，但它确实有效。我不得不调整我的查询看起来像：

```
CONVERT(CAST(langselect as BINARY) USING latin1) as langselect 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T16:56:21.267

尝试直接在 utf8 中处理源代码。

我遇到了同样的问题，并使用了这个简单的解决方案：当您创建一个新的 PHP 或 Javascript 源文件时，确保它以 utf8 编码。我使用 Ultra Edit，并选择了“UTF8 no bom”选项。这个简单的步骤解决了我编码字符的所有问题。

所有现代浏览器都支持 utf8，因此请使用此编码您的网页。为了兼容性，如果您的所有源文件也都是 utf8 格式会更简单。

这遵循网络标准。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T01:24:25.777

我遇到了同样的问题，但我建议：

```
$array = htmlentities($array);
$json = json_encode($array); 
```

# twitter-bootstrap - 引导图像库

> ID：10924208
> 
> 赞同：1
> 
> 时间：2012-06-07T00:36:24.773
> 
> 标签：twitter-bootstrap

我开始使用引导 CSS 框架。有一些类可以构建一个图像库，它基本上在图片周围绘制一个框架，由一个列表项、一个锚点和图像组成。如果图像大小不同，画廊看起来不太好。我的想法是为每个缩略图设置一个固定的宽度和高度，并将图像置于边框的中心。这不知何故不起作用。缩略图始终连接到框架的顶部。

```
<ul class="thumbnails" id="ulthumbs">
<li>
    <a class="thumbnail" style="width:120px; height:120px; line-height:120px;" >
        <img src="http://placehold.it/350x150" style="width:120px; height:84px; vertical-align:middle">
    </a>
</li>
</ul> 
```

想法？

最好的，伯恩哈德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T01:15:48.300

除了使用表格之外，没有跨浏览器的方法可以在没有 Javascript 的情况下垂直对齐未知高度的项目。

[jQuery 垂直对齐插件](http://seodenver.com/simple-vertical-align-plugin-for-jquery/)

在你的情况下，你会给列表项一个固定的高度，并使用插件来对齐锚点（这需要设置为块级元素）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T20:55:57.717

没有 JS 的另一种解决方案是设置列表项和锚点的宽度和高度，并将图像设置为位置 50% 50% 的锚点的背景。

这样，如果图像大于持有人，将被裁剪或显示有边框。

希望这会帮助寻找类似解决方案的人。

# php - 在 PHP 中合并但跳过数组值

> ID：10924209
> 
> 赞同：2
> 
> 时间：2012-06-07T00:36:25.923
> 
> 标签：php, arrays

我如何组合两个数组，它应该像下面的例子一样排序？

我想拿这几个数组：

```
Array
(
    [0] => Array
        (
            [0] => ZE
            [1] => CD
            [2] => 97
        )

    [1] => Array
        (
            [0] => ZE
            [1] => CD
            [2] => 1908923
        )

    [2] => Array
        (
            [0] => ZD
            [1] => CD
            [2] => 23
        )

) 
```

我希望它应该是这样的：

```
Array
(
    [0] => Array
        (
            [ZE] => Array
                (
                    [0] => Array
                        (
                            [0] => CD
                            [1] => 97
                        )

                    [1] => Array
                        (
                            [0] => CD
                            [1] => 1908923
                        )
                )
        )

    [1] => Array
        (
            [0] => ZD
            [1] => CD
            [2] => 23
        )

) 
```

我试图做一些循环，但没有结果，请帮忙

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T01:10:08.800

像这样的东西...

```
$array = array(
    array(
        "ZE",
        "CD",
        97
    ),
    array(
        "ZE",
        "CD",
        1908923
       ),
    array(
        "ZD",
        "CD",
        23
    )
 );

 $result = array();
 $search = 'ZE';

 foreach($array as $elem){
     if(($key = array_search($search, $elem)) !== false){
         unset($elem[$key]);
         $result[0][$search][] = $elem;
     } else {
         $result[] = $elem;
     }
 }

 print_r($result); 
```

不确定您希望生成的数组是什么样子，但这里是`$search`一个数组示例：

```
 $result = array();
 $search = array('ZE', 'ZD', 'ZI');

 foreach($array as $elem){
     $key = false;
     foreach($search as $s){
         if(($key = array_search($s, $elem)) !== false){
             break;
         }
     }
     if($key !== false){
         unset($elem[$key]);
         $result[0][$s][] = $elem;
     } else {
         $result[] = $elem;
     }
 }

 print_r($result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T00:57:02.477

```
$array = array(
  array(
    "ZE",
    "CD",
    97
  ),
  array(
    "ZE",
    "CD",
    1908923
  ),
  array(
    "ZD",
    "CD",
    23
  )
);

$new_array = array();
$i = 0;
$ix = 1;
foreach($array as $var){
  if($var[0]=='ZE'){
    $new_array[0]['ZE'][$i][0] = 'CD';
    $new_array[0]['ZE'][$i][1] = $var[2];
    $i++;
  }else{ 
    $new_array[$ix][0] = 'ZD';
    $new_array[$ix][1] = 'CD';
    $new_array[$ix][2] = $var[2];
    $ix++;
  }
}

var_dump($new_array); 
```

# google-app-engine - pm.makePersistent() 上出现 NullPointerException 的原因

> ID：10924210
> 
> 赞同：1
> 
> 时间：2012-06-07T00:36:37.267
> 
> 标签：google-app-engine, nullpointerexception, jdo, junit4, datanucleus

我对此越来越绝望。使用 JDO 使用 Google App Engine 建模简单的一对多关系。我有一堂课在 basic 中“有”几种其他子类`java.util.Set<ThatOtherClass>`。但是有一个令人困惑的部分：我有一个非常复杂的类，其中包含很多方法、一些静态字段和方法，当添加到 Set 中的父类时表现良好。但是，然后，当我尝试添加一个新的相关类时，它只是无法坚持在 JUnit 4 测试中，使用所有本地数据存储帮助器来设置环境（正常工作，与其他类一起测试）。这是堆栈跟踪：

```
java.lang.NullPointerException
at org.datanucleus.store.mapped.mapping.PersistenceCapableMapping.postInsert(PersistenceCapableMapping.java:1039)
at org.datanucleus.store.appengine.DatastoreRelationFieldManager.runPostInsertMappingCallbacks(DatastoreRelationFieldManager.java:218)
at org.datanucleus.store.appengine.DatastoreRelationFieldManager.access$200(DatastoreRelationFieldManager.java:49)
at org.datanucleus.store.appengine.DatastoreRelationFieldManager$1.apply(DatastoreRelationFieldManager.java:117)
at org.datanucleus.store.appengine.DatastoreRelationFieldManager.storeRelations(DatastoreRelationFieldManager.java:82)
at org.datanucleus.store.appengine.DatastoreFieldManager.storeRelations(DatastoreFieldManager.java:959)
at org.datanucleus.store.appengine.DatastorePersistenceHandler.storeRelations(DatastorePersistenceHandler.java:585)
at org.datanucleus.store.appengine.DatastorePersistenceHandler.insertPostProcess(DatastorePersistenceHandler.java:320)
at org.datanucleus.store.appengine.DatastorePersistenceHandler.insertObjects(DatastorePersistenceHandler.java:272)
at org.datanucleus.store.appengine.DatastorePersistenceHandler.insertObject(DatastorePersistenceHandler.java:256)
at org.datanucleus.state.JDOStateManagerImpl.internalMakePersistent(JDOStateManagerImpl.java:3185)
at org.datanucleus.state.JDOStateManagerImpl.makePersistent(JDOStateManagerImpl.java:3161)
at org.datanucleus.ObjectManagerImpl.persistObjectInternal(ObjectManagerImpl.java:1298)
at org.datanucleus.ObjectManagerImpl.persistObject(ObjectManagerImpl.java:1175)
at org.datanucleus.jdo.JDOPersistenceManager.jdoMakePersistent(JDOPersistenceManager.java:669)
at org.datanucleus.jdo.JDOPersistenceManager.makePersistent(JDOPersistenceManager.java:694)
at mypackage.MyTests.myTest(MyTests.java:59)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

异常是从我调用的行中抛出的`pm.makePersistent(parentObject)`，对象本身已正确初始化，因为我注意到仅简单地添加`@Persistent(mappedBy = "foreign_key") private OtherClass otherClassObject;`会使该行上的单元测试失败，删除它会使它再次通过。

我还尝试重写另一个类（仍然失败），甚至只是复制粘贴工作子类的代码（令人惊讶地没有失败）。这一切都让我想知道：对于我可以在 Set 而不是另一个中使用的更复杂的子类，可能会有什么不同？

是的，我关注了 JDO 2.3（拥有一对多）的[https://developers.google.com/appengine/docs/java/datastore/jdo/relationships 。](https://developers.google.com/appengine/docs/java/datastore/jdo/relationships)

我只剩下一些可能导致问题的怀疑，其中之一是 DataNucleus 增强器的一些陈旧缓存（我仍然使用带有 DataNucleus 1.1 的旧 1.0 插件）。此外，我不确定问题出在目标类还是父类，但更复杂的子类使用完全相同的关系定义，所以这让我认为它是目标子类。调用时关系`pm.makePersistent()`的值是什么无关紧要，因为无论其中的值是什么都会发生异常-我尝试了很多次。如果它可能是一些脏缓存，如何清除它？我什至找不到 DataNucleus 日志。

更简单的非工作子类看起来基本上是这样的，因为我需要确定问题出在哪里（并且对自己没有多大帮助），所以剥离了所有数据：

```
import javax.jdo.annotations.IdGeneratorStrategy;
import javax.jdo.annotations.IdentityType;
import javax.jdo.annotations.PersistenceCapable;
import javax.jdo.annotations.Persistent;
import javax.jdo.annotations.PrimaryKey;
import javax.jdo.annotations.Version;
import javax.jdo.annotations.VersionStrategy;

import com.google.appengine.api.datastore.Key;

@PersistenceCapable(identityType = IdentityType.APPLICATION)
@Version(strategy = VersionStrategy.VERSION_NUMBER)
public class TestChild
{
    @PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    private Key id;

    @Persistent
    private Parent parent;

    public void setParent(Person parent)
    {
        this.parent = parent;
    }

    public Parent getParent()
    {
        return this.parent;
    }
} 
```

而关系另一边的字段：

```
@Persistent(mappedBy = "parent")
private Set<TestChild> testChildren; 
```

有人可以帮我吗？我花了几个小时在这上面:-(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T08:44:35.503

与您发布的内容不完全相同，但此问题 [http://code.google.com/p/datanucleus-appengine/issues/detail?id=165](http://code.google.com/p/datanucleus-appengine/issues/detail?id=165) 具有相同的异常并已在新插件（v2.0+ ) 于 2011 年 9 月。

# iphone - NSMutableArray 如何指定路径

> ID：10924214
> 
> 赞同：1
> 
> 时间：2012-06-07T00:37:05.913
> 
> 标签：iphone, nsmutablearray, tweak

我正在寻找一种使用 Springboard.app 中不存在的图像填充 NSMutableArray 的方法（这是对 iPhone 的调整）

如果我写这个：

```
for (int i=startImage; i<=35; i++){

    if ((i<10)){
        [images addObject[UIImage imageNamed[NSString stringWithFormat:@"logoFlareAnim_00%i",i]];
    }
    else {
        [images addObject[UIImage imageNamed[NSString stringWithFormat:@"logoFlareAnim_0%i",i]]];
    }

} 
```

但我不能指定...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:43:32.700

在我的代码图像是 NSMutableArray 中，我的问题是：添加不在 iPhone 应用程序的文档文件夹中的路径中的图像......这是用于 MobileSubstrate 调整，解决方案是使用 ../.. 在文件系统中导航/ 转到根目录并指定路径 es：如果我在 /Library/MobileSubstrate 我使用 ../../PathOfTheImage

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T00:54:39.220

嗯，根据我的理解，您需要一种方法来使用不在应用程序中的图像填充数组...首先您必须将图像放在一个文件夹中，通常是假设 XCode 中的资源文件...然后您可以做这个

```
// unless start image is an integer u cant use this so
  int i = 0;
  UIImage *image1;  
image1 = [UIImage imageNamed: @"FOO"];
for(i=0; i<=35; i++){
 if(i<10){
 [ARRAY addObject:image1] // I would advise knowing the API of NSMutableArrays
  }
} 
```

或者你可以做

```
 int i = 0;
  UIImage *image1;
for(i=0; i<=35; i++){
 if(i<10){
[array insertObject:img1 atIndex:i]; 
```

如果您选择在索引处插入对象，请确保设置您尝试访问的对象之前的索引，否则索引将设置为 null 并引发错误。

```
 }else 
 [array insertObject :img2 atIndexi];
} 
```

或这个

```
int i = 0;
NSMutableArray *array;
array = [NSMutableArray alloc]initWithCapacity:35]
  UIImage *image1;
for(i=0; i<=[array count]; i++){
 if(i<10){
[array insertObject:img1 atIndex:i];
  }else 
 [array insertObject :img2 atIndexi];

}
} 
```

# php - 在 PHP 中存储密码的最安全方法是什么？

> ID：10924216
> 
> 赞同：0
> 
> 时间：2012-06-07T00:37:09.557
> 
> 标签：php, security, passwords

在 PHP 中存储密码最安全的方法是什么？我对在使用我的应用程序时保护我的用户非常感兴趣，我想使用最好的方式来存储他们的密码。我已经阅读了各种加密方法，如 MD5、SHA1 等。我还阅读了“盐”和哈希。有人可以告诉我在 PHP 中存储密码的最安全方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T01:04:58.680

使用任何类型的哈希存储密码不会保护您的系统，但如果您的系统受到破坏，它将阻止人们看到明文密码。安全来自良好的监控和良好的实践。

[微软](http://msdn.microsoft.com/en-us/library/ff648647.aspx)有这样的看法：

> 许多 Web 应用程序使用密码机制来验证用户身份，其中用户在 HTML 表单中提供用户名和密码。这里要考虑的问题和问题包括：
> 
> *   **用户名和密码是否通过不安全的通道以明文形式发送？**如果是这样，攻击者可以通过网络监控软件窃听以捕获凭据。这里的对策是使用安全套接字层 (SSL) 来保护通信通道。
> *   **凭证是如何存储的？**如果您以明文形式存储用户名和密码，无论是在文件中还是在数据库中，都会招来麻烦。如果您的应用程序目录配置不正确并且攻击者浏览到该文件并下载其内容或添加新的特权登录帐户怎么办？如果心怀不满的管理员拿走了您的用户名和密码数据库怎么办？
> *   **如何验证凭据？**如果唯一目的是验证用户是否知道密码值，则无需存储用户密码。相反，您可以以散列值的形式存储验证器，并在登录过程中使用用户提供的值重新计算散列。为了减轻字典攻击对凭证存储的威胁，请使用强密码并将随机生成的盐值与密码哈希结合起来。
> *   **初次登录后如何识别经过身份验证的用户？**需要某种形式的身份验证票证，例如身份验证 cookie。cookie 是如何保护的？如果它通过不安全的通道发送，攻击者可以捕获 cookie 并使用它来访问应用程序。被盗的身份验证 cookie 是被盗的登录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T01:16:24.393

在将密码存储到数据库之前，对您的密码进行扫描和加盐。在任何情况下，您都不能以纯文本形式存储密码。散列后丢弃纯密码。

还使用会话变量来存储和跟踪用户会话。不要使用 cookie，因为它们存储在浏览器中并且容易受到损害。

制定良好的密码策略。至少确保每个密码都有一个最小长度，不是字典单词，不是全数字，并且是大写和 lor 大小写的混合，中间混合了数字。等等谷歌对象密码政策会出现很多。

# c++ - 为什么私有成员变量上不允许使用 decltype？

> ID：10924217
> 
> 赞同：13
> 
> 时间：2012-06-07T00:37:09.777
> 
> 标签：c++, c++11, decltype

假设我有这样的课程：

```
class Foo
{
  std::vector<int> bar;

public:
  std::vector<int>& get_bar() { return bar; }
}; 
```

稍后，我想要另一个与`bar`. 如果我能做到这一点，这对我来说是有意义的：

```
decltype(Foo::bar) clone_of_bar; 
```

但这不起作用。编译器告诉我*'std::vector< int > Foo::bar' 是 private*。

所以我最终不得不使用这样的东西：

```
std::remove_reference<decltype(std::declval<Foo>().get_bar())>::type clone_of_bar; 
```

哪个有效，但看起来一团糟。也许有更简单的方法来做到这一点；我不太确定。但我真正想知道的是为什么我不能只使用`decltype(Foo::bar)`. 为什么有人要关心这`bar`是私人的？这不像我实际上正在访问该变量。

`decltype`是语言的一个新特性。我只是不明白为什么它被设计为不适用于私有变量。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-07T00:41:36.763

在语言律师术语中，`bar`是一个名称，要在`decltype`表达式中使用它，编译器必须进行正常的名称查找，这尊重访问控制。
为什么应该`decltype`与其他语言的设计不同？您没有提出任何令人信服的论据来说明为什么它不应该与 eg 一致`sizeof`。

作为课程作者，我不希望您能够像这样查询私有实现细节。如果我希望该类型在类之外可用，我会定义一个公共 typedef，告诉你它是什么类型。

> 稍后，我想要另一个具有相同类型的变量`bar`

您想要与私有实现细节相同类型的“另一个变量”吗？因此，如果类的作者`Foo`重构了他们的代码并用其他一些实现细节替换了类型，那么你的代码突然改变了含义并且不相关的代码可能会突然停止编译或默默地有不同的行为，因为该代码愚蠢地依赖于不属于它的私有细节商业。`Foo`这将在私有实现细节和作者可能不知道存在的无关代码之间引入耦合！这是一个可怕的想法。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-07T00:47:38.547

`decltype(Foo::bar)` **确实**在里面工作`Foo`。

在外面`Foo`，你甚至不应该*知道*有`Foo`一个名为的成员`bar`（这就是`private`意思），所以它当然不应该工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T09:56:27.207

这是 4.8.0 版中修复的 gcc 错误：

[http://gcc.gnu.org/bugzilla/show_bug.cgi?id=52816](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=52816)

# php - Google currency conversion characters not retrieved through url

> ID：10924224
> 
> 赞同：0
> 
> 时间：2012-06-07T00:38:44.550
> 
> 标签：php, codeigniter, file-io, currency

for currency conversion i have used [a link](http://www.google.com/finance/converter) and used in code $url="http://www.google.com/finance/converter?a=$amount&from=$currFrom&to=$currInto";

 `````
function getHtmlCodeViaFopen($url)

{
       $ci =& get_instance();
    $returnStr="";

    $default_currency_code=$ci->config->item('default_currency_code');

    if($default_currency_code!="USD")
    {
        $fp=fopen($url, "r") or die("ERROR: Failed to open $url for reading via this script.");
        while (!feof($fp)) {
            $returnStr.=fgetc($fp);
        }
        fclose($fp);
        return $returnStr;
    } 
````  `now the url not responding in my server but works fine in my url i used preg match to retrieve the characters from that url

It shows the die error ERROR: Failed to open [http://www.google.com/finance/converter?a=40&from=USD&to=USD](http://www.google.com/finance/converter?a=40&from=USD&to=USD) for reading via this script. Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T01:10:13.823

this happens even with this?

```
$data = file_get_contents("http://www.google.com/finance/converter?a=1&from=EUR&to=USD"); 
```

print $data to see if data has been received.

**EDITED:**

Ok, call this also. What did you get?

```
echo ini_get("allow_url_fopen"); 
`````

# java - Android使用不区分大小写的路径访问资产文件？

> ID：10924226
> 
> 赞同：3
> 
> 时间：2012-06-07T00:39:11.597
> 
> 标签：java, android, case-sensitive, case-insensitive, android-assets

我想访问Android AssetManager 类中的一些资产文件，代码在这里。

`return form.getAssets().open(mediaPath);`

form.getAssets() 返回 AssetManager 的一个实例，并且 .open(mediapath) 应该使用给定的媒体路径打开资产。但是，我的媒体路径不区分大小写，而 Android 资产文件系统区分大小写。例如，我想使用 mediapath /asset/ball.png 打开路径为 /asset/BALL.png 的资产。

解决这个问题的好方法是什么？任何的意见都将会有帮助。谢谢。

# php - 无法清理用户输入的数据

> ID：10924227
> 
> 赞同：0
> 
> 时间：2012-06-07T00:39:12.043
> 
> 标签：php, mysql, forms

我有一个脚本可以让艺术家编辑他们的个人资料。一件事被证明是一个问题。我无法清理用户输入的内容。每次将 ' 放入数据中时，都不会显示它，因为它会缩短 php。

这是我的简历表格：

```
username = $_SESSION['username'];
    $pass = $_SESSION['password']; 
   include ("../database.php");
   $result = mysql_query("SELECT * FROM members WHERE username='$username' AND     password='$pass' AND artist='Y'");

while($row = mysql_fetch_array($result)){

       echo '<div id="artistsbio"><form action="phpscripts/artistupdate.php" method="post">
       <textarea name="bio" rows="10" cols="80" name="bio" value="'. $row['bio']. '" class="bio">'. $row['bio']. '</textarea><br>
       <div id="probwarn"><t1>Everything is still in the beta stage so there are bound to be a few problems. If you spot one please <a href="mailto:artists@newbornsounds.co.uk"><b>tell us about it.</b></a></t1></div>

       </div>'; 
```

这是上传到数据库的脚本；

```
$username = $_SESSION['username']; 
    $pass = $_SESSION['password'];

     $artistname = $_POST['artistname'];
     $bio = $_POST['bio'];

include ("../database.php");
mysql_query("UPDATE members SET  bio='$bio', artistname ='$artistname'
WHERE username='$username' AND password='$pass'  AND artist='Y'");

$artisturl = mysql_query("SELECT * FROM members  
WHERE username='$username' AND password='$pass'  AND artist='Y'");

while($row = mysql_fetch_array($artisturl)){
if (isset($_POST['submit'])) {header("location:../artists/artist.php?    artist=".$row['artistname']."");}
}

}
else echo'<p1>You must be an artist to use these features.</p1>'; 
```

是的，我知道我需要升级到 mysqli，并且我知道我需要使用准备好的语句。不过需要先解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T01:03:51.090

在向数据库输入任何内容之前，只需调用它：

```
mysql_real_escape_string($YOUR_POSSIBLY_QUOTED_STRING); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:08:54.350

如果您要在 SQL 查询中使用用户输入，则需要对其进行清理。这是一个简单的例子。

```
$username = mysql_real_escape_string($_SESSION['username']); 
$pass = mysql_real_escape_string($_SESSION['password']);
$artistname = mysql_real_escape_string($_POST['artistname']);
$bio = mysql_real_escape_string($_POST['bio']);

include ("../database.php");
mysql_query("UPDATE members SET  bio='$bio', artistname ='$artistname'
WHERE username='$username' AND password='$pass'  AND artist='Y'"); 
```

# php - PHP 会话未在 Amazon EC2 上持续存在

> ID：10924228
> 
> 赞同：3
> 
> 时间：2012-06-07T00:39:14.363
> 
> 标签：php, session, amazon-ec2, amazon, persist

我目前正在开发一个在 Amazon EC2 上运行的 Facebook 应用程序。该应用程序正在运行并且大部分开发已完成，但是我们无法让会话持续存在。我们使用 PHP 会话 save_path 技巧尝试了 PHP 默认会话处理、数据库处理和内存缓存处理。我们尝试过使用 auto_start 等 ini 设置，但无济于事。

奇怪的问题是初始会话写入确实写入，但第一次之后的任何后续写入都不会保存。我们可以看到会话 cookie 持续存在，但数据的实际写入总是在第一次写入后失败。这个奇怪的问题适用于我们使用的任何会话处理程序。

我们的 EC2 设置如下：

*   开发：1 个 64 位 linux 服务器，1 个 mongodb 服务器，1 个 elasticache 集群
*   暂存：1 个 64 位 linux 服务器，1 个 mongodb 服务器，1 个 elasticache 集群
*   产品：2 个 64 位 linux 服务器和 1 个负载均衡器，3 个带有副本集的 mongodb 服务器，2 个弹性 ache 集群

会话问题在所有环境中都是可重现的。我已经没有什么想法了，因为我已经尝试了我所知道的一切以及我在谷歌搜索时发现的任何东西。

作为参考，我们使用的是 CakePHP 2.1，但也尝试过 CakePHP 之外的会话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T01:18:27.723

检查`session.save_path`你的 php.ini。

也请阅读： http: [//php.net/manual/en/function.session-save-path.php](http://php.net/manual/en/function.session-save-path.php)

此外，您可能希望发布 php.ini 的所有 session.* 部分。

# php - 密码正确，但我收到不正确的密码错误

> ID：10924231
> 
> 赞同：0
> 
> 时间：2012-06-07T00:39:19.733
> 
> 标签：php, login

这是我的脚本，无论我做什么，我都会收到错误的密码，请帮助！

```
<?php

$email = $_POST['email-field'];
$password = $_POST['password-field'];

if ($email&&$password){ 
   $connect = mysql_connect("xx","xx","xx") or die("Couldnt connect!");
   mysql_select_db(xx) or die("Couldnt find db");

   $query = mysql_query("SELECT * FROM users WHERE email='$email'");
   $numrows = mysql_num_rows($query); 
   if ($numrows!=0){
     while ($row = mysql_fetch_assoc($query)){
        $dbemail = $row['email'];
        $dbemail = $row['password'];
     }

  if ($username==$dbusername&&$md5password==md5($password)) {
      echo "You're in!";
  }else
      echo "Incorrect password";    
}
else
    die("That user doessnt exist!");
}
else
    die("Please enter a username and a password"); 

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T00:42:15.140

```
$dbemail = $row['email'];
$dbemail = $row['password']; 
```

你把这两个都称为$dbemail。在 if 语句中，您使用 $dbusername 和 $md5password。

您应该将 $row['email'] 更改为 $dbusername 并将 $row['password'] 更改为 $md5password。

```
$dbusername = $row['email'];
$md5password = $row['password']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T00:42:33.517

你从来没有定义`$dbusername`也没有`$password`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T00:43:34.663

您分配 dbemail 两次而不是 md5password。

# z3 - 列表理论是可判定的吗？

> ID：10924232
> 
> 赞同：3
> 
> 时间：2012-06-07T00:39:25.530
> 
> 标签：z3

我想知道列表的z3理论是否可判定？似乎我们只能用该理论证明不饱和但不饱和的事实，所以我很好奇它是否真的可以判定。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T01:17:41.883

在 Z3 中，当我们说一个理论是可判定的时，我们通常谈论的是无量词问题。Z3中实现的列表理论是可判定的。但是，一旦我们使用量词和未解释的函数，例如[z3 中的问题叉积](https://stackoverflow.com/questions/10642565/cross-product-in-z3)，问题就变得无法确定。Z3可以决定一些分片，但是[在z3的叉积中](https://stackoverflow.com/questions/10642565/cross-product-in-z3)描述的问题不在Z3支持的任何分片中。实际上，Z3 将无法为任何与此类似的问题构建模型。因此，它将永远运行尝试构建模型，或者将放弃返回`unknown`。结果`unknown`可能仍然有用。在某些情况下，Z3 可能会产生一个“候选模型”。也就是说，一种解释不满足您问题中的所有通用公式，但满足所有量词自由公式以及通用公式的许多实例。为此，我们必须禁用模块 MBQI。启用 MBQI 后，Z3 将继续尝试找到满足所有量词的解释。以下是我们为您做的示例：

[http://rise4fun.com/Z3/kGtk](http://rise4fun.com/Z3/kGtk)

诀窍是我在脚本开头包含的以下两个命令：

```
(set-option :auto-config false)
(set-option :mbqi false) 
```

我用这个`get-value`命令来证明 Z3 产生的解释满足`(assert (= (first (head l)) a))`. 另一方面， 的解释`append`并不真正满足这个例子中的通用公式。

# iphone - 在 UIView 之外触摸

> ID：10924233
> 
> 赞同：2
> 
> 时间：2012-06-07T00:39:42.183
> 
> 标签：iphone, objective-c, ios

```
-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
  UITouch *touch = [touches anyObject];
  NSLog(@"The tag %i",touch.view.tag);
  if( [touch.view isKindOfClass:[UIScrollView class]] ) {
    for( UIView *checkview in [self.view subviews] ) {
      if( [checkview tag] == 1 ) {
        infoIsVisibile = NO;
        [info removeFromSuperview];                         
      }
    }
  }
  [super touchesBegan:touches withEvent:event];
} 
```

有人可以帮我吗，这只会检测子视图内的触摸，而不是主视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T00:51:50.110

您可以将 UIGestureRecognizer 连接到您感兴趣的视图。

（一般来说，手势识别器是一种更强大的机制，用于检测任意视图中的触摸，并且它们可以很好地与 UIWebViews 和 UIScrollViews 等倾向于吃传统触摸事件的视图配合使用。）

这是一个片段：

```
UITapGestureRecognizer *singleFingerDTap = [[UITapGestureRecognizer alloc]
        initWithTarget:self action:@selector(handleSingleDoubleTap:)];
    singleFingerDTap.numberOfTapsRequired = 2;
    [self.theView addGestureRecognizer:singleFingerDTap];
    [singleFingerDTap release]; 
```

（此代码来自下面的链接文档——请注意 self.theView 可能是一些随机视图，存储为当前对象的成员。）

您会对手势识别器简化代码和减少怪异的程度感到惊讶（或震惊）。

这是苹果文档的链接：

[http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizers/GestureRecognizers.html](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizers/GestureRecognizers.html)

# javascript - Chrome Bug - window.scroll 方法拦截 DOM 渲染

> ID：10924234
> 
> 赞同：1
> 
> 时间：2012-06-07T00:39:43.720
> 
> 标签：javascript, dom, google-chrome, rendering, chromium

首先，使用此页面上的导航菜单（左侧）： [http ://bestds.com/TankStorage/](http://bestds.com/TankStorage/)

我正在使用 javascipt 在单击时更新这些 li 元素的 dom backgroundColor。

Firefox 渲染更新的 DOM 元素，但 Chrom 和 Chromium 不渲染它们。

使用 Chromium 的文档检查器，我可以清楚地看到 li 元素的背景颜色已正确更新，但它们没有被渲染。有趣的是，当我将光标悬停在 Chrom 文档检查器中未渲染的 html 元素上后，它会继续渲染 DOM 更改！

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:41:43.997

我想到了。Chrom 有一个渲染错误。

如果你调用一个窗口滚动函数，在你更新一些 DOM 属性之后，Chrom 不会完全渲染你所有的 DOM 修改。

为了解决这个问题，我替换了这一行：

```
window.scroll(0,docPos); 
```

有了这条线：

```
setTimeout('window.scroll(0,' + docPos + ')',1); 
```

这使 Chrom 能够在窗口滚动渲染错误阻止它之前渲染 dom 更改。

# jquery - jQuery 调用 as3 函数

> ID：10924235
> 
> 赞同：0
> 
> 时间：2012-06-07T00:39:46.067
> 
> 标签：jquery, actionscript-3, flash, function, call

**更新：已回答！**

## 6 月 7 日 - 我在下面找到了答案并接受了。我保留此代码，以便其他人可以看到我遇到了哪些问题，也许他们可以了解哪些有效，哪些无效。

* * *

**旧帖子：**

我刚刚想出了如何让 as3 调用 jQuery 函数：[as3 calling jQuery function](https://stackoverflow.com/questions/10923705/as3-calling-jquery-function)

**但现在我想知道 jQuery 如何调用 as3 函数。有什么想法吗？**

更新：尚未修复 -**我错过了什么？**

这是我的 jQuery 中的代码

```
 function BeGone()
  {
      var flash = $("#BeauFullScreen");
      flash.myFunction();
       $("#Content").show();

  } 
```

这是我在 as3 中的代码

```
import flash.external.*;
function callMe() 
{ 

    var bParts = Beau.content as MovieClip;
    bParts.Beau.BeauBody.LeftWing.gotoAndStop(1);
    bParts.Beau.BeauBody.RightWing.gotoAndStop(1);
    bParts.alpha = .5;

} 
ExternalInterface.call("myFunction", callMe); 
```

我的嵌入式 Flash 对象代码：

```
<div id="flashContentABOVE">
            <object classid="33" width="100%" height="100%" id="BeauFullScreen" align="middle">
                <param name="movie" value="BeauFullScreen.swf" />
                <param name="quality" value="best" />
                <param name="bgcolor" value="#ffffff" />
                <param name="play" value="true" />
                <param name="loop" value="true" />
                <param name="wmode" value="transparent" />
                <param name="scale" value="noscale" />
                <param name="menu" value="true" />
                <param name="devicefont" value="false" />
                <param name="salign" value="" />
                <param name="allowScriptAccess" value="sameDomain" />
                <!--[if !IE]>-->
                <object type="application/x-shockwave-flash" data="BeauFullScreen.swf" width="100%" height="100%" id="BeauFullScreen">
                    <param name="movie" value="Jesus.swf" />
                    <param name="quality" value="best" />
                    <param name="bgcolor" value="#ffffff" />
                    <param name="play" value="true" />
                    <param name="loop" value="true" />
                    <param name="wmode" value="transparent" />
                    <param name="scale" value="noscale" />
                    <param name="menu" value="true" />
                    <param name="devicefont" value="false" />
                    <param name="salign" value="" />
                    <param name="allowScriptAccess" value="sameDomain" />
                <!--<![endif]-->
                    <a href="http://www.adobe.com/go/getflash">
                        <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" />
                    </a>
                <!--[if !IE]>-->
                </object>
                <!--<![endif]-->
            </object>
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T01:55:30.097

一种简单的（非 jQuery）解决方案是在 Flash 中使用`externalInterface.addCallback`. 然后你可以从你的 jQuery/Javascript 中的任何地方调用它。请记住，您需要[指定 Flash 对象的名称和 ID，](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7cb2.html#WS5b3ccc516d4fbf351e63e3d118a9b90204-7ca7)以便 Javascript 识别它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T00:46:53.140

这是一个不错的小插件，并简要说明了如何使用它

[http://www.davecomeau.net/blog/56/jQuery+Plugin%3A+externalInterface](http://www.davecomeau.net/blog/56/jQuery+Plugin%3A+externalInterface)

我希望它有帮助！

这是一个更详细的答案：

*** 在您的 html 页面中 ***

1 创建包含 id 为“flashMovie”的 flash 的 div

2 创建一个用于测试目的的按钮单击调用外部接口（带有成功回调）

3 不要忘记将需要的引用添加到jquery、query.externalinterface.js、swfobject（应该替换为你的sw对象）

```
<script type="text/javascript" src="/javascript/jquery/jquery-1.3.2.js"></script>
<script type="text/javascript" src="/javascript/jquery/jquery.externalinterface.js"></script>
<script type="text/javascript" src="/javascript/swfobject/swfobject.js"></script> 
```

4 添加单击按钮后将调用 flash 对象的 JavaScript 函数

```
<script type="text/javascript">

swfobject.embedSWF('/flash/externalInterfaceExample.swf', 'flashMovie', '238', '155', '10.0.0');

function interfaceTest()
{
    $('#flashMovie').externalInterface({
        method:'flashMethodToCall',   // this method has to be already defined in your flash object
        args:'some arguments',
        success: function(response)
        {
            alert('flash says: ' + response);
        },
        error: function(error)
        {
            alert('error: ' + error);
        }
    });
}
 </script> 
```

*** 在你的动作脚本中 ****

```
import flash.external.*;

function someMethod() 
{ 
// Here goes your code
} 
ExternalInterface.addCallback("flashMethodToCall", someMethod); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T08:09:06.860

首先，在 JS/jQuery 代码中你需要一个小的更新：

```
function BeGone()
  {
      var flash = $("#BeauFullScreen").eq(0); //change here
      flash.myFunction();
       $("#Content").show();
  } 
```

然后在 Asctionscript 中：

```
import flash.external.*;
function callMe() 
{ 

    var bParts = Beau.content as MovieClip;
    bParts.Beau.BeauBody.LeftWing.gotoAndStop(1);
    bParts.Beau.BeauBody.RightWing.gotoAndStop(1);
    bParts.alpha = .5;

} 
ExternalInterface.addCallback("myFunction", callMe); //change here 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T00:21:45.633

**对我有用的答案！**

我必须添加 3 个重要元素！

**1）**下面是jQuery与as3通信并调用as3内部函数所需的代码行。

```
function BeGone()
{
$("#BeauFullScreen").get(0).myFunction(); /// THIS LINE WAS THE KEY!    
} 
```

**2）**我还需要添加 swfObject javascript：

```
<script> src="swfObject.js"></script> 
```

3)** 最后，我不得不用 JavaScript 嵌入我的 SWF，而不是像 Dreamweaver 在我的问题中看到的那样插入代码的方式。嵌入的 JavaScript 代码如下。

```
 <script>
    var flashvars = {
    };
    var params = {
        menu: "false",
        scale: "noScale",
        wmode: "transparent", // added this to no avail
        allowFullscreen: "true",
        allowScriptAccess: "always",
        bgcolor: "",

    };
    var attributes = {
        id:"BeauFullScreen"
    };
    swfobject.embedSWF(
        "BeauFullScreen.swf", 
        "flashContent", "100%", "100%", "10.0.0", 
        "expressInstall.swf", 
        flashvars, params, attributes);
</script> 
```

我希望这可以帮助别人。感谢大家所有的努力！

# macos - 没有__MACOSX文件夹的Mac zip压缩？

> ID：10924236
> 
> 赞同：203
> 
> 时间：2012-06-07T00:39:50.770
> 
> 标签：macos, zip

当我在 Mac OSX 中使用内置 zip 压缩器压缩文件时，它会导致在提取的 zip 中创建一个名为“__MACOSX”的额外文件夹。

我可以调整我的设置以防止创建此文件夹还是需要购买第三方压缩工具？

**更新**：我刚刚找到了一个 OSX 的免费软件应用程序，可以解决我的问题：“ [YemuZip](https://www.yellowmug.com/yemuzip/) ”

**更新 2**：YemuZip 不再是免费软件。

* * *

## 回答 #1

> 赞同：349
> 
> 时间：2012-12-02T01:28:35.393

事后可以通过以下方式修复`zip -d filename.zip __MACOSX/\*`

* * *

## 回答 #2

> 赞同：109
> 
> 时间：2012-07-10T12:47:13.100

当我遇到这个问题时，我已经从命令行完成了：

```
zip file.zip uncompressed 
```

**编辑**，经过多次否决：我之前使用过这个选项，我不知道我在哪里学到的，所以我不能给你更好的解释。克里斯约翰逊的[回答](https://stackoverflow.com/a/13665552/167365)是正确的，但我不会删除我的。正如一条评论所说，它对 OP 的要求更准确，因为它在没有这些文件的情况下进行压缩，而不是从压缩文件中删除它们。我也觉得更容易记住。

* * *

## 回答 #3

> 赞同：82
> 
> 时间：2014-04-29T18:12:53.947

在要压缩的文件夹中，在终端中：

```
zip -r -X Archive.zip * 
```

其中-X表示：排除“_MACOSX”或“._Filename”等不可见的Mac资源文件和.ds存储文件

[资源](http://coolestguidesontheplanet.com/how-to-compress-and-uncompress-files-and-folders-in-os-x-lion-10-7-using-terminal/)

**注意：**仅适用于您所在的文件夹和后续文件夹树，并且必须具有`*`通配符。

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2014-03-21T14:24:51.680

这个命令为我做了：

```
zip -r Target.zip Source -x "*.DS_Store" 
```

`Target.zip`是要创建的 zip 文件。`Source`是要压缩的源文件/文件夹。并且`-x`参数指定要排除的文件/文件夹。如果上述方法由于某种原因不起作用，请尝试以下方法：

```
zip -r Target.zip Source -x "*.DS_Store" -x "__MACOSX" 
```

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2016-05-25T07:05:34.470

我正在使用这个 Automator Shell 脚本来修复它。它显示为上下文菜单项（右键单击 Finder 中显示的任何文件）。

```
while read -r p; do
  zip -d "$p" __MACOSX/\* || true
  zip -d "$p" \*/.DS_Store || true
done 
```

1.  使用 Automator 创建新服务
2.  在“Finder”中选择“文件和文件夹”
3.  添加“Shell 脚本操作”

[![自动化外壳脚本](../Images/a6babd467a51cf29126abef357b40d72.png)](https://i.stack.imgur.com/3aycG.jpg)

[![Finder 中的上下文菜单项](../Images/b271c5d52a93008f07ffef18b01a98c2.png)](https://i.stack.imgur.com/08DvC.jpg)

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2018-06-11T08:10:54.780

```
zip -r "$destFileName.zip" "$srcFileName" -x "*/\__MACOSX" -x "*/\.*" 
```

*   `-x "*/\__MACOSX"`：忽略你提到的__MACOSX。
*   `-x "*/\.*"`：忽略任何隐藏文件，例如 .DS_Store 。
*   如果变量以空格命名，请引用该变量以避免文件。

此外，您可以构建 Automator Service 以使其在 Finder 中轻松使用。如果需要，请查看下面的链接以查看详细信息。

[Github](https://github.com/pilisir/macOSzip)

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2016-05-09T15:51:06.383

也可以通过以下方式删除不需要的文件夹：

```
zip -d filename.zip "__MACOSX*" 
```

最适合我

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2016-01-02T18:50:15.187

命令行`zip`实用程序从不创建`__MACOSX`目录，因此您只需运行如下命令：

```
zip directory.zip -x \*.DS_Store -r directory 
```

在下面的输出中，`a.zip`我使用`zip`命令行实用程序创建的不包含`__MACOSX`目录，但`a 2.zip`我从 Finder 创建的包含目录。

```
$ touch a
$ xattr -w somekey somevalue a
$ zip a.zip a
  adding: a (stored 0%)
$ unzip -l a.zip
Archive:  a.zip
  Length     Date   Time    Name
 --------    ----   ----    ----
        0  01-02-16 20:29   a
 --------                   -------
        0                   1 file
$ unzip -l a\ 2.zip # I created `a 2.zip` from Finder before this
Archive:  a 2.zip
  Length     Date   Time    Name
 --------    ----   ----    ----
        0  01-02-16 20:29   a
        0  01-02-16 20:31   __MACOSX/
      149  01-02-16 20:29   __MACOSX/._a
 --------                   -------
      149                   3 files 
```

`-x .DS_Store`不排除`.DS_Store`目录内的文件，但`-x \*.DS_Store`会。

包含多个文件的 zip 存档的顶级文件通常应该是一个目录，因为如果不是，一些取消存档实用程序（如`unzip`and `7z`，但不是存档实用程序、Unarchiver`unar`或`dtrx`）不会为提取档案时的文件，这通常会使文件难以找到，并且如果同时提取多个类似的档案，则可能很难分辨哪些文件属于哪个档案。

存档实用程序仅`__MACOSX`在您创建至少一个文件包含元数据（例如扩展属性、文件标志或资源分支）的存档时创建目录。该目录包含文件名以用于存储 OS X 特定元数据的`__MACOSX`AppleDouble 文件。`._`命令行`zip`实用程序会丢弃扩展属性、文件标志和资源分支等元数据，这也意味着标签等元数据会丢失，并且别名停止工作，因为别名文件中的信息存储在资源分支中。

通常您可以丢弃特定于 OS X 的元数据，但要查看元数据文件包含哪些内容，您可以使用`xattr -l`. `xattr`还包括资源分叉和文件标志，因为即使它们实际上并未存储为扩展属性，也可以通过扩展属性接口访问它们。存档实用程序和`zip`命令行实用程序都会丢弃 ACL。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2016-04-26T04:52:17.803

你不能。

但是您可以做的是在压缩后删除那些不需要的文件夹。命令行`zip`采用不同的参数，其中一个 ,`-d`用于删除基于正则表达式的内容。所以你可以像这样使用它：

```
zip -d filename.zip __MACOSX/\* 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2021-04-08T10:07:45.633

清理 .zip`.DS_Store`和`__MACOSX`，包括子文件夹：

```
zip -d archive.zip '__MACOSX/*' '*/__MACOSX/*' .DS_Store '*/.DS_Store' 
```

演练：

1.  像往常一样通过右键单击文件（或文件夹）并选择“压缩...”来创建 .zip
2.  打开终端应用程序（在 Spotlight 搜索中搜索终端）
3.  在终端中输入`zip` （但不要按回车键）
4.  将 .zip 拖到终端，使其转换为路径
5.  复制粘贴`-d '__MACOSX/*' '*/__MACOSX/*' .DS_Store '*/.DS_Store'`
6.  点击进入
7.  用于`zipinfo archive.zip`列出里面的文件，检查（可选）

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-05-09T01:39:10.793

不要压缩任何隐藏文件：

```
zip newzipname filename.any  -x "\.*" 
```

带着这个问题，应该是这样的：

```
zip newzipname filename.any  -x "\__MACOSX" 
```

必须说，虽然 zip 命令在终端中运行只是压缩文件，它不会压缩任何其他文件。所以这样做结果是一样的：

```
zip newzipname filename.any 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2017-12-19T05:11:54.890

阅读所有现有答案后，我有一个更好的解决方案。只需单击鼠标右键，一切都可以通过工作流程完成。 **没有**额外的软件，**没有**复杂的命令行内容，也**没有**shell 技巧。

自动化工作流程：

*   输入：来自任何应用程序的文件或文件夹。
*   第一步：创建存档，系统自带默认参数。
*   第二步：运行Shell命令，输入参数。复制下面的命令。

    `zip -d "$@" "__MACOSX/*" || true`

    `zip -d "$@" "*/.DS_Store" || true`

保存它，我们就完成了！只需右键单击文件夹或大量文件，然后从服务菜单中选择工作流程。将同时创建没有元数据的存档。

[![样本](../Images/2e3486e469ff6eb93232a612ae18e69a.png)](https://i.stack.imgur.com/0UuAC.png)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2012-06-07T01:09:50.250

您是指`zip`命令行工具还是 Finder 的 Compress 命令？

对于`zip`，您可以尝试该`--data-fork`选项。如果这样做不行，您可以尝试`--no-extra`，尽管这似乎忽略了其他可能有价值的文件元数据，例如 uid/gid 和文件时间。

对于 Finder 的 Compress 命令，我认为没有任何选项可以控制其行为。这是简单的情况。

另一个工具，也许是 Finder 在后台实际使用的工具，是`ditto`. 使用这些`-c -k`选项，它会创建 zip 存档。使用此工具，您可以尝试使用`--norsrc`、`--noextattr`、`--noqtn`和`--noacl`/或简单地放弃该`--sequesterRsrc`选项（根据手册页，该选项可能负责`__MACOSX`子目录）。虽然，也许没有`--sequesterRsrc`简单地意味着使用 AppleDouble 格式，这将在整个地方创建 ._ 文件而不是一个`__MACOSX`目录。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-02-23T14:42:06.870

这就是我在使用命令`__MACOSX`压缩文件时避免目录的方式：`tar`

`$ cd dir-you-want-to-archive $ find . | xargs xattr -l # <- list all files with special xattr attributes ... ./conf/clamav: com.apple.quarantine: 0083;5a9018b1;Safari;9DCAFF33-C7F5-4848-9A87-5E061E5E2D55 ./conf/global: com.apple.quarantine: 0083;5a9018b1;Safari;9DCAFF33-C7F5-4848-9A87-5E061E5E2D55 ./conf/web_server: com.apple.quarantine: 0083;5a9018b1;Safari;9DCAFF33-C7F5-4848-9A87-5E061E5E2D55`

先删除属性：

`find . | xargs xattr -d com.apple.quarantine`

再次运行`find . | xargs xattr -l`，确保没有任何文件具有 xattr 属性。那么你很高兴：

`tar cjvf file.tar.bz2 dir`

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-10-13T22:59:08.113

可以与 Automator 工具一起使用的另一个 shell 脚本（另请参阅 benedikt 关于如何创建脚本的答案）是：

```
while read -r f; do
    d="$(dirname "$f")"
    n="$(basename "$f")"
    cd "$d"
    zip "$n.zip" -x \*.DS_Store -r "$n"
done 
```

这里的不同之处在于，此代码直接压缩选定的文件夹，没有 macOS 特定文件（而不是先压缩后删除）。

# vb.net - 加密到 SHA1 Visual Basic - VB 2010

> ID：10924238
> 
> 赞同：6
> 
> 时间：2012-06-07T00:40:21.457
> 
> 标签：vb.net

我有一个在线 SMF 论坛，当用户注册时，密码在数据库中使用 SHA1 加密。我需要创建一个只有论坛成员才能登录的登录功能的 vb 程序。现在我陷入困境的部分是如何在 Visual Basic 中将密码加密为 SHA1？我包含了一些我不知道是否正确的代码，所以请帮助我。

```
Imports System.Security.Cryptography
Public Class Form2

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    ' declare those variables
    Dim password As String
    Dim passwordSHA As String

    password = txtPassword.Text ' give password the value of the password textbox

    Call passwordEncryptSHA(password) ' Lets call the first password encryption function for SHA1

    passwordSHA = passwordEncryptSHA(password) ' give the variable the returned SHA value

    ' finally we will display both values in the corresponding textboxes
    txtSHA1.Text = passwordSHA

End Sub
Public Function passwordEncryptSHA(ByVal password As String) As String
    Dim sha As New SHA1CryptoServiceProvider ' declare sha as a new SHA1CryptoServiceProvider
    Dim bytesToHash() As Byte ' and here is a byte variable

    bytesToHash = System.Text.Encoding.ASCII.GetBytes(password) ' covert the password into ASCII code

    bytesToHash = sha.ComputeHash(bytesToHash) ' this is where the magic starts and the encryption begins

    Dim encPassword As String = ""

    For Each b As Byte In bytesToHash
        encPassword += b.ToString("x2")
    Next

    Return encPassword ' boom there goes the encrypted password!

End Function

Private Sub Form2_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

End Sub
End Class 
```

谢谢，请不要吝啬，因为我还在学习（我 15 岁）！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-07T12:49:24.410

```
Imports System.IO
Public Class Form1

Private Sub TextBox1_KeyDown(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles TextBox1.KeyDown
    If e.KeyValue = Keys.Enter Then
        TextBox2.Text = getSHA1Hash(TextBox1.Text)
        Label3.Text = TextBox2.Text.Length
    End If
End Sub

Function getSHA1Hash(ByVal strToHash As String) As String

    Dim sha1Obj As New Security.Cryptography.SHA1CryptoServiceProvider
    Dim bytesToHash() As Byte = System.Text.Encoding.ASCII.GetBytes(strToHash)

    bytesToHash = sha1Obj.ComputeHash(bytesToHash)

    Dim strResult As String = ""

    For Each b As Byte In bytesToHash
        strResult += b.ToString("x2")
    Next

    Return strResult

End Function

Private Sub Form1_FormClosing(ByVal sender As Object, ByVal e As System.Windows.Forms.FormClosingEventArgs) Handles Me.FormClosing
    Dim fs As New FileStream("location.txt", FileMode.OpenOrCreate, FileAccess.Write)
    Dim sr As New StreamWriter(fs)
    fs.SetLength(0)
    sr.WriteLine(Me.Location.X)
    sr.WriteLine(Me.Location.Y)
    sr.Close()
    fs.Close()
End Sub

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    If File.Exists("location.txt") Then
        Dim fs As New FileStream("location.txt", FileMode.Open, FileAccess.Read)
        Dim sr As New StreamReader(fs)

        Me.Location = New Point(sr.ReadLine, sr.ReadLine)
        sr.Close()
        fs.Close()
    End If
End Sub

Private Sub TextBox1_KeyUp(ByVal sender As System.Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles TextBox1.KeyUp
    If e.KeyValue = Keys.Escape Then
        Application.Exit()
    End If
End Sub
End Class 
```

![在此处输入图像描述](../Images/17a94107bd1624124acaf80825ca24b2.png)
所以:-)这是我为你创建的一个小程序，希望它有用，学习愉快。
提示：忽略额外的定位代码，这不过是一个懒惰的程序员的旧习惯......顺便说一句，哈希是一种方式，加密是两种方式（您可以先编码然后解密以获取相同的数据，但是您不能取消散列数据）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T01:06:36.757

未经测试！

如果你改变这个...

```
...

Dim encPassword As String = ""

For Each b As Byte In bytesToHash
   encPassword += b.ToString("x2")
下一个

...

```

对此

```
Dim encPassword As String = ""

encPassword = System.Text.Encoding.ASCII.GetString(bytesToHash);

```

# jquery - 如何摆脱 youtube 底部栏和标题？

> ID：10924244
> 
> 赞同：0
> 
> 时间：2012-06-07T00:41:03.367
> 
> 标签：jquery, html, fancybox

当通过fancybox播放时，有没有办法摆脱youtube上的底部状态栏？我尝试附加“controls = “0””，但底部栏在剪辑期间一直存在。

还有一种方法可以让右上角的“X”按钮在一段时间后淡出吗？或者至少将按钮从视频框移开一点？

![在此处输入图像描述](../Images/a5d6eb88be05b7be33202d5f7a8591fe.png)

HTML：

```
<a class="fancybox-media" href="http://www.youtube.com/watch?v=sqRPrGeBVL0&autoplay=1"    >Vimeo</a> 
```

Javascript：

```
$("a.fancybox-media").click(function() {
                 $.fancybox({
                  'padding'             : 0,
                  'autoScale'   : false,
                  'transitionIn'        : 'none',
                  'transitionOut'       : 'none',
                  'title'               : this.title,
                  'width'               : 680,
                  'height'              : 495,
                  'autoPlay'            :'true',
                  'href'                : this.href.replace(new RegExp("watch\\?v=", "i"), 'v/'),
                  'type'                : 'swf',    // <--add a comma here
                  'swf'                 : {'allowfullscreen':'true'} // <-- flashvars here
                  });
                 return false;

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T00:53:40.093

将`autohide=1`选项添加到您的命令行（在您的`href`）中，例如：

```
<a class="fancybox-media" href="http://www.youtube.com/watch?v=sqRPrGeBVL0&autoplay=1&autohide=1" >Vimeo</a> 
```

对于“ `close`”按钮，您可以将此选项添加到您的脚本中：

```
'onComplete': function(){
 $("#fancybox-close").css({"opacity":"0.5"});
} 
```

根据需要调整不透明度值

# java - Java 机器人类 - 将焦点添加到特定正在运行的应用程序？

> ID：10924246
> 
> 赞同：4
> 
> 时间：2012-06-07T00:41:22.137
> 
> 标签：java, awtrobot

我只是想弄清楚是否/如何让 Java Robot 类将焦点从正在运行的 java 应用程序更改为特定进程，例如 ms word 或 firefox。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T04:06:16.697

机器人不能自动做到这一点。您可以按照上面的建议通过 alt-tab 激活另一个应用程序，但您需要知道要激活的应用程序的 z 顺序。我认为要真正做到最好，您需要获取要激活的顶级窗口的窗口句柄 (hWnd)（如果这是 Windows 应用程序），然后使用 Windows user32 库函数激活所需的窗口。为此，我建议使用[JNA](https://github.com/twall/jna)作为最简单的方法之一（与 JNI 相比）。您必须首先下载 JNA jna.jar 和 platform.jar jar 文件，并将它们放在您的类路径中，然后您就可以轻松调用大多数操作系统方法。例如，我刚刚为 Windows 应用程序启动并运行了这种东西，我可以根据窗口名称（完整或部分）获取正在运行的顶级 Windows 应用程序的 hWnd，然后使用该 hWnd，调用 user32's setForegroundWindow 函数。如果您想激活 Windows 应用程序并想进一步追求这一点，请对此答案发表评论，我可以向您展示我为此拥有的代码。如果是这样，您将需要更详细地了解您正在尝试做什么。

祝你好运！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-03T15:59:39.977

对于我刚刚在 Google 中遇到的任何问题：

```
public class activate {

    public interface User32 extends W32APIOptions {

        User32 instance = (User32) Native.loadLibrary("user32", User32.class,
                DEFAULT_OPTIONS);

        boolean ShowWindow(HWND hWnd, int nCmdShow);

        boolean SetForegroundWindow(HWND hWnd);

        HWND FindWindow(String winClass, String title);

        int SW_SHOW = 1;

    }

    public static void main(String[] args) {  
        User32 user32 = User32.instance;  
        HWND hWnd = user32.FindWindow(null, "Downloads"); // Sets focus to my opened 'Downloads' folder
        user32.ShowWindow(hWnd, User32.SW_SHOW);  
        user32.SetForegroundWindow(hWnd);  
    } 
} 
```

信用： http: [//www.coderanch.com/t/562454/java/java/FindWindow-ShowWindow-SetForegroundWindow-effect-win](http://www.coderanch.com/t/562454/java/java/FindWindow-ShowWindow-SetForegroundWindow-effect-win)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-22T14:33:05.803

您没有指定系统，在 Mac 上，可以使用 AppleScript 来完成。AppleScript 已集成到系统中，因此它始终可以正常工作。 [https://developer.apple.com/library/content/documentation/AppleScript/Conceptual/AppleScriptLangGuide/reference/ASLR_cmds.html](https://developer.apple.com/library/content/documentation/AppleScript/Conceptual/AppleScriptLangGuide/reference/ASLR_cmds.html)

您只需要检测到您在 mac 上并具有应用程序的名称。

```
Runtime runtime = Runtime.getRuntime();
            String[] args = { "osascript", "-e", "tell app \"Chrome\" to activate" };
            Process process = runtime.exec(args); 
```

# c# - 使用 SolidColorBrush 画笔填充列表

> ID：10924252
> 
> 赞同：4
> 
> 时间：2012-06-07T00:42:07.043
> 
> 标签：c#, windows-phone-7, xaml

我正在尝试使用 WP7.1 中可用的所有预定义 SolidColorBrushes 填充列表，但我无法通过代码执行此操作。我已经用一个简短的测试颜色列表手动完成了这项工作，效果很好，但是有超过一百种不同的预定义颜色，我知道必须有一个正确的方法，尽管我不确定如何完成这个。到目前为止我所拥有的如下

主页.xaml

```
<ScrollViewer>
            <!--<toolkit:MultiselectList x:Name="ColorList" ItemsSource="{Binding}" Height="88" HorizontalAlignment="Left" VerticalAlignment="Top" >-->
            <toolkit:MultiselectList x:Name="ColorList" HorizontalAlignment="Left" VerticalAlignment="Top" Tap="ColorList_Tap">
                <toolkit:MultiselectList.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Margin="12,12,0,0" Grid.ColumnSpan="2">
                            <Rectangle Fill="{Binding Brush}" Width="50" Height="50"/>
                            <TextBlock Text="{Binding Name}" Margin="12,10,0,0"/>
                        </StackPanel>
                    </DataTemplate>
                </toolkit:MultiselectList.ItemTemplate>

            </toolkit:MultiselectList>
        </ScrollViewer> 
```

MainPage.xaml.cs

```
 List<ColorItem> solidColorBrushList;

    public ColorListPage()
    {
        InitializeComponent();

        solidColorBrushList = new List<ColorItem>()
        {
            new ColorItem { Brush = new SolidColorBrush(Color.FromArgb(255,27,161,226)), Name = "blue" },     
            new ColorItem { Brush = new SolidColorBrush(Color.FromArgb(255,160,80,0)), Name = "brown" },      
            new ColorItem { Brush = new SolidColorBrush(Color.FromArgb(255, 51,153,51)), Name = "green" },    
            new ColorItem { Brush = new SolidColorBrush(Color.FromArgb(255,162,193,57)), Name = "lime" },    
            new ColorItem { Brush = new SolidColorBrush(Color.FromArgb(255,216,0,115)), Name = "magenta" },  
            new ColorItem { Brush = new SolidColorBrush(Color.FromArgb(255,240,150,9)), Name = "mango" },    
            new ColorItem { Brush = new SolidColorBrush(Color.FromArgb(255,230,113,184)), Name = "pink" },   
            new ColorItem { Brush = new SolidColorBrush(Color.FromArgb(255,162,0,255)), Name = "purple" },   
            new ColorItem { Brush = new SolidColorBrush(Color.FromArgb(255,229,20,0)), Name = "red" },       
            new ColorItem { Brush = new SolidColorBrush(Color.FromArgb(255,0,171,169)), Name = "teal" }
        };

        this.ColorList.ItemsSource = solidColorBrushList;

        this.Loaded += new RoutedEventHandler(ColorListPage_Loaded);
    }

    void ColorListPage_Loaded(object sender, RoutedEventArgs e)
    {
        //show checkboxes when page is loaded
        this.ColorList.IsSelectionEnabled = true;
    }
}

public class ColorItem
{
    public SolidColorBrush Brush { get; set; }
    public string Name { get; set; }
} 
```

调用所有画笔及其各自名称来填充多选列表的正确方法是什么？另外作为旁注，由于某种原因，我的多选列表在页面中显示时会切断文本，有没有办法将列表拉伸到屏幕的宽度，以便矩形和文本都可以显示而不被切断？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T01:00:57.033

您可以使用反射来提取所有`Color`条目`Colors`并从中构建画笔。

您必须原谅我，我目前无法访问 Visual Studio，所以我在记事本中使用 API 将它从我的脑海中甩出。

```
List<ColorItem> solidColorBrushList = new List<ColorItem>();

PropertyInfo[] colorProperties = typeof(Colors).GetProperties(BindingFlags.Public | BindingFlags.Static)
foreach (PropertyInfo colorProperty in colorProperties)
{
    //could probably omit this check; I think all static properties of Colors are of type Color
    if (colorProperty.PropertyType == typeof(Color))
    {
        Color color = (Color)colorProperty.GetValue(null, null);
        string colorName = colorPropertyName;
        SolidColorBrush brush = new SolidColorBrush(color);

        ColorItem item = new ColorItem() { Brush = brush, Name = colorName };
        solidColorBrushList.Add(item);
    }
} 
```

所以是的，我可能弄错了一个函数参数，或者你可能需要调整`BindingFlags`，但这应该会给你一个很好的起点。当我明天有时间（并访问 Visual Studio）时，我会仔细检查并在必要时修复它。

编辑：只是想我会将我们在工作中复制的完整 .NET 4.0 颜色列表粘贴到我们自己的内部`Color`结构中，以防万一你没有解决它。也许它会节省你的时间：

```
public static class Colors
{
    private static readonly Color m_Transparent = Color.FromArgb(0, 255, 255, 255);
    private static readonly Color m_AliceBlue = Color.FromRgb(240, 248, 255);
    private static readonly Color m_AntiqueWhite = Color.FromRgb(250, 235, 215);
    private static readonly Color m_Aqua = Color.FromRgb(0, 255, 255);
    private static readonly Color m_Aquamarine = Color.FromRgb(127, 255, 212);
    private static readonly Color m_Azure = Color.FromRgb(240, 255, 255);
    private static readonly Color m_Beige = Color.FromRgb(245, 245, 220);
    private static readonly Color m_Bisque = Color.FromRgb(255, 228, 196);
    private static readonly Color m_Black = Color.FromRgb(0, 0, 0);
    private static readonly Color m_BlanchedAlmond = Color.FromRgb(255, 235, 205);
    private static readonly Color m_Blue = Color.FromRgb(0, 0, 255);
    private static readonly Color m_BlueViolet = Color.FromRgb(138, 43, 226);
    private static readonly Color m_Brown = Color.FromRgb(165, 42, 42);
    private static readonly Color m_BurlyWood = Color.FromRgb(222, 184, 135);
    private static readonly Color m_CadetBlue = Color.FromRgb(95, 158, 160);
    private static readonly Color m_Chartreuse = Color.FromRgb(127, 255, 0);
    private static readonly Color m_Chocolate = Color.FromRgb(210, 105, 30);
    private static readonly Color m_Coral = Color.FromRgb(255, 127, 80);
    private static readonly Color m_CornflowerBlue = Color.FromRgb(100, 149, 237);
    private static readonly Color m_Cornsilk = Color.FromRgb(255, 248, 220);
    private static readonly Color m_Crimson = Color.FromRgb(220, 20, 60);
    private static readonly Color m_Cyan = Color.FromRgb(0, 255, 255);
    private static readonly Color m_DarkBlue = Color.FromRgb(0, 0, 139);
    private static readonly Color m_DarkCyan = Color.FromRgb(0, 139, 139);
    private static readonly Color m_DarkGoldenrod = Color.FromRgb(184, 134, 11);
    private static readonly Color m_DarkGray = Color.FromRgb(169, 169, 169);
    private static readonly Color m_DarkGreen = Color.FromRgb(0, 100, 0);
    private static readonly Color m_DarkKhaki = Color.FromRgb(189, 183, 107);
    private static readonly Color m_DarkMagenta = Color.FromRgb(139, 0, 139);
    private static readonly Color m_DarkOliveGreen = Color.FromRgb(85, 107, 47);
    private static readonly Color m_DarkOrange = Color.FromRgb(255, 140, 0);
    private static readonly Color m_DarkOrchid = Color.FromRgb(153, 50, 204);
    private static readonly Color m_DarkRed = Color.FromRgb(139, 0, 0);
    private static readonly Color m_DarkSalmon = Color.FromRgb(233, 150, 122);
    private static readonly Color m_DarkSeaGreen = Color.FromRgb(143, 188, 139);
    private static readonly Color m_DarkSlateBlue = Color.FromRgb(72, 61, 139);
    private static readonly Color m_DarkSlateGray = Color.FromRgb(47, 79, 79);
    private static readonly Color m_DarkTurquoise = Color.FromRgb(0, 206, 209);
    private static readonly Color m_DarkViolet = Color.FromRgb(148, 0, 211);
    private static readonly Color m_DeepPink = Color.FromRgb(255, 20, 147);
    private static readonly Color m_DeepSkyBlue = Color.FromRgb(0, 191, 255);
    private static readonly Color m_DimGray = Color.FromRgb(105, 105, 105);
    private static readonly Color m_DodgerBlue = Color.FromRgb(30, 144, 255);
    private static readonly Color m_Firebrick = Color.FromRgb(178, 34, 34);
    private static readonly Color m_FloralWhite = Color.FromRgb(255, 250, 240);
    private static readonly Color m_ForestGreen = Color.FromRgb(34, 139, 34);
    private static readonly Color m_Fuchsia = Color.FromRgb(255, 0, 255);
    private static readonly Color m_Gainsboro = Color.FromRgb(220, 220, 220);
    private static readonly Color m_GhostWhite = Color.FromRgb(248, 248, 255);
    private static readonly Color m_Gold = Color.FromRgb(255, 215, 0);
    private static readonly Color m_Goldenrod = Color.FromRgb(218, 165, 32);
    private static readonly Color m_Gray = Color.FromRgb(128, 128, 128);
    private static readonly Color m_Green = Color.FromRgb(0, 128, 0);
    private static readonly Color m_GreenYellow = Color.FromRgb(173, 255, 47);
    private static readonly Color m_Honeydew = Color.FromRgb(240, 255, 240);
    private static readonly Color m_HotPink = Color.FromRgb(255, 105, 180);
    private static readonly Color m_IndianRed = Color.FromRgb(205, 92, 92);
    private static readonly Color m_Indigo = Color.FromRgb(75, 0, 130);
    private static readonly Color m_Ivory = Color.FromRgb(255, 255, 240);
    private static readonly Color m_Khaki = Color.FromRgb(240, 230, 140);
    private static readonly Color m_Lavender = Color.FromRgb(230, 230, 250);
    private static readonly Color m_LavenderBlush = Color.FromRgb(255, 240, 245);
    private static readonly Color m_LawnGreen = Color.FromRgb(124, 252, 0);
    private static readonly Color m_LemonChiffon = Color.FromRgb(255, 250, 205);
    private static readonly Color m_LightBlue = Color.FromRgb(173, 216, 230);
    private static readonly Color m_LightCoral = Color.FromRgb(240, 128, 128);
    private static readonly Color m_LightCyan = Color.FromRgb(224, 255, 255);
    private static readonly Color m_LightGoldenrodYellow = Color.FromRgb(250, 250, 210);
    private static readonly Color m_LightGreen = Color.FromRgb(144, 238, 144);
    private static readonly Color m_LightGray = Color.FromRgb(211, 211, 211);
    private static readonly Color m_LightPink = Color.FromRgb(255, 182, 193);
    private static readonly Color m_LightSalmon = Color.FromRgb(255, 160, 122);
    private static readonly Color m_LightSeaGreen = Color.FromRgb(32, 178, 170);
    private static readonly Color m_LightSkyBlue = Color.FromRgb(135, 206, 250);
    private static readonly Color m_LightSlateGray = Color.FromRgb(119, 136, 153);
    private static readonly Color m_LightSteelBlue = Color.FromRgb(176, 196, 222);
    private static readonly Color m_LightYellow = Color.FromRgb(255, 255, 224);
    private static readonly Color m_Lime = Color.FromRgb(0, 255, 0);
    private static readonly Color m_LimeGreen = Color.FromRgb(50, 205, 50);
    private static readonly Color m_Linen = Color.FromRgb(250, 240, 230);
    private static readonly Color m_Magenta = Color.FromRgb(255, 0, 255);
    private static readonly Color m_Maroon = Color.FromRgb(128, 0, 0);
    private static readonly Color m_MediumAquamarine = Color.FromRgb(102, 205, 170);
    private static readonly Color m_MediumBlue = Color.FromRgb(0, 0, 205);
    private static readonly Color m_MediumOrchid = Color.FromRgb(186, 85, 211);
    private static readonly Color m_MediumPurple = Color.FromRgb(147, 112, 219);
    private static readonly Color m_MediumSeaGreen = Color.FromRgb(60, 179, 113);
    private static readonly Color m_MediumSlateBlue = Color.FromRgb(123, 104, 238);
    private static readonly Color m_MediumSpringGreen = Color.FromRgb(0, 250, 154);
    private static readonly Color m_MediumTurquoise = Color.FromRgb(72, 209, 204);
    private static readonly Color m_MediumVioletRed = Color.FromRgb(199, 21, 133);
    private static readonly Color m_MidnightBlue = Color.FromRgb(25, 25, 112);
    private static readonly Color m_MintCream = Color.FromRgb(245, 255, 250);
    private static readonly Color m_MistyRose = Color.FromRgb(255, 228, 225);
    private static readonly Color m_Moccasin = Color.FromRgb(255, 228, 181);
    private static readonly Color m_NavajoWhite = Color.FromRgb(255, 222, 173);
    private static readonly Color m_Navy = Color.FromRgb(0, 0, 128);
    private static readonly Color m_OldLace = Color.FromRgb(253, 245, 230);
    private static readonly Color m_Olive = Color.FromRgb(128, 128, 0);
    private static readonly Color m_OliveDrab = Color.FromRgb(107, 142, 35);
    private static readonly Color m_Orange = Color.FromRgb(255, 165, 0);
    private static readonly Color m_OrangeRed = Color.FromRgb(255, 69, 0);
    private static readonly Color m_Orchid = Color.FromRgb(218, 112, 214);
    private static readonly Color m_PaleGoldenrod = Color.FromRgb(238, 232, 170);
    private static readonly Color m_PaleGreen = Color.FromRgb(152, 251, 152);
    private static readonly Color m_PaleTurquoise = Color.FromRgb(175, 238, 238);
    private static readonly Color m_PaleVioletRed = Color.FromRgb(219, 112, 147);
    private static readonly Color m_PapayaWhip = Color.FromRgb(255, 239, 213);
    private static readonly Color m_PeachPuff = Color.FromRgb(255, 218, 185);
    private static readonly Color m_Peru = Color.FromRgb(205, 133, 63);
    private static readonly Color m_Pink = Color.FromRgb(255, 192, 203);
    private static readonly Color m_Plum = Color.FromRgb(221, 160, 221);
    private static readonly Color m_PowderBlue = Color.FromRgb(176, 224, 230);
    private static readonly Color m_Purple = Color.FromRgb(128, 0, 128);
    private static readonly Color m_Red = Color.FromRgb(255, 0, 0);
    private static readonly Color m_RosyBrown = Color.FromRgb(188, 143, 143);
    private static readonly Color m_RoyalBlue = Color.FromRgb(65, 105, 225);
    private static readonly Color m_SaddleBrown = Color.FromRgb(139, 69, 19);
    private static readonly Color m_Salmon = Color.FromRgb(250, 128, 114);
    private static readonly Color m_SandyBrown = Color.FromRgb(244, 164, 96);
    private static readonly Color m_SeaGreen = Color.FromRgb(46, 139, 87);
    private static readonly Color m_SeaShell = Color.FromRgb(255, 245, 238);
    private static readonly Color m_Sienna = Color.FromRgb(160, 82, 45);
    private static readonly Color m_Silver = Color.FromRgb(192, 192, 192);
    private static readonly Color m_SkyBlue = Color.FromRgb(135, 206, 235);
    private static readonly Color m_SlateBlue = Color.FromRgb(106, 90, 205);
    private static readonly Color m_SlateGray = Color.FromRgb(112, 128, 144);
    private static readonly Color m_Snow = Color.FromRgb(255, 250, 250);
    private static readonly Color m_SpringGreen = Color.FromRgb(0, 255, 127);
    private static readonly Color m_SteelBlue = Color.FromRgb(70, 130, 180);
    private static readonly Color m_Tan = Color.FromRgb(210, 180, 140);
    private static readonly Color m_Teal = Color.FromRgb(0, 128, 128);
    private static readonly Color m_Thistle = Color.FromRgb(216, 191, 216);
    private static readonly Color m_Tomato = Color.FromRgb(255, 99, 71);
    private static readonly Color m_Turquoise = Color.FromRgb(64, 224, 208);
    private static readonly Color m_Violet = Color.FromRgb(238, 130, 238);
    private static readonly Color m_Wheat = Color.FromRgb(245, 222, 179);
    private static readonly Color m_White = Color.FromRgb(255, 255, 255);
    private static readonly Color m_WhiteSmoke = Color.FromRgb(245, 245, 245);
    private static readonly Color m_Yellow = Color.FromRgb(255, 255, 0);
    private static readonly Color m_YellowGreen = Color.FromRgb(154, 205, 50);

    public static Color Transparent { get { return m_Transparent; } }

    public static Color AliceBlue { get { return m_AliceBlue; } }

    public static Color AntiqueWhite { get { return m_AntiqueWhite; } }

    public static Color Aqua { get { return m_Aqua; } }

    public static Color Aquamarine { get { return m_Aquamarine; } }

    public static Color Azure { get { return m_Azure; } }

    public static Color Beige { get { return m_Beige; } }

    public static Color Bisque { get { return m_Bisque; } }

    public static Color Black { get { return m_Black; } }

    public static Color BlanchedAlmond { get { return m_BlanchedAlmond; } }

    public static Color Blue { get { return m_Blue; } }

    public static Color BlueViolet { get { return m_BlueViolet; } }

    public static Color Brown { get { return m_Brown; } }

    public static Color BurlyWood { get { return m_BurlyWood; } }

    public static Color CadetBlue { get { return m_CadetBlue; } }

    public static Color Chartreuse { get { return m_Chartreuse; } }

    public static Color Chocolate { get { return m_Chocolate; } }

    public static Color Coral { get { return m_Coral; } }

    public static Color CornflowerBlue { get { return m_CornflowerBlue; } }

    public static Color Cornsilk { get { return m_Cornsilk; } }

    public static Color Crimson { get { return m_Crimson; } }

    public static Color Cyan { get { return m_Cyan; } }

    public static Color DarkBlue { get { return m_DarkBlue; } }

    public static Color DarkCyan { get { return m_DarkCyan; } }

    public static Color DarkGoldenrod { get { return m_DarkGoldenrod; } }

    public static Color DarkGray { get { return m_DarkGray; } }

    public static Color DarkGreen { get { return m_DarkGreen; } }

    public static Color DarkKhaki { get { return m_DarkKhaki; } }

    public static Color DarkMagenta { get { return m_DarkMagenta; } }

    public static Color DarkOliveGreen { get { return m_DarkOliveGreen; } }

    public static Color DarkOrange { get { return m_DarkOrange; } }

    public static Color DarkOrchid { get { return m_DarkOrchid; } }

    public static Color DarkRed { get { return m_DarkRed; } }

    public static Color DarkSalmon { get { return m_DarkSalmon; } }

    public static Color DarkSeaGreen { get { return m_DarkSeaGreen; } }

    public static Color DarkSlateBlue { get { return m_DarkSlateBlue; } }

    public static Color DarkSlateGray { get { return m_DarkSlateGray; } }

    public static Color DarkTurquoise { get { return m_DarkTurquoise; } }

    public static Color DarkViolet { get { return m_DarkViolet; } }

    public static Color DeepPink { get { return m_DeepPink; } }

    public static Color DeepSkyBlue { get { return m_DeepSkyBlue; } }

    public static Color DimGray { get { return m_DimGray; } }

    public static Color DodgerBlue { get { return m_DodgerBlue; } }

    public static Color Firebrick { get { return m_Firebrick; } }

    public static Color FloralWhite { get { return m_FloralWhite; } }

    public static Color ForestGreen { get { return m_ForestGreen; } }

    public static Color Fuchsia { get { return m_Fuchsia; } }

    public static Color Gainsboro { get { return m_Gainsboro; } }

    public static Color GhostWhite { get { return m_GhostWhite; } }

    public static Color Gold { get { return m_Gold; } }

    public static Color Goldenrod { get { return m_Goldenrod; } }

    public static Color Gray { get { return m_Gray; } }

    public static Color Green { get { return m_Green; } }

    public static Color GreenYellow { get { return m_GreenYellow; } }

    public static Color Honeydew { get { return m_Honeydew; } }

    public static Color HotPink { get { return m_HotPink; } }

    public static Color IndianRed { get { return m_IndianRed; } }

    public static Color Indigo { get { return m_Indigo; } }

    public static Color Ivory { get { return m_Ivory; } }

    public static Color Khaki { get { return m_Khaki; } }

    public static Color Lavender { get { return m_Lavender; } }

    public static Color LavenderBlush { get { return m_LavenderBlush; } }

    public static Color LawnGreen { get { return m_LawnGreen; } }

    public static Color LemonChiffon { get { return m_LemonChiffon; } }

    public static Color LightBlue { get { return m_LightBlue; } }

    public static Color LightCoral { get { return m_LightCoral; } }

    public static Color LightCyan { get { return m_LightCyan; } }

    public static Color LightGoldenrodYellow { get { return m_LightGoldenrodYellow; } }

    public static Color LightGreen { get { return m_LightGreen; } }

    public static Color LightGray { get { return m_LightGray; } }

    public static Color LightPink { get { return m_LightPink; } }

    public static Color LightSalmon { get { return m_LightSalmon; } }

    public static Color LightSeaGreen { get { return m_LightSeaGreen; } }

    public static Color LightSkyBlue { get { return m_LightSkyBlue; } }

    public static Color LightSlateGray { get { return m_LightSlateGray; } }

    public static Color LightSteelBlue { get { return m_LightSteelBlue; } }

    public static Color LightYellow { get { return m_LightYellow; } }

    public static Color Lime { get { return m_Lime; } }

    public static Color LimeGreen { get { return m_LimeGreen; } }

    public static Color Linen { get { return m_Linen; } }

    public static Color Magenta { get { return m_Magenta; } }

    public static Color Maroon { get { return m_Maroon; } }

    public static Color MediumAquamarine { get { return m_MediumAquamarine; } }

    public static Color MediumBlue { get { return m_MediumBlue; } }

    public static Color MediumOrchid { get { return m_MediumOrchid; } }

    public static Color MediumPurple { get { return m_MediumPurple; } }

    public static Color MediumSeaGreen { get { return m_MediumSeaGreen; } }

    public static Color MediumSlateBlue { get { return m_MediumSlateBlue; } }

    public static Color MediumSpringGreen { get { return m_MediumSpringGreen; } }

    public static Color MediumTurquoise { get { return m_MediumTurquoise; } }

    public static Color MediumVioletRed { get { return m_MediumVioletRed; } }

    public static Color MidnightBlue { get { return m_MidnightBlue; } }

    public static Color MintCream { get { return m_MintCream; } }

    public static Color MistyRose { get { return m_MistyRose; } }

    public static Color Moccasin { get { return m_Moccasin; } }

    public static Color NavajoWhite { get { return m_NavajoWhite; } }

    public static Color Navy { get { return m_Navy; } }

    public static Color OldLace { get { return m_OldLace; } }

    public static Color Olive { get { return m_Olive; } }

    public static Color OliveDrab { get { return m_OliveDrab; } }

    public static Color Orange { get { return m_Orange; } }

    public static Color OrangeRed { get { return m_OrangeRed; } }

    public static Color Orchid { get { return m_Orchid; } }

    public static Color PaleGoldenrod { get { return m_PaleGoldenrod; } }

    public static Color PaleGreen { get { return m_PaleGreen; } }

    public static Color PaleTurquoise { get { return m_PaleTurquoise; } }

    public static Color PaleVioletRed { get { return m_PaleVioletRed; } }

    public static Color PapayaWhip { get { return m_PapayaWhip; } }

    public static Color PeachPuff { get { return m_PeachPuff; } }

    public static Color Peru { get { return m_Peru; } }

    public static Color Pink { get { return m_Pink; } }

    public static Color Plum { get { return m_Plum; } }

    public static Color PowderBlue { get { return m_PowderBlue; } }

    public static Color Purple { get { return m_Purple; } }

    public static Color Red { get { return m_Red; } }

    public static Color RosyBrown { get { return m_RosyBrown; } }

    public static Color RoyalBlue { get { return m_RoyalBlue; } }

    public static Color SaddleBrown { get { return m_SaddleBrown; } }

    public static Color Salmon { get { return m_Salmon; } }

    public static Color SandyBrown { get { return m_SandyBrown; } }

    public static Color SeaGreen { get { return m_SeaGreen; } }

    public static Color SeaShell { get { return m_SeaShell; } }

    public static Color Sienna { get { return m_Sienna; } }

    public static Color Silver { get { return m_Silver; } }

    public static Color SkyBlue { get { return m_SkyBlue; } }

    public static Color SlateBlue { get { return m_SlateBlue; } }

    public static Color SlateGray { get { return m_SlateGray; } }

    public static Color Snow { get { return m_Snow; } }

    public static Color SpringGreen { get { return m_SpringGreen; } }

    public static Color SteelBlue { get { return m_SteelBlue; } }

    public static Color Tan { get { return m_Tan; } }

    public static Color Teal { get { return m_Teal; } }

    public static Color Thistle { get { return m_Thistle; } }

    public static Color Tomato { get { return m_Tomato; } }

    public static Color Turquoise { get { return m_Turquoise; } }

    public static Color Violet { get { return m_Violet; } }

    public static Color Wheat { get { return m_Wheat; } }

    public static Color White { get { return m_White; } }

    public static Color WhiteSmoke { get { return m_WhiteSmoke; } }

    public static Color Yellow { get { return m_Yellow; } }

    public static Color YellowGreen { get { return m_YellowGreen; } }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T01:03:58.787

我的回答与克里斯的回答大致相同，但我认为值得发布，因为我将我的陈述归结为一个声明（删除它似乎很遗憾）：

```
var colors = typeof(Colors)
    .GetProperties(BindingFlags.Static | BindingFlags.Public)
    .ToDictionary(p => p.Name,
                  p => new SolidColorBrush((Color)p.GetValue(null, null))
                 ); 
```

编辑：包括克里斯的建议：

```
var colors = typeof(Colors)
    .GetProperties(BindingFlags.Static | BindingFlags.Public)
    .Select(p => new ColorItem()
                 {
                     Name = p.Name,
                     Brush = new SolidColorBrush((Color)p.GetValue(null, null))
                 }
           ).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-13T00:36:37.797

为了补充企鹅先生的答案，这将 ColorCode 列为一个字符串值，可以`ColorConverter.ConvertFromString(..)`像颜色名称本身一样转换（）。这是一个 Linqpad 输出：

```
typeof(Colors)
    .GetProperties(BindingFlags.Static | BindingFlags.Public)
    .Select(p => new
    {
        Name = p.Name,
        Brush = new SolidColorBrush((Color)p.GetValue(null, null)),
    })
    .Select(p => new { p.Name, ColorCode = p.Brush.ToString(), p.Brush})
.Dump(); 
```

[![在此处输入图像描述](../Images/17b2692c6d3194637c4a4d3c3be119c6.png)](https://i.stack.imgur.com/4G9Wu.png)

# javascript - 我可以从 JavaScript 调用基于 Metro 风格的应用程序中可用的 Win32 子集吗？

> ID：10924259
> 
> 赞同：2
> 
> 时间：2012-06-07T00:43:30.770
> 
> 标签：javascript, windows-8, windows-runtime, microsoft-metro

[http://msdn.microsoft.com/en-us/library/windows/apps/br205757.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br205757.aspx) 显示了仍可在基于 Metro 风格的应用程序中使用的 Win32 / COM 子集。

如果您使用 C++ 进行开发，您可以简单地调用这样的方法。在 C# 中，您将使用 PInvoke.. 但是作为 JavaScript 开发人员，您在做什么？您是否必须编写一个 C# 或 C++ WinRT 组件来为您包装相关方法，或者是否有直接的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T06:18:51.827

您需要编写一个包含相关方法的 C++ WinRT 组件。Windows 运行时 API 可以直接从 javascript 调用，但本机 API 不能（没有描述本机 API 的元数据，因此 Javascript 不知道如何调用它）。

幸运的是，这在 Visual Studio 中非常简单 - 只需将一个 winrt C++ 组件添加到您的解决方案并在其中运行您的代码。

# html - html按钮锚显示块

> ID：10924271
> 
> 赞同：2
> 
> 时间：2012-06-07T00:45:18.357
> 
> 标签：html, css

锚标签不会根据内容自动调整大小，请参见以下示例：

[http://jsfiddle.net/XmnnY/](http://jsfiddle.net/XmnnY/)

我知道我可以使用显示内联或显示内联块，但我需要锚标记根据内部 html 大小（在本例中为文本）自动设置其宽度。

感谢帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T00:49:58.183

既然你给了它一个`display: block`样式，它将假定完整的可用宽度。

要么设置硬`width`，要么将显示更改为`inline-block`。

没有理由将其更改为`inline-block`可能会破坏您需要的任何其他内容，如果确实如此，请使用 JS 动态更改宽度，或修复它创建的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T16:39:25.520

使用 float:left/right （如果可以的话）和 clear:both 在以下项目上，或者

使用 inline-block 但删除所有空格并返回，因为 inline-block 显示内部 HTML 中的所有空格

```
<a href="#" style="display:block;float:left;">
    <img src="button.gif" />
</a>
<div style="clear:both">next element</div> 
```

还可以，还可以

```
<a href="#" style="display:inline-block;"><img src="button.gif" /></a> 
```

注意我已经删除了 a 标签内的所有回车和空格

浮动： http: [//jsfiddle.net/XmnnY/18/](http://jsfiddle.net/XmnnY/18/)内联块：http : [//jsfiddle.net/XmnnY/16/](http://jsfiddle.net/XmnnY/16/)

# php - 会话超时脚本在 MAMP 和托管帐户之间的行为不同

> ID：10924273
> 
> 赞同：0
> 
> 时间：2012-06-07T00:45:39.843
> 
> 标签：php, session, timeout

我有以下会话超时设置：

```
$inactive = $Timeout;

// check to see if $_SESSION['timeout'] is set
if(isset($_SESSION['timeout']) ) {
    $session_life = time() - $_SESSION['timeout'];
    if($session_life > $inactive) { 
        session_destroy(); 
        header("Location: index.php?page=login"); 
    }

} 
```

$Timeout 是从数据库条目中获得的。目前设置为1800。

每次用户点击链接或执行操作时，我都会这样做

```
$_SESSION['timeout'] = time(); 
```

在 MAMP 上，它按预期工作，并且会话在 30 分钟不活动后到期。

在托管帐户 (ipower) 上，它似乎在大约 5 分钟不活动后超时。

我很困惑这可能是什么原因造成的？有没有人经历过这样的事情？我可以检查哪些设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T01:40:05.320

可能您在 MAMP 和其他托管环境上将 session.gc_maxlifetime 设置为不同的值，session.gc_maxlifetime 设置为默认值。

见[http://www.php.net/manual/en/session.configuration.php#ini.session.gc-maxlifetime](http://www.php.net/manual/en/session.configuration.php#ini.session.gc-maxlifetime)

我做了一些搜索，这似乎是 ipower 的问题，试试这个，

为了在 iPower 上运行 PHP 会话，您必须将以下代码行添加到任何使用会话的 PHP 脚本的顶部：

```
session_save_path('/path_to_your_home_dir/dir_to_use_for_session_data'); 
```

# php - 自动从任何 URL 位置下载图像

> ID：10924275
> 
> 赞同：7
> 
> 时间：2012-06-07T00:46:00.597
> 
> 标签：php, download, http-headers

在我正在从事的项目的后期，我遇到了一个严重的问题：

我编写了一个 PHP 函数，它使用户可以通过单击其链接将图像自动下载到硬盘上。但这很容易，因为图像已上传到网站服务器，而且我知道它是完整的服务器地址。例如：`"home/clients/websites/w_apo/public_html/wp-content/uploads/image.jpg"`

但是现在客户希望能够从他自己的地址粘贴图像 URL，`http://www.something.com/image.jpg`并且仍然能够通过单击前端的链接自动下载该图像。

我是这个编程领域的新手，所以我真的需要你的帮助。任何链接，建议，资源都是最受欢迎的。

谢谢！

这是我当前的下载功能：

```
download_file($_GET['file']);

/******************************************************************/

function download_file( $fullPath ){

  // Must be fresh start
  if( headers_sent() )
    die('Headers Sent');

  // Required for some browsers
  if(ini_get('zlib.output_compression'))
    ini_set('zlib.output_compression', 'Off');

  // File Exists?
  if( file_exists($fullPath) ){

    // Parse Info / Get Extension
    $fsize = filesize($fullPath);
    $path_parts = pathinfo($fullPath);
    $ext = strtolower($path_parts["extension"]);

    // Determine Content Type
    switch ($ext) {
      case "pdf": $ctype="application/pdf"; break;
      case "exe": $ctype="application/octet-stream"; break;
      case "zip": $ctype="application/zip"; break;
      case "doc": $ctype="application/msword"; break;
      case "xls": $ctype="application/vnd.ms-excel"; break;
      case "ppt": $ctype="application/vnd.ms-powerpoint"; break;
      case "gif": $ctype="image/gif"; break;
      case "png": $ctype="image/png"; break;
      case "jpeg":
      case "jpg": $ctype="image/jpg"; break;
      default: $ctype="application/force-download";
    }

    header("Pragma: public"); // required
    header("Expires: 0");
    header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
    header("Cache-Control: private",false); // required for certain browsers
    header("Content-Type: $ctype");
    header("Content-Disposition: attachment; filename=\"".basename($fullPath)."\";" );
    header("Content-Transfer-Encoding: binary");
    header("Content-Length: ".$fsize);
    ob_clean();
    flush();
    readfile( $fullPath );

  } else
    die('File Not Found');

} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-07T01:03:32.157

你有几个选择。#1 使用`file_get_contents`. 这不是最好的方法，但它会起作用。

```
<?php
//Get the file
$content = file_get_contents("http://example.com/image.jpg");

//Store in the filesystem.
$fp = fopen("/location/to/save/image.jpg", "w");
fwrite($fp, $content);
fclose($fp);
?> 
```

选项 #2 使用 cURL：

[看这个例子](https://stackoverflow.com/questions/724391/saving-image-from-php-url-using-php)

# php - 如何加密非阻塞 PHP 套接字流？

> ID：10924276
> 
> 赞同：8
> 
> 时间：2012-06-07T00:46:13.563
> 
> 标签：php, sockets, ssl

我正在尝试以非阻塞（异步）方式使用 PHP 的 stream_socket_client() 函数。PHP 网站上的文档表明 STREAM_CLIENT_ASYNC_CONNECT 选项标志应该启用此功能。但是，下面的代码...

```
$start_time = microtime(true);
$sockets[$i] = stream_socket_client('ssl://74.125.47.109:993', $errint, $errstr, 1, STREAM_CLIENT_ASYNC_CONNECT);
$end_time = microtime(true);
echo "Total time taken: " . ($end_time-$start_time) . " secs."; 
```

输出以下内容：

```
Total time taken: 0.76204109191895 secs. 
```

显然，该函数是阻塞的（省略 STREAM_CLIENT_ASYC_CONNECT 标志不会有意义地改变“总时间”脚本输出这一事实也支持这一事实。

关于为什么会发生这种情况以及如何强制执行非阻塞连接尝试的任何想法？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-02-25T02:34:38.043

## 为什么 ssl:// 包装器方法不起作用...

此时在 PHP 中无法使用*ssl://*系列的流包装器来建立非阻塞连接，原因很简单：

*要协商 SSL/TLS 握手，您必须同时发送和接收数据。*

在不阻塞脚本执行的情况下，您根本无法在单个操作（例如流包装器所做的事情）中复制这样的信息。而且因为 PHP 最初被设计为在严格同步的环境中运行（即每个请求都有自己的进程的阻塞 Web SAPI），所以这种阻塞行为是很自然的事情。

因此，即使您设置了 STREAM_CLIENT_ASYNC_CONNECT 标志， *ssl://流包装器也不会按照您希望的方式运行。*但是，*仍然*可以在非阻塞套接字操作中使用 PHP 的流加密功能。

## 如何在您的非阻塞套接字流上启用加密...

SSL/TLS 协议在底层数据传输协议之上执行。这意味着我们只启用TCP/UDP/etc*之后的加密协议。*连接建立。因此，我们能够首先使用 STREAM_CLIENT_ASYC_CONNECT 异步标志连接到远程方，然后使用[`stream_socket_enable_crypto()`](http://us1.php.net/manual/en/function.stream-socket-enable-crypto.php).

## 没有错误处理的简单示例

此示例假设您了解如何使用`stream_select()`（或等效的描述符通知库以非阻塞方式使用套接字）。没有处理潜在的套接字错误。

```
<?php // connect + encrypt a socket asynchronously

$uri = 'tcp://www.google.com:443';
$timeout = 42;
$flags = STREAM_CLIENT_ASYNC_CONNECT;
$socket = stream_socket_client($uri, $errno, $errstr, $timeout, $flags);
stream_set_blocking($socket, false);

// Once the async connection is actually established it will be "writable."
// Here we use stream_select to find out when the socket becomes writable.
while (1) {
    $w = [$socket];
    $r = $e = [];
    if (stream_select($r, $w, $e, 30, 0)) {
        break; // the async connect is finished
    }
}

// Now that our socket is connected lets enable crypto
$crypto = STREAM_CRYPTO_METHOD_TLS_CLIENT;
while (1) {
    $w = [$socket];
    $r = $e = [];
    if (stream_select($r, $w, $e, 30, 0)) {
        break; // the async connect is finished
        $result = stream_socket_enable_crypto($socket, $enable=true, $crypto);
        if ($result === true) {
            // Crypto enabled, we're finished!
            break;
        } elseif ($result === false) {
            die("crypto failed :(");
        } else {
            // handshake isn't finished yet. Do another trip around the loop.
        }
    }
}

// Send/receive encrypted data on $socket here 
```

## 返回值的注意事项

`===`在检查我们的加密启用调用的结果时，使用相等性非常重要。如相关手册条目中所述：

> 成功时返回 TRUE，协商失败时返回 FALSE，如果数据不足，则返回 0，您应该重试（仅适用于非阻塞套接字）。

如果我们不使用`===`，我们就无法区分`false`和`0`。

# java - “线程中的异常”AWT-EventQueue-0“java.lang.NullPointerException”。我不知道我做错了什么

> ID：10924281
> 
> 赞同：1
> 
> 时间：2012-06-07T00:47:13.223
> 
> 标签：java, swing, nullpointerexception, actionlistener, listeners

我正在为 AP 计算机科学决赛制作计算器。我使用 Jigloo 在 Eclipse 中构建了 GUI，并且我很快尝试了解 Action Listeners，以便您可以点击按钮来显示数字。当我开始输入实际代码进行计算时，问题就开始出现了。我不断收到以下错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at NewJFrame.<init>(NewJFrame.java:82)
at NewJFrame$1.run(NewJFrame.java:73)
at java.awt.event.InvocationEvent.dispatch(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$000(Unknown Source)
at java.awt.EventQueue$1.run(Unknown Source)
at java.awt.EventQueue$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

我对 Java 很陌生，而且我以前从未尝试过这样的项目。如果你们能帮我解决这个问题，我会很高兴。这是我的实际代码的链接，由于某种原因它不适合代码框：[链接到代码](http://pastie.org/4041393)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T01:13:20.357

`initGUI()`在调用位于构造函数底部的之前，不会分配按钮变量。所以，当你这样做时：

```
jButton3.addActionListener(new ListenToOne()); 
```

... Java 看到了这一点：

```
null.addActionListener(new ListenToOne()); 
```

...这显然是一个问题。

# jira - Jira Issue 可以验证子任务中的字段吗

> ID：10924283
> 
> 赞同：1
> 
> 时间：2012-06-07T00:47:30.943
> 
> 标签：jira, jira-plugin

我目前的情况是我有一个包含许多状态的自定义工作流程。

对于每个 Jira 问题，都有一些子任务。

我想要一个验证机制，它可以防止问题进入下一个状态，直到某些自定义字段得到验证。但是自定义字段不属于 Jira 问题，它们属于子任务。

例如

```
 1\. There are statuses: A, B, C, D, etc. for the workflow;

   2\. There is an issue X who has Y and Z as sub-task; 

   3\. Sub-task Y has a and b as custom fields;

   4\. Sub-task Z has c and d as custom fields;

   5\. The issue X won't go from status A to status B until custom fields a, b, c and d are validated. 
```

任何人都知道有什么好的插件或方法我可以这样做。

注意：我知道有一个叫 Jira Suite 插件的插件很强大，我可以在过渡时做一些验证，但是字段验证仅针对问题，不包括子任务自定义字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T06:47:20.660

使用 Jira 脚本套件可以做到这一点。有关字段和函数用法的信息，请查看[问题 API](http://docs.atlassian.com/jira/5.0/com/atlassian/jira/issue/Issue.html)。更具体地说，您可能需要使用以下功能： `Collection getSubTaskObjects()`

接下来遍历子对象并检查您可能需要的任何字段。

如果您在编写代码时遇到问题，请随时询问..

# javascript - 使用 javascript 关闭移动浏览器选项卡

> ID：10924284
> 
> 赞同：3
> 
> 时间：2012-06-07T00:47:36.340
> 
> 标签：javascript, jquery, android, ios, jquery-mobile

我需要一个本机应用程序来触发带有一些 URL 的浏览器，该 URL 会将用户带到移动网站。在移动网站内部，必须有一个关闭浏览器（或向本地应用程序发送任何信号）的按钮，以便用户返回本地应用程序。目前我正在尝试关闭窗口，但我认为这不会在所有移动设备中起作用。

我的代码：

```
$( document ).bind('pageinit', function(){
   $.mobile.activePage.find('#close').click(function(){
      window.open('', '_self', ''); 
      window.close();
   });
}); 
```

我正在使用 jQuery 移动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T00:53:21.290

设置自定义 URI 处理程序（[适用于 Android](https://stackoverflow.com/questions/3471503/how-to-listen-for-a-custom-uri)和[iOS](http://mobiledevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)）。然后你所要做的就是重定向到一个匹配的 URL，也许使用`window.location`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T00:53:47.790

似乎存在不允许您通过 JavaScript 关闭窗口的安全限制。看[这里](http://www.javascript-coder.com/window-popup/javascript-window-close.phtml)

编辑：您基本上有两个选择：为您正在开发的每个平台实现自定义 URL 处理程序；或将 Web 视图嵌入到您的应用程序中（iOS 的 UIWebView 或 Android 的 WebView）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T02:17:45.083

在 iOS 上，如果您从您的应用程序启动 Safari，您将无法在 Safari 关闭后返回您的应用程序，除非您的应用程序注册为自定义 URL 处理程序并且您所在的页面启动了一个启动您的应用程序的 URL。

在 iOS 上，如果不是启动 Safari，而是在 UIWebView 中显示网页，则您可以控制退出页面。

# java - 在 Android 上查找应用的 CPU 使用率

> ID：10924289
> 
> 赞同：5
> 
> 时间：2012-06-07T00:48:17.290
> 
> 标签：java, android, cpu-usage

是否有提供正在运行的应用程序的 CPU、内存使用情况的 android API？我想根据 cpu 使用情况动态调整我在应用程序中的处理。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T01:43:45.243

这个问题已经在[这里](https://stackoverflow.com/a/5560634/844882)回答了。您还可以使用`adb`如下方式获取列表，

```
adb shell top -m 10 
```

# android - 屏幕旋转时如何防止WebView自动刷新

> ID：10924291
> 
> 赞同：24
> 
> 时间：2012-06-07T00:48:26.577
> 
> 标签：android, android-webview

我的应用程序 - 当屏幕旋转和我的活动回到第一个 1 时，带有 WebView 的活动会自动刷新。

示例：当我从 A->B 或 BC 切换时，WebView 处理 3 活动（A，B，C），然后当屏幕旋转时它将返回到 A。

我的问题：我们如何让活动保持活动屏幕旋转？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-07T01:12:37.137

解决这个问题的方法不止一种。

最简单的方法是在清单中添加[`android:configChanges="orientation|screenSize"`](http://developer.android.com/guide/topics/manifest/activity-element.html#config)相关内容。`Activity`通过设置此标志，您可以告诉 Android 不要破坏`Activity`并且您将自己处理所有方向更改（如果有）。

更现代的方法是将`WebView`a 放入内部并使用标志`Fragment`使其保留其实例。`setRetainInstance(true)`主机`Activity`仍然会在方向更改时被破坏，但`Fragment`包含主机将被`WebView`简单地分离并重新连接，而无需重新创建自身。您可以在 API 演示中找到此功能[的示例](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/FragmentRetainInstance.html)。请记住，支持库提供了一个 pre-Honeycomb 兼容的片段实现，所以不要被“常规” `Fragment`类的 API 级别所迷惑。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-02-16T12:57:40.327

突出显示@kirgy 评论，如果您的 API > 3.2，则必须添加 `orientation|screenSize`到清单中，在某些情况下，如果没有它，它将无法工作。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-07T01:13:14.137

添加`android:configChanges="orientation"`到您的清单文件以防止在屏幕方向更改时重新启动。

喜欢：：

```
 <activity android:name=".MyActivity"     
    android:configChanges="orientation|screenSize"  
    android:label="@string/app_name"> 
```

有关一些参考资料，请参阅[此内容。](http://developer.android.com/guide/topics/resources/runtime-changes.html#HandlingTheChange)

# php - Fedex Web 服务：错误 9040 - 无法启动跟踪

> ID：10924294
> 
> 赞同：5
> 
> 时间：2012-06-07T00:49:03.487
> 
> 标签：php, soap, fedex

我在尝试使用 Fedex 的网络服务提取跟踪信息时遇到问题。我使用的是有效的追踪号码，并且可以在 Fedex 的网站上查看详细信息。但是，我收到错误 9040“我们的系统尚未收到以下货件的信息。请重试或拨打 1.800.Go.FedEx(R) 800.463.3339 联系客户服务。” 我是不是遗漏了什么？

我的代码：

```
<?php

$path_to_wsdl = "URL_TO_WSDL";
ini_set("soap.wsdl_cache_enabled", "0");

$client = new SoapClient($path_to_wsdl, array('trace' => 1));

$request['WebAuthenticationDetail'] = array(
    'UserCredential' =>array(
        'Key' => 'MY_KEY', 
        'Password' => 'MY_PASSWORD'
    )
);
$request['ClientDetail'] = array(
    'AccountNumber' => 'MY_ACCT', 
    'MeterNumber' => 'MY_METER'
);
$request['TransactionDetail'] = array('CustomerTransactionId' => 'ActiveShipping');
$request['Version'] = array(
    'ServiceId' => 'trck', 
    'Major' => '5', 
    'Intermediate' => '0', 
    'Minor' => '0'
);
$request['PackageIdentifier'] = array(
    'Value' => 'TRACKING#',
    'Type' => 'TRACKING_NUMBER_OR_DOORTAG');

$response = $client->track($request);
var_dump($response);

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T23:26:15.740

知道了！

致电网络服务部门，他们告诉我从 wsdl 文件中删除“测试版”。这似乎与我之前在回答此问题时发现的地址不同。在 wsdl 文件的第 1507 行，进行以下更改：

从：

```
<s1:address location="https://wsbeta.fedex.com:443/web-services/track"/> 
```

至

```
<s1:address location="https://ws.fedex.com:443/web-services/track"/> 
```

我稍微更改了其余代码，但这不应该有所作为。为了安全起见，这里是：

```
<?php
$path_to_wsdl = "PATH_TO_WSDL_FILE";

$client = new SoapClient($path_to_wsdl, array('trace' => 1));

$trackRequest = array(
    'WebAuthenticationDetail' => array(
        'UserCredential' => array(
            'Key'      => 'MY_KEY',
            'Password' => 'MY_PASSWORD'
        )
    ),
    'ClientDetail' => array(
        'AccountNumber' => 'MY_ACCT_#',
        'MeterNumber'   => 'MY_METER_#'
    ),
    'Version' => array(
        'ServiceId'    => 'trck',
        'Major'        => '5',
        'Intermediate' => '0',
        'Minor'        => '0'
    ),
    'PackageIdentifier' => array(
        'Type'  => 'TRACKING_NUMBER_OR_DOORTAG',
        'Value' => 'THE_TRACKING_#',
    ),
    'CustomerTrasactionId',
    'IncludeDetailedScans' => 1
);
$response = $client->track($trackRequest);
var_dump($response);

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:31:33.333

我也在解决同样的问题。我正在尝试几件事，你可以看看有没有什么对你有用。尝试包括 ShipDateRangeBegin 和 End 元素、您的测试帐户/付款人号码或目的地信息。我在[这里](http://www.codingforums.com/archive/index.php/t-198288.html)发现切换到 xml 和 ssl 发布请求可以解决问题，但这不是我的选择。也许它会帮助你？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T08:06:05.747

使用 xml-request 时我有同样的问题。我这样解决了这个问题：

```
$endpointurl = "https://gatewaybeta.fedex.com:443/xml"; // remove word "beta"
$endpointurl = "https://gateway.fedex.com:443/xml";

...
$request = stream_context_create($form);
$browser = fopen($endpointurl , 'rb' , false , $request);
$response = stream_get_contents($browser);
... 
```

# mobile - tumblr 手机无法使用 prettify.js

> ID：10924297
> 
> 赞同：1
> 
> 时间：2012-06-07T00:49:13.147
> 
> 标签：mobile, tumblr, pretty-print

所以我将 Prettify.js 和 Prettify.css 连接到我的新 Tumblr 博客中。它在 chrome、IE 和 Firefox 中运行良好，但当我打开我的 Android 手机时，我很惊讶，突然​​里面的代码......看起来像是一场暴行。

我正要去挖掘，但在我花几个小时试图解决其他人已经解决的问题之前，我想看看我的老 Stack Buddies 是否对此事有什么要说的。

aquamoogle.tumblr.com

任何解决方案都将不胜感激，如果没有发布，我可能会在周末结束前提出解决方案。

**澄清编辑** 这是通过 Tumblr Android 应用程序查看帖子。我不认为它与手机版本有任何关系，但因为肯定有人会问它是运行 Android 2.3.4 的摩托罗拉 Droid Bionic

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T00:22:15.900

好吧，既然没有人和这个一起来，我会把答案扔在那里。从 APK 反编译后的 Tumblr 应用程序不使用标准网络框架。这意味着 javascript 执行不会嵌入到移动应用程序的视图中。

糟透了我知道...另一种可能的解决方案是使用直接的 CSS 进行格式化，但这在移动版本中甚至不起作用，因为 CSS 表被移动样式表覆盖以实现更紧凑的格式。

因此，由于移动应用程序没有在与网络驱动的博客相同的边界内运行，因此这个问题被认为是“无法解决的”。

如果有人碰巧有一个可行的解决方案，我很想听听它，但目前我没有有效的解决方案。但是，很高兴知道。

# maven - 在 PlayN 中，如何排除 Maven 编译的目录？

> ID：10924298
> 
> 赞同：0
> 
> 时间：2012-06-07T00:49:20.657
> 
> 标签：maven, playn

我想使用 maven 从命令行构建我的游戏的 html 版本。但是，当我`package`为文件夹运行命令时`core`：

```
mvn clean package -pl core,html 
```

由于源路径中的一些单元测试，我收到以下错误：

```
[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] /home/klenwell/projects/mygame/playn/mygame/core/src/main/java/mygame/playn/tests/unit/UserDataTest.java:[3,23] package org.junit does not exist

[ERROR] /home/klenwell/projects/mygame/playn/mygame/core/src/main/java/mygame/playn/tests/unit/UserDataTest.java:[7,16] package org.junit does not exist

... 
```

如何将包含这些测试文件的目录排除在编译中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T04:15:53.733

It is not a good idea to mix `source` and `test` classes. As per maven convention, you should move the tests from `src/main/java` to `src/test/java`.

You should add the dependency for `junit` so that the tests can be compiled.

You can choose to skip the tests (if they are broken) by using the `-DskipTests` or similar while running maven.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T00:49:21.330

将以下块添加到`plugins`我的核心`pom.xml`文件部分，从编译中排除测试并允许构建成功：

```
 <plugin>
    <artifactId>maven-compiler-plugin</artifactId>
    <configuration>
      <excludes>
        <exclude>**/*Test*.java</exclude>
      </excludes>
    </configuration>
  </plugin> 
```

# iphone - popToViewController 无法在视图之间切换

> ID：10924303
> 
> 赞同：1
> 
> 时间：2012-06-07T00:50:02.593
> 
> 标签：iphone, uinavigationcontroller

我在 IBAction 按钮中有这个功能：

我从一个带有按钮的表格开始，当按下该按钮时，会发生这种情况：

```
TabBarController *v = [[TabBarController alloc] 
                          initWithNibName:@"TabBarController" bundle:nil];
[self.navigationController pushViewController: v animated:YES];
[v release]; 
```

在第二个视图中，还有另一个按钮，当按下它时：

```
NSArray *array = [self.navigationController viewControllers];

[self.navigationController 
    popToViewController:[array objectAtIndex:1] animated:YES]; 
```

这会导致应用程序崩溃，并且在索引 0 处它什么也不做。这是因为第二页不像第一页那样是 UITable 吗？

我希望能够从 UITable 视图来回移动到 UIView，我应该`addSubview`改用它吗？我需要第一个视图有一个导航栏，但第二个不应该。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:20:20.577

我认为问题在于`[array objectAtIndex:1]`您当前的 ViewController，因此弹出到当前视图控制器可能是您崩溃的原因（虽然没有尝试过）

那你为什么不这样做：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T10:13:24.007

只需在按钮代码中添加以下行，它就可以正常工作

[self.navigationController popViewControllerAnimated:YES];

# crystal-reports - Crystalreport 重复记录只显示一次

> ID：10924305
> 
> 赞同：0
> 
> 时间：2012-06-07T00:50:05.920
> 
> 标签：crystal-reports

在我的水晶报告中，记录是这样显示的。

```
NAME    DEPOSIT     REMARK

LUKE    100.00      DECEMBER
LUKE    10.00       NOV
LUKE    10.00       NOV 
```

但是我们在那里发现了重复的记录。在这种情况下，我不想触摸我的查询，只想在水晶报表中进行更改。我想成为的样子

```
NAME    DEPOSIT     REMARK

LUKE    100.00      DECEMBER
LUKE     10.00      NOV 
```

任何决议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T04:33:37.333

如果您希望在 Crystal Reports 设计器中实现此目的，则菜单中有一个选项“数据库”，显示“选择不同的记录”。尝试使用它只会返回唯一记录，但请确保在详细信息部分中也使用唯一字段。

希望这可以帮助。

# c++ - 将大向量存储在堆栈中是一个坏主意吗？

> ID：10924307
> 
> 赞同：5
> 
> 时间：2012-06-07T00:50:28.223
> 
> 标签：c++, vector, heap-memory, stack-memory, stack-corruption

我一直在研究一堆图像处理程序..没什么花哨的，主要是快速而肮脏的实验。图像数据存储在堆栈上声明的向量中（当我不需要传递数据时，我尽量避免使用指针）。我注意到尽管进行了无数次的调试和单步调试，我的一些函数的行为仍然非常奇怪。有时调试器会给我一个错误，它不能评估某个变量等等。事情通常是没有意义的，过去的经验告诉我，当这种情况发生时，这意味着发生了某种溢出或内存损坏。首先想到的是，这可能是由于我将大量图像数据存储到向量中。

然而，我的印象是向量将它们的实际数据存储在堆中，所以我认为在堆栈中放置一些这样的大向量并没有什么坏处。我这样想错了吗？我应该分配我的向量并将它们存储在堆而不是堆栈中吗？

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T01:02:00.713

> [...]向量将它们的实际数据存储在堆中

`vector`与所有其他容器一样，使用分配器对象进行内存管理。通常，如果您没有指定任何内容作为模板的第二个参数，则使用默认分配器 -- `std::allocator`from `<memory>`--。分配器负责保留内存。可以从自由商店或堆栈上自由地这样做。

大多数实现通常使用*pimpl*习惯用法并在对象中存储一个指针，该指针指向`vector`free-store 上的实际内存。

> 我注意到尽管进行了无数次调试和步进，但我的一些函数的行为非常奇怪

您可能需要检查您是否`vector`正确使用了您的 s。查看标准，了解每个成员函数获得的保证、包含的类型必须满足哪些条件以及迭代器何时失效。这应该是一个好的开始。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T00:58:54.423

`std::vector`不会将其内存存储在自身内部。它从堆中分配内存（或者你的分配器从哪里得到它）。所以`vector` *本身*是否在堆栈上是无关紧要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T00:59:04.520

我愿意说 99.9% 的向量实现将所有数据存储在堆中。也许有人在那里做了一个堆栈实现，但你可能没有处理这个问题。如果发生随机的、间歇性的故障，则更有可能出现未使用指针算法检查的极端情况。**无论哪种方式，如果没有您发布代码**，我们就无法知道

# css - CSS 不透明动画 Safari 的错误？

> ID：10924308
> 
> 赞同：3
> 
> 时间：2012-06-07T00:51:06.747
> 
> 标签：css, css-transitions, css-animations

我有一个简单的动画（在本例中仅适用于 Safari）：

```
h1 {
    -webkit-animation: moveDown 1s ease-in-out;
}

@-webkit-keyframes moveDown {
    0% {-webkit-transform: translateY(-20px); opacity: 0;}
    100% {-webkit-transform: translateY(0px); opacity: 1;}
} 
```

在最新的 Safari (5.1.5) 中它工作得很好。

但偶然我在较旧的 Safari (5.0.6) 中查看了该示例，但什么也没看到。h1没了。

通过添加非旋转（不透明度和动画作品）来触发eather：

```
@-webkit-keyframes moveDown {
    0% {-webkit-transform: translateY(-20px) rotate(0deg); opacity: 0;}
    100% {-webkit-transform: translateY(0px) rotate(0deg); opacity: 1;}
} 
```

或从 1% 开始（不透明度不起作用，但动画）：

```
@-webkit-keyframes moveUp{
    1% {-webkit-transform: translateY(-20px); opacity: 0;}
    100% {-webkit-transform: translateY(0px); opacity: 1;}
} 
```

它再次起作用了。

这让我想到了两个严肃的问题：

1.  在第一个示例中我做错了什么吗？
2.  旧版本的 Safari 中是否存在我应该区别对待的已知错误？

**原因：**

我不介意您在不支持的浏览器中看不到动画（这只是一个不错的附加功能），但如果您的动画元素不再出现，我会敢于不知道。

我怎样才能在一般情况下将动画用作附加组件而不用担心？

如果有人要小提琴：我尝试重新创建它。但这里还有一个有趣的事情：完全相同的代码在 jsfiddle 中的旧 Safari 中不会有任何影响。它也不会生气或消失。

~~**编辑：**~~

~~我只是看到 h1 不再使用原始代码消失（我无法重建它），但没有做任何动画。它仅适用于所描述的触发器之一。~~

**JS-小提琴：**

[这里是两个例子的工作小提琴。](http://jsfiddle.net/jcBpF/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:38:21.120

我手边没有旧版本的 Safari，但我记得在旧版本中玩动画并遇到过这些类型的错误。我通过将“结束状态”放在选择器中来解决它们，例如`p {opacity: 1}` [http://jsfiddle.net/pkFaT/](http://jsfiddle.net/pkFaT/)

# python - 如何按计划在后台运行我的 python 脚本？

> ID：10924309
> 
> 赞同：2
> 
> 时间：2012-06-07T00:51:07.857
> 
> 标签：python, linux, service

我有一个小的 python 脚本，它创建了一个从 MySQL 中提取的数据图。我试图找出一种方法来定期在后台运行脚本。我尝试了很多事情：

1.  运行脚本的 Cron 作业
2.  循环计时器
3.  使用 & 命令在后台运行脚本

这些都有优点和缺点：

1.  每半小时运行一次的 Cron 作业似乎消耗了更多的资源，这是值得的。
2.  放入脚本的循环计时器实际上并没有将脚本放在后台，它只是保持它运行。
3.  Linux & 命令使进程后台运行，但与真正的 Linux 服务不同，我无法在不杀死它的情况下重新启动/停止它。

有人可以指出一种方法来充分利用所有这些方法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-07T01:00:01.050

你为什么不试着把你的脚本变成一个合适的守护进程。这个[链接](https://stackoverflow.com/questions/473620/how-do-you-create-a-daemon-in-python)是一个很好的起点。

```
import os
import subprocess
import time
from daemon import runner

class App():
    def __init__(self):
        self.stdin_path = '/dev/null'
        self.stdout_path = '/dev/tty'
        self.stderr_path = '/dev/tty'
        self.pidfile_path =  '/tmp/your-pid-name.pid'
        self.pidfile_timeout = 5
    def run(self):

        try:
            while True:

                ### PUT YOUR SCRIPT HERE ###

                time.sleep(300)

        except Exception, e:
            raise

app = App()
daemon_runner = runner.DaemonRunner(app)
daemon_runner.do_action() 
```

您可以像任何其他 linux 服务一样启动/停止/重新启动此脚本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T01:03:57.640

一般来说，cron 作业可能是一种很好的方法，因为 shell 方法需要手动干预才能启动它。

几个建议：

您可以使用锁定文件来确保 cron 作业仅启动 python 脚本的一个实例 - 将 cron 用于较大的作业时通常会出现问题，因为它在第一个实例实际完成之前启动了第二个实例。您可以简单地通过检查锁定文件是否存在来完成此操作，如果不存在，则在脚本开头“触摸”该文件并在脚本末尾将其作为您的最后一个操作“rm”。如果锁定文件存在——只需退出脚本，因为已经有一个实例在运行。（当然，如果脚本死了，您必须在再次运行脚本之前删除锁定文件）。

此外，如果过多的资源使用是一个问题，您可以通过给它一个低优先级（例如，nice -n 19 的前缀）来确保脚本不会占用太多资源。

# cocos2d-x - cocos2d-x中两层之间如何交换数据？

> ID：10924311
> 
> 赞同：4
> 
> 时间：2012-06-07T00:51:17.693
> 
> 标签：cocos2d-x

我有带有技能按钮的图层 A 和带有 plyer 精灵的图层 B，我需要的是，当我触摸技能按钮时 plyer 将使用该技能。当我触摸按钮时，如何让 B 层知道？有没有人可以用简单的演示给我看？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T13:49:47.093

我认为最好的方法是使用单例结构。例如，做一个 DataModule，创建 getter 和 setter，并使用静态指针调用它们来写入或读取数据。

# visual-studio-2010 - 如何使用 Gallio 在 Visual Studio 的测试系统中运行 MSpec？

> ID：10924312
> 
> 赞同：4
> 
> 时间：2012-06-07T00:51:44.213
> 
> 标签：visual-studio-2010, gallio, mspec

我正在尝试使用 Gallio 在 Visual Studio 的测试系统中运行 MSpec 测试，但它似乎忽略了 IDE 中的 MSpec 插件。我做了什么：

1.  安装 Gallio
2.  将 MSpec NuGet 包添加到我的测试项目中
3.  将 Gallio NuGet 包添加到我的测试项目中
4.  将 MSpec Gallio 集成所需的三个文件复制到 Gallio 安装目录中的“MSpec”文件夹中
5.  写了一个 MSpec 测试
6.  在 IDE 中运行“解决方案中的所有测试”

这产生了以下错误

> “没有运行任何测试，因为没有加载测试或选定的测试被禁用”

为了检查 Gallio 本身，我添加了对 MbUnit 的引用并创建了一个简单的 MbUnit 测试。我还运行了 Gallio 的其他工具来检查插件是否被拾取。我什至重新启动了 VS。

**结果**

使用`Gallio.Echo`或`Gallio.Icarus`成功执行 MbUnit 和 MSpec 测试运行测试，因此插件*正在*被拾取。从 Visual Studio 运行测试会运行 MbUnit 测试而不是 MSpec 测试，因此 Gallio 集成似乎正在工作（只是不是 MSpec 插件）。有什么想法吗？

在任何人提到它之前：是的，我宁愿使用**ReSharper**，但目前我的情况不能选择许可证。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T06:57:56.347

**更新：**现在是一个将 MSpec 集成到 VS2012 的测试系统中的项目。它在[Visual Studio Gallery](http://visualstudiogallery.msdn.microsoft.com/4abcb54b-53b5-4c44-877f-0397556c5c44)上可用，[源代码在 GitHub 上](https://github.com/eugeneduvenage/machine.vstestadapter)。

在开始调试两个项目源的问题后，似乎有两个潜在问题导致 MSpec 和 Gallio 的 VS 运行器之间不兼容。但是，这两个问题都源于 VS 运行程序使用 Cecil 从程序集中加载类型信息（大概是为了避免将测试程序集加载到主 VS AppDomain）。

当我发现更多信息时，我会更新这个答案（希望会产生一个或多个补丁来解决问题）。

**问题 1：嵌套类型被忽略**

我一直在为我的测试使用嵌套类型`SubjectSpec+when_something`（

这最终成为一个相对简单的修复，我已将其作为补丁提交给 Gallio 开发人员。如果/当我确认它将属于哪个版本时，我将更新此答案。

**问题 2：MSpec 导致“调用测试驱动程序时发生异常”**

如果删除容器类型以避免问题 1，则 MSpec 会引发此错误。这样做的原因是 MSpec 试图创建测试对象的实例，但 Gallio 只是为它提供了一个实际上无法创建的*包装器对象。* `Type`

# ruby - 在 MAC 上安装 VisualRuby

> ID：10924315
> 
> 赞同：0
> 
> 时间：2012-06-07T00:52:22.533
> 
> 标签：ruby, macos, user-interface, gtk, glade

我试图了解如何在 MAC 上安装 visualruby。我在 ubuntu 工作，我已经开发了 Ubuntu 和 Windows 的安装说明，但我不知道 MAC 的相应说明：

[http://visualruby.net/下载](http://visualruby.net/Download)

我知道您需要安装[Glade Interface Designer](http://glade.gnome.org/)。这也应该安装图形工具包 gtk2。Visualruby 需要 gtk2。之后你可以安装visualruby：

宝石安装视觉红宝石

我的朋友告诉我，它需要在 X11 终端中运行。我不明白这些。我想制定分步说明，将其安装在包含正确版本的 Glade/Gtk2 的 MAC 上。我知道 visualruby 需要 Glade 版本 2.6 到 2.8。最新版本的 Glade 使用了不好的 Gtk3。

编辑：Visualruby 还需要安装“gtksourceview2”（也许通过自制软件？）

分步说明将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T02:16:56.333

我就是上面提到的那个朋友。我在 QuartzX11 上取得了最大的成功。我通过自制软件安装了 glade、gtk+ 和 gtksourceview，但也许这不是最好的方法。

# php - 匹配包含空格的图片链接

> ID：10924318
> 
> 赞同：2
> 
> 时间：2012-06-07T00:52:54.317
> 
> 标签：php, regex

```
$update = ' sometext http://www.site1.com/images/some image with spaces.jpg some other text  http://www.site2.com/some_image.jpg';

preg_match_all('#(?:<\>]+href=\")?(?:http://)?(http(s?)://([^\s]*)\.(jpg|gif|png))#',       $update, $group_imagelink);
echo $group_imagelink[1][0];
echo $group_imagelink[1][1]; 
```

我的正则表达式不想从带有空格的文本中提取链接。我需要将链接中的空格替换`20%`为在之后使用`copy()`，但我仍然希望用空格保留我的文本。我怎样才能做到这一点？

[另外，我的代码对http://www.myserver.com/virus.exe#fakeParam=.jpg](http://www.myserver.com/virus.exe#fakeParam=.jpg)之类的东西是否安全？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T12:25:42.570

这对我有用：

我换了

```
 [^\s]* 
```

和

```
 .*? 
```

# mysql - CF8 和 AES 解密 MySQL AES：编码不同

> ID：10924320
> 
> 赞同：4
> 
> 时间：2012-06-07T00:53:36.970
> 
> 标签：mysql, encryption, coldfusion, aes, coldfusion-8

这更像是我做错了什么而不是关键任务的练习，但我仍然想看看我犯了什么（可能很简单）错误。

我正在使用 mysql (5.1.x) AES_ENCRYPT 来加密字符串。我正在使用 CF 的 generateSecretKey('AES') 来制作密钥（我已经尝试过默认为 128 和 256 位长度）。

因此，假设我的代码如下所示：

```
 <cfset key = 'qLHVTZL9zF81kiTnNnK0Vg=='/>
    <cfset strToEncrypt = '4111111111111111'/>
    <cfquery name="i" datasource="#dsn#">
        INSERT INTO table(str) 
            VALUES AES_ENCRYPT(strToEncrypt,'#key#');
    </cfquery> 
```

这可以正常工作，我可以使用 SELECT AES_DECRYPT(str,'#key#') AS... 选择它，完全没有问题。

我似乎无法做的是让 CF 使用以下方法对其进行解密：

```
 <cfquery name="s" datasource="#dsn#">
        SELECT str
          FROM table
    </cfquery>
    <cfoutput>#Decrypt(s.str,key,'AES')#</cfoutput> 
```

或者

```
 <cfoutput>#Decrypt(toString(s.str),key,'AES')#</cfoutput> 
```

我不断收到“输入和输出编码不同”（包括 toString() - 否则我会收到二进制数据错误）。db 中加密字符串的字段类型是 blob。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T06:10:01.957

[此条目](http://info.michael-simons.eu/2011/07/18/mysql-compatible-aes-encryption-decryption-in-java/)说明 mySQL 处理 AES-128 密钥的方式与您预期的略有不同：

> .. 如果密码长于 16 个字符，MySQL 算法只是给定密码短语的字节与前一个字节，当密码短于 16 个字符时，将它们保留为 0。

没有经过高度测试，但这似乎产生了相同的结果（以十六进制表示）。

```
<cfscript>
    function getMySQLAES128Key( key ) {
        var keyBytes   = charsetDecode( arguments.key, "utf-8" );
        var finalBytes = listToArray( repeatString("0,", 16) );

        for (var i = 1; i <= arrayLen(keyBytes); i++) {
            // adjust for base 0 vs 1 index
            var pos = ((i-1) % 16) + 1;
            finalBytes[ pos ] = bitXOR(finalBytes[ pos ], keyBytes[ i ]);
        }

        return binaryEncode( javacast("byte[]", finalBytes ), "base64" );
    }

    key     = "qLHVTZL9zF81kiTnNnK0Vg==";
    input   = "4111111111111111";

    encrypted = encrypt(input, getMySQLAES128Key(key), "AES", "hex");
    WriteDump("encrypted="& encrypted);

    // note: assumes input is in "hex". either convert the bytes 
    // to hex in mySQL first or use binaryEncode
    decrypted = decrypt(encrypted, getMySQLAES128Key(key), "AES", "hex");
    WriteDump("decrypted="& decrypted);
</cfscript> 
```

**注意：**如果您使用 mySQL 进行加密，请务必查看其文档，其中提到[纯文本可能会出现在各种日志中](http://dev.mysql.com/doc/refman/5.5/en/encryption-functions.html) （复制、历史记录等），并且“任何人都可以读取该信息”。

* * *

**更新：**事情可能已经改变，但根据[这个 2004 年的错误报告](http://bugs.mysql.com/bug.php?id=3172)，该`.mysql_history`文件仅在 Unix 上。（记住可能还有其他日志文件）清除.mysql_history的详细说明可以[在手册](http://dev.mysql.com/doc/refman/5.0/en/mysql-history-file.html)中找到，但总结如下：

> *   将`MYSQL_HISTFILE`变量设置为 /dev/null（在每次登录时）
> *   创建 .mysql_history 作为 /dev/null 的符号链接（仅一次）

# ruby - ruby 尝试将两个参数相加时出错，这些参数*应该*（我有疑问）有预定义的值（“未定义的方法 '+'”）

> ID：10924324
> 
> 赞同：0
> 
> 时间：2012-06-07T00:54:01.527
> 
> 标签：ruby, parameters, initialization, parameter-passing, instance-variables

这是代码

```
class RockPaperScissors

attr_reader :rock, :paper, :scissors, :determinant

def initialize
    @rock=1
    @paper=2
    @scissors=4
    @determinant=0
end

def play(param1, param2)
    @determinant = param1 + param2
    puts @determinant
end

end 
```

现在这段代码不完整，我需要 @determinant 变量实际上是 param1 和 param2 的总和才能继续。

这是命令行活动的简短摘要

```
irb
source "rps2.rb"
rps = RockPaperScissors.new
rps.play(:scissors, :rock)

NoMethodError: undefined method '+' for :scissors:Symbol
from rps2.rb.rb:14:in 'play'
from (irb):23 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T01:03:26.387

尝试这个：

```
rps.play(rps.scissors, rps.rock) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T01:08:59.497

如果你有“attr_reader”，你需要这样玩：

```
rps.play(rps.scissors, rps.rock) 
```

另一种使用符号的可能方式：

```
def initialize
    @hand = { :rock => 1, :paper => 2, :scissors => 4 }
    @determinant=0
end

def play(param1, param2)
    # check if params are correct

    puts @determinant = @hand[param1] + @hand[param2]
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T00:59:22.630

```
@determinant = param1 + param2 
```

也许应该是

```
@determinant = instance_variable_get("@#{param1}") + instance_variable_get("@#{param2}") 
```

# symfony-1.4 - 如何在模型类中获取邮件程序

> ID：10924327
> 
> 赞同：0
> 
> 时间：2012-06-07T00:54:18.973
> 
> 标签：symfony-1.4, swiftmailer

我想在 sfGuardDoctrine 之上设置一个用户登录过程，它将密码设置为随机密码。当创建用户或重置他的密码时会发生这种情况。

我想我应该把这个例程集中在 sfGuardUser 模型类中吗？我不知道如何从那里获取 Swiftmailer 实例。所有文档似乎都在一个动作中调用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T02:43:38.003

您需要获取上下文才能访问邮件程序对象。这是一个应该在您的模型类中工作的撰写和发送示例。

```
$sent = sfContext::getInstance()->getMailer()->composeAndSend(
              "sender_email",
              "recipient_email",
              "subject",
              "body"                   
              ); 
```

# sql-server - 多租户与一些曲折

> ID：10924331
> 
> 赞同：2
> 
> 时间：2012-06-07T00:55:18.960
> 
> 标签：sql-server, database-design, architecture, multi-tenant

我的任务是扩展现有的银行应用程序以支持多租户。该应用程序目前服务于约 100 家公司，拥有约 4000 名用户；并准备好迎接重大增长。

细节有点复杂，所以这里有一个简短的历史：
最初，这个门户是为一家抵押贷款公司创建的，该公司管理 3 种类型/角色的账户：

1.  内部 - 可以管理所有用户、银行、经纪人和抵押文件的抵押公司员工
2.  客户 - 可以只管理他们的用户和抵押文件的银行员工
3.  经纪人 - 独立承包商只能访问他们的抵押文件

一帆风顺，然后是客户#2：为每个新的抵押贷款公司创建了一个单独的实例。采用该系统。单独的实例不可避免地演变成单独的版本。现在已经迁移到一个单一的、可配置的版本，但每个抵押公司仍然存在一个单独的实例。

1.  第一个转折是越来越多的经纪人为不止一个抵押贷款公司工作，并被迫为花旗、GMAC、Chase 和 BoA 保持单独的登录。

2.  第二个转折点是银行员工必须为每个抵押贷款公司的实例维护一个登录名。（因为单独的数据库）

3.  第三个转折是，更多的银行想要像抵押贷款公司那样的实例，并要求与他们合作的所有抵押贷款公司都来找他们（部分由上面的转折#2驱动。）

实际上有银行在 1 个实例中将文件分配给抵押公司，然后抵押公司的员工正在登录银行实例并将数据双重输入到他们自己的实例中。都在同一个数据库服务器上！

因此，我们希望/需要将这个 N 平方膨胀整合到 1 个多租户数据库中，并为我们的客户消除重复帐户和重复数据输入。有时我们的客户是银行，有时是抵押贷款公司。它就像银行和抵押贷款公司的社交网络。

问题： 1\. 这是一个非常标准的 MT 实现吗？2\. MT 解决方案中是否存在共享对象？（即系统中只有一个 GMAC） 3\. 有没有我们可以用作参考的网站？4\. 是否对银行、经纪人和抵押贷款公司彼此隐藏的建议，除非他们在 MT 之前有关系？一种选择是将其打开：一个目录，他们都可以在其中与新的银行、经纪人和抵押贷款公司联网 - 或者 - 关闭它，隐藏所有实体，并要求每个实体提供另一个实体的 GUID 以发现和链接到他们。

我对 MT 测试版的基本架构想法：
1\. 包含每个实例的每个不同用户帐户的用户表 2\. 每个实例的每个抵押公司和银行的组织表 3\. UserOrgLink 表将用户链接到具有角色的组织 4\. RoleType 表 5 . 大多数表中的 OrgID 列

我欢迎并重视所有的意见、想法和批评。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T01:10:31.913

无论您做什么，都不要将 OrgID 添加到大多数表中。您最好将 Orgs 完全分开（这样，如果您需要将数据库移动到另一台服务器或合并，您不必提取或合并一个 org 的数据）。使用包含用户<->抵押/银行映射的控制数据库-他们通过控制数据库进行身份验证，然后他们选择他们现在想与哪家公司合作。控制数据库可以告诉应用程序在哪里可以找到该公司的数据库。

# macos - 如何将 SVN 服务器从一个 IP 地址切换到另一个

> ID：10924334
> 
> 赞同：1
> 
> 时间：2012-06-07T00:55:57.290
> 
> 标签：macos, svn

我最近搬了办公室，我的 SVN 服务器的 IP 地址已更改，因此我无法访问我的 SVN 服务器。它实际上在我的 Mac 上，但目前其他人正在访问它。我之前使用SSH访问SVN，所以我使用的协议是svn+ssh。

假设我当前的 IP 是 [Current IP]，我以前的 IP 是 [Previous IP] 我在终端中使用以下命令重新定位我的 SVN 服务器，但它给了我一个错误说“。” 不是工作副本。

```
svn switch --relocate svn+ssh://[Previous IP]/usr/svn svn+ssh://[Current IP]/usr/svn 
```

我应该使用哪个命令来重新定位我的 SVN 服务器，以便其他人仍然可以访问它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T01:22:01.540

Subversion 服务器工具不关心你的 IP 地址是什么；由于您使用的是`svn+ssh`，您只需要确保 SSH 服务器正在侦听新的 IP 地址。

*您可以通过系统偏好*界面更改您的 IP 地址；选择您正在配置的任何接口，将 IP 地址更改为您的新 ISP 指示您使用的任何地址，然后从那里开始。（重新启动计算机可能比重新启动所有正在运行的服务更容易。）

# ruby-on-rails - 使用带有子域的 cookie 会破坏闪存

> ID：10924335
> 
> 赞同：2
> 
> 时间：2012-06-07T00:56:01.760
> 
> 标签：ruby-on-rails, ruby, session, cookies, subdomain

在一个多租户应用程序中，我设置了 cookie，以便在域级别登录`acme.com`或保持用户登录。`*.acme.com`然而，它打破了闪光灯：

```
Acme::Application.config.session_store :cookie_store, key: '_acme_session', domain: :all 
```

现在，我在 上所做的任何更改都`cayote.acme.com`不再显示 Flash 消息。任何想法为什么会发生这种情况？对于我在域级别上所做的更改`acme.com`，闪存保持不变。

在我`account.lvh.me:3000`用于测试的开发机器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T02:25:56.530

尝试`domain: 'lvh.me'`改用

# clojure - Clojure：最小的 ClojureScript 两人聊天

> ID：10924336
> 
> 赞同：4
> 
> 时间：2012-06-07T00:56:14.277
> 
> 标签：clojure, clojurescript

## 编辑 01

听起来像网络套接字是我想要的。

## 技术背景：

我熟悉 Clojure + ring + 镇静。

我开始学习 ClojureScript。（有 lein-cljsbuild 设置；还花时间“手动”安装 ClojureScript 只是为了看看它是如何工作的。）有基本的（警报（问候“ClojureScript”））演示工作。

## 我要创建的内容：

我想创建一个基本的两人记事本（即 Instant Messenger 或两人 IRC 频道）。我希望有一个 Clojure 服务器。当客户端连接时，它会显示一个文本簿；用户输入一些单词，clojure 更新给其他用户。

## 问题

我需要一些帮助才能开始。Google Closure 是一个大图书馆，我想了解以下内容：

(1) 如何设置基本连接以获取我的 cljs 代码和我的 clj 代码以相互发送数据

(2) 一旦我的 cljs 代码收到新数据，我如何让它更新 DOM？

我认为这是两个主要的东西——如果我有这个，它将为理解 clojurescript 的其余部分提供一个框架。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T02:34:19.597

我编写了一个示例应用程序，它通过 Webbit 服务器使用 clojurescript、ring 和 websockets 执行此操作：

[https://github.com/aiba/clojurescript-chat-example](https://github.com/aiba/clojurescript-chat-example)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T01:58:42.653

你（我）可能想要 WebSockets。

更多内容需要更新（如果我生成实际的工作代码。）

# python - struct.error: 'L' 格式代码的整数超出范围

> ID：10924339
> 
> 赞同：1
> 
> 时间：2012-06-07T00:56:56.660
> 
> 标签：python, fonts, reportlab

我尝试在 FreeNAS 的系统下运行以下代码。其实我希望程序可以创建一个PDF文件，并能在文件中显示中文。

```
#coding=utf-8
import reportlab.rl_config
reportlab.rl_config.warnOnMissingFontGlyphs = 0
from reportlab.pdfbase import pdfmetrics
from reportlab.pdfbase.ttfonts import TTFont
from reportlab.pdfgen import canvas
pdfmetrics.registerFont(TTFont('song', 'simsun.ttf'))

from reportlab.lib import fonts
fonts.addMapping('song', 0, 0, 'song')
fonts.addMapping('song', 0, 1, 'song')

import copy

from reportlab.platypus import Paragraph, SimpleDocTemplate, PageBreak
from reportlab.lib.styles import getSampleStyleSheet
stylesheet=getSampleStyleSheet()
normalStyle = copy.deepcopy(stylesheet['Normal'])
normalStyle.fontName ='song'
normalStyle.fontSize = 20
story = []
story.append(Paragraph('<b>你好</b>,中文', normalStyle))
doc = SimpleDocTemplate('hello.pdf')
doc.build(story) 
```

# azure - System.ServiceModel.FaultException：在服务总线中处理消息中的安全令牌时发生错误

> ID：10924342
> 
> 赞同：0
> 
> 时间：2012-06-07T00:57:31.527
> 
> 标签：azure, access-control, servicebus

我的服务工作正常，现在我得到这个异常并且服务停止工作：

System.ServiceModel.FaultException：处理消息中的安全令牌时出错

搜索互联网显示一些代码问题，但我的代码正在工作，现在它只是停止工作，不知道是什么问题..

堆栈跟踪

执行过程中抛出异常：System.ServiceModel.Security.MessageSecurityException：从对方收到不安全或安全错误。

有关故障代码和详细信息，请参阅内部 FaultException。---> System.ServiceModel.FaultException：处理消息中的安全令牌时出错。

--- 内部异常堆栈跟踪结束 ---

> 服务器堆栈跟踪：在 System.ServiceModel.Channels.SecurityChannelFactory`1.SecurityRequestChannel.ProcessReply(Message reply, SecurityProtocolCorrelationState correlationState, TimeSpan timeout) at System.ServiceModel.Channels.SecurityChannelFactory`1.System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout) at System.ServiceModel.SecurityRequestChannel.Request(Message message, TimeSpan timeout)。 Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation) at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message) 在 [0] 处重新抛出异常：在 System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg) 在 System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) 在 NewWcfService.IExternalStringService.Reverse(String value) 在 WcfWebClient._Default.Page_Load(Object sender, EventArgs e) 在 C 中：\projects\ACSSamples\Microsoft\WebServices\Acs2UsernameBindingSample\WcfWebClient\Default.aspx.cs: 55 行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T01:50:34.983

它主要是与您的访问控制服务相关的安全问题，而不是特定于平台的问题，因为没有代码更改。

您最近是否更改了任何导致此服务中断的证书？检查您的证书或任何依赖于安全性的东西，因为如果您没有更改任何代码，那么安全设置的更改可能是导致问题的原因。

# javascript - “[].forEach”？

> ID：10924343
> 
> 赞同：9
> 
> 时间：2012-06-07T00:57:33.447
> 
> 标签：javascript

我在其他地方看到了这个脚本，它会检查每一个复选框：

```
[].forEach.call(document.querySelectorAll('input[type="checkbox"]'),function(el){
       el.checked=true;
    }
);​ 
```

我知道如何使用[`forEach`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach)：

```
[0,1,2].forEach(function(num){
    console.log(num);
});

//0
//1
//2 
```

但现在，它是`[].forEach`，里面什么都没有。那么为什么它仍然有效？为什么我不能这样做呢？

```
document.querySelectorAll('input[type="checkbox"]').forEach(function(el){
       el.checked=true;
    }
);​ 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-07T01:00:58.063

JavaScript 具有一流的功能；也就是说，它们被视为对象，并且可以拥有自己的属性和方法。内置[`Function.call`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call)方法将`this`函数的参数作为其第一个参数，其余参数传递给函数本身。`[]`除了作为访问（不太简洁，因此较少使用）`Array.prototype.forEach`方法的一种手段外，不使用该数组。

它基本上是[`Array.forEach`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach)对非数组对象的重新绑定，在本例中为`NodeList`. 如果`NodeList`s 提供了一个`forEach`方法，那么它将等价于，您可以将其读为：

```
document.querySelectorAll('input[type="checkbox"]').forEach(function(el) {
   el.checked = true;
});​ 
```

* * *

所以，稍微深入一点。`call`将执行具有不同上下文的函数。`forEach`遍历上下文并调用作为参数传递的函数。所以 a`someFunc.call(thisArg, otherArg)`将被执行，就好像它在 , like 的上下文中`thisArg`一样`thisArg.someFunc(otherArg)`。这是最简单的例子：

```
function callMe(something) {
    return something + this;
}

callMe('Hello'); // Hellonull or Hello[object Window] or something
callMe.call({}, 'World'); // World[object Object] 
```

[`apply()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)以相同的方式工作，但您将参数数组作为第二个参数传递。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T01:01:24.600

这只是`[]`用来获取`forEach`功能。一旦它有了这个函数，它`.call`就会像调用它的方法一样调用它`document.querySelectorAll('input[type="checkbox"]')`。

这很有用，因为它的结果`document.querySelectorAll`不是一个`Array`但行为就像一个，所以我们可以重用标准`Array`方法。

使用 时`.call`，第一个参数用作`this`值。也就是说，在这个特定的片段中，每次`this`在 的源代码中遇到`forEach`，它都设置为`document.querySelectorAll('input[type="checkbox"]')`。

您不能直接调用`document.querySelectorAll('input[type="checkbox"]').forEach(...`，因为`querySelectorAll`不返回对象，因此没有*方法*。整个事情只是一种通过调用来解决这个问题的方法，*就好像*它是一个方法一样，这是实际返回的。`Array``forEach``.call``forEach` *`NodeList`*

 ** * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-07T00:59:45.230

注意[`.call`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call). 它应用（设置为） to`this`的结果，以便迭代这些结果而不是点左侧的（空）数组。`document.querySelectorAll``forEach`*

# php - 如何从一个数据库表中检索 ImageId 并将其存储在另一个数据库表中

> ID：10924346
> 
> 赞同：0
> 
> 时间：2012-06-07T00:58:16.490
> 
> 标签：php, mysql

我有一个 INSERT 函数，它在“Image”表的“ImageFile”字段中插入图像文件名，由于自动编号，每一行都有自己的 ImageId。下面是一个例子：

```
ImageId    ImageFile

23         orange.jpg
24         flowers.png
25         castle.png
26         orange.jpg 
```

我想做的是将 ImageId 插入另一个带有 QuestionId 和 SessionId 的表中，以便该表（Image_Question）可以使用 ImageId 将 Image 表与 Image Question 表链接。现在我正在尝试使用 mysql_insert_id 从 Image Table 中检索 ImageId 并将其存储在 Image_Question 表中的 ImageId 中。

但我似乎无法弄清楚我需要做什么，目前图像表中的 INSERTING 值工作正常，但它没有在 Image_Question 表中插入任何值。

所以我的问题是对于插入到 Image 表中的每一行，我如何从 Image 表中检索 ImageId，并使用 mysql_insert_id() 将其插入到 Image_Question 表中？下面的例子：

```
ImageId   SessionId  QuestionId

23        AAA        1
24        AAA        2
25        AAA        3
26        AAA        4 
```

我已经对 SessionId 和 QuestionId 的 INSERT 值进行了编码，但只需要帮助来检索和插入 ImageId。以下是当前代码：

```
<?php

session_start();

//connect to db

$result = 0;
$i = 0;
$insertimage = array();
$lastimageid = mysql_insert_id();

      move_uploaded_file($_FILES["fileImage"]["tmp_name"],
      "ImageFiles/" . $_FILES["fileImage"]["name"]);
      $result = 1;

        $imagesql = "INSERT INTO Image (ImageFile) 
        VALUES ('ImageFiles/".mysql_real_escape_string($_FILES['fileImage']['name'])."')";

    for($i = 0;  $i < $c; $i++ ){

    $insertimage[] = "'". mysql_real_escape_string( $lastimageid [$i] ) ."','". 
                    mysql_real_escape_string($_SESSION['id'] ) . 
                    ($_SESSION['initial_count'] > 1 ? $_SESSION['sessionCount'] : '') ."' ,'". 
                    mysql_real_escape_string( $_POST['numQuestion'][$i] ) ."'";

}

    $imageinsertsql = "INSERT INTO Image_Question (ImageId, SessionId, QuestionId) 
    VALUES (" . implode('), (', $insertimage) . ")";

    mysql_query($imageinsertsql);

    mysql_query($imagesql);

      }

      mysql_close();

?> 
```

我有一个旧的 php 版本 5.2.13，因为那是大学服务器的版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T01:16:18.370

你需要跑

```
$lastimageid = mysql_insert_id(); 
```

将其插入数据库后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T01:25:30.110

您需要重新排序您的 php 代码才能运行

```
mysql_query($imagesql); 
$lastimageid = mysql_insert_id(); 
mysql_query($imageinsertsql); 
```

目前您检索 lastimageid，插入 Image_Question 然后插入 Image。

# c# - VS2010中多项目解决方案的输出文件夹导出内容

> ID：10924352
> 
> 赞同：0
> 
> 时间：2012-06-07T00:58:49.863
> 
> 标签：c#, visual-studio-2010, build, multi-project

我在视觉工作室有一个解决方案。它包含的 2 个项目是测试项目。2 是要部署的实际软件。这些项目中的1个是独立的，我们称之为项目B。主项目，我们称之为项目A，引用项目B的dll文件。

这两个项目都有一些需要复制到输出的内容。它们都可以自己正常工作；但是，当项目 A 构建和启动时，它不会拉取项目 B 的内容。这当然是有道理的，因为它唯一引用的是一个 dll。此外，它不执行任何项目 B 的安装，它只是对其进行了引用。

我认为理想情况下，其中的一些步骤可以让我同时安装和运行项目 A 和 B（这是一个 powerpoint 插件顺便说一句），并且它们的资产可能合并。如果需要，他们的资产可以分开，但我只需要从 A 调用项目 B 并让它返回一些文件。

我认为这听起来可能比实际更复杂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T01:11:49.017

您可以让 Visual Studio 在 A 中“链接”B 的内容文件的表示...[请参阅本文](http://support.microsoft.com/kb/306234)

# prolog - 检查变量是否等于 Prolog 中的规则

> ID：10924356
> 
> 赞同：0
> 
> 时间：2012-06-07T00:59:12.747
> 
> 标签：prolog

我想检查用户通知的变量是否等于某些现有规则，例如：

我有以下规则

```
general(mammal) :- facts.
general(bird) :- facts. 
```

然后我做

```
read(X). 
```

我想检查 X 是否等于哺乳动物或鸟类。有没有办法做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T06:36:39.220

是的你可以。例如

```
read(X), (X=mammal ; X=bird). 
```

分号表示逻辑分离（OR 运算符），括号是为了确保目标的正确顺序。如果 X 被实例化为哺乳动物或鸟类，它将具有该值，否则它将是错误的。

编辑：如果我理解正确，你想要：

```
read(X), general(X). 
```

Prolog 将找到 X 以实现其目标，然后继续进行目标`general(X)`。如果 X 是哺乳动物或鸟类，Prolog 会将目标与一般条款之一匹配，否则它将失败。

# jquery - 如果字符串嵌套在内部深处，则将类添加到顶级元素

> ID：10924360
> 
> 赞同：0
> 
> 时间：2012-06-07T00:59:45.027
> 
> 标签：jquery

我在 div 里面有 div。大约 3 或 4 级深我有一个 div，其中包含一个 P 标签，其中包含一个 span 标签。我需要将一个额外的类添加到一个已经存在的类更高的 div 中，并且基于我的嵌套跨度是否包含特定的字符串。

这是我的 html 代码：[pastebin.com 链接](http://pastebin.com/LrJNfntH)

我需要检查我的嵌套 span 元素以查看它是否包含字符串“october”，如果是，则在已经具有“event-data”类的顶部 div 中添加一个额外的“October”类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T01:05:01.870

如果包含您的字符串的跨度是`el`，那么您可以像这样设置父类：

```
$(el).parents(".event_data").last().addClass("October") 
```

这里的关键是`.parents(sel)`它将返回与给定选择器匹配的所有父级，并且它们按父链上从最近到最远的顺序返回。然后，`.last()`选择最后一个（父链最远的），然后`addClass()`将所需的类添加到剩余的父对象。

如果您还需要帮助查找文本的跨度和测试，那么您需要就如何确定要测试的文本的跨度提供更多指导。

* * *

您对在何处查找文本的描述仍然有点模糊且不具体，但这是完成整个事情的一种方法：

```
$('p[id^="event_date-"]:contains(October)')
    .parents(".event_data").last().addClass("October");​ 
```

而且，您可以在您的 HTML 上看到它在这里工作：http: [//jsfiddle.net/jfriend00/Pp8gw/](http://jsfiddle.net/jfriend00/Pp8gw/)

解释：

*   查找`p`id 以开头的标签`"event_date-"`
*   在该`p`标签中，它会找到文本`"October"`
*   查找所有具有类的祖先`"event_data"`
*   获得最远的祖先
*   将类添加`"October"`到该祖先

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T01:07:19.497

我希望，我没有忘记任何事情

```
var span=$("p>span");

for(var i=0;i<span.length;i++) {
    if(span[i].text().indexOf("october") >= 0)) {
        span[i].parents("div.event-data").addClass("October");
    }
} 
```

# c# - Representation = BsonType.Int64 不能与 Datetime 一起正常工作

> ID：10924363
> 
> 赞同：1
> 
> 时间：2012-06-07T00:59:57.733
> 
> 标签：c#, mongodb, mongodb-.net-driver, bson

我正在使用 Representation = BsonType.Int64 属性在我的类中装饰我的 DateTime 属性之一，以便它以日期的 Int64 表示形式存储在数据库中。

当我曾经将该属性存储为普通的 C# Datetime 并且没有将值设置为任何值时，它将 DateTime.Min 存储在数据库中。这是完美的，因为我正在从数据库中读取并执行 Query.LT 操作，如下所示：

```
Query.LT("MyField", DateTime.Now)); 
```

它曾经很好地返回所有值。

现在我开始将它存储为 BsonType.Int64 并且 BsonType.Int64 中的 DateTime.Min 的等价物是“0”。我的 Query.LT("MyField", DateTime.Now)); 在使用 DateTime.Min 存储的所有日期上都失败。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:39:30.443

问题是，在查询期间，MongoDB 驱动程序不知道您选择了替代表示。

因此，您需要`Int64`明确查询：

```
Query.LT("MyField", DateTime.Now.Ticks)); 
```

这将按预期工作（使用 MongoDB 2.1.1 测试，C# 驱动程序 1.4.2.4500）

# html - 扩展的 HTML 表单填充了所有可用空间

> ID：10924365
> 
> 赞同：1
> 
> 时间：2012-06-07T01:00:08.673
> 
> 标签：html, css, forms

我正在表格中呈现一个表格，其中标签中的标签（左侧）和标签中的文本输入（标签右侧）。为了灵活性，我想写尽可能少的 css 并让一切都神奇地到位，例如：

1.  单元格扩展以适应最长标签的宽度
2.  右侧的字段扩展以填充单元格的整个宽度

我一直在尝试这些不同元素的各种组合，`width:100%`但`width:auto`无济于事。这样做有可能吗，还是我应该放弃并指定硬宽度，例如`width:Npx`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T02:06:53.933

不确定您的代码是什么样的（如果您发布，答案会好得多......）。

无论如何：如果没有指定宽度，单元格会自然扩展到最长元素的宽度，但是你不能让元素同时扩展到单元格的宽度！这将使宽度的计算变得不可能。所以我建议以某种方式修复内部内容。当输入字段的长度都相同时，它们看起来很棒......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T02:30:09.020

就我而言，你有两个选择。您可以使用表格实现解决方案，让您的标签具有可变长度，或者将它们设置为固定宽度并使用无表格标记。我个人认为没有令人信服的理由选择一种解决方案而不是另一种解决方案，尽管一些 Web 开发人员几乎会做任何事情来避免`<table>`在他们的标记中使用元素。

话虽如此，如果您使用表格，此解决方案非常简单：http: [//jsfiddle.net/Wexcode/VcSXU/](http://jsfiddle.net/Wexcode/VcSXU/)

```
td:first-child { 
    white-space: nowrap; /* don't allow text to wrap to the next line */
} 
```

# c# - 如何单独更新进度条（同时下载）

> ID：10924370
> 
> 赞同：2
> 
> 时间：2012-06-07T01:01:16.080
> 
> 标签：c#, progress-bar, download

我目前正在尝试向我的应用程序添加并行下载，但我不知道如何处理 DownloadProgressChangedEvent 以在多个进度条中显示进度。

我正在为用户能够下载的每个文件使用带有预定义行的 datagridview，并且每一行都有一个带有进度条的单元格。

现在的问题是，我不知道如何单独更新每个进度条，因为现在，所有选定的进度条都显示相同的百分比，它们只是在下载 1 和下载 2 的进度之间跳跃。

这是我使用的代码：

**要开始下载：**

```
private void download_button_Click(object sender, EventArgs e)
    {
        start = DateTime.Now;
        download_button.Enabled = false;

        Rows = dataGridView1.Rows.Count;
        Checked = 0;

        CheckedCount = 0;

            //count the selected rows
            for (i = 0; i < Rows; i++)
            {
                Checked = Convert.ToInt32(dataGridView1.Rows[i].Cells["checkboxcol"].FormattedValue);

                CheckedCount += Checked;

                richTextBox3.Text = CheckedCount.ToString();
            }

        for (int z = 1; z < CheckedCount; z++)
        {             
            _MultipleWebClients = new WebClient();

            _MultipleWebClients.DownloadFileCompleted += new AsyncCompletedEventHandler(_DownloadFileCompleted);
            _MultipleWebClients.DownloadProgressChanged += new System.Net.DownloadProgressChangedEventHandler(_DownloadProgressChanged);
            _MultipleWebClients.DownloadFileAsync(new Uri(_downloadUrlList[z].ToString()), @"F:\test" + z + ".mp4");     
        }

    } 
```

（我也无法同时下载两个以上的文件 - 第三次下载要等前两个完成后才开始）

* * *

**下载进度更改事件：**

```
 private void _DownloadProgressChanged(object sender, DownloadProgressChangedEventArgs e)
    {
        progressBar1.Value = e.ProgressPercentage;
        for (int c = 0; c < CheckedCount; c++)
        {
            dataGridView1.Rows[_downloadRowNrList[c]].Cells[3].Value = e.ProgressPercentage;
        }

        float size = ((e.TotalBytesToReceive / 1024) / 1024);
        label1.Text = size.ToString();

        double dn = (double)e.BytesReceived / 1024.0 / (DateTime.Now - start).TotalSeconds;
        label2.Text = (dn.ToString("n") + " KB/s) " + e.ProgressPercentage);        
    } 
```

问题可能是，所有进度条都使用相同的 DownloadProgressChangedEvent，但我不确定如何在不知道所需数量的情况下创建多个这些事件......

所以我希望有人能够帮助我解决这个问题，

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T01:15:20.247

你想要做的是使用另`DownloadFileAsync`一种方法：http: [//msdn.microsoft.com/en-us/library/ms144197.aspx](http://msdn.microsoft.com/en-us/library/ms144197.aspx)

第三个参数是一个 userToken，它作为`DownloadProgressChangedEventArgs`（它在`UserState`属性中）的一部分传递。

因此，当您进行`DownloadFileAsync`调用时，请传入一个唯一标记（整数或其他内容），然后您可以将其与需要更新的 progressBar 相关联。

```
 //(Snip)

    //in download_button_Click, pass the row you are updating to the event.
    for (int z = 1; z < CheckedCount; z++)
    {             
        _MultipleWebClients = new WebClient();

        _MultipleWebClients.DownloadFileCompleted += new AsyncCompletedEventHandler(_DownloadFileCompleted);
        _MultipleWebClients.DownloadProgressChanged += new System.Net.DownloadProgressChangedEventHandler(_DownloadProgressChanged);
        _MultipleWebClients.DownloadFileAsync(new Uri(_downloadUrlList[z].ToString()), @"F:\test" + z + ".mp4", dataGridView1.Rows[z]);     
    }
}

private void _DownloadProgressChanged(object sender, DownloadProgressChangedEventArgs e)
{
    var rowToUpdate = (DataGridViewRow)e.UserState;
    RowToUpdate["ProgressBar"].Value = e.ProgressPercentage;
    RowToUpdate["TextProgress"].Value = e.ProgressPercentage;
    RowToUpdate["BytesToRecive"].Value = ((e.TotalBytesToReceive / 1024) / 1024).ToString();

    double dn = (double)e.BytesReceived / 1024.0 / (DateTime.Now - start).TotalSeconds;
    RowToUpdate["Speed"].Value = (dn.ToString("n") + " KB/s) " + e.ProgressPercentage);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T02:17:55.573

听起来您需要一个进度条来进行多部分进度：

```
public partial class ProgressBarEx : ProgressBar
{
    private readonly Dictionary<Guid, double> _partsProgress =
        new Dictionary<Guid, double>();
    private readonly Dictionary<Guid, double> _partsSizes =
        new Dictionary<Guid, double>();

    private double _value;
    private double _maximum;

    public ProgressBarEx()
    {
        this.InitializeComponent();
    }

    public int Parts
    {
        get { return this._partsSizes.Count; }
    }

    public new int Minimum { get; private set; }

    public new double Maximum
    {
        get { return this._maximum; }
        private set
        {
            this._maximum = value;
            base.Maximum = (int)value;
        }
    }

    public new double Value
    {
        get { return this._value; }
        private set
        {
            this._value = value;
            base.Value = (int)value;
        }
    }

    [Obsolete("Not useable in ProgressBarEx.")]
    public new int Step
    {
        get { return 0; }
    }

    public Guid AddPart(double size)
    {
        if (size <= 0)
        {
            throw new ArgumentException("size");
        }

        var partId = Guid.NewGuid();

        this.Maximum += size;
        this._partsSizes.Add(partId, size);
        this._partsProgress.Add(partId, 0);

        return partId;
    }

    public bool RemovePart(Guid partId)
    {
        double size;
        if (!this._partsSizes.TryGetValue(partId, out size))
        {
            return false;
        }

        this.Maximum -= size;
        this._partsSizes.Remove(partId);

        this.Value -= this._partsProgress[partId];
        this._partsProgress.Remove(partId);

        return true;
    }

    public bool ContainsPart(Guid partId)
    {
        return this._partsSizes.ContainsKey(partId);
    }

    public double GetProgress(Guid partId)
    {
        return this._partsProgress[partId];
    }

    public void SetProgress(Guid partId, double progress)
    {
        if (progress < 0 || this._partsSizes[partId] < progress)
        {
            throw new ArgumentOutOfRangeException("progress");
        }

        this.Value += progress - this._partsProgress[partId];
        this._partsProgress[partId] = progress;
    }

    public void AddProgress(Guid partId, double progress)
    {
        this.SetProgress(partId, progress + this._partsProgress[partId]);
    }

    [Obsolete("Not useable in ProgressBarEx.")]
    public new void PerformStep()
    {
    }
} 
```

示例用法：

```
public Form1()
{
    InitializeComponent();

    var pbe = new ProgressBarEx {Location = new Point(100, 100)};
    this.Controls.Add(pbe);

    for (var i = 0; i < 4; i++)
    {
        var size = i * 10 + 30;

        var partId = pbe.AddPart(size);

        var pb = new ProgressBar
                     {
                         Maximum = size,
                         Location = new Point(100, i * 30 + 130)
                     };

        this.Controls.Add(pb);

        var timer = new Timer {Interval = 1000 + i * 100};

        timer.Tick += (sender, args) =>
                          {
                              pb.Value += 5;
                              pbe.AddProgress(partId, 5);

                              if (pb.Value == pb.Maximum)
                              {
                                  timer.Stop();
                              }
                          };

        timer.Start();
    }
} 
```

# macos - 自定义 Cocoa Control，这到底是什么？

> ID：10924371
> 
> 赞同：2
> 
> 时间：2012-06-07T01:01:20.507
> 
> 标签：macos, cocoa, controls, nscontrol

有几个应用程序使用此控件。我想大多数人都知道的一个是 Xcode，另一个是 AppStar。我很想知道这是什么控件以及在哪里可以找到它的开源实现：

**“红色区域范围内的盒子，上面写着构建成功”**

![在此处输入图像描述](../Images/22f4a6e87c97d68b4684b420cd1eb0ff.png)

一位开发人员说他见过这种称为**“Jukebox View”**的东西，但我在任何地方都找不到具有该名称或类似名称的任何东西。

**有谁知道这个控件到底是什么，或者实际上是否有一个开源实现？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T02:57:04.020

请参阅[AppKit 控件的视觉指南？](https://stackoverflow.com/questions/8419660/visual-guide-of-appkit-controls)了解如何探索这个问题。这被称为`IDEActivityView`。它不是公共课。

# javascript - 从 UIWebView 中提取文本

> ID：10924376
> 
> 赞同：2
> 
> 时间：2012-06-07T01:01:27.813
> 
> 标签：javascript, objective-c, ios, uiwebview

我有一个 UIWebView 加载了一个简单的 rtf 文件。（包含一行“这是一个测试”）

```
UIWebView* webview = [[UIWebView alloc] initWithFrame:CGRectMake(5, 50, 310, 400)];
[[self view] addSubview:webview];
[webview loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"test" ofType:@"rtf"]isDirectory:NO]]];
NSString *html = [webview stringByEvaluatingJavaScriptFromString: @"all"];
NSLog (@"html:%@", html.debugDescription); 
```

“这是文本”行正确显示在 UIWebView 内。有谁知道是否有可能将该行文本（或更多）提取到 NSString 或其他可访问的容器中？

我知道有：

```
NSString *html = [webview stringByEvaluatingJavaScriptFromString: @"document.documentElement.outerHTML"]; 
```

但这（显然）在这里不起作用。有任何想法吗 ？我基本上是在尝试（假）将 rtf 文件转换为 iOS 上的 NSString。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T05:25:48.560

事实证明这`document.documentElement.innerText`是要走的路。马上给我纯文本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-06T06:47:13.407

我们可以直接使用下面的代码从 UIWebView 中获取文本内容，而不是从 UIWebView 获取 html，并再次付出额外的努力将 html 转换为纯文本：

```
NSString *plainText = [webView stringByEvaluatingJavaScriptFromString:@"document.body.textContent"]; 
```

它节省了您将 html 转换为纯文本的额外精力。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T02:07:25.200

我过去实际上不得不做类似的事情。也许不是最优雅的，但这对我有用：

我会将文件中的文本加载到 HTML 页面中（您可以使用 UIWebView 内部的 javascript 执行此操作，或者您可以从 Objective-C 执行此操作，创建一个使用 stringByEvaluatingJavaScriptFromString 调用的 javascript 方法）。然后您可以运行上面概述的方法调用，它应该可以正常工作，或者您可以在 Javascript 中创建一个自定义方法，该方法将捕获文本并将其返回到 Objective-C 代码。在这里，它被存储为一个字符串并准备就绪。

# java - 需要弄清楚类抽象

> ID：10924378
> 
> 赞同：0
> 
> 时间：2012-06-07T01:02:11.067
> 
> 标签：java, class, uml, abstract-class, class-diagram

我有一个包含姓名、电子邮件、城市、州、邮编的用户类。这对于移动用户和 Web 用户的子组都是通用的。子组有不同的方法。用户应该是一个抽象类，两个子组应该是这样吗？

![](../Images/caa071c948c287434f9d933b736ba13e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T01:35:14.270

基本上一切都是正确的，除了`User`应该只是一个普通的类（不是抽象的）。

请记住，`abstract`当您希望您的类定义一组特定的共享行为，同时强制其子类提供其他行为时，应该使用类。这不是你的情况。相反，您的子类只是为类提供额外的行为`User`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:43:57.340

有些人考虑将每个具有子类的类抽象化，并将每个类作为最终类，这是一种很好的设计实践。如果您想遵守该原则并且仍然想实例化用户，您将需要另一个最终的子类。

# android - 通过 Facebook android API 发帖表示成功，但在 Facebook 网站上找不到

> ID：10924379
> 
> 赞同：1
> 
> 时间：2012-06-07T01:02:14.973
> 
> 标签：android, facebook, facebook-android-sdk

我的应用程序的一位用户允许在他们的 Facebook 墙上发布消息，他说即使它表明成功，他也无法在任何地方找到该消息。

我已经要求他确保该应用程序在他的批准应用程序列表中……确实如此。

我已经请他检查他的个人墙，因为您似乎经常看不到该应用程序在您的新闻提要上发布，但您应该始终能够在您的墙上看到它。他说它也不存在。

我从 request() 中检索到响应，其格式为“id”：“22346356_456354....”。我认为这是某种交易 ID，应该表明成功？（我不知道，因为我在任何地方都找不到 API 响应可能是什么的列表）。

那是“成功”的代码吗？如果是这样，我有什么方法可以用该代码追踪他的帖子实际去向的地方吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T06:54:25.527

你得到的响应确实是成功响应，它是新帖子的 id（如[文档](http://developers.facebook.com/docs/reference/api/user/#statuses)中所述），由 USER-ID_POST-ID 组成。

至于如何查看该帖子，只需将您的浏览器指向：
`http://www.facebook.com/USER-ID/posts/POST-ID`

# java - 使用 Hashmap 时，并根据键访问值

> ID：10924380
> 
> 赞同：-2
> 
> 时间：2012-06-07T01:02:43.507
> 
> 标签：java, hashmap

我有一个`HashMap`基本上尝试根据对象名称作为键来存储对象的方法。但是，当对象第一次不存在时，`HashMap`而不是重新调整我 a`null`它返回一个`object`. 结果，它永远不会创建一个新对象，也永远不会将它放入`HashMap`- 我希望它返回`null`。

这是我的代码...

```
private static Map<String, SObj> MComponentCache = Collections.synchronizedMap(new HashMap<String, Sobj>());

    static SObj getSObj(String cName) {
        SObj cmp = null;
        String pKey = "Component:" + cName.intern();
        cmp = MComponentCache.get(cName);
        synchronized (pKey){
            if (cmp == null){
                cmp = new SObj(cName);
                MComponentCache.put(cName, cmp);
            }
        }
        return cmp;
    } 
```

谁能帮我纠正这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T01:42:21.430

您的代码不正确。在键上同步是没有意义的，因为它是一个新构建的本地对象，并且同步映射在操作之间不是原子的。您需要在包含`get()`和`put()`操作的块中的地图上进行同步。

# delphi - 有没有办法确保 Indy 9 套接字连接真正断开（Delphi 6 应用程序）？

> ID：10924381
> 
> 赞同：0
> 
> 时间：2012-06-07T01:02:52.557
> 
> 标签：delphi, sockets, indy-9

我有一个 Delphi 6 应用程序，它通过套接字与外部硬件设备交换音频数据。硬件设备内部存在问题，有时其内部缓冲区处理速度会变慢，尤其是在长时间使用期间，并且令人讨厌的延迟会蔓延到音频流中。这是一个重大问题，因为音频数据经常是人们之间双向实时对话的基础。但是，断开连接并重新建立连接可以解决问题。

我知道如何用 Indy 关闭/断开套接字，这很容易。我担心如果我尝试重新连接太快，Indy 中的某些连接缓存机制或 Windows 套接字层本身可能会破坏我的断开连接。有没有办法确保与外部硬件设备的套接字连接真正断开？最好问一下，有没有办法确保我的重新连接尝试强制创建一个新的套接字（句柄？）而不是重新使用旧的套接字连接？

外部硬件设备仅在创建全新连接时“重置”，可能是因为它刷新其内部队列并重新开始（我的猜测是因为我没有设备的源代码）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T01:15:36.340

Indy 不会阻止您立即重新连接。Windows 唯一会这样做的情况是，如果您每次都为客户端分配相同的本地端口以绑定到。在这种情况下，您必须等待 Windows 释放该端口以供重复使用。您可以手动设置套接字的延迟选项以禁用 Windows 的延迟并立即释放。或者不分配本地端口，每次（重新）连接时都会使用一个随机端口。

# windows - 在 Windows 7 中将 .patch 应用于 .py 文件

> ID：10924393
> 
> 赞同：2
> 
> 时间：2012-06-07T01:05:03.257
> 
> 标签：windows, google-app-engine, patch

好的，所以我想在 Google App Engine 中更改一个文件，并且在以下链接中提供了一个补丁：

[关于 Google 代码的问题 4849](http://code.google.com/p/googleappengine/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Component%20Status%20Stars%20Summary%20Language%20Priority%20Owner%20Log&groupby=&sort=&id=4849)

我可以看到 .patch 文件修改了我的 HD 上的特定 .py 文件，但我自己无法进行任何更改，因为我不知道如何使用 .patch 文件。我在网上搜索过，但不知何故，似乎没有关于在 windows 中的 .py 文件上应用补丁的数据。有人可以帮帮我吗？

**或者更好的是，有人可以简单地在*_init.py* _ 文件上应用补丁并将其发送过来吗？（我不是懒惰，我只是认为如果有人可以在 linux 上轻松地在 windows 上找到补丁软件，那么输入这么多内容并不聪明）**

以下是补丁文件和**init** .py 文件： 这是一个 5 KB 的 rar 文件！

[**初始化**.rar](https://dl.dropbox.com/u/37517156/__init__.rar)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T01:11:47.330

您可以使用[patch.exe for Windows](http://gnuwin32.sourceforge.net/packages/patch.htm)，然后在包含`__init__.patch`and的目录中运行以下命令`__init__.py`（来自您附加到问题的 rar）。

```
path\to\patch.exe -p4 < __init__.patch 
```

另请参阅[此问题](https://stackoverflow.com/questions/517257/how-do-i-apply-a-diff-patch-on-windows)以获取替代方案。

那应该产生以下输出

```
patching file __init__.py 
```

# android - 如何使用多个航点发送导航意图？

> ID：10924395
> 
> 赞同：3
> 
> 时间：2012-06-07T01:05:10.200
> 
> 标签：android, android-intent, gps, navigation

我有一个应用程序，在我的应用程序中，我需要能够发送开始导航的意图。在这个意图中，我需要有起始地理点（或纬度）、多个航点（作为地理点或纬度），然后是终点（作为地理点或纬度）。我知道如何发送意图去做除了航路点之外的所有事情。我真的需要发送到导航的字符串格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T02:22:21.607

如果你在美国，你可以使用非官方的方式（我不建议使用它，因为它不是官方的）。这将以导航模式启动 Google 地图。

```
Intent intent = new Intent(android.content.Intent.ACTION_VIEW, 
    Uri.parse("google.navigation:q=an+address+city"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T01:33:57.107

```
There isn't a standard Intent URI for navigation. 
```

看到这个[SO 帖子](https://stackoverflow.com/questions/5801684/intent-to-start-a-navigation-activity)。

# java - Java中的SOAP对象序列化

> ID：10924396
> 
> 赞同：1
> 
> 时间：2012-06-07T01:05:24.777
> 
> 标签：java, soap, jax-ws, jboss7.x, jbossws

我正在使用 JBoss AS 7.1.1 和 JAX-WS 2.0。

在我的应用程序中，我需要将 a 传递`Map<String, Map<String, String>>`给服务。我制作了一个扩展 TreeMap 的自定义复杂类型。在调试时，我确认我尝试发送的对象已填充数据，但接收到的对象是空的。从其他帖子来看，这似乎是因为 SOAP 序列化效果不佳。有什么方法可以为我的对象实现 SOAP XML 序列化，而无需更改类型、创建大量字段等？我希望能够做到以下几点：

```
public String doSoapXmlSerialization() {
    // code
}
public void doSoapXmlDeserialization() {
    // code
} 
```

编写序列化和反序列化方法对我来说是一件非常简单的事情。我还可以想象编写某种 XSD 文件以允许 SOAP 方法为我完成工作。我还没有找到任何指南。JAX-WS 通过什么机制尝试序列化对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:48:57.477

我意识到（我的 WSDL 文件的）描述发送和接收对象的部分是一个 XML 模式，而 SOAP 使用 JAXB。我按照[本](http://www.w3.org/TR/xmlschema-0/#po.xml)指南构建了一个模式。这让我可以创造任何我想要的东西。

有关的：

[JAXB：如何将映射编组为 <key>value</key>](https://stackoverflow.com/questions/3941479/jaxb-how-to-marshall-map-into-keyvalue-key)

# python - 如何在python中使用从函数到main的变量？

> ID：10924397
> 
> 赞同：0
> 
> 时间：2012-06-07T01:06:07.407
> 
> 标签：python, function

我有一个绘制形状并记录点位置之一的函数。假设那个点是 (2,1) 所以 x = (2,1)

如何在我的 main 中使用 x？

```
def shape():
    t.forward(10)
    x = t.position()

t.goto(x) 
```

我怎样才能使它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T01:18:01.737

您提供的代码孤立地没有意义（即使除了范围规则）。您定义一个函数，调用该函数时将创建`x`. 然后你想使用`x`. 但是您从未调用过该函数，因此`x`甚至不存在！您可能在其他地方调用过该函数，但您可能多次调用过它，在这种情况下`x`可能存在多个版本。你想要哪一个？

这就是您不能简单地引用在该函数之外的函数中定义的变量的原因。这不仅仅是惹恼你的限制；作为一个概念，它没有意义。

要遵循的经验法则是，您通过将信息传递**给**函数的参数来将信息传递给函数，然后通过返回函数将信息**从**函数传递回其调用者。这意味着您的函数应该如下所示：

```
def shape(t):
    t.forward(10)
    return t.position 
```

然后你会这样做：

```
x = shape(t)
t.goto(x) 
```

您*可以*作为非局部变量访问`t`（全局或外部函数范围；不清楚您使用的是哪个）。但除非你有充分的理由，否则通常最好不要这样做；显式传递信息往往会使您的代码更具可读性，使更改更加独立，并且更有可能在多个上下文中可用（毕竟这是创建函数的重点）。如果不返回它就*无法*访问`x`（如果你唯一要做的就是返回它，那么即使在函数内部给它一个名称也没有多大意义，因为没有其他人可以使用该名称）。

使用全局变量（或其他非局部变量）有很多帮助，但是当您将它们视为一般规则的例外时，生活通常会更容易，所以当您这样做时，您会故意使用这些技术；你的习惯应该是避免全局和非本地。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T01:08:28.217

为了访问`x`主程序中的值，从函数（通过`return x`）返回它，在这种情况下`shape()`设置/更改它。

# php - PHPUnit：模拟除某些以外的所有方法

> ID：10924398
> 
> 赞同：8
> 
> 时间：2012-06-07T01:06:08.280
> 
> 标签：php, unit-testing, testing, mocking, phpunit

我正在编写一个 PHPUnit 测试，我需要在其中模拟一些依赖项，但我需要一些方法才能让它仍然像以前一样工作。即，我有：

```
class Dependency {
// some stuff not important for the test
  public function thisOneINeed() {
   /// complex code
  }
// some more stuff
} 
```

所以我在做这样的事情：

```
// prepare mock object
$dep = $this->getMockBuilder('Dependency')->disableOriginalConstructor()->getMock();
// mock out some other method that should return fixed value
$dep->expects($this->any())->method("shouldGetTrue")->will($this->returnValue(true));
// run test code, it will use thisOneINeed() and shouldGetTrue()
$result = $testSubject->runSomeCode($dep);
$this->assertEquals($expected, $result); 
```

一切都很好，除了方法`thisOneINeed()`被模拟出来，所以我没有运行复杂的代码，我需要它运行`runSomeCode()`才能正常工作。该代码 `thisOneINeed()`不调用任何其他方法，但它是正确测试所必需的，并且它不返回固定值，所以我不能只将静态 returnValue() 放在那里。而且AFAIK PHPunit没有像`returnValue()`“调用父级”这样的方法。据我所知，它有`returnCallback()`但没有办法告诉它“为父类调用此方法”。

我可以列出所有方法的列表`Dependency`，从中删除`thisOneINeed`并在构建模拟时将其传递给`setMethods()`，但我不喜欢这种方法，看起来很笨拙。

我也可以这样做：

```
class MockDependency extends Dependency
{
    // do not let the mock kill thisOneINeed function
    final public function thisOneINeed()
    {
        return parent::thisOneINeed();
    }
} 
```

然后用于`MockDependency`构建模拟对象，这也可以，但我不喜欢手动进行模拟。

那么有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T16:14:18.897

我认为如果您想使用 PHPUnit 的模拟构建器，那么创建一个包含所有方法的数组，删除您需要的方法，并将其传递给 setMethods 正是您需要做的。

我个人发现在很多情况下拥有一个 ReflectionClass 的子类很有用，我可以在需要时添加方法。

```
class MyReflectionClass extends ReflectionClass
{
    public function getAllMethodNamesExcept(array $excluded)
    {
        $methods = array_diff(
            get_class_methods($this->name), 
            $excluded
        );
        return $methods;
    }
} 
```

您还可以使用不同的模拟框架来支持您想要做的事情。例如，[Phake](https://github.com/mlively/Phake)有一个[thenCallParent](http://phake.digitalsandwich.com/docs/html/ch04s02.html)方法。我最近开始使用 Phake，因为我需要能够捕获传递给方法的参数。它有据可查，值得一试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-03-20T13:01:07.497

我需要模拟受保护的方法，这是 Zach 实现反射类的答案的略微修改版本：

```
$class = new ReflectionClass(\Foo\Bar::class);

// Get just the method names:
$methods = array_map(function($m){return $m->name;}, $class->getMethods());

$methodsToMock = array_diff(
    $methods,
    array("baz", "qux") // don't mock these.
);

$mockObj = $this->getMockBuilder("\Foo\Bar")
    ->setConstructorArgs(array($this->foo))
    ->setMethods($methodsToMock)
    ->getMock();

$mockObj->baz(); // run as normal.
$mockObj->qux(); // run as normal.
$mockObj->foobar(); // mocked. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-21T10:24:15.423

只是另一个例子，因为`setMethods()`在 PHPUnit 的最后一个版本中已弃用：

```
use Tests\TestCase;

class MyTestClass extends TestCase
{
    public function testMyMethodNotMock()
    {
         $myMockMethods = ['methodOne','methodTwo'];
         $myClassMock = $this->getMockBuilder(MyClass::class)
                             ->setConstructorArgs(['args1'])
                             ->onlyMethods($myMockMethods)
                             ->getMock();
         $this->assertTrue($myClassMock->methodNotMock());
     }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-29T06:47:51.520

There is a mock builder method called `setMethodsExcept()`, which (quote):

"can be called on the Mock Builder object to specify the methods that will not be replaced with a configurable test double while replacing all other public methods. This works inverse to onlyMethods()."

Reference: [https://phpunit.readthedocs.io/en/9.5/test-doubles.html](https://phpunit.readthedocs.io/en/9.5/test-doubles.html)

# objective-c - iOS 的目标 c：本地存储密码的位置

> ID：10924399
> 
> 赞同：3
> 
> 时间：2012-06-07T01:06:20.050
> 
> 标签：objective-c, bundle, nsuserdefaults, store, documents

我正在制作一个应用程序，要求用户在使用该应用程序之前输入密码。我的问题是：存储此类数据的确切位置（以便可以检查其是否正确）、NSUserDefaults？、捆绑文件？、应用程序文档文件夹？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T02:07:46.260

您绝对应该将敏感数据存储在钥匙串中。NSUserDefaults 将其数据存储在纯文本文件中，任何人都可以通过访问文件系统来读取该文件。

有一些开源类可以简化 Keychain API 的使用，你一定要看看它们：

SFHFKeychain 访问：

[SFHF钥匙扣](https://github.com/ldandersen/scifihifi-iphone/tree/master/security)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T02:08:08.473

您应该使用[钥匙串服务](http://developer.apple.com/library/ios/#documentation/Security/Conceptual/keychainServConcepts/iPhoneTasks/iPhoneTasks.html)，它将数据保存在设备的加密钥匙串中。

API 可能很难使用，但请查看[SFHFKeychainUtils](https://github.com/ldandersen/scifihifi-iphone)，它是一个易于使用的 Objective-C 包装器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T01:24:23.620

我可能会选择 NSUserDefaults，但这取决于您的用例。你用这个干什么？是否必须定期访问/更新？您是否考虑过存储 PIN 码的哈希值而不仅仅是 PIN 码？数据有多大？

如果它是一个非常简单的 4 位密码，每次应用启动时您只能访问一次，那么 NSUserDefaults 可能是最好的选择。实施起来也非常快。只需确保您知道自己在做什么，并在需要时对其进行加密。

# iphone - 制定自定义字体名称

> ID：10924401
> 
> 赞同：0
> 
> 时间：2012-06-07T01:06:40.887
> 
> 标签：iphone, objective-c

我无法获得要显示的字体。([流沙](http://www.fontsquirrel.com/fonts/Quicksand))

```
<key>UIAppFonts</key>
<array>
    <string>bebas.ttf</string>
    <string>Quicksand_Bold.ttf</string>
    <string>Quicksand_Book.ttf</string>
</array> 
```

我尝试了各种方式来称呼它为“流沙”、“流沙粗体”、“流沙粗体”等等。

```
UILabel *theLabel = [[UILabel alloc] initWithFrame:CGRectMake(20, 20, 890, 60)];
theLabel.font = [UIFont fontWithName:@"Quicksand-Bold" size:50];
theLabel.text = @"Label Text"; 
```

有没有一种简单的方法可以找到我应该使用的名称？在 Font Book 中将其命名为“Quicksand Bold Regular”，这也不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T01:15:29.080

有时字体文件的名称和系统中的字体名称不同。您应该打印所有字体的名称`NSLog`并查看系统使用的名称。

```
NSFontManager* fm =[NSFontManager sharedFontManager]
NSLog(@"%@", [fm availableFonts]); 
```

我在我的博客上写了一篇关于向应用程序添加字体的教程：[如何向 iOS 和 OSX 应用程序添加字体。](http://riveroften.com/how-to-add-fonts-to-ios-and-osx-applications/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T01:24:29.020

回复有点晚，但我已经解决了。

我只是忘记将文件添加到捆绑资源列表中。

![复制捆绑资源](../Images/51d89934ec3af329450987416e99e963.png)

# objective-c - iOS 使用带有 UILabel 的 UITapGestureRecognizer 滑动到下一页

> ID：10924410
> 
> 赞同：0
> 
> 时间：2012-06-07T01:08:03.833
> 
> 标签：objective-c, uiscrollview, uitapgesturerecognizer

抱歉，如果我忽略了对我的问题的潜在答案，但是在子视图 UIViewController 类中使用带有 UILabel 的 UITapGestureRecognizer 时遇到了麻烦...

基本上，我创建了一个自定义 UIViewController，它有一个 UILabel 和一些其他不相关的元素。然而，这个自定义 UIViewController 位于启用了分页的自定义 UIScrollView 内，并且标签的偏移量刚好足以让您看到下一个 UIViewController 的标签。我想要做的是当用户触摸“下一个”标签时，scrollRectToVisible:animated: 方法会触发，本质上是在不滚动的情况下切换页面。CustomViewController 的 UILabel 位于顶部。

这是将 UITapGestureRecognizer 添加到 CustomViewController 的 UILabel 时容器 UIScrollView 的示例代码：

```
[scrollView addSubview:CustomViewController];

- (void) addSubview: (CustomViewController *) view {
    // create view's frame here...
    UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(fireScrollRectToVisible:view)]; // this is the current problem like a lot of people out there...
    [view.Label addGestureRecognizer:tap];
    // [super addSubview:view.view];
}
- (void) fireScrollRectToVisible: (CustomViewController *) cvc {
    CGRect frame = CGRectMake(cvc.view.frame.origin.x, cvc.view.frame.origin.y, 320, 480);
    [scrollView scrollRectToVisible: frame animated:YES];
} 
```

我最初认为这很容易，但是由于 @selector 不允许您放置参数，因此变得异常困难。我想我需要的是访问 CustomViewController 的框架并将 scrollRectToVisible 设置为此，但我不确定了......

我已经尝试过这篇文章，但我对 Objective-C 很陌生，我不完全理解 hitTest:withEvent: 我假设 hitTest:(CGPoint) 与视图的边界有关？

[UITapGestureRecognizer initWithTarget:action: 方法来接受参数？](https://stackoverflow.com/questions/6631023/ios-uitapgesturerecognizer-initwithtargetaction-method-to-take-arguments)

如果有人能指出我正确的方向，那就太好了。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T01:37:21.397

我根据您的代码做了一些更改

```
- (void) addSubview: (CustomViewController *) view {
    // create view's frame here...
    UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(fireScrollRectToVisible:)]; // this is the current problem like a lot of people out there...
    [view.Label addGestureRecognizer:tap];
    // [super addSubview:view.view];
}
- (void) fireScrollRectToVisible: (UIGestureRecognizer *) gesture {
    UIView *view = [gesture.view superview];
    CGRect frame = CGRectMake(view.frame.origin.x, view.frame.origin.y, 320, 480);
    [scrollView scrollRectToVisible: frame animated:YES];
} 
```

希望这可以帮到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T02:04:29.567

如果您需要包含包含手势识别器的标签的视图框架，您不能这样做：

```
gestureRecognizer.view.superview.frame; 
```

得到框架？

手势识别器的选择器应采用以下形式

```
- (void)gestureRecognizerDidFire:(UIGestureRecognizer *)recognizer; 
```

如果您将选择器设置为，识别器将自动传递，`@selector(gestureRecognizerDidFire:)`并且您可以访问其中的视图属性。

# powershell - 通过 PowerShell 转发组策略事件 - Windows

> ID：10924413
> 
> 赞同：0
> 
> 时间：2012-06-07T01:08:23.180
> 
> 标签：powershell, windows-server, cmdlets, group-policy

在 Windows 服务器上，当您打开组策略设置（System32 中的 gpedit.msc）时，我可以通过以下步骤设置事件转发：http: [//msdn.microsoft.com/en-us/library/windows/desktop/bb870973 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb870973(v=vs.85).aspx)在*配置事件源计算机部分下*

我想知道是否可以使用 PowerShell 来设置收集器地址并启用订阅管理器配置（上面指定部分下提供的链接中的步骤 3 和 4）。

我遇到了这个文档：[http](http://technet.microsoft.com/en-us/library/ee461027.aspx) ://technet.microsoft.com/en-us/library/ee461027.aspx 用于组策略 cmdlet，但我不知道如何使用这些 cmdlet 来做同样的事情，我可以通过使用编辑界面。

如果您对如何启动或使用哪些 cmdlet 有任何提示或良好指示，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T04:01:49.067

您将在另一个答案中找到使用 PowerShell[在 W2K8 R2 计算机上基于注册表项创建 GPO 的路线图。](https://stackoverflow.com/a/10022329/608772)

要找到您喜欢更改的内容，请查看：`C:\Windows\PolicyDefinitions\EventForwarding.admx`

```
<?xml version="1.0"?>
<policyDefinitions xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" revision="1.0" schemaVersion="1.0" xmlns="http://schemas.microsoft.com/GroupPolicy/2006/07/PolicyDefinitions">

        <policyNamespaces>
                <target prefix="eventforwarding" namespace="Microsoft.Policies.EventForwarding" />
                <using prefix="windows" namespace="Microsoft.Policies.Windows" />
        </policyNamespaces>

    <supersededAdm fileName="EventForwarding.adm"/>

    <resources minRequiredRevision="1.0"/>

    <categories>
        <category name="EventForwarding" displayName="$(string.EventForwarding)">
            <parentCategory ref="windows:WindowsComponents"/>
        </category>
    </categories>

    <policies>
        <policy name="SubscriptionManager" class="Machine" displayName="$(string.SubscriptionManager)" explainText="$(string.Subscription_Help)" presentation="$(presentation.SubscriptionManager)" key="Software\Policies\Microsoft\Windows\EventLog\EventForwarding">
            <parentCategory ref="EventForwarding"/>
                        <supportedOn ref="windows:SUPPORTED_WindowsVista" />  
            <elements>
                <list id="SubscriptionManager_Listbox" key="Software\Policies\Microsoft\Windows\EventLog\EventForwarding\SubscriptionManager" valuePrefix=""/>
            </elements>
        </policy>
        <policy name="ForwarderResourceUsage" class="Machine" displayName="$(string.ForwarderResourceUsage)" explainText="$(string.ForwarderResourceUsage_Help)" presentation="$(presentation.ForwarderResourceUsage)" key="Software\Policies\Microsoft\Windows\EventLog\EventForwarding">
            <parentCategory ref="EventForwarding"/>
                        <supportedOn ref="windows:SUPPORTED_WindowsVista" />  
                        <elements>
                                <decimal id="MaxForwardingRate" valueName="MaxForwardingRate"/>
                        </elements>
                </policy>
    </policies>

</policyDefinitions> 
```

# ruby - 通过替换整个 gem 在 RubyGems 上重新发布 gem？

> ID：10924414
> 
> 赞同：2
> 
> 时间：2012-06-07T01:08:25.257
> 
> 标签：ruby, rubygems, gem

我最近启动了一个私有 gem（我可以保证没有其他人在使用它）来包装一个小众数据库的 JDBC 驱动程序。我最终只是发布了一个我想要重做的 gem 版本。

我了解如何[提取](http://help.rubygems.org/kb/gemcutter/removing-a-published-rubygem)gem 版本，以及只是增加版本号并发布它的常见解决方案，这在大多数情况下是有意义的。但是，就我而言，这并不是那么简单，因为我想使用与我捆绑的数据库驱动程序相同的 gem 版本（这似乎是一种常见的做法），因此不能选择增加版本号。我也不能做一些聪明的事情，比如`.1`在数据库版本号中添加后缀，因为数据库版本中有字母字符，这使得`~>`操作员无法使用（所有版本都被视为预发行版）。简而言之，我**需要**那个确切的版本号。

我的问题是，如果我提取gem 的**所有版本**，以便 gem 名称在 RubyGems 名称池中再次可用，我可以重新声明 gem 名称并针对我之前使用的相同 gem 版本推送不同的代码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T20:29:28.733

防止 Gem 修改是 RubyGems.org 设计的一部分。用户计算机上的 RubyGems 会缓存原始 gem 文件，因此如果您运行`gem install`两次 - 如果原始 gem 在 RubyGems.org 上被修改，行为可能会不一致，但旧版本会保留在缓存中。因此，您唯一能做的就是`yank`或联系 RubyGems.org 团队为您破例。

当我们完成包装器时，就像您建议的那样，我们添加了另一个`.1`后缀来区分包装特定版本库的不同构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T01:47:44.383

无法更换宝石，抱歉。您必须提交新版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-10T06:21:01.043

> 我的问题是，如果我拉出**所有版本**的 gem，以便 gem 名称在 RubyGems 名称池中再次可用

我的回答似乎离题了，但在这种情况下（**拉出所有版本的 gem**），从 RubyGems 中完全删除旧的 gem 并将所有版本发布到名称相同或略有不同的新 gem 会更容易

# php - 体育馆管理规则引擎

> ID：10924423
> 
> 赞同：-1
> 
> 时间：2012-06-07T01:10:15.750
> 
> 标签：php, jsp, liferay, drools, rule-engine

我想构建一个 Web 应用程序，其中包含用于运动场时间表的生成器。我们的体育俱乐部有一个体育馆。它可以分为3个部分。我们俱乐部的每个分支机构都有自己的日子和时间。对于调度，定义诸如“时间范围”、“可能的天数”、“大厅特殊部分的可用设备”、“所需空间”等规则非常重要。

我的问题：PHP 是这样一个门户的正确基础还是我应该使用 JSP（例如 Liferay）？有什么有用的规则引擎吗？我知道 Drools，但这仅适用于 Java。

门户应包含的其他功能：论坛、日历（JSP 没有免费的）、票务系统、通知、统计信息……

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T04:20:58.390

你应该选择Liferay，有几个优势

1.  开源
2.  服务器不可知
3.  捆绑的现成 portlet（留言板、博客、wiki、公告、Web 内容、日历、用户管理、行政）
4.  单个服务器内的多个门户实例支持
5.  一个门户实例中的多站点支持
6.  强大的社区（请参阅 liferay.com 上的 liferay 社区链接
7.  主题支持，主题内的配色方案支持
8.  与其他系统、NTLM、CAS、自动登录内置功能的用户导入/导出
9.  许多 portlet 桥可用（struts、spring、MVC）

除此之外，Java 中可用的任何东西都可以使用 J2EE 技术挂钩，并且可以作为 portlet 公开。

希望这可以帮助

# javascript - 使用 Jquery 在标签单击上获取单选值

> ID：10924424
> 
> 赞同：1
> 
> 时间：2012-06-07T01:10:22.247
> 
> 标签：javascript, jquery

这里有一个我的问题的例子：

[http://jsfiddle.net/LWcu8/1/](http://jsfiddle.net/LWcu8/1/)

如何获取我单击的当前单选按钮而不是最后一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T01:13:15.117

```
$(function(){
  $(".options > label").live("click", function(event)
  {
    radio_value = $(this).prev("input[type='radio']").val();
    $("#clicked").html(radio_value);
  });
}); 
```

工作样本：http: [//jsfiddle.net/LWcu8/11/](http://jsfiddle.net/LWcu8/11/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T01:13:56.170

```
$(".options > label").live("click", function(event)
{
    radio_value = $(this).prev(":radio").val();
    $("#clicked").html(radio_value);
}); 
```

[演示](http://jsfiddle.net/thecodeparadox/LWcu8/3/)

如果你想使用 jQuery > 1.7 那么你可以这样做：

```
$(".options").on("click", "label", function(event)
{
    radio_value = $(this).prev(":radio").val();
    $("#clicked").html(radio_value);
}); 
```

[演示](http://jsfiddle.net/thecodeparadox/LWcu8/12/)

### 笔记

您需要`.prev()`，因为您将 click 事件绑定到`label`它`radio`的前一个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T01:15:08.973

试试这个：

```
$(".options > label").live("click", function(event)
{
    radio_value = $("#" + $(this).attr('for')).val();
    $("#clicked").html(radio_value);
});​ 
```

**演示：http: [//jsfiddle.net/LWcu8/6/](http://jsfiddle.net/LWcu8/6/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T01:19:25.403

尝试延迟回调：

```
$(".options > label").live("click", function(event) {
    setTimeout(function() {
        radio_value = $("input[name='size']:checked").val();
        $("#clicked").html(radio_value);
    }, 0)();
});​ 
```

## [演示](http://jsfiddle.net/LWcu8/16/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T03:04:46.023

```
$(".options > input[name='size']").live("click", function(event)
{
    radio_value = $(this).val();
    $("#clicked").html(radio_value);
});​ 
```

您的代码绑定了标签的单击事件，该事件发生在您获取收音机的值之前。你应该只绑定 input[name='size'] 然后它就会工作。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-07T01:14:23.257

将您的代码更改为：

```
$("input[name='size']").live("change", function(event)
{
    radio_value = $("input[name='size']:checked").val();
    $("#clicked").html(radio_value);
});​ 
```

在对单选按钮进行更改之前，会在标签上触发该`click`事件。因此，您应该改为响应更改。

# c# - 更改多选列表的复选框颜色

> ID：10924427
> 
> 赞同：3
> 
> 时间：2012-06-07T01:10:48.467
> 
> 标签：c#, windows-phone-7, xaml

我正在使用solidbrushcolors（文本）填充多选列表，并且我希望复选框坚持分配给它的solidcolorbrush。到目前为止，我所拥有的如下

主页.xaml

```
<toolkit:MultiselectList x:Name="ColorList" HorizontalAlignment="Left" VerticalAlignment="Top" Tap="ColorList_Tap">
                <toolkit:MultiselectList.ItemTemplate>
                    <DataTemplate>

                        <StackPanel Orientation="Horizontal" Margin="12,12,0,0" Grid.ColumnSpan="2">
                            <!--<Rectangle Fill="{Binding Brush}" Width="50" Height="50"/>-->
                            <!--<CheckBox Background="{Binding Brush}"/>-->

                            <TextBlock Text="{Binding Name}" Margin="12,10,0,0"/>
                        </StackPanel>
                    </DataTemplate>
                </toolkit:MultiselectList.ItemTemplate> 
```

似乎通过添加矩形或复选框，在正确颜色的水平堆栈面板中创建了另一个项目，但不是实际的复选框本身。我怎么能将画笔绑定到复选框颜色呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T14:12:24.653

我只能通过为资源中的复选框定义默认样式来解决这个问题：

```
<toolkit:MultiselectList ...>
  <FrameworkElement.Resources>
    <Style TargetType="CheckBox">
      <Setter Property="Background" Value="Yellow"/>
    </Style>
  </FrameworkElement.Resources>
  <ItemsControl.ItemTemplate>
    ...
  </ItemsControl.ItemTemplate>
</toolkit:MultiselectList> 
```

# c# - 两个列表 - 获取公共字段？

> ID：10924429
> 
> 赞同：2
> 
> 时间：2012-06-07T01:11:47.437
> 
> 标签：c#, linq

我有两个`List<object>`。对象中的一个字段是party_id。

有没有办法使用 LINQ 来获取仅包含公共 party_id 的列表？那么，也许加入派对 ID 上的列表，然后返回匹配的列表？

在 SQL 中，我想我会这样做：

```
SELECT DISTINCT party_id FROM table1
INNER JOIN table2 on table1.party_id = table2.party_id 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T01:14:14.223

你可以试试这个：

```
table1.Select(r => r.party_id).Intersect(table2.Select(r => r.party_id)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T01:15:05.250

怎么样

```
var results = list1.Where(f => list2.Exists(s => f.party_id == s.party_id))
                   .Select(x => x.party_id); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-07T01:21:31.867

在不拉出 Reflector 并验证上述可行解决方案的实现的情况下，我认为使用它是最有效的`Join(...)`：

```
var party_on_dude = from table1
                    join table2 on table1.party_id equals table2.party_id
                    select table1.party_id; 
```

# android - 机器人waitForFragment

> ID：10924435
> 
> 赞同：2
> 
> 时间：2012-06-07T01:12:17.537
> 
> 标签：android, robotium, android-testing

片段是否有与活动相同的等效方法？

我有一个应用程序并想测试片段事务。

还有其他解决方法吗？我讨厌把 solo.sleep(2000) 只是为了等待交易完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T04:37:14.193

我不知道从哪个版本开始，但现在（3.6）Robotium 有 4 种方法可用于片段

waitForFragmentById(int) - com.jayway.android.robotium.solo.Solo 类中的方法 等待具有给定 id 的片段出现。

waitForFragmentById(int, int) - com.jayway.android.robotium.solo.Solo 类中的方法 等待具有给定 id 的片段出现。

waitForFragmentByTag(String) - com.jayway.android.robotium.solo.Solo 类中的方法 等待带有给定标签的片段出现。

waitForFragmentByTag(String, int) - com.jayway.android.robotium.solo.Solo 类中的方法 等待带有给定标签的片段出现。

检查 javadoc 以了解详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T16:41:20.507

我认为 Robotium 3.3 添加了 waitForFragment() 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T00:52:00.097

有没有可以“等待”使用的文本`waitForText()`？还有一种`waitForView()`方法。

不确定这是否会有所帮助，但认为值得一试。

# python - Django 模板——嵌套包含在循环中

> ID：10924437
> 
> 赞同：5
> 
> 时间：2012-06-07T01:12:21.370
> 
> 标签：python, django, templates

我有一个模板，其中包含很多嵌套在 for 循环中。我们将页面的不同部分拆分为单独的模板文件，因为我们通过以不同方式将它们拼凑在一起以用于不同的视图来重用它们。

例如： {% for user in users %} {% include "userDetail.html" %} {% endfor %}

我们的数据库中有大约 40k 条记录。我已经将问题定位到模板系统。render_to_response 运行大约需要 11 秒。我想也许 Django 没有缓存模板，所以可能是 I/O 问题。

我扁平化了我们的一个模板，因此根本没有包含，并缩短了大约 5 秒。但这在我们重用大量模板代码的情况下并不是很有帮助。

有人知道这个问题的解决方案吗？或者有没有人有任何其他想法为什么 render_to_response 会花这么长时间？

**[编辑]**我应该提到我启用了 Django 的缓存模板加载器，它只节省了大约 1 秒。展平模板明显更快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T01:22:22.623

试试[Jinja2](http://jinja.pocoo.org/docs/faq/)，根据我的阅读，它比 Django 的模板库快 10 倍。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-07T02:34:30.890

你可以在客户端使用 Java Script 来做 for 循环，而不是让 django 来做。

[http://blog.iiilx.com/programming/benchmarking-my-app-out-of-curiosity/](http://blog.iiilx.com/programming/benchmarking-my-app-out-of-curiosity/)

# sql-server-2008 - IoC 和 Azure / SQL Server

> ID：10924438
> 
> 赞同：0
> 
> 时间：2012-06-07T01:12:35.660
> 
> 标签：sql-server-2008, entity-framework-4, inversion-of-control, unity-container, azure-table-storage

作为此问题基础的问题：[云外 Windows Azure 表的替代方案](https://stackoverflow.com/questions/2695041/alternative-to-windows-azure-tables-out-of-the-cloud)

在答案中，提到了控制反转作为一种解耦对 Azure 存储表的显式依赖和无名解决方案的方法。如果我正在使用 Unity 和实体框架（如果这很重要），是否可以使用 AST 和 SQL Server 2008 提供非此即彼的解决方案？如果是这样，是否有任何文章可以实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T03:35:19.260

关键是针对接口进行编码。它的实现是通过容器的配置挂钩的。然后，实现可以是 SQL Server 具体类或 ATS 具体类。

# php - 多个 SQL 查询未在 Cakephp 中执行

> ID：10924441
> 
> 赞同：0
> 
> 时间：2012-06-07T01:13:05.130
> 
> 标签：php, sql, cakephp

这是场景，我在其中上传了一个 sql 查询的 txt 文件。每次成功上传，我也需要执行它的内容。

好吧，我似乎无法执行一组查询。只需单行查询。

我有查询.txt：

```
USE `wifi_analyzer`;

CREATE TABLE 'test' (
    'username' varchar(10) NOT NULL,
    'password' varchar(10) NOT NULL
    ); 
```

这就是我在我的 cakephp 文件中执行它的方式。

```
$fullFile = $file_path.$file_name;
$readFile = fopen($file_path.$file_name, 'r');
$contents = fread($readFile,filesize($fullFile));
$this->User->query($contents); 
```

可以读取文件及其内容。但是，它显示一个错误：

```
SQL Error: 1064: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'CREATE TABLE 'test' (
    'username' varchar(10) NOT NULL,
    'password' varchar(10' at line 3 [CORE\cake\libs\model\datasources\dbo_source.php, line 673] 
```

好吧，如果它只是这样的单行查询：

```
Select * from sometable; 
```

它不显示任何错误。但是这个单一的查询：

```
CREATE TABLE 'test' (
'username' varchar(10) NOT NULL,
'password' varchar(10) NOT NULL
); 
```

它也不执行。

* * *

更新：嗯，我读过这个： [http ://www.hardcode.nl/subcategory_4/article_558-execute-mysql-sql-dump-files-via-php-mysqli.htm](http://www.hardcode.nl/subcategory_4/article_558-execute-mysql-sql-dump-files-via-php-mysqli.htm)

但不知道这是否会有所帮助，因为我是在 cakephp 中做的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T18:51:44.437

不要对表名和字段名使用单引号。执行下面的查询它将起作用

```
CREATE TABLE `test` (
`username` varchar( 10 ) NOT NULL ,
`password` varchar( 10 ) NOT NULL
); 
```

# iphone - 如何将 git 与 Xcode 集成

> ID：10924444
> 
> 赞同：1
> 
> 时间：2012-06-07T01:13:19.310
> 
> 标签：iphone, objective-c, xcode, git, github

我是iOS开发的新手。

我想知道是否有办法使用带有 Xcode 内置 SCM 功能的 git 存储库？

我正在使用 Xcode 4.2 和 GitHub。

考虑到我已经在 xcode 中成功设置了我的 git ......你能告诉我它是如何工作的吗？你看，我想知道其他用户在做什么。比如说，他们还可以访问 GitHub 中的 git 存储库。所以，我想知道的是，我可以在不去网站的情况下看到他们对存储库的更改吗？我已经尝试过 xcode 颠覆，它会显示一些标记，如“M”、“A”、“D”等，用于我的更改，然后在更改来自其他用户时显示“U”。git设置也是这样吗？我还能看到他们的实时变化吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T02:39:07.987

是的你可以。当您创建一个新项目时，Xcode 会为它创建一个新的 git 存储库。从本地存储库创建远程存储库有点痛苦，但可行。

您还可以输入远程存储库的 URL 并将其克隆到本地系统。为此，最简单的方法是使用“Welcome to Xcode”窗口（command shift 1）。单击“连接到存储库”并输入远程 URL，您应该会被要求提供凭据，然后它会提供让您克隆它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:22:02.600

我将给出基本答案和高级答案。

基本答案：拉取后，转到 File->Source Control->repositories。然后，您可以单击您的存储库并查看其他人（和您自己）所做的所有提交。每个提交旁边都有一个小的披露三角形。单击它将显示已更改文件的列表。单击“显示更改”按钮将允许您检查每个更改的详细信息。

进阶答案：

你将不得不学习用 git 操作有点不同，因为你已经习惯了颠覆性的做事方式，所以它对你来说似乎很陌生。坚持下去。一旦你掌握了它的窍门，Git 就很棒。

第一件事。当您想从中央存储库 (github) 中检索更改时，您有两种选择。您可以获取或拉取。使用 fetch，更改将被拉入您的本地存储库，但在您说之前不会合并。使用拉取，只需一步即可下载和合并更改。许多人认为 pull 是更好的选择，因为它一步完成了这两项任务。

但是，除非您对 git 命令有相当的了解，否则使用 pull 会使您更难看到发生了什么。

要查看发生了什么变化，请从终端执行以下操作：

```
git checkout master 
   (Make sure we're on the master branch)
git fetch 
  (This command pulls down the changes, but keeps them in their own <remote_name>/<branch name> branch until you explicitly merge them)
git diff origin/master 
  (This command shows you the differences between what you just pulled down and your local copy of master) 
```

您还可以使用 git difftool 命令（如果已配置）来查看 FileMerge 等图形工具中的差异。

一旦您查看了更改并感到满意，将它们带入您的本地分支，您将执行以下操作：

```
git merge origin/master
   (merge origin/master with the branch I'm on - master) 
```

此过程使您可以灵活地在合并之前检查事物。如果您不满意，例如，您可能希望开发人员恢复他的更改。

现在，可以用 git pull 做同样的事情，但是由于更改是自动合并的，所以它有点复杂。例如，在拉取之后，要查看差异，您必须弄清楚拉取之前的提交 ID 是什么，然后执行以下操作：

```
git diff <id of commit before pull>.. 
```

结果相同，只是稍微复杂一点。

git 的好处在于它非常努力地避免丢失任何数据。因此，例如，如果您 git pull 并且不喜欢更改，则可以执行 a`git reset --hard <commit of the last good commit>`并且您将立即回到您所在的位置。

从终端学习做这些事情可能看起来很困难，但它给了你巨大的力量，所以值得努力学习。

# report - 用于显示软件上次使用时间的 sccm 报告

> ID：10924447
> 
> 赞同：3
> 
> 时间：2012-06-07T01:13:58.967
> 
> 标签：report, sccm

我正在创建一份报告，以查找我们网络上安装了某些软件的计算机。

该报告运行良好，直到我想知道该程序最后一次使用的时间。当我添加“LastUsedTime0”时，结果增加了。

我不是编码员，我的脚本是许多脚本的反复试验，但看起来数据库的链接不正确（根据我的水晶报告经验）。

这是脚本

==============================

```
SELECT s.Name0, DisplayName0, Publisher0, s.AD_Site_Name0, TopConsoleUser0, LastUsedTime0

FROM v_Add_Remove_Programs arp,V_R_system s, 
v_FullCollectionMembership fcm, 
v_GS_CCM_RECENTLY_USED_APPS rua,
v_GS_SYSTEM_CONSOLE_USAGE scu

WHERE fcm.CollectionID = 'SMS00001' and 
arp.ResourceID=fcm.ResourceID and 
arp.ResourceID=s.ResourceID and 
arp.ResourceID=rua.ResourceID and
arp.ResourceID=scu.ResourceID and

(
DisplayName0 like 'Microsoft Office%' and
DisplayName0 not like '%Excel%' and
DisplayName0 not like '%database engine%' and
DisplayName0 not like '%slide%' and
DisplayName0 not like '%frontpage%' and
DisplayName0 not like '%SharePoint%' and
DisplayName0 not like '%Live%' and
DisplayName0 not like '%PowerPoint%' and
DisplayName0 not like '%Word%' and
DisplayName0 not like '%XML%' and
DisplayName0 not like '%Communicator%' and
DisplayName0 not like '%SR-1%' and
DisplayName0 not like '%Resource%' and
DisplayName0 not like '%Visio%' and
DisplayName0 not like '%Web%' and
DisplayName0 not like '%XP%' and
DisplayName0 not like '%Sounds%' and
DisplayName0 not like '%OneNote%' and
DisplayName0 not like '%Click%' and
DisplayName0 not like '%Primary%' and
DisplayName0 not like '%Standard%' and
DisplayName0 not like '%Connector%' and
DisplayName0 not like '%Pack%' and
DisplayName0 not like '%Add-in%' and
DisplayName0 not like '%Validation%' and
DisplayName0 not like '%Components%' and
DisplayName0 not like '%Proof%' and
DisplayName0 not like '%MUI%' and
DisplayName0 not like '%Service%' or
DisplayName0 like 'Microsoft Project%' and
DisplayName0 not like '%Pack%' and
DisplayName0 not like '%MUI%' and
DisplayName0 not like '%Service%' or
DisplayName0 like 'Microsoft Access%' and
DisplayName0 not like '%engine%' and
DisplayName0 not like '%Runtime%' and
DisplayName0 not like '%Standard%' and
DisplayName0 not like '%Connector%' and
DisplayName0 not like '%Pack%' and
DisplayName0 not like '%Add-in%' and
DisplayName0 not like '%Validation%' and
DisplayName0 not like '%Components%' and
DisplayName0 not like '%Proof%' and
DisplayName0 not like '%MUI%' and
DisplayName0 not like '%Service%' or
DisplayName0 like 'Microsoft Project%' and
DisplayName0 not like '%Pack%' and
DisplayName0 not like '%MUI%' and
DisplayName0 not like '%Trial%' and
DisplayName0 not like '%Service%' or
DisplayName0 like 'Microsoft Access%' and
DisplayName0 not like '%engine%' and
DisplayName0 not like '%MUI%' and
DisplayName0 not like '%Service%' or
DisplayName0 like 'Microsoft Visio%' and
DisplayName0 not like '%Pack%' and
DisplayName0 not like '%MUI%' and
DisplayName0 not like '%Viewer%' and
DisplayName0 not like '%Service%' 
)

GROUP BY DisplayName0, Publisher0, s.AD_Site_Name0, s.Name0, LastUsedTime0, TopConsoleUser0

ORDER BY Publisher0 
```

============================

这个脚本可能甚至不是做我想做的最好的方法，所以任何建议都会很棒。

感谢您抽出宝贵的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T20:59:32.863

您正在执行的联接在技术上有效，但会给您不正确的结果。这是一对多的关系，这就是您看到“重复”的原因。

添加/删除程序数据与执行数据无关。它与机器有关，而机器又与执行数据有关。但没有直接关系。

添加/删除程序数据是在安装程序时（通常）写入 Windows 注册表的数据。执行数据由 SCCM 客户端的软件计量部分收集。它监视 .exe 文件的执行。.exe 文件不一定是添加/删除程序中的程序，添加/删除程序中的程序可能有多个与其相关的可执行文件。这就是您的查询返回错误结果的原因。

您最好从 v_GS_CCM_RECENTLY_USED_APPS 获取所有数据，并从查询中删除添加/删除程序。v_GS_CCM_RECENTLY_USED_APPS 中有一个产品名称列，它有执行数据。

# excel - 将用户表单中的教科书答案作为参数传递给单独的宏

> ID：10924458
> 
> 赞同：0
> 
> 时间：2012-06-07T01:15:26.013
> 
> 标签：excel, vba

所以我试图使用用户表单来传递答案，作为在给定文件夹中搜索文件的一种方式。例如，这就是我想要做的。

选择文件 1 ***_* _**

选择文件 2 ***_* _**

按钮

我希望能够在文本框中输入文件路径，然后将它们作为参数传递给一个单独的宏，该宏会将数据加载到当前工作簿中。但是，我在任何地方都找不到有关此的任何信息。

有人可以展示这样的基本示例吗？

* * *

惊人的。我仍然对如何从用户表单传递它感到困惑。

所以我有

私有子 TextBox1_Change()

结束子

私有子 TextBox2_Change()

结束子

如何将答案指定为可以传递给 GetDataFromSelectedFile 宏的全局变量？

* * *

这是用户表单布局：

LabelTextBox1 文本框 LabelTextBox2 文本框

```
 Command Button 
```

用户表单下的子项：

Private Sub CommandButton1_Click() Call ProcessSelectedFile - 这与之前发布的 Call RemoveDups 相同 - 它的作用并不重要，因为它在
ProcessSelectedFile 实施后起作用 End Sub

Private Sub TextBox1_Change() 'ChDrive (sPath) ' 这是我不清楚你在做什么的地方 'ChDir (sPath) 'vOpen_File = Application.GetOpenFilename

结束子

私有子 TextBox2_Change()

结束子

基本上，如果您可以向我展示如何在用户表单中记录答案并将其传递给 ProcessSelectedFile，然后单击命令按钮执行这两个宏，它将起作用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:19:14.320

You should use the GetOpenFilename function for user friendliness:

```
ChDrive (sPath)
ChDir (sPath)
vOpen_File = Application.GetOpenFilename 
```

Furthermore, if you want to verify a path on existence:

```
If fso.FolderExists(sPath) Then
    msgbox "File exists"
Else
    msgbox "File doesn t exist"
End If 
```

Reference the library "Microsoft Scripting Runtime" for this. Do not use a global variable for this, it is unnecessary.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T02:23:08.850

这应该让你指向正确的方向。

`c:\killme`我在名为`workbook1.xlsx`and的目录中设置了 2 个测试文件`workbook2.xlsx`。`A1`我在两个文件的单元格中输入了不同的值`Sheet1`，保存并关闭了它们。

在第三个工作簿中，我添加了一个模块并添加了以下代码。

```
Option Explicit

Sub GetDataFromSelectedFile(sFile As String, sPath As String)
    ' Clear sheet before getting data from selected workbook
    ActiveSheet.UsedRange.Clear

    ' Get data from the selected workbook
    With Sheet1.Range("A1")
        .Formula = "= '" & sPath & "[" & sFile & "]Sheet1'!RC"
        .Value = .Value
    End With
End Sub

Sub ProcessSelectedFile()
    Dim SelectedFile As String
    Dim SelectedPath As String

    ' Set SelectedFile to value selected by user
    SelectedPath = "C:\killme\"
    SelectedFile = "workbook2"

    Call GetDataFromSelectedFile(SelectedFile, SelectedPath)
End Sub 
```

将路径和文件传递给 GetDataFromSelectedFile，并且您所在的工作簿 Sheet1 上的范围 A1 将填充所选文件中的相应单元格。

# ios - 是什么导致 iOS 游戏被添加到用户的游戏连接中？

> ID：10924462
> 
> 赞同：3
> 
> 时间：2012-06-07T01:15:40.733
> 
> 标签：ios, facebook-graph-api, unity3d, connection, prime31

我正在使用 Prime31 Social Networking 插件在 Unity 中开发 iOS 游戏来处理 Facebook 集成。一切似乎都在工作；代表应用程序、图形请求等发布到墙上。但是应用程序没有被添加到用户的游戏连接中，即。当我转到[https://graph.facebook.com/myname/games?access_token=whatever](https://graph.facebook.com/myname/games?access_token=whatever)时，它会在我的测试帐户中返回一个空集。我知道使用相同引擎和插件的其他应用程序能够以某种方式与用户建立连接，在通过上面的链接查询“游戏”时返回有关游戏的信息：

```
{

   "data": [

      {
         "name": "My Game",

         "category": "Games/toys",

         "id": "XXXXXXXXX",

        "created_time": "XXXXXXXXXX"

      }
   ],

   "paging": {
      "next": "https://graph.facebook.com/XXXXXXXXXXXXXX"
   }
} 
```

我是否会在应用设置中遗漏某些内容，我应该自己将此信息发布到用户的游戏连接中，还是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T08:48:55.847

啊...这种联系不是当您安装了“游戏”类型的应用程序时，而是当您喜欢一个作为“游戏/玩具”类型的“品牌或产品”创建的页面时。

换句话说，它是电影、音乐、电视连接的对等点，而不是与用户已通过身份验证的应用程序有任何关系。

当然，您可以创建一个页面来配合您的应用程序。让人们喜欢它出现在这个枚举中。

# javascript - Javascript - 用于 wordpress 的 Jquery 分页 Ajax

> ID：10924467
> 
> 赞同：0
> 
> 时间：2012-06-07T01:16:20.197
> 
> 标签：javascript, jquery, ajax, pagination

我试图制作一个非常简单的脚本来在 wordpress 中加载页面 -

```
<script>
jQuery(document).ready(function(){
 // ajax pagination
 jQuery('.navigation a').live('click', function(){ // wp pagination link on default theme
 var link = jQuery(this).attr('href');
 // #content is the content wrapper
 jQuery('#content').append('<div><h2>Loading...</h2></div>');
 // .entry is a single post wrapper
jQuery('#content').append(link+'.entry')
    });
}); // end ready function
</script> 
```

也试过：

```
jQuery('#content').load(link+'.entry') 
```

和

```
//tried also .load.ajax and prepend.ajax
 jQuery('#content').prepend.ajax({
      url: link,
      }); 
```

不知何故，它们都工作相同，我确实看到了一个“正在加载”的 div，但随后页面被新帖子刷新了 - 我似乎无法将它附加到末尾，或者我需要的 div..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:58:23.820

您的第二次尝试是正确的，但如果您在请求的页面中定位一个元素，则 URL 和选择器之间需要有一个空格，所以不要这样：

```
jQuery('#content').load(link + '.entry'); 
```

做这个：

```
jQuery('#content').load(link + ' .entry'); 
```

这将抓取元素`.entry`并将其异步加载到`#content`.

# meteor - 流星中延迟的html更新

> ID：10924470
> 
> 赞同：1
> 
> 时间：2012-06-07T01:16:48.520
> 
> 标签：meteor

我有一个球员名单，每个球员都有一个状态。我们按状态对玩家进行排序，并通过如下图标显示状态：

![在此处输入图像描述](../Images/10fed129d51b2bc8f7737d8881ab909c.png)

我需要这样做，所以当您单击播放器时，它们会立即更改状态图标，但直到延迟后顺序才会更改（出于 UX 原因）。关于最佳方法的任何想法。

以下是一些行不通的想法：

1.  立即更改`player.status`（您的订单更改）。

2.  使用超时延迟更改`player.status`（图标不会立即更改，感觉就像什么都没发生）。

3.  执行 #2 并通过 jQuery 更改图标类：如果您进行了一些更改，延迟更新将进行重绘，您将丢失您设置的类。

我有的最好的主意（而且我知道这很糟糕）是：

4.  执行 #2，但使用每个玩家的会话变量 ( `Session.get("player-$ID-status")`) 来存储状态的最新版本。

会有一些烦人的管道来完成这项工作，但我认为它会。我很想听听更好的方式（或“流星”方式）来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T05:42:43.317

我认为有几个更微妙的方法来完成你所需要的。一种方式会导致用户行为和不断变化的状态之间存在某种耦合。第二种方式是更解耦和优雅的方式，更符合*流星方式*。

**首先，有些紧密耦合的方法：**

您知道，在您的用例中，当用户指示他们希望发生更改时，播放器*应该更改为新状态。*我认为这里的关键是有一个间隙状态，玩家*将改变*到一个状态。

鉴于此细分，您可以使用两个属性来建模此行为：

`player.status`和`player.statusWillBe`

如果您以这种方式实现它，那么您可以将图标设置为 off`player.changingToStatus`和 ordering off `player.status`。

这意味着所有玩家都将从`player.status`和`player.statusWillBe`- 的相同值开始，然后图标将根据 中的值正确设置`player.statusWillBe`。

通过这种分解，您可以基于用户交互对行为进行非常细粒度的控制，但您的 ui 响应与用户行为和非 ui 组件紧密耦合。如果您继续使用这种方法，那会很快变得丑陋。您基本上会将模型/状态与 ui 混合。

**更复杂的解耦方式（并且符合*流星方式*）：**

为玩家状态更改实现状态机。然后，您可以在更改级别捕获状态更改。在状态更改后，您将使导致您的 ui 重绘[的上下文无效。](https://stackoverflow.com/questions/11260439/meteor-deps-running-a-client-side-func)这种方法更简洁，因为它可以将您的 ui 与您的“模型”完全分离。Meteor 上下文及其失效是客户端 ui 重绘的关键，它基于底层模型的变化，而无需将两者紧密耦合。

我还强烈建议您使用以下截屏视频来帮助您更好地理解这种模式：[Meteor reactivity with contexts。](http://www.eventedmind.com/posts/meteor-reactivity-with-contexts)

# r - 用于计算“突变率”的任何 R 包

> ID：10924471
> 
> 赞同：2
> 
> 时间：2012-06-07T01:16:50.527
> 
> 标签：r, bioinformatics, bioconductor

我有大量的家庭数据（父母和孩子）。它们都是等位基因的形式。即每个基因座和受试者的两个等位基因。我们的问题是计算每个基因座的突变率/计数（孩子的等位基因和父母的等位基因之间的不匹配）。有没有可以轻松做到这一点的 R 包？

提前致谢

# javascript - 从 KML 中提取路径

> ID：10924478
> 
> 赞同：0
> 
> 时间：2012-06-07T01:18:12.023
> 
> 标签：javascript, google-maps, google-maps-api-3, path, kml

我需要提取在 Google Earth 的 KML 文件中创建的路径，我更喜欢使用 Google Maps API 来执行此操作，但我仍然愿意接受其他选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T11:41:02.800

您无法通过 Google Maps API v3 做到这一点。相反，您需要使用服务器端解决方案或使用[GeoXML3](http://code.google.com/p/geoxml3/)。

# apache - 根据查询字符串参数重写 Cond - htaccess

> ID：10924485
> 
> 赞同：1
> 
> 时间：2012-06-07T01:19:28.780
> 
> 标签：apache, .htaccess, mod-rewrite

我有一个如下所示的查询字符串：

```
 widget.com/?id=1555&a1=chosen&w=hello 
```

我正在尝试修改此代码：

```
 SetEnvIf Referer "^https?://(.*)/" myref=$1
 RewriteCond %{HTTP_REFERER} !^$
 RewriteCond %{HTTP_REFERER} !corz.org [NC]
 RewriteRule . - [cookie=original-referer:%{ENV:myref}:.%{HTTP_HOST}:1440:/] 
```

但是我不想使用Referer作为RewriteCond，而是想确定a1=chosen

基于来自 widget.com/?id=1555&a1=chosen&w=hello 的 QueryString

我当前的代码如下所示：

```
 SetEnvIf Referer "^http?://(.*)/" myref=$1
 RewriteCond %{QUERY_STRING} a1=chosen 
 RewriteRule . - [cookie=source:%{ENV:myref}:.%{HTTP_HOST}:1440:/] 
```

我认为问题出在我为查询字符串参数重写条件的方式上。我确实花了 12 个小时搜索和尝试不同的正则表达式。

我还想确保如果 a1=chosen 不在此表达式中，或者可能具有不同的值，则不会创建 cookie。

谢谢你看看这个。

我只是想让它工作。哈哈

我可以让原始代码工作并从 .htaccess 设置一个 cookie，但我已经搜索了 12 个小时，但无济于事。

另外，有没有办法确保如果有人已经有一个 cookie 不会生成一个新的？

# php - “您必须登录才能访问此页面”错误

> ID：10924486
> 
> 赞同：2
> 
> 时间：2012-06-07T01:19:29.170
> 
> 标签：php, login

我进行了`login.php`设置，以便每当登录成功时，它都会自动定向到`profile.php`. 但是，即使登录成功，每次我去*它*`profile.php`时仍然说“您必须登录才能访问此页面”。为什么？

这是我的`login.php`：

```
$email = $_POST['email-field'];
$password = $_POST['password-field'];

if ($email && $password)
{
    $connect = mysql_connect("xx", "xx", "xx") or die("Couldnt connect!");
    mysql_select_db(xx) or die("Couldnt find db");

    $query = mysql_query("SELECT * FROM users WHERE email = '$email'");

    $numrows = mysql_num_rows($query);

    if ($numrows != 0)
    {

        while ($row = mysql_fetch_assoc($query))
        {
            $email = $row['email'];
            $md5password = $row['password'];
        }

        if ($email == $email && $md5password == md5($password))
        {
            header("Location: profile.php");
            $_SESSION['email']==$email;
        }
        else
            echo "Incorrect password";
    }
    else
        die("That user doessnt exist!");
}
else
    die("Please enter a username and a password"); 
```

我的`profile.php`：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<?php 

include('get-info.php');

session_start();

if ($_SESSION['email'])
    echo "<a href=logout.php>Logout</a>";
else
    die("You must be logged in to access this page");

?>

<html>

    <head>

        <title>

            R-A | Profile

        </title>

        <link href='css.css' rel='stylesheet' type='text/css' />

    </head>

    <body class='body3' >

        <div class='logo-bar'>

            <div class='menu'>

                <img src='images/rateaway.png' class='logo-bar-img' />

                    <div class='menu-options'>

                        <a href='index.php' class='menu-links' >Home</a>

                        <a href='profile.php' class='menu-links' >Profile</a>

                        <a href='profile.php' class='menu-links' >Friends</a>

                    </div>

            </div>

        </div>

        <div class='profile-main-content' >

            <div class='profile-current-info'>

                <p class='profile-name'> <?php get_info('iran_mateu@yahoo.com', 'name'); ?> </p>

                <img src='<?php get_info('iran_mateu@yahoo.com', 'profilepic'); ?>' class='profile-pic'/>

                <p class='profile-dob' > Born: <?php get_info('iran_mateu@yahoo.com', 'dob'); ?> </p>

                <p class='profile-country' > Currently lives in: <?php get_info('iran_mateu@yahoo.com', 'country'); ?> </p>

                <p class='profile-gender' > Gender: <?php get_info('iran_mateu@yahoo.com', 'gender'); ?> </p>

            </div>

            <div class='profile-edit-info' >

            </div>

        </div>

    </body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T01:21:07.603

您忘记开始会话了。在您要使用会话的每个页面上，您必须调用：

```
session_start(); 
```

还要确保在输出任何内容之前执行此操作，否则它将不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T01:25:37.153

成功登录后，您没有写入会话。考虑这部分：

```
if ($email==$email&&$md5password==md5($password))
    {
        header("Location: profile.php");
        $_SESSION['email']==$email;
    } 
```

您应该使用`=`而不是`==`. 既然你不是，你**没有**分配`$email`给`$_SESSION['email']`. 您没有分配任何东西，只是进行比较（并丢弃其返回值）。所以应该是：

```
$_SESSION['email'] = $email; 
```

此外，您应该添加`session_start();`到 login.php 的顶部，正如 minitech 在他的回答中所建议的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T01:52:56.623

此外，除非您有可靠的验证，不允许在您的注册页面上将多封电子邮件发送到您的数据库，否则您的查询应该是：

```
mysql_query("SELECT * FROM users WHERE email = '$email' LIMIT 1"); 
```

这将确保只检索一条记录（理论上应该始终如此） - 但如果确实设法检索了不止一条记录，它会破坏您的代码。

最后 ($email == $email... 嗯不确定你做对了，因为这总是正确的，因为你基本上只是检查它是否等于它自己(它总是会)，我认为你很困惑，因为你实际上已经用数据库中的数据覆盖了您从 $_POST 获得的 $email 变量。因此，您应该将代码修改为：

```
while ($row = mysql_fetch_assoc($query))
{
   $db_email = $row['email'];
   $md5password = $row['password'];
}

if ( $email == $db_email && $md5password == md5($password) )
{
   // assign variables / do things BEFORE redirecting as there is a risk that
   // your session data may not get written in some circumstances
   $_SESSION['email'] = $email;
   header("Location: profile.php");
   // always good habit to make sure nothing else is done after the redirection
   die();
} 
```

**编辑：**

还有一个提示：

**这：**

```
$email = $_POST['email-field'];
$password = $_POST['password-field'];

if ($email && $password)
{ 
```

**会更好：**

```
session_start();
if ( isset($_POST['email-field']) && isset($_POST['email-field']) )
{
    $email = $_POST['email-field'];
    $password = $_POST['password-field'];
    // add some validation to your $email and $password variables 
```

如果您的 $_POST 变量实际上没有像原始代码中那样设置，则上述内容将有助于避免通知，您使用 $_POST 变量就好像它们已设置（它们可能没有设置）一样 - 再次只是一个好习惯。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-02T07:33:25.097

需要此功能说明，

> if ($email==$email&&$md5password==md5($password)) { header("位置：profile.php"); $_SESSION['email']==$email; }

作者：[加亚兰布特](http://modelgayarambutterbaru.blogspot.com/)

# delphi - Delphi XE2 上的安装问题（Advantage Delphi Components）

> ID：10924488
> 
> 赞同：0
> 
> 时间：2012-06-07T01:19:48.103
> 
> 标签：delphi, advantage-database-server

![优势 Delphi 组件错误](../Images/92f844d4656a1599624fd704f0c1ec33.png)

在 Delphi XE2 (Windows 7 Pro) 上安装 Advantage Delphi 组件。打开显示上述对话框的 Delphi XE2 时出现错误。

尝试编译 adsDXE2dstudio 包但失败。

我们在这里缺少什么？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T01:51:36.067

您未能提供大量信息，因此这是一个非常通用的答案。

首先，如果您*曾*对此对话框回答“是”，则需要编辑注册表并从`HKEY_CURRENT_USER\Software\Embarcadero\BDS\9.0\Disabled Packages`. 如果那里列出了某些内容，则在您重新安装以解决问题后，IDE 不会将其删除，并且当 IDE 重新启动时，它将继续从组件面板中消失。

首先，确保包确实存在。使用 Windows 资源管理器并进行搜索。如果不存在，则安装失败。重新运行它，确保您以管理员身份登录。您可能需要使用控制面板来确保首先将其卸载以删除任何残留物。

如果包 (BPL) 存在于您的计算机上，则它所在的文件夹不在您的系统 PATH 中。Delphi 安装程序会自动将它放在那里，但由于某种原因可能会改变它。（有关如何检查，请参见下文。）例如，如果您以一个用户身份安装，选择“仅为我安装”而不是“为这台计算机的所有用户安装”，然后以其他用户身份登录，启动 IDE ，然后安装 Advantage。

默认情况下，IDE 将 32 位包放在`C:\Users\Public\Documents\RAD Studio\9.0\Bpl`文件夹（32 位包，其中包括所有设计时包）和`C:\Users\Public\Documents\RAD Studio\9.0\Bpl\Win64`文件夹（64 位运行时包）中。这两个文件夹应该在您的系统上`PATH`，而 Advantage 软件包应该在这些位置。

您可以`PATH`使用，在右窗格中`Start button`单击鼠标右键，然后选择（控制面板打开时的左侧），然后单击结果对话框中的按钮）来检查。`Computer``Advanced System Settings``Environmental Variables`

# php - xdebug 和 WAMP - 仍在等待连接

> ID：10924496
> 
> 赞同：0
> 
> 时间：2012-06-07T01:21:58.073
> 
> 标签：php, windows, netbeans, wamp, xdebug

我尝试了非常非常多的使用 WAMP 安装 xdebug 的解决方案，但我仍然有沟通“等待连接”。

```
[xdebug]
zend_extension_ts="C:/wamp/bin/php/php5.3.8/ext/php_xdebug-2.2.0-5.3-vc9-nts-86_64.dll"
xdebug.profiler_output_dir = "c:/wamp/tmp/xdebug"
xdebug.profiler_output_name = "cachegrind.out.%p"
xdebug.profiler_enable = 0
xdebug.profiler_append=0
xdebug.extended_info=1
xdebug.remote_enable=1
xdebug.remote_handler=dbgp
xdebug.remote_mode=req
xdebug.remote_host=127.0.0.1
xdebug.remote_port=9000
xdebug.idekey=netbeans-xdebug
xdebug.remote_log="c:/wamp/tmp/xdebug/xdebug_remot.log"
xdebug.show_exception_trace=0
xdebug.show_local_vars=9
xdebug.show_mem_delta=0
xdebug.trace_format=0
xdebug.remote_autostart=1 
```

我在 php.ini（/php 和 /apache）中都有这个。

但我可以在 WAMP 中启用扩展 php_xdebug-2.2.0-5.3-vc9-nts-86_64.dll。如果我选中此选项，则 WAMP 将被重置并且仍处于未选中状态。

我有 Windows 7 (64x)。

```
Sometimes i have error:

Failed loading ”C:/wamp/bin/php/php5.3.8/ext/php_xdebug-2.2.0-5.3-vc9-nts-x86_64.dll”
PHP Warning:  PHP Startup: Unable to load dynamic library 'c:/wamp/bin/php/php5.3.8/ext/php_phar.dll' - .\r\n in Unknown on line 0
<br />
<b>Warning</b>:  PHP Startup: Unable to load dynamic library 'c:/wamp/bin/php/php5.3.8/ext/php_phar.dll'
 in <b>Unknown</b> on line <b>0</b><br />
PHP Warning:  PHP Startup: Unable to load dynamic library 'ext/php_xsl.dll' in Unknown on line 0
<br />

PHP Warning:  Xdebug MUST be loaded as a Zend extension in Unknown on line 0
<br />
<b>Warning</b>:  Xdebug MUST be loaded as a Zend extension in <b>Unknown</b> on line <b>0</b><br /> 
```

但很少。

我怎么能用这个？请帮忙。仍然“等待连接”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T20:40:12.990

几个问题。您正在使用 PHP 5.3 并加载扩展：

zend_extension_ts="C:/wamp/bin/php/php5.3.8/ext/php_xdebug-2.2.0-5.3-vc9-nts-86_64.dll"

这条线在两个地方是错误的：

*   自 PHP 5.3 起，`zend_extension_ts`不再存在，您必须使用`zend_extension=`
*   您使用的是**nts**版本，而 ..._ts 行表示您使用的是 PHP 的 TS 版本

我建议您确保没有提及任何有关 Xdebug 的 zend_extension*= 和 extension= 行，然后参考[向导](http://xdebug.org/wizard.php)。

# tomcat - 手动提取 jar 与 Tomcat 解压

> ID：10924502
> 
> 赞同：2
> 
> 时间：2012-06-07T01:23:02.750
> 
> 标签：tomcat, ubuntu, deployment, jar, war

我的一项工作是在 tomcat 服务器中部署战争文件，我已经这样做了多年。我的部署方式是；停止tomcat，将war复制到我在tomcat虚拟主机中设置为an的新目录`appbase`并启动tomcat以提取appbase下的war，最后停止tomcat，将提取的目录从appbase移动到webapps并最终启动tomcat。我们的开发人员强烈推荐此过程，因为他们抱怨说，如果我由于多次自动部署而直接将战争置于 webapps 下，他们过去常常会收到一些邮件。这种方式对我们来说很好，并且在生产服务器上从未遇到任何问题。

我的问题是，

命令行手动提取`mkdir myapp;cd myapp;jar -xf /path/myapp.war`和tomcat提取的方式一样吗？我想写一个脚本，如果我用`jar`命令手动提取war文件并将其放在webapps中并启动tomcat而不是让tomcat解包war，会有什么问题吗？它是否有效，是否推荐用于生产服务器，或者如果它神秘地做了任何 jar 不能做的事情，它是否会对 tomcat 提取的方式产生任何影响？

需要帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T16:16:49.613

除非您的配置以某种方式被破坏，否则替换目录中的 WAR 文件（或爆炸的 WAR 目录）`webapps/`应该会导致 webapp 被重新部署——并且只部署一次。如果您分享更多配置，我也许可以评论一下您遇到双重部署的原因。

# javascript - 应用程序初始化后的angularjs注入模块

> ID：10924503
> 
> 赞同：13
> 
> 时间：2012-06-07T01:23:12.317
> 
> 标签：javascript, html, angularjs

大家好，几天来我一直在尝试这样做，但没有运气。

无论如何要异步加载一些js脚本（包含角度模块）并在初始化后将它们注入正在运行的应用程序。

基本上我有一个容器 DOM 元素，它将填充一些从服务器请求的 HTML，根据这个 HTML 代码，我将决定需要哪些 js 文件（模块），然后将它们异步加载到 Angular 应用程序中注入模块并编译新注入模块的内容。

我尝试过，但每次我执行注入模块的引导方法时，主控制器都会启动并擦除我所有的范围状态。:(

这里有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-21T18:49:14.127

它很丑，但它有效：http: [//jsfiddle.net/MzseV/7/](http://jsfiddle.net/MzseV/7/)

它基本上通过迭代模块的`_invokeQueue`成员并使用用于注册服务、控制器和指令的提供程序应用函数来工作（注意：这些需要在引导 AFAIK 之前捕获）。这可能还会重新注册您之前注册的任何内容，因此您可能需要一些启发式方法来仅选择您想要的内容，尽管我不确定重新注册是否有任何损害。

同样，它相当可怕和骇人听闻，所以我只作为最后的手段使用。

[这是](https://stackoverflow.com/questions/15250644/angularjs-loading-a-controller-dynamically)我问的问题，后来回答了这个问题。

编辑：刚刚注意到这个问题有多老了，希望它仍然可以帮助某人。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-11T08:04:10.737

也许这可以帮助？

```
app.requires.push("myModule"); 
```

[当您只能访问模块变量时注入模块](https://stackoverflow.com/questions/17284577/injecting-module-when-you-have-access-only-to-a-module-variable)

# symfony - 在 Symfony 2 Bundle 语义配置中允许键值对

> ID：10924504
> 
> 赞同：22
> 
> 时间：2012-06-07T01:23:19.973
> 
> 标签：symfony, dependency-injection, bundle

基本上我想在我的配置中允许任意（但**不是空**）数量的**键值对**`billings`，在节点下，即定义一个**关联数组**。

我的`Configurator.php`（部分）中有这个：

```
->arrayNode('billings')
    ->isRequired()
    ->requiresAtLeastOneElement()
    ->prototype('scalar')
    ->end()
->end() 
```

然后，在我的`config.yml`：

```
my_bundle:
    billings:
        monthly : Monthly
        bimonthly : Bimonthly 
```

但是，输出`$config`：

```
class MyBundleExtension extends Extension
{
    /**
     * {@inheritDoc}
     */
    public function load(array $configs, ContainerBuilder $container)
    {
        $loader = new Loader\YamlFileLoader($container,
            new FileLocator(__DIR__.'/../Resources/config'));
        $loader->load('services.yml');

        $processor     = new Processor();
        $configuration = new Configuration();

        $config = $processor->processConfiguration($configuration, $configs);

        $container->setParameter('my_bundle.billings', $config['billings']);

        var_dump($config);
        die();
    }

} 
```

...我得到的是**按数字排列的数组索引**，而不是关联的：

```
 'billings' => 
     array (size=2)
         0 => string 'Monthly' (length=7)
         1 => string 'Bimonthly' (length=9) 
```

出于好奇（如果这有帮助），我正在尝试将此数组作为服务参数注入（来自这个伟大捆绑包的注释：[JMSDiExtraBundle](https://github.com/schmittjoh/JMSDiExtraBundle)）：

```
class BillingType extends \Symfony\Component\Form\AbstractType
{

    /**
     * @var array
     */
    private $billingChoices;

    /**
     * @InjectParams({"billingChoices" = @Inject("%billings%")})
     *
     * @param array $billingChoices
     */
    public function __construct(array $billingChoices)
    {
        $this->billingChoices = $billingChoices;
    }
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-07T06:20:46.303

您应该添加`useAttributeAsKey('name')`到您的计费节点配置中`Configurator.php`。

更多关于`useAttributeAsKey()`你的信息可以阅读[Symfony API 文档](http://symfony.com/doc/current/components/config/definition.html#array-node-options)

更改计费节点配置后，应如下所示：

```
->arrayNode('billings')
    ->isRequired()
    ->requiresAtLeastOneElement()
    ->useAttributeAsKey('name')
    ->prototype('scalar')->end()
->end() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-23T16:45:36.097

您可以添加如下内容：

```
->arrayNode('billings')
    ->useAttributeAsKey('whatever')
    ->prototype('scalar')->end() 
```

之后键会神奇地出现。

见：[https ://github.com/symfony/symfony/issues/12304](https://github.com/symfony/symfony/issues/12304)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-10T14:02:22.337

我最近不得不设置一些嵌套数组配置。

需求是

*   具有自定义键的第一级数组（描述实体路径）
*   这些数组中的每一个都必须有一个或多个任意标签作为键，并带有布尔值。

要实现这样的配置，您必须使用级联`prototype()`方法。

所以，下面的配置：

```
my_bundle:
    some_scalar: my_scalar_value
    first_level:
        "AppBundle:User":
            first_tag: false
        "AppBundle:Admin":
            second_tag: true
            third_tag: false 
```

可以使用以下配置获得：

```
$treeBuilder = new TreeBuilder();
$rootNode = $treeBuilder->root('my_bundle');
$rootNode
    ->addDefaultsIfNotSet() # may or may not apply to your needs
    ->performNoDeepMerging() # may or may not apply to your needs
    ->children()
        ->scalarNode('some_scalar')
            ->info("Some useful tips ..")
            ->defaultValue('default')
            ->end()
        ->arrayNode('first_level')
            ->info('Useful tips here..')
            # first_level expects its children to be arrays
            # with arbitrary key names
            ->prototype('array')
                # Those arrays are expected to hold one or more boolean entr(y|ies)
                # with arbitrary key names
                ->prototype('boolean')
                    ->defaultFalse()->end()
                ->end()
            ->end()
        ->end()
    ->end();
return $treeBuilder; 
```

从扩展类内部转储 $config 会得到以下输出：

```
Array
(
    [some_scalar] => my_scalar_value
    [first_level] => Array
        (
            [AppBundle:User] => Array
                (
                    [first_tag] => 
                )

            [AppBundle:Admin] => Array
                (
                    [second_tag] => 1
                    [third_tag] => 
                )
        )
) 
```

瞧！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-01T08:40:09.020

这`useAttributeAsKey`实际上是这样做的：

```
/**
 * Sets the attribute which value is to be used as key.
 *
 * This is useful when you have an indexed array that should be an
 * associative array. You can select an item from within the array
 * to be the key of the particular item. For example, if "id" is the
 * "key", then:
 *
 *     array(
 *         array('id' => 'my_name', 'foo' => 'bar'),
 *     );
 *
 *   becomes
 *
 *     array(
 *         'my_name' => array('foo' => 'bar'),
 *     );
 *
 * If you'd like "'id' => 'my_name'" to still be present in the resulting
 * array, then you can set the second argument of this method to false.
 *
 * This method is applicable to prototype nodes only.
 *
 * @param string $name          The name of the key
 * @param bool   $removeKeyItem Whether or not the key item should be removed
 *
 * @return ArrayNodeDefinition
 */
public function useAttributeAsKey($name, $removeKeyItem = true)
{
    $this->key = $name;
    $this->removeKeyItem = $removeKeyItem;

    return $this;
} 
```

# asp.net-mvc-3 - 传入字典的模型项是 A 类型，但是这个字典需要 B 类型的模型项

> ID：10924507
> 
> 赞同：2
> 
> 时间：2012-06-07T01:23:54.840
> 
> 标签：asp.net-mvc-3, model, views, viewmodel

好的，有很多这样的问题，我已经浏览了大约 1500 磅。我看到的那些，人们要么发送了错误的类型，要么他们在做一些偏颇的事情。在我的情况下，我都没有这样做。所以，我的确切错误是：

传入字典的模型项的类型为“ClanSite.Models.ViewModels.CategoryViewModel”，但此字典需要类型为“ClanSite.Models.ViewModels.UserLoginViewModel”的模型项。

问题是我的 _Layout.cshtml (@model ClanSite.Models.ViewModels.UserLoginViewModel) 上有一个模型，用于在每个页面上登录用户。

但是，在其中一个页面上，我正在尝试呈现类别列表。我的 CategoryViewModel 只包含一个类别列表，GetCategories() 返回该列表。

控制器

```
public ActionResult Categories()
    {
        CategoryViewModel cats = new CategoryViewModel();
        try
        {
            cats.Categories = ForumQueries.GetCategories();
        }
        catch
        {
            return RedirectToAction("Message", new { msg = "categories" });
        }
        return View(cats);
    } 
```

看法

```
@model ClanSite.Models.ViewModels.CategoryViewModel
@{
    ViewBag.Title = "clanSite - Categories";
}
<div class="forumPostTable">
@foreach (ClanSite.Models.Tables.Join.Category cat in Model.Categories)
{
    <div class="forumPostTableRow cursorPointer" onclick="linkTo('@Url.Action("Index", "Home")')">
        <div class="forumCategoryTableCellTitle">
            <div class="forumCategoryTitle">
                <a href="" class="linkNoDecGold">Title</a>
            </div>
            <div class="forumCategoryTitleDesc">
                @cat.CategoryInfo.Description
            </div>
        </div>
    </div>
}
</div> 
```

当我尝试转到此页面时，我收到错误消息。我使用调试器逐步浏览了该页面，并在以下位置获取了正确的数据：@cat.CategoryInfo.Description

这真的让我很困惑，因为我能够使用该模型在另一个页面上创建用户注册表单而没有任何问题。那么，如何在 _Layout 和视图中使用模型，而我只是在其中循环输出数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T10:57:54.500

我在 MVC 中确实有一个应用程序，它也需要很好地使用模型，我的方法是不在`_Layout.cshtml`. 如果存在这种情况，例如登录操作，所有页面都需要并因此在 中定义，`_Layout.cshtml`则应`RenderPartial`使用调用并还应创建特定的模型。

```
<section id="login">
    @{ Html.RenderPartial("_Login", new MyProjectName.Models.Account.LoginModel()); }
</section> 
```

All the pages will have the Partial View available and with its proper Model. Normal Views can then be created and displayed in the `RenderBody()` tag inside `_Layout.cshtml` without any Model conflicts.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T02:24:29.000

我实际上能够很容易地解决这个问题。我刚刚制作了一个仅包含公共 UserLoginViewModel 成员的界面 ILayout。然后我在我的 CategoryViewModel 中实现这个接口。这意味着，我需要将 UserLoginViewModel 添加到 CategoryViewModel，但这根本不是问题。登录时我唯一需要更改的是，我没有从处理登录的 Action 将 UserLoginViewModel 发送到 View，而是发送了 ILayout。

# javascript - 设置一个 if else 函数来检测它是否是元音

> ID：10924510
> 
> 赞同：0
> 
> 时间：2012-06-07T01:24:20.067
> 
> 标签：javascript, if-statement

我是 JavaScript 新手，我知道我做错了什么，因为我不断得到`true`结果。有人可以指出我的错误吗？提前致谢。

```
function checkForVowel(x){
   if(x == "a", "e", "i", "o", "u"){
       document.write("true");
   }else{
       document.write("false");
   }
}

checkForVowel("n"); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-07T01:26:24.213

JavaScript 的比较运算符并不神奇。您需要分别进行每个比较。您可以使用逻辑 OR 检查“其中任何一个” `||`：

```
if(x == "a" || x == "e" || x == "i" || x == "o" || x == "u") 
```

或者，由于您有许多单字符串，您可以使用`indexOf`. 但是如果您刚刚开始，上述内容可能更容易理解。

```
if(x.length === 1 && 'aeiou'.indexOf(x) > -1) 
```

至于你为什么说实话，那`,`实际上是 JavaScript 中的一个运算符，主要是为了迷惑人而发明的¹。它评估其左侧，然后评估其右侧，并返回右侧。所以你的表达总结如下：

```
if(x == "a", "e", "i", "o", "u")
if("e", "i", "o", "u")
if("i", "o", "u")
if("o", "u")
if("u") 
```

这是一个真实的价值。

[¹其实不是。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T01:31:30.323

有时，针对数据结构进行测试的代码比使用大量`if/else`代码要干净得多。哪个更快可能取决于特定的浏览器引擎以及您有多少比较。这个查看字符串是否存在于元音字符串中：

```
var vowels = "aeiou";

function checkForVowel(x) {
    return(vowels.indexOf(x.toLowerCase()) >= 0);
} 
```

这个测试以查看测试字符是否在此处不需要的 javascript 对象中，但这是另一种有趣的测试某些东西是否在集合中的方法：

```
var vowels = {a: true, e: true, i: true, o: true, u: true};

function checkForVowel(x) {
    return(x.toLowerCase() in vowels);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T01:59:03.853

我不知道为什么，但没有人建议这个。`:/`

```
function checkForVowel(x){
    document.write(/[aeiou]/i.test(x));   //Clearly this is even simpler than
}                                         // other methods. 
```

或者

```
function checkForVowel(x){
   if(x.search(/[aeiou]/i) != -1){
       document.write("true");
   }else{
       document.write("false");
   }
} 
```

# gcc - 我应该优化多少？

> ID：10924513
> 
> 赞同：12
> 
> 时间：2012-06-07T01:24:30.220
> 
> 标签：gcc, compiler-optimization, compiler-flags

关于编译器 (GCC) 所做的优化，标准做法是什么？每个选项（-O、-O1、-O2、-O3、-Os、-s、-fexpensive-optimizations）有什么不同，我如何决定什么是最佳的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T01:49:22.940

通常 -O2 是一个很好的优化级别，可以先尝试。

但是，如果您想要尽可能好的结果，您最终会尝试许多优化级别，因为您无法事先判断哪个级别最适合您的应用程序。

另请注意，优化结果应因每个 CPU 而异（在某些优化大小的 CPU 实际上可能比优化速度产生更好的速度）。

仅供将来参考，这里是每个级别的简要说明（您可以在文档[http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html](http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html)中找到完整说明）：

-O（与 -O1 相同）：使用 -O，编译器会尝试减少代码大小和执行时间，而不执行任何需要大量编译时间的优化。

-O2：进一步优化。GCC 执行几乎所有支持的优化，不涉及空间速度折衷。与 -O 相比，此选项增加了编译时间和生成代码的性能。

-O3：进一步优化。-O3 打开 -O2 指定的所有优化，同时打开 -finline-functions、-funswitch-loops、-fpredictive-commoning、-fgcse-after-reload、-ftree-vectorize、-ftree-partial-pre 和 - fipa-cp-克隆选项。

-Os：优化大小。-Os 启用通常不会增加代码大小的所有 -O2 优化。它还执行旨在减少代码大小的进一步优化。

-Ofast：无视严格的标准合规性。-Ofast 启用所有 -O3 优化。它还支持并非对所有符合标准的程序都有效的优化。它打开 -ffast-math 以及 Fortran 特定的 -fno-protect-parens 和 -fstack-arrays。如果您使用多个 -O 选项，无论有无级别编号，最后一个这样的选项是有效的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T01:36:04.300

Linux 内核`Makefile`同时提供`-O2`和`-Os`. 如果缺少进一步的细节，任何一个都是合适的。

`-Os`针对小型存储进行了优化。由于如今 CPU 的速度明显快于主内存，因此即使在大型机器上优化小型存储也是有意义的——任何等待从主内存填充高速缓存的时间都是*浪费时间*。因此，通过编译来最大限度地利用指令缓存以提高空间效率，也许执行时间也会*有所*改善。

运行所有“通常的`-O2`优化”，并且选择的优化将是安全的。（我听说有些`-O3`优化并不总是安全的，但这可能是因为 Linux 内核运行时会受到一些通常应用程序不常见的约束。）

*当然，最好*的答案是用多级优化编译你的软件；time 编译软件需要多长时间，以及软件通过代表性基准测试需要多长时间。测量它们全部使用了多少内存。

然后选择编译速度、运行时速度和运行时内存使用的“最佳”组合。您可能想要最快的编译速度，或者您可能想要最快的运行时间，或者您可能正在尝试从虚拟主机提供商处安装更少量的内存以节省资金。

`-O2`不做任何测量就直接挑选可能是公平的。

# iphone - 无法更改自定义单元格的 uilabel 的文本

> ID：10924515
> 
> 赞同：0
> 
> 时间：2012-06-07T01:25:27.357
> 
> 标签：iphone, uitableview

我的目标：单击特定的表格视图然后将更改该行的 uilablel 文本

我正在做的是

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"click on row number %d",indexPath.row);
    NSIndexPath *index  =   [NSIndexPath indexPathForRow:indexPath.row inSection:0];
    NSArray     *array  =   [NSArray arrayWithObject:index];
    itemDesc.text       =   @"text should be changed";

    [shoppingListTable reloadRowsAtIndexPaths: array withRowAnimation: UITableViewRowAnimationNone];
} 
```

而xib就[在这里](http://i.imgur.com/c665G.png)

但是点击行后，uilabel的文字还是一样的

请就这个问题给我建议。欢迎任何意见在这里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:30:30.050

当你使用

```
[shoppingListTable reloadRowsAtIndexPaths: array withRowAnimation: UITableViewRowAnimationNone]; 
```

和委托方法

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{} 
```

将会被使用。

# bash - 什么是剧！阶段/重新加载行为？

> ID：10924518
> 
> 赞同：1
> 
> 时间：2012-06-07T01:25:32.903
> 
> 标签：bash, shell, playframework-2.0

如果我运行命令`play reload`，如果应用程序未运行，它会返回什么布尔值？

如果我执行如下所示的部署 shell 脚本：

`play reload || nohup play start`

它会开始播放吗？如果实例没有运行？还是无论如何都会失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T01:52:33.483

首先，我对`play reload`命令有一个误解。它实际上是 sbt 工具的一部分，而不是 Play！应用程序本身。

`play reload`返回为零，就像丹尼斯威廉姆森指出的那样，这意味着成功。

我实际上指的是`play stage`在自动部署等情况下准备生产应用程序。

现在我的最终部署脚本如下所示：

```
play compile
play stop || true

nohup play -DapplyEvolutions.default=true start 
```

注意到我应用进化的便捷捷径了吗？

我已经确认这同样有效，但我最终没有使用`play stage`.

# android - 如何为 elvison 的电池小部件等小部件设置动画

> ID：10924520
> 
> 赞同：0
> 
> 时间：2012-06-07T01:25:50.003
> 
> 标签：android, android-widget, android-animation

我一直在寻找如何创建动画小部件。我发现了一些似乎不能正常工作的例子，还有一些帖子说不应该这样做。我尝试了[这个](http://animated-widget-for-hpp.googlecode.com/svn/trunk/ExampleAnimatedWidget/res/)示例中的帧动画，但没有成功，但我能够让[这种](https://stackoverflow.com/questions/8063257/battery-widget-in-android)类型的动画效果非常糟糕，我不得不关掉手机。

我打算放弃，但我想我会下载一些其他动画小部件，看看它们是连续运行还是只在一个事件上运行。我发现 elvison 的电池小部件在插入时运行，但我没有注意到任何性能问题。

我想我需要妥协并在插入时让我的动画动画，但也可能在单击或更新时运行一个循环。

有人可以解释电池小部件动画是如何完成的，或者我应该如何在我的应用程序中执行此操作？某处是否有工作且解释清楚的示例，或者有人可以指出我从哪里开始的正确方向？

谢谢，--丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T05:17:58.983

在搜索并测试了其他解决方案后，我发现[这篇](https://stackoverflow.com/questions/2565023/is-there-a-way-to-animate-on-a-home-widget)文章提到了使用进度条进行动画。我没有意识到可以自定义进度条，但是使用一个可以完美地工作。我将测试对资源的影响，使其保持动画与事件的简短动画。

# mysql - 'Ctrl-C' 第 1 行恢复 MysqlDump 时出现 Mysql 语法错误

> ID：10924521
> 
> 赞同：4
> 
> 时间：2012-06-07T01:26:07.763
> 
> 标签：mysql, linux, mysqldump

我正在使用linux，我都试过了

`mysql -u root -pabc123 < ~/Desktop/restore.sql`

并以 root 身份登录到 mysql

`\. ~/Desktop/restore.sql`

我不断收到错误`You have an error in your SQl syntax; check the manual that corresponds to your MYSQL server version for the right syntan to use near 'Ctrl-C' at line 1`

这让我很生气，有人知道为什么吗？

这是一个 mysqldump --all-databases 文件

谢谢！

这是前几行

```
-- MySQL 转储 10.13 Distrib 5.1.58，用于 debian-linux-gnu (x86_64)
--
-- 主机：localhost 数据库：
-------------------------------------------------- ------
-- 服务器版本 5.1.58-1ubuntu1

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 设置@OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 设置名称 utf8 */;
/*!40103 设置@OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- 当前数据库：`mytmpDB`
--

创建数据库 /*!32312 如果不存在*/ `

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T01:47:05.217

```
mysql -u root -pabc123 < sed -e 's/^C//g' ~/Desktop/restore.sql 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-02T04:34:45.957

您可以尝试更改您的登录用户吗？

也许您创建数据库时的用户与您备份数据库的用户不同？

我也有同样的问题。

你可以试试

> sudo -u 用户名 -i

并做同样的操作，祝你好运！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-02T04:03:24.010

我也有同样的问题。当我更改命令 mysqldump

> mysqldump -u 根数据库名

到

> mysqldump -u root db_name > db_name.sql

它适用于恢复mysqldump。

# iphone - XCode 4.2：在项目导航器中重命名项目文件，所有项目设置/配置丢失

> ID：10924523
> 
> 赞同：2
> 
> 时间：2012-06-07T01:26:35.103
> 
> 标签：iphone, ios, xcode, xcode4, xcode4.2

我这里有点慌……

在项目导航器中，我单击并重命名了我的 .xcodeproj 文件（认为这是重命名项目的方法）。

发生的事情是项目的所有设置和文件都从项目导航器中消失了，我只剩下一个空白项目！

检查 Finder，它删除了我的旧 .xcodeproj 文件，用我给它的名称创建了一个新文件 - 但经过检查，该文件是空的！里面什么都没有。

我担心我可能已经丢失了那里的所有设置。我对 Git 的最后一次提交是在不久前，所以如果我从存储库中取回它，我将丢失我所做的一些更改。

有没有办法检索/撤消我所做的，并恢复我的项目？

见下文 - Alerts.xcodeproj 是我不想要的“新”项目..根本没有与之关联的文件。

![在此处输入图像描述](../Images/d34a8cfa63c5a03a0c2da712065661ac.png)

（顺便说一句，不知何故，不久前我将我的项目文件放在“新组”下-我也无法对其进行排序-但这可能是一个单独的问题！）

如果我使用版本编辑器，在左侧窗格中，我可以看到以前命名的项目文件中的所有设置.. 但似乎无法获得它们。实际上，我期待在右侧窗格中看到这些 - 所以我也对此感到困惑。我可以使用版本编辑器以某种方式取回我的旧项目文件吗？

![在此处输入图像描述](../Images/0df798041604790e9e9690bb8084abce.png)

提前谢谢了！

**更新**

好的，所以我将 Finder 中的项目文件重命名为我的原始项目文件名 - 这导致我的文件等再次显示在 Xcode 中.. 唷！好吧 - 几乎！

我现在没有计划，如下所示。方案存储在哪里？我现在需要重命名文件以匹配项目文件吗？

![在此处输入图像描述](../Images/fc6d10316427ab5c0a9dd23a8c8212c7.png)

**第二次更新 - 修复它！**

这不是最好的解决方案，但我找到了一种将所有内容恢复到原始设置的方法。我确信这是一种复杂的方式 - 所以我会等待一段时间，看看是否有人提出了更好的解决方案。如果他们不这样做，那么我将创建并回答以下答案：

在 Finder 中，我将项目文件重命名为原来的样子。当我启动 XCode 时，这会带回文件和设置。但是 - 没有计划！

我通过在几个文件中更新项目名称来解决此方案问题。这是程序：

1.  右键单击您的 project.xcodeproj 文件并选择“显示包内容”
2.  在生成的文件夹中，向下导航到该文件夹`xcuserdata/(username).xcuserdatad/xschemes/`
3.  在这里打开 .xscheme 文件，找到以下行，这些行将引用旧的、不需要的和不正确的项目名称：

> ReferencedContainer = "container:Alerts.xcodeproj"

（在我的例子中，Alerts.xcodeproj 是不正确的项目名称） 4\. 更改所有出现以匹配正确的项目名称。

沃利亚！解决问题。

干杯:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T05:11:07.923

好的，这不是最好的解决方案，但我找到了一种将所有内容恢复到原始设置的方法。我敢肯定这是一种复杂的方式！

在 Finder 中，我将项目文件重命名为原来的样子。当我启动 XCode 时，这会带回文件和设置。但是 - 没有计划！

我通过在几个文件中更新项目名称来解决此方案问题。这是程序：

1.  右键单击您的 project.xcodeproj 文件并选择“显示包内容”
2.  在生成的文件夹中，向下导航到该文件夹`xcuserdata/(username).xcuserdatad/xschemes/`
3.  在这里打开 .xscheme 文件，找到以下行，这些行将引用旧的、不需要的和不正确的项目名称：

> ReferencedContainer = "container:Alerts.xcodeproj"

（在我的例子中，Alerts.xcodeproj 是不正确的项目名称） 4\. 更改所有出现以匹配正确的项目名称。

沃利亚！解决问题。

干杯:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T01:28:59.673

如果 Xcode 认为你的项目在其他地方是开放的，它就会这样做。它只允许一次打开一个项目。关闭所有 Xcode 窗口，然后重新启动 Xcode。之后它应该像正常项目一样运行。

# php - PHP Snappy（wkhtmltopdf（webkit pdf 生成器））不喜欢我的 codeigniter 页面

> ID：10924524
> 
> 赞同：0
> 
> 时间：2012-06-07T01:26:44.733
> 
> 标签：php, codeigniter, codeigniter-2, wkhtmltopdf

我正在使用名为[Snappy的](https://github.com/knplabs/snappy)[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)的 PHP 包装器。除了我的本地 codeigniter 生成的页面之外，它在任何 url 上都能出色地工作。我尝试过使用 index.php，不使用 .html 作为 url 后缀等。它将从与 codeigniter 相同的本地 web 目录中读取 html 文件，但不会读取 codeigniter 的 URL（甚至不是 index.php）。我有点难过。

*   我已经从 .htaccess 中删除了任何可能导致 403 的内容
*   没有 robots.txt
*   [pyrocms](http://demo.pyrocms.com)与它一起工作（它由 CI 提供支持）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T03:42:05.630

`rel="stylesheet/less"`修正：原来wkhtmltopdf真的不喜欢 LESS CSS`<head>`

# opengl - 在 OpenGL 3.0 及更高版本中替换 glFrustum？

> ID：10924526
> 
> 赞同：2
> 
> 时间：2012-06-07T01:27:48.223
> 
> 标签：opengl, perspective

我一直在使用 OpenGL 3.0，让我感到困惑的一件事是新的 OpenGL 如何处理视锥。如果您应该为透视计算创建自己的矩阵，您如何向 OpenGL 指定 zFar 和 zNear 平面距离是多少？你必须为此使用着色器吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T04:02:33.860

The [man page for glFrustum](http://www.manpagez.com/man/3/glFrustum/) tells you exactly the math it actually implement.

You have to implement the same math in your own code, and pass the resulting matrix to your vertex shader as a uniform.

# php - 使用 javascript、php ajax 和 zend 框架创建响应式网站的标准方法是什么

> ID：10924528
> 
> 赞同：0
> 
> 时间：2012-06-07T01:28:02.077
> 
> 标签：php, javascript, ajax, zend-framework, validation

我目前正在开发一个 Web 系统，并计划大量使用带有 AJAX 的 JavaScript 来使用户界面更友好，而不是花哨。

JavaScript 将用于客户端表单验证、从服务器加载数据并使用结果创建适当的内容，还用于添加/编辑或外部引用期间的浮动窗口。

这是一个可以澄清我的问题的场景。

> 用户想要更新卡片，但不是跳转到另一个页面来验证产品的可用颜色、尺寸和奖品，而是在浮动窗口中显示这些信息，并且浮动窗口中的更改会影响底层信息。

我的问题是：

　**1.**遇到这种情况有哪些方法？
　**2.**有没有关于这个主题的有用提示、技巧和链接？

我对 JavaScript、PHP 和 Zend 很满意。我将不胜感激任何建议、提示和技巧，以及处理此类情况的问题解决方法！提前致谢。希望这是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T02:00:02.700

你想要的是一个 js 框架，它为你的客户端代码添加结构（尝试 ext-js、backbone、angular、embers 等）和一组小部件（kendoUI、ext-js、jquery-ui、dojo ...）。Zend 与 Dojo 紧密集成，因此您可能想要检查它，您还可以检查 ZendX jquery 以获取表单的 jquery-ui 集成。使用 Dojo 集成，您可能不需要一个 mvc 框架，这取决于您到底想要什么。

祝你好运。

# html - 相对于父级居中第二级下拉菜单

> ID：10924531
> 
> 赞同：3
> 
> 时间：2012-06-07T01:28:25.467
> 
> 标签：html, css

我有一个需要修改的菜单。我需要菜单的下拉部分[可能]相对于它的父级居中。

是的，菜单位于页面的右侧。

第 2 级菜单项将水平显示在第 1 级菜单项下方。

例如。

```
 top level
bottom | level  | items 
```

JSFiddle 链接：http: [//jsfiddle.net/smxA8/](http://jsfiddle.net/smxA8/)

重要提示：请注意，第 2 级项目之一当前位于 2 行...**需要位于单行。**

注意：这是针对 CMS 的。因此，任何这些都没有固定的宽度。用户可以在不修改 CSS 的情况下添加到任何级别的菜单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T02:49:03.113

在我看来，仅使用 CSS 并没有干净的方法来做到这一点。因为你需要有孩子的宽度或使用中心对齐。所以我的建议是使用一些 JS 代码。

版本：使用此处提供的 JS：http: [//jsfiddle.net/Zqypz/](http://jsfiddle.net/Zqypz/)

# ruby-on-rails-3.1 - 带有 Rails 和 EM-C2DM Gem 的 Heroku 上的 EventMachine

> ID：10924534
> 
> 赞同：0
> 
> 时间：2012-06-07T01:29:06.120
> 
> 标签：ruby-on-rails-3.1, heroku, eventmachine, thin, reactor

尝试在 Rails 中使用 GroupMe gem EM-C2DM，[https://github.com/groupme/em-c2dm](https://github.com/groupme/em-c2dm)，这是一个使用 Event Machine 的 Google C2DM Ruby 库。我知道它应该在 Heroku 上工作，因为有一个特定于 Heroku 的配置，但是我似乎无法让它运行。

我正在通过 Resque Worker 执行，并且该工作者正常工作并被排队和调用。但是，它无法通过身份验证，并且永远不会报告推送通知的响应。它似乎永远不会结束。

```
 module PushAndroid

  require "eventmachine"
  require "em-c2dm"

  @queue = :android_push

  def self.perform(opts)
    puts "entering android push"
    EM.next_tick do
      EM::C2DM.authenticate(ENV["C2DM_EMAIL"], ENV["C2DM_PASSWORD"])
      @push = Push.find(opts['push_id'])
      message = "Message #{@push.title}"
      push_id = "#{@push.id}"
      opts['tokens'].each{ |token|
        EM::C2DM.push(token, :message => message, :push_id => push_id) do |response|
            if response.success?
                puts "success! id=#{response.id}" # ID of sent message
            else
                puts "response:"
                puts response.inspect
                #case response.error
                #when "InvalidToken"
                    # reauthenticate
                #when "InvalidRegistration"
                    # clear our registration id
                #when "RetryAfter"
                    # pause sending for response.retry_after seconds
                #end        
            end
        end
      }
    end
  end
end 
```

我也尝试过不使用 EM::next_tick 或 EM.next_tick 并且它通过了身份验证，但是从不推送任何东西，从不返回响应或任何东西。实际上它从不进入 EM::next_tick。

关于如何让它发挥作用的任何想法？这是在 Heroku 上，使用带有 Thin 的 Rails 3.1.1

从我的 Gemfile.lock：

```
 thin (1.3.1)
      daemons (>= 1.0.9)
      eventmachine (>= 0.12.6)
      rack (>= 1.0.0)

eventmachine (1.0.0.beta.4)

    em-apn (0.0.3)
      eventmachine (>= 1.0.0.beta.3)
      yajl-ruby (>= 0.8.2)
    em-http-request (1.0.2)
      addressable (>= 2.2.3)
      cookiejar
      em-socksify
      eventmachine (>= 1.0.0.beta.4)
      http_parser.rb (>= 0.5.3)
    em-socksify (0.2.0)
      eventmachine (>= 1.0.0.beta.4)

  remote: git://github.com/groupme/em-c2dm.git
  revision: 2d853ff771908785f23b8c64fa5d5508b4eba40a
  specs:
    em-c2dm (0.0.1)
      em-http-request (>= 1.0.0.beta.4)
      eventmachine (>= 1.0.0.beta.3)
      uuid 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:26:38.783

把它放在 EM.run 中已经解决了这个问题。我猜工人没有连接到 Thin，因此需要运行他们自己的 Reactor

# javascript - 主干视图 + 谷歌可视化 api

> ID：10924535
> 
> 赞同：6
> 
> 时间：2012-06-07T01:29:11.293
> 
> 标签：javascript, backbone.js, google-visualization

我正在尝试将谷歌可视化图表集成到我的主干.js 应用程序中。目前，我在 ChartView 类的渲染函数中有 google.load(visualization) 和 setOnLoadCallback(drawVisualization) 调用。谷歌可视化库似乎加载正确，但从未执行回调。

下面是一个显示问题的示例，如果有人可以提供帮助，我将非常感激！

```
<!doctype html>
<html>
<head>
    <title>App</title>
    <meta charset="utf-8">
</head>
<body>
<div id="content"></div>

<script src="lib/jquery-1.7.2.min.js"></script>
<script src="lib/underscore.js"></script>
<script src="lib/backbone.js"></script>
<script src="http://www.google.com/jsapi"></script>

<script>

    ChartView = Backbone.View.extend({

        render:function () {
            $(this.el).html('<p>gviz line chart:</p>' +
                    '<div id="gviz" style="width:600px; height:300px;"></div>');
            google.load('visualization', '1', {packages:'linechart'});
            google.setOnLoadCallback(this.drawVisualization);
            return this;
        },

        //This never gets called
        drawVisualization:function () {
            console.log("In draw visualization");
            var data = this.createDataTable('date');
            var chart = new google.visualization.LineChart(this.$('#gviz'));
            chart.draw(data, null, null);
        },

        createDataTable:function (dateType) {
            console.log("Creating datatable");
            var data = new google.visualization.DataTable();
            data.addColumn(dateType, 'Date');
            data.addColumn('number', 'Column A');
            data.addColumn('number', 'Column B');
            data.addRows(4);
            data.setCell(0, 0, new Date("2009/07/01"));
            data.setCell(0, 1, 1);
            data.setCell(0, 2, 7);
            data.setCell(1, 0, new Date("2009/07/08"));
            data.setCell(1, 1, 2);
            data.setCell(1, 2, 4);
            console.log("Created datatable " + data.toJSON());
            return data;
        }

    });

    var AppRouter = Backbone.Router.extend({
        routes:{
            "":"chart"
        },
        chart:function () {
            console.log("Showing chart");
            $("#content").append(new ChartView().render().el);

        }
    });

    router = new AppRouter();
    Backbone.history.start();

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-09T21:47:43.837

好的，在另一个月过去之前记录下来以供后代使用。可以将回调设置为 google.load 调用本身的 arg，而不是使用 google.setOnLoadCallback 方法。还必须调整代码以获取 jquery 对象的第一个子对象，并且工作正常。

```
ChartView = Backbone.View.extend({

    render:function () {
        $(this.el).html('<p>gviz line chart:</p>' +
                '<div id="gviz" style="width:600px; height:300px;"></div>');
        google.load('visualization', '1',  {'callback':this.drawVisualization,
            'packages':['linechart']});
        return this;
    },

    drawVisualization:function () {
        console.log("In draw visualization");
        var data = new google.visualization.DataTable();
        data.addColumn('date', 'Date');
        data.addColumn('number', 'Column A');
        data.addColumn('number', 'Column B');
        data.addRows(4);
        data.setCell(0, 0, new Date("2009/07/01"));
        data.setCell(0, 1, 1);
        data.setCell(0, 2, 7);
        data.setCell(1, 0, new Date("2009/07/08"));
        data.setCell(1, 1, 2);
        data.setCell(1, 2, 4);
        var chart = new google.visualization.LineChart(this.$('#gviz').get(0));
        chart.draw(data, null, null);
    }

}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T17:07:48.917

如果您使用 require.js 进行依赖管理，我发现使用单调用加载特定模块效果很好。

```
 define(
        [
        'backbone'
        , 'socialPages/data/statCollection'
        , 'date'
        , 'https://www.google.com/jsapi?autoload={"modules":[{"name":"visualization","version":"1","packages":["corechart","table"]}]}'
        ], function(
        Backbone
        , StatsCollection
        ) {

return Backbone.View.extend({
    initialize: function() {
        _.bindAll( this
            , '_chartDataChanged'
            , '_drawChart'
            , '_fetchStats'
            , '_generateFields'
            , '_generateRows'
            , '_generateStatsTotals'
            , '_lineChartOptions'
            , '_onItemSelected'
            , '_padWithZeroValues'
            , '_setChartDimensions'
            , 'clean'
            , 'render'
        );

        this._firstRender       = true;
        this._sampleRate        = 'month';
        this.statsCollection    = new StatsCollection();
        this.dimensions         = this._setChartDimensions();
        this.statsCollection.bind( 'all' , this._chartDataChanged );
        this._fetchStats();
        if( window.google ) {
            google.setOnLoadCallback( this._drawChart );
        }

    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-13T14:09:37.557

您可以使用 [https://github.com/kontera-technologies/Backbone.GoogleChart](https://github.com/kontera-technologies/Backbone.GoogleChart)

```
chart = new Backbone.GoogleChart({
  chartType: 'ColumnChart',
  dataTable: [['Germany', 'USA', 'Brazil', 'Canada', 'France', 'RU'],
            [700, 300, 400, 500, 600, 800]],
  options: {'title': 'Countries'},
});

$("body").append(chart.render().el) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T20:52:57.787

我目前也在使用带有 GoogleCharts 的主干.js。无需在 View 的 render() 方法中加载 Google 可视化，您可以在脚本中加载 Backbone.js 视图之外的内容。

```
<script>
  google.load('visualization', '1', {packages:'linechart'});
  ChartView = Backbone.View.extend({

        render:function () {
            this.drawVisualization();
            return this;
        },
        drawVisualization:function () {
         ....
         chart.draw(data, null, null);
        }
</script> 
```

这可能仍然会产生不同的错误。我注意到从渲染调用“chart.draw”（此时视图的“el”仍然不是 DOM 的一部分，导致 Google Charts 发出“您的浏览器不支持图表”错误。

在您确定视图“el”已插入 DOM 中后，我将触发“drawVisualization”功能，例如。在视图（或其模型）中的事件上。说：

```
<script>
  google.load('visualization', '1', {packages:'linechart'});
  ChartView = Backbone.View.extend({
        events:{
            this.model.on('change',this.drawVisualization, this);
        },
        render:function () {
            this.drawVisualization();
            return this;
        },
        drawVisualization:function () {
         ....
         chart.draw(data, null, null);
        }
</script> 
```

希望这可以帮助。

# css - 在IE7中定位关闭

> ID：10924537
> 
> 赞同：1
> 
> 时间：2012-06-07T01:29:24.510
> 
> 标签：css, position, internet-explorer-7

我有一个页面，其中一些框以绝对位置定位。在 IE8 和 IE9 中完美运行，但 IE7 完全不稳定。

这是相关的HTML：

```
 <div id="thumbHolder">

            <div class="thumb upper"><a href="#pic1" rel="-339" title="" >
                <img src="../images/ui/telaviv1.jpg" alt="Jaffa" border="0" />
                <div class="caption"></div>
                <div class="captionText">Jaffa</div>
                <div class="rolloverText">
                <strong>Jaffa</strong><br />

    Visit the ancient
    port city, its artist colony
    and markets
                </div>
                </a>
            </div>

            <div class="thumb upper"><a href="#pic2" rel="-678" title="">
                <img src="../images/ui/telaviv2.jpg" alt="Neve Tzedek" border="0" />
                <div class="caption"></div>
                <div class="captionText">Neve Tzedek</div>
                 <div class="rolloverText">
               <strong> Neve Tzedek</strong><br />

    Explore the charming and
    fashionable neighborhood,
    the first to be built outside
    of Jaffa
                </div>
                </a>
            </div>

            <div class="thumb upper right"><a href="#pic3" rel="-1017" title="">
                <img src="../images/ui/telaviv3.jpg" alt="The White City" border="0" />
                <div class="caption"></div>
                <div class="captionText">The White City</div>
                 <div class="rolloverText">
               <strong> The White City</strong><br />

    Accredited a UNESCO
    world heritage site for
    its Bauhaus architecture
                </div>
                </a>
            </div>

            <div class="thumb"><a href="#pic4" rel="-1356" title="Messa Restaurant">
                <img src="../images/ui/telaviv4.jpg" alt="Restaurants" border="0" />
                <div class="caption"></div>
                <div class="captionText">Restaurants</div>
                 <div class="rolloverText">
                <strong>Restaurants</strong><br />

    Enjoy the finest
    restaurants, bars and clubs
    Israel has to offer

                </div>
                </a>
            </div>

            <div class="thumb"><a href="#pic5" rel="-1356" title="Menashe Kadishman’s Studio">
                <img src="../images/ui/telaviv5.jpg" alt="Art" border="0" />
                <div class="caption"></div>
                <div class="captionText">Art</div>
                 <div class="rolloverText">
                <strong>Art</strong><br />

    Explore art Galleries
    and meet with Israel’s
    top artists
                </div>
                </a>
            </div>

            <div class="thumb"><a href="#pic6" rel="-1356" title="Habima - National Theatre">
                <img src="../images/ui/telaviv6.jpg" alt="Culture" border="0" />
                <div class="caption"></div>
                <div class="captionText">Culture</div>
                 <div class="rolloverText">
                <strong>Culture</strong><br />

    Enjoy live performances
    and concerts

                </div>
                </a>
            </div>

        </div> 
```

这是CSS：

```
 #thumbHolder {width: 559px; overflow:hidden; position: relative; margin-bottom: 15px;}
    .thumb {float:left; width: 174px; margin-right: 18px;}
    .thumb a {text-decoration: none;}
    .caption { background: #000;    zoom: 1;
        filter: alpha(opacity=50);
        opacity: 0.5;
        padding: 4px;

        position: absolute;
        width: 166px; margin-top: -24px;    height:15px;}
    .captionText { 
        color:#FFF; position: absolute; padding:4px; width: 166px;  margin-top: -23px;  height:15px; text-align:center; font-weight: bold;}

    .rolloverText {background: #000;
        color: #FFF;
        padding: 6px;
        margin-top: -88px;
        height: 74px;
        position: absolute;
        width: 162px;
        line-height: 125%;
        display: none;
        font-size: 95%;}
    .upper {margin-bottom: 15px;}
    .right {margin-right: 0;} 
```

这是指向实际页面的链接：http: [//bit.ly/L47Qka](http://bit.ly/L47Qka)（请不要将此链接还原为实际目标链接，以用于索引目的）

当您将 IE8 和 IE9 与 IE7 进行比较时 - 您会看到缩略图的标题完全关闭，并且以同样的方式 - 单击时出现黑框（在实时页面上）。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T02:30:43.940

我很快就接受了，但这应该足以让你走上正轨。下面的示例在 IE6+、Firefox 和 Chrome 中进行了测试。

一些注意事项：我使用带有背景颜色和轮廓的 div 以及测试内容，但所有大小都与您的示例相同。默认情况下，我将其中一个叠加层“打开”，并默认隐藏其他叠加层，这样您就可以看到切换状态和基本状态。您需要重新添加 Javascript，这只是为了让您了解定位的工作原理。

乍一看，我认为您的问题是使用绝对定位的 div 而没有相对定位的容器。此外，“caption”和“caption-text” div 的一些负边距似乎也使事情变得混乱。

CSS：

```
body{
    margin:0;
    padding:0;
}

#wrapper{
    width:559px;
    height:400px;
    position:relative;
}

.thumb-wrapper{
    border:1px solid red;
    float:left;
}

.col1, .col2{
    margin-right:15px;
}

.row1{
    margin-bottom:15px;
}

.thumb-inner{
    width:174px;
    height:86px;
    position:relative;
}

.caption-wrapper{
    position:absolute;
    bottom:0;
    height:15px;
    width:100%;
    text-align:center;
    padding-bottom:4px;
    background-color:#000;
    color:#fff;
}

.rollover-text{
    position:absolute;
    top:0;
    width:100%;
    height:100%;
    background-color:#000;
    color:#fff;
    display:none;
} 
```

HTML

```
<div id="wrapper">
    <div class="thumb-wrapper row1 col1" >
        <div class="thumb-inner" >
            <div class="caption-wrapper">
                Test
            </div>
            <div class="rollover-text" style="display:block;">
                <strong>Test</strong><br>
                Test test test
            </div>
        </div>
    </div>
    <div class="thumb-wrapper row1 col2" >
        <div class="thumb-inner" >
            <div class="caption-wrapper">
                Test
            </div>
            <div class="rollover-text" >
                <strong>Test</strong><br>
                Test test test
            </div>
        </div>
    </div>
    <div class="thumb-wrapper row1 col3" >
        <div class="thumb-inner" >
            <div class="caption-wrapper">
                Test
            </div>
            <div class="rollover-text" >
                <strong>Test</strong><br>
                Test test test
            </div>
        </div>
    </div>
    <div class="thumb-wrapper row2 col1" >
        <div class="thumb-inner" >
            <div class="caption-wrapper">
                Test
            </div>
            <div class="rollover-text" >
                <strong>Test</strong><br>
                Test test test
            </div>
        </div>
    </div>
    <div class="thumb-wrapper row2 col2" >
        <div class="thumb-inner" >
            <div class="caption-wrapper">
                Test
            </div>
            <div class="rollover-text" >
                <strong>Test</strong><br>
                Test test test
            </div>
        </div>
    </div>
    <div class="thumb-wrapper row2 col3" >
        <div class="thumb-inner" >
            <div class="caption-wrapper">
                Test
            </div>
            <div class="rollover-text" >
                <strong>Test</strong><br>
                Test test test
            </div>
        </div>
    </div>
</div> 
```

这是完整 HTML 的链接：http: [//pastehtml.com/view/c0n37a140.html](http://pastehtml.com/view/c0n37a140.html)

# ruby-on-rails - 嵌套 Cucumber::Ast::Table

> ID：10924538
> 
> 赞同：2
> 
> 时间：2012-06-07T01:29:27.213
> 
> 标签：ruby-on-rails, ruby, cucumber

如何创建步骤来处理这个嵌套的黄瓜表？

```
 Scenario Outline: Sign Up
    Given I am on the <language> site
    And I am on the home page
    When I follow "<register>"
    And I fill in the following:
      | <fname> | John |
      | <lname> | Doe  |
    And I check "paintball"
    And I fill in the following within Emergency Contact:
      | <ename>   | Jane Doe   |
      | <enumber> | 4161111111 |
    Then I should see "John Doe"
    Examples:
      | language | register  | fname         | lname     | ename | enumber  |
      | en       | Register  | First Name    | Last Name | Name  | Number   |
      | pt       | Registrar | Primeiro Nome | Sobrenome | Nome  | Telefone | 
```

黄瓜要求我实施的步骤是

```
When /^ I fill in "(.*?)" with "(.*?)" $/ do |arg1, arg2, table|
  # table is a Cucumber::Ast::Table
  pending # express the regexp above with the code you wish you had
end 
```

但是当我实现它时，这会导致一个arity mismatch error。

```
Your block takes 3 arguments, but the Regexp matched 2 arguments.
(Cucumber::ArityMismatchError) 
```

这是意料之中的。在解析特征文件直到结束之前，黄瓜看到特征有一个嵌套表。由于没有对此的步骤定义，因此它要求一个。但是在解析整个文件之后，Gherkin 会将功能末尾的表格转换为单独的占位符，从而消除对最佳表格的需求（或者我认为这是可行的）。

但是，如果我`When`使用进入范围的两个参数来实现前一个子句，我会得到一个`--guess`选项无法解决的歧义错误。

我被困在这条路上太久了。任何帮助表示赞赏。

# android - 如何在不使用 jquery 1.0.1.css 的情况下为 android 获取可折叠和可扩展列表

> ID：10924540
> 
> 赞同：1
> 
> 时间：2012-06-07T01:29:39.053
> 
> 标签：android, jquery-mobile, cordova

我想得到如下所示的东西![在此处输入图像描述](../Images/2c835627ba968e68849845d252894a7f.png)

我使用的代码是：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>
    </title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
    <link rel="stylesheet" href="my.css" />
    <style>
        /* App custom styles */
    </style>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">
    </script>
    <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js">
    </script>
</head>
<body>
    <div data-role="collapsible" data-collapsed="true">
    <h3>Tasks Today</h3>
    <ul data-role="listview" data-divider-theme="b" data-inset="true"></ul>
                    <ul data-role="listview" data-divider-theme="b" data-inset="true">
                        <li data-theme="c">
                            <a href="#" data-transition="slide">
                                list1
                            </a>
                        </li>
                        <li data-theme="c">
                            <a href="#page1" data-transition="slide">
                                list2
                            </a>
                        </li>
                        <li data-theme="c">
                            <a href="#page1" data-transition="slide">
                                list3
                            </a>
                        </li>
                    </ul>
                    </div>

           <div data-role="collapsible" data-collapsed="true">
                    <h3>
                        Tasts This Week
                    </h3>
                    <ul data-role="listview" data-divider-theme="b" data-inset="true">
                     <li data-theme="c">
                            <a href="#" data-transition="slide">
                                Button
                            </a>
                        </li>
                    </ul>
                </div>

</body>
</html> 
```

但我不想在我的代码中使用下面的 css，因为它会影响我现有的 UI

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" /> 
```

任何人都可以帮助我在不使用此 jquery css 的情况下获得与我显示的相同的输出吗？

我用结构 css 替换了我的 css，我得到了如图所示的 UI ![在此处输入图像描述](../Images/29f364bc1d1dc008150fd3b6f76e79b5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:05:20.887

检查这个小提琴。基本上包括来自 git 存储库的可折叠、列表视图和主题 css [https://github.com/jquery/jquery-mobile/tree/master/css](https://github.com/jquery/jquery-mobile/tree/master/css)

[http://jsfiddle.net/dhavaln/UCDfU/](http://jsfiddle.net/dhavaln/UCDfU/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:39:45.870

您可以使用 jquery.mobile.structure.css，它只为您提供功能性 CSS，而无需所有样式。

[http://code.jquery.com/mobile/1.1.0/jquery.mobile.structure-1.1.0.css](http://code.jquery.com/mobile/1.1.0/jquery.mobile.structure-1.1.0.css)

这是最新的 1.1.0 版本。如果您要更新到 1.1.0，则可以使用它或将其用于您的版本。

看起来你想要风格和结构。唯一的选择是更改 CSS。如果与您的 UI 有太多冲突，而您唯一想要的就是列表，请从 JQM CSS 主题文件[http://code.jquery.com/mobile/1.1.0/jquery.mobile.theme复制 CSS- 1.1.0.css](http://code.jquery.com/mobile/1.1.0/jquery.mobile.theme-1.1.0.css)到你自己的 CSS 中。

查找所有 CSS`.ui-collapsible`以获取可折叠元素的样式。查找元素的 CSS 类的最佳方法是使用 Chrome 或 Firefox 中的 Web Developer/Firebug 工具。

# php - 仅当顶部和底部有空行时才查找字符

> ID：10924542
> 
> 赞同：0
> 
> 时间：2012-06-07T01:30:01.117
> 
> 标签：php, replace

发生了一些非常奇怪的事情，我希望有人能帮我解决这个问题。

我正在使用 preg_match 在文件中查找完全匹配的字符，但由于某种原因，除非文件顶部和底部都有空行，否则找不到它。

这是我的代码：

```
if ( @preg_match( "/([^0-9]{$uNumber}[^0-9])/", $numbers ) ) { 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T01:42:05.147

如果它是文件中唯一的内容，它将找不到搜索词。例如，如果文件是`12345`并且您正在搜索`12345`，那么它不会找到它。但是，如果文件是，`x12345x`那么它将找到它。

您可能想要做的是允许文件的开头和结尾：

```
/(?:^|\D){$uNumber}(?:\D|$)/ 
```

# amazon-ec2 - 启动克隆的 EC2 实例

> ID：10924547
> 
> 赞同：0
> 
> 时间：2012-06-07T01:30:52.640
> 
> 标签：amazon-ec2

对于启动像这样的新 EC2 实例的选项，该实例有多相似？它是否包括所有 cron 作业，或者新实例中究竟包含什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T18:31:09.823

它将使用相同的 AMI、可用区和安全组创建一个新实例。（请注意，如果 AMI 不再存在，这将是不可能的。）

如果您担心 2 个实例运行相同的 cron 作业，我建议禁用 AMI 中的 cron 进程，然后编辑它们以在创建实例后运行。如果为时已晚并且 cron 作业已经在原始 AMI 中，您可能希望在作业运行之间的时间产生新的作业，以便您有足够的时间登录到第二台机器并在它们之前关闭它们再次运行。

# python - 采用 MOSEK 的 CVXOPT 输出抑制

> ID：10924550
> 
> 赞同：10
> 
> 时间：2012-06-07T01:31:20.883
> 
> 标签：python, mathematical-optimization, mosek

我正在使用带有 CVXOPT 二次规划的可选 MOSEK 求解器，即

```
sol = cvxopt.solvers.qp(-Q,-p,G,h,A,b,solver='mosek') 
```

现在不使用 MOSEK 求解器，即

```
sol = cvxopt.solvers.qp(-Q,-p,G,h,A,b) 
```

CVXOPT 产生的终端输出可以用命令抑制

```
cvxopt.solvers.options['show_progress'] = False 
```

但是，这在使用 MOSEK 求解器选项时不起作用。我在几个循环中拥有的 MOSEK 求解器会产生很多我不感兴趣的输出，这意味着我看不到我感兴趣的输出（即我选择使用“打印”输出的内容）。

有谁知道是否可以抑制 MOSEK 输出？或者，如果没有，可能的解决方法（将输出通过管道传输到文件或其他东西）？

非常感谢！

担

ps 抱歉，我无法包含更具体的标签（我不允许创建新标签）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-13T23:14:54.263

我不知道如何通过 CVXOPT 传递这些选项，但是在对 CVXOPT 的源代码进行了一些筛选之后，我想出了这个解决方案：

```
from cvxopt import matrix, solvers
from mosek import iparam
solvers.options['MOSEK'] = {iparam.log: 0} 
```

它适用于 mosek 6。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:03:34.863

这个问题应该在 CVXOPT google-group 上提问（链接自 CVXOPT 主页）：

[http://groups.google.com/forum/?fromgroups#!forum/cvxopt](http://groups.google.com/forum/?fromgroups#!forum/cvxopt)

无论如何，从文档字符串中：

```
>>> help(cvxopt.msk.qp)
.
.
   Options are passed to MOSEK solvers via the msk.options dictionary, 
    e.g., the following turns off output from the MOSEK solvers

        >>> msk.options = {mosek.iparam.log: 0} 

    see chapter 15 of the MOSEK Python API manual. 
```

# node.js - Node.js 本地在 3000 端口上，无需指定端口

> ID：10924552
> 
> 赞同：1
> 
> 时间：2012-06-07T01:31:37.447
> 
> 标签：node.js, webserver

我有一个 node.js 应用程序的本地实例并设置我的主机文件以提供域名。我希望能够使用我拥有的通配符证书。但是，这不起作用，因为我仍然必须指定端口号。

是否可以在不指定端口的情况下在本地运行它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T03:32:37.170

您需要在端口 80 上运行它或在端口 80 上设置反向代理以将适当的请求发送到端口 3000。

# iphone - 切换视图控制器时的 EXEC_BAD_ACCESS (code=1 address=0x90000008)

> ID：10924553
> 
> 赞同：0
> 
> 时间：2012-06-07T01:31:47.783
> 
> 标签：iphone, ios, exc-bad-access

所以，我有一个使用 tableViewController 来填充不同游戏类型列表的应用程序。选择游戏时，它会执行该名称的转场。

在我为其中一种游戏模式完成添加统计菜单之前，这一切正常（正确推送和弹出）。

现在，当我从 stats 菜单切换回 tableViewController 时，有时会出现 EXEC_BAD_ACCESS 错误。所以：

TVC ---> 游戏 ---> 统计

*然后*

统计 ---> TVC

从 TVC 切换到游戏的代码：

```
NSString* a = (NSString*)[games objectAtIndex:indexPath.row];
a = [a stringByReplacingOccurrencesOfString:@" " withString:@""];
[tableView deselectRowAtIndexPath:indexPath animated:YES];
[self performSegueWithIdentifier:a sender:self]; 
```

从游戏切换到统计菜单的代码：

```
[self performSegueWithIdentifier:@"Stats" sender:self]; 
```

从 Stats Menu 切换到 TVC 的代码（出现问题的地方）：

```
NSArray* controllers = self.navigationController.viewControllers;
int a = [controllers count] - 1;
[self.navigationController popToViewController:[[self.navigationController viewControllers] objectAtIndex:a-2] animated:YES]; 
```

[有问题的错误](http://i.imgur.com/WdyBn.png)

[链接到代码](http://pastie.org/4041828)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:14:12.957

尝试分析您的代码以查看是否存在任何内存泄漏。这可能是您的应用程序崩溃的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T21:32:29.563

看起来苹果现在正试图强制执行 ARC。我刚刚下载了 10.7 SDK 的更新，它使我的程序（其中还包含 performSegueWithIdentifier:) 超级错误，并在我之前解决的多个问题上抛出 EXC_BAD_ACCESS（SDK 更新前）。我打开了 ARC，并注释掉了我所有的 release/dealloc 调用，它恢复了工作状态。很好，我想调试器如何将您指向它们所在的位置。:)

# mips - MIPS la 关键字

> ID：10924555
> 
> 赞同：0
> 
> 时间：2012-06-07T01:32:11.963
> 
> 标签：mips, memory-address, spim

假设有一个变量 var 存储在地址 0x00001000 并且它的值为 10。

如果我做了 la $t2, var

$t2 是否包含 var 的地址或 var 的值。我真的很想说地址，考虑到 la 代表加载地址，但我看过的所有例子都没有明确的联系。

我也知道这在本机指令中被分解为 lui ori，但它看起来究竟如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:21:27.073

`$t2`将包含地址变量，而不是内容（要获取内容，您需要 lw 或类似的东西）。

`la`确实是伪指令。有关如何使用它的更多信息，请查看以下问题和答案：

[MIPS：不使用伪代码的 la 指令的等价物？](https://stackoverflow.com/questions/1535228/mips-the-equivalent-of-la-instruction-without-using-pseudo-codes)

# wpf - 使用键从 ResourceDictionary 获取资源

> ID：10924556
> 
> 赞同：6
> 
> 时间：2012-06-07T01:32:16.037
> 
> 标签：wpf, xaml, resourcedictionary

我有一个 WPF 窗口，它应该从 XAML 文件加载两个矢量图像。（每个都在一个单独的文件中，以便在表达式设计中进行修改。）

当我在 a 中包含 XAML 文件时`MergedDictionary`，它工作正常。这是我使用的代码：

```
<Window.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="Images/LCCD logo.xaml" />
            <ResourceDictionary Source="Images/LCCD bottom image.xaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Window.Resources> 
```

和

```
<Image Source="{Binding Source={StaticResource LCCDlogo}}" /> <!-- Simplified -->
<Image Source="{Binding Source={StaticResource LCCDbar}}" /> <!-- Simplified --> 
```

但是，我现在需要向 Window 的资源添加更多内容。新资源属于这个窗口，所以我们希望它在同一个文件中，而不是包含的文件中。

`<Window.Resources>`当我在and之间添加以下代码时`<ResourceDictionary>`，出现以下错误：

**代码**

```
<Style TargetType="{x:Type tab:FabTabItem}">
        <Setter Property="Header" Value="{Binding Path=LabelText}"/>
        <Setter Property="HeaderTemplate">
            <Setter.Value>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal" Margin="0,0,4,0">
                        <TextBlock Text="{Binding}" TextTrimming="CharacterEllipsis"/>
                    </StackPanel>
                </DataTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

**警告**

> 设计器不支持加载将没有键的“ResourceDictionary”项目与同一集合中的其他项目混合的字典。请确保“Resources”属性不包含没有键的“ResourceDictionary”项，或者“ResourceDictionary”项是集合中的唯一元素。

所以我把`<ResourceDictionary>`标签改成这样：

```
<ResourceDictionary x:Key="Images"> 
```

但是，我现在不知道如何访问此词典中的资源。你如何从一个命名的内部获取资源`ResourceDictionary`？

* * *

**编辑**

没关系。这编译但不运行。

错误是：

> ''Resources' 属性已在 'MainWindow' 上设置。

我想我必须以其他方式来做。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T02:10:55.253

根据[MergedResourceDictionary 上](http://msdn.microsoft.com/en-us/library/aa350178.aspx)的 MSDN 页面，在 MergedDictionary 中指定的资源字典中定义资源是合法的，但并不常见。从上面的页面。

> 在指定为合并字典的 ResourceDictionary 中定义资源是合法的，可以作为指定 Source 的替代方法，也可以作为指定源中包含的任何资源的补充。但是，这不是常见的情况；合并字典的主要场景是合并来自外部文件位置的资源。如果要在页面的标记中指定资源，通常应该在主 ResourceDictionary 而不是合并字典中定义这些资源。

所以试试这个，看看它是否有效。

```
<Window.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="Images/LCCD logo.xaml" />   
            <ResourceDictionary Source="Images/LCCD bottom image.xaml" />
            <ResourceDictionary>
                <Style TargetType="{x:Type tab:FabTabItem}">
                    <Setter Property="Header" Value="{Binding Path=LabelText}"/>
                    <Setter Property="HeaderTemplate">
                        <Setter.Value>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal" Margin="0,0,4,0">
                                    <TextBlock Text="{Binding}" TextTrimming="CharacterEllipsis"/>
                                </StackPanel>
                            </DataTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </ResourceDictionary>
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Window.Resources> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T01:54:51.970

我最终将`<Style>`文件进一步向下移动到使用该样式的元素的父元素上。

这不是最好的解决方案，但它有效。

# python - 如何从位于列表中的字典中的列表中检索变量？二

> ID：10924559
> 
> 赞同：0
> 
> 时间：2012-06-07T01:32:53.893
> 
> 标签：python

好的，如果我有以下内容：

```
fruits = [{
    name:apple,
    color:[red,green],
    weight:1
}, {
    name:banana,
    color:[yellow,green],
    weight:1
}, {
    name:orange,
    color:orange,
    weight:[1,2]
}] 
```

所以我需要编写一个程序，通过颜色获取重量和名称。有人可以告诉我如何做到这一点。

```
def findCarByColor(theColor):
    z=0
    for i in carList:
        for a,b in i.iteritems():
            #print a,"a", b, "b"
            for d in b:
                #print d
                if d is theColor:

                    print carList [0][b][0]

    return z
print findCarByColor("Red") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T01:46:47.250

修复了示例字典。您还可以检查列表中是否存在字符串，而无需手动循环遍历它。

```
fruits = [{
    'name':"apple",
    'color':["red","green"],
    'weight':1
}, {
    'name':"banana",
    'color':["yellow","green"],
    'weight':1
}, {
    'name':"orange",
    'color':"orange",
    'weight':[1,2]
}]

def findit(fruits,color):
    for indv in fruits:
        if color in indv['color']:
            return indv['name'], indv['weight']

print findit(fruits,"red") 
```

结果：`('apple', 1)`

这个函数只会返回一个实例。例如，如果您需要查找出现绿色的每个实例，则第二个函数将起作用：

```
def findit2(fruits,color):
    return [(x['name'],x['weight']) for x in fruits if color in x['color']]

print findit2(fruits,"green") 
```

结果将是：`[('apple', 1), ('banana', 1)]`

如果您对我如何在一行中做到这一点的符号方面感到困惑，您可以通过[此处的 pythons 文档](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)查看它是如何完成的。如果你想要一个更简化的版本。您可以修改第一个方法（findit）以产生：

```
def findit3(fruits,color):
    mylist = []
    for indv in fruits:
        if color in indv['color']:
            mylist.append(  (indv['name'], indv['weight'])  )
    return mylist 
```

# java - Java 扫描仪字符串输入 If 语句不起作用

> ID：10924561
> 
> 赞同：4
> 
> 时间：2012-06-07T01:33:05.437
> 
> 标签：java, input, if-statement

我对java很陌生，这看起来很简单，也许我错过了一些东西。

下面是我的一些代码，它应该做的是让用户输入一个密码，该密码存储在 userinput 中，不幸的是，如果我输入 admin 并将其设置为 == "admin" 它将不起作用，甚至如果我像我一样全部大写或全部小写。

我什至尝试预先设置一个变量，例如 String password = "admin"; 并将其设置为 if (userinput == password) 但这似乎也不起作用。请帮忙！

```
 }
    public void protect(){
        Scanner input = new Scanner(System.in);
        System.out.println("Enter password: ");
        String userinput = input.nextLine();
        if (userinput == "admin"){
            System.out.println("Correct!");
        } else if (userinput != "admin"){
            System.out.println("Wrong!");
        }
    }
} 
```

快速总结一下，无论我输入什么密码，即使它是“管理员”，它也会对错。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-07T01:34:41.803

你不能像那样比较字符串。改用[`.equals()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#equals(java.lang.Object))：

```
if(userinput.equals("admin")) { // etc 
```

你为什么问？

*   == 检查实际的对象引用是否相同。
*   `equals(...)`检查两个字符串是否包含相同的字符串（即相同顺序的相同字符）

# java - 同时部署到多个 AVD

> ID：10924568
> 
> 赞同：0
> 
> 时间：2012-06-07T01:34:56.907
> 
> 标签：java, android, debugging, android-emulator

在开发过程中，我需要确保我的应用程序可以在多个 Android 版本上运行。为此，我创建并运行了多个 AVD。部署到这些单独的 AVD 可能既耗时又烦人。

有谁知道我可以同时部署到多个 AVD 的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T02:06:29.597

ADT 20 似乎支持这一点，但我从未使用过它：

> 允许一次启动在多个设备上运行。启动配置对话框中的目标选项卡添加了一个新选项，允许在所有连接的设备上启动，并且下拉列表允许用户进一步将列表缩小到仅物理设备或仅仿真器。（这仅适用于运行配置，不适用于 Debug/JUnit 测试。）

[http://tools.android.com/download/adt-20-preview](http://tools.android.com/download/adt-20-preview)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T02:16:51.847

截至本文发布之日，ADT 插件（确切地说是 18.0）不支持同时部署到多个 AVD。

正如 Nikolay 在下面的回答中提到的那样，您可以在未来的 ADT 版本中期待此功能。

# c++ - 知道谁指向它的对象

> ID：10924571
> 
> 赞同：2
> 
> 时间：2012-06-07T01:35:32.460
> 
> 标签：c++

我有 3 个不同的类（A、B、C），每个类都有一个 shared_ptr 到一个共享对象（对象 X）。我想要做的是向对象 X 提供有关谁指向它的信息。例如，如果没有指向它的 A 对象，则它不需要计算仅由 A 类在更新时使用的数据。并且对象 X 可以保留指向指向它的 C 对象的指针向量，因此当与 C 对象相关的某些数据已更新时，它可以在它们上调用函数（但 C 对象仍然指向它以从中查询其他数据）。

我正在考虑做的是为每个类上的 shared_ptr 创建一个包装器类，每当构造/分配/破坏包装器时，它将调用指向 X 上的函数的指针（所有相同的情况都会增加/减少 X 上的引用计数） . 这是代码中的想法：

```
class A
{
public:
    A() : m_ptr(&X::IncrementACount, &X::DecrementACount) { }

    void SetX( const std::shared_ptr<X> &ptr ) { m_ptr = ptr; }
private:
    shared_ptr_wrapper0<X> m_ptr;
};

class B
{
public:
    B() : m_ptr(&X::IncrementBCount, &X::DecrementBCount) { }

    void SetX( const std::shared_ptr<X> &ptr ) { m_ptr = ptr; }
private:
    shared_ptr_wrapper0<X> m_ptr;
};

class C
{
public:
    C() : m_ptr(this, &X::StoreCPointer, &X::RemoveCPointer) { }

    void SetX( const std::shared_ptr<X> &ptr ) { m_ptr = ptr; }
private:
    shared_ptr_wrapper1<X, const C*> m_ptr;
}; 
```

A 和 B 都有一个包装的智能指针，其中指定了不带参数的增量/减量函数。当包装的智能指针被设置/清除/等时，将在它包含的 X 对象上调用这些函数，并增加/减少 A/B 计数器。

C 有一个带有一个参数（类型为 const C* ）的包装智能指针。当它被设置/清除/等时，它将使用 C 的构造函数（this 指针）存储在其上的数据调用其上的函数，并将在对象 X 上的向量中添加或删除它。

所以我的主要问题是这是个好主意吗？有没有更好的方法来实现跟踪谁在指向一个对象的想法？这种想法是否有一个具体的名称（我无法想象我是第一个尝试这样的东西的人，但我在搜索它时没有找到任何东西，所以也许我只是不知道正确的名称寻找...）

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T02:04:24.197

更简单的方法是观察者模式，也就是发布/订阅者。请参阅[http://en.wikipedia.org/wiki/Observer_pattern](http://en.wikipedia.org/wiki/Observer_pattern)。您的 X 对象是发布者，可以提供 3 个不同的界面供观察。您的 A、B 和 C 对象是订阅者，他们注册以收到更改通知。每个观察者负责在 X 的订阅列表中添加和删除自己。当 X 发生变化时，相应订阅列表中的每个人都会通过他们的界面收到通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:53:47.033

您可以使用侵入式列表。制作a`class Base`和 make`A`并继承该类。此外，最好的技术不是区分and ，而是以相同的方式对待所有观察者（如果添加s及其特殊作用，与s 不同呢？）。这门课非常适合。`B``C``C``A``B``D``C``Base`

```
class Base
{
public:
    virtual void notifyXObjectChanged(/* data you want to pass*/) {}
    void setX(X* obj)
    {
        if(obj != object)
        {
            if(object)
                object->removeFromList(this);
            object = obj;
            if(object)
                object->addToList(this);
        }
    }

private:
    friend class X;
    X* object;
    Base* next;
    Base* previous;
}; 
```

并且，在 X 中：

```
class X
{
    // ...
public:
    void addToList(Base* obj)
    {
        if(first == 0 && last == 0)
        {
            // The list is empty
            first = last = obj;
            obj->previous = obj->next = 0;
        }
        else
        {
            // Add the object at the end of the list
            last->next = obj;
            obj->previous = last;
            obj->next = 0;
            last = obj;
        }
    }

    void removeFromList
    {
        // Code for removing an element in a list
    }

    void notify()
    {
        // iterate on the list
    }

private:
    Base* first;
    Base* last;
    // ...
}; 
```

优点：

*   非常小的内存开销
*   非常快

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T05:13:56.743

您的问题是唯一真正指向您的 A 对象的对象是智能指针。因此，即使您可以在复制智能指针时通知您的对象（搜索侵入式指针），也无法知道*谁*在复制智能指针，这是您真正想知道的。

您需要类似 pub/sub 模型的东西。

下面是伪代码，给出的想法是，我们要跟踪两种不同类型的订阅者。

```
class A
{
private:
    std::vector<B&> subscriberB;
    std::vector<C&> subscriberC;

public:
    void Subscribe(const B& subscriber) { subscriberB.push_back(subscriber); }
    void Subscribe(const C& subscriber) { subscriberC.push_back(subscriber); }

    // An example of a function where the subscribing objects are notified.
    void SomeFunction()
    {
        // for each subscriber in subscriberB
        subscriber.SomeFunction();

        // for each subscriber in subscriberC
        subscriber.SomeOtherFunction();
    }

}; 
```

上面存储引用，假设订阅者比他们订阅的对象寿命长。如果没有，您应该将智能指针放在向量中。此外，您可能希望防止同一个对象订阅两次，或者提供一种取消订阅的方法。

如果您想“强制”类型 B 或 C 的对象与 A 关联，您可以使它们的构造函数类似于：

```
// B ctor
B::B(shared_ptr<A> aPtr)
{
    myPointerToA = aPtr;
    myPointerToA ->subscribe(*this);
} 
```

更好的是使用创建 B 的工厂方法，然后将其连接到 A：这避免`this`了构造函数中的取消引用，这有点臭。

一种更典型的方法是拥有单一类型的订阅者“InterfaceSubscribeToA”，任何想要订阅 A 的类都将实现该订阅者。这完全取决于您要实现的目标，我只是提一下，以防您碰巧使您的特定问题过于复杂！

# php - 使用不同的父包装器在 PHP 中输 出奇数或偶数帖子——Wordpress

> ID：10924581
> 
> 赞同：1
> 
> 时间：2012-06-07T01:38:24.577
> 
> 标签：php, wordpress

这是我想要完成的事情：

我想根据奇数帖子和偶数帖子的不同父包装器是奇数还是偶数来输出不同的帖子。例如，偶数帖子可以输出到类别为的父级，`evenWrapper`奇数帖子可以输出到类别为的父级`oddWrapper`。

我得到了使用运算符背后的整体理论`modulus`。我被卡住的地方实际上是将偶数或奇数帖子包装在不同的父包装器中。这是我到目前为止所拥有的：

```
<?php if ( have_posts() ):
$c = 0;
?>

<div class="six columns alpha">

<?php 
while ( have_posts() ) : the_post();

    if($c % 2 == 0) : ?>

        <?php /* posts with even numbers are outputted here */ ?>

<?php   
    endif;
$c++;
endwhile;

?>

</div>

<?php endif; ?> 
```

上面的代码可以很好地输出偶数帖子。如您所见，父包装器围绕`while`循环并`if`使用运算符检查语句`modulus`。我的第一个猜测是创建一个`else`声明并在它们周围包裹一个不同的父级，如果它们不均匀的话。但是我遇到了它被困在`while`循环中并每次输出父包装器的问题。

我将如何从这里开始甚至将帖子输出到另一个父容器中？我必须再做一个`while`循环吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:59:46.163

I'm not fully up to speed on the WordPress API so there may or may not be a better way to get post details, but this should work regardless:

```
<?php
    $oddPosts = array();
    $evenPosts = array();
    $i = 0;
?>
<?while(have_posts()) : the_post()?>
<?
    $post = the_content(); // etc...
    if(++$i % 2 == 0) {
        array_push($evenPosts, $post);
    } else {
        array_push($oddPosts, $post);
    }
?>
<?endwhile;?>

<div class="wrapper odd">
    <?foreach($oddPosts as $post):?>
        <?= $post ?>
    <?endforeach?>
</div>
<div class="wrapper even">
    <?foreach($evenPosts as $post):?>
        <?= $post ?>
    <?endforeach?>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T01:59:14.667

其实很简单。是的，你也需要一份`else`声明。这是一个例子：

```
<?php if ($c % 2 === 0): ?>
<div class="evenWrapper">
<?php else: ?>
<div class="oddWrapper">
<?php endif; ?>
...
</div> 
```

你也可以这样做：

```
<?php
$class = $c % 2 === 0 ? 'evenWrapper' : 'oddWrapper';
?>
<div class="<?php echo $class; ?>">
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-26T15:45:10.923

只需使用 $wp_query->current_post 来获取帖子的当前索引位置：

```
<?php if (($wp_query->current_post) % 2) $class="evenWrapper"; else $class="oddWrapper"; ?>

<article <?php post_class($class); ?>>
 ...content here ...
</article> 
```

# jquery - 使用 id 和 .get 检索 div？

> ID：10924582
> 
> 赞同：0
> 
> 时间：2012-06-07T01:38:24.633
> 
> 标签：jquery, ajax

我正在尝试使用 ajax .get 及其 ID 属性检索 div。ajax 调用有效，但它返回整个页面，而不仅仅是 id 顶部的 div。

```
$.get(page + ' #top', function(data){
    topContent= data;
}); 
```

页面只是页面的 url，例如：gridpView.php。上面的代码与 .load 函数完美配合。我试图在使用它们之前加载几个 div，所以加载不是一个选项。

我究竟做错了什么？.get 函数是否能够检索 div？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T01:45:17.043

那种东西适用，`load`但我不相信它适用于`get`. 您需要获取整个页面，然后获取您想要的部分：

```
$.get(page, function(data){
    topContent=$(data).find("#top");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T01:41:58.170

这将为您提供他 div 的内容

```
 topContent= $('#top').html(); 
```

# solr - Solr - LukeRequestHandler - 需要索引状态

> ID：10924585
> 
> 赞同：0
> 
> 时间：2012-06-07T01:38:39.773
> 
> 标签：solr, dataimporthandler, luke

我正在尝试在我的应用程序中向管理员显示 Solr Index 的状态。该片段将包含：

*   索引最后更新日期
*   索引当前状态（空闲 | 索引 | 错误）
*   按需触发索引的按钮

注意：我正在使用 DataImportHandler 来刷新我的索引。

我正在使用 Luke 请求处理程序来获取索引的最后更新时间： [http ://server.dev/solr/core/admin/luke?numTerms=0&fl=0](http://server.dev/solr/core/admin/luke?numTerms=0&fl=0)

我可以使用 dataimporthandler 的“status”命令来获取索引状态。

我想知道是否有办法在单个请求中获取这些参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:42:05.813

如果还可以查看包含大量信息的统计信息（http://the-host:8983/solr/admin/stats.jsp）（包括我认为您想要的信息）

# ios - ARC 和情节提要的内存问题

> ID：10924586
> 
> 赞同：0
> 
> 时间：2012-06-07T01:39:01.880
> 
> 标签：ios, ipad, memory, storyboard, automatic-ref-counting

我正在使用的 iPad 应用程序存在内存问题：它只有 3 个视图控制器和一个导航控制器。我使用 push segue 将视图控制器从 A 交换到 B，然后使用 push segue 交换到 C，然后使用 popToRootViewController 指令再次交换到 A。

我已经在所有视图控制器上实现了 didReceiveMemoryWarning，只是为了知道会发生什么：视图 B 已从内存中正确卸载，但视图 C 似乎复制了自身并消耗了内存！当我触发内存警告时，我可以看到几个视图 C 正在回答...

它看起来不像循环保留，因为我声明我所有的父母引用都是弱的，并且因为泄漏工具没有检测到任何泄漏，也没有保留周期，但是内存增加了。
这会在使用真正的 iPad 进行测试时导致崩溃。

我能做些什么 ？我在哪里可以看？是否可以要求导航控制器释放所有先前的对象，但当前屏幕上的对象除外？

编辑 ：

鉴于 didload，我添加了一些观察者，如下所示：

```
 NSNotificationCenter *dnc = [NSNotificationCenter defaultCenter];
[dnc addObserver:self selector:@selector(undoManagerDidUndo:) name:NSUndoManagerDidUndoChangeNotification object:undoManager];
[dnc addObserver:self selector:@selector(undoManagerDidRedo:) name:NSUndoManagerDidRedoChangeNotification object:undoManager]; 
```

这样做是否有可能使 dnc 在某处保留对 self 的引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:47:32.623

如果您使用 ARC，则不必将它们归零。一旦不再有指向它们的强指针，ARC 应该自动释放它们。我不知道有一种方法可以查看哪个保留了它。可能有，但我已经看过但找不到方法。您应该删除所有 GestureRecognizers 和其他任何东西，以便它会解除分配。

# ios - 如何使用 iOS Facebook SDK 遍历相册中的照片

> ID：10924588
> 
> 赞同：0
> 
> 时间：2012-06-07T01:39:16.810
> 
> 标签：ios, facebook, facebook-graph-api

我使用 Facebook 获得了专辑列表

```
[[delegate facebook] requestWithGraphPath:@"me/albums" andDelegate:self]; 
```

我使用 objectForKey:@"id" 从上述请求中获得了专辑 ID

现在如何获取该相册中的照片列表？我应该对图形 API 使用什么请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T02:07:44.553

您获得的专辑 id 是 graphAPI 使用的唯一 id。使用它，您可以将其视为一个人，然后使用

```
[[delegate facebook] requestWithGraphPath:@"<your album id here>/photos" andDelegate:self]; 
```

例如，在可口可乐页面上调用专辑

```
[[delegate facebook] requestWithGraphPath:@"cocacola/albums" andDelegate:self]; 
```

向我显示 Wall Photos 相册的 ID 是“99394368305”。像对待任何其他 id 一样对待它，我可以使用检索其中的照片列表

```
[[delegate facebook] requestWithGraphPath:@"99394368305/photos" andDelegate:self]; 
```

每张照片都有其完整的数据（喜欢、评论）和两个链接，一个称为照片，一个称为来源，它们是指向实际照片本身的链接，然后您可以使用这些链接下载或显示在您的应用中

# ios - 当数组包含在 NSDictionary 中时设置 NSArray 值？

> ID：10924591
> 
> 赞同：0
> 
> 时间：2012-06-07T01:40:06.803
> 
> 标签：ios, nsarray, nsdictionary

我想在字典的数组中设置项目。我在下面有一个 NSDictionary，一个名为“currentCityNode”的实例。在该字典中是一个数组项（除其他外）。数组项名为“TheConnections” 下面的代码成功读取了数组。

```
 NSArray *theConnectionsArray = [currentCityNode objectForKey:@"TheConnections"];
 (theConnectionsArray now contains the previously loaded values '3','7', and '9') 
```

现在我想在这个数组中设置一个值。将第二个值“7”设为“5”。

我已经尝试了一些变化，但还没有得到它。

```
[currentCityNode addObject:notsurewhattoputhere forKey:@"TheConnections"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T01:51:56.933

你的数组和字典必须是可变的，这样的东西应该可以工作。如果 theConnectionsArray 已经是可变的，那么您不必使用`mutableCopy`.

```
NSMutableArray *theConnectionsArray = [[currentCityNode objectForKey:@"TheConnections"] mutableCopy];
[theConnectionsArray replaceObjectAtIndex:1 withObject:@"5"];
[currentCityNode setObject:theConnectionsArray forKey:@"TheConnections"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T01:53:49.667

如果您要检索的数组是可变的（ 的实例`NSMutableArray`）：

```
[[currentCityNode objectForKey:@"TheConnections"] addObject:@"objectToAdd"]; 
```

如果数组只是一个`NSArray`：

```
NSArray *array = [currentCityNode objectForKey:@"TheConnections"];
NSMutableArray *mutableArray = [array mutableCopy];
[mutableArray addObject:@"objectToAdd"];
[currentCityNode setObject:[NSArray arrayWithArray:mutableArray] forKey:@"TheConnections"];
[mutableArray release]; 
```

本质上，如果数组是不可变的（因此不能轻易添加），您需要创建一个可变副本并将该副本分配回“TheConnections”。

# java - Android：如何判断在运行时将哪种样式应用于小部件

> ID：10924593
> 
> 赞同：2
> 
> 时间：2012-06-07T01:40:58.310
> 
> 标签：java, android, debugging, android-view, android-theme

有没有办法确定小部件在运行时使用什么样式，并查看正在应用的样式覆盖？我曾希望 Hierarchy Viewer 会显示这一点，但事实并非如此。例如，如果您使用基于另一个主题的主题，然后覆盖小部件布局 XML 中的文本颜色，是否有任何工具或方法可以一目了然地看到这一点，或者我是否必须通过检查来确定它源代码和主题/样式定义文件？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T01:55:27.700

AFAIK，这是不可能的。

样式是在 XML 中定义并在编译时编译为二进制格式的组织工具。因此，我怀疑 Android 操作系统是否能够区分在运行时应用于您的小部件的不同样式。

我认为也不可能动态设置视图的样式。

# android - 更改标签主机颜色

> ID：10924594
> 
> 赞同：1
> 
> 时间：2012-06-07T01:41:22.750
> 
> 标签：android, android-tabhost

如何更改标签主机底部的蓝色（或深灰色）小线的颜色？可能吗？

[标签主机 http://imageshack.us/photo/my-images/802/sc20120607092226.png/](http://imageshack.us/photo/my-images/802/sc20120607092226.png/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T01:45:15.923

这篇文章可能会对您有所帮助：[Android 的 TabWidget 的自定义样式](https://stackoverflow.com/q/4127446/1231943)

这是关于更改选项卡元素的一些样式和主题。我想你需要做的是像这样设置 TabHost 的样式：

```
<TabWidget
        style="@style/MyTabStyle" 
```

然后，您将在样式 XML 文件中定义您希望的方式。

此外，这可能会有所帮助：http: [//joshclemm.com/blog/ ?p=136](http://joshclemm.com/blog/?p=136)

# c - TypeDefs 和指针

> ID：10924595
> 
> 赞同：3
> 
> 时间：2012-06-07T01:41:37.977
> 
> 标签：c, pointers, typedef

我的指针有问题。基本上我有一个结构，它作为下面的链表队列工作`Pcb`。

```
struct pcb {
    pid_t pid;             // system process ID
    char * args[MAXARGS];  // program name and args
    int arrivaltime;
    int remainingcputime;
    struct pcb * next;     // links for Pcb handlers
    int priority, memalloc, res1, res2, res3, res4, status;
};
typedef struct pcb Pcb;
typedef Pcb * PcbPtr; 
```

现在您可以看到我将`Pcb`指针定义为`PcbPtr`，这意味着它`PcbPtr`是一个指针，对吗？
然后我实现了这些函数来添加一个`PcbPtr`到队列中，这取决于它的优先级：

```
PcbPtr enqPcb(PcbPtr headofQ, PcbPtr process){
    PcbPtr c = headofQ;
    if (!headofQ) {
        headofQ = process;
        return headofQ;
    }
    while (c->next) {
        c = c->next;
    }
    c->next = process;
    return headofQ;
}

void priEnq(PcbPtr f1, PcbPtr f2, PcbPtr f3, PcbPtr a) {
    int pri = a->priority;
    if (pri == 3)
        enqPcb(f3, a);
    else if(pri == 2)
        enqPcb(f2, a);
    else 
        enqPcb(f1, a);
    return;
} 
```

但它并没有改变我指向的对象（即`headf1`在这种情况下:)

```
PcbPtr headi;
PcbPtr headf1; //priority 1
PcbPtr headf2; //priority 2
PcbPtr headf3; //priority 3
...
priEnq(headf1, headf2, headf3, headi); 
```

所以就好像我正在传递另一个对象作为参数。当我不使用`priEnq()`时，它会很好地添加到列表中。

任何想法我做错了什么？任何帮助深表感谢

### 解决了：

```
PcbPtr enqPcb(PcbPtr *headofQ, PcbPtr process){
    PcbPtr c = *headofQ;
    PcbPtr d = c;
    if (!*headofQ) {
        *headofQ = process;
        return *headofQ;
    }
    while (c->next) {
        c = c->next;
    }
    c->next = process;
    return headofQ;
}

void priEnq(PcbPtr *f1, PcbPtr *f2, PcbPtr *f3, PcbPtr a) {
    int pri = a->priority;
    if (pri == 3)
        enqPcb(f3, a);
    else if(pri == 2)
        enqPcb(f2, a);
    else 
        enqPcb(f1, a);
    return;
}

PcbPtr headi;
PcbPtr headf1; //priority 1
PcbPtr headf2; //priority 2
PcbPtr headf3; //priority 3
...
priEnq(&headf1, &headf2, &headf3, headi); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T02:57:37.207

如果我正确理解了您的问题，则调用者`priEnq`具有指向队列的指针，并且如果函数更改队列的头部，则希望更新这些指针。

问题是您按值传递指针。如果希望被调用函数修改调用者的值，则必须通过引用传递，即指向要更新的指针的指针。在代码中：

```
PcbPtr enqPcb(PcbPtr *headofQ, PcbPtr process){
    PcbPtr* c = headofQ;
    if (!*headofQ) {
        *headofQ = process;
        return *headofQ;
    }
    while (c->next) {
        c = c->next;
    }
    c->next = process;
    return headofQ;
}

void priEnq(PcbPtr *f1, PcbPtr *f2, PcbPtr *f3, PcbPtr a) {
    int pri = a->priority;
    if (pri == 3)
        enqPcb(f3, a);
    else if(pri == 2)
        enqPcb(f2, a);
    else 
        enqPcb(f1, a);
    return;
}

PcbPtr headi;
PcbPtr headf1; //priority 1
PcbPtr headf2; //priority 2
PcbPtr headf3; //priority 3
...
priEnq(&headf1, &headf2, &headf3, headi); 
```

通过传递队列指针的地址，您可以`priEnq`修改指针，而不仅仅是其自己的副本。

此外，正如 sarnold 所提到的，您可能需要考虑队列指针数组以提高可读性和可维护性。

# google-maps - 将“搜索”按钮添加到 Google Maps Store 实用程序库

> ID：10924596
> 
> 赞同：0
> 
> 时间：2012-06-07T01:41:44.747
> 
> 标签：google-maps, google-maps-api-3

我目前正在使用 Google 的新地图 API 商店定位器库 (http://storelocator.googlecode.com/git/index.html) 组合商店定位器。

我想在搜索输入字段旁边添加一个“搜索”按钮，这样人们就可以选择点击返回或点击按钮开始搜索。

我尝试编辑 store-locator.compiled.js 文件但不断破坏代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T01:56:34.427

我尝试使用 Chrome 的开发工具来检查您的代码，但似乎它已经被缩小了，所以我没有费心解决问题。相反，我会建议一种解决方法，这可能会解决您的问题。

考虑使用 jquery 的触发事件来触发“keydown”（请参阅[​​ Definitive way to trigger keypress events with jQuery](https://stackoverflow.com/questions/832059/definitive-way-to-trigger-keypress-events-with-jquery)中的最佳答案）。现在我已经稍微调整了代码以执行您想要的操作。

在 HTML 标记中，您将拥有输入字段以及按钮：

```
<input type="text" name="blah" />
<button id="clickme" type="button">Click Me</button> 
```

在 Javscript 中，为按钮添加一个单击事件，该事件具有触发“返回键”的 keydown 按下的功能 - 如下所示：

```
$("#clickme").click(function(){
    var e = jQuery.Event("keydown");
    e.which = 13; // # Some key code value
    $("input").focus(); //to ensure that the input field is in focus
    $("input").trigger(e);
}); 
```

应该这样做，按钮应该复制输入字段上返回键的按键按下 - 因此您不必担心修改代码中的任何当前功能。

顺便说一句，使用此链接获取“返回键”的字符代码 - 它具有其他字符的完整代码列表[http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-代码](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes)

# php - htaccess / mod_rewrite 停止工作 - 忽略重写规则

> ID：10924599
> 
> 赞同：1
> 
> 时间：2012-06-07T01:41:58.987
> 
> 标签：php, apache, .htaccess, mod-rewrite, url-rewriting

我有一个为客户编写和维护的网站。我目前在 1&1 上托管它。该网站在 3-4 周前运行良好。在那个时间范围内没有对其进行任何更改，客户只是注意到重定向不再起作用。

该站点已设置为将所有 url 重定向到 view.php 文件，然后使用 php include 语句将正确的页面加载到网站模板中。

有三个主要的测试用例：

1.  `http://www.hazardcontrol.com/factsheets/workplace/industrial-safety` 应该重定向到：`/view.php?fs=workplace&p=industrial-safety`

2.  `http://www.hazardcontrol.com/library/topical-index` 应该重定向到：`/view.php?f=library&p=topical-index`

3.  `http://www.hazardcontrol.com/factsheets/pdfs/workplace-safety-programming.pdf`不应该重定向

当它第一次崩溃时（加载了 view.php 页面，但找不到要包含的正确内容页面），我在 view.php 文件中使用了一个 php echo 语句来找出正在传递的 GET 变量是什么。无论尝试什么 url，它们始终是 f=reset: 和 p=view。

我尝试编辑 htaccess 文件来更新它，并确保一切都是干净、简单和正确的。现在，案例 1 工作正常。案例 2 在 5 分钟前工作，但现在不行 - 它试图重定向到视图页面。案例 3 直接进入实际保存内容的“/library/topical-index.php”页面，而不是重定向到 view.php 页面，以便在模板中加载。两个 htaccess 文件都在下面。

提前感谢您提供的任何帮助！

**原始 htaccess 文件**

（这是有效的。我确实尝试调用 1&1，但他们向我保证，除了一个多月前更新 Apache 之外，他们没有做任何事情，但那是在我的网站崩溃之前，所以它必须是我的脚本）。

注意：最后 8 个重写规则是相关的。

```
RewriteEngine on
RewriteBase /

#Exceptions to rewrite rules
RewriteRule ^(phaseout)($|/) - [L]

#Control user navigation quirks (like just deleting parts of the link)
redirect 301 /index.htm http://www.hazardcontrol.com
redirect 301 /default.htm http://www.hazardcontrol.com
redirect 301 /default.html http://www.hazardcontrol.com

RewriteCond %{HTTP_HOST} !^www\.hazardcontrol\.com
RewriteRule (.*) http://www.hazardcontrol.com/$1 [R=301,L]

RewriteCond %{THE_REQUEST} ^.*/index\.html
RewriteRule ^(.*)index.html$ http://www.hazardcontrol.com/$1 [R=301,L]

#Ensure the website is always addressed as www.hazardcontrol.com
RewriteCond %{HTTP_HOST} ^hazardcontrol\.com$ [NC]
RewriteRule ^(.*)$ http://www.hazardcontrol.com/$1 [R=301,L]

ErrorDocument 404 /sitemanagement/404
ErrorDocument 403 /sitemanagement/403

redirect 301 /coreprinciples.html http://www.hazardcontrol.com/factsheets/principles/core-principles
redirect 301 /emailus.html http://www.hazardcontrol.com/about/contact-us
redirect 301 /agricultural.html http://www.hazardcontrol.com/factsheets/workplace/agricultural-safety
redirect 301 /BuildingCode.html http://www.hazardcontrol.com
redirect 301 /construction.html http://www.hazardcontrol.com/factsheets/workplace/construction-safety
redirect 301 /consultants.html http://www.hazardcontrol.com/about/about
redirect 301 /copyright.html http://www.hazardcontrol.com/copyright/copyright
redirect 301 /craneandhoist.html http://www.hazardcontrol.com/factsheets/workplace/construction-safety
redirect 301 /fallprevention.html http://www.hazardcontrol.com/factsheets/falls/design-of-fall-protection-systems
redirect 301 /gnelson.html http://www.hazardcontrol.com/about/bio
redirect 301 /humanfactors.html http://www.hazardcontrol.com/factsheets/humanfactors/human-factors-and-ergonomics
redirect 301 /index.htm http://www.hazardcontrol.com
redirect 301 /jenglish.html http://www.hazardcontrol.com/about/about
redirect 301 /jobs.html http://www.hazardcontrol.com
redirect 301 /lifting.html http://www.hazardcontrol.com/factsheets/ml-mh/landmark-manual-lifting-standards
redirect 301 /links.html http://www.hazardcontrol.com
redirect 301 /machineguarding.html http://www.hazardcontrol.com/factsheets/machineguarding/history-of-machine-guarding
redirect 301 /marine.html http://www.hazardcontrol.com/factsheets/workplace/marine-offshore-safety
redirect 301 /missing.html http://www.hazardcontrol.com
redirect 301 /ml-design.html http://www.hazardcontrol.com/factsheets/ml-mh/NIOSH-guidelines-and-revised-formula
redirect 301 /ml-historical http://www.hazardcontrol.com/factsheets/ml-mh/evolution-of-manual-lifting-standards
redirect 301 /ml-niosh81.html http://www.hazardcontrol.com/factsheets/ml-mh/NIOSH-guidelines-and-revised-formula
redirect 301 /ml-niosh93.html http://www.hazardcontrol.com/factsheets/ml-mh/NIOSH-guidelines-and-revised-formula
redirect 301 /ml-training.html http://www.hazardcontrol.com/main_page.php?folder=fs_workplace_safety&page=workplace_safety_training
redirect 301 /oilfield.html http://www.hazardcontrol.com/factsheets/workplace/construction_safety
redirect 301 /premises.html http://www.hazardcontrol.com/factsheets/premises/five-types-of-same-level-falls
redirect 301 /product.html http://www.hazardcontrol.com/factsheets/product/basic-elements-of-product-safety-programming
redirect 301 /rampfalls.html http://www.hazardcontrol.com/factsheets/premises/ramp-design-analysis
redirect 301 /slipandfall.html http://www.hazardcontrol.com/factsheets/falls/design-of-fall-protection-systems
redirect 301 /sliptrip.html http://www.hazardcontrol.com/factsheets/premises/five-types-of-same-level-falls
redirect 301 /stairramp.html http://www.hazardcontrol.com/factsheets/premises/design-of-fall-protection-systems
redirect 301 /stairwayfalls.html http://www.hazardcontrol.com/factsheets/premises/stairway-design-analysis
redirect 301 /trial.html http://www.hazardcontrol.com
redirect 301 /tripandfall.html http://www.hazardcontrol.com/factsheets/premises/five-types-of-same-level-falls
redirect 301 /vehiclefalls.html http://www.hazardcontrol.com/factsheets/falls/access-to-vehicles
redirect 301 /workplace.html http://www.hazardcontrol.com/factsheets/workplace/industrial-safety

#Rewrite dynamic URIs as static/flat URIs for user ease and search engine happiness
RewriteRule ^factsheets/([^/\.]+)/([^/.]+)$ view.php?fs=$1&p=$2 [L]
RewriteRule ^factsheets/([^/.]+)/([^/.]+).php$ view.php?fs=$1&p=$2 [L]
RewriteRule ^factsheets/([^/.]+)/([^/.]+).htm$ view.php?fs=$1&p=$2 [L]
RewriteRule ^factsheets/([^/.]+)/([^/.]+).html$ view.php?fs=$1&p=$2 [L]

RewriteRule ^([^/.]+)/([^/.]+)$ view.php?f=$1&p=$2 [L]
RewriteRule ^([^/.]+)/([^/.]+).php$ view.php?f=$1&p=$2 [L]
RewriteRule ^([^/.]+)/([^/.]+).htm$ view.php?f=$1&p=$2 [L]
RewriteRule ^([^/.]+)/([^/.]+).html$ view.php?f=$1&p=$2 [L] 
```

**新建 htaccess 文件**

注意：最后 3 个重写规则是相关的。

```
RewriteEngine on
RewriteBase /

#Exceptions to rewrite rules
RewriteRule ^(phaseout)($|/) - [L]

#Control user navigation quirks (like just deleting parts of the link)
redirect 301 /index.htm http://www.hazardcontrol.com
redirect 301 /default.htm http://www.hazardcontrol.com
redirect 301 /default.html http://www.hazardcontrol.com

# -> Prevent users from accessing another domain name
RewriteCond %{HTTP_HOST} !^www\.hazardcontrol\.com
RewriteRule (.*) http://www.hazardcontrol.com/$1 [R=301,N]

# -> Prevent users from trying to access the 'index page' of a folder or section
RewriteCond %{THE_REQUEST} ^.*/index\.html
RewriteRule ^(.*)index.html$ http://www.hazardcontrol.com/$1 [R=301,N]

# -> Ensure the website is always addressed as www.hazardcontrol.com
RewriteCond %{HTTP_HOST} ^hazardcontrol\.com$ [NC]
RewriteRule ^(.*)$ http://www.hazardcontrol.com/$1 [R=301,N]

#Custom error docs
ErrorDocument 404 /sitemanagement/404
ErrorDocument 403 /sitemanagement/403

#Maintain legacy search engine page ranks by redirecting them to our new pages
redirect 301 /coreprinciples.html http://www.hazardcontrol.com/factsheets/principles/core-principles
redirect 301 /emailus.html http://www.hazardcontrol.com/about/contact-us
redirect 301 /agricultural.html http://www.hazardcontrol.com/factsheets/workplace/agricultural-safety
redirect 301 /BuildingCode.html http://www.hazardcontrol.com
redirect 301 /construction.html http://www.hazardcontrol.com/factsheets/workplace/construction-safety
redirect 301 /consultants.html http://www.hazardcontrol.com/about/about
redirect 301 /copyright.html http://www.hazardcontrol.com/copyright/copyright
redirect 301 /craneandhoist.html http://www.hazardcontrol.com/factsheets/workplace/construction-safety
redirect 301 /fallprevention.html http://www.hazardcontrol.com/factsheets/falls/design-of-fall-protection-systems
redirect 301 /gnelson.html http://www.hazardcontrol.com/about/bio
redirect 301 /humanfactors.html http://www.hazardcontrol.com/factsheets/humanfactors/human-factors-and-ergonomics
redirect 301 /index.htm http://www.hazardcontrol.com
redirect 301 /jenglish.html http://www.hazardcontrol.com/about/about
redirect 301 /jobs.html http://www.hazardcontrol.com
redirect 301 /lifting.html http://www.hazardcontrol.com/factsheets/ml-mh/landmark-manual-lifting-standards
redirect 301 /links.html http://www.hazardcontrol.com
redirect 301 /machineguarding.html http://www.hazardcontrol.com/factsheets/machineguarding/history-of-machine-guarding
redirect 301 /marine.html http://www.hazardcontrol.com/factsheets/workplace/marine-offshore-safety
redirect 301 /missing.html http://www.hazardcontrol.com
redirect 301 /ml-design.html http://www.hazardcontrol.com/factsheets/ml-mh/NIOSH-guidelines-and-revised-formula
redirect 301 /ml-historical http://www.hazardcontrol.com/factsheets/ml-mh/evolution-of-manual-lifting-standards
redirect 301 /ml-niosh81.html http://www.hazardcontrol.com/factsheets/ml-mh/NIOSH-guidelines-and-revised-formula
redirect 301 /ml-niosh93.html http://www.hazardcontrol.com/factsheets/ml-mh/NIOSH-guidelines-and-revised-formula
redirect 301 /ml-training.html http://www.hazardcontrol.com/main_page.php?folder=fs_workplace_safety&page=workplace_safety_training
redirect 301 /oilfield.html http://www.hazardcontrol.com/factsheets/workplace/construction_safety
redirect 301 /premises.html http://www.hazardcontrol.com/factsheets/premises/five-types-of-same-level-falls
redirect 301 /product.html http://www.hazardcontrol.com/factsheets/product/basic-elements-of-product-safety-programming
redirect 301 /rampfalls.html http://www.hazardcontrol.com/factsheets/premises/ramp-design-analysis
redirect 301 /slipandfall.html http://www.hazardcontrol.com/factsheets/falls/design-of-fall-protection-systems
redirect 301 /sliptrip.html http://www.hazardcontrol.com/factsheets/premises/five-types-of-same-level-falls
redirect 301 /stairramp.html http://www.hazardcontrol.com/factsheets/premises/design-of-fall-protection-systems
redirect 301 /stairwayfalls.html http://www.hazardcontrol.com/factsheets/premises/stairway-design-analysis
redirect 301 /trial.html http://www.hazardcontrol.com
redirect 301 /tripandfall.html http://www.hazardcontrol.com/factsheets/premises/five-types-of-same-level-falls
redirect 301 /vehiclefalls.html http://www.hazardcontrol.com/factsheets/falls/access-to-vehicles
redirect 301 /workplace.html http://www.hazardcontrol.com/factsheets/workplace/industrial-safety

#Rewrite dynamic URIs as static/flat URIs for user ease and search engine happiness
RewriteRule ^(\.pdf)$ - [L]
RewriteRule ^factsheets/([^/\.]+)/([^/\.]+)(.*)$ view.php?fs=$1&p=$2 [L]
RewriteRule ^([^/\.]+)/([^/\.]+)(.*)$ view.php?f=$1&p=$2 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T01:59:03.227

为了让所有三个案例都能正常工作，我改变了

```
RewriteRule ^(\.pdf)$ - [L] 
```

至

```
RewriteRule ^(.*\.pdf)$ $1 [L] 
```

并且 PDF 没有重定向。这有效，因为正则表达式`^(.*\.pdf)$`匹配`factsheets/pdfs/workplace-safety-programming.pdf`.

为了排除故障，我使用[了 http://htaccess.madewithlove.be/](http://htaccess.madewithlove.be/)。

# ruby-on-rails - 如何在 Ruby on Rails 中制作多语言词典？

> ID：10924600
> 
> 赞同：0
> 
> 时间：2012-06-07T01:42:02.147
> 
> 标签：ruby-on-rails, ruby

是否有可用的宝石来帮助完成这项任务？从头开始制作多语种词典我需要了解哪些基础知识？网络上基于 ruby​​ 的网络词典有哪些示例？谢谢！

# ruby-on-rails - thinking_sphinx 错误：索引列号 1 没有名称

> ID：10924604
> 
> 赞同：0
> 
> 时间：2012-06-07T01:42:49.427
> 
> 标签：ruby-on-rails, ruby-on-rails-3, full-text-search, sphinx, thinking-sphinx

我已按照 RailsCast #120 为 Rails 3 应用程序设置 Sphinx 和 thinking_sphinx。但是，我正在使用 Windows。我的模型中的索引定义如下所示：

```
define_index do
indexes miniresume, :as => :miniresume
indexes categories.categoryname, :as => :category_name
end 
```

但是，当我尝试运行 rake:ts --trace 时，我收到关于第 1 列没有任何名称的错误。任何帮助表示赞赏。

```
$ rake ts:index --trace
** Invoke ts:index (first_time)
** Invoke thinking_sphinx:index (first_time)
** Invoke thinking_sphinx:app_env (first_time)
** Execute thinking_sphinx:app_env
** Execute thinking_sphinx:index
Generating Configuration to C:/rails32/pa02/config/development.sphinx.conf
Sphinx 2.0.4-release (r3135)
Copyright (c) 2001-2012, Andrew Aksyonoff
Copyright (c) 2008-2012, Sphinx Technologies Inc (http://sphinxsearch.com)

using config file 'C:/rails32/pa02/config/development.sphinx.conf'...
indexing index 'post_core'...
ERROR: index 'post_core': column number 1 has no name.
total 0 docs, 0 bytes
total 0.083 sec, 0 bytes/sec, 0.00 docs/sec
skipping non-plain index 'post'...
total 0 reads, 0.000 sec, 0.0 kb/call avg, 0.0 msec/call avg
total 0 writes, 0.000 sec, 0.0 kb/call avg, 0.0 msec/call avg
** Execute ts:index 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T00:15:16.500

切换到 64 位版本的 Sphinx 为我解决了这个问题。我也使用了 64 位 MySQL，我不知道你的情况是否如此。

# c# - 检测 Excel 工作簿链接

> ID：10924606
> 
> 赞同：2
> 
> 时间：2012-06-07T01:43:32.053
> 
> 标签：c#, hyperlink, excel

[http://www.linkfixerplus.com](http://www.linkfixerplus.com)有一个产品来检查工作簿链接并修复它们，但它很昂贵，我被要求编写一个只检查交叉引用（工作簿链接）而不担心它们是否损坏的产品.

这是到目前为止我编写的基本代码（在这个阶段更像是伪代码 - 目标是 .Net 2 所以忘记 LINQ）：

```
public class LinkInfo
{
    public string SheetName { get; set; }
    public string Cell { get; set; }
    public string CellValue { get; set; }
}

private bool ExcelFileHasLinks(string path,ref List<LinkInfo> linkInfoList)
{
    bool hasLinks = false;
    Workbook wb = null;
    try
    {
        wb = excel.Workbooks.Open(path);
            foreach (object possibleSheet in excel.Sheets)
            {
                var aSheet = possibleSheet as Worksheet;
                if (aSheet != null)
                {
                        //Get the values in the sheet
                        Range rng = aSheet.UsedRange;
                        object[,] values = null;
                        try
                        {
                            if (rng.Value2.GetType().IsArray)
                            {
                                values = (object[,])rng.FormulaArray;

                            }
                            else
                            {
                                values = new object[2, 2];
                                values[1, 1] = rng.FormulaArray;
                            }
                        }
                        catch
                        { }

                    if (values != null)
                    {
                        for (int row = 1; row <= values.GetUpperBound(0); row++)
                        {
                            for (int col = 1; col <= values.GetUpperBound(1); col++)
                            {
                                if (values[row, col] != null)
                                {
                                    //Check if this iis a link to another workbook
                                    string cellFormula = values[row, col].ToString().Trim();
                                    if (cellFormula.StartsWith("=") && cellFormula.Contains("!") && cellFormula.Contains("[") && cellFormula.Contains("]"))
                                    {
                                        hasLinks = true;
                                        linkInfoList.Add(new LinkInfo() { SheetName = aSheet.Name, Cell = ColumnNumberToName(col) + row, CellValue = cellFormula });
                                    }
                                }
                            }
                        }
                    }
                }
            }
    }
    catch (Exception)
    {
    }
    finally
    {
        if (wb != null) wb.Close();
    }

    return hasLinks;
} 
```

**当 XLS 文件具有以这种方式表示的其他工作簿的链接时，这非常有效：**

=[a.xlsx]Sheet1!$A$1

我的问题是 SAN 中确实有数十万个电子表格，由于敏感，我不允许查看它们！所以我进行了测试，看看是否有各种语法可以做到这一点，我发现了这个：

=Excel.Sheet.12|'C:\Temp\a.xlsx'!'!Sheet2!R6C3'

还有这个：

=EMBED("Excel.Sheet.12","")

检测公式的代码行不适用于上述两个：

```
if (cellFormula.StartsWith("=") && cellFormula.Contains("!") && cellFormula.Contains("[") && cellFormula.Contains("]")) 
```

**我的问题是还有更多我不知道的语法，任何人都可以推荐优雅的代码来检测工作簿链接的所有变体吗？**

我发现可以做到的另一种产品是[http://www.2haveit.com/listdetail.php?id=90005](http://www.2haveit.com/listdetail.php?id=90005)它是一个 Excel 插件，所以它一次只能在一个电子表格上工作 - 但他们仍然必须有正如我正在尝试做的那样，覆盖了那里的基地。

编辑：我需要这个作为一个 winform 应用程序而不是 Excel 加载项

我发现对象模型中有一个方法： [Workbook.LinkSources Method](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.excel.workbook.linksources(v=vs.80).aspx)但是它也无法检测到此链接：

=Excel.Sheet.12|'C:\Temp\a.xlsx'!'!Sheet2!R6C3'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T02:12:06.203

我找到了对象模型方式：[Workbook.LinkSources Method](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.excel.workbook.linksources(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T02:39:53.793

按照要求：

我的[地图！插件](http://sdrv.ms/18pQI6C)检测并突出显示工作簿链接

另外，我是 Bill Manville 的[FindLink 工具的忠实粉丝](http://www.bmsltd.co.uk/MVP/Default.htm)

# powershell - 在 C# 中开发 PowerShell Cmdlet：放置“主代码”的位置

> ID：10924608
> 
> 赞同：2
> 
> 时间：2012-06-07T01:43:36.113
> 
> 标签：powershell, powershell-2.0

假设您想创建一个 PowerShell Cmdlet，以获取当前目录中的所有文件并将它们的名称打印到控制台。假设应该执行所有这些操作的类继承自 PSCmdlet，您会将逻辑放入 ProcessRecord 还是 EndProcessing？我一直在寻找的[教程将主要代码放在 EndProcess 中。](http://joymonscode.blogspot.com.au/2010/10/c-to-write-custom-windows-powershell.html)我很想知道将代码放在 ProcessRecord 中是否会改变任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T05:26:41.900

这里总结一下方法：

```
BeginProcessing = Provides a one-time, preprocessing functionality for the cmdlet.
EndProcessing   = Provides a one-time, post-processing functionality for the cmdlet.
ProcessRecord   = Provides a record-by-record processing functionality for the cmdlet. 
```

在您的链接的情况下，`cmdlet`逻辑在`EndProcessing`方法中，因为正在执行一次性操作。将逻辑移入`ProcessRecord()`不要更改结果，但逻辑上不正确。

阅读[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ms714463%28v=vs.85%29.aspx)了解更多信息。

# facebook-c#-sdk - 如何增加请求超时？

> ID：10924610
> 
> 赞同：1
> 
> 时间：2012-06-07T01:43:43.597
> 
> 标签：facebook-c#-sdk

如何增加 Get 或 GetTaskAsync 的 TimeOut？（使用 Facebook C# SDK 6）

似乎他们的超时时间为 15 秒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T12:25:05.903

使用 FacebookClient.HttpWebRequestFactory。由于它对智能感知隐藏，因此您可能在 VS 中看不到它，具体取决于您的设置。

```
 /// <summary>
    /// Http web request factory.
    /// </summary>
    [EditorBrowsable(EditorBrowsableState.Never)]
    public virtual Func<Uri, HttpWebRequestWrapper> HttpWebRequestFactory
    {
        get; set;
    } 
```

你可能想做这样的事情。

```
FacebookClient.HttpWebRequestFactory = url => {
  var request = new HttpWebRequestWrapper((HttpWebRequest)WebRequest.Create(url));
  request.Timeout = .....;
  return request;
}; 
```

这至少需要 v6。

对于 v5，您需要覆盖受保护的方法。

```
 /// <summary>
    /// Creates the http web request.
    /// </summary>
    /// <param name="url">The url of the http web request.</param>
    /// <returns>The http helper.</returns>
    [System.ComponentModel.EditorBrowsable(System.ComponentModel.EditorBrowsableState.Never)]
    protected virtual HttpWebRequestWrapper CreateHttpWebRequest(Uri url); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-24T20:55:46.000

对于`GetTaskAsync`版本，您需要传递取消令牌。请求中设置的`Timeout`值不受支持。

```
var cancellationSource = new CancellationTokenSource(TimeSpan.FromSeconds(2));
await client.GetTaskAsync<T>(path, parameters, cancellationSource.Token); 
```

# jquery - 唯一标识点击并执行一次

> ID：10924612
> 
> 赞同：0
> 
> 时间：2012-06-07T01:43:56.270
> 
> 标签：jquery

```
<div id = uni1>
        <input type=button class=click rel="1">
</div>
<div id = uni2>
        <input type=button class=click rel="2">
</div>
<div id = uni3>
        <input type=button class=click rel="3">
</div>
<div id = uni4>
        <input type=button class=click rel="4">
</div>

$(".click").click(function()
{
    alert("Help");
}) 
```

我在识别 jquery 的单击按钮时遇到问题，这将提示警报 4 次。“#uni1 .click”将允许我识别但我不能静态定义它。意思是我只能使用.click。因为我的 uni1 <-- 是动态的，所以我最多可以拥有 uni100。或 Uni10000（这是拥有 uni 数量的用户选择）

我的问题是我将如何为每种输入类型唯一地识别每个按钮。单击按钮后，我可以使用

```
$(".click").click(function()
{
    $(this).parent().attr('id');
//it doesn't solve the problem that alert will still be executed 4 times. i want to have click being uniquely identify upon user click.
    alert("Help");
})

<div id=uni>
    <div id = uni1>
            <input type=button class=click rel="1">
    </div>
    <div id = uni2>
            <input type=button class=click rel="2">
    </div>
    <div id = uni3>
            <input type=button class=click rel="3">
    </div>
    <div id = uni4>
            <input type=button class=click rel="4">
    </div>
</div>

$("#uni"+i).load(abc.html,function(){ $(".click").click(funcion(){ alert("help");})}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T01:51:34.300

我试过你的例子，它对我来说很好。[http://jsfiddle.net/3yQ4W/](http://jsfiddle.net/3yQ4W/)

如果它被提示 4 次，要么是因为你已经声明了 4 次，要么是因为你有一些奇怪的循环，你没有向我们展示。

编辑：

```
$("body").on('click','.click',function(){
   alert($(this).parent().attr('id'));

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T02:15:45.993

我认为您可能需要使用闭包。Javascript 可以是这样的：

```
(function(){
  var inputs = $(".click");

  for(var i = 0; i < inputs.length; i++){
    inputs[i].onclick = (function(n){
                           return function(){
                                   alert(n)
                                  }
                         })(i)    
  }

})() 
```

所以每个链接都有自己的 onclick 事件。单击一个将提醒其输入数组的索引。您也可以查看 jsfiddle：http:　[//jsfiddle.net/zhujy_8833/YWr7z/](http://jsfiddle.net/zhujy_8833/YWr7z/)

# facebook - fb:comments-count 标签在 FF 中不起作用

> ID：10924613
> 
> 赞同：0
> 
> 时间：2012-06-07T01:44:12.427
> 
> 标签：facebook, firefox, tags, count, comments

任何人都可以在 Firefox 上测试 fb:comments-count 标签吗？它在这里不起作用，直到今天都运行良好，我检查了 IE 和 Chrome，一切都很好。

即使在[http://developers.facebook.com/docs/reference/plugins/comments/](http://developers.facebook.com/docs/reference/plugins/comments/)它也无法正常工作，它显示：

**将发出：很棒的评论**

而不是： **将发出：X 很棒的评论**

（X = url 中的评论数）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T02:57:20.697

它适用于 Mac+Firefox。
不过，我今天早上刚刚升级了我的 Firefox。 ![Firefox 上的 fb:comments-count 标签](../Images/bd5bc7c414cde2b11e6ca30de109200f.png)

# python - 为 django 中的字段设置数据库级别默认值？

> ID：10924619
> 
> 赞同：2
> 
> 时间：2012-06-07T01:45:24.647
> 
> 标签：python, django

您使用什么方法在 django 中设置数据库级别的默认值？

我知道这是一个 django 的`wontfix`决定，但是如果为特定的后端（postgres）编写的话，必须有一些关于实现这一点的方法的想法。

我想通过 python 来驱动它，所以我不想使用`/sql/.sql`文件。

我在想我可以在现有字段上设置属性，例如：

```
foo = models.CharField(max_length=256, blank=True)
foo.db_default = '' 
```

然后过滤字段并构造`ALTER COLUMN SET DEFAULT`查询。

我会把它放在哪里呢？文档说不要更改`post_syncdb`挂钩中的数据库。

任何想法把这个动作放在哪里？我也在想我可以`sql/.sql`动态生成文件。一个管理命令总比没有好。自动的会很棒。嗯不知道`post_syncdb`能不能及时生成sql文件来执行？会测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T03:18:17.583

我尝试过，`post_syncdb`但使用 .sql 文件为时已晚。挂钩`class_prepared`及时解决了，`syncdb`但我意识到我把事情复杂化了。我不妨在模型实例化时运行一些代码。

当我需要再次摆弄这个时，我最终得到了一个可以在 6 个月内轻松理解的直截了当的解决方案。

```
def db_default(field, db_default):
    """
    Set attribute __db_default for signal to set default values with.
    """
    field.__db_default = db_default
    return field

class OrderShipLog(models.Model):
    date = db_default(models.DateTimeField(), 'now()')

def generate_default_sql(model):
    """
    Generate SQL for postgresql_psycopg2 default values because the shipping
    database post doesn't guarantee posting certain fields but id like them all to be strings.
    """
    db_fields = filter(lambda x: hasattr(x, '__db_default'), model._meta.fields)
    db_table = model._meta.db_table
    modelname = model._meta.object_name

    sql_dir = os.path.join(os.path.dirname(__file__), 'sql/')
    sql_filename = os.path.join(sql_dir, '{modelname}.postgresql_psycopg2.sql'.format(
        modelname=modelname.lower()))

    from django.db import connection
    if not db_table in connection.introspection.table_names():
        print >> sys.stderr, "{0} not in introspected table list; creating db default sql file : {1}".format(db_table, sql_filename)
        try:
            if not os.path.exists(sql_dir):
                os.makedirs(sql_dir)

            with open(sql_filename, 'w+') as f:
                for field in db_fields:
                    attname, db_column = field.get_attname_column()
                    if not field.__db_default:
                        raise Exception("Must enter value for field {modelname}.{field}.__db_default".format(
                            modelname=modelname,
                            field=attname))
                    f.write('ALTER TABLE {db_table} ALTER COLUMN {db_column} SET DEFAULT {default};\n'.format(
                        db_table=db_table,
                        db_column=db_column,
                        default=field.__db_default,
                        ))
        except Exception, e:
            print >> sys.stderr, "Could not generate SQL file. Manually set the defaults! {0}\n".format(e) * 10

generate_default_sql(OrderShipLog) 
```

# backbone.js - 我可以优化一组 JS（组合成一个）并且仍然使用 requireJS 动态加载某些模块吗？

> ID：10924623
> 
> 赞同：0
> 
> 时间：2012-06-07T01:46:09.390
> 
> 标签：backbone.js, requirejs

我希望通过 RequireJS 2+ 的 shim 加载 jquery、jqueryUI、下划线和主干以及非 AMD jquery 插件，然后为特定视图动态加载 JS。

因此，与其将所有内容组合为 1 个大 JS 文件，我可以...

*   有选择地将某些东西组合为 1 个大 JS
*   作为另一个大 JS 的其他东西（对于另一个复杂的视图），以及
*   留下其他未组合的东西（对于某些小部件）（可能只压缩）？

这可能吗？ps 我什么时候应该考虑使用[杏仁](https://github.com/jrburke/almond)？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:24:35.903

如果您在优化项目时[使用构建文件](http://requirejs.org/docs/optimization.html)，那么您可以准确指定需要处理的模块。

[`modules`构建文件](https://github.com/jrburke/r.js/blob/master/build/example.build.js#L237)的部分将是最好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T04:59:26.810

简短的回答：是的。

更长：

你基本上可以以任何你想要的方式包含你想要的任何东西。您可能面临的唯一问题是 AMD 加载的库的范围在定义“处理程序”函数中是本地的。至少据我所知。

所以我认为是这样的：

```
define([somefile], function(something){ something == 'stuff from somefile.js'; });
somefile == undefined 
```

你可以做的是：

```
<script etc..."backbone.js"</script>
define([somefile], function(something){ 
    window.something == 'stuff from somefile.js';
    Backone is defined. 
});
window.somefile == 'stuff from somefile.js'; 
```

所以这是可能的，但是您必须将定义代码中的变量设置为全局变量，例如 window.etc。

而且我认为您可以在高性能情况下使用杏仁。至少根据他们的网站。不过，您可以在 jsperf.om 上编写一些测试代码。

# javascript - 用 IndexedDB 解释如何在这段 JavaScript 代码中使用生成器？

> ID：10924624
> 
> 赞同：7
> 
> 时间：2012-06-07T01:46:21.473
> 
> 标签：javascript, generator, indexeddb, javascript-1.8

在探索 IndexedDB 的美妙世界时，我从 Mozilla 的测试套件中遇到了[这样的代码：](http://hg.mozilla.org/mozilla-central/file/895e12563245/dom/indexedDB/test/unit/test_objectStore_remove_values.js)

```
/**
 * Any copyright is dedicated to the Public Domain.
 * http://creativecommons.org/publicdomain/zero/1.0/
 */

var testGenerator = testSteps();

function testSteps()
{
  const IDBObjectStore = Components.interfaces.nsIIDBObjectStore;
  const name = this.window ? window.location.pathname : "Splendid Test";
  const description = "My Test Database";

  var data = [
    { name: "inline key; key generator",
      autoIncrement: true,
      storedObject: {name: "Lincoln"},
      keyName: "id",
      keyValue: undefined,
    },
    { name: "inline key; no key generator",
      autoIncrement: false,
      storedObject: {id: 1, name: "Lincoln"},
      keyName: "id",
      keyValue: undefined,
    },
    { name: "out of line key; key generator",
      autoIncrement: true,
      storedObject: {name: "Lincoln"},
      keyName: undefined,
      keyValue: undefined,
    },
    { name: "out of line key; no key generator",
      autoIncrement: false,
      storedObject: {name: "Lincoln"},
      keyName: null,
      keyValue: 1,
    }
  ];

  for (let i = 0; i < data.length; i++) {
    let test = data[i];

    let request = mozIndexedDB.open(name, i+1, description);
    request.onerror = errorHandler;
    request.onupgradeneeded = grabEventAndContinueHandler;
    let event = yield;

    let db = event.target.result;

    let objectStore = db.createObjectStore(test.name,
                                           { keyPath: test.keyName,
                                             autoIncrement: test.autoIncrement });

    request = objectStore.add(test.storedObject, test.keyValue);
    request.onerror = errorHandler;
    request.onsuccess = grabEventAndContinueHandler;
    event = yield;

    let id = event.target.result;
    request = objectStore.get(id);
    request.onerror = errorHandler;
    request.onsuccess = grabEventAndContinueHandler;
    event = yield;

    // Sanity check!
    is(test.storedObject.name, event.target.result.name,
                  "The correct object was stored.");

    request = objectStore.delete(id);
    request.onerror = errorHandler;
    request.onsuccess = grabEventAndContinueHandler;
    event = yield;

    // Make sure it was removed.
    request = objectStore.get(id);
    request.onerror = errorHandler;
    request.onsuccess = grabEventAndContinueHandler;
    event = yield;

    ok(event.target.result === undefined, "Object was deleted");
    db.close();
  }

  finishTest();
  yield;
} 
```

他们的其他测试以类似的风格编写，与您在 IndexedDB 中看到的典型的“末日金字塔”风格相反，因为异步回调被堆叠在一起（当然，生成器在 Firefox 之外没有得到广泛支持......）。

因此，来自 Mozilla 的这段代码对我来说有点吸引力和吸引力，因为它看起来非常干净，但我不完全确定`yield`在这种情况下做了什么。谁能帮我理解这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T05:33:12.583

这是一段出色的代码，它利用了 Firefox 公开的 JavaScript 1.7 的强大新功能，并且由于 IndexedDB 仅受 Firefox 和 Chrome 支持，我认为这是一个很好的折衷方案。

代码的第一行从函数创建一个生成器`testSteps`并将其分配给变量`testGenerator`。我们使用生成器的原因是因为 IndexedDB 是一个纯粹的异步 API；异步编程和嵌套回调是一种痛苦。使用生成器可以让您编写看起来是同步的异步代码，从而减轻这种痛苦。

**注意：**如果您想知道如何利用生成器的强大功能使异步代码同步，请阅读[以下文章](http://tobyho.com/2010/12/10/trampolines-in-javascript-and/ "Javascript 中的 Trampolines 和对更少嵌套回调的探索")。

为了解释生成器如何使异步编程变得可以忍受，请考虑以下代码：

```
var name = "Test";
var version = 1.0;
var description = "Test database.";

var request = mozIndexedDB.open(name, version, description);

request.onupgradeneeded = function (event) {
    var db = event.target.result;

    var objectStore = db.createObjectStore("Thing", {
        keyPath: "id",
        autoIncrement: true
    });

    var object = {
        attributeA: 1,
        attributeB: 2,
        attributeC: 3            
    };

    var request = objectStore.add(object, "uniqueID");

    request.onsuccess = function (event) {
        var id = event.target.result;
        if (id === "uniqueID") alert("Object stored.");
        db.close();
    };
}; 
```

在上面的代码中，我们请求了一个名为`Test`. 我们要求提供数据库版本`1.0`。由于它不存在，因此`onupgradeneeded`事件处理程序被触发。获得数据库后，我们在其上创建了一个对象存储，将一个对象添加到对象存储，保存后我们关闭了数据库。

上面代码的问题是我们正在异步请求数据库并执行与它相关的其他操作。随着越来越多的嵌套回调被使用，这可能会使代码很难维护。

为了解决这个问题，我们使用如下生成器：

```
var gen = (function (name, version, description) {
    var request = mozIndexedDB.open(name, version, description);

    request.onupgradeneeded = grabEventAndContinueHandler;

    var event = yield;

    var db = event.target.result;

    var objectStore = db.createObjectStore("Thing", {
        keyPath: "id",
        autoIncrement: true
    });

    var object = {
        attributeA: 1,
        attributeB: 2,
        attributeC: 3
    };

    request = objectStore.add(object, "uniqueID");

    request.onsuccess = grabEventAndContinueHandler;

    event = yield;

    var id = event.target.result;

    if (id === "uniqueID") alert("Object stored.");

    db.close();
}("Test", 1.0, "Test database.")); 
```

该`grabEventAndContinueHandler`函数在生成器之后定义如下：

```
function grabEventAndContinueHandler(event) {
    gen.send(event);
} 
```

生成器启动如下：

```
gen.next(); 
```

一旦生成器启动，就会请求打开到给定数据库的连接。然后`grabEventAndContinueHandler`作为事件处理程序附加到`onupgradeneeded`事件。最后，我们使用关键字 yield 或暂停生成器`yield`。

当`gen.send`从`grabEventAndContinueHandler`函数调用方法时，生成器会自动恢复。该函数只接受一个调用的参数`event`并将其发送到生成器。当生成器恢复时，发送的值存储在一个名为 的变量中`event`。

回顾一下，魔法发生在这里：

```
// resume the generator when the event handler is called
// and send the onsuccess event to the generator
request.onsuccess = grabEventAndContinueHandler;

// pause the generator using the yield keyword
// and save the onsuccess event sent by the handler
var event = yield; 
```

上面的代码使编写异步代码成为可能，就好像它是同步的一样。要了解有关生成器的更多信息，请阅读以下[MDN 文章](https://developer.mozilla.org/en/New_in_JavaScript_1.7#Generators "JavaScript 1.7 中的新功能 - MDN")。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T18:37:56.123

在 Mozilla 代码库的IDB 测试中，到处[都是](http://hg.mozilla.org/mozilla-central/file/895e12563245/dom/indexedDB/test/unit/test_objectCursors.js)`grabEventAndContinueHandler()`乱七八糟[的，但除了](http://hg.mozilla.org/mozilla-central/annotate/895e12563245/dom/indexedDB/test/unit/test_objectCursors.js)[以下](http://hg.mozilla.org/mozilla-central/file/895e12563245/dom/indexedDB/test/event_propagation_iframe.html)几个之外，我找不到定义：

```
function grabEventAndContinueHandler(event) {
  testGenerator.send(event);
} 
```

如果没有函数定义，我无法说出它的作用，但我不得不猜测它们是测试套件的一部分，并像其他的那样传递事件消息。`yield`似乎是一个全局的，可能会从其内部将测试套件的结果传回`grabEventAndContinueHandler()`。

* * *

我猜这`yield`只是一个全局对象，它使用来自,和调用`grabEventAndContinueHandler`的事件结果进行设置。`createObjectStore``objectStore.add()``objectStore.get`

如果它有帮助，我会给你一些关于`yield`在 Ruby 中使用这个概念的背景知识。它有点像`map()`——它是一个将消息传递回迭代器之外的代码“块”的关键字。

我不能`yield`肯定地说在这里做什么（它似乎不是一个函数），但是根据我对 IndexedDB 的了解，这是一个镜头。

鉴于这涉及 IDB，我知道这里的 yield 对象包含事件对象 ( `let event = yield`)，这是一个包含`event.target.result`属性的对象。

由于该事件属性仅来自`onsuccess`回调，并且在这里`request.onsuccess = grabEventAndContinueHandler`，我可以猜测这`grabEventAndContinueHandler`相当于代码的“块”，并且通过设置此全局对象将生成的事件对象“归还”回主线程。

# java - JComboBox 设置一个字符串，然后该字符串返回 null

> ID：10924625
> 
> 赞同：1
> 
> 时间：2012-06-07T01:46:21.757
> 
> 标签：java, string, swing, jcombobox

我有一个程序的一小部分，它使用 JComboBox 从中选择某个字符串。我在互联网上找到了这段代码并尝试了它，它在一段时间内有效，但是当我在选择它后尝试在不同的地方再次调用该字符串时，它返回 null。这是代码：

```
 private class courseAL implements ActionListener{
    public void actionPerformed(ActionEvent e) {
        Start_round sr = new Start_round();
        JComboBox cb = (JComboBox)e.getSource();
        sr.CourseName = (String)cb.getSelectedItem();
        System.out.println(sr.CourseName);
    }
} 
```

在这种情况下，它会打印出高尔夫球场的正确名称，但是当我在选择它后尝试在不同的地方再次调用 sr.CourseName 时，它​​会打印出 null。帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T02:10:14.790

在选择和取消选择时都会传递一个 ActionEvent，因此第二个是在选择新项目之前取消选择一项。通过使用 ItemListener，您可以检测事件是选择还是取消选择。

```
private class courseAL implements ItemListener {
    public void itemStateChanged(ItemEvent e) {
        if (e.getStateChange() == ItemEvent.SELECTED) {
            Start_round sr = new Start_round();
            sr.CourseName = (String) e.getItem();
            // alternate:
            // JComboBox cb = (JComboBox) e.getItemSelectable();
            // sr.CourseName = (String) cb.getSelectedItem();
            System.out.println(sr.CourseName);
        }
    }
} 
```

# caching - 在 PhoneGap 应用程序中缓存外部图像

> ID：10924628
> 
> 赞同：1
> 
> 时间：2012-06-07T01:46:52.317
> 
> 标签：caching, cordova, local-storage

我在应用程序中使用了第 3 方图像。我不想在应用程序中下载和打包它们，因为它会侵犯版权。

如何在第一次打开应用程序时加载所有图像并缓存它们，这样如果再次离线打开，图像仍然可以访问？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T02:04:47.927

尝试使用缓存清单：[http](http://www.w3.org/TR/html5/offline.html) ://www.w3.org/TR/html5/offline.html 。允许您指定要缓存的内容以供离线使用。

将您的 html 标记更改为：

```
<html manifest="cache.appcache"> 
```

在 cache.appcache 文件中：

```
CACHE MANIFEST
index.html
image1.jpg
image2.jpg 
```

# php - 对具有 500 万行的数据库进行布尔搜索，非常慢

> ID：10924631
> 
> 赞同：0
> 
> 时间：2012-06-07T01:47:20.367
> 
> 标签：php, mysql, boolean

我有一个脚本，当用户搜索“Apples”时，会有一个带有相关搜索的列，如“Shiny Apples”和“Rotten Apples”等。

问题是我的搜索数据库有 5,600,000 行，而 mysql 非常滞后。

这是我的代码：

```
$get = mysql_query("SELECT keyword FROM searches WHERE MATCH (keyword) AGAINST ('".mysql_real_escape_string(preg_replace('#([\S]+)#', '$1', $title))."' IN BOOLEAN MODE) LIMIT 0,15"); 
```

这需要很长时间来处理，而且我有一个非常活跃的网站，每秒都会执行搜索，有人可以推荐我一些提示吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T02:09:40.203

你需要索引。过去我有过一些经验，仅通过创建索引就可以获得显着的性能提升。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T01:54:31.773

您必须索引您查看的列以加快速度。我退出使用 Mysql 的本机搜索只是因为它很烂。我搬到了 Lucene，并且像魅力一样工作

# css - 如何让我的 CSS 线性渐变在 IE 中工作？

> ID：10924632
> 
> 赞同：16
> 
> 时间：2012-06-07T01:47:22.150
> 
> 标签：css

我有一个链接，我想让它看起来像一个带有圆角和渐变填充的按钮。它在 Chrome 中运行良好，但在 IE 中不行。

我发现如果我设置 display: inline-block，它会显示渐变，但会删除圆角。有人知道如何在 IE 中解决这个问题吗？

[JSFiddle 中的演示](http://jsfiddle.net/pqYJt/1/)

HTML：

```
<a href="" class="button-gold-med">Hello World</a>​ 
```

CSS：

```
a {    
    color: white;
    padding: 8px;

    background: #7db9e8;
    background: -webkit-gradient(linear, left top, left bottom, from(#7db9e8), to(#1e5799));
    background: -webkit-linear-gradient(top, #7db9e8, #1e5799);
    background: -moz-linear-gradient(top, #7db9e8, #1e5799);
    background: -ms-linear-gradient(top, #7db9e8, #1e5799);
    background: -o-linear-gradient(top, #7db9e8, #1e5799);
    background: linear-gradient(top, #7db9e8, #1e5799);
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#7db9e8', endColorstr='#1e5799',GradientType=0);
    zoom: 1;

    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    border-radius: 5px;

    -moz-background-clip: padding;
    -webkit-background-clip: padding-box;
    background-clip: padding-box;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-04-07T19:50:46.553

我知道这个问题已经很老了，但是因为它没有得到回答，如果这可以帮助人们，这是我在所有市长浏览器中获得线性渐变的解决方案：

```
/* IE10 Consumer Preview */ 
background-image: -ms-linear-gradient(top, #FFFFFF 0%, #BDBDBD 100%);

/* Mozilla Firefox */ 
background-image: -moz-linear-gradient(top, #FFFFFF 0%, #BDBDBD 100%);

/* Opera */ 
background-image: -o-linear-gradient(top, #FFFFFF 0%, #BDBDBD 100%);

/* Webkit (Safari/Chrome 10) */ 
background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0,     #FFFFFF), color-stop(1, #BDBDBD));

/* Webkit (Chrome 11+) */ 
background-image: -webkit-linear-gradient(top, #FFFFFF 0%, #BDBDBD 100%);

/* W3C Markup, IE10 Release Preview */ 
background-image: linear-gradient(to bottom, #FFFFFF 0%, #BDBDBD 100%); 
```

还有一个创建这个 CSS 渐变的 onlie 工具，在这里查看：

[http://ie.microsoft.com/Testdrive/Graphics/CSSGradientBackgroundMaker/Default.html](http://ie.microsoft.com/Testdrive/Graphics/CSSGradientBackgroundMaker/Default.html)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-07T01:54:07.123

您需要使用 Microsoft 过滤器：

```
 filter: progid:DXImageTransform.Microsoft.Gradient(startColorstr='#7db9e8', endColorstr='#1e5799'); 
```

使用它作为 IE 的后备——它适用于大多数版本。

请参阅规范：http:
[//msdn.microsoft.com/en-us/library/ms532997%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms532997%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T01:50:37.150

您可以随时使用图像回退，而不是使用过滤器：

```
a {
    color: white;
    padding: 8px;

    background: #7db9e8;
    background: transparent url('gradient.png') 0 0 repeat;
    background: -webkit-gradient(linear, left top, left bottom, from(#7db9e8), to(#1e5799));
    background: -webkit-linear-gradient(top, #7db9e8, #1e5799);
    background: -moz-linear-gradient(top, #7db9e8, #1e5799);
    background: -ms-linear-gradient(top, #7db9e8, #1e5799);
    background: -o-linear-gradient(top, #7db9e8, #1e5799);
    background: linear-gradient(top, #7db9e8, #1e5799);

    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    border-radius: 5px;

    -moz-background-clip: padding;
    -webkit-background-clip: padding-box;
    background-clip: padding-box;
} 
```

# amazon-s3 - 访问 s3n://elasticmapreduce/samples/wordcount/input 中的文件

> ID：10924633
> 
> 赞同：10
> 
> 时间：2012-06-07T01:47:23.393
> 
> 标签：amazon-s3, amazon-web-services

我如何访问位于其他人拥有的 S3 的以下文件夹中的文件

s3n://elasticmapreduce/samples/wordcount/input

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T06:05:32.447

s3n://elasticmapreduce/samples/wordcount/input 中的文件是公开的，并且作为 Amazon 的输入提供给示例字数统计 Hadoop 程序。获取它们的最佳方法是

1.  从 Amazon Web Services 控制台启动一个新的 Amazon Elastic MapReduce 作业流程（不管是哪一个），并确保您使用 Keep Alive 选项保持作业处于活动状态
2.  EC2 机器启动后，从 Amazon Web Services 控制台找到 EC2 上的实例
3.  例如，使用 hadoop 用户 ssh 到正在运行的 EC2 实例之一 `ssh -i keypair.pem hadoop@ec2-IPADDRESS.compute-1.amazonaws.com`
4.  获取你需要的文件，使用`hadoop dfs -copyToLocal s3://elasticmapreduce/samples/wordcount/input/0002 .`
5.  将文件 sftp 到本地系统

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-27T02:22:12.063

您可以在此处访问 wordSplitter.py：

[https://elasticmapreduce.s3.amazonaws.com/samples/wordcount/wordSplitter.py](https://elasticmapreduce.s3.amazonaws.com/samples/wordcount/wordSplitter.py)

您可以在此处访问输入文件：

```
https://elasticmapreduce.s3.amazonaws.com/samples/wordcount/input/0012
https://elasticmapreduce.s3.amazonaws.com/samples/wordcount/input/0011
https://elasticmapreduce.s3.amazonaws.com/samples/wordcount/input/0010
https://elasticmapreduce.s3.amazonaws.com/samples/wordcount/input/0009
https://elasticmapreduce.s3.amazonaws.com/samples/wordcount/input/0008
https://elasticmapreduce.s3.amazonaws.com/samples/wordcount/input/0007
https://elasticmapreduce.s3.amazonaws.com/samples/wordcount/input/0006
https://elasticmapreduce.s3.amazonaws.com/samples/wordcount/input/0005
https://elasticmapreduce.s3.amazonaws.com/samples/wordcount/input/0004
https://elasticmapreduce.s3.amazonaws.com/samples/wordcount/input/0003
https://elasticmapreduce.s3.amazonaws.com/samples/wordcount/input/0002
https://elasticmapreduce.s3.amazonaws.com/samples/wordcount/input/0001 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-30T12:23:14.460

文件夹的所有者（很可能是文件夹中的文件）必须让匿名读者可以访问它。如果是这种情况， s3n://x/y... 将被翻译为 [http://s3.amazonaws.com/x/y](http://s3.amazonaws.com/x/y) ... 或 [http://x.s3.amazonaws.com/y](http://x.s3.amazonaws.com/y)。 ..

x 是存储桶的名称。y... 是桶内的路径。

如果您想确保文件存在，例如，如果您怀疑名称拼写错误，您可以在浏览器中打开 [http://s3.amazonaws.com/x](http://s3.amazonaws.com/x) ，您将看到描述“文件”的 XML，即 S3对象，可用。试试这个： [http ://s3.amazonaws.com/elasticmapreduce](http://s3.amazonaws.com/elasticmapreduce)

我试过这个，似乎你想要的路径不是公开的。AWS EBS 文档在“入门”示例之一中引用了 s3://elasticmapreduce/samples/wordcount/input。但是 s3 与 s3n 不同，因此输入可能对 EMR 可用，但对 HTTP 访问不可用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-11-04T09:03:03.827

在 Amazon S3 中，没有文件夹的概念，存储桶只是对象的平面集合。但是您可以使用以下 URL 在浏览器中列出您感兴趣的所有文件： [s3.amazonaws.com/elasticmapreduce ?prefix=samples/wordcount/input/](http://s3.amazonaws.com/elasticmapreduce?prefix=samples/wordcount/input/)

然后您可以通过指定全名来下载它们，例如 [s3.amazonaws.com/elasticmapreduce/samples/wordcount/input/0001](http://s3.amazonaws.com/elasticmapreduce/samples/wordcount/input/0001)

# iphone - 将 Mobclix 添加到 Cocos2d 场景

> ID：10924637
> 
> 赞同：1
> 
> 时间：2012-06-07T01:49:23.267
> 
> 标签：iphone, cocos2d-iphone

有没有人将 mobclix 集成到 cocos2d 应用程序中？我尝试使用 Mobclix 添加广告横幅，但没有出现，我的代码：

```
//In appDelegate:
[Mobclix startWithApplicationId:@"4778FFA3-DDFF-4550-BFFE-7B7AB4B5765D"];
[Mobclix start]; 

//In my Scene
-(void)onEnter {

    adView = [MobclixAdViewiPhone_320x50 new];
    adView.delegate = self; //Optional

    // set position
   adView.frame = CGRectMake(10, 20, 320, 50);
   dView.refreshTime = 15;

    // add to view
   [[[CCDirector sharedDirector] openGLView] addSubview:adView];

   // set refresh (automatically gets one ad when changing the property)
   [adView getAd];

   [super onEnter]; 
```

请有人帮我在我的场景中显示 Adbanner 吗？

# delphi - 在设计模式下对运行时异常进行故障排除

> ID：10924638
> 
> 赞同：3
> 
> 时间：2012-06-07T01:49:28.197
> 
> 标签：delphi, delphi-2010

当我打开一个表单时，我突然收到一条错误消息：

> “错误读取表格：'X'”
> 
> 缓存未初始化。必须先调用 TCache.Initialise。忽略错误并继续？注意：忽略错误可能会导致组件被删除或属性值丢失”

“缓存未初始化”位是我们的一个类引发的异常。

我的第一个问题是，为什么 Delphi IDE 运行我的代码而没有我要求它“运行程序”？它运行什么代码？有什么办法可以关闭它吗？

其次，有什么办法可以在调试器中捕获这个错误，这样我就可以找出这个异常在调用堆栈中发生的位置？我尝试在抛出异常的地方放置一个断点，但 Delphi 忽略了它。

而且，一旦我弄清楚了这个异常的来源，有没有办法告诉我什么时候处于“设计模式”而不运行该代码，或者运行不同的代码？或者更好的是，如果在设计模式下根本不运行该代码？[更新：请参阅 Francois 对如何停止在设计模式下运行代码的回答。]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T02:16:39.587

您编写了一些在 IDE 尝试加载 dfm 时执行的组件代码。

如果您的组件处于“设计模式”，您可以在代码中进行测试

```
 if (csDesigning in ComponentState) then 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T06:41:54.593

当 IDE 加载 DFM 时，它会在表单设计器中创建活动对象，这意味着组件运行时代码实际上是在 IDE 中运行的。因此，如果组件代码想要在设计时跳过其代码的运行部分，则需要检查标志的`TComponent.ComponentState`属性。`csDesigning`

# php - PHP：无法连接到贝宝沙箱

> ID：10924641
> 
> 赞同：2
> 
> 时间：2012-06-07T01:49:49.053
> 
> 标签：php, ssl, paypal, openssl, paypal-sandbox

我正在尝试使 PayPal IPN 脚本正常工作。但即使`fsockopen("ssl://www.sandbox.paypal.com")`不起作用。

```
$fp = fsockopen("ssl://google.com", 443, $errno, $errstr, 5); 
```

`if ($fp)`-> 返回真

```
$fp = fsockopen("ssl://www.sandbox.paypal.com", 443, $errno, $errstr, 40); 
```

`if ($fp)`-> 返回 false 并且`$errno`为 0

Apache2 日志说：

```
 PHP Warning:  fsockopen(): SSL: crypto enabling timeout [...]
 PHP Warning:  fsockopen(): Failed to enable crypto [...]
 PHP Warning:  fsockopen(): unable to connect to ssl://www.sandbox.paypal.com:443 (Unknown error) [...] 
```

编辑： `phpinfo()`说：

```
Registered Stream Socket Transports: tcp, udp, unix, udg, ssl, sslv3, tls 
```

编辑2：有问题。它的 libssl1.0.1c。但是我如何降级？

# php - 在 IIS 上调试 PHP 错误（因为它与调用 com 对象有关）

> ID：10924642
> 
> 赞同：1
> 
> 时间：2012-06-07T01:50:05.653
> 
> 标签：php, .net, dll, iis-7, com

这个问题与我写的另一个问题有关：

> [从 PHP 使用 DOTNET 时遇到问题。](https://stackoverflow.com/questions/10867001/trouble-using-dotnet-from-php)

我在 PHP 中使用该`DOTNET()`函数来调用我编写的 DLL。

`php.exe example.php`通过从命令行 运行（DLL 仍在 PHP 文件夹中），我能够使其正常工作。

我将 php 文件移动到同一台机器上的 IIS 7 webserver 文件夹（将 DLL 留在同一个 php 文件夹中），但我不断收到*500 internal service error*。

我检查了服务器日志（in`c:\inetput\logs\`和 in `c:\windows\temp\php53errors`），但似乎没有任何有关导致错误的信息。我什至尝试更改`php.ini`设置以获得更多错误反馈，但这似乎无济于事。

我只能猜测这个问题可能与：

1.  那个 php 文件没有适当的权限（我的 dll 做了一些文件读/写）
2.  php找不到DLL

我得到的实际错误是：

> FastCGI 进程意外退出。

关于如何调试这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T03:26:14.240

这里的问题几乎可以肯定与文件权限有关。

从命令行运行时`php.exe`，您以自己的登录用户身份运行。从 IIS 运行 PHP 脚本时，为了响应 http 请求，php.exe 以不同的用户身份运行。根据您的 Windows 版本，它可能是

*   `IUSR_machine`- 在 IIS6 和更早版本上
*   `IUSR`在 IIS7 及更高版本上

这些用户需要对要执行的 php 文件的权限。

[阅读更多关于它的信息](http://learn.iis.net/page.aspx/140/understanding-built-in-user-and-group-accounts-in-iis/)

在 IIS7 及更高版本上，我使用一个命令行工具[`icacls.exe`](http://technet.microsoft.com/en-us/library/cc753525%28v=WS.10%29.aspx)来设置 IIS 需要读取的目录或文件及其启动的进程（如 php.exe）的权限。这种安全性适用于所有 IIS 应用程序：PHP、ASPNET、ASP-classic、Python 等。

IIS 还需要能够读取静态文件，如 .htm、.js、.css、.jpog、.png 文件等。您可以为所有这些设置相同的权限：读取和执行。

您可以直接向用户授予权限，如下所示：

```
 icacls.exe  YOUR-FILE-GOES-HERE  /grant "NT AUTHORITY\IUSR:(RX)" 
```

您还可以向 IUSR 所属的组授予权限，如下所示：

```
 icacls.exe YOUR-FILE-HERE  /grant "BUILTIN\IIS_IUSRS:(RX)" 
```

无论哪种情况，您都可能需要在设置文件级权限后停止并重新启动 IIS。

如果您的 .php 脚本读取和写入其他文件或目录，则同一用户需要对这些其他文件和目录的权限。如果您需要 .php 脚本才能删除文件，那么您可能需要

```
 icacls.exe YOUR-FILE-HERE  /grant "BUILTIN\IIS_IUSRS:(F)" 
```

...授予文件的全部权限。

您也可以授予对整个目录的权限，指定*将来在该目录中*创建的所有文件都将继承在该目录上设置的特定于文件的权限。例如，为目录设置文件权限，然后将一堆文件复制到其中，所有文件都从父级获得权限。使用 OI 和 CI 标志执行此操作（这些首字母代表“对象继承”和“容器继承”）。

```
 icacls.exe DIRECTORY  /grant "BUILTIN\IIS_IUSRS:(OI)(CI)(RX)"
 copy FILE1 DIRECTORY
 copy FILE2 DIRECTORY
   ... 
```

当我想在 IIS 中创建一个新的 vdir 以允许运行 PHP 脚本、ASPX 或 .JS（是的，ASP Classic）或 Python 或其他任何东西时，我执行以下步骤：

```
appcmd.exe add app /site.name:"Default Web Site" /path:/vdirpath /physicalPath:c:\docroot
icacls.exe DIRECTORY  /grant "BUILTIN\IIS_IUSRS:(OI)(CI)(RX)" 
```

然后我将文件放入目录中，它们会获得适当的权限。

在目录上设置 ACL（访问控制列表）不会更改目录中已存在文件的 ACL。如果要对目录中已有的文件设置权限，则需要对特定文件使用 icacls.exe。icacls 接受通配符，它​​还有一个`/t`递归开关。

# php - 使用 PHP 解析 XML 命名空间

> ID：10924643
> 
> 赞同：1
> 
> 时间：2012-06-07T01:50:16.970
> 
> 标签：php, xml-parsing, simplexml

我一直在拼命试图解析第一个 xs:sequence 下的项目（从 AssetID 开始）：

```
<Response>
  <xs:schema id="Response" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
    <xs:element name="Response" msdata:IsDataSet="true" msdata:UseCurrentLocale="true">
      <xs:complexType>
        <xs:choice minOccurs="0" maxOccurs="unbounded">
          <xs:element name="Server">
            <xs:complexType>
              <xs:sequence>
                <xs:element name="AssetID" type="xs:int" minOccurs="0" />
                <xs:element name="Asset_x0020_Number" type="xs:int" minOccurs="0" />
                <xs:element name="Asset_x0020_Name" type="xs:string" minOccurs="0" />
                <xs:element name="Tag" type="xs:string" minOccurs="0" />
                <xs:element name="Server_x0020_Material" type="xs:string" minOccurs="0" />
                <xs:element name="Cabinet_x0020_Name" type="xs:string" minOccurs="0" />
                <xs:element name="Server_x0020_Project_x0020_Purpose" type="xs:string" minOccurs="0" />
                <xs:element name="Tranche_x0020_Number" type="xs:int" minOccurs="0" />
                <xs:element name="Strategy" type="xs:string" minOccurs="0" />
                <xs:element name="Total_x0020_System_x0020_U_x0020_Height" type="xs:int" minOccurs="0" />
                <xs:element name="Cabinet_x0020_U_x0020_Number" type="xs:int" minOccurs="0" />
                <xs:element name="Mounting_x0020_Direction" type="xs:string" minOccurs="0" />
                <xs:element name="Serial_x0020_Number" type="xs:string" minOccurs="0" />
                <xs:element name="Purchase_x0020_Price" type="xs:decimal" minOccurs="0" />
                <xs:element name="Location_x0020_Group" type="xs:string" minOccurs="0" />
                <xs:element name="Row" type="xs:string" minOccurs="0" />
                <xs:element name="Column" type="xs:string" minOccurs="0" />
                <xs:element name="Rotation" type="xs:int" minOccurs="0" />
                <xs:element name="AssetOperationalStatus" type="xs:string" minOccurs="0" />
                <xs:element name="Discovered" type="xs:boolean" minOccurs="0" />
                <xs:element name="Power_x0020_State" type="xs:string" minOccurs="0" />
              </xs:sequence>
            </xs:complexType>
          </xs:element>
          <xs:element name="Strategy">
            <xs:complexType>
            [...continues on...] 
```

我一直在尝试使用 PHP 的 SimpleXMLElement，但我不知道如何仅隔离这 20 行。我只需要一个元素名称的数组，例如：

```
{"AssetID", "Asset_x0020_Number","Asset_x0020_Tag","Tag", ... ,"Power_x0020_State"} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T02:04:16.507

这是显示每个 xs:element 的“名称”属性的示例

```
$xml = simplexml_load_string($xmlString);
$namespaces = $xml->getNameSpaces(true);
$xs = $xml->children($namespaces['xs']);

foreach($xs->schema->element->complexType->choice->element->complexType->sequence->element as $element) {
    echo $element->attributes()->name.PHP_EOL;
} 
```

# php - 生成元素的所有组合

> ID：10924646
> 
> 赞同：0
> 
> 时间：2012-06-07T01:50:42.707
> 
> 标签：php, arrays, attributes, combinations

我必须通过独特的价值和有序的方式生成元素的所有组合。我用一个例子来解释，这些是参数和它们的值：

```
Dog : mal | female
Color : red | blue | yellow

the all combinations (ordered) to get are :
male - red
male - blue
male - yellow
female - red
female - blue
female - yellow 
```

我如何使用数组在 php 中做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T01:51:50.777

```
$dogs = array( 'male', 'female');
$colors = array( 'red', 'blue', 'yellow');

foreach( $dogs as $dog)
    foreach( $colors as $color)
        echo $dog . ' - ' . $color . "\n"; 
```

**输出：**

```
male - red
male - blue
male - yellow
female - red
female - blue
female - yellow 
```

[演示](http://codepad.viper-7.com/WfgRiq)

# java - 在 Jaxb2Marshaller 上使用带有 packagesToScan 属性的 JAXBElement 时没有端点适配器

> ID：10924648
> 
> 赞同：0
> 
> 时间：2012-06-07T01:50:52.833
> 
> 标签：java, spring, exception, jaxb

我正在使用 JAXBElement<...> 因为在给定 XSD 的生成类中缺少***@XmlRootElement***注释（我无法修改），但 Spring 仍然给我 java.lang.IllegalStateException: No adapter for endpoint [...]。Marshaller 定义如下：

```
<bean id="marsh" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
    <propety name="packagesToScan" value="com.foo.*.schemas" />
</bean> 
```

在日志中我可以看到spring已经加载了所有模式，如果我在启动时跟踪到endpointMap，我可以在那里看到它，但是当请求到来时没有合适的适配器......

有人面临同样的情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T01:59:51.177

好吧，我现在可以看到它，如果未使用**contextPath**属性，则它未在 jaxb2marshaller 实例中设置（为空），并且以下私有方法无法按预期工作：

```
private boolean supportsInternal(Class<?> clazz, boolean checkForXmlRootElement) {
        if (checkForXmlRootElement && AnnotationUtils.findAnnotation(clazz, XmlRootElement.class) == null) {
            return false;
        }
        if (StringUtils.hasLength(getContextPath())) {  // << -----
            String packageName = ClassUtils.getPackageName(clazz);
            String[] contextPaths = StringUtils.tokenizeToStringArray(getContextPath(), ":");
            for (String contextPath : contextPaths) {
                if (contextPath.equals(packageName)) {
                    return true;
                }
            }
            return false;
        }
        else if (!ObjectUtils.isEmpty(getClassesToBeBound())) {
            return Arrays.asList(getClassesToBeBound()).contains(clazz);
        }
        return false;
    } 
```

所以 JAXBElement<> 技巧在这里不起作用:(

# algorithm - 当 n = 0 时，编程语言对 {1,...,n} 的解释是否一致？

> ID：10924655
> 
> 赞同：4
> 
> 时间：2012-06-07T01:52:11.300
> 
> 标签：algorithm, oop, r, math, standards

在 math.SE 上，一个[关于数学符号](https://math.stackexchange.com/q/154903/3733)的问题引发了关于当 n=0 时编程语言如何解释集合 {1,...,n} 的讨论

该问题要求使用数学符号来表示 R 代码`1:n`

根据评论，当 n=0 时 {1,...,n} 的数学解释是这是一个空集。随后的评论表明 C 与此解释一致，因为`for (int i = 1; i < n; i++)`它返回一个空集，因为它迭代 0 次。

我不清楚 R 中的等效语句是什么，但`1:0`返回向量`[1,0]`

因此，`for (i in 1:0) print(i)`迭代 1 和 0（我解释为类似于上面的 C 代码）

这是因为 {1,...,n} 不是 的正确表示法`1:n`吗？

这是否意味着 R 违反了普遍规则？

编程语言中是否有对此集合的一致解释？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T02:05:33.347

每个数学形式都有自己的符号。暗示存在“通用符号”是非常“不合数学的”。如果您想要存在多个符号系统的数学域示例，请查看与张量或组相关的符号。

在 R 中，代码`x <- 1:0`返回有序向量 c(1,0)。就像代码 x <- 2:-2 返回 c(2,1,0,-1,-2) 一样。该代码`x <- seq(1, length=0)`返回一个长度为 0 的序列，该序列在控制台会话中打印为`integer(0)`. R 并不是真正为模仿集合符号而设计的，但它确实具有一些集合函数，并且它还具有更全面地实现集合符号的包。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T02:09:09.767

C 没有`for`循环运行的集合的概念。`for`循环`for(a;b;c) d;`只是语法糖：

```
a;
loop: if (!b) goto done;
d;
c;
goto loop;
done: ; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-07T04:06:09.150

另请参阅我的回复：[如果下限大于上限](https://stackoverflow.com/questions/10922169/sequence-construction-that-creates-an-empty-sequence-if-lower-is-greater-than-up)，则在 R中创建一个空序列的序列构造`seq_len(n)`应该优先`1:n`用于这个原因（后者失败时行为不端`n=0`）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-07T01:57:52.987

一些语言支持范围的概念，在 C 中，你创建一个 for 循环是任意的，你可以让它意味着 0 或者你可以让它倒数。在其他语言中，第二个数字小于第一个数字的范围通常会产生一个递减的数字序列。但其随意性，并没有普遍的规律。

# php - Jquery/PHP - 防止用户浏览锁定的内容

> ID：10924657
> 
> 赞同：0
> 
> 时间：2012-06-07T01:52:53.173
> 
> 标签：php, jquery, login

我有这个简单的登录脚本：

```
$.ajax({
        type: 'POST',
        url: 'authorize.php',
        data: { username: user, password: pass },
        dataType: 'json',
        success: function(data) {
            if (data.status == "loggedIn") {
                //Logged in
            } else {
                //Not logged in
            }
        }
    }); 
```

在哪里`//Logged in`，我应该如何调用需要登录的页面？我可以简单地`$.load`访问页面，但是当用户首先可以浏览到该文件时，验证登录的意义何在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T01:57:10.100

这是一个展示的问题，你可以在另一个文件上加载一个 div，你不需要加载整个东西。

我使用 ajax 登录并使用 $.load 来“带来”我在模板文件中的 div。只是因为当您需要更改设计时，它会变得更容易。

请记住，将工作分成单独的“部分”可以让您更轻松地进行更改。想象一下，您在 20 个单独的模板上有相同的登录框。如果你改变一个，你必须再改变19个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T02:01:31.660

我建议[`PHP Sessions`](http://www.php.net/manual/en/book.session.php)在所有这些页面中使用。在您要访问的页面上检查用户是否实际登录，如果成功`$.load`，则在页面上将用户设置为已登录。`authorize.php`

这样，如果用户查看页面源并查看您正在加载的内容，但是当他们尝试访问该页面时，它不会做任何事情，因为您正在检查他们是否已经登录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T02:02:38.713

你不能阻止用户使用 javascript (jquery) 做任何事情，因为它是客户端的并且很容易被禁用/更改等。

您可以做的只是`$.load`您所说的页面，但还要检查加载页面上的会话，在发送内容之前检查实际登录。您需要在会话中设置一些变量作为 authorize.php 的一部分以指示成功登录。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T02:08:16.667

为了防止数据被访问，您应该考虑使用`.htaccess`和 Apache 的[`mod_rewrite`](http://www.workingwith.me.uk/articles/scripting/mod_rewrite). 每当用户请求一段可能敏感的数据时，您将无形地调用一个 PHP 页面，然后该页面将提供所请求的数据或`403 Forbidden`.

例子：

**.htaccess**

```
RewriteEngine On
RewriteRule ^user-content/(.+) display_content.php?file=$1 
```

然后，将在用户内容中访问的任何文件都将通过`display_content.php`. 如果有引用者，您还可以使用此`.htaccess`文件通过拒绝显示资源来帮助防止盗链。

**display_content.php**

```
<?php
if (isLoggedIn($_COOKIE["username"], $_COOKIE["password"]) && isset($_GET["file"])) {
    if (mimeTypeOk($_GET["file"]) { // Implementation not shown
        readfile($_GET["file"]);
        exit();
    }
}
header("403 Forbidden");
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T03:26:20.270

为了以最安全的方式执行此操作，您将不得不使用 jQuery 作为客户端方式和 PHP 作为服务器端方式来检查用户是否登录。您不需要加载整个页面使用 jQuery，只需使用以下代码仅加载 div 部分：

```
$("#load_dom").click(function(){  
$("#result")  
    .html(ajax_load)  
    .load(loadUrl + " #picture");  
}); 
```

然后，作为一项安全措施，使用 PHP 来限制对页面的访问，方法是检查 $_SESSION 变量，如下所示：

```
if (!isset($_SESSION['userid'])) {
    // user is logged in
} else {
    // user is not logged in
    die("You are not logged in.");
} 
```

# html - 如何在不使用 span、div 或 p 的情况下为 HTML 中的文本着色

> ID：10924658
> 
> 赞同：0
> 
> 时间：2012-06-07T01:52:53.607
> 
> 标签：html, css

我正在尝试以这种方式为单词着色：

```
<span style="color: black;"><strong>2679</strong></span> pictures in <span style="color: black;"><strong>73</strong></span> albums! 
```

出于某种原因，第二个跨度在文本中创建了一个换行符。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T01:54:40.563

如果您的所有`<strong>`标签都有黑色文本，那么使用 CSS 来实现它并`<span>`完全放弃标签：

```
strong {
    color: #000;
} 
```

或者，如果您只希望某些`<strong>`标签为黑色，则将一个类应用于这些标签：

```
strong.black {
    color: #000;
}

<strong class="black">2679</strong> pictures in <strong class="black">73</strong> albums! 
```

# arrays - 在 MIPS 程序集中交换数组中的两个元素

> ID：10924662
> 
> 赞同：0
> 
> 时间：2012-06-07T01:53:11.423
> 
> 标签：arrays, assembly, mips

我正在尝试学习 MIPS ISA。如果我想在 MIPS 中执行此功能：

```
A[2*i]=A[2*k+j]; 
```

我该怎么办？我也很感激我可以阅读的任何其他内容，即我可以阅读有关如何解决此类问题的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T02:25:49.027

我们可以将其分解为 2 个部分：

1.  计算A[2*i]和A[2*k+j]的地址
2.  将第二个地址的值赋给第一个地址的内存

我只想解决（咳咳）#1。

要计算数组元素的地址，你需要知道 3 件事：

1.  数组的起始地址
2.  你想要的元素的索引
3.  数组元素的大小

我假设你知道如何计算，或者只是知道，#1 & #3。剩下的＃2，它涉及简单的算术。（由于您没有说明 i、j 和 k 的表示方式，因此我无法提供太多帮助）。

最后一步是将索引乘以数组元素的大小；这为您提供了所需元素相对于数组开头的偏移量。将其添加到数组开头的地址，您就有了元素的地址。

PS您正在翻译的代码不会交换两个元素；它一个接一个地复制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T02:56:52.440

已经有一段时间了，但这可能很接近。不亲自尝试，你永远学不会汇编语言。制作更多示例并对其进行编码。更多学习材料[在这里](http://www.cs.washington.edu/education/courses/cse378/03wi/lectures/mips-asm-examples.html)。

```
# int calc(int *A, int i, int j, int k)
# {
#   return A[2 * i] = A[2 * k + j];
# }

# Args: a0=A, a1=i, a1=j, a3=k Rtn: v0
.text
.set nomacro
.set noreorder
.global calc
.ent calc
calc:
sll $t0, $a1, 3   ; t0 = i * 8
sll $t1, $a3, 1   ; t1 = k * 2
add $t1, $t1, $a1 ; t1 += j
sll $t1, $t1, 2   ; t1 *= 4
add $t0, $t0, $a0 ; t0 += A
add $t1, $t1, $a0 ; t1 += A
lw  $v0, 0($t1)   ; r = A[4 * (2 * k + j)]
sw  $v0, 0($t0)   ; A[4 * (2 * i)] = r 
.end calc 
```

# c++ - libphonenumber 中没有 phonenumber.pb.h

> ID：10924667
> 
> 赞同：1
> 
> 时间：2012-06-07T01:54:33.677
> 
> 标签：c++, libphonenumber

[libphonenumber](http://code.google.com/p/libphonenumber/) (CPP) 库中没有*phonenumber.pb.h*和*phonemetadata.pb.h*

那么有什么方法可以找出它们吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T02:04:33.790

这些是由[Google protobuffers](http://code.google.com/apis/protocolbuffers/docs/overview.html)库从描述协议消息的简单 .proto 文件生成的文件。

查看库资源，应该有`phonemetadata.proto`并且`phonenumber.proto`

# php - 在 PHP 中遍历 CSV 文件

> ID：10924674
> 
> 赞同：2
> 
> 时间：2012-06-07T01:55:33.050
> 
> 标签：php, loops, csv, while-loop, counter

我有这个代码：

```
<?php
   $handle = fopen("GeneratePicklist.csv", "r");
   $data = fgetcsv($handle, 5000, ",");
?> 
```

这会打开一个 php 文件并将其转换为 php 数组。然后我将列出数组内容并将它们显示到格式化页面中。我有这个代码，它正在工作。

```
<?php
    echo "<table width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\">
        <tr>
            <td class=\"dataHeader\" width=\"100\">Mat.Loc.</td>
            <td class=\"dataHeader\" width=\"20\">Qty</td>
            <td class=\"dataHeader\">Description</td>
            <td class=\"dataHeader\" width=\"150\">Part Number</td>
            <td class=\"dataHeader\" width=\"30\">Multiplier</td>
            <td class=\"dataHeader\" width=\"80\">Total Qty</td>
        </tr>
";
$locatePartNoString = array_search("Part Number",$data);
$arrayStart = $locatePartNoString-1;
end($data);
$lastField = key($data);
$counter = ($lastField - $arrayStart);
$arrayBegin = $locatePartNoString+6;
while($counter>0) {
    echo "
        <tr>
            <td class=\"centered\"><span class=\"title\">*".$data[$arrayBegin+4]."*</span><br>".$data[$arrayBegin+4]."</td>
            <td id=\"qty".$counter."\" class=\"centered\">".$data[$arrayBegin+1]."</td>
            <td>".$data[$arrayBegin+2]."</td>
            <td class=\"centered\">".$data[$arrayBegin]."</td>
            <td class=\"centered\"><input type=\"text\" id=\"multiplier".$counter."\" name=\"multiplier".$counter."\" value=\"1\" size=\"3\" style=\"border:1px dotted #CCC;\"></td>
            <td class=\"centered\"><input type=\"text\" id=\"total".$counter."\" name=\"total".$counter."\" value=\"1\" size=\"3\" style=\"border:1px dotted #CCC;\"></td>
        </tr>

    ";
    $counter--;
}
echo "</table>";
?> 
```

我要做的是遍历 CSV 文件并仅在`$arrayBegin`变量覆盖范围内和我的 CSV 数据的最后部分选择某些数据。我已经完成了第一行并且它的工作很好，但我不知道如何递增，所以我的指针移动到 CSV 文件的下一行，并执行与我的第一行数据相同的公式。

这是 CSV 内容的示例，包含 7 个字段：

```
ÊÊ,Part Number,Qty,Description,BB Type,Material Location,Serial Number
ÊÊ,013224-001,1,"PCA,DDR2-800,MINIDIMM MOD256MBx 40",BOM,ASSY,ID121608ZS
ÊÊ,122657-00A,1,SOFTWARE TEST (US M3 CTO),BOM,ASSY,
ÊÊ,376383-002,8,"ASSY, BLANK,SFF",BOM,ASSY,
ÊÊ,458943-003,1,"CA ASSY, SFP BATTERY, 15 POS, 28AWG, 24",BOM,ASSY,
ÊÊ,460499-001,1,"ASSY, 4/V650HT BATTERY CHARGER MODULE",BOM,ASSY,
ÊÊ,499256-001,2,"ASSY, BLANK,MEDIA BAY,ML350G6",BOM,ASSY,
ÊÊ,500203-061,2,"DIMM,4GB PC3-10600R,256Mx4,RoHS",BOM,ASSY,RAKWF8DXV2Q100 
```

我只需要从每一行中选择某些数据，然后继续下一行。如何使用我的 while 循环遍历到下一行？感谢您未来的回复。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T02:39:44.097

这通常是您浏览 CSV 文件的方式，从您已有的文件开始：

```
$handle = fopen("GeneratePicklist.csv", "r");
$firstRow = fgetcsv($handle, 5000, ",");
$partNumberPosition = array_search("Part Number", $firstRow, true); 
```

此时您已经阅读了第一行，它通常包含字段名称。您还确定了“零件编号”在哪一列。

并获取其余部分：

```
// the function `fgetcsv()` will return `false` when the end-of-file is reached
while (false !== ($row = fgetcsv($handle, 5000))) {
    // we have read a(nother) row of data
    // if you're not interested in the columns before the 'Part Number'
    // you can slice them off
    $row = array_slice($row, $partNumberPosition);
    // at this point, $row contains:
    // 0 => the part number
    // 1 => the quantity
    // etc...
}
// we're done, close the file
fclose($handle); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T02:14:22.703

在解析之后或在解析 while 循环期间，您可以测试条件。（这是我写的一个类方法，所以忽略类的东西:)）

```
private function logicMakeCSVTable(){

    $this->importData = Array();
        $i = 0;
        while($row = fgetcsv($this->handle, 999999, ",")){

            $num = count($row);
            for($c=0; $c < $num; $c++){

                $this->importData[$i][$c] = $row[$c];
            }   

            $i++;
        }

        $_SESSION['ImportData']  = "";
        $_SESSION['ImportData'] = $this->importData;

} 
```

# java - 使用 AspectJ 了解调用者类

> ID：10924675
> 
> 赞同：4
> 
> 时间：2012-06-07T01:55:33.497
> 
> 标签：java, spring, aspectj

我试图模仿 Spring 的[AspectJ @Async 支持](http://static.springsource.org/spring/docs/3.0.0.RELEASE/spring-framework-reference/html/scheduling.html#scheduling-annotation-support-async)，但使用消息总线。

问题是我需要知道我的消息总线（RabbitMQ MessageListener）是调用该方法还是调用该方法将立即返回的普通（所有其他）调用者。

*我的注释被称为@MQAsync 而不是 Springs @Async。*

```
package com.snaphop.mqueue;

import org.apache.log4j.Logger;
import com.snaphop.mqueue.MQAsync;

public aspect MQAsyncAspect {

    //pointcut asyncTypeMarkedMethod() : execution(@MQAsync void *(..));
    pointcut asyncTypeMarkedMethod() : call(@MQAsync void *(..));

    private static final Logger log = Logger.getLogger("MQAsync");

    Object around() : asyncTypeMarkedMethod() {     
        if (listenerIsCaller) {
            return proceed();
        }
        //Send the method parameters to the message bus.
        //this logic isn't here for brevity.
        return null;
    }
} 
```

*调用*切入点将为我提供调用者上下文，但这不起作用，因为我将通过反射使用消息侦听器调用该方法。*执行*切入点（已注释掉）不会告诉我谁在调用该方法。

**有没有办法通过某种堆栈转储分析来确定调用者类？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-04-05T16:55:56.773

实际上， *cheeken*的回答很好，但是对于 AspectJ`call()`切入点，您可以更轻松地获取调用类，并且不会产生丑陋的反射：

```
thisEnclosingJoinPointStaticPart.getSignature().getDeclaringType() 
```

如果您认为它比另一个更好，请考虑接受这个答案，否则只需享受 AspectJ 的强大功能。`;-)`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-07T04:38:58.070

您可以通过以下调用确定哪个类正在调用当前方法。请注意，您必须捕获`ClassNotFoundException`（除非您对简单地将名称检索为 a 感到满意`String`）。

```
Class.forName(Thread.currentThread().getStackTrace()[2].getClassName()); 
```

为什么是第三个元素？因为在调用堆栈跟踪方法时堆栈是这样排序的：

1.  `Thread#getStackTrace()`
2.  *`CurrentClass.currentMethod`*`()`
3.  *`ParentClass.parentMethod`*`()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-26T13:50:14.563

这是一种看起来更轻松的替代方法，因为它是原生的并且被 SecurityManager 常用。要使用它，我们需要一个实用程序类，因为我们需要的方法是受保护的。

```
public class CallStackUtils extends SecurityManager {

  static CallStackUtils sm = new CallStackUtils();

  public Class[] getCallersClassesStack0() {
    return getClassContext();
  }

  static public Class[] getCallersClassesStack() {
    return sm.getCallersClassesStack0();
  }

} 
```

# .net - 为什么当我尝试完成 Pro ASP.NET MVC3 书中的 SportStore Demo 时，SaveChanges() 不起作用？

> ID：10924677
> 
> 赞同：1
> 
> 时间：2012-06-07T01:56:11.440
> 
> 标签：.net, asp.net-mvc-3, entity-framework, ef-code-first

```
public void SaveProduct(Product product)
{
    if (product.ProductID == 0)
         {
            context.Products.Add(product);
         }   
     //Oops~~~
     context.SaveChanges();
}

[HttpPost]
public ActionResult Edit(Product product)
{
    if (ModelState.IsValid)
    {
        repository.SaveProduct(product);
        //I can see this msg int the view page. but database never changed.!!
        TempData["message"] = string.Format("{0} has been saved", product.Name);
        return RedirectToAction("Index");
    }
    else
    {
        // there is something wrong with the data values
        return View(product);
    }
} 
```

我被这个问题困住了，不知道如何将数据存储到数据库中。当我尝试保存对现有产品的更改时会出现问题。谁能告诉我为什么调用了 saveChanges() 方法并且数据从未保存到数据库中？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:31:02.490

`product`模型绑定构造的实体不会自动附加到上下文。因此，上下文不知道要保存的任何更改。您必须先附加产品并将其状态设置为已修改。

```
context.Products.Attach(product);
// When setting the entry state to Modified
// all the properties of the entity are marked as modified.
context.Entry(product).State = EntityState.Modified; 
```

现在您可以调用`context.SaveChanges();`.

# java - spring - 应用程序上下文中的 bean 是否动态绑定到 PropertyPlaceholderConfigurer？

> ID：10924682
> 
> 赞同：0
> 
> 时间：2012-06-07T01:57:12.870
> 
> 标签：java, spring

我想知道我的应用程序上下文中的 bean 是否是动态绑定的。具体来说，如果我有

```
<bean id="mySpringRemoteService"
      class="org.springframework.remoting.httpinvoker.HttpInvokerProxyFactoryBean">
      <property name="serviceInterface"
          value="foo.bar.services.mySpringRemoteService" />
      <property name="serviceUrl" value="${spring.remote.service.url}"/>
 </bean>

<bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="location" value="classpath:some.properties"/>
    </bean> 
```

如果我在属性文件中更改服务 url 的属性，稍后检索 bean 会反映此更改吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T02:58:59.877

好吧，我认为您自己尝试一下很容易。

答案是否定的（除非 Spring 的行为在 3.x 中改变）

我相信您必须为配置文件实现运行时更新行为。查看 Apache Commons 配置。

# javascript - 将鼠标事件附加到 Raphael 矩形

> ID：10924683
> 
> 赞同：2
> 
> 时间：2012-06-07T01:57:20.003
> 
> 标签：javascript, raphael

我正在尝试使用 Raphael 2+ 库用鼠标绘制矩形（注意：[这个问题](https://stackoverflow.com/questions/7661103/raphael-drawing-shapes-with-mouse)的答案不适用于 Raphael 2）。

对于矩形 ( [Paper.rect](http://raphaeljs.com/reference.html#Paper.rect) )，mousedown/mouseup 事件仅在光标位于矩形边缘而不在矩形内时触发。有没有办法附加这些事件，以便在鼠标光标位于矩形内时触发它们？

最终，我试图用鼠标绘制选框/框架。理想情况下，我想将鼠标监听器附加到纸上，但这不再可能，所以我在纸上创建一个“表面”矩形并在其中绘制我的元素。这种方法很糟糕吗？欢迎任何想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T05:41:05.197

我玩过，似乎你必须*填充*你的形状才能触发你的事件。见这里：http: [//jsfiddle.net/bathz/KrpKs/](http://jsfiddle.net/bathz/KrpKs/)

这对我来说很有意义，它使您能够清晰地定义您所听内容的范围。我想你可以用透明颜色填充形状，但我会留给你。

# android - 改名后出现两个图标

> ID：10924685
> 
> 赞同：0
> 
> 时间：2012-06-07T01:57:43.733
> 
> 标签：android, icons, google-play

我通过编辑 @string/app_name 字符串资源更改了我的应用程序的名称。现在，当我从 Marketplace 下载它时，我的主屏幕上有两个图标 - 一个带有旧名称，一个带有新名称！我难住了。我不知道旧名字是从哪里来的。我对整个项目文件夹进行了搜索，但仍然找不到！

是的，我只有一个带有 action.MAIN 和 category.LAUNCHER 意图过滤器的活动。那么知道什么给出了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T02:05:14.990

更改 app_name 时是否也更改了包名称？如果您这样做了，那么您的设备上安装了两个不同的 apk，您需要从“设置”屏幕中卸载旧版本的软件包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T02:31:47.823

刚刚在另一台设备上测试过，只安装了一个图标。我的开发设备一定有问题！

# iphone - 仅限横向应用的最佳实践？

> ID：10924691
> 
> 赞同：2
> 
> 时间：2012-06-07T01:58:24.890
> 
> 标签：iphone, objective-c, ios

我是一个新的 iOS 编程人员，我正在开发一个只需要在横向运行的简单 iPhone 游戏。我有 ...

1.  在目标设置中设置支持的方向
2.  添加了请求。plist 项（初始界面方向）
3.  覆盖 shouldAutorotateToInterfaceOrientation 以仅在横向模式下返回 YES

.. 应用程序“看起来”正确，但发生了一些奇怪的事情。

问题 1 - 我正在尝试手动定位我的视图，而不是依赖自动布局。我正在加载的 NIB 中有一个 UIView，它需要位于距屏幕右边缘 150 像素的位置。我必须让 UIViewController 的视图的高度（而不是宽度）正确定位它 - 就像它在代码中此时没有旋转到横向一样。

问题 2 - 实现 UINavigationController 从标题屏幕转到游戏交互。当我将交互 UIViewController 推送到堆栈时，它会像预期的那样从右侧滑入。当我通过弹出交互返回标题时，它会向上滑动到标题。好像要转回纵向了？

我认为我缺少一些非常基本的东西，但我在我的应用程序代码中找不到它。我已经浏览了一个横向应用程序的列表，但他们没有提到比上面的列表更多的内容。

还有其他我应该注意的东西/设置/方法可以覆盖吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T04:29:06.670

问题 2：

不要使用很多 UIViewController。使用一个视图控制器。创建一个主 UIViewController 并为其他 UIViewController 做：

```
[mainviewcontrl presentModalViewcontroller: child_viewcontrl animated: YES]; 
```

要删除子视图控制器，请使用

```
[child_viewcontrl dismissModalViewControllerAnimated: YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T04:25:08.853

您还需要在其他视图控制器中设置 shouldAutorotateToInterfaceOrientation 。尤其是在你的 UINavigationController 中显示的那些。

# c# - 在 wpf 中为线条装饰器设置动画？

> ID：10924695
> 
> 赞同：4
> 
> 时间：2012-06-07T01:59:10.253
> 
> 标签：c#, wpf

有没有办法在 opacity 属性上为装饰器设置动画，使线条从微红色变为全红色>

我的 OnRender() 方法中有以下代码：

```
Pen renderPen = new Pen(new SolidColorBrush(Colors.Red), 2.5);
drawingContext.DrawLine(renderPen, adornedElementRect.Value.TopLeft, adornedElementRect.Value.BottomLeft); 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T06:52:40.630

这是一个例子；按下按钮，红线将淡入淡出。

窗口的 XAML：

```
<Window x:Class="AnimAdornerTest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Button Width="100" Height="30" 
                HorizontalAlignment="Left" 
                VerticalAlignment="Top" Click="Button_Click">Show Adorner</Button>
        <Rectangle x:Name="toBeAdorned" Fill="#E8E8E8" Width="100" Height="100"></Rectangle>
    </Grid>
</Window> 
```

窗口的代码隐藏：

```
using System.Windows;
using System.Windows.Documents;

namespace AnimAdornerTest
{
    public partial class MainWindow : Window
    {
        private AdornerLayer _adornerLayer;
        private AnimAdorner _adorner;

        public MainWindow()
        {
            InitializeComponent();
        }

        private void Button_Click(object sender, RoutedEventArgs e)
        {
            if (_adornerLayer == null)
            {
                _adornerLayer = AdornerLayer.GetAdornerLayer(toBeAdorned);
            }
            if (_adorner != null)
            {
                _adornerLayer.Remove(_adorner);
            }
            _adorner = new AnimAdorner(toBeAdorned);
            _adornerLayer.Add(_adorner);
        }
    }
} 
```

装饰者：

```
using System;
using System.Windows;
using System.Windows.Documents;
using System.Windows.Media;
using System.Windows.Media.Animation;

namespace AnimAdornerTest
{
    public class AnimAdorner : Adorner
    {
        public AnimAdorner(UIElement adornedElement) : base(adornedElement)
        {
            Loaded += AnimAdorner_Loaded;
        }

        void AnimAdorner_Loaded(object sender, RoutedEventArgs e)
        {
            DoubleAnimation myDoubleAnimation = new DoubleAnimation
                {
                    From = 1.0,
                    To = 0.0,
                    Duration = new Duration(TimeSpan.FromSeconds(1)),
                    AutoReverse = true,
                    RepeatBehavior = RepeatBehavior.Forever
                };

            Storyboard myStoryboard = new Storyboard();
            myStoryboard.Children.Add(myDoubleAnimation);
            Storyboard.SetTarget(myStoryboard, this);
            Storyboard.SetTargetProperty(myDoubleAnimation, new PropertyPath(OpacityProperty));

            myStoryboard.Begin(this);
        }

        protected override void OnRender(DrawingContext drawingContext)
        {
            Pen renderPen = new Pen(new SolidColorBrush(Colors.Red), 2.5);
            drawingContext.DrawLine(renderPen, new Point(0, 0), new Point(AdornedElement.RenderSize.Width, AdornedElement.RenderSize.Height));
        }

    }
} 
```

# ios - 如何获取网站的 HTML 内容

> ID：10924696
> 
> 赞同：2
> 
> 时间：2012-06-07T01:59:13.157
> 
> 标签：ios, uiwebview, html-parsing, xcode4.3

在`viewDidLoad`，我正在使用`NSURLRequest`和`NSURLConnection`：

```
NSURLRequest *site_request = 
    [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.google.com/"] 
                     cachePolicy:NSURLRequestUseProtocolCachePolicy 
                 timeoutInterval:10.0];

NSURLConnection *site_connection = 
    [[NSURLConnection alloc] initWithRequest:site_request delegate:self]; 
```

然后我用

```
-(void)connection:(NSURLConnection *)site_connection didReceiveData:(NSData *)data 
{    
    site_response = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
} 
```

我有整个 HTML 在`site_response`.

我想创建一个不可见的`UIWebView`，它将“打开”页面，`NSURLRequest`以便使用 JavaScript 获取如下内容：

```
NSString *myText = [my_webView stringByEvaluatingJavaScriptFromString:
                       @"document.documentElement......"]; 
```

在我的 .h 中，我有：

```
UIWebView *my_webview;
@property (nonatomic, retain) UIWebView *my_webview; 
```

在我的 .m 中，我有：

```
@synthesize torrents_webview; 
```

我的`viewDidLoad`后`NSURLRequest`有

```
[my_webview loadRequest:site_request]; 
```

我用

```
-(void)webViewDidFinishLoad:(UIWebView *)webView 
{
    //an alertview here
} 
```

为了确保它有效。但什么也没有发生。它不提供警报视图。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T02:10:35.103

webViewDidFinishLoad：是 UIWebView 委托的一个方法。您没有在显示的代码中的任何位置设置委托。

```
@interface YourClass : UIViewController <UIWebViewDelegate>

...

- (void)loadView
{
    self.webView.delegate = self;
}

...
- (void)dealloc
{
    self.webView.delegate = nil;
} 
```

此外，如果您使用 NSURLRequest，您将再次获得该页面。但是没有必要使用 NSURLConnection，直接使用 NSURLRequest 加载 UIWebVIew 即可。

或者，如果您必须使用 NSURLConnection，则在文件下载后将其保存到磁盘并使用 LoadHTMLString 加载内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T01:34:16.923

视图控制器.h

```
@interface TopTorrents_ViewController : UIViewController <UITableViewDelegate, UITableViewDataSource,UIWebViewDelegate>
{
    UIWebView *torrents_webview;
}

@property (nonatomic, retain) UIWebView *torrents_webview; 
```

视图控制器.m

```
 @synthesize torrents_webview;

- (void)viewDidLoad
{       
    torrents_webview.delegate = self;

    NSURLRequest *site_request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.google.gr/"] cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:10.0];

    [torrents_webview loadRequest:site_request];  

    [super viewDidLoad];
}

    -(void)webViewDidFinishLoad:(UIWebView *)webView 
    {
        NSString *myText = [torrents_webview stringByEvaluatingJavaScriptFromString:@"document.getElementsByTagName('body')[0]"];

    UIAlertView *my_alert = [[UIAlertView alloc] initWithTitle:@"mytitle" message:myText delegate:nil cancelButtonTitle:@"my button" otherButtonTitles:nil,nil];

    [my_alert show];

} 
```

这是我更新的代码...谢谢

# css - 在 Wordpress 上覆盖 CSS

> ID：10924698
> 
> 赞同：0
> 
> 时间：2012-06-07T01:59:22.657
> 
> 标签：css, wordpress

我正在使用来自 Worpit for Wordpress 的 Twitter Bootstrap 插件，它首先将[http://www.drtimkinsella.com/wp-content/themes/wordpress-bootstrap-v2.1/css/bootstrap.min.css](http://www.drtimkinsella.com/wp-content/themes/wordpress-bootstrap-v2.1/css/bootstrap.min.css)添加到头部其他风格。我需要从行 div 中删除 -20px。我找不到要编辑的 CSS II 无法覆盖样式。我是 Wordpress 的新手，所以我真的只需要找出在哪里编辑这些文件。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T03:54:30.770

你能连接你的编辑器吗？

转到外观 > 编辑器

对能够反映在您的站点中的任何 CSS 文件执行以下操作。

```
.row{margin-left:0px !important;*zoom:1;} 
```

# python - 优化嵌套循环操作

> ID：10924702
> 
> 赞同：2
> 
> 时间：2012-06-07T02:00:10.563
> 
> 标签：python, numpy, nested-loops, data-cube

我有这个数据立方体，其中包含图像每个像素的数据（非常像高光谱成像）。我试图以一种有效的方式在图像的每个像素上拟合一条线。现在，我这样做：

我的数据立方体是一个 6X1024x1024 numpy 数组，我还有另一个变量包含我的数据的自变量。

```
map = np.zeros((1024,1024))
for i in np.mgrid[1:1024]:
    for j in np.mgrid[1:1024]:
        x = independent_variable # This is my independent variable
        y = spec_cube[:,i,j] # The Y data to be fitted is the power at each scale, for a pixel
        index = polyfit(x,y,1) # Outputs the slope and the offset
        map[i,j] = index[0] # The pixel value is the index 
```

我知道嵌套 for 循环通常是最糟糕的事情，但我想不出更好的方法。

我尝试了以下方法，但它给出了这个错误：“ValueError：解包的值太多”

```
map = np.zeros((1024,1024))
for i,j in map:
    x = independent_variable # This is my independent variable
    y = spec_cube[:,i,j] # The Y data to be fitted is the power at each scale, for a pixel
    index = polyfit(x,y,1) # Outputs the slope and the offset
    map[i,j] = index[0] # The pixel value is the index 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T02:15:14.190

一种加快速度的方法：使用[`itertools.product`](http://docs.python.org/library/itertools.html#itertools.product)：

```
for (i, j) in itertools.product(np.mgrid[1:1024], np.mgrid[1:1024]):
    ... stuff ... 
```

改进（Python 2.7.1）：

```
在 [2] 中：定义多行（）：
   ...：对于 np.mgrid[1:1024] 中的 i：
   ...：对于 np.mgrid[1:1024] 中的 j：
   ...： 经过
   ...：        

在 [3] 中： def single_line()：
   ...：对于产品中的 i，j（np.mgrid[1:1024]，np.mgrid[1:1024]）：
   ...： 经过
   ...：    

[4]中：从itertools导入产品

在 [5] 中：%timeit 多行（）
10 个循环，3 个循环中的最佳：每个循环 138 毫秒

在 [6] 中：%timeit single_line()
10 个循环，3 个循环中的最佳：每个循环 75.6 毫秒

```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T11:51:27.253

由于循环内部的操作是求直线的斜率，因此我采用了一种不太精确的方法，但使用了数组操作。基本上，要找到我所做的斜率：每个相邻点的 delta Y / delta X，然后平均所有斜率。

原来它只需要几分之一秒。

这是新代码：

```
map = np.zeros((spec_cube.shape[1],spec_cube.shape[2])) # This will be the power index map
x = scale_array
for i in np.mgrid[1:spec_cupe.shape[0]]:
  spec_cube[i-1] = (spec_cube[i]-spec_cube[i-1])/(scale_array[i]-scale_array[i-1])
  map += spec_cube[i-1]
map /= (spec_cube.shape[0]-1) 
```

我的脚本从 420 秒变成了 9.66 秒！

# c# - 从ListBox拖动项目时ALT键和鼠标左键组合？

> ID：10924706
> 
> 赞同：0
> 
> 时间：2012-06-07T02:00:38.207
> 
> 标签：c#, .net, visual-studio-2010

这是我的 ListBox MouseMove 事件的代码：

```
private void lbxItems_MouseMove(object sender, MouseEventArgs e)
{
    if (e.Button == MouseButtons.Left) //this one is good
    {
        lbxItems.DoDragDrop("Copy Text 1", DragDropEffects.Copy);
    }
    else if (Control.ModifierKeys == Keys.Alt && e.Button == MouseButtons.Left) //this desn't work
    {
        lbxItems.DoDragDrop("Copy Text 2", DragDropEffects.Copy);
    }
} 
```

`e.Button == MouseButtons.Left`单独的条件可以正常工作，但不适用于`Control.ModifierKeys == Keys.Alt`. 我想知道 ListBox 控件是否可以识别 ALT 键 + 鼠标左键组合。有人可以建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T02:42:10.277

嗯，好吧，我想我在这里找到了一个修复方法，这很容易。

为了使它起作用，我只需`Control.ModifierKeys == Keys.Alt`要先评估条件并放入`e.Button == MouseButtons.Left`语句`else if`。因此，总是首先检查 ALT + 鼠标左键。

```
private void lbxItems_MouseMove(object sender, MouseEventArgs e)
{
    if (Control.ModifierKeys == Keys.Alt && e.Button == MouseButtons.Left) 
    {
        lbxItems.DoDragDrop("Copy Text 1", DragDropEffects.Copy);
    }
    else if (e.Button == MouseButtons.Left) 
    {
        lbxItems.DoDragDrop("Copy Text 2", DragDropEffects.Copy);
    }
} 
```

另外，我必须指出它不是`Control.ModifierKeys == Keys.Alt`没有工作，只是原始代码没有机会运行`else if`语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T02:26:38.787

你不能像你那样做。您需要先使用相关的按键处理程序捕获 Alt 键被按下并将其存储在某个共享变量中，然后当鼠标移动时，您可以通过访问共享变量来检查是否按下了 alt 键。

# c# - 静态值与传递参数

> ID：10924708
> 
> 赞同：2
> 
> 时间：2012-06-07T02:00:58.720
> 
> 标签：c#

我有一种情况，我必须通过`List<>`2-3 个独立的班级上下班。现在我主要使用参数传递列表，因此所有 3 个类都获取列表。我应该使用静态列表而不是在所有类中传递列表来简化代码`Class23.ListObjects.Add()`，然后在操作完成后释放静态值，以便下一个操作从空列表开始。现在感觉参数越来越多，如果列表具有正确的值，我会感到困惑，忘记将列表传递给下一个类，等等。你怎么看？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T02:08:10.863

我建议您创建一个新类，该类代表各种类执行的组合操作（如果您愿意，可以使用“上下文”类）。执行操作所需的值可以作为实例变量保存在该上下文中，以及用于执行工作的类的实例。

这样，您可以避免传递东西（随着代码的发展，这可能会变得有些难看），同时避免使用“全局”变量。数据正好在它需要的范围内，并在整体操作完成时进行处置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T02:03:02.870

在编码实践中，拥有静态或全局变量是不好的，并且通过参数被认为是好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T02:08:19.600

如果使用静态参数，如果在代码中的多个位置使用这些函数，尤其是在涉及线程的情况下，则存在获取损坏数据的风险。

例如，假设 A 类需要使用作用于静态列表的函数。在这些函数完成之前，B 类也尝试使用它们，导致列表从两个调用中获取数据，因为在两种情况下都使用相同的静态列表。

# clojure - Clojure: Marginalia: 多页文档

> ID：10924709
> 
> 赞同：1
> 
> 时间：2012-06-07T02:01:03.120
> 
> 标签：clojure, marginalia

## 问题

```
(run-marginalia {}) 
```

生成单个文件 docs/uberdoc.html

我希望它在 docs/* 中生成许多文件，每个 *.clj 文件一个

## 动机：

我真的很喜欢边缘化。我最近开始使用它，这让我*想写*文档，这听起来很不可能。

但是，我遇到的问题是，每当我编写文档、刷新和重新加载 uberdoc.html 时，我都会丢失之前查看的文档部分。因此，我更喜欢一个系统，其中每个 *.clj 文件都位于 *.html 文件中以供文档使用。这可能与边缘 0.7.0 吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:01:04.183

在以前的版本中有一个多文档功能，但在最新版本中它不在命令行中。但是，通过运行类似的东西，`(multidoc! "./docs" (find-processable-file-paths "./src" #"\.clj$") {})`你应该得到单个文件的目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T02:22:13.547

[https://github.com/weavejester/codox](https://github.com/weavejester/codox)是另一个 Clojure 文档工具（它提供了单独的页面 - 请参阅[http://number23.github.com/commons-lib/](http://number23.github.com/commons-lib/)）

# mysql - MySQL 按计算字段分组

> ID：10924710
> 
> 赞同：0
> 
> 时间：2012-06-07T02:01:08.080
> 
> 标签：mysql

我有会员必须为其会员付费。我存储：付款日期和会员期限（他们可以支付 1 个月或数个月）。

现在我想知道哪些付款过期或即将过期。

我的逻辑是：获取每个会员的到期日期（最后付款日期 + 会员期限），然后查看每个会员的最高价值。

这是我的查询，但我确实想解释我的推理，因为您可能想对此提出质疑，甚至质疑数据库的格式（但请不要让我存储到期日期）。

```
SELECT tbl.company AS company,
       MAX(ADDDATE( paydate, INTERVAL paylength MONTH ))) AS expiration,
       tbl.id
FROM tblPayments
JOIN tbl ON tblPayments.comp_id = tbl.id
GROUP BY expiration
ORDER BY expiration ASC 
```

我读过按计算字段分组可能是不可能的，但我对 MySQL 的了解还不足以理解解决方法。我很感激你能提供的任何帮助！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T02:15:33.520

您正在按组的汇总结果进行分组，这是不可能的，也不是您想要的。根据您的解释，我认为您正在尝试这样做

```
SELECT 
    tbl.company AS company, 
    MAX(ADDDATE( paydate, INTERVAL paylength MONTH )) AS expiration,
    tbl.id 
FROM tblPayments 
JOIN tbl 
    ON tblPayments.comp_id = tbl.id 
GROUP BY tbl.company , tbl.id 
HAVING expiration < NOW()
ORDER BY expiration ASC 
```

@dleiftah 提出了一个很好的观点，尽管 MySQL 似乎允许您使用别名，但您不能总是使用别名，`GROUP BY`而 MSSQL 从不这样做。具体什么时候忘记了...

# c# - 在 C# 中使用 RotateFlip 旋转图像

> ID：10924711
> 
> 赞同：3
> 
> 时间：2012-06-07T02:01:09.347
> 
> 标签：c#

我有这段代码可以在 C# Windows 窗体应用程序的 if 循环中旋转图像，但窗体在窗体输出中不显示任何内容。

任何人都可以帮忙吗？

```
this.splitContainer1.Panel2.Controls.Add(PictureBox1);
PictureBox1.SizeMode = PictureBoxSizeMode.AutoSize;
PictureBox1.Image = bitmap; //Image.FromFile(@"C:\image.jpg");
PictureBox1.SizeMode = PictureBoxSizeMode.AutoSize;
PictureBox1.Image = (Image)(RotateImg(bitmap, 30.0f, Color.Transparent)); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T08:51:24.453

if you need to rotate an image on common angles you can use RotateFlip method with ease. Please see my sample code:

```
string fileName = "somefile.png";
System.Drawing.Imaging.ImageFormat imageFormat = System.Drawing.Imaging.ImageFormat.Png;
Bitmap bitmap =(Bitmap)Bitmap.FromFile(fileName );
//this will rotate image to the left...
bitmap.RotateFlip(RotateFlipType.Rotate270FlipNone);
//lets save result back to file...
bitmap.Save(fileName, imageFormat);
bitmap.Dispose(); 
```

That's all, hope it helps.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-27T10:28:04.273

尝试这个：

```
PictureBox1.Images.RotateFlip(RotateFlipType.Rotate180FlipX);
PictureBox1.Refresh(); 
```

# html - 如何在 HTML 表单上上传多个文件

> ID：10924712
> 
> 赞同：1
> 
> 时间：2012-06-07T02:01:10.443
> 
> 标签：html, post, file-upload

我原以为这会非常容易在互联网上找到答案，但显然不是。

在 HTML 页面上，我希望允许用户选择多个文件并将它们上传到我的服务器。具体上下文是用户需要选择简历文件和封面来申请工作。

重要注意事项：

*   我对 HTML5 或 Flash 或棘手的解决方案不感兴趣 - 只是基本问题，是否可以在普通旧浏览器中使用普通旧 HTML。
*   我可以有多个上传字段和多个按钮来选择每个文件。
*   一个提交按钮需要同时提交它们。
*   需要支持IE6。

这可能吗？似乎很难找到一个直接的答案。

例如，这样的工作吗？（如果我没有注明出处，我是从网上某处抓取的，抱歉）

```
<form action="/py/uploadfile" method="post" enctype="multipart/form-data" name="form1" id="form1">
    <label>upload file<input type="file" name="file[]" id="file1" /></label>
    <label>upload file<input type="file" name="file[]" id="file2" /></label>
    <label>upload file<input type="file" name="file[]" id="file3" /></label>
    <label><input type="submit" name="button" id="button" value="Submit" /></label>
</form> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T02:03:45.320

只需添加另一个`input[type="file"]`，并确保它具有不同的名称：

```
<form action="...">
    ...other fields...
    <input type="file" name="coverLetter" />
    <input type="file" name="resume" />
    ...other fields...
    <input type="submit" value="send" />
</form> 
```

# c# - 在 C# 中将 SQL 行数据分离到多个文本框中

> ID：10924714
> 
> 赞同：0
> 
> 时间：2012-06-07T02:01:19.517
> 
> 标签：c#, sql, visual-studio-2010, data-binding, delimiter

我正在尝试将一行 SQL 数字加载到多个文本框中。基本上，该行包含用“;”分隔的数字。我怎样才能得到它，以便每个数字在用“;”分隔时 是在自己的文本框中吗？

```
 SqlConnection conn = new SqlConnection("Data Source=LAURA-PC;Initial Catalog=Sudoku;Integrated Security=True");
        conn.Open();

        SqlCommand command = conn.CreateCommand();
        command.CommandText = "Select puzzle from Puzzle";
        command.CommandType = CommandType.Text;

        SqlDataReader reader = command.ExecuteReader();
        if (reader.Read())
        {
            textBox1.Text = reader.GetValue(0).ToString();
            textBox2?
            textbox3?
        }
        conn.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T02:06:16.477

假设该`puzzle`列具有分号分隔的数字：

```
...
SqlDataReader reader = command.ExecuteReader();
if (reader.Read())
{
    string[] tokens = ((string)reader[0]).Split(';');

    textBox1.Text = tokens[0];
    textBox2.Text = tokens[1];
    // etc...
}
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T02:13:46.543

假设您拥有与 TextBoxes 相同数量（或更少）的数字，您可以将 TextBoxes 放入一个数组并使用以下代码：

```
...
SqlDataReader reader = command.ExecuteReader();
if (reader.Read())
{
    string[] tokens = reader.GetString(0).Split(';');
    for(int i = 0; i < tokens.Length; i++)
    {
        textBoxes[i].Text = tokens[i];
    }
}
... 
```

# session - 创建自定义tomcat会话管理器而不将jar放在CATALINA_HOME目录中？

> ID：10924715
> 
> 赞同：5
> 
> 时间：2012-06-07T02:01:27.130
> 
> 标签：session, tomcat, context.xml

我正在为 Tomcat 开发一个自定义会话管理器，并且我得到了一个警告，我必须将 jar（以及所有相关的 jar）放在 CATALINA_HOME/lib 目录中，否则我会得到一个 noclassdef found 异常，即使这些类位于 WEB-INF/lib 目录中。

有什么方法可以强制 tomcat 在加载会话管理器时查看 web 应用程序 lib 目录？将它放在 lib 目录中很容易出错（因为您必须记住在新系统上升级和/或安装时复制 jar）并使 jar 的开发更加困难。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T16:14:50.253

从 Tomcat 7.0.27 开始，`META-INF/context.xml`文件中的 <Manager> 元素由 commons-digester 处理，并且有效的 ClassLoader 设置为加载 ContextConfig 类的那个——它牢牢地驻留在 Tomcat 的服务器 ClassLoader 中，它位于外部可以访问 webapp 类的任何东西的 ClassLoading 链。

因此，如果不修改 Tomcat 源，就无法`Manager`从您的 webapp 中加载您的内容。考虑加入 Tomcat 用户的邮件列表以讨论此类功能。

**编辑 2015-067-01**

如果你想`ClassLoader`为你的 web 应用程序指定一个，你需要使用你的`<Loader>`元素：http `<Context>`: [//tomcat.apache.org/tomcat-8.0-doc/config/loader.html](http://tomcat.apache.org/tomcat-8.0-doc/config/loader.html)

# javascript - 使用 html5 持久化文件引用

> ID：10924719
> 
> 赞同：5
> 
> 时间：2012-06-07T02:01:39.040
> 
> 标签：javascript, html, filereader

我正在尝试从本地文件系统播放媒体文件。用户现在通过“输入”选择一个文件并播放它。我希望保留该文件引用，以便当用户下次访问时，我应该能够告诉他/她他/她之前玩过多少次等等，

我应该从服务器下载文件引用或将其存储在本地..任何想法如何执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T02:47:06.810

`IndexedDB`您可以使用或将音频或视频的信息存储到客户端`localStorage`。本地存储更易于使用 IMO：

```
var obj = {
        "timestamp": new Date(),
        "title": "Blah Blah",
        "Performer": "Lady Blahblah"
    };

localStorage["previous"] = JSON.stringify(obj); 
```

但请注意，您将无法获得文件的完整路径，这会阻止您下次播放相同的文件。一种可能的解决方案是将文件存储在 中`Base-64`，然后直接将其放入`<video>`or `<audio>`，我正在使用这种方法将文件存储在我制作的 Google Chrome 扩展程序中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T02:48:38.900

是否有任何理由需要存储文件本身？从我读到的内容听起来你只是希望能够记录它的播放次数。这可以通过对文件进行哈希处理，然后将您的计数与文件的哈希相关联，而不是将文件本身与 localstorage 相关联来实现。

我在 google 上找到的某人使用 javascript md5 实现的简短示例包含在评论中。

[http://jsfiddle.net/influenztial/b3b2V/2/](http://jsfiddle.net/influenztial/b3b2V/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T02:39:08.050

您可以做的是将 user.recent_files （只是名称）存储在数据库中，并进行一些汇总计算以显示他之前查看过多少次。

您不能做的是让他单击以前读取的文件的链接以再次阅读它，我的意思是仅使用 HTML5。

Rgds。

# java - htmlcleaner 只抓取第一个 body 标签和子节点

> ID：10924722
> 
> 赞同：1
> 
> 时间：2012-06-07T02:01:59.630
> 
> 标签：java, htmlcleaner

我正在使用 java htmlcleaner，我希望只抓取第一个 body 标记及其所有子标记。我想省略 html、head、doctype 标签。

我见过nodeByXpath，但它似乎只适用于ant而不适用于java。有谁知道如何在java中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T10:43:27.227

当使用`nodeByXPath`命令行 arg 运行时，HtmlCleaner 评估整个文档，然后调用`evaluateXPath(...)`它。
所以不会有任何性能提升，您可以手动完成。

# vb.net - 卡在奇怪的堆栈溢出中

> ID：10924723
> 
> 赞同：1
> 
> 时间：2012-06-07T02:02:02.283
> 
> 标签：vb.net, visual-studio, stack-overflow

我正在用 Visual Basic .NET 编写这个程序来组织不同的数据字段，并且我正在通过应用程序设置使用配置文件槽来为用户存储数据。但是，我在`SlotSelect.vb`课堂上遇到了堆栈溢出错误。对于为什么会发生这种情况，我最好的合理猜测是我在下面的酱汁代码中使用了错误类型的变量容器，但我的困境是我不知道具体出了什么问题。

vshost 所说的导致溢出的代码是从我在 MSDN 和其他地方查找的一些代码中编写的，用于引用其他类中的对象，我尝试使用它的其他变体来查看它是否有任何不同. 到目前为止，没有任何效果，并且它不会在编译时停止错误，更不用说在代码标记中了——它只有在完成构建后在调试中启动应用程序时才会捕获它。

这是酱汁代码`SlotSelect.vb`。由于大多数其他不相关的类（和这个类）都导致了`MainForm.vb`，我也将包括它的酱汁。vshost 给出的位置，因为错误位于`_MainForm`定义要`Flaglister.MainForm`在 中使用的变量的行上`SlotSelect.vb`。

**插槽选择.vb**

```
Public Class SlotSelect

    ' Class variables
    Private _MainForm As Flaglister.MainForm = New Flaglister.MainForm
    Private _SaveSlot As Flaglister.SaveSlot = New Flaglister.SaveSlot
    Private _Misc As Flaglister.Misc = New Flaglister.Misc
    Private _FlagsTextBox As System.Windows.Forms.TextBox = Flaglister.MainForm.FlagsTextBox
    Private _VarsTextBox As System.Windows.Forms.TextBox = Flaglister.MainForm.VarsTextBox
    Private _HackNameTextBox As System.Windows.Forms.TextBox = Flaglister.MainForm.HackNameTextBox
    Private _RomCodeTextBox As System.Windows.Forms.TextBox = Flaglister.MainForm.RomCodeTextBox
    Private _NotesTextBox As System.Windows.Forms.TextBox = Flaglister.MainForm.NotesTextBox
    Private _ExpandedCheckBox As System.Windows.Forms.CheckBox = Flaglister.MainForm.ExpandedCheckBox

    ' Slot selection main execution subs
    Friend Sub _0()
        Try
            ' Disable FlagsTextBox
            _FlagsTextBox.DeselectAll()
            _FlagsTextBox.ClearUndo()
            _FlagsTextBox.Clear()
            _FlagsTextBox.Enabled = False
            ' Disable VarsTextBox
            _VarsTextBox.DeselectAll()
            _VarsTextBox.ClearUndo()
            _VarsTextBox.Clear()
            _VarsTextBox.Enabled = False
            ' Disable HackNameTextBox
            _HackNameTextBox.DeselectAll()
            _HackNameTextBox.ClearUndo()
            _HackNameTextBox.Clear()
            _HackNameTextBox.Enabled = False
            ' Disable RomCodeTextBox
            _RomCodeTextBox.DeselectAll()
            _RomCodeTextBox.ClearUndo()
            _RomCodeTextBox.Clear()
            _RomCodeTextBox.Enabled = False
            ' Disable NotesTextBox
            _NotesTextBox.DeselectAll()
            _NotesTextBox.ClearUndo()
            _NotesTextBox.Clear()
            _NotesTextBox.Enabled = False
        Catch
            Call _Misc.ErrorClose()
        End Try
    End Sub
    Friend Sub _1()
        Try
            ' Load flaglist
            _FlagsTextBox.DeselectAll()
            _FlagsTextBox.ClearUndo()
            _FlagsTextBox.Clear()
            _FlagsTextBox.Enabled = True
            _FlagsTextBox.Text = My.Settings.Flaglist_1
            ' Load varlist
            _VarsTextBox.DeselectAll()
            _VarsTextBox.ClearUndo()
            _VarsTextBox.Clear()
            _VarsTextBox.Enabled = True
            _VarsTextBox.Text = My.Settings.Varlist_1
            ' Load project name
            _HackNameTextBox.DeselectAll()
            _HackNameTextBox.ClearUndo()
            _HackNameTextBox.Clear()
            _HackNameTextBox.Enabled = True
            _HackNameTextBox.Text = My.Settings.Hackname_1
            ' Load ROM codename
            _RomCodeTextBox.DeselectAll()
            _RomCodeTextBox.ClearUndo()
            _RomCodeTextBox.Clear()
            _RomCodeTextBox.Enabled = True
            _RomCodeTextBox.Text = My.Settings.Romcode_1
            ' Load other notes
            _NotesTextBox.DeselectAll()
            _NotesTextBox.ClearUndo()
            _NotesTextBox.Clear()
            _NotesTextBox.Enabled = True
            _NotesTextBox.Text = My.Settings.Notes_1
        Catch
            Call _Misc.ErrorClose()
        End Try
    End Sub
    Friend Sub _2()
        Try
            ' Load flaglist
            _FlagsTextBox.DeselectAll()
            _FlagsTextBox.ClearUndo()
            _FlagsTextBox.Clear()
            _FlagsTextBox.Enabled = True
            _FlagsTextBox.Text = My.Settings.Flaglist_2
            ' Load varlist
            _VarsTextBox.DeselectAll()
            _VarsTextBox.ClearUndo()
            _VarsTextBox.Clear()
            _VarsTextBox.Enabled = True
            _VarsTextBox.Text = My.Settings.Varlist_2
            ' Load project name
            _HackNameTextBox.DeselectAll()
            _HackNameTextBox.ClearUndo()
            _HackNameTextBox.Clear()
            _HackNameTextBox.Enabled = True
            _HackNameTextBox.Text = My.Settings.Hackname_2
            ' Load ROM codename
            _RomCodeTextBox.DeselectAll()
            _RomCodeTextBox.ClearUndo()
            _RomCodeTextBox.Clear()
            _RomCodeTextBox.Enabled = True
            _RomCodeTextBox.Text = My.Settings.Romcode_2
            ' Load other notes
            _NotesTextBox.DeselectAll()
            _NotesTextBox.ClearUndo()
            _NotesTextBox.Clear()
            _NotesTextBox.Enabled = True
            _NotesTextBox.Text = My.Settings.Notes_2
        Catch
            Call _Misc.ErrorClose()
        End Try
    End Sub
    Friend Sub _3()
        Try
            ' Load flaglist
            _FlagsTextBox.DeselectAll()
            _FlagsTextBox.ClearUndo()
            _FlagsTextBox.Clear()
            _FlagsTextBox.Enabled = True
            _FlagsTextBox.Text = My.Settings.Flaglist_3
            ' Load varlist
            _VarsTextBox.DeselectAll()
            _VarsTextBox.ClearUndo()
            _VarsTextBox.Clear()
            _VarsTextBox.Enabled = True
            _VarsTextBox.Text = My.Settings.Varlist_3
            ' Load project name
            _HackNameTextBox.DeselectAll()
            _HackNameTextBox.ClearUndo()
            _HackNameTextBox.Clear()
            _HackNameTextBox.Enabled = True
            _HackNameTextBox.Text = My.Settings.Hackname_3
            ' Load ROM codename
            _RomCodeTextBox.DeselectAll()
            _RomCodeTextBox.ClearUndo()
            _RomCodeTextBox.Clear()
            _RomCodeTextBox.Enabled = True
            _RomCodeTextBox.Text = My.Settings.Romcode_3
            ' Load other notes
            _NotesTextBox.DeselectAll()
            _NotesTextBox.ClearUndo()
            _NotesTextBox.Clear()
            _NotesTextBox.Enabled = True
            _NotesTextBox.Text = My.Settings.Notes_3
        Catch
            Call _Misc.ErrorClose()
        End Try
    End Sub

    ' Save all slots
    Friend Sub SlotSaveAll()
        Call _SaveSlot.FlaglistSave()
        Call _SaveSlot.VarlistSave()
        Call _SaveSlot.HacknameSave()
        Call _SaveSlot.RomcodeSave()
        Call _SaveSlot.NotesSave()
        Call _SaveSlot.ExpandedSave()
    End Sub
End Class 
```

**主窗体.vb**

```
Public Class MainForm

    ' Class-level variables
    Private _SlotSelect As New Flaglister.SlotSelect
    Private _SaveSlot As New Flaglister.SaveSlot
    Private _Misc As New Flaglister.Misc

    ' Startup/Shutdown events
    Sub MainForm_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        If Slot0RadioButton.Checked = True Then
            Call _SlotSelect._0()
        End If
    End Sub
    Sub MainForm_Deactivate(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Deactivate
        My.Settings.Save()
        Me.Close()
    End Sub

    ' Form object events
    Private Sub Slot0RadioButton_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Slot0RadioButton.CheckedChanged
        If Slot0RadioButton.Checked = True Then
            Call _SlotSelect._0()
        End If
    End Sub
    Private Sub Slot1RadioButton_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Slot1RadioButton.CheckedChanged
        If Slot1RadioButton.Checked = True Then
            Call _SlotSelect._1()
        End If
    End Sub
    Private Sub Slot2RadioButton_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Slot2RadioButton.CheckedChanged
        If Slot2RadioButton.Checked = True Then
            Call _SlotSelect._2()
        End If
    End Sub
    Private Sub Slot3RadioButton_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Slot3RadioButton.CheckedChanged
        If Slot3RadioButton.Checked = True Then
            Call _SlotSelect._3()
        End If
    End Sub
    Private Sub FlagsTextBox_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles FlagsTextBox.TextChanged
        Call _SaveSlot.FlaglistSave()
    End Sub
    Private Sub VarsTextBox_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles VarsTextBox.TextChanged
        Call _SaveSlot.VarlistSave()
    End Sub
    Private Sub HackNameTextBox_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles HackNameTextBox.TextChanged
        Call _SaveSlot.HacknameSave()
    End Sub
    Private Sub RomCodeTextBox_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles RomCodeTextBox.TextChanged
        Call _SaveSlot.RomcodeSave()
    End Sub
    Private Sub NotesTextBox_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles NotesTextBox.TextChanged
        Call _SaveSlot.NotesSave()
    End Sub
    Private Sub ExpandedCheckBox_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ExpandedCheckBox.CheckedChanged
        Call _SaveSlot.ExpandedSave()
    End Sub
End Class 
```

代码中有什么问题？

这里有一些关于我和我的程序的额外细节。

**电脑**

> 系统：7 x64 w/ AMD Sempron
> 编译器：Microsoft Visual Basic 2010 Express

**应用**

> 框架：Microsoft .NET 3.5 版
> 根名称空间：Flaglister
> 程序集名称：Flaglister
> 应用程序类型：Windows 窗体应用程序

有时我想太多，所以如果答案对很多人来说是显而易见的而我没有看到，我很抱歉。

***编辑***

这是抛出错误时调用堆栈在其当前位置的屏幕截图，以及弹出错误框的另一个屏幕截图。我从来没有想过要添加这些。

![调用堆栈截图](../Images/0242b3433be4c41277a1a9b7d739f0b2.png)

![异常截图](../Images/2959ccf0f81190c2507371255f8f8fa5.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T02:48:02.100

这里的问题是递归初始化。`MainForm`包含：

```
Private _SlotSelect As New Flaglister.SlotSelect 
```

并`SlotSelect`包含：

```
Private _MainForm As Flaglister.MainForm = New Flaglister.MainForm 
```

他们不断调用对方的构造函数，导致你的堆栈溢出。您可以通过在的构造函数中`_MainForm`作为参数传入来解决此问题。`SlotSelect`像这样：

```
Public Class SlotSelect

    ' Class variables
    Private _MainForm As Flaglister.MainForm
    ' (truncated for space)

    Public Sub New(ByVal mainForm As Flaglister.MainForm)
        Me._MainForm = mainForm
    End Sub

    '... 
```

在 中，将当前实例`MainForm.vb`传递给构造函数：`SlotSelect`

```
Private _SlotSelect As New Flaglister.SlotSelect**(Me)**
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T02:48:33.727

我猜这是因为在您的课程中您正在声明和实例化 MainForm 的新实例

```
 Private _MainForm As Flaglister.MainForm = New Flaglister.MainForm 
```

然后在 MainForm 类中声明和实例化 SlotSelect 类的新实例

```
 Private _SlotSelect As New Flaglister.SlotSelect 
```

所以这两个类只是“反弹”来回创建彼此的新实例，最终给你堆栈溢出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T02:49:59.323

您处于无限循环中。

在 slotselect 你有

```
Private _MainForm As Flaglister.MainForm = New Flaglister.MainForm 
```

它创建一个新的主窗体，然后在 MainForm 你有

```
Private _SlotSelect As New Flaglister.SlotSelect 
```

它创建了一个新的 slotselect。

将一个对象设为父对象，将一个对象设为子对象，并在构造函数中传递父引用，例如

```
Class SlotSelect
  Private _MainForm As MainForm
  Sub New(mf as MainForm)
    _MainForm=mf
  End Sub
...
End Class 
```

# c#-4.0 - 从连接到网络的指纹考勤系统中检索数据

> ID：10924725
> 
> 赞同：0
> 
> 时间：2012-06-07T02:02:33.197
> 
> 标签：c#-4.0, network-programming, communication, device, biometrics

我目前正在为生物计量考勤系统创建应用程序，它将时间详细信息存储到自己的内存中。当前提供的从设备中检索数据的软件（delphi 应用程序）不能满足客户的需要，并且是中文的一半。

我的任务是从设备中检索数据。我是一个点网程序员，我对设备通信一无所知。我尝试了网络数据包嗅探器来了解发送的数据包。但这并没有提供太多信息。

任何正确的方向将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T08:19:51.887

你可以试试“指纹1.0”软件。可在此链接上找到。它可以免费下载。 [http://fingerprint-attendance-system.fyxm.net/](http://fingerprint-attendance-system.fyxm.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:51:23.800

i just found two SDK to work with network devices.

Just as i told you i have an ANVIZ EP300, but still couldn´t make it work with this SDK because is it in Visual Basic (old) and i work with C# 2010.

Just in case here is ANVIZ SDK

[http://www.microcom.com.ar/anviz/sdk.rar](http://www.microcom.com.ar/anviz/sdk.rar)

If someone can translate it to C# and make it work, i would be very happy :D

And i found Suprema Products SDK too, but i do not have a Suprema Device to test it

[http://www.fingerprint-it.com/Downloader.aspx?dir=Downloads/SDKs&file=BioStar%201.26%20SDK.zip](http://www.fingerprint-it.com/Downloader.aspx?dir=Downloads/SDKs&file=BioStar%201.26%20SDK.zip)

Just tell me the brand of your device and i will research too

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T19:46:28.477

我在同一个研究中，来自委内瑞拉，我刚刚发现了这个

[http://www.codeproject.com/Questions/125530/FingerPrint-machine.aspx](http://www.codeproject.com/Questions/125530/FingerPrint-machine.aspx)

我现在正在测试从 Marchine 中获取数据，以便在我检查和分析数据时检索数据

如果我们保持联系互相帮助就好了

PD：对不起我的英语不好

# php - 如何删除 pctnl_fork() 添加的标头？

> ID：10924732
> 
> 赞同：0
> 
> 时间：2012-06-07T02:03:26.350
> 
> 标签：php, http-headers

我正在使用 pctnl_fork 将一项大型任务分解为多个进程，它运行良好，除了一件烦人的事情：由于某种原因，输出中嵌入了“Content-type：text/html”，而我所做的一切似乎都无法摆脱其中。

这是该问题的一个工作示例：

```
<?php
  ob_start();
  $pid = pcntl_fork();
  if ($pid == -1) {
     die('could not fork');
  } else if ($pid) {
     // we are the parent
     pcntl_wait($status); //Protect against Zombie children
  } else {
     $fh=fopen('/var/www/html/test.txt','w');fwrite($fh, time());fclose($fh);        
     exit(0);
  }

  header_remove();
  ob_end_clean();
  echo " done";
?> 
```

如果我省略 header_remove() 然后它输出

```
X-Powered-By: PHP/5.3.3 Content-type: text/html done 
```

使用 header_remote 它摆脱了 X-Powered-By 标头，但 Content-type 标头仍然存在：

```
Content-type: text/html done 
```

我把头发拉出来试图解决这个问题，但无济于事。我确信 ob_end_clean() 会修复它，但它没有。如果有人有任何建议，我将永远感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T02:31:43.650

不要`pcntl_fork()`在 Web 服务器环境中使用（例如 mod_php）。正如您所观察到的，它在 Web 服务器中运行时无法正常运行，因此在较新版本的 PHP 中，它在 CLI SAPI 之外不可用。

# shopify - 如何在 rails 3.2.2 中使用 shopify gem 更新变体价格？

> ID：10924734
> 
> 赞同：1
> 
> 时间：2012-06-07T02:03:46.613
> 
> 标签：shopify

Rails 3.2.2 应用，使用 github 上最新的 shopify gem。

我查看了 shopify google 组中建议切换 ShopifyAPI::Base 以使用 xml 的其他线程，但这没有任何效果。简单的脚本，更新产品的变体价格。这曾经可以工作，不确定何时停止工作，但脚本与旧的工作版本相同。

本质上，如果我设置一个变体价格和比较价格，然后保存，shopify 不会反映变化。但是，该方法返回 true。最初，脚本最后只是简单地调用了 product.save，但我也尝试过单独保存变体，但没有运气。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T05:23:31.437

我无法重现该问题。

如果您向我们提供请求 ID，那么我们可以在日志中查找该请求。您可以在保存不起作用后使用以下代码获取请求 ID。

`ShopifyAPI::Base.connection.response['x-request-id']`

我可以告诉你的是：

*   您不需要使用 xml 格式（JSON 往往更快）
*   您应该能够保存对变体或产品的更改

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T18:39:49.180

这是 Shopify 中的一个错误，现已修复。

它通过 API 影响启用了库存管理的商店的产品更新。

请重新测试并确认已修复。

# regex - 需要匹配两个分隔符之间的任何字符串

> ID：10924743
> 
> 赞同：0
> 
> 时间：2012-06-07T02:04:56.597
> 
> 标签：regex

我需要一个正则表达式来匹配字符串的一部分。例如，在以下字符串中

```
Fault,10.224.2.3:4450,XX_XXX0039_XX.XX/0,AA,BBBBBB 
```

我想匹配整个字符串并提取`Fault,10.224.2.3:4450`和`AA,BBBBBB`. 但是，我想忽略`,XX_XXX0039_XX.XX/0,`.

请注意，要忽略的字符串包括分隔符、逗号 ( `,`)。要忽略的字符串可能包含以下字符：

```
./_0-9A-Za-z 
```

句点 ( `.`) 的位置不固定。我想忽略的其他模式示例是：

*   `,XX_XXX0039_XX.XX/0,`
*   `,XX_XX0039_XXXXX/1,`
*   `,X_XX0039_X/4,`

我在简单事件协调器中使用正则表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T02:25:34.177

(\w+,\d+.\d+.\d+.\d+:\d+).*?,(\w+,\w+)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T05:44:16.290

最好是避免你的分隔符`,`

正则表达式：

`[^,]+`

结果：

```
 [0] => XX_XXX0039_XX.XX/0
        [1] =>  
        [2] => XX_XX0039_XXXXX/1
        [3] =>  
        [4] => X_XX0039_X/4 
```

# php - 如何格式化这个文本文件

> ID：10924751
> 
> 赞同：1
> 
> 时间：2012-06-07T02:06:31.780
> 
> 标签：php, shell

我有一个包含这样内容的文本文件

```
 customer-1 Product-2
   customer-1 Product-3
   customer-1 Product-7
   customer-2 Product-20
   customer-2 Product-12
   ... 
```

我想格式化它

```
 customer-1 Product-2, Product-3, Product-7, Product-20
  customer-2 Product-20, Product-12
  ... 
```

如何在shell脚本或php中做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T02:11:31.790

将您的文件通过管道传输到此 awk 脚本。BOF 中会多出一行，如果需要删除，请使用“head”。

```
awk 'BEGIN { one = ""; } { if ( one != $1 ) { printf("\n%s %s",$1,$2); one = $1; } else { printf(" %s",$2); } } END { printf("\n"); }' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T02:12:44.900

使用 PHP：

1.  使用获取文本文件的内容`file_get_contents()`
2.  `explode()`每个换行符上的结果字符串`\n`
3.  循环遍历结果数组并`explode()`在每个空间上

 `然后，您会将数据加载到多维数组中，并可以循环将其转换为您需要的格式。

**添加代码示例（未测试）：**

```
$file = file_get_contents('../path/to/file.txt');
$rows = explode('\n', $file);

$customers = array();

foreach($rows as $row) {
    $rowPieces = explode(' ',$row);
    $customers[$rowPieces[0]][] = $rowPieces[1];
}

foreach($customers as $c => $products) {
    $customers[$c] = implode(', ',$products);
}

echo implode('\n', $customers); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T02:12:02.890

这就是你可以分解它的方式：

*   加载内容
*   每条线，找到客户和产品
*   对每个客户的产品进行分组
*   输出

例如：

```
// preg_match_all will find all "customer-" (digits) and "product-" (digits)
if (preg_match_all('/(customer-\d+)\s*(product-\d+)/i', $s, $matches, PREG_SET_ORDER)) {
        $purchases = array();
        foreach ($matches as $match) {
                // $match[1] contains customer id
                // $match[2] contains product id
                $purchases[$match[1]][] = $match[2];
        }
        // $purchases now contains a list of products, grouped by customer
        foreach ($purchases as $customer => $products) {
                echo $customer, ' ', join(', ', $products), PHP_EOL;
        }
} 
````

# java - 有什么好的hive插件教程吗？

> ID：10924753
> 
> 赞同：1
> 
> 时间：2012-06-07T02:06:59.803
> 
> 标签：java, plugins, hive

我正在寻找为 Apache Hive 编写一些插件。有没有人有好的起点或教程的建议？我做了一个谷歌搜索，但结果有点稀疏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T23:45:56.543

当我开始研究 Hive 时，我很喜欢这个视频：

[http://vimeo.com/29732341](http://vimeo.com/29732341)

关于它的 Facebook 文章也是一个很好的信息来源：

[http://www.vldb.org/pvldb/2/vldb09-938.pdf](http://www.vldb.org/pvldb/2/vldb09-938.pdf)

另外，您可以查看我在这里所做的介绍：

[http://girlincomputerscience.blogspot.com.br/2012/10/apache-hive.html](http://girlincomputerscience.blogspot.com.br/2012/10/apache-hive.html)

# html - 为什么我的 div 不排队？

> ID：10924755
> 
> 赞同：1
> 
> 时间：2012-06-07T02:07:19.350
> 
> 标签：html, css

div 在我的[JsFiddle](http://jsfiddle.net/Abijah/pv88G/)上完美排列，但它们在我的[网站](http://www.buymaengdakratom.com/)上不起作用。

我相信问题出在我的联系表格上，因为当我将联系表格移到两个 div 下方时，它们会正确排列。

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T02:10:36.143

您没有清除`<div class="form">`元素中的浮动。

您的问题的两个很好的解决方案是添加`overflow: hidden`到`.form`或添加`clear: both`到`#text`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T02:15:10.707

它适用于 jsFiddle，因为它们的重置 CSS ：

```
body, div, dl, dt, dd, ul, ol, li, h1, h2, h3, h4, h5, h6, pre, form, fieldset, input, textarea, p, blockquote, th, td {
   margin: 0;
   padding: 0;
} 
```

在您的情况下，这是因为 h2 的高度大于该行的其余部分。这导致您的蓝色 div 从 h2 的末尾开始。

这应该够了吧 ：

```
.form h2 {
  font-size: 26px;
  font-weight: 200;
  text-shadow: 1px 1px 1px #CFCFCF;
  color: #999;
  float: left;
  padding-left: 20px;
  margin: 20px 0;
} 
```

PS：@Wex 的答案更干净；）

# r - 矢量版本/矢量化 R 中的等于循环

> ID：10924758
> 
> 赞同：1
> 
> 时间：2012-06-07T02:07:43.437
> 
> 标签：r, loops, equals-operator

我有一个值向量，称为 X，还有一个数据框，称为 dat.fram。我想运行“grep”或“which”之类的东西来查找与 X 的每个元素匹配的 dat.fram[,3] 的所有索引。

这是我下面的非常低效的 for 循环。请注意，X 中有许多观察值，并且“match.ind”的每个成员都可以有零个或多个匹配项。此外，dat.fram 有超过 100 万个观测值。有没有办法在 R 中使用向量函数来提高这个过程的效率？

最终，我需要一个列表，因为我会将列表传递给另一个函数，该函数将从 dat.fram 检索适当的值。

代码：

```
match.ind=list()

for(i in 1:150000){
    match.ind[[i]]=which(dat.fram[,3]==X[i])
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T03:20:31.200

**更新：**

好吧，哇，我刚刚找到了一个很棒的方法……它真的很漂亮。想知道它在其他情况下是否有用......？！

```
### define v as a sample column of data - you should define v to be 
### the column in the data frame you mentioned (data.fram[,3]) 

v = sample(1:150000, 1500000, rep=TRUE)

### now here's the trick: concatenate the indices for each possible value of v,
### to form mybiglist - the rownames of mybiglist give you the possible values
### of v, and the values in mybiglist give you the index points

mybiglist = tapply(seq_along(v),v,c)

### now you just want the parts of this that intersect with X... again I'll
### generate a random X but use whatever X you need to

X = sample(1:200000, 150000)
mylist = mybiglist[which(names(mybiglist)%in%X)] 
```

就是这样！作为检查，让我们看一下 mylist 的前 3 行：

```
> mylist[1:3]

$`1`
[1]  401143  494448  703954  757808 1364904 1485811

$`2`
[1]  230769  332970  389601  582724  804046  997184 1080412 1169588 1310105

$`4`
[1]  149021  282361  289661  456147  774672  944760  969734 1043875 1226377 
```

在 3 处有一个间隙，因为 3 没有出现在 X 中（即使它出现在 v 中）。针对 4 列出的数字是 v 中出现 4 的索引点：

```
> which(X==3)
integer(0)

> which(v==3)
[1]  102194  424873  468660  593570  713547  769309  786156  828021  870796  
883932 1036943 1246745 1381907 1437148

> which(v==4)
[1]  149021  282361  289661  456147  774672  944760  969734 1043875 1226377 
```

最后，值得注意的是，出现在 X 中但不在 v 中的值不会在列表中包含条目，但这大概是您想要的，因为它们是 NULL！

**额外说明：**您可以使用下面的代码为不在 v 中的 X 的每个成员创建一个 NA 条目...

```
blanks = sort(setdiff(X,names(mylist)))
mylist_extras = rep(list(NA),length(blanks))
names(mylist_extras) = blanks
mylist_all = c(mylist,mylist_extras)
mylist_all = mylist_all[order(as.numeric(names(mylist_all)))] 
```

相当不言自明：mylist_extras 是一个包含您需要的所有其他列表内容的列表（名称是 X 的值，不在名称（mylist）中，并且列表中的实际条目只是 NA）。最后两行首先合并 mylist 和 mylist_extras，然后执行重新排序，使 mylist_all 中的名称按数字顺序排列。然后，这些名称应该与向量 X 中的（唯一）值完全匹配。

干杯! :)

* * *

下面的原始帖子......显然被上面的帖子取代了！

这是一个带有 tapply 的玩具示例，它可能运行得更快……我将 X 和 d 设置得相对较小，这样你就可以看到发生了什么：

```
X = 3:7
n = 100
d = data.frame(a = sample(1:10,n,rep=TRUE), b = sample(1:10,n,rep=TRUE), 
               c = sample(1:10,n,rep=TRUE), stringsAsFactors = FALSE)

tapply(X,X,function(x) {which(d[,3]==x)}) 
```

# .net - MSXML 和 .NET - 内存使用

> ID：10924767
> 
> 赞同：1
> 
> 时间：2012-06-07T02:08:44.047
> 
> 标签：.net, msxml

我一直在对供应商编写的生产 Web 应用程序 (.NET 4) 进行故障排除。

在过去的几周里，我们在这个网站上遇到了一些速度问题。

最初，重点一直放在数据库方面。现在我觉得排除这部分方程式很舒服......我今天花了很多时间调试 Web 应用程序，看看实际的速度问题来自哪里。

我发现，在 Web 应用程序的这个特定部分中，它会打开一个新的 Internet Explorer 窗口以显示从数据库返回的大量 XML 数据。

在查看了代码并使用调试器试图弄清楚发生了什么之后......这是我发现的：

当这个特定页面上的代码完成填充所有内容时，iexplore 进程拥有一个 692,044K 的私有工作集。这似乎是 msxml3.dll 的许多进程中 activex 控件的结果。

经过一番研究，我发现了这篇微软文章： http: [//support.microsoft.com/ ?scid=kb%3Ben-us%3B815112&x=15&y=14](http://support.microsoft.com/?scid=kb%3Ben-us%3B815112&x=15&y=14)

它指出：“Microsoft 不支持在 .NET 应用程序中使用 MSXML（Microsoft 基于 COM 的 XML 解析器）。MSXML 使用与 .NET Framework 不兼容的线程模型和垃圾收集机制。在 .NET 应用程序中使用 MSXML通过 COM 互操作性可能会导致难以调试的意外问题。Microsoft 不建议或不支持在 .NET 代码中直接实例化和使用 MSXML 对象，也不建议或支持跨互操作边界编组 MSXML 接口指针。

这是创建 activex 对象的代码的一部分：

```
 var oTmp = new ActiveXObject("MSXML2.Domdocument");
                oTmp.loadXML('<plan_data>' + returnValue + '</plan_data>'); 
```

随着内存的增加，进程资源管理器会拾取几个加载到 iexplore 进程中的 MSXML3.dll。即使在关闭此特定窗口后，它似乎也无法正确清理自身，因为它仍然使用大约 220,000 K 的内存。（可能是由于上面列出的垃圾收集机制）。

所以，我的问题是......这里有熟悉这个的人可以就这是否看起来像是 Web 应用程序的一个设计不佳的部分提供一些建议吗？

我希望能够将此信息带给开发人员并让他们查看，但我希望有人可以先给我一些专业建议。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T02:17:22.423

每当您将大型 XML 结构处理到内存中然后对其进行操作时，这都是一个相当占用内存的操作。如果您确实需要将整个文档保存在内存中，请考虑使用命名空间中的 XDocument 替换您当前的[代码](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)`System.Xml.Linq`。

如果您只需要通过 XML 文档流式传输一次，在读取每个节点时执行操作，请查看[大型 XML 文档的流式传输转换](http://msdn.microsoft.com/en-us/library/bb387013.aspx)。

**编辑**

@Yahia 提出了一个我错过的好观点……这段代码似乎是在客户端执行的。是这样吗？如果是这样，为什么不让 IE（您的 ActiveX 只能在 IE 中运行，其他一些带有插件的浏览器；-）显示生成的 XML。如果 XML 不是太大，它会做得很好（尽管超过几 MB 需要很长时间来进行初始处理）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T02:18:53.720

您显示的代码似乎是在浏览器内执行的 JavaScript 代码...在这方面，提到的知识库文章不适用于您的情况...说：加载“大量 XML”是糟糕的设计进入浏览器 - 正如您所发现的那样。

解决方案可能是使用基于服务器的分页机制和/或在 UI 中提供一些过滤机制，这样就永远不会出现完整的 XML 需要在浏览器中的情况......

# r - as.data.frame 和 cbind 导致因子列

> ID：10924771
> 
> 赞同：1
> 
> 时间：2012-06-07T02:10:11.453
> 
> 标签：r

我有一个混合了整数、字符和字符串列的大 data.frame。我需要按数字列对 data.frame 进行排序。

当我将原始列合并到 data.frame 中时，所有列都更改为因子，包括排序所需的列。所以排序给出了类似的东西`1, 10, 100...`而不是`1, 2, 3...`

这是我的问题的一个例子。

```
a <- 1:10
b <- c(1,3,5,6,2,10,100,110,7,4)
c <- LETTERS[1:10]
d <- as.data.frame(cbind(a, b, c))  # I am using this construction
e <- d[with(d, order(b)), ] 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T03:03:01.287

其实你需要这样做：

```
d <- data.frame(a, b, c, stringsAsFactors=FALSE) 
```

最后一部分`stringsAsFactors=FALSE`防止将列`d$c`转换为因子。包含它，您的字符串将保留为字符串。

别忘了`stringsAsFactors=FALSE`——它会为你省去无尽的痛苦，相信我！

# firebase - 通过 REST API 优先推送到 Firebase

> ID：10924774
> 
> 赞同：6
> 
> 时间：2012-06-07T02:10:36.170
> 
> 标签：firebase

是否可以使用 REST API 将事件推送到列表（通过 HTTP POST）并指定被推送项目的优先级？也许作为我以某种方式发布的 JSON 中的一个字段？

像这样的东西（半伪代码）：

```
var myObj = {name: 'My Name', address: 'My Address'};
myObj['priority'] = 123;

$.post('http://demo.firebase.com/demo/testing.json', myObj); 
```

我可以使用本机 Javascript 库通过以下方式执行此操作，但这不使用 REST API：

```
var fb = new Firebase('http://demo.firebase.com/demo/testing');
var foo = fb.push({name: 'My Name', address: 'My Address'});
foo.setPriority(1); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-07T03:08:42.410

是的！要发布具有优先级的数据，您可以使用：

```
var myObj = JSON.stringify({name: 'My Name', address: 'My Address', '.priority': 123});
$.post('http://demo.firebase.com/demo/testing.json', myObj); 
```

如果您想发布具有优先级的原始值（例如“hello”），请使用：

```
var myObj = JSON.stringify({'.value': 'hello', '.priority': 123});
$.post('http://demo.firebase.com/demo/testing.json', myObj); 
```

# ruby-on-rails - Heroku 工具带更新失败

> ID：10924779
> 
> 赞同：7
> 
> 时间：2012-06-07T02:11:06.313
> 
> 标签：ruby-on-rails, ruby, macos, heroku

我正在尝试让 Heroku 工具带正常工作，这简直是一场噩梦。安装成功运行，但是当我运行 heroku update 时，我得到：

```
 $ heroku update 
         failed    
            !   undefined method `output_with_arrow' for #<Heroku::Command::Update:0x108da0120 @options={}, @args=[]> 
```

我已经尝试了一切，包括卸载我的 heroku gem 并通过以下方式删除工具带：

```
rm -rf /usr/loca/heroku
sudo rm /usr/bin/heroku 
```

这非常令人沮丧。我的环境是 Mac OS 10.7 Lion，并且：

```
$ ruby -v
ruby 1.9.3p125 (2012-02-16 revision 34643) [x86_64-darwin11.3.0]

$ which ruby
/Users/J/.rvm/rubies/ruby-1.9.3-p125/bin/ruby

$ heroku version
heroku-gem/2.19.2

$ which heroku
/usr/bin/heroku 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-11T22:11:09.190

Heroku 支持终于帮我解决了这个问题。长话短说，如果您遇到此问题，请运行：

```
$ rm -rf ~/.heroku/client 
```

[然后从http://toolbelt.heroku.com](http://toolbelt.heroku.com)重新安装 Heroku Toolbelt

如果您想要长答案，请点击此处：

> 似乎存在一些边缘情况，更新以一些不正确的数据结束，并且从中恢复有些困难。如果您首先删除 ~/.heroku/client 目录并随后运行安装程序，您应该会得到一个工作结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T02:14:35.607

Heroku toolbelt 很不错，但是 heroku_san 提供了所有这些以及更多。也许试一试？

[https://github.com/fastestforward/heroku_san](https://github.com/fastestforward/heroku_san)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-16T19:42:22.570

不要对卸载并重新安装它大惊小怪。只需删除 .heroku 文件夹，它就会开始正常工作......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-05T07:20:51.100

我在 Windows 上安装 Heroku 时遇到了一些问题。第一次在命令行安装并运行后，我得到了类似“更新到 5.1.4-cc”的信息，然后只是“恐慌：”。我找不到 '.heroku' 文件夹，经过一番折腾，在 {user}AppData\Local\heroku 中运行 heroku-cli.exe 解决了这个问题，然后一切都很好。直到今天早上 - 一天后 :) - 当它再次尝试更新到 5.1.5 时。我卸载了所有东西，重新安装，同样的问题 - 但这次有一个 '.heroku' 文件夹，并且删除了更新问题。

干杯

# javascript - 用于检查动态创建的复选框是否在动态创建的按钮单击时被选中的 Javascript

> ID：10924782
> 
> 赞同：0
> 
> 时间：2012-06-07T02:11:36.173
> 
> 标签：javascript

由于某些原因，我在网格中动态创建了一个复选框..

我也在同一个网格中动态创建一个按钮。

在这个特定的按钮上单击我需要检查复选框是否被选中。

如果选中复选框，我应该取消选中它。反之亦然。

是否有可能在javascript中实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T02:15:08.730

是的，有可能。

```
document.querySelector("button").addEventListener("click",function(){
    [].forEach.call(document.querySelectorAll('input[type="checkbox"]'),function(el){
        el.checked = !el.checked   //Invert
    });​
}, false); 
```

无论复选框是否是动态创建的，这段代码仍然可以工作，因为它甚至不需要任何`id`or `class`。

对于 IE：

```
document.getElementsByTagName("button")[0].addEventListener("click", function(){
    var ele = document.getElementsByTagName("input");
    for(var i=0;i<ele.length;i++){
        if(ele[i].type == "checkbox"){
            el.checked = !el.checked   //Invert
        }
    }
}); 
```

终极 jQuery 解决方案！

```
$("button").click(function(){
    $("input[type=checkbox]").each(function(){
        this.checked = !this.checked;
    }
}); 
```

**现场演示：http:** [//jsfiddle.net/DerekL/jfeAd/](http://jsfiddle.net/DerekL/jfeAd/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T03:15:49.247

您可以在特定上下文中收集复选框（网格中的一些 contianer）并将其选中属性设置为与当前相反的属性，因此：

```
var grid = <something that returns a reference to the grid>
var cb, cbs = grid.getElementsByTagName('input');

for (var i=0, iLen=cbs.length; i<iLen; i++) {
  cb = cbs[i];
  if (cb.type == 'checkbox') {
    cb.checked = !cb.checked;
  }
} 
```

# java - 使用 Java 将数据附加到 gzip 文件

> ID：10924783
> 
> 赞同：6
> 
> 时间：2012-06-07T02:11:50.283
> 
> 标签：java, gzip, append

我有一个可能很大（> 4GB）的日志文件，所以我正在考虑“即时压缩它”，这意味着我想直接在 gzip 文件的末尾插入文本（我想创建自己的文件附加程序用于登录）。是否可以将内容附加到现有的 gzip 文件中？看起来唯一的方法是用 GZIPInputStream 打开现有的，读取它并用 GZIPOutputStream 将数据写入一个新文件中，然后在新文件的末尾附加新的东西，然后我想删除旧的 gzip 并重命名旧名称的新名称...

我错了吗？更好的想法？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-07-04T21:59:14.360

传递`true`给`FileOutputStream`构造函数的第二个参数以获取附加模式。

```
File f = new File("out.gz");
OutputStream os = new GZIPOutputStream(new FileOutputStream(f, true)); // true for append
PrintWriter w = new PrintWriter(new OutputStreamWriter(os));
w.println("log message"); 
```

在我的示例数据中，这个压缩比默认压缩级别更好`gzip`。（比7级略好，但不如8级）。

```
$ ls -asl out.gz
88 -rw-r--r--  1 jem  staff  41859  5 Jul 07:42 out.gz
$ gunzip out.gz
$ gzip out
$ ls -asl out.gz
88 -rw-r--r--  1 jem  staff  42164  5 Jul 07:42 out.gz 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T03:08:34.767

gzip 格式允许连接到以前 gzip 的字节流，允许在解压缩时显示为单个字符串。

只需在末尾附加 gzip 数据即可。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-07T02:47:24.597

您可以查看 zlib 发行版中的示例，了解如何附加到 gzip 文件以及如何为日志条目制作一个不断增长的 gzip 文件。您可以从[zlib.net](http://zlib.net/)获取 zlib 发行版，并查看[examples/gzappend.c](https://github.com/madler/zlib/blob/master/examples/gzappend.c)、[examples/gzlog.c](https://github.com/madler/zlib/blob/master/examples/gzlog.c)和[examples/gzlog.h](https://github.com/madler/zlib/blob/master/examples/gzlog.h)。它们是用 C 编写的，并且可能需要 zlib 功能，而使用 zlib 的 java.util.zip 接口不容易获得这些功能。

这些方法不需要重新创建 gzip 文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T02:23:36.957

虽然我不知道针对此问题的特定于 Java 的解决方案，但有一些本机系统解决方案（假设您在 *nix 上并且不在乎它不是独立于平台的。）Unix / Linux SE 上的这个问题为此提供了一些想法（即压缩环回文件系统）：

[将文件添加/更新到现有的 tar.gz 存档？](https://unix.stackexchange.com/questions/13093/add-update-a-file-to-an-existing-tar-gz-archive)

# jpeg - libjpeg，在量化之后，但在熵编码之前访问 DCT 系数

> ID：10924789
> 
> 赞同：2
> 
> 时间：2012-06-07T02:12:34.597
> 
> 标签：jpeg, libjpeg, dct

我需要在量化之后访问 DCT 系数表（jpeg_write_scanlines？），但在霍夫曼熵编码之前以及将文件写入磁盘之前。libjpeg有可能吗？我知道作为一种解决方法，我可以将压缩文件写入磁盘并使用缓冲图像模式（jpeg_read_coefficients）将其读回，但我想避免走弯路。

# javascript - 内容脚本通知

> ID：10924790
> 
> 赞同：0
> 
> 时间：2012-06-07T02:12:42.980
> 
> 标签：javascript, html, google-chrome, google-chrome-extension

遇到麻烦，并没有在这里找到任何其他回答我所拥有的东西：/

显现：

```
{
   "name": "Item Sniper",
   "version": "1.0",
   "description": "Sniper",
   "browser_action": {
     "default_icon": "face.png",
     "default_title": "Sniper"
   },
   "background": {
    "scripts": ["background.js"]
   },
   "permissions": [
     "tabs",
     "notifications",
     "http://*/*"
   ]
} 
```

背景.js：

```
chrome.browserAction.onClicked.addListener(function(tab) {
  chrome.tabs.executeScript(null,{file: "buy.js"});
  }
  );
chrome.extension.onRequest.addListener(
  function(request, sender, sendResponse) {
    var notify = webkitNotifications.createNotification(
      'face.png',  // icon url - can be relative
      'Hello!',  // notification title
      'Oh hellow!'  // notification body text
    );
}); 
```

Buy.js [还有更多内容，但这是通知部分]：

```
chrome.extension.sendRequest({msg: "Sup?"}, function(response) { // optional callback -     gets response
    console.log(response.returnMsg);
}); 
```

我基本上希望内容脚本创建一个通知，但我不知道在坚持使用 js 脚本作为背景时是否有可能：/

感谢您的帮助，亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:39:11.040

[background 属性](http://code.google.com/chrome/extensions/background_pages.html)仅适用于使用[版本 2](http://code.google.com/chrome/extensions/manifestVersion.html)的清单。如果您想支持这一点，您需要将清单更新为以下内容；

```
{
   "name": "Item Sniper",
   "version": "1.0",
   "description": "Sniper",
   "manifest_version": 2,
   "minimum_chrome_version": "18",
   "browser_action": {
     "default_icon": "face.png",
     "default_title": "Sniper"
   },
   "background": {
    "scripts": ["background.js"]
   },
   "permissions": [
     "tabs",
     "notifications",
     "http://*/*"
   ]
} 
```

请注意，我还将`minimum_chrome_version`属性设置为 18，因为清单版本 2 只能在针对此版本的 Chrome 或更高版本时使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:33:07.880

我认为您错过了致电 notify.show(); 在你的 background.js

```
chrome.extension.onRequest.addListener(
  function(request, sender, sendResponse) {
    var notify = webkitNotifications.createNotification(
      'face.png',  // icon url - can be relative
      'Hello!',  // notification title
      'Oh hellow!'  // notification body text
    );
    notify.show();
}); 
```

[http://code.google.com/chrome/extensions/notifications.html#api](http://code.google.com/chrome/extensions/notifications.html#api)

# iphone - 空单元格的 UITableView 自定义分隔线

> ID：10924792
> 
> 赞同：1
> 
> 时间：2012-06-07T02:13:01.720
> 
> 标签：iphone, ios, uitableview, uiscrollview

我想制作应该使用您可以在提醒、ibooks、笔记应用程序中看到的技术的示例。 ![在此处输入图像描述](../Images/5b4d69ebb9aba843f340c07072ca1f84.png)

![在此处输入图像描述](../Images/252295dddea51dd8585a6badf9f091bf.png)

正如您在提醒应用程序分隔符中看到的那样： ![在此处输入图像描述](../Images/cda9e3403601dbe5f6a36d87c8eddc4d.png) ![在此处输入图像描述](../Images/88d648db975b3ab7e4d73b149c3d436e.png)

提醒有点线分隔线。
iBook 有书架隔板。
所以问题是如何在示例应用程序中制作自定义分隔符？即使没有为表格视图设置数据，也应该绘制分隔线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T02:21:28.760

为什么不尝试使用部分标题来为您提供自定义视图？在 .m 文件中，尝试：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView; {
  return [_cellArray count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section; {
  return 1;
}

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section; {
  CustomView * customView = [[CustomView alloc] init]; // This view is the custom view you want, like the dotted lines for example.
  return customView;
} 
```

至于始终显示它，您可能必须添加空白单元格才能获得此外观。希望有帮助！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T03:03:04.103

本质上，您实现

```
- (UITableViewCell *)tableView:(UITableView *)aTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

在该方法中，您实现了对最顶部、最底部和所有其他单元格的识别，并适当地设置它们的袋子圆形图像。

在看书架的情况下，我会实现最顶部，底部有一个架子，还有一个书架的顶部。对于所有其他人，我会实现一个标准的中间架子，而对于最底部的人来说，我会实现一个看起来更底部的架子。

因此，要实现我在 cellForRoatAtIndexPath 方法中谈论的内容，一些类似这样的代码应该可以工作

```
UIImage * rowBackground;
UIImage * selectionBackground;

if( 0 == [indexPath row] ){
    rowBackground       = [UIImage imageNamed:@"listBackingTop.png"];
    selectionBackground = [UIImage imageNamed:@"listBackingTopSelected.png"];
}else if( 217 == [indexPath row] ){
    rowBackground       = [UIImage imageNamed:@"listBackingBottom.png"];
    selectionBackground = [UIImage imageNamed:@"listBackingBottomSelected.png"];
}else{      
    rowBackground       = [UIImage imageNamed:@"listBackingMiddle.png"];
    selectionBackground = [UIImage imageNamed:@"listBackingMiddleSelected.png"];
}

((UIImageView *)cell.backgroundView).image         = rowBackground;
((UIImageView *)cell.selectedBackgroundView).image = selectionBackground; 
```

在我上面的例子中，217 是我的最大行号。

请记住，您控制有多少行，因此您可以根据需要为每行实施不同的支持。我已经完成了表格视图，其中我为偶数行做了蓝色，为奇数行做了橙色，并且仍然有圆形的顶部底部和方形中间看起来的单元格。

下面是一些代码，用于更复杂的设置，橙色和蓝色，顶部和底部单元格与中间单元格不同。还具有更动态的细胞。

```
UIImage * rowBackground;
UIImage * selectionBackground;
UIImage * accessoryImage;
UIImage * backingImage;

if( 0 == [indexPath row] ){
    rowBackground       = [UIImage imageNamed:@"listTop.png"];
    selectionBackground = [UIImage imageNamed:@"listTopDown.png"];
}else if( (amountRows - 1) == [indexPath row] ){

    if( 0 == ([indexPath row] % 2) ){
        rowBackground       = [UIImage imageNamed:@"listBottomOrange.png"];
        selectionBackground = [UIImage imageNamed:@"listBottomOrangeDown.png"];
    }else{
        rowBackground       = [UIImage imageNamed:@"listBottomBlue.png"];
        selectionBackground = [UIImage imageNamed:@"listBottomBlueDown.png"];
    }

}else{      
    if( 0 == ([indexPath row] % 2) ){
        rowBackground       = [UIImage imageNamed:@"listMiddleOrange.png"];
        selectionBackground = [UIImage imageNamed:@"listMiddleOrangeDown.png"];
    }else{
        rowBackground       = [UIImage imageNamed:@"listMiddleBlue.png"];
        selectionBackground = [UIImage imageNamed:@"listMiddleBlueDown.png"];
    }
}

accessoryImage = [UIImage imageNamed:@"arrow.png"];
accessory.image = accessoryImage;

backingImage = [UIImage imageNamed:@"imageBacking.png"];
imageBack.image = backingImage;

((UIImageView *)cell.backgroundView).image         = rowBackground;
cell.backgroundView.alpha                          = 0.9;
((UIImageView *)cell.selectedBackgroundView).image = selectionBackground;
cell.selectedBackgroundView.alpha                  = 0.5; 
```

我认为我试图提出的主要观点是不要将分离器与电池分开，只是让它成为电池背衬的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T23:07:58.573

需要`UIView`添加`backgroundColor`如下`patternWithColor:["your image with custom divider"]`contentSize `UITableView`。

```
CGSize size = _tableView.contentSize;
UIView *footerImageView = [[UIView alloc] initWithFrame:CGRectMake(0.0f, size.height + 50, 320.0f, 600.0f)];
footerImageView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"Shelf.png"]];
[_tableView addSubview:footerImageView]; 
```

# css - 使用 CSS 在选择类型输入中专门设置滚动条样式

> ID：10924800
> 
> 赞同：6
> 
> 时间：2012-06-07T02:14:37.567
> 
> 标签：css, forms, google-chrome, webkit

拥有一个使用 JQuery 和 CSS 设置样式的网站。使用表单收集搜索输入，但选择框和滚动条出现问题。

我主要是为 Chrome 和 IE 开发这个。现在我关心的是 Chrome，但跨平台的解决方案会很好。

使用 webkit-scrollbar 为其他滚动条设置样式就可以了：

```
::-webkit-scrollbar {
    width: 10px;
    height: 10px;
} 
```

使用以下样式设置选择输入框也可以：

```
select {
  -webkit-appearance: button;
  -webkit-border-radius: 2px;
  /*-webkit-box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);*/
  -webkit-padding-end: 20px;
  -webkit-padding-start: 2px;
  -webkit-user-select: none;
  background-image: -webkit-linear-gradient(#FAFAFA, #F4F4F4 40%, #E5E5E5);
  background-position: center right;
  background-repeat: no-repeat;
  border: 1px solid #AAA;
  color: #555;
  font-size: inherit;
  margin: 0;
  overflow: hidden;
  padding-top: 2px;
  padding-bottom: 2px;
  text-overflow: ellipsis;
  white-space: nowrap;

} 
```

我似乎无法汇集的是单击选择输入时出现的特定滚动条的样式（当存在足够的项目以导致滚动条时）。

它显然没有元素，我不知道它是否真的可以设计。JQuery 可能是一个选项，但我不想在插件之后使用插件重载页面。

页面上的所有其他内容都是样式化的，Chrome 和 IE 中的默认滚动条在输入端看起来确实不合适。

我意识到创建自己的下拉框并填充隐藏的输入字段可能是一种方法，但考虑到 HTML5 和 CSS3 应该是多么灵活，这似乎相当不优雅，并且需要更多的工作和将 JQuery 添加到页面中。

任何帮助或见解表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2021-01-05T05:21:42.990

选择下拉菜单的滚动条可以使用这种方式设置样式：

```
select::-webkit-scrollbar 
```

为了让css生效，还需要设置width和height属性。下面的代码显示了**正常**的下拉菜单，**样式**化的下拉菜单，但**没有宽度和高度属性**，以及**样式**化的下拉菜单**，具有宽度和高度属性**来说明差异。

```
select {
  padding: 3px 12px;
  outline: none;
  width: 250px;
  margin-bottom: 20px;
}

select.widthHeight::-webkit-scrollbar {
  width: 14px;
  height: 14px;
}

select.style::-webkit-scrollbar-track {
  border: rgb(180, 180, 180);
  background-color: #ff6536;
}

select.style::-webkit-scrollbar-thumb {
  background-color: #3677ef;
  border: 1px solid rgb(193, 193, 193);
}

div {
  margin-bottom: 5px;
}
```

```
<div>Normal</div>
<select>
  <option>Value 1</option>
  <option>Value 2</option>
  <option>Value 3</option>
  <option>Value 4</option>
  <option>Value 5</option>
  <option>Value 6</option>
  <option>Value 7</option>
  <option>Value 8</option>
  <option>Value 9</option>
  <option>Value 10</option>
  <option>Value 11</option>
  <option>Value 12</option>
  <option>Value 13</option>
  <option>Value 14</option>
  <option>Value 15</option>
  <option>Value 16</option>
  <option>Value 17</option>
  <option>Value 18</option>
  <option>Value 19</option>
  <option>Value 20</option>
  <option>Value 21</option>
  <option>Value 22</option>
  <option>Value 23</option>
  <option>Value 24</option>
  <option>Value 25</option>
</select>

<div>Styled without width and height css</div>
<select class="style">
  <option>Value 1</option>
  <option>Value 2</option>
  <option>Value 3</option>
  <option>Value 4</option>
  <option>Value 5</option>
  <option>Value 6</option>
  <option>Value 7</option>
  <option>Value 8</option>
  <option>Value 9</option>
  <option>Value 10</option>
  <option>Value 11</option>
  <option>Value 12</option>
  <option>Value 13</option>
  <option>Value 14</option>
  <option>Value 15</option>
  <option>Value 16</option>
  <option>Value 17</option>
  <option>Value 18</option>
  <option>Value 19</option>
  <option>Value 20</option>
  <option>Value 21</option>
  <option>Value 22</option>
  <option>Value 23</option>
  <option>Value 24</option>
  <option>Value 25</option>
</select>

<div>Styled</div>
<select class="style widthHeight">
  <option>Value 1</option>
  <option>Value 2</option>
  <option>Value 3</option>
  <option>Value 4</option>
  <option>Value 5</option>
  <option>Value 6</option>
  <option>Value 7</option>
  <option>Value 8</option>
  <option>Value 9</option>
  <option>Value 10</option>
  <option>Value 11</option>
  <option>Value 12</option>
  <option>Value 13</option>
  <option>Value 14</option>
  <option>Value 15</option>
  <option>Value 16</option>
  <option>Value 17</option>
  <option>Value 18</option>
  <option>Value 19</option>
  <option>Value 20</option>
  <option>Value 21</option>
  <option>Value 22</option>
  <option>Value 23</option>
  <option>Value 24</option>
  <option>Value 25</option>
</select>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T21:48:49.213

我很确定您不能设置 select 元素的样式，或者至少不能很好地设置样式。有这个选项会很好，但是有太多的值我想改变，这样更容易创建我自己的值。基本上只需制作一个带有可点击元素的 div，这些元素可以更改隐藏输入的值，并且可以使用显示所选值的单独元素来显示和隐藏。

就我个人而言，我认为这是最好的方式，因为您可以完全控制它，从而可以根据需要设置样式，但是，您也可以使用 jQuery UI 之类的 javascript UI 插件来更改输入元素的样式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-21T18:54:39.993

关于是否使用 JS 和替代 HTML 标记来实现所需美学的相关想法。为了美观而“破解”它会在移动浏览器上导致不需要的结果吗？在 iPad 上，选择元素的默认功能是调出选项轮进行选择。那么我们不会通过破解选择而失去该功能吗？

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-11-13T05:48:30.007

您可以设置下拉菜单的样式等。我已经做过很多次了。就滚动条而言，按照与其他任何操作相同的方式进行操作。

# iphone - sencha touch iphone 列表箭头图标

> ID：10924802
> 
> 赞同：1
> 
> 时间：2012-06-07T02:15:09.517
> 
> 标签：iphone, sencha-touch-2, sencha-touch-theming

我有一个 Sencha Touch 2 应用程序，其中有很多列表`onItemDisclosure`设置为`true`. 即使 iPhone 使用的是`apple.css`.

根据此处和 Sencha 论坛上的帖子，我尝试使用

```
.x-list-disclosure {
    width: 10px;
    height: 13px;
    margin-top: 0.6em;
    right:1em !important;
    -webkit-mask: none;
    -webkit-mask-box-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAANCAYAAACQN/8FAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJ bWFnZVJlYWR5ccllPAAAALRJREFUeNpi/P//P8OkSZMkGBgYtgNxfV5e3iYGLIBZSEhIGkjvB2Id IA4+efLkJXNz85voCpmgNBsSvRpogx+GQqBVT4G0LRDfx6cYbCIexd7oViMrvoOkeB1MMSPI18gA KGEPpA4gCYFs0WBCU6QCpJYiCYFscQPa9osJSZE61CRpJEW2QEV34G6EKtqLpOgRVNF95ADHpsgB WRHMxI9A/AWfIliAvwBJAvFudOuQAUCAAQDiG0runJxCpwAAAABJRU5ErkJggg==');
} 
```

但这在蓝色圆圈*下方*添加了一个放大的 iPhone 箭头。

如何摆脱蓝色并使其看起来像 iPhone 风格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T05:42:23.300

最终手动修复它：

```
.x-list-item .x-list-disclosure {
    overflow: hidden;
    -webkit-mask: 0 0 url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAUCAYAAACEYr13AAAAAXNSR0IArs4c6QAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wGBwQ7Dme80Q4AAAAdaVRYdENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAAAKBJREFUOMvtU7ENAyEQM0i0DJMMxggnNoCKhpWyBxVINBQUlyrRJwKeKF0Ul9bZ8vl0wO8ixshExGdzYkSGEDilBKUUeu+w1oqZgRyRrTUAQO8dSimskkydnXNcSgGAZRKx2s97zznnpYlcGRhjnsOzdeTGQa5Hk60SHyAiaK1vH5/xIOZa6wv/3oH4RjxcgYguu+JVAt4R46TArV/4A7gDIZZWTRQC+PUAAAAASUVORK5CYII=') no-repeat;
    -webkit-mask-size: 1.2em;
    background-color: #FFFFFF;
    background-image: -webkit-linear-gradient(#939393,#000000);
    background-image: linear-gradient(#939393,#000000);
    position: absolute;
    width: 1em;
    height: 1.2em;
    bottom: 30%;
} 
```

# iphone - 在 iCarousel 中更新或替换对象

> ID：10924809
> 
> 赞同：2
> 
> 时间：2012-06-07T02:16:09.240
> 
> 标签：iphone, ios, xcode

我正在使用 iCarousel，如果您还没有看到 iCarousel，它是 github 上的一个开源项目：[iCarousel](https://github.com/nicklockwood/iCarousel)

这就是我删除对象的方式`iCarousel`：

```
NSInteger index = carousel1.currentItemIndex;
[carousel1 removeItemAtIndex:index animated:YES];
[items1 removeObjectAtIndex:index]; 
```

它在项目中包含的方法中说：

```
- (void)removeItemAtIndex:(NSInteger)index animated:(BOOL)animated; 
```

> 这会从轮播中删除一个项目。其余项目将滑过以填补空白。请注意，调用此方法时数据源不会自动更新，因此后续调用 reloadData 将恢复已删除的项目。

所以我想做的是每当我删除该索引处的项目时，我想用 [NSNull null] 或虚拟对象替换，在 iCarousel 中看不到以保留数组的索引计数。但在我的项目中，它似乎崩溃了。所以我认为这是不可能的。所以我想要更新它的数组或替换我的`NSMutableArray`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T04:59:39.193

当您执行

```
- (void)removeItemAtIndex:(NSInteger)index animated:(BOOL)animated; 
```

在重新加载数据之前从数组中删除对象。因此，在这种情况下，您的数组计数仍然正确

# c - 关于切换 SSR 的问题

> ID：10924810
> 
> 赞同：0
> 
> 时间：2012-06-07T02:16:10.427
> 
> 标签：c, for-loop, toggle, 8051

我正在使用 Keil C 编写我的程序。我有一些问题，我已经被困了很长时间，我的程序将使用遥控器切换 SSR（固态继电器）。我的程序是如何工作的：首先，有一个学习按钮，它将学习遥控器的任何红外信号，并将存储在“数据”中。当我再次按下遥控器时，它会将数据存储到“TempDATA”中。然后我的程序将比较两者并检查是否有错误。如果没有错误，它将切换 SSR 并且绿色 LED 将亮起。如果有任何错误，它将打开红色 LED。

但是，问题在于，它会触发 3 次而不是一次。因此，当没有错误时，它将打开 SSR 'ON，OFF，ON'。如果再次按下遥控器按钮，SSR 将“关闭、打开、关闭”。如果有任何错误，它将显示 'EEE' 而不是 1 'E'。我该如何解决这个问题？

```
/***********************Problem Solved************************/ 
```

通过在以下位置添加延迟：

```
while(1)
{  
    if(Data_Ready)                   //Data_Ready = 1
    {
               /*insert delay here*/
               Data_Ready = 0; 
               Result = 1;
               for(j=0;j<30;j++)              
               .
               .
               . 
```

问题已经解决了。

```
/****************************************MAIN*******************************************/
void main(void)
{   
unsigned char Result=0; 
unsigned int j;
unsigned int x =0;                              
TMOD = 0x21;          //Enable Timer 1 for 2nd Serial Port  & Timer0
TH1 = 0xFD;           //9600 Baud Rate
SCON0 = 0x50;        
SSR = 0;
Learn = 0;          
RedLED = 0;           
GreenLED= 0;

IE = 0x84;            //Enable External Interrupt 1                                                         
IT1 = 1;              //Set External Interrupt 1 to Edge Triggered.

while(1)
{  
    if(Data_Ready)                   //Data_Ready = 1
    {   
        Data_Ready = 0; 
        Result = 1;
        for(j=0;j<30;j++)                //Loop 30 times
        {
            if(DATA[j] != TempDATA[j])   //Compare DATA to TempDATA
            { 
                Result = 0;     
                break;                   //break from loop
            }               
        }//end for

        if(Result)                   
        {
            Result = 0;
            GreenLED = 1;            //Turn ON GreenLED
            RedLED = 0;              //Turn OFF RedLED

            SSR = ~SSR;              //Toggle SSR to ON and OFF

            SerialTx('S');
            SerialTx('S');
            SerialTx('R');

        }
        else
        {   
            Result = 0;
            RedLED = 1;              //Turn ON RedLED
            GreenLED = 0;            //Turn OFF GreenLED

            SerialTx('E');          //Print E on MTK to show Error       
        }

    }//end if
}//end while

}//end main 
```

当我按下遥控器按钮而不按下学习按钮时，Data_Ready 设置为 1。所以它只会在我按下遥控器按钮而不按下学习按钮时进行比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T04:43:50.723

问题似乎与

```
SSR=~SSR; 
```

命令。第一次，初始状态已经是OFF。因此，在接收到正确的数据时，它会否定 SSR 使其开启。然后三个时间序列将其再次关闭和打开。这对应于您获得正确结果的第一次情况。

现在，下一次接收到正确的数据时，SSR 否定之前的状态，它已经是 ON 并且 3 时间序列现在将是 OFF=>ON=>OFF

所以，你可以在这里做的是在发送下一个 ON/OFF 序列之前故意将 SSR 设置为 OFF 状态。

（我没有使用过 Keil C，我曾在 AVR Studio 上为 ATMEL uC 编程，所以我只能对所使用的 API 进行猜测。但这个答案是我从明显的逻辑中推断出来的）

希望能帮助到你。

干杯!

* * *

更新：

Error[SerialTx('E')] 是否给出正确的输出？

我假设 SSR 具有“0”或“1”或 TRUE/FALSE 等值。

因此，在命令 SSR=~SSR 之前设置 SSR=0（或关闭它的东西），条件是它仅在 On=>Off=>On 触发器的第一个序列上执行。这将需要一个全局静态标志来保存序列的状态。例如，

```
static int sequence_in_progress = 0; 
```

接收到信号时：sequence_in_progress +1 每次接收到信号时都会递增。

现在，如果第一次收到正确的信号，这可以用作将 SSR 设置为关闭的检查：

```
if(sequence_in_progress==1)
{ SSR=0; //Or something that turns it off}

if(sequence_in_progress==3)
{sequence_in_progress=0;//reset it to zero every time your code finishes processing} 
```

# django - Django：ModelForm 中的自定义操作

> ID：10924815
> 
> 赞同：3
> 
> 时间：2012-06-07T02:17:15.933
> 
> 标签：django, django-cms

Django 在其 ModelAdmin 对象上有自定义“操作”，但我找不到 ModelForm 对象的类似内容。我正在使用 Django-CMS，因此似乎无法轻松访问对象的列表视图，并且将此操作附加到单个对象更有意义。

是否可以在管理界面中的对象表示中放入自定义方法（即在 ModelForm 上）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:18:58.173

如果你想有实例相关的动作，你应该编写自定义函数和相关的 url。

接下来，要使其在特定实例的更改表单中可用，您可以扩展 change_form 模板添加 cusotm 按钮（[https://github.com/django/django/blob/master/django/contrib/admin/templates/admin/change_form](https://github.com/django/django/blob/master/django/contrib/admin/templates/admin/change_form.html) {% 块面包屑 %} 中的[.html )](https://github.com/django/django/blob/master/django/contrib/admin/templates/admin/change_form.html)

# iphone - AFNetworking setImageWithURLRequest 在图像下载期间显示进度条？

> ID：10924818
> 
> 赞同：3
> 
> 时间：2012-06-07T02:17:26.383
> 
> 标签：iphone, afnetworking, uiprogressview

如何在图像下载过程中显示进度条？

我的代码在这里：

```
 [picView setImageWithURLRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:picURL]] placeholderImage:[UIImage imageNamed:@"placeholder.png"] success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image) {
    NSLog(@"success");

} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error) {
    NSLog(@"fail");
}    
 ]; 
```

先感谢您。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-09T13:48:04.017

进度条可能不是正确的 UI。相反，您可能应该使用*不确定*的进度指示器（旋转条）。要在 AFNetworking 中执行此操作，请使用`setImageWithURLRequest:placeholderImage:success:failure:`，在成功和失败中隐藏进度指示器。

如果您确实想跟踪请求的进度，则必须使用`AFImageRequestOperation`, 并执行`setDownloadProgressBlock:`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T04:51:19.873

看看这个可可豆荚：[https](https://github.com/xmartlabs/XLRemoteImageView) ://github.com/xmartlabs/XLRemoteImageView 。它允许您显示进度指示器并更新有关 UIImage 下载进度的信息。它使用 Objective-C 内部和 AFNetworking UIImage 类别来实现你想要的。我希望它对你有帮助。

# jquery-mobile - 某些页面不显示 data-add-back-btn

> ID：10924820
> 
> 赞同：1
> 
> 时间：2012-06-07T02:17:40.727
> 
> 标签：jquery-mobile

我一直在使用 data-add-back-btn 让用户返回上一页。我把所有需要的页面都放了。但问题是，为什么有些页面有后退按钮而有些没有。

```
<div data-role="page" id="MregisteredClassesDetails" data-add-back-btn="true"> 
```

我阅读了一些堆栈问题，有一个插件可以用于所有页面并**添加 data-add-back-btn="false"**。但我应该把下面的代码放在哪里？在每一页？有人可以给我一个例子如何使用它从 html 调用

```
<script type="text/javascript">
$(document).bind("mobileinit", function() {
   $.mobile.page.prototype.options.addBackBtn = true;
 });    
</script> 
```

# javascript - 创建一个带边界的可拖动 jquery ui datepicker 控件

> ID：10924824
> 
> 赞同：2
> 
> 时间：2012-06-07T02:17:57.103
> 
> 标签：javascript, jquery, jquery-ui

我知道如何使 datepicker ui 控件可拖动。我只是很难限制它的水平位移量。

很难用语言来解释。[这是我想要实现的目标。](http://jsfiddle.net/b6V3W/317/)

[这是结果。](http://jsfiddle.net/b6V3W/317/embedded/result/)

请注意如何水平拖动日期选择器。我不想要：

![在此处输入图像描述](../Images/666fa1e8fd6eec60169f7ff19ad75cc8.png)

该差距大于0。我希望日期选择器的右侧部分具有相同的行为，以便日历始终可见。现在，如果将其向左拖动，则可以隐藏日历。另一方面，如果将其向右拖动，则无法隐藏它。如果您的屏幕太小，虽然您将无法看到最后一个月。

我应该采取什么方法来解决这个问题？

![在此处输入图像描述](../Images/8449a78fa76aa22d27e34cd51f9882fa.png) ![在此处输入图像描述](../Images/0fae4bb00b5179bc2f7ce80e78da651e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:28:13.963

Draggable 引发了一些事件（[start](http://jqueryui.com/demos/draggable/#event-start)、[drag](http://jqueryui.com/demos/draggable/#event-drag)、[stop](http://jqueryui.com/demos/draggable/#event-stop)），它们都提供了一个辅助对象作为第二个参数，并带有拖动元素的位置和偏移：

*   **ui.position** - 作为 { top, left } 对象的助手的当前位置，相对于偏移元素
*   **ui.offset** - 帮助器的当前绝对位置为 { top, left } 对象，相对于页面

我的解决方案是在拖动停止时将被拖动的元素在左侧拖动得太远时，将容器的边缘动画化：

```
$("#draggable2").draggable({
    axis: "x",
    ...
    stop: function(e, ui) {
        if (ui.offset.left > 0) {
            $(this).animate({
                'left': (ui.position.left - ui.offset.left) + 'px'
            }, 250);
        }
    },
    containment: $("#draggableParent")
});​ 
```

**[DEMO](http://jsfiddle.net/didierg/saFyb/)**
**[DEMO（全屏）](http://jsfiddle.net/didierg/saFyb/embedded/result/)**

我认为您可以轻松地挖掘一点，以通过正确的拖动获得相同的结果。

# ruby-on-rails - 在 Windows、CentOS 和 Mint 上安装 Ruby on Rails 时出错

> ID：10924827
> 
> 赞同：0
> 
> 时间：2012-06-07T02:18:49.623
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, centos, linux-mint

我在为 3 个系统（CentOS、Mint 和 Windows）尝试 ROR 时遇到了问题，并且都因不同的原因而失败。我在想 Windows 会是最简单的，但它只是给出了一条错误消息，`cannot load the file sqlite3`尽管 sqlite3.exe 确实存在于 ruby​​ 的 bin 目录中，所以我很困惑。

使用 CentOS，我在尝试发布后遇到此错误消息 `rails new something`

```
It seems your ruby installation is missing psych(for YAML output).  
To eliminate this warning, please install libyaml and reinstall your ruby.  
Invalid application name test.  
Please give a name which does not match one of the reserved rails words. 
```

对于该错误，我按照此处发布的设置指南 [http://collectiveidea.com/blog/archives/2011/10/31/install-ruby-193-with-libyaml-on-centos/](http://collectiveidea.com/blog/archives/2011/10/31/install-ruby-193-with-libyaml-on-centos/)并重新安装了 ruby​​，但一旦发布与上面创建 ruby​​ 项目的命令相同，我得到相同的错误。

使用 Mint，我收到了很多错误消息并尝试了解决方案，但没有一个真正奏效，例如
[缺少宝石可以](https://stackoverflow.com/questions/10907248/missing-gems-can)

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T02:41:53.087

该领域不断变化，但截至 2012 年 6 月，rails 最常见的开发环境是在带有 OSX 的 mac 上，使用 xTools、homebrew 和 rvm 等项目来安装 ruby​​、rails 和其他软件包。[请参阅安装 Ruby on Rails - Mac OS Lion](https://stackoverflow.com/questions/6840719/installing-ruby-on-rails-mac-os-lion)
中 Alain 的回答，我真的很喜欢[http://www.frederico-araujo.com/2011/07/30/installing-rails-on-os-x-lion-with-homebrew- rvm-and-mysql/](http://www.frederico-araujo.com/2011/07/30/installing-rails-on-os-x-lion-with-homebrew-rvm-and-mysql/)足够最新并使用 ruby​​ 1.9.3

第二个最受欢迎的选择是 Linux，特别是 Ubuntu，它现在是 Unix 推荐的 Unix 桌面平台。
这篇文章有基础知识：http: [//blog.sudobits.com/2011/10/27/how-to-install-ruby-on-rails-in-ubuntu-11-10/](http://blog.sudobits.com/2011/10/27/how-to-install-ruby-on-rails-in-ubuntu-11-10/)虽然我会替换`1.9.2`为`1.9.3`ruby​​。

第三是窗户。
大多数人为此使用 railsinstaller - [http://railsinstaller.org/](http://railsinstaller.org/)

在这三个之后，当然还有各种各样的其他操作系统，例如 CentOS 和 Mint 等，但是您确实在使用它们超出了主流（至少对于 RoR 而言），所以如果您遇到问题，那么会有一个更小的社区和解决问题的机会较小。

就个人而言，我已经去了 Windows -> Ubuntu -> Mac -> Ubuntu，我最喜欢 Ubuntu。

顺便说一句
，对于编辑器，我已经使用 Notepad -> Gedit -> vi
，对于 IDE，我已经使用 Eclipse -> netBeans -> ruby​​Mine
对于源代码控制 git 而不是 svn。

# iphone - UIBackgroundModes，在临时（或永久）退出时注销

> ID：10924845
> 
> 赞同：0
> 
> 时间：2012-06-07T02:22:27.290
> 
> 标签：iphone, ios, background, logout

我正在为客户维护一个 iPhone 应用程序。该应用程序不在后台运行（应用程序不在后台运行 = 设置 plist 中的“是”）。但是，当用户暂时中断（例如被电话呼叫）或应用程序存在时，用户需要注销。我目前在 applicationWillResignActive: 中执行此操作。我首先考虑使用 beginBackgroundTaskWithExpirationHandler 但后来注意到返回值始终是“UIBackgroundTaskInvalid”。我认为这是因为我无法在后台运行。那么问题是，我应该如何处理注销？我是否应该使注销同步并希望它按时完成（我猜在 10 秒内？）。

起初我不知道这个 beginBackgroundTaskWithExpirationHandler 没有返回有效的后台任务标识符，并且应用程序正常注销。除了其中一位用户因“超过允许的时间有活动的断言”而不断崩溃（在 iPad 1 上）。

其他人处理过这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T02:46:58.197

如果您的应用程序没有后台，那么您需要在提供的`-applicationWillTerminate:`方法中注销。因为这就是中断或应用程序关闭时将调用的内容。

```
- (void)applicationWillTerminate:(UIApplication *)application {
/*
 Called when the application is about to terminate.
 Save data if appropriate.
 */

} 
```

# java - JAXB - 如何序列化集合子类中的字段

> ID：10924848
> 
> 赞同：2
> 
> 时间：2012-06-07T02:24:15.200
> 
> 标签：java, jaxb

我在序列化类中的字段时遇到问题，这是 ArrayList 的子类。添加到列表中的项目是序列化的，但字段不是：

```
@XmlRootElement
public static class NumberedList extends ArrayList<String>{

    @XmlAttribute
    private int number = 5;

    @XmlList
    public List<String> getNames(){
        return this;
    }

    public NumberedList(){
        add("a");
        add("b");
    }
}

@XmlRootElement
public static class FieldTest{

    @XmlElement
    NumberedList list = new NumberedList();
}

public static void main(String[] args) throws Exception{

    JAXBContext context = JAXBContext.newInstance(FieldTest.class);
    Marshaller marshaller = context.createMarshaller();
    marshaller.marshal(new FieldTest(), System.out);
} 
```

//将 NumberedList 序列化为字段的输出：不存在数字字段

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><fieldTest><list>a</list><list>b</list></fieldTest> 
```

奇怪的是，当我将列表添加到 Map 时，我的类中的字段会按照我的预期进行序列化。

```
@XmlRootElement
public static class NumberedList extends ArrayList<String>{

    @XmlAttribute
    private int number = 5;

    @XmlList
    public List<String> getNames(){
        return this;
    }

    public NumberedList(){
        add("a");
        add("b");
    }
}

@XmlRootElement
public static class MapTest{
    @XmlElement
    Map<Integer, NumberedList> map = Maps.newHashMap();

    public MapTest(){
        map.put(1, new NumberedList());
    }
}

public static void main(String[] args) throws Exception{

    JAXBContext context = JAXBContext.newInstance(MapTest.class);
    Marshaller marshaller = context.createMarshaller();
    marshaller.marshal(new MapTest(), System.out);
} 
```

//在 Map 中序列化 NumberedList 的输出：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><mapTest><map><entry><key>1</key><value number="5"><names>a b</names></value></entry></map></mapTest> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T07:48:33.183

`NumberedList`问题来自于正在扩展的事实`ArrayList`。`ArrayList`向该类添加一个内部，然后将其与`NumberedList`. 请参阅以下代码：

```
@XmlRootElement
public static class NumberedList {
    private List<String> names = new ArrayList<String>();

    @XmlAttribute
    private int number = 5;

    public NumberedList(){
        names.add("a");
        names.add("b");
    }

    @XmlList
    public List<String> getNames(){
        return names;
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-03T06:57:18.643

我在两个类中看到你有根元素.. 这根本上是错误的.. 你只能有一个根元素.. 所以从 NumberedList 中删除它。在第二步中，我看到您正在初始化地图

```
public MapTest(){
        map.put(1, new NumberedList());
    } 
```

在第一个你没有做的地方..

# php - 将年份添加到日期重置为 1970-01-01

> ID：10924849
> 
> 赞同：3
> 
> 时间：2012-06-07T02:24:21.953
> 
> 标签：php, date, strtotime, dateadd

```
$somedate = "1980-02-15";
$otherdate = strtotime('+1 year', strtotime($somedate));
echo date('Y-m-d', $otherdate); 
```

输出

```
1981-02-15 
```

和

```
$somedate = "1980-02-15";
$otherdate = strtotime('+2 year', strtotime($somedate));
echo date('Y-m-d', $otherdate); 
```

输出

```
1982-02-15 
```

但

```
$somedate = "1980-02-15";
$otherdate = strtotime('+75 year', strtotime($somedate));
echo date('Y-m-d', $otherdate); 
```

输出

```
1970-01-01 
```

怎么修？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T02:27:33.717

这是[2038 错误](http://www.2038bug.com/)，类似于 y2k，由于 32 位限制，系统无法处理该年之后的日期。请改用[DateTime 类](http://php.net/DateTime)，它可以解决此问题。

**对于 PHP 5.3+**

```
$date = new DateTime('1980-02-15');
$date->add(new DateInterval('P75Y'));
echo $date->format('Y-m-d'); 
```

**对于 PHP 5.2**

```
$date = new DateTime('1980-02-15');
$date->modify('+75 year');
echo $date->format('Y-m-d'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T02:27:56.590

strtotime() 使用 unix 时间戳，因此如果它尝试计算 2038 年之后的年份并返回到 1970 年，则会溢出。

要解决此问题，请使用 DateTime 对象。 [http://php.net/manual/en/book.datetime.php](http://php.net/manual/en/book.datetime.php)

要将一段时间添加到 DateTime 对象，请使用 DateTime::add，它将 DateInterval 作为参数。 [http://php.net/manual/en/datetime.add.php](http://php.net/manual/en/datetime.add.php) http://www.php.net/manual/en/class.dateinterval.php

```
$date = new DateTime("1980-02-15");
if (method_exists("DateTime", "add")) {
    $date->add(new DateInterval("Y75"));
} else {
    $date->modify("+75 years");
}
echo $date->format("Y-m-d"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T02:28:08.450

对于 unix 时间戳，最大可表示时间为 2038-01-19。世界标准时间 03:14:07。

所以你不能用时间戳来表示/操作它上面的时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T02:31:01.360

PHP 的日期限制在 01-01-1970 到 19-01-2038 的范围内。您将不得不使用不同的方法来处理日期。

PEAR 有一个 Date 类：[PEAR Date](http://pear.php.net/package/Date/redirected)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T02:27:00.243

从 1980 年算起的 75 年是 2055，它超过了可以用 32 位整数表示的最高日期值。因此结果变为 0，即您观察到的 1970 年日期。

# hadoop - map reduce 输出文件：part-r-* 和 part-*

> ID：10924852
> 
> 赞同：0
> 
> 时间：2012-06-07T02:25:11.757
> 
> 标签：hadoop, mapreduce

我对 map reduce 输出部分文件有一些疑问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T05:51:51.080

通常，part-r-* 来自 reducer。 `MultipleOutputs`允许您使用不同的命名约定。如果没有 reduce 步骤，输出将是 part-m-*。据我了解，如果定义了减速器，则无论减速器是否产生任何东西，都会删除映射器输出。通常，即使它们是空的，reducer 输出文件也会生成，除非您使用`LazyOutputFormat`. 您在哪里找到不以 m-nnnnn 或 r-nnnnn 结尾的 part-* 文件？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T17:15:51.770

对于旧版本 (< 0.2)，它们过去只输出 part-000*。但是现在，我们同时看到了 part-mn*（n 代表数字 ex：part-m-00000）和 part-rn* 文件。part-rn* 用于减速器的输出。part-mn* 是组合器的输出。（如果我不使用组合器，我不会得到任何 part-mn*。我不确定这是否是默认行为。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-04T04:00:27.873

part-00000 是映射器或减速器在旧 API 中创建的输出目录。在新的 API 中，它略微更改为 part-m-* 用于映射器输出和 part-r-* 用于减速器输出。有关详细信息，请参阅 OReilly 的 Hadoop 权威指南，第 28 页。

# java - 只能发送一定数量的短信

> ID：10924853
> 
> 赞同：1
> 
> 时间：2012-06-07T02:25:16.340
> 
> 标签：java, android

我有一个程序，只需按一下按钮即可发送大量文本。它在我的 Evo 上运行良好，但我刚刚获得了 Evo LTE，现在它只发送给 28 人中的前 13 人。

它的工作方式是从字符串数组中读取电话号码列表，然后根据我按下的按钮发送预定义的消息。

我拉了一只原木猫，这就是我得到的：

```
06-06 11:25:34.850: W/MessageQueue(28308): null sending message to a Handler on a dead thread
06-06 11:25:34.850: W/MessageQueue(28308): java.lang.RuntimeException: null sending message to a Handler on a dead thread
06-06 11:25:34.850: W/MessageQueue(28308):  at android.os.MessageQueue.enqueueMessage(MessageQueue.java:200)
06-06 11:25:34.850: W/MessageQueue(28308):  at android.os.Looper.quit(Looper.java:245)
06-06 11:25:34.850: W/MessageQueue(28308):  at android.os.HandlerThread.quit(HandlerThread.java:96)
06-06 11:25:34.850: W/MessageQueue(28308):  at com.htc.usage.service.UsageStatsService.onDestroy(UsageStatsService.java:197)
06-06 11:25:34.850: W/MessageQueue(28308):  at android.app.ActivityThread.handleStopService(ActivityThread.java:2762)
06-06 11:25:34.850: W/MessageQueue(28308):  at android.app.ActivityThread.access$2000(ActivityThread.java:139)
06-06 11:25:34.850: W/MessageQueue(28308):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1338)
06-06 11:25:34.850: W/MessageQueue(28308):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-06 11:25:34.850: W/MessageQueue(28308):  at android.os.Looper.loop(Looper.java:154)
06-06 11:25:34.850: W/MessageQueue(28308):  at android.app.ActivityThread.main(ActivityThread.java:4977)
06-06 11:25:34.850: W/MessageQueue(28308):  at java.lang.reflect.Method.invokeNative(Native Method)
06-06 11:25:34.850: W/MessageQueue(28308):  at java.lang.reflect.Method.invoke(Method.java:511)
06-06 11:25:34.850: W/MessageQueue(28308):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-06 11:25:34.850: W/MessageQueue(28308):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-06 11:25:34.850: W/MessageQueue(28308):  at dalvik.system.NativeStart.main(Native Method)
06-06 11:25:35.320: D/PhoneStatusBarPolicy(611): @@ iconIndex=1
06-06 11:25:35.320: D/PhoneStatusBarPolicy(611): isCdma():true hasService:true mSimState=UNKNOWN gprsState=0 mDataState=2 dataActivity=4 mPhone.htcModemLinkOn:false hspa==true
06-06 11:25:35.330: D/PhoneStatusBarPolicy(611): hasService()=true ,mDataState=2 ,mPhone.htcModemLinkOn()=false ,mDataActivity=4
06-06 11:25:35.340: D/PhoneStatusBarPolicy(611): slotType[0]=SIM
06-06 11:25:35.451: V/UsageStatsService(28308): CMD_ID_UPDATE_MESSAGE_USAGE
06-06 11:25:35.471: V/UsageStatsService(28308): MSG_ON_MESSAGE_UPDATE
06-06 11:25:35.501: V/UsageStatsService(28308): MSG_STOP_SERVICE
06-06 11:25:35.501: V/UsageStatsService(28308): onDestroy 
```

从来不擅长阅读日志猫。对于每个剩余的人，这在第十三人之后重复。有人可以告诉我发生了什么吗？

这是我的编码： http: [//pastebin.com/xe4U4GYZ](http://pastebin.com/xe4U4GYZ)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T02:48:22.570

根据日志猫，您的线程已经终止。一种解决方法可能是使您的应用程序多线程。但是，请查看您的线程的终止条件，看看是否有什么导致过早死亡。

# java - mysql + xmpp 服务器 + 测试加载 - 我是否达到任何物理限制？

> ID：10924859
> 
> 赞同：1
> 
> 时间：2012-06-07T02:26:10.193
> 
> 标签：java, mysql, load, tsung, tigase

在负载测试期间（模拟用户连接到服务器），前 1750 秒的平均事务/秒速率约为 300-400，峰值约为 700 tr/sec。这些事务正在使用服务器的底层 mysql 数据库，每个事务大约 5 到 10 个查询。没有任何连接、视图或更复杂的东西，而是简单的查询，数据库也被相应地索引，innoDB 存储引擎。这台机器有充足的 RAM 和 CPU 能力，即使在 SQL 异常情况下，监控也显示，这台机器有超过 50% 的可用 CPU/RAM 资源。Db 条目的数量级为 10^5，但我仍然有大约 20-30 个这样的例外：

```
 2012-06-07 01:56:55  XGateRoster.<init>()                SEVERE:   Error getting data list for: +39128516@xmpp.xgate.com.hk/offline/XGate/PhoneBook; method took 14672 ms, thread: 878
tigase.db.TigaseDBException: Error getting data list for: +39128516@xmpp.xgate.com.hk/offline/XGate/PhoneBook; method took 14672 ms, thread: 878
    at tigase.db.jdbc.JDBCRepository.getDataList(JDBCRepository.java:482)
    at tigase.db.UserRepositoryMDImpl.getDataList(UserRepositoryMDImpl.java:225)
    at tigase.xmpp.RepositoryAccess.getDataList(RepositoryAccess.java:393)
    at tigase.xmpp.RepositoryAccess.getOfflineDataList(RepositoryAccess.java:458)
    at tigase.xmpp.impl.XGateRoster.<init>(XGateRoster.java:94)
    at sun.reflect.GeneratedConstructorAccessor50.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at tigase.xmpp.impl.DynamicRoster.init_settings(DynamicRoster.java:294)
    at tigase.xmpp.impl.DynamicRoster.getDynamicRosters(DynamicRoster.java:214)
    at tigase.xmpp.impl.DynamicRoster.getBuddiesList(DynamicRoster.java:137)
    at tigase.xmpp.impl.DynamicRoster.addBuddies(DynamicRoster.java:83)
    at tigase.xmpp.impl.Presence.broadcastProbe(Presence.java:685)
    at tigase.xmpp.impl.Presence.processOutInitial(Presence.java:1518)
    at tigase.xmpp.impl.Presence.process(Presence.java:914)
    at tigase.server.xmppsession.SessionManager$ProcessorWorkerThread.process(SessionManager.java:2135)
    at tigase.util.WorkerThread.run(WorkerThread.java:132)
Caused by: java.sql.SQLException: Query execution was interrupted
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1055)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:956)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3491)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3423)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1936)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2060)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2542)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1734)
    at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:1885)
    at com.mysql.jdbc.CallableStatement.executeQuery(CallableStatement.java:894)
    at tigase.db.jdbc.JDBCRepository.getUserUID(JDBCRepository.java:668)
    at tigase.db.jdbc.JDBCRepository.getUserUID(JDBCRepository.java:1553)
    at tigase.db.jdbc.JDBCRepository.getNodeNID(JDBCRepository.java:1539)
    at tigase.db.jdbc.JDBCRepository.getDataList(JDBCRepository.java:436)
    at tigase.db.UserRepositoryMDImpl.getDataList(UserRepositoryMDImpl.java:225)
    at tigase.xmpp.RepositoryAccess.getDataList(RepositoryAccess.java:393)
    at tigase.xmpp.RepositoryAccess.getOfflineDataList(RepositoryAccess.java:458)
    at tigase.xmpp.impl.XGateRoster.<init>(XGateRoster.java:94)
    at sun.reflect.GeneratedConstructorAccessor50.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at tigase.xmpp.impl.DynamicRoster.init_settings(DynamicRoster.java:294)
    at tigase.xmpp.impl.DynamicRoster.getDynamicRosters(DynamicRoster.java:214)
    at tigase.xmpp.impl.DynamicRoster.getBuddiesList(DynamicRoster.java:137)
    at tigase.xmpp.impl.DynamicRoster.addBuddies(DynamicRoster.java:83)
    at tigase.xmpp.impl.Presence.broadcastProbe(Presence.java:685)
    at tigase.xmpp.impl.Presence.processOutInitial(Presence.java:1518)
    at tigase.xmpp.impl.Presence.process(Presence.java:914)
    at tigase.server.xmppsession.SessionManager$ProcessorWorkerThread.process(SessionManager.java:2135)
    at tigase.util.WorkerThread.run(WorkerThread.java:132)
2012-06-07 01:57:14  XGateRoster.<init>()                SEVERE:   Error getting data list for: +3919522@xmpp.xgate.com.hk/offline/XGate/PhoneBook; method took 0 ms, thread: 835
tigase.db.TigaseDBException: Error getting data list for: +3919522@xmpp.xgate.com.hk/offline/XGate/PhoneBook; method took 0 ms, thread: 835
    at tigase.db.jdbc.JDBCRepository.getDataList(JDBCRepository.java:482)
    at tigase.db.UserRepositoryMDImpl.getDataList(UserRepositoryMDImpl.java:225)
    at tigase.xmpp.RepositoryAccess.getDataList(RepositoryAccess.java:393)
    at tigase.xmpp.RepositoryAccess.getOfflineDataList(RepositoryAccess.java:458)
    at tigase.xmpp.impl.XGateRoster.<init>(XGateRoster.java:94)
    at sun.reflect.GeneratedConstructorAccessor50.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at tigase.xmpp.impl.DynamicRoster.init_settings(DynamicRoster.java:294)
    at tigase.xmpp.impl.DynamicRoster.getDynamicRosters(DynamicRoster.java:214)
    at tigase.xmpp.impl.DynamicRoster.setItemExtraData(DynamicRoster.java:361)
    at tigase.xmpp.impl.JabberIqRoster.dynamicSetRequest(JabberIqRoster.java:169)
    at tigase.xmpp.impl.JabberIqRoster.process(JabberIqRoster.java:329)
    at tigase.server.xmppsession.SessionManager$ProcessorWorkerThread.process(SessionManager.java:2135)
    at tigase.util.WorkerThread.run(WorkerThread.java:132)
Caused by: java.sql.SQLException: Query execution was interrupted
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1055)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:956)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3491)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3423)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1936)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2060)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2542)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1734)
    at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:1885)
    at com.mysql.jdbc.CallableStatement.executeQuery(CallableStatement.java:894)
    at tigase.db.jdbc.JDBCRepository.getUserUID(JDBCRepository.java:668)
    at tigase.db.jdbc.JDBCRepository.getUserUID(JDBCRepository.java:1553)
    at tigase.db.jdbc.JDBCRepository.getNodeNID(JDBCRepository.java:1539)
    at tigase.db.jdbc.JDBCRepository.getDataList(JDBCRepository.java:436)
    at tigase.db.UserRepositoryMDImpl.getDataList(UserRepositoryMDImpl.java:225)
    at tigase.xmpp.RepositoryAccess.getDataList(RepositoryAccess.java:393)
    at tigase.xmpp.RepositoryAccess.getOfflineDataList(RepositoryAccess.java:458)
    at tigase.xmpp.impl.XGateRoster.<init>(XGateRoster.java:94)
    at sun.reflect.GeneratedConstructorAccessor50.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at tigase.xmpp.impl.DynamicRoster.init_settings(DynamicRoster.java:294)
    at tigase.xmpp.impl.DynamicRoster.getDynamicRosters(DynamicRoster.java:214)
    at tigase.xmpp.impl.DynamicRoster.setItemExtraData(DynamicRoster.java:361)
    at tigase.xmpp.impl.JabberIqRoster.dynamicSetRequest(JabberIqRoster.java:169)
    at tigase.xmpp.impl.JabberIqRoster.process(JabberIqRoster.java:329)
    at tigase.server.xmppsession.SessionManager$ProcessorWorkerThread.process(SessionManager.java:2135)
    at tigase.util.WorkerThread.run(WorkerThread.java:132) 
```

我相信时间测量是正确的，因为我已经仔细检查过它们。为什么我会得到这样的例外？为什么有时测量的执行时间相当短（甚至 0 ms = 即时异常抛出）？

Mysql 慢日志显示（只是一个大问题？）：

```
root@XMPP:/var/log/mysql# egrep "# Query_time: [1-9]+?\..*" /var/log/mysql/mysql-slow.log.1
# Query_time: 27.826251  Lock_time: 0.000077 Rows_sent: 0  Rows_examined: 2
# Query_time: 2.038984  Lock_time: 0.000272 Rows_sent: 0  Rows_examined: 0
# Query_time: 2.040937  Lock_time: 0.000298 Rows_sent: 0  Rows_examined: 0
# Query_time: 2.039785  Lock_time: 0.000347 Rows_sent: 0  Rows_examined: 0
# Query_time: 2.040286  Lock_time: 0.000242 Rows_sent: 0  Rows_examined: 0
# Query_time: 2.039634  Lock_time: 0.000048 Rows_sent: 0  Rows_examined: 1
# Query_time: 2.039647  Lock_time: 0.000043 Rows_sent: 0  Rows_examined: 1
# Query_time: 2.039711  Lock_time: 0.000059 Rows_sent: 0  Rows_examined: 1
# Query_time: 1.103542  Lock_time: 0.000078 Rows_sent: 0  Rows_examined: 0
# Query_time: 1.104395  Lock_time: 0.000053 Rows_sent: 0  Rows_examined: 1
# Query_time: 1.103512  Lock_time: 0.000201 Rows_sent: 0  Rows_examined: 0
# Query_time: 1.103431  Lock_time: 0.000038 Rows_sent: 0  Rows_examined: 1
# Query_time: 2.375416  Lock_time: 0.000205 Rows_sent: 0  Rows_examined: 0
# Query_time: 2.911025  Lock_time: 0.000039 Rows_sent: 0  Rows_examined: 1
# Query_time: 2.083049  Lock_time: 0.000047 Rows_sent: 0  Rows_examined: 1
# Query_time: 2.081169  Lock_time: 0.000036 Rows_sent: 0  Rows_examined: 1
# Query_time: 2.649307  Lock_time: 0.000233 Rows_sent: 0  Rows_examined: 0
# Query_time: 2.082557  Lock_time: 0.000062 Rows_sent: 0  Rows_examined: 1
# Query_time: 3.129848  Lock_time: 0.000124 Rows_sent: 0  Rows_examined: 1
# Query_time: 3.158479  Lock_time: 0.000083 Rows_sent: 0  Rows_examined: 0
# Query_time: 3.412682  Lock_time: 0.000194 Rows_sent: 0  Rows_examined: 0
# Query_time: 2.900394  Lock_time: 0.000073 Rows_sent: 0  Rows_examined: 0
# Query_time: 3.414437  Lock_time: 0.000068 Rows_sent: 0  Rows_examined: 1
# Query_time: 2.900706  Lock_time: 0.000202 Rows_sent: 0  Rows_examined: 0
# Query_time: 3.195506  Lock_time: 0.000198 Rows_sent: 0  Rows_examined: 0
# Query_time: 2.901220  Lock_time: 0.000323 Rows_sent: 0  Rows_examined: 0
# Query_time: 1.278411  Lock_time: 0.000204 Rows_sent: 0  Rows_examined: 0
# Query_time: 1.284154  Lock_time: 0.000198 Rows_sent: 0  Rows_examined: 0
# Query_time: 1.205004  Lock_time: 0.000342 Rows_sent: 0  Rows_examined: 0
# Query_time: 1.204605  Lock_time: 0.000338 Rows_sent: 0  Rows_examined: 0
# Query_time: 1.205250  Lock_time: 0.000131 Rows_sent: 0  Rows_examined: 0
# Query_time: 1.274901  Lock_time: 0.000059 Rows_sent: 0  Rows_examined: 1
# Query_time: 1.285315  Lock_time: 0.000099 Rows_sent: 0  Rows_examined: 1
# Query_time: 3.303273  Lock_time: 0.000060 Rows_sent: 0  Rows_examined: 1
# Query_time: 3.468223  Lock_time: 0.000041 Rows_sent: 0  Rows_examined: 1
# Query_time: 3.461232  Lock_time: 0.000053 Rows_sent: 0  Rows_examined: 1
# Query_time: 3.460767  Lock_time: 0.000399 Rows_sent: 0  Rows_examined: 0
# Query_time: 2.758039  Lock_time: 0.000309 Rows_sent: 0  Rows_examined: 0
# Query_time: 3.462436  Lock_time: 0.000049 Rows_sent: 0  Rows_examined: 1
# Query_time: 2.757907  Lock_time: 0.000276 Rows_sent: 0  Rows_examined: 0
# Query_time: 4.063776  Lock_time: 0.000183 Rows_sent: 0  Rows_examined: 0
# Query_time: 2.012213  Lock_time: 0.000335 Rows_sent: 0  Rows_examined: 0
# Query_time: 2.232263  Lock_time: 0.000270 Rows_sent: 0  Rows_examined: 0
# Query_time: 2.831812  Lock_time: 0.000052 Rows_sent: 0  Rows_examined: 1
# Query_time: 2.832423  Lock_time: 0.000074 Rows_sent: 0  Rows_examined: 1
# Query_time: 2.232429  Lock_time: 0.000270 Rows_sent: 0  Rows_examined: 0
# Query_time: 2.832328  Lock_time: 0.000053 Rows_sent: 0  Rows_examined: 1
# Query_time: 2.231343  Lock_time: 0.000213 Rows_sent: 0  Rows_examined: 0
# Query_time: 4.234587  Lock_time: 0.000047 Rows_sent: 0  Rows_examined: 1
# Query_time: 4.458741  Lock_time: 0.000180 Rows_sent: 50  Rows_examined: 50
# Query_time: 5.739855  Lock_time: 0.000199 Rows_sent: 0  Rows_examined: 0
# Query_time: 5.726863  Lock_time: 0.000289 Rows_sent: 0  Rows_examined: 0
# Query_time: 5.742442  Lock_time: 0.000052 Rows_sent: 0  Rows_examined: 1
# Query_time: 5.726623  Lock_time: 0.000048 Rows_sent: 0  Rows_examined: 1
# Query_time: 5.727539  Lock_time: 0.000234 Rows_sent: 0  Rows_examined: 0
# Query_time: 5.726928  Lock_time: 0.000222 Rows_sent: 0  Rows_examined: 0
# Query_time: 1.165082  Lock_time: 0.000208 Rows_sent: 0  Rows_examined: 0
# Query_time: 1.161232  Lock_time: 0.000046 Rows_sent: 0  Rows_examined: 1
# Query_time: 2.583766  Lock_time: 0.000249 Rows_sent: 0  Rows_examined: 0
# Query_time: 3.011636  Lock_time: 0.000227 Rows_sent: 0  Rows_examined: 0
# Query_time: 2.510544  Lock_time: 0.000227 Rows_sent: 0  Rows_examined: 0
# Query_time: 1.921829  Lock_time: 0.000091 Rows_sent: 0  Rows_examined: 0
# Query_time: 1.920549  Lock_time: 0.000315 Rows_sent: 0  Rows_examined: 0
# Query_time: 1.922647  Lock_time: 0.000239 Rows_sent: 0  Rows_examined: 0
# Query_time: 2.377067  Lock_time: 0.000208 Rows_sent: 0  Rows_examined: 0
# Query_time: 2.511974  Lock_time: 0.000070 Rows_sent: 0  Rows_examined: 1
# Query_time: 1.360768  Lock_time: 0.000051 Rows_sent: 0  Rows_examined: 1
# Query_time: 1.378182  Lock_time: 0.000104 Rows_sent: 0  Rows_examined: 1
# Query_time: 1.806293  Lock_time: 0.000100 Rows_sent: 0  Rows_examined: 1
# Query_time: 1.378549  Lock_time: 0.000056 Rows_sent: 0  Rows_examined: 1
# Query_time: 1.378903  Lock_time: 0.000088 Rows_sent: 0  Rows_examined: 1
# Query_time: 1.879465  Lock_time: 0.000212 Rows_sent: 0  Rows_examined: 0
# Query_time: 2.020542  Lock_time: 0.000054 Rows_sent: 0  Rows_examined: 1
# Query_time: 2.019749  Lock_time: 0.000493 Rows_sent: 0  Rows_examined: 0
# Query_time: 2.036685  Lock_time: 0.000303 Rows_sent: 0  Rows_examined: 0
# Query_time: 2.019717  Lock_time: 0.000197 Rows_sent: 0  Rows_examined: 0
# Query_time: 1.963536  Lock_time: 0.000161 Rows_sent: 0  Rows_examined: 0
# Query_time: 2.019353  Lock_time: 0.000129 Rows_sent: 0  Rows_examined: 0
# Query_time: 2.019624  Lock_time: 0.000128 Rows_sent: 0  Rows_examined: 0
# Query_time: 1.820161  Lock_time: 0.000051 Rows_sent: 0  Rows_examined: 1
# Query_time: 2.255717  Lock_time: 0.000167 Rows_sent: 0  Rows_examined: 0
# Query_time: 2.413679  Lock_time: 0.000247 Rows_sent: 0  Rows_examined: 0
# Query_time: 2.402931  Lock_time: 0.000148 Rows_sent: 0  Rows_examined: 0
# Query_time: 2.255956  Lock_time: 0.000189 Rows_sent: 0  Rows_examined: 0
# Query_time: 2.353527  Lock_time: 0.000195 Rows_sent: 0  Rows_examined: 0
# Query_time: 2.402936  Lock_time: 0.000204 Rows_sent: 0  Rows_examined: 0
# Query_time: 2.255460  Lock_time: 0.000234 Rows_sent: 0  Rows_examined: 0
# Query_time: 1.169004  Lock_time: 0.000135 Rows_sent: 0  Rows_examined: 0
# Query_time: 2.576578  Lock_time: 0.000039 Rows_sent: 0  Rows_examined: 1
# Query_time: 2.578367  Lock_time: 0.000139 Rows_sent: 1  Rows_examined: 3
# Query_time: 2.154770  Lock_time: 0.000209 Rows_sent: 0  Rows_examined: 0
# Query_time: 2.327091  Lock_time: 0.000123 Rows_sent: 0  Rows_examined: 1
# Query_time: 2.154538  Lock_time: 0.000209 Rows_sent: 0  Rows_examined: 0
# Query_time: 1.674249  Lock_time: 0.000430 Rows_sent: 0  Rows_examined: 0
# Query_time: 2.913024  Lock_time: 0.000076 Rows_sent: 0  Rows_examined: 1
# Query_time: 1.674312  Lock_time: 0.000435 Rows_sent: 0  Rows_examined: 0
# Query_time: 1.992658  Lock_time: 0.000354 Rows_sent: 0  Rows_examined: 0
# Query_time: 1.756505  Lock_time: 0.000247 Rows_sent: 0  Rows_examined: 0
# Query_time: 1.978150  Lock_time: 0.000208 Rows_sent: 0  Rows_examined: 0
# Query_time: 1.979560  Lock_time: 0.000210 Rows_sent: 0  Rows_examined: 0
# Query_time: 1.416010  Lock_time: 0.000458 Rows_sent: 0  Rows_examined: 0
etc... 
```

我已尝试更改数据库 jdbc 驱动程序，并确保在我当前使用的 mysql 版本中没有记录此类错误。

谢谢大家的意见！

# post - Amazon S3 浏览器上传 - 是否可以上传多个文件？

> ID：10924861
> 
> 赞同：0
> 
> 时间：2012-06-07T02:26:32.877
> 
> 标签：post, file-upload, amazon-s3

是否可以使用基本上这种方法从浏览器将多个文件直接上传到 Amazon S3：[如何在 HTML 表单上上传多个文件](https://stackoverflow.com/questions/10924712/how-to-upload-multiple-files-on-an-html-form)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:25:30.860

不幸的是，简单的答案是，如果没有 JavaScript/Flash，这是不可能的。

# php - 到 IIS 和 PHP 的 HTTP POST - 键/值对限制？

> ID：10924863
> 
> 赞同：1
> 
> 时间：2012-06-07T02:26:39.293
> 
> 标签：php, http, iis, http-post, key-pair

我正在尝试调试将数据发布到 IIS（7.5）的 Web 应用程序中的问题，该应用程序将其传递给 PHP（5.3.5）应用程序（通过 FastCGI）。

该页面有一个动态表单，允许用户添加新字段，因此页面发布的键值对的数量会有所不同（表中的每一行有 6 个新的键值对）。一些用户完全疯了，添加了大量数据，这意味着在某些情况下，POST 正文中有超过 1,000 个键值对。

看起来 IIS、FastCGI 或 PHP 都在限制 POST 正文中键值对的数量。Fiddler 告诉我浏览器正确发送了所有 1,000 多对，但是如果我使用 PHP 立即回显 $_POST 中的每个键，则列表缩小了。所有发布的值都包含数据，但即使它们没有，我也确定不应该删除键。

谷歌搜索这个问题没有帮助，所以希望有人在这里有经验。澄清：

1.  重新设计应用程序可能会摆在桌面上，但只能作为最后的手段
2.  发布的数据量仍然很小 - 整个请求约为 50kb
3.  神奇的数字似乎在 1,000 左右（可能是 1,005，但测试有点像猪，所以我不能完全肯定地说）

对此的任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T02:08:21.993

最终答案来自[这个线程](https://stackoverflow.com/questions/9505192/php-post-limited-to-1000-variables)

PHP`max_input_vars`是问题所在

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T02:52:26.497

IIS 有请求限制，从另一篇文章中找到：

[对于 IIS 7，通过 HTTPS 进行 POST 是否有限制？](https://stackoverflow.com/questions/4829107/is-there-a-limit-to-post-over-https-for-iis-7)

好像你正在做动态表格。我建议您查看 Google Docs 中的“表单”，并考虑通过 AJAX 将整个表单的内容部分更新到服务器端。这将消耗更多的带宽和连接的稳定性，但它会解决您的 1000 或 1005 限制。

另一种方法是控制用户期望并设置上限。

# asp.net - 我的 HTML5 文档类型必须在第一行吗？

> ID：10924865
> 
> 赞同：25
> 
> 时间：2012-06-07T02:26:57.180
> 
> 标签：asp.net, html, html5-video, doctype

我一直想知道DOCTYPE 之前的**空格**是否重要，但我似乎无法在网络上找到任何确定的信息。人们说不要这样做，但我看不出它可能会产生什么影响，或者即使规范说它必须是那样的。我不知道它是否会触发 IE 中的兼容模式或类似的烦人。

原因是，在我的（糟糕的 asp.net）代码中，我更喜欢这样写：

```
<%@ Page language="c#" Codepage="65001" AutoEventWireup="true" %>
<%@ OutputCache Location="None" VaryByParam="none" %>
<!doctype html> 
```

比：

```
<%@ Page language="c#" Codepage="65001" AutoEventWireup="true" %><%@ OutputCache Location="None" VaryByParam="none" %><!doctype html> 
```

因为第一个更整洁。但最上面的结果是呈现的 html 中有几行空行。

不是什么大问题。我一直想知道这是否重要:)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-07T02:33:28.493

是的！评论和空间可能是第一位的。

这是[官方 HTML 规范中的相关部分](https://html.spec.whatwg.org/multipage/syntax.html#writing)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-07T02:42:17.080

偶尔浏览器会在文档类型之前出现空白问题——典型的例子是 IE6，据说一看到它就会进入怪异模式。事实证明，这仅适用于某些非常特定类型的空格（例如，不可破坏的空格， ）。也就是说，IE6 兼容性在大多数人的优先级列表中并不高。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-07T05:01:35.693

为了最大限度地避免 Quirks Mode，请将 doctype 声明放在 HTML 文档的开头。你不会找到任何官方声明，因为 Quirks Mode 是关于违反标准和关于实际浏览器行为的。Quirks Mode 的理念的一部分是它在很大程度上没有记录。作者不应该相信它。它的目的是让遗留页面表现得可以容忍（就像他们过去一样），而不是你应该用于新页面的东西。

现代浏览器通常允许在文档类型、注释或 XML 声明之前有一个空行，而无需进入 Quirks 模式。但是不要在那里放任何东西，除非你有令人信服的理由这样做。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-28T16:32:09.713

请注意，Ray 链接到的 HTML 规范是错误的。虽然在 DOCTYPE 之前允许有空格，但规范说注释也可以在 DOCTYPE 之前。但这在 Internet Explorer 9 及更早版本中不起作用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-07T02:30:35.390

不，`Doctype`不一定是*文件的第一行，*但它**必须在`<html>`标签之前。**这是您唯一的限制，因此您的第一种方法很好。

> 声明必须是 HTML 文档中的第一件事，在标记之前。
> 
> 来自：[w3学校（doctypes）](http://www.w3schools.com/tags/tag_DOCTYPE.asp)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-14T14:59:04.910

实际上，实用的建议是将包含`<meta charset="UTF-8">`语句的初始文本限制为 1024 个字节。这是由于某些浏览器需要使用有限的预扫描来在缺少字符编码标头时快速确定字符编码。

有关详细信息，请参阅[W3C](https://www.w3.org/International/questions/qa-html-encoding-declarations)和[Sivonen](https://hsivonen.fi/utf-8-detection/)。

# objective-c - 向 MKMapView 添加多个叠加层

> ID：10924874
> 
> 赞同：4
> 
> 时间：2012-06-07T02:28:29.290
> 
> 标签：objective-c, ios, xcode, mkmapview, mkoverlay

我在理解如何向 MKMapView 添加多个叠加层时遇到了一些麻烦。

我跟踪了一个数组路线。跟踪的路线是 CLLocations 的数组。所以我有一个数组数组。

我可以选择一条路线并将其绘制在地图视图上。但是，我需要将所有路线绘制到地图视图上。

所以这是我为 1 条路线创建 MKPolyline 的方法：

```
-(void) loadRoute
{
    //So we grab an array that holds all the locations of one route. 
            NSArray *locations = [[NSArray alloc] initWithArray:[routesArray objectAtIndex:0]];

            // while we create the route points, we will also be calculating the bounding box of our route
            // so we can easily zoom in on it. 
            MKMapPoint northEastPoint; 
            MKMapPoint southWestPoint; 

            // create a c array of points. 
            MKMapPoint* pointArr = malloc(sizeof(CLLocationCoordinate2D) *[locations count]);

            for(int idx = 0; idx < [locations count]; idx++)
            {
                CLLocation *tempLoc = (CLLocation*)[locations objectAtIndex:idx];

                CLLocationDegrees latitude  = tempLoc.coordinate.latitude;
                CLLocationDegrees longitude = tempLoc.coordinate.longitude;

                // create our coordinate and add it to the correct spot in the array 
                CLLocationCoordinate2D coordinate = CLLocationCoordinate2DMake(latitude, longitude);

                MKMapPoint point = MKMapPointForCoordinate(coordinate);

                // if it is the first point, just use them, since we have nothing to compare to yet. 
                if (idx == 0) {
                    northEastPoint = point;
                    southWestPoint = point;
                }
                else 
                {
                    if (point.x > northEastPoint.x) 
                        northEastPoint.x = point.x;
                    if(point.y > northEastPoint.y)
                        northEastPoint.y = point.y;
                    if (point.x < southWestPoint.x) 
                        southWestPoint.x = point.x;
                    if (point.y < southWestPoint.y) 
                        southWestPoint.y = point.y;
                }
                pointArr[idx] = point;
            }

            self.routeLine = [MKPolyline polylineWithPoints:pointArr count:[locations count]];

//Zoom in to fit route on screen
            _routeRect = MKMapRectMake(southWestPoint.x, southWestPoint.y, northEastPoint.x - southWestPoint.x, northEastPoint.y - southWestPoint.y);

            // clear the memory allocated earlier for the points
            free(pointArr);

} 
```

这是返回叠加层的 MapKit 委托调用：

```
#pragma mark MKMapViewDelegate

- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay
{
    MKOverlayView* overlayView = nil;

    if(overlay == self.routeLine)
    {
        //if we have not yet created an overlay view for this overlay, create it now. 
        if(nil == self.routeLineView)
        {
            self.routeLineView = [[MKPolylineView alloc] initWithPolyline:self.routeLine];
            self.routeLineView.fillColor = [UIColor redColor];
            self.routeLineView.strokeColor = [UIColor redColor];
            self.routeLineView.lineWidth = 3;
        }
        overlayView = self.routeLineView;
    }

    return overlayView;
} 
```

所以上面给出的所有代码都可以正常工作。我不知道如何加载更多叠加层来显示其他路线。

我认为可能在 loadRoute 方法中，遍历所有路由并为每个路由创建一个 MKOverlayView。将所有这些 MKOverlayView 存储在一个数组中，然后执行： [self.mapView addOverlays:array];

但它不起作用。问题是，在委托方法中，我不知何故需要知道要返回哪个覆盖。

因此，如果我可以按照以下方式做一些事情：

```
- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay
{
    int tag = overlay.tag;
    return (MKOverlayView*)[arrayOfViews objectAtIndex:tag];
} 
```

它会工作得很好。但不幸的是，它不是那样工作的:(

任何帮助将不胜感激！

编辑：

我在 ViewDidLoad 中使用它来添加覆盖：

```
[self loadRoute];

        // add the overlay to the map
        if (nil != self.routeLine) {
            [self.mapView addOverlay:self.routeLine];
        }

        // zoom in on the route. 
        [self zoomInOnRoute]; 
```

这是在标题中：

```
// the data representing the route points. 
    MKPolyline* _routeLine;

    // the view we create for the line on the map
    MKPolylineView* _routeLineView;

    // the rect that bounds the loaded points
    MKMapRect _routeRect; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T03:28:45.003

和变量一次只能指向一个叠加和叠加视图，因此理论上您需要一组此类变量`routeLine`。`routeLineView`

但是，根据显示的代码，您不需要首先保留对这些的引用。

我建议删除`routeLine`and`routeLineView`变量。

然后，您只需在本地创建一个覆盖对象并`viewForOverlay`返回请求`overlay`参数的视图。

在该`loadRoute`方法中，您可以循环遍历`routesArray`每个路由，创建一个本地覆盖对象，然后调用`addOverlay`它。

还有一种更简单的方法可以构建一个限制所有路线的地图矩形，这样您就可以设置地图的区域以显示所有路线。

例子：

```
-(void) loadRoute
{
    _routeRect = MKMapRectNull;

    for (int raIndex = 0; raIndex < routesArray.count; raIndex++) 
    {
        //So we grab an array that holds all the locations of one route. 
        NSArray *locations = [[NSArray alloc] initWithArray:
                                 [routesArray objectAtIndex:raIndex]];
        //note we are getting object at raIndex (not 0) above

        //...no change to existing code here...

        //self.routeLine = [MKPolyline polylineWithPoints:pointArr count:[locations count]];
        //replace above line with this...
        MKPolyline *pl = [MKPolyline polylineWithPoints:pointArr count:[locations count]];
        [mapView addOverlay:pl];

        //Zoom in to fit route on screen
        //_routeRect = MKMapRectMake(southWestPoint.x, southWestPoint.y, northEastPoint.x - southWestPoint.x, northEastPoint.y - southWestPoint.y);
        //replace above line with this to create a rect around ALL routes...
        if (MKMapRectIsNull(_routeRect))
            _routeRect = pl.boundingMapRect;
        else
            _routeRect = MKMapRectUnion(_routeRect, pl.boundingMapRect);

        // clear the memory allocated earlier for the points
        free(pointArr);
    }    
} 
```

在`viewDidLoad`，只打电话`loadRoute`不打电话`addOverlay`。

该`viewForOverlay`方法变得更加简单：

```
- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay
{
    MKPolylineView *pv = [[MKPolylineView alloc] initWithPolyline:overlay];
    pv.fillColor = [UIColor redColor];
    pv.strokeColor = [UIColor redColor];
    pv.lineWidth = 3;
    return pv;
} 
```

顺便说一句，在`loadRoute`这一行：

```
MKMapPoint* pointArr = malloc(sizeof(CLLocationCoordinate2D) *[locations count]); 
```

应该：

```
MKMapPoint* pointArr = malloc(sizeof(MKMapPoint) *[locations count]); 
```

它应该使用`MKMapPoint`(not `CLLocationCoordinate2D`) 的大小。
它们不是一回事（即使结构碰巧是相同的字节大小）。

# php - Linux 服务器中的 Zend 框架配置

> ID：10924878
> 
> 赞同：1
> 
> 时间：2012-06-07T02:29:17.887
> 
> 标签：php, apache, zend-framework, .htaccess

我在配置`.htaccess`文件 Zend 框架时遇到问题。在我的本地服务器上运行 apache 和 windows 7 运行正常。

但是当我尝试在实时服务器中运行它时，它显示`403 Forbidden`

这是我的 .htaccess 配置

```
Options +FollowSymLinks

RewriteEngine On

RewriteRule ^\.htaccess$ - [F]

RewriteCond %{REQUEST_URI} =""
RewriteRule ^.*$ /public/index.php [NC,L]

RewriteCond %{REQUEST_URI} !^/public/.*$
RewriteRule ^(.*)$ /public/$1

RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^.*$ - [NC,L]

RewriteCond $1 !^(favicon\.ico|favicon\.png|media|robots\.txt|crossdomain\.xml|css|js)
RewriteRule ^public/.*$ /public/index.php [NC,L]

Options -Indexes 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T05:53:49.420

我认为如果你简化你的`.htaccess`规则，你可以让事情正常工作。

由于您的 Zend Framework`index.php`文件可能位于`public_html/public`.open`httpd.conf`或`httpd-vhosts.conf`取决于您的配置，然后添加`/public`到您的`DocumentRoot`.

这样，`public`将成为 Web 可访问目录，并且它下面的所有内容（包括 ZF 应用程序文件）都将受到保护。

进行更改后，将所有`.htaccess`文件替换为标准 Zend Framework 重写规则：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

此外，请确保以下所有项目均属实，否则可能无法正常运行：

*   `AllowOverride All`为您的 public_html 目录设置`httpd.conf`
*   Chmod `644`for`.htaccess`和所有 PHP 脚本，`755`适用于大多数目录
*   `APPLICATION_PATH`在 index.php 中是正确的

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T02:57:55.883

几乎总是因为 Apache 用户没有读取这些文件的权限。

# python - 在嵌套字典上使用 ast.literal_eval

> ID：10924884
> 
> 赞同：3
> 
> 时间：2012-06-07T02:30:24.110
> 
> 标签：python, json, dictionary, eval, abstract-syntax-tree

我正在使用 ast.literal_eval 将从 json.loads() 收到的数据更改为 Python 字典；但是，如果我应该以一种完全不同的方式来解决这个问题 - 请随时指出这一点。

```
# Authentication
buf = StringIO.StringIO()
c = pycurl.Curl()
c.setopt(c.URL, "https://kippt.com/api/account")
c.setopt(c.WRITEFUNCTION, buf.write)
c.setopt(c.HTTPHEADER, header)
c.perform()

result = buf.getvalue()
buf.close()

print result

# Printing Output
data_string = json.dumps(result)
jsonload = json.loads(data_string)
jsondict = ast.literal_eval(jsonload) 
```

目前它可以与单行 JSON 返回一起正常工作，例如：

{“用户名”：“我的用户名”，“api_token”：“my_api_token”}

我可以通过以下方式正确获取值：

```
print jsondict['username']
print jsondict['api_token'] 
```

我遇到问题的部分是数据嵌套时，例如：

> {“meta”：{“next”：null，“total_count”：6，“previous”：null，“limit”：20，“offset”：0}，“objects”：[{“rss_url”：“https： //kippt.com/feed/username_here/stuff_here/cool-stuff", "updated": "1339003710", "title": "Cool Stuff", "created": "1339001514", "slug": "cool-stuff ”，“id”：54533，“resource_uri”：“/api/lists/54533/”}，{“rss_url”：“https://kippt.com/feed/username_here/stuff_here/programming”，“更新”： “1339003479”、“title”：“Programming”、“created”：“1339001487”、“slug”：“programming”、“id”：54532、“resource_uri”：“/api/lists/54532/”}，{“rss_url”：“https://kippt.com/feed/username_here/stuff_here/android”，“更新”：“1339003520”，“标题”：“Android”， “创建”：“1339000936”，“slug”：“android”，“id”：54530，“resource_uri”：“/api/lists/54530/”}，{“rss_url”：“https://kippt.com /feed/username_here/stuff_here/chrome", "updated": "1339000931", "title": "Chrome", "created": "1339000412", "slug": "chrome", "id": 54529, "resource_uri ": "/api/lists/54529/"}, {"rss_url": "https://kippt.com/feed/username_here/stuff_here/inbox", "更新": "1338946730”，“标题”：“收件箱”，“已创建”：“1338945940”，“slug”：“收件箱”，“id”：54432，“resource_uri”：“/api/lists/54432/”}，{“ rss_url”：“https://kippt.com/feed/username_here/stuff_here/read-later”，“更新”：“1338945940”，“标题”：“稍后阅读”，“创建”：“1338945940”，“slug ": "稍后阅读", "id": 54433, "resource_uri": "/api/lists/54433/"}]}com/feed/username_here/stuff_here/read-later”、“updated”：“1338945940”、“title”：“稍后阅读”、“created”：“1338945940”、“slug”：“稍后阅读”、“id ": 54433, "resource_uri": "/api/lists/54433/"}]}com/feed/username_here/stuff_here/read-later”、“updated”：“1338945940”、“title”：“稍后阅读”、“created”：“1338945940”、“slug”：“稍后阅读”、“id ": 54433, "resource_uri": "/api/lists/54433/"}]}

当我使用相同的代码（/api/lists 的交换 URL）时，我在运行脚本时收到以下错误：

> 回溯（最后一次调用）：文件“kippt.py”，第 48 行，在 jsondict = ast.literal_eval(jsonload) 文件“/usr/local/lib/python2.7/ast.py”，第 80 行，在literal_eval return _convert(node_or_string) File "/usr/local/lib/python2.7/ast.py", line 63, in _convert in zip(node.keys, node.values)) File "/usr/local/lib/python2 .7/ast.py”，第 62 行，返回 dict((_convert(k), _convert(v)) for k, v 文件“/usr/local/lib/python2.7/ast.py”，第 63 行，在 _convert in zip(node.keys, node.values)) 文件“/usr/local/lib/python2.7/ast.py”，第 62 行，返回 dict((_convert(k), _convert(v) ) for k, v File "/usr/local/lib/python2.7/ast.py", line 79, in _convert raise ValueError('malformed string') ValueError: malformed string

任何帮助，将不胜感激。谢谢！

## 编辑 - 在下面回答：

看起来我的第一个输入可能被解释为 Python 语法，这是我的错，因为我在技术上没有以正确的方式开始。

我现在只想 json.loads() 我从 cURL 得到的结果，而不是做我以前做的那些古怪的事情。

例如：

```
buf = StringIO.StringIO()
c = pycurl.Curl()
c.setopt(c.URL, "https://kippt.com/api/lists")
c.setopt(c.WRITEFUNCTION, buf.write)
c.setopt(c.HTTPHEADER, header)
c.perform()

result = buf.getvalue()
buf.close()

print result

# Printing Output
jsonload = json.loads(result)
print jsonload['meta']['total_count'] # Gets the total_count item in the meta object. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T02:45:32.990

`ast.literal_eval`嵌套字典没有问题：

```
>>> ast.literal_eval("{'a': {'b':'c'}}")
{'a': {'b': 'c'}} 
```

`ast.literal_eval`正在破坏，因为数据实际上是 JSON……而且 JSON 不是有效的 Python。具体来说，`null`它不是有效的 Python 文字。

为什么不只是`json.loads()`用来加载数据呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-01T08:35:21.567

我想出了一个场景，我想在 pandas 中使用 json.normalize 但值是 str 类型。使用 ast.literal_eval，我输入 cast

您可以像下面一样使用 ast.literal_eval - df[column_name] = df[column_name].apply(ast.literal_eval)

这会将 str 转换为 dict。例如。df = [{'A': "{'value': '1'}", 'B': "{'value': '2'}"}]

应用文字 eval - df = [{'A': {'value': '1'}, 'B': {'value': '2'}}]

# python - 是否可以使用 dist utils (setup.py) 包含子目录作为包数据的一部分？

> ID：10924885
> 
> 赞同：39
> 
> 时间：2012-06-07T02:30:25.103
> 
> 标签：python, installation, distutils, setup.py

基本上我的python包的设置如下：

```
module
\_examples
  \_folder1
     \_file1.py
     \_file2.py
  \_folder2
    \_file1.py
    \_file2.py 
```

基本上我只想使用：

```
package_data  = { 
            'module': ['examples/*'],
  }, 
```

因为我的项目总是有人添加示例，我希望可以轻松地从我的应用程序中列出它们。我可以让它适用于示例中的任何文件，但不能通过子目录重新诅咒。这可能吗？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2014-03-16T20:12:53.440

我相信您正在寻找的是类似这样的东西`setup.py`，它将递归地找到项目中的任何包，还确保将`__init__.py`文件包含到您想要的每个包的子目录中。

```
from setuptools import setup, find_packages

setup(name='MySoftware',
      packages=find_packages()
) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-04-09T21:12:44.293

# 介绍

我遇到了这篇文章并花了一些时间弄清楚如何将特定的子模块添加到我的包中，所以我将在这里发布我的解决方案。

# 解决方案

在我的包根文件夹中，我有一个`setup.py`文件[see doc](https://docs.python.org/2/distutils/setupscript.html)
在这个文件中，我有以下代码：

```
from setuptools import setup

with open("README.md", "r") as fh:
    long_description = fh.read()

setup(
    name='package name',
    version='0.4.1',
    description='short description',
    long_description=long_description,
    long_description_content_type="text/markdown",
    url='repository url',
    author='My name',
    author_email='my@e.mail',
    license='MIT',
    packages=['PackageName','PackageName.SubModule'],
    zip_safe=False,
    install_requires=[
        'dependecy1',
    ],
    classifiers=[
        'Development Status :: 3 - Alpha',
        'License :: OSI Approved :: MIT License',
        'Programming Language :: Python :: 3.7'
    ]
) 
```

回答这个问题的有趣部分是： `packages=['PackageName','PackageName.SubModule'],`

通过遵循此语法，您可以将子模块包含到您的主包分发中。

有关所有其他参数的更多信息可以在[doc](https://docs.python.org/2/distutils/setupscript.html)中找到。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-07T02:40:39.047

您必须为此使用[`MANIFEST.in`](http://docs.python.org/distutils/sourcedist.html#manifest-template)文件。

我相信你会想要这样的东西：

```
$猫清单.in
递归包含示例/ *.py

```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-05-10T14:08:37.277

是的，您可以包含所有子目录。

您只需将以下参数传递给 setup() 函数：

```
packages=find_packages()

include_package_data=True 
```

除此之外，您还需要一个 MANIFEST.in 文件，其内容为

```
recursive-include examples * 
```

这可确保递归包含所有文件。

如果要专门排除某些扩展，可以通过在`find_packages()`参数中指定排除数组来实现。

例如：排除`.txt`文件

```
packages=find_packages(exclude=['.txt']) 
```

`include_package_data` [您可以在此处](https://svn.python.org/projects/sandbox/trunk/setuptools/setuptools.txt)阅读更多信息。

[这里](https://stackoverflow.com/questions/7522250/how-to-include-package-data-with-setuptools-distribute)还有另一个链接，它告诉你什么时候不应该使用`include_package_data`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-02-23T03:55:14.993

在类似情况下，没有一个建议的答案对我有用。

我需要使用我的包进行分发，该包在一个子目录中包含几个子模块，因此这些是我需要进入的文件`sdist`：

```
ipyexperiments/*py
ipyexperiments/utils/*py 
```

无论我尝试什么， subdir`utils`的模块都没有包含在`sdist`.

对我有用`config.py`的是保留默认值：

```
# config.py
from setuptools import setup, find_packages
[...]
setup(
    packages = find_packages(),
    [...]
) 
```

但添加到`MANIFEST.in`：

```
# MANIFEST.in
graft ipyexperiments 
```

并且所有内容都`ipyexperiments`包括在内。

如果您还没有`MANIFEST.in`，请在与`config.py`.

我还添加到`MANIFEST.in`

```
prune tests
global-exclude *.py[co] 
```

在任何地方排除所有`tests`目录和任何不需要的`*pyc`文件`*.pyo`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-03-16T12:31:32.810

您可以使用以下`include`参数`find_packages()`：

```
...
setup(name="module",
      packages=find_packages(include=('module*',)),
... 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-15T15:36:21.813

按照 David Wolever 的说法，只是为了更清楚一点。如果您想将所有内容包含在子目录文件夹下，您必须在 MANIFEST.in 中明确指定每个文件，

`recursive-include examples/ *.py *.png *.sh`ETC.....

如果 manifest.in 能够理解 `examples/`并包含所有内容，那就太好了。

# android - 当我为移动设备创建网络应用程序时，我是否应该准备多种尺寸的图像以适合每台设备

> ID：10924888
> 
> 赞同：1
> 
> 时间：2012-06-07T02:30:35.760
> 
> 标签：android, iphone, web

我正在用 PhoneGap 编写一个网络应用程序。
另外，我想在主页中有一个背景图片。
但是，我知道有许多不同尺寸的设备。
如何适应每个设备，如果我想将按钮放在屏幕中间，是否需要通过检测每个设备的宽度和高度来计算绝对位置？
我真的很担心网络应用程序中每个项目的位置。
请帮忙解决。

# facebook - 用户单击“允许”后，如何防止 Facebook 画布应用重定向？

> ID：10924890
> 
> 赞同：0
> 
> 时间：2012-06-07T02:30:48.730
> 
> 标签：facebook, facebook-canvas

我目前有一个网站，一旦用户在 Facebook 上“允许”，FB 会将用户重定向回我的网站。

这个功能很好......但是，我试图让它在画布应用程序中运行。我想请求嵌入在画布应用程序中的权限，并在用户单击“允许”而不是重定向到该站点后留在画布应用程序中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T06:11:45.810

只需在客户端执行 - 使用您想要授予的权限调用 FB.login，用户将留在您的画布页面上。

# javascript - 悬停动画

> ID：10924893
> 
> 赞同：0
> 
> 时间：2012-06-07T02:31:08.353
> 
> 标签：javascript, jquery, animation

我怎样才能使`hover()`连续运行？我希望当我将鼠标悬停时`#up_btn`，该`top`属性会保持动画效果。现在，它只运行一次。

```
$(document).ready(function(){
    $("#up_btn").hover(function(){
        var new_num = parseInt($("#move_box").css("top"));
        $("#move_box").css("top", new_num + 1);
    })
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T02:38:25.990

您可以使用`setInterval`让您的代码重复运行，然后使用`clearInterval`停止动画：

```
$(document).ready(function() {
    var timer;

    $("#up_btn").hover(function() {
        timer = setInterval(function() {
            $("#move_box").css('top', '+= 1');
        }, 100); // Change the interval as you see fit.
    }, function() {
        clearInterval(timer);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T02:38:37.757

使用`setInterval`或`setTimeout`。例如：

```
var move_box_interval;
$(document).ready(function() {
    $("#up_btn").hover(function() {
        // Change the interval to be appropriate. It's in milliseconds.
        move_box_interval = setInterval(move_box, 100);
    });

    // Change this to the appropriate trigger.
    $("#up_btn").mouseout(function() {
        clearInterval(move_box_interval);
    });
});

function move_box() {
    $("#move_box").css("top", "+= 1");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T02:37:57.413

```
$(document).ready(function() {
    $("#up_btn").mouseenter(function() {
        var new_num = parseInt($("#move_box").css("top"));
        $("#move_box").css("top", new_num + 1);
    })
}) 
```

# ruby-on-rails - Rails：用户使用 Devise 编辑表单和密码

> ID：10924900
> 
> 赞同：1
> 
> 时间：2012-06-07T02:32:15.230
> 
> 标签：ruby-on-rails, devise, passwords

我在开发我的第一个 Rails（Ruby 也是如此）应用程序时正在处理的新问题。

我正在使用（按特定顺序）：设计、注册、用户

生成 Registration 脚手架/模型后，我将文件从 devise/views/registrations 移动到 /views/registrations。

生成用户脚手架后，我将 edit.html.erb 和 show.html.erb 移动到 /views/users

我没有使用特定的管理员控制器，但我有一些代码可以检查 current_user 的管理员权限，如果是这样，我想让管理员能够编辑任何用户的信息，而无需输入密码。因此，如果 current_user 不是管理员（并且该部分运行正常），我为编辑显示的表单会跳过密码字段。

编辑表单显示正常，并且表单的字段填充有正在编辑的用户（不是 current_user）信息。

我遇到的问题是，当我点击更新时，我收到错误消息，告诉我密码丢失等。

我怀疑这与编辑表单操作（也许还有其他）有关。

这是我在 edit.html.erb 中的表单声明（这是最初由 Devise 创建的原始表单声明，当我将其移至注册然后移至用户视图时，它与文件一起移动）：

```
<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put }) do |f| %> 
```

当我使用 firebug 查看表单的 HTML 时，我看到的是：

```
<form id="new_user" class="new_user" method="post" action="/" accept-charset="UTF-8"> 
```

如果我将registration_path更改为edit_user_path：

```
<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put }) do |f| %> 
```

这是我在 HTML 中得到的：

```
<form id="new_user" class="new_user" method="post" action="/users/user/edit" accept-charset="UTF-8"> 
```

另外，当我尝试在这里提交表单时，它告诉我：

```
No route matches [PUT] "/users/user/edit" 
```

在我的 users_controller.rb 中，我有以下内容（我从注册控制器中删除了编辑和更新方法）：

```
def edit
  @user = User.find(params[:id])
end
def update
  respond_to do |format|
    if @user.update_attributes(params[:user])
      format.html { redirect_to root_url, flash[:notice] = SUCCESSFUL_REGISTRATION_UPDATE_MSG }
      format.json { head :no_content }
    else
      format.html { render action: "edit" }
      format.json { render json: @user.errors, status: :unprocessable_entity }
    end
  end
end 
```

仅供参考：这是我生成路线时看到的内容：

```
 edit_user GET    /users/:id/edit(.:format)      users#edit
                user GET    /users/:id(.:format)           users#show
                     PUT    /users/:id(.:format)           users#update
cancel_user_registration GET    /cancel(.:format)              registrations#cancel
   user_registration POST   /                              registrations#create
   new_user_registration GET    /request_invite(.:format)      registrations#new
  edit_user_registration GET    /edit(.:format)                registrations#edit
                         PUT    /                              registrations#update 
```

有任何想法吗？

# 解决方案

就我而言，由于我使用的是更新，因此解决方案是使用 update_without_password。相反，如果这是新的并且我不想要求密码，那么它将是：save_without_password

```
def update
  @user = User.find(params[:id])
  respond_to do |format|
    if @user.update_without_password(params[:user])
      format.html { redirect_to root_url, flash[:notice] = SUCCESSFUL_REGISTRATION_UPDATE_MSG }
      format.json { head :no_content }
    else
      format.html { render action: "edit" }
      format.json { render json: @user.errors, status: :unprocessable_entity }
    end
   end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T04:03:29.900

请记住，您的用户模型并没有什么特别之处，因为设计正在处理逻辑。您可以轻松地创建一个新的控制器/视图来编辑用户配置文件，并授予管理员对其的访问权限。（这就是我所做的，我不喜欢用户必须输入密码才能进行任何更改）

```
$ rails g controller users
resources :users, :only => [:edit, :update] 
```

之后，它与任何控制器/视图几乎相同

# css - 带有背景图像的 CSS 菜单。如何使用 % 和 EM 正确地放大和缩小

> ID：10924902
> 
> 赞同：0
> 
> 时间：2012-06-07T02:32:19.693
> 
> 标签：css, menu, background-image, responsive-design, em

我有这个菜单；[http://fhemmel.host56.com/stack/](http://fhemmel.host56.com/stack/) 我希望它在我调整窗口大小时放大和缩小，但仍然可以正确显示 % 和 EM。我试图修复 x 和 y 位置以及基本位置以使其出现，但我无法让它出现。

任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:13:03.790

我猜你需要它用于手机 :) 最好的方法是使用 % 来完成，然后一切都会自动进行，但是对于这个而不是将图像作为背景，你需要将它们作为 HTML 标记来执行。您无法重新缩放背景元素（好的，您可以使用 transform: scale 来完成，但在这种情况下它对您没有帮助）。

然后你会有这样的东西[http://jsfiddle.net/55m8j/1/](http://jsfiddle.net/55m8j/1/)：

```
<nav>
   <ul>
    <li><a href="index.html" id="side1"><img src="image1.jpg"></a></li>             
    <li><a href="index.html" id="side2"><img src="image2.jpg"></a></li>
    <li><a href="index.html" id="side3"><img src="image3.jpg"></a></li>
    <li><a href="index.html" id="side4"><img src="image4.jpg"></a></li>
    <li><a href="index.html" id="side5"><img src="image5.jpg"></a></li>
   </ul>
</nav> 
```

在 CSS 中

```
nav ul {list-style-type: none;}
nav ul li {width: 20%; float: left;}
nav ul li a {display: block;}
nav ul li a img {width: 100%; } 
```

其他方法只是制作菜单而不是图像。您可以使用 squirell 渲染字体、添加文本阴影、一些渐变、边框，结果将是相似的 :)

# asp.net-mvc - ASP.NET MVC 持久化数据

> ID：10924904
> 
> 赞同：1
> 
> 时间：2012-06-07T02:32:25.687
> 
> 标签：asp.net-mvc, session-state, persist, tempdata

我正在使用 ASP.NET MVC 4 并且有一种情况，我将一些数据保存在 MasterController 中，因为我想在跨站点导航栏中预加载一些数据。

```
abstract class MasterController : Controller
{
    FakeObject MyData { get; set; }

    if (this.MyData == null)
    {
        this.MyData = // do something crazy and load lots of data
    }
} 
```

每个控制器都继承自 MasterController

```
class HomeController : MasterController
{
    ActionResults Index()
    {
        return View();
    }
} 
```

问题是每次回发时，MyData 都会被覆盖。**我正在尝试找到一种方法来存储这些数据并在不使用 SessionState 的情况下在 PostBacks 之间检索它。这可以做到吗？**也许我对 MasterController 的使用不正确。

我尝试了以下方法，但它不起作用:(

```
TempData.Add("mydata", MyData);
TempData.Keep("mydata"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T04:51:28.007

如果这基本上是静态数据，则可以使用内置缓存。

```
abstract class MasterController : Controller
{
    public MasterController() { if (Cache["Foo"] == null) Cache["Foo"] = Something; }
}

class HomeController : MasterController
{
    ActionResults Index()
    {
        return View(Cache["Foo"]);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T02:40:25.553

我不确定你在哪里`if(String.IsNullOrEmpty...`被使用（我认为你缺少一个包含成员；那不是有效的代码。

但是，我认为您可能需要考虑依赖注入和松散耦合，而不是在控制器中硬编码业务逻辑。这里有两个建议。

**选项 1：依赖注入和 TempData**

```
public interface IFakeObjectFactory
{
      FakeObject Create();
}

public class FakeObjectFactory : IFakeObjectFactory
{
      public FakeObject Create()
      {
          // create FakeObject
      }
} 
```

然后你的控制器看起来更像这样：

```
public abstract class MasterController : Controller
{
    protected IFakeObjectFactory FakeObjectFactory { get; private set; }

    private FakeObject _myData;

    protected FakeObject EnsureMyData() 
    {
         if (_myData != null) return _myData;

          _myData = TempData["myData"] as FakeObject ?? FakeObjectFactory.Create();

          TempData["myData"] = _myData;
    }

    protected MasterController(IFakeObjectFactory fakeDataFactory)
    {
        FakeDataFactory = fakeDataFactory;
    }
}

public class HomeController : MasterController
{
    public HomeController(IFakeObjectFactory fakeObjectFactory)
      : base(fakeObjectFactory)
    { }

    ActionResults Index()
    {
        ViewBag.MyData = EnsureMyData();

        return View(); // you could also use MyData as the view model, rather than using ViewBag above. not sure what you need from here.
    }
} 
```

现在，您可以使用 Inversion of Control 容器来创建您的控制器并为您注入依赖项（一些流行的 IoC 是 Ninject 和 Autofac）。如果你觉得你还没有准备好，你总是可以在你的`EnsureMyData`方法中硬编码创建一个工厂的实例，并去掉 and 中的构造函数`HomeController`参数`MasterController`。

使用工厂接口和依赖注入的好处是您可以独立于控制器创建、测试和维护工厂。如果需要，您还可以在将来很容易地换出实现。

**选项 2：使用静态只读字段**

另一个选项（如果`MyData`是常量）是您可以将其设为 的静态成员`MasterController`，而不是使用`TempData`.

```
public abstract MasterController : Controller
{
    public static readonly FakeData MyData;

    static MasterController()
    {
       // Initialize MyData
    }
}

public HomeController : MasterController
{
    public ActionResult Index()
    {
        ViewBag.MyData = MyData;

        View(); // you could also use MyData as the view model, rather than using ViewBag above. not sure what you need from here.
    }
} 
```

我不推荐这种方法，除非逻辑非常简单，或者您只是不关心并且想要快速而肮脏的东西。测试单例和静态方法是一件很痛苦的事情。

# c++ - iostream 是一个类

> ID：10924905
> 
> 赞同：-1
> 
> 时间：2012-06-07T02:32:26.077
> 
> 标签：c++, class, header-files

我在帮助选项卡中的 Turbo c++ 中读到 iostream 是一个类，但直到我知道我的讲师告诉我们它是一个头文件，所以哪个是真正的 iostream 是一个头文件还是一个类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T02:37:08.630

... 或两者。您可以包含标题`<iostream>`并且有一个类型`std::iostream`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T02:41:16.753

iostream 确实是 C++ 中的一个类。您可以通过在代码中包含名为 iostream 的文件来访问此类：

```
// SomeFile.cpp
#include <iostream>

// Some code that makes use of the class iostream... 
```

这也适用于 C++ 中的其他流类，例如 istream、ostream、fstream 等。如果您愿意，请在您的 C++ 安装的包含目录中挖掘以查看这些类。

这在 C++ 中当然是一种非常常见的情况，因为经常会遇到类的实际定义存储在与类同名但扩展名为 .hpp 或 .cpp 的文件中。

# ruby-on-rails - 尝试使用 Koala 进行 fb apprequest，但访问令牌已过期。我该怎么处理？

> ID：10924906
> 
> 赞同：4
> 
> 时间：2012-06-07T02:32:28.837
> 
> 标签：ruby-on-rails, facebook, facebook-graph-api, koala

我知道这个关于过期令牌的问题已经被问过很多次了。但是我找不到适合我的情况。基本上我想向用户发出一个 fb apprequest，无论他/她在 Facebook 上是在线还是离线。

另外，我对 Facebook 文档感到困惑。如果有人能回答我下面的问题，非常感谢。

*   Facebook 访问令牌在用户退出 Facebook 后立即过期，除非它是长期令牌？

*   假设用户 A 访问令牌已过期。我是否有可能在用户 A 不返回我的画布应用程序的情况下获得新的访问令牌？

*   当我对用户进行身份验证时，我是否会获得一个短期令牌，然后我可以根据需要延长有效期，还是默认获得一个长期令牌？

下面是我使用 Koala 进行 fb 请求的代码：

```
begin
  graph = Koala::Facebook::API.new(access_token)
  graph.put_object("me", "apprequests", {:message => "..."})
rescue Koala::Facebook::APIError
  # Assume a user has a short-lived token and hasn't visit my application for a long time. 
  # Is it possible to get a NEW long-lived token here without the user going to my application again 
  # (assume the user did not remove my application) ? If Yes, how to do that using Koala ?
end 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-23T18:56:43.223

我看到了[这篇文章，它改编](https://github.com/mkdynamic/omniauth-facebook/issues/23#issuecomment-15565902)[了 Facebook 上 Railscast 的](http://railscasts.com/episodes/360-facebook-authentication)代码，展示了如何将短期令牌换成 60 天的令牌：

**用户.rb**

```
 def self.from_omniauth(auth)

    # immediately get 60 day auth token
    oauth = Koala::Facebook::OAuth.new(ENV["FACEBOOK_APP_ID"], ENV["FACEBOOK_SECRET"])
    new_access_info = oauth.exchange_access_token_info auth.credentials.token

    new_access_token = new_access_info["access_token"]
    new_access_expires_at = DateTime.now + new_access_info["expires"].to_i.seconds

    where(auth.slice(:provider, :uid)).first_or_initialize.tap do |user|
      user.provider = auth.provider
      user.uid = auth.uid
      user.name = auth.info.name
      user.image = auth.info.image
      user.email = auth.info.email
      user.oauth_token = new_access_token #originally auth.credentials.token
      user.oauth_expires_at = new_access_expires_at #originally Time.at(auth.credentials.expires_at)
      user.save!
    end
  end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T06:02:10.553

> Facebook 访问令牌在用户退出 Facebook 后立即过期，除非它是长期令牌？

是的。

> 假设用户 A 访问令牌已过期。我是否有可能在用户 A 不返回我的画布应用程序的情况下获得新的访问令牌？

用户必须以某种方式与您的应用交互，您才能获得新的令牌。该交互不必访问您的实际画布页面，也可以是在他正在访问的页面上调用 FB.getLoginStatus。

> 当我对用户进行身份验证时，我是否会获得一个短期令牌，然后我可以根据需要延长有效期，还是默认获得一个长期令牌？

如果您正在执行服务器端身份验证，您将获得一个长期有效的身份验证。在客户端执行此操作，您将获得一个短期令牌，然后您可以将其换成一个长期令牌。

但这一切都在这里清楚地描述：[https ://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-24T04:51:55.563

您可以使用以下方法更改 rails cast koala 教程连接：

```
def facebook
  if self.facebook_expires_at < Time.now
    oauth = Koala::Facebook::OAuth.new(ENV["FACEBOOK_KEY"], ENV["FACEBOOK_SECRET"])
    new_access_info = oauth.exchange_access_token_info self.facebook_token

    new_access_token = new_access_info["access_token"]
    new_access_expires_at = DateTime.now + new_access_info["expires"].to_i.seconds

    self.update_attributes!(:facebook_token => new_access_token,
                          :facebook_expires_at => new_access_expires_at )
  end
  @facebook ||= Koala::Facebook::API.new(self.facebook_token)
  block_given? ? yield(@facebook) : @facebook

  rescue Koala::Facebook::APIError => e
    logger.info e.to_s
    nil
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T04:55:44.830

这也是我必须处理的问题。我正在使用 Devise 从 Facebook 用户中创建用户，以进行身份​​验证令牌到期的身份验证。当令牌过期时，如果不让用户重新授权您的应用程序，就无法更新令牌。所以在我的情况下，我只需要销毁身份验证记录并且用户必须重新验证。救援看起来像：

```
 rescue Koala::Facebook::APIError => e
    if e.message.include?("OAuthException: Error validating access token:")
      Rails.logger.error "Facebook access token not valid for: #{my_model.facebook_authentication} with #{e}"
      my_model.facebook_authentication.destroy
    else
      Rails.logger.error "FacebookApi#perform Koala Error with #{e}, model_id:#{model.id}"
    end
  end 
```

希望这至少对您有所帮助。有兴趣知道您是否遇到其他解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-30T12:40:39.940

当用户通过 facebook 登录时，它非常简单，只需在您的数据库中更新您的令牌。每次用户登录更新您的数据库时，只需从 HASH 中获取令牌并更新令牌。通过这样做，您可以获得永不过期的令牌。我今天做到了，它也在工作。

# global-variables - 全局变量分配 RAM 地址

> ID：10924908
> 
> 赞同：1
> 
> 时间：2012-06-07T02:32:35.383
> 
> 标签：global-variables, ram, msp430, memory-address

我正在为 MSP430 微控制器编写 C 代码，我想将全局变量锁定到 RAM 中的特定地址。

原因是因为我在 RAM 地址的末尾有一个堆栈，并且向下增长到较低的地址。当堆栈溢出时，它开始覆盖存储在堆栈旁边的 RAM 中的全局变量。所以我想在堆栈旁边写一个水印并检查它是否溢出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:37:42.867

如果您知道 MSP430 设备上堆栈的末端应该在哪里，您可以这样做，例如：

```
int* ptr;           // will point to end of stack
ptr = (int*)0x0600; // memory address of the end of the stack
*ptr = 0x1234;      // value to assign to memory 
```

在 TI 论坛上，有人有同样的问题……看起来很有帮助：[http ://e2e.ti.com/support/development_tools/compiler/f/343/t/92002.aspx](http://e2e.ti.com/support/development_tools/compiler/f/343/t/92002.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-24T00:06:28.327

Code Composer Studio 的 StackWatch 和 StackIntact MSP430 代码

```
#include <string.h> // C string functions

unsigned int StackWatch(unsigned char fill);//prototype

const char stackstr[]="#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=";
//^stackstr needs to have enough characters to cover the size of stack 'intactness' you desire

#pragma DATA_SECTION (_stackTAIL, ".stack");//locate this variable at the stacks end (lowest address)
const char _stackTAIL;//don't futz with this variable //DANGEROUS

unsigned int stacktail=0;

unsigned int StackWatch(unsigned char fill)
{
 if (stacktail==0)
     {
         stacktail=(unsigned int)&_stackTAIL; //debugging
         strncpy((void *)stacktail ,stackstr,fill);
     }
 if(fill==0)stacktail=0;//discard the pointer

 return stacktail;
}//StackWatch

unsigned char StackIntact(unsigned char CHRS)
{
     if (stacktail==0)return 0;

     if (CHRS>strlen(stackstr))CHRS=strlen(stackstr);

     return strncmp((void *)stacktail, stackstr, CHRS);

}//StackIntact

////USE IT LIKE THIS>>
//in main only once as close to the beginning as possible..

//StackWatch(20); ///Make sure you have enough chars in the stackstr const...

//in a loop somewhere>>

//if(StackIntact(20))
//.ERROR CONDITION.//blink led or something..

//if it doesn't ==0 then the stack is not intact for that many characters

//////////////
//WHEN YOU ARE DONE WITH IT>>
//StackWatch(0);//discards the pointer to the end of the stack 
```

最初发布在这里[http://forums.hackaday.com/viewtopic.php?f=5&t=2998](http://forums.hackaday.com/viewtopic.php?f=5&t=2998)

我不知道我会把它留在生产代码中，但它对于调试代码真的很方便

也许......如果出现问题，重置可能会派上用场，但我认为它会再次发生，所以在生产质量代码中真的毫无意义是的，你可以通过 CCS 和诸如此类的东西来做到这一点，但那也是 PITA

另请注意，这是针对 CCS (Code Composer Studio) #pragma DATA_SECTION (_stackTAIL, ".stack") 是编译器特定的名称和编译指示，因此您可能需要使用不同的方法来获取地址，例如上面建议的方法

# python - 在python中的类内创建对象

> ID：10924909
> 
> 赞同：2
> 
> 时间：2012-06-07T02:32:53.517
> 
> 标签：python, oop, class, object

所以我在python中有这个类

```
class room (object):

    def __init__(self,number):
        self.room_number=number

    def get_room_num(self):
        return self.room_number 
```

我还有一个类叫House，基本上当我创建house对象时，我还需要为house创建房间对象，房间的数量将由用户选择。

我很难创建动态对象（因为它是由用户指定的，我们将有 1 个房间或 10 个房间），我不能给每个房间对象命名，因为我不知道手头有多少。

所以我试过这样

```
class House (object):

    def __init__(self,num_of_rooms):
        self.room_holder=[]
        for i in range(num_of_rooms):
            self.room_holder.append(room(i))

    def __iter__(self):
        return iter(self.room_holder) 
```

有没有更好的方法？，如果有，请帮忙

**iter**函数在那里，所以我可以迭代它，例如

```
mansion=House(10)

for i in mansion:
    print i.get_room_num() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T03:43:20.577

```
class Room(object):      # note: class name is Capitalized
    def __init__(self, number):
        self.number = number

    # get_ methods are non-Pythonic.
    # If you need to do some processing to retrieve room number,
    # make it a @property; otherwise, just use the field name

class House(object):
    def __init__(self, num_rooms):
        # I assume you don't want a room 0?
        self.rooms = [Room(i) for i in range(1, num_rooms+1)]
    def __iter__(self):
        return iter(self.rooms)

mansion = House(10)
for room in mansion:
    print room.number 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T02:38:35.193

你那里的东西没有错。有没有更好的办法？好吧，我猜你可以使用列表推导：

```
class House(object):
  def __init__(self, num_rooms):
    self.rooms=[room(i) for i in xrange(num_rooms)]
  def __iter__(self):
    return iter(self.rooms) 
```

不过，这些本质上是风格上的变化。正如我所说，我认为你所拥有的没有任何问题。

# mysql - mysql压缩文本？

> ID：10924911
> 
> 赞同：1
> 
> 时间：2012-06-07T02:33:21.517
> 
> 标签：mysql, database

我对 mysql 有点陌生，不确定压缩是如何工作的。基本上我有一个原始的 20GB 文件，我正在加载到 mysql 中。我知道当我使用 gzip 压缩它时，它通常在 2-4GB 之间。所以我的问题是，mysql 使用什么压缩（我可以更改它）吗？它仅适用于存储在表本身中的数据还是适用于文本？

这是我的桌子：

```
CREATE TABLE my_data (
  `ID` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `DATA` text NOT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=4; 
```

我的理解是`DATA`不存储在表本身中，而只是一个指向它的引用指针。我想知道压缩是否适用于数据本身或仅适用于引用指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T02:48:30.920

来自 mysql 文档 -

“当表为压缩格式时，写入溢出页面的所有数据都被“按原样”压缩；也就是说，InnoDB 将 zlib 压缩算法应用于整个数据项。除了数据，压缩的溢出页面包含未压缩的 header 和包含页面校验和和到下一个溢出页面的链接的预告片等。因此，如果数据高度可压缩，对于较长的 BLOB、TEXT 或 VARCHAR 列可以获得非常显着的存储节省，这通常是文本数据的情况（但不是以前压缩的图像）。”

我确信压缩算法适用于数据。

# ruby-on-rails-3 - capybara webkit 无法加载 mailto url

> ID：10924916
> 
> 赞同：3
> 
> 时间：2012-06-07T02:34:25.843
> 
> 标签：ruby-on-rails-3, capybara, rspec2, capybara-webkit

我正在测试我的 rails 集成测试`capybara-webkit`，我的 javascript 需要更改`location.href`为`mailto`url。它以这个错误结束

```
Capybara::Driver::Webkit::WebkitInvalidResponseError:
       Unable to load URL: mailto:chamnap@yoolk.com?subject=Inquiry to Cambodia%20Yellow%20Pages via Mail&body=To Cambodia%20Yellow%20Pages 
```

在这种情况下我将如何测试？我只需要确保访问此 url 就足够了。在这种情况下，我不需要进行真正的重定向。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:08:53.207

您可以使用 page.evaluate_script 为 mailto 协议注册一个虚拟协议处理程序。

[navigator.registerProtocolHandler](http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#dom-navigator-registerprotocolhandler)

# php - 使用 PHP 和 Ajax 上传和处理文件

> ID：10924918
> 
> 赞同：1
> 
> 时间：2012-06-07T02:34:28.940
> 
> 标签：php, jquery, ajax, file-upload, upload

我想建立一个允许我上传文件的网站，然后实时显示处理文件的进度。客户端将上传一个分隔文件。上传后，我将验证数据中的标题/列。如果这遵循给定的模板，那么我将一次处理一行，并希望在发生这种情况时向用户提供实时反馈。我知道 PHP 是在获取请求时运行的，因此我认为这种方法需要 ajax 来实现我的目标。我该怎么做这样的事情。任何伪代码、示例或教程将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T02:45:26.907

我过去做过类似的事情。你需要做的是开始文件处理。在设定的时间间隔（例如一秒）之后，您可以使用 ajax 调用轮询服务器以查看处理文件的进度。

顺便说一句，我会推荐[jqueryUI progressbar](http://jqueryui.com/demos/progressbar/)作为进度条，[uploadify](http://www.uploadify.com/)作为上传者。

**Javascript**：

```
setTimeout("UpdateProgressBar();", 1000);

$.ajax({
    type: "POST",
    async: true,
    data: // params go here
    url: // path to web method
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (result) {
         // Do stuff when file is finished processing
    },
    error: function (XMLHttpRequest, textStatus, errorThrown) {
        if (errorThrown != null)
            alert(textStatus + " : " + errorThrown);
    }
});

function UpdateProgressBar() {
    $.ajax({
        type: "POST",
        async: true,
        data: // my params go here
        url: // path to web method
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (result) {
            var totalRecords = result.d.TotalRecords;
            var recordsProcessed = result.d.RecordsProcessed;
            var percentProcessed = pagesProcessed / totalRecords;

            $('#div_ProgressBar').progressbar("value", percentProcessed);

            if (recordsProcessed < totalRecords)
                setTimeout("UpdateProgressBar();", 800);
        },
        error: function (XMLHttpRequest, textStatus, errorThrown) {
            if (errorThrown != null)
                alert(textStatus + " : " + errorThrown);
        }
    }); 
```

# mysql - 将针对一张表的多个查询组合成一个结果集的多个字段

> ID：10924920
> 
> 赞同：0
> 
> 时间：2012-06-07T02:34:39.350
> 
> 标签：mysql, sql, field, multiple-records

**答案**：这是根据@Michael 的答案构建的最终查询：

```
SELECT 
    Emp_ID,
    MAX(CASE WHEN Skill_ID = 'WLN' THEN (Rating > 0) END) AS `WLN`,
    MAX(CASE WHEN Skill_ID = 'LOC' THEN (Rating > 0) END) AS `LOC`,
    MAX(CASE WHEN Skill_ID = 'BRV' THEN (Rating > 0) END) AS `BRV`,
    AVG(CASE WHEN Skill_ID IN ('KWH','SIC','DOL') THEN (Rating) END) > 0 AS `KSD`
FROM Emp_Skill
WHERE Emp_ID IN (120,348,361,370)
GROUP BY Emp_ID 
```

* * *

**问题**：

我有下`Emp_Skill`表：

```
Skill_ID*  Emp_ID*  Rating
--------------------------
     WLN      120        6
     WLN      348        5
     WLN      361        7
     WLN      370        8
     LOC      120        7
     LOC      370        7
     LOC      348        7
     BRV      120        3
     LOC      361        6
     BRV      348        1
     KWH      348        5
     KWH      120        5
     KWH      361        5
     KWH      370        5
     SIC      361        8
     SIC      348        4
     SIC      120        2
     DOL      348        5
     DOL      361        8 
```

我需要知道**是否有任意数量的员工对每项技能都有积极的技能评分**。

因此，*假设*我想查看员工*120、348、361*和*370*的*此*信息。

 ***技能*查询1*`WLN`是：*

 *```
SELECT `Emp_ID`, `Rating` > 0 AS `WLN` FROM `Emp_Skill` WHERE `Skill_ID` = 'WLN' AND `Emp_ID` IN (120,348,361,370) 
```

返回：

```
Emp_ID   WLN
------------
   120     1
   348     1
   361     1
   370     1 
```

*技能*查询2*`LOC`是：*

 *```
SELECT `Emp_ID`, `Rating` > 0 AS `LOC` FROM `Emp_Skill` WHERE `Skill_ID` = 'LOC' AND `Emp_ID` IN (120,348,361,370) 
```

返回：

```
Emp_ID   LOC
------------
   120     1
   348     1
   361     1
   370     1 
```

*技能*查询 3*`BRV`是：*

 *```
SELECT `Emp_ID`, `Rating` > 0 AS `BRV` FROM `Emp_Skill` WHERE `Skill_ID` = 'BRV' AND `Emp_ID` IN (120,348,361,370) 
```

返回：

```
Emp_ID   BRV
------------
   120     1
   348     1 
```

并且技能*查询4*`KSD`是：

```
SELECT `Emp_ID`, AVG(`Rating`) > 0 AS `KSD` FROM `Emp_Skill` WHERE `Skill_ID` IN ('KWH','SIC','DOL') AND `Emp_ID` IN (120,348,361,370) GROUP BY `Emp_ID` 
```

返回：

```
Emp_ID   KSD
------------
   120     1
   348     1
   361     1
   370     1 
```

*问题*是：**如何有效地将这些查询组合到一个结果表中，并一次性将它们全部包含在内**，即：

```
Emp_ID   WLN   LOC   BRV   KSD
------------------------------
   120     1     1     1     1
   348     1     1     1     1
   361     1     1  NULL?    1
   370     1     1  NULL?    1 
```

可能来自综合`SELECT`声明？（该*`NULL`*值可以是`FALSE`返回结果集中计算结果的任何值）

**或者**：在性能方面，如果我只是一个一个地查询每个技能等级（使用上面的 4 个查询）会更好吗？

对不起，如果这对于那里的一些窥视者来说是基本的，但我已经拉了很多头发，我还没有杀死它。哈哈。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T02:44:57.337

这是通过一个数据透视查询完成的，它相当于一堆`CASE`语句。我认为这应该让你接近你所需要的：

```
SELECT 
  Emp_ID,
  MAX(CASE WHEN Skill_ID = 'WLN' THEN  (Rating > 0) END) AS `WLN`,
  MAX(CASE WHEN Skill_ID = 'LOC' THEN  (Rating > 0) END) AS `LOC`,
  MAX(CASE WHEN Skill_ID = 'BRV' THEN  (Rating > 0) END) AS `BRV`,
  AVG(CASE WHEN Skill_ID IN ('KWH','SIC','DOL') THEN  (Rating > 0) END) AS `KSD`
FROM Emp_Skill
GROUP BY Emp_ID 
```*****

# c# - 解决 System.OutOfMemoryException

> ID：10924921
> 
> 赞同：0
> 
> 时间：2012-06-07T02:34:42.407
> 
> 标签：c#, algorithm, out-of-memory

我们需要找到几个整数排序数组的交集。这是示例：

例子：

```
Input:
1,3,7,8
2,3,8,10
3,10,11,12,13,14

minSupport = 1

Output:

1 and 2: 2, 8
1 and 3: 3
2 and 3: 3, 10 
```

我写了算法，它运行得很快。

```
 var minSupport = 2;
    var elementsCount = 10000;
    var random = new Random(123);

    // Numbers of each array are unique
    var sortedArrays = Enumerable.Range(0,elementsCount)
    .Select(x => Enumerable.Range(0,30).Select(t => random.Next(1000)).Distinct()
    .ToList()).ToList();
    var result = new List<int[]>();
    var resultIntersection = new List<List<int>>();

    foreach (var array in sortedArrays)
    {
        array.Sort();
    }

    var sw = Stopwatch.StartNew();

    //****MAIN PART*****//

    // This number(max value which array can contains) is known. 
    // Ofcourse we can use dictionary if donnt know maxValue
    var maxValue = 1000;

    var reverseIndexDict = new List<int>[maxValue];

    for (int i = 0; i < maxValue; i++)
    {
        reverseIndexDict[i] = new List<int>();
    }

    for (int i = 0; i < sortedArrays.Count; i++)
    {
        for (int j = 0; j < sortedArrays[i].Count; j++)
        {
            reverseIndexDict[sortedArrays[i][j]].Add(i);
        }
    }

    var resultMatrix = new List<int>[sortedArrays.Count,sortedArrays.Count];

    for (int i = 0; i < sortedArrays.Count; i++)
    {   
        for (int j = 0; j < sortedArrays[i].Count; j++)
        {
            var sortedArraysij = sortedArrays[i][j];

            for (int k = 0; k < reverseIndexDict[sortedArraysij].Count; k++)
            {
                if(resultMatrix[i,reverseIndexDict[sortedArraysij][k]]==null) resultMatrix[i,reverseIndexDict[sortedArraysij][k]] = new List<int>();

                resultMatrix[i,reverseIndexDict[sortedArraysij][k]].Add(sortedArraysij);    

            }
        }
    }

    //*****************//

    sw.Stop();

    Console.WriteLine(sw.Elapsed); 
```

但是当元素计数超过 10000 时，我的代码会因 outofmemoryException 而下降。我该如何改进我的算法或我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T16:02:18.093

如果您知道数组可以拥有的最大整数，您可以执行以下操作：

```
var histoMatrix = new int[1000]; // the max number in arrays is 1000 here

for (int i = 0; i < sortedArrays.Count; i++)
{   
    for (int j = 0; j < sortedArrays[i].Count; j++)
    {
        var sortedArraysij = sortedArrays[i][j];

        histoMatrix[sortedArraysij]++;
    }
}

var resultMatrix = new List<int>();

for (int i = 0; i < 1000; i++)
{
    if (histoMatrix[i] == sortedArrays.Count)
        resultMatrix.Add(histoMatrix[i]);
} 
```

在这种情况下，您甚至不需要对数组进行排序。

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T02:38:52.563

使用这样的`Distinct`方法：

```
...
var theDistinctListOfInts = new List<int>();
foreach(var listOfInts in theListsOfInts)
{
    theDistinctListOfInts = theDistinctListOfInts.Intersect(listOfInts);
}
... 
```

# hadoop - 关于 LoadFunc 的示例和更多解释

> ID：10924922
> 
> 赞同：2
> 
> 时间：2012-06-07T02:34:48.617
> 
> 标签：hadoop, apache-pig, hdfs

我在哪里可以找到有关 LoadFunc 的更多信息/示例。除了[http://web.archive.org/web/20130701024312/http://ofps.oreilly.com/titles/9781449302641/load_and_store_funcs.html](http://web.archive.org/web/20130701024312/http://ofps.oreilly.com/titles/9781449302641/load_and_store_funcs.html) 我没有看到任何使用新 LoadFunc API 的示例。谁能告诉我在哪里可以找到一些编写 Load UDF 的示例？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T07:07:52.483

从 0.7.0 开始，Pig 加载器扩展了 LoadFunc 抽象类。这意味着它们需要覆盖 4 个方法：

*   getInputFormat() 此方法向调用者返回加载程序支持的 InputFormat 实例。实际的加载过程需要在加载时使用一个实例，并且不希望对该实例的创建方式施加任何限制。

*   在读取拆分之前调用 prepareToRead()。它传入拆分读取期间使用的读取器以及实际拆分。加载程序的实现通常会保留阅读器，并且如果需要，可能希望访问实际的拆分。

*   setLocation() Pig 调用它来将加载位置传递给加载器，加载器负责将该信息传递给底层的 InputFormat 对象。该方法可以被多次调用，因此不应该有与该方法关联的状态（除非该状态在该方法被调用时被重置）。

*   getNext() 一旦所有设置完成，Pig 调用它从加载器获取下一个元组。如果此方法返回 NULL，Pig 假定通过 prepareToRead() 方法传递的拆分中的所有信息都已被处理。

这里有几篇很好的文章来为 Pig 编写自定义加载函数：

*   [编写自定义 PIG 加载器](http://arunxjacob.blogspot.com/2010/12/writing-custom-pig-loader.html)
*   [使用 loadfunc pig UDF 将 protobuf 格式文件加载到 pig 脚本中](https://stackoverflow.com/questions/7031586/loading-protobuf-format-file-into-pig-script-using-loadfunc-pig-udf)

# c++ - 在 C++ 类中使用谓词函数指针

> ID：10924927
> 
> 赞同：0
> 
> 时间：2012-06-07T02:35:35.993
> 
> 标签：c++, templates, containers, function-pointers, predicate

我正在尝试在课堂上使用[此](https://stackoverflow.com/questions/2642509/removing-elements-from-c-stdvector)问题中提供的解决方案。我在类中使用了带有谓词函数的“remove_if”。

```
 void classname::function1()
    {
    vector<NeighborPoint> neighbors;
    ....
    neighbors.erase(std::remove_if(neighbors.begin(),neighbors.end(),&classname::cannotMoveIn), neighbors.end()); 
    ...
    }

    bool classname::cannotMoveIn(NeighborPoint mp)
    {
        return !mp.inGridNotOccupied;
    } 
```

如果该代码不在类中并且谓词不是成员函数，则该代码将起作用。但是，现在我收到很长的错误消息，我猜这些错误消息是指 remove_if 模板与谓词参数不兼容（一个错误包括：错误 C2064：术语不计算为采用 1 个参数的函数）。

**注意：**代码旨在删除代理无法进入的相邻网格单元（在 8 个可能的单元中）。

有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T02:38:44.527

使用`std::bind`：

```
neighbors.erase(std::remove_if(neighbors.begin(),neighbors.end(),std::bind(&classname::cannotMoveIn, this, std::placeholders::_1)), neighbors.end()); 
```

此外，正如@Als 指出的那样，您的`classname::cannotMoveIn`方法将 a`MoorePoint`作为参数，而您的向量包含`NeighborPoint`. 请注意，即使这些类是相关的，您也会对向量的对象进行切片（因为您是按值获取参数）。

我相信您的方法应该具有以下签名：

```
bool classname::cannotMoveIn(const NeighborPoint &mp) const; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T18:41:04.423

> 如果该代码不在类中并且谓词不是成员函数，则该代码将起作用。

当然。实例方法不像全局函数；它需要一个额外的隐藏参数`this`（调用它的对象）。但似乎您根本不​​需要在函数中使用当前对象。你为什么首先把它变成一个实例方法？

如果您不需要使用`this`，那么您可以做的一件事就是使其成为静态方法（这就像一个常规函数，除了范围）。然后你可以像以前一样传递它，就像一个普通函数一样。比谓词函数更好的是使用函数对象（你必须定义一个仿函数类，如果你不想将它移出类，它甚至可以是一个嵌套类）或 lambda（如果你有 C ++11)，这将允许将谓词内联到删除算法中，因此比每次都必须调用函数指针更快。

# visual-studio-2010 - 如何在 Visual C++ 2010 中创建安装程序？

> ID：10924928
> 
> 赞同：3
> 
> 时间：2012-06-07T02:35:36.397
> 
> 标签：visual-studio-2010, c++-cli

我有一个简单的程序。我想为用户设置路径和一些属性，所以我需要安装软件。我可以使用 VC++ 创建“exe”文件，但我不知道如何创建安装包。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:22:53.730

以下是设置创作工具列表：[http ://en.wikipedia.org/wiki/List_of_installation_software](http://en.wikipedia.org/wiki/List_of_installation_software)

Advanced Installer 有一个免费版本，对于简单的安装程序来说很容易使用：http: [//www.advancedinstaller.com/user-guide/tutorial-simple.html](http://www.advancedinstaller.com/user-guide/tutorial-simple.html)

虽然它已被弃用，但您也可以尝试 Visual Studio 安装项目：http: [//support.microsoft.com/kb/307353](http://support.microsoft.com/kb/307353)

# android - 如何从网络获取数据到安卓应用程序？

> ID：10924929
> 
> 赞同：0
> 
> 时间：2012-06-07T02:35:42.840
> 
> 标签：android, asp.net

我是安卓初学者。我正在为 android 编写股票市场应用程序。我不知道该怎么做，我应该怎么做才能获取有关股票市场的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:14:03.550

首先你应该知道 API 和 Web 服务是什么意思；以及它们是如何收集起来的。例如 BSE API、Google Finance Api、Yahoo API。

研究它们后，您可以将它们集成到 android 代码中；解析网络服务返回的数据和结果，然后你可以在安卓模拟器上显示它们。

这就是你应该进步的方式。

你可以查看这个[库](http://code.google.com/p/google-api-java-client/)，它可以帮助你将谷歌金融 api 与你的 android 代码集成。尝试为这些东西搜索更多示例代码，你可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T03:12:29.333

请参阅IBM 的[这个](https://www.ibm.com/developerworks/xml/library/x-dataAndroid/)股市教程，展示如何在 Android 中使用 Internet 数据检索股票的最新定价信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T04:49:44.573

在您的活动课程中使用该课程。
它扩展`AsyncTask`了这是在后台执行任务的一个很好的选择，因为它将提高应用程序的整体性能。

```
private class DownloadFromWeb extends AsyncTask<String, Void, String> {
    @Override
    protected String doInBackground(String... urls) {
        String response = "";
        for (String url : urls) {
            DefaultHttpClient client = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet(url);
            try {
                HttpResponse execute = client.execute(httpGet);
                InputStream content = execute.getEntity().getContent();

                BufferedReader buffer = new BufferedReader(
                        new InputStreamReader(content));
                String s = "";
                while ((s = buffer.readLine()) != null) {
                    response += s;
                }

            } catch (Exception e) {
                e.printStackTrace();
            }
        }
        return response;
    }

    @Override
    protected void onPostExecute(String result) {
    //Do whatever you want with result string...
    }
} 
```

现在使用这个类：

```
DownloadFromWeb task = new DownloadFromWeb ();
task.execute("http://www.google.com"); //replace the URL with your URL 
```

希望能帮助到你 ！！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T02:41:50.247

您正在寻找的内容存在于 java.net 包中。您需要创建一个指向您的 web 应用程序或股票市场数据 API 的 URL，然后以适当的形式获取它。它应该是这样的：

```
URL url = new URL("ftp://mirror.csclub.uwaterloo.ca/index.html");
URLConnection urlConnection = url.openConnection();
InputStream in = new BufferedInputStream(urlConnection.getInputStream());
try {
  readStream(in);
 finally {
  in.close();
} 
```

（取自[http://developer.android.com/reference/java/net/URLStreamHandler.html](http://developer.android.com/reference/java/net/URLStreamHandler.html)）

确保首先在您的应用权限中请求网络访问权限。

# objective-c - 为 MPMoviePlayerController 设置新的 contentURL

> ID：10924930
> 
> 赞同：1
> 
> 时间：2012-06-07T02:36:02.647
> 
> 标签：objective-c, ios, mpmovieplayercontroller

在我的应用程序中，视频通过 MPMoviePlayerController 播放。但是，可能会通过设置新的 contentURL 将当前播放的视频替换为新视频。

如果我这样做，当前视频停止并且电影播放器​​变黑。但是新视频无法加载。它只是变黑而不显示任何控件。

moviePlayer 的 loadState 然后保持不变`MPMovieLoadStateUnknown`。我 100% 确定 contentURL 有效，我还尝试重新设置完全相同的 url 以确保。

`[moviePlayerController prepareToPlay]`我在重新设置 contentURL 后也尝试过，但这并没有改变任何东西。

对此有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T15:48:41.477

在设置新值`movieSourceType`之前再次设置。`contentURL`

```
self.player.movieSourceType = MPMovieSourceTypeUnknown;
self.player.contentURL = [NSURL URLWithString:url]; 
```

# android - 如何在 Eclipse 中同时部署服务提供者和活动包

> ID：10924931
> 
> 赞同：0
> 
> 时间：2012-06-07T02:36:04.297
> 
> 标签：android

在 Eclipse 中，我想同时部署一个服务提供者包和一个标准的基于活动的包（它使用服务提供者）。我可以在 Eclipse 中将这些捆绑在一起以制作一个部署到设备的 apk 吗？

谢谢

安东

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:45:41.793

别担心，我已经解决了。您只需在源文件夹下添加一个包，然后向其中添加类，记住使用额外的“提供者”详细信息更新清单文件。

# php - 带有 Silex 验证的 Symfony2 仍然是英文

> ID：10924933
> 
> 赞同：0
> 
> 时间：2012-06-07T02:36:18.053
> 
> 标签：php, symfony, silex

我正在 Symfony2 中构建一个应用程序。我想获得验证消息的翻译。我阅读了有关 Silex 的信息，但不知道如何与 Symfony2 集成，如果我需要安装某些东西，或者我需要在哪里配置我的项目。我已经在 Resources/translations 上有了 validators.*.xliff 文件，但仍然会收到英文的验证消息。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:05:03.270

首先确保您已正确设置应用程序的默认语言环境（文件 app/config/config.yml）。

然后我强烈建议您阅读[官方文档](http://symfony.com/doc/current/book/translation.html)，逐步了解 Symfony2 中的翻译工作原理。

# ios - 使用带有 cocos2d 的 replaceScene 时的 iPhone 崩溃报告

> ID：10924934
> 
> 赞同：0
> 
> 时间：2012-06-07T02:36:22.153
> 
> 标签：ios, cocos2d-iphone, crash

当我使用 时`[[CCDirector sharedDirector] replaceScene:_VGameTest];`，我收到以下错误，但只是偶尔。为什么会这样？

![](../Images/78ca175dd659fa0ad3591635516ec41c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T19:00:12.290

你不应该放：

```
[[CCDirector sharedDirector] replaceScene:[_VGameTest scene]]; 
```

在

`[[CCDirector sharedDirector] replaceScene:_VGameTest];`... ??

# jquery - 按下回车后启用jquery自动完成

> ID：10924941
> 
> 赞同：1
> 
> 时间：2012-06-07T02:38:00.353
> 
> 标签：jquery

我在我们的一个网页中使用 JQuery 自动完成功能，该网页从 url 获取源数据并且工作正常。{

```
 $(function () {

        $("#name-list").autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: "/MemberType/FindMemberTypes", type: "POST", dataType: "json",
                    data: { searchText: request.term, maxResults: 10 },
                    success: function (data) {
                        response($.map(data, function (item) {
                            return { label: item.DisplayText, value: item.description, id: item.id }
                        }))
                    }
                })
            },
            select: function (event, ui) {
                alert(ui.item ? ("You picked '" + ui.item.label + "' with an ID of " + ui.item.id)
                    : "Nothing selected, input was " + this.value);
            }
        });

    }); 
```

}

url "membertype/findmemberTypes" 搜索 memberType 表并返回 Json 格式的成员类型列表。

我在这里遇到的问题是每次在文本框中的某个字符中使用键时，都会向服务器发出一个请求，扫描表并将数据返回给调用者。我想以这样一种方式改变行为，即当用户真正想要搜索文本时，只有一次访问服务器。

只有在用户在文本框中按下“Enter键”后才能触发自动完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T04:37:55.070

谢谢你们的回答和时间。

在嘲笑了一段时间后，我找到了一个适合我要求的解决方案。

我刚刚添加了一些代码来完全禁用自动完成功能并仅在用户按下回车时启用它。当用户尝试通过按退格键或删除键输入不同的文本时，功能将再次被禁用。

```
<input type="text" id="name-list" /> (Press enter for options)

<script type="text/javascript" language="javascript">
    $(function () {

        $("#name-list").autocomplete({

            source: function (request, response) {
                $.ajax({
                    url: "/MemberType/FindMemberTypes", type: "POST", dataType: "json",

                    data: { searchText: request.term, maxResults: 10 },
                    success: function (data) {
                        response($.map(data, function (item) {
                            return { label: item.description, value: item.description, id: item.id }
                        }))
                    }
                })
            },

            select: function (event, ui) {
                alert(ui.item ? ("You picked '" + ui.item.label + "' with an ID of " + ui.item.id)
                    : "Nothing selected, input was " + this.value);

            }
        }).keypress(function (e) {
            if (e.keyCode === 13) {
                $("#name-list").autocomplete("enable");
                $("#name-list").autocomplete("search", $("name-list").val());
            }
            else if ((e.keyCode == 8) || (this.value == "") || (e.keyCode == 46)) 
            {
                $("#name-list").autocomplete("disable");
            }

        }); ;

        $("#name-list").autocomplete("disable");

    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T02:50:48.713

jQuery UI自动补全在按下回车键时不会搜索，回车键仅在搜索后显示菜单时使用

您可以查看设置延迟和 minLength 选项以减少请求的数量。

或者您可以查看另一个在按下回车键时触发的自动完成插件。

# ios - 使用 Node.js 将音频流式传输到 html5 音频标签并绕过 iOS 限制

> ID：10924955
> 
> 赞同：6
> 
> 时间：2012-06-07T02:39:31.340
> 
> 标签：ios, node.js, audio-streaming, html5-audio

我目前正在开发一个使用 HTML5 音频的项目，但我们遇到了 iOS 设备的限制问题（主要是多音频通道限制）。

我在想也许可以使用 node.js 来控制服务器端的声音。客户端将连接到单个音频 url，节点服务器将通过该单个通道流式传输实时声音，在服务器上进行所有混合和转换。

技术上可行吗？你能在 node.js 上解析音频并做一些现场混音吗？你认为服务器会随着超过 5 个同时客户端而爆炸吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T13:52:55.493

是的，这是完全可能的，但正如 Sam 指出的那样，缓冲是一个问题。在以下几点上会出现明显的延迟：

*   从客户端获取控制命令
*   将原始 PCM 音频混合到内部缓冲区中
*   使用正确的编解码器编码数据（要求您分块执行此操作）
*   发送音频数据
*   缓冲客户端
*   客户端播放缓冲区

把这一切加起来，即使你让它工作得很快，你仍然会看到几秒钟的延迟。

如果您决定走这条路，您将需要一个外部应用程序（或编写您自己的 Node 扩展）来为您进行混合和编码。Sox 可能是一个不错的选择，FFMPEG 包含许多编解码器供您使用。您可以通过 STDIO 使用两者。

关于服务器负载......这不是一种轻量级的过程，但您必须对其进行分析以查看它到底有多糟糕。我建议您在尝试这样的事情之前尝试在客户端一次播放多个音频流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-14T14:45:58.893

请参考此链接。它按预期工作，但问题是客户端控制 [NodeJS Streaming for Audio/Video with Client Side Control](https://stackoverflow.com/questions/32012695/nodejs-streaming-for-audio-video-with-client-side-control)

```
https://stackoverflow.com/questions/32012695/nodejs-streaming-for-audio-video-with-client-side-control 
```

# php - 通过 hook_menu 调用 Drupal 7 AJAX

> ID：10924958
> 
> 赞同：1
> 
> 时间：2012-06-07T02:39:46.533
> 
> 标签：php, javascript, drupal, ubercart

因此，每当有人选择新的运输选项时，我都会尝试在 Ubercart 结帐页面上更新我的新窗格。到目前为止，我每次在选择新的运输选项后刷新页面时都会发生这种情况。下一步是让它通过 AJAX 工作。

我的问题是 ajax 命令没有从 AJAX 回调中触发。div 未更新。现在我只有一些简单的文字。稍后，我将添加我需要的实际表单信息，这将是另一个问题。但是，我什至无法让这个测试用例工作。

我正在为 Drupal 的 Ubercart FedEx 模块开发一项新功能。我已经为此工作了一段时间，但无济于事。我尝试了很多不同的东西，没有一个工作。

非常清楚......我知道ajax调用正在触发。我什至可以将成功附加到 ajax $.get 调用并获得控制台输出并设置 drupal 变量。只有 div 替换代码不起作用。这个拼图的所有其他部分都有效。

**我进行了 ajax 调用并返回到 javascript。我什至可以在 JS 中的 ajax 调用上附加一个成功函数，并在成功时获取控制台输出。javascript不是问题。**

```
// Implements hook_menu()
function uc_fedex_menu() {
  $items = array();
  $items['uc_fedex_jquery_callback/%'] = array(
    'title' => 'My Custom Callback', 
    'description' => 'Listing of blogs.', 
    'page callback' => 'uc_fedex_calendar_jquery_callback', 
    'page arguments' => array(1),
    'access arguments' => array('access content'), 
    'access callback' => TRUE,
    'type' => MENU_CALLBACK,
  );
  return $items;
}

// AJAX callback: Updates calendar
// THIS IS WHERE THE ERROR IS... the variable is set
// But the div content is never replaced.
function uc_fedex_calendar_jquery_callback($argument) {
  variable_set('uc_fedex_shipment_type',$argument);
  $commands[] = ajax_command_replace('#fromdate', "works");
  return array('#type' => 'ajax', '#commands' => $commands);
}

// Actual UI of Calendar Pane
function uc_fedex_uc_checkout_pane_shipdate($op, $order, $form = NULL, &$form_state = NULL) {
    switch ($op) {
    case 'view':
      // Check for shipping quote option without altering Ubercart Core.
      // The $.get line makes the hook_menu call which in turn
      // makes the call back to the above function that has the issue
      drupal_add_js("
      jQuery(function ($) {
      $(document).ready(function() {
      last = 'o';
          setInterval(function() {
           $('#quote input:radio:checked').each(function() {
              if($(this).val() != last){
                last = $(this).val()
                $.get('https://www.fdanconia.com/uc_fedex_jquery_callback/'+ $(this).val());
              }
           });
          }, 500);
        });
      });", 'inline');

      $contents['calendar'] = array(
        '#type' => 'textfield',
        '#title' => t('Choose Your Estimated Arrival Date'),
        '#default_value' => date('m/j/Y',$response[1]),
        '#prefix' => '<div id="fromdate">',
        '#suffix' => '</div>',
      );
      return array('description' => $description, 'contents' => $contents);
    }
}

// Implements hook_uc_checkout_pane().
function uc_fedex_uc_checkout_pane() {
  $panes['calendar'] = array(
    'callback' => 'uc_fedex_uc_checkout_pane_shipdate',
    'title' => t('Shipping Calendar'),
    'desc' => t('A calendar to allow customers to choose shipping date.'),
    'process' => TRUE,
  );
  return $panes;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T04:41:07.037

关于 js 的注释，jQuery( function same_func(){} ) 相当于 $(document).ready( function same_func() {} )

所以外部 jQuery() 调用将一个函数绑定到文档准备就绪。该函数在文档就绪时触发，并将另一个函数绑定到已触发的文档就绪。

大多数情况下，在 Drupal 中，变量 $ 是未附​​加的，因此您必须显式创建一个方法（函数），将 jQuery 作为 $ 传递。

```
(function($){ 

$ available in here

})(jQuery);

Think of the the above as: 
(function)(variables) where the function takes a variable $ .. 

Or you can think of it like this:

function test ($) {
  $(jquery magic).etc()'
}
test(jQuery); 
```

.. 除了函数测试，函数调用都包含在“同一”行中。

检查 firebug/console 以查看是否正在调用 $.get。

另一个调试是在 uc_fedex_calendar_jquery_callback() 中使用 php 的 error_log('message') 并观察 apache error.log。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T16:17:12.310

我最终在响应回调中添加了我需要的参数，然后在来自原始调用的 AJAX 响应中处理它们。我只是使用 jQuery 手动使用更新的变量数据来操作 DOM。我认为没有办法在不改变 Ubercart 核心的情况下做到这一点，这是不可接受的。

如果有人想要我用来解决此问题的代码，请询问，您将收到。（有点长，如果有人需要，我会在这里发布。）

# python - 在 Python 中计算 Fiedler 向量

> ID：10924966
> 
> 赞同：5
> 
> 时间：2012-06-07T02:40:45.067
> 
> 标签：python, numpy, linear-algebra

如何在 Python 中找到拉普拉斯算子 (L) 的外野手向量？

我可以使用以下方法获得特征值和特征向量：特征值，特征向量 = linalg.eig(L)

我假设 python 不会按顺序返回特征值。

我是否取第二大特征值，然后将其与相应的特征向量匹配（在索引中匹配）？

对特征值排序时，如何处理负值？是按绝对大小排序吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T15:07:37.817

好吧，我不知道所涉及的数学，但我会尽力而为。

如果您检查[文档](http://docs.scipy.org/doc/numpy/reference/generated/numpy.linalg.eig.html)，`linalg.eig`实际上返回的特征向量与其对应的特征值的顺序相同。

我可能会做类似的事情：

```
w, v = linalg.eig(L)
seen = {}
unique_eigenvalues = []
for (x, y) in zip(w, v):
    if x in seen:
        continue
    seen[x] = 1
    unique_eigenvalues.append((x, y))
fiedler = sorted(unique_eigenvalues)[1][1] 
```

默认情况下，Python 按第一个元素排序元组，然后是第二个元素，依此类推，并且数字按照您期望的方式排序（-2 < -1 等）。这假设您的特征值当然并不复杂。

此外，我假设可能存在重复的特征值，并且 Fiedler 向量是与第二小的唯一特征值相关联的特征向量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-01T15:34:11.613

只是一个额外的解决方案：

```
import numpy as np
import scipy.linalg as la

eig_values, eig_vectors = la.eig(laplacian)
fiedler_pos = np.where(eigvalues.real == np.sort(eig_values.real)[1])[0][0]
fiedler_vector = np.transpose(eig_vectors)[fiedler_pos]

print("Fiedler vector: " + str(fieder_vector.real)) 
```

解释：Fiedler 向量具有最小的非零特征值。因此，我们需要对特征值进行排序，并取第二小的一个（顺便说一下，验证零元素是否也在第一位是有意义的）。这是在 中完成的`np.sort(eigvalues.real)[1]`，您可以看到已排序（实际）数组的第二个元素被采用。

现在我们只需要匹配原始数组中的值并获取它的位置。这可以通过`np.where()`命令方便地完成。结果是括号中定义的所有已发现实例的数组，我们从中取出第一个。该`fiedler_pos`变量现在包含特征向量中的 fiedler 向量位置。

为了得到向量本身，一种方法是在相关位置使用转置的特征向量矩阵。

# ruby - 使用 Ruby 在一个或多个字符的模式之间恰好插入一个空格

> ID：10924967
> 
> 赞同：0
> 
> 时间：2012-06-07T02:40:45.443
> 
> 标签：ruby, regex

我有一个字符串。

```
'ABCXDEFXABCYXYABC' 
```

我想让它们用一个空格分隔。此字符串中的已知模式是：

```
ABC
X
DEF
Y 
```

结果字符串应该是

```
'ABC X DEF X ABC Y X Y ABC'

a = 'ABCXDEFXABCYXYABC'
b = a.gsub(/[^ ]\((ABC|DEF|X|Y)\)[^ ]/,' \1 ') 
```

我的 gsub 正则表达式没有运气。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T02:58:02.343

你让它太复杂了：

```
1.9.3p194 :001 > a = 'ABCXDEFXABCYXYABC'
 => "ABCXDEFXABCYXYABC" 
1.9.3p194 :002 > a.gsub(/ABC|DEF|X|Y/, '\0 ').strip
 => "ABC X DEF X ABC Y X Y ABC" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T03:04:44.557

这是一个带有[负前瞻](http://www.regular-expressions.info/lookaround.html)的解决方案，这是我认为您首先要实现的目标：

```
a.gsub(/(ABC|DEF|X|Y)(?!$)/, '\1 ')
=> "ABC X DEF X ABC Y X Y ABC" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T02:58:12.507

“@jonnyGold 我展示的输入和输出完全描述了我的问题”

好吧，

```
b = 'ABC X DEF X ABC Y X Y ABC' 
```

# android - Android 传感器注销

> ID：10924968
> 
> 赞同：0
> 
> 时间：2012-06-07T02:41:15.207
> 
> 标签：android, android-sensors, resource-leak

我对传感器侦听器的注销感到困惑。假设我忘记注销一个监听器。应用程序销毁后会发生什么？

Android 操作系统会继续向应用程序发送消息吗？但是应用程序被破坏了，因此它的进程被终止了。任何人都可以帮助回答这个问题吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T11:12:13.550

> 但是应用程序被破坏了，因此它的进程被终止了。

这并非总是如此。在正常情况下，Android会尽可能长时间地[保持您的应用程序进程处于活动状态。](http://developer.android.com/reference/android/app/Activity.html#ProcessLifecycle)如果您碰巧有仍在注册的侦听器，则这些侦听器（很可能是 Activity 的子类）引用的对象的旧副本很可能不会被垃圾收集并继续消耗宝贵的内存。传感器侦听器尤其糟糕，因为该框架还花费了其他大量资源来继续为它们提供数据。

为了演示这个问题，您可以简单地在您有意保持注册的传感器侦听器中打印出一些日志消息。即使您正常退出应用程序，您也会看到日志消息将继续打印出来。然后，您还可以[运行 MAT 来检查进程的内存，](http://www.eclipse.org/mat/)它可能会显示您的 Activity 对象的副本仍在内存中徘徊。如果您多次启动您的应用程序，MAT 会显示您的 Activity 仍然存在多个“僵尸”副本 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:00:34.347

developer.android.com 明确声明

> 始终确保禁用您不需要的传感器，尤其是在您的活动暂停时。否则，可能会在几个小时内耗尽电池电量。请注意，当屏幕关闭时，系统不会自动禁用传感器。

[http://developer.android.com/reference/android/hardware/SensorManager.html](http://developer.android.com/reference/android/hardware/SensorManager.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T06:33:08.960

是的，您应该这样做，因为数据仍会发送到您的应用程序，而且我相信这对您来说始终是一种很好的编程`"close" (unregister)`风格`"opened" (registered)`。我编写了一些示例方法来演示如何执行此操作：

（注意：此代码必须放在实现的类中`SensorEventListener, OnTouchListener, OnKeyListener`）

```
/**
     * <b><i>public void useAccelerometer(boolean use)</i></b>
     * <br>
     * Since: API 1
     * <br>
     * <br>
     * Set if you would like to enable the use of the accelerometer.
     * 
     * @param use 
     * <br>
     * True will enable the use of the accelerometer.
     * <br>
     * False will disable the use of the accelerometer.
     *  
     */

    public void useAccelerometer(boolean use) {
        if(use == true) {
            manager.registerListener(this, accelerometer, SensorManager.SENSOR_DELAY_GAME);
            if(this.logGameEngineInputLog == true) {
                gameEngineLog.d(classTAG, "Accelerometer enabled");
            }
        }
        else {
            manager.unregisterListener(this, accelerometer);
            if(this.logGameEngineInputLog == true) {
                gameEngineLog.d(classTAG, "Accelerometer disabled");
            }
        }
    }

    /**
     * <b><i>public void useTouchscreen(boolean use)</i></b>
     * <br>
     * Since: API 1
     * <br>
     * <br>
     * Set if you would like to enable the use of the touch screen.
     * 
     * @param use 
     * <br>
     * True will enable the use of the touch screen.
     * <br>
     * False will disable the use of the touch screen.
     *  
     */

    public void useTouchscreen(boolean use) {
        if(use == true) {
            view.setOnTouchListener(this);
            if(this.logGameEngineInputLog == true) {
                gameEngineLog.d(classTAG, "Touchscreen enabled");
            }
        }
        else {
            view.setOnTouchListener(null);
            if(this.logGameEngineInputLog == true) {
                gameEngineLog.d(classTAG, "Touchscreen disabled");
            }
        }
    }

    /**
     * <b><i>public void useKeyboard(boolean use)</i></b>
     * <br>
     * Since: API 1
     * <br>
     * <br>
     * Set if you would like to enable the use of the keyboard.
     * 
     * @param use 
     * <br>
     * True will enable the use of the keyboard.
     * <br>
     * False will disable the use of the keyboard.
     *  
     */

    public void useKeyboard(boolean use) {
        if(use == true) {
            view.setOnKeyListener(this);
            if(this.logGameEngineInputLog == true) {
                gameEngineLog.d(classTAG, "Keyboard enabled");
            }
        }
        else {
            view.setOnKeyListener(null);
            if(this.logGameEngineInputLog == true) {
                gameEngineLog.d(classTAG, "Keyboard disabled");
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T14:29:48.930

即使应用程序被破坏，传感器仍将继续工作，因为它没有被取消注册..总的来说，如果您注册了一个传感器，那么您也必须取消注册它..

# c# - 使用 DataTable.Clone() 保存和恢复对数据库的更改

> ID：10924970
> 
> 赞同：0
> 
> 时间：2012-06-07T02:41:18.000
> 
> 标签：c#, .net, datatable, strongly-typed-dataset

为了提供恢复已在数据库表中发生的更改的能力，我在`Clone()`大量更改之前创建了一个 DataTable。在决定取消更改之前，用户可以查看多个表单。在流程结束时，如果他们选择取消，我想将 Clone() 的数据更新回数据库。我不确定删除已添加的行然后添加回原来的 Clone()'d 行或更新计划更新的行是否有意义？似乎如果我要更新原始行，我将不得不循环将行从克隆复制到原始行？还是有其他方法？

```
// Clone the original data
cloneDataTable = origDataTable.Clone();
cloneDataTable.ImportRow(dataRow);

// Later in the process, if I need to delete the row
dataRow.Delete();
tableAdapter.Update(dataRow);

// I was considering that I could add the cloned row back in this fashion
origDataTable.ImportRow(cloneDataTable.Rows[0]);
tableAdapter.Update(dataRow); 
```

我可能对这个问题感到困惑，但我基本上是在寻找一种简单有效的方法，在已经执行了一系列插入/更新之后将最初的 Clone() 数据恢复回数据库。
理想情况下，我想执行更新，因为数据库插入会导致我想避免的序列值增加。

感谢您的帮助，如有必要，请寻求任何澄清。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T03:11:24.407

实现这样的撤消/取消功能的最佳选择是在事务范围内对数据库进行所有直接更改（假设您选择的数据库支持事务），然后根据是否提交或回滚该事务或者您的用户是否希望将他们的更改永久化。

使用 DataTable 实现自己滚动的撤消机制并不是一个好计划。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T03:17:38.840

使用事务，进行更改，并在可行的情况下完成事务

```
using(TransactionScope ts = new TransactionScope ())
{
//updates, inserts, etc
ts.Complete();
} 
```

如果发生异常或错误，事务将在 transactionScope 内回滚

如果您使用的是 SQL Server，请原谅英语不好！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T14:34:44.500

由于过程的复杂性，我不得不设计自己的解决方案。感谢那些建议创建交易会起作用的人，但这并不是一个简单的解决方案，否则我不会问。问题是用户可以选择取消的点，但必须全程跟踪和记录状态。我最终做的是当用户请求保存状态时，我`Clone()`使用 DataTable 并设置一个`cloned = true`标志。

稍后如果选择取消，我会`Merge()`从旧到新。

```
origDataTable.Merge(cloneDataTable);
tableAdapter.Update(origDataTable.Rows[0]); 
```

我希望这可以帮助别人。它有点复杂，但适合这个应用程序的需求，我喜欢能够维护自己的事务，因为我可以选择何时将状态保存到内存、写入数据库和还原。当然，在不同的设计中使用某些内置功能来处理事务可能更容易，但它适用于这个应用程序。感谢您的建议。

# nsurlconnection - RestKit 奇怪地处理用户名和密码

> ID：10924973
> 
> 赞同：3
> 
> 时间：2012-06-07T02:41:51.320
> 
> 标签：nsurlconnection, restkit

我基本上使用 RestKit`RKClient`并执行`get`请求。我的系统使用用户名/密码/帐户来验证用户。它只是用于用户名/密码的 httpbasic，并且该帐户只是一个子域。

我遇到的问题是，如果我执行以下操作：

1.  使用正确的信息登录（然后下载应用程序的所有数据）
2.  重置数据（这会删除我所有的核心数据对象，我还将共享 RKClient 的用户名和密码设置为空白）
3.  输入错误的用户名/密码，但输入正确的帐户，然后它将下载数据，就好像一切都正确一样。

我在设置用户名和密码之前和之后放置了puts，我可以看到它被更改为不正确的数据。而且我已将缓存设置为`RKRequestCachePolicyNone`（在共享客户端和 RKRequest 实例上）。

返回的请求说它不是从缓存中提取的。当我尝试使用 curl 在终端中复制问题时，我得到了正确的响应（我无法使用错误的用户名密码获取数据）。

那么为什么/如何将 RestKit 得到正确的响应呢？它正在访问服务器并返回 200 响应。

## 示例代码：

```
- (void)startDownload {
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    NSLog(@"username and password before (%@,%@)",[RKClient sharedClient].username,[RKClient sharedClient].password);
    [RKClient sharedClient].username = self.login;
    [RKClient sharedClient].password = self.password;

    NSLog(@"username and password after (%@,%@)",[RKClient sharedClient].username,[RKClient sharedClient].password);

    NSString *base = [NSString stringWithFormat:@"http://%@.%@api",self.accountName,[defaults stringForKey:@"myURL"]];

    [[RKClient sharedClient] setBaseURL:base];
    [[RKClient sharedClient] setAuthenticationType:RKRequestAuthenticationTypeHTTPBasic];

    [[RKClient sharedClient] setCachePolicy:RKRequestCachePolicyNone];

    RKRequest *request = [[RKClient sharedClient] get:@"/verify.json" delegate:self];

    [request setCachePolicy:RKRequestCachePolicyNone];
} 
```

## 更新

我还注意到，如果我在第一次登录时输入了错误的密码，它就会以失败的形式返回。如果我然后更正密码，之后它总是会失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T13:55:02.750

显然 Restkit 存储了某种 cookie 用于身份验证。就我而言，只要用户名保持不变，我就可以注销并使用错误的密码重新登录。

就我而言，我可以通过以下方式解决问题：

```
NSHTTPCookieStorage *cookieStorage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
for (NSHTTPCookie *cookie in cookieStorage.cookies)
{
    [cookieStorage deleteCookie:cookie];
} 
```

这摆脱了所有存储的cookie。我希望这也能解决您的问题。

# r - 如何在 sweave 中读取命令行参数？

> ID：10924981
> 
> 赞同：1
> 
> 时间：2012-06-07T02:43:27.937
> 
> 标签：r, command-line-arguments, sweave

> **可能重复：**
> [R / Sweave 参数](https://stackoverflow.com/questions/9399459/r-sweave-arguments)

我正在研究乳胶和 R。我想在使用 sweave 时读取命令行参数。我找到了一个例子。

[R / Sweave 参数](https://stackoverflow.com/questions/9399459/r-sweave-arguments/10924564#10924564)

有人可以发布一些工作示例来阅读参数。我在尝试

```
R -e "Sweave('MyReport.Rnw')" --args PatientId=1 
```

在我的`commandArgs(TRUE)`Rnw 文件中。

```
print(PatientId) 
// Error: chunk 2 Error in print(PatientId) : object 'PatientId' not found Execution halted 
```

# java - JAX-RS Jersey 客户端使用 POJO MAPPING 和 Jackson 编组 JSON 响应

> ID：10924984
> 
> 赞同：5
> 
> 时间：2012-06-07T02:43:58.997
> 
> 标签：java, json, jersey, jax-rs, jackson

我在使用 JSONConfiguration.FEATURE_POJO_MAPPING 设置为 true 的 Jersey 客户端（1.11）时遇到了一些问题。我的测试代码如下所示：

```
MyFooCollectionWrapper<MyFooDTO> resp
    = webResource.accept(MediaType.APPLICATION_JSON)
      .get(new GenericType<MyFooCollectionWrapper<MyFooDTO>>() {}); 
```

在服务器上：

1) 我的 web.xml 将 POJO 映射设置为 true。

2) MyFooDTO 只是一个 POJO，如下所示：

```
public class MyFooDTO {

private long id;
private String propA;

pubic long getId() {
    return id;
}
public void setId(long id) {
    this.id = id;
}

pubic String getPropA() {
    return propA;
}
public void setPropA(String propA) {
    this.propA = propA;
}

public MyFooDTO(MyFoo aFoo) {
    this.id = aFoo.getId();
    this.propA = aFoo.getPropA();
}

    public MyFooDTO() {}

} 
```

3) MyFooCollectionWrapper 看起来像这样：

```
public class MyFooCollectionWrapper<T> extends MyFooCollectionWrapperBase {

    Collection<T> aCollection;

    public MyFooCollectionWrapper() {
        super();
    }

    public MyFooCollectionWrapper(boolean isOK, String msg, Collection<T> col) {
        super(isOK, msg);
        this.aCollection = col;
    }

    public void setCollection(Collection<T> collection) {
        this.aCollection = collection;
    }

    @JsonProperty("values")
    public Collection<T> getCollection() {
        return aCollection;
    }
}

public class MyFooCollectionWrapperBase {

    private boolean isOK;
    private String message;

    public MyFooCollectionWrapperBase() {
        this.message = "";
        this.isOK = false;
    }

    public MyFooCollectionWrapperBase(boolean ok, String msg) {
        this.isOK = ok;
        this.message = msg;
    }

    .. standard getter/setters ..

} 
```

我已经验证服务器创建 Json 响应没有问题。如果我将响应类型设置为字符串，我可以使用我的 Jersey 客户端代码进行检索。当我使用

```
MyFooCollectionWrapper<MyFooDTO> resp = webResource.accept(MediaType.APPLICATION_JSON).get(new GenericType<MyFooCollectionWrapper<MyFooDTO>>() {}); 
```

我希望 POJO 映射能够正常工作（编组响应），而不需要任何自定义消息正文阅读器。但是，我得到：

```
Jun 04, 2012 3:02:20 PM com.sun.jersey.api.client.ClientResponse getEntity
SEVERE: A message body reader for Java class com.foo.MyFooCollectionWrapper, and Java type     com.foo. MyFooCollectionWrapper<com.foo.MyFooDTO>, and MIME media type application/json was not found
Jun 04, 2012 3:02:20 PM com.sun.jersey.api.client.ClientResponse getEntity
SEVERE: The registered message body readers compatible with the MIME media type are:
application/json ->
com.sun.jersey.json.impl.provider.entity.JSONJAXBElementProvider$App
com.sun.jersey.json.impl.provider.entity.JSONArrayProvider$App
com.sun.jersey.json.impl.provider.entity.JSONObjectProvider$App
com.sun.jersey.json.impl.provider.entity.JSONRootElementProvider$App
com.sun.jersey.json.impl.provider.entity.JSONListElementProvider$App
*/* ->
com.sun.jersey.core.impl.provider.entity.FormProvider
com.sun.jersey.core.impl.provider.entity.MimeMultipartProvider
com.sun.jersey.core.impl.provider.entity.StringProvider
com.sun.jersey.core.impl.provider.entity.ByteArrayProvider
com.sun.jersey.core.impl.provider.entity.FileProvider
com.sun.jersey.core.impl.provider.entity.InputStreamProvider
com.sun.jersey.core.impl.provider.entity.DataSourceProvider
com.sun.jersey.core.impl.provider.entity.XMLJAXBElementProvider$General
com.sun.jersey.core.impl.provider.entity.ReaderProvider
com.sun.jersey.core.impl.provider.entity.DocumentProvider
com.sun.jersey.core.impl.provider.entity.SourceProvider$StreamSourceReader
com.sun.jersey.core.impl.provider.entity.SourceProvider$SAXSourceReader
com.sun.jersey.core.impl.provider.entity.SourceProvider$DOMSourceReader
com.sun.jersey.json.impl.provider.entity.JSONJAXBElementProvider$General
com.sun.jersey.json.impl.provider.entity.JSONArrayProvider$General
com.sun.jersey.json.impl.provider.entity.JSONObjectProvider$General
com.sun.jersey.core.impl.provider.entity.XMLRootElementProvider$General
com.sun.jersey.core.impl.provider.entity.XMLListElementProvider$General
com.sun.jersey.core.impl.provider.entity.XMLRootObjectProvider$General
com.sun.jersey.core.impl.provider.entity.EntityHolderReader
com.sun.jersey.json.impl.provider.entity.JSONRootElementProvider$General
com.sun.jersey.json.impl.provider.entity.JSONListElementProvider$General
com.sun.jersey.json.impl.provider.entity.JacksonProviderProxy
com.sun.jersey.moxy.MoxyMessageBodyWorker
com.sun.jersey.moxy.MoxyListMessageBodyWorker

com.sun.jersey.api.client.ClientHandlerException: A message body reader for Java class com.foo.MyFooCollectionWrapper, and Java type com.foo. MyFooCollectionWrapper<com.foo. MyFooDTO>, and MIME media type application/json was not found
  at com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:550)
  at com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:524)
  at com.sun.jersey.api.client.WebResource.handle(WebResource.java:686)
  at com.sun.jersey.api.client.WebResource.access$300(WebResource.java:74)
  at com.sun.jersey.api.client.WebResource$Builder.get(WebResource.java:508) 
```

客户端测试的类路径包括：

```
jersey-test-framework-core-1.11.jar 
jersey-test-framework-embedded-glassfish-1.11.jar 
jersey-test-framework-grizzly-1.11.jar 
jersey-test-framework-http-1.11.jar 
jersey-test-framework-inmemory-1.11.jar 
jackson-core-asl.jar 
jackson-jaxrs.jar 
jackson-xc.jar 
jackson-client.jar 
jersey-client.jar 
jersey-core.jar 
jersey-json.jar 
jettison.jar 
```

我的期望是错误的还是我在这里遗漏了一些明显的东西？

作为旁注，如果我将 JAXB 注释添加到我的实体（MyFooCollectionWrapper 和 MyFooDTO 上的 @XmlRootElement）使用相同的 webResource get 调用，客户端我没有收到消息正文阅读器异常，但是，响应被编组以便 MyFooCollectionWrapper看起来不错，但它的集合不包含 MyFooDTO 它包含在节点/属性中具有正确值的 XML 文档 - 换句话说，MyFooDTP 不会被封送。

当按照答案中的建议将 java.util.logging 设置为 CONFIG 时，我看到了以下内容，尽管我没有任何反应。这是由于长度原因我放在 pastebin 上的输出的[链接。](http://pastebin.com/qkYgewvm)

谢谢，

-诺亚

更新 - 已解决

最初我的客户端和客户端配置是这样创建的：

```
Client rootClient = new Client();
ClientConfig clientConfig = new DefaultClientConfig();
clientConfig.getFeatures().put(JSONConfiguration.FEATURE_POJO_MAPPING, Boolean.TRUE);
Client client = new Client(rootClient, clientConfig); 
```

当我将其更改为简单时

```
 ClientConfig clientConfig = new DefaultClientConfig();
    clientConfig.getFeatures().put(JSONConfiguration.FEATURE_POJO_MAPPING, Boolean.TRUE);
    Client client = Client.create(clientConfig); 
```

事情奏效了。看来 rootClient 正在覆盖新客户端上的 clientConfig。奇怪的是，当您使用指定 ClientConfig 的构造函数时，ClientConfig 会被 rootClients 配置覆盖。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T10:25:11.003

要在客户端启用 POJO 映射，只需执行以下操作：

```
ClientConfig clientConfig = new DefaultClientConfig();
clientConfig.getFeatures().put(JSONConfiguration.FEATURE_POJO_MAPPING, Boolean.TRUE);
Client client = Client.create(clientConfig); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T14:03:27.820

我相信这是因为`MyFooDTO`没有无参数构造函数。

如果您将 java.util.logging 级别更改为`CONFIG`，您应该会看到许多有助于诊断此类问题的额外消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-12T18:48:18.077

你知道我觉得更容易吗？

```
MyFooDTO[] resp = webResource.accept(MediaType.APPLICATION_JSON).get(MyFooDTO[].class); 
```

通过使用数组类型，编组器确切地知道您想要拉入什么类型并且知道它是一个集合。您无法获得 Legit 集合的所有功能，但您可以立即对其进行迭代和流式传输。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-10T10:44:18.747

您可以在客户端启用 POJO 映射，如下所示

```
 ClientConfig clientConfig = new DefaultClientConfig();
            clientConfig.getFeatures().put(JSONConfiguration.FEATURE_POJO_MAPPING, Boolean.TRUE);
            Client client = Client.create(clientConfig);

            WebResource webResource = client
                    .resource("http://localhost:8080/api/url");

            ClientResponse response = webResource.accept("application/json")
                    .get(ClientResponse.class);

            if (response.getStatus() != 200) {
                throw new RuntimeException("Failed : HTTP error code : "
                        + response.getStatus());
            }

            POJOObject output = response.getEntity(POJOObject.class); 
```

如果您有响应的对象列表，那么您可以这样做

```
 List<POJOObject> pojoList = webResource.get(new GenericType<List<POJOObject>>() { }); 
```

您需要使用这些依赖项

```
 <dependency>
        <groupId>com.sun.jersey</groupId>
        <artifactId>jersey-client</artifactId>
        <version>1.18.1</version>
    </dependency>

    <dependency>
        <groupId>com.sun.jersey</groupId>
        <artifactId>jersey-json</artifactId>
        <version>1.18.1</version>
    </dependency> 
```

# java - 方法 put(String, ArrayList ) 在 TreeMap 类型中 > 不适用于参数（字符串、布尔值）

> ID：10924987
> 
> 赞同：0
> 
> 时间：2012-06-07T02:44:40.573
> 
> 标签：java, put, treemap

我在这条线上遇到错误

```
tm.put(temp[j],tm.get(temp[j]).add(i)); 
```

当我在eclipse中编译我的程序时：

```
The method put(String, ArrayList<Integer>) in the type TreeMap<String,ArrayList<Integer>> is not applicable for the arguments (String, boolean) 
```

以下是我的代码：

```
TreeMap<String, ArrayList<Integer>> tm=new TreeMap<String, ArrayList<Integer>>();
String[] temp=folders.split(" |,");
for (int j=1;j<temp.length;j++){

            if (!tm.containsKey(temp[j])){
                tm.put(temp[j], new ArrayList<Integer>(j));
            } else {
                tm.put(temp[j],tm.get(temp[j]).add(j));
            }
        } 
```

*文件夹*是这样的

```
folders="0 Jim,Cook,Edward"; 
```

我想知道为什么前一个*put*方法没有错误，而只有第二个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T02:49:05.757

`ArrayList.add(E)`返回 a `boolean`，您根本无法将它们链接起来。

`tm.get(temp[j]).add(j);`就够了，不用再重复`put`了。

`new ArrayList<Integer>(j)`不会给你一个元素的arraylist，参数是initialCapacity。

然后，您应该声明`tm`为`Map<String, List<Integer>>`.

```
Map<String, List<Integer>> tm=new TreeMap<String, List<Integer>>();
String[] temp=folders.split(" |,");
for (int j=1;j<temp.length;j++){

    if (!tm.containsKey(temp[j])){
        tm.put(temp[j], new ArrayList<Integer>());
    }
    tm.get(temp[j]).add(j); // This will change the arraylist in the map.

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T02:48:56.110

`ArrayList.add(E)`返回一个`boolean`值，因此，您不能将调用合并到单个语句中。

您需要将`ArrayList<Integer>`对象作为第二个参数传递给该`put`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T02:48:56.687

[`ArrayList::add`在这种情况下返回 true](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ArrayList.html#add%28java.lang.Object%29)；也就是说，它不会返回新的 ArrayList。尝试克隆列表，添加到其中，然后将其作为参数传递。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T02:51:27.190

[http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#add(E](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#add(E) )

public boolean add(E e) 将指定元素附加到此列表的末尾并返回一个布尔值。因此，错误。

# visualization - 如何在 D3.js 中的力有向图中将文本附加到一行并呈现该文本？

> ID：10924990
> 
> 赞同：1
> 
> 时间：2012-06-07T02:45:02.250
> 
> 标签：visualization, data-visualization, d3.js

我正在尝试学习如何使用 D3.js 中的 force.layout 功能，并且一直在构建“[力定向径向图](http://bl.ocks.org/2879486)”。

我已经能够成功地从节点（例如节点名称）附加和渲染文本，但我似乎无法从行（或其他人可能称之为链接或边缘的内容）（例如关系名称）中获取要渲染的文本。

有谁知道我在哪里可以找到很好的例子来教如何做到这一点，或者有可以纠正我所做的事情的代码片段？

谢谢你尽你所能的帮助。非常感谢。

我最好的，

坦率

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T14:35:45.113

该示例已经展示了如何将文本添加到边缘。这是相关的代码：

```
 // Append text to Link edges
  var linkText = svgCanvas.selectAll(".gLink")
      .data(force.links())
    .append("text")
  .attr("font-family", "Arial, Helvetica, sans-serif")
  .attr("x", function(d) {
      if (d.target.x > d.source.x) { return (d.source.x + (d.target.x - d.source.x)/2); }
      else { return (d.target.x + (d.source.x - d.target.x)/2); }
  })
      .attr("y", function(d) {
      if (d.target.y > d.source.y) { return (d.source.y + (d.target.y - d.source.y)/2); }
      else { return (d.target.y + (d.source.y - d.target.y)/2); }
  })
  .attr("fill", "Maroon")
      .style("font", "normal 12px Arial")
      .attr("dy", ".35em")
      .text(function(d) { return d.linkName; }); 
```

# sql - 仅从 datetime 获取日期时-哪个最好，为什么？

> ID：10924991
> 
> 赞同：2
> 
> 时间：2012-06-07T02:45:05.807
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2005

因此，我最近在工作中存在一些分歧，即哪个是从`getdate()`（或从日期时间列）获取月份的最佳方式。

我知道有两种方法是相当标准的：

**方法#1：**

```
select DateAdd(Day, 0, DateDiff(Day, 0, Getdate())) 
```

和**方法#2：**

```
select Cast(Floor(Cast(Getdate() as Float)) as Datetime) 
```

我是方法 #2 的忠实粉丝，因为我发现它更容易内化并且（稍微）更快。但是，有人告诉我方法 #1 是执行此操作的标准方法。我的问题是为什么？我最适合使用这两种方法中的哪一种作为从我的武器库中的日期开始一个月的方法，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T03:36:19.903

在 SQL Server 2008 中，我同样满意：

```
SELECT CONVERT(DATE, CURRENT_TIMESTAMP); 
```

除了更简单和自记录之外，这是一个例外，可以将转换应用于列并仍然使用索引。例如，如果两者产生大致相同的性能，哪个更容易阅读？

```
WHERE CONVERT(DATE, col) = CONVERT(DATE, CURRENT_TIMESTAMP) 
```

比。

```
WHERE col >= CONVERT(DATE, CURRENT_TIMESTAMP) -- or any of your alternatives
AND col < DATEADD(DAY, 1, CONVERT(DATE, CURRENT_TIMESTAMP)) 
```

在这三种方法中，您可能会发现微小的性能差异，但恕我直言，自行测试它们的价值不大。你多久从一个单独的约会中剥离一百万次时间？您应该会发现，给定相同的语义，作为实际查询的一部分，使用 DATEDIFF 或 FLOOR 或 CONVERT 的成本不会被考虑在内。

顺便说一句，如果您将结果分配给显式 DATETIME 或 SMALLDATETIME 变量/列，或者通过 where 子句隐式执行此操作，则可以跳过 DATEADD 部分。

```
SELECT CONVERT(DATETIME, DATEDIFF(DAY, 0, CURRENT_TIMESTAMP)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T03:04:30.000

我相信前者更好，因为它不涉及浮点数学，只需要访问日期时间内部存储中的第一个整数。也看到[这个](https://stackoverflow.com/questions/353014/convert-sql-server-datetime-fields-to-compare-date-parts-only-with-indexed-look/353049#353049)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T03:21:20.493

我运行脚本进行测试，您的方法 #1 和方法 #2 在速度上都非常相似。Charles Bretana 发布的答案实际上在每次测试中都比较慢。当然，这些都是相当不科学的，所以你自己测试一下。这是我写的脚本：

```
declare @starttime datetime
declare @endtime datetime

set @starttime = GETDATE()
print convert(varchar(30), @starttime, 109)

declare @cnt int
set @cnt = 0

declare @datevar datetime

while @cnt < 10000000
begin

    select @datevar = DateAdd(Day, 0, DateDiff(Day, 0, Getdate())) -- Replace this with whichever function you'd like to test
        , @cnt = @cnt + 1
end

set @endtime = GETDATE()
print convert(varchar(30), @endtime, 109)

print cast(datediff(ms, @starttime, @endtime) as varchar(20)) + ' ms' 
```

只需将 select @datevar = 行替换为适当的行。在我的开发机器上，方法 1 和 2 通常在 7200 - 7300 毫秒内运行。查尔斯发布的方法通常平均为 8300 - 8500 毫秒

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T10:23:14.877

从 getdate() 中获取月份：

```
SELECT DATEPART(MONTH, GETDATE()) 
```

# sql - 平均列并在 sql 中对它们进行排序

> ID：10924993
> 
> 赞同：0
> 
> 时间：2012-06-07T02:45:30.247
> 
> 标签：sql, sql-order-by, average

我需要订购这个 avg values desc，但不知何故我不能。请帮忙

![我的查询是这样的：](../Images/b317203a91c0e20ab657ac267a1d494b.png)

解决方案可能很简单:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T06:12:22.953

我假设您想对左列中具有最高值的列进行排序。我还假设您使用的是 SQL Server。从图片上看肯定是这样的。

```
The solution is probably very simple. 
```

不知道那件事。你告诉我...

```
with C(A, B, C) as
(
  -- Your query goes here
)
select [1],[2],[3]
from (
       select Val, row_number() over(order by Val desc) as rn
       from C unpivot (Val for Col in(A, B, C)) U
     ) T
pivot (min(val) for rn in ([1],[2],[3])) P 
```

[概念证明](https://data.stackexchange.com/stackoverflow/query/72051)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T05:05:58.693

```
SELECT X FROM
(
    SELECT aa X FROM table
    UNION ALL
    SELECT bb X FROM table
    UNION ALL
    SELECT cc X FROM table
) a
ORDER BY X DESC 
```

这样的事情会做吗？

# c# - 关于 C# 中的 base

> ID：10924996
> 
> 赞同：0
> 
> 时间：2012-06-07T02:45:43.163
> 
> 标签：c#, base

```
namespace contest
{
    class Program
    {
        static void Main(string[] args)
        {
            B b = new B();
        }
    }

    class A {
        public A() {
            k();
        }
        private void k() {
            Console.WriteLine(base.GetType().Name);
        }        
    }

    class B : A {

    }
} 
```

有人能告诉我为什么它输出“B”而不是“Object”，base.GetType() 不获取 A 的父对象因此是根对象吗？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T02:49:56.937

发生这种情况是因为

```
base.GetType() 
```

意思是“调用`GetType()`父类的方法”，虽然你没有覆盖它。因此`base.GetType()`，`this.GetType()`总是会返回类`B`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T03:05:39.353

`GetType`定义在`System.Object`并且不是虚拟的。它从元数据中提供对象的运行时类型。因此，无论您在哪里调用它（在构造函数或虚拟方法中），或者您是否使用`base`或`this`始终调用相同的方法，都无关紧要。您将始终获得运行时类型，除非在 Nullable 类型的情况下您将获得基础类型。我的猜测是，这是由于 nullables 的特殊装箱行为。请参阅[this](http://msdn.microsoft.com/en-us/library/ms366789%28v=vs.100%29.aspx) on identify nullable types。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T02:55:42.750

B 从 A 实现/继承，当您初始化 B b = new B() 时，它将只使用 a 的胆量，因此返回 B 的类型。尝试使用 A b = new B(); 这应该返回 A。您需要覆盖方法并将 A 定义为抽象。

# c# - ASP.NET 和 C# - 获取静态 DropDownList 中的选定项

> ID：10924997
> 
> 赞同：0
> 
> 时间：2012-06-07T02:45:53.537
> 
> 标签：c#, asp.net, drop-down-menu, selected, ispostback

我是 ASP.NET 新手，在获取静态 DropDownList 中的选定项目时遇到问题。这是我列表的结构：

```
 <asp:DropDownList ID="txtGender" runat="server">
                            <asp:ListItem>Male</asp:ListItem>

                            <asp:ListItem>Female</asp:ListItem>

                            <asp:ListItem>Other</asp:ListItem>

                            <asp:ListItem>Rather not say</asp:ListItem>
                    </asp:DropDownList> 
```

然后在我想要获取所选项目的代码中，我使用`txtGender.SelectedItem`并始终将第一项作为输入。我有另一个 DropDownList ，我必须从数据库中获取项目，然后我`IsPostBack`在调用之前使用`DataBind()`它，它工作正常。所以我想知道我应该如何`IsPostBack`在上面的静态 DropDownList 中使用？请帮忙。

**已编辑*

以下是我使用的方法`txtGender`：

```
protected void btnSave_Click(object sender, EventArgs e)
{
    int uID= int.Parse(Session["uID"].ToString());
    PhotoDataSetTableAdapters.MembersTableAdapter memAdap = new PhotoDataSetTableAdapters.MembersTableAdapter();
    PhotoDataSet.MembersDataTable memTable = memAdap.GetMemberByID(uID);

    DataRow[] dr = memTable.Select("userID = " + uID);
    string Fname = memTable.AsEnumerable().Single().Field<String>("avatar");
    if(PhotoUploader.HasFile)
    {
       Fname = Path.GetFileName(PhotoUploader.FileName);
       PhotoUploader.SaveAs(Server.MapPath("~/avatar/") + Fname);
    }

    string newPass = memTable.AsEnumerable().Single().Field<String>("password");
    if (txtPass.Text != "")
    {
        newPass = txtPass.Text;
    }

    string tmp = txtBday.Text;
    DateTime bday = DateTime.ParseExact(tmp, "dd/MM/yyyy", null);

    memAdap.UpdateMemberProfile(newPass, txtEmail.Text, txtRealname.Text, txtLocation.Text, txtGender.SelectedItem.Text, txtBio.Text, bday, Fname, uID);
    //Response.Write(txtGender.SelectedItem.Text + " " + txtBio.Text);
    Response.Redirect("Photostream.aspx");
} 
```

Ps：我尝试使用`Response.Write`来查看性别的输入，但它始终是要选择的列表的第一项。`txtBio`即使一切看起来都很好，我也没有任何意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T03:03:51.220

如果您没有重新绑定下拉列表的选项，并且您没有在回发时重置其实际值，则您不必对`IsPostBack`. 您应该能够执行以下操作来获取值和文本：

```
string value = txtGender.SelectedValue;
string text = txtGender.SelectedItem.Text; 
```

注意：控件的实际值在 Page_Init 期间将不可用，因为页面尚未完全初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T17:44:33.543

您需要为 DropDownList 中的 ListItems 分配唯一值：

```
<asp:DropDownList ID="txtGender" runat="server">
      <asp:ListItem Value="0">Male</asp:ListItem>

      <asp:ListItem Value="1">Female</asp:ListItem>

      <asp:ListItem Value="2">Other</asp:ListItem>

      <asp:ListItem Value="3">Rather not say</asp:ListItem>
</asp:DropDownList> 
```

试试这个，看看它是否有帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-07T04:14:46.923

Bind the dropdown on page load and check the IsPostBack property

```
protected void Page_Load(object sender, EventArgs e)
{
   if (!IsPostBack)
    {
        // Dropdown binding code goes here....   
    }
 } 
```

# c - gtksourceview 中的代码折叠

> ID：10924998
> 
> 赞同：4
> 
> 时间：2012-06-07T02:46:07.473
> 
> 标签：c, gtk, gtksourceview

我在[https://live.gnome.org/GtkSourceView](https://live.gnome.org/GtkSourceView)上看到“我们现在可以使用 gtk+ 2.8 支持 GtkSourceView 中的代码折叠”。然而我在任何地方都找不到任何例子。准备好使用了吗？有没有可以提供的例子来让事情顺利进行？

我已阅读错误报告，并已通过电子邮件向 Bijan Binaee 提供帮助，但没有收到任何回复。任何人有任何见解？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-02-15T20:56:48.893

我最近重新审视了这个话题，并且能够拼凑出一个简单的 python 示例，它演示了在 gtk 中完成代码折叠的一种方法：

```
#!/usr/bin/python

import gi
gi.require_version('Gtk', '3.0')
gi.require_version('GtkSource', '3.0')

import signal
import sys,os
import cairo
from gi.repository import Gtk as gtk
from gi.repository import Gdk as gdk
from gi.repository import GObject as gobject
from gi.repository import GtkSource as gtksource
from gi.repository.GdkPixbuf import Pixbuf

theme = 'light'     # [light/dark] type of gtk theme in use

class Editor:

        def check_sigint_timer(self,timeout):
                gobject.timeout_add_seconds(timeout, self.check_sigint)

        def check_sigint(self):
                return True

        def quit_activated(self):
                dialog = gtk.MessageDialog(parent=self.window, type=gtk.MessageType.QUESTION, buttons=gtk.ButtonsType.YES_NO)   
                dialog.set_title("Question")
                dialog.set_position(gtk.WindowPosition.CENTER_ALWAYS)
                dialog.set_markup("Are you sure you want to quit?")
                response = dialog.run()
                if response == gtk.ResponseType.YES:
                    dialog.destroy()
                    gtk.main_quit()
                elif response == gtk.ResponseType.NO:
                    dialog.destroy()

        def delete_event_cb(self, widget, data=None):
                print "delete_event signal occurred"
                self.quit_activated()
                return True

        def destroy_cb(self, widget, data=None):
                print "destroy signal occurred"
                self.quit_activated()

        def signal_handler(self, signal, frame):
                print '\nYou pressed Ctrl+C!, exiting'
                gtk.main_quit()

        def get_fold_minus_pixbuf(self):
                w = 24
                h = 24
                surface = cairo.ImageSurface (cairo.FORMAT_ARGB32, w, h)
                cr = cairo.Context (surface)
                if theme == 'dark':
                    cr.set_source_rgb(0.94, 0.94, 0.94)
                else:       
                    cr.set_source_rgb(0., 0., 0.)
                cr.rectangle(0,0,w,h)
                cr.fill()

                if theme == 'dark':
                    cr.set_source_rgb(0., 0., 0.)
                else:       
                    cr.set_source_rgb(0.94, 0.94, 0.94)
                cr.move_to (w/5.,h/2.)
                cr.line_to (w*0.8,h/2.)
                cr.stroke ()

                pixbuf = gdk.pixbuf_get_from_surface(surface,0,0,w,h)
                return pixbuf

        def get_fold_plus_pixbuf(self):
                w = 24
                h = 24
                surface = cairo.ImageSurface (cairo.FORMAT_ARGB32, w, h)
                cr = cairo.Context (surface)
                if theme == 'dark':
                    cr.set_source_rgb(0.94, 0.94, 0.94)
                else:       
                    cr.set_source_rgb(0., 0., 0.)
                cr.rectangle(0,0,w,h)
                cr.fill()

                if theme == 'dark':
                    cr.set_source_rgb(0., 0., 0.)
                else:       
                    cr.set_source_rgb(0.94, 0.94, 0.94)
                cr.move_to (w/5.,h/2.)
                cr.line_to (w*0.8,h/2.)
                cr.stroke ()

                cr.move_to (w/2.,h/5.)
                cr.line_to (w/2.,h*0.8)
                cr.stroke ()

                pixbuf = gdk.pixbuf_get_from_surface(surface,0,0,w,h)
                return pixbuf

        def get_fold_vert_pixbuf(self):
                w = 24
                h = 24
                surface = cairo.ImageSurface (cairo.FORMAT_ARGB32, w, h)
                cr = cairo.Context (surface)
                if theme == 'dark':
                    cr.set_source_rgb(1., 1., 1.)
                else:       
                    cr.set_source_rgb(0., 0., 0.)
                cr.move_to (w/2,0)
                cr.line_to (w/2,h)
                cr.stroke ()
                pixbuf = gdk.pixbuf_get_from_surface(surface,0,0,w,h)
                return pixbuf

        def get_fold_end_pixbuf(self):
                w = 24
                h = 24
                surface = cairo.ImageSurface (cairo.FORMAT_ARGB32, w, h)
                cr = cairo.Context (surface)
                if theme == 'dark':
                    cr.set_source_rgb(1., 1., 1.)
                else:       
                    cr.set_source_rgb(0., 0., 0.)
                cr.move_to (w/2,0)
                cr.line_to (w/2,h/2)
                cr.line_to (w,h/2)
                cr.stroke ()
                pixbuf = gdk.pixbuf_get_from_surface(surface,0,0,w,h)
                return pixbuf

        def place_mark(self,mtype,line):
                iter = self.buffer.get_iter_at_line (line)

                if mtype == '+':
                    self.buffer.create_source_mark(None, "fold_plus", iter)
                elif mtype == '-':
                    self.buffer.create_source_mark(None, "fold_minus", iter)
                elif mtype == '|':
                    self.buffer.create_source_mark(None, "fold_vert", iter)
                elif mtype == 'end':
                    self.buffer.create_source_mark(None, "fold_end", iter)

        def create_marks(self):
                pixbuf = self.get_fold_plus_pixbuf()
                mark_attr = gtksource.MarkAttributes.new()
                mark_attr.set_pixbuf(pixbuf)
                self.view.set_mark_attributes("fold_plus",mark_attr,0)

                pixbuf = self.get_fold_minus_pixbuf()
                mark_attr = gtksource.MarkAttributes.new()
                mark_attr.set_pixbuf(pixbuf)
                self.view.set_mark_attributes("fold_minus",mark_attr,0)

                pixbuf = self.get_fold_vert_pixbuf()
                mark_attr = gtksource.MarkAttributes.new()
                mark_attr.set_pixbuf(pixbuf)
                self.view.set_mark_attributes("fold_vert",mark_attr,0)

                pixbuf = self.get_fold_end_pixbuf()
                mark_attr = gtksource.MarkAttributes.new()
                mark_attr.set_pixbuf(pixbuf)
                self.view.set_mark_attributes("fold_end",mark_attr,0)

        def mark_activated_cb(self,view,iter,event):
                line = iter.get_line()
                marks = self.buffer.get_source_marks_at_iter(iter)          
                for mark in marks:
                    cat = mark.get_category()   
                    if cat == 'fold_minus':
                        start = self.buffer.get_iter_at_line (self.block[0]+1)
                        end = self.buffer.get_iter_at_line (self.block[1]+1)
                        self.buffer.apply_tag_by_name("invisible",start,end)

                        # remove the existing mark, then create the opposite mark
                        start = self.buffer.get_iter_at_line (self.block[0])
                        self.buffer.remove_source_marks(start,start)
                        self.place_mark('+',self.block[0])

                    elif cat == 'fold_plus':
                        start = self.buffer.get_iter_at_line (self.block[0]+1)
                        end = self.buffer.get_iter_at_line (self.block[1]+1)
                        self.buffer.remove_all_tags(start,end)

                        # remove the existing mark, then create the opposite mark
                        start = self.buffer.get_iter_at_line (self.block[0])
                        self.buffer.remove_source_marks(start,start)
                        self.place_mark('-',self.block[0])

        def __init__(self):

                signal.signal(signal.SIGINT, self.signal_handler)

                self.window = gtk.Window(gtk.WindowType.TOPLEVEL)
                self.window.connect("delete_event", self.delete_event_cb)
                self.window.connect("destroy", self.destroy_cb)
                self.window.set_border_width(10)
                self.window.maximize()

                self.view = gtksource.View()
                self.view.connect("line-mark-activated",self.mark_activated_cb)
                self.buffer = self.view.get_buffer()
                self.view.set_show_line_numbers(True)
                self.view.set_show_line_marks(True)
                sw = gtk.ScrolledWindow()
                sw.add(self.view)
                self.window.add(sw)

                path = sys.argv[0]
                txt = open(path).read()
                self.buffer.set_text(txt)

                lm = gtksource.LanguageManager.new()
                lang = lm.guess_language(path)
                self.buffer.set_highlight_syntax(True)
                self.buffer.set_language(lang)

                self.buffer.create_tag("invisible",invisible=True)

                self.block = [25,35]
                self.create_marks()
                self.place_mark('-',self.block[0])

                for i in xrange(self.block[0],self.block[1]):
                    self.place_mark('|',i)

                self.place_mark('end',self.block[1])

                self.window.show_all()

                self.check_sigint_timer(1)

        def main(self):
                gtk.main()

if __name__ == "__main__":
        ed = Editor()
        ed.main() 
```

请务必更改主题变量以反映您碰巧使用的 gtk3 主题的类型。

如果有人能展示如何消除在排水沟中绘制的垂直线中的线间隙，将不胜感激。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-02T08:31:24.517

对不起，邮件，它可能是我错过了

有一些基于 GTef 的 GTK Source View 代码折叠工作。[您可以在此存储库](https://github.com/NoreSoft/gtef/tree/code-folding)中找到最新的工作源

您还可以查看[bugzilla 页面](https://bugzilla.gnome.org/show_bug.cgi?id=134610)