# StackOverflow 问答 10804000-10804999

# c# - 尝试获取同一结果列中每列的不同值计数列表

> ID：10804002
> 
> 赞同：0
> 
> 时间：2012-05-29T17:36:53.147
> 
> 标签：c#, sql, linq

所以对于这个例子，假设我有一个名为 dt 的 DataTable 并且它有一些列，我想返回一个列名列表以及每列中有多少不同的值。我也想要按从大到小排序的结果集

例如，我有一个包含 4 列和 40 行数据的表，第一列有 4 个不同的值，第二列 12，第三列 20，第四列 40。我希望我的结果集看起来像这样

```
Column4 40
Column3 20
Column2 12
Column1 4 
```

我如何使用 C# 和 Linq 来实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T17:42:22.710

您的 LINQ 代码

```
var result = dt.Columns
    .Cast<DataColumn>()
    .Select(dc => new {
        Name = dc.ColumnName,
        Values = dt.Rows
            .Cast<DataRow>()
            .Select(row => row[dc])
            .Distinct()
            .Count()})
    .OrderBy(item => item.Values); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T17:51:50.823

```
var result =
    dt.Columns
        .Cast<DataColumn>()
        .Select(c =>
            new
            {
                c.ColumnName,
                DistinctValuesCount =
                    dt.Rows
                        .Cast<DataRow>()
                        .Select(r => r[c])
                        .Distinct()
                        .Count()
            })
        .OrderByDescending(i => i.DistinctValuesCount)
        .ToArray(); 
```

# jquery - 使用 jQuery 在浏览器滚动条移动时找出 div 的位置

> ID：10804006
> 
> 赞同：0
> 
> 时间：2012-05-29T17:37:16.427
> 
> 标签：jquery

我有一个 div，当浏览器滚动条向上或向下移动时，我需要找到它的位置。这将帮助我检测这个 div 的当前位置，并且根据这个 div 的当前位置，我可以在它上面放置另一个 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:49:56.573

您可以像这样抓住位置：

```
var offset = $('#element').offset();
alert(offset.top + offset.left); 
```

# html - IE 8 选择框项目文本被截断

> ID：10804007
> 
> 赞同：2
> 
> 时间：2012-05-29T17:37:22.600
> 
> 标签：html, css, forms

选择框元素中的文本在初始加载时被截断，直到用户单击选择框，它看起来像这样：

![在此处输入图像描述](../Images/73566f1b066dc0312fa8c08af8341dde.png)

用户点击后，文本将展开为“女性”。这只发生在 IE 中。

此外，似乎如果选择框中有足够的文本，则不会发生截断。我刚刚注意到这种行为：

![在此处输入图像描述](../Images/f89955100933471a74465c85eb52a7e2.png)

我假设选择的文本没有样式挂钩？基于此信息，我认为将一堆空白附加到长度小于 6 个字符（或某些字符）的选项上，即使不是烦人的解决方案，也是可以接受的。

这是选择获得焦点后的样子：

![在此处输入图像描述](../Images/37fbb0a2bcb454ba8cfce39ec67695e4.png)

我尝试了这篇文章中的所有解决方案：

[选择固定宽度的下拉菜单，在 IE 中截断内容](https://stackoverflow.com/questions/682764/select-dropdown-with-fixed-width-cutting-off-content-in-ie)

这似乎是针对此问题的“转到”帖子。JavaScript 或 css 技术似乎都无法解决此错误。

看起来这将是一个常见问题；有人可以建议一个纯 css 修复来解决上面帖子中没有提到的 IE 中的这个错误吗？

谢谢你。

# javascript - 如何打开没有工具栏和地址栏的窗口？

> ID：10804008
> 
> 赞同：0
> 
> 时间：2012-05-29T17:37:23.817
> 
> 标签：javascript

有没有办法打开（通过javascript）一个新窗口但没有工具栏、地址栏等？

我已经测试了这段代码：

```
window.open('http://example.it','example','height=300px,width=724px,resizable=1,alwaysRaised=1,location=1,links=0,scrollbars=0,toolbar=0'); 
```

但在 Opera 中，它会显示书签栏和地址栏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:50:55.377

Opera 不支持隐藏书签或地址栏。这是[一个](http://www.gtalbot.org/BugzillaSection/Bug195867GDR_WindowOpen.html)记录这一点的网站，尽管它看起来很旧。使用 window.open() 快速搜索会发现很多浏览器怪癖，不幸的是，可能没有任何解决方法，因为以某种方式打开窗口是由浏览器严格控制的。

**编辑：**我刚刚在我发布的网站上发现了一个页面，上面写着“最后更新：2012 年 4 月 28 日”，所以也许俗气的 90 年代外观只是为了好玩。

# html - 让 dl 元素识别其 dt 元素内容

> ID：10804009
> 
> 赞同：0
> 
> 时间：2012-05-29T17:37:27.310
> 
> 标签：html, css

我有两个以下 CSS 代码：

```
dl.set {
    position: relative;
}

dl.set dt {
    position: absolute;
    border: 1px solid #000;
} 
```

和以下 HTML：

```
<dl class="set">
    <dt><img src="images1.jpg" /></dt>
    <dt><img src="images2.jpg" /></dt>
    <dt><img src="images3.jpg" /></dt>
</dl> 
```

我的目标是*安排图像在不同的位置相互重叠*。所以我想我能做的就是利用一个位置的`top`和`bottom`属性`absolute`来排列它们的位置。

但是，该`dl`元素无法识别其中的`dt`元素内容。`dl`元素框的高度保持为`0px`。我试图给`dl`元素 a`overflow: hidden`以清除浮动，但它也*不起作用*。相反，它会将`dt`元素剪掉。

如何让元素根据元素`dl`内容的大小相应地识别和扩展其大小`dt`，同时保持它们的位置`relative`和`absolute`关系（因为我需要以不同的方式定位元素）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T17:41:10.870

`absolute`定位将元素移出正常流程。因此，你`dl`所谓的空，`dt`是在另一层。

如果您定位`dt`绝对，`dl`将永远不会扩展到`dt`的大小（自动）。您需要重新构建 HTML/CSS 或提出一个 javascript 解决方案。

# jquery - 如何在加载的文档中替换或删除 URL 中的文本？

> ID：10804013
> 
> 赞同：0
> 
> 时间：2012-05-29T17:37:48.713
> 
> 标签：jquery, html

如何从已加载文档中的静态 URL 中删除文本。例如..我有..

```
<a href="mylink.html#something">My Link</a> 
```

如何使用jQuery从那个**href中删除****#something**？所以它会显示为..

 **```
<a href="mylink.html">My Link</a> 
```

另外，如果它有帮助的话.. 我无法删除任何包含**#**的内容，因为我正在做的是添加另一个主题标签来代替它。问题是我得到如下结果......

```
<a href="mylink.html#something#somethingelse>My Link</a> 
```

**编辑**

我的 jQuery...

```
$('ul li a').each(function () {
   $(this).prop("href", $(this).prop("href") + "#something");
}); 
```

我想做什么..

```
$('ul li a').each(function () {
   //remove #something from href if it is already there and replace with #somethingelse
   $(this).prop("href", $(this).prop("href") + "#something");
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T17:39:13.210

要从锚`href`属性中删除哈希，您可以使用以下命令：

```
$("a").attr("href", function(i, value) {
    return value.substring(0, value.indexOf("#"));
}); 
```

**演示：http:** [//jsfiddle.net/XUTqX/](http://jsfiddle.net/XUTqX/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:14:01.820

@VisioN .. 感谢您的帮助。但这是我一直在寻找的。

```
var changeHref = $('ul li a').attr("href").replace(/#something/, "#somethingelse");
$('ul li a').attr("href", changeHref); 
```**

# java - Animated textView 更改文本并再次动画（动画倒计时）

> ID：10804014
> 
> 赞同：1
> 
> 时间：2012-05-29T17:37:51.137
> 
> 标签：java, android, android-animation

我正在尝试在 android 平台上进行动画倒计时，显示 textView 中的数字 3 在 scale 属性上从 0 增长到 1.5，因此数字 2、1 和“GO！”。

我正在使用一个 textView、一个 Animation 和一个 AnimationListener，但动画不能按我的意愿工作，它只在显示数字 3 的第一个动画中工作，所以它显示了“go！”这个词 没有动画。

我究竟做错了什么？

谢谢！

这里查看 counter.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal" android:layout_height="fill_parent" 

android:layout_width="fill_parent" android:gravity="center_vertical|center_horizontal">

    <TextView
        android:id="@+id/txtCount"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="3" android:textColor="#ffffff" android:textSize="150dp"/>

</LinearLayout>

<?xml version="1.0" encoding="UTF-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <scale
        android:interpolator="@android:anim/linear_interpolator"
        android:fromXScale="0"
        android:toXScale="1.5"
        android:fromYScale="0"
        android:toYScale="1.5"
        android:fillAfter="false"
        android:duration="1000" />
</set> 
```

我的代码：

```
public class AdivinhacaoActivity extends Activity {

...

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ...

    //async task
    new loaderImages(this).execute();
}

private class loaderImages extends AsyncTask<Void, String, Bitmap[]> {

    Activity activity;
    public loaderImages(Activity act){
        activity = act;
    }

    protected Bitmap[] doInBackground(Void... arg0) {       

        ...

        return list;
    }

...
    int countCounter;
    protected void onPostExecute(Bitmap[] imagens){
        bmps = imagens;
        carregaContagem();
        final Animation anima = AnimationUtils.loadAnimation(activity, R.anim.counter);         

        countCounter = 3;

        anima.setAnimationListener(new AnimationListener() {                

                    public void onAnimationStart(Animation anim){};                 
                    public void onAnimationRepeat(Animation anim){};

                    public void onAnimationEnd(Animation anim)
                    {                   
                //here I tried txtCount.clearAnimation() but it doesn't work
                        countCounter--;                 
                        if(countCounter >= 0){
                    //change the text
                            if(countCounter > 0){
                                txtCount.setText("" + countCounter);
                            }
                            else{
                                txtCount.setText("GO!");                            
                            }   
                    //start animation again with text changed  
                            txtCount.startAnimation(anim);
                        }
                        else{
                            ...
                        }
                    };
                });

        //start animation first time
        txtCount.startAnimation(anima);         

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:59:35.687

我设法解决了我的问题，每次计数使用一个 textView 和一个动画实例，是的，它有效，但我不明白为什么我的原始解决方案不起作用！

# windows - 提取在 git commit 中更改的所有文件

> ID：10804017
> 
> 赞同：8
> 
> 时间：2012-05-29T17:38:07.017
> 
> 标签：windows, git

我需要为某人制作一个补丁（他们没有使用 git）——一个由提交更改的文件的 zip。

我想像

git archive --format=zip commitguid > myfiles.zip

但这会提取整个内容，而不仅仅是更改的文件。有没有办法做到这一点？为了使它更复杂 - 有没有办法通过多次提交来做到这一点（是的，我应该在进行更改之前进行分支，但这是事后诸葛亮）

编辑

基于下面的@Amber 解决方案，我可以在 Git Bash for windows 中分两步执行此操作，并在 c:\data\progs 中安装了 7Zip。

```
git diff --name-only a-sha b-sha > tmp.txt
/C/data/progs/7za.exe a myzip.zip @tmp.txt 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-29T17:43:14.640

```
git diff --name-only <oldsha> <newsha> | zip dest.zip -@ 
```

填写正确的 SHA/refs。例如，要创建仅包含在`master`和`feature`分支之间更改的文件的 zip：

```
git diff --name-only master feature | zip dest.zip -@ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T17:41:48.547

另请参阅`git help format-patch`。它会生成提交中所有更改的差异补丁，以及提交作者、日期、消息和一些不错的差异统计信息。你可以压缩并发送。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-10T10:34:53.100

我找到了这个问题的解决方案（[在 github-gist 上](https://gist.github.com/rmkpatchaa/f5949c4564cd504f72f110e6cbbd015f)，来自用户 rmkpatchaa）。
它不需要任何外部工具，并且是 windows Git Bash 窗口中的一行命令：

```
git archive --output=changes.zip HEAD $(git diff --name-only SHA1 SHA2 --diff-filter=ACMRTUXB) 
```

它创建了一个标准 zip 存档，其中仅包含两次提交之间更改的文件，没有额外的 git 内容或任何东西，并且在接收端不需要任何额外的工具。

# .net - 使用 C# 或 VB.NET 获取当前登录用户的列表

> ID：10804019
> 
> 赞同：1
> 
> 时间：2012-05-29T17:38:13.043
> 
> 标签：.net, wpf

我有兴趣获取当前使用 C# 或 VB.NET 登录到本地计算机的用户列表。

基本上我想模仿任务管理器（Windows 7）中“用户”选项卡上显示的信息。

# ruby - 如何访问 JSON 字符串中的值？

> ID：10804020
> 
> 赞同：0
> 
> 时间：2012-05-29T17:38:15.347
> 
> 标签：ruby, json

我有一个变量。当我这样做时，`puts var_name`我得到了这个哈希：

```
"{\"numConnections\": 163}" 
```

但是，当我尝试从值中获取该数字 163 时，`numConnections`它不起作用。这是我正在尝试的：

```
connections = temp_var["\"numConnections\""]
puts connections.inspect 
```

或者：

```
connections = temp_var["numConnections"]
puts connections.inspect 
```

两者同样不起作用。

知道如何从那里提取 163 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T18:01:35.663

如果您有 JSON 字符串，则需要先将其解析为哈希，然后才能使用它以类似哈希的方式访问其键和值。考虑这个 IRB 会话：

```
1.9.3p194 :001 > require 'json'
 => true
1.9.3p194 :002 > temp_var = "{\"numConnections\": 163}"
 => "{"numConnections": 163}"
1.9.3p194 :003 > temp_var.class
 => String 
1.9.3p194 :004 > JSON.parse(temp_var)
 => {"numConnections"=>163}
1.9.3p194 :005 > JSON.parse(temp_var)['numConnections']
 => 163 
```

# hibernate - 在gradle中执行bash脚本

> ID：10804023
> 
> 赞同：17
> 
> 时间：2012-05-29T17:38:38.390
> 
> 标签：hibernate, testing, gradle

我正在用 geb 进行功能测试。

我的应用程序是使用 virgo 部署的，并使用 HSQLDB 来存储数据。我想在这个工作版本的应用程序上执行测试，但我想从空数据库开始，每次我运行 webtests。

我写了一个简单的 bash 脚本

```
#!/bin/sh
rm -rf $VIRGO_HOME/aresdb*
$VIRGO_HOME/bin/shutdown.sh &
sleep 10
$VIRGO_HOME/bin/startup.sh & 
```

删除数据库并重新启动处女座。

但是，当我将它添加到我的 build.gradle 任务时，执行命令永远不会结束。

```
task cleanDB(type: Exec) {
    commandLine './clean.sh' 
} 
```

为什么会这样？当我在控制台中运行此脚本时，它会快速返回（但 virgo 仍会写入控制台）。

我试图在单独的线程中运行它，但遇到以下错误：

```
task cleanDBThread()<<{
    def cleanDBThread1 = Thread.start {
         cleanDB.execute()
    }
    sleep 10000
    println "wake up!"
}

Exception in thread "Thread-32" java.lang.IllegalStateException:
Cannot start long running operation, as the task artifact state cache
(/home/tomasz/ares/.gradle/1.0-milestone-9/taskArtifacts) has not been locked. 
```

我还尝试在休眠配置中设置“create-drop”，但它也需要重新启动 virgo。即使重新部署应用程序也无济于事。

我应该怎么做才能使用空数据库运行 webtests？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-04T15:28:12.053

这很奇怪

我创建了一个任务

```
task callCL(type: Exec) {
    commandLine './cl.sh'
} 
```

调用 cl.sh 文件

```
#!/bin/sh
echo "starting "
./acl.sh &
sleep 10
./acl.sh & 
```

调用 acl.sh

```
#!/bin/sh
echo "I am not doing anything" 
```

它奏效了！但是有一件事，当您添加 ./acl.sh 和号字符时***，***您正在从另一个启动 gradle 的线程调用任务，并且看起来它正在挂起。我会从您的电话中删除 & 以关闭并像这样开始

```
#!/bin/sh
rm -rf $VIRGO_HOME/aresdb*
$VIRGO_HOME/bin/shutdown.sh
$VIRGO_HOME/bin/startup.sh 
```

无论如何，你想在同一个线程中等待从关机到启动，也不需要调用 sleep ！

# interop - Windows Workflow 4 的 InvokeMethod 可能遇到异常 C0000005

> ID：10804024
> 
> 赞同：2
> 
> 时间：2012-05-29T17:38:49.060
> 
> 标签：interop, activex, workflow-foundation-4, crash

首先感谢您的阅读。

我设计了一个 WPF 应用程序，它重新托管了 Windows 工作流的设计器、工具箱和属性。我的想法非常简单，我只想在运行时对我的工作流程进行可视化，并在运行时进行设计。

**问题：**

现在我尝试在整个应用程序的同一命名空间下调用一个类的方法。该类称为 MyTwsClass。请看下面：

![在此处输入图像描述](../Images/d8910cd6f7e8a089cb84d7d0406594f5.png)

它非常简单。TwsClass 来自盈透证券交易软件的参考 ActiveX。此 ActiveX 只是为您提供与您的帐户通信的方法和事件。好的，如您所见，我实现了 MyConnect() 方法，该方法只是将一些字符串和 int 变量设置为来自 TwsClass 的连接方法的参数。我注意到我无法将 MyTwsClass 或 MyConnect 方法设置为静态。

现在，在运行时设计器中，我尝试调用 MyConnect 方法。首先，如下图：![在此处输入图像描述](../Images/0dc23bc40dda6eaedbf3f725495cd4bd.png)

由于 MyTwsClass 不能是具有静态方法的静态类（我猜是因为它继承自 ActiveX 类 TwsClass，我不确定作为新手。）所以我想调用实例方法。在运行工作流程之前它没有任何投诉。运行此程序后，我希望我应该能够连接到交易软件的 API。

现在我运行工作流程：

![在此处输入图像描述](../Images/b8364d1b54a6a12832dfba040dd3ab54.png)

单击运行按钮后，它立即运行，并弹出窗口告诉我 APP 已崩溃，异常代码为 C0000005。如果我单击关闭选项，我的 WPF 应用程序将被关闭。但在我关闭它之前，我可以看到实际上崩溃的 WPF 实际连接到 API，如上图所示，告诉我 1 已连接......

我尽力在互联网上检查这个问题。我有点感觉这完全是因为我的 WPF 和引用 ActiveX 之间的 Interop 或 COM 进程中的一些问题，因为崩溃窗口表明 TwsSocket.dll 是原因。

但是我真的想不通了......

# mysql - 如何在我的 sql 中的特定字符串之后检索信息

> ID：10804027
> 
> 赞同：1
> 
> 时间：2012-05-29T17:39:09.933
> 
> 标签：mysql, sql

我正在通过 sql2excell 组件为 joomla 制作 csv 文件。它通过 SQL 查询调用数据，所以我通过 SQL 查询检索所有信息。问题是某些字段包含我不想向最终用户显示的额外信息。

例如，当我通过查询检索时，这些字段显示以下数据：

```
a:3:{s:4:"city";s:3:"000";s:3:"ext";s:3:"000";s:3:"tel";s:4:"0000";} 
```

我只想要引号中的值，如下所示：`0000000000`
有什么方法可以通过 SQL 查询得到这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T17:47:17.243

不。

这些值是序列化的，MySQL 没有反序列化它们的函数。您必须在 MySQL 和 sql2excel 之间架起一座桥梁来解码它，但我不熟悉这个工具，所以帮不上什么忙。

# javascript - Backbone - 根据条件更改标记名

> ID：10804029
> 
> 赞同：2
> 
> 时间：2012-05-29T17:39:20.780
> 
> 标签：javascript, backbone.js, backbone-views

我正在尝试根据条件切换 Backbone 视图的 tagName。

我最初以为我可以设置一个默认的 tagName 说'div'（我意识到这是默认设置），然后在视图的初始化函数中，检查条件并更改 tagName 但不幸的是这不起作用。

这是我的视图代码（用coffeescript编写）：

```
 class Test.Views.ListView extends Backbone.View
    attributes: {"data-role": "listview"}
    className: 'row'
    tagName: 'div'
    initialize: ->
      if @options and @options.device == "mobile"
        @template = "/app/templates/mobile/test/test.html" 
        @tagName = 'ul' 
```

使用此代码，tagName 不会更改，它始终保持为 div。而模板切换正确。

任何帮助，将不胜感激。干杯!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T18:37:02.413

视图`el`是在调用之前设置的`initialize`。来自[精美手册](http://backbonejs.org/#View-el)：

> **埃尔** `view.el`
> 
> 所有视图始终都有一个 DOM 元素（**el**属性）...

所以所有的视图实例总是有一个`el`，特别是，`el`是从视图的调用`tagName`之前创建的`initialize`。您正在尝试更改`@tagName`构造函数但`el`已经存在，因此简单的`@tagName`更改无法产生任何效果为时已晚。

您可以使用[`setElement`](http://backbonejs.org/#View-setElement)来更改视图的`el`：

> **设置元素** `view.setElement(element)`
> 
> 如果您想将 Backbone 视图应用到不同的 DOM 元素，请使用**setElement**，它还将创建缓存`$el`引用并将视图的委托事件从旧元素移动到新元素。

像这样的东西：

```
initialize: ->
  if @options and @options.device == "mobile"
    @template = "/app/templates/mobile/test/test.html" 
    @setElement(@make('ul', _(@attributes).extend(class: @className))) 
```

您也可以根据`@tagName = 'ul'`需要进行设置，但这并不重要，因为`tagName`仅在实例化视图时使用。此外，`@options`应该始终在那里，因此您不必检查它，并且由于您使用的是 CoffeeScript，如果您仍然想检查它，[存在运算符](http://coffeescript.org/#operators)的访问器变体会更惯用：

```
if @options.?device == 'mobile' 
```

演示：http: [//jsfiddle.net/ambiguous/j4mSu/1/](http://jsfiddle.net/ambiguous/j4mSu/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T17:49:45.450

您是否尝试过直接使用 view.setElement(element) 而不是设置标签名称？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-01T17:19:00.867

从主干 0.9.9 开始（在提出这个问题时它不存在），tagName 字段可以是一个函数。这可用于在创建视图时动态选择 tagName。

# c++ - 在 C++ 中重置 8087CW 导致 .NET 应用程序出现异常

> ID：10804037
> 
> 赞同：0
> 
> 时间：2012-05-29T17:40:09.967
> 
> 标签：c++, .net, infragistics, x87

我正在使用 C# 中的 .NET 3.5 应用程序，它定期调用一些遗留 C++ 代码。我注意到，当我将鼠标悬停在具有下拉列表的 Infragistics UltraGrid 上时，调用 C++ 有时会导致“上溢或下溢算术运算”。我发现这只发生在 C++ 代码执行以下操作时：

```
Word SavedWord = Default8087CW;
Set8087CW(0x133f); // Disable all fpu exceptions

...

Set8087CW(SavedWord); 
```

如果我注释掉最后一行，我的 .NET 应用程序中将不再出现错误。我没有注意到应用程序的其余部分有任何其他副作用。作为快速修复，我想将此行注释掉。禁用 FPU 异常而不重置控制字的后果是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T13:07:11.073

解决方案可在此处找到：“[从 C++ 库调用方法时 WPF 中的 StackOverFlowException](https://stackoverflow.com/a/8357646/17034) ”。

感谢汉斯·帕桑特。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:44:01.587

在其他机器上测试后，似乎注释掉了 Set8087CW(SavedWord); line 只解决了我机器上的问题。我的 Infragistics 版本 (8.2.20082.2204) 中似乎存在错误。回滚到 8.2.20082.1000 解决了这个问题。

# java - 如果在执行期间抛出具体异常，如何为 junit 创建自己的注释，该注释将跳过测试？

> ID：10804039
> 
> 赞同：5
> 
> 时间：2012-05-29T17:40:17.750
> 
> 标签：java, junit4

我的应用程序有几种执行模式，在 1 种模式下，我的一些测试会抛出一个具体的异常是正常的。我需要用 @SkipOnFail 之类的东西来注释这些方法，如果抛出异常，它会将方法设置为已跳过。

提前致谢！

@Edit（让我的问题更清楚）

```
@Test(expected=ConcreteException.class) 
```

对我不起作用，因为即使未抛出 ConcreteException.class，我也需要通过测试（如果不抛出此异常，junit 中的预期标记会将我的测试标记为失败），否则将被跳过。在所有其他情况下，它应该像往常一样工作。

@Solution 对我有用（junit v4.7）感谢@axtavt

```
@Rule
public MethodRule skipRule = new MethodRule() {
    public Statement apply(final Statement base, FrameworkMethod method, Object target) {
        if(method.getAnnotation(SkipOnFail.class) == null) return base;

        return new Statement() {
            @Override
            public void evaluate() throws Throwable {
                try{
                    base.evaluate();
                } catch (ConcreteException e) {
                    Assume.assumeTrue(false);
                }
            }
        };
    }
}; 
```

@谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T18:16:30.493

我不认为这样的功能是开箱即用的，但是使用[custom`TestRule`](http://kentbeck.github.com/junit/javadoc/latest/org/junit/Rule.html)和应该很容易实现[`Assume`](http://kentbeck.github.com/junit/javadoc/latest/org/junit/Assume.html)，如下所示：

```
@Rule
public TestRule skipRule = new TestRule() {
    public Statement apply(final Statement base, Description desc) {
         if (desc.getAnnotation(SkipOnFail.class) == null) return base;

         return new Statement() {
             public void evaluate() throws Throwable {
                 try {
                     base.evaluate();
                 } catch (MyExceptoion ex) {
                     Assume.assumeTrue(false);
                 }
             }
         };
    }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T17:45:38.063

使用[JUnit 扩展](http://junitext.sourceforge.net/index.html)怎么样？

以下示例取自他们的[教程](http://junitext.sourceforge.net/tutorial.html)。

它为先决条件（@Prerequisite）提供了附加注释：基于条件忽略测试。

所需的方法是在运行测试期间检查这一点。因此，您可以简单地添加`@Prerequisite(requires="")`注释。

```
public class TestFillDatabase {
    @Prerequisite(requires = "databaseIsAvailable")
    @Test public void fillData() {
        // ...
    }

    public boolean databaseIsAvailable() {
        boolean isAvailable = ...;
        return isAvailable;
    }
}
public class TestFillDatabase {
    @Prerequisite(requires = "databaseIsAvailable")
    @Test public void fillData() {
        // ...
    }
    public boolean databaseIsAvailable() {
        boolean isAvailable = ...;
        return isAvailable ;
    }
} 
```

这个指定的方法`@Prerequisite(requires = "databaseIsAvailable")`必须是一个公共方法，返回一个布尔值或布尔值。

如果这些方法将合并到辅助类中，您还可以在要调用的类中指定静态方法，使用`@Prerequisite(requires = "databaseIsAvailable", callee="DBHelper")`.

```
public class TestFillDatabase {
    @Prerequisite(requires = "databaseIsAvailable", callee="DBHelper")
    @Test public void fillData() {
        // ...
    }
}
public class DBHelper {
    public static boolean databaseIsAvailable() {
        boolean isAvailable = ...;
        return isAvailable ;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-28T03:32:40.583

同样使用 Assume 类（自 jUnit 4.4 起），您可以使用[AssumeNoException()](https://junit.org/junit4/javadoc/4.12/org/junit/Assume.html#assumeNoException(java.lang.String,%20java.lang.Throwable))：

```
try{
    base.evaluate();
} catch (ConcreteException e) {
    Assume.assumeNoException("Concrete exception: skipping test", e);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T18:09:36.613

我搜索了有关 JUnit 的文档，似乎从 4.9 版开始，他们已经引入了他们所谓的测试规则（参见[TestRule](http://kentbeck.github.com/junit/javadoc/latest/org/junit/rules/TestRule.html)）。你可以从这个开始。

标记为的[ExpectedException](http://kentbeck.github.com/junit/javadoc/latest/org/junit/rules/ExpectedException.html)类`@Rule`可能有助于检查抛出的异常，但不是强制通过测试。

对于更高级的用法，我暂时不能说，因为我刚刚发现它。

# cuda - 推力：填充编译错误

> ID：10804040
> 
> 赞同：3
> 
> 时间：2012-05-29T17:40:31.447
> 
> 标签：cuda, fill, thrust

我需要一些帮助来追踪**thrust::fill**给我的编译错误。

代码没有问题：

```
line 9   #include <thrust/device_vector.h>                // needed for other thrust stuff
line 10  #include <thrust/fill.h>                        // not needed (same err w/ or w/o)
.
.
line 389 thrust::device_vector<int> junk(20);           // any ol array
line 390 thrust::fill(junk.begin(), junk.end(), (int)0); // the problem line 
```

如果我注释掉“填充”行，它将编译得很好。我使用的任何 (raw_pointer, device_vector,..)thrust:: **fill**命令都会生成此错误。其他 THRUST cmd 编译良好。错误长达几页。我不确定错误是什么。'for_each' 被提及很多。最后一个带有“compute_capability”的没有意义，因为它不在我的任何代码中。我尝试添加一堆“#include”文件，但没有任何帮助。

任何想法，将不胜感激。

```
In file included from /usr/local/cuda/include/thrust/detail/backend/cuda/for_each.h:54:0,
                 from /usr/local/cuda/include/thrust/detail/backend/for_each.inl:23,
                 from /usr/local/cuda/include/thrust/detail/backend/for_each.h:55,
                 from /usr/local/cuda/include/thrust/detail/for_each.inl:22,
                 from /usr/local/cuda/include/thrust/for_each.h:91,
                 from /usr/local/cuda/include/thrust/detail/swap_ranges.inl:25,
                 from /usr/local/cuda/include/thrust/detail/swap.inl:33,
                 from /usr/local/cuda/include/thrust/swap.h:127,
                 from /usr/local/cuda/include/thrust/detail/contiguous_storage.inl:20,
                 from /usr/local/cuda/include/thrust/detail/contiguous_storage.h:92,
                 from /usr/local/cuda/include/thrust/detail/uninitialized_array.h:26,
                 from /usr/local/cuda/include/thrust/detail/backend/cuda/copy_cross_space.inl:20,
                 from /usr/local/cuda/include/thrust/detail/backend/cuda/copy_cross_space.h:57,
                 from /usr/local/cuda/include/thrust/detail/backend/cuda/dispatch/copy.h:23,
                 from /usr/local/cuda/include/thrust/detail/backend/cuda/copy.h:21,
                 from /usr/local/cuda/include/thrust/detail/backend/dispatch/copy.h:24,
                 from /usr/local/cuda/include/thrust/detail/backend/copy.inl:20,
                 from /usr/local/cuda/include/thrust/detail/backend/copy.h:44,
                 from /usr/local/cuda/include/thrust/detail/copy.inl:20,
                 from /usr/local/cuda/include/thrust/detail/copy.h:39,
                 from /usr/local/cuda/include/thrust/detail/reference_base.inl:18,
                 from /usr/local/cuda/include/thrust/detail/reference_base.h:138,
                 from /usr/local/cuda/include/thrust/device_reference.h:27,
                 from /usr/local/cuda/include/thrust/detail/device_ptr.inl:23,
                 from /usr/local/cuda/include/thrust/device_ptr.h:181,
                 from /usr/local/cuda/include/thrust/device_malloc_allocator.h:25,
                 from /usr/local/cuda/include/thrust/device_vector.h:25,
                 from /home/rrob/workspace/dicol/klm/src/Map.cpp:9:
/usr/local/cuda/include/thrust/detail/backend/cuda/for_each.inl: In function ‘RandomAccessIterator thrust::detail::backend::cuda::for_each_n(RandomAccessIterator, Size, UnaryFunction) [with RandomAccessIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, Size = long int, UnaryFunction = thrust::detail::device_generate_functor<thrust::detail::fill_functor<int> >]’:
/usr/local/cuda/include/thrust/detail/backend/for_each.inl:56:63:   instantiated from ‘OutputIterator thrust::detail::backend::dispatch::for_each_n(OutputIterator, Size, UnaryFunction, thrust::detail::cuda_device_space_tag) [with OutputIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, Size = long int, UnaryFunction = thrust::detail::device_generate_functor<thrust::detail::fill_functor<int> >]’
/usr/local/cuda/include/thrust/detail/backend/for_each.inl:126:62:   instantiated from ‘OutputIterator thrust::detail::backend::for_each_n(OutputIterator, Size, UnaryFunction) [with OutputIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, Size = long int, UnaryFunction = thrust::detail::device_generate_functor<thrust::detail::fill_functor<int> >]’
/usr/local/cuda/include/thrust/detail/for_each.inl:39:57:   instantiated from ‘OutputIterator thrust::detail::for_each_n(OutputIterator, Size, UnaryFunction) [with OutputIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, Size = long int, UnaryFunction = thrust::detail::device_generate_functor<thrust::detail::fill_functor<int> >]’
/usr/local/cuda/include/thrust/detail/generate.inl:51:100:   instantiated from ‘OutputIterator thrust::generate_n(OutputIterator, Size, Generator) [with OutputIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, Size = long int, Generator = thrust::detail::fill_functor<int>]’
/usr/local/cuda/include/thrust/detail/backend/cuda/fill.inl:93:43:   instantiated from ‘OutputIterator thrust::detail::backend::cuda::detail::fill_n(OutputIterator, Size, const T&, thrust::detail::false_type) [with OutputIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, Size = long int, T = int, thrust::detail::false_type = thrust::detail::integral_constant<bool, false>]’
/usr/local/cuda/include/thrust/detail/backend/cuda/fill.inl:123:64:   [ skipping 3 instantiation contexts ]
/usr/local/cuda/include/thrust/detail/backend/fill.inl:93:60:   instantiated from ‘OutputIterator thrust::detail::backend::fill_n(OutputIterator, Size, const T&) [with OutputIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, Size = long int, T = int]’
/usr/local/cuda/include/thrust/detail/backend/generic/fill.h:51:3:   instantiated from ‘void thrust::detail::backend::generic::fill(ForwardIterator, ForwardIterator, const T&) [with ForwardIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, T = int]’
/usr/local/cuda/include/thrust/detail/backend/fill.inl:51:3:   instantiated from ‘void thrust::detail::backend::dispatch::fill(ForwardIterator, ForwardIterator, const T&, Backend) [with ForwardIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, T = int, Backend = thrust::detail::cuda_device_space_tag]’
/usr/local/cuda/include/thrust/detail/backend/fill.inl:83:3:   instantiated from ‘void thrust::detail::backend::fill(ForwardIterator, ForwardIterator, const T&) [with ForwardIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, T = int]’
/usr/local/cuda/include/thrust/detail/fill.inl:34:3:   instantiated from ‘void thrust::fill(ForwardIterator, ForwardIterator, const T&) [with ForwardIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, T = int]’
/home/rrob/workspace/dicol/klm/src/Map.cpp:390:49:   instantiated from here
/usr/local/cuda/include/thrust/detail/backend/cuda/for_each.inl:96:1: error: invalid application of ‘sizeof’ to incomplete type ‘thrust::detail::STATIC_ASSERTION_FAILURE<false>’ 
/usr/local/cuda/include/thrust/detail/backend/cuda/for_each.inl: In function ‘RandomAccessIterator thrust::detail::backend::cuda::for_each_n(RandomAccessIterator, Size, UnaryFunction) [with RandomAccessIterator = thrust::device_ptr<int>, Size = long int, UnaryFunction = thrust::detail::device_generate_functor<thrust::detail::fill_functor<int> >]’:
/usr/local/cuda/include/thrust/detail/backend/for_each.inl:56:63:   instantiated from ‘OutputIterator thrust::detail::backend::dispatch::for_each_n(OutputIterator, Size, UnaryFunction, thrust::detail::cuda_device_space_tag) [with OutputIterator = thrust::device_ptr<int>, Size = long int, UnaryFunction = thrust::detail::device_generate_functor<thrust::detail::fill_functor<int> >]’
/usr/local/cuda/include/thrust/detail/backend/for_each.inl:126:62:   instantiated from ‘OutputIterator thrust::detail::backend::for_each_n(OutputIterator, Size, UnaryFunction) [with OutputIterator = thrust::device_ptr<int>, Size = long int, UnaryFunction = thrust::detail::device_generate_functor<thrust::detail::fill_functor<int> >]’
/usr/local/cuda/include/thrust/detail/backend/generic/for_each.inl:36:84:   instantiated from ‘InputIterator thrust::detail::backend::generic::for_each(InputIterator, InputIterator, UnaryFunction) [with InputIterator = thrust::device_ptr<int>, UnaryFunction = thrust::detail::device_generate_functor<thrust::detail::fill_functor<int> >]’
/usr/local/cuda/include/thrust/detail/backend/for_each.inl:91:67:   instantiated from ‘InputIterator thrust::detail::backend::dispatch::for_each(InputIterator, InputIterator, UnaryFunction, Space) [with InputIterator = thrust::device_ptr<int>, UnaryFunction = thrust::detail::device_generate_functor<thrust::detail::fill_functor<int> >, Space = thrust::detail::cuda_device_space_tag]’
/usr/local/cuda/include/thrust/detail/backend/for_each.inl:136:61:   instantiated from ‘InputIterator thrust::detail::backend::for_each(InputIterator, InputIterator, UnaryFunction) [with InputIterator = thrust::device_ptr<int>, UnaryFunction = thrust::detail::device_generate_functor<thrust::detail::fill_functor<int> >]’
/usr/local/cuda/include/thrust/detail/for_each.inl:48:58:   [ skipping 7 instantiation contexts ]
/usr/local/cuda/include/thrust/detail/backend/fill.inl:93:60:   instantiated from ‘OutputIterator thrust::detail::backend::fill_n(OutputIterator, Size, const T&) [with OutputIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, Size = long int, T = int]’
/usr/local/cuda/include/thrust/detail/backend/generic/fill.h:51:3:   instantiated from ‘void thrust::detail::backend::generic::fill(ForwardIterator, ForwardIterator, const T&) [with ForwardIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, T = int]’
/usr/local/cuda/include/thrust/detail/backend/fill.inl:51:3:   instantiated from ‘void thrust::detail::backend::dispatch::fill(ForwardIterator, ForwardIterator, const T&, Backend) [with ForwardIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, T = int, Backend = thrust::detail::cuda_device_space_tag]’
/usr/local/cuda/include/thrust/detail/backend/fill.inl:83:3:   instantiated from ‘void thrust::detail::backend::fill(ForwardIterator, ForwardIterator, const T&) [with ForwardIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, T = int]’
/usr/local/cuda/include/thrust/detail/fill.inl:34:3:   instantiated from ‘void thrust::fill(ForwardIterator, ForwardIterator, const T&) [with ForwardIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, T = int]’
/home/rrob/workspace/dicol/klm/src/Map.cpp:390:49:   instantiated from here
/usr/local/cuda/include/thrust/detail/backend/cuda/for_each.inl:96:1: error: invalid application of ‘sizeof’ to incomplete type ‘thrust::detail::STATIC_ASSERTION_FAILURE<false>’ 
/usr/local/cuda/include/thrust/detail/backend/cuda/for_each.inl: In function ‘RandomAccessIterator thrust::detail::backend::cuda::for_each_n(RandomAccessIterator, Size, UnaryFunction) [with RandomAccessIterator = thrust::device_ptr<unsigned int>, Size = long int, UnaryFunction = thrust::detail::device_generate_functor<thrust::detail::fill_functor<unsigned int> >]’:
/usr/local/cuda/include/thrust/detail/backend/for_each.inl:56:63:   instantiated from ‘OutputIterator thrust::detail::backend::dispatch::for_each_n(OutputIterator, Size, UnaryFunction, thrust::detail::cuda_device_space_tag) [with OutputIterator = thrust::device_ptr<unsigned int>, Size = long int, UnaryFunction = thrust::detail::device_generate_functor<thrust::detail::fill_functor<unsigned int> >]’
/usr/local/cuda/include/thrust/detail/backend/for_each.inl:126:62:   instantiated from ‘OutputIterator thrust::detail::backend::for_each_n(OutputIterator, Size, UnaryFunction) [with OutputIterator = thrust::device_ptr<unsigned int>, Size = long int, UnaryFunction = thrust::detail::device_generate_functor<thrust::detail::fill_functor<unsigned int> >]’
/usr/local/cuda/include/thrust/detail/backend/generic/for_each.inl:36:84:   instantiated from ‘InputIterator thrust::detail::backend::generic::for_each(InputIterator, InputIterator, UnaryFunction) [with InputIterator = thrust::device_ptr<unsigned int>, UnaryFunction = thrust::detail::device_generate_functor<thrust::detail::fill_functor<unsigned int> >]’
/usr/local/cuda/include/thrust/detail/backend/for_each.inl:91:67:   instantiated from ‘InputIterator thrust::detail::backend::dispatch::for_each(InputIterator, InputIterator, UnaryFunction, Space) [with InputIterator = thrust::device_ptr<unsigned int>, UnaryFunction = thrust::detail::device_generate_functor<thrust::detail::fill_functor<unsigned int> >, Space = thrust::detail::cuda_device_space_tag]’
/usr/local/cuda/include/thrust/detail/backend/for_each.inl:136:61:   instantiated from ‘InputIterator thrust::detail::backend::for_each(InputIterator, InputIterator, UnaryFunction) [with InputIterator = thrust::device_ptr<unsigned int>, UnaryFunction = thrust::detail::device_generate_functor<thrust::detail::fill_functor<unsigned int> >]’
/usr/local/cuda/include/thrust/detail/for_each.inl:48:58:   [ skipping 7 instantiation contexts ]
/usr/local/cuda/include/thrust/detail/backend/fill.inl:93:60:   instantiated from ‘OutputIterator thrust::detail::backend::fill_n(OutputIterator, Size, const T&) [with OutputIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, Size = long int, T = int]’
/usr/local/cuda/include/thrust/detail/backend/generic/fill.h:51:3:   instantiated from ‘void thrust::detail::backend::generic::fill(ForwardIterator, ForwardIterator, const T&) [with ForwardIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, T = int]’
/usr/local/cuda/include/thrust/detail/backend/fill.inl:51:3:   instantiated from ‘void thrust::detail::backend::dispatch::fill(ForwardIterator, ForwardIterator, const T&, Backend) [with ForwardIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, T = int, Backend = thrust::detail::cuda_device_space_tag]’
/usr/local/cuda/include/thrust/detail/backend/fill.inl:83:3:   instantiated from ‘void thrust::detail::backend::fill(ForwardIterator, ForwardIterator, const T&) [with ForwardIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, T = int]’
/usr/local/cuda/include/thrust/detail/fill.inl:34:3:   instantiated from ‘void thrust::fill(ForwardIterator, ForwardIterator, const T&) [with ForwardIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, T = int]’
/home/rrob/workspace/dicol/klm/src/Map.cpp:390:49:   instantiated from here
/usr/local/cuda/include/thrust/detail/backend/cuda/for_each.inl:96:1: error: invalid application of ‘sizeof’ to incomplete type ‘thrust::detail::STATIC_ASSERTION_FAILURE<false>’ 
/usr/local/cuda/include/thrust/detail/backend/cuda/for_each.inl: In function ‘RandomAccessIterator thrust::detail::backend::cuda::for_each_n(RandomAccessIterator, Size, UnaryFunction) [with RandomAccessIterator = thrust::device_ptr<long long unsigned int>, Size = long int, UnaryFunction = thrust::detail::device_generate_functor<thrust::detail::fill_functor<long long unsigned int> >]’:
/usr/local/cuda/include/thrust/detail/backend/for_each.inl:56:63:   instantiated from ‘OutputIterator thrust::detail::backend::dispatch::for_each_n(OutputIterator, Size, UnaryFunction, thrust::detail::cuda_device_space_tag) [with OutputIterator = thrust::device_ptr<long long unsigned int>, Size = long int, UnaryFunction = thrust::detail::device_generate_functor<thrust::detail::fill_functor<long long unsigned int> >]’
/usr/local/cuda/include/thrust/detail/backend/for_each.inl:126:62:   instantiated from ‘OutputIterator thrust::detail::backend::for_each_n(OutputIterator, Size, UnaryFunction) [with OutputIterator = thrust::device_ptr<long long unsigned int>, Size = long int, UnaryFunction = thrust::detail::device_generate_functor<thrust::detail::fill_functor<long long unsigned int> >]’
/usr/local/cuda/include/thrust/detail/backend/generic/for_each.inl:36:84:   instantiated from ‘InputIterator thrust::detail::backend::generic::for_each(InputIterator, InputIterator, UnaryFunction) [with InputIterator = thrust::device_ptr<long long unsigned int>, UnaryFunction = thrust::detail::device_generate_functor<thrust::detail::fill_functor<long long unsigned int> >]’
/usr/local/cuda/include/thrust/detail/backend/for_each.inl:91:67:   instantiated from ‘InputIterator thrust::detail::backend::dispatch::for_each(InputIterator, InputIterator, UnaryFunction, Space) [with InputIterator = thrust::device_ptr<long long unsigned int>, UnaryFunction = thrust::detail::device_generate_functor<thrust::detail::fill_functor<long long unsigned int> >, Space = thrust::detail::cuda_device_space_tag]’
/usr/local/cuda/include/thrust/detail/backend/for_each.inl:136:61:   instantiated from ‘InputIterator thrust::detail::backend::for_each(InputIterator, InputIterator, UnaryFunction) [with InputIterator = thrust::device_ptr<long long unsigned int>, UnaryFunction = thrust::detail::device_generate_functor<thrust::detail::fill_functor<long long unsigned int> >]’
/usr/local/cuda/include/thrust/detail/for_each.inl:48:58:   [ skipping 7 instantiation contexts ]
/usr/local/cuda/include/thrust/detail/backend/fill.inl:93:60:   instantiated from ‘OutputIterator thrust::detail::backend::fill_n(OutputIterator, Size, const T&) [with OutputIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, Size = long int, T = int]’
/usr/local/cuda/include/thrust/detail/backend/generic/fill.h:51:3:   instantiated from ‘void thrust::detail::backend::generic::fill(ForwardIterator, ForwardIterator, const T&) [with ForwardIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, T = int]’
/usr/local/cuda/include/thrust/detail/backend/fill.inl:51:3:   instantiated from ‘void thrust::detail::backend::dispatch::fill(ForwardIterator, ForwardIterator, const T&, Backend) [with ForwardIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, T = int, Backend = thrust::detail::cuda_device_space_tag]’
/usr/local/cuda/include/thrust/detail/backend/fill.inl:83:3:   instantiated from ‘void thrust::detail::backend::fill(ForwardIterator, ForwardIterator, const T&) [with ForwardIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, T = int]’
/usr/local/cuda/include/thrust/detail/fill.inl:34:3:   instantiated from ‘void thrust::fill(ForwardIterator, ForwardIterator, const T&) [with ForwardIterator = thrust::detail::normal_iterator<thrust::device_ptr<int> >, T = int]’
/home/rrob/workspace/dicol/klm/src/Map.cpp:390:49:   instantiated from here
/usr/local/cuda/include/thrust/detail/backend/cuda/for_each.inl:96:1: error: invalid application of ‘sizeof’ to incomplete type ‘thrust::detail::STATIC_ASSERTION_FAILURE<false>’ 
/usr/local/cuda/include/thrust/detail/backend/cuda/arch.h: At global scope:
/usr/local/cuda/include/thrust/detail/backend/cuda/arch.h:90:15: warning: inline function ‘size_t thrust::detail::backend::cuda::arch::compute_capability()’ used but never defined
make[2]: *** [CMakeFiles/Map.dir/Map.cpp.o] Error 1
make[1]: *** [CMakeFiles/Map.dir/all] Error 2
make: *** [all] Error 2 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T18:56:33.597

您使用了错误的编译路径，因为代码的文件扩展名不正确：

```
make[2]: *** [CMakeFiles/Map.dir/Map.cpp.o] Error 1 
```

解决方案是将文件命名为`Map.cu`而不是`Map.ccp`. .cu 扩展名告诉 nvcc 文件中有设备代码，需要设备编译器轨迹。`thrust::fill`调用内核并引入设备代码，而向量声明仅使用主机编译器可以处理的 API 调用。这就是为什么编译只在`thrust::fill`调用到位时失败的原因。

# javascript - 用 JavaScript 计算时差

> ID：10804042
> 
> 赞同：12
> 
> 时间：2012-05-29T17:40:33.817
> 
> 标签：javascript, time

我有两个 HTML 输入框，需要计算 JavaScript onBlur 中的时间差（因为我需要实时）并将结果插入新的输入框。

格式示例：10:00 & 12:30 需要给我：02:30

谢谢！

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-05-29T18:04:55.973

这是一种可能的解决方案：

```
function diff(start, end) {
    start = start.split(":");
    end = end.split(":");
    var startDate = new Date(0, 0, 0, start[0], start[1], 0);
    var endDate = new Date(0, 0, 0, end[0], end[1], 0);
    var diff = endDate.getTime() - startDate.getTime();
    var hours = Math.floor(diff / 1000 / 60 / 60);
    diff -= hours * 1000 * 60 * 60;
    var minutes = Math.floor(diff / 1000 / 60);

    // If using time pickers with 24 hours format, add the below line get exact hours
    if (hours < 0)
       hours = hours + 24;

    return (hours <= 9 ? "0" : "") + hours + ":" + (minutes <= 9 ? "0" : "") + minutes;
} 
```

**演示：http:** [//jsfiddle.net/KQQqp/](http://jsfiddle.net/KQQqp/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-15T12:33:05.827

试试这个

```
var dif = ( new Date("1970-1-1 " + end-time) - new Date("1970-1-1 " + start-time) ) / 1000 / 60 / 60; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-04T11:19:13.910

好吧，这项工作几乎很棒。现在使用此代码计算：23:50 - 00:10 看看你得到了什么。甚至是 23:30 - 01:30。那是一团糟。因为在 php 中以另一种方式得到答案是：

```
$date1 = strtotime($_POST['started']);
$date2 = strtotime($_POST['ended']);
$interval = $date2 - $date1;
$playedtime = $interval / 60; 
```

但是，它仍然像你一样工作。我想也必须带上日期？

再说一遍：我的辛勤研究和开发帮助了我。

```
if (isset($_POST['calculate'])) {
$d1 = $_POST['started'];
$d2 = $_POST['ended'];
if ($d2 < $d1) {
    $date22 = date('Y-m-');
    $date222 = date('d')-1;
    $date2 = $date22."".$date222;
} else {
$date2 = date('Y-m-d');
}
$date1 = date('Y-m-d');
$start_time = strtotime($date2.' '.$d1);
$end_time = strtotime($date1.' '.$d2); // or use date('Y-m-d H:i:s') for current time
$playedtime = round(abs($start_time - $end_time) / 60,2);
} 
```

这就是你如何计算到第二天的时间。//编辑。首先，我切换了 date1 jnd date2。我需要-1，因为这个计算只在第二天出现，而第一个日期是昨天。

在与我的朋友一起改进和大量脑力之后，我们得出了这个结论：

```
$begin=mktime(substr($_GET["start"], 0,2),substr($_GET["start"], 2,2),0,1,2,2003);
$end=mktime(substr($_GET["end"], 0,2),substr($_GET["end"], 2,2),0,1,3,2003);
$outcome=($end-$begin)-date("Z");
$minutes=date("i",$outcome)+date("H",$outcome)*60; //Echo minutes only
$hours = date("H:i", $outcome); //Echo time in hours + minutes like 01:10 or something. 
```

因此，您实际上只需要 4 行代码即可获得结果。您可以只花几分钟或显示全时（例如差异是 02:32）2 小时 32 分钟。最重要的是：您仍然可以按 24 小时制计算过夜，也就是：开始时间晚上 11:50 到上午 1:00（24 小时制 23:50 - 01:00），因为在 12 小时模式下它仍然有效。

最重要的是：您不必格式化输入。您可以只使用普通的 2300 作为 23:00 输入。此脚本将自行将文本字段输入转换为正确的格式。最后一个脚本使用带有 method="get" 的标准 html 表单，但您也可以将其转换为使用 POST 方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-08T11:51:03.850

这是已经提交的版本的更新版本。它与秒。

```
function diff(start, end) {
    start = start.split(":");
    end = end.split(":");
    var startDate = new Date(0, 0, 0, start[0], start[1], 0);
    var endDate = new Date(0, 0, 0, end[0], end[1], 0);
    var diff = endDate.getTime() - startDate.getTime();
    var hours = Math.floor(diff / 1000 / 60 / 60);
    diff -= hours * (1000 * 60 * 60);
    var minutes = Math.floor(diff / 1000 / 60);
    diff -= minutes * (1000 * 60);
    var seconds = Math.floor(diff / 1000);

    // If using time pickers with 24 hours format, add the below line get exact hours
    if (hours < 0)
       hours = hours + 24;

    return (hours <= 9 ? "0" : "") + hours + ":" + (minutes <= 9 ? "0" : "") + minutes + (seconds<= 9 ? "0" : "") + seconds;
} 
```

我的更新版本：

允许您将日期转换为毫秒，然后取消而不是拆分。

示例 - 年/月/周/日/小时/分钟/秒

示例：[https ://jsfiddle.net/jff7ncyk/308/](https://jsfiddle.net/jff7ncyk/308/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-09T12:27:59.717

您提供的秒数对我没有结果，请在此处找到我的更新功能，为您提供正确的秒数-Dinesh J

```
function diff(start, end) {
    start = start.split(":");
    end = end.split(":");
    var startDate = new Date(0, 0, 0, start[0], start[1],start[2], 0);
    var endDate = new Date(0, 0, 0, end[0], end[1],end[2], 0);
    var diff = endDate.getTime() - startDate.getTime();
    var hours = Math.floor(diff / 1000 / 60 / 60);
    diff -= hours * 1000 * 60 * 60;
    var minutes = Math.floor(diff / 1000 / 60);
    var seconds = Math.floor(diff / 1000)-120;

    // If using time pickers with 24 hours format, add the below line get exact hours
    if (hours < 0)
        hours = hours + 24;

    return (hours <= 9 ? "0" : "") + hours + ":" + (minutes <= 9 ? "0" : "") + minutes+ ":" + (seconds <= 9 ? "0" : "") + seconds;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-17T18:34:16.897

# tl;博士

### 一关

```
const t1 = new Date(1579876543210) // your initial time
const t2 = new Date(1579987654321) // your later time

const diff = t2-t1
const SEC = 1000, MIN = 60 * SEC, HRS = 60 * MIN
const humanDiff = `${Math.floor(diff/HRS)}:${Math.floor((diff%HRS)/MIN).toLocaleString('en-US', {minimumIntegerDigits: 2})}:${Math.floor((diff%MIN)/SEC).toLocaleString('en-US', {minimumIntegerDigits: 2})}.${Math.floor(diff % SEC).toLocaleString('en-US', {minimumIntegerDigits: 4, useGrouping: false})}`

console.log("humanDiff:", humanDiff)
// > humanDiff: 30:51:51.0111
```

### 作为一个函数

```
function humanDiff (t1, t2) {
  const diff = Math.max(t1,t2) - Math.min(t1,t2) 
  const SEC = 1000, MIN = 60 * SEC, HRS = 60 * MIN

  const hrs = Math.floor(diff/HRS)
  const min = Math.floor((diff%HRS)/MIN).toLocaleString('en-US', {minimumIntegerDigits: 2})
  const sec = Math.floor((diff%MIN)/SEC).toLocaleString('en-US', {minimumIntegerDigits: 2})
  const ms = Math.floor(diff % SEC).toLocaleString('en-US', {minimumIntegerDigits: 4, useGrouping: false})

  return `${hrs}:${min}:${sec}.${ms}`
}

const t1 = new Date(1579876543210)
const t2 = new Date(1579987654321)

console.log("humanDiff(t1, t2):", humanDiff(t1, t2))
// > humanDiff: 30:51:51.0111
```

# 解释

`humanDiff`根据您的最大和最小可报告增量和格式需求进行调整：

```
const t1 = new Date(1579876543210) // Set your initial time (`t1`)
const t2 = new Date(1579986654321) // , conclusion time (`t2`), and
const diff = t2-t1 // calculate their difference in milliseconds
console.log("         t2:", t2.toISOString()) // >   t2: 2020-01-25T21:27:34.321Z
console.log("         t1:", t1.toISOString()) // >   t1: 2020-01-24T14:35:43.210Z
console.log("       diff:", diff)             // > diff: 111111111

// Set your constant time values for easy readability
const SEC = 1000
const MIN = 60 * SEC
const HRS = 60 * MIN

/* For a given unit
1) disregard any previously relevant units, e.g. to calculate minutes, we can
   disregard all hours & focus on only the remainder - `(diff%HRS)`
2) divide the remainder by the given unit, e.g. for minutes, `(diff%HRS)/MIN`
3) disregard any remainder, e.g. again for minutes, `Math.floor((diff%HRS)/MIN)`
NOTE: for your maximum unit (HRS in the examples below) you probably _don't_
  want to disregard high values, e.g. If the difference is >24 hrs and something,
  you should either include a DAYS value, or simply display 30 hrs */
let hrs = Math.floor(diff/HRS)
let min = Math.floor((diff%HRS)/MIN)
let sec = Math.floor((diff%MIN)/SEC)
let ms  = Math.floor(diff % SEC) // just the remainder 
          // BUT ms IS NOT ACTUALLY CORRECT, see humanDiff_3 for the fix ;-)
let humanDiff_1 = `${hrs}:${min}:${sec}.${ms}`
console.log("humanDiff_1:", humanDiff_1)
// > humanDiff_1: 30:51:51.111

sec = Math.round((diff%MIN)/SEC) // can also just round the last unit
const humanDiff_2 = `${hrs} hrs ${min} mins & ${sec} secs`
console.log("humanDiff_2:", humanDiff_2)
// > humanDiff_2: 30 hrs 51 mins & 51 secs

/* To ensure a set number of digits, format the numbers with `toLocaleString`'s
   `minimumIntegerDigits`, if more than 3 digits, also use its `useGrouping`   */
hrs = Math.floor(diff/HRS)
min = Math.floor((diff%HRS)/MIN).toLocaleString('en-US', {minimumIntegerDigits: 2})
sec = Math.floor((diff%MIN)/SEC).toLocaleString('en-US', {minimumIntegerDigits: 2})
ms = Math.floor(diff % SEC).toLocaleString('en-US', {minimumIntegerDigits: 4, useGrouping: false})

const humanDiff_3 = `${hrs}:${min}:${sec}.${ms}`
console.log("humanDiff_3:", humanDiff_3)
// > humanDiff_3: 30:51:51.0111
// NOTE: milliseconds are now 4 digits
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-10-22T20:21:01.970

此解决方案适用于计算不同军事时间之间的差异

示例格式：开始 = 23:00 / 结束 = 02:30

```
function diff(start, end) {
start = start.split(":");
end = end.split(":");
if(Number(start[0]) > Number(end[0]) ) {
  var num = Number(start[0])
  var countTo = Number(end[0]);
  var count = 0;
  for (var i = 1; num != countTo;) {
    num = num + i
    if(num > 24) {
      num = 0
    }
    count++
  }
  var hours = count - 1;
  var startDate = new Date(0, 0, 0, start[0], start[1], 0);
  var endDate = new Date(0, 0, 0, end[0], end[1], 0);
  if(startDate.getMinutes() > endDate.getMinutes()) {
    var hours = count - 2;
    var diff = 60 - (startDate.getMinutes() - endDate.getMinutes());      
  } else {
    var diff = endDate.getMinutes() - startDate.getMinutes();      
  }
  var minutes = diff
} else {
  var startDate = new Date(0, 0, 0, start[0], start[1], 0);
  var endDate = new Date(0, 0, 0, end[0], end[1], 0);
  var diff = endDate.getTime() - startDate.getTime();
  var hours = Math.floor(diff / 1000 / 60 / 60);
  diff -= hours * 1000 * 60 * 60;
  var minutes = Math.floor(diff / 1000 / 60);
}

var returnValue = (hours < 9 ? "0" : "") + hours + ":" + (minutes < 9 ? "0" : "") + minutes

return returnValue; 
```

}

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-04-06T14:12:30.010

根据您允许输入的内容，这个将起作用。如果您想允许凌晨 1 点到下午 1 点，可能会有一些边界问题

注意：这不是使用日期对象或 moment.js

```
function pad(num) {
  return ("0"+num).slice(-2);
}
function diffTime(start,end) {
  var s = start.split(":"), sMin = +s[1] + s[0]*60,
      e =   end.split(":"), eMin = +e[1] + e[0]*60,
   diff = eMin-sMin;
  if (diff<0) { sMin-=12*60;  diff = eMin-sMin }
  var h = Math.floor(diff / 60),
      m = diff % 60;
  return "" + pad(h) + ":" + pad(m);
}  
document.getElementById('button').onclick=function() {
  document.getElementById('delay').value=diffTime(
      document.getElementById('timeOfCall').value, 
      document.getElementById('timeOfResponse').value
  );
}
```

```
<input type="time" id="timeOfCall">
<input type="time" id="timeOfResponse">
<button type="button" id="button">CLICK</button>
<input type="time" id="delay">
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-07-25T08:30:09.937

```
 calTimeDifference(){
    this.start = dailyattendance.InTime.split(":");
    this.end = dailyattendance.OutTime.split(":");
    var time1 = ((parseInt(this.start[0]) * 60) + parseInt(this.start[1]))
    var time2 = ((parseInt(this.end[0]) * 60) + parseInt(this.end[1]));
    var time3 = ((time2 - time1) / 60);
    var timeHr = parseInt(""+time3);
    var  timeMin = ((time2 - time1) % 60);
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-06-14T12:10:29.187

```
TimeCount = function()
{
    t++;
    var ms = t;
    if (ms == 99)
    {
        s++;
        t = 0;
        if ( s == 60)
        {
            m++;
            s = 0;
        }
    }

    Dis_ms = checkTime(ms);
    Dis_s = checkTime(s);
    Dis_m = checkTime(m);

    document.getElementById("time_val").innerHTML = Dis_m + ":" + Dis_s+ ":" + Dis_ms;
}

function checkTime(i) 
{
  if (i<10) {
    i = "0" + i;
  }
  return i;
} 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2015-09-24T09:17:23.277

试试这个：实际上这是 codeeval.com 的一个问题

我以这种方式解决了它。

该程序将文件作为参数，因此我使用了一个小节点 js 来读取文件。

这是我的代码。

```
var fs  = require("fs");
fs.readFileSync(process.argv[2]).toString().split('\n').forEach(function (line) {
    if (line !== "") {
        var arr = line.split(" ");
        var arr1 = arr[0].split(":");
        var arr2 = arr[1].split(":");
        var time1 = parseInt(arr1[0])*3600 + parseInt(arr1[1])*60 + parseInt(arr1[2]);
        var time2 = parseInt(arr2[0])*3600 + parseInt(arr2[1])*60 + parseInt(arr2[2]);
        var dif = Math.max(time1,time2) - Math.min(time1,time2);
        var ans = [];
        ans[0] = Math.floor(dif/3600);
        if(ans[0]<10){ans[0] = "0"+ans[0]}
        dif = dif%3600;
        ans[1] = Math.floor(dif/60);
        if(ans[1]<10){ans[1] = "0"+ans[1]}
        ans[2] = dif%60;
        if(ans[2]<10){ans[2] = "0"+ans[2]}
        console.log(ans.join(":"));
    }
}); 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2018-02-02T06:03:43.997

我们通常需要时间差来估计 I/O 操作、SP 调用等所花费的时间，NodeJs 最简单的解决方案（控制台在回调-异步执行）如下：

```
var startTime = new Date().getTime();
//This will give you current time in milliseconds since 1970-01-01

callYourExpectedFunction(param1, param2, function(err, result){
    var endTime = new Date().getTime();
    //This will give you current time in milliseconds since 1970-01-01

    console.log(endTime  - startTime)
    //This will give you time taken in milliseconds by your function

   if(err){
   }
   else{
   }
}) 
```

# mongodb - MongoDB的查询语言有多强大，数组的上限是什么？

> ID：10804044
> 
> 赞同：1
> 
> 时间：2012-05-29T17:40:37.513
> 
> 标签：mongodb

好的，让我们先看一个屏幕截图。这是我们称之为[VCF 文件](http://www.1000genomes.org/node/101)的文本文件的屏幕截图。它可能有多少行？可能有 100,000 行这样的事情：

![在此处输入图像描述](../Images/8602c251156f1f3357ba48be1eafee49.png)

我是 MongoDB 的新手和新手，所以我想到了这样的模式：

![在此处输入图像描述](../Images/3479c7c8a14c194ca32c456c1554d422.png)

因此，例如注意该文本文件中的 REF 是我的架构中的键/值。但就像我说的那样，它可能有 200,000 行......所以：

1.  数组仍然是我可以使用的好东西吗？在该数组中存储 200,000 个成员？
2.  我可以查询它有多强大？所以在文本文件中我们有行，例如 14370 的 POS 中的#CHROM20 有一个“G”的 REF 和“A”的 ALT ......所以用我的模式我们可以找到并返回它吗？假设我们要搜索 REF 字段中包含“G”的患者，那么 MongoDB 查询是否足够强大以搜索并返回这样的结果？
3.  这是一个糟糕的架构吗？你有更好的建议/建议吗？
4.  您可以为我有问题的 qquesry 提供的任何示例查询对给我一些想法很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:11:34.960

> 假设我们要搜索 REF 字段中包含“G”的患者

ref:[TCG,TA] 计数还是仅计数 ref:[A,T,ATC,G] ？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T17:53:55.803

抱歉回复太慢了，你回复的时候我已经去度假了。以下语法实现了预期的结果。

```
> db.refs.insert({ref:[A,T,ATC,G]})
> db.refs.insert({ref:['A','T','ATC','G']})

> db.refs.findOne()
{
    "_id" : ObjectId("4fda21bb8a807d87a65aba37"),
    "ref" : [
        "A",
        "T",
        "ATC",
        "G"
    ]
}
> db.refs.insert({ref:['TCG','TA']})
> db.refs.find()
{ "_id" : ObjectId("4fda21bb8a807d87a65aba37"), "ref" : [ "A", "T", "ATC", "G" ] }
{ "_id" : ObjectId("4fda22438a807d87a65aba38"), "ref" : [ "TCG", "TA" ] }

> db.refs.find({ref :{$all : ['G']}})
{ "_id" : ObjectId("4fda21bb8a807d87a65aba37"), "ref" : [ "A", "T", "ATC", "G" ] } 
```

这是你的想法吗？

架构设计中的一个大问题是避免 16MB 的文档限制。虽然您可以拥有尽可能多的文档，但可以使用 64 位地址空间进行寻址，但我不知道您的文档可能会如何增长。此限制可能需要您将某些字段分解为您引用的其他文档。

# objective-c - 在 iOS 中播放 ogg 流

> ID：10804046
> 
> 赞同：18
> 
> 时间：2012-05-29T17:40:39.183
> 
> 标签：objective-c, ios, streaming, avplayer, ogg

有没有人从iOS播放过ogg流？我可以使用什么而无需编写自己的解码器？

我正在使用 Apple 的 AVPlayer 播放流。

此问题已作为此线程的一部分提出： [iOS 在线广播流媒体问题](https://stackoverflow.com/questions/9830464/ios-online-radio-streaming-questions)，但尚未得到解答。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-29T17:53:07.220

在 iOS 中没有对播放 ogg 文件的内置支持，但是，ogg 压缩/解压缩的源代码很容易获得（来自[xiph.com](http://www.xiph.org/downloads/)）。为 iOS 编译此代码并在应用程序中使用它是相当简单的。

我有机会编译这些库并使其可用：[“Precompiled Ogg Vorbis Libraries for iOS”](http://iosdeveloperzone.com/2012/08/07/precompiled-ogg-vorbis-libraries-for-ios/)。

我还在 GitHub 上提供了一些示例源代码，展示了如何在 iOS 上播放解码的 Ogg Vorbis 音频：[IDZAQAudioPlayer](https://github.com/iosdevzone/IDZAQAudioPlayer)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-09T11:10:02.920

.ogg 文件也可以用 Opus 或 FLAC 编码，请参阅[Ogg](https://en.wikipedia.org/wiki/Ogg) wiki。[IDZAQAudioPlayer](https://github.com/iosdevzone/IDZAQAudioPlayer)可能无法涵盖所有​​情况。

对于 Opus 编解码器，您可以参考 Telegram for iPhone 源代码：[https ://telegram.org/apps](https://telegram.org/apps)

# iphone - 将通用应用程序作为缩放的 iPhone 应用程序运行？

> ID：10804047
> 
> 赞同：1
> 
> 时间：2012-05-29T17:40:39.173
> 
> 标签：iphone, ios, ipad, ios-universal-app

我已经看到了大量关于将 iPhone 和 iPad 应用程序合并为通用应用程序的问题和答案，但这不是我想要做的。我要做的是在应用程序购买中使用解锁 iPad 界面，然后使用条件显示正确的界面。如果购买了界面，应用程序会显示 iPad Nib，如果没有，它会以与 iPhone 应用程序相同的方式显示（带有缩放应用程序的选项等）。条件非常简单，我已经实现了它们，但是我遇到的问题是：如果没有购买 IAP，iPad 会显示 iPhone Nib，但不是以典型方式。它就在角落里，没有缩放它的选项，而不是在你通常看到的带有黑色边框的中心。有谁知道我可以如何设置它以便我解决这个问题？我'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T21:55:52.867

iOS 应用程序中的`Info.plist`文件包含一个键 ，`UIDeviceFamily`它列出了应用程序本机支持的设备。如果键的值为 1 或包含 1 的数组，则应用程序原生支持 iPhone 和 iPod Touch。如果值为 2 或包含 2 的数组，则应用程序原生支持 iPad。

如果`UIDeviceFamily`说该应用程序支持 iPad，那么它将以原生 iPad 模式运行该应用程序，而不是 iPhone 包装模式。

该`Info.plist`文件是您的应用程序包的一部分，您无法修改应用程序包中的文件。

因此，无法在运行时启用或禁用系统的本机 iPad 支持。您必须将应用程序的顶级视图移动到居中并缩放其子视图的包装器视图中，并将该包装器视图用作`UIWindow`的子视图。

[`UIDeviceFamily`在*信息属性列表键参考*](http://developer.apple.com/library/ios/documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html#//apple_ref/doc/uid/TP40009252-SW11)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T17:53:18.183

不幸的是，这是不可能的。iPad 将知道该应用程序已准备好 iPad，并会告诉您以全尺寸绘制屏幕。`UIViewAutoresizingMask`即使您在 iPad 上显示 iPhone xib 文件，它们仍会使用您为它们设置的参数缩放以适应全屏。

一种想法是强制您的尺寸为`UIWindow`iPhone 尺寸（记住要考虑视网膜）并居中，但我不能 100% 确定这将如何/是否有效。您可能必须更改每一`UIView`帧。我不确定。

# iphone - CSS/HTML iphone 在背景图像位置的边缘周围放置了一些额外的空间。我该如何删除它？

> ID：10804048
> 
> 赞同：1
> 
> 时间：2012-05-29T17:40:44.493
> 
> 标签：iphone, html, css

## 概括

我用 CSS 和 HTML 创建了一个盒子。它水平和垂直缩放，并保持漂亮的渐变背景和圆角。它仅使用单个 PNG 背景图像（具有多个精灵）。它适用于 IE7+

*我没有使用 CSS3，因为角落和边框的细微之处使得仅使用 CSS3 几乎不可能重现。此外，它必须在 IE7 和 8 中工作。*

我已经成功地让它在它需要的所有浏览器中工作，但**问题是 iPhone**

* * *

## 演示

这里有一个工作示例： [http ://www.trevorsimonton.com/iosbg/index.html](http://www.trevorsimonton.com/iosbg/index.html)

在该页面的底部，我有各种设备和浏览器中的输出链接。它在我的 HTC Evo 上也很有效，但我无法从该设备发布屏幕截图。

* * *

## 问题

出于某种原因，每个`div`. 我已经在上面的网站上发布了这些截图，并在这篇文章的底部发布了一些截图。

*   这仅出现在 iphone 上。
*   它适用于最新版本的 Chrome、Safari 和 Firefox。它在 IE7、IE8 和 IE9 中也很有效
*   用户缩放被禁用，并且比例锁定在 1.0

* * *

## 编码

该框具有复杂的标记，允许它在 IE7+ 中缩放和显示图像边框

标记是这样的：

**HTML**

```
<div class='ksrfasw'>
  <div class='content-container'>

    <!-- top and top-right corner -->
    <div class='ksrfasw-top'><div>&nbsp;</div></div> 

    <!-- right shadow, stretches down right side -->
    <div class='ksrfasw-rs'>

    <!-- left shadow, stretches down left side -->
    <div class='ksrfasw-ls'>

       <!-- inner gradient -->
       <div class="ksrfasw-tab-content">

          <!-- inner padding -->
          <div class="ksrfasw-tab-content-inner">
             CONTENT -- FINALLY!
          </div>
       </div>
    </div>
    </div>

    <!-- bottom and bottom-right corner -->
    <div class='ksrfasw-bottom'><div>&nbsp;</div></div> 

  </div>
</div> 
```

*   每个按键 div 的背景图都是一样的。“box.png”——包含拼图各个部分的所有不同“精灵”。
*   盒子里还有一个“支撑”，可以让最小高度在 IE7 中工作。
*   是的，这个标记似乎过分了......但它在所有浏览器中都按预期工作。它是一个完全可扩展的圆角渐变 x 浏览器框。

**CSS：**

```
.ksrfasw-top,
.ksrfasw-top div,
.ksrfasw-ls,
.ksrfasw-rs,
.ksrfasw-bottom,
.ksrfasw-bottom div,
.ksrfasw-tab
{
background-image:url("box.png");
background-repeat:no-repeat;
padding:0px;
margin:0px;
border:0px;
outline:0px;
width:100%;
background-size:725px 1120px;
}
.ksrfasw-top div
{
background-position:0px -40px;
}
.ksrfasw-top
{
background-position:100% -60px;
padding-right:12px;
}
.ksrfasw-rs
{
background-position:100% -600px;
padding-right:12px;
}
.ksrfasw-ls
{
background-position:0 -100px;
}
.ksrfasw-bottom div
{
background-position:0px -20px;
}
.ksrfasw-bottom
{
background-position:100% 0px;
padding-right:12px;
}
.ksrfasw-brace
{
height:190px;
float:right;
width:1px;
}

.ksrfasw,
.ksrfasw-content-container
{
position:relative;
}
.ksrfasw-tabbed
{
padding-top:34px;
}
.ksrfasw-content-container
{
z-index:5;
}
.ksrfasw-tab
{
position:absolute;
width:154px;
display:block;
text-decoration:none;
height:61px;
top:0px;
}
.ksrfasw-tab-location
{
left:1px;
}
.ksrfasw-tab-name
{
left:151px;
}
.ksrfasw-tab-active
{
z-index:10;
background-position:-515px -700px;
}
.ksrfasw-tab-active-first .ksrfasw-tab-active
{
background-position:-515px -780px;
}
.ksrfasw-tab-active-first .ksrfasw-top div
{
background-position:5px -40px;
}
.ksrfasw-tab-inactive
{
z-index:1;
background-position:-515px -620px;
}
.ksrfasw-tab-content-inner
{
padding:20px 25px;
}

body
{
text-align:center;
}
#wrapper
{
width:95%;
max-width:700px;
min-width:300px;
margin:0 auto;
}
/**
 * Markup free clearing.
 *
 * @see http://perishablepress.com/press/2009/12/06/new-clearfix-hack
 */
.clearfix:after {
  content: ".";
  display: block;
  height: 0;
  clear: both;
  visibility: hidden;
}
/* IE6 */
* html .clearfix {
  height: 1%;
}
/* IE7 */
*:first-child + html .clearfix {
  min-height: 1%;
}
.clearfix:after {
  font-size: 0;
} 
```

***（注意：CSS和HTML中还有其他事情可以在盒子上创建标签......不用担心。在这个例子中，我有1个带标签的盒子，另一个没有。两者都表现出相同的行为）***

* * *

## iPhone 截图显示问题

这是一个： ![显示在 iphone 上创建的元素之间的偏移量](../Images/11010619f76ee867f5e53e234be57f91.png)

以及神秘“填充物”的放大版 ![神秘填充物的另一张照片，带有放大的细节](../Images/141f221d5a22505d0d1080c9325a513c.png)

* * *

## iPad屏幕截图显示期望

这是 ipad 的渲染，按预期工作： ![在此处输入图像描述](../Images/13aab2f2e764da021260be659c034b6a.png)

我已经尽我所能尝试了`background-position`, `position`, `top`, `left`, `margin`, `padding`,`border`甚至`background-size`属性，虽然它在每个测试的设备上都很好用，（包括 ipad！）这些行在 iphone 上不会消失。

iphone有什么东西可以让我阻止背景图像吗？

谢谢，如果需要更多示例或链接示例的解释，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:00:17.213

its the image. if you zoom in any browser, you see the same lines as on the iphone.

i think it comes from the retina-display, doubling all pixels.

you can make a proper image at double size and set it with an media query like

```
@media only screen and (-webkit-min-device-pixel-ratio: 2) {
  .ksrfasw-top,.ksrfasw-top div,.ksrfasw-ls,.ksrfasw-rs,
  .ksrfasw-bottom,.ksrfasw-bottom,div,.ksrfasw-tab{
    background-image:url("box-doublesize.png");
} 
```

this should fix your issue.

# qthread - QTimer、QThread 和 TCP 消息传递

> ID：10804052
> 
> 赞同：0
> 
> 时间：2012-05-29T17:41:09.793
> 
> 标签：qthread

Qt 4.8，Windows XP：

我有一个线程来管理我的 TCP 消息并在适当的时间打开/维护/关闭套接字。

这个相同的线程启动一个 QTimer，200 毫秒，在我的线程数据中定义，一旦（如果）套接字打开，它就会在我的线程类中泵出一个事件。所以计时器及其事件属于线程，据我所知，这个想法是最好的。

QTimer 超时事件通过属于线程的端口发送一条 TCP 消息，它是此特定硬件项目的保持活动消息。必须定期发送，否则设备会“消失”，这是不行的。

发送消息时，我收到此错误：

“QSocketNotifier：不能从另一个线程启用套接字通知”

据我所知，我*从*同一个线程发送消息，并期望任何信号等都由它拥有/处理等。

谁能告诉我我在这里缺少什么？

PS：消息*已*发送，设备*确实*保持活动状态...只是我在 Qt 错误控制台上收到此运行时错误，我非常担心因此而潜伏的内部问题。

在 OS X 10.6 下运行时不会出现该消息。我不知道为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T01:58:39.393

好的，这是独家新闻。QTimer，因为只有 QT 的设计者才知道，它继承了线程父级的上下文。不是它启动的线程的上下文。因此，当计时器关闭，并且您从它调用的插槽发送消息时，您不在线程的上下文中，而是在父上下文中。

您也无法启动该线程的子线程，以便您可以触发实际上将在您想要的线程中的计时器。Qt 不会让它运行。

因此，花费一些内存，创建一个队列，将消息从其他地方加载到队列中，在拥有 TCP 端口的线程中观察队列，并在收到它们时发送它们。这样可行。

# java - 文件阅读器没有读取正确的值

> ID：10804055
> 
> 赞同：2
> 
> 时间：2012-05-29T17:41:17.827
> 
> 标签：java, file-io

我对 Java 很陌生，我已经编写了两个小函数来读取和写入数据到文件。写入的数据是游戏中地图上角色的 x 和 y 坐标。写入文件的数据似乎没问题：

```
234
-123 
```

我使用以下代码编写数据：

```
public void save(int x, int y)
{
    try
    {
        FileWriter fstream = new FileWriter("skygrim.txt");  //Create save-file
        BufferedWriter out = new BufferedWriter(fstream);    //New writer, connected to save-file
        out.write(x + "\n" +y);        //Write position to file 
        out.close();                   //Close file
    }catch (Exception e){System.out.println("Error: " + e.getMessage());}
} 
```

当我稍后想读取数据时，为了能够“加载”保存的游戏，我从文件中获取以下值：

```
50
51 
```

我使用以下代码从文件中读取：

```
public int[] read(String file)
{
    int[] coordinates = new int[2];
    try
    {
        FileReader fstream = new FileReader(file);
        BufferedReader in = new BufferedReader(fstream);
        coordinates[0] = in.read();
        coordinates[1] = in.read();
        in.close();
    }catch(Exception e){System.out.println("Error" + e.getMessage());}
    System.out.println("x: " + coordinates[0]);
    System.out.println("y: " + coordinates[1]);
    return coordinates;
} 
```

为什么程序读取文件如此严重错误，我该怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T17:44:30.557

您的读取方法是读取文件的前两个字符：“2”和“3”。您可能想使用 BufferedReader.readLine()

另请参阅 Integer.parseInt(String)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T17:44:38.137

`BufferedReader.read()`读取单个字符，而不是`int`. 一种可能是使用`java.util.Scanner`和它的方法`nextInt()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T17:44:11.837

```
 coordinates[0] = in.read();
 coordinates[1] = in.read(); 
```

每次调用只读取一个字节。在这种情况下，您将得到“2”和“3”（50 和 51 是它们的 ascii 代码）。因此错误的价值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T17:49:01.260

使用对象的`readLine()`方法来避免像方法那样`BufferedReader`读取单个字符。`read()`

```
coordinate[0] = Integer.parseInt(reader.readLine());
coordinate[1] = Integer.parseInt(reader.readLine()); 
```

# c# - C# 错误编码

> ID：10804061
> 
> 赞同：0
> 
> 时间：2012-05-29T17:41:41.023
> 
> 标签：c#

当我尝试这样做时遇到了一些问题：

```
public byte[] Login()
    {
        return Encoding.ASCII.GetBytes("WA\x01\x00\x00\x19\xf8\x05\x01\xa0\x8a\x84\xfc\x11iPhone-2.6.7-5222\x00\x08\xf8\x02\x96\xf8\x01\xf8\x01\x7e\x00\x07\xf8\x05\x0f\x5a\x2a\xbd\xa7");
    } 
```

这些字节`\x8a\x84`都被编码为`\xbf\xbf`我不想要的。我已经尝试过使用默认编码、UTF 和 Unicode，但它们都不能提供我需要的东西。

这是一个套接字客户端。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T17:44:34.017

> 但他们都没有提供我需要的东西

好吧，我们不知道你真正需要*什么*。

如果您尝试获取字节值`0x8a`，`0x84`然后我建议您避免使用文本开始 - 看起来这实际上并不是*所有*的文本数据。看起来其中可能有一些*文本*，您可以对这些方面使用编码，但是当您想要固定*二进制*数据时，您应该将其指定为字节，而不是解码实际上不是文本的“文本” .

使用(ISO-8859-1)你*可能*`Encoding.GetEncoding(28591)`会得到你所*期望*的，但这仍然不是你*应该*做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T17:45:11.663

ASCII 未定义高于值 127。

我想知道为什么您使用字符串中介将字节转换为字节。

相反，您可以执行类似的操作并完全消除此问题。

```
Encoding.ASCII.GetBytes("WA")
.Concat(new byte[] { 1, 2, 3, 4, 5 })
.Concat(Encoding.ASCII.GetBytes("iPhone-2.6.7-5222"))
.Concat(new byte[] { 6, 7, 8, 9, 10 })
.ToArray() 
```

# c# - 安全代码生成/比较和原子钟

> ID：10804064
> 
> 赞同：2
> 
> 时间：2012-05-29T17:42:10.600
> 
> 标签：c#, security, authentication

我们为我们的 Web 应用程序构建了一个双因素身份验证过程。我们构建了一个小型独立应用程序，每分钟生成一个 8 位安全代码。当用户登录时，系统会提示他们输入安全代码。提交 Web 应用程序后，在其末端生成安全代码并将其与输入的安全代码进行比较。如果两者相等，则允许用户进入应用程序。这就像 RSA 令牌一样使用。

但是，我使用原子钟服务器来确保 USB 应用程序和 Web 应用程序的安全代码生成相同，因为时区和时钟同步会带来问题。这很痛苦，不仅因为服务器有时可能不可靠，而且我们还必须添加防火墙规则以允许我们击中特定的原子钟。有没有不使用远程原子钟的安全方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:51:40.413

您不需要精确的时钟，而是需要相同的值。因此，从同一个 Web 应用程序公开某种“当前时间”服务（即基本 HTTP 获取“/当前时间”和 JSON 响应）并从 USP 应用程序查询它。在这种情况下，您只需要在为应用程序服务的服务器之间同步时间（如果您有多个服务器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T17:51:59.927

如果您的应用程序不必是完全 RSA 令牌安全的，您可以修改 Web 应用程序以接受最后 2 或 3 个安全代码。这样，您就不会那么依赖时间一致性。

如果您必须进行时间同步，您可以运行自己的时间服务器，该服务器可以通过 Web 应用程序和 USB 应用程序访问。时间必须一致，不一定正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T18:06:29.037

依赖外部时间是一个坏主意，因为如果可以操纵时间源（例如，通过中间人攻击、恶意上游 DNS 更改等），那么人们可以远程查询设备以收集未来价值观。

在推出自己的加密货币之前，您应该真正评估您的安全要求。很容易成为许多错误的牺牲品，例如意外使用不加密安全的 PRG、侧信道定时攻击或类似情况。

如果您必须为生产执行此操作，请确保打开您的实现以便对其进行审查。

# iphone - IOS 应用程序为呼叫添加前缀

> ID：10804068
> 
> 赞同：0
> 
> 时间：2012-05-29T17:42:21.867
> 
> 标签：iphone, ios, xcode, prefix

我已经启动了一个 iPhone 应用程序项目，该项目需要使用用户通讯录并将前缀号码添加到电话的开头。

实现这一点的最佳方法是什么？是否已经为此类函数构建了一个类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:56:39.673

[地址簿编程指南](http://developer.apple.com/library/ios/#DOCUMENTATION/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Introduction.html)

拿到号码后：

```
NSString *phoneNumber = [NSString stringWithFormat:@"tel://%i%@", prefix, retrievedNumber];
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:phoneNumber]]; 
```

我还没有这样做，但这应该会让你继续前进。

# google-maps-api-3 - KML 图层限制问题

> ID：10804070
> 
> 赞同：5
> 
> 时间：2012-05-29T17:42:27.563
> 
> 标签：google-maps-api-3, kml, checkbox

我已经通过 url 将 6 个 kml 层加载到我的网站，以便通过复选框来关闭/打开。不过我最近注意到，它只允许我在给定时间显示 4 kml。当我选择超过 4 个时，第 5 个和第 6 个不显示。我选择什么并不重要，它似乎限制我只显示 4。有人可以指导我可能导致这种情况的原因还是我应该以其他方式编码？kml 本身可以工作并且小于 800kb。似乎很奇怪，我在给定时间只能显示 4 kml。

这是网站 - www.gbnrtc.org/bikemap

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T23:32:22.360

如果您查看[KML 支持页面](https://developers.google.com/kml/documentation/mapsSupport)，其中列出了为 Google 地图和移动版 Google 地图提供的 KML 支持级别，它列出了以下大小和复杂性限制：

*   **最大获取文件大小（原始 KML、原始 GeoRSS 或压缩 KMZ）：3MB**
*   最大未压缩 KML 文件大小：10MB
*   最大网络链接数：10
*   文档范围功能的最大总数：1,000

假设您估计文件大小约为 800K，那么您的四个文件大约需要 3.2 MB。在不了解您的 KML 内容的更多信息的情况下，加载四个后限制将关闭您似乎是有道理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-04T02:28:38.663

这个答案很老了。我找到了一个很棒的库来加载大型 KML/KMZ 文件（即使 Google 抛出错误）。请注意，图书馆很旧，还没有收到任何更新。

以下是有关它的更多详细信息：

使用**GeoXML**，我能够成功地将所有必需的 KML 添加到地图中！[https://github.com/geocodezip/geoxml3](https://github.com/geocodezip/geoxml3)

第 1 步：下载并包含 geoxml3.js 脚本

```
<script src="geoxml3.js"></script> // include after google map api script 
```

步骤 2：在 JS 中实例化和初始化对象：

```
var myParser = new geoXML3.parser({map: map});
myParser.parse('/path/to/data.kml'); 
```

这将加载 KMl 文件。

# jquery - 如何从 jquery 中的 2 个 div 中隐藏 mouseleave 上的 div？

> ID：10804073
> 
> 赞同：3
> 
> 时间：2012-05-29T17:42:48.170
> 
> 标签：jquery, menu, mouseleave, jquery-hover

这个问题可能有点连线，但换句话说我有一个菜单（见[jsfiddle](http://jsfiddle.net/patrioticcow/fmTnh/1/)）

当我将鼠标悬停在一个 div 上时，我会得到一个下拉菜单。当我鼠标离开时，下拉菜单消失。到目前为止，一切都很好。

问题是如果鼠标也悬停在下拉菜单上，我希望菜单保持打开状态。

```
ex: if($elem).not(":hover"){..} 
```

一些代码：

```
<div class="top_menu_item">
    <div class="hover_item">
        <a href="#">TEST</a>
    </div>
    <div class="drop_item" style="display: none;">
        <div>
            <a href="#">My test</a>
        </div>
        <div class="">
            <a href="#">Add test</a>
        </div>
        <div>
            <a href="#">Remove test</a>
        </div>
    </div>

$(document).ready(function () {
    var elem = new Array();
    var len = $(".hover_item").length;
    var i = 0;
    while (i < len) {
        elem[i] = $(".hover_item:eq(" + i + ")");

        i = i + 1;
    }
    $.each(elem, function (key, val) {
        hoverFunc(val);
    });

});

function hoverFunc($elem) {

    $elem.hover(function () {
        if ($elem.next().is(":hidden")) {
            $elem.next().slideDown("fast");
        }
    });

    $elem.mouseleave(function (e) {
        // here should be :  if the mouse is not hovering over the dropdown, then
        $elem.next().slideUp("fast");
    });

    $elem.next().mouseleave(function (e) {
        $elem.next().slideUp('fast');
    });
} 
```

如果有人可以重新提出我的问题来说出我的意思，请这样做。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T17:46:51.807

你不需要 javascript 来做到这一点：[CSS 解决方案](http://jsfiddle.net/fmTnh/2/)。

只需将子菜单 ( `.drop_item`) 作为子元素添加到触发元素 ( `.hover_item`) 并添加一些 CSS：

```
.drop_item { display: none; }
.hover_item:hover .drop_item { display: block; }​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T17:56:01.187

试试这个。

为 nextElem 添加了鼠标悬停事件。还清理了变量以提高效率，而不是引用 $elem.Next()，只需设置

```
var nextElem = $elem.Next() 
```

并添加了这个

```
 nextElem.hover(function () {
    if ($elem.is(":hidden")) {
        $elem.slideDown("fast");
    }

}); 
```

[http://jsfiddle.net/fmTnh/3/](http://jsfiddle.net/fmTnh/3/)

# javascript - 如何使浏览器不解析从 javascript 添加的新 HTML 代码

> ID：10804082
> 
> 赞同：0
> 
> 时间：2012-05-29T17:43:35.560
> 
> 标签：javascript, asp.net, html, ajax

我想使用 ajax 从我的服务器向我的网页添加一些文本，但这些文本包含一些 html 标签，并且浏览器倾向于解析该代码并呈现它。我不想要这种行为，我想在不解析 html 标签的情况下附加该文本。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:47:26.433

您必须对返回的“HTML”进行*编码。*基本上你必须替换`<`,`>`和`&`,`&lt;`和.`&gt;``&amp;`

例如，如果您在服务器端使用 PHP，则可以使用[`htmlspecialchars()`](http://de2.php.net/manual/en/function.htmlspecialchars.php)- 可能有类似的函数或方法可用于其他语言（python 的[cgi.escape](http://docs.python.org/library/cgi.html#cgi.escape) 、Perl的[HTML:Entities](http://search.cpan.org/~gaas/HTML-Parser-3.69/lib/HTML/Entities.pm)、[System.Web.HttpUtility.HtmlEncode](http://msdn.microsoft.com/en-us/library/system.web.httputility.aspx) asp.net ...）。

如果您在看起来像这样的重新调整的字符串上执行此操作

```
this is <strong>bold</strong> text 
```

在您的浏览器中显示为

> 这是**粗体**字

您的输出将更改为

```
this is &lt;strong&gt;bold&lt;/strong&gt; text 
```

将显示为

> 这是<strong>粗体</strong>文字

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T17:55:59.613

使用[`node.textContent`](https://developer.mozilla.org/en/DOM/Node.textContent)属性（IE<=8 上的 element.innerText）将*文本*内容分配给元素。浏览器会将所有特殊字符编码到相应的 HTML 实体中：

```
var h1 = document.getElementsByTagName("h1")[0];
if (typeof h1.textContent != "undefined") {
    h1.textContent = "<b>Hello World</b>";
}
else if (typeof h1.innerText != "undefined") {
    h1.innerText = "<b>Hello World</b>";
}
alert(h1.innerHTML);​
// at this point, the h1 tag will "render" <b>Hello World</b>
// not the text Hello World in bold face
// inspecting the element will reveal that html tags, e.g. <b>
// were converted to &lt;b&gt; 
```

# [演示](http://jsfiddle.net/salman/wZxVJ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T17:55:13.967

在浏览器端的 javascript 中：

```
function htmlEncode( str )  {
    str = str + "";
    var el = document.createElement("div");
    el.appendChild( document.createTextNode( str ) );
    return el.innerHTML;
}

htmlEncode( "<div></div>" );
//"&lt;div&gt;&lt;/div&gt;" 
```

# iphone - 无法让 AVMutableComposition 循环播放

> ID：10804086
> 
> 赞同：0
> 
> 时间：2012-05-29T17:43:54.503
> 
> 标签：iphone, objective-c, loops, avplayer, avmutablecomposition

适用于 iOS 的 Xcode

我遇到的问题是播放 AVMutableComposition。我正在创建组合，然后在 for 循环中将 AVURLAssets 添加到它。我正在添加所有内容，就像我将类似地将对象添加到可变数组中一样，然后尝试在之后播放它，但没有播放。这是我的代码：

```
AVMutableComposition *composition = [AVMutableComposition composition];

int count;

count = array.count;

for (int y=0;y<count;y++){    

        NSURL *url;

            url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/%@.mp3", [[NSBundle mainBundle] resourcePath],[array objectAtIndex:y]]];

        NSDictionary *options = [NSDictionary dictionaryWithObject:[NSNumber numberWithBool:YES] forKey:AVURLAssetPreferPreciseDurationAndTimingKey];

        AVURLAsset *sourceAsset = [[AVURLAsset alloc] initWithURL:url options:options];

        //calculate times
        NSNumber *time = [soundArray1 objectAtIndex:1];

        double timenow = [time doubleValue];
        double insertTime = (240*y);

        CMTime douTime = CMTimeMake(240, timenow);
        CMTime staTime = CMTimeMake(0, 1);
        CMTimeRange editRange = CMTimeRangeMake(staTime,douTime);

        CMTime insTime = CMTimeMake(insertTime, timenow);

        NSError *editError;

        [composition insertTimeRange:editRange ofAsset:sourceAsset atTime:insTime error:&editError];

    }

AVPlayer* mp = [AVPlayer playerWithPlayerItem:[AVPlayerItem playerItemWithAsset:composition]];

[mp play]; 
```

我假设我完全错了，但是我在循环中而不是之后添加了这个，在 if 中并打开一个 NSRunLoop 来检查（有点糟糕，但这只是为了测试！）：

```
 AVMutableComposition *composition = [AVMutableComposition composition];

int count;

count = array.count;

for (int y=0;y<count;y++){    

        NSURL *url;

            url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/%@.mp3", [[NSBundle mainBundle] resourcePath],[array objectAtIndex:y]]];

        NSDictionary *options = [NSDictionary dictionaryWithObject:[NSNumber numberWithBool:YES] forKey:AVURLAssetPreferPreciseDurationAndTimingKey];

        AVURLAsset *sourceAsset = [[AVURLAsset alloc] initWithURL:url options:options];

        //calculate times
        NSNumber *time = [soundArray1 objectAtIndex:1];

        double timenow = [time doubleValue];
        double insertTime = (240*y);

        CMTime douTime = CMTimeMake(240, timenow);
        CMTime staTime = CMTimeMake(0, 1);
        CMTimeRange editRange = CMTimeRangeMake(staTime,douTime);

        CMTime insTime = CMTimeMake(insertTime, timenow);

        NSError *editError;

        [composition insertTimeRange:editRange ofAsset:sourceAsset atTime:insTime error:&editError];

    if(y==3){

    AVPlayer* mp = [AVPlayer playerWithPlayerItem:[AVPlayerItem playerItemWithAsset:composition]];

    [mp play];

    [[NSRunLoop currentRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:20]];

        }
    } 
```

在这里，我只是给了我的数组 4 个元素，并让它在第 4 次运行时播放合成。它工作并以完美的顺序播放了我的 4 个音频文件。

我需要做什么才能使我的作曲在这个循环之后而不是在循环中播放？我是否误用了系统？

编辑：通过将我打开的 RunLoop 代码粘贴到最后，它会播放。我应该这样做，还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T17:45:21.103

所以我以错误的方式解决了这个问题。我需要为每个元素创建一个 AVMutableCompositionTrack 并将其添加到我的合成中

```
 NSDictionary *options = [NSDictionary dictionaryWithObject:[NSNumber numberWithBool:YES]
                                                            forKey:AVURLAssetPreferPreciseDurationAndTimingKey];

        AVURLAsset *sourceAsset = [[AVURLAsset alloc] initWithURL:url options:options];

        //calculate times
        NSNumber *time = [soundArray1 objectAtIndex:1];

        double timenow = [time doubleValue];

        double insertTime = (240*y);

                    AVMutableCompositionTrack *track =
        [composition addMutableTrackWithMediaType:AVMediaTypeAudio
                                 preferredTrackID:kCMPersistentTrackID_Invalid];

        //insert the audio track from the asset into the track added to the mutable composition
        AVAssetTrack *myTrack = [[sourceAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];
        CMTimeRange myTrackRange = myTrack.timeRange;
        NSError *error = nil;
        [track insertTimeRange:myTrackRange
                                      ofTrack:myTrack
                                       atTime:CMTimeMake(insertTime, timenow) 
                                        error:&error];

        [sourceAsset release]; 
```

其次是

```
AVPlayerItem *playerItem = [AVPlayerItem playerItemWithAsset:composition];
self.player = [[AVPlayer alloc] initWithPlayerItem:playerItem];

        [self.player play]; 
```

在接口部分中将播放器声明为属性

```
@interface SecondViewController ()

@property (nonatomic, assign) AVPlayer *player;

@end 
```

# c# - 如何检查字符串值是否在枚举列表中？

> ID：10804102
> 
> 赞同：107
> 
> 时间：2012-05-29T17:45:03.643
> 
> 标签：c#, c#-4.0, c#-3.0

在我的查询字符串中，我有一个年龄变量 `?age=New_Born`。

有没有办法检查这个字符串值`New_Born`是否在我的枚举列表中

```
[Flags]
public enum Age
{
    New_Born = 1,
    Toddler = 2,
    Preschool = 4,
    Kindergarten = 8
} 
```

我现在可以使用 if 语句，但是如果我的 Enum 列表变得更大。我想找到更好的方法来做到这一点。我正在考虑使用 Linq，只是不知道该怎么做。

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2012-05-29T17:46:58.827

您可以使用：

```
 Enum.IsDefined(typeof(Age), youragevariable) 
```

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-05-29T17:48:43.343

您可以使用 Enum.TryParse 方法：

```
Age age;
if (Enum.TryParse<Age>("New_Born", out age))
{
    // You now have the value in age 
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-05-29T17:48:41.413

您可以使用[TryParse](http://msdn.microsoft.com/en-us/library/dd783499.aspx)方法，如果成功则返回 true：

```
Age age;

if(Enum.TryParse<Age>("myString", out age))
{
   //Here you can use age
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-04-12T09:20:54.573

我有一个使用 TryParse 的便捷扩展方法，因为 IsDefined 区分大小写。

```
public static bool IsParsable<T>(this string value) where T : struct
{
    return Enum.TryParse<T>(value, true, out _);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-29T17:47:23.547

解析年龄：

```
Age age;
if (Enum.TryParse(typeof(Age), "New_Born", out age))
  MessageBox.Show("Defined");  // Defined for "New_Born, 1, 4 , 8, 12" 
```

要查看它是否已定义：

```
if (Enum.IsDefined(typeof(Age), "New_Born"))
   MessageBox.Show("Defined"); 
```

根据您计划如何使用`Age`枚举，**标志**可能不是正确的。您可能知道，`[Flags]`表示您希望允许多个值（如在位掩码中）。 `IsDefined`将返回 false`Age.Toddler | Age.Preschool`因为它有多个值。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-29T17:52:24.123

您应该使用 Enum.TryParse 来实现您的目标

这是一个例子：

```
[Flags]
private enum TestEnum
{
    Value1 = 1,
    Value2 = 2
}

static void Main(string[] args)
{
    var enumName = "Value1";
    TestEnum enumValue;

    if (!TestEnum.TryParse(enumName, out enumValue))
    {
        throw new Exception("Wrong enum value");
    }

    // enumValue contains parsed value
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-04-13T22:45:39.363

我知道这是一个旧线程，但这里有一种稍微不同的方法，它使用枚举上的属性，然后使用辅助类来查找匹配的枚举。

这样，您可以在单个枚举上拥有多个映射。

```
public enum Age
{
    [Metadata("Value", "New_Born")]
    [Metadata("Value", "NewBorn")]
    New_Born = 1,
    [Metadata("Value", "Toddler")]
    Toddler = 2,
    [Metadata("Value", "Preschool")]
    Preschool = 4,
    [Metadata("Value", "Kindergarten")]
    Kindergarten = 8
} 
```

像我这样的助手类

```
public static class MetadataHelper
{
    public static string GetFirstValueFromMetaDataAttribute<T>(this T value, string metaDataDescription)
    {
        return GetValueFromMetaDataAttribute(value, metaDataDescription).FirstOrDefault();
    }

    private static IEnumerable<string> GetValueFromMetaDataAttribute<T>(T value, string metaDataDescription)
    {
        var attribs =
            value.GetType().GetField(value.ToString()).GetCustomAttributes(typeof (MetadataAttribute), true);
        return attribs.Any()
            ? (from p in (MetadataAttribute[]) attribs
                where p.Description.ToLower() == metaDataDescription.ToLower()
                select p.MetaData).ToList()
            : new List<string>();
    }

    public static List<T> GetEnumeratesByMetaData<T>(string metadataDescription, string value)
    {
        return
            typeof (T).GetEnumValues().Cast<T>().Where(
                enumerate =>
                    GetValueFromMetaDataAttribute(enumerate, metadataDescription).Any(
                        p => p.ToLower() == value.ToLower())).ToList();
    }

    public static List<T> GetNotEnumeratesByMetaData<T>(string metadataDescription, string value)
    {
        return
            typeof (T).GetEnumValues().Cast<T>().Where(
                enumerate =>
                    GetValueFromMetaDataAttribute(enumerate, metadataDescription).All(
                        p => p.ToLower() != value.ToLower())).ToList();
    }

} 
```

然后你可以做类似的事情

```
var enumerates = MetadataHelper.GetEnumeratesByMetaData<Age>("Value", "New_Born"); 
```

为了完整起见，这里是属性：

```
 [AttributeUsage(AttributeTargets.Field, Inherited = false, AllowMultiple = true)]
public class MetadataAttribute : Attribute
{
    public MetadataAttribute(string description, string metaData = "")
    {
        Description = description;
        MetaData = metaData;
    }

    public string Description { get; set; }
    public string MetaData { get; set; }
} 
```

# c++ - XCode 上的 POSIX 线程添加

> ID：10804106
> 
> 赞同：-1
> 
> 时间：2012-05-29T17:45:33.207
> 
> 标签：c++, xcode, multithreading, parallel-processing, posix

程序应该从命令行获取参数，并通过 posix 线程添加参数。但是 Xcode 成功构建它，但没有输出。这段代码有问题吗。谢谢

```
#include <iostream>
#include <pthread.h>

using namespace std;

void *Add(void *threadid){
  long tid;
  tid =(long)threadid;
  long sum=0;
  sum=sum+tid;
  printf("%ld.\n",sum);
  pthread_exit(NULL);
}    

void *Print(void *threadid){
  long tid;
  tid =(long)threadid;

  printf("%ld.\n",tid);
  pthread_exit(NULL);
}   

int main (int argc, char const *argv[])
{
  if(argc<6){
    printf("you need more arguments");
    return -1;
  }

  long real[5];
  pthread_t athread,bthread;

  for (int x=1;x<=5;x++)
    real[x-1]=atol(argv[x]);

  for(int y=1;y<=5;y++)
    pthread_create(athread[y],NULL,Add,(void *)&real[y]);

  for(int y=1;y<=5;y++)
    pthread_create(bthread[y],NULL,Print,(void *)&real[y]);

  pthread_exit(NULL);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T21:04:43.597

首先，`printf`是定义在`stdio.h`而不是在`iostream`。如果您想以 C++ 方式使用`iostream`,`cout << "Blabla " << var << endl;`则应改为使用。

其次，你`pthread_create`用错误的论据打电话。正如定义的那样`athread`，`bthread`不是数组，但您可以这样使用它们。我不完全确定为什么这甚至会编译，因为`pthread_create`期望`pthread_t*`作为第一个参数并且您正在提供`*pthread_t`. 如果代码编译过，它很可能会在运行时崩溃。

第三，您没有加入加法器线程。这意味着您的打印线程可以在加法器线程完成之前启动。

第四，您正在对局部变量求和。你应该总结成一个全球性的。不要忘记通过互斥锁或其他东西保护对它的访问。

第五，线程例程的参数是错误的。您将指针传递给值而不是值本身，然后将指针重新解释为值本身。您很可能想要使用`(void *)real[y]`而不是`(void *)&real[y]`. 请注意，转换`long`为`void *`不适用于所有系统。在 Mac OS X上`long`，两者`void *`的长度相同（32 位或 64 位），但通常情况并非如此。

编辑：您的代码甚至无法在 OS X 上编译：

```
$ g++ -o t.x t.cpp
t.cpp: In function ‘int main(int, const char**)’:
t.cpp:37: error: cannot convert ‘_opaque_pthread_t’ to ‘_opaque_pthread_t**’ for argument ‘1’ to ‘int pthread_create(_opaque_pthread_t**, const pthread_attr_t*, void* (*)(void*), void*)’
t.cpp:40: error: cannot convert ‘_opaque_pthread_t’ to ‘_opaque_pthread_t**’ for argument ‘1’ to ‘int pthread_create(_opaque_pthread_t**, const pthread_attr_t*, void* (*)(void*), void*)’

$ clang -o t.x t.cpp
t.cpp:37:5: error: no matching function for call to 'pthread_create'
    pthread_create(athread[y],NULL,Add,(void *)&real[y]);
    ^~~~~~~~~~~~~~
/usr/include/pthread.h:304:11: note: candidate function not viable: no known
      conversion from 'struct _opaque_pthread_t' to 'pthread_t *' (aka
      '_opaque_pthread_t **') for 1st argument;
int       pthread_create(pthread_t * __restrict,
          ^
t.cpp:40:5: error: no matching function for call to 'pthread_create'
    pthread_create(bthread[y],NULL,Print,(void *)&real[y]);
    ^~~~~~~~~~~~~~
/usr/include/pthread.h:304:11: note: candidate function not viable: no known
      conversion from 'struct _opaque_pthread_t' to 'pthread_t *' (aka
      '_opaque_pthread_t **') for 1st argument;
int       pthread_create(pthread_t * __restrict,
          ^
2 errors generated. 
```

您甚至没有看到 XCode 提供的错误消息吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T18:12:08.563

首先，我认为您应该检查 pthread_create 方法是否成功。我在 Apple 下的 pthread 方面没有经验，但基于该代码，我认为您在创建线程时遇到问题。

# c++ - 在 iqxmlrpc 中使用 HTTPS 时的默认压缩？

> ID：10804107
> 
> 赞同：0
> 
> 时间：2012-05-29T17:45:33.350
> 
> 标签：c++, http, https, xml-rpc

我使用 iqxmlrpc 作为我的 xml-rpc 库。我实现了一个简单的测试（一个提供“sum”方法的服务器和一个调用它一百次的客户端）并测量了 HTTP 和 HTTPS 使用的带宽（使用 tcpdump）。虽然 HTTP 使用了大约 60KB，但 HTTPS 仅使用了 20KB - 在 HTTPS 上使用 iqxmlrpc 时是否有任何默认压缩？

注意：只建立了一个连接，因为我使用“keep-alive”HTTP 选项。如果我不使用它，HTTP 使用大约 600 字节/调用，而 HTTPS 使用大约 2KB/调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T19:11:14.900

是的，iqxmlrpc 在使用 HTTPS 时使用“默认压缩”模式。根据[Mike](http://www.belshe.com/2010/11/18/ssl-compression-and-you/)的说法，这可以通过查看来自 SSL 客户端的“Client Hello”消息，通过查看“Compression methods”字段来检查数据包捕获。正如我可以验证的，这对于 iqxmlrpc 是正确的：

![iqxmlrpc 数据包捕获：](../Images/0f5fc5cb572e12283f0e051bd22cc946.png)

为了（额外）确定，我还检查了“Server Hello”消息：

![iqxmlrpc 数据包捕获：](../Images/fdbc00fbd83020477d1982513310b955.png)

确实如此：压缩的 DEFLATE 方法:)

# weka - 如何从 .t xt 创建 .arff 文件？

> ID：10804118
> 
> 赞同：4
> 
> 时间：2012-05-29T17:46:33.813
> 
> 标签：weka, arff

有什么简单的方法可以做到这一点吗？我不是Java，我是Python新手，所以我需要另一种方式。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T02:31:27.923

您可能是指以`csv`结尾的文件`.txt`吗？如果文件内的数据如下所示：

```
1,434,2236,5,569,some,value,other,value
4,347,2351,1,232,different,value,than,those 
```

然后它有逗号分隔值 (csv)，Weka 有将 csv 文件转换为 arff 的类和函数：[http](http://weka.wikispaces.com/Converting+CSV+to+ARFF) ://weka.wikispaces.com/Converting+CSV+to+ARFF您可以从命令行使用这些，像这样：

```
java weka.core.converters.CSVLoader filename.csv > filename.arff 
```

否则，@D3mon-1stVFW 的评论链接到来自 weka 的关于将文本文件（例如博客文章或书籍或论文）转换为 arff 格式的优秀文档。[http://weka.wikispaces.com/ARFF+files+from+Text+Collections](http://weka.wikispaces.com/ARFF+files+from+Text+Collections)也可以从命令行调用，如下所示：

```
java weka.core.converters.TextDirectoryLoader /directory/with/your/text/files > output.arff 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-28T09:35:21.730

缺少 -dir 参数说明符： `java weka.core.converters.TextDirectoryLoader -dir /directory/with/your/text/files > output.arff`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-08T07:27:04.153

此解决方案假定您拥有 .csv 格式的数据 - 请参阅 kaz 的解决方案。

一种简单的方法是在版本 3.6.11（我在 Mac 上）是打开资源管理器，然后在“预处理”选项卡中选择“打开文件...”，就像你想要打开一样.arff 文件。然后在对话框底部询问文件格式的位置，将其更改为 .csv。您现在可以将 CSV 文件直接加载到 Weka。如果 CSV 文件的第一行是标题行，则这些名称将用作属性名称。

Preprocesses 选项卡的右侧是一个“Save...”按钮。您可以单击它并将数据保存为 .arff 文件。

这解释起来有点啰嗦，但执行起来只需要几分钟，而且非常直观。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-12-15T13:07:30.940

包 WekaDemo；

公共类 Txt2Arff {

```
 static ArrayList inList=new ArrayList();
    static String colNames[];
    static String colTypes[];
    static String indata[][];
    static ArrayList clsList=new ArrayList();
    static ArrayList disCls=new ArrayList();

    static  String res="";

 public String genTrain()
    {File fe=new File("input2.txt"); 

     FileInputStream fis=new FileInputStream(fe);
     byte bt[]=new byte[fis.available()];
     fis.read(bt);
     fis.close();
     String st=new String(bt);
     String s1[]=st.trim().split("\n");
     String col[]=s1[0].trim().split("\t");
     colNames=col;
     colTypes=s1[1].trim().split("\t");

     for(int i=2;i<s1.length;i++)
     {
         inList.add(s1[i]);

     }
     ArrayList at1=new ArrayList();
     for(int i=0;i<inList.size();i++)
     {
         String g1=inList.get(i).toString();
         if(!g1.contains("?"))
         {
             at1.add(g1);
             res=res+g1+"\n";
         }
     }
     indata=new String[at1.size()][colNames.length-1];  // remove cls

     for(int i=0;i<at1.size();i++)
     {
         String s2[]=at1.get(i).toString().trim().split("\t");
         for(int j=0;j<s2.length-1;j++)
         {
             indata[i][j]=s2[j].trim();                    
         }
         if(!disCls.contains(s2[s2.length-1].trim()))
             disCls.add(s2[s2.length-1].trim());
         clsList.add(s2[s2.length-1]);
     }
        String ar="@relation tra\n";
        try
        {

 for(int i=0;i<colNames.length-1;i++) // all columName which you have split  
  //and store in Colname
            {
          //where yor attitude in nominal or you can say character value
                if(colTypes[i].equals("con"))
         ar=ar+"@attribute "+colNames[i].trim().replace(" ","_")+" real\n";
                else
                {
                    ArrayList at1=new ArrayList();
                    for(int j=0;j<indata.length;j++) //your all numeric data
                    {
                        if(!at1.contains(indata[j][i].trim()))
                            at1.add(indata[j][i].trim());
                    }
                    String sg1="{";
                    for(int j=0;j<at1.size();j++)
                    {
                        sg1=sg1+at1.get(j).toString().trim()+",";
                    }
                    sg1=sg1.substring(0,sg1.lastIndexOf(","));
                    sg1=sg1+"}";

     ar=ar+"@attribute "+colNames[i].trim().replace(" ", "_")+" "+sg1+"\n";
                }
            }

            //end of attribute

            // now adding a class Attribute 

            ArrayList dis=new ArrayList();
            String c1="";
            for(int i=0;i<clsList.size();i++)
            {
                String g=clsList.get(i).toString().trim();
                if(!dis.contains(g))
                {
                    dis.add(g);
                    c1=c1+g+",";
                }
            }
            c1=c1.substring(0, c1.lastIndexOf(","));
            ar=ar+"@attribute class {"+c1+"}\n"; //attribute name 
            //adding class attribute is done 
            //now data
            ar=ar+"@data\n";

            for(int i=0;i<indata.length;i++)
            {
                String g1="";
                for(int j=0;j<indata[0].length;j++)
                {
                    g1=g1+indata[i][j]+",";
                }
                g1=g1+clsList.get(i);
                ar=ar+g1+"\n";
            }                   
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
        return ar;
    }

    public static void main(String[] args) throws IOException {
    // TODO Auto-generated method stub
    Txt2Arff T2A=new Txt2Arff();

    String ar1=T2A.genTrain();

    File fe1=new File("tr.arff");
    FileOutputStream fos1=new FileOutputStream(fe1);
    fos1.write(ar1.getBytes());
    fos1.close();
}} 
```

# exception - 导致堆栈异常（x86）

> ID：10804123
> 
> 赞同：0
> 
> 时间：2012-05-29T17:47:18.607
> 
> 标签：exception, x86, stack

我正在尝试编写汇编代码以导致堆栈异常，但到目前为止我还没有运气。根据 AT&T 程序员手册，堆栈异常是由以下原因之一引起的：

• 堆栈地址不是规范形式的隐含堆栈引用。隐含的堆栈引用包括所有推送和弹出指令，以及使用 RSP 或 RBP 作为基址寄存器的任何指令。• 尝试加载一个堆栈段选择器，该选择器引用一个包含清除存在位（descriptor.P=0）的段描述符。• 任何未通过堆栈限制检查的堆栈访问。

我选择了第一种方法；我正在尝试使用以下代码以非规范形式加载 rsp：

```
asm volatile("mov $0xAAAAAAAA00000000, %%rax;"
                    "orq %%rax, %%rsp;"
                    "push %%rax;" : : : ); 
```

GDB 只是说了一些关于无法解决内存的问题，并且一切都中断了，而不是异常。有没有人有任何想法？如果没有，有人知道我如何使用第三个条件导致异常吗？我不知道“堆栈限制检查失败”是什么意思。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:05:31.687

```
 asm(
    "\n"
    "MYLOOP:\n\t"
    "pushq %rbp\n\t"
    //"popq %rbp\n\t"
    "jmp MYLOOP\n\t"
    ); 
```

简单的堆栈溢出。取消注释 popq 指令以使无限堆栈推入/弹出循环消耗 100% 的一个 cpu 内核。

# c# - 如何使用 clearcanvas 访问 DICOM 序列的所有内容

> ID：10804130
> 
> 赞同：2
> 
> 时间：2012-05-29T17:47:27.840
> 
> 标签：c#, .net, sequence, dicom, clearcanvas

目前我正在构建一个可以处理 DICOM 文件的小型桌面应用程序。我正在使用 C# 和 .NET 进行编码并使用 ClearCanvas 库。我需要做的一件事是能够显示文件的全部内容，包括所有序列。但是序列是以递归的方式完成的，所以每个序列里面可以有更多的序列。现在我的代码可以访问前两个级别，但我只是作为测试人员这样做，因为我需要能够访问第 n 级序列。所以我需要以某种方式自动化这个。这就是我的代码现在前两个级别的样子。

```
DicomSequenceItem[] seq = attrs2[i].Values as DicomSequenceItem[];
if (seq != null)
{
for (int j = 0; j < seq.Length; j++)
{
      for (int n = 0; n < seq[j].Count; n++)
      {
           DicomSequenceItem[] level2 = seq[j].ElementAt(n).Values as DicomSequenceItem[];
           if(seq[j].ElementAt(n).GetValueType().ToString().Equals("ClearCanvas.Dicom.DicomSequenceItem"))
           {               
                for (int k = 0; k < level2.Length; k++)
                {
                     for (int l = 0; l < level2[k].Count; l++)
                     {
                          text += "\t\t" + level2[k].ElementAt(l) + "\r\n";
                     }
                }
            }
            else
            {
                text += "\t" + seq[j].ElementAt(n) + "\r\n";
            }
       }
}
} 
```

任何帮助（代码示例）将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T18:45:47.733

这是一个简单的递归例程，用于遍历属性集合中的标签，包括递归地遍历集合中可能存在的任何 Sequence 元素：

```
 void Dump(DicomAttributeCollection collection, string prefix, StringBuilder sb)
    {     
        foreach (DicomAttribute attribute in collection)
        {
            var attribSQ = attribute as DicomAttributeSQ;
            if (attribSQ != null)
            {                    
                for (int i=0; i< attribSQ.Count; i++) 
                {
                    sb.AppendLine(prefix + "SQ Item: " + attribSQ.ToString());

                    DicomSequenceItem sqItem = attribSQ[i];
                    Dump(sqItem, prefix + "\t", sb);
                }
            }
            else
            {
                sb.AppendLine(prefix + attribute.ToString());
            }
        }
    } 
```

DicomAttributeCollection 是可枚举的，因此您可以使用 foreach 循环遍历集合中的所有属性。属性本身存储在 SortedDictionary 中，因此在枚举时它们也将按标签升序排列。

请注意，如果您下载了 ClearCanvas 库的源代码，您还可以查看属于 DicomAttributeCollection 类的真实 Dump() 方法。它遍历一个集合并将集合中的所有标签写入一个 StringBuilder 实例。

# javascript - Google 文档 - 自动填充实时表单

> ID：10804135
> 
> 赞同：0
> 
> 时间：2012-05-29T17:47:43.330
> 
> 标签：javascript, google-docs, google-docs-api

我有一个托管事件的网页（例如：[http](http://www.mysite.com/test/events/5493.html) ://www.mysite.com/test/events/5493.html ）该页面包含事件标题和其他信息等信息，使用谷歌文档我创建了一个表单填写我的电子表格（调查）

问题是我如何从“5493.html”获取事件信息并自动填充我在谷歌文档表单（实时表单）上设置的字段

事件名称：[从“5493”页面自动填充]

事件日期：[从“5493”页面自动填充]

请评价：

问题：

问题

[提交按钮]

我想要做的是发送链接（实时表单链接），当其他人想要填写 googel 调查表时，这两个字段会自动填充以避免拼写错误。

我知道有一种手动修改链接的方法但是有没有自动选项？？？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T23:10:12.537

看起来谷歌文档现在支持它。请参阅：[https ://support.google.com/docs/bin/answer.py?hl=en&answer=160000](https://support.google.com/docs/bin/answer.py?hl=en&answer=160000)

# python - 在没有模板的情况下将 Haystack 记录放在一起

> ID：10804137
> 
> 赞同：2
> 
> 时间：2012-05-29T17:47:51.553
> 
> 标签：python, django, django-haystack

haystack 文档（下面的链接）做出了这样的声明：

> 此外，我们在文本字段中提供 use_template=True 。这允许我们使用数据模板（而不是容易出错的连接）来构建搜索引擎将在搜索中使用的文档。

如何使用串联来构建文档？我找不到一个例子。

它可能与覆盖准备方法有关（第二个链接）。但是在文档中给出的示例中，prepare 方法与模板一起使用，因此两者也可能是正交的。

[https://github.com/toastdriven/django-haystack/blob/master/docs/tutorial.rst](https://github.com/toastdriven/django-haystack/blob/master/docs/tutorial.rst)

[http://django-haystack.readthedocs.org/en/latest/searchindex_api.html#advanced-data-preparation](http://django-haystack.readthedocs.org/en/latest/searchindex_api.html#advanced-data-preparation)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:09:48.973

[您可以在Haystack 源代码](https://github.com/toastdriven/django-haystack/blob/master/haystack/fields.py#L72)中看到它是如何工作的。基本上，`prepare`方法的默认实现`SearchField`（Haystack 字段的基类）调用`prepare_template`if`use_template`为 True。

如果您不想使用模板，您确实可以使用连接 - 它就像将您想要的数据连接在一起一样简单，用一些东西分隔（这里我使用了换行符）：

```
def prepare_myfield(self, obj):
    return self.cleaned_data['field1'] + '\n' + self.cleaned_data['field2'] 
```

等等

# c# - 字典中键的多个选项？

> ID：10804141
> 
> 赞同：2
> 
> 时间：2012-05-29T17:48:36.300
> 
> 标签：c#, .net, dictionary

一半的时间我需要根据字符串，他们的名字来找到一个值，而另一半我需要根据一个 int，他们的用户 ID 来找到一个值。

目前我有两个字典来解决这个难题——一个使用字符串作为键，一个使用 int 作为键。我想知道是否有更有效的方法来做到这一点 - 一种基于 int**或**string 获取值的方法。

```
 public static Dictionary<int, Player> nPlayers = new Dictionary<int, Player>();
    public static Dictionary<string, Player> sPlayers = new Dictionary<string, Player>(); 
```

在扫描了其他问题后，有人提到使用字典。如果有人可以详细说明这一点（如果这是我正在寻找的解决方案），那就太好了

我对元组知之甚少，但据我所知，它**需要**两个键，而我正在寻找的需要一个或另一个。

会`Dictionary<object, Player>`做的伎俩？我不知道。

请在我狭隘的编码经验中帮助我。;_;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:52:38.083

我不认为拥有一个`Dictionary<object,Player>`比拥有两个不同的字典更好的主意。它可能会占用相同数量的内存（因为每个`Player`引用仍将在统一字典中存储两次），可能不太清晰，并且可能（可以想象）导致哈希码冲突问题，因为您的密钥可以是几种不同的类型。

我只会保留两本字典，`PlayersByName`and `PlayersByID`，并在适当的时候使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T17:52:57.630

您想知道将来放入 Dictionary 中的原始数据类型吗？如果没有，您有两种选择：

1.  **字符串输入**！- 只需使用 a`string`作为键，添加时，调用`.ToString()`整数 :)

2.  **Be `object`ive** - 使用 an`object`作为键，这样你就可以在里面放任何你喜欢的东西。

基于 2，我推荐第一个，因为你仍然有某种类型的限制。

**如果您确实想知道将来的原始数据类型**- 您的实现很好:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T17:54:25.967

您的解决方案（2 个字典）是正确的。字典只能由一个稳定键索引。因此，您必须保留单独的字典以按不同的键进行索引。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T18:27:41.610

根据您在用户登录系统时的评论，您将它们添加到字典中，在这里您必须将它们添加到两个字典中。

我认为你可以用另一种方式做到这一点，

```
 public static List<Player> nPlayers = new List<Player>(); 
```

这只是你需要的，在他们登录时添加玩家。

如果您想通过 ID、Name 或任何您可以查询 nPlayers 并找到 Player 的内容进行搜索。

```
 var playerByID = nPlayers.Where(p= p.ID==givenID).FirstOrDefault();

 var playerByName = nPlayers.Where(p= p.Name==givenName).FirstOrDefault(); 
```

# android - 通过 C API 进行 FFMpeg 解码设置？

> ID：10804142
> 
> 赞同：1
> 
> 时间：2012-05-29T17:48:36.470
> 
> 标签：android, linux, ffmpeg

有谁知道通过 FFMpeg C API 进行的任何解码设置？由于某种原因，更新后解码视频的质量下降了。

通过后处理过滤器还是简单地解码选项？

任何人？

# javascript - 向表中添加行：字符串文字问题

> ID：10804144
> 
> 赞同：0
> 
> 时间：2012-05-29T17:48:42.657
> 
> 标签：javascript, jquery, html-table

这是我用于向表中添加新行的代码的一部分。我在编译与最后两个 TD 元素相关的代码时遇到问题。字符串文字总是存在错误。请帮我弄清楚。

```
$( "#content tbody" ).append( "<tr>" +
        "<td>" + opr.val() + "</td>" + 
        "<td>" + flightNum.val() + "</td>" + 
        "<td>" + from_f.val() + "</td>" +
        "<td id=" + flightNum.val() + " class='edit_but'>
          <div>
             <img src='images/edit.png' alt='Edit' />
          </div>
        </td>" +
        "<td id=" + flightNum.val() + " class='deact_but' onclick="deactivateRow('+flightNum.val()+')">
          <div>
             <img src='images/delete.png' alt='Deactivate' />
          </div>        
        </td>"  + "</tr>" ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:53:10.083

```
$( "#content tbody" ).append( "<tr><td>" + opr.val() + "</td><td>" + flightNum.val() + "</td><td>" + from_f.val() + "</td><td id=" + flightNum.val() + " class='edit_but'><div><img src='images/edit.png' alt='Edit' /></div></td><td id=" + flightNum.val() + " class='deact_but' onclick='deactivateRow(" + flightNum.val() + ")'><div><img src='images/delete.png' alt='Deactivate' /></div></td></tr>" ); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-29T17:54:32.957

你的代码是一团糟！有很多引号（`"`）丢失，字符串连接（`+`）丢失！

经过**大量**修复：

```
$( "#content tbody" ).append( "<tr>" +
        "<td>" + opr.val() + "</td>" + 
        "<td>" + flightNum.val() + "</td>" + 
        "<td>" + from_f.val() + "</td>" +
        "<td id=" + flightNum.val() + " class='edit_but'>" +
          "<div>" +
             "<img src='images/edit.png' alt='Edit' />" +
          "</div>" +
        "</td>" +
        "<td id=" + flightNum.val() + " class='deact_but' onclick='deactivateRow('" +flightNum.val()+")'>"  +
          "<div>" +
             "<img src='images/delete.png' alt='Deactivate' />" +
          "</div>"  +
        "</td></tr>" );​​​​​​​​​​​ 
```

# eclipse-plugin - 用于 Firefox 附加组件开发的 IDE

> ID：10804147
> 
> 赞同：9
> 
> 时间：2012-05-29T17:48:57.527
> 
> 标签：eclipse-plugin, firefox-addon, xul, firefox-addon-sdk

我从事 Firefox 附加组件工作已经有很长一段时间了，使用 notpad++ 进行开发真的很让人头疼。是否有任何适合 Eclipse 的 IDE 或插件可用。就像我们为动态 Web 项目执行“在服务器上运行”一样，有什么方法可以更改任何 sorce 文件并自动创建.xpi 文件并安装在 Firefox 中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T04:10:04.907

有许多编辑器或 IDE 可以轻松地与 SDK 集成以执行基本任务，例如运行 cfx run 或 cfx xpi。这是我使用的系统：

1.  我在 Firefox 中安装了Wladimir Palant 的[“扩展自动安装程序”](https://addons.mozilla.org/en-US/firefox/addon/autoinstaller/)

2.  我在插件的根目录中有一个这样的脚本：

```
#!/bin/bash
/path/to/cfx xpi && wget --post-file=filename.xpi http://127.0.0.1:8888/ 
```

每次我想测试插件时，我只需运行脚本，xpi 就会构建并安装到 Firefox 中。大多数编辑器都具有将这样的 sh 命令绑定到键绑定的能力。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T11:06:09.270

每次进行更改时，您并不真的需要 IDE 来创建 XPI。

*   使用插件的源代码创建一个文件夹（例如 C://addons/myaddon/）。
*   将包含此路径的文件放入包含您的 Firefox 插件的文件夹中，并将其命名为与您的插件 ID 相同的名称（例如 myaddon@domain.com）。
*   在您的 install.rdf 文件中，添加以下行：`<em:unpack>true</em:unpack>`

这样您就可以在想要查看更改时重新启动 Firefox。我推荐这个插件，它增加了快捷键 Ctrl+Alt+R 用于快速重启 Firefox（一定要获取 0.6b2 版本，之前的版本不支持快捷键）： [https ://addons.mozilla.org /firefox/downloads/file/121516/restart_firefox-0.6b2-fx.xpi?src=dp-btn-devchannel](https://addons.mozilla.org/firefox/downloads/file/121516/restart_firefox-0.6b2-fx.xpi?src=dp-btn-devchannel)

此外，如果您在测试时卸载插件，也不会丢失源代码（当您直接在 Firefox 插件文件夹中开发时会发生这种情况）。

对于 IDE，对我个人而言，任何具有 XML 和 JS 语法高亮的编辑器都可以正常工作。我个人最喜欢的是[Aptana](http://www.aptana.org/)（基于 Eclipse 的 IDE）和[Intype](http://inotai.com/intype/)（轻量级且速度极快）。

# php - 在无向图中查找路径

> ID：10804148
> 
> 赞同：9
> 
> 时间：2012-05-29T17:48:59.553
> 
> 标签：php, algorithm, graph, graph-algorithm

考虑下图：

![虚拟图](../Images/d58f112ac12e0cfc4db95b0ce104cc63.png)

由以下数组结构表示：

```
$graph = array
(
    'a' => array(),
    'b' => array('a'),
    'c' => array('a', 'b'),
    'd' => array('a'),
    'e' => array('d'),
    'f' => array('a', 'b', 'c', 'd'),
    'g' => array('d'),
    'h' => array('c'),
    'i' => array('c', 'g'),
    'j' => array(),
); 
```

*在不重复节点的情况下，找到从节点 X 到节点 Y 在任一方向上的**所有*路径（不仅仅是最短路径）的最有效算法是什么？例如，从一个节点到另一个节点的路径是：*`C``A`*

 *```
C --> A
C --> B --> A
C --> F --> A
C --> F --> B --> A
C --> F --> D --> A
C --> I --> G --> D --> A 
```

使用 node 的父节点`X`（`A`和`B`，在 node 的示例中`C`）查找所有路径是微不足道的，但是我很难在后代/混合方向上遍历节点。

有人可以帮我吗？

* * *

**更新**：根据@JackManey 的建议，我尝试基于 Wikipedia 伪代码移植[IDDFS](http://en.wikipedia.org/wiki/Iterative_deepening_depth-first_search)（迭代深化深度优先搜索），这或多或少是我的代码的样子：

```
$graph = directed2Undirected($graph);

function IDDFS($root, $goal) {
    $depth = 0;

    while ($depth <= 2) { // 2 is hard-coded for now
        $result = DLS($root, $goal, $depth);

        if ($result !== false) {
            return $result;
        }

        $depth++;
    }
}

function DLS($node, $goal, $depth) {
    global $graph;

    if (($depth >= 0) && ($node == $goal)) {
        return $node;
    }

    else if ($depth > 0) {
        foreach (expand($node, $graph) as $child) {
            return DLS($child, $goal, $depth - 1);
        }
    }

    else {
        return false;
    }
} 
```

以下是它使用的辅助函数：

```
function directed2Undirected($data) {
    foreach ($data as $key => $values) {
        foreach ($values as $value) {
            $data[$value][] = $key;
        }
    }

    return $data;
}

function expand($id, $data, $depth = 0) {
    while (--$depth >= 0) {
        $id = flatten(array_intersect_key($data, array_flip((array) $id)));
    }

    return array_unique(flatten(array_intersect_key($data, array_flip((array) $id))));
}

function flatten($data) {
    $result = array();

    if (is_array($data) === true) {
        foreach (new RecursiveIteratorIterator(new RecursiveArrayIterator($data)) as $value) {
            $result[] = $value;
        }
    }

    return $result;
} 
```

调用上述方法会产生奇怪或不完整的结果：

```
var_dump(IDDFS('c', 'a')); // a -- only 1 path?
var_dump(IDDFS('c', 'd')); // NULL -- can't find this path?! 
```

我想我从伪代码中忽略了一些东西，但我不确定它是什么。

* * *

我还尝试了另一个问题中推荐的[这个 DFS 类](http://mirkules.com/blog/?p=20)，虽然它似乎总是找到从节点 X 到节点 Y 的*一条*路径，但我无法让它返回所有路径（[`C`->`A`](http://codepad.org/SMnt87yi)和[`C`->`D`](http://codepad.org/opySDEmm)的演示）。

* * *

由于我不需要知道实际采用的路径，只*存在多少需要从节点 X 到节点 Y`n`的步骤数的*路径，我想出了这个函数（`directed2Undirected`上面使用）：

```
$graph = directed2Undirected($graph);

function Distance($node, $graph, $depth = 0) {
    $result = array();

    if (array_key_exists($node, $graph) === true) {
        $result = array_fill_keys(array_keys($graph), 0);

        foreach (expand($node, $graph, $depth - 1) as $child) {
            if (strcmp($node, $child) !== 0) {
                $result[$child] += $depth;
            }
        }

        $result[$node] = -1;
    }

    return $result;
}

function expand($id, $data, $depth = 0) {
    while (--$depth >= 0) {
        $id = flatten(array_intersect_key($data, array_flip((array) $id)));
    }

    // no array_unique() now!
    return flatten(array_intersect_key($data, array_flip((array) $id)));
} 
```

对于[`Distance('c', $graph, 0)`](http://codepad.org/GlJhDMFy)，这将正确返回[`Distance('c', $graph, 1)`](http://codepad.org/8zsGX4tq)与任何其他节点[`Distance('c', $graph, 2)`](http://codepad.org/1QQk7xyR)之间的距离之和。`C`问题是，使用[`Distance('c', $graph, 3)`](http://codepad.org/kQmlTCBD)([和](http://codepad.org/txwMMNaL) [更高](http://codepad.org/FLmgZJfN)) 它开始重复节点并返回错误的结果：

```
Array
(
    [a] => 12
    [b] => 9
    [c] => -1
    [d] => 9
    [e] => 3
    [f] => 12
    [g] => 3
    [h] => 3
    [i] => 6
    [j] => 0
) 
```

索引`a`应该只有 6 (3 + 3)，因为我可以使用 3 个步骤的唯一方法`C`是`A`：

```
C --> F --> B --> A
C --> F --> D --> A 
```

然而，它似乎正在考虑***两个***（仅？）重复节点的附加路径：

```
C --> A --> C --> A
C --> B --> C --> A
C --> F --> C --> A
C --> H --> C --> A
C --> I --> C --> A 
```

当然，索引`a`不是唯一错误的。问题似乎是，`expand()`但我不知道如何修复它，`array_diff(expand('c', $graph, $i), expand('c', $graph, $i - 2))`似乎修复了这个特定的错误，但这不是一个正确的修复......帮助？

* * *

![再次虚拟图](../Images/d58f112ac12e0cfc4db95b0ce104cc63.png) [^(再次，所以你不必滚动)]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:53:08.253

通常，您可以进行[深度优先搜索](http://en.wikipedia.org/wiki/Depth-first_search)或[广度优先搜索](http://en.wikipedia.org/wiki/Breadth-first_search)，尽管两者都不优于另一个（因为很容易找到一个优于另一个的示例）。

**编辑：** 重新阅读问题并稍微思考后，由于您想要从 to 的所有路径，因此从`C`开始`A`的 DFS`C`可能最有意义。在此过程中，您必须存储边序列并丢弃序列，如果它们不以`A`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-28T05:11:08.137

$stdin = fopen('php://stdin','r'); $stdin = fopen('php://stdin','w');

```
fscanf(STDIN,"%d\n",$n);
fscanf(STDIN,"%d\n",$e);
$graph = array();

for ($i = 0;$i<$n; $i++)
{
    $graph[$i] = array();
}

for ($i = 0;$i<$e; $i++)
{
    fscanf(STDIN,"%s%s",$x,$y);
    $row = ord($x[0]) - ord('A');
    $row = ord($y[0]) - ord('A');
    echo $row." ".$col;

    $graph[$row][$col] = 1;
    $graph[$col][$row] = 1;
}

for ($i = 0;$i <$n; $i++)
{
    for ($j= 0;$j<$n ;$j++)
    {
      if ($graph[$i][$j]==1)
      {
          echo"1 ";
      }
      else{
        echo"0 "; 
      }
      echo "\n";
    }
} 
```*

# svn - 追溯复制/合并

> ID：10804151
> 
> 赞同：8
> 
> 时间：2012-05-29T17:49:03.483
> 
> 标签：svn, merge

有时用户会使用 Windows 资源管理器复制文件并在他们应该执行 svn 存储库级别的复制或合并时提交它们。因此，SVN 没有正确跟踪这些变化。一旦我发现这一点，损坏显然已经完成，并且可能对相关文件进行了很多后续编辑。重要的是不要丢失这部分历史。当我发现这些情况发生时，我可以做些什么来追溯改进存储库中的内容？

具体来说，我有两种情况，具体取决于目标文件是否已经存在。在第一个场景中，(1) 用户执行了未记录为副本的添加。在第二种情况下，(2) 用户执行了未记录为合并的更新。

此外，源文件和目标文件都经历了也已提交的后续更新。有时，这些后续编辑也是手动对双方进行的，因此没有正确的合并信息。

可能性：可以手动将mergeinfo revprop 添加到过去的修订帮助中吗？如果是这样，我该怎么做？请考虑这两种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:28:00.407

以下是我能想到的场景以及如何解决它们（如果可能的话）：

1) 文件已被复制并已提交修改（到其原始 URL）

1a) 如果分支还没有这些文件：

*   svn-将文件（或它们的封闭目录）复制到分支（这将保留它们的历史记录）
*   如果主干中的这些特定文件没有其他更改，请将这些文件/封闭目录的主干恢复为复制之前的修订版
*   如果这些文件的主干中有更改，您仍然可以通过执行反向合并来获取属于分支的更改：除非某些更改重叠，否则这应该会成功

1b）如果分支确实已经有这些文件：

*   svn-merge 主干的更改到分支
*   与 1a 中的主干考虑相同）

2）文件已被复制，已进行修改但尚未提交（到其原始 URL，因为副本没有更改）

*注意*：由于尚未提交修改，因此没有要保存的历史记录，也与主干无关

2a) 如果分支还没有这些文件：

*   制作复制错误的文件/目录的物理副本
*   从分支的工作副本中删除有问题的文件夹
*   将先前复制的文件/目录复制/移动到分支工作副本中的适当位置
*   将文件添加到分支

2b）如果分支确实已经有这些文件：

*   制作复制错误的文件/目录的物理副本
*   从分支的工作副本中删除有问题的文件夹
*   更新分支的工作副本
*   合并（*）先前复制的文件/目录与分支现在最新的工作副本中的对应文件
*   将文件添加到分支

(*) 对作业使用任何常规合并工具，例如 WinMerge

* * *

*更新*：在您编辑后，我更了解您的情况（以上假设在手动复制后，复制文件夹的 URL 仍指向主干）

您可以尝试`svn propset --revprop -r <revision> snv:mergeinfo <updated mergeinfo>`在分支上使用（除非被 pre-revprop-change 钩子阻止）来“修复”合并信息，但我相信您也必须“修复”所有后续修订的合并信息，因为 svn 使用此信息其运营（例如合并）；此外，由于后者，您必须*非常*小心更新的内容。

我认为，一个更好的选择是只更新不正确提交到分支的修订版的日志，以包括复制文件所引用的主干的修订版。这样，如果需要，信息是可用的，但不会有扰乱 svn 未来操作的风险。这种方法的最大缺点是，将分支合并回主干可能会产生一些必须解决的冲突（因为未更新合并信息）。执行此选项的命令是`svn propset --revprop -r <revision> svn:log <updated log message>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T20:02:39.223

我的解决方案不是技术性的。相反，我认为你必须教你的员工他们做错了什么，并告诉他们如何做对。没什么好生气的。有时人们（包括我自己）会做一些愚蠢的事情，因为他们没有意识到有更好的方法，或者因为他们还不了解更好的方法。

如果这真的反复出现，请注意错误和成功。在板上计算结果并使其成为游戏。不挑人。一段时间后，这个问题就会消失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T13:59:49.070

假设复制的文件没有添加到新位置，我的第一个想法是执行以下操作：

1.  备份当前移动的 WC 文件
2.  对#1 中的文件进行[**回购**移动](http://svnbook.red-bean.com/nightly/en/svn.ref.svn.c.move.html)（以保留历史记录）；
    *   `$ svn move -m "Move a file" [http://svn.red-bean.com/repos/foo.c](http://svn.red-bean.com/repos/foo.c) http://svn.red-bean.com/repos/blah/foo.c`
3.  `svn up`让 WC 排队
4.  确保文件已正确合并，如果未正确合并，请使用 #1 中的备份来同步文件。
5.  承诺并继续前进

# java - 返回通用对象

> ID：10804152
> 
> 赞同：0
> 
> 时间：2012-05-29T17:49:09.883
> 
> 标签：java, caching

我正在创建一个对象缓存。我在编写通用的方法返回类型（请参阅**getCachedCMSObject**）时遇到问题，因此我不必按照注释中的指示强制转换返回。我想我可以忍受它，但我宁愿使用泛型。

cachedCMSObject 是使用“异构集合”模式的单独对象，但我认为在这种情况下并不重要，并且与我的问题无关。

```
package util;

import java.util.Map;
import java.util.concurrent.ConcurrentHashMap;

public class CMSObjectCache {
    static Map<String, CMSObject> cachedCMSObject = new ConcurrentHashMap<String, CMSObject>();

    public static void putCachedCMSObject(String cmsKey, CMSObject cmsObject) {
        cachedCMSObject.put(cmsKey, cmsObject);
    }

    public static Object getCachedCMSObject(String objectKey, Class<?> clazz) {
        CMSObject c2 = cachedCMSObject.get(objectKey);
        return c2.getCMSObject(Integer.class);  // return generic type ?
    }

    public static void main(String[] args) {
        CMSObject cmsObject;

        // put object of type Integer with key "Int:3"
        putCachedCMSObject("Int:3", new CMSObject(Integer.class, 3));

        // Get that object from the cache
        Integer i3 = (Integer) getCachedCMSObject("Int:3", Integer.class);  // necessary? 
        System.out.println(i3);
    }
} 
```

这就是 CMSObject 的样子（来自 Bloch）。

```
package util;

import java.util.HashMap;
import java.util.Map;

public final class CMSObject {
    private Map<Class<?>, Object> cmsObject = new HashMap<Class<?>, Object>();

    public CMSObject() {
    }

    public <T> CMSObject(Class<T> type, T instance) {
        this.putCMSObject(type, instance);
    }

    public <T> void putCMSObject(Class<T> type, T instance) {
        if (type == null) {
            throw new NullPointerException("Type is null");
        }
        cmsObject.put(type, instance);
    }

    public <T> T getCMSObject(Class<T> type) {
        return type.cast(cmsObject.get(type));
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:54:42.303

您的问题尚不清楚，但我只能假设您正朝着这样的方向前进：

```
class CMSObject{
   public <T> T getCMSObject(Class<T> klass) {
       //...
   } 
} 
```

然后你的外部方法应该有点像

```
public static <T> T getCachedCMSObject(String objectKey, Class<T> clazz) {
    CMSObject c2 = cachedCMSObject.get(objectKey);
    return c2.getCMSObject(clazz);  // return generic type ?
} 
```

# c# - 如何在后台调用存储过程？

> ID：10804153
> 
> 赞同：2
> 
> 时间：2012-05-29T17:49:32.923
> 
> 标签：c#, asp.net, sql, ado.net

我有一个存储过程，大约需要 2-3 分钟才能完成它的执行。从 ado.net 我想让存储过程在后台执行。一旦我向存储过程发出请求，我就必须返回我的代码。谁可以帮我这个事 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:55:10.907

您应该调查[Threading](http://msdn.microsoft.com/en-us/library/aa645740%28VS.71%29.aspx)。简而言之，您创建一个调用存储过程的线程。当您启动线程时，它在后台运行。该线程可以有一个回调函数，该函数在线程完成时被调用。

[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)是一种创建线程的简单方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T17:53:50.347

考虑使用工作线程在后台调用中执行 sproc 调用。你想知道 sproc 调用的结果吗？如果这样做，则需要等待并加入正在执行 sproc 调用的工作线程。如果没有，您可以“解雇并忘记” - 但在这种情况下您可能不知道任何错误/异常。

[这](http://www.albahari.com/threading/part3.aspx)是乔·阿尔巴哈里 (Joe Albahari) 的一篇精彩文章，一个线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T18:07:25.633

您可以尝试使用反应式编程（Rx）

Rx 是 Microsoft 的新提案，用于简化异步调用以及其他很酷的功能

[http://msdn.microsoft.com/en-us/data/gg577609.aspx](http://msdn.microsoft.com/en-us/data/gg577609.aspx)

Nuget 包是：

[https://nuget.org/packages/Rx-Main/1.0.11226](https://nuget.org/packages/Rx-Main/1.0.11226)

它会是这样的：

```
 // here call the sp
    var o = Observable.Start(() => { Thread.Sleep(1000); });

    o.Subscribe(x => { Console.WriteLine("Operation done"); }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T18:18:04.723

你实际上有两个选择。正如其他人所提到的，一个非常合理的解决方案是在应用层做线程。一个线程启动存储过程并等待返回。

另一种是在数据库中做类似的事情。例如，SQL Server 提供了一种叫做异步队列的东西。您可以将代码发送到查询，然后由队列阅读器拾取并在后台运行。

在您的情况下，应用程序中的线程可能是一个很好的解决方案。我只是想提醒您注意排队的想法，以防您预计一个存储过程的工作负载可能会变得很多，并且您不想管理应用程序中的所有线程。

# jsf-2 - 通过 ui:param 传递的 bean 上的 commandLink actionListener 方法

> ID：10804156
> 
> 赞同：1
> 
> 时间：2012-05-29T17:49:50.520
> 
> 标签：jsf-2, primefaces, facelets

我将 JSF 2 与 PrimeFaces 一起使用，并且我的 facelet 具有调用通过 ui:param 传入的 bean 上的方法的 commandLinks（或 commandButtons）。

我的 facelet xhtml 期望`dialogBean`作为`ui:param`

```
 <h:panelGroup>

       <p:commandButton
           value="#{msgs.ok}"
           actionListener="#{dialogBean.okClicked}"
           process="#{dialogId}"
           update="#{dialogId}, #{externalIdsToUpdateOnOk}"
           styleClass="dialogBottomBtn"
        />

        <p:commandButton
            value="#{msgs.cancel}"
            actionListener="#{dialogBean.close}"
            process="@this"
            update="#{dialogId}"
            styleClass="dialogBottomBtn"
        />

   </h:panelGroup> 
```

facelet 是这样包含的：

```
<ui:include src="/faces/common/dialogButtons.xhtml">
    <ui:param name="dialogId" value="textBlockQuestionDialog" />
    <ui:param name="dialogBean" value="#{formEditor.textBlockQuestionDialog}" />
    <ui:param name="externalIdsToUpdateOnOk" value=":form:tree, :form:properties, :form:preview" />
</ui:include> 
```

它失败并出现此错误：

```
javax.el.PropertyNotFoundException: Target Unreachable, 
   identifier 'dialogBean' resolved to null 
```

我试过用定义为参数替换，没有任何 `#{dialogBean.close}`帮助`#{dialogBean['close']}`。`#{dialogBean[action]}``action`

`dialogBean` *`h:outputText`与类似的输出一起使用时*会*得到解决。此外，当我替换`actionListener`为`action`.*

 *有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T21:27:34.997

I think I found the answer.

Double-check that your `dialogBean` object's actionListener methods (`okClicked` etc.) take an `ActionEvent` parameter.

It seems like this parameter is required for beans passed by `ui:param`, but not others.

I suspect what's going on is something like this:

1.  check `dialogBean` parameter for method `okClicked(ActionEvent)`
2.  if not found, look for bean named `dialogBean` with method `okClicked(ActionEvent)`
3.  if not found, look for bean named `dialogBean` with method `okClicked()`

where the no-argument method is only used when the bean name directly matches, not indirectly matches via ui:param reference.*

# java - 为 webview 实现启动画面时出错

> ID：10804157
> 
> 赞同：2
> 
> 时间：2012-05-29T17:49:53.503
> 
> 标签：java, android, xml, webview

我正在尝试为我的 webview android 应用程序实现启动画面，以便在页面完全加载之前显示。[我在这里](https://stackoverflow.com/questions/9589365/splash-screen-while-loading-a-url-in-a-webview-in-android-app)使用了接受的答案中的代码，但遇到了一些我不知道如何解决的错误。我假设我错过了某种图书馆，但我不知道是什么。

我得到的错误是：

> 视图无法解析为变量
> 
> 错误：错误：找不到与给定名称匹配的资源（在'src'，值为@drawable/vert_loading'）

我得到视图错误的代码是：

```
webview = (WebView) findViewById(R.id.webview);
    webview.getSettings().setJavaScriptEnabled(true);
    webview.setWebViewClient(new WebViewClient() {
        @Override
        public void onPageFinished(WebView view, String url) {
            findViewById(R.id.imageLoading1).setVisibility(View.GONE);
            findViewById(R.id.webview).setVisibility(View.VISIBLE);
        }
    }); 
```

虽然我的布局 xml 文件是：

```
<ImageView
    android:id="@+id/imageLoading1"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent"
    android:visibility="visible"
    android:src="@drawable/vert_loading"
/> 
```

我的假设是我可能会丢失某种导入，但我不知道是哪一个。我有的是：

```
import android.app.Activity;
import android.os.Bundle;
import android.view.KeyEvent;
import android.webkit.WebView;
import android.webkit.WebViewClient; 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:56:03.690

从*File->New->Folder*在你的项目**res**中添加一个**drawable**文件夹 ，然后将你的 drawable放在 res->drawable 文件夹中。然后从**Project->Clean**清理您的项目。***`vert_loading`***

# c - 将 C99 代码转换为 C89

> ID：10804162
> 
> 赞同：10
> 
> 时间：2012-05-29T17:50:30.013
> 
> 标签：c, visual-c++, c99

如何将 c99 源代码自动转换为 c89？我想用Visual C++编译c99库，但是MSVC只支持c89。许多更改只是语法上的，例如结构初始化程序，您可以编写一个工具来自动“de-c99”代码。这个预处理器存在吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T17:06:41.913

基于 Clang 的源到源转换器：

[https://github.com/libav/c99-to-c89/](https://github.com/libav/c99-to-c89/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T18:02:56.620

商业[Comeau C/C++ 编译器](http://www.comeaucomputing.com/)可以做到这一点。

或者，使用适当的 C 编译器（例如，通过 MinGW、Pelles C、Intel 的 GCC 或 Clang）并链接生成的目标文件。但是，并非所有这些（尤其是 MinGW）都支持 Microsoft 的调试格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T17:59:42.400

你需要的是一个[程序转换系统](http://en.wikipedia.org/wiki/Program_transformation)。这样的工具读取源代码，构建编译器数据结构（例如[抽象语法树](http://en.wikipedia.org/wiki/Abstract_syntax_tree)，允许您在这些结构上应用（源到源）转换，然后可以从修改后的数据结构重新生成源。

您需要一个可以解析 C99 并转换为 C89 的软件。我们的[DMS Software Reengineering Toolkit](http://www.semanticdesigns.com/Products/DMS/DMSToolkit.html)可以使用其[C 前端](http://www.semanticdesigns.com/Products/FrontEnds/CFrontEnd.html)（它可以处理 C 的两种方言，包括 MSVC 89 以及 ObjectiveC）来做到这一点。如果你想这样做，有一个成熟的解析器是必要的。

许多人可能会建议您*只*需要一个 C99 解析器。实际上，这是不正确的。要对典型的计算机语言进行任何有趣的转换，您需要符号表数据、一些数据流等。有关更多详细信息，请参阅我关于[解析后的生活](http://www.semanticdesigns.com/Products/DMS/LifeAfterParsing.html)的文章，以及 DMS 如何提供这种生活。

其中一个方面是您如何编码替换结构初始化程序。您可以通过遍历 C99 AST、找到此类结构初始化程序并在程序上破解树的自定义代码来做到这一点。是的，这行得通，但这并不容易，您必须大量了解树的结构。DMS 提供源到源的重写，因此您可以编写识别您想要修改的习语的模式，以及生成生成习语的模式，所有这些都使用 C 表面语法。

# java - 在一个简单的java游戏中设置背景图像

> ID：10804177
> 
> 赞同：0
> 
> 时间：2012-05-29T17:51:32.197
> 
> 标签：java, image, background

我正在制作我的第一个简单游戏，它看起来像 Space Invaders。

我用颜料在我的 JPanel 上画了我的英雄。现在我想是否有可能以一种简单的方式在我的 JPanel 上添加背景图像。

```
ImageIcon img = new ImageIcon(this.getClass().getResource("back.gif"));
Image image = img.getImage();
setDoubleBuffered(true);    
hero = new Hero("hbarrel.gif",350,500); 

public void paint(Graphics g) {
    super.paint(g);
    Graphics2D g2d = (Graphics2D)g;
    g2d.drawImage(hero.getImage(), hero.getX(), hero.getY(), this);
    g2d.drawImage(image,0,0,this);
    // Toolkit.getDefaultToolkit().sync();
    g.dispose();
} 
```

所以，就是这样：我尝试使用我的背景图像作为英雄图像，它有效！但是当我使用上面的代码时，它只会绘制我的英雄 img.... 所以这不是资源位置问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:52:59.910

覆盖`paintComponent(Graphics)`方法并用于`Graphics.drawImage()`在您自己的自定义组件中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T17:54:07.257

好吧，尝试先绘制背景图像，然后绘制英雄，这样你的英雄就在背景图像之上

# file - 如何在不使用 Windows 命令行覆盖的情况下将内容附加到现有日志文件？

> ID：10804178
> 
> 赞同：1
> 
> 时间：2012-05-29T17:51:39.253
> 
> 标签：file, logging, cmd, append, nant

我有一个批处理文件，我想从两个或多个构建文件追加到同一个日志文件，而不覆盖。我打算写如下内容：

```
SET logdir=C:\Logs\BuildLogFile.txt
NAnt -buildfile:ServiceProxies.build > %logdir% 

SET logdir=C:\Logs\BuildLogFile.txt
NAnt -buildfile:SecurityService.build > %logdir% 
```

但是txt文件被覆盖了。有什么方法可以附加到同一个 .txt 文件，因为我想为整个项目使用单个日志文件？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-29T18:08:21.457

用于`>>`追加，而不是`>`.

# javascript - 基于 id/class 的选择器 v/s 基于表单的选择器

> ID：10804185
> 
> 赞同：0
> 
> 时间：2012-05-29T17:52:04.707
> 
> 标签：javascript, jquery, class, selector

给定以下 HTML：

```
<fieldset>
    <legend>
        <input type="checkbox" name="amazon_activated" /> 
    </legend>
    <table>
        <tr>
            <td>
                Amazon Data
            </td>
        </tr>
    </table>
</fieldset> 
```

下一个代码允许隐藏/显示与复选框相关的数据容器表：

```
$("input[name='amazon_activated']").click(function(){
    $(this).parent("legend").next("table").toggle( $(this).is(":checked") );
}); 
```

下一个代码应该`hide/show`在页面加载后初始化状态：

```
if ( ! $("input[name='amazon_activated']").is(":checked")){
    $(this).parent("legend").next("table").hide();
} 
```

好吧，它失败了。

我已经知道为什么了：`this`指的是`page`元素，而不是`checkbox`元素。

* * *

所以我想知道：

最好的策略是**立即选择**一个`id/class`：

```
$("#id") 
```

对于重要的元素，以便通过 jquery 进行控制，而不是基于表单的选择器？：

```
$("input[name='amazon_activated']") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:57:46.210

缓存元素。

```
var element = this; 
```

什么时候`this`在正确的上下文中。

* * *

您通常为给定的标记编写 Javascript，而不是相反。ID 和类除了用作选择器之外还有其他意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T17:58:04.413

我认为您可以将元素缓存在外部函数的顶部。在其他地方使用它们会很方便。此外，缓存元素也将提高性能。你可以这样做：

```
var input = $("input[type='checkbox']"),
    table = $("fieldset table"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T17:59:30.793

```
if ( ! $("input[name='amazon_activated']").is(":checked")){
    $(this).parent("legend").next("table").hide();
} 
```

上述代码内`this`属于页面元素范围，其中

```
$("input[name='amazon_activated']").click(function(){
    $(this).parent("legend").next("table").toggle( $(this).is(":checked") );
}); 
```

在上面的代码中`this`属于指向`input[name='amazon_activated']`的回调范围`input[name='amazon_activated']`。

因此，要使第一个代码处于活动状态，您应该尝试

```
if ( ! $("input[name='amazon_activated']").is(":checked")){
    $("input[name='amazon_activated']").parent("legend").next("table").hide();
} 
```

**最好将输入的引用保留在变量中并使用它**

```
var checkboxElement = $("input[name='amazon_activated']"); // you can also use id 
```

那么你喜欢

```
if ( ! checkboxElement.is(":checked")){
    checkboxElement.parent("legend").next("table").hide();
}

checkboxElement.click(function(){
    $(this).parent("legend").next("table").toggle( $(this).is(":checked") );
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T18:41:18.187

我认为每个答案都告诉您缓存对象的原因是它会非常快。要回答具体问题，忽略其余部分，即：

> 最好的策略是立即为重要元素选择一个 id/类，以便通过 jquery 控制它们，而不是基于表单的选择器？

首先，我会说“属性选择器”而不是“基于表单的选择器”，因为我不相信 jQuery 区分，比如说`$('input[name="amazon_activated"]')`，`$('a[href="#"]')`就其搜索方式而言。

也就是说，一般的经验法则是：

> id 选择器比类选择器快于属性选择器。

所以，如果你只关心 jQuery 的速度，那是关键。然而，仅仅为了通过 jQuery 进行定位而添加 id 和类可能会比相应的选择器性能加速更慢的页面加载时间。

总结这个过长的答案：

*   尽可能缓存 jQuery 选择器的结果
*   尽可能使用 ids 和 classes，但是
*   不要添加不必要的 id 和类，除非测试证明它们是必要的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T21:51:03.780

**感谢大家的回答。所有人都非常有帮助（我给所有人+1）。**

我想添加考虑到您的提示的最终解决方案。

确实`checkbox`涉及到几个元素，所以我已经**缓存**了它们并使用**关联数组**对其进行迭代（**避免添加更多 id/class**）。

```
var checkboxElements = {
    "amazon_activated" : $("input[name='amazon_activated']"),
    "clickbank_activated" : $("input[name='clickbank_activated']"),
    "ebay_activated" : $("input[name='ebay_activated']")
}

$.each(checkboxElements, function(i, el){
    $(el).parent("legend").next("table").toggle( $(el).is(":checked") );
    $(el).click(function(){
        $(el).parent("legend").next("table").toggle( $(el).is(":checked") );
    });
}); 
```

# c# - 检查列表是否包含两个不同派生类型的元素

> ID：10804188
> 
> 赞同：1
> 
> 时间：2012-05-29T17:52:21.620
> 
> 标签：c#, linq

我想检查一个元素列表，看看它是否包含至少两个特定派生类型的元素。目前我的实现如下所示：

```
 public override bool IsEnabledForTechnology(List<TechnologyBase> enabledTechnologies)
    {
        return enabledTechnologies.Any(t => t.GetType() == typeof(TechnologyA)) && enabledTechnologies.Any(t => t.GetType() == typeof(TechnologyB));
    } 
```

实现这一目标的最有效声明是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T17:54:33.557

用于`OfType`按类型过滤列表：

```
public override bool IsEnabledForTechnology(List<TechnologyBase> enabledTechnologies)
{
    return enabledTechnologies.OfType<TechnologyA>.Any() && 
           enabledTechnologies.OfType<TechnologyB>.Any();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T17:55:12.037

```
return enabledTechnologies.Any( t => { return (t.GetType() == typeof(TechnologyA)) && (t.GetType() == typeof(TechnologyB));} ) 
```

这将删除至少一个 foreach 循环。也可以用`t.GetType()`lambda 中的临时变量替换，但优化器应该为你做。

# web-services - 如何在 delphi 2009 中显示 Html 格式的响应？

> ID：10804191
> 
> 赞同：0
> 
> 时间：2012-05-29T17:52:31.893
> 
> 标签：web-services, delphi, xhtml, delphi-2009

我正在通过 Web 服务调用返回这个 html 字符串。

我无法显示 html 可能是因为奇怪的格式（请注意左括号“< head >”如何显示为 '< ; head > ;'）

这是我截断的 html 格式响应。

我想要做的是在表单上显示这个 html 页面。但是当我将字符串写入文件时，我什至无法打开它。

任何帮助是极大的赞赏，

谢谢

```
<?xml version="1.0" encoding="utf-8"?>
<string xmlns="http://tempuri.org/">&lt;html&gt;&lt;head&gt;&lt;title&gt;......
...html......&lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;</string> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:05:47.107

< 和> 是[XML 和 HTML 字符实体](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)。由于某种原因（可能返回格式错误的 html），此 Web 服务（？）返回标记括号 <> 替换为 < 和>。如果您假设在返回的 <string></string> 元素中 < 和> 仅用作标签括号，您可以用适当的括号替换实体。如果你不能假设你需要解析字符串元素文本来获取有效的 html。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:04:01.370

如果您只是编写代码来处理此字符串（并且您无权访问检索它的代码），那么最正确的方法是使用 XML 解析器。

```
uses XmlIntf;

procedure blah;
var
    doc: IXMLDocument;
    HtmlText: String;
begin
    doc := CreateXMLDocument;
    doc.LoadFromFile(...);
    HtmlText := doc.documentElement.InnerText;
    // Your text is already decoded here
    DoWhatever(HtmlText);
end; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T14:56:00.153

感谢您的输入。这对我有用。

```
 uses
 HTTPApp

 var 
 HtmlXmlText : String;

 HtmlText := HTMLDecode(HtmlXmlText); 
```

我使用 HTMLDecode 将奇数字符清理为标准格式。

# php - Jquery .hover 不起作用

> ID：10804192
> 
> 赞同：0
> 
> 时间：2012-05-29T17:52:34.200
> 
> 标签：php, javascript, jquery, css, hover

我正在尝试使用 Jquery 的 .hover() 方法突出显示表行。

我有以下代码：

```
var x;
var namen;
window.onload = function(){
    x = true;
    y = true;
    $("submitnieuw").observe('click', addturf);
    $("submitdelete").observe('click', verwijderturf);
    $("stats").on("click", "tr", select);
    setInterval(function (){
        jQuery("#recent").load("vandaag.php");
        if(x){
            jQuery("#stats").load("stats.php");
        }
    }, 10000);
    $("tr").not(':first').hover(
        function () {
            $(this).addClassName("selected");
        }, 
        function () {
            $(this).removeClassName("selected");
        }
    );
    alert("test");
};

function select(naam){
    //highlight the selected list element
    if (y){
        var name = naam.findElement('tr').id;
        if (name !== ""){
            x = false;
            y = false;
            jQuery.ajax('details.php',{
                data: {
                    'Naam': name,
                    'door': $("door2").value
                },
                type: 'post', 
                success: function(data){
                    $("stats").innerHTML = data;
                },
                error: ajaxFailure
            });
        }
    }
    else{
        x = true;
        y = true;
        jQuery("#stats").load("stats.php");
        jQuery("#recent").load("vandaag.php");  
    }
}

function verwijderturf() {
    var box = document.getElementById("naamverwijder");
    var naam = box.options[box.selectedIndex].value;
    document.getElementById("naamnieuw").selectedIndex=0;
    $("redennieuw").value = "";
    jQuery.ajax('server.php',{
        data: {
            'mode': 'verwijderturf',
            'naam': naam,
            'door': $("door2").value
        },
        type: 'post', 
        success: update,
        error: ajaxFailure
    });
}

function addturf() {
    var box = document.getElementById("naamnieuw");
    var naam = box.options[box.selectedIndex].value;
    document.getElementById("naamnieuw").selectedIndex=0;
    var reden = $("redennieuw").value;
    $("redennieuw").value = "";
    jQuery.ajax('server.php',{
        data: {
            'mode': 'addturf',
            'naam': naam,
            'door': $("door2").value,
            'reden': reden
        },
        type: 'post', 
        success: update,
        error: ajaxFailure
    });
}

function update(ajax){
    jQuery("#stats").load("stats.php");
    jQuery("#recent").load("vandaag.php");
}

function ajaxFailure(ajax, exception) {
    alert("Error making Ajax request:" + 
        "\n\nServer status:\n" + ajax.status + " " + ajax.statusText + 
        "\n\nServer response text:\n" + ajax.responseText);
    if (exception) {
        throw exception;
    }
} 
```

selected 在我的 index.php 中包含的 css 中定义。

这是我的 index.php

```
<?php
    include_once("db.php"); 
    session_start();
    if (!isset($_SESSION['uid'])){ 
        header("location:main_login.php");
        exit();
    }
    if (!isset($_SESSION['upass'])){ 
        header("location:main_login.php");
        exit();
    }
    $sql="SELECT * FROM users WHERE Naam='".$_SESSION['uid']."' AND Wachtwoord='".$_SESSION['upass']."'";
    $result=mysql_query($sql);
    $count=mysql_num_rows($result);
    if($count < 1){
        header("location:main_login.php");
        exit();
    }

?>

<?php
    $date = date("y-m-d");
    $vandaag = mysql_query("SELECT Type, Naam, Reden, Door FROM turfjes WHERE turfjes.Datum = '" . $date . "'");
    $names = mysql_query("SELECT Naam From users");
    $names2 = mysql_query("SELECT Naam From users");
    $names3 = mysql_query("SELECT Naam From users");
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Tomaten turfjes pagina | 258</title>
        <link rel="stylesheet" type="text/css" href="css/reset.css" media="all" /> 
        <link rel="stylesheet" type="text/css" href="css/style.css" media="all" /> 
        <script type="text/javascript" src="js/jquery.js"></script>
        <script>
            jQuery.noConflict();
        </script>
        <script src="js/prototype.js" type="text/javascript"> </script>
        <script src="js/scriptaculous.js" type="text/javascript"></script>
        <script src="js/script.js" type="text/javascript"> </script>
    </head>

    <body>
        <div id="container">
            <div id="header">
            </div>
            <div id="info">
                <div id="recent">               
                    <fieldset>
                        <legend>Vandaag</legend>
                        <table border="0">
                            <tr>
                            <td>Type</td>
                            <td>Naam</td>
                            <td>Reden</td>
                            <td>Door</td>
                            <?php
                                while($a = mysql_fetch_array($vandaag)){
                            ?>      <tr>
                                    <td><?php echo($a['Type']);?></td>
                                    <td><?php echo($a['Naam']);?></td>
                                    <td><?php echo($a['Reden']);?></td>
                                    <td><?php echo($a['Door']);?></td>
                                    </tr>
                            <?php
                                } 
                            ?>
                        </table>
                    </fieldset>
                </div>
                <div id="stats">                
                    <fieldset>
                        <legend>Turfjesteller</legend>
                        <table border="0">
                            <tr>
                            <td>Naam</td>
                            <td>Aantal</td>
                            <td>Gedaan</td>
                            <td>Resterend</td>
                            </tr>
                            <?php
                                while($r = mysql_fetch_array($names)){
                                echo("<tr id=".$r['Naam'].">");
                            ?>
                                    <td><?php echo($r['Naam']);?></td>
                            <?php 
                                        $sql="SELECT * FROM turfjes WHERE Naam='".$r['Naam']."' AND Type='Adtje'";
                                        $result=mysql_query($sql);
                                        $count=mysql_num_rows($result); //count = adtjes
                                        $sql2="SELECT * FROM turfjes WHERE Naam='".$r['Naam']."' AND Type='Turfje'";
                                        $result2=mysql_query($sql2);
                                        $count2=mysql_num_rows($result2); //count2 = turfje     
                            ?>
                                    <td><?php echo($count2);?></td>
                                    <td><?php echo($count);?></td>
                                    <td><?php echo($count2-$count);?></td>
                                    </tr>
                            <?php 
                                }
                            ?>
                        </table>
                    </fieldset>
                </div>
            </div>
            <div id="actie">
                <div id="nieuw">
                    <fieldset>
                    <legend>Nieuwe turfjes</legend>
                        <label>Naam</label>
                        <select id = "naamnieuw">
                            <option value="" selected></option> 
                            <?php
                                while($r = mysql_fetch_array($names2)){
                                    echo("<option value='".$r['Naam']."'>".$r['Naam']."</option>");
                                }
                            ?>
                        </select>
                        <br>
                        <label>Reden</label> <input type="text" name="redennieuw" id="redennieuw"/>  <br>
                        <label>Door</label> <input type="text" name="door" id="door" disabled="disabled" value =<?php echo($_SESSION['uid']) ?>> <br>
                        <div id = "buttonz"><button type="button" id="submitnieuw">Turfje uitdelen</button></div>
                    </fieldset>
                </div>
                <div id="verwijder">
                    <fieldset>
                    <legend>Verwijderen turfjes</legend>
                        <label>Naam</label>                     
                        <select id = "naamverwijder">
                            <option value="" selected></option> 
                            <?php
                                while($r = mysql_fetch_array($names3)){
                                    echo("<option value='".$r['Naam']."'>".$r['Naam']."</option>");
                                }
                            ?>
                        </select>
                        <br>
                        <label>Door</label> <input type="text" name="door" id="door2" disabled="disabled" value =<?php echo($_SESSION['uid']) ?>> <br>
                        <div id = "buttonz"><button type="button" id="submitdelete">Turfje verwijderen</button></div>
                    </fieldset>
                </div>
                <form name="logout" method="post" action="logout.php">
                <div id = "buttonz"><input type="submit" name="logout" value="Log uit"></div>
                </form>
            </div>
        </div>
    </body>
</html> 
```

测试警报没有执行，所以我知道我的悬停不起作用。我检查并执行悬停之前的所有内容，但仍然有效。

我不太确定我做错了什么。有人可以帮我吗？

根据在线检查员的说法，我的语法似乎很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:56:55.380

没有像`addClassName`jQuery 这样的东西，你的意思是[`addClass`](http://api.jquery.com/addClass/)？

试试这个：

```
$("tr").not(':first').hover(
    function () {
        $(this).addClass("selected");
    }, 
    function () {
        $(this).removeClass("selected");
    }
); 
```

此外，您的选择器可以*“简化”*为`$("tr:not:(first)")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T17:58:04.870

似乎（由于您的代码是 php 而不确定）您希望将悬停应用在加载时不存在的元素上。如果是这样的话，你不能简单地做

```
$("tr").not(':first').hover( 
```

[您必须使用](http://api.jquery.com/on)jquery才能将其应用于所有出现的元素。

要将悬停替换为 on，您必须挂钩 'mouseenter' 和 'mouseleave' 事件：

```
$('body').on('mousenter', 'tr:not(:first)', function({ ... });
$('body').on('mouseleave', 'tr:not(:first)', function({ ... }); 
```

# c - sscanf 修饰符 %Fd 扫描什么类型？

> ID：10804199
> 
> 赞同：1
> 
> 时间：2012-05-29T17:53:06.177
> 
> 标签：c, windows, visual-studio, scanf

我遇到了一些具有以下类型行的遗留代码：

sscanf(szBuff,"%Fd %Ff %Fd %Ff"

有没有人见过像 Fd 或 Ff 这样的修饰符？如果是这样，那是什么意思？

我似乎找不到任何关于它的信息。代码编译并运行良好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T17:54:59.347

C 表示`fscanf`函数：

> (C99 ¹ , 7.19.6.2p14) 转换说明符 A、E、F、G 和 X 也是有效的，其行为分别与 a、e、f、g 和 x 相同。

所以在 中`%Fd`，转换规范`%F`是等价于`%f`。请注意，这`d`不是转换规范的一部分。

例如（对于`fprintf`函数`%F`也与 相同`%f`）：

```
printf("%fd\n", 3.141592); 
```

将打印：

```
3.141592d 
```

* * *

[1\. C89/C90 不识别`F`转换说明符。例如，对于`fscanf`7.9.6.2 中相应的 C90 段落说：*转换说明符 E、G 和 X 也是有效的，其行为分别与 e、g 和 x 相同*]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T18:08:26.020

`%F`是 POSIX（和 C99）扩展。

[http://pubs.opengroup.org/onlinepubs/007904975/functions/scanf.html](http://pubs.opengroup.org/onlinepubs/007904975/functions/scanf.html)

> “转换说明符 A、E、F、G 和 X 也是有效的，应分别等效于 a、e、f、g 和 x。”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T18:03:56.413

正如 ouah 指出的那样，它们与小写字母相同。这是为什么？为了与 printf 转换说明符对称。在这里`%x`写下`%X`小写或大写数字，如`deadbeef`and `DEADBEEF`。对称性允许对输入`scanf`和输出使用相同的格式字符串`printf`。

```
#define FMT "%F\n"

sscanf (str, FMT, &value);
printf (FMT, value); 
```

# iphone - MKAnnotationView 内存泄漏问题

> ID：10804204
> 
> 赞同：0
> 
> 时间：2012-05-29T17:53:15.947
> 
> 标签：iphone, memory-management, mapkit, mkannotationview

由于内存警告，我最近需要使用分配测试我的应用程序。即使没有泄漏，堆随着添加到地图的注释而不断增长。每次放大或缩小时，旧的注释都会被删除，新的注释会被创建并添加到地图中：

![在此处输入图像描述](../Images/a0e750add2ed10c62820d332d0c3f065.png)

NumberedAnnotationView 组中的所有内存位置都将标记线显示为 viewForAnnotation 中的问题

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation{
    static NSString *reuseId_big   = @"bigcircle";     
    NumberedCircleAnnotationView * nca = nil;
    //nca = (NumberedCircleAnnotationView *)[self.mapView dequeueReusableAnnotationViewWithIdentifier:reuseId_big];  
    if ( nca == nil )
        nca = [[[NumberedCircleAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:reuseId_big imageType:1] autorelease];  // THIS line
        nca.delegate = self;
    }
    return nca;
} 
```

初始化看起来像这样：

```
-(id)initWithAnnotation:(id<MKAnnotation>)annotation reuseIdentifier:(NSString *)reuseIdentifier imageType:(int)imageType {

    self = [super initWithAnnotation: annotation reuseIdentifier: reuseIdentifier];  // THIS line
    if (self != nil)
    {
     // set stuff 
    } 
    return self;
} 
```

即使几分钟后，这些自动释放的对象仍然存在。（ 17 和 24 是地图上显示的注释数量，`[mapView removeAnnotations:[mapView annotations]];`每次放大/缩小时都会删除。

其他的，我认为，是一些 MapKit 生成的东西。我在 5.0 和 5.1 版本的模拟器中遇到了这种情况。

我该如何解决这个问题？是我想念的东西吗？或者这是 Mapkit 的正常行为吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:18:36.300

你有什么理由不使用

```
[mapView dequeueReusableAnnotationViewWithIdentifier:annotationIdentifier]; 
```

方法？

好像您每次都在为您的注释创建视图！

查看这篇文章： [http ://www.highoncoding.com/Articles/804_Introduction_to_MapKit_Framework_for_iPhone_Development.aspx](http://www.highoncoding.com/Articles/804_Introduction_to_MapKit_Framework_for_iPhone_Development.aspx)

# ember.js - EmberJS - 如何从嵌套的 {{#each}} 中调用视图方法

> ID：10804205
> 
> 赞同：1
> 
> 时间：2012-05-29T17:53:15.917
> 
> 标签：ember.js

我需要从 {{#each content.activitytypes}} 我尝试过的 {{_parentView.showAlias}} 中触发 {{showAlias}} 视图方法。我相信我需要打电话给父母的父母，这是正确的，如何？我可以在 {{#each... 之外调用 {{showAlias}}

车把模板

```
 <script type="text/x-handlebars">
    <h2>Activities</h2>
    <ul>            
        {{#each Km.activityController}}
        {{#view Km.ActivityView contentBinding="this"}}
            <li>
                {{content.id}}:{{content.name}}
                <ul>
                {{#each content.activitytypes}}
                    <li>{{showAlias}}
                        {{name}} {{aliasname}}
                    </li>
                {{/each}}
                </ul>
            </li>
        {{/view}}   
        {{/each}}
    </ul>
</script> 
```

看法

```
Km.ActivityView = Em.View.extend({

showAlias: function () {
    var arr = this.getPath('content.activitytypes'),
        show = false;
        console.log(arr)
        arr.forEach(function(item) {
            var aliasArr = item.showaliasaccountid;
            if (typeof aliasArr !== 'undefined') {
                if (jQuery.inArray(2,aliasArr)) {
                    console.log(aliasArr);
                    show = true;
                }
            }
        });
}.property('content.@each.activitytype.@each'),
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T01:49:16.377

`{{parentView.showAlias}}`会起作用，但在这些嵌套视图和子视图的情况下，我总是发现代码更易于使用 CollectionViews 维护。否则，您最终会在单个模板/视图中填充太多内容。

[http://docs.emberjs.com/#doc=Ember.CollectionView&src=false](http://docs.emberjs.com/#doc=Ember.CollectionView&src=false)

# iphone - 协议和访问另一个类的方法

> ID：10804209
> 
> 赞同：0
> 
> 时间：2012-05-29T17:53:21.557
> 
> 标签：iphone, objective-c, ipad, class, protocols

所以我对objective-c还很陌生，我正试图把我的头脑集中在协议上。我将用一个例子来说明我的问题。

假设我有一个执行各种方法的“计算”类。我还有在“计算”中执行相同方法的“Class1”和“Class2”。

现在根据我的理解，我可以使用协议从“计算”访问方法，而无需继承（因此无需在 Class1 和 Class2 中复制相同的代码）。

我的理解也是我必须在 Class1 和 Class2 中实现协议，因此无论如何我都必须输入这些方法。那么协议的意义何在？

我想使用“计算”​​的方法，而不是让它成为 Class1 和 Class2 的超类。所以我开始探索协议，我已经阅读了文档，但我仍然不明白这是如何实现的。如果有人可以用外行的方式解释协议，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T18:03:18.713

继承将使您不必重复代码。协议（其他编程语言称为接口）实现了 OOP 的 Can-Do 结构。这意味着当一个类实现一个协议时，该类表示它可以执行一组特定的方法。仍然由该类来实现他们认为合适的方法。

这是来自 Apple 的开发人员参考：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProtocols.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProtocols.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T18:05:14.317

协议是一组方法声明。它的主要目的是允许类之间的灵活关系。

假设我希望各种类发送日志消息，但我不希望他们负责知道消息发送后会发生什么。我创建了一个 Logger 协议，然后由 ConsoleWriter 类和 DiskWriter 类实现。想要发送消息的班级不知道也不关心它正在与哪一个对话；它只是与它所知道的东西交谈`id<Logger>`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T18:03:24.747

我不知道你有什么类型的语言经验。但是 Object-C 协议非常类似于 .NET 中的接口。它的目的是定义一个契约（接口、封装等），这样就不必知道对象的实际“类型”，而只是知道它可以做什么。

话虽如此，您可以定义一个具有一些属性和方法的协议“MyProtocol.h”。然后你可以在一个类上实现这个协议。您不需要在类的头文件中添加协议的成员，而只需在实现中编写具体的实现。

这样做是允许您通过其定义的接口而不是它们的类型来引用对象。所以你可以使用 id 类型而不是实际的类类型。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T18:08:02.030

协议几乎就像一个可移植的头文件。它们描述了可以或应该由任何符合协议的类实现的方法。这与继承不同，在继承中，子类自动实现其超类的方法，并且可以选择在子类的基础上覆盖这些方法。

我怀疑你有一些 OOP 背景，所以我不会过多地讨论子类化，只是说子类通常是超类的专门或更具体的版本。换句话说：每个子类都是其超类的一种，但每个超类不一定是子类的一种。

ObjC 中的协议通常用于委托模式中，其中 ClassA 需要知道 ClassB 可以执行某种操作。这是一个例子：

```
// ClassA.h
#import "ClassB.h"

@interface ClassA <ClassBProtocol>
// Some variables
@end

// ClassA.m
@implementation ClassA
- (id)init {
    if ( (self = [super init]) ) {
        ClassB *classB = [[ClassB alloc] init]; // Create an instance of ClassB
        classB.delegate = self; // Set ourself as the delegate which means we want ClassB to tell us what to do
    }
    return self;
}

// Introduced by ClassBProtocol
- (void)doSomethingCoolWithString:(NSString *)string {
    // Do something here, it's up to ClassA what to do
}
@end

// ClassB.h
@protocol ClassBProtocol <NSObject>
- (void)doSomethingCoolWithString:(NSString *)string;
@end

@interface ClassB
@property (nonatomic, weak) id <ClassBProtocol>delegate;
// Some variables
@end

//ClassB.m
@implementation ClassB
@synthesize delegate;

- (id)init {
    if ( (self = [super init]) ) {
        if (delegate && [delegate respondsToSelector:@selector(doSomethingCoolWithString:)]) {
            [delegate doSomethingCoolWithString:@"A String"];
        }
    }
    return self;
}
@end 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-29T19:34:15.970

下面是简单协议和属性的示例：

---> ViewController.h 文件

```
#import <UIKit/UIKit.h>
#import "MyVC.h"

@interface ViewController : UIViewController<MyVCProtocol>
{
    IBOutlet UILabel *label;
    IBOutlet UIButton *btnPush;
    MyVC *vc;
}
-(IBAction)Buttonclicked;
@end 
```

---> ViewController.m 文件

```
#import "ViewController.h"

@implementation ViewController

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
}

-(IBAction)Buttonclicked
{
    vc = [[MyVC alloc]initWithNibName:@"MyVC" bundle:nil];
    vc.delegate=self;
    [self.navigationController pushViewController:vc animated:YES];
}

-(void)GetText:(NSString *)text
{
    label.textAlignment=UITextAlignmentCenter;
    label.text=text;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

---> MyVC.h 文件

```
#import <UIKit/UIKit.h>

@protocol MyVCProtocol <NSObject>

-(void)GetText:(NSString *)text;

@end

@interface MyVC : UIViewController
{
    IBOutlet UITextField *m_TextField;
    IBOutlet UIButton *m_Button;
    id <MyVCProtocol> delegate;
}
@property(nonatomic, retain)id <MyVCProtocol> delegate;
-(IBAction)ButtonClicked;
@end 
```

---> MyVC.m 文件

```
#import "MyVC.h"

@implementation MyVC
@synthesize delegate;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
}

-(IBAction)ButtonClicked
{
    [delegate GetText:m_TextField.text];
    [self.navigationController popViewControllerAnimated:YES];
}

- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    [textField resignFirstResponder];
    return YES;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

# javascript - 通过 Firefox 扩展下载图像

> ID：10804210
> 
> 赞同：1
> 
> 时间：2012-05-29T17:53:25.477
> 
> 标签：javascript, html, firefox, download, firefox-addon

我对为 Firefox 编写扩展非常陌生，现在我遇到了一个问题，我无法在没有帮助的情况下继续：

我想通过单击链接下载图像（打开“另存为”对话框），并为保存的文件指定特定名称。

你是怎样做的？

# java - 即使应用程序未运行，也会显示警报对话框

> ID：10804218
> 
> 赞同：0
> 
> 时间：2012-05-29T17:53:44.303
> 
> 标签：java, android

当他收到特殊消息（来自我的应用程序）时，我想通知我的应用程序用户。我如何向用户显示某种消息，即使我的应用程序在后台运行（或者如果可能的话根本不运行）。

我希望通过文字和声音通知他。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T17:56:51.033

您需要为此编写[服务](http://developer.android.com/reference/android/app/Service.html)。然后在您的服务代码中使用[Notification](http://developer.android.com/reference/android/app/Notification.html)类来显示文本和声音警报。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T17:57:54.043

使用`Broadcast Receiver`, 来通知 abt 一些动作。像更新、短信或 abt 指示手机启动完成等...广播接收器的工作原理是发布者和订阅者模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T17:58:53.277

如果您的应用程序没有运行并且您想做一些事情，您将需要某种广播接收器来接收触发器。可能您最终会做的是在设备启动时启动，以安排一些事情。[这个答案](https://stackoverflow.com/questions/2784441/trying-to-start-a-service-on-boot-on-android)应该让你进入正确的方向

之后，通知用户的最佳方式是使用通知（如果您是忠实粉丝，则使用 Toast 消息；））查看 [状态栏通知](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)

# multicast - 在加入和离开时丢失多播数据报

> ID：10804221
> 
> 赞同：1
> 
> 时间：2012-05-29T17:53:57.283
> 
> 标签：multicast, igmp, packet-loss

我的服务器软件遇到了一个问题，如果一个线程加入多播，另一个线程可能不会在同一时刻接收到不同多播的传入数据报。我不确定这是否可以由于 UDP 多播的“不可靠性质”而被视为预期损失，或者这是否是严重的驱动程序/网卡缺陷。数据包捕获在那个时刻也显示了一个间隙。

我在多个 nic 型号和制造商（包括 Intel 和 HP）上观察到了这个问题。我觉得这是网卡或驱动程序问题的原因是，如果我运行数据包嗅探器将接口置于混杂模式，则根本不会出现问题。

是否有可能当 IGMP 加入或离开正在更新 nic 中的转发表时，它只是停止转发所有多播流量？这可以接受吗？

# algorithm - 树中的先序到后序

> ID：10804223
> 
> 赞同：0
> 
> 时间：2012-05-29T17:54:12.653
> 
> 标签：algorithm

我有一个问题，我想从中序和预序创建后序，但我不想使用树的重建，我只想递归执行此操作。我对此进行了编码，此时，我在预排序中有一部分树的右侧（预排序中的第一个字符是根，我按顺序找到它，并且我有左侧和右侧，我递归转换到右侧） ，但我在树的左侧有问题。我不知道这样做。有人可以给我一些建议或代码吗？请帮忙 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:43:20.483

```
 public static String a(String pre, String in, int start, int end) {
            char c = pre.charAt(start); //first char in preorder is root
            int ix = find(pre, in, c); // if we find this char in inorder translation we know where is left and right side of tree
            stack += c;
            if (start == 0 && flaga == true) {
                left = pre.substring(1, ix + 1);
                right = pre.substring(ix + 1, end);
                flaga = false;
                return a(right, in, 0, end);
            }
            String reverse = new StringBuffer(stos).reverse().toString();
    //stack to see
//        System.out.println("STACK " + stos);
            if (start < right.length()-1) {
                return a(right, in, start + 1, end - 1);
            }
            return ""; 
     }
    public static int find(String a, String b, char c) {
        int b_l = b.length();
        for (int i = 0; i < b_l; ++i)
            if (b.charAt(i) == c)
                return i;
        return -1; 
```

第一次测试：字符串 pre = "FBADCEGIH"; 字符串中序 = "ABCDEFGHI"; 答案应该是：//A、C、E、D、B、H、I、G、F 我的问题是树的左侧，我不知道如何正确执行此操作，我不确定我的代码适用于所有预购和有序情况。

# c# - 如何修改上一行控制台文本？

> ID：10804233
> 
> 赞同：27
> 
> 时间：2012-05-29T17:54:59.117
> 
> 标签：c#, powershell, console

我想实现这样的目标：

```
Time consuming operation...OK
Another time consuming operation...
And another one, but it completed, so...OK 
```

我显示了 3 行文本，每行都与一个迟早会结束的线程相关。但如果第二个比第三个晚完成，我会得到这样的东西：

```
Time consuming operation...OK
Another time consuming operation...
And another one, but it completed, so...OKOK 
```

这当然是不可接受的。我知道如何返回当前行，但有没有办法向上？我发誓我在某个地方见过它，虽然它可能是一个 Linux 控制台 :)

忘了它。请参阅远文件管理器！它适用于 Windows 控制台，甚至适用于 PowerShell！如何制作这样的东西？最酷的部分是它在退出后恢复控制台状态。所以也许我应该问 - 如何直接访问控制台缓冲区？我想我需要一些本机代码才能做到这一点，但也许还有另一种方法？我想在每次更新时清除控制台，但这似乎有点矫枉过正。或者也许不是？会眨眼吗？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-05-29T17:57:34.577

您可以将光标移动到任何您想要的位置：[Console.SetCursorPosition](http://msdn.microsoft.com/en-us/library/system.console.setcursorposition.aspx)或使用[Console.CursorTop](http://msdn.microsoft.com/en-us/library/system.console.cursortop.aspx)。

```
Console.SetCursorPosition(0, Console.CursorTop -1);
Console.WriteLine("Over previous line!!!"); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-29T18:01:27.393

使用回车。此示例打印一行，覆盖之前的内容。

```
 Console.WriteLine();
  for (int i = 0; i <= 100; i++)
  {
    System.Threading.Thread.Sleep(10);
    Console.Write("\x000DProgress: " + i);
  } 
```

只要您的所有字符串都**少于 80 列**（或您的终端缓冲区设置为什么），这将起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-15T14:57:33.343

*注意：以下答案最初由 OP 编辑​​到问题中。*

* * *

这是带有演示的完整解决方案：

```
using System;
using System.Collections.Generic;
using System.Threading;

namespace PowerConsole {

    internal class Containers {

        internal struct Container {
            public int Id;
            public int X;
            public int Y;
            public string Content;
        }

        public static List<Container> Items = new List<Container>();

        private static int Identity = 0;

        public static int Add(string text) {
            var c = new Container();
            c.Id = Identity++;
            c.X = Console.CursorLeft;
            c.Y = Console.CursorTop;
            c.Content = text;
            Console.Write(text);
            Items.Add(c);
            return c.Id;
        }

        public static void Remove(int id) {
            Items.RemoveAt(id);
        }

        public static void Replace(int id, string text) {
            int x = Console.CursorLeft, y = Console.CursorTop;
            Container c = Items[id];
            Console.MoveBufferArea(
                c.X + c.Content.Length, c.Y,
                Console.BufferWidth - c.X - text.Length, 1,
                c.X + text.Length, c.Y
            );
            Console.CursorLeft = c.X;
            Console.CursorTop = c.Y;
            Console.Write(text);
            c.Content = text;
            Console.CursorLeft = x;
            Console.CursorTop = y;
        }

        public static void Clear() {
            Items.Clear();
            Identity = 0;
        }
    }

    internal class Program {
        private static List<Thread> Threads = new List<Thread>();

        private static void Main(string[] args) {
            Console.WriteLine("So we have some threads:\r\n");
            int i, id;
            Random r = new Random();
            for (i = 0; i < 10; i++) {
                Console.Write("Starting thread " + i + "...[");
                id = Containers.Add("?");
                Console.WriteLine("]");
                Thread t = new Thread((object data) => {
                    Thread.Sleep(r.Next(5000) + 100);
                    Console.ForegroundColor = ConsoleColor.Green;
                    Containers.Replace((int)data, "DONE");
                    Console.ResetColor();
                });
                Threads.Add(t);
            }
            Console.WriteLine("\n\"But will it blend?\"...");
            Console.ReadKey(true);
            i = 0;
            Threads.ForEach(t => t.Start(i++));
            Threads.ForEach(t => t.Join());
            Console.WriteLine("\r\nVoila.");
            Console.ReadKey(true);
        }
    }
} 
```

# freepascal - 将单元格内容与自由帕斯卡中的变量进行比较

> ID：10804238
> 
> 赞同：1
> 
> 时间：2012-05-29T17:55:30.677
> 
> 标签：freepascal

有没有办法将网格中单元格的内容与变量的内容进行比较。

我需要比较单元格 0,1，如果它的值低于（或高于）变量 x，那么就会发生一些事情。

我正在使用 Lazarus 和 StringGrid。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T16:23:49.347

您可以尝试这样的事情（对于整数值，但可以很容易地修改为其他序数类型）。你也可以关注[`commented version`](https://stackoverflow.com/revisions/10820309/2)这篇文章：

```
uses
  Math;

function CompareValueEx(StringGrid: TStringGrid; const Column, Row: Integer;
  const Value: Integer; out Relationship: TValueRelationship): Boolean;
var
  Output: Integer;
begin
  Result := TryStrToInt(StringGrid.Cells[Column, Row], Output);
  if Result then
    Relationship := CompareValue(Value, Output);
end;

procedure TForm1.Button1Click(Sender: TObject);
var
  I: Integer;
  Relationship: TValueRelationship;
begin      
  I := 111;
  StringGrid1.Cells[1, 2] := '112';
  if CompareValueEx(StringGrid1, 1, 2, I, Relationship) then
  begin
    case Relationship of
      EqualsValue: ShowMessage('The values are the same');
      LessThanValue: ShowMessage('The I value is less than in cell [1;2]');
      GreaterThanValue: ShowMessage('The I value is greater than in cell [1;2]');
    end;
  end
  else
    ShowMessage('The value in cell [1;2] is not a valid integer value!');
end; 
```

# doctrine-orm - 在父集合中获取重复的孩子

> ID：10804240
> 
> 赞同：0
> 
> 时间：2012-05-29T17:55:48.413
> 
> 标签：doctrine-orm, many-to-many, duplicates

好吧，我的学说 2 上有这样的设计：

**光盘**

身份证，姓名

**歌词**

身份证、姓名、艺术家

**列表（多对多的连接表）**

id, 唱片, 歌词

因此，当我调用 $disc->getLyrics() 时，它会返回光盘上的当前歌词，但它不允许多次使用相同的歌词。我该如何处理？

**编辑：**

在“列表表”中，我可以看到同一张光盘多次存储的歌词

这些是我的实体

光盘

```
/**
 * @Entity
 * @Table(name="disc")
 */
class Disc
{

/**
 * @Id @Column(type="integer", nullable=false, name="id_disc")
 * @GeneratedValue(strategy="AUTO")
 */
protected $id;

/**
 * @Column(type="string", nullable=false, name="name")
 */
protected $name;

/**
 * @ManyToMany(targetEntity="Lyric")
 * @JoinTable(name="playlist", 
 *      joinColumns={@JoinColumn(name="disc", referencedColumnName="id_disc")},
 *      inverseJoinColumns={@JoinColumn(name="lyric", referencedColumnName="id_lyric")}
 *      )
 */ 
protected $lyrics;

public function __construct(){
    $this->lyrics = new ArrayCollection();
} 
```

歌词

```
/**
 * @Entity
 * @Table(name="lyric")
 */
class Lyric
{

/**
 * @Id @Column(type="integer", nullable=false, name="id_lyric")
 * @GeneratedValue(strategy="AUTO")
 */
protected $id;

/**
 * @Column(type="string", nullable=false, name="name")
 */
protected $name;

    /**
 * @Column(type="string", nullable=false, name="artist")
 */
protected $artist; 
```

播放列表（多对多联表），这是表结构：

```
id_playlist | disc | lyric  
1           | 1    | 1  
2           | 1    | 1  
3           | 1    | 1 
```

光盘 1 有 3 次歌词 1。

# java - Android java：OnTouchListener 返回 false 但继续处理后续操作

> ID：10804246
> 
> 赞同：2
> 
> 时间：2012-05-29T17:56:06.210
> 
> 标签：java, android, ontouchlistener

我正在用java为Android制作一个应用程序并且有一个问题`OnTouch`：

我想在处理事件后返回 false以使子视图也处理事件，但仍使用第一个处理程序`ACTION_MOVE`跟踪以下事件`ACTION_MOVE`和事件。`ACTION_UP`

`return false`正如Android Developer wbesite上所说的那样，它被停用：

> onTouch() - 这将返回一个布尔值来指示您的侦听器是否使用此事件。重要的是这个事件可以有多个相互跟随的动作。因此，如果在接收到 down 操作事件时返回 false，则表明您尚未消费该事件，并且对该事件的后续操作也不感兴趣。因此，事件中的任何其他操作都不会调用您，例如手指手势或最终的向上操作事件。

有没有办法没有那个？

# image - ImageCR3 是否有可行的替代方案？

> ID：10804247
> 
> 赞同：0
> 
> 时间：2012-05-29T17:56:06.620
> 
> 标签：image, coldfusion

我的许多网站都依赖 ImageCR3。但是，在过去的几年中，我遇到了各种限制（单线程、无裁剪锚等），并且我发送给支持地址的所有电子邮件都被忽略了。所以我正在寻找替代方案。

我的第一个想法是 CFImage，但对于相同的图像尺寸，它的质量似乎太低了，而且似乎太慢了。是否有任何其他工具可以像 ImageCR 一样高效地完成 ImageCR 所做的工作，而我可以使用它来代替？还是我最好在 CFImage 中加载 jpg，裁剪并保存为 PNG，然后在 ImageCR 中加载 PNG 以进行剩余的编辑？

我正在使用 ColdFusion MX 7 和 ColdFusion MX 9（很快都将迁移到后者）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:02:22.387

图像魔术师？似乎像魅力一样工作。

# ios - iOS相当于opencv的warpPerspective？

> ID：10804249
> 
> 赞同：1
> 
> 时间：2012-05-29T17:56:24.750
> 
> 标签：ios, opencv

是否有与 openCV 的 warpPerspective 功能相同的 iOS 功能？如果是，参数是否相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T18:14:19.997

[这个答案](https://stackoverflow.com/a/353611/1424355)对使用 CATransform3D CoreAnimation 变换的透视变换有很好的解决方案。

作为替代方案，如果您不介意将图像数据转换为 OpenCV 友好格式，您可以只使用 OpenCV 本身。它是一个 C++ 库，因此可以轻松地与 iOS 项目链接。

这是一个已经设置了 OpenCV 的 Xcode 项目： [http ://www.eosgarden.com/en/opensource/opencv-ios/overview/](http://www.eosgarden.com/en/opensource/opencv-ios/overview/)

# java - 处理 bean 类中的自定义限制/异常？

> ID：10804250
> 
> 赞同：1
> 
> 时间：2012-05-29T17:56:25.403
> 
> 标签：java, design-patterns, custom-data-type

我已经为我的应用程序中的自定义数据类型创建了一些自定义 bean 类，例如`Address`, `PhoneNumber`,`SpecialCode`等。

这些自定义的非原始*数据类型*有自己的限制，我想对它们应用，例如考虑`PhoneNumber`：

```
public class PhoneNumber {
   private String stdCode;
   private String number;

   public PhoneNumber() {
   }

   public PhoneNumber(String stdCode, String number) {

      this.stdCode = stdCode;
      this.number = number;
   }

   /* getters and setters */

} 
```

现在让我感到困惑的是对 a的*限制*`PhoneNumber`，即我想确保`stdCode`必须以 a 开头`0`，或者`number`必须是`7`或`8`数字长等。那么，在哪里应用这些规则？
在构造函数中？作为：

```
//Custom costructor
public PhoneNumber(String stdCode, String number) {
    if (!stdCode.matches("[0-9]+") || !number.matches("[0-9]+")){
        throw new IllegalArgumentException("Error in Parsing. The STD Code and Number MUST be numeric digits.");
    }
    if (!"0".equals(stdCode.substring(1, 2))){
        throw new IllegalArgumentException("The STD Code must begins with 0");
    }
    if (stdCode.length() < 3 || stdCode.length() > 5){
        throw new IllegalArgumentException("The STD Code must be 3 to 5 digits long. Current Number of digits: " + stdCode.length() + ". ");
    }
    this.stdCode = stdCode;
    this.number = number;
} 
```

或者也可以有*自定义*例外？我应该在哪里将这些自定义异常与我的 bean 类合并？
我不是经验丰富的程序员，想知道我应该在这里应用什么设计模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:59:25.523

您可以通过抛出 PropertyVetoException 来否决对属性的更新。有关示例和说明，请参见此处：[http ://weblogs.java.net/blog/malenkov/archive/2007/11/how_to_veto_a_p.html](http://weblogs.java.net/blog/malenkov/archive/2007/11/how_to_veto_a_p.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T18:02:34.340

你应该为你的手机#部件创建getter和setter，并在setter中进行验证检查

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T18:06:02.637

在输入时验证输入总是更好的。使用 Getter 和 Setter 是一个不错的选择。所以在将数据赋值给实例变量的过程中，可以检查其类型和其他参数。

# jquery - 使用 jquery-mobile 对 asp.net webservice 进行 ajax 调用

> ID：10804260
> 
> 赞同：0
> 
> 时间：2012-05-29T17:56:57.323
> 
> 标签：jquery, web-services, jquery-mobile

我已经启动并运行了网络服务。当我使用我的 asp.net 应用程序通过 jquery 调用它时，它工作正常，但使用 jquery mobile 我收到一条 500 错误消息而没有结果。我不确定为什么会这样。如果有人对此有任何了解，请告诉我。谢谢。

编辑：我刚刚注意到我的请求说请求方法：选项。

Javascript

```
 var parameter = {
                    'userName': emailLogin, 'password': passwordLogin
                };
                parameter = JSON.stringify(parameter);
                $.ajax({
                    type: "POST",
                    url: "http://myurl.com/MainService.asmx/LoginMobile",
                    contentType: "application/json; charset=utf-8",
                    data: parameter,
                    dataType: "json",
                    success: function (result) {
                        if(result.d) {
                            showErrorDialogMessage('Login error', result.d);
                        } else {
                            showErrorDialogMessage('Login error', 'Incorrect email and password combination.');
                        }
                    },
                    error: function (jqXHR, textStatus, errorThrown) {
                        showErrorDialogMessage('Login error', textStatus);
                    }
                }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:29:35.360

我将数据类型更改为“jsonp”，并且能够进行调用并检索 xml 数据中的数据库。

# ruby-on-rails - Capistrano 部署错误

> ID：10804261
> 
> 赞同：2
> 
> 时间：2012-05-29T17:56:59.250
> 
> 标签：ruby-on-rails, ruby-on-rails-3, capistrano

我最近不得不对我大约一年没有接触过的应用程序进行一些更新。尝试使用 Capistrano（通过 Github）进行部署时，出现此错误：

```
[deploy:update_code] exception while rolling back: IOError, closed stream 
```

此处记录的完整错误：[https ://gist.github.com/2829751](https://gist.github.com/2829751)

在 Github SSH 安全恐慌之后，我重新安装了服务器的 SSH 密钥。远程服务器上不应该发生任何变化，并且之前的部署工作正常。我的本地系统上唯一的重大变化是迁移到 RVM。

任何想法是什么导致了错误？

这是我的 deploy.rb 文件，如果有帮助的话：

```
default_run_options[:pty] = true 

set :domain, 'xxx.xxx.xxx'
set :repository,  "XXX MY REPO XXX"
set :branch, 'master'
set :password, 'XXXXXXX'

set :deploy_to, "/var/www/#{domain}"

set :scm, :git
set :repository_cache, "git_cache"
set :deploy_via, :remote_cache

ssh_options[:paranoid] = false

set :user, "XXX"
set :runner, user
set :use_sudo, true
set :rails_env, 'production'

role :app, domain # multiple domains can be added here for parallel deployment (i.e. test_app)
role :web, domain
role :db,  domain, :primary => true

namespace :deploy do
  task :start, :roles => :app do
    run "touch #{release_path}/tmp/restart.txt"
  end

  task :stop, :roles => :app do
    # Do nothing.
  end

  desc "Restart Application"
  task :restart, :roles => :app do
    run "touch #{release_path}/tmp/restart.txt"
  end
end

deploy.task :cold do
  deploy.update
  deploy.create_db
  deploy.migrate
  deploy.restart # Change to start if we're using mongrels
end 

after "deploy:update_code", :update_config
after "deploy:restart", "delayed_job:restart"
after "deploy", "deploy:cleanup"

#links config files from shared to the release path and mongrel path after deployment
desc "Create all symlinks and files needed for app activation ofter deployment"
task :update_config, :roles => :web do
    run "ln -s -f /var/www/#{domain}/shared/database.yml #{release_path}/config/database.yml"
    run "ln -s -f /var/www/#{domain}/shared/app.yml #{release_path}/config/app.yml"
    run "ln -s -f /var/www/#{domain}/shared/cache #{release_path}/public/cache"
    run "ln -s -f /var/www/#{domain}/shared/survey_cache #{release_path}/public/surveys"
    run "ln -s -f /var/www/#{domain}/shared/surveys #{release_path}/surveys"
end

desc "changes ownership to cbdsm:git"
task :update_permissions, :roles => :web do
    sudo "chown -R #{user}:git /var/www/#{domain}"
end

namespace :delayed_job do
  desc "Start the delayed_job process"
  task :start, :roles => :app do
      run "cd #{current_path} && RAILS_ENV=#{rails_env} script/delayed_job -n 3 start"
  end

  desc "Stop the delayed_job process"
  task :stop, :roles => :app do
      run "cd #{current_path} && RAILS_ENV=#{rails_env} script/delayed_job stop"
  end

  desc "Restart the delayed_job process"
  task :restart, :roles => :app do
      delayed_job.stop
      delayed_job.start
  end
end 
```

更新：这似乎是一个问题`set :use_sudo, true`。删除该行和任何需要 sudo 的命令似乎可以解决问题。我仍然不完全清楚发生了什么变化——这使得这条线有问题。它以前工作得很好。

此外，我删除了该`default_run_options[:pty] = true`行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T15:00:04.790

如上贴：

这似乎是一个问题集：use_sudo，true。删除该行和任何需要 sudo 的命令似乎可以解决问题。我仍然不完全清楚发生了什么变化——这使得这条线有问题。它以前工作得很好。

此外，我删除了 default_run_options[:pty] = true 行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T18:59:00.070

在这些情况下，发布**/config/deploy.rb**会有所帮助......

顺便说一句，你如何设置`:deploy_via`设置？尝试将其更改为`:remote_cache`（从`:copy`）：

```
set :deploy_via, :remote_cache 
```

看看会发生什么。

# ajax - 无法从跨域 AJAX 请求中获取 JSON 响应

> ID：10804262
> 
> 赞同：3
> 
> 时间：2012-05-29T17:57:33.977
> 
> 标签：ajax, extjs

我在 ExtJS 中使用 JSON 存储并从 ASP.net Web 服务获取数据。如果我在同一个域中使用它会成功返回数据，但在跨域中它会返回错误：

> 来源不允许 XMLHTTPREQUEST Access-Control-Origin 标头

这是我的代码：

```
var myStore = new Ext.data.JsonStore({
    // Load data at once
    autoLoad: true,

    // Override default http proxy settings
    proxy: new Ext.data.HttpProxy({
        // Call web service method using GET syntax
        type:'ajax',
        url: path+'SelectIncidentList',
        restful:true,

        // Ask for Json response
        headers: {'Content-type': 'application/json'},
        reader:    {
            type: 'json',
            root: 'd'
        },
    }),

    id: 'incidentid',

    // Fields declaration
    fields: ['incidentid','occured','headline','source','enteredby','bodyintro','webaddress','location1','location2','location3','location4','image','incidenttypeid','incidentsubtypeid']
}); 
```

* * *

*** 编辑 ***

根据我得到的答案，我将代码更改为使用 JSONP。但是我遇到了另一个问题。随着对我的 ExtJS 代码的这些更改：

```
var myStore = new Ext.data.JsonStore({
autoLoad: true,

// Override default http proxy settings
proxy: new Ext.data.proxy.JsonP({
    type:'jsonp',
    url: path+'SelectoccurList',
    headers: {'Content-type': 'application/json'},
    reader: {
        type: 'json',
        root: 'd'
    },
}),
id: 'occurid',

// Fields declaration
fields: ['occurid','occured','headline','source','enteredby','bodyintro','webaddress','location1','location2','location3','location4','image','occurtypeid','occursubtypeid']
}); 
```

我遇到以下错误：

```
<?xml version="1.0" encoding="utf-8"?>
**SelectOccurList:-1Resource interpreted as Script but transferred with MIME type      text/xml.
SelectOccurList:1SyntaxError: Unexpected token '<'**
<ArrayOfOccurData xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://tempuri.org/">
<OccurData>
   <occurid>22</occurid>
   <occured>2012-05-26T04:33:53-04:00</occured>
   <headline>headline</headline>
   <source>content</source>
 <enteredby />
 <bodyintro>content</bodyintro>
<webaddress />
<location1>29 -156.364</location1>
<location2 />
<location3 />
<location4 />
<image>url of iamge</image>
<occurtypeid>0</occurtypeid>
<occursubtypeid>0</occursubtypeid>
</OccurData>
<OccurData>
 <occurid>23</occurid>
 <occured>2012-05-26T15:41:52-04:00</occured>
 <headline>headline</headline>
 <source>test content</source>
 <enteredby />
 <bodyintro>test content</bodyintro>
 <webaddress />
 <location1>27.75974 -82.67853</location1>
 <location2 />
 <location3 />
 <location4 />
  <image>url of image</image>
<occurtypeid />
<occursubtypeid />
 </OccurData>
<OccurData>
  <occurid>24</occurid>
  <occured>test</occured>
  <headline />
  <source />
  <enteredby />
  <bodyintro />
  <webaddress />
  <location1 />
  <location2 />
  <location3 />
  <location4 />
  <image />
  <occurtypeid>0</occurtypeid>
  <occursubtypeid>0</occursubtypeid>
 </OccurData>
<OccurData>
 <occurid>25</occurid>
 <occured>Testing</occured>
 <headline>Testing 28 05 </headline>
 <source>Dummy</source>
 <enteredby>XYZ</enteredby>
 <bodyintro>This occur is dummy</bodyintro>
 <webaddress>http://</webaddress>
 <location1>5cd41415-5c60-4cbd-a6f3-05330b368a41</location1>
 <location2 />
 <location3 />
 <location4 />
 <image />
 <occurtypeid>0</occurtypeid>
 <occursubtypeid>0</occursubtypeid> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T19:15:59.280

这正是您使用[JsonP 代理](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.proxy.JsonP)的目的，它使用脚本标签 + 回调函数来绕过相同的域浏览器限制。链接的标头文档使用示例代码对其进行了全面解释，包括一些基本的服务器实现。

另一种选择是在您的服务器上实际代理调用——即，Ajax 代理调用您的服务器，然后调用远程服务器并将标准 JSON 响应格式化回您的客户端。您只是不能直接从客户端调用远程服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:32:14.970

您可以将服务器配置为设置“访问控制-”标头。 [https://developer.mozilla.org/en/http_access_control](https://developer.mozilla.org/en/http_access_control)

# python - 尝试运行 py.test 时收集 setup.py 时出错？

> ID：10804268
> 
> 赞同：13
> 
> 时间：2012-05-29T17:57:47.210
> 
> 标签：python, setuptools, pytest, tox

我试图`py.test`在我的包上运行，但它试图`setup.py`从项目根目录中解析，即使我试图排除它。

我需要从 *.py 文件中收集测试，因为测试类包含在模块中。

```
# setup.cfg
[pytest]
norecursedirs = .svn _build tmp* lib/third lib *.egg bin distutils setup.py
python_files = *.py 
```

仍然当我运行`py.test`它会给我`ERROR collecting setup.py`我已经排除的。

```
/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/distutils/core.py:140: in setup
>           raise SystemExit, gen_usage(dist.script_name) + "\nerror: %s" % msg
E           SystemExit: usage: py.test [global_opts] cmd1 [cmd1_opts] [cmd2 [cmd2_opts] ...]
E              or: py.test --help [cmd1 cmd2 ...]
E              or: py.test --help-commands
E              or: py.test cmd --help
E           
E           error: no commands supplied 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-29T20:54:51.320

您可以像这样为您的 pytest.ini 配置配置 --ignore 选项：

```
addopts = --ignore=setup.py 
```

如果您在根目录中并且希望 py.test 忽略 setup.py 文件，这应该会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T18:20:14.380

从文档（和变量的名称）来看，它看起来`norecursedirs`只是跳过了目录，所以因为`setup.py`是一个文件，所以把它放进去`norecursedirs`没有效果。

[http://pytest.org/latest/customize.html?highlight=norecursedirs#confval-norecursedirs](http://pytest.org/latest/customize.html?highlight=norecursedirs#confval-norecursedirs)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-25T04:12:13.053

pytest 文档将答案埋[在这里。](https://pytest.org/latest/example/pythoncollection.html#customizing-test-collection-to-find-all-py-files)在项目的根目录中放置一个`conftest.py`文件，其中列出了您要`pytest`忽略的文件：

> 然而，许多项目会有一个他们不想被导入的 setup.py。此外，可能存在只能由特定 python 版本导入的文件。对于这种情况，您可以通过在 conftest.py 文件中列出文件来动态定义要忽略的文件：
> 
> * * *
> 
> ```
>  # content of conftest.py
>  import sys
> 
>  collect_ignore = ["setup.py"] 
> ```
> 
> * * *

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-23T17:08:34.500

在[Jedi](https://github.com/davidhalter/jedi)中，我们通过添加`conftest.py`内容为`collect_ignore = ["setup.py"]`. 这使它“神奇地”工作。

恕我直言 py.test 应该更容易忽略`setup.py`，因为这是一个非常典型的用例。

# json - 将 JSON 发布到 Jersey 请求

> ID：10804272
> 
> 赞同：1
> 
> 时间：2012-05-29T17:58:05.397
> 
> 标签：json, api, jersey

我花了半天时间疯狂地让我的 Jersey 服务接受和操作 JSON。

这是我正在做的事情： 在 PHP 中使用 Zend 框架：

```
$client = new Zend_Http_Client("http://localhost:8080/api/");
    $data = array("city"=> "Paris", "zip" => "1111");
    $json = json_encode($data);     
    $client->setHeaders("Content-type", "application/json");
    $client->setRawData($json, 'application/json')->request("GET"); 
```

接口方法：

```
@GET
    @Produces(MediaType.APPLICATION_JSON)
    @Consumes(MediaType.APPLICATION_JSON)   
    public Response getAPI( Address addr) {
        JSONObject out = new JSONObject();
        out.put("city test",addr.getCity());
        Response response = null;
        return response.ok(out.toString()).header("Accept", "application/json").build();
    } 
```

在一个单独的文件中，我有我的注释类：

```
import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Address
{
    @XmlElement(name="city")
    public String city;
    @XmlElement(name="zip")
    public String zip;

     public String getCity() {
          return city;
     }
} 
```

我收到不支持的媒体类型错误：

```
 Zend_Http_Response Object
(
    [version:protected] => 1.1
    [code:protected] => 415
    [message:protected] => Unsupported Media Type
    [headers:protected] => Array
        (
            [Server] => Apache-Coyote/1.1
            [Content-type] => text/html;charset=utf-8
            [Content-length] => 1117
            [Date] => Tue, 29 May 2012 17:55:03 GMT
            [Connection] => close
        )

    [body:protected] => 
```

我错过了什么？

谢谢大家，丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:22:41.930

我认为你过于复杂了。由于您的 bean 已注释，因此无需为其创建 json 对象。这已经为你完成了。

```
return Reponse.ok(addr).build(); 
```

# css - 如何将 3 个 DIV 对齐？

> ID：10804273
> 
> 赞同：15
> 
> 时间：2012-05-29T17:58:06.643
> 
> 标签：css, dotnetnuke, skinning

我需要在左、中、右对齐的页脚容器 DIV 中创建 3 个 DIV。我见过的所有 CSS 示例都使用了浮点数。但是，由于某种原因，DotNetNuke 没有正确解析 CSS。我发现左窗格正确浮动，但右窗格和中间窗格位于它的正下方而不是它旁边。这是我的 ascx 文件中的一个片段：

```
<div id="footer">
<div id="footerleftpane" runat="server">
    <dnn:LOGO id="dnnLogo" runat="server" />
    <h3>Driving business performance.</h3>
    <h3>Practical Sales and Operations Planning</h3>
    <h3>for medium sized businesses.</h3>
</div>
<div id="footerRightPane" runat="server">
    <dnn:COPYRIGHT id="dnnCopyright" runat="server" /><br />
    <dnn:PRIVACY id="dnnPrivacy" runat="server" />
    <dnn:TERMS id="dnnTerms" runat="server" />
</div>
<div id="footerMidPane" runat="server">
</div> 
</div> 
```

这是我的 CSS 文件的相关部分：

```
#footer
{
width: 960px;
border: 1px;
}
#footerleftpane
{
width: 300px;
float: left;
}
#footerRightPane
{
width: 300px;
float: right;
}
#footerMidPane
{
padding:10px;
} 
```

我应该对上面进行哪些更改以实现所需的布局？

更新：我尝试了建议的更改，但布局仍然无法正常工作，如[演示我想要的这个 salesandoperationsplanning.net 页面上](http://salesandoperationsplanning.net/)所见。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-29T18:12:26.877

首先，您应该定位出现在 HTML 中的元素的名称。看起来您的 CMS 附加了某种前缀，而您的 id 不匹配。（您有#footerleftpane，但它呈现为#dnn_footerleftpane）

此外，由于您使用的是固定宽度的容器，因此没有将宽度传递给中间容器所产生的麻烦是没有用的。给它一个宽度，看看它是否有效。如果不是，您可以尝试另外两种方法，前提是您的块的源顺序正确（左、中、右）。

1.  您可以将它们全部浮动，确保其宽度和填充适合容器。

    ```
    #dnn_footerleftpane, #dnn_footerMidPane, #dnn_footerRightPane {
      width: 300px;
      float: left;
      ....
    } 
    ```

2.  您可以使用 display: inline-block，同时确保容器的宽度和填充适合您

    ```
    #dnn_footerleftpane, #dnn_footerMidPane, #dnn_footerRightPane {
      ....
      display: inline-block;
      ...
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T23:08:45.170

这是位置、尺寸和错误的 CSS 声明的问题。

1）位置您在页面源中右侧有中间窗格！

2) 尺寸我做了一个快速测试，您可以进一步调查，但 300 像素对于侧窗格的宽度来说太大了。内容中的某些内容可能会修改宽度。

3) css 声明 DotNetNuke（实际上所有 ASP.Net 控件都这样做）呈现服务器端控件（声明为 runat="server"）为它们分配一个唯一的 id，因此您希望在 css 中成为 #footerleftpane 的内容将是 #dnn_footerleftpane .

在重新定位你的中间窗格之后......在另外两个的中间，像这样修改你的css：

```
 #footer
    {
        width: 960px;
        height: auto;
        margin:0;
        padding:0;
        border: 0;
    }

    #dnn_footerleftpane, #dnn_footerRightPane{
        width: 290px;
        float: left;
    }

    #dnn_footerMidPane
    {
        width: auto;
        float: left;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T19:29:25.193

您的页脚容器为 960 像素。您的左右元素是 300 像素，但您没有为中间元素指定宽度，因此它默认为其父元素的全宽，它会自行将自己推到新行。

减去填充，中间元素的宽度不能超过 340 像素。

[http://jsfiddle.net/y8e4T/](http://jsfiddle.net/y8e4T/)

[http://jsfiddle.net/y8e4T/show](http://jsfiddle.net/y8e4T/show)

```
#footerMidPane{
    width: 340px;
    float: left;
    padding: 10px;
}​ 
```

# facebook - Facebook 应用程序的自定义 URL？

> ID：10804274
> 
> 赞同：2
> 
> 时间：2012-05-29T17:58:08.227
> 
> 标签：facebook, url

（希望如此）简单的问题：如何为 Facebook 应用配置自定义 URL？我现在知道它作为 https://apps.facebook.com/[APP_ID]/ 工作，但是否可以制作/请求您选择的 URL？例如，[https://apps.facebook.com/chickenwings/](https://apps.facebook.com/chickenwings/)

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T17:58:48.897

是的，在您的应用设置中创建命名空间。

![应用设置中的鸡翅](../Images/b7269953227b115d01c3124018a9062f.png)

# java - 是否有 llvm java 前端可以将 java 源代码转换为 llvm 的中间形式？

> ID：10804280
> 
> 赞同：62
> 
> 时间：2012-05-29T17:58:24.507
> 
> 标签：java, llvm, bytecode

根据我的阅读，有一个 llvm 程序可以将 java 字节码转换为 llvm 的中间形式，称为 class2llvm。我的问题是，我如何访问它。我必须安装什么前端才能访问它。

VMkit 是他们对 JVM 的实现，但我正在寻找如何使用 llvm 编译 java 源代码，而不是如何运行它。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-29T20:48:59.850

Java 前端将 Java 字节码（.class 文件）转换为 LLVM 字节码。看看这个链接：

[https://llvm.org/svn/llvm-project/java/trunk/docs/java-frontend.txt](https://llvm.org/svn/llvm-project/java/trunk/docs/java-frontend.txt)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-30T11:25:11.903

你可以看看[dragonegg](https://dragonegg.llvm.org/)，它使 llvm 能够使用 gcc 的前端。由于 gcc 已经有一个 java 前端，称为**gcj**，也许 llvm 可以使用它来编译 java 代码。但我不确定 llvm 与 gcc 前端的接口有多好，所以这可能行不通。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-16T20:46:59.320

我已经使用基于 LLVM 的vmkit ( [http://vmkit.llvm.org/ ) 执行了一个 java 类。](http://vmkit.llvm.org/)它使用 LLVM 将高级语言编译和优化为机器代码。J3 是一个带有 VMKit 的 JVM 实现。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-15T03:13:28.833

[**注意：从 2015 年 11 月开始，它不再是开源的，所以这个 hack 基本上是没用的。**]

[RoboVM](http://www.robovm.com/develop/documentation/)可能会成为您正在寻找的解决方案。它是开源的，将 JVM 字节码（.class 文件）编译为机器码。

我假设他们使用 class2llvm 之类的东西来做到这一点。

不幸的是，它仍处于 alpha 阶段。我刚刚在 HelloWorld.java 上对其进行了测试。它使在单核上运行的加载时间提高了 5 倍。（大部分运行时间是加载时间。）

> `echo Hello World! : <1 ms : 31K`(/usr/bin/echo 二进制文件)
> 
> `java HelloWorld : ~70 ms : 0.4K`（HelloWorld.class JVM 字节码）
> 
> `./HelloWorld : ~13 ms : 9.4MB`（9.3MB 二进制 + 57K robovm-rt.jar）

请注意，java 调用了一个 32MB 的 $JAVA_HOME/lib/rt.jar 文件（可能更多）。在如此大的文件中进行搜索肯定是 java 加载速度如此缓慢的部分原因。如果 RoboVM 变得更智能，也许它可以丢弃大部分 9.3MB 二进制文件以获得更快的加载速度？

该网站提到了 iOS，但我认为那是因为他们正在销售他们的附加 UI 库。RoboVM 在 Ubuntu 上为我编译得很好。只要确保做

> $ sudo apt-get install g++-multilib

首先（也许安装 libpthread-stubs0-dev 和 libpthread-workqueue0 ......不知道它们是否重要）。

# jquery - jQuery插件将颜色css转换为灰度？

> ID：10804281
> 
> 赞同：2
> 
> 时间：2012-05-29T17:58:27.813
> 
> 标签：jquery, css

我一直在寻找一种方法来将我的整个 css 样式表从颜色值转换为它们各自的灰度值 - 但是我找不到一个好的方法（除了打开 Photoshop 并以艰难的方式进行）。

有没有一种方法可以做到这一点，有人知道是否有可以做到这一点的 jQuery 脚本吗？

**注意：**这不是关于将彩色*图像*转换为灰度图像的问题，而是关于将完整的样式表转换为灰度图像的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T19:01:41.577

这是一个 Javascript 函数，它将采用 RGB 值，并返回去饱和的 RGB 值。

```
function desaturate(r, g, b) {
    var intensity = 0.3 * r + 0.59 * g + 0.11 * b;
    var k = 1;
    r = Math.floor(intensity * k + r * (1 - k));
    g = Math.floor(intensity * k + g * (1 - k));
    b = Math.floor(intensity * k + b * (1 - k));
    return [r, g, b];
} 
```

如果您想一次性使特定元素去饱和，您可以执行以下操作：

```
function rgb_to_string(r, g, b) {
    return 'rgb(' + r + ', ' + g + ', ' + b + ')';
}

function desaturate_element(selector) {
    var fg = $(selector).css('color').match(/\d+/g);
    var bg = $(selector).css('background-color').match(/\d+/g);
    $(selector).css('color', desaturate(fg[0], fg[1], fg[2]));
    $(selector).css('background-color', desaturate(bg[0], bg[1], bg[2]));
} 
```

[在此 JSFiddle](http://jsfiddle.net/QK8M4/2/)中查看此操作。那些去饱和乘数来自[这个线程](http://www.gamedev.net/topic/373341-colormath-desaturation/)。

另一件事，`k`价值是你想要去饱和的程度。1 将完全去饱和，0 将完全不去饱和。

# java - 如何从 DynamoDBMapper 查询（）的分页结果中检索所有项目？

> ID：10804282
> 
> 赞同：10
> 
> 时间：2012-05-29T17:58:28.283
> 
> 标签：java, amazon-web-services, amazon-dynamodb

我正在尝试在 Java 中的[DynamoDBMapper](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/JavaSDKHighLevel.html#JavaORMDynamoDBMapper)的帮助下使用 hashKey 和 rangeKey 查询 DynamoDB。但我没有得到所有结果，它只返回其中的一部分。我的代码如下所示：

```
queryDynamoDb() {
  Condition rangeKeyCondition = new Condition()
    .withComparisonOperator(ComparisonOperator.GT.toString())
    .withAttributeValueList(new AttributeValue().withS("0"));

    DynamoDBQueryExpression queryExpression = new DynamoDBQueryExpression(
            new AttributeValue().withS(prefKey));

    queryExpression.setRangeKeyCondition(rangeKeyCondition);

    List<MyObj> myobjs = mapper.query(MyObj.class, queryExpression);
    return myobjs;
} 
```

`MyObj`使用 DynamoDB 注释正确注释。所以我能够保存对象，但检索只返回部分结果。

DynamoDBMapper[中的](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/JavaSDKHighLevel.html#JavaORMDynamoDBMapper)*查询*文档说：

> 查询方法返回“延迟加载”集合。也就是说，最初它只返回一页结果。它会在需要时对下一页进行服务调用。

现在的问题是，如何告诉映射器进行服务调用或需要一个页面，以便它加载所有页面（实际上是所有条目）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-29T21:19:53.070

[DynamoDBMapper 类的](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/JavaSDKHighLevel.html#JavaORMDynamoDBMapper)[Amazon DynamoDB](http://aws.amazon.com/dynamodb/)文档中的 Java 代码片段在这里有点不幸（尽管在技术上是正确的），用于 DynamoDBMapper 类的[AWS](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/dynamodb/datamodeling/DynamoDBMapper.html) [SDK for Java](http://aws.amazon.com/sdkforjava/) API 文档在这方面（自然）更精确，请参阅方法[query()](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/dynamodb/datamodeling/DynamoDBMapper.html#query%28java.lang.Class,%20com.amazonaws.services.dynamodb.datamodeling.DynamoDBQueryExpression%29)：

```
public <T> PaginatedQueryList<T> query(Class<T> clazz,
                                       DynamoDBQueryExpression queryExpression) 
```

所以返回的类型实际上是一个[Class PaginatedQueryList](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/dynamodb/datamodeling/PaginatedQueryList.html)：

> 表示 AWS DynamoDB 中查询结果的 List 接口的实现。当用户执行需要它们的操作时，**会按需加载分页结果。****某些操作，例如 size()，必须获取整个列表**，但结果会尽可能地逐页获取。*[强调我的]*

也就是说，在正常使用期间，您确实不需要显式加载任何内容，只要它由 ; 的延迟加载实现隐式处理即可`PaginatedQueryList<T>`。但是，如果出于某种原因需要，您可以通过需要访问整个集合的操作来触发它，明确提到的[size()](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/dynamodb/datamodeling/PaginatedList.html#size%28%29)方法显然是其中之一。

# ruby - Ruby 中“return x if x”的简写

> ID：10804283
> 
> 赞同：9
> 
> 时间：2012-05-29T17:58:34.137
> 
> 标签：ruby, shorthand

我喜欢 Ruby 的一件事是你可以用尽可能短的方式表达事物。

我知道在分配时可以做到

```
x ||= a
# instead of
x = a unless x
# which is
x = x || a 
```

有模拟形式`return`吗？

```
# instead of
return x if x 
```

我只想“说”`x`一次。[这个问题](https://stackoverflow.com/questions/5436034/is-there-a-ruby-one-line-return-if-x)询问只是返回（什么都没有），但是当返回 void 以外的东西时，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T18:02:46.210

我几乎可以肯定，您的第二个示例不存在简写——也不能在不修改 Ruby 语法的情况下编写简写——因为它不是一个足够常见的习语。对不起，兄弟，但看起来你将不得不在这个问题上变得冗长。（虽然，真的，就冗长而言，这个并不是那么糟糕。）

（也请注意，第一个例子并不完全正确：`x ||= a`等价于`x = x || a`，也可以表示为`x = a unless x`。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-29T18:01:04.880

如果它是块代码中的最后一条语句，则可以省略返回。

例子

```
irb(main):002:0> def b(c)
irb(main):003:1>   c if c
irb(main):004:1> end
=> nil
irb(main):005:0> b(4)
=> 4
irb(main):006:0> b(nil)
=> nil
irb(main):007:0> b(true)
=> true
irb(main):008:0> b(false) # TADA!!!
=> nil 
```

# java - 文件编写器覆盖文件而不是附加到末尾的问题

> ID：10804286
> 
> 赞同：11
> 
> 时间：2012-05-29T17:58:44.200
> 
> 标签：java, file, filewriter

好的，我在将多行写入文本文件时遇到了一些麻烦。

程序运行，但它不会每次都使用新行

当我希望它运行 4 次时，文本文件应如下所示：

```
a
b
c
d 
```

相反，它看起来像：

```
d 
```

谁知道如何解决这个问题？所有导入均正确导入。

来源（它已被略微编辑，假设一切都已正确定义）：

```
import java.io.*;
public class Compiler {
public static void main (String args[]) throws IOException
{
    //there's lots of code here
    BufferedWriter outStream= new BufferedWriter(new FileWriter("output.txt"));
    outStream.newLine();
    outStream.write(output);
    outStream.close();
}

} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-29T18:02:58.907

确保在创建 a 的实例时`FileWriter`附加到它的末尾。这可以通过使用[此特定`FileWriter`构造函数](http://docs.oracle.com/javase/6/docs/api/java/io/FileWriter.html#FileWriter%28java.lang.String,%20boolean%29)来完成，该构造函数将附加`boolean`参数作为第二个参数。这`boolean`告诉`FileWriter`追加到文件的末尾，而不是覆盖文件。

```
BufferedWriter outStream= new BufferedWriter(new FileWriter("encoded.txt", true)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-29T18:04:22.887

默认情况下`FileWriter`会覆盖文件。您可能想要做的是按以下方式定义阅读器：
`new FileWriter("encoded.txt", true)`
这样文件将被*附加到*而不是被*覆盖*。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T18:10:05.213

我不确定这段代码应该做什么。如果您的输入字符串长度超过一个字符，则会引发错误，因为您在循环内关闭了 FileWriter，然后尝试再次写入它。

我按以下方式解释您的问题：您想知道为什么文件中只有最新的输出。在这种情况下，这是因为您没有在附加模式下创建 FileWriter。查看可用于 FileWriter 的不同构造函数，并使用允许附加到文件的构造函数。

# jquery - 如何在其中仅包含一个复选框的 jQuery 选择

> ID：10804294
> 
> 赞同：5
> 
> 时间：2012-05-29T17:59:03.117
> 
> 标签：jquery, jquery-selectors

# 目标

我想选择`<td>`只包含一个复选框的元素。我想使用单个选择器（不使用选择器外部的链接或逻辑）来执行此操作，以便我可以将选择器与 jQuery 函数（如`live`or ）一起使用`delegate`。

更大的图是我想在这些`<td>`s上监听点击事件并将点击事件传递给复选框，从而创建更大的点击区域。这很重要，因为`<tr>`当用户单击并错过复选框时，我不想激活不同的单击事件。

# 具体情况

我用一个示例场景创建了一个 jsfiddle：http: [//jsfiddle.net/ytA3X/](http://jsfiddle.net/ytA3X/)

这就是我开始的那个不起作用。换句话说，选择任何具有复选框但没有任何不是复选框的 td 元素。

```
$('td:has(:checkbox):not(:has(:not(:checkbox)))')
=> [] 
```

`:not(:has(...))`适用于我的[jsfiddle 示例](http://jsfiddle.net/ytA3X/)。

`:has(:not(...))`适用于我的[jsfiddle 示例](http://jsfiddle.net/ytA3X/)。

`:not(:has(:not(...)))`似乎总是什么都不选择。

有没有其他方法可以让我只用一个复选框来选择 td 元素，还是我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T18:12:40.513

如何使用[`:only-child`](http://api.jquery.com/only-child-selector/)：

```
$('td:has(:checkbox:only-child)')... 
```

[JSFiddle](http://jsfiddle.net/wcHJn/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T18:02:19.880

不要只使用一个选择器，它会使您的代码难以阅读，并且极难维护和调试。

```
$('td:has(input[type="checkbox"])').filter(function(){
    return $(this).children().length === 1
}); 
```

[**现场演示**](http://jsfiddle.net/ytA3X/2/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T18:13:24.507

您可以使用[`only-child`选择器](http://api.jquery.com/only-child-selector/)：

```
$('td:has(:checkbox:only-child)') 
```

[在这里，它](http://jsfiddle.net/FjquT/)与您的标记一起使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T18:06:42.983

您可以简单地使用`.not`并将其拆分为两个单独的选择器：

[http://jsfiddle.net/ytA3X/1/](http://jsfiddle.net/ytA3X/1/)

# cmake - 如何指定要在共享库构建中使用的链接器标志 [cmake]

> ID：10804296
> 
> 赞同：2
> 
> 时间：2012-05-29T17:59:22.370
> 
> 标签：cmake, meego

我正在使用 Meego 1.2 工具链（长故事）使用 cmake 运行构建。这个特定的工具链需要`--sysroot`使用该选项来查找它需要的任何库。

```
set (CMAKE_CXX_FLAGS "-fpermissive")
set (CMAKE_CXX_LINK_FLAGS "--sysroot=${INTEL_GRAPHICS_SDK_BASE}/sdk")
set (CMAKE_CXX_FLAGS_DEBUG "-g") 
```

这些选项允许 cmake 初始编译器检查通过，但是在构建期间生成共享库时，看起来 ld 在没有指定任何选项的情况下被调用。

是否需要设置不同的 cmake 变量来指定`sysroot`共享库？

我得到的错误是

```
/usr/lib/madde/linux-i686/toolchains/meego-1.2-sdk-ia32-toolchain-1.0-linux_i686/i586-meego-linux-gnu/bin/../lib/gcc/i586-meego-linux-gnu/4.5.1/../../../../i586-meego-linux-gnu/bin/ld: crti.o: No such file: No such file or directory
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-02T12:33:25.800

既然您使用的是交叉编译器工具链，为什么不直接设置**CMAKE_CXX_COMPILER**并将这些`--sysroot=`选项传递给 g++（或 gcc）？

还有一个名为**CMAKE_EXE_LINKER_FLAGS**的标志，解释如下：

```
CMAKE_EXE_LINKER_FLAGS

   Linker flags used to create executables.

   Flags used by the linker when creating an executable. 
```

# c# - 如何为 MVC3 应用程序添加样式并使用它？

> ID：10804299
> 
> 赞同：1
> 
> 时间：2012-05-29T17:59:39.157
> 
> 标签：c#, asp.net-mvc-3

刚开始编程，所以不要太用力，问题很容易解释，但我在互联网上找不到详细的指南，所以我想知道将样式添加到 MVC3 应用程序（Razor 引擎）的**整个过程**

好吧，我当然会使用 CSS，但我确实开始使用 VS10（不久前（甚至一周都没有）VS）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:07:07.820

在解决方案资源管理器中打开内容文件夹。有一个文件叫`Site.css`. 这就是你的 CSS 的去向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T18:23:46.963

Razor 非常适合为您提供漂亮而干净的 HTML 代码，这是它的目标，因此您应该没有任何问题使用 css 对其进行样式设置，为 ASP.NET MVC 应用程序设置样式，这与为普通 HTML 页面或 php 应用程序设置样式没有什么不同, ruby​​ 应用程序等。如果您创建一个新的 css 文件，您应该将它放在“内容”文件夹中，然后从您的视图中调用它，如下所示：

```
<link href="@Url.Content("~/Content/YourCssFile.css")" rel="stylesheet" type="text/css" /> 
```

[如果您是 css 新手，我建议您从 google](http://code.google.com/intl/es/edu/submissions/html-css-javascript/#css)观看本教程。

# javascript - 交叉请求错误：“访问控制允许来源不允许来源”？

> ID：10804301
> 
> 赞同：0
> 
> 时间：2012-05-29T18:00:04.810
> 
> 标签：javascript, jquery, xml, include

我正在尝试从我的一个站点加载另一个站点的内容：

```
<div id='include-from-outside'></div>
<script type='text/javascript'>
  $('#include-from-outside').load('http://lujanventas.com/plugins/banner/index.php&callback=?');
</script> 
```

但我收到了这个错误：

```
XMLHttpRequest cannot load http://lujanventas.com/plugins/banner/index.php&callback=?. Origin http://lventas.com is not allowed by Access-Control-Allow-Origin. 
```

我怎样才能防止它发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T18:03:58.330

有两种选择：

1：使[http://lujanventas.com](http://lujanventas.com)返回正确的 CORS 标头 -- [http://enable-cors.org/](http://enable-cors.org/)

2：使用您的服务器而不是浏览器中的 js 请求 html -- [http://www.daniweb.com/web-development/php/code/216729/php-proxy-solution-for-cross-domain-ajax -脚本](http://www.daniweb.com/web-development/php/code/216729/php-proxy-solution-for-cross-domain-ajax-scripting)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T18:20:03.193

您使用的 url 表明该站点支持 JSONP（请参阅[http://en.wikipedia.org/wiki/JSONP](http://en.wikipedia.org/wiki/JSONP)）。如果是这样，您应该可以这样做：

```
<script type="text/javascript">
    function handleResponse(json){
       var data = JSON.parse(json);
       ...handle data...
    }
</script>
<script src="http://lujanventas.com/plugins/banner/index.php?callback=handleResponse"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T18:14:06.193

使用 jquery ajax 查询加载 lujaventas 内容的 php 文件，然后 ajax 回调将是 lujaventas 内容。

# matlab - Matlab使用vertcat时出错

> ID：10804305
> 
> 赞同：1
> 
> 时间：2012-05-29T18:00:25.917
> 
> 标签：matlab

我正在使用 Matlab 进行编码，粗线出现以下错误（**容器 = [containers(1:j-1); containers(j+1:end)]** ;)

```
Error using vertcat
CAT arguments dimensions are not consistent.

Error in fillContainerWithPolygons (line 77)
                containers = [containers(1:j-1); containers(j+1:end)]; 
```

问题是我有时（并非总是）得到它。

以防万一，容器是一组矩阵，例如 `containers(1:j-1) = [13x2 double] 和 containers(j+1:end) =[4x2 double]

我搜索了很多，但我没有找到问题，任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T18:03:12.733

嗯，你可以通过说

```
containers(j, :) = [] 
```

你的问题也有问题，因为`containers(1:j-1)`不能是 13x2，它必须是 nx1。我假设你的意思是`containers(1:j-1, :)`。

我认为原因`j+1:end`可能只是一个元素，它被视为一列，因为您没有指定`j+1:end, :`.

# mysql - 将数据添加到数据库的每个条目的命令？

> ID：10804309
> 
> 赞同：0
> 
> 时间：2012-05-29T18:00:35.457
> 
> 标签：mysql

如果这是一个愚蠢或简单的问题，我深表歉意，我已经尝试搜索它，但无法找到解决方案；我怀疑我根本不知道这种手术的名称。

我有一个带有“卡片”表的 MySQL 数据库。

卡牌有施法成本，可能包含 0 到 5 种颜色。我想更新卡片表中的每个条目以包含 5 列，每列都是每种可能颜色的布尔值。所以我需要一个简短的算法来解析卡片中的颜色，然后相应地填充 5 个布尔颜色值。

我可以想象如何使用 PHP 脚本来做到这一点，但我认为必须有某种方法可以使用纯 MySQL 来做到这一点。我弄错了吗，或者这种类型的脚本有名字吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T18:12:12.833

我理解您的问题意味着您的`card`表当前有一个名为的列`casting cost`，其中包含一组颜色，例如`'red,green'`or`'blue,orange,yellow'`并且您正在寻找一个查询，该查询产生布尔列，指示每种可能的颜色是否在`casting cost`?

如果是这样，MySQL的[`FIND_IN_SET()`](http://dev.mysql.com/doc/en/string-functions.html#function_find-in-set)功能应该给你你所追求的：

```
SELECT *,
       FIND_IN_SET('red',    `casting cost`) > 0 AS red,
       FIND_IN_SET('blue',   `casting cost`) > 0 AS blue,
       FIND_IN_SET('green',  `casting cost`) > 0 AS green,
       FIND_IN_SET('orange', `casting cost`) > 0 AS orange,
       FIND_IN_SET('yellow', `casting cost`) > 0 AS yellow
FROM   card 
```

如果要永久更改表以包含此类列：

```
ALTER TABLE card
  ADD COLUMN red    BOOLEAN NOT NULL DEFAULT FALSE,
  ADD COLUMN blue   BOOLEAN NOT NULL DEFAULT FALSE,
  ADD COLUMN green  BOOLEAN NOT NULL DEFAULT FALSE,
  ADD COLUMN orange BOOLEAN NOT NULL DEFAULT FALSE,
  ADD COLUMN yellow BOOLEAN NOT NULL DEFAULT FALSE

UPDATE card SET
  red    = FIND_IN_SET('red',    `casting cost`) > 0,
  blue   = FIND_IN_SET('blue',   `casting cost`) > 0,
  green  = FIND_IN_SET('green',  `casting cost`) > 0,
  orange = FIND_IN_SET('orange', `casting cost`) > 0,
  yellow = FIND_IN_SET('yellow', `casting cost`) > 0 
```

# php - PHP 检查用户代理和 IP 以防止会话劫持

> ID：10804310
> 
> 赞同：6
> 
> 时间：2012-05-29T18:00:45.420
> 
> 标签：php, security, session, session-hijacking

我试图弄清楚如何防止会话劫持。这就是我想做的事情：

除了用户 ID 会话，还添加一个用户代理和用户 IP 会话。每次加载页面时，都会检查这些会话以查看它们是否匹配 - 这是否足够？例如：

```
<?php

$userIp = $_SESSION['userIp'];
$userAgent = $_SESSION['userAgent'];

if ($userIp != $_SERVER['REMOTE_ADDR'] || $userAgent != $_SERVER['HTTP_USER_AGENT'] {
    session_destroy();
}

?> 
```

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-29T18:04:37.683

它比这复杂得多。您的站点/服务将被具有不同设置的各种人访问。可能出错的第一件事是有人正在通过代理服务器。您的应用程序将看到的 IP 可能会发生变化，并且会话对于有效用户来说将达到平衡。

如果您绝对需要对 IP 做一些事情，那么在不出现太多误报的情况下，您最多可以检查原始国家/地区。如果您检测到一个来自加拿大的登录和另一个来自印度的登录，则可能存在问题。即使这样，它也不是万无一失的。

用户代理也太容易伪造了：如果我能得到某人的`PHPSESSIONID`，那么我肯定也能得到他们的用户代理。所以这里没有做太多的事情。

保护某人会话的最佳方法是将所有经过身份验证的内容置于 HTTPS 之后，并确保会话 cookie 仅支持 HTTPS。

**编辑**：如果涉及到您在会话后面保护的数据非常敏感，并且您的用户需要注意这一点，您可以随时向他们显示为他们的用户登录的其他会话。例如，GMail 也做了同样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T18:17:19.053

我同意z42

我还想建议一种方法，每次用户成功登录到您的站点时，您都​​可以生成一个 SALT 并将其存储在会话和您的数据库中，并设置条件来检查用户是否已经登录，用这个您不能阻止多个用户多次使用同一帐户登录并在用户注销时从数据库中销毁 SALT。

# ruby - 瑞克失败了！不知道如何“向上”构建任务

> ID：10804317
> 
> 赞同：0
> 
> 时间：2012-05-29T18:01:16.410
> 
> 标签：ruby, windows, ruby-on-rails-3

我在迁移时遇到了麻烦。感谢您分享您的时间，感谢您的帮助！

*   视窗 7（64 位）
*   红宝石：1.9.2p290
*   导轨：3.2.3
*   MySQL：5.5.24

```
> rake db：向上迁移 VERSION=20120529170841 --trace
** 调用 db:migrate (first_time)
** 调用环境（first_time）
** 执行环境
** 调用 db:load_config (first_time)
** 调用 rails_env (first_time)
** 执行 rails_env
** 执行 db:load_config
** 执行数据库：迁移
** 调用 db:_dump (first_time)
** 执行 db:_dump
** 调用 db:schema:dump (first_time)
** 调用环境
** 调用 db:load_config
** 执行 db:schema:dump
耙中止！
不知道如何“向上”构建任务
C:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task_manager.rb:49:in
`[]'
C:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:115:in
`invoke_task'
C:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in`
top_level 中的块（2 级）'
C:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in`
每个'
C:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in`
阻止顶层'
C:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in
`标准异常处理'
C:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:88:in`
顶层'
C:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:66:in`
阻止运行'
C:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in
`标准异常处理'
C:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:63:in`
跑'
C:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/bin/rake:33:in `'
C:/Ruby192/bin/rake:23:in `load'
C:/Ruby192/bin/rake:23:in `'

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T18:05:09.203

正确的语法是

```
rake db:migrate:up VERSION=2012052917 
```

而不是 ( `rake db:migrate up ...`)

# javascript - jQuery 谷歌分析跟踪

> ID：10804318
> 
> 赞同：1
> 
> 时间：2012-05-29T18:01:16.757
> 
> 标签：javascript, jquery, google-analytics

我正在尝试使用 jQuery 来跟踪网页上的下载和其他事件。很难调试这个。下面的代码目前不工作。假设页面加载了 jQuery 库，并且所有 XXXX 都替换为正确的信息。有任何想法吗？非常感激！

```
<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-XXXXX']);
    _gaq.push(['_setDomainName', 'XXXXX.com']);
    _gaq.push(['_addIgnoredRef', 'XXXXX.com']);
    _gaq.push(['_trackPageview']);
    if (jQuery) {
        jQuery(document).ready(function () {
            jQuery('a').click(function () {
                var $a = jQuery(this);
                var href = ($a.attr('href')) ? $a.attr('href') : '';
                if ((href.match(/^http/i)) && (!href.match(document.domain))) {
                    var category = 'outgoing - XXXX Landing';
                    var event = 'click - XXXX Landing';
                    _gaq.push(['_trackEvent', category, event, href]);
                } else {
                    if (href.match(/.(doc|pdf|xls|ppt|zip|txt|vsd|vxd|js|css|rar|exe|wma|mov|avi|wmv|mp3)$/i)) {
                        var category = 'download - XXXX Landing';
                        var event = 'click - XXXX Landing';
                        _gaq.push(['_trackEvent', category, event, href]);
                    } else {
                        if (href.match(/^mailto:/i)) {
                            var category = 'mailto - XXXX Landing';
                            var event = 'click - XXXX Landing';
                            _gaq.push(['_trackEvent', category, event, href]);
                        }
                    }
                }
            });
        });
    }

    (function () {
        var ga = document.createElement('script');
        ga.type = 'text/javascript';
        ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        if ('http:' == document.location.protocol) {
            ga.src = 'http://www.google-analytics.com/ga.js';
        } else {
            ga.src = 'https://ssl.google-analytics.com/ga.js';
        }
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
    })();
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:19:56.420

Google Analytics 内置了事件跟踪。

例如，如果您尝试跟踪文件下载，您可以执行以下操作 -

HTML：

```
<a href="sample.pdf" class="download">Click to download.</a> 
```

JS：

```
$("a.download").click(function() {
    _gaq.push(['_trackEvent', 'Files', 'Downloaded'])
}); 
```

这是 Google 的官方[事件跟踪指南](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide)。该指南将为您更详细地解释所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T18:20:51.410

我可能会使用 $.getScript 来下载 GA 代码并将其应用到 DOM，而不是它们作为样板提供给您的长格式的东西。在运行设置跟踪代码、域等的内容之前，您还需要在 DOM 中使用它，否则 _gaq 将不会做任何事情。

# extjs - Rally App SDK 2.0：初始创建后无法修改 QueryFilter 对象

> ID：10804321
> 
> 赞同：3
> 
> 时间：2012-05-29T18:01:36.563
> 
> 标签：extjs, combobox, rally

我正在尝试通过使用 QueryFilter 对象为一个拉力板动态创建过滤器。我首先创建一个 QueryFilter 数组，其中包含对一个属性/值对的过滤。然后，我检查其他一些字段的值以确定是否将这些属性添加到 QueryFilter。但是，似乎在创建之后，即使我能够访问该对象，它也拒绝被附加到。

以下是它的结构示例：

```
var filters = [Ext.create('Rally.data.QueryFilter', {
    property: 'attr1',
    operator: '=',
    value: this.attr1
})];

if (this.attr2 !== "") {
    filters[0].and(Ext.create('Rally.data.QueryFilter', {
        property: 'attr2',
        operator: '=',
        value: this.attr2
    }));
}

if (this.attr3 !== "") {
    filters[0].or(Ext.create('Rally.data.QueryFilter', {
        property: 'attr3',
        operator: '=',
        value: this.attr3
    }));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T22:15:44.283

看起来返回的对象必须在数组内重新分配，如下所示：

```
var filters = [Ext.create('Rally.data.QueryFilter', {
    property: 'attr1',
    operator: '=',
    value: this.attr1
})];

if (this.attr2 !== "") {
    filters = [filters[0].and(Ext.create('Rally.data.QueryFilter', {
        property: 'attr2',
        operator: '=',
        value: this.attr2
    }))];
}

if (this.attr3 !== "") {
    filters = [filters[0].or(Ext.create('Rally.data.QueryFilter', {
        property: 'attr3',
        operator: '=',
        value: this.attr3
    }))];
} 
```

# ruby - 如何从方法中返回特定值？

> ID：10804323
> 
> 赞同：1
> 
> 时间：2012-05-29T18:02:11.373
> 
> 标签：ruby

我有这段代码试图从方法中返回一个值：

```
temp = "123"
return temp 
```

我有这一行调用该方法并分配返回值：

```
person_connections = @client.get_person_connections(:id => current_user_id ) 
```

但是当我尝试检查时`person_connections`，它会显示一些不同的对象字符串。知道如何返回 temp 变量的实际值吗？

```
 def get_person_connections(options = {})
    person_id = options[:id]
    path = "/people/id=" + person_id + ":(num-connections)" 
    query_connections(path, options)
    self
  end 
```

和

```
private

def query_connections(path, options={})
  fields = options.delete(:fields) || LinkedIn.default_profile_fields

  if options.delete(:public)
    path +=":public"
  elsif fields
    path +=":(#{fields.map{ |f| f.to_s.gsub("_","-") }.join(',')})"
  end

  headers = options.delete(:headers) || {}

  params = options.map { |k,v| v.is_a?(Array)  ? v.map{|i| "#{k}=#{i}"}.join("&") : "#{k}=#{v}" }.join("&")

  path   += "?#{params}" if not params.empty?

  temp_var = get(path, headers)

  hash = JSON.parse(temp_var)
  conn = hash["numConnections"]
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T18:14:12.753

正如萨米在评论中所说：

> 在 Ruby 中，将返回最后一条语句。

因此，如果我们看一下`get_person_connections`，我们会看到最后一行是`self`. 这意味着它返回调用该方法的实例，`@client`在这种情况下。

* * *

**附加说明**：解决方案是 remove `self`，尽管如果在其他地方使用该方法要小心，因为返回`self`通常用于允许方法链接（尽管在方法上这样做几乎没有意义`get`）。

# c - connect(2) 调用是否使用了完整的 struct sockaddr_in 或者仅使用 struct in_addr 就足够了？

> ID：10804325
> 
> 赞同：0
> 
> 时间：2012-05-29T18:02:16.140
> 
> 标签：c, network-programming

我很好奇，因为 connect(2) 的手册页很短，而且它需要一个 struct sockaddr* ，无论如何它通常都会被强制转换..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T18:37:36.897

`sockaddr_in`甚至`in_addr`不相似。没有办法。那里不同，因为通常需要不止一个地址。例如，需要一个端口号来建立连接一个 IP 套接字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T18:44:25.363

调用的`connect(2)`工作方式取决于您使用的套接字域（即作为第一个参数传递给 的值[`socket(2)`](http://linux.die.net/man/2/socket)）。如果您使用的是`AF_INET`协议系列，则`connect`需要一个`sockaddr_in`. 如果您正在使用该`AF_INET6`协议，那么它需要一个`sockaddr_in6`，其他协议系列有自己的地址结构。

无论您使用哪个协议系列，您都应该只`struct sockaddr`在调用`connect`或任何其他套接字函数时使用该系列的地址结构，强制转换为 a 。

# web-services - SaaS/Web 服务方法，例如十二要素应用程序？

> ID：10804326
> 
> 赞同：2
> 
> 时间：2012-05-29T18:02:18.163
> 
> 标签：web-services, web-applications, architecture, cloud, saas

[除了12 要素应用程序](http://www.12factor.net/)之外，还有哪些 SaaS/Web 服务方法？我不是在寻找敏捷或工艺之类的宣言，而是提供有关如何设计和架构系统的细节的方法论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:56:24.110

*   [扎克曼框架](http://en.wikipedia.org/wiki/Zachman_Framework)
*   [TOGAF](http://pubs.opengroup.org/architecture/togaf8-doc/arch/)
*   [动态系统开发方法](http://www.dsdm.org/)
*   [统一流程](http://en.wikipedia.org/wiki/Unified_Process)
*   [受控环境中的项目 2 (PRINCE2)](http://en.wikipedia.org/wiki/PRINCE2)
*   [整合可持续方法的项目 (PRiSM)](http://en.wikipedia.org/wiki/PRiSM)

面向服务的敏捷性概述： IBM 架构师[成功开发面向服务的架构 (SOA) 的方法。](http://www.ibm.com/developerworks/webservices/library/ws-agile1/)

[面向服务的设计和开发方法论](http://arno.uvt.nl/show.cgi?fid=106517)的学术观点。

# c# - 代码在 localhost 上运行良好，但不在 gatorhost 上执行

> ID：10804335
> 
> 赞同：0
> 
> 时间：2012-05-29T18:02:51.747
> 
> 标签：c#, asp.net, ajax, iis

我用 VWD 写了一个小网站。我正在使用 VWD 的本地主机功能在我的家用机器上运行它。它运行完美。

现在是背景故事。我有一个带有 gatorhost 的 linux 服务器。我让他们将我的域和服务器类型切换到 windows，因为我决定学习 asp.net(c#)。我在电话上遇到了一百万个问题。当您搜索我的域时无法连接的问题以及我的电子邮件功能和 ftp 功能都搞砸了，他们花了好几个小时才在多个电话和工单中解决这个问题。

所以现在我认为我已经完成了所有工作，我通过 VWD 将我的网站加载到我的服务器 (www.contentiousweb.com) 上，就表单验证和链接而言，我所有的前端代码都可以正常工作。

当我点击将执行我的 c# 代码的提交按钮时，什么也没有发生。不是一回事。当表格填写错误时，验证工作。我没有错误或任何东西。我喜欢不知道从哪里开始。是我在服务器上的代码吗？我能在多大程度上依赖 VWD 是正确的，因为我不能依赖我自己，哈哈。

网络配置文件。（我换掉了我的密码和电子邮件）

```
<system.net>
<mailSettings>
<smtp deliveryMethod="Network" from="Ralph &lt;********@hotmail.com&gt;">
<network enableSsl="true" host="smtp.live.com" userName="*************@hotmail.com" password="***********" port="587" />
</smtp>
</mailSettings>
</system.net> 
```

波纹管是按钮。

```
protected void Button1_Click(object sender, EventArgs e)
{

if (Page.IsValid)
{
string fileName = Server.MapPath("_TextFiles/ContactForm.txt");
string mailBody = File.ReadAllText(fileName);

mailBody = mailBody.Replace("##Name##", nameBox.Text);
mailBody = mailBody.Replace("##Email##", emailBox.Text);
mailBody = mailBody.Replace("##Subject##", subBox.Text);
mailBody = mailBody.Replace("##Message##", MsgField.Text);

MailMessage myMessage = new MailMessage();
myMessage.Subject = "Response from  Contact Page";
myMessage.Body = mailBody;

myMessage.From = new MailAddress("******", "Contact");
myMessage.To.Add(new MailAddress("******", " Server"));

SmtpClient mySmtpClient = new SmtpClient();
mySmtpClient.Send(myMessage);

Message.Visible = true;
ContactTable.Visible = false;
System.Threading.Thread.Sleep(5000);

}
}

} 
```

任何帮助将不胜感激。我是新手，正在学习，但根据我的经验和与 hostgator 的问题，我认为这是有问题的，因为其他一切都是如此。我一无所知。

如果我可以提供更多信息，请告诉我。感谢您的任何帮助

在我自己的故障排除中，我刚刚使用 mozila 开发工具发现了这个错误。

```
[18:03:28.399] Sys.WebForms.PageRequestManagerServerErrorException: An unknown error occurred while processing the request on the server. The status code returned from the server was: 500 @ http://contentiousweb.com/ScriptResource.axd?d=EJBSV2JIVC3wCtbtVqDWEZfeOsqUeA-l1kZnjjZKvx15e0cjnzPdj4H78hvszmtfrIhAM96VdUstdDjn1xGAbsydMzIjEQeNWDOz2tihnjEjxDW5esVemHLoHR01oIyUBoZTNPd7atx4-EPBnuVlWYbQIeLdoH_eBXy1j9kav6ac2ptv4Cl8sraaDBGXntVH0&t=ffffffff940d030f:1507 
```

感谢您的任何帮助，我仍在寻找自己的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T18:02:37.347

我搞定了。在与 gatorhost 通了四个小时的电话后，我们确定他们提供给我的 smtp 信息不起作用。他们让我把我的主人换成

```
<system.net>
<mailSettings>
<smtp deliveryMethod="Network">
<network  host="localhost" userName="*************@hotmail.com" password="***********" port="25" />
</smtp>
</mailSettings>
</system.net> 
```

现在一切正常，没有错误。感谢所有帮助提出想法的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T22:17:22.187

我在您的代码中没有看到分配端口号或凭据？

这段代码应该可以工作

```
// SMTP options
string Host = "smtp.mail.emea.microsoftonline.com";
Int16 Port = 587;
bool SSL = true;
string Username = "myname@mydomain.com";
string Password = "mypassword";

// Mail options
string To = "reciever@recieverdomain.com";
string From = "myname@mydomain.com";
string Subject = "This is a test";
string Body = "It works!";

MailMessage mm = new MailMessage(From, To, Subject, Body);
SmtpClient sc = new SmtpClient(Host, Port);
NetworkCredential netCred = new NetworkCredential(Username, Password);
sc.EnableSsl = SSL;
sc.UseDefaultCredentials = false;
sc.Credentials = netCred;

try
{
   Console.WriteLine("Sending e-mail message...");
  sc.Send(mm);
}
catch (Exception ex)
{
   Console.WriteLine("Error: {0}", ex.ToString());
} 
```

# xml - Ms Word 2003 和 2007 xml 差异

> ID：10804340
> 
> 赞同：1
> 
> 时间：2012-05-29T18:03:11.447
> 
> 标签：xml, ms-word, wordml

有人可以解释 Word 2003 和 2007 的 xml 结构的差异吗？干杯! :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T19:08:48.330

这是一个非常广泛的问题，因此很难知道您正在寻找什么样的解释，但要点可以说是：

一种。Word 2003 XML 文件是真正的未压缩 XML 格式文件，可保存为单个未压缩文本文件。Word 2007 可以保存为该格式，但其本机格式是存储在 .zip 文件中的 XML 和其他文件（例如，图像文件）的捆绑。主文档正文、页眉/页脚、脚注、样式、文档属性等有单独的 XML 文件。但是，Word 2007 也可以保存为它自己的单一、未压缩的 XML 文件格式，通常称为“平面 OPC”。

湾。Word 2003 格式中使用的主要命名空间 URI 是[http://schemas.microsoft.com/office/word/2003/wordml](http://schemas.microsoft.com/office/word/2003/wordml)

主文档的 Word 2007 格式中使用的主命名空间 URI 是 [http://schemas.openxmlformats.org/wordprocessingml/2006/main](http://schemas.openxmlformats.org/wordprocessingml/2006/main)

使用了其他几个名称空间 URI，但在 Word 2007 的情况下，如果您希望 ZIP 中包含的每种 xml 文档类型都有不同的主名称空间。

C。Word 2003 格式在 Microsoft 之外不是 AFAIK 标准化的。Word 2007 格式是 ECMA-376 和 ISO 29500 这两个标准的基础。AFAICR 2007 符合或几乎符合 ECMA-376。只有 .zip 压缩格式是 stadardises。Flat OPC 格式不是，AFAIK 它使用的附加 XML 命名空间从未被正式记录（不是很难理解）。

由于 OOXML 格式将 Word 文档拆分为多个单独的 XML 文档和其他组件（通常称为“部分”），因此该格式还使用“关系”文件，其中包含定义部分与另一部分之间关系的 XML。例如，如果主文档包含图片，则主文档的 XML 可能需要引用图像文件部分，但通常会使用关系 ID 而不是直接命名该部分。

# file - 创建一个bat文件

> ID：10804344
> 
> 赞同：0
> 
> 时间：2012-05-29T18:03:32.293
> 
> 标签：file, batch-file, automation, hex, edit

我想自动化十六进制编辑，十六进制编辑器是 HxD.exe 我会将 HxD.exe 复制到与将要编辑的 exe 相同的文件夹中。我想要某种：打开 hxd.exe 打开 etc.exe 将 0004A0-0004A3 **00 00 80 3F**更改 为 00 00 40 3F

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:23:11.973

在不知道 HxD.exe 的详细信息的情况下，很难说清楚。但是，您可以使用 Windows PowerShell 来实现周边操作。例如：

```
# Assuming hxd.exe and <SourceFile> exist in c:\MyFolder
Set-Location -Path:c:\MyFolder;
# 
Start-Process -FilePath:hxd.exe -ArgumentList:'-hxd args -go here'; 
```

除了更改当前目录上下文，您还可以像这样设置进程的工作目录：

```
Start-Process -WorkingDirectory:c:\MyFolder -FilePath:hxd.exe -ArgumentList:'-hxd args -go here'; 
```

根据 hxd.exe 的工作方式，您还可以将 hxd.exe 放在任意文件夹中，并使用其绝对路径传入源文件：

```
$SourceFile = 'c:\MyFolder\sourcefile.bin';
$HxD = 'c:\path\to\hxd.exe';
Start-Process -FilePath $HxD -ArgumentList ('-SourceFile "{0}" -Range 0004A0-0004A3' -f $SourceFile); 
```

希望这能推动您朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:44:29.597

我没有在 HxD 网站上看到任何命令行选项，所以我将给你一个纯 PowerShell 替代方案，假设编辑文件对你来说比你用来进行编辑的程序更重要（和你有 PowerShell 可用）...

将以下内容复制到名为 Edit-Hex.ps1 的文件中：

```
<#
.Parameter FileName
The name of the file to open for editing.

.Parameter EditPosition
The position in the file to start writing to.

.Parameter NewBytes
The array of new bytes to write, starting at $EditPosition
#>
param(
    $FileName,
    $EditPosition,
    [Byte[]]$NewBytes
)
$FileName = (Resolve-Path $FileName).Path
if([System.IO.File]::Exists($FileName)) {
    $File = $null
    try {
        $File = [System.IO.File]::Open($FileName, [System.IO.FileMode]::Open)
        $File.Position = $EditPosition
        $File.Write($NewBytes, 0, $NewBytes.Length)
    } finally {
        if($File -ne $null) {
            try {
                $File.Close()
                $File = $null
            } catch {}
        }
    }
} else {
    Write-Error "$Filename does not exist"
} 
```

然后您的示例将像这样工作：

```
.\Edit-Hex.ps1 -FileName c:\temp\etc.exe -EditPosition 0x4a0 -NewBytes 00,00,0x40,0x3f 
```

请注意，新值必须以逗号分隔的列表形式输入以创建数组，并且默认情况下这些值将被解释为十进制，因此您需要转换为十进制或使用`0x00`格式输入十六进制。

如果这对您不起作用，那么为您提供 HxD 的命令行选项会很有帮助，以便我们可以帮助您构建适当的包装器。

# python - 获取除数字以外的任何字符

> ID：10804345
> 
> 赞同：0
> 
> 时间：2012-05-29T18:03:42.310
> 
> 标签：python, regex

我正在尝试搜索具有 6 位数字的字符串，但仅此而已，其他字符可能会跟随。这是我使用的正则表达式`\d{6}[^\d]`由于某种原因它没有捕捉到确实捕捉到的数字`\d{6}`。

### 更新

现在我正在使用确实有意义的正则表达式 (\d{6}\D*)$。但无论如何我都无法让它工作。

### 更新 2 - 解决方案

我当然应该用括号将 \d{6} 分组。嗬！否则，它会包含非数字并尝试与之约会。

### 更新结束

我想要达到的目标（作为一个相当肮脏的黑客）是在以下格式之一的 openoffice 文档的标题中找到一个日期字符串：`YYMMDD`,`YYYY-MM-DD`或`YYYYMMDD`. 如果它找到其中之一（并且只有一个），它将将该文件的 mtime 和 atime 设置为该日期。尝试在 /tmp`100101`的标头中创建一个 odt 文件并运行此脚本（要下载的示例文件：http: [//db.tt/9aBaIqqa](http://db.tt/9aBaIqqa)）。根据我的测试，它不应该改变 mtime/atime。但是，如果您在下面的脚本中删除 \D，它将改变它们。

这是我的全部来源：

```
import zipfile
import re
import glob
import time
import os

class OdfExtractor:
    def __init__(self,filename):
        """
        Open an ODF file.
        """
        self._odf = zipfile.ZipFile(filename)

    def getcontent(self): 
        # Read file with header
        return self._odf.read('styles.xml')

if __name__ == '__main__':
    filepattern = '/tmp/*.odt'

    # Possible date formats I've used
    patterns = [('\d{6}\D', '%y%m%d'), ('\d{4}-\d\d-\d\d', '%Y-%m-%d'), ('\d{8}', '%Y%m%d')]

    # go thru all those files
    for f in glob.glob(filepattern):
        # Extract data
        odf = OdfExtractor(f)

        # Create a list for all dates that will be found
        findings = []

        # Try finding date matches
        contents = odf.getcontent()
        for p in patterns:
            matches = re.findall(p[0], contents)
            for m in matches:
                try:
                    # Collect regexp matches that really are dates
                    findings.append(time.strptime(m, p[1]))
                except ValueError:
                    pass

        print f
        if len(findings) == 1: # Don't change if multiple dates was found in file
            print 'ändrar till:', findings[0]
            newtime = time.mktime(findings[0])
            os.utime(f, (newtime, newtime))
        print '-' * 8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:14:50.247

试试这个：

```
r'(\d{6}\D*)$' 
```

（六位数字后跟 0 个或更多非数字）。

编辑：添加了“必须匹配到字符串结尾”限定符。

Edit2：哦，看在皮特的份上：

```
import re

test_strings = [
    ("12345", False),
    ("123456", True),
    ("1234567", False),
    ("123456abc", True),
    ("123456ab9", False)
]

outp = [
    "  good, matched",
    "FALSE POSITIVE",
    "FALSE NEGATIVE",
    "  good, no match"
]

pattern = re.compile(r'(\d{6}\D*)$')
for s,expected in test_strings:
    res = pattern.match(s)
    print outp[2*(res is None) + (expected is False)] 
```

返回

```
 good, no match
  good, matched
  good, no match
  good, matched
  good, no match 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T18:04:41.103

您可以使用`\D`（大写 D）匹配任何非数字字符。

正则表达式：

```
\d{6}\D 
```

原始字符串：（你确定你正确地转义了字符串吗？）

```
ex = r"\d{6}\D" 
```

细绳：

```
ex = '\\d{6}\\D' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T19:12:34.523

我很愚蠢。如果我`\D`在搜索的末尾添加一个，搜索当然会返回我不想要的 none 数字。我必须在我真正想要的部分添加括号。我觉得很愚蠢，因为没有在循环后用一个简单的打印语句来捕捉这一点。我真的需要更频繁地编码。

# file - 在批处理文件中，从包含西班牙语字符的文件中的行中设置变量

> ID：10804346
> 
> 赞同：0
> 
> 时间：2012-05-29T18:03:43.310
> 
> 标签：file, variables, text, batch-file

我在这个网站上发现了这个有用的脚本，用于为 txt 文件中的行中的变量赋值。

```
@echo off

setlocal ENABLEDELAYEDEXPANSION
set vidx=0
for /F "tokens=*" %%A in (caplist.txt) do (
    SET /A vidx=!vidx! + 1
    set var!vidx!=%%A
    echo %%A
)
set var > test.txt
pause 
```

它工作正常，但我的文本文件中的行包含西班牙字符，如 ñ、é 等。 test.txt 中的行没问题，但 for 循环中的回显显示异国字符。顺便说一句，我只需对文件执行一个简单的 Type 命令即可获得相同的效果。

有人可以帮忙吗？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:38:14.650

这是因为显示 cmd.exe 输出的终端窗口使用了不同的代码页，其中 caplist.txt 中的字符被编码。

它们可能是使用 ISO 8859-1 或 UTF-8 编码的。

在您的终端上尝试`chcp 1250`，看看这是否能解决您的问题。

如果不是，则以十六进制转储文本文件并找出使用的编码，并相应地设置终端代码页。

# c# - 从 datagridview 中删除多行

> ID：10804347
> 
> 赞同：0
> 
> 时间：2012-05-29T18:03:44.293
> 
> 标签：c#

我有一个数据网格视图，其中插入了值。网格视图是这样的。

```
 Item                PRID                 
   ------              ------               
    Item1                1
    Item2                2
    Item3                2 
```

我正在尝试将 PRID 与保存所选行 PRID 的变量进行比较。到目前为止我所做的。

```
 foreach (DataGridViewRow dgv_r in PurchaseOrder_dgv.Rows)
                {
                    if (dgv_r.Cells[1].Value.ToString() == CurrentSelected_PRID_ForPurchaseOrder.ToString())
                    {
                        PurchaseOrder_dgv.Rows.Remove(dgv_r);
                    }
                } 
```

但它删除了底行而不是第二行。并给出以下错误。我想要的是如果值`CurrentSelected_PRID_ForPurchaseOrder`等于 2，那么它应该删除两行。我也尝试过使用 for 循环，但它给了我索引超出范围错误。它给出以下错误。

```
 Object Reference Not set to an instance of object 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:24:17.833

有几种方法可以解决这个问题。一是做到以下几点

```
for (int i = dataGridView1.RowCount - 1; i >= 0; i--)
    if (String.Compare(dataGridView1.Rows[i].Cells[1].Value.ToString(), "2") == 0)
        dataGridView1.Rows.Remove(dataGridView1.Rows[i]); 
```

这是从底部循环的`DataGridView`，避免了在迭代时删除行的问题。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T18:18:56.093

正如 mellamokb 指出的那样，原因是您在 foreach 期间编辑了集合。一种解决方案是先将具有相同 PRID 的行存储在列表中，然后再将其删除。像这样的东西

```
var rowsToRemove = new List<int>();

foreach (DataGridViewRow dgv_r in PurchaseOrder_dgv.Rows)
{
    if (dgv_r.Cells[1].Value.ToString() == CurrentSelected_PRID_ForPurchaseOrder.ToString())
    {
        rowsToRemove.Add(dgv_r.Index);
    }
}

rowsToRemove.Reverse();
rowsToRemove.ForEach(i => PurchaseOrder_dgv.Rows.RemoveAt(i)); 
```

另一种解决方案是使用 while 循环，它考虑到集合大小变化的可能性。

```
int i = 0;
while (i < PurchaseOrder_dgv.Rows.Count)
{
    if (PurchaseOrder_dgv.Rows[i].Cells[1].Value.ToString() == CurrentSelected_PRID_ForPurchaseOrder.ToString())
    {
        PurchaseOrder_dgv.Rows.RemoveAt(i);
    }
    i++;
} 
```

# python - 从 Python 线程调用的 ActiveX DLL

> ID：10804353
> 
> 赞同：1
> 
> 时间：2012-05-29T18:04:07.833
> 
> 标签：python, multithreading, activex

我有一个 ActiveX (COM) DLL，它可以进行 Windows 系统调用（例如 ReadFile() 和 WriteFile()）。它在主要的 Python GUI 线程中运行良好。但是当从线程调用时，我的 Python GUI 崩溃了。我在网上做一些研究，我想我需要对 GIL 做点什么。我在正确的轨道上吗？或者请指出我正确的方向。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:02:09.900

正如 Vladimir 提到的，我可能是您的 COM 组件不是多线程安全的，您可能会测试您的 DLL 注册的“Apartment”类型。这篇[文章](http://www.codeproject.com/Articles/9190/Understanding-The-COM-Single-Threaded-Apartment-Pa)很好地概述了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T18:38:35.290

不看代码很难说什么，但很可能是：

1.  您的 ActiveX 根本不支持多线程（其中许多不支持）并且您尝试使用来自不同线程的对象。
2.  包含 ActiveX 的 DLL 执行一些每个线程的初始化，但是当您从另一个线程调用它时，它不会被初始化。

无论如何，我对 GIL 无话可说，但在我过去处理过 ActiveX 之后，我相信问题的根源很可能是 ActiveX。

# ruby-on-rails - Ruby on Rails 应用程序 500 内部服务器错误

> ID：10804355
> 
> 赞同：1
> 
> 时间：2012-05-29T18:04:17.487
> 
> 标签：ruby-on-rails

我可以从公共文件夹中的浏览器中获取 index.html 和一个测试页面，但是控制器中的确切/路径没有出现。浏览器会继续搜索该页面，直到我停止它。它适用于我的测试环境，也适用于 Heroku，但不适用于我的亚马逊 ec2 服务器。我正在使用 Ubuntu 11.10。为什么会这样？提前致谢。

更新：看起来我收到 500 内部服务器错误，并且看不到控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:08:49.730

事实证明，我需要通过执行以下操作之一来编译资产

将此添加到我的 deploy.rb 文件

```
after "deploy:restart", "deploy:precompile"

namespace :deploy do

  desc "Compile assets"
  task :precompile, :roles => :app do
    run "cd #{release_path} && rake RAILS_ENV=#{rails_env} assets:precompile"
  end

end 
```

在当前目录中运行它

```
RAILS_ENV=production rake assets:precompile 
```

或将其添加到 capfile

```
load 'deploy/assets' 
```

# ruby - Heroku 推送被拒绝，无法通过 Bundler 安装 gem

> ID：10804357
> 
> 赞同：1
> 
> 时间：2012-05-29T18:04:24.573
> 
> 标签：ruby, heroku, gem

第一次尝试推送到 heroku 应用程序时遇到问题，我在线创建了该应用程序并添加了 heroku git。但做完之后

```
git push heroku master 
```

我得到以下回应

```
-----> Heroku receiving push
-----> Ruby/Sinatra app detected
-----> Gemfile detected, running Bundler version 1.0.7
       Unresolved dependencies detected; Installing...
       Using --without development:test
       You have modified your Gemfile in development but did not check
       the resulting snapshot (Gemfile.lock) into version control

       You have added to the Gemfile:
       * reloader

       You have deleted from the Gemfile:
       * fleakr
       FAILED: http://devcenter.heroku.com/articles/bundler
 !     Heroku push rejected, failed to install gems via Bundler

To git@heroku.com:boxing-api.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:boxing-api.git' 
```

我错过了什么？

我在 Windows 上运行

- - - 编辑 - - -

这是我从运行“捆绑安装”中得到的

```
C:\Users\Steve\Documents\GitRespository\score card app>bundle install
Fetching source index for http://rubygems.org/
Using multi_json (1.0.4)
Using activesupport (3.1.3)
Using builder (3.0.0)
Using i18n (0.6.0)
Using activemodel (3.1.3)
Using addressable (2.2.6)
Using backports (2.3.0)
Using bson (1.5.2)
Using bson_ext (1.5.2)
Using daemons (1.1.8)
Using dm-core (1.2.0)
Using dm-migrations (1.2.0)
Using dm-timestamps (1.2.0)
Using dm-validations (1.2.0)
Using escape_utils (0.2.4)
Installing eventmachine (0.12.10) with native extensions
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension
.

        C:/Ruby193/bin/ruby.exe extconf.rb
checking for rb_trap_immediate in ruby.h,rubysig.h... no
checking for rb_thread_blocking_region()... yes
checking for inotify_init() in sys/inotify.h... no
checking for __NR_inotify_init in sys/syscall.h... no
checking for writev() in sys/uio.h... no
checking for rb_thread_check_ints()... yes
checking for rb_time_new()... yes
checking for windows.h... yes
checking for winsock.h... yes
checking for main() in -lkernel32... yes
checking for main() in -lrpcrt4... yes
checking for main() in -lgdi32... yes
checking for main() in -lssl... no
creating Makefile

make
generating rubyeventmachine-i386-mingw32.def
compiling binder.cpp
cc1plus.exe: warning: command line option "-Wdeclaration-after-statement" is val
id for C/ObjC but not for C++
cc1plus.exe: warning: command line option "-Wimplicit-function-declaration" is v
alid for C/ObjC but not for C++
In file included from project.h:137:0,
                 from binder.cpp:20:
binder.h:35:34: warning: type qualifiers ignored on function return type
In file included from project.h:138:0,
                 from binder.cpp:20:
em.h:91:47: warning: type qualifiers ignored on function return type
em.h:92:76: warning: type qualifiers ignored on function return type
em.h:93:56: warning: type qualifiers ignored on function return type
em.h:95:57: warning: type qualifiers ignored on function return type
em.h:96:60: warning: type qualifiers ignored on function return type
em.h:97:58: warning: type qualifiers ignored on function return type
em.h:98:55: warning: type qualifiers ignored on function return type
em.h:99:36: warning: type qualifiers ignored on function return type
em.h:101:47: warning: type qualifiers ignored on function return type
em.h:106:42: warning: type qualifiers ignored on function return type
em.h:123:45: warning: type qualifiers ignored on function return type
em.h:132:36: warning: type qualifiers ignored on function return type
In file included from project.h:145:0,
                 from binder.cpp:20:
eventmachine.h:45:61: warning: type qualifiers ignored on function return type
eventmachine.h:46:112: warning: type qualifiers ignored on function return type
eventmachine.h:47:69: warning: type qualifiers ignored on function return type
eventmachine.h:49:73: warning: type qualifiers ignored on function return type
eventmachine.h:62:75: warning: type qualifiers ignored on function return type
eventmachine.h:63:74: warning: type qualifiers ignored on function return type
eventmachine.h:64:77: warning: type qualifiers ignored on function return type
eventmachine.h:65:41: warning: type qualifiers ignored on function return type
In file included from project.h:145:0,
                 from binder.cpp:20:
eventmachine.h:99:60: warning: type qualifiers ignored on function return type
eventmachine.h:100:58: warning: type qualifiers ignored on function return type
eventmachine.h:102:60: warning: type qualifiers ignored on function return type
eventmachine.h:105:41: warning: type qualifiers ignored on function return type
compiling cmain.cpp
cc1plus.exe: warning: command line option "-Wdeclaration-after-statement" is val
id for C/ObjC but not for C++
cc1plus.exe: warning: command line option "-Wimplicit-function-declaration" is v
alid for C/ObjC but not for C++
In file included from project.h:137:0,
                 from cmain.cpp:20:
binder.h:35:34: warning: type qualifiers ignored on function return type
In file included from project.h:138:0,
                 from cmain.cpp:20:
em.h:91:47: warning: type qualifiers ignored on function return type
em.h:92:76: warning: type qualifiers ignored on function return type
em.h:93:56: warning: type qualifiers ignored on function return type
em.h:95:57: warning: type qualifiers ignored on function return type
em.h:96:60: warning: type qualifiers ignored on function return type
em.h:97:58: warning: type qualifiers ignored on function return type
em.h:98:55: warning: type qualifiers ignored on function return type
em.h:99:36: warning: type qualifiers ignored on function return type
em.h:101:47: warning: type qualifiers ignored on function return type
em.h:106:42: warning: type qualifiers ignored on function return type
em.h:123:45: warning: type qualifiers ignored on function return type
em.h:132:36: warning: type qualifiers ignored on function return type
In file included from project.h:145:0,
                 from cmain.cpp:20:
eventmachine.h:45:61: warning: type qualifiers ignored on function return type
eventmachine.h:46:112: warning: type qualifiers ignored on function return type
eventmachine.h:47:69: warning: type qualifiers ignored on function return type
eventmachine.h:49:73: warning: type qualifiers ignored on function return type
eventmachine.h:62:75: warning: type qualifiers ignored on function return type
eventmachine.h:63:74: warning: type qualifiers ignored on function return type
eventmachine.h:64:77: warning: type qualifiers ignored on function return type
eventmachine.h:65:41: warning: type qualifiers ignored on function return type
In file included from project.h:145:0,
                 from cmain.cpp:20:
eventmachine.h:99:60: warning: type qualifiers ignored on function return type
eventmachine.h:100:58: warning: type qualifiers ignored on function return type
eventmachine.h:102:60: warning: type qualifiers ignored on function return type
eventmachine.h:105:41: warning: type qualifiers ignored on function return type
cmain.cpp:98:71: warning: type qualifiers ignored on function return type
cmain.cpp:109:122: warning: type qualifiers ignored on function return type
cmain.cpp:119:79: warning: type qualifiers ignored on function return type
cmain.cpp:129:83: warning: type qualifiers ignored on function return type
cmain.cpp:260:85: warning: type qualifiers ignored on function return type
cmain.cpp:270:84: warning: type qualifiers ignored on function return type
cmain.cpp:280:88: warning: type qualifiers ignored on function return type
cmain.cpp:290:51: warning: type qualifiers ignored on function return type
cmain.cpp:300:70: warning: type qualifiers ignored on function return type
cmain.cpp:320:55: warning: type qualifiers ignored on function return type
cmain.cpp:546:70: warning: type qualifiers ignored on function return type
cmain.cpp:669:68: warning: type qualifiers ignored on function return type
cmain.cpp: In function 'int evma_send_file_data_to_connection(long unsigned int,
 const char*)':
cmain.cpp:752:6: error: cannot convert 'stat*' to '_stati64*' for argument '2' t
o 'int _fstati64(int, _stati64*)'
make: *** [cmain.o] Error 1

Gem files will remain installed in C:/Ruby193/lib/ruby/gems/1.9.1/gems/eventmach
ine-0.12.10 for inspection.
Results logged to C:/Ruby193/lib/ruby/gems/1.9.1/gems/eventmachine-0.12.10/ext/g
em_make.out
An error occured while installing eventmachine (0.12.10), and Bundler cannot con
tinue.
Make sure that `gem install eventmachine -v '0.12.10'` succeeds before bundling. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T18:05:56.597

运行`bundle install`，将*Gemfile.lock*添加到您的存储库，提交，然后再次推送。
Heroku 需要*Gemfile*和*Gemfile.lock*来安装您的依赖项。

* * *

检查您的 Event Machine 构建问题：[Ruby：在 Windows 7 下安装 EventMachine 的问题](https://stackoverflow.com/questions/6927907/ruby-problem-installing-eventmachine-under-windows-7)

# ios - ios ARC 表访问错误

> ID：10804358
> 
> 赞同：1
> 
> 时间：2012-05-29T18:04:28.753
> 
> 标签：ios, uitableview, memory-management, automatic-ref-counting, exc-bad-access

对于我的表格视图，我正在进行以下操作（释义）

# 。H

```
@interface OptionsView : UIView <UITableViewDelegate, UITableViewDataSource>

@property (nonatomic, retain) NSArray *dataSource; 
```

# .m

```
- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    if (self) {

        ...

        self.dataSource = [NSArray arrayWithObjects:options, sections, sponsor,  nil];
    }
    return self;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if(self.dataSource) {
        NSArray *ds = [self.dataSource objectAtIndex:indexPath.section];
        NSDictionary *d = [ds objectAtIndex:indexPath.row];
        ActionBlock a = [d objectForKey:ACTION]; // <-- Thread 1: EXC_BAD_ACCESS (code=2, address=0x802)
        if(a != nil) a();
    }
} 
```

你可以看到我`didSelectRowAtIndexPath`的我得到了一个，`EXC_BAD_ACCESS`但我不知道为什么。因为我使用的是 arc，所以它不是僵尸问题（已经检查过）。

使用断点，我看到`self.dataSource`它在初始化后就存在，但在需要时不存在。它也没有显示出来`<nil>`，它只是空白。此外，这在调试中有效，但在发布中无效，那是什么意思？

** 编辑添加截图 **

你会注意到既没有也没有`ds`出现`d`……奇怪吗？ ![xcode 调试](../Images/336a0176ff073da97f12e36ab78c3f86.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:50:26.313

所以我可以看到有两个地方可能会导致问题。首先，什么是`ACTION`？它是某种 NSString 吗？只是想确保您使用的是有效的密钥对象。其次，（更可能是问题），它看起来像是`ActionBlock`您存储在集合数组中的某种代码块。您是否在将该块存储到数组/字典中之前复制该块？您必须复制您打算保留（存储）比创建它的范围更长的任何块。这很容易做到。例如：

```
void (^NewBlock)(void) = [^{
    ....code....
} copy]; 
```

交替：

```
void (^NewBlock)(void) = ^{
    ....code....
};

[dictionary setObject:[NewBlock copy] forKey:ACTION]; //Assuming #define ACTION @"action" 
```

这会将其复制到堆上以便可以存储。如果您不复制它，那么无论何时您尝试在创建它的范围之外引用该块，您都会得到 BAD_EXC_ACCESS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:31:01.407

看来您使用的是 UIViewController 而不是 UITableViewController。如果我没记错的话，你必须去检查器并将委托和数据源从 tableView 拖到 UIViewController。我不记得确切，我不在我的电脑上，但我确信在我开始为我拥有的每个 tableView 使用 UITableViewController 之前我做了几次。

哦，我不会使用 dataSource 作为数组的名称。只是为了防止命名冲突。

# powershell - powershell比较两个数组，创建只有不匹配值的第三个数组

> ID：10804363
> 
> 赞同：3
> 
> 时间：2012-05-29T18:04:43.213
> 
> 标签：powershell

首先，我唯一可用的是powershell。我已经想出了如何比较两个数组；但是，如果难以弄清楚如何以我需要的格式获取数据，我会遇到一些困难。

```
$foo = @(100, 200 ,300 ,400 ,500 ,600 ,700 ,800 ,900 ,1000)
$bar = @(50, 100, 600 , 900) 
```

期望的结果将是一个包含以下信息的数组

```
 50, 200, 300, 400, 500, 700, 800, 1000 
```

请注意，类似的值

```
100, 600 , 900 
```

被丢弃并且

```
50 
```

它在第二个数组中被添加到输出中。

这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-29T18:31:28.970

比较对象是你的朋友：

```
PS C:\Users> $foo = @(100, 200 ,300 ,400 ,500 ,600 ,700 ,800 ,900 ,1000)
PS C:\Users> $bar = @(50, 100, 600 , 900)
PS C:\Users> Compare-Object $foo $bar -PassThru
50
200
300
400
500
700
800
1000 
```

# c# - 如何在加载数据时捕获 DataTable 的 TableNewRow 事件

> ID：10804364
> 
> 赞同：0
> 
> 时间：2012-05-29T18:04:49.800
> 
> 标签：c#, events, datatable

`TableNewRow`每当适配器将新行添加到 DataTable 时，我都想捕获该事件。

有什么方法可以捕获 DataTable 的 NewRow 事件？

```
string sql = "SELECT * FROM t_table";
command.CommandText = sql;
adapter.CommandText = command;
DataTable dt = new DataTable();
adapter.Fill(dt); 
```

我在下面尝试过这段代码，但它不起作用..

```
dt.TableNewRow += new DataTableNewRowEventHandler(dt_TableNewRow); 
private void dt_TableNewRow(object sender, DataTableNewRowEventArgs e)
{
       MessageBox.Show("Event Raised...");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:12:38.297

您可以使用[TableNewRow](http://msdn.microsoft.com/en-us/library/system.data.datatable.tablenewrow.aspx)事件。

**编辑：**

正如**[p.cambell](https://stackoverflow.com/users/23199/p-campbell)**所说，您应该在[此处](https://stackoverflow.com/questions/159317/when-should-you-override-onevent-as-opposed-to-subscribing-to-the-event-when-inh/160041#160041)实现处理程序。

# spring-mvc - 关于 Spring 3.2.0.M1 和 Jetty 中的异步 Servlet 支持的困惑

> ID：10804368
> 
> 赞同：1
> 
> 时间：2012-05-29T18:04:57.963
> 
> 标签：spring-mvc, asynchronous, jetty

[Spring 3.2.0.M1](http://www.springsource.org/node/3563)今天发布，支持[异步@Controller 方法](http://blog.springsource.org/2012/05/10/spring-mvc-3-2-preview-making-a-controller-method-asynchronous/)。我正在尝试在部署为 Jetty 战争的现有 Web 应用程序中使用它。但是，我有几个基本问​​题。

1.  我是否需要 Jetty 8 或者这也应该在 Jetty 7 上运行。
2.  是在 Servlet 3.0 API 之上构建的异步支持还是 Spring MVC 已经实现的东西。换句话说，我是否需要一个支持 Servlet 3.0 的容器才能使异步控制器工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:34:45.123

On the topic of Jetty, servlet 3.0 support is in Jetty 8\. You can not use jetty-7 as it implements only servlet 2.5 support. You can get async behavior in jetty-7 through jetty-continuations but that is not the same api as in servlet 3.0.

So that is 1/2 an answer only, I can't speak to the spring side of things.

# session - 在 jsf 视图上检索会话对象

> ID：10804372
> 
> 赞同：1
> 
> 时间：2012-05-29T18:05:14.530
> 
> 标签：session, jsf

我有一个`RequestController`（@ManagedBean 和@ViewScoped）它是视图范围的，因为我们正在使用一些 ajax 调用。

我有一个带有结果的数据表，每个结果都有一个按钮

```
<p:commandButton action="#{requestController.requestDetail()}" icon="ui-icon-search" title="Detalhes">
     <f:setPropertyActionListener target="#{requestController.backing.selectedRequestVO}" value="#{order}" />
</p:commandButton> 
```

此方法正在接收我的 dataTable 的选定对象并在会话上设置，它正在工作，问题是我不知道如何从我的视图中获取此会话对象。

```
public void requestDetail() throws IOException {
        FacesContext context = FacesContext.getCurrentInstance();
    context.getExternalContext().getSessionMap().put("requestDetail",backing.selectedRequestVO);context.getExternalContext().redirect(context.getExternalContext().getRequestContextPath() + "/views/request/detail.html");
    } 
```

我需要从我的视图中访问它，因为该对象具有请求详细信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T18:18:04.567

它只能通过您自己指定的属性名称获得。

```
#{requestDetail} 
```

请注意，这不是正确的方法。您应该有另一个会话范围的托管 bean，您可以像`@ManagedProperty`在视图范围的托管 bean 中那样注入它，然后将请求详细信息设置为其属性。

```
@ManagedBean
@ViewScoped
public class RequestController {

    @ManagedProperty("#{requestDetail}")
    private RequestDetail requestDetail;

    public String requestDetail() {
        requestDetail.setSelectedRequestVO(backing.getSelectedRequestVO());
        return "/views/request/detail.html?faces-redirect=true";
    }     

    // ...
} 
```

和

```
@ManagedBean
@SessionScoped
public class RequestDetail {

    private RequestVO selectedRequestVO;

    // ...
} 
```

然后您可以按如下方式访问

```
#{requestDetail.selectedRequestVO} 
```

# r - 将 nberDates() 更改为 R 中的时间序列以进行子集化

> ID：10804376
> 
> 赞同：2
> 
> 时间：2012-05-29T18:05:32.737
> 
> 标签：r, time-series, indexing, xts

`nberDates()`在 tis 包中给出了衰退开始和结束日期的列表。

将其转换为一组虚拟对象以对现有时间序列进行子集化的最巧妙、最短的方法是什么？

因此，nberDates 本身会产生...

```
> nberDates()
         Start      End
 [1,] 18570701 18581231
 [2,] 18601101 18610630
 [3,] 18650501 18671231
 [4,] 18690701 18701231
 [5,] 18731101 18790331
 [6,] 18820401 18850531 
```

并`str(nberDates())`说类型是“ `Named num`。”

我在 xts 中有另一个时间序列对象，目前看起来像这样......

```
> head(mydata)
                value
1966-01-01         15
1967-01-01         16
1968-01-01         20
1969-01-01         21
1970-01-01         18
1971-01-01         12 
```

我想要第二个变量，recess，即在经济衰退期间为 1：

```
> head(mydata)
                value recess
1966-01-01         15      0
1967-01-01         16      0
1968-01-01         20      0
1969-01-01         21      0
1970-01-01         18      1
1971-01-01         12      0 
```

（我的目标是我希望能够将衰退中的价值与衰退中的价值进行比较。）

我正在尝试但不起作用的笨重的东西是......

```
((index(mydata) > as.Date(as.character(nberDates()[,1]),format="%Y%m%d")) & (index(mydata) < as.Date(as.character(nberDates()[,2]),format="%Y%m%d"))) 
```

但这会产生...

```
 [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[25] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[37] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
Warning messages:
1: In `>.default`(index(mydata), as.Date(as.character(nberDates()[,  :
  longer object length is not a multiple of shorter object length
2: In `<.default`(index(mydata), as.Date(as.character(nberDates()[,  :
  longer object length is not a multiple of shorter object length 
```

我知道我可以用一个笨重的 for 循环来解决这个问题，但这总是向我暗示我做错了 R。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T23:12:56.223

以下应该做到这一点：

```
sapply(index(mydata), function(x) any(((x >= as.Date(as.character(nberDates()[,1]),format="%Y%m%d") & (x <= as.Date(as.character(nberDates()[,2]),format="%Y%m%d")))))) 
```

sapply 基本上遍历向量并检查每个元素是否在 NBER 间隔之一内。

但是请注意，当前编写的方式意味着它将为每个元素将原始 NBER 数据转换为日期（as.Date）一次，`mydata`因此您可能希望进行一次转换，将其保存到某个临时数据框，然后在上面运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-04T20:51:07.360

这是另一个解决方案，它在`merge.xts`.

```
library(xts)
library(tis)  # for nberDates()
# make two xts objects filled with ones
# 1) recession start dates
# 2) recession end dates
rd <- apply(nberDates(),2,as.character)
ones <- rep(1,nrow(rd))
rStart <- xts(ones, as.Date(rd[,1],"%Y%m%d"))
rEnd   <- xts(ones, as.Date(rd[,2],"%Y%m%d"))
# merge recession start/end date objects with empty xts
# object containing indexes from mydata, filled with zeros
# and take the cumulative sum (by column)
rx <- cumsum(merge(rStart,rEnd,xts(,index(mydata)),fill=0))
# the recess column = (cumulative # of recessions started at date D) -
# (cumulative # of recessions ended at date D)
mydata$recess <- (rx[,1]-rx[,2])[index(mydata)] 
```

或者，您可以只使用[`USREC`FREDII 中的系列](http://research.stlouisfed.org/fred2/series/USREC)。

```
library(quantmod)
getSymbols("USREC",src="FRED")
mydata2 <- merge(mydata, USREC, all=FALSE) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T22:08:19.803

试探性地，我使用如下嵌套循环。仍在寻找更好的答案！

```
mydata$recess <- 0
for (x in seq(1,dim(mydata)[1])){
  for (y in seq(1,dim(nberDates())[1])){
    if (index(mydata)[x] >= as.Date(as.character(nberDates()[y,1]),format="%Y%m%d") &
      index(mydata)[x] <= as.Date(as.character(nberDates()[y,2]),format="%Y%m%d")){
      mydata$recess[x] <- 1
    }
  }
} 
```

# c++ - 适合初学者的最佳 OpenGL 教程 - 对象/灯光

> ID：10804377
> 
> 赞同：2
> 
> 时间：2012-05-29T18:05:32.790
> 
> 标签：c++, opengl

我正在寻找 OpenGL 教程。你能建议点什么吗？我想创建一些对象，移动它们并提供一些光线。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T18:07:11.127

这个 Lighthouse3D 光照教程非常棒，并且没有真正绑定到 OpenGL。

[http://www.lighthouse3d.com/tutorials/glsl-tutorial/?lights](http://www.lighthouse3d.com/tutorials/glsl-tutorial/?lights)

如果您对上下文创建、事件处理等有疑问，请在此处阅读基础知识： [OpenGL.org](http://www.opengl.org/wiki/Tutorial:_OpenGL_3.1_The_First_Triangle_%28C++/Win%29)

# mercurial - 无法使用 Mercurial 的指南修复 Hg 折叠碰撞错误

> ID：10804378
> 
> 赞同：1
> 
> 时间：2012-05-29T18:05:41.573
> 
> 标签：mercurial, checkout, case-sensitive, case-insensitive

Mercurial 的解决折叠式碰撞的指南是否存在问题，或者我实施解决方案的方式是否存在问题。

[Mercurial wiki](http://mercurial.selenic.com/wiki/FixingCaseCollisions)上提供的解决方案如下：

> ```
> hg clone -U repo repair
> cd repair
> 
> hg debugsetparents <bad revision>
> hg debugrebuildstate 
> ```
> 
> 此时，Mercurial 会认为您已签出错误的修订版并且所有文件都丢失了（状态为“！”）。要修复 repo，我们只需要做：
> 
> ```
> hg rm -A <file causing the collision> 
> ```
> 
> 现在 hg st 应该显示状态为“R”的麻烦文件和状态为“！”的所有其他文件。现在我们可以检查我们的修复：
> 
> ```
> hg ci -m"fix case collision" 
> ```
> 
> 要取回我们所有的文件，我们只需再次签出：
> 
> ```
> hg co tip 
> ```

问题文件是：`SomeFile.bash`和`Somefile.bash`. 我最初有`Somefile.bash`，我希望它现在是`SomeFile.bash`。另外要注意的是，157版很开心，没有碰撞，但是158版是我介绍碰撞的地方。存储库的负责人目前处于修订版 160。

我已按如下方式实施此解决方案：

```
hg clone -U my-repo-url repair
cd repair
hg debugsetparent 160
hg debugrebuildstate
hg status (reveals that everything is 'missing' (!))
hg rm -A Somefile.bash (responds that SomeFile.bash has been removed, notice case change)
hg ci -m "Fixed the collision... I hope."
hg co tip

hg update -C tip 
```

根据该指南，这应该消除了折叠箱碰撞并将其余丢失的文件带回来，但另一个`hg status`显示所有内容仍然丢失（！）。

**编辑**：通过将最后一个命令（ ）附加`update`到现有命令中，我能够恢复丢失的文件，从而解决了问题的其余部分。

**注意**：我必须使用最新的“问题”版本`<bad revision>`来解决这个问题（在我的情况下是 160）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T22:47:08.673

尝试

```
hg update -C tip 
```

那应该把文件带回来。如果没有，请尝试还原所有内容：

```
hg revert -r tip -a 
```

# ssrs-2008 - 带有可选小数位的 SSRS 图表

> ID：10804380
> 
> 赞同：0
> 
> 时间：2012-05-29T18:05:49.423
> 
> 标签：ssrs-2008

是否可以为图表中的值显示可选的十进制数字？我想显示最多 2 个十进制值，但前提是用户输入它们。如果值为 9.34，我希望它显示出来。但是如果值只是 9，我希望它只显示 9。如果用户键入 9.3，那么应该只显示那个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T18:12:09.903

您可以通过将十进制值转换为字符串然后使用如下格式字符来完成此操作：

```
=Format(CStr(Fields!a.Value),"#.##"); 
```

`#`只有存在十进制值时才会显示该字符。（仅供参考，如果您想要与格式字符串相反，即使值是整数，使用 0.00 也会强制显示零）。

您还可以使用组合，例如 0.## 或 0#.##

更远：

您也可以将该格式字符串放在属性中数字下的自定义选项中。

# sorting - 对 Ecore 类进行拓扑排序

> ID：10804385
> 
> 赞同：0
> 
> 时间：2012-05-29T18:06:11.047
> 
> 标签：sorting, hierarchy, eclipse-emf

有没有办法对 Ecore EPackage 中的类进行拓扑排序，即对类列表进行排序，以便将使用另一个类作为超类型的类定位在它们的超类之后？我使用手动图遍历为另一个代码生成器做了类似的事情，但肯定有人已经为 Ecore 实现了这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:24:40.213

[MoDisco](http://www.eclipse.org/MoDisco/)允许在元模型上定义查询。因此，您可以为 Ecore 模型编写一个查询，该模型以拓扑顺序返回 EClass。对于用 Java 实现的此类查询，这不应该是一项艰巨的任务。有关更多信息，请参阅[MoDisco 的帮助。](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.gmt.modisco.infra.doc/doc/MoDisco/Components/QueryManager/Documentation/0.9/0.9.html)

# java - 基本 GUI 设置工具提示文本

> ID：10804386
> 
> 赞同：0
> 
> 时间：2012-05-29T18:06:17.537
> 
> 标签：java

我正在尝试创建一个带有悬停文本提示的简单 JFrame。JFrame 看起来不错，但是，文本提示永远不会弹出。谁能帮我解决可能是什么问题？我没有收到任何错误。

主班

```
 import javax.swing.JFrame;

public class PracticeMain {
    public static void main(String args[]){

        Sub obj = new Sub();

        obj.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        obj.setSize(275,150);
        obj.setVisible(true);
    }
} 
```

子类

```
import java.awt.FlowLayout;
import javax.swing.JFrame;
import javax.swing.JLabel;

public class Sub extends JFrame{

    private JLabel item1;

        public Sub(){
        //adds title
        super("MY TITLE");

        //gives us the default layout
        setLayout(new FlowLayout());

        item1 = new JLabel("This is a sentence");
        item1.setToolTipText("help tip");

        add(item1);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T18:09:51.933

好吧，我已经编译了它并出现了工具提示文本。您应该等待大约两秒钟以使其显示。

# c# - 格式化 GridView 自动生成的列

> ID：10804388
> 
> 赞同：0
> 
> 时间：2012-05-29T18:06:29.060
> 
> 标签：c#, vb.net, gridview, formatting

我正在尝试动态格式化我的 gridview 列的宽度，以便于编辑和更新时使用。是否可以定义多个列宽？这是我用来创建gridview的代码...

```
protected void Page_Load(object sender, EventArgs e)
    {

        if (!Page.IsPostBack)
        {
            // Create a new table.
            DataTable taskTable = new DataTable("TaskList");

            // Create the columns.
            taskTable.Columns.Add("Id", typeof(int));
            taskTable.Columns.Add("Description", typeof(string));
            taskTable.Columns.Add("IsComplete", typeof(bool));

            //Add data to the new table. - could fill the table from database query if desired
            for (int i = 0; i < 1; i++)
            {
                DataRow tableRow = taskTable.NewRow();
                //tableRow["Id"] = 0;
                tableRow["Description"] = "";
                tableRow["IsComplete"] = false;
                taskTable.Rows.Add(tableRow);
            }

            //Persist the table in the Session object.
            Session["TaskTable"] = taskTable;

            //Bind data to the GridView control.
            BindData();
        }

    } 
```

是否可以发表如下声明：

```
taskTable.Column.Add("Id", typeof(int), width="200px");??? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:25:37.963

首先，您必须将 AutoSizeColumnsMode 设置为填充，然后您可以更改列的宽度。

```
dataGridView1.Columns[columnName].AutoSizeMode= DataGridViewAutoSizeColumnMode.None;
dataGridView1.Columns[columnName].Width = columnWidth; 
```

# android - Android，查看网络驱动器和共享

> ID：10804391
> 
> 赞同：0
> 
> 时间：2012-05-29T18:06:35.230
> 
> 标签：android, windows, networking

我有点迷茫，不知道从哪里开始，但我想了解本地网络以及如何从我的家用 PC 中列出共享位置中的目录。假设我的 PC 上有几个文档需要通过手机访问。这些文档位于共享目录中（其他 PC 可以通过 Windows 中的网络资源管理器访问这些文件）。

我将如何通过我的 android 设备列出/访问这些文件？

我不是在寻找“准备就绪”的解决方案，但我的搜索返回对现有软件的引用——我对此不感兴趣。我想构建自己的。

关于这个主题的任何好的文章或教程？需要什么，我将面临什么问题？

编辑：我还应该补充一点，我以前有开发 android 应用程序的经验，所以我不是从头开始——我只是对本地网络一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T02:28:36.797

大多数执行此操作的应用程序都使用[jCIFS](http://jcifs.samba.org/)。我没有使用它，但它应该有一些示例可以帮助您入门。

# macos - 在 Leopard OSX 的终端中更改主机名/用户

> ID：10804397
> 
> 赞同：2
> 
> 时间：2012-05-29T18:06:58.397
> 
> 标签：macos, terminal

我的终端之前显示`subalcharla$`在命令行中。

终端现在显示`subalcharla@subal-charlas-macbook ~ $`。

如何回到原来的设置？

两者有什么区别？

如果我不这样做，这怎么会改变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T18:22:47.607

在末尾`~/.profile`添加行

```
export PS1='\u$ ' 
```

恢复您的旧提示。

为此，您可以键入

```
 nano ~/.profile 
```

这将打开一个文本编辑器。向下按直到到达文件的底部。点击`Enter`创建一个新行，然后粘贴

```
export PS1='\u$ ' 
```

按`Control+X`退出编辑器并在询问您是否要保存时说“是”。现在重新启动您的终端，您的提示应该会恢复。

您给出的第一个提示显示您的用户名，第二个提示显示您的用户名和主机名。没有错误，并且您的 bash shell 的功能*不会*通过更改提示来更改。

一定是某些东西改变了您的`PS1`环境变量，可能是系统更新或软件安装。不过应该是良性的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T18:20:22.187

我不知道它是如何改变的，但它是由一些符号定义控制的。在终端中使用“man bash”并搜索名为“PROMPTING”的部分。它使用名为 PS1-to-4 的符号来构建提示。

# facebook - 扩展的 access_token 存在多长时间？

> ID：10804403
> 
> 赞同：1
> 
> 时间：2012-05-29T18:07:24.930
> 
> 标签：facebook, token

只需阅读有关offline_access 权限被删除并因此拥有“[扩展访问令牌](https://developers.facebook.com/roadmap/offline-access-removal/#extend_token)”的新系统的信息。

我的问题是我想保存过期时间戳以确保保存的访问令牌始终有效，但文档没有提供扩展令牌有效的时间。

有没有人有这方面的更多信息？知道它们的长期令牌是否在数天、数周或数月内有效会很有趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T18:17:48.203

当您使用链接到的帖子中解释的新端点时：

```
https://graph.facebook.com/oauth/access_token?             
    client_id=APP_ID&
    client_secret=APP_SECRET&
    grant_type=fb_exchange_token&
    fb_exchange_token=EXISTING_ACCESS_TOKEN 
```

响应将具有以下形式：

> access_token=xxxxx&**过期**=yyyyy

expires 参数是我相信之后的样子。
长寿命令牌的有效期为 60 天，您可以使用[调试工具](https://developers.facebook.com/tools/debug)检查令牌（用于调试） ，它将告诉您需要了解的有关令​​牌的所有信息。

* * *

# 编辑

还有几件事。
“expires”参数为您提供距离到期的剩余时间，因此到期时间为`timestamp of now + expires`.

无需进行任何开发即可轻松检查，只需创建一个 fb 应用程序（如果您没有），转到[访问令牌工具](https://developers.facebook.com/tools/access_token/)并从您的应用程序中复制用户令牌，然后使用 curl 发出请求到新端点。

至于延长长期存在的令牌，没有办法做到这一点，您需要在此之后重新验证用户，正如它在同一篇文章中所述：

> 如果您传递具有长期过期时间的 access_token，端点将简单地将相同的 access_token 传递回您，而不会更改或延长过期时间

[另一点是您可以通过使用服务器端身份验证流程](http://developers.facebook.com/docs/authentication/server-side/)获得长期访问令牌，但这些也无法扩展。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-17T05:41:45.337

It only returns back access_token not

access_token=xxxxx&expires=yyyyy as mentioned above.

Atleast that is what I can see...

# jquery - 是否可以制作可扩展的菜单？

> ID：10804411
> 
> 赞同：1
> 
> 时间：2012-05-29T18:08:23.960
> 
> 标签：jquery, html, css

我有一个菜单项，其中包含项目列表。当我点击菜单项时，项目列表应该可见。我可以通过使用 '.on' 方法使用 jquery 来做到这一点。是否可以仅使用 css 或 css3 来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T18:13:23.637

这是刚刚发布的，有人提供了使用 css 的解决方案。链接在这里。看看这个。

[如何从 jquery 中的 2 个 div 中隐藏 mouseleave 上的 div？](https://stackoverflow.com/questions/10804073/how-to-hide-a-div-on-mouseleave-from-2-divs-in-jquery/10804243#10804243)

这是他们提到的jsfiddle。[http://jsfiddle.net/fmTnh/2/](http://jsfiddle.net/fmTnh/2/)

# c# - 更新在 C5 集合中如何工作？

> ID：10804413
> 
> 赞同：2
> 
> 时间：2012-05-29T18:08:33.500
> 
> 标签：c#, collections, c5

如何在[C5 集合](http://www.itu.dk/research/c5/)中使用更新方法？

例如，假设我有一个要替换 item 的`A`集合`B`。我希望它是这样的：

```
HashSet<String> s = new HashSet<String>();
s.add("A");
s.update("A", "B"); 
```

但取而代之的是，`Update`采用单个参数，并且[文档](http://www.itu.dk/research/c5/latest/ITU-TR-2006-76.pdf)有以下内容：

> 如果集合包含等于 x 的项，则 bool Update(T x) 返回 true，在这种情况下，该项被 x 替换；否则返回 false 而不修改集合。如果更新了任何项，并且集合已设置语义或 DuplicatesByCounting 为 false，则仅更新 x 的一个副本；但是如果集合具有包语义并且 DuplicatesByCounting 为真，则更新旧项目的所有副本。如果更新了任何项目，则会引发事件 ItemsRemoved、ItemsAdded 和 CollectionChanged。如果集合是只读的，则引发 ReadOnlyCollectionException。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T18:11:39.623

我认为您需要通过两个单独的操作来做到这一点：

```
s.Remove("A");
s.Add("B"); 
```

该`Update`方法仅在两个项目被认为相等时才有效（两个不同的对象可以相等）。但`"A"`和`"B"`不相等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T18:33:20.267

如果目标基于相等匹配（考虑哈希），则集合中的*项目是“更新”d。*它不是“替换”。也就是说，“Update”方法中的隐含名词指的是一个特定的项目，而不是HashSet本身。

例如，如果 HashSet 被用作数据库缓存，则映射数据库对象的相等性可能仅涵盖主键。正如所见，“更新”对于许多琐碎的类型没有多大意义，甚至可能在用于*给定*HashSet 对象的特定 SGC.IEqualityComparer 之外没有多大意义。（也就是说，在这个特定的 HashSet 之外，所述数据库对象的相等性可能涵盖所有值。）

请参阅“相等和比较”部分（2.1）和 HashSet 构造函数（6.10）。

快乐编码。

# total-commander - Total Commander 如何为列表框提供所选文件

> ID：10804416
> 
> 赞同：1
> 
> 时间：2012-05-29T18:09:00.457
> 
> 标签：total-commander

就像搜索结果可以提供列表框（打开新的临时选项卡）一样，有没有办法：

1.  只需从一个目录中选择文件并输入列表框？
2.  从多个目录中选择文件并提供相同的列表框？

只需重命名列表框的临时选项卡，您就可以拥有可以执行更多操作的最喜欢的项目列表。这将极大地提高生产力！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-11T12:55:51.153

**关于#1：**

选择文件后激活：

`Menu > Show > Only Selected Files`

**关于#2：**

这可能不是您所追求的，但您可以使用 DiskDir / DiskDir Extended 添加文件（使用打包程序功能，因此您可以创建一个带有扩展名的“存档”文件，`.lst`其中包含添加文件的分层列表。然后您可以更改源文件夹，然后添加更多文件。稍后您只需单击该`.lst`文件，它看起来与您的正常文件/文件夹列表没有什么不同。不幸的是，您**无法**重命名文件，但您可以**启动**它们，并额外确认。

**更新**

类似的功能，但“源”重命名功能仅限于一个文件（？）：`Virtual Panel`，（文件系统插件，可通过`Network Neighborhood`“驱动器”访问）。它可以在没有确认窗口的情况下启动文件。**当您使用它自己的子栏时重命名**“源/目标”文件（位于此处：`%%COMMANDER_PATH%%\Plugins\WFX\VirtualPanel\EN\VirtualPanel.bar`，确保您还安装了`AskParam`插件并在 VirtualPanel.bar 右侧有路径（AskParam.exe 和 VPBatch.exe）。'常规' rename 将仅在虚拟面板中更改文件名。

URL：[虚拟面板插件](http://www.ghisler.ch/board/viewtopic.php?t=24293 "虚拟面板插件")

# php - cakePHP认证问题

> ID：10804418
> 
> 赞同：0
> 
> 时间：2012-05-29T18:09:28.223
> 
> 标签：php, cakephp, authentication, controller

我无法理解 Auth 组件在 cakePHP 中的工作原理。我正在使用 2.1

我的登录工作完美，据我了解，我可以在 appController 中设置默认组件，如下所示。

```
 // App controller:

 public $components = array(
    'Session',

    'Auth' => array(
        'loginAction' => array(
            'controller' => 'users',
            'action' => 'login',
        ),
        'authError' => "Your username and password is incorrect, please try again.",
        'authenticate' => array(
            'Form' => array(
                'scope' => array('User.user_status_id' => 1)
            )
        ),
        'redirect' => array("controller" => "users", "action" => "profile"),
        'loginRedirect' => array("controller" => "users", "action" => "profile")
    )
);

public function beforeFilter() {
    $this->Auth->allow("home");
   if($this->Auth->loggedIn() == true) {
       $this->set("user_name",$this->Auth->user("first_name")." ".$this->Auth->user("last_name"));
       $this->set("loggedIn",true);
       if($this->Auth->user("user_type_id") == 5) {
           $this->set("navigation","navigation_admin");
       } else {
           $this->set("navigation","navigation_loggedin");
       }
   } else {
       $this->set("loggedIn",false);
       $this->set("navigation","navigation_notloggedin");
   }

} 
```

home 位于 /app/view/home.ctp，但是，我无法在未登录的情况下访问该页面。接下来我有 2 个不同的用户级别，普通用户和管理员。我想根据您是否是管理员来限制控制器中的某些操作。

在我的 UserController 我有例子：

```
 public function beforeFilter() {
    parent::beforeFilter();
    $this->Auth->allow("login");
    if($this->Auth->user("user_type_id") != 5) {
        $this->Auth->allow("login","profile");
    }
} 
```

但无论用户类型如何，每个人都可以查看操作。

在我的页面控制器中，我还有以下内容：

```
 public function beforeFilter() {
        parent::beforeFilter();
        $this->Auth->allow("*");
    } 
```

但我必须登录才能查看任何页面。

我确信我做错了什么，但我无法理解什么，有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:28:01.517

首先，`home`不是控制器上的动作，因此`$this->Auth->allow("home");`不会产生影响。`$this->Auth->allow("display");`会但会允许看到所有页面（不确定是否有意）。

其次，您在调用父级的 beforeFilter`$this->Auth->allow("*");` *之后*使用它，这意味着它`AppController::beforeFilter()`会将其视为用户未登录，因为它不知道您事后允许什么。

# java - JTable 行的 ActionListener

> ID：10804421
> 
> 赞同：0
> 
> 时间：2012-05-29T18:09:39.613
> 
> 标签：java, jtable, actionlistener

当用户双击特定的 JTable 行时，我想打开新窗口。窗口类型取决于行。如何创建 ActionListener 以在 JTable 行中双击？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:12:33.273

使用`getClickCount()`方法来捕获双倍计数.... getClickCount() 提供有关点击类型的信息（即单次、双次、三次等），但不是总点击次数。

# c# - 单向数据绑定gridview - 仅更新？

> ID：10804427
> 
> 赞同：0
> 
> 时间：2012-05-29T18:10:15.883
> 
> 标签：c#, asp.net, data-binding, gridview

我正在用 gridview 做一些复杂的事情，而我和完成之间唯一的事情是我无法以编程方式设置数据绑定。除了我仍然无法更新数据源之外，我已经解决了这个问题。

我已经用一个依赖下拉列表替换了一个输入字段，并让它保留数据绑定上字段的值。我不能直接对它进行数据绑定，因为我得到“选定的值不在项目列表中”或其他东西，所以我必须找到一种方法来让网格或数据源从这个依赖下拉列表中获取值并将其应用到桌子。

有什么帮助吗？

```
<asp:GridView ID="gvManager" runat="server" 
        AutoGenerateColumns="False" DataSourceID="ldsCampaigns" 
        ondatabound="gvManager_DataBound" 
        onrowediting="gvManager_RowEditing" DataKeyNames="ContentID">
        <Columns>
            <asp:CommandField ShowEditButton="True" />
            <asp:BoundField DataField="ContentID" HeaderText="ContentID" 
                SortExpression="ContentID" />
            <asp:BoundField DataField="CampaignName" HeaderText="CampaignName" 
                SortExpression="CampaignName" />
            <asp:BoundField DataField="CampaignTitle" HeaderText="CampaignTitle" 
                SortExpression="CampaignTitle" />
            <asp:BoundField DataField="CampaignTagLine" HeaderText="CampaignTagLine" 
                SortExpression="CampaignTagLine" />
            <asp:TemplateField HeaderText="CampaignData" SortExpression="CampaignData">
                <EditItemTemplate>
                    <asp:DropDownList ID="DropDownList1" runat="server" DataSourceID="ldsTables" 
                        DataTextField="CMSTables" DataValueField="CMSTables" 
                        SelectedValue='<%# Bind("CampaignData") %>' onload="DropDownList1_Load">
                    </asp:DropDownList>
                    <asp:LinqDataSource ID="ldsTables" runat="server" 
                        ContextTypeName="DataContext" 
                        onselecting="ldsTables_Selecting" Select="new (CMSTables)" 
                        TableName="CampaignTables">
                    </asp:LinqDataSource>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%# Bind("CampaignData") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="DataColumn" 
                SortExpression="DataColumn">
                <EditItemTemplate>
                    <asp:DropDownList ID="DropDownList2" runat="server" style="margin-bottom: 0px" 
                        SelectedValue='<%# Bind("DataColumn") %>' Visible="False">
                    </asp:DropDownList>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label2" runat="server" 
                        Text='<%# Bind("DataColumn") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:BoundField DataField="CampaignLink" HeaderText="CampaignLink" 
                SortExpression="CampaignLink" />
            <asp:BoundField DataField="Sunrise" HeaderText="Sunrise" 
                SortExpression="Sunrise" />
            <asp:BoundField DataField="Sunset" HeaderText="Sunset" 
                SortExpression="Sunset" />
            <asp:BoundField DataField="OwnerID" HeaderText="OwnerID" 
                SortExpression="OwnerID" />
            <asp:CheckBoxField DataField="Enabled" HeaderText="Enabled" 
                SortExpression="Enabled" />
        </Columns>
    </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:56:59.927

如果我理解你的问题是正确的，你有一个 gridview 并且在 gridview 中有一个下拉列表，在更改下拉列表时你想要获取它的值并获取一些数据或你想要的任何东西，如果是这样的话，那么你有什么如下：

1-设置您的下拉列表属性 AutoPostBack = "true"。

2-在下拉列表的 dropdownlist_indexchanged 事件上执行以下操作：

```
protected void dropdownlist1_indexchanged(sender object,eventargs e)
{
   //Because the dropdownlist is inside the gridview you can't get data directly
   //You will have to parse the sender object which will retrieve the dropdownlist
   DropdownList ddl = (DropdownList)sender;
   //You can then extract the data from the dropdownlist
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:18:48.113

对于任何未来绝望的程序员，我必须在更新事件上更新 linq 数据源代码：

```
 protected void ldsCampaigns_Updated(object sender, LinqDataSourceStatusEventArgs e)
    {
        using (DashboardDataContext c = new DashboardDataContext())
        {
            Label Label3 = gvManager.Rows[gvManager.EditIndex].FindControl("Label4") as Label;

            List<CMSCampaigns> change = c.CMSCampaigns.Where(s => s.ContentID == Convert.ToInt16(Label3.Text)).ToList();

            DropDownList DropDownList2 = gvDashboardManager.Rows[gvDashboardManager.EditIndex].FindControl("DropDownList2") as DropDownList;

            change[0].DataColumn = DropDownList2.SelectedValue.ToString();

            c.SubmitChanges();
        }
    } 
```

这是我用过 kludgestergrammed 的最集群的 clusterkludge。

# oracle - VS2008 SSRS 用于查询 Oracle：如何停止外部联接的 {oj}？

> ID：10804429
> 
> 赞同：7
> 
> 时间：2012-05-29T18:10:36.373
> 
> 标签：oracle, visual-studio-2008, reporting-services

我正在使用 VS2008 SSRS 来查询和报告 Oracle 数据库。每当我查询设计器添加外连接时，它都会添加 {oj} 例如

已添加 OJ

```
SELECT A.*,B.*
FROM {oj A LEFT OUTER JOIN B On A.id = B.id} 
```

OJ 未添加（我想要它）

```
SELECT A.*,B.*
FROM A LEFT OUTER JOIN B On A.id = B.id 
```

我可以让查询运行的唯一方法是“编辑为文本...”并删除 {oj...}

当我想要外部连接时，有什么方法可以阻止 Visual Studio 2008 添加 {oj}，而不必“编辑为文本”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T09:24:16.003

我假设您还没有找到解决方案。我很确定 SSRS 的 Oracle 驱动程序完全是错误的 - SQL Server 数据源没有问题。我不敢相信没有更多的人抱怨它。

它曾经可以工作，但直到大约一年前，它才使用旧式 (+) 语法进行外连接。我猜当时有一些更新试图将其更改为较新的语法，但通过包含大括号 oj 将其搞砸了，这似乎是其他一些来源的正常语法，但它肯定不适用于 Oracle .

是的，当然你可以在文本查询设计器中编辑它，但是如果你切换到图形设计器，它会立即重新插入大括号等。我喜欢图形选项，它真的应该工作！

这个问题从一开始就一直存在于我们的供应商身上，但他们似乎无法理解这个问题。他们偶尔会发邮件问我问题是否仍然存在！我猜他们希望奇迹发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T05:02:17.233

MSDN 说`{oj}`语法应该在 Visual Studio 中工作。但是，它也表示该`(+)`语法也有效。所以你可以试试——

```
SELECT A.*,B.*
  FROM A , B 
 WHERE A.id = B.id(+); 
```

虽然下面的查询可以在 Visual Studio 中使用，但它不仅仅适用于任何 Oracle DB 客户端工具（Toad、SQL Developer、SQL 提示符等）。

```
SELECT A.*,B.*
FROM {oj A LEFT OUTER JOIN B On A.id = B.id}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T20:24:08.427

我们的一个人终于发现，如果你进入编辑文本模式，你可以去掉 {oj 然后保存查询。（在我们的例子中是命名查询）只要您不在报表设计器中返回可视模式，它就会保留已编辑的查询并正常工作。但是，如果您切换到可视模式，{oj 会再次出现。

# python - 3组以上的比例维恩图

> ID：10804432
> 
> 赞同：10
> 
> 时间：2012-05-29T18:10:40.767
> 
> 标签：python, matlab, plot, matplotlib

我在 MongoDB 中有一组文档，每个文档在列表中都有一个或多个类别。使用 map reduce，我可以获得每个类别的唯一组合有多少文档的详细信息：

```
['cat1']               = 523
['cat2']               = 231
['cat3']               = 102
['cat4']               = 72
['cat1','cat2']        = 710
['cat1','cat3']        = 891
['cat1','cat3','cat4'] = 621 ... 
```

其中总数是类别精确组合的文档数量。

我正在寻找一种合理的方式来呈现这些数据，我认为具有比例区域的维恩图是一个好主意。使用上面的例子，cat1 的面积为 523+710+891+621，cat1 和 cat3 的重叠面积为 891+621，cat1、cat3、cat4 的重叠面积为 621，以此类推。

有没有人对我如何实施这个有任何提示？我最好用 Python (+Numpy/MatPlotLib) 或 MatLab 来做。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T10:29:10.773

## 问题

我们需要表示多个相互关联的对象类别的计数，而维恩图将无法表示超过微不足道的类别数量及其重叠。

## 一个解法

将每个类别及其组合视为图中的一个节点。绘制图形，使节点的大小代表每个类别中的计数，并且边连接相关类别。这种方法的优点是：可以轻松容纳多个类别，这成为一种连接的气泡图。

## 结果

![网络布局](../Images/7544142b6e45eed0d86dc58d8db522c0.png)

## 编码

建议的解决方案使用[NetworkX](http://networkx.lanl.gov/)创建数据结构并使用[matplotlib](http://matplotlib.sourceforge.net/gallery.html)绘制它。如果数据以正确的格式呈现，这将扩展到具有多个连接的大量类别。

```
import networkx as nx
import matplotlib.pyplot as plt

def load_nodes():
    text = '''  Node    Size
                1        523
                2        231
                3        102
                4         72
                1+2      710
                1+3      891
                1+3+4    621'''
    # load nodes into list, discard header
    # this may be replaced by some appropriate output 
    # from your program
    data = text.split('\n')[1:]
    data = [ d.split() for d in data ]
    data = [ tuple([ d[0], 
                    dict( size=int(d[1]) ) 
                    ]) for d in data]
    return data

def load_edges():
    text = '''  From   To
                1+2    1
                1+2    2
                1+3    1
                1+3    3
                1+3+4    1
                1+3+4    3
                1+3+4    4'''
    # load edges into list, discard header
    # this may be replaced by some appropriate output 
    # from your program
    data = text.split('\n')[1:]
    data = [ tuple( d.split() ) for d in data ]
    return data

if __name__ == '__main__':
    scale_factor = 5
    G = nx.Graph()
    nodes = load_nodes()
    node_sizes = [ n[1]['size']*scale_factor
                  for n in nodes ]

    edges = load_edges()
    G.add_edges_from( edges )

    nx.draw_networkx(G, 
                     pos=nx.spring_layout(G),
                     node_size = node_sizes)
    plt.axis('off')
    plt.show() 
```

## 其他解决方案

其他解决方案可能包括：[气泡图](http://mbostock.github.com/d3/ex/bubble.html)、[Voronoi 图](http://www.christophermanning.org/projects/voronoi-diagram-with-force-directed-nodes-and-delaunay-links/)、[弦图](http://mbostock.github.com/d3/ex/chord.html)和[蜂巢图](http://www.hiveplot.net/)等。链接的示例都没有使用 Python；它们仅用于说明目的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-29T21:49:32.123

我相信 ninjagecko 是正确的，这通常不能表示为交叉点图，除非您不介意该图是 n 维的。但是，如果每个类别都有一个显示其所有交叉点的图表，则它可以用 2D 表示 - 这本身可以是一个图表。所以这可能是一种更合适的方式来表示您的数据。我制作了一个堆积条形图来说明：

![在此处输入图像描述](../Images/e36922977e1d832c0d3e44c17164e46d.png)

编码：

```
cats = ['cat1','cat2','cat3','cat4']
data = {('cat1',): 523, ('cat2',): 231, ('cat3',): 102, ('cat4',): 72, ('cat1','cat2'): 710,('cat1','cat3'): 891,('cat1','cat3','cat4') : 621}

import matplotlib.pyplot as plt
import numpy as np
from random import random

colors = dict([(k,(random(),random(),random())) for k in data.keys()])
print colors
for i, cat in enumerate(sorted(cats)):
    y = 0
    for key, val in data.items():
        if cat in key:
            plt.bar(i, val, bottom=y, color=colors[key])
            plt.text(i,y,' '.join(key))
            y += val
plt.xticks(np.arange(len(cats))+0.4, cats )
plt.show() 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-29T18:18:52.627

这通常是**不可能的，**除非粗略地说，交叉点图是[平面图](http://en.wikipedia.org/wiki/Planar_graph) *并且*您没有 4 路交叉点。边长也有限制（除非你愿意画无定形的斑点来表示面积）；所以如果你坚持画圆，那就**更**受限制了。

在非常简单的情况下，您可以创建一个例程来绘制一个 3 向维恩图，然后在三元组的“另一侧”“添加”另一个圆圈。在上述情况下，`1,3,4`是那个三元组，并且`2`是奇一出。

如果可能*是*因为您的数据满足上述条件（由于某种原因，您的图形是平面且极其复杂），*并且*您使用无定形斑点，则可以绘制平面图，并慢慢将每条边“膨胀”成椭圆体. 你可以用一种放松的方式来做到这一点：如果它们的交叉点低于应有的值，它们就会膨胀，如果它们的交叉点高于应有的值，它们就会收缩。（他们实际上有两个维度来做到这一点：增肥和拉长；根据需要选择。拉长将推动图表的其余部分，因此您必须检查这不会使事情变得不可能，例如通过使用基于物理弹簧的布局。）最终你可能会集中在一个答案上，你必须检查它的准确性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-08T01:38:59.260

高登答案的变化怎么样？每个类别都是一个节点，节点之间的加权边表示重叠度。重叠越多，边缘越厚。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-29T18:20:44.940

请参阅[高阶图的一些示例](http://en.wikipedia.org/wiki/Venn_diagram#Edwards.27_Venn_diagrams)。

不过，我不知道您将如何缩放比例区域。

也许如果您绘制了适当顺序的图表并对其进行了细分。然后您可以为每个三角形分配所需的区域并进行某种压力扩散，允许顶点移动，并可能允许一些压力从每个三角形“泄漏”到属于同一组的邻居？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-29T18:40:46.257

您可能想尝试[https://github.com/icetime/pyinfor/blob/master/venn.py](https://github.com/icetime/pyinfor/blob/master/venn.py)但我也在 MatPlotLib 上找到了它[https://github.com/icetime/matplotlib/blob/master/lib/ matplotlib/venn.py](https://github.com/icetime/matplotlib/blob/master/lib/matplotlib/venn.py)但我认为它没有被正式接受。

# c++ - 当我的服务器出现故障时，排队的 FastCGI 请求会发生什么情况？

> ID：10804433
> 
> 赞同：1
> 
> 时间：2012-05-29T18:10:40.960
> 
> 标签：c++, nginx, webserver, fastcgi, high-availability

我了解 FastCGI 将请求排队并一一处理。我想知道如果有多个请求排队会发生什么，并且由于某种原因我的服务器出现故障。当服务器重新启动时，它是否仍会记住这些请求并继续对它们采取行动，或者我会丢失所有那些排队的请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T00:29:42.923

您将丢失排队的请求。它们保存在内存中，而不是磁盘上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T00:26:23.190

相反，除非您有 FastCGI 应用程序的文档，否则我会假设当操作系统或硬件出现故障或关闭时，正在处理的请求将丢失。如果你想确定，可以设置一些请求排队的测试，然后根据需要关机或者拔掉，模拟你要测试的情况。

# eclipse - Git 显示文件已更改，但 EGit 没有

> ID：10804434
> 
> 赞同：6
> 
> 时间：2012-05-29T18:10:42.127
> 
> 标签：eclipse, git, egit

这里是 Git 菜鸟。很难弄清楚为什么 git 显示某些文件已更改，而 Eclipse EGit 却没有。

当我在 Eclipse 中使用 EGit 并查看项目时，它显示没有文件更改。每个文件旁边没有小插入符号。当我使用 Git for Windows 时，或者进入命令行并输入“git status”时，它显示所有文件都已被修改。当我输入“git diff”时，它显示了一个文件的两个不同版本，首先是红色，然后是绿色，并且似乎存在一些空白差异，但我不能确定，我无法弄清楚空白是如何变化的在项目的每个文件中。（这里的东西没有加起来。）“git diff -w”什么都不返回。“git config --global apply.whitespace nowarn”什么也不做。

我可能对 git 有一个基本的概念问题。

无论如何，为什么 EGit 和 git 命令行显示不同的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:37:19.017

EGit 理解派生资源的概念（例如，用于在 JDT 中生成的 .class 文件）。换句话说，在 EGit 中默认情况下，派生资源中的文件不会添加到版本控制中。但是，命令行 git 客户端不知道这些标记，而是依赖 .gitignore 文件来避免签入生成的文件。

要检查有问题的文件是否是派生的，请打开文件属性对话框（在资源管理器中右键单击文件，然后选择属性...），然后在资源页面上选中派生复选框（它应该在对话框）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T23:14:27.940

事实证明，git 正在玩换行符游戏。这是莫名其妙的。底线：EGit 和 git 命令行不能同时在 Windows 机器上使用。为了获得一致性，您必须使用其中一种。

# jmeter - JMeter 运行非常缓慢

> ID：10804435
> 
> 赞同：1
> 
> 时间：2012-05-29T18:10:46.930
> 
> 标签：jmeter

我正在使用 JMeter 测试由 3rd 方供应商使用 Versata Logic Studio 编写的 Java 应用程序。

我的测试计划中有一些步骤使用一些发布数据提交请求，然后收到回复：

```
Response too large to be displayed. Size: 445817 > Max: 204800, Start of message:
{"header":{"action":"300","arguments":{"tabid":"Header","divid":"ActgDisb,Vendor,BusinessType...ETC 
```

这看起来不错（我猜是 400K？），只是该步骤比在浏览器中单击页面花费的时间要长得多。在浏览器中最多需要 5 秒。在 JMeter 中需要 2 分钟。在这些步骤中，仅一个线程的 CPU 也为 60%。

关于加快速度的任何想法？我们正在努力让足够的奴隶继续前进，这当然没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-03T06:32:51.030

如果您的 JMeter 脚本使用大量文件 I/O，那么将这些文件放入 RAM 将显着提高速度。您可以使用任何应用程序，例如 IMDisk（免费软件）在 RAM 中创建虚拟磁盘。确保您有超过 4GB 的 RAM。在我们的例子中，每个用户发送大约 8000 个小文件。每个系统上有 200 个用户，Jmeter 正在读取 16 个 Lack 文件。这是瓶颈。使用 RAM Disk，文件读取速度提高了 20 倍，帮助 Jmeter 全速运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T19:22:37.330

显示的消息告诉您在负载测试期间正在使用查看结果树。Jmeter 设置了一个限制，可以通过添加到 user.properties 文件来更改此组件中显示的页面大小：

*   view.results.tree.max_size 默认为 200 ko

但是在负载测试期间永远不要使用这个组件，因为它需要大量资源（内存和 cpu）。此组件只能在脚本编写阶段使用。

您可以阅读这篇文章，其中提供了有关 JMeter 配置和调优的提示：

*   [http://www.ubik-ingenierie.com/blog/jmeter_performance_tuning_tips/](http://www.ubik-ingenierie.com/blog/jmeter_performance_tuning_tips/)

免责声明：我写了它，它是我的公司，但恕我直言，我认为它值得一读 :-)

另请阅读：

*   [http://jmeter.apache.org/usermanual/component_reference.html](http://jmeter.apache.org/usermanual/component_reference.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T18:47:39.323

如果您已准备好迁移到 TCP 级别，那么[HTTP 原始请求](http://code.google.com/p/jmeter-plugins/wiki/RawRequest)允许对大量上传/下载进行高效内存操作。仔细阅读它的手册，有一些 JMeter 属性可以用来调整它的性能。

但是，我的经验是，您可能会遇到这样的情况，即 Java 本身是一种用于执行负载测试的糟糕技术。我建议您对 Raw Request 进行两次尝试，以防万一寻找一些 C/C++ 工具进行性能测试。

# android - 简单的 TextView.setText 导致 40% 的 CPU 使用率

> ID：10804436
> 
> 赞同：27
> 
> 时间：2012-05-29T18:10:52.390
> 
> 标签：android, cpu-usage

运行我的应用程序会导致我的手机使用约 40% 的 CPU：

```
final String position = String.format("%02d:%02d:%02d", time.getHours(), time.getMinutes(),
                time.getSeconds());
getActivity().runOnUiThread(new Runnable() {
    @Override
    public void run() {
         c.mTxtPosition.setText(position);
         ... 
```

通过注释掉*setText*方法，CPU 使用率下降到预期的 ~4% 水平。该方法每秒调用一次，并且会刷新 ImageViews、CustomViews ...，而不会导致相同的负载过剩。*除了 CPU 使用率之外，dalvik 仅通过调用setText()*就不断报告大约 10-1000 个对象的垃圾收集。

像这样创建一个跟踪文件：

```
Debug.startMethodTracing("setText");
c.mTxtPosition.setText(position);
Debug.stopMethodTracing(); 
```

traceview 将以下方法按各自的独占 CPU% 列为 Top 5：

*   ViewParent.invalidateChildInParent(16%)
*   View.requestLayout(11%)
*   ViewGroup.invalidateChild(9%)
*   TextView.setText(7%)
*   顶层(6%)

有人对此有解释吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-29T19:13:56.157

前段时间我自己也注意到了，我认为问题是每次调用 setText 时，文本框的大小都会发生变化，因此需要整个屏幕进行重新布局（昂贵）。

我自己还没有尝试过，但是如果您的文本框很简单并且可以设置为相对固定的大小，则可以尝试将 TextView 子类化并创建一个不会在 setText 上调整自身大小的视图，而只是绘制它可以绘制的任何内容进入现有区域？那会节省很多时间。

也许 setText 已经有一个标志可以使它做到这一点，但我不知道，尽管我没有仔细搜索。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-22T05:52:01.113

就我而言，我从触摸事件更新了一个 TextView，这会导致大量更新解决方案是将 TextView 的 layout_width 和 layout_height 更改为固定大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T19:24:45.937

一些可能的改进：

1.  尝试使用每 0.5 秒更新一次文本视图的处理程序，而不是执行它的线程。
2.  使可运行对象成为最终的常量对象，而不是每秒创建一个新对象。
3.  考虑在告诉 textview 更新自身之前检查时间是否已更改（newTimeInMs-LastPublishedTimeInMs>=1000）。
4.  而不是 String.format ，尝试使用 StringBuilder 。但是，您不会喜欢 String.format 提供的语言环境解决方案（例如，对于阿拉伯数字）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-16T13:23:42.367

就我而言，这是 TextView 的这个属性：

```
android:ellipsize="marquee" 
```

删除它可以加快设置文本的速度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-25T20:07:38.750

如果你查看`setText`方法的源代码，你会发现它做了很多繁重的工作——测量、绘图和对象分配，所有这些都在主线程上运行。

您可以使用新的`PrecomputedText`API 以在后台线程上完成所有这些操作并`setText`加快速度。

您可以使用`kotlin`&使用以下工作示例`coroutines`

```
private fun TextView.setTextAsync(text: String) {
    val textView = this
    lifecycleScope.launch {
        val params = TextViewCompat.getTextMetricsParams(textView)
        val precomputedText = withContext(Dispatchers.Default) {
            PrecomputedTextCompat.create(text, params)
        }
        TextViewCompat.setPrecomputedText(textView, precomputedText)
    }
} 
```

有关更多详细信息，您可以在我的博客 [https://androidexplained.github.io/android/ui/2020/10/21/improving-textview-settext-performance.html上阅读有关它的文章](https://androidexplained.github.io/android/ui/2020/10/21/improving-textview-settext-performance.html)

# c# - 调用函数时是否可以创建类模板并选择 C# 属性？

> ID：10804441
> 
> 赞同：0
> 
> 时间：2012-05-29T18:11:20.120
> 
> 标签：c#, templates

有谁知道以下是否可以将对象的 List<> 传递给函数并指定该函数应在其使用的每个对象中使用哪个属性？

我有一个类在整个类中使用对象的特定属性，但我不想创建同一个类的多个副本来使用该对象的不同属性。我考虑过使用 Linq，但我没有看到一种方法来指定在操作类的其他函数中使用哪个属性。

我在想必须有一种更优雅的方式来做到这一点，而不是创建同一个类来处理每个属性。我考虑过使用反射来告诉函数使用哪个属性，但这很快就会变得丑陋

示例伪代码：

```
class Store
{
   int amount;
   int id;
   int serial;
}

class AggregationMethods
{
   bool Has3Values( List<Store> places /* some other param to specify which property to use*/)
   {
      // do something with Store.amount or Store.id
   }

   // other functions to work with Store.amount or Store.id or Store.serial

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T18:14:02.393

在您的情况下，它们都是`int`值 - 因此您可以保留 a`Func<Store, int>`或将其传递给每个方法。如果您需要处理多种类型，这会变得稍微困难​​一些，但我们确实没有足够的信息来进一步评论。

也不清楚您是否期望两个具有多个*实例*（`AggregationMethods`例如，一个用于金额，一个用于 ID 等），或者这些是否真的是静态方法。如果您正在使用实例，那么您可以将投影保留为成员变量，并将其应用于每个方法。

值得注意的是，您给出的属性可能对应用相同的聚合没有意义——例如，虽然对金额求和是有意义的，但对 ID 求和是没有意义的。

# javascript - Javascript object.textContent == 仅在 IE 9 中未定义

> ID：10804442
> 
> 赞同：0
> 
> 时间：2012-05-29T18:11:34.700
> 
> 标签：javascript, xml, internet-explorer

我的 IE9 有以下代码的问题：

```
var XMLDocument = data;
                    var erreurs = new Array();

                    var test = data.lastChild.lastChild.childNodes;

                    for(var i=0; i<test.length; i++)
                    {
                        //var testx = test[i].textContent;
                        //alert("Test"+i+" = "+testx);
                        var testx = getText(test[i]);
                        alert(testx);
                        erreurs[i] = testx;
                    }

function getText(el) {
  return el.textContent || el.innerText || el.nodeValue || '';
} 
```

在 FF、Opera 和 Safari 中，此代码运行良好。在 IE 中，它给了我：
Test0 = undefined
Test1 = undefined

我的 XML：

```
<error>
    <missing>1</missing>
    <missing>2</missing>
    <missing>a</missing>
</error> 
```

我只想返回“缺失”节点的值。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T20:07:30.147

我在这个网站上找到了解决方案：http: [//www.chezneg.fr/leblog/chezneg-leblog.php?id_art=125](http://www.chezneg.fr/leblog/chezneg-leblog.php?id_art=125)

看起来，IE 和 FF 解释器读取 XML 文档的方式不同。
对于 FF，错误标记位于此处：data.lastChild.lastChild.childNodes
对于 IE，错误标记位于此处：data.lastChild.lastChild.lastChild.lastChild.childNodes
(dixit the debugger)

因此，最好通过以下代码定位错误标记： data.getElementsByTagName('error');

非常感谢 Esailija 的帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T12:54:20.157

我通过以下代码修复了 IE9 中的关闭问题：

```
function getText(el) {
    return el.textContent || el.text;
} 
```

# visual-studio - 有没有什么可以在 C# 中使用语句建议添加扩展？

> ID：10804447
> 
> 赞同：0
> 
> 时间：2012-05-29T18:12:06.107
> 
> 标签：visual-studio, add-in, using-statement

是否有 Visual Studio 的加载项或扩展可以执行 Ctrl-. 用于类型/类。也就是说，当光标位于 VS 无法识别的类型上时，键入 Ctrl-。它将提供一些建议。通常，建议要么添加 using 语句，要么完全限定类型。但是，因为`extensions methods`没有类似的添加`using statements`. 也许有一个插件、加载项或扩展，或者提供这个功能的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:21:30.523

Resharper 将此功能作为其[导入符号完成](http://www.jetbrains.com/resharper/features/coding_assistance.html#Import_Symbol_Completion)功能的一部分。

# c# - Datagridview Combobox 列不会下拉（C#）

> ID：10804451
> 
> 赞同：2
> 
> 时间：2012-05-29T18:12:18.100
> 
> 标签：c#, drop-down-menu, datagridview, combobox

我有一个填充了 8 列组合框和 32 行的 datagridview。

```
 private void frm_Main_Load(object sender, EventArgs e)
    {
        // Make 32 rows total
        for (int i = 0; i <= 30; i++)
        {
            DataGridView1.Rows.Add();
        }
        PopulateComboBoxes();
    } 
```

我还为每个项目添加了一些项目。由于某种原因，当我单击它们时它们不会下拉。

我环顾四周，但似乎没有任何效果。

编辑：它只是添加了每个下拉选项

```
 public void PopulateDropDowns()
    {
        //Get Errors
        DataSet Errors = SendQueryReturnDataSet("SELECT * FROM DB.Errors");
        DataTable dt_Errors = Errors.Tables[0];

        //Populate all Drop Downs
        for (int i = 0; i < dt_Errors.Rows.Count; i++)
        {
            for (int x = 0; x<8; x++)
            {
                for (int y = 0; y < 32; y++)
                {
                    (grid_Wafer.Rows[x].Cells[y] as DataGridViewComboBoxCell).Items.Add(dt_Errors.Rows[i][1].ToString());
                }
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:55:44.083

我有这样的问题。我在调试器中发现的是 DataGridViewComboBoxCells 的 ReadOnly 属性设置为 True。尽管在设计模式下创建该属性时，我将整个列的属性设置为 False。我找不到单元格或列设置为只读的任何地方。在我的代码中，我在分配给数据源后关闭了只读，组合框现在似乎很好。

编辑：我发现网格的 RowTemplate 将 Readonly 设置为 True，这导致了这个问题。我想这一定是在我尝试各种设置时发生的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T18:39:02.603

我们需要更多信息来准确解决这个问题。您能否向我们展示您的前端代码以及您的 PopulateComboBoxes() 方法？

有些事情突然浮现在脑海中...

*   由于某种原因，您的下拉列表没有正确填充（查看页面的源代码以查看这些项目是否实际添加到您的下拉列表中）

*   也许是样式问题？（检查您的 z-index 属性并确保没有比您的下拉列表更高的堆栈。尝试将您的下拉列表 z-index 设置为 99999）

即使有了上述建议，我仍需要查看更多代码才能给出正确答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-04T14:23:09.780

我已经打了几次，发现如果DataGridView ComboBox 列绑定到只读字段（即没有定义setter），它将显示为只读。如果您尝试 Rob Hincliff 建议的答案，您将收到此异常：*DataGridView column bound to a read-only field must have ReadOnly set to True*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T18:42:00.263

```
private void Form1_Load(object sender, EventArgs e)
{
    PopulateComboBoxes();
    // Make 32 rows total
    for (int i = 0; i <= 30; i++)
    {
        dataGridView1.Rows.Add();
    }
}

private void PopulateComboBoxes()
{
    //for each column, set as combobox, then populate
    var cName = new DataGridViewComboBoxColumn();
    cName.Items.Add("John Galt");
    cName.Items.Add("Tim Duncan");
    cName.Items.Add("King Leonidas");
    var cAddress = new DataGridViewComboBoxColumn();
    cAddress.Items.Add("Main Street");
    cAddress.Items.Add("Broad Street");
    cAddress.Items.Add("Market Street");

    dataGridView1.Columns.Add(cName);
    dataGridView1.Columns.Add(cAddress);

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-11T09:28:09.303

我知道这是非常古老的线程，但可能对某人有用。我有一个类似的问题，在我的情况下是因为我有 DGV 的 CellMouseDown 事件，我用它来显示一些右键单击菜单。在那种情况下，当左键单击 DGV 时，我只对右键单击和清除选择感兴趣；这是在组合框中删除菜单的那个。所以我重写了这个事件，一切都很好。

# zend-framework - Zend 框架中排队作业（cron 作业）的目录结构

> ID：10804452
> 
> 赞同：0
> 
> 时间：2012-05-29T18:12:21.733
> 
> 标签：zend-framework, cron-task

我在 Zend Framework 中找到了很多与目录结构和 cron 作业相关的帖子，但没有明确的答案:(

我有以下代码来创建发送电子邮件的作业。只要脚本 (emailNotification.php) 位于公共目录的 /jobs 下，就可以完美运行。

```
public function emailAction() {

    $request = $this->getRequest();
    if ($request->isPost()) {

        $emailFrom = $request->getPost('emailFrom');
        $messageFrom = $request->getPost('messageFrom');
        $subject = $request->getPost('Sub');
        $emailTo = $request->getPost('emailTo');

        // create a queued job
        date_default_timezone_set('UTC');            
        $q = new ZendJobQueue();
        $ts = date('Y-m-d H:i:s', time()+30);
        $id=$q->createHttpJob('jobs/emailNotification.php',array('emailFrom'=>$emailFrom,
                'messageFrom'=>$messageFrom,'subject'=>$subject,
                'emailTo'=>$emailTo),
                array('name'=>'email notification using a single job execution scheduled to run after 30 seconds','schedule_time'=>$ts));

        if(!$id)
            $this->_helper->json(array('status' => 'success', 'message' => "Queued job didn't work."));

        $this->_helper->json(array('status' => 'success', 'message' => "Email sent successfully."));
    } // request->isPost()

}// function emailAction 
```

我的目录结构是ZF创建的默认结构：

```
 [MyProject]
     [application]
     [data]
     [docs]
     [library]
     [public]
        index.php
     [scripts] 
```

如何修改 createHttpJob 以从不同的目录运行脚本，比如脚本/作业而不是公共/作业？还有什么我应该做的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:26:39.147

这实际上取决于您如何调用 cron 作业，以及在该脚本开始时您正在执行多少引导（如果有的话）。我会将您的代码更改为：

```
$id=$q->createHttpJob(APPLICATION_PATH.'/../scripts/jobs/emailNotification.php', [...] 
```

首先，您需要做的就是确保在您的 cron 脚本中设置了 APPLICATION_PATH。

# c++ - c++ 从 3 个浮点值生成 unordered_map 的键

> ID：10804455
> 
> 赞同：4
> 
> 时间：2012-05-29T18:12:32.880
> 
> 标签：c++, floating-point, key, unordered-map

我真的不明白：

我正在读取点，每个点都包含 3 个浮点值，来自二进制文件。将此点保存在 unordered_map 中

因此我尝试从这 3 个浮点值中创建一个键：

第一个意图：只需使用确切的位作为密钥：

```
unordered_map<string, vector<float>> points;
string vecToKey( float* a ) {
char bytes[12];
memcpy(bytes, a, 12);
return string(bytes);
} 
```

关键是我绝对想以这种方式消除相同的点，但是

在一个读取大约 21374 点的示例项目中，地图结果大小 = 10640 点

使用以下方法作为密钥创建导致 10687 点的正确结果

```
string vec3ToKey( float a[3] ) {
float a1[3];
a1[0] = a[0];
a1[1] = a[1];
a1[2] = a[2];
stringstream ss;
boost::archive::text_oarchive oa(ss);
oa << a1;
return ss.str();
} 
```

问题是速度。第二种方法需要大约 16 秒，第一种方法只需 1-2 秒……我无法解释自己为什么会有差异……

我欣赏每一个想法:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T18:36:26.837

```
string vecToKey( float* a ) {
  char bytes[12];
  memcpy(bytes, a, 12);
  return string(bytes);
} 
```

您正在使用的字符串构造函数在第一个空字节处停止。浮点值可以包含空字节。所以字符串可能不能准确地表示三个浮点数。您可以通过在其中粘贴一个断言来查看：

```
 string s(bytes);
  assert(s.size() == sizeof bytes);
  return s;
} 
```

另一个问题是它`bytes`可能*不*包含空字节，并且程序可能会将随机垃圾复制到字符串中或以其他方式表现出未定义的行为。

我建议您不要尝试以这种方式滥用字符串。你想要一个三个浮点数的键，所以使用一个完全代表的键：`std::array<float,3>`。或者更好的是使用“Point”类，因为这就是三个浮点数所代表的。

由于没有内置的数组哈希函数，您可以使用以下内容：

```
// taken from http://stackoverflow.com/questions/6899392/generic-hash-function-for-all-stl-containers
template <class T>
inline void hash_combine(std::size_t & seed, const T & v)
{
  std::hash<T> hasher;
  seed ^= hasher(v) + 0x9e3779b9 + (seed << 6) + (seed >> 2);
}

struct Hasher {
    size_t operator() (std::array<float,3> const &v) {
        size_t h = std::hash<float>()(v[0]);
        hash_combine(h,v[1]);
        hash_combine(h,v[2]);
        return h;
    }
};

std::unordered_map<std::array<float,3>,vector<float>,Hasher> map; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T18:25:16.930

将索引更改为整数类型，例如`unsigned int`。尝试更像这样的代码：

```
unsigned int vec3toKey( float a[3] )
{
   unsigned char *in = reinterpret_cast<unsigned char>(a);
   unsigned int ret = 2654435761u;
   for(int i = 0; i < (3 * sizeof(float)); ++i)
     ret = (ret * 2654435761u) ^ *in++;
   return ret;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T18:27:33.793

通用容器可以使用任何类型作为键。当然，您在此应用程序中有某种点类。那应该是你的关键。

显然，您需要重载散列函数才能使用您自己的类型（感谢 DavidSchwartz）。这个问题解决了：

[C++ unordered_map 用户定义类型](https://stackoverflow.com/questions/4211397/c-unordered-map-user-defined-type)

PS：如果你没有点结构或类，你可能想要一个：p

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T18:45:24.663

[http://www.boost.org/doc/libs/1_49_0/doc/html/hash/combine.html](http://www.boost.org/doc/libs/1_49_0/doc/html/hash/combine.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-18T09:21:47.140

我试图使用@bames53 解决方案，但遇到了一些编译问题。在考虑[这个答案](https://stackoverflow.com/questions/6899392/generic-hash-function-for-all-stl-containers)时，这里给出的@bames53 是我拥有的最终版本

```
 #include <iostream>
  #include <string>
  #include <vector>
  #include <unordered_map>

  template <typename C> struct Hasher{
                      typedef typename C::value_type value_type;
                      inline std::size_t operator() (const C &c) const{
                          std::size_t seed = 0;
                          for(typename C::const_iterator it = c.begin(); it != c.end(); ++it){
                              std::hash<value_type> hasher;
                              seed ^= hasher(*it) + 0x9e3779b9 + (seed << 6) + (seed >> 2);
                          }
                          return seed;
                      }
  };

  int main()
  {

              std::unordered_map<std::array<float, 3>, std::vector<float>, Hasher<std::array<float, 3>>> E;
                  std::array<float, 3> t1 = {34, 56,78};
                  std::vector<float> result;
                  result.push_back(45);
                  E[t1] = result;

  } 
```

# jquery - rcarousel 问题 - 图像滚动中的空白区域

> ID：10804461
> 
> 赞同：0
> 
> 时间：2012-05-29T18:12:50.603
> 
> 标签：jquery

我有一个安装了 rcarousel 的网站，当我向右滚动时，我看到最后一张图片和第一张图片之间有一个空格。

有人知道是什么原因造成的吗？

这是网站

[http://frameworksgallery.com/view_artist2.php?artist_id=Nichols_Karen](http://frameworksgallery.com/view_artist2.php?artist_id=Nichols_Karen)

向右滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:14:47.180

我认为图像是按页面排序的。第一页有几张图片，第二页没有完全填满。如果从第二页向右滚动，则会再次加载第一页。

# php - 如何判断moodle cron是否工作？

> ID：10804464
> 
> 赞同：9
> 
> 时间：2012-05-29T18:13:17.267
> 
> 标签：php, cron, moodle

我刚刚向服务器管理员发送了一条消息，询问他是否可以在服务器上设置 cronjobs，他让我告诉他是否一切正常。如何测试 cronjobs 是否正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T13:10:06.703

确实——正如 edelgado 所说——如果 cron 作业在 24 小时后没有运行，那么通知页面中会显示一条消息。

但是，如果您想立即运行脚本，您可以转到：

```
http://www.mymoodlesite.com/admin/cron.php 
```

`www.mymoodlesite.com`你的moodle实例的地址在哪里。

该页面将显示脚本在服务器运行时的输出。如果有任何效果，它将在页面末尾打印类似的行：

```
Cron script completed correctly
Execution took 1.938528 seconds 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-22T16:04:49.830

您需要将 Moodle cron run 输出到日志文件，例如您的 cron.d 记录可能如下所示：

```
* * * * * www-data /usr/bin/php /var/www/moodle/admin/cli/cron.php >> /var/log/vle/moodle-cron.log 2>&1 
```

然后， 的内容`/var/log/vle/moodle-cron.log`会立即告诉您 cron 是否运行良好。如果您想更进一步，您甚至可以使用一些单环工具监视文件的最后更新，并在 cron 停止时收到警报。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T10:22:35.713

转到通知页面。如果 cron 在过去 24 小时内没有运行，它将向您显示一条消息，告知该事实。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-25T16:12:43.993

我正在运行 WAMP 2.2。我使用[了这个moodle doc page](https://docs.moodle.org/22/en/Cron_with_Windows_OS)，特别是**moodle cron 包**。下载 MoodleCron-Setup.exe 文件，安装并验证 Windows 服务处于活动状态且正在运行。该服务的名称是**Moodle Cron**。如果状态显示已开始 - 那么您应该已准备就绪。如果您双击该服务并查看其属性，它应该具有自动启动类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-21T23:47:39.370

如果您是moodle的站点管理员，您可以尝试从以下检查。登录到您的moodle，然后仪表板► 站点管理► 服务器► 计划任务

它将显示每个任务的状态。在那里你应该知道 cron 作业是否运行。希望这有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-17T21:52:14.810

最后一个 cron exec 时间戳在“mdl_config_plugins”表中，字段“plugin”=“tool_task”，因此要查询值（PHP 格式）：

```
select value from mdl_config_plugins
where plugin='tool_task' and name='lastcronstart'; 
```

要在站点管理/通知页面中显示此值，请在 307 行附近修改文件 admin/ **renderer.php**，在“cron_infrequent_warning”行之后插入以下 2 行：

```
$lastcron = get_config('tool_task', 'lastcronstart');
$output .= " Last CRON exec = ".date("d-m-Y H:i:s",$lastcron)."<br>"; 
```

# android - 如何将 HttpEntity 转换为 JSON？

> ID：10804466
> 
> 赞同：28
> 
> 时间：2012-05-29T18:13:21.353
> 
> 标签：android, json, web-services

我想从 Web 服务中检索 JSON 并对其进行解析。
我走对了吗？

```
 HttpClient httpclient = new DefaultHttpClient();
    HttpGet httpget = new HttpGet(url);
    HttpResponse response;
    try {
        response = httpclient.execute(httpget);
        HttpEntity entity = response.getEntity();

        if (entity != null) {
           // parsing JSON
        }

    } catch (Exception e) {
    } 
```

不幸的是，我不知道如何转换`HttpEntity`成 JSONObject。

这是我的 JSON（摘录）：

```
{
    "names": [
        {
            "name": "Zachary"
        },
        {
            "name": "Wyatt"
        },
        {
            "name": "William"
        }
    ]
} 
```

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-05-29T18:17:16.510

您可以将字符串转换为 json，如下所示：

```
try {
        response = httpclient.execute(httpget);
        HttpEntity entity = response.getEntity();

        if (entity != null) {
           String retSrc = EntityUtils.toString(entity); 
           // parsing JSON
           JSONObject result = new JSONObject(retSrc); //Convert String to JSON Object

             JSONArray tokenList = result.getJSONArray("names");
             JSONObject oj = tokenList.getJSONObject(0);
             String token = oj.getString("name"); 
        }
}
 catch (Exception e) {
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-28T10:01:16.527

使用 gson 和 EntityUtils：

```
HttpEntity responseEntity = response.getEntity();

try {
    if (responseEntity != null) {
        String responseString = EntityUtils.toString(responseEntity);
        JsonObject jsonResp = new Gson().fromJson(responseString, JsonObject.class); // String to JSONObject

    if (jsonResp.has("property"))
        System.out.println(jsonResp.get("property").toString().replace("\"", ""))); // toString returns quoted values!

} catch (Exception e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T18:17:02.457

使用 entity.getContent() 获取 InputStream 并将其转换为 String。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T18:22:01.583

尝试这个

```
public String getMyFeed(){
    HttpClient httpclient = new DefaultHttpClient();
    HttpGet httpget = new HttpGet(url);
    HttpResponse response = httpclien.execute(httpget);

    HttpEntity entity = response.getEntity();
    HttpInputStream content = entity.getContent();

    StatusLine sl = response.getStatusLine();
    int statCode = sl.getStatusCode()

   if (statCode ==200){

    // process it

}

}

String readFeed  = getMyFeed();
JSONArray jArr = new JSONArray(readFeed);

for(int i=0 ; i<jArr.length ; i++)
JSONObject jObj = jArr.getJSONObject(i); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-04T09:33:26.193

```
 public void responce() throws ClientProtocolException, IOException {
            org.apache.http.client.HttpClient httpclient = HttpClients.createDefault();
            HttpPost httppost = new HttpPost("https://www.example.com/api/authenticate");

            List<NameValuePair> params = new ArrayList<NameValuePair>(2);

            params.add(new BasicNameValuePair("UserName", "anything"));
            params.add(new BasicNameValuePair("Password", "usepassworld"));

            httppost.setEntity(new UrlEncodedFormEntity(params, "UTF-8"));

            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();

            if (entity != null){
               String string_1 = EntityUtils.toString(entity); 
               System.out.println("the token we are generated is -->"+ string_1);   
                }
            }           
    } 
```

# php - Javascript/PHP %Y-%m-%d %H:%M:%S 调整为本地计算机时间

> ID：10804470
> 
> 赞同：0
> 
> 时间：2012-05-29T18:13:24.773
> 
> 标签：php, javascript, unix-timestamp

我在 mySQL 中有时间数据，格式为 %Y-%m-%d %H:%M:%S 作为 UTC +0 格式。我想显示用户正在使用的本地计算机的时间数据调整。

例如：数据是 2012-05-29 15:00:00 那么时间应该以东部时间 2012-05-29 11:00:00（应用夏令时，UTC -4 小时）和西海岸向用户显示应该显示 2012-05-20 08:00:00 (URC -7hour)

任何用于转换的脚本？PHP 或 Javascript 都不错。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:20:24.263

使用 UTC 在内部存储所有日期，然后为每个用户设置：

```
if ( $_SESSION['user_timezone'] ) date_default_timezone_set($_SESSION['user_timezone']); 
```

如果您想勇敢并且您的用户是基于互联网的（而不是像我的大多数人那样使用 VPN），您可以使用定位服务查找他们的位置。

我为每个用户存储这个，然后让他们选择。

生成时区列表以呈现给用户的简单方法：

```
echo '<select id="userTimezone" onChange="some_ajax_function">
        <option value="">Please select your Timezone</option>';
foreach (DateTimeZone::listIdentifiers() as $value )
{
    if ( $_SESSION['user_timezone'] == $value )
    {
        $output .= '<option value="' . $value . '" selected="selected">' . htmlentities($value) . '</option>';
    }
    else
    {
        $output .= '<option value="' . $value . '">' . htmlentities($value) . '</option>';
    }
}
$output .= '</select>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T18:24:32.720

这是一个使用 PHP [DateTime](http://php.net/DateTime)类的快速示例。

```
$time = '2012-05-29 15:00:00';

$datetime = new DateTime($time, new DateTimeZone('UTC'));
$datetime->setTimezone(new DateTimeZone('America/Los_Angeles'));

echo $datetime->format('Y-m-d H:i:s'); // 2012-05-29 08:00:00 
```

[日期和时间类](http://php.net/datetime)

# php - WordPress AJAX 在图库 中拖放图像不保留用户设置的顺序

> ID：10804472
> 
> 赞同：1
> 
> 时间：2012-05-29T18:13:46.947
> 
> 标签：php, wordpress

处理由以前的 Web 开发人员编写的一些代码，我遇到了一个问题，即更新画廊的拖放 AJAX 驱动的照片顺序无法保存。我正在运行最新版本的 WordPress (3.3.2)，但客户说自定义订购从未奏效。

**以下是正在发生的事情的更详细列表：**

1.  客户转到 WP 管理面板上帖子的编辑区域。
2.  客户端使用拖放功能对一些照片重新排序，AJAX 触发的警报表明订单已保存。
3.  用户单击“更新”按钮并查看他们的帖子。订单现在混乱，并没有保留他们的拖放顺序。

**下面的方法对我有用，但只是部分：**

1.  单击现有帖子进行编辑。
2.  拖放了一些照片的排列，但还没有点击“更新”。
3.  相反，在显示 AJAX 驱动的警报表明订单已保存后，我去刷新前端的更新帖子。该帖子反映了我设置的新照片顺序。
4.  在避免像瘟疫一样的“更新”按钮之后，我点击帖子列表并回到同一个帖子，就像我想编辑其他东西一样。我猜基本上是在帖子本身内开始一个新会话。照片顺序现在混乱了，我之前设置的拖放顺序被吹走了。

以下是处理照片订单本身的 functions.php 文件中的代码：

```
// Ajax callback for reordering images
function reorder_images() {
    if (!isset($_POST['data'])) die();

    list($order, $post_id, $key, $nonce) = explode('!',$_POST['data']);

    if (!wp_verify_nonce($nonce, 'rw_ajax_sort_file')) {
        die('1');
    }

    parse_str($order, $items);
    $items = $items['item'];
    $order = 0;
    $meta = array();
    foreach ($items as $item) {
        wp_update_post(array(
            'ID' => $item,
            'post_parent' => $post_id,
            'menu_order' => $order
        ));
        $order++;
        $meta[] = $item;
    }
    delete_post_meta($post_id, $key);
    foreach ($meta as $value) {
        add_post_meta($post_id, $key, $value);
    }

    die('0');
} 
```

我在想有一个问题，`DOING_AUTOSAVE`但发现它已经在代码中实现了（见下文）：

```
// Save data from meta box
function save($post_id) {
    global $post_type;
    $post_type_object = get_post_type_object($post_type);

    if ((defined('DOING_AUTOSAVE') && DOING_AUTOSAVE)                       // check autosave
    || (!isset($_POST['post_ID']) || $post_id != $_POST['post_ID'])         // check revision
    || (!in_array($post_type, $this->_meta_box['pages']))                   // check if current post type is supported
    || (!check_admin_referer(basename(__FILE__), 'rw_meta_box_nonce'))      // verify nonce
    || (!current_user_can($post_type_object->cap->edit_post, $post_id))) {  // check permission
        return $post_id;
    }

    foreach ($this->_fields as $field) {
        $name = $field['id'];
        $type = $field['type'];
        $old = get_post_meta($post_id, $name, !$field['multiple']);
        $new = isset($_POST[$name]) ? $_POST[$name] : ($field['multiple'] ? array() : '');

        // validate meta value
        if (class_exists('RW_Meta_Box_Validate') && method_exists('RW_Meta_Box_Validate', $field['validate_func'])) {
            $new = call_user_func(array('RW_Meta_Box_Validate', $field['validate_func']), $new);
        }

        // call defined method to save meta value, if there's no methods, call common one
        $save_func = 'save_field_' . $type;
        if (method_exists($this, $save_func)) {
            call_user_func(array(&$this, 'save_field_' . $type), $post_id, $field, $old, $new);
        } else {
            $this->save_field($post_id, $field, $old, $new);
        }
    }
} 
```

如果您想查看完整实现的内容，可以[在此处查看](http://pastebin.com/kRr6PSZ9)。

提前致谢。如果您需要更多信息，我会尽我所能提供。也许这只是某种插件冲突。上述方法目前正在通过`functions.php`主题本身的文件实现。

# mysql - Web 应用程序数据库设计的替代方案

> ID：10804475
> 
> 赞同：0
> 
> 时间：2012-05-29T18:13:53.787
> 
> 标签：mysql, database, design-patterns, web-applications, automation

我大部分时间都在使用 zend 框架开发一些基于 Web 的应用程序。我注意到为 php 代码中的所有数据建模数据库需要花费大量时间。换句话说，您必须对数据进行两次处理。

除了手工设计数据库和表结构之外，还有其他选择吗？

我只想创建一个数据库，让其他人关心将结构从 php 编程逻辑映射到数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:20:34.207

啊，您正在寻找[对象关系映射器](http://en.wikipedia.org/wiki/Object-relational_mapping)！这些在当今许多类型的 Web 应用程序中都很常见。

关于 PHP，我遇到的最好的一个是[Doctrine](http://www.doctrine-project.org/)：

> 位于强大的数据库抽象层 (DBAL) 之上的 PHP 对象关系映射器 (ORM)。它的一个关键特性是可以选择用一种专有的面向对象的 SQL 方言编写数据库查询，这种方言称为 Doctrine Query Language (DQL)，受 Hibernates HQL 的启发。这为开发人员提供了一种强大的 SQL 替代方案，可以保持灵活性，而无需不必要的代码重复。

# api - GitHub API v3 中文件的状态类型是什么？

> ID：10804476
> 
> 赞同：2
> 
> 时间：2012-05-29T18:14:02.237
> 
> 标签：api, github, github-api

好的，我正在将一些使用 GitHub API v2 的代码移植到 v3，并且他们改变了在提交中列出文件的方式。现在有一个文件数组，每个文件都有一个状态，而不是像 v2[中的“添加”、“修改”和“删除”文件的数组。](http://develop.github.com/p/commits.html)

很简单，但他们的示例只显示“添加”和“修改”的状态，而不是删除/删除的状态。我假设它会像 v2 一样被“删除”，但“删除”将是正确的 git 术语，所以我不想只是假设。我正在测试的 repo 恰好没有任何已删除的文件，所以我目前没有示例。

那么，在 GitHub API v3 中它是“删除”还是“删除”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:40:45.630

它被“移除”了。我终于在我的一个存储库中找到了一个提交，我实际上删除了一个文件并确认。

# jquery - 使用 jQuery 脚本验证表单中的 CheckBox http://validator.codeplex.com/

> ID：10804478
> 
> 赞同：1
> 
> 时间：2012-05-29T18:14:03.620
> 
> 标签：jquery, forms, validation

我正在尝试使用此处[http://validator.codeplex.com](http://validator.codeplex.com)中的脚本验证表单。

这是我的 HTML 表单：

```
<form action="#" method="POST" id="input" autocomplete="on">
    <fieldset>              
        <input type="text" name="name" id="name" value=""  maxlength="60" validate="form" require="Please enter your name." />
        <input type="email" name="email" id="email" value=""  maxlength="80" validate="form" require="Please enter your email address." email="Please enter a valid email address." />
        <input type="url" name="url" id="url" value=""  maxlength="400" validate="form" require="Please enter your website." />
        <input type="checkbox" id="updates" name="updates"  />
        <input type="checkbox" id="agree" name="agree"  validate="form" require="Please agree to the terms."/>
        <input type='submit' value=""  id="submit" onclick="return validate('form');" />
    </fieldset>
</form> 
```

除复选框外，所有字段均已正确验证。我不确定如何使用脚本正确验证复选框部分。有什么想法吗？

另外-这里是javascript部分：http: [//jsfiddle.net/baumdexterous/TBtSD/](http://jsfiddle.net/baumdexterous/TBtSD/)

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T22:15:17.303

在验证器脚本中添加两行，如下所示：

```
function check(elm) {
  var jelm = $(elm);

  var listsize = jelm.find("input:radio, input:checkbox").size();
  if (jelm.attr("disabled") || listsize > 0 && listsize == jelm.find("input:radio:disabled, input:checkbox:disabled").size())
    return "";

  //ADD THESE TWO LINES
  if (jelm.attr("require") && jelm.is(":checkbox:not(':checked')"))
    return "require";
  //------------------------

  //if empty value only perform required validation
  if ((jelm.val() == "" || jelm.val() == null) && jelm.find("input:radio:checked, input:checkbox:checked").size() == 0)
    return jelm.attr("require") ? "require" : ""; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T18:23:42.630

正如@jrummell 在评论中提到的那样，询问插件的支持会更有益，如果它是一个选项，我建议切换到[**`validate.js`**](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

这是带有您的标记的[**演示**](http://jsfiddle.net/SAfBm/)

# java - Android生成的ID真的不可变吗？

> ID：10804482
> 
> 赞同：0
> 
> 时间：2012-05-29T18:14:29.407
> 
> 标签：java, android

我在一个包含 9 个按钮的 Android 应用程序中定义了一个 Activity。每个按钮都必须监听同一个事件监听器。

查看生成的 R 类，它们的 Id 被定义：

```
 public static final int btn1=0x7f040001;
 ...
 public static final int btn1=0x7f040009; 
```

我的问题是：可以在 for 循环中添加循环 ID 的侦听器吗？

```
for (int i= R.id.btn1; i<=R.id.btn9;i++)
{
   Button button = (Button)findViewById(i);
   button.setOnTouchListener(new View.OnTouchListener() {
        @Override public boolean onTouch(View v, MotionEvent event) {
             ...
        }
   });
} 
```

或者在某些情况下，编译器重新分配了 Id，从而破坏了我的代码？

我正在使用 Intellij Idea 环境来构建应用程序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T18:17:08.460

我担心如果您的 R 文件使用不连续的 ID 重新生成，这将是一个非常糟糕的主意。您更好的选择是存储一个包含您的 ID 的 int 数组并循环遍历该数组

前任。

```
int[] views = new int[] { R.id.btn1, R.id.btn2, R.id.btn3, ...... R.id.btn9 };

for (int i= 0; i< views.length ;i++)
{
   Button button = (Button)findViewById(views[i]);
   button.setOnTouchListener(new View.OnTouchListener() {
        @Override public boolean onTouch(View v, MotionEvent event) {
             ...
        }
   });
} 
```

# jquery - 带有自动完成功能的 Jqgrid

> ID：10804488
> 
> 赞同：-4
> 
> 时间：2012-05-29T18:15:10.670
> 
> 标签：jquery, jquery-ui, jqgrid

有人可以帮助我在通过内联编辑和使用表单添加行时向 Jqgrid 添加自动完成功能的示例代码。在我尝试过的地方，只有添加日期选择器的代码。

请帮助我提供示例代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:03:16.743

如果它对您有帮助，您可以查看答案，[该答案](https://stackoverflow.com/a/7392816/315935)解释了如何在 jqGrid 中实现简单和更复杂的使用 jQuery UI 自动完成的案例。在示例中将用作`dataInit`属性`searchoptions`。可以在[editoptions](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:common_rules#editoptions)内部使用具有相同代码的完全相同的属性。相应的服务器代码是用 C# 编写的，但我希望你能理解它并用 Java 实现它。

在[答案](https://stackoverflow.com/a/5329014/315935)的“更新”部分[的演示](http://www.ok-soft-gmbh.com/jqGrid/FillToolbarSearchFilter.htm)中，您将找到一个示例，如何在具有纯本地数据的网格中使用 jQuery UI 自动完成。

# java - 如何为 Gson 编写可与 .NET 一起使用的自定义序列化程序适配器？

> ID：10804489
> 
> 赞同：0
> 
> 时间：2012-05-29T18:15:12.303
> 
> 标签：java, .net, json, serialization, gson

我有一个 .NET Rest 网络服务，它以 Json 形式提供响应。我在 Java 中使用 web 服务。我使用 Gson 对 Json 进行序列化。

当涉及到多态性时，我在 .NET 和 Java 之间进行序列化时遇到了问题。

我已经按照本指南为 Gson 编写了一个自定义序列化器适配器，用于扩展抽象类的类： [http ://www.javacodegeeks.com/2012/04/json-with-gson-and-abstract-classes .html](http://www.javacodegeeks.com/2012/04/json-with-gson-and-abstract-classes.html)

问题是 Gson 然后生成以下内容：

```
{"type":"Circle","properties":{"color":"red"}} 
```

.NET 中的默认实现不理解新的“属性”属性。我需要适配器编写的内容如下：

```
{"__type":"Circle","color":"red"} 
```

如何在序列化时更改适配器以输出它以及谁也反序列化它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T19:50:17.250

通过将以下内容添加到抽象基类来解决它，以便它由 Gson 自动序列化：

```
private String __type = this.getClass().getSimpleName(); 
```

# sql - 计算类别中项目的技术

> ID：10804491
> 
> 赞同：0
> 
> 时间：2012-05-29T18:15:15.377
> 
> 标签：sql

我正在使用[RDBMS](http://en.wikipedia.org/wiki/Relational_database_management_system)建立一个电子商店，并且想知道表示特定类别中商品数量的最*有效方法是什么？*例如，我的类别菜单看起来像这样：

> *   书籍 (212)
> *   MP3 播放器 (13)
> *   鞋类 (562)

您使用什么技术来获得这些数字？我使用的是 PostgreSQL 9.1，但我认为所有 DBMS 的机制都应该是相似的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T18:16:13.490

你需要`GROUP BY`

```
SELECT category, count(*)
FROM items
GROUP BY category 
```

这将计算表中每个类别的项目数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T18:20:57.340

好吧，您想要的实际查询是：

```
SELECT category || ' (' || cast(count(*) as varchar(255)) || ')' as entry
FROM items
GROUP BY category 
```

# firefox-addon - Firefox 扩展中的跨页通信

> ID：10804494
> 
> 赞同：0
> 
> 时间：2012-05-29T18:15:25.827
> 
> 标签：firefox-addon, firefox-addon-sdk, cross-page-posting

我的扩展程序使用了两个选项卡，我想在它们之间来回传递事件。我已经开发了一个通过后台页面 api 执行此操作的 Google Chrome 扩展程序，但在 Firefox 中似乎没有等效项。

我认为 firefox 扩展文档中的 message-manager 可以解决问题，但是该对象的文档很差。

如果我不能直接从 google chrome api 导入背景页面的想法，我会很高兴使用其中一个选项卡来控制另一个选项卡。

任何帮助/指导都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T23:37:47.937

为此，您需要在 main.js 中设置一个事件管道，该管道接受来自一个页面的内容脚本的事件并将其通过管道传送到另一页面的内容脚本：

[https://addons.mozilla.org/en-US/developers/docs/sdk/1.7/dev-guide/guides/content-scripts/index.html](https://addons.mozilla.org/en-US/developers/docs/sdk/1.7/dev-guide/guides/content-scripts/index.html)

我不完全确定您的用例是什么，因此很难推荐更具体的技术。你会做的是：

*   确保内容脚本附加到每个选项卡
*   当在选项卡中发生的给定事件时，将该事件发射到main.js使用self.port.emit
*   当该事件到达 main.js 时，将其发送给另一个选项卡的工作人员。

我不清楚的一件事是这两个选项卡是否将是唯一使用该特定 URL 打开的选项卡？

# linq-to-xml - Xml 奇怪的异常

> ID：10804496
> 
> 赞同：1
> 
> 时间：2012-05-29T18:15:52.433
> 
> 标签：linq-to-xml

我不知道这个例外是什么。就在我以为我掌握了 linq 的窍门时，发生了这样的事情。我得到了这个例外：

```
Unable to cast object of type 'WhereSelectEnumerableIterator`2[System.Xml.Linq.XElement,TestImplementationIdeas.PatientClass]' to type 'TestImplementationIdeas.PatientClass'. 
```

现在，我知道为什么会抛出这个异常。

```
PatientClass template = (PatientClass)(from templates in xDocument.Descendants("template").Where
                                                       (templates => ((templates.Descendants("element").Attributes("name").ToString() == "EncounterId") && templates.Descendants("element").Attributes("value").ToString() == Enc.ToString())) //elem.XPathSelectElements(string.Format("//templates/template[./elements/element[@name=\"PopulationPatientID\"and @value='{0}' and @enc='{1}']]",PopulationPatID, Enc))
                                                       select new PatientClass
                                                       {
                                                           PatientId = Convert.ToInt32("0" + templates.XPathSelectElement("elements/element[@name='PatientId']").Attribute("value").Value),
                                                           EMPIID = Convert.ToInt32("0" + templates.XPathSelectElement("elements/element[@name='EMPIID']").Attribute("value").Value),
                                                           //public int PopulationPatientID { get; set; }
                                                           FirstName = templates.XPathSelectElement("elements/element[@name='FirstName']").Attribute("value").Value,
                                                           LastName = templates.XPathSelectElement("elements/element[@name='LastName']").Attribute("value").Value,

                                                       });
            return template != null ? template : null; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:25:55.750

通常，LINQ 查询总是返回一个`IEnumerable<>`对象，在您的情况下，`IEnumerable<PatientClass>`. 您需要执行其他操作以将集合过滤为单个对象。

```
//  will return the first `PatientClass` in the collection.  
//   And will throw an exception if the collection is empty.
return template.First(); 

//  will return the first `PatientClass` in the collection or return the default value       
//   (null in this case) if the collection is empty.
return template.FirstOrDefault(); 

// will return the only `PatientClass` in the collection if the collection only has 
//  one object and will throw an exception if it is empty or has more than 1 object.
return template.Single(); 

// will return the only `PatientClass` in the collection if the collection only has 
//  one object, the default value (null in this case) if it is empty and will throw an    
//  exception if it has more than 1 object.
return template.SingleOrDefault(); 
```

而不是`OrDefault()`方法，如果你想控制当它为空时返回什么值，有一个`DefaultIfEmpty<>()`扩展方法，你可以在集合为空时指定一个值。

```
// will return the first element in the collection, but if it is empty, 
//  it will return a new Patient class object created with the default constructor instead of a null
return template.DefaultIfEmpty(new PatientClass()).First(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T18:19:03.300

Because you are trying to cast the IEnumerable return type from your Linq to type PatientClass - the CLR can not do that since they are not related types.

You need to add some more Linq there to return a single instance of PatientClass.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T18:19:24.833

您的 LINQ 查询返回`IEnumerable<PatientClass>`您尝试转换为单个`PatientClass`. 如果您真的只想从查询中返回一个对象，请在其上调用 .First()

```
PatientClass template = (from templates in xDocument.Descendants("template").Where
                                                   (templates => ((templates.Descendants("element").Attributes("name").ToString() == "EncounterId") && templates.Descendants("element").Attributes("value").ToString() == Enc.ToString())) //elem.XPathSelectElements(string.Format("//templates/template[./elements/element[@name=\"PopulationPatientID\"and @value='{0}' and @enc='{1}']]",PopulationPatID, Enc))
                                                   select new PatientClass
                                                   {
                                                       PatientId = Convert.ToInt32("0" + templates.XPathSelectElement("elements/element[@name='PatientId']").Attribute("value").Value),
                                                       EMPIID = Convert.ToInt32("0" + templates.XPathSelectElement("elements/element[@name='EMPIID']").Attribute("value").Value),
                                                       //public int PopulationPatientID { get; set; }
                                                       FirstName = templates.XPathSelectElement("elements/element[@name='FirstName']").Attribute("value").Value,
                                                       LastName = templates.XPathSelectElement("elements/element[@name='LastName']").Attribute("value").Value,

                                                   }).First(); 
```

# internet-explorer-7 - 如何防止 IE7 下载所有用于字体声明的 EOT 文件？

> ID：10804502
> 
> 赞同：0
> 
> 时间：2012-05-29T18:16:59.717
> 
> 标签：internet-explorer-7, font-face, eot

我在这里需要一些帮助。我们为我们的站点使用自定义字体（非标准字体）并使用以下字体声明（在我们的全局 css 中声明）：

```
@font-face {
    font-family: 'MyWebFont';
    src: url('webfont.eot'); /* IE9 Compat Modes */
    src: url('webfont.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
         url('webfont.woff') format('woff'), /* Modern Browsers */
         url('webfont.ttf')  format('truetype'), /* Safari, Android, iOS */
         url('webfont.svg#svgFontName') format('svg'); /* Legacy iOS */
    font-weight: normal;
    font-style: normal;
    }

@font-face {
    font-family: 'MyWebFont';
    src: url('webfontbold.eot'); /* IE9 Compat Modes */
    src: url('webfontbold.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
         url('webfontbold.woff') format('woff'), /* Modern Browsers */
         url('webfontbold.ttf')  format('truetype'), /* Safari, Android, iOS */
         url('webfontbold.svg#svgFontName') format('svg'); /* Legacy iOS */
    font-weight: bold;
    font-style: normal;
    }

@font-face {
    font-family: 'MyWebFont';
    src: url('webfontitalic.eot'); /* IE9 Compat Modes */
    src: url('webfontitalic.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
         url('webfontitalic.woff') format('woff'), /* Modern Browsers */
         url('webfontitalic.ttf')  format('truetype'), /* Safari, Android, iOS */
         url('webfontitalic.svg#svgFontName') format('svg'); /* Legacy iOS */
    font-weight: normal;
    font-style: italic;
    } 
```

所以，到目前为止，它的表现超出了我们的预期……除了 IE7 的一个问题。

出于某种原因，IE7 会下载所有 EOT 文件（如在字体声明中声明/使用的那样），即使当前在浏览器中加载的页面仅使用了一种或两种字体变体。

请告知，我们缺少什么/需要更改什么来解决此问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T15:50:46.063

You can use [Conditional Comments](http://msdn.microsoft.com/en-us/library/ms537512%28v=vs.85%29.aspx) for it via sniffing the browsers version.

HTML:

```
<html>
    <head>
        <title>Example</title>

        <!--[if lte IE 8]> <link rel="stylesheet" href="font-face-lte8.css" type="text/css" media="" title="" charset="utf-8"> <![endif]-->
        <!--[if gte IE 9]> <link rel="stylesheet" href="font-face-gte9.css" type="text/css" media="" title="" charset="utf-8"> <![endif]-->
        <link rel="stylesheet" href="font-face-allothers.css" type="text/css" media="" title="" charset="utf-8">

    </head>
</html> 
```

CSS for font-face-lte8.css:

```
@font-face {
    font-family: 'MyWebFont';
    src: url('webfont.eot?#iefix') format('embedded-opentype'); /* IE6-IE8 */
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: 'MyWebFont';
    src: url('webfontbold.eot?#iefix') format('embedded-opentype'); /* IE6-IE8 */
    font-weight: bold;
    font-style: normal;
}

@font-face {
    font-family: 'MyWebFont';
    src: url('webfontitalic.eot?#iefix') format('embedded-opentype'); /* IE6-IE8 */
    font-weight: normal;
    font-style: italic;
} 
```

CSS for font-face-gte9.css

```
@font-face {
    font-family: 'MyWebFont';
    src: url('webfont.eot'); /* IE9 Compat Modes */
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: 'MyWebFont';
    src: url('webfontbold.eot'); /* IE9 Compat Modes */
    font-weight: bold;
    font-style: normal;
}

@font-face {
    font-family: 'MyWebFont';
    src: url('webfontitalic.eot'); /* IE9 Compat Modes */
    font-weight: normal;
    font-style: italic;
} 
```

CSS for font-face-allothers.css

```
@font-face {
    font-family: 'MyWebFont';
    src: url('webfont.woff') format('woff'), /* Modern Browsers */
         url('webfont.ttf')  format('truetype'), /* Safari, Android, iOS */
         url('webfont.svg#svgFontName') format('svg'); /* Legacy iOS */
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: 'MyWebFont';
    src: url('webfontbold.woff') format('woff'), /* Modern Browsers */
         url('webfontbold.ttf')  format('truetype'), /* Safari, Android, iOS */
         url('webfontbold.svg#svgFontName') format('svg'); /* Legacy iOS */
    font-weight: bold;
    font-style: normal;
}

@font-face {
    font-family: 'MyWebFont';
    src: url('webfontitalic.woff') format('woff'), /* Modern Browsers */
         url('webfontitalic.ttf')  format('truetype'), /* Safari, Android, iOS */
         url('webfontitalic.svg#svgFontName') format('svg'); /* Legacy iOS */
    font-weight: normal;
    font-style: italic;
} 
```

This will solve the problem.
For info: **IE9 supports TTF and WOFF files, so IE9 may download these too**, even if he didn't need them.

# sql - 在 SQL Server 中将行转换为列

> ID：10804505
> 
> 赞同：1
> 
> 时间：2012-05-29T18:17:16.160
> 
> 标签：sql, pivot, pivot-table, transpose, unpivot

我有一组看起来像这样的数据：

## 前

```
FirstName   LastName   Field1   Field2   Field3 ... Field27
---------   --------   ------   ------   ------     -------
 Mark        Smith     A        B        C          D
 John        Baptist   X        T        Y          G
 Tom         Dumm      R        B        B          U 
```

但是，我希望数据看起来像这样：

## 后

```
FirstName   LastName   Field   Value
---------   --------   -----   -----
Mark        Smith      1       A
Mark        Smith      2       B
Mark        Smith      3       C
Mark        Smith      4       D
John        Baptist    1       X
John        Baptist    2       T
John        Baptist    3       Y
John        Baptist    4       G
Tom         Dumm       1       R
Tom         Dumm       2       B
Tom         Dumm       3       B
Tom         Dumm       4       U 
```

我看过 PIVOT 函数。它可能会起作用。我不太确定。我无法理解如何使用它。但是，我不确定枢轴是否可以在“字段”列中放置“4”。据我了解，PIVOT 函数只是将 Field1...Field27 的值转换为“值”列。

我还考虑过使用光标遍历表，然后遍历字段列，然后将“字段”和“值”插入另一个表。但是，我知道这会影响性能，因为它是基于串行的操作。

任何帮助将不胜感激！如您所知，我对 T-SQL（或一般的 SQL）和 SQL Server 还是很陌生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T18:48:19.990

您可以使用[UNPIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)执行。有两种方法可以做到这一点：

1）在静态反透视中，您将在查询中对字段列进行硬编码。

```
select firstname
  , lastname
  , replace(field, 'field', '')  as field
  , value
from test
unpivot
( 
  value
  for field in (field1, field2, field3, field27)
) u 
```

有关工作演示，请参阅[SQL Fiddle 。](http://sqlfiddle.com/#!3/9022e/2)

2) 或者您可以使用 Dynamic Unpivot，它会在您运行 SQL 时获取 PIVOT 的项目列表。如果您有大量需要取消透视的字段，Dynamic 非常棒。

```
create table mytest
(
  firstname varchar(5),
  lastname varchar(10),
  field1 varchar(1),
  field2 varchar(1),
  field3 varchar(1),
  field27 varchar(1)
)

insert into mytest values('Mark', 'Smith', 'A', 'B', 'C', 'D')
insert into mytest values('John', 'Baptist', 'X', 'T', 'Y', 'G')
insert into mytest values('Tom', 'Dumm', 'R', 'B', 'B', 'U')

DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX);

select @cols = stuff((select ','+quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('mytest') and
               C.name like 'Field%'
         for xml path('')), 1, 1, '')

set @query = 'SELECT firstname, lastname, replace(field, ''field'', '''')  as field, value
            from mytest
            unpivot 
            (
               value
               for field in (' + @cols + ')
            ) p '

execute(@query)

drop table mytest 
```

两者都会产生相同的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T18:22:42.470

如果你想做它查询比快速和肮脏的方式将是创建联合

```
 Select FirstName,LastName,1,Field1
             from table
             UNION ALL
             Select FirstName,LastName,2,Field2
             from table
             . 
             . 
```

并且对于所有字段 cols 都类似

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T18:30:45.967

而不是使用枢轴，使用`unpivot`这样的：

```
select firstname, lastname, substring(field,6,2) as field, value
from <yourtablename>
unpivot(value for field in (field1,field2,field3,field4,field5,field6,field7,field8,field9,field10,field11,field12,field13,field14,field15,field16,field17,field18,field19,field20,field21,field22,field23,field24,field25,field26,field27,field1,field2,field3,field4,field5,field6,field7,field8,field9,field10,field11,field12,field13,field14,field15,field16,field17,field18,field19,field20,field21,field22,field23,field24,field25,field26,field27)) as unpvt; 
```

# python - 如何在 tweepy（python）中获取推文 ID（since_id，max_id）？

> ID：10804507
> 
> 赞同：6
> 
> 时间：2012-05-29T18:17:18.210
> 
> 标签：python, json, twitter, tweepy

我想知道一种获取推文 ID 的方法，以检查在我使用[tweepy](http://code.google.com/p/tweepy/)制作的 python 应用程序的用户时间轴中显示了哪些推文。

似乎没有办法提取推文 ID 或跟踪它们。保持检查的参数是`since_id`。请如果有人可以提供帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T20:45:08.693

图书馆`tweepy`紧随[`twitter API`](https://dev.twitter.com/docs/api)其后。该 API 返回的所有属性都可用于结果对象；因此，对于状态消息，您需要查看[`tweet`对象描述](https://dev.twitter.com/docs/platform-objects/tweets)以查看它们是否具有`id`参数：

```
for status in api.user_timeline():
    print status.id 
```

存储最新`id`的以轮询更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-26T18:39:28.687

`max_id`和`since_id`是方法的参数`api.user_timeline()`。

使用该`tweepy.Cursor()`对象可能看起来像这样：

```
 tweets = []
    for tweet in tweepy.Cursor(api.user_timeline,
                       screen_name=<twitter_handle>,
                       since_id = <since_id>
                       ).items(<count>):
        tweets.append(tweet) 
```

# asp.net - asp.net gridview 事件，保持数据源

> ID：10804509
> 
> 赞同：0
> 
> 时间：2012-05-29T18:17:20.790
> 
> 标签：asp.net, gridview, datasource

什么是为网格视图保留数据源的方法。

情况 ：

我有一个查询可能需要 5 到 10 秒（大量数据上的大量链接）。结果对于页面来说太大了，所以我的网格上有一个分页。

但是，每次我使用 时`pageIndexChanged`，我都需要再次获取数据源。

所以我想知道如何保留我的数据源。

可能吗？**不是按会话**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:37:44.597

有可能，我使用了自定义（服务器端）视图状态提供程序来缓存您的数据源。

****更新：*** 这里有一篇关于自定义视图状态提供程序（带有示例代码）的很好的文章：http: [//www.codeproject.com/Articles/8001/ViewState-Provider-an-implementation-using-Provide](http://www.codeproject.com/Articles/8001/ViewState-Provider-an-implementation-using-Provide)

但是，我强烈建议改进您的查询，以将数据限制在用户真正想要查看的范围内。从内存、处理器、带宽和用户体验的角度来看，具有比用户真正感兴趣的行多得多的大型网格是笨拙的。尝试找到更好的方法。

# extjs - 历史和选择模型问题

> ID：10804510
> 
> 赞同：0
> 
> 时间：2012-05-29T18:17:36.377
> 
> 标签：extjs, extjs-mvc, extjs4.1, selectionmodel

我正在尝试使用 Extjs 4.1 构建一个应用程序。一般来说：它是一个视口，西边有一个树形面板，中间有一个面板，它实际上是一个选项卡面板。当用户单击树节点时，一个选项卡将填充中心视图。我在树面板中设置了一个属性，在选择一个节点后它会被取消选择（deselectAll）。这样做的原因是用户可以从不同的位置（例如，在每个选项卡内）打开许多选项卡。但是，当我设置上述属性时，它会产生错误（“数据”未定义）。未定义的数据是与树节点相关的数据。所以，关于选择模型的问题：

我该如何解决这个问题（解决方案可能是选择第一个节点，但我不想要它）？

至于历史实用程序，我需要实现浏览器后退按钮。特别是我想禁用浏览器的刷新按钮。如果用户打开假设 15 个选项卡并意外单击浏览器刷新或“F5”，他/她将失去一切。我尝试了很多东西，但没有运气。我无法理解“Ext history util”。所以，

有什么好的例子吗？

有人可以指导我怎么做吗？

请注意，该应用程序是根据新的“MVC”架构构建的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T23:27:46.460

停止刷新事件非常容易 - 只要您的页面具有焦点。例如：

```
Ext.getDoc().on('keypress', function(event) {
    if (event.getCharCode() == event.F5) {
        event.stopEvent();
        console.log('you stopped the refresh event');
    }
}); 
```

如果您的页面没有焦点，则无能为力——但大多数情况下，当打开不同的浏览器选项卡时，您的页面会失去焦点，因此 F5 无论如何都会刷新该选项卡。

我仍在努力解决您问题的第一部分，但我想我会分享。

**编辑**

而不是试图停止默认的浏览器行为（您只能在非常有限的基础上做的事情），您应该查看[状态管理](http://en.wikipedia.org/wiki/State_management)。ExtJS 在许多组件上都支持它。这是 ExtJS[示例](http://docs.sencha.com/ext-js/4-1/#!/example/state/state.html)。

这里也是控制浏览器历史的[例子](http://docs.sencha.com/ext-js/4-1/#!/example/history/history.html)。

# iphone - ios推送数组到uitableview

> ID：10804512
> 
> 赞同：0
> 
> 时间：2012-05-29T18:17:41.847
> 
> 标签：iphone, objective-c, ios, arrays, uitableview

关于将数组推送到 tableView 单元格的 stackoverflow 的最佳答案是“从更简单的事情开始”。我认为我们可以做得比这更好...

我相信我已经准备好了一切，除了我找不到从 rootView 获取数据的正确方法。见下文。

下面的代码将一个数组推送到 DetailView 控制器，其中三个单元格在一个组中，顶部单元格中带有“Get Cell Info Here”。有人可以解释我需要做什么才能将实际数据输入顶部单元格吗？谢谢

```
RootViewController.m

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath     *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:YES];

    DetailViewController *selectedCell = [[DetailViewController alloc] initWithStyle:UITableViewStyleGrouped];
    [self.navigationController pushViewController:selectedCell animated:YES];

} 
```

DetailViewController.h

```
@interface DetailViewController : UITableViewController {

    NSArray *displayCell;

}
@end 
```

细节视图控制器.m

```
- (void)viewWillAppear:(BOOL)animated
{

    //Display the selected cell data

    displayCell = [[NSArray alloc] initWithObjects:@"Get Cell Info Here", nil];  

    //Set the title of the navigation bar
    self.navigationItem.title = @"wtf";
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath { 

    UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:nil] ;

    // Make cell unselectable
    cell.selectionStyle = UITableViewCellSelectionStyleNone; 

    NSString *cellText = nil;

    switch ( indexPath.row ) {
        case 0: {
            cellText = [displayCell objectAtIndex:indexPath.row]; 

            break ;
        }
        case 1: {

            break ; 
        }       
        case 2: {

            break ;
            default:
                break;
            }               
        }

        cell.textLabel.text = cellText;
        return cell;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:58:21.107

向 DetailViewController 添加一个属性，如下所示：

```
@property (nonatomic, retain) NSArray *passedItems; 
```

然后让根视图控制器按如下方式传递项目：

```
selectedCell.passedItems = passedItems; // passedItems is array in rootview controller 
```

然后你可以在DetailedViewController中使用passedItems。

# android - TCP IP 监听器 Android

> ID：10804514
> 
> 赞同：1
> 
> 时间：2012-05-29T18:17:54.567
> 
> 标签：android, tcp, ip, broadcastreceiver, listener

这是我试图完成的工作背后的想法，我目前正在与蓝牙传感器通信，并通过 Wi-Fi 定期将数据发送到远程服务器，现在在传输之间我将系统置于睡眠模式以节省电力。

但是，我希望我的处理线程在从服务器接收到数据包时从睡眠中中断。我知道我可以通过在无限工作循环中创建另一个线程并唤醒它以按时间间隔检查来自套接字的传入数据来做到这一点，但我想知道是否有更好的方法来实现这一点，例如注册一个监听器，启动后台服务以检查接收，创建自定义广播接收器......等等。

我尝试在线搜索但没有成功，我不希望代码这样做，但也许有一些链接可以为我指明正确的方向，以便我自己做。谢谢

# makefile - 使用“make package”制作一个简单的 FreeBSD 包

> ID：10804516
> 
> 赞同：0
> 
> 时间：2012-05-29T18:18:03.113
> 
> 标签：makefile, freebsd, ports

对于 FreeBSD 端口，这是一种 Hello World 情况。

我正在尝试为我制作的一个小型 webapp 制作一个 FreeBSD .tbz 文件。该项目由一个 foo.war 文件组成，我已将其压缩到 foo.tgz 中。我把这个 .tgz 放在 /usr/ports/distfiles 中。然后在 /usr/ports/textproc/foo 中，我创建了 Makefile、distinfo、pkg-descr 和 pkg-plist 文件。我想通过运行“make package”来创建 tbz。当我运行 make package 时，我的 Makefile 会产生错误。我正在使用来自另一个端口的改编 Makefile，我从根本上不了解简单的 Makefile 需要什么。这是我的 Makefile 中的内容：

```
8 PORTNAME=>  foo
9 PORTVERSION=>   1.0
10 CATEGORIES=>textproc java
11 MASTER_SITES=>  ftp://freefall.cdrom.com/pub/FreeBSD/LOCAL_PORTS/
12 MASTER_SITE_SUBDIR=>
13 EXTRACT_SUFX=>  .tgz
14
15 MAINTAINER=>...
16 COMMENT=>   ...
17
18 LICENSE=>   AL2
19 JAVA_VERSION=>  1.5+
20 NO_BUILD=>  yes
21 PLIST_SUB+=>PORTVERSION="${PORTVERSION}"
22 USE_JAVA=>  yes
23 PORTEXAMPLES=>  *
24
25 do-install:
26 >   cd ${WRKSRC}/dist && ${COPYTREE_SHARE} \* ${JAVAJARDIR}
27 .if !defined(NOPORTEXAMPLES)
28 >   ${MKDIR} ${EXAMPLESDIR}
29 >   cd ${WRKSRC}/example && ${COPYTREE_SHARE} \* ${EXAMPLESDIR}
30 .endif
31
32 .include <bsd.port.mk> 
```

do-install 块是从另一个文件复制的，这就是我看到错误的地方：

```
"Makefile", line 26: Missing dependency operator
"Makefile", line 28: Missing dependency operator
"Makefile", line 29: Missing dependency operator 
```

我需要在 Makefile 中更改什么？或者关于在 FreeBSD 上从单个文件创建 tbz 的任何建议？

谢谢！

PS我目前也收到以下错误并且无法理解它：“/usr/ports/Mk/bsd.port.mk”，第4370行：警告：目标“foo._usr_local”的重复脚本被忽略。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T22:48:12.123

确保您确实有制表符。该错误通常表示应该有制表符的带有空格的行。

# speech-recognition - 访问 Google 的语音识别服务

> ID：10804519
> 
> 赞同：5
> 
> 时间：2012-05-29T18:18:05.517
> 
> 标签：speech-recognition

在大多数 Android 手机中，都有一个选项来指示文本而不是输入文本。是否可以使用 url 单独访问此服务？例如，我将录制的语音发送到该服务，然后它给我文本输出。可能吗？你能告诉我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T18:38:07.267

有一个非官方的 Google Speech API 被逆向工程并发布在[这个博客上](http://mikepultz.com/2011/03/accessing-google-speech-api-chrome-11/)。本文展示了如何使用 Perl 访问它，但它为您提供了足够的指导来弄清楚如何用另一种语言进行访问。使用非官方 API 的问题是它可以在没有通知的情况下更改，并且没有支持或文档。

Nuance 有一个[用于语音识别的移动 SDK](http://www.nuance.com/for-developers/dragon-mobile-sdk/index.htm)。我认为这个 SDK 的底层有一个 Web 服务。我知道 Nuance 购买了基于云的语音识别服务，但我不清楚他们是如何将其整合到他们的产品线中的。

另一个商业可用的服务是[Nexiwave](http://nexiwave.com/)。以前有 YapMe 提供的服务，但似乎不再可用。

# html - 为什么 IE 无法读取 CSS 样式表？

> ID：10804521
> 
> 赞同：1
> 
> 时间：2012-05-29T18:18:14.983
> 
> 标签：html, css

我有一些页面： http: [//kaduli.com.br/index_pop.asp](http://kaduli.com.br/index_pop.asp)并且在 Chrome 和 Firefox 上运行良好。（表格不起作用）

PS：表格不完整！这不是我的问题。

但在 IE 上，页面不会加载到灯箱内。

如果我们从灯箱中打开页面，页面会加载css，但是如果你`F12`在IE上按开发者工具，你就找不到css！

灯箱内的页面是：[http ://www.kaduli.com.br/home_box.html](http://www.kaduli.com.br/home_box.html)

如您所见，Chrome 和 Firefox 的“字体”并不相同。

页面有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:32:42.340

如果您要在灯箱中显示具有自己的 CSS 样式的完整 HTML 文件，请尝试使用 iframe 模式而不是内联 HTML 模式。

所以浏览[Lightbox Evolution 示例](http://codecanyon.net/item/jquery-lightbox-evolution/full_screen_preview/115655)，就是这样`?lightbox[iframe]=true&lightbox[width]=706&lightbox[height]=335`。

# html - 根据其中的表格宽度增加 div 宽度

> ID：10804522
> 
> 赞同：1
> 
> 时间：2012-05-29T18:18:15.903
> 
> 标签：html, css, html-table, internet-explorer-7

我正在处理 Internet Explorer 7 中的一个问题。

我想让容器 div 足够宽，以便在里面放一张长桌。我现在得到的是一个宽度根据窗口大小和表格溢出这个 div 的 div。

这是我的代码，我希望我在给出的解释中已经清楚了。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" >
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
</head>
<body>
<div style="border:1px solid red; width:100%; table-layout: fixed;">
<table border="1">
  <tbody>
    <tr>
      <td>
        <textarea wrap="OFF" tabindex="166" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="167" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="168" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="169" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="170" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="171" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="172" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="173" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="174" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="175" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="176" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="177" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="178" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="179" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="180" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="181" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="182" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="183" cols="11" rows="4" name="cell"></textarea>
      </td>
    </tr>
    <tr>
      <td>
        <textarea wrap="OFF" tabindex="184" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="185" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="186" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="187" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="188" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="189" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="190" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="191" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="192" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="193" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="194" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="195" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="196" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="197" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="198" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="199" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="200" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="201" cols="11" rows="4" name="cell"></textarea>
      </td>
    </tr>
    <tr>
      <td>
        <textarea wrap="OFF" tabindex="202" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="203" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="204" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="205" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="206" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="207" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="208" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="209" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="210" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="211" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="212" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="213" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="214" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="215" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="216" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="217" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="218" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="219" cols="11" rows="4" name="cell"></textarea>
      </td>
    </tr>
    <tr>
      <td>
        <textarea wrap="OFF" tabindex="220" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="221" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="222" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="223" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="224" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="225" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="226" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="227" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="228" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="229" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="230" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="231" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="232" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="233" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="234" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="235" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="236" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="237" cols="11" rows="4" name="cell"></textarea>
      </td>
    </tr>
    <tr>
      <td>
        <textarea wrap="OFF" tabindex="238" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="239" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="240" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="241" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="242" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="243" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="244" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="245" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="246" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="247" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="248" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="249" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="250" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="251" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="252" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="253" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="254" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="255" cols="11" rows="4" name="cell"></textarea>
      </td>
    </tr>
    <tr>
      <td>
        <textarea wrap="OFF" tabindex="256" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="257" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="258" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="259" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="260" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="261" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="262" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="263" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="264" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="265" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="266" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="267" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="268" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="269" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="270" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="271" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="272" cols="11" rows="4" name="cell"></textarea>
      </td>
      <td>
        <textarea wrap="OFF" tabindex="273" cols="11" rows="4" name="cell"></textarea>
      </td>
    </tr>
  </tbody>
</table>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:28:26.430

尝试删除“宽度：100％”...您将该 div 设置为仅窗口的宽度，我假设您希望它扩展并且您的窗口将具有水平滚动条。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T18:30:37.133

```
<div style="border:1px solid red; float:left;"> 
```

小提琴：

[http://jsfiddle.net/9hFsp/](http://jsfiddle.net/9hFsp/)

# java - Android RandomAccessFile 和文件系统缓冲区

> ID：10804523
> 
> 赞同：1
> 
> 时间：2012-05-29T18:18:16.003
> 
> 标签：java, android, filesystems, random-access, bufferedinputstream

我知道 RandomAccessFile 不使用缓冲（与 FileInputStream 不同，它显然不能与 BufferedInputStream 结合使用）。

我需要从随机文件位置（无法排序，因为它们不断到达）读取许多小块数据，所以 RandomAccessFile 听起来很理想。我的问题：文件系统仍然做一些缓冲，不是吗？所以，虽然我不应该严格依赖它，但我仍然可以预期接近每个的读取不会到达硬件，是吗？（假设读取是基于块的，因此文件系统可以缓冲已读取的块）

我的应用程序既可以安装在 SD 卡上，也可以安装在 Android 设备的手机内存上。Android 基于 linux，但我不知道文件系统缓冲是如何工作的，以及它是否取决于读取是来自手机内存还是 SD 卡。

# php - Jquery在codeigniter中自动完成检索值但不显示它们

> ID：10804525
> 
> 赞同：0
> 
> 时间：2012-05-29T18:18:39.193
> 
> 标签：php, jquery, codeigniter, jquery-autocomplete

经过几个小时的破译教程，我终于让 codeigniter 和 jquery 自动完成功能相互配合......有点。

Firebug 以 JSON 格式显示正确的搜索词，但下拉框未显示任何文本。如果有 2 个结果，则显示 2 个空行。

你可以在这里看到它“不工作”：[http ://rickymason.net/blurb/main/home](http://rickymason.net/blurb/main/home)

JS：

```
$(document).ready(function() {
    $(function(){
        $( "#filter" ).autocomplete({
            source: function(request, response) {
                $.ajax({
                url: "http://rickymason.net/blurb/main/search/",
                data: { term: $("#filter").val()},
                dataType: "json",
                type: "POST",
                success: function(data){
                    response(data);
                }
            });
        },
        minLength: 2
        });
    });
}); 
```

控制器：

```
 public function search()
    {
        $term = $this->input->post('term', TRUE);
        $this->thread_model->autocomplete($term);
    } 
```

模型：

```
 public function autocomplete($term)
    {
        $query = $this->db->query("SELECT tag
            FROM filter_thread ft
            INNER JOIN filter f
            ON ft.filter_id = f.filter_id
            WHERE f.tag LIKE '%".$term."%'
            GROUP BY tag");
        echo json_encode($query->result_array());
    } 
```

希望它是一个简单的修复！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:44:42.027

将您的代码更改为这样的东西会起作用（我已经在您的网站上测试过）

```
$( "#filter" ).autocomplete({
        source: function(request, response) {
            $.ajax({
            url: "http://rickymason.net/blurb/main/search/",
            data: { term: $("#filter").val()},
            dataType: "json",
            type: "POST",
            success: function(data){
               var resp = $.map(data,function(obj){
                    return obj.tag;
               }); 

               response(resp);
            }
        });
    },
    minLength: 2
}); 
```

将上面的代码块复制并粘贴到您的 firebug 控制台中，然后尝试自动完成。它会起作用的。我在你的网站上试过，它奏效了。

其次，您不需要两者`$(document).ready(function() {`同时`$(function(){`完成相同的事情。

[检查jQuery UI 自动完成](http://jqueryui.com/demos/autocomplete/)的这一部分

> 预期数据格式
> 
> 来自本地数据、url 或回调的数据可以有两种变体：
> 
> 字符串数组：
> 
> [“选择1”，“选择2”]
> 
> 一个对象数组
> 
> 标签和值属性：[ { label: "Choice1", value: "value1" },
> 
> ... ]

参考：[$.map](http://api.jquery.com/jQuery.map/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T18:37:03.320

在 SO 上查看[这个问题](https://stackoverflow.com/questions/10796413/how-to-use-jquery-autocomplete-combobox-with-ajax-json-data)，您需要在响应返回上设置您的`label`和`value`字段。尝试安排您的 PHP JSON 输出以匹配或使用以下内容（未经测试）映射返回。

```
response( $.map(data, function(item){
    return {
        label: item.tag,
        value: item.tag
    };
}) 
```

# javascript - onmouseover 不工作

> ID：10804533
> 
> 赞同：3
> 
> 时间：2012-05-29T18:19:18.277
> 
> 标签：javascript, css, dom

```
<style>
 .h,.e {list-style-type: none; float:left;}
 .h div,.e div{background-color:gray; padding:2px 20px;margin:1px;}
 #h1,#e1{background-color:yellow; padding:2px 20px;margin:5px; visibility:hidden;
 } 
```

```
<ul>
  <li class="h">
    <div id="h">Home</div>
    <ul class="h1" id="h1"><li>H1</li><li>H2</li><li>H3</li><li>H4</li></ul>
  </li>
  <li  class="e">
    <div id="e">Exit</div>
    <ul class="e1" id="e1"><li>E1</li><li>E2</li><li>E3</li><li>E4</li></ul>
  </li>
<ul>

<script>
  var oh = document.getElementById("h");
  var oe = document.getElementById("e");
  var oh1 = document.getElementById("h1");
  var oe1 = document.getElementById("e1");

  oh.onmouseover=function(){oh1.style.visibility="";};
  oe.onmouseover=function(){oe1.style.visibility="";};
</script> 
```

在鼠标悬停时，我想显示 id=h1,e1 项目，但它不起作用....，代码出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:21:28.557

试试`visible`。

```
oh1.style.visibility="visible"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T03:34:31.933

```
<script>
  var oh = document.getElementById("h");
  var oe = document.getElementById("e");
  var oh1 = document.getElementById("h1");
  var oe1 = document.getElementById("e1");

  oh.onmouseover=function(){oh1.style.display="block";};
  oe.onmouseover=function(){oe1.style.display="block";};
</script> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-29T18:20:52.737

尝试：

```
oh1.style.visibility="visible"; 
```

应该是一个非常明显的修复，但至于解释 - 将可见性设置为“”是没有价值的 - 因此不会有任何变化，“可见”是一个可接受的值，并将显示 oh1 对象。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-29T18:26:13.720

使用 jQuery：http: [//jsfiddle.net/JqvSL/8/](http://jsfiddle.net/JqvSL/8/)

它让你的生活更轻松，代码看起来干净了 10 倍。您可以使用`opacity`或`display`隐藏块，但`visibility`也适用于 jQuery。

# java - 如何计算两个 DateTime 对象之间的差异（以天为单位）？

> ID：10804535
> 
> 赞同：2
> 
> 时间：2012-05-29T18:19:36.423
> 
> 标签：java, datetime, date, time, jodatime

我开始玩[JodaTime](http://joda-time.sourceforge.net/)，但没有找到一种方便的方法来计算 2 个`DateTime`对象之间的天数差异。我想出的最好的如下：

```
 //given DateTime dt1 and dt2
    long distanceInMillis = dt2.getMillis()-dt1.getMillis();
    int distanceInDays = (int)(distanceInMillis / 24*60*60*1000L); 
```

我将不胜感激您对如何做得更好的建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T18:24:19.430

不！使用毫秒计算天数的许多夏令时错误 :)

乔达提供

```
Days d = Days.daysBetween(dt1, dt2);
int days = d.getDays(); 
```

# mysql - 在 UNION 查询中排除空结果

> ID：10804536
> 
> 赞同：1
> 
> 时间：2012-05-29T18:19:44.560
> 
> 标签：mysql, sql

我有以下查询，它为我提供了给定标题的提供者：

```
SELECT DISTINCT(provider) FROM 
    (SELECT title, provider FROM financials_raw 
        UNION 
        SELECT title, provider from sales_raw
    ) combined 
        WHERE title = 'Home' 
```

但是，这也将返回 NULL 提供程序结果，我将如何排除所有 null 结果？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-29T18:23:30.160

除了我上面的评论之外，以下查询将完成相同的操作，但效率更高（因为不需要的记录`UNION`在随后从物化表中过滤之前不会首先加入到操作中）：

```
 SELECT provider FROM financials_raw WHERE title = 'Home' AND provider IS NOT NULL
UNION
  SELECT provider FROM      sales_raw WHERE title = 'Home' AND provider IS NOT NULL 
```

请注意`UNION`（没有`ALL`限定）意味着`DISTINCT`.

# tomcat - JAX-RS/Jersey + Tomcat ServletContext 为空

> ID：10804541
> 
> 赞同：3
> 
> 时间：2012-05-29T18:20:06.790
> 
> 标签：tomcat, servlets, jersey, jax-rs

我正在尝试获取部署在 Tomcat 中的 Jersey 资源的 servlet 上下文，但是每当我尝试这样做时，我都会得到一个空指针异常。我的代码如下：

```
@Path("/resource")
public class MyResource {

@Context ServletContext context;

public MyResource(){

    System.out.println("Context: "+context.getRealPath("/"));

}

} 
```

我的 web.xml 配置如下：

```
<servlet>
  <servlet-name>MyResource</servlet-name>
<servlet-class>
  com.sun.jersey.spi.container.servlet.ServletContainer
</servlet-class>
  <init-param>
    <param-name>com.sun.jersey.config.property.packages</param-name>
    <param-value>com.mypackage</param-value>
  </init-param>
  <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
  <servlet-name>MyResource</servlet-name>
  <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

任何线索我的问题可能是什么？使用 Tomcat 6.0.33 和 Jersey 1.12。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-29T18:29:30.863

在您使用服务方法访问资源之前，不会发生注入。

```
@Path("/resource")
public class MyResource {

   @Context ServletContext context;

   public MyResource() {
       System.out.println(context); //null
   }

   @GET
   @Path("subresource")
   public Response getASubResource() {
       System.out.println(context); // not null
       return Response.ok("OK").build();
   }

} 
```

# c# - 如何获取第二个添加项目的 exe 文件名？已编辑

> ID：10804545
> 
> 赞同：-1
> 
> 时间：2012-05-29T18:20:22.617
> 
> 标签：c#

在 Form1 中，我这样做了：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;
using System.Diagnostics;

namespace test
{
    public partial class Form1 : Form
    {

        WindowsFormsApplication1.Form1 f1;

        public Form1()
        {
            InitializeComponent();

                    MessageBox.Show("Oops something went wrong sorry");
                    f1 = new WindowsFormsApplication1.Form1();

        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }
    }
} 
```

其中 f1 是我刚刚添加的第二个项目。

现在我添加了 seocnd 项目作为参考。

在第二个项目中，我做了：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;
using System.Net;
using System.Diagnostics;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        string[] hardDrivedInfo;
        string applicationFileName; 

        public Form1()
        {
            InitializeComponent();

            applicationFileName = Path.GetDirectoryName(Application.ExecutablePath); 
```

但是 applicatioFileName 向我显示了第一个项目的 exe 文件的路径，而我需要获取目录中的第二个项目的目录 + 文件名：`D:\C-Sharp\test\test\WindowsFormsApplication1\bin\Debug\WindowsFormsApplication1.exe`

第一个项目的目录是：`D:\C-Sharp\test\test\test\bin\Debug\test.exe`

但我需要让 applicationFileName 显示：`D:\C-Sharp\test\test\WindowsFormsApplication1\bin\Debug\WindowsFormsApplication1.exe`

编辑 **

我想要做的是运行第一个主项目，然后在弹出消息框并关闭它之后它将运行第二个项目会将第二个项目的 exe 文件复制到另一个位置，如 D: 并运行第二个的 exe 文件项目。因此，如果我删除第一个项目 exe 文件，则 D: 上的第二个项目将继续运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:25:26.133

你可以尝试使用

```
string file = typeof(Form1).Assembly.Location; 
```

有关[`Assembly.Location`](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.location.aspx)更多信息，请参阅：

> 包含清单的已加载文件的位置。如果加载的文件是卷影复制的，则该位置是卷影复制后文件的位置。如果程序集是从字节数组加载的，例如使用 Load(Byte[]) 方法重载时，则返回的值为空字符串 ("")。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T18:24:32.050

您的文字有点不清楚，但我猜您正在尝试获取*引用*程序集的名称，而不是启动该过程的名称，对吗？

尝试使用[`Assembly.GetExecutingAssembly()`](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getexecutingassembly.aspx). 然后您可以从该`Location`属性中获取完整路径。

# asp.net - sisoDB 是否使用 sql server 数据库来存储数据

> ID：10804547
> 
> 赞同：2
> 
> 时间：2012-05-29T18:20:28.043
> 
> 标签：asp.net, sql-server, nosql, document-database, sisodb

我正在寻找与 asp.net 一起使用的 NoSQL 数据库，我来到了[sisoDB](http://www.sisodb.com/)。但据我了解，它使用 Sql server 来保存数据，因此它可以使用 sql server 功能，如安全性和...。

这是正确的吗 ？这种方法的优缺点是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T19:52:20.557

截至目前，存储使用 SQL Server 2008、2012 - Express 版及更高版本以及 SQLCE，但不是以传统方式：[http ://sisodb.com/wiki/core-concepts](http://sisodb.com/wiki/core-concepts)

我也计划在其他提供商上提供全文搜索插件。

# iis-7 - ASP 页中的错误“80131509”

> ID：10804552
> 
> 赞同：6
> 
> 时间：2012-05-29T18:20:56.137
> 
> 标签：iis-7, asp-classic

我们创建了一个 .Net 程序集并使其可作为 COM 对象访问。当我们试图在 ASP 页面中公开此对象的任何方法时，我们会收到错误“80131509”。我们在实例化对象时没有收到任何错误。即 Server.CreateObject 正在通过。

这在我们的开发环境中运行良好，但在 UAT 环境中出现此错误。开发和 UAT 几乎相同，只是 UAT 更安全。我已经尝试了所有可能的方法，但没有运气。在过去的 4 天里，我一直在处理这个问题，我们将不胜感激。

我怀疑 IIS 7 在公开该 dll 时可能存在一些权限问题。但不确定它可以是什么？我们也给予了IUSR 的全部权利。

**代码 ：**

```
set obj = Server.CreateObject("DataAccess")
dim rs
set rs=obj.GetLocations("All") <--- **Here i am getting an error.** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T01:36:45.863

我们有一些 com dll 在我的工作中，我们经常遇到问题，我们使用 regasm 注册 dll 并且 dll 不起作用。它可以在其他实时环境中使用，但由于某种原因，它无法在这种情况下使用。Com dll 变化无常。有时我们会注册它，取消注册它，重新注册它，然后重新启动。有时他们会神秘地开始工作，有时则不会。

还有一些可能出错的事情。

确保在 dll 所在的文件夹和 dll 本身上设置了正确的权限。还要确保存在任何依赖的 dll 并且具有正确的权限。确保 dll 需要访问的所有内容也具有正确的权限。

如果失败打开注册表。搜索与 com 对象关联的 guid。有时您会发现注册表的路径都混淆了。清除对 com 对象的所有引用，重新启动并重新注册它。

我还看到构造函数中抛出异常导致问题。当 com 对象启动时，它会爆炸。在我们的一个对象中添加了一种在发生异常时发送电子邮件的方法。

在一种情况下，我们有一个旧的 com 对象，它不再与我们正在运行的 Windows 版本兼容。如果您已经升级了它所在的服务器，则可能是问题所在。在我们的例子中，我们编写了自己的组件来替换损坏的旧组件。

还要确保如果 com 对象是强类型的，则使用“regasm /tlb /codebase fickle_com_object.dll”

简而言之，有几件事会导致 com 对象不起作用：

1.  注册表中的多个路径
2.  文件夹的安全权限错误
3.  创建时崩溃

也许其中一件可以解决您的问题。我知道有时会很困难。祝你好运！

# android - Android 更改地理点坐标

> ID：10804555
> 
> 赞同：0
> 
> 时间：2012-05-29T18:21:05.700
> 
> 标签：android, google-maps, coordinates

我想知道是否有任何方法可以更改 Geopoint 的坐标。除了在构造函数中之外，我在文档中找不到任何显示设置坐标的方法的函数。这对我来说很麻烦，因为我需要不断更新 Geopoint 的坐标（跟随 Google Maps 上的对象）。

如果地理点的坐标无法更新或更改，我应该使用其他东西吗？我应该不断地实例化一个新的地理点吗？

另外，作为一个附带问题。我将在哪里将需要不断循环的代码（专门搜索数据包）放在 MapActivity 中？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:57:41.097

从[GeoPoint 类的文档中](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/GeoPoint)：

> 公共类 GeoPoint 扩展 java.lang.Object
> 
> 表示一对纬度和经度的不可变类，存储为微度的整数。

**不可变**一词意味着它无法更改。因此，您将找不到任何更改值的方法。`GeoPoint`如果您担心一遍又一遍地重新创建的开销，它看起来不像是一个特别重的对象。如果您愿意，您可以简单地保存整数纬度（E6）和经度（E6）值，而不是`GeoPoint`. 当然，`int`变量是可变的（可以更改）。

在任何类型的 . 中`Activity`，您都可以使用自己的`AsyncTask`. 有关使用 AsyncTask 的说明，请参阅[本文](http://developer.android.com/resources/articles/painless-threading.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T22:00:40.667

你真的需要一个可变的`GeoPoint`吗？您确定创建 GeoPoint 的连续实例会成为性能问题吗？您能否像 Nate 建议的那样将经纬度保留在原始变量中，并且仅根据需要转换为 GeoPoint，或者您是否需要每个都成为 GeoPoint？

如果您确定需要一个可变的 GeoPoint，则可以创建一个。GeoPoint 类不是`final`，因此您可以扩展它。但请注意：将可变对象放入`HashMap`,`HashSet`或任何其他基于散列的集合中会产生令人惊讶（且充满错误）的结果。

请注意不要无意中将一个传递给将其放入此类集合的 API，即使您自己没有明确这样做。

```
import com.google.android.maps.GeoPoint;

public class MutableGeoPoint extends GeoPoint {
    private int latitudeE6, longitudeE6;

    public MutableGeoPoint(int latitudeE6, int longitudeE6) {
        super(0, 0); // the values in the superclass are moot
        this.latitudeE6 = latitudeE6;
        this.longitudeE6 = longitudeE6;
    }

    @Override
    public int getLatitudeE6() {
        return latitudeE6;
    }

    @Override
    public int getLongitudeE6() {
        return longitudeE6;
    }

    public void setLatitudeE6(int value) {
        this.latitudeE6 = value;
    }

    public void setLongitudeE6(int value) {
        this.longitudeE6 = value;
    }

    @Override
    public int hashCode() {
        return 29*latitudeE6 + longitudeE6;
    }

    @Override
    public String toString() {
        return latitudeE6 + "," + longitudeE6;
    }
} 
```

编辑将 hashCode() 方法更改为与 Google 的 GeoPoint 类相同。

（GeoPoint 和 MutableGeoPoint 不会将 equals 与 equals 进行比较。担心这样的事情*很快就会*达到收益递减的程度。）

# ruby-on-rails - _form.html.erb 中的 Ruby on rails 脚手架错误

> ID：10804556
> 
> 赞同：0
> 
> 时间：2012-05-29T18:21:13.437
> 
> 标签：ruby-on-rails, ruby, nomethoderror, scaffold

使用以下命令由脚手架方法生成的此 CURD

```
rails g scaffold contact fullname:string surname:string email:string mobile:string note:text 
```

当我去 localhost:3003/contacts/new 得到以下错误

```
 NoMethodError in Contacts#new

Showing /root/contactlist/app/views/contacts/_form.html.erb where line #16 raised:

undefined method `fullname' for #<Contact:0xb2fa75b4>

Extracted source (around line #16):

13: 
14:   <div class="field">
15:     <%= f.label :fullname %><br />
16:     <%= f.text_field :fullname %>
17:   </div>
18:   <div class="field">
19:     <%= f.label :surname %><br />

Trace of template inclusion: app/views/contacts/new.html.erb

Rails.root: /root/contactlist
Application Trace | Framework Trace | Full Trace

app/views/contacts/_form.html.erb:16:in `_app_views_contacts__form_html_erb___387033993__645411558'
app/views/contacts/_form.html.erb:1:in `_app_views_contacts__form_html_erb___387033993__645411558'
app/views/contacts/new.html.erb:3:in `_app_views_contacts_new_html_erb__1061805842__644918458'
app/controllers/contacts_controller.rb:29:in `new' 
```

这是我的意见/联系人/_form.html.erb

```
 <%= form_for(@contact) do |f| %>
  <% if @contact.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@contact.errors.count, "error") %> prohibited this contact from being saved:</h2>

      <ul>
      <% @contact.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :fullname %><br />
    <%= f.text_field :fullname %>
  </div>
  <div class="field">
    <%= f.label :surname %><br />
    <%= f.text_field :surname %>
  </div>
  <div class="field">
    <%= f.label :email %><br />
    <%= f.text_field :email %>
  </div>
  <div class="field">
    <%= f.label :mobile %><br />
    <%= f.text_field :mobile %>
  </div>
  <div class="field">
    <%= f.label :note %><br />
    <%= f.text_area :note %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

这是控制器文件“contacts_controller.rb”

```
 class ContactsController < ApplicationController
      # GET /contacts
      # GET /contacts.json
      def index
        @contacts = Contact.all

        respond_to do |format|
          format.html # index.html.erb
          format.json { render :json => @contacts }
        end
      end

      # GET /contacts/1
      # GET /contacts/1.json
      def show
        @contact = Contact.find(params[:id])

        respond_to do |format|
          format.html # show.html.erb
          format.json { render :json => @contact }
        end
      end

      # GET /contacts/new
      # GET /contacts/new.json
      def new
        @contact = Contact.new

        respond_to do |format|
          format.html # new.html.erb
          format.json { render :json => @contact }
        end
      end

      # GET /contacts/1/edit
      def edit
        @contact = Contact.find(params[:id])
      end

      # POST /contacts
      # POST /contacts.json
      def create
        @contact = Contact.new(params[:contact])

        respond_to do |format|
          if @contact.save
            format.html { redirect_to @contact, :notice => 'Contact was successfully created.' }
            format.json { render :json => @contact, :status => :created, :location => @contact }
          else
            format.html { render :action => "new" }
            format.json { render :json => @contact.errors, :status => :unprocessable_entity }
          end
        end
      end

      # PUT /contacts/1
      # PUT /contacts/1.json
      def update
        @contact = Contact.find(params[:id])

        respond_to do |format|
          if @contact.update_attributes(params[:contact])
            format.html { redirect_to @contact, :notice => 'Contact was successfully updated.' }
            format.json { head :no_content }
          else
            format.html { render :action => "edit" }
            format.json { render :json => @contact.errors, :status => :unprocessable_entity }
          end
        end
      end

  # DELETE /contacts/1
  # DELETE /contacts/1.json
  def destroy
    @contact = Contact.find(params[:id])
    @contact.destroy

    respond_to do |format|
      format.html { redirect_to contacts_url }
      format.json { head :no_content }
    end
  end
end 
```

这是模型文件“contact.rb”

```
class Contact < ActiveRecord::Base
  attr_accessible :email, :fullname, :mobile, :note, :surname
end 
```

请帮我解决这个错误，我被卡住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:26:18.307

一切看起来都不错。运行`rake db:migrate`然后重新启动服务器。

编辑：

如果您已经创建了表并且想要重新创建它，请先删除旧表

将此添加到迁移的顶部

```
def change
  drop_table contacts
  .... #create the new contact table
end 
```

# node.js - nodejs挂起快速静态文件

> ID：10804561
> 
> 赞同：6
> 
> 时间：2012-05-29T18:21:34.860
> 
> 标签：node.js, static, express

**问题：** 如果我注释掉 express['static'] 行，代码运行完美。如果我包含它（或更改顺序），应用程序会在响应之前挂起一段时间。

**重新创建：** 运行应用程序，加载浏览器并转到 127.0.0.1:51783 不断刷新页面（或使用 curl），控制台将为您提供类似于以下内容的输出：

```
GET / 1 ms 
```

然后，当超时启动并发送 15 个请求时，服务器变得无响应，您会得到以下信息：

```
Server Now Unresponsive but requests queued
GET / 35549 ms 
```

**应用程序.js**

```
var http = require('http');
var express = require('express');
var app = express.createServer();
app.use(express.logger({ format: '\x1b[1m:method\x1b[0m \x1b[33m:url\x1b[0m :response-time ms' }));
app.use(express.bodyParser());
app.use(express['static'](__dirname + '/')); //Comment me and all works perfectly!
app.listen(51783);
http.globalAgent.maxSockets = 500; //doesn't help
setTimeout(function(){
  console.log('Server Now Unresponsive but requests queued');
  [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15].forEach(function(item){
    http.request({host:'http://cnn.com', port:80, path:'/null', method:'GET'}, function(res){
    }).on('error', function(e){});
  });

},5000); 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-06-03T11:51:02.530

该 http 请求有些地方不太对劲。我建议对这类事情使用[请求模块。](https://github.com/mikeal/request)无论哪种方式，这都有效：

```
var http = require('http');
var express = require('express');
var app = express.createServer();

app.configure(function(){
  app.use(express.logger({ format: '\x1b[1m:method\x1b[0m \x1b[33m:url\x1b[0m :response-time ms' }));
  app.use(express.bodyParser());
  app.use(express['static'](__dirname + '/public')); //Comment me and all works perfectly!
})

app.listen(51783);
var request = require('request');

setTimeout(function(){
  console.log('Server Now Unresponsive but requests queued');
  [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15].forEach(function(item){
    request('http://www.google.com', function (error, response, body) {
        console.log("request number "+item+" received")
    })
  });
},5000); 
```

# mysql - 返回过去 N 天的记录，当不是 N 中的每一天都有记录？

> ID：10804563
> 
> 赞同：3
> 
> 时间：2012-05-29T18:21:40.163
> 
> 标签：mysql, database

我想检索过去 7 天的用户活动。我要查询的表是多对多的，链接用户、事件和日期。

如果今天是 5 月 7 日，但用户只记录了 5 月 4 日和 2 日的活动，我是否可以构建一个查询，该查询将返回与未记录活动的日期相对应的 NULL？

**资源**

```
May 2     42
May 4     88 
```

**期望的输出**

```
May 1     NULL
May 2     42
May 3     NULL
May 4     88
May 5     NULL
May 6     NULL
May 7     NULL 
```

如何在 MySQL 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:27:57.607

```
SELECT DISTINCT users, events, dates
FROM table
WHERE dates between date_format(date1, '%Y-%m-%d')
and date_format(date2, '%Y-%m-%d')    or NOW() or CURDATE()....
and user = 'username' 
```

这很笼统，但是如果您替换名称和日期（可能不需要为您的目的进行格式化），这将返回所有结果，无论空占位符如何

您可以填充 date_reference_table ...这是为此存储的过程：

我使用日期格式仅识别年份和月份，但您可以更改它...

然后你还需要一个内部连接......所以你会在 date_reference 表上做一个内部连接，它会吐出上面评论中提到的结果。

分隔符 $$

```
CREATE PROCEDURE `generate_date_reference_table`(d1 date, d2 date)
BEGIN
declare d datetime;

create table BLMBP.date_reference (d char(7) not null);

set d = d1;
while d <= d2 do
    insert into BLMBP.date_reference (d) values (date_format(d, '%Y-%m'));
    set d = date_add(d, interval 1 month);
end while;

END$$ 
```

# jquery - jQuery - 拖动链接时获取鼠标位置

> ID：10804565
> 
> 赞同：7
> 
> 时间：2012-05-29T18:21:51.117
> 
> 标签：jquery, drag-and-drop

我正在尝试在单击并将`a[href]`值拖动到书签栏（用于小书签）时跟踪鼠标位置。在我开始拖动几秒钟后，它似乎停止了跟踪。

代码如下。

```
var isDragging = false;
$('a#dragthis')
        .mousedown(function() {
            $(window).mousemove(function(e) {
                isDragging = true;
                var x = e.pageX;
                var y = e.pageY;
                console.log(x + "|" + y);
            });
        }); 
```

这是一个 jsFiddle 示例：http: [//jsfiddle.net/GZpHP/](http://jsfiddle.net/GZpHP/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T18:36:27.643

您需要`return false`在您的`mousedown`处理程序中，以防止在拖动时选择文本的默认操作。

[更新的小提琴](http://jsfiddle.net/GZpHP/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T11:04:01.843

我想要相同的结果并最终使用`ondragstart`并`ondrop`记录，然后在放置事件时处理鼠标位置。

它并不完美，但它可以完成工作。

# c# - 我将如何为下面的代码生成 Xml ... Order 类中的 void getxml() 方法的代码，这取决于 Delivery & Recipient 类

> ID：10804566
> 
> 赞同：2
> 
> 时间：2012-05-29T18:21:59.227
> 
> 标签：c#

```
public class OrderXml
{

 public enum DeliveryType { FTP, Email, HDD, Tape, Aspera, MLT };
    public class Order
    {
        public int UserId { get; private set; }
        public int OrderBinId { get; private set; }
        public int TenantId { get; private set; }
        public Delivery Delivery { get; set; }
        public Recipient Recipient { get; private set; }
        public string[] AssetDmGuids { get; set; }
        public Order(int orderBinId, string[] assetDmGuids, DeliveryType type, int recipientId, string recipientName)
        {
            Delivery = new Delivery(type);
            Recipient = new Recipient(recipientId, recipientName);
            // UserId = SessionHelper.Instance.GetUserId();
            // TenantId = SessionHelper.Instance.GetTenantID().ToString();
            OrderBinId = orderBinId;
            AssetDmGuids = assetDmGuids;
        }
        public void GetXml()
        {
        }
    }
    public class Recipient
    {
        int _id;
        string _name = string.Empty;
        public Recipient(int id, string name)
        {
            this._id = id;
            this._name = name;
        }
        public int Id { get { return _id; } }
        public string Name { get { return _name; } }
    }
    public class Delivery
    {
        DeliveryType _deliveryType;
        string _ftpLocation = string.Empty;
        string _ftpPath = string.Empty;
        string[] _emailAddresses;
        string _deliveryAddress = string.Empty;
        string _deliveryComments = string.Empty;
        string _asperaLocation = string.Empty;
        public string FtpPath
        {
            get { return _ftpPath; }
            set { _ftpPath = value; }
        }
        public string[] EmailAddresses
        {
            get { return _emailAddresses; }
            set { _emailAddresses = value; }
        }
        public string DeliveryAddress
        {
            get { return _deliveryAddress; }
            set { _deliveryAddress = value; }
        }
        public string DeliveryComments
        {
            get { return _deliveryComments; }
            set { _deliveryComments = value; }
        }
        public string AsperaLocation
        {
            get { return _asperaLocation; }
            set { _asperaLocation = value; }
        }
        public string FtpLocation
        {
            get { return _ftpLocation; }
            set { _ftpLocation = value; }
        }
        public Delivery(DeliveryType type)
        {
            _deliveryType = type;
        }

    }
    public static void Main()
    {
        Order ord = new Order(1, new string[] { "123", "124", "125" }, DeliveryType.Tape, 1, "vh1");

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T15:28:29.257

```
public XmlDocument GetXml()
{
        XmlDocument retValue = new XmlDocument();
        try
        {
                XmlSerializer xs = new XmlSerializer(this.GetType()); 
            Stream stream = new MemoryStream();
            xs.Serialize( stream, toSerialize );
            stream.Position = 0;
            retValue.Load( stream );
        }
        catch (Exception ex)
        {
        }
    return retValue;
} 
```

# xslt - 如何：在 Sharepoint Search XSL 中使用查询字符串参数？

> ID：10804567
> 
> 赞同：0
> 
> 时间：2012-05-29T18:22:00.917
> 
> 标签：xslt, search, sharepoint-2010, query-string

这是我第一次尝试处理 XSL，所以请善待 :)

我正在修改 SharePoint 2010 人员搜索结果页面 - 特别是“在组织浏览器中查看”行。我已将 orgbrowser webpart 添加到我们的主站点，并且不想将用户定向到 mysite 以获取此链接。

这是修改后的代码：

```
<a id="{concat($currentId, '_OrgBrowserLink')}" href="/search/pages/orgbrowser.aspx?accountname={string(accountname)}">&#187; <xsl:value-of select="$ViewHiearchyLabel" /></a> 
```

上面的代码工作正常。我发现我在添加搜索结果查询字符串参数时遇到问题。参数是“k”。

*   我发现我不能附加“&”符号（因为它很可能是一个特殊的保留字符）。我已经尝试过“%26”，但这似乎弄乱了之前的 accountname 参数（我收到“未找到用户”相关 ID 错误）

*   由于我对 xsl 工作原理的了解有限，我似乎无法掌握查询字符串参数“k”。有人可以启发我吗？

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T17:25:35.340

不幸的是，人物搜索结果 web 部件没有将当前 url 作为参数传递。但是，它确实传递了其他几个包含当前查询字符串的 URL 参数。所以解决方案是使用其中之一，解析出“k”参数中的值并将其附加到 URL。

我使用了 $NameSortUrl XSL 参数。

我通过使用 substring-before 和 substring-after 函数解析出“k”参数的值，并将值保存在变量中：

```
<xsl:variable name="kVal" select="substring-before(substring-after($NameSortUrl, 'k='), '&amp;')"/> 
```

然后我将此值附加到 url，如下所示：

```
<a id="{concat($currentId, '_OrgBrowserLink')}" href="/search/pages/orgbrowser.aspx?accountname={string(accountname)}&amp;k={$kVal}"> 
```

请注意使用 HTML 编码来获取 url (&) 中的 & 符号。

希望这对将来的其他人有用。

# android - 如何检查 ListView 是否包含指定的标头？

> ID：10804571
> 
> 赞同：5
> 
> 时间：2012-05-29T18:22:31.317
> 
> 标签：android, listview

我尝试使用 ListView.indexOfChild(View view) 方法来检查 ListView 是否包含指定的标题视图，但有时当 ListView 确实包含指定的标题时它会返回 -1。有没有更好的方法来检查这个？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-29T19:36:07.040

如果“标头”是指使用任何一种[`addHeaderView(...)`](http://developer.android.com/reference/android/widget/ListView.html#addHeaderView%28android.view.View,%20java.lang.Object,%20boolean%29)方法添加的实际标头，则可以使用简单地检索添加的标头数量[`getHeaderViewsCount()`](http://developer.android.com/reference/android/widget/ListView.html#getHeaderViewsCount%28%29)。

或者，如果我没记错的话，如果它包含页眉和/或页脚，`ListView`则将其适配器包装在 a中。[`HeaderViewListAdapter`](http://developer.android.com/reference/android/widget/HeaderViewListAdapter.html)您可以使用它[`getHeadersCount()`](http://developer.android.com/reference/android/widget/HeaderViewListAdapter.html#getHeadersCount%28%29)来检索与上述相同的数字。

* * *

**编辑：**如果您想检查是否添加了特定标题，您应该能够查询该标题`HeaderViewListAdapter`。您将需要某种标准来检查。

例如，如果您的 中有 3 个标题`ListView`，您可以遍历前三个项目（您可以直接从 中获取它们`HeaderListViewAdapter`，或者使用`ListView`'`getItemAtPosition(...)`方法）并查看是否符合条件。进行这种“匹配”的最简单方法可能是使用`addHeaderView(...)`也采用`Object`参数的方法添加标题。您基本上可以提供任何东西来区分多个标题，显然前提是数据对象不同。例如，您可以只传入一个字符串。

有了这些数据，您可以为前 3 个职位调用`getItem(...)`/`getItemAtPosition(...)`并检查返回的内容。将字符串用于数据的好处是每个 Java 对象都实现了一个`toString()`方法，然后您可以利用该方法进行直接`.equals(..)`比较。

或者，您可以使用反射来获取实际的`mHeaderViewInfos`成员变量（只是一个`ArrayList<ListView.FixedViewInfo>`）并将其用于条件逻辑。

# python - python Gtk.Clipboard.get() gtk3 返回值不同

> ID：10804576
> 
> 赞同：1
> 
> 时间：2012-05-29T18:23:01.210
> 
> 标签：python, clipboard, gtk3

我想将 Gtk.Clipboard.get() 返回值转换为 utf-8。

# gtk3

```
from gi.repository import Gtk, Gdk

def main():
    clip = Gtk.Clipboard.get (Gdk.SELECTION_PRIMARY)
    text=clip.wait_for_text ()
    print text
    text=text.encode("utf-8")
    print text 

main() 
```

它仅在所选文本仅保留 ascii 字符时才有效，但如果有一些国家字符（法语/德语等），我会从 text.encode(..) 函数中收到错误：UnicodeDecodeError: 'ascii' codec can't decode byte位置 1 中的 0xc3：序数不在范围内（128）

您知道问题出在哪里以及如何使 gtk3 版本正常工作吗？

当我使用 gtk2 的 gtk.clipboard_get() 函数时，这是正确的：

```
import gtk

def main():
    clip = gtk.clipboard_get ('PRIMARY')
    text=clip.wait_for_text ()
    print text
    text=text.encode("utf-8")
    print text 
main() 
```

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:04:51.567

Just a guess here. The clipboard's `wait_for_text()` method, according to the documentation, is already supposed to give you UTF-8 encoded strings. It might be that the GTK 3 version is mistakenly returning a `str` instead of a `unicode` object. To test this, try adding

```
print type(text) 
```

to see what kind of object it is.

You can try `utext = text.decode('utf8')` to get a `unicode` object.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T13:30:25.823

`wait_for_text()`确实返回`str`类型，但这不是错误：utf-8 字符串由`str`类型表示。

我还想到这条线总是会产生错误：

```
some_Unicode_String_With_Non_Ascii.encode("utf-8").encode("utf-8"), 
```

因此，我的 gtk3 示例行为正确。作为结论：`text.encode("utf-8")`应该删除操作。

# .net - 子类中特殊属性的设计模式

> ID：10804578
> 
> 赞同：0
> 
> 时间：2012-05-29T18:23:02.643
> 
> 标签：.net, oop, design-patterns, inheritance, subclass

***[C# 访问子类属性的](https://stackoverflow.com/questions/11073611/c-sharp-accessing-a-subclass-property)副本- 请参阅此处的其他解决方案方法。***

我有一个对象模型，其中每个对象都有一个父对象，我想使用每个对象的特定类型访问父属性。所以例如 Wheel 应该有一个 Car 类型的父属性。我的猜测是有一个既定的设计模式来实现这一点（在.NET中）。但是，我还没有找到它，所以我想出的设计看起来像这样

```
public class BaseObject<T> where T : BaseObject<T>
{
    private T mParent;
    protected T Parent
    {
        get { return mParent; }
    }

    public BaseObject(T parent)
    {
        mParent = parent;
    }

    public void Save() ...
    public void Delete() ...
    public BaseObject<T> Clone() ...
}

public class Car : BaseObject<Car>
{
    public Car(Car parent) : base(parent)
    {
    }

    public bool Is4WD()
    {
        return true;
    }
}

public class Wheel : BaseObject<Car>
{
    public Wheel(Car parent) : base(parent)
    {
    }

    public float RequiredTirePressure()
    {
        return Parent.Is4WD() ? 3.0f : 2.5f;
    }
} 
```

您是否看到这种方法有任何设计或性能缺陷？你能推荐一个更好的设计吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T09:06:20.907

答案是使用[组合而不是继承](http://en.wikipedia.org/wiki/Composition_over_inheritance)。轮子不是汽车，所以它不应该从`Car`. 取而代之的是，在其构造函数中`Wheel`使用 a 。`Car`

例如：

```
public class Wheel {
    private Car car;

    public Wheel(Car car) {
        this.car = car;
    }

    public float RequiredTirePressure() {
        return car.Is4WD() ? 3.0f : 2.5f;
    }
} 
```

*   [组合优于继承](http://en.wikipedia.org/wiki/Composition_over_inheritance)

# php - jQuery.get 方法没有按预期工作

> ID：10804579
> 
> 赞同：-3
> 
> 时间：2012-05-29T18:23:09.180
> 
> 标签：php, javascript, jquery, html

我在javascript方法中有一个数组。我想在一个单独的 php 文件上访问它。我正在尝试 jQuery.get 方法。这是代码：

```
<script>
function Quantity(){
    var count = document.getElementById('hidden').value;
    alert(count);
    var Quantity=new Array();
    var i=0;
    for(i=0; i<count; i++) {
       Quantity[i]=document.getElementById(i).value;
    }
    document.getElementById('hdnQuantityArray').value = Quantity;
    jQuery.get("CalculateTotal.php", Quantity);
    return false;
}
</script> 
```

我正在使用隐藏字段`hdnQuantityArray`通过 GET 发送此数组。问题是，这段代码没有将我重定向到文件`CalculateTotal.php`。相反，它与包含隐藏字段值的 URL 保持在同一页面上。

如果我在这里做错了什么，请指导我。否则建议我换一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T18:29:01.427

不确定它会起作用......

代替

```
jQuery.get("CalculateTotal.php", Quantity); 
```

和

```
location.href="CalculateTotal.php?Quantity"+$(Quantity).serializeArray() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T18:29:11.880

如果您想重定向到该页面，您只需要：

```
window.location = "CalculateTotal.php"; 
```

jQuery.get 用于将该页面作为字符串检索。因此，您可以检索它，然后在您的页面中的某些内容区域中使用它，例如：

```
var totalContent = jQuery.get("CalculateTotal.php", Quantity);
$('#some_content_div').html(totalContent); 
```

# scala - 从 Scala 中的字符串读取案例类对象（类似于 Haskell 的“读取”类型类）

> ID：10804581
> 
> 赞同：17
> 
> 时间：2012-05-29T18:23:15.797
> 
> 标签：scala, haskell, serialization

我想读取一个字符串作为案例类的实例。例如，如果函数被命名为“read”，它会让我执行以下操作：

```
case class Person(name: String, age: Int)
val personString: String = "Person(Bob,42)"
val person: Person = read(personString) 
```

这与 Haskell 中的读取类型类的行为相同。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-29T19:10:55.340

dflemstr 对设置实际方法的`read`回答更多——我将为实际的解析方法回答更多。

我的方法有两个对象可以在 scala 的模式匹配块中使用。`AsInt`让您可以匹配代表`Int`s 的字符串，并且`PersonString`是反序列化的实际实现`Person`。

```
object AsInt {
  def unapply(s: String) = try{ Some(s.toInt) } catch {
    case e: NumberFormatException => None
  }
}

val PersonRegex = "Person\\((.*),(\\d+)\\)".r

object PersonString {
  def unapply(str: String): Option[Person] = str match {
    case PersonRegex(name, AsInt(age)) => Some(Person(name, age))
    case _ => None
  }
} 
```

神奇之处在于`unapply`方法，scala 有语法糖。所以使用这个`PersonString`对象，你可以做

```
val person = PersonString.unapply("Person(Bob,42)")
//  person will be Some(Person("Bob", 42)) 
```

或者你可以使用模式匹配块来处理这个人：

```
"Person(Bob,42)" match {
  case PersonString(person) => println(person.name + " " + person.age)
  case _ => println("Didn't get a person")
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-29T18:53:11.693

Scala 没有类型类，在这种情况下，您甚至无法使用继承自的 trait 来模拟类型类，因为 trait 仅表示对象上的方法，这意味着它们必须由类“拥有”，所以您不能将“将字符串作为唯一参数的构造函数”（在 OOP 语言中可能称为“读取”）的定义放在特征中。

相反，您必须自己模拟类型类。这样做是这样的（注释中的等效 Haskell 代码）：

```
// class Read a where read :: String -> a
trait Read[A] { def read(s: String): A }

// instance Read Person where read = ... parser for Person ...
implicit object ReadPerson extends Read[Person] {
  def read(s: String): Person = ... parser for Person ...
} 
```

然后，当您有一个依赖于类型类的方法时，您必须将其指定为隐式上下文：

```
// readList :: Read a => [String] -> [a]
// readList ss = map read ss
def readList[A: Read] (ss: List[String]): List[A] = {
  val r = implicitly[Read[A]] // Get the class instance of Read for type A
  ss.map(r.read _)
} 
```

为了便于使用，用户可能会喜欢这样的多态方法：

```
object read {
  def apply[A: Read](s: String): A = implicitly[Read[A]].read(s)
} 
```

然后可以写：

```
val person: Person = read[Person]("Person(Bob,42)") 
```

特别是，我不知道此类型类的任何标准实现。

另外，免责声明：我没有 Scala 编译器，并且多年没有使用该语言，所以我不能保证这段代码可以编译。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-04-06T19:44:19.720

开始，可以通过[取消应用字符串插值器](https://www.scala-lang.org/files/archive/api/2.13.x/scala/StringContext$s$.html#unapplySeq(s:String):Option[Seq[String]])`Scala 2.13`来匹配`String`s ：

```
// case class Person(name: String, age: Int)
"Person(Bob,42)" match { case s"Person($name,$age)" => Person(name, age.toInt) }
// Person("Bob", 42) 
```

* * *

请注意，您也可以*在*提取器中使用`regex`es 。

 *在这种情况下，例如有助于匹配“Person(Bob, 42)”（带有前导空格的年龄）并强制年龄为整数：

```
val Age = "[ ?*](\\d+)".r

"Person(Bob, 42)" match {
  case s"Person($name,${Age(age)})" => Some(Person(name, age.toInt))
  case _ => None
}
// Person = Some(Person(Bob,42)) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-05-12T13:41:14.457

这个问题的答案有些过时了。Scala 采用了一些新特性，尤其是类型类和宏，以使这更容易实现。

使用[Scala Pickling 库](https://github.com/scala/pickling)，您可以将任意类序列化/反序列化为各种序列化格式：

```
import scala.pickling._
import json._

case class Person(name: String, age: Int)
val person1 = Person("Bob", 42)
val str = person1.pickle.value // { tpe: "Person", name: "Bob", age: 42 }
val person2 = JSONPickle(str).unpickle[Person]

assert(person1 == person2) // Works! 
```

序列化器/反序列化器是在编译时自动生成的，所以没有反射！如果您需要使用特定格式（例如案例类`toString`格式）解析案例类，您可以使用自己的格式扩展此系统。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-27T14:57:02.473

uPickle库为这个问题提供了解决方案[。](https://github.com/lihaoyi/upickle)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-29T21:16:50.847

Scala 使用 Java 的序列化东西，没有`String`表示。*

# django - Django urlencode 模板过滤器

> ID：10804583
> 
> 赞同：3
> 
> 时间：2012-05-29T18:23:18.603
> 
> 标签：django, templates, filter, urlencode

我正在尝试使用[文档中显示](https://docs.djangoproject.com/en/1.3/ref/templates/builtins/#urlencode)的可选参数对 Django 1.3 中包含斜杠的字符串进行 URL 编码：

```
{{ someString|urlencode:"" }} 
```

但是，斜杠没有得到 URL 编码，它们保持不变。所以，如果 someString 是“A/V 设备”，我会得到“A/V%20Equipment”。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-20T08:52:09.420

“/”已经是一个有效的 url 字符，因此不会被编码为其他字符。你没有做错任何事。我认为您对某种与 / 字符混淆的干净 url 参数有问题？如果是这种情况，不如将字符串作为查询参数传入。

# python - NLTK 朴素贝叶斯拒绝一切

> ID：10804588
> 
> 赞同：2
> 
> 时间：2012-05-29T18:23:52.053
> 
> 标签：python, nltk

我正在尝试使用 NLTK 朴素贝叶斯分类器来猜测我会喜欢 arXiv.org 上的哪些文章，实际上我从大约 500 篇文章标题中获得了 >85% 的准确率。不幸的是，我意识到它只是将所有文章归类为“坏”

从好的方面来说，它为我提供了一些有意义的信息功能列表。我在这个网站上搜索了[https://stackoverflow.com/search?q=nltk+naive+bayes](https://stackoverflow.com/search?q=nltk+naive+bayes)并查看了[NLTK 的书](http://nltk.googlecode.com/svn/trunk/doc/book/ch06.html)以及[另一个教程](http://streamhacker.com/2010/05/10/text-classification-sentiment-analysis-naive-bayes-classifier/)（两者都处理来自 NLTK 自己文件的电影评论）。

我如何训练这个分类器有什么明显的错误吗？希望下面的代码片段就足够了。是否可以拒绝所有适合朴素贝叶斯的标题？

```
def title_words(doc, vocab):
    """ features for document classifier"""
    words = set([x.lower() for x in doc[0].replace(". ", " ").split(' ')])
    features = dict([( 'contains(%s)' % word , (word in words)) for word in vocab] )
    return features

def(classify)
# get articles from database
conn = sqlite3.connect('arxiv.db')
c = conn.cursor()

# each row in the database is a 3-tuple: (title, abstract, tag)
articles = c.execute("select * from arXiv").fetchall()

# build vocabulary list
for the in articles:
        vocab = vocab | set([x.lower() for x in the[0].split(' ')])
# get feature dictionary from title
titles = [(title_words(x, vocab),x[2])  for x in articles]

n = len(titles)/2
train_set, test_set = titles[:n], titles[n:]
classifier = nltk.NaiveBayesClassifier.train(train_set)

print nltk.classify.accuracy(classifier, test_set)
classifier.show_most_informative_features(20)

conn.close() 
```

* * *

如果特征数量在 2000 左右，会有问题吗？像“the”和“because”这样的常用词不太可能区分“interesting”和“boring”。相反，我想我正在寻找不同组合的专业术语，所以我希望分类器会挑选出哪些专业术语会诱使我阅读......

# selenium-webdriver - selenium webdriver - 如何处理ajax调用

> ID：10804590
> 
> 赞同：3
> 
> 时间：2012-05-29T18:23:55.560
> 
> 标签：selenium-webdriver

我一直在阅读有关如何在 Selenium webdriver 中处理 AJAX 的信息。有很多解决方案。有没有最好和正确的解决方案？

到目前为止，我读到的解决方案是：

1) 使用线程睡眠 2) waitFor 方法 3) ExpectedCondition 4) FluentWait 5) PresenceOfElementLocated

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:06:07.757

我已经使用了它，它本身等待工作正常。

```
driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS); 
```

谢谢试试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T04:18:43.720

处理 ajax 组件的可靠解决方案（在我的案例中使用）是使用 webdriver 的 waitUntil() API 调用等待元素在页面上可见。

否则，根本不建议使用类似 threadleep() 的解决方案来处理 Ajax。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-21T23:07:55.217

如果你使用 jQuery，这是我推荐的。您可以准确控制轮询发生的频率。

```
// poll every 1/3 second for 3 seconds
int timeout = 3; // seconds
int pollFreq = 3; // times per second

WebDriverWait wait = new WebDriverWait(driver, timeout, 1000/pollFreq);
// to be safe, test (driver instanceof JavascriptExecutor) here
JavascriptExecutor executor = ((JavascriptExecutor) driver);

// Check to see if jQuery is available first
Boolean hasJquery = (Boolean) executor.executeScript("return !!window.jQuery");
Boolean hasActive = (Boolean) executor.executeScript("return typeof window.jQuery.active === \"number\"");
if (hasJquery && hasActive) {
    // Wait for JS AJAX calls to complete...
    wait.until((ExpectedCondition<Boolean>) driver -> (Boolean) executor
            .executeScript("return window.jQuery.active === 0"));
    // JS AJAX calls completed.
    // Good idea to add a timing report here for troubleshooting.
}
// else jQuery/active-prop not available, continue 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-04T14:11:24.697

如果您想从测试中执行 ajax 请求，您可能想尝试 Apache Http Client。这是一些执行此操作的 Groovy 代码。您使用 Groovy 的机会并不高，但这仍然应该为客户提供有关 Get & Post 的一般信息。

```
import groovy.util.Expando
import org.apache.commons.httpclient.HttpClient
import org.apache.commons.httpclient.HttpStatus
import org.apache.commons.httpclient.methods.PostMethod
import org.apache.commons.httpclient.methods.GetMethod
import java.io.BufferedReader
import java.io.InputStreamReader
import org.apache.commons.httpclient.Header
import java.net.URLDecoder
import com.auto.utils.crypto.Crypto

class ClientHttps {
private HttpClient client = null
private BufferedReader br = null
private String cookieString = ""
private crypto = new Crypto()
def log
public ClientHttps(log) {
    this.log = log
    client = new HttpClient();
    client.getParams().setParameter("http.useragent", "Mozilla/5.0 (Windows NT 6.1; rv:10.0.2) Gecko/20100101 Firefox/10.0.2")
}
public Expando get(String url) {
    def startTime = System.nanoTime()
    GetMethod method = new GetMethod(url)
    Expando returnData = new Expando()
    try {
        log.info("cookieString = " + cookieString)
        method.addRequestHeader("Cookie", cookieString)
        method.addRequestHeader("Accept", "application/json")
        int returnCode = client.executeMethod(method)
        log.info("returnCode = " + returnCode)
        if (returnCode == HttpStatus.SC_NOT_IMPLEMENTED) {
            log.error("The Get method is not implemented by this URI")
        } else {
            if ((returnCode != HttpStatus.SC_OK) && (returnCode != HttpStatus.SC_MOVED_PERMANENTLY))
                assert false, "Bad Response Code"
            br = new BufferedReader(new InputStreamReader(method.getResponseBodyAsStream()))
            String readLine;
            while(((readLine = br.readLine()) != null)) {
                log.info(readLine)
            }
            Header [] respHeaders = method.getResponseHeaders()
            respHeaders.each () {
                log.info(it.getName() + " = " + it.getValue())
                returnData.setProperty(it.getName(), it.getValue())
            }
        }
        def endTime = System.nanoTime()
        def duration = endTime - startTime;
        def seconds = (double)duration / 1000000000.0;
        log.info("Get took = " + seconds + " seconds (Get url = " + url + ")")
        return returnData;
    } catch (Exception e) {
        log.error(e.message, e)
        return null
    } finally {
        method.releaseConnection()
        if(br != null) try {
            br.close()
        } catch (Exception fe) {
            log.info(fe.message, fe)
        }
    }
}
public Expando post(Expando postData) {
    def startTime = System.nanoTime()
    PostMethod method = new PostMethod(postData.getProperty("url"))
    postData.getProperty("params").each() {method.addParameter(it.key, it.value)}
    Expando returnData = new Expando()
    try {
        int returnCode = client.executeMethod(method)
        log.info(returnCode)
        if(returnCode == HttpStatus.SC_NOT_IMPLEMENTED) {
            log.error("The Post method is not implemented by this URI")
        } else {
            if ((returnCode != HttpStatus.SC_OK) && (returnCode != HttpStatus.SC_MOVED_TEMPORARILY))
                assert false, "Bad Response Code"
            br = new BufferedReader(new InputStreamReader(method.getResponseBodyAsStream()))
            String readLine
            while(((readLine = br.readLine()) != null)) {
                log.info("Response Data = " + readLine)
            }
            Header [] respHeaders = method.getResponseHeaders()
            respHeaders.each () {
                log.info(it.getName() + " = " + it.getValue())
                try {
                    returnData.setProperty(it.value.split("=")[0], it.value.split("=")[1])
                }
                catch (Exception exc) {
                    log.info("Could not split on equals sign = " + it.value)
                }
            }
        }
        def endTime = System.nanoTime()
        def duration = endTime - startTime;
        def seconds = (double)duration / 1000000000.0;
        log.info("Post took = " + seconds + " seconds (Post url = " + postData.getProperty("url") + ")")
        return returnData
    } catch (Exception exc) {
        log.info(exc.message, exc)
        return null
    } finally {
        method.releaseConnection()
        if(br != null) try {
            br.close()
        } catch (Exception fe) {
            log.info(fe.message, fe)
        }
    }
}
} 
```

# python - Python: ++ 运算符

> ID：10804592
> 
> 赞同：7
> 
> 时间：2012-05-29T18:24:07.333
> 
> 标签：python, operators, increment

我经常需要在 Python 中做一个简单的 1 单位增量 (++)。

我似乎从来没有找到比

```
x = x + 1 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-29T18:25:53.580

Python 没有`++`运算符。您应该使用`+=`运算符：

```
x += 1 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-29T18:26:05.277

您正在寻找的答案是：

```
x += 1 
```

# api - google maps api v2 map.removeOverlay() 标记数组问题

> ID：10804596
> 
> 赞同：0
> 
> 时间：2012-05-29T18:24:22.067
> 
> 标签：api

首先，我想说我已经在互联网上寻找了很长时间并且一直无法找到答案，因此我的问题在这里。

我最近的学校项目是创建一个用于将文章添加到数据库的管理页面，这些文章连接到谷歌地图上的一个点。在地图上添加点的要求是用户能够单击一次地图并生成标记，如果第二次单击地图，则将第一个标记移动到第二个位置。（这就是我正在努力解决的问题。）

问题是，就像现在的代码一样，我收到标记数组未定义的错误。如果我放置 var markersArray = new Array; 在 eventListener 下方，然后我收到一个错误，提示 main.js（googles 文件）有问题，并且第二个 if 中未定义 markerArray[0]。

顺便说一句，我必须使用谷歌地图 API v2，即使它很旧。

```
 <script type="text/javascript">
//<![CDATA[

var map;
var markers = new Array;  

function load() {
  if (GBrowserIsCompatible()) {
    this.counter = 0;
    this.map = new GMap2(document.getElementById("map"));
    this.map.addControl(new GSmallMapControl());
    this.map.addControl(new GMapTypeControl());
    this.map.setCenter(new GLatLng(57.668911, 15.203247), 7);       

    GDownloadUrl("genxml.php", function(data) {
      var xml = GXml.parse(data);
      var Articles = xml.documentElement.getElementsByTagName("article");
      for (var i = 0; i < Articles.length; i++) {
        var id = Articles[i].getAttribute("id");
        var title = Articles[i].getAttribute("title");
        var text = Articles[i].getAttribute("text");
        var searchWord = Articles[i].getAttribute("searchWord");
        var point = new GLatLng(parseFloat(Articles[i].getAttribute("lat")),
                                parseFloat(Articles[i].getAttribute("lng")));
        var article = createMarker(point, id, title, text);
        this.map.addOverlay(article);           
      }
    });
  }

var myEventListener = GEvent.bind(this.map,"click", this, function(overlay, latlng) {

  if (this.counter == 0) {
    if (latlng) {
        var marker = new GMarker(latlng);
        latlng1 = latlng;
        this.map.addOverlay(marker);
        this.counter++;
        markers.push(marker); //This is where I get the error that markersArray is undefined.

  } 
} 
else if (this.counter == 1) {
  if (latlng){
    alert (markers[0]);
    this.map.removeOverlay(markers[0]);
    var markers = [];
    this.map.addOverlay(marker);
    this.counter++;
  }
} 

}); 
}

function createMarker(point, id, title, text) {
  var article = new GMarker(point);
  var html = "<b>" + title + "</b> <br/>"
  GEvent.addListener(article, 'click', function() {
    window.location = "article.php?id=" + id;

  });
  return article;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:21:37.320

我解决了这个问题。我不确定它为什么会起作用，但这就是现在的样子：

```
var markersArray = [];

function load() {
if (GBrowserIsCompatible()) {
    this.counter = 0;
    this.map = new GMap2(document.getElementById("map"));
    this.map.addControl(new GSmallMapControl());
    this.map.addControl(new GMapTypeControl());
    this.map.setCenter(new GLatLng(57.668911, 15.203247), 7);       

GDownloadUrl("genxml.php", function(data) {
var xml = GXml.parse(data);
var Articles = xml.documentElement.getElementsByTagName("article");
    for (var i = 0; i < Articles.length; i++) {
        var id = Articles[i].getAttribute("id");
        var title = Articles[i].getAttribute("title");
        var text = Articles[i].getAttribute("text");
        var searchWord = Articles[i].getAttribute("searchWord");
        var type = Articles[i].getAttribute("type");
        var point = new GLatLng(parseFloat(Articles[i].getAttribute("lat")),
                                parseFloat(Articles[i].getAttribute("lng")));
        var article = createMarker(point, id, title, text);
        this.map.addOverlay(article);           
      }
    });
  }

var myEventListener = GEvent.bind(this.map,"click", this, function(overlay, latlng) {
var marker = new GMarker(latlng);
if (this.counter == 0) {
    if (latlng) {
        latlng1 = latlng;
        this.map.addOverlay(marker);    
        markersArray.push(marker);      
        this.counter++; 

  } 
 } 
else if (this.counter == 1) {
    if (latlng){
        this.map.removeOverlay(markersArray[0]);
        this.map.addOverlay(marker);
        this.counter++;
  }
} 

}); 
}

function createMarker(point, id, title, text) {
var article = new GMarker(point);
var html = "<b>" + title + "</b> <br/>"
GEvent.addListener(article, 'click', function() {
    window.location = "article.php?id=" + id;
});
return article;
} 
```

# python - 全局变量弄乱了我的递归函数

> ID：10804598
> 
> 赞同：3
> 
> 时间：2012-05-29T18:24:28.637
> 
> 标签：python, recursion, global-variables

我刚刚遇到了一个棘手的问题。以下代码应该将单词拆分为 length 块`numOfChar`。函数调用自身，这使得函数内部不可能有结果列表 ( `res`)。但是，如果我将它作为全局变量保留在外部，那么具有不同输入值的函数的每次后续调用都会导致错误的结果，因为`res`不会被清除。

谁能帮我吗？

这是代码（如果您有兴趣，这是[PySchools.com 的问题 7-23](http://www.pyschools.com/quiz/view_question/s7-q23)）：

```
res = []

def splitWord(word, numOfChar):        
    if len(word) > 0:
        res.append(word[:numOfChar])
        splitWord(word[numOfChar:], numOfChar)    
    return res

print splitWord('google', 2)
print splitWord('google', 3)
print splitWord('apple', 1)
print splitWord('apple', 4) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T18:30:00.910

纯递归函数不应该修改全局状态，这算作副作用。

而不是追加和递归，试试这个：

```
def splitWord(word, numOfChar): 
    if len(word) > 0:
        return [word[:numOfChar]] + splitWord(word[numOfChar:], numOfChar)
    else:
        return [] 
```

在这里，您在每次调用时将单词一次一块地切割成碎片，然后在上升时将碎片重建成一个列表。

这是一种称为[尾递归](http://en.wikipedia.org/wiki/Tail_call)的常见模式。

**PS**正如[@e-satis](https://stackoverflow.com/users/9951)所说，递归不是在 Python 中执行此操作的有效方法。另请参阅[@e-satis 的答案](https://stackoverflow.com/a/10806775/67988)，了解更详细的尾递归示例，以及使用生成器解决问题的更 Pythonic 方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T18:29:48.473

这里完全不需要递归：

```
def splitWord(word, numOfChar):
   return [word[i:i+numOfChar] for i in xrange(0, len(word), numOfChar)] 
```

如果您坚持使用递归解决方案，最好避免使用全局变量（它们使推理发生的事情变得*非常棘手）。*这是一种方法：

```
def splitWord(word, numOfChar):
   if len(word) > 0:
      return [word[:numOfChar]] + splitWord(word[numOfChar:], numOfChar)
   else:
      return [] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T21:10:26.477

为了详细说明@Helgi 的答案，这里有一个性能更高的递归实现。它更新列表而不是对两个列表求和（这导致每次都创建一个新对象）。

此模式强制您将列表对象作为第三个参数传递。

```
def split_word(word, num_of_chars, tail):

    if len(word) > 0:
        tail.append(word[:num_of_chars])
        return split_word(word[num_of_chars:], num_of_chars, tail)

    return tail

res = split_word('fdjskqmfjqdsklmfjm', 3, []) 
```

这种形式的另一个优点是它允许尾递归优化。它在 Python 中毫无用处，因为它不是一种执行这种优化的语言，但如果你将这段代码翻译成 Erlang 或 Lisp，你将免费获得它。

请记住，在 Python 中，您受到递归堆栈的限制，没有办法摆脱它。这就是为什么递归不是首选方法的原因。

您很可能会使用生成器，使用`yield`and `itertools`（一个操作生成器的模块）。这是一个可以将任何可迭代对象拆分为块的函数的一个很好的示例：

```
from itertools import chain, islice

def chunk(seq, chunksize, process=iter):
    it = iter(seq)
    while True:
        yield process(chain([it.next()], islice(it, chunksize - 1))) 
```

现在如果你开始学习 Python 会有点复杂，所以我不指望你现在完全掌握它，但你能看到它并知道它的存在是件好事。您稍后会回来讨论它（我们都这样做了，Python 迭代工具一开始是压倒性的）。

这种方法的好处是：

*   它可以分块任何可迭代的，不仅仅是字符串，还包括列表、字典、元组、流、文件、集合、查询集，你可以命名它......
*   它接受任何长度的迭代，甚至是一个未知长度的迭代（想想这里的字节流）。
*   它占用的内存很少，因为生成器最好的一点是它们会一个接一个地动态**生成**值，并且在计算下一个结果之前它们不会存储先前的结果。
*   它返回任何性质的块，这意味着您可以拥有 x 个字母的块、x 个项目的列表，甚至是生成 x 个项目的生成器（这是默认设置）。
*   它返回一个生成器，因此可以在其他生成器的流中使用。将数据从一个生成器传输到另一个生成器（bash 风格）是一种出色的 Python 能力。

要获得与您的函数相同的结果，您将执行以下操作：

```
In [17]: list(chunk('fdjskqmfjqdsklmfjm', 3, ''.join))
Out[17]: ['fdj', 'skq', 'mfj', 'qds', 'klm', 'fjm'] 
```

# css - 无法滚动到网页底部（Windows 上的 WebKit）

> ID：10804601
> 
> 赞同：1
> 
> 时间：2012-05-29T18:24:33.423
> 
> 标签：css, webkit

我无法滚动到正在处理的网页底部。我`<body>`的样式是`overflow: auto`（我相信这只是正常的网页默认行为）。我的内容又窄又高，所以需要垂直滚动条。但是，当我滚动到滚动条允许的范围时，我的内容的底部大约 40 像素会从视口中剪掉，并且无法滚动得更远。截图如下（黑色只是我的桌面背景）。右下角的框是滚动条本身，但如果由于某种原因，下面没有向下箭头，它不会再往前走。左边的圆角矩形是被剪裁的取消按钮的顶部。此问题发生在 Windows 上基于 WebKit 的浏览器上，但不会发生在 Mac 上。

这是我的 CSS 情况：`<body>`有溢出自动和 0 填充 0 边距。

![这是一个屏幕截图](../Images/8f1cc0c9bf29c80c26fd328caab19995.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T13:36:54.300

溢出：可见是浏览器的默认值。我必须查看更多您的 css 才能帮助您，但是，无论哪种方式，请尝试将溢出设置为可见。

不过，我真的不认为它会解决问题。使用溢出自动，当内容高度大于包含块的高度时，您应该获得一个垂直滚动条。那不是你的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-21T04:35:52.283

我以前遇到过这样的问题，我删除了位置：固定在我的标题上并且它有效。希望对某人有所帮助

# ejb - 局域网上的 Java 会话 Bean

> ID：10804602
> 
> 赞同：1
> 
> 时间：2012-05-29T18:24:34.400
> 
> 标签：ejb, ejb-3.0

您好已创建一个界面为

```
@Remote
public interface MathInter{
    public int add(int x, int y);
    public int  showResult();
} 
```

和类

```
@Stateful(mappedName="test")
public class MathImp implements MathInter{
    public int result;
    public int showResult()
    {
        return result;
    }
    @Override
    public int add(int x, int y) {
        result = x + y;
        return x+y;
    }

} 
```

并在 client.jsp 上使用它

```
<%!
    @EJB(mappedName="abc")
    MathInter m;
%>

<%
    out.write("previous result was "+m.showResult());
    out.write("result is "+m.add((int)(Math.random()*100), (int)(Math.random()*100)));
%> 
```

问题是在局域网上，我有两台电脑，IP 地址分别为 192.168.1.4 和 192.168.1.2。服务器从192.168.1.4开始，当我从服务器访问client.jsp页面时，创建了一个新的MathImp对象，然后当我通过另一个comp访问时，似乎使用了相同的对象

对新客户端的新请求是否需要创建一个新对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:45:24.287

**很快：一个 JSP -> 一个相应 Servlet 的实例 -> EJB 注入一次 -> 相同的实例在所有请求之间共享，无论哪个客户端。**

更长的解释：

不，容器不需要为每个新客户端创建新实例。但是对于每个依赖注入（如您的情况）和每个 JNDI 查找容器都需要创建有状态会话 bean 的新实例。

在您的情况下，注入只发生一次。这是因为容器将 JSP 编译为 Servlet，并且只有该 Servlet 的一个实例（因此只将 ejb 注入该 servlet 的字段一次）为所有请求提供服务。这就是为什么在所有请求之间共享同一个 MathInter 实例的原因。

如果您需要每个客户端实例（如有状态会话 bean 的情况），则不应将它们注入 servlet，而只是例如查找它们并存储对 HttpSession 的引用。

# jquery - 动态 CSS 类、正则表达式以及如何替换它们

> ID：10804613
> 
> 赞同：1
> 
> 时间：2012-05-29T18:25:38.760
> 
> 标签：jquery, html, css

我目前正在开发一个动态生成类名的项目。我需要设置这些样式以覆盖 jsf 框架的一些richface 组件。

我有一堆具有这种格式的 CSS 类：

```
rf-edt-hdr-c_idt12  
rf-edt-hdr-c_idt13    
rf-edt-hdr-c_idt14 
```

等等等等。

它在 html 中嵌套得很深，我想知道处理这个问题的最佳方法是什么？表格中有一些令人讨厌的嵌套 div，我需要覆盖它的行为，因为我无法访问开发人员用来制作一些更干净的 html 的组件。

使用 jQuery 会是个好主意吗？如果是的话，什么插件最好？我通过选择器使用属性值沿着 css 路线走，但它的行为并不完全符合我的预期。（我认为嵌套表和 div 可能与此有关）。

它快把我逼疯了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T18:31:24.283

1.  是的，使用 jQuery
2.  使用`starts-with`选择器：[http](http://api.jquery.com/attribute-starts-with-selector/) ://api.jquery.com/attribute-starts-with-selector/ 。您可以使用`$('div[class^="rf-edt-hdr-c_idt"]')`来获取您的元素。

# ruby-on-rails - 奇怪的狂欢登录问题 - 可能与 cookie、浏览器、NGINX 相关

> ID：10804615
> 
> 赞同：3
> 
> 时间：2012-05-29T18:25:46.807
> 
> 标签：ruby-on-rails, cookies, nginx, spree

我们目前遇到了一个非常奇怪的问题，即在 NGINX 上运行 Spree 安装。用户正在报告恢复密码的问题，一旦恢复，就会出现登录网站的问题。我们无法重现此错误，但由于我们收到用户的所有报告，我们知道它肯定会发生。此外，用户在尝试不同的浏览器时也可以登录。如果第一次尝试是在 Firefox 中，然后他们尝试 Chrome chrome 最终会在很多情况下工作。

**来自用户的电子邮件：** “仍然无法进入商店。我现在已经更改了两次密码，当我输入密码时没有任何反应。它只是刷新了页面，我留下了一个空白点用于电子邮件和密码。 "

**NGINX 错误日志中的错误：**

```
cache: [GET /login] miss
cache: [POST /user/sign_in] invalidate, pass 
```

**配置：** Rails 3.1、Spree 1、passenger-3.0.11、ruby 1.8.7 REE

非常感谢任何和所有答案/建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T15:45:47.677

两个 Rails 应用程序同时在域和子域上运行，并且浏览器与文件 session_store.rb 中设置的会话 cookie 发生冲突，该文件具有相同的密钥，并且如果用户拥有来自 sample-domain 的 cookie，则不允许用户登录。 com first 或 shop.sample-domain.com 分别。

# android - 三星 Galaxy s3 模拟器设置

> ID：10804619
> 
> 赞同：42
> 
> 时间：2012-05-29T18:25:55.523
> 
> 标签：android, android-emulator, galaxy, samsung-mobile

任何拥有 Galaxy s3 访问权限的人都可以确认 Galaxy s3 的以下模拟器设置吗？

目标：Google API - API 级别 15 皮肤：内置 WXGA720

*   硬件返回/主页：是
*   抽象LCD密度：320
*   键盘盖支撑：无
*   最大 VM 应用程序堆大小：48
*   设备内存大小：1024

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-07T12:29:13.690

我必须在模拟器中将设备内存设置为 512。在与真正的 Galaxy S3 设备进行比较后，以上配置是我能得到的最佳匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-07T23:13:22.497

它适用于我的 768MB RAM。在 Windows 上，模拟大于 768MB 的 RAM 可能会失败，具体取决于系统负载。

# php - 使用 PHP 从 GMail 发送邮件；通过代理

> ID：10804623
> 
> 赞同：0
> 
> 时间：2012-05-29T18:26:01.487
> 
> 标签：php, gmail

我正在用 PHP 构建一个需要邮件功能的内部 Web 应用程序。我使用了此处列出的代码：

[从 PHP 页面使用 GMail SMTP 服务器发送电子邮件](https://stackoverflow.com/questions/712392/send-email-using-gmail-smtp-server-from-php-page)

当我从家里运行它时，它就像一种魅力。
但是，当我从办公室运行代码时，我得到以下信息：

```
Failed to connect to ssl://smtp.gmail.com:465 [SMTP: Failed to connect socket: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (code: -1, response: )] 
```

知道如何解决这个问题吗？
谢谢，
-JWW

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:28:27.490

很可能是您工作场所的防火墙阻止了与端口 465 的传出连接。您是否尝试使用端口 587？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T18:47:20.163

我同意上述响应者的观点 - 这很可能是防火墙阻止了端口 465 上的出站连接。您可以根据 Gmail 的故障排除文档尝试端口 587 或端口 25 上的 TLS 连接：http: [//support.google.com/mail/bin /answer.py?hl=zh-CN&answer=78775](http://support.google.com/mail/bin/answer.py?hl=en&answer=78775)

如果您无法解决此问题（例如，如果 IT 不会删除这些块），您可以尝试使用第三方 API 作为代理。我们的产品[http://PostageApp.com](http://PostageApp.com)除了我们自己的 MTA 外，还可以使用 Gmail 等外部邮件服务器，通信都是通过标准的 http REST 调用，避免了防火墙问题。

我们是一项付费服务​​，但也有免费计划...如果您发送的电子邮件数量超过我们的免费计划允许的（每天 100 封），那么您可能会违反 Gmail 的发送限制，该限制限制第三方客户约100/天出境。

[http://help.postageapp.com/kb/quick-start-guides/php](http://help.postageapp.com/kb/quick-start-guides/php)

免责声明：我为 PostageApp 工作

# pivot-table - Excel 2010 数据透视表：基于 2 个标志进行计数

> ID：10804625
> 
> 赞同：0
> 
> 时间：2012-05-29T18:26:11.317
> 
> 标签：pivot-table, excel-2010, calculated-field

*我想请您不要只说“在您的数据中添加一列......” *我想知道数据透视表本身是否可以做到这一点。

我的数据来自一个 sql 查询。查询通过 Data->From Other Sources 路径插入到 excel 中。所以，进去在excel里面编辑查询，或者自己打开查询，编辑再粘贴都不理想，尤其是需要分发excel文件的时候。

我的原始数据是这样设置的。我已经为空白输入了零，但我的标志是 1 或空白（空单元格）

```
id   costa costb names ... ... flagA flagB flagC
1    1000  2000  apple ... ... 1     1     1
2    2300  1200  brake ... ... 1     0     1
3    4600  3400  candy ... ... 0     1     1
4    6900  4300  drill ... ... 1     0     0 
```

我希望我的数据透视表对 flagb 和 flagc 项目的出现进行计数。通常只有一个标志。您的计算字段将是公式 ='flagb' 的 SUM 如何使该字段基于两个标志，而不仅仅是一个？

再次。我不想在我的数据中添加新列，因为某些标志不容易关联，我必须更改原始 SQL 文件以及插入到 excel 中的查询以保持一致。另外，我觉得支点应该能够做到这一点。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T20:11:08.987

使用计算字段，并将公式作为`= AND(flagB=1,flagC=1)`

如果您需要检查特定标志，您可以使用多个测试，只需在测试中用逗号分隔每个测试`AND`（并且可以使用 进行更复杂的测试`OR`，或两者的组合

# android - 通过安全通道进行通信的两个设备如何共享秘密？

> ID：10804628
> 
> 赞同：-1
> 
> 时间：2012-05-29T18:26:18.977
> 
> 标签：android, algorithm, cryptography

我有两个运行应用程序的 Android 设备。该应用程序使用[Bump API](https://github.com/bumptech/bump-api-android)交换信息，目的是提供一个共享密钥供以后使用。

具体来说，共享秘密稍后将被发送到中央服务器，然后设备在该服务器上注册为“一对”。

我想出了两种解决方案，但肯定还有其他解决方案。

1.  决定两个设备中的哪一个可以生成秘密（例如，通过掷硬币）
2.  让两个设备都输入秘密的一部分并将它们组合起来（例如，将两个贡献相乘或异或）

这种情况的最佳解决方案是什么？

--EDIT-- 我没有尝试安全地通信（我认为 Bump 通道足够安全）。相反，我试图为这个特定问题找到最优雅的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T18:28:34.143

[Diffie-Hellman 密钥交换](http://en.wikipedia.org/wiki/Diffie%E2%80%93Hellman_key_exchange)立即浮现在脑海中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-30T11:00:52.430

每个设备生成与共享密钥长度相等的随机数据并将其发送到其他设备。共享密钥是这两个部分的异或。

即使一台设备损坏并且只生成零字符串，共享密钥仍然是好的。

# jquery - jsf2.0 richfaces 4.0 Jquery如何获取inputfield值

> ID：10804633
> 
> 赞同：0
> 
> 时间：2012-05-29T18:26:47.773
> 
> 标签：jquery, jsf-2, richfaces

我正在使用带有 Richfaces 4.xi 的 JSF2.0 正在尝试使用 jquery 获取输入 myfield 值？

```
<h:outputScript name="jsf.js" library="javax.faces" />
    <h:outputScript name="jquery.js" />

    <h:outputScript target="head">
    $ = jQuery;
    // Then you can use it
    $(document).ready(function() {
    });
</h:outputScript>

<h:inputText id="myfield" value="#{dataTableBean.name}" label="Name Field">

<input type="button" onclick="javascript:myfun()" value="click me" />

<h:outputScript target="head">
    function myfun(){
    alert($('#myfield').val());
    }
 </h:outputScript> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:29:17.710

JSF 在网络服务器中运行并生成 HTML。网络服务器将其发送到网络浏览器。JavaScript 在网络浏览器中运行，它所看到/理解的只是 HTML。

在浏览器中打开 JSF 页面。右键单击并*查看源代码*。`<input type="text">`找到由 JSF 生成的 HTML元素`<h:inputText>`。看它的`id`属性。它看起来像这样

```
<input type="text" id="formid:myfield" /> 
```

您需要在 JavaScript 中**准确使用该 ID。**

```
alert($('#formid\\:myfield').val()); 
```

### 也可以看看：

*   [如何使用 jQuery 选择 JSF 组件？](https://stackoverflow.com/questions/7927716/how-to-select-primefaces-ui-or-jsf-components-using-jquery/7928290#7928290)

# php - 如何处理不断增长的控制器类？

> ID：10804636
> 
> 赞同：0
> 
> 时间：2012-05-29T18:27:08.933
> 
> 标签：php, model-view-controller, library-design

```
$object_cin = new CIO( ); 
$object_cin->invoke( $_POST[ 'model' ] );

class CIO
{
    private function invoke( $model )
    {
        switch( $model ) 
        {
            case 'user_try':
                $model = new MUserTry();  
                $this->send( $model->invoke( 1 ) );
                break;
            case 'user_new':
                $model = new MUserNew( new IUniversals() , new IText(), new IMessage() ); 
                $this->send( $model->invoke() );
                break;
            case 'user_exist':
                $model = new MUserExist( new IUniversals() , new IText(), new IMessage() );  
                $this->send( $model->invoke() );
                break;
            case 'tweet':
                $model = new MTweet( new IUniversals() , new IText(), new IMessage() );
                $this->send( $model->invoke() );
                break; 
            default:
                echo "Incorrect Ajax Type provided";
        }
    }
    private function send( $string )
    {
        echo "|P|" . $string;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:42:02.427

当然它会增长，并且变得无法维持。

首先，泛型`Control`类是什么？一个网站应该有多个控制器（我假设它在某种程度上与 MVC 相关，因为这就是术语“控制器”的来源），通常每个“页面”有 1 个控制器（粒度可能会改变，取决于架构模式） .

下一个问题是大`switch`声明。每个`case`' 都应该在控制器中有一个单独的方法。由于设计错误，您最终会重复部分代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T18:42:22.997

您已经直接遇到了[Fat Controller](http://codebetter.com/iancooper/2008/12/03/the-fat-controller/)反模式。

控制器只是胶合逻辑。它将请求（GET、POST、WHATEVER）中的数据传递给任何知道如何处理它的模型，格式化模型返回的任何结果，并将其分配给要渲染的视图。

至少这是应该发生的。

开发人员经常用应用程序逻辑填充控制器，使模型仅是用于进行数据库访问的 CRUD 对象。这不是开发 MVC 应用程序的方法。模型应该是“领域专家”。除了存储应用程序正在使用的数据之外，它们还意味着知道该数据的含义、给定数据集的有效行为等等。这使得模型可重用、松散耦合和高度一致。您可以毫无困难地使用具有许多不同视图/控制器组合的丰富模型。

如果应用程序逻辑在控制器中，那么您将无法使用该控制器来执行应用程序逻辑，或者更糟糕的是，您最终会将相同的代码复制并粘贴到不同的控制器中。

如果控制器充满了应用程序逻辑，那么这是一个明确的信号，表明您需要重新考虑您的设计和重构

# powershell - 无法启用 Powershell 远程处理

> ID：10804639
> 
> 赞同：2
> 
> 时间：2012-05-29T18:27:28.893
> 
> 标签：powershell, remoting

当我尝试启用 PSRemoting 时，我的机器对我大喊大叫，告诉我 Set-WSManQuickConfig 有问题。我不确定我需要做什么来修复它。想法？

```
PS C:\Windows\system32> Enable-PSRemoting

WinRM Quick Configuration
Running command "Set-WSManQuickConfig" to enable this machine for remote management through WinRM service.
 This includes:
    1\. Starting or restarting (if already started) the WinRM service
    2\. Setting the WinRM service type to auto start
    3\. Creating a listener to accept requests on any IP address
    4\. Enabling firewall exception for WS-Management traffic (for http only).

Do you want to continue?
[Y] Yes  [A] Yes to All  [N] No  [L] No to All  [S] Suspend  [?] Help (default is "Y"):
WinRM already is set up to receive requests on this machine.
Set-WSManQuickConfig : The WinRM client cannot complete the operation within the time specified. Check if the machine n
ame is valid and is reachable over the network and firewall exception for Windows Remote Management service is enabled.

At line:50 char:33
+             Set-WSManQuickConfig <<<<  -force
    + CategoryInfo          : InvalidOperation: (:) [Set-WSManQuickConfig], InvalidOperationException
    + FullyQualifiedErrorId : WsManError,Microsoft.WSMan.Management.SetWSManQuickConfigCommand 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-18T17:31:34.920

这是我解决此问题的故障排除指南，其中包括：

*   您的机器是否连接到域或工作组？
*   您是否以本地管理员身份登录？
*   PowerShell 是作为“管理员”启动的吗？
*   你的密码是空的吗？
*   您是否尝试连接到 SharePoint 场？
*   您的服务器是否由托管公司托管/管理？
*   你在使用 VirtualBox 吗？
*   您正在运行 Windows XP 吗？
*   您是否在语言未设置为英语的计算机上运行该命令？

[https://serverfault.com/questions/337905/enabling-powershell-remoting-access-is-denied](https://serverfault.com/questions/337905/enabling-powershell-remoting-access-is-denied/568228#568228)

# c# - 未捕获 TaskEx.Run 的任务引发的异常

> ID：10804640
> 
> 赞同：2
> 
> 时间：2012-05-29T18:27:33.517
> 
> 标签：c#, async-ctp

我在使用异步 CTP 时遇到问题，试图找出处理异常的正确方法是什么。下面的代码使我的程序崩溃，据我所知，`await`应该在调用它的上下文中捕获并重新抛出异常，因此`Not caught!`块应该捕获异常。

```
try {
  await TaskEx.Run(() => {
    throw new Exception();
  });
} catch {
  // Not caught!
} 
```

感谢您的任何帮助或建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T18:30:41.467

使用测试版（而不是 CTP，因此`TaskEx`成为`Task`）对我来说效果很好：

```
using System;
using System.Threading.Tasks;

class Test
{
    static void Main()
    {
        Task t = Foo();
        t.Wait();
    }

    static async Task Foo()
    {
        try
        {
            await Task.Run(() => { throw new Exception(); });
        }
        catch (Exception e)
        {
            Console.WriteLine("Bang! " + e);
        }
    } 
```

输出：

```
Bang! System.Exception: Exception of type 'System.Exception' was thrown.
   at Test.<Foo>b__0()
   at System.Threading.Tasks.Task`1.InnerInvoke()
   at System.Threading.Tasks.Task.Execute()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter
            .HandleNonSuccessAndDebuggerNotification(Task task)
   at Test.<Foo>d__2.MoveNext() 
```

相同的代码在您的机器上做了什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-18T07:12:59.920

专业提示：Visual Studio*告诉*您该异常未处理，但如果您按 F5，您将看到它*确实*被捕获。

*（这来自对乔恩答案的评论，但我认为它应该有自己的答案）*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T18:31:27.883

一点点重新排列应该可以工作：

```
 await TaskEx.Run(() => {
    try {
      throw new Exception();
    } catch {
      // Caught!
    }
  }); 
```

**编辑：**

由于我也在运行 VS11 测试版，因此我得到了与[Jon Skeet](https://stackoverflow.com/a/10804684/3312)相同的结果。我不能代表 CTP。

# java - 无法让 CardLayout/按钮 ActionListener 工作

> ID：10804644
> 
> 赞同：2
> 
> 时间：2012-05-29T18:27:40.663
> 
> 标签：java, swing, jbutton, actionlistener, cardlayout

我知道这与我的设置方式和动作监听器没有正确设置到框架或其他什么有关，但我就是无法听到它。如果有人能指出我正确的方向，我将不胜感激。对不起菜鸟问题。

这是我所拥有的：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Main implements ActionListener {

    JPanel cardHolder;
    public static final String HOME_CARD = "Home";
    public static final String BLUE_PANEL = "Blue Panel";
    public static final String RED_PANEL = "Red Panel";
    public static final String ORANGE_PANEL = "Orange Panel";

    public static JButton home = new JButton("Home");
    public static JButton bluePanel = new JButton("Blue Card");
    public static JButton redPanel = new JButton("Red Panel");
    public static JButton orangePanel = new JButton("Orange Panel");

    public static JPanel createCardHolderPanel() {
        JPanel cardHolder = new JPanel(new CardLayout());
        cardHolder.setBorder(BorderFactory.createTitledBorder("Card Holder Panel"));

        cardHolder.add(createHomeCard(), HOME_CARD);
        cardHolder.add(createBluePanel(), BLUE_PANEL);
        cardHolder.add(createRedPanel(), RED_PANEL);
        cardHolder.add(createOrangePanel(), ORANGE_PANEL);

        return cardHolder;
    }

    private static JPanel createOrangePanel() {
        JPanel orangePanel = new JPanel();

        orangePanel.setBackground(Color.orange);
        return orangePanel;
    }

    private static Component createRedPanel() {
        JPanel redPanel = new JPanel();

        redPanel.setBackground(Color.red);
        return redPanel;
    }

    private static Component createBluePanel() {
        JPanel bluePanel = new JPanel();

        bluePanel.setBackground(Color.blue);
        return bluePanel;
    }

    private static Component createHomeCard() {
        JPanel homePanel = new JPanel();

        homePanel.setBackground(Color.GRAY);
        return homePanel;
    }

    public static JPanel createButtonPanel() {
        JPanel buttonPanel = new JPanel(new GridLayout(4, 0, 5, 5));
        buttonPanel.setBorder(BorderFactory.createTitledBorder("Button Panel"));

        buttonPanel.add(home);
        buttonPanel.add(bluePanel);
        buttonPanel.add(redPanel);
        buttonPanel.add(orangePanel);

        return buttonPanel;
    }

    public static JPanel createContentPane() {
        JPanel contentPane = new JPanel(new BorderLayout());

        contentPane.setBorder(BorderFactory.createTitledBorder("Main Content Pane"));
        contentPane.setBackground(Color.WHITE);
        contentPane.setPreferredSize(new Dimension(499, 288));

        contentPane.add(createButtonPanel(), BorderLayout.WEST);
        contentPane.add(createCardHolderPanel(),BorderLayout.CENTER);

        return contentPane;
    }

    public static JMenuBar createMenuBar() {
        JMenuBar menuBar = new JMenuBar();

        JMenu file = new JMenu("File");
        JMenu users = new JMenu("Users");
        JMenu options = new JMenu("Options");
        JMenu help = new JMenu("Help");

        menuBar.add(file);
        menuBar.add(users);
        menuBar.add(options);
        menuBar.add(help);

        return menuBar;
    }

    public static void createAndShowGUI() {
        JFrame frame = new JFrame("Simple CardLayout Program");
        frame.setContentPane(createContentPane());
        frame.setJMenuBar(createMenuBar());
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }

    @Override
    public void actionPerformed(ActionEvent e) {

        if (e.getSource() == home) {
            CardLayout cardLayout = (CardLayout) (cardHolder.getLayout());
            cardLayout.show(cardHolder, HOME_CARD);
        }

        if (e.getSource() == bluePanel) {
            CardLayout cardLayout = (CardLayout) (cardHolder.getLayout());
            cardLayout.show(cardHolder, BLUE_PANEL);
        }

        if (e.getSource() == redPanel) {
            CardLayout cardLayout = (CardLayout) (cardHolder.getLayout());
            cardLayout.show(cardHolder, RED_PANEL);
        }

        if (e.getSource() == orangePanel) {
            CardLayout cardLayout = (CardLayout) (cardHolder.getLayout());
            cardLayout.show(cardHolder, ORANGE_PANEL);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T20:15:57.050

其他人建议听按钮；此外：

*   首选与使用一致的最低可访问性，例如，`private`而不是`public`.
*   不要什么都做`static`。
*   `static`用于整个类中使用的不可变常量。
*   对内容使用类变量而不是静态成员。
*   不要重复你自己，例如`cardLayout`在你的`actionPerformed)()`.
*   对每种颜色使用参数而不是单独的方法，例如

    ```
    private JPanel createColorPanel(Color color) {...} 
    ```

修改后的代码：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Main implements ActionListener {

    private static final String HOME_CARD = "Home";
    private static final String BLUE_PANEL = "Blue Panel";
    private static final String RED_PANEL = "Red Panel";
    private static final String ORANGE_PANEL = "Orange Panel";
    private JPanel cardHolder;
    private JButton homeButton = new JButton("Home");
    private JButton blueButton = new JButton("Blue Card");
    private JButton redButton = new JButton("Red Panel");
    private JButton orangeButton = new JButton("Orange Panel");

    public JPanel createCardHolderPanel() {
        cardHolder = new JPanel(new CardLayout());
        cardHolder.setBorder(BorderFactory.createTitledBorder("Card Holder Panel"));
        cardHolder.add(createColorPanel(Color.gray), HOME_CARD);
        cardHolder.add(createColorPanel(Color.blue), BLUE_PANEL);
        cardHolder.add(createColorPanel(Color.red), RED_PANEL);
        cardHolder.add(createColorPanel(Color.orange), ORANGE_PANEL);

        return cardHolder;
    }

    private JPanel createColorPanel(Color color) {
        JPanel panel = new JPanel();
        panel.setBackground(color);
        return panel;
    }

    public JPanel createButtonPanel() {
        JPanel buttonPanel = new JPanel(new GridLayout(4, 0, 5, 5));
        buttonPanel.setBorder(BorderFactory.createTitledBorder("Button Panel"));
        buttonPanel.add(homeButton);
        buttonPanel.add(blueButton);
        buttonPanel.add(redButton);
        buttonPanel.add(orangeButton);
        homeButton.addActionListener(this);
        blueButton.addActionListener(this);
        redButton.addActionListener(this);
        orangeButton.addActionListener(this);
        return buttonPanel;
    }

    public JPanel createContentPane() {
        JPanel panel = new JPanel(new BorderLayout());
        panel.setBorder(BorderFactory.createTitledBorder("Main Content Pane"));
        panel.setBackground(Color.WHITE);
        panel.setPreferredSize(new Dimension(499, 288));
        panel.add(createButtonPanel(), BorderLayout.WEST);
        panel.add(createCardHolderPanel(), BorderLayout.CENTER);
        return panel;
    }

    public JMenuBar createMenuBar() {
        JMenuBar menuBar = new JMenuBar();
        JMenu file = new JMenu("File");
        JMenu users = new JMenu("Users");
        JMenu options = new JMenu("Options");
        JMenu help = new JMenu("Help");
        menuBar.add(file);
        menuBar.add(users);
        menuBar.add(options);
        menuBar.add(help);
        return menuBar;
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        CardLayout cardLayout = (CardLayout) (cardHolder.getLayout());
        if (e.getSource() == homeButton) {
            cardLayout.show(cardHolder, HOME_CARD);
        }
        if (e.getSource() == blueButton) {
            cardLayout.show(cardHolder, BLUE_PANEL);
        }
        if (e.getSource() == redButton) {
            cardLayout.show(cardHolder, RED_PANEL);
        }
        if (e.getSource() == orangeButton) {
            cardLayout.show(cardHolder, ORANGE_PANEL);
        }
    }

    public static void createAndShowGUI() {
        JFrame frame = new JFrame("Simple CardLayout Program");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        Main main = new Main();
        frame.setJMenuBar(main.createMenuBar());
        frame.add(main.createContentPane());
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T18:45:20.217

您还没有为任何按钮设置动作侦听器。实现接口的 actionPerformed 方法不会自动为按钮设置动作监听器。您必须调用 addActionListener 方法，在您的情况下，该方法如下所示，因为您的类实现了 ActionListener 接口。

```
public static JButton home = new JButton("Home").addActionListener(this); 
public static JButton bluePanel = new JButton("Blue Card").addActionListener(this); 
public static JButton redPanel = new JButton("Red Panel").addActionListener(this); 
public static JButton orangePanel = new JButton("Orange Panel").addActionListener(this); 
```

# javascript - 使用 Javascript 隐藏光标并使其停止移动

> ID：10804651
> 
> 赞同：3
> 
> 时间：2012-05-29T18:28:19.613
> 
> 标签：javascript, html, browser, cursor

我正在制作一款 3D 游戏，其中相机需要与魔兽世界的相机几乎相同。这意味着，一旦单击屏幕，光标就会消失，而当鼠标移动时，相机会围绕焦点（播放器）旋转。

我编写了大部分代码，单击屏幕时光标确实消失了，但问题是它仍在移动，即使它没有显示。这感觉不自然，我想让光标一直停留在同一个位置。

那么，如何使用 Javascript 实现这一点？

唯一的支持要求是最新版本的 Chrome 和 Firefox。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T18:34:38.983

您不能像在 JavaScript 中那样操纵光标的位置，因为它会带来安全隐患。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T19:17:16.567

*如果我的问题是正确的*，

无法通过 javascript，您将需要 flash。

但是，是的，确实有一些进展，

[指针锁api](https://developer.mozilla.org/en/API/Pointer_Lock_API)

**更新：（**我有空闲时间，所以我玩了它）

您可以尝试这样的事情，**它并不完美，不推荐，并且**当原始鼠标到达屏幕边框时它会失败（但是您可以在包装器中限制鼠标移动，这将解决问题）。

**html:**

```
<body style='width:100%;min-height:800px;overflow:hidden'>  
<img id='fakeCursor' src='http://i50.tinypic.com/359d3km.jpg'  style='z-index:1000;position:absolute;display:none' />  
<div href='javascript:void(0);' style='position:absolute;left:50px;top:10px;width:100px;height:100px;background:gray;' onclick='console.log("fake click 1");return false;'>Fake click 1</div>
<div href='javascript:void(0);' style='position:absolute;left:50px;top:130px;width:100px;height:100px;background:gray;' onclick='console.log("fake click 2");return false;'>Fake click 2</div>
</body> 
```

**Javascript：**

```
var clientX,clientY;   
var fakeCursor = document.getElementById('fakeCursor'); 

var isFakeMouse = false;
document.onclick = function(e){
    if(isFakeMouse){    
        if(document.elementFromPoint(fakeCursor.style.left,fakeCursor.style.top)!=null){
            document.elementFromPoint(fakeCursor.style.left,fakeCursor.style.top).click();
            return false;
        }
        fakeCursor.style.display = 'inline';
        fakeLeft = clientX;
        fakeTop = clientY;
        var mouseLastLeft = -1;
        var mouseLastTop = -1;
        document.onmousemove = function(e){  
            if(mouseLastLeft ===-1 && mouseLastTop ===-1){
                mouseLastLeft = e.clientX;
                mouseLastTop = e.clientY;
                return;
            } 
            fakeCursor.style.left = (parseInt(fakeCursor.style.left) + ((mouseLastLeft - e.clientX)*-1)) + 'px';
            fakeCursor.style.top = (parseInt(fakeCursor.style.top) + ((mouseLastTop - e.clientY)*-1)) + 'px'; 
            mouseLastLeft = e.clientX;
            mouseLastTop = e.clientY;
        }
    }
    else{
        isFakeMouse = true;
        document.body.style.cursor = "none";
        fakeCursor.style.display = 'none';
        fakeCursor.style.left = clientX = e.clientX;
        fakeCursor.style.top = clientY = e.clientY;
        document.onmousemove = null;
    }
} 
```

在这里，首先单击`document`，`real mouse`隐藏。当用户`document`再次点击时，`real mouse`它仍然是隐藏的，一个新`fake mouse`的（图像）将取代它。的位置`fake mouse`将与用户离开的位置相同`real mouse`。`fake mouse`工作（尝试）像`real mouse`.

*抱歉内联 css 和 javascrict*

# jquery - 无法使用 jQuery 获取鼠标位置

> ID：10804652
> 
> 赞同：0
> 
> 时间：2012-05-29T18:28:22.613
> 
> 标签：jquery, events

我有一个附加到锚点的鼠标悬停事件。我试图在该事件处理程序中获取鼠标位置，但坐标返回为未定义。这是我正在尝试的：

```
<a onmouseover="SetTopLeft(this);"...

<script type="text/javascript">
    function SetTopLeft(obj)
    {
        alert("width/height = " + obj.pageX + "/" + obj.pageY);
    }
</script> 
```

我也试过：

```
alert("width/height = " + $(obj).pageX + "/" + $(obj).pageY); 
```

......结果相同。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:38:45.350

```
alert("width/height = " + $(obj).offset().left + "/" + 
($(obj).offset().top - $(window).scrollTop()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T18:36:42.180

先在谷歌上搜索一下...

文档：[http ://docs.jquery.com/Tutorials:Mouse_Position](http://docs.jquery.com/Tutorials:Mouse_Position)

代码：

```
$(document).ready(function(){
   $(document).mousemove(function(e){
      $('#status').html(e.pageX +', '+ e.pageY);
   }); 
}) 
```

如果需要对象的位置，可以使用：

```
$(selector).position() 
```

# c# - 无法从我的网络服务中捕获异常

> ID：10804653
> 
> 赞同：0
> 
> 时间：2012-05-29T18:28:24.970
> 
> 标签：c#, web-services

我有一个 WPF 应用程序，它将尝试从 Web 服务 (ASMX) 获取数据。我在网络服务上做了一个方法来查看网络服务是否可用。但是，我不能捕捉到我返回的异常。这是我在 Web 服务上调用测试方法的代码：

```
public bool TestConnection()
{
    try
    {
        return service.Test();
    }
    catch(Exception ex)
    {
        return false;
    }
} 
```

service.Test() 方法会引发异常，因为那里没有监听 Web 服务（我更改了 url 以模拟真实场景）。它抛出的异常没有被我的 catch 语句捕获。我不知道为什么不。这是我得到的例外：

```
System.Windows.Markup.XamlParseException occurred
  Message='The invocation of the constructor on type 'GreenWebPlayerWPF.Window1' that matches the specified binding constraints threw an exception.' Line number '4' and line position '258'.
  Source=PresentationFramework
  LineNumber=4
  LinePosition=258
  StackTrace:
       at System.Windows.Markup.XamlReader.RewrapException(Exception e, IXamlLineInfo lineInfo, Uri baseUri)
  InnerException: 
       Message=Exception handled
       Source=Player
       StackTrace:
            at GreenWebPlayerWPF.Services.GWDSServiceProxy.Test() in C:\Subversion\GreenWeb 2.5\Version 2.5\GreenWebPlayerWPF\Services\Proxy\GWDSServiceProxy.cs:line 214
            at GreenWebPlayerWPF.HeartBeatService.Start() in C:\Subversion\GreenWeb 2.5\Version 2.5\GreenWebPlayerWPF\Services\HeartBeatService.cs:line 21
            at GreenWebPlayerWPF.Window1..ctor() in C:\Subversion\GreenWeb 2.5\Version 2.5\GreenWebPlayerWPF\Window1.xaml.cs:line 127
       InnerException: 
            Message=Service unavailable:Unable to connect to the remote server
            Source=Player
            StackTrace:
                 at GreenWebPlayerWPF.Services.GWDSServiceProxy.Test() in C:\Subversion\GreenWeb 2.5\Version 2.5\GreenWebPlayerWPF\Services\Proxy\GWDSServiceProxy.cs:line 206
            InnerException: 
```

该异常是一个xaml异常，我似乎我的异常正在冒泡，在我有机会抓住它之前......

有谁知道发生了什么？

# c - win32 API 字符串类型 - LPSTR 和 char 之间的转换 *

> ID：10804656
> 
> 赞同：0
> 
> 时间：2012-05-29T18:28:26.997
> 
> 标签：c, winapi

我正在编写一个使用 win32 API 创建文件的函数

```
void createFile(HWND hwnd, LPTSTR pszFile, PBITMAPINFO pbi, HBITMAP hBMP, HDC hDC) 
```

我还编写了一个基于当前时间动态生成文件名的函数。

```
char * getFilename() {
   char filename[200] = "";
   char buf[40];
   SYSTEMTIME st;
   GetSystemTime(&st);
   itoa(st.wHour, buf,10)
   strcat(filename,buf);
   .....
   return filename;
} 
```

我将上述函数称为：

```
createFile(hwnd, getFilename, pbi, hBMP, hDC); 
```

通过调试器，文件名是正确的，直到执行 createFile() 中的第一条语句之后，字符串突然变成“ÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌ

很明显我有某种类型错误，但我不确定如何修复它。我是 win32 API 的新手，在理解所使用的各种类型时遇到了很多麻烦，所以如果能帮助我解决这个问题，我将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:30:25.340

您正在返回一个指向 的指针`filename`，该指针已在内部堆栈上分配`getFilename`，因此在函数返回时被释放。

编辑：为避免混淆 - 内存分配在堆栈上，而不是堆上（通过`malloc`或`new`）。所以“它被释放”并不是指调用`free`（或`delete`）。而是因为它不再被保留。不再可供使用。解除分配。没有字节。这是一个非缓冲区。

对于解决方案，请考虑在`getFileName`. 这可以由调用者在堆栈上完成，调用者将缓冲区作为参数传递。自然地，使用字符串类将是一种选择。

# python - python字典计数

> ID：10804659
> 
> 赞同：3
> 
> 时间：2012-05-29T18:28:36.670
> 
> 标签：python, dictionary, count

我需要计算我的字典中列出不同值的次数。问题是我不知道如何计算这些值。

```
print dic
{'KLOI98': ['Martha Miller', '4563', 'Vet_Parking'], 'TY5678': ['Jane Miller', '8987', 'AgHort_Parking'], 'WER546': ['Olga Grey', '9898', 'Creche_Parking'], 'HUY768': ['Wilbur Matty', '8912', 'Creche_Parking'], 'EDF768': ['Bill Meyer', '2456', 'Vet_Parking'], 'DF7800': ['Jacko Frizzle', '4532', 'Creche_Parking'], 'JU9807': ['Jacky Blair', '7867', 'Vet_Parking'], 'GEF123': ['Jill Black', '3456', 'Creche_Parking'], 'ADF645': ['Cloe Freckle', '6789', 'Vet_Parking'], 'GH7682': ['Clara Hill', '7689', 'AgHort_Parking'], 'ABC234': ['Fred Greenside', '2345', 'AgHort_Parking']} 
```

和我的代码：

```
for k, v in dic.items():
    print "%s: %s" % (k, v) 
```

我要做的就是数一数 Vet、AgHort 和 Creche 公园的数量。我无法更改密钥，因为我的脚本的其余部分都可以使用它。

谢谢您的帮助。

应该很简单，但我就是无法破解。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-29T18:32:57.177

```
from collections import Counter
items = Counter(val[2] for val in dic.values()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T19:38:31.370

Counter 要求您使用 Python 2.7 或更高版本。对于我们这些必须使用 2.6 或更早版本的人（不要笑 - 有几个主要的分析库尚未更新......）....

```
result = {}
for item in [value[2] for value in test.values()]:
    result[item]=result.get(item,0)+1
print result 
```

我正在使用列表推导来解包数据 - 理由是这可以作为一个独立的元素进行测试，然后再增加汇总数据的复杂性。实际上有不止一种方法可以处理这部分:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T18:39:06.173

您只需将数据减少到所需的数据，然后使用`Counter`：

```
from collections import Counter 
print Counter([x[2] for x in data.values()]) 
```

它显示：

```
Counter({'Creche_Parking': 4, 'Vet_Parking': 4, 'AgHort_Parking': 3}) 
```

# apache - 为什么 Apache 不能“确定我的服务器的限定名称”？

> ID：10804660
> 
> 赞同：0
> 
> 时间：2012-05-29T18:28:40.460
> 
> 标签：apache

我在“站点可用”文件夹中的 Apache 中为我的 Django 应用程序创建了一个新的虚拟主机：

```
NameVirtualHost 74.181.105.228:80
<VirtualHost 74.181.105.228:80>
    ServerAdmin admin@mydomain.com
    ServerName mydomain.com

# Run the SLMCS Django application.
WSGIScriptAlias / /home/david/djangosites/mydomain/wsgi.py
WSGIScriptReloading On

Alias /static/ /home/david/staticFiles/

<Directory /home/david/djangosites/mydomain>
<Files wsgi.py>
Order deny,allow
Allow from all
</Files>
</Directory>

</Virtualhost> 
```

在我使用“sudo apachectl restart”重新启动 Apache 后，站点[http://mydomain.com](http://mydomain.com)工作正常。但是，Apache 会输出此警告。

```
apache2: Could not reliably determine the server's fully qualified domain name, 
using 74.181.105.228 for ServerName 
```

这是什么意思？我在我的 Virtualhost 中指定了 ServerName 指令，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T18:30:34.307

您的服务器没有`ServerName`. 您设置了一个，但仅适用于您的 VirtualHost，而不是服务器本身。

# java - Java 可执行文件

> ID：10804662
> 
> 赞同：1
> 
> 时间：2012-05-29T18:28:48.773
> 
> 标签：java, executable-jar

我正在为我的 java 程序创建一个可执行的 jar 文件。该程序使用 jtds.1.2.jar 和 javacsv-2.0.jar。

创建可执行 jar 文件时是否可以包含外部 jar？

请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:32:21.467

是的，有可能。

您可以使用 eclipse 导出 jar 功能来执行此操作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T18:32:32.373

试试这个，这是在eclipse中创建jar或runnable jar的方法，项目中的所有外部库都将包含在内

```
File -> Export-> Java ->Runnbale JAR file

Launch configuration : your Class containing the public static void main(String[] args)

Export destination : Target place

Library Handling:

Package required libraries into generated JAR

FINISH 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T18:31:06.937

当然有可能！只需将 Jars 的类添加到您的 Jar 中！

您可以手动执行此操作（不建议），或者任何构建工具（如 Ant（目标）和 Maven（搜索着色插件））都可以为您执行此操作。

如果您不想费心创建任何脚本，只需使用 IDE 为您完成（较新的 Eclipse 版本有一个用于自动包含库的复选框，对于较旧的版本，只需安装一个自动为您完成工作的插件，例如[FatJar](http://fjep.sourceforge.net/)插件）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T18:34:55.207

可以创建这样的文件夹结构

```
主目录：
   your_app.jar
        子目录：
           其他 jar 文件
```

然后[将依赖项添加到您的 jarfile 清单](http://docs.oracle.com/javase/tutorial/deployment/jar/downman.html)并将整个内容“压缩”在一起，将其移动到您想要的计算机上。例如，Netbeans 支持这种部署。

对于更通用/“万无一失”的解决方案，您必须创建一个安装程序。

# map - 使用 HQL 查询地图的值

> ID：10804664
> 
> 赞同：1
> 
> 时间：2012-05-29T18:28:53.327
> 
> 标签：map, hql

假设我有一张地图（称之为`myClass.mapElem<Object, Object>`），如下所示：

```
Key    Val
A      X
B      Y
C      X 
```

我想编写可以查询*值*的 HQL，以便我可以取回 myClass 的所有实例，其中 mapElem 的值为“X”（其中“X”是一个完全填充的对象——我只是不想遍历每个元素并说 x.e1 = mapElem.e1 和 x.e2=... 等）。我知道我可以通过 using 对键执行此操作`where ? in index(myClass.mapElem)`，我只需要相应的语句来查询值！

提前致谢...

ETA：不确定语法是否有所不同，但我实际查询的方式是这样的：

`select myClass.something from myClass mc join myClass.mapElem me where...`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:55:51.847

你应该使用元素（）。我尝试使用以下类模拟您的示例

```
@Entity
@Table(name="Dummy")
public class TestClass {
    private Integer id;
    private Map<String, String> myMap;

    @Id
    @Column(name="DummyId")
    @GeneratedValue(generator="native")
    @GenericGenerator(name="native", strategy = "native")
    public Integer getId() {
        return id;
    }

    @ElementCollection
    public Map<String, String> getMyMap() {
        return myMap;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public void setMyMap(Map<String, String> myMap) {
        this.myMap = myMap;
    }
} 
```

并保留了一些实例，其中包含与您在示例中所拥有的结构相似的映射。（使用 < String, String > 因为您的示例中的值是字符串）

以下查询为我提供了 TestClass 的所有实例，其中映射包含特定值

```
SELECT DISTINCT myClass 
FROM TestClass myClass JOIN myClass.myMap myMap 
WHERE ? in elements(myMap) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T14:45:30.920

在我的特殊情况下，我最终不得不使用 SQL 查询。不理想，但它奏效了。

# javascript - 外部函数中的变量不可修改

> ID：10804666
> 
> 赞同：0
> 
> 时间：2012-05-29T18:29:06.140
> 
> 标签：javascript, function, variables, scope

如果我在外部函数中有一个变量，并且有一个更改该变量的内部函数，为什么该变量会恢复为其原始值？

```
// Check which type of event registration browser supports
function addEvent(eventTarget, eventType, eventHandler){
    if (window.addEventListener){
        eventTarget.addEventListener(eventType, eventHandler);
    }
    else if (window.attachEvent){
        var eventType = "on" + eventType;
        eventTarget.attachEvent(eventType, eventHandler);
    }
}

// Check if browser supports DOMContentLoaded
var DOMContentLoadedSupported = "no";

addEvent(document, "DOMContentLoaded", function(){
    DOMContentLoadedSupported = "yes";
})

alert(DOMContentLoadedSupported) // alerts "no" not "yes". Why??            
​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T18:30:43.120

该函数将修改变量，但这将在您的警报之后发生，因此您在警报中看到“否”，因为警报发生在变量被修改之前。

# android - 自动更新android应用程序的方法

> ID：10804673
> 
> 赞同：3
> 
> 时间：2012-05-29T18:29:41.797
> 
> 标签：android

我开发了一个持续运行数天的 android 应用程序。现在我通常会不断更新这个应用程序，我希望所有运行我的应用程序的手机都应该能够以某种方式自动更新我安装在其中的应用程序。我还没有在市场上发布我的应用程序。在我的应用程序中我已经开发了推送通知功能是否有帮助？有任何想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T18:32:18.480

您可以使用服务器并让应用程序检查新更新并相应地下载。

不确定这是否是您要查找的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T18:38:01.203

如果应用程序在 Android Market（现在的 Google Play Market）上，则无法强制用户更新。就像 DCSoft 所说，您可以让您的应用程序检查某些服务器以查看是否有可用更新。那时，您可以在用户更新之前对用户进行错误处理，或者您可以阻止应用程序运行直到它是最新的，但仅此而已。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-03T05:16:15.447

您可以使用[https://github.com/commonsguy/cwac-updater](https://github.com/commonsguy/cwac-updater)

这真的很容易，适合您的需要。

我用过很多次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-19T23:32:04.637

Vishnu，假设您不想使用 Google Play 自动更新功能，您将需要一个更新程序。在我工作的两家公司中，我们在 Windows Mobile 6.x 和 Android 应用程序上都遇到了类似的问题——出于安全原因不允许使用 Google Play——我在这两种情况下都成功地使用了这个解决方案：

![在此处输入图像描述](../Images/b0481223f0cc33efce9fd66825436752.png)

主应用程序根据 Web 服务检查它是否已更新。如有必要，它会接收当前版本和下载新版本的 URL。然后主应用程序启动 Updater 应用程序，传递 URL，然后退出。

更新程序通过 HTTP 下载新程序，向用户显示下载的百分比。用户可以随时以受控方式取消下载，更新程序可以注册此取消。

由于下载了新应用程序，更新程序运行新应用程序并退出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-03T05:19:45.760

您可以使用android中的服务来检查服务中是否有任何更新，如果有则触发服务，更新东西，否则销毁它。[用户可能不知道这个]

这是你想要的吗？！

# sql - 优化特定的sql查询

> ID：10804675
> 
> 赞同：1
> 
> 时间：2012-05-29T18:29:50.253
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我不是 SQL 专家，请帮忙，我该如何优化这个查询？

我没有索引，只有名为 master_table 的表和更多表，我必须优化此查询以获得相同的结果，如果必须，我可以创建索引，但我无法更改创建表....

```
select month(date_hour), passenger, nationality, passport, airline,
   count(*) N_Viagens
from masterTable
group by month(date_hour), passenger, airline, nationality, passport 
having count(*) > 10 
```

接下来是创建表的代码，但我无法编辑该代码，只能编辑查询或创建索引：

```
select
p.birthdate, p.gender, p.passport, p.name + ' ' + p.surname passenger, p.nationality,
    r.class, r.flightNR, r.payment, r.ticketNR,
    f.src_AP_ID, f.dest_AP_ID, f.AL_ID, f.date_hour, f.AirCrft_Code,ac.manufacturer, ac.model,
    SA.City 'Origin City', SA.Country 'Origin Country', SA.Name 'Origin Airport', 
    DA.City 'Dest City', DA.Country 'Dest Country', DA.Name 'Dest Airport',
    al.Name airline, al.IATA, al.icao
into masterTable 
from passenger p
join reservation r on r.passport = p.passport
join flight f on f.flightNR = r.flightNR
join airport SA on f.src_AP_ID = SA.AP_Id 
join airport DA on f.dest_AP_ID = DA.AP_Id 
join aircraft ac on f.airCrft_Code = ac.code
join airline al on f.AL_ID = al.AL_ID 
```

无索引：

```
SQL Server Execution Times: CPU time = 10125 ms,  elapsed time = 17052 ms. 
```

我想我做到了，感谢你们所有人，再次感谢你们

我创建了这样的索引：

```
create index idx_MasterTable_Passenger on masterTable(passport, airline) 
```

和我改成这样的查询：

```
select month(date_hour), max(passenger) as passenger, nationality, passport, airline, count(*) N_Viagens
from masterTable
group by airline, nationality, passport, month(date_hour)
having count(*) > 10 
```

你怎么看，可以接受吗？

```
SQL Server Execution Times: CPU time = 8362 ms,  elapsed time = 5721 ms. 
```

如果老师同意，我会和老师谈谈

**老师没有接受这个改变，我们不能改变表或查询，只能创建一个好的索引....建议？？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:20:37.697

这是一个棘手的问题 - 要真正加快对 的分组`month(date_hour)`，您需要在该精确表达式上使用**功能索引**（也称为MS SQL Server 中[计算列上的索引）。](http://msdn.microsoft.com/en-us/library/ms189292.aspx)仅仅有一个索引`date_hour`是不够的。

在[这个例子](http://sqlfiddle.com/#!3/9e52c/3)中，第二个表有一个计算列和一个索引（而第一个没有）。请注意相同的查询如何具有不同的执行计划，其中第一个实际对数据进行排序，而第二个只是快速浏览索引。

由于这是一个家庭作业，我会让您自己将其纳入您的示例中。

顺便说一句，如果您对索引和性能的主题感兴趣，我强烈推荐阅读：[使用索引，卢克！](http://use-the-index-luke.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:20:19.223

此查询将始终需要扫描。现在有 WHERE 子句，因此我们无法通过快速隔离较小的子集来加快查询速度。有一个 HAVING 子句，但它只能在聚合后应用。

但是有一个 GROUP BY 子句；可以通过添加适当的索引来加速 GROUP BY 子句的聚合。因为 GROUP BY 子句中的列也用于 SELECT 列表，所以我们可以实现只需要扫描该索引，而不是整个表。

GROUP BY 子句包含表达式month(date_hour)。这意味着我们可以忽略这个索引。仍然是乘客、航空公司、国籍、护照。在创建索引之前，您必须弄清楚正确的顺序。我的直觉是，您需要将最具选择性的列放在首位——也就是说，具有最多唯一值的列应该出现在具有较少唯一值的列之前。我猜乘客，航空公司，国籍，护照的顺序已经很不错了。那就是说我会通过改变列的顺序来做一些实验。

创建索引后，您将不必重写查询。但是，如果您的 RDBMS 的优化器是幼稚的（如 MySQL 的），您必须将 month(date_hour) 表达式作为 GROUP BY 子句的最后一个表达式。这不会以任何方式改变结果，尽管它可能会影响返回行的顺序。但是，这根本不重要（如果确实如此，您应该添加一个 ORDER BY 子句）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T18:53:12.883

MasterTable 包含什么？似乎它会包含类似乘客的航段。如果是这样，很少有乘客在一个月内飞行超过 10 次。

您可以通过执行以下操作来提高性能：

(1) 在 MasterTable 中建立一个关于乘客的索引：

```
create index idx_MasterTable_Passenger on MasterTable(Passenger); 
```

(2) 认识到飞行 10 次的人相对于其他人来说是罕见的，因此将其过滤掉：

```
select month(date_hour), passenger, nationality, passport, airline,
       count(*) as N_Viagens
from masterTable
where passenger in (select passenger from MasterTable group by passenger having count(*) >= 10)
group by month(date_hour), passenger, airline, nationality, passport
having count(*) > 10 
```

这可能会加快查询速度。

但是，我会建议一些不同的东西。创建一个表格，按乘客（或类似级别）汇总信息以回答此类问题。当新数据添加到主表时，更新或插入行到该表中。

例如，您可能需要一个结构为 , , 的汇总表。晚上或每周运行一次此查询，它可能会回答很多问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T19:41:30.950

似乎护照是比名字更好的标识符。考虑到许多人已经改变了他们的名字。

在护照、航空公司创建索引

您可以将索引扩展到国籍、护照、航空公司、乘客，但不确定您购买了多少？

```
select nationality, passport, airline, year(date_hour), month(date_hour), max(passenger), count(*) N_Viagens
from masterTable 
group by  nationality, passport, airline, year(date_hour), month(date_hour) 
having count(*) > 10 
```

# java - 什么是 Hibernate 脏会话？

> ID：10804676
> 
> 赞同：14
> 
> 时间：2012-05-29T18:29:52.873
> 
> 标签：java, hibernate

我想知道是否有人可以告诉我什么是休眠脏会话？我似乎遇到了一个问题，即条件查询在不应该执行插入时执行了插入。我相信它与脏会话有关，但在不真正知道脏会话是什么的情况下，我无法解决我的问题。另外，如何创建脏会话。谢谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-29T18:34:08.733

Hibernate 会话是一个缓存。它缓存从数据库读取的实体，它还缓存您对其包含的实体所做的更改，以及添加和删除的实体，直到会话被刷新（即所有未决的更改都写入数据库）。

当某些更改尚未刷新时，会话被称为*脏会话。*因此，有一个肮脏的会话是完全正常的。在提交事务之前刷新会话。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-29T18:33:45.957

Hibernate 中的脏会话是指在会话中加载对象然后对其进行修改。

或者，当您打开会话并创建新对象时。

即使您没有显式调用任何插入/更新操作，Hibernate 也会将会话标记为**脏**，并在会话关闭时保存更改

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-05T09:15:20.400

简而言之：正如我们所知，脏数据是尚未提交的数据。同样，休眠中的脏会话包含尚未提交的修改数据。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-29T18:33:30.830

这只是意味着您对尚未刷新到数据库的内存中的托管持久对象进行了更改。

基本上，休眠背后的想法是内存中持久对象*的*状态是应用程序的状态。如果您对托管对象进行更改，hibernate 将在下一次机会时将其放入数据库中。您不应该对您不打算持久化的托管对象进行“临时”更改，因为它们会持久化！

在执行查询之前，hibernate 将所有托管对象的内存状态刷新到数据库，以便查询相对于应用程序的状态是准确的。

# c++ - 延迟函数调用

> ID：10804683
> 
> 赞同：3
> 
> 时间：2012-05-29T18:30:40.610
> 
> 标签：c++, asynchronous, c++11, function-calls, delayed-execution

使用 C++11、lambdas 和 async 执行延迟（因此也是异步）函数调用的最优雅方式是什么？建议命名：`delayed_async`. 询问的原因是我希望在给定时间（在本例中为一秒）后关闭 GUI 警报灯，当然不会阻塞主（wxWidgets 主循环）线程。我`wxTimer`为此使用了 wxWidgets'，我发现`wxTimer`在这种情况下使用起来相当麻烦。`async`^([所以这让我很好奇，如果我改用 C++11 的1](http://www.stdthread.co.uk/doc/headers/future/async.html)、[2](http://en.cppreference.com/w/cpp/thread/async)) ，这可以实现多方便。我知道在使用`async`.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-29T20:12:03.513

你的意思是这样的？

```
#include <iostream>
#include <chrono>
#include <thread>
#include <future>

int main()
{
    // Use async to launch a function (lambda) in parallel
    std::async(std::launch::async, [] () {
        // Use sleep_for to wait specified time (or sleep_until).
        std::this_thread::sleep_for( std::chrono::seconds{1});
        // Do whatever you want.
        std::cout << "Lights out!" << std::endl;
    } );
    std::this_thread::sleep_for( std::chrono::seconds{2});
    std::cout << "Finished" << std::endl;
} 
```

只需确保您没有在 lambda 中通过引用捕获变量。

# java - 有人可以解释为什么我在使用 Timer 时会出现此错误吗？

> ID：10804688
> 
> 赞同：1
> 
> 时间：2012-05-29T18:30:52.787
> 
> 标签：java, swing, timer

为什么我的计时器出现错误？在代码下方，它说明了错误是什么。我无法弄清楚我做错了什么......谁能帮助我

```
 import java.util.Timer;
       import javax.swing.ImageIcon;
       import javax.swing.JPanel;

       /**
        *
      * @author Rich
      */
     public class Board extends JPanel implements ActionListener{
         Dude p;
        Image img;
       Timer time;

        public Board() {
         p = new Dude();
        addKeyListener(new AL());
         setFocusable(true);
          ImageIcon i = new ImageIcon("images.jpg");
          img = i.getImage();
          time = new Timer(5,this);
          time.start();
        }

        public void actionPerformed(ActionEvent e) {
        p.move();
        repaint();
         } 
```

基本上我得到的错误是

```
no  suitable constructor found for Timer(int,OurGame.Board)
constructor java.util.Timer.Timer(java.lang.String,boolean) is not applicable
  (actual argument int cannot be converted to java.lang.String by method invocation conversion)
constructor java.util.Timer.Timer(java.lang.String) is not applicable
  (actual and formal argument lists differ in length)
constructor java.util.Timer.Timer(boolean) is not applicable
  (actual and formal argument lists differ in length)
constructor java.util.Timer.Timer() is not applicable
  (actual and formal argument lists differ in length) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T18:33:26.240

您应该导入`javax.swing.Timer`而不是`java.util.Timer`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T18:33:42.617

你导入了`java.util.Timer`. 使用`javax.swing.Timer`. 不是你的错，你经常看到。

对于文档，请阅读[http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-29T18:32:09.383

以下行中的“this”变量：

```
time = new Timer(5,this); 
```

指的是当前类，而 Timer 类不知道如何处理它；）

# jquery - 将鼠标悬停在孩子身上时更改父母

> ID：10804690
> 
> 赞同：1
> 
> 时间：2012-05-29T18:31:06.007
> 
> 标签：jquery, jquery-selectors

我有以下菜单结构：

```
<ul class="menu">
  <li class="first leaf"><a href="#" title="" class="active">Home</a></li>
  <li class="expanded"><a href="#" title="Products">Products</a>
    <ul class="menu">
      <li class="first leaf"><a href="#">Product 1</a></li>
      <li class="leaf"><a href="#">Product 2</a></li>
      <li class="leaf"><a href="#">Product 3</a></li>
      <li class="last leaf"><a href="#">Product 4</a></li>
    </ul
  <li>
  <li class="expanded"><a href="#" title="Products">Products Level 2</a>
    <ul class="menu">
      <li class="first leaf"><a href="#">Product 5</a></li>
      <li class="leaf"><a href="#">Product 6</a></li>
    </ul>
  <li>
</ul> 
```

我想要做的是，当`Product 1`项目悬停时，我希望父`Products`菜单项发生变化。

我已经研究了 CSS 来做到这一点，通过尝试基于孩子来定位父母，但似乎无法做到。

这可以在jQuery中完成吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:33:13.993

```
$('.menu > .expanded > .menu > li > a').on('hover', function(e) {
    var li = $(this).closest('.expanded').find('a:first');
    if (e.type == 'mouseenter') {
        li.css('background', '#f00');
    } else {
        li.css('background', '#fff');
    }
}); 
```

**[演示](http://jsfiddle.net/thecodeparadox/U9YVj/1/)**

或者

```
$('li.leaf').on('hover', function(e) {
   var li = $(this).closest('.expanded').find('a:first');
   if(e.type == 'mouseenter') li.css('background', '#fff');
   else li.css('background', '#f00');
}); 
```

**[演示](http://jsfiddle.net/thecodeparadox/QuEA8/1/)**

**根据您的编辑**

您的 HTML 标记有一些问题，请解决它们。

我认为我的代码也适用于新妆容。

看**[这里](http://jsfiddle.net/thecodeparadox/cELJ6/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T18:39:39.627

```
$("a:contains('Product 1')").hover(function(){
   $('[title="Products"]').addClass('changed');
}) 
```

[http://jsfiddle.net/ULALG/](http://jsfiddle.net/ULALG/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T18:42:03.560

试试这个：

```
$('li.first').hover(function() {
    $(this).closest('li.expanded').children('a').css('font-weight', 'bold');
}, function() {
    $(this).closest('li.expanded').children('a').css('font-weight', 'normal');
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/ppeKY/)**。

该示例只是在将鼠标悬停在产品 1 列表项上时将产品菜单加粗，但您可以做任何您需要做的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T18:47:55.033

这取决于您希望如何更改它？

**编辑：**更新了 2 li 子菜单的[**DEMO**](http://jsfiddle.net/wKqB9/3/)

**只需使用 CSS：**

```
ul.menu li { display: inline-block; margin: 3px;  padding: 5px; vertical-align: top;}

ul.menu li:hover { font-weight: bold; background-color: green; }

ul.menu, ul.menu li:hover ul, ul.menu li:hover ul.menu li { font-weight: normal; background-color: white; }
ul.menu li:hover ul.menu li:hover { font-weight: bold; background-color: green; } 
```

[**演示**](http://jsfiddle.net/wKqB9/1/)- 字体和背景

[**演示**](http://jsfiddle.net/wKqB9/2/)- 只是字体

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T18:48:36.533

你的意思是这样的吗？

[http://jsfiddle.net/KZdkV/16/](http://jsfiddle.net/KZdkV/16/)

```
$('.hoverchange').hover(function() {
    $('.expanded').replaceWith('<a href="#" title="NewStuff">NewStuff</a>');
});​ 
```

不过，我改变了一些你的课程。查看链接以了解差异。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-29T18:55:15.737

我建议在第一个 ul 中添加一个 id，然后像这样：

```
$(".menu .menu li a").hover(
    function() {
        $(this).parents("#root > li").addClass('test');
    },
    function() {
        $(this).parents("#root > li").removeClass('test');
    }     
); 
```

在**[jsFiddle上](http://jsfiddle.net/harpax/Kwrk6/)**

# xml - 如何删除 XmlDocument 中的所有 \n \r \t？

> ID：10804694
> 
> 赞同：0
> 
> 时间：2012-05-29T18:31:18.490
> 
> 标签：xml, vb.net, xmldocument

是否可以删除 XmlDocument 中的 \n、\r、\t 和其他不可见字符（例如空格）？

我试过`PreserveWhiteSpace = False`and `IgnoreWhiteSpace = True`for `XmlReaderSettings`，但那些没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:05:41.007

您可以使用 XSLT 执行此操作，但要确保 XSL 模板不会[引入其他一些空白 back](https://stackoverflow.com/questions/1468984/xslt-remove-whitespace-from-template)。

# php - 看不到图片，但是，我知道它在那里

> ID：10804702
> 
> 赞同：0
> 
> 时间：2012-05-29T18:32:07.997
> 
> 标签：php, file-upload

我的网站上有一张图片：

```
www.blah.com/gallery/gallery/2244.jpg 
```

如果我直接键入此 URL，我会看到图像。

现在，我有一个小画廊，我希望在其中显示图像（和其他图像），但是，使用以下代码它根本不显示：

```
$files = glob("/home/mysite/public_html/gallery/gallery/*.*"); 

for ($i=1; $i<count($files); $i++) 
{

 $num = $files[$i];

 echo '<a class="fancybox-effects-a" rel="gallery" href="'.$num.'">';
 echo '<img src="'.$num.'" class="gallery_img" alt=""></a>'; 

 } 
```

图片上传时没有错误（使用[http://www.verot.net/php_class_upload.htm](http://www.verot.net/php_class_upload.htm)）：

```
if(isset($_FILES['image'])){

include('/home/mysite/php/lib/img_upload/class.upload.php');

// retrieve eventual CLI parameters
$cli = (isset($argc) && $argc > 1);
if ($cli) {
    if (isset($argv[1])) $_GET['file'] = $argv[1];
    if (isset($argv[2])) $_GET['dir'] = $argv[2];
    if (isset($argv[3])) $_GET['pics'] = $argv[3];
}

// set variables
$dir_dest = (isset($_GET['dir']) ? $_GET['dir'] : 'test');
$dir_pics = (isset($_GET['pics']) ? $_GET['pics'] : $dir_dest);

if (!$cli) {

// ---------- IMAGE UPLOAD ----------

$handle = new Upload($_FILES['image']);

if ($handle->uploaded) {

    $handle->image_resize            = true;
    $handle->image_ratio_x           = true;
    $handle->image_y                 = 500;

    $handle->Process('/home/mysite/public_html/gallery/gallery/');

    // we check if everything went OK
    if ($handle->processed) {
        // everything was fine !

        $success .= 'Image uploaded to the gallery successfully!';

    } else {
        // one error occured
        $error .= '<li>file not uploaded to the wanted location';
        $error .= '<li>Error: ' . $handle->error . '';
    }

    // we now process the image a second time, with some other settings
    /******************************/
    // produce thumbnails
    /*****************************/
    $handle->image_resize            = true;
    $handle->image_ratio_x           = true;
    $handle->image_y                 = 120;
    $handle->image_reflection_height = 50;
    $handle->image_reflection_opacity = 90;
    $handle->image_convert = 'png';

    $handle->Process('/home/mysite/public_html/gallery/gallery/thumbs/');

    // we check if everything went OK
    if ($handle->processed) {
        // everything was fine !
        $success .= '<p>Thumbnail created successfully, see below...';
        $success .= '<p><img src="/gallery/gallery/thumbs/' . $handle->file_dst_name . '" />';
    } else {
        // one error occured
        $error .= 'file not uploaded to the wanted location';
        $error .= '  Error: ' . $handle->error . '';
    }

    /******************************/
    // END use this if you want to produce thumbnails
    /*****************************/

    // we delete the temporary files
    $handle-> Clean();

} else {
    // if we're here, the upload file failed for some reasons
    // i.e. the server didn't receive the file
    $error .= '<li>file not uploaded on the server';
    $error .= '<li>Error: ' . $handle->error . '';
}

}

} 
```

我根本无法理解这一点！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T18:36:26.843

看起来您将 设置`src`为图像的绝对路径。试试这个：

```
foreach (glob('/home/mysite/public_html/gallery/gallery/*.jpg') as $file) {
  $file = '/gallery/gallery/'.basename($file);
  echo '<a class="fancybox-effects-a" rel="gallery" href="'.$file.'">';
  echo '<img src="'.$file.'" class="gallery_img" alt=""></a>'; 
} 
```

# django - 用于合并 Django 用户对象的第三方应用程序？

> ID：10804706
> 
> 赞同：3
> 
> 时间：2012-05-29T18:32:29.143
> 
> 标签：django, merge, foreign-key-relationship

我需要在 Django 数据库中合并两个用户。所以我想知道是否有任何简单的方法（也许是专门的应用程序）来做到这一点？

**例如：**

我们有`user_a`和`user_b`一些模型具有模型的外键`User`（`Books`，`Interests`，`Teams`等等......）。

通过合并用户，我想删除该对象`user_b`并将所有指向该对象的外键设置为指向`user_a`. 而且 - 这是我主要关心的问题 - 我希望需要更改的对象，因为它们引用要自动确定的要删除的对象，而不必手动指定这些模型和外键字段的列表。

这是否已经实施并且我正在重新发明轮子？

**这可能吗？**

如果没有，请告诉我这样做的方法：如何`User`在运行时构建具有特定模型（在我的情况下）的外键的 Django 模型列表？

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:55:53.123

我找到了这个片段[http://djangosnippets.org/snippets/2283/](http://djangosnippets.org/snippets/2283/)。不过，我将不得不对其进行修改，以使其具有递归性。完成后我将分享我的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-09T01:01:20.627

使用 Django 1.8 及更高版本，您可以使用[Model _meta API](https://docs.djangoproject.com/en/1.10/ref/models/meta/)稳健地实现这一目标。

具体来说，您可以使用[`Options.get_fields`](https://docs.djangoproject.com/en/1.10/ref/models/meta/#retrieving-all-field-instances-of-a-model). 这甚至可以让你处理泛型关​​系。

您需要考虑是否要在合并时添加或替换每个相关字段。此决定取决于您的应用程序逻辑和相应的架构选择。

```
u = User.objects.get(pk=123)
related_fields = [
    f for f in u._meta.get_fields()
    if (f.one_to_many or f.one_to_one)
    and not f.concrete
]
for f in related_fields:
    # use field's attributes to perform an update 
```

# cygwin - 在 cygwin 中运行时挂起

> ID：10804710
> 
> 赞同：0
> 
> 时间：2012-05-29T18:32:50.840
> 
> 标签：cygwin, nant, mintty

我今天下午更新到 cygwin 1.7.15 并运行了我今天早上成功运行的相同的 nant 脚本，除了 nant 现在挂起 - 没有显示任何输出。我已经验证了 nant (0.91.3881.0 alpha2) 仍然在 Windows cmd 提示符下运行，并且我尝试`rebaseall`在 cygwin 上运行但没有任何运气。

**编辑：**在 1.7.15 中，nant 不会在任务管理器和进程资源管理器（sysinternals）中显示为进程。

我如何`nant`重新在 cygwin 中工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:39:59.003

看起来这是一个[已知的错误，即将修复](http://cygwin.com/ml/cygwin/2012-06/msg00136.html)。修复上似乎没有 ETA。您可以通过恢复到 Cygwin 1.7.14 来解决它。重定向 stderr 和 stdout 不起作用。

如果您使用“非 cygwin dll”，请确保将 CYGWIN 环境变量设置为 pipe_byte（[有关更多信息，请参见此处](http://cygwin.com/ml/cygwin/2012-05/msg00324.html)）。

# iphone - 没有使用 ASIHTTPRequest 发送请求信息

> ID：10804711
> 
> 赞同：2
> 
> 时间：2012-05-29T18:32:51.830
> 
> 标签：iphone, ios, networking, timeout, asihttprequest

我在使用 ASIHTTPRequest 的 iOS 4.3+ 上遇到问题，其中触发了请求但没有数据（请求方法、url、标头等）到达服务器。连接超时，因为它永远不会收到回复。

服务器听到空请求（经过一段时间的延迟），然后听到一个有效的请求，当然这个请求永远不会报告给更高级别的代码，因为连接已经超时。这有点奇怪，因为请求未配置为重新发送数据。

这通常发生在应用程序被推到后台一段时间（15 分钟或更长时间）并且允许手机进入睡眠状态之后。

我的请求配置如下：

```
NSMutableData *postData = nil;

NSString *urlString = [NSString stringWithFormat:@"%@%@",[self baseURL],requestPath];

OTSHTTPRequest *request = [OTSHTTPRequest requestWithURL:[NSURL URLWithString:urlString]];
[request setCachePolicy:ASIFallbackToCacheIfLoadFailsCachePolicy];
[request setTimeOutSeconds:45];
//Set up body
NSString *queryString = [self _RPcreateQueryString:query];
if ([queryString length]>0) {
    if(method == RPAsyncServerMethodPost || method == RPAsyncServerMethodPut){
        postData = [[[queryString dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES] mutableCopy] autorelease];
    }else{
        NSURL *url = [NSURL URLWithString:[urlString stringByAppendingFormat:@"?%@",queryString]];
        [request setURL:url];
        if (!url) return nil; //url String malformed.
    }
}

// ... ///
// method setting stripped for brevity

[request addRequestHeader:@"Content-Type" value:@"application/x-www-form-urlencoded"];

if(headers){
    for (NSString* head in headers) {
        if ([[headers valueForKey:head] isKindOfClass:[NSString class]]) 
            [request addRequestHeader:head value:[headers valueForKey:head]];
    }
}
[request addRequestHeader:@"Content-Length" value:postLength];
[request setPostBody:postData]; 
```

OTSHTTPRequest 只是 ASIHTTPRequest 的一个子类，它包含字符串标签的属性、漂亮的描述和其他供消费对象使用的 bling，并且不会覆盖任何 ASI 内容。

任何人都可以解释为什么/如何 ASI 可以打开连接，然后在几分钟内完全没有发送任何内容吗？

编辑：只是为了澄清。连接确实与服务器联系，它只是从不通过我的服务器日志可以告诉的连接发送任何数据。这似乎总是发生在应用程序唤醒并影响所有连接，包括 MapKit 产生的 NSURLConnections。整个应用程序似乎失去了它的弹珠。我还看到一堆后台任务在此之前就结束了，但是在调试器中我永远无法捕捉到它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:46:38.173

您似乎不是根据您提供的代码开始您的请求。在完成设置其各种属性后，尝试调用 OTSHTTPRequest 对象的 -[startSynchronous] 或 -[startAsynchronous] 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T22:55:14.297

你是在设置委托，要么我忽略了它，要么你把它去掉了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T23:45:04.913

直到几天过去了，我才想说什么。这种情况下的解决方案非常模糊。

看来我使用的 TestFlight 版本中存在可能导致此问题的错误。自从它被移除以来，我没有遇到过这个问题。

# eclipse - 如何防止 Eclipse 在“查找/替换”对话框中将三个句点变成省略号？

> ID：10804714
> 
> 赞同：1
> 
> 时间：2012-05-29T18:33:04.007
> 
> 标签：eclipse

在 Eclipse 中工作我想找到一些以 Y 开头并以 E 结尾的五个字符串的出现。够简单吧？Command-F 调出“查找/替换”对话框，单击“正则表达式”，在“查找：”框中键入“Y...E”，单击“查找”，然后……什么也没有。

当然，在我发现 Eclipse 让我搜索三个字符序列 Y...E 之前最多一分钟。（Facepalm。）几分钟后，我有了解决方法：最后键入三个句点。但是我该如何制止这种胡说八道呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:51:14.663

Eclipse 使用 SWT 作为 UI 工具包。

SWT 与 Swing 和许多其他 UI 工具包不同，它基于操作系统的本机 UI 控件。因此，如果您在 Eclipse 中的对话框中有一个文本字段，它实际上是来自底层操作系统/窗口系统的本机文本控件。

而且...如果您在操作系统中启用了任何类型的“自动文本”或“自动更正”，那么这也会影响 Eclipse 中的所有文本字段。

# maven - Maven 生成源始终成功

> ID：10804715
> 
> 赞同：3
> 
> 时间：2012-05-29T18:33:13.103
> 
> 标签：maven

我正在尝试在 maven generate-sources 阶段运行 ant 任务。

然而，在我意识到许多非生产性的“成功”之后，无论我输入什么，构建总是成功的。

这是我模块的 pom.xml 的插件配置。

```
<plugin>
<groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-antrun-plugin</artifactId>
                <version>1.7</version>
                <executions>
                    <execution>
                        <configuration>
                            <tasks>
                                <fail message="Something wrong here."/>
                            </tasks>
                        </configuration>
                        <phase>generate-sources</phase>
                        <goals>
                            <goal>run</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin> 
```

它仍然成功。如果我放置了一个坏的 ant 文件。还是成功了。

有谁知道我在这里做错了什么？

编译/清理/安装/部署阶段都可以正常工作。只是“生成源”根本不起作用。

我的 settings.xml 文件仅包含回购信息 感谢您的任何建议

**编辑：**

我已经能够将错误缩小一点。

```
<configuration>
<target>
<echo message="hello ant, from Maven!"/>
<echo>Maybe this will work?</echo>
</target>
</configuration> 
```

如果将其放在插件的配置中，则不在执行标签中的嵌套配置中。并运行“mvn antrun:run”我看到了回声。但是，如果我将它放在执行元素的嵌套配置中，它不会显示......我的 mvn 目标和 antrun 指令之间是否缺少某些链接？

我不明白。相同的配置在执行/执行标记之外运行，但不在内部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:57:36.377

**解决方案****解决方案**解决**方案** AHHH 我找到了！在我的 pom.xml 中，我在“pluginManagement”下配置了所有“插件”“插件”。这个“插件管理”不是为这个项目配置插件，而是为所有子项目配置插件。实际上是实现插件的所有子项的父级默认配置文件。我只是删除了“pluginManagement”标签，它就可以工作了……

感谢诸天。我已经看了一整天了...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:58:36.753

尝试添加`<failOnError>false</failOnError>`到执行中。

根据[文档](http://maven.apache.org/plugins/maven-antrun-plugin/run-mojo.html)，此参数“指定 ant 构建中的失败是否导致 Maven 构建失败。如果此值为 'true'，即使 ant 构建失败，Maven 构建也会继续。如果它是 'false' ，那么如果 ant 构建失败，Maven 构建就会失败。”

这对我来说是违反直觉的。我认为如果 ant 构建失败，默认值“true”会导致 Maven 构建失败，但这不是文档似乎在说的。

# mysql - 将 mysql 表数据从远程服务器选择性备份到 SQL 文件中

> ID：10804718
> 
> 赞同：0
> 
> 时间：2012-05-29T18:33:17.867
> 
> 标签：mysql, sql

我需要做的是制作某些表数据的sql备份文件（“生成插入语句”）。我想每月做一次。

示例选择语句：

```
SELECT * FROM table WHERE date >= "01-01-2012" AND date < "01-02-2012" 
```

情况是我需要从远程 sql server 备份。看来，那时我不能使用`mysqldump`（？）

那么，我是否应该编写一个 PHP 脚本来生成这些语句？这似乎有点野蛮的解决方案；）

对不起，这件事看起来很基本，但我已经很困惑了。

顺便提一句。表部分是 InnoDB 部分是 MyISAM

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T00:26:03.620

你问了很多问题...

如果远程机器是 unix，请编写一个像这样的小 bash 脚本：

```
#!/bin/bash

/usr/bin/mysqldump -h db_server -u user_name -ppassword --WHERE 'date >= "01-01-2012" AND date < "01-02-2012"' database_name table_name | gzip > output.sql.gz 
```

注意事项：

1.  密码在脚本中是硬编码的。使用权限较低的用户帐户。
2.  您的日期范围也是硬编码的，但这很容易使其通用。
3.  '-p' 和密码之间没有空格。

对于 innodb，使用 --single-transaction。对于 myisam，我猜你会坚持使用 --lock-tables。

然后在 cron 作业中运行此脚本。

如果您无法连接，请检查您的防火墙和 mysql 用户权限。

而我的 0.02 美元……编写运行 shell 命令的 php 脚本真的很懒惰。为它们编写 shell 脚本。你会睡得更好。

祝你好运。

# javascript - ?:, ?! 之间的区别 和 ?=

> ID：10804732
> 
> 赞同：173
> 
> 时间：2012-05-29T18:33:56.627
> 
> 标签：javascript, regex

我搜索了这些表达的含义，但无法理解它们之间的确切区别。

这就是他们所说的：

*   `?:`匹配表达式但不捕获它。
*   `?=`匹配后缀，但将其从捕获中排除。
*   `?!`如果后缀不存在则匹配。

我尝试在简单的 RegEx 中使用这些并得到了类似的结果。

例如：以下 3 个表达式给出了非常相似的结果。

*   `[a-zA-Z0-9._-]+@[a-zA-Z0-9-]+(?!\.[a-zA-Z0-9]+)*`
*   `[a-zA-Z0-9._-]+@[a-zA-Z0-9-]+(?=\.[a-zA-Z0-9]+)*`
*   `[a-zA-Z0-9._-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9]+)*`

* * *

## 回答 #1

> 赞同：234
> 
> 时间：2012-05-29T18:43:02.283

`?=`和之间的区别在于`?!`前者要求给定的表达式匹配，而后者要求它**不**匹配。例如`a(?=b)`将匹配“ab”中的“a”，但不匹配“ac”中的“a”。而`a(?!b)`将匹配“ac”中的“a”，但不匹配“ab”中的“a”。

和之间的区别在于`?:`，`?=`它`?=`从整个匹配中排除了表达式，而`?:`只是不创建捕获组。所以例如`a(?:b)`将匹配“abc”中的“ab”，而`a(?=b)`只会匹配“abc”中的“a”。`a(b)`将匹配“abc”中的“ab”*并*创建包含“b”的捕获。

* * *

## 回答 #2

> 赞同：122
> 
> 时间：2012-05-29T18:38:48.770

```
?:  is for non capturing group
?=  is for positive look ahead
?!  is for negative look ahead
?<= is for positive look behind
?<! is for negative look behind 
```

请在此处查看：[http](http://www.regular-expressions.info/lookaround.html) ://www.regular-expressions.info/lookaround.html以获得非常好的教程和正则表达式前瞻示例。

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2016-08-15T22:20:14.630

为了更好地理解，让我们应用三个表达式加上一个捕获组并分析每个行为。

*   `()` **捕获组**- 括号内的正则表达式必须匹配并且匹配创建一个捕获组
*   `(?:)` **非捕获组**- 括号内的正则表达式必须匹配但不创建捕获组
*   `(?=)` **积极的前瞻**- 断言正则表达式必须匹配
*   `(?!)` **负前瞻**- 断言不可能匹配正则表达式

*让我们*申请`q(u)i`退出。匹配*q*并且捕获组匹配*u*。获取捕获组内的匹配并创建捕获组。所以引擎继续。并将匹配*i*。最后一次匹配尝试是成功的。*qui*匹配并创建了一个带有*u*的捕获组。 *`q`*`u` *`i`
`i`***

 ****让我们*申请`q(?:u)i`退出。同样，匹配*q*并且非捕获组匹配*u*。来自非捕获组的匹配被取走，但不创建捕获组。所以引擎继续。并将匹配*i*。最后一次匹配尝试是成功的。*qui*匹配。 *`q`*`u` *`i`
`i`***

 ****让我们*申请`q(?=u)i`退出。前瞻是肯定的，后面跟着另一个令牌。同样，匹配*q*并匹配*u*。但是来自前瞻的匹配必须被丢弃，因此引擎从字符串中退回到*u*。鉴于前瞻成功，引擎继续运行。但不能匹配*u*。所以这个匹配尝试**失败了**。 *`q`*`u` *`i` *`i`
`i`****

 ******让我们*申请`q(?=u)u`退出。前瞻是肯定的，后面跟着另一个令牌。同样，匹配*q*并匹配*u*。但是来自前瞻的匹配必须被丢弃，因此引擎从字符串中退回到*u*。鉴于前瞻成功，引擎继续运行。并且会匹配*u*。所以这个匹配尝试是成功的。*qu*匹配。 *`q`*`u` *`u` *`u`
`u`****

 ****让我们*申请`q(?!i)u`退出。即使在这种情况下，前瞻也是肯定的（因为不匹配），并且后面跟着另一个令牌。同样，匹配*q*并且不匹配*u*。来自前瞻的匹配必须被丢弃，因此引擎从字符串中退回到*u*。鉴于前瞻成功，引擎继续运行。并且会匹配*u*。所以这个匹配尝试是成功的。*qu*匹配。 *`i`
`q`*`i` *`u` *`u`
`u`****

 ***因此，总而言之，前瞻组和非捕获组之间的真正区别在于您是否只想测试存在或测试并保存匹配。

**但是捕获组很昂贵，因此请明智地使用它。**

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-05-29T18:42:00.527

尝试匹配`foobar`这些：

```
/foo(?=b)(.*)/
/foo(?!b)(.*)/ 
```

第一个正则表达式将匹配并将返回“bar”作为第一个子匹配 -`(?=b)`匹配“b”，但不使用它，将其留给后面的括号。

第二个正则表达式将不匹配，因为它期望“foo”后面跟着不同于“b”的东西。

`(?:...)`与 simple 具有完全相同的效果`(...)`，但它不会将该部分作为子匹配返回。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-05-09T12:44:02.300

理解断言的最简单方法是将它们视为插入正则表达式的命令。当引擎运行到一个断言时，它会立即检查断言所描述的条件。如果结果为真，则继续运行正则表达式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-24T23:18:42.380

这是真正的区别：

```
>>> re.match('a(?=b)bc', 'abc')
<Match...>
>>> re.match('a(?:b)c', 'abc')
<Match...>

# note:
>>> re.match('a(?=b)c', 'abc')
None 
```

如果你不关心“？：”或“？=”之后的内容，“？：”和“？=”是一样的。两者都可以使用。

But if you need those content for further process(not just match the whole thing. In that case you can simply use "a(b)") You have to use "?=" instead. Cause "?:"will just through it away.*****************

# javascript - 使用 Javascript 和 mootools 附加到动态创建的 div

> ID：10804736
> 
> 赞同：1
> 
> 时间：2012-05-29T18:34:15.693
> 
> 标签：javascript, dom, dynamic, dom-events, mootools

使用 mootools 我有一个 'builder' 类，它制造表单对象，动态创建 div。一些表单对象由几个不同的对象组成。例如，一个选择对象具有一个用于过滤选择器内容的文本框和一个用于保存选择的按钮。

在这种情况下，我希望过滤器框和按钮位于附加到整个表单对象的 div 的 div 中，以便具有“包装器”。

但是，我在附加到动态创建的表单对象的 div 时遇到问题。

加载 dom 后，调用 'builder' 类：

```
window.addEvent('domready', function()
{
builder = new Build();
}); 
```

Builder 这样创建一个新的 div

```
var div = document.createElement('div');
var div_id = 'the_div_id_for_my_form_object';

div.setAttribute('id', div_id); 
```

然后它创建表单对象，该对象将 div 作为其参数之一

```
var form_obj = superSelector(div); 
```

在 form_obj 构造函数内部，这个 div 被保存为一个成员变量，this.div = div。过滤器文本框以及按钮被创建。

这是我看到问题的地方。（由于过滤器文本框和按钮的问题相同，我将仅描述文本框的情况）

form_obj 的 div 被传递给过滤器文本框的构造函数。创建过滤器文本框时，它会为自己创建一个 div

```
 var div = document.createElement('div');
 var div_id = 'the_div_id_for_my_filter_box'; 
```

当我尝试将此 div 附加到 form_obj 的 div 时，我收到一个 js 错误，说我正在尝试附加到“null”

```
 var filterBox = new Class({
 initialize: function(name, form_obj)
 { 
   this.name = name;

   this.div = document.createElement('div');
   this.div.setAttribute('id', name);

   document.getElementById(form_obj.div).appendChild(this.div);
  } 
```

产量：

> “未捕获的 TypeError：无法调用 null 的方法‘appendChild’”

我不知道如何解决这个问题。我觉得我想附加的 div 在我尝试附加到它时并不存在。但是，我看不到生成一个事件的方法，它告诉我它何时确实存在，以便我可以将任何“子”div 的构建推迟到那时

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T21:30:23.413

对。你做的几件事不是mootoolsy。

```
var div = document.createElement('div');
var div_id = 'the_div_id_for_my_form_object';

div.setAttribute('id', div_id); 
```

应该：

```
var div = new Element('div', {
    id: 'the_div_id_for_my_form_object'
}); // or even new Element('div#foobar'); 

div.setAttribute('id', div_id); -> div.set('id', div_id); 
```

然后附加到dom：

```
document.getElementById(form_obj.div).appendChild(this.div); 
```

为什么？你想做什么？抓取一个元素并添加到内存中的 div 中？

```
document.id(form_obj.div).inject(this.div); 
// if this element exist, it will be moved as a child to the new div, not safe
// you really ought to rewrite to:
var el = document.id(form_obj.div);
el && el.inject(this.div); 
```

请记住，此时此 div 尚未注入到 dom 中。

等等。阅读手册/api - 你总是可以使用本机 js，但这违背了使用为你修复问题的库的目的。

附带说明一下，做你正在做的事情并不容易，我目前正在和我的一个朋友（嗯，同事！）一起做一些事情`form-builder`（对于 mootools，AMD），它可以做你可能想做的事情，或多或少 - 输入类型、组、由值触发的无限依赖（在所有 el 类型上）、各种表单元素和自定义外观/感觉、验证器、默认值、占位符、自定义事件.. 模型/控制器类行为，默认值，服务器端数据/验证，每个输入数据（sessionStorage / window.name）持久化

使用 AMD builder manifests 创建，支持版本控制、分页和语言，通过 twitter 引导标记和元素以及通过主题标签的单页 restful 应用程序......基本上，这确实是一项艰巨的任务。

如果我们决定开源它（我希望我们可以），并且人们有兴趣，谁知道 - 你几乎可以构建交互式测试、调查猴子、快速表单、复杂表单等东西......它的可扩展性和灵活性。希望我们完成它......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T19:13:19.410

尝试将“form_obj”参数发送到 getElementById 而不是 div 本身。该错误似乎表明当前采用的方法无法在 DOM 中找到 div。getElementById 将目标 div 的 id 属性作为字符串。

例如

```
document.getElementById(form_obj).appendChild(this.div); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T19:30:21.400

`getElementById`只接受一个**[字符串参数](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-getElBId)**。它返回`null`是因为您将一个元素的引用传递给该方法。
我建议你摆脱`getElementById`. 只需使用您已经拥有的引用`div`即可将元素附加到。

```
form_obj.div.appendChild(this.div); 
```

希望能帮助到你。

# c# - 微软正在将 null 转换为一种类型，我应该吗？

> ID：10804737
> 
> 赞同：8
> 
> 时间：2012-05-29T18:34:24.837
> 
> 标签：c#

我正在研究一些基于微软会员资格的定制身份验证代码。在查看 Profile 功能时，我查看了 System.Web.dll v4.0.30319 中的 ProfileBase 类。有一些类级别的变量被声明为一种类型，然后初始化为一个强制转换为该类型的空值。

例如，

```
private static Exception s_InitializeException = (Exception) null;
private static ProfileBase s_SingletonInstance = (ProfileBase) null;
private static Hashtable s_PropertiesForCompilation = (Hashtable) null; 
```

我通常不初始化具有类级别范围的变量。我想知道这是否是我应该做的事情或者它有什么目的。

感谢您的任何启发。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T18:46:23.273

您可能正在查看**反汇编**代码。这个转换可能是由反汇编程序添加的，它在源代码中不存在。

您绝对不必在代码中进行这种类型的转换。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-29T18:41:18.543

这没有任何意义；我相信`null`总是`null`如此——我当然想不出在基于 C 的语言中没有的任何例子。它可能是生成的代码，而不是像那样显式编写的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T18:44:52.053

该代码在说什么：初始化一个内存区域以保存一种异常类型，并将值 NULL 分配给该变量。由于 Exception 是引用类型，因此它可以为 null。将 NULL 转换为 Exception 是没有意义的。也许生成的代码？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T18:45:02.570

推荐的做法是在声明它们的地方初始化静态变量。

这是实际的 Microsoft 代码：

```
 /////////////////////////////////////////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////// 
    // Static data 
    private static SettingsPropertyCollection s_Properties = null;
    private static object s_InitializeLock = new Object(); 
    private static Exception s_InitializeException = null;
    private static bool s_Initialized = false;
    private static ProfileBase s_SingletonInstance = null;
    private static Hashtable s_PropertiesForCompilation = null; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-29T19:19:33.710

演员表由您的反编译器生成 - “官方”源有`null`，但没有演员表。我认为添加演员表没有任何好处。

> 我通常不初始化具有类级别范围的变量。我想知道这是否是我应该做的事情或者它有什么目的。

（`null`在原始来源中）似乎主要*是*一种风格。由于在声明中初始化静态字段通常更容易，因此添加它`null`会增加一些清晰性，即故意将其保留为未初始化。它还可以通过 FXCop 或类似的风格指南检查。

# php - PHP SQL 卫生 VS 准备好的语句

> ID：10804740
> 
> 赞同：4
> 
> 时间：2012-05-29T18:34:58.093
> 
> 标签：php, sql

快一个。

我正在将使用 mysql 的旧 Web 应用程序迁移到 mysqli。我曾经使用我编写的自定义清理功能来防止 SQL 注入：

```
 function sani($text=""){
    if (!is_array($text)) { 
        $text = str_replace("<", "&lt;", $text); 
        $text = str_replace(">", "&gt;", $text); 
        $text = str_replace("\"", "&quot;", $text); 
        $text = str_replace("'", "&#039;", $text); 
        return $text; 
    } 
} 
```

他们的方式我曾经使用这个：

```
mysql_query("SELECT * FROM `table` WHERE `username` = '" . $sani($userinput) . "'"); 
```

基本上它所做的只是更改可用于注入 html 编码的符号。到目前为止它工作得很好，但是由于我正在迁移到 mysqli，**我想知道准备好的语句是否比这个函数更安全。**

另外，我已经阅读了很多关于准备好的和未准备好的语句之间的速度差异，真的那么明显吗？我每秒大约进行一百次查询，所以我怀疑我会受到很大影响吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T18:41:47.870

是的，prepared statements 肯定会比这个函数更安全，而且当你从数据库中取回数据时，它们还有一个额外的好处，那就是不必对数据进行解码。顺便说一句，即使对于旧的 mysql 库，你真的应该依赖`mysql_real_escape_string`而不是你定制的卫生功能:)

准备好的语句可以比未准备的语句快得多，并且在典型的使用情况下，即使您“只是”每秒执行 100 次查询，您也会从中受益。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T19:01:46.317

准备好的语句的安全性实际上源于在**准备好的语句中，*查询*和*数据*是分开发送的**。这就是为什么不可能执行^第一种类型的 SQL 注入（^(第二种)类型（或间接）注入是由数据库中的数据连接查询引起的注入）。

您的“保护功能”的问题在于它并未涵盖所有情况。如果您想了解有关该问题的更多信息，您可以阅读 [Slides From Recent Presentations on SQL Injection](http://blog.ircmaxell.com/2011/06/slides-from-recent-presentations-on-sql.html)或 slides on [SQL injection: Not only AND 1=1](http://www.slideshare.net/inquis/sql-injection-not-only-and-11)中的幻灯片。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T18:41:32.850

永远不要那样做。

使用准备好的语句按原样保存数据，这样即使数据库中包含恶意代码，您的数据库中也始终拥有原始数据，没问题。事实上，你想看看他们是如何试图入侵你的，或者其他什么。

只需在输出不安全（用户提交的）数据时创建一个简单的过滤器来替换不需要的字符，例如 < > 等。

# jquery - 使用 jquery 处理 xml 数据类型

> ID：10804742
> 
> 赞同：1
> 
> 时间：2012-05-29T18:35:15.107
> 
> 标签：jquery

我正在使用 jquery Get 请求从 Web 服务中检索数据。Web 服务向我发送回 xml 数据，例如`<?xml version="1.0" encoding="utf-8"?> <boolean xmlns="http://tempuri.org/">false</boolean>` 如何获取这些数据并解析它，如果有多个节点怎么办？我可以将其转换为 json 或更易读且易于解析的内容吗？谢谢你的帮助

```
$.ajax({
                    type: "Get",
                    method: "GET",
                    url: "https://domain/MainService.asmx/LoginMobile",
                    contentType: "application/json; charset=utf-8",
                    data: parameter,
                    dataType: "jsonp" 
```

编辑：这是我的电话。我想接收 json 数据，但这将以 xml 形式返回。

```
 [WebMethod(EnableSession = true)]
    public bool LoginMobile(string userName, string password)
    {
        return Users.GetLoginInfo(userName, password);
    } 
```

编辑：网络服务方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:38:20.283

如果你想要 json 那么最好的方法是配置服务器发送`json`

您可以使用[`.parseXML`](http://api.jquery.com/jQuery.parseXML/)

```
$.get("/path.php",function(data){
 var $xml = $(data).parseXML();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T18:37:17.343

只需[`parseXml`](http://api.jquery.com/jQuery.parseXML/)在 jQuery 中使用，就可以像使用 HTML 一样使用选择器和函数。

**编辑：**根据您的更新，您的 ajax 调用似乎未设置为接收 XML，而是设置为接收 JSON。试试这个：

```
$.ajax({
    type: "Get",
    datatype: "xml",
    url: "https://domain/MainService.asmx/LoginMobile",
    data: parameter,
    success: function (result) {
        var xml = $.parseXML(result);
        //now do whatever with your XML
    }
}); 
```

# python - OSError: [Errno 2] GitPython 上没有这样的文件或目录

> ID：10804744
> 
> 赞同：0
> 
> 时间：2012-05-29T18:35:19.107
> 
> 标签：python, git, gitpython

我正在使用 GitPython 将远程存储库获取到我的机器。以下代码在我的 Ubuntu 12.04 上运行良好，但在我的 amazon ec2 上，在 Ubuntu 11.10 服务器上，我收到 OSError: [Errno 2] No such file or directory 错误。

```
 repo = git.Repo.init(fs_path)
    origin = repo.create_remote('origin',repo_url)
    origin.fetch()
    origin.pull(origin.refs[0].remote_head) 
```

当我在脚本中运行该块时，我没有收到任何错误消息。但是当我在交互式 shell 上尝试这些步骤时，我得到了这个堆栈跟踪：

```
>>> import git
>>> repo = git.Repo.init("/var/wwww/dir/subdir/tmp/12")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/GitPython-0.3.2.RC1-py2.7.egg/git/repo/base.py", line 656, in init
    output = git.init(**kwargs)
  File "/usr/local/lib/python2.7/dist-packages/GitPython-0.3.2.RC1-py2.7.egg/git/cmd.py", line 227, in <lambda>
    return lambda *args, **kwargs: self._call_process(name, *args, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/GitPython-0.3.2.RC1-py2.7.egg/git/cmd.py", line 456, in _call_process
    return self.execute(call, **_kwargs)
  File "/usr/local/lib/python2.7/dist-packages/GitPython-0.3.2.RC1-py2.7.egg/git/cmd.py", line 335, in execute
    **subprocess_kwargs
  File "/usr/lib/python2.7/subprocess.py", line 679, in __init__
    errread, errwrite)
  File "/usr/lib/python2.7/subprocess.py", line 1239, in _execute_child
    raise child_exception
OSError: [Errno 2] No such file or directory
>>> 
```

但是我的本地机器上没有这样的问题。不知道出了什么问题。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:08:50.427

错误来自`subprocess`模块。这表明它`git`要么未安装在您的 EC2 实例上，要么位于不在您的`PATH`环境变量中的位置。

请注意，这`GitPython`取决于`git`命令行工具。如果您想要一个用于与 Git 存储库交互的本机 Python 模块，请查看[dulwich](http://www.samba.org/~jelmer/dulwich/)。

# maven - 查看 Maven 工件上的 PGP 签名

> ID：10804746
> 
> 赞同：8
> 
> 时间：2012-05-29T18:36:02.150
> 
> 标签：maven, pgp, gnupg

我想从 Central 手动验证 Maven 工件上的 PGP 签名，但我不知道从哪里开始。

我在 Apache's [Guide to uploading artifacts to the Central Repository](http://maven.apache.org/guides/mini/guide-central-repository-upload.html "将工件上传到中央存储库的指南")上看到它说“我们要求您为所有工件提供 PGP 签名”。

我看到 Sonatype 的 Nexus Pro 软件在[一篇关于 Nexus Pro 功能的博客文章中提到了验证签名](http://www.sonatype.com/people/2009/04/nexus-133-introduces-automatic-signature-verification-to-maven-artifacts/ "Nexus 1.3.3 发布：PGP 验证/改进界面")

但我找不到任何有关如何手动获取签名的信息。我对 GPG 足够熟悉，可以进行实际验证。如何`.asc`在 Central 中获取工件的文件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-06-12T18:02:44.637

如果要自动检查项目依赖项的所有 pgp 签名，可以尝试执行：

```
mvn org.simplify4u.plugins:pgpverify-maven-plugin:check 
```

此插件下载所有签名 (.asc) 文件和需要 pgp 密钥来进行签名检查。

中还有另一个目标`show`，`pgpverify-maven-plugin`因此如果您只想查看签名，则可以执行：

```
mvn org.simplify4u.plugins:pgpverify-maven-plugin:show -Dartifact=junit:junit:4.12 
```

您可以在网站上找到有关此插件的更多信息： [https ://www.simplify4u.org/pgpverify-maven-plugin/](https://www.simplify4u.org/pgpverify-maven-plugin/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T22:07:13.170

您可以简单地下载这些工件 (.asc) 文件并手动检查签名。Maven Central 可以通过 http 访问，如下所示：

```
http://search.maven.org/remotecontent?filepath=com/soebes/smpp/smpp/0.4/smpp-0.4.pom.asc 
```

# javascript - Cors XmlHttpRequest 和响应

> ID：10804748
> 
> 赞同：0
> 
> 时间：2012-05-29T18:36:10.027
> 
> 标签：javascript, xmlhttprequest, cross-domain, cors

## 任务描述

我正在创建一个具有客户端/服务器架构的程序。服务器是运行在用户浏览器中的 javascript 脚本，客户端是运行在用户本地机器上的应用程序。该脚本向 127.0.0.1 上的端口发送 GET 请求；以 2000 年为例。客户端读取消息，执行一些操作，然后将回复发送回服务器。

## 问题描述

这种类型的交互被认为是跨域资源共享。我已经阅读了[这里](https://developer.mozilla.org/en/http_access_control)的材料并编写了我的程序以使用适当的 cors 标头消息来响应请求。不幸的是，我似乎收到了错误消息：

`XMLHttpRequest cannot load http://127.0.0.1:2000/?Command=test&Parameters=1234\. Origin http://127.0.0.1 is not allowed by Access-Control-Allow-Origin.`

## 完整的 Http 交换

```
GET /?Command=test&Parameters=1234 HTTP/1.1
Host: 127.0.0.1:2000
Connection: keep-alive
Origin: http://127.0.0.1
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.11 (KHTML, like Geco) Chrome/17.0.963.79 Safari/535.11
Accept: */*
Referer: http://127.0.0.1/test/main.php
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3

HTTP/1.1 200 OK
Server: Custom-Gnat-Client-v1.0
Access-Control-Allow-Origin: *
Origin: http://127.0.0.1
Content-Length: 12
Keep-Alive: timeout=2, max=100
Connection: Keep-Alive
Content-Type: text/plain

Success 
```

## 相关代码

在 main.js 中：

```
var Is_IE                = window.XDomainRequest ? true : false;
var Cross_Domain_xmlhttp = Create_Cross_Domain_Request();

function Create_Cross_Domain_Request(){
  var request;
  if(Is_IE)
    request = new window.XDomainRequest();
  else{
    if(window.XMLHttpRequest){
      request=new XMLHttpRequest();
    } else {
      request=new ActiveXObject("Microsoft.XMLHTTP");
    }
  }
  return request;
}

...

var URL = "http://127.0.0.1:2000/"+"?Command="+Command_String+"&Parameters=" +Parameters;
if (Cross_Domain_xmlhttp){
  if(Is_IE){
    Cross_Domain_xmlhttp.onload=function(){
      console.log(Cross_Domain_xmlhttp.responseText);
    }
    Cross_Domain_xmlhttp.open("GET", URL, true);
    Cross_Domain_xmlhttp.send();
  } else {
    Cross_Domain_xmlhttp.open('GET', URL, true);
    Cross_Domain_xmlhttp.onreadystatechange=function(){
      if (Cross_Domain_xmlhttp.readyState==4 && Cross_Domain_xmlhttp.status==200){
        console.log(Cross_Domain_xmlhttp.responseText);
      }
    }
    Cross_Domain_xmlhttp.send();
  }
} else {
  alert("The browser does not support XDomainRequest or XmlHttpRequest");
} 
```

客户端代码目前不相关，但如果需要，我会发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:10:25.393

服务器响应中不应有任何`Origin: http://127.0.0.1`内容，因为它是请求标头。

为什么不返回`Access-Control-Allow-Origin: http://127.0.0.1`而不是返回`*`？

# selenium - Selenium 脚本无法在 Jenkins 中运行

> ID：10804751
> 
> 赞同：2
> 
> 时间：2012-05-29T18:36:16.163
> 
> 标签：selenium, selenium-webdriver

我有一个 selenium 脚本，可以在本地运行，也可以在构建机器的命令行上运行。但是当我运行 Jenkins 时，我得到了不同的结果。（这是[较早帖子](https://stackoverflow.com/questions/10799875/press-enter-key-in-selenium-script/10799927#10799927)的延续- 作为一个新问题提出，因为我*认为*这是一个不同的问题）

我的意图是输入字段数据，按 Enter，按 Tab 离开字段/触发 javascript - 这将导致出现一个新字段（formOrBundleType）。

```
 selenium.keyPress("program", "\10");
    selenium.type("program", "MIC HOMEOWNERS");
    selenium.keyPress("program", "\10");

    // slight hack - tabbing out of this field forces the form
    // to repaint, exposing the formOrBundleType field
    selenium.keyPressNative(java.awt.event.KeyEvent.VK_TAB + "");

    // now grab the exposed field and start the data entry again
    selenium.keyPress("formOrBundleType", "\10");
    selenium.type("formOrBundleType", "HO3 ENHANCED"); 
```

在詹金斯，我得到：

```
[junit] 13:59:48.761 INFO - Command request: type[program, MIC HOMEOWNERS] on session 44eb
[junit] 13:59:54.761 INFO - Got result: OK on session 44eb
[junit] 13:59:54.776 INFO - Command request: keyPress[program, ] on session 44eb
[junit] 14:00:00.776 INFO - Got result: OK on session 44eb12edb47f4a14aa2f3c7733f2ff52
[junit] 14:00:06.776 INFO - Command request: keyDownNative[9, ] on session 44eb
[junit] 14:00:06.776 INFO - Creating Robot
[junit] 14:00:06.792 INFO - Got result: OK on session 44eb
[junit] 14:00:13.105 INFO - Command request: keyPress[formOrBundleType, ] on session 44eb
[junit] 14:00:19.105 INFO - Got result: ERROR: Element formOrBundleType not found on session 44eb 
```

我已经更改了各种时间设置，以查看问题是否与 javascript 调用/绘制表单的返回有关。有没有其他人遇到过这个？

# c# - 使用 LINQ to SQL、动态创建数据库和创建安装应用程序的桌面应用程序

> ID：10804752
> 
> 赞同：2
> 
> 时间：2012-05-29T18:36:25.533
> 
> 标签：c#, wpf, sql-server, linq, installation

我正在构建一个自动安装在客户系统上的应用程序，该应用程序正在使用 WPF 为可视界面开发，我创建了一个名为 Bussiness 的新 Windows 窗体应用程序，我将所有与数据管理相关的东西都放在其中，所以我决定要创建一个 LINQ to SQL 类，在开发阶段一切正常，但是当我为我的应用程序构建一个安装项目时，我对如何处理数据库，特别是我的 LINQ to SQL 配置的所有事情感到困惑；因为当我在未安装数据库和 SQL Server 的“干净”计算机上安装应用程序时，应用程序甚至会启动 ='(

所以，请帮助我。我一直在调查，有人说我的回复与 .mdf 文件有关，但我真正想要的是作为我安装的一部分，数据库将在计算机上创建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:19:38.060

如果是的话，您是否使用 SQL Server，在每台计算机上安装它会很痛苦，尤其是在许可证方面不确定它是否合法。

如果不需要从外部或其他应用程序访问此数据库，则应使用 SQL Server Compact。

例如，它是专为桌面应用程序设计的嵌入式版本，您可以在安装应用程序的同时轻松部署它。

这里有更多信息：http: [//msdn.microsoft.com/en-us/data/ff687142.aspx](http://msdn.microsoft.com/en-us/data/ff687142.aspx)

它肯定会与 LINQ to SQL 一起使用，因此在代码方面，除了连接字符串外，您无需更改任何内容。

# mysql - MySql 获取子选择的总和作为父选择的列

> ID：10804758
> 
> 赞同：0
> 
> 时间：2012-05-29T18:36:46.640
> 
> 标签：mysql, subquery, sql-subselect

这就是我想要做的。根据特定标准从表中获取值的总和，并将此返回作为父选择的列，但我无法理解执行此操作的最佳（即可行）方法。我试过了

```
SELECT
sum(count(distinct(frsrvdate)))
FROM webusers.tblQAuditClaims qac inner join webusers.tblQAuditDetails qad using (claimId)
where qac.auditdate between '2012-01-01' and '2012-03-31'
and IsResubmitted = 0
and qad.errorflag = 0
and qac.errorflag = 0
which throws an invalid group function. 
```

开始认为我的方法走错了兔子洞。关于我所缺少的任何建议？

我已将其缩减为子选择部分，但仍然遇到有关如何获得计数总和的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:40:35.053

在第一个查询中，您有一个额外的 )。

更正了一个——

```
sum(SELECT count(distinct(FrSrvDate))
     FROM webusers.tblQAuditClaims qac Left Join webusers.tblQAuditDetails qad using     (claimId)
     where qac.auditdate between '2012-01-01' and '2012-03-31'
     and IsResubmitted = 0
     and qad.errorflag = 0
     group by tracenumber) 
```

# regex - 从 data.frame 名称中删除空格

> ID：10804760
> 
> 赞同：1
> 
> 时间：2012-05-29T18:36:51.150
> 
> 标签：regex, r

我有一个使用[sqlQuery](http://rgm2.lab.nig.ac.jp/RGM2/func.php?rd_id=RODBC%3asqlQuery)拉入 R 的数据框。我想从 data.frame 的名称中去掉所有的空格和特殊字符，但是 sqlQuery 没有`strip.white=TRUE`选择，所以我想用正则表达式来做这件事。

这适用于空白：

```
myNames <- c("Sample Selection Reason", "My ID")
myNames <- gsub('\\s+', '.', myNames ) 
```

我可以对特殊字符做些什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T18:47:29.000

您可能会喜欢`make.names()`一个基本的 R 函数，它“从字符向量中生成 [s] 语法上有效的名称”。

```
myNames <- c("Sample Selection Reason", "My ID")
make.names(myNames)
# [1] "Sample.Selection.Reason" "My.ID" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T18:45:50.253

data.frame(...) 更正名称。例如

```
df.badnames <- data.frame(`1-2` = 1:2, check.names=FALSE)
df.fixed <- data.frame(df) 
```

# mobile - Phonegap 是如何工作的？

> ID：10804772
> 
> 赞同：17
> 
> 时间：2012-05-29T18:37:47.847
> 
> 标签：mobile, cordova, hybrid

我们使用 PhoneGap 来使用移动设备的本机功能。内部如何运作？我们如何能够从 JavaScript 方法访问 PhoneGap 的实现类？有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T14:50:01.440

我对 Cordova iOS 如何将消息传递给 WebView 做了一些深入研究。这是将消息从 iOS 传递到 JavaScript 的方法。

该类[`UIWebView`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)有一个名为 的方法`stringByEvaluatingJavaScriptFromString`。

如果您查看 iOS Cordova 项目中的一些文件，它们会将 JavaScript 作为要执行到该函数的字符串传递，例如[CDVPlugin.m](https://github.com/apache/incubator-cordova-ios/blob/master/CordovaLib/Classes/CDVPlugin.m#L152)。

我不知道 iOS 是编写一个新的 DOM 节点（类似`<script>alert('from iOS');</script>`）还是通过 Safari 中的一个特殊钩子执行 JavaScript。我相信后者，在这方面，上面引用的文档说：

> 每个顶级入口点的 JavaScript 执行时间限制为 10 秒。如果您的脚本执行超过 10 秒，则 Web 视图将停止执行该脚本。这很可能发生在代码中的随机位置，因此可能会导致意想不到的后果。施加此限制是因为 JavaScript 执行可能会导致主线程阻塞，因此当脚本运行时，用户无法与网页交互。
> 
> JavaScript 分配也限制为 10 MB。如果超过 JavaScript 的总内存分配限制，Web 视图会引发异常。

我不知道如果不对 UIWebView 的内部状态进行一些特殊访问，他们实际上是如何施加这些限制的，所以我怀疑他们只是在插入一个新的 DOM 节点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-29T18:42:19.087

我不完全确定，但[这里是信息教程](https://github.com/phonegap/phonegap)。这是一个很好的起点。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-29T20:37:25.607

源代码是公开可用的，因此可以检查它是如何实现的，这在每个平台上都是不同的，因此您无法获得涵盖所有操作系统的单一答案。在 iOS 上，它使用 UIWebView 完成，可以通过使用专有 url 方案强制更改浏览器位置来调用本机代码。此更改会导致调用本机代码中的方法，该方法可以检查 url 方案和传递的参数，然后执行一些相关处理。然后有一种在 iOS 中从 Objective-C 调用 Javascript 的方法，可以用来将结果传递回 Javascript 端。

整个详细过程太长，无法在此处的答案中描述。

当然，它在其他平台上的实现方式是不同的。

这种机制可以在 API 后面抽象出来，这样 PhoneGap 应用程序就不会意识到特定平台实现细节的差异。

为什么不在 PhoneGap 论坛上提问，或者如果您需要很多详细信息，请查看源代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T01:51:37.157

这也是一个很好的：http: [//blog.quadnode.com/2011/12/05/phonegap-how-does-it-work/](http://blog.quadnode.com/2011/12/05/phonegap-how-does-it-work/)

# ms-access - 尝试在 Access 2010 中打开表时出现“未定义变量”错误

> ID：10804775
> 
> 赞同：0
> 
> 时间：2012-05-29T18:37:53.900
> 
> 标签：ms-access, ms-access-2010

我有一个非常令人沮丧的问题。我正在尝试在 currentDB 中打开一个存在的表（我使用以下代码列出了所有表名：

```
Dim tbl As Object
For Each tbl In CurrentDb.TableDefs
    Debug.Print tbl.Name
Next tbl 
```

该代码可以毫无问题地打开另外两个表。（虽然我确实遇到了问题，但是当我将代码处理到一个新的子区域时，它似乎工作了？？）

我认为我的问题很容易通过修复/压缩数据库来解决，因为这似乎适用于我遇到的另一个表问题，但这个问题并没有屈服于该解决方案。

这是我的代码......

```
Dim db As DAO.Database
Dim rst As DAO.Recordset

Set db = CurrentDb

Set rst = db.OpenRecordset(“StkPrdSum”)

Do While Not rst.EOF
   debug.Print StkPrdSum![CurYear]
   rst.MoveNext
Loop 
```

当我尝试编译时会产生错误。我在引号中的表名 StkPrdSum 上收到“变量未定义”错误。

感谢任何能提供帮助的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T19:03:07.133

我没有时间对此进行测试，但我认为您在“debug.Print StkPrdSum![CurYear]”中对 StkPrdSum 的引用是错误的。

当您将 rst 声明为 openrecordset 时，您的 debug.print 应该在上面。

```
 Do While Not rst.EOF
       debug.Print rst![CurYear]
       rst.MoveNext
    Loop 
```

我希望这对你有所帮助，对我的英语感到抱歉。

# asp.net-mvc-3 - asp.net MVC 中的 HttpContext.Current NullReferenceException

> ID：10804776
> 
> 赞同：-1
> 
> 时间：2012-05-29T18:37:56.520
> 
> 标签：asp.net-mvc-3, httpcontext

我的应用程序中有 2 个 RAZOR 索引表。1 Form 在一个数据库“LocalDB”中创建记录，并在另一个数据库“Core DB”中更新相同的记录。另一个表单将记录从“CoreDB”同步到“LocalDB”。必须这样做，因为还有其他应用程序在“CoreDB”中创建记录。在我的本地数据库中，我将审计跟踪保留 4 列。CreateAt、CreatedBy、ModifiedAt、ModifiedBy。这些列为我提供了有关谁创建/修改了记录以及何时创建的信息。

我有一个带有静态函数的简单静态类，我让当前用户登录到我的 Web 应用程序

```
currentUser = HttpContext.Current.User.Identity.Name; 
```

这在我使用创建记录的表格 1 时有效。当我使用表格 2 时，尝试将记录从 COREDB 同步到 LocalDB，同一行会引发空异常。

你能告诉我为什么会这样吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:43:48.687

`HttpContext.Current != null && HttpContext.Current.User.Identity != null && HttpContext.Current.User.Identity.IsAuthenticated`在寻找之前检查`HttpContext.Current.User.Identity.Name`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T06:13:17.423

你没有在你的问题中解释你在哪里以及如何调用包含这一行的方法。您谈到了同步一些数据库。我非常怀疑您正在尝试`HttpContext.Current`在后台线程中使用，这显然是不可能的，因为后台线程中没有任何 HttpContext 。

如果不是这种情况，请确保用户在访问其名称之前已通过身份验证：

```
string currentUser = "";
if (HttpContext.Current.User.Identity.IsAuthenticated)
{
    currentUser = HttpContext.Current.User.Identity.Name;
} 
```

# eclipse - Eclipse CDT 索引器行为异常

> ID：10804779
> 
> 赞同：2
> 
> 时间：2012-05-29T18:38:04.197
> 
> 标签：eclipse, eclipse-cdt, indexer

我一直在与 Eclipse CDT 中的索引器作斗争。目前，我有类似于以下的代码，是的，这很简单：

```
#include <Othernamespace/Bar>

class Foo : public Othernamespace::Bar
{
public:
    Foo(const Othernamespace::Zip& env);
};

Foo::Foo(const Othernamespace::Zip& env)
: Othernamespace::Bar(env)
{ } 
```

`<Othernamespace/Bar>`解析头文件没有问题。`Othernamespace::Bar`作为父类解决没有问题。没有问题解决`Othernamsespace::Zip`。

但是，在`Foo`构造函数中，链式调用`Othernamespace::Bar`被标记为错误。如果我右键单击包含并检查代码，我可以清楚地看到`Bar`构造函数需要一个`const Zip& argument`.

更重要的是：我有另一个项目使用具有相同包含的相同框架，并且 Othernamespace::Bar 的索引很好，没有任何问题。为什么，哦，为什么我不能让这个索引？

同样，我在这里基本上是重用代码，在以前的使用中没有问题。我可以从编辑器中打开包含的文件，并在调用父构造函数时验证我的参数是否正确（并且我将索引器设置为在编辑器中打开的文件的索引）。

我已经尝试重建索引。我试过“刷新所有文件”。我尝试将索引大小的最大限制从 64 提高到 128MB（不是我认为我接近 64MB）。这些都没有任何区别。

我还注意到对继承类成员的其他调用被标记为未找到，这意味着我在这个类上所做的任何工作都只是错误标志。同样，我已经验证了包含的文件（已解析）包含这些方法声明。依然没有。

我项目中的其他文件也来自索引。它们一分钟会没事，但下次我打开它们时，它们都被标记为错误。我将重建索引，它会好一段时间，只是以后会再次发生。

我觉得我花在与索引器作斗争上的时间比完成工作的时间还要多，而且这不仅仅是令人沮丧的。有没有解决这些索引问题的建议？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:20:27.180

我不是 Eclipse 方面的专家，它是 Indexer，但和你一样，我已经和它斗争了很长时间。根据您提供的信息，您的问题可能是索引器中的错误。如果 Project > Properties > c/c++ Build > Settings 中的所有包含确实正确（我有一个问题，我将包含放在 C 区域而不是 C++ 区域中），那么您可以尝试删除“.index”文件夹从“/.plugins/org.eclipse.core.resources/.projects/yourProjectName”目录，然后从“... /Eclipse_Workspace/.metadata/.plugins/org.eclipse.cdt.core”中删除项目的 PDOM 文件. 确保在整个过程中关闭 Eclipse。然后启动它。在此之后，您需要重做您的包含。这对我有用，所以希望它可以帮助你。祝你好运。

# directx - HLSL 坐标系方向

> ID：10804783
> 
> 赞同：1
> 
> 时间：2012-05-29T18:38:14.713
> 
> 标签：directx, shader, hlsl

这个问题可能看起来很简单，但我找不到 HLSL 如何处理自己的坐标系。

我只想知道 (0,0) 在哪里（左上角或左下角），而且由于我是这些着色器概念的初学者，我无法自己推断

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T18:56:45.117

相信你想了解 DirectX 的坐标系。HLSL 是一种着色语言，并没有定义工作的坐标空间。

这里有几个链接可以帮助您入门。

1.  [坐标系](http://msdn.microsoft.com/en-us/library/windows/desktop/bb324490%28v=vs.85%29.aspx)
2.  [像素和纹理坐标系](http://msdn.microsoft.com/en-us/library/windows/desktop/cc308049%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T22:36:24.177

在顶点着色器中，您可以使用多个坐标系或空间...

通常你的顶点数据到达世界坐标......

然后顶点数据由WordViewProjection矩阵转换，从世界坐标转换为齐次投影坐标，这是顶点着色器中返回的值......

如果顶点在屏幕内，如果你将 x 和 y 坐标除以 w 分量，你会得到一个范围内的点（-1..1，-1..1）......我不确定但我认为 (-1,-1) 是左上角......你只需要测试它

您可以将两个三角形发送到图形卡，这些三角形代表屏幕角在此空间中的四边形 (-1,-1,0), (1,-1,0), (1,1,0), (-1, 1,0)，这样您就不需要通过任何矩阵来转换顶点数据。

你还没有解释你想做什么......但我想你想做一个后期处理......

如果是这种情况...您可以使用纹理坐标在像素着色器中工作...这样左上点将是（0,0），右下点将是（1,1）

在这里您可以找到代码和扩展说明：[http ://ploobs.com.br/?p=1092](http://ploobs.com.br/?p=1092)

# c# - 你能在 C# 中禁用 Ajax 手风琴的点击吗？

> ID：10804784
> 
> 赞同：2
> 
> 时间：2012-05-29T18:38:16.750
> 
> 标签：c#, ajaxcontroltoolkit, accordion, accordionpane

我的网站上有一个 ajax 手风琴，这个网站有用户角色：管理员、销售代表和客户。我的手风琴有 3 个窗格，如果用户的角色是 == 客户，我想禁用第二个和第三个窗格，因此他们无法打开它们。

如果这不可行，有没有办法隐藏窗格。在此页面上，我有一个开关案例，其中所有角色都设置了在第一个窗格中编辑项目的能力，因此我可以将所需的代码放入客户案例中。

如果有任何可以帮助的代码，我可以根据要求提供。如果有什么可以澄清的，我会尽我所能澄清任何事情。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:07:17.383

好吧，不确定是否禁用窗格的单击..但是如果您可以隐藏它们，请回答您的第二部分..您当然可以。

```
ajaxaccordionPane1.Visible = false; 
```

您想要隐藏的窗格名称是什么，然后是 visible=false;

# jquery - 带有 jQ uery 浮点数的多个时间图表

> ID：10804785
> 
> 赞同：0
> 
> 时间：2012-05-29T18:38:19.530
> 
> 标签：jquery, json, flot

我试图用 Flot 在一张图表上显示本月（图表 1）和上个月（图表 2）的访问者数量。我目前正在使用图表 1，但由于 x 轴（日期），我不确定如何与图表 2 重叠。

[JSON数据](http://dl.dropbox.com/u/1925679/json.txt)

当前工作代码：

```
$.getJSON('jsondata.txt',function(json){
    var visits = [json.visits];
    var options = {
        xaxis: {
            mode: "time",
        },
        grid: { hoverable: true, clickable: true },
        lines: { show: true },
        points: { show: true }
    }
    var plot = $.plot($('.chart'),visits,options);      
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T16:00:52.163

您需要在 flot 中探索 xaxes 数组/选项。从[API.txt](http://flot.googlecode.com/svn/trunk/API.txt)：

> 这是一个配置单个 x 轴和两个 y 轴的示例（我们可以将第一个 y 轴的选项留空，因为默认值很好）：

```
{
 xaxes: [ { position: "top" } ],
 yaxes: [ { }, { position: "right", min: 20 } ]   
} 
```

* * *

因此，在您的情况下，您可以指定如下内容，而不是定义`xaxis`：

```
xaxes: [  { mode: "time" }, { mode: "time" } ] 
```

然后您将需要系列对象而不仅仅是数组，并将每个对象分配给不同的轴：

```
var visits = { 
    data: json.visits,
    xaxis: 1
};
var prevVisits = { 
    data: json.prevVisits,
    xaxis: 2
}; 
```

`visits`最后，您将绘制而不是仅绘制`[visits,prevVisits]`

在此处查看实际操作：http: [//jsfiddle.net/ryleyb/SBrkW/](http://jsfiddle.net/ryleyb/SBrkW/)

# bamboo - Bamboo CI Server 可以配置为像 Jenkins 一样显示工作区吗？

> ID：10804787
> 
> 赞同：7
> 
> 时间：2012-05-29T18:38:32.687
> 
> 标签：bamboo

我想知道是否有一个面板显示正在运行的项目的源代码，因为 Jenkins CI 服务器有这个，所以我想知道 Bamboo 是否也有它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T03:47:57.657

使用 Bamboo，如果构建运行在与服务器相同的机器上，则可以从任何作业结果中浏览文件系统上的文件。

您想浏览源代码还是只想获取构建创建的文件？如果是后者，您可以使用[Artifacts](http://confluence.atlassian.com/x/DghTE)从工作目录中捕获任何文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-16T09:00:48.200

查看源代码和构建输出的唯一方法是登录运行构建的 Bamboo 代理。您可以从每个作业的日志的前两行获取您需要的信息：

```
simple  15-Apr-2015 18:28:52    Build My Projects - Foo - Build and Test #95 (MP-FOO-JOB1-95) started building on agent bamboo-slave1
simple  15-Apr-2015 18:28:53    Build working directory is /opt/bamboo/bamboo-agent-home/xml-data/build-dir/MP-FOO-JOB1 
```

因此，在上述情况下，您将登录到竹子-slave1 并

```
cd /opt/bamboo/bamboo-agent-home/xml-data/build-dir/MP-FOO-JOB1 
```

# php - 如何获取文件的物理路径？

> ID：10804789
> 
> 赞同：1
> 
> 时间：2012-05-29T18:38:42.957
> 
> 标签：php, file, path

我的客户已经迁移了他的服务器，服务器地址相同，但是内部文件夹结构发生了变化，我正在使用一个 PHP 函数，该函数需要文件的服务器路径

例如，网站地址是 www.example.com/file.php，我的函数使用如下路径：

```
require_once('/var/www/file.php'); 
```

有没有办法找出来？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-07-18T21:28:39.913

由于这是 Google 上的第一次点击，并且根据问题的精神，接受的答案是不完整的，这里是完整的答案。

* * *

`__FILE__`就像 John Conde 所说的那样是一个*神奇的常数*，但它只为您提供当前正在执行的 PHP 文件的物理路径。

`__DIR__`获取当前执行文件的目录。或者，您也可以使用`dirname(__FILE__)`

`$_SERVER['DOCUMENT_ROOT']`获取到 Web 根目录的物理路径，例如`/var/www/example.com/httpdocs`

例如，假设您的网站具有以下文件夹结构：

```
|-foo
|  |-bar
|     |-executing.php
|-biz
   |-required.php 
```

可以说`executing.php`是当前正在执行的文件并且您想要包含`required.php`. 你有几个选择。

```
//relative to the file
require __DIR__ . "/../../biz/required.php";
require dirname(__FILE__) . "/../../biz/required.php";

//relative to the web root
require $_SERVER['DOCUMENT_ROOT'] . "/biz/required.php"; 
```

当然，在任何这些示例中，您也可以使用`require_once`代替`require`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T18:39:37.217

使用[魔法常数`__FILE__`](http://php.net/manual/en/language.constants.predefined.php)

# css - LESS.app 以 100% 的 CPU 使用率运行

> ID：10804795
> 
> 赞同：1
> 
> 时间：2012-05-29T18:39:03.910
> 
> 标签：css, macos, less, cpu-usage

我运行 os x 10.6.8 直到现在，我一直在完美地使用 LESS.app 进行编译。现在，当应用程序开始编译 .less 文件时，会启动一个名为“node”的进程，其 CPU 使用率会上升到 100%。

我已经尝试卸载并重新安装该应用程序，但这没有任何效果。我不确定我能做些什么来造成这种情况。

有没有其他人遇到过这个问题，如果有，你有什么解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T02:34:06.327

你想更新 Codekit.app 吗？

[http://incident57.com/codekit/](http://incident57.com/codekit/)

> 至少在 2015 年之前，Less.app 将使用新版本的 Less.js 维护。但是，应用程序本身不会看到任何新功能。我专注于让 CodeKit 变得非常棒。CodeKit 是未来，所以你应该检查一下！

来自[http://incident57.com/less/](http://incident57.com/less/)

# powershell - 从 powershell 播放 Spotify

> ID：10804805
> 
> 赞同：3
> 
> 时间：2012-05-29T18:39:51.350
> 
> 标签：powershell, spotify

我和我的女朋友共享一个 Spotify 帐户。您可能知道只有一个人可以同时收听。这导致了无休止的“播放-暂停-战斗”。问题是我在工作中听Spotify，所以我没有时间点击播放超过15分钟，所以她赢了。

因此，当我面临重复性任务时，我想像往常一样做一个脚本。我在 powershell 中找到了一个名为[PSSpotify](http://archive.msdn.microsoft.com/PSSpotify)的 spotify 模块。在那里我可以打电话：

```
Invoke-Spotify -play 
```

但这实际上是-playpause，所以在我的循环中：

```
while ( $true ){ sleep 1; invoke-spotify -play } 
```

我每秒都会暂停我的曲目，这有点烦人。所以我的问题：

我可以运行命令来检查 spotify 是否正在播放吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T18:47:44.433

您的意思是要检查 Spotify 应用程序是否进程？

```
Get-Process -Name *spotify* 
```

这将告诉您 spotify 进程是否正在运行。我的意思是，如果进程正在运行，它将返回有关该进程的详细信息。

因此，您可以执行以下操作：

```
if (Get-Process -Name spotify) { #Do something } 
```

更新：如果您想知道 Spotify 是否正在播放，答案在 PSSpotify 模块中：

```
Get-SpotifyStatus 
```

这会告诉您 Spotify 当前是否正在播放歌曲

# r - 动态生成 R 图像

> ID：10804807
> 
> 赞同：0
> 
> 时间：2012-05-29T18:40:11.180
> 
> 标签：r

在名为 c:/files 的目录中更新了一堆文件。这些文件是包含 R ojects 的 R 数据文件。当我加载这些文件时，我会得到其中包含数据的不同对象。例如，如果我加载 opening.R 文件，我会得到诸如 opening.stock、opening.options、opening.bonds 等的对象。我喜欢加载每个 .R 文件并浏览它们并根据对象和创建图像它们作为文件名加上对象名.png。下面是我的代码，但它不是很有效。我可以加载文件并读取对象。但是当我尝试读取对象的内容时，它不起作用。任何想法，我做错了什么：

```
for (file in dir("c:\\files" ,pattern = "OPENING")){
load(file)

    for (object in ls()) {
        ## if I like to see the content of the oject
        ## I do this
        ### print(oject) 
        ### this does not work, it just prints oject, not the content of objects   
        png("file+ojbect.png")
        plot(object)
        dev.off()
    }
} 
```

我按照@Ben Bolker 的建议使用了get(oject)，但我现在有另一个问题。我有一个日期列，我必须将其转换为 as.Date 并对其进行排序，以便它绘制得很好，如下所示：

```
 x=as.data.frame(get(oject))
    x$Date<- as.Date(x$Date, format="%Y-%m-%d")
    x<- x[order(as.Date(x$Date, format="%Y-%m-%d")),] 
```

我收到此错误：

```
Error in as.Date.default(x$Date, format = "%Y-%m-%d") :
  do not know how to convert 'x$Date' to class "Date"
Calls: as.Date -> as.Date.default
Execution halted 
```

我仍然有问题。第一次迭代工作，但是当涉及到第二个文件时，它会窒息：

```
suppressMessages(library(ggplot2))
suppressMessages(library(gridExtra))
suppressMessages(library(timeDate))

    for (i in dir("c:\\tmp" ,pattern = "OPENNING")){
        setwd("C:/tmp") 
        load(i)
        print(i)
        Sys.sleep(5)
            for (object in ls()) {
                x<-data.frame(get(object))
                print(x)
                x$Date<-as.Date(timeDate(x$Date))      
                x[order(x$Date),] 
                png((openning.png",sep="")
                Plot(x)
                dev.off()
            }
    } 
```

错误：

```
Error in `$<-.data.frame`(`*tmp*`, "TimeStamp", value = numeric(0)) :
  replacement has 0 rows, data has 7
Calls: $<- -> $<-.data.frame
Execution halted 
```

如果您没有任何意见，请不要对我的帖子投反对票。我该怎么问这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:36:40.830

试试这个日期问题：

```
 x=as.data.frame(get(object))
    x$Date<- as.Date(x$Date, format="%Y-%m-%d")
    x<- x[order(x$Date)),]   
 # if the conversion was successful a Date class object can be ordered 
```

# string - 使用 Addprefix 函数使字符串无法与另一个字符串进行比较

> ID：10804809
> 
> 赞同：0
> 
> 时间：2012-05-29T18:40:17.903
> 
> 标签：string, syntax, makefile, escaping, gnu-make

所以，我有以下代码：

```
OBJ := $(addprefix 'obj_', $(basename $(notdir /build/common.mk))) 
```

**所以现在 OBJ1 是“obj_common”**

```
ifeq ($(OBJ),obj_common)
    @echo equal (**don't know how to format indent in this website..assume there is.**)
endif 
```

**ifeq 无法将 $(OBJ) 与 obj_common 进行比较，至少它没有回显...**

（但是，如果我摆脱 addprefix 功能如下：）

```
OBJ := $(basename $(notdir /build/common.mk)) 
```

**所以现在OBJ1是“常见的”**

```
ifeq ($(OBJ),common)
    @echo equal
endif 
```

**此代码会回显，这意味着它们可以比较并且相等。**

我需要引用变量`$(OBJ_common)`（我有一个这种变量的大列表，所以我不能手动手动输入字符串），但是现在 addprefix 函数使这个字符串不是字符串......谁能帮我解决问题？如果我的问题不清楚，请告诉我。非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:20:20.667

好吧，错误在以下语句中：

> ```
> OBJ := $(addprefix 'obj_', $(basename $(notdir /build/common.mk)))
> so now OBJ1 is "obj_common" 
> ```

事实上，因为您在 . 的第一个参数中使用了`OBJ1`引号。`'obj'_common``addprefix`

因此，如果没有引号，它应该可以正常工作：

```
OBJ := $(addprefix obj_, $(basename $(notdir /build/common.mk))) 
```

## 提示

用于调试脚本的用途[`warning`和函数：`error`](http://www.gnu.org/software/make/manual/make.html#Make-Control-Functions)

```
OBJ := ...
$(warning so now OBJ1 is [$(OBJ1)]) 
```

# spring - Spring Roo：查找器在 url 中放置无效的日期格式

> ID：10804810
> 
> 赞同：0
> 
> 时间：2012-05-29T18:40:22.010
> 
> 标签：spring, spring-mvc, spring-roo

我有一个 Spring Roo mvc 项目，带有一个名为 WorkOrder 的模型。我使用 Roo shell 为这个模型生成了两个查找器：findWorkOrdersByDateCompletedEquals 和 findWorkOrdersByDateCompletedBetween。

问题：当我使用 findWorkOrdersByDateCompletedBetween 搜索时，url 中的 minDateCompleted 和 maxDateCompleted 参数格式错误（S-格式）

```
.../workorders?find=ByDateCompletedBetween&minDateCompleted=2012-05-08&maxDateCompleted=2012-05-31 
```

这是调试日志中的错误：

```
Failed to convert from type java.lang.String to type 
@org.springframework.web.bind.annotation.RequestParam
@org.springframework.format.annotation.DateTimeFormat java.util.Date for value '2012-05-15'; 
```

有趣的是 findWorkOrdersByDateCompletedEquals 工作得很好，并生成这样的 url：

```
.../workorders?find=ByDateCompletedEquals&dateCompleted=May+30%2C+2012 
```

是什么决定了这些 URL 是如何生成的？两个查找器之间的代码几乎相同，为什么它们会生成不同格式的日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:47:31.510

我发现了真正的问题，它看起来像是 Spring roo 的一个错误。控制器 .aj 文件中有一个 Roo 没有更新的方法：

```
void addDateTimeFormatPatterns(Model uiModel) {
    uiModel.addAttribute("workOrder_datecompleted_date_format", DateTimeFormat.patternForStyle("M-", LocaleContextHolder.getLocale()));
    uiModel.addAttribute("workOrder_maxdatecompleted_date_format", DateTimeFormat.patternForStyle("M-", LocaleContextHolder.getLocale()));
    uiModel.addAttribute("workOrder_mindatecompleted_date_format", DateTimeFormat.patternForStyle("M-", LocaleContextHolder.getLocale()));
} 
```

Roo 自动将“workOrder_datecompleted_date_format”属性放在那里，但我必须自己推入方法并添加 maxdatecompleted 和 mindatecompleted 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:26:41.223

我发现解决它的方法很肮脏..：P

只需更改您在
**findWorkOrdersByDateCompletedBetween.jspx中的字段的 dateTimePatern 属性**

到您在
**findWorkOrdersByDateCompletedEquals.jspx中的那个**

就我而言，它类似于
field:datetime dateTimePattern="${ **tramite_maxfecha_date_format** }" [...]

我将其更改为
字段：datetime dateTimePattern="${ **tramite_fecha_date_format** }"

# c++ - 表示位在数组中表示的旋转

> ID：10804813
> 
> 赞同：3
> 
> 时间：2012-05-29T18:40:44.303
> 
> 标签：c++, binary

我有一系列位，由指针表示。

```
Bit* bits[32]; 
```

现在我需要实现二进制右旋转运算符。我知道第一部分是相同数量的右移，它处理所有没有环绕的位，但我不确定如何处理那些环绕的位。

如何确定最终结果中哪些位最终位于哪些位置？

到目前为止，我有

```
ExpressionHolder rotate(unsigned int other) const {
    ExpressionHolder out;
    out.e = new Expression;
    for(int i = 0; i < (32 - other); i++) {
        out.e->bits[i] = e->bits[i + other];
    }  
    for(int i = (32 - other); i < 32; i++) {
        out.e->bits[i] = e->bits[31 - i];
    }
    return out;
} 
```

它是否正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T19:23:04.470

[`std::rotate_copy`](http://en.cppreference.com/w/cpp/algorithm/rotate_copy)应该做的伎俩

```
ExpressionHolder rotate( ExpressionHolder const& in, std::size_t count )
{
  ExpressionHolder out;
  out.e = new Expression();

  std::rotate_copy( in.e->bit, in.e->bit + 32 - count, in.e->bit + 32, out.e->bit );
  return out;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T19:04:16.697

量子力学规定比特始终处于 1 和 0 的叠加状态。因此，在查看 *e.bits[i] 之前，我们永远无法确定指针的实际位值。

但后来我们看起来直截了当

```
for(int i = 0; i < 32; i++)
     out.e->bits[i] = e->bits[(i + other) %32]; 
```

应该做的伎俩。

# javascript - 使用 jQuery Deferred 多次发布表单

> ID：10804817
> 
> 赞同：1
> 
> 时间：2012-05-29T18:40:50.400
> 
> 标签：javascript, jquery, jquery-deferred

我最近在 jQuery 中使用 $.Deferred() 进行了一些测试并得到了一个问题。虽然 deferred 和 promise 对于只打算运行一次的 ajaxcall 来说非常有用，但我也有一个表单用于添加需要多次运行 ajax 的新用户。现在这会随着延迟/承诺的二进制（ish）状态而崩溃，因为一旦它们被解决或拒绝，它将保持该状态。所以我的问题是：

-我可以将 deferred 用于将被多次调用的任务吗？- 如果可能，是否建议为此使用 deferred 或者我应该坚持使用旧方法，只使用 $.ajax 的成功/错误回调？

这是我为发布表单而收集的一些代码，一次效果很好，但不是多次。

```
var submittingUser = new $.Deferred();
var savingUser = submittingUser.pipe(function(data) {
    return $.post('ajax.php', data);
});

$("#add_new_user").click(function() {
    var data = $("#add_user_form").serialize();
    submittingUser.resolve(data);
    return false;
});

savingUser.then(function() {
    //Success
}, function() {
    //Failed
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T18:53:28.447

以这种方式使用 deferred 是没有意义的。一个 deferred 代表一个动作；您不能将其用作事件发射器。当您启动一个异步操作时使用延迟，并且想要在该操作成功或失败时执行某些操作。

`$.post()`返回一个promise（实际上它返回一个jqXHR实例，但是它实现了promise接口），所以你可以做`$.post(...).fail(handleFailure).done(handleSuccess)`. 但是您不能在每次发生某些事情时使用 deferred 来运行某些代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T18:53:52.427

延迟对象只有一次设计，即使在延迟已解决并触发它们之后，它也允许添加回调。

从您的代码中，似乎并不清楚为什么您不能：

```
$("#add_user_form").submit( function(e){
    e.preventDefault();
    $.post( "ajax.php", $(this).serialize() ).then( function(){

    }, function() {

    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-03T14:57:08.623

我知道这是一个老话题，以前的答案是原始发布者问题的完美解决方案，但我只是遇到了尝试多次解决延迟对象的相同一般问题，所以我想分享一个解决方案。

即使以下是不可能的：

```
var d = $.Deferred();
d.done(function(text){
   alert('resolved ' + text);
});
d.resolve('Once'); // prints resolved once
d.resolve('Twice'); // this does nothing as done is only fired once 
```

您可以通过使用 jQuery Deferred 对象的进度/通知功能来实现完全相同的效果。做就是了：

```
var d = $.Deferred();
d.progress(function(text){
   alert('resolved ' + text);
});
d.notify('Once'); // prints resolved once
d.notify('Twice'); // prints resolved twice 
```

通过这种方式，您的延迟对象永远不会真正解决，但它会让您触发尽可能多的异步事件调用。也许以这种方式解决问题并不是最好的软件设计，但我发现它对我刚刚遇到的情况很有用。

# makefile - Makefile 回调

> ID：10804819
> 
> 赞同：0
> 
> 时间：2012-05-29T18:40:55.767
> 
> 标签：makefile

我的 Makefile 中有以下内容可以查看我的咖啡脚本和手写笔文件的更改。

```
dev:
  @make watchCoffeescript
  @make watchStylus
  @nodemon server.coffee

watchCoffeescript:
  @coffee -wcl public/ &

watchStylus:
  @find public -name '*.styl' -type f | xargs stylus --watch --compress & 
```

我遇到的问题是用于查看和编译咖啡脚本和手写笔文件的打印语句位于 nodemon 命令之后。一切仍然正常，但在我的 nodemon 命令执行之前显示这些打印语句会很好，以实现视觉目的。有没有办法让打印语句按顺序显示？我知道我可以在命令之间插入类似“@sleep 2”的东西，但希望有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T21:26:06.597

您可以省略与号。

或者您可以编写一个更~~理智~~的常规 makefile：

```
dev: watchCoffeescript watchStylus
  @nodemon server.coffee

watchCoffeescript:
  @coffee -wcl public/

watchStylus:
  @find public -name '*.styl' -type f | xargs stylus --watch --compress 
```

# ruby-on-rails - 使用 activeadmin gem 创建 has_many 关联的最简单方法是什么？

> ID：10804820
> 
> 赞同：0
> 
> 时间：2012-05-29T18:41:05.427
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gem, activeadmin

我只是使用activeadmin gem：

rails generate active_admin:resource 团队

rails generate active_admin:resource 玩家

应用程序/模型

```
class Team < ActiveRecord::Base
  has_many :players
  attr_accessible :description, :name
end

class Player < ActiveRecord::Base
  belongs_to :team
  attr_accessible :description, :name
end 
```

应用程序/控制器/players_controller

```
class PlayersController < ApplicationController
    def create
        @team = Team.find(params[:team_id])
        @player = @team.players.create(params[:player])
    end
end 
```

应用程序/管理员/

```
 ActiveAdmin.register Team do
  end

  ActiveAdmin.register Player do
  end 
```

当我尝试使用管理界面创建新播放器时，我收到：

> ActiveModel::MassAssignmentSecurity::Admin::PlayersController#create 中的错误

```
Can't mass-assign protected attributes: team_id 
```

我知道我必须做更多的事情，但是什么？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:33:03.397

您需要将 team_id 添加到 attr_accessible：

```
class Player < ActiveRecord::Base
    belongs_to :team
    attr_accessible :description, :name, :team_id
end 
```

# html - 如何让视频在我的网站上像 youtube 一样播放？html/css (阅读更多)

> ID：10804821
> 
> 赞同：0
> 
> 时间：2012-05-29T18:41:14.943
> 
> 标签：html, css, web, youtube, video-streaming

我有一个正在开发的网站（用于乐队），在这里：[http](http://atfa.hostei.com/) ://atfa.hostei.com/ 。

在视频页面上，它会显示一个介绍视频，然后您将被重定向到他们的直播页面，您可以在其中观看他们的音乐会直播。在介绍视频下方，我有一个聊天室。在聊天室下方是我想发布他们所有的 YouTube 视频、更新等的地方。

我一直试图通过反复试验弄清楚如何做到这一点，但我迷路了。我想要 YouTube 视频播放器，但是会有其他视频缩略图，当您单击它们时，它会更改您页面上的视频。

但我也不想要太多的视频，所以我想在 1 2 3... 8 下方制作一个小标签，这样您就可以在保持在同一页面上的同时打开不同的视频，而无需刷新或任何其他操作。

我所追求的一个例子是在这里的视频页面：[http ://www.higatv.com/rhtv/?page_id=142](http://www.higatv.com/rhtv/?page_id=142)

我已经查看了源代码，但我迷路了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T18:58:20.990

我给你的建议是让一个功能工作，然后转到下一个。不要试图实现你不熟悉的三种不同的东西。

* * *

一个简单的例子让你开始。

1) 获取用户\频道的所有视频，或者你可以做一个 rss 提要来检查列表并根据它解析它

或者你可以做[http://gdata.youtube.com/feeds/api/videos?author=](http://gdata.youtube.com/feeds/api/videos?author=)然后解析信息

或者您可以手动放置它们。

2）使用分页将它们分隔在不同的页面中。类似[http://tympanus.net/codrops/2009/11/17/jpaginate-a-fancy-jquery-pagination-plugin/](http://tympanus.net/codrops/2009/11/17/jpaginate-a-fancy-jquery-pagination-plugin/)

3）视频的占位符

```
 <object type="application/x-shockwave-flash" data="http://www.youtube.com/v/2pROe-xq2vo?rel=1&amp;autoplay=0&amp;loop=0&amp;egm=0&amp;border=0&amp;fs=1&amp;showinfo=0" style="width: 425px; height: 350px">
        <param name="wmode" value="transparent">
        <param name="movie" value="http://www.youtube.com/v/2pROe-xq2vo?rel=1&amp;autoplay=0&amp;loop=0&amp;egm=0&amp;border=0&amp;fs=1&amp;showinfo=0">
        <param name="allowfullscreen" value="true">
      </object> 
```

4) onclick 更改视频 url`<param name="movie"`或删除旧对象并创建另一个。

**编辑：**

步骤 (4) 的示例在这里[http://jsfiddle.net/794Re/3/](http://jsfiddle.net/794Re/3/)

有两种方法可以嵌入视频。我喜欢 iframe 一个，它看起来很简单。

**编辑：**

这是一个例子[http://jsfiddle.net/zK4Z8/1/](http://jsfiddle.net/zK4Z8/1/)

获取缩略图的诀窍是放视频 id`<img src="http://i.ytimg.com/vi/VideoIdGoesHere/default.jpg" width="120" height="90" />`

然后加载一个视频，你基本上改变了电影参数和数据属性，就像函数中一样`loadVideoById(videoId)`

```
<a id="img1" onclick="load(this);"  rel="2yoKjhxXVN8" style="margin-left: 41px; ">
  <img  src="http://i.ytimg.com/vi/2yoKjhxXVN8/default.jpg" width="120" height="90" />
</a>

function load(element) {
    var videoId = $("#" + element.id).attr("rel");
    $('#movieObj').remove();
     $(loadVideoById(videoId)).prependTo('#vholder');
}

function loadVideoById(videoId) {
    return '<object id="movieObj" type="application/x-shockwave-flash" data="http://www.youtube.com/v/' + videoId + '?rel=1&amp;autoplay=0&amp;loop=0&amp;egm=0&amp;border=0&amp;fs=1&amp;showinfo=0" style="width: 425px; height: 350px"><param name="wmode" value="transparent"><param name="movie" value="http://www.youtube.com/v/' + videoId + '?rel=1&amp;autoplay=0&amp;loop=0&amp;egm=0&amp;border=0&amp;fs=1&amp;showinfo=0"><param name="allowfullscreen" value="true"></object>';
} 
```

# c# - 在书签处插入

> ID：10804822
> 
> 赞同：0
> 
> 时间：2012-05-29T18:41:15.880
> 
> 标签：c#, ms-word, interop

我有以下方法（不是我的程序）将表格数据插入到文档的末尾。我想将数据插入到文档中的书签中。如何引用该书签而不是 \endofdoc？

```
 private static void CreateTable(Microsoft.Office.Interop.Word.Document oWordDoc, int RowCount, int ColumnCount, string[,] TableContent)
    {
        Table oTable;
        object oEndOfDoc = "\\endofdoc";
        object missing = System.Reflection.Missing.Value;
        Range wrdRng = oWordDoc.Bookmarks.get_Item(ref oEndOfDoc).Range;
        oTable = oWordDoc.Tables.Add(wrdRng, RowCount, ColumnCount, ref missing, ref missing);

        oTable.ID = "ContentTable";
        int r, c;

        for (r = 0; r < RowCount; r++)
            for (c = 0; c < ColumnCount; c++)
            {
                oTable.Cell(r + 1, c + 1).Range.Text = TableContent[r, c];
            }

        //oTable.Rows[1].Range.Font.Bold = 1;

        oTable.Borders.OutsideLineStyle = Microsoft.Office.Interop.Word.WdLineStyle.wdLineStyleThickThinLargeGap;
        oTable.Borders.InsideLineStyle = Microsoft.Office.Interop.Word.WdLineStyle.wdLineStyleSingle;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:34:32.187

The following code was culled from [c-sharpcorner](http://www.c-sharpcorner.com/uploadfile/amrish_deep/wordautomation05102007223934pm/wordautomation.aspx) which should get you started with dealing with bookmarks.

```
//BOOK MARK FOR START OF SELECTION

Object oBookmarkStart = "BookMark__Start";

Object oRngoBookMarkStart = oWordDoc.Bookmarks.get_Item(ref oBookmarkDesignInfoStart).Range.Start;

//BOOK MARK FOR END OF SELECTION

Object oBookmarkEnd = "BookMark__End";

Object oRngoBookMarkEnd = oWordDoc.Bookmarks.get_Item(ref oBookmarkDesignInfoEnd).Range.Start;

//SETTING THE RANGE ON THE BOOKMARK BETWEEN TWO BOOKMARKS

Word.Range rngBKMarkSelection = oWordDoc.Range(ref oRngoBookMarkStart, ref oRngoBookMarkEnd);

//SELECTING THE TEXT

rngBKMarkSelection.Select();
rngBKMarkSelection.Delete(ref oMissing, ref oMissing); 
```

# java - 查询内存中的集合

> ID：10804825
> 
> 赞同：1
> 
> 时间：2012-05-29T18:41:20.000
> 
> 标签：java, collections

我有一个集合，一个地图列表，地图是`Map<String, String>`. 我需要通过比较、逻辑、类似而不是运算符来查询这个集合。类似 SQL 的东西。

我将从数据库存储过程中填充列表，所以我不确定大小。但是，我猜大小不应该超过 10,000 条记录。

在发布这篇文章时，我正在查看 Apache 仿函数，我不知道他们是否会在这里提供帮助。

我正在考虑的其他方法是使用内存数据库 Derby 来实现这一点。

请让我知道任何 Java 库或任何其他方式。

列表中的地图如下所示：

```
Map<String, String> m1 = new Map<String, String>();
m1.put("name","Mark");
m1.put("age","21");
m1.put("city","some city");

Map<String, String> m1 = new Map<String, String>();
m1.put("name","David");
m1.put("age","25");
m1.put("city","other city"); 
```

我需要查询列表以获取具有以下内容的 Map：

1.  `name=Mark`
2.  `name=Mark and age > 30`
3.  `city not in "other city"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-06T14:10:24.107

看看[CQEngine - 集合查询引擎](http://code.google.com/p/cqengine/)。

作为作者，我有偏见，但这将比依赖迭代和过滤的方法表现更好，扩展性更好。

它提供了一个`java.util.Set`(IndexedCollection) 的实现，它允许基于对其属性的（任意复杂的）查询来检索对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T19:36:13.030

您可以使用[Google Collections/Gauva](http://code.google.com/p/google-collections/)。它提供带有谓词的集合过滤：

> Iterables.filter(Iterable, Predicate)

有关使用谓词进行过滤的示例，请参[见此答案。](https://stackoverflow.com/a/122207/119772)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T18:52:14.017

[Quaere](http://xircles.codehaus.org/projects/quaere)可以查询集合。在寻找基于内存数据库的解决方案之前，您应该先看看。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T07:51:37.120

我发现[JFilter](http://code.google.com/p/jfilter/)可以帮助您过滤内存中的数据（java 对象）。以下是来自 JFilter 网站的描述。

JFilter 是一个简单且高性能的开源库，用于过滤（查询）、映射（选择）和减少（聚合）Java 集合中的对象。查询以 json 格式给出，如 Mongodb 查询。

我写了一篇[关于](http://blogsbyabdullah.blogspot.in/2012/07/queryingfiltering-in-memory-data-using.html)将[JFilter](http://code.google.com/p/jfilter/)与 Maps 结合使用的帖子，我将其用作存储数据和使用[JFilter查询/过滤的通用方式](http://code.google.com/p/jfilter/)

这是使用[JFilter 查询/过滤内存数据的帖子的链接](http://blogsbyabdullah.blogspot.in/2012/07/queryingfiltering-in-memory-data-using.html)

# svn - 颠覆 - 将非常大的网站拆分为子项目

> ID：10804826
> 
> 赞同：0
> 
> 时间：2012-05-29T18:41:22.290
> 
> 标签：svn

我有一个超过 15GB 的非常大的 Web 项目。我试图找出在颠覆中添加项目的最佳方法。

大多数情况下，当添加一项功能时，更改只发生在一个文件夹上，即根级别的每个目录都可以视为独立应用程序。大多数根级别的目录只有一个或两个依赖文件夹，如共享文件夹（包含常见的包含脚本）。

使根级别的每个目录成为子项目是否有意义？如果是，是否有其他工具（例如外部工具）可能对管理依赖关系有用。

或者将整个网站添加为单个项目并使用部分签出来签出您需要更新的目录和依赖目录是否更好。分支/合并期间部分结帐会造成问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T22:43:46.743

是什么导致它如此之大？它是否包括已编译的代码（如 Java）或者是图像等。

如果它是编译代码，你不需要 Subversion 中的网站，只需要源文件，这将缩小大小。

但是，如果网站真的那么大（可能有很多图像和媒体文件），我建议您为了方便起见将它分成多个 Subversion 存储库。如果您使用 httpd 作为 Subversion 服务器，您可以在单个 Apache 实例和单个 Apache 配置点下拥有多个存储库。这使您可以将单独的存储库视为一个非常大的存储库，用于诸如权限、签出等之类的事情。然而，它使您可以方便地将各种单独的存储库移动到多个磁盘上，并加快访问速度相当多。

我不会努力获得更多的*商业*软件。Subversion 相当强大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T18:51:38.047

任何一种解决方案都可以正常工作。我建议第一个，以防有人忘记签出子目录并获取整个 repo。此外，如果某处发生损坏，您希望限制损坏而不是阻止整个代码库。当每个文件夹都是一个单独的 repo 时，只需确保用户在同一级别签出 common repo 即可。

同样对于这个大型项目，您可能需要考虑更商业化的存储库软件（perforce、mercurial 等）

# iphone - 没有音频处理的 AVCaptureSession 视频预览

> ID：10804829
> 
> 赞同：1
> 
> 时间：2012-05-29T18:41:38.017
> 
> 标签：iphone, ios, avcapturesession

我正在使用 AVCaptureSession 在 iPhone 上的增强现实类型应用程序中预览视频。由于我还在视频预览之上绘制 OpenGL 图形，因此该应用程序非常耗能。我想尽量减少 CPU 的使用以节省电池。

当我使用 Instruments/Energy 使用情况检查应用程序时，我发现 CPU 的很大一部分（约 20%）被“浪费”在了音频处理上。如果我删除我的捕获会话，音频处理不会像预期的那样占用 CPU。

我不明白为什么捕获会话正在进行音频处理，因为我没有添加任何音频设备输入。这是我设置会话的方式：

```
if(!captureSession) {
  captureSession = [[AVCaptureSession alloc] init];
  AVCaptureDevice *videoDevice = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
  if (videoDevice) {
    NSError *error;
    AVCaptureDeviceInput *videoIn = [AVCaptureDeviceInput deviceInputWithDevice:videoDevice error:&error];
    if (!error) {
      if ([captureSession canAddInput:videoIn]) {
        [captureSession addInput:videoIn];
      }
    }
  }
}

if(!previewLayer) {
  previewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:captureSession];
  [previewLayer setVideoGravity:AVLayerVideoGravityResizeAspectFill];
}

CGRect layerRect = [[viewBg layer] bounds];
[previewLayer setBounds:layerRect];
[previewLayer setPosition:CGPointMake(CGRectGetMidX(layerRect), CGRectGetMidY(layerRect))];
[[viewBg layer] addSublayer:previewLayer];

[captureSession startRunning]; 
```

有没有办法完全禁用音频（输入），或者在预览视频输入时如何摆脱音频处理 CPU 使用率？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T18:05:00.760

作为更大的性能优化，我可以建议不要使用覆盖在 AVCaptureVideoPreviewLayer 上的非透明 OpenGL ES 内容吗？相反，您将获得更好的渲染性能，方法是抓取您的相机源，将其作为纹理上传以在您的增强现实内容后面渲染，然后在包含相机纹理的屏幕大小的纹理四边形前面渲染您的内容。

从个人经验来看，渲染不透明的 OpenGL ES 内容会导致严重的减速，因为在这种情况下需要执行合成。获取您的相机帧并将它们显示为 OpenGL ES 场景中的背景将让您将 OpenGL ES 托管视图设置为不透明，这样效率更高。

我有一些[示例代码](http://www.sunsetlakesoftware.com/sites/default/files/ColorTracking.zip)作为对象跟踪示例的一部分，但是可以在我的开源[GPUImage](https://github.com/BradLarson/GPUImage)框架的 GPUImageVideoCamera 类中找到更高效的相机捕获和上传版本。此外，在我对该框架的代码进行分析时，我没有看到在没有将音频输入配置为会话的一部分的情况下进行音频录制，因此您可以检查我在那里所做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-21T10:41:57.310

我也有同样的问题。我正在使用 AV Foundation 扫描条形码，对音频不感兴趣。然而，大约 20% 浪费在我的 iPhone 5S 的“音频处理”上。

我为此提交了此[错误报告](http://www.cocoanetics.com/2014/03/radar-av-foundation-wastes-energy-processing-audio-even-if-not-captured)。欢迎你欺骗它。

# android - Android：尝试将图像保存到 SD 卡时应用程序退出

> ID：10804832
> 
> 赞同：1
> 
> 时间：2012-05-29T18:41:47.830
> 
> 标签：android, image, save, android-camera, android-camera-intent

我正在尝试将图像保存到 SD 卡并为其添加了一些代码。但是在单击相机中的“确定”/复选标记后，我的应用程序退出了。我是否必须检查我试图将其存储在的目录存在吗？我该怎么做？...！file.exists(){file.mkdirs}？..在我的代码中，我尝试将其存储在每个 SD 卡中存在的 /Android 文件夹中。

```
 file = new File(Environment.getExternalStorageDirectory().getPath()
                 + "/Android/" + "bhe_app" + ".jpg");

    imageUri = Uri.fromFile(file);

i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        i.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);

        startActivityForResult(i, cameraData);

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode == RESULT_OK) {
        Bundle extras = data.getExtras();
        bmp = (Bitmap) extras.get("data");
        iv.setImageBitmap(bmp);

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T19:06:31.437

在创建文件之前创建目录。

```
boolean createdDirectory = new File(Environment.getExternalStorageDirectory().getPath() + "/directory1/directory2/directory3/").mkdirs(); 
```

变量`createdDirectory`将是

> 当且仅当创建了目录以及所有必要的父目录时才为真；否则为假

您必须确保您的应用有权写入 SD 卡（检查您的`AndroidManifest.xml`）

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T18:45:09.747

您是否已授予权限，这对于将照片保存`Write_External_Storage`在`AndroidManifest.xml`sd 卡上很重要

# android - Actionbar Sherlock：无法解析 Menu 和 MenuItem 导入

> ID：10804833
> 
> 赞同：1
> 
> 时间：2012-05-29T18:41:57.190
> 
> 标签：android, actionbarsherlock, android-actionbar

我在开始使用 Actionbar Sherlock 4.0 时遇到了一些问题。我遵循了[http://www.youtube.com/watch?feature=player_embedded&v=4GJ6yY1lNNY](http://www.youtube.com/watch?feature=player_embedded&v=4GJ6yY1lNNY)中的步骤，这看起来很清楚，但我无法让它干净地构建。

第一个问题与我的 Activity 对 onCreateOptionsMenu() 和 onOptionsItemSelected() 的覆盖有关。我从[Unable to override onCreateOptionsMenu in ListFragment](https://stackoverflow.com/questions/7847540/imposssible-to-override-oncreateoptionsmenu-in-listfragment)了解到需要更改导入

```
import android.view.Menu;
import android.view.MenuItem; 
```

至

```
import android.support.v4.view.Menu;
import android.support.v4.view.MenuItem; 
```

但是 Eclipse 没有选择新的 Menu 和 MenuItem 定义，即使我已将 android-support-v4.jar 放入项目的 libs 目录。任何想法为什么这不起作用？

其次，设置教程说使用Android SDK 4.0构建Actionbar Sherlock是可以的，......但我也看到Actionbar Sherlock和您的项目都必须使用Android SDK 3.2编译以获得适当的支持（[使用ActionBarSherlock库，之后出错使用夏洛克作为图书馆](https://stackoverflow.com/questions/9179355/use-actionbarsherlock-library-error-after-use-sherlock-as-library)）。任何人都可以澄清是否确实需要较旧的 SDK？

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T19:19:41.630

> 我从不可能覆盖 ListFragment 中的 onCreateOptionsMenu 了解到需要更改导入

是的，但是您应该使用这些类的 ActionBarSherlock 版本，而不是 Android 支持包的版本：

```
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuInflater;
import com.actionbarsherlock.view.MenuItem; 
```

> 但是 Eclipse 没有选择新的 Menu 和 MenuItem 定义，即使我已经将 android-support-v4.jar 放入了我的项目的 libs 目录

您应该从 ActionBarSherlock 库项目中获得 Android 支持包。

> 任何人都可以澄清是否确实需要较旧的 SDK？

不，您需要将构建目标设置为 Android 4.0 或更高版本。您在该问题上看到的评论是针对早期版本的 ActionBarSherlock。

# playn - 线程主播放中的异常

> ID：10804840
> 
> 赞同：0
> 
> 时间：2012-05-29T18:42:21.093
> 
> 标签：playn

我正在尝试运行一个 playn 项目，但出现以下异常：

```
[java] Exception in thread "main" java.lang.IllegalStateException: Function is not supported
[java]     at org.lwjgl.BufferChecks.checkFunctionAddress(BufferChecks.java:58)
[java]     at org.lwjgl.opengl.EXTFramebufferObject.glBindFramebufferEXT(EXebufferObject.java:199)
[java]     at playn.java.JavaGLContext.bindFramebufferImpl(JavaGLContext.java:150)
[java]     at playn.core.gl.GLContext.viewWasResized(GLContext.java:250)
[java]     at playn.java.JavaGLContext.initGL(JavaGLContext.java:174)
[java]     at playn.java.JavaGraphics.init(JavaGraphics.java:155)
[java]     at playn.java.JavaPlatform.run(JavaPlatform.java:218)
[java]     at playn.core.PlayN.run(PlayN.java:37)
[java]     at com.domain.project.java.GameLoopJava.main(GameLoopJava.java:13) 
```

这是一个自定义项目。我已经运行了命令“mvn test”并得到了上述结果。有人可以告诉我这是什么意思吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:43:36.540

如果您使用的是 playn1.3，您的构建路径上需要 lwjgl 库，您的显卡也必须支持 openGL 2.0。

# c# - 在文本框c#上按回车后标签单击事件

> ID：10804843
> 
> 赞同：0
> 
> 时间：2012-05-29T18:42:38.143
> 
> 标签：c#

我在 c# 中有一个 winforms 登录，我想让它在按密码框上的 enter 键后尝试登录。

我有一个用户名文本框、密码文本框和我提交的标签。

我有这个作为我的输入键。

```
 private void password_KeyPress(object sender, KeyPressEventArgs e)
    {
        if (e.KeyChar == (char)13)
        {

            signinbutton.Click();    //I was thinking something like this would work                        
        }
    } 
```

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T18:45:58.770

解决这个问题的一个更简单的方法是将表单上的 AcceptButton 设置为您的登录按钮，这将导致默认情况下 enter 按下按钮，只要焦点位于表单上的任何位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T18:49:05.180

我认为您的代码当前如下所示：

```
private void password_KeyPress(object sender, KeyPressEventArgs e)
{
    if (e.KeyChar == (char)13)
    {
         // what do i do here?         
    }
}
private void signinbutton_Click(object sender, EventArgs e) 
{
    //do stuff
    //do stuff
    //do stuff
} 
```

这是我建议您执行的操作：

```
private void password_KeyPress(object sender, KeyPressEventArgs e)
{
    if (e.KeyChar == (char)13)
    {
         DoStuff();
    }
}
private void signinbutton_Click(object sender, EventArgs e) 
{
    DoStuff();
}
private void DoStuff() {
    //do stuff
    //do stuff
    //do stuff
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T18:45:50.963

您可以使用：

```
signinbutton.PerformClick(); 
```

有关详细信息，请参见[Button.PerformClick](http://msdn.microsoft.com/en-us/library/system.windows.forms.button.performclick.aspx)。

如果密码 TextBox 是表单上唯一的文本框，您可能还需要考虑将该`signinbutton`按钮标记为默认按钮。这将导致此行为自动发生。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T19:18:53.113

我制作了一个不可见的按钮并将其设置为当有人按下回车键时，它会触发该按钮。

```
 private void Textbox1_KeyDown(object sender, KeyEventArgs e)
    {
        //if the enter key is pressed it triggers the submit button.
        if (e.KeyCode == Keys.Enter)
        {
            buttonSubmit_Click((object)sender, (EventArgs)e);

        }
    }

    private void buttonSubmit_Click(object sender, EventArgs e)
    {
        //this is what the enter key triggers. 
        MessageBox.Show("you hit the enter key");
    } 
```

# iphone - 多组核心数据

> ID：10804844
> 
> 赞同：1
> 
> 时间：2012-05-29T18:43:00.680
> 
> 标签：iphone, objective-c, core-data, group-by

我正在使用核心数据来检索一些数据。我怎样才能将这样的 SQL 语句翻译成 Core Data 语句？

```
SELECT bus, direction from BUSES where latitude > 58.00 and longitude < 34.00 group by bus, direction 
```

换句话说，我喜欢按 BUS 和 DIRECTION 分组，但有一个 WHERE 子句。

我试过使用这段代码：

```
request.propertiesToFetch = [NSArray arrayWithObjects:@"bus", @"direction", nil];
request.returnsDistinctResults = YES;
request.resultType = NSDictionaryResultType; 
```

问题是，如果我只检索公共汽车和方向，我不能像这样设置一个具有纬度和经度的 NSPredicate：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(lat > 58) AND (lat < 34)"];
[fetchRequest setPredicate:predicate]; 
```

我猜核心数据只是检索总线和方向，这就是 NSPredicate 不起作用的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T03:48:12.483

核心数据不是 SQL。事实上，它甚至不必将 SQLite 用于其持久存储。

我总是建议您根据您在模型中定义的实体和关系来考虑您要解决的问题（而不是考虑如何在 SQL 中解决问题）。

我建议使用带有谓词的普通获取请求（不要指定 propertiesToFetch）来获取您想要的对象，然后自己对它们进行分组。

如果您只对一个属性感兴趣，则可以使用`valueForKey:`完整对象数组来快速获取仅包含这些值的数组。例如：

```
NSArray *busses = [objects valueForKey:@"bus"]; 
```

# css - HTML5 Boilerplate：是否可以使用构建脚本为多个样式表内联 @import？

> ID：10804847
> 
> 赞同：1
> 
> 时间：2012-05-29T18:43:12.603
> 
> 标签：css, ant, build, import, html5boilerplate

目前，[H5BP ant 构建脚本](https://github.com/h5bp/ant-build-script/blob/master/build.xml)（第 817 行）采用“style.css”并内联在那里指定的导入。但是，我希望为多个样式表提供此功能。我当前的目录结构是这样的：

```
css/
    h5bp/
        h5bp.normalize.css
        h5bp.helper.classes.css
        h5bp.media.queries.css
        h5bp.print.css
    pages/
        home.page.styles.css
        about.page.styles.css
        upload.page.styles.css
        download.page.styles.css
        ...
    extras/
        ie.styles.css
        layout.styles.css
        font.styles.css
        ... 
```

我希望能够为`css/pages/`目录中的每个文件运行 css ant 目标，以便每个样式表都具有内联的导入，然后被缩小。当前的 H5BP 构建脚本是否支持此功能？如果没有，我将如何修改它以满足我的需求？示例样式表如下所示...

```
@import url(../h5bp/h5bp.normalize.css);
@import url(../extras/ie.styles.css);
@import url(../extras/layout.styles.css);

/* this stylesheet is specific for the "home page" */
@import url(home.page.styles.css);

@import url(../extras/font.styles.css);
@import url(../h5bp/h5bp.helper.classes.css);
@import url(../h5bp/h5bp.media.queries.css);
@import url(../h5bp/h5bp.print.css); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T20:59:09.507

我们只建议使用单个样式表，因为这适用于大多数常见用例。因此，我们没有任何东西可以允许您需要这种行为。

但是，[节点构建脚本应该能够为您执行此操作](https://github.com/h5bp/node-build-script/wiki/css)。

# regex - 邮政信箱正则表达式帮助匹配尾随数字

> ID：10804848
> 
> 赞同：0
> 
> 时间：2012-05-29T18:43:17.173
> 
> 标签：regex

我有以下来自正则表达式库的正则表达式，它可以很好地捕捉一些 PO Box 变体。它唯一不做的是匹配尾随数字：

**邮政信箱 123**

任何人都可以帮忙修改这个正则表达式以匹配尾随数字吗？

```
\b[P|p]?(OST|ost)?\.?\s*[O|o|0]?(ffice|FFICE)?\.?\s*[B|b][O|o|0]?[X|x]?\.?\s+[#]?(\d+)\b 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T18:58:55.587

假设“PO Box 123”中的尾随数字是“123”，则正则表达式**确实**匹配它们。它甚至将数字捕获到反向引用 3。

您的正则表达式存在大量缺陷。例如，它匹配`OST|||| 0`.

我可以建议我自己的邮政信箱正则表达式吗？

```
^(?:Post (?:Office )?|P[. ]?O\.? )?Box #?([0-9]+) 
```

启用在换行符处生成`^`和匹配的选项（通常为），并启用不区分大小写的选项（通常为）。不要启用自由间距选项（通常是）。`$``/m``/i``/x`

以下是它匹配的一些字符串示例：

*   邮政信箱 #123
*   邮政信箱 123
*   邮政信箱 123
*   邮政信箱 123
*   宝。框 123
*   邮政信箱 123
*   框 123

尾随数字被捕获到反向引用 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T18:51:24.190

`\d+`=一个或多个数字，你在那里。使用[http://regexpal.com/](http://regexpal.com/)，这是一个救生员。我尝试了 PO Box 2334328789791297 并接受了它，以及其他一些变体。您的代码看起来不错（一目了然）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T00:03:18.940

我从上面的@slevthan's answer工作并添加了一些改进，这些改进被拒绝为编辑：

```
 (^|(?:post(al)? *(?:office *)?|p[. ]*o\.? *))box *#? *(\w+) 
```

除了匹配上述情况外，它还允许在两者之间有更多的空格，或者缺少空格，以及 post/postal 的短排列和全排列。字母也可以用于盒子标识符。警告：一定要在模式上启用多行和不区分大小写的模式。

![在此处输入图像描述](../Images/b9a7cba6ff4546ef669e1bf1fc061599.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-23T13:21:49.780

我创建的用于处理**邮政信箱验证的模式将处理****邮政信箱**的任何组合，还将处理尾随数字、字符和数字。

模式 pattern = Pattern.compile("([P]?(OST|0ST)?\s*[.-]?\s*[O|0]?(FFICE)?\s*[.-]?\s *[B][O|0][X]\s*).*");

它对我来说很好用。我已经用多种组合对其进行了测试。

如果您发现其中有任何问题，请告诉我。

注意：如果您只需要 PO bOx 而不是尾随序列，只需从末尾删除 .* 即可解决该目的。我假设邮政信箱位于大写字母中。

# java - 如何将短数组转换为字节数组

> ID：10804852
> 
> 赞同：18
> 
> 时间：2012-05-29T18:44:02.010
> 
> 标签：java, arrays

我发现[将短数组转换为字节数组](https://stackoverflow.com/questions/2188660/convert-short-to-byte-in-java)，将字节数组转换[为短数组](https://stackoverflow.com/questions/5625573/byte-array-to-short-array-and-back-again-in-java)，但不是将短数组转换为字节数组。

这是导致转换的代码

```
while(!stopped)
        { 
            Log.i("Map", "Writing new data to buffer");
            short[] buffer = buffers[ix++ % buffers.length];

            N = recorder.read(buffer,0,buffer.length);
            track.write(buffer, 0, buffer.length);

            byte[] bytes2 = new byte[N]; 
```

我努力了

```
 int i = 0;
              ByteBuffer byteBuf = ByteBuffer.allocate(N);
              while (buffer.length >= i) {
                  byteBuf.putShort(buffer[i]);
                  i++;
        }

bytes2 = byteBuf.array(); 
```

和

```
 ByteBuffer.wrap(bytes2).order(ByteOrder.LITTLE_ENDIAN).asShortBuffer().put(buffer); 
```

但是，我在两者上都收到此错误（错误如果不完全相同但两者非常相似）：

> 05-29 13:41:12.021：W/AudioTrack（9758）：获取缓冲区（）轨道 0x30efa0 禁用，重新启动
> 
> 05-29 13:41:12.857: W/AudioWorker(9758): 读取语音 AudioWorker 时出错
> 
> 05-29 13:41:12.857: W/AudioWorker(9758): java.nio.BufferOverflowException
> 
> 05-29 13:41:12.857: W/AudioWorker(9758): 在 java.nio.ShortBuffer.put(ShortBuffer.java:422)
> 
> 05-29 13:41:12.857: W/AudioWorker(9758): 在 java.nio.ShortToByteBufferAdapter.put(ShortToByteBufferAdapter.java:210)
> 
> 05-29 13:41:12.857: W/AudioWorker(9758): 在 java.nio.ShortBuffer.put(ShortBuffer.java:391)
> 
> 05-29 13:41:12.857: W/AudioWorker(9758): at com.avispl.nicu.audio.AudioWorker.run(AudioWorker.java:126)

在这里提供尽可能多的信息是使用字节数组之后的代码

```
Log.i("Map", "test");
                //convert to ulaw
                read(bytes2, 0, N);

                //send to server
                os.write(bytes2,0,bytes2.length);

                System.out.println("bytesRead "+buffer.length);
                System.out.println("data "+Arrays.toString(buffer));
            } 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-09-10T07:37:33.233

我发现 ByteBuffer 是我分析过的三种转换方法中最慢的一种。见下文...

平台：Nexus S，Android 4.1.1，无 SIM 卡

方法 #1：使用 ByteBuffer

```
byte [] ShortToByte_ByteBuffer_Method(short [] input)
{
  int index;
  int iterations = input.length;

  ByteBuffer bb = ByteBuffer.allocate(input.length * 2);

  for(index = 0; index != iterations; ++index)
  {
    bb.putShort(input[index]);    
  }

  return bb.array();       
} 
```

方法#2：直接旋转比特

```
byte [] ShortToByte_Twiddle_Method(short [] input)
{
  int short_index, byte_index;
  int iterations = input.length;

  byte [] buffer = new byte[input.length * 2];

  short_index = byte_index = 0;

  for(/*NOP*/; short_index != iterations; /*NOP*/)
  {
    buffer[byte_index]     = (byte) (input[short_index] & 0x00FF); 
    buffer[byte_index + 1] = (byte) ((input[short_index] & 0xFF00) >> 8);

    ++short_index; byte_index += 2;
  }

  return buffer;
} 
```

方法#3：通过 JNI 使用 C

**类型转换.java**

```
package mynamespace.util;

public class TypeCast
{
  public static native byte [] shortToByte(short [] input);

  static
  {
    System.loadLibrary("type_conversion");
  }
} 
```

**本机.c**

```
#include <jni.h>
#include <string.h>

jbyteArray Java_mynamespace_util_TypeCast_shortToByte(JNIEnv *env, jobject obj, jshortArray input)
{
  jshort     *input_array_elements;
  int         input_length;

  jbyte      *output_array_elements;
  jbyteArray  output;

  input_array_elements = (*env)->GetShortArrayElements(env, input, 0);
  input_length         = (*env)->GetArrayLength(env, input);

  output                = (jbyteArray) ((*env)->NewByteArray(env, input_length * 2));
  output_array_elements = (*env)->GetByteArrayElements(env, output, 0);

  memcpy(output_array_elements, input_array_elements, input_length * 2);

  (*env)->ReleaseShortArrayElements(env, input, input_array_elements, JNI_ABORT);
  (*env)->ReleaseByteArrayElements(env, output, output_array_elements, 0);

  return output;
} 
```

结果：

对于一个一百万元素的输入数组，执行时间如下：

方法 #1 ByteBuffer：865 毫秒

方法 #2 旋转：299 毫秒

方法 #3 C：39 毫秒

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-29T18:50:11.467

Java`short`是16位类型，`byte`也是8位类型。您有一个循环尝试将`N`短裤插入到`N`-bytes 长的缓冲区中；它需要是`2*N`字节长才能适合您的所有数据。

```
ByteBuffer byteBuf = ByteBuffer.allocate(2*N);
while (N >= i) {
    byteBuf.putShort(buffer[i]);
    i++;
} 
```

# .net - 具有 TPT 继承和复合键的实体框架代码优先

> ID：10804854
> 
> 赞同：1
> 
> 时间：2012-05-29T18:44:18.317
> 
> 标签：.net, entity-framework, inheritance

我需要构建一个稍微不寻常的数据模型，但我无法说服 Entity Framework Code First 为我映射它。

我有两个实体——“A”和“B”。

“B”是“A”的一种，这就是我试图让继承工作的原因。

但是，可能存在多个版本的“B”。

我想通过在“A”和“B”的每个表中都有一个共享的 ID 列来对此进行建模，但对于“B”来说，也有一个“版本号”字段，它与 ID 组成一个组合键。

所以 - 这将是一对多继承类型的安排。

最终目标是能够检索特定的“B”实体，并且它还包含相关“A”实体的所有属性和方法，而无需通过另一个对象。

任何想法都会很棒。

谢谢，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T09:12:08.007

EF 中的继承始终是一对一的。如果您有一对多，则必须将其作为关系处理或构建您自己的中间层，该中间层将通过您自己的域模型隐藏 EF 实现（它将从 EF 获取相关对象并创建您自己的继承对象）。

# php - 在 Windows Azure 上部署 Yii

> ID：10804858
> 
> 赞同：0
> 
> 时间：2012-05-29T18:44:38.470
> 
> 标签：php, azure, yii, azure-sql-database

我写了一个基于 Yii 框架的 web 应用程序，现在倾向于使用 Microsoft Azure 云服务。

我感到完全迷失了，我找不到一个关于这个的教程。

如何配置数据库适配器？可以使用 SQLSRV 驱动程序完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T19:54:18.823

[查看http://azurephp.interoperabilitybridges.com/tutorials](http://azurephp.interoperabilitybridges.com/tutorials)上的一些教程

这些教程将解释如何为 Windows Azure 设置获取 PHP 的开发环境。

特别是这个应该对你有用[http://azurephp.interoperabilitybridges.com/articles/build-and-deploy-a-windows-azure-php-application](http://azurephp.interoperabilitybridges.com/articles/build-and-deploy-a-windows-azure-php-application)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:13:46.753

Yii，MVC 框架是基于 PHP 的，所以你真正需要的是使用 Azure PHP SDK 来启动。我的第一个建议是从以下链接下载适用于 Windows Azure 的 PHP SDK：

[http://azurephp.interoperabilitybridges.com/articles/setup-the-windows-azure-sdk-for-php](http://azurephp.interoperabilitybridges.com/articles/setup-the-windows-azure-sdk-for-php)

您将使用下面描述的脚手架，因此请正确学习：

[http://azurephp.interoperabilitybridges.com/articles/using-scaffolds](http://azurephp.interoperabilitybridges.com/articles/using-scaffolds)

在上面的脚手架中有两个示例，您可以下载并自己尝试（示例已经连接到 SQL Azure，因此您可以了解它是如何完成的）：

[https://github.com/Interop-Bridges/Windows-Azure-Sample-Kit-4-PHP](https://github.com/Interop-Bridges/Windows-Azure-Sample-Kit-4-PHP)

最后下载 Yii 并将其放入脚手架文件夹的根目录并进行测试。最后，当测试完成时，您可以部署到 Windows Azure。

I hope you may need some help in last step however if you finish using sample application through documentation, you can get Yii in your application easily.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T09:37:28.633

For anyone else finding this question, Re. The database, Azure supports PDO with the SQL Server native driver.

Download the SQL Server PDO extensions from here: [http://sqlsrvphp.codeplex.com/](http://sqlsrvphp.codeplex.com/)

Extract and place the dll(s) into a folder called php/ext under your role/bin folder and also add a line into a php.ini file in the php folder like this: extension=php_pdo_sqlsrv_53_ts.dll

So you end up with:

*   webrole/bin/php/php.ini
*   webrole/bin/php/ext/php_pdo_sqlsrv_53_ts.dll

Then in your php code, you can use the database like any other PDO objects. The connection string will be like this: $conn = new PDO( "sqlsrv:Server= MyServerName ; Database = MyDatabase ", "UserName", "Password123");

This is all I've done and it works fine since PDO is already included by default in the Azure version of PHP.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-06T15:06:20.513

If you happen to get interested here is a tutorial on how to deploy Yii Framework to Jelastic cloud: [Web Development with Yii Framework](http://blog.jelastic.com/2013/04/30/web-development-yii/)

# ruby-on-rails - 延迟作业：如何检索和更新计划的作业？

> ID：10804861
> 
> 赞同：2
> 
> 时间：2012-05-29T18:44:46.377
> 
> 标签：ruby-on-rails, ruby, delayed-job

我正在使用延迟作业在特定时间异步执行作业。这是在我的模型类中指定的。现在我需要弄清楚如何重新安排工作，以防我需要重新安排工作。如果我可以在我的模型上有一个方法来检索作业并更新 run_at 时间，那就太好了。我怎么能用延迟工作做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T19:32:21.383

您可以简单地处理 Delayed::Job 模型（如果您使用 delay_job_active_record，则说 activerecord）

问题是你想找回什么工作，以及你如何处理它。无论您如何管理作业以供以后检索，您都应该使用以下内容：

```
# submit the job and remember id
job_id_remember_for_later = Delayed::Job.enqueue(job).id
#...
# later
job = Delayed::Job.find_by_id(job_id_remember_for_later)
job.update_attributes(:run_at => new_time, :attempts => 0)
job.save 
```

这段代码肯定是不安全的，你需要检查锁等。还要注意你需要配置delayed_job来保留失败的作业（默认在max_attempts失败后删除）。

```
Delayed::Worker.destroy_failed_jobs = false 
```

# ios - 使用块和 ARC 导致“发送到已释放实例的消息”错误

> ID：10804865
> 
> 赞同：0
> 
> 时间：2012-05-29T18:45:03.303
> 
> 标签：ios, automatic-ref-counting, objective-c-blocks

我遇到了 ARC 和块的问题，但已经解决了这个问题。不幸的是，我不知道到底发生了什么，并且想更多地了解我的情况。

最初，我有这样做的代码

```
for(__block id<Foo> object in objects) {
    foo download:someParm
         success:^{
            object.state = StateNewState; 
         }
    ];
} 
```

这导致了保留的不平衡。当一个对象被访问并且据说已经被释放时，就会发生崩溃。我编写了一个实现并使用“复制”属性创建一个成功块属性的类，该属性保存了传递给下载函数成功参数的块。我用以下代码替换了代码

```
for(id<Foo> object in objects) {
    foo download:someParm
         success:^(id<Foo> successObject){
            successObject.state = StateNewState; 
         }
    ];
} 
```

没有更多的释放对象错误，但我还没有运行工具来检查我是否没有泄漏。一些如何使用 __block 导致对象被释放太多次，我不知道为什么。我将继续研究这个问题的原因，但我认为这对你们其他人来说是一个有趣的问题。

我想可能值得注意的是 objects 数组是一个自动释放的数组，它是在我在本文前面写下的代码的行中创建的。不要认为这很重要，但我想我只是在那里度过。我在这篇文章中的代码不是确切的代码，因为我正在使用它来工作并且那里有一堆绒毛。但是在 for 循环中没有创建其他对象。

当应用程序崩溃时，它会运行下载，然后运行回调，顺便说一下，我正在使用 ASIHttp。当我尝试再次下载时，它会运行并且不会调用回调，因为对象已被释放并且委托被取消。在此之后，当包含指向对象的指针的字典访问对象时，我们会崩溃。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T02:43:56.900

[块编程主题](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/bxVariables.html#//apple_ref/doc/uid/TP40007502-CH6-SW1)说：

> 在块中使用实例变量将导致对象本身被保留。如果您希望为特定对象变量覆盖此行为，您可以使用 __block 存储类型修饰符对其进行标记。
> 
> 如果您使用 ARC，对象变量会在复制块并稍后释放时自动保留和释放。

因此，如果您不使用`__block`，我认为您会发现您的变量正在为您保留。例如，这似乎对我有用：

```
NSMutableArray *array = [[NSMutableArray alloc] init];

// add two custom objects to that array

[array addObject:[[MyObject alloc] initWithText:@"One" number:1]];
[array addObject:[[MyObject alloc] initWithText:@"Two" number:2]];
[array addObject:[[MyObject alloc] initWithText:@"Three" number:3]];

// now replace the text field in each of the three objects with the word "Done"

for (MyObject *object in array)
{
    [self blockTestInvocation:^{
        NSLog(@"%s %@", __FUNCTION__, [NSDate date]);

        object.text = @"Done";
    }];
} 
```

我发现`__block`当我同步调用传递的块时，存在或不存在没有实质性影响`blockTestInvocation`，但是当我将它设置为异步调用块时（在我的数组和对象将被释放之后），不存在确保`__block`对象被保留，从而防止可怕的“消息发送到释放的实例”（也没有泄漏）。但是使用`__block`，对象不会被保留，因此可以在代码块尝试引用它时被释放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T18:08:28.980

两件事情：

1）关于您所描述的内容并没有加起来。你说你把这些对象放在一个自动释放的数组中，这可能是为了运行循环而临时存储的。然后你的块回调在这些对象上设置一些状态，除非其他东西也保留它们，否则这将毫无意义。所以你的问题在于其他东西——无论创建这些对象的东西应该在需要它们时保留它们——大概足够长的时间来观察状态变化。如果是这样，您将不会收到 EXC_BAD_ACCESS 错误。

2）您的循环中不需要`__block`限定符。它基本上告诉编译器您的块可能会为该引用分配一个新对象，因此它需要取消引用该变量。但你的块不这样做。您只是向对象发送消息。如果您不使用`__block`限定符，则您的块将获取该值的 const 副本——该值是指向您的对象的指针。然后，当您这样做时`object.state = StateNewState`，您`setState:newState`将向该指针处的对象发送消息。所以这应该可以正常工作：

```
for(id<Foo> object in objects) {
    foo download:someParm
         success:^{
            object.state = StateNewState; 
         }
    ];
} 
```

# javascript - 禁用垂直反弹但不在 div 中滚动

> ID：10804870
> 
> 赞同：1
> 
> 时间：2012-05-29T18:45:20.520
> 
> 标签：javascript, ios, web-applications, cordova, mobile-safari

> **可能重复：**
> [禁用 ipad web 应用程序中的垂直反弹效果](https://stackoverflow.com/questions/10761746/disable-vertical-bounce-effect-in-an-ipad-web-app)

有没有办法在滚动 div 中禁用反弹效果？

到目前为止，我已经尝试过这些东西，但都没有奏效。请帮忙！

*   [如何在移动 Web 应用程序中禁用 iPhone 上的垂直弹跳/滚动](https://stackoverflow.com/questions/9669670/how-to-disable-vertical-bounce-scroll-on-iphone-in-a-mobile-web-application)

*   [无法使用 UIScrollView 和 pagingEnabled=YES 禁用反弹](https://stackoverflow.com/questions/7003261/cant-disable-bounce-with-uiscrollview-and-pagingenabled-yes)

*   [ipad safari：禁用滚动和反弹效果？](https://stackoverflow.com/questions/7768269/ipad-safari-disable-scrolling-and-bounce-effect)

*   [滚动时禁用 UITableView 垂直反弹](https://stackoverflow.com/questions/2768673/disable-uitableview-vertical-bounces-when-scrolling)

和

*   [http://www.iphonedevsdk.com/forum/iphone-sdk-development/996-turn-off-scrolling-bounces-uiwebview.html](http://www.iphonedevsdk.com/forum/iphone-sdk-development/996-turn-off-scrolling-bounces-uiwebview.html)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T19:42:01.560

```
for (id subview in webView.subviews)
  if ([[subview class] isSubclassOfClass: [UIScrollView class]])
  ((UIScrollView *)subview).bounces = NO; 
```

将此添加到您的应用程序委托中。webview 是您的应用程序 web 视图。

[STOP UIWebView 在设备中垂直反弹](https://stackoverflow.com/questions/3521001/stop-uiwebview-bounces-vertically-in-device)

或者试试这个。转到 Cordova.plist 文件可能是支持文件组中的 PhoneGap.plist。适当地设置最顶层的键值对。为键 UIWebViewBounce 将其设置为 NO。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T07:18:28.383

我可以建议你对你的 div 做一些计算。添加：

```
 document.addEventListener("touchStart",<method>,true/false), 

 document.addEventListener("touchMove",<method>,true/false) 

 document.addEventListener("touchEnd",<method>,true/false). 
```

当您开始滚动时，相应的方法将开始调用。在 touchMove 指定的方法中计算您正在滚动的 div 的高度。

如果滚动结束（意味着 div 达到最大高度）允许用户在手指移除后滚动`touchEnd`相应的方法将调用。看到当前`e.changedTouches.pageY`它会给你 div 在屏幕上的当前位置。只需将 div 的高度设置为 div 的实际高度。我希望它会帮助你

# python - 如何使用 WSGI 将用户从 http 重新路由到 https

> ID：10804873
> 
> 赞同：7
> 
> 时间：2012-05-29T18:45:25.900
> 
> 标签：python, google-app-engine, ssl, https, webapp2

**原始问题**

* * *

App Engine SDK 1.6.5
Python 2.7
webapp2

我已经实现了 webapp2 方案来保护页面到 https。问题是，当用户说 http://site/login 而不是 https://site/login 时，由于方案无法识别路线，他们会收到 404 错误。

示例 main.py

```
#  Libraries
import webapp2

#  Local Controllers
from controllers.HomeHandler import HomeHandler
from controllers.LoginHandler import LoginHandler

app = webapp2.WSGIApplication([
    webapp2.Route(r'/', HomeHandler),
    webapp2.Route(r'/login', LoginHandler, schemes=['https'], name='login')
], debug=True) 
```

我在 https 路由下面添加了另一个路由/控制器来捕获 http 请求：
`webapp2.Route(r'/login', RouteLogin)`

RouteLogin.py

```
#  Libraries
import webapp2

class RouteLogin(webapp2.RequestHandler):
    def get(self):
        self.redirect('https://site.appspot.com/login') 
```

这可行，但似乎应该有更好的方法来做到这一点。就像在 Apache Web 服务器上使用 htaccess。这太像我喜欢的黑客了。我真的不喜欢我的代码中的硬编码 URL。更不用说 2 个登录请求没什么大不了的，但可能还有其他示例最终导致成本过高。

注意 1：如果您正在查看此解决方案，请注意使用 HTTPS 方案还意味着如果不删除 SCHEME 或配置为 dev 设置的变量，您将无法使用开发控制台。

注意 2：我能够获得一种编程方式来提供 HTTPS 而不是 HTTP。我在下面的评论中走在了正确的轨道上，但它需要一个论点。

`webapp2.uri_for('login', _scheme='https')`
这将为您提供正确的[https://someapp.appspot.com/login](https://someapp.appspot.com/login)网址。不幸的是，它没有解决我的主要问题，即如何处理人们在没有 https 的情况下将 url 键入地址栏中并收到错误，除非我使用上面的 hack。所以我仍在寻找将收入请求路由到 HTPPS 的 WSGI 方式。

编辑：添加注释 1 并澄清标题，我认为很明显我使用的是源代码中的 WSGI 而不是 CGI。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T09:46:37.660

在 app.yaml 中设置 URL，而不是在代码中。请参阅[https://developers.google.com/appengine/docs/python/config/appconfig#Secure_URLs](https://developers.google.com/appengine/docs/python/config/appconfig#Secure_URLs)

例如：

```
handlers:

- url: /foo/.*
  script: accounts.py
  secure: always 
```

这会将 HTTP 重定向到 HTTPS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T05:47:36.417

这是我在测试这个问题时使用的工作代码。

注意：开发 Web 服务器（在撰写本文时为 v1.6.5）不支持 https，因此您的 WSGI 路由将需要删除方案才能在开发环境中工作。您可以在部署之前将它们添加回来，或者创建一个变量来设置检查环境的方案，如下所示。

您可以通过将 app.yaml 定义为
app.yaml来让 App Engine Python 重新路由请求

```
application: cgi-vs-wsgi
version: 1
runtime: python27
api_version: 1
threadsafe: yes

libraries:
- name: webapp2
  version: latest

handlers:

- url: /profile
  script: main.app
  secure: always

- url: /login
  script: main.app
  secure: always

- url: /.*
  script: main.app 
```

然后在 main.py 中，你可以像往常一样声明你的 WSGI 处理程序：

主文件

```
import webapp2
import os

# Models
from models.Shout import Shout

# Controllers
from controllers.HomeHandler import HomeHandler
from controllers.LoginHandler import LoginHandler
from controllers.ProfileHandler import ProfileHandler

if os.environ['SERVER_SOFTWARE'].startswith('Development'):
    app_scheme = 'http'
else:
    app_scheme = 'https'

app = webapp.WSGIApplication([
    webapp2.Route(r'/login', LoginHandler, name='login', schemes=[app_scheme]),
    webapp2.Route(r'/profile', ProfileHandler, name='profile', schemes=[app_scheme]),
    webapp2.Route(r'/', HomeHandler)
], debug=True) 
```

我已将此应用程序的代码上传到我的[AE-BaseApp GitHub](https://github.com/AE-BaseApp/http-to-https)，请随时下载并在您的应用程序中使用它。该代码已获得 Apache License 2.0 的许可。

# css - 背景图像卡在 div 中的某个位置

> ID：10804876
> 
> 赞同：0
> 
> 时间：2012-05-29T18:45:35.000
> 
> 标签：css, image

我有一个比它所在的 div 小的背景图像。我想在 div 中设置它的位置。

我试过了

`background:url(../img/logo.png ) transparent no-repeat fixed ; background-position: 75px -200px;`

无论我做什么来定位图像，它都不会移动。可能是什么原因造成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:52:20.980

如果您对背景属性使用短代码，请同时包含该位置。您无需将其设置为固定。尝试这个：

```
background:url('../img/logo.png') no-repeat 75px -200px; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T18:49:07.223

DIV 是具有设定宽度和高度的块元素吗？如果是，这应该工作：

`background: transparent url(http://placehold.it/100x150) no-repeat 75px -200px;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T18:50:01.243

也许您已经在代码中的其他地方指定了背景图像的位置。你的css的其余部分是什么样的？

# android - 番石榴：java.lang.NoClassDefFoundError - com.google.common.collect.HashBiMap

> ID：10804878
> 
> 赞同：8
> 
> 时间：2012-05-29T18:45:41.093
> 
> 标签：android, hashmap, guava, bimap

我目前在使用从这里下载的番石榴库时遇到 java.lang.NoClassDefFoundError: com.google.common.collect.HashBiMap 的问题： [http ://code.google.com/p/guava-libraries/](http://code.google.com/p/guava-libraries/)

我已经将 guava-12.0.jar 作为参考库添加到我的项目中，但仍然出现错误。您能否就问题所在提供一些建议？感谢您的帮助

```
package my.project;

import android.app.Activity;
import android.os.Bundle;

import com.google.common.collect.BiMap;
import com.google.common.collect.HashBiMap;

public class MainActivity extends Activity{

     private BiMap<String,String>  bidiMap; 

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);     
          setContentView(R.layout.bible_help_cal);

        bidiMap = HashBiMap.create();           
        bidiMap.put("a","100");
        bidiMap.put("b","200");

    }

} 
```

我得到的错误信息

```
05-29 18:35:19.737: E/AndroidRuntime(376): FATAL EXCEPTION: main
05-29 18:35:19.737: E/AndroidRuntime(376): java.lang.NoClassDefFoundError: com.google.common.collect.HashBiMap
05-29 18:35:19.737: E/AndroidRuntime(376):  at my.project.MainActivity.onCreate(MainActivity.java:18)
05-29 18:35:19.737: E/AndroidRuntime(376):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
05-29 18:35:19.737: E/AndroidRuntime(376):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1712)
05-29 18:35:19.737: E/AndroidRuntime(376):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1764)
05-29 18:35:19.737: E/AndroidRuntime(376):  at android.app.ActivityThread.access$1500(ActivityThread.java:122)
05-29 18:35:19.737: E/AndroidRuntime(376):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1002)
05-29 18:35:19.737: E/AndroidRuntime(376):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-29 18:35:19.737: E/AndroidRuntime(376):  at android.os.Looper.loop(Looper.java:132)
05-29 18:35:19.737: E/AndroidRuntime(376):  at android.app.ActivityThread.main(ActivityThread.java:4025)
05-29 18:35:19.737: E/AndroidRuntime(376):  at java.lang.reflect.Method.invokeNative(Native Method)
05-29 18:35:19.737: E/AndroidRuntime(376):  at java.lang.reflect.Method.invoke(Method.java:491)
05-29 18:35:19.737: E/AndroidRuntime(376):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
05-29 18:35:19.737: E/AndroidRuntime(376):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
05-29 18:35:19.737: E/AndroidRuntime(376):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-29T18:49:39.493

此错误意味着该类在编译时可用，但在运行时找不到。当您的编译时类路径与运行时类路径不同时，通常会发生这种情况。

您的运行时类路径很可能不包含 guava jar。要验证这一点，请尝试在代码中[打印您的类路径](http://dev-answers.blogspot.com/2006/06/how-do-you-print-java-classpath.html)。

在命令行上，你可以使用： java -cp "path/to/guava.jar" MyMainClass

或者，设置 CLASSPATH 环境变量以包含 jar。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-04-02T21:35:51.673

我试图使用`sourceCompatibility JavaVersion.VERSION_1_8`启用的上游 Guave 21 和 22。这会在低于 SDK 版本 24 的设备上导致此错误。解决方案是使用仍支持 Java 7 的 guave 版本，该版本已向后移植到 Android。

```
dependencies {
  compile 'com.google.guava:guava:23.3-android'
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-25T16:13:55.867

就我而言，我的图书馆中有番石榴和谷歌收藏。google-collection 库与 guava 库发生冲突。如果您同时拥有 guava 和 google-collection，请尝试删除 google-collection 以进行重建。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-19T07:01:06.120

只需从这里下载 Guava 库[Guava](https://code.google.com/p/guava-libraries/)

清洁和建造。为我工作。希望能帮助到你。干杯

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-17T14:15:18.603

就我而言，我尝试添加`guava-17.0.jar`选项**`Add External JARs...`**，这**就是问题所在**。当**我`guava-17.0.jar`在我的项目文件夹中**移动（在 Libs 文件下）时，我没有问题。

当然，我删除了 External JAR 并使用**`Add JARs...`**选项再次添加它

# c# - 为 Mono 寻找 NoSQL 解决方案

> ID：10804883
> 
> 赞同：0
> 
> 时间：2012-05-29T18:46:04.667
> 
> 标签：c#, mono, nosql

我正在寻找在 Windows 和 Linux 上使用 C# 的 NoSQL 数据库。我更喜欢这样的解决方案，我可以在我的应用程序中拥有数据库服务器（作为程序集“.dll”），并且不需要专用服务器。不过，可选的专用服务器会很好。

原生 Mono 支持会比现有数据库解决方案的补丁更好，例如[http://codeofrob.com/entries/ravendb-on-mono.html](http://codeofrob.com/entries/ravendb-on-mono.html)

感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T18:51:41.717

MongoDB不会吗？我相信[官方的 C# 驱动程序](http://github.com/mongodb/mongo-csharp-driver/downloads)托管在 Github 上。[这也是](http://sourcecodebean.com/archives/mongodb-c-and-mono/1408)一个快速入门！请注意，驱动程序已经成熟并且也[支持 LINQ](http://www.mongodb.org/display/DOCS/CSharp+Driver+LINQ+Tutorial)。

还是我误解了你的问题？

# spring - 动态 Spring bean 创建

> ID：10804885
> 
> 赞同：3
> 
> 时间：2012-05-29T18:46:10.303
> 
> 标签：spring, cdi, inject

我正在使用一个 API，它以 XXXLocalServiceUtil 类的形式公开服务，这些类是单例对象的静态包装器。我不想使用静态 XXXLocalServiceUtil 方法，而是想自己注入 XXXLocalService 对象以直接在我的代码中使用它们，例如：

```
@Named
public class MyMailingService {        
    @Inject UserLocalService userService;

    public String mailUser(String email) {
       User user = userService.getUser(email);
       emailUser(user);
    }
} 
```

并像这样配置我`applicationContext.xml`：

```
<beans ...>
    <bean class="x.y.z.UserLocalServiceUtil" factory-method="getService"/>
    <bean class="x.y.z.CompanyLocalServiceUtil" factory-method="getService"/>
    ...
</beans> 
```

这完美地工作。现在，我正在谈论的这个 API 有大约 100 个这样的 XXXLocalServiceUtil 类，每个类都有自己的`getService`返回实际服务的静态方法。我不想在我的列表中列出所有这些服务，而是`applicationContext.xml`让 Spring 为我注入的每个 XXXLocalService 找到正确的 XXXLocalServiceUtil 类。所以我需要的是某种动态的 bean 工厂，它会为我完成工作，当然是在延迟加载的基础上。

有人知道如何轻松实现这一目标吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T20:19:53.223

您可以使用**GenericApplicationContext**将 bean 与在 xml 中声明的其余 spring bean 一起动态加载到 applicationContext。[这是使用反射库](http://code.google.com/p/reflections/)实现的示例...

```
private static final Pattern SERVICE_UTIL_PATTERN = Pattern.compile(".*LocalServiceUtil.*");

public static void main(String[] args) {
    ConfigurationBuilder builder = new ConfigurationBuilder().addUrls(
            ClasspathHelper.forPackage("x.y.z"))
            .setScanners(new SubTypesScanner(false));
    Reflections reflections = new Reflections(builder);
    GenericApplicationContext applicationContext = new GenericApplicationContext();
    Set<Class<? extends Object>> classes = reflections.getSubTypesOf(Object.class);

    for (Class<? extends Object> serviceUtilClass : classes) {
        String className = serviceUtilClass.getName();

        if (SERVICE_UTIL_PATTERN.matcher(className).matches()) {
            GenericBeanDefinition beanDefinition = new GenericBeanDefinition();
            beanDefinition.setBeanClassName(className);
            beanDefinition.setFactoryMethodName("getService");
            beanDefinition.setLazyInit(true);

            String beanName = StringUtils.uncapitalize(serviceClass.getSimpleName().replace("Util", ""));
            applicationContext.registerBeanDefinition(beanName, beanDefinition);
        }
    }

    XmlBeanDefinitionReader reader = new XmlBeanDefinitionReader(applicationContext);
    reader.loadBeanDefinitions("classpath:/applicationContext.xml");
    applicationContext.refresh();
} 
```

**更新：** 要在 Web 应用程序中使用它，您可以简单地扩展 Spring 的**XmlWebApplicationContext**并覆盖该`initBeanDefinitionReader`方法，如下所示...

```
private static final Pattern SERVICE_UTIL_PATTERN = Pattern.compile(".*LocalServiceUtil.*");

@Override
protected void initBeanDefinitionReader(
        XmlBeanDefinitionReader beanDefinitionReader) {
    ConfigurationBuilder builder = new ConfigurationBuilder().addUrls(
            ClasspathHelper.forPackage("x.y.z"))
            .setScanners(new SubTypesScanner(false));
    Reflections reflections = new Reflections(builder);
    Set<Class<? extends Object>> classes = reflections.getSubTypesOf(Object.class);
    BeanDefinitionRegistry registry = beanDefinitionReader.getRegistry();

    for (Class<? extends Object> serviceClass : classes) {
        String className = serviceClass.getName();

        if (SERVICE_UTIL_PATTERN.matcher(className).matches()) {
            GenericBeanDefinition beanDefinition = new GenericBeanDefinition();
            beanDefinition.setBeanClassName(className);
            beanDefinition.setFactoryMethodName("getService");
            beanDefinition.setLazyInit(true);
            String beanName = StringUtils.uncapitalize(serviceClass
                    .getSimpleName().replace("Util", ""));
            registry.registerBeanDefinition(beanName, beanDefinition);
        }
    }
} 
```

}

并将以下内容添加`context-param`到您的**web.xml** ...

```
<context-param>
  <param-name>contextClass</param-name>
  <param-value>x.y.z.MyXmlWebApplicationContext</param-value>
</context-param> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T19:14:22.913

您可以尝试的一件事是更改并在 applicationContext.xml`@Inject`中`@Autowired`定义为按类型自动装配，如下所示：

```
<beans ... default-autowire="byType">
    ...
</beans> 
```

`@Inject`和`@Autowired`是等价的，但是 Spring 的`@Autowired`注解具有强制注入*所需属性的优点。*

**另一种解决方案：**

您可以使用具有作用域**原型**的 bean，而不是使用工厂。

您`XXXLocalService`必须实现`ApplicationContextAware`接口，并通过它获取原型 bean，即：

```
@Named
public class MyMailingService implements ApplicationContextAware {        
    @Inject UserLocalService userService;

    private ApplicationContext appContext;

    @Override
    public void setApplicationContext(ApplicationContext applicationContext) {
        this.appContext = applicationContext;
    }

    public String mailUser(String email) {
       User user = (User) appContext.getBean("user");
       emailUser(user);
    }
} 
```

你的 applicationContext.xml 看起来像：

```
<beans ...>
    <bean id="user" class="x.y.z.User" scope="prototype"/>
    ...
</beans> 
```

每次调用`getBean()`您都会获得该类型的新对象，并具有将所有内容注入该 bean 的好处。

# javascript - 查找与模式匹配的所有子字符串

> ID：10804886
> 
> 赞同：0
> 
> 时间：2012-05-29T18:46:15.317
> 
> 标签：javascript, regex

我需要在一个长字符串中找到像“something.somethingElse.get()”这样的所有子字符串。我以这种方式使用匹配功能

```
myString.match(/\S+\.\S+\.get\(\)/); 
```

它有效，但只返回第一次出现，所以我必须以某种方式拆分字符串以消除第一个部分并再次重复匹配。有没有更有效的方法来做到这一点？我的意思是类似于搜索函数，它返回数组或对象中的所有子字符串

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T18:47:48.590

`myString.match(/\S+\.\S+\.get\(\)/gi);`

您需要在正则表达式的末尾添加*全局开关。*

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/match（thanx，vcsjones](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/match)）

# adplus - 如何在崩溃模式下运行 adplus 但在关机时不写转储？

> ID：10804891
> 
> 赞同：1
> 
> 时间：2012-05-29T18:46:51.227
> 
> 标签：adplus

如果我运行：

adplus.exe -pmn "MyClient.exe" -o "d:\DumpFiles" -crash

当我关闭时，我创建了一个转储文件：

FULLDUMP_FirstChance_epr_Process_Shut_Down_MyClient.EXE__333c_2012-05-29_14-29-04-654_2690

有没有办法在崩溃模式下运行 adplus 但不创建这个 Process_Shut_Down 转储？（或者这是否意味着关机期间出现异常？）

我想监视我的应用程序是否存在运行时异常，但如果程序正常退出，我不想填满硬盘驱动器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:25:11.833

您可以在运行 adplus 时指定配置文件：

这是我文件的内容：D:\DumpFiles\conf.txt

```
<ADPlus Version='2'>
  <Exceptions>  
        <Exception Code="epr">
            <Actions1>Void</Actions1>
            <Actions2>Void</Actions2>
        </Exception> 
   </Exceptions>
</ADPlus> 
```

现在我们可以运行： adplus.exe -c D:\DumpFiles\conf.txt -pmn notepad++ -crash -o "D:\DumpFiles"

使用配置文件解决了这个问题，adplus 似乎足够聪明，只是应用这个“epr”异常规则作为唯一的区别。我使用 WinMerge 比较生成的“DebuggerScript.txt”文件。

注意：如果您使用此配置文件运行 taskkill notepad++，您将不会得到转储。

# android - 使用 SQLite 触发器更新“LastModified”字段

> ID：10804892
> 
> 赞同：10
> 
> 时间：2012-05-29T18:46:51.650
> 
> 标签：android, sqlite, triggers

这可能更像是一个设计问题，但在这里。我正在编写一个使用本地 SQLite 数据库（带有多个表）的 Android 应用程序，该数据库时不时地与 MySQL 数据库同步。我只想更新数据库中修改过的行。为此，我将`last_modified`在每一行中添加一列“”，以指示添加/更新/替换/等该行的时间。

我是数据库操作的新手，但我已经看到触发器可能是执行此操作的最佳方法。我有几个关于触发器、SQLite 和 Android 的问题。

我已经阅读了这个链接：[on update current_timestamp with SQLite](https://stackoverflow.com/questions/6578439/on-update-current-timestamp-with-sqlite)它基本上说我使用了正确的方法。我的问题是：

1.  我应该把`db.execSQL("CREATE TRIGGER...")`声明放在哪里？在我创建表之前还是之后？
2.  我可以对数据库中的每个表使用相同的触发器吗？即，触发器能否自动检测正在更新/插入/替换/等的表和行？并通知设置该行的“ `last_modified`”字段，还是我必须为每个表创建一个单独的触发器？
3.  由于我对数据库操作很陌生，您能否提供一个执行上述行为的示例 Android Trigger 语句，或者为示例提供资源？

或者如果触发器是一个坏主意，有没有更好的选择？

谢谢你。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-29T18:55:20.783

给你一个简短而甜蜜的答案：

1.  之后，触发器有一个有效的表可供参考。
2.  您需要为要影响的每个表/列组合执行 CREATE TRIGGER。数据库不会*假设*，因为另一个表有一个`last_modified`列，您希望该列的行为相同......
3.  您链接中的触发器是可执行的（我自己使用过），只需更改表/列名。

最后，使用这样的触发器是我知道的*最简单*的维护`last_modified`或`last_accessed`时间戳的方法。

我的触发器（以 java 形式）：

```
private static final String UPDATE_TIME_TRIGGER =
    "CREATE TRIGGER update_time_trigger" + 
    "  AFTER UPDATE ON " + TABLE_NAME + " FOR EACH ROW" +
    "  BEGIN " +
        "UPDATE " + TABLE_NAME + 
        "  SET " + TIME + " = current_timestamp" +
        "  WHERE " + ID + " = old." + ID + ";" +
    "  END"; 
```

**添加**

根据[SQLite 网站](http://www.sqlite.org/lang_createtrigger.html)，您需要为每种类型的操作创建一个触发器。换句话说，您**不能**使用：

```
CREATE TRIGGER trigger_name 
  AFTER UPDATE, INSERT ... 
```

从您上次的评论中，您可能已经找到了为我们的目的处理 INSERT 语句的最佳方法：

```
CREATE TABLE foo (
  _id INTEGER PRIMARY KEY,
  last_modified TIMESTAMP NOT NULL DEFAULT current_timstamp); 
```

在此表中，您不需要为 INSERT 语句创建时间戳触发器，因为它已经完成。（有趣的事实：`INTEGER PRIMARY KEY`隐式添加`AUTOINCREMENT NOT NULL`以及默认增量值到我们的`_id`列。）

# c# - 企业库问题 - 将 Web 项目从 .Net 1.1 切换到 2.0

> ID：10804893
> 
> 赞同：0
> 
> 时间：2012-05-29T18:47:04.863
> 
> 标签：c#, enterprise-library

最近我们决定将网站从 1.1 升级到 2.0。我们使用 Visual Studio 2010 进行升级，升级工作正常。

该网站使用 Enterprise Library 2005，我们一直在努力让它工作。由于 API 的主要差异，我们不希望升级 Enterprise Library 2006。

为了让 Enterprise Library 工作，我们做的第一件事就是将它添加到 \Framework\v2.0.50727\Machine.Config

```
 <?xml version="1.0" encoding="UTF-8"?>
    <configuration>
        <configSections>
            <section name="enterpriselibrary.configurationSettings" type="System.Configuration.IgnoreSectionHandler, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
        </configSections>
        <enterpriselibrary.configurationSettings xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" applicationName="X" xmlns="http://www.microsoft.com/practices/enterpriselibrary/08-31-2004/configuration">
            <configurationSections>
                <configurationSection xsi:type="ReadOnlyConfigurationSectionData" name="dataConfiguration" encrypt="false">
                    <storageProvider xsi:type="RegistryStorageProviderData" name="Registry Storage Provider" registryRoot="LocalMachine" registrySubKey="SOFTWARE\X" />
                    <dataTransformer xsi:type="XmlSerializerTransformerData" name="Xml Serializer Transformer">
                        <includeTypes />
                    </dataTransformer>
                </configurationSection>
                <configurationSection xsi:type="ReadOnlyConfigurationSectionData" name="securityCryptographyConfiguration" encrypt="false">
                    <storageProvider xsi:type="RegistryStorageProviderData" name="Registry Storage Provider" registryRoot="LocalMachine" registrySubKey="SOFTWARE\X" />
                    <dataTransformer xsi:type="XmlSerializerTransformerData" name="Xml Serializer Transformer">
                        <includeTypes />
                    </dataTransformer>
                </configurationSection>
            </configurationSections>
            <keyAlgorithmStorageProvider xsi:nil="true" />
            <includeTypes />
        </enterpriselibrary.configurationSettings>
    </configuration> 
```

但是每次我调用这个函数

```
Cryptographer.CompareHash( "X", X, X ) 
```

我收到这个错误

```
System.InvalidCastException was unhandled
  Message=Specified cast is not valid.
  Source=Microsoft.Practices.EnterpriseLibrary.Configuration
  StackTrace:
       at Microsoft.Practices.EnterpriseLibrary.Configuration.Storage.ConfigurationChangedRegistryWatcher.Poller()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.runTryCode(Object userData)
       at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData)
       at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

当我尝试调用此函数时，我也会遇到同样的错误

```
DBCommandWrapper l_sqlWrapper = _db.GetStoredProcCommandWrapper("x");
l_sqlWrapper.AddInParameter("@x", DbType.Int32, "X"); 
```

我想补充一点，这在 1.1 中运行良好，并且我已经检查过我传入的所有值都不是 null 并且具有合法值。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T23:49:21.427

.NET 2.0 明确不支持 Entlib 1.1。实际上，它不再受支持，但这是一个不同的问题。

.NET 1.1 和 .NET 2.0 之间存在大量差异。改变很大的事情之一是配置系统。

我有幸用 VS 2005 编译 entlib 1.1 以获得 2.0 目标版本，但那是很久以前的事了，我只做了简短的测试。

基本上，这里的规范答案是“切换到 entlib 2”。是的，发生了很大变化，但是 1.1 的东西不再起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:08:19.210

问题已修复。

我们通过下载企业库并将其转换为 .Net 2.0 下的 VS2010 解决了这个问题。然后我们确实在#define VS2003 上找到/替换到#define VS2005B2。

然后我们添加了对该项目的引用，一切正常。

# ruby - 在 rake 任务中调用模型方法

> ID：10804894
> 
> 赞同：0
> 
> 时间：2012-05-29T18:47:07.607
> 
> 标签：ruby, ruby-on-rails-3.1, rake

我的问题很简单，但我找不到正确的答案。我有一个调用模型方法的 rake 任务。

```
task :post do
    BufferPreference.post
end 
```

它不起作用并抛出错误 uninitialized constant BufferPreference

我尝试添加以下要求： require 'buffer_preferences' 但我收到错误 no such file to load -- buffer_preference

我的模型定义如下：

```
class BufferPreference < ActiveRecord::Base 
```

在文件 buffer_preference.rb 中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T18:54:24.783

如果您想将控制器操作作为控制器的方法运行，这不是一个好习惯。尝试将您的代码移动到**`Model`**.

尝试这个：

```
task :post => :environment do
    BufferPreference.post
end 
```

`BufferPreference.post`这意味着你应该有`BufferPreference`模型，类方法称为`post`.

# rspec - 如何用 Capybara 填充隐藏字段？

> ID：10804897
> 
> 赞同：61
> 
> 时间：2012-05-29T18:47:26.943
> 
> 标签：rspec, capybara

我已经发现，当我想为文本字段、文本区域或密码字段设置值时，我可以使用 id、name 或 label，如`something`. `fill_in something, :with => some_value`但是，当我尝试为`<input type="hidden">`字段设置值时，这种方法会失败（我想这样做，因为这些通常是我单独测试的填充客户端脚本）。我怎么能用水豚设置这样一个隐藏的领域？可能吗？

HTML：

```
<input id='offer_latitude' name='offer[latitude]' type='hidden'>
<input id='offer_longitude' name='offer[longitude]' type='hidden'> 
```

规格：

```
describe "posting new offer" do
  it "should add new offer" do
    visit '/offer/new'
    fill_in 'offer[latitude]', :with => '11.11'
    fill_in 'offer[longitude]', :with => '12.12'
    click_on 'add'
  end
end 
```

给出：

```
1) posting new offer should add new offer
   Failure/Error: fill_in 'offer[latitude]', :with => '11.11'
   Capybara::ElementNotFound:
     cannot fill in, no text field, text area or password field with id, name, or label 'offer[latitude]' found 
```

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-05-29T19:05:39.080

您需要找到隐藏字段并设置其值。有几种方法，这可能是最简单的

```
find(:xpath, "//input[@id='my_hidden_field_id']").set "my value" 
```

如果您在生产中执行 client_side 脚本，您可以告诉 capybara 使用兼容 javascript 的驱动程序运行它

```
page.execute_script("$('hidden_field_id').my_function()") 
```

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2015-02-18T15:51:10.503

有很多方法可以达到相同的结果。我最喜欢的一个是：

```
first('input#id.class', visible: false).set("your value") 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-19T21:38:35.630

如果您使用 poltergeist/phantomjs 作为驱动程序并且 jquery 不适合您，那么总是有很好的老式 js：

```
page.execute_script("document.getElementById('#some-id').value = 'some-value'"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-09-23T10:43:01.457

这对我有用

```
find_field(id: 'your_hidden_field_id', type: :hidden).set('Field value here') 
```

# c++ - I/O 优化端口完成框架

> ID：10804905
> 
> 赞同：0
> 
> 时间：2012-05-29T18:47:56.777
> 
> 标签：c++, windows, networking, tcp, udp

我需要一些支持 TCP/UDP 的 Windows 的良好 I/O 完成框架。我发现了这个：[http](http://www.serverframework.com/) ://www.serverframework.com/但价格离我的预算限制太远了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:16:27.147

您可以随时尝试免费版本的服务器框架，您可以从这里下载：[http ://www.serverframework.com/products---the-free-framework.html](http://www.serverframework.com/products---the-free-framework.html)

在过去的 10 年中，这已被 1000 名开发人员使用并且运行良好，尽管不受支持，但没有关于它的未解决的错误报告。它没有服务器框架中可用的所有功能，但在您的预算之内；）

# css - 将 div 从侧边栏定位到窗口的右边框

> ID：10804908
> 
> 赞同：0
> 
> 时间：2012-05-29T18:48:15.383
> 
> 标签：css, html, positioning

我无法根据需要定位 div。这是我想要的布局模式。

[http://cl.ly/1q2s0k283A3M2u2N1b0D](http://cl.ly/1q2s0k283A3M2u2N1b0D) [编辑]

红色部分是有问题的部分。我希望它从左侧边栏到窗口的右边框。

我能怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:54:32.763

一些代码：http: [//jsfiddle.net/zZqaM/3/](http://jsfiddle.net/zZqaM/3/)。

制作一个固定宽度的容器。里面是一个条形，具有固定的宽度和一个`float: left;`. 接下来，也是在里面，一个`div`向右浮动的内容，和一个里面的标题，带有填充内容的`div`宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:06:02.907

我猜你的左栏（菜单之一？）有一个固定的宽度，所以这是一个工作示例：

```
#header {
    width: 100%;
    height: 40px;
    background: blue;
}
#content{
    height: 300px;
    width: 100%;
}
#left_bar {
    float: left;
    margin-left: 20px;
    width: 100px;
    height: 100%;
    background: green;
}
#right_bar {
    margin-left: 120px;
    height: 100%;
    background: yellow;
}
#header_right {
    width: 100%;
    height: 30px;
    background: red;
}
```

```
<body>
<div id="header">
</div>
<div id="content">
    <div id="left_bar">
    </div>
    <div id="right_bar">
        <div id="header_right">
        </div>
    </div>
</div>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T19:13:45.287

绝对定位一切皆有可能！

[jsFiddle](http://jsfiddle.net/bJWkr/)

您可以通过修改最后一个属性来指定浏览器窗口左侧和侧边栏之间需要多少空白：

```
#sidebar,
#red {
    left:20px; /* change this to anything, change to 0 if none is desired  */
}​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T20:28:28.903

我决定做出一个新的答案而不是编辑，因为这是一种完全不同的方法：

[jsFiddle](http://jsfiddle.net/s8WUr/)

### 关键要素：

*   有一个虚拟元素 ( `#dummy`) 将菜单栏的背景颜色扩展到浏览器窗口的右侧，纯粹用于装饰目的。
*   `#sidebar`绝对定位，使其延伸到浏览器窗口的底部。
*   `#sidebar`, `#content`, 和 `#menu`位于 #container 中，该容器具有固定宽度并已`margin:0 auto`应用，因此它始终在浏览器中居中。

# vba - 将多个工作表复制到一个

> ID：10804914
> 
> 赞同：1
> 
> 时间：2012-05-29T18:48:45.327
> 
> 标签：vba, excel

我花了一段时间寻找有关编写代码以将匹配数据从多个工作表复制到单个工作表中的帮助，但我发现的唯一一个类似的操作位于此处：[Find Match, Copy Row from Sheet1 and Insert Into Sheet2](https://stackoverflow.com/questions/4806170/find-match-copy-row-from-sheet1-and-insert-into-sheet2)

我尝试对其进行调整以适应我的需求，但我不太擅长 VBA，我无法让它做我想做的事。任何帮助将不胜感激。

我拥有的是一个有四个工作表的工作簿；`Master`, `FescoMonthly`,`Schedule`和`FescoData`. 这些工作表由我们的客户发送给我们，因此我可以导入它们，但我不想更改它们的布局，这是问题的一部分。我希望宏在每个工作表中搜索匹配的仪表编号，并将某些行复制到一个名为`Combined`.

在`Master`工作表中，我需要将整个内容从第 5 行复制到底部（目前是 1982 年，但可以添加更多）和 A 到 F 列。-----A 列是米数

在`FescoMonthly`工作表中，我需要将第 5 行复制到底部和 A 到 H 列，方法是将 D 列（仪表编号）中的相同仪表编号匹配到主工作表的 A 列。

在`Schedule`工作表中，我需要通过将 A 列（米数）与主工作表的 A 列相匹配，将第 5 行复制到底部和 A 到 D 列。

在`FescoData`工作表中，我需要通过将 A 列（米数）与主工作表的 A 列相匹配，将第 5 行复制到底部和 A 到 C 列。

如果有人可以帮助我进行匹配和复制`Master`，`FescoMonthly`我想我可以弄清楚如何做其他人，我可以重新发布我的工作，看看我是否做得对。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T19:17:57.667

将 sht 设置为包含要复制的数据的工作表
将 trg 设置为目标工作表
将 colCount 设置为要复制的列数

```
Set rng = sht.Range(sht.Cells(5, 1), sht.Cells(65536, 1).End(xlUp).Resize(, colCount)) 
' start at row 5, then get the last row with data, and then expand to the  number of columns
trg.Cells(65536, 1).End(xlUp).Offset(1).Resize(rng.Rows.Count, rng.Columns.Count).Value = rng.Value 
' find last unused cell in first column, and copy the data there 
```

（在 excel 2007 或更高版本中使用 1048576 而不是 65536）

# grails - Grails blob 到 pdf

> ID：10804915
> 
> 赞同：1
> 
> 时间：2012-05-29T18:48:48.170
> 
> 标签：grails, groovy

我已将 pdf 文件存储为 blob，当我尝试在浏览器中将其呈现为 pdf 时，它看起来像这样：

```
%PDF-1.4 %���� 5 0 obj <>stream x��[]s�6} 
```

这是我在使用的控制器中的操作 def showDetails = {

```
 def product = Sample.get(params.id)

    response.contentType = 'application/pdf' 
    response.setHeader('Content-disposition', 'attachment; filename=file.pdf')
    response.getOutputStream().write(product.file)

    response.getOutputStream().flush()

} 
```

我也尝试添加`response.characterEncoding = "utf 8"`，但也没有用。

澄清一下：我有一个将 pdf 文件存储为 blob 的表单。一旦对象存储在数据库中，对象和一些参数（名称、日期等）就会出现在我的应用程序中。该名称是可点击的，它将在 div 中呈现指向 blob 文件的链接：

```
<g:remoteLink id="${s.id}" update="details"  controller="submitSample"action="showDetails" >${s.sampleNameID}</g:remoteLink></td> 
```

如果我像这样将 getOutputStream 更改为 getBytes() ，我会收到此错误：

```
No signature of method: [B.getBytes() is applicable for argument types: () values: [] 
```

可能的解决方案：getClass()、getAt(groovy.lang.ObjectRange)、getAt(java.lang.Integer)、getAt(groovy.lang.IntRange)、getAt(java.lang.String)、getAt(groovy.lang.Range ）。

简单地使用 product.file 会给我输出乱码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T20:12:36.257

我不确定它是什么数据类型，`product.file`但是假设它是一个`java.io.File`这应该可以工作......

```
 response.setContentType('application/pdf');
  response.setHeader('Content-disposition', 'Attachment; filename=file.pdf');
  response.getOutputStream().write(product.file.toNewInputStream());
  response.getOutputStream().flush(); 
```

**但是**，如果`product.file`是 blob，则需要先从中获取字节，然后再将其发送到浏览器响应...

```
 response.setContentType('application/pdf');
 response.setHeader('Content-disposition', 'Attachment; filename=file.pdf');
 response.getOutputStream().write(product.file.getBytes());
 response.getOutputStream().flush(); 
```

**这是未经测试的代码，但我认为您明白了**。我认为您看到打印到浏览器输出的奇怪字符是因为它只是在执行您的 blob 的 toString() 。享受。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T19:01:41.110

尝试同时指定`Content-Disposition`：

```
response.contentType = 'application/pdf'
response.setHeader('Content-disposition', 'Attachment; filename=file.pdf')
response.getOutputStream().write(product.file) 
```

# jquery - 具有自动注销功能的空闲计时器

> ID：10804916
> 
> 赞同：0
> 
> 时间：2012-05-29T18:48:55.430
> 
> 标签：jquery, timer, logout

如果我想在我的网页上监听用户活动，我想知道哪种方法更好，如果他空闲超过 10 分钟，将显示警告屏幕，如果 5 分钟后仍然空闲，它将自动注销。这是出于安全原因，我的页面在 WP 上。所以我找到了[jQuery idleTimer 插件](http://paulirish.com/2009/jquery-idletimer-plugin/)，但我不确定它是否监听实际浏览，而不仅仅是鼠标移动。我找不到与此问题相关的任何 WP 插件或 hack。我应该使用什么？

谢谢你的帮助！

# xml - 将 XML 转换为 VB.NET 字典

> ID：10804917
> 
> 赞同：4
> 
> 时间：2012-05-29T18:48:59.843
> 
> 标签：xml, vb.net, linq, dictionary, linq-to-xml

我正在尝试使用 LINQ 将 XML 中的子值放入字典集合中。我已经使用与 XML 结构相同但无法搜索特定值的列表和自定义集合来完成此操作。如果我知道 parentName、childName 和 subChildName，我希望能够找到 subChildProperty1.value 和 subChildProperty2.value，而无需遍历整个集合和随后的每个子集合，就像我必须处理列表一样。这可能不是最好的实现，并且愿意接受建议，但仍然想弄清楚如何使其工作。这将允许我有一个字典项目是：

```
key = "parentNameValue1.childNameValue1.subchildNameValue1.subChildProperty1"
value = 0 
```

我可以将字符串连接起来形成一个特定的键并在该键上搜索以返回一个值。

XML:

```
<root>
    <parent>
        <parentName>parentNameValue1</parentName>
        <child>
            <childName>childNameValue1</childName>
            <subchild>
                <subchildName>subchildNameValue1</subchildName>
                <subChildProperty1>0</subChildProperty1>
                <subChildProperty2>5</subChildProperty2>
            </subchild>
            <subchild>
                <subchildName>subchildNameValue2</subchildName>
                <subChildProperty1>0</subChildProperty1>
                <subChildProperty2>10</subChildProperty2>
            </subchild>
        </child>
    </parent>
<root> 
```

这个问题有点类似于[这里的这个问题，](https://stackoverflow.com/questions/8950493/converting-xmldocument-to-dictionarystring-string "将 XmlDocument 转换为 Dictionary<string, string>")但我无法让代码在 VB 中为我的应用程序工作。

我是 SO（和 VB）的新手，所以如果我的礼仪不正确，我深表歉意。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T19:03:17.507

借助 VB.NET 强大的 XML 支持，这很容易做到：

```
Imports System.Xml.Linq

...

Sub Main()
    Dim xml = _
        <root>
            <parent>
                <parentName>parentNameValue1</parentName>
                <child>
                    <childName>childNameValue1</childName>
                    <subchild>
                        <subchildName>subchildNameValue1</subchildName>
                        <subChildProperty1>0</subChildProperty1>
                        <subChildProperty2>5</subChildProperty2>
                    </subchild>
                    <subchild>
                        <subchildName>subchildNameValue2</subchildName>
                        <subChildProperty1>0</subChildProperty1>
                        <subChildProperty2>10</subChildProperty2>
                    </subchild>
                </child>
            </parent>
        </root>

    ' Alternatively, load XML from a file
    ' Dim xml = XDocument.Load(fileName)

    Dim dict As New Dictionary(Of String, Integer)

    ' Extract the properties
    For Each parent In xml.<parent>
        Dim parentName = parent.<parentName>.Value
        For Each child In parent.<child>
            Dim childName = child.<childName>.Value
            For Each subchild In child.<subchild>
                Dim subchildName = subchild.<subchildName>.Value
                For Each prop In subchild.Elements.Where(Function(e) e.Name <> "subchildName")
                    dict.Add(String.Format("{0}.{1}.{2}.{3}", parentName, childName, subchildName, prop.Name), _
                             Integer.Parse(prop.Value))
                Next
            Next
        Next
    Next

    ' Print the values, to show that we've done a good job
    For Each kv In dict
        Console.WriteLine("{0}: {1}", kv.Key, kv.Value)
    Next
    Console.ReadLine()
End Sub 
```

[（显然，代码假定 Option Strict On 和 Option Infer On。）]

# xml - 什么 XML 模式 dataType 对二进制数据来说是节省空间的？

> ID：10804920
> 
> 赞同：2
> 
> 时间：2012-05-29T18:49:10.547
> 
> 标签：xml, xsd

我正在创建一个 XML 模式，并且需要包含一些原始二进制数据的字段。哪种内置数据类型提供最节省空间的表示？我认为`base64Binary`和`hexBinary`作为两种可能性，但它们似乎都是十六进制代码的字符串表示，因此不节省空间，并且还会导致编码它们的时间损失。哪种内置数据类型可以为我的二进制数据提供最佳的空间和时间效率表示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T19:38:34.480

没有其他开箱即用的类型可以处理二进制内容。

最高效的是 base64，开销约为 30%；hex 至少是大小的两倍。还假设您使用主要是单字节字符集，例如 utf-8。使用 utf-16 编码 XML 将看到上述数字加倍。

使用这些内置类型的优势在于典型的 xml 到代码绑定库；例如，JAXB 会给你一个字节[]，所以编码/解码对你来说是透明的。

它还取决于您如何移动/存储 XML；如果您使用支持二进制附件的基于 SOAP 的序列化程序，那么特别是对于大型集合，沿着这条路线走下去是值得的。

# regex - 正则表达式匹配不起作用

> ID：10804921
> 
> 赞同：1
> 
> 时间：2012-05-29T18:49:11.607
> 
> 标签：regex

嗨，我有一个正在处理的正则表达式，并试图找出它不匹配的原因。

一些示例匹配应该是：

```
sxbad0ap_ach_refund_inp_0x253_041012.txt
sxbad0ap_ach_refund_inp_a7255_042512.txt 
```

正则表达式：

```
^sxbad0ap_ach_refund_inp_[a-z0-9]{5}_[0-9]{6}\.txt$ 
```

链接到正则表达式测试： [http ://regexr.com?313ni](http://regexr.com?313ni)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T18:54:59.283

这是一个测试问题：如果您将每个字符串单独放置，您的正则表达式将完美匹配它们。由于您将这两个项目都放在测试仪的框中，并且您的正则表达式具有`^`并`$`要求整个字符串匹配，因此两个字符串一起不匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T18:54:49.927

如果我打开`global`标志，并在您的正则表达式末尾删除`$`（或启用）[它匹配正常](http://regexr.com?313no)。`multiline`

`sxbad0ap_ach_refund_inp_[a-z0-9]{5}_[0-9]{6}\.txt`

# django - 如何安装外部 pinax 项目？

> ID：10804923
> 
> 赞同：0
> 
> 时间：2012-05-29T18:49:32.680
> 
> 标签：django, pinax

我尝试处理 Pinax 的不良文档。

我找到了这个项目

```
https://github.com/pinax/pinax-multiblog-project 
```

我想要的是安装它。我通常安装一个名为 account 的项目，但在这里我必须从 git 安装。我怎么能在 Pinax 中做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T17:37:30.967

# 编辑：

事实证明，使用项目的新方法是复制文件夹并重命名它。

## 使用说明：

所以要使用你会做的多博客项目

将克隆存储库中的多博客复制到新位置，并将其重命名为您希望用于项目的名称。然后通过 pip 安装需求并按照其余步骤设置 django 项目

### 操作系统/Linux：

```
cd ~/src
git clone https://github.com/pinax/pinax-multiblog-project
cp -r ~/src/pinax-project-admin ~/Sites/new_project
cd ~/Sites/new_project"
pip install -r requirements.txt
python manage.py syncdb 
```

* * *

我也一直在努力完成同样的事情。到目前为止，我发现了这个提交 [https://github.com/nrb/pinax/blob/476d2398c48cc444eb2338c12090f0cebad46961/docs/starterprojects.txt](https://github.com/nrb/pinax/blob/476d2398c48cc444eb2338c12090f0cebad46961/docs/starterprojects.txt)

相关部分开始于第 160 行接近尾声

```
External Starter Projects
=========================

The Pinax ``setup_project`` command can also use starter projects built by third     parties. 
These can either be plain directory structures, or they may be a git/hg pip editable.

To install a starter project from an external source, simply pass the file path or git/hg 
URL to the ``-b`` option::

pinax-admin setup_project -b git+git://github.com/user/project.git#egg=project my_new_project 
```

然而，我遇到的所有 pinax 项目似乎都没有包含一个可以使用的鸡蛋

例如：

1.  [https://github.com/pinax/pinax-multiblog-project](https://github.com/pinax/pinax-multiblog-project)
2.  [https://github.com/pinax/pinax-project-account](https://github.com/pinax/pinax-project-account)

我的项目需要使用 Django 1.4，但 Pinax 0.9a2 和 0.9b1-dev10 中包含的帐户基础项目使用 Django 1.3。

我猜外部项目集成是我们必须在 Pinax 1.0 版本中等待的东西。

# jquery - 在运行时获取 div 高度

> ID：10804932
> 
> 赞同：0
> 
> 时间：2012-05-29T18:50:04.507
> 
> 标签：jquery, css

[http://gsclientlounge.co.uk/audi/facebook/lifestyle/day.php?d=4&m=5&y=2012&event_id=54#1](http://gsclientlounge.co.uk/audi/facebook/lifestyle/day.php?d=4&m=5&y=2012&event_id=54#1)

以上 url 我需要根据图像高度更改 div 高度。

但是当我将它与 coda 滑块结合使用时，情况会变得更糟，

它想相应地调整大小，

所以我在下面放了，

```
$(document).ready(function() {
    $("#controls a").click(function() {
        var hI= $(".imgGallery").outerHeight(); 
        $(".pan1").height(hI+40);
        $("#coda-slider-1").height(hI+40);
    });
}); 
```

获取 div 高度并覆盖。

但事情是它覆盖了以前的滑块高度而不是当前的，

任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:29:41.627

我认为高度计算错误，因为它正在计算幻灯片转换之前的高度。所以每次你得到上一张幻灯片的高度而不是当前幻灯片的高度。您需要在滑块的动画完成功能中计算高度

或者

计算延迟后的高度（动画所需的时间，我假设您已定义）。所以它会延迟一个 1000 毫秒的计时器，然后抓取滑块的高度并将其应用于容器

编辑：现在我想到了，如果你在滑动之后计算它，那么它不会那么平滑，因为高度是在滑动之后应用的，这意味着会有一段时间图像被切断。所以你需要做的是找出点击时下一张图像的高度，并将其用作参考点。获取所有滑动项，然后您可以抓取下一张幻灯片并计算高度，当您向前到达最后一项或向后到达第一项时，您需要一些逻辑来找到第一项或最后一项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T05:30:03.517

我已通过为画廊完成事件添加事件来解决此问题。

# c# - 使用 C# 的 Redis 完整搜索文本

> ID：10804936
> 
> 赞同：0
> 
> 时间：2012-05-29T18:50:43.557
> 
> 标签：c#, redis, full-text-search

有没有办法用 C# 在 Redis 上进行全文搜索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:21:34.513

是的，请参阅[http://playnice.ly/blog/2010/05/05/a-fast-fuzzy-full-text-index-using-redis/](http://playnice.ly/blog/2010/05/05/a-fast-fuzzy-full-text-index-using-redis/)。

代码在 Python 中大约 100 LOC，并且可以转换为 C#。

代码使用`metaphone`Python库；您可以在线找到 C# 实现，例如：[http ://code.google.com/p/doublemetaphone/](http://code.google.com/p/doublemetaphone/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-12T15:28:03.933

[RediSearch](http://redisearch.io)在 Redis 之上实现了一个搜索引擎。这还支持更高级的功能，例如精确的短语匹配和文本查询的数字过滤，这是传统 Redis 搜索方法无法实现或高效的。

RediSearch 支持大多数领先的编程语言，包括 C# 参见：[https ://libraries.io/nuget/NRediSearch](https://libraries.io/nuget/NRediSearch)

# python - 循环用于数组元素内的减法

> ID：10804941
> 
> 赞同：2
> 
> 时间：2012-05-29T18:51:04.077
> 
> 标签：python, for-loop, numpy

我是使用 Python 和 Numpy 的新手。我认为这很简单，可能是。我有很多次。
例如：

```
times = (0.5,  0.75,  1.5) 
```

该数组的大小将根据加载的文件而有所不同。

我只是想找到每个后续元素之间的时间差异。

```
0.75 - 0.5
then
1.5 - 0.75 
```

数组中元素的数量也是如此。然后我将每个结果放入一列。

我尝试了各种 for 循环，但无法做到。一定有简单的方法吗？

谢谢，斯科特

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T18:54:47.350

这个怎么样？

```
>>> import numpy as np
>>> a = np.array([0.5,  0.75,  1.5])
>>> np.diff(a)
array([ 0.25,  0.75])
>>> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T19:02:53.200

首先，请注意，对于大多数日常使用，您可能不需要数组（这是 Numpy 中的一种特殊数据类型）。Python 的主要数据存储方式就是列表，如果您来自更严格的编程语言，那么绝对值得一读。列表实际上是使用方括号定义的：

```
times = [ 0.5,  0.75,  1.5 ] 
```

然后，使用称为列表推导的特殊语法，我们可以创建一个包含 (length-1) 个元素的新列表。这个表达式自动计算出所需列表的大小。

```
diffs = [ times[i] - times[i-1] for i in range(1, len(times)) ] 
```

对于提供的示例数据，返回：

```
[0.25, 0.75] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T18:56:51.553

或者这些（同一主题的所有变体）怎么样：

```
import numpy as np
a = np.array([0.5,  0.75,  1.5])
b = a[1:]-a[:-1]
print (b) 
```

或没有 numpy：

```
a=[0.5,  0.75,  1.5]
a1=a[1:]
a2=a[:-1]
b=[ aa-a2[i] for i,aa in enumerate(a1) ] 
```

或者

```
a=[0.5,  0.75,  1.5]
c=[x-y for x,y in zip(a[1:],a[:-1])] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T19:05:51.393

```
diffs = [b-a for a, b in zip(times[:-1], times[1:])]
[0.25, 0.75] 
```

这种方法不需要 numpy 简单的 Python。减法

```
times[1:]
(0.75, 1.5)

times[:-1]
(0.5, 0.75) 
```

从彼此

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T19:35:12.520

这应该这样做。

```
import numpy as np

times = np.array([0.5,0.75,1.5,2.0])
diff_times = np.zeros(len(times)-1,dtype =float)

for i in range(1,len(times)):
    diff_times[i-1] = times[i] - times[i-1]

print diff_times 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-13T08:16:04.950

非常基本：

```
liste = [1,3,8]
difference = []
for i in range(len(liste)-1):
    diffs = abs(liste[i] - liste[i+1])
    difference.append(diffs)

print difference 
```

# java - 线程从 Servlet 开始 - 总是坏主意吗？

> ID：10804942
> 
> 赞同：0
> 
> 时间：2012-05-29T18:51:15.173
> 
> 标签：java, multithreading, tomcat, servlets

我有一个 servlet，它执行以下操作：

1.  从 Web 服务获取一组数据
2.  从本地数据库中获取一组数据。
3.  合并这两个集合并返回结果。

实际上，这在 servlet 代码本身中几乎没有完成，但是 servlet 调用执行上述操作的 Java 类。

由于大部分时间都花在等待 web 服务和数据库上，我正在考虑同时执行这两者：将 webservice 调用放在一个线程中，从数据库中获取数据，然后等到 web 服务完成后再继续。这看起来应该可以正常工作，但我经常听说从 servlet 启动线程是个坏主意？我很难看到这种情况会如何导致问题。任何帮助都会很棒（在 linux 上使用 tomcat 6）。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:26:47.263

我看不出有什么问题，并且经常看到线程是从 servlet 本身启动的。您的用例是在 servlet 中启动线程的良好理由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:21:44.893

每次请求到达服务器时，容器都会分配或创建一个新线程来处理请求，对于每个请求，每次在其自己的堆栈中调用 service() 方法，然后 service() 方法根据 Http 调用 doGet 或 doPost要求。现在完全可以使用限制在 doGet 或 doPost 范围内的线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T19:48:19.233

系统可以同时支持的线程数是有限的资源。此外，创建线程是一项昂贵的操作。因此，现代 servlet 容器不会为每个请求创建新线程，而是维护线程池。池中的一个线程被分配给传入请求。如果所有线程都忙，则将请求放入队列或创建新线程（取决于 servlet 容器使用的策略）。

所以，创建线程肯定会起作用（从功能的角度来看），但是如果你有很多请求，你的服务器就会开始阻塞。您可以使用与 servlet 容器使用的策略类似的策略。Java 已经为这类任务提供了框架。查看 javadocs for `Executor`和相关类。

# macos - 将 NSRange 内容转换为 NSString？

> ID：10804947
> 
> 赞同：5
> 
> 时间：2012-05-29T18:51:34.653
> 
> 标签：macos, cocoa, nsstring, nsrange

我正在开发一个 Cocoa Mac OSX 应用程序，我想知道是否可以显示通过以下方式`NSRange`找到的内容：

```
NSRange range;
range.location = 4;
range.length = 4; 
```

作为一个`NSString`？

*例如*，在上面的示例中，如果我有一个内容为**"abcdefgh"**的字符串，则将上述范围的内容呈现为字符串将给出**"efgh"**。这可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T18:58:34.780

**代码：**

```
NSString *string = @"abcdefgh";

NSRange range;
range.location = 4;
range.length = 4;

NSString *subString = [string substringWithRange:range];

NSLog(@"%@",subString); 
```

**输出：**

```
efgh 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T18:55:13.880

试试 NSString 中的 substringWithRange 方法。

```
NSString* original = @"abcdefgh";
NSLog(@"Substring: %@", [original substringWithRange:range]); 
```

# verilog - Verilog HDL，来自 FPGA 的用户输入

> ID：10804953
> 
> 赞同：1
> 
> 时间：2012-05-29T18:51:47.027
> 
> 标签：verilog, hardware-interface

我目前正在使用从我学校获得的 FPGA 进行 Verilog HDL 项目（我正在运行 Quartus II 版本 10.1 和 11.0（我都尝试过））。我遇到了一个非常奇怪的错误，我一生都无法弄清楚。

我正在开发一个摩尔斯电码程序，它检测点和破折号，然后根据这个输入在十六进制显示器上输出适当的字母。HEX 显示效果很好，但我的 UserInput 模块似乎根本没有做任何事情！

```
module UserInput(Clock, reset, in, out);
input Clock, reset, in;
output reg [1:0] out;

wire [2:0] PS;
reg [2:0] NS;

parameter NONE = 2'b00, DOT = 2'b01, DASH = 2'b11; //For Output
parameter UP = 3'b000, SHORT0 = 3'b001, SHORT1 = 3'b010, UP_DOT = 3'b011, LONG = 3'b100, UP_DASH = 3'b101;

//Active High
always@(PS or in)
    case (PS)
        UP: if (in)         NS = SHORT0;
             else               NS = UP;

        SHORT0: if (in) NS = SHORT1;
                 else           NS = UP_DOT;

        SHORT1: if (in) NS = LONG;
                 else           NS = UP_DOT;

        UP_DOT:                 NS = UP;

        LONG:   if (in)     NS = LONG;
                else            NS = UP_DASH;

        UP_DASH:            NS = UP;
    default: NS = 3'bxxx;
    endcase

always@(PS)
    case (PS)
        UP:     out = NONE;
        SHORT0: out = NONE;
        SHORT1: out = NONE;
        UP_DOT: out = DOT;
        LONG:   out = NONE;
        UP_DASH: out = DASH;
        default: out = 2'bxx;
    endcase

D_FF dff0 (PS[0], NS[0], reset, Clock);
D_FF dff1 (PS[1], NS[1], reset, Clock);
D_FF dff2 (PS[2], NS[2], reset, Clock);

endmodule

module D_FF (q, d, reset, clk);
    input d, reset, clk;
    output reg q;

    always@(posedge clk or posedge reset)
    begin
        if (reset) q = 0;
        else       q = d;
    end
endmodule 
```

模块的输入是 FPGA 上的一个 KEY。由 UserInput 模块表示的 FSM 在 t=0 时键处于“UP”状态。然后，如果有输入，它会经过 SHORT0 或 SHORT1，最后是 LONG。如果密钥在这些状态中的任何一个被释放，它们将进入其适当的中间 UP 状态并提供“DOT”或“DASH”的输出。

但是，当我将它连接到我的 FPGA 时，我什么也得不到。从我的测试来看，它似乎永远不会离开“UP”状态。甚至我的模拟也没有给我任何东西。其次，我尝试从不同的项目（我知道一个有效的）连接不同的 UserInput 模块，但仍然没有。我错过了 Verilog 的背景是否发生了什么？

这是仿真波形的图像：![模拟波形](../Images/d122f4d703b027c16caca2c2220e5c8a.png)

DFf 0、1 和 2 是 PS 的位 0、1 和 2。我的模拟不允许显示 NS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T06:48:48.043

你的代码对我来说看起来很糟糕（我猜你想听到你的代码不起作用）。它看起来像是时序问题和设计缺陷的结合。

让我们浏览一下您的波形视图，看看我们是否无法弄清楚发生了什么。

信号输入变高，这会触发始终阻塞。PS 为 0，因此我们将 NS 设置为 1。这不是时钟上升沿的时间，因此它不会在 DFF 中触发（正如您所怀疑的那样），没关系它会在下一个时钟沿被捕获。

信号输入变低，触发一个始终阻塞，PS 为 0，因此我们将 NS 设置为 0。这发生在时钟上升沿的时间，并在 DFF 中被捕获（啊，我们错过了 NS 信号按我们想要的方式变为 1） .

此外，有人提到在断言复位时断言触发器存在错误。这不是问题：重置是同步的。因此，在下一个时钟上升沿，DFF 被重置为 0。

那么，解决方案是什么（对我来说看起来像是家庭作业，所以希望你已经解决了这个问题！）：

它应该看起来像这样（我没有模拟它，所以不能保证）：

```
Module UserInput (clk, reset, in, out);
input clk, reset, in;
output [1:0] out;

// output parameters
parameter IDLE = 2'b00;
parameter DOT = 2'b01;
parameter DASH = 2'b10;

// FSM states
parameter LOW = 3'b000;
parameter SHORT1 = 3'b001;
parameter SHORT2 = 3'b010;
parameter LONG = 3'b100;

reg [2:0] state;
wire [1:0] next_out;
wire [2:0] next_state;

always @(posedge clk)
begin
    if (reset)
    begin
        out <= IDLE;
        state <= LOW;
    end;
    else
    begin
        out <= next_out;
        state <= next_state;
    end
    end if;
end

always @(*)
begin
    case (state)
    LOW:
        next_out = IDLE;
        next_state = (in? SHORT1 : LOW);
    SHORT1:
    begin
        next_state = (in? SHORT2: LOW);
        next_out = (in? IDLE : DOT);
    end;
    SHORT2:
        next_state = (in? LONG: LOW);
        next_out = (in? IDLE : DOT);
   LONG:
        next_state = (in? LONG : LOW);
        next_out = (in? IDLE : DASH);
   default:
        // we shouldn't get here!!
        next_state = LOW;
        next_out = IDLE;
   end;
   end module; 
```

那么这里发生了什么：我认为这应该是相当明显的。当 in 信号从高电平变为低电平时，我们要输出当前状态（LONG 作为 DASH，SHORT1 和 SHORT2 作为 DOT），否则我们输出 IDLE。如果输入信号为高电平，那么我们希望根据它处于高电平的时间来移动状态。

这段代码有一个错误，它不会影响仿真，但几乎肯定会影响你对 FPGA 的影响：如果你从外部源获取输入，那么你需要通过一个（系列？）翻转缓冲它触发器以防止亚稳态问题。这可以通过添加一系列 D 触发器来捕获 in 信号，然后将这个“清理过的”buffered_in 传递给 UserInput 来解决。

IE：

```
module in_buffer (clk, reset, in, out);
input clk, reset, in;
output out;

reg buf1, buf2;

always @ (posedge clk)
begin
    if (reset)
    begin
        out <= 0;
        buf1 <= 0;
        buf2 <= 0;
    end
    else
        out <= buf2;
        buf2 <= buf1;
        buf1 <= in;
    end
end 
```

# javascript - Google 地图 KML 加载 - 414 请求 URI 太大

> ID：10804954
> 
> 赞同：2
> 
> 时间：2012-05-29T18:51:51.100
> 
> 标签：javascript, google-maps, google-maps-api-3

我目前正在构建一个谷歌地图项目，它将根据用户输入动态加载和卸载各种 KMZ 文件。它适用于大约 8 层加载/卸载，但随后谷歌地图因 414 错误而崩溃。我已将问题追溯到 API 生成的存储字符串以引用每个 KML 层。

这是单击图层时运行的代码：

```
function showLayer(layername) {
  if (layers[layername].kml === undefined) {
    layers[layername].kml = loadKML(layers[layername].file, layers[layername].options);
  }
  layers[layername].kml.setMap(map);
  redrawRoutes(layers[layername].kml);
} 
```

和 loadKML 函数：

```
function loadKML(file, options) {
  var path = kmlDir + file;
  options = options || { preserveViewport: true };
  layer = new google.maps.KmlLayer(path, options);
  return layer;
} 
```

基本上我的目标是只加载每个 KML 文件一次，将其存储在一个对象中，然后在后续加载/卸载时引用它。这里的问题是在生成的 Javascript 对象内部`new google.maps.KmlLayer`，一个很大的长字符串

```
"kml:cj5TNh3iqySpI_DAGiDgbSJESQ-dakZTiMY09US6imjvFNPMTIIYNAg|ks:;dc:cg;ts:44610546|kv:3|api:3" 
```

并每次都将其附加到请求 URI。这加起来相当快，并且在 7-8 附加之后 URI 太长并且任何后续请求都将被忽略。

有没有办法使用这个长请求字符串，我可以强制它使用自定义字符串，还是每次都清除 URI？我只会处理大约 6 个文件，我真的希望能够处理尽可能多的层加载/卸载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T21:00:13.430

您正在尝试优化 Google 已有的内容。Google 缓存的 KML 文件及其关联的切片，因此破坏和重新创建图层的惩罚很小。只要 KML 图层的 url 保持不变，您就应该销毁然后重新创建图层。

无论地图上当前有多少 KML 文件，Google 都会将它们呈现为单个图块叠加层。每次您通过 setMap 添加/删除 KML 图层时，您的用户都必须下载新的平铺图像。

您的 KML 文件每隔几个小时才会被访问一次。据推测，Google 会尝试遵守为对 KML 文件的请求发出的缓存标头。但是，没有明确定义当缺少强缓存标头时，Google 将缓存您的 KML 多长时间。

Google 还规定了最短缓存时间，因此即使您通过强缓存标头指定您的 KML 文件应在 1 分钟后过期，Google 仍会在其预设（且未公开）时间缓存该文件。标准解决方法是向 KML url 添加额外的查询字符串参数，以生成以前未缓存的新/唯一地址。

# matlab - 使用 SVM 算法在 matlab 中进行拇指识别

> ID：10804960
> 
> 赞同：0
> 
> 时间：2012-05-29T18:52:36.840
> 
> 标签：matlab, machine-learning, svm

我正在做一个拇指识别项目。以下是我正在读取 42 X 25 顺序的 118 张图像并将它们存储在训练矩阵中的代码。

```
training=zeros(118, 1050);

imagefiles = dir('*.png');      
nfiles = length(imagefiles);    
for ii=1:nfiles
    currentfilename = imagefiles(ii).name;
    I = imread(currentfilename);

    BW=im2bw(I,graythresh(I));    

    temp = reshape(BW,1,1050);
    training(ii,:)=temp;
end 
```

现在我正在创建一个 labelData 矩阵来为图像分配标签。

```
labelData = zeros(118,1);
labelData(1:50,:) = 0; 
labelData(51:83,:) = 1;
labelData(84:118,:) = 2; 
```

在这里，我通过提供训练数据和标签数据来训练我的系统。

```
options=optimset('MaxIter',5000);
SVMStruct =  svmtrain(training,labelData,'Kernel_Function','linear','QuadProg_Opts',options); 
```

但是当我运行这段代码时，它给了我一个错误，比如

```
Error 1 : SVMTRAIN only supports classification into two groups. GROUP contains 3 groups.
Error 2 : SVMStruct = svmtrain(training,labelData,'Kernel_Function','linear','QuadProg_Opts',options); 
```

请帮助我在它工作正常之前我使用它的问题是什么，但现在我不知道发生了什么。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T18:56:34.487

错误 1 ​​告诉您问题所在 - MATLAB 内置 SVM 仅支持二进制分类。您正在分配 3 个班级。

您的选择是：

1.  构造三个分类器：0 vs. 1,2 然后 1 vs. 0,2 然后 2 vs. 0,1 并查看每个分类器的输出。
2.  构造 0 vs. not 0 然后 1 vs. 2
3.  使用来自 LIBSVM 或 svmlight 或其他此类软件包的多类 SVM 训练器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T18:56:57.793

错误信息非常清楚。MATLAB 的 svmtrain 不支持多类分类，即只允许两个类。

因此，您有两个选择：1) 编写您自己的[多类分类器](http://en.wikipedia.org/wiki/Support_vector_machine#Multiclass_SVM)作为 svmtrain 的包装器。您可以实施一对一或一对一的策略。2) 使用已经支持多类分类的 svm 实现，例如[libsvm](http://www.csie.ntu.edu.tw/~cjlin/libsvm/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T19:30:31.770

你的问题是在 labelData 向量中检查它并找到错误，如果类的数量更多，则应该使用 OAA 架构师。

# java - 优雅地处理 socket.close()

> ID：10804967
> 
> 赞同：0
> 
> 时间：2012-05-29T18:53:04.900
> 
> 标签：java, android, sockets, client, client-server

在我位于 android 设备中的服务器中，如果客户端数量超过特定数量，则服务器关闭套接字。但是在我的客户端（其他 android 设备）中，我强制关闭。我怎样才能优雅地处理它？这是我客户端上的连接部分：

```
 serverIpAddress = serverIp.getText().toString();

    if (!serverIpAddress.equals(""))
    {
            try
            {
                 InetAddress serverAddr = InetAddress.getByName(serverIpAddress);
                 SocketAddress sockaddr = new InetSocketAddress(serverAddr, 5000);
                 nsocket = new Socket();
                 nsocket.connect(sockaddr);                    
            }catch(Exception e){
                 Log.i("Connect", "Connection Error");
            }

            if (nsocket.isConnected()){
                  score.setText("Your score is " + sc);
                  serverIp.setVisibility(View.GONE);
                  connectPhones.setVisibility(View.GONE);
                  enterIP.setVisibility(View.GONE);
                  Log.i("Connect", "Socket created, streams assigned");
                  Log.i("Connect", "Waiting for inital data..." + nsocket.isConnected());
                  receiveMsg();
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:04:21.693

听起来您用来读取套接字的任何内容都是阻塞读取，并且当套接字关闭并且卡在该读取时会引发异常。确保 read 在 try 块中，并使用 catch/finally 优雅地退出您当时正在做的任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:31:44.577

继续检查套接字连接是否仍然打开或未在无限循环中使用 isClosed()，当服务器关闭其连接时，isClosed() 变为真，然后显示一条消息或 toast，向用户提供您想要的理由。

# jpa - eclipselink 2 OneToMany 与一个关联表如何从一侧删除

> ID：10804975
> 
> 赞同：0
> 
> 时间：2012-05-29T18:53:37.700
> 
> 标签：jpa, eclipselink

我有以下实体关系：SideA：

```
@Entity
@Table(name = "SideA")
    public class SideA {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private long  id;

    @CascadeOnDelete
    @OneToMany(fetch = FetchType.LAZY, mappedBy = "sideA", cascade=CascadeType.ALL)
    private List<ABAssociation> association = new ArrayList<ABAssociation>();
} 
```

B面：

```
@Entity
@Table(name = "SideB")
public class SideB {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private long  id;

    @CascadeOnDelete
    @OneToMany(fetch = FetchType.LAZY, mappedBy = "sideB", cascade=CascadeType.ALL)
    private List<ABAssociation> association = new ArrayList<ABAssociation>();
} 
```

ABA协会：

```
@Entity
@Table(name = "ABAssociation")
public class ABAssociation {

   @EmbeddedId
   private ABAssociationPK pk = new ABAssociationPK();
   @ManyToOne(cascade=CascadeType.MERGE)
   @MapsId("aId")
   private SideA sideA;

   @ManyToOne(cascade=CascadeType.MERGE)
   @MapsId("bId")
   private SideB sideB;
} 
```

ABA协会PK：

```
@Embeddable
public class ABAssociationPK implements java.io.Serializable{
    private long aId;
    private long bId;
} 
```

我的问题是当我删除一侧时，数据库删除了 ABAssociation 中的行，但仍保留在缓存中。

测试代码如下：

```
SideA a = new SideA();
SideB b = new SideB();
entitymanager.persist(a);
entitymanager.persist(b);

ABAssociation ab = new ABAssociation()
ab.setSideA(a);
ab.setSideB(b);
entitymanager.persist(ab);

a.getABAssociationList().add(ab);
b.getABAssociationList().add(ab);

a = entitymanager.merge(a);
b = entitymanager.merge(b);

entitymanager.delete(a); 
```

由于“a”被删除，“a”和“b”之间的关系也应该被删除。但是当我检查“b.getABAssociationList().size()”时它仍然存在，即使数据库中的 ABAssociation 表中没有行。

这与共享缓存问题有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:54:35.997

在 JPA 中，您必须维护对象的关系。

如果您删除一个对象，您必须首先删除对它的所有引用。

见， [http ://en.wikibooks.org/wiki/Java_Persistence/Relationships#Object_corruption.2C_one_side_of_the_relationship_is_not_updated_after_updating_the_other_side](http://en.wikibooks.org/wiki/Java_Persistence/Relationships#Object_corruption.2C_one_side_of_the_relationship_is_not_updated_after_updating_the_other_side)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T14:57:18.037

有点，是的。当 ABAssociation 被删除时，您需要删除 B 对 ABAssociation 的引用，以维护数据库中的缓存。如果您无法在应用程序中执行此操作，您可以通过在 ABAssociation 上使用 preremove 事件来执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-29T12:28:58.770

您可以使用以下方式强制更新您的列表`evict()`：

```
getEntityManager().getEntityManagerFactory().getCache().evict(ABAssociation.class); 
```

# delphi - 同一列中具有不同控件的 FireMonkey 网格

> ID：10804977
> 
> 赞同：3
> 
> 时间：2012-05-29T18:53:43.947
> 
> 标签：delphi, grid, delphi-xe2, firemonkey

如果你想在 FireMonkey 的同一列中使用不同的单元格控件，你可以做什么。单元格控件似乎属于列，但在某些情况下（例如属性编辑器），某些行需要一个复选框，而其他行需要一个组合框或编辑控件。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T19:25:38.480

我猜你会在[这篇文章](http://monkeystyler.com/blog/entry/firemonkey-grid-basics-custom-cells-and-columns)中找到解决方案。

![示例自定义网格单元](../Images/a3ec0e860a115ed288ba9ff918b5c457.png)

您必须创建一个创建自定义单元类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T21:50:19.533

Arnaud 在他的回答中已经链接到我的文章。本文涵盖了网格、列和单元格的基础知识。以下步骤应该让您启动并运行：

*   创建一个样式，添加您想要显示的控件（即一个 TCheckbox、一个 TCombobox 和一个 TEdit）。在 TLayout 中添加这些，并将每个控件 StyleName 设置为令人难忘的东西。
*   在您的单元格中 ApplyStyle 使用 FindStyleResource 提取您在上面使用它们的 StyleNames 添加的控件。
*   当网格调用单元格的 SetData 方法时，您需要为每个控件设置 Visible 属性，以便只显示适当的一个。如果您无法从传入的数据中确定这一点，请向单元格添加事件处理程序以获取数据。
*   您需要整理键盘处理，这会变得非常混乱。如果有记忆，您需要将网格/单元格中的键传递给控件（或者它是否会从控件中捕获移动键并将它们传递给网格？抱歉，如果我忘记了确切的细节）。

抱歉，我无法给出更详细的答案，但完全涵盖这一点需要一系列博客文章。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T21:26:04.117

使用样式 - 在设置单元格数据时设置单元格样式 - 然后使用 onapplystyle 事件对新样式的单元格执行您需要的任何巧妙操作。

这样，您可以将所需的控件添加到样式中，然后使用 onapplystyle 访问控件（设置事件等）。

提示 - FindStyleResource 是你的朋友 :-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T01:15:20.937

我还需要一个属性编辑器，并寻找一种在一个列中托管不同单元格类型的方法。如上所述为每一行使用不同的样式可能是一种解决方案，但由于 Firemonkey 网格不会为特定行保留任何单元格控件，因此每次将在行上显示单元格控件时，都会对其应用真正的样式。对于静态属性编辑器来说，这不是一个大问题，但是对于具有可能行和每行中不同单元格类型的真实网格，需要不同的策略。所以我想出了一个不同的解决方案，我考虑了 TColumn 和单元格控件之间的单元格类型代理，这样每个单元格代理都会保留负责的单元格控件。首先，我有一个新的TColumn（TvariantColumn）负责顶级策略。

```
vColumn := TVariantColumn.Create(Self);
vColumn.Header := 'Variant Column';
vColumn.OnGetCellProxyIndex := GetCellProxyIndex;
Grid1.AddObject(vColumn); 
```

然后创建任何代理，例如

```
vColumn.NewCellProxy(TTextProxy); 
vColumn.NewCellProxy(TColorComboProxy);
vColumn.NewCellProxy(TComboColorProxy); 
```

您还可以在创建代理特定作业后处理它，例如

```
with TProgressProxy(vColumn.NewCellProxy(TProgressProxy)) do //4
begin
  Min := 0;
  Max := 100;
end;

with  TPopUpProxy(vColumn.NewCellProxy(TPopupProxy)) do //5
begin
  Items.Add('Istanbul');
  Items.Add('Paris');
  Items.Add('NewYork');
end; 
```

我在我的网站上发布了我的方法并发表了一篇详细的[文章](http://delphiscience.wordpress.com/2012/11/21/tvariantcolumn-for-firemonkey-grid-different-cell-types-in-the-same-column/)，您可以在其中找到有关该主题的更多信息。

# c# - 这个 LINQ 查询有什么问题

> ID：10804979
> 
> 赞同：0
> 
> 时间：2012-05-29T18:53:56.643
> 
> 标签：c#, .net, linq

我以前从未对 LINQ 做过任何事情，但是我有使用 MySQL 的经验。

我在[Microsoft® ASP.NET 4 Step by Step](http://shop.oreilly.com/product/9780735627017.do)的第 232 页上，这本书已经开始谈论 LINQ，这很酷。

这本书指示我输入我的第一个 LINQ 查询，但是它导致 Visual Studio 出现 19 个错误，因为无法识别`where`,`orderby`和命令。`select`

以下是书中的代码：

![书号](../Images/86aa936e7b1d1d003938c3e91538ecdf.png)

下面是我的代码（以屏幕截图的形式，您可以看到 Visual Studio 不喜欢的内容）：

![我的代码](../Images/aa20bd7f1209dd323b77f28f907fbd56.png)

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T19:03:09.210

在您的 Linq 查询中，带有“<>”的 TechnologyDescriptor 标记令人讨厌。您需要做的是为 technologyDescriptor 列表中的单个项目指定一个命名变量实例。例如：

```
GridView1.DataSource = from td in technologyDescriptor where td.TechnologyName.Contains(".Net") == true order by td.TechologyName.Length
select td.TechnologyName.ToUpper(); 
```

您可以将此查询视为类似于在 technologyDescriptor 列表上循环的 foreach 循环，并且“td”是每个循环的单独记录

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T18:57:17.493

例如，您在 TechnologyDescriptor 周围有不必要的尖括号 (<>)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T18:57:54.433

您已经用尖括号将变量名 technologyDescriptor 括起来了。请从您的代码中删除这些括号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T18:57:44.183

它应该说：“来自...的**技术**描述符”不是`from <TechnologyDescriptor>`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-29T19:00:46.170

您的变量使用量有点偏。还有，是`technologyDescriptor`收藏吗？

如果是这样，请将您的代码更改为：

```
GridView1.DataSource = from t in technologyDescriptor
                       where t.TechnologyName.Contains(".NET")
                       orderby t.TechnologyName.Length
                       select t.TechnologyName.ToUpper(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-29T20:37:01.797

除了 linq 查询的问题之外，屏幕截图还显示您存在变量范围问题。具体来说，您`technologyDescriptor`用来指代两个不同的事物。您的表单是否有一个名为“technologyDescriptor”的控件，或者在部分类的另一部分中声明的该名称的字段？

# php - 使用 php 从 C++ .o 文件中获取静态值

> ID：10804981
> 
> 赞同：0
> 
> 时间：2012-05-29T18:53:59.620
> 
> 标签：php, c++

我有一个编译的 C++ 目标文件。并且该目标文件包含大量静态常量值（事实上 .o 文件仅包含静态值）。有什么方法可以使用 php 读取这些静态值吗？我无法将这些值复制到 php 中，需要直接读取它们。

谢谢，感谢任何人的回应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:05:35.273

`nm`使用or转储 .o 的内容，`objdump`并使用正则表达式手动解析到 php 头文件中。这样做的缺点是它不是“实时”的，因此如果重建 .o，您将不得不手动同步，但听起来您肯定需要一种一次性的“快速而肮脏”的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T19:02:18.863

`dlopen`PHP 有和的包装器`dlsym`吗？

如果是，您可以将该`.o`文件链接到 a`.so`并使用动态链接来访问它。

# javascript - 我在哪里可以获得有关 JavaScript 函数的对象参数语法的信息？

> ID：10804982
> 
> 赞同：10
> 
> 时间：2012-05-29T18:54:04.370
> 
> 标签：javascript, ecmascript-6, syntax, destructuring

如果我想调用这样的函数：

```
moo({ a: 4 }); 
```

通常我必须像这样表达我的函数定义：

```
function moo(myArgObj) {
    print(myArgObj.a);
} 
```

但是这个很棒的语法在 spidermonkey 中用于定义函数是完全有效的：

```
function moo({ a, b, c }) { // valid syntax!
    print(a); // prints 4
} 
```

这个功能是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T19:16:16.597

这称为[解构](https://stackoverflow.com/tags/destructuring/info)。您可能会在[MDN 中找到最多的信息：解构赋值](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment)（特别是请参阅[从作为函数参数传递的对象中解包字段](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment#Unpacking_fields_from_objects_passed_as_function_parameter)）。

* * *

ECMAScript 标准讨论可以在[他们的 wiki 页面](https://web.archive.org/web/20161222134616/http://wiki.ecmascript.org/doku.php?id=harmony:destructuring)上找到，也可能是dailyjs 上[的这篇博客文章](https://web.archive.org/web/20150219021117/http://dailyjs.com:80/2011/09/12/destructuring/)。

# apache - 为什么我不能在 VirtualHost 指令中使用星号而不避免警告？

> ID：10804983
> 
> 赞同：0
> 
> 时间：2012-05-29T18:54:06.537
> 
> 标签：apache

我为我的 django 网站设置了一个虚拟主机。

```
NameVirtualHost 74.181.105.228:80
<VirtualHost 74.181.105.228:80>
    ServerAdmin admin@mydomain.com
    ServerName mydomain.com

# Run the SLMCS Django application.
WSGIScriptAlias / /home/david/djangosites/mydomain/wsgi.py
WSGIScriptReloading On

Alias /static/ /home/david/staticFiles/

<Directory /home/david/djangosites/mydomain>
<Files wsgi.py>
Order deny,allow
Allow from all
</Files>
</Directory>

</Virtualhost> 
```

如果我将第二行更改为`<VirtualHost *:80>`，则 Apache 在我重新启动时会发出警告：

```
[warn] NameVirtualHost 74.181.105.228:80 has no VirtualHosts 
```

为什么？我不是刚设置了一个虚拟主机吗？如果我使用`<VirtualHost 74.181.105.228:80>`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T19:06:00.473

执行此操作时出现错误：

```
<VirtualHost *:80> 
```

因为你没有这样做：

```
NameVirtualHost *:80 
```

to 的参数`NameVirtualHost`必须与块中使用的字符串匹配`VirtualHost`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:06:07.057

您需要在顶部添加一个带有通配符的 NameVirtualHost 行，如下所示：

```
NameVirtualHost *:80 
```

基本上，您计划在`<VirtualHost address:port></VirtualHost>`指令中包含的任何地址：端口都需要在其上方有一个匹配的`NameVirtualHost`指令。即使它是通配符。

# sql - 提高sql查询速度

> ID：10804984
> 
> 赞同：0
> 
> 时间：2012-05-29T18:54:14.910
> 
> 标签：sql, database, oracle10g

我有以下 sql 需要很长时间才能执行，有没有更好的方法来编写它来提高速度。

任何帮助都是非常可观的。

谢谢

```
 SELECT a.KeyField
    FROM Details a,
         Master b
    WHERE a.ForeignKeyField = b.ForeignKeyField
      AND a.KeyField IS NOT NULL
      AND Date BETWEEN 
TO_DATE ('01-01-2011', 'dd-mm-yyyy') AND TO_DATE ('31-12-2011', 'dd-mm-yyyy')
      AND a.KeyField IN
        (SELECT p.KeyField
         FROM Details p,
              Master q
         WHERE q.ForeignKeyField = p.ForeignKeyField
           AND p.KeyField IS NOT NULL
           AND p.KeyField = a.KeyField
           AND q.FKField2 = b.FKField2
         GROUP BY p.KeyField,
                  q.Date HAVING COUNT (DISTINCT q.ForeignKeyField) > 1)
    GROUP BY b.Id,
             b.Name,
             b.ForeignKeyField,
             b.Date,
             a.ForeignKeyField,
             a.SomeOtherField,
             a.KeyField,
             b.EtcEtc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:58:24.463

在您的查询上运行`EXPLAIN`，您将看到缓慢的来源。但是，一般而言，如果您可以避免嵌套查询（您的`IN`语句）并且`DISTINCT`您的查询将执行得更好。看看你是否可以在同一个查询中两次加入`Details`和表并相应地放置索引`Master`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T19:03:57.977

首先，您需要学习正确的连接语法。我的猜测是，由于相关子查询，Oracle 正在选择次优查询路径。让我们将其更改为联接：

```
SELECT a.KeyField
FROM Details a join
 Master b
 on a.ForeignKeyField = b.ForeignKeyField join
 (SELECT p.KeyField, q.Date, q.FKField2
  FROM Details p join
       Master q
       on q.ForeignKeyField = p.ForeignKeyField
  WHERE p.KeyField IS NOT NULL AND
        q.FKField2 = b.FKField2
  GROUP BY p.KeyField, q.Date
  HAVING COUNT (DISTINCT q.ForeignKeyField) > 1
 ) t
 on a.KeyField = t.KeyField and
    b.FKField2 = t.FKField2
WHERE a.KeyField IS NOT NULL AND
  Date BETWEEN TO_DATE ('01-01-2011', 'dd-mm-yyyy') AND TO_DATE ('31-12-2011', 'dd-mm-yyyy') AND
GROUP BY b.Id, b.Name, b.ForeignKeyField, b.Date, a.ForeignKeyField, a.SomeOtherField, a.KeyField, 
     b.EtcEtc 
```

以这种方式编写它也让我意识到日期没有条件，尽管在子查询中使用了它。这个对吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T18:56:47.543

确保您有相关的索引。检查执行计划以验证它们是否实际被使用。Oracle 在选择索引时非常挑剔。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T18:58:52.720

我不明白内部查询的原因。我会这样简化：

```
SELECT a.KeyField
FROM Details a,
     Master b
WHERE a.ForeignKeyField = b.ForeignKeyField
  AND a.KeyField IS NOT NULL
  AND Date >= TO_DATE ('01-01-2011', 'dd-mm-yyyy')
  AND Date <= TO_DATE ('31-12-2011', 'dd-mm-yyyy')

GROUP BY b.Id,
         b.Name,
         b.ForeignKeyField,
         b.Date,
         a.ForeignKeyField,
         a.SomeOtherField,
         a.KeyField,
         b.EtcEtc
HAVING COUNT (DISTINCT q.ForeignKeyField) > 1 
```

也替换 `BETWEEN`将`>=, <=`有助于

# unit-testing - Grails 1.3.7 中的单元测试控制器：redirectUrl 为空或参数不可用

> ID：10804990
> 
> 赞同：0
> 
> 时间：2012-05-29T18:54:43.057
> 
> 标签：unit-testing, grails, grails-controller

我有以下代码：

```
void testConfirmBookNotFound() {

    def book = new Book(id: 1, title: 'test book')
    mockDomain(Book, [book])
    mockDomain(BookProject, [new BookProject(id: 1, book: book)])

    def controller = new CancelController()
    controller.params.id = 5140
    controller.confirm()

    assertEquals "/admin/cancel/index", controller.response.redirectedUrl
} 
```

如果我的测试类扩展`ControllerUnitTestCase`，那么`controller.response.redirectedUrl`总是`null`. 但是，如果我的测试类扩展`GrailsUnitTestCase`（我已经读过它是针对空 url 问题的修复），那么我会得到`No such property: params`. 我需要做什么才能让这个测试生效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:26:33.983

尝试使用`controller.redirectArgs.action`...

```
assertThat(controller.redirectArgs.action, equalTo("index")) 
```

# c# - c#如何知道某个进程是否在远程机器上运行

> ID：10804996
> 
> 赞同：0
> 
> 时间：2012-05-29T18:55:03.067
> 
> 标签：c#, .net, windows-forms-designer, remote-access

我想知道，在c#中，我怎么知道某个进程是否在远程机器上运行？

远程机器在我的网络中，我将永远使用同一个用户。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T19:06:11.003

您可以使用 System.Diagnostics 来检查本地计算机然后使用。

```
Process[] processList = Process.GetProcesses("machineName"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:09:12.590

我会说你可以使用 WCF。

[http://msdn.microsoft.com/en-us/library/dd456779.aspx](http://msdn.microsoft.com/en-us/library/dd456779.aspx)

因此，您需要在计算机上开发一个小型服务器列出进程并通过 Object 为它们提供服务。

可能有一种更简单的方法，但这肯定有效。