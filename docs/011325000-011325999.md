# StackOverflow 问答 11325000-11325999

# html - Facebook Like 按钮在一个网站上不起作用？

> ID：11325005
> 
> 赞同：2
> 
> 时间：2012-07-04T08:12:37.760
> 
> 标签：html, facebook-like

我与数百个网站合作，只有 1 个无法正常工作。所有共享相同的代码库。我不确定发生了什么。我认为它在 Facebook 的末端，但这不可能是对的吧？两者都使用相同的代码，都由同一服务器托管，都发送相同的请求。他们各自得到不同的反应。

不工作的网站正在发回此响应。

```
for (;;);{"__ar":1,"payload":null,"jsmods":{"require":[["Plugin","disconnect",[],["http:\/\/mklimages.com\/"]]]}} 
```

正在运行的网站正在发回此响应。

```
for (;;);{"__ar":1,"payload":null,"jsmods":{"require":[["Plugin","connect",[],["http:\/\/clweddingphotography.com\/","10150926803898226"]]]}} 
```

当在“损坏的”网站上单击“喜欢”按钮时，似乎会出现这种情况。不同的响应被发回。两者都发送相同的 POST 请求。

有没有人遇到过这个？

这是受影响网站的网址：http: [//mklimages.com](http://mklimages.com)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-16T20:40:05.420

这也发生在我身上。我点击了喜欢，弹出窗口会显示一秒钟但会消失。HTTP 响应显示“插件”、“断开连接”。

当 Like 按钮上的 URL 重定向到另一个 URL 时，就会发生这种情况。

我做了什么来解决它：

1.  我将 URL 放入 Facebook 调试器：[https ://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)
2.  您将看到一些关于缺少属性的 OpenGraph 警告。我刚刚在我的网页中添加了一些关键的：og:type、og:url 和 og:title。请注意，这三个属性在[https://developers.facebook.com/docs/reference/opengraph/object-type/website上标记为必需](https://developers.facebook.com/docs/reference/opengraph/object-type/website)
3.  再次通过 Facebook 调试器运行 URL，以清除 Facebook 的缓存。

并且喜欢将再次起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T17:15:36.487

自这篇文章发布之日起，我遇到了完全相同的问题！在看到 FB 上的错误后，这变成了他们正在尝试解决的错误！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T13:58:14.217

这听起来很疯狂，但最终对我有用的是去：http: [//developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)

并在框中输入您的问题网址。如果您单击此处的“赞”按钮，您应该会看到相同的问题。

然后开始尝试更改其他文本/下拉列表中的所有其他值（宽度，喜欢/推荐...）

每次更改后，请尝试类似框的演示。对我来说大多数都没有工作。最终起作用的是当我将字体更改为其他字体时。

它开始在这个开发者网站上工作，然后我尝试了我的真实 URL，它也在那里工作。

这听起来很疯狂，但它对我有用。我们在这个网站上遇到了这个问题一个多星期，但没有任何效果，这只是最后一次绝望的尝试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-19T19:06:33.953

我也遇到了同样的情况，几天后它就开始自行工作了。我想这与 Facebook 垃圾邮件政策或其他什么有关...

# restructuredtext - 水平和垂直对齐图像

> ID：11325016
> 
> 赞同：2
> 
> 时间：2012-07-04T08:13:01.337
> 
> 标签：restructuredtext, docutils

使用`docutils`，似乎无法在 reStructuredText 中水平和垂直对齐图像。垂直对齐仅适用于替换，而水平对齐仅适用于内联图像，因此：

```
.. image:: some/image.png
   :align: middle 
```

和

```
.. |name| image:: some/image.png
   :align: center 
```

碰撞。

有没有办法同时控制垂直和水平对齐？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:36:23.593

我得到了一个答案：

由于`:align`基于对齐的 HTML 定义，因此（通常）在页面中垂直对齐图像是没有意义的（在我的情况下，我正在做一个演示，所以在幻灯片中垂直对齐是有意义的）。

因此，独立图像只能水平对齐，而内联图像只能垂直对齐（在基线上）。

# python - 如何输出到控制台和文件？

> ID：11325019
> 
> 赞同：61
> 
> 时间：2012-07-04T08:13:14.017
> 
> 标签：python

我试图在 python 中找到一种将脚本执行日志重定向到文件以及以`stdout`pythonic 方式的方法。有什么简单的方法可以实现这一目标吗？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-07-04T10:34:12.440

使用日志模块（[http://docs.python.org/library/logging.html](http://docs.python.org/library/logging.html)）：

```
import logging

logger = logging.getLogger('scope.name')

file_log_handler = logging.FileHandler('logfile.log')
logger.addHandler(file_log_handler)

stderr_log_handler = logging.StreamHandler()
logger.addHandler(stderr_log_handler)

# nice output format
formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')
file_log_handler.setFormatter(formatter)
stderr_log_handler.setFormatter(formatter)

logger.info('Info message')
logger.error('Error message') 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2012-07-04T08:27:26.233

我想出了这个[未经测试]

```
import sys

class Tee(object):
    def __init__(self, *files):
        self.files = files
    def write(self, obj):
        for f in self.files:
            f.write(obj)
            f.flush() # If you want the output to be visible immediately
    def flush(self) :
        for f in self.files:
            f.flush()

f = open('out.txt', 'w')
original = sys.stdout
sys.stdout = Tee(sys.stdout, f)
print "test"  # This will go to stdout and the file out.txt

#use the original
sys.stdout = original
print "This won't appear on file"  # Only on stdout
f.close() 
```

`print>>xyz`在 python 中将期望`write()`在`xyz`. 您可以使用您自己的自定义对象。否则，您也可以让 sys.stdout 引用您的对象，在这种情况下，即使没有`>>xyz`.

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-04-13T12:46:19.153

我只想在 Serpens 答案的基础上添加以下代码：

```
logger.setLevel('DEBUG') 
```

这将允许您选择记录的消息级别。

例如在 Serpens 示例中，

```
logger.info('Info message') 
```

不会被记录，因为它默认只记录警告及以上。

可以在[此处阅读有关所用级别的更多信息](https://docs.python.org/2/library/logging.html#logging-levels)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-08-28T11:32:16.830

**可能是最短的解决方案：**

```
def printLog(*args, **kwargs):
    print(*args, **kwargs)
    with open('output.out','a') as file:
        print(*args, **kwargs, file=file)

printLog('hello world') 
```

将“hello world”写入`sys.stdout`和写入`output.out`，其工作方式与 print() 完全相同。

**注意：** 请不要为 printLog 函数指定文件参数。`printLog('test',file='output2.out')`不支持类似的调用。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-04T08:43:13.797

您应该使用`logging`内置此功能的库。您只需将处理程序添加到记录器以确定将输出发送到何处。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-04T09:04:46.693

最简单的解决方案是重定向标准输出。在您的 python 程序文件中使用以下内容：

```
if __name__ == "__main__":
   sys.stdout = open('file.log', 'w')
   #sys.stdout = open('/dev/null', 'w')
   main() 
```

任何 std 输出（例如 的输出`print 'hi there'`）都将被重定向到，`file.log`或者如果您取消注释第二行，则任何输出都将被抑制。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-28T19:02:04.140

创建输出文件和自定义函数：

```
outputFile = open('outputfile.log', 'w')

def printing(text):
    print(text)
    if outputFile:
        outputFile.write(str(text)) 
```

然后调用打印函数，而不是代码中的 print(text)。

```
printing("START")
printing(datetime.datetime.now())
printing("COMPLETE")
printing(datetime.datetime.now()) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-07-12T14:00:50.453

这是对@UltraInstinct 的 Tee 类的一个小改进，被修改为上下文管理器并且还捕获任何异常。

```
import traceback
import sys

# Context manager that copies stdout and any exceptions to a log file
class Tee(object):
    def __init__(self, filename):
        self.file = open(filename, 'w')
        self.stdout = sys.stdout

    def __enter__(self):
        sys.stdout = self

    def __exit__(self, exc_type, exc_value, tb):
        sys.stdout = self.stdout
        if exc_type is not None:
            self.file.write(traceback.format_exc())
        self.file.close()

    def write(self, data):
        self.file.write(data)
        self.stdout.write(data)

    def flush(self):
        self.file.flush()
        self.stdout.flush() 
```

要使用上下文管理器：

```
print("Print")
with Tee('test.txt'):
    print("Print+Write")
    raise Exception("Test")
print("Print") 
```

# javascript - 将多个复选框值从父窗口传递到弹出窗口

> ID：11325021
> 
> 赞同：0
> 
> 时间：2012-07-04T08:13:32.620
> 
> 标签：javascript, jsp

我正在研究 JSP，我无法将复选框值从父窗口传递到子窗口，在我的父窗口中，我有一些选项可供选择，如果我选择了多个复选框，则必须将选定的复选框传递给子窗口供进一步使用..但我无法得到那些，谁能帮帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T04:52:48.930

```
<table cellspacing="0" cellpadding="3" border="1"
                                        align="center" bgcolor="#74f0a8" width="90%">
                                        <font size="4" color="#c7461e"><b>CHEQUE ACTIVATION
                                                REPORT BETWEEN : <s:property value='strChequeFrom' /> AND :
                                                <s:property value='strChequeTo' /> </b> </font>
                                        <tr>

                                            <td colspan="7" align="center" width="10%">
                                                <b>SL NO</b>
                                            </td>
                                            <td align="center">
                                                <b>AGENCY</b>
                                            </td>
                                            <td align="center">
                                                <b>CLIENT ADDRESS</b>
                                            </td>
                                            <td align="center">
                                                <b>CHEQUE NO</b>
                                            </td>
                                            <td align="center">
                                                <b>CHEQUE DATE</b>
                                            </td>
                                            <td align="center">
                                                <b>CHEQUE AMOUNT</b>
                                            </td>
                                            <td align="center">
                                                <b>ACTIVATION</b>
                                            </td>
                                        </tr>

                                        <s:iterator status="rowstatus" value="lstChequeDateReportDetail">
                                            <tr>
                                                <td colspan="7" align="center" width="10%">
                                                    <font size="3"><s:property value="jsp_sl_no" /> </font>
                                                </td>
                                                <td align="left">
                                                    <s:property value="strAgencyCode" />
                                                </td>
                                                <td align="left">
                                                    <s:property value="strClient" />
                                                </td>
                                                <td align="center">
                                                    <s:property value="strChequeNo" />
                                                </td>
                                                <td align="center">
                                                    <s:property value="strChequeDate" />
                                                </td>
                                                <td align="center">
                                                    <s:property value="strPaymanetAmount" />
                                                </td>
                                                <td align="center">
                                                    <table>
                                                        <tr>
                                                            <td>

    <s:checkbox name="strActivationCheque" fieldValue="%{strChequeNo}" value="false"/>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </td>
                                            </tr>
                                        </s:iterator>
                                        <tr>
                                            <td>
                                                <s:submit value="Activate"></s:submit>
                                            </td>
                                        </tr>
                                    </table> 
```

看这个例子..它是一个迭代过程，通过这个你将在操作页面中获得值为“strChequeNo”的checked(true)复选框列表。您可以在“strChequeNo”上使用任何其他主要值

# c# - Properties.Settings.Default.Save() 将 user.config 文件存储在带有哈希的目录中

> ID：11325022
> 
> 赞同：4
> 
> 时间：2012-07-04T08:13:32.783
> 
> 标签：c#, path, settings, properties.settings

我尝试保存用户设置。为了保存一些数据，我使用了这段代码：

```
Properties.Settings settings = Properties.Settings.Default;
settings.Key1 = "value";
settings.Save(); 
```

但它将 user.config 文件保存在以下路径下：

```
C:\Users\Me\AppData\Local\[CompanyName]\[ExeName]_Url_[some_hash]\[Version]\user.config 
```

这`_Url_[some_hash]`很丑陋，我该如何删除它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-01T05:48:09.460

你可以！只需按照[这篇文章](https://stackoverflow.com/questions/2265271/custom-path-of-the-user-config)详细解释所有内容，然后您必须修改属性 UserConfigPath 如下：

```
 private string UserConfigPath
    {
        get
        {
            System.Diagnostics.FileVersionInfo versionInfo;
            string strUserConfigPath, strUserConfigFolder;

            strUserConfigPath = Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData, Environment.SpecialFolderOption.Create);
            versionInfo = System.Diagnostics.FileVersionInfo.GetVersionInfo(Assembly.GetEntryAssembly().Location);
            strUserConfigPath = Path.Combine(strUserConfigPath, versionInfo.CompanyName, versionInfo.ProductName, versionInfo.ProductVersion, "user.config");
            strUserConfigFolder = Path.GetDirectoryName(strUserConfigPath);
            if(!Directory.Exists(strUserConfigFolder))
                Directory.CreateDirectory(strUserConfigFolder);
            return strUserConfigPath;
        }
    } 
```

通过这种方式，您可以从头开始构建路径。您还应该修改 CreateEmptyConfig 方法，以便在未找到 user.config 文件时执行默认操作。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-04T08:19:01.877

在此处查看更多信息 [http://msdn.microsoft.com/en-us/library/aa730869%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/aa730869%28v=vs.80%29.aspx)

# c# - 从文件中提取字符串并使用c#保存在另一个文件中

> ID：11325028
> 
> 赞同：1
> 
> 时间：2012-07-04T08:13:43.940
> 
> 标签：c#, string, file

我有 300 000 行的 .txt 文件。有没有办法从该文件中提取特定的字符串（行）并保存在另一个 .txt 或 excel 中仅提取的行？我谈论日志文件，我在其中保存一些请求，每个请求都花费时间。我想要做的是只提取每个请求的时间，然后我将计算平均时间。

希望你们明白我在说什么。

编辑： .txt 文件的格式是纯文本，每个请求都以。所以我有：

```
Starting date
//body of response from server
End date
Time: 3150,0792 ms <--- time taken 
```

所以，我有 10 000 个请求和 10 000 个响应。我只需要提取每个时间，因为手动滚动整个 .txt 文件并检查每个时间将花费我很多时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T08:20:31.720

你可以通过文件类来实现它

```
using (StreamWriter sw = File.AppendText("File2.txt")) 
{
    foreach (string line in File.ReadLines(@"d:\File1.txt"))
    {
        if (line.Contains("TheWordInLine"))//This is the line you want by matching something
        {
                sw.WriteLine("line);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T08:27:43.483

您可以尝试使用[`MemoryMappedFile`](http://msdn.microsoft.com/en-us/library/system.io.memorymappedfiles.memorymappedfile.aspx)和[`TextReader`](http://msdn.microsoft.com/en-us/library/system.io.textreader.aspx)组合。MMF 允许您访问大文件，文本阅读器允许您以逐行方式处理文件。

```
using (var mmf = 
            MemoryMappedFile.CreateFromFile(@"c:\large.data", FileMode.Open
{
    using (MemoryMappedViewStream stream = mmf.CreateViewStream())
    {
        TextReader tr = new StreamReader(stream);
        while ((line = sr.ReadLine()) != null) 
        {
            Console.WriteLine(line);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-04T08:22:20.143

当然，您可以使用[StreamReader](http://msdn.microsoft.com/en-us/library/system.io.streamreader.aspx) / [StreamWriter](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.aspx)：

```
using (var input = File.OpenText("input.log"))
using (var output = File.CreateText("output.log"))
{
    string line;
    while ((line = input.ReadLine()) != null)
    {
        if (SomeConditionOnLine(line))
        {
            output.WriteLine(line);
        }
    }
} 
```

这将逐行读取输入文件，因此一次在内存中只有一行，如果该行满足您正在寻找的某些条件，则将其写入输出文件。它会很快并且消耗很少的内存，并且适用于巨大的输入文件。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-04T08:26:19.827

```
 private void extract_lines(string filein, string fileout)
    {
        using (StreamReader reader = new StreamReader(filein))
        {
            using (StreamWriter writer = new StreamWriter(fileout))
            {
                string line;
                while ((line = reader.ReadLine()) != null)
                {
                    if (line.Contains("what you looking for"))
                    {
                        writer.Write(line);
                    }
                }
            }
        }
    } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-04T08:21:44.700

正如其他人已经说过的那样，有一个格式示例会很有用。无论如何，也许你会发现这个工具很有用：

[http://filehelpers.sourceforge.net/](http://filehelpers.sourceforge.net/)

我在工作中使用它，它允许您解析和写入不同的文件格式。希望能帮助到你

# grails - 删除在 grails 中使用 shiro 安全插件注册的用户

> ID：11325031
> 
> 赞同：1
> 
> 时间：2012-07-04T08:14:00.633
> 
> 标签：grails, grails-2.0, shiro

我有一个表格用于在删除用​​户之前检查登录名和密码。这个：

```
<table>
        <g:form action="deleteUser">
            <tr>
                <td><label for="username">Login: </label></td>
                <td><g:textField name="username"/>
            </tr>
            <tr>
                <td><label for="password">Password: </label></td>
                <td><g:passwordField name="password"/></td>
            </tr>
            <tr>
                <td colspan="2"><g:submitButton name="delete" value="Delete"/></td>
            </tr>
        </g:form>
    </table> 
```

如果 sha512hash 中的密码（用户通过 shiro 插件注册），我如何为此做逻辑。我如何使用来自 db 的哈希码从密码表单中将密码作为字符串检查？我可以使用 DbRealm 类中的身份验证方法吗，如果是，那么如何？

PS对不起我的英语！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:44:10.333

如果我确实以正确的方式理解了您的问题，那么您只想在删除用户之前最后一次验证用户密码。

在数据库中，只存储密码的哈希值。但是您可以将新密码的哈希值与存储密码的哈希值进行比较：

```
def dbhash = ShiroUser.findByUsername(params.username)?.passwordHash
if (new Sha256Hash("password").toHex()==dbhash) {
  //delete user
} else {
  //display error message
} 
```

希望有帮助！

# android - Android保存实时相机预览图像

> ID：11325035
> 
> 赞同：2
> 
> 时间：2012-07-04T08:14:21.273
> 
> 标签：android, android-camera

我正在尝试实时保存相机预览图像，我的目标是从放置在表面视图上的预览中保存至少 1fps。我被困在这个

```
mCamera.setPreviewCallbackWithBuffer(new Camera.PreviewCallback() {
        private long timestamp=0;
        public synchronized void onPreviewFrame(byte[] data, Camera camera) {
            Log.v("CameraTest","Time Gap = "+(System.currentTimeMillis()-timestamp));
            timestamp=System.currentTimeMillis();
            try{
                FileOutputStream out;
                try {
                    Bitmap bmp=BitmapFactory.decodeByteArray(data,0,data.length);
                    out = new FileOutputStream("/mnt/sdcard/data/pippo.png");
                    bmp.compress(Bitmap.CompressFormat.PNG, 90, out);
                } catch (FileNotFoundException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }           
                camera.addCallbackBuffer(data);
            }catch (Exception e) {
                Log.e("CameraTest", "addCallbackBuffer error");
                return;
            }
            return;
        }
    }); 
```

我想传入的字节数组

```
public synchronized void onPreviewFrame(byte[] data, Camera camera) 
```

包含原始数据图像，因此我尝试将其转换为位图并保存在 sdcard 上。我的问题是：

1.  这是为了实现我的目标而休耕的正确道路吗？
2.  我在日志中收到此错误 SkImageDecoder::Factory 返回 null 我想它与位图转换有关，对吗？

欢迎任何建议。谢谢

在这里完整的代码：

```
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.Iterator;
import java.util.List;
import android.app.Activity;

import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.ImageFormat;
import android.hardware.Camera;
import android.hardware.Camera.ErrorCallback;
import android.hardware.Camera.Size;
import android.os.Bundle;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.SurfaceHolder.Callback;

public class Demo extends Activity {
    SurfaceView mVideoCaptureView;
    private Camera mCamera;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mVideoCaptureView = (SurfaceView) findViewById(R.id.video_capture_surface);
        SurfaceHolder videoCaptureViewHolder = mVideoCaptureView.getHolder();
        videoCaptureViewHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
        videoCaptureViewHolder.addCallback(new Callback() {
            public void surfaceDestroyed(SurfaceHolder holder) {
            }

            public void surfaceCreated(SurfaceHolder holder) {
                startVideo();
            }

            public void surfaceChanged(SurfaceHolder holder, int format,
                    int width, int height) {
            }
        });
    }
    private void startVideo() {
        SurfaceHolder videoCaptureViewHolder = null;
        try {
            mCamera = Camera.open();
        } catch (RuntimeException e) {
            Log.e("CameraTest", "Camera Open filed");
            return;
        }
        mCamera.setErrorCallback(new ErrorCallback() {
            public void onError(int error, Camera camera) {
            }
        }); 
        Camera.Parameters parameters = mCamera.getParameters();
        parameters.setPreviewFrameRate(30);
        parameters.setPreviewFpsRange(15000,30000);
        List<int[]> supportedPreviewFps=parameters.getSupportedPreviewFpsRange();
        Iterator<int[]> supportedPreviewFpsIterator=supportedPreviewFps.iterator();
        while(supportedPreviewFpsIterator.hasNext()){
            int[] tmpRate=supportedPreviewFpsIterator.next();
            StringBuffer sb=new StringBuffer();
            sb.append("supportedPreviewRate: ");
            for(int i=tmpRate.length,j=0;j<i;j++){
                sb.append(tmpRate[j]+", ");
            }
            Log.v("CameraTest",sb.toString());
        }

        List<Size> supportedPreviewSizes=parameters.getSupportedPreviewSizes();
        Iterator<Size> supportedPreviewSizesIterator=supportedPreviewSizes.iterator();
        while(supportedPreviewSizesIterator.hasNext()){
            Size tmpSize=supportedPreviewSizesIterator.next();
            Log.v("CameraTest","supportedPreviewSize.width = "+tmpSize.width+"supportedPreviewSize.height = "+tmpSize.height);
        }

        mCamera.setParameters(parameters);
        if (null != mVideoCaptureView)
            videoCaptureViewHolder = mVideoCaptureView.getHolder();
        try {
            mCamera.setPreviewDisplay(videoCaptureViewHolder);
        } catch (Throwable t) {
        }

        Log.v("CameraTest","Camera PreviewFrameRate = "+mCamera.getParameters().getPreviewFrameRate());
        Size previewSize=mCamera.getParameters().getPreviewSize();
        int dataBufferSize=(int)(previewSize.height*previewSize.width*
                               (ImageFormat.getBitsPerPixel(mCamera.getParameters().getPreviewFormat())/8.0));

        mCamera.addCallbackBuffer(new byte[dataBufferSize]);
        mCamera.addCallbackBuffer(new byte[dataBufferSize]);
        mCamera.addCallbackBuffer(new byte[dataBufferSize]);

        mCamera.setPreviewCallbackWithBuffer(new Camera.PreviewCallback() {
            private long timestamp=0;
            public synchronized void onPreviewFrame(byte[] data, Camera camera) {
                Log.v("CameraTest","Time Gap = "+(System.currentTimeMillis()-timestamp));
                timestamp=System.currentTimeMillis();
                try{
                    FileOutputStream out;
                    try {
                        Bitmap bmp=BitmapFactory.decodeByteArray(data,0,data.length);
                        out = new FileOutputStream("/mnt/sdcard/data/pippo.png");
                        bmp.compress(Bitmap.CompressFormat.PNG, 90, out);
                    } catch (FileNotFoundException e1) {
                        // TODO Auto-generated catch block
                        e1.printStackTrace();
                    }           
                    camera.addCallbackBuffer(data);
                }catch (Exception e) {
                    Log.e("CameraTest", "addCallbackBuffer error");
                    return;
                }
                return;
            }
        });
        try {
            mCamera.startPreview();
        } catch (Throwable e) {
            mCamera.release();
            mCamera = null;
            return;
        }
    }
    private void stopVideo() {
        if(null==mCamera)
            return;
        try {
            mCamera.stopPreview();
            mCamera.setPreviewDisplay(null);
            mCamera.setPreviewCallbackWithBuffer(null);
            mCamera.release();
        } catch (IOException e) {
            e.printStackTrace();
            return;
        }
        mCamera = null;
    }
    public void finish(){
        stopVideo();
        super.finish();
    };
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T22:50:57.240

BitmapFactory 不知道如何解码来自相机的预览数据，因为它是一个原始像素数组，没有识别信息。这就是它抛出异常的原因。

您必须自己将数据转换/解释为 RGB 格式，并从中构造位图。默认情况下，相机提供[NV21](http://developer.android.com/reference/android/graphics/ImageFormat.html#NV21)格式的预览数据。[您可以在此处](http://www.fourcc.org/yuv.php#NV21)找到有关 NV21 的更多详细信息。要创建全彩 RGB 图像，您需要对两个色度通道进行上采样，然后将结果转换为 RGB。

如果您可以保存 JPEG，您也可以使用[YuvImage](http://developer.android.com/reference/android/graphics/YuvImage.html)类。

# python-2.7 - 如何根据用户在最后一项中输入的值更新python中的列表

> ID：11325037
> 
> 赞同：0
> 
> 时间：2012-07-04T08:14:31.003
> 
> 标签：python-2.7

这个我试过

```
aList = ['Q', '0006','005C', '0078','0030','0033', '0041','0041', 'ONE_OF', '20' ]
print aList
removeItem=aList.pop()
print removeItem
print aList
a=raw_input("enter the values ")
add=aList.append('a')
print aList 
```

我得到的输出是 ['Q', '0006','005C', '0078','0030','0033', '0041','0041', 'ONE_OF', 'a' ]

我想要输出['Q', '0006','005C', '0078','0030','0033', '0041','0041', 'ONE_OF', 'a' ] 而不是 'a'最后一项应在列表中显示用户输入的值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T08:31:28.397

也许你的意思是

```
aList.append(a) 
```

顺便说一下，您不需要将其分配给`add`。

如果您想将当前最后一个元素更改为用户输入，则不必使用`pop`then `append`。做就是了

```
a = raw_input("enter the values ")
aList[-1] = a 
```

# backbone.js - Marionette.CompositeView 如何在不使用任何模型的情况下将参数传递给模板

> ID：11325038
> 
> 赞同：2
> 
> 时间：2012-07-04T08:14:35.800
> 
> 标签：backbone.js, marionette

我处于以下情况。

当`collection.length = 0`我想传递一个参数以`listTemplate`显示消息时`listTemplate`（不存在模型！）。我怎样才能实现我的目标？

这是我的代码。

```
var ListView = Marionette.CompositeView.extend({
    template: listTemplate,
    // some code
}); 
```

* * *

```
var itemView = Marionette.ItemView.extend({
    // some code
}); 
```

--

```
app.mainColumn.show(new ListView({
    collection: tasks,
    vent: myApp.vent
})); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T08:39:15.383

我想你可以重新定义`serializeData`方法。

```
var ListView = Marionette.CompositeView.extend({
  模板：列表模板，
  序列化数据：函数（）{
    viewData = { foo: 'foo' };
    if(this.collection.length == 0) viewData.bar = 'bar';
    返回视图数据；
  }
});

```

所以在模板中，`this.bar`可用（仅当集合为空时）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-11T20:08:52.447

您可以以编程方式设置要使用的模板并跳过传入变量。例如：

```
getTemplate: function(){
    if (this.collection.length == 0){
        return "#no-models-are-present-template";
    } else {
        return "#regular-template";
    }
} 
```

来源：[https ://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.view.md#change-which-template-is-rendered-for-a-view](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.view.md#change-which-template-is-rendered-for-a-view)

或者，您可以设置一个空视图
[https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.collectionview.md#collectionviews-emptyview](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.collectionview.md#collectionviews-emptyview)）
或使用模板助手[https://github.com/ marionettejs/backbone.marionette/blob/master/docs/marionette.view.md#object-or-function-as-templatehelpers](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.view.md#object-or-function-as-templatehelpers)
来实现相同的结果。

鉴于它是一个空集合，我会使用一个带有匹配模板的空视图。

# c# - 确定在 ExecuteCore 中调用哪个控制器/动作

> ID：11325040
> 
> 赞同：1
> 
> 时间：2012-07-04T08:14:38.617
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3

我有一个`BaseController`类，我的所有控制器都继承自该类。它有一个重写的`ExecuteCore`方法，该方法执行（几乎）所有控制器及其操作所需的一些初始设置。

```
 protected override void ExecuteCore()
    {
        SetUpMethod1();
        SetUpMethod2();
        base.ExecuteCore();
    }

    protected virtual void SetUpMethod1()
    {
       //some initialization stuff
    }

    protected virtual void SetUpMethod2()
    {
       //some other initialization stuff
    } 
```

在某些控制器需要一些不同行为的情况下，很容易覆盖控制器中的相关方法，并且效果很好。但是，来自不同控制器的某些操作需要在设置方法中有所不同。

我想出了

```
 protected virtual void SetUpMethod1()
    {
        string controller = (string)ControllerContext.RouteData.Values["controller"]);
        string action = (string)ControllerContext.RouteData.Values["action"]);
        if (controller/account combination is in a list)
            //special setup
        else
            //regular setup
    } 
```

我无法摆脱我做错了什么的感觉。有没有更好/正确的方法来获得这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:56:27.493

添加新属性

```
public sealed class SpecialSetUpAttribute : Attribute
{
} 
```

我已经定义了两个控制器，其中，我只为一个控制器定义了这个属性，而没有为另一个控制器定义这个属性。请看下面的代码。

基本控制器

```
public class BasicController : BaseController
    {
        //
        // GET: /Basic/

        public ActionResult Index()
        {
            return View();
        }

} 
```

特殊设置控制器

```
[SpecialSetUp]
public class HomeController : BaseController
{

} 
```

两个控制器都派生自 BaseController。请参阅 BaseController 的代码。

```
 public class BaseController : Controller
        {
            protected override void ExecuteCore()
            {
                Type controllerType = this.ControllerContext.Controller.GetType();
                ControllerDescriptor controllerDescriptor = new ReflectedControllerDescriptor(controllerType);

// Edit start
                string actionName = Convert.ToString(this.ControllerContext.RouteData.Values["action"]);
            string controller = Convert.ToString(this.ControllerContext.RouteData.Values["controller"]);

// Edit end

                if (controllerDescriptor.IsDefined(typeof(SpecialSetUpAttribute), true))
                {
                    //Do special setup
                }
                else
                {
                    //Do normal setup
                }
                base.ExecuteCore();
            }
        } 
```

当您为 BasicController 运行应用程序时，它将执行正常的设置代码。当您为 HomeController 运行应用程序时，它将执行特殊的设置代码。我已经为控制器级别实现了此代码。你也可以为动作级别做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:41:30.433

我会选择一个稍微不同的方向。

我将拥有 2 个基类，而不是 if 语句：BaseForSetup1Controller、BaseForSetup2Contoller。

所以，

```
public class UsingSetup1Controller : BaseForSetup1Controller {} 
```

和

```
public class UsingSetup2Controller : BaseForSetup2Controller {} 
```

更进一步：我更喜欢使用过滤器而不是基类初始化。因此，您可以创建几个初始化过滤器（使用 OnActionExecuting 方法的操作过滤器）并根据需要将它们应用到控制器上。

```
[Setup1Initialization]
public class UsingSetup1Controller { }

[Setup2Initialization]
public class UsingSetup2Controller { } 
```

# vim - 如何自定义 NERDTree 行为

> ID：11325044
> 
> 赞同：4
> 
> 时间：2012-07-04T08:14:43.093
> 
> 标签：vim, customization, nerdtree

我最近将 NERDTree 和 NERDTreeTabs 添加到我的 vim 配置中，对此我感到非常高兴。

但是，我想进一步配置它并具有以下行为：

`Ctrl`+ `Left`:

*   如果在 NERDTree 内，什么也不做。

*   如果在编辑的文件中，请转到打开的 NERDTree，如果不存在则先打开一个。我想`NERDTreeTabsToggle`应该使用它，但要使用它，我必须能够检测 NERDTree 是否已经打开，而不是通过“切换”它来关闭它。

`Ctrl`+ `Right`:

*   如果在 NERDTree 中，请返回编辑的文件而不关闭 NERDTree。（就像`Ctrl`- `w`，`Right`会做的那样。）

*   如果在编辑后的文件中，隐藏/关闭 NERDTree。

但是，我的 Vim 脚本技能对我来说太低了，无法获得任何令人满意的结果。例如，我不知道如何检查当前活动窗口是什么或如何编写适当的条件语句。

有人可以帮我吗？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T09:57:17.017

If finally found a way.

I edited the `nerdtree_plugin/vim-nerdtree-tabs.vim` file, adding these functions:

```
" === Stepped Open/Close functions ===
" focus the NERDTree view, creating one first if none is present
fun! s:NERDTreeSteppedOpen()
  if !s:IsCurrentWindowNERDTree()
    if s:IsNERDTreeOpenInCurrentTab()
      call s:NERDTreeFocus()
    else
      call s:NERDTreeMirrorOrCreate()
    endif
  endif
endfun

" unfocus the NERDTree view or closes it if it hadn't had focus at the time of
" the call
fun! s:NERDTreeSteppedClose()
  if s:IsCurrentWindowNERDTree()
    call s:NERDTreeUnfocus()
  else
    let l:nerdtree_open = s:IsNERDTreeOpenInCurrentTab()

    if l:nerdtree_open
      silent NERDTreeClose
    endif
  endif
endfun 
```

~~I also made a [pull-request](https://github.com/jistr/vim-nerdtree-tabs/pull/21) to the author to ask him if he wants to add theses functions upstream.~~

**The author added my pull-request to the main repository, so with the next release, you can just call the functions directly.**

Hope it helps people.

# c# - 如何在 C# 中创建热点？

> ID：11325045
> 
> 赞同：-1
> 
> 时间：2012-07-04T08:14:44.397
> 
> 标签：c#, winforms

我想在我的 winform 应用程序中的图像上创建一个热点。我遵循了[HERE](https://stackoverflow.com/questions/1270147/creating-hotspots-in-c-sharp)发布的解决方案，但我不知道应该将坐标放在哪里才能使此方法起作用：

```
protected override void OnMouseMove(MouseEventArgs mouseEvent) 
{ 
     string X = mouseEvent.X.ToString();
     string Y = mouseEvent.Y.ToString(); 
} 
```

我应该把坐标放在哪里？我有两个坐标 (X,Y): 110, 45

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T08:28:08.417

如果您想响应鼠标在图像中的[矩形](http://msdn.microsoft.com/en-us/library/9wcdy991.aspx)上方：

```
private Rectangle _hotspot = new Rectangle(20, 30, 10, 10);

protected override void OnMouseDown(MouseEventArgs e)
{
    if (e.Button == MouseButtons.Left)
    {
        if (_hotspot.Contains(e.Location))
        {
            // respond to the mouse being in the hotspot
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:21:13.390

如果要将图像放置在这些坐标上，则需要使用这些坐标设置该图像的顶部和左侧

```
double X = mouseEvent.X;
double Y = mouseEvent.Y;

pictureBox.Top = X;
pictureBox.Left = Y; 
```

如果您只想知道例如当有人在图片框上徘徊时，请使用此事件

```
private void pictureBox_MouseMove(object sender, System.Windows.Forms.MouseEventArgs e)
{

 // do here what you want
} 
```

# php - 联系表格不发送数据

> ID：11325049
> 
> 赞同：0
> 
> 时间：2012-07-04T08:15:13.660
> 
> 标签：php, html, forms

我正在使用以下内容让联系页面向我发送包含访问者数据的电子邮件。

```
 <form method="post" action="submit.php">
            <label for="Name">Name</label>
            <input type="text" name="Name" id="Name" />

            <label for="Email">eMail</label>
            <input type="text" name="Email" id="Email" />

            <input type="submit" name="submit" value="Send" class="submit-button" />
            </form> 
```

和PHP：

```
 <?php

    $EmailFrom = "Me";
    $EmailTo = "me@me.com";
    $Subject = "Test";
    $Name = Trim(stripslashes($_POST['Name'])); 
    $Email = Trim(stripslashes($_POST['Email'])); 

    // validation
    $validationOK=true;
    if (!$validationOK) {
      print "<meta http-equiv=\"refresh\" content=\"0;URL=error.htm\">";
      exit;
    }

    // prepare email body text
    $Body = "";
    $Body .= "Name: ";
    $Body .= $Name;
    $Body .= "\n";
    $Body .= "eMail: ";
    $Body .= $Email;
    $Body .= "\n";

    // send email 
    $success = mail($EmailTo, $Subject, $Body, "From: $EmailFrom");

    // redirect to success page 
    if ($success){
      print "<meta http-equiv=\"refresh\" content=\"0;URL=ok.html\">";
    }
    else{
      print "<meta http-equiv=\"refresh\" content=\"0;URL=error.htm\">";
    }
    ?> 
```

尝试时，我只得到 PHP 文件准备的电子邮件正文，但没有访问者插入的信息，如下所示：

姓名： 电子邮件：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:24:36.027

尝试为电子邮件设置标题信息：

```
$header  = 'MIME-Version: 1.0'."\r\n";
$header .= 'Content-type: text/plain; charset=iso-8859-1'."\r\n";
$header .= 'From: '.$EmailFrom."\r\n";

$success = mail($EmailTo, $Subject, $Body, $header); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:59:14.240

最后我只是稍微简化了一点..这似乎是一个“区分大小写”的问题，它阻止了表单与 php 文件进行通信。

所以这就是最终奏效的方法：

```
 <form method="post" action="submit.php">
            <label for="Name">Name</label>
            <input type="text" name="Name" id="name" />

            <label for="Email">eMail</label>
            <input type="text" name="Email" id="email" />

            <label for="Message">Message</label>
            <textarea name="Message" rows="10" id="message"></textarea>

            <input type="submit" name="submit" value="Send" class="submit" id="submit"/>
            </form> 
```

和PHP：

```
 <?php

    $EmailFrom = "Test";
    $EmailTo = "test@test.com";
    $Subject = "Testing";
    $Name = Trim(stripslashes($_POST['Name'])); 
    $Email = Trim(stripslashes($_POST['Email'])); 
    $Message = Trim(stripslashes($_POST['Message'])); 

    // validation
    $validationOK=true;
    if (!$validationOK) {
      print "<meta http-equiv=\"refresh\" content=\"0;URL=error.htm\">";
      exit;
    }

    // prepare email body text
    $Body = "";
    $Body .= "Name: ";
    $Body .= $Name;
    $Body .= "\n";
    $Body .= "eMail: ";
    $Body .= $Email;
    $Body .= "\n";
    $Body .= "Message: ";
    $Body .= $Message;
    $Body .= "\n";

    // send email 
    $success = mail($EmailTo, $Subject, $Body, "From: $EmailFrom");

    // redirect to success page 
    if ($success){
      print "<meta http-equiv=\"refresh\" content=\"0;URL=ok.htm\">";
    }
    else{
      print "<meta http-equiv=\"refresh\" content=\"0;URL=error.htm\">";
    }
    ?> 
```

# asp.net-mvc-3 - 网页图片，图片不显示

> ID：11325051
> 
> 赞同：0
> 
> 时间：2012-07-04T08:15:28.620
> 
> 标签：asp.net-mvc-3

[WebImage 的简单教程](http://www.mindstick.com/Articles/0bbc555a-0a4e-4774-a580-fa804c570458/?WebImage%20Helper%20in%20ASP.NET%20MVC)

试过了，但图像不会显示，图像在我的项目中

```
public void GetBeatles()
    {
        WebImage beatles = new    WebImage("../../Content/themes/base/images/classicrock/beatles.jpg");
        beatles.Write();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:53:39.310

查里，

尝试（在控制器中）怎么样：

```
WebImage beatles = new WebImage(HostingEnvironment
         .MapPath(@"~/Content/themes/base/images/classicrock/beatles.jpg"));

beatles.Write(); 
```

在视图中：

```
<img src="@Url.Action("GetBeatles")" /> 
```

该`HostingEnvironment.MapPath`部分将根据其与内容文件夹的关系解析您到物理磁盘路径的路径。

# java - 为什么从 Java 中的实例方法写入静态字段不好？

> ID：11325052
> 
> 赞同：10
> 
> 时间：2012-07-04T08:15:30.723
> 
> 标签：java, synchronization, static-members

我在[SO](https://stackoverflow.com/questions/3630485/whats-the-best-way-to-fix-this-write-to-static-field-from-instance-method-fin)中找到了一篇文章，讨论了防止从实例方法写入静态字段所需的代码更改，但为什么这样做不是一个好习惯？那么为什么 Java 设计者允许这样做呢？换句话说，为什么当有人尝试这样做时编译器不会抛出错误？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-04T08:21:40.347

用“findbugz”文档的话来说：

> 此实例方法写入静态字段。如果正在操纵多个实例，这很难纠正，而且通常是不好的做法。

也就是说，它并不总是错误的，只是它通常是错误的来源。操作静态字段的实例对象对于例如共享对象的延迟初始化可能很有用，因此它并不总是错误的，但很难做到正确（特别是如果多个线程可能同时运行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:40:02.210

它可能很有用，例如，如果您有一个管理蚂蚁的应用程序，并且您需要能够从 ant 类中访问创建的蚂蚁总数。这可以通过写入一个静态方法来完成，该方法在每次创建新蚂蚁时跟踪蚂蚁总数写入静态方法 addAnt();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T08:33:50.187

除了上述之外，从文档的角度来看，如果您使用以下形式，人们很容易假设它是一个实例字段：

```
someField = null 
```

或者

```
myObj.someField = null 
```

使用表格

```
myClass.someField = null 
```

使它更清晰并防止 findbugz 警告（显然，我没有测试过）。请注意，这不会阻止所描述的多线程问题。

# sql - 加入从 pl/sql 函数中选择数据的子查询

> ID：11325053
> 
> 赞同：1
> 
> 时间：2012-07-04T08:15:34.157
> 
> 标签：sql, oracle, plsql

1.  我需要加入该子查询，因为它返回不止一行。
2.  加入子查询看起来像（我不知道确切的语法）：

    ```
    select * from some_pl_sql_function(id_arg) 
    ```

3.  我需要将它与 id_arg 加入，它是某个表的列。

4.  该函数返回字符串数组。

最终版本应该看起来像（我猜）：

```
select * from some_table
left outer join (select * from some_pl_sql_function(id_arg)) sub_query
    on some_table.id_arg = sub_query.id_arg 
```

我应该在子查询中写什么才能使它起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:49:25.290

如果您的`arrayofstrings`（函数的返回类型）是在模式级别定义的，即-

```
create or replace type arrayofstrings as table of varchar2(32767); 
```

然后你可以像这样使用你的函数：

```
select id_arg, column_value from table(some_pl_sql_function(id_arg)) 
```

# java - 在 JPA 中以实体为键映射 Map

> ID：11325059
> 
> 赞同：0
> 
> 时间：2012-07-04T08:15:55.537
> 
> 标签：java, jpa, orm, mapping

是否可以映射：

```
@ManyToMany(cascade = Array(CascadeType.ALL), fetch = FetchType.EAGER)
Map<Entity, Double> quantities; 
```

代替：

```
Map<Double, Entity> 
```

?

如果没有，您如何映射例如购物篮中的项目数量（没有专用表）？

在此先感谢，埃塔姆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:32:54.307

是的，它可以在没有其他实体的情况下进行映射，例如，参见[Hibernate: mapping many-to-many to Map](https://stackoverflow.com/questions/4327752/hibernate-mapping-many-to-many-to-map/4328788#4328788)。

另请注意，无论如何都会使用专用表，它可以映射为实体，也可以不映射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T12:35:06.657

您可以使用@ElementCollection 和@MapKeyJoinColumn，

请参阅 [http://en.wikibooks.org/wiki/Java_Persistence/Relationships#Map_Key_Columns_.28JPA_2.0.29](http://en.wikibooks.org/wiki/Java_Persistence/Relationships#Map_Key_Columns_.28JPA_2.0.29)

但这是一种不寻常的模型，您最好创建一个实体来映射到连接表。

# php - 通过 PHP 与 cPanel 交互

> ID：11325060
> 
> 赞同：1
> 
> 时间：2012-07-04T08:15:57.570
> 
> 标签：php, mysql, cpanel

我曾经使用 000WebHost，发现他们有一个通过 PHP 编写的自定义版本的 cPanel，它与 cPanel 交互。

谁能解释这是如何工作的？

谢谢，

康纳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:18:33.197

通过使用 cPanel / WHM [API。](http://docs.cpanel.net/twiki/bin/view/SoftwareDevelopmentKit/WebHome)

# mysql - 使用单个表的 mysqldump 比使用 --all-databases 慢得多

> ID：11325067
> 
> 赞同：0
> 
> 时间：2012-07-04T08:16:36.140
> 
> 标签：mysql, performance, backup, mysqldump, database-performance

我使用两种不同的方法来备份我的 mysql 数据库。带有 --all-databases 的 mysqldump 比将每个数据库转储到单个文件中的循环要快得多，并且性能要好得多。为什么？以及如何加快循环版本的性能

![在此处输入图像描述](../Images/e7776f3dfbb08d1b9bb31581ae515cf5.png)

```
/usr/bin/mysqldump --single-transaction --all-databases  | gzip > /backup/all_databases.sql.gz 
```

即使很好，这个循环也会超过 65 个数据库：

```
nice -n 19 mysqldump --defaults-extra-file="/etc/mysql/conf.d/mysqldump.cnf" --databases -c xxx -q > /backup/mysql/xxx_08.sql
nice -n 19 mysqldump --defaults-extra-file="/etc/mysql/conf.d/mysqldump.cnf" --databases -c dj-xxx -q > /backup/mysql/dj-xxx_08.sql
nice -n 19 mysqldump --defaults-extra-file="/etc/mysql/conf.d/mysqldump.cnf" --databases -c dj-xxx-p -q > /backup/mysql/dj-xxx-p_08.sql
nice -n 19 mysqldump --defaults-extra-file="/etc/mysql/conf.d/mysqldump.cnf" --databases -c dj-foo -q > /backup/mysql/dj-foo_08.sql 
```

mysqldump.cnf 仅用于身份验证，没有其他选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:07:20.923

有很多不同之处。

1.  在 A 中，您正在写入 gzip，它会在写入磁盘之前压缩数据。B 编写可以大 5-10 倍的普通 sql 文件（来自我的数据库的结果）。如果您的性能受磁盘限制，这可能是解决方案

2.  -c = A 中未指定“完整插入”

3.  -q 未在 A 中指定

4.  对于大型数据库`INFORMATION_SCHEMA`，使用 mysql 查询可能会很痛苦（尝试执行`SELECT * FROM information_schema.columns`。对于 B，每个转储都必须执行这些查询，而 A 只需执行一次。

# linux - 如何拆分字符串并使用 cut 打印所有子字符串

> ID：11325068
> 
> 赞同：2
> 
> 时间：2012-07-04T08:16:42.093
> 
> 标签：linux, bash, text, cut

我有一些逗号分隔的字符串，想在 bash 中使用 cut 命令将它们拆分：

```
This, is a, sample input.
This, is, another string, which could, appear, in my text, file. 
```

我还想打印输出中的所有子字符串。第一个字符串的期望输出是：

```
This
is a
sample input. 
```

这是第二个字符串的所需输出：

```
This
is
another string
which could
appear
in my text
file. 
```

但由于逗号（子字符串）的数量在所有字符串中都不是固定的，我不知道如何告诉 cut 命令显示所有子字符串。（例如，第一个字符串中有 2 个逗号，第二个字符串中有 6 个）。有没有办法在 bash 中做到这一点（使用 cut 或其他命令）？

我必须补充一点，虽然我在这篇文章中的示例是英文的，但我的实际字符串是阿拉伯语。我的意思是我想使用的命令必须能够使用 Unicode 字符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T08:26:22.190

在我看来，这个问题可以通过两种方式解决。

1.  分块读取字符串，直到得到逗号。使用**`read`**bash**数组**
2.  `,`用换行符 ( )替换逗号 ( `\n`)。使用**`tr`**.

IIRC，`tr`应该是 unicode 安全的，同时`sed`取决于实现。我不是 100% 确定这一点，我将不得不查一下。

* * *

使用**Bash 数组**：

```
$ IFS=, read -ra arr <<< "μήλο, πορτοκάλι μπανάνα, αχλάδι"
$ printf "%s\n" "${arr[@]# }"
μήλο
πορτοκάλι μπανάνα
αχλάδι 
```

* * *

使用**`tr`**

```
$ echo "μήλο, πορτοκάλι μπανάνα, αχλάδι" | tr ',' '\n'
μήλο
 πορτοκάλι μπανάνα
 αχλάδι 
```

注意这个替换会留下一个前导空格，因为单词在逗号后面有一个空格。

您可以通过重新处理输出以消除前导空格
或预处理字符串以抑制逗号后的空格来摆脱这种情况

* * *

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T08:40:11.077

我会要求你为此使用**awk**！

```
$ echo "μήλο, πορτοκάλι, αχλάδι" | awk '{FS=", "}{for (i=1; i<=NF; i++) print $i}' 
```

这应该给

```
μήλο
πορτοκάλι
αχλάδι 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T08:41:33.043

只是因为你想削减：

```
line='This, is a, sample input.'
for i in $(seq 1 $(echo "$line," | tr -dc ',' | wc -c)); do
  echo $line | cut -d, -f$i; 
done 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-13T21:08:49.733

这应该有效：

```
aa="This, is a, sample input."
bb="This, is, another string, which could, appear, in my text, file."

echo $aa|tr ',' '\n'

echo $bb|tr ',' '\n' 
```

问候。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T08:22:07.790

您也可以使用**cut**和**awk**。

这个[例子](http://www.cyberciti.biz/tips/processing-the-delimited-files-using-cut-and-awk.html)展示了如何使用它们。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-04T08:25:45.663

您可以使用 tr 命令

```
 IN="This, is a, sample input."

arr=$(echo $IN | tr "," "\n")

for x in $arr
do
    echo "$x"
done 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-04T08:34:25.303

或者，如果您对子进程不利，请使用 Bash：

```
str='This, is a, sample input.'

IFS=','
set $str
# Remove leading spaces
while (( $# > 0 ))
do   
    echo "${1# }"    
    shift
done 
```

编辑：这是一个 Perl 解决方案：

```
use warnings;
use strict;

my $str = 'This, is a, sample input.';
my @subs = split(', ',$str);

local $" = "\n";
print "@subs\n"; 
```

# php - 电子邮件回复地址

> ID：11325071
> 
> 赞同：1
> 
> 时间：2012-07-04T08:16:51.220
> 
> 标签：php, email

我对地址的电子邮件回复有问题。由于某种原因，MIME 类型显示在回复地址中。

这是标题

```
$headers = 'From: The Client <'.$emailTo.'>' . "\r\n" . 'Reply-To: info@mydomain.com';
    $headers .= "MIME-Version: 1.0\r\n";
    $headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n"; 
```

当我收到邮件时，如果我点击回复，在地址字段中我会得到：

```
"1.0" <info@mydomain.commime-version:> 
```

我可能遗漏了一些明显的东西，但我无法解决。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T08:19:05.360

你错过了`\r\n`：

```
$headers = "From: The Client <".$emailTo.">\r\n";
$headers .= "Reply-To: info@mydomain.com\r\n";
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T08:19:07.230

`\r\n`回复后您错过了。

```
$headers = 'From: The Client <'.$emailTo.'>' . "\r\n" . 'Reply-To: info@mydomain.com' . "\r\n"; 
```

# mysql - 在线添加 MySQL Cluster Sql 节点

> ID：11325082
> 
> 赞同：2
> 
> 时间：2012-07-04T08:17:12.847
> 
> 标签：mysql

我在 4 个数据节点和 4 个 sql 节点上使用 mysql ndbcluster，最近我需要在不停机的情况下再添加 4 个 sql 节点。在 Mysql Manual 中，我找到了在线添加数据节点的指南，但我找不到任何 sql 节点。

[http://dev.mysql.com/doc/mysql-cluster-excerpt/5.1/en/mysql-cluster-online-add-node.html](http://dev.mysql.com/doc/mysql-cluster-excerpt/5.1/en/mysql-cluster-online-add-node.html)

你有这方面的指南吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T12:04:51.603

添加额外的 MySQL 服务器非常简单。

假设您已经为 config.ini 文件中的每个部分 [mysqld] 或 [api] 部分运行了一个 mysqld 进程，为您需要添加的每个新 MySQL 服务器添加一个额外部分（您可能希望包含一个几个备件）。

要应用更新的 configi.ini 文件，请停止每个 ndb_mgmd 进程，然后使用 --initial 选项重新启动它们（否则它们将使用配置数据的缓存副本而不是更新的 config.ini 文件）。

管理节点再次运行后，重新启动每个数据节点：

*   *等待*每个数据节点恢复服务后再重启下一个（这样每个节点组中始终有一个数据节点可用，因此服务不会中断）
*   不要使用**--initial**选项启动它们，否则您将清除数据

一旦所有数据节点再次运行，只需启动新的 mysqld 实例。

如果您使用 MySQL 集群管理器（从[edelivery.oracle.com](http://edelivery.oracle.com)下载），那就更简单了

安德鲁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-27T22:03:45.350

如果您在 config.ini 中没有此新 SQL 节点的部分，则可以执行以下操作：

1.  在 config.ini 文件中为新的 SQL 节点添加一个部分。
2.  使用 --initialize 或 --reload 选项重新启动管理节点进程。
3.  对数据节点和当前 SQL 节点[执行滚动重启，但](https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-rolling-restart.html)**不要**启动新的 SQL 节点。
4.  在集群中每个数据库的datadir下的新SQL节点中创建一个目录，并为mysql用户分配正确的权限。
5.  最后，启动新的 SQL 节点。

如果该新 SQL 节点的 config.ini 文件中已有一个部分并且反映在集群中，则可以跳过 1:3 的步骤并从步骤 4 开始。

# grails - Grails 2.0.3 HSQLDB

> ID：11325083
> 
> 赞同：0
> 
> 时间：2012-07-04T08:17:13.023
> 
> 标签：grails, grails-orm, hsqldb

我正在使用 Grails 2.0.3 创建一个 grails 应用程序，但我想使用 HSQLDB 数据库存储库。必须返回 HSQLDB 而不是使用 Grails 2.0+ 的默认数据库存储库的原因，H2，Jaspersoft 的 IReport 不支持 H2。

我尝试将 H2 插件添加到 IReport 或使用 Netbeans 并同时包含 IReport 和 H2 插件，但均无效。

我的问题是：

1.  我是否要将 HSQLDB 的库 [.jar] 导入到项目的库中？
2.  我要更改 driverClassName 吗？【会叫什么名字？】
3.  如果 HSQLDB 位于本地主机内，它的默认端口是什么？
4.  除了包含`runtime 'hsqldb:hsqldb:1.8.0.10'`在依赖项关闭之外，`app/conf/BuildConfig.grovvy`我还需要下载 HSQLDB 服务器吗？
5.  我习惯于使用 H2，当我改用 HSQLDB 时，是否/是否有我必须注意的变化/担忧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T21:36:20.640

1.  BuildConfig.groovy 中的运行时 'hsqldb:hsqldb:1.8.0.10' 就足够了
2.  driverClassName = "org.hsqldb.jdbcDriver"
3.  根据您的要求指定连接 url，例如：“jdbc:hsqldb:mem:devDB” - 使用内存数据库，“jdbc:hsqldb:file:prodDb;shutdown=true” - 使用基于文件的服务器

# javascript - JsRender：如何将变量传递到嵌套模板中

> ID：11325085
> 
> 赞同：5
> 
> 时间：2012-07-04T08:17:30.730
> 
> 标签：javascript, jquery, jsrender

我想在网页的不同部分使用嵌套模板。对于不同的部分，我需要从嵌套模板中的数组中获取一个值。我不能使用 for 循环，因为每个部分在网站上都有不同的类和位置。是否可以将变量传递到嵌套模板中？以下代码简化了我想要实现的目标：

```
<script id="myBtnTmpl" type="text/x-jsrender">
    <button class="btn">        
        {{:myData.myArray[INDEX_VARIABLE].btnName}}
    </button>
</script>

//  Here I want to use INDEX_VARIABLE = 0
<div class="BigButton">
    {{if myData tmpl="myBtnTmpl"/}}
</div>

//  Here I want to use INDEX_VARIABLE = 1
<div class="MediumButton">
    {{if myData tmpl="myBtnTmpl"/}}
</div>

//  Here I want to use INDEX_VARIABLE = 2
<div class="SmallButton">
    {{if myData tmpl="myBtnTmpl"/}}
</div> 
```

另一个问题：当使用嵌套模板时，是否可以在没有 if 语法的情况下包含像这样的嵌套模板 {{tmpl="myBtnTmpl"/}}？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T03:46:55.220

是的，您可以在您使用的标签上设置命名模板参数`tmpl="myBtnTmpl"`（无论是`{{if}}`标签还是`{{for}}`标签）：

```
<div class="BigButton">
    {{for myData ~arrIndex=0 tmpl="myBtnTmpl"/}}
</div> 
```

然后，您可以像访问已注册的帮助程序一样访问模板参数 - 通过将“~”附加到名称。

```
<button class="btn">        
    {{:myData.myArray[~arrIndex].btnName}}
</button> 
```

顺便说一句，您还可以使用 render 方法传递变量和辅助函数（除了数据）。我刚刚添加了一个新的[示例演示](http://borismoore.github.com/jsrender/demos/step-by-step/12_passing-in-context.html)来展示这一点。

所以这意味着模板可以类似地“参数化”，无论您是从代码中呈现它们，还是像在上面的嵌套模板中那样以声明方式呈现它们。

# android - SBT Android-Plugin 中“proguardInJars”的语义是什么？

> ID：11325087
> 
> 赞同：1
> 
> 时间：2012-07-04T08:17:31.520
> 
> 标签：android, scala, sbt, proguard, sbt-android-plugin

在 SBT Android 插件中，在 proguardTask 中，有一个 value `proguardInJars`。
在我的简单测试项目中，它包含`C:\Users\Administrator\.sbt\boot\scala-2.9.1\lib\scala-library.jar`.

然后将它与我自己编译的类组合成另一个值`inJars`。

但是，它是通过附加一些东西来组合的。这是来自 jberkel/android-plugin 的代码：

```
val manifestr = List("!META-INF/MANIFEST.MF", "R.class", "R$*.class", "TR.class", "TR$.class", "library.properties")
val sep = JFile.pathSeparator
val inJars = ("\"" + classDirectory.absolutePath + "\"") +: proguardInJars.map("\"" + _ + "\""+manifestr.mkString("(", ",!**/", ")")) 
```

我想知道是否有人知道添加的东西的语义。
另外，如果我要分解`inJars`成单独的值，我是否还需要附加清单内容`proguardInJars`才能`proguardTask`正常运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:56:38.320

android 插件此时正在`injars`为 ProGuard 准备命令行参数。ProGuard 使用通用类路径来确定 jar 中的哪些文件要考虑，哪些不考虑，这是 jar 中文件匹配器的一种形式。

例如，`.../scala-library.jar(!META-INF/MANIFEST.MF,!**/R.class,!**/R$*.class,!**/TR.class,!**/TR$.class,!**/library.properties)`表示不应将 ( )`R/TR.class`开头的文件或类文件`R$`视为输入。`TR$``!`

看这里：

[http://proguard.sourceforge.net/index.html#manual/usage.html](http://proguard.sourceforge.net/index.html#manual/usage.html)

单击`class_path`以显示有关 ProGuard 使用的通用类路径格式的更多详细信息。

# javascript - Android 图片来自网络

> ID：11325088
> 
> 赞同：0
> 
> 时间：2012-07-04T08:17:32.970
> 
> 标签：javascript, android, html, salesforce

我正在android中开发一个混合应用程序。我正在尝试从网络加载外部图像。但它没有加载。当我将内部图像存储在 assests->www 文件夹中时，内部图像工作正常。我使用以下代码从网络加载外部图像

```
<img src="http:....gif" /> 
```

帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:53:08.743

我已经能够显示来自网络的图像，

MainActivity 中的 Java 代码

```
 myWebView = new WebView(this);
    myWebView.getSettings().setJavaScriptEnabled(true);
    myWebView.getSettings().setAppCacheEnabled(true);
    // myWebView.getSettings().setAppCachePath("/mnt/sdcard/mayur/");
    myWebView.getSettings().setLoadsImagesAutomatically(true);
    myWebView.getSettings().setCacheMode(
            WebSettings.LOAD_CACHE_ELSE_NETWORK);
    myWebView.loadUrl("file:///android_asset/chapters.html"); 
```

资产文件夹中的 HTML 文件 chapters.html

```
<html>
<body>
<img src="http://jimpunk.net/Loading/wp-content/uploads/loading1.gif" />
</body>
</html> 
```

# grails - Grails 2.0.4 部署在 Tomcat6 上

> ID：11325092
> 
> 赞同：0
> 
> 时间：2012-07-04T08:17:46.137
> 
> 标签：grails, tomcat6

我正在尝试在 tomcat 6（ubuntu 11.04 更新）上部署一个 grails APP（grails 2.0.4）。但我在运行应用程序时遇到此错误：

```
javax.servlet.ServletException: Filter execution threw an exception
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:259)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.codehaus.groovy.grails.web.servlet.mvc.GrailsWebRequestFilter.doFilterInternal(GrailsWebRequestFilter.java:69)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.codehaus.groovy.grails.web.filters.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:69)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.NoSuchMethodError: javax.servlet.http.HttpServletRequest.getServletContext()Ljavax/servlet/ServletContext;
        at org.codehaus.groovy.grails.plugins.springsecurity.AnnotationFilterInvocationDefinition.determineUrl(AnnotationFilterInvocationDefinition.java:106)
        at org.codehaus.groovy.grails.plugins.springsecurity.AbstractFilterInvocationDefinition.getAttributes(AbstractFilterInvocationDefinition.java:82)
        at org.springframework.security.access.intercept.AbstractSecurityInterceptor.beforeInvocation(AbstractSecurityInterceptor.java:173)
        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:114)
        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:139)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
        at org.codehaus.groovy.grails.plugins.springsecurity.RequestHolderAuthenticationFilter.doFilter(RequestHolderAuthenticationFilter.java:40)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.codehaus.groovy.grails.plugins.springsecurity.MutableLogoutFilter.doFilter(MutableLogoutFilter.java:79)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        ... 25 more
2012-07-04 08:02:50,655 [http-8080-1] ERROR StackTrace  - Full Stack Trace:
java.lang.NoSuchMethodError: javax.servlet.http.HttpServletRequest.getServletContext()Ljavax/servlet/ServletContext;
        at org.codehaus.groovy.grails.plugins.springsecurity.AnnotationFilterInvocationDefinition.determineUrl(AnnotationFilterInvocationDefinition.java:106)
        at org.codehaus.groovy.grails.plugins.springsecurity.AbstractFilterInvocationDefinition.getAttributes(AbstractFilterInvocationDefinition.java:82)
        at org.springframework.security.access.intercept.AbstractSecurityInterceptor.beforeInvocation(AbstractSecurityInterceptor.java:173)
        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:114)
        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:139)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
        at org.codehaus.groovy.grails.plugins.springsecurity.RequestHolderAuthenticationFilter.doFilter(RequestHolderAuthenticationFilter.java:40)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.codehaus.groovy.grails.plugins.springsecurity.MutableLogoutFilter.doFilter(MutableLogoutFilter.java:79)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.codehaus.groovy.grails.web.servlet.mvc.GrailsWebRequestFilter.doFilterInternal(GrailsWebRequestFilter.java:69)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.codehaus.groovy.grails.web.filters.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:69)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
        at java.lang.Thread.run(Thread.java:662)
2012-07-04 08:02:50,655 [http-8080-1] ERROR StackTrace  - Full Stack Trace:
javax.servlet.ServletException: Filter execution threw an exception
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.NoSuchMethodError: javax.servlet.http.HttpServletRequest.getServletContext()Ljavax/servlet/ServletContext;
        ... 1 more 
```

该应用程序使用 grails run-app 命令运行良好

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:01:19.050

这是 Spring Security Core 插件内部的一个问题，它调用了一个仅在 Servlet 规范 3.0 版中引入的 API。

您使用的是什么版本的 spring-security-core？看起来这个问题[已经解决了](https://github.com/grails-plugins/grails-spring-security-core/commit/e5eaf15a99df014be1c6c9408df14611ca7a2af6)，所以如果可以的话，请尝试升级到更高版本的插件。

# openerp - 为什么授予对 account.analytic 的读取权限会启用菜单“项目/发票/合同续订”？

> ID：11325094
> 
> 赞同：1
> 
> 时间：2012-07-04T08:18:00.107
> 
> 标签：openerp

我看到将分析帐户的读取权限授予一个组，它会自动为分配给该组的用户启用菜单项目/发票/合同续订。即使该菜单不属于该组的菜单列表

有没有办法避免这种情况？或者我怎样才能删除该组的菜单项？因为这正是我不想要的，所以向该组授予对分析帐户视图的访问权限，但是该组需要对 account.analytic 的读取权限才能创建任务工作和时间表行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:14:25.597

首先，这里的分析账户读取权限是模型的访问权限（操作级安全）（是否可以创建读取，写入或取消链接）不是来自菜单，所以你可以做什么：

创建一个额外的组，该组将禁用此菜单以供使用，并仅为该组分配该组，因此如果您希望将该菜单分配给特定用户，则将该组分配给特定用户，否则不要将该组分配给用户，以便用户看到.

否则，您必须做的是，如果您有单独的分叉，则在该菜单用户上的`groups=""`属性以确保只有哪个组可以看到它。

问候

# batch-file - 批量编辑中的 if/else 命令语法

> ID：11325100
> 
> 赞同：1
> 
> 时间：2012-07-04T08:18:31.267
> 
> 标签：batch-file

如何`ELSE`在此代码中添加一个部分，以便如果找不到`javac.exe`它会给出相应的*无法找到 JDK*消息？

```
 FOR /R "C:\Program Files" %%a IN (.) DO (
        IF EXIST "%%~a\javac.exe" ECHO You Have The Java Dev Kit Ignore 

    Option 4) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T08:22:12.600

您可以在 IF 语句中添加一些括号，然后添加 ELSE

```
IF EXIST "%%~a\javac.exe" (
        ECHO You Have The Java Dev Kit Ignore 
    ) ELSE (
        ECHO Cannot Find JDK
    ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T08:24:20.020

```
 IF EXIST "%%~a\javac.exe" (ECHO You Have The Java Dev Kit Ignore) ELSE ( do something else ) 
```

# usb - 使用 USB Blaster 的 Cyclone II FPGA 有源串行

> ID：11325105
> 
> 赞同：0
> 
> 时间：2012-07-04T08:18:52.010
> 
> 标签：usb, fpga, intel-fpga

我正在使用 Cyclone II FPGA 芯片对多个 PCB 进行自动化编程和诊断。理想情况下，我想使用自己的程序对芯片进行编程，但我可以接受命令行脚本。是否可以在不使用 altera 编程器的情况下将 .pof 文件下载到旋风 II 中？是否有使用 usb-blaster 的开源解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:56:13.410

Quartus II 工具链中的所有工具都可以通过命令行访问，包括映射器（综合）、拟合器、时序分析、器件编程......

对于设备编程，要使用的单个程序是：`quartus_pgm`.

[这](http://www.altera.com/literature/manual/TclScriptRefMnl.pdf)是工具链的所有命令行程序的摘要。您还可以查看完整的 Quartus II 手册的[“程序员”部分](http://www.altera.com/literature/hb/qts/qts_qii53022.pdf)。

示例用法：

```
quartus_pgm –c byteblasterII –m jtag –o bpv;design.pof 
```

# javascript - 无法在 jquery ui 中禁用 droppable

> ID：11325107
> 
> 赞同：2
> 
> 时间：2012-07-04T08:18:58.780
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-draggable, droppable

我在我的 Web 应用程序中使用 jquery ui Draggable 和 Droppable 来拖动 div 并放置它们，

但是当我将项目放在 droppale 区域（它们有时是文本框或文本区域）时，我无法再对它们做出反应或进一步拖动它们，就像它们在页面的那部分被消耗一样。

另一件事是我决定完全禁用 droppable，但 div 仍然在上面放置东西并消耗它们，我还尝试从代码中删除 droppable 事件并再次运行它，但同样的事情一直在发生。

但是当我将它们拖到页面的其他部分时，拖动效果很好。我也尝试在多台机器上运行，但输出仍然相同。

问题的原因可能是什么？

用于创建可拖动对象的代码

```
$('body').append("<div id='addNewText'></div>");
    $("#addNewText").draggable(); 
```

用于创建可放置页面的代码，但是当我删除了可放置部分时。

```
$("#book").append("<div name=\"page\" id =\"page"+(pagesNumber+1)+"\"> </div>");
    $("#page"+(pagesNumber+1)).css("position","absolute"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:54:59.760

尝试设置“禁用”属性，如下所示：

```
$("#addNewText").droppable('option', 'disabled'); 
```

# linux - 如何在忽略不存在的文件的同时使用 diff 比较两个目录？

> ID：11325123
> 
> 赞同：25
> 
> 时间：2012-07-04T08:20:07.867
> 
> 标签：linux, diff, compare

我想使用简要输出选项`diff`来比较两个目录的不同文件。`-q`但是，输出中包含大量仅存在于一个目录中而不存在于另一个目录中的文件。我可以强制`diff`（或使用其他工具）只显示两个目录中不同且存在的文件吗？

我使用的当前命令是

```
diff -q <dir1> <dir2> 
```

任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-04T08:34:40.937

它打印一堆像

```
Only in dir1/blah: blah 
```

对？所以用 grep 把它们扔掉。

```
LC_ALL=C diff ... | grep -v '^Only in' 
```

这`LC_ALL=C`是为了确保将打印标准的“仅在”消息，而不是任何翻译。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2015-04-16T23:33:30.343

我发现最简单的方法是使用：

```
diff -N -q <dir1> <dir2> 
```

# android - 'android:paddingRight' 与 'android:drawableRight' 一起使用

> ID：11325124
> 
> 赞同：1
> 
> 时间：2012-07-04T08:20:09.373
> 
> 标签：android, android-edittext, padding

在 EditText 中，我在 EditText 的右侧放置了一张图片，并使用 FrameLayout 添加了一个 textview，显示了 Edittext 的剩余输入计数（如 p1 所示）。 ![p1](../Images/3ee071f61d46583aa76ecace3d021983.png)

但是当输入太长时，它会与 textview 重叠，为了避免这种情况，我想使用 android:paddingRight 保持输入字符保持在左边，但结果就像 p2![p2](../Images/5d62941220b8621b5c6a4b7482728d86.png)

如何使可绘制图标保持在右侧并且仅输入字符，例如p3？![在此处输入图像描述](../Images/98f18556341d2627862960cebf3b0734.png) 谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:28:28.147

您应该使用 RelativeLayout 而不是在 LinearLayout 中的文本之后附加按钮。

Android RelativeLayouts 的资源可以在以下位置找到：http: [//developer.android.com/guide/topics/ui/layout/relative.html](http://developer.android.com/guide/topics/ui/layout/relative.html)

那篇文章很值得一读

但一般原则是您可以定义如下内容：

```
<Button
    android:id="@+id/button"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_below="@id/name"
    android:layout_alignParentLeft="true"
    android:layout_toLeftOf="@+id/times" /> 
```

注意`layout_below`和`layout_toLeftOf`上面，它定义了相对于其他对象的定位

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T08:28:57.413

使用[ImageSpan](http://developer.android.com/reference/android/text/style/ImageSpan.html)在 EditView 中添加 Image 而不是在 Layout 中设置

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T08:29:37.023

这应该是一个替代示例，使用 RelativeLayout：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent">

     <EditText android:layout_width="fill_parent" android:layout_height="wrap_content"
          android:layout_alignParentLeft="true" android:layout_centerHorizontal="true"
          android:paddingRight="30dp"
          />

     <ImageView android:layout_width="20dp" android:layout_height="20dp"
         android:src="@drawable/your_image"
         android:layout_alignParentRight="true" android:layout_centerHorizontal="true"
         />

 </RelativeLayout> 
```

# java - 如何创建 AjaxFormSubmitBehavior

> ID：11325128
> 
> 赞同：0
> 
> 时间：2012-07-04T08:20:22.117
> 
> 标签：java, wicket

在我的表单中，我只有一个没有按钮的字段：

```
add(new AutoCompleteTextField<String>("hladaneSlovo", settings) {
            private static final long serialVersionUID = 1L;

            @Override
            protected Iterator<String> getChoices(String input) {
                return new HladaneSlova().iterator();
            }
        }.add(new AjaxFormSubmitBehavior(this, "onsubmit") {
            private static final long serialVersionUID = 1L;

            @Override
            protected void onSubmit(AjaxRequestTarget target) {
                setResponsePage(new VyjimkyPage(parametry));
            }

            @Override
            protected void onError(AjaxRequestTarget target) {
            }
        })); 
```

问题是当我提交这个表格时（只写单词然后按回车）没有任何反应。怎么了 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:23:26.270

您应该将 AjaxFormSubmitBehavior 添加到表单，而不是将其添加到文本字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T20:09:37.877

我之前的评论作为答案：不需要 AjaxFormSubmitBehavior。您需要覆盖表单中的 onSubmit() ：

```
Form form = new Form("form") {

   @Override
   public void onSubmit() {
      // do your stuff
   }

   @Override
   public void onError() {
      // you get here in case of errors (conversion/validatio)
   }
}
add(form);

form.add(...) 
```

我不是 100% 确定您的表单上需要一个按钮。如果你需要一个 html：

```
<form wicket:id="form">
   <input type="text" wicket:id="yourAutoComplete">
   <input type="submit" value="submit">
</form> 
```

您不需要将提交输入元素连接到 java 组件。但是您可以尝试不使用 html 中的提交元素，看看它是否有效。

# c# - 使用 Visual Studio 2005 解决方案的 Windows 服务未使用 Visual Studio 2010 打开

> ID：11325130
> 
> 赞同：0
> 
> 时间：2012-07-04T08:20:34.877
> 
> 标签：c#, .net, visual-studio-2010, visual-studio-2005, version-compatibility

我无法打开使用 Visual Studio 2005 版本创建的解决方案。该解决方案内部有两个 Windows 服务。我最近升级到 Visual Studio 2010。现在我无法打开解决方案文件。我尝试使用 Visual Studio 2010 以及版本选择器打开它，在这两种情况下我都看不到创建/导入解决方案对话框。它只是显示沙漏一秒钟然后消失，不确定背景中发生了什么，但绝对没有崩溃指示器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:22:15.167

不要使用项目或解决方案文件，将所有类移动到新的 vs2010 解决方案中并重建它

# python - 在 Python 中解析结构化文本文件（pyparsing）

> ID：11325135
> 
> 赞同：7
> 
> 时间：2012-07-04T08:21:06.387
> 
> 标签：python, parsing, pyparsing

由于我真的不明白的原因，我使用的 REST API 不是输出 JSON 或 XML，而是使用一种特殊的结构化文本格式。以最简单的形式

```
SECTION_NAME    entry  other qualifying bits of the entry
                entry2 other qualifying bits
                ... 
```

它们不是制表符分隔的，就像结构看起来一样，而是空格分隔，并且限定位可能包含带空格的单词。SECTION_NAME 和条目之间的空格也是可变的，范围从 1 到几个（6 个或更多）空格。

此外，格式的一部分包含表单中的条目

```
SECTION_NAME entry
  SUB_SECTION more information
  SUB_SECTION2 more information 
```

作为参考，真实数据的摘录（省略了一些部分），它显示了结构的使用：

```
ENTRY       hsa04064                    Pathway
NAME        NF-kappa B signaling pathway - Homo sapiens (human)
DRUG        D09347  Fostamatinib (USAN)
            D09348  Fostamatinib disodium (USAN)
            D09692  Veliparib (USAN/INN)
            D09730  Olaparib (JAN/INN)
            D09913  Iniparib (USAN/INN)
REFERENCE   PMID:21772278
  AUTHORS   Oeckinghaus A, Hayden MS, Ghosh S
  TITLE     Crosstalk in NF-kappaB signaling pathways.
  JOURNAL   Nat Immunol 12:695-708 (2011) 
```

当我试图将这种奇怪的格式解析成更理智的东西（然后可以转换为 JSON 的字典）时，我不确定该怎么做：在空格上盲目拆分会导致混乱（它也会影响带有空格的信息），而且我不确定如何确定一个部分何时开始。文本操作是否足以胜任这项工作，还是我应该使用更复杂的方法？

编辑：

我开始使用 pyparsing 来完成这项工作，但多行记录让我感到困惑，这是一个 DRUG 的示例：

```
 from pyparsing import *
 punctuation = ",.'`&-"
 special_chars = "\()[]"

 drug = Keyword("DRUG")
 drug_content = Word(alphanums) + originalTextFor(OneOrMore(Word(
      alphanums + special_chars))) + ZeroOrMore(LineEnd())
 drug_lines = OneOrMore(drug_content)
 drug_parser = drug + drug_lines 
```

当应用于示例中的前 3 行 DRUG 时，我得到一个错误的结果（\n 转换为实际返回以方便阅读）：

```
 ['DRUG', ['D09347', 'Fostamatinib (USAN)
        D09348  Fostamatinib disodium      (USAN)
        D09692  Veliparib (USAN']] 
```

如您所见，随后的条目被混为一谈，而我希望：

```
 ['DRUG', [['D09347', 'Fostamatinib (USAN)'], ["D09348", "Fostamatinib disodium (USAN)"],
           ['D09692', ' Veliparib (USAN)']]] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T08:38:46.743

我建议您使用基于解析器的方法。例如，[Python PLY](http://www.dabeaz.com/ply/)可用于手头的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:40:54.010

最好的方法是使用正则表达式，例如：

```
m = re.compile('^ENTRY\s+(.*)$')
m.search(line)
if m:
   m.groups()[0].strip() 
```

对于没有条目的行，您应该使用您检测到的最后一个条目。

更简单的方法是按条目拆分，例如：

```
vals = line.split('DRUG')
if len(vals) > 1:
     drug_field = vals[1].strip() 
```

# asp.net - SqlDataSource 向 Gridview 添加新列？

> ID：11325139
> 
> 赞同：1
> 
> 时间：2012-07-04T08:21:12.787
> 
> 标签：asp.net, datagridview, sqldatasource

```
<div style="width:100%; height:200px; overflow:scroll; border-color:White;">
        <asp:GridView ID="UsersGridView" runat="server" 
            CssClass="label" ShowHeaderWhenEmpty="True" Width="100%" 
            AllowSorting="True" HeaderStyle-BackColor="LightGray" CellPadding="4" 
            ForeColor="#333333" GridLines="None" DataSourceID="UsersDataSource" >
            <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
            <Columns>
                <asp:BoundField HeaderText="Fleet Description" ReadOnly="True" 
                    HeaderStyle-Wrap="false" HtmlEncode="True" >
                    <HeaderStyle Wrap="False"></HeaderStyle>
                </asp:BoundField>
                <asp:BoundField DataField="Fleet Code" HeaderText="Fleet Code" ReadOnly="True" 
                    HeaderStyle-Wrap="false" >
                    <HeaderStyle Wrap="False"></HeaderStyle>
                </asp:BoundField>
                <asp:BoundField DataField="First Name" HeaderText="First Name" ReadOnly="True" 
                    HeaderStyle-Wrap="false" >
                    <HeaderStyle Wrap="False"></HeaderStyle>
                </asp:BoundField>
                <asp:BoundField DataField="Last Name" HeaderText="Last Name" ReadOnly="True" 
                    HeaderStyle-Wrap="false" >
                    <HeaderStyle Wrap="False"></HeaderStyle>
                </asp:BoundField>
                <asp:BoundField DataField="Username" HeaderText="User Name" ReadOnly="True" 
                    HeaderStyle-Wrap="false" >
                    <HeaderStyle Wrap="False"></HeaderStyle>
                </asp:BoundField>
                <asp:BoundField DataField="Email" HeaderText="Email" ReadOnly="True" 
                    HeaderStyle-Wrap="false" >
                    <HeaderStyle Wrap="False"></HeaderStyle>
                </asp:BoundField>
                <asp:BoundField DataField="Phone" HeaderText="Phone" ReadOnly="True" 
                    HeaderStyle-Wrap="false" >
                    <HeaderStyle Wrap="False"></HeaderStyle>
                </asp:BoundField>
            </Columns>
            <EditRowStyle BackColor="#999999" />
            <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />

            <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White"></HeaderStyle>
            <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
            <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
            <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
            <SortedAscendingCellStyle BackColor="#E9E7E2" />
            <SortedAscendingHeaderStyle BackColor="#506C8C" />
            <SortedDescendingCellStyle BackColor="#FFFDF8" />
            <SortedDescendingHeaderStyle BackColor="#6F8DAE" />
        </asp:GridView>
        <asp:SqlDataSource ID="UsersDataSource" runat="server" 
            ConnectionString="<%$ ConnectionStrings:ApplicationServices %>" 
            SelectCommand="SELECT        UserDataAssociation.Fleet as &quot;Fleet Code&quot;, UserDataAssociation.FirstName as &quot;First Name&quot;, UserDataAssociation.LastName as &quot;Last Name&quot;, aspnet_Users.UserName, aspnet_Membership.Email, 
                     UserDataAssociation.Phone
FROM            aspnet_Membership INNER JOIN
                     aspnet_Users ON aspnet_Membership.UserId = aspnet_Users.UserId INNER JOIN
                     UserDataAssociation ON aspnet_Membership.UserId = UserDataAssociation.UserId"></asp:SqlDataSource>
    </div> 
```

我有一个带有select语句的sqldatasource的gridview。但是，当页面加载时，gridview 的原始列增加了一倍，由数据源创建。我希望情况显然不是这样。

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T08:24:04.890

将`Gridview` `AutoGenerateColumns`属性设置为 False

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T08:24:02.490

在编辑列菜单中有一个“自动生成字段”选项，取消选中它。当您选择 SqlDataSource 作为数据源时，它创建了列，并且由于某种原因它没有取消选中自动生成字段选项，这就是它创建两次的原因。单击网格视图时，右上角会有一个白色小箭头，提供更多选项，如果您展开该菜单，单击“编辑列”，然后您可以取消选中“自动生成字段”选项。或者只是将`AutoGenerateColumns`属性设置为*false*。

![在此处输入图像描述](../Images/3c58973fe9b42e7d44ba1618b2cc106e.png)

# macos - 如何在 Xcode 中使弹出按钮更高？

> ID：11325144
> 
> 赞同：0
> 
> 时间：2012-07-04T08:21:23.157
> 
> 标签：macos, cocoa, nspopupbutton

在创建桌面应用程序时，我创建了一个`Pop Up Button`使用界面生成器：

![在此处输入图像描述](../Images/f4b3d5e745baa85899f260298652163b.png) ![在此处输入图像描述](../Images/928cf9bb4eb2d6e42edf768a95765a29.png)

但是，当我进行尺寸检查时，更改高度的框是灰色的：

![在此处输入图像描述](../Images/ebe1654c73688c2054d52d38f3789c23.png)

即使我更改字体，按钮本身也不会变大：

![在此处输入图像描述](../Images/8905c3e55afd02c71c5ff0f4ddb6694d.png)

如果我想要一个更高的我应该怎么做`Pop Up Button`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:52:39.963

检查[这个](https://stackoverflow.com/questions/9566789/remove-autolayout-constraints-in-interface-builder)答案，我现在不在Mac上，所以我无法测试它，但我认为它与自动布局设置和约束有关。

# teamcity-7.0 - Team City 夜间构建无法启动

> ID：11325145
> 
> 赞同：1
> 
> 时间：2012-07-04T08:21:25.793
> 
> 标签：teamcity-7.0

我有一个 Team City 实例在我的 PC 上运行。

即使没有要构建的签入，我也设置了每晚在午夜运行的夜间构建。

我把电脑锁在晚上，所以假设应该触发构建。

但是我不断收到“无法收集更改”、“无法开始构建”、“无法收集更改，错误：org.tmatesoft.svn.core.SVNException: svn: E210003: Unknown host MySVNServer”。

如果我将构建设置为在白天运行，即使 PC 被锁定，它也能正常触发。

我有一个签入触发的构建，以及其他几个针对同一环境的 1 次临时构建，它们都运行良好。

如果我没有“登录”，Team City 构建是否会失败，PC 被锁定是否会导致问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-23T08:04:53.913

我也收到过这个错误信息。据我所知，这是由于托管我们的 SVN 存储库的服务器崩溃并重新启动。出于某种原因，查看此存储库的 TeamCity 项目仍处于故障状态。一旦解决了问题，就手动运行构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:02:36.400

好吧，这应该与半夜锁定系统无关。

我可以从您的错误中看到，TeamCity 无法从 SVN 收集更改（即使您已将其设置为在没有待处理更改时运行，如果在触发构建期间存在的话，运行程序也会对 SVN 执行 ping 操作）

检查 VCS 设置是否正确以及您指向的 URL 是否正确。

# asp.net - 尝试使 Web 方法异步

> ID：11325150
> 
> 赞同：3
> 
> 时间：2012-07-04T08:21:37.367
> 
> 标签：asp.net, web-services, session-state, webmethod

我目前从事的项目涉及使用会话变量的 MS SQL Server 和 ASP.net Web 服务。显然，这会导致客户端的调用以顺序方式执行。我想确保这些方法异步执行。

在做了一些研究之后，在我看来，最好的方法是使用一个跟踪会话的表（使用 guid 说）和为每个会话单独的表将会话状态保存在数据库中。

在我直接深入研究之前，我需要知道如果我配置 SQL Server 来存储会话，我是否可以获得与 Web 服务异步操作相同的感觉。

我可以吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:29:30.370

很抱歉，但异步执行代码和使用会话变量的唯一方法是制作完全自定义的会话解决方案 - 我的意思是完全自定义并完全禁用 asp.net 会话。

进行会话的基本提示：

1.  您有一个与用户数据相关的 cookie
2.  数据位于数据库的一张表上。
3.  您为每个会话在该表上创建自定义字段并避免使用 Dictionary<> 来保留它们
4.  您使用**脏读，最后写入获胜**
5.  您每次只读取和写入您需要的会话变​​量（不是全部一起）
6.  每行都有一个超时日期，并像 MS 一样使用 SQL 上的调度程序来删除旧会话。
7.  加载会话`OnPreInit`，仅保存已更改的内容`OnUnload`
8.  通过完全禁用会话，您需要使用`Mutex`现在可以正常工作的代码进行锁定，因为会话会在没有通知的情况下进行同步，但是没有会话锁定可能会执行两次，例如新插入数据库调用。

相对的：

[在共享同一会话时处理另一个 Web 应用程序时 Web 应用程序被阻止](https://stackoverflow.com/questions/9426673/web-app-blocked-while-processing-another-web-app-on-sharing-same-session)
[哪些性能计数器可用于识别 ASP.NET 瓶颈？](https://stackoverflow.com/questions/9056240/what-perfmon-counters-are-useful-for-identifying-asp-net-bottlenecks/9056650#9056650)
[完全替换 ASP.Net 的会话](https://stackoverflow.com/questions/8989648/replacing-asp-nets-session-entirely)

为了回答这个问题`if I configure SQL Server to store the session ?` ，会话仍然被锁定并阻止休息请求。如果您在 SQL Server 或其他介质上进行会话，则不会更改工作方式，仅更改保存数据的位置。

# gwt - 在 GWT 的新窗口中显示小部件

> ID：11325160
> 
> 赞同：1
> 
> 时间：2012-07-04T08:22:11.907
> 
> 标签：gwt, uibinder

我有一个要求，我需要在新窗口中显示拖放单元格表。我已经检查了答案，我已经用谷歌搜索了这个，但我没有得到适当的答案。我可以通过单击按钮打开一个新窗口。以下是我正在使用的代码：

```
@UiHandler(value = { "buttonReleaseView" })
    void onReleaseViewClick(ClickEvent clickEvent) {
        String winUrl = GWT.getModuleBaseURL() + "releaseView/";
        String winName = "Release View";

        openNewWindow (winName, winUrl);  /* spawn a new window - not popup */
    }

    /**
    * Opens a new windows with a specified URL..
    * 
    * @param name String with the name of the window.
    * @param url String with your URL.
    */
    public static void openNewWindow(String name, String url) {
        com.google.gwt.user.client.Window.open(url, name.replace(" ", "_"),
               "menubar=no," + 
               "location=false," + 
               "resizable=yes," + 
               "scrollbars=yes," + 
               "status=no," + 
               "dependent=true");
    } 
```

现在，我应该如何在这个新窗口中显示单元格表？

请帮帮我。

提前致谢

里查

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:32:11.337

GWT 模块存在于浏览器页面中，因此如果您想打开一个新的浏览器页面并在其中显示 GWT 组件，您基本上需要在它自己的主机页面中加载一个新的 GWT 模块。在这种情况下，我可能会使用弹出窗口，因为它会更简单。

但是如果你真的需要这样做，你可以创建一个单独的主机页面和 GWT 模块来显示表格，或者你可以重用相同的主机页面和 GWT 模块并传递一些 URL 参数或历史标记来指示要显示哪个视图. 请记住，即使在最后一种情况下，您仍然会在浏览器中运行两个 GWT 模块实例。

通过调用 Window.open() 返回的句柄，也有或多或少的黑客方式直接写入新的浏览器窗口`document.write`，但我只会为不需要太多用户交互的简单事情这样做（例如，我'已将此方法用于打印预览功能）。

# javascript - 即将解决模拟点击 H ref 锚点？

> ID：11325165
> 
> 赞同：1
> 
> 时间：2012-07-04T08:22:15.350
> 
> 标签：javascript, jquery, html, cross-browser

我正在寻找一种模拟点击`<a>`标签的方法

众所周知，没有成功（唯一的解决方法是`window.open`...）

但是我在网上发现了一些代码和平并设法使其工作：

[http://jsbin.com/itujek/5/edit](http://jsbin.com/itujek/5/edit)

```
Chrome
IE 
```

问题出在FF上。

我很高兴与您分享代码，并寻求在 FF 中起作用的解决方案。

我应该在这段代码中做什么才能让这段代码与 FF 一起使用？

```
 <script>
        function doClick(event, myA)
        {
            if (myA.click)
            {
                myA.click()
            }
            else if (document.createEvent)
            {
                if (event.target !== myA)
                {
                    var tmpEvent = document.createEvent("MouseEvents");
                    tmpEvent.initMouseEvent("click", true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
                    var allowDefault = myA.dispatchEvent(tmpEvent);
                }
            }
        }

      $(document).ready(function(){

            $(".myBtn").on('click',function (event) 
                           { doClick(event, $("#link")[0]);    });
      });

    </script>
</head>
<body>
    <a id="link" href="http://www.msdn.com">Normal link</a>
    <button type="button" class="myBtn"   >
        do click</button>
    <br />
    <br />
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T08:27:55.397

您可以尝试使用[jquery.simulate.js](https://github.com/medihack/jquery-ui/blob/ticker/tests/jquery.simulate.js)：

```
$(elem).simulate(mouse_or_keyboard_event_type, options); 
```

支持的事件类型：

*   鼠标： **mouseover、mouseout、mousedown、mouseup、mousemove、click、dblclick**
*   键盘： **keyup、keydown、keypress**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:31:00.717

看这里的代码

```
if (myA.click)
{
   myA.click()
} 
```

也许您的 firefox 元素具有 .click 属性，因此它只是调用函数 click （事件）而不是实际执行重定向。我的建议是删除这部分并模拟真正的点击。或者您可能想通过使用来模拟重定向`window.location.href = anchor.href`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T08:35:39.690

代替

```
if (myA.click){
    myA.click();
} 
```

你可以做

```
if (myA.click){
    window.location.href = myA.href;
} 
```

另一件事，在 未定义`if (e.target !== myA)` 变量的行上，它应该是.`e``event`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T08:39:24.167

在这种情况下，我更愿意避免“伪造”事件。您是否尝试过重新设置 href 并手动重定向到它？试试这个：

```
$(".myBtn").on('click', function(event) {
    doClick($("#link"));
});

function doClick($el) {
    var href = $el[0].href;
    if ($el.attr("target") != "_blank") {
        window.location.assign(href );
    }
    else {
        window.open(href, "newWindow");
    }
} 
```

[**示例小提琴**](http://jsfiddle.net/m6SBJ/)

# asp.net-mvc - 我应该在哪一层实现缓存

> ID：11325170
> 
> 赞同：0
> 
> 时间：2012-07-04T08:22:28.490
> 
> 标签：asp.net-mvc, model-view-controller, caching

我的网站正在运行。但是，有许多客户端调用服务器以获取将连接到数据库以检索的数据。为了提高数据库的性能，我需要在 Web 服务器中实现缓存。

我应该在数据访问或模型层实现它。我正在使用 ASP.NET MVC。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T13:04:56.780

Web 应用程序中可能有 2 个级别的缓存：

1.  缓存整个动作或 HTML 片段
2.  缓存数据访问操作的结果对象

第一种情况是通过使用[`[OutputCache]`](http://msdn.microsoft.com/en-us/library/system.web.mvc.outputcacheattribute.aspx)属性装饰动作/子动作来实现的。

第二个更细粒度，这取决于您的设置。例如，如果您使用的是 NHibernate 之类的 ORM，那么您的 ORM 可能已经支持缓存。例如 NHibernate 支持二级缓存，甚至可以使用缓存提供程序进行外部化。因此，如果您使用 ORM，请查看您的 ORM 文档以查看它是否支持此类缓存功能。

如果您的 ORM 不支持缓存或者您根本没有使用 ORM，那么您可以自己构建缓存。这可以在您的服务层实现，您可以在其中注入一些缓存提供程序作为依赖项，并且当您的服务查询您的存储库时，使用提供程序缓存这些存储库返回的结果。

# c++ - 在 C++ 中的头文件的 cpp 文件中启动一个线程

> ID：11325171
> 
> 赞同：0
> 
> 时间：2012-07-04T08:22:32.397
> 
> 标签：c++, multithreading

我有`class A`一个函数`void runThread()` 来调用新线程。这是我`A.cpp`的 with`struct SendInfo`和函数`void thread(...)`不包含在头文件中`A.h`：

```
//A.cpp
struct SendInfo{
   int a;
   std::string mess;
   SendInfo(int _a, std::string _mess){
      a = _a;
      mess = _mess;
   }
};

void thread(SendInfo* args){
   std::cout << args->mess << std::endl; // Result here is nothing :-?
}

void A::runThread(){
   SendInfo info(10,"dump_string");
   std::cout << info.mess << std::endl; // Result here is "dump_string"
   _beginthread((void(*)(void*))thread, 0, &info);
} 
```

在 main 函数中，我调用`runThread()`of`A object`时，结果`info.mess`很好，但`args->mess`没有字符串。那我的问题是什么？以及如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T08:25:34.823

您正在使用局部变量`info`；一旦`runThread`退出，这个变量就会超出范围，你不能再访问它，即使是从另一个线程。

您需要确保`info`有一个生命周期，直到您的`thread`函数结束（或者至少，直到您最后一次在 中访问它`thread`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:33:45.510

Phillip Kendall 所说的，另外，当你做出改变时要警惕广告安全——不要只是全球化`info`，把它封装在`A`.

# java - Cobertura 没有找到任何仪器类

> ID：11325181
> 
> 赞同：0
> 
> 时间：2012-07-04T08:23:19.987
> 
> 标签：java, cobertura

我是 Cobertura 的新手，我正在尝试从已编译的 jar 文件中检测类。
解压后我运行以下命令：

> D:\cobertura-1.9.4.1\7.6.300.01>D:\cobertura-1.9.4.1\cobertura-instrument.bat --basedir D:\cobertura-1.9.4.1\7.6.300.01
> Cobertura 1.9.4.1 - GNU GPL 许可证（无担保） - 请参阅版权文件检测
> 0 个文件
> Cobertura：已保存有关 0 个类的信息。
> 仪器时间：0ms

位于 D:\cobertura-1.9.4.1\7.6.300.01 类文件。
为什么 cobertura 找不到他们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:39:56.173

请参阅[http://cobertura.sourceforge.net/commandlinereference.html](http://cobertura.sourceforge.net/commandlinereference.html)。您没有指定要检测的类。

> cobertura-instrument.bat [--basedir dir] [--datafile file] [--destination dir] [--ignore regex]**类**[...]
> 
> 注意：类可以单独指定，也可以作为包含多个类的目录树。例子：
> 
> cobertura-instrument.bat --destination C:\MyProject\build\instrumented C:\MyProject\build\classes

（强调我的）

# sql - 从两个表中选择顶部和顺序

> ID：11325191
> 
> 赞同：2
> 
> 时间：2012-07-04T08:23:49.953
> 
> 标签：sql, sql-server

我正在做一个电子商务市场。有很多卖家在这个市场上销售。对于每个卖家，我想显示一个畅销书列表。

数据库位于 SQL Server 中。在这种情况下有 2 个主表：

表 1：存储每个订单的订购产品。字段包括 SellerID、OrderID、ProductID 和 Quantity。

表 2：产品主表。字段包括 ProductID、...

如何查询订单最多的前 10 款产品？我下面的 SQL 似乎不起作用...

```
SELECT TOP (10) SUM(d.Quantity) AS total, d.ProductID, p.Title
From OrderDetails d, Products p
WHERE d.SellerID = 'xxx' AND
d.ProductID = p.ProductID
GROUP by d.ProductID
ORDER BY total DESC 
```

任何帮助深表感谢。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:55:41.987

```
select *, d.s
from products p
inner join 
(
   select top 10 productid, sum(quantity) as s
   From OrderDetails
   group by productid
   order by sum(quantity) desc 
) 
d on d.productid = p.productid 
```

请参阅[此 SQLFiddle 示例](http://sqlfiddle.com/#!3/450ed/13)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:34:11.030

这只是一个猜测。如果您想要“最多订单”，那么我宁愿计算订单而不是总数量。

```
SELECT TOP 10 
COUNT(d.OrderID) AS total, d.ProductID, p.Title
FROM OrderDetails d 
INNER JOIN Products p ON d.ProductID = p.ProductID
WHERE d.SellerID = 'xxx' 
GROUP by d.ProductID, p.Title
ORDER BY COUNT(d.OrderID) DESC 
```

我还修复了什么：

*   GROUP BY 缺少一列。您必须命名您在 SELECT 子句中拥有但不在聚合函数中的每一列。

*   在 ORDER BY 子句中，您必须像在 SELECT 子句中那样命名它。别名在 SQL Server 中效果不佳。

*   使用了 INNER JOIN 语法，该语法不易出错，不会忘记在 WHERE 子句中指定连接。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-04T08:37:16.320

这不是因为您使用的是什么类型的数据库，而是因为聚合函数。在stackoverflow中有很多关于这个问题的问答。请搜索它。

# object - 如何在 Corona 上随机移动屏幕上的对象？

> ID：11325193
> 
> 赞同：1
> 
> 时间：2012-07-04T08:24:02.317
> 
> 标签：object, move, coronasdk

我希望我的显示对象在屏幕上以一定速度移动并且没有任何交互。我怎么能用电晕做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T11:01:27.530

首先，您必须将显示对象添加到物理场，然后将其速度设置为随机值。您可以使用计时器定期更改显示对象的移动。例如：

```
physics = require("physics");
physics.start()
rectangle = display.newRect(0, 0, 50, 50)
physics.addBody(rectangle, "kinematic", {isSensor = true})
function moveRandomly()
rectangle:setLinearVelocity(math.random(-300,300), math.random(-300,300));
end
timer.performWithDelay(500, moveRandomly, -1); 
```

# r - 根据每个架构的不同包编写 R 包

> ID：11325198
> 
> 赞同：1
> 
> 时间：2012-07-04T08:24:08.043
> 
> 标签：r, package

我想构建一个包，该包涉及根据用户的系统使用不同的包从 mysql 加载数据。

对于 windows 用户，它将通过包 RODBC 通过 ODBC 连接，而 linux/mac 用户将使用 RMySQL 包。

在脚本中，以下内容非常有效：

```
if(.Platform$OS.type == "unix") {
library(RMySQL)
} else {
  library(RODBC)
} 
```

现在我想在加载我的包时加载这些包。我通常会将它添加到说明文件中的“依赖：”下，但这不允许可选子句。

处理此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:49:08.917

我认为解决这个问题的常用方法是通过`.onLoad`函数（参见`?.onLoad`或`help(".onLoad")`）。

[编写 R 扩展手册的第 1.6.3 节](http://cran.r-project.org/doc/manuals/R-exts.html#Load-hooks)给出了概述。也许其他人可以为您指出一个很好的例子，到目前为止我还没有使用过。

# html - IE7在表格单元格中的按钮旁边对齐文本

> ID：11325204
> 
> 赞同：1
> 
> 时间：2012-07-04T08:24:28.023
> 
> 标签：html, css, web, internet-explorer-7

我有这个简单的表格，其中最后一行显示图像按钮旁边的文本。这在 IE7 以外的其他浏览器中运行良好。

```
<table>
    <tr>
      <td>Some header</td>
      <td>Some other header</td>
    </tr>            
    <tr>
      <td colspan="2" class="infoRow">Info:
      <input type="image" class="infoButton" src="Images/down_arrow.png" /></td>
    </tr>
</table> 
```

来自 CSS 文件：

```
.infoButton
{
    float: right;
    padding: 0;
    margin-left: 20px;
}

.infoRow
{
   text-align: right;
} 
```

IE7 在表格单元格中将文本一直显示到右侧，图像按钮在其下方并且也向右对齐。我想显示图像按钮左侧的“信息：”文本，这在其他浏览器中可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T08:28:58.427

我相信如果你只是删除浮动你会没事的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:00:47.963

If you apply `style="vertical-align:middle;"` to the input (and remove the `float`) this should work in IE.

I've tried this in all versions of IE and ever quirks and it works so I'm not sure why it wouldn't for you see below for code:

style: `.infoButton {vertical-align:middle;padding:0;margin-left:20px;} label {vertical-align:middle;} .infoRow{text-align:right;}`

html: `<td class="infoRow" valign="middle"><label>Info:</label><input type="image" class="infoButton" src="Images/down_arrow.png" /></td>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T09:49:59.653

it is better to put a your info text in label tag`<label>info<label/>` this will work for IE7

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T09:23:18.870

我在 IE7 中看到左侧的文本和右侧的按钮。

您可以尝试在 td 上添加“white-space:nowrap”样式。

# frameworks - 使用 Microsoft Sync Framework 执行 Get Copy All 操作

> ID：11325206
> 
> 赞同：0
> 
> 时间：2012-07-04T08:24:40.313
> 
> 标签：frameworks, synchronization, microsoft-sync-framework

我正在测试 Microsoft Sync Framework 以尝试查看它是否适合我正在处理的任务。我想做的一件事是不仅可以选择发送更改的文件，还可以发送所有文件（例如，如果我第一次同步到客户端计算机，所以想发送所有文件）。我似乎在文档中找不到这样的例子，所以欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:16:55.020

如果您是第一次同步，那么没有什么特别需要配置的，因为它会同步所有内容。

如果您已经同步并且想要重新发送所有文件，无论它们是否已更改，只需删除元数据文件，这应该会删除有关已同步内容的所有信息。

# mysql - 如何在 MySQL 中访问外部数据库表

> ID：11325209
> 
> 赞同：0
> 
> 时间：2012-07-04T08:24:51.313
> 
> 标签：mysql, privileges, host, grant

我在 2 个不同的主机中有两个 MySQL 数据库。

我想从 MySQL A 表 1 连接并从 MySQL B 表 2 检索数据。

我不知道应该设置哪个权限才能相互连接。

我不断收到：

SELECT 命令拒绝用户 'MySQL A'@'localhost' 用于表 'MySQL B 表 2'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:29:52.903

您将需要设置联合表。

[http://dev.mysql.com/doc/refman/5.0/en/federated-storage-engine.html](http://dev.mysql.com/doc/refman/5.0/en/federated-storage-engine.html)

另一种方法是 2 个连接、2 个查询并组合结果。

# c# - 从服务提供商 IP 地址获取设备 IP 地址

> ID：11325213
> 
> 赞同：0
> 
> 时间：2012-07-04T08:25:14.610
> 
> 标签：c#, javascript, asp.net

我需要获取我的网站访问用户的本地计算机 IP 地址，因为我在下面的代码中使用了该地址

```
 string ipAddress = Request.ServerVariables["HTTP_X_FORWARDED_FOR"];
                if (!string.IsNullOrEmpty(ipAddress))
                {
                    string[] addresses = ipAddress.Split(',');

                    if (addresses.Length != 0)
                    {
                        stradd = addresses[0];
                    }
                    else
                    {
                        stradd = ipAddress;
                    }
                }
                else
                {
                    stradd = Request.ServerVariables["REMOTE_ADDR"].ToString();
                }

                hostName = Dns.GetHostByAddress(stradd).HostName; 
```

这是提供服务提供商的 IP 地址和服务提供商的名称，但我不想要这个我想要用户设备（本地）IP 地址，是否可以获得本地 IP 地址？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:28:40.117

不，您无法获得隐藏在 NAT 后面的机器的私有 IP 地址。

路由器透明地中继请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:29:05.003

本地 IP 就是（本地）它永远不会离开本地路由器，您需要使用某种本地执行的代码将其发送到服务器。

# javascript - 定义页面更改之间的返回转换

> ID：11325228
> 
> 赞同：7
> 
> 时间：2012-07-04T08:26:05.637
> 
> 标签：javascript, jquery-mobile

我正在使用 jQueryMobile 的`$.mobile.changePage(...)`方法在我的项目中切换到不同的页面。

```
$.mobile.changePage("#foo", {
 transition:"slide"
}); 
```

当我运行该方法时，过渡效果很好，但是当我点击浏览器的返回按钮时，我看不到反向过渡。

我玩弄了[http://jquerymobile.com/test/docs/api/methods.html](http://jquerymobile.com/test/docs/api/methods.html)中描述的一些参数，但没有运气。

**特别是设置`reverse:true`只是在向前移动到目标页面时反转了过渡，但是当我点击后退按钮时仍然没有过渡。**

* * *

**更新：**似乎看到 data-rel="back" 对通过`<a>`-tag定义的“原始链接”起到了作用，**但**我需要的是调用`$.mobile.changePage()`函数时的 JavaScript 等效项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T19:21:51.790

看看这个页面，[http://jsfiddle.net/nachiket/mDTK2/show/light/](http://jsfiddle.net/nachiket/mDTK2/show/light/)
适合我。

单击（第 1 页）显示从左到右的转换，& 后退按钮（第 2 页）显示从右到左的转换。

来源： http: [//jsfiddle.net/nachiket/mDTK2/](http://jsfiddle.net/nachiket/mDTK2/)
如果它不能正常工作，请分享您的浏览和其他详细信息。
如果示例工作正常，但不是您的代码，请制作一个突出您的问题的 jsfiddle，以便我可以检查和更新代码/答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T14:01:20.273

对于您想要反向转换的链接，您可以`data-direction="reverse"`使用`data-rel="back"`

例子：

```
<div data-role="page" >
    <div data-role="header"><h3> Header </h3> </div>
    <div data-role="content" >    
        <a href="#page2" data-role="button" data-transition="slide">Page 2</a>
    </div>
</div>

<div data-role="page" id="page2">
    <div data-role="header"><h3> Header </h3> </div>
    <div data-role="content" >    
        <a href="#" data-rel="back" data-role="button" data-direction="reverse" >Back</a>
    </div>
</div>​ 
```

jsFiddle：

*   [http://jsfiddle.net/GEDcF/](http://jsfiddle.net/GEDcF/)

文件：

*   [http://jquerymobile.com/demos/1.1.1/docs/api/data-attributes.html](http://jquerymobile.com/demos/1.1.1/docs/api/data-attributes.html)

更新

从你的评论

```
"Yeah, but how do I do that with the JavaScript function $.mobile.changePage()?" 
```

文件：

*   [http://jquerymobile.com/demos/1.1.1/docs/api/methods.html](http://jquerymobile.com/demos/1.1.1/docs/api/methods.html)

引用：

```
Properties:
     reverse (boolean,  default:    false) Decides what direction the transition will run when showing the page. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T15:18:09.990

找到了。

我们的一位开发人员在全球范围内关闭了所有返回转换，所以难怪它不起作用。

这是他用的。删除那条线就可以了。

```
$.mobile.changePage.defaults.transition = "none"; 
```

# android - 防止 onDraw() 函数在配置更改期间重新启动

> ID：11325230
> 
> 赞同：2
> 
> 时间：2012-07-04T08:26:07.070
> 
> 标签：android, view, restart, ondraw, android-configchanges

我有一个活动，它基本上会睡一段时间并初始化另一个活动。在这段睡眠时间里，我在屏幕上制作了一些动画图画。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
    View splashScreen = new SplashScreenView(this);
    setContentView(splashScreen);
    Thread splashThread = new Thread(){
        public void run(){
            try{
                sleep(6500);
                startActivity(new Intent("com.example.LOGIN"));
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            finally{
                finish();
            }
        }
    };
    splashThread.start();
} 
```

但是当屏幕方向改变时，活动正在重新启动。所以我通过修改清单文件来处理它。

```
<activity
        android:name=".SplashScreenActivity"
        android:configChanges="orientation|keyboardHidden"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

我还有一个问题。我阻止活动重新启动，但 SplashScreenView 类中的 onDraw() 函数仍然重新启动。

```
protected void onDraw(Canvas canvas) {

    canvas.drawBitmap(dstbmp2, logoX, logoY, null);
    canvas.drawBitmap(dstbmp, ballX, ballY, null);

    // Update the position of the ball.

    update();

    // Delay
    try {  
        Thread.sleep(100);  
    } catch (InterruptedException e) { }

    invalidate();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:56:30.520

在您的活动中覆盖此方法：

```
public void onConfigurationChanged(Configuration newConfig) {

    } 
```

声明一个全局布尔变量并在此方法中设置它，例如 true，然后在 onCreate() 中，您可以决定是否真的要创建新实例`splashScreen`并开始`splashThread`或不。

# jquery - 位置搜索

> ID：11325232
> 
> 赞同：1
> 
> 时间：2012-07-04T08:26:12.640
> 
> 标签：jquery, google-maps, search

嗨，我正在尝试为我目前正在处理的网页开发一些搜索功能，我需要一个可以自动完成但只返回的搜索框 - 城镇/城市、国家、机场和度假村。我虽然我可以使用谷歌地图，只是删除地图作为[https://maps.google.co.uk/](https://maps.google.co.uk/)上的搜索框几乎可以按照我的意愿工作，但我找不到任何关于如何在我的iv找到的所有页面都处理实际地图（我实际上并不想要），欢迎任何输入。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:48:20.050

我建议使用 Yahoo 的 YQL 服务来填充您的自动完成功能。它可以返回 json，因此非常适合 jquery。

[如果有人开始输入 PER，则在 Yahoos YQL 控制台中检索结果的示例](http://developer.yahoo.com/yql/console/?q=select%20%2a%20from%20geo.places%20where%20text=%22los%2a%22%20and%20country.code=%22US%22%20%20limit%202#h=select%20name%20from%20geo.places%20where%20text=%22per%2a%22%20limit%2010) 因此，您可以将此 url 插入到您的自动完成功能中：

```
var url = "http://query.yahooapis.com/v1/public/yql?q=select%20name%20from%20geo.places%20where%20text%3D%22" + THE_INPUT_TEXT + "*%22%20limit%2010&format=json"; 
```

然后将所有 results.place.name 结果捕获为自动完成选项

# c# - 覆盖 DbContext SaveChanges

> ID：11325237
> 
> 赞同：3
> 
> 时间：2012-07-04T08:26:25.277
> 
> 标签：c#, entity-framework, entity-framework-mapping

我使用 EF 4.3.1 我需要在保存时添加实体的默认值。

目前我正在使用 SaveChanges() 并且它有效。

从我使用的代码中可以看出，`ChangeTracker.Entries<Option>()`其中`Option`rappresent 是一个特定的 DataType。

我想知道是否可能以及如何编写更通用的 ChangeTracker.Entries 版本，`ChangeTracker.Entries<t>()`以便它可以检查我的模型中的所有类型的实体，正如您在我的特定案例中看到的那样，我在许多类上都有一个 NoteInternal 属性

```
 public override int SaveChanges()
    {
        #region Option BL
        var entities = ChangeTracker.Entries<Option>()
                                    .Where(e => e.State == EntityState.Added ||
                                                e.State == EntityState.Modified)
                                    .Select(e => e.Entity);
        // Add Default values when Creating or Editing an Entity
        string defaultvalue = "";
        foreach (var entity in entities)
        {
            if (String.IsNullOrWhiteSpace(entity.NoteInternal))
                entity.NoteInternal = defaultvalue;
        }
        #endregion

        return base.SaveChanges();
    } 
```

谢谢你的帮助！

PS：在这里使用 DYNAMIC 数据类型有意义吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T08:39:07.520

我可以想到三个选项：

1.  使用反射检查每个项目是否具有`NoteInternal`属性。这很慢。
2.  用于`dynamic`尝试访问`NotIntenral`每个项目的属性。当实体没有属性时，您必须检查并处理引发的异常。
3.  创建一个定义属性的接口`IHasNoteInternal`，并让所有具有该属性的实体实现该接口。然后获取所有`IHasNoteInternal`类型的条目。

我认为 3\. 选项是最好的，并且提供了最好的设计，但它需要您更改可能或不可能的实体。我不知道您是否可以使用通用`Entries<TEntity>()`方法来获取更改的实体 - 它可能无法匹配基于接口的实体。在这种情况下，请使用非泛型`Entries()`并使用 linq 的`OfType<T>()`运算符来过滤掉相关条目。

```
var hasNotInternal = ChangeTracker.Entries()
                     .Select(e => e.Entity).OfType<IHasNotInternal>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T08:40:00.417

使您的条目从实现 NoteInternal 属性的接口继承。

创建一个扩展类

```
public static class DbChangeTrackerExtensions {
public static IEnumerable<T> TypedEntries<T>(this DbChangeTracker tracker) {
  return tracker.Entries().OfType<T>();
} 
```

然后你可以调用它传入这个接口。

或者如果无法更改实体

```
var name="NoteInternal";

var entities = ChangeTracker.Entries()  
                                .Where(e => e.State == EntityState.Added ||  
                                            e.State == EntityState.Modified)  
                                .Where(e => e.CurrentValues.Any(c=>c.Name==name && string.IsNullOrWhiteSpace((string)c.CurrentValue)));  
    // Add Default values when Creating or Editing an Entity  
    string defaultvalue = "";  
    foreach (var entity in entities)  
    {  
       entity.Property(name).CurrentValue=defaultvalue;
    } 
```

# ruby-on-rails - 使用 jenkins 部署 Rails 非常慢

> ID：11325243
> 
> 赞同：0
> 
> 时间：2012-07-04T08:27:14.017
> 
> 标签：ruby-on-rails, deployment, jenkins, bundler

我使用 Jenkins 来测试和部署 Rails 3 应用程序。它从 SVN 存储库中获取源代码，然后运行：

```
bundle install --deployment
bundle exec rake assets:precompile
rake spec 
```

该过程非常缓慢，需要一个多小时（！），而本地`bundle install --deployment`需要3分钟。我`ps aux`在捆绑过程中在服务器上运行，它似乎没有超载。这种奇怪行为的原因可能是什么？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:45:39.663

这可能与在后台（和/或作为服务）运行 Jenkins 有关。尝试在前台运行它，`java -jar jenkins.war`看看它是否有帮助。

# php - 关闭后无法重新打开对话框

> ID：11325245
> 
> 赞同：1
> 
> 时间：2012-07-04T08:27:16.370
> 
> 标签：php, jquery, html

这是我的问题...

我有以下 jQuery UI 脚本：

```
 <script>
$(function() {
    $( "#dialog" ).dialog({
        autoOpen: false,
        show: "slideUp",
        hide: "slideDown",
        height: "300",
        width: "400",
        title: "Test pop-up",
        buttons: {
            "Close": function(){
                $(this).dialog("close");
                    }
                }
            }           
        );

    $( "p.diag").click(function(e) {
        var monUrl = 'test2.php'; 
        $('#dialog').load(monUrl, function(response, status) {
        $('#test_dialog').html(response);
    });
    e.preventDefault();
});

    $( "p.diag").click(function() {
    $( "#dialog" ).dialog("open");
    }); 
```

这是一个非常简单的代码，当我单击 p.diag 类时它会正确打开我的对话框，但在我关闭它后它不会重新打开。

test2.php 页面只打印一个带有回显“lol”的“lol”；

这是我的 HTML：

```
<div style="height: 200px; min-height: 109px; width: auto;" class="ui-dialog-content  ui-widget-content" id="dialog">
  </div> 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:30:05.467

请删除`e.preventDefault();`

看这个演示：http: [//jsfiddle.net/ngwJ3/](http://jsfiddle.net/ngwJ3/)

原因：[http](http://api.jquery.com/event.preventDefault/) ://api.jquery.com/event.preventDefault/ ：如果调用该方法，则不会触发事件的默认动作。

希望这有帮助`:)`

# c# - 将字符串拆分为具有特定数量元素的数组，c#

> ID：11325250
> 
> 赞同：2
> 
> 时间：2012-07-04T08:27:38.380
> 
> 标签：c#, c#-4.0

我有一个字符串，其中包含由行 (\n) 分隔的有序术语的数量，如下例所示：（注意，我拥有的字符串是字符串数组的元素）

```
term 1
term 2
.......
.......
term n 
```

我想拆分特定数量的术语，让我们只说 (1000) 并丢弃其余的术语。我正在尝试以下代码：

```
string[] training = traindocs[tr].Trim().Split('\n');
                List <string> trainterms = new List<string>();
                for (int i = 0; i < 1000; i++)
                {
                    if (i >= training.Length)
                        break;
                    trainterms.Add(training[i].Trim().Split('\t')[0]);
                } 
```

我可以在不使用 List 或任何其他数据结构的情况下执行此操作吗？我的意思是直接将特定数量的术语提取到数组（训练）中？？提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T08:29:46.787

LINQ怎么样？.Take [()](http://msdn.microsoft.com/en-us/library/bb503062.aspx)扩展方法似乎符合您的要求：

```
List<string> trainterms = traindocs[tr].Trim().Split('\n').Take(1000).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T08:34:39.313

根据[MSDN](http://msdn.microsoft.com/en-us/library/ms131450)，您可以使用该`split`方法的重载版本。

> public string[] Split(char[] separator, int count, StringSplitOptions options )
> 
> 参数
> 
> separator 类型：System.Char[] 用于分隔此字符串中的子字符串的 Unicode 字符数组、不包含分隔符的空数组或 null。
> 
> count 类型：System.Int32 要返回的最大子字符串数。
> 
> options 类型：System.StringSplitOptions StringSplitOptions.RemoveEmptyEntries 从返回的数组中省略空数组元素；或 StringSplitOptions.None 在返回的数组中包含空数组元素。
> 
> 返回值
> 
> 类型：System.String[] 一个数组，其元素包含此字符串中的子字符串，这些子字符串由分隔符中的一个或多个字符分隔。有关详细信息，请参阅备注部分。

所以像这样：

```
String str = "A,B,C,D,E,F,G,H,I";
            String[] str2 = str.Split(new Char[]{','}, 5, StringSplitOptions.RemoveEmptyEntries);
            System.Console.WriteLine(str2.Length);
            System.Console.Read(); 
```

将打印：`5`

编辑：经过进一步调查，该参数似乎`count`只是指示拆分何时停止。字符串的其余部分将保留在最后一个元素中。

因此，上面的代码将产生以下结果：`[0] = A, [1] = B, [2] = C, [3] = D, [4] = E,F,G,H,I`，这不是您似乎想要的。

要解决此问题，您需要执行以下操作：

```
String str = "A\nB\nC\nD\nE\nF\nG\nH\nI";
            List<String> myList = str.Split(new Char[]{'\n'}, 5, StringSplitOptions.RemoveEmptyEntries).ToList<String>();
            myList[myList.Count - 1] = myList[myList.Count - 1].Split(new Char[] { '\n' })[0];
            System.Console.WriteLine(myList.Count);
            foreach (String str1 in myList)
            {
                System.Console.WriteLine(str1);
            }
            System.Console.Read(); 
```

上面的代码将只保留前 5 个（在您的情况下为 1000 个）元素。因此，如果您愿意，我认为达林的解决方案可能会更干净。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T08:35:51.847

如果你想要最有效（最快）的方式，你必须使用重载`String.Split`，传递所需的项目总数。

如果您想要简单的方法，请使用 LINQ。

# linux - 如何为 Tegra 2 Linux 启用对 libEGL 的硬件支持？

> ID：11325254
> 
> 赞同：0
> 
> 时间：2012-07-04T08:27:52.177
> 
> 标签：linux, opengl-es, tegra

我正在尝试运行安装在 Harmony 开发板（Tegra 2）上的 OpenGL ES 应用程序 Ubuntu 11.04，但是当我使用软件包时：

```
libegl1-mesa, libegl1-mesa-dev, libegl1-mesa-drivers
libgles2-mesa, libgles2-mesa-dev 
```

申请报告：

```
libEGL warning using software fallback 
```

当我尝试启动名为 /usr/bin/es2gears 的包 mesa-utils-extra 中提供的示例但更新驱动程序后，我收到了相同的消息：

```
export LDK_ROOTFS_DIR=/
cd Linux_for_Tegra
./apply_binaries.sh 
```

并创建符号链接，如“Tegra Linux Driver Package Developers Guide”

```
mv /usr/lib/libEGL.so /usr/lib/libEGL.so.1
mv /usr/lib/libGLESv2.so /usr/lib/libGLESv2.so.2
ln -s /usr/lib/libEGL.so.1 /usr/lib/libEGL.so
ln -s /usr/lib/libGLESv2.so.2 /usr/lib/libGLESv2.so 
```

我能够使用硬件加速（快 2 倍）启动 es2gears。

我的问题是我在哪里可以获得使用适当的 libEGL.so 和 libGLESv2.so 库的开发包，以便我可以编译我的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T09:16:58.900

Toradex 为 Nvidia Tegra 的 OpenGL ES 提供 Linux 示例：

[http://developer.toradex.com/software-resources/arm-family/linux/source-code/linux-(colibri-t20)-sample-code](http://developer.toradex.com/software-resources/arm-family/linux/source-code/linux-(colibri-t20)-sample-code)

这些库包含在 Linux 映像中：

[http://developer.toradex.com/software-resources/arm-family/linux/source-code/linux-(colibri-t20)-openembedded](http://developer.toradex.com/software-resources/arm-family/linux/source-code/linux-(colibri-t20)-openembedded)

# ruby-on-rails-3 - 是否可以在消息宝石“Mailboxer”中添加“搜索”功能？

> ID：11325262
> 
> 赞同：0
> 
> 时间：2012-07-04T08:28:11.280
> 
> 标签：ruby-on-rails-3, full-text-search, sunspot-rails, sunspot-solr

我想在吨消息的正文部分实现“文本搜索功能”。如果有人知道如何将它实现到“Mailboxer”，请告诉我如何。我不知道它是怎么回事。

当我访问 example.com/messages/search?page=3&search=test&utf8=%E2%9C%93 此代码不会发回正确的结果...

```
def search
  @search = params[:search]
  @a = current_user.search_messages(@search)
  @messages = Kaminari.paginate_array(@a).page(params[:page]).per(10)
  render :received
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:32:13.020

这可能是一个好的开始： [https ://github.com/frodefi/rails-messaging#enabling-search](https://github.com/frodefi/rails-messaging#enabling-search)

# junit - 在 CQ5 集成测试中使用 JUnitServlet 运行所有测试类

> ID：11325264
> 
> 赞同：0
> 
> 时间：2012-07-04T08:28:20.660
> 
> 标签：junit, aem, sling

我对 CQ5 集成测试中的 JUnitServlet 有疑问。我不明白两件事，我需要有类似问题的人的帮助。到目前为止，我的包中只有一个测试类和几种测试方法。一切正常，但有这两个问题：

1.  为什么当我更改测试类的名称时，JunitServlet 找不到它了。即使我正在重新构建并导出包和所有内容，但只是找不到它。它不想接受与我给测试类的第一个名称不同的任何其他名称。我想更改它，因为一开始我给出了非常具体的名称，然后我添加了几种测试方法，我想将它更改为更通用的方法，例如“TestScenarioOne.java”......

2.  第二个问题是，在我完成了这个测试类之后，我创建了一个新的类来继续测试不同的场景。JUnitServlet 只找到第一个但没有找到新的......即使它们在同一个包中。我不知道是什么问题...

非常感谢，我正在等待你的答案......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:56:15.100

我找出了问题所在：) 在较旧版本的 Junit 中，测试类的命名约定在末尾包含名词“Test”。有人告诉我，它在 Junit 版本 4+ 中已被删除...即使我们使用 Junit 4+ 版本，我尝试过并且它有效，这是唯一的问题...我希望这个问题对 cq5 中的其他新手也有用使用 JUnitServlet 进行集成测试...谢谢 :)

几天前我将答案作为评论发表，但我决定用官方答案回答我的问题，这样当有人搜索类似内容时，它就会显示为已回答的问题。谢谢

# iphone - 从 ACAccountStore 打开 Twitter 设置 (iOS 5.1 TWITTER)

> ID：11325266
> 
> 赞同：7
> 
> 时间：2012-07-04T08:28:22.707
> 
> 标签：iphone, objective-c, ios5, twitter, ios5.1

在 iOS 5.0 中，我从我的应用程序中打开 Twitter 设置

`[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs:root=TWITTER"]];`

但是，这个功能在 iOS 5.1 中被删除了，因此我无法打开 twitter 设置。

现在我正在使用

```
 + (void)makeRequestsWithURL: (NSURL *)url {
// Create an account store object.
ACAccountStore *accountStore = [[ACAccountStore alloc] init];

// Create an account type that ensures Twitter accounts are retrieved.
ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];
[self canTweetStatus];

// Request access from the user to use their Twitter accounts.
[accountStore requestAccessToAccountsWithType:accountType withCompletionHandler:^(BOOL granted, NSError *error) {
    if(granted) {
        // Get the list of Twitter accounts.
        NSArray *accountsArray = [accountStore accountsWithAccountType:accountType];

        // For the sake of brevity, we'll assume there is only one Twitter account present.
        // You would ideally ask the user which account they want to tweet from, if there is more than one Twitter account present.
        if ([accountsArray count] > 0) {
            // Grab the initial Twitter account to tweet from.
            ACAccount *twitterAccount = [accountsArray objectAtIndex:0];

            // Create a request, which in this example, posts a tweet to the user's timeline.
            // This example uses version 1 of the Twitter API.
            // This may need to be changed to whichever version is currently appropriate.
            TWRequest *postRequest = [[TWRequest alloc] initWithURL:url parameters:nil requestMethod:TWRequestMethodPOST];

            // Set the account used to post the tweet.
            [postRequest setAccount:twitterAccount];

            // Perform the request created above and create a handler block to handle the response.
            [postRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
                NSString *output = [NSString stringWithFormat:@"HTTP response status: %i", [urlResponse statusCode]];
                iOS5Twitter *twitter5 = [[iOS5Twitter alloc] init];
                [twitter5 performSelectorOnMainThread:@selector(displayText:) withObject:output waitUntilDone:NO];
                [twitter5 release];                }];
        }
    }

}]; 
```

}

为了提出请求，我可以检查我是否已登录

`if ([TWTweetComposeViewController canSendTweet])`

但现在我想要：如果我没有登录，它会显示一个如图所示的警报，并想要移动到 twitter 设置。是否可以 ？或者我必须手动去 ti twitter 设置？![在此处输入图像描述](../Images/60a4b6107c9f3daf73a79d1010198e94.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-04T12:49:51.657

这有点棘手，我通过删除子视图得到`*TWTWeetComposeViewController*`，所以它只在用户未登录时显示警报，通过点击设置按钮，我们可以在我的应用程序中打开设置页面。

```
 + (void)setAlertForSettingPage :(id)delegate 
    {
     // Set up the built-in twitter composition view controller.
        TWTweetComposeViewController *tweetViewController = [[TWTweetComposeViewController alloc] init];

        // Create the completion handler block.
        [tweetViewController setCompletionHandler:^(TWTweetComposeViewControllerResult result) {
            [delegate dismissModalViewControllerAnimated:YES];
        }];

        // Present the tweet composition view controller modally.
        [delegate presentModalViewController:tweetViewController animated:YES];
        //tweetViewController.view.hidden = YES;
        for (UIView *view in tweetViewController.view.subviews){
            [view removeFromSuperview];
        }

     } 
```

在这里， deleate 是您的视图控制器，如果您在视图控制器中使用此方法，只需使用`self`而不是`delegate`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-08T16:56:35.227

iOS 6 使用 SLComposeViewController 而不是 TWTweetComposeViewController，所以现在如果你想让它在 iOS 6 和 iOS 5 上工作，你必须这样做：

```
 UIViewController *tweetComposer;

    if([SLComposeViewController class] != nil)
    {
        tweetComposer = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];

        [(SLComposeViewController *)tweetComposer setCompletionHandler:^(SLComposeViewControllerResult result)
         {
            // do whatever you want
         }];
    }
    else
    {
        tweetComposer = [[TWTweetComposeViewController alloc] init];

        [(TWTweetComposeViewController *)tweetComposer setCompletionHandler:^(TWTweetComposeViewControllerResult result)
         {
            // do whatever you want
         }];
    }

    for (UIView *view in [[tweetComposer view] subviews])
        [view removeFromSuperview];

    [self presentViewController:tweetComposer animated:NO completion:nil]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T15:34:55.287

基于以上高级和 PJR 的答案，这对我有用。

与 Senior 的相同，除了在完成处理程序中有一个 dimissViewController。对我来说，这解决了我从设置返回应用程序后空视图控制器会留下来的问题。它会覆盖我的视图控制器并使其无用。

出色的解决方案，感谢 Senior 和 PJR。

```
UIViewController *tweetComposer;

if([SLComposeViewController class] != nil)
{
    tweetComposer = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];

    [(SLComposeViewController *)tweetComposer setCompletionHandler:^(SLComposeViewControllerResult result)
     {
            [self dismissViewControllerAnimated:NO completion:nil];
     }];
}
else
{
    tweetComposer = [[TWTweetComposeViewController alloc] init];

    [(TWTweetComposeViewController *)tweetComposer setCompletionHandler:^(TWTweetComposeViewControllerResult result)
     {
           [self dismissViewControllerAnimated:NO completion:nil];

     }];
}

for (UIView *view in [[tweetComposer view] subviews])
    [view removeFromSuperview];

[self presentViewController:tweetComposer animated:NO completion:nil]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-09T05:16:15.997

要删除帖子视图，请使用以下代码：

```
for (UIView *view in [[tweetComposer view] subviews])
    [view removeFromSuperview]; 
```

用这个：

```
tweetComposer.view.alpha = 0; 
```

适用于推特和脸书。

# sql - 如何根据 Oracle 中的 Case 语句使用 Group By？

> ID：11325268
> 
> 赞同：20
> 
> 时间：2012-07-04T08:28:30.473
> 
> 标签：sql, oracle, group-by, case

我有一个 SQL 查询，我使用 Oracle`CASE`来比较日期列是否*小于*或*大于*当前日期。但是我如何在 -`CASE`语句中使用该 -`GROUP BY`语句？我想计算每种情况下的记录。

例如

```
select
    (case
        when exp_date > sysdate then 1
        when exp_date <= sysdate then 2
        else 3
     end) expired, count(*)
from mytable
group by expired 
```

但是在尝试这个时我得到一个错误：`ORA-00904`. 有什么建议么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-04T08:31:58.177

使用内联视图：

```
SELECT expired,
       count(*)
  FROM (SELECT (CASE
                   WHEN exp_date > SYSDATE THEN 1
                   WHEN exp_date <= SYSDATE THEN 2
                   ELSE 3
                 END) AS expired
          FROM mytable)
GROUP BY expired; 
```

希望能帮助到你...

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-07-04T08:30:56.170

```
select
(case
    when exp_date > sysdate then 1
    when exp_date <= sysdate then 2
    else 3
 end) expired, count(*)
from mytable
group by (case
    when exp_date > sysdate then 1
    when exp_date <= sysdate then 2
    else 3
 end) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-15T10:50:21.957

作为附加输入，虽然它与此线程无关，但您也可以汇总您的案例陈述，而无需在 group by 子句中提及它。

```
SELECT
   WORK_ORDER_NUMBER,
   SUM(CASE WHEN STOCK_CODE LIKE 'xxxx' THEN STOCK_QUANTITY ELSE 0 END) AS TOTAL
FROM Table
GROUP BY WORK_ORDER_NUMBER; 
```

# mongodb - 在MongoDB中重建索引

> ID：11325273
> 
> 赞同：2
> 
> 时间：2012-07-04T08:28:44.420
> 
> 标签：mongodb, indexing

我正在阅读我的 Mongodb 项目[的 Mongodb 索引](http://www.mongodb.org/display/DOCS/Indexes)

我很清楚，如果表在重建索引时非常大，那么将数据插入传统的关系数据库会导致速度大大降低。

如果我选择向 Mongodb 集合添加索引：**在 Mongodb 中重建索引是否与在传统关系数据库中重建索引大致一样昂贵？**或者它使用[B-Tree 进行索引](http://www.mongodb.org/display/DOCS/Indexes#Indexes-Basics)这一事实是否会缩短重建时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T08:38:40.877

在 MongoDB 中，与在其他 RDMBS 中一样，一旦您构建了索引，后续的插入、删除和更新都会变慢。

重建过程由 MongoDB 自己处理，但您可以使用`db.myCollection.reIndex()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:36:03.290

在 Mongodb 中重建索引同样昂贵。

注意：传统数据库也使用 B 树。

# android - 安卓sql查询

> ID：11325276
> 
> 赞同：0
> 
> 时间：2012-07-04T08:28:52.007
> 
> 标签：android, sqlite

我有这个选择查询来从 android 手机联系人的 sqlite 数据库中获取行。

```
String selection = ContactsContract.Data.MIMETYPE + " = '" + ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE + "'"
           + " AND "+ContactsContract.Data.DATA10+ " = '" + select + "'";

Log.d(LOG_TAG,"selection in update data"+selection);

c = mContext.getContentResolver().query(CONTENT_URI, Projection,selection, null, null); 
```

在哪里`select = +12244004242`

我成功地获取了 reqd 数据。但是我的要求是如果我有多个字符串。即字符串数组。我如何编写查询？

我正在与

```
String selection = ContactsContract.Data.DATA10 IN ("+select+")"; 
```

在哪里`select = +12244004242,+12244004245,+12244004248`

但是我没有得到任何值。请帮我编写选择查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:50:14.670

尝试使用 IN(" + select + ")

选择 = "'+12244004242','+12244004245','+12244004248'"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:31:15.557

您可以执行嵌套 OR：

所以：

```
select = +12244004242 OR select=+12244004245 OR select=+12244004248 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T09:33:11.983

您可以尝试使用事务查询，这就是我从我的 sqlite 数据库中提取数据的方式，例如：

```
db = window.openDatabase("DBID", "1.0", "DBName", 50000000);
db.transaction(TableName, errorCB, successCB);
tx.executeSql('SELECT Col1, Col2 FROM TableName WHERE Col1="'+ test +'";', [], querySuccess, errorCB);

function querySuccess(tx, result) 
{
    // DO SOMETHING HERE
}

function errorCB(tx, err) {
    alert("Error processing SQL: "+err.message);
} 
```

# android - 更新 sqlite 数据库时出现语法错误

> ID：11325279
> 
> 赞同：0
> 
> 时间：2012-07-04T08:29:02.493
> 
> 标签：android, sqlite

我'，尝试使用它来更新我的数据库。

```
String dd = "1-PC CHICKEN & RICE";
SQLiteDatabase db2 = openOrCreateDatabase("order",MODE_PRIVATE,null);
ContentValues values = new ContentValues();
values.put("Description",(((TextView) findViewById(R.id.etoriginal)).getText().toString()));
db1.update("list", values, "Description ="+ dd ,null); 
```

但是我的日志猫出现了这个错误

```
07-04 16:20:00.659: E/AndroidRuntime(21504): android.database.sqlite.SQLiteException: near "CHICKEN": syntax error: , while compiling: UPDATE list SET Image=? WHERE Description =1-PC CHICKEN & RICE 
```

我不知道是什么原因造成的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:32:26.087

您需要转义 of 的值，`dd`而不是将其直接嵌入到查询中。试试这个：

```
db1.update("list", values, "Description = ?", new String[] { dd }); 
```

正如dbaseman`dd`所说，用引号括起来在这种特殊情况下也可以工作，但如果`dd`碰巧包含引号字符本身（`"1-PC FROGS' LEGS"`），则会失败。正如我在这里所做的那样，将其作为单独的参数提供通常更安全、更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:32:34.343

您需要将条件用引号括起来：

```
db1.update("list", values, "Description ='" + dd + "'", null); 
```

# jquery - 如何在不点击的情况下自动启动彩盒？

> ID：11325280
> 
> 赞同：0
> 
> 时间：2012-07-04T08:29:04.163
> 
> 标签：jquery, cakephp, colorbox

我的程序的目的是打开一个带有 JQuery 单击链接的颜色框。

**这是代码：**

```
<a href="<?= $html->url(array('controller' => 'competitions', 'action' => 'index')) ?>" class="game-popup">
    <?= $this->Html->image('image-link.jpg') ?>
</a>
<script type="text/javascript">
$(document).ready(function(){
  $('.game-popup').colorbox({'iframe':true, 'width':'690px', 'height':'670px'});
});
</script> 
```

*此代码完美运行。*

现在由于另一个原因，我需要在没有任何点击的情况下自动打开一个具有特殊条件的颜色框。我尝试使用下面的代码，但无法访问我的控制器：

```
<a href="<?= $html->url(array('controller' => 'competitions', 'action' => 'index')) ?>" class="game-popup">
    <?= $this->Html->image('competition-galaxy-s3.jpg') ?>
</a>
<script type="text/javascript">
$(document).ready(function(){
  $.colorbox({'iframe':true, 'width':'690px', 'height':'670px'});
  document.location.href="/ArgusDuMobile/competitions/index";
});
</script> 
```

代码行`$.colorbox`似乎很好，因为当我刷新页面时，颜色框正在打开但没有其内容。为了与控制器建立链接，我尝试了以下代码行，`document`但它在另一个页面中打开了正确的视图内容，但没有进入颜色框。

有人可以帮助我吗？提前感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:32:24.900

`href`使用类似选项调用颜色框

```
$.colorbox({ href: '/ArgusDuMobile/competitions/index',
            'iframe':true, 'width':'690px', 'height':'670px'}); 
```

这条线

```
document.location.href="/ArgusDuMobile/competitions/index"; 
```

将重定向到该页面不会将其加载到颜色框中，因此请删除它。

阅读更多关于[`href`](http://www.jacklmoore.com/colorbox)选项的信息。

# c# - 我可以将 CryptoStream 视为 SslStream 的替代品吗？

> ID：11325284
> 
> 赞同：1
> 
> 时间：2012-07-04T08:29:27.227
> 
> 标签：c#, .net, silverlight, security, ssl

我需要在 SilverLight 应用程序之间发送数据。我有要求说应该使用 SSL/TLS 等安全协议传输数据。由于性能原因，使用 TCP 套接字发送数据。不幸的是 SilverLight 不支持[SslStream](http://msdn.microsoft.com/en-us/library/system.net.security.sslstream.aspx)。如果我想通过 SSL/TLS 传输数据，我需要购买第三方库，例如[SecureBlackbox](http://www.eldos.com/sbb/)。在处理传输层时，我不想依赖第三方库。

但是，SilverLight 具有[CryptoStream](http://msdn.microsoft.com/en-us/library/system.security.cryptography.cryptostream.aspx)类。我正在考虑使用 WCF over SSL（SilverLight 支持）交换对称加密的密钥，然后使用 CryptoStream 使用 AES 加密数据。

这个解决方案安全吗？在安全性方面可以与使用 SSL/TLS 相比吗？是否有一些我遗漏的明显安全漏洞？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:14:04.100

我想 AES 方法的主要问题是密钥管理和密钥验证。我确定您知道 SSL 使用“握手”，它使用 CA 链（证书颁发机构）来验证 SSL 证书的有效性。这一切都发生在为 SSL 会话生成 AES 密钥之前。因此，如果不使用 SSL，您将错过这一重要步骤。

这意味着您有责任验证密钥是否安全并以安全的方式进行交换。

# python - Python：有没有办法从编解码器名称中获取语言名称

> ID：11325289
> 
> 赞同：2
> 
> 时间：2012-07-04T08:29:44.213
> 
> 标签：python, codec

我想要一个可以执行以下操作的函数：

```
def get_lang(enc):
  ...

>>> get_lang('ascii')
'English'
>>> get_lang('big5')
'Traditional Chinese'
>>> get_lang('utf-8')
'All languages' 
```

是否可以？

更新：我的意思是，就像手册中这样：http: [//docs.python.org/library/codecs.html#standard-encodings](http://docs.python.org/library/codecs.html#standard-encodings)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:02:45.243

是的，你可以使用这本字典：

```
codec_langs = {'ascii':'English',
'big5': 'Traditional Chinese',
'big5hkscs':'Traditional Chinese',
'cp037':'English',
'cp424':'Hebrew',
'cp437':'English',
'cp500':'Western Europe',
'cp720':'Arabic',
'cp737':'Greek',
'cp775':'Baltic languages',
'cp850':'Western Europe',
'cp852':'Central and Eastern Europe',
'cp855':'Bulgarian, Byelorussian, Macedonian, Russian, Serbian',
'cp856':'Hebrew',
'cp857':'Turkish',
'cp858':'Western Europe',
'cp860':'Portuguese',
'cp861':'Icelandic',
'cp862':'Hebrew',
'cp863':'Canadian',
'cp864':'Arabic',
'cp865':'Danish, Norwegian',
'cp866':'Russian',
'cp869':'Greek',
'cp874':'Thai',
'cp875':'Greek',
'cp932':'Japanese',
'cp949':'Korean',
'cp950':'Traditional Chinese',
'cp1006':'Urdu',
'cp1026':'Turkish',
'cp1140':'Western Europe',
'cp1250':'Central and Eastern Europe',
'cp1251':'Bulgarian, Byelorussian, Macedonian, Russian, Serbian',
'cp1252':'Western Europe',
'cp1253':'Greek',
'cp1254':'Turkish',
'cp1255':'Hebrew',
'cp1256':'Arabic',
'cp1257':'Baltic languages',
'cp1258':'Vietnamese',
'euc_jp':'Japanese',
'euc_jis_2004':'Japanese',
'euc_jisx0213':'Japanese',
'euc_kr':'Korean',
'gb2312':'Simplified Chinese',
'gbk 936':'Unified Chinese',
'gb18030':'Unified Chinese',
'hz  hzgb':'Simplified Chinese',
'iso2022_jp':'Japanese',
'iso2022_jp_1':'Japanese',
'iso2022_jp_2':'Japanese, Korean, Simplified ,Chinese, Western Europe, Greek',
'iso2022_jp_2004':'Japanese',
'iso2022_jp_3':'Japanese',
'iso2022_jp_ext':'Japanese',
'iso2022_kr':'Korean',
'latin_1':'West Europe',
'iso8859_2':'Central and Eastern Europe',
'iso8859_3':'Esperanto, Maltese',
'iso8859_4':'Baltic languages',
'iso8859_5':'Bulgarian, Byelorussian, Macedonian, ,Russian, Serbian',
'iso8859_6':'Arabic',
'iso8859_7':'Greek',
'iso8859_8':'Hebrew',
'iso8859_9':'Turkish',
'iso8859_10':'Nordic languages',
'iso8859_13':'Baltic languages',
'iso8859_14':'Celtic languages',
'iso8859_15':'Western Europe',
'iso8859_16':'South-Eastern Europe',
'johab':'Korean',
'koi8_r':'Russian',
'koi8_u':'Ukrainian',
'mac_cyrillic':'Bulgarian, Byelorussian, Macedonian, Russian, ,Serbian',
'mac_greek':'Greek',
'mac_iceland':'Icelandic',
'mac_latin2':'Central and Eastern Europe',
'mac_roman':'Western Europe',
'mac_turkish':'Turkish',
'ptcp154':'Kazakh',
'shift_jis':'Japanese',
'shift_jis_2004':'Japanese',
'shift_jisx0213':'Japanese',
'utf_32':'all languages',
'utf_32_be':'all languages',
'utf_32_le':'all languages',
'utf_16':'all languages',
'utf_16_be':'all languages (BMP only)',
'utf_16_le':'all languages (BMP only)',
'utf_7':'all languages',
'utf_8':'all languages',
'utf_8_sig':'all languages'} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T09:11:41.340

不，没有任何广泛可用的模块包含该信息。

我建议解析文档（来自[http://hg.python.org/cpython/file/tip/Doc/library/codecs.rst#l926](http://hg.python.org/cpython/file/tip/Doc/library/codecs.rst#l926)或[http://docs.python.org/_sources/library/codecs .txt](http://docs.python.org/_sources/library/codecs.txt)）来构造一个查找字典，就像@fraxel 似乎所做的那样。由于编解码器很少被添加到 Python 中（并且越来越多地被 Unicode 取代），这种方法应该是合理的面向未来的。

# java - 如何在 Java 中加快端口 443 扫描

> ID：11325294
> 
> 赞同：0
> 
> 时间：2012-07-04T08:29:59.787
> 
> 标签：java, sockets, network-programming

我有以下代码检查端口 443 是否在给定主机中打开。

```
import java.net.*;
import java.io.IOException;

public class Scan {

    public static void main (String[] args) {
        String host="put hostname here";
        int port=443;

        try{
            Socket s = new Socket(host,port);
            System.out.println("Can listen on port "+port+
                       " in host "+host+" is open");

        } //end try
        catch (IOException ex)
        {
            //remote host is not listening on port 443
            System.out.println("Can not listen on port "+port+
                       " of host "+host);
        } //end catch
    }
} 
```

我的问题是：如果某个主机的 443 端口没有打开，这会使我的程序非常慢，因为我需要检查主机组。有什么方法可以改进代码以使扫描端口 443 更快，同时保持可靠性？除了使用套接字之外，还有什么方法可以使用 java 编程来进行端口扫描？

请注意，扫描前 ping 不会有帮助，因为我的主机名已连接，我只需要检查端口 443 是打开还是关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T08:33:29.657

如果您必须扫描一组主机，只需在单独的线程中运行每个检查。这将确保一个主机不会阻止您处理其他主机。

长且独立的 IO 操作是多线程的经典用例。您甚至不必担心机器上的 CPU 数量，因为它们在等待网络响应时实际上什么都不做。加上别人建议的超时，也是一个合理的加法，除了多线程外，还可以用。

# xcode - 无法在 Lion 10.7.4 中安装 Xcode 4.3.3

> ID：11325295
> 
> 赞同：2
> 
> 时间：2012-07-04T08:30:04.107
> 
> 标签：xcode, macos, osx-lion, xcode4.3

我已经从 Apple 网站下载了 xcode 4.3.3。

我无法在 MAC OS X Lion 10.7.4 上安装 xcode 4.3.3。我已经搜索了这个网站以获得答案，但似乎没有一个有效。

我的 mac mini 中有双引导 Leopard 和 Lion OS。应用程序中没有 xcode.app 可以删除它。我也试过启动板，没有 xcode.app

我在 Leopard 中有 xcode 3.1.4。安装它会造成任何麻烦吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:10:59.967

当您从 Apple Developer 下载站点下载 .dmg 时，您只需安装图像（在 Finder 中双击）并将应用程序拖到 /Applications 或 ~/Applications 中。

然后它应该出现在 LaunchPad 中，或者您可以转到将应用程序拖到的文件夹并从那里启动它。然后单击其 Dock 图标并选择 Options 并告诉它留在 Dock 中。

然后卸载 .dmg（它出现在 Finder 的左侧窗格中）。

# vba - Excel VBA For 循环错误

> ID：11325298
> 
> 赞同：2
> 
> 时间：2012-07-04T08:30:25.513
> 
> 标签：vba, excel

我正在尝试运行一个简单的 For 循环，该循环将在以后扩展以包含更多功能，但由于它不断抛出错误“无效的下一个控制变量引用”而遇到麻烦。下面列出了我尝试使用的代码。

```
Sub Tickbox()

Set Location = Sheets("TickBoxSheet").Range("B:B")

i = WorksheetFunction.CountA(Location)

Sheets("TickBoxSheet").Range("B2").Select

For a = 1 To i
    If Selection.Value = "True" Then
        Row = Selection.Row
        'Hide some rows in another sheet via if statements

        ActiveCell.Offset(1, 0).Select
    End If
Next i

End Sub 
```

我不知道今天早上我是否需要更多的咖啡，但我似乎无法弄清楚到底发生了什么。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-04T08:35:27.870

递增变量 (in `Next`) 应该是索引变量，即：

```
For a = 1 To i
  '...
Next a 
```

`i`作为索引如此受欢迎，您应该在其他情况下使用它之前三思而后行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-04T08:52:58.727

你已经从 llmo 得到了答案。然而，我想强调的还有一些其他的事情......

尽量避免`.Select`。它会减慢你的代码。

此外，考虑到您想要遍历所有有数据的行，**没有必要给您最后一行。**`WorksheetFunction.CountA(Location)`我建议这个

```
Sub Tickbox()
    Dim i As Long, a As Long, Rw As Long

    With Sheets("TickBoxSheet")
        i = .Range("B" & .Rows.Count).End(xlUp).row

        For a = 2 To i
            If .Range("B" & a).Value = "True" Then
                Rw = a
                'Hide some rows in another sheet via if statements
            End If
        Next a
    End With
End Sub 
```

您也可以使用 Autofilter 使其更快，这样您就可以遍历只有`True`例如的单元格

```
Sub Tickbox()
    Dim i As Long, a As Long, Rw As Long
    Dim Location As Range, acell As Range

    With Sheets("TickBoxSheet")
        '~~> Remove any filters
        .AutoFilterMode = False

        i = .Range("B" & .Rows.Count).End(xlUp).row

        With .Range("B1:B" & i)
            .AutoFilter Field:=1, Criteria1:="True"
            Set Location = .Offset(1, 0).SpecialCells(xlCellTypeVisible).EntireRow
            Debug.Print Location.Address
        End With

        '~~> Remove any filters
        .AutoFilterMode = False

        For Each acell In Location
            If acell.Value = "TRUE" Then
                Rw = acell.row
                'Hide some rows in another sheet via if statements
            End If
        Next acell
    End With
End Sub 
```

# c# - 自定义 RichTextBox 控件

> ID：11325299
> 
> 赞同：0
> 
> 时间：2012-07-04T08:30:39.347
> 
> 标签：c#, silverlight, windows-phone-7, silverlight-4.0

在我的 Windows Phone 应用程序中，我使用 RichTextBox 控件。我的文本很长，所以标准控件只显示其中的一部分。

在互联网上，我找到了这个解决方案：[Creating-scrollable-Textblock-for-WP7](http://blogs.msdn.com/b/priozersk/archive/2010/09/08/creating-scrollable-textblock-for-wp7.aspx?CommentPosted=true#commentmessage) - 这可以帮助我。它分隔块并为每个文本块创建一个 TextBlock。但是我怎样才能为 RichTextBox 做到这一点？有可能吗，因为我的情况下的 RichTextBox 包含很多块？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T10:44:55.273

您可以通过在堆栈面板或滚动查看器中添加多个 RichTextBox 控件来解决此问题。您需要在添加每个文本块时计算 RichTextBox 的大小。当大小似乎超过 2048 像素的高度/宽度时，您需要在新的富文本块中添加文本。

找到以下以相同方式实现的 TextBlock 示例代码。

第1步：

```
<pre>
<ScrollViewer Margin="10,0,0,70">              
<StackPanel Grid.Row="4" Margin="0,-36,12,12" x:Name="textBlockStackPanel">

<TextBlock x:Name="StorytextBlock" Margin="0,0,12,12" MaxHeight="2048" TextWrapping="Wrap" FontSize="24" TextTrimming="WordEllipsis"  FontFamily="Segoe WP" d:LayoutOverrides="Width"   Foreground="#FF464646"  />

</StackPanel>                       
</ScrollViewer>
</pre> 
```

第2步：

只需在加载页面时调用 ProcessTextLength() 方法。

```
私人无效ProcessTextLength（字符串故事）
        {
            字符串 storytext = story.Replace("\n\n", "\n\n^");
            列出故事列表 = storytext.Split('^').ToList();
            列表 finalstorylist = new List();
            字符串当前文本 = "";
            foreach（故事列表中的 var 项目）
            {
                currenttext = this.StorytextBlock.Text;
                this.StorytextBlock.Text = this.StorytextBlock.Text + 项目；
                如果（this.StorytextBlock.ActualHeight > 2048）
                {
                    finalstorylist.Add(currenttext);
                    this.StorytextBlock.Text = 项目；
                }
                if (storylist.IndexOf(item) == storylist.Count - 1)
                {
                    finalstorylist.Add(this.StorytextBlock.Text);
                }
            }
            this.StorytextBlock.Text = "";
            foreach (var finalitem in finalstorylist)
            {
                字符串文本=最终项目；
                if (text.StartsWith("\n\n"))
                    text = text.Substring(2);
                if (text.EndsWith("\n\n"))
                    text = text.Remove(text.Length - 2);
                this.textBlockStackPanel.Children.Add(new TextBlock
                                                          {
                                                              最大高度 = 2048，
                                                              TextWrapping = TextWrapping.Wrap,
                                                              字体大小 = 24,
                                                              TextTrimming = TextTrimming.WordEllipsis,
                                                              FontFamily = new FontFamily("Segoe WP"),
                                                              文字=文字，
                                                              前景 = 新的 SolidColorBrush(Color.FromArgb(255,70,70,70))                                                             
                                                          });                
            }       
        }

```

这将解决您的问题。如果这真的对您有帮助，请标记为答案。

谢谢卡马尔。

# eclipse - Eclipse 配置以支持双 Equinox/Felix 环境

> ID：11325301
> 
> 赞同：1
> 
> 时间：2012-07-04T08:30:55.307
> 
> 标签：eclipse, osgi, equinox, eclipse-pde, apache-felix

有哪些配置更改可以使 Eclipse PDE 最好地支持 Equinox 和 Felix？

这是我目前遇到的一个示例问题。我可以通过 Eclipse OSGi 框架启动器运行我的应用程序。同样，在 PDE 中也不存在编译问题。但是，在 Felix 中运行时，我会得到 NoClassDefFoundErrors：

```
java.lang.NoClassDefFoundError: org/w3c/dom/DOMException 
```

我的理解是我的 Eclipse 设置在这里有问题；org.w3c.dom 不是“默认”OSGi 包，当我在 Eclipse 中运行它时不应该加载它。同样，在我的代码中导入 org.w3c.dom.DOMException 应该是一个错误。

我知道如何为 Felix 解决这个问题：声明一个 Import-Package。但这不是我的问题。我的问题是如何强制 Eclipse PDE 对 Felix 进行更接近的配置......基本上是为了使其在加载包时更加严格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:53:57.353

我认为 Equinox的行为*确实*像 Felix，如果你单独运行它的话。[正如osgi.org](http://wiki.osgi.org/wiki/Why_does_Eclipse_find_javax.swing_but_not_Felix?)上所述，它更像是 Eclipse 遗留的东西，而不是 Equinox 的东西。

据我所知，没有任何方法可以覆盖 Eclipse 的引导委托，但我很想被证明是错误的，因为我经常遇到这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T16:19:46.277

如果您正在开发服务器应用程序，我建议您根本不要使用 PDE。我正在使用 maven 和 maven bundle 插件来开发我的包。然后我在 Apache karaf 上进行部署。通过使用 karaf dev:watch 命令和远程调试，调试也非常简单。我从来没有真正错过 PDE 功能，它们在我的 Maven 构建中也没有很好地工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T10:21:24.973

这听起来像是启动器正在将 bootdelegation 设置为传统模式。请参阅 OSGi Wiki 上的以下页面：[http ://wiki.osgi.org/wiki/Why_does_Eclipse_find_javax.swing_but_not_Felix%3F](http://wiki.osgi.org/wiki/Why_does_Eclipse_find_javax.swing_but_not_Felix%3F)

# php - 如何解压上传的 zip 文件？

> ID：11325310
> 
> 赞同：0
> 
> 时间：2012-07-04T08:31:19.127
> 
> 标签：php, codeigniter, unzip

我正在尝试使用带有以下代码的 codeigniter 框架上传压缩文件

```
function do_upload()
{
    $name=time();
    $config['upload_path'] = './uploadedModules/';
    $config['allowed_types'] = 'zip|rar';
    $this->load->library('upload', $config);

    if ( ! $this->upload->do_upload())
    {
        $error = array('error' => $this->upload->display_errors());

        $this->load->view('upload_view', $error);
    }
    else
    {
        $data = array('upload_data' => $this->upload->data());

        $this->load->library('unzip');

    // Optional: Only take out these files, anything else is ignored
    $this->unzip->allow(array('css', 'js', 'png', 'gif', 'jpeg', 'jpg', 'tpl', 'html', 'swf'));

     $this->unzip->extract('./uploadedModules/'.$data['upload_data']['file_name'], './application/modules/'); 

        $pieces = explode(".", $data['upload_data']['file_name']);
        $title=$pieces[0];
        $status=1;
        $core=0;
        $this->addons_model->insertNewModule($title,$status,$core);

    }
} 
```

但主要问题是，当调用提取函数时，它会提取 zip，但结果是空文件夹。有没有办法克服这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T10:20:43.677

```
$zip = new ZipArchive;

     $res = $zip->open($fileName);

    if($res==TRUE)
        {  
            $zip->extractTo($path.$fileName);

            echo "<pre>";
            print_r($zip);//to get the file type

            $zip->close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:03:01.360

尝试这个 ：

```
<?php
exec('unzip filename.zip');
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T09:50:10.343

我遇到了同样的问题几分钟。如果你仔细观察你发现请复制zip文件并粘贴到包含程序文件（.php）的文件夹之后你

我认为文件没有存储在临时文件夹中。

```
if(preg_match("/.(zip)$/i", $fileName))
{
$moveResult= move_uploaded_file($fileTmpLoc, $fileName);

if($moveResult == true)
{ 
     $zip = new ZipArchive;

     $res = $zip->open($fileName);

    if($res==TRUE)
        {  
            $zip->extractTo($path.$fileName);

            echo "<pre>";
            print_r($zip);

            $zip->close();
        } else {
         echo 'failed';
        }

}

unlink($fileName); // Remove the uploaded file from the PHP temp folder
//exit();
}` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T09:50:40.743

嗯..，我认为您设置的上传 zip 文件的路径不正确，或者您的目标路径（'./application/modules/'）不正确。

尝试这个 ：

```
$this->unzip->extract($data['upload_data']['full_path'], './application/modules/'); 
```

我使用这个 -> **$data['upload_data']['full_path']**来确保它是上传文件的真实路径。

希望能帮助到你 ：）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-25T12:24:49.180

```
class Upload extends CI_Controller {
function __construct(){
    parent::__construct();
    // load ci's Form and Url Helpers
    $this->load->helper(array('form', 'url'));
}
function index(){
    $this->load->view('upload_form_view', array('error' => ' ' ));
}
function file_upload(){
    $config['upload_path'] = './uploads/';
    $config['allowed_types'] = 'zip';
    $config['max_size'] = '';
    $this->load->library('upload', $config);
  if ( ! $this->upload->do_upload()){
    $error = array('error' => $this->upload->display_errors());
    $this->load->view('upload_form_view', $error);
  }else{
    $data = array('upload_data' => $this->upload->data());
    $zip = new ZipArchive;
    $file = $data['upload_data']['full_path'];
    chmod($file,0777);
    if ($zip->open($file) === TRUE) {
            $zip->extractTo('./uploads/');
            $zip->close();
            echo 'ok';
    } else {
            echo 'failed';
    }
    $this->load->view('upload_success_view', $data);
    }
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-11T02:39:26.560

如果有人来这里问同样的问题，只需添加 chmod($file,0777); 到发布的原始代码还有AnotherSE。这解决了空文件的问题。

# c# - 在 Visual C# 中获取 CPU 多核使用情况

> ID：11325315
> 
> 赞同：4
> 
> 时间：2012-07-04T08:31:28.917
> 
> 标签：c#, cpu-usage

一直在寻找这个，希望这里有人可以回答我的问题。因此，我试图找到获得 2 个或 4 个内核的**平均**CPU 使用率的最佳方法。目前我正在使用性能计数器，据我所知，它只返回单个内核的使用情况。理想情况下，我希望它匹配或至少类似于任务管理器中的使用栏，并且我已经研究了 WMI 查询，但希望能对最佳方法进行一些澄清。我目前正在使用具有超线程的 i7，即具有“8”个内核。不知道这是否有很大的不同，但它可能会。感谢您的任何指点

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T08:37:47.857

使用`Win32_PerfFormattedData_Counters_ProcessorInformation`，您可以使用该字段`PercentProcessorTime`将给出系统上每个核心/线程的实例及其各自的用法。

我刚刚在我的身上试过这个，我的 8 个线程得到了 8 个管理对象。

```
using System;
using System.Management;
using System.Windows.Forms;

namespace WMISample
{
    public class MyWMIQuery
    {
        public static void Main()
        {
            try
            {
                ManagementObjectSearcher searcher = 
                    new ManagementObjectSearcher("root\\CIMV2", 
                    "SELECT * FROM Win32_PerfFormattedData_Counters_ProcessorInformation"); 

                foreach (ManagementObject queryObj in searcher.Get())
                {
                    Console.WriteLine("-----------------------------------");
                    Console.WriteLine("Win32_PerfFormattedData_Counters_ProcessorInformation instance");
                    Console.WriteLine("-----------------------------------");
                    Console.WriteLine("PercentProcessorTime: {0}", queryObj["PercentProcessorTime"]);
                }
            }
            catch (ManagementException e)
            {
                MessageBox.Show("An error occurred while querying for WMI data: " + e.Message);
            }
        }
    }
} 
```

### 更新：

那是一个小小的谎言，我得到了 10 个实例。他们的名字是：

1.  _全部的
2.  0,_总计
3.  0,7
4.  0,6
5.  0,5

等等。您应该使用 where 子句过滤掉您需要的内容：

`SELECT PercentProcessorTime FROM Win32_PerfFormattedData_Counters_ProcessorInformation WHERE NOT Name='_Total' AND NOT Name='0,_Total'`

# sql - sql server 中的加密查询

> ID：11325319
> 
> 赞同：1
> 
> 时间：2012-07-04T08:31:47.690
> 
> 标签：sql, sql-server, encryption

我想使用删除访问在我们客户端的服务器中执行查询。如果我执行类似这样的查询，`Update abc set col1=12 where id = 2`他们就会明白我们在做什么。所以我想要一些这样的加密和解密方法：

在我们的服务器中，我加密这样的查询：

```
encrypt(Update abc set col1=12 where id = 2) 
```

所以我得到如下输出：

> 0x0100CF465B7B12625EF019E157120D58DD46569AC7BF4118455D12625EF019E157120D58DD46569AC7BF4118455D

我在客户端机器上执行这个加密查询，如下所示：

`decrypt(0x0100CF465B7B12625EF019E157120D58DD46569AC7BF4118455D12625EF019E157120D58DD46569AC7BF4118455D)`

所以我们的客户无法理解我们执行了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:21:32.120

你可以像这样创建一个简单的解密函数..

```
create proc exec_decrypt(@sql_str varbinary(8000))
as
begin
declare @qry varchar(8000);
select @qry=cast(@sql_str as varchar(8000));
exec(@qry);
end 
```

它接受一个 varbinary 字符串并转换为 varchar 然后执行它..

您可以使用下面的 satament 生成加密查询

```
select CAST('UPDATE users set name =''alex''' as varbinary(8000)) 
```

然后通过将上述查询的输出作为过程的参数传递，在客户端执行 proc exec_decrypt。

```
Ex:  exec_decrypt 0x55504441544520757365727320736574206E616D65203D27616C657827 
```

希望这对你有用.. 请注意，客户端不应该对 proc exec_decrypt 有任何权限

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-26T17:16:54.287

我发现确保没有人可以查看您的查询的唯一方法是将它们放入使用“加密”的函数或过程中。运行下面的代码自己看看。较早答案中建议的动态 SQL 并不能完全解决您的问题。

```
create procedure dbo.dummy_drop_me with encryption as select t.* from sys.dm_exec_requests r cross apply sys.dm_exec_sql_text (r.sql_handle) t where r.session_id = @@spid
go
exec dbo.dummy_drop_me
go
select t.* from sys.dm_exec_requests r cross apply sys.dm_exec_sql_text (r.sql_handle) t where r.session_id = @@spid
go
exec ('select t.* from sys.dm_exec_requests r cross apply sys.dm_exec_sql_text (r.sql_handle) t where r.session_id = @@spid') 
```

我发现阻止某人捕获您的函数和过程的唯一方法是在没有人可以访问的服务器上的自己的数据库中创建它们。然后，将数据库的副本附加到您需要它们的服务器上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-11T15:09:01.490

在我看来，**With Encryption**通常会适得其反，因为有许多 Sql Server 解密工具。即dbForge 的DB Decryptor。我只是用它来解密数据库的 T-SQL，所以我可以导出 DACPAC 和 BACPAC 用于 Azure DevOps 自动化部署。**使用加密**会导致 DACPAC 和 BACPAC 导出失败。这意味着，如果您实施**With Encryption**，则无法使用 DACPAC 为 DB Patches 或直接更新创建更新脚本，您将无法使用 Visual Studio Sql Server Tools 项目，这使得 DB 开发更加困难。你没有获得任何东西，只是让 Dev 和 Op 更难完成他们的工作。

# c++ - 使用 -fPIC 编译和 Swig 错误

> ID：11325321
> 
> 赞同：0
> 
> 时间：2012-07-04T08:31:56.957
> 
> 标签：c++, swig

我正在尝试在一些已经存在的 c++ 代码之上添加一个 Swig 接口，并且我遇到了一些带有`-fPIC`标志的错误。

如果我编译已经存在的代码`-fPIC`，然后使用以下命令创建我的 Swig 模块：

```
swig -python -c++ pyinterface.i
gcc -fPIC $(CFLAGS)-I $(PYTHON_INCLUDE_DIR) -c pyinterface_wrap.cxx
g++ -shared -o _pyinterface.so pyinterface_wrap.o -I $(PYTHON_INCLUDE_DIR) -L $(PYTHON_LIB_DIR) $(LPATH) $(LFLAGS) $(IPATH) $(LIBS) 
```

然后我得到一个

```
warning: creating a DT_TEXTREL in object 
```

然而，该模块似乎确实可以在 Python 中加载和工作。

如果我编译已经存在的代码，`-fPIC`然后用同样的方法创建我的模块，当我尝试将它导入 python 时：

```
import pyinterface 
```

然后我得到错误

```
ImportError: ./_pyinterface.so: undefined symbol: _Z7InitErfPA20_d 
```

我不知道为什么会这样。但是，在我试图包装的基本 c++ 文件的编译中，它们确实链接到一些标准库，例如`-llapack`.

难道是我需要重新编译这些基础库，比如 lapack，用`-fPIC`. 这似乎很疯狂。

编辑：

实际上很抱歉，我没有意识到，但是使用 -fPIC 标志我在编译期间遇到错误：

```
g++: Internal error: Killed (program cc1plus) 
```

请提交完整的错误报告。有关说明，请参见[http://bugs.gentoo.org/](http://bugs.gentoo.org/)。

如果我弄清楚发生了什么，我会更新这个问题，但似乎它可能与问题实际提出的任何事情无关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-08T13:31:01.753

关于这个回复，我可能是错的。

关于警告：在对象中创建 DT_TEXTREL

甚至我也收到了同样的警告。

在我的 Makefile 中；我做过这样的事情

SRC= ../../some_folder/file.c 1.c 2.c

OBJS=$(SRC:.c=.o)

在制作共享对象时，我正在使用这个 $(OBJS); 而“file.o”将在该位置可用。

确保您尝试访问的目标文件在该位置可用。

当我进行以下更改时，我的警告消息消失了

OBJS=文件.o 1.o 2.o

# java - Grizzly 服务器的基本身份验证

> ID：11325334
> 
> 赞同：1
> 
> 时间：2012-07-04T08:32:57.583
> 
> 标签：java, jersey, basic-authentication, grizzly

我正在使用 Jersey Grizzly 并希望对 Grizzly 实施基本身份验证。我按如下方式创建我的 grizzly 服务器：

```
ResourceConfig rc = new PackagesResourceConfig("com.abc.de");
GrizzlyServerFactory.createHttpServer(BASE_URI, rc); 
```

在另一堂课上，我有类似的东西：

```
@GET
@Produces("text/plain")
@Path("/description")
public String getDescription() {
    String description = "probeDescription";
    return description;
} 
```

我不知道球衣和灰熊的区别和主要概念。什么球衣不能做到灰熊可以。但是我希望如果用户想要获得描述，它应该通过基本身份验证。

关于如何实施它的任何想法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-02T06:59:24.490

我遵循了这个例子： http: [//java.net/projects/jersey/sources/svn/show/trunk/jersey/samples/https-clientserver-grizzly](http://java.net/projects/jersey/sources/svn/show/trunk/jersey/samples/https-clientserver-grizzly?rev=5752) ?rev=5752并且它有效。

# php - 使用javascript验证输入数组

> ID：11325335
> 
> 赞同：2
> 
> 时间：2012-07-04T08:32:59.243
> 
> 标签：php, javascript

我有一个相当大的表格，它有 8 个用于输入书籍的字段。现在为用户添加更多书籍，有一个按钮添加更多书籍，点击该按钮会调用一个 javascript 函数，并且 8 个字段中有 7 个重复。

用户最多可以添加6本书，所有动态创建的输入字段都以数组的形式命名。我可以将它们发布并存储在表格中，现在我想使用 javascript 验证它们。

一周以来我一直在尝试这样做，并且是 Javascript 的新手。请帮我。

我的 JAVASCRIPT 代码

```
function addInput(divName){
 var bname1 = new Array();
 var abname1 = new Array();
 var cost1 = new Array();
 var num1 = new Array();

 if (counter == limit) 
 {
      alert("You have reached the limit of adding " + counter + " inputs");
 }
 else 
 {  
     var newdiv = document.createElement('div');
      newdiv.innerHTML ="<table>"+ "<tr align='right'>" + "<td>"+ " Name of book" +  (counter + 1) + "  " +" : <input type='text' name='bname1[]' > "+"</td>" + "</tr>"+"<tr align='right'>"+ "<td>"+" Name of Authour"+(counter + 1)+" "+": <input type='text' name='aname1[]'>"+"</td>"+"</tr>"+"<tr align='right'>"+"<td>"+"Publisher"+(counter+1)+" "+": <input tyme='text' name='pub1[]'>"+"</td>"+"</tr>"+ "<tr align='right'>" +"<td>"+ "ISDN Number " + (counter + 1) +" "+ ": <input type='text' name='isdn1[]'> "+"</td>" + "</tr>"+"<tr align='right'>" +"<td>"+ " Edition " + (counter + 1) + " "+": <input type='text' name='edi1[]'> "+"</td>" + "</tr>"+"<tr align='right'>" + "<td>"+ "Price"+(counter + 1) +" "+ " :<input type='number' name='cost1[]'>"+"</td>"+"</tr>"+"<tr align='right'>" + "<td>"+ "Number of copies"+(counter + 1) +" "+ ": <input type='number' name ='num1[]'> "+"</td>" + "</tr>"+ "</table>";

    //  alert("counter +1 is "+counter+1);

      document.getElementById(divName).appendChild(newdiv);
     counter=counter+1;

 }
} 
```

html 表单中有一个部分，所有这些都添加到其中。请帮忙 ！提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:53:05.607

这是您的解决方案。[http://codebins.com/codes/home/4ldqpbq](http://codebins.com/codes/home/4ldqpbq)

HTML

```
<div id="testDiv">
</div>

<button onclick="addInput('testDiv')">
  Add New Items
</button>
<button onclick="validate('testDiv')">
  Validate
</button> 
```

JavaScript

```
var counter = 0;
var limit = 6

function addInput(divName) {
    var bname1 = new Array();
    var abname1 = new Array();
    var cost1 = new Array();
    var num1 = new Array();

    if (counter == limit) {
        alert("You have reached the limit of adding " + counter + " inputs");
    } else {
        var newdiv = document.createElement('div');
        newdiv.innerHTML = "<table>" + "<tr align='right'>" + "<td>" + " Name of book" + (counter + 1) + "  " + " : <input type='text' name='bname1[]' > " + "</td>" + "</tr>" + "<tr align='right'>" + "<td>" + " Name of Authour" + (counter + 1) + " " + ": <input type='text' name='aname1[]'>" + "</td>" + "</tr>" + "<tr align='right'>" + "<td>" + "Publisher" + (counter + 1) + " " + ": <input tyme='text' name='pub1[]'>" + "</td>" + "</tr>" + "<tr align='right'>" + "<td>" + "ISDN Number " + (counter + 1) + " " + ": <input type='text' name='isdn1[]'> " + "</td>" + "</tr>" + "<tr align='right'>" + "<td>" + " Edition " + (counter + 1) + " " + ": <input type='text' name='edi1[]'> " + "</td>" + "</tr>" + "<tr align='right'>" + "<td>" + "Price" + (counter + 1) + " " + " :<input type='number' name='cost1[]'>" + "</td>" + "</tr>" + "<tr align='right'>" + "<td>" + "Number of copies" + (counter + 1) + " " + ": <input type='number' name ='num1[]'> " + "</td>" + "</tr>" + "</table>";

        //  alert("counter +1 is "+counter+1);
        document.getElementById(divName).appendChild(newdiv);
        counter = counter + 1;

    }
}

    function validate(divName) {
        var container = document.getElementById(divName).getElementsByTagName("input");

        for (var len = container.length, i = 0; i < len; i++) {
            // if only requried validation
            if (container[i].value == "") {
                container[i].style.borderColor = "red"
            } else {
                container[i].style.border = ""
            }

            //if you want saperate validation for each
            switch (container[i].name) {
            case "bname1[]":
                //validate according to filed
                break;
            case "aname1[]":
                //validate according to filed
                break;
            case "pub1[]":
                //validate according to filed
                break;
            case "isdn1[]":
                //validate according to filed
                break;
            case "edi1[]":
                //validate according to filed
                break;
            case "cost1[]":
                //validate according to filed
                break;
            case "num1[]":
                //validate according to filed
                break;
            }

        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:00:58.923

Couple of suggestions for you to consider: 1) consider grouping ALL the fields you want to duplicate inside a single div in your form. Then when the user wants to add new item (book) all you will need to do will be copy the content of this div. This way you will maintain only one copy of field-set. 2) consider dynamic generic form validation too. You add the validation rules to your form field definition with extra attributes i.e. [<input ... validationRules="mandatory,minimumLength=10..." />] I think that you can achieve something similar with JQuery, but I personally prefer NOT to use large libraries to do small jobs. 3) consider giving your fields unique ids too.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T10:05:01.780

利用

```
var bname= document.getElementsByName('bname1[]');
var aname=document.getElementsByName('aname1[]'); .........

for(var i=0;i<bname.length;i++)
{
  //Your validations
}
for(var i=0;i<aname.length;i++)
{
  //Your validations
}..... 
```

..对代码中的所有元素执行此操作..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T12:50:23.820

验证函数示例：

```
function validate_field(f) { // f is input element
    var name = f.name; // or also f.getAttribute('name')
    var value = f.value; // or also f.getAttribute('value'), but should be defined
    var error_div = document.getElementById(name+'err');
    //alert('name '+name+' value '+value);
    if (name.indexOf('bname') == 0) { // if validate book name
        if (value == '') { // e.g. book name should not be empty string?
            error_div.innerHTML = 'book name cannot be empty!';
            return false;  // field is wrong
        }
    }
    else if (name.indexOf('aname') == 0) { // if validate author name
        if (value.length<2) {
            error_div.innerHTML = 'author\'s name is too short!';
            return false; // at least two characters long name? :)
        }
    }
    else if (name.indexOf('pub') == 0) { // if validate publisher
        if (value.length<2) {
            error_div.innerHTML = 'publisher\'s name is too short!';
            return false;
        }
    }
    else if (name.indexOf('isdn') == 0) { // if validate ISDN Number
        if (value == '') {
            error_div.innerHTML = 'ISDN cannot be empty!';
            return false;
        }
    }
    else if (name.indexOf('edi') == 0) { // if validate Edition
        if (value == '') {
            error_div.innerHTML = 'edition cannot be empty!';
            return false;
        }
    }
    else if (name.indexOf('cost') == 0) { // if validate Price
        if (value=='') {
            error_div.innerHTML = 'Cannot be empty!';
            return false;
        }
        if (isNaN(value)) {
            error_div.innerHTML = 'Please write a price using digits!';
            return false;
        }
    }
    else if (name.indexOf('num') == 0) { // if validate Number of copies
        if (value=='') {
            error_div.innerHTML = 'Cannot be empty!';
            return false;
        }
        if (isNaN(value)) {
            error_div.innerHTML = 'Please number of copies via digits!';
            return false;
        }
    }
    error_div.innerHTML = 'ok';
    return true; // field is ok
    // you can also have a look at http://www.javascript-coder.com/html-form/javascript-form-validation.phtml
} 
```

完整的工作脚本在这里：[pastebin.com/UkVP2uLb](http://pastebin.com/UkVP2uLb)

# google-drive-api - 关于服务帐户和未注册用户

> ID：11325338
> 
> 赞同：1
> 
> 时间：2012-07-04T08:33:15.370
> 
> 标签：google-drive-api

我在 php mysql 中有一个网络应用程序，我想为我的应用程序使用一个谷歌驱动器帐户。我可以使用我的应用程序帐户而不是谷歌用户来获得特权吗？我在 SDK 中阅读了我可以使用服务帐户登录而无需提示用户，但我不知道如何为自定义用户共享或授予权限文件。

在 api 参考中我发现[了这个](https://developers.google.com/drive/manage-sharing#ids_and_names)：

“*该用户不一定是 Google 用户（例如，如果文件或文件夹与尚未关联 Google 帐户的电子邮件地址共享）。例如：1111459233037698895607* ”。

我的应用程序中的自定义用户应该如何获得自己特权的令牌。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T00:44:12.930

我不确定你想在这里实现什么，但如果你想使用自己的权限系统，你不能。但是，您可以对文件应用读/写/所有者权限以反映您自己的权限。

如果我的想法完全错误，请解释。

# java - 在 Struts2 的这种情况下如何避免“链”？

> ID：11325339
> 
> 赞同：1
> 
> 时间：2012-07-04T08:33:15.497
> 
> 标签：java, struts2

我有一个动作，称为`ShowData`从数据库中恢复数据并将其放入 jsp 中。

**struts.xml**

```
...
<action name="ShowData" class="foo">
   <result>foo.jsp</result>
</action>
... 
```

在 foo.jsp 页面中，我有一个表单和通过`ShowData`操作获得的数据。

**foo.jsp**

```
...
<s:form action="DoSomething">
   <s:input key="email" />
   <s:submit/>
</s:form>
<s:iterator value="data_recovered_in_ShowData">
   ...
</s:iterator>
... 
```

现在我想为数据添加一些验证。如果返回类型`DoSomething`是这样的：`<result name="input">foo.jsp</result>`我将丢失我在`ShowData`操作中恢复的数据，但验证工作完美，用户先前的输入和错误将显示在 jsp 页面中。

另一方面，我知道我可以使用`chain`, 做类似的事情`<result name="input" type="chain">ShowData</result>`，然后使用 MessageStoreInterceptor 来恢复数据（但我仍然不知道如何恢复用户在输入中引入的先前数据）。但这是我试图避免的解决方案，因为我读到使用链不是一个好主意。

那么，在这种情况下，如何在不丢失任何数据且不使用链的情况下添加一些验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T00:11:12.253

您的一个选择是针对您从先前操作中恢复的具有相同名称的每个数据声明隐藏变量。第二个选项，如果你想使用链，那么你可以在 struts.xml 文件中使用重定向，并通过 struts.xml 本身发送恢复的数据，例如：

```
 <action name="ShowData" class="foo">
        <result>foo.jsp</result>            
        <result name="redirect" type="redirect">
            <![CDATA[paxAcctCharge.do?value1=${value1}&value2=${value2}]]>
        </result>
    </action> 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T12:48:30.400

如果您关心的只是在第一个操作中*检索*数据库数据，那么您有几个选择。

1.  使用`Preparable`并让这两个操作使用适当的服务检索数据。
2.  相同，但两个动作都`prepare`从超类继承方法。
3.  将数据保留在会话中，直到不需要（可以手动完成，使用拦截器等）

如果您关心的是以前的*表单*数据（问题中未指明），那么您有类似的选择：

1.  隐藏字段（作为 Tapan 的回答），但如果它还*没有*在数据库中，你仍然需要验证它。（如果它在数据库中，您可以检索它。如果不是，并且您对隐藏数据有验证错误，则需要重定向回以前的表单。）
2.  将这些数据保留在会话中，避免重新验证。删除成功提交的数据。（同样可以通过现有的或新的拦截器，或手动实现。）

对于这两种情况，可能还有其他一些选择。

归根结底，如果您仅将链用于数据检索，那是个坏主意——这正是`Preparable`适用的场景，并消除了动作之间的耦合。

# windows-7-x64 - 如何让 eshell 在 emacs 中正常工作？

> ID：11325340
> 
> 赞同：0
> 
> 时间：2012-07-04T08:33:19.103
> 
> 标签：windows-7-x64, eshell, emacs24

出于某种原因，当我在 linux 上输入我习惯的命令时，它可以完美地工作，就像在 bash 中一样......但是在 eshell 中，它不起作用。

我已将问题缩小到一个微不足道的小样本，如下所示：

```
$ du
c:/Program: command not found
$ which bash
c:/Program Files (x86)/Git/bin/bash.exe 
```

我如何让这个工作？（du默认是什么...它是在elisp中实现的，我没有在那里做任何不寻常的更改，也就是说，它是`em-unix.el'中的编译lisp函数）

我预计会出现“您使用了 1.3 GiB 的磁盘空间”这样的内容，而不是该命令未找到错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T18:52:37.140

它不使用`bash.exe`，但它可以使用`du.exe`, 如果存在。

在我的系统上：

```
c: gutov $ which bash.exe
which: no bash.exe in ...
c: gutov $ which du.exe
h:/Apps/System/gnuwin32/bin/du.exe 
```

从您的错误消息中，我可以看出它调用了一些命令并失败，因为它没有正确引用可执行文件的路径（其中包含空格）。也许你应该这样做`M-x report-emacs-bug`。

总的来说，我推荐：

1）卸载 Git 并重新安装它，当询问您的 PATH 环境时选择第二个选项（“从 Windows 命令提示符运行 Git”）。这将从 PATH 中删除与它一起打包的 unix 工具。

[2）安装在某个没有空格的目录中，并从GnuWin32](http://gnuwin32.sourceforge.net/)项目或[Eli Zaretski 的 ports](http://sourceforge.net/projects/ezwinports/files/)添加到 PATH unix 工具。后者总体上包含更少的包，但它的速度要快得多`find`，例如。你可以混合它们。

或者，也许您只需将 Git 重新安装到没有空格的目录中即可。

# java - 在 socket.receive(packet) 上中断线程；抛出错误

> ID：11325346
> 
> 赞同：1
> 
> 时间：2012-07-04T08:33:36.943
> 
> 标签：java, android, multithreading, sockets

我正在开发一个使用此线程运行服务的 Android 3.1 平板电脑应用程序：

```
public class UDPServerThread extends Thread
{
    [ ... ]

    public void run()
    {
        while (!end)
        {
            try
            {
                byte[] buf = new byte[MESSAGE_SIZE];

                // Wait an incoming message.
                DatagramPacket packet = new DatagramPacket(buf, buf.length);
                socket.receive(packet);
                // TODO: Notify Service with packet received
                Message msg = new Message();
                msg.obj = packet;
                mServiceHandler.sendMessage(msg);
            }
            catch (IOException e)
            {
                e.printStackTrace();
            }
        }
    }

    public void stopServer()
    {
        Log.v("UDPServerThread", "stopServer");
        if (socket != null)
            socket.close();
        end = true;
    }
} 
```

`stopServer()`当我从服务调用方法时，出现以下错误：

```
java.net.SocketException: Interrupted system call 
```

在此线程打开时停止该线程的正确方法是`socket.receive(packet);`什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T08:39:47.367

根据[close方法的javadoc](http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html#close%28%29)：

> 当前在此套接字上的 I/O 操作中阻塞的任何线程都将抛出 SocketException。

因此，当您调用`close`,时`socket.receive(packet);`，如果它当前处于阻塞模式，将抛出一个`SocketException`在您的块中捕获的`catch (IOException e)`并打印堆栈跟踪。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T08:45:37.357

这个异常唯一真正的问题是你不能轻易地将它与实际的 I/O 错误区分开来。我建议切换到使用 SocketChannel 而不是 Socket——然后你可以中断你的服务器线程，它会抛出一个 ClosedByInterruptException ，你可以专门捕获和处理它。

# php - 从 php 推送到 GCM/APN 的最佳实践

> ID：11325347
> 
> 赞同：1
> 
> 时间：2012-07-04T08:33:39.500
> 
> 标签：php, curl, push-notification, apple-push-notifications, google-cloud-messaging

我目前正在为 web 和 iphone/android 应用程序构建一个 SNS。

当用户在墙上写字或留言时，服务器需要向所有相关用户推送通知。登录PC的用户将通过Socket.io接收，登录iPhone或Android应用程序的用户将通过GCM/APN获取。

从 php Web 服务器向所有这些用户发送推送通知（GET）的最佳方式是什么？

cURL 似乎做了正确的工作，但在我的服务器上非常慢。Web 服务器将需要以不明显的速度一次向至少 3 个不同的服务器发送通知。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:22:44.270

我正在构建这样一个应用程序，我必须诚实地建议您使用 Zend Framework。还有很多数据库计划要做，因为对数据库的读/写会很高。具体使用 Zend_Mobile 或访问我的博客以获取 gcm 解决方案[http://www.rogerethomas.com](http://www.rogerethomas.com) 理想情况下，您应该运行一个服务器集群来处理消息和队列。推送消息很快就会失控，我向你保证，花时间正确计划它会得到回报。

# c++ - Qt EllipseItem 内的文本标签

> ID：11325351
> 
> 赞同：0
> 
> 时间：2012-07-04T08:33:54.507
> 
> 标签：c++, qt, graph, ellipse

今天刚开始使用Qt，已经遇到了问题。我想在 a 中放置一个文本，`QGraphicsEllipseItem`但似乎没有`setText()`或`setLabel()`功能。它应该只是椭圆中间的一个单词。椭圆是可移动的，所以当椭圆移动时文本也应该移动。是否有捷径可寻？还是我必须在移动椭圆后创建一个单独的文本并更新其位置？希望有更简单的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:39:49.067

`QGraphicsEllipseItem`是一个可以放置到 a 的元素`QGraphicsScene`。还有一个`QGraphicsTextItem`- 一个用于在 . 上显示文本的元素`QGraphicsScene`。

所以我认为你应该子类化`QGraphicsEllipseItem`并添加到它`QGraphicsTextItem`以显示你的文本。

# javascript - 使用原型扩展淘汰视图模型

> ID：11325352
> 
> 赞同：1
> 
> 时间：2012-07-04T08:33:57.910
> 
> 标签：javascript, knockout.js, prototype, knockout-mapping-plugin

如果已经定义了视图模型，无论是手动还是使用映射插件自动定义，那么稍后在代码中使用原型“扩展”（添加属性/功能）视图模型是否有任何问题？

我知道映射插件的创建回调，我只想知道使用原型是否有任何影响？我问的原因是因为我从服务器端代码生成大部分视图模型，但有时需要在初始生成之后扩展视图模型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:55:39.960

I don't think there is any problem with this, I work with a large deep view model graph instantiated via the mapping plugin from correspondingly structured JSON and I use prototypes to define an "AbstractViewModel" with useful properties and toJSON "overrides" among other things.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-31T16:43:47.497

似乎有几种方法可以解决这个问题。

一方面，您可以采用单个对象视图模型并通过原型 utils.extend 它们：

```
ko.utils.extend(ViewModelClass.prototype, {
    newPrototype1: function () { ... },
    newPrototype2: function () { ... }
} 
```

或者，您可以添加一个扩展器来敲除并通过可观察对象本身调用它：( [http://knockoutjs.com/documentation/extenders.html](http://knockoutjs.com/documentation/extenders.html) )

```
ko.extenders.numeric = function(target, precision) {
    ...details in link above...
}

...
self.NumericProperty = ko.observable(data).extend({ numeric: 0 });
... 
```

或者创建一个可用于可观察、可观察数组、计算的所有实例的函数......（[http://knockoutjs.com/documentations/fn.html](http://knockoutjs.com/documentations/fn.html)）

```
ko.observable.fn.filterByProperty = function(propName, matchValue) {
    return ko.computed(function() {    
        ...details in link above...
    }, this);
} 
```

我倾向于使用这些的组合。我喜欢在独立于虚拟机和映射的文件中扩展视图模型的原型，所以我有一个类似的结构

*   ViewModel(s).js
*   ViewModel(s).Mappings.js
*   ViewModel(s).Prototypes.js

正如您将看到的，这些“答案”之间的时间跨度相当大，所以有些事情发生了变化，但有些事情保持不变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T18:58:15.983

这没有问题。只需确保当 viewModel 中的特定字段中没有数据时视图会正确响应。

# php - 处理数组的ajax表单

> ID：11325354
> 
> 赞同：0
> 
> 时间：2012-07-04T08:34:08.737
> 
> 标签：php, javascript, jquery

我试图在提交表单数据后处理来自 php 文件的数组，提交表单后的数据值为 = ARRAY 但我不能以任何方式使用这个数组，知道如何处理这个数组！！！！

Javascript：

```
 $('#file').live('change',function(){
       $('#preview').html('');
       $('#preview').html('<img src="loader.gif" />');
       $('#data').ajaxForm(function(data){
               $(data['toshow']).insertBefore('.pic_content').hide().fadeIn(1000);

       }).submit();

  }); 
```

PHP：

```
....
....etc
echo json_encode(array('toshow'=>somedata,'data'=>somedata)); 
```

JSON字符串来自服务器

```
{"toshow":"\r\n\t\t\t\t\r\n\t\t<table class=\"out\">\r\n\t\t\t<tr ><td class=\"img\"><a title=\"2012-06-02 01-22-09\" rel=\"prettyPhoto\" href=\"img\/2012-06-02 01-22-09.284.jpg\"><img  src=\"img\/thumb\/2012-06-02 01-22-09.284.jpg\"\/><\/a><\/td><\/tr>\r\n\t\t\t\r\n\t\t\t<td>\r\n\t\t\t\t<table cellSpacing=\"1\" cellPadding=\"0\">\r\n\t\t\t\t\t<tr><td class=\"data\"><span class=\"click\">2012-06-02 01-22-09<\/span><\/td><\/tr>\r\n\t\t\t\t\t<tr><td class=\"data\"><span class=\"click\">Download<\/span><\/td><\/tr>\r\n\t\t\t\t\t<tr><td class=\"data\"><a href=\"img\/2012-06-02 01-22-09.284.jpg\"><span class=\"click\">View<\/span><\/a><\/td><\/tr>\r\n\t\t\t\t<\/table>\r\n\t\t\t<\/td>\r\n\t\t\t<\/tr>\r\n\t\t<\/table>","span":"<span class='text'><img src='greencheck.png'\/>2012-06-02 01-22-09 Uploaded ,File Size =152Kb <\/span>"} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T08:40:08.840

最好使用 **json_encode($array)**将数组转换为 json 格式。json 数据可以很容易地被 Javascript 处理

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T08:37:01.917

你不能直接回显数组，它只会输出`Array` 。

您需要使用[json_encode](http://php.net/manual/en/function.json-encode.php)。

```
echo json_encode($your_array); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T08:43:15.110

您也可以使用 jQuery 通过 PHP 处理数组

供 jQuery 使用 - 每个 jQuery

供 PHP 使用 - foreach 或 for 循环

或尝试

```
echo '<pre>';
print_r($array);
echo '</pre>'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T08:56:39.113

从 PHP 发送 JSON 响应，如下所示：

```
<?php
echo json_encode($yourarray);
?> 
```

然后调整您的 AJAX 功能，请执行以下操作：

```
 $('#file').live('change',function(){
       $('#preview').html('');
       $('#preview').html('<img src="loader.gif" />');
       $('#data').ajaxForm(function(data){
               var jsonData = jQuery.parseJSON(data);
               //acess it like
               alert(jsonData.toshow); //alert for your testing
               $(jsonData.toshow).insertBefore('.pic_content').hide().fadeIn(1000);

       }).submit();

  }); 
```

*   编辑 * 更改，根据插件文档更新。

从来没有使用过 .ajaxForm jQuery 插件，我去查阅了文档，我将把代码放在这里，从我阅读的内容中尽可能清楚，我什至让插件自动将响应解析成json。

我没有看到任何 .ajaxForm().submit()，根据文档也没有必要。

```
$('#file').live('change',function(){
    $('#preview').html('');
    $('#preview').html('<img src="loader.gif" />');
        $('#data').ajaxForm({ 
            dataType:  'json',
            success:   function(data){
                alert("json string response from php: "+ data.toshow);
                $(data.toshow).insertBefore('.pic_content').hide().fadeIn(1000);    
            }
        }); 
}); 
```

dataType 使插件单独解析对 json 的响应。并且成功：函数（数据）如果只有来自 PHP 的响应就会发生。仔细实现它，如果你仍然没有得到正确的链接，请提供链接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T08:52:03.173

在您的 PHP 端，您必须`json_encode($array)`在 JS 端插入 AND 而不是使用`data['toshow']`use `data.toshow`。

希望能帮助到你！

# ios - .PNG 不复制到设备包

> ID：11325358
> 
> 赞同：3
> 
> 时间：2012-07-04T08:34:14.133
> 
> 标签：ios, xcode, bundle

几天来，我一直被一个大问题困扰，这非常令人沮丧。直到几天前我搞砸了目标设置/配置之前，一切都运行良好。基本上不会从项目中复制任何图像以包含在应用程序包中。我有：

1.  仔细检查了他们的案例一致性
2.  确保它们都包含在构建阶段的复制资源包部分中
3.  对派生数据文件夹执行了多次清理和手动清理

并且图像在模拟器中看起来很好。

我真的不知道还能去哪里或尝试什么。解决此问题的任何帮助将不胜感激，因为我正在尝试发布应用程序的更新，但在修复此问题之前无法这样做。另外值得一提的是，自从这个问题开始出现以来，它就发生在我所有的 xcode 项目中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T08:42:33.660

检查构建日志。它位于“日志导航器”选项卡中（按 command-7）。构建日志以图形方式显示构建步骤的结果。

检查各个“CopyPNGFile”步骤的路径。您还可以通过在每个构建步骤中单击最右侧的按钮来打开文本日志。

# java - eclipse调试：找不到源

> ID：11325362
> 
> 赞同：8
> 
> 时间：2012-07-04T08:34:32.463
> 
> 标签：java, eclipse, debugging, tomcat

我知道这是一个常见问题，但我从昨天开始就一直在网上寻找解决我的问题的方法，但一直没有找到！

我正在将 Eclipse Helios 与 Tomcat 6.0.2 一起使用，当我尝试使用 tomcat 和 eclipse 调试我的代码时，我得到了错误`Source not found`，即使是我自己编写的代码也是这种情况，而不仅仅是所有的 jar 文件

我正确设置了java构建路径，我也在使用jdk1.6.0并且也正确设置了这个，所以这不是问题，如果我右键单击调试控制台，它会在我调试时显示代码去`Edit Source Lookup...`。因为这将显示仅用于调试器运行的源代码，所以我在进入`Run -> Debug Configurations`窗口时`Java Application`将其设置为与 Tomcat 一起使用，并在`source`选项卡中添加了我的项目和所有 jar 文件，但这也不起作用！当我再次调试并进入时，`Edit Source Lookup...`它不会显示我保存在那里的项目和 jar 文件

有人对可能发生的事情有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-04T10:01:39.303

它实际上很容易。单击“编辑源查找路径”。您将获得下一个弹出窗口，您需要在其中单击“添加”-> 这将提供另一个弹出窗口，您可以在其中单击“Java 项目”---> 这将导致另一个弹出窗口，您可以在其中选择您正在调试的项目和这个完成了！希望这工作正常。

![在此处输入图像描述](../Images/937d665e2da6a32ab7cbb7609675272e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:19:03.273

我以迂回的方式解决了我的问题。在我的 catalina.bat 文件中，我添加了该行

`set JAVA_OPTS= -Xdebug -Xnoagent -Xrunjdwp:transport=dt_socket,address=5001,server=y,suspend=n %JAVA_OPTS%`

在设置的位置下方`JAVA_OPTS`，这将在套接字 5001 上侦听任何调试请求。然后在 Eclipse 下，`Debug Configurations...`我创建了一个新`Remote Java Application`端口并将端口设置为 5001，这样 Tomcat 就会选择它。现在，当我使用启动 tomcat`startup.bat`时，当代码遇到断点时，它会在 eclipse 中打开，我可以像往常一样调试

希望这可以帮助其他有这个问题的人

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T09:41:30.637

Can you debug code in other projects? if you don't know, create a new dummy project and try to debug it

if you still get source not found for all projects, then download a fresh copy of eclipse, link it to a fresh copy of tomcat and add your dummy project to see if this work. Hope this helps

# bash - bash 中基于控制台的菜单

> ID：11325366
> 
> 赞同：-3
> 
> 时间：2012-07-04T08:34:44.280
> 
> 标签：bash, menu, console

谁能告诉我如何构建基于控制台的菜单，我可以在其中通过方向键导航以选择选项。代码应该在 bash 或 shell 脚本中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T08:49:53.177

查看[pdmenu](http://joeyh.name/code/pdmenu/)。使用起来非常简单。

或者，如果您需要更深入，可以使用[whiptail](http://linux.die.net/man/1/whiptail)工具。它还允许您构建对话框等。但与`pdmenu`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T09:00:06.850

What about the [dialog](http://linux.die.net/man/1/dialog) command?

# blackberry - 无法在 BlackBerry 上的 Micro SDCard 上写入

> ID：11325371
> 
> 赞同：5
> 
> 时间：2012-07-04T08:35:16.707
> 
> 标签：blackberry, filesystems, blackberry-eclipse-plugin

我正在尝试将一些文件保存在 micro SDCard 上。为了检查 SDCard 的可用性，我使用以下方法；

```
private boolean isSdCardReady() {
    Enumeration e = FileSystemRegistry.listRoots();

    while (e.hasMoreElements()) {
        if (e.nextElement().toString().equalsIgnoreCase("sdcard/")) {    
            return true;
        }
    }
    return false;
} 
```

即使此方法返回 true，当我尝试保存文件时，它也会给出异常`net.rim.device.api.io.file.FileIOException: File system is not ready`。

这是什么意思？如果 SDCard 不可用，那么为什么将其列在`FileSystemRegistry.listRoots()`？

如何确保 SDCard 可用于写入？

我的开发环境：

*   黑莓 JDE Eclipse 插件 1.5.0
*   黑莓操作系统 4.5
*   带有 3G 卡的黑莓 Bold

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T08:39:00.690

1.  通常当我尝试在设备重启时访问 SD 卡时出现此错误。您必须推迟应用程序中的所有操作，直到启动完成：

    ```
    while (ApplicationManager.getApplicationManager().inStartup()) {
        try {
            Thread.sleep(500);
        } catch (InterruptedException ignored) {
        }
    } 
    ```

2.  [我记得这里](http://supportforums.blackberry.com/t5/Java-Development/IOException-File-system-not-ready/td-p/23487)提到的另一个可能的原因。您必须在使用后关闭所有流。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T09:42:49.743

解决了这个问题。我在寻找“sdcard”时`rootsEnum.nextElement().toString();`返回“SDCard”。是的，它区分大小写。现在，我没有使用硬编码的“SDCard”，而是将上述方法更改为以下方法；

```
private static String getSdCardRootDir() {
    Enumeration rootsEnum = FileSystemRegistry.listRoots();

    while (rootsEnum.hasMoreElements()) {

        String rootDir = rootsEnum.nextElement().toString();

        if (rootDir.equalsIgnoreCase("sdcard/")) {
            return "file:///" + rootDir;
        }
    }

    return null;
} 
```

使用它，我在其系统定义的情况下获得了根目录。

# node.js - Mongoose ODM，保存前更改变量

> ID：11325372
> 
> 赞同：22
> 
> 时间：2012-07-04T08:35:20.350
> 
> 标签：node.js, express, mongoose, odm

我想用 Mongoose 为我的用户文档创建一个模型层，它可以：

1.  验证（唯一，长度）
2.  规范化（用户名和电子邮件被转换为小写以检查唯一性）
3.  盐生成
4.  密码散列
5.  （记录）

在持久化到数据库之前，需要执行所有这些操作。幸运的是 mongoose 支持验证、插件和中间件。

坏事是我找不到任何关于这个主题的好材料。mongoosejs.com 上的官方文档太短了……

有没有人有关于 Mongoose 的预操作的例子（或者一个完整的插件，如果它存在的话）？

问候

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-04T14:48:36.907

在您的`Schema.pre('save', callback)`函数中，`this`是否正在保存文档，以及在调用`next()`更改保存的内容之前对其进行的修改。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-07-05T07:13:25.337

另一种选择是使用 Getter。这是网站上的一个例子：

```
function toLower (v) {
  return v.toLowerCase();
}

var UserSchema = new Schema({
  email: { type: String, set: toLower } 
}); 
```

[https://mongoosejs.com/docs/tutorials/getters-setters.html](https://mongoosejs.com/docs/tutorials/getters-setters.html)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-06-05T13:49:13.727

```
var db = require('mongoose');
var schema = new db.Schema({
  foo:     { type: String }
});

schema.pre('save', function(next) {
  this.foo = 'bar';

  next();
});

db.model('Thing', schema); 
```

# c1-cms - 在外部页面中渲染 C1 函数 - 数据丢失

> ID：11325374
> 
> 赞同：0
> 
> 时间：2012-07-04T08:35:34.367
> 
> 标签：c1-cms, yetanotherforum

我有一个子应用程序 (YetAnotherForum.NET) 位于我的 Composite C1 站点的子目录中。为了保持一致的外观和感觉，我想为导航元素引入 C1 函数。

**注意：**下面代码中的所有 html 标记都将尖括号替换为方括号，以便在此处发布。

我发现我可以使用以下语法调用 C1 函数：

```
[f:function ID="Function1" name="Custom.Layout.FooterLinks" runat="server"/]

```

但是，该函数背后的数据似乎不可用。任何想法数据问题可能是什么？也许我需要外部页面从某种形式的复合 C1 页面继承？

这是功能代码：

```
@使用复合数据；
@使用复合数据类型；
@使用 Composite.Data.ProcessControlled.ProcessControllers.GenericPublishProcessController；

@使用 CompositeC1Contrib.RazorFunctions；

@inherits CompositeC1WebPage

@功能 {
    私有 IEnumerable FooterLinkPages()
    {
        IEnumerable pages = DataFacade.GetData();
        IEnumerable returnPages;

        使用（数据连接连接 = 新数据连接（））
        {
            returnPages = (from l in connection.Get()
                           在 l.Page 上的页面中加入 p 等于 p.Id
                           其中 l.PublicationStatus == GenericPublishProcessController.Published
                            && p.PublicationStatus == GenericPublishProcessController.Published
                           orderby l.位置升序
                           选择 p).ToList();
        }

        返回返回页；
    }
}

[ul class="unstyled"]
@foreach（FooterLinkPages() 中的 IPage 页面）
{
    [li]@(String.IsNullOrWhiteSpace(page.MenuTitle) ? page.Title : page.MenuTitle)[/a][/li]
}
[/ul]

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T04:54:05.723

您需要将数据访问代码包装在：

```
using(Composite.Core.Threading.ThreadDataManager.EnsureInitialize())
{
    using (DataScope localeScope = new DataScope(new System.Globalization.CultureInfo("en-NZ")))
    {
        ...
    }
} 
```

# python - python中是否有任何方法或任何框架可以从xml创建对象模型？

> ID：11325376
> 
> 赞同：6
> 
> 时间：2012-07-04T08:35:39.460
> 
> 标签：python, xml, data-modeling, objectify

例如我的 xml 文件包含：

```
<layout name="layout1">
    <grid>
        <row>
            <cell colSpan="1" name="cell1"/>
        </row>
        <row>
            <cell name="cell2" flow="horizontal"/>
        </row>
    </grid>
</layout> 
```

我想从 xml 中检索一个对象，例如返回的对象结构是这样的

```
class layout(object):
     def __init__(self):
         self.grid=None
class grid(object):
     def __init__(self):
         self.rows=[]
class row(object):
     def __init__(self):
         self.cels=[] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T16:27:13.920

我找到了我在 lxml 包中使用 objectify 的答案

这是一个示例代码：

```
from lxml import objectify

root = objectify.fromstring("""
 <root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <a attr1="foo" attr2="bar">1</a>
   <a>1.2</a>
   <b>1</b>
   <b>true</b>
   <c>what?</c>
   <d xsi:nil="true"/>
 </root>
""")

print objectify.dump(root) 
```

它打印：

```
root = None [ObjectifiedElement]
    a = 1 [IntElement]
      * attr1 = 'foo'
      * attr2 = 'bar'
    a = 1.2 [FloatElement]
    b = 1 [IntElement]
    b = True [BoolElement]
    c = 'what?' [StringElement]
    d = None [NoneElement]
      * xsi:nil = 'true' 
```

# c# - 将 WinRT ListView 滚动到特定组

> ID：11325384
> 
> 赞同：1
> 
> 时间：2012-07-04T08:35:59.740
> 
> 标签：c#, .net, xaml, windows-runtime

我有一个 ListView 和里面的分组项目。用户有不同的导航方式进入页面，根据他的导航方式，我希望在页面打开时看到某个组。

我尝试设置这些：

```
itemGridView.ScrollIntoView(....);
itemGridView.SelectedIndex = ....;
itemGridView.SelectedItem = ....; 
```

其中 itemGridView 是 ListView 的名称，但似乎都不起作用。

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:35:19.860

您可以进行一些可视化树遍历以找到属于 ListView 模板的 ScrollViewer，找到组并将 ScrollViewer 滚动到您的组的位置。

# google-app-engine - 管理控制台日志搜索使用选项自

> ID：11325389
> 
> 赞同：1
> 
> 时间：2012-07-04T08:36:09.053
> 
> 标签：google-app-engine

我正在尝试在管理控制台中过滤我的日志以仅查看最近的条目。

我尝试选择“自：”选项并输入日期，但它似乎不起作用。

它似乎在过滤条目“直到”我输入的日期而不是“自从”？这只是贴错标签还是仅与我留空的“过滤器：”选项结合使用，因为我只想按日期过滤？

如果“自从：”选项功能实际上是“直到”，那么任何人都可以建议一个过滤器，它会在特定日期之后返回条目。

# android - 如何在安卓手机上存储文件？

> ID：11325391
> 
> 赞同：1
> 
> 时间：2012-07-04T08:36:12.540
> 
> 标签：android

创建 Android 应用程序时，我有一些文件需要存储在 android 本身上。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T08:45:49.360

如果你有本地文件，比如一些错误提示音，一些正在打开的视频..然后把它放在你里面`assets folder of your project`。

如果您需要在运行时下载动态数据，请使用本[指南](http://developer.android.com/guide/topics/data/data-storage.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T08:39:43.133

通用文件的最佳位置是文件`assets`夹。

您可以通过 访问文件`AssetManager`，例如，您可以使用它`Activity.getAssets()`。

这是一个如何访问文本文件的示例：

```
try {
    BufferedReader br = new BufferedReader(
        new InputStreamReader(getAssets().open("sometextfile.txt")));

        // do stuff with br
} catch (IOException e) {
        e.printStackTrace();
} 
```

有关`AssetManager`阅读[Java Doc 的](http://developer.android.com/reference/android/content/res/AssetManager.html)更多信息。哦，是的，您可以在资产中创建文件夹。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T09:01:46.213

如果你想保留一些文件`readme.txt`，甚至是音乐文件，你可以使用文件夹内的 raw 文件`res`夹。`raw`因此，在文件夹内创建一个名为的`res`文件夹。

在 raw 文件夹中，假设有一个名为 的文件`readme.txt`，假设调用了 Activity 类`MyActivity`。

现在，您可以将文件的内容读入字符串，如下所示：

```
StringBuilder strContents = new StringBuilder();
String thisLine;
InputStream is = MyActivity.this.getResources().openRawResource(R.raw.readme);
InputStreamReader isr = new InputStreamReader(is);
BufferedReader br = new BufferedReader(isr);
while ((thisLine = br.readLine()) != null) { // while loop begins here
    strContents.append(thisLine);
}
br.close();
//Now you have the data in strContents 
```

或者，`assets`这也是您可以使用的一个这样的文件夹，因为原始文件夹包含文件，没有任何优化，由 Android 完成压缩。

因此，在您的项目根文件夹中创建一个`assets`文件夹并将您的文件放在那里，例如`myfile`.

现在，您可以获得文件 InputStream 的实例，如下所示：

`InputStream is = getBaseContext().getAssets().open("mydb");`

# javascript - 此 Javascript 代码返回“未定义”

> ID：11325395
> 
> 赞同：1
> 
> 时间：2012-07-04T08:36:36.057
> 
> 标签：javascript, closures

> **可能重复：**
> [函数参数传递和返回](https://stackoverflow.com/a/8587945/298479)

我需要一点帮助

```
 var foo = {
     bar: function () {
         return this.baz;
     },
     baz: 1
 };
 (function () {
     return typeof arguments[0]();
 })(foo.bar); 
```

执行时此代码段返回“未定义”有人可以解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:49:40.103

您需要使用正确的调用范围。将 foo 显式设置为范围会给出预期的结果。

```
var foo = {
    bar: function () {
        return this.baz;
    },
    baz: 1
};
(function () {
    return arguments[0].call(foo);
})(foo.bar); 
```

# c# - 应用程序仅在带有 Visual Studio 的 PC 上运行

> ID：11325396
> 
> 赞同：1
> 
> 时间：2012-07-04T08:36:37.330
> 
> 标签：c#, c++, build

我有一个 VS 解决方案，其中包含两个项目，一个是 c++，另一个是 c# 中的 GUI。这个 c# 项目调用 c++ 项目进行计算。当我在我的机器上运行它时，它在调试模式下运行良好，但是当我尝试在没有 Visual Studio（调试构建）的机器上运行它时，它无法获取 c++ dll，但是如果我在发布模式下构建解决方案然后尝试运行，然后它在两台机器上运行良好。有人可以解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T08:38:48.170

您正在链接到 C++ 项目的调试运行时。

将其设置为发布，或将链接器选项设置为不使用调试运行时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T08:37:59.217

这是因为 Visual Studio 附带了 C 运行时的调试版本（`msvcr100d`例如），没有它的机器上不存在这些版本。

# ios - 在 viewWillAppear 中获取设备界面方向

> ID：11325397
> 
> 赞同：1
> 
> 时间：2012-07-04T08:36:39.970
> 
> 标签：ios, uiviewcontroller, uiinterfaceorientation

我需要在 UIViewController 的 viewWillAppear 方法中获取界面方向。我所做的是：

```
if (self.interfaceOrientation == UIInterfaceOrientationPortrait)
   NSLog(@"Portrait");
else
   NSLog(@"Landscape"); 
```

在横向时，我总是在 viewWillAppear 中获得肖像，在 viewDidAppear 中获得横向。为什么？

所以，我尝试使用 [[UIApplication sharedApplication] statusBarOrientation]，但同样的情况发生了。我还尝试了 Stack Overflow 中发布的另一个解决方案：

```
UIDevice* device = [UIDevice currentDevice];
[device beginGeneratingDeviceOrientationNotifications];
UIDeviceOrientation currentOrientation = device.orientation;
[device endGeneratingDeviceOrientationNotifications]; 
```

这似乎正确地返回了方向，但现在我留下了将 UIDeviceOrientation 映射到 UIInterfaceOrientation 的问题，据我所知这是不可能的（无法映射面朝上和面朝下）。

这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:41:43.803

请改用 [UIApplication sharedApplication].statusBarOrientation。

```
if([UIApplication sharedApplication].statusBarOrientation == UIInterfaceOrientationPortrait || [UIApplication sharedApplication].statusBarOrientation == UIInterfaceOrientationPortraitUpsideDown) {
    // Portrait
}
if( [UIApplication sharedApplication].statusBarOrientation == UIInterfaceOrientationLandscapeLeft || [UIApplication sharedApplication].statusBarOrientation == UIInterfaceOrientationLandscapeRight){
    // Landscape
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T17:46:01.893

JasonCoco 的第一条评论是我发现的这个问题的最佳解决方案。

# twitter-bootstrap - Bootstrap Carousel v2.0.4 在 mouseleave 事件上重新启动

> ID：11325401
> 
> 赞同：2
> 
> 时间：2012-07-04T08:36:59.587
> 
> 标签：twitter-bootstrap, carousel

jQuery v 1.7.2，Bootstrap v 2.0.4（今天早上从主页下载标准文件）

```
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<script>$('#myCarousel').carousel({interval: false})</script> 
```

我已经看到了很多关于此的问题，但[根据官方 Bootstrap 博客](http://blog.getbootstrap.com/2012/04/bootstrap-2-0-3-released/)（标题“Javascript”下的项目 5 和 10），这个问题应该在 v2.0.3 中得到解决。

我在调用中添加了一个错误间隔，因为这应该（根据文档）防止它滑动，除非用户单击上一个/下一个链接。

起初这很好用：页面加载，没有滑动，用户点击下一个链接，很好地过渡到下一张幻灯片。但是，如果用户将鼠标从容器#myCarousel 上移开，则滑动动作会再次自动开始。

这是怎么回事？我真的希望幻灯片动作在用户控制之下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T15:43:36.487

我无法重现您描述的行为。

## [JS小提琴](http://jsfiddle.net/4Sf66/)

如果你真的看到了这种行为，你应该在[Bootstrap repo](https://github.com/twitter/bootstrap/issues)上报告一个问题。

* * *

也就是说，如果您想完全禁用基于悬停的暂停切换，请尝试使用

```
$('#myCarousel').carousel({interval: 0, pause: 'none'}); 
```

[的值`pause`只需要是 以外的任何值`'hover'`。just的值`interval`需要是虚假的，我认为 using`0`在语义上更有意义，因为否则它应该是一个数字。]

另一种选择是手动关闭鼠标侦听器：

```
$('#myCarousel').off('mouseenter').off('mouseleave'); 
```

# audio - 正确解码/编码原始 PCM 数据

> ID：11325402
> 
> 赞同：0
> 
> 时间：2012-07-04T08:37:01.767
> 
> 标签：audio, frequency, wave, resampling

我正在用 C++ 编写我的 WAVE 解码器/编码器。我已经设法在不同的样本大小（8、16 和 32）之间正确转换，但我需要一些关于通道和频率的帮助。

**渠道：**

如果我想从立体声转换为单声道：

1.  我只从一个通道（哪个通道？1 还是 2？）获取数据？
2.  还是我从通道 1 和 2 中取平均值作为单声道。

如果我想从单声道转换为立体声：（我知道这不是很科学）

1.  我可以简单地将来自单个通道的样本添加到两个立体声通道中吗？
2.  有没有更科学的方法来做到这一点（例如：插值）？

**采样率：**

如何更改采样率（重新采样），例如：从 44100 Hz 到 22050 Hz：

1.  我是否只需为新的（较低频率）值取 2 个连续样本的平均值？
2.  还有更多的科学算法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:08:24.773

*   立体声到单声道 - 取左右样本的平均值，即`M = (L + R) / 2`- 这适用于绝大多数立体声内容，但请注意，在极少数情况下您可以获得左/右消除。

*   单声道到立体声 - 将单声道样本放在左右声道中，即`L = R = M`- 这会产生一个在作为立体声播放时居中的声像

*   重采样 - 对于上面示例中的简单整数比率下采样，过程是：

    *   低通滤波器以适应新的奈奎斯特频率，例如 10 kHz LPF 用于 22.05 kHz 采样率
    *   按所需比率抽取（即为您的 2x 下采样示例删除备用样本）

Note that there are third party libraries such as [libsamplerate](http://www.mega-nerd.com/SRC/) which can handle resampling for you in the general case, so if you have more than one ratio you need to support, or you have some tricky non-integer ratio, then this might be a better approach

# android - 在 Android 上将 div 加载到 webview 中

> ID：11325404
> 
> 赞同：9
> 
> 时间：2012-07-04T08:37:08.343
> 
> 标签：android, webview

我有一个包含 WebView 的 Android 应用程序，我想在其中显示的不是网页，而是该网页中的一个 div。我应该提到我无权访问该页面。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-08T17:34:14.243

我会推荐[Jsoup](http://jsoup.org/)。它比 tagsoup 大，但提供了从 URL 中提取 HTML 的内置功能，并且非常易于使用。例如，如果您想`div`使用 id提取一个，`example`您可以执行以下操作：

```
Document doc = Jsoup.connect(url).get();
Elements ele = doc.select("div#example"); 
```

然后将您提取的 HTML 加载到您的 Web 视图中，您将执行以下操作：

```
String html = ele.toString();
String mime = "text/html";
String encoding = "utf-8";
webView.loadData(html, mime, encoding); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T08:40:22.210

您需要自己加载页面的 HTML，提取 div 内容并将其作为字符串传递给 WebView。您可能会发现一个对此有用的 HTML 解析器库（例如[tagsoup ）。](http://ccil.org/~cowan/XML/tagsoup/)

# mysql - mysql自动保存10位唯一编号

> ID：11325406
> 
> 赞同：0
> 
> 时间：2012-07-04T08:37:24.567
> 
> 标签：mysql, ruby-on-rails-3, unique

我正在使用带有 mysql 数据库的 Rails Web 应用程序，我需要为表中的每条记录自动保存 10 位唯一数字/字母数字。该表可能包含超过数百万条记录（将来）

**要求**：

1.  只能从mysql数据库生成一个10位的唯一编号，并且生成的编号不能小于10位
2.  我还参考了 mysql 的 uuid() 和 uuid_short() 方法，它们返回一个通用的唯一 id，但这些返回超过 10 位数字。
3.  如果生成的唯一编号不是按顺序排列的，那么它会好很多（无法预测访问其他记录，例如下一个或上一个记录）。

**注意**：

*   我不认为通过手动生成唯一 id 更好（应用一些逻辑，如时间戳、record_id 等的组合），因为需要额外的查询来检查表中的唯一性。

# c# - 多个 BackgroundWorker 不会立即开始工作

> ID：11325407
> 
> 赞同：2
> 
> 时间：2012-07-04T08:37:39.247
> 
> 标签：c#, multithreading, backgroundworker

我正在尝试使用`BackgroundWorker`负载测试 Web 服务，代码是：

```
 private void button1_Click(object sender, EventArgs e)
    {
        CheckWS("11111");
        CheckWS("22222");
        CheckWS("3344111");
        // .. and some more of those, approx 1000
    }

    public void CheckWS(string sUser)
    {
        BackgroundWorker bgWork = new BackgroundWorker();

        bgWork.DoWork += new DoWorkEventHandler(bgWork_DoWork);

        sObject sData = new sObject();
        sData.iNum = iCount++;
        sData.sId = sUser;
        bgWork.RunWorkerAsync(sData);
    }

    public void bgWork_DoWork(object sender, DoWorkEventArgs e)
    {
        // Update a textbox that this worker started
        ...
        // Run a web service
        ...
        // Update the textbox as worker ended
    } 
```

但是根据完成工作所花费的时间，以及根据工人的输出（文本框中的工人开始和结束），每个工人开始的时间太长了 -

我希望一切都同时运行，但相反，它一次只执行 2-3 个后台工作人员......

关于这个问题的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T08:41:46.233

Backgroundworkers 运行在 ThreadPool 之上，TP 故意限制线程数。

由于这是一个测试（-驱动程序）应用程序，因此更改池的配置没有问题。您可以将最小线程数设置为合理的值。

```
 ThreadPool.SetMinThreads(20, 20); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T09:03:59.653

为@Henk Holterman 的正确答案提供一些背景知识，指出`BackgroundWorker`该类使用线程池......

线程池从池中的一个线程开始，池管理器“注入”新线程以应对额外的异步工作负载，达到某个限制最大值。在一段时间的不活动之后，如果池管理器“认为”这样做会带来更好的吞吐量，它可能会“退休”线程。在您上面的情况下，池管理器正在限制并发线程的数量。

您可以通过调用设置池将创建的线程数上限`Thread.Pool.SetMaxThread;`，默认值为：

```
1023 in Framework 4.0 in a 32-bit environment.
32768 in Framework 4.0 in a 64-bit environment.
250 per core in Framework 3.5.
25 per core in Framework 2.0. 
```

[_这些数字可能因硬件和操作系统而异]。这些庞大数量的原因（至少在 .NET 4.0 的情况下）是为了确保即使在某些线程被阻塞（运行一些紧张的工作等）时也能取得进展

您可以通过 设置下限`ThreadPool.SetMinThreads`。这个限制器的作用比最大限制器的作用更微妙：这指示池管理器不要延迟线程的创建，直到达到这个数字的下限 - 正如@Henk 正确指出的那样设置这个数字会提高你的并发性有阻塞的线程。

我希望这有帮助。

# html - 从 chrome 的扩展内容脚本访问 iframe 内容

> ID：11325415
> 
> 赞同：43
> 
> 时间：2012-07-04T08:38:14.283
> 
> 标签：html, security, iframe, google-chrome-extension

我正在做一个插件来对界面进行一些转换。我不断收到`unsafe javascript attempt to access frame with url.... Domains, protocols and ports must match`（典型的跨站点问题）

但作为一个扩展，它应该可以访问 iframe 的内容[http://code.google.com/chrome/extensions/content_scripts.html](http://code.google.com/chrome/extensions/content_scripts.html) ...

有谁知道如何访问它的内容以便可以捕获它们？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-04T10:09:59.033

There's generally no direct way of accessing a different-origin `window` object. If you want to *securely* communicate between content scripts in different frames, you have to send a message to the background page which in turn sends the message back to the tab.

Here is an example:

Part of `manifest.json`:

```
"background": {"scripts":["bg.js"]},
"content_scripts": [
    {"js": ["main.js"], "matches": ["<all_urls>"]},
    {"js": ["sub.js"], "matches": ["<all_urls>"], "all_frames":true}
] 
```

`main.js`:

```
var isTop = true;
chrome.runtime.onMessage.addListener(function(details) {
    alert('Message from frame: ' + details.data);
}); 
```

`sub.js`:

```
if (!window.isTop) { // true  or  undefined
    // do something...
    var data = 'test';
    // Send message to top frame, for example:
    chrome.runtime.sendMessage({sendBack:true, data:data});
} 
```

Background script 'bg.js':

```
chrome.runtime.onMessage.addListener(function(message, sender) {
    if (message.sendBack) {
        chrome.tabs.sendMessage(sender.tab.id, message.data);
    }
}); 
```

An alternative method is to use `chrome.tabs.executeScript` in `bg.js` to trigger a function in the main content script.

## Relevant documentation

*   [Message passing](https://developer.chrome.com/extensions/messaging) ^([`c.runtime.sendMessage`](https://developer.chrome.com/extensions/runtime#method-sendMessage) / [`c.tabs.sendMessage`](https://developer.chrome.com/extensions/tabs#method-sendMessage) / [`c.runtime.onMessage`](https://developer.chrome.com/extensions/runtime#event-onMessage))
*   [`MessageSender`](https://developer.chrome.com/extensions/runtime#type-MessageSender) and [`Tab`](https://developer.chrome.com/extensions/tabs#type-Tab) types.
*   [Content scripts](https://developer.chrome.com/extensions/content_scripts)
*   [`chrome.tabs.executeScript`](https://developer.chrome.com/extensions/tabs#method-executeScript)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-04-22T13:28:27.910

我知道这是一个老问题，但我最近花了半天时间来解决它。通常创建 iframe 看起来像这样：

```
var iframe = document.createElement('iframe');
iframe.src = chrome.extension.getURL('iframe-content-page.html'); 
```

此框架与页面的来源不同，您将无法获取其 DOM。但是，如果您创建 iframe 只是为了隔离 css，您可以通过另一种方式执行此操作：

```
var iframe = document.createElement('iframe');
document.getElementById("iframe-parent").appendChild(iframe);
iframe.contentDocument.write(getFrameHtml('html/iframe-content-page.html'));
.......
function getFrameHtml(htmlFileName) {
    var xmlhttp = new XMLHttpRequest();
    xmlhttp.open("GET", chrome.extension.getURL(html/htmlFileName), false);
    xmlhttp.send();

    return xmlhttp.responseText;
}
.......
"web_accessible_resources": [   
    "html/htmlFileName.html",
    "styles/*",
    "fonts/*"
] 
```

之后，您可以使用 iframe.contentDocument 访问 iframe 的 DOM

# ruby-on-rails-3 - 在 rails 3.2 上使用 rails 1.2.3 的 rake 时出错

> ID：11325417
> 
> 赞同：0
> 
> 时间：2012-07-04T08:38:35.280
> 
> 标签：ruby-on-rails-3, rake

我正在尝试在我的机器上安装 rails 1.2.3 应用程序。我的机器目前正在使用 rails 3.2.6 、 ruby​​ 1.9.3 和 windows 7。在尝试使用“RAKE”时，我收到以下错误

```
 WARNING: 'require 'rake/rdoctask'' is deprecated.  
  Please use 'require 'rdoc/task' (in RDoc 2.4.2+)' instead. 
```

我该如何找出问题才能使用我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:02:20.387

在您的中，您应该根据 rake`Rakefile`的要求更改语句。`require`可能会有后续错误，因此最好更新 Rake 以匹配您的 Rails 版本。

# sql - 如何在 SQL Server 2005 中根据条件返回值集？

> ID：11325421
> 
> 赞同：4
> 
> 时间：2012-07-04T08:38:49.457
> 
> 标签：sql, sql-server, sql-server-2005

我是 SQL Server 2005 存储过程的初学者。我似乎无法让它按要求工作。

我有一个 sp 从名为`annot`. `@caseid`分配给列的值，`src_caseid`并且在表中可以有多个引用 ( `ref_caseid`) 或没有`annot`。我想根据我使用 INNER JOIN 所做`court`的表中的列设置条件并设置正确的 shepardsflag 。`case`

基本上是这样的场景：

*   表`annot`-`ref_caseid, src_caseid, annotation`
*   表`case`-`caseid, court`

INNER JOIN 的结果集示例`ref_caseid = caseid`如下：

```
ref_caseid   src_caseid   annotation    court
  17334         17338        Refd       high court
  17600         17338        Foll       federal court
  18271         17338        Foll       federal court
  43220         17338        Not Foll   supreme court 
```

设置条件：

从记录集中，如果`federal court`存在，它应该只取`federal court`. 如果发现否`federal court`，则将采取其他具有其他法院价值的案件。

为此，我为`federal court`计数设置了一个计数器。但似乎 SQL 只读取最后一行并`@courtFC`根据它设置值。我已经尝试过`order by`，但似乎效果不佳。

从上面的示例中，案例 17338 的最终 shepardsflag 值应为 = 3（Foll），因为它应仅采用“联邦法院”行并忽略其余行。

但目前的结果是 shepardsflag = 2 ; 这是错误的

我希望我解释清楚。

有人可以帮助我正确的逻辑吗？我应该创建一个临时表吗？提前致谢。

**脚本：**

```
ALTER PROCEDURE [dbo].[spUpdateShepardsFlags] @caseid int = null AS
begin
declare @Shep int
declare @ref_caseid int
declare @court int
declare @courtFC int
declare @annot int

if @caseid is not null
   begin
      select @court = b.court, @ref_caseid = a.ref_caseid, @annot = a.annotation
         from cba_annot a inner join cbm_case b on a.ref_caseid = b.caseid 
         where a.src_caseid = @caseid

      if @court is not null
        begin
           if @court = 'MYFC'
              set @courtFC = @courtFC + 1
           if @court <> 'MYFC'
              SET @courtFC = @courtFC + 0
            PRINT 'The @courtFC counter : ' + CAST(@courtFC AS CHAR) 
        end

        if @court is not NULL 
        begin
          if @courtfc > 0
           begin 
             if exists(select a.ref_caseid, b.court, a.annotation, a.src_caseid from 
                       cba_annot a inner join cbm_case b on a.ref_caseid = b.caseid)
                begin
                   if exists(select src_caseid from cba_annot where (annotation like '%Refd%'
                      or annotation like '%Comp%')
                      and src_caseid = @caseid)
                      set @Shep = 4

                   if exists(select src_caseid from cba_annot where (annotation like '%Foll%'
                      or annotation like '%Aff%')
                      and src_caseid = @caseid)
                      set @ShepFC = 3

                    update cbm_case
                    set shepardsflag = @shep
                    where caseid=@caseid
                end
            end

          else -- if @courtFC = 0
            begin --new
             if exists(select a.ref_caseid, b.court, a.annotation, a.src_caseid from 
                       cba_annot a inner join cbm_case b on a.ref_caseid = b.caseid)
                begin
                   if exists(select src_caseid from cba_annot where (annotation like '%Refd%'
                      or annotation like '%Comp%')
                      and src_caseid = @caseid)
                      set @Shep = 4

                   if exists(select src_caseid from cba_annot where (annotation like '%Foll%'
                      or annotation like '%Aff%')
                      and src_caseid = @caseid)
                      set @Shep = 3

                   if exists(select src_caseid from cba_annot where (annotation like '%Not Foll%'
                      or annotation like '%Dist%')
                      and src_caseid = @caseid)
                      set @Shep = 2

                    update cbm_case
                    set shepardsflag = @shep
                    where caseid=@caseid
                end

          end -- new
      end
  else  --- if court is NULL -- case not referred by any other case
        update cbm_case
        set shepardsflag = 5
        where caseid=@caseid
  end 

else -- if caseid is null

-- other condition 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T04:41:44.597

您对 SQL 的理解存在一些实际问题，我严重怀疑临时表是否相关。

**1)**变量被初始化为 null，但这似乎并没有让你大吃一惊。（@courtFC + 0 不会以您可能想的方式评估您。）

**2）**你做任务的方式取决于顺序，最后一个赢了，就像你注意到的那样。而不是说：

```
select @court = b.court, ... 
```

你可以使用这个：

```
select @courtFC = count(b.court) ... where b.court = 'federal court' 
```

您似乎也正在尝试编写一个循环，我认为这是您困惑的另一部分。SQL 是关于集合的，一次对多行进行操作。

**3)**内部块中的所有 EXISTS 子查询都缺少相关 caseid 上的过滤器。

您的方法实际上可能仅适用于这些更改。

我在这里的版本不是为了使事情复杂化，但我担心你会遇到麻烦。这是一个基于集合的解决方案，它确实是一种更自然的方式。

```
if @caseid is not null /* short-circuit the update, but probably not necessary */
update cbm_case
set shepardsflag = coalesce(
    (
    select
        case
            max( /* highest precendence wins */
                case /* map annotations by precedence i.e. */
                     /* if there are multiple annotations, */
                     /* which one takes priority */
                    when a.annotation in ('Refd', 'Comp')     then 'P1'
                    when a.annotation in ('Foll', 'Aff')      then 'P2'
                    when a.annotation in ('Not Foll', 'Dist') then 'P3'
                    else cast(0/0 as char(2)) /* error, I think */
                end
            )
            when 'P1' then 4 /* translate back to shepardsflag */
            when 'P2' then 3
            when 'P3' then 2
        end
    from
        cba_annot as a inner join cbm_case as refcase
            on refcase.caseid = a.ref_caseid
    where
        a.src_caseid = cbm_case.caseid
        and (
            cbm_case.court <> 'federal court'  /* all if src case not federal */
            or refcase.court = 'federal court' /* always get federal */
        )
    ),
    5
)
where caseid = @caseid; 
```

**编辑 2** 忽略我在 3) 中的评论。再看一遍，我认为由于括号和换行符而误读了 OP 的代码。

**编辑 3** 修复了由于第一行中缺少 @ 字符而导致的错误。

# cakephp - CakePHP 2.1：使用 Set 搜索值

> ID：11325422
> 
> 赞同：2
> 
> 时间：2012-07-04T08:38:55.463
> 
> 标签：cakephp, search, set, cakephp-2.1

如果有以下形式的相当大的多维数组（flickr EXIF 数据）。

```
array(
(int) 81 => array(
    'tagspace' => 'Nikon',
    'tagspaceid' => (int) 0,
    'tag' => 'ISOExpansion2',
    'label' => 'ISOExpansion2',
    'raw' => 'Off'
),
(int) 82 => array(
    'tagspace' => 'Nikon',
    'tagspaceid' => (int) 0,
    'tag' => 'LensType',
    'label' => 'Lens Type',
    'raw' => 'G'
),
(int) 83 => array(
    'tagspace' => 'Nikon',
    'tagspaceid' => (int) 0,
    'tag' => 'Lens',
    'label' => 'Lens',
    'raw' => '11-16mm f/2.8'
),...
) 
```

是否有一种快速有效的方法来提取具有某些值的数组，即我会寻找键“Tag”的值“Lens”并获取一个数组作为返回值：

```
array(
    'tagspace' => 'Nikon',
    'tagspaceid' => (int) 0,
    'tag' => 'Lens',
    'label' => 'Lens',
    'raw' => '11-16mm f/2.8'
) 
```

另外，这可以使用 Set 完成吗？我只通过使用实现了以下目标`$extract = Set::classicExtract($exifarray, '{n}.tag')`：

```
array(
      (int) 81 => 'ISOExpansion2',
      (int) 82 => 'LensType',
      (int) 83 => 'Lens',...
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:33:05.937

`Set::classicExtract($exifarray, '{n}.tag');`如您所见，将提取所有标签。

[Set::matches](http://api20.cakephp.org/class/set#method-Setmatches) ( [CakeBook 链接](http://book.cakephp.org/2.0/en/core-utility-libraries/set.html#Set%3a%3amatches)) 用于查看**单个项目**或给定 xpath 是否匹配某些条件。但是**我不确定这是否适用于 strings**，但应该。因此，如果您已经完成：

```
$data = Set::classicExtract($exifarray, '{n}.tag'); 
```

你可以试试：

```
foreach($data as $key => $test){
    if(Set:matches(array('0=Lens'), $test[$key])){
    //Logic to run when you have a match.
    }
} 
```

如果这不起作用，您将不得不以相同的“foreach”方式对其进行正则表达式匹配，顺便说一句，这可能是正确的做法。

还有一点注意： 现在不推荐使用[Set （从 Cake 2.2 开始）。](http://book.cakephp.org/2.0/en/core-utility-libraries/set.html)有一个新的更好的数组操作类[——Hash](http://book.cakephp.org/2.0/en/core-utility-libraries/hash.html)。看看这个。

# maven - Maven 运行时范围和循环依赖

> ID：11325424
> 
> 赞同：9
> 
> 时间：2012-07-04T08:38:56.727
> 
> 标签：maven, runtime, cyclic

我有两个模块 A 和 B。实际上 B 是 A 的插件
。B 在编译时依赖于A。A 不依赖于 B。在 A 运行时我想将 B 添加到类路径中，所以在 A 的 pom.xml 中我添加以下依赖项

`pom.xml`

```
 <dependency>
        <groupId>my_group</groupId>
        <artifactId>my_Plugin</artifactId>
        <version>${project.version}</version>
        <scope>runtime</scope>
    </dependency> 
```

Maven 进程因循环依赖错误而失败

```
[ERROR] The projects in the reactor contain a cyclic reference: Edge between 'Vertex{label='A'}' and 'Vertex{label='B'}' introduces to cycle in the graph B-->A-->B -> [Help 1] 
```

[错误]

为什么运行时依赖会影响编译时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:39:06.777

正如柯南所建议的那样，如果可能的话，将您的通用代码提取到一个单独的模块中以解决循环问题。通常，在这种情况下，人们会将公共接口和核心类提取到一个单独的模块中，该模块由两个模块扩展，这会导致循环依赖。然后，您将删除对最初处于循环状态的模块的直接依赖关系。有时这很难解决，但是将代码模块化可以帮助您弄清楚如何重构代码，使其易于重用。

# asp.net - 删除 ASP.NET MVC 4 路由中的尾部斜杠到应用程序根目录

> ID：11325425
> 
> 赞同：5
> 
> 时间：2012-07-04T08:38:57.180
> 
> 标签：asp.net, asp.net-mvc, routing, asp.net-mvc-routing

在我的 ASP.NET MVC 4 应用程序`RouteConfig`文件中，我注册了以下默认路由：

```
routes.MapRoute("Default", "{controller}/{action}/{id}",
    new { controller = "home", action = "index", id = UrlParameter.Optional }); 
```

现在，在我的 Razor 视图中，我想生成一个指向我的应用程序根目录的 URL，如下所示：

```
<a href="@Url.Action("index", "home")">Home</a> 
```

生成的 URL 包含尾部斜杠；因此，单击该链接会打开页面*localhost/IISApplicationName* /。但是，我希望 URL 不包含尾部斜杠，以便 URL 为*localhost/IISApplicationName*。为其他操作生成路由，例如*/Account/Login*，不会创建带有斜杠的 URL——它只是关于链接到我的应用程序根目录的路由。

**有什么方法可以防止 ASP.NET MVC 路由将斜杠附加到上述路由？**

（我知道我可以从包含斜杠的 URL 重定向到没有斜杠的 URL，但我宁愿让路由首先生成正确的路由 URL。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:27:39.640

我推荐 URL Rwrite Outbounds 规则。

[为 URL 重写模块创建出站规则：URL 重写模块 2：URL 重写模块：Microsoft IIS 官方站点](http://learn.iis.net/page.aspx/657/creating-outbound-rules-for-url-rewrite-module/ "为 URL 重写模块创建出站规则：URL 重写模块 2：URL 重写模块：Microsoft IIS 官方站点")

示例配置：

```
 <rewrite>
        <outboundRules>
            <rule name="RewriteSlash">
                <match filterByTags="A" pattern="^/IISApplicationName/$" />
                <action type="Rewrite" value="/IISApplicationName" />
            </rule>
        </outboundRules>
    </rewrite> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:11:54.833

> 有什么方法可以防止 ASP.NET MVC 路由将斜杠附加到上述路由？

**当相对路径为空时，您应该传递一个尾部斜杠。**如果您以某种方式生成带有 href`localhost/IISApplicationName`的链接，浏览器仍然会在末尾附加一个“/”（您可以在 firebug 中轻松验证这一点，只需在浏览器地址栏中输入[http://stackoverflow.com](http://stackoverflow.com)并检查请求选项卡即可看到尾随“/”）。

这是因为根据 HTTP/1.1，

> 绝对路径不能为空；如果原始 URI 中不存在任何内容，则必须将其指定为“/”（服务器根目录）。

[http://www.faqs.org/rfcs/rfc2616.html#ixzz0kGcaRbqU](http://www.faqs.org/rfcs/rfc2616.html#ixzz0kGcaRbqU)（第 5.1.2 节）

# ruby-on-rails - 从表单发布的参数创建数组

> ID：11325432
> 
> 赞同：0
> 
> 时间：2012-07-04T08:39:12.327
> 
> 标签：ruby-on-rails, arrays, forms

我通过表单（和其他字段）发布“选择”参数

我的模型需要一个 parent_musicstyle 参数的数组，但得到一个字符串。

我在哪里以及如何转换它？在视图、控制器或模型中

形式：

```
<div class="field">
    <%= f.label :parent_musicstyle %>
    <%= f.select :parent_musicstyle,
                  Musicstyle.all.map { |m| [m.musicstyle, m._id] },
                  {:include_blank => "Select a parent (if needed)", :index => nil } %>
</div> 
```

如何提取/转换特定参数并将其转换为数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:03:00.047

让我们调用您的模型`musicstyle`，您将拥有：

```
<%= form_for :musicstyle do |f| 
  ...
<% end %> 
```

然后，在你的控制器中，你可以做

```
pm = params[musictyle][parent_musicstyle]
pm = [pm] 
```

也就是说，您将拥有一个包含一个元素的数组，这没有用。您的选择是多项选择吗？

# java - 如何在静态方法中返回泛型类型对象

> ID：11325437
> 
> 赞同：0
> 
> 时间：2012-07-04T08:39:23.623
> 
> 标签：java

我有 2 节课：

```
public class Super {

    public static <T> T bar(Class<T> clazz){

        try {
            return (T)(clazz.newInstance());
        } catch (IllegalAccessException e) {           
            e.printStackTrace();
        } catch (InstantiationException e) {           
            e.printStackTrace();
        }
        return null;
    }
} 
```

和

```
public class Sub extends Super{

    public static void main(String[] args){
        Sub s = Sub.bar(Sub.class);

    }
} 
```

现在我不想`Class<T> clazz`用作参数`bar`，所以我怎样才能返回泛型类型`T`，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T08:41:22.653

你不能。泛型仅在编译时可用，在运行时不可用。因此，您必须*提供*才能`Class clazz`在运行时知道 T 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T08:50:25.130

提供 Class 实例来创建新对象并没有错。

如果您的代码需要创建对象或通常对某个类进行操作，则应传递实例。此操作与其他对象用法没有区别。泛型应该使事情变得更容易并确保类型安全。所以在这种情况下，可以通过对泛型参数设置一些限制，通过 bar 静态方法创建女巫类的限制。

顺便提一句。

您应该从实现 的类中调用静态方法，而不是`Sub.bar(Sub.class)`应该拥有`Super.bar(Sub.class)`.

# java - 使用 servlet 时如何使用 system.out.println

> ID：11325440
> 
> 赞同：1
> 
> 时间：2012-07-04T08:39:31.483
> 
> 标签：java, servlets, jira-plugin

我想`system.out.println()`在运行一个 Servlet 的 JIRA 插件时使用什么来检查 eclipse 中的流和变量值来调试程序。当我在 eclipse 中对代码进行一些更改时，它会反映在浏览器上，但是当我使用时，我`system.out.println`应该在哪里看到输出？

示例代码：

```
 @RequiresXsrfCheck
    protected String doExecute()
    {   

        LOG.info("BulkCloneDetails doExecute start...");
        filterUrl = null;
        cloneSubTasks = false;
        cloneAttachments = false;
        deleteAfterClone = false;
        requestId = null;
        issues = null;
        getServerInfoFromPage();  

        **System.out.println("Print something here");**

        errorsCollection.put("filterPath", i18n.getText("Remote login failed"));
        addErrors(errorsCollection);
        return SUCCESS;

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T08:52:50.530

您可以在终端中的文件上添加尾部，以便查看它是如何交互的。在我正在开发的 webapp 上，我使用以下方法。

```
Username$ cd /Applications/tomcat/apache-tomcat-6.0.16/logs 
```

然后输入

```
tail –f catalina.out 
```

然后这将打印到您的终端窗口。我不得不在一些项目中使用这种方法。我建议你使用`system.out.println("Name of the File I am printing from")`，这样如果你有几个这样的，那么你就会知道它们来自哪里以及以什么顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T09:24:06.133

在 Eclipse 中，您将拥有许多控制台选项，其中一个是用于 Apache Tomcat 的。

切换到该控制台窗口以观察您的消息。

希望这可以帮助。

# android - 为什么 OpenGL 可以在某些手机上运行， 而不能在其他手机上运行？

> ID：11325443
> 
> 赞同：0
> 
> 时间：2012-07-04T08:39:43.823
> 
> 标签：android, opengl-es, android-emulator, surfaceview, textures

我的渲染器有以下代码：

```
package hello.project;

import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.opengles.GL10;

import android.content.Context;
import android.opengl.GLSurfaceView.Renderer;
import android.opengl.GLU;

public class HelloOpenGLES10Renderer implements Renderer {

    private Square      square;
    private Square2     square2;
    private Square3     square3;
    private SquareAccesories        squareAcc;
    private SquareEyes      squareEyes;
    private SquareLips      squareLips;
    private SquarePants     squarePants;
    private SquareShoes     squareShoes;
    private Context     context;
    //public static int w,h;

    /** Constructor to set the handed over context */
    public HelloOpenGLES10Renderer(Context context) {
        this.square     = new Square();
        this.square2        = new Square2();
        this.square3        = new Square3();
        this.squareAcc      = new SquareAccesories();
        this.squareEyes     = new SquareEyes();
        this.squareLips     = new SquareLips();
        this.squarePants        = new SquarePants();
        this.squareShoes        = new SquareShoes();
        this.context=context;
    }

    public void onDrawFrame(GL10 gl) {

        if (Project.ifDraw){
            Square.loadGLTexture(gl, this.context,Square.getSex()); 
            Square2.loadGLTexture(gl, this.context,Square2.getHair());
            Square3.loadGLTexture(gl, this.context,Square3.getDress());
            SquareAccesories.loadGLTexture(gl, this.context,SquareAccesories.getAcc());
            SquareEyes.loadGLTexture(gl, this.context,SquareEyes.getEyes());
            SquareLips.loadGLTexture(gl, this.context,SquareLips.getLips());
            SquarePants.loadGLTexture(gl, this.context,SquarePants.getPants());
            SquareShoes.loadGLTexture(gl, this.context,SquareShoes.getShoes());
            Project.ifDraw=false;
        }
        gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
        gl.glMatrixMode(GL10.GL_MODELVIEW);
        gl.glLoadIdentity(); 
        //GLU.gluPerspective(gl, 45.0f, (float)w / (float)h, 0.1f, 100.0f);
        GLU.gluLookAt(gl, 0, 1, 5, 0f, 0f, 0f, 0f, 1.0f, 0.0f);
        gl.glColor4f(1.0f, 1.0f, 1.0f, 2.0f);
        square.draw(gl);
        square2.draw(gl);
        square3.draw(gl);
        squareEyes.draw(gl);
        squareAcc.draw(gl);
        squareLips.draw(gl);
        squareShoes.draw(gl);
        squarePants.draw(gl);

        /*// clear Screen and Depth Buffer
        Square.loadGLTexture(gl, this.context,Square.getSex()); 
        Square2.loadGLTexture(gl, this.context,Square2.getHair()); 
        gl.glColor4f(1.0f, 1.0f, 1.0f, 2.0f);   
        gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

        // Reset the Modelview Matrix
        gl.glLoadIdentity();
        // GLU.gluLookAt(gl, 0, 0, 0, 0, 0, 0, 0, 0, 0);
        // Drawing
        gl.glTranslatef(0.0f, 0.0f, -5.0f);  // move 5 units INTO the screen
        square.draw(gl);
        square2.draw(gl);*/ 
    }

    public void onSurfaceChanged(GL10 gl, int width, int height) {
        if(height == 0) {                       //Prevent A Divide By Zero By
            height = 1;                         //Making Height Equal One
        }

        //w=width;
        //h=height;
        //Square.loadGLTexture(gl, this.context,Square.getSex()); 
        //Square2.loadGLTexture(gl, this.context,Square2.getHair()); 
        gl.glViewport(0, 0, width, height);     //Reset The Current Viewport
        gl.glMatrixMode(GL10.GL_PROJECTION);    //Select The Projection Matrix
        gl.glLoadIdentity();                    //Reset The Projection Matrix

        //Calculate The Aspect Ratio Of The Window
        GLU.gluPerspective(gl, 45.0f, (float)width / (float)height, 0.1f, 100.0f);

        gl.glMatrixMode(GL10.GL_MODELVIEW);     //Select The Modelview Matrix
        gl.glLoadIdentity();                    //Reset The Mode   lview Matrix
    }

    public void onSurfaceCreated(GL10 gl, EGLConfig config) {
        // Load the texture for the square
        gl.glEnable(GL10.GL_BLEND);
        gl.glEnable(GL10.GL_TEXTURE_2D); 
        gl.glShadeModel(GL10.GL_FLAT);    //Enable Smooth Shading
        //gl.glEnable(GL10.GL_ALPHA_TEST);
        gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);
        //gl.glColor4f(1.0f, 1.0f, 1.0f, 1.0f);
        //Square.loadGLTexture(gl, this.context,Square.getSex()); 
        //Square2.loadGLTexture(gl, this.context,Square2.getHair());
        //Square3.loadGLTexture(gl, this.context,Square3.getDress());
        //SquareAccesories.loadGLTexture(gl, this.context,SquareAccesories.getAcc());
        //SquareEyes.loadGLTexture(gl, this.context,SquareEyes.getEyes());
        //SquareLips.loadGLTexture(gl, this.context,SquareLips.getLips());
        //SquarePants.loadGLTexture(gl, this.context,SquarePants.getPants());
        //SquareShoes.loadGLTexture(gl, this.context,SquareShoes.getShoes());
        //gl.glAlphaFunc(GL10.GL_GREATER, 0.5f);

        gl.glDisable(GL10.GL_DEPTH_TEST);

        gl.glClearColor(0.0f, 0.0f, 0.0f, 0.0f);  //Black Background
        gl.glClearDepthf(1.0f);      //Depth Buffer Setup
        gl.glDepthFunc(GL10.GL_NEVER);    //The Type Of Depth Testing To Do

        //Really Nice Perspective Calculations
        gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_NICEST); 
    }
} 
```

在模拟器上，它运行完美。我使用 Xperia Play 进行调试，并在 HTC xplorer 和 Galaxy Nexus 上进行了尝试，并且成功了。2 天，我在三星 Galaxy 和 HTC 手机上试用了它，但 SurfaceView 没有显示任何内容，它是空白的，知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:13:35.597

使图片尺寸为 2 的幂并知道它有效

# android - 在互联网上哪里可以找到 asynctask.java 类

> ID：11325445
> 
> 赞同：0
> 
> 时间：2012-07-04T08:39:52.317
> 
> 标签：android, android-asynctask

我在哪里可以找到官方的 asynctask.java 类。我找到了一个并包含在我的包中，但在某一行找不到对 Process 的引用： Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);

```
 mWorker = new WorkerRunnable<Params, Result>() {
                        public Result call() throws Exception {
                    // error here
                        Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);
                            return doInBackground(mParams);
                        }
                    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:54:27.637

我建议看看[http://code.google.com/p/adt-addons/](http://code.google.com/p/adt-addons/)它包含**Android Sources**。使用它直接从 Eclipse 浏览 android 代码要容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:57:02.783

好的。我发现它 Process.Java 也不见了。我从源头复制了它。谢谢大家帮忙。

# spring - Spring 没有唯一的 bean 类型

> ID：11325448
> 
> 赞同：8
> 
> 时间：2012-07-04T08:40:02.687
> 
> 标签：spring, javabeans, code-injection

我在 Spring 中遇到了一个服务的两个组件的小麻烦。

我有这个组件：

```
@Component
public class SmartCardWrapper 
```

和这个：

```
@Component
public class DummySmartCardWrapper extends SmartCardWrapper 
```

服务自动装配，但由于这种预期，spring 失败：

```
org.springframework.beans.factory.NoSuchBeanDefinitionException: No unique bean of type [com.cinebot.smartcard.SmartCardWrapper] is defined: expected single matching bean but found 2: [dummySmartCardWrapper, smartCardWrapper] 
```

为什么它不使用类名？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T08:48:18.073

这是 Spring 最基本的概念之一——控制反转。

您不需要使用它们的实现类型来声明您的依赖项（以避免与实现耦合）。您可以使用接口或超类来声明它们，并让 Spring 在上下文中找到正确的实现类。

换句话说，bean 没有通过它们的实现类来区分，因为您可能希望更改 bean 的实现类而不更改依赖于它的 bean。如果要区分相同类型的不同 bean，请改用逻辑 bean 名称：

```
@Autowired @Qualifier("smartCardWrapper")
private SmartCardWrapper smardCardWrapper;

@Autowired @Qualifier("dummySmartCardWrapper")
private SmartCardWrapper dummySmardCardWrapper; 
```

# regex - 正则表达式不适用于 grep

> ID：11325450
> 
> 赞同：1
> 
> 时间：2012-07-04T08:40:05.127
> 
> 标签：regex, grep

刚才我正在寻找一个正则表达式，它将检测未用双引号括起来的字符串。我得到了很好的答案`javascript`。我实际上正在尝试使用 grep 运行它，但它不起作用。谁能帮助我为什么这个正则表达式不起作用

示例字符串：`"quick" "brown" fox jumps "over" "the" lazy dog`

我正在尝试运行：`echo "quick" "brown" fox jumps "over" "the" lazy dog | grep -e '(?<![\S"])([^"\s]+)(?![\S"])'`

它没有输出。linux 正则表达式与普通正则表达式有何不同。如何才能做到这一点？请帮忙。请参阅此链接：[http](http://regexr.com?31eg3) ://regexr.com?31eg3相同

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T08:46:29.537

两件事，首先你需要引用整个字符串来回显，或者 shell 去掉双引号。然后你使用 perl 风格的正则表达式，所以你需要告诉 grep 使用它们来匹配`-P`选项。

```
$ echo "quick" "brown" fox jumps "over" "the" lazy dog
quick brown fox jumps over the lazy dog
$ echo "quick" "brown" fox jumps "over" "the" lazy dog | grep -e '(?<![\S"])([^"\s]+)(?![\S"])'
$ echo '"quick" "brown" fox jumps "over" "the" lazy dog' | grep -e '(?<![\S"])([^"\s]+)(?![\S"])'
$ echo '"quick" "brown" fox jumps "over" "the" lazy dog' | grep -P -o -e '(?<![\S"])([^"\s]+)(?![\S"])'
fox
jumps
lazy
dog 
```

在这里我添加了`-o`，所以很清楚匹配的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T08:42:59.460

看看输出`echo`：

```
$ echo "quick" "brown" fox jumps "over" "the" lazy dog
quick brown fox jumps over the lazy dog 
```

试试这个：

```
$ echo '"quick" "brown" fox jumps "over" "the" lazy dog' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T08:42:07.113

第一次更正，将您的字符串括在单引号中：

```
echo '"quick" "brown" fox jumps "over" "the" lazy dog'

user@machine:~$ echo '"quick" "brown" fox jumps "over" "the" lazy dog' 
"quick" "brown" fox jumps "over" "the" lazy dog 
```

然后对 PERL 兼容的正则表达式使用 -P 选项。

```
echo '"quick" "brown" fox jumps "over" "the" lazy dog' | grep -P -o '(?<![\S"])([^"\s]+)(?![\S"])'
fox
jumps
lazy
dog 
```

感谢 @lynxlynxlynx 的 -o 提示，否则它只会显示整个字符串，匹配项以其他颜色突出显示。

# perl - 给定 IP 时 perl gethostbyname

> ID：11325457
> 
> 赞同：1
> 
> 时间：2012-07-04T08:40:49.660
> 
> 标签：perl, gethostbyname

如果在 perl 中为 gethostbyname 函数提供了错误格式的 IP 会发生什么？当给定错误格式的 IP（比如 1.1.1）时，我们的一个脚本表现得很奇怪。在调试时，发现 gethostbyname 在给定 1.1.1 时返回一个值..对此有什么想法吗？...在​​我看来，gethostbyname 应该返回 undef，对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T09:10:59.763

在 IPv4 的开始，在 CIDR 之前，地址被认为是由网络部分和主机部分组成。这些部分可以以点分十进制形式独立编写，不需要完全分解为字节。网络 1 上的主机 1 也是如此`1.1`，相当于`1.0.0.1`或者您也可以将其写为一个 32 位大数字：16777217。曾经有一段时间，人们使用 URL`http://16777127/`来显示他们的聪明程度。当垃圾邮件发送者开始这样做以欺骗过滤器时，这被毁了。

不知何故，当我 ping 时`1.1.1`，它转到`1.1.0.1`. 我会猜到`1.0.1.1`的。我不确定决定它如何分解的规则是什么。

这些旧形式不再被广泛支持（甚至理解），但它们还没有完全从所有工具和库中根除。

PS 在我第一次尝试提交这个答案时，stackoverflow 说：

> 您的帖子包含指向无效域“16777127”的链接。请通过指定完整域或将其包装在代码块中来更正它。

这就是我所说的“没有得到广泛支持”的意思。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T10:04:48.190

数字 IPv4 地址可以写成 1、2、3 或 4 个数字分量。每个非最终组件代表 8 位（1 个八位字节），最终组件代表提供完整 32 位地址所需的位数。因此，以下都表示本地环回地址：

```
2130706433
127.1
127.0.1
127.0.0.1 
```

每个组件本身可以用十进制、十六进制或八进制编写；因此以下都编码相同的地址

```
0x7f000001
127.0x01
0177.0.1
0x7f.0.0.1 
```

# android - 如何在 Android 的 ExpandableListView 中使子节点可点击

> ID：11325459
> 
> 赞同：2
> 
> 时间：2012-07-04T08:40:53.123
> 
> 标签：android, expandablelistview

我正在使用此示例代码 samples\android-8\ApiDemos\src\com\example\android\apis\view\ExpandableList1 。我想单击子节点，但我无法遵循我的代码。你有什么简单的解决方案来处理它吗？

我的代码如下。

```
public class Option_Hakkimizda_Bir extends ExpandableListActivity {

ExpandableListAdapter mAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Set up our adapter
    mAdapter = new MyExpandableListAdapter();
    setListAdapter(mAdapter);
    registerForContextMenu(getExpandableListView());
}

@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
    menu.setHeaderTitle("Sample menu");
    menu.add(0, 0, 0, R.string.expandable_list_sample_action);
}

@Override
public boolean onContextItemSelected(MenuItem item) {
    ExpandableListContextMenuInfo info = (ExpandableListContextMenuInfo) item.getMenuInfo();

    String title = ((TextView) info.targetView).getText().toString();

    int type = ExpandableListView.getPackedPositionType(info.packedPosition);
    if (type == ExpandableListView.PACKED_POSITION_TYPE_CHILD) {
        int groupPos = ExpandableListView.getPackedPositionGroup(info.packedPosition); 
        int childPos = ExpandableListView.getPackedPositionChild(info.packedPosition); 
        Toast.makeText(this, title + ": Child " + childPos + " clicked in group " + groupPos,
                Toast.LENGTH_SHORT).show();
        return true;
    } else if (type == ExpandableListView.PACKED_POSITION_TYPE_GROUP) {
        int groupPos = ExpandableListView.getPackedPositionGroup(info.packedPosition); 
        Toast.makeText(this, title + ": Group " + groupPos + " clicked", Toast.LENGTH_SHORT).show();
        return true;
    }

    return false;
}

/**
 * A simple adapter which maintains an ArrayList of photo resource Ids. 
 * Each photo is displayed as an image. This adapter supports clearing the
 * list of photos and adding a new photo.
 *
 */
public class MyExpandableListAdapter extends BaseExpandableListAdapter {
    // Sample data set.  children[i] contains the children (String[]) for groups[i].
    private String[] groups = { "   Su Yalıtım", "  Isı Yalıtımı", "    Çatı Kaplama Malzemeleri", "    BTM Optigreen Yeşil Catilar","  BTM Schüco Solar Güneş Enerjili Çatı Sistemleri" };
    private String[][] children = {
            { "BTM Su Yalıtım Örtüleri", "BTM PVC Su Yalıtım Örtüsü Polypan", "BTM Surma Esaslı Su Yalıtım Örtüleri" },
            { "BTM Polpan Isı Yalıtım Levhası", "BTMPlus Dış Cephe Isı Yalıtım Sistemi- MANTOLAMA Sistemi" },
            { "BTM Çatı Kaplama Malzemesi Shingle", "Oluklu Bitümlü Çatı Kaplama Malzemesi","BTM Kiremit Altı Su Yalıtım Membranı","BTM Taşlı Çatı Kaplama Örtüsü Poliroof" },
            { "Ekonomik Çatı Çözümü", "Eğimli Çati Çözümü" },
            { "Ince Film Çözümler", "Poli-Mono Kristal Moduller" }
    };

    public Object getChild(int groupPosition, int childPosition) {
        return children[groupPosition][childPosition];
    }

    public long getChildId(int groupPosition, int childPosition) {
        return childPosition;
    }

    public int getChildrenCount(int groupPosition) {
        return children[groupPosition].length;
    }

    public TextView getGenericView() {
        // Layout parameters for the ExpandableListView
        AbsListView.LayoutParams lp = new AbsListView.LayoutParams(
                ViewGroup.LayoutParams.MATCH_PARENT, 64);

        TextView textView = new TextView(Option_Hakkimizda_Bir.this);
        textView.setLayoutParams(lp);
        //textView.setTextSize((float) 11.5);
        // Center the text vertically
        textView.setGravity(Gravity.CENTER_VERTICAL | Gravity.LEFT);
        // Set the text starting position
        textView.setPadding(36, 0, 0, 0);
        return textView;
    }

    public View getChildView(int groupPosition, int childPosition, boolean isLastChild,
            View convertView, ViewGroup parent) {
        TextView textView = getGenericView();
        textView.setText(getChild(groupPosition, childPosition).toString());
        textView.setTextSize((float) 13.0);
        //convertView.setBackgroundColor(getResources().getColor(R.color.white));
        return textView;

    }

    public Object getGroup(int groupPosition) {
        return groups[groupPosition];
    }

    public int getGroupCount() {
        return groups.length;
    }

    public long getGroupId(int groupPosition) {
        return groupPosition;
    }

    public View getGroupView(int groupPosition, boolean isExpanded, View convertView,
            ViewGroup parent) {
        TextView textView = getGenericView();
        textView.setText(getGroup(groupPosition).toString());
        textView.setTextSize((float) 15.0);
        return textView;
    }

    public boolean isChildSelectable(int groupPosition, int childPosition) {
        return true;
    }

    public boolean hasStableIds() {
        return true;
    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-11T10:22:37.150

您是否尝试过子视图中的 onItemClick ？

# css - 动态 Web 项目 Eclipse 的 XHTML 文件中 CSS 的方式和位置

> ID：11325461
> 
> 赞同：2
> 
> 时间：2012-07-04T08:40:54.940
> 
> 标签：css, eclipse, jsf, xhtml

我正在尝试以多种方式将 css 文件链接到 xhtml 页面，但我没有想要工作。这是项目的文件夹结构：

```
Project
   Java serources
   WebContent
   **index.xhtml**
      META-INF
      WEB-INF
      style
         **style.css** 
```

现在在 index.xhtml 文件中我有： `<link rel="stylesheet" href="style/style.css" />`

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T08:51:00.470

在下添加`resources`文件夹`WebContent`

并在里面`resources`创建`css`文件夹

然后像这样访问文件

```
<h:outputStylesheet library="css" name="myNewStylesFile.css" target="head" /> 
```

这是 JSF 2.0 中的教程[资源（库）](http://www.mkyong.com/jsf2/resources-library-in-jsf-2-0/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:16:43.130

按照我在下面提到的方式放置您的链接标签：

```
<link href="style/style.css" rel="stylesheet" type="text/css"/> 
```

# linq - 如何使用 Linq 而不是 foreach 从嵌套集中获取项目？

> ID：11325463
> 
> 赞同：0
> 
> 时间：2012-07-04T08:41:05.353
> 
> 标签：linq, foreach

我有多个嵌套的 foreach 循环进行一些处理，如何将此表达式转换为 Linq？

```
slug.Text = "";
foreach (var script in slugItem.script) {
 foreach (var body in script.body) {
  foreach (var vo in body.vo) {
   foreach (var content in vo.content) {
    foreach (var text in content.text) {
     slug.Text = string.Format("{0}\n{1}", slug.Text, text.Value);
    } } } } } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T08:47:26.657

```
slug.Text = string.Join("\n", slugItem.script.SelectMany(i=>i.body)
                                             .SelectMany(i=>i.vo)
                                             .SelectMany(i=>i.content)
                                             .SelectMany(i=>i.text)
                                             .SelectMany(i=>i.Value)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T08:57:38.147

为什么要使用 Linq，它会添加什么？但是，我会使用`StringBuilder`

```
var slugtext = new StringBuilder();

foreach (var script in slugItem.script) 
{   
    foreach (var body in script.body) 
    {    
        foreach (var vo in body.vo) 
        {     
            foreach (var content in vo.content)
            {      
                foreach (var text in content.text)
                {       
                    slugText.AppendLine(text.Value);
                }
            }
        }
    }
}

 slug.Text = slugText.ToString(); 
```

# java - java.lang.reflect.InvocationTargetException

> ID：11325466
> 
> 赞同：0
> 
> 时间：2012-07-04T08:41:21.500
> 
> 标签：java, html, applet, invocationtargetexception

我有一个带有一些按钮的小程序，这些按钮有图像图标。我还用这个小程序制作了一个 HTML 文件。每当我从服务器（Apache tomcat）打开此页面时，都会发生异常：

```
java.lang.reflect.InvocationTargetException. 
```

但是，如果我在没有图标的情况下运行，则没有问题。谁能帮助我，以便我可以加载带有按钮图标的小程序？

```
Image myImage = getToolkit().createImage("image/REC1.jpg");

ImageIcon myIcon = new ImageIcon(myImage);
button.setIcon(myIcon); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:30:43.627

[`Toolkit.createImage(String)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Toolkit.html#createImage%28java.lang.String%29)：

> 返回从指定**文件获取像素数据的图像。**返回的 Image 是一个新对象，不会与此方法的任何其他调用者或其 getImage 变体共享。
> 
> 此方法首先检查是否安装了**安全管理**器。如果是这样，该方法`checkRead`使用指定的文件调用安全管理器的方法，以确保允许创建映像。

我把两部分加粗：

*   **文件**- 只指向运行小程序的计算机的本地文件系统。所以不适合小程序中的图标 - 它们必须在服务器上。和..
*   **安全管理器**- 不允许沙盒小程序读取或写入本地文件系统。这可能是缺少的堆栈跟踪的重要部分。

## 小程序资源访问

如果是沙盒，小程序需要通过**URL 从“主服务器”加载资源。**

图标可能是嵌入资源，在元素`archive`属性中引用的 Jar 中`applet`，但如果它们作为图像加载到服务器，则可以相对于文档库或代码库访问它们。这是在包含 HTML 的目录`REC1.jpg`的`image`子目录中命名的图像的外观。

```
URL url = new URL(getDocumentBase(), "image/REC1.jpg");
Image myImage = getToolkit().createImage(url); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:48:00.160

您也可以使用 .PNG 文件格式。并使用小写字母作为文件名。

# networking - 计算 WiFi 网络中节点的延迟

> ID：11325472
> 
> 赞同：1
> 
> 时间：2012-07-04T08:41:39.323
> 
> 标签：networking, wifi, latency

我已经有了答案，但想知道是否有更好的方法。问题是：我有一组客户端在相对较慢的 WiFi 网络上。每个客户端到接入点 (AP) 的距离决定了客户端到 AP 链接的运行速度。较短的链接比较长的链接运行得更快。

我的目标是让每个节点计算自己的链接长度（以及网络中所有节点的长度）。节点可以相互交谈，但总是通过 AP，当然。了解节点和 AP 之间的距离后，我们只需将最差的节点移近接入点即可优化网络。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T14:30:13.557

1.  [按照http://www.tkn.tu-berlin.de/fileadmin/fg112/Papers/hoene_paper2.pdf](http://www.tkn.tu-berlin.de/fileadmin/fg112/Papers/hoene_paper2.pdf)的建议使用往返时间。
2.  阅读 Wi-Fi 信号强度并使用公式将其计算为[如何使用信号强度计算与 Wifi 路由器的距离？](https://stackoverflow.com/questions/11217674/how-to-calculate-distance-from-wifi-router-using-signal-strength)建议。

# objective-c - iPhone上NSOperationQueue中的AFNetworking同步操作

> ID：11325473
> 
> 赞同：1
> 
> 时间：2012-07-04T08:41:41.407
> 
> 标签：objective-c, concurrency, nsoperation, nsoperationqueue, afnetworking

我的应用程序是这样工作的： - 创建一个相册并拍照 - 在我的服务器上发送它们 - 在图片分析后获得答案/补充信息。

我对发送部分有一些问题。这是代码

```
@interface SyncAgent : NSObject <SyncTaskDelegate>

@property  NSOperationQueue* _queue;
-(void)launchTasks;

@end

@implementation SyncAgent

@synthesize _queue;

- (id)init
{
    self = [super init];
    if (self) {
        self._queue = [[NSOperationQueue alloc] init];
        [self._queue setMaxConcurrentOperationCount:1];
    }
    return self;
}

-(void) launchTasks {

    NSMutableArray *tasks = [DataBase getPendingTasks];

    for(Task *t in tasks) {
        [self._queue addOperation:[[SyncTask alloc] initWithTask:t]];
    }
}
@end 
```

和 SyncTask ：

```
@interface SyncTask : NSOperation

@property (strong, atomic) Task *_task;
-(id)initWithTask:(Task *)task;
-(void)mainNewID;
-(void)mainUploadNextPhoto:(NSNumber*)photoSetID;

@end

@implementation SyncTask

@synthesize _task;

-(id)initWithTask:(Task *)task {
    if(self = [super init]) {
        self._task = task;
    }
    return self;
}

-(void)main {

    NSLog(@"Starting task : %@", [self._task description]);
    // checking if everything is ready, sending delegates a message etc

    [self mainNewID];
}

-(void)mainNewID {

    __block SyncTask *safeSelf = self;

    [[WebAPI sharedClient] createNewPhotoSet withErrorBlock:^{
        NSLog(@"PhotoSet creation : error")
    } andSuccessBlock:^(NSNumber *photoSetID) {
        NSLog(@"Photoset creation : id is %d", [photoSetID intValue]);
        [safeSelf mainUploadNextPhoto:photoSetID];
    }];
}

-(void)mainUploadNextPhoto:(NSNumber*) photoSetID {

    //just admit we have it. won't explain here how it's done
    NSString *photoPath;

    __block SyncTask *safeSelf = self;

    [[WebAPI sharedClient] uploadToPhotosetID:photoSetID withPhotoPath:photoPath andErrorBlock:^(NSString *photoPath) {
        NSLog(@"Photo upload error : %@", photoPath);

    } andSuccessBlock:^(NSString *photoPath) {

        NSLog(@"Photo upload ok : %@", photoPath);
        //then we delete the file
        [safeSelf mainUploadNextPhoto:photoSetID];
    }];
}
@end 
```

每个网络操作都使用 AFNetworking 以这种方式完成：

```
-(void)myDummyDownload:(void (^)(NSData * data))successBlock
{
    AFHTTPClient* _httpClient = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:@"http://www.google.com/"]];
    [_httpClient registerHTTPOperationClass:[AFHTTPRequestOperation class]];

    NSMutableURLRequest *request = [_httpClient requestWithMethod:@"GET" path:@"/" nil];
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];

    AFHTTPRequestOperation *operation = [_httpClient HTTPRequestOperationWithRequest:(NSURLRequest *)request
        success:^(AFHTTPRequestOperation *operation, id data) {
            if(dataBlock)
                dataBlock(data);
        } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
            NSLog(@"Cannot download : %@", error);
    }];

    [operation setShouldExecuteAsBackgroundTaskWithExpirationHandler:^{
        NSLog(@"Request time out");
    }];

    [_httpClient enqueueHTTPRequestOperation:operation];
} 
```

`[self._queue setMaxConcurrentOperationCount:1]`我的问题是：我的连接是异步进行的，因此每个任务都是一起启动的，即使使用in也无需等待前一个任务完成`SyncAgent`。

我需要同步执行每个连接吗？我认为这不是一个好主意，因为永远不应该以这种方式进行连接，还因为我可能会在其他地方使用这些方法并需要在后台执行它们，但我找不到更好的方法。任何的想法 ？

哦，如果我的代码中有任何错误/错别字，我可以向您保证，它是在我尝试在粘贴之前对其进行总结时出现的，它现在可以正常工作。

谢谢 ！

PS：抱歉，我找不到更好的方法来解释问题。

编辑：我发现使用信号量更容易设置和理解：[如何等待异步调度的块完成？](https://stackoverflow.com/questions/4326350/how-do-i-wait-for-an-asynchronously-dispatched-block-to-finish "如何等待异步调度的块完成？")

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T14:13:22.083

如果你对服务器有任何控制权，你真的应该考虑创建一个 API，允许你以任意顺序上传照片，以支持多个同时上传（对于大批量来说，这可能会更快一些）。

但是，如果您必须同步执行操作，最简单的方法可能是将新请求排入请求的完成块中。IE

```
// If [operations length] == 1, just enqueue it and skip all of this
NSEnumerator *enumerator = [operations reverseObjectEnumerator];
AFHTTPRequestOperation *currentOperation = nil;
AFHTTPRequestOperation *nextOperation = [enumerator nextObject]; 
while (nextOperation != nil && (currentOperation = [enumerator nextObject])) {
  currentOperation.completionBlock = ^{
    [client enqueueHTTPRequestOperation:nextOperation];
  }
  nextOperation = currentOperation;
}
[client enqueueHTTPRequestOperation:currentOperation]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T08:50:41.300

以下代码对我有用，但我不确定缺点。用少许盐服用。

```
 - (void) main {

  NSCondition* condition = [[NSCondition alloc] init];  
  __block bool hasData = false;
  [condition lock];

  [[WebAPI sharedClient] postPath:@"url" 
                        parameters:queryParams 
                           success:^(AFHTTPRequestOperation *operation, id JSON) {
                             //success code
                             [condition lock];
                             hasData = true;
                             [condition signal];
                             [condition unlock];

                           } 
                           failure:^(AFHTTPRequestOperation *operation, NSError *error) {

                             //failure code

                             [condition lock];
                             hasData = true;
                             [condition signal];
                             [condition unlock];
                           }];

  while (!hasData) {
    [condition wait];
  }
  [condition unlock];

} 
```

# c++ - 如何对模板类中的不同模板参数执行不同的操作？

> ID：11325478
> 
> 赞同：2
> 
> 时间：2012-07-04T08:41:53.613
> 
> 标签：c++, templates, typeid

如果我想制作一个模板类，并且根据模板参数的 typeid 执行不同的操作，那么我该如何编码呢？

例如，我有以下模板类，我想在其中初始化成员字段数据，具体取决于它是 int 还是 string。

```
#include <string>

template <class T>
class A
{
private:
    T data;
public:
    A();
};

// Implementation of constructor
template <class T>
A<T>::A()
{
    if (typeid(T) == typeid(int))
    {
        data = 1;
    }
    else if (typeid(T) == typeid(std::string))
    {
        data = "one";
    }
    else
    {
        throw runtime_error("Choose type int or string");
    }
} 
```

但是，此代码无法使用以下主文件进行编译。

```
#include "stdafx.h"
#include "A.h"
#include <string>

int _tmain(int argc, _TCHAR* argv[])
{
    A<int> one;
    return 0;
} 
```

错误是：error C2440: '=' : cannot convert from 'const char [2]' to 'int'，这意味着代码实际上正在检查 else-if 语句中的 int，即使它永远无法到达代码的那部分。

接下来，按照这个例子（[根据模板变量类型执行不同的方法](https://stackoverflow.com/questions/11021267/perform-different-methods-based-on-template-variable-type)），我尝试了下面的 Ah 文件，但是我得到了几个链接器错误，提到 A(void) 已经在 A.obj 中定义。

```
#include <string>

template <class T>
class A
{
private:
    T data;
public:
    A();
    ~A();
};

// Implementation of constructor
template <>
A<int>::A()
{
    data = 1;
}
template <>
A<std::string>::A()
{
    data = "one";
} 
```

有人知道如何启动并运行此代码吗？我还意识到在模板类中使用这样的 if-else 语句可能会削弱模板的力量。有没有更好的编码方法？

编辑：与 Torsten（下）讨论后，我现在有以下 Ah 文件：

```
#pragma once

#include <string>

// Class definition
template <class T>
class A
{
public:
    A();
    ~A();
private:
    T data;
};

// Implementation of initialization
template < class T > 
struct initial_data
{
  static T data() { throw runtime_error("Choose type int or string"); }
};

template <> 
struct initial_data< int >
{
    static int data() { return 1; }
};

template <> 
struct initial_data< std::string >
{
    static std::string data() { return "one"; }
};

// Definition of constructor
template <class T>
A<T>::A()
  : data( initial_data< T >::data() ) 
{
} 
```

以及以下主要内容：

```
#include "stdafx.h"
#include "A.h"
#include <string>

int _tmain(int argc, _TCHAR* argv[])
{
    A<int> ione;

    return 0;
} 
```

我现在得到的链接器错误是：Test template 4.obj : error LNK2019: unresolved external symbol "public: __thiscall A::~A(void)" (??1?$A@H@@QAE@XZ) referenced in函数_wmain

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T09:10:14.567

明确的专业化是要走的路。

我假设您将 Ah 包含在几个 .cpp 中，这就是您的问题的根本原因。

专业化是定义，A::A() 和 A::A() 必须只有一个定义，因此它们只能在一个 .cpp 中。

您必须在 .cpp 中移动显式专业化

```
template <>
A<int>::A()
{
    data = 1;
}
template <>
A<std::string>::A()
{
    data = "one";
} 
```

并在 Ah 中为他们保留一份声明

```
template<> A<int>::A();
template<> A<std::string>::A(); 
```

这样编译器就知道它们是明确专门化的，并且不会尝试添加自动的。

编辑：对于这四个文件， g++ m.cpp f.cpp a.cpp 没有显示任何错误。

```
// a.h
#define A_H

#include <string>

template <class T>
class A
{
private:
    T data;
public:
    A();
};

template<> A<int>::A();
template<> A<std::string>::A();

#endif

// a.cpp
#include "a.h"

template <>
A<int>::A()
{
    data = 1;
}
template <>
A<std::string>::A()
{
    data = "one";
}

// f.cpp
#include "a.h"

int f()
{
    A<int> one;
    A<std::string> two;
}

// m.cpp
#include "a.h"

int f();

int main()
{
    A<int> one;
    A<std::string> two;
    f();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T09:13:13.930

您在第二个解决方案中是正确的，您需要的是模板专业化（将声明和实现放在一起）：

```
#include <string>

template <class T>
class A
{
private:
    T data;
public:
    A();
    ~A();
};

template <>
class A <std::string>
{
private:
  std::string data;
public:
  A() { data = "one"; }
};

template <>
class A <int>
{
private:
  int data;
public:
  A() { data = 1; }
}; 
```

如果我可以建议一个更优雅的解决方案，那么我会向构造函数添加一个参数并避免模板专业化：

```
template <class T>
class A
{
private:
    T data;
public:
    A( T value ) : data( value ) {}
    virtual ~A() {}
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T09:11:41.013

如果它只是你想要的行为依赖于 T 的 c'tor，我建议将其分解为不同的结构：

```
template < class T > 
struct initial_data
{
  static T data() { throw runtime_error("Choose type int or string"); }
};

template <> 
struct initial_data< int >
{
    static int data() { return 1; }
}

template <> 
struct initial_data< std::string >
{
    static std::string data() { return "1"; }
} 
```

如果您在其模板参数上专门化一个类，则不同的专门化是完全不同的类型，并且可以具有不同的数据和功能集。

最后：

```
template <class T>
A<T>::A()
  : data( initial_data< T >::data() ) 
{
} 
```

亲切的问候托尔斯滕

# rubygems - 如何控制 Vagrant 用于配置 VM 的 Chef 版本？

> ID：11325479
> 
> 赞同：70
> 
> 时间：2012-07-04T08:41:56.013
> 
> 标签：rubygems, chef-infra, vagrant

由于版本 0.10.10 中的错误，当前的 Chef 食谱未运行。如何将 Vagrant 使用的 Chef 版本升级到 0.10.12？

我不想只为当前的虚拟机实例更新它——我一直在破坏和重建它们。我是否需要更改 Vagrant 基础盒中的某些内容，或者我的（物理）系统安装中的某些内容？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-08-13T15:43:21.393

使用 Vagrant 插件[vagrant-omnibus](https://github.com/schisamo/vagrant-omnibus)对我来说非常有用：

```
vagrant plugin install vagrant-omnibus 
```

然后，您可以在进行配置之前在 Vagrantfile 中简单地配置您的主厨版本：

```
config.omnibus.chef_version = :latest 
```

您还可以指定特定版本：

```
config.omnibus.chef_version = '11.6.0' 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-05-06T15:10:37.563

添加行

```
config.vm.provision :shell, :inline => 'apt-get install build-essential ruby1.9.1-dev --no-upgrade --yes'
config.vm.provision :shell, :inline => "gem install chef --version 11.4.2 --no-rdoc --no-ri --conservative" 
```

在你的块之前到你的 Vagrantfile `config.vm.provision :chef_solo`。

支持 hauraki 对[http://dougireton.com/blog/2012/12/23/automatically-upgrading-chef-client-on-vagrant-up/的评论](http://dougireton.com/blog/2012/12/23/automatically-upgrading-chef-client-on-vagrant-up/)

编辑以包括杰森梅菲尔德的评论。确保也给他一个赞成票。我添加`--no-upgrade`以加快速度并匹配`--conservative`第二行。您可以改为执行 Jason 所做的操作，并同时删除`--no-upgrade`and `--conservative`。

编辑以包括匿名用户的建议编辑228653

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2012-07-14T16:40:54.140

重建基础箱。首先，在没有配置和 SSH 的情况下启动它。

```
vagrant up --no-provision 
vagrant ssh 
```

然后，执行更新框所需的命令。这可以包括更新 Chef 和 Ruby。（可选）更新操作系统的软件包等。您应该清理所有不需要的东西，例如下载的软件包文件或缓存。

例如，我在我的 Vagrant 盒子（最初使用[VeeWee 构建）中使用 Opscode Omnibus](http://github.com/jedi4ever/veewee) [Full Stack Installer for Chef](http://opscode.com/chef/install)，并且我也更新了软件包。

```
sudo dpkg --purge chef chef-full
sudo true && curl -L https://www.opscode.com/chef/install.sh | sudo bash
sudo apt-get update && sudo aptitude safe-upgrade
sudo rm /var/cache/apt/archives/*.deb 
```

不要忘记将磁盘“归零”以减小大小。

```
# a bunch of commands like gem install chef, apt-get upgrade, whatever
sudo dd if=/dev/zero of=/EMPTY bs=1M
sudo rm /EMPTY
exit 
```

然后，将盒子打包，添加到你的 Vagrant 环境中使用。

```
vagrant package
vagrant box add mynewlucid32 package.box 
```

如果你想使用相同的盒子名称，你需要先删除现有的盒子（~/.vagrant.d/boxes/BOXNAME）。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-04-10T07:19:02.673

使用 Chef 进行配置时，您可以指定许多[选项。](http://docs.vagrantup.com/v2/provisioning/chef_common.html)其中之一是`version`，它允许您指定所需的 Chef 版本。

例如，请参阅我的`chef.version`摘录中的行`Vagrantfile`：

```
config.vm.provision :chef_solo do |chef|
   chef.version = "10.14.2"
   chef.cookbooks_path = "cookbooks"
   chef.add_recipe("vagrant_main")
 end 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-06-27T23:44:15.807

我无法对答案发表评论，但我想在上面 Bryan Larsen 的答案中添加注释。为了让他的配置命令正常工作，我需要在它之前添加一行，以便能够在安装新的 Chef 版本期间构建 gem 原生扩展。因此，变成了：

```
config.vm.provision :shell, inline: 'apt-get install ruby1.9.1-dev'
config.vm.provision :shell, inline: 'gem install chef --version 11.4.4 --no-rdoc --no-ri' 
```

这是在 Ubuntu 13.04 上，以防对任何人都很重要。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-07T00:41:03.277

如果您使用的是 Chef Test Kitchen，那么您可以在`.kitchen.yml`文件中指定 Chef 版本，如下所示：

```
provisioner:
  name: chef_zero
  require_chef_omnibus: 12.6.0 
```

# android - 如何使用意图设置相机分辨率？

> ID：11325481
> 
> 赞同：3
> 
> 时间：2012-07-04T08:42:03.193
> 
> 标签：android, camera, android-camera, android-camera-intent

我的应用程序正在使用此 Intent 拍照：

```
Intent i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
i.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, saveUri);
startActivityForResult(i, cameraData); 
```

有没有办法设置相机的分辨率？

任何建议将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:04:36.460

首先分辨率意味着捕获我期望的大小，而不是预览大小..对吗？？

好像，不，您不能这样做，因为您使用的是默认相机活动，如果您想自己设置，您需要编写自己的自定义代码，您可以在其中设置任何您想要的。顺便说一句，如果您正在打开默认的相机活动，我认为他们自己可以找到一些选项来设置分辨率（通过菜单或表面按钮），这些选项因设备而异。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-04T08:50:52.710

您不能使用 Intent 方法执行此操作。

但是您可以更改分辨率，如果您在自己的应用程序中使用相机。

```
 Camera.Parameters parameters = camera.getParameters();
 parameters.setPreviewSize(x, y);
 camera.setParameters(parameters); 
```

# java - 在Java中获取图像上传文件类型

> ID：11325483
> 
> 赞同：1
> 
> 时间：2012-07-04T08:42:11.233
> 
> 标签：java, jsp, file-upload, struts2

上传文件后，它会以 .tmp 文件的形式存储在临时目录中。

如何获得上传文件的实际文件类型？我需要从服务器端知道它是否是 bmp、jpeg、png 等。

**注意：**我也在使用 Struts 2 版本 2.1.8.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T08:54:02.053

尝试触摸它的哑剧类型

```
File f = new File("temp.tmp");
System.out.println("Mime Type of " + f.getName() + " is " + new MimetypesFileTypeMap().getContentType(f)); 
```

输出应该是这样的：`image/gif`或`image/png`或`image/jpg`等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T09:01:29.517

除了 Truong Ha 的回答（MimetypesFileTypeMap 需要activation.jar），还有其他一些方法：

[http://www.rgagnon.com/javadetails/java-0487.html](http://www.rgagnon.com/javadetails/java-0487.html)

干杯，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T08:47:05.230

在 JSP 上，如果你有

```
<s:form action="fileUpload" method="post" enctype="multipart/form-data" >

  <s:file name="userFile" label="File" />

  <s:submit />

</s:form> 
```

在您的 ActionClass 中，您需要添加

```
public void setUserFileContentType(String userImageContentType) {
    this.userImageContentType = userImageContentType;
}
public void setUserFileFileName(String userImageFileName) {
    this.userImageFileName = userImageFileName;
} 
```

然后您将可以访问上传文件的文件名和内容类型

# iphone - “Latte Art - iPhone app”中使用的效果名称是什么？iphone应用程序怎么做？

> ID：11325485
> 
> 赞同：0
> 
> 时间：2012-07-04T08:42:15.220
> 
> 标签：iphone, cocos2d-iphone

首先，我将提供应用程序视频[链接](http://www.youtube.com/watch?v=GK94HSM2AD8)。此应用程序中使用的效果名称是什么？我怎样才能在 iPhone 应用程序中实现这种效果？

感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:18:20.920

我不知道所有效果的具体名称是什么，似乎使用了多种图像处理技术。

看起来像 Photoshop 液化滤镜的位是纹理映射的一种形式，即将纹理映射到 2d 网格。在这种情况下，拖动屏幕会使网格中的顶点变形，从而使图像变形。控制网格中的顶点越多，扭曲的细节就越精细。

查看纹理映射和（因为它是 iOS）glsl 着色器。

# php - MySQL 查询语法 多个 where 和 or。完整性检查？

> ID：11325487
> 
> 赞同：0
> 
> 时间：2012-07-04T08:42:32.430
> 
> 标签：php, mysql

我确信可以对我的查询进行广泛优化，但不能说出我的想法。

我所拥有的是为我的成员提供的类似帖子/评论的概念。他们可以选择与特定的人或所有人共享它。所以从这里我知道我的查询可能会导致重复的结果（如果我能让它首先工作的话）。我需要在查找用户 ID 时获得一个独特的“ciID”，以及在其他地方提到的任何潜在 ID。出于 3 个不同的原因，成员的 ID 存储在 3 个不同的列中。

mID 是成员自己，然后 sharedWith 和 whos_with 有点为自己说话。我将 id 存储在 sharedWith 和 whos_with 中，`1111:2222:3333`但总而言之，我必须在所有 3 列中搜索共享的成员 ID 和 whos 列，以确保获得通过数组中的函数传递的 ID 的所有结果。在通过循环构建查询之后，我想出了一个类似的查询

```
select DISTINCT(ciID),* from user_posting 
where (mID = 21 OR sharedWith LIKE '%21%' OR whosWith LIKE '%21%') 
or (mID = 22 OR sharedWith LIKE '%22%' OR whosWith LIKE '%22%') 
or (mID = 45 OR sharedWith LIKE '%45%' OR whosWith LIKE '%45%')
limit 1 
```

在某处我有一个我没有注意到的语法错误，我需要一双眼睛来帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T08:47:04.363

这绝对是错误的：

```
select DISTINCT(ciID),* from user_posting 
```

它应该是：

```
select DISTINCT(up.ciID), up.* from user_posting up 
```

但是我不太确定这是否会返回预期的结果。

我认为你需要重新设计你的表结构。使用 LIKE 进行选择并不能很好地扩展。

# web-services - java中的WebServices客户端？

> ID：11325492
> 
> 赞同：0
> 
> 时间：2012-07-04T08:42:44.853
> 
> 标签：web-services

我想要一个创建 WebServices 客户端的解决方案，它需要使用已经存在的服务。我有来自 Netbeans ide 的代码，但我的要求是 wsdl url 必须是动态的，更具体的它需要从 .xml 中获取，请建议我这样做动态..cheers

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:46:11.517

如果您正在构建一个 Java EE 应用程序，您可以在 Netbeans 中创建一个 Web 服务客户端。否则，您需要自己编写代码或使用外部工具或库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:07:44.053

1.  您需要解析 XML 并从中读取 WSDL URL，您可以在网上找到如何从 XML 中读取数据
2.  完成后，使用从 XML 获得的 URL，您可以调用服务端点（您已经拥有的代码）

# jquery - 如何使用 Perl 将数据返回到 AJAX 调用？

> ID：11325494
> 
> 赞同：3
> 
> 时间：2012-07-04T08:42:51.117
> 
> 标签：jquery, html, ajax, perl

我有一个 HTML 文件，它生成一个网页。用户可以在网页上输入一些评论。为了保存评论，我使用 JQuery/AJAX 调用 perl 脚本。这将在数​​据库中添加一行。

添加记录后，在 perl 脚本中，我再次获取相同的记录。现在我想在我的页面中显示该记录而不刷新页面。（我知道我们可以在 jquery 中使用 append） 我的问题是如何将该记录从 perl 返回到 HTML 页面，包括 HTML 标记和所有。

这是将添加新记录的部分。

```
<span class="requester"> 
    <span>**message**</span> 
    </br>
    <i> - **username**  </i>
    <button class="deleteResponse" id="id"> delete </button> 
    <hr>
 </span> 
```

消息和用户名是我将从 MYSQL 查询中获得的项目。\

这是我用来显示数据的。

```
 $("#"+getpID+" textarea ").before(htmlcode).fadeIn(); 
```

和html代码是

```
var htmlcode = '<span class="requester"> <span>message</span> </br>     <i> - username 0 seconds ago </i> <button class="deleteResponse" id="id"> delete </button> <hr> </span>'; 
```

我希望从 perl 脚本返回数据而不是 htmlcode。任何帮助将不胜感激。谢谢萨普纳

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T09:06:55.230

您的 Perl 脚本需要打印您希望通过 AJAX 调用返回的数据。这是基本的CGI。

```
#!/usr/bin/perl
use strict;
use warnings;
use CGI;
my $cgi = CGI->new;

# do your database stuff here

my $result = "HTML CODE"; # this is your result

print $cgi->header('text/html');
print $result; 
```

在您的[AJAX 调用](http://api.jquery.com/jQuery.get/)中，执行以下操作（我从 jQuery 文档中提取）：

```
$.get('ajax/test.html', function(data) {
  $("#"+getpID+" textarea ").before(data).fadeIn();
  alert('Load was performed.');
}); 
```

请注意，我没有对此进行测试。

# gwt - 定位弹出 GWT

> ID：11325495
> 
> 赞同：2
> 
> 时间：2012-07-04T08:42:53.373
> 
> 标签：gwt

如何将 Popup 定位在 GWT 中的鼠标单击位置。我尝试在 flextable 上使用 getX 和 getY 并将 Popup 设置到该位置，但这不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:59:17.777

快速示例：

```
final RootLayoutPanel rootLayoutPanel = RootLayoutPanel.get();

final FocusPanel focusPanel = new FocusPanel();

/* just to make the clickable area visible */
focusPanel.getElement().getStyle().setBackgroundColor("red");

rootLayoutPanel.add(focusPanel);

final PopupPanel popupPanel = new PopupPanel();
popupPanel.add(new Label("Popup"));
popupPanel.show();

focusPanel.addClickHandler(new ClickHandler() {

  @Override
  public void onClick(final ClickEvent event) {
    final int left = event.getClientX();
    final int top = event.getClientY();

    popupPanel.setPopupPosition(left, top);
  }
}); 
```

笔记：

*   添加focusPanel后一定要显示PopupPanel，否则会在focusPanel后面。
*   我在这里使用 RootLayoutPanel，但您也可以相对于不同的元素工作（使用`left = event.getRelativeX(myContextElem);`等）
*   如果您不想使用 FocusPanel（具有 ClickHandlers），您也可以使用 MouseDownHandler，但在这种情况下，您需要调用`sinkEvents(Event.ONMOUSEDOWN)`.

# php - 计算时间戳之间的差异

> ID：11325496
> 
> 赞同：0
> 
> 时间：2012-07-04T08:42:54.130
> 
> 标签：php, html, database, codeigniter, timestamp

我创建了注册页面，当用户单击提交按钮时，激活链接将发送到他的电子邮件，因此时间戳存储在数据库中。如果用户单击该激活链接，我必须检查该链接是在 24 小时之前还是之后单击的。我的代码：-

```
function confirmEmail($activation_code){
        $this->load->database();
        $this->load->helper('date');
        echo "activation link will be checked and accordingly flag will be set.";
        $activation_sent_timestamp=$this->db->query("SELECT activation_timestamp FROM tbl_user_registration WHERE email_verification_code='$activation_code'");
        foreach($activation_sent_timestamp->result() as $res){
            $activation_time_from_db=$res->activation_timestamp;
        }
        echo $activation_time_from_db."\n\r";
        $now = time();
        $human = unix_to_human($now);
        echo $human;
        $difference = ($human-$activation_time_from_db);
        if($difference < 24) {
               echo "correct"
        }
        else echo "Link expired";
    } 
```

我正在使用代码点火器。我该怎么做，这段代码没有显示任何错误，但我不知道这是计算 24 小时的正确方法，我正在检查但没有得到任何东西。请检查代码。

**解决了........ ：）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:50:07.593

[unix_to_human()](http://codeigniter.com/user_guide/helpers/date_helper.html)只返回人类可读形式的时间戳

最简单的方法是，找出两个时间戳之间的差异，转换为 hrs 并检查是否小于 24hrs

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:47:31.553

您可能想使用`date_diff`

见这里：[DATE_DIFF()](http://php.net/manual/en/function.date-diff.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T08:49:41.130

您可以使用 diff 计算差异，也可以更改时间格式

```
$datetime1 = new DateTime('2009-10-11');
$datetime2 = new DateTime('2009-10-13');
$interval = $datetime1->diff($datetime2);
echo $interval->format('%R%a days'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T08:49:52.283

将两个时间戳转换为 php *date('Ymd')*格式，然后尝试**date_diff**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T09:08:45.787

您可以在查询中使用 mysql timediff 函数。
看看你的情况，你可以这样做，正如我在这篇文章中回答的那样

[在 mysql 和 php 中寻找空闲时间块？](https://stackoverflow.com/questions/11262260/finding-free-blocks-of-time-in-mysql-and-php/11263079#11263079)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-04T09:10:34.900

```
$time = time();

$seconds = 86400 // seconds of 24 Hours

SELECT * FROM tbl_user_registration WHERE ( $time - UNIX_TIMESTAMP( activation_timestamp ) >= $seconds ) 
```

# java - 通过 3G 网络发送数据包

> ID：11325497
> 
> 赞同：0
> 
> 时间：2012-07-04T08:42:55.033
> 
> 标签：java, networking, communication

我正在尝试编写一种方法，该方法将通过带有基站的 3G 网络向服务器发送消息。IM 尝试多次发送消息，直到我决定停止。但是当我对此进行测试时，它总是在短时间内停止并停止发送消息。有谁知道为什么？

```
private Runnable commRunnable = new Runnable() {
public void run() {
    try {
        String message = "Just saying hello!";
        PrintWriter out = new PrintWriter( new BufferedWriter( new OutputStreamWriter(socket.getOutputStream())), true);

        String startReceivingMessage = "Begin sending me data.";
        String stopReceivingMessage = "Stop sending me data.";

        startSend = false;
        stopSend = false;
        startReceive = false;
        stopReceive = false;

        while (!shouldDisconnect) {
            if (startSend) {
                sendData = true;
                startSend = false;
            }
            if (stopSend) {
                sendData = false;
                stopSend = false;
            }

            // Send a message that the server should start transmitting data
            // back to us. We only need to transmit this message once.
            if (startReceive) {
                out.println(startReceivingMessage);
                startReceive = false;
                receiveData = true;
                Thread receiveThread = new Thread(receiveRunnable);
                receiveThread.start();

            // Tell the server to stop transmitting data.
            } else if (stopReceive) {
                out.println(stopReceivingMessage);
                stopReceive = false;
                receiveData = false;
            }

            if (sendData) {
                out.println(message);
            }

            Thread.sleep(20);
        }                               
    } catch (Exception e) {
        Log.e("PowerMonitor", e.toString());
    } finally {
        try {
            socket.close();
            connected = false;
        } catch (Exception e) {
            Log.e("PowerMonitor", e.toString());
        }
    }
} 
```

};

```
private Runnable receiveRunnable = new Runnable() {
    @Override
    public void run() {
        try {
            BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
            String reply = "";
            Log.d("PowerMonitor", "Starting to receive");
            while (receiveData) {
                Log.d("PowerMonitor", "Listening...");
                reply = in.readLine();
                Log.d("PowerMonitor", "Got message: " + reply);
            }
        } catch (Exception e) {
            Log.e("PowerMonitor", e.toString());
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:07:41.980

我们需要您的更多代码才能更好地理解您的问题，但是从您在此处发布的代码看来，套接字似乎被

```
socket.close(); 
```

在`finally`块中调用。还要告诉您遇到的任何错误。

# php - 来自电子邮件链接的身份验证 Symfony2

> ID：11325502
> 
> 赞同：0
> 
> 时间：2012-07-04T08:43:06.817
> 
> 标签：php, authentication, symfony

您知道通过电子邮件链接在 Symfony2 平台上验证用户的技巧吗？

非常感谢之前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T14:40:46.097

您可能想查看[FOSUserBundle](https://github.com/FriendsOfSymfony/FOSUserBundle "FOS 用户包")，它内置了很多用于管理用户的内容。

我们使用类似的技术来注册用户。这是一些基本代码（您需要填写错误处理以及根据 URL 参数实际找到用户的方法：

```
/**
 * @Route("/register/activate/{hash}/{oId}", requirements={"hash"="\w+", "oId"="\d+"}, name="register_byhash")
 * @Method({"GET"})
 * @Template()
 */
public function registerByHashAction($hash, $oId)
{
    $um = $this->container->get('fos_user.user_manager');
    $user = $um->findUserByHash($hash, $oId); // You will need to supply a method that finds the user and checks the hash

    // Mark the user as now active and save the user here

    $providerKey = $this->container->getParameter('fos_user.firewall_name');
    $token = new UsernamePasswordToken($user, null, $providerKey, $user->getRoles());
    $this->container->get('security.context')->setToken($token);

    $url = $this->container->get('router')->generate('welcome');
    return new RedirectResponse($url);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T09:03:47.400

也许是这样的：

```
Pesudocode:

generate hashed link that is unique to user (e.g. md5(email+timestamp+salt) )
store hash for user in db
Send link to user in email (same email as used in hash)

when user accesses site using link:

fetch hash part from link
match hash against database
if match is found, authenticate, else fail 
```

请注意，我不保证这是一种安全的方式（不知道仅通过链接进行身份验证时是否可能是安全的）。只是一些让你前进的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T23:36:20.837

解决此问题的最佳方法是实现自定义身份验证提供程序。身份验证提供程序负责用户身份验证，使用您想要的几乎所有内容：可以是 cookie（例如记住我）、表单数据，或者在您的情况下是查询字符串参数。

你需要：

*   用于存储身份验证参数的自定义令牌
*   可以管理令牌和对用户进行身份验证的自定义身份验证提供程序
*   一些**胶水**将这些组件连接到安全系统（意味着您需要定义工厂和一些配置）。

使用身份验证提供程序，您将有机会将登录用户分配给自定义安全角色（如记住我功能所做的那样），因此您将能够区分登录用户和“自动登录”用户。如果您想限制自动登录的用户可以执行的操作（例如，您可能希望使身份验证仅对一项特定操作有效），这可能非常有用。

官方食谱中有一个关于自定义身份验证提供程序的食谱：

[http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html)

我已经做了很多你需要做的事情，并在 screenfony.com 博客上写了这篇文章：

[http://www.screenfony.com/blog/symfony-custom-authentication-provider](http://www.screenfony.com/blog/symfony-custom-authentication-provider)

# oracle - UTL_MAIL Oracle 的问题

> ID：11325507
> 
> 赞同：0
> 
> 时间：2012-07-04T08:43:26.453
> 
> 标签：oracle, smtp, oracle11g

我正在尝试使用`oracle 11g`如下方式发送电子邮件。

```
begin
  utl_mail.send(
  sender     => 'user@xxx.com',
  recipients => 'user@gmail.com',
  message    => 'Hello World'
  ); 
```

但我得到了以下错误。

```
ORA-29279: SMTP permanent error: 530 5.5.1 http://support.google.com/mail/bin/answer.py?answer=14257 ph1sm17301835pbb.45
ORA-06512: at "SYS.UTL_MAIL", line 654
ORA-06512: at "SYS.UTL_MAIL", line 671
ORA-06512: at line 2
29279\. 00000 -  "SMTP permanent error: %s"
*Cause:    A SMTP permanent error occurred.
*Action:   Correct the error and retry the SMTP operation. 
```

我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T12:13:56.930

根据[GMail 文档](http://support.google.com/mail/bin/answer.py?hl=en&answer=13287)，您需要 SMTP/Auth 才能通过 GMail 发送电子邮件。

不幸的是，utl_mail 不支持这个 - 你必须使用 utl_smtp。

有关示例，请参见[Oracle 论坛。](https://forums.oracle.com/forums/thread.jspa?threadID=288758)

# debugging - 更改 Mercurial 中现有 repo 的当前版本

> ID：11325512
> 
> 赞同：1
> 
> 时间：2012-07-04T08:43:50.650
> 
> 标签：debugging, mercurial

我正在跟踪一个复杂的错误，我想通过使用旧版本测试程序来找出引入它的变更集。

给定一个具有 100 个变更集的本地 mercurial 存储库，我如何将（还原？克隆？）拉到以前的（例如 50 个）变更集？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:48:42.163

除非我误解了你，否则你可以使用`hg update REV`将工作副本更新到指定的修订版。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:01:11.583

如果您没有任何工作要丢失，那么您可以说：

```
hg update -c -r REV 
```

这表示更新修订版 REV（一个数字），并丢弃我拥有的任何未提交的更改。

此外，hg 已经有命令，特别是用于尝试找到某些已损坏的更改。

```
hg bisect 
```

这里有一[章关于它](http://hgbook.red-bean.com/read/finding-and-fixing-mistakes.html)。

# php - drupal 7中的用户注册表单验证

> ID：11325513
> 
> 赞同：0
> 
> 时间：2012-07-04T08:43:50.653
> 
> 标签：php, drupal, drupal-7, drupal-fapi, drupal-forms

Drupal 7 带有内置的用户注册表单（用户/注册）。我使用此表格为新用户注册。这很明显。现在问题是，我很难相信它不存在，我需要一些验证。

当新用户完成表单并点击提交时，将创建帐户。好的。

**但是**：当用户完成表单并点击提交，但**电子邮件地址或用户名已被使用**时，页面只是重新加载并且没有创建用户，这很好，但没有警告他必须更改什么形式如此。

我觉得奇怪，这不是标准的。

谁能给我一些帮助？我真的一点头绪都没有...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T07:26:37.730

使用可以通过许多方法来实现。

这是一个使用[hook_form_alter](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_form_alter/7) ()的例子

```
function [YOUR_MODULE]_form_alter(&$form, &$form_state, $form_id)
{
    if($form_id == "user_register_form" || $form_id == "user_profile_form")
    {
        $form['#validate'][] = '_your_custom_validation_callback';
    }
}

function _your_custom_validation_callback(&$form_state)
{
    // use your validation code...
} 
```

希望这行得通……穆罕默德。

# c++ - C++中的符号计算

> ID：11325514
> 
> 赞同：15
> 
> 时间：2012-07-04T08:43:52.923
> 
> 标签：c++, symbolic-computation

我需要在 C++ 中进行分析集成。例如，我应该整合这样的表达式：`exp[I(x-y)]`,`I`是一个虚数。

我怎样才能在 C++ 中做到这一点？

我尝试了[GiNaC](http://www.ginac.de/)，但它只能集成多项式。我也试过[SymbolicC++](http://issc.uj.ac.za/symbolic/symbolic.html)。它可以集成`sine`,`cosine`或`exp(x)`和等功能`ln(x)`，但功能不是很强大。比如不能积分`x*ln(x)`，用 Mathematica 很容易得到，或者分部分积分。

是否有任何其他工具或库能够进行符号计算，如 C++ 中的分析集成？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T02:30:26.627

如果您需要进行符号集成，那么您可能不会比在mathematica 或maxima 中运行它更快——它们已经用（类似于）C++ 编写。因此，除非你的方程有一个非常具体的公式，你可以利用 Mathematica 或 Maxima 无法利用的方式，那么你可能不走运——至少你不会从现成的图书馆。

如果您需要进行数值求解，您可能有理由编写自己的代码来提高速度。（我知道我这样做是为了生成 PDE 的数值解）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-05-05T19:33:42.593

几天前，我正在寻找一个符号数学库，比如用于 C++ 的 SymPy，因为与 Python 或大多数其他编程语言相比，它的速度让我眼花缭乱。

我发现了[Vienna Math Library](http://viennamath.sourceforge.net/91.html)，这是一个非常棒的库，具有非常现代的语法，并且据我所知，SymPy 的功能。该库还具有可用于解决您的问题的完整功能。

它足以解决 3 自由度铰接机械手的 IK（逆运动学）问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-07-20T19:57:20.753

我知道进行符号计算的其他 C++ 库是

*   SymEngine ( [https://github.com/symengine/symengine](https://github.com/symengine/symengine) )
*   食人鱼（[https://github.com/bluescarni/piranha](https://github.com/bluescarni/piranha)）

如果我没记错的话，SymEngine 还不支持集成；然而，食人鱼确实如此。Piranha的[文档](http://bluescarni.github.io/piranha/sphinx/)目前有些有限，正在开发中，但您可以在[此处](http://bluescarni.github.io/piranha/sphinx/pyranha_math.html#pyranha.math.integrate)查看集成功能。请注意，第二个链接使用 Python 包装器 Piranha 的语法。但是，Piranha“是一个计算机代数库，用于对稀疏多元多项式和其他密切相关的符号对象（例如泊松级数）进行符号操作”，因此我认为它不能集成您可能感兴趣的特定函数.

虽然它不是 C++，但您可能也对 SymPy for Python 感兴趣，它可以执行您可能感兴趣的一些更复杂的符号集成。 SymPy 集成的文档在[这里](http://docs.sympy.org/latest/modules/integrals/integrals.html)。

# asp.net - 从 Sql 转换为 Linq

> ID：11325517
> 
> 赞同：1
> 
> 时间：2012-07-04T08:44:10.547
> 
> 标签：asp.net, sql-server, asp.net-mvc, asp.net-mvc-3, linq

我有，我认为这是一个非常直接的查询。

在普通的 Sql 中，这将显示为：

```
SELECT    [column names]
FROM      agentscheduledetail
WHERE     (date = '2012-07-04') AND 
           (
            exception = 'Break (No Sign Off)' OR
            exception = 'Break' OR
            exception = 'Break (Signed Out)'
           ) 
```

这将返回大约 900 条记录。

但是，当我尝试将其输入我的控制器时，我最终得到了大约 300,000 条记录 - 所以我认为我的 AND 和 OR 不起作用。我已经尝试过 Linqer，但无法让它工作（我知道这可能不是实际的 LINQ，而是 VS 中的等效查询 - 如果有 linq 版本......如果可能的）。

我的控制器查询是：

```
 var dte = DateTime.Today;

        return View(db.agentscheduledetails.Where
           (
            d => d.date == dte && d.agentName.StartsWith("ta") && 
             (
              d.exception == "Break (No Sign Off)" || 
              d.exception == "Break" || 
              d.exception == "Break (Signed Out)"
             )
            ).ToList()
           ); 
```

任何人都可以 a) 让我知道我的 && || 哪里出了问题 （和/或），或b）有没有一种方法可以单步执行VS中的代码，以查看上述查询在普通SQL中的含义，以便我可以尝试找出哪里出错了？

谢谢你的帮助，

标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:50:08.993

以下可能是您尝试执行的操作的简化版本，与比较代理名称的 SQL 相比，您的 LINQ 还包含一条附加语句？

```
var currentDate = DateTime.Today;
var exceptionTypes = new List<string>() { "Break (No Sign Off)", 
                                          "Break", "Break (Signed Out)" };

db.agentscheduledetails.Where(d => d.date == currentDate && 
                                           exceptionTypes.Contains(d.exception)); 
```

您可以尝试的一件事是获取 LinqPad 的副本，这将使您可以针对数据库运行 LINQ 语句，并向您显示生成的 SQL 语句是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:49:40.107

除了别的，

```
 d.agentName.StartsWith("ta") 
```

没有出现在你原来的sql...？

# extjs - 显示窗口时的显示值

> ID：11325518
> 
> 赞同：0
> 
> 时间：2012-07-04T08:44:17.210
> 
> 标签：extjs, extjs4, extjs-mvc, extjs4.1

我想显示一个弹出窗口，其中显示了从 PHP 服务器文件中获取的一些值。我不知道如何在窗口上显示项目。

我不知道为什么，但是当视图被渲染时，控制器中的`console.log`消息`'method call'`没有显示出来。我认为这是因为我添加了`click: this.methodcall`（仅在单击按钮时才调用它，但我希望在呈现视图时打印日志语句）

视图上没有显示任何内容，我认为这是因为我没有添加任何代码来在视图中显示它。

有人可以帮我解决这个问题吗？

我的弹出窗口**查看**代码；

```
Ext.define('Project.view.user.Popupwin', {
    extend: 'Ext.window.Window',
    alias: 'widget.popupwin',
    layout:'fit',
    autoShow: true,
    initComponent: function() {
        this.store = 'Popupwin';
        this.items = [
            {
                xtype: 'form',
                items: [                    
                ]
            }
        ];     
        this.callParent(arguments);
    }
}); 
```

**店铺**

```
Ext.define('Project.store.Popupwin',{
    extend:'Ext.data.Store',
    model:'App.model.Popupwin', 
    proxy: {
        actionMethods : {           
            read   : 'POST'         
        },
        type: 'ajax',
        url : 'loaddata.php',
        autoLoad: true
    }   
}); 
```

**控制器**

```
Ext.define('Project.controller.Popupwin',{
    extend: 'Ext.app.Controller',       
    stores:['Popupwin'],
    models:['Popupwin'],
    views:['DoctorView'],
    init: function(){
        console.log('executed');                
        this.control({              
            'popupwin': {
                click: this.methodcall
            }
        });             
        },
        methodcall: function() {
                            console.log('method call');
            this.getShowPopupwinStore().load();
        }
}); 
```

**模型**

```
Ext.define ('Project.model.Popupwin',{
    extend: 'Ext.data.Model',   
    fields:['fname','lanme']
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T09:01:43.843

Window 没有点击事件，所以你不能监听它。

```
Ext.define('MyWindow', {
    extend: 'Ext.window.Window',
    afterRender: function(){
        this.callParent(arguments);
        this.el.on('click', this.fireClick, this);
    },

    fireClick: function(e, t){
        this.fireEvent('click', this, e);
    }
}); 
```

# javascript - Javascript 只运行一次函数，避免在刷新时再次运行

> ID：11325520
> 
> 赞同：-1
> 
> 时间：2012-07-04T08:44:46.600
> 
> 标签：javascript, jquery

我正在开发 TimeAgo jQuery 插件，它计算自给定日期时间以来的时间。示例：4 分钟前

我根据用户的时区开发它，它工作正常，但是当它自动刷新时，它会根据时区重复减/加小时..

我只想增加一次价值！

JS代码：

```
 (function($) {
    $.timeago = function(timestamp) {
        if (timestamp instanceof Date) {
            return inWords(timestamp);
        } else if (typeof timestamp === "string") {
            return inWords($.timeago.parse(timestamp));
        } else if (typeof timestamp === "number") {
            return inWords(new Date(timestamp));
        } else {
            return inWords($.timeago.datetime(timestamp));
        }
    };
    var $t = $.timeago;

    $.extend($.timeago, {
        settings: {
            refreshMillis: 60000,
            allowFuture: false,
            strings: {
                prefixAgo: null,
                prefixFromNow: null,
                suffixAgo: "قبل",
                suffixFromNow: "من الآن",
                seconds: "اقل من دقيقة",
                minute: "دقيقة",
                minutes: "%d دقيقة",
                hour: "ساعة",
                hours: "%d ساعة",
                day: "يوم",
                days: "%d يوم",
                month: "شهر",
                months: "%d اشهر",
                year: "سنة",
                years: "%d سنين",
                wordSeparator: " ",
                numbers: []
            }
        },
        inWords: function(distanceMillis) {
            var $l = this.settings.strings;
            var prefix = $l.prefixAgo;
            var suffix = $l.suffixAgo;
            if (this.settings.allowFuture) {
                if (distanceMillis < 0) {
                    prefix = $l.prefixFromNow;
                    suffix = $l.suffixFromNow;
                }
            }

            var seconds = Math.abs(distanceMillis) / 1000;
            var minutes = seconds / 60;
            var hours = minutes / 60;
            var days = hours / 24;
            var years = days / 365;

            function substitute(stringOrFunction, number) {
                var string = $.isFunction(stringOrFunction) ? stringOrFunction(number, distanceMillis) : stringOrFunction;
                var value = ($l.numbers && $l.numbers[number]) || number;
                return string.replace(/%d/i, value);
            }

            var words = seconds < 45 && substitute($l.seconds, Math.round(seconds)) ||
        seconds < 90 && substitute($l.minute, 1) ||
        minutes < 45 && substitute($l.minutes, Math.round(minutes)) ||
        minutes < 90 && substitute($l.hour, 1) ||
        hours < 24 && substitute($l.hours, Math.round(hours)) ||
        hours < 42 && substitute($l.day, 1) ||
        days < 30 && substitute($l.days, Math.round(days)) ||
        days < 45 && substitute($l.month, 1) ||
        days < 365 && substitute($l.months, Math.round(days / 30)) ||
        years < 1.5 && substitute($l.year, 1) ||
        substitute($l.years, Math.round(years));

            var separator = $l.wordSeparator === undefined ? " " : $l.wordSeparator;
            return $.trim([prefix, suffix, words].join(separator));
        },
        parse: function(iso8601) {
            var s = $.trim(iso8601);
            s = s.replace(/\.\d+/, ""); // remove milliseconds
            s = s.replace(/-/, "/").replace(/-/, "/");
            s = s.replace(/T/, " ").replace(/Z/, " UTC");
            s = s.replace(/([\+\-]\d\d)\:?(\d\d)/, " $1$2"); // -04:00 -> -0400
            return new Date(s);
        },
        datetime: function(elem) {
            var iso8601 = $t.isTime(elem) ? $(elem).attr("datetime") : $(elem).attr("title");
            return $t.parse(iso8601);
        },
        isTime: function(elem) {
            // jQuery's `is()` doesn't play well with HTML5 in IE
            return $(elem).get(0).tagName.toLowerCase() === "time"; // $(elem).is("time");
        }
    });

    $.fn.timeago = function() {
        var self = this;
        self.each(refresh);

        var $s = $t.settings;
        if ($s.refreshMillis > 0) {
            setInterval(function() { self.each(refresh); }, $s.refreshMillis);
        }
        return self;
    };

    function refresh() {
        var data = prepareData(this);
        var dt = data.datetime;
        if (!isNaN(dt)) {
            $(this).text(inWords(dt));
        }
        return this;
    }

    function prepareData(element) {
        element = $(element);
        if (!element.data("timeago")) {
            element.data("timeago", { datetime: $t.datetime(element) });
            var text = $.trim(element.text());
            if (text.length > 0 && !($t.isTime(element) && element.attr("title"))) {
                element.attr("title", text);
            }
        }
        return element.data("timeago");
    }

    function get_time_zone_offset() {
        var current_date = new Date();
        return -current_date.getTimezoneOffset() / 60;

    }

    function inWords(date) {
        date.setHours(date.getHours() + get_time_zone_offset());
        return $t.inWords(distance(date));
    }

    function distance(date) {
        return (new Date().getTime() - date.getTime());
    }

    // fix for IE6 suckage
    document.createElement("span");
    document.createElement("time");
} (jQuery)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:51:29.060

您必须设置一个 Cookie 并存储天气，或者它是否已经运行。因此，第一次运行时，请检查 cookie 是否存在。如果它没有运行您的代码，则设置 cookie。将 cookie 设置为会话 cookie，以便在下次关闭浏览器时过期。

# cocos2d-iphone - 更改 PrismaticJoint 引擎方向

> ID：11325521
> 
> 赞同：0
> 
> 时间：2012-07-04T08:45:04.080
> 
> 标签：cocos2d-iphone, box2d

创建关节后是否可以修改引擎的方向？

这是关节的定义：

```
//Define a prismatic joint
b2PrismaticJointDef jointDef;

b2Vec2 axis = b2Vec2(1.0f, 0.0f);
axis.Normalize(); //Important

jointDef.Initialize(staticBody, body, b2Vec2(0.0f, 0.0f),axis);

jointDef.localAnchorA = b2Vec2(0.0f,0.0f);
jointDef.localAnchorB = body->GetLocalCenter();
jointDef.motorSpeed = 3.0f;
jointDef.maxMotorForce = +200*body->GetMass();

jointDef.enableMotor = true;

jointDef.lowerTranslation = -2.0f;
jointDef.upperTranslation = 3.0f;
jointDef.enableLimit = true;

_horPrismaticJoint = (b2PrismaticJoint*) world->CreateJoint(&jointDef); 
```

在 CCTouchesBegan 内部，我尝试更改力值，但它不起作用：

```
 _horPrismaticJoint->SetMaxMotorForce(-200.0f); 
```

cocos 发行版是 cocos2d-iphone-1.0.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:02:05.153

是的，您只需要更改速度（而不是最大力）：

```
joint->SetMotorSpeed( -3.0f ); 
```

最大力描述了关节马达的强度，所以它不应该是负数。

# django - Django nginx uwsgi 结束斜线

> ID：11325524
> 
> 赞同：0
> 
> 时间：2012-07-04T08:45:28.613
> 
> 标签：django, nginx, uwsgi

我将 nginx 和 uwsgi 用于 djangobook.ir，我遇到了这个问题。对 djangobook.ir/toc 的任何请求（没有结束斜线）都会重定向到 djangobook.irdjangobook_ir.wsgi！但我对 djangobook.ir/toc/ 没有问题（带有斜线结尾）。

```
server {
    listen 80;
    server_name djangobook.ir;
        charset utf-8;

        access_log /var/log/nginx/app_access.log;
        error_log /var/log/nginx/app_error.log;
        root /home/aminpy/djangobook_ir/;

        location /static/ {
                alias /home/aminpy/djangobook_ir/static/;
        }

        location /statics/ {
                alias /home/aminpy/djangobook_ir/statics/;
        }

        location / {
                uwsgi_pass 127.0.0.1:5000;
                include uwsgi_params;
                root /home/aminpy/djangobook_ir/;
                uwsgi_param UWSGI_SCRIPT djangobook_ir.wsgi;
                uwsgi_param SCRIPT_NAME djangobook_ir.wsgi;
                uwsgi_param UWSGI_CHDIR $document_root;
        }
} 
```

你可以[在线](http://www.djangobook.ir)测试！我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:03:56.690

删除 SCRIPT_NAME 它是前缀/挂载点应用程序的 WSGI 标准方式。

您所经历的是预期的:)

# perl - WWW::Mechanize::Firefox 等到图片加载完毕

> ID：11325528
> 
> 赞同：1
> 
> 时间：2012-07-04T08:45:40.967
> 
> 标签：perl

使用这个 Perl 模块，我将如何等待页面加载所有图像？（我正在尝试截取属于年龄的图像）

我试过`$agent->success`了，这只检查页面是否已加载（不检查图像）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T00:31:31.010

我认为模块中没有等待方法，但您可以检查元素是否可见并循环并等待它可见。

```
FOO: {while(1){
   if($gent->is_visible($element)){
        print "Image Downloaded\n";   
        last FOO;         
    }
    else{
       print "Downloading image...\n"; #This might print until image is downloaded
       sleep(10);
    }
}} 
```

# xml - XSLT 1.0：从 IDOC 到 AdsML 的转换

> ID：11325531
> 
> 赞同：2
> 
> 时间：2012-07-04T08:46:10.973
> 
> 标签：xml, xslt, xslt-1.0, idoc

我需要将 SAP IDOC xml 转换为 AdsML 格式。但抽象的问题是：如何将 xml1 转换为 xml2？

xml1：

```
<E1BPBUSISM008_ITEM_OUT>
    <ITEM_NUMBER>010</ITEM_NUMBER>
</E1BPBUSISM008_ITEM_OUT>
<E1BPBUSISM008_ITEM_OUT>
    <ITEM_NUMBER>020</ITEM_NUMBER> 
</E1BPBUSISM008_ITEM_OUT>

<E1BPBUSISM008_AD_SPEC_AD_OU>
    <ITEM_NUMBER>010</ITEM_NUMBER>
    <PLANNED_WIDTH>1.851</PLANNED_WIDTH>
    <PLANNED_HEIGHT>0.000</PLANNED_HEIGHT>
</E1BPBUSISM008_AD_SPEC_AD_OU>
<E1BPBUSISM008_AD_SPEC_AD_OU>
    <ITEM_NUMBER>020</ITEM_NUMBER>  
    <PLANNED_WIDTH>2.37</PLANNED_WIDTH>
    <PLANNED_HEIGHT>0.000</PLANNED_HEIGHT>
</E1BPBUSISM008_AD_SPEC_AD_OU> 
```

进入xml2：

```
<Ad>
    <ad-number>010<ad-number>
    <width>1.851</width>
    <height>0.000</height>
</Ad>
<Ad>
    <ad-number>020<ad-number>
    <width>2.37</width>
    <height>0.000</height>
</Ad> 
```

我在这里尝试的是 Muench 方法，但即使它是这种情况下的正确解决方案，也不知道如何完成它，因为它返回错误的“宽度”和“高度”（所有广告元素都相同）：

```
<xsl:key name="adnumbers" match="IE1BPBUSISM008_ITEM_OUT" use="ITEM_NUMBER"/>
....
<xsl:for-each select="E1BPBUSISM008_ITEM_OUT[generate-id(.)=generate-id(key('adnumbers',ITEM_NUMBER)[1])]">
<xsl:sort select="ITEM_NUMBER"/>
<Ad>
<ad-number>
    <xsl:value-of select="ITEM_NUMBER/text()"/>
</ad-number>
<width>
<xsl:value-of select="E1BPBUSISM008_AD_SPEC_AD_OU/PLANNED_WIDTH"/>
</width>
<height>
<xsl:value-of select="E1BPBUSISM008_AD_SPEC_AD_OU/PLANNED_HEIGHT"/>
</height> 
```

输出：

```
<Ad>
  <number>010</ad-number>
  <width>1.851</width>
  <heigth>0.000</heigth>
</Ad>
<Ad>
  <number>020</ad-number>
  <width>1.851</width>
  <heigth>0.000</heigth>
</Ad> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T09:35:03.507

您不需要实际的 Muenchian 分组 - 使用密钥就足以获得所需的结果。

```
<xsl:key name="k_AD_SPEC_AD_OU" match="E1BPBUSISM008_AD_SPEC_AD_OU" use="ITEM_NUMBER" />

<!-- ... -->

<xsl:for-each select="E1BPBUSISM008_ITEM_OUT">
    <xsl:sort select="ITEM_NUMBER" />
    <Ad>
        <ad-number>
            <xsl:value-of select="ITEM_NUMBER" />
        </ad-number>
        <width>
            <xsl:value-of select="key('k_AD_SPEC_AD_OU', ITEM_NUMBER)[1]/PLANNED_WIDTH" />
        </width>
        <height>
            <xsl:value-of select="key('k_AD_SPEC_AD_OU', ITEM_NUMBER)[1]/PLANNED_HEIGHT" />
        </height>
    </Ad>
</xsl:for-each>

<!-- ... --> 
```

但是，正确的解决方案取决于您`E1BPBUSISM008_ITEM_OUT`和之间的关系`E1BPBUSISM008_AD_SPEC_AD_OU`：您的示例表明它只是**1 比 1**，这会使密钥变得不必要，但我怀疑您的实际关系可能是**1 比 0 或 1**甚至**1 比 0 或更多**.

如果您需要为丢失的`E1BPBUSISM008_AD_SPEC_AD_OU`元素（1 到 0 或 1 关系）创建输出，xslt 将需要一些调整。

* * *

对于简单的**1 对 1**关系，您的 xslt 可能如下所示：

```
<!-- ... -->

<xsl:for-each select="E1BPBUSISM008_ITEM_OUT">
    <xsl:sort select="ITEM_NUMBER" />
    <Ad>
        <ad-number>
            <xsl:value-of select="ITEM_NUMBER" />
        </ad-number>

        <xsl:call-template name="AD_SPEC_AD_OU">
            <xsl:with-param name="pITEM_NUMBER" select="ITEM_NUMBER" />
        </xsl:call-template>
    </Ad>
</xsl:for-each>

<xsl:template name="AD_SPEC_AD_OU">
    <xsl:param name="pITEM_NUMBER" />

    <width>
        <xsl:value-of select="//E1BPBUSISM008_AD_SPEC_AD_OU[ITEM_NUMBER = $pITEM_NUMBER]/PLANNED_WIDTH" />
    </width>
    <height>
        <xsl:value-of select="//E1BPBUSISM008_AD_SPEC_AD_OU[ITEM_NUMBER = $pITEM_NUMBER]/PLANNED_HEIGHT" />
    </height>
</xsl:template> 
```

# ruby-on-rails-3 - ActiveRecord 日期时间比较

> ID：11325543
> 
> 赞同：1
> 
> 时间：2012-07-04T08:47:11.453
> 
> 标签：ruby-on-rails-3, activerecord, where

我了解 Rails 以 UTC 存储时间。

我有 DateTime 的 out_date 和 in_date 实例

我有这个查询：

```
reservations = Reservation.where("bookable_id = :bookable_id AND bookable_type = :bookable_type AND status <> :status AND ((:out_date >= check_out_date AND  :out_date <= check_in_date) OR (:in_date <= check_in_date AND :in_date >= check_out_date) OR (:out_date <= check_in_date AND :in_date >= check_in_date))", :bookable_id => params[:bookable_id], :bookable_type => params[:bookable_type], :status => Reservation::STATUS_CHECKED_IN, :out_date => out_date, :in_date => in_date) 
```

即使我应该得到一个返回元组，我总是得到一个空集。

我试过这些变种：

```
out_date.utc

out_date.utc.to_s(:db) 
```

似乎没有任何工作。如何构造这个查询？

控制器代码：

```
 in_date = DateTime.strptime params[:checkin], "%Y-%m-%d %H:%M"
  out_date = DateTime.strptime params[:checkout], "%Y-%m-%d %H:%M"

  #check collision with non-recurring reservations
  reservations = Reservation.where("bookable_id = :bookable_id AND bookable_type = :bookable_type AND status <> :status AND ((:out_date >= check_out_date AND  :out_date <= check_in_date) OR (:in_date <= check_in_date AND :in_date >= check_out_date) OR (:out_date <= check_in_date AND :in_date >= check_in_date))", :bookable_id => params[:bookable_id], :bookable_type => params[:bookable_type], :status => Reservation::STATUS_CHECKED_IN, :out_date => out_date, :in_date => in_date)
  logger.info(reservations)
  if !reservations.empty?
    @error_message = "This Asset has already been reserved for those dates"
    return
  end 
```

同样在 Rails 控制台上，更简单的查询失败：

```
1.9.3p0 :007 > Reservation.find_by_id 31
  Reservation Load (0.7ms)  SELECT `reservations`.* FROM `reservations` WHERE `reservations`.`id` = 31 LIMIT 1
 => #<Reservation id: 31, bookable_id: 11, bookable_type: "Asset", user_id: 1, check_out_date: "2012-07-07 08:00:00", check_in_date: "2012-07-07 10:00:00", notes: "rec", status: "Ready", is_recurring: true, repeat_count: 5>

1.9.3p0 :009 > Reservation.where " ? >= check_out_date AND ? <= check_in_date",DateTime.new(2012,7,7,9),DateTime.new(2012,7,7,9)
  Reservation Load (0.5ms)  SELECT `reservations`.* FROM `reservations` WHERE ( '2012-07-07 09:00:00' >= check_out_date AND '2012-07-07 09:00:00' <= check_in_date)
 => [] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:04:58.347

我阅读了更新的代码，显然它是正确的。确保`out_date`and`in_date`是`DateTime`对象而不是空对象。

您不需要格式化查询，它应该为您处理。

如果要调试查询 SQL，可以使用`.to_sql`

```
reservations = Reservation.where("...") # your query
puts reservation.to_sql
# => "SELECT ..." 
```

打印查询并检查值的格式是否正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T19:42:00.350

错误是因为数据库时间存储在UTC和本地时间不同，不满足查询条件。

# ruby-on-rails - 从 Rails 应用程序控制器中调用 ruby 脚本

> ID：11325544
> 
> 赞同：2
> 
> 时间：2012-07-04T08:47:13.400
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我对 Rails 很陌生，我有一个像这样从控制台运行的脚本

```
 $ ruby axml2xml.rb ExamPaper.apk 
```

现在，如何从我的控制器方法中调用此脚本并传递与`ExamPaper.apk`？

我试过`require 'axml2xml.rb'`了，但有一些指向这行代码的错误`Zip::ZipFile.foreach(ARGV[0]) do |f|`。所以基本上，我如何`axml2xml.rb 'ExamPaper.apk'`在我的控制器中制作类似的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T08:58:16.507

您至少有 3 个选项：

*   `exec(command)`
*   `%x{ command }`
*   `system(command)`

它们有不同的行为，因此请务必阅读[此快速提示](http://rubyquicktips.com/post/5862861056/execute-shell-commands)和/或[此问题](https://stackoverflow.com/questions/2232/calling-bash-commands-from-ruby)的答案，以了解有关这些命令的更多信息。

在您的情况下，反引号或`%x`命令可能是最好的选择。

```
value = `ruby axml2xml.rb ExamPaper.apk` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T08:59:15.107

You can try using `system` or `popen`, but only for short tasks, for more information about that, please see [here](http://mentalized.net/journal/2010/03/08/5_ways_to_run_commands_from_ruby/).

If your task is more time consuming you definitely should have a look at something like [delayed_job](https://github.com/collectiveidea/delayed_job) and use a background job or some sort of queue to run your job. This way your server doesn't get blocked and your users do not have to wait til your job completes.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T08:54:28.103

如果要将其作为 shell 命令执行，请使用：

```
exec 'ruby axml2xml.rb ExamPaper.apk' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T08:58:36.517

在 ruby​​ 中，有几种方法可以运行 shell 命令。

```
system("ls")
%x("ls")
`ls`   #nice they are back ticks
exec "ls" 
```

But I'm not sure about the permissions necessary for running commands like that via rails.

# javascript - 创建一个平面，在两侧添加纹理并在其一侧旋转对象

> ID：11325548
> 
> 赞同：9
> 
> 时间：2012-07-04T08:47:28.687
> 
> 标签：javascript, three.js

我正在尝试创建一个具有重复纹理的长走廊。如何添加重复纹理并以直角旋转对象（在本例中为平面）以创建走廊墙壁和天花板？

```
var texture, material, plane;

texture = THREE.ImageUtils.loadTexture( "../img/texture.jpg" );
texture.wrapT = THREE.RepeatWrapping;  // This doesn't seem to work;
material = new THREE.MeshLambertMaterial({ map : texture });
plane = new THREE.Mesh(new THREE.PlaneGeometry(400, 3500), material);
plane.doubleSided = true;
plane.position.x = 100;
plane.rotation.z = 2;  // Not sure what this number represents.
scene.add(plane); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-04T12:45:18.147

有关重复纹理的示例，请查看示例的源代码：

[http://stemkoski.github.com/Three.js/Texture-Repeat.html](http://stemkoski.github.com/Three.js/Texture-Repeat.html)

我建议对您的代码进行以下更改：

```
var texture, material, plane;

texture = THREE.ImageUtils.loadTexture( "../img/texture.jpg" );

// assuming you want the texture to repeat in both directions:
texture.wrapS = THREE.RepeatWrapping; 
texture.wrapT = THREE.RepeatWrapping;

// how many times to repeat in each direction; the default is (1,1),
//   which is probably why your example wasn't working
texture.repeat.set( 4, 4 ); 

material = new THREE.MeshLambertMaterial({ map : texture });
plane = new THREE.Mesh(new THREE.PlaneGeometry(400, 3500), material);
plane.material.side = THREE.DoubleSide;
plane.position.x = 100;

// rotation.z is rotation around the z-axis, measured in radians (rather than degrees)
// Math.PI = 180 degrees, Math.PI / 2 = 90 degrees, etc.
plane.rotation.z = Math.PI / 2;

scene.add(plane); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-11T20:18:20.730

在不复制我所有的几何图形的情况下寻找解决方案。

来了，女士们，先生们……

```
var materials = [new THREE.MeshBasicMaterial({map: texture, side: THREE.FrontSide}),
                 new THREE.MeshBasicMaterial({map: textureBack, side: THREE.BackSide})];

var geometry = new THREE.PlaneGeometry(width, height);

for (var i = 0, len = geometry.faces.length; i < len; i++) {
    var face = geometry.faces[i].clone();
    face.materialIndex = 1;
    geometry.faces.push(face);
    geometry.faceVertexUvs[0].push(geometry.faceVertexUvs[0][i].slice(0));
}

scene.add(new THREE.Mesh(geometry, new THREE.MeshFaceMaterial(materials))); 
```

BOOM 一个两面平面，循环也适用于具有更多面的几何图形，复制每个面并对其应用 BackSide 纹理。

享受！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-07T16:04:52.650

我一直在寻找同样的东西，而您只是在错误的对象上使用了属性 THREE.DoubleSide。您应该在材质上而不是在网格本身上使用它：

```
material.side = THREE.DoubleSide; 
```

...仅此而已！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-09-11T14:03:19.120

## 2019 年更新：`Imageutil.loadTexture`已弃用，

**改用 THREE.TextureLoader()**

```
 new THREE.TextureLoader().load(
          WOOD,
          //use texture as material Double Side
          texture => {
                texture.wrapS = THREE.RepeatWrapping;
                texture.wrapT = THREE.RepeatWrapping;
                texture.offset.x = 90/(2*Math.PI);
            var woodMaterial = new THREE.MeshPhongMaterial({
              map: texture,
              side: THREE.DoubleSide
            });

            // Add Ground
            groundMesh = new THREE.Mesh(
              new THREE.PlaneGeometry(GRID_SIZE, GRID_SIZE, 32),
              woodMaterial
            );

            //rotate
            groundMesh.rotation.x = Math.PI / 2;
            this.scene.add(groundMesh);
          }
        ); 
```

# c++ - 是否有类似 C++ 的 Robocode 游戏

> ID：11325552
> 
> 赞同：3
> 
> 时间：2012-07-04T08:48:07.953
> 
> 标签：c++, robocode

我学了一年Java。现在我开始学习 C++，接下来我打算开始开发游戏。我在哪里可以找到像 Robocode 这样的游戏框架或学习 C++ 的教程，重点是游戏编程？

# visual-studio-2010 - 从 Visual Studio 2010 调试 VB6 代码

> ID：11325555
> 
> 赞同：3
> 
> 时间：2012-07-04T08:48:20.247
> 
> 标签：visual-studio-2010, debugging, vb6

我有 .NET 3.5 Web 应用程序，它使用一些在 VB6 中创建的 COM dll。我有两者的源代码。我也有 COM dll 的 pdb 文件。我想在 Visual Studio 2010 中加载 VB6 dll 代码进行调试。

如果我在 VB6 IDE 中加载 COM 应用程序，我可以从 VS 进入 dll 代码。由于我是 VB 新手，使用 VB6 IDE 进行调试对我来说有点乏味。所以我想在 Visual Studio 2010 中调试 COM 应用程序代码。

我按照[Robgruen 博客中的说明进行操作](http://blogs.msdn.com/b/robgruen/archive/2004/11/09/254602.aspx)

问题是VS2010自动为对应的COM dll创建了Interop dll，而且它只使用了Interop dll。调试时，当我尝试手动加载 COM dll 的符号文件（假设是 MyComApp.dll）它失败并且 VS 指示我加载 Interop.MyComApp.pdb 文件。但我只有 MyComApp.pdb。

我该如何进行这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T11:56:04.953

您无法在 Visual Studio 2010 中调试高于已编译汇编代码的任何级别的 VB6 代码。

但是，您可以将您的 VB6 dll 项目转换为 VB 2010，然后在 Visual Studio 2010 中使用它。只需将您的 VB6 项目拖放到 Visual Studio 2010（将项目拖放到 VS 2010 的图标上然后放下），升级向导将自动转换它。或者只是使用 Artinsoft 程序。祝你好运！:)

# sql-server - 如何在 SQL Azure 中找到最大数据库空间和已用数据库空间？

> ID：11325556
> 
> 赞同：1
> 
> 时间：2012-07-04T08:48:23.137
> 
> 标签：sql-server, database, azure, azure-sql-database

在 SQL Azure 中，每个数据库都有大小限制（[可调整](https://stackoverflow.com/q/6430243/57428)）。为了让我的服务不会突然停止，我希望能够以编程方式找到当前的最大大小和当前实际使用的空间（并在达到某个阈值时生成并发出警报）。

看起来[`sp_mstablespace`可以用来解决这个问题](https://stackoverflow.com/a/401062/57428)，但是这个存储过程在 SQL Azure 中不可用。

如何在 SQL Azure 数据库中找到当前允许的最大大小和当前实际使用的空间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T13:17:20.677

您可以通过动态管理视图计算已用空间（参考页面[在这里](http://msdn.microsoft.com/en-us/library/windowsazure/ff394114.aspx)）：

```
SELECT SUM(reserved_page_count)*8.0/1024
FROM sys.dm_db_partition_stats; 
```

虽然我不认为您可以检索最大大小，但简单地将数据库设置为最大大小并没有什么坏处，因为您只需为使用的空间付费。话虽如此：如果您仅在 5GB 以下范围内，最好使用网络版。如果您已经超过 10 GB，则将最大大小设置为 150 GB 然后监控消耗的大小应该没有任何危害。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T02:02:54.320

David 已经指出了如何查找数据库的当前大小，如果您想知道数据库的最大大小（以 MB 为单位），则需要在您感兴趣的数据库中运行以下查询：

```
SELECT CONVERT(BIGINT, DATABASEPROPERTYEX('DatabaseOfInterestName', 'MaxSizeInBytes')) / 1024 
```

[参考](http://msdn.microsoft.com/en-us/library/windowsazure/ee621786.aspx)

# jquery - 带有图像的jquery fancybox背景

> ID：11325559
> 
> 赞同：2
> 
> 时间：2012-07-04T08:48:27.310
> 
> 标签：jquery, css, jquery-plugins, fancybox

我想在名为 fancybox 的 jQuery 插件上应用一个像素为 1x1 白色、透明度为 0.9 的图像背景。

我已经在photoshop中创建了像素，当我插入花哨的背景时没有出现，背景是空的，在萤火虫上没有错误，比如找不到图像或类似的东西。这是fancybox的css代码：（我改变的部分在#fancybox-outer和#fancybox-content）我没有尝试过背景和背景图像，帮帮我

```
 /*
     * FancyBox - jQuery Plugin
     * Simple and fancy lightbox alternative
     *
     * Examples and documentation at: http://fancybox.net
     * 
     * Copyright (c) 2008 - 2010 Janis Skarnelis
     * That said, it is hardly a one-person project. Many people have submitted bugs, code, and offered their advice freely. Their support is greatly appreciated.
     * 
     * Version: 1.3.4 (11/11/2010)
     * Requires: jQuery v1.3+
     *
     * Dual licensed under the MIT and GPL licenses:
     *   http://www.opensource.org/licenses/mit-license.php
     *   http://www.gnu.org/licenses/gpl.html
     */

    #fancybox-loading {
        position: fixed;
        top: 50%;
        left: 50%;
        width: 40px;
        height: 40px;
        margin-top: -20px;
        margin-left: -20px;
        cursor: pointer;
        overflow: hidden;
        z-index: 1104;
        display: none;
    }

    #fancybox-loading div {
        position: absolute;
        top: 0;
        left: 0;
        width: 40px;
        height: 480px;
        background-image: url('fancybox.png');
    }

    #fancybox-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        z-index: 1100;
        display: none;
    }

    #fancybox-tmp {
        padding: 0;
        margin: 0;
        border: 0;
        overflow: auto;
        display: none;
    }

    #fancybox-wrap {
        position: absolute;
        top: 0;
        left: 0;
        padding: 20px;
        z-index: 1101;
        outline: none;
        display: none;
    }

    #fancybox-outer {
        position: relative;
        width: 100%;
        height: 100%;
        background: url(sfondo_fancy.png) repeat-x repeat-y;
    }

    #fancybox-content {
        width: 0;
        height: 0;
        padding: 0;
        outline: none;
        position: relative;
        overflow: hidden;
        z-index: 1102;
        background: url(sfondo_fancy.png) repeat-x repeat-y;
    }

    #fancybox-hide-sel-frame {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: transparent;
        z-index: 1101;
    }

    #fancybox-close {
        position: absolute;
        top: -15px;
        right: -15px;
        width: 30px;
        height: 30px;
        background: transparent url('fancybox.png') -40px 0px;
        cursor: pointer;
        z-index: 1103;
        display: none;
    }

    #fancybox-error {
        color: #444;
        font: normal 12px/20px Arial;
        padding: 14px;
        margin: 0;
    }

    #fancybox-img {
        width: 100%;
        height: 100%;
        padding: 0;
        margin: 0;
        border: none;
        outline: none;
        line-height: 0;
        vertical-align: top;
    }

    #fancybox-frame {
        width: 100%;
        height: 100%;
        border: none;
        display: block;
    }

    #fancybox-left, #fancybox-right {
        position: absolute;
        bottom: 0px;
        height: 100%;
        width: 35%;
        cursor: pointer;
        outline: none;
        background: transparent url('blank.gif');
        z-index: 1102;
        display: none;
    }

    #fancybox-left {
        left: 0px;
    }

    #fancybox-right {
        right: 0px;
    }

    #fancybox-left-ico, #fancybox-right-ico {
        position: absolute;
        top: 50%;
        left: -9999px;
        width: 30px;
        height: 30px;
        margin-top: -15px;
        cursor: pointer;
        z-index: 1102;
        display: block;
    }

    #fancybox-left-ico {
        background-image: url('fancybox.png');
        background-position: -40px -30px;
    }

    #fancybox-right-ico {
        background-image: url('fancybox.png');
        background-position: -40px -60px;
    }

    #fancybox-left:hover, #fancybox-right:hover {
        visibility: visible; /* IE6 */
    }

    #fancybox-left:hover span {
        left: 20px;
    }

    #fancybox-right:hover span {
        left: auto;
        right: 20px;
    }

    .fancybox-bg {
        position: absolute;
        padding: 0;
        margin: 0;
        border: 0;
        width: 20px;
        height: 20px;
        z-index: 1001;
    }

    #fancybox-bg-n {
        top: -20px;
        left: 0;
        width: 100%;
        background-image: url('fancybox-x.png');
    }

    #fancybox-bg-ne {
        top: -20px;
        right: -20px;
        background-image: url('fancybox.png');
        background-position: -40px -162px;
    }

    #fancybox-bg-e {
        top: 0;
        right: -20px;
        height: 100%;
        background-image: url('fancybox-y.png');
        background-position: -20px 0px;
    }

    #fancybox-bg-se {
        bottom: -20px;
        right: -20px;
        background-image: url('fancybox.png');
        background-position: -40px -182px; 
    }

    #fancybox-bg-s {
        bottom: -20px;
        left: 0;
        width: 100%;
        background-image: url('fancybox-x.png');
        background-position: 0px -20px;
    }

    #fancybox-bg-sw {
        bottom: -20px;
        left: -20px;
        background-image: url('fancybox.png');
        background-position: -40px -142px;
    }

    #fancybox-bg-w {
        top: 0;
        left: -20px;
        height: 100%;
        background-image: url('fancybox-y.png');
    }

    #fancybox-bg-nw {
        top: -20px;
        left: -20px;
        background-image: url('fancybox.png');
        background-position: -40px -122px;
    }

    #fancybox-title {
        font-family: Helvetica;
        font-size: 12px;
        z-index: 1102;
    }

    .fancybox-title-inside {
        padding-bottom: 10px;
        text-align: center;
        color: #333;
        background: #fff;
        position: relative;
    }

    .fancybox-title-outside {
        padding-top: 10px;
        color: #fff;
    }

    .fancybox-title-over {
        position: absolute;
        bottom: 0;
        left: 0;
        color: #FFF;
        text-align: left;
    }

    #fancybox-title-over {
        padding: 10px;
        background-image: url('fancy_title_over.png');
        display: block;
    }

    .fancybox-title-float {
        position: absolute;
        left: 0;
        bottom: -20px;
        height: 32px;
    }

    #fancybox-title-float-wrap {
        border: none;
        border-collapse: collapse;
        width: auto;
    }

    #fancybox-title-float-wrap td {
        border: none;
        white-space: nowrap;
    }

    #fancybox-title-float-left {
        padding: 0 0 0 15px;
        background: url('fancybox.png') -40px -90px no-repeat;
    }

    #fancybox-title-float-main {
        color: #FFF;
        line-height: 29px;
        font-weight: bold;
        padding: 0 0 3px 0;
        background: url('fancybox-x.png') 0px -40px;
    }

    #fancybox-title-float-right {
        padding: 0 0 0 15px;
        background: url('fancybox.png') -55px -90px no-repeat;
    }

    /* IE6 */

    .fancybox-ie6 #fancybox-close { background: transparent; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_close.png', sizingMethod='scale'); }

    .fancybox-ie6 #fancybox-left-ico { background: transparent; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_nav_left.png', sizingMethod='scale'); }
    .fancybox-ie6 #fancybox-right-ico { background: transparent; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_nav_right.png', sizingMethod='scale'); }

    .fancybox-ie6 #fancybox-title-over { background: transparent; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_title_over.png', sizingMethod='scale'); zoom: 1; }
    .fancybox-ie6 #fancybox-title-float-left { background: transparent; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_title_left.png', sizingMethod='scale'); }
    .fancybox-ie6 #fancybox-title-float-main { background: transparent; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_title_main.png', sizingMethod='scale'); }
    .fancybox-ie6 #fancybox-title-float-right { background: transparent; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_title_right.png', sizingMethod='scale'); }

    .fancybox-ie6 #fancybox-bg-w, .fancybox-ie6 #fancybox-bg-e, .fancybox-ie6 #fancybox-left, .fancybox-ie6 #fancybox-right, #fancybox-hide-sel-frame {
        height: expression(this.parentNode.clientHeight + "px");
    }

    #fancybox-loading.fancybox-ie6 {
        position: absolute; margin-top: 0;
        top: expression( (-20 + (document.documentElement.clientHeight ? document.documentElement.clientHeight/2 : document.body.clientHeight/2 ) + ( ignoreMe = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop )) + 'px');
    }

    #fancybox-loading.fancybox-ie6 div  { background: transparent; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_loading.png', sizingMethod='scale'); }

    /* IE6, IE7, IE8 */

    .fancybox-ie .fancybox-bg { background: transparent !important; }

    .fancybox-ie #fancybox-bg-n { filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_shadow_n.png', sizingMethod='scale'); }
    .fancybox-ie #fancybox-bg-ne { filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_shadow_ne.png', sizingMethod='scale'); }
    .fancybox-ie #fancybox-bg-e { filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_shadow_e.png', sizingMethod='scale'); }
    .fancybox-ie #fancybox-bg-se { filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_shadow_se.png', sizingMethod='scale'); }
    .fancybox-ie #fancybox-bg-s { filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_shadow_s.png', sizingMethod='scale'); }
    .fancybox-ie #fancybox-bg-sw { filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_shadow_sw.png', sizingMethod='scale'); }
    .fancybox-ie #fancybox-bg-w { filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_shadow_w.png', sizingMethod='scale'); }
    .fancybox-ie #fancybox-bg-nw { filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_shadow_nw.png', sizingMethod='scale'); } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:31:50.750

解决方案是在我修改了内容和外部的css中，背景透明，没有阴影，如下所示：

```
/*
 * FancyBox - jQuery Plugin
 * Simple and fancy lightbox alternative
 *
 * Examples and documentation at: http://fancybox.net
 * 
 * Copyright (c) 2008 - 2010 Janis Skarnelis
 * That said, it is hardly a one-person project. Many people have submitted bugs, code, and offered their advice freely. Their support is greatly appreciated.
 * 
 * Version: 1.3.4 (11/11/2010)
 * Requires: jQuery v1.3+
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */

#fancybox-loading {
    position: fixed;
    top: 50%;
    left: 50%;
    width: 40px;
    height: 40px;
    margin-top: -20px;
    margin-left: -20px;
    cursor: pointer;
    overflow: hidden;
    z-index: 1104;
    display: none;
}

#fancybox-loading div {
    position: absolute;
    top: 0;
    left: 0;
    width: 40px;
    height: 480px;
    background-image: url('fancybox.png');
}

#fancybox-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    z-index: 1100;
    display: none;
}

#fancybox-tmp {
    padding: 0;
    margin: 0;
    border: 0;
    overflow: auto;
    display: none;
}

#fancybox-wrap {
    position: absolute;
    top: 0;
    left: 0;
    padding: 20px;
    z-index: 1101;
    outline: none;
    display: none;
    background: url('sfondo_fancy.png') repeat;

}

#fancybox-outer {
    position: relative;
    width: 100%;
    height: 100%;
    /*background: url('sfondo_fancy.png') repeat;*/
    /*background:#fff;
    opacity:0.9;
    /*background: url('sfondo_fancy.png');*/
    background:transparent;
}

#fancybox-content {
    width: 0;
    height: 0;
    padding: 0;
    outline: none;
    position: relative;
    overflow: hidden;
    z-index: 1102;
    /*background: url('sfondo_fancy.png') repeat;*/
    /*background:#fff;
    opacity:0.9;
    /*background:url(sfondo_fancy.png) !important;*/
    background:transparent;
}

#fancybox-hide-sel-frame {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: transparent;
    z-index: 1101;
}

#fancybox-close {
    position: absolute;
    top: -15px;
    right: -15px;
    width: 30px;
    height: 30px;
    background: transparent url('fancybox.png') -40px 0px;
    cursor: pointer;
    z-index: 1103;
    display: none;
}

#fancybox-error {
    color: #444;
    font: normal 12px/20px Arial;
    padding: 14px;
    margin: 0;
}

#fancybox-img {
    width: 100%;
    height: 100%;
    padding: 0;
    margin: 0;
    border: none;
    outline: none;
    line-height: 0;
    vertical-align: top;
}

#fancybox-frame {
    width: 100%;
    height: 100%;
    border: none;
    display: block;
}

#fancybox-left, #fancybox-right {
    position: absolute;
    bottom: 0px;
    height: 100%;
    width: 35%;
    cursor: pointer;
    outline: none;
    background: transparent url('blank.gif');
    z-index: 1102;
    display: none;
}

#fancybox-left {
    left: 0px;
}

#fancybox-right {
    right: 0px;
}

#fancybox-left-ico, #fancybox-right-ico {
    position: absolute;
    top: 50%;
    left: -9999px;
    width: 30px;
    height: 30px;
    margin-top: -15px;
    cursor: pointer;
    z-index: 1102;
    display: block;
}

#fancybox-left-ico {
    background-image: url('fancybox.png');
    background-position: -40px -30px;
}

#fancybox-right-ico {
    background-image: url('fancybox.png');
    background-position: -40px -60px;
}

#fancybox-left:hover, #fancybox-right:hover {
    visibility: visible; /* IE6 */
}

#fancybox-left:hover span {
    left: 20px;
}

#fancybox-right:hover span {
    left: auto;
    right: 20px;
}

.fancybox-bg {
    position: absolute;
    padding: 0;
    margin: 0;
    border: 0;
    /*width: 20px;
    height: 20px;*/
    width: 0px;
    height: 0px;
    z-index: 1001;
}

#fancybox-bg-n {
    top: -20px;
    left: 0;
    width: 100%;
    background-image: url('fancybox-x.png');
}

#fancybox-bg-ne {
    top: -20px;
    right: -20px;
    background-image: url('fancybox.png');
    background-position: -40px -162px;
}

#fancybox-bg-e {
    top: 0;
    right: -20px;
    height: 100%;
    background-image: url('fancybox-y.png');
    background-position: -20px 0px;
}

#fancybox-bg-se {
    bottom: -20px;
    right: -20px;
    background-image: url('fancybox.png');
    background-position: -40px -182px; 
}

#fancybox-bg-s {
    bottom: -20px;
    left: 0;
    width: 100%;
    background-image: url('fancybox-x.png');
    background-position: 0px -20px;
}

#fancybox-bg-sw {
    bottom: -20px;
    left: -20px;
    background-image: url('fancybox.png');
    background-position: -40px -142px;
}

#fancybox-bg-w {
    top: 0;
    left: -20px;
    height: 100%;
    background-image: url('fancybox-y.png');
}

#fancybox-bg-nw {
    top: -20px;
    left: -20px;
    background-image: url('fancybox.png');
    background-position: -40px -122px;
}

#fancybox-title {
    font-family: Helvetica;
    font-size: 12px;
    z-index: 1102;
}

.fancybox-title-inside {
    padding-bottom: 10px;
    text-align: center;
    color: #333;
    background: #fff;
    position: relative;
}

.fancybox-title-outside {
    padding-top: 10px;
    color: #fff;
}

.fancybox-title-over {
    position: absolute;
    bottom: 0;
    left: 0;
    color: #FFF;
    text-align: left;
}

#fancybox-title-over {
    padding: 10px;
    background-image: url('fancy_title_over.png');
    display: block;
}

.fancybox-title-float {
    position: absolute;
    left: 0;
    bottom: -20px;
    height: 32px;
}

#fancybox-title-float-wrap {
    border: none;
    border-collapse: collapse;
    width: auto;
}

#fancybox-title-float-wrap td {
    border: none;
    white-space: nowrap;
}

#fancybox-title-float-left {
    padding: 0 0 0 15px;
    background: url('fancybox.png') -40px -90px no-repeat;
}

#fancybox-title-float-main {
    color: #FFF;
    line-height: 29px;
    font-weight: bold;
    padding: 0 0 3px 0;
    background: url('fancybox-x.png') 0px -40px;
}

#fancybox-title-float-right {
    padding: 0 0 0 15px;
    background: url('fancybox.png') -55px -90px no-repeat;
}

/* IE6 */

.fancybox-ie6 #fancybox-close { background: transparent; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_close.png', sizingMethod='scale'); }

.fancybox-ie6 #fancybox-left-ico { background: transparent; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_nav_left.png', sizingMethod='scale'); }
.fancybox-ie6 #fancybox-right-ico { background: transparent; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_nav_right.png', sizingMethod='scale'); }

.fancybox-ie6 #fancybox-title-over { background: transparent; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_title_over.png', sizingMethod='scale'); zoom: 1; }
.fancybox-ie6 #fancybox-title-float-left { background: transparent; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_title_left.png', sizingMethod='scale'); }
.fancybox-ie6 #fancybox-title-float-main { background: transparent; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_title_main.png', sizingMethod='scale'); }
.fancybox-ie6 #fancybox-title-float-right { background: transparent; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_title_right.png', sizingMethod='scale'); }

.fancybox-ie6 #fancybox-bg-w, .fancybox-ie6 #fancybox-bg-e, .fancybox-ie6 #fancybox-left, .fancybox-ie6 #fancybox-right, #fancybox-hide-sel-frame {
    height: expression(this.parentNode.clientHeight + "px");
}

#fancybox-loading.fancybox-ie6 {
    position: absolute; margin-top: 0;
    top: expression( (-20 + (document.documentElement.clientHeight ? document.documentElement.clientHeight/2 : document.body.clientHeight/2 ) + ( ignoreMe = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop )) + 'px');
}

#fancybox-loading.fancybox-ie6 div  { background: transparent; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_loading.png', sizingMethod='scale'); }

/* IE6, IE7, IE8 */

.fancybox-ie .fancybox-bg { background: transparent !important; }

.fancybox-ie #fancybox-bg-n { filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_shadow_n.png', sizingMethod='scale'); }
.fancybox-ie #fancybox-bg-ne { filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_shadow_ne.png', sizingMethod='scale'); }
.fancybox-ie #fancybox-bg-e { filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_shadow_e.png', sizingMethod='scale'); }
.fancybox-ie #fancybox-bg-se { filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_shadow_se.png', sizingMethod='scale'); }
.fancybox-ie #fancybox-bg-s { filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_shadow_s.png', sizingMethod='scale'); }
.fancybox-ie #fancybox-bg-sw { filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_shadow_sw.png', sizingMethod='scale'); }
.fancybox-ie #fancybox-bg-w { filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_shadow_w.png', sizingMethod='scale'); }
.fancybox-ie #fancybox-bg-nw { filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_shadow_nw.png', sizingMethod='scale'); } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:58:02.530

Add the background image to #fancybox-wrap

```
#fancybox-wrap {
    position: absolute;
    top: 0;
    left: 0;
    padding: 20px;
    z-index: 1101;
    outline: none;
    display: none;
    background: url('sfondo_fancy.png') repeat;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T08:57:43.880

如果您有一个 1x1 像素的图像，则可以使用颜色而不是图像作为背景。因为该图像只有一种颜色。

# mysql - 如何使用mysql分解整数

> ID：11325562
> 
> 赞同：4
> 
> 时间：2012-07-04T08:48:51.187
> 
> 标签：mysql, math

在做我的项目时，我需要使用 mysql 找到整数的素因数分解，我认为这是除了做所有递归事情之外查询的有效方法。

而我想要实现的是找到组成整数的素数。

例如：对于*102*，阶乘数为：*17* , *3* , *2*

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T12:20:00.947

信封策略的背面（仍然需要第 2 步的程序循环）

1.  使用单个 int 列（主键）创建表“primes”

2.  运行这个循环：

    ```
    for $x = 2 to $n {
      execute("
        insert into primes (id) 
        select $x where not exists 
         (select * from primes as p where p.id <= sqrt($x) AND ($x mod p.id) > 0)")
    } 
    ```

3.  使用上面的子查询列出特定 $x 的结果

此解决方案适用于 $n^2 的值。步骤 2 可以通过仅测试最后一位 1、3、7、9 的超过 9 的数字来改进。

# python - 在 django 管理过滤中添加数据

> ID：11325564
> 
> 赞同：0
> 
> 时间：2012-07-04T08:48:58.980
> 
> 标签：python, django, django-models, django-admin

嗨，我的 django 中有 3 个模型。产品、客户和订单。

```
Class Client(models.Model):
 name = ...
 ....

Class Product(models.Model):
 name = ...
 client = models.ForeignKey(Client)
 .....

Class Order(models.Model):
 qty = ...
 created = ...
 customer_name = ...
 ...
 ...
 client = models.ForeignKey(Client)
 product = models.ForeignKey(Product) 
```

管理员.py

```
 class OrderAdmin(admin.ModelAdmin):
        pass

    admin.site.register(Order, OrderAdmin) 
```

我的项目流程是，我有这么多`Clients`，每个人都有这么多`products`。因此，当有 时`Order`，我指定订单的`Clients`和`product`。

我的问题是，在我的管理页面中，当我添加一个 时`Order`，选择一个特定的`client`，当我向下滚动该`Product`字段时，它将显示`products`.

我的问题是，是否有可能在管理页面中，`Order`当我滚动时添加一个`Product`，它只会显示我选择的`Product`列表？`client`怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:17:20.373

是的，它是可能的，并且有据可查。这是官方文档：[自定义验证](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#adding-custom-validation-to-the-admin)。这也可能有帮助：[stackoverflow 链接](https://stackoverflow.com/questions/6581520/filtering-dropdown-values-in-django-admin)

# c# - 无法使用 vs2008 powershell 复制代理文件

> ID：11325571
> 
> 赞同：0
> 
> 时间：2012-07-04T08:49:15.510
> 
> 标签：c#, wcf, web-services, visual-studio-2008, powershell

嗨，我在现有的 web 服务中编写了新功能。我在重建并复制到我使用 powershell 的特定位置时正在复制代理文件，但它不起作用。我收到以下错误。

```
**The term 'wsdl.exe' is not recognized as the name of a cmdlet, function, script
file, or operable program. Check the spelling of the name, or if a path was in
cluded, verify that the path is correct and try again.
At C:\[path edited for security]\RebuildProxy.ps1:30 char:9
+ wsdl.exe <<<<  /fields "/l:CS" "/n:$namespace" "/out:$outCSFile" "/urlkey:Tes
tEndpoint" "$wsdlUrl";
+ CategoryInfo          : ObjectNotFound: (wsdl.exe:String) [], CommandNot 
FoundException
+ FullyQualifiedErrorId : CommandNotFoundException** 
```

重建后，我收到消息文件已在源编辑器之外修改[生成的代理文件已经存在于该位置]，请您帮我解决这个发布在 powershell 代码下面的问题

```
param (
    [string]$webServiceProjFile = $(throw "webServiceProjFile paramter is required." ),
    [string]$serviceFile = $(throw "serviceFile parameter is required."),
    [string]$outCSFile = $(throw "outCSFile paramter is required." )
)

if (! [IO.File]::Exists($webServiceProjFile))
{
    throw "$webServiceProjFile note found.";
}

if (! [IO.File]::Exists($outCSFile))
{
    throw "$outCSFile note found.";
}

# read the project file into an XML document.
$projectFileXml = [xml] (Get-Content $webServiceProjFile );

# access the configured IIS URL
$serviceWsdlUrl = [string]::Concat($projectFileXml.Project.ProjectExtensions.VisualStudio.FlavorProperties.WebProjectProperties.IISUrl.Trim(), '/', $serviceFile);

$namespace = "";
# Read the namespace for the proxy from the proxy C# file
Get-Content $outCSFile | ForEach-Object { if ($_ -match "^\s*namespace\s+([A-Za-z._]+)\s+{\s*$") { $namespace = $matches[1] }};

$wsdlUrl = [string]::Concat("$serviceWsdlUrl", '?wsdl');

# Regenerate the proxy using WSDL.exe
wsdl.exe /fields "/l:CS" "/n:$namespace" "/out:$outCSFile" "/urlkey:TestEndpoint" "$wsdlUrl";

# Update the generated C# file so the proxy class interits from WSE2 base class.
(Get-Content $outCSFile) |
ForEach-Object { $_ -replace "\s+\:\s+System\.Web\.Services\.Protocols\.SoapHttpClientProtocol", " : Microsoft.Web.Services2.WebServicesClientProtocol" } |
Set-Content $outCSFile ;

$projectDirectory = [IO.Path]::GetDirectoryName($outCSFile);

$appConfigFilePath = [IO.Path]::Combine($projectDirectory, "App.config");

(Get-Content $appConfigFilePath) |
ForEach-Object { $_ -replace '<add\s+key="TestEndpoint"\s+value="[^"]*"\s+/>', "<add key=""TestEndpoint"" value=""$serviceWsdlUrl"" />" } |
Set-Content $appConfigFilePath ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:59:51.570

WSDL.EXE 不在路径中。在我的电脑上，它带有视觉工作室。

```
C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\bin\NETFX 4.0 Tools\x64\wsdl.exe 
```

# android - ImageView 和 Listview - Android

> ID：11325577
> 
> 赞同：2
> 
> 时间：2012-07-04T08:49:43.507
> 
> 标签：android, android-layout, android-listview, android-imageview

再会！！！

我的布局有问题，特别是在 android 中的横向。

当我要将方向更改为横向时，似乎 ImageView 处于固定位置，我只能在列表视图中看到滚动条......我只想有一个布局，也可以滚动 imageview 以便我可以清楚地看到列表项。

这是我的布局 xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="fill_parent"
    android:adjustViewBounds="true"
    android:scaleType="fitXY"
    android:layout_height="wrap_content"
    android:contentDescription="@string/app_name"
    android:src="@drawable/banner" />

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@+id/imageView1"
        android:drawSelectorOnTop="true" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T09:05:04.960

这有点棘手，因为您不能将列表视图放在滚动视图中，但是如果您创建一个可以具有不同类型行的自定义适配器（例如，仅包含文本的行，带有 ImageView 的行等），则可以使其工作.)。

然后让 ListView 中的第一行始终是图像。

查看本[教程](http://android.amberfog.com/?p=296)（部分：不同列表项的布局）以了解如何制作不同类型的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T09:38:43.283

我认为在 ScrollView 中使用 ListView 不是一件好事如果您希望该图像也应该滚动而不是这样：

1）对于 Listview，您需要一个自定义**适配器** ，其中在自定义适配器类的**getview()**方法中，您必须像这样

```
 public View getView(int position, View convertView, ViewGroup parent)
    {

    LayoutInflater inflater = getLayoutInflater();
    View row;

    row = inflater.inflate(R.layout.listview_rowlayout, parent, false);

    TextView textview = (TextView) row.findViewById(R.id.tv_list);
    ImageView imageview = (ImageView) row.findViewById(R.id.iv_list);

    textview.setText(data_text[position]);
    if(position==0){
    imageview.setImageResource(R.drawable.YourimageName);
    }else{
     imageview.setVisibility(View.GONE);
    }
  return (row);

} 
```

你的**listview_rowlayout.xml**是这样的

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical" >

    <ImageView
        android:id="@+id/iv_list"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParenttop="true"
        android:layout_marginLeft="10dp"
       />

    <TextView
        android:id="@+id/tv_list"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:textColor="#000000"
        android:layout_alignBottom="@+id/imageView1"
        android:text="" />

</RelativeLayout> 
```

并且您在其中添加了 listview 的**main.xml**应该是这样的

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent" >
<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:drawSelectorOnTop="true" />

</RelativeLayout> 
```

# android - 从 GCM 通知中获取数据

> ID：11325580
> 
> 赞同：15
> 
> 时间：2012-07-04T08:49:51.390
> 
> 标签：android, notifications, google-cloud-messaging

有没有办法从“GCM 通知”中获取数据。这是我用 gcm: 发送的 json 字符串的一部分`{"data":{"id":"123"}}`。我需要在我的应用程序中获取 id 的值，但我不知道如何......非常感谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-04T15:51:10.633

如果您使用的是新的 GCM 库，那么您需要创建一个扩展 IntentService 的类，这是 GCM 库在收到 GCM 消息时通知您的地方。请看一下 MyIntentService.java 示例：

```
@Override
public final void onHandleIntent(Intent intent) {
    try {
        String action = intent.getAction();
        if (action.equals("com.google.android.c2dm.intent.REGISTRATION")) {
            handleRegistration(intent);
        } else if (action.equals("com.google.android.c2dm.intent.RECEIVE")) {
            handleMessage(intent);
        }
    } finally {
        synchronized(LOCK) {
            sWakeLock.release();
        }
    }
}

private void handleMessage(Intent intent) {
    String id = intent.getExtra("id");
} 
```

如果您没有使用 GCM 库，那么 GCM 响应会在您的接收器中以意图的形式发送给您，那么您可以使用意图的 getExtras().getString() 从 GCM 通知中检索键/值对。例如

```
// intent come in in your onReceive method of your BroadcastReceiver:
public onReceive(Context context, Intent intent) {
   // check to see if it is a message
   if (intent.getAction().equals("com.google.android.c2dm.intent.RECEIVE")) {
      String id = intent.getExtras().getString("id");
      String other_key = intent.getExtras().getString("other_key");

      // if your key/value is a JSON string, just extract it and parse it using JSONObject
      String json_info = intent.getExtras().getString("json_info");
      JSONObject jsonObj = new JSONObject(json_info);          
   }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-31T09:21:46.100

将其作为 json 表示的最佳方法是将数据添加为 json 对象。

```
{
    "registration_ids" : [
        "id1",
        "id2"
    ],
    "data" : {
        "my_json_object": {
            "text" :"This is my message",
            "title":"Some title"
        }
    },
    "collapse_key":"12345"
} 
```

然后解析你的对象：

```
String json = getIntent().getExtras().getString("my_json_object");
JsonObject jObject = new JsonObject(json); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-12T10:57:40.033

```
<receiver android:name=".beforelogin.GcmBroadcastReceiver"
          android:permission="com.google.android.c2dm.permission.SEND">
    <intent-filter>
        <action android:name="com.google.android.c2dm.intent.RECEIVE" />
        <category android:name="android.intent.category.TAB" />
    </intent-filter>
</receiver>
<service android:name=".beforelogin.GcmIntentService" />
<meta-data android:name="com.google.android.gms.version"
           android:value="@integer/google_play_services_version" /> 
```

# asp.net - ASP.NET v4 无扩展 URL 功能在 IIS 6.0 上不起作用

> ID：11325584
> 
> 赞同：3
> 
> 时间：2012-07-04T08:49:55.437
> 
> 标签：asp.net, .net, asp.net-mvc, asp.net-mvc-3, iis-6

为避免静态请求影响性能，我想使用 ASP.NET v4.0 无扩展 URL 功能，但它不起作用。

我的环境：

1.  Windows 服务器 sp2 和 IIS6
2.  asp.net MVC 3 与 .net 4
3.  该站点针对 ASP.NET 4.0 进行了配置，并且没有虚拟文件夹
4.  没有 isapi 重写

我请求了“http://domain.com/home/”之类的 url，然后得到“/home/eurl.axd/f7e1f50533b94f47869a8856c16dffdf/”404 错误。

错误信息显示：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.1

似乎：aspnet_filter.dll 将“/eurl.axd/GUID”附加到无扩展 URL 和 aspnet_isapi.dll 不会删除“/eurl.axd/GUID”。

我想知道如何解决这个问题？（我需要无扩展名的 url，不能使用通配符脚本映射）

谢谢

> **更新 - 已解决**

**删除根网站的 ISAPI 过滤器**中的 v2.0 aspnet_isapi.dll

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T02:26:39.910

要使用 ASP.NET v4 无扩展 URL 功能，请查看以下列表：

1) v4.0 aspnet_filter.dll 在 Web 服务器级别注册为 ISAPI 过滤器。

2) “.axd”是在网站级别映射到 v4.0 aspnet_isapi.dll 的脚本。

3) 网站具有阅读和脚本权限。

4）注册表中的“EnableExtensionlessUrls”未设置或设置为1。

5）网站配置为asp.net 4.0

6) **v2.0 aspnet_filter.dll 没有注册，检查根网站的ISAPI过滤器列表**（这是我的问题）

如果上述检查通过，您唯一需要的其他东西就是路由表或一些将 URL 重新映射到托管处理程序的 ASP.NET 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T14:57:08.397

Notice that IIS 6 and IIS 7 have two different pipelines and so ASP.NET applications run differently in these two invironments.

Please read: [ASP.NET Integration with IIS 7](http://learn.iis.net/page.aspx/243/aspnet-integration-with-iis/)

> In IIS 7, the ASP.NET request-processing pipeline overlays the IIS pipeline directly, essentially providing a wrapper over it instead of plugging into it.

but

> In IIS 6.0 and previous releases, ASP.NET was implemented as an IIS ISAPI extension.**

# mysql - 简化 Doctrine 查询

> ID：11325586
> 
> 赞同：0
> 
> 时间：2012-07-04T08:50:05.310
> 
> 标签：mysql, zend-framework, doctrine-orm

## 我是 Doctrine ORM 或任何 ORM 的新手

```
$em = Zend_Registry::getInstance ()->entitymanager;         
$p = $em->createQuery ( "               
SELECT u                
FROM Teon_Model_User u              
WHERE u.app_auth IN (:app_auth)" );                     
$p->setParameter ( 'app_auth', $app_auth );         
$array = $p->getArrayResult();      
$customer_id = $array[0]['customer_id']; 

$p = $em->createQuery ( "               
SELECT p                
FROM Teon_Model_Purchase p              
WHERE p.customer IN (:customer_id)" );                  
$p->setParameter ( 'customer_id', $customer_id );       
$array = $p->getArrayResult();      
$purchase_id = $array[0]['id'];      

$p = $em->createQuery ( "               
SELECT pm               
FROM Teon_Model_PurchaseManual pm               
WHERE pm.purchase_id IN (:purchase_id)" );                  
$p->setParameter ( 'purchase_id', $purchase_id );       
$array = $p->getArrayResult();      
$m_id = $array[0]['manual_id']; 
```

你能简化这个查询吗，它看起来很愚蠢，我在 zend 框架中使用 Doctrine

这个查询是通过提供一个验证码来验证用户是否在他的购买中有manual_id..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T16:29:46.540

这是我能想到的两种简单方法：

```
<?php

$em = Zend_Registry::getInstance()->entitymanager;

// 1st way
$user = $em->getRepository('Teon_Model_User')->findOneByAppAuth($app_auth);
$user->getCustomerId();

// 2nd way
$user = $em->getRepository('Teon_Model_User')->findOneBy(array(
    'app_auth' => $app_auth,
));
$user->getCustomerId(); 
```

# vb.net - 如何根据标签名称选择标签并获取其计数

> ID：11325588
> 
> 赞同：-1
> 
> 时间：2012-07-04T08:50:08.480
> 
> 标签：vb.net, xpath, xmldocument

无法选择带有标签名称的节点。

小XML：

```
<author-group id="a001">
<author id="aa001">
  <given-name id="g001">Name</given-name>
  <surname id="s001">Name</surname>
</author>
<author id="aa002">
 <given-name id="g002">Name</given-name>
 <surname id="s002">Name</surname>
</author>
<author id="aa003">
   <given-name id="g003">Name</given-name>
   <surname id="s003">Name</surname>
</author>
</author-group> 
```

代码尝试：

```
Dim xDom As New Xml.XmlDocument
xDom .LoadXml(XMLStr)
Dim Lst As XmlNodeList = xDom.SelectNodes("//author")
Dim NodeCount as Integer =Lst.Count() 
```

计数为零..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T11:27:28.237

该`xmlns`属性定义了所谓的默认名称空间，该名称空间适用于该元素所在的元素下的所有内容。但是，您的 XPath 没有指定任何名称空间，这意味着它只会查找`author`不在任何名称空间中的元素。因此，您实际上是在寻找错误的元素名称。

使用命名空间的 XPath 查询需要`XmlNamespaceManager`提供命名空间前缀到命名空间的映射。也可以按以下相同的方式在 XPath 中使用默认名称空间。

`xxx`在以下代码段中替换默认命名空间 URI ，并在加载`xDom`文档后执行此操作：

```
'Create an XmlNamespaceManager for resolving namespaces.
Dim nsmgr as XmlNamespaceManager = new XmlNamespaceManager(xDom.NameTable)
nsmgr.AddNamespace(String.Empty, "xxx")

Dim nodeList as XmlNodeList 
Dim root as XmlElement = xDom.DocumentElement
nodeList = root.SelectNodes("//author", nsmgr) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:24:08.547

试试这个（添加 xml DTD，并使用 XDocument）：

```
Dim x As XDocument = <?xml version="1.0" encoding="utf-8"?>
                             <author-group id="a001">
                                 <author id="aa001">
                                     <given-name id="g001">Name</given-name>
                                     <surname id="s001">Name</surname>
                                 </author>
                                 <author id="aa002">
                                     <given-name id="g002">Name</given-name>
                                     <surname id="s002">Name</surname>
                                 </author>
                                 <author id="aa003">
                                     <given-name id="g003">Name</given-name>
                                     <surname id="s003">Name</surname>
                                 </author>
                             </author-group>

Dim xDom As New XmlDocument
xDom.LoadXml(x.ToString())
Dim Lst As XmlNodeList = xDom.SelectNodes("//author")
Dim Cnt As Integer = Lst.Count() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T10:06:47.287

我将您的代码复制到一个新项目中并且它工作正常。这是我的测试项目中的代码：

```
Dim XMLStr As String = "<author-group id=""a001""><author id=""aa001"">  <given-name id=""g001"">Name</given-name>  <surname id=""s001"">Name</surname></author><author id=""aa002""> <given-name id=""g002"">Name</given-name> <surname id=""s002"">Name</surname></author><author id=""aa003"">   <given-name id=""g003"">Name</given-name>   <surname id=""s003"">Name</surname></author></author-group>"
Dim xDom As New Xml.XmlDocument
xDom.LoadXml(XMLStr)
Dim Lst As XmlNodeList = xDom.SelectNodes("//author")
Dim Cnt As Integer = Lst.Count() 
```

因此，您的错误必须在代码中的其他位置。

# python - Python + Django - 更新列表列表中的值

> ID：11325592
> 
> 赞同：0
> 
> 时间：2012-07-04T08:50:15.937
> 
> 标签：python, django, data-structures

我正在尝试使用以下源代码更新列表列表中的值：

```
target_agreement = get_object_or_404(TargetAgreement.objects, pk=agreement_id)
target_category_set = TargetCategory.objects.filter(company=target_agreement.company, is_active=True).order_by('position')

category_targets = []
if target_category_set:
    totals = [[0]*3]*len(target_category_set) #list of lists with list on level 2 having length of 3
else:
    totals = [[0]*3]*1

for (index1,target_category) in enumerate(target_category_set):
        category_targets_temp = []

        for (index2,target) in enumerate(target_category.category_targets.filter(user=request.user, agreement=target_agreement)):
            category_targets_temp.append(target)
            print "*******"
            print "index is: " 
            print index1
            print totals[index1][0]
            totals[index1][0] = totals[index1][0] + target.weight
            print totals[index1][0]
            print "totals are"
            print totals
            print "*******"
        print "final result"
        print totals[index1][0]
        print totals
        print "-----"
        category_targets.append(category_targets_temp)
    print totals 
```

我不明白的行为`totals[index1][0] = totals[index1][0] + target.weight`不仅是更新 index1 引用的列表中的第一个元素，而且是所有列表中的所有第一个元素。

结果如下：

```
[[88, 0, 0], [88, 0, 0], [88, 0, 0], [88, 0, 0]] 
```

但我本来预计：

```
[[36, 0, 0], [50, 0, 0], [1, 0, 0], [1, 0, 0]] 
```

有人可以澄清我做错了什么。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T08:58:27.397

The reason is the way you created that `totals` list. By multiplying the list -

```
totals = [[0]*3]*len(target_category_set) 
```

You create a list whose elements are references to the same list. Thus, when you modify one element, all of them are modified. Consider:

```
In [1]: l = [[1, 2]]*3

In [2]: l
Out[2]: [[1, 2], [1, 2], [1, 2]]

In [3]: l[0].append(3)

In [4]: l
Out[4]: [[1, 2, 3], [1, 2, 3], [1, 2, 3]] 
```

But you could avoid this by changing the list definition:

```
In [5]: l = [[1, 2] for _ in range(3)]

In [6]: l[0].append(3)

In [7]: l
Out[7]: [[1, 2, 3], [1, 2], [1, 2]] 
```

# ruby - 使用 HAML 在 Sinatra 上运行的 Ruby 应用程序无法访问上传目录中的文件？

> ID：11325593
> 
> 赞同：2
> 
> 时间：2012-07-04T08:50:17.127
> 
> 标签：ruby, sinatra, haml

我有一个 Ruby 应用程序，它是一个 Image Resizer。它使用 RMagick gem 来做到这一点。该应用程序要求用户上传文件，然后调整其大小并保存新生成的文件。

似乎 Sinatra 默认将所有上传的文件放入“上传”目录，并且新生成的文件似乎也保存在那里。我假设这是默认行为，不知道如何更改它，但目前这不是一个直接的问题（尽管如果你知道如何做到这一点，那也将不胜感激）。

现在，在正确生成文件后显示的“success.haml”页面中，我正在尝试使用简单的 img 标签显示新生成的图像。文件的路径在@filepath 中找到，所以当我这样做时：

```
%img(src=@filepath) 
```

呈现的 HTML（使用 Firebug 检查时）正确显示

```
<img src="uploads/filename.jpg"> 
```

这个文件确实存在于我的文件夹结构中。但是，图像似乎已损坏。

关于如何克服这个问题的任何想法？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T14:55:27.643

`uploads/filename.jpg`之所以这样称呼相对 url ( )，是因为它们是相对于 Web 根目录的。在 Sinatra 中，这是公用文件夹。默认情况下，它位于您的应用程序目录中并称为`public`. 但是你可以覆盖它。

```
set :public_folder, 'my_root' # this will make my_root dir the web root. 
```

因此，要使您的上传内容对 Internet 可见，请将它们放入您的公共文件夹中。

[阅读本文](http://www.sinatrarb.com/configuration.html)以了解更多 Sinatra 设置和自定义。

# mysql - mysql查询评分系统

> ID：11325598
> 
> 赞同：0
> 
> 时间：2012-07-04T08:50:38.760
> 
> 标签：mysql, ranking, rating

```
select 
    user_id,
    @pos:=(@pos+1) as new_position,
    (coins+total_item_costs) as wealth 
from user_ledger 
join users using (user_id),(select @pos:=0) p 
ORDER BY wealth DESC 
limit 10;

+---------+--------------+------------+
| user_id | new_position | wealth     |
+---------+--------------+------------+
|      19 |           19 | 1112823871 |
|      11 |           11 |   13318047 |
|       8 |            8 |    7292407 |
|       6 |            6 |    6122746 |
|      27 |           27 |    5271889 |
|      23 |           23 |    5263050 |
|       9 |            9 |    5171734 |
|       3 |            3 |    5136092 |
|      15 |           15 |    5097488 |
|       4 |            4 |    5089487 |
+---------+--------------+------------+
10 rows in set (0.01 sec) 
```

new_position 不正确.. 怎么了，伙计们？:)

附言。请不要告诉我使用临时表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:02:33.653

应该事先做ORDER BY的位置。

```
SELECT user_id,@pos:=(@pos+1) as new_position,wealth FROM (
      select user_id,(coins+total_item_costs) as wealth from user_ledger join users 
      using (user_id) ORDER BY wealth DESC limit 10 ) a,(select @pos:=0) p 
```

# c++ - C ++如何遍历对象的std :: vector并在控制台上显示内容

> ID：11325607
> 
> 赞同：3
> 
> 时间：2012-07-04T08:51:14.487
> 
> 标签：c++, stdvector

For 循环应该遍历 std::vector 并填充内容。

第一个 for 循环给了我一条错误消息：

NO BINARY OPERATOR FOUND << 无法转换

```
vector<MyClass>classVector;
    for (vector<MyClass>::iterator i = classVector.begin();
                           i != classVector.end();
                           ++i)
            {
                cout << *i << endl;
            } 
```

MyClass.h：

```
class MyClass{

private:

    string newTodayTaskString;

public:
    MyClass(string t) : newTodayTaskString (t){}

    ~MyClass(){}
}; 
```

这个 for 循环遍历字符串向量并完美运行。为什么？

```
vector<string>stringVector;
   for (vector<string>::iterator i = stringVector.begin(); 
                         i != stringVector.end(); 
                         ++i) 
            {
                cout<<*i<<endl;
            } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T08:56:01.953

这个问题与迭代无关，只是因为你可以写

```
std::string s = "Hello";
std::cout << s; 
```

但不是

```
MyClass o("Hello");
std::cout << o; 
```

请参阅[如何为 ostream 正确重载 << 运算符？](https://stackoverflow.com/questions/476272/how-to-properly-overload-the-operator-for-an-ostream)关于如何超载`operator <<`使其工作！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T08:54:13.823

如果您希望能够直接调用`std::cout::operator <<`.

您可以将其定义为：

```
 std::ostream& operator << (std::ostream& stream, const MyClass& obj)
 {
    stream << obj.newTodayTaskString;
 } 
```

并将此运算符声明为朋友，以便它可以访问类的私有成员或为您的类提供打印函数并使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T08:54:55.737

我认为您想打印班级的成员，而不是班级本身。

例如：

```
cout << (*i).Name << endl; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-27T04:35:49.860

您正在遍历“MyClass”的向量，这可能是用户定义的类型。因此，您必须告诉编译器，您对“MyClass”类的哪些数据感兴趣。下面是示例代码 - 仅用于理解目的

```
// Temp_Practice.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include<iostream>
#include<memory>
#include<ostream>
#include <vector>>
using namespace std;

// This example is just for understanding/Demo purpose.
// it will not run on any compiler
class MyClass {
public:
    std::string _name;
    std::string _address;
    int         _age;
    // Constructor
public:
    MyClass() {}
    MyClass(std::string name, std::string address, int age) :_name(name), _address(address), _age(age) {}

    //Destructor
    //..

    // other stuff
    friend ostream& operator << (ostream& os, std::string _input);

};
 ostream& operator << (ostream& os, std::string _input)
{
     os << _input.c_str();
     return os;
}

int main()
{
    std::vector<MyClass> vecMyClass;

    MyClass temp("AA", "BB", 1);
    vecMyClass.push_back(temp);

    MyClass temp1("CC", "DD", 2);
    vecMyClass.push_back(temp1);

    MyClass temp2("EE", "FF", 3);
    vecMyClass.push_back(temp2);

    MyClass temp3("GG", "HH", 4);
    vecMyClass.push_back(temp3);

    MyClass temp4("II", "JJ", 5);
    vecMyClass.push_back(temp4);

    MyClass temp5("KK", "LL", 6);
    vecMyClass.push_back(temp5);
    std::vector<MyClass>::iterator itr;
    for ( itr = vecMyClass.begin(); itr != vecMyClass.end(); ++itr)
    {
        // Compiler throws error; it does not know what programer wants to print. So its 
        // programer responsiblity to let compiler know what to be printed
         //std::cout << itr << std::endl; //  Error!!!!

        // Correct Code
        std::cout << itr->_name << itr->_address << itr->_age << std::endl;
    }
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T08:58:04.603

您应该重载输出运算符。

```
#include <iostream>
#include <string>
#include <vector>
#include <iterator>

class MyClass{

private:
    std::string newTodayTaskString;

public:
    explicit MyClass(const std::string t) : newTodayTaskString (t){}
    std::ostream& print(std::ostream& os) const { return os << newTodayTaskString; }

    ~MyClass(){}
};

std::ostream& operator << (std::ostream& os, const MyClass& obj)
{
    return obj.print(os);
}

int main()
{
    std::vector<MyClass> vec = {MyClass("add"), MyClass("clear")};
    std::copy(vec.begin(), vec.end(), std::ostream_iterator<MyClass>(std::cout, "\n"));
} 
```

# ssis - SSIS：我没有看到包配置向导

> ID：11325608
> 
> 赞同：20
> 
> 时间：2012-07-04T08:51:18.010
> 
> 标签：ssis, sql-server-2012

使用 SQLServer 2012 Enterprise，当我在“控制流”选项卡中单击鼠标右键时，在 SSIS 中看不到“包配置向导”。我可以看到所有其他项目（日志、数字签名...）。

以下是有关我的安装的信息：

```
Microsoft Visual Studio 2010
Version 10.0.40219.1 SP1Rel
Microsoft .NET Framework
Version 4.0.30319 SP1Rel
Professional

SQL Server Analysis Services   
Concepteur Microsoft SQL Server Analysis Services 
Version 11.0.2100.60

SQL Server Integration Services   
Concepteur Microsoft SQL Server Integration Services
Version 11.0.2100.60

SQL Server Reporting Services   
Concepteurs Microsoft SQL Server Reporting Services
Version 11.0.2100.60 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-03-10T08:09:55.087

它仍然可用，但被隐藏了，因为在 2012 项目部署模型中[配置](http://microsoft-ssis.blogspot.nl/)包有点不同。但是如果你打开一个包，在 Control Flow 选项卡中右击，点击包的 Properties，然后你会在 Misc 下找到一个 Configurations 属性。 ![旧包配置](../Images/16d75d1ae9d230e2376d1f76f5387d19.png)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-07-04T12:55:33.263

SSIS 2012 版引入了一种新的配置和部署模型，称为项目部署模型。作为该更改的一部分，旧的配置方式（环境、xml、父包、注册表和表）不是一种选择。在项目部署模型中，您可以获得参数和环境。到目前为止，我认为这将是一个进步。

不过不要害怕，经典的做事方式仍然可用。右键单击您的项目并选择`Convert to Package Deployment Model`

![在此处输入图像描述](../Images/881c4d82c8ce1dbb86f3241403cc288b.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-12T11:12:28.760

1.  在项目菜单上，单击转换为包部署模型。
2.  在警告提示上单击 OK，一旦转换完成，在 Convert to Package Deployment Model 对话框中单击 OK。
3.  单击 SSIS 设计器中“控制流”选项卡的背景。
4.  在 SSIS 菜单上，单击包配置。
5.  在包配置管理器对话框中，选择启用包配置，然后单击添加。

请参阅此链接 >> [http://msdn.microsoft.com/en-IN/library/ms166598.aspx](http://msdn.microsoft.com/en-IN/library/ms166598.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-22T13:39:07.140

感谢您提供以下信息（我不知道如何找到此选项）：

它仍然可用，但被隐藏了，因为在 2012 项目部署模型中配置包有点不同。但是如果你打开一个包，在 Control Flow 选项卡中右击，点击包的 Properties，然后你会在 Misc 下找到一个 Configurations 属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-20T11:30:49.227

[![在此处输入图像描述](../Images/e0e420b71d43e675698b886a597aa779.png)](https://i.stack.imgur.com/Dv3Q8.png)如果您运行选项“隐蔽到部署模型”并且在菜单-> SSIS 下仍然没有看到“包配置”选项，那么您需要按照以下步骤操作

1.  右键单击项目并单击“属性”
2.  您会看到两个侧窗格，左侧窗格选择选项“部署”，然后右侧您会看到选项“创建部署实用程序”并将此选项设置为 TRUE
3.  单击确定并返回包，您将看到“包配置”可用
4.  “包配置”的快捷方式是右键单击包控制流中的空白区域并从菜单中选择。

# c# - MVC Razor 隐藏输入和传递值

> ID：11325616
> 
> 赞同：24
> 
> 时间：2012-07-04T08:51:38.253
> 
> 标签：c#, html, asp.net-mvc, asp.net-mvc-3, model-view-controller

我很确定我在这里做错了什么。在过去的两个月里，我们一直在使用 MVC 和 Razor 开发一个 Web 应用程序，我们从未想过使用表单元素。现在已经对母版页和子页做了很多工作，这意味着重组我们的大部分代码以使用表单元素，这将导致页面上有多个表单元素。

除此之外，在 Asp.Net 中，如果我想访问后面的 C# 代码中的任何控件，我可以给它一个 ID="SomeID" 和一个 RUNAT="SERVER"。然后在我后面的代码中，我可以设置它的值和属性。

当我在 Razor 中执行此操作时，我们使用如下行：

```
 <input id="hiddenPostBack" runat="server" type="hidden" /> 
```

为什么我不能在控制器中访问它？如果是第一次加载页面，我想检测回发并将值设置为 false，如果不是，则将值设置为 true。然后基于此，我将在服务器端或客户端读取它并做一些事情。

我真正的问题是，鉴于我没有表单元素，我如何在服务器端和客户端“做某事”。我的印象是，如果我想将值从客户端传递到服务器并返回，最简单的方法是使用隐藏输入。但我只是不知道如何使用 MVC3 和 razor 来实现这一点。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-04T09:10:36.473

从 WebForms 到 MVC 的转变需要对逻辑和大脑过程进行彻底的改变。您不再与服务器端和客户端的“表单”交互（事实上，即使使用 WebForms，您也没有与客户端交互）。您可能只是在其中混杂了一些想法，因为您只是在与 Web 页面的*构建*`RUNAT="SERVER"`进行交互。

 *MVC 有点相似，因为您在构建模型时拥有服务器端代码（构建用户将看到的数据所需的数据），但是一旦构建了 HTML，您需要了解服务器和用户之间的链接不复存在。他们有一个 HTML 页面，就是这样。

因此，您正在构建的 HTML 是*只读的*。您将模型传递到 Razor 页面，该页面将构建适合该模型的 HTML。

如果你想要一个隐藏元素，它根据这是否是第一个视图设置 true 或 false，你需要在模型中使用 bool，如果它是为了响应后续操作，则在 Action 中将其设置为 True。这可以通过根据请求是 [HttpGet] 还是 [HttpPost] 执行不同的操作来完成（如果这适合您设置表单的方式：第一次访问的 GET 请求和提交表单的 POST 请求）。

或者，模型可以在创建时设置为 True（这将是您第一次访问该页面），但*在*您检查值为 True 或 False 之后（因为实例化时 bool 默认为 False）。然后使用：

```
@Html.HiddenFor(x => x.HiddenPostBack) 
```

在您的表单中，这将隐藏一个 True。当表单被发送回您的服务器时，模型现在将该值设置为 True。

很难提供比这更多的建议，因为您的问题并不具体说明您*为什么*要这样做。阅读一本关于从 WebForms 迁移到 MVC 的好书可能很重要，例如 Steve Sanderson 的 Pro ASP.NET MVC。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-04T09:41:51.783

如果您使用的是 Razor，则无法直接访问该字段，但可以管理其值。

这个想法是，第一个 Microsoft 方法驱使开发人员远离 Web 开发，并使桌面程序员（例如）更容易制作 Web 应用程序。

同时，Web 开发人员并不了解 ASP.NET 这种诡谲诡异的方式。

实际上，这个隐藏的输入是在客户端呈现的，而 ASP 无法访问它（它从来没有）。但是，随着时间的推移，您会看到它是一种盗版方式，并且当您使用它时，您可能会依赖它。Web 开发不同于桌面或移动。

模型是您的逻辑单元，隐藏字段（和整个视图页面）只是数据的代表视图。因此，您可以将您的工作专门用于应用程序或域逻辑，而视图只是将其提供给消费者 - 这意味着您不需要视图中的详细访问和“头脑风暴”功能。

控制器实际上确实可以管理隐藏或常规设置。模型提供特定的逻辑单元属性和功能，而视图只是将其呈现给最终用户，简单地说。阅读有关[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)的更多信息。

模型

```
public class MyClassModel
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string MyPropertyForHidden { get; set; }
} 
```

这是控制器动作

```
public ActionResult MyPageView()
{
    MyClassModel model = new MyClassModel(); // Single entity, strongly-typed
    // IList model = new List<MyClassModel>(); // or List, strongly-typed
    // ViewBag.MyHiddenInputValue = "Something to pass"; // ...or using ViewBag

    return View(model);
} 
```

视图如下

```
//This will make a Model property of the View to be of MyClassModel
@model MyNamespace.Models.MyClassModel // strongly-typed view
// @model IList<MyNamespace.Models.MyClassModel> // list, strongly-typed view

// ... Some Other Code ...

@using(Html.BeginForm()) // Creates <form>
{
    // Renders hidden field for your model property (strongly-typed)
    // The field rendered to server your model property (Address, Phone, etc.)
    Html.HiddenFor(model => Model.MyPropertyForHidden); 

    // For list you may use foreach on Model
    // foreach(var item in Model) or foreach(MyClassModel item in Model)
}

// ... Some Other Code ... 
```

ViewBag 的视图：

```
// ... Some Other Code ...

@using(Html.BeginForm()) // Creates <form>
{
    Html.Hidden(
        "HiddenName",
        ViewBag.MyHiddenInputValue,
        new { @class = "hiddencss", maxlength = 255 /*, etc... */ }
    );
}

// ... Some Other Code ... 
```

我们正在使用 Html Helper 来呈现隐藏字段，或者我们也可以手动编写它`<input name=".." id=".." value="ViewBag.MyHiddenInputValue">`。

ViewBag 是视图的某种数据载体。它不限制您使用模型 - 您可以放置​​任何您喜欢的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T09:09:23.383

您可能已经想到，Asp.Net MVC 是不同于 Asp.Net（webforms）的范式。在服务器和客户端之间访问表单元素在 Asp.Net MVC 中采用了不同的方法。

您可以在网上搜索更多关于此的阅读材料。目前，我建议使用 Ajax 来获取或发布数据到服务器。您仍然可以使用`input type="hidden"`，但使用`ViewData`Razor 的 或 的值对其进行初始化，`ViewBag`。

例如，您的控制器可能如下所示：

```
public ActionResult Index()
{
     ViewBag.MyInitialValue = true;
     return View();
} 
```

在您看来，您可以拥有一个由您的值初始化的输入元素`ViewBag`：

```
<input type="hidden" name="myHiddenInput" id="myHiddenInput" value="@ViewBag.MyInitialValue" /> 
```

然后你可以通过ajax在客户端和服务器之间传递数据。例如，使用 jQuery：

```
$.get('GetMyNewValue?oldValue=' + $('#myHiddenInput').val(), function (e) {
   // blah
}); 
```

您也可以使用[`$.ajax`](http://api.jquery.com/jQuery.ajax/), [`$.getJSON`](http://api.jquery.com/jQuery.getJSON/)，[`$.post`](http://api.jquery.com/jQuery.post/)具体取决于您的要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T09:04:20.877

首先，ASP.NET MVC 的工作方式与 WebForms 不同。你没有全部`runat="server"`。MVC 不提供 WebForms 提供的抽象层。可能您应该尝试了解控制器和操作是什么，然后您应该查看模型绑定。任何关于 MVC 的初学者教程都展示了如何在客户端和服务器之间传递数据。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-04T09:09:07.003

您做错了，因为您尝试在 MVC 应用程序中映射 WebForms。

MVC 中没有服务器端控件。后端只有**View**和 **Controller 。**您通过使用模型初始化视图将数据从服务器发送到客户端。

这发生在对您的资源的 HTTP GET 请求上。

```
[HttpGet]
public ActionResult Home() 
{
  var model = new HomeModel { Greeatings = "Hi" };
  return View(model);
} 
```

您通过将数据发布到服务器来将数据从客户端发送到服务器。为了实现这一点，您 `[HttpPost]`在控制器的视图和处理程序中创建一个表单。

```
// View

@using (Html.BeginForm()) {
  @Html.TextBoxFor(m => m.Name)
  @Html.TextBoxFor(m => m.Password)
}

// Controller

[HttpPost]
public ActionResult Home(LoginModel model) 
{
  // do auth.. and stuff
  return Redirect();
} 
```*

# linux - 如何在读取时为 linux 中的命名管道运行命令？

> ID：11325617
> 
> 赞同：1
> 
> 时间：2012-07-04T08:51:38.317
> 
> 标签：linux, named-pipes

我想打开一个程序来写入命名管道，但是直到有人真正从命名管道中读取它才会写入。这是可以实现的吗？我怎么知道何时读取管道？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:01:21.317

写入管道实际上会阻塞，直到有人从管道读取

```
$ mkfifo f
$ printf "%s\n" "a" "b" "c" "d" > f & # on bg otherwise it blocks until someone reads it
$ cat < f
a
b
c
d
[1]+  Done                    printf "%s\n" "a" "b" "c" "d" > f 
```

`printf`所以你知道在上面的例子中何时读取管道是*Done*。

* * *

因此，一旦有人从管道中读取，等待运行命令可以实现为

```
printf "%s\n" > f && run_some_command 
```

但是如果命令只是向管道发送数据（在这里推测），您可以直接发送数据，因为它们只会在有人从管道读取时发送

```
some_command > f # will block until f is read from 
```

* * *

另一种查找*是否以及谁*在读取或写入管道的方法是`lsof`. 尝试

```
$ lsof f 
```

并且所有`f`读取或写入的进程都将与其 pid、进程名称、读取或写入操作一起列出。请参阅手册页。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T03:04:15.073

除了实现锁定文件或其他信号量/标志之外，我认为没有办法判断命名管道是否具有侦听器。但是，您也许能够检测到另一个方向的事物。 [Linus Akesson 写了一篇](http://www.linusakesson.net/programming/pipelogic/index.php)关于使用管道模拟逻辑门的博客文章。（这是一本引人入胜的超级极客读物。）为了实现他的想法，他需要编写一个工具来检查管道是否有数据等待，而无需实际将数据从管道中取出。

您可以获取他的代码，为您的平台编译它，然后拥有一个工具，该工具仅在确认数据正在等待通过它发送时才从管道中读取。在不知道您真正想要实现的目标的情况下，我不知道此解决方案是否适用于您的实际问题。

底线是命名管道没有缓冲，并且在不使用可能特定于平台的黑客的情况下不提供状态指示。要么发送进程等待接收者，要么接收进程等待发送者。

您可能希望使用比命名管道更高级的消息传递系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T09:14:32.437

命名管道在文件系统中是可见的，并且可以像其他文件一样读写：

```
$ ls -la /tmp/testpipe
prw-r--r-- 1 mitch users 0 2009-03-25 12:06 /tmp/testpipe| 
```

命名管道是通过 mkfifo 或 mknod 创建的：

```
$ mkfifo /tmp/testpipe
$ mknod /tmp/testpipe p 
```

以下 shell 脚本从管道中读取。如果管道不存在，它首先创建管道，然后循环读取，直到看到“退出”：

```
#!/bin/bash

pipe=/tmp/testpipe

trap "rm -f $pipe" EXIT

if [[ ! -p $pipe ]]; then
    mkfifo $pipe
fi

while true
do
    if read line <$pipe; then
        if [[ "$line" == 'quit' ]]; then
            break
        fi
        echo $line
    fi
done

echo "Reader exiting" 
```

# xml - 将属性复制到结束标签

> ID：11325619
> 
> 赞同：0
> 
> 时间：2012-07-04T08:51:47.850
> 
> 标签：xml, tags, copy

我有一个巨大的 xml 文件，我想将它导入 Excel。作为其中的一部分，我需要匹配的开始和结束标签。

这是我开始的一个片段：

```
 <FIELD NAME="language">en</FIELD>
<FIELD NAME="languages"></FIELD>
<FIELD NAME="charset"></FIELD>
<FIELD NAME="urls"></FIELD> 
```

ETC

我需要它转变为这个

```
 <"language">en</"language">
<"languages"></"languages">
<"charset"></"charset">
<"urls"></"urls"> 
```

标签之间有时有一个数字，有时是一个日期，有时是一个 URL，有时是大量的文本。

任何人都可以提出一种方法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:54:04.733

您可以使用 XLST 在导入之前转换 xml 文件或使用正则表达式处理它

注意：正如评论所暗示的，您的输出无效，您不能在 xml 元素名称中包含引号

我也会看到这个答案[将属性值转换为元素](https://stackoverflow.com/questions/4733880/convert-attribute-value-into-element)

# php - if 和 else 都为真

> ID：11325621
> 
> 赞同：0
> 
> 时间：2012-07-04T08:51:59.727
> 
> 标签：php, conditional-statements, if-statement

很抱歉这个疯狂的问题，但这似乎很奇怪！
我有一个代码：

```
if(isset($_GET['tablename'])){
    $tablename=$_GET['tablename'];
    var_dump($tablename);
    echo 'Table is set <br/>';
    if($tablename="product"){
        echo 'Table is product <br/>';
    };
    if($tablename="demanded"){
        echo 'Table is demanded <br/>';
    };
}; 
```

这就是我在展示中看到的：

> string 'demanded' (length=8)
> Table is set
> 表是产品
> 需要表

请帮助我想根据表值（产品或需求）运行子查询

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-04T08:52:48.477

您应该使用`==`来进行比较，而不是单个`=`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T08:52:54.437

`elseif`与`==`or一起使用`===`（用于严格比较）：

```
if($tablename == "product"){
    echo 'Table is product <br/>';
}
elseif($tablename == "demanded"){
    echo 'Table is demanded <br/>';
} 
```

你的代码应该是这样的：

```
if(isset($_GET['tablename'])){
    $tablename=$_GET['tablename'];
    var_dump($tablename);
    echo 'Table is set <br/>';

    if($tablename === "product"){
        echo 'Table is product <br/>';
    }
    elseif($tablename === "demanded"){
        echo 'Table is demanded <br/>';
    }
} 
```

您还拥有不需要`;`的大括号结尾，也在上面的代码中修复。`}`

## 你有过的错误

*   您使用的是`=`代替`==`或`===`
*   你`;`在结束大括号`}`之前有条件

## 您可以做出的改进

*   使用`===`而不是`==`因为您知道已经在与字符串进行比较
*   在您的代码中，使用`elseif`而不是单个`if`条件在语法上更正确
*   如果这些表名用于与数据库交互，则永远不要`$_GET['tablename']`用于生产代码，否则您的代码不提供安全性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T08:56:12.267

用于比较字符串使用

```
 strcmp(string1,string2);   //return 0 when both strings are equal 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T08:57:41.487

像这样使用

```
 if(isset($_GET['tablename'])){
        $tablename=$_GET['tablename'];
        var_dump($tablename);
        echo 'Table is set <br/>';
        if($tablename=="product"){
            echo 'Table is product <br/>';
        };
        if($tablename=="demanded"){
            echo 'Table is demanded <br/>';
        };
    }; 
```

# c++ - Qt 智能指针等效于 boost::shared_array？

> ID：11325624
> 
> 赞同：2
> 
> 时间：2012-07-04T08:52:11.717
> 
> 标签：c++, qt, smart-pointers, qsharedpointer

虽然存在`boost::shared_ptr`( `QSharedPointer`) 的等价物，但我无法找到类似的东西`boost::shared_array`。

当然我可以使用类似的东西

```
QSharedPointer<const std::vector<T> > shared_vector_ptr(new std::vector<T>(
       reinterpret_cast<T*>(pBuffer),
       reinterpret_cast<T*>(pBuffer+length)
)); 
```

但我想知道是否存在**提供**和`T& operator[](size_t)`使用`delete[]`而不是`delete`. 我不愿意在这个项目中使用 boost，因为目标机器无法安装 boost，并且项目是按源分发的。

注意：我知道我可以使用 指定删除器`QSharedPointer::QSharedPointer ( T * ptr, Deleter deleter )`，但是我不喜欢这种方法，因为编译器不会强制您指定删除器，这会导致`new []`分配的块被`delete`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:03:29.147

我认为最近的是`QScopedArrayPointer`，但它当然是有范围的。

`QSharedPointer`子类化以静默添加您自己的隐藏`Deleter`调用`delete[]`（并添加一个）将是一件小事`operator[]`，这样用户就不必做任何思考，并且它仍然使用 Qt 本机代码 - 您只是将它整齐地包装起来。

# ios - 在 iOS 应用程序中检索内存 iPad 信息

> ID：11325629
> 
> 赞同：0
> 
> 时间：2012-07-04T08:52:44.733
> 
> 标签：ios, memory, frameworks

有没有办法在运行过程中检索有关 ipad 内存的信息？

例如，我想在控制台中打印 t 时刻的内存使用情况。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:58:54.097

您应该对此进行检测，而不是尝试打印数字。这个数字真的没用。您关心的是您的应用程序对设备内存压力的脏内存占用以及您要驱逐多少代码/映射的ROM，以查看您是否由于内存压力而实质上颠簸并导致性能问题。

您可以获得的其他信息，例如设备内置内存以及您的应用程序分配了多少页没有用，因为您不知道有多少内存连接到其他设备或内核，并且您不知道有多少您分配的页面在这一点上是错误的。

# r - 使用基本 R 功能对 POSIX 日期 (POSIXct) 进行舍入

> ID：11325631
> 
> 赞同：34
> 
> 时间：2012-07-04T08:52:50.117
> 
> 标签：r, date, datetime, rounding, posixct

我目前正在为我正在构建的包的日期和时间玩很多。

偶然发现这篇[文章](https://stackoverflow.com/questions/8333838/how-do-you-generate-a-sequence-of-the-last-day-of-the-month-over-two-years-in-r)再次提醒我，在转向 contrib 包之前检查是否可以使用基本 R 功能完成某些事情通常不是一个坏主意。

因此，是否可以`POSIXct`使用基本 R 功能对课程日期进行舍入？

我检查了

```
methods(round) 
```

哪个“只”给了我

```
[1] round.Date      round.timeDate*

   Non-visible functions are asterisked 
```

这就是我想做的（伪代码）

```
x <- as.POSIXct(Sys.time())
[1] "2012-07-04 10:33:55 CEST"

round(x, atom="minute")
[1] "2012-07-04 10:34:00 CEST"

round(x, atom="hour")
[1] "2012-07-04 11:00:00 CEST"

round(x, atom="day")
[1] "2012-07-04 CEST" 
```

我知道这可以通过[timeDate](http://cran.r-project.org/web/packages/timeDate/index.html)、[lubridate](http://cran.r-project.org/web/packages/lubridate/index.html)等来完成，但我想降低包依赖性。所以在继续检查各个包的源代码之前，我想我会问是否有人已经做过这样的事情。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-04T09:04:42.560

`base`必须`round.POSIXt`这样做。不知道为什么它没有出现`methods`。

```
x <- as.POSIXct(Sys.time())
x
[1] "2012-07-04 10:01:08 BST"
round(x,"mins")
[1] "2012-07-04 10:01:00 BST"
round(x,"hours")
[1] "2012-07-04 10:00:00 BST"
round(x,"days")
[1] "2012-07-04" 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-23T05:18:26.313

在这个主题上`lubridate`，还要研究`ceiling_date()`和`floor_date()`函数：

```
x <- as.POSIXct("2009-08-03 12:01:59.23")
ceiling_date(x, "second")
# "2009-08-03 12:02:00 CDT"
ceiling_date(x, "hour")
# "2009-08-03 13:00:00 CDT"
ceiling_date(x, "day")
# "2009-08-04 CDT"
ceiling_date(x, "week")
# "2009-08-09 CDT"
ceiling_date(x, "month")
# "2009-09-01 CDT" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-27T10:12:57.707

如果您不想调用外部库并想像我一样保留这是一个想法（受此[问题](https://stackoverflow.com/questions/6876764/r-strptime-year-and-month-with-no-delimiter-returning-na)`POSIXct`的启发）：使用 strptime 并粘贴假的月份和日期。[如本评论](https://stackoverflow.com/questions/6876764/r-strptime-year-and-month-with-no-delimiter-returning-na#comment14493507_6876764)所述，应该可以更直接地做到这一点

> “对于 strptime，输入字符串不需要完全指定日期：假设未指定的秒、分钟或小时为零，并且未指定的年、月或日是当前日期。”

因此，您似乎*必须*使用`strftime`输出截断的字符串，粘贴丢失的部分并在 POSIXct 中再次转换。

这是更新答案的外观：

```
x <- as.POSIXct(Sys.time())
x
[1] "2018-12-27 10:58:51 CET"
round(x,"mins")
[1] "2018-12-27 10:59:00 CET"
round(x,"hours")
[1] "2018-12-27 11:00:00 CET"
round(x,"days")
[1] "2018-12-27 CET"
as.POSIXct(paste0(strftime(x,format="%Y-%m"),"-01"))     #trunc by month
[1] "2018-12-01 CET"
as.POSIXct(paste0(strftime(x,format="%Y"),"-01-01"))     #trunc by year
[1] "2018-01-01 CET" 
```

# android - 是否可以使用 Google Cloud Messaging（GCM 推送通知）来实现这些需求？

> ID：11325637
> 
> 赞同：2
> 
> 时间：2012-07-04T08:53:02.923
> 
> 标签：android, google-cloud-messaging

我们有一个自动生成安卓应用程序的系统。用户进入我们的网站并登录他们的帐户，用户对所需的功能进行描述，我们的系统会自动生成签名的 android apk 并在市场上发布。

这些应用程序使用我们的开发者帐户而不是用户帐户在市场上发布。

此类用户需要向他们的应用程序推送通知，例如通过 GCM。因此，我们需要知道是否有任何方法可以自动化该过程，以便用户只需在我们的网站上输入他们的谷歌帐户和他们想要发送应用程序的消息，我们的系统必须自动将消息发送到手机使用用户应用程序。

您必须记住并强调以下因素：

*   应用程序在我们的开发者帐户下发布在市场上。

*   通过我们的系统创建应用程序的用户拥有自己的谷歌账户（不是开发者账户），并且希望从他们的谷歌账户和它的应用程序发送他们的消息，而不是其他用户的消息，并且不使用我们的谷歌开发者账户。

*   整个过程对用户来说应该是自动和透明的，因为他们应该只提供这些数据、他们的谷歌帐户、他们想要发送的消息以及必须接收消息的应用程序。GCM可以做到这一点吗？

是否有一个 GCM API 可以与之通信以自动执行所有这些步骤？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T02:22:22.987

我想你可以，但是用户必须在 GoogleApis 中注册才能拥有自己的 SENDER_ID，然后你应该创建一个网络服务，在其中将每个用户与他们的 SENDER_ID 相关联，并为他们提供一个只使用他们的 SENDER_ID 发送通知的界面，但是你应该有一个足够强大的服务器来实现这一点，因为大数据可能是一个问题，因为您还必须存储与每个客户端应用程序关联的 device_ids，而且您将从安装的每个应用程序中获取注册和注销意图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:28:00.330

我使用了服务器端（Grails）和客户端（Titanium）向安卓设备发送通知。因此，我将一一为您解释。但在此之前，您需要将 ADT 插件添加到您的 Grails 框架中。请查看[http://tinyurl.com/chfthpe](http://tinyurl.com/chfthpe)

# highcharts - 如何在同一图形的每条曲线中在 Highcharts 上使用不同的格式化程序？

> ID：11325638
> 
> 赞同：0
> 
> 时间：2012-07-04T08:53:04.437
> 
> 标签：highcharts

我正在使用 Highcharts，我想为工具提示中显示的数字使用不同的格式化程序，用于同一图形中的每条曲线。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T15:39:03.987

首先，您必须存储您的系列工具提示文本。您可以使用以下示例执行此操作：

```
.
.
.
series: [{
    'name': 'serie 1',
    'data': serieData, // use your array of data
    'tooltipText': 'text 1' // text which will be inside the tooltip
}]
.
.
. 
```

然后，您必须在意式工具提示中获取工具提示文本。

**未共享工具提示**：

```
tooltip: {
    shared: false,
    formatter: function() {
        return this.series.options.tooltipText + '<br>' + // return stored text
                'Value: ' + this.y;
    }
} 
```

[**演示1**](http://jsfiddle.net/ricardolohmann/PtYtf/1/)

**共享工具提示**：

```
tooltip: {
    formatter: function() {
        var tooltip = '';
        for(var i = 0, length = this.points.length; i < length; i++) {
            var point = this.points[i];
            tooltip += point.series.options.tooltipText + '<br>' +
                    'Value: ' + point.y + '<br>';
        }
        return tooltip;
    }
} 
```

**[演示2](http://jsfiddle.net/ricardolohmann/PtYtf/3/)**

# eclipse - 在包括 .class 文件和 jar 文件的整个工作区中搜索方法。[蚀]

> ID：11325642
> 
> 赞同：1
> 
> 时间：2012-07-04T08:53:08.260
> 
> 标签：eclipse, search, methods

我有一个 Eclipse 项目，其中包含数百个 jar 文件作为参考库。我想在我的项目中找到特定方法的出现，包括 jar 文件和其中的 .class 文件。

我检查了[查找具有特定名称的函数](https://stackoverflow.com/questions/3727522/finding-a-function-with-particular-name)，但该搜索似乎只在 .java 文件中搜索。有没有办法在 .jar 和 .class 文件中完成此搜索。

# symfony - Symfony2：从数据库加载用户角色

> ID：11325644
> 
> 赞同：2
> 
> 时间：2012-07-04T08:53:12.347
> 
> 标签：symfony, doctrine-orm

我遇到了 Symfony2 安全系统的问题，特别是在尝试从数据库加载角色时。在继续之前，我知道 FOSUserBundle，但目前，为了更好地理解 Symfony2 框架，我想尝试让我的包仅使用 Symfony2 组件工作。TL;DR -> 请不要告诉我只使用 FOSUserBundle。:-)

我的包中配置了 3 个实体，即 Accounts、AccountsRoles 和 AccountsRepository。

**src\RedK\Core\IndexBundle\Entity\Accounts.php**
[http://pastebin.com/0VgXvtJp](http://pastebin.com/0VgXvtJp)

**src\RedK\Core\IndexBundle\Entity\AccountsRoles.php**
[http://pastebin.com/GiKNnYg3](http://pastebin.com/GiKNnYg3)

**src\RedK\Core\IndexBundle\Entity\AccountsRepository.php**
[http://pastebin.com/SVuMVdpN](http://pastebin.com/SVuMVdpN)

**MySQL demo_template.accounts 表**
[http://pastebin.com/YzmjD9e4](http://pastebin.com/YzmjD9e4)

**MySQL demo_template.accounts_roles 表**
[http://pastebin.com/Ybwr4f7y](http://pastebin.com/Ybwr4f7y)

在我尝试从数据库加载用户角色之前，捆绑包的所有方面都正常工作（注册、确认、密码重置和登录）。当我通过 getRoles() { return array('ROLE_USER') } 简单地将角色设置为 array('ROLE_USER') 时，身份验证工作并且用户成功登录到站点。

但是，在尝试从数据库集成角色时，我收到以下错误，我理解这是 AuthenticationException 的一个实例：

```
Notice: Undefined index: id in /home/humplebert/Websites/www/template/vendor/doctrine/lib/Doctrine/ORM/Query/SqlWalker.php line 804 
```

**堆栈跟踪**
[http://pastebin.com/Sr5RvZaY](http://pastebin.com/Sr5RvZaY)

仅当我在 AccountsRepository 中修改查询并删除
“->select()”和“->leftJoin()”组件时才会生成异常。在查看 pastebin.com 链接上第 16 行附近的堆栈跟踪时，关于 BasicEntityPersister 中的多对多映射，我似乎发生了各种“疯狂”。

我在我的实体类中搜索了所有对普通“id”的引用，但找不到。我注意到，如果我将实体中的“ID”列的名称更改为“id”（即在 src\RedK\Core\IndexBundle\Entity\Accounts 中将“AccountsID”替换为“id”），则会出现错误离开（并被另一个错误取代，稍后会详细介绍）。

**问题 1）**
我的实体是否存在明显错误，以生成我收到的“未定义索引：id”错误？如果没有，Symfony2/Doctrine2 是否要求将 Auto-Increment 列标记为“id”？

随着我继续修补，我决定尝试将我的表 ID 列重命名为“id”。因此， src\RedK\Core\IndexBundle\Accounts 将 AccountsID 替换为“id”。同样， src\RedK\Core\IndexBundle\AccountsRoles 将 RolesID 替换为“id”。这样做后，“未定义索引：id”错误就会消失。但是，我遇到了一个新错误：`"table or view demo_template.accounts_accountsroles does not exist"`. 当然它不存在，我没有定义为accounts_accountsroles 的表。我有两个表，accounts 和 accounts_roles。

**问题 2)**
为了使用 Symfony2/Doctrine2 工具从数据库中导入用户角色，关于表的命名有哪些规则？根据我收到的错误，似乎正在发生某种形式的连接。还是我只是简单地在某个地方搞砸了我的注释？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T20:49:53.403

关于问题 1）简短的回答是否定的！有关详细答案，请参阅 Doctrine [Association Mapping](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/association-mapping.html)文档中的第 5.3 节映射默认值：

它指出，如果您使用这个简短的注释：

```
/** @ManyToMany(targetEntity="Group") */
private $groups; 
```

“在这种情况下，连接表的名称默认为参与类的简单、非限定类名的组合，用下划线字符分隔。连接列的名称默认为目标的简单、非限定类名class 后跟“_id”。referencedColumnName 始终默认为“id”，就像在一对一或多对一映射中一样。”

您可以通过提供更详细的多对多注释来覆盖默认值（参见上面的链接），从而避免 id 错误。

关于问题2）串联是正确的。多对多关系需要第三个“联结”表。上面的 Doctrine 段落解释了这个表的名称是如何生成的。

我不知道为什么连接表会出现“表...不存在”错误，因为注释对我来说看起来不错。您的数据库架构似乎与您的注释不同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T14:18:12.847

我在 FOSUserBundle 之上实现了一个解决方案并[在此处进行了描述](https://stackoverflow.com/questions/22718628/fosuserbundle-override-roles-property-roles-in-acme-demobundle-entity-user/24612877#24612877)

在通过 Doctrine 实现角色访问之后，您仍然需要让 RoleHierarchy 服务意识到它。

# java - 寻找基于 Java 的 SCSS 到 CSS 转换器

> ID：11325645
> 
> 赞同：3
> 
> 时间：2012-07-04T08:53:17.760
> 
> 标签：java, css, sass, jawr

我正在寻找一个基于 Java 的 SCSS 到 CSS 转换器来为此编写一个[Jawr](http://jawr.java.net/)预处理器。因此，保留评论以[使用 Jawr 构建 Sprites](http://jawr.java.net/tutorials/jawrSpriteImage.html)很重要。

我刚刚发现[SAC](http://www.w3.org/Style/CSS/SAC/)似乎是一个很好的基础，开始写一个。

必须支持 CSS Level 3——这就是为什么[CSS Parser](http://cssparser.sourceforge.net/)不是一个选择的原因。

如果我必须自己编写（肯定是开源的并且托管在[GitHub 上](http://github.com/)）：是否有任何 SCSS 解析器？如果没有，我也可以基于 SAC 编写自己的吗？有人会帮助我吗？

**编辑**我刚刚看到还有一个[LESS](http://lesscss.org/)语法，它在我看来比 SCSS 好得多。作为 SCSS 的替代或补充，LESS 也会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T19:58:16.703

我刚刚发现了这个很棒的项目：[wro4j](http://code.google.com/p/wro4j/)

编辑：为了完整性：Jawr 也将在他们的下一个版本中实现这些功能。

# javascript - Javascript 网址管理

> ID：11325647
> 
> 赞同：1
> 
> 时间：2012-07-04T08:53:25.330
> 
> 标签：javascript, url, params

我需要帮助，因为我正在尝试使用 javascript 创建一个库，以便在我的 url 中创建、修改、删除参数，我解释说：

**www.mydomain.com/thing/?id=1&et=67&type=chercher**

你怎么看，我的参数是随机的，它是动态的，不是每次都是同一个网址，我有这个网址，一次我可以有 ?id=1&et=67&type=chercher 其他时候我可以有**?id=1&type= chercher**或例如只是**?id=1**或其他参数。

所以这并不容易，因为用户操作，带有参数的 url 会改变，那么有没有用 javascript 编写的 lib 或应用程序可以轻松做到这一点？

感谢大家对您未来的回应！！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T08:58:04.793

You are creating a library to manipulate URLs? Have you had a look at the existing solutions?

[URI.js](http://medialize.github.com/URI.js/) is something I can recommend. In its Readme URI.js links to a bunch of [alternative solutions](https://github.com/medialize/URI.js#alternatives) you could look into as well.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T08:57:32.283

是的，一点没错。您可以使用**[jQuery URL Parser](https://github.com/allmarkedup/jQuery-URL-Parser)**插件。只要确保你的页面中也包含 jQuery 而不仅仅是插件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T09:11:28.753

你需要操纵 URL 字符串的库吗？将关联数组（HASH）传递给函数 {a:2, b:3, c:4}，然后遍历这个哈希并形成字符串。

这是你需要的吗？

更新 - 通过 & 拆分字符串并向下解析为 HASH，并将值替换为 H['a'] = 4;

删除 - 删除 H["a"];

但最好不要重新发明自行车使用测试解决方案：[http ://code.google.com/p/jsuri/](http://code.google.com/p/jsuri/)

# maven - Maven 试图访问不存在的仓库

> ID：11325651
> 
> 赞同：3
> 
> 时间：2012-07-04T08:53:40.663
> 
> 标签：maven

我正在开发一个带有远程私有存储库的大型项目。有人将其中一个存储库设置为`http://central` And on each child's module build maven 试图从这个 repo 下载。（我无权访问它）

现在我收到此错误

```
Could not transfer metadata com.company.project:child-lib-ui:01.111.00.00-SNAPSHOT/maven-metadata.xml from/to central (http://central): Error transferring file: Server returned HTTP response code: 503 for URL: http://central/ 
```

A 已经从所有 pom 中删除了所有提到的“http://central”，清除了所有本地存储库，但现在我仍然在构建中获取这个 repo。

我该怎么做才能跳过这个回购？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:06:50.063

可能你的`settings.xml`文件中有这个 repo 声明。

# excel - VBA-数据透视表

> ID：11325652
> 
> 赞同：0
> 
> 时间：2012-07-04T08:53:42.013
> 
> 标签：excel, vba

下面是反转数据透视表的代码，任何人都可以建议我在 VBA 中创建数据透视表所需的更改。

```
Sub ReversePivotTable()
'   Before running this, make sure you have a summary table with column headers.
'   The output table will have three columns.
Dim SummaryTable As Range, OutputRange As Range
Dim OutRow As Long
Dim r As Long, c As Long

On Error Resume Next
Set SummaryTable = ActiveCell.CurrentRegion
If SummaryTable.Count = 1 Or SummaryTable.Rows.Count < 3 Then
    MsgBox "Select a cell within the summary table.", vbCritical
    Exit Sub
End If
SummaryTable.Select
Set OutputRange = Application.InputBox(prompt:="Select a cell for the 3-column output", Type:=8)
'   Convert the range
OutRow = 2
Application.ScreenUpdating = False
OutputRange.Range("A1:C3") = Array("Column1", "Column2", "Column3")
For r = 2 To SummaryTable.Rows.Count
    For c = 2 To SummaryTable.Columns.Count
        OutputRange.Cells(OutRow, 1) = SummaryTable.Cells(r, 1)
        OutputRange.Cells(OutRow, 2) = SummaryTable.Cells(1, c)
        OutputRange.Cells(OutRow, 3) = SummaryTable.Cells(r, c)
        OutputRange.Cells(OutRow, 3).NumberFormat = SummaryTable.Cells(r, c).NumberFormat
        OutRow = OutRow + 1
    Next c
Next r
Application.ScreenUpdating = True
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T06:29:10.357

```
Sub MakeAPivotTable()

Dim pt As PivotTable
Dim cacheofpt As PivotCache     ' this is the source data for the pt
Dim pf As PivotField
Dim pi As PivotItem
Dim SummaryTable As Range

'Sheets("sheet1").Select
'SummaryTable = Range("B2:E5")

On Error Resume Next
Sheets("Sheet2").Select
ActiveSheet.PivotTables("MyPT").TableRange2.Clear   'deletes any previous
 pivottable

' set the cache of pt

Sheets("Sheet1").Select
'Set SummaryTable = Range("B2:E5")
Set SummaryTable = ActiveCell.CurrentRegion
    If SummaryTable.Count = 1 Or SummaryTable.Rows.Count < 3 Then
    MsgBox "Select a cell within the summary table.", vbCritical
    Exit Sub
    End If
SummaryTable.Select
Set cacheofpt = ActiveWorkbook.PivotCaches.Create(xlDatabase, SummaryTable)

'cretae the pivot table
 Sheets("sheet2").Select
 Set pt = ActiveSheet.PivotTables.Add(cacheofpt, Range("a1"), "MyPT")

 'put the fields in
 With pt
 'add the fields
.PivotFields("Date").Orientation = xlRowField
.PivotFields("Name").Orientation = xlColumnField
.PivotFields("Product").Orientation = xlRowField
.PivotFields("Price").Orientation = xlDataField

'go to classic view
.RowAxisLayout xlTabularRow

 End With

End Sub 
```

# c# - 多锁任务（线程）

> ID：11325653
> 
> 赞同：2
> 
> 时间：2012-07-04T08:53:42.130
> 
> 标签：c#, multithreading, thread-safety

我需要在我们的框架中实现应该执行锁定机制的类。我们有几个线程，它们的编号为 0,1,2,3.... 我们有一个名为 的静态类`ResourceHandler`，它应该将这些线程锁定在给定的对象上。要求是 n`Lock()`调用应由 m`Release()`调用实现，其中 n = [0..] 和 m = [0..]。因此，无论对单个对象执行多少锁，只需一次`Release()` 调用就足以解锁所有对象。更进一步，如果 o 对象没有被锁定，`Release()`调用应该什么也不做。我们还需要知道哪些对象被锁定在哪些线程上。

我有这个实现：

```
public class ResourceHandler
{
    private readonly Dictionary<int, List<object>> _locks = new Dictionary<int, List<object>>();

    public static ResourceHandler Instance {/* Singleton */}

    public virtual void Lock(int threadNumber, object obj)
    {
        Monitor.Enter(obj);

        if (!_locks.ContainsKey(threadNumber)) {_locks.Add(new List<object>());}
        _locks[threadNumber].Add(obj);
    }

    public virtual void Release(int threadNumber, object obj)
    {
       // Check whether we have threadN in _lock and skip if not
       var count = _locks[threadNumber].Count(x => x == obj);
       _locks[threadNumber].RemoveAll(x => x == obj);

       for (int i=0; i<count; i++)
       {
           Monitor.Exit(obj);
       }
    }

    // .....
 } 
```

实际上我在这里担心的是线程安全。我实际上不确定，它是否是线程安全的，修复它真的很痛苦。我是否正确地完成了任务，如何确保这是线程安全的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:13:30.887

您的`Lock`方法锁定在目标`object`s 上，但`_locks`任何线程都可以随时访问字典。您可能想要添加一个私有锁对象来访问字典（在`Lock`和`Release`方法中）。

还要记住，通过使用这样的 ResourceHandler，其余代码（消费线程）有责任释放所有使用的对象（`lock ()`例如，一个常规块涵盖了该问题，因为每当您离开`lock`的范围时，该对象发行了）。

您可能还想`ReferenceEquals`在计算对象被锁定的次数时使用，而不是`==`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T09:12:39.210

[您可以通过使用ConcurrentDictionary](http://msdn.microsoft.com/en-us/library/dd287191.aspx)来确保此类是线程安全的，但是它不会帮助您解决您在尝试开发自己的锁定机制时遇到的所有问题。

有许多锁定机制已经是 .Net Framework 的一部分，您应该使用它们。

听起来您将需要使用这些组合，包括[等待句柄](http://msdn.microsoft.com/en-us/library/ms228962.aspx)来实现您想要的。

* * *

**编辑**

仔细阅读后，我认为您可能需要一个[`EventWaitHandle`](http://msdn.microsoft.com/en-us/library/system.threading.eventwaithandle.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T09:26:23.473

从概念上讲，您所拥有的东西看起来很危险；这是因为调用`Monitor.Enter`并`Monitor.Exit`让它们作为`Lock`语句工作，建议将它们封装在一个`try/finally`块中，即确保它们按顺序执行。`Monitor.Exit`之前调用`Monitor.Enter`会抛出异常。

为了避免这些问题（如果抛出异常，给定线程的锁可能会或可能不会被占用，如果锁被占用，它将不会被释放，导致锁泄漏。我建议使用一个上面其他答案中提供的选项。但是，如果您确实想继续使用此机制，CLR 4.0 将以下重载添加到`Monitor.Enter`方法中

```
public static void Enter (object, ref bool lockTaken); 
```

`lockTaken`当且仅当`Enter`方法抛出异常并且未获取锁时才为假。因此，使用使用全局的两种方法，`bool` `lockTaken`您可以创建类似的东西（这里的示例是针对单个储物柜的 - 您将需要一个`List<bool>`与您的线程相对应的字典 - 或者更好的事件 a `Tuple`）。所以在你的方法中`Lock`你会有类似的东西

```
bool lockTaken = false;
Monitor.Enter(locker, ref lockTaken); 
```

在另一种方法`Release`

```
if (lockTaken)
    Monitor.Exit(locker); 
```

我希望这有帮助。

*编辑：我不认为我完全理解你的问题，但据我所知，我会使用[Concurrent Collection](http://msdn.microsoft.com/en-us/library/system.collections.concurrent)。这些是完全安全的。签出`IProducerConsumerCollection<T>`和`ConcurrentBag<T>`。这些应该通过框架处理的所有线程安全来促进您想要的（注意。线程安全集合并不意味着它执行的代码是线程安全的！）。但是，使用这样的集合可能比使用锁要慢得多。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T09:03:49.190

IMO 你需要使用原子函数集来保证它的安全。

[http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx)

我想互斥锁会帮助你。

# windows - Windows：禁用/启用 USB 集线器，无需重新启动

> ID：11325664
> 
> 赞同：4
> 
> 时间：2012-07-04T08:54:05.903
> 
> 标签：windows, usb, wdk

我希望能够以编程方式禁用或启用 USB 集线器，以便分别使连接到它的 USB 设备不可用或可用。我使用设备管理器进行了一些测试，然后使用***Devcon***，发现当某些设备连接到集线器（特别是一些 Android 手机）时，它不能立即禁用，而是标记为重启后禁用。我试图通过禁用连接到集线器的有问题的设备来解决这个问题，但这也失败了。我也尝试使用***SetupDixxx***API 直接，甚至一些 USB IOCTL，但我没有设法完成这项任务。我相信应该有一种方法可以在不重新启动的情况下强制立即禁用集线器。如果有人能指出我正确的方法，我将不胜感激。

在此先感谢， 齐夫

# javascript - jQuery UI datepicker：onSelect 调用了两次

> ID：11325665
> 
> 赞同：3
> 
> 时间：2012-07-04T08:54:10.040
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-datepicker, enter

我注意到 jQuery datepicker onSelect 方法有一个奇怪的行为，你可以看看[这个 fiddle](http://jsfiddle.net/w8Pvp/3/)来测试它。

使用 jQuery 1.7.2 和 jQuery UI 1.8.18 测试，在 Firefox、IE 和 Chrome 中进行。

设想：

1.  将焦点放在文本字段上（应该出现日期选择器）
2.  按 enter 选择默认日期（正如[datepicker API](http://docs.jquery.com/UI/Datepicker)所说的那样）
3.  注意 onSelect 被调用了两次。

如果您用鼠标选择日期，一切正常。

这是一个错误吗？如果没有，我该如何避免这种行为？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:32:00.723

我有一个非常丑陋的解决方案建议，我很羞于发布它。然而，绝望的时代需要绝望的措施。

```
var trigger = false;
var previousDate = "";

$("#datepicker").datepicker({

    onSelect: function(dateText, inst) {

        if (!trigger || (previousDate != dateText)) {
            // Do whatever you want to do
            alert("fire!");
            // I decided to alert
            trigger = true;
            previousDate = dateText;
        } else {
            trigger = false; 
        }
    }
});​ 
```

尝试这样的事情。我有几分钟的时间来测试它，它似乎有效。如果没有，请改进这个想法。

如果您不了解黑客背后的可怕，丑陋的想法，我会解释。

干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:27:59.317

是的，你是对的，即使我前段时间也遇到了这个错误，但只是忽略了它。但是这次我查看了我发现的 datepicker 脚本，因为它可能是错误的。这只能以您提到的特定方式重现

*   单击该字段/使用选项卡将焦点放在该字段上
*   按回车

您将调用两次回调函数“onSelect”。

这是因为在 datepicker javascript 中，'_selectDate' 函数用于获取从关键事件处理函数（_doKeyDown()->_selectDay()->_selectDate()) 调用的选定日期，并且两个函数都调用回调函数似乎是错误。

* * *

更新 -

我已经修改了 jquery.ui.datepicker.js 文件中的 _doKeyDown 函数。输入事件时我已经修改了代码（keycode-13）。**所以现在回调函数'onSelect'在上述场景中被调用一次。**

这是版本 1.8.21 的代码

```
_doKeyDown: function(event) {
        var inst = $.datepicker._getInst(event.target);
        var handled = true;
        var isRTL = inst.dpDiv.is('.ui-datepicker-rtl');
        inst._keyEvent = true;
        if ($.datepicker._datepickerShowing)
            switch (event.keyCode) {
                case 9: $.datepicker._hideDatepicker();
                        handled = false;
                        break; // hide on tab out
                case 13: var sel = $('td.' + $.datepicker._dayOverClass + ':not(.' + 
                                    $.datepicker._currentClass + ')', inst.dpDiv);
                        //Update by Sunil start
                        if (sel[0]){
                            $.datepicker._selectDay(event.target, inst.selectedMonth, inst.selectedYear, sel[0]);
                        }else{
                            $.datepicker._hideDatepicker();
                            return true;
                        }
                        //Update by Sunil end
                        return false;
                        break; // select the value on enter
                case 27: $.datepicker._hideDatepicker();
                        break; // hide on escape
                case 33: $.datepicker._adjustDate(event.target, (event.ctrlKey ?
                            -$.datepicker._get(inst, 'stepBigMonths') :
                            -$.datepicker._get(inst, 'stepMonths')), 'M');
                        break; // previous month/year on page up/+ ctrl
                case 34: $.datepicker._adjustDate(event.target, (event.ctrlKey ?
                            +$.datepicker._get(inst, 'stepBigMonths') :
                            +$.datepicker._get(inst, 'stepMonths')), 'M');
                        break; // next month/year on page down/+ ctrl
                case 35: if (event.ctrlKey || event.metaKey) $.datepicker._clearDate(event.target);
                        handled = event.ctrlKey || event.metaKey;
                        break; // clear on ctrl or command +end
                case 36: if (event.ctrlKey || event.metaKey) $.datepicker._gotoToday(event.target);
                        handled = event.ctrlKey || event.metaKey;
                        break; // current on ctrl or command +home
                case 37: if (event.ctrlKey || event.metaKey) $.datepicker._adjustDate(event.target, (isRTL ? +1 : -1), 'D');
                        handled = event.ctrlKey || event.metaKey;
                        // -1 day on ctrl or command +left
                        if (event.originalEvent.altKey) $.datepicker._adjustDate(event.target, (event.ctrlKey ?
                                    -$.datepicker._get(inst, 'stepBigMonths') :
                                    -$.datepicker._get(inst, 'stepMonths')), 'M');
                        // next month/year on alt +left on Mac
                        break;
                case 38: if (event.ctrlKey || event.metaKey) $.datepicker._adjustDate(event.target, -7, 'D');
                        handled = event.ctrlKey || event.metaKey;
                        break; // -1 week on ctrl or command +up
                case 39: if (event.ctrlKey || event.metaKey) $.datepicker._adjustDate(event.target, (isRTL ? -1 : +1), 'D');
                        handled = event.ctrlKey || event.metaKey;
                        // +1 day on ctrl or command +right
                        if (event.originalEvent.altKey) $.datepicker._adjustDate(event.target, (event.ctrlKey ?
                                    +$.datepicker._get(inst, 'stepBigMonths') :
                                    +$.datepicker._get(inst, 'stepMonths')), 'M');
                        // next month/year on alt +right
                        break;
                case 40: if (event.ctrlKey || event.metaKey) $.datepicker._adjustDate(event.target, +7, 'D');
                        handled = event.ctrlKey || event.metaKey;
                        break; // +1 week on ctrl or command +down
                default: handled = false;
            }
        else if (event.keyCode == 36 && event.ctrlKey) // display the date picker on ctrl+home
            $.datepicker._showDatepicker(this);
        else {
            handled = false;
        }
        if (handled) {
            event.preventDefault();
            event.stopPropagation();
        }
    }, 
```

我希望这能解决你的问题。

* * *

更新 2 user1042031 回答了另一种解决方法，但不是完整的解决方案。在这里你会找到你需要做的

```
$("#datepicker").datepicker({
     onSelect: function(dateText,inst) {       
         $.datepicker._hideDatepicker();
         inst.preventDefault();
    }
}); 
```

您需要删除导致将焦点设置在输入字段上的警报，该字段将再次显示日期选择器。这是一次调用 onSelect 以确保在按下回车键后隐藏日期选择器。

[**演示**](http://jsfiddle.net/chavansi/hAkhY/)

我正在复制解决方案的一部分只是为了有两种工作方式:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T14:57:29.983

The best solution so far:

```
$("#datepicker").datepicker({
    onSelect: function(dateText, inst) {
        // do stuff
        $.datepicker._hideDatepicker();
        inst.preventDefault();
    } 
```

});

`inst.preventDefault()`is the most important part: it prevents the double firing of `onSelect()`. By using it, the datepicker doesn't hide anymore once the date is selected, so you have to call `$.datepicker._hideDatepicker()` to do it.

Thanks to user1042031 and Sunil Chavan.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T12:04:12.587

利用

```
 inst.preventDefault(); 
```

像这样：

```
 $("#datepicker").datepicker({
     onSelect: function(dateText,inst) {       
         alert('s');
         inst.preventDefault();
    }
}); 
```

编辑：选择日期后删除日历

解决方法是您需要使用 removeclass：

```
 $( "#datepicker" ).datepicker({

       onSelect: function(dateText, inst) {          
       $(inst.dpDiv).find('.ui-state-highlight.ui-state-hover').removeClass('ui-state-highlight ui-state-hover');          

 },
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-20T15:14:53.607

对我来说似乎是一个错误......我把它与各种异步调用联系起来，它把一切都搞砸了......我想出的最好的解决方案是：

```
jQuery(".date-picker").each(function (index, item) {
    jQuery(item).removeClass("date-picker");
     item.ondpchange = item.onchange;
    jQuery(item).datepicker({
        format: "mm/dd/yyyy",
        autoclose: true,
        todayHighlight: true,

    }).on('changeDate', function (e) {
        if (item.ondpchange != null) {
            item.ondpchange();
        }
    });;
    item.onchange = null;

}); 
```

# html - 仅隐藏 html 段落中的文本

> ID：11325669
> 
> 赞同：13
> 
> 时间：2012-07-04T08:54:27.000
> 
> 标签：html, css

我想隐藏段落中的文字，但上面只有一张图片和一些文字。当我使用 css 不显示任何内容时，所有段落都被隐藏了……但我只想隐藏文本而不是图像。这是代码。

```
<p>
  <a href="/_blog/News_and_Inspiration/post/Cooking_up_a_storm/"><img alt="" style="border: 0px solid; width: 100px; height: 150px; float: left; margin-right: 10px; margin-bottom: 10px;" src="/images/blog/Shaun-Clouston.jpg" /></a>
    The executive chef of Wellington&rsquo;s award winning  Restaurant, Shaun Clouston is just one of the award winning New Zealand Beef and Lamb Ambassador chefs we have cooking up a storm at our Rural Women New Zealand Beef + Lamb Cooking Demonstrations over the coming months.&nbsp;
</p>

<p>
  <img src="/images/blog/Southland Life Education Trust Car 2.jpg" alt="">
  Two years ago the Southland Life Education Community Trust approached our four Southland Provincials, asking for assistance to replace their educator’s car, as the current one needed major repairs.
</p> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-04T08:59:02.857

Try:

```
p {
    font-size: 0;
} 
```

And specify the font-size for any descendent elements you want visible.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-04T09:01:19.003

根据布局的其余部分以及是否需要坚持`display: none;`隐藏内容，您可以`visbility: hidden;`像以下示例中那样使用：

```
p {
   visibility: hidden;
}

img {
    visibility: visible;
} 
```

[请参阅此处](http://jsfiddle.net/zzuhH/)的示例小提琴。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-04T09:06:20.793

另外的选择：

```
 p{
        text-indent: -1000px;
    }
    img{
        position: absolute;
        left:10px; /*obviously position how you like*/
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-12T11:59:14.030

有很多选择，

1.  文字和背景颜色相同
2.  字体大小 0px
3.  不显示
4.  可见性：隐藏，还有更多...

如果有帮助，很好。谢谢，

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T11:21:36.067

您可以将您的文本放入 span 并使其显示：无；希望对你有帮助 ：）

```
 p span {
display:none;
}

<p>
  <a href="/_blog/News_and_Inspiration/post/Cooking_up_a_storm/"><img alt="" style="border: 0px solid; width: 100px; height: 150px; float: left; margin-right: 10px; margin-bottom: 10px;" src="/images/blog/Shaun-Clouston.jpg" /></a>
  <span>The executive chef of Wellington&rsquo;s award winning  Restaurant, Shaun Clouston is just one of the award winning New Zealand Beef and Lamb Ambassador chefs we have cooking up a storm at our Rural Women New Zealand Beef + Lamb Cooking Demonstrations over the coming months.&nbsp;</span>
</p> 
```

# javascript - Rails - id没有从下拉列表传递到链接

> ID：11325672
> 
> 赞同：1
> 
> 时间：2012-07-04T08:54:28.990
> 
> 标签：javascript, ruby-on-rails, action

我想要实现的是在下拉菜单中有一个项目列表，这样当从该下拉菜单中选择一个时，只有与该项目相关的任务等才会显示在其他页面上。通过在该项目的显示视图中设置按钮，我让它工作正常，但如果用户可以这样选择它会快得多。

下面的代码显示了到目前为止我在索引视图中得到的内容（也感谢 cutalion！） - 似乎是问题的行是第三行 - 选择链接。它给出的错误是它找不到没有 id 的项目。页面显示时（当我删除该行时）下拉列表中列出了一个项目 - 那么为什么 id 没有通过？此外，当从代码中删除第三行以显示要显示的页面时，第二行生成的链接指向索引视图而不是显示视图。我猜这与 id 没有通过有关，但我不知道如何解决它！

任何人都可以对此有所了解的任何人都会很棒，谢谢！

项目/索引视图（更新代码以纠正不一致）：

```
<%= collection_select(:project, :id, Project.all, :id, :name) %>
<%= link_to 'Show', @project, :id => "show_project_button" %>
<%= link_to "Select" select_project_project_path(@project), id: "select_project_button" %>

<script type="javascript">
  $('#project_id option').change(function(){
    var project_id = $(this).val();
    $('#show_project_button').attr('href', '/projects/' + project_id);
    $('#select_project_button').attr('href', '/projects/' + project_id + '/select_project');
  })
</script> 
```

此外，项目控制器中的 select_project 操作：

```
def select_project
  project = Project.find(params[:id])
  session[:project_id] = project.id
  redirect_to root_url, notice: "Current project set to: #{project.name}, ID: #{project.id}"
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:10:35.570

@project 似乎是空的，因此找不到任何 id。

将控制器中的这一行更改为：

```
@project = Project.find(params[:id]) 
```

您还必须考虑如果找不到项目会发生什么。如果发生这种情况，您将遇到与现在相同的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:11:46.910

我不知道您是否发布了实际代码，但那里的 id 不匹配：

```
<%= collection_select(:project, :id, Project.all, :id, :name) %>
<%= link_to "Show", @project, id: "show_project_btn" %> # this should be id: "show_project_button"
<%= link_to "Select" select_project_project_path(@project), id: "select_project_btn" %> # and this should be id: "select_project_button", right?

<script type="javascript">
  $('#project_id').change(function(){
    var project_id = $(this).val();
    $('#show_project_button').attr('href', '/project/' + project_id);
    $('#select_project_button').attr('href', '/projects/' + project_id + '/select_project');
  })
</script> 
```

此外，您在 javascript 中的路径不一致

```
$('#show_project_button').attr('href', '/project/' + project_id); // rails generates /projects, I think 
```

# java - 如何通过避免注册表设置来加速 Selenium/Junit 测试执行

> ID：11325673
> 
> 赞同：1
> 
> 时间：2012-07-04T08:54:38.247
> 
> 标签：java, internet-explorer, junit, continuous-integration, jenkins

我们的应用程序有 500 多个测试用例。根据 CPU 和 RAM 开销，测试用例运行 4 到 6 个小时。

对于每个测试用例，Selenium 都会启动和停止 IE。IE 为每个测试用例备份注册表。我看到每个测试用例的以下语句和

```
14:43:38,312 INFO  [org.openqa.selenium.server.browserlaunchers.WindowsProxyManager] Backing up registry settings...
14:43:40,234 INFO  [org.openqa.selenium.server.browserlaunchers.WindowsProxyManager] Modifying registry settings... 
```

以上两条语句有2分钟的时间差。

我们可以绕过注册表的备份并运行测试用例吗？这样，我的测试用例将在不到 20 分钟的时间内完成当前构建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:04:34.760

该[线程](https://sqa.stackexchange.com/questions/1988/selenium-reuse-existing-browser-session-instead-of-opening-new-windows)展示了如何重用 Firefox 会话。我还没有尝试过，但我想 Internet Explorer 有一个等价物。您还可以使用[Selenium Grid](http://selenium-grid.seleniumhq.org/)来加快持续时间。

# iphone - 如何使用 Bookopening 之类的动画删除启动视图？

> ID：11325678
> 
> 赞同：0
> 
> 时间：2012-07-04T08:54:56.370
> 
> 标签：iphone, ios

我有一个 Iphone 应用程序，在该应用程序中我使用 imageview 创建启动画面。在删除启动画面功能中，我正在删除启动画面并添加导航控制器视图。现在我需要使用像动画一样的开书来删除启动画面就像在路径应用程序中所做的那样。有人可以帮我这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:19:26.030

如果你想让它看起来像一本书的封面打开，你可以做一个动画块，只需将 frame 属性设置为零宽度：

```
[UIView animateWithDuration:0.2
                          delay:0
                        options:UIViewAnimationCurveEaseInOut
                     animations:^{
                         self.view.frame = CGRectMake(0,0,0,self.view.frame.size.height);

                     } 
                     completion:^ (BOOL finished){
                         [self.navigationController popViewControllerAnimated:NO];
                     }
     ]; 
```

否则，只需使用 rckoenes 提到的内置翻页动画

# android - Android 谷歌分析唯一访问者

> ID：11325679
> 
> 赞同：5
> 
> 时间：2012-07-04T08:54:57.830
> 
> 标签：android, variables, google-analytics, google-analytics-api, pie-chart

我正在使用 Google Analytics SDK 从我的 Android 应用程序中收集统计信息。我希望能够创建一个图表来显示用户使用的语言。

为此，我正在创建一个访问者范围自定义变量，如下所示：

```
tracker.setCustomVar(1, "Language", language, 1); 
```

问题是我担心这种方法不正确。我想在 Google Analytics 的主页 -> 仪表板中创建一个饼图，所以我选择添加小部件 -> 饼图 -> 按“自定义变量（值 01）”分组的“唯一访问者”。

如上创建的饼图显示无效结果。目标是获取每个用户的最后一个变量值，然后显示每个值的用户数。它实际上所做的是它获取所有变量值，并且对于每个值，它显示曾经拥有该值的访问者的数量。

这意味着如果有人在语言之间切换，他将在图表中以两种语言出现。不是他实际使用的那个。

所以我的问题是 - 如何正确地做到这一点？我是否应该更改代码中的某些内容，或者使用变量以外的内容？或者也许可以通过谷歌分析网站修复它？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T05:03:49.100

没有办法达到你想要的。

如果同一个访问者更改了它的语言，它将从现在开始使用该语言，但他仍会显示为前几天的旧值。发生这种情况是因为在 GA 历史中永远不会重写，数据由 session(visit) 处理，并且进入的数据是静态的，无法删除或更改。如果仅针对新值报告访问者，则意味着之前的访问将被更改。这正好违背了设计。

您可能会找到其他方法来解决这个问题，并更好地了解正在更改应用程序语言的人。例如，您可能会在更改语言时触发一个事件，并了解添加到您的应用程序中的新语言的影响。

GA 中只有一个地方可以让您更好地了解多个会话。这就是多渠道渠道，但它们仅适用于不同流量来源的目标完成报告。您在那里看到的报告是由 Google Analytics 内部的一个单独系统处理的，并且可能会违反一些关于 Google Analytics 如何处理和存储数据的规则。正因为如此，他们可以将访问联系在一起，并了解流量来源维度上发生的变化的进展情况并导致目标完成。

很抱歉，它不能解决您的问题。但不幸的是，这只是设计上不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:05:50.193

你不需要自己设置用户的语言，去你的`Google Analytics webpage > Audience > Demographics > Language`.

这将向您展示您需要了解的有关用户所选语言的所有信息。

编辑：

对于自定义应用程序值（如设置值），根据我的经验，最好的方法是将该值的每日/每周 ping 设置为事件，因此您将获得所有活跃用户选择的语言的每日饼图. [您可以使用AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)设置这样的 ping

# asp.net-mvc-3 - JqG rid导航按钮功能

> ID：11325681
> 
> 赞同：0
> 
> 时间：2012-07-04T08:55:02.233
> 
> 标签：asp.net-mvc-3, button, jqgrid

我该如何实现[呢](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aform_editing)？如何添加文本框和标签并将其保存到数据库中？我正在使用 MVC3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:43:38.363

由于您的问题很笼统，我只能提供一些大型示例项目的链接：

*   [ASP.NET MVC 3 和 Razor 中的 jqGrid](http://tpeczek.codeplex.com/releases/view/61796)
*   [ASP.NET MVC 中的 jqGrid - 强类型助手](http://tpeczek.codeplex.com/releases/view/62741)

两者都涵盖了“表单编辑”功能，因此您应该找到所需的内容。如果没有，请为您的问题提供更多详细信息。

# php - 排序此数组的最快方法

> ID：11325682
> 
> 赞同：0
> 
> 时间：2012-07-04T08:55:05.767
> 
> 标签：php, arrays, sorting

我试图找出排序这个数组的最快方法（即性能方面）。

我想按每个数组中的第一个键按字母顺序排序...

```
$results = array(array('foo', '=', '1'), array('dog', '!=', '5'), array('apple', '<', '4')); 
```

排序后应该看起来像......

```
$results = array(array('apple', '<', '4'), array('dog', '!=', '5'), array('foo', '=', '1')); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:03:17.127

sort() 函数就像你想要的那样工作：

```
<?php
$results = array(array('foo', '=', '1'), array('dog', '!=', '5'), array('apple', '<', '4'));
sort($results);
//$results is now what you want
?> 
```

在 5.2.17 测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:12:09.530

您可能会发现 array_multisort 是您所需要的：

```
<?php
        $sort_array = array();

        foreach($results as $key => $sub_array){
                $sort_array[$key] = $sub_array[0];//fill the sort array with the values you want to sort on
        }

        array_multisort($sort_array, $results);
?> 
```

array_multisort 函数对给定的第一个数组进行排序，然后使用键顺序对第二个数组进行排序。您可能可以在创建初始结果集的同一循环中创建排序数组。

有关更多信息，请参见此处：http: [//php.net/manual/en/function.array-multisort.php](http://php.net/manual/en/function.array-multisort.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-14T13:22:41.893

usort 和 multisort 相对较慢 - 这变成了 >100 K 记录的痛苦。然而 PHP 的强度是关联数组。只需基于该核心功能构建索引并基于此应用快速 ksort。这就是我的意思：

```
function array_index($dataarr,sortingkeyfields){ 
  $indexarr=array(); 
  sortingkeyfieldsnr=count(sortingkeyfields);
  foreach($dataarr as $key=>$valarr) { 
    $currentindex=''; 
    foreach(sortingkeyfieldspos=0;sortingkeyfieldspos<sortingkeyfieldsnr;sortingkeyfieldspos++) $currentindex.= $valarr[sortingkeyfieldspos].'_'; 
    $indexarr[$currentindex]=$key; 
  } 
  return $indexarr; 
} 
function array_sortbyindex(&$dataarr,$indexarr,$issortindexbykey=true){ 
  // assumes complete index!: each item of indexarr must correlate a key of dataarr 
  $resultarr=array(); 
  if($issortindexbykey) ksort($indexarr); 
  foreach($indexarr as $datakey) $resultarr[$datakey]= $dataarr[$datakey]; 
  return $resultarr; 
} 

sortingkeyfields=array(0,2);
print_r(array_sortbyindex($dataarr, array_index($YOURARRAY,sortingkeyfields))); 
```

# asp.net - 遍历 AjaxControlToolkit.CascadingDropDownNameValue 对象的 JSON 结果

> ID：11325691
> 
> 赞同：0
> 
> 时间：2012-07-04T08:55:47.790
> 
> 标签：asp.net, json

我的 web 服务返回基于 asp.net AjaxControlToolkit.CascadingDropDownNameValue 对象格式化的对象。

如何遍历此 JSON 结果并选择属性“名称”的值？所以：德伦特、弗莱沃兰、弗里斯兰等 [{"isDefaultValue":false,"name":"Drenthe","optionTitle":null,"value":"1"},{"isDefaultValue":false,"name": "Flevoland","optionTitle":null,"value":"16"},{"isDefaultValue":false,"name":"Friesland","optionTitle":null,"value":"2"}]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:25:57.393

像这样的东西：

(...)

```
success: function (response) { LoadData(response.d); } 
```

(...)

```
function LoadData(data) {
        for (var i in data) {
            var vname;
            vname = data[i].name;
            //use vname from here

        }
    } 
```

希望有帮助。

# asp.net - Aspxgridview：如何更改标题标题宽度，使其适合列宽？

> ID：11325693
> 
> 赞同：0
> 
> 时间：2012-07-04T08:55:51.737
> 
> 标签：asp.net, devexpress, aspxgridview

我有以下问题：在运行时我正在更改列标题的名称（网格链接到一个表，我不希望用户看到他们的原始名称）。但是，我有一个标题标题太长-“总票数”实际上代表一个不大于 4 位的整数。我的问题是如何修复标题标题宽度......在我的情况下，我希望它出现在两行上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:59:42.607

您可以添加属性 ItemStyle-Width="your value"

```
Example for bound field

<asp:BoundField DataField="" HeaderText="" ItemStyle-Width="150"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:20:26.253

如果您希望列标题包装设置列[HeaderStyle](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewGridViewHeaderStyleMembersTopicAll)。[换行为](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxClassesAppearanceStyleBase_Wraptopic)真。

```
<dxg:ASPxGridView runat="server">
    <Columns>
        <dxg:GridViewDataColumn FieldName="Test" VisibleIndex="1" >
            <HeaderStyle Wrap="True"/>
        </dxg:GridViewDataColumn>
    </Columns>
</dxg:ASPxGridView> 
```

# python - 如何从一组 GPS 点中获取“最快英里”列表

> ID：11325694
> 
> 赞同：4
> 
> 时间：2012-07-04T08:55:55.003
> 
> 标签：python, algorithm, geolocation

我正在尝试解决一个奇怪的问题。也许你们知道一些处理这个问题的算法。

我有一辆货运卡车的数据，想提取一些数据。假设我有一个从 GPS 获得的排序点列表。那是那辆卡车的路线：

```
[
    {
        "lng": "-111.5373066",
        "lat": "40.7231711",
        "time": "1970-01-01T00:00:04Z",
        "elev": "1942.1789265256325"
    },
    {
        "lng": "-111.5372056",
        "lat": "40.7228762",
        "time": "1970-01-01T00:00:07Z",
        "elev": "1942.109892409177"
    }
] 
```

现在，我想要得到的是“最快里程”的列表。我举个例子：

鉴于要点：

```
A, B, C, D, E, F 
```

从 A 点到 B 点的距离是 1 英里，货物用时 10 分 32 分。从 B 点到 D 点我还有一英里，货物花了 10 分钟，等等。所以，我需要一个按时间排序的列表。如同：

```
B -> D: 10
A -> B: 10:32
D -> F: 11:02 
```

你知道任何让我计算的有效算法吗？

谢谢你们。

PS：我正在使用Python。

**编辑：**

我有距离。我知道如何计算它，并且有很多帖子可以做到这一点。我需要的是一种算法，可以按英里进行标记并从中获得速度。有一个距离函数是不够的：

```
results = {}
for point in points:
  aux_points = points.takeWhile(point>n) #This doesn't exist, just trying to be simple
  for aux_point in aux_points:
    d = distance(point, aux_point)
    if d == 1_MILE:
      time_elapsed = time(point, aux_point)
      results[time_elapsed] = (point, aux_point) 
```

我还在做一些非常低效的计算。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:19:28.360

如果您有获取位置数据时的位置和时间戳，您可以简单地执行以下操作：

```
def CalculateSpeeds(list_of_points_in_time_order):
  """Calculate a list of (average) speeds for a list of geographic points."""

  points = list_of_points_in_time_order
  segment_start = points[0]
  speed_list = []

  for segment_end in points[1:]:
    dt = ElapsedTime(segment_start, segment_end)
    # If you're looking at skipping points, with a slight risk of degraded data
    # you could do something like "if dt < MIN_ELAPSED_TIME:" and indent
    # the rest of the loop. However, you'd need to then check if the last point 
    # has been accounted for, as it might've been too close to the last considered
    # point.
    d = Distance(segment_start, segment_end)
    speed_list.append(d/dt)
    segment_start = segment_end
  return speed_list 
```

你已经说过（在评论中）你可以对一对做这个，所以你需要做的就是对所有连续的对做这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:26:34.143

我已经越来越喜欢滑动窗口了，它在这里可能会有所帮助。与其他答案的概念相同，只是方法略有不同。

```
from itertools import islice
def window(seq, n=2):
    "Returns a sliding window (of width n) over data from the iterable"
    "   s -> (s0,s1,...s[n-1]), (s1,s2,...,sn), ...                   "
    it = iter(seq)
    result = tuple(islice(it, n))
    if len(result) == n:
        yield result    
    for elem in it:
        result = result[1:] + (elem,)
        yield result

results = {}
# presort your points in time if necessary
for point_a, point_b in window(points):
    d = distance(point_a, point_b)
    if d == 1_MILE:
        time_elapsed = time(point_a, point_b)
        results[time_elapsed] = (point_a, point_b) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T09:20:04.930

所以，如果你有`n`这样的点，旅途上就会有`n - 1`“腿”。您可以通过以下方式简单地形成该列表：

```
legs = []
for i in xrange(n - 1):
  legs.append(build_leg(point[i], point[i + 1])) 
```

假设`point`是点列表，`build_leg()`是一个接受两个点并计算距离和平均速度的函数。

上面的循环将调用`build_leg`第一个点 0 和 1，然后是 1 和 2，依此类推，直到`n - 2`最后`n - 1`两个点。

# groovy - hibernate 之类的技术作为 groovy 的持久层？

> ID：11325696
> 
> 赞同：0
> 
> 时间：2012-07-04T08:56:02.247
> 
> 标签：groovy, persistence

我想知道是否有一个用于 groovy 的持久层，它集成在 ide 上以根据您的数据库结构自动生成代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:54:02.457

只需像使用 Java 项目一样使用 Hibernate。

Groovy 可以调用 java，并且您可以在构建项目时使用交叉编译器来编译这两个源。

Hibernate 工具不会吐出 Java（因此代码将比 Groovy 替代品更冗长），但由于您不需要编写代码，这没关系 ;-)

# sql-server - SQL Server 故障转移群集数据库访问层的最佳做法是什么？

> ID：11325697
> 
> 赞同：2
> 
> 时间：2012-07-04T08:56:12.367
> 
> 标签：sql-server, failover, failovercluster

原则上，SQL Server 故障转移集群将自身呈现为应用程序可以连接的虚拟机，而忽略了 SQL Server 实际上是服务器集群这一事实，因此，原则上在应用程序的数据库访问层内不需要额外的逻辑.

我的问题是上述是否属实，以及在使用故障转移集群时是否对数据库访问层的操作方式进行了最佳实践修改。例如，当故障转移发生时，可能会有延迟，这可能会导致数据库访问层出现超时错误，我们正在考虑在该层中放置逻辑以在发生超时时重试 [一些] 数据库调用（我们已经重试数据库死锁的逻辑）。这提供了另一个级别的保护，防止影响应用程序的错误。

如果发生故障转移切换并导致更高的应用程序级别在服务调用上收到超时错误，那么这不是无缝切换。我们是否应该简单地将超时设置为允许故障转移的持续时间？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:04:23.813

> 原则上，SQL Server 故障转移集群将自己呈现为应用程序可以连接的虚拟机，而忽略了 SQL Server 实际上是服务器集群这一事实

啊？真的吗？这与文档相矛盾。集群基本上只不过是在不同服务器上安装不同的移动 IP 地址，几乎不是虚拟机。

> 原则上，应用程序的数据库访问层内不需要额外的逻辑。

是和否 - 显然，失败的节点确实会终止所有正在进行的事务和连接，因此客户端必须能够对此做出反应并重试。如果客户端因为连接断开而崩溃并且没有重试，那么它不会帮助您在一两秒后再次访问服务器。

> 我们是否应该简单地将超时设置为允许故障转移的持续时间？

不，连接因故障转移而中断，因为正在进行的事务状态丢失。您需要重新建立连接，然后再次启动事务中发出的所有 Sql 命令。

请注意，从安全角度来看，集群很糟糕，您应该使用镜像 - 您有特定的风险，即出现故障的集群节点会使数据库文件损坏，在这种情况下，故障转移会失败。镜像更健壮。

# c# - Castle Windsor - 如何在构造函数注入中映射命名实例

> ID：11325699
> 
> 赞同：11
> 
> 时间：2012-07-04T08:56:16.173
> 
> 标签：c#, castle-windsor

也许这很容易，但是在互联网上搜索它已经让我很头疼

这是问题所在：

```
interface IValidator
{
    void Validate(object obj);
}

public class ValidatorA : IValidator
{
    public void Validate(object obj) { }
}

public class ValidatorB : IValidator
{
    public void Validate(object obj) { }
}

interface IClassA { }
interface IClassB { }

public class MyBaseClass
{
    protected IValidator validator;

    public void Validate()
    {
        validator.Validate(this);
    }
}

public class ClassA : MyBaseClass, IClassA
{
    //problem: validator should ValidatorA
    public ClassA(IValidator validator) { }
}

public class ClassB : MyBaseClass, IClassB
{
    //problem: validator should ValidatorB
    public ClassB(IValidator validator) { }
}

public class OtherClass
{
    public OtherClass(IClassA a, IClassB b) { }
}

//on Main
var oc = container.Resolve<OtherClass>(); 
```

任何的想法？

**编辑**

我注册了`ValidatorA`and `ValidatorB`，`Named`现在问题是 Castle Windsor 如何将这些验证器正确地注入到`ClassA`and `ClassB`，有没有办法做到这一点？还是有更好的解决方案？

如果有人认为我的课程设计是错误的，我愿意提供任何建议。到目前为止，我认为它是正确的。是的，验证器具有特定类的特定配置。但它被抽象是有原因的：

1.  Validator 是一个复杂的对象，有时应该连接到数据库，所以出于单元测试的原因，我必须将接口而不是实现传递给构造函数。
2.  无法为任何验证器使用不同的接口，因为我使用的唯一方法是`Validate`
3.  我认为`MyBaseClass.Validate()`一个常见的**模板方法**模式不是吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-04T15:10:03.503

无需深入了解您选择的架构的细节，只需关注 Windsor 容器配置：

如果您已向给定接口 ( ) 注册了多个命名实现，则可以使用 using 指定在注册使用者类 ( , )`IValidator`时要使用哪一个：`ClassA``ClassB``ServiceOverrides`

以下容器配置提供了`OtherClass`带有`ClassA`a 的实例和带有 a`ValidatorA`的`ClassB`实例`ValidatorB`：

```
var container = new WindsorContainer();

container.Register(Component.For<IClassA>().ImplementedBy<ClassA>()
    .DependsOn(ServiceOverride.ForKey<IValidator>().Eq("ValidatorA")));
container.Register(Component.For<IClassB>().ImplementedBy<ClassB>()
    .DependsOn(ServiceOverride.ForKey<IValidator>().Eq("ValidatorB")));

container.Register(Component.For<IValidator>().ImplementedBy<ValidatorA>()
    .Named("ValidatorA"));
container.Register(Component.For<IValidator>().ImplementedBy<ValidatorB>()
    .Named("ValidatorB"));

container.Register(Component.For<OtherClass>().ImplementedBy<OtherClass>());

var oc = container.Resolve<OtherClass>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T12:04:39.287

看来您正试图将紧密的夫妇（`ClassA`with `ValidatorA`，`ClassB`with `ValidatorB`）作为独立类型放入一个公共容器中。这是没有意义的。如果您必须像这样依赖紧密耦合，请在这方面忘记依赖注入，只需硬引用类型即可。

如果您可以为所有类实现一个通用验证器，这将更有意义。例如，让类负责提供验证规则，然后`Validator` 只执行这些规则。或者也许只是在你的类中包含整个验证，这可能是这里最明智的场景。

`MyBaseClass.Validate()`看起来像控制反转，但不像模板方法。

# javascript - Jquery 可拆分表格单元格类似于 div 拆分器

> ID：11325700
> 
> 赞同：0
> 
> 时间：2012-07-04T08:56:18.493
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins

我正在研究 asp mvc 。我现在有一张表格，我想让我的一些表格单元格可拆分以节省空间。

我如何使它像可拆分的 div 一样可拆分，我们可以通过单击此链接 [http://layout.jquery-dev.net/demos/example.html看到](http://layout.jquery-dev.net/demos/example.html)

提前致谢。

# r - 在 R 中编码缺失数据

> ID：11325708
> 
> 赞同：2
> 
> 时间：2012-07-04T08:56:50.487
> 
> 标签：r

我有一个数据集，其中数据检查显示以下一些内容，所有这些都应该丢失

```
'missing'
'unknown'
'uncoded' 
```

我是否正确地认为我可以用“NA”替换所有出现的这些？这是首选的方法吗？

```
var[var=='missing'] <- NA
var[var=='unknown'] <- NA
var[var=='uncoded'] <- NA 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T11:00:32.620

您展示的内容是可行的，但您可以将代码简化为通过`%in%`二元运算符进行比较的单个调用。这是使用一些虚拟数据的示例：

```
set.seed(1)
var <- factor(sample(c("missing","unknown","uncoded", 1:4), 100, replace = TRUE)) 
```

这给了我们一个像这样的因子向量：

```
> head(var)
[1] unknown uncoded 2       4       unknown 4      
Levels: 1 2 3 4 missing uncoded unknown
> table(var)
var
      1       2       3       4 missing uncoded unknown 
     14      15      17      13      10      18      13 
```

要设置所有编码为`c("missing","unknown","uncoded")`to的所有值`NA`，我们一次性完成：

```
var2 <- var ## copy for demo purposes, but you can over write if you wish
var2[var2 %in% c("missing","unknown","uncoded")] <- NA 
```

这使

```
> var2[var2 %in% c("missing","unknown","uncoded")] <- NA
> head(var2)
[1] <NA> <NA> 2    4    <NA> 4   
Levels: 1 2 3 4 missing uncoded unknown
> table(var2)
var2
      1       2       3       4 missing uncoded unknown 
     14      15      17      13       0       0       0 
```

请注意原始级别是如何保留的。如果您想删除这些级别，那么我们可以将该`droplevels()`功能应用于`var2`：

```
var2 <- droplevels(var2) 
```

这使

```
> head(var2)
[1] <NA> <NA> 2    4    <NA> 4   
Levels: 1 2 3 4
> table(var2)
var2
 1  2  3  4 
14 15 17 13 
```

另请注意，默认情况下`NA`，表格输出中未显示，但我们对其进行了纠正以向您显示它们仍然存在：

```
> table(var2, useNA = "ifany")
var2
   1    2    3    4 <NA> 
  14   15   17   13   41 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T10:56:35.657

用 NA 替换它们的一般想法是正确的。

`recode`如果您想在一行中执行此操作，则可以使用：

```
library(car)
var <- recode( var, "c('missing','unknown','uncoded')=NA" ) 
```

# iphone - iPhone：从另一个协议或类别继承协议或类别

> ID：11325710
> 
> 赞同：1
> 
> 时间：2012-07-04T08:57:09.223
> 
> 标签：iphone

我想从另一个协议继承一个协议，就像我想从另一个类别继承一个类别一样。如果我能实现这两种方式，我将能够解决一些复杂的任务。

有人可以建议，是否首先可能？如果是，实现此目的的语法是什么？

谢谢你。

# authentication - 使用 SAML 不记名令牌对用户进行后端服务身份验证是个坏主意吗？

> ID：11325711
> 
> 赞同：5
> 
> 时间：2012-07-04T08:57:12.230
> 
> 标签：authentication, authorization, saml, claims-based-identity, acs

假设我有一个前端应用程序想要从后端服务获取一些数据。（我愿意。）该服务将需要验证最终用户是否经过身份验证，是否有权使用该服务，并可能根据用户的权限过滤返回的数据。就我而言，前端应用程序和后端服务都依赖 Azure ACS 进行身份验证。

![简单的联合身份场景](../Images/b17045ba4bbfda474e233bc46299cafc.png)

理想情况下，前端希望*代表*经过身份验证的用户采取行动，这听起来很适合使用`ActAs`令牌（如 WS-Trust 中所指定）。但是，事实证明[ACS 目前不支持 ActAs](https://stackoverflow.com/questions/11296421/is-identity-delegation-via-ws-trust-actas-supported-in-acs/11298814#11298814)。

一种解决方法是*使用实​​际的不记名令牌*（前端应用程序中的引导令牌）对后端服务进行身份验证。[这并不难](http://travisspencer.com/blog/2012/01/authenticating-to-a-wcf-servic.html)，但出于某种原因，这会是一个坏主意吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-04T11:33:32.513

从您的前端应用程序中，您当然可以通过按原样发送令牌或从中发送属性来传递最终用户的身份数据。两者都有问题。对于前者，如果它也被加密，则前端和后端将不得不共享解密所需的私钥；他们还必须共享受众限制等，以便后端认为令牌对其有效。换句话说，前端和后端将是一个依赖方，而不是两个。可能不是问题，但要注意。在后一种情况下，您最终会以适当的方式发送用户数据，这可能会随着时间的推移增加集成和维护成本。在这两种情况下，您都可以使用某种其他类型的凭据（例如，在传输级别使用的证书）向后端验证前端应用程序，因此，

我建议您考虑的一件事是 OAuth 2。来自[这篇博文](http://blogs.msdn.com/b/adventurousidentity/archive/2011/09/18/acs-v2-oauth-2-0-delegation-support-explained.aspx)，在我看来 ACS 支持它（尽管我没有任何第一手经验）。OAuth 2 真正美妙的地方在于它包含了委托，并且没有 WS-Trust 中的 ActAs 那样复杂。最终结果是相同的，即后端服务将拥有有关调用服务和最终用户的信息，但设置它所付出的努力是无与伦比的。令牌仍将是不记名令牌，但您可以通过使用 SSL 在一定程度上缓解这种情况。除了 SSL，您还可以采取一些额外的措施，但最好的是，IMO，如果微软在 ACS 中做了一些事情，比如谷歌已经用他们的访问令牌为服务帐户做的事情，这些服务帐户使用链接到 PKI 的非对称密钥。（顺便说一句，据我所知，微软可能已经做过类似的事情；如果是这样，你就准备好了。）

无论如何，HTH！

# objective-c - 创建弹出式滑块

> ID：11325712
> 
> 赞同：1
> 
> 时间：2012-07-04T08:57:14.197
> 
> 标签：objective-c, cocoa

我想要一个数值输入框，右侧有可点击的三角形（*类似于组合框*）。点击三角形时，输入框下方会出现一个滑块，您可以拖动滑块上的旋钮来调整输入框中的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:20:11.760

最后我能够弄清楚为什么没有显示新面板。您需要在上一个答案的代码中替换一行。您需要更换：

```
NSPanel *newWindow = [[[NSPanel alloc]initWithContentRect:windowRect styleMask:NSUtilityWindowMask backing:NSBackingStoreBuffered defer:NO]autorelease]; 
```

和

```
NSPanel *newWindow = [[[NSPanel alloc]initWithContentRect:windowRect styleMask:NSUtilityWindowMask backing:NSBackingStoreBuffered defer:NO]retain]; 
```

问题是`newWindow`每次在用户能够看到它之前就被释放了。所以，基本上我们需要保留`newWindow`.

# oracle - tomcat jdbc 与 Oracle 数据库的连接池

> ID：11325714
> 
> 赞同：2
> 
> 时间：2012-07-04T08:57:22.500
> 
> 标签：oracle, tomcat, jdbc, connection-pooling

我们在 Oracle 数据库中使用 tomcat jdbc 连接池。最近，我们遇到了来自 JDBC THIN CLIENT 的 Oracle 数据库中的非活动会话过多的问题。

任何人都可以帮助我们吗？为什么它会导致数据库中的非活动会话以及解决此问题的方法。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T20:52:30.593

If you are getting `SQLException`s because connections have timed out, you should set a `validationQuery` (to something like `SELECT 0 FROM DUAL`) and your connections will be tested before they are checked-out of the pool. Any connection that has failed will be replaced by a working connection and then returned to your code.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:22:28.073

[按照文档](http://tomcat.apache.org/tomcat-7.0-doc/jdbc-pool.html)调整池的设置。将`maxIdle`和设置`minEvictableIdleTimeMillis`为较低的值将确保空闲连接被快速驱逐，并且很少有空闲连接保持打开状态。显然，它也会降低池的效率，因为连接会更频繁地关闭和打开。

# c# - WebBrowser 控件：单击不起作用

> ID：11325716
> 
> 赞同：3
> 
> 时间：2012-07-04T08:57:36.353
> 
> 标签：c#, winforms, click, webbrowser-control, invoke

我使用 DocumentComplete 事件来自动完成表单。除复选框外，一切正常。html代码如下：

```
<span class="myClass" style="padding-left: 12px; vertical-align: bottom; cursor: pointer;">
<input id="ich_liebe_dich" type="checkbox" name="ich$liebe$dich">
<label for="ich_liebe_dich"> MyLabel</label>
</span> 
```

我尝试使用：

```
webbrowser.Document.GetElementById("ich_liebe_dich").InvokeMember("click"); 
```

和

```
webbrowser.Document.GetElementById("ich$liebe$dich").InvokeMember("click"); 
```

并且：

```
foreach (HtmlElement current in webbrowser.Document.GetElementsByTagName(tag))
{
    if (current.GetAttribute(attr).Equals(attName))
        current.InvokeMember(invoke);
} 
```

其中 attr="id"、tag="input"、invoke="click" 和 attName= "ich_liebe_dich" 或 "ich$liebe$dich"。

我得到的最好的结果是一个短暂的 - 只是几分之一秒 - 选中的复选框。为什么会发生这种情况？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:43:13.167

leppie 的回答让我很好奇，因为我从来没有在任何地方读过关于 InvokeMember("check") 的信息，我用谷歌搜索了它！我得到的第一个答案是这个[http://social.msdn.microsoft.com/forums/en-US/winforms/thread/750b11dc-08f8-4cb4-bcaf-80c91f0fd425/](http://social.msdn.microsoft.com/forums/en-US/winforms/thread/750b11dc-08f8-4cb4-bcaf-80c91f0fd425/)

我阅读了这篇文章并找到了解决方案......如果我在 DocumentCompleted 事件中添加这一行，那么一切正常！

```
if (webbrowser.ReadyState==WebBrowserReadyState.Complete) 
```

页面似乎有框架，并且 DocumentCompleted 事件在整个页面加载之前触发。

编辑：我忘了提到我使用（和工作）的代码如下：

```
webbrowser.Document.GetElementById("ich_liebe_dich").InvokeMember("click"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T12:47:45.120

我已经回答了一个[类似的问题](https://stackoverflow.com/questions/11271737/how-do-you-click-a-button-in-a-webbrowser-control-in-c/11273176#11273176)

webBrowser.Navigate(" [http://www.google.com](http://www.google.com) ");

**如果你有 id 使用这个：**

```
webBrowser1.Document.GetElementById("id").InvokeMember("click"); 
```

**如果您有标记名，请使用此**

```
 webBrowser.Navigate("http://www.google.com"); 
```

在 Web 浏览器 DocumentCompleted 事件中

```
HtmlElement textElement = webBrowser.Document.All.GetElementsByName("q")[0];
textElement.SetAttribute("value", "your text to search");
HtmlElement btnElement = webBrowser.Document.All.GetElementsByName("btnG")[0];
btnElement.InvokeMember("click"); 
```

**如果你有名字类使用这个：**

```
HtmlElementCollection classButton = webBrowser1.Document.All;
foreach (HtmlElement element in classButton) 
 {
     if (element.GetAttribute("className") == "button")
    {
       element.InvokeMember("click");
     }
 } 
```

要在文本框 google.com 中添加文本，请使用以下命令：

```
 webBrowser1.Document.GetElementById("gs_tti0").InnerText = "hello world"; 
```

# windows-phone-7.1 - 在我的 WP7 应用程序中与用户交流的更好方式是什么？

> ID：11325719
> 
> 赞同：2
> 
> 时间：2012-07-04T08:57:41.970
> 
> 标签：windows-phone-7.1

在我的应用程序中，我正在维护用户。我需要提供用户之间的通信。为此，我想在我的应用程序中实现聊天。在 wp7 中实现聊天的更好方法是什么？我看到套接字编程似乎是安全问题。我看到它被许可的 XMPP 框架在部署时可能需要打包。告诉我在 WP7 中实现聊天的其他替代方案。请告诉我...

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:15:26.737

一种实现聊天功能的另一种方法是使用 WCF 服务。您可以拥有一个服务器，您可以在其中运行 WCF 服务来获取和发送数据。它有自己的优点和缺点。就像，它将是安全的，您可以轻松地实现/控制 WCF 服务。但是，您总是需要提取数据。推送将不起作用。

# c# - OracleParameter 到 Int32 问题

> ID：11325722
> 
> 赞同：0
> 
> 时间：2012-07-04T08:57:43.780
> 
> 标签：c#, .net, sql, oracle11g

我有一个 SQL 代码如下：

```
public void UpdateDatabase(String strParam1, int row)
        {
            System.Data.OracleClient.OracleConnection conn = new System.Data.OracleClient.OracleConnection();
            conn.ConnectionString = "Data Source=(DESCRIPTION =(ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.5.144)(PORT = 1521))(CONNECT_DATA =(SERVER = DEDICATED)(SERVICE_NAME = orcl)));UID=mwm;PWD=mwm"; 
                conn.Open();
                OracleCommand command = conn.CreateCommand();                       
               command.CommandText = "Select id from Task";
                OracleParameter taskId = new OracleParameter();
                taskId.DbType = DbType.Int32;                        
                taskId.Value = taskId;
                taskId.ParameterName = "taskId";
                command.Parameters.Add(taskId);
                command.ExecuteNonQuery();
                command.Dispose();
            }
        } 
```

达到 ExecuteNonQuery 时，我收到错误“无法将参数值从 OracleParameter 转换为 Int32”这里有什么问题？我用谷歌搜索但无法得出结论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:01:46.910

在此`taskId.Value = taskId;`，您要为 OracleParameter 类型的值分配`taskId`一个值`taskID`，它需要一个 int 值。换句话说，您将相同的东西分配给它的 value 参数。由于您已经定义： `taskId.DbType = DbType.Int32;`它需要一个 int 值，并且您可能错过了`taskId`再次分配它的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:02:35.757

添加调整您的查询

```
"Select id from Task where id = taskId"; 
```

# xml - simple XML Schema - XSD

> ID：11325723
> 
> 赞同：0
> 
> 时间：2012-07-04T08:57:46.523
> 
> 标签：xml, xsd

I have the following xsd file which is throwing "invalid schema" error. I have done many complex schemas before but cannot seem to figure out what is wrong with this one, which should be very straight forward. I know I need something after

```
<xsd:element name="ebay"> 
```

but what?

```
XML:
<ebay><userID></userID></ebay>

Schema:
    <?xml version="1.0"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">

<xsd:element name="ebay">

<xsd:element name="userID">
   <xsd:simpleType>
     <xsd:restriction base="xsd:string">
       <xsd:minLength value="1"/>
       <xsd:maxLength value="255"/>
       <xsd:whiteSpace value="collapse"/> 
     </xsd:restriction>
   </xsd:simpleType>
 </xsd:element>

</xsd:element>
</xsd:schema> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:07:33.850

您需要将命名空间 xs: 定义为“http://www.w3.org/2001/XMLSchema”，您使用了两个命名空间但只定义了 xsd。你真的应该只使用其中一个。另外我不相信您可以在字符串上使用 minInclusive 值或 maxInclusiveValue 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:40:47.090

试试这个架构：

```
<?xml version="1.0"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <xsd:element name="ebay">
    <xs:complexType>
      <xs:sequence>
        <xsd:element name="userID">
          <xsd:simpleType>
            <xsd:restriction base="xsd:string">
              <xsd:minLength value="1"/>
              <xsd:maxLength value="255"/>
              <xsd:whiteSpace value="collapse"/> 
            </xsd:restriction>
          </xsd:simpleType>
        </xsd:element>
      </xs:sequence>
    </xs:complexType>
  </xsd:element>
</xsd:schema> 
```

# sharepoint-2010 - 使用 C# 在 SharePoint 2010 中获取列表项的查找字段值

> ID：11325725
> 
> 赞同：3
> 
> 时间：2012-07-04T08:57:55.027
> 
> 标签：sharepoint-2010

我对 sharepoint 比较陌生，我正在尝试编写一个 Web 服务来将我们的 sharepoint 库存数据作为 xml 返回。它工作得很好，除了其中一个列表包含一个查找字段并且生成的 xml 包含“Microsoft.SharePoint.Client.FieldLookupValue”而不是查找字段的预期字符串值。

这是我用来生成 xml 的代码：

```
resultList = remoteWeb.Lists.GetByTitle("Cam Devices");
context.Load(resultList);
context.ExecuteQuery();
//Now its time to reach list's items
items = resultList.GetItems(new CamlQuery());
context.Load(items);
context.ExecuteQuery();
foreach (ListItem item in items)
{
    rootNode.AppendChild(doc.CreateElement("ID")).InnerText = "pcat:401824";
    rootNode.AppendChild(doc.CreateElement("Category")).InnerText = "Cam Devices";
    rootNode.AppendChild(doc.CreateElement("Kimlik")).InnerText = Convert.ToString(item["ID"]);
    rootNode.AppendChild(doc.CreateElement("Isim")).InnerText = Convert.ToString(item["Location0"]) + " >> " + Convert.ToString(item["Brand"]) + " >> " + Convert.ToString(item["ID"]);
} 
```

item["Location"] 是查找字段，它有一个 type 的值`FieldLookupValue`，我怎样才能将查找值作为字符串获取？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-04T10:22:53.470

好的，使用以下代码语法成功获取查找字段的值：

```
string Location = "";
if (item["Location0"] != null)
{
    var fl = (SPFieldLookupValue)item["Location0"];
    Location = fl.LookupValue;
} 
```

# git - 本地计算机中的 git 存储库以从笔记本电脑访问

> ID：11325727
> 
> 赞同：0
> 
> 时间：2012-07-04T08:58:00.347
> 
> 标签：git, version-control, repository, push, pull

我希望有以下设置与 git 一起使用：对于给定的项目，我希望将我的“原始”存储库放在我工作的台式计算机的目录中 ($desktop)。然后我希望能够从家里或其他任何地方（$laptop）访问、拉取和推送这个存储库。

对于我在其他[问题](https://stackoverflow.com/questions/5412562/setting-up-git-repository-on-local-machine)中看到的内容，该过程通常涉及在我的桌面上创建一个裸 git 存储库，使用

```
$desktop > git init -bare 
```

但是我的理解是，这会产生一个没有工作目录的存储库。我不想要这个。我希望我的存储库是特定于项目的，位于我的台式机和笔记本电脑的给定目录中，并且只跟踪我保存在给定目录树中的内容。这显然是 git 的问题，并且应该“永远”不要推送到正常的存储库中。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:14:19.217

您是对的，不建议通过签出推送到存储库；这是因为推送不会更新签出的文件，因此存储库的状态很容易变得混乱。

解决此问题的一种简单方法是在您的桌面上创建两个存储库：一个可以从笔记本电脑推送到一个裸露的存储库，另一个是您想在桌面上编码时使用的工作存储库。另一种方法是让您的笔记本电脑存储库从您的桌面可见，这样您就可以双向拉动。

请注意，即使您正在推送到一个裸存储库，也没有什么能阻止您首先从工作存储库中提取 - 因此您可以随时了解您在桌面上所做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:07:18.243

在您的桌面存储库中，您需要在 .git/config 中添加：

```
[core]
   sharedRepository true

[receive]
   denyCurrentBranch false 
```

第一个配置允许您推送到存储库，第二个配置允许您推送远程存储库已签出的分支。

希望这有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T17:48:48.793

一种可能性是简单地从桌面上的正常存储库中提取，而不是直接推送到那里的签出分支，而是推送到仅用于在笔记本电脑上接收更新的其他分支，然后单独合并它们。

那是：

```
laptop$ git clone desktop:path/to/project
laptop$ cd project
[... make changes...]
laptop$ git push -f desktop:path/to/project master:from-laptop

desktop$ cd path/to/project
desktop$ git merge from-laptop 
```

您可以`branch.master.push master:from-laptop`在笔记本电脑存储库中进行配置，以便`git push`默认情况下根据该规范推送。

# css - 没有svg文件的Firefox和Opera中的亮度过滤器

> ID：11325732
> 
> 赞同：3
> 
> 时间：2012-07-04T08:58:12.320
> 
> 标签：css, image, html, svg-filters

对于我当前的项目，我使用了过滤器 `-webkit-filter: brightness(-20%);-moz-filter: brightness(-20%);` 但是不知何故，这个过滤器在 firefox 和 opera 中不起作用（我也有 opera 前缀）。我发现了如何使用它，但我需要将亮度过滤器转换为 svg 代码。有什么想法我该怎么做？
我必须做的是一个小画廊，图像变暗，悬停时有普通图像，不使用 2x 图像。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-10T01:58:03.967

您想使用 SVG 过滤器。在每个通道中将图像变暗固定量的过滤器示例如下：

```
<filter id="darken">
<feComponentTransfer>
       <feFuncR type="linear" intercept="-0.2" slope="1"/>
       <feFuncG type="linear" intercept="-0.2" slope="1"/>
       <feFuncB type="linear" intercept="-0.2" slope="1"/>
   </feComponentTransfer>
</filter> 
```

这将使您的图像在每个颜色通道中变暗 20%。[完整的jsfiddle](http://jsfiddle.net/T3pb8/28/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T02:09:16.213

如果您需要更多跨浏览器的解决方案，您可以在未悬停时使图像半透明：

```
img {
    opacity: .7;
}
img:hover {
    opacity: 1;
} 
```

当它们位于深色背景上时，这将产生使它们变暗的效果。

# facebook - Facebook 授权 url、作用域授权 url 和令牌 url

> ID：11325733
> 
> 赞同：0
> 
> 时间：2012-07-04T08:58:13.050
> 
> 标签：facebook, facebook-graph-api

我正在尝试编写一个 java 代码来获取 facebook 的访问令牌，以便使用图形 API 在其中进行操作。为此，我需要知道 Facebook 授权 url、范围授权 url 和令牌 url？

请指定这些网址。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T09:14:20.290

您可以在他们的[Facebook 开发者参考](https://developers.facebook.com/docs/authentication/server-side/)中找到获得 Facebook 授权所需的所有信息。

所以你需要的网址可能是这些：

*   授权 URL：[https](https://www.facebook.com/dialog/oauth) ://www.facebook.com/dialog/oauth （该 URL 可以指定的范围，可以在[这里](https://developers.facebook.com/docs/authentication/permissions/)找到）

*   访问令牌网址：[https ://graph.facebook.com/oauth/access_token](https://graph.facebook.com/oauth/access_token)

# asp.net-mvc-3 - opening a Popup in mvc3

> ID：11325734
> 
> 赞同：0
> 
> 时间：2012-07-04T08:58:14.567
> 
> 标签：asp.net-mvc-3, telerik

I have hyperlink column in grid and clicking the link i want to open a popup. Below is my code.

```
cols.Bound(o => o.PO_NO)
    .ClientTemplate(
        Html.ActionLink("<#=PO_NO#>", 
                        "SurPODtls", 
                        new { controller = "Home", PO_NO = "<#=PO_NO#>" }, 
                        new { target= "_self" }).ToString())
    .Title("PO No").Width(30).Filterable(false); 
```

In SurPODtls action method iam returning the partial view of SurPODtls, which contains the telrik window in which iam again calling the partial view to load the controls and data. And same time i have to retain the grid.

But this not works for me. Please provide solution, if anyone have idea

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:00:38.763

您可以使用`Custom Column Command`这里的链接[http://demos.telerik.com/aspnet-mvc/grid/customcolumncommand](http://demos.telerik.com/aspnet-mvc/grid/customcolumncommand)

# python - 使用python比较两个文本文件

> ID：11325740
> 
> 赞同：-3
> 
> 时间：2012-07-04T08:58:33.363
> 
> 标签：python

我正在尝试比较两个文本文件并识别不同的行并将其保存在一个新的文本文件中，但我不知道该怎么做，因为我对 Python 非常陌生。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:00:58.660

如果您使用的是 linux，您可以尝试以下命令：`diff`

这是针对[python diff doc](http://docs.python.org/library/difflib.html)

# java - 时间线数据存储解决方案

> ID：11325744
> 
> 赞同：0
> 
> 时间：2012-07-04T08:58:43.140
> 
> 标签：java, nosql, bigdata, sqlfire

我面临一个有趣的问题：我必须为我的用户显示 Facebook、Foursquare 和 Twitter 的聚合提要，但我不知道使用什么解决方案。很多批次在并行运行，并且活动流中有很多更新。

我需要操作活动列表，所以我首先尝试了 Redis，但是当您使用许多 sunionstore 命令时，复制不起作用。我一直在想：

*   noSQL -> HBase。

*   newSQL -> VoltDB 和 SQLFire。

*   数据网格 -> Infinispan、GridGain 和 Gigaspace

你觉得我应该用什么？你还有其他建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:02:51.940

我们在生产中使用[Hazelcast](http://www.hazelcast.org)已有 2 年了，对它的性能和可扩展性非常满意。

我们也使用 Gridgain，但作为计算网格，而不是数据网格

我认为 Hazelcast 应该是一个不错的选择，因为你可以批量和实时插入，而且它的 API 和文档都很好

# php - 使用 php 创建 txt 文件失败

> ID：11325751
> 
> 赞同：0
> 
> 时间：2012-07-04T08:59:20.190
> 
> 标签：php, file-io

我正在尝试创建一个文件并在名为 debug 的文件夹中写入一条消息：

```
 function debug($report){
   $file="/debug/debug.txt";
   file_put_contents($file,$report,FILE_APPEND | LOCK_EX);
 } 
```

调试文件夹位于我的根目录中。但是文件无法创建..为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:04:45.600

此代码将打开文件夹的**所有**权限。

```
chmod('PATH_TO_FOLDER',0777); 
```

根据您要对该文件夹执行的具体操作，您可能会考虑给予它稍微有限的权限，只允许特定用户读取/写入它。

以下是从 PHP 手册中获取的一些其他示例 - [http://php.net/manual/en/function.chmod.php](http://php.net/manual/en/function.chmod.php)

```
<?php
// Read and write for owner, nothing for everybody else
chmod("/somedir/somefile", 0600);

// Read and write for owner, read for everybody else
chmod("/somedir/somefile", 0644);

// Everything for owner, read and execute for others
chmod("/somedir/somefile", 0755);

// Everything for owner, read and execute for owner's group
chmod("/somedir/somefile", 0750);
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:05:01.707

这确实是对[Lix](https://stackoverflow.com/users/558021/lix)的回答的补充。

最常见的原因是当您使用 mpd_php5 在 Apache 下运行脚本时，因为您的 php 进程将作为 apache UID（`www-data`或其他）运行。但是，默认情况下，您的调试目录将由您的帐户拥有，具有 755 权限。

我建议将权限设置为 777 是不好的做法，因为这将允许任何人在您的目录中创建文件，而是*暂时*将权限设置为 777，然后使用 Q&D 脚本创建一个`debug/logs`并将其权限设置为 755，之前将调试目录返回到 755。

您会发现该`debug/logs`目录现在由 Apache UID 拥有，并且可以由任何 Apache 进程写入。

这里的一个问题是您将需要使用脚本来删除旧的调试文件，因为您自己的帐户将无权执行此操作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-04T09:12:24.600

该代码没有任何问题，如果未显示错误可能是 php 配置引起的。请参阅错误报告[错误报告](http://php.net/manual/en/errorfunc.configuration.php)。

通常它可能是由权限引起的（参见调试文件夹的权限）

# ios - UITableView 问题（iOS）

> ID：11325752
> 
> 赞同：2
> 
> 时间：2012-07-04T08:59:23.733
> 
> 标签：ios, uitableview

我想知道为什么`cellForRowAtIndexPath`滚动 UITableView 时调用函数。这是否意味着在每个滚动单元格配置代码再次运行？滚动表格时出现缓慢问题。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"CountryCell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
}

// Configure the cell...
NSString *continent = [self tableView:tableView titleForHeaderInSection:indexPath.section];
NSString *country = [[self.countries valueForKey:continent] objectAtIndex:indexPath.row];

cell.textLabel.text = country;

cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

return cell;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T05:13:11.840

正如其他人所说，是的，当每个新单元格即将滚动到屏幕上时，`cellForRowAtIndexPath`都会为每个单元格调用。虽然这可能会影响您的性能，但替代方案（让 iOS 预先创建所有单元格）会更糟：如果您发现创建一个单元格的速度很慢，想象一下必须创建数百个单元格，其中很多用户可能永远看不到。无论如何，即时特性`cellForRowAtIndexPath`可能更有效，无论是在前期性能损失方面，还是在小型移动设备上宝贵的内存消耗方面。

就性能缓慢而言，这里没有什么可能是罪魁祸首。我们中的很多人都有`cellForRowAtIndexPath`更复杂的方法，速度不是问题。如果您进行数百万次查找，我可能会建议您使用更有效的查找替代方法`valueForKey`，但是对于一个单元格，人眼无法观察到差异。我认为你必须寻找其他地方。是否`titleForHeaderInSection`在做任何奇怪的事情（即只是在数组中查找值的其他事情）？也许你可以和我们分享。也许在 UI 中的某些东西。也许你应该通过 Profiler 的“Time Profiler”运行它，也许会出现一些问题。但是`cellForRowAtIndexPath`这个简单的应该会带来完美流畅的用户体验。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T09:01:57.740

滚动表格时，消失的单元格将被丢弃，出现的单元格必须使用 创建和配置`cellForRowAtIndexPath`。

或者更好的说法——单元不会被丢弃，它们被移动到可以重复使用的单元队列中，并且不会创建新单元——可重复使用的单元从队列中取出并重新配置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T09:04:16.100

滚动表格时调用 cellForRowAtIndexPath 是正确的，这正是它的用途。每次滚动过程中出现新单元格时，都应创建或重用 UITableViewCell 实例，然后对其进行配置。

缓慢通常是由在配置阶段执行昂贵的操作引起的。在您的情况下，潜在的缓慢操作将是国家/地区查找。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T09:04:55.310

为 UITableView 中的每一行调用该方法`cellForRowAtIndexPath`，当一行从可见视图中消失时，它的内存被清除并且一个新的单元格进入可见性，因为新的内存被分配（或者旧的可能会重新used) 并且新单元格是使用`cellForRowAtIndexPath`方法配置的。

从这个方法中只能知道需要为这个特定的单元配置什么。

它很慢可能是因为每个单元格都在执行一些繁重的操作。

# sharepoint - sharepoint datawebpart paging issue with groupings

> ID：11325754
> 
> 赞同：2
> 
> 时间：2012-07-04T08:59:38.427
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-2007, dataviewwebpart

I created a dataview webpart in designer and have two different groupings. I enabled the grouping headers so they show up in my webpart. The issue I am having is that I want to make the first grouping visible on the first page (or other pages) so people then use the expand/collapse functionality to view other info. When I select display all items option in the paging functionality, the webpart breaks. Please help.

# facebook - 对 json facebook 数据进行排序

> ID：11325757
> 
> 赞同：0
> 
> 时间：2012-07-04T08:59:51.453
> 
> 标签：facebook, json, sorting

我试图弄清楚如何对 facebook 事件提要提供的 json 数据进行排序。

这是我一直在使用的代码

```
 $int_count = 1;
                $FBpage = file_get_contents('https://graph.facebook.com/demo/events?access_token=170978966368624|vNXbO1MPwpvP56jU6zWGCyRESQ');
                $FBdata = json_decode($FBpage);
                foreach ($FBdata->data as $events )
                    {
                $x_sdt = explode("T",$events->start_time);
                $x_sd = explode("-",$x_sdt[0]);
                if($x_sdt[0] > date("Y-m-d"))
                    { 
                $StatusID = explode("_", $events->id);
                    echo '<ul class="shows">';
                    echo '<li class="date">';
                        echo $x_sd[2]."/".$x_sd[1]."/".$x_sd[0];
                    echo '</li>';
                    echo '<li class="title"><a href="'.get_bloginfo('url').'/shows/#'.$events->id.'">'.maxTruncate($events->name, 62).'</a></li>';
                    echo '</ul>';
                    }
                $int_count++;
                if($int_count==5){ break; }

                    } 
```

谁能指出我正确的方向，到目前为止，我相信我应该使用 usort()，但是当我查看教程时，我不知道该怎么做。任何智慧炸弹将不胜感激。

谢谢弗兰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:25:57.030

使用`usort`，您只需要编写自己的小比较函数，它将两个数组元素作为参数，通过您喜欢的任何度量来比较它们，并返回一个值，说明哪个应该被认为比另一个“更大”。

看看 PHP 手册中的例子，真的很简单。

如果您仍然无法自行工作，请描述您尝试过的内容以及（示例）数据结构。

# php - PHP mail function varying results since server upgrade

> ID：11325758
> 
> 赞同：0
> 
> 时间：2012-07-04T08:59:51.653
> 
> 标签：php, email, webserver

My server was upgraded by the company recently. There are 17 sites of mine on it. The ones using wordpress are sending out PHP mail normally but the from address is that of the server company and not the one stated.

The standard PHP mail function however in many of my others sites including one on mission critical today is not sending the email. Most are complicated but I have set up a simple test that won't send either.

```
<?php $to = "<--- my address --->";
                $subject = "Test mail";
                $message = "Hello! This is a simple email message.";
                $from = "someonelse@example.com";
                $headers = "From:" . $from;
                mail($to,$subject,$message,$headers);
                echo "Mail Sent.";?> 
```

What could be the reason that this isn't working.

# iphone - 在 UINavigationbar 中添加栏按钮

> ID：11325761
> 
> 赞同：2
> 
> 时间：2012-07-04T09:00:05.400
> 
> 标签：iphone, ipad, uinavigationbar, uibarbuttonitem, back-button

我是 iPhone 开发者的新手，

我想在导航栏上的后退按钮旁边再添加一个按钮，我正在使用导航控制器，所以后退按钮已经在左侧。在最右侧，我添加了一个按钮

`self.navigationItem.rightBarButtonItem = ModeButton;`

但是当我写的时候，

`self.navigationItem.leftBarButtonItem = NewButton;`

NewButton 覆盖我的后退按钮，我想将我的新按钮放在后退按钮旁边。

**任何帮助将不胜感激。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T09:06:43.697

`UINavigationItem`有一个属性`leftItemsSupplementBackButton`，你可以使用它。

leftItemsSupplementBackButton 一个布尔值，指示除了后退按钮之外是否显示左侧项目。

```
@property BOOL leftItemsSupplementBackButton 
```

讨论 通常，自定义左栏按钮项目的存在会导致后退按钮被移除以支持自定义项目。将此属性设置为 YES 会导致 leftBarButtonItems 或 leftBarButtonItem 属性中的项目显示在后退按钮的右侧——也就是说，它们显示在后退按钮的旁边，而不是代替后退按钮。当设置为 NO 时，将显示这些属性中的项目而不是后退按钮。此属性的默认值为 NO。

来自[UINavigationController 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationItem_Class/Reference/UINavigationItem.html)。

```
UIBarButtonItem *leftBarButtonItem =[[UIBarButtonItem alloc] initWithTitle:@"Done" style:UIBarButtonItemStyleDone target:self action:@selector(logout)];
self.navigationItem.leftBarButtonItem = leftBarButtonItem;
self.navigationItem.leftItemsSupplementBackButton = YES; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T09:08:44.273

我认为你应该有一个灵活的空间让它不与其他重叠，也许这样的东西应该让你开始。

```
 UIBarButtonItem *back = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStyleBordered target:self action:@selector(Back:)];
    UIBarButtonItem *flexibleSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
    UIBarButtonItem *newButton = [[UIBarButtonItem alloc] initWithTitle:@"newButton" style:UIBarButtonItemStyleBordered target:self action:@selector(newButtonMethod:)];

    NSArray *navBarItems = [[NSArray alloc] initWithObjects:back, flexibleSpace, newButton, nil]; 
```

**编辑：**

```
NSMutableArray* buttons = [[NSMutableArray alloc] initWithCapacity:3];  
UIBarButtonItem *back = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStyleBordered target:self action:@selector(Back:)];
[buttons addObject:back];
    UIBarButtonItem *flexibleSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
[buttons addObject:flexibleSpace];
    UIBarButtonItem *newButton = [[UIBarButtonItem alloc] initWithTitle:@"newButton" style:UIBarButtonItemStyleBordered target:self action:@selector(newButtonMethod:)];
[buttons addObject:newButton];

UIToolbar* myToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 100, 45)];
        [myToolbar setTintColor:[self.navigationController.navigationBar tintColor]];
 [myToolbar setItems:buttons animated:NO];

UIBarButtonItem *myButton = [[UIBarButtonItem alloc] initWithCustomView:myToolbar];

self.navigationItem.leftBarButtonItem = myButton; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T09:04:13.497

创建一个包含两个按钮的自定义视图，然后按如下方式创建条形按钮项：

```
UIBarButtonItem *leftBarButtonItem =[[UIBarButtonItem alloc] initWithCustomView:userCustomView];

self.navigationItem.leftBarButtonItem = leftBarButtonItem; 
```

编辑：下面的代码只是如何创建两个按钮的示例，

```
UIView *customView = [[UIView alloc] init];
customView.frame = CGRectMake(0, 0, 100, 40);

UIButton *button1 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button1 setTitle:@"Add" forState:UIControlStateNormal];
button1.frame = CGRectMake(0, 0, 50, 40);

UIButton *button2 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button2 setTitle:@"del" forState:UIControlStateNormal];
button2.frame = CGRectMake(60, 0, 50, 40);
[customView  addSubview:button2];
[customView addSubview:button1];

UIBarButtonItem *barItem =[[UIBarButtonItem alloc] initWithCustomView:customView];

self.navigationItem.leftBarButtonItem = barItem; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T09:11:26.553

为此，您必须制作一个 Custom `UIBarButtonItem`。答案是，您必须分别放置两个按钮，BackButton（用户定义）和 NewButton，如下所示：

```
UIView *viewForLeftBarButton = [[UIView alloc] initWithFrame:CGRectMake(5, 5, 100, 35)];
[viewForLeftBarButton addSubview:BackButton];
[viewForLeftBarButton addSubview:NewButton];

UIBarButtonItem *leftBarButtonItem =[[UIBarButtonItem alloc] initWithCustomView:viewForLeftBarButton];

self.navigationItem.leftBarButtonItem = leftBarButtonItem; 
```

# java - JNA 无法加载模块 - 输出调试信息（依赖项）

> ID：11325764
> 
> 赞同：0
> 
> 时间：2012-07-04T09:00:34.370
> 
> 标签：java, debugging, dll, jna

我想加载一个 .dll 文件（simpleDLL.dll 来自 jna 教程），但我得到了

> java.lang.UnsatisfiedLinkError：无法加载库“simpleDLL”：找不到指定的模块。

我在ubuntu下用wine运行java程序，我得到了这个信息：

> err:module:import_dll 库 MSVCR100D.dll （...

在 Eclipse 中运行程序时没有显示此消息，所以我的问题是：

有没有办法为 JNA 设置更详细的调试级别，以便在尝试加载模块时可以显示依赖的 .dll 文件？（我浪费了很多时间认为 jna.library.path 设置不正确，实际上，没有打印有关所需其他 .dll 文件的信息）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:55:48.407

您可以从 wine 获得更详细的信息，因为该系统选择实现比 Windows 操作系统更具描述性的错误消息。你不能神奇地强迫窗户表现得像酒一样。

wine 模拟窗口（即为了正常运行，它必须完全模拟窗口）。显然在某些情况下它提供了更好的错误报告，尽管我怀疑你的 err:module:import_dll 消息是通过正常的 win32 错误文本查找而不需要额外的调整，或者 wine 不会很好地模拟 Windows。

另一方面，Windows 不会报告有关 DLL 依赖关系的更多信息，直到 Microsoft 更改它这样做，这不太可能发生，永远。

# python - Matplotlib multiple colours in tick labels

> ID：11325765
> 
> 赞同：2
> 
> 时间：2012-07-04T09:00:38.947
> 
> 标签：python, matplotlib

Is it possible to have an tick labels formatted with different colours within the label

eg Using labels like this:

```
labels = ['apple - 1 : 7', 'orange - 5 : 10'] 
```

Such that the numbers 1 & 5 appear blue and 7 & 10 appear red?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T15:40:48.387

如果您使用 matplotlib 的面向对象接口来绘制数据，您可以使用[get_xticklabels](http://matplotlib.sourceforge.net/api/axes_api.html?highlight=get_xticklabels#matplotlib.axes.Axes.get_xticklabels)和[get_yticklabels](http://matplotlib.sourceforge.net/api/axes_api.html?highlight=get_yticklabels#matplotlib.axes.Axes.get_yticklabels)访问每个轴的标签，然后更改您想要的颜色。

**编辑：**我误解了原来的问题。请参阅下文以获得更合适的答案。

一种可能性是删除原始标签并使用文本实例创建伪标签。这样，您可以在内部创建具有不同颜色的文本。这并不简单（您将不得不编写大量代码，特别是如果您有很多想要多色的标签），但下面是您可以做什么的示例。

这个想法是使用该方法以您想要的颜色创建每个标签的不同部分`matplotlib.offsetbox.TextArea`，然后使用该方法将它们合并（我通过[这篇文章](http://abitofpythonabitofastronomy.blogspot.com/2009/05/mpl-multicolor-text.html)`matplotlib.offsetbox.HPacker`发现了 HPacker 方法）。

```
import matplotlib.pyplot as plt
from matplotlib.offsetbox import AnchoredOffsetbox, TextArea, HPacker

fig = plt.subplots(1)

ax.bar([0, 1], [20, 35], 0.35, color='0.5', yerr=[2, 3], ecolor='k')
ax.set_xlim([-0.2, 1.7])
ax.set_xticks([]) # empty xticklabels

# apple label
abox1 = TextArea("apple - ", textprops=dict(color="k", size=15))
abox2 = TextArea("1 ", textprops=dict(color="b", size=15))
abox3 = TextArea(": ", textprops=dict(color="k", size=15))
abox4 = TextArea("7 ", textprops=dict(color="r", size=15))

applebox = HPacker(children=[abox1, abox2, abox3, abox4],
                  align="center", pad=0, sep=5)

# orange label
obox1 = TextArea("orange - ", textprops=dict(color="k", size=15))
obox2 = TextArea("5 ", textprops=dict(color="b", size=15))
obox3 = TextArea(": ", textprops=dict(color="k", size=15))
obox4 = TextArea("10 ", textprops=dict(color="r", size=15))

orangebox = HPacker(children=[obox1, obox2, obox3, obox4],
                    align="center", pad=0, sep=5)

anchored_applebox = AnchoredOffsetbox(loc=3, child=applebox, pad=0., frameon=False,
                                      bbox_to_anchor=(0.1, -0.07),
                                      bbox_transform=ax.transAxes, borderpad=0.)

anchored_orangebox = AnchoredOffsetbox(loc=3, child=orangebox, pad=0., frameon=False,
                                       bbox_to_anchor=(0.6, -0.07),
                                       bbox_transform=ax.transAxes, borderpad=0.)

ax.add_artist(anchored_applebox)
ax.add_artist(anchored_orangebox)

plt.show() 
```

这使：

![苹果橙](../Images/ffbeb8541e11ecec981577542025fd7d.png)

# oracle - Migrating from Oracle to PostgreSQL : where are the limits?

> ID：11325766
> 
> 赞同：1
> 
> 时间：2012-07-04T09:00:42.627
> 
> 标签：oracle, postgresql, database-migration, arcgis

I've found similar posts on this forum, but migrate it to another one if needed.

We want to migrate *to* PostgreSQL *from* Oracle, but we have 6000 users simultaneously connected to a 4 To GIS database(divided in 1 To instances) and many other instances for WebServices.

Before looking at other problems, we heard that 500 max connected users is the max limit supported before performances decrease, decrease augmented when size of database become huge.

Have you got any (or do you know links to) successful experience on such a migration?
Do we have to wait for PostgreSQL better performances to migrate?

* * *

*EDIT*

Found *[another example](http://www.zdnet.com/oracle-database-costs-are-driving-firms-to-postgres-says-enterprisedb-7000023384/)*.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T12:17:22.607

请阅读Kevin Grittner 关于该主题的[这篇文章](http://wiki.postgresql.org/wiki/Number_Of_Database_Connections)，它将解释很多连接为何存在问题以及 PostgreSQL 核心团队解决此问题的决定。

有关成功案例的列表，请参阅[EnterpriseDB 站点](http://www.enterprisedb.com/success-stories)，这是一家为标准 PostgreSQL 发行版提供支持以及为基于标准发行版构建的高级产品提供支持和许可的公司。对于企业数据库使用[Postgres Plus Advanced Server](http://www.enterprisedb.com/products-services-training/products/postgres-plus-advanced-server)可能是一个不错的选择。

# image-processing - Errors while working with OpenCV 2.4.1

> ID：11325767
> 
> 赞同：0
> 
> 时间：2012-07-04T09:00:43.450
> 
> 标签：image-processing, opencv, object-recognition

I have delphi-7 wrappers for opencv.

I have the following errors while executing certain OpenCV methods:

```
cvPyrDown - error: External exception E06D7363.
    main thread ($1e24):
    7c812afb +000052 kernel32.dll                               RaiseException
    008af8ec +00004c MSVCR90D.dll                               _CxxThrowException
    1022d1bd +226673 opencv_core241d.dll                        ?    error@cv@@YAXABVException@1@@Z
    00ae084b +1aba11 opencv_imgproc241d.dll                     cvPyrDown
    0049a3f6 +00013e TestProject.exe        OpenCV_Test  93 +23 FindSquares

cvSetImageCOI: error: External exception E06D7363.
    main thread ($192c):
    7c812afb +000052 kernel32.dll                            RaiseException
    008af8ec +00004c MSVCR90D.dll                            _CxxThrowException
    1022d1bd +226673 opencv_core241d.dll                     ?error@cv@@YAXABVException@1@@Z
    1006572c +06235a opencv_core241d.dll                     cvSetImageCOI
    0049a410 +000160 TestProject.exe     OpenCV_Test  99 +29 FindSquares 
```

What is wrong or can be wrong with that?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:17:13.480

解决了。目标图像中的图像通道数存在问题。

# java - Android ProgressDialog delayed before showing up

> ID：11325768
> 
> 赞同：2
> 
> 时间：2012-07-04T09:00:46.710
> 
> 标签：java, android

I'm using the ProgressDialog in android to prevent the user from, say, pressing a button multiple times while a long task is updating the UI.

My problem is that the ProgressDialog does not seem to show up after awhile, as it seems to be another thread.

In my experiment I called this ProgressDialog show() in an EditText's text changed listener. It still allows me to type in multiple characters in a short period before showing up.

Is there a way I can detect that the ProgressDialog has already started?

Edit 1: This was done on a real device. The code is simply this:

```
 editText.addTextChangedListener( new TextWatcher() {
            ...
            public void onTextChanged(CharSequence s, int start, int before, int count) {

                    ProgressDialog lock = new ProgressDialog(UIClass.this);
                    lock.show();

        }
            ...
    }); 
```

My first assumption was that this would show the dialog immediately after the first character I type, but when I tested by typing multiple characters in a short period it was still possible, and the locking only starts after the 2nd or 3rd character. I am assuming that this is because the ProgressDialog is another thread. I wish to know how to make it properly lock the UI at the exact point I am interested in.

# apache - mod_rewrite 重定向 url 不起作用

> ID：11325776
> 
> 赞同：0
> 
> 时间：2012-07-04T09:01:12.627
> 
> 标签：apache, mod-rewrite, url-rewriting, url-rewrite-module

似乎无法让 mod_rewrite 工作。当网站是 Flash 时，我们有一个已经在这里、那里和任何地方打印的域名。它在它的尾迹/#login.php 中有一个#，我们希望当人们把它放进去时，它会将他们重定向到/login.php。我已经尝试过这条规则，但无法让它发挥作用：

```
RewriteEngine On
RewriteRule ^/#login.php$ /login.php 
```

我还通过使用重定向到谷歌检查了重写引擎是否正在工作。只需要过时的 #login.php 即可转到新的 login.php

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:06:01.463

URL（或“片段”）中的**#**不会发送到服务器，它纯粹是为了客户端指向页面的某些部分。如果您`http://hostname.com/#login.php`在地址栏中看到，服务器收到的唯一内容是对`/`. 您可能需要在页面上使用一些 javascript 来查看浏览器的地址栏以查找片段，并可能将其作为查询字符串发送到服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:06:53.260

尝试 ：

```
RewriteEngine On
RewriteBase /
RewriteRule ^#login\.php$ /login.php [QSA,L] 
```

Mod_rewrite 已启用？可用的 ？

# testing - Mocha 测试 express.js 应用 http 请求

> ID：11325781
> 
> 赞同：0
> 
> 时间：2012-07-04T09:01:35.257
> 
> 标签：testing, express, mocha.js

我需要测试来自路由功能的正确响应。

在[https://github.com/visionmedia/express/blob/master/test/app.router.js](https://github.com/visionmedia/express/blob/master/test/app.router.js) 我看到代码：

```
app.get('/:name', function(req, res, next){
  res.send(req.params.name);
});

request(app)
.get('/foo%2Fbar')
.expect('foo/bar', done); 
```

我想知道什么是**request(app)**我怎样才能包含它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:56:14.883

如果您查看该文件的顶部，您将看到：

```
 request = require('./support/http') 
```

转到 ./support/http 文件：

[https://github.com/visionmedia/express/blob/master/test/support/http.js](https://github.com/visionmedia/express/blob/master/test/support/http.js)

在这里您可以看到以下内容：

```
 module.exports = require('supertest'); 
```

现在您知道模块的名称，您可以搜索 npm（节点包管理器）数据库：

[http://packagefinder1-enome.dotcloud.com/search?q=supertest](http://packagefinder1-enome.dotcloud.com/search?q=supertest)

如果你想使用这个模块，你需要安装它：

```
 npm install supertest 
```

# hash - 访问子元素时避免检查 nil

> ID：11325791
> 
> 赞同：3
> 
> 时间：2012-07-04T09:02:02.890
> 
> 标签：hash, nullpointerexception, readability

这可能是一个更美观的问题，但我发现它真的很烦人，因为我总是得到一些丑陋的代码。可读性总是很重要的，对吧？

我想检查一个值是否存在于散列中的散列中。所以我要做的就是这个。

```
already_exists_data[:data][:user_id] 
```

但是如果 :data 为 nil 并且检查 :data 可能会给我一个 nullpointer 异常，如果 already_exists_data 为 nil。所以我最终得到的是：

```
if already_exists_data && already_exists_data[:data] && already_exists_data[:data][:user_id]
    # Do stuff
end 
```

现在这是一些看起来很讨厌的代码。也许我应该将哈希修改为一个对象。但我有时会碰到这个问题，想知道你们是如何面对它的。

我目前正在使用 Ruby 进行编码，但我在使用多种其他语言时遇到了这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T22:43:14.633

如果我让管家在维多利亚街 34 号的餐桌上拿起一盒巧克力，我只会这样问他。我不想说：*去找维多利亚街，如果找到了，请找34号，如果找到了……*

我能做到这一点是因为他发现了自己的错误：如果他找不到那条街，他就会空手而归。

因此，您应该使用`try`带有空异常处理程序的 a 。在伪代码中：

> 试试 {chocolates = street("Victoria")(34)("dining room")("table")}

在语言中（例如`ruby`，带有一些朴素的[语法糖](https://stackoverflow.com/questions/3672445/having-a-ruby-block-command-silently-fail-without-a-blank-rescue-block)），块是您可以编写的表达式：

> 如果尝试 {already_exists_data(data)(user_id)}
> 
> > 做东西

语言本身也可以提供帮助： in `perl`,`$streets{Victoria}[34]{dining_room}{table}`当 eg 是时未定义`$streets`。当然，在您发现地址错误之前，您的管家可能会空手而归。`try`块解决方案 - 和您的-`if .. && ....`具有相同的缺点：仅当您真的不在乎 Victoria Street 是否有 34 号时才使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T14:50:06.967

**与语言无关的解决方案：**不要使用空值。曾经。在您的项目中强制执行此规则。如果您绝对必须，[请将它们包装到`Either`/`Optional`中，这会增加明确性](http://www.ibm.com/developerworks/java/library/j-ft13/index.html)。一些语言，比如 Scala，有`Optional`已经内置的概念。

**特定于 Java 的解决方案：**如果必须使用 null，请使用 和 注释方法参数和返回`@Nullable`值`@Nonnull`。`null`如果从这种方法获取值，体面的 IDE（例如 IntelliJ）能够分析您的代码并突出显示可能的取消引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T14:26:48.213

另一种可能性是用函数调用包装散列访问，并在函数内执行“脏”工作。然后您的代码将类似于（伪代码语法）：

```
accessHash(already_exists_data, data, userid) 
```

*注意*：您可以根据传递给包装函数的参数数量来访问嵌套哈希，因此它适用于多种情况。

# ios - 在启用分页的情况下使用 UIScrollView

> ID：11325792
> 
> 赞同：0
> 
> 时间：2012-07-04T09:02:04.743
> 
> 标签：ios, uiscrollview, paging, uicontrol

我已经在每个页面上使用并`UIScrollView`添加`UIVIew`和实现了分页。令人惊讶的是，在启用分页的情况下没有响应！以下是我的代码。谁能告诉我如何在启用分页的情况下开始工作？`UIControls``UIVIew``UIControl``UIScrollView``UIControls``UIScrollView`

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    int totalPages = [[delegate sections] count] + 2; // 2 for startOfDayQuestions and endOfDayQuestions

    int X = 45, Y = 20, H = 40, W = 680;

    // start of the day questions
    CGRect startFrame = scrollView.frame;
    startFrame.origin.x = 0;
    startFrame.origin.y = 0;

    UIView *startPage = [[UIView alloc] initWithFrame:startFrame];

    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(X, Y, W, H)];
    label.backgroundColor = [UIColor clearColor];
    label.textColor = [UIColor blackColor];
    label.text = @"Text";
    label.font = [UIFont fontWithName:paragraph_font_name size:paragraph2_font_size];
    [startPage addSubview:label];

    Y += H;

    UITextField *textField = [[UITextField alloc] initWithFrame:CGRectMake(X, Y, W, H)];
    textField.borderStyle = UITextBorderStyleRoundedRect;
    textField.font = [UIFont systemFontOfSize:15];
    textField.placeholder = @"enter text";
    textField.autocorrectionType = UITextAutocorrectionTypeNo;
    textField.keyboardType = UIKeyboardTypeDefault;
    textField.returnKeyType = UIReturnKeyDone;
    textField.clearButtonMode = UITextFieldViewModeWhileEditing;
    textField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;    
    textField.delegate = self;
    textField.userInteractionEnabled = YES;
    [startPage addSubview:textField]; --> This UITextField doesn't respond when added to startPage and in turns scrollView but works fine if I add it to self.view!

    // a page is the width of the scroll view
    scrollView.pagingEnabled = YES;
    scrollView.userInteractionEnabled = YES;
    scrollView.contentSize = CGSizeMake(scrollView.frame.size.width * totalPages, scrollView.frame.size.height);
    scrollView.showsHorizontalScrollIndicator = NO;
    scrollView.showsVerticalScrollIndicator = NO;
    scrollView.scrollsToTop = NO;
    scrollView.delegate = self;

    pageControl.numberOfPages = totalPages;
    pageControl.currentPage = 0;

}

- (void)scrollViewDidScroll:(UIScrollView *)sender
{
    if (pageControlUsed)
        return;

    CGFloat pageWidth = scrollView.frame.size.width;
    int page = floor((scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
    pageControl.currentPage = page;
}

- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView
{
    pageControlUsed = NO;
}

- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
     pageControlUsed = NO;
}

- (IBAction)changePage:(id)sender
{
    int page = pageControl.currentPage;

    CGRect frame = scrollView.frame;
    frame.origin.x = frame.size.width * page;
    frame.origin.y = 0;
    [scrollView scrollRectToVisible:frame animated:YES];

    pageControlUsed = YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:39:26.503

将没有 pagingEnabled 的 subScrollView 添加到每个页面并将控件添加到 subScrollView 有效！如果您在启用分页的情况下直接将控件添加到滚动视图，则手势识别器的第一响应者似乎始终是滚动​​视图，因此您的控件永远不会收到事件并且表现得像残疾人！

# javascript - iOS 视口的 jQuery 修复

> ID：11325797
> 
> 赞同：-3
> 
> 时间：2012-07-04T09:02:17.193
> 
> 标签：javascript, jquery, ios, viewport

有没有办法将用于修复视口的脚本转换为 jQuery。现在该脚本与 jQuery 脚本并行工作，不知道它会如何与 jQuery 发生冲突。

脚本是：

```
// Rewritten version
// By @mathias, @cheeaun and @jdalton

(function(doc) {

var addEvent = 'addEventListener',
type = 'gesturestart',
qsa = 'querySelectorAll',
scales = [1, 1],
meta = qsa in doc ? doc[qsa]('meta[name=viewport]') : [];

function fix() {
meta.content = 'width=device-width,minimum-scale=' + scales[0] + ',maximum-scale=' + scales[1];
doc.removeEventListener(type, fix, true);
}

if ((meta = meta[meta.length - 1]) && addEvent in doc) {
fix();
scales = [.25, 1.6];
doc[addEvent](type, fix, true);
}

}(document)); 
```

来源： http: [//www.blog.highub.com/mobile-2/a-fix-for-iphone-viewport-scale-bug/](http://www.blog.highub.com/mobile-2/a-fix-for-iphone-viewport-scale-bug/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:03:10.313

您不必担心这与 jQuery 冲突。它不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T05:34:55.830

我认为可能存在冲突。如果我使用 jQuery 向页面添加动态文本，则不再修复视口错误。如果我删除对 j​​query.min.js 的引用，该错误也会被删除。这是两个具有水平滚动图像的页面。第一页修复了视口错误，并为图像使用了静态标题。该错误已修复。第二个页面也使用了视口错误修复，但它依赖 jQuery 为标题生成动态的、淡化的文本，在这种情况下，错误并没有修复......

[http://mauitradewinds.com/test/view.htm](http://mauitradewinds.com/test/view.htm) - 错误已修复。

[http://mauitradewinds.com/test/test.htm](http://mauitradewinds.com/test/test.htm) - 错误未修复。

所以我认为原始发布者的担忧可能是有效的。

# websphere - 从 WebSphere 运行 removeNode 时，我们可以保留已安装的应用程序和创建的服务器吗？

> ID：11325800
> 
> 赞同：0
> 
> 时间：2012-07-04T09:02:20.943
> 
> 标签：websphere, websphere-7, websphere-6.1

最近，我们收到了将当前 WAS 6.1 节点重新联合到新的 WAS 7.1 DmgrNode 的请求。现在，那个 WAS 6.1 节点正在 V6.1 DmgrNode 下运行。据我了解，当对 6.1 Node 使用 removeNode 时，所有已安装的应用程序和服务器都会因此被删除。是否有可能在操作过程中找到一些方法来保留这些东西？或任何其他解决方案来实现这一点？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:06:18.403

我相信这只能通过使用产品运行时中包含的运行时迁移工具（WASpreUpgrade、WASPostUpgrade）来实现。请参阅[迁移计划](http://www-01.ibm.com/support/docview.wss?uid=swg27008724)知识集合中的[迁移计划演示文稿](http://www-01.ibm.com/support/docview.wss?uid=swg27008724&aid=6)，特别是第 29-31 页以及该文档中的各种参考资料。

# assembly - 解包软件进行分析

> ID：11325801
> 
> 赞同：-1
> 
> 时间：2012-07-04T09:02:20.967
> 
> 标签：assembly, reverse-engineering

有没有人尝试过分析radmin的二进制文件。我只是想分析它以获得动手经验。我发现它以某种方式打包或加密。我的意思是很少有 getprocaddress、loadlibrary、virtualalloc 的导入是其中的一些调用..IDA 不能识别很多..processexplorer 以紫罗兰色显示进程..但所有部分都在那里。

在调试 radmin 进程期间，我还看到了其他一些事情，例如：-崩溃 ollydbg，生成异常并终止，在调试器中终止，当我关闭附加的调试器时，该进程保持活动状态并按应有的方式工作..完全诡异的..

任何人都可以建议我应该如何去做。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:14:39.120

你有没有试过找出图像是用哪个混淆器加扰的？您可以尝试使用[PEID](http://www.softpedia.com/get/Programming/Packers-Crypters-Protectors/PEiD-updated.shtml)。

# .net - 使用 VSTO for Visio 将图像添加到 orgchart 形状

> ID：11325802
> 
> 赞同：2
> 
> 时间：2012-07-04T09:02:23.907
> 
> 标签：.net, vsto, visio, organizational-chart

我正在研究动态组织结构图的实施。

在我的项目中（在visual studio 2010 - winformapplication 中）我使用VSTO for Visio（visio 2010）。现在我想在 OrgChart (orgch_m.vst) 模板中将图像添加到我的形状 (Microsoft.Office.Interop.Visio.Shape)。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:58:18.590

看看 John Goldsmith 将图像添加到 orgchart 形状的解决方案。

[http://visualsignals.typepad.co.uk/vislog/2008/06/linking-org-chart-images.html](http://visualsignals.typepad.co.uk/vislog/2008/06/linking-org-chart-images.html)

# objective-c - 使用具有多个值的键创建 NSDictionary

> ID：11325804
> 
> 赞同：0
> 
> 时间：2012-07-04T09:02:35.600
> 
> 标签：objective-c, ios, nsmutablearray, nsdictionary

我有一个包含`NSDictionary`dic1 对象的可变数组，

每个字典都有一个名为的键 `contactId`，多个字典可以具有相同的值`contactId`。

我想要做的是创建一个`NSDictionary`唯一`contactIds`的键和一个数组值，其中包含所有`NSDictionary`dic1 对象的列表，这些对象的值`contactId`等于键。

我怎样才能做到这一点？

我的数据如下所示：

```
**myArray**:[  **dic1** {contactId = x1 , name = name1 }, **dic2**{contactId = x2, name = 
name2 }, **dic3**{contactId = x1, name = name3} ] 
```

我希望它变成这样：

```
**NSDictionary**: { **x1**:[dic1, dic3], **x2**:[dic2] } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T09:26:25.123

使用快速枚举：

```
NSMutableDictionary *result = [NSMutableDictionary dictionary];

for (id obj in myArray)
{
    NSString *contactId = [obj objectForKey:@"contactId"];
    NSMutableSet *contacts = [result objectForKey:contactId];
    if (!contacts)
    {
        contacts = [NSMutableSet set]
        [result setObject:contacts forKey:contactId];
    }
    [contacts addObject:obj];
} 
```

您可以使用块而没有真正的额外好处：

```
__block NSMutableDictionary *result = [NSMutableDictionary dictionary];

[myArray enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop){
    NSString *contactId = [obj objectForKey:@"contactId"];
    NSMutableSet *contacts = [result objectForKey:contactId];
    if (!contacts)
    {
        contacts = [NSMutableSet set]
        [result setObject:contacts forKey:contactId];
    }
    [contacts addObject:obj];
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:09:30.363

经典的方法呢？

```
NSMutableDictionary* Result;
NSEnumerator* Enumerator;
NSDictionary* Dict;
Result=[[NSMutableDictionary alloc] init];
Enumerator=[YourArray objectEnumerator];
while ((Dict=[Enumerator nextObject])!=nil)
{
   NSString* ContactID;
   NSMutableSet* Contacts;
   ContactID=[Dict objectForKey:@"contactID"];
   Contacts=[Result objectForKey:ContactID];
   if (Contacts==nil)
   {
      Contacts=[[NSMutableSet alloc] init];
      [Result setObject:Contacts forKey:ContactID];
      [Contacts release];
   }
   [Contacts addObject:Dict];
} 
```

这应该创建一个 Result 字典。不过，我还没有测试（甚至编译）这个。

# 32bit-64bit - Gallio 64 位平台和 32 位 dll 声纳和 OpenCover BadImageException

> ID：11325806
> 
> 赞同：1
> 
> 时间：2012-07-04T09:02:36.723
> 
> 标签：32bit-64bit, sonarqube, gallio, badimageformatexception, opencover

我们使用 Gallio 进行测试执行。所有被测项目和所有测试项目均编译为 32 位版本。Buildserver 是 Win2008 R2 64bit。Gallio 安装为 32 位版本。加里奥是通过声纳启动的。作为coverageTool，我们使用OpenCover。正如标题所说，BadImageFormat 异常是问题所在。然后尝试运行，使用 .Net\Framework64\ 文件夹。但所有目标都设置为 32 位架构。经过两天的测试和研究，我尝试了不同的 Gallio 版本： 32 位安装程序 64 位安装程序 Gallio Bundle Zip 我试图将 Gallio.Host.x86.exe 重命名为 Gallio.Host.exe 我试图通过 CorFlags 强制 Gallio 在 32 位模式下运行Galio.Echo.exe /32BIT+ /FORCE （使用 /FORCE 将使该图像的签名无效，并要求组件退出）

有没有人知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T21:46:32.120

确保您运行的是 Sonar v3.0（或更高版本），因为大多数 64 位问题已在该版本中得到解决。 ~~我还建议将 PartCover 作为您的覆盖工具。~~ *（编辑：PartCover 是现在要走的路）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T02:09:00.463

> 然后尝试运行，使用.Net\Framework64\文件夹

“用过”是什么意思？即使每个可执行文件都被正确标记并作为 32 位进程运行，如果其中一个尝试在 Framework64 文件夹中加载二进制文件（所有 64 位二进制文​​件），也会出现 BadImageFormatException。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-02T15:37:01.823

尝试将“Gallio.Host.Elevated.x86.exe”、“Gallio.Host.x86.exe”重命名为“Gallio.Host.Elevated.exe”、“Gallio.Host.exe”。这对我有用 -[使用 Gallio 运行 nunit 测试（x86）](https://stackoverflow.com/questions/17112747/running-nunit-tests-x86-with-gallio/17198945#17198945)

# html - 如何在 ruby 中使用 post 方法？

> ID：11325812
> 
> 赞同：-1
> 
> 时间：2012-07-04T09:03:05.850
> 
> 标签：html, ruby, json

我有一个包含获取名称和标题值的文本框的表单。并且存在一个提交按钮。我想获取文本框的值并将其以如下所示的格式发送到 api。

```
 {  
     "entry":
       { 
        "name":"api-workspace",
        "title":"API Workspace"
       }
    } 
```

我怎么能用红宝石做到这一点？如果可用，请给我一些示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:13:35.633

这些值在`params`散列中传递给您的控制器。假设您的文本字段的名称是`name`并且`title`这应该有效：

```
json = { entry: { name: params[:name], title: params[:title] } }.to_json

puts json # => {"entry":{"name":"api-workspace","title":"API Workspace"}} 
```

# java - 数独的遗传算法

> ID：11325814
> 
> 赞同：-4
> 
> 时间：2012-07-04T09:03:11.847
> 
> 标签：java, genetic-algorithm, sudoku

谁能教我如何使用遗传算法解决下面源代码生成的数独？新创建的数独遗传算法求解器应该使用下面源代码中的实例。

```
import java.util.Random;
//Generates a Sudoku puzzle through brute-force

public class SudokuPuzzle
{
    public int[][] puzzle = new int[9][9];        // Generated puzzle.
    public int[][] solved_puzzle = new int[9][9]; // The solved puzzle.

private int[][] _tmp_grid = new int[9][9]; // For the solver
private Random rand = new Random();
private short solution_count; // Should be 1

/**
 * Constructor generates a new puzzle, and its solution
 */
public SudokuPuzzle()
{
    generateSolvedPuzzle(0);
    generatePuzzle();
}

/**
 * Finds a solved puzzle through depth-first search
 */
private boolean generateSolvedPuzzle(int cur_cell)
{
    if (cur_cell > 80)
        return true;

    int col = cur_cell % 9;
    int row = cur_cell / 9;

    // create a sequence of the integers {1,...,9} of random order
    int [] numbers = new int[9];
    for (int i=0; i < 9; i++)
        numbers[i] = 1+i;
    shuffle_array(numbers);

    for (int i=0; i < 9; i++)
    {
        int n = numbers[i]; // for the next number in the array
        // if number is acceptable by Sudoku rules
        if (!existsInColumn(solved_puzzle, n, col)
                && !existsInRow(solved_puzzle, n, row)
                && !existsInSubGrid(solved_puzzle, n, row, col))
        {
            // attempt to fill in the next cell with the current cell set to number
            solved_puzzle[row][col] = n;
            if (generateSolvedPuzzle(cur_cell + 1))
                return true;
            solved_puzzle[row][col] = 0; // didn't work, reset cell and try the next number in sequence
        }
    }
    return false; // unreachable (since search is exhaustive and a solved puzzle must exist)
}

/**
 * Solves the Sudoku puzzle through depth-first, exhaustive search, and store the number of
 * solutions in solution_count. Currently, we want to use this only to detect if two solutions
 * exist. Hence, we stop the search as soon as two solutions have been found.
 *
 *
 */
private boolean _solvePuzzle(int cur_cell)
{
    if (cur_cell > 80)
    {
        solution_count++;
        if (solution_count > 1) // two solutions detected. notify caller to abort search
            return true;
        return false;
    }

    int col = cur_cell % 9;
    int row = cur_cell / 9;

    if (_tmp_grid[row][col] == 0) // if cell is unfilled
    {
        for (int n=1; n <= 9; n++) // for each number
        {
            // if number is acceptable by Sudoku rules
            if (!existsInColumn(_tmp_grid, n, col)
                    && !existsInRow(_tmp_grid, n, row)
                    && !existsInSubGrid(_tmp_grid, n, row, col))
            {
                // attempt to fill in the next cell with the current cell set to number
                _tmp_grid[row][col] = n;
                if (_solvePuzzle(cur_cell + 1)) // notified of two solutions being detected
                    return true; // notify caller to abort search
                _tmp_grid[row][col] = 0; // try with other numbers
            }
        }
    }
    else
        if (_solvePuzzle(cur_cell + 1)) // notified of two solutions being detected
            return true; // notify caller to abort search

    return false;
}

private void shuffle_array(int array[])
{
    // swap the first size elements with other elements from the whole array
    for (int i = 0; i < array.length; i++)
    {
        // find an index j (i<j<=array_length) to swap with the element i
        int j = i + rand.nextInt(array.length - i);
        int t = array[j];
        array[j] = array[i];
        array[i] = t;
    }
}

/**
 * Returns whether a given number exists in a given column.
 *
 * @param col    column to check.
 * @param number number to check.
 * @return       true iff number exists in row.
 */
private boolean existsInColumn(int[][] puzzle, int number, int col)
{
    for (int row = 0; row < 9; row++)
        if (puzzle[row][col] == number)
            return true;
    return false;
}

/**
 * Returns whether a given number exists in a given row.
 *
 * @param row    row to check.
 * @param number number to check.
 * @return       true iff number exists in row.
 */
private boolean existsInRow(int[][] puzzle, int number, int row)
{
    for (int col = 0; col < 9; col++)
        if (puzzle[row][col] == number)
            return true;
    return false;
}

/**
 * Returns whether if the 3x3 sub-grid which includes (row, col) contains a
 * cell with the given number.
 *
 * @param row    a row in the sub-grid.
 * @param col    a col in the sub-grid.
 * @param number number to check.
 * @return       true iff sub-grid contains number.
 */
private boolean existsInSubGrid(int[][] puzzle, int number, int row, int col)
{
    int sub_grid_start_row = (row / 3)*3;
    int sub_grid_start_col = (col / 3)*3;
    for (int _row = sub_grid_start_row; _row < sub_grid_start_row + 3; _row++)
        for (int _col = sub_grid_start_col; _col < sub_grid_start_col + 3; _col++)
            if (puzzle[_row][_col] == number)
                return true;
    return false;
}

/**
 * Generates a Sudoku puzzle from a solved puzzle by setting up to 64 cells to 0.
 * (We cannot set more than 64 cells to 0\. See http://www.math.ie/McGuire_V1.pdf)
 */
private void generatePuzzle()
{
    // copy solved_puzzle to puzzle
    for (int row = 0; row < 9; row++)
        for (int col = 0; col < 9; col++)
            puzzle[row][col] = solved_puzzle[row][col];

    // create a sequence of the integers {0,...,80} of random order
    int [] cell_sequence = new int[81];
    for (int i=0; i < 81; i++)
        cell_sequence[i] = i;
    shuffle_array(cell_sequence);

    // attempt to set each cell in the sequence to 0
    int count_set_to_zero = 0;
    for (int i=0; i < 81 && count_set_to_zero < 64; i++)
    {
        int cur_cell = cell_sequence[i];
        int col = cur_cell % 9;
        int row = cur_cell / 9;
        int sav = puzzle[row][col];
        puzzle[row][col] = 0;
        solution_count = 0;

        // copy puzzle to _tmp_grid for the solver to work on
        for (int r = 0; r < 9; r++)
            for (int c = 0; c < 9; c++)
                _tmp_grid[r][c] = puzzle[r][c];

        if (_solvePuzzle(0)) // Puzzle allows more than 1 solution
            puzzle[row][col] = sav; // Revert to original puzzle
        else
            count_set_to_zero++;
    }
}

public void showSolution()
{
    for (int row = 0; row < 9; row++)
    {
        System.out.print("  ");
        for (int col = 0; col < 9; col++)
            System.out.print(" " + solved_puzzle[row][col]);
        System.out.println();
    }
}

public void show()
{
    for (int row = 0; row < 9; row++)
    {
        System.out.print("  ");
        for (int col = 0; col < 9; col++)
            System.out.print(" " + puzzle[row][col]);
        System.out.println();
    }
}

public static void main(String[] args)
{
    SudokuPuzzle sudoku_puzzle = new SudokuPuzzle();
    System.out.println("Puzzle:");
    sudoku_puzzle.show();
    System.out.println();
    System.out.println("Solution:");
    sudoku_puzzle.showSolution();
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T09:18:47.280

你可以先看看[这里](http://fakeguido.blogspot.com/2010/05/solving-sudoku-with-genetic-algorithms.html)和[这里](http://www.cse.psu.edu/~sub194/papers/sudokuTechReport.pdf)。这些不是基于 Java 的解决方案，但应该让您走上正轨。

仅仅因为您可以访问生成谜题的程序，您不能只是将其转换为基于 GA 的应用程序，原因是您拥有的程序和您要构建的程序执行不同的任务。

# user-interface - 在 tcl tk 组合框中做出选择后如何运行脚本

> ID：11325817
> 
> 赞同：3
> 
> 时间：2012-07-04T09:03:22.840
> 
> 标签：user-interface, tcl, tk

我正在使用[`ttk::combobox`](http://www.tcl.tk/man/tcl/TkCmd/ttk_combobox.htm)并且我想在每次做出选择时运行一个脚本。但是在文档中只存在一个选项，它在选择*之前*`-postcommand`运行脚本。选择后如何运行脚本（我希望能够知道何时做出选择）。

 *此外，组合框是`-state readonly`因此无法通过条目进行选择。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T09:12:16.347

绑定到`<<ComboboxSelected>>`虚拟事件，每次选择项目后组合框都会生成该事件。

```
bind .combo <<ComboboxSelected>> {puts "chosen [%W get]"} 
```*

# browser - Sinatra - CSS 和 Javascript 未在某些页面上加载

> ID：11325818
> 
> 赞同：1
> 
> 时间：2012-07-04T09:03:28.773
> 
> 标签：browser, sinatra

我目前正在使用 Sinatra 开发一个管理仪表板，并且我正在寻找一条路线，特别是我的样式表和 javascripts 不起作用。

路线是`'/users/:id/?'`

出于某种原因，当我点击该页面时，浏览器正在寻找`http::localhost:9393/users/css/my_stylesheet.css`而不是`public/css/my_stylesheet.css`等等。为什么这条路线会发生这种情况？此路由的布局文件（包含样式表和脚本链接）与任何其他路由相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:36:49.190

没关系。去#sinatra IRC 频道询问。我的问题是我如何在我的 haml 视图中引用链接。我需要`#{url ('/path/to/asset.css')}`在我的代码中使用 url 帮助程序，而不是对链接进行硬编码。

# version-control - 用远程文件替换本地文件

> ID：11325820
> 
> 赞同：1
> 
> 时间：2012-07-04T09:03:43.733
> 
> 标签：version-control, mercurial

如何用存储库中的最新版本替换本地文件？

还有一种方法可以替换与存储库中的相应文件冲突的所有本地文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T13:49:32.877

两者都`hg update -C`将`hg revert`做您正在寻找的 - 用存储库中的干净版本替换本地修改的文件。我个人更喜欢`hg revert`但`hg up -C`也会做这项工作

### 汞还原

帮助中的一些进一步细节`hg revert`

```
With no revision specified, revert the specified files or directories to
the contents they had in the parent of the working directory. This
restores the contents of files to an unmodified state and unschedules
adds, removes, copies, and renames. If the working directory has two
parents, you must explicitly specify a revision.

Using the -r/--rev or -d/--date options, revert the given files or
directories to their states as of a specific revision. Because revert does
not change the working directory parents, this will cause these files to
appear modified. This can be helpful to "back out" some or all of an
earlier change. See "hg backout" for a related method.

Modified files are saved with a .orig suffix before reverting. To disable
these backups, use --no-backup. 
```

希望有帮助

克里斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:13:00.250

svn更新？

或者删除你的文件夹，然后 svn checkout...

或尝试选项--force。

# filezilla - 文件传输失败

> ID：11325825
> 
> 赞同：0
> 
> 时间：2012-07-04T09:04:04.120
> 
> 标签：filezilla

我使用 MFT Internet Server 在我的本地机器上安装了 ftp 服务器。我正在尝试从 MFT Internet 服务器上传/下载文件。

我无法将文件从 fileZilla 传输到 MFT Internet Server。它说

状态：开始上传 C:\fileZilla\Rs.766Transferred.jpg
命令：PASV
响应：227 进入被动模式 (10,231,0,108,7,138)
命令：STOR Rs.766Transferred.jpg
响应：150 打开传输目录的数据连接
响应：426转移失败。AuditID=A70420000444
错误：文件传输失败

我找不到上述任何解决方案。请帮我解决这个问题。

-斯里达尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T13:48:53.667

FTP 服务器回答一个 FTP 错误代码（错误 426）。我以前从未见过“AuditID”，所以它可能是您的 FTP 服务器试图告诉您的一些特殊（错误）代码。检查 FTP 服务器文档。

通过 Internet 快速搜索可找到[TIBCO MFT Internet Server 用户指南](https://docs.tibco.com/pub/managed-file-transfer-internet-server/7.2.0-may-2012/MFT%20IS%20v7.2.0%20User%20Guide.pdf)，该指南参考第 3.3.4.2.1 节（第 101 页）中的“AuditID”。我不知道他们的分支和 FTP 传输的概念，所以我让你一个人呆在那里。希望它有所帮助。

# java - Android 搜索对话框不会在按钮/操作按下时打开

> ID：11325832
> 
> 赞同：0
> 
> 时间：2012-07-04T09:04:20.343
> 
> 标签：java, android, xml, search, android-manifest

我需要对这个进行第二次观察。我已按照[此处](http://developer.android.com/guide/topics/search/search-dialog.html)的基本说明在我正在处理的应用程序中设置搜索，但我无法使用设备搜索按钮和操作栏上的搜索操作来显示搜索对话框。

就操作栏而言，我已经确认在按下操作时正在调用 onSearchRequested 活动。这些文件中引用的任何资源都存在 - 应用程序运行时没有错误。

我的可搜索.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
    <searchable xmlns:android="http://schemas.android.com/apk/res/android"
        android:label="@string/search_label"
        android:hint="@string/search_hint" >
    </searchable> 
```

AndroidManifest.xml 中我的搜索处理活动的活动定义：

```
 <activity android:name=".SearchActivity">
        <intent-filter>
            <action android:name="android.intent.action.SEARCH" />
        </intent-filter>
        <meta-data android:name="android.app.searchable"
    android:resource="@xml/searchable"/>
    </activity> 
```

对于我想搜索的每个活动，我添加了：

```
 <meta-data android:name="android.app.default_searchable"
    android:value=".SearchActivity" /> 
```

当我按下上面提到的任何按钮时，什么都没有发生。logcat 中也没有任何反应。由于 onSearchRequested 被调用，我怀疑我的配置有问题，但到目前为止我一直找不到它。

如果它可能很重要，我可以指出我的 SearchActivity 扩展了 RoboFragmentActivity。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:47:09.540

好吧，我想通了，我有点自欺欺人了。看，我正在处理的项目有一个核心 android 应用程序支持基于它的专业化。我将搜索添加到前者，但当然有必要修改依赖模块中的 AndroidManifest.xml，因为它是部署该模块时最重要的那个。修改核心模块清单没有任何帮助。

当然，我是在核心模块中的 AndroidManifest.xml 中添加这些位，而不是在用于部署的模块中，这意味着我实际上并没有定义任何东西。难怪什么都没发生。

# string - 如何在 Perl 中将包含十六进制的字符串转换为十六进制？

> ID：11325844
> 
> 赞同：-1
> 
> 时间：2012-07-04T09:04:49.133
> 
> 标签：string, perl, hex

例如，我有一个 string `"\x80\x81\x82.abc\x00"`，那么它应该转换为 hex `8081822e61626300`。请问如何在Perl中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T12:40:05.267

*你有字符串* *吗*`"\x80\x81\x82.abc\x00"` *？* `'\x80\x81\x82.abc\x00'`

 ****选项1：***

```
my $text = "\x80\x81\x82.abc\x00";
$text = unpack "H*", $text;
print $text; 
```

***选项 2：***

```
my $text = '\x80\x81\x82.abc\x00';
$text =~ s/\\x([a-zA-Z\d]{2})/{chr hex $1}/ge;
$text = unpack "H*", $text;
print $text; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:59:33.793

`unpack 'H*'` is likely the best solution:

```
$ perlsh
eval: unpack "H*", "\x80\x81\x82.abc\x00"
'8081822e61626300' 
```*

# html - 为什么我的 :first-child css 规则没有得到应用？

> ID：11325850
> 
> 赞同：2
> 
> 时间：2012-07-04T09:05:06.293
> 
> 标签：html, css

```
<!-- HTML -->
<section class="row slide">
    <div class="span4">
        <h1>
            <span>Some</span>
            <br />
            <span>Title</span>
        </h1>
    </div>
</section>

<section class="row slide">
    <div class="span4">
        <h1>
            <em>Some emphasis</em>
            <br />
            <span>Some</span>
            <br />
            <span>Title</span>
        </h1>
    </div>
</section>

<section class="row slide">
    <div class="span4">
        <h1>
            <em>Some other emphasis</em>
            <br />
            <span>Some</span>
            <br />
            <span>Title</span>
        </h1>
    </div>
</section>

/* CSS */
section h1 span:first-child{
    color:#FF0033;
    } 
```

我试图定位容器`<span>`中每个`<h1>`标签中的第一个，`<section>`但只要`<span>`不是第一个子元素（如`<em>`），那么它就不会应用规则。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-04T09:07:25.990

`:first-child`选择第一个**孩子**。用于[`:first-of-type`](https://developer.mozilla.org/en/CSS/%3afirst-of-type)您的目的：

```
section h1 span:first-of-type {
    color: #FF0033;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T09:09:23.503

`:first-child`不将元素引用为该类型的第一个子元素，但通常是其父元素的第一个子元素！[在此引用 MDN](https://developer.mozilla.org/en/CSS/%3afirst-child)：

> `:first-child`CSS 伪类表示作为其父元素的第一个子元素的任何元素。

您需要的是`:first-of-type`选择器（[MDN 链接](https://developer.mozilla.org/en/CSS/%3afirst-of-type)），如下所示：

```
section h1 span:first-of-type{
  color:#FF0033;
} 
```

[示例小提琴](http://jsfiddle.net/dyLbH/)。

# javascript - 更改跨度内的日期以匹配用户的时区

> ID：11325852
> 
> 赞同：1
> 
> 时间：2012-07-04T09:05:18.847
> 
> 标签：javascript, jquery

我有这个功能：

```
function get_time_zone_offset() {   
    var current_date = new Date();   
    return -current_date.getTimezoneOffset() / 60; 
} 
```

我想要一个 jQuery 代码来更改每个跨度，哪个类是 'timeago' 标题值到它的值加上上面函数返回的数字。例如：

前：

```
<span class="timeago" title="7/4/2012 9:28:30 AM">7/4/2012 9:28:30 AM</span> 
```

后：

```
<span class="timeago" title="7/4/2012 12:28:30 PM">7/4/2012 12:28:30 PM</span> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:14:51.300

假设`7/4/2012 9:28:30 AM`代表 UTC，你可以让`Date`对象做所有的数学运算：

```
function formatDate(d) {
    var yy = d.getFullYear();
    var mm = d.getMonth() + 1;
    var dd = d.getDate();
    var hh = d.getHours();
    var ii = d.getMinutes();
    var ss = d.getSeconds();
    var ap;
    if (hh < 12) {
        if (hh === 0) {
            hh = 12;
        }
        ap = "AM";
    }
    else {
        if (hh > 12) {
            hh -= 12;
        }
        ap = "PM";
    }
    return mm + "/" + dd + "/" + yy + " " + hh + ":" + ii + ":" + ss + " " + ap;
}
$("span.timeago").each(function() {
    var dateInput = $(this).text();
    var dateInUTC = new Date(dateInput + " +0000"); // note: +0000 is the key
    var dateOutput = formatDate(dateInUTC);
    $(this).attr("title", dateOutput).text(dateOutput);
}); 
```

这假设日期是可解析的。这是[**一个演示**](http://jsfiddle.net/salman/uEVtw/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:11:18.827

通过将函数传递给[`.attr` *^([docs])*](http://api.jquery.com/attr/)非常简单：

```
var offset = get_time_zone_offset();
$('span.timeago').attr('title', function(i, val) {
    return +val + offset;
}); 
```

如果您必须先将值转换为正确的时间戳，请查看[如何使用 javascript 从日期转换为 unix_timestamp](https://stackoverflow.com/questions/9780712/how-to-convert-from-date-to-unix-timestamp-using-javascript)。

如果您使用的是[*Timeago*插件](http://timeago.yarp.com/)，请注意以下备注：

> 您是否担心时区支持？不要这样。Timeago 也处理这个问题。只要您的时间戳采用[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)格式并包含[完整的时区指示符](http://en.wikipedia.org/wiki/ISO_8601#Time_zone_designators)(±hhmm)，那么无论您的访问者居住在哪个时区，一切都应该开箱即用。

因此，您甚至可能不必手动进行此转换。只需将正确的时区信息添加到值中即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T09:11:41.230

看起来像这样的简单循环应该可以工作：

```
$('span.timeago').each(function(index, elm) {
    var newVal = $(elm).attr('title') * 1 + get_time_zone_offset(); // multiply by 1 to suppress string concatenation
    $(elm).attr('title', newVal);
}); 
```

# f# - 拆分字符串列表列表

> ID：11325853
> 
> 赞同：0
> 
> 时间：2012-07-04T09:05:21.093
> 
> 标签：f#

我对 F# 很（非常）新，我正在为一个小问题挠头。我有一个`string list list`我试图操纵和改造的东西。这可能是微不足道的。

正在从 CSV 文件中读取以下数据：

```
1,ABC,3
1,DEF,3
1,XYZ,1
2,ABC,2
2,XYZ,1
3,DEF,2
3,XYZ,2 
```

哪个对或错，我正在阅读`string list list`. 该数据表示一组非规范化的数据，其中`0`每条记录上索引处的字段是一个标识符字段。目前我只是试图拆分外部列表，以便我最终得到一个`string list list list`代表以下内容：

```
1,ABC,3        2,ABC,2        3,DEF,2
1,DEF,3        2,XYZ,1        3,XYZ,2
1,XYZ,1 
```

然后，上面的结果将被推送到我的 Typed 模型中并输入到应用程序的其余部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:07:09.547

使用`Seq.groupby`-

```
input
|> Seq.groupBy (fun (a,b,c) -> a)
|> Seq.toList 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T09:57:37.077

在您的代码中：

```
csvRecords
|> Seq.groupBy (fun record -> (record.Item 0))
|> List.ofSeq
|> List.map(toTypedModel) 
```

`record.Item 0`不是获取列表第一个元素的好方法。为此，您应该使用`List.head`或模式匹配。

您的示例如下所示：

```
csvRecords
|> Seq.groupBy List.head
|> Seq.map toTypedModel
|> List.ofSeq 
```

我还更改了使用`toTypedModel`顺序的顺序，它有助于避免分配不必要的列表。

# c++ - 具有大纹理的四边形纹理不显示

> ID：11325855
> 
> 赞同：0
> 
> 时间：2012-07-04T09:05:29.547
> 
> 标签：c++, linux, opengl, ati

我在绘制纹理时遇到了一些问题。情况如下：

我有带有 ati 硬件和专有 ati 驱动程序的 linux 盒子，它已经有两三年的历史了——因为 ati 抛弃了旧硬件。我有基于 opengl 的专用（主要）2D 引擎的自定义应用程序。（它是经过多年构建的，非常成熟，从来没有遇到过这样的问题）

当 vram（取自系统内存，在这种特殊情况下为 2GB）几乎达到最大纹理时，就会出现问题。当在场景中有一个四边形，它的纹理超过 2048x2048，它不会被绘制。当我对特定表面进行计时时，绘制时间最长的表面不是使用大纹理纹理的表面（大约需要 87 我们），而是在它之后绘制的下一个表面（大约需要 900 毫秒！）。正在绘制的场景并没有使用 vram 中的所有纹理，而仅使用了 8%。不幸的是，我什至无法释放它的一小部分。该应用程序通常在这种 vram 压力条件下工作，并且从未像这样表现过。

glGetError() 什么也不返回。所有其他纹理都正常绘制。

# visual-studio-2010 - Visual Studio 2010 当前行高亮

> ID：11325856
> 
> 赞同：0
> 
> 时间：2012-07-04T09:05:32.230
> 
> 标签：visual-studio-2010, visual-studio

我正在使用 Productivity Power Tools 的 Highlight current line 功能。但是，我还想突出显示当前*列*（即有一个垂直突出显示栏）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:08:00.387

我不认为这是可能的。当字体不是固定的时，你怎么能有一个共同的高亮列。

# foursquare - 搜索具有多个状态参数值的活动

> ID：11325859
> 
> 赞同：0
> 
> 时间：2012-07-04T09:05:59.377
> 
> 标签：foursquare

在检索活动和未启动的广告系列时，我想要求传递正确的参数。谢谢！

//不工作 [https://api.foursquare.com/v2/campaigns/list?status=active&status=notStarted](https://api.foursquare.com/v2/campaigns/list?status=active&status=notStarted)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T16:27:19.603

```
status=pending 
```

请参阅：[https ://developer.foursquare.com/docs/campaigns/list](https://developer.foursquare.com/docs/campaigns/list)

# android - 适用于 Android 的 WhirlyGlobe？

> ID：11325861
> 
> 赞同：0
> 
> 时间：2012-07-04T09:06:03.490
> 
> 标签：android, 3d, geometry, xamarin.android, textures

有没有类似 Android 的 WhirlyGlobe 之类的东西？

我只需要在用户可以操作的球体上放置一个纹理。它还必须能够在各种纬度和经度上放置叠加层。

我不想包含整个 3D 引擎，也不想用一堆数组和 GL 细节进行编码。

有什么选择还是 OpenTK 是最好的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T22:31:52.283

我开始着手自己的实现：[https](https://github.com/mattleibow/OpenGlobe) ://github.com/mattleibow/OpenGlobe 这有点粗糙和陈旧，但我希望有时间再做一次。以防万一有人感兴趣...

# c# - WPF 在运行时生成多个 ListView

> ID：11325862
> 
> 赞同：0
> 
> 时间：2012-07-04T09:06:07.570
> 
> 标签：c#, .net, wpf

是否有可能有这样的东西：

```
COMPANY A
EMPLOYEE 1 | ALBERT | EINSTEIN
EMPLOYEE 2 | ISAAC  | NEWTON
EMPLOYEE 3 | STEPHEN| HAWKING

COMPANY B
EMPLOYEE 1 | OBI-WAN | KENOBI
EMPLOYEE 2 | LUKE    | SKYWALKER
EMPLOYEE 3 | R2      | D2 
```

我想在运行时以编程方式动态添加公司，并将它们绑定到会经常更改的对象。

PS：我真的有*非常*短的开发延迟（<1H），所以我真的没有时间熟悉 TreeView 和 MVVVM。我只需要一些超基本的、软弱的和愚蠢的东西来开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:12:04.250

我最终使用[WPF MDI](http://wpfmdi.codeplex.com/releases)和在不同窗口上创建的 userControl ListViews (1 by MDI window)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:22:56.697

这是个好主意。您还可以创建一个 TabPanel 并绑定“公司”列表。（例如，选项卡可以标有公司名称。）它应该允许您自然地布局您的公司，并且每个选项卡都可以包含一个列表框，该列表框绑定了选项卡的数据上下文的员工列表......（与我想象的使用 MDI 相同的复杂程度）

此外，如果您的数据结构良好，您可以相对快速地创建 HierarchicalDataTemplate，然后将其绑定到 TreeView。坦率地说，如果您只需要显示数据，这可能是您最快的选择。

但是如果你喜欢你的 MDI 环境，为什么要改变一些有用的东西呢！;-)

# java - 每次运行程序时在 MySQL 数据库中生成一个新表的程序

> ID：11325863
> 
> 赞同：-1
> 
> 时间：2012-07-04T09:06:14.540
> 
> 标签：java, mysql

每当程序运行时，我的程序都无法为表生成一个新名称，因此它没有被创建。这是我的代码：-

```
package org.java.myfirstapp;

import java.sql.*;

public class ConnectForm {

    public void createFormData(String name,String num){
        Connection con=null;

        try{
            Class.forName("com.mysql.jdbc.Driver").newInstance();
            con = DriverManager.getConnection("jdbc:mysql://localhost:3306/formdata", "root", null);
            try{
                int no=1,no1 = 0;
                do{Statement st=con.createStatement();
                    no1=no;

                int x;
                x= st.executeUpdate("create table form"+no+" (Product varchar(20),Fields varchar(20))");

                if(x==0){ 

                st.executeUpdate("insert into form"+no+" values ('"+name+"','"+num+"')");
                }
                else {
                    no++;}

                }while(no1<no);
            }
            catch(SQLException e1){

                System.err.println("Error code:"+e1.getMessage());}

        }
            catch(Exception e1){
                e1.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:18:27.133

> Eclipse 无法找到 java.util.Random 虽然我在我的 Java SDK 中找到它

在您提供的示例中，您没有使用类“java.util.Random”，但这种类型的错误表明您可能缺少导入或构建路径设置不正确。

[什么是进口？](http://www.leepoint.net/notes-java/language/10basics/import.html) [什么是构建路径？](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/ref-properties-build-path.htm)

关于第二期

> form1' 已创建

这可能代表您的应用程序已经使用这行代码在数据库上创建了该表。

`t.executeUpdate("create table form"+no+" (Product varchar(20),Fields varchar(20)`

# c# - LINQ to XML 不返回结果

> ID：11325864
> 
> 赞同：2
> 
> 时间：2012-07-04T09:06:16.427
> 
> 标签：c#, .net, xml, linq, linq-to-xml

我正在使用 Linq 来解析 XML，但它没有返回任何结果：

XML:

```
<?xml version="1.0" encoding="UTF-8"?>
    <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
        <soapenv:Body>
            <downloadInfoResponse xmlns="http://webService">
                <downloadInfoReturn>
                <city>city</city>
                <companyName>company name</companyName>
            </downloadInfoReturn>
        </downloadInfoResponse>
    </soapenv:Body>
</soapenv:Envelope> 
```

代码：

```
public class Merc
{
    public string CompanyName { get; set; }
}

using (XmlReader reader = XmlReader.Create(new StringReader(result)))
{
    XDocument doc = XDocument.Load(reader, LoadOptions.SetLineInfo);
    List<Merc> m = (from downloadInfoReturn in doc.Descendants("downloadInfoReturn")
                    select new Merc
                    {
                        CompanyName = downloadMerchantInfoReturn.Element("companyName").Value
                    }).ToList();
} 
```

有没有其他好的方法可以做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T09:08:50.800

您的 XML 文件包含命名空间，因此您需要在执行查询时指定它：

```
XNamespace xn = "http://webService";
doc.Descendants(xn + "downloadInfoReturn") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T09:26:30.577

因为您在查询 xml 时缺少名称空间，所以您的类名也不匹配，请尝试以下代码，它适用于我。

```
 List<Merc> m = null;
 XNamespace ns = "http://webService";
 using (XmlReader reader = XmlReader.Create(new StringReader(result)))
      {
         XDocument doc = XDocument.Load(reader, LoadOptions.SetLineInfo);
         m = (from downloadInfoReturn in doc.Descendants(ns + "downloadInfoReturn")
                   select new Merc
                       {
                         CompanyName = downloadInfoReturn.Element(ns+ "companyName").Value
                        }).ToList<Merc>();
            }
    Console.WriteLine(m.Count); // this will show 1 
```

# python - 从子模块隐式导入

> ID：11325867
> 
> 赞同：3
> 
> 时间：2012-07-04T09:06:17.367
> 
> 标签：python, module

我有一个这样的包：

```
 foo/
    __init__.py
    bar.py
    baz.py 
```

我希望在导入时自动使用子模块的功能`foo`。因此，如果`bar.py`有`def spam()`某个地方，我希望能够像`foo.spam()`. 实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T09:09:17.833

里面`__init__.py`，做`from bar import spam`。

# python - pycurl 只得到部分响应

> ID：11325871
> 
> 赞同：2
> 
> 时间：2012-07-04T09:06:33.477
> 
> 标签：python, json, pycurl

我在 python 中使用 pycurl 向返回相当大的 json 格式响应的 URL 发出请求。当我在浏览器中转到 URL 时，我看到了全部内容，但如果我使用 pycurl 并打印接收到的数据，我只能看到浏览到 URL 时看到的内容的一半左右，并且使用解析数据时出现错误json库说明：

> ValueError：未终止的字符串开始于：第 1 行第 16078 列（字符 16078）

pycurl 请求是这样的：

```
conn = pycurl.Curl()
conn.setopt(pycurl.URL, myUrl)
conn.setopt(pycurl.WRITEFUNCTION, on_receive)
conn.setopt(pycurl.CONNECTTIMEOUT, 30)
conn.setopt(pycurl.TIMEOUT, 30)
conn.setopt(pycurl.NOSIGNAL, 10)
conn.perform() 
```

on_receive 函数目前只是打印数据。

有人知道为什么我只得到部分回复吗？我使用大量超时只是为了解决这个问题，我最初没有指定任何超时，但仍然收到此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:18:42.367

在 pycurl 中，你可以设置这个，

```
import pycurl
pycurl.CONTENT_LENGTH_DOWNLOAD 
```

尝试使用

```
import Curl, pycurl
con = Curl()
con.set_option(pycurl.CONTENT_LENGTH_DOWNLOAD, 9999999999)
con.get('url' .... 
```

还可以尝试以下操作，直到它起作用：

```
pycurl.SIZE_DOWNLOAD
pycurl.REQUEST_SIZE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T21:11:38.207

您可以尝试使用 curl 工具访问这些 json 数据。
当您能够获取数据时，只需将 curl 选项转换为 pycurl 选项。

```
curl --help | less 
```

# c++ - 基于抽象迭代器加速设计的想法

> ID：11325875
> 
> 赞同：2
> 
> 时间：2012-07-04T09:06:42.607
> 
> 标签：c++, oop, design-patterns

在一些 C++ 项目中，我正在处理代表各种性质的图形的对象。它们都实现了一个通用的抽象接口，我将在这篇文章中将其简化为一个函数：

```
class graph {
public:
   ...
   // Create an iterator over the successors of v
   virtual succ_iterator* succ(const vertex* v) const = 0;
   ...
}; 
```

该类`succ_iterator`也是一个抽象类，可以遍历 的后继顶点`v`：

```
class succ_iterator {
public:
   virtual void first() = 0;               // reset the iterator
   virtual void next() = 0;                // move to next successor
   virtual bool done() const = 0;          // no more successor left?
   virtual const vertex* dest() const = 0; // destination vertex
}; 
```

`v`因此，对in graph的所有后继者的循环`g`将如下所示：

```
succ_iterator* i = g->succ(v);
for (i->first(); !i->done(); i->next()) {
   // use i->dest()
}
delete i; 
```

我经常使用这样的循环来实现图形算法。**分析代码表明它花费大量时间为这些微小的迭代器实例分配内存，所以我想听听改进它的想法。**

不幸的是，我的图可能有非常不同的实现，所以每个图可能有自己的`succ_iterator`接口实现。本质上，层次结构中的每个类在`graph`层次结构中都有一个对应的类`succ_iterator`。例如，可以使用一个图来`std::vector`显式地存储邻接列表（在这种情况下，它`succ_iterator`是上面的一个简单包装器`std::vector::const_iterator`），而另一个图可能是即时计算的（在这种情况下，它的`succ_iterator`实例实际上会随着它的进展*计算*后继者） ）。我在编译时不知道图形的性质，因此这排除了`template`基于 - 的实现*à la* STL。

我考虑过让每个图处理一个`succ_iterator`. 这似乎需要一个额外的`graph::succ_release(succ_iterator*)`方法来将迭代器返回到池中而不是删除它。我见过的大多数池都是在内存级别完成的：即，当你释放一个对象时，它的析构函数被调用，但占用的内存被保留，这样下一个对象将被创建（使用就地构造函数）在同一堵塞。看起来这仍然浪费时间，因为就地构造函数必须设置一个与前一个对象相同的虚拟表指针。我认为在这样的池中，我应该将`delete`+替换为与构造函数具有相同原型`new`的方法。`recycle()`由于代码库非常大，这需要更改接口，**在我实施之前，我**想听听其他设计理念或可能的改进。****

 **编辑：我不使用线程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:42:04.800

You could cache the succ_iterators per graph instance and lookup and reuse them when needed?

```
//static or member:
std::map<graph*,succ_iterator*> graph_iterator_cache; 
```

But I don't know if you have threadsafety issues.**

# android - 如何在图像位图上绘制标签？

> ID：11325883
> 
> 赞同：3
> 
> 时间：2012-07-04T09:06:59.217
> 
> 标签：android, image, image-processing

我需要帮助来完成以下任务。我的任务类似于[Pose](https://play.google.com/store/apps/details?id=com.pose&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5wb3NlIl0.)（一个 Android 应用程序）。在这个应用程序中，他们完成了一个惊人的概念。捕获图像后，点击图像的任何部分，它会显示添加标语的选项数量。添加标签后，即表示将特定标签添加到图像上。一旦您将图像上传到服务器，现在您可以在您的个人资料中查看，一旦您触摸图像，标记部分可见，然后您再次触摸图像意味着标记的图标消失。如果他们使用任何第三方工具，他们是怎么想的？在这里，我添加了 Pose 应用程序的市场链接，还有视频和示例图像，我还添加了一些图像，请注意。请分享您完成此任务的宝贵建议。

![捕获的图像](../Images/c55152b0a79f4ed84e2db4ee4fb549ba.png) ![标记选项](../Images/e85723b49fc857473b409a95f8f5f0bd.png) ![标记添加的图像](../Images/a030d807546b5df4f36d63e263cfab77.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:16:19.253

您可以使用 a`FrameLayout`并尝试以这种方式将标签放置在图像上，但是我可能会制作一个 custom `View`，覆盖该`onDraw`方法并为所有这些进行自定义绘图。

# android - 为什么 phonegap 没有在 android ICS (4.0.2) 上显示图像？

> ID：11325884
> 
> 赞同：0
> 
> 时间：2012-07-04T09:06:59.910
> 
> 标签：android, cordova

我已经使用phonegap和jquery mobile创建了一个android应用程序，当我从android版本Gingerbread（2.3.3）测试它时一切都很好，但是当我在android手机上使用android版本ICS（4.0.2）运行我的应用程序时，所有图片未显示。为什么我的图像没有显示在带有 ICS 的 android 手机中？和 VideoRecording 功能也不能在更高版本中很好地工作。
这是示例代码： http: [//pastie.org/4201837](http://pastie.org/4201837)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:26:09.867

我对phonegap和ICS也有很多问题。其原因是因为它们是 ICS 固件中的许多 Web 视图错误。

这主要是因为谷歌想要更多的本地应用程序，因此没有为正确支持 web 视图应用程序而烦恼，例如 phonegap。

他们正在慢慢解决更重大的问题。您目前如何显示图像，如下所示？

```
<img src="test.png" /> 
```

# iphone - 如何在 Xcode 4.3.1 中使用 RegexKitLite？

> ID：11325885
> 
> 赞同：5
> 
> 时间：2012-07-04T09:07:06.067
> 
> 标签：iphone, xcode4.3

我无法使用 RegexKitLite 匹配字符串，例如

```
NSString *encodedPoints=[apiResponse stringByMatching: @"\\\"([^\\\"]*)\\\"^[^:]*" 
                                              capture: 0]; 
```

和 apiResponse 是：

```
@"http://maps.google.com/maps?output=dragdir&saddr=20.001364,73.749283&daddr=19.991499,73.744095" 
```

因此，通过这种方式，我收到以下错误：

> __NSCFString stringByMatching:capture:]: 无法识别的选择器发送到实例 0x131fc0
> 
> ***终止应用程序由于未捕获的异常'NSInvalidArgumentException'，原因是： ' - [__ NSCFString stringByMatching：捕获：]：无法识别的选择发送到实例0x131fc0' ***第一掷调用堆栈：（0x3422b8bf 0x3447b1e5 0x3422eacb 0x3422d945 0x34188680 0xb97b 0xad2f 0xaa2d 0xa617 0x34185435 0x375ef9eb 0x376b53cf 0x34185435 0x375ef9eb 0x375ef9a7 0x375ef985 0x375ef6f5 0x375f002d 0x375ee50f 0x375edf01 0x375d44ed 0x375d3d2d 0x30a06df3 0x341ff553 0x341ff4f5 0x341fe343 0x341814dd 0x341813a5 0x30a05fcd 0x37602743 0x4571 0x2838）

我试图通过谷歌搜索找到解决方案，但没有得到确切的解决方案。

请帮忙...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T23:07:47.477

确保您的项目中包含正确的库。

**转到您的项目导航器并选择项目。**

**单击 Target 并选择 Build Phases 选项卡，然后打开 Link Binary With Libraries。**

**按 + 按钮，然后搜索 libicucore.A.dylib。将此库添加到您的项目中。**

接下来，您需要添加编译源，它位于 Link Binary With Libraries 上方的 Compile Sources 中。再次点击 + 按钮并将**RegexKitLite.m**添加到目标。如果您尝试在此状态下构建项目，您应该在 RegexKitLite.m 文件中收到很多错误。**要更正此问题，请双击 Compile Sources 区域中的RegexKitLite.m**文件，然后将 -fno-objc-arc 包含到出现的弹出窗口中，将以下编译器标志添加到文件中。点击完成，您将希望将库源添加到您的项目中。

就像注释一样，在编译该源文件时`-fno-objc-arc`删除了**自动引用计数。**没有该编译器标志的文件出现的错误与 ARC 有关，因此它解决了问题。

这解决了我在使用 RegexKitLite 时遇到的问题，希望它对你有用。

# java - 样式化 TextField GXT 3

> ID：11325887
> 
> 赞同：1
> 
> 时间：2012-07-04T09:07:10.280
> 
> 标签：java, css, gxt, appearance

我想设置 gxt TextField 的 text-size 属性。我从编写 MyTextFieldAppearance 开始。这里一切正常。接下来我需要修改 my.gwt.xml 文件，在这里我遇到了麻烦。

类中没有TextFieldAppearance `com.sencha.gxt.widget.core.client.form.TextField`，唯一的TextFieldAppearance在TextInputCell.TextFieldAppearance类中，但是如果我写

```
<replace-with
  class="ru.nicetu.radient.kef.client.appearance.KefValueBaseFieldAppearance">
  <when-type-is
    class="com.sencha.gxt.cell.core.client.form.TextInputCell.TextFieldAppearance" />
</replace-with> 
```

什么都没发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:47:29.437

gxt 中有一个错误，在方法中

```
 public TextFieldDefaultAppearance(TextFieldResources resources) {
    super(resources);
    this.resources = resources;
    this.style = this.resources.css();
  } 
```

你需要添加行

```
 StyleInjectorHelper.ensureInjected(this.style, true); 
```

到最后

# java - liferay 挂钩部署 - 未找到事件类异常

> ID：11325889
> 
> 赞同：0
> 
> 时间：2012-07-04T09:07:18.340
> 
> 标签：java, hook, liferay, jboss5.x, liferay-6

**我用liferay-sdk-6.0.6**创建了一个钩子插件并定义了一个`servlet.service.events.pre`事件处理程序：

```
<service>
    <service-type>servlet.service.events.pre</service-type>
    <service-impl>com.ggd543.liferay.ServicePreAction</service-impl>
</service> 
```

当我将它部署到 liferay-6.0.6-ce 捆绑的 jboss 5.1.0 GA 上时，出现以下错误：

```
Caused by: java.lang.ClassNotFoundException: application.startup.events
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
    at com.liferay.portal.deploy.hot.HookHotDeployListener.doInvokeDeploy(HookHotDeployListener.java:569)
    at com.liferay.portal.deploy.hot.HookHotDeployListener.invokeDeploy(HookHotDeployListener.java:218)
    ... 68 more 
```

我的有什么问题`liferay-hook.xml`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T09:26:51.283

是的。从 Liferay 6 开始，您不会在 liferay-hook.xml 中定义类似的事件。您必须创建属性挂钩并在属性文件中定义您的事件。像下面的一些东西

**liferay-hook.xml**

```
<hook>
    <portal-properties>portal.properties</portal-properties>

</hook> 
```

**门户网站属性**

```
servlet.service.events.pre=com.ggd543.liferay.ServicePreAction 
```

# c# - Fluent NHibernate 尝试使用双向引用删除集合

> ID：11325893
> 
> 赞同：1
> 
> 时间：2012-07-04T09:07:27.023
> 
> 标签：c#, sql-server, nhibernate, fluent-nhibernate

我正在使用 Fluent 为我正在做的框架演示映射父集合 -> 子集合场景，我是一个 NHibernate 新手，所以放轻松:)

我的 DTO 有以下映射：

```
public class OrderMapping : ClassMap<OrderDTO>
{
    public OrderMapping()
    {
        Id(x => x.OrderId);
        Map(x => x.OrderDate);
        Map(x => x.Address);

        HasMany<OrderLineDTO>(x => x.OrderLines).KeyColumn("OrderId").Not.LazyLoad();
        Table("`Order`");
    }
} 
```

和

```
public class OrderLineMapping : ClassMap<OrderLineDTO>
{
    public OrderLineMapping()
    {
        Id(x => x.OrderLineId);
        Map(x => x.OrderId).ReadOnly();
        Map(x => x.Amount);
        Map(x => x.Description);
        References<OrderDTO>(x => x.Order).Column("OrderId");
        Table("OrderLine");
    }
} 
```

DTO 对象被设置为接收这些值，这一切都很好（我现在已经为孩子关闭了 LazyLoad，因为我正在处理框架并且 LazyLoading 还没有完成）。

所以我打开我的测试应用程序 - 数据被加载到两个网格中，父项和子项正确显示

如果我对子对象或父对象进行更改并尝试保存，我可以看到为父/子保存生成的 SQL 是正确的，并且传递给 SQL 的值是正确的 - 唯一的问题是更新后， NHib 决定要删除该集合？它尝试这个 SQL：

```
UPDATE OrderLine SET OrderId = null WHERE OrderId = 2 
```

失败是因为该表在 OrderLine.OrderId = Order.OrderId 上具有从 OrderLine 到 Order 的 FK，没有级联。另外我不明白为什么集合需要删除..

NHib 抛出“无法删除集合”错误 - 这是因为它试图从 OrderLineDTO 子项中删除“订单”引用吗？

编辑：

实际上查看 DTO，在我的业务对象的反向映射中，每个 OrderLineDTO 中不包含“订单”，所以我可能已经解决了这个问题！当我这样做时讨厌它:)

编辑2：

事实证明，即使在服务器端正确地重新创建对象，我也会遇到同样的问题

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T09:14:17.020

想通了-RTFM：P

在手册中：

*非常重要的注意事项：如果关联的列被声明为 NOT NULL，NHibernate 在创建或更新关联时可能会导致违反约束。为防止此问题，您必须使用与标记为 inverse="true" 的多值端（集合或包）的双向关联。请参阅本章后面对双向关联的讨论。*

# javascript - 单击基于 URL 的函数事件测试

> ID：11325895
> 
> 赞同：0
> 
> 时间：2012-07-04T09:07:36.493
> 
> 标签：javascript, jquery, url, testing, qunit

如何检查点击功能是否在正确的目标中打开并且 URL 没有损坏。我使用下面的 jQuery 代码在目标画布位置打开链接，如何执行与 Qunit 测试相同的操作

```
$(".class_name").click(function (event) {
    event.stopPropagation();
    $("#ad_id").attr({
        src: $(this).attr("href")
    }); 
```

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:12:10.870

您可以使用模拟事件的 jQuerys[触发](http://api.jquery.com/trigger/)方法：

```
$(".class_name").trigger('click'); 
```

然后检查 src 属性是否`$("#ad_id")`是您的预期值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:19:37.987

你可以用这个变量剥离锚点

```
var anchor = document.location.hash; 
```

并检查留下了什么。例子

```
$(".class_name").click(function(){
   var anchor = document.location.hash;
   if ( anchor === '#ad_id' ) {
     alert('ok');
   }else{ alert('not ok');}
}); 
```

# android - 一些自定义的联系人字段在android4.0上无法使用

> ID：11325900
> 
> 赞同：2
> 
> 时间：2012-07-04T09:07:42.543
> 
> 标签：android, xml, contacts

我在account&sync中添加了一个账户，ContactsSource的xml如下，在android2.3上可以正常工作，但是在android4.0.3上，“android:icon”和“android:summaryColumn”字段不能工作。在联系人详细信息页面在地址簿中，连接部分显示帐户的图标，而不是“@drawable/icon_bb”，摘要列显示帐户名称，而不是 xml 中的“data2”。

```
<ContactsDataKind
    android:mimeType="vnd.android.cursor.item/vnd.com.android.bb.profile"
    android:icon="@drawable/icon_bb"
    android:summaryColumn="data2"
    android:detailColumn="data3"
    android:detailSocialSummary="true" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T09:49:26.223

这里有两个调整：

第一个你必须换成冰淇淋三明治`detailColumn`。`summaryColumn`只需将另一个 contacts.xml 放入 res/xml-v14 文件夹

```
<ContactsDataKind
 ...
 android:summaryColumn="data3"
 android:detailColumn="data2"
 ... /> 
```

第二要使图标工作，您必须为意图过滤器设置图标`AndroidManifest.xml`

```
<intent-filter android:icon="@drawable/icon_bb" >
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <data android:mimeType="vnd.android.cursor.item/vnd.com.android.bb.profile"/>
</intent-filter> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-22T23:43:04.273

首先，您需要添加`<ContactsAccountType>`以下内容：（ `viewStreamItemActivity="com.test.Activity"`这是您的活动的完整路径，当用户单击该行项目时将接收该意图）。样本：

```
<ContactsAccountType xmlns:android="http://schemas.android.com/apk/res/android" viewStreamItemActivity="com.test.Activity">

  <ContactsDataKind android:mimeType="vnd.android.cursor.item/vnd.com.android.bb.profile" android:icon="@drawable/icon_bb" android:summaryColumn="data2" android:detailColumn="data3" android:detailSocialSummary="true" />

</ContactsAccountType> 
```

一旦你有了这个，你需要在清单中为活动中的图标添加一个意图过滤器（com.test.Activity）。样本：

```
<activity android:name=".Activity" android:label="@string/title_activity_main">
  <intent-filter android:icon="@drawable/icon_bb">
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <data android:mimeType="vnd.android.cursor.item/vnd.com.android.bb.profile" />
  </intent-filter>
</activity> 
```

# javascript - 如何在javascript中继承子类中的父类

> ID：11325904
> 
> 赞同：0
> 
> 时间：2012-07-04T09:07:57.600
> 
> 标签：javascript

```
var f_obj = {
    fname: 's',
    setfname: function (x) {
        this.fname = x;
    };
}
var l_obj = {
    lname: 'o',
    setlname: function (x) {
        this.lname = x;
    };
} 
```

如何通过我可以使用子对象访问父方法来继承 l_obj 中的 f_obj。

```
lobject = new l_obj(); 
```

java脚本中是否可以使用以下语句块

```
lobject.setfname("stack");
lobject.setlname("overflow"); 
```

# java - Android编程：把TCP改成RTP

> ID：11325905
> 
> 赞同：1
> 
> 时间：2012-07-04T09:07:58.487
> 
> 标签：java, android, tcp, rtp

我正在开发一个Android应用程序，包括客户端和服务器，客户端应用程序将相机捕获的数据发送到服务器进行处理，服务器将结果发送回客户端进行显示。它的当前版本使用 TCP 传输数据，因此代码包括以下内容：

客户端：

```
send(){
  Socket socket = new Socket();
  DataOutputStream outputStream = new DataoutputStream(socket.getOutPutStream());
  outputStream.writeUTF(...)
  ...
  outputStream.write(data);
  outputSteram.flush();
  ...
}

receive(){
   DataInputStream dataInputStream = new DataInputStream(...);
   ...
   dataInputStream.readFully(data, 0, length);
   ...
} 
```

服务器端：

```
...
serverDataInputStream.readFully(data,0,length);
//process data
...

serverDataOutputStream.write(reply)
... 
```

我尝试将其更改为使用 UDP，但是从客户端发送到服务器的数据远大于 UDP 数据包的最大大小，因此必须将客户端中的数据分段并在服务器上手动重新组合。结果发现太麻烦了。

我知道 RTP 负责处理数据碎片，所以现在我想将其更改为 RTP。google了一阵子，发现如下信息：http: [//sourceforge.net/projects/jlibrtp/](http://sourceforge.net/projects/jlibrtp/) [http://code.google.com/p/sipdroid/source/browse/trunk/src/org/sipdroid/ sipua/ui/VideoCamera.java](http://code.google.com/p/sipdroid/source/browse/trunk/src/org/sipdroid/sipua/ui/VideoCamera.java)

这两个帖子与我正在做的非常相似： [Android Camera RTSP/RTP Stream?](https://stackoverflow.com/questions/5959745/android-camera-rtsp-rtp-stream) [从 Android 相机创建 RTP 数据包以发送](https://stackoverflow.com/questions/7332532/creating-rtp-packets-from-android-camera-to-send)

但这些帖子只包含有限的示例代码。任何人都可以在这里发布更多详细信息和示例代码吗？我没有太多Java和Android编程经验。如此详细的示例或分步说明将不胜感激！

谢谢！

# iphone - 如何在 Xcode 中找到不是目标成员的所有文件

> ID：11325913
> 
> 赞同：14
> 
> 时间：2012-07-04T09:08:42.710
> 
> 标签：iphone, objective-c, ios, xcode

多个目标最常见的问题之一是忘记将文件添加到所有目标。导入文件很容易，无需勾选所有框...

![许多目标](../Images/dfafdfb20d0c6602dfe12bfe36ae9a08.png)

在构建阶段有一个“编译源”视图，它是为每个目标编译的文件列表。但是，似乎没有简单的方法来比较目标以查看一个文件中有哪些文件，而另一个则没有。

有没有办法找到不是特定目标成员的文件？也许是脚本？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2018-10-15T22:48:16.817

假设您的 MyProject.xcodeproj 在您的工作目录中，并且您的所有源都在您的工作目录中或之下，您可以使用这样的 hack* 来查找不属于任何目标的 .m 文件：

```
find . -name "*.m" -exec basename '{}' \; | xargs -I '{}' sh -c 'grep "{} in Sources" MyProject.xcodeproj/project.pbxproj > /dev/null; echo "$?\c"; echo " {}"' | grep "^1" 
```

从项目中删除文件后，您可以使用以下类似脚本从 git 存储库中删除它们 - 以及不再从项目中引用的其他 objc 源文件：

```
find . -name "*.[hm]" -exec basename '{}' \; | xargs -I '{}' sh -c 'grep {} MyProject.xcodeproj/project.pbxproj > /dev/null; echo "$?\c"; echo " {}"' | grep "^1" | cut -c3- | xargs -I '%' find . -name '%' -exec git rm '{}' \; 
```

* 从某种意义上说，它取决于 Xcode 文件格式的实现细节。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-04T16:02:02.977

我不知道编写脚本的方法，但是对于一个文件，您可以查看所有目标的列表，并检查关联的目标，您可以从该列表中选中或取消选中目标。

打开实用程序窗格并选择文件检查器。然后选择一个文件，相关的目标将在 File Inspector 的 Target Membership 区域中。

您甚至可以选择多个文件，并且与某些但不是所有选定文件关联的目标将标有“-”。如果您检查一个目标，那么所有选定的文件都将添加到该目标。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-14T15:17:38.200

我构建了一个工具，可让您提取目标中的文件

[https://github.com/ConfusedVorlon/ProjectFileTool](https://github.com/ConfusedVorlon/ProjectFileTool)

您可以将此与在项目目录中搜索 .m 文件进行比较。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-09-15T11:34:03.967

在 Xcode 8 中，列出 Target -> Build Phases -> Compile Sources 中的文件会给出每个目标的文件列表，但很难找到丢失的文件。选择所有文件并复制它们允许将物理文件的副本粘贴到临时目录中。在对两个目标执行此操作后，将其放入单独的文件夹中，然后可以删除重复项，直到每个文件夹中只剩下另一个目标中丢失的文件。

我刚刚遇到了一个“这个类不符合键的键值编码”崩溃，这是由于文件未包含在目标中而导致的，因此我必须找到丢失的文件。不是一个有效或优雅的解决方案，但它完成了工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-14T14:17:58.300

如果您不知道添加到目标的文件，您可以转到 Build Phases->Compile Sources（或您有差异的任何部分）。然后选择所有内容并点击复制。将其粘贴到差异程序中，选择另一个目标并重复。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-14T14:28:17.360

我不知道（完全）快速简便的方法，但是如果您在使用脚本，我有一个可以在这里执行此操作的库：[https ://github.com/jasperblues/XcodeEditor](https://github.com/jasperblues/XcodeEditor)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-18T10:27:15.183

Xcode 组装了一些环境变量，其中一个具有您要查找的目录：

`LINK_FILE_LIST_normal_x86_64`，对于 x86_64 目标，它指向`LinkFileList`，但从 basedir 您可以使用您可能想要的 FileLists 获取实际目录。

# c - ARM cortex m3中的调用堆栈展开

> ID：11325915
> 
> 赞同：2
> 
> 时间：2012-07-04T09:08:45.443
> 
> 标签：c, arm, stack-trace, cortex-m3, iar

我想创建一个调试工具来帮助我更好地调试我的应用程序。我正在做准系统（没有操作系统）。在 Atmel 的 SAM3 上使用 IAR 嵌入式工作台。

我有一个看门狗定时器，它在超时的情况下调用一个特定的 IRQ（这将在发布时用软件复位代替）。在 IRQ 处理程序中，我想打印（UART）堆栈跟踪，其中确切地发生了看门狗超时。

我查看了网络，但没有找到该功能的任何实现。

任何人都知道如何处理这种事情？

编辑：好的，我设法从堆栈中获取返回地址，所以我知道 WDT 超时发生的确切位置。展开整个堆栈并不像最初看起来那样简单，因为每个函数都会将不同数量的局部变量推入堆栈。

我最终得到的代码是这个（对于其他人，他们可能会觉得它有用）

```
void WDT_IrqHandler( void )
{
    uint32_t * WDT_Address;
    Wdt *pWdt = WDT ;
    volatile uint32_t dummy ;
    WDT_Address = (uint32_t *) __get_MSP() + 16 ;
    LogFatal ("Watchdog Timer timeout,The Return Address is %#X", *WDT_Address);
    /* Clear status bit to acknowledge interrupt */
    dummy = pWdt->WDT_SR ;

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-19T17:36:34.107

ARM 定义了一对节，.ARM.exidx 和 .ARM.extbl，它们包含足够的信息来展开堆栈而无需调试符号。这些部分用于异常处理，但您也可以使用它们来执行回溯。添加 -funwind-tables 以强制 GCC 包含这些部分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T11:41:38.600

要使用 ARM 执行此操作，您需要告诉编译器生成堆栈帧。例如使用 gcc，检查选项`-mapcs-frame`. 它可能不是您需要的，但这将是一个开始。

如果你没有这个，几乎不可能“展开”堆栈，因为你需要根据参数和局部变量为每个函数提供确切的堆栈使用情况。

如果您正在寻找一些示例代码，您可以查看`dump_stack()`Linux 内核源代码，并找到为 ARM 执行的相关代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-04T14:51:48.423

遵循执行应该非常简单。不在您的 isr 中以编程方式...

我们从 ARM 知道，在 Cortex-M3 上，它会将 xPSR、ReturnAddress、LR (R14)、R12、R3、R2、R1 和 R0 推入堆栈。破坏 lr 以便它可以检测到中断返回，然后调用向量表中列出的入口点。如果你在 asm 中实现你的 isr 来控制堆栈，你可以有一个简单的循环来禁用中断源（关闭 wdt，无论如何，这将需要一些时间）然后进入循环转储一部分堆。

从该转储中，您将看到 lr/返回地址，被中断的函数/指令，从程序的反汇编中，您可以看到编译器为每个函数放置在堆栈上的内容，在每个阶段减去它并继续回溯到您喜欢的回溯或回溯到您打印堆栈内容的回溯。

您还可以在 ram 中制作堆栈的副本并稍后对其进行剖析，而不是在 isr 中执行此类操作（副本仍然需要太多时间，但比在 uart 上等待的干扰要小）。

如果你所追求的只是被中断的指令的地址，那是最简单的任务，只需从堆栈中读取它，它将在一个已知的位置，然后打印出来。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-04T09:11:55.787

我听到我的名字了吗？:)

您可能需要一点内联汇编。只需弄清楚堆栈帧的格式，以及哪个寄存器保存普通的¹堆栈指针，并将相关值传输到 C 变量中，您可以从中格式化字符串以输出到 UART。

它不应该太棘手，但当然（相当低级）你需要注意细节。

¹如“无例外”；实际上，不确定ARM是否对普通代码和异常有不同的堆栈。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T12:04:14.280

你的看门狗定时器可以在任何时候触发，即使堆栈不包含足够的信息来展开（例如，堆栈空间已分配给寄存器溢出，但寄存器尚未复制）。

对于适当优化的代码，您需要调试信息、句号。看门狗定时器所能做的就是寄存器和堆栈转储，其格式机器可读，足以允许转换为`gdb`.

# c# - 优雅的课堂设计解决方案

> ID：11325917
> 
> 赞同：0
> 
> 时间：2012-07-04T09:08:50.127
> 
> 标签：c#, design-patterns

我在**C# 中有以下设计问题编程应用程序。**

我有类**A**和**B**都**派生自 C**。我无法更改他们的定义，因为它们是在**外部程序**集中定义的，也**没有**定义为**部分**的。

我想要实现的是根据天气来区分功能，前提是**C 对象**是***A 或 B***类型。当然，我不想使用 if 语句来比较所提供对象的运行时类型。**扩展方法**可以吗？我不这么认为。有什么解决办法吗？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:21:30.753

通过使用泛型应该可以使用扩展方法。有多种方法是可能的，但这是最简单的一种。虽然你确实明白了，*如果*

```
public static void Foo<T>(this T objectC)
     where T: C
{
     if(typeof(T)==typeof(B){ //or for runtime check:     if(objectC is B)
          //specific
     }
} 
```

然后，您可以在 A 或 B 的任何实例上调用 Foo。

您提到您不想要 if 语句，但我不确定您要避免这种情况的范围？完全避免它的唯一方法是拥有 2 种扩展方法，一种用于 A，一种用于 B，（反过来可以调用 C 的通用方法），但我认为您试图避免使用多种扩展方法？

**编辑**如果您绝对想阻止 if，您将不得不使用多种扩展方法，如 Frederik 的帖子中所示。您也可以为基类添加一个扩展，只有在编译期间类型未知时才会调用它。但这仍然需要一个 if ;)

```
public static void Foo(this A a)
{
}

public static void Foo(this B b)
{
}

public static void Foo(this C c)
{
    if(c is A)
       Foo((A)c);
    else if(c is B)
       Foo((B)c);
    else
       throw new NotSupportedException(c.GetType().FullName);
} 
```

如果在编译时类型总是已知的，您可以简单地使用 A 和 B 的 2 种扩展方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:20:59.297

你可以试试这个：

```
public static class CExtensions {
     public static void DoIt( this B foo ) {}

     public static void DoIt( this A foo ) {}
} 
```

但是，我认为这不会起作用：

```
C x = new A();
x.DoIt(); 
```

我认为它不会编译，但是，我现在无法测试它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T09:38:25.413

纯粹从可行性的角度来看，使用反射和扩展方法是可能的。它在你的应用程序的上下文中是否有意义，是你应该判断的。解决方案来了....

```
class C
{
}

class A : C
{
}

class B : C
{
}

static class Extender
{
    public static void M(this B b)
    {
        Console.WriteLine(" Extension method on B");
    }

    public static void M(this A a)
    {
        Console.WriteLine(" Extension method on A");
    }
}

static void Main(string[] args)
    {
        C c = new A();// The actual instance here will be created using some factory.
        object instance = Activator.CreateInstance(c.GetType());
        Type typeToFind = c.GetType();

        Type typeToQuery = typeof(Extender);

        var query = from method in typeToQuery.GetMethods(BindingFlags.Static
                        | BindingFlags.Public | BindingFlags.NonPublic)
                    where method.IsDefined(typeof(ExtensionAttribute), false)
                    where method.GetParameters()[0].ParameterType == typeToFind
                    select method;
      // You would be invoking the method based on its name. This is just a quick demo. 
        foreach (MethodInfo m in query)
        {
            m.Invoke(instance, new object[] { instance });
        }

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T10:00:05.463

对我来说，这感觉像是设计上的缺陷。如果您不能在不知道运行时类型的情况下覆盖和更改功能的两个子类的公共类，那么您显然对整体设计有一些问题。

那些因运行时类型而异的功能真的应该存在于这些类中吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T10:59:30.930

你可以这样做。使用您需要的不同方法创建一个类。在同一个类中定义一个带有此方法签名的委托，并保留一个字典，其中键是类型，值是委托。最后，您可以为您的类 C 创建一个扩展方法，该方法使用正在执行方法本身并执行正确方法的对象的类型来查找字典。像这样的东西：

```
public static class CExtender
{
    private static void DoItA(C anA)
    {
        MessageBox.Show("A");
    }

    private static void DoItB(C aB)
    {
        MessageBox.Show("B");
    }

    private static void DoItC(C aC)
    {
        MessageBox.Show("C");
    }

    delegate void DoItDel(C aC);

    private static Dictionary<Type, DoItDel> _doItDels;

    private static Dictionary<Type, DoItDel> DoItDels
    {
        get 
        {
            if (_doItDels == null)
            {
                _doItDels = new Dictionary<Type, DoItDel>();
                _doItDels[typeof(A)] = new DoItDel(DoItA);
                _doItDels[typeof(B)] = new DoItDel(DoItB);
            }
            return _doItDels; 
        }
    }

    // the only public part is the extension method
    public static void DoIt(this C aC)
    {
        DoItDel aDel;
        if (DoItDels.TryGetValue(aC.GetType(), out aDel))
            aDel(aC);
        else
            DoItC(aC);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-04T11:52:19.647

在这种情况下，您可以使用**装饰器模式。**

即，您可以拥有自己的 2 个新类，比如说 A1、B1 都从 C 派生。（前提是 C 不是密封类。如果是这种情况，解决方案会有点不同）。A1 和 B1 也需要相应地包装 A 和 B。您可以通过 A1 和 B1 的构造函数注入 A 和 B 的实例。

您还可以拥有一个 A1 和 B1 都实现的通用接口。接口需要有你需要 A1 和 B1 以自己的方式实现的方法。（A1 和 B1 可以根据需要将调用委托给 A 或 B）

这样，在您的客户端代码中，您可以通过接口类型引用 A1 和 B1 实例，并执行接口中定义的常见操作，而无需知道它们的实际具体实现是什么。

如果我不清楚，请告诉我您是否需要代码示例。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-13T12:30:14.587

好的，我找到了答案。动态关键字是这里的线索。我们可以写：

```
void Handle(C c)
{
   dynamic cc = c;  
   HandleSpecific(cc);   
}
void HandleSpecific(A a)
{
//Specific behavior A
}
void HandleSpecific(B b)
{
//Specific behavior B
} 
```

缺点当然是 - 由于此处引入的运行时绑定和轻微的性能影响而导致异常风险。

# visual-studio-2010 - 如何阻止 Visual Studio 2010 更新设计器文件的运行时版本注释？

> ID：11325919
> 
> 赞同：1
> 
> 时间：2012-07-04T09:08:58.240
> 
> 标签：visual-studio-2010

我刚刚加入了一个新项目，我团队成员的编译源代码在每个 *.g.cs 上都有运行时版本注释“4.0.30319.1”。我安装了最新的带有服务包的 Visual Studio 并尝试运行我们的项目，但突然我的 SVN 图标在大多数文件上变成了红色，因为 Visual Studio 2010 自动将所有 *.g.cs 上的运行时版本注释更改为“4.0.30319.269”文件，即使我没有更改这些文件。

有没有办法阻止 Visual Studio 2010 这样做？我会更改并提交所有更改的文件，但我的队友会有几个红色文件。

我知道有些人可能会建议要求所有队友安装相同的服务包和运行时，但我想知道是否可以关闭此功能。

# android - 如何在模拟器中测试 BOOT_COMPLETED 广播接收器

> ID：11325920
> 
> 赞同：47
> 
> 时间：2012-07-04T09:08:58.983
> 
> 标签：android, android-emulator, broadcastreceiver

我想`BROADCAST RECEIVER`检查`BOOT_COMPLETED`.`emulator`

有什么方法可以检查模拟器中的广播接收器吗？如何重新启动模拟器以检查该接收器？有没有直接的命令？

提前致谢。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-07-04T09:37:28.967

模拟器中没有像设备一样的电源按钮，所以

*要停止模拟器实例，只需关闭模拟器的窗口。*

并且**从 Eclipse 的 AVD 管理器开始**`Start/Restart`，您的带有 BOOT_COMPLETE 操作的 BroadcastReceiver*肯定*会被调用

 ***你也可以用另一种方式启动 AVD，从`CMD` *转到 AndroidSDK 的工具*并给出这个命令`E:\android-sdk-windows\tools>emulator -avd AVDNAMEHERE`

要从**CMD 发送广播，**您可以使用此命令。

> adb shell am 广播 -a android.intent.action.BOOT_COMPLETED -c android.intent.category.HOME -n package_name/class_name

* * *

阅读有关 Android 模拟器的更多信息：[Android 模拟器](http://developer.android.com/tools/help/emulator.html)和[使用模拟器](http://developer.android.com/tools/devices/emulator.html)

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-11-15T12:18:19.443

基本上，这是您在运行时在 Android 模拟器中模拟启动完成所必须做的：假设您是***Windows***用户。这同样适用于***Linux***

**步骤**：在您的控制台类型上

1.  亚行外壳

2.  正在广播 -a android.intent.action.BOOT_COMPLETED

就这些了。**有关详细说明，请参见下图**。

![在此处输入图像描述](../Images/547127d2f06659872402cf5edf6ab7bb.png)

**快乐编码！**

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2015-05-23T00:07:04.157

如果两次收到 BOOT_COMPLETED ，某些应用程序可能会出现异常行为，而是将广播限制为仅对您的包：

```
adb shell am broadcast -a android.intent.action.BOOT_COMPLETED -p com.example.package 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-08-25T16:38:17.970

在 Qemu 上的 Lollipop x86 模拟器上，它需要我以 root 身份运行：

`adb shell su root am broadcast -a android.intent.action.BOOT_COMPLETED`

没有root，命令失败：报警管理器不发送广播：

```
adb shell am broadcast -a android.intent.action.BOOT_COMPLETED

Broadcasting: Intent { act=android.intent.action.BOOT_COMPLETED }
java.lang.SecurityException: Permission Denial: not allowed to send broadcast android.intent.action.BOOT_COMPLETED from pid=26595, uid=2000
    at android.os.Parcel.readException(Parcel.java:1684)
    at android.os.Parcel.readException(Parcel.java:1637)
    at android.app.ActivityManagerProxy.broadcastIntent(ActivityManagerNative.java:3537)
    at com.android.commands.am.Am.sendBroadcast(Am.java:772)
    at com.android.commands.am.Am.onRun(Am.java:404)
    at com.android.internal.os.BaseCommand.run(BaseCommand.java:51)
    at com.android.commands.am.Am.main(Am.java:121)
    at com.android.internal.os.RuntimeInit.nativeFinishInit(Native Method)
    at com.android.internal.os.RuntimeInit.main(RuntimeInit.java:262) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-05-02T17:41:53.657

如果您使用风味，请注意`.`组件名称快捷方式表示法。

*例子*

```
adb shell am broadcast -a android.intent.action.BOOT_COMPLETED -n com.companyname.develop/com.companyname.notification.RescheduleLocalNotificationsAtBootReceiver 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-04T09:38:25.513

要重新启动模拟器，只需打开命令行并切换到 adb 所在的文件夹（如果不在系统路径中）并输入：

```
adb restart 
```

（然后您可以使用 Strg - C 中止命令以返回 cmd 行）***

# php - Drupal 7 在表单之间切换

> ID：11325925
> 
> 赞同：0
> 
> 时间：2012-07-04T09:09:17.280
> 
> 标签：php, forms, drupal, drupal-7

我是drupal的新手，需要创建一个我已经成功完成的登录表单。但是当我登录时，我希望表单切换到另一个表单，您可以在其中编辑您的详细信息。

我无法找出如何在表格之间切换。

```
<?php

/**
 * Implements hook_help.
 *
 * Displays help and module information.
 *
 * @param path 
 *   Which path of the site we're using to display help
 * @param arg 
 *   Array that holds the current path as returned from arg() function
 */

function login_kms_help($path, $arg) {
  switch ($path) {
    case "admin/help#login":
      return '<p>'.  t("Creates login module") .'</p>';
      break;
  }
} 

/**
 * Implements hook_block_info().
 */
function login_kms_block_info() {
   $blocks['login_kms'] = array(
    'info' => t('Login KMS'), //The name that will appear in the block list.
    'cache' => DRUPAL_CACHE_PER_ROLE, //Default
  );
  return $blocks;
}

function login_kms_block_view($delta = '') {
  $block = array();
  if($delta == 'login_kms') {
    $block['subject'] = 'Login';
    $block['content'] = drupal_render(drupal_get_form('login_kms_form_mode0'));
  } else if($delta == 'login_kms'){
    $block['subject'] = 'Edit';
    $block['content'] = drupal_render(drupal_get_form('login_kms_form_mode1'));
  }
  return $block;
}

function login_kms_form_mode0() {
  $form['username'] = array(
    '#type' => 'textfield',
    '#title' => t('Username:'),
  );
   $form['password'] = array(
    '#type' => 'password',
    '#title' => t('Password:'),
  );
  $form['Log in'] = array(
    '#type' => 'submit',
    '#value' => t('Log in'),
  );
  return $form;
}

function login_kms_form_mode1(){
  $form['username'] = array(
    '#type' => 'textfield',
    '#title' => t('mode1'),
  );
}

function login_kms_form_submit($form, &$form_state) {
    $mysql_user = $form_state['values']['username'];
    $mysql_pass = $form_state['values']['password'];
//  drupal_set_message(t($mysql_pass)); 
// some logic

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-03T06:14:56.040

第一种方法是使用 drupal_goto("my_path")。第二个也是更“正确”的方法是使用 $form_state['redirect'] 或 $form['#redirect']，就像这样；

```
function login_kms_form_submit($form, &$form_state) {
$mysql_user = $form_state['values']['username'];
$mysql_pass = $form_state['values']['password'];
//  drupal_set_message(t($mysql_pass)); 
// some logic
$form_state['redirect'] = 'user/to_the_new_form'; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:18:48.110

您可以简单地使用[drupal_goto](http://api.drupal.org/api/drupal/includes!common.inc/function/drupal_goto/7) () 将登录的用户重定向到另一个表单。

```
global $user;
if(!empty($user->uid) || $user->uid > 0)
{
    drupal_goto("my/new/page");
} 
```

希望这行得通……穆罕默德。

# c# - 使 Convert.ToDouble 与不同的 CultureInfos 一起工作

> ID：11325930
> 
> 赞同：1
> 
> 时间：2012-07-04T09:09:26.020
> 
> 标签：c#, double, cultureinfo

当您有以下情况时，使转换工作的最佳方法是什么：

```
string a = "10.0123";
string b = "10,0123"; 
```

并且文化信息是瑞典语或英语，它需要与两者一起使用。

我试过了：

```
double aSwe = Convert.ToDouble(a, CultureInfo.GetCultureInfo("sv-SE"));
double bSwe = Convert.ToDouble(b, CultureInfo.GetCultureInfo("sv-SE"));

double aInv = Convert.ToDouble(a, CultureInfo.InvariantCulture);
double bInv = Convert.ToDouble(b, CultureInfo.InvariantCulture); 
```

自从 '。' 在 Swe 和 ',' 中不是有效的分隔符，在 Eng 中无效我不知道如何使用相同的代码使其与两者一起使用。我想出的唯一解决方案是在转换之前替换逗号或点，但感觉应该有更好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T09:13:47.037

在没有任何额外上下文的情况下，您*不应该*尝试使其与两者一起使用。

这就像试图将“06/05/2010”解析为没有任何文化信息的日期：它可能意味着 5 月 6 日或 6 月 5 日。

同样，“1,234”是一个多于一千或多于一的值：您**需要**了解文化信息才能明确地解释它。

因此，与其试图解决在没有足够信息的情况下解释某些内容的问题，我建议您专注于获取所需的所有信息的问题（或将获取文本数据的方式更改为始终采用一种特定格式）。

# java - Maven 使用 Java 1.6 构建项目，即使指定了 1.5

> ID：11325935
> 
> 赞同：2
> 
> 时间：2012-07-04T09:09:46.330
> 
> 标签：java, eclipse, maven

> **可能重复：**
> [Maven 中的 Java 版本不匹配](https://stackoverflow.com/questions/11112721/java-version-mismatch-in-maven)

我有一个项目配置为使用 Java 1.5 和 maven：

```
mvn help:effective-pom

...
  <plugin>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>2.0.2</version>
    <configuration>
      <source>1.5</source>
      <target>1.5</target>
    </configuration>
... 
```

我的机器安装了 Java 1.6，Maven 正在使用它：

```
mvn -v

...
Apache Maven 2.2.1 (r801777; 2009-08-06 20:16:01+0100)
Java version: 1.6.0_21 
```

我已将项目导入 Eclipse（使用`mvn eclipse:eclipse`），并使用 Java 1.5 构建它，如 POM 中所指定。

现在，如果我用 标记接口实现方法`@Override`，这在 Java 1.5 中是不允许的，但在 Java 1.6 中是受支持的，那么 Maven 将无错误地构建项目，但 Eclipse 会将注释标记为编译时错误并拒绝构建项目。

如何让 Maven 真正使用 Java 1.5 编译项目，或者让 Eclipse 使用与 Maven 相同的设置来编译项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:36:06.503

似乎较新版本的 JDK 1.5 忽略了`@Override`它是否在接口实现方法中：[https](https://stackoverflow.com/a/2336850/256245) ://stackoverflow.com/a/2336850/256245我猜如果使用目标 1.5 编译 JDK 1.6 也会这样做。这就是 Maven 不抱怨它的原因。

要检查 Maven 是否真的编译为 Java 1.5，您应该使用[Animal Sniffer Plugin](http://mojo.codehaus.org/animal-sniffer-maven-plugin/)：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>animal-sniffer-maven-plugin</artifactId>
    <version>1.8</version>
    <executions>
        <execution>
            <id>check-java15-sun</id>
            <phase>test</phase>
            <goals>
                <goal>check</goal>
            </goals>
            <configuration>
                <signature>
                    <groupId>org.codehaus.mojo.signature</groupId>
                    <artifactId>java15-sun</artifactId>
                    <version>1.0</version>
                </signature>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

由于 Eclipse 有自己的编译器实现，我想你必须`@Override`从接口实现方法中删除注释才能让他高兴。由于 JDK 忽略了注释，因此删除不会造成任何损害。

# iphone - 我需要有关带有操作的自动警报视图的帮助

> ID：11325936
> 
> 赞同：1
> 
> 时间：2012-07-04T09:09:50.353
> 
> 标签：iphone, objective-c, ios5

好的，所以当用户第一次启动我的应用程序时，我想要一个警报视图，它会弹出 2 个选项。我在下面使用这种方法：

```
- (void) displayWelcomeScreen
{
    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
    NSString *alreadyRun = @"already-run";
    if ([prefs boolForKey:alreadyRun])
        return;
    [prefs setBool:YES forKey:alreadyRun];
    UIAlertView *alert = [[UIAlertView alloc]
        initWithTitle:@"…"
        message:@"…"
        delegate:nil cancelButtonTitle:nil otherButtonTitles:@"OK", nil];
    [alert show];
    [alert release];
} 
```

当我第一次启动应用程序时，没有弹出警报视图。难道我做错了什么？顺便说一句，我希望它仅在应用程序首次启动时显示。它不得显示任何其他时间。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:03:09.240

尝试这个：

```
(void)viewDidLoad{

NSLog(@"In viewDidLoad");
[self displayWelcomeScreen];

} 
```

在 displayWelcomeScreen 中写代码：

```
- (void) displayWelcomeScreen
{
    NSLog(@"In displayWelcomeScreen");
    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
    NSString *alreadyRun = @"already-run";
    if ([prefs boolForKey:alreadyRun])
        return;
    [prefs setBool:YES forKey:alreadyRun];
    UIAlertView *alert = [[UIAlertView alloc]
        initWithTitle:@"…"
        message:@"…"
        delegate:nil cancelButtonTitle:nil otherButtonTitles:@"OK", nil];
    [alert show];
    [alert release];
} 
```

并检查是否在控制台中显示在 displayWelcomeScreen 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:20:05.723

尝试使用这些。我刚刚对你的代码做了一些改动。

```
- (void) displayWelcomeScreen
{
    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];

    if ([prefs objectForKey:@"alreadyRun"])
    {
        return;
    }
    else
    {
        [prefs setObject:@"YES" forKey:@"alreadyRun"];
        [prefs synchronize];
        UIAlertView *alert = [[UIAlertView alloc]
        initWithTitle:@"…"
        message:@"…"
        delegate:nil cancelButtonTitle:nil otherButtonTitles:@"OK", nil];
        [alert show];
        [alert release];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T09:24:27.190

在您的 appDelegate didFinishLaunchingWithOptions 中，添加类似这样的内容

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
if (![defaults boolForKey:@"everLaunched"]) {
    [defaults setBool:YES forKey:@"everLaunched"];
    [defaults setBool:YES forKey:@"firstLaunch"];
}
else{
    [defaults setBool:NO forKey:@"firstLaunch"];
} 
```

检查是否需要显示欢迎消息：

```
 - (void) displayWelcomeScreen
 {
  if ([[NSUserDefaults standardUserDefaults] boolForKey:@"firstLaunch"]) 
         {
          NSLog(@"I should display alert view now with two selections");
          //what to you want to to here now? show alert view? with two choices?
          //you might want to remember the selected choice from user
         }
   else  {
         NSLog(@"the user already made his choice, this is not a first launch");
         //what do you want to do here now? show home screen? let the user use the app? 
         //the user has already made his choice
         }
} 
```

# io - 为什么有些程序在 stderr 而不是 stdout 上编写它们的输出？

> ID：11325940
> 
> 赞同：2
> 
> 时间：2012-07-04T09:10:05.960
> 
> 标签：io, stdout, stderr

我最近在我的 .bashrc 文件中添加了一个 ssh-add 命令。我找到

`ssh-add $HOME/.ssh/id_rsa_github > /dev/null`

每次打开 shell 时都会显示一条消息“添加了身份和其他内容”。

尽管

`ssh-add $HOME/.ssh/id_rsa_github > /dev/null 2>&1`

成功了，我的外壳现在“干净”了。

在互联网上阅读，我发现其他命令可以做到这一点，（例如`time`）。你能解释一下为什么这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:12:33.977

当您将输出从一个进程重定向到另一个进程时，例如通过管道

```
$ procA | procB | procC 
```

这*通常*使用标准输出来完成。我希望`time`和类似的命令输出到 stderr 以避免损坏此流。如果您正在使用时间，那么您就是在诊断问题，并且您不想无意中为下游流程提供额外的输入。

[本文](http://jstorimer.com/2011/12/29/the-difference-between-stdout-and-stderr.html)包括一些进一步的细节和一些关于此的历史。

# c++ - 将浮点数拆分为小数和整数部分

> ID：11325946
> 
> 赞同：2
> 
> 时间：2012-07-04T09:10:30.920
> 
> 标签：c++

我正在编写一个模板类，旨在与任何浮点类型一起使用。对于某些方法，我需要将一个数字分成整数部分和小数部分。使用原始浮点类型，我可以只转换为整数来截断小数部分，但这不适用于大数字类。理想情况下，我的班级在计算中只使用四种基本算术运算（加法、减法、乘法、除法）。

下面的方法是我想出的解决方案。它所做的只是减去 10 的幂，直到原始数字小于 1。它运行良好，但似乎是一种蛮力方法。有没有更有效的方法来做到这一点？

```
template< typename T >
class Math
{
    public:

    static T modf( T const & x, T & intpart )
    {
        T sub = 1;
        T ret = x;

        while( x >= sub )
        {
            sub *= 10;
        }

        sub /= 10;

        while( sub >= 1 )
        {
            while( ret >= sub )
            {
                ret -= sub;
            }

            sub /= 10;

        }//while [sub] > 0

        intpart = x - ret;

        return ret;
    }
} 
```

请注意，为简洁起见，我删除了标志管理代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:24:08.953

您也许可以用二进制搜索替换减法循环，尽管这不是复杂性类的改进。

您所拥有的需要的减法次数大约等于 的十进制数字的总和`x`，而二进制搜索需要多次加法和除以二的运算，大约等于数字的 3 位乘以的十进制数字`x`。

使用你正在做的事情和二分搜索，在寻找上限时没有特别的理由使用 10 的幂，你可以使用任何数字。平均而言，其他一些数字可能会更快一些，尽管它可能取决于 type `T`。

顺便说一句，我也很想在`modf`内部创建一个函数模板`Math`（或在命名空间中创建一个免费的模板函数），而不是`Math`一个类模板。这样，您可以一次针对特定类型（尤其是内置类型）专门化或重载一个函数，而无需专门化整个`Math`.

例子：

```
namespace Math
{
    template <typename T>
    T modf( T const & x, T & intpart )
    { ... }
} 
```

像这样称呼它：

```
float f = 1.5, fint;
std::cout << Math::modf(f, fint) << '\n';

double d = 2.5, dint;
std::cout << Math::modf(d, dint) << '\n';

mpf_class ff(3.5), ffint(0);  // GNU multi-precision
std::cout << Math::modf(ff, ffint) << '\n'; 
```

像这样重载它：

```
namespace Math {
    double modf(double x, double &intpart) {
        return std::modf(x, &intpart);
    }

    mpf_class modf(const mpf_class &x, mpf_class &intpart) {
        intpart = floor(x);
        return x - intpart;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:19:19.733

mb 使用 std::modf 更好吗？对于自定义类型，您可以发布 Math 类专业化。

```
#include <cmath>
#include <iostream>

template<typename T>
class Math
{
public:
    static T modf(const T& x, T& integral_part)
    {
        return std::modf(x, &integral_part);
    }
};

int main()
{
    double d_part = 0.;
    double res = Math<double>::modf(5.2123, d_part);
    std::cout << d_part << " " << res << std::endl;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T09:23:54.053

我不知道您的“理想情况下仅使用数学运算”限制有多严格，但是对于小数部分，您可以将其提取为字符串并转换回浮点数吗？

# ruby - 我可以复制网页上的文本并将其粘贴到文本文件中吗？

> ID：11325947
> 
> 赞同：1
> 
> 时间：2012-07-04T09:10:33.683
> 
> 标签：ruby, cucumber, watir, watir-webdriver

我有一个网页，它动态显示我想使用 watir-webdriver 或任何其他附加 gem 将其复制到文本文件中的文本。可能吗？？如果是，怎么做？？

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T11:27:34.377

如果您在谈论网络抓取，请尝试[Nokogiri](http://nokogiri.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T08:46:24.837

我会假设你有这样的 HMTL：

```
<div id="tehcodez">teh codez</div> 
```

这会将文本保存`teh codez`到文件`tehcodez.txt`（未测试）：

```
text = browser.div(:id => "tehcodez").text
File.open("tehcodez.txt", "w") {|file| file.write(text) } 
```

# objective-c - 如何拆分一串单词并添加到数组中 - Objective C

> ID：11325951
> 
> 赞同：2
> 
> 时间：2012-07-04T09:10:45.973
> 
> 标签：objective-c, string

假设我有这个：

`NSString *str = @"This is a sample string";`

如何以将每个单词添加到 NSMutableArray 中的方式拆分字符串？

在 VB.net 中，您可以这样做：

```
Dim str As String
    Dim strArr() As String
    Dim count As Integer
    str = "vb.net split test"
    strArr = str.Split(" ")
    For count = 0 To strArr.Length - 1
        MsgBox(strArr(count))
    Next 
```

那么如何在 Objective-C 中做到这一点呢？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T09:12:21.277

```
NSArray *words = [str componentsSeparatedByString: @" "]; 
```

请注意，`words`它作为自动释放的对象返回，因此您可能需要`retain`它，除非您使用的是 ARC。

此外，返回的数组是不可变的，因此您需要自己创建一个并使用返回的数组对其进行初始化：

```
NSArray *words = [str componentsSeparatedByString: @" "];
NSMutableArray *mutableWords = [NSMutableArray arrayWithCapacity:[words count]];
[mutableWords addObjectsFromArray:words]; 
```

或者：

```
NSMutableArray *mutableWords = [[str componentsSeparatedByString: @" "] mutableCopy]; 
```

最后一条语句返回一个**必须**释放的对象，因为`copy`它为您提供了该对象的所有权。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T09:16:49.200

NSString 上有一个内置方法，它根据您传入的一组字符拆分字符串并返回一个 NSArray

```
- (NSArray *)componentsSeparatedByCharactersInSet:(NSCharacterSet *)separator 
```

有关更多信息，请参阅[NSString 类参考](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-24T05:51:19.957

工作解决方案。试试看！

```
NSString *string = @"This is words";
NSArray *wordsArray  = [string componentsSeparatedByString:@" "]; 
```

让我们打印 wordsArray 的值。

```
NSlog(@"wordsArray value is : %@", wordsArray); 
```

这是输出：

```
wordsArray value is : (
    This,
    is,
    words
) 
```

# mysql - 在移动应用程序中缓存数据库中的数据，使用教义2

> ID：11325956
> 
> 赞同：0
> 
> 时间：2012-07-04T09:11:02.900
> 
> 标签：mysql, database, caching, doctrine-orm, memcached

当用户在应用程序中购买一些汽车手册时，他可以在没有网络的情况下使用它们

所以我想缓存他购买的手册，我想要一步一步的方法来缓存数据库

```
 $memcache = new Memcache();
    $memcache->connect('localhost', 11211);
    $servers = array(
            'host'       => 'memcache_host',
            'port'       => 11211,
            'persistent' => true
    );

    $cacheDriver = new \Doctrine\Common\Cache\MemcacheCache(
                array(
                        'servers' => $servers,
                        'compression' => false
        )
    );
    $cacheDriver->setMemcache($memcache);
    $cacheDriver->save('cache_id', 'my_data'); 
```

我只想知道 my_data 和 id 是如何工作的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:04:57.900

Memcached 和 Doctrine 2 中包含的所有其他缓存提供程序都是服务器端缓存机制。这意味着无论用户的上下文如何，都需要连接。

如果您想允许您的用户在离线时访问您的应用程序中的数据，您将需要使用 HTML5 本地存储之类的东西，您可以查看[nettuts](http://net.tutsplus.com/tutorials/html-css-techniques/quick-tip-learning-about-html5-local-storage/)以获取使用它的快速视频介绍。

# c# - 从 access 数据库中搜索后，如何在 button_click 上填充 gridview？

> ID：11325958
> 
> 赞同：0
> 
> 时间：2012-07-04T09:11:04.600
> 
> 标签：c#, sql

我正在 c#.net 创建一个表单。我想`gridview`用符合搜索条件的条目填充唯一的按钮单击。

我已经尝试过，但是在搜索 ID 时它可以工作，但是在搜索 FirstName 时它也会给出错误，请检查 SQL。

后面的代码：

```
private void button1_Click(object sender, EventArgs e)
 {
            try
            {
                string strConn = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=L:/New project/Project/Project/Data.accdb";

                string sql = "SELECT * FROM AddressBook WHERE FirstName='" + textBox1.Text.ToString();
                OleDbConnection connection = new OleDbConnection(strConn);
                OleDbDataAdapter dataadapter = new OleDbDataAdapter(sql, connection);
                DataSet ds = new DataSet();
                connection.Open();
                dataadapter.Fill(ds, "AddressBook");
                connection.Close();
                dataGridView1.DataSource = ds;

                dataGridView1.DataMember = "AddressBook";
            }
            catch (System.Exception err)
            {
                this.label27.Visible = true;
                this.label27.Text = err.Message.ToString();
            }
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:13:06.393

你忘记了 databind();

```
dataGridView1.DataSource = ds;
dataGridView1.DataBind();

"SELECT * FROM AddressBook WHERE FirstName Like '%" + textBox1.Text + "%'"; 
```

但请记住，此 sql 查询易受 SQL 注入攻击，因此请确保在所有工作后过滤掉坏字符

您的错误是因为您没有关闭您的查询而产生的， 但是您`FirstName='" + textBox1.Text.ToString();`必须`FirstName='" + textBox1.Text.ToString() + "'";`输入正确的名称

使用“like”可以获得更多结果

```
FirstName Like '%" + textBox1.Text.ToString() + "%'"; 
```

并且`ToString()`不需要，因为 Text 属性已经是一个字符串

# testing - Jmeter 中的响应代码 4**

> ID：11325959
> 
> 赞同：2
> 
> 时间：2012-07-04T09:11:14.157
> 
> 标签：testing, web-applications, jmeter, fiddler, load-testing

我正在尝试使用 JMeter 对 Web 应用程序进行负载测试。我使用代理，然后运行测试。我能够登录到应用程序，但是对于某些页面，它在 JMeter 中给出了响应代码 4**。

经过一些作业后，我发现我通过浏览器和 Jmeter 发送的请求可能不同，所以要检查相同的内容，我正在使用 fiddler。这是找到问题根本原因的正确方法吗？对于此类请求，我应该在提琴手和 Jmeter 中比较哪些所有东西/属性？

任何帮助表示赞赏。如果你愿意，我可以提供更多信息。

非常感谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T00:53:16.640

Abhijeet, Edit the jmeter.properties file which is located in the bin directory. Un-comment the proxy.content_type_include=text/html|text/plain|text/xml Save the file and restart Jmeter. Try recording and see if this makes a difference.

# javascript - RegExp 验证第一个 http

> ID：11325961
> 
> 赞同：-4
> 
> 时间：2012-07-04T09:11:25.957
> 
> 标签：javascript, jquery, validation

我需要一个正则表达式来从我的输入框中删除第一个 http。我怎样才能做到这一点 ？

例如，如果我的输入框的值为[http://welcome.com](http://welcome.com) 它会删除 http:// 并将其转换为 welcome.com

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:28:53.197

你真的需要正则表达式吗？indexOf() 可以完成这项工作：

```
function CheckLink()
{
    var token = "http://";
    var link = "www.example.com";

    if(link.indexOf(token)!=0)
        link = token + link;

    return link;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T09:22:54.523

您不需要知道如何执行此操作，因为您应该避免在链接中添加`http`或。`https`

改为使用`<a href="//www.example.com">click me</a>`。

请参阅：http: [//google-styleguide.googlecode.com/svn/trunk/htmlcssguide.xml](http://google-styleguide.googlecode.com/svn/trunk/htmlcssguide.xml)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T09:32:37.070

我想你想要这样的东西：

```
onkeyup="if(!this.value.match(/^http/) )this.value='http://'+this.value" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T09:32:51.287

**HTML**

```
<input type="text" value="www.example.com" id="txt_url" />​ 
```

**JS**

```
var el=document.getElementById('txt_url');
el.onblur=function()
{
    var str=el.value;
    if(str=='') return;    
    if(str.indexOf('http://')==-1) 
    el.value='http://'+str;    
} 
```

[**演示。**](http://jsfiddle.net/krKmU/3/)

# internet-explorer-8 - IE8 网站图标问题

> ID：11325964
> 
> 赞同：2
> 
> 时间：2012-07-04T09:11:35.977
> 
> 标签：internet-explorer-8, favicon

所以，我被要求解决一个问题，即在工作时 IE8 中没有出现 favicon，但似乎无法弄清楚它为什么不工作。我什至已经阅读了有关该主题的官方 Microsoft 文档，但还没有成功。

我在站点模板的头部包含以下内容，其中 $sitebase在配置文件中设置为[http://www.slinkynote.com/ 。](http://www.slinkynote.com/)网站图标图像是一个 32 像素 x 32 像素的 .ico 文件。

```
<link href="<?php echo $site_base;?>favicon.ico" rel="shortcut icon" type="image/x-icon"/>
<link href="<?php echo $site_base;?>favicon.ico" rel="icon" type="image/vnd.microsoft.icon" /> 
```

有没有人有这个问题的经验？它在 FF 和 Chrome 中看起来很好。

谢谢，

担。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T09:40:46.237

问题似乎是IE8在浏览历史记录中缓存了图标（而不是它的临时Internet文件）......如果它在IE中失败一次，它不会再试一次（我不知道多久，但是长到很烦人）......无论如何，以下简单的标题链接可以正常工作：

```
<link rel="shortcut icon" type="image/icon" href="/favicon.ico">

<link rel="icon" type="image/icon" href="/favicon.ico"> 
```

我不确定你为什么需要它们，可能是跨浏览器兼容性。但是 href 不需要其中包含主机名`www`，或者根本不需要任何主机名。它甚至可以在本地机器上工作

但是，如果 IE8 搞砸了它的缓存，那么这会让你发疯。幸运的是，解决方案很简单：将链接更改为以下内容（只需添加 x）并确保图标将第一次加载（否则您将再次弄乱缓存）...

```
<link rel="shortcut icon" type="image/icon" href="/xfavicon.ico">

<link rel="icon" type="image/icon" href="/xfavicon.ico"> 
```

之后把链接改回原来的样子，下次图标会重新加载，然后缓存成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T05:34:36.263

您在 ICO 文件中使用 PNG 图像，并且设置了错误的 mime 类型。制作另一个图标，但**ACTUAL**图标文件并将其放在当前的位置。

# datetime - SQL Server 2008 R2 正在寻找一种获取员工夜间工作时间的方法

> ID：11325971
> 
> 赞同：1
> 
> 时间：2012-07-04T09:11:50.153
> 
> 标签：datetime, time, sql-server-2008-r2

使用 SQL Server 2008 R2，我们正在寻找一种方法来选择员工在夜间的轮班时间，在本例中为 22.00 和 6.00 +1。

我们的问题变成了如何获得班次跨越午夜的时间，或者我们如何获得班次从 05.30 到 22.30 开始并且在班次开始和结束时都有重叠时的重叠。

这是一个示例，这些是数据库中可用的数据以及我们正在寻找的结果：

```
 startDateTime     |       endDateTime         |   nightHours
--------------------------+---------------------------+----------------
 2012-07-04 05:00:00.000    2012-07-04 23:00:00.000          2 
 2012-07-04 18:00:00.000    2012-07-05 05:00:00.000          7 
```

有没有人有一个例子或一些我们可以使用的好指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:29:54.593

这可能过于复杂，但它确实有效。我们使用许多 CTE 来构建有用的中间表示：

```
declare @Times table (
    ID int not null,
    StartTime datetime not null,
    EndTime datetime not null
)
insert into @Times (ID,StartTime,EndTime)
select 1,'2012-07-04T05:00:00.000','2012-07-04T23:00:00.000' union all
select 2,'2012-07-04T18:00:00.000','2012-07-05T05:00:00.000'

;With Start as (
    select MIN(DATEADD(day,DATEDIFF(day,0,StartTime),0)) as StartDay from @Times
), Ends as (
    select MAX(EndTime) EndTime from @Times
), Nights as (
    select DATEADD(hour,-2,StartDay) as NightStart,DATEADD(hour,6,StartDay) as NightEnd from Start
    union all
    select DATEADD(DAY,1,NightStart),DATEADD(DAY,1,NightEnd) from Nights n
    inner join Ends e on n.NightStart < e.EndTime
), Overlaps as (
    select
        t.ID,
        CASE WHEN n.NightStart > t.StartTime THEN n.NightStart ELSE t.StartTime END as StartPeriod,
        CASE WHEN n.NightEnd < t.EndTime THEN n.NightEnd ELSE t.EndTime END as EndPeriod
    from
        @Times t
            inner join
        Nights n
            on
                t.EndTime > n.NightStart and
                t.StartTime < n.NightEnd
), Totals as (
    select ID,SUM(DATEDIFF(hour,StartPeriod,EndPeriod)) as TotalHours
    from Overlaps
    group by ID
)
select
    *
from
    @Times t
        inner join
    Totals tot
        on
            t.ID = tot.ID 
```

结果：

```
ID          StartTime               EndTime                 ID          TotalHours
----------- ----------------------- ----------------------- ----------- -----------
1           2012-07-04 05:00:00.000 2012-07-04 23:00:00.000 1           2
2           2012-07-04 18:00:00.000 2012-07-05 05:00:00.000 2           7 
```

您会注意到我必须添加一`ID`列才能使我的相关性起作用。

`Start`CTE 找到最早的适用午夜。`End`CTE 找到我们需要找到重叠夜晚的最后时间。然后，递归`Nights`CTE 计算这两个时间点之间的每晚。然后我们将其加入到原始表（in `Overlaps`）中，以找到每晚适用的那些时段。最后，在 中`Totals`，我们计算每个重叠时段贡献了多少小时。

这应该适用于多日活动。`Totals`如果您需要计算部分小时数，您可能希望将 CTE 更改为使用分钟，或应用一些其他舍入函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:39:08.407

我认为，最好的方法是使用轮班开始时间和结束时间的函数。然后在函数内部有两种情况：第一种情况是在同一天开始和结束，另一种情况是在一天开始并在下一天结束。

对于在同一天开始和结束的情况

```
@TotalOvernightHours=0 

@AMDifference = Datediff(hh, @shiftStart, @6amOnThatDay);
if @AMDIfference > 0 than @TotalOvernightHours = @TotalOvernightHours + @AMDifference

@PMDifference Datediff(hh, @10pmOnThatDay, @ShiftEnd)
if @PMDifference > 0 than @TotalOvernightHours = @TotalOvernightHours + @PMDifference 
```

对于开始和结束在不同日期的情况，假设它是 2 个班次：首先从 @ShiftStart 开始，但在午夜结束。第二个从午夜开始，在@ShiftEnd 结束。并且对于每个班次都应用上面的逻辑。

如果您的轮班时间超过 24 小时，请将它们分成更小的子班次，其中午夜是一个分隔符。因此，如果您有班次开始`1 Jun 19:00`和结束， `3 Jun 5:00`那么您最终会得到三个子班次：

*   6月1日 19:00 - 6月1日 24:00
*   6月2日 00:00 - 6月2日 24:00
*   6 月 3 日 00:00 - 6 月 3 日 5:00

对于每个子班次，您都会计算通宵时间。

我可能会编写一个函数来计算一个 24 小时期间的通宵时间，另一个函数将整个班次分成 24 小时块，然后将其输入第一个函数。

ps 这不是sql，只是伪代码。pps 这只有在你有能力创建函数时才有效。它会给你一个干净、易于准备的代码。

# mysql - 用 mysql 排名：更新 vs 选择

> ID：11325974
> 
> 赞同：1
> 
> 时间：2012-07-04T09:11:51.870
> 
> 标签：mysql, sql-update, ranking, sql

我正在开发一个有很多用户的网页游戏。在主屏幕上会有一张带有许多标记的地图。每个标记都链接到一个用户，每个用户在我想要显示的排名（用他们的分数计算）中都有一个位置。

要动态计算排名的位置，请从[这里](http://thinkdiff.net/mysql/how-to-get-rank-using-mysql-query/)找到以下内容：

```
SET @rownum := 0;
SELECT rank, points FROM (
                    SELECT @rownum := @rownum + 1 AS rank, points, uid
                    FROM landings ORDER BY points DESC
                    ) as result WHERE uid=xxxxxxxx 
```

但是每次玩家将地图移动到未探索区域时，都会为加载到地图的每个新标记触发此查询。

另一方面，如果每次玩家完成游戏时，我都会为数据库中的每个用户更新一个排名字段怎么办？当然，这听起来很大，但这种情况比其他情况少。你怎么看？更新比选择效率低得多？多少？

感谢您的帮助！

编辑以获取更多说明：此图显示了屏幕。有一张带有很多标记的地图，对于屏幕中的每个标记，都会触发我之前解释的查询（当我通过 AJAX 加载标记时）。另一种选择是，每次用户玩游戏时，当然，修改他的总点数，数据库中假定的“排名”字段将为数据库中的每个用户更新。 ![在此处输入图像描述](../Images/5bf52f16d783d6ffba2da6ea7cac0ade.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:55:34.537

不可能说哪一个会更有效率。这完全取决于对点列的更新次数、表中的记录总数以及排名请求的数量。如果您知道这些数字，或者您可以做出很好的猜测，请使用随机测试数据对其进行基准测试。如果不能，请使用最容易实施的解决方案，并在它成为问题时对其进行改进。

# asp.net - 在 ASP.NET 2.0 项目中使用 .NET 3.5 程序集

> ID：11325975
> 
> 赞同：0
> 
> 时间：2012-07-04T09:11:53.740
> 
> 标签：asp.net, .net, .net-3.5, .net-2.0

我从一位不久前离开我们公司的同事那里继承了一些 .NET 项目。其中一个是 ASP.NET 上的 Web 门户（带有 2.0 框架），另一个是定义我们正在使用的控件的帮助程序库（派生自 System.Web.UI.User）和其他一些帮助程序。该库使用一些仅适用于 .NET 3.5 的类。

我的前任不知何故设法在 2.0 web 项目中使用了这个 3.5 程序集，但现在我不得不向它添加一些功能，并且无法再次这样做。

（注意：将 web 项目升级到 3.5 框架的替代方法导致了一些我现在无法解决的其他问题）

# javafx - Javafx如何在webview中显示自定义字体？

> ID：11325979
> 
> 赞同：2
> 
> 时间：2012-07-04T09:12:12.963
> 
> 标签：javafx, javafx-2

该网页使用了我的 PC 上未安装的自定义字体。在这种情况下，WebView 似乎使用操作系统的默认字体。

但我有字体文件“xx.ttf”。如何将字体嵌入到我的应用程序中并告诉 WebView 使用它来识别页面上的字体？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T00:00:26.237

加载字体：

```
Font.loadFont(
  CustomFontWebView.class.getResource("TRON.TTF").toExternalForm(), 
  10
); 
```

在 WebView 中使用它之前：

```
style='font-family:"TRON"'; 
```

这是一个完整的例子。该示例依赖于您可以从 dafont 下载的 TRON.TTF[字体](http://www.dafont.com/tron.font)。下载 TRON.TTF 字体后，将其放在与 CustomFontWebView.java 相同的目录中，并确保您的构建系统将 TRON.TTF 文件复制到类输出目录。

```
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.text.Font;
import javafx.scene.web.WebView;
import javafx.stage.Stage;

// demonstrates the use of a custom font in a WebView.
public class CustomFontWebView extends Application {
  public static void main(String[] args) { launch(args); }
  @Override public void start(Stage stage) {
    stage.setTitle("TRON Synopsis");

    // load the tron font.
    Font.loadFont(
      CustomFontWebView.class.getResource("TRON.TTF").toExternalForm(), 
      10
    );

    // use the tron font in a WebView.
    WebView webView = new WebView();
    webView.getEngine().loadContent(
      "<body bgcolor='silver'>" +   
        "<div align='center'>" +   
          "<p style='font-family:'TRON'; font-size:20;'>" +                 "TRON" + 
          "</p>" +
          "<img src='http://ia.media-imdb.com/images/M/MV5BMTY5NjM2MjAwOV5BMl5BanBnXkFtZTYwMTgyMzA5.V1.SY317.jpg' width='259' height='457'/>" + 
          "<p style='font-family:'TRON'; font-size:10;'>" + 
            "A sci-fi flick set in an alternate reality." + 
          "</p>" +
        "</div>" +   
      "</body>"
    );

    // layout the scene.
    final Scene scene = new Scene(webView, 400, 575);
    stage.setScene(scene);
    stage.show();
  }
} 
```

![创](../Images/4a13ef8e724f51e12590404f8242b5e9.png)

*关于微软雅黑字体的具体使用*

Microsoft YaHei 适合我（Windows 7）。我的 Win7 安装附带字体（并且无法删除），因此不需要显式加载 - 只需从您的 html 中引用正确的字体系列，它就适用于这样的 Win7 安装。我有一个标准的美版Win7 Pro，不是中文版。我确实将 msyh.ttf 文件从我的 windows/fonts 目录复制到我的项目中并通过 JavaFX 加载它只是为了确保通过 JavaFX 加载工作并且也工作正常。我用来设置 html 样式 css 字体系列说明符的字体系列是“Microsoft YaHei”（而不是上面答案示例中使用的 TRON）。我为了测试它而显示的文本是微软雅黑，我将 JavaFX 应用程序呈现的文本与选择 Microsoft YaHei 的写字板中呈现的相同文本进行了比较，字形相同。

* * *

请注意，使用 JavaFX 3.0，您似乎可以使用[css @font-face](http://www.css3.info/preview/web-fonts-with-font-face/)机制，这意味着您可以在网页的 css 中声明字体引用，而不是像我在上面的示例中那样在 Java 代码中声明。这是[相关 jira 问题](http://javafx-jira.kenai.com/browse/RT-17428)的链接，用于跟踪此功能的实施进度。

# c# - 单击时禁用按钮并启用其他按钮

> ID：11325981
> 
> 赞同：0
> 
> 时间：2012-07-04T09:12:17.623
> 
> 标签：c#, wpf, xaml

我的 wpf 窗口中有三个按钮单击时禁用按钮并启用其他两个按钮的最佳方法是什么

```
<Button Name="initialzeButton"
                    Width="50"
                    Height="25"
                    Margin="460,0,0,0"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Center"
                    Click="initialzeButton_Click"
                    Content="Start"
                    Cursor="Hand" />
            <Button Name="uninitialzeButton"
                    Width="50"
                    Height="25"
                    Margin="0,0,64,0"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Center"
                    Click="uninitialzeButton_Click"
                    Content="Stop"
                    Cursor="Hand" />
            <Button Name="loadButton"
                    Width="50"
                    Height="25"
                    Margin="0,0,9,0"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Center"
                    Click="loadButton_Click"
                    Content="Load"
                    Cursor="Hand" /> 
```

现在我在每个按钮中使用这种方式:(

```
 private void uninitialzeButton_Click(object sender, RoutedEventArgs e)
      {

            this.uninitialzeButton.IsEnabled = false;
            if (!this.initialzeButton.IsEnabled)
            {
                 this.initialzeButton.IsEnabled = true;
            }
            if (!this.loadButton.IsEnabled)
            {
                 this.loadButton.IsEnabled = true;
            }

      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:44:19.707

您对“最佳方式”的定义是什么？它是快速和几行代码还是优雅或..

我想到了几种方法：
- 使用 MVVM Light：三个按钮的 1 个中继命令，isEnabled 的 3 个依赖对象（视图模型中的属性）都将设置为 false，只有单击按钮将 isEnabled 设置为 true（这可以作为中继命令中的参数发送）。
- 在 isEnabled 属性上使用 booleanconverters/booleaninverterconverters。
- 重新设置单选按钮的样式，使其看起来像一个按钮，将三个按钮替换为单选按钮组。当一个单选按钮被选中时，其他单选按钮将被取消选择，将它们设置为禁用。防止单击取消选择的项目。

问候，

米歇尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:20:39.390

你可以在页面加载时做这样的事情 -

```
PostBackOptions postBackOptions = new PostBackOptions(Button1);
            Button1.OnClientClick = "this.disabled=true;";
            Button1.OnClientClick += ClientScript.GetPostBackEventReference(postBackOptions); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T09:44:25.103

对于纯 XAML 解决方案，将它们包装在样式剥离的 ListBox 中，并将单击与选择联系起来，将选择与禁用状态联系起来。

# c# - 在 C# 中将大型 XML 文件切割成更小的部分

> ID：11325985
> 
> 赞同：2
> 
> 时间：2012-07-04T09:12:24.503
> 
> 标签：c#, xml

我有一个问题，我正在处理相当长的一段时间。我有一个包含超过 50000 条记录的 XML 文件（一条记录有 3 个级别）。我的一个应用程序使用此文件来控制文档发送（该记录包含必须发送给某个人的文档类型等信息）。因此，在我的应用程序中，我将 XML 文件加载到 XmlDocument 中，然后使用 SelectNodes 方法创建一个 XmlNodeList，从中读取我想要的数据。过程是这样的——我们的工人拿人的身份证（简单的条形码）并用条形码阅读器读取它。读取条形码值后，我的应用程序会在 XML 文件中找到具有该 ID 的人员，并将文档的类型存储到字符串变量中。然后工人拿起文件并读取其条形码，如果文档条形码的值与字符串变量中的值匹配，则应用程序记录类型为xxxxxxxx的文档将被发送给ID为yyyyyyyyy的人。这是非常简单的代码，它现在可以完美运行，它的外观是这样的： 在 textBox1_TextChanged 事件上（工作人员读取人员 ID）：

```
foreach(XmlNode node in NodeList){
if(String.Compare(node.Attributes.GetNamedItem("ID").Value.ToString(),textBox1.Text)==0)
{
 ControlString = node.ChildNode[3].FirstChild.Attributes.GetNamedItem("doctype").Value.ToString();
 break;
}
}
textBox2.Focus(); 
```

在 textBox2_TextChanged 事件上（工作人员读取文档条码）：

```
if(String.Compare(textBox2.Text,ControlString)==0)
{
//Create a record and insert it into a SQL database
} 
```

我的问题是 - 我的应用程序将如何处理更大的 XML 文件（我被告知 XML 文件可能多达 500,000 条记录），这种方法是否有效，或者我需要将文件切割成更小的文件。如果我必须削减它，请给我一些代码示例的想法，我尝试这样做：读取整个记录并将其存储到字符串中：

```
private void WriteXml(XmlNode record)
        {
            tempXML = record.InnerXml;
            temp = "<" + record.Name + " code=\"" + record.Attributes.GetNamedItem("code").Value + "\">" + Environment.NewLine;
            temp += tempXML + Environment.NewLine;
            temp += "</" + record.Name + ">";
            SmallerXMLDocument += temp + Environment.NewLine;
            temp = "";
            i++;
        } 
```

tempXML、temp 和 SmallerXMLDocument 都是字符串变量。

然后在 button_Click 方法中，我将 XML 文件加载到 XmlNodeList 中（再次使用 XmlDocument.SelectNodes 方法），并尝试创建一个大字符串值来保存所有记录，如下所示：

```
foreach(XmlNode node in nodes)
{
 if(String.Compare(node.ChildNode[3].FirstChild.Attributes.GetNamedItem("doctype").Value.ToString(),doctype1)==0)
{
  WriteXML(node);
}
} 
```

我的想法是创建一个字符串值（在本例中称为 SmallerXmlDocument），当我通过整个 XML 文件时，只需将该字符串的值复制到一个新文件中。这有效，但仅适用于最多包含 2000 条记录的文件（我的记录不止这些）。那么，如果我需要将文件切割成更小的部分，最好的方法是什么（请记住，XML 文件中可能有多达 50 万条记录）？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:26:48.533

首先，我怀疑您在滥用 XML API。[您可以使用XPath](http://msdn.microsoft.com/en-us/library/ms256086.aspx)直接查询[XmlDocument](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)以立即获得结果，而无需先选择记录列表并对其进行迭代。在任何时候都不需要将部分 XML 树转换为字符串。

只要您不介意在应用程序上花费 50 到 500 兆字节的 RAM，将整个 XML 文档加载到内存中的方法就可以正常工作。

如果您想节省 RAM，您应该使用[XmlReader](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.aspx)从磁盘流式传输 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:59:12.930

What it comes down to is you need to access the data, so whether it's 50,000 rows in 1 file, or 1000 rows in 50 files, you've got the same amount of data.

There's nothing stopping you using something SQL-Lite or SQL Server Compact in your client. There are many benefits to this. You could use XMLReader to parse the data into tables in your DB. Having done that, you can now use the SQL Engine to find the rows you need, using joins to find the related rows much easier. You're also not storing vast amounts of data in memory. If the XML might change, then watch the file for changes & refresh the DB when it does.

# apache-flex - TileGroup 没有填满容器

> ID：11325986
> 
> 赞同：0
> 
> 时间：2012-07-04T09:12:24.837
> 
> 标签：apache-flex, mobile

我在 BorderContainer 中放了一个 TileGroup 并将宽度设置为 100%，但是 TileGroup 中的内容没有填满父容器，它在右侧留下了一大块空白。

代码是：

```
 <s:BorderContainer width="100%" height="100%">
    <s:TileGroup width="100%" requestedColumnCount="2">
        <s:Button>
            button1
        </s:Button>
        <s:Button>
            button2
        </s:Button>
        <s:Button>
            button3
        </s:Button>
    </s:TileGroup>
</s:BorderContainer> 
```

结果是这样的：

[http://i.minus.com/iN39P7Us4cBm1.png](http://i.minus.com/iN39P7Us4cBm1.png)

宽度已设置为 100%，但它不起作用。

有没有办法让 TileGroup 像 Java swing 中的 GridLayout 一样填充容器？

[http://www.java2s.com/Code/JavaImages/GridLayoutPane.PNG](http://www.java2s.com/Code/JavaImages/GridLayoutPane.PNG)

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:42:10.093

```
columnAlign="justifyUsingWidth"
rowAlign="justifyUsingHeight" 
```

columnAlign 效果很好，但是 rowAlign 不起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:36:56.303

默认情况下，项目向左对齐，并且只占用它们需要的空间。要使项目填满所有可用空间，请使用[columnAlign](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/TileGroup.html#columnAlign)属性并将其设置为[ColumnAlign.JUSTIFY_USING_WIDTH](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/layouts/ColumnAlign.html#JUSTIFY_USING_WIDTH)：

```
<s:TileGroup columnAlign="justifyUsingWidth" width="100%"
             requestedColumnCount="2" /> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-28T15:23:16.020

如果你想让你的 TileGroup 有背景颜色，你应该把它放在一个 BorderContainer 中，像这样：

```
<s:TileGroup width="100%" requestedColumnCount="2">
 <s:BorderContainer backgroundColor="0x373737">
  <s:layout>
    <s:TileLayout horizontalGap="2" verticalGap="2"/>
  </s:layout>
  <s:Button> button1 </s:Button>
  <s:Button> button2 </s:Button>
  <s:Button> button3 </s:Button>
 </s:BorderContainer>
</s:TileGroup> 
```

我希望你服务，来自哥伦比亚的问候；）

# ruby-on-rails - client_side_validations gem anche 条件验证

> ID：11325993
> 
> 赞同：1
> 
> 时间：2012-07-04T09:12:55.057
> 
> 标签：ruby-on-rails, ruby, client-side-validation

首先，我正在开发一个 rails 3.2 应用程序，并且正在使用 client_side_validation gem。js有没有办法启用/禁用某些字段的验证？我需要根据选择输入进行条件验证。我需要回退到服务器端验证吗？