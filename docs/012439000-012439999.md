# StackOverflow 问答 12439000-12439999

# java - 如何在 SwingWorker 中构造 publish() 和 process() 以更新 EDT 上的多个 Swing 组件？

> ID：12439005
> 
> 赞同：0
> 
> 时间：2012-09-15T16:14:02.763
> 
> 标签：java, multithreading, swingworker

我在 SwingWorker 中有一个 ServerSocketChannel 连接进程。在 Swing 应用程序本身中，两个 JLabel 应该更新为 (1) 字符串（连接状态）和 (2) 整数（连接的客户端数）。下面是“检测客户端”JButton 运行连接过程之前应用程序的屏幕截图。但是，我不确定如何发布（）和处理（），以便在 EDT 上更新多个 Swing 组件。有人对如何实现这一目标有指导吗？

![截屏](../Images/6f789556374f652086102632f0a09a4a.png)

因为`List<V>`是 process() 的参数，所以我试`<Object>`了 as `<V>`。但是，这似乎遇到了从字符串/整数到对象的转换问题，反之亦然。

下面的演示代码说明了应该发布更新的几点：

```
protected Void doInBackground() {
    try {
       // Omitted: obtain selector
       ServerSocketChannel ssc = ServerSocketChannel.open() // could fail, may need
       // to publish status
       ssc.socket().bind(serverAddress); // could fail, may need to publish status
       ssc.configureBlocking(false); // could fail, may need to publish status
       // Omitted: register ssc
       while (true) {
           int count = sel.select(1000); // may need to publish for # of clients
           // Omitted: rest of processing     
       }
    } catch (IOException e) {
        //handle error
    } 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T17:25:23.933

啊，现在我明白你的问题了。您正在尝试发布 2 条不同的信息。请注意，传递给`process()`方法的 List 可能包含*多次* `publish()`调用的结果，因此传递不同类型的值会在您的`process()`方法中混淆。相反，您应该创建一个简单的对象来封装您希望传递的*所有状态，并始终发布该类的实例（这也将解决您的所有转换问题）。*例如：

```
public class ChannelStatus {
  public final boolean active;
  public final int numClients;
} 
```

然后，您将始终发布具有当前客户端数量和“活动”状态的 ChannelStatus 实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T16:45:15.697

您可以使用 String 作为结果类型。说，对于一个整数（客户数量）做`publish(String.valueOf(integer))`，然后在你的`process()`方法中尝试类似

```
try {
 int numClients = Integer.parseInt(passedString);
 //all well, it's the client number
} catch(NumberFormatException ex) {
 //not a number, must be a connection status
} 
```

或者简单地将这两个信息用适当的 getter 包装在一个单独的类中`setNumClients, setConnStatus`，随着您的进展填充它，然后发布该类的对象。

如果我没有正确理解您，请告诉我，因为我有一种预感，您可能希望`PropertyChangeListeners`参与其中。

# javascript - Python, Flask - 如何使用 DHTML 上传器加载文件

> ID：12439007
> 
> 赞同：0
> 
> 时间：2012-09-15T16:14:04.670
> 
> 标签：javascript, python, flask, dhtmlx

我正在使用 dhtmlx 上传器上传文件。

这是我的 JS 代码

```
{type: "label",label: ""},
{type: "upload",name: "creatives",inputWidth: 330,
 url: "/upload_creative",
_swfLogs: "enabled",
 swfPath: "static/js/dhtmlxForm/codebase/ext/uploader.swf",
 swfUrl: "/upload_creative"
}, 
```

这是我将接收文件的python代码。

```
@app.route('/upload_creative', methods=["GET", "POST"])
@login_required
def upload_creative():
    if request.method == "POST":
        print 'request.form', request.form 
```

所以......从python......我如何获取文件的名称以便我可以保存到磁盘？我期待图像文件。

当我上传时，我在日志中看到了这一点。

```
request.form ImmutableMultiDict([])
127.0.0.1 - - [15/Sep/2012 23:59:56] "POST /upload_creative?mode=html5&1347724796791 HTTP/1.1" 200 - 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T17:22:18.223

```
from flask import request
...

imgfile = request.files['file-id']
imgname = imgfile.filename 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T17:26:49.727

您需要使用`request.files`而不是`request.form`.

`request.files`是一个类似 dict 的对象（`ImmutableMultiDict`确切地说，就像`request.form`）包含所有上传的文件。

每个文件都包含在[werkzeug FileStorage](http://werkzeug.pocoo.org/docs/datastructures/#werkzeug.datastructures.FileStorage)中；你可以`.save()`把它变成一个真实的文件（在你这样做之前它可能只是在内存中）。

有关更多信息，请参阅[烧瓶文档](http://flask.pocoo.org/docs/patterns/fileuploads/)和[Flask-Uploads](http://packages.python.org/Flask-Uploads/)扩展。

# vb.net - Windows.System.Launcher.LaunchUriAsync 需要几秒钟

> ID：12439009
> 
> 赞同：2
> 
> 时间：2012-09-15T16:14:11.613
> 
> 标签：vb.net, windows-8, microsoft-metro

在我的 Windows 8 ~~Metro~~新 UI 应用程序中，调用`LaunchUriAsync`需要几秒钟才能执行。它只是打开带有给定 URL 的默认浏览器，但这不应该花那么长时间。怎么了？

违规代码：

```
Await Windows.System.Launcher.LaunchUriAsync(New System.Uri("http://some.url.com/my-page")) 
```

只有当我在线时才会出现延迟。当我离线时，Internet Explorer 会立即打开（并在那里失败）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T16:16:39.360

如果您将 Metro Web 浏览器设置为默认值，则可能是这样。如果我有桌面浏览器，它可以完美运行。

此外，您是否确保您没有在另一个线程上执行其他操作或阻塞 CPU 使用率的操作？

# php - 在 php 的公共函数中调用函数

> ID：12439016
> 
> 赞同：0
> 
> 时间：2012-09-15T16:15:11.107
> 
> 标签：php

我正在尝试调用一个传递了变量的函数，但它不起作用。

```
public function Delete_Update($uid, $msg_id) 
{
    $sql = mysql_query("select uploads_grab from messages where msg_id='$msg_id' and uid_fk='$uid'");
    $roww = mysql_fetch_array($sql);
    $uploads_grab_id=$roww['uploads_grab'];
    if ($uploads_grab_id != '0') {
        $sq = mysql_query("delete from user_uploads_grab where id='$uploads_grab_id'");
    }

    $query = mysql_query("DELETE FROM `comments` WHERE msg_id_fk = '$msg_id' and cfid='$uid' ") or die(mysql_error());
    $query = mysql_query("DELETE FROM `messages` WHERE msg_id = '$msg_id' and uid_fk='$uid'") or die(mysql_error());

    after_del($uid,$msg_id,'wall_post');
    return true;           
} 
```

在上面的代码中，我正在调用一个函数`after_del($uid,$msg_id,'wall_post');`，但它不起作用

after_del 函数是

```
class delme
   {
      function after_del($uid,$delid,$type)
      {

        $sql=mysql_query("select created from messages where msg_id='$delid' and uid_fk='$uid'");
        $roww=mysql_fetch_array($sql);
        $created=$roww['created'];
        $del_noti = mysql_query("DELETE FROM `notification` WHERE time_stamp = '$created' and owner_user_id='$uid'") or die(mysql_error());
        $del_activity = mysql_query("DELETE FROM `activity` WHERE time_stamp = '$created' and owner_user_id='$uid'") or die(mysql_error());         

      }

      }
$del_result=new delme(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T16:36:47.260

after_del 是否与 Delete_Update 属于同一类？如果是，那么您可以像这样访问：

```
$this->after_del($uid,$msg_id,'wall_post'); 
```

或者如果 after_del 在同一个类中但是是一个静态方法，那么访问如下：

```
self::after_del($uid,$msg_id,'wall_post'); 
```

如果在另一个类中将 after_del 定义为公共方法，则首先创建该类的对象并调用该对象的方法：

```
$otherClass = new OtherClass();
$otherClass->after_del($uid,$msg_id,'wall_post'); 
```

或者如果 after_del 被定义为另一个类的静态公共方法，那么这样调用它：

```
OtherClass::after_del($uid,$msg_id,'wall_post'); 
```

# c++ - 如果 stat 语句不起作用

> ID：12439017
> 
> 赞同：0
> 
> 时间：2012-09-15T16:15:12.487
> 
> 标签：c++, xcode

我试图根据给出的用户输入使 if 语句为真或假，但是当我将条件放入其中时，它将无效操作数表示为二进制表达式（'string'（又名'basic_string'）和'int'）

这是我的代码

```
#include <iostream>
#include <string>

using namespace std;

 int main()
 {
 cout << "   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX" << endl;
 cout << "   X                                             X" << endl;
 cout << "   X                    MENU                     X" << endl;
 cout << "   X                                             X" << endl;
 cout << "   X       Press 1 to Play The Word Game.        X" << endl;
 cout << "   X                                             X" << endl;
 cout << "   X       Press 2 Too See a calculator.         X" << endl;
 cout << "   X                                             X" << endl;
 cout << "   X                                             X" << endl;
 cout << "   XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX" << endl
 << endl;

string userinput;
cin >> userinput;
if (userinput == 1);{

    while (1<2)
    {
        cout << "Enter the Word." << endl;

        string UserInput;
        cin >> UserInput;

        cout << endl << UserInput << " is is not the right word but keep on trying" << endl << endl;

        cout << "Press Enter to Continue.";

        cin.clear();
        cin.ignore(255, '\n');
        cin.get();

        return 0;
    }
}
  if (userinput == 2);
  {   int z;
    int x;
    int sum;
    cout << " welcome to the calculator" << endl << endl;
    cin.clear();
    cin.ignore(255, '\n');
    cin.get();

    cout << "enter your first number";
    cin >> z; cout << endl << endl;
    cout << "enter your second number" << endl;
    cin >> x; cout << endl << endl;
    sum = z + x;
    cout << sum;
 }

cin.clear();
cin.ignore(255, '\n');
cin.get();

return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T16:18:04.153

```
 if (userinput == 2);
                    ^^^ 
```

同样，你后面到处都有分号`if`，我认为这不是你想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T16:18:21.707

去掉这里的分号：

`if (userinput == 1);{`

`if (userinput == 2);`

而且您无法将字符串与 int 进行比较。

```
string userinput;
cin >> userinput;
if (userinput == 1);{ 
```

所以试试

```
int userInput ; 
```

如果您坚持使用字符串，请查看： [http ://www.cplusplus.com/reference/clibrary/cstdlib/atoi/](http://www.cplusplus.com/reference/clibrary/cstdlib/atoi/)

# javascript - 提交父html表单而不是子弹出表单？

> ID：12439019
> 
> 赞同：2
> 
> 时间：2012-09-15T16:15:16.527
> 
> 标签：javascript, html, jsp, jakarta-ee, forms

我有一个jsp，即customer.jsp，我用下面的代码片段打开弹出窗口

```
 window.open('customerSuccess.jsp','customer', 'height=600,width=900,top=30,left=50,resizable=yes,menubar,scrollbars');
  document.forms[formName].action="../customer.do"
  document.forms[formName].target="customer"; 
```

这将打开 CustomerSuccess.jsp，它具有在单击一个按钮时调用的函数 buttonClicked。CustomerSuccess.jsp 具有名称为 Department 的表单

```
 function buttonClicked() {
    document.forms['Department'].file.value = '459';
    document.forms['Department'].submit();
  } 
```

我的问题是提交父窗口页面而不是弹出窗口。我不明白为什么它不提交弹出 html 表单？

**我尝试了什么：-**我还尝试在提交表单之前获取表单的长度。长度出来是1，名字是Department

```
var theForms = document.getElementsByTagName("form");  
for(i=0; i<theForms.length; i++)  
    alert(theForms[i].name); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:38:42.133

在子窗口上提交表单之前，我能够使用以下代码片段解决它

```
 document.forms['Department'].target="_self"; 
```

如果我们不为目标指定 self ，默认情况下看起来弹出窗口以父窗口为目标

# c# - C# ASP.NET 将联系人页面上传到 SQL Server 2008 R2 时遇到问题

> ID：12439021
> 
> 赞同：0
> 
> 时间：2012-09-15T16:15:21.153
> 
> 标签：c#, asp.net, ado.net, sql-server-2008-r2

首先让我说我是 ASP 的新手，并且在过去的几周里已经尽我所能来学习脚本。我在设置`aspx.cs`页面以获取要在服务器上发布的信息时遇到问题。任何帮助将非常感激。

我在下面包含了后端代码和 Web 表单。Web 表单是一个页面，需要收集文本字段、RadioButton、下拉列表和复选框列表。

RadioButton - 询问需要是或否答案的问题 Checkboxlist - 如果选中则插入 1，如果未选中则插入 0。

需要能够使用 asp.net 2.0、IIS 6、C#、SQL Server 2008 R2。

****我用数字替换了所有的实际 ID* *******

 **# 后端

```
public partial class _Default : System.Web.UI.Page
{
    public string GetConnectionString()
    {
        //sets the connection string from your web config file "ConnString" is the name of your Connection String
        return ConfigurationManager.ConnectionStrings["MyConString"].ConnectionString;
    }

private void ExecuteInsert(string 1, string 2, string 3, string 4, string 5, string 6, string 7, string 8, string 9, string 10, string 11, string 12, string 13, string 14, string 15, string 16, string 17, string 18, string 19, string 20, string 21, string 22, string 23, string 24, string 25, string 26, string 27, string 28, string 29, string 30, string 31, string 32, string 33, string 34, string 35, string 36, string 37, string 38, string 39, string 40, string 41, string 42, string 43, string 44, string 45, string 46, string 47, string 48, string 49, string 50, string 51, string 52, string 53, string 54, string 55, string 56, string 57, string 58, string 59, string 60, string 61, string 62, string 63, string 64, string 65, string 66)
{
    SqlConnection conn = new SqlConnection(GetConnectionString());
    string sql = "INSERT INTO webContactForm (1,  2,  3,  4,  5,  6,  7,  8,  9,  10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66) VALUES (@1,  @2,  @3,  @4,  @5,  @6,  @7,  @8,  @9,  @10, @11, @12, @13, @14, @15, @16, @17, @18, @19, @20, @21, @22, @23, @24, @25, @26, @27, @28, @29, @30, @31, @32, @33, @34, @35, @36, @37, @38, @39, @40, @41, @42, @43, @44, @45, @46, @47, @48, @49, @50, @51, @52, @53, @54, @55, @56, @57, @58, @59, @60, @61, @62, @63, @64, @65, @66)";

    try
    {
        conn.Open();
        SqlCommand cmd = new SqlCommand(sql, conn);
        SqlParameter[] param = new SqlParameter[66];
        //param[0] = new SqlParameter("@Contact_id", SqlDbType.Int, 20);
        param[0] = new SqlParameter("@1", SqlDbType.VarChar, 200);
        param[1] = new SqlParameter("@2", SqlDbType.VarChar, 200);
        param[2] = new SqlParameter("@3", SqlDbType.VarChar, 200);
        param[3] = new SqlParameter("@4", SqlDbType.VarChar, 200);
        param[4] = new SqlParameter("@5", SqlDbType.VarChar, 200);
        param[5] = new SqlParameter("@6", SqlDbType.VarChar, 200);
        param[6] = new SqlParameter("@7", SqlDbType.VarChar, 200);
        param[7] = new SqlParameter("@8", SqlDbType.VarChar, 200);
        param[8] = new SqlParameter("@9", SqlDbType.VarChar, 200);
        param[9] = new SqlParameter("@10", SqlDbType.VarChar, 200);
        param[10] = new SqlParameter("@11", SqlDbType.VarChar, 200);
        param[11] = new SqlParameter("@12", SqlDbType.VarChar, 200);
        param[12] = new SqlParameter("@13", SqlDbType.VarChar, 200);
        param[13] = new SqlParameter("@14", SqlDbType.VarChar, 200);
        param[14] = new SqlParameter("@15", SqlDbType.VarChar, 200);
        param[15] = new SqlParameter("@16", SqlDbType.VarChar, 200);
        param[16] = new SqlParameter("@17", SqlDbType.VarChar, 200);
        param[17] = new SqlParameter("@18", SqlDbType.VarChar, 200);
        param[18] = new SqlParameter("@19", SqlDbType.VarChar, 200);
        param[19] = new SqlParameter("@20", SqlDbType.VarChar, 200);
        param[20] = new SqlParameter("@21", SqlDbType.VarChar, 200);
        param[21] = new SqlParameter("@22", SqlDbType.VarChar, 200);
        param[22] = new SqlParameter("@23", SqlDbType.VarChar, 200);
        param[23] = new SqlParameter("@24", SqlDbType.VarChar, 200);
        param[24] = new SqlParameter("@25", SqlDbType.VarChar, 200);
        param[25] = new SqlParameter("@26", SqlDbType.VarChar, 200);
        param[26] = new SqlParameter("@27", SqlDbType.VarChar, 200);
        param[27] = new SqlParameter("@28", SqlDbType.VarChar, 200);
        param[28] = new SqlParameter("@29", SqlDbType.VarChar, 200);
        param[29] = new SqlParameter("@30", SqlDbType.VarChar, 200);
        param[30] = new SqlParameter("@31", SqlDbType.VarChar, 200);
        param[31] = new SqlParameter("@32", SqlDbType.VarChar, 200);
        param[32] = new SqlParameter("@33", SqlDbType.VarChar, 200);
        param[33] = new SqlParameter("@34", SqlDbType.VarChar, 200);
        param[34] = new SqlParameter("@35", SqlDbType.VarChar, 200);
        param[35] = new SqlParameter("@36", SqlDbType.VarChar, 200);
        param[36] = new SqlParameter("@37", SqlDbType.VarChar, 200);
        param[37] = new SqlParameter("@38", SqlDbType.VarChar, 200);
        param[38] = new SqlParameter("@39", SqlDbType.VarChar, 200);
        param[39] = new SqlParameter("@40", SqlDbType.VarChar, 200);
        param[40] = new SqlParameter("@41", SqlDbType.VarChar, 200);
        param[41] = new SqlParameter("@42", SqlDbType.VarChar, 200);
        param[42] = new SqlParameter("@43", SqlDbType.VarChar, 200);
        param[43] = new SqlParameter("@44", SqlDbType.VarChar, 200);
        param[44] = new SqlParameter("@45", SqlDbType.VarChar, 200);
        param[45] = new SqlParameter("@46", SqlDbType.VarChar, 200);
        param[46] = new SqlParameter("@47", SqlDbType.VarChar, 200);
        param[47] = new SqlParameter("@48", SqlDbType.VarChar, 200);
        param[48] = new SqlParameter("@49", SqlDbType.VarChar, 200);
        param[49] = new SqlParameter("@50", SqlDbType.VarChar, 200);
        param[50] = new SqlParameter("@51", SqlDbType.VarChar, 200);
        param[51] = new SqlParameter("@52", SqlDbType.VarChar, 200);
        param[52] = new SqlParameter("@53", SqlDbType.VarChar, 200);
        param[53] = new SqlParameter("@54", SqlDbType.VarChar, 200);
        param[54] = new SqlParameter("@55", SqlDbType.VarChar, 200);
        param[55] = new SqlParameter("@56", SqlDbType.VarChar, 200);
        param[56] = new SqlParameter("@57", SqlDbType.VarChar, 200);
        param[57] = new SqlParameter("@58", SqlDbType.VarChar, 200);
        param[58] = new SqlParameter("@59", SqlDbType.VarChar, 200);
        param[59] = new SqlParameter("@60", SqlDbType.VarChar, 200);
        param[60] = new SqlParameter("@61", SqlDbType.VarChar, 200);
        param[61] = new SqlParameter("@62", SqlDbType.VarChar, 200);
        param[62] = new SqlParameter("@63", SqlDbType.VarChar, 200);
        param[63] = new SqlParameter("@64", SqlDbType.VarChar, 200);
        param[64] = new SqlParameter("@65", SqlDbType.VarChar, 200);
        param[65] = new SqlParameter("@66", SqlDbType.VarChar, 200);
    param[66] = new SqlParameter("@67", SqlDbType.VarChar, 200);

        param[0].Value = 1;
        param[1].Value = 2;
        param[2].Value = 3;
        param[3].Value = 4;
        param[4].Value = 5;
        param[5].Value = 6;
        param[6].Value = 7;
        param[7].Value = 8;
        param[8].Value = 9;
        param[9].Value = 10;
        param[10].Value = 11;
        param[11].Value = 12;
        param[12].Value = 13;
        param[13].Value = 14;
        param[14].Value = 15;
        param[15].Value = 16;
        param[16].Value = 17;
        param[17].Value = 18;
        param[18].Value = 19;
        param[19].Value = 20;
        param[20].Value = 21;
        param[21].Value = 22;
        param[22].Value = 23;
        param[23].Value = 24;
        param[24].Value = 25;
        param[25].Value = 26;
        param[26].Value = 27;
        param[27].Value = 28;
        param[28].Value = 29;
        param[29].Value = 30;
        param[30].Value = 31;
        param[31].Value = 32;
        param[32].Value = 33;
        param[33].Value = 34;
        param[34].Value = 35;
        param[35].Value = 36;
        param[36].Value = 37;
        param[37].Value = 38;
        param[38].Value = 39;
        param[39].Value = 40;
        param[40].Value = 41;
        param[41].Value = 42;
        param[42].Value = 43;
        param[43].Value = 44;
        param[44].Value = 45;
        param[45].Value = 46;
        param[46].Value = 47;
        param[47].Value = 48;
        param[48].Value = 49;
        param[49].Value = 50;
        param[50].Value = 51;
        param[51].Value = 52;
        param[52].Value = 53;
        param[53].Value = 54;
        param[54].Value = 55;
        param[55].Value = 56;
        param[56].Value = 57;
        param[57].Value = 58;
        param[58].Value = 59;
        param[59].Value = 60;
        param[60].Value = 61;
        param[61].Value = 62;
        param[62].Value = 63;
        param[63].Value = 64;
        param[64].Value = 65;
        param[65].Value = 66;
        param[66].Value = 67;

        //create loop to insert
        for (int i = 0; i < param.Length; i++)
        {
            cmd.Parameters.Add(param[i]);
        }

        cmd.CommandType = CommandType.Text;
        cmd.ExecuteNonQuery();
    }
    catch (System.Data.SqlClient.SqlException ex)
    {
        string msg = "Error occured while inserting:";
        msg += ex.Message;
        throw new Exception(msg);
    }
    finally
    {
        conn.Close();
    }
    }
    private object GetConnectionString(string p)
    {
throw new NotImplementedException();
    }
    protected void Button1_Click(object sender, EventArgs e){
        //call the method to execute insert to the database
        cmd.Parameters.Add(new SqlParameter("@MyParamter", "my value"));

        ClearControls(Page);
}
} 
```

# 网络表格代码：

```
 <%@ Page Language="C#"  AutoEventWireup="true" CodeFile="Default.aspx.cs"" Inherits="Default2" %>

 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

 <html xmlns="http://www.w3.org/1999/xhtml">

 <head id="Head1" runat="server">
<title>Contact Us</title>

  </head>
   <body>
    <form id="form1" runat="server">
     <div>
      <table class="style1">
        <tr>
            <td class="style4">TextBox column 1:</td>
            <td class="style2">
                <asp:TextBox ID="1" runat="server"></asp:TextBox>
            </td>
        </tr>
        <tr>
            <td class="style4">TextBox column 2:</td>
            <td class="style2">
                <asp:TextBox ID="LName" runat="server"></asp:TextBox>
            </td>
        </tr>
        <tr>
            <td class="style4">3 TextBox column 3,4,5:</td>
            <td class="style2">
                <asp:TextBox ID="3" runat="server" Width="60px"></asp:TextBox>-
                <asp:TextBox ID="4" runat="server" Width="59px"></asp:TextBox>-
                <asp:TextBox ID="5" runat="server" Width="62px"></asp:TextBox>
            </td>
        </tr>
        <tr>
            <td class="style4">TextBox column 6:</td>
            <td class="style2">
                <asp:TextBox ID="6" runat="server"></asp:TextBox>
            </td>
        </tr>
        <tr>
            <td class="style4">ListItem column 7:</td>
            <td class="style2">
            <asp:DropDownList ID="7" runat="server"
                              AppendDataBoundItems="true">
            <asp:ListItem Value="-1">Select</asp:ListItem>
            <asp:ListItem>A</asp:ListItem>
            <asp:ListItem>B</asp:ListItem>
            <asp:ListItem>C</asp:ListItem>
            <asp:ListItem>D</asp:ListItem>
            <asp:ListItem>E</asp:ListItem>
            <asp:ListItem>F</asp:ListItem>
            <asp:ListItem>G</asp:ListItem>
            </asp:DropDownList>
            </td>
        </tr>
        <tr>
            <td class="style4">RadioButton column 8</td>
            <td class="style2">
                <asp:RadioButton ID="Yes" runat="server" Checked="True" />
                <asp:RadioButton ID="No" runat="server" />
            </td>
        </tr>
        <tr>
            <td class="style4">TextBox column 9:</td>
            <td class="style2">
                <asp:TextBox ID="9" runat="server"></asp:TextBox>
            </td>
        </tr>
        <tr>
            <td class="style4">TextBox column 10:</td>
            <td class="style2">
                <asp:TextBox ID="ClientLName" runat="server"></asp:TextBox>
            </td>
        </tr>
        <tr>
            <td class="style4">RadioButton Column 11:</td>
            <td class="style2">
                <asp:RadioButton ID="Female" runat="server" />
                <asp:RadioButton ID="Male" runat="server" />
            </td>
        </tr>
        <tr>
            <td class="">3 TextBox column 12,13,14:</td>
            <td class="">
                <asp:TextBox ID="12" runat="server" Width="50px"></asp:TextBox>(mm)/<asp:TextBox ID="13" runat="server" Width="50px"></asp:TextBox>(dd)/<asp:TextBox ID="14" runat="server" Width="85px"></asp:TextBox>(yyyy)
            </td>
        </tr>
        <tr>
            <td class="style4">TextBox column 15:</td>
            <td class="style2">
                <asp:TextBox ID="15" runat="server"></asp:TextBox>
            </td>
        </tr>
        <tr>
            <td class="style4">TextBox column 16:</td>
            <td class="style2">
                <asp:TextBox ID="16" runat="server"></asp:TextBox>
            </td>
        </tr>
        <tr>
            <td class="style4">TextBox column 17:</td>
            <td class="style2">
                <asp:TextBox ID="17" runat="server"></asp:TextBox>
            </td>
        </tr>
        <tr>
            <td class="style4">Dropdownlist column 18:</td>
            <td class="style2">
            <asp:DropDownList ID="18" runat="server"
                              AppendDataBoundItems="true">
         <asp:ListItem value="-1">Select State</asp:ListItem>
         <asp:ListItem value="AL">Alabama</asp:ListItem>
         <asp:ListItem value="AR">Arkansas</asp:ListItem>
         <asp:ListItem value="AZ">Arizona</asp:ListItem>
         <asp:ListItem value="CA">California</asp:ListItem>
         <asp:ListItem value="CO">Colorado</asp:ListItem>
         <asp:ListItem value="CT">Connecticut</asp:ListItem>
         <asp:ListItem value="DC">District of Columbia</asp:ListItem>
         <asp:ListItem value="DE">Delaware</asp:ListItem>
         <asp:ListItem value="FL">Florida</asp:ListItem>
         <asp:ListItem value="GA">Georgia</asp:ListItem>
         <asp:ListItem value="IA">Iowa</asp:ListItem>
         <asp:ListItem value="ID">Idaho</asp:ListItem>
         <asp:ListItem value="IL">Illinois</asp:ListItem>
         <asp:ListItem value="IN">Indiana</asp:ListItem>
         <asp:ListItem value="KS">Kansas</asp:ListItem>
         <asp:ListItem value="KY">Kentucky</asp:ListItem>
         <asp:ListItem value="LA">Louisiana</asp:ListItem>
         <asp:ListItem value="MA">Massachusetts</asp:ListItem>
         <asp:ListItem value="MD">Maryland</asp:ListItem>
         <asp:ListItem value="ME">Maine</asp:ListItem>
         <asp:ListItem value="MI">Michigan</asp:ListItem>
         <asp:ListItem value="MN">Minnesota</asp:ListItem>
         <asp:ListItem value="MO">Missouri</asp:ListItem>
         <asp:ListItem value="MS">Mississippi</asp:ListItem>
         <asp:ListItem value="MT">Montana</asp:ListItem>
         <asp:ListItem value="NC">North Carolina</asp:ListItem>
         <asp:ListItem value="ND">North Dakota</asp:ListItem>
         <asp:ListItem value="NE">Nebraska</asp:ListItem>
         <asp:ListItem value="NH">New Hampshire</asp:ListItem>
         <asp:ListItem value="NJ">New Jersey</asp:ListItem>
         <asp:ListItem value="NM">New Mexico</asp:ListItem>
         <asp:ListItem value="NV">Nevada</asp:ListItem>
         <asp:ListItem value="NY">New York</asp:ListItem>
         <asp:ListItem value="OH">Ohio</asp:ListItem>
         <asp:ListItem value="OK">Oklahoma</asp:ListItem>
         <asp:ListItem value="OR">Oregon</asp:ListItem>
         <asp:ListItem value="PA">Pennsylvania</asp:ListItem>
         <asp:ListItem value="RI">Rhode Island</asp:ListItem>
         <asp:ListItem value="SC">South Carolina</asp:ListItem>
         <asp:ListItem value="SD">South Dakota</asp:ListItem>
         <asp:ListItem value="TN">Tennessee</asp:ListItem>
         <asp:ListItem value="TX">Texas</asp:ListItem>
         <asp:ListItem value="UT">Utah</asp:ListItem>
         <asp:ListItem value="VA">Virginia</asp:ListItem>
         <asp:ListItem value="VT">Vermont</asp:ListItem>
         <asp:ListItem value="WA">Washington</asp:ListItem>
         <asp:ListItem value="WI">Wisconsin</asp:ListItem>
         <asp:ListItem value="WV">West Virginia</asp:ListItem>
         <asp:ListItem value="WY">Wyoming</asp:ListItem>
            </asp:DropDownList>
            </td>
        </tr>
        <tr>
            <td class="style4">TextBox column 19:</td>
            <td class="style2">
                <asp:TextBox ID="19" runat="server"></asp:TextBox>
            </td>
        </tr>
        <tr>
        <td>
        <h1>
        Providing:
       </h1>
        </td>
        <td>

        </td>
        </tr>
        <tr>
        <td>
            <asp:CheckBoxList ID="CheckBoxList1" runat="server">
                <asp:ListItem Value="20">Want 1</asp:ListItem>
                <asp:ListItem Value="21">Want 2</asp:ListItem>
                <asp:ListItem Value="22">Want 3</asp:ListItem>
                <asp:ListItem Value="23">Want 4</asp:ListItem>
                <asp:ListItem Value="24">Want 5</asp:ListItem>
                <asp:ListItem Value="25">Want 6</asp:ListItem>
                <asp:ListItem Value="26">Want 7</asp:ListItem>
                <asp:ListItem Value="27">Want 8</asp:ListItem>
                <asp:ListItem Value="28">Want 9</asp:ListItem>
                <asp:ListItem Value="29">Want 10</asp:ListItem>
                <asp:ListItem Value="30">Want 11</asp:ListItem>
                <asp:ListItem Value="31">Want 12</asp:ListItem>
                <asp:ListItem Value="32">Want 13</asp:ListItem>
                <asp:ListItem Value="33">Want 14</asp:ListItem>
                <asp:ListItem Value="34">Want 15</asp:ListItem>
                <asp:ListItem Value="35">Want 16</asp:ListItem>
                <asp:ListItem Value="36">Want 17</asp:ListItem>
                <asp:ListItem Value="37">Want 18</asp:ListItem>
                <asp:ListItem Value="38">Want 19</asp:ListItem>
                <asp:ListItem Value="39">Want 20</asp:ListItem>
                <asp:ListItem Value="40">Want 21</asp:ListItem>
            </asp:CheckBoxList>
        </td>
        <td>
        <asp:CheckBoxList ID="CheckBoxList2" runat="server">
                <asp:ListItem Value="41">Want 22</asp:ListItem>
                <asp:ListItem Value="42">Want 23</asp:ListItem>
                <asp:ListItem Value="43">Want 24</asp:ListItem>
                <asp:ListItem Value="44">Want 25</asp:ListItem>
                <asp:ListItem Value="45">Want 26</asp:ListItem>
                <asp:ListItem Value="46">Want 27</asp:ListItem>
                <asp:ListItem Value="47">Want 28</asp:ListItem>
                <asp:ListItem Value="48">Want 29</asp:ListItem>
                <asp:ListItem Value="49">Want 30</asp:ListItem>
                <asp:ListItem Value="50">Want 31</asp:ListItem>
                <asp:ListItem Value="51">Want 32</asp:ListItem>
                <asp:ListItem Value="52">Want 33</asp:ListItem>
                <asp:ListItem Value="53">Want 34</asp:ListItem>
                <asp:ListItem Value="54">Want 35</asp:ListItem>
                <asp:ListItem Value="55">Want 36</asp:ListItem>
                <asp:ListItem Value="56">Want 37</asp:ListItem>
                <asp:ListItem Value="57">Want 38</asp:ListItem>
                <asp:ListItem Value="58">Want 39</asp:ListItem>
                <asp:ListItem Value="59">Want 40</asp:ListItem>
                <asp:ListItem Value="60">Want 41</asp:ListItem>
                <asp:ListItem Value="61">Want 42</asp:ListItem>
            </asp:CheckBoxList>
        </td>
        </tr>
        <tr>
            <td class="style4">Comment TextBox column 62:</td>
            <td class="style2">
                <asp:TextBox ID="62" runat="server"></asp:TextBox>
            </td>
        </tr>
    <tr>
            <td>
              <asp:CheckBoxList ID="CheckBoxList3" runat="server">
                <asp:ListItem Value="63">Have 1</asp:ListItem>
                <asp:ListItem Value="64">Have 2</asp:ListItem>
                <asp:ListItem Value="65">Have 3</asp:ListItem>
              </asp:CheckBoxList>
    </td>
            <td>
              <asp:CheckBoxList ID="CheckBoxList4" runat="server">
                <asp:ListItem Value="66">Have 4</asp:ListItem>
                <asp:ListItem Value="67">Have 5</asp:ListItem>
              </asp:CheckBoxList>
    </td>
        </tr>
    </table>
</div>
<asp:Button ID="Button1" runat="server" Text="Submit" 
                         onclick="Button1_Click" />
</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T16:48:22.440

这里有几件事情，几乎无法在一个答案中涵盖，所以让我至少建议您拿起一本基本的 ASP.NET 书籍并阅读其中的一些基础知识来作为我的评论前言。看你的帖子，我想你理解了一些事情，但还不够广泛。

首先，ExecuteInsert 方法有问题，我猜它没有编译。不能用数字命名方法参数；这不是一个合法的标识符。但是，除此之外，这个庞大的参数列表只是一个需要修复的问题......这将我们带到另一个概念......将数据从页面获取到后端代码。

您的 ASP.NET 控件 ID 声明不能只是一个数字 ID，因为它会导致 ASP.NET 生成中间声明，使用它作为将控件公开给您的代码隐藏的标识符。但是，数字标识符是不合法的。我强烈建议您将这些 ID 重命名为更具描述性和建设性的名称。

例如，虽然我不确定它应该包含什么，但假设您使用 ID = "3" 声明的 asp:TextBox 应该包含一个姓氏。那么，一个好的 ID 将是“LastName”，然后可以通过标识符 LastName 在您的代码隐藏中访问它，并通过 Text 属性（例如 LastName.Text）访问其内容。

```
<asp:TextBox ID="LastName" runat="server" Width="60px"></asp:TextBox> 
```

..来自代码隐藏：..

```
// access the value of the textbox as (purely an example):
if (LastName.Text=="")
{
    // Do something with a blank last name
}; 
```

显然，您需要将其适应您的应用程序，并且对其他输入进行相同的概念。

如果您对所有这些 ID 重复该过程，您就会意识到当 Page.IsPostBack 值为 True 时，您有一种自然的机制来访问用户在 Page_Load 事件中提供的值。这使您的页面*更*易于阅读并且以编程方式更易于管理，因为您可以从输入中收集数据并将它们更干净地提供给您的插入。

SQL 语句中的标识符也存在同样的问题，尽管使用参数填充它实际上是一个好习惯。

这是一个好的开始。看看我的建议是否为您提供了一个起点，完善您迄今为止所做的工作，看看您是否可以更接近可行的解决方案。祝你好运。

**根据与 OP 的讨论进行编辑**

这应该提供一个标记和代码隐藏示例，该示例演示了一种从 ASP.NET 页面的 CheckBoxList、TextBox 和 ListBox 中提取值并将这些值作为 SqlParameters 添加到 SqlCommand 以插入到虚构示例表中的方法。

**

## 示例页面的 ASPX 标记：

**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="DemoPage.aspx.cs" Inherits="DemoPage" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
    <asp:CheckBoxList id="SampleCheckBox" runat="server">
        <asp:ListItem Text="First Value" Value="1"></asp:ListItem>
        <asp:ListItem Text="Second Value" Value="2"></asp:ListItem>
        <asp:ListItem Text="Third Value" Value="3"></asp:ListItem>
    </asp:CheckBoxList>
    <br />
    <asp:TextBox ID="SampleTextBox" Width="50" runat="server"></asp:TextBox>
    <asp:ListBox ID="SampleListBox" runat="server">
        <asp:ListItem Text="First Value" Value="A"></asp:ListItem>
        <asp:ListItem Text="Second Value" Value="B"></asp:ListItem>
        <asp:ListItem Text="Third Value" Value="C"></asp:ListItem>
    </asp:ListBox>
    <asp:Button id="SubmitButton" runat="server" UseSubmitBehavior="true" />
    </div>
    </form>
</body>
</html> 
```

后面的代码：

```
using System;
using System.Collections.Generic;
using System.Data.SqlClient;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class DemoPage : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (Page.IsPostBack)
        {

            string strSql = @"Insert Into SampleTable (Check1, Check2, Check3, Text, ListBoxResult) 
                                               Values (@Value1, @Value2, @Value3, @TextValue, @ListResult)";
            SqlCommand cmd = new SqlCommand(strSql);

            // Handle CheckBoxList values
            int checkValue=0;
            foreach (ListItem sampleItem in SampleCheckBox.Items)
            {
                checkValue++; //increment ID used to build parameter name
                string parmName=String.Format("@Value{0}",checkValue);
                SqlParameter newParameter = new SqlParameter();
                newParameter.ParameterName = parmName;
                if (sampleItem.Selected)
                {
                    newParameter.Value = "Y";
                    //column value in DB for field corresponding to sampleItem is "Y"
                }
                else
                {
                    newParameter.Value="N";
                    //column value in DB for field corresponding to sampleItem is "n"
                }
                cmd.Parameters.Add(newParameter);
            }

            // Handle TextBox value
            cmd.Parameters.Add("@TextValue", SampleTextBox.Text);

            // Handle ListBox selected value
            cmd.Parameters.Add("@ListResult", SampleListBox.SelectedValue);

            cmd.ExecuteNonQuery();
        }
    }
} 
```

**讨论**

该页面包含一个三项 CheckBoxList、一个 TextBox 和一个 ListBox。用户可以选择 CheckBoxList 中的任何一项，在 TextBox 中放置任何文本，并从 LIstBox 中选择一个值。该按钮导致表单提交，导致代码隐藏在回发模式下执行。

回发模式导致 SQL 数据部分分三个部分触发：

1.  无论 CheckBoxList 中选中的项目数是多少，这些值都对应于（在此示例中）示例数据库中的 Y 或 N 值。如果选中某项，则该值应为“Y”，否则为“N”。该代码遍历 CheckBoxList 中的所有三个 ListItem，并添加名称与 SQL 查询中命名的 Parameter 字段对应的 Parameter 对象，并根据需要设置值“Y”或“N”。“parmName”变量是构造前三个参数名称的便利变量，命名为 Value1、Value2、Value3。

2.  下一个参数取自 SampleTextBox 控件的 Text 属性。

3.  最后一个参数取自所选 ListBox ListItem 的 Value 属性。

收集到参数后，将触发 SqlCommand 对象的 ExecuteNonQuery 方法，使用提供的值执行语句。

希望这至少说明了一种从 ASP.NET 表单收集值并将它们写入数据库的方法。未说明提供/构建正确连接字符串以及声明/打开连接对象的元素。由于数据库查询仅用于演示，因此尚未完成针对数据库的此代码的实际测试，但它确实可以在 ExecuteNonQuery() 方法调用之前完成。**

# c# - 父母词典，添加孩子

> ID：12439024
> 
> 赞同：0
> 
> 时间：2012-09-15T16:15:27.197
> 
> 标签：c#, dictionary

嘿伙计们，我需要包含一个包含多个子对象的数据库。我正在考虑制作一个字典，其中键是一个 int 表示它是哪种类型的子对象，然后第二个字段是父对象。认为这样我可以将任何子对象添加到 Dictionary 但我似乎无法让它工作？关于如何正确执行此操作的任何想法？

```
Dictionary<int, Parent> database;

ChildOne newChildOne = new ChildOne();
ChildTwo newChildTwo = new ChildTwo();

database.Add(1, newChildOne); 
database.Add(2, newChildTwo); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T16:29:17.477

你不需要字典来保存父子关系。只需创建一个可以保存这种关系的类：

```
public class MyEntity
{
    public MyEntity(int entityId, MyEntity parent)
    {
        this.Children = new List<MyEntity>();
        this.EntityId = entityId;
        this.Parent = parent;
        this.Parent.Children.Add(this);
    }

    public int EntityId { get; set; }

    public MyEntity Parent { get; set; }

    public List<MyEntity> Children { get; set; }
} 
```

然后只需创建此关系：

```
 MyEntity topParent = new MyEntity(1,null);
        MyEntity childOnLevel1 = new MyEntity(7,topParent);
        MyEntity childOnLevel2 = new MyEntity(4, childOnLevel1); 
```

# image - 画布图像透视

> ID：12439025
> 
> 赞同：0
> 
> 时间：2012-09-15T16:15:32.233
> 
> 标签：image, html5-canvas

我已经开始使用画布并处理图像。

我想实现这样的目标 - 具有透视的图像。

![图片](../Images/edbcde94b1848fa7eb2d1b5b8394da94.png) ！

我尝试了该`ctx.transform(1,0.5,-0.5,1,30,10)`方法，但不完全是透视，我找不到一个好的教程。

有人可以给我链接一个教程或一般帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T17:25:06.630

这是我刚刚做的一个简单的方法......[**在这里**](http://jsbin.com/opukaw/10/edit)检查。

该技术非常简单。您只需将图像分成很多部分，这种情况下您会进行许多垂直分割。然后你调整每一块的大小，使它们具有下降的高度。

这给了你某种透视感。

使用该功能的方法如下：

```
drawPerspective(canvasID, imgURL, scale); // for the scale value try something between 0.5 and 1 
```

# sql - SQL count() 不同 *AND* 同一个表中的特定记录

> ID：12439026
> 
> 赞同：0
> 
> 时间：2012-09-15T16:15:35.030
> 
> 标签：sql, sql-server, sql-server-2008

这类似于我最近提出的另一个问题，但更进一步。

我之前的问题询问了如何`tblCurrent`在从`tblHistorical`.

我*现在*想知道如何做同样的事情，但要添加两个额外的列，这些列根据同一个`tblCurrent`表中的特定条件计算记录。

我有两张桌子：

```
tblCurrent 
 Ref  | CustomerID | Category | Subcategory | Resolved | ... .. .. .  . |
X001  | 001        | Sales  |  Major      |  TRUE  
X002  | 002        | Sales  | Minor      |  FALSE
X003  | 001        | Marketing | Corp      |  TRUE  

tblHistorical 
 Ref   | ... .. .. .  . |  Missing | Matched
X001   | ... .. .. .  . |  TRUE    | FALSE
X001   | ... .. .. .  . |  FALSE   | FALSE
X002   | ... .. .. .  . |  TRUE    | TRUE
X002   | ... .. .. .  . |  TRUE    | FALSE
X003   | ... .. .. .  . |  FALSE   | FALSE
X003   | ... .. .. .  . |  TRUE    | TRUE 
```

Ref 在 tblCurrent 中是唯一的，但在 Historical 中不是。

我被建议并成功地为上一个问题解决了以下问题：

```
SELECT  a.ref,
    SUM(CASE WHEN b.Missing = 'True' THEN 1 ELSE 0 END) missingTrue,
    SUM(CASE WHEN b.Missing = 'False' THEN 1 ELSE 0 END) missingFalse,
    SUM(CASE WHEN b.Matched = 'True' THEN 1 ELSE 0 END) matchTrue
FROM    tblCurrent a
    LEFT JOIN tblHistorical b
        on a.ref = b.ref
GROUP BY a.ref 
```

问：如何添加两个额外的列（到上述解决方案）：

*   `tblCurrent`匹配相同的记录数`CustomerID`+ `Category`（但不是当前记录）AND Resolved=False。
*   `tblCurrent`匹配相同`CustomerID`+ `Category`+的记录数`SubCategory`（但不是当前记录）AND Resolved=False。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T16:25:05.067

您可以使用 CTE 解决此问题：

```
与 tmp 作为 (
   SELECT CustomerId, COUNT(*) AS cnt
   来自 tblCurrent)
选择 a.ref，tmp.cnt，...
FROM tbl当前
LEFT JOIN tblHistorical b
   ON a.ref = b.ref
左连接 tmp
   ON tmp.CustomerId = a.CustomerId
...

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T18:08:47.110

试试这个：

 ~~SELECT a.ref, SUM(CASE WHEN b.Missing = 'True' THEN 1 ELSE 0 END) missingTrue, SUM(CASE WHEN b.Missing = 'False' THEN 1 ELSE 0 END) missingFalse, SUM(CASE WHEN b.Matched = 'True' THEN 1 ELSE 0 END) matchTrue , COUNT(DISTINCT a.CustomerID) as CustomerID_count --< add this line FROM tblCurrent a LEFT JOIN tblHistorical b on a.ref = b.ref GROUP BY a.ref

 ~~**编辑：**

根据您更新的问题，如果我正确理解您的问题，

```
;WITH 
CATEGORY   AS 
        (SELECT CustomerID ,Category,COUNT(*) AS CNT
        FROM tblCurrent
        GROUP BY CustomerID ,Category),

SUBCATEGORY AS 
        (SELECT CustomerID ,Category,SubCategory,COUNT(*) AS CNT
        FROM tblCurrent
        GROUP BY CustomerID ,Category,SubCategory),

MAIN        AS (
SELECT  a.ref,
        SUM(CASE WHEN b.Missing = 'True' THEN 1 ELSE 0 END) missingTrue,
        SUM(CASE WHEN b.Missing = 'False' THEN 1 ELSE 0 END) missingFalse,
        SUM(CASE WHEN b.Matched = 'True' THEN 1 ELSE 0 END) matchTrue
        FROM    tblCurrent a
        LEFT JOIN tblHistorical b
            on a.ref = b.ref
        GROUP BY a.ref
)
SELECT M.* ,C.CNT AS CATEGORY_COUNT,
       S.CNT AS SUBCATEGORY_COUNT
FROM    MAIN M
JOIN    tblCurrent T
ON      M.ref=T.ref
JOIN    CATEGORY C
ON      C.CustomerID=T.CustomerID
AND     C.Category=T.Category
JOIN    SUBCATEGORY S
ON      S.CustomerID=T.CustomerID
AND     C.Category=T.Category
AND     S.SubCategory=T.SubCategory 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T16:18:49.433

将 a 添加`COUNT(DISTINCT )`到 tblCurrent 的唯一 ID - 即：

```
SELECT  a.ref, 
    COUNT(DISTINCT tblCurrent.Ref),
    SUM(CASE WHEN b.Missing = 'True' THEN 1 ELSE 0 END) missingTrue, 
    SUM(CASE WHEN b.Missing = 'False' THEN 1 ELSE 0 END) missingFalse, 
    SUM(CASE WHEN b.Matched = 'True' THEN 1 ELSE 0 END) matchTrue 
FROM    tblCurrent a 
    LEFT JOIN tblHistorical b 
        on a.ref = b.ref 
GROUP BY a.ref 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T21:23:01.450

您可以在 CASE 语句中使用多个条件。所以你可以做“CASE WHEN a=b AND c=d THEN 1 ELSE 0 END”。这有帮助吗？~~~~

# javascript - Apache Flex 的未来版本是否支持将 MXML 和 ActionScript 交叉编译为 JavaScript？

> ID：12439030
> 
> 赞同：2
> 
> 时间：2012-09-15T16:16:18.540
> 
> 标签：javascript, actionscript-3, apache-flex, cross-compiling, mxml

9 月初，[Adobe 将代号](https://cwiki.apache.org/confluence/display/FLEX/Falcon+Overview)为“Falcon”的下一代 ActionScript 编译器的源代码捐赠给了[Apache Flex](http://incubator.apache.org/flex/)项目。

除了 ActionScript 到 SWF 字节码编译器之外，Adobe 还开发了一个[名为 FalconJS 的 ActionScript 到 JavaScript 交叉编译器原型](http://blogs.adobe.com/bparadie/2011/11/19/what-is-falconjs/)。

2011 年 12 月，Adobe 举行了[关于 Falcon 和 FalconJS 的公开讨论](http://blogs.adobe.com/bparadie/2011/12/21/adobe-tv-open-discussion-about-falcon-and-falconjs/)，听起来 FalconJS 也将捐赠给 Apache Flex，目标日期为 2012 年第四季度。

**未来的 Apache Flex 版本是否会集成 FalconJS 组件，从而能够将现有 MXML 应用程序交叉编译为 JavaScript/HTML5？**

在 2011 年 12 月的 Adob​​e 活动中展示的 Demo 看起来非常简单，而且似乎并非 Flash 的所有功能都可以在 JavaScript/HTML5 中重现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T16:32:25.747

你在这里问两个问题。

1.  *Apache Flex 的未来版本中是否会提供交叉编译支持？*
    仅当社区成员和项目提交者开始工作时。据了解，Adobe 没有任何继续开发 FalconJS 的计划。FalconJS 不是成品，但可能更像是一个概念验证，表明在技术上可以将 ActionScript 交叉编译为 JavaScript。
    作为 Apache 软件基金会项目，Apache Flex 不提供包含特性的路线图，但欢迎您加入该项目并为 FalconJS 做出贡献。
2.  *技术上是否可以交叉编译 Flex 3.x 或 4.x 应用程序？*
    根据我对 OpenLaszlo 交叉编译功能的经验（已经使用该技术 8 年，为 Laszlo 工作并作为开源项目的提交者），我会说当前的 Flex 组件过于重量级，无法有效地交叉编译现有的（基于 ActionScript）组件到 JavaScript。
    使用优化的组件集（一些基础类和特定于运行时的内核），可以利用 Falcon 编译器进行交叉编译，并且应用程序至少应该在台式机和双核智能手机/平板电脑上具有高性能。但是创建这样一个功能需要大量的工作，绝对不会在接下来的 12 个月内发生。

# sql - 在没有 GEOS 的情况下在 SpatiaLite 中查找最近点

> ID：12439032
> 
> 赞同：1
> 
> 时间：2012-09-15T16:16:23.293
> 
> 标签：sql, nearest-neighbor, spatialite

我想找到在 SpatiaLite 中存储为点的经纬度的最近点。我读[了这个](http://northredoubt.com/n/2012/01/27/of-file-sizes-and-nearest-neighbors/)，它有这个例子：

```
SELECT feature_name, feature_class, 
     ST_Distance(Geometry, MakePoint(-70.250, 43.802)) AS Distance FROM XYGNIS 
WHERE distance &lt; 0.1 AND ROWID IN 
( SELECT ROWID FROM SpatialIndex 
  WHERE f_table_name = 'XYGNIS' AND search_frame = 
  BuildCircleMbr(-70.250,    43.802, 0.1)) 
ORDER BY distance LIMIT 10 
```

但是，我不能使用它，因为`ST_Distance`需要使用 GEOS 编译 SpatiaLite，它在 LGPL 中，我不能使用。有没有一种方法可以计算距离并将其设置为“变量”，然后找到距离最小的那个？

# php - 即使转义，php replace 语句中的单引号也会返回错误

> ID：12439036
> 
> 赞同：1
> 
> 时间：2012-09-15T16:17:17.103
> 
> 标签：php, mysql

我需要替换我的 mysql 数据库中的单引号，并且我使用脚本来执行此操作。它适用于其他字符，但当涉及单引号时，它根本不起作用。

```
$sql[$handle]['sql'] = 'UPDATE '.$table.' SET '.$field.' = REPLACE('.$field.',\''.$search[$i].'\',\''.$replace[$i].'\')' 
```

尝试替换单引号时出现此错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '''','')' 附近使用正确的语法）

这是我用来搜索报价的字符串：`$search[] = ('\'');`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T16:28:56.557

您需要转义您的`$search`，因为您传递的是单引号 - 所以当它转到 MySQL 时，它看起来像这样：`'''`. 添加这个：

```
$search[$i] = addslashes($search[$i]); 
```

最好使用[准备语句](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)来避免转义和 SQL 注入问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T16:47:52.020

使用[准备好的语句](http://en.wikipedia.org/wiki/Prepared_statement)和`?`占位符。此示例使用[PEAR DB 包](http://pear.php.net/package/DB/redirected)。

```
<?php
    // import the PEAR DB module
    require_once("DB.php");

    // connect
    $dsn = "mysqli://tehUserName:tehPassWord@db.example.com/tehDatabase";
    $conn = DB::connect($dsn);

    // note the question marks, `?`, used for the string values
    $statement = 'UPDATE '.$table.' SET '.$field.' = REPLACE(?, ?, ?)';
    $result = $conn->query ($statement, [ $field, $search[$i], $replace[$i] ]);

    // ... 
```

我认为 PEAR DB 包已被取代——我已经有一段时间没有编写 PHP 代码了——但是这个片段演示了准备好的语句和占位符。

如果不使用 PEAR DB 包，您应该仍然可以使用准备好的语句和占位符，但我不确定。（如果有人想编辑这个问题......）请参阅[php.net 上的 Prepared Statements 文章](http://php.net/manual/en/pdo.prepared-statements.php)。

# iphone - 游戏币换算：数学效率

> ID：12439039
> 
> 赞同：-2
> 
> 时间：2012-09-15T16:17:34.217
> 
> 标签：iphone, objective-c, xcode

对于变量：4 个名为`diamondText`、`goldText`、`silverText`和`bronzeText`;money 变量的文本视图`unsigned int money`；以及一个`NSTimer`，每 0.1 秒，运行函数：

```
-(void)updateMoney{
    money++;
    bronzeText.text = [NSString stringWithFormat:@"%d",money];
    silverText.text = [NSString stringWithFormat:@"%d",money%10];
    goldText.text   = [NSString stringWithFormat:@"%d",money%100];
    diamondText.text= [NSString stringWithFormat:@"%d",money%1000];
} 
```

鉴于我的货币是钻石 = 10 金 = 10 银 = 10 青铜 = 1；

**计算和显示货币标签的最有效方法是什么？您将如何使用 GameCenter 和 NSDictionary 或 GameCenter 等存储此变量？**

* * *

更多详情如下：

澄清一下：青铜有最后 2 个数字，白银有接下来的 2 个数字，依此类推。

我知道我可以使用 4 个整数或一个数组，但我宁愿尝试使用这种方法，除非有更有效的方法。

示例：当`money = 1000`; `bronzeText = nothing`, `silverText = 10`, `goldText = nothing`, `diamondText = nothing`;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T16:44:02.983

首先...如果你给每个硬币两位数，那么你的数学就不行了。如果你修改 10 一切，那么每个硬币只有一个数字。但是您甚至做得都不对；数学没有考虑硬币的价值，或者忽略你已经考虑过的硬币，或者任何其他的。假设你有 1371 块钱……用你目前的数学计算，青铜 = 1371，白银 = 1，黄金 = 71，钻石 = 371。我很确定这不是你的想法。

你可以尝试类似的东西

```
int bronze = money % 100;
int silver = (money / 100) % 100;
int gold = (money / 10000) % 100;
int diamond = money / 1000000; 
```

现在，如果你有 1371 钱，你有青铜=71，白银=13，黄金=0，钻石=0。

至于更新视图，对于青铜，您几乎总是必须更新它——任何更改都会影响它。但是，如果你总是加一，你只需要在当前硬币的计数为 0 时更新下一个更高的硬币。例如，如果你有 2799 并更新，将你的钱增加到 2800，你现在有青铜=0，因此您将白银更新为28。但是，由于28！= 0，黄金不需要更新，因此您甚至不必为钻石烦恼。

不过，您只需*在货币发生变化时*更新它。所以在碰撞时这样做比在计时器上更有意义。:)

# java - 在 Java 中输入文本数字

> ID：12439040
> 
> 赞同：2
> 
> 时间：2012-09-15T16:17:34.400
> 
> 标签：java

嗨，我是 Java 新手，所以我对此有疑问，

假设我要求用户输入一个数字，而不是输入“1”，他输入了“one”。无论如何都会将其合并到代码中吗？我的意思是“1”和“一”都是相同的输入？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T16:20:08.317

Java 的标准库中没有内置任何东西可以将单词转换为数字（反之亦然）。请记住，这样的库几乎肯定会支持多种语言，并使用各种表达数字的规则（“2012”和“212”是如何仅用英语表达 2012 的两个示例）。很可能有第三方库可用，或者如果您只需要处理非常特定的数字子集，您可能只想填充一个`Map<String, Integer>`.

# objective-c - Objective-C 双十六进制表示

> ID：12439048
> 
> 赞同：0
> 
> 时间：2012-09-15T16:18:33.000
> 
> 标签：objective-c, hex

您能否解释一下使用“p”字符的双十六进制数字表示：

```
0x1.5p10 or 0x1P-1 
```

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T16:26:08.387

这实际上并不特定于 Objective-C。它是从 C 继承的标准功能。它提供了一种无需舍入即可编写浮点数的方法。它在 C 标准中有明确记录，但这里有一个快速概述：

十六进制浮点字面量的形式为`0x[significand]p[exponent]`，其中`[significand]`是十六进制数，并且`[exponent]`是基数为 10 的整数。该数字具有价值`[significand] x 2^[exponent]`。

因此，例如：

```
0x1.5p10 = (1 + 5/16) x 2^10 = 1344.0
0x1p-1 = 1 x 2^-1 = 0.5 
```

这些例子并不是特别有趣，因为它们都可以很容易地完全写成十进制浮点文字。随着指数变得更加极端，符号变得更加有趣。例如，考虑最大的有限双精度数：`0x1.fffffffffffffp1023`十六进制浮点数。用十进制精确写出来给我们：

```
179769313486231570814527423731704356798070567525844996598917476803157260780028538760589558632766878171540458953514382464234321326889464182768467546703537516986049910576551282076245490090389328944075868508455133942304583236903222948165808559332123348274797826204144723168738177180919299881250404026184124858368.0 
```

这相当麻烦。

# javascript - 页面加载时执行 Javascript 的锚标记上的 HTML 属性

> ID：12439052
> 
> 赞同：0
> 
> 时间：2012-09-15T16:18:53.557
> 
> 标签：javascript, html, tags, onload

是否有一个属性可以赋予**锚标记**，我可以在其中放置页面加载时运行的 Javascript 代码。

像这样的东西：

```
 <a href="#" whenpageloads="alert('page loaded')" />blah blah</a> 
```

它必须添加到锚标记，而不是页面的正文标记。

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T16:20:47.920

如果您希望函数在页面加载时运行，则在 body 标记中有 onload。

```
<body onload="alert('page loaded')"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T16:21:20.760

您可以在`<body>`标签上执行此操作：

```
<body onload="alert('page loaded')">
    ...
</body> 
```

锚标记有一个`onclick`事件，当单击锚时会触发该事件。但是如果你想在加载目标页面时执行一些javascript，那么你需要修改这个目标页面并订阅标签`onload`上的事件。`<body>`或者不显眼地做：

```
<script type="text/javascript">
    window.onload = function() {
        alert('page loaded');
    };
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T16:22:03.807

简单的回答，这是不可能的。

您可以使用标签的`onload`属性，`BODY`也可以使用 jquery。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T16:29:27.950

回答的帖子是正确的，但我想知道您是否熟悉 jquery for java script..？文件。Ready 处理程序在 DOM 已加载并准备就绪时执行

[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

# javascript - Javascript：使用不同类型的输入自动计算总和

> ID：12439056
> 
> 赞同：-1
> 
> 时间：2012-09-15T16:19:24.073
> 
> 标签：javascript, sum

我有一个 ajax 代码，它的概念是[使用 javascript 自动计算输入值的总和](https://stackoverflow.com/questions/3133264/auto-calculate-the-sum-of-input-values-with-javascript)。所以我想添加更多字段来满足我的需求。然后我添加了一些具有给定值的输入[复选框]。这个想法是在选中该框时。它的值将被计算到进程中，就像在 input[text] 中输入一样。

这是代码：

```
<script language="javascript">
function AddInputs()
{
    var total = 0;
    var coll = document.getElementsByTagName("input")
    for ( var i = 0; i<coll.length; i++)
    {
        var ele = coll[i];
        total += parseInt(ele.value);
    }
    var Display = document.getElementById("Display");
    Display.innerHTML = total;
}
</script> 
```

这是表格：

```
<input onkeyup="AddInputs()" />
<input onkeyup="AddInputs()" />
<input onkeyup="AddInputs()" />
<input type="checkbox" onkeyup="AddInputs()" value="100" />
<span id="Display"></span> 
```

问题是我无法使用这些输入框来计算复选框。请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T16:22:15.847

这是因为`onkeyup`当您释放键盘上的键时会触发事件，而当您单击复选框时不会发生这种情况。您应该使用其中一个`onchange`（但这在较旧的 IE 中不起作用）或`onclick`.

另请注意， 的值`100`将始终添加到`total`. 如果您只想在选中复选框时才计算复选框，请使用类似

```
if (ele.type !== 'checkbox' || ele.checked) {
    total += parseInt(ele.value);
} 
```

# jquery - jquery在页面上滚动

> ID：12439057
> 
> 赞同：0
> 
> 时间：2012-09-15T16:19:35.270
> 
> 标签：jquery

我想创建这种效果：-我在网站上有一些绝对位置的 div（只有第一个是可见的），并且在某些事件中，我希望该窗口将滚动到第二个 div（而不是第三个、第四个 ..）

什么 jquery 方法最适合它？因为只有动画并不酷我认为可能是 margin-left 或一些滚动

感谢您的帮助。（如果您知道某些网站在哪里有这种效果，请写信给我）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:55:29.850

真的没有其他方法可以在不使用 javascript 的情况下使页面滚动。您可以使用锚标签捕捉到某个位置，但如果您正在寻找平滑滚动，那么 JavaScript 是您的最佳选择。使用 jquery ui 为滚动设置动画是您轻松实现的最佳选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T18:02:53.057

我认为您正在寻找*内容滑块*插件。由于您使用了*jQuery*标签，我猜您正在使用这个库。因此，您应该快速浏览一下：

*   [bx滑块](http://bxslider.com/)
*   [尴尬的展示](http://www.awkwardgroup.com/sandbox/awkward-showcase-a-jquery-plugin/)

# paperclip - GET 上的回形针路由错误 - 图像显示为损坏

> ID：12439059
> 
> 赞同：2
> 
> 时间：2012-09-15T16:19:51.483
> 
> 标签：paperclip

我在本地开发环境中遇到了一个奇怪的回形针问题。我似乎能够很好地上传图像，因为我转到我的公共文件夹并且文件确实在那里并且它没有损坏。但是，当我尝试在 VIEW 中查看它时，图像已损坏。当我查看源代码时，路径会指向确切的文件位置。

所以我想知道，我是否需要一些特别的东西来在我的开发环境中“提供”这些图像？我已阅读有关 Paperclip 需要 ImageMagick 的信息，因此我安装了它。但我从来没有做过任何事情让他们互相交谈（除非这只是自动发生的）。

我得到的确切错误是：

```
ActionController::RoutingError (No route matches [GET] "/system/taskfiles/taskfi
les/000/000/001/original/Forum_announcement_header.jpg"): 
```

因此，如果在我的计算机上进入我的应用程序文件夹，然后进入 /public/system/taskfiles/taskfiles......jpg 文件确实存在。

我已经搜索了 HOURS 的答案，但没有人遇到同样的问题。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T19:42:27.097

你能告诉你如何将图像包含到你的视图中吗？

我想下载文件时遇到了同样的问题，但[这篇文章](http://thewebfellas.com/blog/2009/8/29/protecting-your-paperclip-downloads)帮助我解决了这个问题。

# ruby-on-rails - 奇怪的不能批量分配受保护的属性错误

> ID：12439061
> 
> 赞同：0
> 
> 时间：2012-09-15T16:20:01.373
> 
> 标签：ruby-on-rails, ruby-on-rails-3

使用 Rails 3。按道理，我不应该需要声明`attr_accessible :rating, :review, :user`，但如果我不这样做，评论表单会返回 error `Can't mass-assign protected attributes error :rating, :review, :user`。`:user`出于安全原因，我不想公开全部内容。我做错了什么？

```
# review.rb

class Review < ActiveRecord::Base
  belongs_to :reviewable, :polymorphic => true, :counter_cache => true
  belongs_to :user, :counter_cache => true

  attr_accessible :rating, :review, :user

  validates :review, :presence => true, :length => { :minimum => 2, :maximum => 500 }
  validates :rating, :inclusion => { :in => ApplicationConstants::RATINGS.collect(&:first) }  
end

# reviews_controller.rb

class ReviewsController < ApplicationController
  before_filter :find_reviewable

  def create
    @review = @reviewable.reviews.new(params[:review].merge(:user => current_user))
    if @review.save
      flash[:success] = 'Thanks for adding your review.'
      redirect_to @reviewable
    else
      flash[:error] = 'Error, try again.'
      redirect_to @reviewable
    end
  end

  ...

  private

  def find_reviewable
    resource, id = request.path.split('/')[1, 2]
    @reviewable = resource.singularize.classify.constantize.find(id)
  end
end

# user.rb

class User < ActiveRecord::Base
  has_many :reviews, :as => :reviewable
end

# reviews/_form.html.erb

<%= form_for [@reviewable, @review] do |f| %>
  <div id="rating_buttons" class="btn-group" data-toggle-name="review[rating]" data-toggle="buttons-radio">
    <% ApplicationConstants::RATINGS.each do |rating| %>
      <button type="button" class="btn<%= active(@review.rating, rating[0]) %>" value="<%= rating[0] %>"><%= rating[1] %></button>
    <% end %>
  </div>
  <%= f.hidden_field :rating %>
  <%= f.text_area :review, :class => 'input-xxlarge', :rows => '3' %><br>
  <%= f.submit 'Submit', :class => 'btn btn-primary' %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:07:27.007

您应该使 :rating 和 :review 可访问。为什么需要使用户可访问？如果您只是想保存用户的评论（当然是在他登录时），那么您可以从控制器传入用户的 id，我看到您在 create 方法中已经完成了。

如果您还有其他想要实现的目标，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T18:07:59.000

使用[assign_attributes](http://apidock.com/rails/ActiveRecord/Base/assign_attributes) 通过传入属性哈希来设置特定批量分配安全角色的所有属性

```
user = User.new
user.assign_attributes({ :name => 'Josh', :is_admin => true }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T12:17:44.463

关于这个[问题](https://stackoverflow.com/questions/7128214/rails-3-how-to-add-user-id-current-user-id-assotiations)，我通过发布以下内容进行了修复：

```
class ReviewsController < ApplicationController
  ...

  def create
    @review = @reviewable.reviews.new(params[:review])
    @review.user_id = current_user.id
    ...
  end
end 
```

通过这样做，`user`模型不需要被声明为可批量赋值的。

# java - 将 JComponent 相关类分组在同一个包中是否正确？

> ID：12439072
> 
> 赞同：1
> 
> 时间：2012-09-15T16:22:04.103
> 
> 标签：java, swing, package

我有一个主包“UI”，其中有我的 Swing 应用程序的所有类。

在这个包中，我扩展了 JTree、JTable 和更多组件，还为它们制作了一些自定义渲染器、自定义模型。

可以将与 JComponent 相关的几个类分组到自己的包中吗？

例如 ：

*   `package ui.CustomTable`
    *   `CustomJTable`
    *   `CustomJTableModel`
    *   `JTableColumnRenderer`
*   `package ui.MYJList`
    *   `MYJList`
    *   `MyJListModel`
    *   `MyJListCellRenderer`

我是软件工程的新手，这是我的第一份工作，我问你是因为我“害怕”破坏任何 OOP 代码约定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T22:24:38.837

> 可以将与 JComponent 相关的几个类分组到自己的包中吗？

当然。事实上，在适当的包中包含 Swing 类是非常有利的，尤其是在使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)部署时。

JWS 可以为每个 Jar 组织下载、更新和安全级别，因此如果每个包都在一个 Jar 中，这意味着每个包仅在需要时才被下载和缓存、更新或检查有效的数字签名/安全级别**。**

另请注意，当管理层决定应用程序时，渲染器（或 PLAF）可能比其他组件更频繁地更改。需要“不同、更现代（比 4 个月前）的外观”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T18:16:29.100

作为一般指南，您可以查看要子类化的标准组件的包结构并将其映射到您自己的结构。你可以像这样使用类：

```
ui.CustomTable
ui.CustomList
ui.CustomListModel
ui.table.CustomTableColumnRenderer 
```

类名最好有一致的命名约定。

# sql-server-2008 - SQL树中的多重递归

> ID：12439073
> 
> 赞同：1
> 
> 时间：2012-09-15T16:22:07.110
> 
> 标签：sql-server-2008, tree, common-table-expression

我正在使用 SQL Server 2008。我有一个表，其中详细说明了用户对具有两列的组的访问 -`userid int`和`groupid int`（我们称之为`tbl_access`）。每个用户都可以访问树中任何级别的多个组。

还有第二个组表定义了一个包含三列的树结构 - `groupid int`, `groupfather int`, groupname nvarchar(32) （顶级组的值为 -1 `groupfather`） - 我们称之为`tbl_groups`。

我正在尝试编写一个给定 a`userid`的函数，该函数将查找用户可以访问的所有组`tbl_access`，然后对于每个组，它将找到所有子节点，并返回用户所有组的组合不同列表可以访问）。

我曾尝试使用 CTE，但这只能让我获得一个组的所有子节点，而不是所有组的所有子节点。

我现在拥有的是：

```
CREATEFUNCTION [DBO].[FUNC_ALL_CHILDGROUPS] (@GROUPID INT)
RETURNS TABLE
AS
RETURN (
    WITH ALLGROUPS (GROUPID, GROUPFATHER) AS 
    (
        SELECT GROUPID, GROUPFATHER 
        FROM 
            TBL_GROUPS 
        WHERE GROUPID = @GROUPID 

        UNION ALL 

        SELECT TBL_GROUPS.GROUPID, TBL_GROUPS.GROUPFATHER 
        FROM 
            TBL_GROUPS 
            INNER JOIN ALLGROUPS 
            ON TBL_GROUPS.GROUPFATHER = ALLGROUPS.GROUPID
    )
SELECT * FROM ALLGROUPS 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T10:23:21.743

您可以使用递归 CTE，对于您的函数，您可以使用以下查询：

```
DECLARE @tbl_access TABLE (userid INT, groupid INT)
DECLARE @tbl_groups TABLE (groupid INT, groupfather INT)

INSERT  @tbl_access 
VALUES 
(1, 2),
(1, 3),
(2, 1),
(2, 4)

INSERT  @tbl_groups
VALUES  
(1, -1),
(2, 1),
(3, -1),
(4, 2),
(5, 4)

DECLARE @UserID INT = 1

;WITH cte AS (

    SELECT  a.*
    FROM    @tbl_groups a
    JOIN    @tbl_access c ON
            c.userid = @UserID
    AND     c.groupid = a.groupid

    UNION   ALL

    SELECT  b.*
    FROM    @tbl_groups b
    JOIN    cte d ON
            d.groupid = b.groupfather
)

SELECT  DISTINCT groupid
FROM    cte 
```

# python - 如何拆分句子，只让 ascii 字符

> ID：12439076
> 
> 赞同：2
> 
> 时间：2012-09-15T16:22:45.023
> 
> 标签：python, regex, mongodb, search

我想拆分一个句子以将单词转换为标签（以在其中进行简单的全文搜索`Mongodb`），并且我不想保存逗号或冒号：

```
phrase = "hello, this is a simple description!"
pattern  = "[\"\'\!\?\:\,\;]" 
```

我试过这个：

```
re.split(pattern, phrase)
Out[1]: ['hello', ' this is a simple description', ''] # as you can see, i've always blank characters. 
```

我想删除所有“非字母字符”，`phrase.replace(",", " ")`但只替换一个字符，那么如何使用正则表达式替换？sssomething之类`re.remove(pattern, phrase)`的，是否有循环，这对服务器来说是一项繁重的工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T16:27:03.827

`non-regex`解决方案：使用`strip()`，但您需要将所有非字母字符传递给它。

就像是：`strip(',!*&^%#$;:+')`

```
In [12]: phrase = "hello, this is: a simple; description!!"
In [13]:  [x.strip(',!*&^%#$;:+') for x in phrase.split()]

Out[13]: ['hello', 'this', 'is', 'a', 'simple', 'description'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T16:26:21.510

如果您拆分非单词字符`\W`，则应该只留下一组单词。

# java - 用于 Java 的 JTidy 或 Jsoup

> ID：12439078
> 
> 赞同：7
> 
> 时间：2012-09-15T16:23:20.957
> 
> 标签：java, screen-scraping, web-scraping, web-crawler

最近我一直在用 BeautifulSoup 在 python 中开发网络爬虫。现在我想知道在 Java 中哪些库是最受欢迎的。我做了一些搜索，主要是看到 JTidy 和 JSoup。它们之间有什么区别？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-15T16:32:44.030

`JTidy`更常用于*整理*HTML，即*修复*格式错误或错误的 HTML，例如未闭合的标签，例如 from`<div><span>text</div>`到`<div><span>text</span></div`.

`JSoup`另一方面，它提供了一个完整的 API 来解析 HTML并**提取***其中*的一部分。它允许您使用类似 jQuery 的[选择器](http://jsoup.org/cookbook/extracting-data/selector-syntax)来查找元素或[`DOM`方法](http://jsoup.org/cookbook/extracting-data/dom-navigation)，这与您在 JavaScript 中使用的方法相同，例如`getElementById`. 我想说JSoup 确实是Java 的BeautifulSoup 等价物。

例如，要使用 JSoup 提取 Wikipedia 文章的第一段，您可以使用以下命令：

```
String url = "http://en.wikipedia.org/wiki/Potato";
Document doc = Jsoup.connect(url).get();
Elements paragraphs = doc.select(".mw-content-ltr p");
String firstParagraph = paragraphs.first().text(); 
```

或者从这个自己的问题中提取标题：

```
Document doc = Jsoup.connect("http://stackoverflow.com/questions/12439078/jtidy-or-jsoup-for-java").get();
String question = doc.select("#question-header a").text(); // JTidy or Jsoup for Java 
```

相当不错的 API，嗯？:-)

# php - 确保页面仅显示在 iframe 中

> ID：12439079
> 
> 赞同：0
> 
> 时间：2012-09-15T16:23:43.770
> 
> 标签：php, javascript, html, facebook

我有一个通过 iframe 显示为 facebook pagetab 的页面。如何确保页面按预期显示在 iframe 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T16:28:23.593

你的意思是

if (top==self) location.replace("iframewrapper.html?loc="+escape(location.href))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T16:31:15.650

你不能总是确保，因为你的用户总是可以欺骗浏览器，它就是你想要的。但是你可以试试这个：

```
if (window!=window.top) { /* In a frame! */ }
else { /* probably reload page and redirect to the page embedding the iframe */ } 
```

# c# - 将本地组添加到 C# 中 AD LDS 分区中的 CN=Readers,CN=Roles

> ID：12439081
> 
> 赞同：0
> 
> 时间：2012-09-15T16:24:32.473
> 
> 标签：c#, active-directory, adlds

我在 Windows 7 上使用 AD LDS，并使用 adaminstall 实用程序创建了一个带有新应用程序分区的本地实例。

如何将现有的本地 Windows 组添加到此分区的 Readers 角色？

我想通过以下手动步骤以编程方式（在 C# 中）实现相同的结果：

1.  启动 ADSI Edit 并连接到 AD LDS 实例和分区。
2.  导航到分区根节点下的 CN=Readers。
3.  双击 CN=Readers 条目。
4.  双击“成员”属性。
5.  选择并添加现有的本地 Windows 组。

我已经有以下 C# 代码：

```
public void AddReader(string partitionName, string accountName)
{
  var ntAccount = new NTAccount(accountName);
  var securityIdentifer = ntAccount.Translate(typeof(SecurityIdentifier));
  var accountNameDN = string.Format("CN={0},CN=ForeignSecurityPrincipals,{1}", securityIdentifer.Value, partitionName);

  var rootPath = string.Format("LDAP://localhost:389/CN=Readers,CN=Roles,{0}", partitionName)
  var directoryEntry = new DirectoryEntry(RootPath);
  directoryEntry.Properties["member"].Add(accountNameDN);
  directoryEntry.CommitChanges();
} 
```

仅当使用上述手动步骤将本地组至少添加一次到 Readers 角色时，此代码才有效。如果我手动添加组然后手动删除它，上面显示的代码可用于再次重新添加组。

但是当我尝试添加一个新的本地 Windows 组时，`CommitChanges()`上面代码中的调用会抛出一个`DirectoryServicesCOMException`错误代码`0x8007002F`和消息`A constraint violation occurred`。

显然，手动步骤对现有的本地 Windows 组进行了一些修改，使其适合添加到 AD LDS 读者角色。但我错过了什么？

我认为必须有比我使用`ActiveDirectorySecurity`and`ActiveDirectoryAccessRule`类的方法更好的方法，但我不知道如何使用它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T05:29:59.693

我的猜测是，在您的配置中，在您将 SID 添加到至少某个角色之前，该主体没有 FSP，因此 SID 对其的引用将失败。

您是否尝试过通过 SID 将主体添加到组中，例如如何将其添加到读者组？如果您想弄清楚内部工具是如何做到这一点的，请在您使用的任何工具和 LDS 实例之间对 LDAP 调用进行网络嗅探，然后将其添加到读者组......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:31:02.347

感谢 Eric 关于 FSP（外国安全负责人）的提示，我们（Google 和我）在这里找到了解决方案：[http ://www.pcreview.co.uk/forums/add-group-members-trusted-domain-programmatically-t1460084 .html](http://www.pcreview.co.uk/forums/add-group-members-trusted-domain-programmatically-t1460084.html)（向下滚动到 Joe Kaplans 的答案）。

诀窍是使用`<SID=xxx>`accountNameDN 变量的语法。如果按如下方式修改 accountNameDN 变量，我的原始问题中的代码示例将起作用：

```
var accountNameDN = string.Format("<SID={0}>", securityIdentifer.Value); 
```

这将隐式添加所需的 FSP。

# qt - QGraphicsScene::clear() 清除场景但不清除视图

> ID：12439082
> 
> 赞同：4
> 
> 时间：2012-09-15T16:24:37.883
> 
> 标签：qt, debugging, qgraphicsview, qgraphicsitem, qgraphicsscene

我使用`Configuration`派生自的自定义类 () `QGraphicsItem`，并将其对象添加到 a`QGraphicsScene`中，然后将其显示在 a 中`QGraphicsView`。平常的东西。我正在做的是画一棵树，分多个步骤，一步一步，每个节点都是我的自定义`QGraphicsItem`。

![在此处输入图像描述](../Images/77915649801f091c41faaa41098fe86b.png)

这里是截图。在简单的情况下，树恰好是顺序的。

我首先绘制根节点。用户输入字符串后触发的触发信号。

```
void MainWindow::drawRootSlot(ConfigTreeBuilder & builder)//this is a slot
{
    c_scene->clear();  //the clear cause headache. i'll expain

    Configuration* conf = new Configuration(builder.getNodesX(), builder.getNodesY(),builder.getNodesConfig());
//code
    c_scene->addItem(conf);
//code
} 
```

每个后续`Configuration`都在另一个插槽内绘制。

```
void MainWindow::configTreeSlot(ConfigTreeBuilder & builder)    //SLOT!!!
{
    while(builder.chooseNextNode()) {

        Configuration* conf = new Configuration(builder.getNodesX(), builder.getNodesY(), builder.getNodesConfig());

       //code, while loop    
            QGraphicsLineItem *edge = c_scene->addLine(QLineF(*(parentsPoint), conf->getLeftOrigin()));
            edge->setZValue(-1); //below the Configuration item

        c_scene->addItem(conf);
    }

} 
```

第一次完成时一切正常。当我输入一个新字符串并重置树时，就会发生黑魔法。我期望它做的是：调用`drawRootSlot()`，删除整个树（`c_scene->clear()`），绘制一个新的根节点。而且，如果我在其中放置一个调试器断点，`drawRootSlot()`这正是发生的事情！但是当我运行它（没有断点）时，我得到的是：

![在此处输入图像描述](../Images/3dcfc3f9228a661b4b2f3e3b35fad98a.png)

前一棵树被破坏了，但没有被删除。场景确实清除了它的项目（打印出来），但视图并没有反映这一点。`drawRootSlot()`但是同样，当我在视图中放置一个断点时，场景是同步的。

我试图删除场景对象，并创建一个新对象而不是调用`c_scene->clear()`，以确保它为空。然后更改会反映在视图上（第一次绘图总是有效）。

所以，我不知道从这些症状中推断出什么。它使用断点或新`QGraphicsScene`对象按预期工作。仅在使用时不会`c_scene->clear()`。有人可以说我只是弄乱了父对象/子对象的关系，但`clear()` *确实*从视图中删除了项目......我试着在`c_scene->addItem()`.

这是什么法术？让我相信我实际上并不愚蠢？

**编辑：**有趣并且可能暗示真正问题的是，当`c_scene->clear()`被调用时，树的边缘，即正常`QGraphicsLineItem`的 s，在所有情况下（断点与否）都确实被删除了。与他们*不习惯*有关吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T09:52:45.790

好的，在解决我的问题`QGraphicsView::viewport().update()`后打电话。`QGraphicsScene::clear()`

但是有人对上述行为有解释吗？

**编辑**：在做其他事情时，我偶然发现了问题的实际核心：我弄乱了`boundingRect()`我的 GraphicItems，所以它位于可见项目下方，仅触及其下边缘（如屏幕截图所示，已被删除）。所以现在不需要调用任何`update()`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T15:49:44.673

我认为，当您为图形视图调用此[fitInView()](http://qt-project.org/doc/qt-4.8/qgraphicsview.html#fitInView)时，它会从先前场景中剩余的任何工件中清除视图。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-11-15T16:14:38.737

您可以清除场景和图形视图

```
scene->clear();
ui->graphicsView->items().clear(); 
```

graphicsView = 图形视图的名称

此代码将删除场景和图形视图

# javascript - 在 javascript 中使用 setInterval() 时的程序控制流程

> ID：12439084
> 
> 赞同：1
> 
> 时间：2012-09-15T16:24:49.450
> 
> 标签：javascript, setinterval

`setInterval()`在Javascript中 使用时，我真的不明白程序的控制流程。
如果我们将一个需要 100ms 时间的函数作为参数传递给`SetInterval()`方法，时间为 20ms，如下所示

```
 setInterval(function{
                      for(var i=0;i<1000000;i++)
                           console.log(i)
                           },20); 
```

当`setInterval()`20 毫秒后再次调用它时，会发生什么？
谢谢 :)

***添加***：简单循环和使用 setInterval 循环和使用 clearInterval 停止之间的主要区别是什么？
检查这个[http://www.sitepoint.com/multi-threading-javascript/](http://www.sitepoint.com/multi-threading-javascript/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T16:28:31.853

首先让我们从修复您的 javascript 开始，因为您缺少一些右括号：

```
setInterval(function() {
    for(var i = 0; i < 1000000; i++) {
        console.log(i);
    }
}, 20); 
```

这相当于以下内容：

```
function loopAndDump() {
   for(var i = 0; i < 1000000; i++) {
       console.log(i);
    }
}

setInterval(loopAndDump, 20); 
```

或者：

```
setInterval(function() { loopAndDump(); }, 20); 
```

现在更容易理解发生了什么：该`loopAndDump`函数每隔 20 毫秒定期调用一次。这个函数简单地从 0 循环到 1000000 并将计数器转储到控制台。如果你想阻止这个进程定期执行函数，你可以使用[stopInterval](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)函数并将 setInterval 函数返回的结果作为参数传递。

如果你只想执行一次函数，那么你可以使用[setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)方法：

```
setTimeout(function() {
    for(var i = 0; i < 1000000; i++) {
        console.log(i);
    }
}, 20); 
```

现在循环将只执行一次，在 javascript 解释器到达 setTimeout 行后 20 毫秒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T16:49:15.880

`setInterval`是一个 Javascript 计时器。永远记住：在 Javascript 中，定时器延迟是不能保证的。由于浏览器中的所有 JavaScript 都在单个线程上执行，因此异步事件仅在执行中有空位时运行。

```
var some_function = function() { 
    for (var i=0; i < 1000000; i++) { 
        console.log(i); 
    } 
};
setInterval(some_function, 20); 
```

执行此示例时，JavaScript 启动计时器并在 20 毫秒内执行`some_function`

假设它需要 100 毫秒`some_function`才能完成，那么当函数完成执行后大约 100 毫秒会发生什么，JavaScript 会环顾四周，看看等待执行的内容。

它会发现在`setInterval`开始执行后约 20 毫秒，收到了另一个执行请求`some_function`（由 设置的计时器`setInterval`）。在收到命令时，由于 JavaScript 正忙于运行，因此无法执行`some_function`。

由于没有任何东西阻止`setInterval`操作发生，JavaScript 将重新执行它。自 setInterval 计时器启动以来已过去约 120 毫秒，您`some_function`显然将连续执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T16:34:40.893

20 毫秒后不会再次调用它。

Javascript 是严格的单线程的，所以只要你的函数在运行，就不会处理任何事件。间隔计时器将在 20 毫秒后触发一个事件，但在您的函数完成之前不会处理它。

# java - Play2Torial + Play 2.0.3 + Heroku + Postgresql -- 无法在 push 上构建

> ID：12439085
> 
> 赞同：1
> 
> 时间：2012-09-15T16:24:50.400
> 
> 标签：java, scala, heroku, build, playframework-2.0

通过 James Ward 的[Play2Tutorial](https://github.com/jamesward/play2torial/blob/master/JAVA.md)，我完成了最后一步，添加 Postgresql 数据库并推送到 Heroku。

我根据他的建议编辑了 Build.scala 文件：

```
val appDependencies = Seq(
    "com.github.twitter" % "bootstrap" % "2.0.2",
    "postgresql" % "postgresql" % "9.1-901-1.jdbc4"
  ) 
```

并修改了我的 Procfile：

```
web: target/start -Dhttp.port=${PORT} -DapplyEvolutions.default=true -Ddb.default.driver=org.postgresql.Driver -Ddb.default.url=$DATABASE_URL ${JAVA_OPTS} 
```

编译器在 localhost 上没有返回任何错误，Heroku postgresql 似乎添加得很好，但是“git push heroku master”在最后一刻失败了：

```
[info] Resolving org.scala-sbt#precompiled-2_9_2;0.11.3 ...
   [info] Done updating.
   [info] Compiling 1 Scala source to /tmp/build_3r8l8m531s747/.sbt_home/.sbt/plugins/target/scala-2.9.1/sbt-0.11.3/classes...
   [info] Loading project definition from /tmp/build_3r8l8m531s747/project
   [error] /tmp/build_3r8l8m531s747/project/Build.scala:12: ')' expected but string literal found.
   [error]         "postgresql" % "postgresql" % "9.1-901-1.jdbc4"
   [error]         ^
   [error] one error found
   [error] {file:/tmp/build_3r8l8m531s747/project/}default-f03173/compile:compile: Compilation failed
   Project loading failed: (r)etry, (q)uit, (l)ast, or (i)gnore?  !
Failed to build app with sbt!
Heroku push rejected, failed to compile Play 2.0 - java app

To git@heroku.com:********
! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:********' 
```

该代码是文字复制和粘贴，我之前已经使用过它（已经完成了本教程，没有发生任何事故）。

希望您能提供任何建议。

谢谢，芯片

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T08:53:18.710

Looks like the separating comma of your dependencies in Build.scala file is not found on Heroku. Are you sure you have pushed the latest version of the Build.scala file to Heroku?

# javascript - highchart 获取系列颜色和标记

> ID：12439091
> 
> 赞同：8
> 
> 时间：2012-09-15T16:25:11.073
> 
> 标签：javascript, colors

我想在我显示数据的表格旁边显示折线图系列的颜色和标记。我没有手动设置颜色。

如何通过 JavaScript 获取系列颜色和标记？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-15T20:55:20.077

您可以使用以下内容：

```
var clr0 = chart.series[0].color;
var mrk0 = chart.series[0].symbol; 
```

这是关于[jsfiddle](http://jsfiddle.net/GSMU5/)的示例。

# ios - iOS，在表格视图的每一行中添加新的核心数据对象

> ID：12439097
> 
> 赞同：0
> 
> 时间：2012-09-15T16:26:05.347
> 
> 标签：ios, xcode, uitableview, core-data, nsmanagedobject

我试图在表视图中添加一个新的核心数据对象，并尝试用一个新数字命名每一行。类似于 Xcode 中的 Master Detail 模板，但带有数字而不是日期。它应该以 1 开头，然后是 2、3、4、5 等。但它目前添加了对象，但只显示数字 1。也许这是我在逻辑上犯的一个简单错误，有人可以指出和帮助？这是代码：

```
-(void)addNewRow {
 // Create and configure a new instance of the Event entity.
    Hoyo *hoyo = (Hoyo *)[NSEntityDescription insertNewObjectForEntityForName:@"Hoyo" inManagedObjectContext:context];

//Here I am trying to get the current value in the object which is 0
NSNumber *coreNumber = [NSNumber numberWithInt:[[hoyo numero]integerValue]];// 0

NSNumber *myNum = [[NSNumber alloc]initWithInt:0];//0
int currentNumber = [coreNumber integerValue] + 1;//0 +1 = 1
NSNumber *newNum = [[NSNumber alloc]initWithInt:currentNumber];

NSLog(@"El numero de hoyo es: %@", [hoyo numero]);

if (([[hoyo numero] isEqualToNumber:coreNumber]) || ([[hoyo numero] isEqualToNumber:myNum])) {

    [hoyo setNumero:newNum];
    [array insertObject:hoyo atIndex:0];
} 

NSError *error = nil;
if (![context save:&error]) {
    // Handle the error.
}

NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];

[self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                      withRowAnimation:UITableViewRowAnimationFade];
[self.tableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0] atScrollPosition:UITableViewScrollPositionTop animated:YES];

} 
```

# c++ - 使用 Boost 的进程间读写器锁

> ID：12439099
> 
> 赞同：8
> 
> 时间：2012-09-15T16:26:11.853
> 
> 标签：c++, boost, boost-interprocess

在解释如何使用 Boost 实现读取器/写入器锁时，[这个线程是黄金。](https://stackoverflow.com/questions/989795/example-for-boost-shared-mutex-multiple-reads-one-write)它看起来相对简单，我真的很喜欢它，但它似乎也使用了一个未命名的锁，我需要一个进程间解决方案（不需要是可移植的，可以是 Windows-only）。

有没有办法有一个进程间`shared_mutex`？我看到有一个[`named_mutex`](http://www.boost.org/doc/libs/1_35_0/doc/html/boost/interprocess/named_mutex.html)，但我无法让它与[`shared_lock`](http://www.boost.org/doc/libs/1_35_0/doc/html/thread/synchronization.html#thread.synchronization.locks.shared_lock)其他锁一起使用。

任何指针表示赞赏。

[编辑]

与此同时，我遇到了这个几乎击中钉子的[线程。](https://stackoverflow.com/questions/4157491/is-there-an-upgrade-to-unique-lock-for-boostinterprocess-resolved)我有两个问题：

1.  它没有显示完整的代码（我猜我需要使用`named_upgradable_mutex`，但我不太确定）和
2.  我不喜欢修改后的“writer”的答案，它不使用在析构函数中解锁的现成类，而是对互斥锁进行 3 次原始调用的序列。

仍然欢迎评论或好的解决方案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-15T22:20:59.297

Boost.Interprocess 文档描述了它支持的所谓的[可升级互斥](http://www.boost.org/doc/libs/1_51_0/doc/html/interprocess/synchronization_mechanisms.html#interprocess.synchronization_mechanisms.upgradable_mutexes)锁以及两种支持的可升级互斥锁类型的[可升级互斥锁操作：](http://www.boost.org/doc/libs/1_51_0/doc/html/interprocess/synchronization_mechanisms.html#interprocess.synchronization_mechanisms.upgradable_mutexes.upgradable_mutexes_operations)

*   [`boost::interprocess::interprocess_upgradable_mutex`](http://www.boost.org/doc/libs/1_51_0/doc/html/boost/interprocess/interprocess_upg_id1004155.html)，一个非递归的、匿名的、可升级的互斥体，可以放置在共享内存或内存映射文件中。
*   [`boost::interprocess::named_upgradable_mutex`](http://www.boost.org/doc/libs/1_51_0/doc/html/boost/interprocess/named_upgradable_mutex.html)，一个非递归的、命名的可升级互斥体。

**编辑：**我相信这有效：

```
#include <iostream>
#include <string>
#include <unistd.h>

#include <boost/scope_exit.hpp>
#include <boost/interprocess/mapped_region.hpp>
#include <boost/interprocess/shared_memory_object.hpp>
#include <boost/interprocess/sync/interprocess_upgradable_mutex.hpp>
#include <boost/interprocess/sync/scoped_lock.hpp>
#include <boost/interprocess/sync/sharable_lock.hpp>
#include <boost/interprocess/sync/upgradable_lock.hpp>

// http://stackoverflow.com/questions/12439099/interprocess-reader-writer-lock-with-boost/

#define SHARED_MEMORY_NAME "SO12439099-MySharedMemory"

struct shared_data {
private:
    typedef boost::interprocess::interprocess_upgradable_mutex upgradable_mutex_type;

    mutable upgradable_mutex_type mutex;
    volatile int counter;

public:
    shared_data()
        : counter(0)
    {
    }

    int count() const {
        boost::interprocess::sharable_lock<upgradable_mutex_type> lock(mutex);
        return counter;
    }

    void set_counter(int counter) {
        boost::interprocess::scoped_lock<upgradable_mutex_type> lock(mutex);
        this->counter = counter;
    }
};

int main(int argc, char *argv[])
{
    using namespace boost::interprocess;

    if (argc != 2) {
        std::cerr << "Usage: " << argv[0] << " WHICH" << std::endl;
        return 1;
    }

    const std::string which = argv[1];
    if (which == "parent") {
        shared_memory_object::remove(SHARED_MEMORY_NAME);
        shared_memory_object shm(create_only, SHARED_MEMORY_NAME, read_write);

        BOOST_SCOPE_EXIT(argc) {
            shared_memory_object::remove(SHARED_MEMORY_NAME);
        } BOOST_SCOPE_EXIT_END;

        shm.truncate(sizeof (shared_data));

        // Map the whole shared memory into this process.
        mapped_region region(shm, read_write);

        // Construct the shared_data.
        new (region.get_address()) shared_data;

        // Go to sleep for a minute.
        sleep(60);

        return 0;
    } else if (which == "reader_child") {
        shared_memory_object shm(open_only, SHARED_MEMORY_NAME, read_write);

        mapped_region region(shm, read_write);
        shared_data& d = *static_cast<shared_data *>(region.get_address());

        for (int i = 0; i < 100000; ++i) {
            std::cout << "reader_child: " << d.count() << std::endl;
        }
    } else if (which == "writer_child") {
        shared_memory_object shm(open_only, SHARED_MEMORY_NAME, read_write);

        mapped_region region(shm, read_write);
        shared_data& d = *static_cast<shared_data *>(region.get_address());

        for (int i = 0; i < 100000; ++i) {
            d.set_counter(i);
            std::cout << "writer_child: " << i << std::endl;
        }
    }
} 
```

我在 Mac 上使用以下脚本进行了尝试：

```
#!/usr/bin/env sh
./a.out reader_child &
./a.out reader_child &
./a.out writer_child &
./a.out reader_child &
./a.out reader_child & 
```

（您必须先启动父级`./a.out parent`：）

输出显示“reader_child”和“writer_child”行的交错（所有“reader_child”行在第一个“writer_child”行之后显示非零值），因此它似乎正在工作。

# mysql - Regexp - 反向引用，将代码从 PHP 转换为 MySQL

> ID：12439101
> 
> 赞同：0
> 
> 时间：2012-09-15T16:26:23.070
> 
> 标签：mysql, sql, regex

我有一个在 PHP 中有效的正则表达式，但不是 MySQL REGEXP 函数。

```
'(.)\1{2,}' 
```

在 PHP 中，这匹配任何重复 2 次或更多次的字符，我如何将其翻译为与 MySQL 函数一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T16:31:22.547

对不起，你不能。MySQL 使用不支持反向引用的 POSIX 正则表达式。如果必须在 MySQL 中执行此类匹配，则唯一的选择是安装 UDF，例如[lib_mysqludf_preg](http://www.mysqludf.org/lib_mysqludf_preg/)。

# gzip - Apache 上的 HTTP 压缩不是 100%（在 Dreamhost 上）

> ID：12439108
> 
> 赞同：1
> 
> 时间：2012-09-15T16:27:34.207
> 
> 标签：gzip, apache, dreamhost, mod-deflate

我正在尝试在 lavenderdiamond.net/home 网站上进行 gzip 压缩。我已将以下代码添加到我的 .htaccess 中，但在我的网站上提供的所有文件都没有被压缩。我还检查了是否在服务器上启用了 mod_deflate 并且确实如此。这是代码：

```
# ----------------------------------------------------------------------
# Gzip compression
# ----------------------------------------------------------------------

<IfModule mod_deflate.c>

  # Force deflate for mangled headers developer.yahoo.com/blogs/ydn/posts/2010/12/pushing-beyond-gzipping/
  <IfModule mod_setenvif.c>
    <IfModule mod_headers.c>
      SetEnvIfNoCase ^(Accept-EncodXng|X-cept-Encoding|X{15}|~{15}|-{15})$ ^((gzip|deflate)\s*,?\s*)+|[X~-]{4,13}$ HAVE_Accept-Encoding
      RequestHeader append Accept-Encoding "gzip,deflate" env=HAVE_Accept-Encoding
    </IfModule>
  </IfModule>

  # Compress all output labeled with one of the following MIME-types
  <IfModule mod_filter.c>
    AddOutputFilterByType DEFLATE application/atom+xml \
                                  application/javascript \
                                  application/json \
                                  application/rss+xml \
                                  application/vnd.ms-fontobject \
                                  application/x-font-ttf \
                                  application/xhtml+xml \
                                  application/xml \
                                  font/opentype \
                                  image/svg+xml \
                                  image/x-icon \
                                  text/css \
                                  text/html \
                                  text/plain \
                                  text/x-component \
                                  text/xml
  </IfModule>

</IfModule> 
```

我有一张 Dreamhost 的支持票，以防问题出在他们这边，但我想知道其他人是否在一般情况下或在 Dreamhost 上无法启用压缩。此外，我对如何调试 Apache 可能出现的问题非常缺乏经验。有没有办法在这里查看错误消息并知道这样可能出了什么问题？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T20:20:22.037

我也有这个问题。我检查了一个使用 Dreamhost 托管的旧网站，发现文件压缩正确，因此我将相关（旧）H5P .htaccess 块复制到我的新网站中，现在它可以工作了。

将“IfModule mod_filter.c”块替换为以下内容：

```
# HTML, TXT, CSS, JavaScript, JSON, XML, HTC:
<IfModule filter_module>
    FilterDeclare   COMPRESS
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/html
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/css
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/plain
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/x-component
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/javascript
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/json
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/xhtml+xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/rss+xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/atom+xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/vnd.ms-fontobject
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $image/svg+xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $image/x-icon
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/x-font-ttf
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $font/opentype
    FilterChain     COMPRESS
    FilterProtocol  COMPRESS  DEFLATE change=yes;byteranges=no
</IfModule>

<IfModule !mod_filter.c>
    # Legacy versions of Apache
    AddOutputFilterByType DEFLATE text/html text/plain text/css application/json
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE text/xml application/xml text/x-component
    AddOutputFilterByType DEFLATE application/xhtml+xml application/rss+xml application/atom+xml
    AddOutputFilterByType DEFLATE image/x-icon image/svg+xml application/vnd.ms-fontobject application/x-font-ttf font/opentype
</IfModule> 
```

# rotation - 从两个四元数和时间步长获得动量四元数

> ID：12439109
> 
> 赞同：1
> 
> 时间：2012-09-15T16:27:35.000
> 
> 标签：rotation, quaternions, delta, momentum, angular-momentum

我有一个保持物体旋转的四元数。在帧中我修改它并获得一个新的四元数。我可以计算一个从“上一帧”旋转到“当前帧”的四元数。

但是，我无法弄清楚如何“除以 t”这个四元数来获得我需要的每秒旋转。

即，基于时间步长，我需要知道如果四元数被应用到自身 X 次（即 28.5 fps 时 28.5 次等），四元数会是什么样子。

有人知道该怎么做吗？或者你会建议我做一些类似于转换为欧拉，乘以，然后转换回来的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T06:23:36.290

由于组合旋转等效于四元数乘法，因此重复旋转 X 次等效于求幂：`pow(q,X)=pow(q,1/t)`或`exp(ln(q)*X)=exp(ln(q)/t)`。[在这里](http://en.wikipedia.org/wiki/Quaternion#Exponential.2C_logarithm.2C_and_power)查看如何计算这些。

# java - 这个类/模板的使用在 Java 中意味着什么？

> ID：12439113
> 
> 赞同：0
> 
> 时间：2012-09-15T16:28:03.380
> 
> 标签：java, class, reflection

```
package MyTest;

import java.lang.reflect.*;

public class CallingMethod {
    public static void main(String[] args) {
        String firstName = new String("Deepak");
        String lastName = new String("Kumar");
        String result = new String("");

        Class<String> cls = String.class;
        Class[] parametertype = new Class[] { String.class };
        Object[] arguments = new Object[] { lastName };
        try {
            Method concatMethod = cls.getMethod("concat", parametertype);
            result = (String) concatMethod.invoke(firstName, arguments);
            System.out.println(" Concatenated String is => " + result);
        } catch (Exception e) {
            System.out.println(e);
        }
    }
} 
```

对于上面的代码，我不明白下面的部分。

```
Class<String> cls = String.class;
Class[] parametertype = new Class[] { String.class };
Object[] arguments = new Object[] { lastName }; 
```

那么是什么`String.class`意思呢？`String.class`在`new Class[] { String.class }`意味着什么？这意味着数组中的第一项是`String.class`类型？或者所有的项目都是`String.class`类型？和`new Object[] { lastName }`？这意味着数组的第一项/实例是lastName？希望得到你的专业知识！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T16:31:29.693

代码使用反射和方法调用来调用类中的`concat`方法`String`，在 object 上`firstName`，使用 arguments 参数。它类似于调用：

```
result = firstName.concat(lastName); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T16:32:18.507

*   `Class<String> cls = String.class;`是一个引用 String 类的[Class 对象。](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html)
*   `Class[] parametertype = new Class[] { String.class };`是一个 Class 对象数组，包含一个元素：`String.class`
*   `Object[] arguments = new Object[] { lastName };`也是包含一个元素的对象数组

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T16:32:31.473

> 那么 String.class 是什么意思呢？

对字符串类的引用

> 而 new Class[] { String.class } 中的 String.class 是什么意思？

一个类数组，其中有一个对字符串类的引用。

> 表示数组中的第一项是 String.class 类型？

第一个元素的类型是 Class 或`Class<String>`

> 还有新对象[] {姓氏}？这意味着数组的第一项/实例是lastName？

是的。

> 我不明白下面的部分。

看来您在所有问题上都是正确的，所以看起来您一直都是对的。

你还有别的问题吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-15T16:32:39.383

Java 中的每个对象都与一个*类型*相关联，例如*String*或*MyClass*。该*类型*本身由另一个对象实现。所以*String.class*和*MyClass.class*指的是这些类型的类对象。

# php - 管理员生成器 - 可见或不动作

> ID：12439114
> 
> 赞同：2
> 
> 时间：2012-09-15T16:28:04.793
> 
> 标签：php, symfony1, doctrine, symfony-1.4

```
config:
  list:
    object_actions:
      extend:     ~
      _edit:      ~
      _delete:    ~ 
```

仅当在同一记录中的数据库中将字段设置为 1 时才可以显示操作**扩展**？

例如：

```
config:
  list:
    object_actions:
      extend:     if(this.status == 1 then SHOW else if (this.status == 0) then NOT SHOW
      _edit:      ~
      _delete:    ~ 
```

在数据库中我有例如：

```
id | name | extend | visible
1  | aaa  |  0     | 0          
2  | bbb  |  0     | 1
3  | ccc  |  0     | 1
4  | aaa  |  0     | 0
5  | bbb  |  0     | 1
6  | ccc  |  0     | 1 
```

所以如果可见 == 1 那么应该在管理生成器中显示操作扩展

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T19:08:01.710

请记住，您可以覆盖任何自动生成的模板。也许这不是最好的方法，但这个技巧可能会多次有用。

只需浏览后端缓存生成的模板，复制到模块的模板文件夹并更改您想要的任何内容。

例如，假设您的实体名称是“ **Entity** ”，复制

*缓存/后端/开发/模块/自动**实体**/模板/_list_td_actions.php*

给你的

*应用程序/后端/模块/**实体**/模板*文件夹。

如您所见，在该文件中有一个**$entity**变量来添加您的逻辑。

# php - slim php 函数菜单 grom 数据库

> ID：12439120
> 
> 赞同：0
> 
> 时间：2012-09-15T16:28:48.477
> 
> 标签：php, slim, idiorm

我试图为网上商店生成菜单。我已经为它写了一个方法。

Slim 在第 53 行说“未定义的变量。我用**标记了该行*

班级菜单{

```
function generate_menu() {
    $menu = 'ul';
    $catergory = Model::factory('category')->find_many();

    ***foreach ($category as $item) {***
        $menu .= '<li>';
        $menu .= '<a href = "' . $item->link . '">' . $item->title . '</a>';
        $menu .= '</li>';

        $count = Model::factory('sub_category')->where('category_title', $item->title)->count();
        if ($count >= 0) {
            $sub_catergory = Model::factory('sub_category')->where('category_title', $item->title)->find_many();
            $menu .= '<ul>';
            foreach ($sub_catergory as $sub_catergory) {
                $menu .= '<li>';
                $menu .= '<a href = "' . $sub_category->link . '">' . $sub_category->title . '</a>';
                $menu .= '</li>';
            }
            $menu .= '</ul>';
        }
    }
    $menu .= '</ul>';
    return $menu;
} 
```

}

有人可以告诉我如何将此函数传递给 slim php 中的模板吗？

这是我试图将返回的 $menu 变量传递给的获取请求。

```
$app->get('/', function () use ($app) {
        $site_info = Model::factory('Site_info')->where('id', '1')->find_one();

        $app->render('front_page.php', array(
            'site_name' => $site_info->site_name,
            'site_slogan' => $site_info->site_slogan,
            'domain' => $site_info->domain
        ));
    }); 
```

如果数据库请求没有返回任何内容，也有人可以指出巴黎返回的正确方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T17:26:22.573

我创建菜单的方法：

```
Class Menu {

function generate_menu() {
    $menu = '<ul>';
    $category = Model::factory('category')->find_many();

    foreach ($category as $item) {
        $menu .= '<li>';
        $menu .= '<a href = "' . $item->link . '">' . $item->title . '</a>';
        $menu .= '</li>';

        $count = Model::factory('sub_category')->where('category_title', $item->title)->count();
        if ($count >= 0) {
            $sub_category = Model::factory('sub_category')->where('category_title', $item->title)->find_many();
            $menu .= '<ul>';
            foreach ($sub_category as $value) {
                $menu .= '<li>';
                $menu .= '<a href = "' . $value->link . '">' . $value->title . '</a>';
                $menu .= '</li>';
            }
            $menu .= '</ul>';
        }
    }
    $menu .= '</ul>';
    return $menu;
} 
```

}

之后，我将方法输出分配给一个变量并将其传递给模板：

```
$app->get('/', function () use ($app) {
        $site_info = Model::factory('Site_info')->where('id', '1')->find_one();

        $category_menu = Menu::generate_menu();
        $app->render('front_page.php', array(
            'site_name' => $site_info->site_name,
            'site_slogan' => $site_info->site_slogan,
            'domain' => $site_info->domain,
            'menu' => $category_menu
        ));
    }); 
```

# c# - 在 windows phone 7 中使用 json webservice

> ID：12439121
> 
> 赞同：4
> 
> 时间：2012-09-15T16:28:54.940
> 
> 标签：c#, json, windows-phone-7

我正在制作一个可以从这个链接[http://dir.yummly.com/4/public/8a753a70358c827b01358da787bd68f3](http://dir.yummly.com/4/public/8a753a70358c827b01358da787bd68f3)使用 json 的 windows phone 应用程序，但是当我尝试异步下载数据时，我无法获得可读的 e.result语。这是我的 C# 代码——

```
 Uri sub4 = new Uri("http://dir.yummly.com/4/public/8a753a70358c827b01358da787bd68f3");
        string kit = sub4.ToString();
    WebClient w = new WebClient();
        w.DownloadStringCompleted += new DownloadStringCompletedEventHandler(wc_DownloadStringCompleted);
        w.DownloadStringAsync(sub4);
        MessageBox.Show("done");

        }
    void wc_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
    string fres = e.Result;// here e.result was � 
    } 
```

然后我想反序列化 e.result。我的代码适用于任何其他 json url。而且由于我正在使用 Windows Phone 应用程序，所以我无法使用其他 webcilent 方法，例如 DownloadData 和 DownloadString。我也看到了 utf8 和 unicode 之间的许多转换，但没有一个起作用。有人可以帮忙吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T16:33:42.327

您点击的 API 提供压缩内容，这就是您所看到的垃圾文本。您需要在使用前解压缩内容。您可以从标题中看出这一点：

```
Content-Encoding: gzip 
```

不幸的是，我上次检查时，Windows Phone 中没有内置对 GZip 响应的支持。创建解决方法应该不会太难。谷歌搜索时，结果表明影响最小的解决方案是从 NuGet 添加[SharpGIS.GZipWebClient](http://www.nuget.org/packages/SharpGIS.GZipWebClient)库并从那里使用 GZip 支持。

# c# - Automapper 不忽略嵌套属性

> ID：12439132
> 
> 赞同：4
> 
> 时间：2012-09-15T16:30:03.530
> 
> 标签：c#, automapper

我浏览了各种类似的帖子，但无法发现我的方式错误。基本上我有两个视图来更新“设置”对象的不同部分。视图模型包含两个属性之一，并且根据正在设置的属性，应该忽略另一个。当它是 ViewModel ==> Entity direct 但当 Automapper 尝试更新嵌套对象时它会失败。

我有以下对象结构：

```
public class Account
{
    public int AccountId { get; set; }
    public DateTime DateToBeIgnored { get; set; }
    public AccountSetting Settings { get; set; }
}

public class AccountSetting
{
    public string PropertyOne { get; set; }
    public string PropertyTwo { get; set; }
}

public class AccountViewModel
{
    public int AccountId { get; set; }
    public DateTime DateToBeIgnored { get; set; }
    public AccountSettingViewModel Settings { get; set; }
}

public class AccountSettingViewModel
{
    public string PropertyTwo { get; set; }
}

public class OtherAccountSettingViewModel
{
    public string PropertyOne { get; set; }
} 
```

使用映射：

```
void WireUpMappings()
{
    // From the entities to the view models
    Mapper.CreateMap<Account, AccountViewModel>();
    Mapper.CreateMap<AccountSetting, AccountSettingViewModel>();
    Mapper.CreateMap<AccountSetting, OtherAccountSettingViewModel>();

    // From the view models to the entities
    Mapper.CreateMap<AccountViewModel, Account>()
        .ForMember(dest => dest.DateToBeIgnored, opt => opt.Ignore());

    Mapper.CreateMap<AccountSettingViewModel, AccountSetting>()
        .ForMember(dest => dest.PropertyTwo, opt => opt.Ignore());

    Mapper.CreateMap<OtherAccountSettingViewModel, AccountSetting>()
        .ForMember(dest => dest.PropertyOne, opt => opt.Ignore());

    Mapper.AssertConfigurationIsValid();
} 
```

映射 [OtherAccountSettingViewModel --> AccountSetting] 时，仅分配属性“PropertyTwo”（并且“PropertyOne”的原始值保持不变）-这是我所期望的。

但是，当映射 [AccountViewModel --> Account] 时，“DateToBeIgnored”会按预期被忽略，而 Account.AccountSetting.PropertyTwo 的先前值被替换为“null”。

谁能发现我的方式的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:20:15.720

这是解决方案：

```
[TestMethod]
public void TestMethod1()
{
     Mapper.CreateMap<AccountViewModel, Account>()
        .ForMember(dest => dest.DateToBeIgnored, opt => opt.Ignore())
        .ForMember(dest=>dest.Settings, opt=>opt.UseDestinationValue());

    Mapper.CreateMap<AccountSettingViewModel, AccountSetting>()
        .ForMember(dest=>dest.PropertyOne, opt=>opt.Ignore())
        .ForMember(dest => dest.PropertyTwo, opt => opt.MapFrom(a => a.PropertyTwo));

    Mapper.AssertConfigurationIsValid();

    AccountViewModel viewmodel = new AccountViewModel()
    {
        AccountId = 3,
        DateToBeIgnored = DateTime.Now,
        Settings = new AccountSettingViewModel() { PropertyTwo = "AccountSettingViewModelPropTwo" }
    };

    Account account = new Account()
    {
        AccountId = 10,
        DateToBeIgnored = DateTime.Now,
        Settings = new AccountSetting() { PropertyOne = "AccountPropOne", PropertyTwo = "AccountPropTwo" }
    };

    account = Mapper.Map<AccountViewModel, Account>(viewmodel, account);

    Assert.IsNotNull(account);

} 
```

![结果](../Images/92a51744a21fee601a46f2725adf72ea.png)

# grails - 在 grails 中上传文件

> ID：12439135
> 
> 赞同：10
> 
> 时间：2012-09-15T16:30:20.177
> 
> 标签：grails, input

我正在尝试在我的 gsp 中上传 grails 中的文件，我有：

```
<g:form id="update" url="[action: 'updateStatus',]">
     <g:textArea name="message" value="" cols="3" rows="1"/><br/>
     <g:textField id="tagField" name="tag" value=""/><br/>
     <input id="inputField" type="file" name="myFile" enctype="multipart/form-data" />
     <g:submitButton name="Update Status"/>
 </g:form> 
```

在我的控制器中，我有：

```
 def updateStatus(String message) {

        if (params.myFile){
            def f = request.getFile('myFile')

        } 
```

请求获取文件失败并出现以下错误：

```
No signature of method: org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestWrapper.getFile() is applicable for argument types: (java.lang.String) values: [myFile] 
```

任何想法为什么这是我所拥有的并且正在我的其他控制器中使用 getFile ，它工作正常。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-16T11:04:24.280

这是工作文件提交：

形式（gsp）

```
<form method="post" enctype="multipart/form-data">
<p><input type='file' name="cfile"/></p>
<input type='submit'>
</form> 
```

将提交的文件存储到“D:/submitted_file”的控制器：

```
def index() {
    if(params.cfile){
        if(params.cfile instanceof org.springframework.web.multipart.commons.CommonsMultipartFile){
            new FileOutputStream('d:/submitted_file').leftShift( params.cfile.getInputStream() );
            //params.cfile.transferTo(new File('D:/submitted_file'));
        }else{
            log.error("wrong attachment type [${cfile.getClass()}]");
        }
    }
} 
```

这对我有用（grails 2.0.4）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-15T16:36:24.263

您需要`enctype="multipart/form-data"`在`g:form`标签上使浏览器使用多部分请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-31T17:56:53.393

为了上传文件，您必须在表单上设置*enctype 。*为此，您可以使用`<g:uploadForm>`与标准表单标签相同的标签，只是它自动**将*enctype*属性设置为“multipart/form-data”。**

我更喜欢使用[Grails Selfie Plugin](https://grails.org/plugin/selfie)和*Image / File Upload Plugin*将文件附加到您的域模型、上传到 CDN、验证内容或生成缩略图。

**领域**

```
import com.bertramlabs.plugins.selfie.Attachment

class Book {
   String name
   Attachment photo

   static attachmentOptions = [
       photo: [
           styles: [
              thumb: [width: 50, height: 50, mode: 'fit'],
              medium: [width: 250, height: 250, mode: 'scale']
          ]
       ]
   ]

   static embedded = ['photo'] //required

   static constraints = {
      photo contentType: ['image/jpeg','image/png'], fileSize:1024*1024 // 1mb
   }
} 
```

**普惠制**

```
<g:uploadForm name="myUpload" controller="upload" action="updateStatus">
    <input type="file" name="myFile" />
</g:uploadForm> 
```

**控制器**

```
class PhotoController {
   def upload() {
      def photo = new Photo(params)
      if(!photo.save()) {
         println "Error Saving! ${photo.errors.allErrors}"
      }
      redirect view: "index"
   }
} 
```

**来源**

[1.上传来源](http://docs.grails.org/2.5.1/ref/Tags/uploadForm.html)

[2.自拍插件](https://grails.org/plugin/selfie)

# visual-studio-2010 - 如何在不使用服务器的情况下与我的团队共享我的 asp.net 代码？

> ID：12439137
> 
> 赞同：0
> 
> 时间：2012-09-15T16:30:24.997
> 
> 标签：visual-studio-2010, visual-sourcesafe

我正在使用`VS2010`.

我想与位于其他地理位置的团队成员之一共享我的项目代码，但由于我们没有服务器，我们无法使用 TFS。

谁能告诉我如何分享我的代码？

或者我可以以某种方式在我的本地机器（或任何其他 VS 扩展）上使用 TFS 并与他共享？

那么通过使用互联网，我们可以在任何工具（如 TFS）的帮助下相互共享我们的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T20:35:28.120

但是，我建议您使用[TFS Preview](http://tfspreview.com/)来实现这一点，因为它是免费的，并且提供与拥有本地服务器相同的所有好处，而无需运行本地服务器。

但是，如果您必须拥有本地存储，则可以使用[TFS Express](http://www.microsoft.com/visualstudio/eng/products/visual-studio-team-foundation-server-express)。它是免费的，可以在您的本地计算机上正常运行。然后，您需要做的就是通过 HTTP 公开您的计算机，然后您就可以开始了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T16:51:23.210

您是否考虑过使用分布式版本控制，例如[Mercurial](http://mercurial.selenic.com)？我不知道这些系统是否可以运行无服务器，我也没有使用它们的个人经验，但我听说过关于这个概念的好消息。

# html - 带有图例的 HTML 我目前有一个我需要的表结构。我有类似以下的东西 Field1 Field3 Field5 Field2 Field4 Field6 请注意，Field1,Field2 在 a 中，Field3,Field4 在 a中，Field5,Field6 在 a 中<td& 1="" 7983="" 问问题="" 2012-09-15t16:30:47.790="" 次="" this="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" does="" not="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" 我目前有一个我需要的表结构。我有类似以下的东西="" field1="" field3="" field5="" field2="" field4="" field6="" 请注意，field1,field2="" 在="" a="" 中<td="">，Field3,Field4 在 a中，Field5,Field6 在 a 中。 我喜欢<legend>说 Field1,Field2 但我有一个问题，因为传说不能进入. 我怎样才能添加一个图例。我想到的一种替代方法是废弃我现在正在做的事情并使用. 请让我知道这是否是解决此问题的正确方法，或者是否有办法添加<legend>我需要的方式。 iphone：如何添加当前项目文件o SVN？ 我已经开发了一部分应用程序现在我想将我的项目添加到 SVN 存储库中 文件->源代码管理->存储库 添加存储库 成功添加了存储库，但是当在项目根目录中我右键单击将项目添加到存储库时，它显示所有禁用源代码控制选项。 如何将我的项目添加到 SVN 存储库，请帮助 添加存储库时 html 4 2 回答 2 This answer is useful 4 根据您的描述，您需要一个表格单元格内的两个字段的图例。这很简单：</legend>这是否解决了你想问的问题是另一回事。这个问题非常抽象，并没有暗示你真正在做什么，或者真正的问题是什么。 于 2012-09-15T17:38:14.440 回答 This answer is useful 1 我认为您真正想要的是 a caption，而不是 a legend。 它的作用与标题大致相同，但用于table元素。 如果您只是使用表格进行布局，而不是用于表格数据，那么您应该重新考虑。 于 2017-03-21T16:50:24.803 回答 Related 1 ios - NSDate 更改时区 2 java - Google App Engine 中的 RSA 1 android - 逐帧播放视频 1 python - SqlAlchemy 并通过双重关系为我的用户获取角色 1 solr - 在 solr 中使用由文档创建者确定的权限 1 android - 在 Android v4 上锁定屏幕时，AlarmManager 不起作用 2 git-diff - git commit 和工作目录的区别？ 1 html - 悬停时更改背景颜色 0 c - 使用 LibEvent 在 HTTP 服务器中的 printf 性能 5 c# - 比较两个文件在互联网上是否相同 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12439139
> 
> 赞同：1
> 
> 时间：
> 
> 标签：html

我目前有一个我需要的表结构。我有类似以下的东西

```
Field1   Field3  Field5
Field2   Field4  Field6 
```

请注意，Field1,Field2 在 a 中`<td>`，Field3,Field4 在 a`<td>`中，Field5,Field6 在 a 中`<td>`。

我喜欢`<legend>`说 Field1,Field2 但我有一个问题，因为传说不能进入`<tr>`. 我怎样才能添加一个图例。我想到的一种替代方法是废弃`<table>`我现在正在做的事情并使用`<div>`. 请让我知道这是否是解决此问题的正确方法，或者是否有办法添加`<legend>`我需要的方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T17:38:14.440

根据您的描述，您需要一个表格单元格内的两个字段的图例。这很简单：

```
<td>
    <fieldset>
        <legend>Your legend here</legend>
        Field1
        Field2
    </fieldset>
</td> 
```

这是否解决了你想问的问题是另一回事。这个问题非常抽象，并没有暗示你真正在做什么，或者真正的问题是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-21T16:50:24.803

我认为您真正想要的是 a `caption`，而不是 a `legend`。

它的作用与标题大致相同，但用于`table`元素。

如果您只是使用表格进行布局，而不是用于表格数据，那么您应该重新考虑。

|  
<fieldset><legend>Your legend here</legend> Field1 Field2</fieldset>

 |</legend></td&>

# iphone - iphone：如何添加当前项目文件o SVN？

> ID：12439140
> 
> 赞同：0
> 
> 时间：2012-09-15T16:31:00.440
> 
> 标签：iphone, ios, svn, repository, xcode4.2

我已经开发了一部分应用程序现在我想将我的项目添加到 SVN 存储库中

文件->源代码管理->存储库

添加存储库

成功添加了存储库，但是当在项目根目录中我右键单击将项目添加到存储库时，它显示所有禁用源代码控制选项。

如何将我的项目添加到 SVN 存储库，请帮助

![在此处输入图像描述](../Images/49a9bd8adc54e4959a4851455a268443.png)

添加存储库时

![在此处输入图像描述](../Images/70a4409e7cdca59d29ea27b6806ec174.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:00:38.197

您是否不只是手动将所有文件放入您的主干并从那里打开项目，然后在管理器中设置您的存储库。这些文件都已经存在，然后您可以右键单击已更改的文件并从那里提交。

我还喜欢使用诸如[Google Code](http://code.google.com)之类的公共存储库来存储我的存储库，这对于在一个 SVN 项目中与很多人一起工作时出现数据问题特别有用。

# javascript - jquery点击功能选择和取消选择

> ID：12439143
> 
> 赞同：1
> 
> 时间：2012-09-15T16:31:14.480
> 
> 标签：javascript, jquery

我需要一些有关此 jQuery 代码的帮助。我有一张 SVG 地图，我需要一键选择一个国家，然后再取消选择它。有人可以帮助我吗？:) 这是代码：

```
<script type="text/javascript">//<![CDATA[ 
$(window).load(function(){
$(document).ready(function() {

 $("path").mouseover(function() {
     $(this).css('cursor', 'pointer');$(this).attr({
    fill: "#FF0000",
    stroke: "#00FF00"
     });
     $(this).css('cursor', 'pointer');
    })
 .mouseout(function(){
     if(!$(this).data('clicked')){
       $(this).attr({
    fill: "#FFFFFF",
    stroke: "#eee"
    });
    } 
  });

$("path").click(function() {
$(this).attr({
    fill: "#FF0000",
    stroke: "#00FF00"
});
$(this).data('clicked', true); 

});

});
});//]]>  

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T16:33:10.747

最强调的方法是使用：[http ://api.jquery.com/toggle-event/](http://api.jquery.com/toggle-event/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T10:34:52.933

您可能会在选择时添加一些类，然后在取消选择时删除类

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
</head>
<body>
     <input type='text' id="text1" onclick='javascript:toggleClass(this)' />
 </body>
 </html>
 <script src="jquery-1.2.6.min.js" type="text/javascript"></script>
 <script language='javascript' type="text/javascript">

 function toggleClass(item) {

    if ($(item).hasClass('select')) {
        $(item).removeClass('select').addClass('deselect');
    }
    else {
        $(item).removeClass('deselect').addClass('select');
    }

  }
 </script> 
```

# jqgrid - 在带有 subGrid 的工作 jqGrid 中，如何完全隐藏出现加/减/打开图标的列？

> ID：12439147
> 
> 赞同：3
> 
> 时间：2012-09-15T16:31:40.440
> 
> 标签：jqgrid, subgrid

我也想从主网格中完全隐藏它。

有关更多说明，请参见图像。

提前致谢。![在此处输入图像描述](../Images/41a1cbce8865b584f84892ec9db878de.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-15T16:45:25.733

您需要隐藏的列具有名称`"subgrid"`。所以要隐藏它，你可以使用

```
$("#grid").jqGrid("hideCol", "subgrid"); 
```

如果您需要实现打开或关闭子网格的接口，您可以直接调用[toggleSubGridRow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:subgrid#methods)方法。例如，以下回调将在双击主行时切换子网格：

```
ondblClickRow: function (rowid) {
    $(this).jqGrid("toggleSubGridRow", rowid);
} 
```

[在此处](http://www.ok-soft-gmbh.com/jqGrid/subgridtoggleondoubleclick.htm)查看相应的演示：

![在此处输入图像描述](../Images/26b305636f59b901eab9feedad6f0e5a.png)

**更新**：如果您想另外隐藏子网格第一列中的图标，您可以使用该选项

```
subGridOptions: { openicon: "ui-helper-hidden" } 
```

并添加额外的 CSS 样式

```
.subgrid-cell .ui-helper-hidden { display: none} 
```

查看[更新的演示](http://www.ok-soft-gmbh.com/jqGrid/subgridtoggleondoubleclick1.htm)：

![在此处输入图像描述](../Images/279bbb1d5cd7c5203ea9e13712de519c.png)

**更新2**：要隐藏子网格行中带有图标的列，您可以使用

```
.subgrid-cell { display: none} 
```

看下[一个演示](http://www.ok-soft-gmbh.com/jqGrid/subgridtoggleondoubleclick2.htm)：

![在此处输入图像描述](../Images/7eb28e4ab54e38549b4f732a99836dfd.png)

# c# - 组合字符串并在特定位置用另一个字符串分隔它们

> ID：12439149
> 
> 赞同：1
> 
> 时间：2012-09-15T16:32:16.447
> 
> 标签：c#, sql, string, logical-operators

我有九个字符串，它们要么是 SQL 查询，要么只是空的 ("")，具体取决于几个复选框的状态。我需要将它们组合在另一个字符串中，例如

```
string OP = "AND";
string query = "select * from table where " + string1 + OP + string2 + OP + string3 + OP + ... + " order by ID;" 
```

问题是，在字符串之间，我需要一个`AND`或一个`OR`. 但如果任何字符串为空，它会给我一个 SQL 错误。SQL不理解类似的东西

```
select * from table where AND a = "adsf" AND AND AND z = "fghj" AND order by ID; 
```

它必须看起来像这样：

```
select * from table where a = "adsf" AND z = "fghj" order by ID; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T16:38:11.080

```
字符串查询 =
   “从表中选择 *”
   + 字符串 1
   + String.IsNullOrEmpty(string2) ？" " : (OP + string2)
   + String.IsNullOrEmpty(string3) ？" " : (OP + string3)
   + ...
   + " 按 ID 排序；"

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T16:39:03.020

测试空

```
string query = "select * from table where " + 
String.IsNullOrEmpty(string1) ? "" : (string1+OP) + 
String.IsNullOrEmpty(string2) ? "" : (string2+OP) + 
...+
String.IsNullOrEmpty(string9) ? "" : string9;

//in case your string ends with AND which will if `string9` is empty
if (query.EndsWith("AND"))
{
    int andIndex = query.LastIndexOf("AND");
    query = query.Substring(0, andIndex);
}

query = query + " order by ID;" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T16:44:12.087

您可以将字符串放入数组中，删除空字符串，然后使用以下方法组合它们`Join`：

```
string[] conditions = new string[] {
  string1,
  string2,
  string3,
  string4
};

string op = " and ";
string query =
  "select * from table where " +
  String.Join(op, conditions.Where(c => c.Length > 0)) +
  "select * from table where "; 
```

对于框架 3.5 更改为：

```
 String.Join(op, conditions.Where(c => c.Length > 0).ToArray()) + 
```

# iphone - 在 UIViewController 中添加靠近后退按钮的按钮

> ID：12439156
> 
> 赞同：1
> 
> 时间：2012-09-15T16:32:58.597
> 
> 标签：iphone, objective-c, uiviewcontroller

我想将按钮添加到我的导航栏。

现在，当我添加 UIViewController 时，我正在使用：

```
pushViewCntroller 
```

并自动添加后退按钮，我正在设置标题。我可以在右侧添加按钮`serRightBarButtonItem`

但我想在后退按钮附近添加按钮，我该怎么做？我可以通过自定义CGpoint添加它吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:11:47.310

您可以像这样在导航栏上设置多个按钮：

```
// Get a copy of the existing array listing your current buttons
NSMutableArray *leftButtonArray = [self.navigationItem.leftBarButtonItems mutableCopy];

// Create the UIBarButtonItem
UIBarButtonItem *newButton = <insert your code to create your button>;

// Add it to the array.  Adjust index 0 to move the button.
[leftButtonArray insertObject:newButton atIndex:0]; 

// Set the left buttons to the new array
self.navigationItem.leftBarButtonItems = leftButtonArray; 
```

# scala - Scala 的 Range 类的独家结尾

> ID：12439157
> 
> 赞同：6
> 
> 时间：2012-09-15T16:33:04.243
> 
> 标签：scala, range

根据该方法的[Scala 文档](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.Range)`Range.end`，它返回“范围的唯一结尾”。那么为什么它为 the`to`和`until`符号返回相同的值呢？例如：

```
Welcome to Scala version 2.9.2 (Java HotSpot(TM) Server VM, Java 1.7.0).
Type in expressions to have them evaluated.
Type :help for more information.

scala> (1 to 10).end
res0: Int = 10

scala> (1 until 10).end
res1: Int = 10 
```

不应该`res0 == 11`吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-15T16:52:21.037

`to`并`until`导致相关但不同的`Range`类：`Range.Inclusive`和`Range`，分别；`Range.Inclusive IS-A Range`.

*   `isInclusive`将区分这两种类类型。

*   `end`，或上限，在范围是独占或包含的上下文中解释。上限是范围规范中提供的第二个数字，它出现`10`在原始问题的两个示例案例中。是的，如果范围从高到低（即`1 until -10`），这个“上限”可能小于“下限”。

*   `last`将返回范围内的最后一个值，这可能是您试图从`end`.

# asp.net - 无法在页面重新加载时反映数据集或数据适配器的更改

> ID：12439160
> 
> 赞同：0
> 
> 时间：2012-09-15T16:33:34.917
> 
> 标签：asp.net, vb.net, visual-studio-2010, visual-studio-2008, dataadapter

我的这段代码有什么问题？

**代码工作正常，但是当我在表中输入新记录并刷新页面时，将不会反映更改...**

我很困惑是什么问题..

```
 Protected Sub Page_PreInit(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.PreInit
        Dim ds As New DataSet()
        Dim connStr As String = "Data Source=DOBRIYAL-PC;Initial Catalog=MenuDb;Integrated Security=True"
        Using conn As New SqlConnection(connStr)
            Dim sql As String = "Select MenuID, Text, Description, ParentID from Menu"
            Dim da As New SqlDataAdapter(sql, conn)
            da.Fill(ds)
            da.Dispose()
            da.AcceptChangesDuringFill = True
        End Using
        ds.DataSetName = "Menus"
        ds.Tables(0).TableName = "Menu"
        ds.GetChanges()
        Dim relation As New DataRelation("ParentChild", ds.Tables("Menu").Columns("MenuID"), ds.Tables("Menu").Columns("ParentID"), True)

        relation.Nested = True
        ds.Relations.Add(relation)
        XmlDataSource1.Data = ds.GetXml()

        If Request.Params("Sel") IsNot Nothing Then
            Page.Controls.Add(New System.Web.UI.LiteralControl("You selected " + Request.Params("Sel")))
        End If
        XmlDataSource1.DataBind()
        RadMenu1.DataBind()
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T19:37:53.727

```
I have refatored your source code now you should see your new records on page load

Private Sub BindData()
    Dim ds As New DataSet()
    Dim connStr As String = "Data Source=DOBRIYAL-PC;Initial Catalog=MenuDb;Integrated Security=True"
    Using conn As New SqlConnection(connStr)
        Dim sql As String = "Select MenuID, Text, Description, ParentID from Menu"
        Dim da As New SqlDataAdapter(sql, conn)
        da.Fill(ds)
        da.Dispose()
        da.AcceptChangesDuringFill = True
    End Using
    ds.DataSetName = "Menus"
    ds.Tables(0).TableName = "Menu"
    ds.GetChanges()
    Dim relation As New DataRelation("ParentChild", ds.Tables("Menu").Columns("MenuID"), ds.Tables("Menu").Columns("ParentID"), True)

    relation.Nested = True
    ds.Relations.Add(relation)
    XmlDataSource1.Data = ds.GetXml()

    If Request.Params("Sel") IsNot Nothing Then
        Page.Controls.Add(New System.Web.UI.LiteralControl("You selected " + Request.Params("Sel")))
    End If
    XmlDataSource1.DataBind()
    RadMenu1.DataBind()
End Sub

  Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
 Me.BindData()
End Sub 
```

# c# - 为什么 Installshield LE Visual Studio 2010 Primary Output 将生成的文件放在桌面上

> ID：12439161
> 
> 赞同：0
> 
> 时间：2012-09-15T16:33:39.943
> 
> 标签：c#, visual-studio-2010, installation, installshield

我在 Visual Studio 2010 中有一个解决方案，有七个项目。我添加了一个 Installshield LE 安装项目，当我添加我的主要项目 Primary-Output，然后在 Installshield 助手中为桌面上的 Primary-Output 添加快捷方式时。

现在，当我安装我的应用程序时，它会按预期在桌面上创建一个快捷方式。但是当我运行我的应用程序时；它有一个内置的日志类，可以生成一些日志文件。现在，当我单击桌面上的快捷方式运行应用程序时，它会在桌面上创建我的日志文件，以及应该创建它们的位置，即应用程序目录。

为什么 installshield 这样做，因为我的理解是它应该只链接到应用程序安装文件夹中的 .exe，而不是认为它是从它的安装文件夹启动应用程序。

我已经通过手动将我的输出文件添加到安装项目中来实现它，但这并不理想，因为我希望能够配置它，然后当我需要构建一个新的安装程序时，只需构建项目就完成了.

如果有人可以推荐适合我需要的更好的安装程序，那就太好了。

**安装人员要求**

*   应用程序桌面快捷方式
*   桌面上用于 url 快捷方式的快捷方式
*   应用程序启动文件夹中的快捷方式
*   尤拉

创建设置项目很简单，因为我有一个截止日期，并且只有 1 天的时间来为客户构建和打包发布版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T17:14:41.017

听起来您的应用程序正在创建日志文件，无论它是从哪里启动的，这并不是 Installshield 的错。你真的应该写到像 LocalApplicationData 文件夹这样的地方：http: [//msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)

# iphone - iOs (cocos2d) 屏幕截图缓存或 CCRenderTexture 缓冲区？它没有改变

> ID：12439164
> 
> 赞同：1
> 
> 时间：2012-09-15T16:34:03.250
> 
> 标签：iphone, ios, cocos2d-iphone

我使用这个问题[stackoverflow.com/questions/12413460](https://stackoverflow.com/questions/12413460/cocos2d-2-0-screenshots-on-ios-6?answertab=active#tab-top)中的提示 它的工作。我的问题是应用程序未重新启动或未重建时图像未刷新。我使用创建屏幕截图的方法。我有相同的功能：使用触摸屏，屏幕截图将保存到文档目录中。用户触摸第二个，第二个屏幕截图保存。所以。但在我的应用程序中，每次只创建第一次触摸屏幕截图，因为它缓存或缓冲编辑。

```
-(UIImage *) screenshotWithStartNode:(CCNode*)startNode
{
    [CCDirector sharedDirector].nextDeltaTimeZero = YES;

    CGSize winSize = [CCDirector sharedDirector].winSize;
    CCRenderTexture* rtx = 
    [CCRenderTexture renderTextureWithWidth:winSize.width 
                                 height:winSize.height];
    [rtx begin];
    [startNode visit];
    [rtx end];

    return [rtx getUIImage];
} 
```

我在用户触摸屏时调用它（例如）

```
- (void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    CCNode *n = [[[CCDirector sharedDirector] runningScene].children objectAtIndex:0];
    UIImage *img = [self screenshotWithStartNode:n];//this image always same by one, same when user touch screen first time
    CCSprite *spriteTemp = [CCSprite spriteWithCGImage:img.CGImage key:@"image"];
    [self addChild:spriteTemp];
} 
```

在屏幕上的项目有不同的时间位置。首先触摸屏幕获得正确的图像。但所有其他触摸都会将屏幕截图创建为第一张图像并且不会改变。

我想也许是缓冲区 CCRenderTexture？或图像缓存？我将要做的？

我尝试 [img release] 并在触摸后尝试 CGImageRelease(img.CGImage)，但它会使应用程序崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T06:49:58.470

你是对的，之前的信息正在被缓存。试一试

```
[[CCTextureCache sharedTextureCache] removeTextureForKey:@"image"]; 
```

在您尝试覆盖之前。

或者，如果您一次需要多个图像，请使用不同的键名。

# ruby-on-rails - 如何使用 Ember Data & Rails 在单个 Ember.js 表单中保持 hasMany 关联？

> ID：12439165
> 
> 赞同：4
> 
> 时间：2012-09-15T16:34:13.057
> 
> 标签：ruby-on-rails, ember.js, has-many, ember-data

我无法确定使用 Ember.js、Ember Data 和 Rails 将 hasMany 关联与单个表单保持一致的正确方法。一个客户有很多项目。我有一个新的项目表单，它有两个字段：项目名称和客户名称。[http://cl.ly/image/3z0P0R3M1t2u](http://cl.ly/image/3z0P0R3M1t2u)

我试图将我的创建逻辑保留在 Ember.js *ClientsController*和*ProjectsController*中，但是我需要将其中的一些移到我的*ProjectsNewView*上的提交操作中吗？

**更新：发现这个**[问题](https://github.com/emberjs/data/pull/115)后我更新了我的代码。我越来越近了，但 Rails *ProjectsController*仍然没有收到关联的 client_id。它不是控制器接收的参数的一部分。我仍然觉得我可能不会以最好的方式去做。

**楷模：**

*导轨*

```
class Client < ActiveRecord::Base
  attr_accessible :name

  has_many :projects
  accepts_nested_attributes_for :projects
  validates :name, :presence => true
end

class Project < ActiveRecord::Base
  attr_accessible :name, :client_id

  belongs_to :client

  validates :name, :presence => true
  validates :client, :presence => true
end 
```

*Ember.js*

```
App.Client = DS.Model.extend
  name: DS.attr('string')
  projects: DS.hasMany('App.Project', { embedded: true })

  validate: ->
    if @get('name') is null or @get('name') is ''
      'Client requires a name.'

App.Project = DS.Model.extend
  name: DS.attr('string')
  client: DS.belongsTo('App.Client')

  validate: ->
    if @get('name') is `undefined` or @get('name') is null or @get('name') is ''
      return 'Projects require a name.'
    if @get('client') is `undefined` or @get('client') is null or @get('client') is ''
      'Projects require a client.' 
```

**控制器：**

*导轨*

```
class Api::ClientsController < Api::BaseController    
  def create
    @client = Client.find_or_create_by_name(params[:client][:name])

    respond_to do |format|
      if @client.save
        format.json { render json: @client, status: :create }
      else
        format.json { render json: @client.errors, status: :unprocessable_entry }
      end
    end
  end
end

class Api::ProjectsController < Api::BaseController
  def create
    @project = Project.new(params[:project])

    respond_to  do |format|
      if @project.save
        format.json { render json: @project, status: :created, location: @project }
      else
        format.json { render json: @project.errors, status: :unprocessable_entry }
      end
    end
  end
end 
```

*Ember.js*

```
App.ClientsController = Em.ArrayController.extend
  createClient: (data) ->
    @transaction = App.store.transaction()
    client = @transaction.createRecord(App.Client, data)

    project_data = data.projects_attributes[0]
    client.get('projects').createRecord(project_data)

    validation_errors = client.validate()

    if validation_errors
      App.displayError validation_errors
      client.destroy()
    else
      @transaction.commit()

App.ProjectsController = Em.ArrayController.extend
  createProject: (data) ->
    @transaction = App.store.transaction()
    project = @transaction.createRecord(App.Project, data)
    validation_errors = project.validate()

    if validation_errors
      App.displayError validation_errors
      project.destroy()
    else
      @transaction.commit()
      App.get('router').transitionTo('projects') 
```

**意见：**

*Ember.js*

```
App.ProjectsNewView = Em.View.extend
  classNames: ['form row']
  tagName: 'form'
  templateName: 'projects/new'

  init: ->
    @_super()

  submit: (event) ->
    event.preventDefault()

    client = {}
    client.name = @get('client')

    project = {}
    project.name = @get('name')

    client.projects_attributes = []
    client.projects_attributes.push project

    App.router.clientsController.createClient(client) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T20:33:09.213

@David 我不是专家，但我再次查看您的问题，我认为要获取关联的 client_id，您必须**调用**RestAdapter 上的 toJSON 方法并传递它：

```
{associations: true} 
```

下面的链接解释了如何做到这一点：

[https://stackoverflow.com/questions/10184213/is-there-a-way-to-post-embedded-objects-back-to-the-api-with-ember-data](https://stackoverflow.com/questions/10184213/is-there-a-way-to-post-embedded-objects-back-to-the-api-with-ember-data)

[存储为单独对象的 Ember 数据嵌入对象](https://stackoverflow.com/questions/12068373/ember-data-embedded-objects-stored-as-separate-objects)

[Emberjs - 无法查询嵌入式模型或关联](https://stackoverflow.com/questions/12124799/emberjs-unable-to-query-for-embedded-model-or-association)

**更新**

在我回答代码在哪里使用 toJSON 的问题之前，我想回到我刚刚在代码设计中观察到的一些事情。

您正在尝试在子记录中创建 parentRecord，因为**Client**是父项，而**project**是子项。如果您观察良好，您链接到[的 issue-115](https://github.com/emberjs/data/pull/115)明确表示 parentRecord 存储将用于创建记录。此外，如果您在最终的[pull-request 中](https://github.com/emberjs/data/commit/b6acfa41c263e7190073992119e94534c222c512)检查与**issue-115**合并的测试，您将再次看到它被声明为**在 parentRecord 中创建子记录**。

但是您正在做相反的事情，即**在 child record 中创建 parentRecord**。你需要扭转这一点。

此外，**在 Rails 方面**，在 **Client Model**中，您调用了**accept_nested_attributes_for :projects**，就像 emberjs 一样，它只允许您从 Client 创建**项目**记录，反之亦然。所有关于如何在[rails guide](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)、[railscasts](http://railscasts.com/episodes/196-nested-model-form-part-1)和 this 在[嵌套属性上使用](http://archives.ryandaigle.com/articles/2009/2/1/what-s-new-in-edge-rails-nested-attributes)**accept_nested_attributes_for**的示例，都显示了从父模型中的表单创建的子模型的字段。

所以在这个用例中，rails 和 emberjs 都是从子记录创建 parentRecord。这可能就是您遇到客户端 ID 问题的原因。**所以扭转你的设计**，然后再试一次。如果它仍然没有发送客户端 ID。然后你应该在客户端模型上调用 toJSON，它是父关联，如我发布的初始链接中的[第一个链接](https://stackoverflow.com/questions/10184213/is-there-a-way-to-post-embedded-objects-back-to-the-api-with-ember-data)所示，建议你在 restAdapter 中的 toJson 上调用**{associations: true} 。**

```
 App.Client 
 ##
 toJSON: (options={}) ->
   options['associations'] = true
   @_super(options) 
```

我希望这有帮助。请评论什么有效或无效，以便其他遇到类似问题的人找到这篇文章可以知道从哪里开始。

最后，使用 [active_model_serializer gem创建您的](https://github.com/josevalim/active_model_serializers)**rails api**并没有什么坏处，这是 ember-core 团队推荐的 gem，用于为 ember-data 和 RestAdapter创建**rails api 。**这样你就可以从 ember 端和 rails 端加载和嵌入关联。

# java - 最佳架构 - 在 java 中收听 atom 提要的最佳方式是什么？

> ID：12439167
> 
> 赞同：0
> 
> 时间：2012-09-15T16:34:42.080
> 
> 标签：java, architecture, polling, atom-feed

我正在阅读 Java 中的 Atom 提要，我每隔 30 秒定期执行一次，根据提要，我必须显示不同的 UI。

我不乐意每 30 秒轮询一次提要，并且想知道是否存在更好的架构来解决这个问题。

我不认为我可以从 Feed Source 获得推送通知，或者我可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T23:08:11.087

你不能。您当然可以引入一个中间层组件，该组件将拉取提要，然后将它们推送到您的应用程序，但归根结底，您无论如何都会“拉取”以进行“推送”。

# git - cent os bash unrecognized option --system on adduser 命令

> ID：12439169
> 
> 赞同：2
> 
> 时间：2012-09-15T16:35:00.233
> 
> 标签：git, bash, centos, gitolite, gitlab

我正在尝试在我的 centos linux 服务器上安装 gitlab。我正在关注位于此处的教程：[https ://gist.github.com/1601228](https://gist.github.com/1601228)

一切都很顺利，直到我到达这条线：`adduser --system --shell /bin/sh --comment 'gitolite' --create-home --home-dir /home/git git`

我的外壳只是返回这个：`adduser: unrecognized option '--system'`

我似乎无法找到如何启用该选项或为什么它不可用。

我在跑：

*   CentOS 5.8 版（最终版）
*   GNU bash，版本 3.2.25(1)-release (x86_64-redhat-linux-gnu)

如果我需要发布任何其他软件版本，请告诉我。

**如何成功运行此命令或完成此命令在我当前版本的 centos/bash/etc 上执行的相同任务？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T16:46:53.543

你是对的，CentOs 5.8 上没有`--system`切换到 adduser 命令。但是有一个可以在您的安装脚本中`-r`替换的开关。`--system`从`adduser`手册页：

-r 此标志用于创建系统帐户。也就是说，用户的 UID 低于 /etc/login.defs 中定义的 UID_MIN 的值，并且其密码不会过期。请注意，无论 /etc/login.defs 中的默认设置如何，useradd 都不会为此类用户创建主目录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T16:45:32.023

I don't have access to a CentOS 5 box to check, but try replacing `--system` with its single-dash version `-r` instead.

# java - 如何将 Java 安全层（Apache Shiro|Spring Security）集成到 webapp 菜单系统

> ID：12439170
> 
> 赞同：0
> 
> 时间：2012-09-15T16:35:02.483
> 
> 标签：java, spring-mvc, menu, spring-security, shiro

正如标题所说，我需要在其中创建一个动态`menu stored`树，并且计划在其上放置一个接口。现在我需要根据市场上适合此要求的产品 `database`来决定如何实现。`Access Control Layer`

我在我的项目中大量使用`Spring IoC`，`spring mvc`等等`hibernate`。我以前用过`apache shiro`，还不错。只是社区还很年轻，所以关于 shiro 的问题需要时间才能有贡献，而且没有大量的文档。

无论如何，我仍在计划使用`shiro`，因为我有我没有的经验`spring security`。现在第一个问题应该**是，将 ACL 绑定到菜单系统|导航系统是个好主意**。如果有人可以，我会很高兴分享他的经验。

所以在我的脑海中`users`，`roles`我想到了这个模型，，，，，，`rights``users_rights``roles_users``roles_rights`

```
users //contains creds and user detail
roles //contains roles
rights // contains rights (including menu entries matching rights, if i have to tie them)
roles_users //many-to-many roles-users with extra columns mapped as entity
roles_rights // many-to-many roles-rights with extra columns mapped as entity

users_rights //many-to-many users-rights mapped as entity with extra columns. special rights for user and overwrite the overall rights given by roles. can deny rights given by a role or add rights not inside any roles 
```

所以在权利表中我可以喜欢：

```
 id
  name // in the form of admin:users:list
  description
  menu_name // unique name what shows on page
  menu_url 
```

唯一的问题是我如何处理子菜单？自我多对多权利？最后，一切都变得如此复杂。所以我想有其他的观点、见解和建议。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T17:00:44.280

我希望我明白你想要什么。
我认为使用自外键是有效的。
但是，我建议您在创建子菜单或更新其中一个父菜单时计算子菜单的“ACL 值”，
因此在 ACL 检查子菜单期间您不会花时间计算它。
如果我没有正确使用这些术语，我很抱歉
，一般我的意思是，如果你在一棵树上有一些值，并且这个值可能取决于树中父节点的值，
你应该考虑在插入、更新或对祖先之一进行任何更改期间计算子节点/叶子的值。

# java - JavaFX 控制器如何访问其他服务？

> ID：12439172
> 
> 赞同：3
> 
> 时间：2012-09-15T16:35:08.207
> 
> 标签：java, scala, javafx-2

我将 JavaFX 2 与 Scala 一起使用。

我有`class Application extends javafx.application.Application`which 会执行诸如读取应用程序配置等操作。然后它会启动主窗口。

这个主窗口需要连接到一个名为`MainWindow`. 我可以使用 来做到这一点`fx:controller="com.foo.bar.MainWindow"`，但是，在这种情况下，实例`MainWindow`无法访问我的应用程序的配置等。

我想到的一件事是`MainWindow`在类中自己实例化控制器`Application`并注入所有依赖项，然后告诉主窗口视图控制器应该是我刚刚创建的实例。但是，我不知道该怎么做？

在 JavaFX 中访问控制器中数据的首选方式是什么——通过某种依赖注入或其他方式？

**换句话说，**这个视图 FXML：

```
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.Scene?>
<?import javafx.scene.control.*?>

<BorderPane fx:controller="com.foo.bar.MainWindow" prefHeight="703.0" prefWidth="803.0" xmlns:fx="http://javafx.com/fxml">
... 
```

会自动为我实例化一个`com.foo.bar.MainWindow`控制器（？）：

```
...
class MainWindow {
  var app: Application = null
  ...
} 
```

我在哪里引用了我的应用程序，其中包含我想要访问的信息：

```
class Application extends javafx.application.Application {
  ...
  // Stuff I want to access, application also fires up the first scene.
} 
```

问题是如何获得对主应用程序的引用？我怎样才能进行依赖注入或任何等效的操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T20:34:41.093

Guice 是我首选的注入控制器的方式，你只需要使用以下控制器工厂：

```
class GuiceControllerFactory implements Callback<Class<?>, Object> {

    private final Injector injector;

    public GuiceControllerFactory(Injector anInjector) {
        injector = anInjector;
    }

    @Override
    public Object call(Class<?> aClass) {
        return injector.getInstance(aClass);
    }
} 
```

在您的 FXMLLoader 上设置它：

```
FXMLLoader loader = new FXMLLoader();         
loader.setControllerFactory(controllerFactory); 
```

现在 Guice 将创建您的控制器。我建议您注入控制器需要的任何服务，而不是传入对应用程序类的引用。

# php - 我的 php 脚本在 120 秒后停止

> ID：12439173
> 
> 赞同：1
> 
> 时间：2012-09-15T16:35:27.520
> 
> 标签：php, mysql, codeigniter, zend-server

我在将表数据逐行导入到 mysql 表中时使用 codeigniter，其中表中的行数超过 25000，因此从一个表中读取并插入另一个表需要时间。

我注意到每次我运行我的脚本时，如：[http://domain.local/importdata](http://domain.local/importdata)它在导入一些行后停止脚本，并且在检查其执行时间后，它总是恰好为 120 秒。

我试图 set_time_limit(0); 但仍然没有用，它会在 120 秒后停止。

在 phpinfo() 中，它显示默认 max_execution_time 为 300。

另外我在 Windows 机器上使用 zend 服务器。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T16:46:55.793

首先，您应该使用的函数是[set_time_limit()](http://www.php.net/set_time_limit)。

假设这只是一个错字，您的服务器管理员可能已经对服务器进行了限制。这意味着您不能超过该限制。试想一下，如果您在某处有一个无限循环，并且您的代码将永远不会超时。要验证，请尝试使用 set_time_limit(0) 并执行 phpinfo()。您将在输出中看到两个值。在最右边的列中是 PHP 配置中的主值，另一列是优先的本地值。

[Zend 手册](http://static.zend.com/topics/Zend-Server-CE-Reference-Manual-V403.pdf)提到您不应该将它用于执行时间较长的文件。按照有关如何将文件列入黑名单的说明进行操作。此外，如果您使用的是 Apache，请检查 etc 目录中 zendenabler.conf 中的 RequestTimeout 和 ConnectionTimeout。我认为它停止的原因不是因为 PHP，而是因为 Apache 或 Zend。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-15T10:06:43.610

如果您在 Windows 上使用 Zend Server，这可能会解决您的问题：

[Zend 服务器帮助：配置_php_timeouts_under_windows_apache](http://files.zend.com/help/Zend-Server-6/zend-server.htm#configuring_php_timeouts_under_windows_apache.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T22:43:37.677

120 秒也是常见的浏览器超时时间。

# php - 在php中将数组更改为用逗号按asc排序的字符串

> ID：12439174
> 
> 赞同：0
> 
> 时间：2012-09-15T16:35:28.943
> 
> 标签：php

我有一个数组：

```
$array = array(
"peter",
"john",
"maria",
"bob"); 
```

现在我需要以某种方式将数组更改为字符串（按 asc 排序），例如：

```
$string_with_commas = "bob, john, maria, peter"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T16:37:15.417

```
<?php

$array = array('lastname', 'email', 'phone');
sort($array)
$comma_separated = implode(",", $array);

echo $comma_separated; // email,lastname,phone

?> 
```

[http://php.net/manual/en/function.implode.php](http://php.net/manual/en/function.implode.php)

[http://php.net/manual/en/function.sort.php](http://php.net/manual/en/function.sort.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T16:39:30.757

```
$array = array("peter", "john", "maria", "bob"); 

sort($array);

$string_with_commas = implode(', ', $array); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T16:38:17.977

```
<?php
sort($array);
echo implode(', ', $array); 
```

`sort()`将修改您的阵列。如果你不想要那个，你必须复制那个数组。

```
<?php
$sorted_array = $array;
sort($sorted_array); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-15T16:38:45.400

```
sort($array); //sort array in ASC order
$string = implode(', ', $array); //store as comma separated string 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-15T16:38:21.867

只需这样做：

```
$string_with_commas = implode(', ', $array); 
```

# jquery - 使用 jQuery 预填充表单

> ID：12439180
> 
> 赞同：6
> 
> 时间：2012-09-15T16:37:01.657
> 
> 标签：jquery, forms, copying

有一个由页面上的插件生成的发票金额。我想将其 id 复制到表单字段中以预先填写它。

```
<div id="invoicediv">$123.00</div> 

<div id="price"></div>
<br />
<form a`ction="https:/thecart.com" method="post" accept-charset="utf-8">  

<label>Donation Amount:</label><br>  
$<input id="txtBox" size="3" type="text" name="dollaramount">   
<input type="hidden" name="name" value="Donation">   
<input type="submit" value="Donate">  
</form> 
```

有效的jQuery：

```
$('#price').html($('#invoicediv')); 
```

但形式没有：

```
$('#txtBox').val($('#invoicediv'));​ 
```

我还想在美元符号将自身复制到表单之前删除它。

到目前为止，我在[http://jsfiddle.net/yvTNc/24/](http://jsfiddle.net/yvTNc/24/)也有以下代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T16:39:05.003

您正在 val() 中复制一个 jquery 对象，您需要`$('#invoicediv').val()`或`.text()`取决于它是什么元素。在这种情况下，你会想要`$('#invoicediv').text()`

像这样

```
$('#txtBox').val($('#invoicediv').text());​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T16:42:29.580

# struts2 - struts2 textarea中的换行符

> ID：12439181
> 
> 赞同：0
> 
> 时间：2012-09-15T16:37:03.857
> 
> 标签：struts2

有没有办法为值添加换行符`<s:textarea>`？

```
<s:textarea name="text_area" value="need_some_line_breaks" /> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T18:29:39.433

这根本不是 Struts 2 相关的，而是基本的 HTML。

如果您想在 a中添加换行符，请在字符串中任何您想要的地方添加`<textarea>`一个换行符 ( `"\n"`)。就个人而言，我保持 textarea 数据不变，仅当我需要在文本区域*之外*查看它时，通过用`<br/>`标签替换换行符来转换它。这种方式始终保留原始数据。

# .net - 标头包括问题

> ID：12439182
> 
> 赞同：0
> 
> 时间：2012-09-15T16:37:06.650
> 
> 标签：.net, visual-c++, c++-cli, header-files

假设我有两种形式 Form1 和 Form2。我需要用 Form2 写：

```
Form1^ obj= gcnew Form1();
this->Hide();
obj->Show(); 
```

在 Form1 中：

```
Form2^ obj= gcnew Form2();
this->Hide();
obj->Show(); 
```

但不起作用，因为我不能同时在两种形式中包含 Form1.h 和 Form2.h ..任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T16:41:35.957

你在视觉工作室吗？您可以在头文件中使用一次#pragma，然后您应该能够毫无问题地包含它们。

# sql - 带有 IN 子句的 SQL 选择

> ID：12439183
> 
> 赞同：1
> 
> 时间：2012-09-15T16:37:10.877
> 
> 标签：sql, sql-server, sql-server-2008

这是我想要完成的一个例子。

```
declare @MenuIDs varchar(max) = '1,2,3,4';

SELECT 
    tMenuMain.MenuId, 
    tMenuMain.MenuRank 
INTO #TempRankTable 
FROM tMenuMain 
WHERE tMenuMain.MenuId IN (@MenuIDs);

select * from  #TempRankTable; 
```

@MenuIDs 变量实际上是一个存储过程参数。（我只是在示例中声明它来解释）

我如何让选择工作，因为 IN 命令只适用于逗号分隔的值，而不仅仅是一个字符串。我面临的其他问题是 tMenuMain.MenuId 是一个整数列。在这种情况下可以进行 CAST 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T17:14:28.583

您可以声明一个将字符串“映射”到表格的小辅助函数；

```
CREATE FUNCTION dbo.str2ints(@str nvarchar(max))
RETURNS @ints TABLE (val INT)
AS
BEGIN
  DECLARE @xml XML
  SET @xml = '<root><str>' + REPLACE(@str, ',', '</str><str>') + '</str></root>'
  INSERT INTO @ints(val)
  SELECT str.value('.', 'int') 
  FROM @xml.nodes('//str') AS RECORDS(str)
  RETURN
END 
```

然后您可以重写您的函数以使用该函数进行拆分；

```
declare @MenuIDs varchar(max) = '1,2,3,4';

SELECT 
    tMenuMain.MenuId, 
    tMenuMain.MenuRank 
INTO #TempRankTable 
FROM tMenuMain 
WHERE tMenuMain.MenuId IN (SELECT * FROM dbo.str2ints(@MenuIDs));

select * from  #TempRankTable; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T16:41:58.953

您必须使用动态 SQL 并查看：

```
declare @MenuIDs varchar(max) = '1,2,3,4';
declare @SQL varchar(max);

set @SQL = 'create view vTab as
            SELECT tMenuMain.MenuId, tMenuMain.MenuRank                 
            FROM tMenuMain 
            WHERE tMenuMain.MenuId IN ('+@MenuIDs+')';
/*
   Select in @SQL should look like:
            create view vTab as
            SELECT tMenuMain.MenuId, tMenuMain.MenuRank                 
            FROM tMenuMain 
            WHERE tMenuMain.MenuId IN (1,2,3,4)
*/

exec(@SQL)

select * 
into #TempRankTable 
from vTab 

drop view vTab   

select * from  #TempRankTable; 
```

或者如果你可以`create table`在插入之前

```
 declare @MenuIDs varchar(max) = '1,2,3,4';
 declare @SQL varchar(max);

 create table #TempRankTable 
 (
   MenuId ...
   MenuRank ...
 ) 

set @SQL = 'insert into #TempRankTable(MenuId,MenuRank) 
            SELECT tMenuMain.MenuId, tMenuMain.MenuRank                 
            FROM tMenuMain 
            WHERE tMenuMain.MenuId IN ('+@MenuIDs+')';
/*
   Select in @SQL should look like:
            insert into #TempRankTable(MenuId,MenuRank) 
            SELECT tMenuMain.MenuId, tMenuMain.MenuRank                 
            FROM tMenuMain 
            WHERE tMenuMain.MenuId IN (1,2,3,4)
*/

exec(@SQL)

select * from  #TempRankTable; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T16:46:26.517

有一种简单而干净的方式来做你想做的事。以下问题包含许多解决方法，例如，使用 XML 或拆分值的本地函数：

*   [将参数数组传递给存储过程](https://stackoverflow.com/q/1069311/87698)

一个丑陋但简单的替代方法是使用[CHARINDEX](http://msdn.microsoft.com/en-us/library/ms186323.aspx)方法来验证是否`',' + tMenuMain.MenuId + ','`包含在中`,1,2,3,4,`（注意开头和结尾的逗号）。

# asp.net-mvc-3 - 添加评论并重定向回博客文章后缺少 url 参数

> ID：12439187
> 
> 赞同：0
> 
> 时间：2012-09-15T16:37:59.283
> 
> 标签：asp.net-mvc-3, parameters, url-routing

我通过创建一个博客应用程序自学asp .net mvc3。但是，我在评论上传时遇到问题。这是一个非常微妙的错误，因为当用户发表评论时一切正常。但是，帖子的网址发生了变化。

所以，一篇博文有一个 url

```
http://localhost:49175/Blog/Details/3/Third-post 
```

这是由此处的 url 路由映射生成的：

```
routes.MapRoute(
                "BlogDetail", // Route name
                "Blog/Details/{id}/{urlHeader}", // URL with parameters
                new { controller = "Blog", action = "Details", id = UrlParameter.Optional, urlHeader = UrlParameter.Optional } // Parameter defaults
            ); 
```

现在，当用户发表评论时 - 他被定向到评论控制器：

```
[HttpPost]
    public ActionResult Create(BlogDetailsViewModels viewModel)
    {
        if (ModelState.IsValid)
        {
            try 
            {
                blogrepository.Add(viewModel.Comment);
                return RedirectToAction("Details", "Blog", new { id = viewModel.Comment.BlogID });
            }
            catch (DataException)
            {
                ModelState.AddModelError("", "Unable to save comment. Try again, and if the problem persits then contact administrator.");
            }
        }
        // If we got this far, something failed, redisplay form
        return RedirectToAction("Details", "Blog", new { id = viewModel.Comment.BlogID });
    }
} 
```

但是，当有人发表评论时 - 他会被重定向回

```
http://localhost:49175/Blog/Details/3 
```

我知道，到目前为止， RedirectToAction 中没有任何内容可以传递 urlHeader 信息。但是，我尝试了一些方法，例如：

```
return RedirectToAction("Details", "Blog", new { id = viewModel.Comment.BlogID, urlHeader = viewModel.Blog.UrlHeader }); 
```

但是，它似乎不起作用。

这是博客详细信息控制器：

```
 //
    // GET: /Blog/Details/5
    public ViewResult Details(int id, string urlHeader)
    {
        var blogs = blogrepository.GetBlog(id);
        var recentblogs = blogrepository.FindRecentBlogs(5);
        var archivelist = blogrepository.ArchiveList();
        BlogDetailsViewModels viewModel = new BlogDetailsViewModels { Blog = blogs, RecentBlogs = recentblogs, ArchiveList = archivelist };
        return View(viewModel);
    } 
```

我被困了好几天。

-- 根据要求提供完整的路线方法 --

```
public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "BlogDetail", // Route name
            "Blog/Details/{id}/{urlHeader}", // URL with parameters
            new { controller = "Blog", action = "Details", id = UrlParameter.Optional, urlHeader = UrlParameter.Optional } // Parameter defaults
        );

        routes.MapRoute(
            "BlogArchive", // Route name
            "Blog/{year}/{month}", // URL with parameters
            new { controller = "Blog", action = "Archive" }, // Parameter defaults
            new { year = @"\d{4}", month = @"\d{1,2}", } // Parameter constraints
        );

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T08:15:53.763

如果您的表单不包含 viewModel.Blog.UrlHeader 的数据，它将是一个空字符串，甚至 viewModel.Blog 也可能为空。

您可以将参数添加到您的 post 操作方法，如下所示：

```
[HttpPost]
public ActionResult Create(BlogDetailsViewModels viewModel, String urlHeader) 
```

并且，在您呈现表单的视图中，使用此代码生成表单元素：

```
@Html.BeginForm("Create","Blog",new{urlHeader=Model.Blog.UrlHeader}) 
```

***或者***，您可以在表单中为 urlHeader 添加隐藏输入。这样，您不必执行前两次更新中的任何一个。

```
@Html.HiddenFor(m=>m.Blog.UrlHeader) 
```

无论哪种方式，请确保您的 Model.Blog.UrlHeader 不是 null 或空字符串

# ruby-on-rails - 如何遍历数据库表，然后搜索要删除的重复记录

> ID：12439201
> 
> 赞同：1
> 
> 时间：2012-09-15T16:39:59.423
> 
> 标签：ruby-on-rails, ruby, sequel

我有一张桌子存放一些声音片段。我试图创建一个循环来读取表格，然后重新读取表格并删除接近重复的记录。

我的代码是这样的：

```
Numbersound.where{id != nil}.order(:id).each do |sound|
  Numbersound.where{(id != sound.id) & (sound.wavelength = wavelength)}.each do |duplicate|
    if (duplicate.wavecount != nil)
      #compare wave files and check if the same
      if MatchSound.compare(sound.frames, sound.wavecount, duplicate.frames, duplicate.wavecount, 0.03)
        Numbersound.delete(duplicate.id)
      end
    end
  end 
```

问题是我需要从声音数组中删除已删除的记录，否则总会有至少一个匹配项（本身）。

我不能使用 SQL 进行比较，因为我要执行一些相当长的计算。

# c# - 谷歌拼写检查 API

> ID：12439204
> 
> 赞同：5
> 
> 时间：2012-09-15T16:40:27.253
> 
> 标签：c#, asp.net

有人知道吗？我通过了拼写检查“加速器”，这是一个非常好的词。我回来“加速”？当我在浏览器中打开 Google 并输入“加速器”时，它不会提示“加速器”？

```
using System;
using System.Net;
using System.Text;
using System.Text.RegularExpressions;

namespace SpellCheck
{
    class googel_SP
    {
        public string word;
        public void run_G()
        {
            string retValue = string.Empty;
            string Iword = "accelerants";

            try
            {
                string uri = "https://www.google.com/tbproxy/spell?lang=en:";
                using (WebClient webclient = new WebClient())
                {
                    string postData = string.Format("<?xml version=\"1.0\"     encoding=\"utf-8\" ?> " 
                    + "<spellrequest textalreadyclipped=\"0\" ignoredups=\"0\"     ignoredigits=\"1\" "
                    + "ignoreallcaps=\"1\"><text>{0}</text></spellrequest>", Iword);

                    webclient.Headers.Add("Content-Type", "application/x-www-form-    urlencoded");
                    byte[] bytes = Encoding.ASCII.GetBytes(postData);
                    byte[] response = webclient.UploadData(uri, "POST", bytes);
                    string data = Encoding.ASCII.GetString(response);
                    if (data != string.Empty)
                    {
                        retValue = Regex.Replace(data, @"<(.|\n)*?>",     string.Empty).Split('\t')[0];
                        Console.WriteLine(" word in -> " + word + " word out -> " +      retValue);
                    }
                }
            }
            catch (Exception exp)
            {

            }
            //return retValue;
        }
    }

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T10:35:41.943

有趣...我运行了您的代码，如果我故意将“促进剂”作为搜索词传递，它会正确返回“促进剂”。但是，如果我通过“加速器”，它会返回“加速器”。更改语言和文本编码似乎没有什么不同。

这是可以完成相同工作的替代代码..显然需要一些错误处理，但您明白了:)

```
string retValue = string.Empty;
word = "accelerants";

string uri = string.Format( "http://www.google.com/complete/search?output=toolbar&q={0}", word );

HttpWebRequest request = ( HttpWebRequest ) WebRequest.Create( uri );
HttpWebResponse response = ( HttpWebResponse ) request.GetResponse( );

using ( StreamReader sr = new StreamReader( response.GetResponseStream( ) ) ) {
    retValue = sr.ReadToEnd( );
}

XDocument doc = XDocument.Parse( retValue );

XAttribute attr = doc.Root.Element( "CompleteSuggestion" ).Element( "suggestion" ).Attribute( "data" );

string correctedWord = attr.Value; 
```

# javascript - 如何在jQuery中获取元素的形式

> ID：12439206
> 
> 赞同：0
> 
> 时间：2012-09-15T16:41:15.673
> 
> 标签：javascript, jquery

我有一个可以很好地从 html 运行的 javascript 函数

```
'onClick="my_function(this.form)" 
```

但是如果表单中的特定元素具有我尝试过的键入数据，我也想调用此函数

```
 jQuery(document).ready(function($){

   $('#option_field_bizpostcode').keyup(function() {
      var myform = $(this).closest('form').options-i-have-tried();
      my_function(myform);
        });
 }); 
```

options-i-have-tried() 包括 html() （这表明我在正确的表单内有 html ok），
get() 在黑暗中有点刺，
serializeArray() 来自类似问题的一些答案，
什么都没有。

在每种情况下，我的函数都抱怨它的参数形式，或者更具体地说是 form.myelement 是未定义的

非常感谢期待

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T16:47:20.227

好吧，您将 FORM 元素传递给内联处理程序（onclick 属性）中的函数，因此您需要对 jQuery 处理程序执行相同的操作。

```
jQuery(document).ready(function($){
    $('#option_field_bizpostcode').keyup(function() {
        var myform = $(this).closest('form')[0]; //because the form element is at the first index in the jquery object
        my_function(myform);
    });
}); 
```

或者甚至更好，你为什么不坚持这样做：

```
jQuery(document).ready(function($){
    $('#option_field_bizpostcode').keyup(function() {
        my_function(this.form);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T16:44:48.410

I think if you use the first element from the `closest` call you will be successful:

```
$('#option_field_bizpostcode').keyup(function() {
  var myform = $(this).closest('form')[0];
  my_function(myform);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T16:45:21.910

I think you should be passing `myform` not `form`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T16:49:12.283

`this`在 jQuery 回调中将是附加处理程序的元素。它是原生 DOM 元素，没有任何 jQuery 包装器。

所以假设这`#option_field_bizpostcode`是一个表单元素，你应该能够`this.form`像在`onclick`方法中那样做。

```
my_function(this.form); 
```

# rspec - Rails 3.2.8 + FactoryGirl + RABL：日期时间返回方式的差异

> ID：12439208
> 
> 赞同：2
> 
> 时间：2012-09-15T16:41:33.623
> 
> 标签：rspec, ruby-on-rails-3.2, factory-bot, rabl

我有以下工厂：

```
FactoryGirl.define do
  factory :location do |f|
    f.descrizione { Faker::Company.name }
    f.indirizzo { 'Yellow submarine lane, 1'}
    f.citta { 'Nowhereland' }
    f.cap { '0100' }
    f.provincia { 'ZZ' }
  end
end 
```

和以下规格：

```
describe "/api/v1/clients/:client_id/locations.json", :type => :api do
  let(:client) { FactoryGirl.create(:client) }
  let(:url) { "/api/v1/locations" }

  describe 'Locations index' do
   it_behaves_like "requires a client"

   def do_verb
     get url+".json", client_id: client.id
   end

   describe "fetches all locations for a given client" do
    it "returns an empty array of locations when client has no locations" do
      do_verb
      body = JSON.parse(last_response.body)
      body.should eq([])
    end

    it "returns an array with client's locations" do
      location = FactoryGirl.create(:location)
      client.locations << location
      client.save
      do_verb
      body = JSON.parse(last_response.body)
      location_params = location.attributes
      body.should eq([location_params])
    end
  end
end
... 
```

现在，除了 :created_at 和 :updated_at 字段之间的比较之外，所有内容都按预期工作（没有双关语）。

我从运行规范中得到的错误如下：

```
 Diff:
   @@ -5,6 +5,6 @@
      "cap"=>"01000",
      "citta"=>"Nowhereland",
      "provincia"=>"ZZ",
   -  "created_at"=>Sat, 15 Sep 2012 16:39:13 UTC +00:00,
   -  "updated_at"=>Sat, 15 Sep 2012 16:39:13 UTC +00:00}]
   +  "created_at"=>"2012-09-15T16:39:13Z",
   +  "updated_at"=>"2012-09-15T16:39:13Z"}] 
```

如您所见，响应正文中的 created_at 和 updated_at 的表示方式与 FactoryGirl 返回的内容不同。

我显然在这里错过了什么？

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-04T21:18:26.153

JSON 没有日期/时间类型 - 所有日期/时间都表示为[ISO8601](http://en.wikipedia.org/wiki/ISO_8601)格式的字符串。因此，一旦从 JSON 对数据进行编码和解码，您最终就会将`DateTime`对象与字符串进行比较。

# c# - 在字段中保存参考

> ID：12439210
> 
> 赞同：0
> 
> 时间：2012-09-15T16:41:36.443
> 
> 标签：c#, reference, ref

我正在尝试以下代码：

```
public partial class Test: Window
{
    public Test(ref List</* Type */> LList)
    {
        [...]
        this.ListField = LList;

    }

    private  List</* Type */> ListField;
} 
```

C# 不在“ListField”中保存引用。例子：

```
Test test = new Test(ref /* List</* Type */>-variable*/)

---------

public partial class Test: Window
{
    public Test(ref List</* Type */> LList)
    {
        [...]
        this.ListField = LList;

    }

    private  List</* Type */> ListField;

    private void Window_Closing(object sender, System.ComponentModel.CancelEventArgs e)
    {
        ListField = null;
    }
} 
```

关闭表单后，给予的对象`public Test(ref List</* Type */> LList)`没有改变（它不是“空”）。

那么如何在“ListField”中保存引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T16:53:30.490

（我确定这是重复的，但我怀疑由于术语过多，很难找到示例。）

它肯定会在`ListField`. 这就是它所*能做*的——值`ListField`只能是一个引用，因为`List<T>`它是一个类。

听起来您真正想要的是保持 的别名行为`ref`，但这*仅*适用于参数 - 从不适用于字段。区分“按引用传递”作为[参数传递样式](http://pobox.com/~skeet/csharp/parameters.html)和引用本身（就[类和结构之间的区别](http://pobox.com/~skeet/references.html)而言很重要）是很重要的。

基本上，你不能直接做你想做的事。您可以创建一个`Wrapper<T>`类，创建`ListField`一个`Wrapper<List<T>>`并将引用（按值）传递给构造函数，但您不能只是`ref`用来做您想做的事。

# wix - 在德语 Windows XP 上安装最简单的插件

> ID：12439211
> 
> 赞同：0
> 
> 时间：2012-09-15T16:41:37.330
> 
> 标签：wix, firebreath

我试图弄清楚为什么最简单的 firebreath 插件不会安装在德语 Windows XP SP3 上。我将 Windows XP 作为虚拟机运行。

Windows XP 中的事件查看器告诉我有关 Windows 安装程序中止的一些信息，但没有告诉我原因。我以管理员身份登录。

安装程序适用于 Windows 7。

对于开发，我使用 Windows 7、Visual Studio 2010 和几个月前的 firebreath trunk。

这是已知问题吗？我可以使用哪些典型步骤来追踪问题？

问候， 克里斯蒂安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T01:54:35.213

如果您收到错误消息说找不到模块，这意味着您缺少使插件工作所需的 .dll 文件。如果它适用于大多数计算机（或许多计算机），最常见的是您的 .dll 是使用动态运行时编译的，在这种情况下，您必须为编译它的任何版本的 Visual Studio 安装通用运行时和。

例如，vs2008 的运行时可分发位于[http://www.microsoft.com/en-us/download/details.aspx?id=29](http://www.microsoft.com/en-us/download/details.aspx?id=29)

[Dependency Walker](http://www.dependencywalker.com/)可能会帮助您找出缺少哪个 dll。

# html - CSS：可变图像（横向/纵向）不同尺寸..需要在 div 容器中居中

> ID：12439212
> 
> 赞同：0
> 
> 时间：2012-09-15T16:41:44.810
> 
> 标签：html, css, image, layout

我正在为网站创建视频和图像模块，但在处理图像输出时遇到了麻烦，视频很好，因为它们是在编码相同尺寸后出来的……但是图像可以是任何尺寸，可以是横向或纵向.

所以我做了一个小的 js fiddle 模板[http://jsfiddle.net/t8RnL/](http://jsfiddle.net/t8RnL/)参数是，盒子容器需要相同的高度和宽度。容器需要在其中保存横向或纵向图像。

我需要将图像定位在中心...

有没有人有建议，我无能为力..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T16:55:08.820

如果您只需要在 DIV 容器中居中图像，请检查此小提琴：http: [//jsfiddle.net/t8RnL/2/](http://jsfiddle.net/t8RnL/2/)

# mysql - 将两列相乘，不同的表...一列为空

> ID：12439219
> 
> 赞同：0
> 
> 时间：2012-09-15T16:42:47.477
> 
> 标签：mysql, sql

在此连接查询中，我将来自不同表的两列`premium`&相乘`points`。我想要发生的是，如果表中没有加入列，`premium`那么乘数将为 1。

这是查询

```
 SELECT parent.*,(premiumtable.bid * pointstable.points) as total FROM strings parent
        LEFT JOIN premium premiumtable on parent.sid=premiumtable.sid AND premiumtable.paid='1'
        LEFT JOIN points pointstable on parent.sid=pointstable.`string-id`
        WHERE parent.category=:category AND (parent.submittype='0' OR parent.submittype='3') GROUP BY parent.id ORDER BY total LIMIT 5 
```

因此，如果没有加入，`premiumtable`而`premiumtable.bid * pointstable.points`不是`1 * pointstable.points`. `premiumtable.bid`充当乘数，如果不存在，我想`total`等于`pointstable.points`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T16:45:09.760

使用`case`声明：

```
SELECT parent.*,
       case when premiumtable.bid is null
            then pointstable.points
            else premiumtable.bid * pointstable.points
       end as total 
FROM strings parent
LEFT JOIN premium premiumtable on parent.sid=premiumtable.sid AND premiumtable.paid='1'
LEFT JOIN points pointstable on parent.sid=pointstable.`string-id`
WHERE parent.category=:category
AND (parent.submittype='0' OR parent.submittype='3')
GROUP BY parent.id
ORDER BY total
LIMIT 5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T16:45:20.627

尝试使用`COALESCE`：

```
SELECT   parent.*,
         (COALESCE(premiumtable.bid,1) * pointstable.points) as total 
FROM strings parent
LEFT JOIN premium premiumtable 
   on parent.sid=premiumtable.sid AND premiumtable.paid='1'
LEFT JOIN points pointstable 
   on parent.sid=pointstable.`string-id`
WHERE parent.category=:category 
AND (parent.submittype='0' OR parent.submittype='3') 
GROUP BY parent.id 
ORDER BY total LIMIT 5 
```

# ios - 意外删除了应用程序 delegate.h 和 .m 并且无法恢复它们

> ID：12439223
> 
> 赞同：0
> 
> 时间：2012-09-15T16:43:26.903
> 
> 标签：ios, xcode

我不小心从应用程序的文件夹中删除了应用程序`delegate.m`和文件。`.h`

然后在 xcode 中我可以看到名称 ( `Appdelegate.h and .m`) 但没有内容。

我在垃圾箱中找到了这些文件，然后将它们拖放到 xcode 中，现在我看到了两个文件的双份。

如果我尝试运行我的项目，我会不断收到此错误：

```
duplicate symbol _OBJC_IVAR_$_AppDelegate._window in: 
```

如果我删除两个重复项中的一个，则两者都将被删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T16:51:17.727

确保`delegate.m`只在编译源中列出一次。

完成这项工作；点击项目导航器左上角的项目，点击目标，选择`Build Phases`，展开`Compile Source`，现在检查是否`delegate.m`只在其中一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T16:54:46.553

除了@Till 的回答，我还建议您删除项目的 DerivedData 文件夹以从头开始重建项目（在“产品”菜单中执行“清理”可能就足够了，或者在“清理”菜单项上执行 alt-clic 以选择“Clean Build Folder...”会好一些，但有时还不够）

要删除所有中间文件并强制 Xcode 从头开始​​重建项目，避免使用旧的构建文件，请执行以下操作：

*   打开管理器（菜单“窗口”）
*   转到“项目”选项卡，然后在左侧选择您的项目
*   单击“派生数据”行旁边的“删除”按钮
*   重建你的项目

# c# - Get Dopdownlist value based on SelectedIndex

> ID：12439228
> 
> 赞同：1
> 
> 时间：2012-09-15T16:44:38.630
> 
> 标签：c#

How to Select Value from Particular Index i.e. 0, 1st , 2nd ,3rd or 4th of DropDownList.

Using C#.

I have a DropDownList which have 6 items, now I like to Select 4th item form that DropDownList.

Note that the value of this item is unknown; as it may change time to time; but I know that it will be at 4th place in dropdown.

I this my try, which not working

> string Item4;
> 
> item4 = DropDownList1.SelectedIndex = 3;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T16:49:10.643

字符串 item4 = DropDownList1.Items[3].Value;

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T16:49:14.013

要通过索引设置 Dropdown 的值，请使用以下命令：

```
DropDownList1.SelectedIndex = 3; 
```

要从下拉列表中获取值，请使用：

```
String Value = DropDownList.SelectedItem.Value; 
```

对于文本使用：

```
String Text = DropDownList.SelectedItem.Text; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T16:52:13.797

```
 string item4 = DropDownList1.Items[3].Value;

 item4 = DropDownList1.SelectedIndex = 3; is not correct. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-15T16:52:53.400

```
var listItem = dropDownList.Items[3];
var value = listItem.Value; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-15T16:47:06.973

```
DropDownList1.SelectedIndex = 3;
string item = DropDownList.SelectedItem.Value; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-15T16:53:26.950

这里有很多答案

```
ListItem item = DropDownList1.Items[3];
string value = item.Value;
string text = item.Text; 
```

# php - PHP $_POST Removing Backslash

> ID：12439234
> 
> 赞同：0
> 
> 时间：2012-09-15T16:45:14.380
> 
> 标签：php, special-characters

I'm submitting though a form with content like this:

```
This is a test \ or something 
```

Which ends up coming through POST as

```
This is a test  or something 
```

Notice the missing backslash. I really need the contents with the backslash maintained. Any help would be awesome.

EDIT:

Basically I'm just writing this out to a file:

```
<?php

frwite($file, $_POST['content']);

?> 
```

I'm not running stripslashes() against it or any other transformations

It works fine on a server with magic_quotes_gpc enabled, but this application may float between servers that support and some that don't.

Basically I'm looking for a way to make this work regardless of magic_quotes_gpc

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T16:55:03.977

在您的代码中的某处，您可能正在调用[stripslashes()](http://www.php.net/stripslashes)。检查您的代码是否没有此功能以及您可能包含的任何其他库。

# microprocessors - finding physical address in 8086 microprocessor

> ID：12439241
> 
> 赞同：2
> 
> 时间：2012-09-15T16:45:44.277
> 
> 标签：microprocessors

in 8086 microprocessor a 20 bit address is divided in 16bit+4bit address in which 4 bit binary is the segment address.when we convert a 4bit binary into hexadecimal it gets to 1bit hexadecimal.my question is when we encounter the problem of calculating the physical address from the logical, a 4bit hexadecimal segment address is given.why is it so? Also in the calculation of physical address we append 0 in lsb to find the base address of the segment and then we add the offset into it. what is the logic behind appending 0?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T06:52:58.687

一段等于一段。一个段落等于 16 个十进制字节或 10 个十六进制字节。因此，偏移量为零的段值`89AB`等于`89AB x 10`或`89AB0`（*注意：对于此上下文，所有地址都是十六进制的*）。

对于段偏移到 20 位绝对地址的转换示例，最好这样表示：

```
89AB:F012  ->  89AB   ->  89AB0   (paragraph to byte ->  89AB x 10 = 89AB0)
                F012  ->  0F012   (offset is already in byte unit)
                          ----- +
                          98AC2   (the absolute address) 
```

对于绝对地址到段偏移量的转换：

```
98AC2  ->  9 8AC2  ->  9     ->  9000  ->  9000:8AC2
           (split)     8AC2      8AC2 
```

或者...

```
98AC2  ->  98AC 2  ->  98AC  ->  98AC  ->  98AC:0002
           (split)        2      0002 
```

或者可以在中间分开...

```
98AC2  ->  98 AC2  ->  98    ->  9800  ->  9800:0AC2
           (split)      AC2      0AC2 
```

以上三个段偏移地址包括`89AB:F012`（原始地址值）都指向同一个绝对地址（同一个物理位置）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T08:47:23.107

任何被认为是段寄存器的寄存器中的值乘以 16（或向左移动一个十六进制字节；在十六进制数的末尾添加一个额外的 0），然后将偏移寄存器中的值添加到它。因此，可以使用以下公式找到 Segment 和 Offset 对的任意组合的绝对地址：绝对
内存
位置

=（段值 * 16）+ 偏移值

通过一些示例之后，这将变得更加清晰易懂： Segment:Offset 对的绝对或线性地址，F000:FFFD 可以通过简单地在 Segment 值的末尾插入一个零在您的脑海中很容易地计算出来（这与乘以 16 相同）然后添加偏移值：F0000 + FFFD ------ FFFFD 或 1,048,573（十进制）

这是另一个例子： 923F:E2FF ->

```
 923F0
       + E2FF
       ------
        A06EF   or   657,135(decimal) 
```

现在让我们计算可以使用 Segment:Offset 引用表示的最大值的绝对内存位置：FFFF0 + FFFF
------- 10FFEF 或 1,114,095（十进制） 实际上，直到 8086 之后的一段时间，如此大的值才真正对应于实际的内存位置。一旦 PC 拥有超过 1MiB 的内存变得很普遍，程序员就开发了利用它的方法来发挥自己的优势，最后一个字节成为现在称为 HMA（高内存区）的一部分。但是直到那个时候，如果程序尝试使用超过 20 位绝对地址 (1MiB) 的 Segment:Offset 对，CPU 会截断最高位（8086/8088 CPU 只有 20 条地址线），有效地映射任何超过 FFFFFh (1,048,575) 的值到第一个段内的地址。因此，10FFEFh 被映射到 FFEFh。

使用 Segment:Offset 对的缺点之一（可能会让你们大多数人感到困惑）是大量这些对引用相同的确切内存位置这一事实。例如，下面的每个 Segment:Offset 对都指代内存中完全相同的位置：

# c# - 当文本框失去焦点时验证数据

> ID：12439245
> 
> 赞同：0
> 
> 时间：2012-09-15T16:46:29.083
> 
> 标签：c#, asp.net

在我的 ASP.Net Web 应用程序中，有一个用于接收 ProductId 的文本框。当用户将数据输入到 ProductId 文本框并移至下一个文本框时，我想根据表验证数据，如果找到匹配的记录，我想在不同的控件（只读和普通文本框）中显示产品详细信息，否则我想要显示有关“新产品”的消息并继续。我不想在用户输入所有数据并按下保存按钮后进行验证，但应该立即完成。我希望 Web 表单文本框会有一个 LostFocus 事件，但不知道如何处理这个要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T16:55:19.973

ASP.NET 验证器没有 ajax 样式的立即检查。

1.  将自定义验证器附加到连接到验证方法服务器端的文本框。
2.  使用 javascript，您需要将事件处理程序连接到 focusout 事件并进行 ajax 调用。该调用会将值发送回服务器并获得有效与否的响应。

这个网站：[http](http://brian.dobberteen.com/code/jquery_ajax_custom_validator/) ://brian.dobberteen.com/code/jquery_ajax_custom_validator/会帮助你很多，但有一件事是这只会在页面提交时触发。您需要将一个额外的事件处理程序连接到您的文本框以在 focusout 上调用验证方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T16:56:11.590

这是一个简单的解决方案，阅读这篇文章：

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.servervalidate.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.servervalidate.aspx)

您只需要执行 javascript 调用来触发服务器验证，使用事件 onlostfocus。

# css - 字体似乎不像本地托管

> ID：12439246
> 
> 赞同：0
> 
> 时间：2012-09-15T16:46:30.783
> 
> 标签：css, cross-browser, font-face

我想使用名为**Rexlia**的字体。CSS代码是这样的：

```
@font-face
{
    font-family: "Rexlia";
    src: url('rexliarg.ttf');
} 
```

.ttf 和 css 文件在同一个文件夹中。在本地字体作品中，但我将站点部署到主机，字体系列是 Rexlia，但字体似乎不像在本地。字体失去了它的设计。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T17:04:15.017

您的 src 路径是相对于网站的，而不是 CSS 文档。如果发布的路径在子文件夹中有 CSS，它将无法解析。尝试使用已发布版本的绝对路径来快速排除这种情况。

# python - Python - 如何制作后台响应超时功能

> ID：12439249
> 
> 赞同：0
> 
> 时间：2012-09-15T16:46:56.360
> 
> 标签：python, multithreading, timer, timeout, xmpp

我使用 Python SleekXMPP 库制作了一个[Farkle Jabber 游戏机器人。](http://en.wikipedia.org/wiki/Farkle)在多人游戏模式中，用户轮流与用户对战。我正在尝试设置暂停时间，例如，如果您的对手在 1 分钟内没有回应，您就赢了。

这是我尝试过的：

```
import sleekxmpp
...
time_received={}
class FarkleBot(sleekxmpp.ClientXMPP):
    ...
    def timeout(self, msg, opp):                  
        while True:
            if time.time() - time_received[opp] >= 60:
               print "Timeout!"
               #stuff
               break
    def messages(self, msg):
        global time_received
        time_received[user] = time.time()
        ...
        if msg['body'].split()[0] == 'duel':
            opp=msg['body'].split()[1]  #the opponent
            ...   #do stuff and send "Let's duel!" to the opponent.
            checktime=threading.Thread(target=self.timeout(self, msg, opp))
            checktime.start() 
```

上面代码的问题是它会冻结整个班级，直到 1 分钟过去。我怎样才能避免这种情况？我尝试将`timeout`功能放在课堂之外，但没有任何改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T16:55:11.057

如果您必须等待某事，最好使用 time.sleep() 而不是忙着等待。你应该像这样重写你的超时：

```
def timeout(self, msg, opp, turn):
    time.sleep(60)
    if not turn_is_already_done:
        print "Timeout" 
```

如您所见，您必须以某种方式跟踪是否已按时收到移动。

因此，更简单的解决方案可能是使用`threading.Timer`. 然后，您必须设置一个处理程序来处理超时。例如

```
def messages(self, msg):
    timer = threading.Timer(60, self.handle_timeout)
    # do other stuff
    # if a move is received in time you can cancel the alarm using:
    timer.cancel()

def handle_timeout(self):
    print "you lose" 
```

# python - ASE（Python 模块）和 ABINIT 计算器

> ID：12439252
> 
> 赞同：1
> 
> 时间：2012-09-15T16:47:20.173
> 
> 标签：python, python-2.7

我是 ASE（一个 Python 包）的初学者，并尝试使用 ASE 的 ABINIT（DFT 代码）计算器。我的操作系统是 UBUNTU。我已经下载了 ABINIT 二进制代码并将其提取到 /home/work/abinit-5.4.3 并尝试导出以下变量

```
export ABINIT_SCRIPT=/home/work/abinit.py
export ABINIT_PP_PATH=/home/work/abinit-5.3.4/tests/Psps_for_test 
```

在 /home/work/ 的 abinit.py 中，我有

```
import os
abinit = '/home/work/abinit-5.3.4'
exitcode = os.system('%s < %s.files > %s.log' % (abinit, label, label)) 
```

但是，当我尝试运行简单的 Si 批量模拟时，出现以下错误：

```
Traceback (most recent call last):
  File "Test_ASE_Abinit.py", line 21, in <module>
    e = bulk.get_potential_energy()
  File "/usr/lib/python2.7/dist-packages/ase/atoms.py", line 548, in get_potential_energy
    return self._calc.get_potential_energy(self)
  File "/usr/lib/python2.7/dist-packages/ase/calculators/abinit.py", line 204, in get_potential_energy
    self.update(atoms)
  File "/usr/lib/python2.7/dist-packages/ase/calculators/abinit.py", line 103, in update
    self.initialize(atoms)
  File "/usr/lib/python2.7/dist-packages/ase/calculators/abinit.py", line 199, in initialize
    raise RuntimeError('No pseudopotential for %s!' % symbol)
RuntimeError: No pseudopotential for Si! 
```

尽管我将它放在文件夹中，但似乎找不到赝势，我也尝试过铝并得到相同的错误。

- - - - - - 编辑 - - - - - - - - - - - - - - - - - - -

我的 ASE-Python 代码是：

```
from ase import *
from ase.calculators.abinit import Abinit

a0 = 5.43
bulk = Atoms('Si2', [(0, 0, 0),
                     (0.25, 0.25, 0.25)],
             pbc=True)
b = a0 / 2
bulk.set_cell([(0, b, b),
               (b, 0, b),
               (b, b, 0)], scale_atoms=True)

calc = Abinit(label='Si',
              nbands=8,
              xc='PBE',
              ecut=50 * Ry,
              mix=0.01,
              kpts=[10, 10, 10])

bulk.set_calculator(calc)
e = bulk.get_potential_energy() 
```

# eclipse - Eclipse：使用共享库进行交叉编译。链接器错误“找不到 -lMyProject”

> ID：12439254
> 
> 赞同：0
> 
> 时间：2012-09-15T16:47:21.703
> 
> 标签：eclipse, linker, cross-compiling

所以我在 Eclipse CDT 的 Linux 386 主机上编译 MIPS 架构。我有一个项目应该给我一个可以在另一个项目中使用的库。该项目的编译工作得很好。我最终得到一个`libMyProject`文件。因此，在我的第二个项目中，我使用`-L`路径选项和库选项来引用库文件`-l`。所有名称都是正确的，但是我最终遇到了链接器错误（找不到文件）。那就是调用链接器：

```
mips-openwrt-linux-g++ -L"/home/user/workspace/MyProject/DebugLibrary" -o "MySecondProject"  ./HelloWorld.o   -lMyProject 
```

这就是我在eclipse中遇到的错误：

```
/home/user/openwrt/trunk/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/gcc/mips-openwrt-linux-uclibc/4.6.3/../../../../mips-openwrt-linux-uclibc/bin/ld: cannot find -lMyProject
collect2: ld returned 1 exit status 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T19:34:38.337

好的，我找到了。`.a`必须在链接器的命令行模式中将扩展附加到库中：

```
${COMMAND} ${FLAGS} ${OUTPUT_FLAG} ${OUTPUT_PREFIX}${OUTPUT}.a ${INPUTS} 
```

# php - 将样式表插入 iframe

> ID：12439255
> 
> 赞同：0
> 
> 时间：2012-09-15T16:47:41.237
> 
> 标签：php, javascript, jquery, iframe

我打开了这个线程，因为我尝试了很多我在这里或其他地方找到的方法来将我的自定义样式表插入到带有 jQ​​uery 的 iframe 中，但它们都不起作用。现在我被困住了。我愿意接受任何建议，对我来说，如果有任何其他的灵魂，就没有必要用 jQuery 来做。

这就是我现在所拥有的：

```
<!doctype html>
<html lang="hu">
<head>
<meta charset="utf-8">
<title><?php echo $this->title; ?></title>
<link rel="stylesheet" type="text/css" href="css/style.css" media="all" />
<script src="//ajax.googleapis.com/ajax/libs/mootools/1.4.5/mootools-yui-compressed.js"></script>
<script src="js/mootools-more.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>
<script type="text/javascript">
jQuery(document).ready(function($) {
  $('#iwiw').load(function(){
    $('#iwiw').contents().find('head').append('<link href="css/iwiw.css" rel="stylesheet" type="text/css" />');
  });
});
</script>
</head>
<body>
<header><!-- content --></header>
<div id="container">
  <div id="left">
    <iframe id="iwiw" src="http://iwiw.hu/like.jsp?u=<?php echo $url; ?>&title=<?php echo str_replace('+', '%20', urlencode($this->title)); ?>&t=tetszik&s=white" width="220px" height="120px" style="border: none;" scrolling="no" frameBorder="0"></iframe>
  </div>
  <div id="right"><!-- content --></div>
</div>
<footer><!-- content --></footer>
</body> 
```

代码中的 $url 是使用 urlencode 编码的当前 url，$this->title 是当前页面标题，您可以看到我的文档类型是 html5，而您没有看到 iframe 的 SRC 是 XHTML 过渡。

*实际上 iframe 是原始工作代码，如果您想对其进行测试，只需将 $url 替换为您网站的 url 并将 $this->title 替换为您的网站标题。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T16:51:33.683

除非当前页面也来自 iwiw.hu，否则您不能这样做。有一个[跨域限制](https://stackoverflow.com/questions/3113253/whats-the-point-of-the-anti-cross-domain-policy)`<iframe>`，如果您创建的输出在您的域之外，您将无法触摸它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T16:57:04.037

这里有一些答案……除非 iframe 域与主页不同。

[如何将 CSS 应用于 iframe？](https://stackoverflow.com/questions/217776/how-to-apply-css-to-iframe)

# javascript - 全局变量和全局对象的属性之间有什么区别吗

> ID：12439256
> 
> 赞同：12
> 
> 时间：2012-09-15T16:47:47.330
> 
> 标签：javascript, global-variables

我正在阅读 David Mark 关于 js 框架“Sencha”的以下分析：[https](https://gist.github.com/3279190) ://gist.github.com/3279190并在那里他说......

> 他们想要的是一个全局变量，但他们最终得到的是全局对象的一个​​属性。根据规范和（和实施历史），两者之间有足够的差异，需要注意不要混淆它们（就像这里所做的那样）。

`var my_global = 123;`...但是据我所知，和（在浏览器环境中）之间没有任何区别`window.my_global = 123;`（在该示例中，我假设环境是浏览器-因此使用，但显然`window`我可以使用`this.my_global`全局对象在不同环境中运行时会有所不同）。

但是忽略这个微小的差异，将属性分配给全局对象和创建全局变量之间有区别吗？我没想到，创建全局变量只是将属性分配给全局对象的另一种方式。

我相信某些浏览器中可能存在问题，如果它们有一个 id 为“my_global”的元素，那么显然这可能会导致 JavaScript 引用正确的东西出现问题，但我不确定如何/是什么导致该问题（例如将属性分配给全局对象会导致元素 id 问题发生，还是声明了导致元素 id 问题的全局变量？）

有人可以为我澄清一下吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-17T09:48:52.193

**更新，2020 年 4 月**

正如 D. Pardal 的评论中所指出的，下面的第一句话写于 2012 年，在支持[ES 模块](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules)（[规范](https://262.ecma-international.org/#sec-modules)）的环境中不再总是正确的。在 ES 模块中，`var`语句不会产生全局对象的属性。

**原始答案**

在全局范围内使用创建的变量`var`确实会创建全局对象的属性。但是，此属性与尚未使用 创建的全局对象的属性具有不同的行为`var`。

首先，变量声明的执行方式有所不同：`var`全局范围内的语句在执行任何代码之前创建全局对象的属性，这种效果通常称为*提升*，在网络上有很好的记录（参见下面的参考资料） .

其次，全局变量，不像全局对象的属性不是用 来创建的`var`，不能使用`delete`操作符删除（尽管[在旧版本的 IE 中不是这样](http://perfectionkills.com/understanding-delete/#ie_bugs)）。`delete`不能用于删除变量。这种差异归结为每个对象属性具有的内部[属性属性。](http://ecma-international.org/ecma-262/5.1/#sec-8.6.1)这些属性在 ECMAScript 规范中指定。在 ECMAScript 5 术语中，`var foo = "bar"`使用属性创建`foo`全局对象的`[[Configurable]]`属性`false`，而（在全局范围内）使用属性`this.foo = "bar"`创建属性。`foo``[[Configurable]]``true`

参考：

*   Dmitry Soshnikov 在他的优秀系列文章[ECMAScript 262-3 中详细描述](http://dmitrysoshnikov.com/tag/ecma-262-3/)了这一点。我建议阅读第 2 章的所有内容，但最相关的部分称为 [About Variables](http://dmitrysoshnikov.com/ecmascript/chapter-2-variable-object/#about-variables)。

*   前面链接的[kangax 文章](http://perfectionkills.com/understanding-delete/#ie_bugs)包含许多有关浏览器错误和偏差的相关信息和详细信息，以及有关`window`.

*   Angus Croll 的[JavaScript 文章中的变量与属性](http://javascriptweblog.wordpress.com/2010/08/09/variables-vs-properties-in-javascript/)，链接到许多与此答案相同的资源。

*   规范：[ECMAScript 5.1](http://ecma-international.org/ecma-262/5.1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T19:42:09.450

我不知道有任何实际差异，但在引用为全局或作为 window.var 之间肯定存在一些差异。一个简单的例子：

```
`'use_strict';
console.info(window.foo);
console.info(foo);` 
```

`window.foo 将简单地返回未定义。foo 将给出未定义的错误。所以是的，它们是不同的。但是在好的代码中（我的例子是非常糟糕的代码）看起来没有任何区别。（但如果有的话，我真的很想知道更多关于它的信息:)）`

 `* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-15T17:19:22.133

```
var count = 123

var global_object = {
    count:var = 456
console.log(this.count) //returns 456

}

console.log(count) //returns 123

console.log(global_object) //returns 456 
```

上面，count首先被定义为一个全局变量。然后，它被定义为全局对象内的一个属性。全局对象内的定义对该对象是本地的。

我现在发现我的答案存在问题，当我第一次发布此问题时，我没有想到。在上面最受好评的答案中，我注意到它正确地表明，在问题中的全局变量的情况下，“var”在其定义中使用，但在全局对象的情况下，没有使用“var”。我仍然希望范围在这里发挥作用（它会在 ActionScript 中）。

我对上面的例子还有其他一些问题。count:var = 对我来说是错误的。也许应该是 var count = 456。但是；我仍然希望在函数内声明的变量仅在该函数内具有作用域。所以示例中的 console.log 表达式应该成立。`

# java - 当其中一个字段不是字符串而是另一个对象时，如何使用 Spring MVC 提交表单？

> ID：12439268
> 
> 赞同：1
> 
> 时间：2012-09-15T16:49:17.453
> 
> 标签：java, forms, spring-mvc, entity, submit

我的应用程序基本上是一本字典。当我单击“提交”时，一个新的 Word 对象将与其几个字段一起保存到数据库中。其中一个字段称为类别，它显示 Word 属于哪个组。当前，此值是 Word 对象的字符串字段。

这是 jsp.file 的简化代码

```
 <form:form method="post" action="addNewWord.html" commandName="word" >

    <table>

    //many other fields;    

        <tr>
            <td>Category:</td>
            <td><form:select path="category" items="${CATEGORIES}"
                    var="cat">
                </form:select></td>
            <td><form:errors path="category" cssClass="error" /></td>
        </tr>

        <tr>
            <td colspan="2"><input type="submit" value="Add new word" /></td>
        </tr>
    </table>

</form:form> 
```

这是 Word 对象。

```
@Entity
@Table(name = "word")
public class Word {

    //other instance variables either primitives or Strings;

    @Column(name = "category", nullable = false, length = 80)
    private String  category;
        //getters-setters 
```

在这种情况下，一切都很好并且运行良好，并且 Word 对象被保存到数据库中。但是，如果我决定创建一个独立的 Category 对象并且 Word 对象中的 category 字段**不是 String 而是 Category 的一个实例，该怎么办？**

```
 @ManyToOne
@JoinColumn(name = "category_id")
private Category category; 
```

我应该如何修改 .jsp 文件上的表单以提交具有不是字符串而是类别的字段的词对象？就整体而言，让我展示一下提交调用的控制器中的方法：

```
@RequestMapping(value = "/addNewWord", method = RequestMethod.POST)
public String addNewWord(@ModelAttribute Word word, BindingResult result, Model model) {
    WordValidator validator = new WordValidator();
    validator.validateWord(word, result, wordService.getAllWord(), categoryService.getAllCategories());
    if (!result.hasErrors()) {
        wordService.save(word);
        word.clearValues();
    }
    fillCategoryNames(model);
    return "addNew";
} 
```

我有一种感觉，我应该使用@InitBinder 方法，但我不知道如何使用，这更像是一种感觉，而不是坚如磐石的事实。欢迎任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T17:28:47.810

干得好 ：

```
public class CategoryEditor extends PropertyEditorSupport {

    // Converts a String to a Category (when submitting form)
    @Override
    public void setAsText(String text) {
        Category c = new Category();
        c.setName(text);
        this.setValue(c);
    }

    // Converts a Category to a String (when displaying form)
    @Override
    public String getAsText() {
        Category c = (Category) this.getValue();
        return c.getName();
    }

} 
```

和

```
...
public class MyController {

    @InitBinder
    public void initBinder(WebDataBinder binder) {
        binder.registerCustomEditor(Category.class, new CategoryEditor());
    }

    ...

} 
```

更多信息：

*   [自定义 WebDataBinder 初始化](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc-ann-webdatabinder)（Spring doc）
*   [Spring 3 类型转换](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/validation.html#core-convert)（Spring 文档）

# iphone - 如何将白色像素更改为黑色像素

> ID：12439269
> 
> 赞同：0
> 
> 时间：2012-09-15T16:49:33.217
> 
> 标签：iphone, ios, core-graphics

我有一个这样的png图像：

![在此处输入图像描述](../Images/26ca35d66b2a6c1d8d8268f23a1fffb3.png)

如何在不改变波形本身的 alpha 的情况下反转波形周围的帧，使其显示为黑色。（波形部分是透明的。）

它可能与 CGCreateImageMask 有关，但我无法弄清楚确切的过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T17:06:59.333

弄清楚了：

```
-(void)drawRect:(CGRect)rect {
    UIImage *wf = [UIImage imageNamed:@"waveform.png"];
    [wf drawInRect:rect blendMode:kCGBlendModeXOR alpha:1.0f];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T16:57:14.993

看一下[Quartz 2D Programming Guide](https://developer.apple.com/library/mac/documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_images/dq_images.html#//apple_ref/doc/uid/TP30001066-CH212-CJBHBCGB)：它非常详细地解释了这种操作，比如如何用颜色屏蔽图像（例如见图 11-9）等等。

# vim - vim：光标默认不闪烁

> ID：12439270
> 
> 赞同：3
> 
> 时间：2012-09-15T16:50:01.510
> 
> 标签：vim

我安装了vim，打开它，发现光标不闪烁。这是默认行为吗？

我怎样才能让它闪烁？

Ubuntu 12.04，vim 7.3.429。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-15T19:34:24.933

那是终端设置，与 Vim 无关。许多人发现闪烁的光标会分散注意力，这就是为什么它可能默认关闭的原因。

当您在同一个机器上本地工作时（即没有远程访问），我建议使用 GVIM，即 Vim 的图形版本。尽管它通常看起来和行为与控制台 Vim 相同，但它具有一些不错的视觉功能（例如下卷曲拼写错误），支持更多的映射组合键，并避免了粘贴文本的一些问题。在 GVIM 中，您可以影响光标 cp。`:help 'guicursor'`.

# jquery - GMaps API V3 - 向内拖动 - 并在地图外拖放

> ID：12439272
> 
> 赞同：3
> 
> 时间：2012-09-15T16:50:17.003
> 
> 标签：jquery, google-maps, drag-and-drop, maps

我正在寻找一种可能性，可以单击 Google 地图内的标记，将其拖放到地图外的单独对象上（使用 jquery 进行拖放事件侦听）。有这种可能吗？也许与另一个地图提供商？

非常感谢！

# text - AWK 比较两个文件、匹配第一个字段、粘贴数据等

> ID：12439273
> 
> 赞同：0
> 
> 时间：2012-09-15T16:50:34.543
> 
> 标签：text, awk

我有这个脚本，它用于比较两个文件中的第一个字段，我希望它忽略大小写，尝试添加一行 IGNORECASE = 1; 但似乎不起作用，

你能告诉我如何忽略案例吗？

```
BEGIN {
   FS=OFS=";"
}

FNR==NR {
   array[$1]=$2
   next
}

{
   if ($1 in array) { 
      print $1";" array[$1]";" $2
   }

   else {
      if ($2 in values) {
         print  $1";" "only_at_" FILENAME ";" $0 " same path    as " values[$2]
      }
      else {
         print  $1";" "only_at_" FILENAME ";" $0 " no path  found"
      }
   }
   values[$2]=$1
} 
```

假设我有

文件 1

```
\\FILE48\bucan-CFAN_Subcommittees;\\SERVER24\dfs\Shared\can\CFAN Subcommittees 
```

文件2

```
\\file48\bucan-CFAN_Subcommittees;/fs8_100g/FILE48/BU/can/CFAN Subcommittees
\\FILE58\userhome_e;/fs1_100g/FILE58/userhome 
```

预期产出

```
\\FILE48\bucan-CFAN_Subcommittees;\\SERVER24\dfs\Shared\can\CFAN Subcommittees;/fs8_100g/FILE48/BU/can/CFAN Subcommittees
\\MLISFILE58\userhome_e;only_at_file2;\\MLISFILE58\userhome_e;/fs1_100g/MLISFILE58/userhome no path found 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T21:45:14.910

Pretty simple with the [`join`](http://manpages.debian.net/cgi-bin/man.cgi?query=join) command

```
join -t';' -i -j 1 -o 1.1,1.2,2.2 File1 File2 
```

Using ";" as a field separator, case-insensitively join the two files on field 1, and output the first and second fields from file1 and the 2nd field from file2.

If you really want awk, this will do the same thing:

```
awk '
   BEGIN {FS=OFS=";"} 
   NR==FNR {key[tolower($1)] = $0; next} 
   tolower($1) in key {print key[tolower($1)], $2}
 ' file1 file2 
```

# javascript - Javascript 循环不会自行更新

> ID：12439277
> 
> 赞同：0
> 
> 时间：2012-09-15T16:51:14.020
> 
> 标签：javascript

此代码似乎运行不佳：http: [//jsfiddle.net/5GEru/1/](http://jsfiddle.net/5GEru/1/)

```
var left = 0;
function mouvement(){
    var bouger = document.getElementById("bouge");    
    bouger.style.left= left;
    left++;

    mouvement();

}
window.onload = mouvement();​ 
```

变量会自行递增，但不知何故，每次运行函数时都不会重新应用左值。它保持在最初的 0。

我究竟做错了什么？

谢谢你们的提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T16:53:04.603

您将浏览器与无效的 CSS 混淆。浏览器正在寻找一个单元。

尝试：

```
bouger.style.left = left + "px"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T16:54:01.923

您需要在左侧添加“px”。

```
bouger.style.left= left + "px"; 
```

当然，它也跑得很快，你什么都看不到，所以我有一个修改版本：

[http://jsfiddle.net/5GEru/2/](http://jsfiddle.net/5GEru/2/)

此外，您的代码应该在某个时候终止。例如，当 left 变得大于 SOMETHING 时。如果你当然使用 jQuery，你可以这样做：

```
$(function(){
    $("#bouge").animate({"left": 500},2000);
}); 
```

见： http: [//jsfiddle.net/5GEru/6/](http://jsfiddle.net/5GEru/6/)
​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T16:56:07.650

用于`setInterval()`一遍又一遍地执行一个功能，

这是您使用的更新代码`setInterval()`，[http://jsfiddle.net/5GEru/4/](http://jsfiddle.net/5GEru/4/)

您还需要`px`在此行中添加，`bouger.style.left= left+'px';`

# json - 配置应用程序 yaml 以从静态目录中提供 JSON 文件

> ID：12439279
> 
> 赞同：0
> 
> 时间：2012-09-15T16:51:18.043
> 
> 标签：json, file, google-app-engine, yaml

我像这样配置了我的 app.yaml：

```
- url: /data
  static_dir: templates/data
  http_headers:
    Content-Type: application/json 
```

如在[GAE config yaml中看到的](https://developers.google.com/appengine/docs/python/config/appconfig)

我做了一个 AJAX 请求来获取 JSON；我有一个 1KB 的“sic.json”，格式正确（我检查了......）

当我运行[dev_appserver](https://developers.google.com/appengine/docs/python/tools/devserver)时，使用 Chrome 开发人员工具，我看到返回响应为类型：

```
Content-Type:application/octet-stream 
```

当我在 jQuery/Javascript 中检索这些结果时，该字符串不被识别为 JSON；如果强迫我首先使用 JSON.Parse ...

但是当我实际部署时，app yaml 配置似乎可以工作；它将静态文件作为 JSON 提供，因此 JSON.Parse 是不必要的......

我是否应该期待这一点，就为文件提供 http_headers 服务而言，dev_appserver 与实时部署不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T20:52:12.003

I'm not sure `Content-Type` is one the headers meant to be specified within `http_headers`. Assuming you don't have anything else concerning templates/data dir that would imply otherwise in app.yaml, the following will work as expected:

```
- url: /data
  static_dir: templates/data
  mime_type: application/json 
```

# objective-c - 如何在 monotouch 中使用此 Objective-C 代码

> ID：12439281
> 
> 赞同：-2
> 
> 时间：2012-09-15T16:51:31.767
> 
> 标签：objective-c, uiwebview, xamarin.ios

我需要在视图控制器中使用多个`UIWebView`，但在启动应用程序几分钟后，它会因为`LoadRequest`.

[我在这里](http://double-slash.net/2010/10/18/using-multiple-ios-uiwebview-objects/)找到了这个代码块，`UIWebViewDelegate`但我无法成功地将它转换为 C#。

```
-(void)spinlockedWebViewLoad:(NSArray*)arr {
  NSAutoreleasePool* pool=[[NSAutoreleasePool alloc] init];
  UIWebView* webView=(UIWebView*)[arr objectAtIndex:0];
  NSURLRequest* request=(NSURLRequest*)[arr objectAtIndex:1];
  @synchronized(self) {
  spinlock=webView;
  [webView loadRequest:request];
  while (spinlock==webView) [NSThread sleepForTimeInterval:0.1];
  }
  [pool drain];
 }

-(BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType {
  if (spinlock!=webView) {
     [NSThread detachNewThreadSelector:@selector(spinlockedWebViewLoad:) toTarget:self withObject:[NSArray arrayWithObjects:webView,request,nil]];
     return NO;
  }
  return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:26:20.003

在您的代码中，无需使用（ObjectiveC 风格）委托，只需使用托管事件：

```
void SpinlockedWebViewLoad (NSObject [] arr)
{
    ...
    UIWebView webView  = (UIWebView) arr [0];
    webView.ShouldStartLoad += ShouldStartLoad;
    ...
}

bool ShouldStartLoad (UIWebView webView, NSUrlRequest FileWebRequest, UIWebViewNavigationType navigationType)
{
    ...
} 
```

# php - 来自 2 个表的 Sql SELECT

> ID：12439284
> 
> 赞同：2
> 
> 时间：2012-09-15T16:51:51.907
> 
> 标签：php, mysql, sql

我有 2 个带有流动列的同一张桌子

```
id,
timestamp,
country,
data 
```

`table 1`正在为 存储信息`country A`，并且 `table 2`正在为 存储信息`country B`

我需要去做`SELECT from both table ORDER BY timestamp`

任何人都可以用最好和正确的方法帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T16:54:23.133

请试试

```
(SELECT * FROM `table 1`)
UNION
(SELECT * FROM `table 2`)
ORDER BY timestamp; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T16:53:27.770

```
SELECT * FROM tableA
UNION ALL
SELECT * FROM tableB 
```

您需要应用于`ORDER BY`组合（UNION'ed）结果集，因此最终查询将如下所示：

```
SELECT * FROM (
    SELECT * FROM tableA
    UNION ALL
    SELECT * FROM tableB
) ORDER BY timestamp; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T17:15:40.667

选择 t1.id,t1.timestamp,t1.country,t1.data,t2.id,t2.timestamp,t2.country,t2.data from tableA as t1,tableB as t2 order by t1.timestamp;

# mobile - 停止 iframe 重定向/打开移动 safari 触发器 io

> ID：12439298
> 
> 赞同：1
> 
> 时间：2012-09-15T16:53:52.653
> 
> 标签：mobile, iframe, trigger.io

我想将 iframe 托管为应用程序，它在 android 上运行良好，应用程序内浏览器允许我处理应用程序内的所有 url，但 iOS 上的相同 iframe 总是在 safari 中打开点击的链接，是否有解决方法到这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T21:41:14.913

当我最初编写我的应用程序时，我最初用于执行跨域请求的 iFrame 也有类似的问题。我发现每次我尝试将内容加载到 iFrame 以完成我的请求时，Safari 都会不断启动。最后我不得不将它换成 forge.request.ajax 以防止这种情况发生。

可能与您遇到的问题不同，但希望它可以引导您朝着正确的方向了解它发生的原因。

# php - REST、API 和 Php 用于使用 android 应用进行在线搜索

> ID：12439299
> 
> 赞同：0
> 
> 时间：2012-09-15T16:54:00.520
> 
> 标签：php, android

我有一个 android 应用程序我接受要搜索的关键字，并且我想搜索 ebay（一个示例），例如搜索“Samsung S3”并在我的应用程序中显示值我不知道该怎么做，我被告知关于 REST、PHP 和 API

我是否需要与数据库通信，因为我没有添加任何东西？有没有办法只在 php 中制作 API，而不是使用 REST

我真的没有这方面的经验..我不是试图征求辩论，我只是想要一个非常简单的答案。所以我会知道我将从哪个方面开始。谢谢您的提前支持

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:17:43.737

这是一个非常广泛的问题。如果有问题的网站 (eBay) 有用于搜索的 HTTP API，那么您根本不需要 PHP 或数据库。您只需从 Android 应用程序本身向 API 发出请求。eBay 搜索 API 记录在[http://developer.ebay.com/devzone/finding/Concepts/FindingAPIGuide.html](http://developer.ebay.com/devzone/finding/Concepts/FindingAPIGuide.html)

如果没有 API，网站可能会限制您如何使用他们的数据。

# java - 在 Seam 3 / Hibernate 中对实体的更改未刷新到 DB

> ID：12439301
> 
> 赞同：2
> 
> 时间：2012-09-15T16:54:02.170
> 
> 标签：java, hibernate, jboss7.x, seam3

我有一个带有`@ConversationScoped`bean 的 Seam 3/JBoss/Hibernate 项目。此 bean 管理`@Entity`. 我希望能够保存对实体所做的任何更改并将用户保留在当前页面上。

```
@Named
@Stateful
@ConversationScoped
public class TeamManagementBean implements Serializable {

    @PersistenceContext(type = PersistenceContextType.EXTENDED)
    private EntityManager entityManager;

    @Inject
    Conversation conversation;

    @Inject
    FlushModeManager flushModeManager;

    protected Team team;

    @Inject
    @CurrentUser
    private User currentAccount;

    @Begin
    public void loadTeam(Team team) {
        if(conversation.isTransient()) conversation.begin();
        flushModeManager.setFlushModeType(FlushModeType.MANUAL);
        this.team = team;
    }

    public void save() {
        if(team.isUnsaved()) entityManager.persist(team);
        entityManager.flush();
    } 
```

调用时`save()`，对话中的实体会更新（即更改出现在对话和网页上。但是，即使我结束对话，数据也不会写入数据库。

在站点的另一部分，我能够通过在调用该方法`faces-config.xml`时重定向到不同的页面来更新数据库中的实体。`save()`但我想在保存此实体时将用户保持在同一页面上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:23:45.943

这取决于实体在传递给时的加载方式`loadTeam()`；这应该通过使用`entityManager.find()`或使用查询来完成。如果实体属于当前持久性上下文，Hibernate 只会更新数据库，您可以使用 进行检查[`entityManager.contains()`](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#contains%28java.lang.Object%29)，例如：

```
 public void save() {
    ...
    System.out.println("contains(): " + entityManager.contains(team));
    entityManager.flush();
} 
```

如果可能的话`System.out.println()`，当然应该使用您的日志记录工具来代替调用。

如果实体在传递给之前已分离`loadTeam()`，则必须使用`entityManager.merge()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T04:19:02.083

如果您不使用任何事务，则 CUD 操作将在业务层对象中完成。您必须在执行任何 CUD 操作之前开始事务，并在操作完成后提交（或刷新？？？）它。

尝试这个：

```
entityManager.getTransaction().begin();
entityManager.persist(team);
entityManager.getTransaction().commit(); 
```

更多信息：[http ://docs.jboss.org/hibernate/orm/4.0/hem/en-US/html/transactions.html](http://docs.jboss.org/hibernate/orm/4.0/hem/en-US/html/transactions.html)

# php - PHP Parse Error 语法错误 - 意外 ')'，期待 '('

> ID：12439307
> 
> 赞同：3
> 
> 时间：2012-09-15T16:54:45.190
> 
> 标签：php, ssh, cron, zip, jpeg

我正在尝试使用 ssh 终端在目录中运行 php 脚本。当我尝试运行脚本时，出现错误：

```
(uiserver):USER:~/directory/folder > php zipper.php
X-Powered-By: PHP/4.4.9
Content-type: text/html

<br />
<b>Parse error</b>:  syntax error, unexpected ')', expecting '(' in <b>/BLA/htdocs/directory/folder/zipper.php</b> on line <b>7</b><br /> 
```

奇怪的是，当我插入一个小 html 并访问该脚本所在的页面时，它工作正常。但是，这对我没有帮助，因为我需要使用 cron 运行它。

这是我要运行的脚本：

```
<?php 
//date variable
$today = date("Ymd");
//create an instance of ZipArchive class
$zip = new ZipArchive();
//create the archive called images.zip and open it
$result = $zip->open('images.zip', ZipArchive::CREATE);
if ($result) {
    //open the directory with the files that need to be archived
    $d = dir("turbo/");
    //loop through the files in $d
    while (false !== ($entry = $d->read())) {
        //use a regular expression with preg_match to get just the jpgs
        if(preg_match("/\w*\.jpg/",$entry)) {
            //add the file to the archive
            $zip->addFile("turbo/".$entry,$entry);
        }
    }
    //close the directory and archive
    $d->close();
    $zip->close();
} else {
    //display the error
    echo "Failed: $result.\n";
}
//deletes all jpg files
//foreach(glob('/www/images/*.jpg') as $file){
//  if(is_file($file))
//  @unlink($file);
//}
?> 
```

这是出错的行：

```
$result = $zip->open('images.zip', ZipArchive::CREATE); 
```

我使用 1and1（我知道）作为我的主机，我尝试创建一个 .htaccess 文件来强制使用 php5，但这不起作用。

我想知道这个脚本在语法上有什么问题？我要做的就是将所有 jpg 图像压缩到一个目录中。

任何，任何，帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T17:32:34.053

似乎这种方法在 PHP 4 中不起作用（[手册](http://php.net/manual/en/ziparchive.open.php)提到`(PHP 5 >= 5.2.0)`）。

我尝试在 PHP 4 沙箱中运行您的代码，我得到[了与您相同的输出](http://sandbox.onlinephpfunctions.com/code/8610cf251bda5747a2fd89ef42d10c279709ed1a)。当您[选择 PHP 5.2.15 并运行代码](http://sandbox.onlinephpfunctions.com/code/6b55dd7131be2e2b0a0486fb5b7461e74471e64b)时，一切正常（除了该站点提到出于安全原因禁用了 open() ）。

所以看来你运气不好。我建议查看[这篇 Stackoverflow 帖子](https://stackoverflow.com/a/450193/1313164)中提到的 File_Archive 包。根据他们的网站，它将在 PHP 4.3.3 上运行

**File_Archive 的依赖项**

```
PHP 4.3.3
PEAR Installer 1.4.0b1
MIME_Type
pcre extension
zlib extension
Mail_Mime (Optional)
Mail (Optional)
Cache_Lite 1.5.0 (Optional)
bz2 extension (Optional) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T17:16:12.807

我只是在 PHP 5.4.6 上“按原样”运行代码。它工作得很好（除了在 zip 文件中捕获 .JPG）。

正如 Terry Seidler 和 Dan 提到的，这可能是一个版本问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T17:02:22.010

我认为可以`ZipArchive::CREATE`尝试该错误`ZIPARCHIVE::CREATE`。

# java - 创建 Android 项目后 Eclipse Juno 崩溃

> ID：12439312
> 
> 赞同：2
> 
> 时间：2012-09-15T16:55:09.737
> 
> 标签：java, android, eclipse, crash-reports

创建 Android 项目后，我的 Eclipse Juno 每次都会崩溃。在我单击向导`Finish`中的按钮后，使用 100 % CPU-Time。`"New Android Project"``javaw.exe`

我等了大约 30 分钟，但 Eclipse 根本没有反应——所以我每次都必须终止该进程。

结果是损坏的无用项目文件。

```
OS: Windows 7 SP1 x64
Java: 7 JDK x64
Eclipse: Juno 4.2.0 
```

Eclipse 的全新安装并没有解决问题。我还重新安装了 Android SDK 和 ADT-Plugin，但什么也没发生。只有 Android 项目会导致问题。

我是在使用已知的不兼容配置，还是这是一个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T21:05:52.477

- 检查您的环境变量

-尝试更改 Eclipse 工作区

- 试试 32 位 JDK

您也可以尝试查看 Windows 日志。Windows 事件查看器可能已捕获 Eclipse 可能引发的异常。

最后虽然不理想，您可以尝试通过命令行创建项目：http: [//developer.android.com/training/basics/firstapp/creating-project.html#CommandLine](http://developer.android.com/training/basics/firstapp/creating-project.html#CommandLine)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T17:14:40.623

尝试增加 Eclipse 的内存设置。[从这里](http://source.android.com/source/using-eclipse.html)按照步骤

引用自链接。

> 增加 Eclipse 的内存设置 Android 项目足够大，以至于 Eclipse 的 Java VM 在编译时有时会耗尽内存。通过编辑 eclipse.ini 文件来避免这个问题。在 Apple OSX 上，eclipse.ini 文件位于
> 
> /Applications/eclipse/Eclipse.app/Contents/MacOS/eclipse.ini 与内存相关的默认值（从 Eclipse 3.4 开始）：
> 
> -Xms40m
> -Xmx256m
> -XX:MaxPermSize=256m
> Android开发推荐设置：
> 
> -Xms128m
> -Xmx512m
> -XX:MaxPermSize=256m

# java - 我应该使用Hadoop吗？

> ID：12439315
> 
> 赞同：0
> 
> 时间：2012-09-15T16:55:12.033
> 
> 标签：java, multithreading, hadoop

我有一个批处理作业，它检索大量相互独立的 Web 服务。从一个 REST 响应中检索到的数据绝不依赖于或与来自另一个 REST 响应的数据一起使用，除非在所有处理完成后计算一些轻量级统计数据。

目前，我将有效负载集分布在 11 个段中，每个段在单独的 Java 线程中运行。完成最后一个线程后，将计算最终统计信息。根据每个 REST 请求是否具有相对于先前检索的新数据，整个批处理可能需要 4 到 25 分钟之间的任何时间。

批量大小相对适中，上述时间窗口也不错，因为数据仅每小时左右更新一次，所以如果我每 30 分钟从 cron 运行一次作业，我几乎消除了跳过时间序列的机会。但是，我正在考虑增加批量大小。

我是 Hadoop 新手，我想知道这个用例场景是否是 MapReduce 实现的一个很好的例子。一般来说，您如何决定何时使用多线程应用程序与升级到 Hadoop？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T17:14:17.193

我会告诉网络爬虫，分成要处理的网站列表确实是hadoop案例。在那里，它实际上并没有用作 MapReduce，而是用作可扩展的分布式调度程序。
您给出的数字（11 段）听起来是边界情况。如果您要说 100 个答案是显而易见
的。同时，如果除了每个段中的数据处理之外，您还有一些有意义的结果聚合 - 使用 Hadoop MapReduce 将是另一个优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T17:17:23.463

MapReduce 用于特定任务：计算聚合函数（如 sum、max、count）。你的任务适合这门课吗？然后，由于您的工作量不是很大，请查看 MapReduce 的内存实现。Hadoop 将所有数据写入磁盘。

# c++ - 在 Xcode 4.4 中调试 libc++ 的问题

> ID：12439318
> 
> 赞同：6
> 
> 时间：2012-09-15T16:55:37.213
> 
> 标签：c++, debugging, xcode4.4, lldb, libc++

当我尝试在 c++ 上调试列表迭代时遇到问题。

我做了一个简单的测试应用程序：

```
int main(int argc, const char * argv[])
{
// insert code here...
std::cout << "Hello, World!\n";

std::list<int> list;
list.push_back(1);
list.push_back(2);
--> list.push_back(3);    //Line before step over
    for (std::list<int>::const_iterator i = list.begin(); i != list.end(); i++)
    {
      std::cout << *i << std::endl;
    }
    return 0;
} 
```

在调试时，当我在标有箭头的行上时，当我跨过时，它开始从 c++ 文件中插入代码：'list'。我必须跨过 15 次，直到它最终到达 for 语句中的代码。

这个问题只发生在 Xcode 4.4 中。在 Xcode 4.3 中，调试工作完美。

这里有一些不同的场景有不同的结果：

1.  使用 LLVM GCC 4.2 作为编译器 → 它工作正常。
2.  使用 Apple LLVM 编译器 4.0 并为 C++ 标准库设置 libstdc++（GNU C++ 标准库）→ 它工作正常。
3.  Apple LLVM 编译器 4.0 并为 C++ 标准库设置 libc++（支持 C++11 的 LLVM C++ 标准库）→ 出现问题。

在我正在进行的项目中，我们使用的是 Apple LLVM 编译器 4.0 和 libc++（支持 C++11 的 LLVM C++ 标准库），所以我需要为场景 3 解决这个问题）。

有谁知道会发生什么以及是否有解决办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:17:48.677

这是 lldb / llvm 与 libc++ 交互的问题，自从我们启用它以来，我就看到了它，尽管我认为只有 libc++ / lldb 开发人员才能知道那是什么。

虽然这不是一个解决方案，但它似乎是 llvm 3.1（当前版本的 Xcode 4.5）的命令行问题。如果我做：

```
clang++ -g -O0 -stdlib=libc++ -std=c++11 test.cpp -o test
lldb test
breakpoint set --file test.cpp --line 8 
```

...然后尝试使用 'n' 单步执行直到 main 结束，它会跳转到列表的源代码：

```
* thread #1: tid = 0x1c03, 0x00000001000010a2 test`main [inlined] std::__1::__list_imp<int, std::__1::allocator<int> >::begin() at list:543, stop reason = step over
    frame #0: 0x00000001000010a2 test`main [inlined] std::__1::__list_imp<int, std::__1::allocator<int> >::begin() at list:543
   540      {
   541  #if _LIBCPP_DEBUG_LEVEL >= 2
   542          return iterator(__end_.__next_, this);
-> 543  #else
   544          return iterator(__end_.__next_);
   545  #endif
   546      } 
```

我同意，这确实会减慢开发/调试时间，应该向[lldb 开发人员报告](http://llvm.org/bugs/)

# python - Django 评论中的脏话

> ID：12439320
> 
> 赞同：4
> 
> 时间：2012-09-15T16:56:00.877
> 
> 标签：python, django, nlp

由于 Django 不处理过滤脏话 - 有人对在 django 中实现某种自然语言处理/过滤脏话的简单方法有任何建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-15T17:12:02.920

Django 确实处理过滤脏话。

来自[https://docs.djangoproject.com/en/1.4/ref/settings/#profanities-list](https://docs.djangoproject.com/en/1.4/ref/settings/#profanities-list)：

> PROFANITIES_LIST
> 
> 默认值：()（空元组）
> 
> 一个不雅语的元组，作为字符串，在 is 时将被禁止在评论 `COMMENTS_ALLOW_PROFANITIES`中`False`。

也就是说，您仍然需要填充该列表。[一些](https://superuser.com/questions/37597/where-do-you-find-a-good-list-of-banned-words) [开始](http://www.infochimps.com/datasets/list-of-dirty-obscene-banned-and-otherwise-unacceptable-words)[的](http://www.mdaniels.com/profanity/)[链接](http://www.bannedwordlist.com/) 。[_](http://urbanoalvarez.es/blog/2008/04/04/bad-words-list/)

我也会熟悉[斯肯索普问题](http://en.wikipedia.org/wiki/Scunthorpe_problem)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T17:12:14.013

我个人说...不要打扰。如果您创建更好的过滤器，他们只会以不同的方式输入...

但是，这里有一个简单的例子：

```
import re
bad_words = ['spam', 'eggs']
# The \b gives a word boundary so you don't have the Scunthorpe problem: http://en.wikipedia.org/wiki/Scunthorpe_problem
pattern = re.compile(
    r'\b(%s)\b' % '|'.join(bad_words),
    re.IGNORECASE,
)

some_text = 'This text contains some profane words like spam and eggs. But it wont match spammy stuff.'
print some_text
# This text contains some profane words like spam and eggs. But it wont match spammy stuff.

clean_text = pattern.sub('XXX', some_text)
print clean_text
# This text contains some profane words like XXX and XXX. But it wont match spammy stuff. 
```

# javascript - 滑动滚动javascript不起作用

> ID：12439323
> 
> 赞同：0
> 
> 时间：2012-09-15T16:56:26.720
> 
> 标签：javascript, jquery, html, css, scroll

我在设置幻灯片滚动时遇到了困难——我已经在这个特定的 div 上工作了好几天，并且多次修改了我的问题。我相信我现在拥有使用上下图像在 div 中垂直滚动内容所需的一切。但是我无法让这段代码工作——尽管它似乎在我找到它的 Scripterlative 上工作得很好。

我正在尝试将滑动滚动 javascript 配置为与放置在固定位置的两个向上/向下图像一起使用；js文件中的说明在某些地方有点模棱两可，我希望能得到一点帮助。不确定是什么导致了问题。

***更新

我现在可以向下滚动，但不能向上滚动。并且以光速向下滚动，当鼠标离开图像时突然减速。有任何想法吗？***

这就是我所拥有的：

```
 HTML/CSS

 <div id="repertoiredetails">
 <div id="repertoirescroll">

 <div class="arrows">
 <img id="upButton" src="images/arrowup.png" title="up" alt="up" width="15" height="28">
 <img id="downButton" src="images/arrowdown.png" title="down" alt="down" width="15" height="28">
 </div>

 <p>content</p>
 </div>
 </div>

 #repertoiredetails {
 background-color:#000;
 width:400px;
  margin-top:140px;
 height:1000px; 
  margin-left:-2px;
  padding-top:5px;
  overflow:hidden;
 }

  #repertoirescroll {
width:100%; 
 }

 #repertoirescroll p {
 text-align:justify;
 text-justify:inter-word; 
 color:#999; 
 font-family:'Arial Narrow', Arial,   sans-serif;
 font-size:13px;
 padding:20px;
}

.arrows {
height:50px;
left:350px;
z-index:999;
top:450px;
position:fixed;
} 
```

***更新的代码*** 按照指示放置在结束 div 曲目的下方：

```
<script type='text/javascript' >

new SlideScroll( 'upButton', 'self', 'up');
new SlideScroll( 'downButton', 'self', 'down'); 
```

并且 slidescroll.js 在头部。对于固定图片链接，js需要“self”的ID。

对此的任何帮助表示赞赏！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T19:06:10.337

我调查了您的代码并在 slidescroll.js 中发现了问题。要解决此问题，请在下面替换

```
yStep =  -this.speedFactor * (((vBoth ? this.btnHeight / 2 : this.btnHeight) - my) / (vBoth ? this.btnHeight /2 : this.btnHeight)); 
```

和

```
yStep =  -this.speedFactor * ((my - (vBoth ? this.btnHeight / 2 : this.btnHeight)) / (vBoth ? this.btnHeight /2 : this.btnHeight)); 
```

这将解决您的问题。

# java - 将代码放在花括号块中是什么意思

> ID：12439331
> 
> 赞同：1
> 
> 时间：2012-09-15T16:57:25.227
> 
> 标签：java, php

在 php 和其他一些语言中，我可以有一个没有任何入口条件的代码块，例如 if、for 或函数调用：

```
 echo "Hello World";

   {
    echo "What does this mean";

   } 
```

这究竟意味着什么。如果我没记错的话，我也可以在java中做到这一点。这究竟意味着什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T16:59:50.070

[http://en.wikipedia.org/wiki/Block_(programming)](http://en.wikipedia.org/wiki/Block_%28programming%29) - 块创建某种代码的原子单元。在执行的顶级/进入级别流程中，一个块被视为相当于一行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-15T17:03:31.863

它定义了范围。即块内定义的变量在块外将不可用。

# iphone - 在 iPhone 模拟器中录制音频时出错

> ID：12439333
> 
> 赞同：1
> 
> 时间：2012-09-15T16:57:45.410
> 
> 标签：iphone, ios, ios-simulator

使用 AVFoundation 在 iPhone 模拟器中录制音频时出现以下错误。我的代码在设备上运行良好。

有任何想法吗？提前致谢。

> 2012-09-15 17:51:39.592 MySpellings[538:3503] 加载/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn: dlopen(/System/Library/) 时出错Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn，262）：找不到符号：__ *CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework/Versions/A/Security
> 预期在：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation 在/System/Library/Frameworks/Security .framework/Versions/A/Security 2012-09-15 17:51:39.598 MySpellings[538:3503] 加载/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn 时出错：dlopen（/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn，262）：找不到符号：_* _CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework /版本/A/安全
> 预期在：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation 在/System/Library/Frameworks/Security .framework/Versions/A/Security 2012-09-15 17:51:39.607 MySpellings[538:3503] 加载/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn 时出错：dlopen（/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn，262）：找不到符号：__ *CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework /版本/A/安全
> 预期在：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation 在/System/Library/Frameworks/Security .framework/Versions/A/Security 2012-09-15 17:51:39.612 MySpellings[538:3503] 加载/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn 时出错：dlopen（/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn，262）：找不到符号：_* _CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework /版本/A/安全
> 预期在：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation 在/System/Library/Frameworks/Security .framework/Versions/A/Security 2012-09-15 17:51:40.932 MySpellings[538:4907] aq@0xea13200: ConvertInput: AudioConverterFillComplexBuffer 返回 560226676, packetCount 21 2012-09-15 17:51:42.254 MySpellings[538: c07] 刷新挂起的输入终止 - 错误 '!dat'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-15T11:30:20.877

在我的情况下，显示错误是因为我使用了错误的比特率：

我忘记了我使用Kbps并`AVEncoderBitRateKey`使用bps。所以，在我将比特率乘以 后`1000`，错误就消失了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-06-26T08:47:04.850

录制为 m4a 格式（AVFormatIDKey = kAudioFormatMPEG4AAC）时，我在模拟器中录制音频时也遇到了问题。没有录制音频，控制台日志包含“AudioConverterFillComplexBuffer”错误。

但是，录制为 .caf 格式 (kAudioFormatAppleIMA4) 确实有效，这对于某些人来说可能是一种解决方案。

```
recordSettings = [NSDictionary
                  dictionaryWithObjectsAndKeys:
                  [NSNumber numberWithInt:AVAudioQualityMin],
                  AVEncoderAudioQualityKey,
                  [NSNumber numberWithInt:16],
                  AVEncoderBitRateKey,
                  [NSNumber numberWithInt: 1],
                  AVNumberOfChannelsKey,
                  [NSNumber numberWithFloat:16000.0],
                  AVSampleRateKey,
                  [NSNumber numberWithInt: kAudioFormatAppleIMA4],
                  AVFormatIDKey,
                  nil]; 
```

# c++ - C++ 主循环抽象

> ID：12439335
> 
> 赞同：4
> 
> 时间：2012-09-15T16:58:01.413
> 
> 标签：c++, user-interface, c++11

由于几乎每个 GUI 都使用主循环来执行代码（例如修改用户界面），是否有用于抽象实际实现的库？与此类似`std::thread`，无论您使用什么 GUI 工具包，拥有一个通用界面都会很棒。

开放源代码加分 1 分，许可许可证加分 2 分（BSD、MIT、...）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T23:42:26.250

如果您正在寻找一个快速、通用的事件循环，您可以使用 libev [http://software.schmorp.de/pkg/libev.html](http://software.schmorp.de/pkg/libev.html)。

相反，如果您正在寻找一组为不同 GUI（例如 Gtk、Windows、Cocoa 等）的事件循环提供一致接口的包装函数，您可以查看 wxWidgets [http://www.wxwidgets 的方式。 org/](http://www.wxwidgets.org/)处理它（如果有的话）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T18:26:41.560

[Zinc](http://www.psa-software.com/gui_hmi.html)就是这样一个库，我很多年前就使用过它，所以它已经存在了相当长的一段时间（10 多年）。

> Zinc 作为面向对象的 C++ 平台独立框架附带完整的源代码，用于实现跨平台应用程序的图形用户界面 (GUI)。Zinc 是一个可扩展和可定制的全功能工具包，用于创建事件驱动的 GUI 应用程序。Zinc 可用于嵌入式和桌面平台。用于嵌入式平台的 Zinc 可用于实时操作系统，例如 Wind River 的 VxWorks。Zinc 利用 Zinc 对象的本机平台的外观和感觉。

# android - Android HashMap 和 SimpleAdapter - 连接字符串

> ID：12439336
> 
> 赞同：0
> 
> 时间：2012-09-15T16:58:04.003
> 
> 标签：android, hashmap, string-concatenation, simpleadapter

我有一个哈希图，我正在加载到一个简单的适配器中

```
public static ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String,    String>>();

....
    musiclist = (TextView) getView().findViewById(R.id.checkTextView);
    filelv = (ListView)getView().findViewById(R.id.FileList);
    filelv.setItemsCanFocus(false);
    filelv.setChoiceMode(AbsListView.CHOICE_MODE_MULTIPLE);

    //if (trackcount>previousTrackCount){
    ListAdapter playlistadapter = new SimpleAdapter(getActivity().getApplicationContext(), songsList, R.layout.file_view,
                new String[] { "songTitle","songAlbum", "songPath" }, new int[] { R.id.checkTextView, R.id.text2, R.id.text3 });
    filelv.setAdapter(playlistadapter); 
```

这完美地工作，给我在我的列表视图中显示的所有三个值。

但是...我希望能够连接字符串，以便每个列表项的第二行如下

songAlbum(songArtist)

例如，有注意左输（Foo Fighters）

当我将 ListAdapter 更改为以下内容时，第二行只是空白

```
ListAdapter playlistadapter = new SimpleAdapter(getActivity().getApplicationContext(), songsList, R.layout.file_view,
                new String[] { "songTitle","songAlbum" + "(" + "songArtist" + ")", "songPath" }, new int[] { R.id.checkTextView, R.id.text2, R.id.text3 }); 
```

我已经测试了所有字符串以确保它们包含数据。

请提出建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:10:08.847

您将不得不添加另一个文本框。并使用下面的代码..当然，您将必须拥有一个包含所有 4 个键的哈希图。

```
SimpleAdapter playlistadapter = new SimpleAdapter(getActivity().getApplicationContext(), songsList, R.layout.file_view,
                new String[] { "songTitle","songAlbum", "songartist","songPath" }, new int[] { R.id.checkTextView, R.id.text2, R.id.text3, R.id.text4 });

playlistadapter.setViewBinder(new SimpleAdapter.ViewBinder(){
    boolean setViewValue(View view, Object data, String textRepresentation){
            if(view.getId () == R.id.songartist){
                view.setText("("+textRepresentation+")");
            }
    }
}); 
```

# android - Android - dx 故障处理 - 不明智或错误地使用核心类 2012，Android 4 更新

> ID：12439340
> 
> 赞同：0
> 
> 时间：2012-09-15T16:58:34.280
> 
> 标签：android, ant, dalvik, dex

当我在尝试构建我的应用程序时收到“不明智或错误地使用核心类”错误时，我搜索了 Stackoverflow，并按照一些建议，使用 ant 和 jarjar 来构建应用程序。

ant 构建在 dx 步骤失败，错误报告如下。

我在网上搜索了有关如何修复“无法强制”错误的建议（见下文），但没有发现任何帮助。

请注意，ant 构建中的 jarjar 步骤似乎有效。当我检查 bin/repackagedclasses.jar 中的 java 目录的内容时，它们是空的，所有内容都转移到了等效的重命名目录 (/java)。

另请注意，我遵循的建议（使用 ant 和 jarjar）已有两年多的历史并适用于 android 2.x。有可能（可能？）使用 android 4 和相关基础设施，它们将无法工作，只是一个猜测。

最后一点。我在 sdk/platform-tools 中更改了 dx，如下所示：

```
exec java $javaOpts -jar "$jarpath" "$@"
exec java $javaOpts -jar "$jarpath" --core-library "$@" 
```

无论是否进行上述更改，对 ant 构建或 Eclipse 构建都没有影响。

```
-dex:
      [dex] Converting compiled files and external libraries into /home/adonnini/workspace3/CommManagerN6/bin/classes.dex...
       [dx] 
       [dx] UNEXPECTED TOP-LEVEL EXCEPTION:
       [dx] com.android.dx.util.ExceptionWithContext: can't coerce string{"android.permission.ACCESS_CACHE_FILESYSTEM"} to Lcommmanager/java/lang/String;
       [dx]     at com.android.dx.util.ExceptionWithContext.withContext(ExceptionWithContext.java:46)
       [dx]     at com.android.dx.dex.cf.CfTranslator.processFields(CfTranslator.java:176)
       [dx]     at com.android.dx.dex.cf.CfTranslator.translate0(CfTranslator.java:133)
       [dx]     at com.android.dx.dex.cf.CfTranslator.translate(CfTranslator.java:87)
       [dx]     at com.android.dx.command.dexer.Main.processClass(Main.java:483)
       [dx]     at com.android.dx.command.dexer.Main.processFileBytes(Main.java:455)
       [dx]     at com.android.dx.command.dexer.Main.access$400(Main.java:67)
       [dx]     at com.android.dx.command.dexer.Main$1.processFileBytes(Main.java:394)
       [dx]     at com.android.dx.cf.direct.ClassPathOpener.processArchive(ClassPathOpener.java:245)
       [dx]     at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:131)
       [dx]     at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:109)
       [dx]     at com.android.dx.command.dexer.Main.processOne(Main.java:418)
       [dx]     at com.android.dx.command.dexer.Main.processAllFiles(Main.java:329)
       [dx]     at com.android.dx.command.dexer.Main.run(Main.java:206)
       [dx]     at com.android.dx.command.dexer.Main.main(Main.java:174)
       [dx]     at com.android.dx.command.Main.main(Main.java:91)
       [dx] Caused by: java.lang.UnsupportedOperationException: can't coerce string{"android.permission.ACCESS_CACHE_FILESYSTEM"} to Lcommmanager/java/lang/String;
       [dx]     at com.android.dx.dex.cf.CfTranslator.coerceConstant(CfTranslator.java:210)
       [dx]     at com.android.dx.dex.cf.CfTranslator.processFields(CfTranslator.java:160)
       [dx]     ... 14 more
       [dx] ...while processing ACCESS_CACHE_FILESYSTEM Lcommmanager/java/lang/String;
       [dx] ...while processing android/commmanager/Manifest$permission.class
       [dx] 
       [dx] 1 error; aborting

BUILD FAILED
/home/adonnini/workspace3/CommManagerN6/build.xml:964: The following error occurred while executing this line:
/home/adonnini/workspace3/CommManagerN6/build.xml:376: null returned: 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T00:36:13.287

您没有说明您传递给`jarjar`的参数，但从外观上看，您可能已经告诉它将对类的所有引用更改`java.lang`为在您的包命名空间中。如果这就是你所做的，它肯定行不通，你得到的错误只是冰山一角。

这是错误的粗略翻译：某些代码被声明为采用 class 的实例`commmanager.java.lang.String`，但它被传递了一个实例`java.lang.String`（即，任何普通字符串常量都是其实例的类）。这两个类之间没有继承关系，因此代码无效。

至少，您可能想让您的`jarjar`调用更具体地说明它正在修改的类名。

# java - 是否应该每次读取跨线程变量都处于 volatile 或 Atomic 或被同步包装？

> ID：12439346
> 
> 赞同：1
> 
> 时间：2012-09-15T16:59:09.273
> 
> 标签：java, multithreading, concurrency

我可以说如果一个变量可以被其他线程修改，我就不能在没有内存屏障的情况下安全地读取它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T17:09:51.140

是的，差不多。如果您将 (w) 写入线程 T1 中的变量并从线程 T2 读取 (r) 相同的变量，则您需要在 (w) 和 (r) 之间建立发生前的关系，以保证 ( w) 将对 (r) 可见。Java 内存模型定义 ( [JLS 17.4.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5-320) ) 存在先发生关系的情况：

*   监视器上的解锁发生在该监视器上的每个后续锁定之前。
*   对 volatile 字段（第 8.3.1.4 节）的写入发生在对该字段的每次后续读取之前。
*   线程上的 start() 调用发生在已启动线程中的任何操作之前。
*   线程中的所有操作都发生在任何其他线程从该线程上的 join() 成功返回之前。
*   任何对象的默认初始化发生在程序的任何其他操作（默认写入除外）之前。

# mysql - Grails中具有复合主键的脚手架MySQL表

> ID：12439347
> 
> 赞同：1
> 
> 时间：2012-09-15T16:59:11.873
> 
> 标签：mysql, grails, scaffolding, composite-primary-key

```
package website

class Translations {

    String content;

    /* Primary key consists of language_id and text_id */

    static constraints = {
        content();
    }

} 
```

对于具有单个主键的表，一切都很清楚。

但我想知道如何处理复合键。

是否可以使用 Grails 2.1.1 搭建这些表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T17:59:52.943

尽管您的域类有一些额外的要求，但它是直接受支持的。[请参阅http://grails.org/doc/latest/guide/GORM.html#compositePrimaryKeys](http://grails.org/doc/latest/guide/GORM.html#compositePrimaryKeys)上的 GORM 文档

# mysql - MySQL 表设计结构用户偏好

> ID：12439348
> 
> 赞同：1
> 
> 时间：2012-09-15T16:59:14.887
> 
> 标签：mysql, database-design, web, query-optimization

我最近的任务是帮助建立一个约会网站的数据库。我对数据库的概念一点也不陌生，但我遇到了障碍，不知道如何继续。

请注意，我已经尝试寻找答案，但结果都不是很清楚，这就是我自己问这个的原因。此外，我熟悉 1 对 1、1 对多和多对多的概念。

该网站的用户将选择他们在匹配中寻找的内容，并提供他们自己的信息以进行匹配。

每个用户有 8 或 9 个属性。其中 3 个属性可以有多个值，我可以描述它的最佳方式是一组应该是可搜索的复选框（例如，用户可以具有外向、关怀和有趣的个性）。

从我搜索的内容来看，最受欢迎的答案是：

1.  一个表中的每个复选框都有一个字段
2.  使用多对多关系，每个复选框都是表中的记录

而且，我应该存储他们正在寻找的内容，还是应该将其保留为用户自行运行的查询？

如果我存储用户正在查找的内容，他们将搜索相同的 8 到 9 个属性，但它们都可能包含多个值（例如，您只能是一个性别，但您可能正在寻找任何性别的人）。

我希望能够存储用户在匹配中寻找的内容，以便可以自动建议匹配，但我不知道如何以有效的格式创建这个结构，如果有的话。

但我不知道其中哪一个，或者我不知道的第三种解决方案，最适合网站设计。我原本以为我可以让每个属性都有多个值，一个 BIT 字段，每个位都是一个复选框，但后来我意识到我不知道我是否可以有效地查询这些信息。如果有办法让我做到这一点，我会更喜欢这种方法，只要没有性能问题。

参与的每个人都希望该网站会变得流行，所以我想知道为大量用户提供服务的最佳结构。

如果我的问题已经有了答案，我深表歉意，我发现没有一个答案适合我的情况，而且我真的不知道如何为搜索引擎表达我的问题。

谢谢你能给我的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:29:43.680

你想多了。暂时把它全部放在一张桌子上。当您看到数据集的类型/大小时，您始终可以对其进行优化并编写 sql 以使其产生相同的输出。

在实际实施之前不要进行优化。这听起来不像它会有数十亿行。

# jquery - 如何使用 jQuery 获取元素的框阴影颜色？

> ID：12439350
> 
> 赞同：3
> 
> 时间：2012-09-15T16:59:35.337
> 
> 标签：jquery, html, css, colors, rgb

一切都在我尝试过的问题中：`$('#my-div').css('box-shadow');`但它返回类似：`rgb(25,65,588) 10px 10px 10px`。如何只获得颜色？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T17:09:02.047

这将得到 rgb 或 rgba 表达式

```
$('#my-div').css('box-shadow').replace(/^.*(rgba?\([^)]+\)).*$/,'$1') 
```

然后您可以使用转换器获取十六进制值

# visual-studio-2012 - 错误 DEP0700：APPMODEL 版本中的错误

> ID：12439351
> 
> 赞同：0
> 
> 时间：2012-09-15T16:59:37.793
> 
> 标签：visual-studio-2012

在 VISUAL STUDIO 2012 EXPRESS 中部署应用程序时，出现以下错误：

错误 1 ​​错误：DEP0700：应用注册失败。Windows 无法安装包 2a787e3d-dd2e-476a-a012-a7ab38019030，因为此包需要更高的 Windows 版本。该包请求 Windows 版本 6.2 和 AppModel 版本 1，而当前的 Windows 版本是 6.2 和 AppModel 版本 0。 (0x80073cfd) App1

我的操作系统是 WINDOWS 8 发布预览版

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T03:58:43.860

# mysqldump - MySQL为每个数据行转储一条 INSERT 语句

> ID：12439353
> 
> 赞同：197
> 
> 时间：2012-09-15T16:59:48.590
> 
> 标签：mysqldump

带有以下声明：

```
mysqldump --complete-insert --lock-all-tables --no-create-db 
--no-create-info --extended-insert --password=XXX -u XXX 
--dump-date yyy > yyy_dataOnly.sql 
```

我得到如下 INSERT 语句：

```
INSERT INTO `table` VALUES (1,'something'),(2,'anything'),(3,'everything'); 
```

我需要的是这样的：

```
INSERT INTO `table` VALUES (1,'something');
INSERT INTO `table` VALUES (2,'anything');
INSERT INTO `table` VALUES (3,'everything'); 
```

有没有办法告诉“mysqldump”为每一行创建一个新的 INSERT 语句？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：313
> 
> 时间：2012-09-15T17:01:51.973

[采用：](https://stackoverflow.com/a/1293575/13627)

```
mysqldump --extended-insert=FALSE 
```

请注意，多个插入将比一个大插入慢。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2019-03-03T11:39:56.110

在较新的版本中，对标志进行了更改：来自文档：

> --扩展插入，-e

使用包含多个 VALUES 列表的多行语法编写 INSERT 语句。这会导致转储文件更小，并在重新加载文件时加快插入速度。

> - 选择

此选项默认启用，是 --add-drop-table --add-locks --create-options --disable-keys --extended-insert --lock-tables --quick -- 组合的简写设置字符集。它提供了快速转储操作并生成可以快速重新加载到 MySQL 服务器的转储文件。

因为 --opt 选项默认启用，您只需指定它的反面， --skip-opt 即可关闭几个默认设置。有关选择性启用或禁用受 --opt 影响的选项子集的信息，请参阅 mysqldump 选项组的讨论。

> --skip-extended-insert

关闭扩展插入

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-20T22:52:20.527

对于 MariaDB，您将使用

```
mysqldump -u root -p'secret' --skip-extended-insert dbnamehere > y.sql 
```

MaraiDB mysqldump[文档](https://mariadb.com/kb/en/mysqldump/)

# assembly - 如果在 MIPS 中其他

> ID：12439356
> 
> 赞同：-1
> 
> 时间：2012-09-15T17:00:20.607
> 
> 标签：assembly, mips

我正在学习 MIPS 编程，我正在尝试实现 If else 条件。但问题是当我输入 2 选择减法条件时，程序不起作用。我知道可以使用 BNE，但我想学习 BEQ。请告诉我这个代码有什么问题

```
.text

main:

li $t0,1
li $t1,2
li $t2,3
li $t3,4

li $v0,5
syscall

move $s0,$v0

beq $s0,$t0,ADDTN
ADDTN:

li $a0,40
li $v0,1
syscall

li $v0,5
syscall

move $s1,$v0

li $v0,5
syscall

move $s2,$v0

add $a0,$s1,$s2

li $v0,1
syscall

li $v0,10
syscall

beq $s0,$t1,SUBTN
SUBTN:

li $a0,50
li $v0,1
syscall

li $v0,5
syscall

move $s3,$v0

li $v0,5
syscall

move $s4,$v0

sub $a0,$s3,$s4

li $v0,1
syscall

li $v0,10
syscall 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-04T23:24:59.480

如果您要在 equals 上使用分支，那么您的程序实际上应该执行一些有意义的分支。检查您的分支指令：

```
 beq $s0,$t0,ADDTN
ADDTN: 
```

在 MIPS 中，您必须记住 PC（程序计数器）将简单地逐行前进，除非另有指示。分支指令可以将 PC 引导到程序中的其他位置；但是，在您的代码中，分支指令告诉 PC 前进到下一行，这正是程序在没有分支指令的情况下所做的。

此外，如果您只想执行这些特定的标号，ADDTN、SUBTN，那么每个标号在其操作结束时必须有一个跳转指令。例如，当 ADDTN 完成时，程序应该跳过 SUBTN，除非您当然希望 SUBTN 也执行。这是您可以执行的操作的示例。有一系列分支指令，将 PC 转移到特定的操作员标签，并在每个标签结束时跳转到 EXIT 标签。

```
 beq $s0, $t1, SUBTN    # if(input==2) {goto SUBTN}
    beq $s0, $t0, ADDTN    # if(input==1) {goto ADDTN}
    beq $s0, $t2, MULT     # if(input==3) {goto MULT}
    beq $s0, $t3, DIV      # if(input==4) {goto DIV}

ADDTN:
    # Code for addition
    j EXIT

SUBTN:
    # Code for subtraction
    j EXIT

MULT:
    # Code for multiplication
    j EXIT

DIV:
    # Code for division
    j EXIT

EXIT:
    # Code to exit
    j EXIT 
```

注意：如果 $s0 的值不是 1、2、3 或 4，您应该能够想象在此示例中会发生什么。如果 equals 上的任何分支都不会导致 PC 跳转到标签，那么程序将执行 ADDTN 标签中的代码。此外，如果每个标签都没有产生到某个结束标签（EXIT）的跳转，则程序将继续执行剩余的标签。

如果要执行显式 else 语句，请考虑以下示例：

```
MAIN:    
    beq $s0, $t0, ADDTN    # if(input==2) {goto ADDTN}
    j SUBTN                # else {goto SUBTN}

ADDTN:
    # Code for addition
    j EXIT

SUBTN:
    # Code for subtraction
    j EXIT

EXIT:
    # Exit the program 
```

在此示例中，第一个分支将检查输入是否与添加标签相关。如果是，PC 将跳转到该标签；else if 将前进到指示跳转到减法标签的下一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T17:21:57.507

因为这是家庭作业：

如果相等，则会跳转到标签指定的偏移量。如果不相等，您希望它执行什么代码？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T18:17:46.360

例如：

```
beq $s0,$t0,ADDTN
ADDTN:
     # code for addition
     # ...
     # some syscalls
beq $s0.$t1,SUBTN
SUBTN:
 .
 .
 . 
```

我不知道系统调用做什么（我通常不为 MIPS 编码）。

但是您检查一个条件，即 $s0 和 $tn 的一个相等，并且在相等时您跳到适合这种情况的例程。很好，但是程序是紧跟在`BEQ`指令后面的，所以这里的分支绝对是多余的。此外，如果不满足条件*，*则程序继续执行指令之后的代码`BEQ`。

结果是例程（至少添加 ADDTN）被无条件地执行。如前所述，我不知道系统调用做了什么，但如果添加有效，我猜它们有点跳跃。

无论如何，您必须重新排列代码，以便根据测试条件的状态执行代码的另一个分支。这是一个通用的“模板”：

```
 beq $s0, $t0, equal
        # this code is executed if $s0 and $t0 differ
         .
         .
        jmp notequal        # avoid also executing the code for equal
equal:
        # code for the case $s0 and $t0 hold the same value
         .
         .
notequal:
        # all that follows executes with no regard of the checked condition 
```

还有其他技术可以分支像您这样的几个案例（我猜您似乎必须检查四个操作），但您应该首先开始了解基础知识。

[更新：嗯，实际上并没有什么不同，只是代码块分布得更广了……/更新]

玩得开心...

# c# - 通过引用 ListBox.SelectedItems 的结果来查找“原始”ListItem？

> ID：12439357
> 
> 赞同：1
> 
> 时间：2012-09-15T17:00:22.633
> 
> 标签：c#, wpf, list

我的 ListBox 遇到了另一个问题。

我有一个`class Entity`. `string Forename, Surname`现在我想向用户展示每个`Entity`. `ListBox personList`为此我这样做：

```
foreach(Entity e in EntityHandler.entityList)
{
    personList.Items.Add(e.Name);
} 
```

用户可以选择多个条目`personList`。

单击按钮后，应用程序应评估循环中的每个选定条目`foreach`。为此，我只是使用

```
foreach(string selected in personList.SelectedItems)
{
    //do some stuff
} 
```

现在的问题是可能有多个`Entity`实例具有完全相同的值。每个人之间唯一的静态区别`Entity`是它`UID`，但我不想把这个丑陋`UID`的东西写进他们的条目中。

有没有办法`Entity`从我得到的字符串值中得到对应的值`SelectedItems`？我读到了覆盖`GetHashCode()`，`Equal()`但我不知道为什么这应该起作用？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T17:23:05.730

您应该将实际实体绑定到 ListBox 而不是只绑定名称并将 ListBox 的 DisplayMemeber 属性设置为实体的“名称”属性。这将使您可以直接访问 ListBox 项目 - 实体。

查看有关如何将对象绑定到 ListBox 的链接： http: [//sharpertutorials.com/list-box-data-binding/](http://sharpertutorials.com/list-box-data-binding/)

# c - Linux中的setprogname

> ID：12439358
> 
> 赞同：3
> 
> 时间：2012-09-15T17:00:23.690
> 
> 标签：c, linux, function, unix

在 Unix 中，我知道有函数`setprogname`和`getprogname`. 两者分别用于设置和获取程序名称。它们可以在图书馆找到`stdilib.c`。我想知道 Linux 是否也内置了这些功能，因为我无法让它们在 Linux 机器（Ubuntu 10.04）上运行。这些功能可用吗？代码如下，以防我在网上找到的手册页没有讲述整个故事，也没有添加我需要的东西。谢谢！

```
#define _XOPEN_SOURCE 500

#include<sys/stat.h>
#include<sys/types.h>

#include<errno.h>
#include<fcntl.h>
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
#include<unistd.h>

int main (int argc, char *argv[])
{
    setprogname(argv[0]); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T18:13:08.343

从[*BSD 手册页](http://www.manpagez.com/man/3/setprogname/)关于`{set,get}progname`：

> getprogname() 和 setprogname() 函数操作当前程序的名称。错误报告例程使用它们来产生一致的输出。

如果您想自定义错误报告的程序名称，`error`您可以[按照 glibc 手册中的说明](http://www.gnu.org/software/libc/manual/html_mono/libc.html#Error-Messages)`error_at_line`声明和设置`error_print_progname`变量：

> 如上所述，可以通过定义名为 error_print_progname 的变量来自定义 error 和 error_at_line 函数。
> 
> — 变量：void (*) error_print_progname (void) 如果 error_print_progname 变量定义为非零值，则指向的函数由 error 或 error_at_line 调用。预计会打印程序名称或执行类似有用的操作。
> 
> 该函数预计将打印到 stderr 流，并且必须能够处理流具有的任何方向。
> 
> 该变量是全局的并且由所有线程共享。

`{set,get}progname`编辑：我只是检查了关于和的 gnulib 手册`error_print_progname`：

> 所有非 glibc 平台都缺少此变量：MacOS X 10.5、FreeBSD 6.0、NetBSD 5.0、OpenBSD 3.8、Minix 3.1.8、AIX 5.1、HP-UX 11、IRIX 6.5、OSF/1 5.1、Solaris 11 2011-11 、Cygwin、mingw、MSVC 9、Interix 3.5、BeOS。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-04T03:55:15.883

在 ubuntu 12.04 上试过这个，它可以工作：

安装`libbsd-dev`软件包。然后尝试编译以下代码：

```
//filename=somec.c
#include <stdio.h>
#include <bsd/stdlib.h>

int main(int argc, char *argv[]){

    if(argc>1)
            setprogname((char*)argv[1]);
    printf("Program name is: %s\n",getprogname());
    return 0; 
```

}

使用这组参数：

```
gcc somec.c -o somec -lbsd 
```

这对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T19:53:16.273

您可以在 GNU/Linux 上使用[libbsd](http://libbsd.freedesktop.org/wiki/)从 *BSD 操作系统访问这些和其他有用的实用程序功能。

# android - sqlite android中的日期错误

> ID：12439359
> 
> 赞同：0
> 
> 时间：2012-09-15T17:00:35.007
> 
> 标签：android, sqlite

我正在尝试在 android 的 sqlite 数据库上运行语句...我希望从 lastChagedDate 大于我给出的日期的表中返回一些记录。

假设我有这个：

```
private String ending_date = "2012-01-01 08:24:59";

roadmapSyncStmt = "SELECT * FROM roadmap WHERE lastChangedDate > '"+ ending_date +"'"; 
```

roadmapSyncStmt 是我将在充满日期的 sqlite 表上执行的。该声明将类似于：

```
SELECT * FROM roadmap WHERE lastChangedDate >"2012-01-01 08:24:59" 
```

当我运行时，我收到此错误：

> sqlite 返回：错误代码 = 1，msg = 在“2012”附近：语法错误

即使我的数据库包含大量符合此条件的数据，游标中也没有数据。有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T17:56:11.240

您应该将日期值用单引号括起来，而不是双引号。像这样：

```
SELECT * FROM roadmap WHERE lastChangedDate > '2012-01-01 08:24:59' 
```

在您学习的同时，我建议您安装一个基于 PC 的 SQLite 编辑器，例如您可以在 SourceForge 上找到的“SQLite 数据库浏览器”。它比在您的应用程序中进行测试更快、更容易。我什至会说所有的数据库开发、测试、查询创建等都应该在您的 PC 上完成，然后将其放入您的应用程序几乎是一个复制/粘贴练习。

祝你好运。

# python - 在 Mac 上为 Python 安装 MySQL 驱动程序

> ID：12439362
> 
> 赞同：0
> 
> 时间：2012-09-15T17:00:48.397
> 
> 标签：python, mysql, macports

我将 MAMP 和 Python 作为 CGI 运行。我想连接 MySQL。我通过使用 pip 安装 MySQLDb 来尝试它，但它不起作用，python 根本找不到 MySQLDb。

你能告诉我如何使用我已经安装了 Apache、MySQL 和 Python 2.6 的 Macport 提供程序来安装它吗？

谢谢

**更新：**

通过 pip 安装给出以下 O/P：

> 下载/解压 mysql-python 下载 MySQL-python-1.2.3.tar.gz (70Kb): 70Kb 已下载 运行 setup.py egg_info 以获取包 mysql-python 警告：找不到匹配“清单”的文件警告：找不到匹配的文件“ ChangeLog'警告：找不到匹配'GPL'的文件安装收集的包：mysql-python为mysql-python运行setup.py安装'_mysql'扩展/usr/bin/gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -pipe -O2 -fwrapv -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -Dversion_info=(1,2,3,'final',0) -D_*版本*_=1.2.3 -I/usr/local/Cellar/mysql/5.5.15/include -I/opt/local/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6 -c _mysql.c -o build/temp.macosx-10.6-x86_64-2.6/_mysql.o -g 在 _mysql.c:36 包含的文件中：/usr/local/Cellar/mysql/5.5.15/include/my_config.h:330： 1：警告：“SIZEOF_SIZE_T”重新定义在来自/opt/local/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/Python.h:9、来自pymemcompat.h:10、来自_mysql的文件中.c:29: /opt/local/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/pymacconfig.h:37:1: 警告：这是先前定义的位置在包含的文件中_mysql.c:36：/usr/local/Cellar/mysql/5.5.15/include/my_config.h:423:1：警告：“HAVE_WCSCOLL”重新定义在 /opt/local/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/Python.h:8、pymemcompat.h:10、_mysql.c:29 中包含的文件中：/opt /local/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/pyconfig.h:808:1：警告：这是之前定义的位置/usr/bin/gcc-4.2 -L/ opt/local/lib -bundle -undefined dynamic_lookup build/temp.macosx-10.6-x86_64-2.6/_mysql.o -L/usr/local/Cellar/mysql/5.5.15/lib -lmysqlclient_r -lpthread -lz -lssl - lcrypto -o build/lib.macosx-10.6-x86_64-2.6/_mysql.so 警告：找不到匹配“清单”的文件警告：找不到匹配“更改日志”的文件警告：找不到匹配“GPL”的文件成功安装mysql-python打扫安装成功mysql-python清洗

我正在使用 MAMP 附带的 MySQL。我还在 MAMP 文件夹中将 PATH 设置为 MySQL 的二进制文件

**另一个更新**

原来Mysql-Python egg 根本没有安装在：

**/Library/Python/2.6/site-packages**

我错过了什么？

# android - Android XML 将多个 XML 文件嵌入 1

> ID：12439364
> 
> 赞同：1
> 
> 时间：2012-09-15T17:00:50.790
> 
> 标签：android, xml, xml-parsing, android-button

我最近偶然发现了一个通过 XML 项模拟 android 按钮样式的解决方案。问题是，我必须为我使用的每个按钮创建一个不同的 xml 文件。（我正在制作一个具有 16 多种颜色的绘画应用程序，因此有 16 多个按钮）我尝试将他的 XML 项嵌入到样式、可绘制对象甚至另一个项中，以便我可以将所有 16 个左右的按钮保存在一个文件中。当我尝试调试它时，我不断收到“错误：解析 XML 时出错：未绑定前缀”。我对 android 编程场景非常陌生，这是我用 Java 编写的第一个应用程序。（我正在使用 MIT 应用程序发明者软件来规划我的应用程序。设计、简单编码等等）。这是我的风格。（注意：这不是整个 XML 文件，只是我用于按钮的 xml。

```
<style name="test">
    <item android:state_pressed="true">
        <shape>
            <gradient
                android:startColor="@color/yellow"
                android:endColor="@color/gold"
                android:angle="270" />
            <stroke
                android:width="3dp"
                android:color="@color/grey5" />
            <corners
                android:radius="3dp" />
            <padding
                android:left="10dp"
                android:top="10dp"
                android:right="10dp"
                android:bottom="10dp" />
        </shape>
    </item>

    <item android:state_focused="true" >
        <shape>
            <gradient
                android:endColor="@color/gold"
                android:startColor="@color/black"
                android:angle="270" />
            <stroke
                android:width="3dp"
                android:color="@color/grey5" />
            <corners
                android:radius="3dp" />
            <padding
                android:left="10dp"
                android:top="10dp"
                android:right="10dp"
                android:bottom="10dp" />
        </shape>
    </item>
    <item>        
        <shape>
            <gradient
                android:endColor="@color/blue"
                android:startColor="@color/lime"
                android:angle="270" />
            <stroke
                android:width="3dp"
                android:color="@color/grey5" />
            <corners
                android:radius="3dp" />
            <padding
                android:left="10dp"
                android:top="10dp"
                android:right="10dp"
                android:bottom="10dp" />
        </shape>
    </item>
</style> 
```

当它（减去样式标签）放在它自己的文件中并用作按钮的背景属性时，它可以正常工作，但是当它“嵌入”到样式中时，它就不再起作用了。有没有一种简单的解决方案可以将我的所有按钮配置放在一个文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:24:49.203

尝试定义父样式（例如您发布的样式）并定义您需要的其他样式以扩展该父样式。

```
<style name="yourChildStyle" parent="yourParentStyle"> 
... Here go attributes specific to your child style
</style> 
```

# javascript - Javascript 按钮下拉菜单

> ID：12439365
> 
> 赞同：0
> 
> 时间：2012-09-15T17:00:57.527
> 
> 标签：javascript, jquery, twitter-bootstrap

请看一下这个jsfiddle：

[http://jsfiddle.net/tt13/gkhrj/](http://jsfiddle.net/tt13/gkhrj/)

我想要实现的是，当我按下箭头以获取下拉菜单时，以及当我按下按钮执行其他操作时：类似于[http://jqueryui.com/demos/button/#splitbutton](http://jqueryui.com/demos/button/#splitbutton)

如何得到这个结果？有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T17:17:40.057

*   从按钮标签中提取跨度标签并添加`class="btn btn-success dropdown-toggle" data-toggle="dropdown"`到它
*   从按钮中删除`toggle="dropdown"`和分类`dropdown-toggle`
*   为按钮添加一些 id，例如*action-btn*
*   为按钮创建点击事件

新小提琴：[改变](http://jsfiddle.net/farnabaz/hPFGA/1/)

# javascript - 表追加没有最后一个元素

> ID：12439367
> 
> 赞同：1
> 
> 时间：2012-09-15T17:01:43.217
> 
> 标签：javascript, jquery, html

```
 ​&lt;table id="table">
    <tr><td>one</td><td>two</td></tr>

    <tr id="sum"><td>sum</td><td>sum2</td></tr>
    </table>

    ​&lt;span id="add">add new</span>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​

$('#add').click(function(){
   $('#table').append('<tr><td>one</td><td>two</td></tr>');
})​ 
```

我怎样才能使这个添加新元素与追加作为倒数第二个元素？我希望#sum 仍然是最后一个元素。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-15T17:03:48.947

使用`insertBefore()`：

```
$('#add').click(function(){
   $('<tr><td>one</td><td>two</td></tr>').insertBefore('#sum');
})​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/6Zrhs/)。

您也可以简单地使用多个`tbody`元素，一个包含`#sum`行，另一个用于，在本例中`#content`：

```
<table id="table">
    <tbody id="content">
        <tr><td>one</td><td>two</td></tr>
    </tbody>
    <tbody>
        <tr id="sum"><td>sum</td><td>sum2</td></tr>
    </tbody>
</table> 
```

使用 jQuery：

```
$('#add').click(function(){
   $('#content').append('<tr><td>one</td><td>two</td></tr>');
})​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/6Zrhs/1/)。

或者，可能，使用 a `tfoot`（尽管我不确定这是一个`tfoot`元素的正确用例：

```
<table id="table">
    <tfoot>
        <tr id="sum"><td>sum</td><td>sum2</td></tr>
    </tfoot>
    <tbody id="content">
        <tr><td>one</td><td>two</td></tr>
    </tbody>
</table> 
```

和 jQuery：

```
$('#add').click(function(){
   $('table tbody').append('<tr><td>one</td><td>two</td></tr>');
})​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/6Zrhs/2/)。

参考：

*   [`insertBefore()`](http://api.jquery.com/insertBefore/).
*   [HTML 文档中的表格： 行组：`THEAD`、`TFOOT`和`TBODY`元素](http://www.w3.org/TR/html4/struct/tables.html#h-11.2.3)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T17:04:25.750

您可以使用`.before()`

```
$('#add').click(function(){
   $('#sum').before('<tr><td>one</td><td>two</td></tr>');
})​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T17:04:39.010

真的很简单:) 使用`before`

```
$('#add').click(function(){
   $('#sum').before('<tr><td>one</td><td>two</td></tr>');
})​; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-15T17:05:49.710

做就是了：

```
$('#sum').before('<tr><td>one</td><td>two</td></tr>'); 
```

# wordpress - 如何使用 Instagram？

> ID：12439369
> 
> 赞同：-4
> 
> 时间：2012-09-15T17:01:59.087
> 
> 标签：wordpress, instagram

我想做一个 Instagram 侧边栏。

此侧边栏将仅显示我所有关注用户的图像。

我只想在 WordPress 中执行此操作，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T00:07:37.853

1.  从谷歌开始：[https ://www.google.com/search?q=wordpress+instagram+plugin](https://www.google.com/search?q=wordpress+instagram+plugin)
2.  找到几个不错的插件列表：
    *   [http://wpmu.org/10-instagram-plugins-for-wordpress/](http://wpmu.org/10-instagram-plugins-for-wordpress/)
    *   [http://wordpress.org/extend/plugins/tags/instagram](http://wordpress.org/extend/plugins/tags/instagram)
3.  选择一个或两个插件并开始弄清楚如何使用它：
    *   [http://wordpress.org/extend/plugins/simply-instagram/](http://wordpress.org/extend/plugins/simply-instagram/)
    *   [http://wordpress.org/extend/plugins/easy-instagram/](http://wordpress.org/extend/plugins/easy-instagram/)
    *   [http://wordpress.org/extend/plugins/instagram-for-wordpress/](http://wordpress.org/extend/plugins/instagram-for-wordpress/)
4.  如果您仍然无法准确确定如何实现目标，请再次寻求帮助。下次请更具体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T17:03:12.233

要使用 Instagram，您需要[Instagram API](http://instagram.com/developer/)。

# html - 一种添加代码并加入在一起的方法？

> ID：12439370
> 
> 赞同：0
> 
> 时间：2012-09-15T17:02:04.313
> 
> 标签：html, bash

好的，假设我有 2 个文本文档，一个包含文档名称，另一个包含指向该文档所在位置的链接。

有没有一种方法/程序或 bash 代码可以让我把它们组合在一起，所以它看起来像这样

```
<li class="pureCssMenui"><a class="pureCssMenui" href="https://docs.google.com/open?id=0B_KBy1Yc657LdnR5MGFXWVZZcnc" target="_blank">Cocoa in a nutshell.chm</a></li> 
```

所以我想添加

```
<li class="pureCssMenui"><a class="pureCssMenui" href=" to the beginning of each line in th links doc 
```

然后

```
target="_blank"> 
```

到标题文档的开头然后当然添加

```
</a></li> 
```

到最后，这样一切都会走到一起。

此外，链接和标题已经与它们在每个文档中的行号相匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:42:58.477

纯娱乐：

```
$ cat file1 file2
hello.doc
world.xls
plaintext-is-better.txt
extensionsareforsuckers
http://loldoc.com/phileurl
http://spreadsheetfactory.uk/mooooooooo
http://onlinetext.org/files/109874
http://extensionssuck.info/4u373

$ for i in {1..4}; do \
     sed -n $i'p' file1 | tr  '\n' '|';\
     sed -n $i'p' file2 ;done |\
     awk -F\| '{printf "<a href=%s>%s</a>\n", $2, $1 }'
<a href=http://loldoc.com/phileurl>hello.doc</a>
<a href=http://spreadsheetfactory.uk/mooooooooo>world.xls</a>
<a href=http://onlinetext.org/files/109874>plaintext-is-better.txt</a>
<a href=http://extensionssuck.info/4u373>extensionsareforsuckers</a> 
```

# c - Linux下共享内存映射

> ID：12439374
> 
> 赞同：4
> 
> 时间：2012-09-15T17:02:33.207
> 
> 标签：c, linux, memory-mapping, execve

## 动机

我想编写一对程序，其中一个程序读取数据并将其转换为内部格式，另一个程序将内部格式转换为其他格式。作为练习，我想在不使用管道的情况下编写这些程序之间的交互。我更喜欢使用信号和共享内存。

## 我想要的是

我有 A 调用 B 的程序 A 和 B。我该怎么做

1.  从程序 A 创建一个内存块
2.  从程序 A 调用程序 B，给它关于在哪里找到内存块的信息
3.  使用两个程序中的内存块。

更具体地说，A 解码自定义视频格式并将单个未压缩帧放入共享缓冲区。B 从缓冲区中读取数据并将其编码为输出流。解码器每秒解码高达 100 帧，这大约是 500 MiB/s 的内存流量。管道变得很慢，因为必须经常复制数据并且缓冲区不是很大。

## 我认为可能有效

我的想法是用来`mmap(NULL,len,PROT_READ|PROT_WRITE,MAP_SHARED|MAP_ANONYMOUS,-1,0)`创建一段共享内存。问题是，`execve(2)`状态手册页：

> 不保留内存映射 (mmap(2))。

那么，我怎样才能与其他程序共享该内存呢？将这两种功能都放在一个程序中并改用是更好的主意`fork`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T17:41:05.123

*nix 系统有几个共享内存的 API：

*   BSD：使用`mmap()`. 要在不相关的进程之间共享内存，请将其关联到一个文件。您还可以使用`MAP_ANONYMOUS`和`fork()`ing 在相关进程之间共享内存（但请确保使用 -1 以`fd`实现可移植性）。
*   系统 V：（有些人*真的*不喜欢这个）用于`shmget()`创建/获取对共享内存区域的引用，通过 附加到它，通过`shmat()`分离`shmdt()`，用 标记删除`shmctl()`。您通过一个键标识共享内存区域，该键应该是唯一的。
*   POSIX：从返回的文件描述符中使用`shm_open()`then 。`mmap()`

# c++ - 没有互联网弹出 Qt 和 QML（移动设备）

> ID：12439379
> 
> 赞同：0
> 
> 时间：2012-09-15T17:03:03.660
> 
> 标签：c++, qt, mobile, popup, qml

我的程序使用 QtNetwork 从互联网下载东西。

在 int main() 我打电话

```
int main(int argc, char *argv[])
{
    QApplication app(argc, argv);
    QmlApplicationViewer viewer;

    QNetworkConfigurationManager manager;
    QNetworkConfiguration cfg = manager.defaultConfiguration();
    QNetworkSession* session = new QNetworkSession(cfg);
    session->setSessionProperty("ConnectInBackground", true);
    session->open();

    /*some registering types*/

    viewer.setOrientation(QmlApplicationViewer::ScreenOrientationAuto);
    viewer.setMainQmlFile(QLatin1String("qml/maelyrica/main.qml"));
    viewer.showFullScreen();

    return app.exec();
} 
```

然后，在一个成员函数中，大量封装，大量调用其他成员函数，调用其他成员函数，使用这样的代码：

```
QNetworkReply::NetworkError lyricsDownloader::download(const QString& a, const QString& t)
{
QNetworkAccessManager nam;
QNetworkReply * reply;
QUrl url = toProviderCode(a, t);
forever
{
    reply = nam.get(QNetworkRequest(url));
    QEventLoop downloadLoop;
    connect(reply, SIGNAL(finished()), &downloadLoop, SLOT(quit()));
    downloadLoop.exec();
    url = reply->attribute(QNetworkRequest::RedirectionTargetAttribute).toUrl();
    if (url.isEmpty()) break; // break when no redirect, when redirect do it again with new url
}

lyrics_qstr = reply->readAll();

//qDebug() << lyrics_qstr;

return reply->error();
} 
```

这应该会在诺基亚 N9 或诺基亚 N900 等移动设备上显示互联网弹出窗口，即用户必须选择互联网连接，除非他已经连接。但它没有显示。

我究竟做错了什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:55:57.920

您已将“ConnectInBackground”设置为 true。

“在调用 open() 之前将此属性设置为 true 意味着进行了连接尝试，但如果无法建立连接，则不会咨询用户并要求选择合适的连接。默认情况下未设置此属性并支持它取决于平台。”

# mysql - 在 Wamp 上安装 MySQL 插件

> ID：12439382
> 
> 赞同：0
> 
> 时间：2012-09-15T17:03:25.593
> 
> 标签：mysql, wamp

我已经从[http://www.mysqludf.org/lib_mysqludf_preg/](http://www.mysqludf.org/lib_mysqludf_preg/)下载了 Windows 二进制文件，但我在安装它时遇到了麻烦。

如果我运行该命令`SHOW VARIABLES LIKE '%plugin%'`，它会输出目录'c:/wamp/bin/mysql/mysql5.5.20/plugin'，所以这是我放置 2 个 dll 文件的位置。

我重新启动了服务器，然后尝试：

```
USE mysql;
CREATE FUNCTION lib_mysqludf_preg_info RETURNS STRING SONAME 'lib_mysqludf_preg.dll'; 
```

但是 MySQL 刚刚说： *#1126 - 无法打开共享库 'lib_mysqludf_preg.dll' (errno: 2 )*

我错过了什么？

MySQL 版本是 5.5.20

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T20:57:46.010

我试图在 Wamp 上安装 Windows 二进制文件，但我收到了与您相同的错误消息。

我认为您可以从[http://www.mysqludf.org/lib_mysqludf_preg/](http://www.mysqludf.org/lib_mysqludf_preg/)下载的标准编译二进制文件仍然不支持 64 位版本的 Wamp 。我尝试卸载 64 位版本的 Wamp，并安装了 32 位版本，我能够使用以下步骤使其工作：

*   将库复制`libpcre.dll`到MySql的bin目录（例如`c:\wamp\bin\mysql\mysql5.5.24\bin`）
*   将库复制`lib_mysqludf_preg.dll`到MySql插件目录（例如`c:\wamp\bin\mysql\mysql5.5.24\lib\plugin`）

然后你可以启动这个：

```
USE mysql;
CREATE FUNCTION lib_mysqludf_preg_info RETURNS STRING SONAME 'lib_mysqludf_preg.dll';
CREATE FUNCTION preg_capture RETURNS STRING SONAME 'lib_mysqludf_preg.dll';
CREATE FUNCTION preg_check RETURNS INTEGER SONAME 'lib_mysqludf_preg.dll';
CREATE FUNCTION preg_replace RETURNS STRING SONAME 'lib_mysqludf_preg.dll';
CREATE FUNCTION preg_rlike RETURNS INTEGER SONAME 'lib_mysqludf_preg.dll';
CREATE FUNCTION preg_position RETURNS INTEGER SONAME 'lib_mysqludf_preg.dll'; 
```

对我来说效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T17:36:50.263

尝试这个;

离开`lib_mysqludf_preg.dll`_`plugin_dir`

并移动`libpcre.dll`到`{MySQL Server}\bin`

然后，执行`"CREATE FUNCTION ...",`

# .net - 如何限制 .Net 中的异步功能？

> ID：12439392
> 
> 赞同：9
> 
> 时间：2012-09-15T17:04:30.260
> 
> 标签：.net, async-await, throttling

我在.Net 中使用异步等待。如何限制并发异步调用的数量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T17:21:09.610

一种相对简单的方法是（ab）使用 TPL 数据流。就像是：

```
public IEnumerable<TOutput> AsyncThrottle<TInput, TOutput>(
    IEnumerable<TInput> inputs, Func<TInput, Task<TOutput>> asyncFunction,
    int maxDegreeOfParallelism)
{
    var outputs = new ConcurrentQueue<TOutput>();

    var block = new ActionBlock<TInput>(
        async x => outputs.Enqueue(await asyncFunction(x)),
        new ExecutionDataflowBlockOptions
        { MaxDgreeOfParallelism = maxDegreeOfParallelism });

    foreach (var input in inputs)
        block.Send(input);

    block.Complete();
    block.Completion.Wait();

    return outputs.ToArray();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T17:04:30.260

**注意：**我把它留在这里作为遗产。不要这样做，因为`WhenAny`同时等待的任务太多。堆栈会变深。

基于 Stephen Toub 的这段代码：

```
const int CONCURRENCY_LEVEL = 15;
Uri [] urls = …;
int nextIndex = 0;
var imageTasks = new List<Task<Bitmap>>();
while(nextIndex < CONCURRENCY_LEVEL && nextIndex < urls.Length)
{
    imageTasks.Add(GetBitmapAsync(urls[nextIndex]));
    nextIndex++;
}

while(imageTasks.Count > 0)
{
    try
    {
        Task<Bitmap> imageTask = await Task.WhenAny(imageTasks);
        imageTasks.Remove(imageTask);

        Bitmap image = await imageTask;
        panel.AddImage(image);
    }
    catch(Exception exc) { Log(exc); }

    if (nextIndex < urls.Length)
    {
        imageTasks.Add(GetBitmapAsync(urls[nextIndex]));
        nextIndex++;
    }
} 
```

我写了这个：

```
Private ThrottleGroups As New Dictionary(Of Object, List(Of Task))
Public Async Function ThrottleAsync(Of TResult)(ByVal f As Func(Of Task(Of TResult)), GroupId As Object, MaxCount As Integer) As Task(Of TResult)
    If Not ThrottleGroups.ContainsKey(GroupId) Then
        ThrottleGroups.Add(GroupId, New List(Of Task))
    End If
    If ThrottleGroups(GroupId).Count < MaxCount Then
        Dim NewTask As Task(Of TResult) = f()
        ThrottleGroups(GroupId).Add(NewTask)
        Return Await NewTask
    Else
        Dim FinishedTask As Task = Await Task.WhenAny(ThrottleGroups(GroupId))
        ThrottleGroups(GroupId).Remove(FinishedTask)
        Return Await ThrottleAsync(f, GroupId, MaxCount)
    End If
End Function 
```

要使用，只需替换：

```
ExampleTaskAsync(param1, param2) 
```

和：

```
Dim f As Func(Of Task(Of Integer))
f = Function()
        Return ExampleAsync(param1, param2)
    End Function
Const CONCURRENT_TASKS As Integer = 4
Return ThrottleAsync(f, "ExampleAsync", CONCURRENT_TASKS) 
```

请注意，我们必须将对任务的调用包装在一个函数中`f`，否则我们将已经启动任务。ThrottleAsync 的第二个参数是标识“组”的任何对象；我用了一个字符串。同一“组”中的所有异步任务都仅限于`CONCURRENT_TASKS`任务，在本例中为 4。

下面的示例代码显示了一次只运行四个线程。 `All Ready!`立即显示，因为子例程是异步的。此外，即使线程无序开始或结束，“输出”行仍将与输入的顺序相同。

```
Dim results As New List(Of Task(Of Integer))
    For i As Integer = 0 To 20
        Dim j As Integer = i
        Dim f As Func(Of Task(Of Integer))
        f = Function() As Task(Of Integer)
                Return Task.Run(Function() As Integer
                                    Debug.WriteLine(DateTime.Now & "Starting " & j)
                                    System.Threading.Thread.Sleep(5000)
                                    Debug.WriteLine(DateTime.Now & "Ending " & j)
                                    Return j
                                End Function)
            End Function
        Const CONCURRENT_UPLOADS As Integer = 4
        results.Add(ThrottleAsync(f, "PutOjbectAsync", CONCURRENT_UPLOADS))
    Next
    Debug.WriteLine("all ready!")
    For Each x As Task(Of Integer) In results
        Debug.WriteLine(DateTime.Now & "Output: " & Await x)
    Next 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T18:52:44.697

根据代码，最简单的方法可能是使用 Parallel.For(Each) 并在并行选项中指定最大并行度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T22:49:09.553

我更喜欢这种技术。我`TaskCompletionSource`用来为传入任务创建输出任务。`Task`这是必要的，因为我什至想在运行它之前返回 a ！下面的类将每个输入`Func(of Task(of Object))`与`TaskCompletionSource`立即返回的 a 相关联，并将它们放入队列中。

队列中的元素被出列到正在运行的任务列表中，并且继续设置`TaskCompletionSource`. 对 in 循环的调用`WhenAny`确保在空间释放时将元素从队列移动到运行列表。还有一个检查以确保一次不超过一个`WhenAny`，尽管它可能存在并发问题。

要使用，只需像这样替换同步函数：

```
Task.Run(AddressOf MySyncFunction) 'possibly many of these 
```

有了这个：

```
Dim t1 As New Throttler(4)
t1.Run(AddressOf MySyncFunction) 'many of these, but only 4 will run at a time. 
```

对于已经返回 Task 的函数，重要的是要将它们转换为返回 Task 的函数，以便 tottler 可以运行它们。代替：

```
NewTask = MyFunctionAsync() 
```

和：

```
NewTask = t1.Run(Function () return MyFunctionAsync()) 
```

下面的类还为 Throttler.Run() 实现了许多不同的签名，具体取决于函数是同步/异步、有/没有输入、有/没有输出。将任务转换为任务（输出）特别棘手！

```
Class Throttler
    Property MaxCount As Integer

    Sub New(Optional MaxCount As Integer = 1)
        Me.MaxCount = MaxCount
    End Sub

    Private Running As New List(Of Task)
    Private Waiting As New Concurrent.ConcurrentQueue(Of System.Tuple(Of Func(Of Task(Of Object)), TaskCompletionSource(Of Object)))
    Private AlreadyWaiting As Boolean

    Async Sub MakeWaiter()
        If AlreadyWaiting Then Exit Sub
        AlreadyWaiting = True
        Do While Waiting.Count > 0
            Dim CurrentWait As System.Tuple(Of Func(Of Task(Of Object)), TaskCompletionSource(Of Object)) = Nothing
            Do While Running.Count < MaxCount AndAlso Waiting.TryDequeue(CurrentWait)
                Dim NewFunc As Func(Of Task(Of Object)) = CurrentWait.Item1
                Dim NewTask As Task(Of Object) = NewFunc()
                Dim CurrentTcs As TaskCompletionSource(Of Object) = CurrentWait.Item2
                NewTask.ContinueWith(Sub(t2 As Task(Of Object))
                                         CurrentTcs.SetResult(t2.Result)
                                     End Sub)
                Running.Add(NewTask)
            Loop
            If Waiting.Count > 0 Then
                Dim Waiter As Task(Of Task)
                Waiter = Task.WhenAny(Running)
                Dim FinishedTask As Task = Await Waiter
                Await FinishedTask
                Running.Remove(FinishedTask)
            End If
        Loop
        AlreadyWaiting = False
    End Sub

    Function Run(f As Func(Of Task(Of Object))) As Task(Of Object)
        Dim NewTcs As New TaskCompletionSource(Of Object)
        Waiting.Enqueue(New System.Tuple(Of Func(Of Task(Of Object)), TaskCompletionSource(Of Object))(f, NewTcs))
        MakeWaiter()
        Return NewTcs.Task
    End Function

    Function Run(Of TInput)(f As Func(Of TInput, Task), input As TInput) As Task
        Dim NewF As Func(Of Task)
        NewF = Function() As Task
                   Return f(input)
               End Function
        Return Me.Run(NewF)
    End Function

    Function Run(Of TInput)(f As Func(Of TInput, Task(Of Object)), input As TInput) As Task(Of Object)
        Dim NewF As Func(Of Task(Of Object))
        NewF = Function() As Task(Of Object)
                   Return f(input)
               End Function
        Return CType(Me.Run(NewF), Task(Of Object))
    End Function

    Function Run(f As Func(Of Task)) As Task
        Dim NewF As Func(Of Task(Of Object))
        NewF = Function() As Task(Of Object)
                   Return f().ContinueWith(Function(t As task) As Object
                                               Return Nothing
                                           End Function)
               End Function
        Return CType(Me.Run(NewF), Task(Of Object))
    End Function

    Function Run(Of TInput)(f As Func(Of TInput, Object), input As TInput) As Task(Of Object)
        Dim NewF As Func(Of Task(Of Object))
        NewF = Function() As Task(Of Object)
                   Return Task.Run(Function() As Object
                                       Return f(input)
                                   End Function)
               End Function
        Return CType(Me.Run(NewF), Task(Of Object))
    End Function

    Function Run(Of TInput)(f As Action(Of TInput), input As TInput) As Task
        Dim NewF As Func(Of Task)
        NewF = Function() As Task
                   Return Task.Run(Sub()
                                       f(input)
                                   End Sub)
               End Function
        Return Me.Run(NewF)
    End Function

    Function Run(f As Func(Of Object)) As Task(Of Object)
        Dim NewF As Func(Of Task(Of Object))
        NewF = Function() As Task(Of Object)
                   Return Task.Run(Function()
                                       Return f()
                                   End Function)
               End Function
        Return CType(Me.Run(NewF), Task(Of Object))
    End Function

    Function Run(f As Action) As Task
        Dim NewF As Func(Of Task)
        NewF = Function() As Task
                   Return Task.Run(Sub()
                                       f()
                                   End Sub)
               End Function
        Return Me.Run(NewF)
    End Function
End Class 
```

# php - PDO 帮助 - 关闭连接并拥有单独的连接文件

> ID：12439395
> 
> 赞同：0
> 
> 时间：2012-09-15T17:04:56.757
> 
> 标签：php, mysql, pdo, database-connection

我习惯于使用程序 mysql 方法访问 mysql 数据库。我是一个初学者 - 中级程序员。

我正在尝试学习 PDO api，但是所有讨论使用 PDO 的资源都会显示连接字符串、用户名和密码。

例如

```
<?php

try {
    $db_conn = new PDO('mysql:host=localhost;dbname=databaseName','username', 'password');  
} 
catch (PDOException $e) {
    echo 'Could not connect to database';
}

$sql = 'SELECT * FROM Products';
$stmt = $db_conn->prepare($sql);

...
...
...

?> 
```

我想要并且认为更好的编程是将我的 PDO 连接放入一个新文件中。然后在我想运行 SQL 查询的地方，我 require_once('PDO.php') 或类似的。

我遇到的问题如下：

1.  如何关闭连接？只需 $db_conn = null; ??
2.  我应该在每个查询运行后关闭连接，然后重新打开连接吗？
3.  我应该关闭连接还是在用户关闭浏览器时自动销毁？

我正在阅读一本名为 PHP Master: Writing Cutting Edge Code 的书。[http://www.sitepoint.com/books/phppro1/](http://www.sitepoint.com/books/phppro1/)这完全省略了任何关于关闭连接/在使用后销毁对象的参考。

此外，我查看了在线教程，它们都使用 PDO 内联连接到数据库，而不是使用单独的数据库连接器。我对此不满意，原因有很多：

1.  我每次都必须输入用户名和密码才能连接。
2.  如果我让开发人员查看代码/编写一些代码，他们都可以访问数据库。
3.  如果我更改数据库用户名和密码，则连接到数据库的每个文件都需要更新。

有人可以推荐一个更好的资源吗？任何人都可以建议这样做的最佳实践方法是什么？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:11:35.537

您不会在查询后关闭连接，只需将其保持打开状态以进行下一个查询。当 PHP 存在并显示您的页面时，连接将自动关闭。

将 db 内容放在单独的文件中并包含它是个好主意。

更好的是，把你所有的数据库东西放在一个使用的类中。

看看[pdo php 页面](http://php.net/manual/en/book.pdo.php)。虽然不是最好的例子，但它们应该可以帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T17:28:04.993

您关于如何存储数据库名称、用户名和密码的问题与 PDO 的功能无关。这是一个实现选择。您使用过程函数的方式也可以应用于 PDO，不同之处在于使用 PDO 您可以使用对象。

因此，为简单起见，将对象的 PDO 创建存储在函数或类中，您可以随时在其中创建 PDO 实例，例如

```
function createPDO($cfg) {
  try {
    return new PDO("mysql:host=".$cfg['host'].",port:".($cfg['port']).";dbname=".($cfg['name']).";",$cfg['username'], $cfg['password']);
  } catch(PDOException $e) {
    // handle exceptions accordingly
  }
} 
```

您可以将它们集中在您想要包含的任何 PHP 文件中，就像您使用过程函数一样。

您有两个选择，要么将所有相关的数据库信息放在 .c 中`createPDO`，要么使用 config( `$cfg`) 变量之类的东西来存储所有这些信息。

```
$config = array();
$config['db'] = array(
  'host' => 'localhost',
  'name' => 'databse',
  'username' => 'userx',
  'password' => 'passy'
  /* .. etc */
) 
```

使用该`createPDO`功能如下

`$db_conn = createPDO($config['db']);`

对于关闭的连接，与数据库建立的每个连接都会在 PHP 退出执行后自动断开。但是，您可以根据需要关闭连接，方法是将您分配给它的 PDO 对象的变量设置为，在此示例（以及您的示例中）`$db_conn`为`null`

`$db_conn = null; // connection closed.`

PDO 有一个手册[http://php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)在这里，这是一个更好地了解 PDO 的好开始。

# javascript - JavaScript数组排序（函数）对表格行进行排序 - 不排序

> ID：12439399
> 
> 赞同：1
> 
> 时间：2012-09-15T17:05:21.547
> 
> 标签：javascript, dynamic

我正在尝试在客户端对动态构造的表进行排序。到目前为止，我已经完成了我的研究，发现 JavaScript 的 sort() 方法会接受回调。这是我到目前为止所拥有的：

```
function retrvCatalog(e){
var merch = document.getElementById('merch');
var tRows = merch.rows;
var tBody = merch.tBodies;
var rowArr = [];
for (x in tRows){
    rowArr[x] = tRows[x];
}
rowArr.sort(function(a, b){
    if (a.cells.textContent < b.cells.textContent){
        return -1;
    }
    if(a.cells.textContent > b.cells.textContent){
        return 1;
    }
    return 0;
});
} 
```

在 Firebug 中单步执行，它似乎没有改变行的顺序。有人可以帮我弄清楚我错过了什么吗？

**最终算法**

```
function retrvCatalog(e){
var fltr = e.id;
var merch = document.getElementById('merch');
var tblHead = merch.tHead;
merch.deleteTHead();
var tRows = merch.rows;
var rowArr = [];
for (var i=0; i<tRows.length; i++){
    rowArr[i] = tRows[i];
}
rowArr = rowArr.sort(function(a, b){
    if (fltr > 3){
        a = parseFloat(a.cells[fltr].innerHTML);
        b = parseFloat(b.cells[fltr].innerHTML);
    }
    else{
        a = a.cells[fltr].innerHTML;
        b = b.cells[fltr].innerHTML;
    }
    if (a>b){
        return 1;
    }
    if(a<b){
        return -1;
    }
    return 0;
});
while(merch.hasChildNodes()) {
    merch.removeChild(merch.firstChild);
}
merch.appendChild(tblHead);
for (i=0;i<rowArr.length;i++){
    merch.appendChild(rowArr[i]);
}
} 
```

行中的最后两列是数字，这就是排序方法略有不同的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T17:32:36.453

您的代码中有几个问题。

首先，您没有声明`x`变量。

```
for(var x... 
```

其次，不要`for-in`用于迭代数组之类的集合。使用`for`.

```
for (var x = 0, len = tRows.length; x < len; x++){
    rowArr[x] = tRows[x];
} 
```

第三，没有集合`textContent`的属性。`cells`

这很容易通过记录它的值来测试。这应该是您尝试的第一件事。

```
console.log(a.cells.textContent); // undefined 
```

你需要决定你想要哪个单元格，并通过索引请求它。

```
console.log(a.cells[0].textContent); 
```

最后，您应该知道，这种技术不会在 DOM 中显示排序结果。您只是对数组进行排序。您需要将新的排序附加到 DOM。

也许您知道这一点，但您没有在代码中显示它。

我不知道行与 tBodies 的关系，所以我不能举个例子。但如果所有行都在一个 tbody 中，只需循环数组，然后`tBody[0].appendChild(rowArr[i])`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T17:09:35.993

```
rowArr.sort(function(a,b) {
    a = parseFloat(a.cells.textContent);
    b = parseFloat(b.cells.textContent);
    return (a-b);
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T17:17:26.577

我不确定我是否遗漏了什么，但我很确定你不能`textContent`在`cells`阵列上使用。您需要建立索引`cells`，以便知道要实际排序的列。如果您的行每行有 4 列（或者即使只有 1 列），您仍然需要告诉排序函数要对哪一列进行排序。

所以在你的排序功能中，如果你想按第二列排序，你会想要这样的东西：

```
rowArr.sort(function (a, b) {
    if (a.cells[1].textContent < b.cells[1].textContent) {
        return -1;
    } else if (a.cells[1].textContent > b.cells[1].textContent) {
        return 1;
    }
    return 0;
}); 
```

而且我不确定您的单元格中有什么，但您可能想要使用`.innerHTML`，而不是`.textContent`.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-15T18:06:36.593

***“不要使用 for-in 来迭代集合之类的数组。”*** - 用户1673729

*tRows 不是一个数组，它是一个 HTML 集合。这就是我使用“for in”的*原因——nodirtyrockstar

***HTML Collection***是一个类似于***collection 的数组***。不要使用`for-in`.

# java - Java 工作线程等待

> ID：12439402
> 
> 赞同：1
> 
> 时间：2012-09-15T17:05:24.110
> 
> 标签：java, multithreading, worker

我有一个线程在后台工作，但它并不总是有工作要做。我希望它等待主线程传递数据，然后继续工作。

起初我以为这就是目的`wait()`，`notify()`但似乎反过来。

我怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T17:15:57.537

见[我的评论](https://stackoverflow.com/questions/12439402/java-worker-thread-to-wait#comment16726214_12439402)。

> 听起来你想要一个[`BlockingQueue`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html)- 这是生产者 - 消费者问题的一个非常常见的要求。尽量不要重新发明轮子；-)

存在多种[`BlockingQueue`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html)实现方式，例如有界[`ArrayBlockingQueue`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ArrayBlockingQueue.html)、无界[`LinkedBlockingQueue`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/LinkedBlockingQueue.html)、切换[`SynchronousQueue`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/SynchronousQueue.html)，甚至是[`PriorityBlockingQueue`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/PriorityBlockingQueue.html)。所有`BlockingDeque`s 和`TransferQueue`s 也是`BlockingQueue`s ;-)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-15T17:20:19.013

我建议您使用 ExecutorService。我将队列与线程池结合在一起。

您可以向它提交在后台执行的任务，如果需要，您可以获得结果。

```
ExecutorService service = Executors.newWhateverPool();
service.submit(new Runnable() {  your task here }); 
```

# .htaccess - mod_rewrite .htaccess 的信息

> ID：12439403
> 
> 赞同：0
> 
> 时间：2012-09-15T17:05:45.610
> 
> 标签：.htaccess, optimization, mod-rewrite

我一直在尝试从我的网站中删除 .php。我希望它看起来像 example.com/about 而不是 example.com/about.php。我有它，如果它会重写它，所以我可以将它输入为 example.com/about，但我希望它是当我点击我网站上的链接转到 example.com/about 时它会加载 url 作为示例.com/about 而不是 example.com/about.php。总的来说，我希望这样每当有人在我的页面上加载任何内容时，url 的末尾都没有 .php。我的 .htaccess 现在看起来像这样，

```
RewriteEngine on

RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^([^/]+)/$ $1.php 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:23:37.350

尝试这个：

```
RewriteEngine On 
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^\.]+)$ $1.php [NC,L] 
```

您不必更改站点的结构，因为它只是针对“http://x.com/page”形式的“格式错误”URI，最后没有扩展名。希望我有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T00:12:52.250

> 但我希望它是当我单击我网站上的链接转到 example.com/about 时，它将 URL 加载为 example.com/about 而不是 example.com/about.php

要解决此问题，您需要将站点中的链接从 更改`example.com/about.php`为`example.com/about`. 当“野外”链接仍然指向`.php`URL 时，您仍然可以进行重定向，但除非您更改站点上的链接以删除扩展名，否则您会导致每个页面加载两次访问您的服务器。

至于重定向：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /(.+)\.php[\?\ ]
RewriteRule ^ /%1/ [L,R=301] 
```

我不确定您将 php 扩展名放回原处的规则是否有效，因为您正在匹配尾部斜杠但是当您使用 . 检查文件时`-f`，您的文件名中会有一个杂散的尾部斜杠：例如`/some/path/to/the_file/.php`，而不是`/some/path/to/the_file.php`

尝试：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^/(.+?)/?
RewriteCond %{DOCUMENT_ROOT}/%1.php -f
RewriteRule ^ /%1.php [L] 
```

# php - PCRE，正则表达式未检测到子模式

> ID：12439407
> 
> 赞同：0
> 
> 时间：2012-09-15T17:06:34.283
> 
> 标签：php, regex, pcre

我有 PCRE 模式：

```
$pattern = '/(.*)(\[(heading)\](.*)\[\/\3\])(.*)/Us' 
```

和这段文字

$text ='来自 Millipore Milli-Q 系统（Billerica，MA，USA）的蒸馏水。
HPLC 级甲醇和乙腈购自 JT Baker Phillipsburg, NJ, USA）。
[标题]HEading 测试[/标题]
3-氨基荧蒽购自 Aldrich（密尔沃基，威斯康星州，美国）。
1-氨基芘
1-棕榈酰-甘油-3-磷酸胆碱
咖啡因
胞嘧啶
甲酸（LC/MS 级）
萘啶酸
茶碱
HPLC 级亮氨酸脑啡肽，购自 Fluka（密尔沃基，威斯康星州，美国）
阿米替林盐酸盐
β-Asp-Leu
异亮氨酸
γ- Glu-Leu
马尿酸
亮氨酸
1-油酰-甘油-3-磷酸胆碱
苯丙氨酸
1-硬脂酰-甘油-磷酸胆碱
色氨酸和酪氨酸购自 Sigma (St. Louis, MO, USA)。
'

当我运行时：

```
preg_match_all($pattern,$text,$matches,PREG_OFFSET_CAPTURE) 
```

它没有捕获最后一个子模式，最后的“（。*）”，我不明白为什么不。有什么解释吗？

（也就是说，它从 Millipore Milli-Q 系统（Billerica，MA，USA）中捕获蒸馏水。HPLC 级甲醇和乙腈购自 JT Baker Phillipsburg，NJ，USA）。[标题]标题测试[/标题]'

但不是字符串的最后一部分：

' 3-氨基荧蒽购自 Aldrich (Milwaukee, WI, USA)。1-氨基芘 1-棕榈酰-甘油-3-磷酸胆碱 咖啡因 胞嘧啶甲酸（LC/MS 级）萘啶酸 茶碱 HPLC 级亮氨酸脑啡肽，购自 Fluka（密尔沃基，威斯康星州，美国） 阿米替林盐酸盐 β-Asp-Leu 异亮氨酸 γ- Glu-Leu 马尿酸 亮氨酸 1-油酰-甘油-3-磷酸胆碱 苯丙氨酸 1-硬脂酰-甘油-磷酸胆碱 色氨酸和酪氨酸购自 Sigma (St. Louis, MO, USA)。

我想要的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T17:12:18.537

当我删除贪婪反转标志时，它对我来说很好。

`$pattern = '/(.*)(\[(heading)\](.*)\[\/\3\])(.*)/s';`

```
Array
(
    [0] => Array
        (
            [0] => Array
                (
                    [0] => Distilled water from a Millipore Milli-Q system (Billerica, MA, USA).
HPLC-grade methanol and acetonitrile purchased from J. T. Baker Phillipsburg, NJ, USA).
[heading]HEading test[/heading]
3-Aminofluoranthene purchased from Aldrich (Milwaukee, WI, USA).
1-Aminopyrene
1-palmitoyl-glycero-3-phosphocholine
caffeine
cytosine
formic acid (LC/MS grade)
nalidixic acid
theophylline
HPLC-grade leucine enkephalin purchased from Fluka (Milwaukee, WI, USA)
Amitriptyline hydrochloride
Î²-Asp-Leu
isoleucine
Î³-Glu-Leu
hippuric acid
leucine
1-oleoyl-glycero-3-phosphocholine
phenylalanine
1-stearoyl-glycero-phosphocholine
tryptophan and tyrosine purchased from Sigma (St. Louis, MO, USA).

                    [1] => 0
                )

        )

    [1] => Array
        (
            [0] => Array
                (
                    [0] => Distilled water from a Millipore Milli-Q system (Billerica, MA, USA).
HPLC-grade methanol and acetonitrile purchased from J. T. Baker Phillipsburg, NJ, USA).

                    [1] => 0
                )

        )

    [2] => Array
        (
            [0] => Array
                (
                    [0] => [heading]HEading test[/heading]
                    [1] => 160
                )

        )

    [3] => Array
        (
            [0] => Array
                (
                    [0] => heading
                    [1] => 161
                )

        )

    [4] => Array
        (
            [0] => Array
                (
                    [0] => HEading test
                    [1] => 169
                )

        )

    [5] => Array
        (
            [0] => Array
                (
                    [0] => 
3-Aminofluoranthene purchased from Aldrich (Milwaukee, WI, USA).
1-Aminopyrene
1-palmitoyl-glycero-3-phosphocholine
caffeine
cytosine
formic acid (LC/MS grade)
nalidixic acid
theophylline
HPLC-grade leucine enkephalin purchased from Fluka (Milwaukee, WI, USA)
Amitriptyline hydrochloride
Î²-Asp-Leu
isoleucine
Î³-Glu-Leu
hippuric acid
leucine
1-oleoyl-glycero-3-phosphocholine
phenylalanine
1-stearoyl-glycero-phosphocholine
tryptophan and tyrosine purchased from Sigma (St. Louis, MO, USA).

                    [1] => 191
                )

        )

) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-15T17:15:32.217

尝试用 (.|\n)* 替换最后一个 (.*)

# javascript - 为什么这个 javascript 对象属性未定义？

> ID：12439409
> 
> 赞同：0
> 
> 时间：2012-09-15T17:06:46.537
> 
> 标签：javascript, jquery, object

我正在使用[Javascript 中的 Dictionary Lookups 中](http://ejohn.org/blog/dictionary-lookups-in-javascript/)详细描述的一种方法（请参阅“客户端解决方案”部分）来创建一个对象，该对象包含拼字游戏字典中每个单词的属性。

```
var dict = {};

//ajax call to read dictionary.txt file
$.get("dictionary.txt", parseResults);

function parseResults(txt) {
var words = txt.split( "\n");

  for (var i=0; i < words.length; i++){
      dict[ words[i] ] = true;
  }

  console.log(dict.AAH);
  console.log(dict);

  if (dict.AAH == true) {
     console.log('dict.AAH is true!');
  }

} 
```

（更新代码以使用 Phil 的较早答案）

我不知道为什么 dict.AAH 返回未定义，但 dict 对象在控制台中看起来不错。下面是 Firebug 的截图。

安慰：

![安慰](../Images/57b585c1039f435ce72d9a0c551fdfae.png)

深入到“对象{}”

![目的](../Images/dffa14f51c019bc0e26f5c4b2258d28e.png)

我如何检查给定的单词（在这种情况下为“AAH”），如果它是 dict 对象中定义为 true 的属性，则让它返回 true？

*   [活生生的例子](http://mike-eng.com/sandbox/digit-decoder/)
*   [Github 上的代码](https://github.com/mrengy/Digit-Decoder/tree/966062a4b6373515adb33849770059ff9b205fe0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T17:10:28.950

这可能是一个比赛条件。您正在将字典加载到 a 中`GET`，然后立即（在发出请求时）调用这些 console.log 命令（并且返回未定义的命令）。然后在您调试时实际加载数据。一切都应该在回调或延迟中完成。这是调试器的一个可以理解的怪癖，它让我之前遇到过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T17:11:42.797

您正在尝试在成功处理程序`dict`填充它之前进行输出。`$.get`

试试这个：

```
// If the browser doesn't have String.trim() available, add it...
if (!String.prototype.trim) {
    String.prototype.trim=function(){return this.replace(/^\s\s*/, '').replace(/\s\s*$/, '');};

    String.prototype.ltrim=function(){return this.replace(/^\s+/,'');};

    String.prototype.rtrim=function(){return this.replace(/\s+$/,'');};

    String.prototype.fulltrim=function(){return this.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,'').replace(/\s+/g,' ');};
}

/**
 * Parses the response returned by the AJAX call
 *
 * Response parsing logic must be executed only after the
 * response has been received. To do so, we have to encapsulate
 * it in a function and use it as a onSuccess callback when we
 * place our AJAX call.
 **/
function parseResults(txt) {
    // clean the words when we split the txt
    var words = txt.split("\n").map($.trim);

    for (var i=0; i < words.length; i++){
        dict[ words[i] ] = true;
    }

    console.log(dict.AAH);
    console.log(dict);

    if (dict.AAH == true) {
       console.log('dict.AAH is true!');
    }
}

// global object containing retrieved words.
var dict = {};

//ajax call to read dictionary.txt file
$.get("dictionary.txt", parseResults); 
```

正如另一位用户评论的那样，jQuery 的[$.when](http://api.jquery.com/jQuery.when/)允许您链接此类代码。

顺便说一句，如果您只想知道结果中是否有单词，您可以这样做：

```
function parseResults(txt) {
    // clean the words when we split the txt
    var words = txt.split("\n").map($.trim);

    if ($.inArray('AAH', words)) {
        console.log('AAH is in the result set');
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T17:35:55.380

获取 ajax 请求是异步的。这意味着当 ajax 请求中发生的整个操作正在进行时，javascript 会继续读取下一行。

**那么问题是您正在记录 ajax 请求未能足够早地检索到的值。**

要解决此问题，您可以在 ajax 请求回调中包含日志调用，如下所示

```
var dict = {};

//ajax call to read dictionary.txt file
$.get("dictionary.txt", function( txt ){
    var words = txt.split( "\n");

    for (var i=0; i < words.length; i++){
        dict[ words[i] ] = true;
    }

    //Now inside these console.log will run once you DO have the data
    console.log(dict.AAH);
    console.log(dict);
}); 
```

//不管异步请求是否完成，这里的东西都会运行

**对于这种类型的场景，我更建议在 JQuery 中使用 WHEN 方法作为最佳解决方案**

*以下是我认为最适合复杂项目的方式*

```
var dict = {};

//ajax call to read dictionary.txt file
function getDictionary(){
    return $.ajax("dictionary.txt");
}

/*I recommend this technique because this will allow you to easily extend your 
code to maybe way for more than one ajax request in the future. You can stack 
as many asynchronous operations as you want inside the when statement*/

$.when(getDictionary()).then(function(txt){//Added txt here...forgot callback param before

   var words = txt.split( "\n");

    for (var i=0; i < words.length; i++){
        dict[ words[i] ] = true;
    }

    //Now inside these console.log will run once you DO have the data
    console.log(dict.AAH);
    console.log(dict);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T16:51:00.680

问题不在于您的代码。你的话里有看不见的字符，你没有清理干净。

您可以通过将其用作结果解析器来验证这一点

```
function parseResults(txt) {
  // clean the words when we split the txt
  var words = txt.split("\n")
                 .map($.trim)
                 .splice(0,3); // Keep only 3 first ones

  if(btoa(words[2]) !== btoa('AAH')){ // Compare in Base64
    console.log('YOU HAVE HIDDEN CHARS!');
  }

} 
```

你可以通过将你的角色列入白名单来修复它。

```
function parseResults(txt) {
  // clean the words when we split the txt
  var words = txt.split("\n").map(function(el){
    return el.match(/[a-zA-Z0-9]/g).join('');
  });

  for (var i=0; i < words.length; i++){
      dict[ words[i] ] = true;
  }

  console.log(dict.AAH);
  console.log(dict);

  if (dict.AAH == true) {
     console.log('dict.AAH is true!');
  }
} 
```

我建议在服务器端清理它，因为在与您的实时站点中看到的一样大的数组中的每个元素上运行正则表达式可能会导致性能问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T13:41:56.710

我认为问题在于您已将`dict`其定义为对象，但将其用作数组。

替换`var dict = {}`为`var dict = new Array()`，您的代码应该可以工作（尝试在 Google Chrome 上使用您的实时示例）。

# c - C中的浮点除法

> ID：12439410
> 
> 赞同：-1
> 
> 时间：2012-09-15T17:06:58.493
> 
> 标签：c, math, types

我正在编写一个需要做一些算术运算的程序。

这是我到目前为止所拥有的：

```
#include <stdio.h>
int main(void){
    double h, x, n;
    printf("enter h > ");
    scanf("%1f", &h);
    printf("enter x > ");
    scanf("%1f", &x);
    /* here's where I believe I'm encountering an error */
    n = x/h;

    return 0;
} 
```

所以假设我输入 h = 0.01 和 x = 0.25，我应该得到 n = 0.25/0.01 = 25 对吗？

我试过类型转换：

```
n = (float)x/(float)h; 
```

但它不起作用......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T17:18:03.633

您在 scanf 调用中已经写`%1f`了（这是一个数字），但是双精度的正确格式是`%lf`（这是一个小写的 L）。

因此，您的数字没有正确转换为双精度数，并且您不能期望得到正确的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T17:10:34.120

问题可能是由于scanf。我建议改用 fgets 。但是尝试：

```
int main(void){
    float h, x, n;
    printf("enter h > ");
    scanf("%f", &h);
    getchar();
    printf("enter x > ");
    getchar();
    scanf("%f", &x);

    n = x/h;

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T17:17:08.863

原因是您已将 h,x,n 声明为 double，然后将其分配给 float.try 在变量声明中使用 float

```
#include <stdio.h>
int main(void){
float h, x, n;
printf("enter h > ");
scanf("%f", &h);
printf("enter x > ");
scanf("%f", &x);

n = x/h;
printf("%f",n);
return 0; 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T17:19:32.683

见[我的评论](https://stackoverflow.com/questions/12439410/floating-point-division-in-c#comment16726239_12439410)。`l`尝试读取`double`输入时需要指定修饰符。

```
#include <stdio.h>

inline int flush() {
  return fflush(stdout);
}

int main() {
  double x, h, n;

  printf("enter h> ");
  flush();
  scanf("%lf", &h);

  printf("enter x> ");
  flush();
  scanf("%lf", &x);

  n = x / h;
  printf("n: %lf\n", n);
} 
```

# loader - Hello World 引导加载程序

> ID：12439415
> 
> 赞同：1
> 
> 时间：2012-09-15T17:07:32.640
> 
> 标签：loader, boot

我正在尝试为汇编中的引导加载程序打个招呼。我正在关注本教程： [http ://www.osdever.net/tutorials/view/hello-world-boot-loader](http://www.osdever.net/tutorials/view/hello-world-boot-loader)

我搜索了一下，似乎人们说 gcc 不适用于编译程序集。所以我搜索并找到了flat assembler。当我尝试编译该示例时，它在第一行 [BITS 16] 处给了我一个错误。基本上它说的是“非法指令”。

这段代码需要什么类型的汇编器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T17:12:06.120

我不知道 GCC 中的某些工具是否可以编译汇编程序（如果可以，是否可以编译为 16 位代码），但是您参考的站点推荐 NASM。你用 NASM 试过吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-21T21:45:12.943

如果没有，请尝试删除 BITS 16 周围的方括号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-03T08:28:50.483

我只是把这条线注释掉了，它在 FASM 中工作。FASM 似乎自动默认为 16 位。编译后，它生成了一个同名的 BIN 文件。我将其重命名为 IMG 扩展，然后使用 VirtualBox 将其分配为软盘映像进行测试。工作得很好并且启动了。

只要您将此 BIN/IMG 文件写入第一个扇区的驱动器，它似乎就可以正常工作。我也使用了上述网站上的教程。

# php - 使用 imagick php 扩展裁剪选定位置的图像

> ID：12439416
> 
> 赞同：0
> 
> 时间：2012-09-15T17:07:47.170
> 
> 标签：php, imagick

有没有办法在 PHP imagick 扩展中裁剪选择位置的图像？

我在 php 5.3+ 中使用 imagick php 扩展。

如果有人知道如何像下面这样裁剪位置，请与我分享

我有一个 500px 正方形的图像，我想将顶部 200px（左侧）裁剪到底部 400px 右侧。

请在下面查看我的示例。

**例子..**

[示例原文](http://i.stack.imgur.com/qefCI.png)

**输出..**

[输出应如下所示](http://i.stack.imgur.com/VCz5B.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T15:02:43.093

我希望这段代码会有所帮助。

```
$mask = new Imagick();
$mask->newimage(500, 500, new ImagickPixel('transparent'));
$mask->setimageformat('png');
$polygon = new ImagickDraw();
$polygon->setFillColor(new ImagickPixel('black'));
/*
  You didn't specified from where to start the crop and where to end it, 
  so just assumed those values
*/
$polygon->polygon(array(
    array('x' => 200, 'y' => 0),
    array('x' => 400, 'y' => 0),
    array('x' => 450, 'y' => 500),
    array('x' => 250, 'y' => 500),
    array('x' => 200, 'y' => 0),
));
$mask->drawimage($polygon);
$image = new Imagick();
$image->readimage("Your source image path :) ");
$image->setImageFormat('png');
$image->setImageVirtualPixelMethod(Imagick::VIRTUALPIXELMETHOD_TRANSPARENT);
$image->setImageMatte(true);
$image->compositeimage($mask, Imagick::COMPOSITE_DSTIN, 0, 0, Imagick::CHANNEL_ALPHA);
$image->trimimage(0);
header('Content-Type: image/png');
echo $image;
die(); 
```

# python - 将另一个程序设置为始终位于顶部？

> ID：12439417
> 
> 赞同：4
> 
> 时间：2012-09-15T17:07:58.910
> 
> 标签：python, windows, python-3.x, always-on-top

我正在寻找一种方法来使另一个 Windows 应用程序窗口保持“顶部”。

例子：

> 您的程序/脚本正在将一些数据写入记事本窗口供用户阅读。该记事本窗口位于其他所有内容之上，而用户可以在后台“浏览”而不突出显示记事本窗口，并且仍然可以从中读取。

所以 tkinters`wm_attributes("-topmost", 1)`不会工作，因为它只影响我“从头开始”创建的窗口。但它应该只对另一个窗口（pe记事本）做同样的事情。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-16T14:09:01.897

此解决方案需要使用作为[Pywin32](http://sourceforge.net/projects/pywin32/files/pywin32/Build%20217/)扩展一部分的 `win32gui`和模块。`win32con`

如果您已经运行了记事本应用程序的实例，则以下内容会将所述应用程序带到前台并在浏览其他应用程序时将其保留在那里：

```
import win32gui
import win32con

hwnd = win32gui.FindWindow('Notepad', None)
win32gui.SetWindowPos(hwnd, win32con.HWND_TOPMOST, 100, 100, 300, 200, 0) 
```

# c# - for循环内变量的动态命名

> ID：12439419
> 
> 赞同：0
> 
> 时间：2012-09-15T17:08:00.860
> 
> 标签：c#, windows-phone-7

我想在运行 16 次的 for 循环中创建 16 个`Textbox`名为`textbox1`to的 es。`textbox16`因此，`textbox`在每个循环中创建 1。如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T17:11:36.413

您不能动态命名变量。在这种情况下，将控件保存在某个集合中是最有意义的，例如`List<T>`：

```
List<TextBox> textBoxes = new List<TextBox>();
for(int i = 1 ; i <= 16 ; i++ )
{
    var tb = new TextBox() { Name = "textbox" + i };
    textBoxes.Add(tb);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T17:11:44.663

试试这个 ：

```
for(int counter=0;counter<16;counter++){
    TextBox TB = new TextBox();
    TB.Id = "textbox" + (counter + 1);

    // code to add this textbox in screen

} 
```

# c++ - 随机 ascii 字符不断在输出中弹出

> ID：12439420
> 
> 赞同：0
> 
> 时间：2012-09-15T17:08:06.073
> 
> 标签：c++, io, symbols

我正在尝试从文件中读取信息并以某种方式处理该信息。我需要在文件的最左侧制作一个所有单词的数组，这些单词前面没有空格。但是，当我尝试显示该 char 数组的内容时，我一直得到非常奇怪的输出。

这是示例输入：

```
# Sample Input

    LA 1,3
    LA 2,1
TOP    NOP
    ADDR 3,1
    ST 3, VAL
    CMPR 3,4
    JNE TOP
    P_INT 1,VAL
    P_REGS
    HALT
VAL     INT 0
TAN     LA  2,1 
```

因此，例如当我运行我的程序时，我的输出应该是：

```
TOP
VAL
TAN 
```

相反，我得到：

```
a
aTOP
aVAL
aTAN
a
a 
```

我不确定为什么会这样。我所做的任何小改动实际上都没有帮助，它们只是改变了我预期输出之前的内容。有时它是 ASCII 值 0 或 20 个字符。希望有人可以帮助我解决这个问题，因为它让我发疯。

这是我的代码：

```
#include <string>
#include <iostream>
#include <cstdlib>
#include <string.h>
#include <fstream>
#include <stdio.h>

using namespace std;

int main(int argc, char *argv[])
{
// If no extra file is provided then exit the program with error message
if (argc <= 1)
{
    cout << "Correct Usage: " << argv[0] << " <Filename>" << endl;
    exit (1);
}

// Array to hold the registers and initialize them all to zero
int registers [] = {0,0,0,0,0,0,0,0};

string memory [16000];

string symTbl [1000][1000];

char line[100];
char label [9];
char opcode[9];
char arg1[256];
char arg2[256];
char* pch;

// Open the file that was input on the command line
ifstream myFile;
myFile.open(argv[1]);

if (!myFile.is_open())
{
    cerr << "Cannot open the file." << endl;
}

int counter = 0;
int i = 0;

while (myFile.good())
{
    myFile.getline(line, 100, '\n');

    // If the line begins with a #, then just get the next line
    if (line[0] == '#')
    {
        continue;
    }

    // If there is a label, then this code will run

    if ( line[0] != '\t' && line[0]!=' ')
    {
        if( pch = strtok(line-1," \t"));
            {
                strcpy(label,pch);
                cout << label << endl;
            }

        if (pch = strtok(NULL, " \t"))
        {
            strcpy(opcode,pch);
        }

        if (pch = strtok(NULL, " \t,"))
        {
            strcpy(arg1,pch);
        }

        if (pch = strtok(NULL, ","))
        {
            strcpy(arg2, pch);
        }
    }

}

return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T17:15:53.147

您正在传递`line-1`到`strtok`，这将导致它返回一个指向字符串开头之前的字符的指针；访问`line[-1]`将产生未定义的行为。`strtok`接受一个指向字符串开头的指针。

您的语句`;`末尾还有 a ，这会使测试无效并导致块运行，即使is 。`if( pch = strtok(line-1," \t"))``if``pch``NULL`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T17:14:05.663

你这里有一个错误： `strtok(line-1," \t")`

`line-1`是 的地址`line[-1]`。这是一个无效的地址，使用它会产生未定义的行为。

# java - 从 HTML 中提取图像 使用蒂卡

> ID：12439421
> 
> 赞同：0
> 
> 时间：2012-09-15T17:08:44.790
> 
> 标签：java, apache, xhtml, apache-tika

我有以下 xhtml 文件，其中包含大约 30-40 张图像。该文件是自动生成的，图像的数量会改变，但真正应该的 {html text} 内容不会改变。我希望有人能指出我正确的方向。

我正在尝试解析/查找这些图像以将它们从 image#.png 重命名为 {html text}.png。

HTML 的子字符串：

```
<div class="s8a6d62e8" style="">Top 10 ARP sources in terms of bits.</div>
<div class="sbeea9846" style="">
    <img style="width: 701px; height: 526px; border: 0px" src="Final Test Report_3.files\Final Test Report_34.Png"></img>
</div>
<div class="s306f0049" style="">Figure 3 - Top Ten ARP MAC Sources</div>
<div class="s12d95b95" style="">
    <a name="Top Ten ARP MAC Destinations"><br></a>
</div>
<div class="s1a75bf07" style="">Top Ten ARP MAC Destinations</div>
<div class="s8a6d62e8" style="">Top 10 ARP destinations in terms of bits.</div>
<div class="sbeea9846" style="">
    <img style="width: 701px; height: 526px; border: 0px" src="Final Test Report_3.files\Final Test Report_35.Png"></img>
</div>
<div class="s306f0049" style="">Figure 4 - Top Ten ARP MAC Destinations</div>
<div class="s1a75bf07" style="">ARP MAC Conversations</div>
<div class="s8a6d62e8" style="">Conversation ring with ARP endpoints and conversations.</div>
<div class="sbeea9846" style="">
    <img style="width: 701px; height: 526px; border: 0px" src="Final Test Report_3.files\Final Test Report_36.Png"></img>
</div>
<div class="s306f0049" style="">Figure 5 - ARP MAC Conversations</div> 
```

我想要的输出如下：

```
Final Test Report_3.files\Top Ten ARP MAC Sources.Png
Final Test Report_3.files\Top Ten ARP MAC Destinations.Png
Final Test Report_3.files\ARP MAC Conversations.Png 
```

ETC。，

# cakephp - 自定义管理员路由 - View/Admin/MyModel/index.ctp 而不是 View/MyModel/admin_index.ctp

> ID：12439426
> 
> 赞同：0
> 
> 时间：2012-09-15T17:10:08.440
> 
> 标签：cakephp, routing, admin, custom-routes, cakephp-2.2

在 CakePHP 中，有没有办法在这样的 URL 上设置管理路由：

```
...com/admin/articles/ 
```

要去：

```
View/Admin/Articles/index.ctp 
```

代替：

```
View/Articles/admin_index.ctp 
```

我的想法是，让我的管理文件与我的前端文件更加分离会很好，因为我想在许多项目中重复使用我的管理。如果可以做到这一点，它们的负面影响是我没有想到的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T17:55:51.957

只需将 Controller::$viewPath 设置为您需要的任何内容。在您的 AppController::beforeRender() 集中`$this->viewPath = 'Admin/' . $this->name;`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-16T16:34:55.550

为什么不为您的管理员创建一个单独的应用程序？或者用它创建一个插件？有了它，您可以在所有项目中重用它。

# project - 学生计算机科学项目的独特想法？

> ID：12439427
> 
> 赞同：0
> 
> 时间：2012-09-15T17:10:27.613
> 
> 标签：project, computer-science

我正在攻读计算机科学学位的第三年，我需要选择一个项目并在接下来的一年内进行开发。

我正在为一个项目寻找独特的想法，我有一些想法，但是我仍然对它们有疑问，它们是否足以开发等等。

例如 ：

1.  带有数据库查询的超市（食品）客户端/服务器应用程序

2.  苹果手机应用

3.  蜂窝约会系统

4.  ...

我敢肯定，你们所有人（SO 成员）在职业生涯的某个阶段都遇到过（并且仍然是）一个有趣的项目（或多个项目），因此任何想法都将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T17:15:23.630

4/ 世界坟墓数据库。每个人的坟墓位置（谷歌地图）（名字和姓氏+出生和死亡日期）。

如果这成为热门话题，我想要 % ;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T17:29:52.880

一个移动应用程序，可以让人们互相交朋友，支持定位服务，允许您显示地图，显示您所有朋友的位置，然后单击发送短信告诉他们留在原地，因为您正在路上。

这真的取决于你的兴趣是什么，但如果是我，我会专注于一个项目，让我探索通过集成广泛的技术和架构来解决问题的可能性：具有社交功能的网络或 iPhone 应用程序利用云资源和 Hadoop 或 Cassandra 等扩展技术的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T17:30:13.167

我将编写网络代码作为我的工作。以下是我最近完成的一些非工作时间原型项目，它们可能会在明年成为我们的产品。您想选择可行且没有外部因素的东西，因此您可以保证使其稳定运行。

*   WOL 服务。中央服务器维护与客户端节点的连接，客户端节点通过在机器唤醒时运行的服务签入。他们在登记时发送他们的 MAC。通道必须是安全的，并且只有注册帐户才能通过中央服务器进行身份验证。每台机器都运行一个低频广播服务（UPnP 风格），向服务网络上的其他机器通告它的存在。当一个节点认为它从另一个节点接收到信号时，它会与它交换一个挑战，并将结果发送到中央服务器。因此，中央服务器可以验证机器确实是“相邻的”（能够直接相互联系），并且两台机器都没有谎报另一台的位置。

    重点：如果您有一个节点的登录详细信息，托管服务会将 WOL 指令中继到网络上已知与目标节点上次启动时相邻的任何其他节点。因此，当您无法访问其子网时，您可以远程唤醒您的机器，假设子网上至少有一台其他机器已打开并签入服务。

    这是一个雄心勃勃的项目，但对于一个对网络有很好掌握的积极进取的学生来说是可能的。

*   其次，VPN服务怎么样？在中央服务器上进行 STUN 以帮助两台不相邻的计算机相互连接并建立具有流量控制通道的 SSH 样式协议以执行端口转发（保持简单：客户端上的 SOCKS 代理比尝试更可取做一个具有“真正的”VPN功能的完整的点对点网桥）。

我在不到一天的时间内就将它们中的每一个都变成了一个工作原型（使用之前的一些预先编写的组件），因此对于仍在学习 C 和网络编程的学生来说，它们可能是合适的年度项目。我不知道你的大学会把你推到什么水平。

# c# - 读取大型xml文件的最快方法

> ID：12439435
> 
> 赞同：0
> 
> 时间：2012-09-15T17:11:45.183
> 
> 标签：c#, ado.net, xml-serialization

在我的项目中，我想读取一个包含**20,000**条或更多记录的大型 xml 文件。阅读此 xml 文件的最佳方法是什么。

1.  将xml加载到数据集中并循环通过数据集并更新数据库
2.  创建 xml 对象（序列化）并遍历每个对象并更新数据库？

如果您能指导我并让我知道是否还有其他方法可以做到这一点，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T17:23:50.630

试试看。性能的第一条规则，始终衡量 :-) 考虑到您的两种选择都涉及将整个 XML 读入内存，这将花费时间并消耗内存。第三种选择是使用 an 一次`XmlReader`读取一条记录。我只能猜测，但我敢打赌这`XmlReader`将是最快的方式。

# javascript - 如何使用循环创建元素

> ID：12439436
> 
> 赞同：0
> 
> 时间：2012-09-15T17:11:46.007
> 
> 标签：javascript, jquery, html

帮助，当数据显示到 div 标签时，我想做循环，如下代码：

```
function GetDataFromServer() {

var url = "http://bertho.web.id/curl/services21/DataReadNP.php";
JSONP.get(url, {}, function(response){
    var listItem, container, dataList = document.getElementById("dataList"), str = "", str2 = "";
            for ( var i = 0; i < response.length; ++i ) {
                str += response[i].title;
                str2 += response[i].fetch_date;
            }

    listItem = document.createElement('div');
    listItem.setAttribute('data-bb-type', 'item');
    listItem.setAttribute('data-bb-img', 'images/icons/icon11.png');
    listItem.setAttribute('data-bb-title', str);
    listItem.innerHTML = str2;

    container = document.createElement('div');
    container.appendChild(listItem);

    bb.imageList.apply([container]);

    dataList.appendChild(container.firstChild);

    if (bb.scroller) {
        bb.scroller.refresh();
    }

});  

} 
```

要将列表显示到屏幕上：

```
function dataOnTheFly() {
   document.getElementById('waiting').style.display = 'none';
   GetDataFromServer()  
} 
```

我想要的数据显示在屏幕上，但不符合我想要的。请看下面的图片：

**http://s13.postimage.org/68w2zfmh3/data_BB.png**

我想列出这个数据循环，直到服务器上的所有数据都被取走。如何获得我想要的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T17:30:24.570

提取问题中给出的 URL，您的数据如下所示：

```
"items": [
 {
  "id": "30",
  "judul": "KATY PERRY: PART OF ME",
  "img": "http:\/\/bertho.web.id\/curl\/21proses\/images\/r_134760931680781_100x147.jpg",
  "desk": "Sebuah dokumentasi tentang kehidupan Katy Perry diatas maupun diluar panggung. [More]",
  "web": "http:\/\/www.21cineplex.com\/",
  "fetch_date": "15-09-2012 20:10:23"
 }, 
```

这是一种`JSON`回应，而不是一种`JSONP`——它们是相似的，但又是不同的。我不确定您的`JSONP`功能是做什么的，所以我无法确切告诉您如何进行。

在某些时候，您需要`JSON.parse()`在收到的数据上运行。您的图书馆可能也可能不会为您执行此操作。如果`typeof response === "string"`那时还没有。

一旦你`JSON`解码到一个对象，那么它只是一个简单的循环问题

```
var items = response.items;
var l = items.length;
var i = 0;
var item;

for (i = 0; i < l; i++) {
  item = items[i];
  // Now you can do something with item
   listItem = document.createElement('div');
   listItem.setAttribute('data-bb-type', 'item');
   listItem.setAttribute('data-bb-img', item.img);
   listItem.setAttribute('data-bb-title', item.judul);
   // Don't forget to append listItem somewhere.
} 
```

# java - @ErrorPlace 总是被显示

> ID：12439442
> 
> 赞同：0
> 
> 时间：2012-09-15T17:12:05.697
> 
> 标签：java, gwt, gwt-platform, gwtp

我一直试图弄清楚为什么 mu web 应用程序总是响应 ErrorPresenter/ErrorView 即使令牌是有效的：

```
@Override
public void revealErrorPlace(String invalidStringToken) {
            GWT.log("Invalid token=" + invalidStringToken);
    revealPlace(errorPlaceRequest); 
} 
```

例如，我在 NameTokens 中定义了静态字符串变量：“main”、“error”、“map”、“user”

但是，每次我的应用程序运行时，它都会进入 #error 页面，即使我手动将 #main、#map、#user 放入浏览器中，并且尽管已使用 @NameTokens(NameTokens 。用户）：

```
@ProxyCodeSplit
@NameToken(NameTokens.user)
public interface MyProxy extends Proxy<UserPresenter> {
} 
```

当我尝试通过在 URL 中附加这些来手动访问 #map 和 #user 页面时，但仍然显示的演示者是 ErrorView 和 ErrorPresenter ...

什么可能导致这种行为？我正在使用 GWT 平台 BTW。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:20:38.927

我认为这些地方应该用注释`#!map`而不是仅注释`#map`。
这可能是重定向到错误页面的原因吗？

# postgresql - psql 在启动时挂起

> ID：12439447
> 
> 赞同：8
> 
> 时间：2012-09-15T17:12:27.023
> 
> 标签：postgresql

我刚刚在 Windows 7 上安装了 postgres 9.2。安装很顺利。打开 pgadmin 很顺利，我添加了一个名为 playorm 的数据库，它运行良好。我用 SQL Workbench 连接到运行的 playorm 数据库。

然后我像这样启动命令行

```
 ./psql.exe -h localhost -U postgres playorm 
```

它只是永远挂起。5分钟后，它仍然挂起。我是否在命令中遗漏了某些内容（我也尝试了 -d playorm 但仍然挂起）。其他人有 9.2 在 Windows 7 上工作吗？

谢谢，院长

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-15T17:16:47.363

啊，我想通了。它只挂在 cygwin....dangit，我讨厌使用 DOS 命令提示符。

# html - 文字装饰问题

> ID：12439450
> 
> 赞同：-1
> 
> 时间：2012-09-15T17:12:53.420
> 
> 标签：html, css

我是 CSS 新手，当我输入命令以消除项目符号时，在我的文章中使用文本装饰，什么也没发生。我尝试放入不同的代码位，但仍然没有。关于导致它不起作用的任何建议？

[http://codepen.io/alexlwilson/full/kxGwg](http://codepen.io/alexlwilson/full/kxGwg)

更新：修复是这样的：li { list-style:none; }

感谢您的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T17:16:33.347

您需要为链接添加一般规则：

```
a {
    text-decoration:none;
} 
```

或者

```
article a {
    text-decoration:none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T17:17:19.127

您的 CSS 中没有任何内容适用于文章中的锚标记。

这应该有助于：

```
article a:link,
article a:active,
article a:visited,
article a:hover {
    text-decoration: none;
} 
```

为了让用户体验更清晰，我还建议：

```
article a:active,
article a:hover {
    text-decoration: underline;
} 
```

**更新**

原始问题来源：[https ://stackoverflow.com/revisions/3f6615ef-e3ca-4079-a761-30afd6644a34/view-source](https://stackoverflow.com/revisions/3f6615ef-e3ca-4079-a761-30afd6644a34/view-source)

经过多次更改后，OP 最终提到从列表项中删除项目符号而不是删除文本装饰。

这个*新*问题的答案是：

```
li {
    list-style:none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T06:50:09.847

这个简单的解决方案怎么样？

```
ul {
   list-style-type: none;
} 
```

# c++ - Qt - 将项目添加到 QTableWidget 时应用程序崩溃

> ID：12439452
> 
> 赞同：0
> 
> 时间：2012-09-15T17:13:09.287
> 
> 标签：c++, qt

当我尝试将项目添加到 QTableWidge（通过代码）时，该应用程序永远不会运行。它显示程序崩溃对话框，然后退出。这是我使用的代码：

```
QTableWidgetItem *something = new QTableWidgetItem(QString("A"));
ui->itemTable->setItem(1,1,something); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T07:18:10.597

您可以使用 gdb 获取核心回溯并分析可能存在的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:29:18.387

您必须将代码放在后面，`ui->setupUi(this)`因为此函数会创建您将在程序中使用的所有小部件。您的原始代码尝试将该项目插入到一个不存在的小部件中（我的意思是它还没有分配内存），这就是您的程序被压垮的原因。

它应该是：

```
constructor
{
    ui->setupUi(this);

    /* some code */
    QTableWidgetItem *something = new QTableWidgetItem(QString("A"));
    ui->itemTable->setItem(1,1,something);
    /* some code */
} 
```

# cocoa - 编辑数组后告诉数组控制器刷新表格视图？

> ID：12439461
> 
> 赞同：1
> 
> 时间：2012-09-15T17:14:28.450
> 
> 标签：cocoa, tableview, nsarraycontroller

谢谢阅读：

我之前一直被这个问题困扰，我知道有一个解决方案，但是经过几个小时的搜索，我再也找不到它了。

我正在使用 NSForm 和“添加”按钮来创建学生的新实例并将该学生添加到数组 (sessionRoster)。这里没有问题。

```
- (IBAction)addNewStudentButtonPressed:(id)sender {
//CREATE NEW STUDENT
Student *newStudent = [[Student alloc] init];

//ASSIGN VALUES FROM FORM
newStudent.firstName = [[studentForm cellAtIndex:0] stringValue];
newStudent.lastName = [[studentForm cellAtIndex:1] stringValue];

//ADD STUDENT TO ROSTER
[sessionRoster addObject:newStudent];

//CLEAR FORM
[[studentForm cellAtIndex:0] setStringValue:@""];
[[studentForm cellAtIndex:1] setStringValue:@""];
} 
```

我正在使用数组控制器在表格视图中显示数组。这里没有问题。我的绑定是正确的，因为我在 中包含了一些“虚拟”学生`init`，并且它们在程序运行时出现（我想发布屏幕截图，但我没有足够的声誉）。

我的问题是，如何在每次按下“添加”按钮时更新表格？我确实将表格作为财产，并且调用`[tableView reloadData]`不起作用。我相信之前的解决方案是某种“contentWillUpdate:YES”和“contentDidUpdate:YES”配对，但我再也找不到该信息了。

谢谢你的时间！Ĵ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-29T19:55:45.647

将学生对象添加到 arrayController 而不是数组。阵列控制器“完成提升”。

# javascript - javascript 中的公共和特权方法：为什么这样称呼它们？

> ID：12439465
> 
> 赞同：27
> 
> 时间：2012-09-15T17:15:08.847
> 
> 标签：javascript, oop, encapsulation

如果我理解正确，根据 Douglas Crockford [http://javascript.crockford.com/private.html](http://javascript.crockford.com/private.html)，“特权”方法类似于我们所知的“公共”方法。和“公共”方法有点不同。

我是这样理解的：

1.  “特权”方法可以访问私有变量，因为它是在定义其余私有变量时在闭包内定义的。

    ```
    var C = function(){
      var private;
      this.privilegedMethod = function(){
           /* blah blah */
      };
    }
    var cObj = new C(); 
    ```

2.  “公共”方法是通过原型添加到对象本身之外的对象的方法。

    ```
    var C = function(){
       /* blah blah */
    }
    C.prototype.publicMethod = function(){
        /* blah blah */
    };
    var cObj = new C(); 
    ```

我发现这些“特权”和“公共”的定义非常令人困惑。我认为“特权”方法实际上是一种公共方法，正如我们从面向对象编程中所知道的那样。而且我认为“公共”方法应该被命名为其他方法。如果你仔细想想，它是一种奇怪的函数，它是对象的成员，但它不能访问任何其他私有变量，这意味着它对封装没有贡献。它几乎就像对象的独立辅助方法。

所以我想知道，为什么道格拉斯·克罗克福德会提出这些令人困惑的术语？为什么 javascript 社区采用了这些术语？或者如果我对某事有误，请纠正我。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-15T17:40:11.537

由于在 JavaScript 中没有像 public/private/protected 这样的范围修饰符，为了接近 OOP 世界，Douglas Crockford 使用这样的名称，而不是混淆来自 Java 的任何人

特权方法可以看到在函数内部定义的变量（这里有一个重要说明 - 在 JavaScript 中，唯一的范围是函数范围。没有块范围），因此它们是“特权的”。是的，可以从对象实例中调用它们，但重要的是，它们可以看到所有的东西，用`var`（真正的私有东西）声明

另一方面，附加到对象原型的公共方法有一个更重要的事情——它们被评估一次，并且在给定对象的所有实例中都可以看到。

如果您`this`在原型方法中使用关键字，它将指向 Object 的当前实例，但您将只能看到在`this`.

我不知道它是否清楚，但这里主要是 JavaScript 是基于原型的语言，并且在语言中引入了原型链以使继承成为可能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T17:39:37.070

弗拉德，我同意你的看法：我也很困惑！看这里（来自[http://javascript.crockford.com/private.html](http://javascript.crockford.com/private.html)）：

```
function Container(param) {
    // methode privee
    function dec() {
    console.log('private method is looking for private member secret : ' + secret);
        if (secret > 0) {
            secret -= 1;
            return true;
        } else {
            return false;
        }
    }
    // membres privées
    var secret = 3;
    var that = this;
    // méthode privilégiée
    this.service = function () {
    console.log('priviligied method is looking for private member secret : ' + secret);
        return dec() ? that.member : null;
    };
    // membres publiques
    this.member = param;

}
var myContainer = new Container('abc');

Container.prototype.stamp = function (string) {
    console.log('public method is looking for private member secret : ' + this.secret);
    return this.member + string;
}

console.log(myContainer.stamp('def'));
//for (i=0;i<4;i++)
console.log(myContainer.service()); 
```

[特权与公共](http://jsfiddle.net/kiminox/PJR6z/3/)

这个 jsfiddle 示例将显示：

```
public method is looking for private member secret : undefined
abcdef
priviligied method is looking for private member secret : 3
private method is looking for private member secret : 3
abc 
```

所以，答案是：公共方法 <=> 特权方法不是吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-05T11:27:39.657

在传统的 OOP 语言中，一个类的所有成员都可以访问一个类的所有其他成员。

在 Javascript 中情况并非如此。公共方法可以访问类的其他成员（即构造函数）都不知道的私有数据。同样，该类的其他成员可能具有该方法看不到的数据。

考虑如下：

```
function TheirTrait() {
  var privateData = "foo";
  this.privilegedMethod = function() {
    return privateData;
  }
}

function MyClass() {
  var privateData = undefined;
  this.publicMethod = function() {
    return privateData;
  }
  TheirTrait.apply(this, arguments);
}

var myObject = new MyClass();
myObject.privilegedMethod() // returns "foo"
myObject.publicMethod() // returns undefined 
```

如您所见，两者`publicMethod`都是`privilegedMethod`公共*的*，因为它们都可以从外部访问，但`privilegedMethod`可以访问其他数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-31T17:35:38.183

两种方法的主要区别在于特权方法可以继承，这意味着子类可以直接访问它们，但公共方法不能用于子类，当然在经典继承方法中。

希望这很有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-22T17:12:07.413

1.  使用“this”关键字创建特权方法，使用构造函数的原型属性创建公共方法。

2.  特权方法可以访问私有变量和方法。公共方法可以调用特权方法，但不能调用私有方法。

3.  对象内部和外部都可用的特权和公共方法。

# sql - 查询限制

> ID：12439466
> 
> 赞同：0
> 
> 时间：2012-09-15T17:15:18.140
> 
> 标签：sql, sql-server

有人可以告诉我这段代码有什么问题。基本上我要做的是根据他们的 ID 而不是名称来识别租户（以防有更多同名的租户）。谢谢

```
SELECT DISTINCT P.PROPERTYId, P.PROPERTYName, T.TYPEName 
FROM RENTAL R, PROPERTY P, TYPE T
Group by P.PROPERTYId, P.PROPERTYName, T.TYPEName 
HAVING RENTERId = (SELECT RENTERId FROM RENTER
WHERE RENTERFirstName = 'AL'
AND RENTERLastName = 'SMITH')
AND R.PROPERTYId = P.PROPERTYId
AND P.TYPEId = T.TYPEId
AND T.TYPEName = 'VILLA'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T17:35:14.667

试试这个。

```
SELECT DISTINCT 
     Renter.RenterID, 
     Property.PropertyId, 
     Property.PropertyName, 
     Type.TYPEName  
FROM Rental
    inner join Property on Rental.PropertyID = Property.PropertyID
    inner join Type on Property.TypeID = Type.TypeID
    inner join Renter on Rental.RenterID = Renter.RenterID
where Type.TypeName = 'villa'
and Renter.RenterFirstName = 'al'
and Renter.RenterLastName = 'smith' 
```

请注意如何使用`join`语法链接表，并且该`where`子句保留用于过滤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T17:44:02.093

试试看 。将 = 替换为 IN 。

# java - Java 日期格式

> ID：12439468
> 
> 赞同：1
> 
> 时间：2012-09-15T17:15:22.170
> 
> 标签：java, jdbc, date-format

我在 MySQL 服务器中有一个名为 Caller_List 的表。在此表中，我有一个名为 call_date 的日期列，其数据类型为日期。我创建了一个网页，其中有一个用于 from_day 的 SELECT 框（存储所有 1 到 31 天），一个用于月份的 SELECT 框（存储从 1 月到 12 月的所有月份名称），一个用于年份的 SELECT 框（存储从 2000 年到 2012 年的所有年份。就像我还有一个用于 to_day、to_month 和 to_year 的 SELECT 框。

**问题是当我使用request.getParameter()**方法从 java servlet 获取这些日期、月份和年份时，它被作为字符串数据类型获取并存储在名为 from_date 和 to_date 的变量中。我连接 from_day、from_month 和 from_year 并存储在名为 from_date 的变量中。我还将 to_day、to_month 和 to_year 连接起来并存储在 to_date 中。因为 MySQL 理解这种格式，所以我以年-月-日的格式连接它们。

然后我通过以下查询来检索这两个 from_date 和两个日期之间的数据：

```
select caller_name,call_date 
from Caller_List 
where call_date>='"+from_date+"' and call_date<='"+to_date+"' 
```

我也尝试了以下查询，但徒劳无功：

```
select caller_name,call_date 
from Caller_List 
where call_date between '"+from_date+"' and '"+to_date+"' 
```

我还知道在执行查询之前我需要将 from_date 和 to_date 转换为日期格式。但是我是java新手，不知道怎么做。我也想要格式年-月-日的日期。我确实想用日期显示时间，请帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T23:42:22.930

如果您只想知道如何在 java 中将字符串解析为日期，您可以简单地使用`SimpleDateFormat`该类。

```
final DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
try {
    final Date fromDate = dateFormat.parse(from_date);
} catch (ParseException e) {
    // ...
} 
```

假设您的 from_date 字符串看起来像`2012-09-16`.

如果你想显示一个带时间的日期。您也可以使用`SimpleDateFormat`.

```
final DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd hh:mm:ss");
try {
    final String displayDate = dateFormat.format(new Date());
} catch (ParseException e) {
    // ...
} 
```

`displayDate`应该看起来`2012-09-16 20:13:25`像。

还有一件事，您可以比较 MySQL 中的字符串类型和日期类型。只需确保您的日期字符串具有“yyyy-mm-dd hh:mm:ss”模式。当然，你应该使用preparedStatement。

# backbone.js - 使用 Backbone 渲染 Handlebars 模板

> ID：12439471
> 
> 赞同：1
> 
> 时间：2012-09-15T17:15:35.800
> 
> 标签：backbone.js, handlebars.js

我有一个主干视图（见下文），我认为它在做正确的事情

```
Index = Backbone.View.extend({
render: function() {
        var activities = new Activities();
        activities.fetch();
        var tpl = Handlebars.compile($("#activities-template").html());
        $(this.el).html(tpl({activities: activities.toJSON()}));
        return this;
      }
}); 
```

如果使用 Chrome JS 控制台执行 render() 函数中的每一行，我将得到预期的结果，其中传入的元素填充了模板输出。但是，当我使用以下命令运行它时

```
var i = new Index({el: $("body")})
i.render() 
```

"i.$el" 完全是空的——HTML 没有像在控制台中那样被渲染。任何想法为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T17:38:22.973

[`fetch`](http://backbonejs.org/#Collection-fetch)是一个 AJAX 调用，因此无法保证`activities.toJSON()`在您执行此操作时会为您提供任何数据：

```
activities.fetch();
var tpl = Handlebars.compile($("#activities-template").html());
$(this.el).html(tpl({activities: activities.toJSON()})); 
```

在控制台中执行代码可能会让 AJAX 调用有时间在您尝试使用`activities`.

你应该做两件事：

1.  如果为空，请修复您的模板以执行一些明智的操作（例如显示*加载...*某种消息） 。`activities`
2.  将您的视图附加`render`到集合的`"reset"`事件中：

    ```
    initialize: function() {
        // Or, more commonly, create the collection outside the view
        // and say `new View({ collection: ... })`
        this.collection = new Activities();
        this.collection.on('reset', this.render, this);
        this.collection.fetch();
    },
    render: function() {
        var tpl = Handlebars.compile($("#activities-template").html());
        this.$el.html(tpl({activities: this.collection.toJSON()}));
        return this;
    } 
    ```

我也切换到了，当 Backbone 已经给你[`this.$el`](http://backbonejs.org/#View-%24el)的时候就不需要了。`$(this.el)``this.$el`

# php - yii 一种形式的动态实例

> ID：12439477
> 
> 赞同：-2
> 
> 时间：2012-09-15T17:16:01.780
> 
> 标签：php, forms, dynamic, yii

嗨，我是使用 Yii 的新手，我遇到了一个问题，我有两个模型，modelA 和 modelB，modelB 对 modelA 有一个外键，所以我想要的是以 modelA 的形式添加 modelB 的实例。我的意思是以modelA的形式填写modelA的所有字段并添加3或4个modelB实例，然后一起提交。yii有什么办法吗？

请举个例子会有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T03:41:55.427

好吧，如果我理解你的话，我认为你应该在与 B 相关的控制器中定义一个模型 A 的新对象，并在负责该过程的动作中将 B 的字段注入到 A 中！

# css - 尝试在可见/隐藏 div 之间复制淡入淡出

> ID：12439479
> 
> 赞同：1
> 
> 时间：2012-09-15T17:16:18.263
> 
> 标签：css, html, toggle

正如在这个网站上看到的那样[，](http://www.klick.com/health/#about)我试图复制三个选项卡之间的淡入淡出过渡，当每个选项卡都被单击时。我不知道我是遗漏了什么还是我只是个白痴，但我似乎无法在源代码中找到代码来制作隐藏/可见事件。

如果有人可以向我指出，或者建议一个简单的替代方案，我将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:22:24.150

查找[jQuery Fade In](http://api.jquery.com/fadeIn/)函数和淡出，很容易复制这样的东西。

须藤代码：

```
link.onClick{
 $('#lastDiv').fadeOut('slow')
 $('#newDiv').fadeIn('slow')
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T17:26:22.563

它实际上是通过 jQuery 完成的：

```
$(".content").each(function() {
    var container = this
    var tabbodies = $(this).find(".tabbody")
    var tabs = $(this).find(".tab")
    if (!isMobile) tabs = tabs.not(".news .tab")
    tabs.click(function(e) {
    e.preventDefault()
    var self = this
    var body = this.hash ? $(this.hash) : $(this).next(".tabbody")
    tabs.not(this).removeClass("current")
    $(this)[isMobile ? "toggleClass": "addClass"]("current")
    tabbodies.not(body).stop(true, true)[isMobile ? "slideUp" : "hide"]()
    body.stop(true, true)[isMobile ? "slideToggle" : "fadeIn"]()
    if (isMobile) $.scrollTo(container, 500, {offset: {top: -45}})
}) 
```

使用 Firebug，您可以在第 245 行的 script.js 中看到它。

# ms-access - 在 MS Access (VBA) 中模拟多线程

> ID：12439483
> 
> 赞同：2
> 
> 时间：2012-09-15T17:16:35.393
> 
> 标签：ms-access, vba

我编写了一个在 Access 数据库中运行的 VBA 脚本。该脚本在各种表上查找值，并根据值的组合将属性分配给主表。

该脚本按预期工作，但是，我正在处理数百万条记录，因此需要很长的时间。

我想把这个过程分成更小的部分，并在不同的线程上同时运行脚本。

在我开始尝试构建解决方案之前，我想知道：

1.  根据您的经验，这会提高性能吗？或者这个过程会花费同样长的时间吗？
2.  我正在考虑使用 Powershell 或 VBScript 来完成此任务。有什么需要注意的障碍吗？

请注意：由于这将在客户端上运行，我必须使用 Access 作为后端，如果我使用 Powershell，它必须是 1.0 版。

我知道这些都是非常模糊的问题，但我们感谢任何基于先前经验的反馈。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T17:38:06.310

只是想发回我对此的最终解决方案......

对于 60,000 条记录样本量，我尝试了以下方法，根据来自其他表的值的组合将属性分配给主表：

```
Solution 1: Used a combination of SQL queries and FSO Dictionary objects to assign attribute
Result: 60+ minutes to update 60,000 records

Solution 2: Ran script from Solution 1 concurrently from 3 separate instances of Excel
Result: CPU was maxed out (Instance 1 - 50% of CPU, Instances 2 and 3 - 25% each); stopped the code after an hour since it wasn't a viable solution

Solution 3: Tried using SQL UPDATE queries to update main table with the attribute
Result: This failed because apparently Access does not allow for a join on an UPDATE sub-query (or I just stink at writing SQL)

Solution 4 (Best Result): Selected all records from main table that matched the criteria for each attribute, 
 output the records into csv and assigned the attribute to all records in the csv file. 
 This created a separate file for each attribute, all in the same format. I then 
 imported and appended all of the records from the csv files into a new main table.  
Result: 2.5 minutes to update 60,000 records 
```

特别感谢 Pynner 和 Remou，他们建议将数据写入 csv。

我从没想过这是用属性更新记录的最快方法。如果你没有提出这个建议，我可能会认为用 Access 和 VBA 不可能完成这个项目。非常感谢您分享您的智慧！

# c# - 如何使用 IDataReader 和 SQL 选择和映射 1:N 关系

> ID：12439495
> 
> 赞同：0
> 
> 时间：2012-09-15T17:18:03.550
> 
> 标签：c#, asp.net, sql

举一个非常简单的例子，A​​ 公司有男性用户。我有两个表，公司和用户。User 表有一个外键 CompanyId。假设我必须填写公司及其所有用户的列表，我将如何将其与数据阅读器映射？

我需要多个选择语句吗？一个获得所有需要的公司，然后另一个获得选定公司内的所有用户？伪代码如下。

```
 select companies;
 Loop through all companies returned and create a list of companyids for where in.
 select users where in (companyid list created above)
 attach users to selected companies 
```

从逻辑上讲，完成这项任务的最佳方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:24:48.547

如果您不想使用 ORM（这会使这更容易），那么您想做一个 JOIN 语句，然后可能使用 a`Dictionary`来存储每个公司的主键作为字典的键，然后一个`Company`实例作为字典的值，它将包含`User`实例的集合。

例如

```
SELECT [column list] FROM Companies c INNER JOIN Users u ON u.CompanyId = c.Id; 
```

# scala - 如何使“组合（s：S，i：I）：S与I”形式的方法通用？

> ID：12439496
> 
> 赞同：1
> 
> 时间：2012-09-15T17:18:05.343
> 
> 标签：scala, types

鉴于此代码：

```
 trait S {
    def s: String
  }

  trait I {
    def i: Int
  }

  case class CC_S(s: String) extends S
  case class CC_I(i: Int) extends I
  case class CC_S_I(s: String, i: Int) extends S with I

  def combine(s: S, i: I): S with I = CC_S_I(s.s, i.i) 
```

此测试成功：

```
Assert.assertEquals(CC_S_I("s", 1), combine(CC_S("s"), CC_I(1))) 
```

（如何）我可以将 combine 方法泛型为具有类型参数的特征吗？即我想定义这样的东西：

```
 trait MyTrait[A,B] {
    def combine(a: A, b: B): A with B
  } 
```

这样我就可以像这样使用它：

```
 class MyClass[A <: CC_S, B <: CC_I] extends MyTrait[A,B] {
    override def combine(s: A, i: B) = CC_S_I(s.s, i.i) //Note: this line does not compile...
  }

  Assert.assertEquals(CC_S_I("s", 1), new MyClass().combine(CC_S("s"), CC_I(1))) 
```

**更新**。这将是一个更好的例子：

```
 class MyClass[A <: S, B <: I] extends MyTrait[A,B] {
    override def combine(s: A, i: B) = CC_S_I(s.s, i.i) //Note: this line does not compile...
  } 
```

请参阅 Travis 的答案下的评论以查看答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T17:35:58.657

问题在于它`CC_S_I`实际上不是`CC_S`or的子类型`CC_I`（尽管它是`S`and的子类型`I`）。以下将起作用：

```
class MyClass extends MyTrait[S, I] {
  def combine(s: S, i: I): S with I = CC_S_I(s.s, i.i)
} 
```

* * *

附带说明一下，如果您正在做很多此类事情，那么[Shapeless库值得研究。](https://github.com/milessabin/shapeless)它允许您`combine`非常通用地编写方法：

```
import shapeless._

def combine[A, B, C, AL <: HList, BL <: HList, CL <: HList](a: A, b: B)(implicit
  aIso: Iso[A, AL],
  bIso: Iso[B, BL],
  cIso: Iso[C, CL],
  p: PrependAux[AL, BL, CL]
): C = cIso from p(aIso to a, bIso to b) 
```

现在你只需要一点样板：

```
implicit val ccsIso = Iso.hlist(CC_S.apply _, CC_S.unapply _)
implicit val cciIso = Iso.hlist(CC_I.apply _, CC_I.unapply _)
implicit val ccsiIso = Iso.hlist(CC_S_I.apply _, CC_S_I.unapply _) 
```

And you can write:

```
scala> val x = combine[
     |   CC_S, CC_I, CC_S_I, String :: HNil, Int :: HNil, String :: Int :: HNil
     | ](CC_S("s"), CC_I(1))
x: CC_S_I = CC_S_I(s,1) 
```

The enormous type annotation is unfortunately necessary with this formulation, but this should give you some idea of what's possible, and there are things you could do to make the usage cleaner.

# mysql - MySQL , OperationalError(1148, '此 MySQL 版本不允许使用的命令')

> ID：12439497
> 
> 赞同：0
> 
> 时间：2012-09-15T17:18:19.843
> 
> 标签：mysql

尝试在 aws RDS 上将文件插入 mysql 时，我的 SQL 出现一个奇怪的错误。

```
(<class '_mysql_exceptions.OperationalError'>, OperationalError(1148, 'The used command is not allowed with this MySQL version'), <traceback object at 0x7f34d8485dd0>) 
```

我在 ubuntu 12.04 桌面上运行，只是做了一个 apt_install mysql-server mysql-client。

我该如何解决这个问题？

mysql -V mysql Ver 14.14 Distrib 5.5.24，用于使用 readline 6.2 的 debian-linux-gnu (x86_64)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T02:03:37.000

尝试使用 --local-infile=1 启动 mysql 服务器

因此，根据您启动服务器的方式，它看起来像：

**$ mysql --local-infile=1 -u root -p**

# security - 如何防止移动应用中的网络钓鱼？

> ID：12439499
> 
> 赞同：12
> 
> 时间：2012-09-15T17:18:50.090
> 
> 标签：security, mobile, phishing

想象一个场景，安装在您移动设备上的游戏 X 想要从社交网络 Y 访问您的帐户信息。假设 Y 公开了一些 API，并具有“使用 Y 登录”等功能。在桌面 PC 上 X 可能会弹出新的浏览器窗口，地址栏中清楚地显示了 Y 的域，带有一个挂锁图标清楚地指示 SSL 连接，在此弹出窗口中，社交网络 Y 会要求用户提供登录名、密码和协议以传递一些信息（如姓名、头像、电子邮件）到应用程序 X。例如 OAuth 2 使用这种方法。

在我看来，在移动设备上情况就大不相同了，因为应用程序 X 可以控制整个屏幕。特别是它可以在设备的屏幕上绘制与真实浏览器无法区分的内容，并劫持用户提供的登录名和密码。

如何对抗覆盖整个屏幕并伪装成浏览器甚至操作系统设置窗口等的恶意应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-05T09:23:15.777

即使在桌面上也没有针对此的技术防御。模仿浏览器的外观并在虚假地址栏中绘制绿色 SSL 锁是微不足道的。或者您可以简单地在您的应用程序中包含一个键盘记录器，以获取输入同一系统上任何应用程序的密码。

对于包括键盘记录器的移动应用程序来说更难。绘制令人信服的假浏览器窗口很容易。另一个防御措施是应用商店的审查过程。官方应用商店作为可信应用的唯一来源，在一定程度上缓解了此类问题。虽然恶意应用程序可以通过任何审核流程，但一旦被发现就可以将其删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-04T23:38:11.160

怎么样：双击主页按钮，以便看到应用程序名称？
![iOS 示例](../Images/0aedc9cc3d2ff673d14cca971595563e.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-05T12:31:42.753

您还可以运行任务管理器来查看应用程序的名称 fe com.android.chrome。我认为谷歌不会允许市场上有两个同名的应用程序。

# playframework - 玩！MorphiaPlugin 在 CRUD 中抛出 IllegalArgumentException

> ID：12439504
> 
> 赞同：0
> 
> 时间：2012-09-15T17:19:44.927
> 
> 标签：playframework, morphia

当我尝试通过传递这样的 where 子句来自定义 CRUD 的 list() 函数时：

```
where = "state in (Punjab,Jammu and Kashmir)";
List objects = type.findPage(page, search, searchFields, orderBy, order, where); 
```

我得到一个 IllegalArgumentException 如下所示：

```
IllegalArgumentException occured : invalid where clause: state in (Punjab,Jammu and Kashmir). 
```

我相信这是 MorphiaPlugin 正在分裂，只要有这个 MorphiaPlugin 线的“和”

```
String[] propValPairs = where.split("(and|&&)"); 
```

有什么解决方法吗？如何在 where 子句中转义**“和”这个词？**我正在使用 Play 1.2.5 和 morphia-1.2.9。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T22:30:01.103

您应该在“in”表达式中将“and”替换为“,”：

`state in (Punjab,Jammu and Kashmir)`=> `state in (Punjab,Jammu, Kashmir)`。

# parsing - 使用 sscanf 解析

> ID：12439508
> 
> 赞同：0
> 
> 时间：2012-09-15T17:20:12.570
> 
> 标签：parsing, scanf

美好的一天，我尝试解析这个查询字符串：

```
pkname=Paras&key=password123 
```

使用此代码：

```
printf("Content-type:text/html\n\n");

printf("<html><body>"); 

data = getenv("QUERY_STRING");

if(data){
    sscanf(data, "pkname=%10[^&]&key=%30[^&]&", pkname, key);

    printf("%s", pkname);
    printf("%s", key);

}

printf("</html></body>"); 
```

但我似乎无法正确获取密钥，因为它的输出始终为空：

```
Paras(null) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T05:23:34.340

您没有显示变量的定义，`key`但它打印出来的事实`(null)`强烈表明它的值为 NULL，并且两者`printf`都`sscanf`试图通过不对 NULL 指针进行段错误来保护您。（GNU libc 实现这样做； printf 打印 NULL as`(null)`并且 sscanf 似乎只是停止解析。）

你可能想要的是这样的：

```
char pkname[11];
char key[31]; 
```

尽管您可能还会发现`m`限定符很有用，因为它避免了指定任意字段长度限制的需要。

# clojure - 如何将“通用”表达式转换为断言谓词表达式？(Clojure)

> ID：12439511
> 
> 赞同：1
> 
> 时间：2012-09-15T17:20:40.200
> 
> 标签：clojure, contract

我正在尝试编写一个将“通用”表达式转换为针对特定给定值评估的表达式的宏。

假设我有一个形式为未计算表达式的向量，

```
'[(map? %)                          
  (-> % :value string?)             
  (fn[x] (apply #(pos? %) (- x 2))] 
```

我有一个 gensymed 值 v，我希望在运行时将其“传递”给上述表达式。因此，假设 v 将是编译时使用的符号的名称。我还希望断言转换后的表达式。基本上，对于上面的例子，我希望将上面的向量表达式转换成下面的形式。请注意，我在前两个表达式中将值 v 传递给 %，并在第三个表达式中传递给 x。下面的代码不正确，但仅说明了我想要发生的事情。我不知道如何真正让 v 进入以下任何表达式断言。

```
'[(assert (map? %))                           ;; % is equal to v
  (assert (-> % :value string?))              ;; % is equal to v
  (assert (fn[x] (apply #(pos? %) (- x 2)))]  ;; x is equal to v 
```

作为一个指导性的例子，我希望能够在 prepost-map 的 :post 部分做什么？在 defn 表达式上执行。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T21:02:41.273

Don't do this with expressions. Instead, use functions. Then it's easy to just call each of the functions with whatever value you want.

# spring - 如何对局部变量使用spring依赖注入？

> ID：12439512
> 
> 赞同：5
> 
> 时间：2012-09-15T17:21:03.240
> 
> 标签：spring, dependency-injection

我发现了很多关于类成员变量的setter依赖注入的例子，但是发现很难找到任何关于使用spring的方法内部的局部变量的setter依赖注入的例子。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T17:43:33.937

您给定的 TextEditor 类使用的 SpellChecker 示例在它能够进行依赖注入之前可能看起来像这样。您正在使用它的方法内创建类 SpellChecker 的新实例。

```
public class TextEditor {

    public void doSomething() {
        new SpellChecker().checkSpelling();
    }

} 
```

如果您想解耦代码并能够将 SpellChecker 替换为用于单元测试目的的模拟或由依赖注入容器提供的另一个实现，您必须更改类并提供可以注入此实例的字段。

```
public class TextEditor {

    @Autowired
    private SpellChecker spellChecker;

    public void doSomething() {
        spellChecker.checkSpelling();
    }

} 
```

由于这仍然不容易测试，因为您需要使用反射将模拟注入到该私有字段中，您可以提供一个 Setter 或通过从字段中删除修饰符 private 使字段包可见。因此，同一包中的单元测试可以访问该字段并提供模拟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-11-17T06:54:12.623

似乎不可能将依赖项注入方法的局部变量或任何局部范围，甚至是静态局部范围。
原因很简单，因为没有办法通过反射注入它，反射不提供任何允许访问方法的局部变量的 API。
你可以在这里阅读更多内容：[https](https://stackoverflow.com/a/24249500/11035655) ://stackoverflow.com/a/24249500/11035655 。

# ios - iOS 应用测试；iPad 是否必须使用与 iOS 开发者计划会员相同的 Apple ID

> ID：12439517
> 
> 赞同：0
> 
> 时间：2012-09-15T17:21:34.390
> 
> 标签：ios

我是 iOS 开发和拥有 iPad 的新手；我有一个在模拟器上运行的应用程序，现在我想在我自己的 iPad 上测试它。

我的 iPad 已使用我的个人 AppleID 注册，但我想使用单独的企业 AppleID 注册 iOS 开发者计划。当我将 iPad 插入 MacBook 并想要测试应用程序时，这会是一个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T17:22:42.807

不，这样做完全没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T17:27:45.943

我同意@mattigalloway 的回答，但我会在这里添加更多信息。

仅当您想测试应用内购买时，您可能需要通过设置-> App Store 从您的 iPad 更改您的 Apple ID。通过退出应用内购买测试用户并退出。

我希望这能让你更清楚。

# c# - 如何为 Windows Phone 创建像 .apk 这样的应用程序文件？

> ID：12439518
> 
> 赞同：2
> 
> 时间：2012-09-15T17:21:54.750
> 
> 标签：c#, windows-phone-7, windows-phone-7.1, xap

我正在开发 Windows Phone 应用程序。我完成了。我需要应用程序文件。如何为 Windows Phone 创建像 .apk 这样的应用程序文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T17:24:47.393

构建项目时，您应该在项目目录中的某处获得一个*.xap*文件。我自己没有使用过 Windows Phone，所以我不知道具体在哪里。但如果它类似于桌面 C#，则默认为 bin/release，如果是调试版本，则默认为 bin/debug。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T17:25:48.453

.apk 文件是一个包含整个应用程序的 Android 文件。对于 Windows Phone 7，等效的是 .xap 文件。这只是一个包含应用程序和资源的 zip 文件。只需记住从`Documents\Visual Studio 2010\Projects\AppName\Bin\Release\`.

# ios - UIManagedDocument OpenWithCompletionHandler 永远不会返回

> ID：12439528
> 
> 赞同：3
> 
> 时间：2012-09-15T17:23:16.620
> 
> 标签：ios, uimanageddocument

我遇到了一个奇怪的问题。我确信我在代码中的其他地方对文件做了一些事情并且它没有正确关闭或其他什么，但现在它处于报告为已关闭的状态，但是当我调用 OpenWithCompletionHandler 它永远不会返回。见下文：

```
 //if the file is closed, open it and then set up the controller
    if (file.documentState == UIDocumentStateClosed){
        //---- this code executes        
        [file openWithCompletionHandler:^(BOOL success){
           // ---- this code NEVER executes
        }];
    } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-17T16:57:25.463

我遇到了同样的问题。

您是否尝试在 viewDidLoad 中打开文档？

尝试将代码移动到另一种方法。它为我解决了这个问题。

在 ViewController.h

```
@property (nonatomic,strong) NSManagedObjectContext *managedObjectContext;
@property (nonatomic,strong) UIManagedDocument *document; 
```

在 ViewController.m

```
@synthesize managedObjectContext = _managedObjectContext;
@synthesize document = _document;

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Do not try to open the document here
    // Call another method instead :D
    if (!_managedObjectContext) {
        [self createContext];
    }
}

- (void)createContext
{
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSURL *url = [[fileManager URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
    url = [url URLByAppendingPathComponent:@"Database"];

    self.document = [[UIManagedDocument alloc] initWithFileURL:url];

    // FILE DOES NOT EXIST - Let's create a new one    
    if (![[NSFileManager defaultManager] fileExistsAtPath:[url path]]) {
        [self.document saveToURL:url forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success) {
            if (success) {
                self.managedObjectContext = self.document.managedObjectContext;
            } else {
                NSLog(@"ERROR: Cannot create new document");
            }
        }];

    // FILE IS CLOSED - Let's open it
    } else if (self.document.documentState == UIDocumentStateClosed) {
        [self.document openWithCompletionHandler:^(BOOL success) {
            if (success) {
                self.managedObjectContext = self.document.managedObjectContext;
            } else {
                NSLog(@"File is closed and it wont open!");
            }
        }];

    // FILE EXISTS AND IS OPENED - Yay!
    } else {
        self.managedObjectContext = self.document.managedObjectContext;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T20:47:57.517

请参阅[使用 UIManagedDocument 的 iPhone Simulator 5.1 和 Xcode 4.5 中的错误](https://stackoverflow.com/questions/12557442/bug-in-iphone-simulator-5-1-with-xcode-4-5-using-uimanageddocument)。

我的解决方案与报告的相同，但我不得不将我的应用程序的部署目标降低到 iOS 5.0，以便“iPhone 5.0 模拟器”可用作运行目标。我只看到这个问题试图将 iPhone 5.1 模拟器与 XCode 4.5.2 一起使用，5.0 和 6.0 模拟器都可以工作。

# ruby-on-rails - 无法为 AuthenticationsController 找到操作“facebook”

> ID：12439532
> 
> 赞同：1
> 
> 时间：2012-09-15T17:23:47.130
> 
> 标签：ruby-on-rails, facebook, devise, omniauth

我正在尝试使用我的应用程序配置 FB 连接。在 2012 年 7 月 18 日之前它可以正常工作。我没有修改任何代码，但现在它停止工作了。

使用设计和omniauth

当我尝试与 FB 连接时，我收到此错误：

AbstractController::ActionNotFound（无法为 AuthenticationsController 找到操作“facebook”）：

config/initializers/quiet_assets.rb:6:in `call_with_quiet_assets'

GET /users/auth/facebook/callback?code=AQD...# *=*

AuthenticationsController 中只有 create 方法，没有 facebook 和 twitter，但 twitter 正在工作。

app_id 和 app-secret 匹配

Twitter 一切正常，FB 和 Twitter 都是同时设置的。

谢谢

# android - NullPointerException（共享首选项）

> ID：12439534
> 
> 赞同：0
> 
> 时间：2012-09-15T17:24:01.877
> 
> 标签：android, nullpointerexception, sharedpreferences

我在开始我的活动时收到 NullPointerException 错误。我的 logcat 说它发生在我的活动中，但没有指定在哪里。我第一次尝试使用 SharedPreferences 并且不知道错误发生在哪里。

这是我的活动：

```
 public class SharedPrefLoginActivity extends Activity {

private Button cancelBttn;
private EditText rname;
private EditText rpwrd;
private Button rBttn;
/** Called when the activity is first created. */

private SharedPreferences dhj;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    dhj = this.getSharedPreferences("DHJ", MODE_WORLD_READABLE);
    if(dhj.getString("password", null) !=null) {
    setContentView(R.layout.register);
    rname = (EditText) findViewById(R.id.reg_uname);
    rpwrd = (EditText) findViewById(R.id.reg_pswd);
    rBttn = (Button) findViewById(R.id.reg_button);

    rBttn.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            SharedPreferences.Editor dhjEditor = dhj.edit();
            dhjEditor.putString("rname", rname.getText().toString());
            dhjEditor.putString("rpwrd", rpwrd.getText().toString());
            dhjEditor.commit();
            Toast.makeText(getApplicationContext(), "Credentials Saved!", Toast.LENGTH_SHORT).show();
    }
     }
      );
       }
    else { 

        Intent i = new Intent(SharedPrefLoginActivity.this, AccessApp.class);
        startActivity(i);   
    }
    cancelBttn.setOnClickListener (new OnClickListener() {
        @Override
        public void onClick(View v) {
            //Close application
            finish();
    }
    });     
    }} 
```

日志猫：

```
 09-14 09:27:26.244: E/AndroidRuntime(589): Uncaught handler: thread main exiting  due to uncaught exception
    09-14 09:27:26.293: E/AndroidRuntime(589): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.SharedPreferences.Login/com.SharedPreferences.Login.SharedPrefLoginActivity}: java.lang.NullPointerException
    09-14 09:27:26.293: E/AndroidRuntime(589):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
    09-14 09:27:26.293: E/AndroidRuntime(589):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
    09-14 09:27:26.293: E/AndroidRuntime(589):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
    09-14 09:27:26.293: E/AndroidRuntime(589):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
    09-14 09:27:26.293: E/AndroidRuntime(589):  at android.os.Handler.dispatchMessage(Handler.java:99)
    09-14 09:27:26.293: E/AndroidRuntime(589):  at android.os.Looper.loop(Looper.java:123)
    09-14 09:27:26.293: E/AndroidRuntime(589):  at android.app.ActivityThread.main(ActivityThread.java:4363)
    09-14 09:27:26.293: E/AndroidRuntime(589):  at java.lang.reflect.Method.invokeNative(Native Method)
    09-14 09:27:26.293: E/AndroidRuntime(589):  at java.lang.reflect.Method.invoke(Method.java:521)
    09-14 09:27:26.293: E/AndroidRuntime(589):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
    09-14 09:27:26.293: E/AndroidRuntime(589):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
    09-14 09:27:26.293: E/AndroidRuntime(589):  at dalvik.system.NativeStart.main(Native Method)
    09-14 09:27:26.293: E/AndroidRuntime(589): Caused by: java.lang.NullPointerException
    09-14 09:27:26.293: E/AndroidRuntime(589):  at com.SharedPreferences.Login.SharedPrefLoginActivity.onCreate(SharedPrefLoginActivity.java:58)
    09-14 09:27:26.293: E/AndroidRuntime(589):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    09-14 09:27:26.293: E/AndroidRuntime(589):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T18:00:25.353

您忘记设置`cancelBttn`字段：

```
 cancelBttn = (Button) findViewById(R.id.cancel_button); // Insert your R.id.XXX here. 
```

也搬

```
 setContentView(R.layout.register); 
```

就在之后`super.onCreate(savedInstanceState);`。发生这种`NullPointerException`情况是因为布局没有膨胀。您可以在堆栈跟踪的最后 4 行中看到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T18:02:23.907

可能是这条线导致它：

```
cancelBttn.setOnClickListener (new OnClickListener() 
```

我没有看到任何实例化，`cancelBttn`所以它在这条线上是空的......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T16:45:14.747

这些行

```
Caused by: java.lang.NullPointerException
09-14 09:27:26.293: E/AndroidRuntime(589):  at     com.SharedPreferences.Login.SharedPrefLoginActivity.onCreate(SharedPrefLoginActivity.java:58)
09-14 09:27:26.293: E/AndroidRuntime(589):  at   android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 
```

让您知道您的 NullPointer 来自 onCreate 方法。在注册它的侦听器之前，您必须首先实例化您的 cancelButtn 变量。我认为这不是 dhj 成员的问题，因为它没有附加到视图，所以布局不需要在被引用之前被膨胀..尽管在调用后设置它的值是明智的设置内容视图（）。

# opencl - OpenCL 模板代码问题

> ID：12439535
> 
> 赞同：1
> 
> 时间：2012-09-15T17:24:02.633
> 
> 标签：opencl, stencils

我对 4 点模板 OpenCL 代码有疑问。代码运行良好，但我没有得到预期的 symetrics 最终 2D 值。

我怀疑这是内核代码中更新值的问题。这是内核代码：

```
// kernel code

const char *source ="__kernel void line_compute(const double diagx, const double diagy,\
const double weightx,  const double weighty,  const int size_x,\
 __global double* tab_new, __global double* r)\
{ int iy = get_global_id(0)+1;\
  int ix = get_global_id(1)+1;\
  double new_value, cell, cell_n, cell_s, cell_w, cell_e;\
  double rk;\
  cell_s = tab_new[(iy+1)*(size_x+2)+ix];\
  cell_n = tab_new[(iy-1)*(size_x+2)+ix];\
  cell_e = tab_new[iy*(size_x+2)+(ix+1)];\
  cell_w = tab_new[iy*(size_x+2)+(ix-1)];\
  cell     = tab_new[iy*(size_x+2)+ix];\
  new_value = weighty *( cell_n + cell_s + cell*diagy)+\
                      weightx *( cell_e + cell_w + cell*diagx);\
  rk = cell - new_value;\
  r[iy*(size_x+2)+ix] = rk *rk;\
  barrier(CLK_GLOBAL_MEM_FENCE);\
  tab_new[iy*(size_x+2)+ix] = new_value;\
}"; 
```

cell_s、cell_n、cell_e、cell_w 表示 2D 模板的 4 个值。我计算 new_value 并在`"barrier(CLK_GLOBAL_MEM_FENCE)"`.

但是，不同的工作项之间似乎存在冲突。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T17:50:43.337

您使用的屏障 GLOBAL_MEM_FENCE*不会*按预期同步所有工作项。它只与一个工作组同步访问。

通常不会同时执行所有工作组，因为它们仅在少数物理内核上调度，并且在内核内不可能进行全局同步。

解决方案是将输出写入不同的缓冲区。

# objective-c - MBProgressHud 和 SDWebImagePrefetcher

> ID：12439536
> 
> 赞同：4
> 
> 时间：2012-09-15T17:24:03.993
> 
> 标签：objective-c, ios, nsurlconnection, mbprogresshud, sdwebimage

我试图在使用方法[`MBProgressHUD`](https://github.com/jdg/MBProgressHUD)下载 URL 列表时显示自定义。[`SDWebImagePrefetcher`](https://github.com/rs/SDWebImage/blob/master/SDWebImage/SDWebImagePrefetcher.m)`NSURLConnection`

`SDWebImagePrefetcher`有一个方法，当被调用时，它会在控制台中显示图像下载的进度。

现在，我想展示`NSLog`自定义的进度，`MBProgressHUD`我希望 HUD 一直显示在屏幕上，直到流程完成，但我不知道该怎么做，另外，当我的`NSURLConnection`方法被调用时，它会显示初始 HUD（正在连接），然后快速跳转到“完成”，即使图像仍需要下载。

这是我的代码：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {

    HUD.mode = MBProgressHUDModeDeterminate;

}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {

    HUD.labelText = @"Loading";
    HUD.detailsLabelText = @"Downloading contents..."; //here, i would like to show the progress of the download, but it seems to jump this part
    HUD.dimBackground = YES;

}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {

    //arr = array which holds a plist
    NSMutableArray *array = [[[NSMutableArray alloc]init]autorelease];
    for (NSDictionary *dict in arr) {
        for (NSDictionary *val in [dict valueForKey:STR_ROWS]) {
            [array addObject:[val objectForKey:@"image"]];
        }
    }

    [prefetcher prefetchURLs:array];

    HUD.customView = [[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"checkmark.png"]] autorelease];
    HUD.mode = MBProgressHUDModeCustomView;
    HUD.labelText = NSLocalizedString(@"Completed",@"Completed!");
    HUD.detailsLabelText = nil;
    HUD.dimBackground = YES;
    [HUD hide:YES afterDelay:2];

}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    [HUD hide:YES];
    UIAlertView *alertView = [[[UIAlertView alloc] initWithTitle:@"Connection Failed message:[NSString stringWithFormat:@"Connection to the remote server failed with error:\n %@\n Try again in a while"),[error localizedDescription]] delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil] autorelease];
    [alertView show];
} 
```

我试图研究这些例子，但没有找到如何做我想做的事。

**编辑**

HUD 设置：

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{
        if (buttonIndex == 0){
            [alertView dismissWithClickedButtonIndex:0 animated:YES];
        }
        else{
            NetworkStatus internetStatus = [internetReachable currentReachabilityStatus];
            switch (internetStatus) {
                case NotReachable:
                {
                    //not reachable
                   break;
                 }
                case (ReachableViaWWAN):
                {
                    //reachable but not with the needed mode
                    break;
                }
                case (ReachableViaWiFi):{
                    HUD = [[MBProgressHUD showHUDAddedTo:self.navigationController.view animated:YES]retain];
                    HUD.delegate = self;
                    HUD.dimBackground = YES;
                    HUD.labelText = @"Connecting...";
                    NSURL *URL = [NSURL URLWithString:@"http://mywebsite.com/myPlist.plist"];
                    NSURLRequest *request = [NSURLRequest requestWithURL:URL];
                    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
                    [connection start];
                    [connection release];
                    break;
                }

                default:
                    break;
            }

        }
    } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T17:37:22.690

`connection:didReceiveResponse:`您必须记录下载的大小，例如在 self.responseSize 中。然后，`connection:didReceiveData:`您必须将刚刚获得的数据附加到之前获得的数据中，并更新进度：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    HUD.mode = MBProgressHUDModeDeterminate;
    HUD.labelText = @"Loading";
    HUD.detailsLabelText = @"Downloading contents...";
    HUD.dimBackground = YES;

    // Define responseSize somewhere...
    responseSize = [response expectedContentLength];
    myData = [NSMutableData data];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [myData appendData:data];

    HUD.progress = (float)myData.length / responseSize; 
} 
```

# c++ - 运行 Cython 的问题

> ID：12439537
> 
> 赞同：1
> 
> 时间：2012-09-15T17:24:19.810
> 
> 标签：c++, python, cython

我正在尝试使用运行 Mountain Lion 的 OSX 安装 Python2.7 运行 cython，但出现以下错误：

```
Traceback (most recent call last):
File "/usr/local/bin/cython", line 5, in <module>
from pkg_resources import load_entry_point
File "/System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/python/pkg_resources.py", line 2603, in <module>
working_set.require(__requires__)
File "/System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/python/pkg_resources.py", line 666, in require
needed = self.resolve(parse_requirements(requirements))
File "/System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/python/pkg_resources.py", line 565, in resolve
raise DistributionNotFound(req)  # XXX put more info here
pkg_resources.DistributionNotFound: Cython==0.17 
```

我怎样才能解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-07T04:55:24.400

可能发生的事情是您使用一个版本的 python 安装了 cython，并试图用另一个版本运行它。而不是做标准

```
python setup.py build
sudo python setup.py install 
```

尝试切换到 root 并使用显式版本的 python 构建和安装：

```
sudo su
/usr/bin/python setup.py build
/usr/bin/python setup.py install 
```

（请注意，这一切都假定您是从源 tarball 安装的）。

# android - android mediaplayer强制错误进行测试

> ID：12439538
> 
> 赞同：0
> 
> 时间：2012-09-15T17:24:22.743
> 
> 标签：android, testing, media-player

我有一个非常简单的 MediaPlayer 实现，效果很好。出于测试目的，如何强制代码抛出错误？必须调用 OnErrorListener 来测试故障处理。TIA。

```
 try {
        player.setOnPreparedListener(new OnPreparedListener() {

            @Override
            public void onPrepared(MediaPlayer mp) {
                    mp.start();
            }
        });

        player.setOnErrorListener(new OnErrorListener() {

            @Override
            public boolean onError(MediaPlayer mp, int what, int extra) {
                /* handling code */

                /* *********************** */
                /* WANT THIS EVENT TO OCCUR BY FORCE */
                /* *********************** */

            }
        });
        player.prepareAsync();
    }
    catch(Exception e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:45:58.867

您可以通过将媒体播放器推入无效状态来尝试此操作..

对于媒体付款人的有效和无效状态，请查看此。

[http://developer.android.com/reference/android/media/MediaPlayer.html#Valid_and_Invalid_States](http://developer.android.com/reference/android/media/MediaPlayer.html#Valid_and_Invalid_States)

# joomla - 移动 Joomla + Virtuemart 安装

> ID：12439540
> 
> 赞同：0
> 
> 时间：2012-09-15T17:24:39.343
> 
> 标签：joomla, installation, virtuemart

我只是从服务器和 mysql 文件下载了我的 joomla+virtuemart 文件并设置了一个数据库，插入了导入的行并更新了 joomla 中的 config.php 文件。但是，即使在我打开我的 joomla 安装时更新了 configuration.php 之后，我的网站（在实际的 webhost 上打开）就像在 example.com 中一样，我希望它在 localhost/joomla 上工作（下载的文件和修改后的配置所在的位置）。我还删除了 .htaccess 文件以删除任何重定向。我还更新了美德市场管理员/组件/com_virtumart/virtuemark.cfg.php 文件的 URL 和安全 url 变量。

无论我做什么，它仍然会打开 example.com 站点而不是 localhost/joomla 应用程序目录

任何帮助深表感谢。在 joomla 1.5.1 上运行

我认为这可能与 DB 相关，所以我通过 phpmyadmin 将数据导出到 php 文件，并在 example.com 上运行了检查，甚至对 sql 文件也进行了检查。但它也没有出现

干杯 Dileep

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:00:55.593

迪利普，

有一个用于迁移 Joomla（及其扩展）的插件，我们在过去取得了巨大的成功。我已经移动了几十次网站，到目前为止，没有大问题

它被称为[Akeeba 备份](https://www.akeebabackup.com/products/akeeba-backup.html)。有免费和付费版本，（最后我检查过）1.5.x 仍然有旧版本。

结合名为 Kickstart 的软件包，您只需单击几下即可将整个站点从一台服务器备份和恢复到另一台服务器。该网站是akeebabackup dot com。

手动迁移，结果好坏参半。使用此软件，您将避免这些头痛。

# c# - Mole System.Random 类

> ID：12439544
> 
> 赞同：0
> 
> 时间：2012-09-15T17:25:03.897
> 
> 标签：c#, random, moles, pex

我有以下测试方法：

```
public float coverageJump(bool a)
{
    int c = 0;
first:
    c++;
    Random random = new Random();
    float result = random.Next(0, 100);
    Console.WriteLine(result);

    if(result < 50)
        goto first;
    if (result == 50)
        goto end;

    if (a)
        goto end;
    else
        goto first;

end:
    return c;
} 
```

Pex 建议我使用 Random.Next 摩尔及其创建：

**Pex方法：**

```
[PexMethod]
public float coverageJump([PexAssumeUnderTest]ClassMethod target, bool a)
{
    float result = target.coverageJump(a);
    return result;
    // TODO: add assertions to method ClassMethodTest.coverageJump(ClassMethod, Boolean)
} 
```

**参数化单元测试**

```
[TestMethod]
[PexGeneratedBy(typeof(ClassMethodTest))]
[PexRaisedException(typeof(NullReferenceException))]
[HostType("Moles")]
public void coverageJumpThrowsNullReferenceException489()
{
    float f;
    RandomPreparation.Prepare();
    ClassMethod s0 = new ClassMethod();
    f = this.coverageJump(s0, false);
} 
```

以及模拟随机类的准备方法：

```
[PexPreparationMethod(typeof(Random))]
public static void Prepare()
{
    MRandom.BehaveAsCurrent();
} 
```

我开发了准备方法来模拟 Random 类

```
MRandom.BehaveAsCurrent();
MRandom mr = new MRandom()
{
    NextInt32Int32 = (b, c) => { return 1; },
    Sample = () => { return 1; },
    InternalSample = () => { return 1; }
};

MRandom.Constructor = (a) => 
{
    // a.Next = (b, c) => { return 1; };
};

MRandom.Behavior = mr.InstanceBehavior; 
```

但我得到以下**NULL 异常**：

```
--- Description
failing test: NullReferenceException, Riferimento a un oggetto non impostato su un'istanza di oggetto.

float f;
RandomPreparation.Prepare();
ClassMethod s0 = new ClassMethod();
f = this.coverageJump(s0, false);

[TestMethod]
[PexGeneratedBy(typeof(ClassMethodTest))]
[PexRaisedException(typeof(NullReferenceException))]
[HostType("Moles")]
public void coverageJumpThrowsNullReferenceException387()
{
    float f;
    RandomPreparation.Prepare();
    ClassMethod s0 = new ClassMethod();
    f = this.coverageJump(s0, false);
} 
```

* * *

异常详情

```
System.NullReferenceException: Riferimento a un oggetto non impostato su un'istanza di oggetto.      at System.Int32 System.Random.InternalSample() 
      at System.Double System.Random.Sample() 
      at System.Int32 System.Random.Next(System.Int32 minValue, System.Int32 maxValue) 
    D:\Sviluppo\UNI\TesiTirocinio\src\TutorialsMolePex\BenchMarkTesterTool\BenchMarkTesterToolLib\ClassMethod.cs(154): at System.Single BenchMarkTesterToolLib.ClassMethod.coverageJump(System.Boolean a) 
    D:\Sviluppo\UNI\TesiTirocinio\src\TutorialsMolePex\BenchMarkTesterTool\BenchMarkTesterToolLib.Tests\ClassMethodTest.cs(27): at System.Single BenchMarkTesterToolLib.ClassMethodTest.coverageJump(BenchMarkTesterToolLib.ClassMethod target, System.Boolean a) 
```

有人能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T20:56:52.533

我在准备方法中找到了我的问题的解决方案：

**准备（）**：

```
 [PexPreparationMethod(typeof(Random))]
    public static void Prepare()
    {
        MRandom.Behavior = MoleBehaviors.Fallthrough;
        MRandom.AllInstances.NextInt32Int32 = (r, a, b) => { return 50; };
    } 
```

我认为使用另一种实现

```
 var fake = new SRandom { CallBase = true };
        var mole = new MRandom(fake)
        {
            NextInt32Int32 = (a, b) => { return 1;  }
        };
        MRandom.BehaveAsCurrent(); 
```

但不工作。有一段时间，我认为我无法模拟 Random 的 Next 方法，因为在 Mole Manual Reference 中报告 *了：.. Moles 框架创建了 moles 类型，它利用了运行时检测。它们在处理具有静态方法、密封类型或非**虚拟方法**的 API 时很有用。*

和 Random 的方法 Next 是：

```
 public virtual int Next(
            int minValue,
            int maxValue
        ) 
```

有人可以给我一个解释，因为我的“准备”方法有效吗？

非常感谢，最好的问候。

# postgresql - 如何从postgres上的日期获取间隔（以天为单位）

> ID：12439546
> 
> 赞同：2
> 
> 时间：2012-09-15T17:25:05.460
> 
> 标签：postgresql, date, intervals

我有两列，比如“2010-10-26”和“2010-08-23”，我想以天为单位获取间隔，考虑到有有 30、31、29、28 天的月份？是否有任何功能已经做到了这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T17:29:37.300

如果它们已经是日期格式，那很容易：

```
SELECT '10/26/2010'::date - '08/23/2010'::date; 
```

或者：

```
SELECT date '2001-10-01' - date '2001-09-28'; // outputs integer 3 
```

# android - 根据按钮的位置打印文本

> ID：12439556
> 
> 赞同：0
> 
> 时间：2012-09-15T17:26:48.783
> 
> 标签：android, button, printing, position

我的应用程序中有一个 SlidingDrawer 菜单，当抽屉打开时，我希望在按钮通过时显示抽屉上每个按钮的名称。

大家对这是否可能有任何想法吗？我已经搜索了大约一个小时，但找不到任何答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:48:37.583

假设我正确理解了您想要的内容（在主布局上的按钮顶部的抽屉中添加文本），您可以试试这个。我不知道它有多准确：

将滑动抽屉放置在布局中的最顶部元素，并具有透明背景。

使用与“主”布局（按钮所在的位置）完全相同的布局，并在按钮所在的位置使用 textView。

当您的滑动抽屉打开时，其内容中的文本将出现在按钮顶部

# c# - 需要演练选择文件对话框或打开文件对话框才能出现 Awesomium

> ID：12439562
> 
> 赞同：-3
> 
> 时间：2012-09-15T17:27:16.053
> 
> 标签：c#, wpf, awesomium

伙计们，我有工具箱中可用的 awesomium webcontrol，它不显示选择文件或任何用于上传文件的对话框（例如在 facebook 中上传图片/视频）。请给出如何启用它的完整过程。我正在使用视觉c#，它是一个 wpf 应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T12:06:30.537

需要更多信息。

*   你指的是 WinForms 还是 WPF `WebControl`？
*   你下载最新的RC了吗？[在这里](http://awesomium.com/download/)下载。

WinForms`WebControl`提供所有对话框。WPF`WebControl`也提供所有对话框，但是，文件夹选择对话框仅在 Windows Vista 和更新版本上受支持。如果没有出现对话框，您可能必须处理该[`SelectLocalFiles`](http://docs.awesomium.net/?tc=E_Awesomium_Core_IWebView_SelectLocalFiles)事件。确保事件被触发。如果是，但您仍然看不到任何对话框，请自行处理该事件并显示您自己的**模式**对话框。将结果提供给[`FileDialogEventArgs.SelectedFile`](http://docs.awesomium.net/?tc=P_Awesomium_Core_FileDialogEventArgs_SelectedFile)or[`FileDialogEventArgs.SelectedFiles`](http://docs.awesomium.net/?tc=P_Awesomium_Core_FileDialogEventArgs_SelectedFiles)并且不要忘记设置[`FileDialogEventArgs.Handled`](http://docs.awesomium.net/?tc=P_Awesomium_Core_FileDialogEventArgs_Handled)为`true`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-15T17:30:01.953

什么版本的 Awesomium？您可能需要具有模式对话框的 1.7RC2。

# mysql - MySQL自定义字母顺序

> ID：12439563
> 
> 赞同：3
> 
> 时间：2012-09-15T17:27:26.300
> 
> 标签：mysql

我想在我的 MySQL 查询中自定义字母排序顺序。马耳他语使用标准拉丁字母和以下字符：*ċ*、*ġ*、*ħ*和*ż*。我使用`utf8_bin`排序规则，因为*ċ*与*c*不同（等等）。结果是，当我使用 时`ORDER BY`，字母按以下顺序处理：

```
a b c d e f g h i j k l m n o p q r s t u v w x y z ċ ġ ħ ż 
```

但是我要求他们有这个订单：

```
a b ċ c d e f ġ g h ħ i j k l m n o p q r s t u v w x y ż z 
```

这意味着按升序，“ **abċ** ”应该在“ **abz** ”之前，但目前它在之后，因为它只是比较字符的二进制值。有什么方法可以在 MySQL 中实现这种自定义排序？

我见过像[这样](https://stackoverflow.com/questions/7024854/mysql-custom-order-by-and-alphabetical-order-by)使用的解决方案，`ORDER BY FIELD(name, 'a', 'b', 'ċ', ...)`但这似乎不适用于这种情况。

我还尝试向 order 函数添加排序规则，如下所示：`ORDER BY radicals COLLATE utf8_unicode_ci`，但这本质上将重音字符视为相同。所以，我会得到像“ **aċd** ”、“ **ace** ”、“ **aċf** ”这样的排序字符串，但这也是错误的（应该是“ **aċd** ”、“ **aċf** ”、“ **ace** ”）。

我的后备计划当然是在 PHP 中进行排序，但如果我可以将排序保留到 MySQL 本身会更整洁。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T17:56:25.797

在 MySQL 中，排序规则定义了如何为字符集处理排序和分组。如果您的排序规则已经由特定语言定义，那么您可能已经存在正确的排序规则。

这列出了当前的排序规则： http: [//dev.mysql.com/doc/refman/5.5/en/charset-charsets.html](http://dev.mysql.com/doc/refman/5.5/en/charset-charsets.html)

否则，您可以添加自己的自定义排序规则：[http ://dev.mysql.com/doc/refman/5.5/en/adding-collat​​ion.html](http://dev.mysql.com/doc/refman/5.5/en/adding-collation.html)

编辑：重新阅读我看到你已经尝试过各种排序规则的问题——所以你可能只需要添加自己的自定义排序规则。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T19:16:21.940

我接受了 Gavin Towey 的建议，并自己编写了这样的整理。如果将来有人偶然发现并感兴趣，这里有一个 GitHub 存储库：[Maltese MySQL Collat​​ion (utf8_maltese_ci)](https://github.com/johnjcamilleri/utf8_maltese_ci)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T17:34:07.897

您仍然可以使用`FIELD`，但它会测试字符串之间的相等性。由于在您的情况下，所有参数都是 1 个字符的字符串，因此您必须使用`ORDER BY FIELD(LEFT(name, 1), 'a', ...)`. 它只会对第一个字符进行排序......

# macos - 如何访问基于不同网络的 FTP 服务器

> ID：12439564
> 
> 赞同：0
> 
> 时间：2012-09-15T17:27:29.577
> 
> 标签：macos, networking, ftp

我已经在本地机器上设置了一个带有 Apache FTP 服务器的 FTP 服务器，这台机器可以访问互联网，但它的 IP 地址不能从外部访问。

我在另一个城市也有另一台机器 - 它可以访问互联网，但它的 IP 地址无法从外部访问。两台计算机不在同一网络上，因此无法相互ping通。

我如何使用另一台机器上的 FTP 客户端访问 FTP 服务器，我知道这应该是不可能的，但是你们有任何解决方法（无论代码更改或其他方法）

我在美国——你们知道如何让我的家庭 IP 可以公开访问吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:34:55.113

如果您控制服务器后面的防火墙，则很有可能。这是标准的网络配置，你可以在网上找到数百个教程，但最重要的信息是*防火墙*，而不是 ftp 服务器。您在防火墙上配置端口转发以将传入的 ftp 请求转发到您的内部 ftp 服务器。此外，您将希望从客户端使用“被动”ftp，因为客户端也在防火墙后面。

# c# - 使用 asp.net 发送自动生成的电子邮件

> ID：12439571
> 
> 赞同：0
> 
> 时间：2012-09-15T17:28:35.877
> 
> 标签：c#, asp.net, email

当用户在文本框中输入电子邮件地址后点击发送按钮时如何发送电子邮件（自动生成）？有什么网站可以参考吗？非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:28:08.267

你真的应该做更多的研究，因为你正在寻找的答案很容易找到。但是，这将为您指明正确的方向。

```
using System.Net.Mail;  
    MailMessage mm = new MailMessage("from@here.com", "to@there.com");
    mm.Subject = "some subject";
    mm.IsBodyHtml = true;
    mm.Body = "<span>your html goes here -- for plain text see IsBodyHtml property</span>";         
    SmtpClient client = new SmtpClient();
    client.Send(mm); 
```

# vb.net-2010 - 转到下一个可用号码的 SQL 语句

> ID：12439572
> 
> 赞同：0
> 
> 时间：2012-09-15T17:28:42.157
> 
> 标签：vb.net-2010

我有一个名为 DUI_Database 的数据库。里面是一个名为 DUI_Cite_Numbers 的表。其中有两列-dui_cite_no 和状态。我有一些代码从两个文本框中获取一系列数字并将它们放在表格中。此外，状态列是 FREE 或 ALLOCATED。ALLOCATED 号码已使用且不能重复使用。免费就是可用的号码。

如果您查看表格，它看起来像这样，假设我输入了从 D100100 到 D100105 的范围

```
 DB Name: DUI_Database
    Table Name: DUI_Cite_Numbers

    dui_cite_no   status
    D100100       FREE
    D100101       FREE
    D100102       FREE
    D100103       FREE
    D100104       FREE
    D100105       FREE 
```

然后一旦这些数字被使用，它看起来像这样-

```
 dui_cite_no   status
    D100100       ALLOCATED
    D100101       ALLOCATED
    D100102       ALLOCATED
    D100103       FREE
    D100104       FREE
    D100105       FREE 
```

我需要有关 SELECT 语句的帮助。当表单打开时，我需要在该表单的文本框中使用下一个 FREE dui_cite_no。我不确定如何做到这一点。

我以为这行得通-

```
 "SELECT TOP(1) dui_cite_no FROM DUI_Cite_Numbers WHERE status = 'FREE'" 
```

它不工作-看起来对吗？

因为一旦使用它，它就会在列中将其标记为 ALLOCATED -

```
 "UPDATE DUI_Cite_Numbers SET status = 'ALLOCATED' WHERE dui_cite_no = @nextcit" 
```

我很困惑，可能是因为我已经开始这样做太久了。

这是整个代码块：

```
Public Function Get_Next_DUI_Cit_Number() As String
    ''Get the next available citation number from the database. If there is no free
    ''citation number then return a null string
    Dim nextcit As String = String.Empty
    Using DataConnection As New System.Data.SqlServerCe.SqlCeConnection("Data Source=C:\Program Files\DailyLog DUI\DUI_Database.sdf")
        DataConnection.Open()
        Dim SelectCommand As New System.Data.SqlServerCe.SqlCeCommand("SELECT TOP(1) dui_cite_no FROM DUI_Cite_Numbers WHERE status = 'FREE'", DataConnection)
        Dim DataReader As System.Data.SqlServerCe.SqlCeDataReader = SelectCommand.ExecuteReader()
        If DataReader.Read() Then
            nextcit = DataReader("dui_cite_no").ToString
            Using DataConnection2 As New System.Data.SqlServerCe.SqlCeConnection("Data Source=C:\Program Files\DailyLog DUI\DUI_Database.sdf")
                DataConnection2.Open()
                Dim UpdateCommand As New System.Data.SqlServerCe.SqlCeCommand("UPDATE DUI_Cite_Numbers SET status = 'ALLOCATED' WHERE dui_cite_no = @nextcit", DataConnection2)
                UpdateCommand.Parameters.AddWithValue("@nextcit", nextcit)
                UpdateCommand.ExecuteNonQuery()
                UpdateCommand.Dispose()
                DataConnection2.Close()
            End Using
        End If
        SelectCommand.Dispose()
        DataConnection.Close()
    End Using
End Function 
```

然后当相应的表单打开时，代码如下：

Public Sub frmDUI_Citation_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) 处理 MyBase.Load

```
 Me.txt_dui_cite_no.Text = module1.Get_Next_DUI_Cit_Number() 'get the next available citation number and put it in the textbox 
```

结束子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T18:32:08.840

如果要确保它们按顺序发出，则需要添加`ORDER BY`：

```
SELECT TOP(1) 
  dui_cite_no 
FROM 
  DUI_Cite_Numbers 
WHERE 
  status = 'FREE'
ORDER BY 
  dui_cite_Number 
```

# java - sqlite + listview + onListItemClick如何启动新的Activity？光标读取错误

> ID：12439574
> 
> 赞同：0
> 
> 时间：2012-09-15T17:28:47.830
> 
> 标签：java, android, sqlite, listview, cursor

在本[教程](http://www.zoomified.com/articles/android/android-list-of-tutorials.php)的帮助下，我制作了一个包含 3 个活动的应用程序。在第一个活动（导入）中，我只是将一些值导入到 sqlite 数据库。

这是我的 DatabaseHelper 类：

```
 public class DatabaseHelper_bp extends SQLiteOpenHelper {

    private static final String DATABASE_NAME = "bpDB";
    private static final int DATABASE_VERSION = 1;

    // Database creation sql statement
    private static final String DATABASE_CREATE = "create table bp_import ( _id integer primary key, datetime text not null, systolic text not null, diastolic text not null, pulses text not null, notes text not null);";

    public DatabaseHelper_bp(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    // Method is called during creation of the database
    @Override
    public void onCreate(SQLiteDatabase database) {
        database.execSQL(DATABASE_CREATE);
    }

    // Method is called during an upgrade of the database,
    @Override
    public void onUpgrade(SQLiteDatabase database, int oldVersion,
            int newVersion) {
        Log.w(DatabaseHelper_bp.class.getName(),
                "Upgrading database from version " + oldVersion + " to "
                        + newVersion + ", which will destroy all old data");
        database.execSQL("DROP TABLE IF EXISTS bp_import");
        onCreate(database);
    }
} 
```

我的 DAO 类用于我的度量/值：

```
 public class BpDAO {

    private DatabaseHelper_bp dbHelper;

    private SQLiteDatabase database;
    /**
     * Movie table related constants.
     */
    public final static String bp_TABLE = "bp_import";
    public final static String bp_ID = "_id";
    public final static String bp_DT = "datetime";
    public final static String bp_SYS = "systolic";
    public final static String bp_DIA = "diastolic";
    public final static String bp_PUL = "pulses";
    public final static String bp_NOT = "notes";

    /**
     * 
     * @param context
     */
    public BpDAO(Context context) {
        dbHelper = new DatabaseHelper_bp(context);
        database = dbHelper.getWritableDatabase();
    }

    /**
     * \ Creates a new blood pressure measure
     * 
     * @param datetime
     * @param systolic
     * @param diastolic
     * @param pulses
     * @param notes
     * @return
     */
    public long importBP(String datetime, String systolic, String diastolic,
            String pulses, String notes) {
        ContentValues values = new ContentValues();
        values.put(bp_DT, datetime);
        values.put(bp_SYS, systolic);
        values.put(bp_DIA, diastolic);
        values.put(bp_PUL, pulses);
        values.put(bp_NOT, notes);
        return database.insert(bp_TABLE, null, values);
    }

    /**
     * Fetch all movies
     * 
     * @return
     */
    public Cursor fetchAll_bp() {
        Cursor mCursor = database.query(true, bp_TABLE, new String[] { bp_SYS,
                bp_DIA, bp_DT, bp_ID }, null, null, null, null, null, null);
        if (mCursor != null) {
            mCursor.moveToFirst();
        }
        return mCursor;
    }
} 
```

在第二个活动（历史）中，我有一个列表活动，其中包含数据库每一行的一些值。在这里一切正常。列表由数据库填充，一切正常![在此处输入图像描述](../Images/0966903bc9e555a1b0b5193f2251c003.png)

但我的**问题**是，当我尝试**onListItemClick**启动一个新的 3 Activity（详细信息）并将所选度量（ListItem）的所有值传递给它时，**应用程序强制关闭**！

这是 2 Activity(history) 的代码：

```
public class HistoryActivity extends ListActivity {

private BpDAO dao;

private SimpleCursorAdapter dbAdapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    dao = new BpDAO(this);
    Cursor bpList = dao.fetchAll_bp();
    String[] from = new String[] { BpDAO.bp_SYS, BpDAO.bp_DIA, BpDAO.bp_DT };
    int[] target = new int[] { R.id.bpSysHolder, R.id.bpDiaHolder,
            R.id.bpDtHolder };
    dbAdapter = new SimpleCursorAdapter(this, R.layout.history_bp, bpList,
            from, target);
    setListAdapter(dbAdapter);
}
    //above is all good!
// try to make new activity on click - let's
// see...down here is the problem!
@Override
public void onListItemClick(ListView l, View view, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, view, position, id);
    Log.d("BPT", "Selected bp id =" + id);
            // log says that i have selected an item with id : 11 

    Cursor selectedBpDetails = (Cursor) l.getItemAtPosition(position);

    String bp_DT = selectedBpDetails.getString(selectedBpDetails
            .getColumnIndex(BpDAO.bp_DT));
    String bp_SYS = selectedBpDetails.getString(selectedBpDetails
            .getColumnIndex(BpDAO.bp_SYS));
    String bp_DIA = selectedBpDetails.getString(selectedBpDetails
            .getColumnIndex(BpDAO.bp_DIA));
    String bp_PUL = selectedBpDetails.getString(selectedBpDetails
            .getColumnIndex(BpDAO.bp_PUL));
    String bp_NOT = selectedBpDetails.getString(selectedBpDetails
            .getColumnIndex(BpDAO.bp_NOT));

    Log.d("BPT", "Selected bp details = { date=" + bp_DT + ", systolic="
            + bp_SYS + ", diastolic=" + bp_DIA + ", pulses=" + bp_PUL
            + ", notes=" + bp_NOT + " }");

    Intent intent = new Intent(HistoryActivity.this, FromHistory.class);
    intent.putExtra("bp_SYS", bp_SYS);
    intent.putExtra("bp_DIA", bp_DIA);
    intent.putExtra("bp_DT", bp_DT);
    intent.putExtra("bp_PUL", bp_PUL);
    intent.putExtra("bp_NOT", bp_NOT);
    startActivity(intent);
}
// ---------------------------------------------------------------------------- 
```

}

这是日志：

```
16:50:48.513: D/BPT(562): Selected bp id =11
16:50:48.513: **E/CursorWindow(562): Failed to read row 1, column -1 from a CursorWindow which has 13 rows, 4 columns.** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T17:46:25.323

尝试这个

```
Cursor selectedBpDetails = (Cursor) l.getItemAtPosition(position);
if (selectedBpDetails.getCursor() > 0) {
    selectedBpDetails.moveToFirst();

    String bp_DT = selectedBpDetails.getString(selectedBpDetails
            .getColumnIndex(BpDAO.bp_DT));
    String bp_SYS = selectedBpDetails.getString(selectedBpDetails
            .getColumnIndex(BpDAO.bp_SYS));
    String bp_DIA = selectedBpDetails.getString(selectedBpDetails
            .getColumnIndex(BpDAO.bp_DIA));
    String bp_PUL = selectedBpDetails.getString(selectedBpDetails
            .getColumnIndex(BpDAO.bp_PUL));
    String bp_NOT = selectedBpDetails.getString(selectedBpDetails
            .getColumnIndex(BpDAO.bp_NOT));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T18:57:42.050

数据库表中的函数 fetchAll_bp 不包含任何注释条目，这可能是收到错误的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T17:42:49.763

在 BpDAO 类中的数据库查询方法 fetchAll_bp() 中，您似乎忘记在查询中包含注释 (bp_NOT)。所以怀疑它失败了，因为你的 onClickListener 在游标中寻找 bp_NOT，它不包含。

# ruby - 如何将十六进制转换为 utf-8

> ID：12439584
> 
> 赞同：1
> 
> 时间：2012-09-15T17:30:23.867
> 
> 标签：ruby, utf-8, translate

我想将十六进制字符串转换为 utf-8，例如，`"\\XB6\\XAB..."`转换为`"中国"`. 我使用`"\x68\x65\x6c\x6c\x6f".unpack("Z*")`→`"hello"`但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T17:40:52.220

如果您使用的是 Ruby 1.9，请使用`String#force_encoding`：

```
"\xe4\xb8\xad\xe5\x9b\xbd".force_encoding("UTF-8") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-21T19:31:22.530

确保你使用双引号来定义你的字符串，否则你不会得到你期望的结果。

使用双引号的示例：

```
"\xe4\xb8\xad\xe5\x9b\xbd".force_encoding("UTF-8")  =>  "中国" 
```

使用单引号的示例：

```
'\xe4\xb8\xad\xe5\x9b\xbd'.force_encoding("UTF-8") => "\\xe4\\xb8\\xad\\xe5\\x9b\\xbd" 
```

# jquery - 使用 jquery 清除 div 内容但保留纯文本

> ID：12439585
> 
> 赞同：0
> 
> 时间：2012-09-15T17:30:29.250
> 
> 标签：jquery, html, dom

我在表单上有 div：

```
<div id="foo">
<div>koko</div>
<div>lala</div>
Plain text here
<div>Another div</div>
</div> 
```

我想使用 jquery 来保留“纯文本”，但不在其他 div 中显示任何其他内部元素。

我尝试使用`.not`这样的：

```
alert($("#foo).not("div").text()); 
```

但它不显示任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T17:37:03.773

您需要做的就是：

```
$('#foo *').remove();​​​​​​​​​ 
```

选择器选择 #foo 中的任何元素，并且只会保留您要查找的文本。

[演示](http://jsfiddle.net/CcH5P/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T17:37:03.337

如果您只想删除包装的文本，也许这会起作用：

```
$("#foo *").remove();

```

我误解了你的问题吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-15T17:37:05.093

试试这个：

```
var text = $('#foo').clone().find('*').remove().end().text() 
```

[http://jsfiddle.net/LtMHE/](http://jsfiddle.net/LtMHE/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-15T17:49:42.447

试试这个：

```
alert($("div#foo").clone().children().remove().end().text()); 
```

希望这会有所帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-15T18:42:30.300

另一种获取纯文本的方法是使用这些 jQuery 方法 -> contents() 和 filter()。

内容[^([来源：文档])](http://api.jquery.com/contents/)：

> 描述：获取匹配元素集中每个元素的子元素，**包括文本**和注释**节点**。

所以我们可以同时得到 DIV 和 #text 节点。

过滤器[^([来源：文档])](http://api.jquery.com/filter/)：

> 将匹配元素集减少为匹配选择器或 **通过函数测试的**元素集。

在函数测试中，我们将只保留我们想要的文本节点（nodeType == 3，即文本）。所以，最后，我们有：

```
$("#foo").contents().filter(function(){ return this.nodeType == 3}).text().trim(); 
```

（ trim() 在这里不选择样本中的所有换行符，因为它们也是文本）

**[演示 js 小提琴](http://jsfiddle.net/B8KV5/)**

# python - 我需要一种在词法上拆分字符串的方法

> ID：12439587
> 
> 赞同：0
> 
> 时间：2012-09-15T17:30:46.150
> 
> 标签：python, lexical-analysis

例如，如果给我这个字符串

```
"asdf bob(1, 2, "a")" 
```

我希望它被拆分为

```
["asdf", "bob", [1, 2, "a"]] 
```

我尝试过使用 SHLEX，但它似乎太简单了。它不会将括号拆分为不同的数组，也不会正确拆分逗号。

现在，我知道我可以用一些 for 循环和一些技巧来做到这一点，但我想为此节省空间、时间和速度。我会很感激一些帮助，谢谢！

PS它应该能够拆分多行，所以如果我有功能，例如。

```
"   desu(1, 2){    \n
        asdf       \n
    }               " 
```

应该拆分为

```
["desu", [1, 2], ["asdf"]] 
```

也将花括号拆分为不同的列表。

这样可以节省很多时间！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T17:38:24.763

你看过[pyparsing](http://pyparsing.wikispaces.com/ "解析")吗？这是一个通用的 python 解析模块，可以帮助你。Pyparsing 可用于递归下降解析，例如编程语言。对于不遵循已实现示例之一的语言，pyparsing 模块的学习曲线相当陡峭。但是，对于您的语言，我认为您可能可以重用他们网站上的示例之一。

# python - 如何使用 Python 最大化 plt.show() 窗口

> ID：12439588
> 
> 赞同：120
> 
> 时间：2012-09-15T17:31:02.123
> 
> 标签：python, matplotlib

出于好奇，我想知道如何在下面的代码中执行此操作。我一直在寻找答案，但没有用。

```
import numpy as np
import matplotlib.pyplot as plt
data=np.random.exponential(scale=180, size=10000)
print ('el valor medio de la distribucion exponencial es: ')
print np.average(data)
plt.hist(data,bins=len(data)**0.5,normed=True, cumulative=True, facecolor='red', label='datos tamano paqutes acumulativa', alpha=0.5)
plt.legend()
plt.xlabel('algo')
plt.ylabel('algo')
plt.grid()
plt.show() 
```

* * *

## 回答 #1

> 赞同：187
> 
> 时间：2014-03-15T01:12:12.970

我在 Windows (WIN7) 上，运行 Python 2.7.5 和 Matplotlib 1.3.1。

我能够使用以下行最大化 TkAgg、QT4Agg 和 wxAgg 的图形窗口：

```
from matplotlib import pyplot as plt

### for 'TkAgg' backend
plt.figure(1)
plt.switch_backend('TkAgg') #TkAgg (instead Qt4Agg)
print '#1 Backend:',plt.get_backend()
plt.plot([1,2,6,4])
mng = plt.get_current_fig_manager()
### works on Ubuntu??? >> did NOT working on windows
# mng.resize(*mng.window.maxsize())
mng.window.state('zoomed') #works fine on Windows!
plt.show() #close the figure to run the next section

### for 'wxAgg' backend
plt.figure(2)
plt.switch_backend('wxAgg')
print '#2 Backend:',plt.get_backend()
plt.plot([1,2,6,4])
mng = plt.get_current_fig_manager()
mng.frame.Maximize(True)
plt.show() #close the figure to run the next section

### for 'Qt4Agg' backend
plt.figure(3)
plt.switch_backend('QT4Agg') #default on my system
print '#3 Backend:',plt.get_backend()
plt.plot([1,2,6,4])
figManager = plt.get_current_fig_manager()
figManager.window.showMaximized()
plt.show() 
```

如果你想最大化多个数字，你可以使用

```
for fig in figs:
    mng = fig.canvas.manager
    # ... 
```

希望结合在一个工作示例（至少对于 Windows）中的先前答案（和一些补充）的总结有所帮助。干杯

* * *

## 回答 #2

> 赞同：95
> 
> 时间：2013-09-16T09:39:03.683

使用 Qt 后端（FigureManagerQT），正确的命令是：

```
figManager = plt.get_current_fig_manager()
figManager.window.showMaximized() 
```

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2013-01-26T13:10:43.760

在带有 TkAgg 后端的 Ubuntu 12.04 下，这使窗口占据了我的全屏：

```
 mng = plt.get_current_fig_manager()
    mng.resize(*mng.window.maxsize()) 
```

* * *

## 回答 #4

> 赞同：46
> 
> 时间：2014-05-20T08:59:14.470

对我来说，以上没有任何效果。我在包含 matplotlib 1.3.1 的 Ubuntu 14.04 上使用 Tk 后端。

以下代码创建了一个全屏绘图窗口，它与最大化不同，但它很好地满足了我的目的：

```
from matplotlib import pyplot as plt
mng = plt.get_current_fig_manager()
mng.full_screen_toggle()
plt.show() 
```

* * *

## 回答 #5

> 赞同：45
> 
> 时间：2013-11-06T22:08:00.787

这应该有效（*至少*与 TkAgg 一起使用）：

```
wm = plt.get_current_fig_manager()
wm.window.state('zoomed') 
```

（从上面采用和[使用 Tkinter，有没有办法在不明显缩放窗口的情况下获得可用的屏幕尺寸？](https://stackoverflow.com/questions/13129985/using-tkinter-is-there-a-way-to-get-the-usable-screen-size-without-visibly-zoom)）

* * *

## 回答 #6

> 赞同：44
> 
> 时间：2012-09-26T09:53:02.323

我通常使用

```
mng = plt.get_current_fig_manager()
mng.frame.Maximize(True) 
```

在调用 之前`plt.show()`，我得到了一个最大化的窗口。这仅适用于“wx”后端。

编辑：

对于 Qt4Agg 后端，请参阅 kwerenda 的[回答](https://stackoverflow.com/a/18824814/4433386)。

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2019-02-15T11:46:34.957

到目前为止我最大的努力，支持不同的后端：

```
from platform import system
def plt_maximize():
    # See discussion: https://stackoverflow.com/questions/12439588/how-to-maximize-a-plt-show-window-using-python
    backend = plt.get_backend()
    cfm = plt.get_current_fig_manager()
    if backend == "wxAgg":
        cfm.frame.Maximize(True)
    elif backend == "TkAgg":
        if system() == "Windows":
            cfm.window.state("zoomed")  # This is windows only
        else:
            cfm.resize(*cfm.window.maxsize())
    elif backend == "QT4Agg":
        cfm.window.showMaximized()
    elif callable(getattr(cfm, "full_screen_toggle", None)):
        if not getattr(cfm, "flag_is_max", None):
            cfm.full_screen_toggle()
            cfm.flag_is_max = True
    else:
        raise RuntimeError("plt_maximize() is not implemented for current backend:", backend) 
```

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2013-12-17T00:06:14.257

我也明白`mng.frame.Maximize(True) AttributeError: FigureManagerTkAgg instance has no attribute 'frame'`。

然后我查看了属性`mng`，我发现了这个：

```
mng.window.showMaximized() 
```

这对我有用。

所以有同样困扰的朋友可以试试这个。

顺便说一句，我的 Matplotlib 版本是 1.3.1。

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2016-12-02T10:37:42.663

这是一种 hacky 并且可能不便携，仅当您正在寻找快速和肮脏时才使用它。如果我只是将图形设置为比屏幕大得多，它会完全占据整个屏幕。

```
fig = figure(figsize=(80, 60)) 
```

事实上，在带有 Qt4Agg 的 Ubuntu 16.04 中，如果窗口大于屏幕，它会最大化窗口（不是全屏）。（如果您有两台显示器，它只会在其中一台上最大化它）。

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2019-03-09T19:25:19.503

我在 Ubuntu 上找到了全屏模式

```
#Show full screen
mng = plt.get_current_fig_manager()
mng.full_screen_toggle() 
```

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2018-11-23T15:21:11.833

在 Win 10 上完美运行的一种解决方案。

```
import matplotlib.pyplot as plt

plt.plot(x_data, y_data)

mng = plt.get_current_fig_manager()
mng.window.state("zoomed")
plt.show() 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2020-03-31T12:57:48.233

```
import matplotlib.pyplot as plt
def maximize():
    plot_backend = plt.get_backend()
    mng = plt.get_current_fig_manager()
    if plot_backend == 'TkAgg':
        mng.resize(*mng.window.maxsize())
    elif plot_backend == 'wxAgg':
        mng.frame.Maximize(True)
    elif plot_backend == 'Qt4Agg':
        mng.window.showMaximized() 
```

然后调用`maximize()`之前的函数`plt.show()`

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2012-09-16T07:14:47.277

当专注于绘图时按`f`键（或`ctrl+f`在 1.2rc1 中）将全屏显示绘图窗口。不是最大化，但也许更好。

除此之外，要真正最大化，您将需要使用 GUI Toolkit 特定的命令（如果它们存在于您的特定后端）。

高温高压

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2019-09-26T00:44:41.883

这是一个基于@Pythonio 答案的函数。我将它封装成一个函数，该函数会自动检测它正在使用哪个后端并执行相应的操作。

```
def plt_set_fullscreen():
    backend = str(plt.get_backend())
    mgr = plt.get_current_fig_manager()
    if backend == 'TkAgg':
        if os.name == 'nt':
            mgr.window.state('zoomed')
        else:
            mgr.resize(*mgr.window.maxsize())
    elif backend == 'wxAgg':
        mgr.frame.Maximize(True)
    elif backend == 'Qt4Agg':
        mgr.window.showMaximized() 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2012-09-16T15:43:56.770

尝试使用带有额外关键字参数的“Figure.set_size_inches”方法`forward=True`。根据[文档](http://matplotlib.org/api/figure_api.html#matplotlib.figure.Figure.set_size_inches)，这*应该*调整图形窗口的大小。

这是否*真的*发生取决于您使用的操作系统。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2018-04-18T06:35:48.030

在我的版本（Python 3.6、Eclipse、Windows 7）中，上面给出的片段不起作用，但在 Eclipse/pydev 给出的提示（在输入：mng.）之后，我发现：

```
mng.full_screen_toggle() 
```

似乎使用 mng-commands 仅适用于本地开发...

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2020-09-11T19:00:32.120

对于后端**GTK3Agg**，使用`maximize()`-- 特别是小写*m*：

```
manager = plt.get_current_fig_manager()
manager.window.maximize() 
```

在 Ubuntu 20.04 中使用 Python 3.8 进行了测试。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2012-09-15T17:37:18.423

尝试`plt.figure(figsize=(6*3.13,4*3.13))`使情节更大。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2016-11-05T10:42:55.137

好的，这对我有用。我做了整个 showMaximize() 选项，它确实根据图形大小调整窗口大小，但它不会扩展和“适合”画布。我通过以下方式解决了这个问题：

```
mng = plt.get_current_fig_manager()                                         
mng.window.showMaximized()
plt.tight_layout()    
plt.savefig('Images/SAVES_PIC_AS_PDF.pdf') 

plt.show() 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2020-09-23T22:00:23.107

对于基于 Tk 的后端 (TkAgg)，这两个选项最大化和全屏显示窗口：

```
plt.get_current_fig_manager().window.state('zoomed')
plt.get_current_fig_manager().window.attributes('-fullscreen', True) 
```

绘制到多个窗口时，您需要为每个窗口编写以下内容：

```
data = rasterio.open(filepath)

blue, green, red, nir = data.read()
plt.figure(1)
plt.subplot(121); plt.imshow(blue);
plt.subplot(122); plt.imshow(red);
plt.get_current_fig_manager().window.state('zoomed')

rgb = np.dstack((red, green, blue))
nrg = np.dstack((nir, red, green))
plt.figure(2)
plt.subplot(121); plt.imshow(rgb);
plt.subplot(122); plt.imshow(nrg);
plt.get_current_fig_manager().window.state('zoomed')

plt.show() 
```

在这里，两个“数字”都绘制在单独的窗口中。使用变量，例如

```
figure_manager = plt.get_current_fig_manager() 
```

可能不会最大化第二个窗口，因为变量仍然引用第一个窗口。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2014-05-28T05:43:20.737

这不一定会最大化您的窗口，但它会根据图形大小调整窗口大小：

```
from matplotlib import pyplot as plt
F = gcf()
Size = F.get_size_inches()
F.set_size_inches(Size[0]*2, Size[1]*2, forward=True)#Set forward to True to resize window along with plot in figure.
plt.show() #or plt.imshow(z_array) if using an animation, where z_array is a matrix or numpy array 
```

这也可能有帮助： http: [//matplotlib.1069221.n5.nabble.com/Resizing-figure-windows-td11424.html](http://matplotlib.1069221.n5.nabble.com/Resizing-figure-windows-td11424.html)

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2016-02-10T08:46:50.180

以下可能适用于所有后端，但我仅在 QT 上进行了测试：

```
import numpy as np
import matplotlib.pyplot as plt
import time

plt.switch_backend('QT4Agg') #default on my system
print('Backend: {}'.format(plt.get_backend()))

fig = plt.figure()
ax = fig.add_axes([0,0, 1,1])
ax.axis([0,10, 0,10])
ax.plot(5, 5, 'ro')

mng = plt._pylab_helpers.Gcf.figs.get(fig.number, None)

mng.window.showMaximized() #maximize the figure
time.sleep(3)
mng.window.showMinimized() #minimize the figure
time.sleep(3)
mng.window.showNormal() #normal figure
time.sleep(3)
mng.window.hide() #hide the figure
time.sleep(3)
fig.show() #show the previously hidden figure

ax.plot(6,6, 'bo') #just to check that everything is ok
plt.show() 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2022-02-28T20:36:43.130

在尝试实现相同目标时，我从正在查看的线程中收集了一些答案。这是我现在正在使用的函数，它最大化所有图并且并不真正关心正在使用的后端。我在脚本末尾运行它。它仍然会遇到使用多屏设置的其他人提到的问题，因为 fm.window.maxsize() 将获得总屏幕尺寸，而不仅仅是当前显示器的尺寸。如果你知道你想要的屏幕尺寸，你可以用元组 (width_inches, height_inches) 替换 *fm.window.maxsize()。

从功能上讲，这一切都是抓取一个数字列表，并将它们的大小调整为 matplotlibs 当前对当前最大窗口大小的解释。

```
def maximizeAllFigures():
    '''
    Maximizes all matplotlib plots.
    '''
    for i in plt.get_fignums():
        plt.figure(i)
        fm = plt.get_current_fig_manager()
        fm.resize(*fm.window.maxsize()) 
```

# javascript - 内容完成后无限滚动不会停止

> ID：12439590
> 
> 赞同：0
> 
> 时间：2012-09-15T17:31:43.993
> 
> 标签：javascript, jquery, ruby-on-rails-3.2, infinite-scroll

您好我遇到了无限滚动功能的问题，当所有内容都显示出来时，它仍然继续滚动（奇怪的行为）。我正在寻找一种在显示所有内容时停止无限滚动的方法

这是我的代码

```
<script type="text/javascript">
jQuery(document).ready(function ($) {
(function () {
   var page = 1,
   loading = false,
   finish = false;

function nearBottomOfPage() {
return $(window).scrollTop() > $(document).height() - $(window).height() - 200;
 }

 function finish() {
  finish = true;

}
 $(window).scroll(function () {
  if (loading) {
   return;
 }
if (nearBottomOfPage() && !finish) {
  loading = true;
  $('#loader').show();
  page++;
  $.ajax({
    url: '/office?page=' + page,
    type: 'get',
    dataType: 'script',
    success: function () {
      $('#loader').hide();
      loading = false;
    }
  });
  }
});
}()); 
```

这几天我一直在忙着工作....请heeeeeeeeeeellllllllpppppp :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T17:49:34.677

您可以尝试将其与窗口对象解除绑定。假设您到达的最后一页然后使用此功能

```
$(window).unbind('scroll'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-31T23:00:53.017

**大家好，** 我刚遇到同样的问题！经过数小时的在线搜索并尝试了许多解决方案，我想出了这个解决方案。

**在`infinite-scroll.js`文件中搜索该变量：**

`t.children()`

**然后将其值从 (1==1) 更改为 (0==1)，如下所示：**

`case"append":var l=t.children();if(1==l.length)return this._error("end");`

**到：**

`case"append":var l=t.children();if(0==l.length)return this._error("end");`

现在，当您到达帖子末尾时，应该会出现**FinishedMsg 。**

希望这可以帮助。

# sql - 如何使用索引优化 sql 查询

> ID：12439591
> 
> 赞同：0
> 
> 时间：2012-09-15T17:31:54.997
> 
> 标签：sql, sqlite

我有这个复杂的查询，我需要优化它。没有索引需要 20 毫秒，我尝试添加一些索引，它更好，现在我有 4 毫秒。但我没有任何经验。你能帮我让它更快吗？

```
 SELECT COUNT(*) FROM(
   SELECT user_id FROM times 
      INNER JOIN tags ON times.user_id = tags.tag_id 
      INNER JOIN users ON tags.user_nr = users.nr  
      WHERE (times.time < 1597313) 
        AND (times.run_id="118") 
        AND (times.user_id != 109330258) 
        AND (times.user_id != 0) 
        AND (times.time != 0 ) 
        AND (times.cell != 1 ) 
        AND (users.category_id="4") 
        GROUP BY user_id HAVING count(*) == 1 
   UNION  
   SELECT user_id FROM times 
   INNER JOIN tags ON times.user_id = tags.tag_id 
   INNER JOIN users ON tags.user_nr = users.nr  
   WHERE (times.run_id="118") 
     AND (times.user_id != 109330258) 
     AND (times.user_id != 0 ) 
     AND (times.time != 0 ) AND (times.cell != 1 ) 
     AND (users.category_id="4") 
     GROUP BY user_id HAVING count(*) > 1
   ) 
```

我添加了 3 个索引。

*   表格标签 - tagid
*   餐桌时间 - user_id
*   表用户 - nr

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:42:29.023

您还应该尝试索引 tags.user_nr，但如果不查看查询计划，就不可能给出明确的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T17:42:53.970

[如果您在数据库管理员站点上的 Stack Exchange](https://dba.stackexchange.com/questions/16172/trying-to-optimize-query-for-performance-mysql)中谈论 MySQL ，您会遇到类似的问题，但并不完全相同，但 OP 正在尝试优化像您这样的大查询的性能。注意第二个答案，它提供了关于热调整查询的有用提示。

# ruby-on-rails - 博客 Gem/Rails 引擎/Mongoid

> ID：12439592
> 
> 赞同：2
> 
> 时间：2012-09-15T17:32:21.607
> 
> 标签：ruby-on-rails, gem, mongoid, blogs, rails-engines

有哪些 Rails 博客 gem/引擎可以与 MongoDB/Mongoid 一起使用？

我已经为 MySQL/ActiveRecord 应用程序使用了 Typo 和 RefineryCMS-Blog，但它们不能与 Mongoid 一起使用（坦率地说，它们比我需要的更重量级）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T20:10:02.050

你肯定想检查机车

[http://locomotivecms.com/](http://locomotivecms.com/)

[https://github.com/locomotivecms/engine](https://github.com/locomotivecms/engine)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-20T13:28:04.387

我之前使用了炼油厂，所以这次没有使用，因为它对我的应用程序来说太复杂而且太大了。我正要为 blogit gem 创建 mongoid 分支，但发现 bloggy。我不知道您是否需要经过身份验证的用户访问您的博客，但无论如何您都不应该，所以
我使用[bloggy](https://github.com/zbruhnke/bloggy) gem 来集成无数据库的 jerkyll 博客。

Jekyll 是目前最流行的博客系统，bloggy gem 的好处在于您不必进行配置，它只需将您的博客放入“/blog”路径。另一个优点是[http://jekyllthemes.org](http://jekyllthemes.org)有许多主题可供您选择。

请注意 - 对我来说 - 它有时会卡住，但我发现它确实会创建必要的文件，即使它卡住了。确保在创建帖子后从降价中删除“已发布：false”，然后再生成它。

# javascript - 如何在它们上制作 Javascript 动态 html 表和事件

> ID：12439593
> 
> 赞同：0
> 
> 时间：2012-09-15T17:32:27.753
> 
> 标签：javascript, dom, html-table

我知道如何使用 DOM 动态创建表和行，但无法找出输入类型文本中的 onkeyup 或 onblur 事件，请在下面找到我的完整代码，此外，可能会在 keyup 上调用另一个单独的函数在 DOM 中？如果是这样，那怎么办？

```
<HTML>
<HEAD>
    <TITLE> Add/Remove dynamic rows in HTML table </TITLE>
    <SCRIPT language="javascript">
        function addRow(tableID) {

            var table = document.getElementById(tableID);

            var rowCount = table.rows.length;
            var row = table.insertRow(rowCount);

            var cell1 = row.insertCell(0);
            var element1 = document.createElement("input");
            element1.type = "checkbox";
            cell1.appendChild(element1);

            var cell2 = row.insertCell(1);
            cell2.innerHTML = rowCount + 1;

            var cell3 = row.insertCell(2);
            var element2 = document.createElement("input");
            element2.type = "text";
            cell3.appendChild(element2);
            cell3.keyup="alert(asdf)";

        }

        function deleteRow(tableID) {           
            var table = document.getElementById(tableID);
            var rowCount = table.rows.length;

            for(var i=0; i<rowCount; i++) {
                var row = table.rows[i];
                var chkbox = row.cells[0].childNodes[0];
                if(null != chkbox && true == chkbox.checked) {
                    table.deleteRow(i);
                    rowCount--;
                    i--;
                }

            }

        }

    </SCRIPT>
</HEAD>
<BODY>

    <INPUT type="button" value="Add Row" onclick="addRow('dataTable')" />

    <INPUT type="button" value="Delete Row" onclick="deleteRow('dataTable')" />

    <TABLE id="dataTable" width="350px" border="1">
        <TR>
            <TD><INPUT type="checkbox" name="chk"/></TD>
            <TD> 1 </TD>
            <TD> <INPUT type="text" /> </TD>
        </TR>
    </TABLE>

</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T18:01:38.013

```
cell3.keyup="alert(asdf)"; 
```

-->

```
element2.onkeyup=function(){alert('asdf');}; 
```

# mysql - 当中间有另一个您没有使用的表时，如何在两个表之间加入？

> ID：12439596
> 
> 赞同：0
> 
> 时间：2012-09-15T17:32:41.373
> 
> 标签：mysql, sql, join

我正在寻找创建一个选择语句。我的问题是我不知道从哪里开始。我正在寻找连接字段表中的名字和姓氏。然后我想从 Project 表中获取项目编号和项目名称。关系是（字段 1：N 工作 N：1 项目）。我不知道如何与中间的 Work 表进行连接。

```
CREATE TABLE project (
    proNumber                SMALLINT not null ,
    proName                  VARCHAR(25), 
    proLocation              VARCHAR(25) NULL,
    proDeptNumber           SMALLINT,
constraint   pkProj   primary key(proNumber)
);

CREATE TABLE Field (
    SSN                   CHAR(9) ,
    LastName             VARCHAR(25),
    FirstName            VARCHAR(25),
    MiddleName           VARCHAR(25) NULL,
    Address               VARCHAR(50) NULL,
    City                  VARCHAR(25) NULL,
    State                 CHAR(2) NULL,
    Zip                   CHAR(9) NULL,
    DateOfBirth         DATETIME NULL,
    Salary                FLOAT(8,2) not null,  
    ParkingSpace         INT,
    Gender                CHAR(1) NULL,
    DptNumber            SMALLINT,
    SuperID              CHAR(9),
constraint   pkField  PRIMARY KEY(ssn)
);

CREATE Work (
    workEmpSSN              CHAR(9) not null,
    workProNumber           SMALLINT not null,
    workHours                DECIMAL(5,1) NULL,
    workHoursPlanned        DECIMAL(5,1) NULL,
constraint  pkAssign   PRIMARY KEY (workEmpSSN, workProNumber)
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T17:46:52.093

下一次，您应该提供更多信息，例如最小模式。我想它看起来像这样：

```
创建表字段（
  id INT AUTO_INCREMENT 主键，
  first_name VARCHAR(10),
  姓氏 VARCHAR(10)
);

INSERT INTO 字段（名字，姓氏）
值（'fn1'，'ln1'），（'fn2'，'ln2'）；

创建表项目（
  id INT AUTO_INCREMENT 主键，
  名称 VARCHAR(10),
  work_id INT
);

插入项目（名称，work_id）
值 ('P1', 1), ('P2', 1), ('P3', 3), ('P4', 2), ('P5', 1);

创建表工作（
  project_id INT，
  field_id INT，
  FOREIGN KEY (project_id) REFERENCES project(id),
  FOREIGN KEY (field_id) REFERENCES field(id)
);

INSERT INTO work (project_id, field_id) VALUES (1, 1), (1, 2), (2, 1), (3, 1), (3, 2);

```

您可以简单地使用两个`JOIN`，如下所示：

```
SELECT CONCAT(field.first_name, ' ', field.last_name) AS field_name, project.name AS project_name, project.id AS project_number
从工作
JOIN 字段 ON field.id = work.field_id
在 project.id = work.project_id 上加入项目
按项目编号排序；

```

1.  我`CONCAT`用来连接查询中的两个字段（以获取另一个字段，我称之为`field_name`）。
2.  我将两个`JOIN`与它们各自的`ON`子句一起使用。

在SQLFiddle[上实时查看](http://sqlfiddle.com/#!2/2d185/1/0)。

**编辑：**完全误解了你原来的问题，对不起。[这](http://sqlfiddle.com/#!2/2d185/1)应该没问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T21:57:50.237

You have to include the 'table in the middle' in the query even though you do not return any values directly from that table:

```
SELECT f.FirstName, f.LastName, p.proNumber, p.proName
  FROM Field   AS f
  JOIN Work    AS w ON f.SSN = w.workSSN
  JOIN Project AS p ON p.proNumber = w.workProNumber 
```

Also note that in the modern world, it is a very (*very*, **very**, ***very***) bad idea to use the SSN as primary key or foreign key column in a database. You should use an ID column of some sort (EmployeeID). If you must store the SSN, it should be encrypted, and access should be severely restricted to those with a need to know. It can be a good idea to store the SNN in encrypted form in a separate table (with the corresponding EmployeeID as PK) with severely restricted access,

# javascript - 淘汰赛可观察数组

> ID：12439598
> 
> 赞同：0
> 
> 时间：2012-09-15T17:32:58.547
> 
> 标签：javascript, knockout.js

我正在尝试创建一个类似 facebook 墙的应用程序。

有没有办法可以将实体添加到数组的顶部而不是底部，这样我就可以获得像墙一样的外观？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T17:40:28.680

您可以使用`observableArray.unshift`将值添加到数组的开头。

> myObservableArray.unshift('Some new value') 在数组的开头插入一个新项

您可以[在 observableArray 文档中](http://knockoutjs.com/documentation/observableArrays.html)了解更多信息。

# r - 如何以最佳方式从二进制文件中可视化地图？

> ID：12439613
> 
> 赞同：0
> 
> 时间：2012-09-15T17:35:38.143
> 
> 标签：r, plot, ggplot2

下面给出的这段代码将读取一个二进制文件并简单地可视化地图，如下所示这是文件的链接

```
firsrow <- file("C:\\LaiAverage_2011_WGS84_50km.img", "rb")
row1 = readBin(firsrow, integer(), size = 2, n = 720*360, signed = F)
y <- matrix(data = row1, ncol = 360, nrow = 720)
image(t(t(y)), ylim=c(1,0)). 
```

谁能帮我把它想象成这样：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T18:04:03.203

您的问题非常广泛和模糊，因此我的回答将具有这些品质。此外，我将重点介绍基于 ggplot2 的解决方案。

*   要更改填充颜色，请查看`scale_fill_*`，其中 * 是例如`continuous`或`gradient`。
*   要更改 x 和 y 轴的布局，请查看`scale_{x,y}_*`和`labels`参数`breaks`。
*   要获得高分辨率输出，请另存为 pdf 或高分辨率 png。我非常喜欢使用`ggsave`它。

# actionscript-3 - 为什么这不接收 KeyboardEvent.KEY_DOWN 事件？

> ID：12439616
> 
> 赞同：0
> 
> 时间：2012-09-15T17:36:04.150
> 
> 标签：actionscript-3, apache-flex, actionscript, flash, keyboard-events

基本上我试图在我的程序中几乎不添加键盘事件侦听器，然后开始迭代地构建它们。问题是，即使是从多个教程中获得最简单的东西，显然也是个问题。我不太确定我现在缺少什么。我试过添加东西、改变东西和取出东西。但是鉴于以下代码，我看不到屏幕上显示任何消息。为什么？

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:local="*" xmlns:mx="http://www.adobe.com/2006/mxml" width="480" height="600" layout="absolute" creationComplete="onCreationComplete()">
<mx:Script>
    <![CDATA[
        import mx.controls.Alert;
        import flash.events.KeyboardEvent;

        private function onStart(pEvent:Event):void {
            vs.selectedChild = mm;
        }

        private function onNewGame(pEvent:Event):void {
            vs.selectedChild = game;
        }

        private function onCreationComplete():void {
            addEventListener(KeyboardEvent.KEY_DOWN, onKeyDown);
            stage.addEventListener(KeyboardEvent.KEY_DOWN, onKeyDown);

            addEventListener(KeyboardEvent.KEY_UP, onKeyDown);
            stage.addEventListener(KeyboardEvent.KEY_UP, onKeyDown);
        }

        private function onKeyDown(pEvent:KeyboardEvent):void {
            Alert.show("spam");
            Alert.show(pEvent.toString());
        }
    ]]>
</mx:Script>
<mx:ViewStack id="vs" creationComplete="vs.selectedChild = ts">
    <local:TitleScreen id="ts" creationComplete="ts.addEventListener(TitleScreen.START, onStart);" />
    <local:MainMenu id="mm" creationComplete="mm.addEventListener(MainMenu.NEW_GAME, onNewGame);" />
    <local:Game id="game" />
</mx:ViewStack>
</mx:Application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T19:06:14.053

不能`stage`直接使用。而是使用以下代码：

```
 private function onCreationComplete():void {
        systemManager.stage.addEventListener(KeyboardEvent.KEY_DOWN, onKeyDown);
        systemManager.stage.addEventListener(KeyboardEvent.KEY_UP, onKeyDown);
    } 
```

# javascript - 如何检测是否有任何溢出？

> ID：12439618
> 
> 赞同：1
> 
> 时间：2012-09-15T17:36:33.590
> 
> 标签：javascript, jquery, css

div 中的内容比它所能包含的要多。

如您所见，我想隐藏所有不可见或水平“半切”的文本。

此外，我需要隐藏最后一个可见句子或给定数量的字母，并将“阅读更多”之类的内容粘贴到文本可见部分的末尾。

我认为第二部分更容易。我不知道如何处理第一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T17:59:27.367

您可以使用 CSS。

浏览器支持：[http ://caniuse.com/#search=ellipsis](http://caniuse.com/#search=ellipsis)

```
.ellipsis {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    -o-text-overflow: ellipsis;
} 
```

或者使用[jQuery](http://tpgblog.com/2009/12/21/threedots-the-jquery-ellipsis-plugin/)插件来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T17:50:02.003

以下代码可以帮助您：

```
function isOverFlow(id){
    var elem = document.getElementById(id)
    if(elem.scrollWidth - jQuery(elem).width() > 0){
        return true;
   }
   return false;
} 
```

# matrix - 如何通过函数只修改二维数组的某一部分？

> ID：12439625
> 
> 赞同：1
> 
> 时间：2012-09-15T17:37:36.240
> 
> 标签：matrix, transpose, tiling

我有一个执行转置的函数：

```
transpose (int ** array, int arr_size){
for (i=0; i<arr_size; i++) {
    for (j=i+1; j<arr_size; j++) {
        temp=array[j][i];
        array[j][i]=array[i][j];
        array[i][j] = temp;
        }
    }
} 
```

我试图让它只从我的数组中转置某个子数组，所以如果我的数组是：

```
1 2 3
4 5 6
7 8 9 
```

我传入一个指向元素'5'和arr_size = 2的双指针，我应该以

```
1 2 3
4 5 8
7 6 9 
```

我尝试传入 &arr[1][1]，但这不起作用，因为这是一个单指针，而不是双指针。arr_size 是动态决定的。

# ubuntu - 无法在 Ubuntu 上运行 Cassandra

> ID：12439626
> 
> 赞同：3
> 
> 时间：2012-09-15T17:37:46.217
> 
> 标签：ubuntu, cassandra

我已经在 ubuntu 12.04 上安装了 Cassandra。

但是当我启动它时，会出现以下错误：

`cassandra -f xss = -ea -javaagent:/usr/share/cassandra/lib/jamm-0.2.5.jar -XX:+UseThreadPriorities -XX:ThreadPriorityPolicy=42 -Xms1493M -Xmx1493M -Xmn373M -Xss160k Segmentation fault (core dumped)`

我做了以下解决它但没有任何反应：在`/etc/conf/cassandra-env.sh`我评论了以下几行：

```
JVM_OPTS="$JVM_OPTS -XX:+HeapDumpOnOutOfMemoryError"

# set jvm HeapDumpPath with CASSANDRA_HEAPDUMP_DIR
if [ "x$CASSANDRA_HEAPDUMP_DIR" != "x" ]; then
    JVM_OPTS="$JVM_OPTS -XX:HeapDumpPath=$CASSANDRA_HEAPDUMP_DIR/cassandra-`date +%s`-pid$$.hprof"
fi 
```

并以 root 身份在 shell 上运行以下命令：

`unset IBM_HEAPDUMP
unset IBM_HEAP_DUMP`

我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T17:41:16.933

我有同样的问题，并发现以下内容：

```
$ cassandra -f
xss =  -ea -javaagent:/usr/share/cassandra/lib/jamm-0.2.5.jar -XX:+UseThreadPriorities -XX:ThreadPriorityPolicy=42 -Xms826M -Xmx826M -Xmn100M -XX:+HeapDumpOnOutOfMemoryError -Xss180k
Segmentation fault (core dumped) 
```

好的，怎么样：

```
$ sudo cassandra -f
xss =  -ea -javaagent:/usr/share/cassandra/lib/jamm-0.2.5.jar -XX:+UseThreadPriorities -XX:ThreadPriorityPolicy=42 -Xms826M -Xmx826M -Xmn100M -XX:+HeapDumpOnOutOfMemoryError -Xss180k 
```

..这次没有分段错误，也许'xss'部分在那种情况下只是一个模糊的调试消息？

```
$ ps -Af | grep cass
ubuntu    5687   959  0 15:42 pts/0    00:00:00 grep --color=auto cass 
```

嗯，虽然没有进程启动。

对我有用的是：

```
$ sudo /etc/init.d/cassandra start
xss =  -ea -javaagent:/usr/share/cassandra/lib/jamm-0.2.5.jar -XX:+UseThreadPriorities -XX:ThreadPriorityPolicy=42 -Xms826M -Xmx826M -Xmn100M -XX:+HeapDumpOnOutOfMemoryError -Xss180k
$ ps -Af | grep cass
root      5789     1  0 15:45 ?        00:00:00 jsvc.exec -user cassandra -home [blah blah blah] org.apache.cassandra.thrift.CassandraDaemon
106       5791  5789 13 15:45 ?        00:00:06 jsvc.exec -user cassandra -home [blah blah blah] org.apache.cassandra.thrift.CassandraDaemon 
```

...尽管我意识到这并没有像预期的那样在前台运行它`cassandra -f`。

我最终放弃并重新开始，通过从 DataStax 社区 AMI 启动 EC2 实例来避免手动安装：[https ://aws.amazon.com/amis/datastax-auto-clustering-ami-2-2](https://aws.amazon.com/amis/datastax-auto-clustering-ami-2-2)

但是......我刚刚在这里找到了真正的答案：[https ://stackoverflow.com/a/12941854/202168](https://stackoverflow.com/a/12941854/202168)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T21:31:13.327

在这里查看我的答案，[https://stackoverflow.com/a/14447535/92463](https://stackoverflow.com/a/14447535/92463)，它描述了增加堆栈段大小以在 OpenJDK 上启用 Cassandra。

# regex - 正则表达式与解析引擎

> ID：12439631
> 
> 赞同：2
> 
> 时间：2012-09-15T17:38:50.943
> 
> 标签：regex, html-parsing

您好，我正在建立一个关于我的图书收藏的事实数据数据库，即标题、页数、宽度、长度、作者、作者出生日期、出版商名称、出版商地址等。为此，我输入 ISBN，然后应用程序从 Web 获取该信息。从我自己定义的几个站点中，我知道其中将包含我需要的所有信息。目前，它是 3 个站点，而且很可能永远不会超过 5 个。在每个网站上，我使用 isbn 作为查询参数 CURL 一个搜索页面，提取搜索页面显示的链接，然后 CURL 这些链接并从中提取上述信息（出生、标题、出版商等）他们。因此，我的抓取范围是 3 x（搜索页面 + 信息页面）= 6 个 HTML 页面。

这些页面都以荒谬的方式呈现相关信息。例如，发布者信息在一个 HTML 标记中包含地址、电话、电子邮件、网站，以 brs 作为分隔符。一些出版商没有这些字段之一，因此它甚至不总是相同数量的 brs。这些站点中的另一个站点包含大部分信息的 lis，但一个字段为 a，另一个字段为 p，另一个字段为 div。ETC...

我已经成功地使用正则表达式提取了我想要的内容，然后使用了 DOM 解析器。最后，使用 DOM 解析器的代码的可读性更差，因为提取信息字段需要更多操作。举个例子：

```
<li>Né le : 23/12/1990 (ANGLETERRE)</li> 
```

对于男性作者的生日，对于女性作者也可以显示为

```
<li>Née le : 11/07/1832</li> 
```

使用 DOM 解析器，我需要获取一个 lis 列表，这还不够，因为一些重要信息在 ap、一个 div 和一个 a 中。然后对于每个 li，我需要检查 li 是否包含“Né le”或“Née le”，它是 ifs 或正则表达式 - 检查是否有带括号的出生地，并提取它，它位于至少还有两个操作。使用正则表达式，我可以在一行代码中得到它。

此外，解析器究竟是如何构建的？底层代码是做正则表达式，还是别的什么？如果是这样，我认为在使用解析引擎时，与快速而肮脏的正则表达式相比，性能成本会很高吗？

所以这是我的两个询问，DOM 解析器是如何构建的，它是否带有底层的正则表达式？其次，对于我解析六到十页的非常有限的范围，主要供我个人使用，我不应该追求代码的可读性（和性能取决于第一个问题）吗？

最好的问候，塞巴斯蒂安

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T17:46:47.053

> DOM 解析器是如何构建的，它是否带有底层正则表达式？

它是一个解析器，通常不会用正则表达式实现。在内部，有时会检查 HTML 的每个字符，并使用[状态机](http://en.wikipedia.org/wiki/Finite-state_machine)“弄清楚”字符的含义以及它如何适应 DOM（这将包括修复损坏的 HTML、关闭应该关闭的元素等等）。

如果您可以阅读 C#（或 Java），我建议您阅读[HTML Agility Pack](http://html-agility-pack.net/?z=codeplex)的源代码——尤其是`Parse`方法。它将非常清楚地显示这是如何完成的。

如何*正确*解析 HTML的明确来源在 whatwg HTML 规范的[第 12.2 节](http://www.whatwg.org/specs/web-apps/current-work/multipage/parsing.html)- （请注意，链接仅指向*第一*页 - 还有更多）。这不是为了装腔作势；）

> 对于我解析六到十页的非常有限的范围，主要是供我个人使用，我不应该追求代码的可读性（和性能取决于第一个问题）吗？

*用于解析众所周知的*HTML 格式的正则表达式很好。人们对尝试使用正则表达式解析来自许多不同来源的 HTML 感到愤怒，因为这实际上是不可能的（HTML 不是一种常规语言，您最终会遇到许多例外和矛盾）。

如果这是为了有限的使用和有限的 HTML 格式，请继续使用正则表达式。做任何对你来说更具可读性的事情。

# java - 当 y 轴显示负数时，JFreeChart 改变大小

> ID：12439633
> 
> 赞同：1
> 
> 时间：2012-09-15T17:39:38.513
> 
> 标签：java, jfreechart

我正在编写一个使用 JFreeChart 的应用程序，并且图表会随着应用程序的运行而动态更新。JFreeChart 在 ChartPanel 中，它们是简单的 XYLineCharts。

有时，图表上的 y 轴范围可能会从正数变为负数 - 在这种情况下，图表会缩小尺寸以为“-”符号腾出空间。

有没有办法防止这种情况发生？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T00:48:41.880

尝试这个：`plot.getRangeAxis().setLowerBound(0);`

# eclipse-plugin - Eclipse 插件：在向导中创建新的自定义文件

> ID：12439636
> 
> 赞同：3
> 
> 时间：2012-09-15T17:39:54.233
> 
> 标签：eclipse-plugin, customization

**在创建 Eclipse 自定义插件时：**

我创建了一个自定义向导来获取要创建的新自定义项目的名称。

创建项目后，它需要能够创建一个具有自定义扩展名**`.PROPERTIES`**的文件，例如（文件扩展名应该是一个常量）。

执行设计如下：

1.  **选择 NEW-->General--> Project 后给出项目名称后，必须出现如下窗口**

![在此处输入图像描述](../Images/6e9f5f677915dd00371ba691c1680d05.png)

PS 我已经尝试过网站中给出的代码：http: [//blog.cypal-solutions.com/2008/07/how-to-create-new-file-wizard.html](http://blog.cypal-solutions.com/2008/07/how-to-create-new-file-wizard.html) 但它不起作用。

我请求你帮助我，对此似乎感到困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T03:43:25.293

这是您正在寻找的示例[http://blog.eclipse-tips.com/2008/07/how-to-create-new-file-wizard.html](http://blog.eclipse-tips.com/2008/07/how-to-create-new-file-wizard.html)

# c# - 任何在不拆分的情况下在字符串中查找单词的方法

> ID：12439638
> 
> 赞同：6
> 
> 时间：2012-09-15T17:40:11.333
> 
> 标签：c#, regex, string, linq, indexof

我有一些字符串：

```
"rose with ribbon"
"roses in concrete"
"roses on bed" 
```

我必须编写一个程序来查找存在首选单词的字符串

例如：找到“on”所在的字符串，所以我只需要得到“床上的玫瑰”。

我使用了这段代码：

```
foreach (KeyWord key in cKeyWords)
{
    foreach (string word in userWords)
    {
        if (key.keyWord.IndexOf(word) != -1)
        {
            ckeyList.Add(key);
        }
    }
} 
```

但我得到了所有字符串，因为 IndexOf 在所有字符串中都找到了“on”。

有没有其他解决方案可以在不拆分的情况下在字符串中找到单独的单词？也许可以使用 Linq 或 Regex？但我不擅长使用它们，所以有任何例子会很高兴。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T17:45:34.793

使用正则表达式`\bon\b`应该可以做到。

`\b`是[单词边界](http://www.regular-expressions.info/wordboundaries.html)的正则表达式锚点，因此正则表达式将匹配紧随其后的单词边界，然后`on`紧跟另一个单词边界。

以下 C# 示例...

```
字符串[] sArray = 新字符串[]
    {
        “带丝带的玫瑰”，
        “床上的玫瑰”，
        《混凝土中的玫瑰》
    };

正则表达式 re = new Regex("\\bon\\b");
foreach（sArray 中的字符串 s）
{
    Console.Out.WriteLine("{0} 匹配？{1}", s, re.IsMatch(s));

    匹配 m = re.Match(s);
    foreach（m.Groups 中的组 g）
    {
        如果（g.成功）
        {
            Console.Out.WriteLine("在 {0} 位置找到匹配", g.Index);
        }
    }
}

```

...将生成以下输出：

```
玫瑰与丝带相配？错误的
床上的玫瑰花？真的
    在位置 6 找到匹配项
混凝土比赛中的玫瑰？错误的

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T07:47:07.693

是的，通过使用正则表达式，您可以在字符串中找到单词。试试看，

```
string regexPattern;

foreach (KeyWord key in cKeyWords)
{
  foreach (string word in userWords)
  {
    regexPattern = string.Format(@"\b{0}\b", System.Text.RegularExpressions.Regex.Escape(word));
    if (System.Text.RegularExpressions.Regex.IsMatch(key.keyWord, regexPattern))
    {
        ckeyList.Add(key);
    }
  }
} 
```

如果您不想考虑区分大小写，请在字符串上使用 ToLower() 方法。

```
 foreach (KeyWord key in cKeyWords)
{
  foreach (string word in userWords)
  {
    regexPattern = string.Format(@"\b{0}\b", System.Text.RegularExpressions.Regex.Escape(word.ToLower()));
    if (System.Text.RegularExpressions.Regex.IsMatch(key.keyWord.ToLower(), regexPattern))
    {
        ckeyList.Add(key);
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T17:43:13.903

使用正则表达式，阅读这篇文章： http: [//www.dotnetperls.com/regex-match](http://www.dotnetperls.com/regex-match)

这是另一篇研究正则表达式的好文章：http: [//www.codeproject.com/Articles/9099/The-30-Minute-Regex-Tutorial](http://www.codeproject.com/Articles/9099/The-30-Minute-Regex-Tutorial)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T17:45:26.557

问题是您正在搜索在所有字符串中都可以找到的“on”（ribb* *on* *, c* *on* *crete）

您应该搜索“ on”。

更好的解决方案是将字符串解析为单词数组并遍历它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-15T17:47:57.010

简而言之，这就是您可以做的（替换适当的`StartsWith`和`EndsWith`用于 C# String 类）。

```
foreach (KeyWord key in cKeyWords)
{
   foreach (string word in userWords)
   {
       if (key.keyWord.IndexOf(" " + word + " ") != -1
          || key.keyWord.StartsWith(word + " ") 
          || key.keyWord.EndsWith(" " + word))
       {
           ckeyList.Add(key);
       }
} 
```

# php - 无法刷新带有标题位置的页面

> ID：12439642
> 
> 赞同：0
> 
> 时间：2012-09-15T17:41:03.817
> 
> 标签：php, header, webserver, refresh, xampp

我正在使用这段代码做一些事情，但最后它需要在我的本地 xampp 服务器 PHP 版本 5.4.4 上重定向/刷新。在我的本地服务器上一切正常，但在网络上它在 PHP 版本 5.3.14 上运行并且它不会重定向/刷新。

```
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    # Variables->

    $rand = rand(10, 457);
    $folder_name = preg_replace('/\s+/', '', $_POST['name']);
    $folder_name = strtolower($folder_name);
    $folder_name = "{$folder_name}{$rand}";
    if (!mkdir("albums/$folder_name", 0777, true)) {
        die('Failed to create folders...');
    } else {

        $sql = "INSERT INTO albums (name,folder) VALUES (:name,:folder)";
        $q = $db->prepare($sql);
        $q->execute(array(':name' => $_POST['name'], ':folder' => $folder_name));
        header("Location: index.php?p=adm&a=adm-gallery");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T17:55:49.850

你可能在标题之前有一些输出

使用 javascript

```
echo '<script> document.location = "index.php?p=adm&a=adm-gallery" ; </script>'; 
```

# wordpress - 在响应式网页设计布局中隐藏图像。

> ID：12439647
> 
> 赞同：3
> 
> 时间：2012-09-15T17:42:23.457
> 
> 标签：wordpress, responsive-design

我只想在从手机或平板电脑查看图像时隐藏图像。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T04:38:57.397

在 imgs 上使用 'display: none' 仍然会下载不推荐的图像，因为它是一个浪费的 http 请求（您可以通过查看浏览器检查器中的网络选项卡来查看这一点[右键单击，在 Chrome 中检查元素]。只是刷新页面，您将看到正在下载的每个资产以及下载所需的时间。）。
相反，您可以将那些您不希望加载的特定图像作为背景图像加载到 div 上。
那么你需要做的就是：

```
@media (max-width: x) {
    .rwd-img {
        background-image: none;
        } 
```

当然，您必须在 CSS 中为您的 div 定义图像的高度和宽度，但这比牺牲用户体验更好。:)

感兴趣的链接： http:
[//css-tricks.com/on-responsive-images/](http://css-tricks.com/on-responsive-images/)
[http://mattstow.com/responsive-and-retina-content-images-redux.html](http://mattstow.com/responsive-and-retina-content-images-redux.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-15T17:48:57.510

你会想要使用[媒体查询](http://www.w3.org/TR/css3-mediaqueries/)，例如：

```
@media (max-width: 979px) {
   .img { 
      display: none;
   }
} 
```

您还应该研究提供[响应式实用程序类](http://twitter.github.com/bootstrap/scaffolding.html#responsive)的框架，例如[Bootstrap](http://twitter.github.com/bootstrap/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-15T17:49:51.467

使用带有媒体查询的级联样式表，您可以在查看者屏幕分辨率低于给定值时隐藏图像，例如当屏幕宽度小于 640 像素时。

```
@media screen and (max-width: 640px) {

    .my-image {
        display: none;
    }

} 
```

# java - 为什么Java中的逆变参数类型不允许被覆盖？

> ID：12439649
> 
> 赞同：20
> 
> 时间：2012-09-15T17:42:31.330
> 
> 标签：java, overriding, covariance, contravariance

当重写超类的方法时，Java 允许返回类型是协变的。

为什么在重写方法时不允许使用**相反**的逆变参数类型？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-15T17:46:11.440

因为这叫做[重载](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)。

特别是，返回类型类型可以是协变的，因为在重载时不考虑它，因此它仍然匹配超类或接口的实现。重载时考虑参数。您很可能与`Number doSomethingWithNumber(Integer value)`相比进行了优化`Number doSomethingWithNumber(Number value)`。

# emacs - 如何重构 Clojure 源代码？

> ID：12439650
> 
> 赞同：8
> 
> 时间：2012-09-15T17:42:40.747
> 
> 标签：emacs, clojure, refactoring, elisp

做[4clojure](http://www.4clojure.com)练习，一个目标是提供正确答案，一个可选目标是提供尽可能短的解决方案（不计算空格），也就是代码高尔夫。然后，您可以与其他解决方案进行比较。

在做练习时，我**首先**找到一个正确的答案。然后我对我的源代码进行**手动** **重构**，其中包括将变量名称重命名为单个字符。例如，应用此基本步骤后，我的代码可能如下所示。

```
(fn f[s]
   (if (empty? s)
     {}
     (let [[k & r] s
        [v n] (split-with number? r)]
        (assoc (f n) k v)))) 
```

对于人类来说非常难以阅读，但在 4Clojure 代码高尔夫比赛中得分更高，因为它节省了很多字符。

出于好奇，您将如何在 emacs 中实现自动化？clojure.core 中是否有重构功能可以提供帮助？我没有找到。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T20:47:29.590

学习图书馆。例如，看起来您可以使用`if-let`or `seq`。如果您不考虑使用静态分析工具“作弊”，请查看[Kibit](https://github.com/jonase/kibit)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-27T19:55:58.723

[clojure-refactoring](https://github.com/joodie/clojure-refactoring)显然可以提供帮助。

# c# - 通过 UDP Windows Phone C# 传输字节数组

> ID：12439651
> 
> 赞同：0
> 
> 时间：2012-09-15T17:42:44.313
> 
> 标签：c#, windows-phone-7, sockets, udp

我正在尝试通过 Windows Phone 上的 UDP 协议传输数据。这是代码-

```
_socket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
        if (_socket != null)
        {

            SocketAsyncEventArgs socketEventArg = new SocketAsyncEventArgs();

            socketEventArg.RemoteEndPoint = new DnsEndPoint("CompName", 11000);

            byte[] payload = Encoding.UTF8.GetBytes("String Payload");

            socketEventArg.SetBuffer(newtest, 0, newtest.Length);

            _socket.SendToAsync(socketEventArg);
        } 
```

当我发送一个字符串时，这段代码工作得很好。但是，当我用相机预览中的数据替换这个字节数组时，像这样 -

```
 cam.GetPreviewBufferYCbCr(payload); 
```

其中 cam 是正确初始化的 PhotoCamera 对象，会产生以下两个错误并且传输不工作。

*System.Net.dll 中出现“System.InvalidCastException”类型的第一次机会异常*

*System.Net.dll 中出现“System.Net.Sockets.SocketException”类型的第一次机会异常*

我测试并确保这不是较大字节数组大小的问题。任何指向正确方向的指针将不胜感激！

# iphone - COCOS 2d V2.x 菜单对齐问题 - 在 iPhone Simulator 5.1 和 iPhone 4 设备中测试

> ID：12439654
> 
> 赞同：1
> 
> 时间：2012-09-15T17:42:58.720
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone

不知道为什么菜单与左上角对齐，以前的版本菜单与中心完美对齐。在 iPhone 4 中进行测试。

我知道解决方案`[menu setPosition:ccp( size.width/2, size.height/2)];`，但想了解为什么它与左上对齐。

要获得相同的结果，请在 AppDelegate 中尝试此操作

```
[director_ pushScene: [HelloWorldLayer scene]]; 
```

代替

```
[director_ pushScene: [IntroLayer scene]]; 
```

**我的结果和我的代码**

![在此处输入图像描述](../Images/b58e866ddb7c27820ad0d5b6d32241fb.png)

更新源

菜单层.h

```
#import <Foundation/Foundation.h>
#import "cocos2d.h"

@interface MenuLayer : CCLayer {

}

+(CCScene *) scene;

@end 
```

菜单层.m

```
#import "MenuLayer.h"

@implementation MenuLayer

        +(CCScene *) scene
        {
            CCScene *scene = [CCScene node];

            MenuLayer *layer = [MenuLayer node];

            [scene addChild: layer];

            return scene;
        }

    -(id) init
    {
        if( (self=[super init]) ) {
            CCMenuItem *itemAchievement = [CCMenuItemFont itemWithString:@"Play" block:^(id sender) {}];
            CCMenuItem *itemLeaderboard = [CCMenuItemFont itemWithString:@"Settings" block:^(id sender) {}];

            CCMenu *menu = [CCMenu menuWithItems:itemAchievement, itemLeaderboard, nil];

            [menu alignItemsVertically];

            [self addChild:menu];
        }
        return self;
    }
    @end 
```

AppDelegate.m

```
 [director_ pushScene: [MenuLayer scene]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T19:38:16.700

好的，我先告诉你答案：

你出了点问题:) ..你一定改变了父母的位置，或者它的祖父母，......等等。

**编辑：**

您的错误`CCDirector`在此方法中运行：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    ...
    // Remove this code ! 
    [director_ runWithScene:blah];
} 
```

相反，您必须`CCDirector`像这样运行：

```
// This method is part of the CCDirectorDelegate methods
// Add it below the - (BOOL)application: didFinishLaunchingWithOptions:
-(void) directorDidReshapeProjection:(CCDirector*)director
{
    if(director.runningScene == nil) {
        // Add the first scene to the stack. The director will draw it immediately into the framebuffer. (Animation is started automatically when the view is displayed.)
        // and add the scene to the stack. The director will run it when it automatically when the view is displayed.
        [director_ runWithScene: [HelloWorldLayer scene]];
    }
} 
```

**证据：**

阅读 cocos2d 文档！他们说如果你在 iOS 6 之前的 iOS 版本上运行，你不能运行`CCDirector`inside`application: didFinishLaunching:`方法。

从文档：

> 这对于 iOS4 和 iOS5 是必需的，以确保第一个场景具有正确的尺寸 这在 iOS6 上不需要，可以添加到应用程序中：didFinish...

这是你的照片，解剖：

![在此处输入图像描述](../Images/00d4017008a35117e221111177ab536e.png)

真是一团糟…… cocos2d 的默认行为不可能是那样的。创建一个新的 cocos2d v2.x，然后清理`HelloWorldLayer.m`，结果如下：

```
// Achievement Menu Item using blocks
CCMenuItem *itemAchievement = [CCMenuItemFont itemWithString:@"Achievements" block:^(id sender) {}];
// Leaderboard Menu Item using blocks
CCMenuItem *itemLeaderboard = [CCMenuItemFont itemWithString:@"Leaderboard" block:^(id sender) {}];

CCMenu *menu = [CCMenu menuWithItems:itemAchievement, itemLeaderboard, nil];

[menu alignItemsVertically];

[self addChild:menu]; 
```

![在此处输入图像描述](../Images/c884396dee34b21e47a37c566153629e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-03T07:39:38.993

我已通过`-(void) makeTransition:(ccTime)dt`在**IntroLayer.m**中查找并添加替换以下代码来解决此问题：

```
[[CCDirector sharedDirector] replaceScene:[CCTransitionFade transitionWithDuration:1.0 scene:[HelloWorldLayer scene] withColor:ccWHITE]]; 
```

经过

```
[[CCDirector sharedDirector] replaceScene:[CCTransitionFade transitionWithDuration:1.0 scene:[YourLayer scene] withColor:ccWHITE]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T05:01:33.707

它通过修改 MenuLayer.m 来工作 - 覆盖 onEnter 然后将孩子添加到该层

```
#import "MenuLayer.h"

@implementation MenuLayer

+(CCScene *) scene
{
    CCScene *scene = [CCScene node];

    MenuLayer *layer = [MenuLayer node];

    [scene addChild: layer];

    return scene;
}
-(void) onEnter
{
    [super onEnter];
    CCMenuItem *itemAchievement = [CCMenuItemFont itemWithString:@"Play" block:^(id sender) {}];
    CCMenuItem *itemLeaderboard = [CCMenuItemFont itemWithString:@"Settings" block:^(id sender) {}];

    CCMenu *menu = [CCMenu menuWithItems:itemAchievement, itemLeaderboard, nil];

    [menu alignItemsVertically];

    [self addChild:menu];

}
-(id) init
{
    if( (self=[super init]) ) {

    }
    return self;
}
@end 
```

# ios - 一旦有人注册/登录 parse.com，您自己的代码应该放在哪里？

> ID：12439659
> 
> 赞同：-1
> 
> 时间：2012-09-15T17:43:41.160
> 
> 标签：ios, delegates, protocols

我是 obj-c/iOS/parse 的新手，所以这是一个基本问题。

我已经设法让登录和注册控制器出现在我的代码中，但我不明白一旦用户注册/登录，钩子在哪里开始我自己的游戏代码？在解析 iOS 指南中，您有这样的代码示例......

```
PFUser *currentUser = [PFUser currentUser];

if (currentUser) {

// do stuff with the user
} else {

// show the signup or login screen
} 
```

或者...

```
[PFUser logInWithUsernameInBackground:@"myname" password:@"mypass" block:(PFUser user, NSError error) {

if (user) {
    // Do stuff after successful login.
} else {
    // The login failed. Check error to see why.
}
}]; 
```

[但是我在登录/注册教程](https://parse.com/tutorials/login-and-signup-views)代码中没有看到类似的代码，只是关于协议和委托的一些内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T19:27:01.257

您将旧的手动登录方法与相当新的视图控制器方法混合在一起，尽管两者仍然有效。

如果您按照教程进行操作，请使用 PFUser 上的测试来决定是否应该显示登录控制器。如果您是 IOS 新手，那么您将需要复习一下协议和委托，因为您会看到它经常使用的模式。

基本上，协议是一组预定义的方法，它们允许两个对象一起工作，但对彼此知之甚少。所以它允许对象非常模块化和抽象。委托是一个对象通知另一个希望使用协议一起工作的对象的一种方式。

当你启动解析登录视图控制器时，你必须将自己设置为它的委托，一旦你这样做了，你就可以从它那里收到关于某人登录成功或失败的消息。

因此，您只需启动它，将自己设置为代表，然后展示它。

当用户成功登录时，解析登录视图控制器将向您发送一条消息，寻找某个方法是否存在。如果你有它，那么它将被调用（如果没有，可能会崩溃）。因此，在这种情况下，在呈现解析登录视图控制器的视图控制器中，您还应该实现（通过让它们在那里）登录成功方法和登录失败方法。我在下面展示登录成功方法。如果你实现它，第一行将关闭登录视图控制器。然后，您可能会在完成块中或在其下方添加一个方法调用来启动您的程序。

```
// Sent to the delegate when a PFUser is logged in.
- (void)logInViewController:(PFLogInViewController *)logInController didLogInUser:(PFUser    *)user {
[self dismissViewControllerAnimated:YES completion:NULL];
[self startMyApplication];  //example 
```

}

# asp.net - Cookie 仅在清除浏览器缓存后有效

> ID：12439660
> 
> 赞同：0
> 
> 时间：2012-09-15T17:43:46.870
> 
> 标签：asp.net, cookies, browser-cache

我刚刚遇到了我的 ASP.NET 网页的问题。饼干不再起作用了。我添加的任何 Cookie，即使是在页面开头要调试的那些，都没有保存。

我清除了浏览器缓存，它又开始工作了。这听起来像一个常见问题吗，因为我以前从未经历过，而且我没有日志/线索来理解为什么没有保存 cookie。我真的很担心在接下来的几天里它可能经常发生在我的任何用户身上。

会不会是设计不佳的 cookie 添加器？因为我的被包装在一个封闭的 .NET DLL 中，所以我无法访问它。

[编辑]

抱歉，我编辑了标题并添加了“仅”一词。问题是我有一个网站可以完美运行几个月，然后今天早上，我注意到在 asp.net 中设置 cookie 是不可能的。Cookie 显示为空。示例：“Mycookie=MyOtherCookie=" 因为我的 cookie 中有很多东西，比如用户名、秘密会话令牌等，所以网站无法正常工作。然后清除缓存将它带回来，这就是为什么我很担心并且正在寻找已经在类似情况下运行的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T20:04:47.623

问题是我的域名没有url重写，所以如果我在domain.com上冲浪，它找不到我添加的cookie分配给**www** .domain.com，所以需要为域重写.com。

我在 IIS 中编写了一条规则，现在它可以工作了。

# php - 使用 php 从 sql server 获取希腊列名

> ID：12439666
> 
> 赞同：1
> 
> 时间：2012-09-15T17:45:12.093
> 
> 标签：php, html, sql-server, encoding

我有一个希腊 sql server 2008 数据库，我使用 php 将数据获取到一个网站。数据库数据是`nvarchar`。在与服务器的连接中，我有字符集到`utf-8`html 文件`charset="utf-8"`。

当我从数据库中获取数据时，一切都很好，但是当我尝试使用 获取列名时`sqlsrv_field_metadata()`，它会在浏览器中显示并带有问号。如果我从视图中获取列名，`information_schema.columns`它们会显示得很好。

我应该怎么办？

有没有办法检查列名是否是`nvarchar`？

**更新：* *原来它是一个用于 php 错误的 sql server 驱动程序，并且该问题已添加到 Codeplex [http://sqlsrvphp.codeplex.com/workitem/22417](http://sqlsrvphp.codeplex.com/workitem/22417)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:49:50.940

您应该使用 mssql 模块而不是旧的 sqlsrv 库。

打电话给你会使用：

```
$dbhandle = mssql_connect($myServer, $myUser, $myPass)
  or die("Couldn't connect to SQL Server on $myServer"); 

$selected = mssql_select_db($myDB, $dbhandle)
  or die("Couldn't open database $myDB"); 

//execute a stored procedure:
$query = "exec eCommerce.dbo.products_GET_Product_php @productId = $pid, @countryCode = " . $_SESSION['cc'] . ", @sid = ". $_SESSION['sid'];

$result = mssql_query($query);

while($row = mssql_fetch_array($result))
{ 
 $pagetitle = $row["product_name"];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T17:58:39.510

尝试连接

```
sqlsrv_connect ($serverName, array('CharacterSet' => 'windows-1253')); 
```

# php - 如何使用 PHP 制作缩略图

> ID：12439667
> 
> 赞同：1
> 
> 时间：2012-09-15T17:45:19.880
> 
> 标签：php, image, thumbnails

我已经创建了一个页面来上传存储在本地名为**upload**的文件夹中的图像，我也将其作为列表但如何将其作为缩略图（具有固定像素）？现在发生了什么，它只是用自己大小的像素（一些大的和一些小的）查看。

我的代码如下：

```
<?php
// open this directory 
$myDirectory = opendir("upload");

// get each entry
while($entryName = readdir($myDirectory)) {
$dirArray[] = $entryName;
}

// close directory
closedir($myDirectory);

//count elements in array
$indexCount = count($dirArray);
?>      

<ul>
<?php
// loop through the array of files and print them all in a list
for($index=0; $index < $indexCount; $index++) {
$extension = substr($dirArray[$index], -3);
if ($extension == 'jpg'){ // list only jpgs
echo '<li><img src="upload/' . $dirArray[$index] . '" alt="Image" /><span>' . $dirArray[$index] . '</span>';
        }   
    }
?>
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T17:49:40.420

您需要使用[GD](http://icant.co.uk/articles/phpthumbnails/)图像函数库编译 PHP 才能工作。要 on 只需删除 php.ini中的`;`之前`extension=php_gd.dll`

这里[How to create thumbnails with PHP and gd](http://icant.co.uk/articles/phpthumbnails/)是一个很好的解释性好的教程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T18:02:37.673

有一个名为的类`class.upload.php`，它是在 php 中处理图像的一个了不起的类：

[http://www.verot.net/php_class_upload_samples.htm](http://www.verot.net/php_class_upload_samples.htm)

它不仅可以通过许多选项创建您需要的缩略图，还可以对您的图像进行数十种其他操作。

如果您想了解如何创建缩略图，请查看此链接：

[http://davidwalsh.name/create-image-thumbnail-php](http://davidwalsh.name/create-image-thumbnail-php)

但是如果你打算在你的网页制作中使用它，那么将它包含`class.upload.php`在你的核心中并使用它将是一个不错的选择......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T18:53:15.680

用于调整图像大小的简单代码..您可以使用您想要的任何高度/宽度。例如，将它们设置为 150x150 的缩略图...

```
function getExtension($str) {

             $i = strrpos($str,".");
             if (!$i) { return ""; } 

             $l = strlen($str) - $i;
             $ext = substr($str,$i+1,$l);
             return $ext;
     }
            $extension = getExtension($filename);
            $extension = strtolower($extension);
            if (($extension != "jpg") && ($extension != "jpeg") && ($extension != "png") && ($extension != "gif")) {
            echo ' Unknown Image extension ';
            $errors=1;
            }
            if($extension=="jpg" || $extension=="jpeg" ){
            $uploadedfile = $_FILES['form_file']['tmp_name'];
            $src = imagecreatefromjpeg($uploadedfile);
    }
    else if($extension=="png")
    {
    $uploadedfile = $_FILES['form_file']['tmp_name'];
    $src = imagecreatefrompng($uploadedfile);
    }
    else 
    {
    $src = imagecreatefromgif($uploadedfile);
    }
            list($width,$height)=getimagesize($uploadedfile);
            // Set Height and Width Here
            $newwidth=150;
            $newheight=150;
            $tmp=imagecreatetruecolor($newwidth,$newheight);
            imagecopyresampled($tmp,$src,0,0,0,0,$newwidth,$newheight,$width,$height);  
                    // Set the path here
            $filename = "../uploads/thumbs/". $_FILES['form_file']['name'];
            imagejpeg($tmp,$filename,100);
            imagedestroy($src);
            imagedestroy($tmp);
                } 
```

# javascript - 奇怪的 Javascript 结果

> ID：12439669
> 
> 赞同：0
> 
> 时间：2012-09-15T17:45:28.647
> 
> 标签：javascript, json, parsing, null, undefined

为什么这段代码在我的理解`- null -`应该返回时返回`- -`- 它似乎`null`像一个字符串一样对待。

```
var testvar = null;
alert(" - "+testvar+" - "); 
```

而已。也是如此`undefined`。我需要它来工作，因为我有一个数组，我循环遍历数组，并将每个项目添加到一个变量，这是一个字符串。

我有这个：

```
//'resp' variable is a JSON response, decoded with JSON.parse.  This part works fine.
var addOnEnd=null;
for (item in resp) {
    console.log(">"+item);
    addOnEnd += item+"\n";
} 
```

console.log 读取我所期望的 - 响应中所有项目的列表。

但是，如果我在 for 循环之后使用 alert( `addOnEnd`)，它会返回“未定义”（字面意思是字符串），然后返回数组的其余部分。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T17:51:04.337

结果是正确的。您正在看到 和的`toString`值。`null``undefined`

如果要替换空字符串，请执行此操作。

```
var testvar = null;
alert(" - "+ (testvar == null ? "" : testvar) +" - "); 
```

和

```
var addOnEnd="";
for (item in resp) {
    item = item == null ? "" : item;
    console.log(">"+item, resp[item]);
    addOnEnd += item+"\n";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T17:49:25.930

将其更改为：

`alert(" - " + (testvar || "") + " - ");`

...和这个...

`addOnEnd += (item || "") + "\n";`

**您还需要将 addOnEnd 初始化为空字符串而不是 null。**

这样，如果该值未定义（当评估为布尔值时返回 false），它将使用空字符串的“默认”值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T17:51:49.747

当连接（添加）到字符串时，null 值被强制转换为字符串“null”。你要的是这个。

```
var addOnEnd="";
for (item in resp) {
    console.log(">"+item);
    addOnEnd += item +"\n";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T17:52:19.663

我怀疑问题出在您的数据上。

```
var testvar = null;
alert(" - "+testvar+" - ");
// RESULT "- null -" --> as expected.  

var addOnEnd=null;
for (item in {key: "val1", key2: "val2"}) {
  console.log(">"+item);
   addOnEnd += item+"\n"; 
}
alert(addOnEnd)
//result (nullKey1\nKey2) 
```

# android - Android序列化问题

> ID：12439675
> 
> 赞同：0
> 
> 时间：2012-09-15T17:46:31.283
> 
> 标签：android, serialization

我正在尝试保存位置列表，但无法序列化位置。为了管理它，我创建了一个名为 simpleLocation 的类，它实现了序列化，并且只有纬度和经度的双精度：

```
public class simpleLocation implements Serializable
{
    private static final long serialVersionUID = 10001L;
    double lat = 0.0;
    double lon = 0.0;

    public simpleLocation()
    {}
    public void setLat(double l)
    {
        lat = l;
    }
    public void setLon(double l)
    {
        lon = l;
    }
    private double getLat()
    {
        return lat;
    }
    public double getLon()
    {
        return lon;
    }

} 
```

据我所知，我不需要其他任何东西，并且这个类应该是可序列化的。（话说回来，我对序列化的了解非常有限）。

我将位置的 ArrayList 转换为 simpleLocations 的 ArrayList，然后尝试将其写出：

```
// dropDownList is a Spinner

private void internalSave()
{
    try{
        // get my internal directory
        String filename = "" + dropDownList.getSelectedItemPosition() + ".ser";
        FileOutputStream fileOut = openFileOutput(filename, Context.MODE_PRIVATE);
        ObjectOutputStream objectOut = new ObjectOutputStream(fileOut);

        // convert Locations to simpleLocations
        ArrayList<simpleLocation> simple = convertToSimpleLocation();
        // write out
        for(int i=0; i<simple.size(); i++)
        {
            objectOut.writeObject(simple.get(i));
        }

        objectOut.flush();
        objectOut.close();
            Toast.makeText(this, "Write complete", Toast.LENGTH_SHORT);
    }catch (Exception e)
    {
            Toast.makeText(this, "Error with Internal Save:\n"+e.toString(), Toast.LENGTH_SHORT);
        e.printStackTrace();
    }
} 
```

每次尝试使用此方法时，我都会收到 java.io.NotSerializeableException，但我不知道出了什么问题。我敢肯定这是我忽略的一些简单的事情，但如果有人能指出它，我将非常感激。

编辑：想通了，我确实需要在我的 simpleLocation 类中有一个 writeObject 方法。

# android - 如果网络不可用，则停止执行 Activity - Android

> ID：12439678
> 
> 赞同：0
> 
> 时间：2012-09-15T17:46:40.093
> 
> 标签：android, networking, android-activity

在我的 Android 应用程序中，用户首先登陆登录活动。我正在检查网络可用性。如果网络不可用，我想进一步停止切除。

是我们需要在代码级别上工作的东西，或者我们有一些可用的东西，比如`activity.cancel()`Activity`return null`来处理下一个代码。请注意，我不想关闭活动。我只想提醒用户网络不可用。

这是代码：

```
 public void onClick(View v) {
    if ( v.getId() == R.id.btnLogin ) {

        if ( Utilities.isNetworkAvailable(this) ) {
            mIsNetworkAvailable = true;
        } 

        if ( mIsNetworkAvailable ) {
            username = ((EditText) findViewById(R.id.username)).getText().toString().trim();
            password = ((EditText) findViewById(R.id.password)).getText().toString().trim();
        }

        // If U/P is empty, do NOT process anything, just display the alert and stop.
        if ( username.length() == 0 || password.length() == 0) {
            Utilities.showAlert("Please enter username and password", this);

            // HOW TO STOP THE EXECUTION HERE
        } else if ( !mIsNetworkAvailable ) {
            Utilities.showAlert("Internet connection is not availble in your device.", this);
            // HOW TO STOP THE EXECUTION HERE
        }

        // If not any of the above, proceed.

        User userobj = new User();
        userobj.setUsername( username );
        userobj.setPassword( password );

        TaskHandler handler = new TaskHandler(getString(R.string.server_uri) + "Verify/", userobj, LoginActivity.this);
    }
} 
```

**编辑**

上面的代码在onClick（登录按钮）中。我想要实现的是，当用户单击登录按钮时，如果网络不可用，我需要显示警报并停止进一步的过程。如果成功，我需要打开下一个活动。

这是我们在其他地方做的常规流程。我知道，我们可以将整个代码封装在 if-else 块中。但我想知道，是否有办法通过调用来停止执行，例如`finish()`.

请注意，我不想销毁/关闭活动。该活动应该保持不变，以便用户可以继续尝试，可能在打开网络之后。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T18:06:03.600

尝试这个。如果约束不满足就返回。如下图...

```
.... .....
.... .....
if ( username.length() == 0 || password.length() == 0) {
        Utilities.showAlert("Please enter username and password", this);

        return;
    } else if ( !mIsNetworkAvailable ) {
        Utilities.showAlert("Internet connection is not availble in your device.", this);
       return;
    }

    User userobj = new User();
    userobj.setUsername( username );
    userobj.setPassword( password );
.... .....
.... ..... 
```

希望对你有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T17:58:42.550

我想你正在寻找的是

```
finish(); 
```

这将终止上下文中的活动。

# ios - 在 uiimageview 上使用 Quartz 2D 绘图 - 线条变得模糊

> ID：12439686
> 
> 赞同：1
> 
> 时间：2012-09-15T17:47:35.010
> 
> 标签：ios, xcode, drawing, core-graphics, cgcontext

这是一个与在 iPad 应用程序的视图中使用 Core Graphics 绘制路径（响应触摸事件）相关的问题。

我有一个视图作为滚动视图的一部分，我想在其中跟踪触摸路径。下面的代码适用于应用程序中的其他 uiimageviews，但不适用于这个特定的子视图。当我绘制时（通过在屏幕上跟踪/触摸），线条出现但开始在 y 方向上移动。所以，整个轨迹在 y 方向上不断压缩！！随着线条向上移动，它们似乎也在扩散并最终消失！

相同的代码适用于滚动视图之外的不同视图。过去 3 天我在网上搜索并花了几个小时试图了解这里发生了什么，但我仍然不知道。任何帮助/建议将不胜感激。

谢谢。

这是我的绘图代码：

```
UIGraphicsBeginImageContext(coverIVFragments.frame.size);
            [coverIVFragments.image drawInRect:CGRectMake(0, 0, coverIVFragments.frame.size.width, coverIVFragments.frame.size.height)];
            CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
            CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 2.0);
            CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), red, green, blue, 1.0);
            CGContextBeginPath(UIGraphicsGetCurrentContext());
            CGContextMoveToPoint(UIGraphicsGetCurrentContext(), x1, y1);
            CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), x2, y2);
            CGContextStrokePath(UIGraphicsGetCurrentContext());

            coverIVFragments.image = UIGraphicsGetImageFromCurrentImageContext();
            UIGraphicsEndImageContext(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T12:28:32.680

首先，您应该使用采用比例而不是 UIGraphicsBeginImageContext 的新方法（在 iPad 上没有 Xcode 方便）。

问题可能是与滚动视图的交互。在您的例程顶部记录滚动视图 contentOffset 和您的框架。您一直假设原点为 0,0，但实际上您想要的帧很可能是 sv.contentOffset 和 sv.bounds.size 的组合。

对我来说，我经常记录这类问题，我需要做的事情很快就会变得很明显。

编辑：你的问题是使用非积分矩形 - 这条线纠正了没有缩放的问题：

```
 coverImageView.frame = CGRectIntegral(coverImageView.frame);
   UIGraphicsBeginImageContextWithOptions(coverImageView.frame.size, NO, imageScrollView.zoomScale); 
```

我认为您没有正确使用“比例”参数 - 可能您应该调整绘图将进入的矩形的大小，并仅将比例用于其预期目的并在那里传递“0”。

# jquery - 动态创建的 SQL 表查看页面？

> ID：12439687
> 
> 赞同：0
> 
> 时间：2012-09-15T17:47:44.683
> 
> 标签：jquery, sql, ajax, user-interface

我有一个用于用户提交的动态生成表单的 SQL 数据库。它是规范化的，我有一个普通表（user_data）和两个链接到普通表的子表（活动、奖励）。我正在考虑制作一个显示普通表格数据的页面

```
Name Date activityID awardID formID description
foo  5/4  23251      23101   4343   "blah blah" 
```

并且您将单击给定的活动 ID 或奖励 ID 号以打开一个弹出窗口，该窗口将在活动或奖励表中显示链接到该 ID 的数据。像

```
activityID formID activityDescription activityDate
23251      4343   "bladhsh baldshh"   5/4 
```

我还需要使它在分页部分中显示数据，而不是一次显示整个内容......

我是一名初中级 html、Javascript 和 PHP 编码器。我已经制作了一个动态生成的 html/Javascript 表单和一个处理所有提交的数据的 PHP，并且我创建了一个规范化的数据库。我试图弄清楚人们通常如何做这种任务，以及他们使用什么脚本语言。我听说你需要使用 AJAX 和 jQuery，但我对这两种语言都不熟悉。是否很难学习，它们究竟是如何工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T18:26:05.460

您可以使用 PHP 做到这一点。只需将行链接到以awardid 作为参数的.php 文件即可。

AJAX/JavaScript 的工作量更大，维护起来也更困难。你可以Google for [ajax php tutorial](https://www.google.com/search?q=ajax+php+tutorial)找到很多[不错的结果](http://www.w3schools.com/php/php_ajax_database.asp)。

# twitter - 既然 Anywhere 即将被弃用，我如何从 Javascript 实现“使用 Twitter 登录”？

> ID：12439692
> 
> 赞同：2
> 
> 时间：2012-09-15T17:48:41.673
> 
> 标签：twitter, twitter-anywhere

我过去曾使用 Twitter Anywhere 进行过实施。它工作得很好，而且工作得很好，但我现在看到 Twitter 正在[淘汰 Anywhere](https://dev.twitter.com/blog/sunsetting-anywhere)，这个奇妙的 javascript API 将不再可用。我阅读了新文档，发现没有友好的 Javascript API，我发现的唯一信息是[“自己动手”](https://dev.twitter.com/docs/auth/implementing-sign-twitter)。问题是我对如何开发所有这些功能一无所知，我也无法理解 Twitter Anywhere 这样出色的 API 将如何被弃用，而没有类似的新 API 可以真正取代它。

你知道现在 Anywhere 将被弃用的方法是什么吗？有人建议将 Twitter 用于网站，其中在发送推文或执行某些操作时会自动完成登录，但它们都对我没有用，因为我只是使用登录来从用户那里获取一些信息，仅此而已。

提前非常感谢！

# eclipse - 无法在 Ant builder 配置中设置环境 java_home 以在 shell 脚本中访问

> ID：12439695
> 
> 赞同：0
> 
> 时间：2012-09-15T17:49:13.837
> 
> 标签：eclipse, ant, eclipse-plugin

无法在 Ant builder 启动配置中设置环境 java_home。

使用 ant 任务，我刚刚调用了 shell 脚本“run.sh”，其中包含

回声 ${JAVA_HOME}

通过启动配置执行 ant 任务时。它的印刷品是空的……

例如，

在 build.xml 文件中

```
<project name="Sample">
 <target name="test">
 <exec executable="/bin/bash">
 <arg value="run.sh"/>
 </exec> 
</target>
 </project> 
```

假设我有以下包含 JAVA_HOME 的 shell 脚本 run.sh，借助它我需要在 sh 中执行一些操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T11:25:24.523

你还没有给出你的代码片段。无论如何，只在 run.sh 文件中写入 echo $JAVA_HOME。还提供 run.sh 的绝对路径，请查看下面的代码片段。

```
<project name="Sample" default="automate">
<target name="automate">
<exec executable="/bin/bash">
<arg value="/root/test/Work/run.sh"/>
<arg value="/root/test/Work"/>
</exec>
</target> 
```

# matlab - 与matlab的集成示例

> ID：12439698
> 
> 赞同：-1
> 
> 时间：2012-09-15T17:49:31.300
> 
> 标签：matlab, calculus, integral

有人可以告诉我如何在matlab中计算以下内容：

![在此处输入图像描述](../Images/dc22cb2acd3b4f18639bf07dff4192b6.png)

在哪里

```
g = 9.91
As = 1000
z = 10
zv = 30
zD = 10
pz = 999
Az = 500 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T22:24:20.787

好吧，有几种方法可以解决这个问题：

### 分析方法

就像 Rudy 评论的那样，这是一个微不足道的分析积分，因为它[是幂](http://www.ditutor.com/integrals/power_integral.html)(z ¹ ) 的积分。它的不定积分是：

> `F(z) = (g/A[s])(z²/2 - z[v]z)p[z]A[z]`

根据[微积分第二基本定理 ，](http://en.wikipedia.org/wiki/Fundamental_theorem_of_calculus#Second_part)通过将积分界代入 来计算定积分`F(z)`，即：

> `S[T] = F(z[d]) - F(0) = (g/A[s])(z[D]²/2 - z[v]z[D])p[z]A[z]`

在 MATLAB 中，这将是：

```
ST = g / As * zD * (zD / 2 - zv) * pz * Az
ST = 
      -1.2375e+06 
```

### 数值方法

如果由于某种原因，您想通过近似积分来计算数值，您可以使用以下[`trapz`](http://www.mathworks.com/help/matlab/ref/trapz.html)函数：

```
dz = 0.001; z = 0:dz:zD;
y = g / As * (z - zv) * pz * Az;
ST = trapz(z, y)
ST = 
      -1.2375e+06 
```

或者用一个简单的总和做一个更粗略的近似：

```
ST = sum(y * dz)
ST =
      -1.2387e+06 
```

# php - 更新数据库动态php中的表

> ID：12439702
> 
> 赞同：0
> 
> 时间：2012-09-15T17:49:40.000
> 
> 标签：php, mysql, mysql-error-1064

我正在尝试使用 php 更新我的数据库中的表。我有一个函数可以调用我的数据库中设置为可见（可见 = 1）的所有页面并在网站上列出它们。每个页面都有一个单选按钮，如果单选按钮设置为是（值 = 1），则 javascript 调用一个下拉选项。我希望用户能够选择他们的选项，并在他们单击提交按钮时将信息（他们设置的页面名称和位置编号）插入到我的表格中。

下面是代码：

```
<?php
    if (isset($_POST['submit'])) {
// Perform Update

            $name = $_POST['visible_{$page["menu_name"]}'];
            $featured_position = $_POST['featured_position'];

            $query = "UPDATE pages SET 
                    featured_position = {$featured_position}
                    WHERE menu_name = {$name}";
            $result = mysql_query($query);
            // test to see if the update occurred
            if (mysql_affected_rows() == 1) {
                // Success!
                $message = "The page was successfully updated.";
            } else {
                $message = "The page could not be updated.";
                $message .= "<br />" . mysql_error();
            }

        }
?>

<?php if (!empty($message)) {
                echo "<p class=\"message\">" . $message . "</p>";
} ?>

<form action="add_feature2.php" method="post">
<?php echo list_all_pages(); ?>

<input type="submit" name="submit" value="Edit Featured Companies" />
</form>         

<?php
        function get_all_pages() {
        global $connection;
        $query = "SELECT * 
                FROM pages ";
        $query .= "WHERE visible = 1 ";
        $query .= "ORDER BY position ASC";
        $page_set = mysql_query($query, $connection);
        confirm_query($page_set);
        return $page_set;
    }

function list_all_pages(){
$output = "<ul>";
//$output .= $counter = 0;
$page_set = get_all_pages();
while ($page = mysql_fetch_array($page_set)) {
$output .= "<li>{$page["menu_name"]}</li>";

$output .= "&nbsp;&nbsp;<div id=\"$page[id]\" style='display: none'><select name='featured_position'><option value='1'>1</option><option value='2'>2</option><option value='3'>3</option></select></div>";

$output .= "&nbsp;&nbsp;<input onclick=\"javascript:document.getElementById('$page[id]').style.display = 'none';\" type=\"radio\" name=\"visible_{$page["menu_name"]} \" value=\"0\" checked=\"checked\" /> No <input onclick=\"javascript:document.getElementById('$page[id]').style.display = 'block';\" type=\"radio\" name=\"visible_{$page["menu_name"]} \"value=\"1\" /> Yes";

//$output .= $counter = $counter+1;

    }
$output .= "</ul>";
return $output;
}   

?> 
```

这是网站的链接：[http ://www.firetreegraphics.com/widget_corp-final/add_feature2.php](http://www.firetreegraphics.com/widget_corp-final/add_feature2.php)

****** *** ** *** ** *** ** *** ****更新****** ** *** ** *** ** *** ** *** ** *** *******

 **我将单选按钮上的名称属性更改为计数器。我将单选按钮名称属性设为变量的原因是因为我动态创建了单选按钮，并且每组单选按钮都必须具有唯一的名称，否则所有组都链接在一起。

```
$name = $_POST['{$counter}'];
            $featured_position = $_POST['featured_position'];

            $query = "UPDATE pages SET 
                    featured_position = '{$featured_position}'
                    WHERE menu_name = '{$name}'";
            $result = mysql_query($query);
                            //echo($query);
                            var_dump($_REQUEST);

function list_all_pages(){
$output = "<ul>";
$counter = 0;
$page_set = get_all_pages();
while ($page = mysql_fetch_array($page_set)) {
$output .= "<li>{$page["menu_name"]}</li>";

$output .= "&nbsp;&nbsp;<div id=\"$page[id]\" style='display: none'><select name='featured_position'><option value='1'>1</option><option value='2'>2</option><option value='3'>3</option></select></div>";

$output .= "&nbsp;&nbsp;<input onclick=\"javascript:document.getElementById('$page[id]').style.display = 'none';\" type=\"radio\" name=\"$counter\" value=\"0\" checked=\"checked\" /> No <input onclick=\"javascript:document.getElementById('$page[id]').style.display = 'block';\" type=\"radio\" name=\"$counter\" value=\"1\" /> Yes";

$counter = $counter+1;

    }
$output .= "</ul>";
return $output;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T17:59:05.063

我希望您需要引用变量：

```
 $query = "UPDATE pages SET  
      featured_position ='{$featured_position}'
      WHERE menu_name = '{$name}'"; 
```

**然而**

你真的应该考虑移动到`PDO`or `mysqli_*`。它不仅可以帮助您编写更安全的代码（您的代码中目前存在 SQL 注入漏洞），而且它会为您处理所有引用。

编辑：

```
$output .= "&nbsp;&nbsp;<div id=\"$page[id]\" style='display: none'><select name='featured_position_{$counter}'><option value='1'>1</option><option value='2'>2</option><option value='3'>3</option></select></div>";              
$output .= "&nbsp;&nbsp;<input onclick=\"javascript:document.getElementById('$page[id]').style.display = 'none';\" type=\"radio\" name=\"visible_{$counter}\" value=\"0\" checked=\"checked\" /> No <input onclick=\"javascript:document.getElementById('$page[id]').style.display = 'block';\" type=\"radio\" name=\"visible_{$counter}\" value=\"1\" /> Yes"; 
```

我已将单选按钮重命名为“visible_”；这将允许您在更新查询中使用页面的 ID。我也重命名了选择，所以每一行都有自己的选择，称为“featured_position_”。

我认为你将不得不有一个循环来检查每个值：

```
$page_set = get_all_pages();             
while ($page = mysql_fetch_array($page_set)) {
    $id = $_POST["visible_" . $page["id"]];
    $featured_position = $_POST['featured_position_' . $page["id"];  

    $query = "UPDATE pages SET         
        featured_position = '{$featured_position}'        
        WHERE id = '{$name}'"; 
```

我*认为*这应该足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T17:58:54.940

首先，PHP mysql API 已被弃用并且很大程度上“不推荐”。你应该使用 MySQLi，你不必这样做，但它几乎相同，这就是我建议它的原因。

当我第一次查看时，我在您的一个查询中看到了这个问题：

```
 "UPDATE pages SET 
  featured_position = {$featured_position}
  WHERE menu_name = {$name}"; 
```

大概`{$name}`是一个字符串。因此，您的查询以 while 结尾，`WHERE menu_name = string`应该用引号括起来。

```
 "UPDATE pages SET 
  featured_position = {$featured_position}
  WHERE menu_name = '{$name}' "; 
```**

# c# - 移动到文本框中文本的末尾

> ID：12439709
> 
> 赞同：1
> 
> 时间：2012-09-15T17:50:19.267
> 
> 标签：c#, winforms

我想让文本框始终聚焦。所以我决定添加`LostFocus`处理程序

```
this.textBox1.LostFocus += new System.EventHandler(delegate(object sender, System.EventArgs e) 
                                                   {
                                                      this.textBox1.Focus();
                                                   }); 
```

但是当我按下表单上的按钮然后再次开始写入文本框时 - 它开始在文本框中的当前文本之前添加符号。例如，如果我在文本框中有文本`abcd`，然后按表单上的按钮并再次开始写作，`1234`我在文本框中有文本`1234abcd`。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T17:54:52.397

```
this.textBox1.Focus();
this.textBox1.Select(textBox1.Text.Length, 0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T17:58:12.783

```
this.textBox1.LostFocus += new System.EventHandler(delegate(object sender, System.EventArgs e) 
                                                   {
                                                      this.textBox1.Focus();
                                                       this.textBox1.AppendText("") ;
                                                   }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T17:59:18.430

只需使用这样的选择方法：

```
 void textBox1_LostFocus(object sender, EventArgs e)
    {
        textBox1.Focus();
        textBox1.Select(textBox1.Text.Length, 0);
    } 
```

# html - Bash脚本在字符串指定的点插入文件中的数据

> ID：12439711
> 
> 赞同：1
> 
> 时间：2012-09-15T17:50:54.193
> 
> 标签：html, regex, bash, replace

我想构建一个bash（或其他）脚本，运行时将在它自己的目录（递归）中搜索带有html扩展名的文件，并在其中更改特定标签之间的所有代码以及来自另一个（特定）的内容文件。

我这样做是因为我需要在所有页面上进行导航，**但**每个页面都有一些小的变化，稍后会处理，所以这个脚本可以帮助我先获得基础，然后我可以改变休息。

我特别希望在本地使用脚本来执行此操作，而不是用 html 中的 javascript 或 php 代码替换它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T04:45:19.650

这应该让你开始。它将直接编辑文件，因此请进行备份或`--in-place`暂时删除开关。创建以下四个文件：

1.  替换.sh：

    ```
    #!/bin/bash
    find -name '*.html' | while read FILE; do
            sed --in-place -f replace.sed "$FILE"
    done 
    ```

2.  替换.sed：

    ```
    /{{NAV}}/{
        r replacement
        d
    } 
    ```

3.  替换：

    ```
    <ul>
        <li>Here</li>
        <li>There</li>
    </ul> 
    ```

4.  文件.html

    ```
    <html>
    <head></head>
    <body>
        <nav>
                {{NAV}}
        </nav>
        <h1>Welcome to Whatever!</h1>
    </body> 
    ```

使`replace.sh`可执行文件 ( `chmod a+x replace.sh`)。通过运行`replace.sh`并检查内容来测试它`file.html`

```
$ ./replace.sh && cat file.html
<html>
<head></head>
<body>
<nav>
<ul>
<li>Here</li>
<li>There</li>
</ul>
</nav>
<h1>Welcome to Whatever!</h1>
</body> 
```

占位符`{{NAV}}`在其自己的行上很重要，因为 sed 脚本将删除该行的内容。如果“{{NAV}}”出于某种原因可能出现在您的文件中，则应更改占位符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T17:13:52.450

基于 Ben Graham 提供的巨大帮助以及更多研究，这里是我正在寻找的答案。

您将需要一个文件作为脚本 ( `replace.sh`)，另一个文件作为替换 ( `replacementFile`)，以及任何其他数量的文件将应用替换。

剧本。`replace.sh`

```
#!/bin/bash
find . -name "*.html" | while read FILE; do
    sed -i '' '/{{endSTRING}}/r replacementFile
    /{{startSTRING}}/,/{{endSTRING}}/d' ${FILE}
done 
```

就是这样。不过，一些额外的点。`replacementFile`最后应该有一个空行，否则它将与更改文件的下一行连接。`-i ''`是否不提供备份；如果你想要它们，只需在引号之间放置一些东西，它就会复制原始文件，并附加你选择的任何内容。

# c++ - 控制台程序读取文本文件行，执行 Levenshtein 并输出文本文件

> ID：12439714
> 
> 赞同：0
> 
> 时间：2012-09-15T17:51:35.957
> 
> 标签：c++

我有一个按行长降序排列的大量字符串文本文件。我想将整个东西加载到一个字符串数组中，对每个元素执行 Levenshtein，创建一个组 UUID 并将其放入一个数组中。所以第二个数组将是一个哈希表，其中键是前一个字符串的内存地址，值是 UUID。

我想在迭代字符串时执行指针运算以获得最佳性能。

在迭代地进行 levenshtein ga-zillions 之后，我想填充另一个文本文件，其内容很简单，即组的 UUID、冒号和原始文本文件中的行。

我有 wikibooks 中的 levenshtein 算法：

```
template<class T> unsigned int levenshtein_distance(const T &s1, const T & s2) {
    const size_t len1 = s1.size(), len2 = s2.size();
    vector<unsigned int> col(len2+1), prevCol(len2+1);

    for (unsigned int i = 0; i < prevCol.size(); i++)
            prevCol[i] = i;
    for (unsigned int i = 0; i < len1; i++) {
            col[0] = i+1;
            for (unsigned int j = 0; j < len2; j++)
                    col[j+1] = min( min( 1 + col[j], 1 + prevCol[1 + j]),
                                                            prevCol[j] + (s1[i]==s2[j] ? 0 : 1) );
            col.swap(prevCol);
    }
    return prevCol[len2];
} 
```

我已经完成了一些 C++、一些 C、大量的 Obj-C。我使用的是 Windows 7。您如何建议我这样做？什么样的字符串数组？如何转换文本文件中的文本字符串以供提供的函数使用？

我基本上是在寻找尽可能多的技巧，因为字符串让我在 C++ 中感到困惑。哦，C++ 也是如此！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T18:41:04.560

对于纯粹的访问时间，您将很难击败完整的内存读取，然后通过单程对其进行索引，构建一个指针列表并在遇到的每个 CR/LF 处硬写一个空终止符。行号将是您存储所有这些指针的容器的索引，为此我可能会使用`std::deque<>`.

boost:: 伙计们可能会更进一步，但为了快速访问，它很难击败一大堆内存和一大堆索引它的指针。当然，这整个事情都假设你可以*把*它放进内存。如果你不能，这会变得更加复杂，但如果你可以（并且可以假设你总是可以） malloc/walk-and-terminate/push-ptr-into-deque 看起来很干净。为了真正让它冒烟，我还会用指针存储每个字符串的长度，所以你`std::deque<>`会是`struct { char* ptr; size_t len; }`. 这样做会消除大量不需要的 strlen() 等。它还将消除对任何内容进行空终止的需要。

# c# - 在图像元素内移动图像

> ID：12439715
> 
> 赞同：0
> 
> 时间：2012-09-15T17:51:36.897
> 
> 标签：c#, image, windows-phone-7, expression-blend

我有一个图像元素，其中显示了图像。如何在不移动元素本身的情况下移动该元素内的图像？我想实现运动图像效果。

这是我的 XAML：

```
<Image x:Name="tnail" Margin="0,0,0,90" Stretch="UniformToFill" Source="/Img/Apl4.jpg"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T06:37:18.530

In order to move the image, try applying a RenderTransform:

```
<Image x:Name="tnail" Margin="0,0,0,90"
       Stretch="UniformToFill" Source="/Img/Apl4.jpg">
  <Image.RenderTransform>
    <TranslateTransform OffsetX="10"/>
  </Image.RenderTransform>
</Image> 
```

You can also access this in code-behind to set the offset

```
var trans = tnail.RenderTransform as TranslateTransform;
trans.OffsetX = 20; 
```

# extjs - 禁用按钮，直到用户单击网格上的记录

> ID：12439722
> 
> 赞同：0
> 
> 时间：2012-09-15T17:52:59.407
> 
> 标签：extjs, extjs4, sencha-architect

我有一个网格面板，当我单击网格的一行（记录）时，在它下面，单击按钮会出现一个窗口。

但我想要做的是**禁用**按钮**，除非**用户单击网格的记录（一行）。

我怎样才能做到这一点 ？

我正在使用 Sencha-Architech 2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:55:11.397

使用网格的[selectionchange](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.panel.Table-event-selectionchange)事件：

> 发生选择更改后触发

示例：http: [//jsfiddle.net/TkZsm/](http://jsfiddle.net/TkZsm/)

# box-api - 将文件夹移动到同一个父级返回 400 - 错误请求

> ID：12439723
> 
> 赞同：0
> 
> 时间：2012-09-15T17:53:35.793
> 
> 标签：box-api

尝试将文件夹移动到相同的父 ID 会返回 400（错误请求）：“文件夹移动会创建循环文件夹结构。” 这是故意的吗？看起来它实际上应该是一个 NOP 并成功返回。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T23:54:45.580

这是一个已知的问题。我们应该将此视为幂等并返回 200。我们将在不久的将来解决此问题。

# c# - WebClient 下载许多文件错误 — Invalid URI: The URI is empty

> ID：12439728
> 
> 赞同：-4
> 
> 时间：2012-09-15T17:54:00.183
> 
> 标签：c#, last.fm, webclient

我想从 last.fm 下载所有专辑艺术家，每个封面都命名为专辑标题。但是当启动程序时，我得到一个错误：“无效的 URI：URI 是空的。”

程序代码：

```
public static void GetXML()
        {
            string url = @"http://ws.audioscrobbler.com/2.0/?method=artist.gettopalbums&artist=radiohead&api_key=b25b959554ed76058ac220b7b2e0a026";
            string albumName = String.Empty;
            string coverLink = String.Empty;
            int[] numArr = new int[30];

            for (int x = 1; x < numArr.Length; x++)
            {
                numArr[x] = x;   
            }

           XDocument xml = XDocument.Load(url);

           foreach (var c in numArr)
           {
               var name = xml.XPathSelectElements(String.Format("//album[@rank='{0}']", c))
                             .Select(x => x.Element("name").Value)
                             .ToList();
               foreach (var item in name)
               {
                   albumName = item.ToString();
               }

               var covers = xml.XPathSelectElements(String.Format("//album[@rank='{0}']/image[@size='extralarge']", c))
                          .Select(x => x.Value)
                          .ToList();
               foreach (var item in covers)
               {
                   coverLink = item.ToString();
               }

               WebClient web = new WebClient();
               web.DownloadFileCompleted += new System.ComponentModel.AsyncCompletedEventHandler(web_DownloadFileCompleted);
               web.DownloadFileAsync(new Uri(coverLink), @"X:\Code\T\" + albumName + ".jpg");
           }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T18:45:04.157

您将数组初始化为

```
for (int x = 1; x < numArr.Length; x++)
{
      numArr[x] = x;   
} 
```

但永远不要设置使用的值`numArr[0]`（`foreach (var c in numArr)`并且没有排名= 0的专辑）。

这不是更容易吗？

```
 var albums = xml.Descendants("album")
        .Select(a => new
        {
            Rank = (int)a.Attribute("rank"),
            Name = a.Element("name").Value,
            ImageUrl = a.XPathSelectElement("image[@size='extralarge']").Value
        })
        .ToList(); 
```

# jquery - 链接在 ajaxed 内容中不起作用

> ID：12439729
> 
> 赞同：0
> 
> 时间：2012-09-15T17:54:15.033
> 
> 标签：jquery

我有一个 jQuery 脚本，它非常适合加载具有缓动效果的网页的不同部分。基本上每个部分都有一个唯一的 id，一个部分显示，而其他部分用 css 隐藏。当加载一个新部分时，内容会出现一个很好的过渡，我相信你知道类型。

该脚本还支持通过 ajax（即另一个页面）加载（外部）内容，因此我可以在我的站点中加载页面 external.html。问题是，新页面上的 ajaxed 内容中的链接不起作用。该脚本通过使用一个选择器来工作，该选择器包裹在要产生过渡效果的链接周围。例如脚本以这种方式初始化：

```
$(document).ready(function (){  
  //Usage
  $("#menu ul li").slidingPage({
        easing : 'easeInOutQuint',
        speed : 800,
        slideScroll : 'horizontal', 
        top : 0, 
        navigation: {
            show: false,
            nestedPagesFlows: true
        }
  });
}); 
```

#menu ul li 中的所有内容都会产生效果，即使在外部页面上也是如此。但是，外部页面的实际内容中的链接有问题。

我在这里有一个非常基本的例子`snipped`。“关于”部分位于主页内，它不是一个单独的页面，因此如果您单击“关于”，然后按部分内容中的主页链接，它将带您回到主页。如果你去外部页面，这显然是一个单独的页面，然后按内容中的主页链接，它不起作用，但菜单中的主页链接可以：|

我已经为 ajaxed 内容链接尝试了第二个功能，但到目前为止还没有运气！我想做的就是指定一个`a class`可以在外部内容中工作的内容，并允许从那里导航网站，而不仅仅是从菜单中导航。

任何帮助将不胜感激，感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:58:48.657

将此行更改为此

```
<a class="shoots" href="#homepage" rel="homepage" title="home">Home</a> 
```

基本上你的href是错误的。您需要在外部链接主页 href 中包含 href="#homepage"。希望能帮助到你。

# iphone - sqlite3更新在ios中不起作用

> ID：12439751
> 
> 赞同：1
> 
> 时间：2012-09-15T17:57:09.917
> 
> 标签：iphone, ios, sqlite

我正在尝试更新 sqlite 数据库。这是我正在使用的代码

```
if(sqlite3_open([dbPath UTF8String], &database) == SQLITE_OK)
    {

        const char * sql;
        sql = "update tms  set name = ?,place=?,stars=?  where id=?";

        sqlite3_stmt *selectStatement;

        //prepare the select statement
        int returnValue = sqlite3_prepare_v2(database, sql, -1, &selectStatement, NULL);
        if(returnValue == SQLITE_OK)
        {
            sqlite3_bind_text(selectStatement, 1,[[payloadDict  valueForKey:@"userName"] UTF8String] , [[payloadDict  valueForKey:@"userName"] length],SQLITE_STATIC);
            sqlite3_bind_text(selectStatement, 2,[[payloadDict  valueForKey:@"locName"] UTF8String], [[payloadDict  valueForKey:@"locName"] length],SQLITE_STATIC);
            sqlite3_bind_int(selectStatement, 3, [[payloadDict  valueForKey:@"starCount"] integerValue]);
            sqlite3_bind_int(selectStatement, 4, [[payloadDict  valueForKey:@"rowid"] integerValue]);
            int success = sqlite3_step(selectStatement);
            if(success == SQLITE_DONE)
            {
                isExist = TRUE;
            }
            else {
                //NSAssert1(0,@"Error: Failed to Update %s",sqlite3_errmsg(database));
            }
    } 
```

执行 sqlite3_step 时，我得到值 101 作为成功。但是数据库没有用新值更新。我怎样才能正确地做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T18:52:34.817

我同意@ott 的出色建议，即确保数据库位于`Documents`目录中（尽管我认为这会给您带来错误）。

我还会仔细检查返回的值，`[[payloadDict valueForKey:@"rowid"] integerValue]`以确保它与`id`表中现有行之一的列中的值匹配。如果它不匹配任何内容，即使没有更新`sqlite3_step`也会返回。`SQLITE_DONE`

另请注意，您可能还希望确保将`id`值存储为数字值，而不是文本字符串，因为 sqlite 在让您将值存储为您在第一次插入数据时最初指定的任何数据类型方面非常松懈，无论如何表已定义），并且我不确定如果`WHERE`数据最初存储为文本值，则查找数字匹配的子句是否会成功。如果您使用`id`类似的列定义`id INTEGER PRIMARY KEY AUTOINCREMENT`，系统会自动为您定义值，这不是问题，但如果您手动填充`id`列，可能需要仔细检查。（通常，它在将字符串解释为动态数字方面做得很好，但有一些奇怪的情况是有问题的：例如，如果您将字符串值“5,127”存储在数字字段中，如果您稍后再尝试要检索其数值，sqlite 将不知道如何处理文本值“5,127”中的逗号，并将数值解释为 5，而不是 5127。）

# python - 设置全局输出精度python

> ID：12439753
> 
> 赞同：14
> 
> 时间：2012-09-15T17:57:24.827
> 
> 标签：python, formatting

我编写了一个函数库来简化我的工程作业，并在 python 解释器中使用它们（有点像计算器）。一些返回矩阵，一些返回浮点数。

问题是，它们返回的小数太多。例如，目前，当一个数字为 0 时，我得到一个非常小的数字作为返回（例如 6.123233995736766e-17）

我知道如何单独格式化输出，但这需要为我在解释器中键入的每一行添加一个格式化程序。我正在使用python 2.6。

**有没有办法为会话设置全局输出格式（精度等）？**

*注意：对于 scipy 函数，我知道我可以使用

```
scipy.set_printoptions(precision = 4, suppress = True) 
```

但这似乎不适用于不使用 scipy 的函数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-15T22:25:24.937

一种想法是添加`from __future__ import print_function`（在最顶部）然后覆盖标准打印功能。这是一个非常简单的实现，它打印小数点后正好两位数的浮点数：

```
def print(*args):
    __builtins__.print(*("%.2f" % a if isinstance(a, float) else a
                         for a in args)) 
```

您需要更新输出代码以使用打印功能，但至少它是通用的，而不是在每个地方都需要自定义格式规则。如果要更改格式的工作方式，只需更改自定义`print`函数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-15T21:25:10.223

您所看到的是十进制浮点数只能用二进制浮点来*近似。*请参阅[浮点算术：问题和限制](http://docs.python.org/tutorial/floatingpoint.html)。

您可以在库中放置一个模块级变量，并将其用作第二个参数`round()`来舍入模块中函数的返回值，但这相当激烈。

如果您使用[ipython](http://ipython.org/)（我建议交互式使用，比常规解释器*好得多*），您可以使用 'magic' 函数[`%precision`](http://ipython.readthedocs.io/en/stable/interactive/magics.html#magic-precision)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-07-18T22:43:33.380

使用 numpy，您可以使用该`set_printoptions`方法（[http://docs.scipy.org/doc/numpy/reference/generated/numpy.set_printoptions.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.set_printoptions.html)）。

例如：

```
import numpy as np
np.set_printoptions(precision=4)
print(np.pi * np.arange(8)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T18:27:08.503

您可以为您的数字和矩阵结果添加**str**方法（假设您还没有它们），并使它们始终使用相同的 .format 或 %f。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-23T20:53:08.093

在@Blckknght 解决方案的基础上，我们可以使用正则表达式来做一些更强大的事情。

```
import re

round_to = 4

def str_round(match):
    return str(round(eval(match.group()), round_to))

def print(*args, **kwargs):
    if len(args):
        args = list(args)
        for i, text in enumerate(args):
            text = str(text)
            if re.search(r"([-+]?\d*\.?\d+|[-+]?\d+)", text):
                args[i] = re.sub(r"([-+]?\d*\.?\d+|[-+]?\d+)", str_round, text)

    return __builtins__.print(*args, **kwargs) 
```

现在以下打印语句中的数字将被四舍五入

```
>>> print(f"The number {1/3} is in this sentence.")
The number 0.3333 is in this sentence. 
```

# preg-match - 我如何 preg_match 这个？

> ID：12439755
> 
> 赞同：0
> 
> 时间：2012-09-15T17:57:53.983
> 
> 标签：preg-match

我需要帮助来编写一个 preg_match 以将 0.85 和 1.00 从中提取到 php 变量中。试了一整天都没成功！

```
Chop Suey</a></td><td align="right">0.85</td><td align="right">1.00</td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T18:18:31.517

这将为您提供指定字符串中的 0.85 和 1.00，分别存储在`$values[1]`和`$values[2]`中。

```
$values = array();
preg_match('/Chop Suey<\/a><\/td><td align="right">([\d]+\.[\d]+)<\/td><td align="right">([\d]+\.[\d]+)<\/td>/', 'Chop Suey</a></td><td align="right">0.85</td><td align="right">1.00</td>', $values);
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T03:01:04.070

你也可以用它更有活力。与其静态寻找“杂碎”，不如寻找其他对齐方式。

这是一个示例。（非常基本）。

```
preg_match("/\d+.\d+/",$content,$output); 
```

（以上匹配，会以正确的顺序为您提供所需的所有小数。）

```
$output[0] (is the array you can loop)

for the exact numbers above, you'd use $output[0][0] and $output[0][1] 
```

如这里的正则表达式示例[所示](http://lumadis.be/regex/test_regex.php?id=1301)

# bash - Bash 命令路由故障

> ID：12439762
> 
> 赞同：2
> 
> 时间：2012-09-15T17:58:53.940
> 
> 标签：bash, shell, coffeescript

鉴于此（以及更多...）：

```
compile_coffee() {
    echo "Compile COFFEESCRIPT files..."
    i=0
    for folder in ${COFFEE_FOLDER[*]}
    do
        for file in $folder/*.coffee
        do
            file_name=$(echo "$file" | awk -F "/" '{print $NF}' | awk -F "." '{print $1}')
            file_destination_path=${COFFEE_DESTINATION_FOLDER[${i}]}
            file_destination="$file_destination_path/$file_name.js"
            if [ -f $file_path ]; then
                echo "+ $file -> $file_destination"
                $COFFEE_CMD $COFFEE_PARAMS $file > $file_destination #FAIL
                #$COFFEE_CMD $COFFEE_PARAMS $file > testfile
            fi
        done
        i=$i+1
    done
    echo "done!"
    compress_javascript
} 
```

澄清一下，除了#FAIL 行之外的所有内容都可以正常工作，如果我做错了什么，请告诉我，我遇到的问题是：

*   该行执行并执行它必须做的事情，但不要写我放在“file_destination”中的文件。
*   如果删除该路由中的文件夹（它与此脚本相关，见下文），bash 会抛出错误，指出该文件夹不存在。
*   如果我再次创建文件夹，则没有错误，但也没有文件。
*   如果我将 $file_destination 更改为“testfile”，它会创建具有正确内容的文件。
*   $file_destination 路径没问题-如您所见，我的脚本与它相呼应-
*   如果我回显整行，则使用参数复制确切的命令并将其执行到脚本所在目录中的 shell 上，它可以工作。

我不知道这是怎么回事，想了两个小时......

脚本输出（真实路径）：

```
(alpha)[pyron@vps herobrine]$ ./deploy.sh compile && ls -l database/static/js/
===============================
=== Compile ===
Compile COFFEESCRIPT files...
+ ./database/static/coffee/test.coffee -> ./database/static/js/test.js  
done!
Linking static files to django staticfiles folder... done!
total 0 
```

完成命令：

```
coffee --compile --print ./database/static/coffee/test.coffee > ./database/static/js/test.js 
```

我错过了什么？

**编辑**我在这方面取得了一些进展。在 shell 中，如果我停用 python virtualenv，脚本可以工作，但如果我从脚本中调用 deactivate，它会说找不到命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T12:03:23.567

假设目标文件的名称中没有空格，目录存在等。我会尝试添加 2>&1 例如

```
$COFFEE_CMD $COFFEE_PARAMS $file > testfile 2>&1 
```

编译器可能会将所需的输出和/或编译消息放在 stderr 而不是 stdout 上。您可能还想输入 coffee 的完整路径，例如 /usr/bin/coffee 而不仅仅是编译器名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:07:16.607

发现问题不在于 bash 脚本本身。几行之后，部署脚本从 django 执行 collectstatic 方法。注意到直到那一行文件在那里，我开始读到集体有一个缓存系统。一个非常奇怪的 IMO，因为我必须删除所有静态文件并从头开始才能使脚本正常工作。

所以...问题不在于 bash 脚本，而在于 django 缓存系统。无论如何，我不会给我声誉。

完整的部署脚本在这里：[https](https://github.com/pyronhell/deploy-script-boilerplate) ://github.com/pyronhell/deploy-script-boilerplate如果您可以改进它，欢迎大家。

干杯。

# c# - html 路由助手正在调用存储数据

> ID：12439764
> 
> 赞同：0
> 
> 时间：2012-09-15T17:58:58.150
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

这对我来说没有任何意义；我认为约束只会在用户点击链接时受到影响，而不是在创建链接时受到影响。我在这里错过了什么吗？

由于页面上有大量链接，打开一个新的数据上下文并为每个路由链接运行查询是一个巨大的性能缺陷。有没有办法设置所有 Html.RouteLink 助手（和其他）在创建链接时不遇到约束？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T02:14:25.177

每次检查路由约束时都不应该进行数据库调用，至少在没有适当缓存的情况下是这样。

它实际上也很有意义：

```
routes.MapRoute("Test1", "test1/{value}", 
    new { controller = "Home", Action = "Index" },
    new { value = "^[0-9]+$" }
);
routes.MapRoute("Test2", "test2/{value}",
    new { controller = "Home", Action = "Index" }
); 
```

现在，如果您在生成时不检查约束，它将始终使用路由`Test1`来生成 url，但是当用户单击它时它不会找到任何匹配的路由。

# java - 如何评估包含幂 (2^3^5) 的 java 中的表达式

> ID：12439765
> 
> 赞同：1
> 
> 时间：2012-09-15T17:58:58.843
> 
> 标签：java, pseudocode

我在 java 中实现了一个控制台计算器，它获取一个表达式，然后将其转换为后缀，然后计算并打印结果。

但是当我输入包含彼此相邻的两个幂（2^3^5 等）的表达式时，我遇到了问题。它转换`23^5^`为后缀表达式，但应该转换`35^2^`，因为对于权力，它必须从右开始。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T18:24:26.427

指数运算符具有从右到左的结合性。它需要首先进行深入评估。这个[例子](http://en.wikipedia.org/wiki/Operator_associativity#A_detailed_example)详细解释了如何处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T18:21:07.287

它实际上应该转换为 235^^。

# php - 发送基于 MySQL 日期的自动电子邮件

> ID：12439770
> 
> 赞同：0
> 
> 时间：2012-09-15T17:59:21.180
> 
> 标签：php, mysql, logic

我希望能够根据 mysql 日期自动发送电子邮件。我知道我可以使用 Crontabs 安排它们，但问题是 Crontabs 只指定天、月、周等 - 它不够具体..

MySQL 表中填充了不同的日期。我想要它，以便我可以在特定记录日期起 3 个月时自动发送电子邮件。

有谁知道我能做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T18:01:40.320

安排一个每天运行一次的 cron，检查当天需要发送电子邮件的记录。

想象一下，您有一个类似`notify_at`日期时间的列 - 然后您的 cron 基本上每天都会执行

`SELECT * FROM records WHERE notify_at = DATE(NOW())`

您的 cron 可以存储在`/etc/cron.d`

`/etc/cron.d/send_reminders`：

```
# run once a day at 1AM
0 1 * * * someuser /path/to/your/script 
```

脚本的内容是您的逻辑，在伪代码中：

```
results = fetch_by_sql("SELECT * FROM records WHERE notify_at = DATE(NOW()) AND last_notified_at IS NULL");
foreach(results as record) {
  send_email(record.recipient, "Your subject", "Your body");
  /* mark the record as notified so we dont ever send multiple emails */
  update_sql("UPDATE records SET last_notified_at = NOW() WHERE id = " + record.id);
} 
```

# jquery - 文件上传后如何使用变量重定向

> ID：12439771
> 
> 赞同：0
> 
> 时间：2012-09-15T17:59:23.970
> 
> 标签：jquery, redirect, drag-and-drop

我有使用 jquery.filedrop.js 的拖放 jquery 脚本，并且在同一个资产文件夹中有一个 script.js。Script.js 似乎是上传完成后显示结果的文件。上传完成后如何让它重定向到另一个页面？下面是script.js

```
$(function(){
var myname = document.getElementById("myname").value;
var myid = document.getElementById("myid").value;
var mycat = document.getElementById("mycat").value;
var dropbox = $('#dropbox'),
    message = $('.message', dropbox);

dropbox.filedrop({
    // The name of the $_FILES entry:

    paramname:'pic',
    maxfiles: 100,
    maxfilesize: 2,
    //url: "post_file.php?id=33",
    url: "post_file.php?myid=" + myid + "&mycat=" + mycat + "&myname=" + myname ,

    uploadFinished:function(i,file,response){
        $.data(file).addClass('done');
        // response is the JSON object that post_file.php returns
    },

    error: function(err, file) {
        switch(err) {
            case 'BrowserNotSupported':
                showMessage('Your browser does not support HTML5 file uploads!');
                break;
            case 'TooManyFiles':
                alert('Too many files! Please select 5 at most! (configurable)');
                break;
            case 'FileTooLarge':
                alert(file.name+' is too large! Please upload files up to 2mb (configurable).');
                break;
            default:
                break;
        }
    },

    // Called before each upload is started
    //beforeEach: function(file){
        //if(!file.type.match(/^image\//)){
            //alert('Only images are allowed!');

            // Returning false will cause the
            // file to be rejected
            //return false;
        //}
    //},

    uploadStarted:function(i, file, len){
        createImage(file);
    },

    progressUpdated: function(i, file, progress) {
        $.data(file).find('.progress').width(progress);
    }

});

var template = '<div class="preview">'+
                    '<span class="imageHolder">'+
                        '<img />'+
                        '<span class="uploaded"></span>'+
                    '</span>'+
                    '<div class="progressHolder">'+
                        '<div class="progress"></div>'+
                    '</div>'+
                '</div>';

function createImage(file){

    var preview = $(template), 
        image = $('img', preview);

    var reader = new FileReader();

    image.width = 100;
    image.height = 100;

    reader.onload = function(e){

         //e.target.result holds the DataURL which
         //can be used as a source of the image:

        image.attr('src',e.target.result);
    };

    //reader.onload = window.parent.location.href="page2.htm";

    // Reading the file as a DataURL. When finished,
    // this will trigger the onload function above:
    reader.readAsDataURL(file);

    message.hide();
    preview.appendTo(dropbox);

    // Associating a preview container
    // with the file, using jQuery's $.data():

    $.data(file,preview);
}

function showMessage(msg){
    message.html("test")
} 
```

问题是上传完成后如何使用变量重定向。我试图在 var 模板区域中放置一些重定向代码...不

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T18:03:46.923

内部`uploadFinished`：

```
window.location.href = <some vars that create a string>; 
```

那是你要找的吗？

# iphone - 评估当前视图是否消失的布尔变量？

> ID：12439773
> 
> 赞同：0
> 
> 时间：2012-09-15T17:59:36.950
> 
> 标签：iphone, ios, static, nstimer

我正在使用一个 NSTimer，它在多项选择测验应用程序中运行时间从 15 秒开始。该应用程序有两种可能的结果。时间可能会减少到零，并显示不正确的答案视图，在这种情况下计时器无效/停止，其时间的静态整数将重置为 15 以用于下一个问题。

但是，另一个可能的结果是在时间耗尽之前选择了一个答案，在这种情况下，我使用方法 viewWillDisappear 来触发进一步的操作。我的问题是我无法通过此方法重置时间的静态整数，因为它是在上面的方法中声明的。我尝试在 .h 文件中声明它，但存在问题，因为整数是静态的。

我想知道是否有一个布尔表达式来评估当前视图是否已经消失，因为这样我可以将所有内容保持在同一个方法中并能够重置静态整数的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T04:57:42.520

首先，如果您的计时器变量是该类的本地变量，则不必将其声明为`static`. 其次，您有两个机会从 viewController:`viewWillDisappear`和`viewDidDisappear`. 最后，如果您需要知道视图属性是否已更改，可以通过 KVO 方法进行。您会遇到的问题是，如果视图真的消失了，那么当您引用它时，视图对象可能已经吐了。如果没有更多信息，就无法判断您真正遇到了什么问题。

此外，一旦您使计时器无效，您就不能再使用它。您必须创建一个新计时器。

# video - 视频流媒体网站开发

> ID：12439775
> 
> 赞同：13
> 
> 时间：2012-09-15T18:00:07.390
> 
> 标签：video, streaming, video-streaming, html5-video

这是我有生以来第一次从事全面的视频网站开发工作，对流媒体技术和相关的东西一无所知。

我对 html、css、js、php 和其他视频或任何与艺术相关的工具没有任何问题，并且对 JW Player 也很熟悉。

现在我的困惑如下

1.  如何创建流媒体视频（首选 HTML5 以支持所有最新平台和设备）
2.  我需要流媒体服务器来运行视频网站吗？或者只是流媒体视频就可以了，可以托管在普通的专用服务器上？
3.  创建完整标记的视频网站的最佳方法是什么。wordpress 是大型观众的好解决方案吗？（因为我对wordpress非常熟悉）
4.  在开发过程中我应该提到什么。

我真的像以前一样从你的专家那里得到很大的帮助。

非常感谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-20T14:22:16.373

如果您使用的是 JW PLayer，HTML5 是自动的，并且他们还提供自己的流媒体平台 bitsontherun，它将自动解决您的大部分问题。然而，它并不便宜。否则，您需要考虑许多问题：

*   您每天将服务多少个流
*   总带宽
*   你想保护视频不被盗取、直接下载、在第三方网站或应用程序中使用（增加你的带宽成本）

我不使用 wordpress，但在阅读不同的内容时，似乎 wordpress 经常与较新的视频技术存在兼容性问题。如果你已经可以做 php , css, html 我会远离那个

# iphone - 在我的屏幕上安装 iPhone 5 模拟器？

> ID：12439778
> 
> 赞同：34
> 
> 时间：2012-09-15T18:00:37.523
> 
> 标签：iphone, ios, ios6

Apple 似乎只包含了 iPhone 5（4 英寸）模拟器的视网膜版本。这很棒，但是太大了，不适合我的屏幕。几乎 35% 被切断，我有一个 23 英寸的显示器。

是否有任何解决方法/黑客可以使其完全显示在我的屏幕上？Apple 是否有可能包含一个非视网膜（只是正常大小）的 iPhone 5 模拟器？

他们为 iPhone 4 提供了它，所以不知道为什么他们不会为 iPhone 5 包含相同的东西。

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-09-15T18:03:31.967

如果您在 Window 菜单中查看 Scale，您可以将模拟器窗口设置为 50% 或 75% 大小。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-21T20:40:39.180

只需按 command-1、2 或 3 即可进行缩放。

# android - 所有具有特征的 Android 设备列表

> ID：12439779
> 
> 赞同：4
> 
> 时间：2012-09-15T18:00:40.707
> 
> 标签：android, list, device

目前，我正在调查我希望下一个 Android 应用程序支持哪些 Android 设备。我希望有一份包含所有 Android 设备及其特性的列表。

谷歌提供了这个：http: [//developer.android.com/about/dashboards/index.html](http://developer.android.com/about/dashboards/index.html)

维基百科提供了一些信息，但不是结构化的： [http ://en.wikipedia.org/wiki/Comparison_of_Android_devices](http://en.wikipedia.org/wiki/Comparison_of_Android_devices)

我希望看到每个设备的列表：

*   安卓操作系统
*   屏幕密度
*   屏幕分辨率
*   硬件规格
*   市场份额（已售出）
*   市场份额（当前活跃）

并且应该可以通过字段进行过滤，看看您是否排除了某些屏幕密度或分辨率类型，还剩下多少市场份额。

我觉得奇怪的是谷歌没有提供这样的列表，因为它可以帮助 Android 开发人员确定优先级。

有人知道提供此信息的一些资源吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T18:20:46.433

我很确定谷歌确实有这些数据，但出于某种原因他们不分享这些数据。这是证明，如果您在 Google Play 中打开您的开发者控制台，打开您的应用程序并导航到“APK”选项卡，它将为您提供“支持的设备”的数量，如下所示：[http ://www.mojandroid.sk/wp -content/uploads/2012/08/Google-Play-Developer-Console-APK-súbory.png](http://www.mojandroid.sk/wp-content/uploads/2012/08/Google-Play-Developer-Console-APK-s%C3%BAbory.png)该数字会根据您在应用的 AndroidManifest.xml 中声明的功能而有所不同。在旧的开发者控制台中有一个实际的链接，点击它会打开一个新窗口，其中列出了支持的设备：http: [//i.imgur.com/Eb4sK.jpg](http://i.imgur.com/Eb4sK.jpg)

# c# - XNA游戏物品拖放——如何实现对象交换？

> ID：12439784
> 
> 赞同：0
> 
> 时间：2012-09-15T18:01:34.677
> 
> 标签：c#, swap

我正在制作一个库存系统，但我被困在应该通过简单的拖放操作将项目从一个单元格移动到另一个单元格的部分。

有一个`Item[,] Inventory`包含项目的数组，`object fromCell, toCell`它应该包含对单元格的引用，以便在释放鼠标按钮时进行操作，但是当我尝试这样做时：

```
object temp = toCell;
toCell = fromCell;
fromCell = temp; 
```

...游戏只是交换对象引用，而不是实际对象。我该如何进行这项工作？

**UPD：**感谢 Bartosz，我明白了这一点。事实证明，您可以安全地使用对对象数组的引用，并使用您希望交换的对象的已保存索引来更改*它。*

代码可以是这样的：

```
object fromArray, toArray;
int fromX, fromY, toX, toY;

// this is where game things happen

void SwapMethod()
{
    object temp = ((object[,])toArray)[toX, toY];
    ((object[,])toArray)[toX, toY] = ((object[,])fromArray)[fromX, fromY];
    ((object[,])fromArray)[fromX, fromY] = temp;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T10:44:36.093

这个怎么样？

```
internal static void Swap<T>(ref T one, ref T two)
{
    T temp = two;
    two = one;
    one = temp;
} 
```

你所有的交换都变成了这个。

```
Swap(Inventory[fromCell], Inventory[toCell]); 
```

此外，您可以添加数组的扩展名（如果更舒适）。

```
public static void Swap(this Array a, int indexOne, int indexTwo)
{
    if (a == null)
        throw new NullReferenceException(...);

    if (indexOne < 0 | indexOne >= a.Length)
        throw new ArgumentOutOfRangeException(...);

    if (indexTwo < 0 | indexTwo >= a.Length)
        throw new ArgumentOutOfRangeException(...);

    Swap(a[indexOne], a[indexTwo]);
} 
```

像这样使用它：

```
Inventory.Swap(fromCell, toCell); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T20:44:11.483

为什么不使用`Inventory`数组索引：`int fromCell, toCell`.

```
var temp = Inventory[toCell];
Inventory[toCell] = fromCell;
Inventory[fromCell] = temp; 
```

您将库存建模为 2D 插槽数组，因此使用索引访问它似乎相当安全。

# jquery-ui - 未捕获的类型错误：对象 [对象对象] 没有方法“选项卡”

> ID：12439787
> 
> 赞同：3
> 
> 时间：2012-09-15T18:01:40.897
> 
> 标签：jquery-ui, jquery-ui-tabs

我正在尝试在网络浏览器中制作标签。我已经包含了所有必要的 .js 文件。我仍然收到此错误：

`$("#tabb").tabs();`其中 tabb 是 div id。

`Uncaught TypeError: Object [object Object] has no method 'tabs'`

我已经附上了所有的 .js 文件。

`jquery.js`, `jquery-ui.js (complete)`, `jquery-ui-tabs`（仅选项卡小部件）仍然存在错误...

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-06T13:26:53.623

1.检查正在加载的jquery版本。旧版本将没有标签等功能。

2.如果你加载了多个jquery，有时也会出现这个问题。最后加载的 jquery 将被查找相同。

这个错误经常发生。尽管问题中的问题有所不同。以上两个问题是我发现的最常见的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T18:14:01.140

你确定你的代码是在*jQuery UI*加载之后执行的吗？您应该确保 DOM 已准备好，并像这样包装它：

```
$（函数（）{
  $("#tabb").tabs();
});

```

# c# - HttpWebRequest 返回另一个线程中的请求结果（Monotouch）

> ID：12439789
> 
> 赞同：2
> 
> 时间：2012-09-15T18:01:53.010
> 
> 标签：c#, multithreading, xamarin.ios, httpwebrequest

*这个问题是关于 Monotouch 的，但它可能是一般的 .NET 问题或 Mono 库的问题。*

我遇到了很长一段时间以来遇到的最奇怪的问题。

我启动了 2 个线程，每个线程创建一个 HttpWebRequest。这些线程同时启动（好吧，相隔一毫秒）。发生的情况是从第一个 HTTP 请求 (url1) 对 GetResponse() 的调用接收到第二个 HTTP 请求 (url2) 的内容。发生这种情况时，第二个 HTTP 请求会在 30 秒后超时。

这不会每次都发生，但确实会发生 5 次中的 4 次。

这是代码：（简化为生成工作测试用例）

```
public void Launch()
{
   Thread thread1 = new Thread(() => { GetData("http://url1"); });
   Thread thread2 = new Thread(() => { GetData("http://url2"); });

   thread1.Start();
   thread2.Start();
}

public static void GetData(string url)
{
   try
   {
      XDocument xDoc;

      var webRequest = HttpWebRequest.Create(url);

      using (var response = webRequest.GetResponse())
      {
         using (var stream = response.GetResponseStream())
         {
             xDoc = XDocument.Load(stream);

             Logger.Default.Log("Result for {0}: {1}", url, xDoc);
         }
      }
   }
   catch(Exception ex)
   {
       Logger.Default.Log("Result for {0}: [Exception: {1}]", url, ex.Message);
   }
} 
```

这是输出（5 次中有 4 次）：

```
Result for http://url1: <contents of http://url2>
Result for http://url2: [Exception: timeout...] 
```

当一切正常时（5 次中有 1 次）：

```
Result for http://url1: <contents of http://url1>
Result for http://url2: <contents of http://url2> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T19:03:11.290

听起来不像一般的.net 行为。

听起来像一个错误 - 将它报告给 xamarin 的 bugzilla？[https://bugzilla.xamarin.com/](https://bugzilla.xamarin.com/)

# actionscript-3 - 使用两个事件

> ID：12439790
> 
> 赞同：0
> 
> 时间：2012-09-15T18:01:55.120
> 
> 标签：actionscript-3, apache-flex, flexbuilder, flex4.6

我有一个与事件相关的小问题，`MOUSE_MOVE`并且`TransformGestureEvent.GESTURE_ZOOM`。

我想区分这两个事件，当我缩放对象时`MOUSE_MOVE`不应该采取行动。

在这两个事件的函数中，我开始指示`event.stopPropagation();`但没有成功，所以如果我用一根手指按下并移动，则`MOUSE_MOVE`事件应该起作用，但是当我用两根手指按下时，`MOUSE_MOVE`应该不起作用。

当我缩放对象时，有什么方法可以阻止 MOUSE_MOVE 事件的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T18:36:41.600

你可以试试`event.stopImmediatePropagation()`。不过，我不确定您描述的事件的顺序是什么，所以即使这样也可能行不通。`event.preventDefault()`也可能有帮助。

它的文档在这里：[http ://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/Event.html#stopImmediatePropagation%28%29](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/Event.html#stopImmediatePropagation%28%29)

和这里：

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/Event.html#preventDefault%28%29](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/Event.html#preventDefault%28%29)

您应该能够检查`event.cancelable`布尔属性以查看是否可以阻止默认行为。

# java - 使用 java 、 Akka 和 Play 2 框架进行集群计算

> ID：12439793
> 
> 赞同：3
> 
> 时间：2012-09-15T18:02:12.373
> 
> 标签：java, playframework, cluster-computing, load-balancing, akka

我想构建一个集群系统，该系统将涉及负载平衡、使用带有 Akka 的 Java 和 play 2 框架的并行活动。我已阅读有关 Akka 远程集群以及使用 Akka 路由将任务分配给子 Actor 的信息。我知道 Play 2 框架也实现了 java Akka。

现在我的问题是我想结合java Akka和Play 2框架来构建一个集群系统，我可以实现负载均衡和任务的并行执行。

如果有人可以给我这种实现的例子或向我指出这些资源或链接，我会很兴奋

谢谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T14:22:12.003

这是一个很好的起点： http: [//letitcrash.com/post/29044669086/balancing-workload-across-nodes-with-akka-2](http://letitcrash.com/post/29044669086/balancing-workload-across-nodes-with-akka-2)

# java - 用户可拖动的 EditText

> ID：12439799
> 
> 赞同：1
> 
> 时间：2012-09-15T18:03:09.063
> 
> 标签：java, android, android-edittext

我想在我的 UI 中制作一个编辑文本，用户可以将其从屏幕的一个部分物理拖动到另一个部分。它现在在 FrameLayout 中。

我试过环顾四周，但没有看到将盒子作为一个整体移动而不是仅仅将数据从一个视图移动到另一个视图有多大帮助。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T18:46:32.583

你有没有尝试过这样的事情？

```
 myOnTouchListener = new OnTouchListener() {
     public boolean onTouch(View v, MotionEvent me){
         if (me.getAction() == MotionEvent.ACTION_DOWN){
             oldXvalue = me.getX();
             oldYvalue = me.getY();
             Log.i(myTag, "Action Down " + oldXvalue + "," + oldYvalue);
         }else if (me.getAction() == MotionEvent.ACTION_MOVE  ){
            LayoutParams params = new LayoutParams(v.getWidth(), v.getHeight(),(int)(me.getRawX() - (v.getWidth() / 2)), (int)(me.getRawY() - (v.getHeight())));
            v.setLayoutParams(params);
         }
         return true;
     }
 }; 
```

请参阅：[如何在 Android 中制作拖放按钮](https://stackoverflow.com/questions/5037799/how-to-make-drag-drop-button-in-android)

# c# - List.Count 重置为零

> ID：12439800
> 
> 赞同：0
> 
> 时间：2012-09-15T18:03:24.690
> 
> 标签：c#

我想创建一个包含 11 个条目的列表，但`List.Count`在此代码之后重置为零。

没有条目添加到列表中。怎么了？

```
List<Animation> animations = new List<Animation>();

animations[0] = new Animation(new List<Rectangle>(10), 
                                     Content.Load<Texture2D>("pictures"), 
                                     TimeSpan.FromSeconds(2), 
                                     Animation.Animationsablaeufe.vorrück); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T22:47:20.903

```
List<Animation> animations = new List<Animation>(); // count should be 0

animations.Add(new Animation(...)); // count should be 1
animations.Add(new Animation(...)); // count should be 2

// etc... 
```

您还可以使用以下等价的表示法：

```
List<Animation> animations = new List<Animation>
{
   new Animation(...),
   new Animation(...),
   new Animation(...),
   new Animation(...),
   ...
   new Animation(...)
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T19:01:28.520

```
List<Animation> Animations = new List<Animation>();

Animations.Add(new Animation);

Animations.Count(); 
```

# php - 如何仅使用 PHP 检查某个坐标是否落入另一个坐标半径

> ID：12439801
> 
> 赞同：25
> 
> 时间：2012-09-15T18:03:24.007
> 
> 标签：php, geolocation

我见过这么多函数，但它恰好只适用于 MySQL 或 Postgresql。我想要 PHP 的等效逻辑。我正在做一些比较，比如我有这些数据是在创建时生成的。

```
Lat: 56.130366
Long: -106.34677099999 
```

稍后，我想检查这个坐标是否会落在另一个坐标的半径内。

```
Lat: 57.223366
Long: -106.34675644699
radius: 100000 ( meters ) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-09-15T18:35:33.047

谢谢您的帮助。下面是一个示例函数，它采用两组经度和纬度坐标并返回两者之间的距离。

```
function getDistance($latitude1, $longitude1, $latitude2, $longitude2) {  
  $earth_radius = 6371;

  $dLat = deg2rad($latitude2 - $latitude1);  
  $dLon = deg2rad($longitude2 - $longitude1);  

  $a = sin($dLat/2) * sin($dLat/2) + cos(deg2rad($latitude1)) * cos(deg2rad($latitude2)) * sin($dLon/2) * sin($dLon/2);  
  $c = 2 * asin(sqrt($a));  
  $d = $earth_radius * $c;  

  return $d;  
}

$distance = getDistance(56.130366, -106.34677099999, 57.223366, -106.34675644699);
if ($distance < 100) {
  echo "Within 100 kilometer radius";
} else {
  echo "Outside 100 kilometer radius";
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-15T18:10:08.243

您应该使用[Haversine 公式](http://en.wikipedia.org/wiki/Haversine_formula)来计算两点之间的距离。您在这里有一个[PHP 版本](http://www.codecodex.com/wiki/Calculate_Distance_Between_Two_Points_on_a_Globe#PHP%5d)。

然后检查是否`distance < 100000`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T18:11:35.390

这应该有帮助，

```
$lat_origin = 56.130366;
$long_origin = -106.34677099999;

$lat_dest = 57.223366;
$long_dest = -106.34675644699;

$radius      = 3958;      # Earth's radius (miles, convert to meters)
$deg_per_rad = 57.29578;  # Number of degrees/radian (for conversion)

$distance = ($radius * pi() * sqrt(
            ($lat_origin - $lat_dest)
            * ($lat_origin - $lat_dest)
            + cos($lat_origin / $deg_per_rad)  # Convert these to
            * cos($lat_dest / $deg_per_rad)    # radians for cos()
            * ($long_origin - $long_dest)
            * ($long_origin - $long_dest)
    ) / 180); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-15T18:11:40.747

```
//  Vincenty formula to calculate great circle distance between 2 locations
//      expressed as Lat/Long in KM 

function VincentyDistance($lat1,$lat2,$lon1,$lon2){ 
    $a = 6378137 - 21 * sin(lat); 
    $b = 6356752.3142; 
    $f = 1/298.257223563; 

    $p1_lat = $lat1/57.29577951; 
    $p2_lat = $lat2/57.29577951; 
    $p1_lon = $lon1/57.29577951; 
    $p2_lon = $lon2/57.29577951; 

    $L = $p2_lon - $p1_lon; 

    $U1 = atan((1-$f) * tan($p1_lat)); 
    $U2 = atan((1-$f) * tan($p2_lat)); 

    $sinU1 = sin($U1); 
    $cosU1 = cos($U1); 
    $sinU2 = sin($U2); 
    $cosU2 = cos($U2); 

    $lambda = $L; 
    $lambdaP = 2*PI; 
    $iterLimit = 20; 

    while(abs($lambda-$lambdaP) > 1e-12 && $iterLimit>0) { 
        $sinLambda = sin($lambda); 
        $cosLambda = cos($lambda); 
        $sinSigma = sqrt(($cosU2*$sinLambda) * ($cosU2*$sinLambda) + ($cosU1*$sinU2-$sinU1*$cosU2*$cosLambda) * ($cosU1*$sinU2-$sinU1*$cosU2*$cosLambda)); 

        //if ($sinSigma==0){return 0;}  // co-incident points 
        $cosSigma = $sinU1*$sinU2 + $cosU1*$cosU2*$cosLambda; 
        $sigma = atan2($sinSigma, $cosSigma); 
        $alpha = asin($cosU1 * $cosU2 * $sinLambda / $sinSigma); 
        $cosSqAlpha = cos($alpha) * cos($alpha); 
        $cos2SigmaM = $cosSigma - 2*$sinU1*$sinU2/$cosSqAlpha; 
        $C = $f/16*$cosSqAlpha*(4+$f*(4-3*$cosSqAlpha)); 
        $lambdaP = $lambda; 
        $lambda = $L + (1-$C) * $f * sin($alpha) * ($sigma + $C*$sinSigma*($cos2SigmaM+$C*$cosSigma*(-1+2*$cos2SigmaM*$cos2SigmaM))); 
    } 

    $uSq = $cosSqAlpha*($a*$a-$b*$b)/($b*$b); 
    $A = 1 + $uSq/16384*(4096+$uSq*(-768+$uSq*(320-175*$uSq))); 
    $B = $uSq/1024 * (256+$uSq*(-128+$uSq*(74-47*$uSq))); 

    $deltaSigma = $B*$sinSigma*($cos2SigmaM+$B/4*($cosSigma*(-1+2*$cos2SigmaM*$cos2SigmaM)- $B/6*$cos2SigmaM*(-3+4*$sinSigma*$sinSigma)*(-3+4*$cos2SigmaM*$cos2SigmaM))); 

    $s = $b*$A*($sigma-$deltaSigma); 
    return $s/1000; 
} 

echo VincentyDistance($lat1,$lat2,$lon1,$lon2); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-20T08:09:05.713

此函数采用两组纬度、经度，并以指定的单位给出两者之间的距离。

```
function distance($lat1, $lon1, $lat2, $lon2, $unit) {
  if (($lat1 == $lat2) && ($lon1 == $lon2)) {
    return 0;
  } else {
    $theta = $lon1 - $lon2;
    $dist = sin(deg2rad($lat1)) * sin(deg2rad($lat2)) +  cos(deg2rad($lat1)) * cos(deg2rad($lat2)) * cos(deg2rad($theta));
    $dist = acos($dist);
    $dist = rad2deg($dist);
    $miles = $dist * 60 * 1.1515;
    $unit = strtoupper($unit);

    if ($unit == "K") {
      return ($miles * 1.609344);
    } else if ($unit == "N") {
      return ($miles * 0.8684);
    } else {
      return $miles;
    }
  }
} 
```

来源：[https ://www.geodatasource.com/developers/php](https://www.geodatasource.com/developers/php)

用法：

```
distance(32.9697, -96.80322, 29.46786, -98.53506, "M"); 
```

最后一个参数是距离单位。可能的单位：

*   `M`为了`Miles`
*   `K`为了`Kilometers`
*   `N`为了`Nautical Miles`

# ios - 为什么我可以重用 CCActionInterval？

> ID：12439805
> 
> 赞同：0
> 
> 时间：2012-09-15T18:03:50.807
> 
> 标签：ios, cocos2d-iphone, ccaction

我正在 Cocos2d 中构建一个简单的 2D 游戏，其中涉及让敌人穿过不同的预定义路径穿过屏幕。nextFrame 方法的代码如下：

```
 int indexCount = 0;
for (Enemy *e in enemies) {

    if ([cocosGuy doesCollideWithRect: [e boundingBox]])
    {
        for (Enemy *e in enemies)
        {
            [self removeChild: e cleanup: YES];
        }
        [self startGame];
    }
    // ^ This code not relevant to the question
    if ([e numberOfRunningActions] == 0)
    {
        [e setPosition: [[enemy_positions objectAtIndex:indexCount] CGPointValue]];
        [e runAction: [beziers objectAtIndex: indexCount]];
    }
    ++indexCount;
} 
```

上面第二个 if 语句中的代码旨在从“enemy_positions”数组中获取一个 CGPoint，并从“beziers”数组中获取一个 CCActionInterval。它有效 - 当敌人完成其路径时，它会重新定位并重新运行。但是为什么在第一次运行后这个不中断呢？CCActions不应该是一次吗？

我问是因为我想将位置和动作重构为一个结构，并且我想确保我首先知道发生了什么。我是否误解了 CCAction 课程？

此外，这是生成“beziers”数组的当前工厂方法：

```
-(NSArray*) makeBeziers {

ccBezierConfig bezierconf1;
bezierconf1.controlPoint_1 = ccp(-200, 5);
bezierconf1.controlPoint_2 = ccp(300, 100);
bezierconf1.endPosition = ccp(1000,5);

ccBezierConfig bezierconf2;
bezierconf2.controlPoint_1 = ccp(-200, 5);
bezierconf2.controlPoint_2 = ccp(300, 100);
bezierconf2.endPosition = ccp(1000,5);

ccBezierConfig bezierconf3;
bezierconf3.controlPoint_1 = ccp(-200, 5);
bezierconf3.controlPoint_2 = ccp(300, 100);
bezierconf3.endPosition = ccp(1000,5);

NSArray *myarray;

myarray = [[NSArray arrayWithObjects: [CCBezierBy actionWithDuration:3 bezier: bezierconf1],
                [CCBezierBy actionWithDuration:3 bezier: bezierconf2],
                [CCBezierBy actionWithDuration:3 bezier: bezierconf3],
                nil] retain];
return myarray;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T21:53:59.157

这“偶然”起作用。动作应该只有一次。跑完之后，他们就会被释放。

但是，由于您将操作存储在单独的数组中，因此会保留这些操作。因此，您可以重新运行它们。这可能适用于某些操作，其他操作可能会显示微妙的问题，并且如果您这样做，某些操作可能不会执行任何操作、泄漏内存或立即崩溃。

重复使用动作通常被认为是不好的做法，除非您知道每个动作的代码并且您已经验证重复使用它不会做任何“坏事”。

# memory - CUDA 中的固定内存

> ID：12439807
> 
> 赞同：8
> 
> 时间：2012-09-15T18:04:01.080
> 
> 标签：memory, cuda

我在某处读到 CUDA 中的固定内存是稀缺资源。固定内存的上限是多少？在windows中，在linux中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-16T15:41:00.483

固定内存只是系统中的物理 RAM，它被留出并且不允许被操作系统调出。因此，一旦固定，其他进程就无法使用该内存量（有效地减少了其他操作系统可用的内存池）。

因此，最大可固定内存取决于其他进程（其他应用程序、操作系统本身）正在竞争系统内存。在 Windows 或 Linux 中同时运行的进程（例如，它们本身是否正在固定内存）将决定在特定时间有多少内存可供您固定。

# c# - 我的代码中的“抛出警告”

> ID：12439811
> 
> 赞同：8
> 
> 时间：2012-09-15T18:04:38.270
> 
> 标签：c#, warnings

我正在编写一个处理一些文件的工具。该工具将具有命令行界面，但也可以用作第三方代码的类库。为了处理错误，我只是抛出一个异常。第三方代码可以处理异常，命令行界面可能只是打印它并中止。但是，除了致命错误之外，也有可能出现非致命的情况并且该过程可以继续，为此我想“抛出警告”并继续。

*我如何处理警告*，以使第三方代码和命令行界面都可以使用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T18:12:18.573

我建议你不要抛出异常，如果可能的话应该避免它们（它们是资源成本高的）。相反，您可以创建一个事件并引发它。第三方代码和命令行界面只需要签署这个事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T18:06:57.420

您也为此抛出异常（假设错误情况确实是异常的 - 预计这种情况很少见）。

异常并不总是致命的——您需要抛出第三方代码和命令行代码可以捕获并采取行动的特定*类型的异常。*

异常处理的一个规则是处理你知道如何处理的异常——如果你有错误的特定异常类型并且你记录它，客户端代码应该知道如何处理它（或不知道）。

* * *

如果您尝试做的是为使用代码提供*信息*（已在您的库中处理但用户可能想知道的警告），您可以使用[跟踪](http://msdn.microsoft.com/en-us/library/system.diagnostics.trace.aspx)子系统输出跟踪。所有用户需要做的就是配置一个监听器，并且能够在运行时获取信息。

# java - 如何在 NetBeans 7.2 中安装 CLDC 平台？

> ID：12439815
> 
> 赞同：0
> 
> 时间：2012-09-15T18:05:10.587
> 
> 标签：java, java-me

一个小时以来，我一直在尝试找到一种在我的 Netbeans 7.2 中安装 CLDC Oracle Java 平台的方法。有人能帮我吗？我有点失去理智了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T21:27:57.450

在这个 Oracle[博客](https://blogs.oracle.com/javamesdk/entry/java_me_sdk_3_01)中说 7.2 存在问题（请参阅最后的评论），他们建议使用 Netbeans 7.1.2 或即将推出的 7.2.1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:10:56.517

只需阅读此页面[http://netbeans.org/community/releases/36/J2ME_Support.html](http://netbeans.org/community/releases/36/J2ME_Support.html) ...。您将找到在您的 netbeans 中安装 J2me 支持的方法。

# mysql - 选择没有特定标签的帖子

> ID：12439820
> 
> 赞同：0
> 
> 时间：2012-09-15T18:06:08.263
> 
> 标签：mysql, sql, many-to-many, subquery

我有一个 post/tag 数据库，其中包含通常的 post、tag 和 tag_post 表。tag_post 表包含 tagid 和 postid 字段。

我需要查询帖子。当我想获取具有特定标签的帖子时，我必须使用连接：

```
... INNER JOIN tag_post ON post.id = tag_post.postid 
WHERE tag_post.tagid = {required_tagid}` 
```

当我想获取具有 tagIdA 和 tagIdB 的帖子时，我必须使用两个连接（我最终同意了）。

现在，我需要查询没有特定标签的帖子。没有多想，我只是将其更改`=`为`!=`：

```
... INNER JOIN tag_post ON post.id = tag_post.postid 
WHERE tag_post.tagid != {certain_tagid}` 
```

繁荣！错误的逻辑！

我确实想出了这个 - 只是在这里写逻辑：

```
... INNER JOIN tag_post ON post.id = tag_post.postid 
WHERE tag_post.postid NOT IN 
(SELECT postid from tag_post where tagid = {certain_tagid}) 
```

我知道这会起作用，但是由于我的成长方式，每当我使用子查询编写查询时，我都会感到内疚（无论是否合理）。

建议更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T18:09:42.697

您可以将其视为“在帖子中查找标签中不匹配的所有行（针对特定标签）”

这是 LEFT JOIN 的教科书用例。

```
LEFT JOIN tag_post ON post.id = tag_post.postid AND tag_post.tagid = {required_tagid}
WHERE tag_post.tag_id IS NULL 
```

请注意，您必须在连接的 ON 子句中有标签 ID。

有关连接类型的参考，请参见此处： http: [//www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T18:16:38.983

除了 Gavin Towey 的好答案之外，您还可以使用`not exists`子查询：

```
where   not exists
        (
        select  *
        from    tag_post
        where   post.id = tag_post.postid
                and tag_post.tagid = {required_tagid}
        ) 
```

数据库通常以相同的方式执行这两种变体。我个人觉得这种`not exists`方法更容易阅读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T18:16:59.677

1.  > 当我想获取具有 tagIdA 和 tagIdB 的帖子时，我必须使用两个连接（我最终同意了）。

    还有其他方法。

    可以通过仅对这些标签进行分组过滤，按帖子分组，然后删除包含少于预期标签的任何组，来获取所有`id`带有`tagid`123 和 456标记的​​帖子；`tag_post`然后可以使用结果来过滤`posts`表：

    ```
    SELECT * FROM posts WHERE id IN (
      SELECT   postid
      FROM     tag_post
      WHERE    tagid IN (123,456)
      GROUP BY postid
      HAVING   COUNT(*) = 2
    ) 
    ```

    如果可以`tagid`多次使用相同的帖子标记帖子，则需要替换`COUNT(*)`为性能较差的`COUNT(DISTINCT tagid)`。

2.  > 现在，我需要查询没有特定标签的帖子。

    这称为反连接。最简单的方法是按照您的建议`IN`从上面的查询中替换为 。`NOT IN`我不会为此感到太内疚。另一种方法是使用外连接，正如[@GavinTowey 的回答](https://stackoverflow.com/a/12439837/623041)中所建议的那样。

# scala - 如何在 Scala 中为具有泛型类型的泛型类型指定边界？

> ID：12439825
> 
> 赞同：2
> 
> 时间：2012-09-15T18:07:09.247
> 
> 标签：scala, generics, bounds

*这个问题是关于使用泛型类型和设置边界的，所以请不要因为我使用的库而吓坏了。把它当作一个例子。*

我使用 Scalala 并使用此类类型`DenseMatrix[V]`，`DenseVectorCol[V]`并且`DenseVectorRow[V]`. 他们常见的超类型是`Tensor[K,V]`. 请注意，`Tensor`有附加参数`K`——所有提到的类都自己`Dense...`设置了这个类型`K`。

所以我想写一个方法，其参数上限是`Tensor`. 我为我的方法编写了这样的代码：

```
def validate[K,T <: Tensor[K,Double]](tensor : T) : T = ... 
```

有这样的意图——`T`必须是 s 的子类型`Tensor`，而且我知道我`Double`一直在使用 s ，所以让它成为`Double`，并且对于第一个类型参数 ( `K`) 从传递的参数中获取它。

它没有按我的预期工作，因为我收到错误：

> 推断的类型参数 [Nothing,DenseVectorCol[Double]] 不符合方法 validate 的类型参数边界 [K,T <: Tensor[K,Double]]

**问题**：那么如何`K`从传递的参数中提取这种类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T23:47:50.490

如果您根本不关心`K`，可以使用通配符：

```
def validate[T <: Tensor[_, Double]]: T = ... 
```

请注意，在某些情况下这不起作用（例如，如果您需要在`K`方法中返回或以其他方式使用它），但假设这不是其中一种情况，这是一个完全有效的解决方案，并且类型推断将工作得很好。

# maven - 存储库运行？

> ID：12439828
> 
> 赞同：1
> 
> 时间：2012-09-15T18:07:28.823
> 
> 标签：maven, repository

这个 Maven 存储库是否可以从 Eclipse 运行？

```
<repository>
  <id>tapx</id>
  <name>howard lewisship snapshot repository</name>
  <url>http://howardlewisship.com/snapshot-repository/</url>
  <snapshots>
    <enabled>true</enabled>
    <updatePolicy>never</updatePolicy>
    <checksumPolicy>fail</checksumPolicy>
  </snapshots>
</repository> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T18:20:25.003

这个问题与Eclipse没有任何关系，而是与Maven有关。

假设您使用的是 m2eclipse，您可以使用[浏览和操作 Maven 存储库文档](http://www.sonatype.com/books/m2eclipse-book/reference/repository-sect-repo-view.html)中详细介绍的存储库浏览器。由于我不是 Eclipse 用户，所以我更喜欢使用命令行。

要回答您的（非编程）问题，AFAICT，是的，存储库工作正常。

**pom 片段** ^(-*也适用于快照设置，但不是必需的。*)

```
 <repositories>
    <repository>
      <id>tapx</id>
      <name>howard lewisship snapshot repository</name>
      <url>http://howardlewisship.com/snapshot-repository/</url>
    </repository>
  </repositories>

  <dependencies>
    <dependency>
      <groupId>com.howardlewisship</groupId>
      <artifactId>tapx-core</artifactId>
      <version>1.2-SNAPSHOT</version>
    </dependency>
  </dependencies> 
```

**依赖：树输出**

```
[...maven/playground]$ mvn dependency:tree
[INFO] --- maven-dependency-plugin:2.1:tree (default-cli) @ test ---
[INFO] com.davelnewton:test:jar:1.0.0-SNAPSHOT
[INFO] \- com.howardlewisship:tapx-core:jar:1.2-SNAPSHOT:compile
[INFO]    \- org.apache.tapestry:tapestry-core:jar:5.3.4:compile
[INFO]       +- org.antlr:antlr-runtime:jar:3.3:compile
[INFO]       |  \- org.antlr:stringtemplate:jar:3.2.1:compile
[INFO]       |     \- antlr:antlr:jar:2.7.7:compile
[INFO]       +- commons-codec:commons-codec:jar:1.5:compile
[INFO]       +- org.apache.tapestry:tapestry-json:jar:5.3.4:compile
[INFO]       \- org.apache.tapestry:tapestry-ioc:jar:5.3.4:compile
[INFO]          +- org.slf4j:slf4j-api:jar:1.6.1:compile
[INFO]          +- org.apache.tapestry:tapestry-func:jar:5.3.4:compile
[INFO]          +- org.slf4j:slf4j-log4j12:jar:1.6.1:compile
[INFO]          +- javax.inject:javax.inject:jar:1:compile
[INFO]          +- log4j:log4j:jar:1.2.14:compile
[INFO]          +- org.apache.tapestry:tapestry5-annotations:jar:5.3.4:compile
[INFO]          +- javassist:javassist:jar:3.12.1.GA:compile
[INFO]          \- org.apache.tapestry:plastic:jar:5.3.4:compile 
```

[您还可以从 Web 浏览 repo。](http://howardlewisship.com/snapshot-repository/com/howardlewisship/)

# html - 使用 Bootstrap 固定两个流体 div 之间的宽度 div

> ID：12439829
> 
> 赞同：0
> 
> 时间：2012-09-15T18:07:57.823
> 
> 标签：html, css, layout, twitter-bootstrap, responsive-design

我正在尝试创建一个以两个流体 div 为中心的固定宽度 div 的布局。配置应该适合 Bootstrap 行。我该怎么做？

这是一个插图：

![在此处输入图像描述](../Images/001e7736e331063499c4a1c273846a74.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T18:47:41.020

您可以使用表格轻松完成此操作，但这里有一个适合您的 div 版本：

```
<!DOCTYPE>
<html>
    <head>
        <style>
            .d1 {
                background-color: #AAAAFF;
                vertical-align: top;
                margin-right: -75px;
                display: inline-block;
                width: 50%;
                position: relative;
                z-index: 0;
            }

            .d1 .cnt {
                padding-right: 75px;
            }

            .d2 {
                background-color: #AAFFAA;
                vertical-align: top;
                width: 150px;
                display: inline-block;
                position: relative;
                z-index: 2;
            }

            .d3 {
                background-color: #FFAAAA;
                vertical-align: top;
                margin-left: -75px;
                display: inline-block;
                width: 50%;
                position: relative;
                z-index: 1;
            }

            .d3 .cnt {
                padding-left: 75px;
            }
        </style>
    </head>
    <body>
        <div class="d1"><div class="cnt">I'm trying to create a layout with a fixed width div centered between two fluid divs. The configuration should fit within a Bootstrap row. How would I do this? Here's an illustration:</div></div><div class="d2">I'm trying to create a layout with a fixed width div centered between two fluid divs. The configuration should fit within a Bootstrap row. How would I do this? Here's an illustration:</div><div class="d3"><div class="cnt">I'm trying to create a layout with a fixed width div centered between two fluid divs. The configuration should fit within a Bootstrap row. How would I do this? Here's an illustration:</div></div>
    </body>
</html> 
```

由于 div 是 inline-block，因此不要在它们之间添加空格或换行。

# php - 如何保护 PHP 免受公众攻击？

> ID：12439833
> 
> 赞同：1
> 
> 时间：2012-09-15T18:08:59.710
> 
> 标签：php, security, permissions

所以我对狡猾的用户可以在网站上看到什么和看不到什么感到有点困惑。

如果我有一个包含一堆 php 脚本的文件，用户只需单击“查看源代码”就无法看到它。但是有没有办法他们可以“下载”包括 php 在内的整个页面？

如果权限设置应设置为页面，是否存在必须在加载时执行但我不希望任何人看到的 php 脚本？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T18:14:46.707

2个步骤。

**第 1 步**：只要您的 PHP 被正确处理，这没什么好担心的……这样做。

**第 2 步**：作为一项保险措施，将大部分 PHP 代码移到 Web 服务器目录之外，然后从目录中的 PHP 文件中包含它。PHP 将包含在文件系统中，因此可以访问这些文件，但 Web 服务器不会。如果 Web 服务器出现问题并为您提供原始 PHP 代码（曾经发生在 Facebook 上），那么用户除了对他们无法访问的文件的引用之外什么都看不到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T18:13:34.560

PHP 文件在发送到您的 Web 浏览器之前由服务器处理。即客户端无法看到实际的PHP代码、注释等。如果有人要访问您的 php 文件，他们必须通过 FTP 或 SSH 或类似的方式侵入您的服务器，而且您面临的问题不仅仅是您的 PHP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T18:14:01.130

这完全取决于您的 Web 服务器及其配置。获取 url 并决定是运行脚本还是发回文件是 Web 服务器的工作。通常，文件名的后缀、文件的目录或文件系统中的文件权限属性用于做出此决定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T18:14:08.733

PHP 是一种在服务器上执行的服务器端脚本语言。客户端无法访问它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-15T18:14:11.683

如果启用了 PHP，并且程序标记良好，则任何 PHP 代码都不会通过您的 Web 服务器。为了使事情更安全，禁用目录浏览，并在所有文件夹中放置一个空的 index.php 或 index.html。

确保您也遵守安全编码实践。网络上有很多文章。这是一个[http://www.ibm.com/developerworks/opensource/library/os-php-secure-apps/index.html](http://www.ibm.com/developerworks/opensource/library/os-php-secure-apps/index.html)

# css - 当我在手机/平板电脑上看到我在 CSS 上编写的媒体查询时，如何在我的 Wordpress 网站上工作？

> ID：12439835
> 
> 赞同：0
> 
> 时间：2012-09-15T18:09:13.337
> 
> 标签：css, wordpress, responsive-design, media-queries

我正在测试我刚刚在 wordpress 上开发的这个网站：[circoloshowroom.com](http://www.circoloshowroom.com) ，我添加了所有正确的媒体查询以使其响应。现在，当我调整浏览器窗口的大小时，我的媒体查询工作正常。但是，当我在手机或平板电脑上查看该网站时，它会完全显示该网站，而媒体查询会被忽略。有什么建议么？这是 Wordpress 从一开始就对我的网站所做的事情吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T18:40:06.693

我通过将其添加到 header.php 文件的顶部解决了这个问题

```
<meta name="viewport" content="width=device-width; initial-scale=1.0"> 
```

仅供参考：默认情况下，iPhone Safari 会缩小 HTML 页面以适应 iPhone 屏幕。以下元标记告诉 iPhone Safari 使用设备的宽度作为视口的宽度并禁用初始缩放。我刚刚从这篇超级有用的博客文章中学到了一些东西：[webdesignerwall.com/tutorials/responsive-design](http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries)

# c++ - 通过允许用户选择顶点数使用 Boost 库生成图形

> ID：12439838
> 
> 赞同：0
> 
> 时间：2012-09-15T18:09:46.817
> 
> 标签：c++, boost, graph, boost-graph

我想使用 boost 库生成一个图形，该库允许用户输入边和顶点的数量。我基本上想做的是，

1.  我希望用户输入顶点数和每个顶点的编号。
2.  我会给用户一个特权，可以使用数字作为参考来选择一个顶点作为主顶点。
3.  我希望用户在控制台中指定每个顶点的边数，并且边可以是随机的。

是否有可能使用 BGL 以某种方式实现这一点？如果是这样，一个例子将是一个很好的开始。

预先感谢一吨，

干杯！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T19:23:56.583

假设您知道 a) 基本 C++ 和 b) 基本 BGL，这里有一个简单的算法来构建具有给定顶点价数的随机无向图：

1.  读取所需顶点的数量；叫它`N`。我们有顶点集`[0, N)`。

2.  对于每个`i`in `[0, N)`，读取所需的化合价`v[i]`（例如存储在容器中，例如 a `std::vector<int>`）。

3.  现在有趣的部分：迭代每个顶点并尽可能多地添加随机边。这是一些类似 C++ 的伪代码，有空白供您填写。

    ```
    for (i = 0; i != N; ++i)
    {
        if (i + 1 == N && v[i] > 0)
        {
            Error: The user input was impossible to satisfy
            Abort program
        }

        while (v[i] > 0)
        {
            pick a random j in [i + 1, N)

            if (v[j] > 0)
            {
                Add edge i <-> j
                --v[i];
                --v[j];
            }
        }
    }

    If we haven't aborted, we now have a random graph. 
    ```

如果您想扩展其中的任何部分，请发表评论。

* * *

**更新：**这是一个示例实现。会有差距；这只是一个大纲。

```
#include <iostream>
#include <sstream>
#include <string>
#include <vector>
#include <cstdio>
#include <cstdlib>

int read_int(std::string const & initmsg, std::string const & repeatmsg)
{
    std::cout << initmsg;

    for (std::string line; std::getline(std::cin, line); )
    {
        std::istringstream iss(line);
        int res;

        if (iss >> res >> std::ws && iss.get() == EOF) { return res; }

        std::cout << repeatmsg;
    }

    std::cerr << "Unexpected end of input! Aborting.\n";
    std::exit(1);
}

std::string read_string(std::string const & msg)
{
    std::string res;
    std::cout << msg;

    if (std::getline(std::cin, res)) { return res; }

    std::cerr << "Unexpected end of input! Aborting.\n";
    std::exit(1);
}

int main()
{
    int const N = read_int("Number of vertices: ",
                           "I did not understand, try again. Number of vertices: ");

    std::vector<unsigned int> valencies;
    std::vector<std::string> vertex_names;

    valencies.reserve(N);
    vertex_names.reserve(N);

    for (int i = 0; i != N; ++i)
    {
        std::string const msg1 = "Enter valency for vertex " + std::to_string(i) + ": ";
        std::string const msg2 = "Enter description for vertex " + std::to_string(i) + ": ";
        std::string const rep = "Sorry, say again: ";

        valencies.push_back(read_int(msg1, rep));
        vertex_names.push_back(read_string(msg2));
    }

    for (int i = 0; i != N; ++i)
    {
        std::cout << "Vertex " << i << " (\"" << vertex_names[i]
                  << "\") has valency " << valencies[i] << std::endl;
    }

    // Now run the above algorithm!
} 
```

# mysql - 如何使用 Rails 解决 MySQL 锁定超时错误？

> ID：12439840
> 
> 赞同：11
> 
> 时间：2012-09-15T18:10:03.340
> 
> 标签：mysql, ruby-on-rails, locking

突然之间（没有对相关代码进行任何更改），我们通过活动记录收到锁定错误，例如：

```
ActiveRecord::StatementInvalid: Mysql2::Error: Lock wait timeout exceeded; 
try restarting transaction: UPDATE `items` SET `state` = 'reserved', `updated_at` = '2012-09-15 17:58:21' WHERE `items`.`id` = 248220 
```

和

```
ActiveRecord::StatementInvalid: Mysql2::Error: Lock wait timeout exceeded; 
try restarting transaction: DELETE FROM `sessions` WHERE `sessions`.`id` = 41997883 
```

我们没有在这两种模型中进行自己的交易，所以唯一的交易是内置的 rails 交易。流量或请求量没有激增。

这些错误似乎是当“新”查询尝试在锁定的表上运行并且必须等待时，我们如何看到它在等待什么？我们如何确定代码的哪一部分正在发出长时间锁定表的查询？

关于我们可以在哪里查看或如何调查其原因的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T00:19:00.923

看看 pt-deadlock-logger，虽然与 rails 没有直接关系，但应该可以为您提供大量有关发生死锁的信息。

[http://www.percona.com/doc/percona-toolkit/2.1/pt-deadlock-logger.html](http://www.percona.com/doc/percona-toolkit/2.1/pt-deadlock-logger.html)

有一些很好的例子： [http ://www.mysqlperformanceblog.com/2012/09/19/logging-deadlocks-errors/](http://www.mysqlperformanceblog.com/2012/09/19/logging-deadlocks-errors/)

> 该工具非常简单实用。它监视 SHOW ENGINE INNODB STATUS 的输出并将新死锁记录到文件或我们以后可以查看的表中。让我们用一个例子来看看它是如何工作的。

文章继续解释说，这可以记录有关死锁的信息，例如涉及的查询、哪些主机、线程 ID 等。

我还发现在查询前加上注释有助于跟踪，例如文件或模块、函数，甚至是哪个用户。查询注释通常会一直传递给这样的诊断工具，并且可以帮助追踪代码的哪些部分以及在哪些情况下导致死锁。

# jquery - 使用ajax和jsp处理json请求

> ID：12439843
> 
> 赞同：0
> 
> 时间：2012-09-15T18:10:28.123
> 
> 标签：jquery, json, jsp

我有一个关于使用 jquery ajax 处理 json 请求的查询，

使用 JSON.stringify() 处理 javascript 对象后，我的 json 字符串如下所示：

```
 {"user1":{"hardwork":3,"cooperative":4,"supportive":3,"knowledge":3},
   "user2":{"hardwork":5,"cooperative":5,"supportive":3,"knowledge":3}} 
```

假设`user1`and`user2`是用户名，对于每个用户，我们拥有`categories`每个类别的值。根据需要，我需要将此页面发布到 jsp 页面。另外，我在页面上需要这个字符串`keys`和`values`来自这个字符串。`json``JSP`

这个怎么做？

哪个`json-java`图书馆合适？

如何在我的 jsp 页面中遍历`java/json`对象中的键和值（就像我们在 in 中所做的`for in loop`那样`javascript`）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T14:40:07.907

你可能会发现这个开源的 json java 库，看看[这个](http://json-lib.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T15:10:54.787

[您将在此处](https://stackoverflow.com/q/338586/1592398)了解有关更好的 java JSON 库的一些想法

用那些做你想做的事

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T18:35:02.317

```
$.getJSON('/your/script.jsp', function(data) {
    $.each(data, function(index) {
        var users = data[index]
        $.each(users,function(i){
            console.log(users.hardwork);
             //other properties
        });
    });
}); 
```

# matlab - 用matlab中的其他值替换矩阵中的索引

> ID：12439844
> 
> 赞同：3
> 
> 时间：2012-09-15T18:10:36.377
> 
> 标签：matlab, matrix, matrix-indexing

假设现在我有一个矩阵

```
S = [1 1 1 2 2 2;
     1 1 1 2 2 2;
     2 2 2 2 1 1;
     2 2 2 2 1 1;
     2 2 2 2 1 1] 
```

还有一个矩阵

```
A = [1 2;
     2 4] 
```

A 中的第一行是 S 的唯一索引，第二行包含将替换第一行中的值的值。即S中所有的“1”都会被2替换，所有的“2”都会被4替换。最后得到一个矩阵

```
SS = [2 2 2 4 4 4;
      2 2 2 4 4 4;
      4 4 4 4 2 2;
      4 4 4 4 2 2;
      4 4 4 4 2 2] 
```

现在我正在做的是：

```
SS = zeros(size(S));
for i = 1:size(A,2)
    SS(S==index(A(1, i)) = A(2,i);
end 
```

现在，我有一个相当大的矩阵，使用 for 循环有点慢。有没有更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T23:25:41.977

使用 的第二个输出为`ismember`您提供 A 的第 1 行中的值的索引。使用这些索引直接创建 matrix `SS`。

示例（为清楚起见更改了初始值）：

> > S = [5 5 5 3 3 3; 5 5 5 3 3 3；3 3 3 3 5 5；3 3 3 3 5 5；3 3 3 3 5 5]；A = [5 3; 2 4];

```
>> [~, Locb] = ismember(S,A(1,:))
Locb =

     1     1     1     2     2     2
     1     1     1     2     2     2
     2     2     2     2     1     1
     2     2     2     2     1     1
     2     2     2     2     1     1

>> SS = reshape(A(2,Locb),size(S))
SS =

     2     2     2     4     4     4
     2     2     2     4     4     4
     4     4     4     4     2     2
     4     4     4     4     2     2
     4     4     4     4     2     2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T21:11:27.317

您可以使用单线来解决此问题[`arrayfun`](http://www.mathworks.com/help/matlab/ref/arrayfun.html;jsessionid=bcbd8aa4deea3ab1700cd140f825)，如下所示：

```
SS = arrayfun(@(x)A(2, (A(1, :) == x),  S) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T18:54:48.520

如果我正确理解了您的问题，我将使用 numpy 数组而不是标准的 python 数组或列表。那么代码就变得很简单了，如下图：

```
# Import numpy
from numpy import array, zeros, shape
# Create the array S
S = array([[1,1,1,2,2,2],[1,1,1,2,2,2],[2,2,2,2,1,1],[2,2,2,2,1,1],[2,2,2,2,1,1]])
# Create the array A
A = array([[1,2],[2,4]])
# Create the empty array SS
SS = zeros((shape(S)))
# Actual operation needed 
SS[S==A[0,0]]=A[1,0]
SS[S==A[0,1]]=A[1,1] 
```

现在，如果您看到数组 SS，它将如下所示：

```
SS
array([[ 2.,  2.,  2.,  4.,  4.,  4.],
       [ 2.,  2.,  2.,  4.,  4.,  4.],
       [ 4.,  4.,  4.,  4.,  2.,  2.],
       [ 4.,  4.,  4.,  4.,  2.,  2.],
       [ 4.,  4.,  4.,  4.,  2.,  2.]]) 
```

很抱歉之前的混乱。我（出于某种原因）假设这个问题是针对 Python 的（我的错！）。无论如何，MATLAB 的答案非常相似：

```
SS = zeros(size(S))
SS(S==A(1,1))=A(2,1)
SS(S==A(1,2))=A(2,2) 
```

# ruby-on-rails - 使用导轨进行地理编码

> ID：12439846
> 
> 赞同：0
> 
> 时间：2012-09-15T18:10:51.697
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, geocoding

我想知道在我的系统中实现地理定位的最佳模型和解决方案是什么。在这里让我解释一下我的模型

```
User #contain information such has first name, last...
Article #contain information such has content, subject
Location #contain information such has latitude and longtitude. 
```

我试图在用户位置登录后做的事情是跟踪，并且商店有一个位置，当用户写一篇文章时，用户的位置可以通过当前用户信息进行跟踪，或者如果用户输入它可以修改.

我相信的关系会是这样的。

```
User belongs_to :location
Article belongs_to :location
Location
  has_many :users
  has_many:articles 
```

我不知道我是否正确，我也不确定如何实现它，在登录时更新信息，以及要输入的文章。我也想在用户端使用地理编码器。我找到了这个插件，但没有真正附带它的文档：

-- [https://github.com/sgruhier/jquery-addresspicker](https://github.com/sgruhier/jquery-addresspicker) -- [http://railscasts.com/episodes/273-geocoder](http://railscasts.com/episodes/273-geocoder)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T18:15:27.023

你可能想把它和另一个好的 railscast 结合起来：[http: //railscasts.com/episodes/154-polymorphic-association](http://railscasts.com/episodes/154-polymorphic-association)

# java - 使用Java逐块读取多个文件中的内容并将它们逐块写入单个文件中

> ID：12439847
> 
> 赞同：1
> 
> 时间：2012-09-15T18:10:55.120
> 
> 标签：java, file

这是我的源代码。我得到了阅读部分，但我的写作部分需要一个简单的逻辑，而我没有得到。在我当前的逻辑中，数据被覆盖，我总是能够在我的书面文件中看到最后一个读取数据块。

```
import java.io.File;
import java.io.FileInputStream;
java.io.FileNotFoundException;
java.io.FileOutputStream;
import java.io.IOException;
public class LoadTest 
 {  
public void readFiles(File file) throws FileNotFoundException
       {
        int fsize = (int) file.length();
        int part = (fsize/4)+(fsize%4);
        byte[] block = new byte[part]; 
        FileInputStream fin = new FileInputStream(file);
        try
        {
            int val=-1;
            do
            {
                int bytesread =0;
                while(bytesread<part)
                    {
                        val = fin.read(block, bytesread, part-bytesread);
                        if (val<0)
                            break;
                        bytesread += val;

                    }
                writeFiles(block,bytesread);                            
            }
            while(val>=0);
            fin.close();
        }
        catch(IOException e)
        {
            e.printStackTrace();
        }

    }
public void writeFiles(byte[] block, int len) throws IOException
{
    int byteswritten = 0;
    FileOutputStream fout = new FileOutputStream("input.csv");
    fout.write(block, byteswritten, len+byteswritten);
    byteswritten +=len;
    fout.close();
}

public static void main(String[] args) throws FileNotFoundException
{  
    LoadTest testobj = new LoadTest();
    String folder = "/Users/NiranjanSubramanian/Desktop/TestFiles";
    File dir = new File(folder);
    File[] files = dir.listFiles();
    System.out.println("Started");
    for( File entry: files)
    {  
        testobj.readFiles(entry);

    }
    System.out.println("Ended");

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T18:21:33.333

请参阅我的评论，了解如何以简单的方式解决问题。但是，让我向您建议一个简单的替代方法来完成您所要求的操作。

```
final Path dir = Paths.get("/Users/NiranjanSubramanian/Desktop/TestFiles");
try (final OutputStream out = Files.newOutputStream(Paths.get("input.csv"))) {
  for (final Path file : Files.newDirectoryStream(dir)) {
    Files.copy(file, out);
  }
} 
```

这依赖于 Java 7 的新文件 API，但（至少在我看来）是一个更清洁的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T18:15:55.563

有一些库可以为您甚至 NIO 处理它，但最简单的方法如下：

```
int read = 0;
byte[] buff = new byte[1024];
FileInputStream fis = new FileInputStream(yourInputFile);
FileOutputStream fos = new FileOutputStream(yourOutputFile);

while((read = fis.read(buff)) >= 0){
    fos.write(buff, 0, read);
}
fos.flush();
fos.close();
fis.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T18:16:39.787

以附加模式打开文件..您的代码将覆盖，因为默认值是覆盖，而不是附加。

要追加，您需要将追加参数作为 true 传递。改变

```
FileOutputStream fout = new FileOutputStream("input.csv"); 
```

至

```
FileOutputStream fout = new FileOutputStream("input.csv", true); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T18:17:00.817

如何在 Java 中复制流：

```
byte[] buffer = new byte[8192]; // or whatever you like really
int count;
while ((count = in.read(buffer)) > 0)
{
  out.write(buffer, 0, count);
} 
```

请注意，在开始编写之前，您不需要将整个输入存储在内存中，因此您可以节省时间和空间；并且处理包括可能的最终读取在内的部分读取非常容易。

# pgp - 将 PGP 密钥上传到 Google 时出错

> ID：12439850
> 
> 赞同：0
> 
> 时间：2012-09-15T18:11:49.503
> 
> 标签：pgp

我正在使用[此处](https://developers.google.com/google-apps/email-audit/auth#uploading_the_public_key)的说明将 BASE64 编码密钥上传到 Google，但是当我发出发布请求时，我得到以下响应

```
Content-Type application/xml is not a valid input type 
```

我发布这个：

```
<atom:entry xmlns:atom='http://www.w3.org/2005/Atom' xmlns:apps='bVFFTkJGQlVwVklCQ0FDL0NKK0VJR0RaeTJGdUJURU5qVnh2dko5Z29YL2lXTjlaZnByQVBDM1hm
TUZvZHdabQ0KdktNWVQxTVNBaFp0NWNqaXV4MUdvY2hNWnNwMVJZd0JxR2hQeUVNYnZ1MFA5R1RZ
ZnNpZjBjckRWNTNodU1FZg0KaGhRL2diRXZoU2loMWhvUGJES2JkSmFqZ2Z0R1g3cm83YUc2Ui9H
b1hTd3JQb1U4aEZYSmZubHZzNCs4ZFdnOA0Ka1hGZzFMSGFGM0MzbnQ4UWVGdU1QQ0d0TldWZGFj
cWlKTGtqbUNyV1FJOW1FZmpwcHJiZDUwcjNFeGxhb0JhbQ0KVEMzeEJvZ0xObG44UDFLb2xyZkVZ
OVV3bWxGanp5TWlqNU9kdEpvWFRRL1p0VWFHQUR5Q2pLaEY2ZXh2dFhVQw0KM092N2FZeWpCelM4
Ynd5dXgveEozSGNQYVE1MXpUT0UycDRIQUJFQkFBRzBKWFpwYzJobGMyZ2dQSFpwYzJobA0KYzJn
dWMybHVaMmhoYkRreFFHZHRZV2xzTG1OdmJUNkpBVGdFRXdFQ0FDSUZBbEJVcFZJQ0d3TUdDd2tJ
QndNQw0KQmhVSUFna0tDd1FXQWdNQkFoNEJBaGVBQUFvSkVGNXZjcnVkTjdSd0kzMEgvMUtnVDdk
WlVvTlM4bnFRa3lnVg0Ka3J1dS9oWEI1dWk3OXdNbjhMeUxvSDh1bjR4bFY1NnVjZ3dhWnI1WmZF
b0tQTzVHbDNJRHJrVmJuS3E5eWhVQg0KTVAwMmloMVlqZTNJcDRuUjU4L3lWdGhYMzhJb3VVMW9O
aVNOVjNqaEt5WGJEZXl5Rm1ldlRJM2NIYmNvbkt1Uw0KK3M1T0plYVp1OExQMTBCeE5nVkNNK1Fv
VWFGUFI3MzIvdHBMaDF2NE5UaExIYm9WZnlSSTk1U2dPMGtFYW1BSQ0Kdy9acmhybXc1V2xwMDBr
TlNXUWttbXpJL2YxNGx6aERVZWExc1QvY2s1eW5kZDlxSFBuL0NTZ2grL2xPUSs3cA0KZFY4QW9p
Zkhhd2tOL0NCQmdUd1YvdkpwbmZ4ZVlTN21LUktzdVNxVjlpa2Z1L21aVCtyT1dtMVFGcmVJWFVY
Qg0KQ0FXNUFRMEVVRlNsVWdFSUFLUG5GNVMyVkwwTWMvdUhrc0paSlBEMi9nUTEwK2Q3NEFUb0lN
bTdyR0lhaHI5Vg0KSElpU3JrVnczZ1V1NUg3U3N3R2RWNXR1TlhBOEVkRGo0Y1pIL0hrSlVOVmd2
b2dBazdncEhIUXBlMWJja240aw0Kd1VoMUlaaVRnRFJQelk0M2JEVXNlTndQTEJpeUlCMlRuK21B
cUJhMnQ1YjZ0VEZ6MnVvWjBPSHpCb2lPTlNqNw0KYnNzc2Q0Y0U4ZUYzSUxhU2E5U05KZE4zdW1l
TGZRMmR2cW04T05rUmdSYzRCVnIzOVFVa1VMaHo2dXhNVGJrcg0KMlpveHBhdk1ncUtCR2FIbGsx
U0x1QkNVV0MvNGNpVXR5c0x2UXFQODJDVE5yNHNDRWdKRTdicWhJam90N2RxWQ0KNVE2dWloUEZx
QWMzazl1bXdpWE4ySU1BU1YrYjVxWXpYN1JPMU1FQUVRRUFBWWtCSHdRWUFRSUFDUVVDVUZTbA0K
VWdJYkRBQUtDUkJlYjNLN25UZTBjR1NBQ0FDKzg1K1E3U0hPNGtFVm5lWFJESmhINWRBMWc5K1c0
Qm42cy9vNA0KNUxsK0tod2tGYlEwaFI3MTQvNjVxT2NpVFExVjRySlF6bTNqOHdTUEMrTGtCSkE4
MnNmMzRYbnh0QW9malhlbg0KdkVHcXZmenVRNkQxQjZOUXdpN0JKWHBZTFdjYmF1ZDFtTGw3THZY
N0ZwT2pNazVzaEJvUGxXUnQ2Q0IvU2N0Zw0KbWpwRW5qZ2MzU1l6U2NHcDZ6NWVGOHlRcFV5eHo5
RUpaMWlIUDRCL1ZGdzNUNUdZZ1pwQnVDSitid1h4UGE3Tw0Kc29DbFlmTlYxbVdEUVRSbkhDUUd0
cjhjelpLS3ZVdkxEMElNQWtKMXplUnZPakRvODNrV1FldTZ5U0xwOFNxMQ0KTm9NSlZpN25vdmRa
ZTcyamszZ0ZHUXRqV3R4dHB1WHMxNitCeWFlZkt3Qi8vY3ZKbVFFTkJGQlVwMGNCQ0FDNw0KN1pR
VVRCcXV0UmVHN20vTFUrbjdXb0t0ejh1WUFhRC9ubW9LNTlGLzVPUytCT3VPTHdEQ2JwSVBoZ0lJ
bXJuNg0KZUQrV1czZm0zUGNPOFVETUJqWEhRZjdYT2RUZys3cDA3QlRJTDlZWTJvd3hLaCtkc0Qy
a29qMFpNaENZSmxsTw0KbnA5aXhabG9jNk54a0pzRVRHbEZicEU2NVFRT2kzU1J2Uk0wTVdDbkgv
RWZsQTZwWUdTNmZXR1Y5N012SDhpRg0KdlNIdWZac0JyR3RwQ1pGSGJxbGl6NzZFVHQwZlZlUlY1
MjVLOHhNSU1ySzRCdmJhZHRMUzdubFcxamZLRVp4Vw0KMEFsZSt4VGFwa2VSRG56ZUc5bGtRYTJX
d3BzMEZDMDhQTURBNVAwSXFrbVBVUmh0NzJQQisrQlgwSnU3SHBkbg0KdmFUcVVCQ1RLdVB2VC9C
aVVYTnpBQkVCQUFHMEwzWnBjMmhsYzJnZ0tHZGhaU0J3WjNBcElEeDJhWE5vWlhObw0KTG5OcGJt
ZG9ZV3c1TVVCbmJXRnBiQzVqYjIwK2lRRTRCQk1CQWdBaUJRSlFWS2RIQWhzTkJnc0pDQWNEQWdZ
Vg0KQ0FJSkNnc0VGZ0lEQVFJZUFRSVhnQUFLQ1JEU29SSjJ3ZDM0ckdyV0NBQ1NkYWlXNVJFV0Fr
NytYNnNWU1NZYw0KckF1WjJwNmhNZ0lNbzN6VlV0cE5oZlg2blVQRXpSVlBneHVUS09UQk9NZEhG
WGxDMXY4ZWcvNEVRSnhJamZQMg0KVnR5aW5EZmFZaTNESnQrN2h3anR5Y0VKdjFwOTdMemRDeWZq
S1dHVVliaHhYbFNFN0RZbW5VVWpoaTk0N3hvOQ0KdjV6bjZtZUVNd3phdzNGdUZyMHN3S1JPRVhy
aERuQnRyVG4wS1BxUGdBNGpPVFE5L1Q0Q2Q5Sk4wc3V2UFY3QQ0KODNBL1RNYWVURjdNTytBSGpH
YlArTEMwbi8rVzRTTHQvTVRFTW82QmlJM3R5eUJaUGIzc20zblhxT3B2bUFUbQ0KSEkxOWpYcENS
TlBrWmZWSENjRSswbGN4NDNMOFdtdnU5NUhHNkJ2ZjJJMmdBUll1cHpaZ3ZiV3BwMVRzZnRWZw0K
PUV2TWo="/>
</atom:entry> 
```

怎么了？这与谷歌链接上给出的代码相同，带有 base64 编码的密钥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T05:18:09.193

我发现了导致错误的问题

我没有设置标题`application/atom+xml`

在发出请求之前还必须进行授权，因此必须在请求中设置一个额外的标头`Authorization: GoogleLogin auth={yourAuthToken}`

高温高压

# ruby-on-rails - 将简单的 Node.js 和 Socket.io 聊天应用程序与 Rails 应用程序连接起来（在 Heroku 上）

> ID：12439852
> 
> 赞同：3
> 
> 时间：2012-09-15T18:11:55.610
> 
> 标签：ruby-on-rails, node.js, heroku, socket.io

我有一个在 Heroku 上运行的基本 Node.js 和 Socket.io 聊天应用程序，我想将它集成到我的主要 Rails 网站中。我知道这样做的方法是拥有两个独立的 Heroku 应用程序 - 一个用于 Rails，一个用于 Node.js。

它似乎不像将客户端 html 从节点应用程序移动到 rails 应用程序那么简单（在 'io.connect();' 中将其他应用程序的 url 提供给它）。

聊天应用服务器似乎会自动调用客户端 index.html 它自己的应用程序，并且不允许外部源连接到它。删除执行此操作的代码（标记如下）不会使其工作。

我对 Node.js 和 Socket.io 很陌生，我希望这对于专业人士来说可能是一个相对简单的修复。

我相信我在这里追求的功能适用于 Liam Kaufman 的优秀 rails/node.js/socket.io 示例 - 他的 node.js 服务器代码在这里：[https ://github.com/liamks/Chatty-Node-Server/ blob/master/chat-server.js](https://github.com/liamks/Chatty-Node-Server/blob/master/chat-server.js)

我已经尝试将我的应用程序代码模拟为像他的一样，但还不能让它工作。例如，他似乎使用“http”服务器，而我的使用“express”服务器——我想知道这是否相关。

任何帮助将不胜感激。

**更新**: 好的，这是一个奇怪的转折点，感谢 redhotvengeance 在下面的回复，我已经完成了这个工作 - 服务器在 heroku 上，我的客户端 html 和 javascript 连接到它。太好了-下面的代码。但是，问题是客户端 html 文件仅在 Rails 应用程序之外时才连接！即在我的桌面上！！当我将它放在 rails 应用程序的 public/ 文件夹或我的本地主机上的视图中时，我什么也得不到！这是没有意义的。我检查了这不是因为我的资产管道中的任何其他随机错误的 javascript 通过创建一个新的 rails 应用程序并将 html 文件放入 public/ 文件夹中发生冲突 - 再次没有 - 只是一个没有连接的死 html 页面。有谁知道这里可能发生了什么？Rails 是否有一些安全功能可以阻止与外部服务器的连接或其他东西？

**更新2**：有人告诉我这与“同源政策”有关，我遇到了麻烦。有什么办法吗？利亚姆似乎没有这个问题。

客户：

```
<script src="http://calm-sands-3826.herokuapp.com/socket.io/socket.io.js" type="text/javascript"></script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script>
    var socket = io.connect('http://calm-sands-3826.herokuapp.com');

    // on connection to server, ask for user's name with an anonymous callback
    socket.on('connect', function(){
        // call the server-side function 'adduser' and send one parameter (value of prompt)
        socket.emit('adduser', prompt("What's your name?"));
    });

    // listener, whenever the server emits 'updatechat', this updates the chat body
    socket.on('updatelog', function (username, data) {
        $('#log').append('<b>'+username + ':</b> ' + data + '<br>');
    });

    // listener, whenever the server emits 'updateusers', this updates the username list
    socket.on('updateusers', function(data) {
        $('#users').empty();
        $.each(data, function(key, value) {
            $('#users').append('<div>' + key + '</div>');
        });
    });

</script>
<div style="float:left;width:100px;border-right:1px solid black;height:300px;padding:10px;overflow:scroll-y;">
    <b>USERS</b>
    <div id="users"></div>
</div>
<div style="float:left;width:300px;height:250px;overflow:scroll-y;padding:10px;">
    <div id="log"></div>
</div> 
```

服务器：

```
var port = process.env.PORT || 5001;

var io = require('socket.io').listen(parseInt(port));

io.configure(function(){
  io.set("transports", ["xhr-polling"]); 
  io.set("polling duration", 10); 
  io.set("close timeout", 10);
  io.set("log level", 1);
})

// usernames which are currently connected to the chat
var usernames = {};

io.sockets.on('connection', function (socket) {

    // when the client emits 'adduser', this listens and executes
    socket.on('adduser', function(username){
        // we store the username in the socket session for this client
        socket.username = username;
        // add the client's username to the global list
        usernames[username] = username;
        // echo to client they've connected
        socket.emit('updatelog', 'SERVER', 'you have connected');
        // echo globally (all clients) that a person has connected
        socket.broadcast.emit('updatelog', 'SERVER', username + ' has connected');
        // update the list of users in chat, client-side
        io.sockets.emit('updateusers', usernames);
    });

    // when the user disconnects.. perform this
    socket.on('disconnect', function(){
        // remove the username from global usernames list
        delete usernames[socket.username];
        // update list of users in chat, client-side
        io.sockets.emit('updateusers', usernames);
        // echo globally that this client has left
        socket.broadcast.emit('updatelog', 'SERVER', socket.username + ' has disconnected');
    });
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T16:57:58.473

如果您尝试将 Rails 应用程序中的页面连接到运行 socket.io 的单独 Node.js 应用程序，则完全跳过设置 Express。您并不希望真正从您的 Node 应用程序中提供页面，只需将用户连接到 socket.io 服务器。

假设您在 Heroku 上的 Node.js 应用程序名为：`my-awesome-socket-app`.

`my-awesome-socket-app`：

```
var io = require('socket.io').listen(parseInt(process.env.PORT));

io.configure(function () { 
  io.set("transports", ["xhr-polling"]); 
  io.set("polling duration", 10); 
});

io.sockets.on('connection', function (socket) {
  socket.on('disconnect', function () {
    io.sockets.emit('user disconnected');
  });
}); 
```

然后，在您想要连接到 socket.io 服务器的 Rails 页面中：

```
<script src="http://my-awesome-socket-app.herokuapp.com/socket.io/socket.io.js"></script>
<script>
  var socket = io.connect('http://my-awesome-socket-app.herokuapp.com');
  socket.on('connect', function (data) {
    console.log('connected!');
  });
</script> 
```

# python - 在Python中删除两个字符之间的字符

> ID：12439853
> 
> 赞同：2
> 
> 时间：2012-09-15T18:11:59.450
> 
> 标签：python, string

我的输入字符串如下所示：

`"1,724,741","24,527,465",14.00,14.35,14.00,14.25`

我希望输出看起来像这样：

`1724741,24527465,14.00,14.35,14.00,14.25`

我玩过 re.sub，但仍然无法弄清楚。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T18:19:58.290

[csv 模块](http://docs.python.org/library/csv.html)很好地处理了引用：

```
>>> s = '"1,724,741","24,527,465",14.00,14.35,14.00,14.25'
>>> import csv
>>> r = csv.reader([s])
>>> for row in r:
...     print ','.join(x.replace(",", "") for x in row)
... 
1724741,24527465,14.00,14.35,14.00,14.25 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T18:15:36.030

一个非常hacky的解决方案是使用`ast.literal_eval()`：

```
>>> from ast import literal_eval
>>> s = '"1,724,741","24,527,465",14.00,14.35,14.00,14.25'
>>> print ",".join(x.replace(",", "") if isinstance(x, str) else str(x)
...                for x in literal_eval(s))
1724741,24527465,14.0,14.35,14.0,14.25 
```

请注意，这也会重新格式化浮点数。

**编辑**：由于您显然是在处理 CSV 文件和带有千位分隔符的整数，因此可能是更清洁的解决方案

```
import csv
import locale

locale.setlocale(locale.LC_ALL, 'en_GB.UTF8')
converters = [locale.atoi] * 2 + [locale.atof] * 4
with open("input.csv", "rb") as f, open("output.csv", "wb") as g:
    out = csv.writer(g)
    for row in csv.reader(f):
        out.writerow([conv(x) for conv, x in zip(converters, row)]) 
```

您将需要`en_GB.UTF8`用您的机器支持的语言环境进行替换（并使用逗号作为千位分隔符）。

# php - 通过 javascript 重定向 html 传递 php 变量？

> ID：12439856
> 
> 赞同：1
> 
> 时间：2012-09-15T18:12:30.660
> 
> 标签：php, javascript, html, pass-by-reference

我正在通过 PHP 创建一个 SQL 表查看页面，并且我正在尝试通过表中的链接创建弹出窗口。我有一个 php 变量 $formID 我正在通过回显一个 javascript 脚本来制作一个弹出窗口，例如

```
echo "<td style='border:1px solid black;'>'<script type=\'text/javascript\'>window.open(\'awards.php?formID\',\'Window1\',
\'menubar=no,width=430,height=360,toolbar=no\');</script>'</td>"; 
```

这会将 $formID 传递给 Awards.PHP 还是我做错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T18:17:05.877

`awards.php?formID`这不会传递表单 id，因为 php 不将其识别为变量并替换为它的值。使用`awards.php?form_id={$formID}`

你收到像这样的变量`$getformID = $_GET['form_id'];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T18:20:04.080

**尝试这个：**

```
echo '<td style="border: 1px solid black;"><script type="text/javascript">window.open(\'awards.php?formID='.urlencode($formID).'\', \'Window1\', \'menubar=no,width=430,height=360,toolbar=no\');</script></td>'; 
```

从 Awards.php 中，您可以像这样得到它：

```
$formID = urldecode($_GET['formID']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T18:20:47.810

```
echo "<td style='border:1px solid black;'><script type='text/javascript'>window.open('awards.php?formID={$formID}','Window1','menubar=no,width=430,height=360,toolbar=no');</script></td>"; 
```

那可能会奏效。然后在您的其他页面上，使用`$_GET['formID']`.

您不需要转义单引号，因为它们都在一组双引号中。只有在嵌套同类型的引号时才需要这样做。

你也可以这样做：

```
"part of your string " . $formID . " rest of my string"; 
```

或者

```
"part of your string {$formID} rest of my string." 
```

有关此[复杂（卷曲）语法的更多信息](http://php.net/manual/en/language.types.string.php#language.types.string.parsing.complex)

# mysql - 单表或多表-规范化

> ID：12439859
> 
> 赞同：1
> 
> 时间：2012-09-15T18:12:47.217
> 
> 标签：mysql, database-design

我有一个你可能很容易回答的问题

我在下面有一个图像表

一张图片可以有多种尺寸——三个表格是不是更好的做法

一个图像详细信息表将 image_details 连接到 image_paths 的另一个表和连接到图像路径的另一个 table-image_sizes 。

或者最好将所有图像尺寸放在图像表中。实际上，我有一张图像，但尺寸不同。寻找优化的最佳选择。所有图像都将具有每种图像尺寸，因此对于某些没有特定尺寸的图像，将来不会有冗余。我不确定是否最好使用另一张桌子，以防我们添加其他尺寸。但是我可以在图像表中添加另一列以获得新的图像大小

**图像表**

```
CREATE  TABLE IF NOT EXISTS `warrington_main`.`image` (  
  `id` MEDIUMINT(8) UNSIGNED NOT NULL AUTO_INCREMENT ,  
  `user_id` BIGINT(20) UNSIGNED NOT NULL ,  
  `alias_title` VARCHAR(255) NOT NULL ,  
  `address_id` BIGINT(20) NULL ,  
  `geolocation_id` BIGINT(20) NULL ,  
  `camera_id` MEDIUMINT(8) NULL ,  
  `title` VARCHAR(100) NOT NULL ,  
  `description` VARCHAR(2000) NOT NULL ,  
  `main_image` VARCHAR(50) NOT NULL ,  
  `thumbnail_image` VARCHAR(50) NOT NULL ,  
  `thumbnail_image_medium` VARCHAR(50) NOT NULL ,  
  `thumbnail_image_small` VARCHAR(50) NOT NULL ,  
  `thumbnail_image_gallery` VARCHAR(50) NOT NULL ,  
  `hits` BIGINT(20) UNSIGNED NOT NULL DEFAULT '0' ,  
  `show_comment` ENUM('0','1') NOT NULL ,  
  `feature_in_gallery` ENUM('0','1') NOT NULL ,  
  `created_on` DATETIME NOT NULL DEFAULT '0000-00-00 00:00:00' ,  
  `date_taken` DATETIME NOT NULL DEFAULT '0000-00-00 00:00:00' ,  
  `updated_on` DATETIME NOT NULL DEFAULT '0000-00-00 00:00:00' ,  
  `updated_by` BIGINT(20) UNSIGNED NOT NULL ,  
  `approved` ENUM('Inprocess','Yes','No') NOT NULL DEFAULT 'Inprocess' ,  
  `visible` ENUM('0','1') NOT NULL DEFAULT '0' ,  
  `account_type_created` ENUM('S','Y', 'G', 'FL', 'FB') NOT NULL ,  
  PRIMARY KEY (`id`) ,  
  UNIQUE INDEX `alias_title` (`alias_title` ASC) ,  
  INDEX `title` (`title` ASC) ,  
  INDEX `approved` (`approved` ASC) ,  
  INDEX `visible` (`visible` ASC) ,  
  INDEX `feature_in_gallery` (`feature_in_gallery` ASC) ,  
  INDEX `fk_image_image_user1_idx` (`user_id` ASC) ,  
  INDEX `fk_image_camera1_idx` (`camera_id` ASC) ,  
  INDEX `fk_image_address1_idx` (`address_id` ASC) ,  
  INDEX `fk_image_geolocation1_idx` (`geolocation_id` ASC) ,  
  INDEX `fk_image_user1_idx` (`updated_by` ASC) ,  
  CONSTRAINT `fk_image_image_user1`  
    FOREIGN KEY (`user_id` )  
    REFERENCES `warrington_main`.`user` (`id` )  
    ON DELETE NO ACTION  
    ON UPDATE NO ACTION,  
  CONSTRAINT `fk_image_camera1`  
    FOREIGN KEY (`camera_id` )    
    REFERENCES `warrington_main`.`camera` (`id` )  
    ON DELETE NO ACTION  
    ON UPDATE NO ACTION,  
  CONSTRAINT `fk_image_address1`  
    FOREIGN KEY (`address_id` )  
    REFERENCES `warrington_main`.`address` (`id` )
    ON DELETE NO ACTION  
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_image_geolocation1`  
    FOREIGN KEY (`geolocation_id` )  
    REFERENCES `warrington_main`.`geolocation` (`id` )  
    ON DELETE NO ACTION  
    ON UPDATE NO ACTION,  
  CONSTRAINT `fk_image_user1`    
    FOREIGN KEY (`updated_by` )    
    REFERENCES `warrington_main`.`user` (`id` )    
    ON DELETE NO ACTION    
    ON UPDATE NO ACTION)    
ENGINE = InnoDB    
AUTO_INCREMENT = 23162    
DEFAULT CHARACTER SET = utf8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T18:27:25.383

> 一个图像详细信息表将 image_details 连接到 image_paths 的另一个表和连接到图像路径的另一个 table-image_sizes 。

This is not normalization and is referred to as [Vertical Partitioning](http://en.wikipedia.org/wiki/Partition_%28database%29) where you want the primary details of an object to be present in one table and the auxiliary details that occupy more space (in general) and are not part of general filtering criteria are moved to a different table. This is done to reduce the size of each record of the first table so that there will be more number of records in each database page and hence less number of pages to go through during filtering, less IO and faster search ability.

In your case, it seems fine to retain all attributes of an image in a single table.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T18:22:27.103

好吧，您应该在使用多个表的情况下进行规范化，并且不要将相同的信息存储在多个地方。这种冗余避免了任何应用程序生命周期后期的数据问题。

因此，在您的情况下`IMAGE_SIZE`，应该是另一个`IMAGE_ID`定义为外键的表。

```
IMAGE
    ID
    IMAGE_ATTRIBUTES

IMAGE_SIZE
    ID
    IMAGE_ID
    SIZE_ATTRIBUTES 

 IMAGE_PATH
    IMAGE_ID or IMAGE_SIZE_ID (depends)
    PATH 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T18:24:43.123

在这种情况下，一张桌子可能是处理它的方法。如果所有图像 X 都有所有尺寸，并且您可能不太可能添加大量不同尺寸。

三张表也可以，但是当您并没有真正获得太多收益时，为什么还要处理联接。

```
Images
    ImageDetailsId (PK)
    ImageSizeId (PK)
    URL
    ...

Image_Details
   ImageDetailsId
   ...

Image_Sizes (where this table is relatively static - small, medium, large..)
   ImageSizeID
   ... (width? height? etc?) 
```

# linux - 复杂的外壳通配符

> ID：12439864
> 
> 赞同：1
> 
> 时间：2012-09-15T18:13:36.350
> 
> 标签：linux, shell, command-line, echo

我想使用 echo 显示（不是内容）以至少 2 个字符开头但不能以“an”开头的目录

例如，如果目录中有以下内容： `a as an23 an23 blue`

我只会 `as blue`回来

我试过`echo ^an*`了，但这也返回了 1 个字符的目录。

有什么办法我可以做到这一点的形式`echo globalpattern`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T20:35:27.863

您可以在 bash 中使用 shell 扩展通配符功能：

```
bash$ setsh -s extglob
bash$ echo !(@(?|an*)) 
```

该`!()`构造反转其内部表达式，请参阅[this](http://www.linuxjournal.com/content/bash-extended-globbing)了解更多信息。

在 zsh 中：

```
zsh$ setopt extendedglob
zsh$ print *~(?|an*) 
```

在这种情况下，`~`否定波浪号之前的模式。有关更多信息，请参阅[手册](http://zsh.sourceforge.net/Intro/intro_2.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T21:15:14.533

由于您希望名称中至少包含两个字符，因此您可以使用`printf '%s\n' ??*`在单独的行上回显每个这样的名称。然后，您可以消除那些以 开头的名称`an`，`grep -v '^an'`从而导致：

```
printf '%s\n' ??* | grep -v '^an' 
```

`grep`在现代 shell的命令中，引号并不是绝对必要的。大约25 年以前，Bourne shell`^`是 的同义词，`|`所以我仍然在插入符号周围使用引号。

如果您绝对必须使用`echo`而不是`printf`，那么您必须将空格映射到换行符（假设您没有任何包含空格的名称）。

* * *

> 我正在尝试只使用 echo 命令，也没有 grep？

关于什么：

```
echo [!a]?* a[!n]* 
```

`a`第一项列出了所有不以;开头的两个加字符名称。`a`第二个列出了第一个是第二个不是的所有双加字符名称`n`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T18:53:29.573

这应该可以，但你可能会更好 ls 甚至找到：

```
echo * | tr ' ' '\012' | egrep '..' | egrep -v '^an' 
```

Shell globbing 是正则表达式的一种形式，但它不如 egrep 正则表达式强大。

# c - 与位置无关代码 (PIC) 有什么关系？

> ID：12439871
> 
> 赞同：4
> 
> 时间：2012-09-15T18:14:45.330
> 
> 标签：c, compilation

有人可以解释为什么我应该对编译与位置无关的代码感兴趣，以及为什么我应该避免它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T18:26:19.000

使代码位置独立增加了一个抽象层，这需要在运行时对某些操作进行额外的查找步骤（通常与使用静态存储访问变量有关）。

因此，如果您不需要它，请不要使用它！

在某些特定情况下，您必须生成 PIC（即在创建运行时可加载代码时，例如插件模块或库），但增加的灵活性是有代价的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-15T18:28:24.910

血淋淋的细节取决于您的加载器如何处理您是构建可执行文件还是库，但从某种意义上说，这完全是构建系统和编译器的问题，而不是您的问题。

如果您真的想了解，您需要考虑在执行开始之前代码在地址空间中的位置以及您的芯片提供的分支指令集。分支是相对的还是绝对的？对数据段的访问是相对的还是绝对的？

*   如果分支是绝对的，那么代码必须加载到可靠的地址，否则它将无法工作。那是位置相关的代码。许多简单（或较旧）的操作系统通过始终将程序加载到同一位置来适应这一点。

*   相对分支意味着可以放置在内存中的任何位置。那是与位置无关的代码。

* * *

同样，您*需要*知道的只是在您的平台上调用编译器和链接器的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T18:27:46.537

PIC 代码通常必须稍大一些，因为编译器不能使用编码相对地址偏移的指令。如果没有 PIC，许多地址可以用相对于当前 PC 的 16 位或 8 位进行编码。有时在嵌入式系统中，PIC 很有用。例如，如果您想拥有可以在各种物理地址上运行的补丁代码。

# c - 将立体声流拆分为两个单声道流

> ID：12439873
> 
> 赞同：0
> 
> 时间：2012-09-15T18:14:55.113
> 
> 标签：c, stream, split, fmod

我已经使用 Fmod (c/c++) 几天了，我想知道是否有办法将单个立体声流（左/右）拆分为两个单声道流，从而将它们放在两个通道中而不是一个通道中（为了有两个单独的卷和平底锅）？谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T15:52:40.283

我知道的一种方法是，如果您在一个声音上创建两个通道，然后`channel.setInputChannelMix({0, 1}, 1)`用于控制音频到通道

# ios - 用新的 UIView 替换 self.view 显示黑色视图

> ID：12439875
> 
> 赞同：3
> 
> 时间：2012-09-15T18:15:16.393
> 
> 标签：ios, uiview, uiviewcontroller

我想将 UIViewController 中的现有视图更改为新视图。新视图包含旧视图和一个小横幅视图。

做这个相当简单的改变给我留下了一个黑色的看法。

我的代码看起来像这样

```
UIView *existingView = self.view;
UIView *newView = [[UIView alloc] initWithFrame:existingView.frame];
UIView *bannerView = [[UIView alloc] initWithFrame:CGRectMake(0, (self.view.frame.size.height - 50), 320, 50)];

CGRect existingViewFrame = existingView.frame;
existingViewFrame.size.height -= 50;
existingView.frame = existingViewFrame;

[newView addSubview:existingView];
[newView addSubview:bannerView];

self.view = newView; 
```

但是，当切换选项卡并返回到更改视图的视图时，会像我想要的那样显示。我想我需要设置一个标志或其他东西来告诉控制器重绘它的（新）视图。

**编辑**

我为这个问题写了一个简单的例子。你可以在 GitHub 上找到它：[https ://github.com/Oemera/ChangeView](https://github.com/Oemera/ChangeView)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T12:31:39.493

你没有说你在哪里做这个。可能您需要保存原始视图的超级视图，然后将新视图添加到该视图的子视图数组中。我打赌这就是问题所在。

# javascript - JavaScript Dropdown - 单击按钮并根据所选值重定向到 url

> ID：12439878
> 
> 赞同：0
> 
> 时间：2012-09-15T18:15:28.640
> 
> 标签：javascript, html, forms

我有这个表单，现在需要在用户选择游戏类型和插槽后创建一个重定向，然后按下名为“buynow.png”的图像按钮。

如果用户选择“public”，他将被重定向到“www.domain.com/public.html”，否则如果它的“private”转到“www.domain.com/private.html”

这里是实际代码

```
<div>
<form name="f1">
    <div>
        <select name="server_type" onchange="change_selection()">
            <option value="0" selected>Select</option>
            <option value="1">Public</option>
            <option value="2">Private</option>
        </select>
    </div>
    <div>
        <select name="server_slots">
            <option value="-">-</option>
        </select>
    </div>
    <div>
        <a><img src="images/bBuyNow.png" border="0" /></a>
    </div>
</form>

<script language="javascript" type="text/javascript">
    var slots_1=new Array("10 Players","11 Players","12 Players")
    var slots_2=new Array("10 Players","11 Players","12 Players")

    function change_selection(){
    var server_type
    server_type = document.f1.server_type[document.f1.server_type.selectedIndex].value
    if (server_type != 0) {
        slots_selected=eval("slots_" + server_type)
        cant_slots = slots_selected.length
        document.f1.server_slots.length = cant_slots
        for(i=0;i<cant_slots;i++){
        document.f1.server_slots.options[i].value=slots_selected[i]
        document.f1.server_slots.options[i].text=slots_selected[i]
    }
    }else{
        document.f1.server_slots.length = 1
        document.f1.server_slots.options[0].value = "-"
        document.f1.server_slots.options[0].text = "-"
    }
        document.f1.server_slots.options[0].selected = true
    }                                   
</script>
</div> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T18:36:54.200

我不知道你在用插槽做什么，但你可以使用重定向`window.location.href`

```
 <div>
        <form name="f1">
            <div>
                <select name="server_type" onchange="change_selection()">
                    <option value="0" selected>Select</option>
                    <option value="1">Public</option>
                    <option value="2">Private</option>
                </select>
            </div>
            <div>
                <select name="server_slots">
                    <option value="-">-</option>
                </select>
            </div>
            <div>
                <a><img src="images/bBuyNow.png" border="0" href="javascript:viod(0)" onclick="redirecturl();"/></a>
            </div>
        </form>

        <script language="javascript" type="text/javascript">
            var slots_1=new Array("10 Players","11 Players","12 Players");
            var slots_2=new Array("10 Players","11 Players","12 Players");

            function redirecturl(){
            var server_type;
            server_type = document.f1.server_type[document.f1.server_type.selectedIndex].value;

var selectedslot = document.f1.server_slots[document.f1.server_slots.selectedIndex].value;
            if (server_type == 1) {
               window.location.href="www.domain.com/public.html?slot="+selectedslot ;
            }
            }else if(server_type == 2){
             window.location.href="www.domain.com/private.html?slot="+selectedslot;
            }
            else{
             alert('please select a value');
             return;
                }
            }                                   
        </script>
        </div> 
```

# wordpress - 这个 Wordpress 错误是什么意思？警告：无法修改标头信息

> ID：12439884
> 
> 赞同：0
> 
> 时间：2012-09-15T18:16:06.183
> 
> 标签：wordpress, wordpress-theming

警告：无法修改标头信息 - 标头已由（输出开始于 /home/quickcli/public_html/wp-content/plugins/ubermenu/ubermenu.php:1）在 /home/quickcli/public_html/wp-login.php 上发送第 362 行

警告：无法修改标头信息 - 标头已由（输出开始于 /home/quickcli/public_html/wp-content/plugins/ubermenu/ubermenu.php:1）在 /home/quickcli/public_html/wp-login.php 上发送第 374 行

警告：无法修改标头信息 - 标头已由 /home/quickcli/public_html/wp-includes/pluggable 中的（从 /home/quickcli/public_html/wp-content/plugins/ubermenu/ubermenu.php:1 开始的输出）发送。第 697 行的 php

警告：无法修改标头信息 - 标头已由 /home/quickcli/public_html/wp-includes/pluggable 中的（从 /home/quickcli/public_html/wp-content/plugins/ubermenu/ubermenu.php:1 开始的输出）发送。第 698 行的 php

警告：无法修改标头信息 - 标头已由 /home/quickcli/public_html/wp-includes/pluggable 中的（从 /home/quickcli/public_html/wp-content/plugins/ubermenu/ubermenu.php:1 开始的输出）发送。第 699 行的 php

警告：无法修改标头信息 - 标头已由 /home/quickcli/public_html/wp-includes/pluggable 中的（从 /home/quickcli/public_html/wp-content/plugins/ubermenu/ubermenu.php:1 开始的输出）发送。第700行的php

警告：无法修改标头信息 - 标头已由 /home/quickcli/public_html/wp-includes/pluggable 中的（从 /home/quickcli/public_html/wp-content/plugins/ubermenu/ubermenu.php:1 开始的输出）发送。第701行的php

警告：无法修改标头信息 - 标头已由 /home/quickcli/public_html/wp-includes/pluggable 中的（从 /home/quickcli/public_html/wp-content/plugins/ubermenu/ubermenu.php:1 开始的输出）发送。第 702 行的 php

我已经尝试了我能想到的一切，但它不起作用。

任何帮助深表感谢。

本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T18:27:03.193

`<?php`这是一个常见的 php 问题（影响任何运行 php 的程序，包括 WordPress），与开始声明之前 php 文件顶部的空格和不可见的垃圾字符有关。

转到 ubermenu.php 文件并在开始声​​明之前退格所有空格。如果这不起作用，请通过 FTP 删除整个插件并尝试重新上传。如果这仍然不起作用，请重新上传 wp-includes 文件夹的新副本。

并查看[常见问题解答疑难解答 >> Headers_already_sent_warning « WordPress Codex](http://codex.wordpress.org/FAQ_Troubleshooting#How_do_I_solve_the_Headers_already_sent_warning_problem.3F)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T18:29:11.293

这是一个插件问题，由 pluggable.php 报告。尝试禁用超级菜单。确保您拥有兼容版本的 Wordpress 和插件。

# visual-studio-2010 - 如何设置VS2010环境

> ID：12439885
> 
> 赞同：2
> 
> 时间：2012-09-15T18:16:16.360
> 
> 标签：visual-studio-2010

在你安装VS2010并第一次启动后，你问你希望你的VS环境如何设置，例如：C#、Web Developer、VB等...

以后如何更改此设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T18:26:27.330

重置您的设置

在**工具**菜单上，单击**导入和导出设置**。

在**欢迎使用导入和导出设置向导**页面上，单击**重置所有设置**，然后单击**下一步**。

然后，您可以选择是否保存旧设置，然后单击**Next**。

在**您要重置到**的设置集合中，从列表中选择一个设置集合。这是您选择例如 C# 的地方。

按**完成**，你就完成了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T18:21:20.947

转到工具菜单>>导入和导出设置>>重置所有设置。按照向导的说明选择所需的语言作为默认开发环境。

# ruby-on-rails - 在 Rails/ActiveRecord 中，两个模型类相互拥有属于

> ID：12439895
> 
> 赞同：1
> 
> 时间：2012-09-15T18:17:14.427
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, orm, ruby-on-rails-3.2

我有一个课程模型的版本控制机制：

```
class Lesson < ActiveRecord::Base
  attr_accessible :lesson_version_id, :number
  belongs_to :lesson_version
end

class LessonVersion < ActiveRecord::Base
  attr_accessible :lesson_id, :version
  belongs_to :lesson
end 
```

`Lesson`和之间存在一对多的关系`LessonVersion`。我`belongs_to :lesson`在`LessonVersion`课堂上对此进行了建模。现在，我不会处理`has_many :lesson_versions`这种关系的“课程”部分。

其次，我还需要知道每节课的最新版本，以便能够立即上手。所以在`Lesson`模型中我需要引用一个`LessonVersion`. 我想这是一种1-1类型的关系。

以这种方式建模有意义吗？我会`belongs_to`在每节课上遇到麻烦吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T18:54:51.440

我认为您正在寻找的是 has_and_belongs_to_many，它指定了与另一个类的多对多关系。

[http://apidock.com/rails/ActiveRecord/Associations/ClassMethods/has_and_belongs_to_many](http://apidock.com/rails/ActiveRecord/Associations/ClassMethods/has_and_belongs_to_many)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T19:00:34.550

我不会创建另一个关系，而是使用`LessonVersion`.

```
class Lesson < ActiveRecord::Base
  attr_accessible :number
  has_many :lesson_versions

  def most_recent_version
    lesson_versions.most_recent.first
  end
end

class LessonVersion < ActiveRecord::Base
  attr_accessible :lesson_id, :version
  belongs_to :lesson
  scope :recent, order("created_at DESC")
end 
```

`"version DESC"`此外，如果版本是随每个新版本增加的整数，您可能更喜欢排序。

**编辑**：阅读您的评论后，我有两个建议。

**建议一**

使用我上面的解决方案，但使用`"version DESC"`排序，当您想恢复到旧版本时，请复制它并使其成为最新版本。然后你有所有编辑的历史并且不需要

至于查询中的顺序，如果您在数据库上`version`和`lesson_id`数据库中添加复合索引，这将是一个微不足道的操作。此外，调用`#first`范围很有效，它将查询`LIMIT 1`并仅实例化您关心的记录。如果您需要在同一个请求中多次使用此方法，查询的结果会自动缓存。

**建议二**

在课程上设置一个belongs_to，但将其命名为：current_version，以防止混淆。

```
class Lesson < ActiveRecord::Base
  attr_accessible :number, :current_version_id
  has_many :lesson_versions
  belongs_to :current_version, :class_name => "LessonVersion"
end

class LessonVersion < ActiveRecord::Base
  attr_accessible :lesson_id, :version
  belongs_to :lesson
  scope :recent, order("created_at DESC")
end 
```

# python - 为什么命令提示符下的“pydoc -g”会调出安装在我系统上的 python 库，但我不能从 Python 解释器执行该命令？

> ID：12439896
> 
> 赞同：0
> 
> 时间：2012-09-15T18:17:37.047
> 
> 标签：python, command-prompt, iterm, pydoc

为什么要打字：

```
 [user_name]$ pydoc -g 
```

在 iTerm（命令提示符）中调出我计算机上模块的 python 索引，但我无法从 Python 解释器运行该行？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T18:23:36.617

pydoc 是一个命令行程序`/usr/bin/pydoc`。在 Python 解释器中，您只能访问 Python 类和模块。

如果你想从解释器做同样的事情，你可以导入`pydoc`模块，然后调用`pydoc.gui()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T18:23:11.467

因为 Pydoc 不是对 Python 标准库中内置的某些功能的调用。Pydoc 是一个外部程序，它在 Python 代码上运行函数。它适用于 iTerm，因为 iTerm 可以调用此类程序。例如，您应该能够从 iTerm 调用和之类的程序`cat`， 因为它可以与这些外部程序一起使用。但是 Python 无法通过其解释器使用这些。`grep``vim`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T18:27:32.653

```
>>> import subprocess
>>> subprocess.Popen("pydoc -g", stdout=subprocess.PIPE, shell=True).stdout.read() 
```

以上将调用操作系统可执行文件

# excel - Sheet_variable.UsedRange.Column 没有给出预期/期望的结果。为什么？

> ID：12439900
> 
> 赞同：0
> 
> 时间：2012-09-15T18:19:08.720
> 
> 标签：excel, excel-2007, vba

我有兴趣在 Excel VBA 中使用类型工作簿的变量，我将在其中保存这样的 Excel 文件：

```
Set mWB = Application.Workbooks("C:\Central.xlsx") 
```

然后我想在 Sheet 变量中类似地保存来自该文件的工作表。

```
Set aWS = mWB.Sheets("Sheet1") 
```

**在 Central.xlsx 内的 Sheet1 中，我有 Range(A1:D6) 中的值**

但是，当我这样做时：`MsgBox aWS.UsedRange.Column`，我得到 1。**我期待 6（6 个填充的行）** ，当我这样做时：`MsgBox aWS.UsedRange.Row`我再次得到 1。**我期待 4 个（4 个填充行）。**

请问错在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T22:15:11.710

您可能打算`MsgBox aWS.UsedRange.Columns.Count`改用（末尾带有 s 的列） - 与行相同。

`Range.Row` [返回范围的第一行](http://msdn.microsoft.com/en-us/library/office/ff196952.aspx)。

# mysql - 查找最近 24 小时内的 mysql 更改

> ID：12439907
> 
> 赞同：1
> 
> 时间：2012-09-15T18:20:21.583
> 
> 标签：mysql

这篇文章非常好，显示了上次更改表的时间 [如何判断 MySQL 表上次更新的时间？](https://stackoverflow.com/questions/307438/how-can-i-tell-when-a-mysql-table-was-last-updated)

但我需要找出过去 24 小时内的变化和时间，因为变化不止一个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T18:24:39.767

你可以这样尝试：

```
SELECT * 
FROM information_schema.tables
WHERE UPDATE_TIME >= DATE_SUB(CURDATE(), INTERVAL 1 DAY) 
```

或者，

```
SELECT *
FROM  information_schema.tables
WHERE UPDATE_TIME >= SYSDATE() - INTERVAL 1 DAY 
```

# mysql - 数据库查询是否比在一台服务器上查找 LinkedIn 类型 2 度连接的算法更快？

> ID：12439917
> 
> 赞同：4
> 
> 时间：2012-09-15T18:21:32.640
> 
> 标签：mysql, algorithm, graph, graph-theory, graph-algorithm

我和朋友有一张桌子，`id, u1,` `u2`关于`< 500,000`单个 mysql 服务器上的条目

我想看看他们是否有共同的朋友`userA`。`userB`

做起来更快吗

```
select u2 from friends where u1 = userA and u2 IN (select u2 from friends where u1 = userB) 
```

而不是在图上（在一台服务器上）运行最短路径算法？

像LinkedIn和Facebook这样的大型网络用来处理这个问题的标准方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T19:19:20.207

如果表friends同时被u1和u2索引，那么SQL查询就是取2个子集的交集，速度相当快。这是因为索引已经完成。如果你在内存中进行计算，时间取决于你是否有预建索引：如果有，你会更快，因为没有数据库连接开销。如果索引包含在计算时间中，并且数据库已预热（内存中的所有数据），您可能会丢失。

我说的是索引，而不是最短路径算法，因为最短路径算法计算的数据比你需要的多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T19:23:33.310

在 MySQL 中，您编写的查询将比任何其他查找此信息的方式慢。也许比单独询问每个人要慢。您的查询：

```
select u2
from friends
where u1 = userA and
      u2 IN (select u2 from friends where u1 = userB) 
```

在 IN 子句中有一个子查询。MySQL 评估遇到的每一行的查询。更好的写法是：

```
select u2
from friends
where u1 = userA and
      exists (select 1 from friends where u1 = userB limit 1) 
```

如果您的数据都适合一台服务器并适合内存，那么优化的 MySQL 查询的性能应该没问题。LinkedIn 和 FaceBook 等网站正在处理无数问题——不断更新网络、大量数据、不同类型的链接等等。您的简单示例不能代表他们在做什么。但是，他们的许多分析将 Hadoop 或 Hadoop 与关系数据库结合使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T23:32:04.837

在图形数据库中，您可以在[gremlin](https://github.com/tinkerpop/gremlin/wiki)中将查询编写为：

```
g.V('username','userB').out('friend').retain(g.V('username','userA').out('friend').gather) 
```

大多数图形数据库应该快速执行此操作。

如果您使用 Titan，您还可以利用 Titan 按排序顺序维护相邻顶点，这意味着您只需对数据进行一次迭代即可计算两个好友列表的交集，而无需创建额外的数据结构。这可能会比 MySQL 更快，如果平均朋友数量很大，则速度会更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T19:18:53.827

您确实必须尝试一下并根据自己的数据进行比较。看看[cassovary](https://github.com/twitter/cassovary)、[flockdb](https://github.com/twitter/flockdb)、neo4j 等

就个人而言，我会在内存中进行，因为您没有那么多条目。例如，尝试使用快速位操作 (AND) 的 BitSet。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T16:43:14.667

这是使用简单的二级连接的另一种方法`inner join`：

```
select fA.u2 
from friends fA 
inner join friends fB on
           fA.u2 = fB.u2 
where fA.u1 = userA and
      fB.u1 = userB 
```

这与多对多类型查询的方法相同。您不需要为该级别的关系使用最短路径。

如果您想寻找更大程度的关系，那么您应该查看邻接列表，但使用 MySQL 实现它并不容易。在该设置中需要真正注意一些问题：

*   不相交的图（可以通过在子图上维护传递闭包来处理，并在需要时合并它们），
*   有向图与无向图，
*   数据分布（另一个答案提到hadoop是一种加速处理的方法，但它需要一个好的分区方案）

仅举几例。

# algorithm - 在列表列表中快速查找

> ID：12439919
> 
> 赞同：3
> 
> 时间：2012-09-15T18:21:40.033
> 
> 标签：algorithm, haskell

考虑以下函数：

```
import Data.List (find)     
findInLists items = map $ find (`elem` items) 
```

可以这样调用，结果如下：

```
findInLists [2,3] [[1,2], [1,3,2], [4, -2, 8]] -> [Just 2, Just 3, Nothing] 
```

可以假设第一个参数已排序，但第二个参数不会排序。

if`n`是要搜索的所有列表中的项目总数（在这种特殊情况下为 7，因为一旦找到一个项目，搜索就会停止）并且`k`是要搜索的项目数，我相信这个函数的运行时间将是`O(n * k)`. 然而，这对大`k`时`n`是不利的。

如果可能的话，我希望运行时更像`O(n * log k) + O(k * log k)`或更好。最好的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T18:31:59.043

粘贴`items`在 a 中`Set`并使用[`member`](http://hackage.haskell.org/packages/archive/containers/0.5.0.0/doc/html/Data-Set.html#v:member).

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-15T18:36:15.993

```
import Data.Set (fromList,member)
import Data.List
findInLists :: Ord a => [a] -> [[a]] -> [Maybe a]
findInLists xs = map $ find $ flip member $ fromList xs 
```

`fromList xs`将需要`O(k log k)`一次，每个`find`都将`O(log k)`在最坏的情况下进行。因此，n 个元素的总时间 =`O(n log k) + O(k log k)`最坏情况。

# joomla - Joomla 2.5 自定义字段列表未在显示中选择

> ID：12439922
> 
> 赞同：4
> 
> 时间：2012-09-15T18:22:18.020
> 
> 标签：joomla, joomla2.5

我使用以下 php 在我的组件“/models/fields/time.php”中创建了一个自定义字段类型：

```
defined('JPATH_BASE') or die;

jimport('joomla.form.formfield');

class JFormFieldTime extends JFormField
{
    protected $type = 'time';

    public function getInput()
    {
        return '<select id="'.$this->id.'" name="'.$this->name.'">'.
        '<option value="08:00:00" > 8:00 AM</option>'.
        '<option value="09:30:00" > 9:30 AM</option>'.
        '</select>';
    }
} 
```

和我的 course.xml (/models/forms/course.xml) 如下：

```
 <field 
   name="starttime" 
   type="time" 
       label="COM_CEXPRESS_FORM_LBL_COURSE_STARTTIME"
       description="COM_CEXPRESS_FORM_DESC_COURSE_STARTTIME" 
       required="true" 
       filter="safehtml" /> 
```

表单将在数据库中保存正确的值（09:30:00），但在显示表单时（上午 8:00）未选择正确的值=“已选择”。但是，如果我将 course.xml 字段修改为：

```
 <field 
       name="starttime" 
       type="list" 
       label="COM_CEXPRESS_FORM_LBL_COURSE_STARTTIME"
       description="COM_CEXPRESS_FORM_DESC_COURSE_STARTTIME" 
       required="true" 
       filter="safehtml">
          <option value="08:00:00" > 8:00 AM</option>
          <option value="09:30:00" > 9:30 AM</option>
        </field> 
```

表单将正确显示（上午 9 点 30 分）“选定”数据库值。我在此页面上使用了 Joomla Docs：

[http://docs.joomla.org/Creating_a_custom_form_field_type](http://docs.joomla.org/Creating_a_custom_form_field_type)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T18:16:07.283

*您必须自己在getInput()*中设置选定的选项。*您可以使用$this->value*获取当前值。

除了自己打印元素之外，您还可以使用 JHTML：

```
public function getInput()
{
    $options = array(
        '08:00:00' => '8:00 AM',
        '09:30:00' => '9:30 AM'
    );

    return JHtml::_('select.genericlist', $options, $this->name, null, 'value', 'text', $this->value, $this->id);
} 
```

# c - 与管道的子父进程间通信

> ID：12439924
> 
> 赞同：-2
> 
> 时间：2012-09-15T18:22:30.660
> 
> 标签：c, fork, system-calls, inter-process-communicat

我试图理解父母和孩子之间的沟通。免责声明：以下是我的教授在课堂上提供的用于理解进程间通信的示例代码。我的主要弱点在于文件描述符。我知道 pipe(int array[2]) 使 array[0]=fd 用于 std in 和 array[1] 作为 std out。但这两者之间的沟通如何？我对CS相当陌生。谢谢！

```
/*
 * This program demonstrates the use of pipes for interprocess communication.
 * The parent process creates a pipe using the "pipe" system call. It then
 * creates a child process and passes the child a file descriptor for one side
 * of the pipe. It then writes a name to its side of the pipe and waits for the
 * child to print a message incorporating the name.
 *
 * Before you attempt to run this program, be sure you've compiled the program
 * named "hw3b.c" and have the executable in a file named "hw3b".
 */

#include <stdlib.h>
#include <strings.h>
#include <stdio.h>

/*
 * The name of the file we plan to run.  It's here in a define so that we can
 * change it easily
 */
#define CHILDPROCNAME "hw3b"

/*
 * The behavior of main() is specified by the previous comment
 */

int main(char* argv)
{
    // store the ids of the two file descriptors that serve as the pipe
    int mypipe[2];

    // make the pipe
    pipe(mypipe);

    // child code:
    if (fork() == 0) {
        // execv requires us to create a full invocation, consisting of the
        // string name of the program to run, a string for each command-line
        // argument, and then a null string.  We store all that in this array of
        // strings
        char* myargv[3];

        // we use this to turn an int into a string
        char buf[50];

        //  set up the name of the program to run
        myargv[0] = calloc(strlen(CHILDPROCNAME) + 1, sizeof(char));
        strcpy(myargv[0], CHILDPROCNAME);

        // write one of the pipe's fds to the second parameter
        sprintf(buf, "%d", mypipe[0]);
        myargv[1] = calloc(strlen(buf) + 1, sizeof(char));
        strcpy(myargv[1], buf);

        // third param is null
        myargv[2] = 0;

        // switch to child process
        execv(CHILDPROCNAME, myargv);

        // NB: this should use fprintf and write to stderr
        printf("Uh oh, execv didn't work!\n");

       // crash on failure
       exit(-1);
    }

    // parent code
    else {
       // status variable for storing the result of waitpid
       int status;

       // Send a string across the pipe to the child process
       write(mypipe[1], "Kerry", strlen("Kerry"));

       // wait for the child process to finish
       waitpid(-1, &status, 0);

       // NB: we should use status!
    }

    // close our half of the pipe
    close(mypipe[1]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T18:26:30.563

它只是`childproc`在您的程序中替换为`p1`. 他可能的意思是它取决于值 ie `p1`。

# jquery - 带有周末选择器的 jquery 多日期选择器？

> ID：12439926
> 
> 赞同：0
> 
> 时间：2012-09-15T18:23:16.967
> 
> 标签：jquery, plugins, calendar, datepicker

我需要创建一个日历/日期选择器，就像此页面上有一个... [http://www.villagevoice.com/calendar/?ref=navigation](http://www.villagevoice.com/calendar/?ref=navigation)

我已经使用 jquery 的 datepicker ui 来带来 datepicker 并从中获取单个值。但我似乎无法带来网站上已有的功能.. 有什么插件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T18:28:58.670

[http://dubrox.blogspot.com/2010/09/multiple-dates-picker-for-jquery-ui.html](http://dubrox.blogspot.com/2010/09/multiple-dates-picker-for-jquery-ui.html)

jQuery DatePicker 的伟大扩展以选择多个日期。

# google-app-engine - 如何在模板中使用 webapp2.uri_for？

> ID：12439937
> 
> 赞同：0
> 
> 时间：2012-09-15T18:24:48.613
> 
> 标签：google-app-engine, django-templates, webapp2

webapp2 说[webapp2.uri_for](http://webapp-improved.appspot.com/api/webapp2.html#webapp2.uri_for)是“可以传递给模板的独立 uri_for 版本”。听起来很完美。当我将它传递给 Django 模板渲染器时，如下所示：

```
import webapp2
from google.appengine.ext.webapp import template
self.response.out.write(template.render(path,
    { 'webapp2': webapp2 })) 
```

并将其放入模板中

```
Please <a href="{{ webapp2.uri_for('contact') }}">send us 
your feedback</a>. 
```

应用引擎 1.7.0 说

> TemplateSyntaxError：无法解析剩余部分：来自 'webapp2.uri_for('contact')' 的 '('contact')'

如果我改为

```
Please <a href="{{ webapp2 }}">send us your feedback</a>. 
```

表明

> 模块%20%27webapp2%27%20from%20%27/usr/local/google_appengine/lib/webapp2/webapp2.pyc%27%

所以我知道 webapp2 正在进入模板。

我怎样才能让这个东西工作？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-15T21:28:58.430

`google.appengine.ext.webapp.template` is a django template, yet your template markup examples are taken from Jinja2.

See this page for an example usage of webapp2 + Jinja2: [http://webapp-improved.appspot.com/api/webapp2_extras/jinja2.html](http://webapp-improved.appspot.com/api/webapp2_extras/jinja2.html)

Once you managed rendering a simple template, add `'uri_for': webapp2.uri_for` to the context or, better yet, add it to jinja2 globals.

So, for a Django template, as a primitive example, you could create a simple tag:

```
register = template.Library()

@register.simple_tag(name='uri_for')
def webapp2_uri_for(route_name):
    return webapp2.uri_for(route_name) 
```

and then use it in your templates like this:

```
{% uri_for 'contact' %} 
```

See this for details: [https://docs.djangoproject.com/en/dev/howto/custom-template-tags/](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)

# asp.net-mvc - MVC 电影教程中 MoviesController.cs 中的非法字符

> ID：12439939
> 
> 赞同：1
> 
> 时间：2012-09-15T18:25:24.617
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2

我正在按照 Microsoft ASP.NET MVC 3 教程学习 ASP.NET MVC。按照本教程中提到的说明：

[http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/accessing-your-model's-data-from-a-controller](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/accessing-your-model%27s-data-from-a-controller)

生成了 MoviesController.cs。当我按 F5 运行时，显示主网页。一切都很好。但是，当我按照说明将 URL 更改为 时`localhost:xxxx/Movies`，浏览器停止并且以下函数的代码行突出显示，并出现异常“路径中的非法字符”错误。该行的分号用红色下划线。

```
public ViewResult Index()
{
      return View(db.Movies.ToList());
} 
```

虽然我是 C# 和 ASP.Net 的新手，但该声明似乎正确且与教程中的示例代码一致。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-07-26T08:19:50.853

将 App_Data 文件夹添加到您的项目中。希望它可以工作。:)

# java - Java随机数生成器

> ID：12439942
> 
> 赞同：4
> 
> 时间：2012-09-15T18:25:38.957
> 
> 标签：java, random, biginteger

是否可以让用户选择随机数的位数，特别是随机大整数？例如，如果用户希望它为 15 位长，则随机数生成器将仅生成 15 位长的大整数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T18:30:00.703

您可以使用`BigInteger`指定二进制位数的构造函数：[`BigInteger(int numBits, Random rnd)`](http://docs.oracle.com/javase/6/docs/api/java/math/BigInteger.html#BigInteger%28int,%20java.util.Random%29). 对于用户想要的每三个十进制数字，您需要大约十个二进制数字。例如，如果您需要 30 位随机数`BigInt`，请使用 100 个二进制位。

可以使用 截掉不需要的数字，`remainder(10^30)`循环执行，保证初始数字不为零，保证位数正确，像这样：

```
Random rnd = new Random(123);
BigInteger tenPow30 = new BigInteger("10").pow(30);
BigInteger min = new BigInteger("10").pow(29);
BigInteger r;
do {
        r = new BigInteger(100, rnd).remainder(tenPow30);
} while (r.compareTo(min) < 0);
System.out.println(r); 
```

链接到[演示](http://ideone.com/mLyRC)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-15T18:29:08.253

您始终可以随机生成数字的单个数字。这样对于 15 位数字，您可以随机生成 15 位数字，然后形成数字。

其他方式：

让我们改变问题以生成随机的 5 位数字。

```
Min = 10000
Max = 99999 
```

现在生成一个介于`0`和之间的随机数，并将`Max - Min`其添加到.`0``89999``Min`

```
Random = Min + Math.random() * (Max - Min) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T18:52:58.223

以下是步骤：

1.  生成 n 个数字
2.  使用`StringBuilder`
3.  使用创建您的号码[`BigInteger(String)`](http://docs.oracle.com/javase/6/docs/api/java/math/BigInteger.html#BigInteger%28java.lang.String%29)

这是一些代码：

```
public static BigInteger randomBigInt(int digits, Random rand) {
    StringBuilder sb = new StringBuilder(digits);

    // First digit can't be 0
    sb.append(rand.nextInt(9) + 1);

    int limit = digits - 1;
    for (int i = 0; i < limit; i++)
        sb.append(rand.nextInt(10));

    return new BigInteger(sb.toString());
} 
```

这会分别生成每个数字并将它们添加到 a `StringBuilder`（与a`int`或其他可能会产生缓冲区溢出问题的东西相反），然后使用结果`String`来创建`BigInteger`. 另请注意，第一个数字永远不会是 0。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-07-29T15:20:58.007

使用像[这里的 RandomUtil 类](https://github.com/exp2Tapavicki/RandomDataGenerator/blob/master/RandomDataGenerator/src/java/com/rdg/util/RandomUtil.java)这样的随机生成器，您可以在一些值之间生成随机数等等。

例如，使用此代码将在 min=100000000000000 max=999999999999999 的范围内为 15 位数字：

```
BigInteger number = RandomUtil.getRandomBigInteger(new BigInteger("100000000000000"), new BigInteger("999999999999999"), false); 
```

# nhibernate - 在 NHibernate 中映射外键和引用而不创建额外的列

> ID：12439945
> 
> 赞同：3
> 
> 时间：2012-09-15T18:26:01.263
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping, fluent-nhibernate-mapping

我想将外键映射**为**POCO 属性**和**导航属性。[此处](https://stackoverflow.com/questions/3691366/fluent-nhibernate-how-to-map-a-foreign-key-column-in-the-mapping-class)示例中的 IE ，答案替换为外键

```
 public virtual int SongArtistID { get; set; } 
```

我想将该键保留在映射中。到目前为止我已经尝试过：

```
Map(x => x.ParentID);
References(x => x.Parent).Column("ParentID");

Map(x => x.ParentID);
References(x => x.Parent, "ParentID"); 
```

以及使用流利映射器的许多其他组合，但我无法让它工作。问题是该`References()`指令总是创建一个额外的列。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T02:30:19.103

您不会在 NHibernate 中两次映射相同的关系。

只是：

```
References(x => x.Parent, "ParentID") 
```

然后你用它来获得 FK 值：

```
var parentId = obj.Parent.Id; 
```

或者这个来分配它：

```
obj.Parent = session.Load<TheClassOfTheParent>(parentId); 
```

这些语句都不会导致 db 调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T09:20:59.027

事实证明，映射我展示的方式非常好。额外字段的问题是由关系的另一方造成的。我所拥有的是：

```
class ParentMap

        HasMany(x => x.Children)
            .Inverse()
            .Cascade.All();

class ChildMap

        Map(x => x.ParentID);
        References(x => x.Parent).Column("ParentID"); 
```

我必须在父项上指定列，`HasMany()`而不是在`Reference()`子项上指定列，如下所示：

```
class ParentMap

        HasMany(x => x.Children)
            .KeyColumn("ParentID") // Problem without this!
            .Inverse()
            .Cascade.All(); 
```

# java - 无法让应用程序在 Eclipse 中运行

> ID：12439947
> 
> 赞同：-1
> 
> 时间：2012-09-15T18:26:02.897
> 
> 标签：java, eclipse

我在 Eclipse 中放置了以下代码，但我无法让 Eclipse 让我将其作为 Java 应用程序运行。我可以在我编写它的计算机上这样做，但我已经尝试了两次，因为在两台不同的计算机上都没有这个选项。我尝试设置手动配置来执行此操作，并且尝试过`Alt+Shift+X`，但都没有成功。我可以在所有这些计算机上正常运行 Java 应用程序，只是由于某种原因不能在这台计算机上运行。

```
import java.util.Scanner;

public class Donor {

public String name;
public int age;
public double donation;

    Donor() {

    //Initialized to these values for debugging
    name = "NoName";
    age = 0;
    donation = 0;

    }

    Donor(String nameinit, int ageinit, double donationinit) {

    name = nameinit;
    age = ageinit;
    donation = donationinit;

    }

    public String toString() {

    String str = "";

    str += String.format("%s-30%i-6$%d-20", name, age, donation);

    return str;

    }

    public static void main(String[] args) {

    Scanner input = new Scanner(System.in);
    String nameinit = null;
    int ageinit = -1;
    double donationinit = -1;
    String outp = null;

    System.out.print("Enter the donor's name: ");
    nameinit = input.nextLine();

    System.out.print("Enter the donor's age: ");
    ageinit = input.nextInt();

    System.out.print("Enter the donation amount: ");
    donationinit = input.nextDouble();

    Donor d = new Donor(nameinit, ageinit, donationinit);
    outp = d.toString();

    System.out.printf("%s30 %s6 %s10", "Name", "Age", "Donation");
    System.out.print("\n" + outp);

    input.close();

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T18:31:46.797

您是否单击了右键并选择“运行方式”选项，Java 应用程序？它应该在任何环境下都能正常工作。

# javascript - 数组在递归方法中设置为空

> ID：12439952
> 
> 赞同：0
> 
> 时间：2012-09-15T18:26:22.210
> 
> 标签：javascript, phantomjs, casperjs

我正在尝试使用用于解析页面和提取相关链接的 CasperJS 编写蜘蛛。有问题的站点具有文件和文件夹的分层视图。我已经编写了一个递归方法来执行文件结构的导航，但是在该方法的第一次迭代之后，我的数组返回 null，即使函数运行正确。任何确定问题的帮助将不胜感激。

```
var processPage = function() {

    //Gather links
    var links = this.evaluate(function() { //links is the array being set to null
        var elements = document.querySelectorAll("a");
        return Array.prototype.map.call(elements, function(e) {
            //check link matches our white list
            var matchesWhitelist = false;

            var fileDescription = e.querySelector("span").innerHTML;
            console.log("span text:" + fileDescription);

            //begin checking
            if (fileDescription.indexOf('.mp3') != -1) matchesWhitelist = true;
            //if (fileDescription.indexOf('.wmv') != -1) .... etc

            //failing that is the link for a folder rather than a file
            var hrefLink = e.getAttribute("href");
            if (hrefLink.indexOf('folder-files') != -1) matchesWhitelist = true;

            if (matchesWhitelist) {
                console.log('match');
                console.log('Adding link: ' + hrefLink)
                return hrefLink;
            }
            else {
                console.log('no match');
            }
        });
    });

console.log("linkslength: " + links.length); // links will be null upon recursion

for (var i = 0; i < links.length; i++) {

        //check link matches our 'whitelist'
        this.thenOpen("https://TLD" + links[i]).then(function() {
            this.echo("New URL: " + this.getCurrentUrl());

            //check for files
            if (this.exists(".fileDownload")) {
                //extract link
            } else {
                //assume that this is a 'folder' link and send to be processed for more links
                casper.then(processPage); //continue recursion
            };
        });
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T19:26:05.383

你似乎想要一个减少的集合。

这意味着您应该使用`.filter`而不是`.map`，如果要保留链接，则返回真值，否则返回假值。

```
return Array.prototype.filter.call(elements, function(e) {

     //...

    if (matchesWhitelist) {
        console.log('match');
        console.log('Adding link: ' + hrefLink)
        return true;
    }
    else {
        console.log('no match');
    }
}); 
```

如果您不需要日志记录，您只需返回`matchesWhitelist`.

```
return Array.prototype.filter.call(elements, function(e) {

     //...

    return matchesWhitelist;
}); 
```

所以摆脱日志记录，你可以减少你的过滤器。

```
return Array.prototype.filter.call(elements, function(e) {

    return e.getAttribute("href").indexOf('folder-files') != -1 ||
           e.querySelector("span").innerHTML.indexOf('.mp3') != -1;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T18:39:09.240

`links`数组中的某些项目是 ，因为如果为 false `undefined`，您的映射函数不会返回任何内容。`matchesWhitelist`

其他问题：并非页面上的所有链接都需要包含跨度。访问`innerHTML`then 会破坏你的功能。并且：我看不到一系列已经抓取的页面。任何循环链接都会导致您的爬虫陷入无限循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T11:05:55.203

我希望我能接受你的两个答案，因为它们都有助于我找到问题的根源。我把事情复杂化了，这个问题通过首先应用一个过滤器来解决这个问题，将集合减少到我需要的元素，然后执行一个映射，这样我就可以返回一个只包含所需链接的数组。我最终使用的代码是

```
var processPage = function() {
    var url;
    //Gather links
    var links = this.evaluate(function() {
        var elements = document.querySelectorAll("a");
        var filteredElementsList = Array.prototype.filter.call(elements, function(e) {

            //check link matches our white list

            var matchesWhitelist = false;

            var fileDescription = e.querySelector("span").innerHTML;
            console.log("span text:" + fileDescription);

            //begin checking
            if (fileDescription.indexOf('.mp3') != -1) matchesWhitelist = true;

            //failing that is the link for a folder rather than a file
            var hrefLink = e.getAttribute("href");
            if (hrefLink.indexOf('folder-files') != -1) matchesWhitelist = true;

            if (matchesWhitelist) {
                console.log('match');
                console.log('Adding link: ' + hrefLink)
            } else {
                console.log('no match');
            }

            return matchesWhitelist;
        });

        return Array.prototype.map.call(filteredElementsList, function(e) {
            return e.getAttribute("href");
        });
    }); 
```

该脚本现在可以工作并提取我需要的每个链接。再次感谢您的帮助。

# cocos2d-iphone - Cocos2d - 特定区域内的 CCScrollLayer 与滚动层外的静态按钮

> ID：12439962
> 
> 赞同：0
> 
> 时间：2012-09-15T18:27:25.523
> 
> 标签：cocos2d-iphone, ccscrolllayer

我正在努力实现以下目标：

*   在场景中，有一个“可滚动”区域，包含可点击的精灵/CCMenuItems。

    *   在同一个场景中（在“可滚动”区域之外）有可点击的精灵/CCMenuItems。

我已经尝试使用 cocos2d 的 CCScrollLayer 扩展，但是整个屏幕都会响应滑动，而我只想响应特定区域。此外，当向场景添加更多按钮时，这些按钮不是 CCScrollLayer 的一部分，我会收到多个“ccTouchesBegan Override”错误/崩溃。

这是一张图片，可以进一步解释我所寻求的： ![我想要的是](../Images/7a7292469c92e4645efa9b4b142b8c39.png)

如果有人可以帮助我实现“滚动区域”，甚至可以为我指明正确的方向，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T00:14:18.787

您可以尝试创建自己的可滚动层并将其注册为目标触摸调度程序委托。在这种情况下，`touchBegan:withEvent:`您将能够检测到触摸位置是否在所需区域内（在您的情况下为可滚动区域）。

或检查 CCScrollable 图层代码。我之前没有使用它，也许它可以为您做同样的事情，只需将其注册为目标触摸调度程序委托而不是标准。

# excel - 将筛选的行从 Access 数据表导出到 Excel

> ID：12439964
> 
> 赞同：3
> 
> 时间：2012-09-15T18:27:29.200
> 
> 标签：excel, ms-access, datasheet

我使用下面的 VBA 代码仅将 Access 数据表中的可见列导出到 Excel。效果很好，但我也想根据用户为每列过滤的内容仅导出过滤后的行。我可以使用一些帮助来弄清楚如何做到这一点。任何帮助表示赞赏，lq

```
 Public Function ExportToExcel()
 On Error GoTo myErr

     Dim strDestFolder As String
     Dim strSQL As String
     Dim qdf As dao.QueryDef
     Dim ctl As Control
     Dim strRandomString As String

     strDestFolder = "MyDestinationPath"
     strRandomString = "AQueryDefName"

     For Each ctl In Me.Child.Form.Controls

         If Not ctl.ColumnHidden Then
             If Len(strSQL) = 0 Then
                 strSQL = "SELECT " & ctl.ControlSource & ", "
             Else
                 strSQL = strSQL & ctl.ControlSource & ", "
             End If
         End If

     Next ctl

     If Len(strSQL) > 0 Then
         strSQL = Left(strSQL, Len(strSQL) - 2)
         strSQL = strSQL & " FROM tblMyTableName WHERE Something = '" & Me.Something & "'"
     End If

     Set qdf = CurrentDb.CreateQueryDef(strRandomString, strSQL)

     DoCmd.OutputTo acOutputQuery, strRandomString, "MicrosoftExcel (*.xls)", strDestFolder & ".xls", True

 myExit:
     CurrentDb.QueryDefs.Delete strRandomString
     Exit Function
 myErr:
     MsgBox Err.Number & " - " & Err.Description, vbCritical, "VBA Error"
     Resume myExit
 End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T19:27:00.243

子表单的 filter 属性应该返回适​​合在 where 语句中使用的行。例如：

```
([My subform].[ID] Not In (1,2,4,6)) 
```

当我选择下拉列表并选择一些数字时返回。还：

```
([My subform].[ID] In (719,720)) 
```

# php - 不能在写上下文中使用方法返回值

> ID：12439966
> 
> 赞同：3
> 
> 时间：2012-09-15T18:27:34.757
> 
> 标签：php, codeigniter, uri, user-data

我正在使用 codeigniter 并尝试为控制器是否已更改创建 if 语句。我现在所拥有的给出了错误。

```
if (isset($this->session->userdata('lastUrl')) && $this->session->userdata('lastUrl') != $this->router->class) {
     echo 'new controller';
}

$this->session->set_userdata('lastUrl', $this->router->class); 
```

此代码位于控制器的构造函数中，因此它将在每个页面上运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T18:40:11.570

`method_exists()`你可以通过功能检查这个

```
if (method_exists($this->session->userdata('lastUrl')) && $this->session->userdata('lastUrl') != $this->router->class) {
     echo 'new controller';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T18:32:11.163

`isset`是一种特殊的语言结构，只能用于变量或数组键，不能用于方法。这应该具有相同的功能：

```
$this->session->userdata('lastUrl') !== null && ... 
```

# c - 编写 OS X 内核扩展来实现 Linux 的 SO_BINDTODEVICE 套接字选项

> ID：12439973
> 
> 赞同：12
> 
> 时间：2012-09-15T18:28:48.483
> 
> 标签：c, macos, networking, driver, kernel-extension

我希望能够通过特定的网络接口强制套接字。在 Linux 中，内核允许程序员通过设置所述套接字选项来实现这一点——但在 OS X 中，我一无所知。

因此我的标题问题 - 有可能吗？已经完成了吗？我不打算重新实现 IP 堆栈，只是启用绑定到接口选项。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-04-01T16:22:16.107

使用 RFC 3542 接口选择传出接口 (IPV6_PKTINFO)。[https://www.rfc-editor.org/rfc/rfc3542#section-6](https://www.rfc-editor.org/rfc/rfc3542#section-6)

# c# - 按组名匹配正则表达式中的组的更好方法是什么

> ID：12439977
> 
> 赞同：2
> 
> 时间：2012-09-15T18:29:07.013
> 
> 标签：c#, regex, lexer

我已阅读[如何在 C# 正则表达式中获取捕获组的名称？](https://stackoverflow.com/questions/1381097/regex-get-the-name-of-captured-groups-in-c-sharp)以及[如何访问 .NET 正则表达式中的命名捕获组？](https://stackoverflow.com/questions/906493/regex-named-capturing-groups-in-net)尝试了解如何在正则表达式中找到匹配组的结果。

我还阅读了 MSDN 中的所有内容，网址为[http://msdn.microsoft.com/en-us/library/30wbz966.aspx](http://msdn.microsoft.com/en-us/library/30wbz966.aspx)

对我来说奇怪的是 C#（或 .NET）似乎是唯一的正则表达式实现，它使您迭代组以查找匹配的组（特别是如果您需要名称），而且名称不是t 与组结果一起存储。例如，PHP 和 Python 将为您提供匹配的组名作为 RegEx 匹配结果的一部分。

我必须迭代组并检查匹配项，并且我必须保留我自己的组名列表，因为这些名称不在结果中。

这是我要演示的代码：

```
public class Tokenizer
{
    private Dictionary<string, string> tokens;

    private Regex re;

    public Tokenizer()
    {
        tokens = new Dictionary<string, string>();
        tokens["NUMBER"] = @"\d+(\.\d*)?";  // Integer or decimal number
        tokens["STRING"] = @""".*""";       // String
        tokens["COMMENT"] = @";.*";         // Comment
        tokens["COMMAND"] = @"[A-Za-z]+";   // Identifiers
        tokens["NEWLINE"] = @"\n";          // Line endings
        tokens["SKIP"] = @"[ \t]";          // Skip over spaces and tabs

        List<string> token_regex = new List<string>();
        foreach (KeyValuePair<string, string> pair in tokens)
        {
            token_regex.Add(String.Format("(?<{0}>{1})", pair.Key, pair.Value));
        }
        string tok_regex = String.Join("|", token_regex);

        re = new Regex(tok_regex);
    }

    public List<Token> parse(string pSource)
    {
        List<Token> tokens = new List<Token>();

        Match get_token = re.Match(pSource);
        while (get_token.Success)
        {
            foreach (string gname in this.tokens.Keys)
            {
                Group group = get_token.Groups[gname];
                if (group.Success)
                {
                    tokens.Add(new Token(gname, get_token.Groups[gname].Value));
                    break;
                }
            }

            get_token = get_token.NextMatch();
        }
        return tokens;
    }
} 
```

在行

```
foreach (string gname in this.tokens.Keys) 
```

这不应该是必要的，但它是。

无论如何都可以找到匹配的组及其名称而无需遍历所有组？

编辑：比较实现。这是我为 Python 实现编写的相同代码。

```
class xTokenizer(object):
    """
    xTokenizer converts a text source code file into a collection of xToken objects.
    """

    TOKENS = [
        ('NUMBER',  r'\d+(\.\d*)?'),    # Integer or decimal number
        ('STRING',  r'".*"'),           # String
        ('COMMENT', r';.*'),            # Comment
        ('VAR',     r':[A-Za-z]+'),     # Variables
        ('COMMAND', r'[A-Za-z]+'),      # Identifiers
        ('OP',      r'[+*\/\-]'),       # Arithmetic operators
        ('NEWLINE', r'\n'),             # Line endings
        ('SKIP',    r'[ \t]'),          # Skip over spaces and tabs
        ('SLIST',   r'\['),             # Start a list of commands
        ('ELIST',   r'\]'),             # End a list of commands
        ('SARRAY',  r'\{'),             # Start an array
        ('EARRAY',  r'\}'),             # End end an array
    ]

    def __init__(self,tokens=None):
        """
        Constructor
            Args:
                tokens - key/pair of regular expressions used to match tokens.
        """
        if tokens is None:
            tokens = self.TOKENS
        self.tokens = tokens
        self.tok_regex = '|'.join('(?P<%s>%s)' % pair for pair in tokens)
        pass

    def parse(self,source):
        """
        Converts the source code into a list of xToken objects.
            Args:
                sources - The source code as a string.
            Returns:
                list of xToken objects.
        """
        get_token = re.compile(self.tok_regex).match
        line = 1
        pos = line_start = 0
        mo = get_token(source)
        result = []
        while mo is not None:
            typ = mo.lastgroup
            if typ == 'NEWLINE':
                line_start = pos
                line += 1
            elif typ != 'SKIP':
                val = mo.group(typ)
                result.append(xToken(typ, val, line, mo.start()-line_start))
            pos = mo.end()
            mo = get_token(source, pos)
        if pos != len(source):
            raise xParserError('Unexpected character %r on line %d' %(source[pos], line))
        return result 
```

As you can see Python doesn't require you to iterate the groups, and a similar thing can be done in PHP and I assume Java.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T18:35:25.797

All your token types start with different characters. How about compiling a `HashSet<char,string>` that maps all possible start characters to the matching group name? That way you only have to examine the first character of the entire match to figure out which group was matched.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T18:52:18.317

There's no need to maintain a separate list of named groups. Use the [`Regex.GetGroupNames` method](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.getgroupnames.aspx) instead.

Your code would then look similar to this:

```
foreach (string gname in re.GetGroupNames())
{
    Group group = get_token.Groups[gname];
    if (group.Success)
    {
        // your code
    }
} 
```

That said, be aware of this note on the MSDN page:

> Even if capturing groups are not explicitly named, they are automatically assigned numerical names (1, 2, 3, and so on).

With that in mind, you should either name all your groups, or filter out numeric group names. You could do so with some LINQ, or with an additional check that `!Char.IsNumber(gname[0])` to check the first character of the group name, making the assumption that any such group is invalid. Alternately, you could also use the `int.TryParse` method.

# ios - 我遇到了剪辑问题，我不明白为什么

> ID：12439980
> 
> 赞同：1
> 
> 时间：2012-09-15T18:29:10.860
> 
> 标签：ios, iphone, opengl-es, powervr-sgx

从特定角度观看时我会注意到它，但如果我稍微移动或改变相机指向的方向，它就会恢复正常。我什至不确定从哪里开始。

我只渲染暴露在空气中的面，并且我没有在 opengl 中启用剔除。

有人对可能导致这种情况的原因有任何想法吗？

![在此处输入图像描述](../Images/f32eabf98470f36231bd982efd6587b7.png)

![在此处输入图像描述](../Images/57cd3038b796a546af38991698e44618.png)

![在此处输入图像描述](../Images/c22defe2024e4f1914d0c3f7b5f21ecf.png)

编辑：我通过并从 OpenGL 帧中捕获了模型-视图-投影矩阵，并测试了剪切区域的中心点。根据我的计算，该点应该在视锥体中。所以我还是很困惑。该表显示了我的工作。我从这个解决方案中得到了在视锥体中的测试：[如何检查对象是否位于 OpenGL 的裁剪体积之外？](https://stackoverflow.com/questions/6301085/how-to-check-if-an-object-lies-outside-the-clipping-volume-in-opengl)

用于创建透视矩阵的数据：

```
fovy: 70.0f, aspect: 960.0f/640.0f, near: 0.1f, far: 30.0f 
```

用于创建 lookAt 矩阵的数据：

```
eye: 29.8548 67.6202 37.6915 center: 30.8396 67.4502 37.7284 up: 0.169884 0.985443 0.00636673 
```

# mysql - 根据第一条记录值获取行

> ID：12439985
> 
> 赞同：3
> 
> 时间：2012-09-15T18:30:02.223
> 
> 标签：mysql, sql

所以我有一个看起来像这样的表：

```
field_value      field_label        record_id        data_element        data_id
                    8-7-1966             8            immunization           163
  8-7-1966          1966-8-7            163           immunizDate            164
                                        163           immunizProvider        165 
```

我需要动态地获取所有这三个记录。我可以通过以下方式获得第一条记录：

```
SELECT 
    field_value, field_label, record_id, data_element, data_id 
FROM 
    substance_data 
WHERE 
record_id = 8 
```

但是我需要以某种方式获取另外两条记录，知道它们的 record_id 将等于第一条记录的 data_id。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T18:32:41.930

```
SELECT 
    field_value, field_label, record_id, data_element, data_id 
FROM substance_data 
WHERE 
    record_id = 8 
OR  record_id IN (SELECT DISTINCT 
                      data_id 
                  FROM 
                      substance_data 
                  WHERE 
                      record_id = 8
                 ) 
```

# javascript - 将 Google Analytics 添加到在 Cordova 中运行的 JQuery Mobile 应用程序

> ID：12439986
> 
> 赞同：1
> 
> 时间：2012-09-15T18:30:19.433
> 
> 标签：javascript, google-analytics, cordova-2.0.0

我有一个 JQuery 移动应用程序。我想使用 Cordova (PhoneGap) 本地分发应用程序。我想在我的应用程序中使用 Google Analytics。我的问题是，我该怎么做？

我熟悉在网页中使用 Google Analytics。因为 JQuery Mobile 依赖于标准 HTML、JS 和 CSS，所以我想我可以将 Google Analytics JavaScript 复制并粘贴到我的 .html 中。但是，我没有看到任何活动被记录。

我可能做错了什么？我错过了什么吗？

谢谢！

# android - ANDROID 开源库实时做图形

> ID：12439992
> 
> 赞同：0
> 
> 时间：2012-09-15T18:31:58.760
> 
> 标签：android, graph, charts

我需要lib来做简单的图形如何散点图。我需要使用实时日期绘制图形。例如（我每 10 秒读取一次数据，我想将此数据实时插入图形中）。是否有一些我可以在我的应用程序项目中使用的开源库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T18:49:17.377

我建议你试试 AChartEngine。[从这里](http://www.achartengine.org)下载库和演示代码，[在此处](http://code.google.com/p/achartengine/)查看网站并在 youtube 上搜索一些很棒的视频教程。

# jquery - 菜单的水平 div 展开动画

> ID：12439996
> 
> 赞同：0
> 
> 时间：2012-09-15T18:32:17.647
> 
> 标签：jquery, html, hover, accordion, expand

所以，

我正在为具有固定宽度的站点构建自定义菜单。我正在尝试创建一个“菜单”，它实际上只是一个由 DIV 组成的水平行（每个菜单项的 DIV）。我已经包含了一个图像来传达我试图实现的功能：![在此处输入图像描述](../Images/cd1d50486943ba8c64267ccc2207c76b.png) 在图像中，*图 1*是 DIV 的顶级行。图 2 显示了将光标放在顶级项目“Professional development”上时该行发生的情况：该 div 扩展以填充整个菜单区域的宽度，显示充当子菜单项的其他几个 DIV。最后，图 3 显示了当光标悬停在尚未位于容器左侧的顶级 div 上时发生的情况：由于 DIV 必须向左和向右扩展以填充容器，因此“Very Long Menu”项目”向左移动，因此其子 DIV 位于右侧。

我已经能够使用 Jquery 动画扩展 DIV 或创建手风琴，但我不知道如何创建这种动画，特别是因为涉及多个顶级项目。任何帮助是极大的赞赏！

-马卡

**编辑：**

我添加了一个[JSfiddle](http://jsfiddle.net/YqxAR/24/)，它通过 CSS 悬停伪类在几个按钮上实现了所需的功能，但我不知所措的是如何使用 JQuery 为更改*设置动画。*当我将光标放在“Professional Development”上时，该 div 向左和向右扩展以显示其他 div 作为子菜单项 - 但扩展是即时的，正如人们对 CSS 所期望的那样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T15:07:58.330

所以，

以防万一有人感兴趣，我想我已经找到了一个脚本来为我需要的属性设置动画 - 在这个[JSfiddle](http://jsfiddle.net/Koubenec/F84FA/5/)中看到它。

-马卡

# android - Google Analytics V2 - IllegalStateException - 我可以在 onCreate() 而不是 onStart() 中初始化

> ID：12439997
> 
> 赞同：3
> 
> 时间：2012-09-15T18:32:24.703
> 
> 标签：android, google-analytics

我正在使用新的 Google Analytics（分析）移动版测试版。当我运行我的代码时，有时会出现以下异常：

> E/AndroidRuntime(29101): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com.wsoft/com.wsoft.ui.AppActivity}: java.lang.IllegalStateException: 你必须调用 EasyTracker.getInstance().setContext(context ) 或 startActivity(activity) 之前调用 getTracker() E/AndroidRuntime(29101): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059) E/AndroidRuntime(29101): at android.app.ActivityThread.handleLaunchActivity(ActivityThread .java:2084) E/AndroidRuntime(29101): 在 android.app.ActivityThread.access$600(ActivityThread.java:130) E/AndroidRuntime(29101): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java: 1195) E/AndroidRuntime(29101): 在 android.os.Handler.dispatchMessage(Handler.java:99) E/AndroidRuntime(29101): 在 android.os.Looper.loop(Looper.java:137) E/AndroidRuntime(29101): 在 android.app.ActivityThread.main(ActivityThread.java:4745) E/AndroidRuntime(29101): 在 java.lang.reflect.Method.invokeNative(Native Method) E/AndroidRuntime(29101) ): 在 java.lang.reflect.Method.invoke(Method.java:511) E/AndroidRuntime(29101): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786) E/AndroidRuntime (29101): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553) E/AndroidRuntime(29101): 在 dalvik.system.NativeStart.main(Native Method) E/AndroidRuntime(29101):在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786) E/AndroidRuntime(29101): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553) E/AndroidRuntime (29101): 在 dalvik.system.NativeStart.main(Native Method) E/AndroidRuntime(29101):在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786) E/AndroidRuntime(29101): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553) E/AndroidRuntime (29101): 在 dalvik.system.NativeStart.main(Native Method) E/AndroidRuntime(29101):
> 
> 引起：java.lang.IllegalStateException：您必须在调用 getTracker() E/AndroidRuntime(29101) 之前调用 EasyTracker.getInstance().setContext(context) 或 startActivity(activity)：在 com.google.analytics.tracking.android。 EasyTracker.getTracker(EasyTracker.java:113) E/AndroidRuntime(29101)：在 com.wsoft.ui.AppActivity.setupApp(AppActivity.java:425) E/AndroidRuntime(29101)：在 com.wsoft.ui.AppActivity。 onCreate(AppActivity.java:121)

为了设置分析，我在 onStart() 方法（根据文档）中初始化了 EasyTracker，如下所示：

```
public void onStart() {
        super.onStart();
        EasyTracker.getInstance().activityStart(this); 
    } 
```

IllegalStateException 被抛出了代码，这是在我的 onCreate() 方法中执行的——它当然在 onStart() 之前运行——所以我明白为什么会抛出这个。

我正在考虑将 EasyTracker 初始化移动到 onCreate() 中，而不是 onStart()。

为什么我不应该这样做？关于如何更可靠地设置 EasyTracker 的任何建议（关于 Activity 生命周期？）

或者，如果有人对如何确保在我使用 EasyTracker 之前对其进行初始化有任何好的建议（这会导致 FC，这显然是一件坏事。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T21:44:46.533

实际上，当您想使用自动屏幕跟踪 (EasyTracker) 时，文档说要在 onStart 中进行初始化，这类似于执行相同操作的旧 V1 版本的 EasyTracker，但您可以从跟踪版本（例如 TrackedActivity）扩展您的类。但是文档确实指出，如果您要进行任何手动屏幕跟踪，请确保在调用诸如 trackEvent 之类的东西之前调用 setContext。有关如何执行此操作的详细信息的文档有点稀疏。无论如何，我刚刚创建了自己的 trackEvent 和 trackView 类，它们将上下文作为参数，以确保始终设置它。

```
public static void trackView(Context ctx, String sScreenName){
    EasyTracker.getInstance().setContext(ctx);
    EasyTracker.getTracker().trackView(sScreenName);

}
public static void trackEvent(Context ctx, String sCategory, String sAction, String sLabel, Long lOptVal){
    EasyTracker.getInstance().setContext(ctx);
    EasyTracker.getTracker().trackEvent(sCategory, sAction, sLabel, lOptVal);
} 
```

为我解决了这个问题。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:53:26.043

事实上，我确实将初始化更改为在 onCreate() 内部发生，并且看起来效果很好。所以，回答我自己的问题，我认为这是一个合理的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-27T19:28:55.013

作为参考，EasyTracker（在 V2.x - 现在已弃用的库中），多次调用 setContext 并没有做任何事情，因为应用程序内部正是这样做的：

```
 public void setContext(Context ctx)
    {
        if(ctx == null)
        {
            Log.e("Context cannot be null");
        } else
        {
            ServiceManager sm = GAServiceManager.getInstance();
            setContext(ctx, ((ParameterLoader) (new ParameterLoaderImpl(ctx.getApplicationContext()))), GoogleAnalytics.getInstance(ctx.getApplicationContext()), sm);
        }
    } 
```

上面的方法（你正在调用）调用这个：

```
 void setContext(Context ctx, ParameterLoader parameterLoader, GoogleAnalytics ga, ServiceManager serviceManager)
    {
        if(ctx == null)
            Log.e("Context cannot be null");
        if(mContext == null)
        {
            mContext = ctx.getApplicationContext();
            mAnalyticsInstance = ga;
            mServiceManager = serviceManager;
            mParameterFetcher = parameterLoader;
            loadParameters();
        }
    } 
```

注意`mContext = ctx.getApplicationContext();`?

因此，无论您传递什么上下文，您总是会获得对相同静态应用程序上下文的引用。

如果您想了解更多关于 Context 的信息，请务必阅读这篇出色的博文：

[Android 上下文](http://www.doubleencore.com/2013/06/context/)

> 上下文可能是 Android 应用程序中使用最多的元素……它也可能是被滥用最多的元素。上下文对象很常见，并且经常被传递，很容易创建一个你不想要的情况。加载资源、启动新 Activity、获取系统服务、获取内部文件路径和创建视图都需要一个 Context（这甚至还没有在完整列表中开始！）来完成任务。我想做的是为您提供一些关于 Context 如何工作的见解以及一些将（希望）允许您在应用程序中更有效地利用它的技巧。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-17T19:29:58.023

这将解决：P

```
public void onStart() {
        super.onStart();
        EasyTracker.getInstance(getApplicationContext()).activityStart(this); 
    } 
```

# ios - EAGLContext 中的“EA”代表什么？

> ID：12439999
> 
> 赞同：8
> 
> 时间：2012-09-15T18:32:27.303
> 
> 标签：ios, objective-c, iphone

EAGLContext中的“ **EA ”代表什么？**CAEAGLLayer 中的“EA”是否也一样？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-15T18:34:38.793

EAGL（嵌入式 Apple 图形库）是 Apple 对 EGL API 的实现。

EA =**嵌入式苹果**。是的，CAEAGLLayer 也是**如此**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T18:33:58.357

EA = 嵌入式苹果。它来自 AGL，Apple 图形库和 EA(GL) 是它的嵌入式版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T18:37:45.247

EAGL 代表**Embedded Apple** Graphics Library