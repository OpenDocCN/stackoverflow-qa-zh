# StackOverflow 问答 11310000-11310999

# jenkins - 在 Jenkins 中显示 Chef Minitest Handler 测试结果

> ID：11310000
> 
> 赞同：2
> 
> 时间：2012-07-03T11:31:10.710
> 
> 标签：jenkins, chef-infra, vagrant, minitest

我正在尝试使用 chef-minitest-handler 和 Vagrant 在 VM 中测试我的厨师食谱。我能够运行测试，但我想将它集成到 Jenkins 中。

是否有可能以 Jenkins 能够理解的方式（例如 jUnit）保存从 chef [converge in VM] 获得的测试结果并显示一个很好的通过/失败测试图？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T01:06:47.603

在 chef-minitest-handler 的 git 版本中（至少）有一个名为 :ci_reports 的处理程序参数，它指定您希望 junit 输出存储的位置。例如：

```
handler = MiniTest::Chef::Handler.new({
:path    => './cookbooks/test/*_test.rb',
:ci_reports => 'report.xml',
:verbose => true})
# add to the list of handlers 
```

这将向 report.xml 写入与 junit 兼容的报告

# arrays - 将数据重塑为 CSV

> ID：11310009
> 
> 赞同：3
> 
> 时间：2012-07-03T11:31:47.570
> 
> 标签：arrays, r, matrix

我正在编写一个脚本来创建用于分析的 csv 文件。运行脚本时，它为 OPA 5701 提供 1 个 csv 文件，为 6561 提供 1 个文件。这是脚本的两个部分之间的唯一区别。

```
##Samplesheet for GS0005701
rows<-unique(samples$Sample_Name)
samplesheet<-rows
opa.panels<-sort(unique(samples$Pool_ID))
for ( i in 1:length(opa.panels)){
  samps<-samples[samples$Pool_ID == opa.panels[i],]
  idx<-match(samps$Sample_Name,rows)
  samplesheet<-cbind(samplesheet,samps$Sentrix_ID[idx],samps$Sentrix_Position[idx])
}
colnames(samplesheet)[2:(length(opa.panels)*2+1)]<-c("SentrixBarcode_A","SentrixPosition_A","SentrixBarcode_B","SentrixPosition_B","SentrixBarcode_C","SentrixPosition_C","SentrixBarcode_D","SentrixPosition_D")[1:(length(opa.panels)*2)]
colnames(samplesheet)[1]<-"Sample_Name"
idx<-match(rows,samples$Sample_Name)
samplesheet<-cbind(samplesheet,samples[idx,c("Sample_Group","NorTum","Sample")])
ss_header<-c("[Header]","Investigator Name,Sander","Project Name,HNPCC_NA_MYH","Experiment Name,OPA1+2+3+4","Date,5062012","[Manifests]")
for (i in 1:length(opa.panels)) ss_header<-c(ss_header,paste(LETTERS[i],opa.panels[i],sep=","))
ss_header<-c(ss_header,"[Data]")
writeLines(ss_header,"Samplesheet5701.csv")
write.table(samplesheet,file="Samplesheet5701.csv",sep=",",row.names=FALSE,quote=FALSE,append=TRUE,na="")

##Samplesheet for GS0006561-OPA
rows2<-unique(samples2$Sample_Name)
samplesheet2<-rows2
opa.panels2<-sort(unique(samples2$Pool_ID))
for ( j in 1:length(opa.panels2)){
  samps2<-samples2[samples2$Pool_ID == opa.panels2[j],]
  idx2<-match(samps2$Sample_Name,rows2)
  samplesheet2<-cbind(samplesheet2,samps2$Sentrix_ID[idx2],samps2$Sentrix_Position[idx2])
}
colnames(samplesheet2)[2:(length(opa.panels)*2+1)]<-c("SentrixBarcode_A","SentrixPosition_A","SentrixBarcode_B","SentrixPosition_B","SentrixBarcode_C","SentrixPosition_C","SentrixBarcode_D","SentrixPosition_D")[1:(length(opa.panels)*2)]
colnames(samplesheet2)[1]<-"Sample_Name"
idx2<-match(rows2,samples2$Sample_Name)
samplesheet2<-cbind(samplesheet2,samples2[idx2,c("Sample_Group","NorTum","Sample")])
ss_header<-c("[Header]","Investigator Name,Sander","Project Name,HNPCC_NA_MYH","Experiment Name,OPA1+2+3+4","Date,5062012","[Manifests]")
for (j in 1:length(opa.panels2)) ss_header<-c(ss_header,paste(LETTERS[j],opa.panels2[j],sep=","))
ss_header<-c(ss_header,"[Data]")
writeLines(ss_header,"samplesheet6561.csv")
write.table(samplesheet2,file="Samplesheet6561.csv",sep=",",row.names=FALSE,quote=FALSE,append=TRUE,na="") 
```

## Samplesheet GS0005701 部分创建一个`data.frame`. ##Samplesheet GS0006561 创建一个`matrix`. 使用相同的代码和相同的输入数据。

输入数据如下所示：

![样本数据](../Images/b3955b97d4332f03b8d4fe860f2df539.png)

对于复制粘贴：

```
 Sample  Sample_Name Sample_Group    NorTum  Sentrix_ID  Sentrix_Position    Pool_ID Folderdate
1   00-04193    00-04193N   HNPCC_UV    N   1495421 R007_C012   GS0006564-OPA   Exp060410
2   00-04193    00-04193N   HNPCC_UV    N   1495447 R007_C012   GS0006562-OPA   Exp060410
3   00-04193    00-04193N   HNPCC_UV    N   1495447 R007_C006   GS0006561-OPA   Exp060410
4   00-04193    00-04193N   HNPCC_UV    N   1495421 R007_C006   GS0006563-OPA   Exp060410
5   00-04193    00-04193N   HNPCC_UV    N   1460498 R007_C005   GS0006561-OPA   Exp060516
6   00-04193    00-04193N   HNPCC_UV    N   1460498 R007_C012   GS0006564-OPA   Exp060516 
```

我知道这是一个很难回答的问题，但我希望有人能给我一个提示，说明 1 个代码如何创建一个 data.frame 而另一个是一个矩阵。

非常感谢提前！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:30:34.610

这个问题的正确答案是索引部分的交换。

```
idx<-match(samps$Sample_Name,rows) 
```

改为：

```
idx<-match(rows,samps$Sample_Code) 
```

使行的长度与 Sample_Code 的长度相同。

# jquery - 通过 json 将 fullcalendar 事件传递给控制器

> ID：11310013
> 
> 赞同：2
> 
> 时间：2012-07-03T11:31:58.970
> 
> 标签：jquery, asp.net-mvc, fullcalendar

我正在尝试通过 Json 将 fullcalendar 事件传递给我的控制器，但是我将 null 传递给我的控制器？我究竟做错了什么？这是我的视图代码：

```
<script type='text/javascript'>
    $(document).ready(function () {
        $(function () {
            $("#save").click(function () {
                var eventsFromCalendar = $('#calendar').fullCalendar('clientEvents');
                alert(eventsFromCalendar);
                $.ajax(
            {

                url: '@Url.Action("Save")',
                type: 'POST',
                traditional: true,
                data: eventsFromCalendar,
                dataType: "json",
                success: function (response) {
                    alert(response);
                },
                error: function (xhr) {
                    debugger;
                    alert(xhr);
                }
            });
            });
        });
    });
     </script> 
```

我的控制器：

```
[HttpPost]
public JsonResult Save(object[] data)
{
    // edit the item and get it back
    return Json("success");
} 
```

当我闯入 Jscript 并查看 eventsFromCalendar 时，它填充得很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T20:23:24.783

尝试将您的事件转换为 JSON 文本：

```
data:{ eventsJson: JSON.stringify(eventsFromCalendar) } 
```

（参见[JSON.stringify 函数 (JavaScript)](http://msdn.microsoft.com/en-us/library/cc836459%28v=vs.94%29.aspx)）

然后使用[Json.NET](http://json.codeplex.com/)之类的工具来解析控制器操作中发布的 JSON 字符串：

```
[HttpPost]
public ActionResult Save(string eventsJson)
{
    var events = JsonConvert.DeserializeObject<IEnumerable<Event>>(eventsJson);
    return View();
}

public class Event
{
    public int Id { get; set; }
    public string Title { get; set; }
    public DateTime Start { get; set; }
    public DateTime End { get; set; }
} 
```

# php - 教义：计数结果比得到结果多

> ID：11310015
> 
> 赞同：1
> 
> 时间：2012-07-03T11:32:08.500
> 
> 标签：php, zend-framework, doctrine, doctrine-orm

我有一个原则查询来返回属于特定商店的所有客户。总共返回 29 条记录。但是，如果我使用几乎相同的 DQL 运行计数查询，我会得到不同数量的结果

**Query1** - 获取结果：

```
SELECT c FROM Customer c INNER JOIN c.shops cs WHERE cs.shop IN(2, 3) 
```

返回（使用 count() 计算返回的记录数）

```
int(29) 
```

**Query2** - 计数结果：

```
SELECT count(c) FROM Customer c INNER JOIN c.shops cs WHERE cs.shop IN(2, 3) 
```

返回：

```
array(1) { [0]=> array(1) { [1]=> string(2) "36" } } 
```

我似乎无法弄清楚这是怎么发生的？希望有人可以帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:07:25.713

我认为你必须“GROUP BY(c)”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T20:50:23.120

您必须考虑这样一种情况，如果您有同一个客户与两家商店有关联，那么在原始 SQL 土地上您将获得 2 行。

Doctrine 在返回记录 ie 的水合步骤中考虑了这一点`$qb->getQuery()->getResults()`，并返回一个有意义的结果集（而不是一个你必须手动处理的具有重复项的结果集）。

您可以通过回显 Doctrine 从查询中生成的 SQL`$qb->getSQL()`并通过 Phpmyadmin、MySQL Workbench 或 Sequel Pro 之类的工具执行它，并将其与从`getResults()`

# java - 为什么在 jsp 中没有（正确）显示错误“file.too.large”？

> ID：11310016
> 
> 赞同：1
> 
> 时间：2012-07-03T11:32:16.353
> 
> 标签：java, file-upload, struts2, validation

我有一个应用程序可以让你上传一些照片。我有一个带有表单的 jsp 页面，用于选择要上传的照片：

**subir-foto.jsp**

```
...
<s:form action="SubirFoto" method="post" enctype="multipart/form-data" theme="bootstrap">
   <s:file name="foto" label="Foto" />
   <s:submit value="Upload" align="center" />
</s:form>
... 
```

我希望通过这种形式，用户只能上传某些类型的文件（如 jpg、gif ...），并且不要让用户上传大小超过 2 MB 的照片。

**struts.xml**

```
<action
        name="SubirFoto"
        class="impl.redex.presentation.profile.upload.SubirFotosAction">
        <interceptor-ref name="fileUpload">
            <param name="maximumSize">2097152</param>
            <param name="allowedTypes">
                image/png,image/gif,image/jpeg,image/pjpeg
            </param>
        </interceptor-ref>
        <interceptor-ref name="dentroStack"></interceptor-ref>
        <result name="success">/WEB-INF/jsps/foto/foto-subida.jsp</result>
        <result name="input">/WEB-INF/jsps/foto/subir-foto.jsp</result>
</action> 
```

文件上传工作完美，除了一件事。如果满足要求，我可以上传任何照片。如果我尝试上传不是照片的文件（例如，纯文本文件），应用程序会将我在`global.properties`jsp 表单的输入中定义的错误放入我。

**全局属性**

```
struts.messages.error.uploading - No se ha podido subir el fichero
struts.messages.error.file.too.large - El fichero es demasiado grande. El tamaño máximo es de 2MB.
struts.messages.error.content.type.not.allowed - Tipo de fichero no aceptado. Sólo es válido si la foto \
está en formato jpg/jpeg, gif o png. 
```

如果我尝试上传大于 2 MB 的图像，就会出现问题，应用程序会将我重定向到**subir-foto.jsp**，但它不会在 jsp 页面中出现任何错误。

我做了一些实验，如果我`<s:actionerror />`在上传大照片时放入 subir-foto.jsp ，它会出现：

```
the request was rejected because its size (17224595) exceeds the configured maximum (2097152) 
```

如您所见，这不是我在 中定义的错误`global.properties`。

为什么不是这两个不同的错误字段错误？这是引导插件的问题吗？或者它是Struts2的一个错误？难道我做错了什么？任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T07:22:01.897

我在 Google 中进行了更多搜索，发现了一个解释错误的博客（博客条目来自 2008 年，我使用的是 Struts 2.3.4）：

[http://blog.bielu.com/2008/09/solution-to-struts2-upload-file-error.html](http://blog.bielu.com/2008/09/solution-to-struts2-upload-file-error.html)

我总结了我如何解决我的问题。问题是消息`the request was rejected because its size ...`被硬编码在 Struts2 类之一中。

> 这个问题至少有三种解决方案（所有这些都是痛苦的）：一个是重新实现`org.apache.struts2.dispatcher.multipart.MultiPartRequest`类；第二个是重新实现`org.apache.struts2.interceptor.FileUploadInterceptor`类。

第三个是`validate` 在 FileUpload 类中放置一个方法。

```
@Override
public void validate() {
    boolean error = false;

    Collection<?> tmp = getActionErrors();

    for (Object o : tmp) {
        if (o.toString().contains(
                "the request was rejected because its size")) {

            if (!error) {
                addFieldError("foto",
                        "El tamaño de la foto es muy grande (Máximo: 2MB)");
                error = true;
            }
        }
    }

} 
```

无论如何，我仍然无法理解为什么我定义的消息不起作用，因为在我搜索的所有站点中，我都告诉我要覆盖`struts.messages.error.file.too.large`或者为什么两个错误都是不同类型的错误（字段和操作错误）。

感谢大家的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:36:12.157

首先，如果您尝试上传的文件大于您为 struts.multipart.maxSize 指定的文件大小，则会出现此错误

There's a pretty easy solution: In your struts.xml, increase the file size value of struts.multipart.maxSize,

```
 <constant name="struts.multipart.maxSize" value="50777216000" />
  <param name="maximumSize">15728640</param> 
```

Keep param name="maximumSize" value **less than** struts.multipart.maxSize value,
As in above case, you will get your customised error defined in global.properties unless you exceed struts.multipart.maxSize limit..so try to keep struts.multipart.maxSize value to some high range.

# extjs4.1 - 如何在 ext js 4.1 中重新加载商店？

> ID：11310019
> 
> 赞同：-1
> 
> 时间：2012-07-03T11:32:30.600
> 
> 标签：extjs4.1

如何在 ext js 4.1 中重新加载存储值？

```
var user_date_wise = Ext.create('Ext.data.JsonStore', {
    fields: ['MS', 'HSD', 'XP', 'XM','comp_date'],
        autoLoad: true,
        proxy: {
            type: 'ajax',
            url : 'php/data.php?item='+date
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T11:51:32.907

```
user_date_wise.load() 
```

请参阅[文档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-method-load)。

# java - Android，WCF 的 HttpPost

> ID：11310032
> 
> 赞同：0
> 
> 时间：2012-07-03T11:33:04.117
> 
> 标签：java, android, wcf

我正在尝试使用 httpost 从我们的 WCF 网络服务获取数据

如果 webservice 函数没有 params ，类似于 List getAllMessages()

我在 json 中获取列表，这里没问题

棘手的部分是当函数需要获取参数时让我们说 Message getMessage(string id) 在尝试调用此类函数时我得到错误代码 500

工作代码是：

```
public String GetAllTitles()
 {

    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(
            "http://www.xxx.com/Service/VsService.svc/GetAllTitles");

    httppost.setHeader("Content-Type", "application/json; charset=utf-8");

    try {
        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost);

        return readHttpResponse(response);

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return null;

} 
```

这段代码非常适合没有参数的函数。我把这段代码改成：

```
 public String SearchTitle(final String id)
    {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(
                   "http://www.xxx.com/Service/VsService.svc/SearchTitle");

        httppost.setHeader("Content-Type", "application/json; charset=utf-8");
        httppost.setHeader("Accept", "application/json; charset=utf-8");

        NameValuePair data = new BasicNameValuePair("id",id);
        try {
            // Add your data
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
            nameValuePairs.add(data);
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpclient.execute(httppost);

            return readHttpResponse(response);

        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return null;

    } 
```

thr webservice 中的函数头是：

```
 [OperationContract]
public TitleResult SearchTitle(string id)
{
    Stopwatch sw = LogHelper.StopwatchInit();
    try
    {
        TitleManager tm = new TitleManager();
        Title title = tm.TitleById(id);
        sw.StopAndLog("SearchTitle", "id: " + id);
        return new TitleResult() { Title = title };
    }
    catch (Exception ex)
    {
        sw.StopAndLogException("SearchTitle", ex, "id: " + id);
        return new TitleResult() { Message = ex.Message };
    }
} 
```

任何人都可以看到我错过了什么？

谢谢，我正在为这个而头晕目眩。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:02:12.350

列表不是json，试试

```
String data = "{ id : \"" + id + "\" }"; 
```

不要忘记将 Content-Length 设置为`data.length`.

# jquery - jquery：在间隔X上使用ajax重新加载页面上的多个div

> ID：11310033
> 
> 赞同：0
> 
> 时间：2012-07-03T11:33:04.557
> 
> 标签：jquery, ajax, reload

我需要通过使用 AJAX 在我的 Web 应用程序中调用返回值的函数来更新页面上的多个#div。该值是一个计数器，想法是以这种方式实时更新它。

```
function getTime(ID) returns = "12.00" 
```

在查询中实现这一点的好方法是什么？

我使用下面的代码片段重新加载页面的一部分，但是如何使用多个部分来执行此操作？任何查询大师都可以以正确的方式帮助我吗？谢谢！

```
:javascript
  var refreshId = setInterval(function() {
      $("#basket").load('/gettime/<id value from id attribute to pass it???>');
      }, 10000);
      $.ajaxSetup({ cache: true }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T11:44:24.713

好吧，您可以这样做的一种方法是，使用一个类，对所有需要重新加载的 div说“**重新加载”，为这些 div 设置唯一的 id 并执行以下操作：**

```
$('body').on('reloadTimeout', 'div.reload', function(event){
    //get the div id using 
    var divId = $(this).attr("id");
    //then do some ajax stuff like load to fetch content
});
window.setInterval(function(){ 
    body.trigger('reloadTimeout'); 
}, 30000); 
```

希望能帮助到你

# silverlight - 在 Silverlight 应用程序中从 Excel 文件导入数据

> ID：11310039
> 
> 赞同：1
> 
> 时间：2012-07-03T11:33:45.053
> 
> 标签：silverlight, excel, import

我正在使用 VS2010，Silverlight 5.0

我正在尝试将数据从 Excel 文件导入到网格，因为我正在使用“OpenFileDialog”。用户可以像这样使用 OpenFileDialog 输入 Excel 文件

```
OpenFileDialog dlg = new OpenFileDialog();
dlg.Multiselect = false;
dlg.Filter = "Excel Sheet(*.xls)|*.xls|All Files(*.*)|*.*";
bool bResult = (bool)dlg.ShowDialog();
if (!bResult)
    return "";

FileInfo info = dlg.File;
StatusText.Text = info.Name;

Stream s = info.OpenRead();
StreamReader reader = new StreamReader(s);
string xml = reader.ReadToEnd();
var doc = XDocument.Parse(xml); 
```

在 Microsoft Excel 格式 2003 或 2007（.xls 文件）的情况下，上面的代码可以正常工作，并在字符串中为我提供 Excel 中的值。

但是在 Microsoft Excel 格式 2010（.xlsx 文件）的情况下，`reader.ReadToEnd()`它不会以正确的格式返回值，所以下一行，给我以下错误。

```
var doc = XDocument.Parse(xml);
'Data at the root level is invalid. Line 1, position 1' 
```

我该如何解决这个错误，或者从 excel 导入数据的最佳方法是什么？

# r - 2 创建布尔向量的条件

> ID：11310041
> 
> 赞同：0
> 
> 时间：2012-07-03T11:33:46.887
> 
> 标签：r, if-statement, operators, boolean

我有 2 个向量和一个数字。

```
a <- rnorm(40,10,4)
d <- rep(0,length(a)
filling_limit <- 8 
```

`has.room`现在，如果满足 2 个条件，我想要一个 40*1 布尔向量 ( ) 给我信息：

```
has.room  <- a > 0 && d < filling_limit 
```

而不是返回一个 40 次的向量，`TRUE`我只得到一个`TRUE`. 这是什么原因？如果你想知道零向量：这个东西是循环的一部分，`d`会随着时间的推移而改变。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T11:40:52.953

尝试：

```
has.room  <- a > 0 & d < filling_limit 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T11:41:05.590

```
has.room  <- a > 0 & d < filling_limit 
```

从逻辑运算符的帮助页面： `&`and`&&`表示逻辑 AND 和`|`and`||`表示逻辑 OR。**较短的形式执行元素比较的方式与算术运算符大致相同。较长的形式从左到右评估，仅检查每个向量的第一个元素。**仅在确定结果之前进行评估。

# drupal - drupal中fancybox中的自定义内容

> ID：11310043
> 
> 赞同：0
> 
> 时间：2012-07-03T11:33:55.430
> 
> 标签：drupal, drupal-7, fancybox

我有一个页面，它应该包含一种画廊，以及点击时的一些数据。到目前为止，我找到了如何在其中显示图像，但是如何在其中显示一些内容而不是图像？我有内容类型的新闻，我应该在灯箱中显示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:55:49.477

找到了更简单的方法来做到这一点。我已将 colorbox 模块与 colorbox 节点模块一起使用。易于设置，易于使用。

# object - Google Charts API 从 div 获取图形对象

> ID：11310044
> 
> 赞同：0
> 
> 时间：2012-07-03T11:34:03.400
> 
> 标签：object, google-visualization

我使用 Google Charts API 在我的网页上绘制了几张图表。如果我想清除它们，我可以使用图表的 clearChart() 方法。但是假设我有一个 id="mydiv" 的 div，其中绘制了一个折线图。要清除它，我必须先获取图表对象，然后调用 clearChart()。但是我如何获得图表对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:08:11.783

如果您使用 JavaScript 来呈现图表，您应该保存对图表对象的引用以在之后清除它们。

如果您没有这些引用，但将 div 用作容器，则可以从浏览器树节点中删除或清除 div 元素。

```
document.getElementById( 'mydiv' ).innerHTML = ''; 
```

请添加其他注释以进行澄清。

# jquery - zepto.js：视口和延迟加载插件？

> ID：11310048
> 
> 赞同：3
> 
> 时间：2012-07-03T11:34:12.853
> 
> 标签：jquery, viewport, zepto, lazy-loading

我曾经使用 jQuery 并且正在使用

*   `jQuery LazyLoad Plugin` [http://www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)
*   `jQuery Viewport Plugin` [http://www.appelsiini.net/projects/viewport](http://www.appelsiini.net/projects/viewport)

我现在使用[zepto.js](http://zeptojs.com)而不是 jQuery，当然现在插件都通过以下错误。

> 未捕获的 ReferenceError：未定义 jQuery

如果我将两个插件都更新`})(jQuery);`为`})(Zepto);`以下错误...</p>

> 未捕获的类型错误：无法读取未定义的属性“：”

有什么想法吗？是否可以使这些插件与 Zepto 一起使用？Zepto 不是与 Jquery 几乎相同，只是没有旧的浏览器兼容性和额外的触摸事件？

先感谢您。

马特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T18:28:43.807

导致错误的行似乎是：

```
.extend($.expr[':'], { 
```

jQuery uses its own CSS-style selector evaluator called Sizzle. In addition to letting you use `$('#id .cls1 .cls2, #otherid')` and standard CSS pseudo-selectors, it supports extension with custom selectors like the built-in `:visible` selector or the `:above-the-fold` selector provided by this plugin.

Since modern mobile browser support the native `document.querySelectorAll` function for CSS selection, a library like Sizzle isn't needed, saving a significant amount of JavaScript. (That's why we love Zepto.) The side effect is that these custom selectors aren't supported and `$.expr` doesn't exist. Any line that depends on these, including that line in the plugin will fail.

The good news is that these are convenience selectors and you may just be able to cut them out of your script. If you don't want to find elements above and below the fold this way, you can just cut them out of the code. You will also need to address the line where the library calls `$this.is(":visible")` but other than that I don't really see anything too jQuery-specific.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T10:02:38.690

You also need to deal with $window.scrollLeft(), which isn't implemented in Zepto (you can use window.pageXOffset).

I've implemented full Zepto compatibility on my branch: [https://github.com/adamvert/jquery_lazyload](https://github.com/adamvert/jquery_lazyload)

# c++ - 使用基于 IOCP 的客户端的每个 IO 数据

> ID：11310058
> 
> 赞同：1
> 
> 时间：2012-07-03T11:34:50.413
> 
> 标签：c++, oop, winsock2, iocp

我正在尝试创建一个 IOCP TCP 客户端，我的代码如下所示：

**TCPClient.h：**

```
#pragma once

typedef struct 
{ 
    WSAOVERLAPPED Overlapped; 
    SOCKET Socket; 
    WSABUF wsaBuf; 
    char Buffer[1024];
    DWORD Flags;
    DWORD BytesSent;
    DWORD BytesToSend;
} PER_IO_DATA, * LPPER_IO_DATA; 

class TCPClient
{
public:
    TCPClient();
    ~TCPClient();

    bool Connect(const std::string strIpAddress, UINT32 uPort);
    bool Disconnect();
    bool SendCommand(const std::string strCommandName);
    bool ReceiveResponse();

private:
    static DWORD WINAPI ClientWorkerThread(LPVOID lpParameter);

private:
    SOCKET m_socket;
    PER_IO_DATA *m_pPerIoData;
}; 
```

**TCPClient.cpp：**

```
#include "StdAfx.h"
#include "TCPClient.h"

TCPClient::TCPClient() :
    m_pPerIoData(NULL)
{
}

TCPClient::~TCPClient()
{
}

bool TCPClient::Connect(const std::string strIpAddress, UINT32 uPort)
{
    WSADATA wsaData;
    if (WSAStartup(MAKEWORD(2, 2), &wsaData) != NO_ERROR)
        return false;

    HANDLE hCompletionPort = CreateIoCompletionPort(INVALID_HANDLE_VALUE, NULL, 0, 0);
    if (!hCompletionPort)
        return false;

    SYSTEM_INFO systemInfo;
    GetSystemInfo(&systemInfo);

    for (DWORD dwIndex = 0; dwIndex < systemInfo.dwNumberOfProcessors; dwIndex++)
    {
        HANDLE hThread = CreateThread(NULL, 0, ClientWorkerThread, hCompletionPort, 0, NULL);
        CloseHandle(hThread);
    }

    m_socket = WSASocket(AF_INET, SOCK_STREAM, IPPROTO_TCP, NULL, 0, WSA_FLAG_OVERLAPPED);
    if (m_socket == INVALID_SOCKET)
    {
        WSACleanup();

        return false;
    }

    sockaddr_in server;
    server.sin_family = AF_INET;
    server.sin_addr.s_addr = inet_addr(strIpAddress.c_str());
    server.sin_port = htons(uPort);

    CreateIoCompletionPort((HANDLE)m_socket, hCompletionPort, 0, 0);

    if (WSAConnect(m_socket, (LPSOCKADDR)&server, sizeof(server), NULL, NULL, NULL, NULL) == SOCKET_ERROR)
    {
        WSACleanup();

        return false;
    }

    return true;
}

bool TCPClient::Disconnect()
{
    if (m_socket)
        closesocket(m_socket);

    WSACleanup();

    return true;
}

bool TCPClient::SendCommand(const std::string strCommandName)
{
    m_pPerIoData = new PER_IO_DATA;
    ZeroMemory(m_pPerIoData, sizeof(PER_IO_DATA));

    strcpy(m_pPerIoData->Buffer, strCommandName.c_str());

    m_pPerIoData->Overlapped.hEvent = WSACreateEvent();
    m_pPerIoData->Socket = m_socket;
    m_pPerIoData->wsaBuf.buf = m_pPerIoData->Buffer;
    m_pPerIoData->wsaBuf.len = strlen(m_pPerIoData->Buffer);
    m_pPerIoData->BytesToSend = m_pPerIoData->wsaBuf.len;

    DWORD dwNumSent;
    if (WSASend(m_socket, &(m_pPerIoData->wsaBuf), 1, &dwNumSent, 0, &(m_pPerIoData->Overlapped), NULL) == SOCKET_ERROR)
    {
        if (WSAGetLastError() != WSA_IO_PENDING)
        {
            delete m_pPerIoData;
            return 0;
        }
    }

    while (TRUE)
        Sleep(1000);

    return true;
}

bool TCPClient::ReceiveResponse()
{
    return true;
}

DWORD WINAPI TCPClient::ClientWorkerThread(LPVOID lpParameter)
{
    HANDLE hCompletionPort = (HANDLE)lpParameter;
    DWORD NumBytesRecv = 0;
    ULONG CompletionKey;
    LPPER_IO_DATA PerIoData;

    while (GetQueuedCompletionStatus(hCompletionPort, &NumBytesRecv, &CompletionKey, (LPOVERLAPPED*)&PerIoData, INFINITE))
    {
        if (!PerIoData)
            continue;

        if (NumBytesRecv == 0)
        {
            std::cout << "Server disconnected!\r\n\r\n";
        }
        else
        {
            // use PerIoData->Buffer as needed...
            std::cout << std::string(PerIoData->Buffer, NumBytesRecv);

            PerIoData->wsaBuf.len = sizeof(PerIoData->Buffer);
            PerIoData->Flags = 0;

            if (WSARecv(PerIoData->Socket, &(PerIoData->wsaBuf), 1, &NumBytesRecv, &(PerIoData->Flags), &(PerIoData->Overlapped), NULL) == 0)
                continue;

            if (WSAGetLastError() == WSA_IO_PENDING)
                continue;
        }

        closesocket(PerIoData->Socket);
        delete PerIoData;
    }

    return 0;
} 
```

**主.cpp：**

```
#include "stdafx.h"
#include "TCPClient.h"

int main()
{
    TCPClient client;

    client.Connect("127.0.0.1", 8888);

    client.SendCommand("Hello command\r\n");

    return 0;
} 
```

我对“m_pPerIoData”的使用显然是错误的，因为我每次执行 SendCommand() 时都在更新，并且没有正确删除它。

*   Q1。我应该在哪里做 m_pPerIoData = new PER_IO_DATA？
*   Q2。将指向 PER_IO_DATA 的指针作为成员变量有意义吗？

**编辑2：**

我已经对上面的现有代码进行了一些重命名（客户端-> 连接），因为这让我感到困惑。

**一些背景：**

*   我正在创建一个 DLL，用于控制通过 LAN（或串行端口）连接的 ECR（电子收银机）设备。
*   DLL 提供了易于使用的接口，例如 Connect()、Disconnect() 以及一些 ECR 特定命令，包括 Logon()、Logoff()、ReadCard() 等。
*   （可能对我的应用程序来说太过分了，但是......）我想在我的 DLL 中使用 IOCP 以异步方式向 ECR 发送/接收数据。

我的顶级课程看起来像这样：

```
#pragma once

#include "Connection.h"
#include "Uncopyable.h"
#include "ConnectionFactory.h"
#include "CommandName.h"

class Ecr : private Uncopyable
{
public:
    Ecr(const std::string& rstrConnectionInfo)
        : m_spConnection(ConnectionFactory::CreateConnection(rstrConnectionInfo))
    {
        //Initialise();
    }

    ~Ecr()
    {
        //Shutdown();
    }

    bool Initialise()
    {
        if (!m_spConnection)
            return false;

        m_spConnection->Initialise();

        return true;
    }

    bool Shutdown()
    {
        if (!m_spConnection)
            return false;

        m_spConnection->Shutdown();

        return true;
    }

    bool Connect()
    {
        if (!m_spConnection)
            return false;

        if (!m_spConnection->Connect())
            return false;

        return true;
    }

    bool Disconnect()
    {
        m_spConnection->Disconnect();

        return true;
    }

    bool Logon(const std::vector<BYTE>& rvecCommandOptions)
    {
        m_spConnection->SendCommand(CommandName::Logon(), rvecCommandOptions);

        return true;
    }

    bool Logoff()
    {
        m_spConnection->SendCommand(CommandName::Logoff());

        return true;
    }

    // ... more commands follow.

private:
    ConnectionPtr m_spConnection;
}; 
```

而且我有 TcpConnection 类，它是由 ECR 类创建的，并且完成了所有艰苦的工作。Ecr 和 Connection 类都是不可复制的。

**连接.h：**

```
#pragma once

#include "Uncopyable.h"

class CommandName;

class Connection : private Uncopyable
{
public:
    Connection(const std::string& rstrConnectionInfo);
    virtual ~Connection();

    virtual bool Initialise() = 0;
    virtual bool Shutdown() = 0;
    virtual bool Connect() = 0;
    virtual bool Disconnect() = 0;
    virtual bool SendCommand(const CommandName& rCommandName, const std::vector<BYTE>& rvecCommandOptions) = 0;
    virtual bool ReceiveResponse() = 0;

    bool SendCommand(const CommandName& rCommandName);

private:
    std::string m_strConnectionInfo;
};

typedef std::tr1::shared_ptr<Connection> ConnectionPtr; 
```

**TcpConnection.h：**

```
#pragma once
#include "connection.h"

class TcpConnection : public Connection
{
public:
    TcpConnection(const std::string& rstrConnectionInfo);
    ~TcpConnection();

    // Connection
    bool Initialise();
    bool Shutdown();
    bool Connect();
    bool Disconnect();
    bool SendCommand(const CommandName& rCommandName, const std::vector<BYTE>& rvecCommandOptions);
    bool ReceiveResponse();

    static DWORD WINAPI WorkerThread(LPVOID lpParam);

private:
    SOCKET m_socket;
    HANDLE m_hIocp;
}; 
```

**TcpConnection.cpp：**

```
#include "StdAfx.h"
#include "TcpConnection.h"
#include "CommandBuilderTcp.h"

TcpConnection::TcpConnection(const std::string& rstrConnectionInfo)
    : Connection(rstrConnectionInfo)
    , m_socket(INVALID_SOCKET)
    , m_hIocp(INVALID_HANDLE_VALUE)
{
    WSADATA wsaData;
    WSAStartup(MAKEWORD(2, 2), &wsaData);

    m_socket = WSASocket(AF_INET, SOCK_STREAM, IPPROTO_TCP, NULL, 0, WSA_FLAG_OVERLAPPED);
}

TcpConnection::~TcpConnection()
{
}

bool TcpConnection::Initialise()
{
    // Set up threads for using IOCP.

    m_hIocp = CreateIoCompletionPort(INVALID_HANDLE_VALUE, NULL, 0, 0);

    SYSTEM_INFO systemInfo;
    GetSystemInfo(&systemInfo);

    for (DWORD dwIndex = 0; dwIndex < systemInfo.dwNumberOfProcessors; dwIndex++)
    {
        HANDLE hThread = CreateThread(NULL, 0, WorkerThread, m_hIocp, 0, NULL);
        CloseHandle(hThread);
    }

    CreateIoCompletionPort((HANDLE)m_socket, m_hIocp, 0, 0);

    return true;
}

bool TcpConnection::Shutdown()
{
    // Release threads.

    return true;
}

bool TcpConnection::Connect()
{
    if (m_socket)
        return true;

    // Hard-coding IP address and port number for now.
    sockaddr_in server;
    server.sin_family = AF_INET;
    server.sin_addr.s_addr = inet_addr("10.0.9.80");
    server.sin_port = htons(22000);

    WSAConnect(m_socket, (LPSOCKADDR)&server, sizeof(server), NULL, NULL, NULL, NULL);

    return true;
}

bool TcpConnection::Disconnect()
{
    if (m_socket)
        closesocket(m_socket);

    WSACleanup();

    return true;
}

bool TcpConnection::SendCommand(const CommandName& rCommandName, const std::vector<BYTE>& rvecCommandOptions)
{
    // Build full command from rCommandName and rvecCommandOptions and send to server.
    return true;
}

bool TcpConnection::ReceiveResponse()
{
    return true;
}

DWORD WINAPI TcpConnection::WorkerThread(LPVOID lpParam)
{
    // Call GetQueuedCompletionStatus in a loop
    return 0;
} 
```

然后，主机应用程序为每个 ECR 设备创建一个 DLL 实例：

```
Ecr ecr("ipaddress+port");

ecr.Initialise(); // Or do this in Ecr's ctor?

ecr.Connect();

BYTE arrCommandOptions[] = {0x00, 0x00, 0x00, 0x01, 0x18, 0xA6, 0x00, 0x01, 0x49, 0x08, 0x26};
std::vector<BYTE> vecCommandOptions(arrCommandOptions, arrCommandOptions + sizeof(arrCommandOptions) / sizeof(arrCommandOptions[0]));
ecr.Logon(vecCommandOptions);

ecr.Logoff();

ecr.Disconnect();

ecr.Shutdown(); // Or do this in Ecr's dtor?

return 0; 
```

我想要 TcpConnection 级别的所有 IOCP 相关内容，而不是 Ecr 级别，因为我不希望 Ecr 关心数据传输是如何在下面完成的。

我的想法行不通吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T06:26:36.503

每个 I/O 数据必须在相关 I/O 操作的生命周期内存在。因此，您可能希望动态分配它，并在完成后将其池化以供重用。我使用引用计数系统，但这只是因为我可以让每个 I/O 数据保持比单个 I/O 操作更长的时间。I/O 特定数据的生命周期如下：

*   在发出 I/O 操作之前分配（显然）
*   操作完成时释放，成功或出错。

将每个 I/O 作为数据成员实际上没有任何意义，因为它由 I/O 操作“拥有”......您可能有一个 I/O 数据“分配器”，它可以分配这些对象，并且在 I/O 操作完成后获取它们的所有权（合并它们以供重用）。

您可能想查看一些执行此操作的 IOCP 代码（并以可扩展的方式处理事物的线程方面），请参见[此处](http://www.serverframework.com/products---the-free-framework.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T21:37:31.027

您展示的内容基于我在[另一个问题](https://stackoverflow.com/questions/10998504/winsock2-how-to-use-iocp-on-client-side/11092944)中给您的 IOCP 代码。但是，该代码旨在跨同一个套接字上的多个 IOCP 操作重用单个`PER_IO_DATA`实例，因为您只在客户端读取，而只在服务器中写入。现在您在客户端混合读取和写入，因此您需要通过合并我之前给您的所有代码来调整工作线程以支持两种类型的 IOCP 操作，然后在`PER_IO_DATA`完成操作中添加一个附加标志知道是读操作还是写操作。

至于你的问题：

> 我应该在哪里做 m_pPerIoData = new PER_IO_DATA？

`m_pPerIoData`使用类范围的成员 根本没有多大意义。正在创建一个新的 PER_IO_DATA，这很好，当工作线程检测到所有数据已完成发送或套接字已关闭时`SendCommand()`，您只需要它。`delete``PER_IO_DATA::Buffer`

> 将指向 PER_IO_DATA 的指针作为成员变量有意义吗？

不用于写操作，不。不过，你可以有一个班级成员来阅读。除非在准备好读取单个响应时`SendCommand()`创建一个新的。当收到完整的响应或套接字已关闭时，`PER_IO_DATA`工作线程将需要它。`delete`

# php - 当我尝试使用 facebook id 登录网站时出错

> ID：11310059
> 
> 赞同：0
> 
> 时间：2012-07-03T11:34:53.570
> 
> 标签：php, curl

当我尝试使用 facebook id 登录时出现此错误

> 未捕获的异常“异常”，带有消息“Facebook 需要 CURL PHP 扩展”。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:45:09.390

您的服务器没有安装 Curl 扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:36:36.433

您没有安装 CURL，或者它在您的服务器上被停用。做 phpinfo(); 查看 if 已安装。

# c# - MVC3 将未经授权的用户重定向到哪里？

> ID：11310060
> 
> 赞同：0
> 
> 时间：2012-07-03T11:35:01.623
> 
> 标签：c#, asp.net-mvc-3, redirect, authorization, forms-authentication

所以我有一个带有以下 web.config 的 ASP.NET MVC3 应用程序

```
<?xml version="1.0"?>
<configuration>
  ....
  <system.web>
  ....
    <authentication mode="Forms">
      <forms loginUrl="~/Account/LogOn" defaultUrl="~" 
            slidingExpiration="true" timeout="10080" />
    </authentication> 
```

和一个控制器：

```
[Authorize(Roles="admin")]
public class MetaStyleController : TunaController
{
    ....
    public ActionResult Index()
    {
        .... 
```

如果我没有登录，并且尝试点击`http//localhost/myAppPath/MetaStyle`，我会被重定向到上面定义的登录页面，对吗？

那么为什么我会被重定向到`http://localhost/myAppPath/Account/Login?ReturnUrl=%2fmyAppPath%2fMetaStyle`？（注意，url 有***Login***而不是***LogOn***）

`Login`来自哪里？我在我的项目中没有看到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:16:15.667

请参阅[ASP.NET MVC 3 发行说明](http://www.asp.net/whitepapers/mvc3-release-notes#0.1__Toc274034230)。根据它，您应该使用以下应用程序设置。

```
<add key="autoFormsAuthentication" value="false" /> 
```

# asp.net - 将 HTML 放入 ASPX - 可能吗？

> ID：11310061
> 
> 赞同：2
> 
> 时间：2012-07-03T11:35:07.580
> 
> 标签：asp.net, html

我有一个这样开头的 aspx 页面：

```
<%@ Page Language="C#" MasterPageFile="~/Main_MP_Teacher.master" AutoEventWireup="true" CodeFile="default.aspx.cs"
    Inherits="Teacher_default" Title="Teacher Page" %> 
```

我也想在此页面中包含 html，但是当我放入第一行时

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/strict.dtd"> 
```

我得到一个解析错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T11:42:22.870

The parser error is probably because you're putting something other than `<asp:ContentPlaceHolder>` in the root of your ASPX page.

If you're using a `MasterPageFile` then the `<!DOCTYPE` should be at the start of the MasterPage.

This is unless you have a `<asp:ContentPlaceHolder>` right at the start of the MasterPage, which you can put the `<!DOCTYPE` into it.

**MORE INFORMATION**

The `<!DOCTYPE` should always be the very first thing in the HTML file, so normally your MasterPage would look something like this...

```
<%@ Master Language="VB" CodeBehind="MyMaster.master.vb" Inherits="dev.MyMaster" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/strict.dtd">
<html>
  <head>
    <asp:ContentPlaceHolder runat="server" id="myHeader"/>
  </head>
  <body>
    <form id="form1" runat="server">
      <asp:ContentPlaceHolder runat="server" id="myBody"/>
    </form>
  </body>
</html> 
```

If for some reason you wanted to have a page specified doc type, then you could add a new placeholder at the start, with a default value...

```
<%@ Master Language="VB" CodeBehind="MyMaster.master.vb" Inherits="dev.MyMaster" %>
<asp:ContentPlaceHolder runat="server" id="myDocType">
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/strict.dtd">
</asp:ContentPlaceHolder>
<html>
  ...
</html> 
```

And then in the page you want to override put the following (by NOT overriding, the original will be output instead)...

```
<%@ Page Language="vb" MasterPageFile="MyMaster.master" Codebehind="MyPage.aspx.vb"
  Inherits="dev.MyPage" Title="My Page" %>
<asp:Content runat="server" ContentPlaceHolderId="myDocType">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
</asp:Content>
... 
```

# c# - 使用 gridSplitter 调整大小和可协作的 gridColumn

> ID：11310062
> 
> 赞同：0
> 
> 时间：2012-07-03T11:35:11.550
> 
> 标签：c#, wpf, xaml, togglebutton, gridsplitter

我想要一个侧边栏，可以通过按下 ToggleButton 来隐藏它，并由用户使用 GridSplitter 控件通过鼠标重新调整大小。最后，我希望它看起来像这样：

（请看图[1](http://i.stack.imgur.com/gcHHB.png)）

和：

（请看图[2](http://i.stack.imgur.com/M5c0y.png)）

这是我到目前为止所拥有的：

```
<Grid>
<Grid.ColumnDefinitions>
    <ColumnDefinition Width="*" />
    <ColumnDefinition Width="Auto"/>
</Grid.ColumnDefinitions>
<GridSplitter Grid.Column="1" HorizontalAlignment="Left" Width="4"
 BorderThickness="1,0" Foreground="{x:Null}" Background="#01000000" BorderBrush="{DynamicResource ColorControlBorder}"/>
<Grid x:Name="grid" Grid.Column="1" Margin="4,0,0,0" Background="{DynamicResource IconErrorFilter}" RenderTransformOrigin="0.5,0.5">
    <Grid.RenderTransform>
        <TransformGroup>
            <ScaleTransform/>
            <SkewTransform/>
            <RotateTransform/>
            <TranslateTransform/>
        </TransformGroup>
    </Grid.RenderTransform>
    <Expander x:Name="expander2" Style="{DynamicResource AddExpanderStyle}" 
        ExpandDirection="Up" Background="#D8FFFFFF" BorderBrush="{DynamicResource ColorControlBorder}"
        DataContext="{Binding FilterTypesPMod}" d:LayoutOverrides="Height" VerticalAlignment="Bottom">
        <Expander.Resources>
            <CollectionViewSource x:Key="CollectionFilterTypes" Source="{Binding FilterTypes}">
                <CollectionViewSource.SortDescriptions>
                    <ComponentModel:SortDescription PropertyName="Order" Direction="Ascending" />
                </CollectionViewSource.SortDescriptions>
            </CollectionViewSource>
        </Expander.Resources>
        <Grid>
            <ItemsControl BorderThickness="0" Background="Transparent" BorderBrush="Transparent"
                ItemsSource="{Binding Source={StaticResource CollectionFilterTypes}}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Bla... />
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </Grid>
    </Expander>
</Grid>
<ToggleButton x:Name="toggleButton" Grid.Column="1" HorizontalAlignment="Left" Style="{DynamicResource CollapsingToggleButtonStyle}" Background="{DynamicResource ColorMainForeground}" RenderTransformOrigin="0.5,0.5">
    <ToggleButton.LayoutTransform>
        <TransformGroup>
            <ScaleTransform/>
            <SkewTransform/>
            <RotateTransform/>
            <TranslateTransform/>
        </TransformGroup>
    </ToggleButton.LayoutTransform>
</ToggleButton> 
```

当我在没有 GridSplitter 的情况下使用它时，它工作正常（调整大小除外）：当我按下 ToggleButton 时，Grid 'grid' 的内容消失并且 GridColumn(1) 变得更小，为 GridColumn(0) 留下更多空间。但是，一旦我放入 GridSplitter，自动调整大小就会停止。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T23:56:52.177

听起来您遇到了与此问题相同的问题：

[GridSplitter 禁用我的 RowDefinition 样式](https://stackoverflow.com/questions/18234888)

正如 akjoshi 所解释的，GridSplitter 改变了行的高度属性（列的宽度属性）。如果在使用 GridSplitter 调整行或列的大小后检查 Height 或 Width 属性的值源，您会看到它已设置为“local”。“本地”值会覆盖由样式、模板或触发器设置的任何值。清除 Height 或 Width 属性允许使用触发器和/或样式再次设置 Height 或 Width 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:36:26.457

我试图重现你的场景，看起来我理解你的情况。这就是你的问题 -

如果您只是使用`ToggleButton`，那么您的列将正确展开/折叠；如果您使用`GridSplitter`，那么它也会正确展开/折叠；但是如果您使用`GridSplitter`然后尝试使用，`ToggleButton` 那么该列将不会正确收缩。

[这](http://weblogs.asp.net/blogs/akjoshi/External/GridSplitterDemo.xaml.txt)是我用来复制问题的 xaml。

原因是一旦使用`GridSplitter`，它会将列的宽度更改为固定值，因此 <`ColumnDefinition Width="Auto"/>`不再适用；它更改为固定值`<ColumnDefinition Width="154"/>`。现在，即使该列内的内容被折叠，列宽仍然是固定的（即 154）。这可以使用 SNOOP 轻松验证。

对此的一种解决方案是将第二列的宽度更改`Auto`为按下 ToggleButton 时（通过动画或代码）；通过动画设置列的宽度并不直接，但可以使用一些解决方法（创建`GridLengthAnimation`），如这些 SO 问题中所述 -

[动画时网格列更改宽度](https://stackoverflow.com/questions/4242072/grid-column-changing-width-when-animating)

[在 WPF 中，有没有人为 Grid 设置动画？](https://stackoverflow.com/questions/197855/in-wpf-has-anybody-animated-a-grid)

# xml - 如果多个条目具有相同的节点名称，如何正确定位 xml 节点？

> ID：11310063
> 
> 赞同：2
> 
> 时间：2012-07-03T11:35:13.523
> 
> 标签：xml, powershell, xml-parsing, powershell-2.0

我有一个类似于下面的 xml 文件。

```
<Parameters>
  <Parameter IsEncrypted="False">
    <ParameterName>pRdGpInstallOptions</ParameterName>
    <ParameterValue>Custom</ParameterValue>
  </Parameter>
  <Parameter IsEncrypted="False">
    <ParameterName>pRdAccept</ParameterName>
    <ParameterValue>true</ParameterValue>
  </Parameter>
  <Parameter IsEncrypted="False">
    <ParameterName>pCboEditSQLServer</ParameterName>
    <ParameterValue>MachineName\SQLEXPRESS</ParameterValue>
  </Parameter>
</Parameters> 
```

我在这里只复制了几个节点。实际上，真实文件可能有数百个参数节点。

我们不能对索引进行硬编码，因为它可能以任何顺序出现。我正在尝试检索与 Parameter Name 关联的 SQLinstance name 参数值`"pCboEditSQLServer"`。

我想使用 powershell 检索这个值。如何解析这个动态 xml 文件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T11:44:35.640

```
$sql = $xml.Parameters.Parameter | Where-Object {$_.ParameterName -eq 'pCboEditSQLServer'}
$sql.ParameterValue

MachineName\SQLEXPRESS 
```

Here's another option (should be faster) using xpath:

```
$path = "/Parameters/Parameter[ParameterName='pCboEditSQLServer']/ParameterValue"
$xml.SelectSingleNode($path).'#text' 
```

And there's the `Select-Xml` cmdlet:

```
$sql = $xml | Select-Xml -XPath $path 
$sql.Node.'#text' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T11:48:40.037

读取 XML：

`$xml = [xml](gc test.xml -Encoding utf8)`

并使用对象模型检索数据：

`$xml.Parameters.Parameter | ? { $_.ParameterName -eq "pCboEditSQLServer" } | Select-Object -Property ParameterName, ParameterValue`

# java - 如何使用java检测给定的日期格式

> ID：11310065
> 
> 赞同：8
> 
> 时间：2012-07-03T11:35:15.137
> 
> 标签：java, localdate

我有一个获取字符串并将其更改为特定日期格式的方法，但问题是日期将是任何格式例如

```
16 July 2012

March 20 2012

2012 March 20 
```

所以我需要检测字符串是哪种文件格式。

我使用下面的代码来测试它，但如果文件格式发生变化，我会得到异常。

```
private String getUpdatedDate(String updated) {
        Date date;
        String formatedDate = null;
        try {
            date = new SimpleDateFormat("d MMMM yyyy", Locale.ENGLISH)
                    .parse(updated);
            formatedDate = getDateFormat().format(date);
        } catch (ParseException e) {
            e.printStackTrace();
        }
        return formatedDate;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T11:37:53.163

也许最简单的解决方案是构建一组您可以合理预期的日期格式，然后依次尝试输入每种格式。

您可能想要标记模棱两可的输入，例如 2012/5/6 是 6 月 5 日还是 5 月 6 日？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T11:43:36.810

BalusC 编写了一个`DateUtil`适用于许多情况的简单程序。您可能需要扩展它以满足您的要求。

这是链接：[https ://balusc.omnifaces.org/2007/09/dateutil.html](https://balusc.omnifaces.org/2007/09/dateutil.html)

以及您需要寻找的方法`determineDateFormat()`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-03T13:55:49.743

如果您使用的是[Joda Time](http://joda-time.sourceforge.net/)（btw 很棒的库），您可以很容易地做到这一点：

```
DateTimeParser[] dateParsers = { 
        DateTimeFormat.forPattern("yyyy-MM-dd HH").getParser(),
        DateTimeFormat.forPattern("yyyy-MM-dd").getParser() };
DateTimeFormatter formatter = new DateTimeFormatterBuilder().append(null, dateParsers).toFormatter();

DateTime date1 = formatter.parseDateTime("2012-07-03");
DateTime date2 = formatter.parseDateTime("2012-07-03 01"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-16T15:40:50.797

Apache commons 有一个实用方法来解决这个问题。[org.apache.commons.lang.time.DateUtils](https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/time/DateUtils.html#parseDateStrictly%28java.lang.String,%20java.lang.String[]%29)类有一个方法 parseDateStrictly

```
 public static Date parseDateStrictly(String str,
                                         String[] parsePatterns)
                                  throws ParseException

 Parameters:
        str - the date to parse, not null
        parsePatterns - the date format patterns to use, see SimpleDateFormat, not null 
```

通过尝试各种不同的解析器来解析表示日期的字符串。

解析将依次尝试每个解析模式。仅当解析整个输入字符串时，解析才被视为成功。如果没有匹配的解析模式，则抛出 ParseException。

解析器会严格解析——它不允许诸如“February 942, 1996”之类的日期。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T11:38:09.567

确定预期的格式，并尝试使用每种格式解析日期，一个接一个。一旦其中一种格式无一例外地解析日期，就立即停止。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-17T15:59:36.180

[点击查看结果](https://i.stack.imgur.com/ulGV0.jpg)

使用正则表达式解析日期字符串。此正则表达式可以检测任何类型的日期格式。这里的示例代码还不包括时间。您可以更改代码以添加更多日期部分，例如时间和时区...月份名称取决于系统的默认语言区域设置。

```
import java.io.IOException;
import java.text.DateFormatSymbols;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import java.util.HashMap;
import java.util.Iterator;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class DateUtils {

    static String MONTH="";
    static String dateRegEx="";
    static Pattern DatePattern; 
    static HashMap<String, Integer> monthMap = new HashMap<String, Integer>();
    static {
        initializeMonthName();
        dateRegEx="(?i)(\\d{1,4}|"+MONTH+")[-|/|.|\\s+]?(\\d{1,2}|"+MONTH+")[-|/|.|,]?[\\s+]?(\\d{1,4}|"+MONTH+")[\\s+|\\t|T]?(\\d{0,2}):?(\\d{0,2}):?(\\d{0,2})[.|,]?[\\s]?(\\d{0,3})?([+|-])?(\\d{0,2})[:]?(\\d{0,2})[\\s+]?([A|P]M)?";
        DatePattern = Pattern.compile(dateRegEx);
    }

    private static void initializeMonthName() {
        String[] monthName=getMonthString(true);
        for(int i=0;i<12;i++){
            monthMap.put(monthName[i].toLowerCase(), Integer.valueOf(i+1));
        }

        monthName=getMonthString(false);
        for(int i=0;i<12;i++){
            monthMap.put(monthName[i].toLowerCase(), Integer.valueOf(i+1));
        }

        Iterator<String> it = monthMap.keySet().iterator();
        while(it.hasNext()){
            String month=it.next();
            if(MONTH.isEmpty()){
                MONTH=month;
            }else{
                MONTH=MONTH + "|" + month;
            }
        }
    }

    public static boolean isInteger(Object object) {
        if(object instanceof Integer) {
            return true;
        } else {
            try{
                Integer.parseInt(object.toString());
            }catch(Exception e) {
                return false;
            }           
        } 
        return true;
    }

    public static String[] getMonthString(boolean isShort) {
        DateFormatSymbols dfs = new DateFormatSymbols();
        if (isShort) {
         return dfs.getShortMonths();
        } else {
            return dfs.getMonths();
        }
    }

    public static int getMonthMap(String value) {

        if(monthMap.get(value)==null){
            return 0;
        }
        return monthMap.get(value).intValue();      
    }

    public static long parseDate(String value){

        Matcher matcher = DatePattern.matcher(value);
        int Year=0, Month=0, Day=0; 
        boolean isYearFound=false;
        boolean isMonthFound=false;
        boolean isDayFound=false;
        if(matcher.find()) {            
            for(int i=1;i<matcher.groupCount();i++){
                String data=matcher.group(i)==null?"":matcher.group(i); 
                if(data.equalsIgnoreCase("null")){
                    data="";
                }
                //System.out.println(String.valueOf(i) + ": " + data);
                switch(i){
                case 1:
                    if(!data.isEmpty()){
                        if(isInteger(data)){
                            Integer YMD = Integer.valueOf(data);
                            if(YMD==0){
                                return 0;
                            }
                            if(YMD>31){
                                Year = YMD.intValue();
                                isYearFound = true;
                            }else if(YMD>12){
                                Day = YMD.intValue();
                                isDayFound = true;
                            }else {
                                Month=YMD.intValue();
                                isMonthFound=true;
                            }
                        }else {
                            Month = getMonthMap(data.toLowerCase());
                            if(Month==0){
                                return 0;
                            }
                            isMonthFound=true;
                        }
                    }else {
                        return 0;
                    }
                    break;
                case 2:
                    if(!data.isEmpty()){
                        if(isInteger(data)){                            
                            Integer YMD = Integer.valueOf(data);
                            if(YMD==0){
                                return 0;
                            }

                            if(YMD>31){
                                if(isYearFound) {
                                    return 0;
                                }
                                Year = YMD.intValue();
                                isYearFound = true;
                            }else if(YMD>12){
                                if(isDayFound) {                                    
                                    return 0;
                                }
                                Day = YMD.intValue();
                                isDayFound = true;
                            }else {                             
                                if(isMonthFound){
                                    Day=YMD.intValue();
                                    isDayFound=true;
                                }else{
                                    Month=YMD.intValue();
                                    isMonthFound=true;
                                }
                            }
                        }else {
                            if(isMonthFound){
                                Day=Month;
                                isDayFound=true;
                            }
                            Month = getMonthMap(data.toLowerCase());
                            if(Month==0){
                                return 0;
                            }

                            isMonthFound=true;
                        }
                    }else {
                        return 0;
                    }
                    break;
                case 3:
                    if(!data.isEmpty()){
                        if(isInteger(data)){

                            Integer YMD = Integer.valueOf(data);
                            if(YMD==0){
                                return 0;
                            }
                            if(YMD>31){
                                if(isYearFound) {
                                    return 0;
                                }
                                Year = YMD.intValue();
                                isYearFound = true;
                            }else if(YMD>12){
                                if(isDayFound) {
                                    return 0;
                                }
                                Day = YMD.intValue();
                                isDayFound = true;
                            }else {
                                if(isMonthFound){
                                    Day=YMD.intValue();
                                    isDayFound=true;                                    
                                }else {
                                    Month = YMD.intValue();
                                    isMonthFound=true;
                                }

                            }
                        }else {
                            if(isMonthFound){
                                Day=Month;
                                isDayFound=true;
                            }
                            Month = getMonthMap(data.toLowerCase());
                            if(Month==0){
                                return 0;
                            }
                            isMonthFound=true;
                        }
                    }else {
                        return 0;
                    }
                    break;
                case 4:
                //hour
                    break;
                case 5:
                //minutes
                    break;
                case 6:
                //second
                    break;
                case 7:
                //millisecond
                    break;
                case 8:
                //time zone +/-
                    break;
                case 9:
                //time zone hour
                    break;
                case 10:
                // time zone minute
                    break;
                case 11:
                //AM/PM
                    break;
                }

            }           
        }

        Calendar c = Calendar.getInstance();
        c.set(Year, Month-1, Day, 0, 0); 
        return c.getTime().getTime();
    }

    public static void main(String[] argv) throws IOException {

        long d= DateUtils.parseDate("16 July 2012");
        Date dt = new Date(d);
        SimpleDateFormat df2 = new SimpleDateFormat("d MMMM yyyy");
        String dateText = df2.format(dt);
        System.out.println(dateText);

        d= DateUtils.parseDate("March 20 2012");
        dt = new Date(d);
        dateText = df2.format(dt);
        System.out.println(dateText);        

        d= DateUtils.parseDate("2012 March 20");
        dt = new Date(d);
        dateText = df2.format(dt);
        System.out.println(dateText);  
    }

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-04T12:42:04.620

```
 public static String detectDateFormat(Context context, String inputDate, String requiredFormat) {
    String tempDate = inputDate.replace("/", "").replace("-", "").replace(" ", "");
    String dateFormat = "";

    if (tempDate.matches("([0-12]{2})([0-31]{2})([0-9]{4})")) {
        dateFormat = "MMddyyyy";
    } else if (tempDate.matches("([0-31]{2})([0-12]{2})([0-9]{4})")) {
        dateFormat = "ddMMyyyy";
    } else if (tempDate.matches("([0-9]{4})([0-12]{2})([0-31]{2})")) {
        dateFormat = "yyyyMMdd";
    } else if (tempDate.matches("([0-9]{4})([0-31]{2})([0-12]{2})")) {
        dateFormat = "yyyyddMM";
    } else if (tempDate.matches("([0-31]{2})([a-z]{3})([0-9]{4})")) {
        dateFormat = "ddMMMyyyy";
    } else if (tempDate.matches("([a-z]{3})([0-31]{2})([0-9]{4})")) {
        dateFormat = "MMMddyyyy";
    } else if (tempDate.matches("([0-9]{4})([a-z]{3})([0-31]{2})")) {
        dateFormat = "yyyyMMMdd";
    } else if (tempDate.matches("([0-9]{4})([0-31]{2})([a-z]{3})")) {
        dateFormat = "yyyyddMMM";
    } else {

    }
    try {
        String formattedDate = new SimpleDateFormat(requiredFormat, Locale.ENGLISH).format(new SimpleDateFormat(dateFormat).parse(tempDate));
        Toast.makeText(context, formattedDate, Toast.LENGTH_SHORT).show();
        return formattedDate;
    } catch (Exception e) {
        Toast.makeText(context, "Please check the date format", Toast.LENGTH_SHORT).show();
        return "";
    }

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-13T19:39:03.977

我也遇到了这个问题，在某些地方：

1.  我做了同样的事情，有一组符合我需要的格式。
2.  更新了我的 sql 查询，它以我可以轻松解析的格式返回日期，例如在我的查询 TO_CHAR (o.CREATE_TS, 'MM-DD-YYYY') 中使用它，同时转换为我使用的其他所需格式java中的“MM-dd-yyyy”解析并更改为所需的格式。

希望#2 至少在少数情况下对您有所帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-03-04T22:07:20.557

FTA ( [https://github.com/tsegall/fta](https://github.com/tsegall/fta) ) 旨在解决这个问题（以及其他问题）。这是一个例子：

```
 import java.util.Locale;

import com.cobber.fta.dates.DateTimeParser;
import com.cobber.fta.dates.DateTimeParser.DateResolutionMode;

public abstract class DetermineDateFormat {

    public static void main(final String[] args) {
        final DateTimeParser dtp = new DateTimeParser(DateResolutionMode.MonthFirst, Locale.ENGLISH);

        System.err.println(dtp.determineFormatString("26 July 2012"));
        System.err.println(dtp.determineFormatString("March 9 2012"));
        // Note: Detected as MM/dd/yyyy despite being ambiguous as we indicated MonthFirst above when insufficient data
        System.err.println(dtp.determineFormatString("07/04/2012"));
        System.err.println(dtp.determineFormatString("2012 March 20"));
        System.err.println(dtp.determineFormatString("2012/04/09 18:24:12"));
    } 
```

这将给出以下输出：

```
MMMM d yyyy
MM/dd/yyyy
yyyy MMMM dd
yyyy/MM/dd HH:mm:ss 
```

# java - 在 WebDriver 中获取正确的 WebElement

> ID：11310067
> 
> 赞同：0
> 
> 时间：2012-07-03T11:35:18.537
> 
> 标签：java, selenium, webdriver

我有一个大致如下所示的 HTML 页面：

```
<div id="rolesRollerBody" style="height: 309px;">
    <input type="checkbox" onclick="checkAll('removeRolesForm');" name="allbox">
    Select all
    <br><br>
    <input type="checkbox" value="49893" name="delRole">
    CCC11
    <br>
    <input type="checkbox" value="49881" name="delRole">
    TEST111
    <br><br>
</div> 
```

我正在使用以下方法获取整个面板：

```
WebElement deletePanel = driver.findElement(By.className("bulkUpdateBody"))
            .findElement(By.id("rolesRollerBody")); 
```

现在我需要获取名为“TEST111”的复选框。问题是，我无法获得文本“TEST111”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:06:21.777

[XPath](http://www.w3.org/TR/xpath/)解决方案：

```
id('rolesRollerBody')/text()[contains(.,'TEST111')]/preceding-sibling::input[1] 
```

这选择：

> ```
> input                          - The `input` element
> /preceding-sibling::input[1]   - that is most closely followed by
> /text()[contains(.,'TEST111')] - the 'TEST111' text
> id('rolesRollerBody')          - in the element with id 'rolesRollerBody'. 
> ```

或者，直接：

> ```
> id('rolesRollerBody')          - The element with id 'rolesRollerBody'
> /text()[contains(.,'TEST111')] - in that, the text node containing 'TEST111'
> /preceding-sibling::input[1]   - and the first preceding `input` element to that text 
> ```

所以，

```
WebElement theInput = driver.findElement(By.xpath("id('rolesRollerBody')/text()[contains(.,'TEST111')]/preceding-sibling::input[1]")); 
```

# sqlite - 在 sqlite 中将行数据显示为列

> ID：11310074
> 
> 赞同：0
> 
> 时间：2012-07-03T11:35:33.860
> 
> 标签：sqlite

**我在SQLITE**中有一个具有以下结构的数据库表

 **```
Name        Count          Type
Roy          3              CA
Roy          2              BT
John         2              CA
John         1              BT 
```

需要一个可以显示上述数据的查询，如下所示（sqlite）

```
Name         count        CA       BT   
Roy            5           3        2
John           3           2        1 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T20:06:07.493

SQLite 中没有旋转，但您可以使用很多子查询：

```
SELECT DISTINCT name,
    (SELECT sum([count]) FROM test tst WHERE tst.name = test.name) as count,
    (SELECT sum([count]) FROM test tst WHERE tst.name = test.name AND type='CA') as CA,
    (SELECT sum([count]) FROM test tst WHERE tst.name = test.name AND type='BT') as BT
    FROM test 
```

假设表名“测试”**

# .net - 如何从 Windows Azure 辅助角色连接到 CRM 2011

> ID：11310081
> 
> 赞同：1
> 
> 时间：2012-07-03T11:36:14.163
> 
> 标签：.net, windows, dynamics-crm-2011, azure-worker-roles

我使用 .Net 4.0 开发了一个 Web 应用程序。现在我想在 Windows azure 上托管该应用程序。当我以工作人员角色编写用于与 CRM 2011 在线建立连接的代码时，它工作正常，我能够成功建立连接。但是，当我尝试从我的工作角色连接到 CRM 2011 本地服务器时，它会在建立连接时引发错误。为此，我在我的应用程序中使用本地 CRM 2011 的服务参考。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:36:32.323

您的内部部署是面向 Internet 的吗？

> 元数据包含无法解析的引用

如果无法访问服务器端点，您会遇到此错误 - 无论是物理错误（例如拼写错误）还是网络限制阻止访问（防火墙、路由、服务器配置）等。

# .net - C++/CLI 编译器是如何工作的？

> ID：11310087
> 
> 赞同：0
> 
> 时间：2012-07-03T11:36:38.297
> 
> 标签：.net, compiler-construction, c++-cli, unmanaged, managed-c++

我想知道 C++/CLI 编译器是如何工作的，我在 C++/CLI 中生成了一个简单代码的 5 个树转储

我用这个简单的代码（纯粹、安全的 CLR）生成了 3 个树转储：

```
using namespace System;

int main(array<System::String ^> ^args)
{
    Console::WriteLine(L"Hello World");
    return 0;
} 
```

所以，但是，当我用'printf'编译代码时......CLR和PURE的代码生成使用这个指令：

```
 |___[STM] printf : vararg int32 modopt([mscorlib]System.Runtime.CompilerServices.CallConvCdecl)(int8 modopt([mscorlib]System.Runtime.CompilerServices.IsSignUnspecifiedByte) modopt([mscorlib]System.Runtime.CompilerServices.IsConst)*) 
```

IL代码是这样的：

```
//000008:   printf("Ola mundo\n");
  IL_000a:  /* 7F   | (04)000001       */ ldsflda    valuetype '<CppImplementationDetails>'.$ArrayType$$$BY0L@$$CBD/*02000002*/ modopt([mscorlib/*23000001*/]System.Runtime.CompilerServices.IsConst/*01000002*/) '?A0x1af50272.unnamed-global-0' /* 04000001 */
  IL_000f:  /* 28   | (0A)000004       */ call       vararg int32 modopt([mscorlib/*23000001*/]System.Runtime.CompilerServices.CallConvCdecl/*01000001*/) printf(int8 modopt([mscorlib/*23000001*/]System.Runtime.CompilerServices.IsSignUnspecifiedByte/*01000006*/) modopt([mscorlib/*23000001*/]System.Runtime.CompilerServices.IsConst/*01000002*/)*) /* 0A000004 */
  IL_0014:  /* 26   |                  */ pop 
```

所以，在我尝试开发这种风格的编译器时，我发现了一个名为 pnetC 的 NetGnu 编译器，这个编译器混合了 C Native 代码和 MSIL，但是，编译器使用一个包含所有 .h 文件的 dll ......

所以，我想要这种编译器风格的技术信息，我如何生成这种混合代码？

所以，基本上，我需要这方面的想法，以及这方面的技术信息......

谢谢亚历山大

# iphone - Adding Sound to splash screen in iPhone

> ID：11310088
> 
> 赞同：0
> 
> 时间：2012-07-03T11:36:40.717
> 
> 标签：iphone, audio

I would like to add some background music to the splash screen in the iPhone. I have already increased the splash screen time by few seconds.. And the music isn't long... But I am not sure how to do it? Need some guidance...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T11:39:53.910

Use following function for playing sound file.

```
-(void)playSoundFromFileName:(NSString*)pstrFileName ofType:(NSString*)pstrFileType
{   
    SystemSoundID bell;
    AudioServicesCreateSystemSoundID((CFURLRef)[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:pstrFileName ofType:pstrFileType]], &bell);  
    AudioServicesPlaySystemSound (bell);    
} 
```

Call this function in application delegate didfinishlaunchingwithoptions method...

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
{
     ...
     [self playSoundFromFileName:@"yourfile" ofType:@"extension"];

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T11:42:37.853

my personal taste: don't bother your users, and get out of the splash as fast as you can

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T11:46:18.487

How about putting it in you `application didFinishLaunching` but be sure to instantiate it in you .h and .m.

Something like this should do your problem:

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    NSString* resourcePath = [[NSBundle mainBundle] resourcePath];
    resourcePath = [resourcePath stringByAppendingString:@"/YOURMUSICNAME.mp3"];
    NSLog(@"Path to play: %@", resourcePath);
    NSError* err;

    //Initialize our player pointing to the path to our resource
    player = [[AVAudioPlayer alloc] initWithContentsOfURL:
                 [NSURL fileURLWithPath:resourcePath] error:&err];

    if( err ){
        //bail!
        NSLog(@"Failed with reason: %@", [err localizedDescription]);
    }
    else{
        //set our delegate and begin playback
        player.delegate = self;
        [player play];
        player.numberOfLoops = -1;
        player.currentTime = 0;
        player.volume = 1.0;
    }
} 
```

Then if you want to stop it:

```
[player stop]; 
```

or pause it :

```
[player pause]; 
```

and also import it in your header file:

```
#import <AVFoundation/AVFoundation.h> 
```

and add this to your header the **bold** part:

@interface ViewController : UIViewController <**AVAudioPlayerDelegate**>

# php - 当数据来自 csv 时 preg_match 不返回匹配值

> ID：11310091
> 
> 赞同：0
> 
> 时间：2012-07-03T11:36:50.753
> 
> 标签：php, regex, preg-match

现在，当我尝试对 csv 的第一行进行预匹配时，我的站点中有一个 csv 上传，它返回为空。请参阅下面的代码。

```
 $uploaded_file = $upload_dir . $_FILES['my_upload_file']['name'];
 $uploaded_content = file( $uploaded_file, FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES );
 $regx_pattern = '/^(nickname|nick_name|family_name|\"nickname|"family_name)_/'; 
 $first_row = array_shift( $uploaded_content );
 $row_match = preg_match( $regx_pattern , $first_row, $matches );
 var_dump($matches); 
```

结果：

```
array
    empty 
```

但是，如果我`$first_row`通过这样做在我的脚本中声明为静态值：

```
$first_row= 'nickname,nick_name_initial,nick_name_code'; 
```

它将返回一个匹配项。当我从我的 csv 数据中检查它时，为什么它不返回匹配项？有人遇到过这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T11:30:38.810

如果您想忽略非字母数字并且不在字符串开头引用字符，您可以这样做：

```
$regx_pattern = '/^[^\w"]*(nickname|nick_name|family_name|\"nickname|"family_name)_?/';
// $first_row = array_shift( $uploaded_content );
$first_row = 'ï»¿nickname,nick_name_initial,nick_name_code';
$row_match = preg_match( $regx_pattern , $first_row, $matches );
var_dump($matches); 
```

**输出：**

```
array(2) {
  [0]=>
  string(14) "ï»¿nickname"
  [1]=>
  string(8) "nickname"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T13:09:54.500

当您提供您提到的静态值时，它不会返回匹配项。

```
$regx_pattern = '/^(nickname|nick_name|family_name|\"nickname|"family_name)_/'; 
//$first_row = array_shift( $uploaded_content );
$first_row= 'nickname,nick_name_initial,nick_name_code';
$row_match = preg_match( $regx_pattern , $first_row, $matches );
var_dump($matches); 
```

它不起作用，因为在正则表达式中，您希望键后有一个下划线，而在您给定的静态值中，键昵称没有最后一个下划线。您必须将其设为可选，如下所示。

```
$regx_pattern = '/^(nickname|nick_name|family_name|\"nickname|"family_name)(_)?/'; 
//$first_row = array_shift( $uploaded_content );
$first_row= 'nickname,nick_name_initial,nick_name_code';
$row_match = preg_match( $regx_pattern , $first_row, $matches );
var_dump($matches); 
```

或者

您上传的 csv 文件有可能在开头有空格。因为您期望键将从第一个字母本身（^）开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T11:42:45.280

尝试使用

```
$htmlfile = file_get_contents($url);

$html = <<<HTML
echo $htmlfile;
HTML; 
```

因为您读取并保留了文件的内容，但那样无法处理

# ios - 在 iPad 上用手指在 imageview 上绘制矩形后，如何将图像保存在 photolibrary 中？

> ID：11310093
> 
> 赞同：0
> 
> 时间：2012-07-03T11:36:58.103
> 
> 标签：ios, ipad, cgcontext, photolibrary

在我的应用程序中，我用手指在图像视图上绘制了一个矩形。使用该`drawRect`方法创建矩形并添加到该图像视图上。

现在我的问题是我必须将该图像与这些矩形一起存储在照片库中。就像在 imageview 上有矩形的图像。

谁能帮我找到如何做到这一点？

这是我的`drawRect`方法代码：

```
-(void)drawRect:(CGRect)rect 
{
    CGContextRef contextRef = UIGraphicsGetCurrentContext();
    CGContextSetLineWidth(contextRef, 5.0);
    CGContextSetRGBStrokeColor(contextRef, 255.0, 1.0, 0.0, 1.0);
    CGContextSetStrokeColorWithColor(contextRef,[UIColor redColor].CGColor);

    // Draw the border along the view edge.
    CGContextStrokeRect(contextRef, rect); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:01:47.267

方法参数`view`是添加图像和绘图的视图。调用此方法将返回一个 UIImage。

```
-(UIImage*)convertViewToImage:(UIView*)view
{ 
UIGraphicsBeginImageContext(view.bounds.size);
[view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

CGImageRef imageRef = CGImageCreateWithImageInRect([viewImage CGImage], CGRectMake(0, 0, view.frame.size.width, view.frame.size.height));
UIImage *targetImage = [UIImage imageWithCGImage:imageRef];
CGImageRelease(imageRef);

return targetImage;
} 
```

# vb.net - 如何使用 VB.net 调用事件和方法？

> ID：11310101
> 
> 赞同：-1
> 
> 时间：2012-07-03T11:37:29.240
> 
> 标签：vb.net, events, logging, listbox

我有一个 Vb.net 应用程序。其中包含一个列表框。

我想从另一个类使用事件在这个列表框中添加消息。

基本上我正在尝试创建状态记录器，所以我可以记录步骤并显示到列表框中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:00:17.073

创建一个定义了事件的新类

```
Public Class EventTest
    Public Event StatusChanged(ByVal status As String)

    Private _status As String = ""

    Public Property Status As String
        Get
            Return _status
        End Get
        Set(value As String)
            _status = value
            'raise the status changed event when the status property is changed
            RaiseEvent StatusChanged(value)
        End Set
    End Property
End Class 
```

现在，在您的表单中创建此类的一个实例（注意`withevents`关键字）：

```
Dim WithEvents Foo As New EventTest

'Handle the status change event
Private Sub Foo_StatusChanged(status As String) Handles Foo.StatusChanged
    lstStatus.items.add(status)
End Sub 
```

现在更改状态并看到它出现在列表框中：

```
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    Foo.Status = "Initialised"
End Sub 
```

# php - Facebook PHP SDK - 用户应用安装后没有 app_data

> ID：11310102
> 
> 赞同：1
> 
> 时间：2012-07-03T11:37:34.847
> 
> 标签：php, facebook-php-sdk

我在`app_data`使用新应用安装重定向后传递时遇到问题`Facebook PHP SDK`

```
$loginUrl = $facebook->getLoginUrl( array( 'scope' => 'email,manage_pages', 'redirect_uri' => $fbconfig['appPageUrl'], ) );

$decodedSignedRequest = parse_signed_request($_REQUEST['signed_request'], $fbconfig['secret']); 

if (isset($decodedSignedRequest['app_data'])){
    echo $app_data=$decodedSignedRequest['app_data'];
    header("Location: success.php?id=$app_data");
    die();
} 
```

如果安装了该应用程序，我可以`app_data`毫无问题`signed_request`地获得。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:46:35.533

您的 Location 标头是*错误*的，因为它根据定义需要一个*绝对*URL。

如果您附加一个查询字符串 ?id=1234，那么您可以通过脚本中的 $_GET['id'] 访问该值。

# java - 在java中检查大写锁定是否打开的方法

> ID：11310103
> 
> 赞同：7
> 
> 时间：2012-07-03T11:37:42.577
> 
> 标签：java, swing, methods, keyboard

> **可能重复：**
> [如何检测是否在 Swing 中切换了大写锁定？](https://stackoverflow.com/questions/88434/how-can-i-detect-if-caps-lock-is-toggled-in-swing)

如何检测（知道的方法）大写锁定是否在 java 应用程序中打开，因为我想在用户在我的应用程序中输入密码时看到用户。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T11:40:42.280

```
 boolean state= Toolkit.getDefaultToolkit()
                        .getLockingKeyState(KeyEvent.VK_CAPS_LOCK); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T11:41:21.000

```
boolean capsIsOn = Toolkit.getDefaultToolkit().
                  getLockingKeyState(KeyEvent.VK_CAPS_LOCK); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T11:40:05.840

`Toolkit.getDefaultToolkit().getLockingKeyState(KeyEvent.VK_CAPS_LOCK);`

相关：[我怎样才能获得 Caps Lock 状态，并将其设置为 on，如果它还没有？](https://stackoverflow.com/questions/7435221/how-can-i-get-the-caps-lock-state-and-set-it-to-on-if-it-isnt-already)

请在询问之前使用谷歌;)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T11:48:43.703

```
boolean isCapsLock = 
        Toolkit.getDefaultToolkit().getLockingKeyState(KeyEvent.VK_CAPS_LOCK); 
```

# mysql - 不使用upper或lower函数的sql不区分大小写查询

> ID：11310107
> 
> 赞同：3
> 
> 时间：2012-07-03T11:38:18.913
> 
> 标签：mysql, sql, oracle

我有以下查询，

```
select * from process where name like 'abc'; 
```

现在名称可以是 abc 或 ABC 或 Abc 或 aBc ，任意组合，

我不能使用上层和下层函数，因为这个查询被传递到另一个不支持这些函数的系统，

此外，不支持整理，即我不能做，例如。

```
select * from process where name like 'abc' COLLATE SQL_Latin1_General_CP1_CI_AS 
```

有没有办法在不使用上下函数的情况下使这个查询不区分大小写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:40:02.617

如果我们不能使用：

1.  下或上
2.  评估不区分大小写的整理

可能结合所有结果：

```
select * from process where name in ('abc', 'aBc', 'ABc', 'aBC', 'abC', 'AbC', 'aBC', 'ABC') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-28T15:00:15.357

这应该工作：

```
select * from process where name rlike '[aA][bB][cC]' 
```

# javascript - 使用 JQUERY 绑定嵌套 JSON 并重新填充其他控件

> ID：11310109
> 
> 赞同：0
> 
> 时间：2012-07-03T11:38:39.193
> 
> 标签：javascript, jquery, asp.net, json, nested

我在 datalist 中有一个下拉列表，这里我使用 jquery 将下拉列表与 JSON 绑定（结构如下所示）

**JSON 格式的字符串：**

```
var hints = [{"term_id":2, [{"imagename": demoimg.png}]}]; 
```

在我正在绑定的下拉列表中`term_id`，如果我选择了，那么我`term_id (2)`如何`imageName`在图像控件中绑定（它在外部`datalist`），基于它的选择，使用相同的 JSON 字符串。

# c - 找不到配置文件 /etc/startup.mk

> ID：11310112
> 
> 赞同：0
> 
> 时间：2012-07-03T11:38:54.177
> 
> 标签：c, windows, eclipse, makefile, eclipse-cdt

我想使用 Eclipse (Juno) CDT 开发一个用于学习目的的简单 C 应用程序。

为此，我创建了 IDE 中提供的示例项目，该项目创建了一个简单的 Hello World 可执行文件。

但是当我想构建项目时，会出现以下错误：

```
make: all
make: Error -- Could not find configuration file /etc/startup.mk 
```

这是什么意思？我在系统的任何地方都找不到像这样命名的文件。奇怪的是，它可以在我的 OS X 上完美地使用相同的设置。只是不在我的 Windows 机器上。

这里出了什么问题？

编辑：`make -V`显示以下输出：

```
D:\>make -V
make - Version 7.0 build 1182

Built-in Rules (cannot be changed):
        OS:=NT
        .IMPORT .IGNORE : ROOTDIR
        .MAKEFILES:makefile
        .SOURCE : .NULL
        @B = $(@:b)
        @D = $(@:d)
        @F = $(@:f)
        %B = $(%:b)
        %D = $(%:d)
        %F = $(%:f)
        *B = $(*:b)
        *D = $(*:d)
        *F = $(*:f)
        <B = $(<:b)
        <D = $(<:d)
        <F = $(<:f)
        ?B = $(?:b)
        ?F = $(?:f)
        ?D = $(?:d)
System Configuration:
        SWITCHAR = /
        OSVERSION = 01
        OSRELEASE = 5
        DIRSEPSTR = /\:
        SHELL = /mksnt/sh.exe
        SHELLFLAGS = /c
        SHELLMETAS =
        GROUPSHELL = /mksnt/sh.exe
        GROUPFLAGS =
        GROUPSUFFIX =
        MAKEDIR = D:/
        PWD = D:/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:28:40.740

您路径中的`make`可执行文件不是`eclipse`预期和需要的 GNU make。它可能是一些其他产品附带的工具——`make`是一个很常见的名称。如果您的窗户不是太旧，您可以尝试`where make`找到罪魁祸首并将其从您的路径中删除。完成此操作后，如果您使用工具链的标准安装，eclipse 将能够自行生成 GNU，或者您可以将其添加到您的路径中。或者，您可以自定义 eclipse 构建设置并将其明确指向`make`您要使用的。

`make`您想要的可能位于 中，`C:\MinGW\msys\1.0\bin`但可能位于其他位置，具体取决于您安装工具链的方式。还有一个--`mingw32-make`都`C:\MinGW\bin`假设您使用的是MinGW

# jquery - jQuery 功能后 UpdatePanel 停止工作？如何克服这一点？

> ID：11310114
> 
> 赞同：-2
> 
> 时间：2012-07-03T11:39:00.293
> 
> 标签：jquery, asp.net, sql, jquery-validate

在我的网页中包含五个下拉列表，保存在单独的更新面板中。由于 j 查询功能，它已停止工作。如何解决这个问题？谁能指导我

```
<asp:Script Manager ID="smShop" run at="server" />
<asp:Update Panel class="designer" ID="up Mall"run at="server">
    <Content Template>
       <asp:Drop Down List run at="server" ID="ddlListMall" OnSelectedIndex Changed="ddl ListMall_SelectedIndexChanged" AutoPostBack="true" CssClass="designer">
       </asp:Drop Down List>
     </Content Template> 
     <Triggers>
        <asp:AsyncPostBack Trigger ControlID="ddlListMall" EventName="SelectedIndexChanged" />
     </Triggers>
</asp:Update Panel> 
```

这是jQuery函数：

```
function MallSelect(){
  $('.selectField select').each(function (i){ 
        $(this).attr('id', 'slctOptID' + i); }); 
        $('.selectField select').change(function () 
         {
                 var slctID = $(this).attr('id'); 
                 optvalue = $('#' + slctID + ' option:selected').attr('value'); 
                 $("#" + slctID + " option:selected").each(function () 
                 {
                    if (optvalue == "others") 
                    {
                       $("#" + slctID).parent().parent().next('.otherField').fadeIn();
                    } 
                    else 
                    { 
                        $("#" + slctID).parent().parent().next('.otherField').hide();
                    }
                }
              )
         }); 
```

如果我单击列表项`value="Others"`，它将转到 j 查询功能。

由于此更新面板，它不会进入该功能。

如果删除更新面板意味着它显示该功能。但我想要两个功能怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:24:54.823

您必须使用 Sys.WebForms.PageRequestManager.getInstance().add_endRequest(functionName);

代码示例是

```
<body onload="load()"> 
```

然后

```
function load() {

    Sys.WebForms.PageRequestManager.getInstance().add_endRequest(functionName);

} 
```

然后您将能够找到解决方案

# objective-c - UITableView 单元格的高度

> ID：11310115
> 
> 赞同：-3
> 
> 时间：2012-07-03T11:39:12.757
> 
> 标签：objective-c, uitableview, ios5

我有一个简单的问题，无法解决。我的应用程序中有一个`UITableView`。有 3 个部分，每个部分有 3 行。

我想增加第一部分的第一个单元格的高度。我为此使用了委托，但它增加了第三部分第一个单元格的高度。

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{    
    if (indexPath.row == 0 && sectionValue==0)
    {         
        节值=1；
        返回 180.0；        
    }
    别的
    {
        返回 44.0；        
    }   
}

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T11:40:44.373

您可以直接使用`indexPath.section`-

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
{

    if (indexPath.row == 0 && indexPath.section==0) 
    {  
        return 180.0;

    }
    else
    {
        return 44.0;

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:42:54.543

试试这个......

```
 indexPath.section 
```

# silverlight - 在 Silverlight 中绑定到组合框

> ID：11310116
> 
> 赞同：0
> 
> 时间：2012-07-03T11:39:16.843
> 
> 标签：silverlight

我有一个组合框，其中包含 Country 对象的集合作为它的源（它绑定到视图模型中的 Country 属性）。

Country 组合显示在用户表单的一部分上。用户表单由用户对象填充。一个用户对象只拥有一个 CountryID（即 Country 的外键）。我目前通过将名称文本框绑定到我的用户对象中的名称属性等来填充我的用户表单。但是，当我来到 Country 组合绑定时，我真的被卡住了。

我对 Combo 的绑定是：

```
ItemsSource="{Binding Countries}" DisplayMemberPath="CountryDescription" 
```

那么对于当前加载的用户，我需要获取他们的 Country ID 并将其绑定到 Country 组合吗？我该怎么做，因为国家组合没有整数列表，而是国家对象列表。我虽然关于使用转换器，但这似乎有点矫枉过正，因为该组合在其源中有一个国家对象以及我想要的相应 CountryID。

那么有没有办法让用户 CountryID 属性绑定到 Country 组合并让 Country 组合到友好的用户名？我需要两种方式绑定，因为用户需要能够选择不同的国家，然后应该更新用户对象中相应的 countryID 属性。

非常感谢任何帮助！干杯...

编辑

这是我所拥有的精简版（为了清楚起见，我省略了所有 notifypropertychanged 代码）

```
class User
{
    public int UserID 
    {
        get;set;
    }

    public string Username
    {
        get;set;
    }

    public int CountryID
    {
        get;set;
    }
}

class Country
{
    public int CountryID
    {
        get;set;
    }

    public string CountryDescription
    {
        get;set;
    }
} 
```

我的视图模型有一个 Country 属性，它只是 Country 对象的列表（如上所示的绑定）。该视图有一个用户名文本框和一个显示国家描述的组合框。我的视图模型有一个“用户”属性供视图绑定。用户名的绑定是：

```
<TextBox x:Name="NameBox" Text=" {Binding User.Username, Mode=TwoWay}"   
DataContext="{Binding}" /> 
```

我遇到的问题是国家组合的选定项目的绑定。假设我在组合中有 2 个国家/地区对象，如下所示：

CountryID = 1, CountryDescription = "法国" CountryID = 2, CountryDescription = "西班牙"

用户设置为：

用户 ID = 1，用户名 =“鲍勃”，国家 ID = 1。

该组合需要显示“法国”。但是如果用户将 France 更改为 Spain，则用户的 CountryID 需要更改为 2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:08:13.533

基本上你需要一个 ValueMemberPath **，它确实存在于组合框上**，*大概是因为他们认为不需要它*。

相反，组合框中的每个项目都绑定到 Country 项目，因此您真正需要的是一个将`Country`对象转换为 ID 号/int 的值转换器（如果您需要两种方式，则再次返回，否则下面的代码将完成这项工作） .

例如：

```
public class CountryConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        Country country = (Country)value;
        return country.CountryId;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        /// Not sure yet the best way to get the correct Country object instance, unless you can attach it to the convertor, pass it as a ConvertorParameter or just make it global. :)
    }
} 
```

双向的问题在于，要将数字转换回 Country 对象的正确实例，您需要访问控件使用的 Country 对象的实际列表。

无论如何：然后您只需将 ComboBox 的 SelectedItem 绑定到 User.CountryID 属性（当然也指定转换器）。

```
<TextBox x:Name="NameBox" SelectedItem={Binding User.CountryID, Convertor={StaticResource CountryConverter}} Text="{Binding User.Username, Mode=TwoWay}" DataContext="{Binding}" /> 
```

并在页面资源中声明转换器，例如：

```
<UserControl.Resources>
  <local:CountryConverter x:Key="CountryConverter" />
</UserControl.Resources> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:18:30.527

```
private Country _SelectedCountry;
public Country SelectedCountry
{
    get
    {
        return _SelectedCountry;
    }

    set
    {
        if(value != null && value != _SelectedCountry)
        { 
            if(User.CountryID != value.CountryID) 
                User.CountryID = value.CountryID;
            _SelectedCountry = value;
        }
    }
} 
```

不要忘记在所有需要的地方放置 RaisePropertyChanged。如果您对此有任何理解问题，请告诉我。

# html - 如何在特定点旋转元素？

> ID：11310118
> 
> 赞同：0
> 
> 时间：2012-07-03T11:39:20.400
> 
> 标签：html, animation, css

请问我有两个问题。

1 - 我怎样才能像现实生活中一样正常转动左手，而不是像您在演示中看到的那样？

2 - 如何使框架居中（高度）？

多谢

我有这个 [演示 JSFiddle](http://jsfiddle.net/centerwow/hfuGx/37/show/)

我的代码：

```
 #screen {
    background: #6633CC; 
    border:1px solid #eee;
    height:600px;
    width:800px;
    top:0px;
    left:0px;
    margin:0;
    overflow:hidden;
    padding:0;
    position:relative;
}
#warp{
    margin:30px auto;
    border-style:solid;
    border-width:5px;
    border-color:#98bf21;
    width:420px;
    height:370px;
    }

#man{
    background: #6666CC;
    margin:0;
    float:left;
    border-style:solid;
    border-width:5px;
    border-color:#98bf21;
    width:200px;
    height:363px;
}
#manS{
    background: #6666AA;
    margin:0;
    float:right;
    border-style:solid;
    border-width:5px;
    border-color:#98bf21;
    width:200px;
    height:363px;
}
#Head{
    position: relative;
    left:30px;
}

#Body{
    position: relative;
    left:18px;
    top:-5px;
}
#Left_Hand{
    position: relative;
    left:12px;
    top:-125px;
}
#Right_Leg{
    position: relative;
    left:60px;
    top:-100px;
}
#Right_Hand{
    position: relative;
    left:97px;
    top:-393px;
}
#Left_Leg{
    position: relative;
    left:5px;
    top:-375px;
}

@-webkit-keyframes move_Head{
0%{-webkit-transform: translate(0px,0px) rotate(5deg) skew(0deg, 0deg) scale(1, 1);}
25%{-webkit-transform:translate(0px,320px) rotate(-5deg) skew(0deg, 0deg)scale(1,2);}
50%{-webkit-transform:translate(150px,320px) rotate(5deg) skew(0deg, 0deg)scale(2,1);}
75%{-webkit-transform:translate(150px,0px) rotate(-5deg) skew(0deg, 0deg)scale(1,2);}
100%{-webkit-transform:translate(0px,0px) rotate(0deg) skew(0deg, 0deg)scale(2,1);}
}
@-webkit-keyframes move_Body{
0%{-webkit-transform: translate(0px,0px) rotate(0deg) skew(5deg, 0deg) scale(1, 1);}
25%{-webkit-transform:translate(0px,100px) rotate(0deg) skew(-5deg, 0deg)scale(1,2);}
50%{-webkit-transform:translate(0px,0px) rotate(0deg) skew(0deg, -5deg)scale(2,1);}
75%{-webkit-transform:translate(0px,150px) rotate(0deg) skew(0deg, 5deg)scale(1,2);}
100%{-webkit-transform:translate(0px,0px) rotate(0deg) skew(0deg, 0deg)scale(2,1);}
}
@-webkit-keyframes move_Right_Leg{
0%{-webkit-transform: translate(0px,0px) rotate(0deg) skew(0deg, 0deg) scale(1, 1);}
12%{-webkit-transform:translate(0px,0px) rotate(40deg) skew(0deg, 0deg)scale(1,1);}
24%{-webkit-transform:translate(0px,0px) rotate(80deg) skew(0deg, 0deg)scale(1,1);}
36%{-webkit-transform:translate(0px,0px) rotate(120deg) skew(0deg, 0deg)scale(1,1);}
48%{-webkit-transform:translate(0px,0px) rotate(160deg) skew(0deg, 0deg)scale(1,1);}
60%{-webkit-transform:translate(0px,0px) rotate(200deg) skew(0deg, 0deg)scale(1,1);}
72%{-webkit-transform:translate(0px,0px) rotate(240deg) skew(0deg, 0deg)scale(1,1);}
84%{-webkit-transform:translate(0px,0px) rotate(280deg) skew(0deg, 0deg)scale(1,1);}
96%{-webkit-transform:translate(0px,0px) rotate(320deg) skew(0deg, 0deg)scale(1,1);}
100%{-webkit-transform:translate(0px,0px) rotate(360deg) skew(0deg, 0deg)scale(1,1);}
}

#animation-011
{
    -webkit-animation-name:move_Head;
    -webkit-animation-duration:5s;
    -webkit-animation-iteration-count:1;
    -webkit-animation-timing-function:linear;
    -webkit-animation-delay:0s;
}
#animation-022
{
    -webkit-animation-name:move_Body;
    -webkit-animation-duration:5s;
    -webkit-animation-iteration-count:1;
    -webkit-animation-timing-function:linear;
    -webkit-animation-delay:0s;
}
#animation-03
{
    -webkit-animation-name:move_Right_Leg;
    -webkit-animation-duration:10s;
    -webkit-animation-iteration-count:1;
    -webkit-animation-timing-function:linear;
    -webkit-animation-delay:0s;
}

  <div id="screen">
    <div id="warp">
        <div id="man">
            <div id="animation-01">
                        <img id="Head"src="head.png" />            
            </div><!-- END animation-01-->
            <div id="animation-02">
                        <img id="Body"src="Body.png" />            
            </div><!-- END animation-02-->
            <div id="animation-03">
                        <img id="Left_Hand"src="Left_Hand.png" />            
            </div><!-- END animation-03-->
            <div id="animation-04">
                        <img id="Right_Leg"src="Left_Leg.png" />            
            </div><!-- END animation-04-->
            <div id="animation-05">
                        <img id="Right_Hand"src="Right_Hand.png" />            
            </div><!-- END animation-05-->
            <div id="animation-06">
                        <img id="Left_Leg"src="Right_Leg.png" />            
            </div><!-- END animation-06-->
        </div><!-- END MEN -->
        <div id="manS">
            <img id="ManStick"src="manStick.PNG" />
        </div><!-- END menS --> 
    </div><!-- END warp -->     
</div><!-- end TSCREEN --> 
```

# asp.net-web-api - 是否可以从消息处理程序访问控制器/操作属性？

> ID：11310119
> 
> 赞同：6
> 
> 时间：2012-07-03T11:39:32.873
> 
> 标签：asp.net-web-api, thinktecture-ident-model

是否有一种实用的方法可以从消息处理程序/委托处理程序访问装饰控制器或操作的属性？

从[Pedro Felix 博客条目](http://pfelix.wordpress.com/2012/03/05/asp-net-web-api-in-memory-hosting/)[的图表](http://pfelix.files.wordpress.com/2012/03/memoryhosting_thumb.png?w=421&h=403)中，看起来消息处理程序在管道中为时过早，并且在控制器调度程序消息处理程序运行之前信息将不可用。正确的？

*关于我的用例：*
我正在使用 Thinktecture 身份模型，能够`AllowAnonymous`在`AuthenticationHandler`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:05:56.543

从本质上讲，这似乎是实施它的错误地方。正如您所指出的，消息处理程序适用于所有请求和响应。如果你依赖一个属性，这自然是一个过滤器。所以我建议你走这条路。

事实上，在处理程序中，您不能假设有一个 ApiController 或一个动作。处理程序可以同样用于客户端。

# objective-c - Objective-C 协议属性编译器警告

> ID：11310121
> 
> 赞同：0
> 
> 时间：2012-07-03T11:39:41.353
> 
> 标签：objective-c, protocols

当我在协议中定义属性时，我无法摆脱编译器警告。奇怪的是我定义了两个属性，而我只收到第二个属性的警告（它是对象类型，而第一个属性是值类型）。

这是屏幕截图：

[![编译器警告](../Images/b6dc3e81b7e57854d7263a89b50a38a9.png)](https://i.stack.imgur.com/gXTcA.jpg)

谁能告诉我如何摆脱这个警告，为什么会产生它？代码工作正常，只是这个警告让我很恼火:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:47:51.980

在您的程序中，该属性称为`view`. 必须有一个调用的 getter`view`和一个调用的 setter `setView`。如果你不使用`@synthesize`你必须提供这两个方法，这就是编译器警告的原因。代码工作正常，因为您没有使用点表示法引用属性或调用 getter 和 setter 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:56:56.713

您的问题是编译器找不到您在协议中定义的属性的实现。

出于这个原因，不建议将属性添加到协议中，相反，您只需定义一个简单的方法来访问该属性，然后再定义一个方法来设置它。这将为您提供正确的错误消息，并且虽然您不能使用点表示法，但它会将警告保留在正确的位置。

或者，您可以执行以下操作（不推荐，但出于教育原因）：

```
#import <objc/runtime.h>

@protocol myProto

@property (assign) int myProperty;

@end

@implementation NSObject(myProto)

-(int) myProperty
{
    return [objc_getAssociatedObject(self, "myProperty") intValue];
}

-(void) setMyProperty:(int) myProperty
{
    objc_setAssociatedObject(self, "myProperty", [NSNumber numberWithInt:myProperty], OBJC_ASSOCIATION_RETAIN);
}

@end

@interface MyObj : NSObject<myProto> 

@end

@implementation MyObj

@dynamic myProperty;

@end

int main(int argc, char *argv[])
{
    @autoreleasepool
    {
        MyObj *myObj = [MyObj new];

        myObj.myProperty = 10;

        NSLog(@"%i", myObj.myProperty);
    }
} 
```

# android - 如何保护 APK 文件以防止其被反编译

> ID：11310124
> 
> 赞同：0
> 
> 时间：2012-07-03T11:39:53.723
> 
> 标签：android, proguard, apk

我有一个 Android 项目，我想保护 APK 文件，因为我发现它很容易反编译。经过一番研究，我找到了 ProGuard，但我不知道如何使用它来保护我的应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T11:42:55.903

how about trying ProGuard yourself? a really good explanation could be found over here: [http://proguard.sourceforge.net/index.html#manual/index.html](http://proguard.sourceforge.net/index.html#manual/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-10T19:02:18.133

*   我使用的是[quixxi](https://quixxi.com/)，它比 Proguard 更简单、更高效。
*   您也可以尝试[whitecryption](https://www.intertrust.com/products/application-security/)，但没有经验。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-23T00:19:05.203

再见，

从技术上讲，您不会保护文件免受反编译，但您只会让您更难理解反编译的代码/逻辑

1）第一个可以立即增加阅读反编译代码难度的工具是ProGuard，您可以在Android Studio中[直接激活](https://medium.com/@maheshwar.ligade/enabling-proguard-for-android-98e2b19e90a4)
2）ProGuard免费提供混淆，超级好，但不一定足以保证正确的水平安全。查看[此链接](https://stackoverflow.com/a/50771792/4092588)以了解示例代码的代码可读性的实际差异[原始代码，仅proguard后的代码和专业工具后的代码] 3）[这里](https://stackoverflow.com/a/39990443/8866430)
描述了一些其他好的提示. 特别是如果所需的安全级别非常严格 [金融科技、医疗保健等]，我强烈建议您考虑付费解决方案，例如 DexGuard、Quixxi、Arxan 等等。它们的优点是它们可以自动化大多数最佳实践，让您只负责关注功能[即不考虑安全实践]。这意味着更快、更安全的交付

祝你有美好的一天！

# perl - 在 Perl 中，如何将 img 标签的 src 属性中的相对 URL 替换为绝对 URL？

> ID：11310126
> 
> 赞同：0
> 
> 时间：2012-07-03T11:39:55.853
> 
> 标签：perl, html-parsing

我想查找和替换（从 html 页面）标签`src`中所有出现的属性。`img`例如，采取

```
<img width="25" height="13" border="0" src="/images/flags/de.png"> 
```

并更改`src`属性

我目前正在使用：

```
$info{content}=~s!(<img[^>]src=")(/.*)"!$http://$dest$2!gi; 
```

`$dest`我想放的网址在哪里。

我的问题是它找到了第一次出现而不是随后出现的。

该`/g`选项不应该替换所有事件吗？

我确信正则表达式适用于下一次出现，因为如果我再次添加我的代码行，下一次出现就会被替换。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T11:53:48.007

您希望将 URI 解析为绝对 URI。使用强大的 HTML 解析器：

```
use strictures;
use URI qw();
use Web::Query qw();

my $dest = 'http://example.com/blah/';
my $html = '<img width="25" height="13" border="0" src="/images/flags/de.png">';

my $w = Web::Query->new_from_html($html);
$w->find('img[src]')->each(sub {
    my (undef, $i) = @_;
    $i->attr('src', URI->new_abs($i->attr('src'), $dest));
});
print $w->html; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T11:42:52.077

使用适当的解析器，例如[HTML::TokeParser::Simple](http://search.cpan.org/perldoc/HTML%3a%3aTokeParser%3a%3aSimple)：

```
#!/usr/bin/env perl

use strict; use warnings;
use HTML::TokeParser::Simple;

my $parser = HTML::TokeParser::Simple->new( ... );

while (my $token = $parser->get_token) {
    if ($token->is_start_tag('img')) {
        if (defined(my $src = $token->get_attr('src'))) {
            $token->set_attr(src => "$dest/$src");
        }
    }
    print $token->as_is;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T11:52:04.027

您的尝试没有奏效，因为`.*`模式中间的贪婪匹配了 first和 last之间的*所有内容*。`src=``"`

让它不贪婪`.*?`会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T12:34:41.513

```
my $dest = 'http://example.com/blah/';
my $html = '<img width="25" height="13" border="0" src="/images/flags/de.png">';
$html =~ s!(?<=src=")(?=/)!$dest!;
print $html; 
```

# javascript - 如何为 FB 单点登录生成访问令牌？

> ID：11310127
> 
> 赞同：-1
> 
> 时间：2012-07-03T11:39:59.660
> 
> 标签：javascript, facebook

我在 Web 应用程序中使用 javascript 并尝试实现 Facebook 单点登录。我如何准确生成访问令牌？我使用 : `var accessToken = response.authResponse.accessToken;`，但每次不同的用户登录时，它都会提供相同的访问令牌..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:07:32.443

您需要通过 oauth 授权过程发送最终用户，最终您将获得要使用的访问令牌。

请参阅： [https](https://developers.facebook.com/docs/authentication/) ://developers.facebook.com/docs/authentication/ https://developers.facebook.com/blog/post/525/

# objective-c - OpenGL多纹理遮罩

> ID：11310135
> 
> 赞同：0
> 
> 时间：2012-07-03T11:40:16.930
> 
> 标签：objective-c, xcode, cocoa, opengl, alphablending

[我在这个问题](https://stackoverflow.com/a/5098999/1428622)中使用了@Stefan Monov 教程。一切正常，但我需要用我的画笔让它工作。我需要这样做：

```
// Next, we want a blendfunc that doesn't change the color of any pixels,
// but rather replaces the framebuffer alpha values with values based
// on the whiteness of the mask. In other words, if a pixel is white in the mask,
// then the corresponding framebuffer pixel's alpha will be set to 1.
glBlendFuncSeparate(GL_ZERO, GL_ONE, GL_SRC_COLOR, GL_ZERO);
// Now "draw" the mask (again, this doesn't produce a visible result, it just
// changes the alpha values in the framebuffer)
drawQuad(maskTexture); 
```

将不是静态纹理，而是动态形状。我的意思是，我正在尝试实现刷子女巫正在做这样的事情，这是由@Stefan Monov 编写的。所以我需要这个地方可以在其他 - (void) 函数中实现，以便在坐标变化时（当用户绘制时）可以调用它。我尝试了多种方法来更改代码的顺序，但它无法正常工作。现在我的 bursh 代码是：

```
glEnable(GL_BLEND);
glBlendFuncSeparate(GL_ZERO, GL_ONE, GL_SRC_COLOR, GL_ZERO);
glPointSize(100);
glBegin(GL_POINTS);
glColorMask(1.0,1.0,1.0, 1.0);
glVertex2f(loc.x, loc.y);
glEnd();
glDisable(GL_BLEND); 
```

鼠标拖动时调用。“loc”是被拖动的鼠标坐标。当然，由于 blendFunc 和代码的顺序，它现在根本不工作。当我按照@Stefan Monov 描述的那样离开序列时，它可以工作，但是它会绘制一个点并在拖动鼠标时拖动它。因为在绘制点之后，其他纹理也在重新绘制。有什么，至少是类似的解决方案吗？

* * *

为了更清楚，我将展示我希望我的应用程序如何工作。

这是原始代码：

```
glEnable(GL_BLEND);
glBlendFunc(GL_ONE, GL_ZERO);
drawQuad(backgroundTexture);

glBlendFuncSeparate(GL_ZERO, GL_ONE, GL_SRC_COLOR, GL_ZERO);
drawQuad(maskTexture);

glBlendFunc(GL_DST_ALPHA, GL_ONE_MINUS_DST_ALPHA);
drawQuad(foregroundTexture); 
```

现在它的工作方式如下：

1.  绘制背景
2.  绘制蒙版
3.  绘制前景

我需要它像这样工作：

1.  绘制免费
2.  绘制前景
3.  绘制蒙版

但是，如果我更改图纸的顺序，它就会停止工作。忽略面具。

预期结果照片： ![在此处输入图像描述](../Images/04d70c9084e346fb7db126088f60116e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:11:45.393

你最后画面具的尝试真的没有意义。

绘制蒙版只会修改 Alpha 通道中的内容，并且 Alpha 通道本身在最终图像中不可见。

蒙版的唯一用途是修改在它之后绘制的内容。

# google-apps-script - 从 gmail 中的联系人或收件箱获取 IP 地址

> ID：11310136
> 
> 赞同：0
> 
> 时间：2012-07-03T11:40:26.840
> 
> 标签：google-apps-script

谷歌应用脚​​本。

如何获取电子邮件发件人或 gmail 联系人中的联系人的 ip。我可以从收件箱中导入群组或邮件线程中的联系方式。我可以通过应用程序脚本代码示例获取发件人的 IP 地址吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T11:57:04.630

你根本不能这样做......此外，联系人的IP地址在现实世界中是不存在的，用户使用的IP取决于联系人的位置不是吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-19T14:28:17.040

这会从收件箱中的第一个电子邮件线程获取原始 IP：

```
 var thread = GmailApp.getInboxThreads(0,1)[0]; // get first thread in inbox
  var message = thread.getMessages()[0]; // get first message
  var rawMessage = message.getRawContent();
  var lines = rawMessage.split('\n');
  for each(line in lines){
    if(line.substring(0,'X-Originating-IP'.length)=='X-Originating-IP'){
      Logger.log(line);
    }
  } 
```

# mysql - 带内连接的 SQL 更新查询：更改以提高执行时间

> ID：11310137
> 
> 赞同：0
> 
> 时间：2012-07-03T11:40:36.337
> 
> 标签：mysql, sql-update

我有这个查询，由于记录的数量，需要几个小时，我想知道是否有办法改进它：

```
update tableA target
inner join
    ( select b.columnZero, b.columnOne, b.columnTwo from tableB b
      inner join tableA a ON b.columnZero = a.columnZero
    ) as source
    on target.columnZero = source.columnZero
set
    target.columnOne = source.columnOne,
    target.columnTwo = source.columnTwo; 
```

**编辑：** `columnZero`是主键，`tableB`但不是`tableA`. 在`tableA`我有一个与上述列不同的主键。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:08:05.853

在我看来，您正在执行两次相同的连接（否则我不明白您的查询）。关于什么：

```
update tableA a
inner join tableB b on a.columnZero = b.columnZero
set
    a.columnOne = b.columnOne,
    a.columnTwo = b.columnTwo; 
```

# gwt - 客户端之间的gwt连接

> ID：11310144
> 
> 赞同：0
> 
> 时间：2012-07-03T11:40:55.683
> 
> 标签：gwt, connection, client

我对 gwt 开发非常陌生，我想知道是否可以从另一个客户更改客户信息。我想做以下事情；人 A 将一辆新车添加到列表中，此修改也应自动添加到另一个客户端（网站）。gwt可以吗？现在，我只是想使用带有 SQL 数据库的解决方案。有没有办法连接两个网站？迎接

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:21:30.797

没有办法直接从客户端到客户端。
您必须通过后端（不一定是 SQL Server）来实现它。
客户端 A 将修改/数据发送到后端。

为了让客户端 B 看到更新，您可以依赖两种不同的技术：

1.  通过定时器轮询拉取（易于实现）
2.  通过 Websockets 或 Comet 推送（查看[氛围](https://github.com/Atmosphere/atmosphere)项目）
3.  通过基于事件的服务推送（查看[gwteventservice](http://code.google.com/p/gwteventservice/)项目）

# iphone - iphone中侧tableview中的Textview覆盖

> ID：11310145
> 
> 赞同：0
> 
> 时间：2012-07-03T11:41:03.497
> 
> 标签：iphone, objective-c, ios

我正在使用以下代码在表格视图中显示一些标签和文本视图。但问题是一些文本视图在滚动时在一些不需要的地方覆盖。请帮我 。提前致谢

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }
    cell.selectionStyle                                         =   UITableViewCellSelectionStyleNone;
    cell.backgroundColor=[UIColor whiteColor];
    if (indexPath.row==0) 
    {
        UILabel *Sender = [[UILabel alloc] initWithFrame:CGRectMake(20, 10, 200, 20)];
        Sender.text=@"From Time";
        Sender.textColor=[UIColor colorWithRed:77.0/255.0 green:104.0/255.0 blue:159.0/255.0 alpha:1.0]; 
        Sender.font=[UIFont fontWithName:@"verdana" size:16];
        [cell addSubview:Sender];
        [Sender release];  

    }

    if (indexPath.row==1) 
    {
        UILabel *Sender = [[UILabel alloc] initWithFrame:CGRectMake(20, 10, 200, 20)];
        Sender.text=@"Sender";
        Sender.textColor=[UIColor colorWithRed:77.0/255.0 green:104.0/255.0 blue:159.0/255.0 alpha:1.0]; 
        Sender.font=[UIFont fontWithName:@"verdana" size:16];
        [cell addSubview:Sender];
        [Sender release];  
        UILabel *Label = [[UILabel alloc] initWithFrame:CGRectMake(30, 35, 200, 20)];
        Label.text=@"Achuthananthan";
        Label.font=[UIFont fontWithName:@"verdana" size:14];
        [cell addSubview:Label];
        [Label release]; 
    }
    if (indexPath.row==2) 
    {
        UILabel *Agenda = [[UILabel alloc] initWithFrame:CGRectMake(20, 10, 200, 20)];
        Agenda.text=@"Agenda";
        Agenda.textColor=[UIColor colorWithRed:77.0/255.0 green:104.0/255.0 blue:159.0/255.0 alpha:1.0]; 
        Agenda.font=[UIFont fontWithName:@"verdana" size:16];

        [cell addSubview:Agenda];
        [Agenda release]; 
        UITextView *textView = [[UITextView alloc] initWithFrame:CGRectMake(20, 30, 280, 120)];
        textView.editable=NO;
        textView.text=[NSString stringWithString:@"Lorem ipsum dolor sit er elit lamet, consectetaur cillium adipisicing pecu, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Nam liber te conscient to factor tum poen legum odioque civiuda."];
        textView.font=[UIFont fontWithName:@"verdana" size:14];
        [cell addSubview:textView];

        [textView release];

    }
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:50:28.680

移动在`if (cell == nil) {`部分内添加视图的代码

例如，如果您想添加一个`UILabel`，请执行以下操作

```
UILabel *label;
if (cell == nil) {
    //create the cell
    //Create the label
    //Give the label a tag
    label.tag = 111; //for example
    //add label to the cell
    [cell.contentView addSubView:label];
}

//Now get the label of the cell
label = (UILabel*) [cell viewWithTag:111]; 
```

对要添加到单元格的所有 UILabel 和其他视图重复此操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:58:34.830

使用此代码...

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    cell.selectionStyle =   UITableViewCellSelectionStyleNone;
        cell.backgroundColor=[UIColor whiteColor];

 UILabel *Sender = [[UILabel alloc] initWithFrame:CGRectMake(20, 10, 200, 20)];
     [sender setTag:500];
Sender.font=[UIFont fontWithName:@"verdana" size:16];
    Sender.textColor=[UIColor colorWithRed:77.0/255.0 green:104.0/255.0 blue:159.0/255.0 alpha:1.0]; 
    [cell addSubview:Sender];
    [Sender release];  

    UILabel *Label = [[UILabel alloc] initWithFrame:CGRectMake(30, 35, 200, 20)];
    Label.text=@"Achuthananthan";
    Label.font=[UIFont fontWithName:@"verdana" size:14];
    [Label setTag:600];
    [cell addSubview:Label];
    [Label release]; 

UITextView *textView = [[UITextView alloc] initWithFrame:CGRectMake(20, 30, 280, 120)];
    textView.editable=NO;
[Label setTag:700];
    textView.text=[NSString stringWithString:@"Lorem ipsum dolor sit er elit lamet, consectetaur cillium adipisicing pecu, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Nam liber te conscient to factor tum poen legum odioque civiuda."];
    textView.font=[UIFont fontWithName:@"verdana" size:14];
    [cell addSubview:textView];
    [textView release];

}

UILabel *firstLabel = (UILabel*)[cell viewWithTag:500];
UILabel *SecondLabel = (UILabel*)[cell viewWithTag:600];
UITextView *firstText = (UITextView*)[cell viewWithTag:700];

if (indexPath.row==0) 
{

    firstLabel.text=@"From Time";
[SecondLabel setHidden:Yes];
[firstText setHidden:Yes];

}

if (indexPath.row==1) 
{

    firstLabel.text=@"Sender";
[SecondLabel setHidden:NO];
[firstText setHidden:Yes];

}
if (indexPath.row==2) 
{
    firstLabel.text=@"Agenda";
[SecondLabel setHidden:Yes];
[firstText setHidden:NO]; 
}
return cell;
 } 
```

# c++ - 转换运算符

> ID：11310150
> 
> 赞同：1
> 
> 时间：2012-07-03T11:41:20.990
> 
> 标签：c++

此代码不可编译。我在标准中找不到原因。有人可以解释吗？

```
#include <iostream>
#include <string>

template<typename T>
class S
{
public:
   explicit S(const std::string& s_):s(s_)
   {
   }
   std::ostream& print(std::ostream& os) const
   {
      os << s << std::endl;
      return os;
   }
private:
   std::string s;
};

template<typename T>
std::ostream& operator << (std::ostream& os, const S<T>& obj)
{
   return obj.print(os);
}

/*template<>
std::ostream& operator << <std::string> (std::ostream& os, const S<std::string>& obj)
{
   return obj.print(os);
}*/

class Test
{
public:
   explicit Test(const std::string& s_):s(s_)
   {
   }
   //operator std::string() const { return s; }
   operator S<std::string>() const { return S<std::string>(s); }
private:
   std::string s;
};

int main()
{
   Test t("Hello");
   std::cout << t << std::endl;
} 
```

编译器输出：

```
source.cpp: In function 'int main()':
source.cpp:47:17: error: no match for 'operator<<' in 'std::cout << t'
source.cpp:47:17: note: candidates are:
In file included from include/c++/4.7.1/iostream:40:0,
                 from source.cpp:1:
include/c++/4.7.1/ostream:106:7: note: std::basic_ostream<_CharT, _Traits>::__ostream_type& std::basic_ostream<_CharT, _Traits>::operator<<(std::basic_ostream<_CharT, _Traits>::__ostream_type& (*)(std::basic_ostream<_CharT, _Traits>::__ostream_type&)) [with _CharT = char; _Traits = std::char_traits<char>; std::basic_ostream<_CharT, _Traits>::__ostream_type = std::basic_ostream<char>]
include/c++/4.7.1/ostream:106:7: note:   no known conversion for argument 1 from 'Test' to 'std::basic_ostream<char>::__ostream_type& (*)(std::basic_ostream<char>::__ostream_type&) {aka std::basic_ostream<char>& (*)(std::basic_ostream<char>&)}'
.... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T11:44:14.900

那是因为没有转换，除了数组到指针、函数到指针、左值到右值和顶级 const/volatile 删除（参见 c++11 或 c++03、14.8.2.1），匹配模板函数时考虑。具体来说，在推断您的重载`Test -> S<string>`时不会考虑您的用户定义的转换运算符，并且会失败。`T``operator<<`

要使这种通用过载工作，您必须在接收方完成所有工作：

```
template <class T>
typename enable_if<is_S<T>::value, ostream&>::type operator <<(ostream&, const T&); 
```

`T`如果不是因为，该重载将采用 any `enable_if`（这将是不幸的，因为我们不希望它干扰其他`operator<<`重载）。`is_S`将是一个特征类型，它会告诉你`T`事实上是`S<...>`.

另外，编译器无法猜测（或者至少它不会尝试）您打算转换`Test`为 a`S<string>`而不是`S<void>`或其他任何东西（这种转换可以通过例如转换构造函数来启用`S`）。所以你必须指定

*   `Test`is (convertible to) an `S`too
*   的模板参数`S`在转换 a`Test`时为`string`

* * *

```
template <class T>
struct is_S {
  static const bool value = false;
};

template <class T>
struct is_S<S<T>> {
  static const bool value = true;
  typedef T T_type;
};

template <>
struct is_S<Test> {
  static const bool value = true;
  typedef string T_type;
}; 
```

您必须在重载中手动将 转换`T`为正确的（例如，或者，如果您想避免不必要的复制，）。`S``operator<<``S<typename is_S<T>::T_type> s = t``const S<typename is_S<T>::T_type> &s = t`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T12:20:48.660

@jpalecek 答案的第一段解释了问题所在。如果您需要解决方法，可以添加如下声明：

```
inline std::ostream& operator<< (std::ostream& os, const S<std::string>& s)
{ return operator<< <> (os, s); } 
```

由于该重载不是模板，`S<std::string>`因此将考虑隐式转换。

但我看不到任何方法可以为所有类型做到这一点`S<T>`......

# java - Simple Android Live Wallpaper with sequence of images - Updated with code

> ID：11310153
> 
> 赞同：1
> 
> 时间：2012-07-03T11:41:33.340
> 
> 标签：java, android, android-animation, live-wallpaper

I would like to develop a simple Live Wallpaper with a sequence of images. The only animation required is for each image to fade in and fade out.

All the tutorials I have found online for LWP demonstrate how to use the Draw canvas for fancy animations and drawing. This is not necessary for my app, I only want to iterate through a collection of images.

Being a novice programmer, I need some help learning how to loop through an array of images and how to display them as a wallpaper.

Can anyone share some code or point me towards a good tutorial for this?

**UPDATE**

The LWP loads on my device but the wallpaper does not change. It is stuck on image3, ironman

Here is the code I have so far. I assume I am doing something wrong in draw()

```
public class Wallpaper extends WallpaperService {
public void onCreate() {
    super.onCreate();
}

public void onDestroy() {
    super.onDestroy();
}

public Engine onCreateEngine() {
    return new CercleEngine();
}

class CercleEngine extends Engine {

    private final Handler handler = new Handler();
    private final Runnable drawRunner = new Runnable() {
        @Override
        public void run() {
            draw();
        }
    };
    private boolean visible = true;
    public Bitmap image1, image2, image3;

    CercleEngine() {
        image1 = BitmapFactory.decodeResource(getResources(),
                R.drawable.batman);
        image2 = BitmapFactory.decodeResource(getResources(),
                R.drawable.captainamerica);
        image3 = BitmapFactory.decodeResource(getResources(),
                R.drawable.ironman);
    }

    public void onCreate(SurfaceHolder surfaceHolder) {
        super.onCreate(surfaceHolder);
    }

    @Override
    public void onVisibilityChanged(boolean visible) {
        this.visible = visible;
        if (visible) {
            handler.post(drawRunner);
        } else {
            handler.removeCallbacks(drawRunner);
        }
    }

    @Override
    public void onSurfaceDestroyed(SurfaceHolder holder) {
        super.onSurfaceDestroyed(holder);
        this.visible = false;
        handler.removeCallbacks(drawRunner);
    }

    public void onOffsetsChanged(float xOffset, float yOffset, float xStep,
            float yStep, int xPixels, int yPixels) {
        draw();
    }

    void draw() {
        final SurfaceHolder holder = getSurfaceHolder();

        Canvas c = null;
        try {
            c = holder.lockCanvas();
            if (c != null) {
                c.drawBitmap(image1, 0, 0, null);
                c.drawBitmap(image2, 0, 0, null);
                c.drawBitmap(image3, 0, 0, null);
            }
        } finally {
            if (c != null)
                holder.unlockCanvasAndPost(c);
        }

        handler.removeCallbacks(drawRunner);
        if (visible) 
        {
           handler.postDelayed(drawRunner, 1000); // delay 1 sec
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:28:10.580

循环遍历一组图像没有简单的方法。它必须手动完成。

您可以采用的一种方法是将图像保存在 /res/drawable 中，然后使用 int[] 数组存储图像的残差，然后循环遍历它。

可以在此处找到关于动态壁纸的详细解释教程： [http ://www.vogella.com/articles/AndroidLiveWallpaper/article.html](http://www.vogella.com/articles/AndroidLiveWallpaper/article.html)

祝你好运

# c# - Static member inheritance in C#, what is the best way?

> ID：11310156
> 
> 赞同：2
> 
> 时间：2012-07-03T11:41:41.977
> 
> 标签：c#, inheritance, static

What is the best way to solve this?

A static member is one for all subclasses and i want a different static member for subclasses but with the same name so I can use vehicle.canDo; this should give me different arrays depending what class the vechicle instance really is.

I can just remove the static from canDo array but all instances of the same subclass should always have the same values in the canDo array so there is no need to have canDo array in every instances, this will be big waste of memory because i will have too many instances of this class.

```
class Vehicle {
    public static List<string> canDo;

    static Vehicle() {
        canDo = new List<string>(); 
        canDo.Add("go");
    }
}

class Plane : Vehicle {
    static Plane() {
        canDo.Add("fly");
    }
}

class Ship : Vehicle {
    static Ship() {
        canDo.Add("sail");
    }
}

class Main {
    static void Main(string[] args) {
        Vehicle plane = new Plane();
        Vehicle ship = new Ship();

        plane.canDo; // Contains (go, fly and sail) i want only (go and fly)
        ship.canDo; // Contains (go, fly and sail) i want only (go and sail)
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T11:48:13.423

> 解决这个问题的最佳方法是什么？

不要对非静态的事物滥用静态方法。就这么简单。

静态没有继承，也不是可以以任何方式具有继承场景的东西。

您正在通过滥用功能进行战斗 - 不值得战斗。请学习正确的面向对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T11:49:40.167

您不需要静态变量和构造函数，只需添加基本构造函数（默认情况下完成，`: base()`是可选的）：

```
class Vehicle {
    public List<string> canDo;

    Vehicle() {
        canDo = new List<string>(); 
        canDo.Add("go");
    }
}

class Plane : Vehicle {
    Plane() : base() {
        canDo.Add("fly");
    }
}

class Ship : Vehicle {
    Ship() : base() {
        canDo.Add("sail");
    }
} 
```

更新：基于@Eben Roux 的评论 -

```
public abstract class Vehicle {
    protected static List<string> _canDo;
    protected abstract List<string> getCanDo();
    public List<string> canDo{
        { get {
               var _cando = new List();
               _cando.AddRange(Vehicle._canDo);
               _cando.AddRange(this.getCanDo());
               return _cando;
              }
        }
    }
    static Vehicle() {
        _canDo = new List<string>(); 
        _canDo.Add("go");
    }
}

class Ship : Vehicle {
    protected static List<string> childCanDo;
    protected override getCanDo(){
        return Ship.childCanDo;
    }
    static Ship() {
        childCanDo.Add("sail");
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-03T12:00:41.930

请注意，您还可以`canDo`使用以下方法隐藏基类`new`：

```
class Vehicle
{
    public static List<string> canDo = new List<string>() { "go" };   
}

class Plane : Vehicle
{
    public new static List<string> canDo = new List<string>(Vehicle.canDo);
    static Plane()
    {
        canDo.Add("fly");
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-03T11:46:56.730

You need an instance of the `canDo` list per type. So either you can pass in the collection via the constructor or you can have a static on the subtype level.

*Edit (to elaborate):*

Since your sub class instance all have the same 'abilities' and you don't want to populate a list for each you would need a shared list. You are using inheritance where you probably want composition:

```
public abstract class Vehicle
{
    protected List<string> canDo;

    protected Vehicle(List<string> canDo)
    {
        this.canDo = canDo;
    }
}

public class Plane : Vehicle
{
    public Plane(List<string> canDo) : base(canDo)
    {
    }
} 
```

I wouldn't go with a `List<string>` either but rather encapsulate it in a class that makes business sense (although I understand that this is only an example). To populate the `canDo` list you could go with a factory or a factory method on a subtype.

There are just so many ways to do this you will need to find something that's comfortable.

Although I did present a static as an alternative (since you were asking about it) I definitely would not use a static for this myself.

# java - Problems with PlayN building

> ID：11310159
> 
> 赞同：0
> 
> 时间：2012-07-03T11:41:50.873
> 
> 标签：java, eclipse, maven, playn

I want to create a PlayN game, but in Eclipse I get this errors:

```
ArtifactTransferException: Failure to transfer com.google.collections:google-collections:jar:1.0 from http://repo1.maven.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced. Original error: Could not transfer artifact com.google.collections:google-collections:jar:1.0 from/to central (http://repo1.maven.org/maven2): No response received after 60000  pom.xml /playn-payments-server  line 2  Maven Dependency Problem
ArtifactTransferException: Failure to transfer com.googlecode.gwt-flash:gwt-flash:jar:1.2 from http://forplay.googlecode.com/svn/mavenrepo was cached in the local repository, resolution will not be reattempted until the update interval of forplay-legacy has elapsed or updates are forced. Original error: Could not transfer artifact com.googlecode.gwt-flash:gwt-flash:jar:1.2 from/to forplay-legacy (http://forplay.googlecode.com/svn/mavenrepo): No response received after 60000  pom.xml /playn-flash    line 21 Maven Dependency Problem
ArtifactTransferException: Failure to transfer com.googlecode.gwt-flash:gwt-flash:jar:1.2 from http://forplay.googlecode.com/svn/mavenrepo was cached in the local repository, resolution will not be reattempted until the update interval of forplay-legacy has elapsed or updates are forced. Original error: Could not transfer artifact com.googlecode.gwt-flash:gwt-flash:jar:1.2 from/to forplay-legacy (http://forplay.googlecode.com/svn/mavenrepo): No response received after 60000  pom.xml /playn-tests-flash  line 4  Maven Dependency Problem
ArtifactTransferException: Failure to transfer joda-time:joda-time:jar:1.6 from http://repo1.maven.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced. Original error: Could not transfer artifact joda-time:joda-time:jar:1.6 from/to central (http://repo1.maven.org/maven2): No response received after 60000  pom.xml /playn-payments-server  line 2  Maven Dependency Problem
Missing artifact com.google.collections:google-collections:jar:1.0  pom.xml /playn-payments-server  line 2  Maven Dependency Problem
Missing artifact com.googlecode.gwt-flash:gwt-flash:jar:1.2 pom.xml /playn-flash    line 21 Maven Dependency Problem
Missing artifact com.googlecode.gwt-flash:gwt-flash:jar:1.2 pom.xml /playn-tests-flash  line 4  Maven Dependency Problem
Missing artifact joda-time:joda-time:jar:1.6    pom.xml /playn-payments-server  line 2  Maven Dependency Problem
Open quote is expected for attribute "rename-to" associated with an  element type  "module".    TestsFlashGame.gwt.xml  /playn-tests-flash/src/main/java/playn/tests    line 16 XML Problem
The container 'Maven Dependencies' references non existing library 'C:\Users\Vukasin Manojlovic\.m2\repository\com\google\collections\google-collections\1.0\google-collections-1.0.jar'    playn-payments-server       Build path  Build Path Problem
The container 'Maven Dependencies' references non existing library 'C:\Users\Vukasin Manojlovic\.m2\repository\com\googlecode\gwt-flash\gwt-flash\1.2\gwt-flash-1.2.jar'    playn-flash     Build path  Build Path Problem
The container 'Maven Dependencies' references non existing library 'C:\Users\Vukasin Manojlovic\.m2\repository\com\googlecode\gwt-flash\gwt-flash\1.2\gwt-flash-1.2.jar'    playn-tests-flash       Build path  Build Path Problem
The project cannot be built until build path errors are resolved    playn-flash     Unknown Java Problem
The project cannot be built until build path errors are resolved    playn-payments-server       Unknown Java Problem
The project cannot be built until build path errors are resolved    playn-tests-flash       Unknown Java Problem 
```

What should I do? Please help!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:21:30.907

您的 Maven 安装无法联系中央存储库来解决列出的依赖项，这通常是连接问题。

你在代理后面吗？如果是这样，您可以配置 maven 以在 maven 的 settings.xml 上访问它。（在 Windows 上，它位于您的用户配置文件文件夹中）

如果您仍然无法自动下载依赖项，您可以随时手动下载它们并将它们安装到本地存储库，发出：

```
mvn install:install-file -Dfile=<path-to-file> -DgroupId=<group-id> -DartifactId=<artifact-id> -Dversion=<version> -Dpackaging=<packaging> 
```

对于您的第一个依赖项应该是这样的：

```
mvn install:install-file -Dfile=google-collections.jar -DgroupId=com.google.collections -DartifactId=google-collections -Dversion=1.0 -Dpackaging=jar 
```

# php - Registration page, email or password exist check

> ID：11310160
> 
> 赞同：4
> 
> 时间：2012-07-03T11:42:02.140
> 
> 标签：php, mysqli, prepared-statement

I've written a registration page in PHP using prepared statements. My question is a fairly simple one. When a user registers I want to make sure that they aren't registering under the same username or email as another person. Therefore as part of my verification procedure I run two queries, one to check if the email exists and one to check if the username exists. My question is, is there a better method? I feel that running more that one query could somehow sacrifice some performance. Will performance even be noticably affected by such a query? I realise that I could run `"SELECT * FROM table WHERE username = ? or email = ?",` but I would like the user to know what they got wrong rather than just a generic "Either your username or email is currently being used, feel free to use trial and error to find which it is". It's probably me just being paranoid about speed, but I was just interested to see what everyone else's opinion on the matter is.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T11:48:35.180

使用 OR 运行查询并检查返回的结果以报告您找到的确切内容。

但是，根据数据库内部结构和索引，两个单独的查询可能比 OR'ed 一起更快。您最好对所有案例（找到一个、两个都找到、没有找到）进行基准测试，以获得有关您的环境的明确答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T11:55:27.100

在您保存用户信息的数据库中，使用户名和电子邮件实体唯一。就像主键一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T11:51:46.667

您的查询很好；您将有 1 或 2 个结果；2 如果存在仅使用电子邮件或仅使用昵称的注册；1 如果注册有邮箱和昵称；使用JS并在输入框右侧指定原因

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T11:51:46.990

好吧，我想这将是最简单的方法：

```
SELECT IF(username = :username_to_check, 1, 0) AS dup_username
  FROM users
 WHERE username = :username_to_check OR email = :email_to_check 
```

然后检查： 1) 行数 - 如果为 0，则未找到重复项；2) 结果的 dup_username 标志，如果行数 > 0。

这是一个可以玩[的例子。](http://sqlfiddle.com/#!2/e6607/6)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T11:52:05.410

我不认为它对性能不利

如果您有从表中获取一行的选择查询；让我们说数千行；那么影响就更不用说了。。

什么影响您的性能是连接查询需要大量资源，而您的情况没有发生......

我相信单独使用它是安全的，我们一直在我们的网站上这样做，目前拥有超过一百万用户

还尝试在您的 mysql 服务器中运行此查询，看看这需要多长时间才能有所帮助（尤其是对于更复杂的查询）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-03T11:53:24.133

```
 $result = mysql_query("SELECT * FROM table1 WHERE Username = ''", $link);
    $num_rows = mysql_num_rows($result);

    $result2 = mysql_query("SELECT * FROM table1 WHERE Email= ''", $link);
    $num_rows2 = mysql_num_rows($result2);

    $checkUsrN = false;
    $checkEmail = false;
    $mesg = "The following is bad: ";

    if($num_rows == 0)
    {
       $checkUsrN = true;         
    }
    else{
        $mesg .= "Username";
    }

    if($num_rows2 == 0)
    {
       $checkEmail = true;
    }
    else{
        $mesg .= "Email";
    }

    if($checkUsrN == false || $checkEmail == false)
    {
       echo $mesg;
       break;
    } 
```

你的目的是什么？

# java - ImageIO - get image type and exif data

> ID：11310162
> 
> 赞同：31
> 
> 时间：2012-07-03T11:42:07.590
> 
> 标签：java, javax.imageio

Given some source file (or more generic - input stream), I need to find out

*   is it an image
*   if it is an image, then retrieve its type (png/jpeg/gif/etc)
*   retrieve exif data, if available

I looked at the API, but it is not clear how to get the type of image or Exif data.

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-03T11:55:10.700

上一次我不得不这样做，几年前，标准 API 无法读取 EXIF 数据。这个库可以这样做：

[http://www.drewnoakes.com/code/exif/](http://www.drewnoakes.com/code/exif/)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-03T11:57:50.003

简单的答案：使用[https://github.com/drewnoakes/metadata-extractor/](https://github.com/drewnoakes/metadata-extractor/)

如果您很疯狂/勇敢/好奇，您可以通过读取前几个字节（这些是[幻数](http://www.astro.keele.ac.uk/oldusers/rno/Computing/File_magic.html)）从流中获取图像类型。我相信 exif 通常也位于流的开头。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-02-10T21:21:12.310

这是一个旧线程，但我最近正在这样做，发现 Apache Tika 库很有用。特别是用于分析通用流以检测其中的内容。

认为它可能会帮助其他人。

[http://tika.apache.org/](http://tika.apache.org/)

# c# - How do i check if a set time equals the system Time

> ID：11310164
> 
> 赞同：2
> 
> 时间：2012-07-03T11:42:10.080
> 
> 标签：c#, datetime, clock

I'm making a little alarm clock as a project to practice as I'm just a beginner.

I got 2 textboxes in which the user can put in the hours and minutes at which he wants the alarm to go off.

How do i check if the alarm time provided by the user is the same as the time on his system / pc?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-07T07:40:54.350

以上所有答案都很有帮助，但您应该在实践中使用 TimeSpan 来比较日期或时间。

```
int hour=5;
int min=20;
int sec=0;
TimeSpan time = new TimeSpan(hour, min, sec);
TimeSpan now = DateTime.Now.TimeOfDay;
// see if start comes before end
if (time == now)
{
    //put your condition
} 
```

请参阅此网址了解更多信息。

[如何检查 DateTime.Now 是否仅在时间部分的两个给定 DateTimes 之间？](https://stackoverflow.com/questions/12998739/how-to-check-if-datetime-now-is-between-two-given-datetimes-for-time-part-only)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T11:44:46.353

利用

```
int hours = System.DateTime.Now.Hour;
int minutes = System.DateTime.Now.Minute;

if(Convert.Toint32(txtHours.Text) == hours && Convert.Toint32(txtMinutes.Text) == minutes)
{
  // same time 
}
else
{
  // time not same
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T11:44:52.167

这是一个让您上路的小样本

```
 int myMinute = 5;
    int myHour = 19;

    if (DateTime.Now.Minute == myMinute && DateTime.Now.Hour == myHour)
    { 
      } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T11:44:24.463

```
if(Convert.ToInt32(tbHours.Text) == DateTime.Now.Hours 
&& Convert.ToInt32(tbMinutes.Text) == DateTime.Now.Minutes)
    {
        //set off alarm
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T11:44:53.743

```
var current = DateTime.Now;
if (current.Hour == 9 && current.Minute == 0) {
    //It is 9:00 now
} 
```

# spring - Getting Exception when trying to update record second time in hibernate

> ID：11310167
> 
> 赞同：1
> 
> 时间：2012-07-03T11:42:25.413
> 
> 标签：spring, hibernate, jpa

We keep user object in session. When we update it first time ( using entityManager.merge( ent )) it works fine; but second time I get following exception:

```
org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [com.kids.domain.Child#22]
    at org.hibernate.event.internal.DefaultMergeEventListener.entityIsDetached(DefaultMergeEventListener.java:492)
    at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:256)
    at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:86)
    at org.hibernate.internal.SessionImpl.fireMerge(SessionImpl.java:781)
    at org.hibernate.internal.SessionImpl.merge(SessionImpl.java:766) 
```

I am using spring with hibernate & jpa. Spring is injecting EntityManager in DAO. I do understand that if I would do a fresh find() everytime then make all the changes on that object and then merge().. it will work fine.. but in my case I cannot do that.

I also checked that the hashcode of EntityManager used is same both time; i.e same EntityManager instance is getting used both time then why it gives this exception when trying to update a record second time

Any help would be highly appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T08:00:39.630

我尝试了很多东西，但没有任何效果。即使在互联网上也没有解决方案。最后，当我从我的实体中删除版本时（即删除 hibernate 提供的 OptimisticLockException 支持）.. 一切都开始正常工作。可能，我会尝试自己处理 OLE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:06:44.030

当您在当前事务中调用 merge 方法时，hibernate 会将给定对象的状态复制到具有相同标识符的持久对象上，并返回新的可管理实体。您需要在后续操作中处理合并返回的可管理实体，因为该实体具有比 DB 中的新版本。

# php - How add external controller to ZEND module

> ID：11310174
> 
> 赞同：1
> 
> 时间：2012-07-03T11:42:46.363
> 
> 标签：php, zend-framework, zend-controller, zend-framework-modules

I want make a in my CMS autoload plugin, which will be automaticly load externall controller to my admin module.

I writing because I have problem with add external controller to my Zend module. My situation is: I have Admin module and external catalog: ROOT_PATH |-modules |-ModProducts |-controller |-forms |-models |-DbTable |-views

Zend give me instruction addControllerDirectory but When use this instruction:

```
$frontController = Zend_Controller_Front::getInstance();

    $frontController->addControllerDirectory(
        ROOT_PATH . '/modules/mod_products/controllers','admin'
        );
    $frontController->addControllerDirectory(
        APPLICATION_PATH . '/modules/admin/controllers','admin'
        ); 
```

Module Products not working. I get error: " Invalid controller specified (Module-Products)"

When i change line in the code: $frontController = Zend_Controller_Front::getInstance();

```
 $frontController->addControllerDirectory(
        APPLICATION_PATH . '/modules/admin/controllers','admin'
        );

    $frontController->addControllerDirectory(
        ROOT_PATH . '/modules/mod_products/controllers','admin'
        ); 
```

My Admin module is not working and I get this same errror.

I know how load resources (forms, models etc.) but i don't know how load external controller.

Please helpe me.

# android - How to add images to a particular selected row of tablelayout in android?

> ID：11310176
> 
> 赞同：1
> 
> 时间：2012-07-03T11:42:49.843
> 
> 标签：android, tablelayout

I have table layout. We should be able to add rows that containing 3 textviews and 4 imageviews to that tablelayout dynamically when onclick of the **"+"** button. We can able to remove a particular selected row when onclick of **"-"** button. When we select a particular row, we should be able to add images onclick of camera button to that particular row. How to do it. Can anyone please help me..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:55:43.140

您可以使用 LayoutInflater 在单击 + 按钮时添加行。或者您可以使用代码添加视图。这是一个将 ImageView 动态添加到表格布局的示例代码。

```
 private void addImageView()
{
    ImageView mImageView = new ImageView(this);
    TableLayout mTableLayout = (TableLayout) findViewById(R.id.tablelayout1);
    mImageView.setId(getRndId());
    TableRow mTableRow = new TableRow(this);
    mTableRow.setId(getRndId());
    mTableRow.addView(mImageView);
    mTableLayout.addView(mTableRow);

}

/**
 * Gets a random no and checks if its already used in R.java
 * */
protected int getRndId()
{
    Random rnd = new Random();
    int possible_id = rnd.nextInt();
    while(true)
    {
    //  Log.d(TAG, "possible_id=" + possible_id);
        View temp = findViewById(possible_id);
        if ((possible_id>0) && (temp==null))
        {
            return possible_id;
        }
        else
        {
            possible_id = rnd.nextInt();
        }       
    }
} 
```

# web-services - Test Coverage for Future method salesforce

> ID：11310177
> 
> 赞同：2
> 
> 时间：2012-07-03T11:42:50.750
> 
> 标签：web-services, salesforce, apex-code

Hi i trying to get coverage for a class that has few future method (for web service call) and few concrete static methods. but after calling future method, i am unable to call other methods... Can you please tell me how to take coverage for future method and web service calls.

my class structure :

```
public with sharing class AccountSynchController { 
 @future (callout=true)
    public static void importAccount(Set<Id> ids) {

    }
 @future (callout=true)
    public static void importContact(Set<Id> ids) {

    }
}

[future methods are called from trigger]

Test Class Code : 

        VAT__c testVat = new VAT__c();
    testVat.Code__c = '3';
    insert testVat;        

        Account testAccount = new Account();
        testAccount.Name = 'Test Account';
        testAccount.VATSales__c = testVat.Id;
        testAccount.VATPurchase__c = testVat.Id;
        testAccount.KvK_Nummer__c = '12312312';
        testAccount.PhoneExt__c = '12312312';
        testAccount.Website = '12312312';
        testAccount.BillingPostalCode = '12312312';
        testAccount.BillingCity = '12312312';
        testAccount.Fax = '12312312';
        testAccount.Phone = '12312312';
        testAccount.BillingStreet = '12312312';
        testAccount.BTW_Nummer__c = '12312312';
        testAccount.BillingCountry = '12312312';
        testAccount.BillingState = '12312312';
        testAccount.BTW_Nummer__c = '12312312'; 
        testAccount.E_mail__c = 'test@gmail.com';
        testAccount.Taal__c = 'NL';
        testAccount.SalesPaymentConditionCode__c = '15';
        testAccount.Code__c = '102';
        testAccount.fromExact__c = false;
        testAccount.Exact_Id__c = '123123';
        insert testAccount;

        Contact testContact = new Contact();
        testContact.AccountId = testAccount.Id;
        testContact.Birthdate = system.today();
        testContact.Conact_Exact_Number__c = '12312312312';
        testContact.Email = 'test@gmail.com';
        testContact.FirstName = 'first';
        testContact.Title_Code__c = 'Mr.';
        testContact.Geslacht__c = 'M';
        testContact.Initials__c = 'I';
        testContact.Language_Code__c = 'NL';
        testContact.LastName = 'last';
        testContact.MiddleName__c = 'middle';
        testContact.Phone = '12321312312';
        testContact.fromExact__c = false;
        insert testContact; 
```

Thanks..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T15:48:34.763

[通过调用Test.startTest()](http://www.salesforce.com/us/developer/docs/apexcode/index_Left.htm#StartTopic=Content/apex_methods_system_test.htm)开始您的单元测试，然后运行您的测试插入。通过调用[Test.stopTest()](http://www.salesforce.com/us/developer/docs/apexcode/index_Left.htm#StartTopic=Content/apex_methods_system_test.htm)完成。调用最后一个方法可确保您的 @future 方法已被触发。之后，您可以进行断言以验证触发器的操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T16:11:48.030

扩展 Adam 的答案以测试标注，您将需要使用该`Test.isRunningTest()`方法让您有机会模拟从您的 Web 服务返回数据 - 这不是最好的，但它是普遍接受的方式。

另一种选择是使用一些模拟和注入，但这并不像它应该的那样直接，所以大多数人选择第一种选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-24T03:22:04.037

由于不可能直接从您的测试类中调用 Web 服务，因此您必须编写一个成瘾模拟类。这样做的目的是生成虚假响应。

```
// This causes a fake response to be generated
    Test.setMock(WebServiceMock.class, new WebServiceMockImpl()); 
```

其中 WebServiceMock.class 是上面提到的类。之后，您可以在测试类中调用真正的 web 服务调用方法。

检查以下链接以获取更多信息。

[http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_callouts_wsdl2apex_testing.htm](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_callouts_wsdl2apex_testing.htm)

# objective-c - 如何在所有视图控制器中将自定义 uibarbuttonItem 添加到我的导航项？

> ID：11310180
> 
> 赞同：0
> 
> 时间：2012-07-03T11:42:54.830
> 
> 标签：objective-c, ios, uinavigationcontroller, uiapplicationdelegate

我正在尝试向`UIBarButtonItem`我的导航项添加自定义。这个按钮将在我所有的视图控制器中可用。因此，我没有将它添加到每个`viewDidLoad`方法中，`viewDidLoad`而是尝试将它添加到我的应用程序 Delegate 类中的一个单独的方法中，我将在该方法中调用该`viewDidLoad`方法。这是我的代码：

```
 UIImage* image = [UIImage imageNamed:@"some-header-icon.png"];
CGRect frame = CGRectMake(0,0,image.size.width,image.size.height);
UIButton* hellBtn = [[UIButton alloc] initWithFrame:frame];
[hellBtn setBackgroundImage:image forState:UIControlStateNormal];
[hellBtn setShowsTouchWhenHighlighted:NO];
[hellBtn addTarget:self action:@selector(goToHell) forControlEvents:UIControlEventTouchUpInside];

UIBarButtonItem* rightBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:hellBtn];
[self.nav.navigationController.navigationItem setRightBarButtonItem:rightBarButtonItem];
[hellBtn release];
[rightBarButtonItem release]; 
```

如果我在任何 viewController 中替换相同的代码博客`viewDidLoad`并更改

```
[self.nav.navigationController.navigationItem setRightBarButtonItem:rightBarButtonItem]; 
```

经过：

```
[self.navigationItem setRightBarButtonItem:rightBarButtonItem]; 
```

它完美地工作。任何想法为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T11:52:56.667

`UIViewController`为 ex创建一个子类。`UIViewControllerBase`，覆盖`viewDidLoad`方法并在其中创建 `rightBarButtonItem`并设置它。然后让你的所有控制器继承`UIViewControllerBase`- 简单的 OOP 场景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:58:02.577

你不应该使用它`self.nav.navigationController`，因为`nav`它是一个`UINavigationController`然后没有得到`.navigationController`

只需使用`[self.navigationItem setRightBarButtonItem:rightBarButtonItem];`

# android - Layout中的Android定位

> ID：11310182
> 
> 赞同：0
> 
> 时间：2012-07-03T11:43:07.520
> 
> 标签：android, android-layout

我正在尝试在我的布局中构建这种线：

“总………………1000”

我需要根据从网络收到的内容更改“1000”。结果，我必须更改 "........." 的宽度。单词“Total”只是一个最终的 TextView。如何在布局中实现它？当手机变为横向时“.....”（点）必须更长，我不知道如何实现它。

所以我有 3 个部分：TextView “Total”、TextView “....”（点）和 TextView “1000”，它可以是从 1 到无穷大的任何数字。如何实现它们以根据屏幕大小在它们之间显示强制性的“总计”和“1000”以及“.....”？

以下 xml 没有成功。

```
<RelativeLayout 
                android:id="@+id/statistic_layout"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@+id/statistic_separator"
                android:orientation="horizontal"
                android:padding="15dp">

               <TextView android:id="@+id/published_recepies"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content" 
                        android:textStyle="bold"
                        android:textSize="18dp"
                        android:layout_alignParentLeft="true"
                        android:textColor="@color/dark_orange"
                        android:text="Total"/>

               <TextView android:id="@+id/dots"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content" 
                        android:textSize="18dp"
                        android:layout_toRightOf="@+id/published_recepies"
                        android:textColor="@color/dark_orange"
                        android:text="@string/dots"/>

               <TextView android:id="@+id/published_recepies_data"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content" 
                        android:textSize="18dp"
                        android:layout_alignParentRight="true"
                        android:textColor="@color/dark_orange"
                        android:text="323"/>           

           </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:56:49.457

You need to play around with weight attributes : Try below snippet ,make use of below code and design as per your requirement :

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:background="#ffffff" >
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:background="#ffffeabc" >
</LinearLayout>

 <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:background="#ffffedef" >
</LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T12:02:24.297

Try this,,

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@android:color/white" >

    <TextView
        android:id="@+id/text"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_gravity="center"
        android:background="@android:color/white"
        android:singleLine="true"
        android:text="......................................................................................................................................................................"
        android:textColor="#000000"
        android:textSize="18dip" />

    <TextView
        android:id="@+id/text2"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_gravity="left"
        android:background="@android:color/white"
        android:text="Total"
        android:textColor="#000000"
        android:textSize="18dip" />

    <TextView
        android:id="@+id/text3"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_gravity="right"
        android:background="@android:color/white"
        android:text="1000"
        android:textColor="#000000"
        android:textSize="18dip" />

</FrameLayout> 
```

Two little problems in my code,

```
1\. You need to write so many dots hardcoded in layout xml file.
2\. As sometimes there is a some little portion of dots cuts on both side. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T11:47:02.777

How about a horizontal `LinearLayout` with the objects of equal layout_weights? "Total" can be `wrap_content` width, "......" can be `match_parent`, and "1000" can be `wrap_content`. Align "Total" to the left, "1000" to the right, and "....." will fill the rest of the space between the other two. However, this would only work if you do something somewhat ridiculous like make the "...." string 200 dots long. In that way, some of the dots will not appear and will run off screen, but at least you'll see all the dots you need between "Total" and "1000". What do you think?

The only other "more complicated" way I could think of doing this is every time you switch orientation or increase/decrease the number, find the width of the screen in pixels, figure out the width of the word "Total" and the each digit of the number in pixels, subtract that from the width, and divide that by the number of pixels a dot takes up. That number would be the amount of dots to put in the "...." string.

# jquery - qtip content button unable change div display & text readonly attribute

> ID：11310183
> 
> 赞同：0
> 
> 时间：2012-07-03T11:43:18.767
> 
> 标签：jquery, html, qtip

I am having problem with qtip content button. When i try to change a text's readonly property to, it change the property by it is still writeabl. and same problem when i am trying to display a div using on click.

Here is [JSfiddle](http://jsfiddle.net/z2xMB/12/) link to the problem....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:03:14.310

Qtip 为 Tooltip 克隆您的 html，然后在何时显示它，这意味着您的 id 不会总是唯一的。

而是使用类

```
 $(document).on("click",'.poster', function() {
        $('.lookup').attr('readOnly', true);     
    }); 
```

单击 go 按钮时将禁用文本字段

更新[的小提琴](http://jsfiddle.net/z2xMB/19/)

# c++ - Group of soldiers moving on grid map together

> ID：11310184
> 
> 赞同：4
> 
> 时间：2012-07-03T11:43:20.597
> 
> 标签：c++, game-engine, game-physics, path-finding

I am making RTS game and whole terrain is like grid ( cells with x and y coordinates). I have couple soldiers in group (military unit) and I want to send them from point A to point B ( between points A and B is obstacles ). I can solve for one soldier using A* algorithm and that is not problem. How to achieve that my group of soldiers always going together ? (I notice couple corner cases when they split and go with different ways to the same destination point, I can choose leader of group but I don't need that soldiers going on same cells but by leader, for example couple at right side, couple at left side if it is possible). Was anyone solving similar problem in past ? Any idea for algorithm modification ?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T11:50:40.677

您需要一个集群算法，其中您让包的领导者遵循 A* 方向，而另一个则跟随领导者的编队。

如果您有非常大的编队，您将遇到诸如“如何让所有士兵通过这个小洞”之类的问题，这就是您需要变得聪明的地方。

一个例子可能是在狭窄的地方强制执行单线阵型，其他的可能是将小组分解成更小的班。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T12:27:46.593

如果你没有太多士兵，一个直接的修改是将问题视为多维问题，每个士兵代表 2 个维度。您可以将约束添加到这个多维空间，以确保您的士兵彼此靠近。然而，这可能在计算上变得昂贵。

人工势场通常成本较低且易于实施。它们可以扩展到合作战略。如果结合图形搜索技术，您就不会陷入局部最小值。谷歌给出了很多起点：[http ://www.google.com/search?ie=UTF-8&oe=utf-8&q=motion+planning+potential+fields](http://www.google.com/search?ie=UTF-8&oe=utf-8&q=motion+planning+potential+fields)

# mysql - 不同字段的JDBC更新

> ID：11310186
> 
> 赞同：1
> 
> 时间：2012-07-03T11:43:25.870
> 
> 标签：mysql, jdbc, sql-update, dao

我正在开发可以通过 JDBC 访问数据库的 Web 服务。我正在使用 DAO 模式。我已经实现了所有必要的方法：findAll、add、update、delete。但我对更新方法感到困惑。它有 Object 作为输入参数。但是他怎么知道哪个字段需要更新。例如，我需要更新字段“姓名”我使用查询`'update table set name='smth where id=2'`但如果我需要更新“姓氏”？告诉更新方法实际更新什么的最佳做法是什么？
谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:45:38.600

您需要更改方法签名以包含列名和值的 Map。

```
public interface FooDao<K, V> {
    // other methods here, of course.
    public void update(V target, Map<String, Object> parameters); 
} 
```

查看 Spring JDBC 模板，了解如何设计和实现这样的东西的一个很好的例子。

# java - JavaFX .getChildren().add(root) 抛出 java.lang.IllegalStateException

> ID：11310194
> 
> 赞同：1
> 
> 时间：2012-07-03T11:43:51.483
> 
> 标签：java, user-interface, javafx-2

当我想从其他线程将节点添加到我的 GUI 时，我遇到了问题。它抛出 IllegalStateException ，我不知道如何解决它。

```
public class DashBoardController implements Initializable {
    @FXML
    private FlowPane dashBoardPane;

    @Override
    public void initialize(URL url, ResourceBundle rb) {
    try {
        RTMClientV2 client = new RTMClientV2("localhost", 9009, new DashBoardArranger(this));
        Thread clientTH = new Thread(client);
        clientTH.start();
    } catch (IOException ex) {
        Logger.getLogger(DashBoardController.class.getName()).log(Level.SEVERE, null, ex);
    }
    }        

    public synchronized void addToDashBoard(Pane root){
        dashBoardPane.getChildren().add(root);
    }
} 
```

我只是用这个控制器将我的 .FXML 文件加载到 GUI 中，当程序启动时，它运行负责与服务器通信的线程（clientTH.start（）；），一切正常。但是当服务器在初始化后发送数据时。我希望这些数据添加到我的仪表板中，我像以前一样使用方法 public synchronized void addToDashBoard(Pane root) ，但它抛出 java.lang.IllegalStateException ，我不知道为什么。

顺便说一句：我发现：“如果此父节点附加到场景，则只能在 JavaFX 应用程序线程上修改其子节点列表。如果违反此限制，则会引发 IllegalStateException。”，但它没有用为了我。仪表板被添加到我的 GUI 中的另一个窗格中。

顺便说一句：输出：

> 线程“Thread-4”java.lang.IllegalStateException 中的异常：不在 FX 应用程序线程上；currentThread = Thread-4
> at com.sun.javafx.tk.Toolkit.checkFxUserThread(Unknown Source)
> at com.sun.javafx.tk.quantum.QuantumToolkit.checkFxUserThread(Unknown Source)
> at javafx.scene.Parent$1.onProposedChange(Unknown Source)
> at com.sun.javafx.collections.VetoableObservableList.add(Unknown Source)
> at com.sun.javafx.collections.ObservableListWrapper.add(Unknown Source)
> at probeobserver.gui.probeSite.DashBoardController.addToDashBoard(DashBoardController.java:125 )
> 在probeobserver.gui.probeSite.DashBoardArranger.setCompName(DashBoardArranger.java:66)
> 在 probeobserver.rtm.RTMClientV2.readAllDataAndUpdate(RTMClientV2.java:144)
> 在 probeobserver.rtm.RTMClientV2.run(RTMClientV2.java:80)
> 在 java.lang.Thread.run(Thread.java:722)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T11:50:37.743

在您的 I/O 线程中，您需要在 UI 线程中与 UI 交互：

```
Platform.runLater(new Runnable() {
    @Override
    public void run() {
        Pane root = ...; //if you set any properties of the pane, do it here.
        dashBoardController.addToDashBoard(root);
    }
} 
```

# c++ - 无法使用 fwrite() 写入

> ID：11310199
> 
> 赞同：-3
> 
> 时间：2012-07-03T11:44:20.967
> 
> 标签：c++, mfc, fwrite

我`fwrite`在 MFC 应用程序中使用打印内容，`lBuffer`如下面的 C++ 代码所示：

```
PvBuffer *lBuffer = NULL;

// Retrieve next buffer     
PvResult lResult = lStream.RetrieveBuffer(&lBuffer, &lOperationResult, 1000);
if (lResult.IsOK())
{
    FILE *fp = fopen("C:\\Users\\acm45\\Desktop\\abuffer.bin", "wb");
    fwrite(lBuffer, 1, 10075968, fp);
    fclose(fp);
} 
```

`IResult`知道为什么即使返回成功，文件 abuffer.bin 的内容总是空的吗？
请注意，当我运行程序时，总是会创建该文件，但它是空的，大小为 0KB。

**更新：**
为了调试我这样做了：

```
FILE *fp = fopen("C:\\Users\\acm45\\Desktop\\abuffer.bin", "wb");
if (fp) {
    fwrite(lBuffer, 1,10075968, fp);
    fclose(fp);
} else {
    printf("error opening file");
} 
```

并且输出**没有**打印“错误打开文件”，但文件仍然是空的。现在我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:58:07.723

我猜你在那里有一些未定义的行为。

fwrite 的手册页说：

> `size_t fwrite(const void *ptr, size_t size, size_t nmemb, FILE *stream);`
> 
> 函数 fwrite() 将 nmemb 数据元素（每个 size 字节长）写入 stream 指向的流，从 ptr 给定的位置获取它们。

但你的电话

```
lStream.RetrieveBuffer( &lBuffer, &lOperationResult, 1000 ); 
```

让我猜你没有每一个字节长的 10075968 个元素。

另外：您的缓冲区是 POD 元素的集合吗？如果不是，那是未定义行为的另一个原因。`fwrite`仅适用于 POD 类型。

*通常*，最好使用 C++ 流。

* * *

**解释 fwrite 的附录**

`size_t fwrite(const void *ptr, size_t size, size_t nmemb, FILE *stream);`

这里，`size`表示*单个*元素的大小。

`nmemb`是此类元素的数量。例如：

```
...
struct Foobar {
    int frob;
};

int main () {
    ...
    Foobar thingies[5];
    fwrite (thingies, sizeof(Foobar), 5, some_file);
} 
```

更通用的方法是：

```
 Foobar thingies[5];
    const size_t nm = sizeof(thingies) / sizeof(Foobar);
    fwrite (thingies, sizeof(Foobar), nm, some_file); 
```

这读为：“数组的大小，除以单个元素的大小，等于该数组中元素的数量”。

但请注意，这只适用于数组，不适用于指针！

```
 Foobar *thingies = new Foobar[5];
    const size_t nm = sizeof(thingies) / sizeof(Foobar);
    fwrite (thingies, sizeof(Foobar), nm, some_file);
    // THIS IS WRONG. sizeof(thingies) now equals to the
    // size of a pointer! 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-03T11:48:42.907

尝试这样做：

```
FILE *fp = fopen("C:\\Users\\acm45\\Desktop\\abuffer.bin", "wb");
if (fp) {
    fwrite(lBuffer, 1, 10075968, fp);
    fclose(fp);
} else {
    perror("fopen");
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-03T12:14:47.117

检查您是否正确检索缓冲区。使用该类中可用的函数来获取缓冲区的大小并传递它而不是该常量。

# iphone - Updating a iPhone SQLite DB Via JSON

> ID：11310200
> 
> 赞同：0
> 
> 时间：2012-07-03T11:44:22.640
> 
> 标签：iphone, sql, json

I'd like to update a SQLite DB within an iPhone app via a JSON call and I'm wondering if i'm approaching it the right way and would be keen for your feedback/input.

I was thinking of using a JSON encoded string containing x-number of dictionaries in an array.

Each dictionary would have a few properties that correspond to the CRUD function i'd like to execute within the app, as well as the data I would like updated/deleted/added - i'm thinking it might look something like this...

```
[{ "crudFunction": "INSERT", "name": "John", "city": "city1", "phone": 11111},
{ "crudFunction": "UPDATE", "name": "Andrew", "city": "city2", "phone": 22222},
{ "crudFunction": "DELETE", "name": "Matt", "city": "city3", "phone": 33333},
{ "crudFunction": "UPDATE", "name": "Mike", "city": "city4", "phone": 44444} ] 
```

For the sake of keeping things simple, in the above example i'll be updating the same table.

Not having a great knowledge of Objective C - I was wondering if I could construct my SQL statement using the variables I grabbed from the above array/dictionary? Something like:

```
NSString *insertQuery = @"INSERT INTO my_table (name, city, phone){[name],[city],[phone]}"; 
```

or in the case of an update...

```
NSString *insertQuery = @"UPDATE my_table SET city=[city], phone=[phone] WHERE name=Mike"; 
```

I'm thinking that in scenario's where I would have multiple updates to make, I could create a CRUD Object (of sorts) containing (transaction related) CRUD records/variables e.g. a DELETE Object containing all the records I would like to delete from my DB, or an UPDATE Object containing all the records/values I wanted to update.

Does this all make sense? Am I going about this the right way? Or should I just put down what i'm smoking and get back to my day job?

Thanks in advance Vortex

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:55:35.260

您可以`sqlite3_prepare_v2`用来准备稍后执行的语句

例如

```
//Set ? for variables
const char *sql = "INSERT INTO my_table (name, city, phone){?,?,?}";
sqlite3_stmt *statement;
int returnValue = sqlite3_prepare_v2(database, sql, -1, &statment, NULL); 
```

`sqlite3_bind_text`如果它们是文本，则用于设置值

```
sqlite3_bind_text(statement, 1, yourName, -1, SQLITE_TRANSIENT);
sqlite3_bind_text(statement, 2, yourCity, -1, SQLITE_TRANSIENT);
sqlite3_bind_text(statement, 3, yourPhone, -1, SQLITE_TRANSIENT); 
```

然后使用`sqlite3_step`执行，

您可以保存您的`statement`sql 以在其他时间执行它

# objective-c - presentPopoverFromRect 崩溃

> ID：11310205
> 
> 赞同：1
> 
> 时间：2012-07-03T11:44:33.097
> 
> 标签：objective-c, xcode4.2, uipopovercontroller

我有 UIButton 的子类

在 init 方法中，我将目标添加到按钮

```
[self addTarget:self action:@selector(openList:) forControlEvents:UIControlEventTouchUpInside]; 
```

在开放列表中

```
[listPopOver presentPopoverFromRect:self.frame
                          inView:self.superview
                          permittedArrowDirections:UIPopoverArrowDirectionUp
                          animated:YES]; 
```

但是在presentPopoverFromRect( `EXC_BAD_ACCESS`)上的应用

![在此处输入图像描述](../Images/c34c365e77ce32fbd0ab2cc9557ce57b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:49:32.573

错误：

```
UIPopoverController* pop = [[UIPopoverController alloc] initWithContentViewController:[[UIViewController alloc] init]];
    [pop presentPopoverFromRect:[tableView cellForRowAtIndexPath:indexPath].frame inView:tableView permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

没有错误：

```
@property (strong, nonatomic) UIPopoverController* pop;
@synthesize pop = _pop;

pop = [[UIPopoverController alloc] initWithContentViewController:[[UIViewController alloc] init]];
    [pop presentPopoverFromRect:[tableView cellForRowAtIndexPath:indexPath].frame inView:tableView permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T14:32:27.193

启用`NSZombie`以检查哪个确切的实例正在创建问题，表视图中似乎存在一些问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T11:53:17.750

```
 if(![listPopOver isPopoverVisible]){

    listPopOver = [[listPopOverViewController alloc] initWithNibName:@"listPopOverViewController" bundle:nil];
    listPopOver.viewDelegate=self;
    listPopOver = [[[UIPopoverController alloc] initWithContentViewController:PopOver] retain];
    [listPopOver setPopoverContentSize:CGSizeMake(670.0f, 380.0f)];
    permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
    [listPopOver presentPopoverFromRect:CGRectMake(50, 160, 670, 380) inView:self.view permittedArrowDirections:0
                                     animated:YES]; 
    }
else{

    [listPopOver dismissPopoverAnimated:YES];
} 
```

# java - Adding multiple icons with separate tooltips in JTable

> ID：11310208
> 
> 赞同：1
> 
> 时间：2012-07-03T11:44:42.153
> 
> 标签：java, swing, icons, jtable, tooltip

I need to show multiple icons in a single column in JTable. I am using an modified Icon implementation.

```
Class IconCollection implements Icon {
    Icon[] icons
} 
```

Since it implements Icon interface , I am able to show multiple icons in single column. However I need to assign separate tooltips for each icon. Since `JComponent` has single `setToolTipText()` method, it is not possible.

Any suggestions?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:19:57.370

由于对渲染器组件的委托`JTable`有一个不错的实现，`getTooltipText`因此您可以在渲染器中完全解决这个问题。

在该`getTableCellRendererComponent`方法中，您可以返回任何`JComponent`. 如果您选择`JPanel`包含多个图标实例，每个实例都有正确的工具提示（而不是您的大图标）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:50:54.920

您可以创建一个组件来包含您的图标和覆盖`getToolTipText(MouseEvent)`，基于鼠标的相对位置返回的文本。

# javascript - 如何使用 javascript 访问表单字段？

> ID：11310218
> 
> 赞同：1
> 
> 时间：2012-07-03T11:45:31.407
> 
> 标签：javascript, forms

```
<form name="myForm">
   <input type="text" name="f['cart']]['product_name']"/>
</form> 
```

如何使用 javascript 访问文本字段的值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T11:46:50.693

从表单集合中获取表单，然后从所述表单的元素集合中获取输入。

```
document.forms['myForm'].elements["f['cart']]['product_name']"] 
```

# android - Has anyone integrated twitter with the Android NDK

> ID：11310219
> 
> 赞同：1
> 
> 时间：2012-07-03T11:45:32.537
> 
> 标签：android, android-ndk, twitter

I am a bit stumped as to my approach here.

I have an OpenGLES application written using NDKr8 using ANativeActivity and purely C++. Now i need to get Twitter and the OAuth api integrated. I cant use the C++ library as the support for cURL isn't there. I am considering using JNI and the Twitter4J library but was wondering if anyone else has tried a different approach.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:44:54.677

好吧，作为对维克托和我自己的回应……

我使用 JNI 调用来回调 java，并使用 Twitter4J 完成。在移动到 nw 活动时，我在确保处理的统计信息和保留上下文方面获得了一些乐趣，有关正确方法，请参阅 nvidia tegra 文档。

请注意，您可以使用“clazz”成员启动新活动并将其转换为 JObject，然后使用 JNI 将其传递回 Java 类。感谢 android-ndk 邮件列表提供一些有用的建议。

# image - Why am I getting the error: "Not a JPEG file: starts with 0x89 0x50"

> ID：11310220
> 
> 赞同：101
> 
> 时间：2012-07-03T11:45:35.717
> 
> 标签：image, png, jpeg, corruption

Why am I getting the message "Not a JPEG file: starts with 0x89 0x50" when I try to open my jpg file?

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-07-03T11:45:36.200

The file is actually a PNG with the wrong file extension. "0x89 0x50" is how a PNG file starts.

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2012-07-03T11:49:06.660

您的文件不是 JPEG 文件，它只是在途中从 PNG 重命名为 JPEG。某些程序会将其作为可识别的文件扩展名打开并从前缀推断类型，但显然不是您正在使用的类型。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-11-27T05:03:24.027

您的“JPEG”文件的文件扩展名为“jpg”或“jpeg”错误，它的真实类型很可能是 PNG 文件。

只需尝试将文件名从“xxx.jpg”或“xxx.jpeg”重命名为“xxx.png”。

在大多数情况下，程序为了方便区分文件类型和[文件扩展名](https://en.wikipedia.org/wiki/Filename_extension)，但是，如果我们为其他格式的文件（如 PNG 文件）指定了错误的文件扩展名（如 'jpg'），程序仍会尝试加载带有 JPG 库的 PNG 文件，肯定会向用户抛出错误。

实际上，不同类型的文件总是有不同的文件头（前 1024 字节）

这是在类 Unix 平台上检查文件真实类型的快速方法：

使用“文件”命令，例如：

```
file e3f8794a5c226d4.jpg 
```

输出是

```
e3f8794a5c226d4.jpg: PNG image data, 3768 x 2640, 8-bit/color RGBA, non-interlaced 
```

这将打印文件信息详细信息，我们还可以检查指定文件是否已被破坏。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2017-11-27T16:09:40.667

只需将 *.jpg 重命名为 *.png。或者在浏览器中打开这个文件

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-05-17T13:34:57.790

这是当您尝试使用使用 libjpeg 打开 jpeg 文件的 JPEG 文件查看器打开 PNG 文件时的错误响应。如前面的答案所述，您的文件已从 png 重命名为 JPEG。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-04-15T23:19:13.103

这是 Mohit 脚本的修改版本。它不是删除错误命名的文件，而是非破坏性地重命名它们。

它还将 os.system() 调用换成子进程调用，这解决了文件名中引号的转义问题。

```
import glob
import subprocess
import os
import re
import logging
import traceback

filelist=glob.glob("/path/to/*.jpg")
for file_obj in filelist:
    try:
        jpg_str = subprocess.check_output(['file', file_obj]).decode()
        if (re.search('PNG image data', jpg_str, re.IGNORECASE)) or (re.search('Png patch', jpg_str, re.IGNORECASE)): 

            old_path = os.path.splitext(file_obj)
            if not os.path.isfile(old_path[0]+'.png'):
                new_file = old_path[0]+'.png'
            elif not os.path.isfile(file_obj+'.png'):
                new_file = file_obj+'.png'
            else:
                print("Found PNG hiding as JPEG but couldn't rename:", file_obj)
                continue

            print("Found PNG hiding as JPEG, renaming:", file_obj, '->', new_file)
            subprocess.run(['mv', file_obj, new_file])

    except Exception as e:
        logging.error(traceback.format_exc()) 

print("Cleaning JPEGs done") 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-10-23T08:58:08.957

这是一个 python 脚本，用于识别目录中的那些故障 jpg 图像。

```
import glob 
import os 
import re 
import logging 
import traceback

filelist=glob.glob("/path/to/*.jpg")
for file_obj in filelist:
  try:

        jpg_str=os.popen("file \""+str(file_obj)+"\"").read()
        if (re.search('PNG image data', jpg_str, re.IGNORECASE)) or (re.search('Png patch', jpg_str, re.IGNORECASE)):
            print("Deleting jpg as it contains png encoding - "+str(file_obj))
            os.system("rm \""+str(file_obj)+"\"")
  except Exception as e:
    logging.error(traceback.format_exc())
print("Cleaning jps done") 
```

# objective-c - 注释在 MapKit 和 iOS 上不显示标题/副标题

> ID：11310224
> 
> 赞同：0
> 
> 时间：2012-07-03T11:45:40.583
> 
> 标签：objective-c, ios, annotations, mapkit

我正在解析一些具有一些兴趣点的数据，并尝试使用 MapKit 框架在地图上显示它们。我在地图上为我的对象创建了一个自定义类，我称之为 MyLocation。

我的位置.h：

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

@interface MyLocation : NSObject <MKAnnotation> {
    NSString *_name;
    NSString *_address;
    NSInteger _eventId;
    CLLocationCoordinate2D _coordinate;
    NSString *title;
    NSString *subtitle;

}

@property (nonatomic , copy) NSString *name;
@property (nonatomic , copy) NSString *address;
@property (nonatomic, assign) NSInteger eventId;
@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;
@property (nonatomic, copy) NSString *title;
@property (nonatomic, copy) NSString *subtitle;

- (id)initWithName:(NSString*)name address:(NSString*)address coordinate:(CLLocationCoordinate2D)coordinate;

@end 
```

我的位置.m：

```
#import "MyLocation.h"

@implementation MyLocation
@synthesize name = _name;
@synthesize eventId=_eventId;
@synthesize address = _address;
@synthesize coordinate = _coordinate;
@synthesize title;
@synthesize subtitle;

- (id)initWithName:(NSString*)name address:(NSString*)address coordinate:(CLLocationCoordinate2D)coordinate {
    if ((self = [super init])) {
        _name= [name copy];
        _address = [address copy];
        _coordinate = coordinate;
    }
    return self;
}

- (NSString *)title {
    if ([_name isKindOfClass:[NSNull class]]) {
        NSLog(@"11111111");
        return @"Unknown charge";
    }
    else{
        NSLog(@"222222");
        return _name;

    }
}

- (NSString *)subtitle {
    NSLog(@"HAHAHAHAA");
    return _address;
}

@end 
```

然后在我的viewController上我这样做：

```
//showing on map the points of interests that are stored on "eventList"
int i=0;
for (parsedItem *event in self.eventsList) {
    CLLocationCoordinate2D coordinate;
    coordinate.latitude = event.latitude;
    coordinate.longitude = event.longitude;
    if(i==0){
        //numbers show map zoom. 500,500 = map stretches 500 meters to the North and the South of current location
        MKCoordinateRegion region =
        MKCoordinateRegionMakeWithDistance (coordinate,1000,1000);
        [mapView setRegion:region animated:NO];
    }
    MyLocation *eventAnnotation = [[MyLocation alloc] initWithName:event.typeEvent address:event.titleEvent coordinate:coordinate] ;        
    eventAnnotation.name = event.typeEvent;
    eventAnnotation.address = event.titleEvent;
    eventAnnotation.eventId = i;
    i++;        
    [mapView addAnnotation:eventAnnotation];
} 
```

后来我使用更多代码为注释提供图像，并且所有内容都显示在地图上，但是如果我单击注释，我看不到带有标题和副标题的窗口。我只看到注释，但没有看到单击它们时应该获得的额外信息。

我猜这行代码有问题：

```
MyLocation *eventAnnotation = [[MyLocation alloc] initWithName:event.typeEvent address:event.titleEvent coordinate:coordinate] ; 
```

有任何想法吗？

## 编辑

只是补充一点，我也使用这个功能：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView2 viewForAnnotation:(id <MKAnnotation>)annotation {

    static NSString *identifier = @"MyLocation";   
    if ([annotation isKindOfClass:[MyLocation class]]) {
        NSLog(@"I got into the class!!!");
        MKPinAnnotationView *annotationView = (MKPinAnnotationView *) [mapView dequeueReusableAnnotationViewWithIdentifier:identifier];
        if (annotationView == nil) {
            annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:identifier];
        } else {
            annotationView.annotation = annotation;
        }

        annotationView.enabled = YES;
        annotationView.canShowCallout = YES;
        MyLocation *eventAnnotation=annotation;

        if ([eventAnnotation.address isEqualToString: @"Culture_07/02/2012"]) {
            NSLog(@"Mphkeeee");
            annotationView.image=[UIImage imageNamed:@"culture.png"];
            //annotation.title = @"Holla!";
        } else if ([eventAnnotation.address isEqualToString: @"Sports_06/29/2012"]) {
            annotationView.image=[UIImage imageNamed:@"sports.png"];
        } else if ([eventAnnotation.address isEqualToString: @"Accident_06/29/2012"]) {
            annotationView.image=[UIImage imageNamed:@"accident.png"];
        } else if ([eventAnnotation.address isEqualToString: @"Problem_06/29/2012"]) {
            annotationView.image=[UIImage imageNamed:@"problem.png"];
        } else if ([eventAnnotation.address isEqualToString: @"Traffic_07/02/2012"]) {
            annotationView.image=[UIImage imageNamed:@"traffic.png"];
        } else if ([eventAnnotation.address isEqualToString: @"Music_06/29/2012"]) {
            annotationView.image=[UIImage imageNamed:@"music.png"];
        } 

        return annotationView;

    }

    return nil;    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:36:07.683

为 and使用自定义 getter 方法`title`而`subtitle`不是显式设置这些属性对于地图视图来说很好。

您的标注未显示的原因是因为`title`（正在返回`_name`- 设置为`event.typeEvent`）正在返回一个`nil`或空字符串。

您的 getter 方法正在检查是否`_name`是类型`NSNull`，但它可能是`NSString`并且仍然是`nil`或空字符串。

当`title`is`nil`或空字符串时，注释将不会显示标注（即使`canShowCallout`设置为`YES`并且即使`subtitle`返回非空值）。

所以很可能是`typeEvent`is`nil`或空字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:16:05.357

查看您的代码，您实际上从未设置`title`or`subtitle`属性。在您设置标题的地方，执行以下操作：

```
eventAnnotation.title = event.typeEvent;
eventAnnotation.subtitle = event.titleEvent; 
```

并确保您在文件中设置了`title`和属性。`subtitle``.h`

**编辑：**这是我的一个注释的标题：

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

@interface MapmarkAnnotation : NSObject
<MKAnnotation>
{
    NSString *title;
    CLLocationCoordinate2D coordinate;
}

@property (nonatomic, copy) NSString *title;
@property (nonatomic, readwrite) CLLocationCoordinate2D coordinate;

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T13:53:39.127

请参阅[Apple](http://developer.apple.com/library/ios/#DOCUMENTATION/MapKit/Reference/MKAnnotation_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/MKAnnotation/title)文档。您需要自己设置注释对象的标题和副标题。而不是像 _address 这样的其他属性。该文档中还有 2 个示例项目，也请查看它们。

# jpa-2.0 - JPA，带外键的复合键 + 持久化 oneToMany

> ID：11310225
> 
> 赞同：2
> 
> 时间：2012-07-03T11:45:44.087
> 
> 标签：jpa-2.0, eclipselink, java-ee-6

我正在尝试用 JPA 做一些在项目中会用到很多的东西，但我被卡住了。

我有 2 个实体 + 一种“胶水”实体，我会称它们为

*   A类
*   B类
*   胶水

我想添加一个新的 ClassA，在它的列表中设置了新的 Glues，ClassB 已经存在。

那会做类似的事情：

```
A 类 1 | 胶水 1 1 | B 类 1
A 类 1 | 胶水 1 2 | B 级 2
A 类 1 | 胶水 1 3 | B 级 3
A 类 1 | 胶水 1 4 | B 级 4

```

因此，正如要插入的 ClassA 和所有 Glues 一样，ClassA 有一个列表，其中包含要插入的新 Glues。

他们来了 ：

```
@Entity
public class ClassA implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Integer id;

    (...)

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "classA")
    private List<Glue> glueList;

    (...)
}

@Entity
public class ClassB implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Integer id;

    (...)
}

@Entity
public class Glue implements Serializable {

    @EmbeddedId
    protected GluePK gluePK;

    @JoinColumn(name = "id_class_a", referencedColumnName = "id", nullable = false, insertable = false, updatable = false)
    @ManyToOne(optional = false)
    private ClassA classA;

    @JoinColumn(name = "id_class_b", referencedColumnName = "id", nullable = false, insertable = false, updatable = false)
    @ManyToOne(optional = false)
    private ClassB classB;

    (...)
}

@Embeddable
public class GluePK implements Serializable {

    @Basic(optional = false)
    @NotNull
    @Column(name = "id_class_a", nullable = false)
    private int idClassA;

    @Basic(optional = false)
    @NotNull
    @Column(name = "id_class_b", nullable = false)
    private int idClassB;

    (...)
} 
```

当我尝试坚持我的 ClassA 时，我得到了类似的东西：

com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException：无法添加或更新子行：外键约束失败（`bdd`. `glue`, CONSTRAINT `constraint_name`FOREIGN KEY ( `id_class_a`) REFERENCES `ClassA`( `id`) ON DELETE NO ACTION ON UPDATE NO ACTION）

我知道他抱怨 Glues 没有 ClassA 的参考集，但我希望他在他坚持 ClassA 时填写它。

这是可以实现的吗？如果不是最好的方法是什么？

我想在没有任何特定供应商技巧的情况下继续使用 JPA（我正在使用 eclipselink），但如果某些供应商可以轻松做到这一点，我会去做。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T13:21:36.033

我会删除 EmbeddedId，改用 IdClass，然后将 @Id 添加到 @ManyToOne 映射。

见， [http ://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#JPA_2.0](http://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#JPA_2.0)

或者甚至可以给 Glue 一个自己的 id。

您还可以从 @ManyToOne 中删除 insertable = false, updatable = false 并将它们移动到 EmbeddedId。

# actionscript-3 - User Agent is not accessible in Internet Explorer 8 using ActionScript 3

> ID：11310227
> 
> 赞同：1
> 
> 时间：2012-07-03T11:46:00.580
> 
> 标签：actionscript-3, internet-explorer-8, flash-builder, user-agent, externalinterface

I am using the code below to find the User Agent using ActionScript 3:

```
var userAgent:String = ExternalInterface.call("navigator.userAgent.toString"); 
```

The code is working in Firefox 13, Google Chrome & Opera, but the User Agent value as null in IE8.

Is there any code snippet that will work here or any other way to implement this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:49:14.723

`toString`是不必要的，因为 userAgent 是一个字符串属性。请改用此语法：

```
var userAgent:String = ExternalInterface.call("function(){return navigator.userAgent}") 
```

# nosql - neo4j - graph database along with a relational database?

> ID：11310229
> 
> 赞同：8
> 
> 时间：2012-07-03T11:46:01.917
> 
> 标签：nosql, rdbms, neo4j, graph-databases

this is a question on best practice, i understand that there are a lot of different options for doing this, but i would like your opinions as to how you would approach solving this problem. Please take it as though performance is critical in this system, in other words scalable.

I have recently found the wonders of graph database, so i came up with a theoretical situation where a company wants to manage it's customers relationships, and in order to do so they are going to use neo4j which is great, and allows for really great management of the customers, different staff members and their relationships, which is all great, however the company now wants to create a web based interface which will need authentication, and anyone in the neo4j database should be able to login to the system in order to see how they are related to other people in the company's database, so each user must have a password/email/id associated with their name.

So my question is, in this case scenario, is it best to store the password_hash/password_salt/id/email in a mysql database and then based on the node look it up on the mysql database. Or is it better to store the password_hash/password_salt/id/email in the hash tables inside the nodes.

Also each store has 1000s of products, and they can be stored in the graph database or i can store the products in the mysql database and then look up the product there, and do the changes there, because the products are not related to each other, so no point in storing them in the graph database, so should they be not stored there to improve performance?

So my question boils down to this: is it best for large projects to use a graph database along with the more common rdms database such as mysql? if not, then what is the point at which you start to use these two database systems?

apologies in advance for my lack of knowledge regarding database terminology.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-01-03T17:51:37.617

Graph DB 主要用于维护关系。如果应用程序有一个图形数据库，这并不意味着该应用程序需要将所有内容存储在图形数据库中。

Graph 上的每个节点请求都在内存中，因此如果您的节点中有不必要的属性，它将变得臃肿，并且可能会使事情变慢并占用更多内存。我通常决定什么需要进入图表，什么需要进入 DB简单的规则。

**高级属性（定义关系和定义节点的其他重要属性）进入图形，而附加信息进入 RDMS。**

例如，在 FB 中可能是 FBID，名称在 Graph 中，因为它定义了一个节点与另一个节点的关系。但是当用户点击某人的 Facebook ID 时，他/她会看到其他用户的出生日期、年龄、大学。所有这些都可以进入 RDBMS。

PS：RDMS还有一个优势，可以用来做快速分析。我知道图形也可以做到这一点，但我不确定它是否像 RDBMS 一样可扩展和简单。

这种方法的缺点是：你需要维护两个DBS。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T09:52:00.893

除非您有一个经过验证的双数据库解决方案案例，否则我会说更少的移动部件会让您更敏捷，更能够快速改变事物。如果稍后您发现一个难以使用的用例，请权衡引入第二个存储的成本/收益。双数据库架构并非闻所未闻，但会带来开销。

具体到安全性，Neo4j 或任何其他合理的 NOSQL 解决方案没有理由不能做到这一点：[http ://spring.neo4j.org/docs#tutorial_security](http://spring.neo4j.org/docs#tutorial_security)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T00:27:38.607

如果存在将数据存储在诸如 neo4j/orientDB 之类的图形数据库中没有多大意义的数据，则应该同时使用两者（与关系数据库相比，有些数据在图形数据库中会更好）。在一个平台上强制数据可能会导致性能/可扩展性问题。

# java - What happens after onDestroy()

> ID：11310231
> 
> 赞同：2
> 
> 时间：2012-07-03T11:46:03.340
> 
> 标签：java, android, android-lifecycle

When my activity is destroyed by OS because of memory (for example when a phone call is interrupting it), then when my activity tries to start again, it doesn't come back to any expected call back except onDestroy(), how can I restore my activity again.

Note: - it doesn't go back to neither onCreate() nor onRestoreInstanceState(). - my activity contains a thread.

Edit: isFinishing() returns false at onPause() (before interruption) and it returns true at onDestroy() when come back again (after interruption is gone).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T11:49:34.853

您应该覆盖 onPause() 和 onResume() 方法。

当电话或其他事件中断您的活动执行时，将调用 onPause()。

然后，当您的活动再次进行时，将执行 onResume。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:35:02.857

我的程序只需要将我的活动的“无历史记录”选项设置为“假”

> *   在清单，应用程序，应用程序节点，然后选择我的活动-

之后我发现当尝试再次回到我的活动时它不会调用 onDestroy() ，它会按预期调用 onResume() 。并将“配置更改”设置为“方向”。

# ios - Launch an iPhone app in an international market

> ID：11310233
> 
> 赞同：-3
> 
> 时间：2012-07-03T11:46:09.047
> 
> 标签：ios, app-store

I´m planning to launch an app for the iPhone. I wonder if there is a way to launch the app, country by country? For example, if I first begin with the Norwegian market and after 4 four weeks I launch the app in the US. If this is possible, how can I do this step by step?

And also if the mentioned procedure above is possible, will the app appear in some kind of “new releases” in the App store, every time I add a new country?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T11:51:12.593

当您转到 iTunes Connect、权利和定价小节中的“管理您的应用程序”部分时，您有机会选择您的应用程序可用的市场（点击“特定商店”链接）。

因此，您可以先在挪威市场上销售它，然后在稍后添加另一个，等等，只需去那里并添加更多市场。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:50:55.877

每个国家都有自己的 AppStore，确实可以在每个国家的 AppStore 中添加和删除应用程序。

对于新版本，每个国家/地区新发布的应用只会出现在您实际发布的国家/地区的新版本列表中。

# .net - Grouping while preserving ordering in Linq

> ID：11310237
> 
> 赞同：5
> 
> 时间：2012-07-03T11:46:27.867
> 
> 标签：.net, linq, group-by

I've got an `IQueryable(Of Job)` where Job has, amongst other things:

```
Property CreatedOn as DateTime
Property JobType as JobTypes

Enum JobTypes
    JobType1
    JobType2
    JobType3
End Enum 
```

What I want to get out of it is a list, ordered by `CreatedOn`, then Grouped by `JobType` with a count

Eg Say i've got (abbreviated dates)

```
11:00  JobType1
11:01  JobType2
11:02  JobType2
11:03  JobType2
11:04  JobType2
11:05  JobType3
11:06  JobType1
11:07  JobType1 
```

I want

```
JobType1 1
JobType2 4
JobType3 1
JobType1 2 
```

I don't know how to take ordering into account when grouping. can someone point me at the right way to do this? By preference, I'd prefer fluent Syntax. VB.Net or C# is fine.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:37:10.827

这个技巧很容易训练 LinqToObjects 来做：

```
public static IEnumerable<IGrouping<TKey, TSource>> GroupContiguous<TKey, TSource>(
  this IEnumerable<TSource> source,
  Func<TSource, TKey> keySelector)
{
  bool firstIteration = true;
  MyCustomGroupImplementation<TKey, TSource> currentGroup = null;

  foreach (TSource item in source)
  {
    TKey key = keySelector(item);
    if (firstIteration)
    {
      currentGroup = new MyCustomGroupImplementation<TKey, TSource>();
      currentGroup.Key = key;
      firstIteration = false;
    }
    else if (!key.Equals(currentGroup.Key))
    {
      yield return currentGroup;
      currentGroup = new MyCustomGroupImplementation<TKey, TSource>();
      currentGroup.Key = key;
    }
    currentGroup.Add(item);
  }
  if (currentGroup != null)
  {
    yield return currentGroup;
  }
}

public class MyCustomGroupImplementation<TKey, TSource> : IGrouping<TKey, TSource>
{
  //TODO implement IGrouping and Add
} 
```

使用者

```
IEnumerable<IGrouping<JobType, Job> query = Jobs
  .OrderBy(j => j.CreatedOn)
  .GroupContiguous(j => j.JobType); 
```

* * *

仅使用任何旧的 linq 提供程序来“查看前一行”并不容易。我希望你不必教 LinqToSql 或 LinqToEntities 如何做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T12:45:26.617

这是使用该方法的合理`Aggregrate`方法。

如果你从`JobTypes`这样的列表开始：

```
var jobTypes = new []
{
    JobTypes.JobType1,
    JobTypes.JobType2,
    JobTypes.JobType2,
    JobTypes.JobType2,
    JobTypes.JobType2,
    JobTypes.JobType3,
    JobTypes.JobType1,
    JobTypes.JobType1,
}; 
```

您可以`Aggregate`通过首先定义累加器来使用，如下所示：

```
var accumulator = new List<KeyValuePair<JobTypes, int>>()
{
    new KeyValuePair<JobTypes, int>(jobTypes.First(), 0),
}; 
```

然后`Aggregate`方法调用如下所示：

```
var results = jobTypes.Aggregate(accumulator, (a, x) =>
{
    if (a.Last().Key == x)
    {
        a[a.Count - 1] =
            new KeyValuePair<JobTypes, int>(x, a.Last().Value + 1);
    }
    else
    {
        a.Add(new KeyValuePair<JobTypes, int>(x, 1));
    }
    return a;
}); 
```

最后调用它会给你这个结果：

![工作类型结果](../Images/feeb2f86ed80eebea16458b621aa7b83.png)

很简单，有点...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T13:51:34.810

这个更新版本使用一个子程序来做和以前一样的事情，但不需要额外的内部字段。（我保留了我的早期版本，为了避免使用`Zip`例程，需要额外的`OrDer`字段。）

```
Option Explicit On
Option Strict On
Option Infer On
Imports so11310237.JobTypes
Module so11310237
 Enum JobTypes
  JobType1
  JobType2
  JobType3
 End Enum
Sub Main()
 Dim data = {New With{.CO=#11:00#, .JT=JobType1, .OD=0},
  New With{.CO=#11:03#, .JT=JobType2, .OD=0},
  New With{.CO=#11:05#, .JT=JobType3, .OD=0},
  New With{.CO=#11:02#, .JT=JobType2, .OD=0},
  New With{.CO=#11:06#, .JT=JobType1, .OD=0},
  New With{.CO=#11:01#, .JT=JobType2, .OD=0},
  New With{.CO=#11:04#, .JT=JobType2, .OD=0},
  New With{.CO=#11:07#, .JT=JobType1, .OD=0}}

 ' Check that there's any data to process
 If Not data.Any Then Exit Sub

 ' Both versions include a normal ordering first.
 Dim odata = From q In data Order By q.CO

 ' First version here (and variables reused below):

 Dim ljt = odata.First.JT

 Dim c = 0
 For Each o In odata
  If ljt <> o.JT Then
   ljt = o.JT
   c += 1
  End If
  o.OD = c
 Next

 For Each p In From q In data Group By r=q.JT, d=q.OD Into Count()
  Console.WriteLine(p)
 Next

 Console.WriteLine()

 ' New version from here:

 ' Reset variables (still needed :-()
 ljt = odata.First.JT
 c = 0 
 For Each p In From q In odata Group By r=q.JT, d=IncIfNotEqual(c,q.JT,ljt) Into Count()
  Console.WriteLine(p)
 Next

End Sub

Function IncIfNotEqual(Of T)(ByRef c As Integer, ByVal Value As T, ByRef Cmp As T) As Integer
 If Not Object.Equals(Value, Cmp) Then
  Cmp = Value
  c += 1
 End If
 Return c 
End Function

End Module 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T08:41:38.783

林克答案

```
public enum JobTypes
{
    JobType1,
    JobType2,
    JobType3
}

static void Main(string[] args)
{
    var collection = new[]
    {
        new {JobType = JobTypes.JobType1, CreatedOn = DateTime.Now},
        new {JobType = JobTypes.JobType2, CreatedOn = DateTime.Now.AddSeconds(1)},
        new {JobType = JobTypes.JobType2, CreatedOn = DateTime.Now.AddSeconds(2)},
        new {JobType = JobTypes.JobType2, CreatedOn = DateTime.Now.AddSeconds(3)},
        new {JobType = JobTypes.JobType2, CreatedOn = DateTime.Now.AddSeconds(4)},
        new {JobType = JobTypes.JobType3, CreatedOn = DateTime.Now.AddSeconds(5)},
        new {JobType = JobTypes.JobType1, CreatedOn = DateTime.Now.AddSeconds(7)},
        new {JobType = JobTypes.JobType1, CreatedOn = DateTime.Now.AddSeconds(8)}
    };

    var orderedCollection = collection.OrderBy(job => job.CreatedOn);
    var temp = orderedCollection.First().JobType;
    var identifier = 0;
    var summary = orderedCollection.Select(job =>
    {
        if (job.JobType == temp)
        {
            return new { JobType = job.JobType, Id = identifier };
        }

        temp = job.JobType;
        return new { JobType = job.JobType, Id = ++identifier };
    }).GroupBy(job => new { job.JobType, job.Id }).Select(job => new { JobType = job.Key.JobType, Count = job.Count() });

    foreach (var sum in summary)
    {
        Console.WriteLine("JobType: {0}, Count: {1}", sum.JobType, sum.Count);
    }

    Console.ReadLine();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-03T12:48:14.700

非 Linq 答案

给定

```
public enum JobTypes
{
    JobType1,
    JobType2,
    JobType3
}

public class Job
{
    public JobTypes JobType { get; set; }
    public DateTime CreatedOn { get; set; }
}

public class JobSummary
{
    public JobSummary(JobTypes jobType, long count)
    {
        this.JobType = jobType;
        this.Count = count;
    }

    public JobTypes JobType { get; set; }
    public long Count { get; set; }
} 
```

那么你可以

```
private List<JobSummary> GetOrderedSummary(List<Job> collection)
{
    var result = new List<JobSummary>();
    if (!collection.Any())
    {
        return result;
    }
    var orderedCollection = collection.OrderBy(j => j.CreatedOn);
    var temp = orderedCollection.First();
    var count = 1;

    foreach (var job in orderedCollection.Skip(1))
    {
        if (temp.JobType == job.JobType)
        {
            count++;
            continue;
        }

        result.Add(new JobSummary(temp.JobType, count));
        temp = job;
        count = 1;
    }

    result.Add(new JobSummary(temp.JobType, count));

    return result;
} 
```

使用

```
private void DoSomething()
{
    var collection = new List<Job>
    {
        new Job{JobType = JobTypes.JobType1, CreatedOn = DateTime.Now},
        new Job{JobType = JobTypes.JobType2, CreatedOn = DateTime.Now.AddSeconds(1)},
        new Job{JobType = JobTypes.JobType2, CreatedOn = DateTime.Now.AddSeconds(2)},
        new Job{JobType = JobTypes.JobType2, CreatedOn = DateTime.Now.AddSeconds(3)},
        new Job{JobType = JobTypes.JobType2, CreatedOn = DateTime.Now.AddSeconds(4)},
        new Job{JobType = JobTypes.JobType3, CreatedOn = DateTime.Now.AddSeconds(5)},
        new Job{JobType = JobTypes.JobType3, CreatedOn = DateTime.Now.AddSeconds(6)},
        new Job{JobType = JobTypes.JobType1, CreatedOn = DateTime.Now.AddSeconds(7)},
        new Job{JobType = JobTypes.JobType1, CreatedOn = DateTime.Now.AddSeconds(8)},
    };

    var summary = GetOrderedSummary(collection);

} 
```

# facebook - App user data and @facebook.com email addresses

> ID：11310240
> 
> 赞同：1
> 
> 时间：2012-07-03T11:46:36.153
> 
> 标签：facebook, email, messages, user-permissions

My app collects users' basic information only as part of authentication (i.e. no extended permissions, and this data collection is non-revocable and can't be skipped), and as part of that authentication it will collect users' primary email addresses.

Since Facebook rolled out @facebook.com email addresses for all users, and set those as the default address published on users' pages, does this mean that the @facebook.com email addresses are now the primary email addresses for almost all users, and that my app will now collect the @facebook.com email address? Or will it still collect the email address provided by users when they signed-up to Facebook?

# node.js - Jade nodejs "no tag prefix"

> ID：11310241
> 
> 赞同：4
> 
> 时间：2012-07-03T11:46:39.757
> 
> 标签：node.js, pug

The documentation for Jade mentions a "no tag prefix", but I can't find what it is.

This means, as I see it, just plain text with no wrapping tag.

Suggestions?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T12:48:22.220

```
b bold
| plain 
```

输出

```
<b>bold</b>plain 
```

# asp.net - Assigning variables in SQL Query c#

> ID：11310246
> 
> 赞同：0
> 
> 时间：2012-07-03T11:47:02.447
> 
> 标签：asp.net, sql, razor, sql-parametrized-query

How do i assign variable cats so that it pulls the rows in database which we specify in cat variable ? I did query like below but doesn't work. Thanks

```
var cats = "white";
var selectCommand = "SELECT TOP(10) * FROM mytable WHERE parent = @cats"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T11:53:02.383

也许你期待这样的事情

```
var selectCommand = "SELECT TOP(10) * FROM mytable WHERE parent = @cats";
var cmd= new SqlCommand(selectCommand, yourconnetion);

cmd.Parameters["@cats"].Value = "white"; 
```

或者

```
cmd.Parameters.AddWithValue("@cats","white"); 
```

# python - Find number of columns in csv file

> ID：11310248
> 
> 赞同：33
> 
> 时间：2012-07-03T11:47:05.560
> 
> 标签：python, csv

My program needs to read csv files which may have 1,2 or 3 columns, and it needs to modify its behaviour accordingly. Is there a simple way to check the number of columns without "consuming" a row before the iterator runs? The following code is the most elegant I could manage, but I would prefer to run the check before the for loop starts:

```
import csv
f = 'testfile.csv'
d = '\t'

reader = csv.reader(f,delimiter=d)
for row in reader:
    if reader.line_num == 1: fields = len(row)
    if len(row) != fields:
        raise CSVError("Number of fields should be %s: %s" % (fields,str(row)))
    if fields == 1:
        pass
    elif fields == 2:
        pass
    elif fields == 3:
        pass
    else:
        raise CSVError("Too many columns in input file.") 
```

**Edit:** I should have included more information about my data. If there is only one field, it must contain a name in scientific notation. If there are two fields, the first must contain a name, and the second a linking code. If there are three fields, the additional field contains a flag which specifies whether the name is currently valid. Therefore if any row has 1, 2 or 3 columns, all must have the same.

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-03T11:52:07.037

您可以使用[itertools.tee](http://docs.python.org/library/itertools.html#itertools.tee)

> itertools.tee(iterable[, n=2])
> 从单个可迭代对象中返回 n 个独立的迭代器。

例如。

```
reader1, reader2 = itertools.tee(csv.reader(f, delimiter=d))
columns = len(next(reader1))
del reader1
for row in reader2:
    ... 
```

请注意，删除`reader1`完成后的引用很重要 - 否则`tee`必须将所有行存储在内存中，以防您`next(reader1)`再次调用

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-07-03T12:06:40.347

这似乎也有效：

```
import csv

datafilename = 'testfile.csv'
d = '\t'
f = open(datafilename,'r')

reader = csv.reader(f,delimiter=d)
ncol = len(next(reader)) # Read first line and count columns
f.seek(0)              # go back to beginning of file
for row in reader:
    pass #do stuff 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-03T11:52:47.430

如果用户向您提供列数较少的 CSV 文件会怎样？是否使用默认值？

如果是这样，为什么不用空值来扩展行呢？

```
reader = csv.reader(f,delimiter=d)
for row in reader:
    row += [None] * (3 - len(row))
    try:
        foo, bar, baz = row
    except ValueError:
        # Too many values to unpack: too many columns in the CSV
        raise CSVError("Too many columns in input file.") 
```

现在 bar 和 baz 至少会是`None`，异常处理程序将处理任何超过 3 个项目的行。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-06-21T01:28:54.390

我会建议这样一个简单的方法：

```
with open('./testfile.csv', 'r') as csv:
     first_line = csv.readline()
     your_data = csv.readlines()

ncol = first_line.count(',') + 1 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-03T12:09:29.193

我将按如下方式重建它（如果文件不是太大）：

```
import csv
f = 'testfile.csv'
d = '\t'

reader = list(csv.reader(f,delimiter=d))
fields = len( reader[0] )
for row in reader:
    if fields == 1:
        pass
    elif fields == 2:
        pass
    elif fields == 3:
        pass
    else:
        raise CSVError("Too many columns in input file.") 
```

# c++ - multimap::erase() 标准行为？

> ID：11310252
> 
> 赞同：0
> 
> 时间：2012-07-03T11:47:27.610
> 
> 标签：c++, iterator, std, multimap

我一直在比较`multimap::erase`函数的文档。查看 Josuttis 和[cplusplus.com](http://www.cplusplus.com/reference/stl/multimap/erase/)后，看起来好像存在三个重载：

```
void erase(iterator position);
size_type erase(const key_type& x);
void erase(iterator first, iterator last); 
```

但是，[MSDN 文档](http://msdn.microsoft.com/en-us/library/bb385782)似乎提出了三种略有不同的重载：

```
iterator erase(iterator where);
iterator erase(iterator first, iterator last);
bool erase(key_type key) 
```

**为什么会有差异？**我只是有点慢并查看了错误的文档，还是标准已经移动而我只是查看过时的文档？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T11:56:23.157

正确的重载是（来自[http://en.cppreference.com/w/cpp/container/multimap/erase](http://en.cppreference.com/w/cpp/container/multimap/erase)）：

```
void erase( iterator position );                                    (until C++11) 
iterator erase( const_iterator position );                          (since C++11)

void erase( iterator first, iterator last );                        (until C++11) 
iterator erase( const_iterator first, const_iterator last );        (since C++11)

size_type erase( const key_type& key ); 
```

cplusplus.com 文档已过时；Microsoft 文档完全不正确（可能从`map`文档中错误地复制了重载）；后来确实说第三种形式*返回了删除的元素数量的计数，*因此显然无法返回`bool`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T11:57:04.887

据此，[它](http://en.cppreference.com/w/cpp/container/multimap/erase)实际上取决于您的 STL 符合的标准版本。您在 MSDN 上读到的是 C++ 11，而在 cplusplus.com 上读到的是旧版 C++。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T11:57:10.527

来自 MSDN 的链接似乎记录了一个包装 STL 以在 CLR 中使用的库。第一个代码片段是正确的，与 C++03 标准中的相同，仅与 are 中的 C++11 标准`iterators`不同`const`。从C++11 标准的第*23.4.5.1 节类模板多映射概述：*

```
iterator erase(const_iterator position);
size_type erase(const key_type& x);
iterator erase(const_iterator first, const_iterator last); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T11:58:46.727

您链接到的 MSDN 文档是`STL/CLR`版本。这是用于 C++ 和 .NET Framework 公共语言运行时 (CLR) 的标准 C++ 库的子集。

正确的 MSDN C++ 文档`std::multimap::erase`在[这里](http://msdn.microsoft.com/en-us/library/c608hzw9.aspx)。

# bash - 嵌套for循环比较文件

> ID：11310253
> 
> 赞同：0
> 
> 时间：2012-07-03T11:47:28.373
> 
> 标签：bash, loops, grep

我正在尝试编写一个 bash 脚本来查看两个具有相同名称的文件，每个文件位于不同的目录中。

我知道这可以用 diff -r 来完成，但是，我想将第二个文件中不在第一个文件中的所有内容输出到一个新文件中（也具有相同的文件名）

我已经用 grep 命令编写了一个（嵌套）循环，但它并不好并且返回一个语法错误：

```
#!/bin/bash
FILES=/Path/dir1/*
FILES2=/Path/dir2/*

for f in $FILES
do
for i in $FILES2
do 
if $f = $i
grep -vf $i $f > /Path/dir3/$i

done
done 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:54:56.470

尝试这个

```
#!/bin/bash
cd /Path/dir1/
for f in *; do
    comm -13 <(sort $f) <(sort /Path/dir2/$f) > /Path/dir3/$f
done 
```

如果 shell 中的语法是

```
if test_command;then commands;fi 
```

如果 test_command 退出代码为 0，则执行命令

```
if [ $f = $i ] ; then  grep ... ; fi 
```

但在你的情况下，获取文件名会更有效

```
for i in $FILES; do
    f=/Path/dir2/`basename $i`
    grep
done 
```

最后，也许这会比 grep -v 更有效

```
comm -13 <(sort $f) <(sort $i) 
```

comm -13 将获得第二个而不是第一个的所有内容；不带参数的 comm 生成 3 列输出：第一列只在第一列，第二只在第二列，第三列是常见的。-13 或 -1 -3 删除第一列和第三列

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:55:47.110

```
#!/bin/bash
DIR1=/Path/dir1
DIR2=/Path/dir2
DIR3=/Path/dir3

for f in $DIR1/*
do
  for i in $DIR2/*
  do 
    if [ "$(basename $f)" = "$(basename $i)" ]
    then
      grep -vf "$i" "$f" > "$DIR3/$(basename $i)"
    fi
  done
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T12:09:55.743

这假定文件名中没有特殊字符。（例如，空格。如果不可接受，请使用双引号。）：

```
a=/path/dir1
b=/path/dir2
for i in $a/*; do test -e $b/${i##*/} && 
   diff $i $b/${i##*/} | sed -n '/^< /s///p'; done 
```

# android - 无法根据联系人姓名获取 uri

> ID：11310255
> 
> 赞同：0
> 
> 时间：2012-07-03T11:47:43.123
> 
> 标签：android, character, uri, spaces

我开始为 api 13 构建我的应用程序，因为我认为它对于大多数用户来说足够高效。但我将其更改为 api 10。然后以下代码停止工作`

```
 String empName=data.getStringExtra("name");
             String hourPay=data.getStringExtra("hourPay");
             String key="";
             String id=""; 

            Uri lookupUri = Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_FILTER_URI, empName);
            Cursor idCursor = getContentResolver().query(lookupUri, null, null, null, null);                

            idCursor.moveToFirst();
            id = idCursor.getString(idCursor.getColumnIndex(ContactsContract.Contacts._ID));
            key = idCursor.getString(idCursor.getColumnIndex(ContactsContract.Contacts.LOOKUP_KEY));` 
```

问题是它只适用于用英文写的联系人姓名或只有姓名（不是姓氏）的联系人姓名

例如：它适用于以下联系人：Express Service、George、Maria Mpakou、Σοφια、不区分语言

但是，当联系人是用我的语言（希腊语）编写的并且有空格（例如 Αιμιλιος Δημιος）时，它会返回带有超出范围的索引的下方光标。

当我第一次尝试 api 13 时，它就像一个魅力。顺便说一句，我的 Android.Manifest 有 utf-8 编码，如果这与它有关请任何建议都会有帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T07:15:00.677

经过大量搜索后，我终于用不同的方式做到了……比如向所有联系人询问 Sql 查询

这是代码：

```
String empName=data.getStringExtra("name");
Cursor idCursor = getContentResolver().query(                 
ContactsContract.Contacts.CONTENT_URI,null,Contacts.DISPLAY_NAME+" = '"+empName+"'", null, null); 
```

这就像一个魅力！

# java - Navigator 使用 struts2-jquery 标签添加 jqgrid 的选项？

> ID：11310257
> 
> 赞同：-1
> 
> 时间：2012-07-03T11:47:57.887
> 
> 标签：java, jquery, jqgrid, struts2, struts

我正在使用 jqgrid（struts2-jquery 标记）。在 sjg:grid 标记中导航器添加选项的默认参数是什么

我发现的一些选项是

```
navigatorAddOptions="{height:250,width:500,reloadAfterSubmit:true,afterSubmit:serverErrorCheck,addCaption:'Add Holiday',beforeSubmit:valSetup,beforeSubmitForm:callMe,closeAfterAdd:true}" 
```

Navigator Add 中的其他选项是什么？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:58:22.580

我认为这个[Jquery Grid wiki](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3anavigator)会有所帮助。

# jquery-mobile - 如何在 JQuery mobile 的第 2、3 等页面上加载 javascript 图表？

> ID：11310263
> 
> 赞同：0
> 
> 时间：2012-07-03T11:48:18.113
> 
> 标签：jquery-mobile

我对 JQuery Mobile 还是很陌生，现在我已经花了几天的时间来弄清楚一个看似简单的问题。

这是我的问题：我正在使用来自 Amcharts 的图表 javascript 库。到目前为止，一切顺利......我现在正在尝试的只是在 JQmobile 中创建一个简单的页面，假设有 2 个指向新页面的链接。我想要的只是当我单击链接时，amchart 应该以特定名称显示在 div 中。（Amcharts通常通过调用chart.write('nameofthediv');将图表显示在某个div中。

所以我认为绑定到 $('#container').bind('click', function(){...} 的事件处理程序应该能够包含相关的javascript ...

不知何故……它不起作用。

这是链接，因此您可以了解我的意思： [http ://www.noten-werkstatt.de/jqm_amcharts/](http://www.noten-werkstatt.de/jqm_amcharts/)

这是来自 index.html 和相关 custom-scripting.js 的代码。

非常感谢您！

问候，丽莎

索引.html

```
 <!DOCTYPE html> 
<html>
<head>
<meta charset="UTF-8">
<title>jQuery Mobile and Amcharts</title>

<link href="amcharts/style.css"  rel="stylesheet" type="text/css"> <!-- Amcharts CSS-File local -->
<link href="http://code.jquery.com/mobile/1.0a3/jquery.mobile-1.0a3.min.css" rel="stylesheet" type="text/css"/> <!-- JQ Mobile CSS-File (CDN) -->

<script src="amcharts/amcharts.js" type="text/javascript"></script> <!-- Amcharts JS-File local -->
<script src="http://code.jquery.com/jquery-1.5.min.js" type="text/javascript"></script> <!-- JQ JS-File (CDN) -->
<script src="http://code.jquery.com/mobile/1.0a3/jquery.mobile-1.0a3.min.js" type="text/javascript"></script> <!-- JQ Mobile JS-File (CDN) -->
<script src="custom-scripting.js" type="text/javascript"></script> <!-- Custom Scripting JS-File local -->

</head> 
<body> 

<!-- ****** START PAGE ************ -->
<div data-role="page" id="page">
    <div data-role="header">
        <h1>Main Page</h1>
    </div>
    <div data-role="content">   
        <ul data-role="listview">
            <li><a href="#page2" class="page2">Page two</a></li>
            <li><a href="#page3">Page three</a></li>
        </ul>      
    </div>
    <div id="chartserialdiv" style="height:500px !important; border: 1px solid;">It's odd...displaying the chart works here (div containr #chartserialdiv)...(Initialized in the window.onload = function() {})<br>But as I want to attach it to a click handler, please click "page two"...
    </div><br>
    <div data-role="footer">
        <h4>Footer</h4>
    </div>
</div>

<!-- ****** 2nd PAGE ************ -->
<div data-role="page" id="page2">
    <div data-role="header">
        <h1>Page two</h1>
    </div>
    <div data-role="content" id="test">  <!-- ****** DIV CONTAINER "TEST" ************ -->
        If the event handler worked, there must be text after the ":" :<br>      
    </div>
    <div data-role="content" id="chartserialdiv2" style="height:500px !important; border: 1px solid;"> <!-- ****** DIV CONTAINER "CHARTSERIALDIV" ************ -->
     The is the div container #chartserialdiv2 - Why is the chart not displaying here???
    </div>  
    <div data-role="footer">
        <h4>Footer</h4>
    </div>
</div>

<!-- ****** 3rd PAGE ************ -->
<div data-role="page" id="page3">
    <div data-role="header">
        <h1>Page three</h1>
    </div>
    <div data-role="content">   
        As there is no event handler attached to page 3, if you read the text and nothing else happens - that's correct! :-)        
    </div>

    <div data-role="footer">
        <h4>Footer</h4>
    </div>
</div>

</body>
</html> 
```

自定义脚本.js

```
window.onload = function() {

//This displays the chart on the start page     
var chart;
var dataProvider;       
createChart('chartserialdiv');  
loadCSV("daten/budget_management_projekt_kum.csv");              //DATENQUELLE             

//This is supposed to display the chart on the 2nd page when clicked on the link    
$('#page li a.page2').bind('click', function(event){
    alert("The link \"Page 2\" was clicked...now we turn to page 2 and try to load the chart...");
    $('#test').append("Event Handler-Check: Congratulations, the event handler $(\'#test\').append... worked!!!<br>");

    $('#chartserialdiv2').ready(function(){
        var chart;
        var dataProvider;   
        createChart('chartserialdiv2');  
        loadCSV("daten/budget_management_projekt_kum.csv");              //DATENQUELLE  

    }); 
    //event.preventDefault();
    //return false;

});

$(document).delegate('.ui-page', 'pageshow', function () {
    alert("worked");
            var chart;
        var dataProvider;   
        createChart('chartserialdiv2');  
        loadCSV("daten/budget_management_projekt_kum.csv");              //DATENQUELLE  

});

}

        // method which loads external data
        function loadCSV(file) {
            if (window.XMLHttpRequest) {
                // IE7+, Firefox, Chrome, Opera, Safari
                var request = new XMLHttpRequest();
            }
            else {
                // code for IE6, IE5
                var request = new ActiveXObject('Microsoft.XMLHTTP');
            }
            // load
            request.open('GET', file, false);
            request.send();
            parseCSV(request.responseText);
        }

        // method which parses csv data
        function parseCSV(data){ 
            data = data.replace (/,/g,"."); // SUCHE NACH KOMMA UND ERSETZE DURCH PUNKT        
            var rows = data.split("\r");    // SUCHE NACH ZEILENUMBRUCH UND SPALTE DORT ZEILE AB
            dataProvider = [];

            for (var i = 1; i < rows.length; i++){ // i=1 WEGEN DER ÜBERSCHRIFTEN

                if (rows[i]) {                    

                    var column = rows[i].split(";");  
                    var category = column[0];
                    var value1 = column[1];
                    var value2 = column[2];
                    var value3 = column[3];

                    var dataObject = {category:category, value1:value1, value2:value2, value3:value3};
                    dataProvider.push(dataObject);
                }
            }
            chart.dataProvider = dataProvider;
            chart.validateData();
        }

        function createChart(container){                            // method which creates chart

            chart = new AmCharts.AmSerialChart();       // chart variable is declared in the top

            chart.addTitle('Chart',12, '#FFFFFF', 1, true);
            chart.addLabel(15, 25, 'Mio. €', 'left', 10, '#000000', 0, 1, true);
            chart.backgroundAlpha = 1;
            chart.backgroundColor = '#FFFFFF';
            chart.categoryField = "category";           // here we tell the chart name of category field in our data provider. Wwe called it "date" (look at parseCSV method)

            var graph = new AmCharts.AmGraph();         // chart must have at least 1 graph
            graph.valueField = "value1";              // graph should know at what field from data provider it should get values.
            graph.lineThickness = 3;
            graph.lineColor = "#336699";
            graph.type = "column";
            graph.bulletAlpha = 1;
            graph.balloonText = "PLAN kum.:[[value]] Mio. €";
            graph.title  = "PLAN kum.";
            graph.fillAlphas = 1;
            chart.addGraph(graph);                      // add graph to the chart

            var graph2 = new AmCharts.AmGraph();
            graph2.valueField = "value2"
            graph2.lineThickness = 3;
            graph2.bullet = "bubble";
            graph2.balloonText = "IST kum.:[[value]] Mio. €";
            graph2.title  = "IST kum.";
            graph2.lineColor = "#ff9933";
            chart.addGraph(graph2);

            var graph3 = new AmCharts.AmGraph();
            graph3.valueField = "value3";
            graph3.lineThickness = 5;
            graph3.bulletAlpha = 1;
            graph3.lineColor = "#999999";
            graph3.type = "column";
            graph3.fillAlphas = 1;
            graph3.dashLength = 5;
            graph3.balloonText = "Forecast kum.:[[value]] Mio. €";
            graph3.title  = "Forecast kum.";
            chart.addGraph(graph3);

            var legend = new AmCharts.AmLegend();
            chart.addLegend(legend);
            legend.align = "center";
            legend.backgroundAlpha = 1;
            legend.backgroundColor ="#CCCCCC";
            legend.borderAlpha = 1;
            legend.borderColor = "#000000";
            legend.equalWidths =true;
            legend.horizontalGap = 1;
            legend.switchType = "v";
            legend.markerBorderAlpha = 1;
            legend.markerBorderThickness = 1;
            legend.markerBorderColor = "#FFFFFF";
            legend.markerLabelGap = 5;
            legend.position = "bottom";

            // 'chartserialdiv' is id of a container where the chart will be                        
            chart.write(container);

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:58:58.163

您需要将代码放置在[pagshow](http://jquerymobile.com/demos/1.1.0/docs/api/events.html)事件中以生成图表，例如

```
$(document).delegate('#page2', 'pageshow', function( ) { 
      createChart('chartserialdiv2'); 
      loadCSV("daten/budget_management_projekt_kum.csv"); 
}); 
```

# drupal-7 - drupal 7 在 html.tpl.php 头中添加自定义 cck 字段

> ID：11310266
> 
> 赞同：0
> 
> 时间：2012-07-03T11:48:21.823
> 
> 标签：drupal-7, cck, head, meta

我需要添加一个自定义基础 href，我有一个有机组多站点设置。我有一个字段 field_site_url 可以正确呈现 URL 我将如何打印

我这样做了，但它不起作用 base href="what do i put here" target="_blank"

请有任何想法谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T06:08:34.717

我通过使用 template.php 中的预处理函数将 CCK / 字段数据放入 d7 中的 html.tpl.php：

```
function THEMENAME_preprocess_html(&$variables, $hook) {
 $node = menu_get_object();
  if($node)
  {
     $variables['myfield'] = $node->field_myfield['und'][0]['value'];
  }
} 
```

这会设置一个 $myfield 变量，您可以在 html.tpl.php 中输出：

```
echo $myfield; 
```

# flash - 在网站上添加 Flash Player 幻灯片放映

> ID：11310274
> 
> 赞同：0
> 
> 时间：2012-07-03T11:48:49.587
> 
> 标签：flash, show, slide, product

我有一个 iPhone 案例网站，我想在每个页面上添加产品幻灯片。我不是编码专家。因此，如果有人建议一些好的产品或资源来制作可以添加到所有页面上的产品幻灯片，我将不胜感激。

主页 - [http://www.iphone5casesbuy.com/](http://www.iphone5casesbuy.com/)

现在只有少数 iPhone 手机壳，但我计划再增加 20 到 30 个。主题中有一个幻灯片选项，但我不喜欢它也不会出现在所有页面上。

什么是最好的解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:58:25.227

为 iPhone 手机壳使用 Flash 确实是个坏主意，您正在疏远您的目标市场。最好的滑块之一是 Nivo 滑块[http://nivo.dev7studios.com/](http://nivo.dev7studios.com/)。它可以以非常酷的方式显示一大堆图像，超级易于使用，并且可以在任何设备附近查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:35:17.140

对于移动设备上的幻灯片显示，我总是使用[Web Album Maker](http://web-album-maker.com/)，它使用了 Javascript 和 CSS。但是不要混淆，它非常易于使用，用户不需要任何编码知识。

# c# - 长时间运行的查询 Web 应用程序 (azure) 解决方案

> ID：11310275
> 
> 赞同：1
> 
> 时间：2012-07-03T11:48:53.243
> 
> 标签：c#, .net, sql-server, asp.net-mvc-3, azure

我们有一个 ASP MVC 3.0 应用程序，它使用实体框架（全部在 Azure 上）从数据库中读取数据。我们有几个长时间运行的查询（已完成优化），我们希望确保该解决方案具有可扩展性并防止线程饥饿。

我们查看了异步控制器并使用 I/O 完成端口来运行查询（使用 BeginExecute 而不是通常的 EF）。然而，异步很难调试并且增加了代码的复杂性。

建议的解决方案如下：

1.  Web 服务器（Web 角色）获取涉及长时间运行查询的请求（例如客户细分）

2.  它将请求信息连同相关参数一起输入到表中并返回，从而允许线程处理其他请求。

3.  我们在 db 中设置了一个标志，使 UI 能够在页面刷新完成时声明查询正在进行中。

4.  工作人员角色不断查询此表，并在找到此条目后立即处理长时间运行的查询（客户细分）并使用结果更新原始客户表。

在这种情况下，不需要立即将状态返回给用户。用户可以在几分钟内回来查看他们的请求是否已得到处理。而不是我们计划使用 Azure 队列的表（但我猜 Azure 队列无法通知工作人员角色，因此 db 表就可以了）。这是一个可行的解决方案。这样做有什么陷阱吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:05:48.910

虽然 Windows Azure 存储队列不会在处理完消息后给您通知，但您可以自己实现它（可能使用 Windows Azure 存储表）。队列的优点：它们处理并发和失败的尝试。

例如：如果您有 2 个工作程序实例处理来自同一个队列的消息，则每次读取队列消息时，该消息都会在您指定的时间内在队列中不可见。虽然不可见，但只有读取消息的工作实例拥有它。如果该实例完成处理，它可以删除队列消息（并更新您的通知表）。如果*失败*（可能是由于角色实例崩溃），则消息会在不可见超时到期后重新出现在队列中。更进一步：假设这只是一条导致您的代码每次都崩溃的错误消息。您可以在处理消息之前检查出队计数。如果它大于 2，只需将消息存储在死信表中并手动检查它。

对队列的一个警告：队列消息需要是*幂等*操作（也就是说，它们至少可以处理一次，并且每次的结果应该具有完全相同的副作用）。

如果您使用表而不是队列，则需要处理缩放（处理表的多个线程或角色实例）和死信处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T14:12:51.413

这取决于。如果您的工作角色除了将繁重的工作委派给 SQL 数据库之外什么都不做，这似乎是在浪费资源和金钱。使用带有异步请求的 Web 角色可以降低成本。如果需要在worker角色本身做繁重的工作，那么这是一个很好的方法。

您还可以使用 AJAX 或 Web 套接字。启动数据库查询，并立即返回响应。客户端可以轮询 Web 角色以查看查询是否已完成（如果您使用 HTTP），或者 Web 角色可以直接通知客户端（如果您使用 Web 套接字）。

# c++ - 类分配上的映射迭代器错误

> ID：11310276
> 
> 赞同：0
> 
> 时间：2012-07-03T11:49:00.907
> 
> 标签：c++, stl, map, iterator

我在地图迭代器中有一个错误。问题如下：

```
class JacobianCol
{
private:
...
    JacobianColData::iterator _L_begin;
public:
    JacobianColData::iterator L_begin();
...
}; 
```

在另一个模块中：

```
JacobianCol LUSolver::col_subtract(const JacobianColData::iterator &alpha, JacobianCol &X, JacobianCol &Y)
{
    JacobianCol result = Y;

    //alternate "result" variable

    return result;
} 
```

称呼：

```
...
J[*it] = col_subtract(friend_element, J[diag_index], J[*it]);
... 
```

当我将结果分配给`col_subtract`to时，`J[*it]`我会`J[*it].L_begin`指向一个已释放的内存（指向上一个的指针`J[*it]`）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:09:45.030

当你这样做时：

```
JacobianCol result = Y; 
```

result._L_begin 一直指向 Y._​​col_data.begin()。当 Y 引用的对象被删除时，result._L_begin 继续指向该位置，现在该位置无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:14:03.810

JacobianCol 具有 _col_data 成员。即，输入实例 JacobianCol Y 有一个 _col_data 实例，并且它的 _L_Begin 使用该映射的迭代器进行初始化。当您返回结果时，会创建一个不同的 _col_data 成员。现在，_L_Begin 迭代器从原始 Y 实例复制。这就是为什么你得到观察到的行为。

要解决此问题，请实现复制构造函数，复制映射并通过在复制构造函数中显式调用 _col_data.begin() 重新初始化迭代器

```
JacobianCol(const JacobianCol& aSrc_in)
{
    _coll_data = aSrc_in._coll_data;
    _L_Begin = _coll_data.begin();
} 
```

# java - 画布 OnDraw 方法

> ID：11310279
> 
> 赞同：0
> 
> 时间：2012-07-03T11:49:03.823
> 
> 标签：java, android, android-canvas, ondraw

我目前正在使用一对布尔数组（水平和垂直）创建一个迷宫，以便为迷宫画线。

迷宫一次只显示数组中的 5 个布尔值。然后，我有一个始终居中的用户，当他在迷宫中移动时，会绘制下一组布尔值。这是正常工作的。

我遇到的问题是：当用户移动到迷宫的某个部分时，绘制线条的 for 循环变得高于 bool 数组，因此应用程序崩溃。请在下面找到一些代码片段。

绘制：

```
protected void onDraw(Canvas canvas) {
    canvas.drawRect(0, 0, width, height, background);
    int currentX = maze.getCurrentX(),currentY = maze.getCurrentY();
    int drawSizeX = 6 + currentX;
    int drawSizeY = 6 + currentY;
    currentX = currentX - 2;
    currentY = currentY - 2;

    for(int i = 0; i < drawSizeX - 1; i++)  {
        for(int j = 0; j < drawSizeY - 1; j++)  {
            float x = j * totalCellWidth;
            float y = i * totalCellHeight;
            if(vLines[i + currentY][j + currentX])  {
                canvas.drawLine(x + cellWidth,   //start X
                                y,               //start Y
                                x + cellWidth,   //stop X
                                y + cellHeight,  //stop Y
                                line);
            }
            if(hLines[i + currentY][j + currentX]) {
                canvas.drawLine(x,               //startX 
                                y + cellHeight,  //startY 
                                x + cellWidth,   //stopX 
                                y + cellHeight,  //stopY 
                                line);
            }
        }
        //draw the user ball
        canvas.drawCircle((2 * totalCellWidth)+(cellWidth/2),   //x of center
                          (2 * totalCellHeight)+(cellWidth/2),  //y of center
                          (cellWidth*0.45f),                    //radius
                          ball);
    } 
```

编辑 1 - 移动 -

```
public boolean move(int direction) {
    boolean moved = false;
    if(direction == UP) {
        if(currentY != 0 && !horizontalLines[currentY-1][currentX]) {
            currentY--;
            moved = true;
        }
    }
    if(direction == DOWN) {
        if(currentY != sizeY-1 && !horizontalLines[currentY][currentX]) {
            currentY++;
            moved = true;
        }
    }
    if(direction == RIGHT) {
        if(currentX != sizeX-1 && !verticalLines[currentY][currentX]) {
            currentX++;
            moved = true;
        }
    }
    if(direction == LEFT) {
        if(currentX != 0 && !verticalLines[currentY][currentX-1]) {
            currentX--;
            moved = true;
        }
    }
    if(moved) {
        if(currentX == finalX && currentY == finalY) {
            gameComplete = true;
        }
    }
    return moved;
} 
```

如果还有什么我需要澄清的，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:05:35.420

当 currentX/Y 足够高（长度为 6）时，drawSizeX/Y 索引数组

所以将值限制为 Math.min(current + 6, array.length)

# c++builder - 印地文件

> ID：11310283
> 
> 赞同：1
> 
> 时间：2012-07-03T11:49:13.517
> 
> 标签：c++builder, indy10, c++builder-xe

我想开始使用 Indy 来替换旧的和已弃用的 TSocket delphi 组件。

Indy 似乎是一个非常丰富的组件集合，但我没有找到关于它的好的文档。我发现的唯一文档都是旧的或空的模板，没有有用的信息。

有人能告诉我在哪里可以找到有关 Indy 10 的一些好的文档吗？

问候， 恩佐

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T02:25:40.190

Indy 的文档都在这里： http: [//www.indyproject.org/sockets/docs/index.en.aspx](http://www.indyproject.org/sockets/docs/index.en.aspx) 在某些情况下它不够详细，但是 indy 的开发人员确实回答了有关 stackoverflow 的问题 ;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:55:46.603

前段时间我自己尝试过 - 尽管您必须自己安装它们，但我仍然使用 TServerSocket 和 TClientSocket。我也很难找到文档，但是在考虑您现在打算采用的相同路径时，我确实在 embarcadero 开发人员论坛上遇到了很多有关 Indy 套接字的信息（无论如何都足以说服我坚持使用 TSockets）（我是假设如果您像我一样使用 c++Builder-XE，您可以访问这些，所以如果您在这里没有运气，也许可以尝试一下）。

# uml - 如何在 class_diagram 中显示控制器类？它有什么作用？

> ID：11310291
> 
> 赞同：0
> 
> 时间：2012-07-03T11:49:40.567
> 
> 标签：uml, class-diagram

我不明白控制器类如何存在于类图中？如果有可能它有什么作用，我怎么能检测到这样的事情？关于在 class_diagrams 中部署控制器类，我可以找到哪些设计模式？任何机构都可以为我定义一个控制器类吗？我认为它是多余的。

```
//this part is not a part of my question
//it was a quality check and i have to increase my question characters 
//i don't know this is enough or not
//so first try 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T07:49:39.910

控制器就像类图中的常规类。要明确地说它是一个控制器，您可以添加一个构造型，例如`<<Controller>>`控制器类。

[我在这里](http://epf.eclipse.org/wikis/openuppt/openup_basic/guidances/concepts/entity_control_boundary_pattern,_uF-QYEAhEdq_UJTvM1DM2Q.html)和[这里](http://rollerjm.free.fr/pro/Struts11.html)在互联网上找到了一些例子，我相信还有更多。

# java - 用于设置/获取 ap:selectBooleanCheckbox 值的表达式语言

> ID：11310292
> 
> 赞同：2
> 
> 时间：2012-07-03T11:49:43.343
> 
> 标签：java, jsp, jsf, jstl

我有一个名为时间表的二维数组，它存储一周中的日期和小时数。如何为`p:selectBooleanCheckbox`value 属性提供表达式以设置/获取时间表值。

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:p="http://primefaces.prime.com.tr/ui">  

    <h:panelGrid columns="24">  
        <c:forEach begin="0" end="6" varStatus="day">
            <c:forEach begin="0" end="23" varStatus="hour">  
                <p:selectBooleanCheckbox value="...">  
                    <p:ajax listener="#{windowsLogonHours.selectHour(day.count - 1, hour.count - 1)}" />
                </p:selectBooleanCheckbox>
            </c:forEach>  
        </c:forEach>        
    </h:panelGrid>  
</ui:composition> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:50:32.043

假设`timetable`是 a `boolean[][]`，那么您可以使用[`LoopTagStatus#getIndex()`](http://docs.oracle.com/javaee/6/api/javax/servlet/jsp/jstl/core/LoopTagStatus.html#getIndex%28%29)from`varStatus`获取迭代索引，您可以将其用作二维数组的索引。

```
<p:selectBooleanCheckbox value="#{bean.timetable[day.index][hour.index]}"> 
```

请注意，您必须在支持 bean 的初始化或（后）构造期间自己准备数组。JSF/EL 不会为您准备数组，而只会通过索引获取/设置其值。

# javascript - 是否可以使用独特的 Javascript 函数从两个不同的 .php 页面中隐藏两个 div？

> ID：11310293
> 
> 赞同：-1
> 
> 时间：2012-07-03T11:49:48.560
> 
> 标签：javascript, templates, dom-events

我的 index.php 中有一个按钮，它显示一个菜单并隐藏页面的内容。但是它应该适用于两个不同的模板。我的功能基本上是这样的：

```
function show_menu();
{
document.getElementById('menu').style.display="block";
document.getElementById('content1').style.display="none";
document.getElementById('content2').style.display="none";
} 
```

如果我只放其中一个内容，隐藏它就可以了。但是，如果我将两个内容都放入，则不会。这是怎么回事？这是不可能的还是我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T11:54:59.743

我不确定我是否正确地解决了您的问题，但如果我这样做了，问题是您无法设置页面上不存在的元素的样式。您必须检查`null`值：

```
function show_menu()
{
document.getElementById('menu').style.display="block";

var content1 = document.getElementById('content1'),
    content2 = document.getElementById('content2');

if (content1) {
    content1.style.display="none";
}
if (content2) {
    content2.style.display="none";
}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T11:53:16.503

```
function show_menu() //Removed the semicolon, could be the culprit causing the problem
{
  document.getElementById('menu').style.display="block";
  document.getElementById('content1').style.display="none";
  document.getElementById('content2').style.display="none";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T12:03:18.017

`content1`我猜您的模板之一中没有带有 id 的元素。`style`然后，当访问不存在元素的属性时，您的代码将失败，停止脚本执行并且不隐藏`content2`.

我想到了三种可能的解决方案：

*   在所有模板中使用相同的 ID。如果两者都包含`content`具有相同功能目的的 a，则应将它们命名相同。然后，您的脚本将适用于所有这些模板。
*   使用不同的脚本或指示使用哪个模板的变量，以便脚本可以确定正确的 id。
*   动态检查元素的存在（你总是应该这样做）：

```
function show_menu() {
    var menu = document.getElementById('menu'),
        content1 = document.getElementById('content1'),
        content2 = document.getElementById('content2');

    if (menu)
        menu.style.display="block";
    if (content1)
        content1.style.display="none";
    if (content2)
        content2.style.display="none";
} 
```

# java - Jboss 4.2.3 with rest easy 2.3.2 - JNDI 查找失败

> ID：11310295
> 
> 赞同：2
> 
> 时间：2012-07-03T11:49:54.447
> 
> 标签：java, jboss, resteasy

我想将 JBoss 4.2.3 与 RESTEasy 2.3.2 一起使用。我可以通过将所有必需的罐子添加到库中来做到这一点。当我不使用 CDI 功能时，这很好用。

但是，如果我尝试在类中使用 @Inject，则 BeanManager 查找失败，因此部署失败。从[https://issues.jboss.org/browse/RESTEASY-558](https://issues.jboss.org/browse/RESTEASY-558)，我了解到此问题已得到解决。

*   我正在使用 JDK 1.6.X
*   我的 WEB-INF 中有 beans.xml
*   尝试使用 WELD servlet。但最终的错误保持不变
*   添加`<resource-env-ref>`到 web.xml 中不起作用

# web.xml 内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    id="WebApp_ID" version="3.0">
    <display-name>xyz</display-name>

    <servlet>
    <servlet-name>Resteasy</servlet-name>
    <servlet-class>org.jboss.resteasy.plugins.server.servlet.HttpServlet30Dispatcher</servlet-class>
</servlet>
    <servlet-mapping>
        <servlet-name>Resteasy</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>

    <context-param>
        <param-name>resteasy.scan</param-name>
        <param-value>true</param-value>
    </context-param>

    <context-param>
        <param-name>resteasy.resource.method-interceptors</param-name>
        <param-value>
         org.jboss.resteasy.core.ResourceMethodSecurityInterceptor
      </param-value>
    </context-param>

    <listener>
        <listener-class>org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap</listener-class>
    </listener>

    <context-param>
        <param-name>resteasy.injector.factory</param-name>
        <param-value>org.jboss.resteasy.cdi.CdiInjectorFactory</param-value>
    </context-param>

</web-app> 
```

# 堆栈跟踪：

```
Caused by: java.lang.RuntimeException: Unable to lookup BeanManager.
        at org.jboss.resteasy.cdi.CdiInjectorFactory.lookupBeanManager(CdiInjectorFactory.java:131)
        at org.jboss.resteasy.cdi.CdiInjectorFactory.<init>(CdiInjectorFactory.java:41)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at java.lang.Class.newInstance0(Class.java:355)
        at java.lang.Class.newInstance(Class.java:308)
        at org.jboss.resteasy.spi.ResteasyDeployment.start(ResteasyDeployment.java:138) 
```

# 问题：

*   JBoss 4.2.3 是否有可能拥有 CDI 功能？
*   我看到 JNDI 查找失败。谁（哪个模块/类）负责添加 JNDI 条目？
*   我的 web.xml 有什么问题吗？

在过去的一天里，我一直坚持这一点。任何帮助都非常感谢。

# mongodb - 保护云中的 MongoDB 传输

> ID：11310299
> 
> 赞同：6
> 
> 时间：2012-07-03T11:50:18.457
> 
> 标签：mongodb, azure, ssh, amazon-web-services, ssl

是否有任何服务提供商提供具有安全传输的托管 MongoDB？我知道对 MongoDB 的本机 TLS 支持还不是完全 OOB，但我正在寻找可以使用 SSH、VPN 或 IPSEC 加密传输的提供商？

我知道 MongoDB 连接密码握手本身是安全的，但我需要保护数据不被窥探。我当然可以直接在我的应用程序层中加密字段，但对于我想要搜索的字段，我不能这样做。

据我所知，我们唯一的传输安全依赖于 VLAN/交换机路由。换句话说，我应该*假设*（根据 MongoHQ 和 MongoLab 等提供商的说法）我的数据包是安全的，只要我在同一个数据中心提供商中运行，例如。亚马逊。但如果我不是。不幸的是，例如，似乎还没有在 Azure 上运行的商业提供商，所以这意味着构建我们自己的集群。

显然，在任何情况下接近我的数据可能都是有意义的，但目前我们需要在不影响安全性的情况下混合和匹配提供者方面具有一定的灵活性。

即便如此，在同一个托管服务提供商中，MAC 地址路由真的是提供的最佳传输安全性吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T12:57:48.803

我认为答案取决于您是否仅根据通过 Mongo Wire 协议提供 SSL 来评估提供商（目前选择可能有限），或者您是否可以使用他们的 API（大多数将支持 https）。

由于某些许可/导出复杂性， MongoDB 的[SSL 支持](http://docs.mongodb.org/manual/administration/ssl/)（如 2.0.6）需要单独构建，并且是“全有或全无”（即您的所有 mongo 进程和客户端驱动程序都需要使用 SSL）。关于此功能请求的 Jira 问题正在进行一些讨论：[SERVER-524: encryption of wire protocol with SSL](https://jira.mongodb.org/browse/SERVER-524)。

根据快速搜索，您提到的提供商目前似乎没有在有线协议之上提供安全传输（并且有相同的警告）..但他们的 REST API 确实有**https**端点：

*   [MongoHQ 的 REST API](http://support.mongohq.com/api) - MongoHQ REST API 允许您使用易于使用的基于 HTTPS 的 JSON API 创建在 MongoHQ 平台上创建的 MongoDB 数据库并与之交互。

*   [MongoLab 的 REST API](http://support.mongolab.com/entries/20433053-rest-api-for-mongodb) - 使用 MongoLab 的 REST API，您可以访问链接到您的帐户的任何数据库。该 API 公开了您在 MongoDB 驱动程序中可以找到的大多数操作，但将它们作为 RESTful 接口通过 HTTPS 提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-20T03:50:44.623

For end to end security you should use SSL. It is not good practice to rely on the network configuration. MongoDirector.com offers SSL support for your MongoDB servers at no extra charge. Here are the details - [https://scalegrid.io/blog/secure-your-mongo-clusters-with-ssl/](https://scalegrid.io/blog/secure-your-mongo-clusters-with-ssl/)

Disclaimer: I am one of the founders of MongoDirector.com

# magento - Magento 类别页面布局更改未反映在前端

> ID：11310302
> 
> 赞同：1
> 
> 时间：2012-07-03T11:50:24.467
> 
> 标签：magento, layout

我正在尝试为所有类别提供一个列页面布局，方法是`catalog --> Manage categories --> (Required category) --> custom design --> Page layout --> (Selected 1 column from dropdown)`

但在我的前端，我正在使用右侧边栏获取该页面。在启用模板路径提示时，我发现模板是 2column-right.phtml

有没有人经历过这个问题？请帮我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:24:12.040

你确定你已经清除了缓存吗？您是否启用了任何其他缓存？

# ruby - Rails 使用什么 sleep()？

> ID：11310312
> 
> 赞同：8
> 
> 时间：2012-07-03T11:51:14.143
> 
> 标签：ruby, ruby-on-rails-3

我正在测试一段 Rails 代码，内容如下：

```
sleep(10.0) 
```

在我的 RSpec 测试中，调用：

```
Kernel.should_receive(:sleep).exactly(1).time 
```

失败，测试休眠了十秒钟。这使我得出结论，`sleep()`在 Rails 程序中没有调用`Kernel.sleep()`. 我通过将我的 Rails 代码更改为：

```
Kernel.sleep(10.0) 
```

...之后我的 RSpec 测试通过了（并且测试没有休眠）。

这导致了一个具体和一般性的问题：

*   Rails 使用什么 sleep() 实现（我正在运行 Ruby 1.9.3 / Rails 3.2.1）？
*   从解释器中，找到任何函数的源代码的最简单方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T12:16:33.637

隐式接收器，当您未指定显式接收器时，是`self`，不是`Kernel`。（你为什么那么想？）

所以，

```
sleep(10.0) 
```

大致相同

```
self.sleep(10.0) 
```

完全*不*一样

```
Kernel.sleep(10.0) 
```

因此，它正在调用[`Kernel#sleep`](http://RubyDoc.Info/stdlib/core/Kernel:sleep/)而`self`不是在`Kernel`. 这意味着您需要`self`对该特定方法中的任何对象设置期望。

# linux - 为带有系统托盘图标的程序创建 Ubuntu 12.04 DEB 包

> ID：11310313
> 
> 赞同：0
> 
> 时间：2012-07-03T11:51:19.120
> 
> 标签：linux, packaging, system-tray, ubuntu-unity

我在**Lazarus** (Free Pascal) 中为 Ubuntu 12.04 编写了一个程序。该程序在系统托盘栏中有一个图标，但默认情况下图标在那里不可见。如何**编写 *.deb**包以使**Unity**桌面环境允许我的程序的系统托盘图标？

请不要建议我为此目的使用**Dconf-editor**，因为它是一种用户方式，但我需要知道部署此类***.deb -packages 的标准方式（由****Canonical**批准） 。

# windows - IIS 应用程序池标识与 Windows 帐户

> ID：11310318
> 
> 赞同：9
> 
> 时间：2012-07-03T11:51:36.183
> 
> 标签：windows, sql-server-2008, iis-7, windows-authentication, application-pool

在 IIS 中使用内置应用程序池标识而不是指定 Windows 帐户的优点和缺点是什么？

对于 SQL Server，如果您想使用 Windows 身份验证从 .Net 应用程序连接，我假设如果我使用 App Pool Identity，我必须将其与 SQL Server 中的用户相关联，或者通过 db 授予该 App Pool Identity 访问权限？

应用程序池标识是否只是为了方便而添加，以便您不必为您的应用程序池设置帐户？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T12:09:52.953

使用的内置帐户特定于计算机。如果应用程序池中的应用程序需要连接到网络上的其他资源（数据库服务器、文件共享等），那么使用（Windows）域帐户可能是更好的选择。当您指定域帐户时，您必须确保它们在 IIS 使用的物理文件夹上设置了正确的文件权限。在以后的操作系统中 - 您可以将此帐户添加到 IIS_IUSRS 组以实现默认权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:14:17.753

我们的 Intranet 上运行了几个使用 Windows 身份验证的应用程序。我们在 web.config 中处理这个问题的方式是指定我们的 SQL 连接字符串，如下所示：

```
<connectionStrings>
    <add name="ConnectionStringName" connectionString="Data Source=ServerName;Initial Catalog=DatabaseName;Trusted_Connection=true" providerName="System.Data.SqlClient"/>
</connectionStrings> 
```

在 web.config 中还有以下内容：

```
<system.web>
    <authentication mode="Windows"/>
    <identity impersonate="true" username="Domain\Username" password="password"/>
</system.web> 
```

使用域帐户允许您以与管理其他用户帐户相同的方式管理该帐户。不利的一面是用户名和密码包含在 Web 配置中的纯文本中。

希望这可以帮助。

# php - 在两行中显示搜索结果

> ID：11310319
> 
> 赞同：1
> 
> 时间：2012-07-03T11:51:43.727
> 
> 标签：php, mysql, row

我正在制作一个网页，并将其添加为搜索引擎。这是结果页面的代码。

```
 $term = $_POST['term'];

    $sql = mysql_query("select * from artists2 where Fname like '%$term%' or Genre like '%$term%' or Specialty like '%$term%' order by Fname");

while ($row = mysql_fetch_array($sql)){
    echo '<table width="550" border="0" cellspacing="0" cellpadding="0">';
  echo '<tr>';
  echo '<td width="550" height="200"><img src="'.$row['Bio']. '" alt="" width="150" height="200"></td>';
  echo '</tr>';
  echo '<tr>';
  echo '<td width="550" height="30">Name: '.$row['Fname'].'</td>';
  echo '</tr>';
  echo '<tr>';
  echo '<td width="550" height="30">Genre: '.$row['Genre'].'</td>';
  echo '</tr>';
  echo '<tr>';
  echo '<td width="550" height="30">Specialty: '.$row['Specialty'].'</td>';
  echo '</tr>';
  echo '<br/>';
  echo '<br/>';
  echo '<br/>';
echo '</table>';
    }
?> 
```

我希望结果显示在两行而不是现在显示的一行。此外，每个结果都有一张图片和 3 行文字。我希望文字显示在图片的右侧。不像现在显示的那样在图片下方。

**更新 1**

Dainis 您的代码非常有帮助。如此接近我需要的东西。你的代码给了我这个： ![在此处输入图像描述](../Images/09bc960a5ac8328b661f895c8060f137.png)

但我需要这样的东西：

![在此处输入图像描述](../Images/47217ca438146be9179b93e400bcfa7a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:18:23.620

哇。那是一些*严重*过时的 HTML 代码。您*永远不*`table`应该按照您的方式使用s 进行布局。现在有*更好*的方法来解决这些布局。

这是一个使用 CSS 进行布局的 JSFiddle。小提琴中的 HTML 是语义上的，意味着它准确地代表了您向访问者（有或没有视线）以及搜索引擎显示的数据：

[http://jsfiddle.net/CgbQH/](http://jsfiddle.net/CgbQH/)

如您所见，搜索结果列表就是这样；一个列表。每个结果都有一个图像和一个`dl`（尽管有些人可能认为`dl`这不是键/值对的正确选择）。然后使用 CSS 使标记以您想要的方式呈现。

此外，永远不要*将*`$_POST['term']`用户输入（您的）直接粘贴到这样的查询中。你没听说小鲍比桌发生了什么事吗？[http://xkcd.com/327/](http://xkcd.com/327/)

编辑：我曾经`column-count`让列表呈现在两列中。`column-count`仅适用于现代浏览器，因此如果您*必须*支持 IE，您可以将每个设置`li`为`float: left; width: 50%`. 但是，这将以与`column-count`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:00:22.030

您需要删除一些标签

```
while ($row = mysql_fetch_array($sql))
{
  echo '<table width="550" border="0" cellspacing="0" cellpadding="0">';
  echo '<tr>';
  echo '<td width="550" height="200" valign="top"><img src="'.$row['Bio']. '" alt="" width="150" height="200"></td>';
  echo '</tr>';
  echo '<tr>';
  echo '<td width="550" height="30" valign="top">';
  echo 'Name: '.$row['Fname'].'<br />';
  echo 'Genre: '.$row['Genre'].'<br />';
  echo 'Specialty: '.$row['Specialty'];
  echo '</td>';
  echo '</tr>';
  echo '</table>';
  echo '<br/>';
  echo '<br/>';
  echo '<br/>';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T12:04:52.333

你到底希望它是什么样子？像这样？

![在此处输入图像描述](../Images/8d8336a4c08d9c8aaf51c203e5efb5b0.png)

那么代码将是这样的：

```
while ($row = mysql_fetch_array($sql)){
echo '<table width="550" border="0" cellspacing="0" cellpadding="0" style="width: 40%; float: left;">';
  echo '<tr>';
  echo '<td width="550" height="200" align="left" valign="top"><img src="'.$row['Bio']. '" alt="" width="150" height="200"></td>';
  echo '<td width="550" height="30" align="left" valign="top">';
  echo '<p>Name: '.$row['Fname'].'</p>';
  echo '<p>Genre: '.$row['Genre'].'</p>';
  echo '<p>Specialty: '.$row['Specialty'].'</p>';
  echo '</td>';
  echo '</tr>';
echo '</table>';
} 
```

# winapi - 在win32中绘制图像？

> ID：11310321
> 
> 赞同：0
> 
> 时间：2012-07-03T11:51:46.027
> 
> 标签：winapi, gdi, codeblocks

首先，请记住，我是 win32 的初学者，所以我很可能会错过明显的内容。

我正在使用 Code::Blocks、C++、win32。我正在制作一个程序：

1.  将从文件中加载图像
2.  将从另一个文件加载一些信息并将其绘制在图像上。

然后程序稍后会在图像上绘制额外的东西。另外，我不需要将此绘图实际合并到图像中，图像仅作为绘图的参考。

我已设法在子（静态）窗口中显示图像，并且已成功将信息绘制到主窗口上。但是，当我想将两者结合起来以使绘图覆盖图像时，我陷入了困境-我不知道要绘制到哪个窗口以及要为绘图处理哪个消息。我在互联网上搜索了任何提示、示例、任何东西，但我一无所获。（这可能是因为我不知道如何准确描述我的问题。）

在过去的几天里，我一直在尝试不同的事情，比如用图像绘制到静态控件，并尝试在图像的顶部绘制一个透明的静态控件，但没有任何效果。

如果有人能给我任何提示，那就太好了！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:52:59.353

捕获`WM_PAINT`要绘制的窗口的消息。在处理程序中，添加代码`BitBlt`首先绘制图像（也许是函数），然后再绘制您想要的图形。您还必须处理`WM_ERASEBKGND`用于在重新调整大小等时擦除窗口背景的消息。

参考：[WM_PAINT 消息](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145213%28v=vs.85%29.aspx)，[WM_ERASEBKGND 消息](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648055%28v=vs.85%29.aspx)

# wordpress - Wordpress 域映射别名 302 重定向

> ID：11310330
> 
> 赞同：1
> 
> 时间：2012-07-03T11:52:11.517
> 
> 标签：wordpress, alias, http-status-code-302, domain-mapping

我想建立一个具有不同域的 Wordpress 多站点：

*   mainblog.com（我在这个 url 上安装了 wordpress）
*   mainblog.com/blog1
*   mainblog.com/blog2

这很好用。

我做了 2 个别名：

*   site1.com/blog > mainblog.com 文件夹
*   site2.com/blog > mainblog.com 文件夹

我安装了[WordPress MU 域映射](http://wordpress.org/extend/plugins/wordpress-mu-domain-mapping/)并映射了域：

*   mainblog.com/blog1 上的 site1.com/blog
*   mainblog.com/blog2 上的 site2.com/blog

当我键入 site1.com/blog 或 site2.com/blog 时，我在 mainblog.com 上重定向 (302)。你有想法吗？

# c# - 在列中搜索值行（数据网格）

> ID：11310337
> 
> 赞同：-2
> 
> 时间：2012-07-03T11:52:58.883
> 
> 标签：c#, wpf, datagrid

> **可能重复：**
> [按列获取数据网格的值](https://stackoverflow.com/questions/11306555/getting-value-on-datagrid-by-columns)

例如，如何获取列`id`中的值`index = 3`

这是 WPF，数据网格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:22:46.757

有点难以理解您的问题，如果您可以添加更多信息，我相信您会得到一个很好的答案。

你试过什么？您能否在问题中添加更多代码（和上下文）？

你看过 MSDN 吗？这是获取单元格值的一种方法：http: [//msdn.microsoft.com/en-us/library/z5c4a30a.aspx](http://msdn.microsoft.com/en-us/library/z5c4a30a.aspx)

```
private void GetCellValue(DataGrid myGrid){
   DataGridCell myCell = new DataGridCell();
   // Use and arbitrary cell.
   myCell.RowNumber = 1;
   myCell.ColumnNumber = 1;
   Console.WriteLine(myGrid[myCell]);
} 
```

干杯——乔克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:15:57.677

我假设 yr 网格绑定到项目/对象，因此如果您想更改该列或行中的值，您可以简单地在您的网格单击事件或您正在使用的任何事件中使用它

```
 MyObject rowObject = gridObjects.GetFocusedRow as MyObject;
    if (rowObject != null)
    {

    } 
```

# php - 如何将超大插件与 WordPress 自定义帖子类型功能图像集成

> ID：11310340
> 
> 赞同：1
> 
> 时间：2012-07-03T11:53:12.303
> 
> 标签：php, jquery, wordpress

如果以下内容写错了，我们深表歉意。第一次发帖。提前感谢任何解决方案。

我正在尝试将 Supersized 插件手动与 WordPress 集成。我需要它来使用我定义的名为“主页幻灯片”的自定义帖子类型 (CPT)，并在该 CPT 中获取帖子的特色图像并将其拉入超尺寸脚本。

我的 CPT 'homepagesslides' 在正常循环中正常工作。代码可以在这里看到：http: **[//pastebin.com/1KqH2asD](http://pastebin.com/1KqH2asD)**

而且我有超大插件使用绝对网址在 WordPress 中工作。代码可以看这里： http: **[//pastebin.com/jbpccWa2](http://pastebin.com/jbpccWa2)**

我已经尝试了几个小时来结合上述内容，但还没有成功。幻灯片（方括号之间的位）需要从 WordPress CPT 动态生成。

任何想法将不胜感激。

谢谢戴夫

**以前的研究链接：** 这些针对特定目录或包含我无法使用的元素。

[jquery Supersize显示IE错误](https://stackoverflow.com/questions/10794009/jquery-supersize-show-ie-error)

[http://wordpress.org/support/topic/custom-post-types-category_name](http://wordpress.org/support/topic/custom-post-types-category_name)

[http://forum.jquery.com/topic/tutorial-how-to-detect-images-automatically-with-supersized](http://forum.jquery.com/topic/tutorial-how-to-detect-images-automatically-with-supersized)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:37:42.780

试试这个代码：

```
slides : [
<?php 
    //query
    query_posts(array('post_type'=>'homepageslides',
                      'posts_per_page'=>'20'
                      ));

    //loop
    if(have_posts()) : 
        while (have_posts()) : the_post();
            //feature image
            $large_image_url = wp_get_attachment_image_src(get_post_thumbnail_id(), 'full');
            $title = get_the_title();

            //echo slides
            echo "{image : '".$large_image_url[0]."', title : '".$title."', url : ''},";

        endwhile; 
    endif; 
?>] 
```

# php - Facebook Statuses API

> ID：11310342
> 
> 赞同：0
> 
> 时间：2012-07-03T11:53:17.617
> 
> 标签：php, facebook, json, api

I'd just like to ask about a problem I'm facing with Facebook Graph API. I've connected to Facebook successfully, stored the user ID, and user access_code into my DB

Now when viewing the site I'm building, it's using the `access_token` stored in my database, but doesn't show my facebook statuses....because the "session has expired"....

Is there anyway I can regenerate the access_token?

Thanks

Example:

```
$status = 'https://graph.facebook.com/'.$userId.'/statuses?limit='.10.'&access_token='.$app_token; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:36:29.093

User access tokens last only 1-2 hours. There is a technique to get a 60 day token for your use. It is explained here: [http://dominicminicoopers.blogspot.com/2012/03/facebook-access-tokens-and-offline.html](http://dominicminicoopers.blogspot.com/2012/03/facebook-access-tokens-and-offline.html) Remember to get this extended access token prior to the short-lived access token expiring. You must pass in a valid working user access token to pass to it. Do this serverside, not clientside because you have to use your app secret.

```
https://graph.facebook.com/oauth/access_token?             
    client_id=[APP_ID]&
    client_secret=[APP_SECRET]&
    grant_type=fb_exchange_token&
    fb_exchange_token=[EXISTING_NON-EXPIRED_USER_ACCESS_TOKEN] 
```

Remember to ask for the `user_status` permission when prompting the user. See: [http://developers.facebook.com/docs/authentication/permissions/#user_friends_perms](http://developers.facebook.com/docs/authentication/permissions/#user_friends_perms)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:03:21.010

You cant regenerate it, but you can get a new one by having the user go through the oauth process again, it will return a new token - [https://developers.facebook.com/docs/authentication/](https://developers.facebook.com/docs/authentication/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T12:07:40.207

You can try to get a long lived token. That will allow you to access the status even when the user is not loged in. See [here](https://developers.facebook.com/roadmap/offline-access-removal/)

# python - PySerial 与变量的通信

> ID：11310347
> 
> 赞同：1
> 
> 时间：2012-07-03T11:53:32.733
> 
> 标签：python, serial-port, arduino, pyserial

我正在尝试通过 OS X 上的 Pyserial 与我的 Arduino 交互。我正在控制 LED，发送数字从 0 到 9。代码如下

```
import serial
arduino = serial.Serial('/dev/tty.usbserial', 9600)

arduino.write('5') 
```

工作得很好，但我试图让这个例子中的 5 作为一个可变变量，但类似于

```
arduino.write('%d') % 5 
```

不会工作。我不知道如何格式化输出等于工作示例的变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T12:00:19.353

您没有格式化字符串`%d`，而是函数调用：

```
arduino.write('%d' % 5) 
```

该`%`标志应`'`立即进行。

这将起作用，但最好使用带有格式字符串的元组：

```
arduino.write('%d' % (5,)) 
```

因为当您有多个参数时，无论如何您都必须以这种方式使用它：

```
arduino.write('%d.%d' % (2, 3)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T12:00:50.437

字符串格式必须放在函数调用的括号内。

例如`arduino.write("%d" % 5)`

这是有关[旧式字符串格式的一些信息](http://docs.python.org/library/stdtypes.html#string-formatting)

# javascript - 使用 JavaScript 在 Adob e Air 中跟踪鼠标位置

> ID：11310349
> 
> 赞同：0
> 
> 时间：2012-07-03T11:53:44.433
> 
> 标签：javascript, dom-events, air

如何在 Adob​​e Air 1.5 中使用 Javascript API 跟踪 Adob​​e Air 中的鼠标光标位置变化？以下代码似乎对我不起作用。

```
var mainWin; //main stage
var _self={};
_self.mouse={x:0,y:0};

//Alias: air.MouseEvent=window.runtime.flash.events.MouseEvent;
mainWin.addEventListener(air.MouseEvent.MOUSE_MOVE,function(e){
    _self.mouse.x=e.pageX;
    _self.mouse.y=e.pageY;
}); 
```

我想要实现的是类似 IM 的状态更改准备聊天/离开。如果有其他方法请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:59:13.280

```
air.NativeApplication.nativeApplication.idleThreshold = 10; //10 seconds idle time

air.NativeApplication.nativeApplication.addEventListener(air.Event.USER_IDLE, function(event) { 
            //away
    }); 

air.NativeApplication.nativeApplication.addEventListener(air.Event.USER_PRESENT, function(event) { 
            //back
    }); 
```

# autofac - 如果在 Autofac 中找不到匹配的寄存器，如何使用默认类进行解析

> ID：11310352
> 
> 赞同：3
> 
> 时间：2012-07-03T11:53:48.670
> 
> 标签：autofac

我正在使用以下代码进行注册：

```
builder.RegisterType<QCatVCardParser>().Named<IQCatParser>(".VCF");              
builder.RegisterType<QCatVCardParser>().Named<IQCatParser>(".VCARD");            
builder.RegisterType<QCatOutlookMessageParser>().Named<IQCatParser>(".MSG");
builder.RegisterType<QCatMimeMessageParser>().Named<IQCatParser>(".EML");
builder.RegisterType<QCatCalendarParser>().Named<IQCatParser>(".ICS");
container = builder.Build(); 
```

要检索类引用，我使用以下代码：

```
var r = container
    .ResolveNamed<IQCatParser>(Path.GetExtension(fileName).ToUpperInvariant()); 
```

现在我的问题是，如果出现不支持的文件扩展名，比如说 .DOC，我想用其中一个注册类中的一个组件或第一个注册类来解决它。

AutoFac 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:07:53.460

你可以用 Autofac 做到这一点。如果需要，您需要创建一个`IRegistrationSource`可以提供默认注册的。例如，下面是`RegistrationsFor`提供设置类的源代码：

```
var typedService = service as IServiceWithType;
if (typedService != null && typedService.ServiceType.IsClass && typeof(ISettings).IsAssignableFrom(typedService.ServiceType))
{
    yield return RegistrationBuilder.ForDelegate((c, p) => c.Resolve<ISettingsReader>().Load(typedService.ServiceType))
                .As(typedService.ServiceType)
                .CreateRegistration();
} 
```

然后，在模块内部或直接使用 Autofac 构建器，调用`RegisterSource`以连接新的注册源。

# cplex - 如何在 CPLEX AMPL 中添加数组的数组

> ID：11310354
> 
> 赞同：1
> 
> 时间：2012-07-03T11:53:51.860
> 
> 标签：cplex, ampl

我需要定义一个参数，它是一个由 14 个不同大小的数组组成的数组：类似这样的“N{i}=[[3,4,2],[4,3,2,2],[3,2] ,...,[13,9,4]]

因此，例如在我的模型中 N[0] 将返回 [3,4,2] 我知道如何定义对称的二维数组，但无法弄清楚如何使用各种大小来完成它。

我希望问题很清楚，如果没有，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:14:09.780

所以事实证明这是正确的方法：如果 NI 是我们的集合，这就是您定义集合的方式：

```
set NI[1]:=3 4 2;
set NI[2]:=4 3 2 2;
set NI[3]:=3 2;
etc 
```

# sql - 使用 SQL Server 2008 根据表中的数据以及它们是否存在于本地检索远程文件

> ID：11310355
> 
> 赞同：0
> 
> 时间：2012-07-03T11:54:36.883
> 
> 标签：sql, sql-server-2008

谁能告诉我完成这项任务的最佳方法，我不希望为我编写脚本（我喜欢学习）我只需要一个指针，这将是解决问题的最佳方法，

我为目录中标题为 ( `ProdId.xml`)的每个产品下载了 xml 文件

我从我的 SQL Server 2008 表产品中获得了产品 ID 的列表。目前将它们放入 Excel 并在每个文件之前放置一个 wget 语句，其中包含我的文件源的完整路径以及用户名和密码。

例如

```
wget website/xmlfiles/prodid.xml – username – password 
```

我对每个文件都这样做。

我想自动化这个过程，所以每天提取所有产品 ID 的检查以查看文件是否已经存在，如果不存在则从网站收集。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:51:18.687

最后使用了这个脚本

```
DECLARE @Product_ID INT
DECLARE Product CURSOR
FOR SELECT Product_ID
FROM dbo.table

OPEN Product

declare @Paths varchar(128) ,
@FileName varchar(128),
@FileExtension varchar(128)

FETCH NEXT FROM Product
INTO    @Product_ID

WHILE @@FETCH_STATUS = 0
BEGIN

select  @Paths = 'C:\Data\xmls\' ,
@FileExtension = '.xml',
@FileName = @Product_ID

declare @objFSys int
declare @i int
declare @File varchar(1000)

select @File = @Paths + @FileName + @FileExtension
exec sp_OACreate 'Scripting.FileSystemObject', @objFSys out
exec sp_OAMethod @objFSys, 'FileExists', @i out, @File
if @i = 1
print 'Allready There ' + CONVERT(VARCHAR(36), @Product_ID)
else

PRINT 'Neet to get ' + CONVERT(VARCHAR(36), @Product_ID) + '.xml From Source.'

FETCH NEXT FROM Product
INTO @Product_ID

exec sp_OADestroy @objFSys 
END

CLOSE Product
DEALLOCATE Product 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:04:54.800

我建议考虑编写[SQL Server Integration Services 或 SSIS](http://msdn.microsoft.com/en-us/library/ms141026.aspx)包来为您执行此操作。SSIS 可用于数据提取、转换和加载。

网上有很多关于 SSIS 的教程。这里有几个：

[MS SQL 提示 - SQL Server 集成服务 (SSIS)](http://www.mssqltips.com/sqlservertutorial/200/sql-server-integration-services-ssis/)

[SSIS 教程：SQL Server 2005 集成服务教程](http://www.accelebrate.com/sql_training/ssis_tutorial.htm)

[SSIS 教程：创建简单的 ETL 包](http://msdn.microsoft.com/en-us/library/ms169917%28v=sql.105%29.aspx)

# git - 每次 gitolite-admin 推送后 Gitolite 接收后挂钩不再可执行

> ID：11310356
> 
> 赞同：2
> 
> 时间：2012-07-03T11:54:45.257
> 
> 标签：git, permissions, hook, gitolite

我找不到有关如何正确执行此操作的*任何*帖子/文章-通常这意味着您使用错误，所以我想我会在这里要求检查:)

我正在使用 Gitolite，它运行良好。我已经实现了一个常见的接收后挂钩，以便在我的团队成员推送新提交时收到通知，我为他们的存储库激活了该提交。我遇到的问题是，每次推送后（无论钩子是否已更改），文件都会被覆盖并获得以下权限：

```
rwel@ve-git:~$ ls -la /home/git/.gitolite/hooks/common/
total 36
drwxr-xr-x 2 git git  4096 Jul  3 13:23 .
drwxr-xr-x 4 git git  4096 May  1 15:41 ..
-rw------- 1 git git 21002 Jul  3 13:23 post-receive
-rwxr-xr-x 1 git git   308 May 15 16:24 update 
```

所以，每次我做一个`gitolite-admin rwel$ git push origin`，然后我必须登录到 git 服务器并手动做`sudo chmod a+x /home/git/.gitolite/hooks/common/post-receive`.

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-16T10:50:10.603

我[有同样的问题](https://groups.google.com/d/msg/gitolite/B4nTny5nXuo/aDkW_a1swGAJ)。简短的回答是：

查看 unix 机器上的 gitolite-admin 存储库，`chmod +x`您的文件并推送它。

从现在开始，该文件是可执行的，即使在 Windows 上克隆了 repo（因为[在 Windows 上克隆设置 core.fileMode=false](https://www.kernel.org/pub/software/scm/git/docs/git-config.html)）

# android - 为什么在 ICS 中我的 ProgressDialog 不像自定义 ProgressDialog？

> ID：11310359
> 
> 赞同：0
> 
> 时间：2012-07-03T11:54:55.410
> 
> 标签：android, styles, progressdialog, android-4.0-ice-cream-sandwich

我已经在带有 android 版本的 Transformer Prime 201 上安装了我的 .apk **。4.0.3**但 ProgressDialog 看起来不像设备上的自定义 ProgressDialog。

为什么会这样？为了在设备上使用自定义 ProgressDialog 样式，我必须在代码中进行哪些更改？

```
ProgressDialog progressDialog = new ProgressDialog(this.context);
progressDialog.setIndeterminate(true);
progressDialog.setCancelable(true);
progressDialog.setOnCancelListener(this);
progressDialog.setCanceledOnTouchOutside(false);
progressDialog.setMessage(MESSAGE);
progressDialog.show(); 
```

![在此处输入图像描述](../Images/f40af2bb75bb14c2ed5b4d3c99587009.png) ![在此处输入图像描述](../Images/ed4a422b2d848fcfb8e6bf8cd97c6c81.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T19:45:37.017

上面接受的答案会起作用，但它的方法就像用大锤敲碎花生一样。您会弄坏螺母，但也可能损坏螺母下方的桌子。仅仅为了改变一个进度对话框的外观而改变整个应用程序的主题是没有意义的。

imo 更好的解决方案是保持应用程序的主题不变，只更改进度对话框的主题。您可以使用以下代码在所有 Android 版本上获取 Gingerbread 进度对话框外观。

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB)
    dialog = new ProgressDialog(yourActivity, AlertDialog.THEME_TRADITIONAL);
else
    dialog = new ProgressDialog(yourActivity); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T12:12:25.090

您需要将您的应用程序设置为 Holo 主题。仅当您在应用中使用 Holo 主题时才会显示此进度指示器。

问题是您不能简单地设置主题，因为 Android 版本小于 3 的设备没有此主题可用。

因此，您需要创建两个主题文件。一个在 res/values/ 文件夹中，一个在 res/values-v11/ 文件夹中 文件夹 res/values-v11 中的文件将为 API 级别 11 或更高级别的所有设备加载。

在 values-v11 文件夹中为您的应用定义一个主题，如下所示：

```
<resources>
   <style name="Theme" parent="@android:style/Theme.Holo.Light"></style>
</resources> 
```

在默认值文件夹中定义一个主题，如下所示：

```
<resources>
   <style name="Theme" parent="@android:style/Theme.Light.NoTitleBar"></style>
</resources> 
```

现在将此主题应用于清单中的应用程序：

```
<application
    android:name=".name.App"
    android:hardwareAccelerated="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/Theme" > 
```

有关这方面的更多信息，请阅读[有关主题和样式的文档](http://developer.android.com/guide/topics/ui/themes.html#SelectATheme)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-15T08:36:04.313

```
ProgressDialog progressDialog;

if(android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.HONEYCOMB){
   progressDialog = new ProgressDialog(new ContextThemeWrapper(context, android.R.style.Theme_Holo_Light_Dialog));
}else{
   progressDialog = new ProgressDialog(context);
}

progressDialog.setMessage("Loading....");
progressDialog.show(); 
```

# android - 安卓形状背景

> ID：11310362
> 
> 赞同：49
> 
> 时间：2012-07-03T11:55:08.383
> 
> 标签：android, background, shape

是否可以在 xml 中绘制一个形状，并使用 png 作为该形状的背景？我已经有了形状（它是一个带圆角的正方形），我想给那个正方形添加一个背景。

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-07-03T12:09:14.527

是的，您可以使用任何形状文件作为任何视图的背景。此示例在形状周围创建带有白色和黑色边框的圆形背景。

样本 ：

圆角.xml

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <corners
        android:bottomLeftRadius="10dp"
        android:bottomRightRadius="10dp"
        android:topLeftRadius="10dp"
        android:topRightRadius="10dp" />

    <stroke
        android:width="0.5dp"
        android:color="@color/color_grey" />

    <solid android:color="@color/color_white" />

</shape> 
```

你可以用这个，

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center_horizontal"
    android:background="@drawable/rounded_corner"
    android:orientation="vertical" > 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T12:48:38.350

//试试这个方法，这对你有帮助

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/rounded_corner"
        android:padding="2dp"
        android:orientation="vertical" >
<ImageView 
     android:layout_width="wrap_content"
     android:layout_height="wrap_content" 
    android:background="@drawable/yourdrawable />
</LinearLayout> 
```

# asp.net-mvc-3 - 在telerik asp.net mvc面板中传递的网址

> ID：11310366
> 
> 赞同：0
> 
> 时间：2012-07-03T11:55:22.483
> 
> 标签：asp.net-mvc-3, telerik, telerik-mvc

我在 mvc3 中使用 Telerik 面板栏，并且在传递 Url 时遇到问题？？任何人都可以帮助我如何在我看来通过 Url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:53:26.153

您需要在模型中动态引入控制器/操作名称并创建并传递 url

```
.Items(sub =>
              {
              for (int i = 0; i < Model.Count(); i++)
                 {

                  sub.Add().Text(Model.ElementAt(i).DisplayText)
                   .Url(Url.Action(Model.ElementAt(i).ActionName, Model.ElementAt(i).ControllerName, new { id = Model.ElementAt(i).IDParam }))

              }}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:03:38.323

If I understand your question correctly, I did something similiar to this using the PanelBar and Grid.In the panel bar, put a js function in the OnSelect event:

```
Html.Telerik().PanelBar()
   .Name("PanelBar")
      .ClientEvents(events =>
      {
         events.OnSelect("getEvent");
      })
      .Items(panelbar =>
      {
         panelbar.Add()
            .Text("Header Text")
            .Expanded(true)
            .Items(item =>
            {
               item.Add()
                   .Text("Test1");
               item.Add()
                   .Text("Test2");
            });
     }).Render(); 
```

In the getEvent function, assign a variable to each item and make an ajax post to an actionresult on your controller or something. In my case I just made the grid rebind.

```
function getEvent(e) {
        panelItem = $(e.item).text();
        if (panelItem == "Test1") {
            var eventid1 = 1;
        }
        if (panelItem == "Test2") {
            var eventid2 = 2;
        }
        //make ajax post here or something
        $('#TheGrid').data('tGrid').rebind();
        //            $.ajax({
        //                url: '/Controller/Action',
        //                type: 'POST',
        //                data: {
        //                    eventid1: eventid1,
        //                    eventid2: eventid2,
        //                    panelItem: panelItem
        //                }
        //            });
} 
```

and in your controller make a conditional statement for the eventids and perform the action you want. Hope this helps.

# php - PHP列出文件夹中.txt文件的内容

> ID：11310368
> 
> 赞同：1
> 
> 时间：2012-07-03T11:55:29.307
> 
> 标签：php, jquery, html

在我的网站上，我有一个上传故事功能，其中包含用户编写的标题和故事。它将其作为文本文件上传到目录中。有没有办法使用 php 或任何东西列出这些文件的内容？另外，我只想显示故事的 200 个字符，并有一个“显示完整故事”按钮，可以显示完整的故事（我将使用 jQuery）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:03:16.793

```
$dataArray = array();
//Number of chars for the string
$num = 200;

//Check if DIR exists
if ($handle = opendir('.')) {
    //Loop over the directory
    while (false !== ($file = readdir($handle))) {
        //Strip out the . and .. files
        if ($file != "." && $entry != "..") {
            $dataArray[] = array();
            //Store file contents
            $filecontent = file_get_contents($file);
            //Split the content and store in array
            $length = strlen($filecontent);
            $dataArray[] = array(substr($filecontent, 0, $num), substr($filecontent, $num, $length )); 
        }
    }
    //close the dir
    closedir($handle);
} 
```

有了这个，您将获得一个包含 .txt 文件的所有内容的数组，分成 2 个字符串，一个包含 200 个字符，另一个包含其余字符。

长度为 200 的字符串是 $dataArray[x][0]，另一个是 $dataArray[x][1]。

现在您可以在 HTML 中使用它：

```
<?php foreach($dataArray as $data) { ?>
    <div class="visible">
        <?php echo $data[0]; ?>
    </div> 
    <div class="hidden">
        <?php echo $data[1]; ?>
    </div>
<?php } ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T12:05:12.037

在 php.net: 打开一个目录: opendir() [http://php.net/manual/en/function.opendir.php](http://php.net/manual/en/function.opendir.php)

```
$dir = opendir('/path/to/files'); 
```

读取目录（可以循环）： readdir() [http://www.php.net/manual/en/function.readdir.php](http://www.php.net/manual/en/function.readdir.php)

```
while (false !== ($file= readdir($dir))) {
        //$file has the filename
    } 
```

获取文件内容：file_get_contents() [http://php.net/manual/es/function.file-get-contents.php](http://php.net/manual/es/function.file-get-contents.php)

```
$content=file_get_contents($file); 
```

# c# - SharpPDF 在服务器端 asp .Net C# 中创建 PDF

> ID：11310371
> 
> 赞同：3
> 
> 时间：2012-07-03T11:55:38.257
> 
> 标签：c#, asp.net, server-side, sharppdf

我有创建 PDF 的示例，但是对于 PDF 的服务器端创建，没有关于 SharpPDF 的文档。我认为这是关于流概念的，我没有关于它的信息。

```
pdfDocument myDoc = new pdfDocument("TUTORIAL", "ME");
pdfPage myPage = myDoc.addPage();

myPage.addText("Hello World!", 200, 450, sharpPDF.Enumerators.predefinedFont.csHelvetica, 12);
myDoc.createPDF(@"c:\test.pdf");
myDoc.
myPage = null;
myDoc = null; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T11:58:03.583

有一个重载[`createPDF`](http://sharppdf.sourceforge.net/DOC/sharpPDF.pdfDocument.createPDF_overload_1.html)需要一个`Stream`. 您可以使用它在服务器的内存中创建 PDF，然后将其流式传输回客户端。

这是一个示例（使用 ShartPDF 版本 1.3.1 进行了尝试）：

```
PdfDocument myDoc = new pdfDocument("TUTORIAL", "ME");
pdfPage myPage = myDoc.addPage();
myPage.addText("Hello World!", 200, 450, predefinedFont.csHelvetica, 12);

Response.ContentType = "application/pdf";
myDoc.createPDF(Response.OutputStream);
Response.Flush(); 
```

# sql-server-2008 - SQL Server 代理未使用密码或 xml 配置或表配置执行 SSIS 包

> ID：11310378
> 
> 赞同：1
> 
> 时间：2012-07-03T11:55:59.137
> 
> 标签：sql-server-2008, ssis, sql-server-agent

我有一个 SSIS 包，它从 MySQL 数据库中获取数据并将其放入 SQL Server 表中。与 MySQL 的连接是 ADO.net。该软件包在 BIDS 中运行良好。

我想将包部署为在 SQL Server 2008 上作为作业运行。MySQL 连接需要将敏感数据存储在包中或保存在某些外部配置源中。如果它存储在包中，它将使用特定于我的 Windows 用户配置文件的密钥进行加密，或者必须通过密码进行保护。

我尝试了三种设置 SQL Server 代理作业来执行此包的方法，但都失败了：

**使用密码**

我将包的 ProtectionLevel 设置为 EncryptSensitiveWithPassword 并为包提供密码。然后我将包的副本保存到 msdb。然后我可以连接到 SSIS 并运行该程序包，此时会提示我输入密码。

当我尝试将其安排为 SQL Server 中的作业时，系统会提示我通过单击作业步骤属性的配置选项卡来输入密码，我可以看到 /DECRYPT 开关已添加到命令行选项卡中。运行方式属性设置为 SQL Server 代理服务帐户，该帐户映射到具有 sysadmin 服务器角色的数据库登录。当我尝试开始这项工作时，我收到以下错误：

```
Executed as user: DOMAIN\UserROLE. Microsoft (R) SQL Server Execute Package Utility  Version 10.0.5500.0 for 64-bit  Copyright (C) Microsoft Corp 1984-2005\. All rights reserved.    Started:  12:31:30  Error: 2012-07-03 12:31:31.20     Code: 0xC00291EC     Source: Get Data Execute SQL Task     Description: Failed to acquire connection "DATA_SOURCE". Connection may not be configured correctly or you may not have the right permissions on this connection.  End Error  DTExec: The package execution returned DTSER_FAILURE 
```

似乎使用这种方法，包密码本身并没有存储在任何地方供作业访问它。

**使用 XML 配置文件**

然后，我创建了包的副本并将 ProtectionLevel 设置为 DontSaveSensitive，并设置了包配置以将 MySQL 凭据存储在 XML 文件中。然后我将它保存到 msdb，然后当我从 Integration Services 运行包时，我可以提供配置文件的路径，一切都很好。但是，当我再次为包设置作业时，我指向服务器上的配置文件，但作业失败并出现相同的错误。我想知道这是否是因为 SQL Server 代理没有关联的 Windows 帐户来允许它从存储在文件系统中的 XML 文件中读取。

**使用 SQL Server 表配置**

这次我创建了包的副本并将 ProtectionLevel 设置为 ServerStorage。然后我在目标 SQL Server 数据库中创建了一个 [SSIS 配置] 表。我修改了此表中的条目以包含 MySQL 数据源的密码。同样，包从 Integration Services 成功运行，但在从作业运行时失败并出现与以前相同的错误。我已经检查了 SQL Server 代理是否能够从 [SSIS 配置] 表中读取，我设置了一个独立的作业来测试它。

有人对我在这里应该做什么有任何建议吗？

我正在考虑为此放弃 SQL Server 代理作业，并回到由 windows 调度程序简单地安排程序包，但在认输之前我想我会先在这里尝试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:52:45.613

我正在使用`EncryptSensitiveWithPassword`按照您上面描述的设置加密密码的方法，并且看不到您做错了什么。请记住在使用`keep protection level of the original package`集成服务导入包时使用选项，但看起来您也在这样做。

尝试将角色设置`SQLAgentOperatorRole`为您的 SQL Server 代理服务帐户，您没有提及，我不确定您是否这样做。这可能会解决您的权限问题。（喜欢通过评论来回答，但我在这里也没有权限:)

# javascript - 如何使用此 JavaScript 返回带有特定哈希标签的推文？

> ID：11310379
> 
> 赞同：1
> 
> 时间：2012-07-03T11:55:59.683
> 
> 标签：javascript, regex, twitter

```
filter: function(t){ return  /^@\w+/.test(t.tweet_raw_text); }, 
```

如果此 JS 返回以符号开头的推文`@`，如何返回带有特定哈希标签或其中单词的推文？

我尝试的一切都会破坏它！它起源于这个JS：

[http://tweet.seaofclouds.com/](http://tweet.seaofclouds.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T05:34:55.400

首先让我们分解正则表达式，看看它是如何工作的。

`/^@\w+/``/`-开头和结尾的斜线 ( ) 只是告诉 JavaScript 这是一个正则表达式的分隔符。

`^`- 匹配字符串的开头。
`@`- 匹配文字 @ 符号。
`\w`- 匹配任何字母数字字符，包括下划线（缩写`[a-zA-Z0-9_]`）。
`+`- 是 的缩写`{1,}`。匹配前一个字符或表达式 ( `\w`) 一次或多次。

这就是您匹配以该`@`符号开头的推文的方式。要匹配包含特定主题标签的推文，您可以将上面的正则表达式替换为您尝试匹配的特定主题标签。

例如，`/#StackOverflow/.test(t.tweet_raw_text);`将匹配包含确切主题标签的推文`#StackOverflow`。不过，这是一个区分大小写的模式，因此它与 hashtag 不匹配`#stackoverflow`。要使 JavaScript 正则表达式不区分大小写，只需`i`在结束分隔符后添加修饰符，如下所示： `/#StackOverflow/i`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T14:43:35.360

感谢您的上述回复 - reg 表达式的一个很好的教训。

我也解决了这段代码的问题：

```
filter: function(t){ if (t.tweet_raw_text.indexOf("#EF1") !== -1; }, 
```

# camera - Android 使用内置摄像头拍摄多张照片？

> ID：11310382
> 
> 赞同：0
> 
> 时间：2012-07-03T11:56:11.680
> 
> 标签：camera, android-camera, android-camera-intent, built-in

我想问一下内置相机是否可以拍照并在特定文件夹中更改名称。

通常，我们调用这段代码来启动内置摄像头。

```
Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE );
startActivityForResult( intent, 0 ); 
```

在 onActivityResult() 中，我们获取刚刚拍摄的位图并将其保存在特定照片下。据我所知，它适用于单张照片。但是，如果用户拍摄了很多照片，我可以获得这些照片名称的列表吗？

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:00:48.010

每次用户拍摄照片时，您都必须使用不同的名称保存它（在“onActivityResult()”下），这样最后一次拍摄就会覆盖前一次。一个简单的解决方案是在照片名称中连接一个时间戳，这样照片名称将变得唯一，并将其​​保存为新照片。

如果您想获取保存的照片列表，可以使用此示例“android-coding.blogspot.gr/2011/10/list-filesdirectory-in-android.html”

# django - 如何解决 django 的 modelform 保存问题？

> ID：11310385
> 
> 赞同：0
> 
> 时间：2012-07-03T11:56:33.327
> 
> 标签：django, view, model, save, modelform

我希望能够根据通过引用产品的 url 传递的参数保存表单提交的数据（而不是让用户通过下拉菜单指定产品）。关于我如何做到这一点的任何想法？

```
url(r'^products/(?P<product_id>\d+)/reviews/$', 'view_reviews'),
url(r'^products/(?P<product_id>\d+)/add_review/$', 'add_review'), 

def add_review(request, product_id):
    p = get_object_or_404(Productbackup, pk=product_id)
    if request.method == 'POST':
        form = ReviewbackupForm(request.POST)
        if form.is_valid():
            form.save()
            return HttpResponseRedirect(reverse('reserve.views.view_reviews', kwargs={'product_id':p.id}))
    else:
        form = ReviewbackupForm()
    variables = RequestContext(request, {'form': form, 'product_id': product_id})
    return render_to_response('reserve/templates/create_review.html', variables)

RATING_OPTIONS = (
    (1, '1'),
    (2, '2'),
    (3, '3'),
    (4, '4'),
    (5, '5'),
    (6, '6'),
    (7, '7'),
    (8, '8'),
    (9, '9'),
    (10, '10'),
)
class Reviewbackup(models.Model):
    review = models.CharField('Review', max_length = 2000)
    date = models.DateField('date')
    created_on = models.DateTimeField(auto_now_add = True)
    updated_at = models.DateTimeField(auto_now = True)
    user = models.CharField('Username', max_length =  200)
    rating = models.IntegerField(max_length=2, choices=RATING_OPTIONS)
    product = models.ForeignKey(Productbackup)
    def __unicode__(self):
        return self.review

class ReviewbackupForm(ModelForm):
    class Meta:
        model = Reviewbackup
        fields = ('review', 'rating', 'user', 'date')
        widgets = {
            'review': Textarea(attrs={'cols': 80, 'rows': 7}),
        }

class Productbackup(models.Model):
    website = models.CharField('Product name', max_length = 200)
    website_url = models.URLField('Product URL')
    category = models.ForeignKey(Categories)
    created_on = models.DateTimeField(auto_now_add = True)
    updated_at = models.DateTimeField(auto_now = True)
    def __unicode__(self):
        return self.website 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T12:17:15.203

您可以使用`form.save(commit=False)`，并在实例中设置模型的其他属性并再次保存。

在您看来，当您保存表单时：

```
if form.is_valid():
    review = form.save(commit=False)
    review.product = p
    review.save() 
```

# vb.net - vb.net 中的 Lambda 表达式错误

> ID：11310386
> 
> 赞同：1
> 
> 时间：2012-07-03T11:56:34.230
> 
> 标签：vb.net, linq

我是这个 linq 东西的新手。我以前从未使用过任何 linq。因此，当我有一个将选定项目从左侧列表移动到右侧列表的场景时，我从 C# 中的搜索中获得了一个不错的解决方案，但我将其转换为 VB。这是我得到的代码

```
Dim leftItems = lb_left.Items.Cast(Of ListItem)().ToList()

Dim rightItems = lb_right.Items.Cast(Of ListItem)().ToList()

'Get all selected items from left box

Dim LeftSelectedItems = leftItems.Where(Function(a) a.Selected).ToList()

'Add all selected items to right box
 'Clear lb_right Items and add sorted list

lb_right.Items.Clear()

LeftSelectedItems.Union(rightItems).OrderBy(Function(a) a.Text).ToList().ForEach(Function(b) lb_right.Items.Add(b))

'Remove all selected items from left box

LeftSelectedItems.ForEach(Function(a) lb_left.Items.Remove(a)) 
```

以上是我从互联网上获得的从左到右移动列表框的代码。但是在那个函数上`ForEach`它给了我一个错误“表达式不产生值”

我真的被这个错误困住了。请求您的快速回复..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T12:02:57.623

```
LeftSelectedItems.ForEach(Sub(a) lb_left.Items.Remove(a)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T12:01:27.337

从[VB lambda 表达式](http://msdn.microsoft.com/en-us/library/bb531253.aspx)的文档中：

> 单行函数的主体必须是返回值的表达式，而不是语句。单行函数没有 Return 语句。单行函数返回的值是函数体中表达式的值。

正如编译器所说，`Add`不返回值。

我相信您*可以*使用`Sub`而不是`Function`, 并使用多行版本 - 但我认为这不是在这里工作的*最佳*方式。

看起来您应该创建一个查询，然后使用一种“添加所有这些项目”调用。不幸的是，您没有告诉我们 的类型`lb_right`，甚至您是否使用 WPF、WinForms、ASP.NET 等。

# xcode - 如何使用 UISearchBar 搜索 NSMutableArray？

> ID：11310389
> 
> 赞同：1
> 
> 时间：2012-07-03T11:56:50.620
> 
> 标签：xcode, nsmutablearray, uisearchbar

我搜索了很多地方但找不到答案，所以我决定设置自己的问题。

我用来自 JSON 的数据填充 UITableView。我的数据结构是这样的：

```
NSMutableArray* studentList = [(NSDictionary*)[responseString JSONValue] objectForKey:@"StudentList"]; 
```

JSON：

```
{
"StudentList":[
    {
      "StudentID":"08DH11039",
      "StudentFirstName":"Nguyen Lam",
      "StudentLastName":"Binhh"
    },
    {
      "StudentID":"08DH11163",
      "StudentFirstName":"Nguyen Minh",
      "StudentLastName":"Duc"
    },
    {
      "StudentID":"08DH11038",
      "StudentFirstName":"Nguyen Bao",
      "StudentLastName":"Khuyen"
    },
    {
      "StudentID":"08DH11037",
      "StudentFirstName":"Nguyen Tran Duy",
      "StudentLastName":"Phuong"
    }
  ]
} 
```

向 UITableView 添加数据：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
        static NSString *CellIdentifier = @"Cell";
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if (cell == nil) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        }
        NSDictionary *student = [studentList objectAtIndex:indexPath.row];
        cell.textLabel.text = [NSString stringWithFormat:@"%d. %@ %@", indexPath.row+1, [student objectForKey:@"StudentFirstName"], [student objectForKey:@"StudentLastName"]];
        cell.textLabel.font = [UIFont fontWithName:@"Helvetica" size:15];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
        return cell;
    } 
```

我还添加了一个 UISearchBar 但它不起作用：

```
- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString
{
    [searchData removeAllObjects];

    NSArray *student; 

    for(student in studentListCopy) //take the n group (eg. group1, group2, group3)
    {
        NSLog(@"%@", student);
        NSMutableArray *newGroup = [[NSMutableArray alloc] init];
        NSString *element;

        for(element in student)
            NSRange range = [element rangeOfString:searchString
                                           options:NSCaseInsensitiveSearch];

            if (range.length > 0) { //if the substring match
                [newGroup addObject:element]; //add the element to group
            }
        }

        if ([newGroup count] > 0) {
            [searchData addObject:newGroup];
        }
    }

    return YES;
} 
```

请帮我让它工作。我想搜索在 TableView 中显示的 FirstName 或 LastName。

我是 iOS 编程新手。非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:19:53.573

我认为这对您了解如何`NSMutableArray`与 UISearchBar 和 UITableView 一起使用很有用。我从网上得到的例子是[here](https://github.com/AalokParikh/MyDemoApps)。也许这会帮助你解决你的问题

# c# - 如何强制单元测试使用主应用程序根路径而不是 TestResults？

> ID：11310394
> 
> 赞同：0
> 
> 时间：2012-07-03T11:57:10.143
> 
> 标签：c#, .net, unit-testing, io

我使用 Microsoft Visual Studio 测试工具程序集进行单元测试。

从我的一个单元测试中，我测试了一个加载文本文件的类。

问题是，在单元测试运行时，becoms 的根目录：

C:\Users\Foo\Documents\Visual Studio 2010\Projects\MyProject\TestResults\Foo_HisComputer 2012-07-03 13_50_45\Out

这就是找不到该文件的原因。

如何强制单元测试运行时使用主应用程序的根路径，而不是在每次单元测试运行后生成的 TestResults 文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:03:46.363

您可以将文本文件添加到输出：

```
[TestClass]
[DeploymentItem("textfile.txt")]
public class BaseUnitTest
{
} 
```

您需要在项目中设置文本文件并将其复制到输出文件夹中。

否则，也许这个链接可以帮助你：

[http://msdn.microsoft.com/en-us/library/ms243187.aspx](http://msdn.microsoft.com/en-us/library/ms243187.aspx)

# javascript - 两个javascript文件，哪个方法先调用？

> ID：11310396
> 
> 赞同：0
> 
> 时间：2012-07-03T11:57:14.090
> 
> 标签：javascript

> **可能重复：**
> [在不同的 .js 文件中使用两个相同名称的方法](https://stackoverflow.com/questions/3492636/use-two-same-name-method-in-different-js-files)

我有两个名为 1.js 和 2.js 的 .js 文件，两个 .js 文件都有方法`display()`。在页面加载时调用哪个 .js 文件`display()`方法？`display()`1.js文件方法需要调用的时候如何设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:59:18.663

> 调用了哪些 .js 文件 display() 方法？

加载的第二个，因为它覆盖了第一个。

> 如何设置每次必须调用 1.js 文件 display() 方法需要调用。

我不知道这是什么意思...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:59:56.773

将 1.js 和 2.js 视为一个大 js 文件。该`display()`函数应该只存在一次

# c# - .NET/C# 十进制序列化问题

> ID：11310399
> 
> 赞同：5
> 
> 时间：2012-07-03T11:57:26.310
> 
> 标签：c#, .net, json.net

我有一个带有小数属性的类，我正在使用 JSON.NET 进行序列化和反序列化。我遇到的问题是，如果说十进制值为 100000000000023063.0 ，当我反序列化时，它会转换为 100000000000023000。我检查了 JSON 并且它肯定记录为 100000000000023063.0。

我已经调查过了&

```
decimal.Parse("100000000000023063.0") 
```

=

```
100000000000023063.0 
```

但

```
var d = (decimal)100000000000023063.0 
```

=

```
100000000000023000 
```

我可以通过存储为字符串来解决这个问题，并且有一个执行 decimal.Parse() 的属性，但有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T12:00:39.200

这是因为`100000000000023063.0`是一个`double`常数，然后您将其转换为`decimal`，并且精度正在丢失。

改为这样写：

```
var d = 100000000000023063.0M; 
```

`M`后缀告诉 C# 编译器该数字是一个常量`decimal`。

事实上，您甚至不需要小数点分隔符 - 即`1M == 1.0M`两者都是`decimal`s。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T12:03:00.307

这是因为您将双精度转换为小数，而您应该将值定义为小数：即

```
var q = 100000000000023063.0M; 
```

M 后缀表示数字常量是 Decimal 类型

# asp.net-mvc-3 - 如何捕获保存外键字段值的异常？

> ID：11310401
> 
> 赞同：0
> 
> 时间：2012-07-03T11:57:34.590
> 
> 标签：asp.net-mvc-3, exception-handling, foreign-keys

在尝试向外键字段添加值时，如果主键字段中不存在相同的数据，则会引发异常，例如“更新条目时发生错误”。但是，我想捕获相同的异常并将其显示在某个窗口中，并显示“值不存在，请输入不同的值”之类的消息。那么我怎样才能在 asp.net MVC 中捕捉到这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:23:17.493

不是很熟悉MVC，我用的是WinForms，但为什么不尝试找出你得到的错误代码。只需将您的代码放在 try catch 块中，如果引发异常，请检查错误代码是否与您的错误代码匹配，以及它是否使用 MessageBox 或类似的东西来显示您的消息。

希望这可以帮助

# wordpress - Wordpress 主页上的 Facebook Like 按钮损坏

> ID：11310402
> 
> 赞同：0
> 
> 时间：2012-07-03T11:57:45.363
> 
> 标签：wordpress, facebook, facebook-like, social

在过去 48 小时内，我的 Wordpress 网站主页 (http://www.sehkelly.com) 上的 Facebook Like 按钮停止工作。

单击时，它不会拉入主页数据，而是拉入最新帖子的数据。

我没有更改任何代码，但我的网站标题中的相关元标记是：

```
<meta property="og:url" content="<?php the_permalink(); ?>" />
<meta property="og:site_name" content="<?php bloginfo('name') ?>" />
<meta property="og:type" content="article" />
<meta property="fb:admins" content="1734267835" /> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:18:14.713

在 wp 中获取主页 url 是

```
<?php bloginfo('wpurl'); ?> 
```

所以，改变

```
<meta property="og:url" content="<?php the_permalink(); ?>" /> 
```

经过

```
<meta property="og:url" content="<?php bloginfo('wpurl'); ?>" /> 
```

# java - Java Swing 自定义光标不可见

> ID：11310404
> 
> 赞同：1
> 
> 时间：2012-07-03T11:57:56.790
> 
> 标签：java, swing, custom-cursor

我使用本[教程](http://www.codebeach.com/2008/02/using-custom-cursors-in-java.html)制作了一个自定义光标。问题是，一旦它发生变化，我什么也得不到。光标不可见。我尝试了那里给出的铅笔图像，这是我很快用油漆绘制的自定义图像，但它们都不起作用。

```
 public Cursor stoneCursor;
    Toolkit toolkit = Toolkit.getDefaultToolkit();
    Image image = toolkit.getImage("pencil.gif");
    Point hotspot = new Point(0,0);
    stoneCursor = toolkit.createCustomCursor(image, hotspot, "Stone");
    getContentPane().setCursor(stoneCursor); 
```

这当然是在 JFrame 中。

"。如果要显示的图像无效，光标将被隐藏（完全透明），热点将设置为 (0, 0)。" 这是在 createCustomCursor() 的 javadoc 中编写的，但它应该与pencil.gif 一起使用吗？

感谢您提前回答！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T12:08:28.623

你的代码对我有用。我打赌该工具包找不到您的图像，因此无法显示它。这是一个完整的工作示例，它使用与您相同的代码（除了我使用来自 URL 的公共图像）：

```
import java.awt.Cursor;
import java.awt.Image;
import java.awt.Point;
import java.awt.Toolkit;
import java.net.MalformedURLException;
import java.net.URL;

import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class TestCursor {

    protected void initUI() throws MalformedURLException {
        JFrame frame = new JFrame("Test text pane");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        Toolkit toolkit = Toolkit.getDefaultToolkit();
        Image image = toolkit.getImage(new URL("http://fc03.deviantart.net/fs71/f/2010/094/7/9/Kalyan_hand_cursor_1_by_Zanten.png"));
        Point hotspot = new Point(0, 0);
        Cursor cursor = toolkit.createCustomCursor(image, hotspot, "Stone");
        frame.setCursor(cursor);

        frame.setSize(600, 400);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                try {
                    new TestCursor().initUI();
                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T12:12:14.287

如果您使用的是 Java 1.5，那么您可能会对[这个 SO 问题](https://stackoverflow.com/questions/313916/custom-cursor-in-a-swing-jdialog)感兴趣。如果你使用更新的东西，这段代码也很适合我（刚刚尝试过）。如果图像不存在或无法正确访问，那么我会遇到与您相同的效果。

确保正确加载图像。

# php - is_uploaded_file() 当图片文件为 .bmp 时将其空白，为什么？

> ID：11310405
> 
> 赞同：0
> 
> 时间：2012-07-03T11:57:57.977
> 
> 标签：php, upload

当我上传任何文件时，一切看起来都很好。我在图片文件夹中有这些图片。未知部分是当我上传 bmp 文件时。我检查文件类型以查看它们是否为 jpg、gif 等。但代码没有到达那里。
我也回应了 $_FILES['upload'] 它如下：

```
Array
(
    [name] => picture.bmp
    [type] => 
    [tmp_name] => 
    [error] => 1
    [size] => 0
) 
```

代码是：

```
if( is_uploaded_file( $_FILES['upload']['tmp_name'] ) ) 
{
       // it does not reach here when it is bmp.
} 
```

bmp 文件大小约为 2.5MB，upload_max_filesize = 5M in `PHP.ini`. 我以前没有这个问题。这里有什么我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:03:10.407

请参阅 php[上传错误代码](http://php.net/manual/en/features.file-upload.errors.php)
根据 php 文档

```
UPLOAD_ERR_INI_SIZE 
```

值：1；上传的文件超过了php.ini 中的[upload_max_filesize](http://www.php.net/manual/en/ini.core.php#ini.upload-max-filesize)指令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:00:11.583

错误 1[​​表示](http://php.net/manual/en/features.file-upload.errors.php)：

> 上传的文件超过了 php.ini 中的 upload_max_filesize 指令。

也许您编辑了错误的`php.ini`，或者稍后更改了指令`ini_set`。可以肯定的是，`phpinfo()`在上传处理代码之前做一个正确的。

# windows-8 - Windows 8 快照视图的问题

> ID：11310413
> 
> 赞同：1
> 
> 时间：2012-07-03T11:58:30.820
> 
> 标签：windows-8, html5-canvas

我正在设计一个`windows 8`使用的游戏`HTML5`，但我的游戏无法在快照视图中显示，我想知道是否可以只显示图像（如：商店应用程序）？！如果是这样，我该怎么做？！

我也可以将我的游戏设置为不在快照视图中工作，比如寻找方向吗？

*   我想让它类似于下一个屏幕截图

![在此处输入图像描述](../Images/517ed135668b7b8acaa0cad3ed9c5c4b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:35:35.780

您有两种选择来更改快照视图。您可以在应该已经在您的 CSS 中的不同媒体查询中指定不同的 CSS，或者您可以在页面的 updateLayout 事件中使用命令式代码来执行此操作。对于您正在尝试的内容，我只会有一个带有您的图标的 div 和一个带有其他所有内容的 div，并更改媒体查询中的“显示”属性。如果您需要我更具体一些，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T20:09:31.923

非常感谢您的帮助，我解决了您所说的“检测应用程序何时处于快照视图中，因此它将按照我在 CSS 文件中设置的方式显示

示例代码

检查快照视图

```
window.onresize = function () {
            var myViewState = Windows.UI.ViewManagement.ApplicationView.value;
            var viewStates = Windows.UI.ViewManagement.ApplicationViewState;
            if (myViewState == viewStates.snapped) 

                //do what you want

        } 
```

那么你应该事先设置你的 CSS 文件

```
@media screen and (-ms-view-state: snapped) {
//do what you want to show when app go to snap view stat
} 
```

# apache - Apache Tomcat 6.0.35 在生产中占用 100% CPU

> ID：11310417
> 
> 赞同：3
> 
> 时间：2012-07-03T11:58:58.030
> 
> 标签：apache, tomcat, grails, amazon-ec2

我一直在生产环境中使用 apache-tomcat-6.0.35。我们的应用程序使用小型实例托管在 Amazon EC2 上。我们面临的问题是 apache tomcat 正在使用 100% CPU。我们已经通过运行 htop 进行了验证，它显示了正在运行的多个 tomcat 线程。

Out 应用程序已在 Grails 2.0.1 中开发。

我们很困惑，为什么会这样？任何机构都可以提出任何解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T16:22:51.693

### 可能的原因

这很可能是由于最近的[闰秒](http://en.wikipedia.org/wiki/Leap_second)及其对相当多的不了解/未准备好的 IT 系统的影响，包括 Linux、MySQL、Java 和确实 Tomcat 的部分 - 请参阅有关[“闰秒”错误在 Web 上造成严重破坏](http://www.wired.com/wiredenterprise/2012/07/leap-second-bug-wreaks-havoc-with-java-linux)的连线文章整个故事：

> [...]，说它遇到了使用 Java-happy Tomcat Web 服务器来服务其站点的跳跃错误问题。“<strong>我们运行 tomcat 的网络服务器的响应几乎为零（我们能够处理一些请求），”网站发言人在一封电子邮件中写道。“我们能够连接到服务器以重置它们。**只有重新启动服务器才能解决问题**。” *[强调我的]*

### 解决方法/修复

因此，解决方案通常归结为*将其关闭并再次打开*，即重新启动有问题的服务器，尽管您可以通过简单地设置日期来避免这种情况，例如在以下情况下建议：

*   Linux/Tomcat，请参阅[2012 年 7 月 1 日 Linux 问题？高 CPU/负载？可能是闰秒引起的！](http://linux.uits.uconn.edu/mas02041/2012/07/01/july-1-2012-tomcat-problems-high-cpuload-probably-caused-by-the-leap-second/)：

    > 显然，只需强制重置日期就足以解决问题：
    > 
    > ```
    > date -s "`date`" 
    > ```

*   MySQL，请参阅[MySQL 和闰秒，高 CPU 和修复](http://blog.mozilla.org/it/2012/06/30/mysql-and-the-leap-second-high-cpu-and-the-fix/)（也链接自 wwwhizz 对[MySQL 高 CPU 使用率](https://stackoverflow.com/a/11293475/45773)的回答的评论，您将在其中找到两个具体的变体如何根据您的操作系统执行此操作）：

    > 修复非常简单——只需设置日期。或者，您可以重新启动机器，这也可以。重新启动 MySQL（或 Java，或其他）并不能解决问题。

### 背景/建议的解决方案

请注意，虽然根本问题非常棘手，但原则上几乎是未知的，因此有突出的帖子/用户对此进行了警告和解释，并提供了原则上如何处理它的建议，特别是：

*   Marco Marongiu[对闰秒的一次谦虚尝试](http://my.opera.com/marcomarongiu/blog/2012/06/01/an-humble-attempt-to-work-around-the-leap-second)
*   克里斯托弗·帕斯科（Christopher Pascoe ）的[时间、技术和跳秒](http://googleblog.blogspot.de/2011/09/time-technology-and-leaping-seconds.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T03:41:09.423

根据所提供的信息，我们不能肯定地说什么。对于性能问题，我会推荐一个分析器，尤其是[JProfiler](http://www.ej-technologies.com/products/jprofiler/overview.html)来调查这个问题的原因。通过这种方式，您将能够找到问题所在。

这个程序有一个试用许可证，我认为这足以快速浏览。

**更新**：仔细阅读您的问题后，我看到您有很多 tomcat 实例为网站运行？表示之前的tomcat实例未能停止；他们仍然运行并占用所有资源。这个有可能。您必须先杀死所有旧的 tomcat 进程，然后再尝试启动一个新进程。

如果您在 Linux 上，您可以通过“kill -9”手动终止进程，然后再尝试重新启动服务器。

# php - 向客户端显示网站 MySQL 表的名称是否安全？

> ID：11310421
> 
> 赞同：2
> 
> 时间：2012-07-03T11:59:22.787
> 
> 标签：php, javascript, jquery, database, security

我目前正在创建一个基于[jQuery 验证器插件](http://docs.jquery.com/Plugins/Validation)的表单验证脚本。所以，简单的配置很容易，比如最小长度、最大长度、需要等。
之后，我决定从客户端检查用户名/电子邮件的可用性，所以我不得不使用该`remote`选项，这是我的一个选项创建规则数组时必须指定。因此，在创建规则时，我必须将数据发送到 php 脚本并检查输入字段的可用性。

但由于我要检查多个输入字段的可用性，我创建了一个函数（在客户端）为每个字段重复使用它，并且该函数需要输入字段的 ID 和 MySQL 表的名称，以把事情说清楚，这是功能：

注意：
1.check_input 是一个 php 脚本，它将获取输入字段的值和要检查的表，它会返回一个 json 编码的布尔值，如果表中没有匹配项，则为 true，否则为 false。

```
function check_input(input, table){

        $.ajax({
            type:"POST",
            url:site_url+"site/check_input",
            data:{
                input:input,
                table:table,
            }

        }).done(function(resp){
            var is_unique = JSON.parse(resp);
            return is_unique;
        });
    } 
```

并且将通过将`remote`选项设置为来调用此函数
`check_input($('#field').val(), 'table.column');`。

因此，如您所见，我必须从客户端指定我的 MySQL 表，并且每个用户（好用户和坏用户）都可以看到这一点，这被认为是不安全还是不好的做法？
如果不是，检查可用性的合适方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T12:02:27.717

这是不好的设计实践，因为您应该将数据库架构与客户端视图代码分离（如果您想更改数据库架构怎么办）。

这是一种不好的安全做法，因为看起来您正在使用字符串来构建 SQL 查询。如果您不了解 SQL 注入攻击，请了解它们。这是一个经典案例。

投入额外的工作并创建一个不需要公开表名的适当 PHP API。

# android - 无法在android应用程序中创建文件类

> ID：11310422
> 
> 赞同：0
> 
> 时间：2012-07-03T11:59:24.493
> 
> 标签：android, file, camera, save, image

我正在尝试制作一个应用程序，它可以捕获图片，然后将其保存在特定文件夹中。问题是我无法让文件类工作。

```
public class startScreen extends Activity {

private static final int CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE = 100;
public Uri picUri;

public void makeFlash(View startScreen) {
    startCameraActivity();
}

protected void startCameraActivity() {

    // create Intent to take a picture and return control to the calling
    // application
    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

    picUri = getOutputMediaFileUri(1); // create a file to save the image
    intent.putExtra(MediaStore.EXTRA_OUTPUT, picUri); // set the image file
                                                        // name

    // start the image capture Intent
    startActivityForResult(intent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE);

}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_start_screen);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_start_screen, menu);
    return true;
}

private static Uri getOutputMediaFileUri(int type){
      return Uri.fromFile(getOutputMediaFile(type));
}

private static File getOutputMediaFile(int type) {
    if (Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED)) {

        File mediaStorageDir = new File(Environment.getExternalStorageDirectory()
                + "/SnapFlash", "SnapFlash");

        // Create the storage directory if it does not exist
        if (!mediaStorageDir.exists()) {
            if (!mediaStorageDir.mkdirs()) {
                Log.d("MyCameraApp", "failed to create directory");
                return null;
            }
        }

        // Create a media file name
        String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss")
                .format(new Date());
        File mediaFile;
        if (type == 1) {
            mediaFile = new File(mediaStorageDir.getPath() + File.separator
                    + "SF_" + timeStamp + ".jpg");
        } else {
            return null;
        }

        return mediaFile;
    } else{
        return null;
    }

}

} 
```

在调试时，它看起来好像从未设置过 mediaStorageDir。相机确实运行，但图片保存在默认图片文件夹中。

# regex - GWT 正则表达式和空字符串

> ID：11310430
> 
> 赞同：2
> 
> 时间：2012-07-03T12:00:07.747
> 
> 标签：regex, gwt, string

有人可以解释为什么这个片段：

```
// import com.google.gwt.regexp.shared.MatchResult;
// import com.google.gwt.regexp.shared.RegExp;

RegExp regExp = RegExp.compile("^$");
MatchResult matcher;
while ((matcher = regExp.exec("")) != null)
{
    System.out.println("match " + matcher);
} 
```

给出令人难以置信的比赛数量？我使用 GWT 的*compile()*、 g、 i 和 m 实现允许的不同修饰符进行了测试。它仅适用于 m（多行）。我只想检查空字符串。

[编辑] 新方法

```
private ArrayList<MatchResult> getMatches(String input, String pattern)
{
    ArrayList<MatchResult> matches = new ArrayList<MatchResult>();
    if(null == regExp)
    {
        regExp = RegExp.compile(pattern, "g");
    }
    if(input.isEmpty())
    {
        // empty string : just check if pattern validate and
        // don't try to extract matches : it will resutl in infinite
        // loop.
        if(regExp.test(input))
        {
            matches.add(new MatchResult(0, "", new ArrayList<String>(0)));
        }
    }
    else
    {
        for(MatchResult matcher = regExp.exec(input); matcher != null; matcher = regExp
                .exec(input))
        {
            matches.add(matcher);
        }
    }
    return matches;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T13:11:24.547

你的`regExp.exec("")`with`RegExp.compile("^$")`永远不会返回`null`，因为空字符串`""`是 regex 的匹配项`^$`，它显示为*"nothing between beginning and end of line/string"*。

所以你`while`是无限循环。

另外，你打印的是

```
System.out.println("match " + matcher); 
```

...但您可能想使用

```
System.out.println("match " + matcher.getGroup(0)); 
```

* * *

另请参阅[GWT 检查文本框是否为空](https://stackoverflow.com/questions/6264288/gwt-checking-if-textbox-is-empty)。

# wcf - WCF 对不发送 401 而是 500 的服务的基本身份验证

> ID：11310433
> 
> 赞同：1
> 
> 时间：2012-07-03T12:00:12.253
> 
> 标签：wcf, basic-authentication, documentum, cmis

我必须通过带有 HTTP 基本身份验证的 WCF 使用 3 个 Web 服务（Sharepoint/Alfresco/Documentum CMIS）。

使用**Sharepoint**或 Alfresco，第一个请求没有 Authorization 标头，接收`HTTP 401`，由带有标头的 WCF 自动重试，一切都很好。

但是使用**Documentum**时，我会收到`HTTP 500`一个 SOAP 错误，因此 WCF 永远不会有机会发送标头并按原样返回异常。

我当然可以通过手动添加标题`HttpRequestMessageProperty`，但这对我来说看起来很丑陋。是否可以在 WCF 端配置任何内容**以发送带有第一个请求的标头**，或者在 Documentum 端配置以返回 401？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:08:35.263

您可以尝试将 Documentum 服务与另一个运行正常的 Web 服务器放在一起，然后传递请求？

为了使用 Windows Auth，我使用 IIS 对 Apache Tomcat 进行了类似的实现，并使用了 isapi_redirect.dll 过滤器来传递请求。更多信息可以在这里找到：http: [//tomcat.apache.org/connectors-doc/reference/iis.html](http://tomcat.apache.org/connectors-doc/reference/iis.html)

不知道这样的事情是否适合您，但它可能会在代码中提供更简单的解决方案。

# thrift - 错误：没有规则来制作目标`/usr/local/lib/libboost_unit_test_framework.a'

> ID：11310434
> 
> 赞同：4
> 
> 时间：2012-07-03T12:00:15.487
> 
> 标签：thrift

试图在我的笔记本电脑（ubuntu 11.10 64bit）中编译 thrift 0.8，得到这个错误。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-03-09T08:41:54.337

在 centOs 7 中：

libboost_unit_test_framework.a 是一个静态库。

你需要安装一个静态提升库：

yum install boost-devel-static

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-17T00:03:42.740

我发现解决方案在 debian jessie armhf 上使用 thrift 1.0.0-dev 调查了一个类似的问题：

设置到 libboost_unit_test_framework.a 的软链接以完成构建。
请参阅[https://issues.apache.org/jira/browse/THRIFT-3327](https://issues.apache.org/jira/browse/THRIFT-3327)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-23T07:37:25.530

对于 Fedora 26，我必须安装 boost-static

```
sudo dnf install boost-static 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T14:57:12.940

你安装了 libboost-test-dev 吗？尝试这样做：

```
sudo apt-get install libboost-test-dev 
```

或者，您还可以安装 Boost 中包含的所有其他开发库：

```
sudo apt-get install libboost-dev 
```

希望这可以帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-03T21:38:57.853

我使用的是 Debian 系统，但我能够使用以下命令完成编译 thrift。

```
$ sudo ln -s /usr/lib/libboost_unit_test_framework.a /usr/local/lib/libboost_unit_test_framework.a 
```

问题是来自[http://thrift.apache.org/docs/BuildingFromSource/](http://thrift.apache.org/docs/BuildingFromSource/)的以下用于配置的命令不影响其中一个库，它正在查找`/usr/lib/local`而不是`/usr/local`.

```
$ ./configure --with-boost=/usr/local 
```

第一个命令创建一个符号链接，以便可以在任一路径上访问该库。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-22T14:28:55.000

尝试在 Debian Jessie 上编译 CodeCompass，以下解决方案对我有用。我从`CodeCompass/scripts`目录内部运行它。您可能需要调整路径等。

```
sudo apt-get install -y libboost-test-dev
ln -sv /usr/lib/x86_64-linux-gnu/libboost_unit_test_framework.a ../../CodeCompass-deps/lib64/ 
```

# c# - 使用 DateTime.TryParse 方法进行有效日期检查

> ID：11310439
> 
> 赞同：14
> 
> 时间：2012-07-03T12:00:29.880
> 
> 标签：c#, datetime, tryparse

我正在使用`Datetime.TryParse`方法来检查有效的日期时间。输入日期字符串可以是任何字符串数据。但返回 false 作为无效的指定日期。

```
DateTime fromDateValue;
if (DateTime.TryParse("15/07/2012", out fromDateValue))
{
    //do for valid date
}
else
{
    //do for in-valid date
} 
```

**编辑：**我错过了。我需要检查有效日期和时间为“15/07/2012 12:00:00”。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-03T12:05:47.400

您可以使用[TryParseExact](http://msdn.microsoft.com/en-us/library/h9b85w22)方法，该方法允许您传递您想要支持的可能格式的集合。该`TryParse`方法取决于文化，因此如果您决定使用它，请务必小心。

例如：

```
DateTime fromDateValue;
string s = "15/07/2012";
var formats = new[] { "dd/MM/yyyy", "yyyy-MM-dd" };
if (DateTime.TryParseExact(s, formats, CultureInfo.InvariantCulture, DateTimeStyles.None, out fromDateValue))
{
    // do for valid date
}
else
{
    // do for invalid date
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T12:07:09.730

您应该使用`TryParseExact`您似乎已在您的情况下固定格式。

类似的东西也可以为你工作

```
DateTime.ParseExact([yourdatehere],
                    new[] { "dd/MM/yyyy", "dd/M/yyyy" },
                    CultureInfo.InvariantCulture,
                    DateTimeStyles.None); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T13:01:53.577

正如其他人所说，您可以使用`TryParseExact`.

有关更多信息和使用时间，您可以查看[MSDN 文档](http://msdn.microsoft.com/it-it/library/ms131044.aspx)

# php - 如何通过我的网站发送短信

> ID：11310441
> 
> 赞同：-6
> 
> 时间：2012-07-03T12:00:34.523
> 
> 标签：php

> **可能重复：**
> [来自 Web 应用程序的 SMS](https://stackoverflow.com/questions/432944/sms-from-web-application)

任何人都可以建议我如何通过我的网站发送短信，这是一个很好的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:09:59.990

您可以在您的网站中集成一些 SMS 服务，例如 CellTrust，您将能够发送 SMS。我就这样完成了微笑任务....

```
public function smsSend($number,$temppwd)
{
            $curl = curl_init();
            curl_setopt($curl, CURLOPT_URL,"https://gateway.celltrust.net/TxTNotify/TxTNotify?");
            curl_setopt($curl, CURLOPT_POSTFIELDS, "Username=xxxxx&Password=xxxx&CustomerNickname=xxxxxx&PhoneDestination=".$number."&%20CarrierId%20=5&Message=Hello, Your verification code is: ".$temppwd.". Thank you&XMLResponse=true");
            curl_setopt($curl, CURLOPT_HEADER, TRUE); 
            curl_setopt($curl, CURLOPT_RETURNTRANSFER, TRUE);
            $head=curl_exec ($curl);
            $httpCode = curl_getinfo($curl, CURLINFO_HTTP_CODE);
} 
```

# c - 在 C linux 中打开文件

> ID：11310444
> 
> 赞同：0
> 
> 时间：2012-07-03T12:00:42.367
> 
> 标签：c, linux, file-io

我正在使用 C 打开一个文件进行阅读。我有这个代码：

```
fp = fopen("./settings.cfg","r");
if (fp != NULL)
    printf("OK");
else
    printf("ERROR"); 
```

但我总是得到一个错误。

该文件位于可执行文件所在的文件夹中。我试过只写“settings.cfg”。可能是什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T12:05:55.950

试着`perror()`让图书馆本身告诉你什么是错的，如果有的话。

```
fp = fopen("./settings.cfg", "r");
if (fp != NULL)
    printf("OK\n");
else perror("fopen"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T12:05:45.323

您正在“当前目录”中打开文件，而不是“在可执行文件所在的文件夹中”。

事实上，unix 没有简单的方法来找到那个特定的文件夹。在 Linux 中，您可以 readlink() /proc/[your pid]/exe 链接来查找可执行文件并删除文件名部分——这在许多情况下都可以使用，但也有一些像硬链接这样的边缘情况会导致它失败.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T12:03:27.897

您从哪个目录运行程序？它不会将它所在的目录作为当前目录，它将从环境中继承。

也可能是权利，即文件归其他人所有，而您没有读取权限。

还要仔细检查文件名。这听起来很明显，但无论如何都要这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T14:12:52.617

如果您尝试打开的文件与您的 C 编译文件位于同一目录中，您必须简单地执行

```
fp = fopen("settings.cfg","r");
if (fp != NULL)
  printf("OK");
else
  printf("ERROR"); 
```

文件名中没有最初的“./”

# c# - .NET 将对象转换为...对象的目标是什么？

> ID：11310445
> 
> 赞同：4
> 
> 时间：2012-07-03T12:00:47.170
> 
> 标签：c#, .net, mvvm-light

我正在阅读 MvvmLight 的源代码，我在 ViewModelBase.cs 中看到了这个函数：

```
protected virtual void RaisePropertyChanged(string propertyName)
{
    PropertyChangedEventHandler changedEventHandler = this.PropertyChanged;
    if (changedEventHandler == null)
        return;
    changedEventHandler((object) this, new PropertyChangedEventArgs(propertyName));
} 
```

我不明白为什么这里有演员表，但因为这个功能在 MvvmLight 中很关键，我猜这样做有一个优势......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T12:04:32.860

如果您正在查看代码，`Reflector`您将始终看到类似这样的奇怪内容，因为 Visual Studio 允许您采用编译器为您解决的捷径，例如将类型作为对象传递而不将其强制转换为对象。

但是要回答您的问题，事件处理程序需要一个对象，因此它传递`this`为`(object)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T12:06:29.723

这样做的好处**可能是**因为方法有一个或多个重载，`changedEventHandler`并且类型`this`通常会调用更具体的重载，但在这种情况下，调用者希望确保`object`选择重载。

这是一个假设的猜想——它可能是也可能不是实际原因。:-)

# java - JCIP 书中定义的核心 java 中受保护对象的示例

> ID：11310450
> 
> 赞同：0
> 
> 时间：2012-07-03T12:01:09.433
> 
> 标签：java, multithreading, concurrency, synchronization

[JCIP](http://books.google.co.in/books?id=fv4tEfwgcjsC&pg=PA54&lpg=PA54&dq=a+guarded+object+can+be+accessed&source=bl&ots=bD67kCA81A&sig=F1sTTWii6z0uFsFasCiDrcr9gNg&hl=en&sa=X&ei=F97yT83zCsSxrAfEsLW7CQ&ved=0CEwQ6AEwAA#v=onepage&q=a%20guarded%20object%20can%20be%20accessed&f=false)将 Guarded 对象定义为：

> **守着**。只有持有特定的锁才能访问受保护的对象。受保护对象包括那些封装在其他线程安全对象中的对象和已知由特定锁保护的已发布对象。

哪个可以作为核心 Java 中此类对象的示例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T12:14:44.903

我立即想到的是`SynchronizedList`由`Collections.synchronizedList()`. 这是它的部分源代码：

```
static class SynchronizedList<E>
    extends SynchronizedCollection<E>
    implements List<E> {

    final List<E> list;

    public boolean equals(Object o) {
        synchronized (mutex) {return list.equals(o);}
    }
    public int hashCode() {
        synchronized (mutex) {return list.hashCode();}
    }

    public ListIterator<E> listIterator() {
        return list.listIterator(); // Must be manually synched by user
    } 
```

该`list`对象不是线程安全的，而是由互斥锁保护的。返回的对象`listIterator()`应该由同一个互斥锁（即同步列表本身）手动保护

# windows-7 - 如何从本地计算机上的另一个服务启动远程计算机的 Windows 服务

> ID：11310451
> 
> 赞同：0
> 
> 时间：2012-07-03T12:01:11.083
> 
> 标签：windows-7, windows-services

我想从本地机器的 Windows 服务启动远程机器的 Windows 服务。

# java - 我如何在 Java 并发编程中处理 CancellationException？

> ID：11310452
> 
> 赞同：0
> 
> 时间：2012-07-03T12:01:14.993
> 
> 标签：java, java.util.concurrent

我正在使用 java.util.concurrent 包来创建一个并行程序。我有 2 个线程：

*   调用 webservice 方法 1 的线程 1，以及
*   调用 webservice 方法 2 的线程 2。

我正在指定线程执行超时 - 假设如果线程 1 没有在指定的超时时间内完成执行，那么我必须拦截线程 1，继续使用线程 2 执行并在 jsp 中显示线程 2 结果（注意：如果两者线程需要太多时间来处理请求，然后我不希望 UI 等到它们完成）。

我尝试使用下面的代码，但它抛出了一个 InterruptedException。当一项任务陷入更多泥潭时，我该如何继续执行其他任务？

```
ExecutorService executor = Executors.newFixedThreadPool(2);
CompletionService<ArrayList<AvailableWeatherDetailVO>> compService =   new ExecutorCompletionService<ArrayList<AvailableWeatherDetailVO>>(executor);
// Start amazonTask using thread-1
try{
   compService.submit(amazonTask).get(20, TimeUnit.MILLISECONDS);
   amazonFuture = compService.take();
  amazonFinalList =(ArrayList<AvailableWeatherDetailVO>)amazonFuture .get()                 }
catch (TimeoutException e) {
  compService.submit(amazonTask).cancel(true);
  //throw new TimeoutException("Thread not executed with in speifed time");
 }
// Start googleTask using thread-2
try{
   compService.submit(googleTask).get(100, TimeUnit.MILLISECONDS);
   googleFuture = compService.take();
  googleFinalList =(ArrayList<AvailableWeatherDetailVO>)googleFuture .get()                 }
catch (TimeoutException e) {
  compService.submit(googleTask).cancel(true);
  //throw new TimeoutException("Thread not executed with in speifed time");
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T22:24:43.973

目前尚不清楚您的意思是 thread2 仅在 thread1 失败时才开始执行。

或者，它们是否都在执行，但是如果它完成，你想使用 thread1 的结果，否则你想使用 thread2 的结果

在我看来，您应该将线程 1 附加到 Future。然后通过超时获取结果（从您的主线程）。如果 Future.get() 超时，则从第二个线程获取结果。

不知道我是否明白你的意思。如果这不是您要查找的内容，请澄清。

# jquery - 所有这些 div 都不会消失

> ID：11310454
> 
> 赞同：0
> 
> 时间：2012-07-03T12:01:33.783
> 
> 标签：jquery, function, fadeout

我正在尝试运行一个脚本，该脚本将淡出所有随机选择的 div。

似乎总是让一对夫妇坐在最后。

[http://jsfiddle.net/MQFFf/1/](http://jsfiddle.net/MQFFf/1/)

**JS**

```
 function hideCube() {
    $('#group').show('slow');
    $('.pxl').each(function(index, element) {
        var sleepTime = Math.floor(Math.random() * 5000);
        var t = setTimeout(function() {
            var d = Math.floor(Math.random() * 5000);
            $(element).fadeTo(d, 0);
        }, sleepTime);
    });
}

$(function() {

    $('.pxl').each(function(index, element) {
        var sleepTime = Math.floor(Math.random() * 5000);
        var t = setTimeout(function() {
            var d = Math.floor(Math.random() * 1000);
            $(element).fadeTo(d, 0.99);
        }, sleepTime);
    });

    var h = setTimeout(hideCube, 3000);

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T12:22:45.900

这要简单得多。

```
// return random integer, 0 <= n < ceiling
var randint = function ( ceiling ) {
    return Math.floor( Math.random() * ceiling );
};

$( '.pxl' ).delay( 5000 ).each(function () {
    $( this ).delay( randint(5000) ).fadeTo( randint(5000), 0 );
}); 
```

**现场演示：http:** [//jsfiddle.net/MQFFf/31/](http://jsfiddle.net/MQFFf/31/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T12:19:43.123

在这里，所有 DIV 都消失了：

```
var randint = function ( ceiling ) {
    return Math.floor( Math.random() * ceiling );
};

setTimeout(function () {
    $( '.pxl' ).each(function ( i, elem ) {
        setTimeout(function () {
            $( elem ).fadeTo( randint(5000), 0 );
        }, randint(5000) );
    });
}, 4000 ); 
```

**现场演示：http:** [//jsfiddle.net/MQFFf/25/](http://jsfiddle.net/MQFFf/25/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T12:10:33.327

改变这个：

```
$(element).fadeTo(d, 0.99); 
```

到：

```
$(element).fadeTo(d, 0); 
```

[http://jsfiddle.net/MQFFf/12/](http://jsfiddle.net/MQFFf/12/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T12:11:13.203

只需调用您的函数：http: [//jsfiddle.net/MQFFf/8/](http://jsfiddle.net/MQFFf/8/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T12:09:28.023

删除第二个`$('pxl').each()`循环似乎可以解决您的问题：http: [//jsfiddle.net/MQFFf/4/](http://jsfiddle.net/MQFFf/4/)

# c# - 实现 TCP 成帧的正确模式是什么？它是一个过滤器堆栈吗？

> ID：11310455
> 
> 赞同：6
> 
> 时间：2012-07-03T12:01:34.307
> 
> 标签：c#, .net, tcp

我正在尝试实现一个健壮的 TCP 库，它允许用户选择应用程序协议或实现他们自己的协议，然后简单地将它们“插入”到客户端/服务器中。

通过协议，我的意思只是定义流应该如何被构建成消息的能力。

我在堆栈的其余部分使用内置的异步 TCP 库，并开发了一个客户端，该客户端在建立连接、读取或写入数据或引发异常时引发事件。

我有两种实现框架协议的选择。第一个已经在工作，是扩展客户端类并覆盖接收到的数据事件，以便仅在接收到完整消息时才引发此事件。（即，在后台，我缓冲来自套接字的原始数据，并根据协议决定何时收到完整消息，然后才引发数据接收事件。）这类似于[Nito.Asynch](http://nitoasync.codeplex.com/)库的工作方式。

这种方法的问题在于，它意味着每个新协议都需要新的客户端实现。我希望客户维护一个可以添加或删除的内部过滤器堆栈。

当在套接字上接收到数据时，它会传递给第一个过滤器，该过滤器会缓冲，直到它决定传递一个完整的消息，并且删除了标头或元数据。然后将其传递给堆栈中的下一个过滤器等。

这样，过滤器可以独立于库定义/开发，并根据配置（在运行时）注入客户端。

为了实现这一点，我考虑将过滤器定义为由客户端内部保存的 System.IO.Stream（传入和传出）的实现对。

从套接字读取的数据将被写入堆栈的底部传入流。然后从该流读取的数据将被写入下一个流等，直到最后一个流（堆栈顶部）返回数据，然后由客户端返回。（我的计划是使用 Stream 的 CopyTo() 函数）。

写入客户端的数据将被写入顶部传出流并向下复制堆栈，直到底部传出流写入底层套接字。

显然有很多事情需要考虑，我正试图以正确的方式作为 Stream 对象。示例：当有人调用 Flush()...时我该怎么办？

这是实现这一目标的好方法，还是我在这里重新发明轮子？

Nito.Asynch 库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:28:04.463

我正在回答我自己的问题，希望我的解决方案能得到一些好的批评，并可能对其他人有所帮助。

我为协议过滤器和数据帧定义了两个接口。（为了明确术语，我避免使用数据包这个词，以避免与较低级别协议中定义的数据包混淆。）

虽然不是我自己的意图，但我想这可以在任何传输协议（即命名管道、TCP、串行）之上使用。

首先是数据框的定义。这包括“数据”（有效负载）以及将数据从传输中构建为原子“消息”的任何字节。

```
/// <summary>
/// A packet of data with some form of meta data which frames the payload for transport in via a stream.
/// </summary>
public interface IFramedData
{
    /// <summary>
    /// Get the data payload from the framed data (excluding any bytes that are used to frame the data)
    /// i.e. The received data minus protocl specific framing
    /// </summary>
    public readonly byte[] Data { get; }

    /// <summary>
    /// Get the framed data (payload including framing bytes) ready to send
    /// </summary>
    /// <returns>Framed data</returns>
    public byte[] ToBytes();
} 
```

然后是协议过滤器，它从某个源（例如 TCP 套接字，或者如果它们在堆栈中使用，甚至是另一个过滤器）读取数据并将数据写回。

过滤器应读入数据（包括帧）并为每个完整的帧读取引发 DataReceived 事件。通过 IFramedData 实例的“数据”属性访问有效负载。

当数据被写入过滤器时，它应该适当地“构建”它，然后在每次准备好发送完整的数据帧时引发 DataToSend 事件。（在我的情况下，这将是立竿见影的，但我试图允许一个协议，该协议可能会发送固定长度的消息或出于某种其他原因缓冲输入，然后再返回准备发送的完整帧。

```
/// <summary>
/// A protocol filter can be used to read and write data from/to a Stream and frame/deframe the messages.
/// </summary>
/// <typeparam name="TFramedData">The data frame that is handled by this filter</typeparam>
public interface IProtocolFilter<TFramedData> where TFramedData : IFramedData
{
    /// <summary>
    /// Should be raised whenever a complete data frame is ready to send.
    /// </summary>
    /// <remarks>
    /// May be raised after a call to <see cref="FlushSend()"/>
    /// </remarks>
    public event Action<TFramedData> DataToSend;

    /// <summary>
    /// Should be raised whenever a complete data frame has been received.
    /// </summary>
    /// <remarks>
    /// May be raised after a call to <see cref="FlushReceive()"/>
    /// </remarks>
    public event Action<TFramedData> DataReceived;

    /// <summary>
    /// Should be raised if any data written or read breaks the protocol.
    /// This could be due to any asynchronous operation that cannot be raised by the calling function.
    /// </summary>
    /// <remarks>
    /// Behaviour may be protocol specific such as flushing the read or write cache or even resetting the connection.
    /// </remarks>
    public event Action<Exception> ProtocolException;

    /// <summary>
    /// Read data into the recieve buffer
    /// </summary>
    /// <remarks>
    /// This may raise the DataReceived event (possibly more than once if multiple complete frames are read)
    /// </remarks>
    /// <param name="buffer">Data buffer</param>
    /// <param name="offset">Position within the buffer where data must start being read.</param>
    /// <param name="count">Number of bytes to read.</param>
    /// <returns></returns>
    public int Read(byte[] buffer, int offset, int count);

    /// <summary>
    /// Write data to the send buffer.
    /// </summary>
    /// <remarks>
    /// This may raise the DataToSend event (possibly more than once if the protocl requires the data is broken into multiple frames)
    /// </remarks>
    /// <param name="buffer">Data buffer</param>
    /// <param name="offset">Position within the buffer where data must start being read.</param>
    /// <param name="count">Number of bytes to read from the buffer</param>
    public void Write(byte[] buffer, int offset, int count);

    /// <summary>
    /// Flush any data from the receive buffer and if appropriate, raise a DataReceived event.
    /// </summary>
    public void FlushReceive();

    /// <summary>
    /// Flush any data from the send buffer and if appropriate, raise a DataToSend event.
    /// </summary>
    public void FlushSend();
} 
```

然后，我围绕 TcpClient 编写了一个非常简单的包装器，每当协议堆栈顶部的过滤器引发 DataReceived 事件或底部的过滤器引发 DataToSend 事件时，它都会执行异步读取和写入并引发事件（我还将数据写入套接字，但这允许应用程序监视它写入客户端的数据何时实际发送）。

# c - 整数常量的默认类型是有符号还是无符号？

> ID：11310456
> 
> 赞同：26
> 
> 时间：2012-07-03T12:01:41.750
> 
> 标签：c

整数常量的默认类型是有符号还是无符号？例如 0x80000000，我如何决定将其用作有符号整数常量或无符号整数常量而没有任何后缀？

如果它是一个有符号整数常量，如何解释下面的情况？

```
printf("0x80000000>>3 : %x\n", 0x80000000>>3); 
```

输出：

```
0x80000000>>3 : 10000000 
```

以下情况可以表明我的平台使用算术位移，而不是逻辑位移：

```
int n = 0x80000000;

printf("n>>3: %x\n", n>>3); 
```

输出：

```
n>>3: f0000000 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-03T12:08:14.857

C 对十进制、八进制和十六进制常量有不同的规则。

对于十进制，它是值可以适合的第一种类型：`int`, `long`,`long long`

对于十六进制，它是值可以适合的第一种类型：`int`, `unsigned int`, `long`, `unsigned long`, `long long`,`unsigned long long`

例如在具有`32-bit` `int`and的系统上是`unsigned int`: 。`0x80000000``unsigned int`

请注意，对于十进制常量，C90 有不同的规则（但十六进制常量的规则没有改变）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-03T12:03:15.623

**如果它适合有符号整数，则它**是有符号的。要使其无符号，请附加一个`u`后缀，例如`1234u`.

您可以通过*将*有符号值分配给无符号变量来将其转换为无符号值。

```
unsigned int i = 1234u; // no conversion needed
unsigned int i = 1234;  // signed value 1234 now converted to unsigned 
```

对于`0x80000000`，如果 int 在您的平台上是 32 位，它将是**无符号**的，因为它不适合有符号的 int。

* * *

不过，要注意的另一件事是右移的行为取决于平台。在某些平台上，它是符号保留（算术），而在某些平台上，它是一个简单的按位移位（逻辑）。

# apache - mod重定向规则

> ID：11310459
> 
> 赞同：0
> 
> 时间：2012-07-03T12:01:48.297
> 
> 标签：apache, .htaccess, redirect

我只想通过 mod rewrite 规则重定向 URL。我已应用此规则，不包括 (R=301)

示例：从 http:///webapp/wcs/stores/servlet/en/marksandspencer 到 http:///en/marksandspencer

* * *

我将此规则用于 mod 重定向规则。

```
RewriteEngine on 
RewriteCond %{REQUEST_URI} !^(/)?$ 
RewriteCond %{REQUEST_URI} !^/webapp.*$ 
RewriteCond %{REQUEST_URI} !^/wcsstore.*$ 
RewriteRule ^/(.*)$ /webapp/wcs/stores/servlet/$1 [PT,NC,L,QSA] 
RewriteRule ^/webapp/wcs/stores/servlet/(.*) /$1 [NE,L,QSA] 
RewriteRule ^(/)?$ /webapp/wcs/stores/servlet/en/marksandspencer [PT,NC,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T22:23:49.133

不知道您要做什么，但是如果您使用的是 Apache 2.0 或更高版本，则在`RewriteRule`. 此外，您有一个看起来像是在`/webapp/wcs/stores/servlet/`URI 开头添加 a 的规则，然后下一个规则看起来像是您正在删除它。这可能会导致循环。

大胆猜测您要做什么，我认为您需要在第二条规则中添加一个条件，并删除前导斜杠：

```
# internally rewrite URI by appending "/webapp/wcs/stores/servlet/" to the front
RewriteCond %{REQUEST_URI} !^(/)?$ 
RewriteCond %{REQUEST_URI} !^/webapp.*$ 
RewriteCond %{REQUEST_URI} !^/wcsstore.*$ 
RewriteRule ^(.*)$ /webapp/wcs/stores/servlet/$1 [PT,NC,L,QSA] 

# if a request is made with "/webapp/wcs/stores/servlet/" in it, redirect to a URI with it stripped
RewriteCond %{THE_REQUEST} ^(GET/POST)\ /webapp/wcs/stores/servlet/
RewriteRule ^webapp/wcs/stores/servlet/(.*) /$1 [R=301,L,QSA] 

RewriteRule ^$ /webapp/wcs/stores/servlet/en/marksandspencer [PT,NC,L] 
```

# android - 在android中使用游标从数据库中检索记录

> ID：11310460
> 
> 赞同：0
> 
> 时间：2012-07-03T12:01:54.467
> 
> 标签：android, database, sqlite, cursor

我使用以下代码检索记录：

```
String getCredentialsFromAdmint(String name ,String pwd) {
        SQLiteDatabase db = this.getReadableDatabase();

        Cursor cursor = db.query(TABLE_ADMIN, new String[] { KEY_ID,
                KEY_A_USER_NAME, KEY_A_PWD }, KEY_A_USER_NAME + "=?" + " AND " + KEY_A_PWD + "=?",
                new String[] { name , pwd }, null, null, null, null);

        if (cursor != null){
            cursor.moveToFirst();
        return cursor.getString(1);
        }
        else{
            return "norecord";
        } 
```

* * *

如果有记录，则此代码有效，但如果未找到记录，则应用程序会出错。还有其他方法可以从数据库中检索数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:14:32.497

将您的代码更改为以下

```
 if ( cursor.moveToFirst()){
      return cursor.getString(1);
    } else{
        return "norecord";
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:14:03.227

您不检查是否`cursor.moveToFirst()`返回 true；

它应该看起来像这样：

```
if (cursor != null) {
   if(cursor.moveToFirst()){
       return cursor.getString(cursor.getColumnIndexOrThrow(KEY_A_USER_NAME));
   } else{
     //no record
   }
} else {
   //invalid uri
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T12:14:03.683

尝试改用以下代码

```
if (cursor != null){
    cursor.moveToFirst();
    if(cursor.isAfterLast() == false) {
    return cursor.getString(1);
    }
    else
    {
    return "norecord";
    }
}
else{
    return "norecord";
} 
```

# jquery - JqMobile 的窗口加载替代方案

> ID：11310462
> 
> 赞同：0
> 
> 时间：2012-07-03T12:01:57.567
> 
> 标签：jquery, jquery-mobile, window-load

他们是否可以替代 jquery mobile 的窗口加载事件..？

```
$(window).load(function(){
// Code Here
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:05:23.477

我会查看特定页面加载事件的 jQM 文档，因为根据功能、回调等，可能会有一些对您有用...

*   [http://jquerymobile.com/demos/1.1.0/docs/api/events.html](http://jquerymobile.com/demos/1.1.0/docs/api/events.html)

我想你正在寻找`pagechange`

> 此事件在`changePage()`请求完成将页面加载到 DOM 并且所有页面转换动画都完成后触发。请注意，任何 pageshow 或 pagehide 事件都将在触发 此事件*之前*触发。此特定事件的回调将作为第二个参数传递一个数据对象。该对象的属性如下：
> 
> *   *toPage*（对象或字符串） 此属性表示调用者希望激活的页面。它可以是包含页面 DOM 元素的 jQuery 集合对象，也可以是 内部或外部页面
>     的绝对/相对 url 。 该值与触发事件的 changePage() 调用
>     的第一个参数完全匹配。
>     
> *   *options* (object) 此对象包含用于当前 changePage() 调用的配置选项。

我也会阅读该`methods`页面

*   [http://jquerymobile.com/demos/1.1.0/docs/api/methods.html](http://jquerymobile.com/demos/1.1.0/docs/api/methods.html)

# ruby-on-rails - 在 ActiveAdmin / Formtastic 中获取父对象的 ID

> ID：11310467
> 
> 赞同：1
> 
> 时间：2012-07-03T12:02:30.010
> 
> 标签：ruby-on-rails, activeadmin, formtastic

我有一个资源照片，它属于广告。

在 ActiveAdmin 中，用户应该能够直接从广告的编辑页面上传照片（显然只有在广告创建后）。

生成的表格如下：

```
form do |f|

    [... the usual forms ...]

    f.inputs "Photos" do
      f.has_many :photos, :title => "Photo" do |p|
        p.input :advert, :as => :hidden, :value => Advert.find(params[:id])
        p.input :title
        p.input :image
      end
    end

end 
```

我想要这条线

```
p.input :advert, :as => :hidden, :value => Advert.find(params[:id]) 
```

生成一个带有用户正在编辑的广告 ID 的隐藏字段，但这只会生成一个空字段。我也尝试了许多其他选项，但似乎无法弄清楚。

有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:50:15.980

您可以使用 advert 变量，它保存带有来自 params 的 id 的 Advert 对象。

```
p.input :advert, :as => :hidden, :value => advert.id 
```

顺便说一句，您的代码无效。你得到整个 Advert 对象，而不仅仅是 id。有效代码：

```
p.input :advert, :as => :hidden, :value => Advert.find(params[:id]).id 
```

这也应该有效

# java - java applet：如何从 applet 调用/访问网页的 javascript 变量？

> ID：11310469
> 
> 赞同：2
> 
> 时间：2012-07-03T12:02:35.280
> 
> 标签：java, applet

一个例子：

```
getAppletContext().showDocument(
  new URL("javascript:alert(document.getElementById('textbox').value);"
)); 
```

我不想提醒这个文本框值，而是想在我的小程序程序中进一步使用这个值作为字符串变量。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:50:08.857

不同方法的多种想法。这里有一些：

* * *

**将输入字段放在 Applet 中。**`<input>`您可以通过在 Applet 中添加 AWT 组件（或者，`JApplet`使用更新的 Swing 工具包）来获取 Applet 的输入，而不是向 HTML 页面添加-tag。虽然应该首选 Swing。

当然，如果您不能更改小程序代码，这不是一个选项。

* * *

**使用`<param>`- 标记。**您可以通过使用`<param>`-tag 中的-tag 为您的小程序提供一些初始值（例如参数），如[tag-doc](http://docs.oracle.com/javase/1.4.2/docs/guide/misc/applet.html)`<applet>`中的此示例所示：

```
<applet code="A21" width="256" height="256" archive="toir.jar">
  <param name="img" value="test.gif">
</applet> 
```

但是，正如我所说，这些是*初始*值。如果您在 applet 已经运行时更改它们，它们不会在 Applet 本身中更改。

因此，如果您的`<input>`-tag 中的值是初始值，您可以使用它（并`value`使用 JS 操作 -attribute）。如果您想在小程序运行时更改这些值，这仅在您重新启动小程序时才有效（这可能不是最好的主意）。

* * *

**使用“Java 到 Javascript 通信”。**有一个文件介绍了`JSObject`-class。可以在[这里](http://docs.oracle.com/javase/1.4.2/docs/guide/plugin/developer_guide/java_js.html)找到。还有“通用 DOM API”，可用于访问 HTML 页面的 DOM 结构。这听起来像你正在寻找的东西，但它似乎有点过时了。

另外，这似乎不是标准（就像`<applet>`-tag 一样），因此，某些浏览器可能没有或没有完全实现对它的支持。你必须尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:05:00.400

```
// provide a JS function to return the value of textbox
// call it to get the value..
String userInput = JOptionPane.showInputDialog(this, value, .. 
```

# regex - 用于检测圆括号或方括号的正则表达式

> ID：11310472
> 
> 赞同：5
> 
> 时间：2012-07-03T12:02:38.793
> 
> 标签：regex

我正在尝试查找给定字符串`(JFK)`或`[FRA]`使用正则表达式的机场代码。

我不必确定上述机场代码是否正确。大括号几乎可以包含任何三个大写字母。

这是我当前的解决方案，它适用于圆括号，但不适用于方括号：

```
[((\[]([A-Z]{{3}})[))\]] 
```

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-03T12:12:17.180

您的正则表达式似乎试图匹配太多，试试这个：

```
^[(\[][A-Z]{3}[)\]]$ 
```

`^` 匹配行的开头（你可能需要也可能不需要）

`[(\[]` 是匹配的字符类`(`或`[`

`[A-Z]{3}`匹配三个大写字母

`[)\]]`是匹配的字符类`)`或`]`

`$` 匹配行尾（您可能需要也可能不需要）

[点击这里查看测试结果](http://regexpal.com/?flags=g&regex=%5E%5B%28%5C%5B%5D%5BA-Z%5D%7B3%7D%5B%29%5C%5D%5D%24&input=%28FRA%29)

请注意，`[`and`]`是正则表达式中的特殊字符，我必须用 a 转义它们`\`以表示我想要一个文字字符。

希望这可以帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T12:16:46.053

如果您想 (1) 匹配单个匹配组中的字母并且 (2) 仅匹配括号*或*括号（不是每个都匹配），那么这非常困难。一种解决方案是：

```
.([A-Z]{3}).((?<=\(...\))|(?<=\[...\])) 
```

第一部分与字母匹配，尾随的混乱检查括号/括号。

请参阅[http://fiddle.re/u19v](http://fiddle.re/u19v) - 这匹配`[ABC]`and `(DEF)`，但不匹配`(PQR]`（“正确”答案确实如此）。

如果您想要匹配中的括号，请将捕获括号移到`.`：

```
(.[A-Z]{3}.)((?<=\(...\))|(?<=\[...\])) 
```

这里的根本问题是正则表达式不够强大，无法以您想要的方式匹配成对的值（如括号或括号）。所以每种不同类型的对都必须单独处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T14:06:32.317

易于理解，更与方言无关且正确：

```
^([A-Z][A-Z][A-Z])\|\[[A-Z][A-Z][A-Z]\]$ 
```

您可能必须根据您的正则表达式方言更改括号和管道的转义。

# java - android saxparser 截断 xml 标签内容

> ID：11310473
> 
> 赞同：0
> 
> 时间：2012-07-03T12:02:51.510
> 
> 标签：java, android, xml, eclipse, saxparser

我正在使用 saxparser 从文件中获取 xml 标记内容。对于非长数据 xml，一切正常。但是，当到达某个位置时，characters() 事件收到截断的 ch[] 并被触发两次。例如 1234567890 被接收两次并且值被截断，如下例所示。如何清除字符数组或内存？

```
id  1234567890
name myName1
id  1234567890
name myName2
...
(error)
id 1234567
id 890
name myName3 
```

代码：

```
private StringBuffer buf = new StringBuffer(2048);

            @Override
            public void characters(char ch[], int start, int length) throws SAXException {  

            if(this.v_Id){

                buf.append(ch, start, length);

                myParsedXMLDataSet.setId(buf.toString());

                Log.d("id", buf.toString());

                buf.delete(0, buf.length());

            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:09:04.397

`characters()`允许为同一个元素多次调用（[参见文档](http://docs.oracle.com/javase/1.4.2/docs/api/org/xml/sax/ContentHandler.html#characters%28char%5B%5D,%20int,%20int%29)）。你不应该假设它只会被调用一次，即使大多数时候都是这样。每次`characters()`调用时追加到缓冲区，然后在调用时存储值`endElement()`。

# soap - Soapclient 解析结果

> ID：11310476
> 
> 赞同：0
> 
> 时间：2012-07-03T12:03:00.443
> 
> 标签：soap, symfony

我从我的 symfony2 控制器调用 Web 服务，这是我得到的结果：

```
object(stdClass) Data [EstadoHabitacionesFechasResult]: object(stdClass) Data [any]: string(5632) "<xs:schema xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" id="NewDataSet"><xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:MainDataTable="TablaEstadoHabitacion" msdata:UseCurrentLocale="true"><xs:complexType><xs:choice minOccurs="0" maxOccurs="unbounded"><xs:element name="TablaEstadoHabitacion"><xs:complexType><xs:sequence><xs:element name="IdHabitacion" type="xs:int" minOccurs="0"/><xs:element name="FechaEntrada" type="xs:string" minOccurs="0"/><xs:element name="FechaSalida" type="xs:string" minOccurs="0"/></xs:sequence></xs:complexType></xs:element></xs:choice></xs:complexType></xs:element></xs:schema><diffgr:diffgram xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:diffgr="urn:schemas-microsoft-com:xml-diffgram-v1"><DocumentElement xmlns=""><TablaEstadoHabitacion diffgr:id="TablaEstadoHabitacion1" msdata:rowOrder="0" diffgr:hasChanges="inserted"><IdHabitacion>1</IdHabitacion><FechaEntrada>23/05/2012</FechaEntrada><FechaSalida>31/12/2012</FechaSalida></TablaEstadoHabitacion><TablaEstadoHabitacion diffgr:id="TablaEstadoHabitacion2" msdata:rowOrder="1" diffgr:hasChanges="inserted"><IdHabitacion>2</IdHabitacion><FechaEntrada>23/05/2012</FechaEntrada><FechaSalida>29/06/2012</FechaSalida></TablaEstadoHabitacion><TablaEstadoHabitacion diffgr:id="TablaEstadoHabitacion3" msdata:rowOrder="2" diffgr:hasChanges="inserted"><IdHabitacion>2</IdHabitacion><FechaEntrada>29/06/2012</FechaEntrada><FechaSalida>01/07/2012</FechaSalida></TablaEstadoHabitacion><TablaEstadoHabitacion diffgr:id="TablaEstadoHabitacion4" msdata:rowOrder="3" diffgr:hasChanges="inserted"><IdHabitacion>3</IdHabitacion><FechaEntrada>02/06/2012</FechaEntrada><FechaSalida>03/06/2012</FechaSalida></TablaEstadoHabitacion><TablaEstadoHabitacion diffgr:id="TablaEstadoHabitacion5" msdata:rowOrder="4" diffgr:hasChanges="inserted"><IdHabitacion>3</IdHabitacion><FechaEntrada>29/06/2012</FechaEntrada><FechaSalida>01/07/2012</FechaSalida></TablaEstadoHabitacion><TablaEstadoHabitacion diffgr:id="TablaEstadoHabitacion6" msdata:rowOrder="5" diffgr:hasChanges="inserted"><IdHabitacion>4</IdHabitacion><FechaEntrada>29/06/2012</FechaEntrada><FechaSalida>01/07/2012</FechaSalida></TablaEstadoHabitacion><TablaEstadoHabitacion diffgr:id="TablaEstadoHabitacion7" msdata:rowOrder="6" diffgr:hasChanges="inserted"><IdHabitacion>5</IdHabitacion><FechaEntrada>02/06/2012</FechaEntrada><FechaSalida>03/06/2012</FechaSalida></TablaEstadoHabitacion><TablaEstadoHabitacion diffgr:id="TablaEstadoHabitacion8" msdata:rowOrder="7" diffgr:hasChanges="inserted"><IdHabitacion>5</IdHabitacion><FechaEntrada>29/06/2012</FechaEntrada><FechaSalida>01/07/2012</FechaSalida></TablaEstadoHabitacion><TablaEstadoHabitacion diffgr:id="TablaEstadoHabitacion9" msdata:rowOrder="8" diffgr:hasChanges="inserted"><IdHabitacion>6</IdHabitacion><FechaEntrada>02/06/2012</FechaEntrada><FechaSalida>03/06/2012</FechaSalida></TablaEstadoHabitacion><TablaEstadoHabitacion diffgr:id="TablaEstadoHabitacion10" msdata:rowOrder="9" diffgr:hasChanges="inserted"><IdHabitacion>6</IdHabitacion><FechaEntrada>29/06/2012</FechaEntrada><FechaSalida>01/07/2012</FechaSalida></TablaEstadoHabitacion><TablaEstadoHabitacion diffgr:id="TablaEstadoHabitacion11" msdata:rowOrder="10" diffgr:hasChanges="inserted"><IdHabitacion>7</IdHabitacion><FechaEntrada>25/05/2012</FechaEntrada><FechaSalida>28/05/2012</FechaSalida></TablaEstadoHabitacion><TablaEstadoHabitacion diffgr:id="TablaEstadoHabitacion12" msdata:rowOrder="11" diffgr:hasChanges="inserted"><IdHabitacion>7</IdHabitacion><FechaEntrada>02/06/2012</FechaEntrada><FechaSalida>03/06/2012</FechaSalida></TablaEstadoHabitacion><TablaEstadoHabitacion diffgr:id="TablaEstadoHabitacion13" msdata:rowOrder="12" diffgr:hasChanges="inserted"><IdHabitacion>7</IdHabitacion><FechaEntrada>29/06/2012</FechaEntrada><FechaSalida>01/07/2012</FechaSalida></TablaEstadoHabitacion><TablaEstadoHabitacion diffgr:id="TablaEstadoHabitacion14" msdata:rowOrder="13" diffgr:hasChanges="inserted"><IdHabitacion>8</IdHabitacion><FechaEntrada>25/05/2012</FechaEntrada><FechaSalida>28/05/2012</FechaSalida></TablaEstadoHabitacion><TablaEstadoHabitacion diffgr:id="TablaEstadoHabitacion15" msdata:rowOrder="14" diffgr:hasChanges="inserted"><IdHabitacion>8</IdHabitacion><FechaEntrada>02/06/2012</FechaEntrada><FechaSalida>03/06/2012</FechaSalida></TablaEstadoHabitacion><TablaEstadoHabitacion diffgr:id="TablaEstadoHabitacion16" msdata:rowOrder="15" diffgr:hasChanges="inserted"><IdHabitacion>9</IdHabitacion><FechaEntrada>25/05/2012</FechaEntrada><FechaSalida>28/05/2012</FechaSalida></TablaEstadoHabitacion><TablaEstadoHabitacion diffgr:id="TablaEstadoHabitacion17" msdata:rowOrder="16" diffgr:hasChanges="inserted"><IdHabitacion>9</IdHabitacion><FechaEntrada>01/06/2012</FechaEntrada><FechaSalida>03/06/2012</FechaSalida></TablaEstadoHabitacion><TablaEstadoHabitacion diffgr:id="TablaEstadoHabitacion18" msdata:rowOrder="17" diffgr:hasChanges="inserted"><IdHabitacion>9</IdHabitacion><FechaEntrada>29/06/2012</FechaEntrada><FechaSalida>01/07/2012</FechaSalida></TablaEstadoHabitacion><TablaEstadoHabitacion diffgr:id="TablaEstadoHabitacion19" msdata:rowOrder="18" diffgr:hasChanges="inserted"><IdHabitacion>10</IdHabitacion><FechaEntrada>25/05/2012</FechaEntrada><FechaSalida>28/05/2012</FechaSalida></TablaEstadoHabitacion><TablaEstadoHabitacion diffgr:id="TablaEstadoHabitacion20" msdata:rowOrder="19" diffgr:hasChanges="inserted"><IdHabitacion>10</IdHabitacion><FechaEntrada>02/06/2012</FechaEntrada><FechaSalida>03/06/2012</FechaSalida></TablaEstadoHabitacion></DocumentElement></diffgr:diffgram>" 
```

有什么简单的方法可以访问数据吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:24:06.670

也许您应该尝试使用[SoapClient](http://php.net/manual/en/soapclient.soapclient.php)的类映射选项？

# c++ - 如何禁用在 Windows MFC 应用程序中创建 .pf（预取）文件？

> ID：11310477
> 
> 赞同：2
> 
> 时间：2012-07-03T12:03:08.603
> 
> 标签：c++, windows, mfc, prefetch

我正在编写一个 C++ MFC 应用程序。我想避免在程序执行期间在硬盘上写入任何数据。

当我打开我的应用程序时，Windows 会立即`.pf`在目录中创建一个文件`..\Windows\Prefetch\`。

我无法禁用负责预取 ( `HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\Memory Management\PrefetchParameters\EnablePrefetcher`) 的注册表值，因为我的应用程序必须在许多不同的机器上运行，并且一些用户甚至可能不知道如何运行 regedit。

您能否告诉我是否有任何选项可以禁用在我的应用程序中创建此文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:05:28.950

[按照此处](http://www.codekeep.net/snippets/c906e110-6b30-495a-ad62-b5990b13a66c.aspx)所述停止 SuperFetch 服务。我会在`InitInstance`. 如果这被证明为时已晚，我会在软件运行之前停止服务。

# php - 如何为多个页面使用单个 Index.php 文件

> ID：11310484
> 
> 赞同：1
> 
> 时间：2012-07-03T12:03:16.963
> 
> 标签：php

我正在制作一个具有一个 index.php 文件的应用程序。我还有这些其他页面：

```
contact_form_homepage.php 
contact_form_config.php 
contact_form_doc.php 
contact_form_stats.php 
contact_form_premium.php 
```

我正在寻找一种方法，我可以将所有页面链接到 index.php，这样每当用户点击 Home 时，它​​就会将他带到 contact_form_homepage.php，而每当他点击 Config 时，就会将他带到 contact_form_config.php 等等。

IE

```
<a href="http://apps.facebook.com/mtkenya-dev/index.php?p=contact_form_config&amp;tab=contact_form_config&amp;page_id=" title="contact_form_config" class="fbtab">Configuration</a> 
```

我应该使用哪种 php 魔法？请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:05:01.130

我通常的技术是包含一个 php 模块。我通常把我的放在 site/ `action`.php

您可以在我的框架中的[标准 index.php](http://zxaf.svn.sourceforge.net/viewvc/zxaf/trunk/index.php?revision=52&view=markup)的第 105 行看到这一点。

```
// get the action
$ac=get_from_get('p');
$ua = "";
$is_mvc = 0;

// if no action specified this is the default action.
if ($ac=="")
    $ac="login";

// attempt include the PHP for the action
$file = "site/$ac.php";
if (file_exists($file))
    include($file);
else
{
    header("HTTP/1.0 404 Not Found");
    exit;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:07:37.633

只需像上面所说的那样做一个链接......

```
<a href="http://apps.facebook.com/mtkenya-dev/index.php?p=contact_form_config&amp;tab=contact_form_config&amp;page_id=2" title="contact_form_config" class="fbtab">Configuration</a> 
```

然后你可以读取php代码中的page_id变量......

```
if($_GET['page_id'] == 2) {
header("Location: contact_form_config.php");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T12:09:16.840

您可以做一件事，根据“p=contact_form_config”之类的查询字符串参数，您可以在 index.php 文件中加载适当的页面。

dg 当查询字符串参数为 p=contact_form_config 时，您可以使用以下代码

```
if($_GET['p'] == "contact_form_config ")
{
    // you can load your page now
    include_once('contact_form_config.php');
} 
```

希望这会有所帮助:)

# c# - 正则表达式在搜索字符串时返回 null

> ID：11310486
> 
> 赞同：0
> 
> 时间：2012-07-03T12:03:18.990
> 
> 标签：c#, asp.net, regex

我正在使用 C# 在 ASP.NET 控制台应用程序上工作，该应用程序试图通过登录从网站读取一些文件，然后将文件写入本地驱动器。

我有以下正则表达式，它在文本文件中搜索一些字符串 -

```
var fileNames = (from Match m in Regex.Matches(pageSource, @"[0-9]+_+[A-Za-z]+_+[0-9]+-+[0-9]+-+[0-9]+(_+[0-9]+)?\.+(acc|zip|app|xml|def|enr|exm|fpr|pnd|trm)")
                        select new { m.Value }).ToList(); 
```

这段代码与我的 Web 应用程序完美配合，完成了同样的任务。但是当我在控制台应用程序中使用它时，它`filenames.count`是 0。

当这段代码仍然适用于我的 Web 应用程序时，可能会出现什么问题？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:15:55.557

```
var fileNames = (from Match m in Regex.Matches(pageSource, @"[0-9]+_+[A-Za-z]+_+[0-9]+-+[0-9]+-+[0-9]+(_+[0-9]+)?\.+(acc|zip|app|xml|def|enr|exm|fpr|pnd|trm)")                         select m.Value).ToList(); 
```

这对我有用...

我删除了

> 选择~~新 {~~ m.Value ~~}~~ ).ToList();

感谢您的回复和帮助：）

# ios - iOS 3.2 上的 CATransaction + UIView

> ID：11310493
> 
> 赞同：0
> 
> 时间：2012-07-03T12:03:42.330
> 
> 标签：ios, animation, core-animation, catransaction

我需要在 iOS 3.2 上实现非常自定义的动画所以，在 4.0 之前我既不能使用块动画也不能使用 UIKit 动画。我尝试使用核心动画。

这是我的代码：

```
[CATransaction begin];
[CATransaction setAnimationDuration: 3.0];
[CATransaction setDisableActions: YES];
someView.frame = CGRectMake(endX, 0, endWidth, height); 
// a lot of another property changes
[CATransaction commit]; 
```

不幸的是，它不起作用：视图立即改变大小/不透明度，没有任何动画。

这是我的尝试：

*   我将新框架设置为不是查看而是设置到其层（someView.layer.frame = ...） - 更糟糕的是，因为视图的子视图没有调整大小。
*   我将禁用操作选项设置为是和否。

解决方案要求：

*   必须支持 iOS 3.2（无块）。
*   动画必须应用于不同的视图（因此，应用于不同的层）。
*   动画曲线已经够难了，所以我不能使用预定义的动画曲线（或者，通过 CA 语言，MediaTimingFunction）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T02:08:43.920

您发布的代码明确禁用动画。这条线是罪魁祸首：

```
[CATransaction setDisableActions: YES]; 
```

通过进行该调用，您的事务中所做的所有更改都将立即提交，而无需动画。摆脱那条线，变化应该是动画的。

如果您需要自定义曲线，您可能想要使用 CABasicAnimation，正如其他人所建议的那样。事实上，CAAnimation 对象仅适用于单个图层，因此您必须创建多个 CAAnimation 对象。

或者，您应该能够使用 CATransaction 方法 setAnimationTimingFunction，并将您创建的自定义计时函数传递给它。请参阅 CAMediaTimingFunction 类参考。具体看一下 functionWithControlPoints:::: 方法，它允许您通过指定描述计时函数的贝塞尔曲线的控制点来创建计时函数。您只能使用从 0,0 开始到 1,1 结束的单个三次贝塞尔曲线。没有直接支持更复杂的计时功能，尽管我已经看到了实现更复杂效果的 hack。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:31:18.277

如果您只想拥有一个自定义计时功能，那么您可以使用 CABasicAnimation 来实现。您可以创建自定义计时函数（它是从 (0,0) 到 (1,1) 的贝塞尔曲线，其中包含您可以指定的两个控制点。

如果这对您来说还不够（如果您的计时功能需要 2 个以上的控制点），那么您将不得不使用 CAKeyframeAnumation。然后，您可以指定任意数量的值（使用`values`属性（数组）。

在这两种情况下，您都将为关键路径“帧”创建一个动画对象并将动画添加到视图层。请注意，明确地为属性设置动画不会更改值，因此在动画之后帧将返回其原始值，除非您同时设置动画*并*更改值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T12:05:51.090

不确定这是否是您想要的，但您可以使用 UIView 动画

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:3.0];
someView.frame = CGRectMake(endX, 0, endWidth, height); 
// a lot of another property changes
[UIView commitAnimations]; 
```

# javascript - jQuery UI 1.9 Spinner 对话框中断旋转导致无限循环

> ID：11310498
> 
> 赞同：3
> 
> 时间：2012-07-03T12:03:53.920
> 
> 标签：javascript, jquery-ui, spinner, onchange, infinite-loop

## 问题

如果您有一个微调器并使用对话框中断旋转过程，例如上一个字段的模糊，或微调器的焦点，当对话框关闭时，微调器继续旋转过程，就好像鼠标被按住旋转一样按钮，就像一个无限循环。

*我创建了一个[**jsfiddle**](http://jsfiddle.net/CyrixInstead/wq6Qd/)来说明这一点*，它由 2 个微调器和一个更改事件中的确认对话框组成。

为了看到无限旋转：

1.  如示例页面所述触发确认对话框。
2.  清除对话框（可以使用“确定”或“取消”按钮）。
3.  将鼠标悬停在微调器控件的按钮上。
4.  看旋转器去！

*\Edit - 有没有触发的 mouseleave 代码，我认为这就是问题所在。打算看看我是否可以手动实现这一点*

* * *

## 尝试过的变通方法

*   我曾尝试在显示确认之前禁用其他微调器，然后重新启用它们，希望它会清除状态，但这不起作用。
*   在我的情况下，我在订购单上使用微调器。我使用确认进行最大数量检查：如果用户确认，则允许该值，否则将其设置回之前的值。我尝试将确认放入旋转事件，但是当用户使用键盘更新输入字段时，这不会触发。
*   我还在停止事件中尝试过，每次按下鼠标/按键后都会触发。但是，这效果不佳，因为我的微调器的最大数量是 999，并且确认显示在不同的值上，这些值都很低，例如 12。因此，如果用户想输入 130，他们会在输入时得到确认对话框3，这不是预期的行为。请注意，这可能最终成为我的解决方法，因为这种情况最不可能发生。
*   我还尝试设置一个标志来检查旋转事件，以便可以取消第二个旋转器的旋转。这确实有效并防止它旋转，但是一旦取消设置标志，问题就会发生。将焦点和模糊应用于第二个微调器（或任何其他微调器）无济于事，对实际微调器按钮应用模糊也无济于事。

* * *

我想我已经在 jQuery UI 1.9 微调器中发现了一个错误，它影响了所有浏览器，并且出现在里程碑 8 中。我希望有更多知识的人可以给我一个解决方法（拜托！），直到修复发出...

因为我相信这是 jQuery UI 库中的一个错误，所以我在[jQuery 论坛](https://forum.jquery.com/topic/change-event-confirm-dialog-causes-infinite-loop-all-browsers)上提出了这个问题，所以如果我在那里听到任何消息，我会及时更新这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:08:39.860

**解释**

这是一个 ui.spinner 错误（很可能），可能值得通知 jQuery UI 开发人员。

*注意：如果您不想向 jQuery UI 团队提交请求，请告诉我，我会提交。如果我有时间，我什至可能会提供一个补丁。*

问题是微调器正在启动`mousedown`（在这种情况下，它也从`mousewheeel`and启动`keydown`），不幸的是它直到在 confirm() 之后才被触发。

在`confirm()`FireFox 中，它还有一个很酷的副作用，即`confirm()`在打开时停止所有文档事件。微调器在微调器/微调器按钮上`mouseup`和`mouseout`（和）上停止，但这些事件永远不会触发。`keyup`因此，微调器会持续运行，直到您移回微调器并触发停止事件之一。

**解决方法**

在 jQuery UI 团队解决这个问题之前，我有两个解决方法。这取决于你需要做什么处理。一种是设置`confirm()`超时，另一种是在超时时触发`mouseup`所有微调器按钮上的事件。

哪一个有用（如果有的话）取决于您尝试对`confirm()`.

两者都不漂亮，但这些是我能想到的最好的解决方法。

**解决方法 1 - 假事件超时**

```
var spinner = $( ".mySpinner" ).spinner({
    max: 100,
    min: -100,
    change: function( event, ui ) {
        confirm("Pressing cancel breaks the other spinner");
        setTimeout(function(){
            $('.ui-spinner-button').trigger('mouseup');
        },1);
    }
}); 
```

**解决方法 2 - Confirm() 超时**

```
var spinner = $( ".mySpinner" ).spinner({
    max: 100,
    min: -100,
    change: function( event, ui ) {
        setTimeout(function(){confirm("Pressing cancel breaks the other spinner");},1);
    }
}); 
```

**其他黑客**

可以获取微调器的内部私有实例以访问该`spinnining`属性，将其标记为 true，然后调用`_stop()`成员函数。然而，这是一个非常侵入性的修复。另一种方法是只清除停止使用的超时，但又是侵入性的，而且这些都不是未来的证明。因此，我不会提供这些黑客的例子。

# php - 如果 & 在 index.php?a=2 之后存在，则不要替换链接

> ID：11310499
> 
> 赞同：0
> 
> 时间：2012-07-03T12:03:56.573
> 
> 标签：php, regex, preg-replace

我需要更换链接`index.php?a=2`，但如果它有`&`，`a=2`那么不要更换它。 `index.php?a=2 <- replace index.php?a=2&b=3 <- don't replace`

使用`PHP`,`preg_replace()`

我试过用这个：

```
preg_replace('^index\.php\?a=([0-9]+)(?!amp;)^', 'home', 'index.php?a=2');
preg_replace('^index\.php\?a=([0-9]+)(?!amp;)^', 'home', 'index.php?a=2&b=3');
preg_replace('^index\.php\?a=([0-9]+)(?!&)^', 'home', 'index.php?a=2');
preg_replace('^index\.php\?a=([0-9]+)(?!&)^', 'home', 'index.php?a=2&b=3'); 
```

我正在使用：

```
preg_replace('^(\/*)index\.php\?a=([0-9]+)(?!&)^e', "a($2)", 'index.php?a=2');

function a($id) {
  // Getting name from mysql...
  return '/a$id_$name';
} 
```

它正在使用这个：`index.php?a=2&b0`，但`index.php?a=10&b=0`不是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:13:07.830

***PHP 脚本：***

```
<?php
print preg_replace('/index\.php\?a=[0-9]+(?!&)/', 'home', 'index.php?a=2');
print "\n";
print preg_replace('/index\.php\?a=[0-9]+(?!&)/', 'home', 'index.php?a=2&b=3'); 
?> 
```

***输出：***

```
home
index.php?a=2&b=3 
```

[在这里](http://ideone.com/Y1Udp)测试代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:49:55.803

```
'/index\.php\?a=\d+(?!\s*&)/' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T12:08:16.673

```
'/index\.php\?a=[^&]+(?!&)/' 
```

# ios - NSTimer 选择器没有被调用

> ID：11310500
> 
> 赞同：0
> 
> 时间：2012-07-03T12:03:57.323
> 
> 标签：ios, nstimer

我编写了以下代码来运行`NSTimer`。但是 NSTimer 选择器没有被调用。

.h 文件

```
@interface XViewController : UIViewController {
   NSTimer *repeatServerRequest;
}

@property(nonatomic, retain) NSTimer *repeatServerRequest;

- (void)checkForMinimunOnetimePinEntry;
- (void) initializeTimer;
- (void)stopTimer; 
```

.m 文件

```
@synthesize repeatServerRequest;

- (void)checkForMinimunOnetimePinEntry {
   // some code
}

- (void) initializeTimer {
    repeatServerRequest = [NSTimer scheduledTimerWithTimeInterval:15.0
                                    target:self
                                    selector:@selector(checkForMinimunOnetimePinEntry)
                                    userInfo:nil
                                    repeats:YES];
}

- (void)stopTimer {
    [repeatServerRequest invalidate];
    [repeatServerRequest release];
    repeatServerRequest = nil;

//    [self.repeatServerRequest invalidate];
//    [self.repeatServerRequest release];
//    self.repeatServerRequest = nil;
} 
```

我究竟做错了什么？

**还回答我哪一个是正确的使用：self.repeatServerRequest 或只是 repeatServerRequest？** 提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:09:20.537

问题是您将计时器分配给类字段，而不是属性。

要使此代码正常工作，只需`self.`将`repeatServerRequest =`.

当您使用 时`self.repeatServerRequest`，编译器会调用`[self setRepeatServerRequest:...]`并保留自动释放的计时器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:21:45.637

你的班级有 init 方法吗？也许你没有把它放在你的代码中，但我更愿意问......

# makefile - gnu-make：我应该引用 ifeq 语句的内容吗？

> ID：11310501
> 
> 赞同：1
> 
> 时间：2012-07-03T12:03:58.143
> 
> 标签：makefile, gnu-make

我最近遇到了这个结构：

```
ifneq ("$(findstring needle, $(HAYSTACK))", "")
  do_some_stuff
endif 
```

引号真的有用吗，还是我可以放心地省略它们？

**编辑：**

刚刚发现：`ifeq ("a b ", "a b ")`行为不同于`ifeq (a b , a b )`

第一个匹配，而不是第二个。所以引号确实很重要。现在的问题是为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T20:37:36.240

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:48:15.770

I'll go out on a limb and say:

**They are equivalent to nothing and you can safely omit them.**

(Now watch the creator of GNUMake show up and say that if you try that when `HAYSTACK` contains a double-escaped unicode Sanscrit triple-quote your processor will catch fire.)

**EDIT:
Dammit, dammit, dammit!** They do matter. Just try playing around with `HAYSTACK := $(shell echo bang)`. You'd better have a fire extinguisher handy.

# sql - 查找百分比值

> ID：11310507
> 
> 赞同：0
> 
> 时间：2012-07-03T12:04:34.250
> 
> 标签：sql, sql-server-2008, tsql, sql-server-2008-r2

我有一个表，它的结构如下：

```
VoteId  QuestionId  AnswerId    EmployeeId

6        1              5              2
7        1              1              1
10       2              6              1
12       1              1             24 
```

对于 QuestionId 1，我们有 2 个答案。AnswerId 1 和 5。对于 Answer 1，有两名员工投票，EmployeeId 1 和 24。对于 AnswerId 5，EmployeeId 2 也投票。

现在从这张表中，我需要根据 计算每个`AnswerId`人的百分比。`QuestionId``EmployeeId`

我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:32:21.187

这就是你所追求的：

```
DECLARE @t TABLE (VoteId  INT,QuestionId  INT,AnswerId    INT,EmployeeId INT)
INSERT @t VALUES 
(6,   1,    5,   2),
(7,   1,    1,    1),
(10,  2,    6,    1),
(12,  1,    1,   24)

SELECT  QuestionId, 
        COUNT(*) * 100.0 / (SELECT COUNT(*) FROM @t)
        AS PercentageOfVotesReceived
FROM    @t
GROUP   BY QuestionId

SELECT  AnswerId, 
        COUNT(*) * 100.0 / (SELECT COUNT(*) FROM @t)
        AS PercentageOfVotesReceived
FROM    @t
GROUP   BY AnswerId 

SELECT  EmployeeId, 
        COUNT(*) * 100.0 / (SELECT COUNT(*) FROM @t)
        AS PercentageOfVotesReceived
FROM    @t
GROUP   BY EmployeeId 
```

# android - 为什么我的设备只有在连接 3G 时才会收到通知（Android GCM 通知）

> ID：11310509
> 
> 赞同：1
> 
> 时间：2012-07-03T12:04:36.613
> 
> 标签：android, android-c2dm, 3g

我的设备、我的第 3 方服务器和 GCM 服务器之间一切正常。

我只是不明白为什么当我从我的第 3 方服务器发送通知时，我的设备在连接到 Wi-Fi 连接时无法接收到它。只有当我禁用 Wi-Fi 连接并且设备开始使用 3G 连接时，设备才会收到通知。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:35:50.123

这可能是因为您当前的 Wi-Fi 网络上的某些防火墙设置。您是否在多个不同的 Wi-Fi 网络上尝试过？

# jira - 如何使用问题 ID 在 jira 中查找问题类型

> ID：11310513
> 
> 赞同：4
> 
> 时间：2012-07-03T12:04:47.107
> 
> 标签：jira, confluence

我有一个问题 ID。TP-176。我想知道它是技术任务、错误、故事还是改进。应该从 API 使用什么方法。任何人都可以建议我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-30T13:35:27.047

## Java API

怎么样`issue.getIssueType()`

Jira Java API[链接](https://docs.atlassian.com/software/jira/docs/api/latest/com/atlassian/jira/issue/Issue.html#getIssueType%28%29)

## REST API

获取问题 JSON： http: [//jira.server.com/rest/api/latest/issue/PROJECT-1](http://jira.server.com/rest/api/latest/issue/PROJECT-1) JSON 中问题类型的路径：`fields.issuetype`

Jira REST API[链接](https://docs.atlassian.com/jira/REST/latest/#idp1850528)

# c# - 顺序过滤 IQueryable 实例

> ID：11310514
> 
> 赞同：1
> 
> 时间：2012-07-03T12:04:51.940
> 
> 标签：c#, linq, entity-framework, iqueryable

关于使用 IQueryable 对象的快速问题。我可以做这样的事情吗？如果不能 - 另一种方法是什么？

```
IQueryable<Item> q = this.ObjectContext.items;

q = q.Where(i => i.price > 100);

...

q = q.Where(i => i.class_name.Contain("apple")); 
```

**更新**：这是我的函数的完整代码（可能是我遗漏了一些东西）：

```
public IQueryable<item> Getitem(string filter)
{
    // filtering by user departments
    IQueryable<item> pre_q = from t_item in this.ObjectContext.items
        join t_useritems in this.ObjectContext.user_to_item on
        t_item.number equals t_useritems.number
        where t_useritems.user_name == this.userName
        select t_item;

    if (filter != null)
    {
        QueryFilter qf = new QueryFilter(filter);
        string _excludeClass = qf.GetPropertyValueByName("excludeClass");
        string _excludeSubcat = qf.GetPropertyValueByName("excludeSubcat");
        string _searchBy = qf.GetPropertyValueByName("searchby");
        string _search = qf.GetPropertyValueByName("search");

        if (!string.IsNullOrEmpty(_excludeClass))
            pre_q = pre_q.Where(i => i.class_name != _excludeClass);

        if (!string.IsNullOrEmpty(_excludeSubcat))
            pre_q = pre_q.Where(i => i.subcat_name != _excludeSubcat);

        if (!string.IsNullOrEmpty(_searchBy) && !string.IsNullOrEmpty(_search))
        {
            if (_searchBy == "number")
                pre_q = pre_q.Where(i => i.number.Contains(_search));
            else if (_searchBy == "description")
                pre_q = pre_q.Where(i => i.description.Contains(_search));
            else if (_searchBy == "class_name")
                pre_q = pre_q.Where(i => i.class_name.Contains(_search));
            else if (_searchBy == "cat_name")
                pre_q = pre_q.Where(i => i.cat_name.Contains(_search));
            else if (_searchBy == "subcat_name")
                pre_q = pre_q.Where(i => i.subcat_name.Contains(_search));
            else if (_searchBy == "all_fields")
                pre_q = pre_q.Where(i => i.number.Contains(_search) ||
                  i.description.Contains(_search) ||
                  i.class_name.Contains(_search) ||
                  i.cat_name.Contains(_search) ||
                  i.subcat_name.Contains(_search));
            }
        }
    }
    return pre_q.OrderBy(i => i.number);
} 
```

基本上发生了什么 - 我通过 excludeClass 过滤器和一些搜索文本过滤器。应用 excludeClass 后，我可以看到记录数是正确的，但是当我应用搜索过滤器后 - 它基本上重置了已过滤的项目并且它们正在返回结果中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:07:17.860

是的你可以。`IQueryable<T>`是“可组合的”。没关系。它只会在您执行需要数据的操作时评估最终组合查询，例如 a `ToList()`、 a`foreach`或聚合（例如`Count()`,`Max()`等）。这种模式几乎就是许多多字段搜索屏幕的工作方式。

# ajax - AJAX/反向 AJAX：轮询还是推送？

> ID：11310518
> 
> 赞同：7
> 
> 时间：2012-07-03T12:04:58.310
> 
> 标签：ajax, real-time, comet, reverse-ajax, ajax-polling

一直在研究 AJAX，因为我正在用 Javascript 和 PHP 制作一个实时应用程序。它需要能够在不刷新页面的情况下实时更新。

我尝试使用 setInterval() 轮询服务器，但为了快速，我必须每秒都拥有它。不过，它似乎正在使用大量带宽。但是它确实有效，我与我的托管服务提供商制定了“无限带宽”计划。不过，网站上似乎有很大的压力，所以我想使用 Push 技术。

学习如何设置 Push 非常困难。据我所知，您必须托管某种类型的推送服务器或彗星服务器。我还研究了 websockets，但你也必须自己托管它。当我没有服务器计算机并且我的托管服务提供商网站上没有关于此的文档时，我不明白该怎么做。

特定的托管服务提供商会为您托管推送服务器吗？有没有办法在不托管服务器的情况下获得服务器？与轮询相比，这似乎是一个更好的选择，但同时它似乎非常令人困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T15:29:17.717

> 特定的托管服务提供商会为您托管推送服务器吗？有没有办法在不托管服务器的情况下获得服务器？与轮询相比，这似乎是一个更好的选择，但同时它似乎非常令人困惑。

是的，我为提供此类服务的[Pusher工作。](http://pusher.com)[您可以在此处](http://pusher.com/docs/quickstart)查看快速入门指南。您还可以阅读其他[实时托管服务。](http://www.leggetter.co.uk/real-time-web-technologies-guide#hosted-services)

我还建议你看看：

*   [我对如何在您的网站中使用长轮询或 Ajax 推送的](https://stackoverflow.com/questions/8534706/how-to-use-long-polling-or-ajax-push-in-your-website/8536618#8536618)回答- 以 PHP 为中心
*   [在 PHP 中使用 Comet](https://stackoverflow.com/questions/603201/using-comet-with-php)
*   [用 PHP 实现 Comet](https://stackoverflow.com/questions/4066978/implement-comet-with-php)

正如第一个链接中所表达的，我的观点是 PHP 对于实时 Web 应用程序来说不是一个好的技术。您最好使用不同的组件作为实时 Web 基础设施。那应该是自行安装的东西或托管解决方案，例如我工作的[Pusher 。](http://pusher.com)为什么？PHP + Apache 不是为维护长时间运行的连接而构建的。您可以查看 PHP 独立的 WebSocket 解决方案，但您有 80% 的可能正在使用 Apache 和 20% 的 nginx，它们还不支持 WebSockets（但很快就会支持）。即使那样，我也不确定它们将如何与标准的 PHP 请求/响应应用程序流集成。

# hadoop - 我可以像在 MySQL 中那样从文件创建 Hive 表吗

> ID：11310519
> 
> 赞同：0
> 
> 时间：2012-07-03T12:05:00.973
> 
> 标签：hadoop, hive, hdfs

我可以像在 MySQL 和其他 RDBMS 的情况下那样从 sql/文本文件创建 Hive 表吗？即，将“create table...”命令存储在 .sql 文件中并一次性执行。

例如。在 MySQL 我可以做到这一点

> 外壳> mysql < sql_file

或者如果你已经在运行 mysql，

> mysql> 源 sql_file

1) Hive 中有没有这样的选项

2）如果是，命令是什么，文件扩展名是什么

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:24:30.780

您可以从终端使用 $HIVE_HOME/bin/hive -f /home/my/hive-script.sql。请参阅 hive 文档链接[https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Cli](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Cli)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-27T11:16:41.127

1.  在扩展名为 .sql 的文件中编写脚本。像 HiveScript.sql
2.  使用 hive 命令确保 hive 正常工作，并查看 hive shell 是否打开。
3.  运行 hive -f HiveScript.sql

# c# - 将字符串转换为日期时间时出错

> ID：11310520
> 
> 赞同：0
> 
> 时间：2012-07-03T12:05:01.150
> 
> 标签：c#

我有字符串值`7/29/2000`。当我将其转换为日期时间时，它会出错。错误信息：`Cannot convert string to Datetime`

```
IFormatProvider provider = new System.Globalization.CultureInfo("en-US", true);
string oldValue = decrypt.Decrypt(dtOldI9Value.Rows[0][column.ColumnName].ToString().Trim());
DateTime dtOldValue = DateTime.Parse(oldValue, provider, System.Globalization.DateTimeStyles.NoCurrentDateDefault); 
```

从第 3 行我得到的值为“7/29/2000”。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:09:00.210

这有效：

```
IFormatProvider provider = new System.Globalization.CultureInfo("en-US", true);
DateTime dtOldValue = DateTime.Parse("07/29/2000", provider, System.Globalization.DateTimeStyles.NoCurrentDateDefault);
Console.WriteLine(dtOldValue); 
```

所以你的`decrypt.Decrypt()`. 你确定它不会添加字符`oldValue`吗？检查`oldValue.Length`，应该是 10。

# php - Symfony2 php 函数

> ID：11310524
> 
> 赞同：0
> 
> 时间：2012-07-03T12:05:21.073
> 
> 标签：php, function, symfony, webserver, administrator

我在我的服务器上部署了一个 Symfony2 应用程序，我想禁用一些 php 功能，但我不知道我是否可以。

但是我找不到任何信息。

我应该尝试禁用一个功能并查看 Symfony 的反应吗？或者你知道关于 Symfony2 中未使用的 php 函数的任何列表或信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:12:02.237

> 我应该尝试禁用一个功能并查看 Symfony 的反应吗？

不。

> 你知道关于 Symfony2 中未使用的 php 函数的任何列表或信息吗？

没有公布这样的名单。

* * *

我认为您可以安全地禁用通常受旧 PHP*安全模式*控制的功能。作为 Symfony 2 的贡献者，如果您向我们提供有关您要禁用的功能的一些详细信息，我也许可以更准确地回答您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:54:17.290

您可以尝试禁用功能并启动 Symfony2 测试套件。而且，为什么不呢，您的应用程序测试套件；）

# extjs - 如何在 Ext js 4 布局中的组件之间插入空格

> ID：11310526
> 
> 赞同：12
> 
> 时间：2012-07-03T12:05:25.407
> 
> 标签：extjs

我正在从 adobe flex 迁移到 ext js 4，我注意到在 Extjs 中，组件放置得太近了。那时之间没有差距。这可以面对这个例子：

```
 var win = Ext.create('Ext.window.Window', {
    layout: 'hbox',
    height: 500,
    width: 400,
    title: 'hbox',      
    items: [
      Ext.create('Ext.button.Button',
      {
        text: 'My button 1',
        width: 150
      }),
      Ext.create('Ext.button.Button',
      {
        text: 'My button 2',
        width: 150
      })
    ]
});

win.show(); 
```

这两个按钮彼此之间的空间为零。

如何从组件中设置空间（间隙或永远）？

谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-03T12:26:38.893

使用边距配置：

```
Ext.onReady(function() {
    var win = Ext.create('Ext.window.Window', {
        layout: 'hbox',
        height: 500,
        width: 400,
        autoShow: true,
        title: 'hbox',
        defaultType: 'button',
        items: [{
            text: 'My button 1',
            width: 150,
            margin: '10 20 30 40'
        }, {
            text: 'My button 2',
            width: 150,
            margin: '40 30 20 10'
        }]
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T12:19:17.213

像保证金？您可以通过样式属性添加它。看到这个前[http://jsfiddle.net/nscrob/5rn8C/5/](http://jsfiddle.net/nscrob/5rn8C/5/)

# javascript - 更改部分文本的样式

> ID：11310527
> 
> 赞同：2
> 
> 时间：2012-07-03T12:05:30.487
> 
> 标签：javascript, jquery

```
<script type="text/javascript" charset="utf-8" src="http://static.polldaddy.com/p/5968383.js"></script>
<noscript>
    <a href="http://polldaddy.com/poll/5968383/">
        This is a test question ?
    </a>
</noscript> 
```

样式化文本“这是一个测试问题”的 CSS 类是“pds-question-top”。是否可以设置此文本的一部分样式，即将“This”的颜色更改为蓝色？

这是在 jsfiddle 上：http: [//jsfiddle.net/25LjE/](http://jsfiddle.net/25LjE/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:10:04.613

如果你有这样的 div：

```
<div class="pds-question-top"> This is a test question ?</div> 
```

您可以将文本替换为“This”在跨度内的新文本。

```
var rp = $('.pds-question-top').text().replace('This', '<span style="color:blue;">This</span>');

$('.pds-question-top').html(rp); 
```

不是一个很好的解决方案，但它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:18:03.200

尽管 JavaScript 解决方案会很好，但请参阅 Alex 的[回答](http://www.google.com)，您的问题文本在`noscript`标签内，这意味着任何使用 JavaScript 解决此问题的尝试都行不通。

或者，我建议*手动*`span`将所述文本包装在一个元素中，然后使用一个类对其进行样式设置，如下所示：

 *## html

```
<script type="text/javascript" charset="utf-8" src="http://static.polldaddy.com/p/5968383.js"></script>
<noscript>
    <a href="http://polldaddy.com/poll/5968383/">
        <span class="highlight">This</span> is a test question ?
    </a>
</noscript> 
```

## CSS

```
.highlight
{
    color: #0f0;
} 
```*

# c# - 如何从 C# 1 正确关闭 Java 应用程序

> ID：11310530
> 
> 赞同：1
> 
> 时间：2012-07-03T12:05:41.723
> 
> 标签：c#, java, shutdown-hook

我有 java 应用程序，它在我使用时正确关闭`CTRL-C`，java 应用程序在关闭前保存所有数据。现在我试图从我的 C# 控制台应用程序中关闭这个 java 应用程序`Process.Close()`，但是当我使用它时应用程序不保存任何数据，我也尝试过`Process.CloseMainWindow()`，但是使用这个没有任何事情发生，`Process.Kill()`而且使用这个进程刚刚被杀死，没有任何保存.

如何从 C# 控制台应用程序提高 java 应用程序的关闭挂钩？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:01:30.800

A shutdown hook cannot be raised by another app.

**The shutdown hook runs when:**

*   A program exists normally. For example, `System.exit()` is called, or the last non-daemon thread exits.
*   the Virtual Machine is terminated. e.g. CTRL-C. This corresponds to kill -SIGTERM pid or kill -15 pid on Unix systems.

**The shutdown hook will not run when:**

*   the Virtual Machine aborts
*   A SIGKILL signal is sent to the Virtual Machine process on Unix systems. e.g. kill -SIGKILL pid or kill -9 pid
*   A TerminateProcess call is sent to the process on Windows systems.

# java - 使用包装器通过 Runtime.exec() 运行命令

> ID：11310536
> 
> 赞同：0
> 
> 时间：2012-07-03T12:05:52.483
> 
> 标签：java, wrapper

我有服务器和客户端，客户端使用[wrapper](http://wrapper.tanukisoftware.com/doc/english/product-overview.html)在后台运行。服务器使用以下方式向客户端发送命令，客户`SocketChannels`端以这种方式运行命令：

```
Runtime runtime = Runtime.getRuntime();
Process proc = runtime.exec(command); 
```

当我像往常一样从控制台运行客户端时，这很有效。但是当我将它作为 Windows 服务运行时，一些命令不起作用。例如：

```
runtime.exec("shutdown -s -t 300");// works perfectly
runtime.exec("shutdown -a");       // works perfectly
runtime.exec("shutdown -l");       // works only when client started from console
// note that these commands will shutdown your computer or log off 
```

第三个命令根本不做任何事情，然后程序正常工作。我以随机顺序单独运行命令，没有区别。我正在使用 Windows。

那么我做错了什么？

*此外，我无法从服务“notepad.exe”（或另一个具有完整路径的 .exe）运行。我想知道这样做的正确方法是什么（再次，从控制台它可以工作）。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:25:39.370

默认情况下，Windows 服务无法与桌面交互。如果您的命令需要用户通过某些 GUI 做出任何类型的响应，它将挂起。解决它的一种方法是允许您的服务与桌面交互（在 SCM 中的服务属性上）。另一种方法是简单地避免这种交互。我没有尝试过，但我认为`-y`开关应该可以解决重启的问题。第二种选择是我想要的。

# browser - 用户代理检查 ios6

> ID：11310539
> 
> 赞同：1
> 
> 时间：2012-07-03T12:06:00.223
> 
> 标签：browser, ios6, user-agent

我正在尝试检查打开页面的客户端是否使用 iOS6。

```
var startIndex = navigator.userAgent.search(/OS/i) + 2;
    var endIndex = navigator.userAgent.search(/like/i);
    var iOSVersion = parseInt(navigator.userAgent.substr(startIndex,endIndex - startIndex).trim());
    this.iOSVersion = true;

    if(!isNaN(iOSVersion)){
        this.iOSVersion = iOSVersion;
    }
    else if(Ext.is.Desktop){
        this.iOSVersion = true;
    } 
```

上面的代码适用于所有版本的浏览器。

但是如果在iOS6中使用它，它会显示为iOS5。搜索相同的东西，但我没有找到解决方案。可能是我还没有完成搜索，并排搜索并希望是否有人以前遇到过这个问题。

有什么建议或更新吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T04:52:18.097

这现在应该在 iOS 6 GM 种子中工作，并且以下正则表达式可以检测 iPhone/iPad 和 iOS6：

/OS (\w+) 类似 Mac OS/i.exec(navigator.userAgent)

# xml - 使用 openoffice 3.3 获取 xml

> ID：11310543
> 
> 赞同：0
> 
> 时间：2012-07-03T12:06:19.870
> 
> 标签：xml, xsd, openoffice.org, openoffice-writer

我有一个开放的办公室文件。我想得到它的xml。（不另存为 word 2003 xml）。我想从中建立一个xml。有人知道吗？（可能是通过制作拉链？）（我有 Windows。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:36:38.617

不确定您要实现的确切目标，但基本的 OpenOffice 文件只是一组压缩的 XML 文件。如果您将文件扩展名从 odt（用于写入文档）更改为 .zip，那么您可以轻松解压缩结构并显示所有单独的文件。例如，使用 Write 文档，主文件是 content.xml，尽管还有许多其他文件包含样式等附加信息。希望有帮助

# scala - 如何区分具有不同抽象类型字段的对象？

> ID：11310547
> 
> 赞同：1
> 
> 时间：2012-07-03T12:06:37.977
> 
> 标签：scala, types

假设，我们有一个带有抽象类型字段的抽象类：

```
abstract class A {type T} 
```

现在假设，我们有一个方法，它返回 type 的对象`A`，但 type 字段`T`可能不同。我们如何区分这些对象？

我们可以尝试模式匹配：

```
object Test {
  def tryToDistinguish(a: A) = 
    a match {
      case b: A {type T = String} => println("String type")
      case b: A {type T = Int} => println("Int type")
      case b: A => println("Other type")
  }
} 
```

但是编译器会抱怨：

```
$>scalac -unchecked Test.scala
Test.scala:8: warning: refinement example.test.A{type T = String} in type patter
n example.test.A{type T = String} is unchecked since it is eliminated by erasure

      case b: A {type T = String} => println("String type")
          ^
Test.scala:9: warning: refinement example.test.A{type T = Int} in type pattern e
xample.test.A{type T = Int} is unchecked since it is eliminated by erasure
          case b: A {type T = Int} => println("Int type")
              ^
two warnings found 
```

似乎类型字段的类型将被擦除（**附带问题：**因为类型字段被转换为 Java 中的参数类型？）

因此，这将不起作用：

```
scala> Test.tryToDistinguish(new A {type T = Int})
String type 
```

**替代方案：**我们可以创建一个枚举并在类`A`中放置一个附加字段以区分对象。但这很奇怪，因为这意味着我们重新实现了类型系统。

**问题：**有没有办法在类型字段的帮助下区分对象的类型？如果没有，什么是好的解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:13:22.810

`<%<`如果两种类型兼容，您可以使用which 在编译时告诉您。

```
scala> class A { type T }
defined class A

scala> implicitly[A { type T=String } <%< A { type T=Int } ]
<console>:9: error: could not find implicit value for parameter e: <%<[A{type T = String},A{type T = Int}]
              implicitly[A { type T=String } <%< A { type T=Int } ]
                        ^

scala> implicitly[A { type T=String } <%< A { type T=String } ]
res1: <%<[A{type T = String},A{type T = String}] = <function1>

scala> implicitly[A { type T=String } <%< A ]
res3: <%<[A{type T = String},A] = <function1> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T12:50:18.847

正如您所猜到的，抽象类型成员是在类型擦除期间将被擦除的编译时信息。这是一个使用`implicit`参数的解决方法。调度是静态的。

```
scala> class A {
     |   type T
     | }
defined class A

scala> implicit def distString(a: A { type T = String }) = "String"
distString: (a: A{type T = String})java.lang.String

scala> implicit def distInt(a: A { type T = Int }) = "Int"
distInt: (a: A{type T = Int})java.lang.String

scala> implicit def distOther[O](a: A { type T = O }) = "Other"
distOther: [O](a: A{type T = O})java.lang.String

scala> def distinguish(a: A)(implicit ev: A { type T = a.T } => String) = ev(a)
distinguish: (a: A)(implicit ev: A{type T = a.T} => String)String

scala> distinguish(new A { type T = String })
res2: String = String

scala> distinguish(new A { type T = Int })
res3: String = Int

scala> distinguish(new A { type T = Float })
res4: String = Other 
```

另一种方式：

```
scala> def dist(a: A)(implicit s: a.T =:= String = null, i: a.T =:= Int = null) =
     |   if (s != null) "String" else if (i != null) "Int" else "Other"
dist: (a: A)(implicit s: =:=[a.T,String], implicit i: =:=[a.T,Int])String

scala> dist(new A { type T = String })
res5: String = String

scala> dist(new A { type T = Int })
res6: String = Int

scala> dist(new A { type T = Float })
res7: String = Other 
```

* * *

**编辑：**

如果上面的解决方案不能满足你，并且你想在运行时具体化和反省这个类型信息，你也可以这样做，使用一个叫做`Manifest`s.

```
scala> :paste
// Entering paste mode (ctrl-D to finish)

abstract class A {
  type T
  def man: Manifest[T]
}

object A {
  def apply[X](implicit m: Manifest[X]) = new A { type T = X; def man = m }
}

// Exiting paste mode, now interpreting.

defined class A
defined module A

scala> def disti(a: A): String = a match {
     |   case _ if a.man <:< manifest[String] => "String"
     |   case _ if a.man <:< manifest[Int] => "Int"
     |   case _ => "Other"
     | }
disti: (a: A)String

scala> disti(A.apply[String])
res14: String = String

scala> disti(A.apply[Int])
res15: String = Int

scala> disti(A.apply[Float])
res16: String = Other 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T16:15:01.067

> 附带问题：因为类型字段在 Java 中被转换为参数类型？

字节码中没有类型参数，所以类型字段不可能被翻译成它们。类型字段仅在编译期间存在。

> 替代方案：我们可以替代地创建一个枚举并在类 A 中放置一个附加字段以区分对象。但这很奇怪，因为这意味着我们重新实现了类型系统。

您只能在运行时提出一种类型问题：这是什么类？Scala 2.10 提供了更多信息，但它仍然归结为这个问题。

如果您实际上是子类`A`，则可以通过反射获取该信息（在 2.10 上）。否则，我不这么认为——我已经在 REPL 上进行了测试，但在那里它不起作用，但是编译到类文件的东西有更多关于它们的信息。

必须对价值观提出任何其他问题。

> 问题：有没有办法在类型字段的帮助下区分对象的类型？如果没有，什么是好的解决方法？

不，除非 Scala 2.10、反射和子类。好的解决方法？使用价值观。处理它的常用方法不是枚举，而是`Manifest`，它可以隐式生成。

查找[有关如何在 Scala 中绕过类型擦除的问题](https://stackoverflow.com/questions/1094173/how-do-i-get-around-type-erasure-on-scala-or-why-cant-i-get-the-type-paramete)。

# c# - 如何获取枚举值；

> ID：11310550
> 
> 赞同：3
> 
> 时间：2012-07-03T12:06:41.207
> 
> 标签：c#, enums

我有以下枚举：

**天：**

```
Sunday    1
Monday    2
Tuesday   4
Wednesday 8
Thursday  16
Friday    32
Saturday  64 
```

**月周**

```
First     256
Second    512
Third     1024
Fourth    2048 
```

例如，我有数字 514，它是 512( `Second`) +2( `Monday`) 的总和。

如果我只有数字 514，我如何获得 Second & Monday？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T12:16:05.057

假设以下定义：

```
[Flags]
enum Days {
  Sunday = 1,
  Monday = 2,
  Tuesday = 4,
  Wednesday = 8,
  Thursday = 16,
  Friday = 32,
  Saturday = 64
}

[Flags]
enum WeekOfMonth {
  First = 256,
  Second = 512,
  Third = 1024,
  Fourth = 2048
} 
```

您可以使用以下代码获取所需的字符串：

```
var value = (Int32) WeekOfMonth.Second + (Int32) Days.Monday; // 514
var days = (Days) (value & 0xFF);
var weekOfMonth = (WeekOfMonth) (value & 0xFF00);
var str = String.Format("{0} & {1}", weekOfMonth, days); 
```

该变量`str`将`Second & Monday`根据需要包含。

`[Flags]`如果您希望能够组合多个`Days`值或值，则该属性很重要`WeekOfMonth`。例如`((Days) 3).ToString()`将返回`Sunday, Monday`. 如果您忘记`[Flags]`返回的字符串的属性是`3`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:15:27.700

好吧，我有一个想法，因为我可以看到它似乎是二进制序列，因此您可以将此数字 514 减去最接近的二进制，即 512，然后对剩余的数字执行相同的过程，直到您得到 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T12:20:59.867

未经测试但应该可以工作：取数字并将其除以第一个 WeekOfMonth 值的 int 值。结果将是双精度，忽略逗号后面的所有内容。现在你有了 WeekOfMonth 的值。然后使用 mod (%) 除法来获得除法的其余部分以获得表示您的 Days 值的剩余值。

在代码中：

```
var intValue = (int)WeekOfMonth.Second + (int)Days.Monday; //514
var weekOfMonth = (WeekOfMonth)Convert.ToInt32(intValue / (int)WeekOfMonth.First);
var day = (Days)(intValue % (int)WeekOfMonth.First); 
```

我不确定所有演员是否都在工作，但它应该给你这个想法；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T12:11:20.050

您可以对每个可能的值进行逻辑与。所有返回非零的值都是您想要的值。

```
var finalValue = ... // 512 -> 1000000010
var possibleValues = ... // array of flags [00000001, 000000010, 00000100, 00001000 ... ]

var appliedFlags = possibleValues.Where(x => x & finalValue == x).ToList(); 
```

# c# - ListBox WP7 内的网络浏览器

> ID：11310560
> 
> 赞同：1
> 
> 时间：2012-07-03T12:07:30.273
> 
> 标签：c#, silverlight, windows-phone-7

我有一个 ListBox，我希望 ListBox 项目的每个项目都显示在单独的 WebBrowser 中，我知道这听起来是个坏主意，但我必须这样做。所以这是我的部分代码来解释我正在尝试做的事情：

```
<ListBox Margin="2,786,-14,-34" ItemsSource="{Binding comments}" DataContext="{Binding BindsDirectlyToSource=True}" Name="commentsListBox" >
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,17">
                            <StackPanel Width="311">
                                <!--<TextBlock Text="{Binding poster_username}" TextWrapping="NoWrap" Style="{StaticResource PhoneTextSubtleStyle}" TextTrimming="WordEllipsis" Width="Auto" Foreground="White" FontFamily="Segoe WP Semibold" />
                                <TextBlock Text="{Binding comment_text}" TextWrapping="Wrap" Margin="12,-6,12,0" Style="{StaticResource PhoneTextSubtleStyle}" TextTrimming="WordEllipsis" MaxHeight="100" />-->
                                <phone:WebBrowser Source="{Binding comment_text}" HorizontalAlignment="Left" Margin="23,786,0,0" Name="commentsWebBrowser" VerticalAlignment="Top" Height="453" Width="440" DataContext="{Binding ElementName=commentsListBox}" Background="Black" Foreground="{x:Null}"  OpacityMask="Black" Opacity="0" />
                            </StackPanel>
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox> 
```

如何将 ListBox 中的数据绑定到 Webbrowser？我看到很多人搜索这个，但我还没有找到答案！非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:27:13.323

使用 WebBrowser 是个坏主意。如果您需要显示一些带有 HTML 格式的文本，请使用来自 MSP Toolkit (http://msptoolkit.codeplex.com/) 的 HTMLTextBox 或 HTMLViewer

# php - PHP 到 EasyPHP MySQL 服务器 1 秒连接延迟

> ID：11310564
> 
> 赞同：13
> 
> 时间：2012-07-03T12:07:36.560
> 
> 标签：php, mysqli, easyphp

我在这里问这个是因为我认为它不仅仅适用于 EasyPHP 本身。

我目前使用 EasyPHP 作为我的 WAMP 开发服务器，因此我可以创建 Web 应用程序。问题是，当我让 mysqli 对象连接到数据库时，它需要 1 秒。在共享主机上运行相同的查询会导致速度提高 200 倍以上。这应该是我应该担心的事情吗？就可扩展性或将我的应用程序移动到另一台服务器而言，花点时间看看问题所在是否明智？我只是假设 EasyPHP 可能很慢。不是专业，只是让我觉得很有趣。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-03-15T15:39:53.837

[*如果您遇到此问题并使用 Windows 7 之前的 Windows 版本，这可能不是您问题的答案。*]

**为什么会这样？**

此问题的原因是 IPv4 与 IPv6。

当您使用主机名而不是 IP 地址时，MySQL 客户端首先运行`AAAA`(IPv6) 主机查找名称，如果成功将名称解析为 IPv6 地址，则首先尝试此地址。如果任一步骤失败（名称解析或连接），它将回退到 IPv4，运行`A`查找并尝试此主机。

这在实践中意味着如果 IPv6`localhost`查找成功但 MySQL 未绑定到 IPv6 环回，您将需要等待一个连接超时周期（显然在 OP 的机器上这是 1 秒），然后 IPv4 回退发生并且连接成功。

这在 Windows 7 之前不是问题，因为`localhost`解决方案是通过 hosts 文件完成的，并且它仅预配置了`127.0.0.1`- 它没有与它的 IPv6 对应项一起提供`::1`。

然而，由于 Windows 7，解析内置于 DNS 解析器中`localhost`，原因如下 所述[。](https://serverfault.com/a/9665/92780)这意味着 IPv6 查找现在将成功 - 但 MySQL 未绑定到该 IPv6 地址，因此连接将失败，您将看到此问题中概述的延迟。

**那很好。告诉我如何解决它！**

你有几个选择。环顾互联网，一般的“解决方案”似乎是明确使用 IP 地址而不是名称，但有几个理由不这样做，两者都与可移植性相关，都可以说都不重要：

*   如果您将脚本移动到另一台*仅*支持 IPv6 的机器上，您的脚本将不再工作。

*   如果您将脚本移动到基于 *nix 的托管环境，则魔术字符串`localhost`将意味着 MySQL 客户端如果配置了一个 Unix 套接字，则更愿意使用它，这比基于 IP 环回的连接更有效

**它们听起来很重要吗？**

他们不是。您应该设计您的应用程序，以便在配置文件中定义此类事情。如果您将脚本移动到另一个环境，则可能还需要配置其他内容。

总之，使用 IP 地址不是*最好*的解决方案，但它很可能是可以接受的。

**那么最好的解决方案是什么？**

最好的方法是更改​​ MySQL 服务器使用的绑定地址。然而，这并不像人们想象的那么简单。与 Apache、Nginx 和几乎所有其他健全的网络服务应用程序不同，MySQL 仅支持单个绑定地址，因此不仅仅是添加另一个绑定地址的情况。不过幸运的是，操作系统在这里确实支持了一些魔法，所以我们可以让 MySQL 同时使用 IPv4 和 IPv6。

您需要运行 MySQL 5.5.3 或更高版本，并且需要使用`--bind-address=`命令行参数启动 MySQL（或在 my.ini 中设置相应的选项）。您有 4 个选项^([docs](http://dev.mysql.com/doc/refman/5.5/en/ipv6-server-config.html))，具体取决于您要执行的操作：

*   您可能熟悉的，并且您最有可能（有效）使用的，`0.0.0.0`. 这将绑定到机器上所有可用的 IPv4 地址。即使您不关心 IPv6，这实际上也可能不是最好的做法，因为它与`::`.

*   显式 IPv4 或 IPv6 地址（例如`127.0.0.1`或`::1`用于环回）。这会将服务器绑定到该地址并且*仅*绑定到该地址。

*   魔线`::`。这将在 IPv4 和 IPv6 模式下将 MySQL 绑定到机器上的每个地址，包括环回和物理接口地址。这存在潜在的安全风险，仅当您需要 MySQL 接受来自远程主机的连接时才这样做。

*   使用[IPv4 映射的 IPv6 地址](http://en.wikipedia.org/wiki/IPv6#IPv4-mapped_IPv6_addresses)。这是 IPv6 中内置的一种特殊机制，用于在 4 -> 6 转换期间向后兼容，它允许您绑定到特定的 IPv4 地址，它与 IPv6 等效。除了“双环回”地址之外，这不太可能对您有用`::ffff:127.0.0.1`。对于大多数人来说，这很可能是最好的解决方案，只绑定到环回但允许 IPv4 和 IPv6 连接。

**我需要修改hosts文件吗？**

**没有**。不要修改主机文件。DNS 解析器知道如何处理`localhost`，重新定义它充其量是没有效果的，最坏的情况是把解析器弄得一团糟。

**怎么样[`--skip-name-resolve`](http://dev.mysql.com/doc/refman/5.1/en/server-options.html#option_mysqld_skip-name-resolve)？**

由于相关但略有不同的原因，这也可能解决问题/需要解决问题。

如果没有此配置选项，MySQL 将尝试通过`PTR`DNS 查询将所有客户端连接 IP 地址解析为主机名。如果您的 MySQL 服务器已经启用 IPv6，但连接仍然需要很长时间，可能是因为反向 DNS ( `PTR`) 记录配置不正确。

禁用名称解析将解决此问题，但它确实有其他后果，特别是配置为在条件下使用 DNS 名称的任何访问权限`Host`现在都将失败。

如果您要这样做，您需要将所有授权配置为使用 IP 地址而不是名称。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-07-03T12:19:52.440

当我使用`localhost`MySQL 服务器地址时，我有一些延迟。改变它来`127.0.0.1`帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T12:15:45.913

不管服务器如何，只要有可能就使用持久连接会很好。毕竟，在旧连接也可以完成工作时，一直打开新连接是不明智的。查看 mysqli 的[手册](http://php.net/manual/en/mysqli.persistconns.php)。

# python - python重新匹配文件中的字符串

> ID：11310567
> 
> 赞同：4
> 
> 时间：2012-07-03T12:07:40.347
> 
> 标签：python

我想匹配文件中的所有行，要么以 15 位开头，`0D`要么`Characters`只有 15 位数字。我怎样才能做到这一点

```
p_number = re.compile(r'(\d{15})')
f=open(infile)
for l in f:
  aa=re.findall(p_number,l)
  if aa > 0:
     print aa
f.close() 
```

`EDIT`

如果只有模式在行首。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T12:15:04.863

*要仅*在行首查找匹配项，请使用[`re.match`](http://docs.python.org/library/re.html#re.match). `0D`如果存在前缀，则此正则表达式匹配所有非空白字符；如果您想匹配更少的字符，请告诉我。

```
>>> p_number = re.compile(r'(0D[\S]{13}|\d{15})')
>>> for s in ['0Dfannawhoopowe foo', 
              'foo 012345678901234', 
              '012345678901234 foo']:
...     match = p_number.match(s)
...     if match:
...         print match.groups()
... 
('0Dfannawhoopowe',)
('012345678901234',) 
```

要了解、 和之间的区别`match`，请参阅以下示例。`search``findall`

`findall`（自然）找到所有匹配项：

```
>>> for s in ['0Dfannawhoopowe foo', 
              'foo 012345678901234', 
              '012345678901234 foo']:
...     match = p_number.findall(s)
...     if match:
...         print match
... 
['0Dfannawhoopowe']
['012345678901234']
['012345678901234'] 
```

`search`在字符串中的任意位置找到该字符串的出现，而不仅仅是在开头。

```
>>> for s in ['0Dfannawhoopowe foo', 
              'foo 012345678901234', 
              '012345678901234 foo']:
...     match = p_number.search(s)
...     if match:
...         print match.groups()
... 
('0Dfannawhoopowe',)
('012345678901234',)
('012345678901234',) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T12:29:19.690

```
import re
with open(infile) as f:
 print re.findall('^(0D.{15}|\d{15})$',f.read(),re.MULTILINE) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-03T12:13:03.340

如果你想用正则表达式做到这一点，当然你可以做到：

```
with open(infile) as f:
  for l in f:
     if re.match('(0D)?[0-9]{15}', l):
       print l 
```

但是你可以完全不用正则表达式来解决这个任务：

```
with open(infile) as f:
  for l in f:
     if (len(l) == 15 and l.is_digit()) or (l[:2]='0D' and len(l)==17 and l[2:].is_digit()):
       print l 
```

# android - 如何在单个活动中获取可滑动的图像视图？

> ID：11310572
> 
> 赞同：0
> 
> 时间：2012-07-03T12:07:55.567
> 
> 标签：android, android-layout, android-imageview, android-gesture

我想做一个活动，我想使用多个图像并想在同一个活动中滑动它。

任何人都可以在这里帮助我编写代码，因为我是 android 新手，我尝试阅读手势类但无法找出正确的解决方案..

我有四个图像视图，并且使用单个活动类想使用滑动来更改视图！！！

我也尝试过使用gestureDetector 类，但它已被android 弃用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:57:10.700

最简单的方法是创建一个 GalleryView 并提供一个包含您要显示的图像的画廊适配器，您也可以用手指滑动它们而无需任何手势识别。

看看这个链接 [http://saigeethamn.blogspot.de/2010/05/gallery-view-android-developer-tutorial.html](http://saigeethamn.blogspot.de/2010/05/gallery-view-android-developer-tutorial.html)

# x86 - 为 x86 中的设备内存副本提供服务的页面错误的中断处理

> ID：11310573
> 
> 赞同：1
> 
> 时间：2012-07-03T12:07:55.923
> 
> 标签：x86, cpu, interrupt, interrupt-handling, dma

我正在尝试在 x86 CPU 上计算中断的控制流程，特别是页面错误。到目前为止，这是我能弄清楚的：

1.  IDT 填充有服务例程地址。
2.  发生中断。
3.  CPU 将 EFLAGS、CS 和 EIP 保存到堆栈。
4.  EIP 设置为从 IDT 获取的 ISR 地址，即`mov eip, [idtr+interruptNum*4]`
5.  中断例程执行。
6.  中断例程以一条`iret`指令完成。

现在，假设中断实际上是与 NIC 缓冲区相关的页面错误。ISR 会`out`用来告诉 DMA 控制器从系统内存向设备发出副本（反之亦然），还是我在这里偏离了基础？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T00:25:51.943

我相信您误解了内存映射 I/O 的工作方式。

当设备使用内存映射 I/O 时，会为其分配一个物理地址范围。[适当配置北桥](http://en.wikipedia.org/wiki/Northbridge_%28computing%29)和/或[南桥](http://en.wikipedia.org/wiki/Southbridge_%28computing%29)，以便当 CPU 在该地址范围内执行内存操作时，这些操作将定向到设备而不是 RAM 。RAM中没有相同地址空间的副本，也不涉及DMA。

为了使设备驱动程序可以访问内存映射的 I/O，操作系统会将虚拟地址范围映射到相关的物理地址范围。通常，出于性能原因，这将是一个全局映射（即每个进程中的相同映射），其访问权限仅限于内核模式。由于这个虚拟地址空间总是被映射的，所以不会发生页面错误。

如果设备使用 DMA 而不是内存映射 I/O，情况会有所不同。设备驱动程序通常会为操作保留一块不可分页的内存，因此同样不会涉及页面错误。该内存甚至不必映射到虚拟地址空间以执行 DMA 操作，因为 DMA 控制器使用物理地址而不是虚拟地址。（当然，在某个阶段必须有一个虚拟地址空间映射，以便设备驱动程序可以读取/写入内存块。）

# c# - Kinect 的最佳手势识别算法

> ID：11310574
> 
> 赞同：2
> 
> 时间：2012-07-03T12:08:02.297
> 
> 标签：c#, algorithm, kinect, gesture

在 Kinect 上进行手势识别的最佳方法是什么？

我想实现：

*   手势识别（手掌+整只手——滑动、挥手等）
*   身体状态识别（如跳跃、向左/向右鞠躬）
*   面部手势识别（面部跟踪现在包含在新的微软 Kinect 库中）

我需要为我的工作使用一些算法来做到这一点（自己的实现：S）。任何人都可以帮助对这 3 组手势的算法进行分类吗？

我必须使用来自 kinectforwindows.com 的 MS 库

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:38:27.503

您可以从 [Gesture Detection Using Machine Learning下载](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=28066)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:20:05.680

我不知道开发自己的手势识别算法，但如果你出于某种原因想要避免使用 Microsoft 的库，你可以尝试查看 OpenKinect 项目和 Openni 库。你可以在这里阅读更多关于它的信息：http: [//openkinect.org/wiki/Main_Page](http://openkinect.org/wiki/Main_Page)

如果这仍然不是您想要的，该项目及其所有文档将为您提供一个良好的开始基础。

# javascript - 未捕获的类型错误：无法读取未定义的属性“0”

> ID：11310577
> 
> 赞同：4
> 
> 时间：2012-07-03T12:08:08.787
> 
> 标签：javascript, jquery, undefined

一段时间以来，我一直在用头撞各种无生命的物体。我正在使用 jQuery 创建一个促销横幅旋转的东西。每 2 秒（我会在未来将其更改为更多，只是为了测试它是否简短），图像和标题会更改。

这很好用，它在它们之间旋转，当它到达最后一个时，它会回到开头。但是当我点击一个，它会回到开头（或者我明确地点击第一个），当它下一次尝试旋转时，它会抛出这个：

```
Uncaught TypeError: Cannot read property '0' of undefined /ftwc/:178
changeImage
rotate 
```

关于我的两个功能。我不明白为什么！

这是脚本：

```
changeImage = function(num) {        
  $(".currentpromoimage").before('<div class="promoimage newpromoimage" style="background: url(\''+images[num][0]+'\') no-repeat; z-index: 1;"><div class="caption" style="color: #'+images[num][2]+'">'+images[num][1]+'</div></div>');

  $(".currentpromoimage").fadeOut(700,function(){
      $(".newpromoimage").addClass("currentpromoimage");
      $(".newpromoimage").removeClass("newpromoimage");
      $(this).remove();
  });

  $(".newpromoimage").fadeIn(700);

  $("#promoselect").children().children().css('background', '#303030');

  $("#ps_"+num).css('background', '#000000');

  currentImage = num;

};

rotate = function() {

    var imageLength = images.length-1;

    if (currentImage == imageLength) {
        changeImage("0");
    } else {
        var nextImage = currentImage+1;
        /*alert("nextImage:"+nextImage);*/  
        changeImage(nextImage);
    }

};

var selectors = "";

var preloads = '';

for(var i=0;i<images.length;i++) {
    preloads += '<img src="'+images[i][0]+'" alt="preloaded" class="preload">';

    selectors += "<li id=\"ps_"+i+"\"></li>";
 }

 $("body").prepend(preloads);

 $("#grass").after('<div id="promo"><div id="promoselect"><ul></ul></div><div class="promoimage currentpromoimage" style="background: url(\''+images[0][0]+'\') no-repeat; z-index: 1;"><div class="caption" style="color: #'+images[0][2]+'">'+images[0][1]+'</div></div></div>');

    var currentImage = 0;

    $("#promoselect").children().append(selectors);

    $("#ps_0").css('background', '#000000');

    $("#promoselect")
        .children()
        .children()
        .click(function() {
            var selector = $(this).attr("id").split("_");

            clearInterval(autoimage);

            changeImage(selector[1]);

            autoimage = setInterval(rotate,2000);   
    });

    autoimage = setInterval(rotate,2000); 
```

这都是在 jQuery 文档就绪函数中调用的，图像是使用 json_encode 从 PHP 编码的数组。我知道现在很乱，但我就是不明白为什么这些函数看起来未定义..

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:17:05.687

您经常使用该`image`变量，但不要在任何地方定义它（或错误）。就在第一行，`images[num]`将评估为`undefined`，访问时抛出错误`images[num][0]`。

# php - Zend 无法连接到 Oracle

> ID：11310579
> 
> 赞同：0
> 
> 时间：2012-07-03T12:08:16.133
> 
> 标签：php, oracle, zend-framework

在我的项目中，我试图让 Zend 框架与 Oracle 一起工作。Apache 在 Windows 下启动。

这是我收到的错误消息：

```
An error occurred
Application error
Exception information:

Message: SQLSTATE[HY000]: General error: 942 OCIStmtExecute: ORA-00942: table or  user representation not exists (ext\pdci\oci_statement.c:14 
Stack trace:
#0 C:\Apache\htdocs\library\Zend\Db\Statement.php(300): Zend_Db_Statement_Pdo->_execute(Array)
#1 C:\Apache\htdocs\library\Zend\Db\Adapter\Abstract.php(479): Zend_Db_Statement->execute(Array)
#2 C:\Apache\htdocs\library\Zend\Db\Adapter\Pdo\Abstract.php(23: Zend_Db_Adapter_Abstract->query(Object(Zend_Db_Table_Select), Array)
#3 C:\Apache\htdocs\library\Zend\Db\Table\Abstract.php(1529): Zend_Db_Adapter_Pdo_Abstract->query(Object(Zend_Db_Table_Select))
#4 C:\Apache\htdocs\library\Zend\Db\Table\Abstract.php(1344): Zend_Db_Table_Abstract->_fetch(Object(Zend_Db_Table_Select))
#5 C:\Apache\htdocs\application\controllers\CompaniesController.php(12): Zend_Db_Table_Abstract->fetchAll()
#6 C:\Apache\htdocs\library\Zend\Controller\Action.php(516): CompaniesController->indexAction()
#7 C:\Apache\htdocs\library\Zend\Controller\Dispatcher\Standard.php(295): Zend_Controller_Action->dispatch('indexAction')
#8 C:\Apache\htdocs\library\Zend\Controller\Front.php(954): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http))
#9 C:\Apache\htdocs\library\Zend\Application\Bootstrap\Bootstrap.php(97): Zend_Controller_Front->dispatch()
#10 C:\Apache\htdocs\library\Zend\Application.php(366): Zend_Application_Bootstrap_Bootstrap->run()
#11 C:\Apache\htdocs\public\index.php(56): Zend_Application->run()
#12 {main}  
Request Parameters:
array (
  'controller' => 'companies',
  'action' => 'index',
  'module' => 'default',
) 
```

这是我的配置：

```
resources.db.adapter = PDO_OCI
resources.db.params.username = username
resources.db.params.password = paswd
resources.db.params.dbname =  "(DESCRIPTION = (ADDRESS_LIST = (ADDRESS = (PROTOCOL = TCP)(HOST = alps)(PORT = 1521)) ) (CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = my.SERVICE.NAME) ) )" 
```

TNS 是正确的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T02:34:23.480

问题解决了。表名必须大写

# linux - 发送到 pid 和组

> ID：11310581
> 
> 赞同：0
> 
> 时间：2012-07-03T12:08:24.013
> 
> 标签：linux, udp, system-calls, strace, sendto

我试图从 linux 上的 strace 中理解这一行：

```
sendto(10, "\24\0\0\0\26\0\1\3\233\274\362O\0\0\0\0\0\0\0\0", 20, 0, {sa_family=AF_NETLINK, pid=0, groups=00000000}, 12) = 20 
```

我在网上和有关 sendto 的手册页中查看过，但我没有看到 pid 和组的参考。未提及事件 AF_NETLINK。

pid 和 groups 参数是什么意思？我在哪里可以找到有关此功能的正确文档？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:13:56.787

`struct sockaddr *`根据[`sendto`](http://www.kernel.org/doc/man-pages/online/pages/man2/send.2.html)手册页，该参数是 a 。当与[`netlink`](http://www.kernel.org/doc/man-pages/online/pages/man7/netlink.7.html)套接字一起使用时，它实际上是一个`struct sockaddr_nl`：

```
struct sockaddr_nl {
       sa_family_t     nl_family;  /* AF_NETLINK */
       unsigned short  nl_pad;     /* Zero. */
       pid_t           nl_pid;     /* Process ID. */
       __u32           nl_groups;  /* Multicast groups mask. */
}; 
```

这就是`pid`and`groups`必须来自的地方（手册的“地址格式”部分解释了这些字段）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:11:53.540

正确的文档是`man 7 netlink`，但是 netlink 做了很多没有很好记录的晦涩的东西，所以祝你好运。

# jquery - 如果其他子 div 不存在，jQuery 使子 div 更大

> ID：11310584
> 
> 赞同：0
> 
> 时间：2012-07-03T12:08:37.070
> 
> 标签：jquery, width

我的 HTML 结构看起来像这样

```
<div class="container">
    <div class="image"><img /></div>
    <div class="title_body">
        <div class="title">Title</div>
        <div class="body">Body text</div>
    </div>
</div> 
```

图像在图像的左侧，标题+正文在图像的右侧。

如果图像不存在，我想要做的是使 title_body div 100% 宽度。有很多 .container，我只想在缺少 .image 的容器中使 div 100%

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:14:43.620

如果（正如你的标题所暗示的）jQuery 是一个替代方案，你可以简单地做`$('div.container:has(div.image)').addClass('has-img')`，然后风格`div.container.has-img`不同于`div.container`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:16:15.900

如果这真的是您想要的，您可以检查长度以查看 img 是否存在，如果您有多个，请尝试使用[**each()**](http://api.jquery.com/jQuery.each/)

```
 if(!($(element).length)){ // if the element not exist
   // do something
 } 
```

这是一个[**现场演示**](http://jsfiddle.net/gFQk7/7/)

* * *

编辑：

这是一个使用 的示例`each()`，如果您有多个：

```
$(".image").each(function(){
   if(!($(this).children().length)){ // if img not exits
       $(this).next().width("100%");
   }
}); 
```

[**现场演示**](http://jsfiddle.net/gFQk7/10/)

* * *

编辑：检查 div `image`：

[**现场演示 2**](http://jsfiddle.net/gFQk7/29/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T12:13:09.880

```
$('.container:has(.title_body)').not(function() {
    return $(this).has('.image').length;
}).css('width', '100%'); 
```

您可以添加一个执行此操作的类，而不是通过 jQuery 手动设置宽度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T12:20:33.383

```
$('.container').each(function(){
    if ($(this).has('.image').length == 0) {
        $(this).children('.title_body:first').css('width', '100%');
    }
});​ 
```

检查[jsFiddle上的示例](http://jsfiddle.net/dymy6/4/)

# html - Mac 上的@font-face 位置问题

> ID：11310589
> 
> 赞同：4
> 
> 时间：2012-07-03T12:09:00.923
> 
> 标签：html, css, macos, font-face

我从[http://fontface.codeandmore.com/](http://fontface.codeandmore.com/)嵌入了一些字体， 它在 Win 但 Mac 中运行良好。问题是 Mac OS 中的位置识别。附件显示了问题。填充和边距问题。有没有人对此有任何解决方案？

该页面也可以在这里查看：http: [//sneakyrascal.com/nxt-bs/](http://sneakyrascal.com/nxt-bs/)

[![mac问题](../Images/e36f98e6ea2f845ae7bb2f7de950473e.png)](https://i.stack.imgur.com/S7eEg.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:19:14.490

嗨，习惯了这种使用 css 在线转换所有格式的字体

[http://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)

# entity-framework - 首先将多个表映射到实体框架代码中的单个实体

> ID：11310590
> 
> 赞同：1
> 
> 时间：2012-07-03T12:09:01.353
> 
> 标签：entity-framework

在数据库中，我们有名为 Sites、Organisations、Person、Department 的表具有相同的结构，如 LookupID、Description 等，还有一些其他表，如 Question、Answer 等。这些表具有与上面相同的列，但有两个或三个额外的列。

使用 Entity Framework Code-First 实现这一点的最佳方法是什么。

在代码方面，我在考虑具有公共属性的查找类，然后是问题等的更多属性。

我想不出我将如何告诉 EF 加载我想要的查找，因为（我不能将类型设置为站点、组织等，因为这些都是查找等。

版本不是问题，我们可以使用最新的版本，因为这是新项目。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:16:47.037

这听起来像每类表 (TPC) 继承。您将 Lookup 实体建模为基本抽象类，并从 Lookup 实体派生所有其他实体。派生类将仅声明特定字段。在数据库中，每个派生实体将表示为具有共享字段和派生字段的单独表。

[可以在数据库优先 (EDMX)](http://blogs.microsoft.co.il/blogs/gilf/archive/2010/01/25/table-per-concrete-type-inheritance-in-entity-framework.aspx)和[代码优先](http://weblogs.asp.net/manavi/archive/2011/01/03/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-3-table-per-concrete-type-tpc-and-choosing-strategy-guidelines.aspx)方法中实现此映射，但是当您尝试查询这些表时，它可能会对性能产生一些影响。如果您仅查询常规查找，EF 将始终连接所有派生表，因为它不知道哪些包含您需要的特定字段。我不确定这是否也发生在 TPC 继承中，但 EF 有时会加入所有继承的表，即使您明确告诉它要查询特定类型 - 这在其他形式的继承 (TPT) 中尤其存在问题，但应该是在 .NET 4.5 中解决。

编辑：有一个细节我忘了提。EF 中的每个实体都必须由其密钥唯一标识。如果您映射继承，则继承层次结构中的每个实体都必须由其键唯一标识。这意味着您的所有查找表都必须使用唯一的键值。

# java - JNI 问题：C++ DLL 中 FileHandle 的符号查找错误

> ID：11310592
> 
> 赞同：3
> 
> 时间：2012-07-03T12:09:06.740
> 
> 标签：java, c++, dll, java-native-interface, filehandle

我制作了 JNI 函数并将它们与 c++ 动态库成功链接。我让它们都工作得很好，但是我遇到了一个函数的问题，我在用于从文件读取数据的 c++ 中使用的 FileHandle 类中遇到符号查找错误。知道它正在处理普通的 c++ 项目，但不在 DLL 中。

/usr/lib/jvm/jdk1.7.0/bin/java：符号查找错误：/home/.../NetBeansProjects/TRIOGUI/dist/libNativeAdd.so：未定义符号：_ZN5Gdsii9GdsParserC1EPKcN7SoftJin10FileHandle8FileTypeEN5boost8functionIFvS2_ESaIvEEE Java 结果：127

有人可以帮我吗？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T20:49:17.757

我发现你的符号非常可疑。不正确的修饰。你是如何得到的？它是从某个地方复制和粘贴吗？你有没有尝试破解它？`10FileHandleF8ileType`应该是`10FileHandle8FileType`。然后它变成一个有效的符号`Gdsii::GdsParser::GdsParser(char const*, SoftJin::FileHandle::FileType, boost::function >)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T09:12:37.197

我找到了问题，谢谢大家。我使用的库有一个库文件“somefile.a”，我在库文件夹中缺少该文件。我得到了库，将其包含在项目中，并且运行良好:)

再次感谢大家的帮助:)

# javascript - 致 Jeff Haynie：为什么 appcelerator 打包一个 JS 编译器？

> ID：11310604
> 
> 赞同：0
> 
> 时间：2012-07-03T12:09:41.013
> 
> 标签：javascript, compiler-construction, titanium, appcelerator

我阅读了很多关于 Titanium 如何工作的文章，但我仍然不明白为什么你需要使用代码发布一个 javascript 引擎？

我到处找到的答案是“我们需要动态代码”，这到底是什么意思？比如...点击事件？然后我不明白为什么你不能解析每个事件中的代码并让它成为 Objective-C 或 Java 代码。

我只是想知道，因为 JS 引擎有时会占用大量资源（即，当您创建一个包含大量元素的窗口并且一旦从 app.ui.createCoolView() 返回时打开它；打开它需要大约 0.5 秒)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:14:02.257

Titanium 使用 JS 编译器，因为它实际上根本不生成本机代码。无论如何，您的代码都会放在设备上。

相反，您的代码将调用 Titanium 代码，以执行本机功能。因此，您对 Titanium API 执行的每个 API 调用都将在本地执行。

如果您执行不使用任何 API 调用的 JavaScript 内容，它将作为 JavaScript 执行。但是，你当然不会看到任何结果。

# php - 将 result_array() 作为数值数组返回，而不是作为关联数组

> ID：11310611
> 
> 赞同：0
> 
> 时间：2012-07-03T12:10:08.567
> 
> 标签：php, codeigniter

所以我用 for 循环进行迭代，我不能使用 result_array() 的结果作为关联数组，我需要通过 numbers 引用元素。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:11:57.710

```
$array = array_values($array); 
```

# iphone - 如何在 iOS 上以编程方式创建类似“主屏幕应用程序文件夹”的按钮？

> ID：11310612
> 
> 赞同：1
> 
> 时间：2012-07-03T12:10:15.230
> 
> 标签：iphone, ios, ios5, xcode4.2, uianimation

我需要在 Springboard 中实现类似文件夹视图的功能，当您按下文件夹按钮并且主屏幕内容很好地滑动以向您显示所选文件夹内的内容时。

我的问题：有可能吗？我的意思是我现在只能想到一种解决方案，只是“简单地”自己制作整个动画，显示子视图、滑动它们和整个返回操作。
这是唯一的方法还是有更简单的方法？
注意：我的应用程序设置为 iOS 5.0 +
最好的问候
Filip

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:14:22.907

SDK 中没有任何“内置”功能可以实现您想要做的事情，因此您必须自己构建它。

要求不应该太大。相当简单：

*   将每个文件夹的 UIButton 添加到“Springboard”视图控制器的视图中。
*   用户点击一个按钮，您在 UIView 子视图中显示文件夹内容的动画。
*   同样，文件夹内容的每个成员都可以由 UIButton 表示。
*   点击内容按钮会在导航堆栈上推送一个新的视图控制器（比如说）
*   将点击手势识别器添加到主视图，因此在打开的文件夹之外点击将关闭它。

这对我来说听起来像是一个巨大的编程挑战！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T12:12:02.540

是的，我认为您需要将其作为自定义视图，添加自定义动画

# css - 骨架响应网格损坏 - 列下降

> ID：11310615
> 
> 赞同：-1
> 
> 时间：2012-07-03T12:10:20.427
> 
> 标签：css, xhtml, skeleton-css-boilerplate

所以，我刚刚开始使用响应式网格框架 Skeleton 的演示。

在我的演示页面上，在标题中，我尝试将 H1 放入八列 div 中，并将按钮放入八列网格中 - 这些位于 16 列容器内。

但是，按钮低于 H1。

我真的看不出哪里出了问题，如果有人能看到明显的东西，那将是最有帮助的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T12:30:52.873

似乎文档有点不清楚 - 需要将 alpha 和 omega 添加到第一列/最后一列以整理边距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:50:17.627

您的问题与边距有关。( )的`width`the似乎不支持两个宽子的and （宽度为 [460px x 2] + 边距为 [10px x 4] = ）。我对 Skeleton 了解得不够多，不知道这是否是他们的问题，但似乎是这样。`.sixteen.columns``940px``width``margin``.eight``960px`

您需要确定您希望这些孩子如何反应。您可以轻松地做两件事中的一件，尽管它如何影响您的“列”对齐方式会有所不同。

**#1 减少所有子边距**

```
.sixteen > .eight.columns { 
    margin-right: 5px; 
    margin-left: 5px; 
} 
```

**#2 保留外边距并消除中心边距**

```
.sixteen > .eight.columns:first-child { 
    margin-right: 0;  
}

.sixteen > .eight.columns:last-child { 
    margin-left: 0;  
} 
```

# java - 从包含图像和文本的 html 生成 PDF

> ID：11310617
> 
> 赞同：2
> 
> 时间：2012-07-03T12:10:23.517
> 
> 标签：java, html, imagemagick, pdf-generation

我正在寻找一种快速有效的方法来从我的网站创建 pdf。pdf 将包含图像以及一些我可以作为 html 传递的文本。pdf 可能只是我传递的 html 的打印格式。类似于 CutePDF 所做的事情。可能吗？如何？请分享你的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:15:16.657

尝试使用`wkhtmltopdf`which 服务于大多数情况。你必须安装这个小 exe / rpm。它首先使用`webkit`引擎渲染 并将网页转换为pdf `html`。`headless browser mode`安装后，您可以通过 java/php 应用程序调用它。它值得安装。

这是链接：[http](http://code.google.com/p/wkhtmltopdf/) ://code.google.com/p/wkhtmltopdf/ 。

PS：我不为`wkhtmltopdf`:) 工作，我在我的一个项目中尝试了其他几个像 itext 一样的工具，但效果不如这个工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T11:11:07.917

真的有可能在我做之前一周。我曾使用 java、servlet 和 jsp 来做同样的事情。

## 脚步 ：

1.  读取 html 文件并将其保存在字符串中。
2.  使用 ITextRenderer 将 html 转换为 pdf
3.  使用 setDocumentFromString() 从字符串中设置渲染文档
4.  然后使用 createPDF() 方法创建 pdf
    *   您可以将pdf存储在指定路径或输出流中，我使用了输出流

## 示例代码：

```
Visit http://today.java.net/pub/a/today/2007/06/26/generating-pdfs-with-flying-saucer-and-itext.html
protected void doProcess(HttpServletRequest request,
        HttpServletResponse response){
    response.setContentType("application/pdf;");
    response.setHeader("Content-Disposition", "attachment; filename=Filenametodownload.pdf");       
    String reportContent = "<html><body><b>This is sample HTML</b></body></html>";
    ServletOutputStream sos =null;
    try {
        sos = response.getOutputStream();
    } catch (IOException e1) {          
        e1.printStackTrace();
    }
    String st = System.getProperty("user.dir");
    // ITextRenderer is only works fine with compailed version of core-renderer.jar 
    //Jar available in http://wo-repository.doit.com.br/content/repositories/thirdparty/org/xhtmlrenderer/core-renderer/R8-final/
    ITextRenderer renderer = new ITextRenderer();   
    //System.out.println(reportContent);
    renderer.setDocumentFromString(reportContent);
    renderer.layout();
    try {
        renderer.createPDF(sos);
    } catch (DocumentException e) {         
        e.printStackTrace();
    }

    try {       
        sos.close();
        session.removeAttribute("ReportContent");
    } catch (IOException e) {           
        e.printStackTrace();
    }
} 
```

注意：包括 itext.jar 和 core-renderer.jar

试试这个方法你可以做到...一切顺利...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T13:36:32.117

如果你想在服务器端进行 HTML->PDF 转换，并且你的服务器代码已经在 J​​ava 或 C#/.NET 中，你可以使用iText 中的[XMLWorker](http://sourceforge.net/projects/xmlworker/)。这是一个[演示页面](http://demo.itextsupport.com/xmlworker/)和一些[文档](http://demo.itextsupport.com/xmlworker/itextdoc/index.html)（已过时，但应该很快更新）。

OTOH，如果您想在客户端进行转换，那么PDF打印机呢？我个人最喜欢的是[PDFCreator](http://www.pdfforge.org/)。请注意，使用 PDF 打印机只是您的解决方案，不适用于浏览您网站的任何用户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T15:38:13.257

如果您不想安装 WKHTMLTOPDF 之类的工具，但仍需要完整的 CSS、HTML 和 Javascript 功能，您可以使用[Sprint PDF](http://www.sprintpdf.com)。这是一个带有大量选项的在线 API。

# svg - div内的SVGPan

> ID：11310619
> 
> 赞同：0
> 
> 时间：2012-07-03T12:10:26.290
> 
> 标签：svg, raphael

我正在使用来自cyberz.org 的SVGPan.js 来缩放和平移svg 文件。它本身运行良好，但是当我尝试在 div 中显示 svg 时，它不起作用。SVG 不显示。我尝试使用 Raphael.js 和 raphael-svg-import 插件。当我尝试 raphael-svg-import 演示时，每次都会抛出错误，例如“您输入的 VG 无效！类型错误，Raphael.deg() 不是函数”。此外，似乎只有演示有效。当我尝试另一个 svg 文件时，会显示一个空白页。

所以我的问题是，1.有没有办法将 svg 文件与 div 内的 SVGPan 脚本绑定？或 2\. 有没有办法使用 raphael-svg-import 导入 svg 文件而不会出错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:58:48.787

我使用[http://keith-wood.name/svg.html](http://keith-wood.name/svg.html)和[https://github.com/talos/jquery-svgpan在 div 中完成了 svg 缩放和平移](https://github.com/talos/jquery-svgpan)

```
<div id="canvas"></div>
<script type="text/javascript">
$(document).ready ( function () {
    $('#canvas').svg({ loadURL: 'svg.xml', onLoad: loadDone });
    });
function loadDone() {
    $('#canvas svg').svgPan('viewport')
    }
</script> 
```

# foreach - 我们可以在 tcl 中使用这样的 foreach 循环吗？

> ID：11310620
> 
> 赞同：2
> 
> 时间：2012-07-03T12:10:27.443
> 
> 标签：foreach, tcl

我有两个清单：

```
set lista {5 6}
set listb {8 9} 
```

以下代码用于循环这两个列表：

```
foreach listaelement listbelement $lista $listb {
    puts $listaelement &listbelement 
} 
```

我们如何使用foreach来实现输出是：
lista的第一个元素，listb的
第一个元素，lista的
第一个元素，listb的
第二个元素，lista的第二个元素，listb的第一个元素，lista的第二个元素，listb的第二个元素,

```
5 8
5 9
6 8
6 9

```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T12:26:22.647

只需嵌套循环并使用 -nonewline 即可提供您想要的输出：

```
foreach listelementa $lista {
   foreach listelementb $listb {
      puts -nonewline "$listelementa  $listelementb  "
   }
}
puts "" 
```

注意：您需要在`puts`语句中使用引号来阻止 Tcl 将第一个参数解释为通道 id。

Tcl 允许你在一个`foreach`语句中引用多个列表

```
foreach listelementa $lista listelementb $listb {
    puts -nonewline "$listelementa  $listelementb  "
}
puts "" 
```

然而，这给出`5 8 6 9`了它的输出 - 不是你需要的。

**编辑：**我很确定当我回答输出格式为 1 行的问题时，如果您实际上想要每对 1 行，那么您不需要`-nonewline`on`puts`和尾随空格，并且 final`puts`也可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-21T04:35:23.103

```
set lista {5 6}

set listb {8 9}

set indexb [expr ([llength $listb ] -1)]

foreach listano $lista {

for {set i 0 } {$i <= $indexb } {incr i} {

 set element [lindex $listb $i]

 puts "element is $listano $element"
 }
} 
```

元素是 5 8 元素是 5 9 元素是 6 8 元素是 6 9

# c# - 引用显式元素 id

> ID：11310621
> 
> 赞同：1
> 
> 时间：2012-07-03T12:10:29.493
> 
> 标签：c#, javascript, asp.net

我的 javascript 函数看起来像这样 -

```
function updateSuccess(aEle) {
    //Here aEle doesn't have the correct id
    percIncrease.innerText = "Success";
} 
```

意识到以这种方式获取元素很糟糕，那么获取该元素的更安全方法是什么？

更多信息 - 这是我从 C# 中调用它的方式。

```
DropDownList ddl = new DropDownList();
ddl.ID = "ddlData1";

ddl.Attribute.Add("onchange", "updateSuccess('" + ddl.ClientID + "')"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:23:30.627

**编辑**

根据您问题中的编辑，您只需要这样做

```
ddl.Attribute.Add("onchange", "updateSuccess(this)"; 
```

**javascript**

```
function updateSuccess(element) {
              alert(element.id);
              document.getElementById(element.id).innerText = "Success";
              //or try below directly
              //element.innerText = "Success";
 } 
```

* * *

我认为你正在使用带有 Asp.net 的 javascript，你可以做这样的事情

**函数声明**

```
function updateSuccess(recordID) {
     var percIncrease = document.getElementById(recordID);
     percIncrease.innerText = "Success";
 } 
```

**调用函数**

```
 updateSuccess('<%= serverelementID.ClientID %>'); 
```

**或者直接喜欢**

```
function updateSuccess() {
     var percIncrease = document.getElementById('<%= serverelementID.ClientID %>');
     percIncrease.innerText = "Success";
 } 
```

# wpf - Caliburn Micro：如何将 ActivateItem 绑定到导体中的 selectionEvents

> ID：11310624
> 
> 赞同：0
> 
> 时间：2012-07-03T12:10:34.357
> 
> 标签：wpf, caliburn.micro, rad-controls, convention-over-configur

从 SimpleMDI Caliburn Micro 项目中可以看出，有一些约定将 tabControls 中的 selectionEvent 绑定到 Conductor 中的 ActivateItem。我真的看不出有任何提及这个事件可能是什么。

但是，当您的控件不能满足这些约定时，我会迷失如何自己管理它们。

我有一个 Telerik RadTreeView，我想用一个导体来管理它，以便能够按需加载节点的子节点（通过 WCF 调用）。

这是我所在的位置：

```
<telerik:RadTreeView x:Name="Items"
                     cal:Message.Attach="[Event Selected] = [ActivateItem($dataContext)]"  /> 
```

传递 $dataContext 是错误的，因为这样他传递了 Conductor 本身，$SelectedItem 返回 null。

所以我相当简单的问题是三重的。

1）如果 RadTreeView 是一个选择器，为什么基本的 CM 约定不能使用它，

2) 我应该使用什么事件来调用 ActiveItem

3）我可以传递什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:58:09.847

[这](http://www.codeproject.com/Articles/26288/Simplifying-the-WPF-TreeView-by-Using-the-ViewMode)可能有助于理解执行树视图和 mvvm 的不同方法。

我也在使用 RadTreeView，最终将事件发送到`Items`托管`TreeViewItemViewModel`. 当一个动作/事件（例如 Edit）被发送到 MainViewModel 时，我有一个类似的方法：

```
 public void Edited(object sender, RadTreeViewItemEditedEventArgs e)
        {
            var treeViewItemViewModel = e.NewValue as IEditable;
            if (treeViewItemViewModel == null) return;

            treeViewItemViewModel.EndEdit();
        } 
```

所以这适用于树中的任何级别，也适用于具有不同的行为，检查不同事物的接口是否已实现。

RadTreeView 的 xml

```
 <telerik:RadTreeView x:Name="MyTree"
                                     Grid.Row="1"
                                     Margin="0,20,0,0"
                                     VerticalAlignment="Stretch"
                                     FontSize="16"
                                     FontFamily="{StaticResource MainFontFamily}"
                                     ItemsSource="{Binding Children, Mode=TwoWay}"
                                     ItemTemplate="{StaticResource HierarchicalDataTemplate}"
                                     ItemEditTemplateSelector="{StaticResource ItemEditTemplateSelector}"
                                     ItemEditTemplate="{x:Null}"
                                     IsLoadOnDemandEnabled="True"
                                     IsEditable="True"
                                     IsDragDropEnabled="True"
                                     DropExpandDelay="00:00:01"
                                     telerik:TextSearch.TextPath="ItemId"
                                     PathSeparator="|"
                                     cal:Message.Attach="
                                    [Event LoadOnDemand] = [Action LoadOnDemand($eventArgs)];
                                    [Event PreviewDragStarted] = [Action PreviewDragStarted($source,$eventArgs)];
                                    [Event PreviewDragEnded] = [Action PreviewDragEnded($source,$eventArgs)];
                                    [Event DragEnded] = [Action DragEnded($source,$eventArgs)];
                                    [Event Edited] = [Action Edited($source,$eventArgs)];
                                    [Event EditCanceled] = [Action EditCanceled($source,$eventArgs)]"/> 
```

# python - Python：没有破折号的 argparse 可选参数

> ID：11310626
> 
> 赞同：27
> 
> 时间：2012-07-03T12:10:38.097
> 
> 标签：python, argparse, optional-arguments

我想要以下语法：

```
python utility.py file1 FILE1 file2 FILE2 
```

其中 file1 和 file2 是可选参数。使用以下语法很简单：

```
python utility.py --file1 FILE1 --file2 FILE2 
```

使用

```
parser.add_argument('--file1',type=file)
parser.add_argument('--file2',type=file) 
```

但是，如果我删除破折号，argparse 开始将其解释为位置参数而不是可选参数......

换句话说，是否可以明确告诉 argparse 参数是可选的还是位置的，这样我就可以在没有破折号的情况下使用可选参数？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T12:15:49.223

没有办法`argparse`为您做到这一点。但是，您可以`argparse`接受任意数量的位置参数：

```
parser.add_argument('FILES',nargs='*')
options=parser.parse_args()
file1,optional_files=options.FILES[0],options.FILES[1:] 
```

当然，您可能需要添加一些检查以确保至少提供了 1 个文件，等等。

**编辑**

我仍然不能 100% 确定你想要什么，但如果`file1`和`file2`是文字字符串，你可以通过 preprocessing 来解决这个问题`sys.argv`。当然，这仍然会奇怪地格式化您的帮助消息，但您始终可以添加一个结语，说明任何一种形式都可以：

```
import argparse
import sys

mangle_args=('file1','file2')
arguments=['--'+arg if arg in mangle_args else arg for arg in sys.argv[1:]]

parser=argparse.ArgumentParser()
parser.add_argument('--file1')
parser.add_argument('--file2')
options=parser.parse_args(arguments) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-07-30T11:28:36.793

另一个例子是：

```
train.py

import argparse
if __name__ == '__main__':
    parser = argparse.ArgumentParser(description="Arguments for wake_word")
    parser.add_argument('data', type=str, help="path to data")
    parser.add_argument('output', type=str, help="model save path")
    parser.add_argument('batch_size', type=int, help="batch size")
    parser.add_argument('epochs', type=int, help="no.s of epochs")
    args = parser.parse_args()
print(args.data + args.output + args.batch_size + args.epochs) 
```

那么你可以只用参数运行这段代码而不用破折号

```
train.py /path/to/data/ /path/to/output_files/ 128 100 
```

并且，按升序排列

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-03T00:29:03.303

有同样的问题。我的解决方法是：

```
lastarg = sys.argv[-1]
if len(sys.argv) > 1 and lastarg[0] != '-':
    sys.argv[-1] = '-file'
    sys.argv.append(lastarg)

argparser = argparse.ArgumentParser()
argparser.add_argument('-d', action='store_true')
argparser.add_argument('-nrv', action='store_true')
argparser.add_argument('-file', type=str, default='')
args = argparser.parse_args() 
```

# ruby-on-rails - 推特和欧洲锦标赛

> ID：11310632
> 
> 赞同：-5
> 
> 时间：2012-07-03T12:10:55.837
> 
> 标签：ruby-on-rails, ruby, twitter, gem

我正在使用 mac 并安装了 twitter gem。

现在，我如何访问 Twitter 的高级搜索来下载有关欧洲锦标赛决赛的所有推文？谢谢。

```
gem 'twitter'
gem 'twitter-text' 
```

这是推文控制器：

```
def index
   @tweets = Tweet.all
end 
```

推文模型

```
class Tweet < ActiveRecord::Base
    include Twitter::Extractor
    def extract_tags
        extract_hashtags(self.post)
    end
end 
```

和视图：

```
<% @tweets.map(&:extract_tags).flatten %> 
```

还有路线

```
get "index" => "tweets#index"
get "tweets#index" 
```

这没用！我不知道为什么！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:42:23.323

你最好的朋友是谷歌，别忘了那个伙伴。有一篇关于推文获取的不错的文章/教程，您应该查看：[推文获取](http://ruby.bastardsbook.com/chapters/intro_tweet_fetch/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T12:41:09.753

也许您应该只查看[twitter gem 文档](https://github.com/jnunemaker/twitter)和其中的`search`方法。

# c++ - 如何使 shared_ptr 的所有副本等于另一个 shared_ptr？

> ID：11310636
> 
> 赞同：3
> 
> 时间：2012-07-03T12:11:20.467
> 
> 标签：c++, shared-ptr, smart-pointers

我无法弄清楚.. 看起来我错过了一些简单的东西？我该放`MakePointToSameValue`什么`(1)`

*   b.ptr 和 c.ptr 都指向与 a.ptr 相同
*   换句话说，`a.ptr.get() == b.ptr.get() == c.ptr.get()`
*   b.ptr 和 c.ptr 最初指向的值被删除

?

```
struct Test
{
public:
  Test( int val ) :
    ptr( std::make_shared< int >( val ) )
  {
  }

  void MakePointToSameValue( Test& other )
  {
    //what do I put here?
    //other.ptr = this->ptr; //doesn't do it
  }

private:
  std::shared_ptr< int > ptr;
};

Test a( 0 );
Test b( 5 );
Test c( b );

b.MakePointToSameValue( a );

//(1) 
```

复制 ptr 不起作用，因为它不会改变 c（嗯，c.ptr 的引用计数减少了 1）。请注意，我`int`只是为了简单起见，但它应该适用于不可复制的类型。

为什么？我有一个表示值的类，任何类型的值，用于某种编译器。实际值及其存储方式在实例化时是已知的。唯一知道的是类型。因此，该类存储了一个 shared_ptr ，其中包含稍后确定的值的占位符（对应于编译作为指针或引用传递的函数定义的参数：编译器只知道类型，仅此而已）。在运行时，占位符应替换为实际值。

**编辑**新的一天，想出了这个。我知道这很简单。

```
void MakePointToSameValue( Test& other )
{
  other.ptr.swap( ptr );
  ptr.reset();
  ptr = other.ptr;
} 
```

现在的另一个问题是：对于任何符合标准的指针，上述工作是否会按预期工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T16:03:11.320

这里需要两级间接。虽然您是对的，所有`shared_ptr`对象都指向一个公共元数据块，其中包含计数和指向实际值的指针，但如果您尝试更新该块以指向不同的对象，您现在将有两个元数据块指向相同的值，每个人对引用计数有自己的不同想法。使用每个元数据块的对象的数量（在它与引用计数相匹配的意义上）是正确的`shared_ptr`，因此每个块上的计数最终将达到零，但是没有办法知道哪个块是最后一个达到计数的块零（因此应该删除该值）。所以`shared_ptr`明智地不允许更改元数据中的对象指针。您只能关联`shared_ptr`使用新的元数据块、新计数、新对象。指向同一对象的其他指针不受影响。

正确的方法是使用第二层间接（`shared_ptr<shared_ptr<int> >`）。这样一来，每个对象只有一个元数据块和一个计数。您的更新发生在中间 shared_ptr 上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T12:19:20.080

好吧，据我了解您的要求，`shared_ptr`不包含任何此类机制；任何常规类型也不会。如果你想要这种行为，你必须自己编写代码。我的建议：添加一个私有静态`std::list<std::weak_ptr<Test>> registry`；`Test`通过将每个实例添加到构造函数中的列表来注册每个实例`registry`，并确保在析构函数中将其删除。

然后使用该注册表`MakePointToSameValue`来遍历所有实例并重置`ptr`.

如果您对效率感兴趣并且实例多于三个，则需要将 ; 替换`list`为`unordered_set`; 也许使用`unique_ptr`而不是`shared_ptr`在你的`Test`课堂上。

回答附加问题：不，它不起作用。查看文档`reset()`：它重置了一个特定的实例`shared_ptr`：它对任何其他实例都不做任何事情（也不知道）。当控制块中的引用计数达到零时，它还会破坏指针对象，但仅此而已。

# pygtk - Gtk.TextView 的背景颜色 - 看不到选择

> ID：11310637
> 
> 赞同：1
> 
> 时间：2012-07-03T12:11:25.607
> 
> 标签：pygtk, pygobject

我使用方法 override_background_color 成功更改了 Gtk.TextView (GTK3) 的背景颜色：

```
color.parse(self.settings.get_string("bgcolor"))
self.ui.NoteView.override_background_color(Gtk.StateType.NORMAL,color) 
```

我还覆盖了前景色。不幸的是，在这种情况下，在文本中进行选择是不可见的。如何在不丢失可见文本选择的情况下修改 TextView 的背景和前景色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:31:02.243

最好在 GtkTextView 中使用`GtkTextTags`. 您可以将任何类型的文本格式（背景和前景色、字体、大小、粗细等）应用于文本的任何部分。

单击[此处](http://python-gtk-3-tutorial.readthedocs.org/en/latest/textview.html#tags)查看示例。希望有帮助！

顺便说一句，你正在做的是改变你的风格`TextView`。最好不要这样做，特别`Gtk`是如果您不在受控环境中或计划发布您的软件供他人使用，因为 gtk 的理念是将样式和主题留给最终用户自己的个人接触/需要。这就是为什么通过覆盖样式颜色会得到一些不需要的结果的原因。就 a 而言，`GtkTextView`它*确实*`GtkTextTags`通过使用上面的链接提供了简单的文本格式（甚至支持添加图像/小部件） 。

# ruby-on-rails - Rails - 简化计算模型和对象

> ID：11310639
> 
> 赞同：2
> 
> 时间：2012-07-03T12:11:31.263
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, ruby-on-rails-3.1, model

我最近问了一些关于这个的问题，我正在到达我需要去的地方，但在我的最后一个问题中可能不够具体，无法一直到达那里。因此，我正在尝试建立一个结构来计算基于应用程序数据的一些指标，它应该是灵活的，以允许轻松（安全地）添加其他指标，并且在我的视图中使用起来也相对简单。

总体目标是我将能够拥有一个自定义助手，在我看来，它允许以下内容：

```
calculate_metric(@metrics.where(:name => 'profit'),@customer,@start_date,@end_date) 
```

这应该是不言自明的 - 该名称可以替换为任何可用的度量名称，并且可以在任何给定时间段内为任何客户或客户组执行计算。

出现复杂性的地方在于如何存储计算指标的公式 - 我在下面展示了我为此而汇总的当前结构：

![在此处输入图像描述](../Images/f0a47c5d0a17310001ea69df01b83820.png)

您会注意到关键模型是度量、操作、操作类型和操作数。当公式非常简单时，这种结构可以正常工作，比如利润 - 一个只有两个操作数，`@customer.sales.selling_price.sum`并且`@customer.sales.cost_price.sum`，只有一个类型的减法运算。由于我们不需要存储任何中间值，`register_target`will be`1`和`return_register`.

我认为我不需要写一个完整的例子来说明它在哪里变得更复杂，但我只想说我是否想计算在两个日期之间开户的客户拥有电子邮件地址的客户百分比（但不一定购买），这将变得更加复杂，因为辅助函数需要知道如何处理日期变化。

因此，这种结构似乎过于复杂，除了一个简单的公式之外很难用于任何其他东西——任何人都可以提出解决这个问题的更好方法吗？

编辑：根据 Railsdog 的回答，我对我的模型做了一些细微的改动，并重新上传了图表以清楚起见。本质上，我确保了reporting_category 模型可以用来对用户隐藏中间操作数，并且可以在用户计算中使用的操作数可以以分类格式呈现。我现在需要的只是有人帮助我修改我的结构，以允许操作以 rails-esqe 方式使用*实际*操作数或先前操作的结果。

感谢您迄今为止的所有帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:55:28.930

OY合租。自从我做了类似于你正在尝试的事情以来，已经有好几年了（比如 15 年）。我的应用程序用于模拟工业焚化炉的颗粒沉积率。

最后，所有计算都归结为两个操作数和一个运算符（操作顺序、括号等）。操作数要么是常量、db 值，要么是另一个计算的结果（指向另一个计算的指针）。任何操作数（通过模型方法）都可以评估自己，无论该值是内在的，还是需要子计算首先评估自己。

界面不是特别优雅（我认为这是真正的挑战），但用户是科学家，他们理解计算分解。

考虑到您的问题，我会让任何单独的 Metric 能够返回它的值，并创建必要的方法来得出该答案。毕竟，单个度量只需要知道如何使用指示的运算符组合它的两个操作数。如果一个操作数本身就是一个度量，你只需问它它的价值是什么。

# mysql - 将具有不同列的表相交

> ID：11310640
> 
> 赞同：0
> 
> 时间：2012-07-03T12:11:33.523
> 
> 标签：mysql, sql, database

所以基本上我有两张桌子

**帖子**（简单文章）

![在此处输入图像描述](../Images/76bb730ee5f604199ad79495fa5bae0d.png)

**posts_wall**（发布在该用户墙上的文章）

![在此处输入图像描述](../Images/02123d0664b4f83b90f6999f70f7551e.png)

现在我想以某种方式组合它们，并按它们的创建/更新日期对它们进行排序，如果帖子没有上传，upload_id 列为 NULL，即使来自 posts_wall 表，所以我有 2 个目标

1.  将 2 个表相交。
2.  按日期订购。

并且：

我应该添加哪一列`timeline`？自 1970 年以来的点赞数`2012-01-01`或`13405848858`秒数？

据我所知，我必须`INTERSECT`他们，但是

```
SELECT * FROM posts
INTERSECT
SELECT * FROM posts_wall 
```

给我语法错误。

我这样做的原因是我想查看`USER1`有权查看它们的帖子，以及任何用户在`USER1`墙上发布的帖子。

还有另一个名为`article_or_wall_article`知道这是一篇文章还是某人墙上的帖子的专栏，会很棒，我想要一个很好的优雅方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:19:42.527

你想要一个基于字段的 INNER JOIN ......？从您的问题中不清楚您想加入哪个领域。

对于时间戳，在这两种情况下都有优点和缺点 - 时间戳需要转换，但可以更轻松地比较日期。

在 MySQL 中，您必须指定哪些字段来自哪个表以及如何关联它们。我真的没有看到“posts”和“posts_wall”之间有意义的 JOIN。

如果你想要两组记录，那么你需要两个表之间的 UNION：

```
select field1, field2, field3 from posts
UNION field1, field2, field3 from posts_wall 
```

如果您在其中一个表中没有字段，请选择合适的值和数据类型并替换缺少的字段：

```
...UNION field1, field2, "NOTHING!" as field3 from posts_wall 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:51:57.160

@Row Minds 对于两个表的交集，您必须具有相同数量的列。我从您下面的问题中了解到的是可能对您有所帮助的查询

```
Select * 
from
(
SELECT Posted_by as UserID,title, content, PostedDate
FROM posts
INTERSECT
SELECT  Sended_by as UserID,title, content,PostedWallDate as PostedDate 
FROM posts_wall
)A
Order by PostedDate desc 
```

# symfony - 如何验证 Symfony 2 中至少一个元素（或 N 个元素）的选择？

> ID：11310641
> 
> 赞同：8
> 
> 时间：2012-07-03T12:11:33.687
> 
> 标签：symfony, doctrine-orm, symfony-forms

我的表单作为字段`users`（实体类型）。如何添加验证以明确**应选择至少一个用户**？实际上我正在添加一个事件监听器，但我不知道这是否是一个合法的解决方案：

```
public function buildForm(\Symfony\Component\Form\FormBuilder $builder,
    array $options)
{
    $builder
        ->add('title', 'text', array(
            'label' => 'Titolo'
        ))
        ->add('content',  'textarea', array(
            'label' => 'Contenuto'
        ))
        ->add('sender_text',  'text', array(
            'label' => 'Mittente testuale',
        ))
        ->add('users', 'entity', array(
            'label'    => 'Destinatari',
            'class'    => 'DL\FidelityBundle\Entity\User',
            'property' => 'select_label',
            'multiple' => true
        ));
    ;

    // Valida il numero di utenti selezionati
    $builder->addEventListener(\Symfony\Component\Form\FormEvents::POST_BIND,
        function($event) {
            $form = $event->getForm();
            $data = $event->getData();

            if(!$data->users->isEmpty()) return;

            $msg = 'Occorre specificare almeno un utente destinatario';
            $form->get('users')->addError(new FormError($msg));
    });
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-25T17:40:30.917

从 Symfony 2.1 开始，您可以使用`Count`约束。如果您使用的是 2.0，您可以简单地将约束复制到您的项目并调整其命名空间和 API（在 2.0 和 2.1 之间略有更改）。

```
/**
 * @Assert\Count(min = 1, minMessage = "Occorre specificare almeno un utente destinatario") 
 */
private $users = new ArrayCollection(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-24T00:29:42.707

您是否尝试过使用 Count 约束验证器？我想您的代码将如下所示：

```
->add('users', 'entity', array(
        'label'    => 'Destinatari',
        'class'    => 'DL\FidelityBundle\Entity\User',
        'property' => 'select_label',
        'multiple' => true,
        'constraints' => new Count(
            array('min' => 1, 'minMessage' => "Please select at least one user')
        ),
    )); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-03T12:46:05.757

看看验证组件：[http ://symfony.com/doc/current/book/validation.html](http://symfony.com/doc/current/book/validation.html)

您可以在要验证的对象中编写[回调约束：](http://symfony.com/doc/current/reference/constraints/Callback.html)

```
use Symfony\Component\Validator\ExecutionContext;

public function isUsersValid(ExecutionContext $context)
{
    if ($this->users->isEmpty()) {
        $propertyPath = $context->getPropertyPath() . '.users';
        $context->setPropertyPath($propertyPath);
        $context->addViolation('Occorre specificare almeno un utente destinatario', array(), null);
    }
} 
```

请参阅回调约束页面如何将此约束添加到您的实体（这取决于您是否使用注释或 yaml/xml）。

# c++ - C ++中的Pthread取消

> ID：11310644
> 
> 赞同：0
> 
> 时间：2012-07-03T12:11:42.403
> 
> 标签：c++, pthreads

以下（伪）代码会引发一些我不理解的行为。我有 2 个线程并行运行。两者都进行相同（复杂）的计算，但我不知道哪个会先完成。反复运行，有第一个更快的情况，也有第二个更快的情况。这没关系，可以按预期工作。然后，第一个成功的线程应该终止另一个线程，并且两个线程应该一起分叉。但是，如果第一个求解器完成，则一切正常，但如果第二个求解器先完成，则“连接命令”不会识别出第一个求解器已终止（因此连接将永远等待，程序不会继续）。任何想法我做错了什么或我可以做些什么不同？

```
void* thread_function(...)
{
   do_some_complex_task();
   if (successfull && first_finsihed)
   {
        pthread_chancel(other_thread);
   }
}

int main()
{
    std::vector<pthread_t*> store;
    store.resize(2);

    pthread_setcancelstate(PTHREAD_CANCEL_ENABLE, NULL);
    pthread_setcanceltype(PTHREAD_CANCEL_ASYNCHRONOUS, NULL);

    pthread_create(store[0], NULL, thread_function, ...);
    pthread_create(store[1], NULL, thread_function, ...);

    pthread_join(*store[0], NULL);
    pthread_join(*store[1], NULL);
} 
```

PS。如果伪代码不够详细，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:15:25.983

不要使用`pthread_cancel` - 使用全局状态，并在每个线程的“主循环”中检查它。在线程函数退出之前将其设置为“on”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T14:26:57.543

根据伪代码，一个问题可能是线程具有延迟取消（默认值）而不是异步取消。如果被取消的线程从未到达[取消点](http://www.kernel.org/doc/man-pages/online/pages/man7/pthreads.7.html)，`pthread_join`则将阻塞。调用[`pthread_create`](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_create.3.html)时，新创建的线程继承调用线程的：

*   信号掩码 ( [`pthread_signmask`](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_sigmask.3.html))
*   浮点环境 ( [`fenv`](http://www.kernel.org/doc/man-pages/online/pages/man3/fenv.3.html))
*   [能力](http://www.kernel.org/doc/man-pages/online/pages/man7/capabilities.7.html)
*   CPU 亲和性掩码 ( [`sched_setaffinity`](http://www.kernel.org/doc/man-pages/online/pages/man2/sched_setaffinity.2.html))

尝试`pthread_setcanceltype`从您希望取消的线程中调用。您可能还需要考虑将调试器附加到程序以识别线程的当前状态。

理想情况下，如果可能的话，考虑避免`pthread_cancel`. 尽管记录了 pthread 调用，但由于所有次要细节，可能难以获得和维护准确的行为。通常更容易设置一个指示线程设置为退出的标志，并在设置时开始从函数返回。在`do_some_complex_task`中，考虑将复杂的任务分解成更小的任务，并检查每个更小的任务之间的取消。

# iphone - COCOS-2d:NEED Idea 在游戏中实现关卡进度

> ID：11310648
> 
> 赞同：0
> 
> 时间：2012-07-03T12:11:55.620
> 
> 标签：iphone, ios, cocos2d-iphone

我开发了一个 20 级的 ios 游戏。我在开始屏幕上有菜单，其中有 20 个级别的 20 个按钮。

我需要的是，例如，如果用户未完成第 1 级，则不应启用第 2 级按钮，依此类推。当用户在游戏中完成某些级别时，应启用下一个级别。

我知道它非常基本，这是我在 ios 中的第一个游戏。所以请温柔，任何想法将不胜感激。:)

注意：我的游戏完全是 cocos 2d。cocos2d 中的任何想法都是好的 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:14:19.730

在您的应用程序委托中，您可以有一个指向他完成的级别的变量，并且您还将有一个函数，该函数将基于该变量启用和禁用按钮

要禁用按钮，您可以使用

```
button.enabled = NO; 
```

当用户结束一个级别时，增加级别达到变量和启用/禁用按钮

使用用户默认值的示例

环境`currentLevel`

```
[[NSUserDefaults standardUserDefaults] setValue:[NSNumber numberWithInt:currentLevel]
                                         forKey:@"level"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

获取 currentLevel

```
currentLevel = [[[NSUserDefaults standardUserDefaults] valueForKey:@"level"] intValue]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T12:18:04.947

你可以使用[NSUserDefaults](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)来记住你的玩家已经完成的关卡。

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
if ([defaults objectForKey:@"savedGameLevel"] ) {
    NSNumber *num = [defaults objectForKey:@"savedGameLevel"];
} 
```

然后您可以启用/禁用按钮，例如

```
 for(UIButton *levelBtn in self.yourView.subviews)
 {
     if(levelBtn.tag == [num intValue] + 1)
         [levelBtn setEnabled:YES];
     else
         [levelBtn setEnabled:NO];

 } 
```

//用于保存游戏状态

```
 -(void)saveLevelAsFinished
   { 
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:@"1" forKey:@"savedGameLevel"];

   } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T12:30:37.080

使用“custombutton”类创建所有按钮。在其中设置 BOOL 变量。

```
@interface CustomLabel : UIButton
{
  BOOL *is_level_completed;

}
@property (nonatomic, retain)BOOL *is_level_completed; 
```

在创建按钮时设置 btn.is_level_completed = NO;在完成每个关卡后设置 btn.is_level_completed = YES;之后检入视图并更改已完成关卡的图像。

存储数据

设置按钮的标签值（如 1,2,3...），并在完成关卡时使用以下代码将标签值存储在 NSUserDefaults 中，

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
[prefs setInteger:btn.tag forKey:@"Completed_level_no"]; 
```

在 viewWillAppear 中获取已完成的关卡并更改按钮的图像。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-03T12:16:46.540

最初，您使除 button1 之外的每个按钮都禁用，如下所示：

```
button2.enabled = FALSE; 
```

等，然后用户完成第一级使按钮2启用如下：

```
button2.enabled = TRUE; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-03T12:18:35.873

这是一个伪代码：

```
for (int i=1; i<=count;i++)
    button[i].enable() //This method will enable the button

for (int i=count+1; i<=20; i++)
    button[i].disable() //This method will disable the button 
```

基本上，第一个循环迭代直到计数（即达到的级别数）并相应地启用按钮。同样，第二个循环从下一个按钮开始迭代并禁用其余的。

如果所有按钮都被启动为禁用，则可以避免第二个循环。

# php - 致命错误：调用未定义的方法 Jobeet::slugify()

> ID：11310652
> 
> 赞同：0
> 
> 时间：2012-07-03T12:12:02.107
> 
> 标签：php, symfony1, symfony-1.4, jobeet

我有自己的项目，我想为这个类添加与 Jobeet 教程相同的内容： [http ://www.symfony-project.org/jobeet/1_4/Doctrine/en/05](http://www.symfony-project.org/jobeet/1_4/Doctrine/en/05)

我复制了与本文完全相同的内容，但出现错误：

```
Fatal error: Call to undefined method Jobeet::slugify() 
```

我的操作中不包含 /lib 的任何自己的类，但来自 Doctrine 等的方法 getTable 有效。不只为我的所有文件夹/lib 工作。为什么？我该如何启用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:37:33.937

首先，你有这个文件：[Jobeet.class.php](http://svn.jobeet.org/trunk/lib/Jobeet.class.php)吗？

其次，这很奇怪，因为默认情况下，存储在项目中以下目录中的类会自动受益于自动加载：

*   我的项目/lib/
*   我的项目/lib/模型
*   我的项目/应用程序/前端/lib/
*   我的项目/应用程序/前端/模块/mymodule/lib

当您需要从其他文件夹加载 lib 时，您可以强制自动加载。[检查文档](http://www.symfony-project.org/book/1_2/19-Mastering-Symfony-s-Configuration-Files#chapter_19_extending_the_autoloading_feature)（这适用于 sf1.2，但适用于 1.4）。

# javascript - 在使用 Jquery 的 javascript 创建的标记中调用 javascript 函数

> ID：11310655
> 
> 赞同：0
> 
> 时间：2012-07-03T12:12:03.843
> 
> 标签：javascript, jquery

我有通过单击按钮使用 Jquery 显示的表单字段。

```
[select dropdown: conOperator]   [textfield: conValue ]  [select dropdown: conValuedd] 
```

conValuedd 默认隐藏。

我试图找出一种方法，以便当我在第一个选择下拉列表 [conOperator] 中选择 Apple 或 Banana 时，它会隐藏文本字段 conValue 并改为显示下拉 conValuedd。但是，如果我选择西瓜，它将显示 conValue 并再次隐藏 conValuedd。任何想法将不胜感激。

```
$('<select id="conOperator' + num + '" name="conOperator' + num + '" class="standard_select" style="width:147px;">
    <option>Watermelon</option>
    <option>Apple</option>
    <option>Banana</option>
   </select>&nbsp;
   <input type="text" id="conValue' + num + '" name="conValue' + num + '" class="short_input" value="" style="width:147px;">&nbsp;&nbsp;
   <select style="display:none" id="conValuedd' + num +'" multiple="multiple" size="5">
    <option value="option1">Blah</option>
    <option value="option2">Blah</option>
   </select>').appendTo('#addCondition'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:21:06.440

尝试类似：

```
$('#addCondition').on('change','#conOperator' + num, function(e){        
    switch( $('option:checked',this).text() ){
        case 'Apple':
        case 'Banana':
            $(this).nextAll(':text:first').hide();
            $(this).nextAll('select:first').show();
            break;
        case 'Watermelon':
            $(this).nextAll(':text:first').show();
            $(this).nextAll('select:first').hide();
            break;
    }
});
$('#conOperator' + num).trigger('change'); 
```

[**演示**](http://jsfiddle.net/E76sS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:17:09.470

当您调用`appendTo()`时，生成`<select/>`的将添加到 DOM 中，因此您可以使用 jQuery 检索它并在其上添加侦听器。

```
$("#conOperator" + num).change(function() {
    // Your logic here
} 
```

# objective-c - 在复合 UIView 中的触摸事件上突出显示 UITableViewCell

> ID：11310658
> 
> 赞同：1
> 
> 时间：2012-07-03T12:12:25.030
> 
> 标签：objective-c, uitableview, xcode4.3, uistoryboard

我有一个 UITableViewCell，它由一个子容器 UIView 和一些其他子组件组成，例如标签、背景、图标等。每个 UIImageView 在 Xcode IB 中还设置了一个突出显示图像。

单元格组装在 UIStoryBoard 中并有一个连接到它的 segue，因此我没有使用委托的典型 didSelect 方法。这是层次结构：

```
UIViewController (serving as UITableView delegate)
--> UIView (main view)
    --> UITableView
        --> UItableViewCell
            --> UIView
                --> (several UIView, image, label, etc..) 
```

我想知道如何在这种情况下选择我的单元格。突出显示整个单元格对我来说很好，但我也有兴趣知道如何进行特定选择。

对于选择/突出显示，我的意思是，忘记标准的蓝色或灰色选择，而是回忆我在 IB 中标记为“突出显示”的所有特定图像。

平台目标是 iOS 5。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:50:06.113

你的 UIViewController 文件应该实现`UITableViewDelegate`并且`UITableViewDataSource`

```
@interface NameOfViewController : UIViewController <UITableViewDelegate, UITableViewDataSource> 
```

然后你可以覆盖表的方法。听起来你想覆盖`didSelectRowAtIndexPath`. 我仍然有点不清楚你到底想要做什么，但听起来你只会使用这个方法，要么告诉单元格它被突出显示，要么向单元格传递一条消息告诉它做某事（比如改变它的图像） . 如果您想这样做，您还需要对您的单元进行子类化并从 .xib 文件中加载它。对不起，如果这听起来像很多工作，但表格视图需要大量代码来定制，而不是非常基本的东西。

# php - 仅显示模块的小面板

> ID：11310661
> 
> 赞同：1
> 
> 时间：2012-07-03T12:12:30.640
> 
> 标签：php, sugarcrm

我正在创建一个自定义调查包，其中包含问题模块、答案模块和第三个名为调查的模块，该模块必须用于将 question_id 与用户选择的 answer_id 关联起来。[创建这三个不同的模块是有原因的]

现在问题和答案与调查模块有一对多的关系，我不想显示调查模块的任何子面板、列表、编辑、创建或弹出（所有那些默认存在的视图）视图并想使用图表dashlet 以显示调查结果。

谁能告诉我如何禁用调查模块的所有视图？

我希望每个人都清楚我的问题。

问候， 阿南德·乔希

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:22:02.340

您应该能够进入 custom/modules/{Survey_Directory} 并创建一个 controller.php - 在该 controller.php 文件中，您可以像这样覆盖这些操作。

```
 public function action_DetailView()
    {
        $this->view = null;
        $GLOBALS['view'] = $this->view;
    } 
```

将视图设置为 null 将删除布局和所有内容，创建空白方法将呈现布局但忽略实际视图。如果你想让人们一起出去，你可以在控制器中扔一些代码来处理重定向。

一些常见的操作是：

*   action_DetailView
*   action_EditView
*   action_Popup
*   action_ListView

希望这可以帮助您入门。

# google-app-engine - 如何设置 Google App Engine/Apps 以允许非管理员用户引擎应用程序使用子域

> ID：11310665
> 
> 赞同：0
> 
> 时间：2012-07-03T12:12:50.427
> 
> 标签：google-app-engine, google-apps

所以我有一个域，我们称之为 example.com，我已经在这个域（电子邮件、网站等）中使用 Google Apps。此帐户的管理员是 admin@example.com。我有一个名为 myapp 的 App 引擎应用程序，我希望通过 myapp.example.com 访问它，但我不想使用 admin@ 用户来托管/控制应用程序，我想使用权限较低的帐户 myapp@。

我已经尝试将此用户权限授予“域设置”，但是当我尝试添加 example.com 时仍然出现访问错误。

如何允许 myapp@ users App Engine 应用程序使用 myapp.example.com？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:05:29.267

好的，所以我找到了一种稍微难看的方法来完成这项工作。

第 1 步：通过应用程序上的 admin@ 帐户将角色“超级管理员”分配给 myapp@ 用户（这是临时的）。

第 2 步：以 myapp@ 身份登录 App Engine 并运行将域添加到应用程序然后分配子域的过程。完成并正常工作后退出。

第 3 步：再次以 admin@ 身份登录 Apps，并删除 myapp@ 的“超级管理员”权限。

这仍然会保留分配给应用程序的子域，您可以从 admin@ 的仪表板进行控制。myapp@ 仍然控制着应用程序，但如果您想更改域设置，您可能需要重复步骤 1-3。

# jquery - 尝试修复教授云轮播

> ID：11310674
> 
> 赞同：0
> 
> 时间：2012-07-03T12:13:17.990
> 
> 标签：jquery, carousel

我有一个关于 jQuery 云轮播的问题 (http://professorcloud.com/mainsite/carousel.htm)。现在我们可以将类“carousel”的图像放入容器中。但是如果我需要放入带有类轮播的容器 div，这个插件就不起作用了。我尝试更改代码，但我看到同样的情况。我想添加类 tu 当前元素。有谁能够帮我？

```
...
<script type="text/javascript">
    $(document).ready(function(){
        $("#wrap").CloudCarousel({  
            xPos: 398,
            yPos: 25,
            buttonLeft: $("#left-but"),
            buttonRight: $("#right-but"),
            altBox: $("#alt-text"),
            titleBox: $("#title-text"),
            FPS: 50,
            //autoRotate: 'left',
            autoRotateDelay: 1200,
            speed: 0.2,
            bringToFront: true,
            mouseWheel: false,
            minScale: 0.4,
            reflHeight: 86,
            reflGap: 10
        });

});
</script>
</head>
<body>
    <div id="wrap" style="width:796px; height:338px; background:#000; overflow:scroll;">
        <div class = "cloudcarousel"><img src="img/1.gif" alt="Image One" /></div>
        <div class = "cloudcarousel"><img src="img/2.gif" alt="Image Two" /></div>
        <div class = "cloudcarousel"><img src="img/3.gif" alt="Image Three" /></div>
        </div>
</body>
... 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T17:07:57.823

假设您已经正确加载了 jQuery 和云轮播 javascript，并且已经初始化了一切正常，我相信`class="cloudcarousel"`需要成为`img`元素的一部分，而不是`div`.

我看不到`div`您图像周围标签的用途。

# list - 任何 CouchDB _list 函数都不能工作

> ID：11310675
> 
> 赞同：6
> 
> 时间：2012-07-03T12:13:18.223
> 
> 标签：list, views, couchdb, document

努力让任何列表功能正常工作。我对 _show 和 _view 函数没问题，但列表似乎不起作用，或者我误解了该怎么做！（我承认需要一个白痴的指南！）

我的设计文档如下所示：

```
{
   "_id": "_design/lists",
   "_rev": "3-d22225b4a28a6ca11484723c3a37201b",
   "language": "javascript",
   "views": {
       "variants": {
           "map": "function(doc) { emit(doc.var, doc.number_of_results); }"
       }
   },
   "lists": {
       "results": "function(head, req) { var row; while(row = getRow()) {send(row.value);}}"
   }
} 
```

当我输入 http://localhost:5984/mydb/_design/lists/_view/variants 时，我会得到一个变体名称列表，例如：

```
...{"id":"f050ad9b9f725443cb8c4071f40583b","key":"rs1013940","value":19008},
{"id":"f050ad9b9f725443cb8c4071f40daff","key":"rs1013940","value":19008},
{"id":"f050ad9b9f725443cb8c4071f40b985","key":"rs1021188","value":10197}... 
```

但是当我输入 http://localhost:5984/mydb/_design/lists/_list/results 我得到：

```
{"error":"list_error","reason":"Invalid path."} 
```

有谁知道我做错了什么？我已经尝试了所有我能想到的方法，并从任何在线教程中替换了该功能。

我在 Ubuntu 12.04 上使用 CouchDB 1.0.1 版

非常感谢，希望有人能帮忙！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-03T14:44:31.460

您需要在 URL 中同时包含视图名称和列表名称：

`http://localhost:5984/:db/_design/:ddoc/_list/:list/:view`

在您的情况下，这意味着：

`http://localhost:5984/mydb/_design/lists/_list/results/variants`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-29T01:27:03.407

我有完全相同的难题。从初学者的角度来看，要立即辨别使用视图、节目和列表的区别并不容易。在官方文档中，我读到了这个：

`While Show functions are used to customize document presentation, List functions are used for same purpose, but against View functions results.`

这让我有点困惑。我同样认为可以单独使用一个列表来整理文档，也许是在一个漂亮的多汁 HTML 涂层中，但我真的只是在阅读了权威指南的这一页后才弄清楚发生了什么（这是一个令人难以置信的资源！）

[http://guide.couchdb.org/draft/transforming.html](http://guide.couchdb.org/draft/transforming.html)

就像多米尼克说的那样，基于 API 对我来说应该是显而易见的 :)

# php - 邮政编码中的邮政编码扇区

> ID：11310676
> 
> 赞同：0
> 
> 时间：2012-07-03T12:13:20.277
> 
> 标签：php, postal-code

嗨，我需要从完整的邮政编码中提取到邮政编码部门。

请参阅下文以了解我需要如何返回。

```
User inputs "BA12 3GH"  Script Returns >> "BA12"
User inputs "H2 3NM"  Script Returns >> "H2" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:14:35.633

```
$postcode = 'BA12 3GH';
// If you want both parts, do list($sector, $otherpart) = ...
list($sector) = explode(' ', $postcode);
echo $sector; 
```

（如果要提取这两个部分，则应添加 `, 2`，因此如果输入变为）`explode``AA BB CC``$otherpart``BB CC`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T19:28:39.147

为了让事情变得更好，您需要了解邮政编码的格式，它由 outcode 和 incode 组成。例如，“BA12 3GH”，BA12 是输出码，3GH 是输入码。outcode 可以是 2-4 个字符，例如 B1、EH16。但是，incode 始终是三个字符，以一个数字开头，然后是两个字符。有关格式规则的更多信息：[http ://www.ukpostcode.net/uk-postcodes-formatting-rules-wiki-6.html](http://www.ukpostcode.net/uk-postcodes-formatting-rules-wiki-6.html)

这样，就会变得非常清楚。

$sector = trim(substr($postcode,0,-3));

当用户输入邮政编码时，输出码和输入码之间没有空格，上述脚本也将起作用。

# android - 如何从应用程序的 logcat 中仅获取 log.i 值？

> ID：11310678
> 
> 赞同：1
> 
> 时间：2012-07-03T12:13:31.860
> 
> 标签：android, logcat

我想将我的应用程序的 logcat 值，特别是 LOG.I 保存在 sdcard 中。我已使用以下代码获取所有日志值，但无法对其进行过滤以仅获取特定的 log.i 值。请建议怎么做？

```
 try {
       File filename = new File(Environment.getExternalStorageDirectory()+"/gphoto4.html"); 
            filename.createNewFile(); 
            String cmd = "logcat -d -f "+filename.getAbsolutePath();
            Runtime.getRuntime().exec(cmd);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:22:18.460

**更新：**

只需更改您的代码，

```
String cmd = "logcat -d -f "+filename.getAbsolutePath(); 
```

和

```
String cmd = "logcat -v time -r 100 -f <filename> [TAG]:I [MyApp]:D *:S";
Runtime.getRuntime().exec(cmd); 
```

您不必自己创建文件，只需执行上述命令即可获取您的应用程序的特定标签信息。

这里

```
-v -> Sets the output format for log messages.
-r -> for specifying the size of file.
-f -> file to which you want to write the logs.
[TAG] -> Tag of your application's log.
[MyApp] -> Your application name. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:21:31.113

可能不是一个直接的答案，但我认为这对你有用[Application Crash Report for Android](http://code.google.com/p/acra/)，

我在我的一些项目中使用了它，它的工作原理就像奇迹一样。

# knockout.js - 子模型和父上下文

> ID：11310683
> 
> 赞同：0
> 
> 时间：2012-07-03T12:13:48.117
> 
> 标签：knockout.js

我已经在这个小提琴中隔离了我的问题

[http://jsfiddle.net/xYphz/](http://jsfiddle.net/xYphz/)

它使用根模型而不是父模型

编辑：一个明显的解决方案是使用模板，但必须有一种更简单的方法来获取正确的上下文？

[http://jsfiddle.net/eHrBR/](http://jsfiddle.net/eHrBR/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:32:33.160

通常你会做这样的事情：

```
<!-- ko with: subModel -->
<div data-bind="foreach: items">
    <button data-bind="click: $parent.clickMe">Click me</button>
</div>
<!-- /ko --> 
```

这可确保父上下文是您的`subModel`. 当然，您可以将`with`绑定放在元素上，而不是使用无容器绑定。

[http://jsfiddle.net/rniemeyer/xYphz/1/](http://jsfiddle.net/rniemeyer/xYphz/1/)

# ruby-on-rails - Rails 3.2 将“s”放在生成的脚手架后面

> ID：11310691
> 
> 赞同：1
> 
> 时间：2012-07-03T12:14:08.187
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, scaffolding

我想知道我是否可以在所有脚手架之后生成一个脚手架而不会得到那个 annyoing s。

例如，当我运行 rails generate scaffold product 时，rails 会生成一个名为 products 的脚手架。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:28:50.997

您可以修改`config/initializers/inflections.rb`并为您想要以不同方式复数/单数化的单词提供自定义[变形。](http://api.rubyonrails.org/classes/ActiveSupport/Inflector/Inflections.html)就像是：

```
ActiveSupport::Inflector.inflections do |inflect|
  inflect.uncountable "product"
end 
```

会使它`rails g scaffold Product ...`不会复数表名和控制器名。

但是，我建议不要这样做，或者仅仅因为你不喜欢多元化。Rails 的优势之一是“约定优于配置”，就像在某些情况下，如果你不遵守约定，从长远来看，它会带来更多的麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T12:24:57.140

也许你应该考虑改变你的`config/initializers/inflections.rb`文件。通过以下链接了解更多信息：

*   [Rails 3 中的复数化和单数化（变形）](http://blog.thefrontiergroup.com.au/2011/06/pluralizations-and-singularizations-inflections-in-rails-3/)
*   [ActiveSupport::变形器](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html)

# python - 如何监控可变对象的更改？

> ID：11310704
> 
> 赞同：1
> 
> 时间：2012-07-03T12:14:50.893
> 
> 标签：python, python-2.7

我在某些类上有一些计算成本很高的属性。只要可变/基础属性不改变，这些属性就不会改变。有没有办法存储昂贵的财产，并且只有在进行了更改时才重新计算？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:23:40.533

您可以在属性方法中测试其他变量并将它们用作缓存键的一部分：

```
class CachedProperties(object):
    @property
    def expensiveValue(self):
        cacheKey = (self.var1, self.var2)
        if cacheKey in self._expensiveValueCache:
            return self._expensiveValueCache[cacheKey]

        # No cached value available, calculate it now
        res = self._expensiveValueCache[cacheKey] = calculation(self.var1, self.var2)
        return res 
```

现在您推迟计算，直到您真正需要昂贵的值*并且*var1 或 var2 已更改。

# ajax - 在成功函数中取回变量的值

> ID：11310705
> 
> 赞同：1
> 
> 时间：2012-07-03T12:14:52.263
> 
> 标签：ajax

```
function check_timer(){
    //get product ids
    var product_ids= document.getElementsByClassName("product_id");
    //create for loop
    for(var i=0; i<product_ids.length; i++){
        var product_id= product_ids[i].innerHTML;

        $.ajax({
            //send product id to check
            url: "check_last_timer.php",
            type: "post",
            data: {product_id: product_id},
            success: function(end_time){
                //trying to get product_id here

                //$("#timer"+product_id).html(end_time);
            }
        })

    }

} 
```

我正在尝试在成功功能中获取我的产品 ID。如您所见，我有一个 for 循环，每次运行时都会将 product_id 例如 1,2,3...10 发送到“check_last_timer.php”。问题是如何在成功函数中取回 1,2,3...10。每次 for 循环运行时，我都会得到最后一个产品 ID，即 10。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:28:44.167

您不能在闭包内使用在闭包外部声明的循环变量。

当您使用 jQuery 时，请使用`.each`：

```
function check_timer() {
    $('.product_id').each(function() {
        var product_id = this.innerHTML;  // or $(this).html()
        $.ajax({
            //send product id to check
            url: "check_last_timer.php",
            type: "post",
            data: {product_id: product_id},
            success: function(end_time){
                $("#timer" + product_id).html(end_time);
            }
        });
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:26:10.730

这是因为 AJAX 调用顾名思义是异步的。for 循环继续排队 ajax 调用，因此您将得到 last id 为 10，因为 for 循环太快并且 ajax 调用需要时间才能完成。

您可以做的是发送 product_id 请求。成功从服务器取回然后进行处理

# servlets - Struts hello world 示例

> ID：11310706
> 
> 赞同：2
> 
> 时间：2012-07-03T12:14:58.257
> 
> 标签：servlets, struts

我有一个具体的疑问。

在示例中，[hello world 示例](http://www.dzone.com/tutorials/java/struts/struts-tutorial/struts-tutorial-using-eclipse-1.html)在浏览器中输入 URL 后，控件是转到 action servlet 还是 index.jsp 页面？我很困惑，因为在 web.xml 中，欢迎文件是 index.jsp。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:03:08.973

When ever the request comes from the browser the struts controller(ActionServlet) will checks the `url-pattern` of `*.do` from `servlet-mapping` tag in `web.xml`.

Every request should come to `web.xml` before to process mappings. Based on mappings it goes next to `struts-config.xml` file to which action or form should call.

you can look into this [Simple Struts Login Application](http://javabynataraj.blogspot.com/2011/12/basic-struts-login-application.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T12:22:58.877

只有`*.do`被映射到 ActionServlet。因此，只有以 结尾的 url`*.do`才会转到 ActionServlet。

# css - HTML并排DIV定位

> ID：11310709
> 
> 赞同：1
> 
> 时间：2012-07-03T12:15:06.850
> 
> 标签：css, html, position

考虑一下这个 JSFiddle： http: [//jsfiddle.net/GFsgq/5/](http://jsfiddle.net/GFsgq/5/)（您可能需要缩小一点）。

它显示了我想要实现的布局。到目前为止一切顺利，但我遇到了障碍。我想将两个高度为 77px 的 div 与居中的 div 并排放置。他们需要保持宽度以始终触摸屏幕边缘及其中心 div。我不确定如何用我有限的 CSS 知识来做到这一点，没有随机添加属性。

她是一张可以帮助您理解的图片：http: [//i49.tinypic.com/2ntz34n.png](http://i49.tinypic.com/2ntz34n.png) 蓝色条是我希望 div 所在的位置。我如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:16:41.593

你需要在你的 CSS 中添加这个：

```
header:after {
  content: "";
  display: block;
  background-color: blue;
  width: 100%;
  height: 80px;  
} 
```

jsFiddle： http: [//jsfiddle.net/GFsgq/32/](http://jsfiddle.net/GFsgq/32/)
fullsrcreen 结果：http: [//jsfiddle.net/GFsgq/32/embedded/result/](http://jsfiddle.net/GFsgq/32/embedded/result/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:00:38.777

我会添加父 div 跨越屏幕的 thw dith 位置：相对；并对两个子 div 使用 position:absolute; 并向右定位：0px；另一个左边：0px；我不确定你想如何分配宽度，如果你有任何其他问题然后回来。

# python - Python - 使用 itervalues() 时更改字典的值

> ID：11310710
> 
> 赞同：4
> 
> 时间：2012-07-03T12:15:15.253
> 
> 标签：python, dictionary, iterator

我想知道当它不依赖于键时是否可以修改 Python 字典的值：

```
# d is some dictionary containing classes I wrote
for v in d.itervalues():
    # modify v, and v's type may or may not change 
```

我不确定Python标准对此有何规定，有人可以提供一些信息吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T13:21:14.393

如果你的意思是这样的结构：

```
d = {1: [1]}
for v in d.itervalues():
    v[0] += 1 
```

那么是的，这是完全安全的。仅存储对相关对象的`dict`引用，除了存储和检索之外不以任何方式触及它。这没有明确记录，但它隐含在[映射的定义中](http://docs.python.org/library/stdtypes.html#mapping-types-dict)（它`dict`是一个子类型）：

> 映射对象将可散列值*映射*到任意对象。

“任意”意味着对象可能是可变的。

# ios - 从后台返回时主视图变暗

> ID：11310715
> 
> 赞同：0
> 
> 时间：2012-07-03T12:15:38.050
> 
> 标签：ios, view

我正在使用 RouteMe 的图书馆和服务来显示地图。
主 ViewController 拥有`*RMMapView`从 UIView 继承的一个。基本上它只是用瓷砖填满。
当我的应用程序进入后台，一段时间后，通常在其他应用程序加载到内存后，又回到前台，主 mapView 完全变黑，除了我的 UI 什么都看不到。（我猜是因为内存不足）

我怎样才能防止这种情况发生？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:20:05.717

您无法阻止内存警告的发生，但是如果您 100% 确定您无法处理某些视图控制器中的内存警告并停止调用以`viewDidUnload`删除`didReceiveMemoryWarning`视图控制器中的实现

**请注意**，不建议禁用 viewDidUnload，您应该反映您的内存使用情况并提供更好的内存管理技术

# html - 另一个“为什么我的 Favicon 没有显示？”

> ID：11310718
> 
> 赞同：0
> 
> 时间：2012-07-03T12:15:54.713
> 
> 标签：html, internet-explorer, google-chrome, icons, favicon

# 更新

* * *

我刚刚尝试再次将我的网站“固定”到任务栏（删除它之后），但是当我单击并按住地址栏内 16x16px 图标上的鼠标按钮时（见下图），你可以看到我的网站图标被拖动了用鼠标 - 所以 Internet Explorer 找到并得到了图标 - 它只是没有在所有正确的地方显示它！还更新了以下代码： ![在此处输入图像描述](../Images/419eb88465d3262884f3ed1d3db0f9c8.png)

* * *

正如标题所示，我无法显示我的网站图标；在任何浏览器的任何版本中。不过，有 1 个例外 - 这还不够好：

IE 9 和 IE 10 - ![在此处输入图像描述](../Images/c47d99c99673571df1023faddf508514.png)

正如您可能在上面的屏幕截图中看到的那样，我*唯一*能看到我的 favicon 是在我将其添加到我的收藏夹文件夹并打开收藏夹栏之后。favicon 不*显示*在选项卡中（页面标题旁边），它不显示在任务栏区域，如果我将我的网站“固定”到任务栏，它也不会显示在浏览器窗口的左上角.

在其他所有浏览器中，它根本不显示。

我已经尝试了我可以在网上找到的所有可能的“解决方案”。

这是我的代码：

```
 <link rel="icon" type="image/x-icon" href="http://www.mysite.com/favicon.ico"><!-- Major Browsers -->
    <!--[if IE]><link rel="shortcut icon" href="http://www.mysite.com/favicon.ico"/><![endif]--><!-- Internet Explorer--> 
```

我还尝试了所有常见的图标大小；`16x16`, `32x32`, `64x64`,`128x128`和`256x256`- 我什至尝试将所有大小保存在同一个`*.ico`文件中。

我试过删除文件的缓存`*.ico`文件。

没有任何效果。完全相同的代码以前曾在我制作的其他网站上工作过。我不明白。是什么赋予了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T12:25:46.113

**我已经编辑了这个答案，只留下了有问题的问题的解决方案。**

采用：`<link rel="shortcut icon" href="{ICONURL}"/>`

代替：`<link rel="icon" href="{ICONURL}"/>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-26T23:48:39.430

刚才我的网站也有同样的问题。让自己疯狂地试图让 favicon.ico 文件正常工作。最终让它在 IE 11（在 Windows 7 上）中为我正常工作的是完全转储 favicon.ico 文件并使用 PNG 代替：

```
<link rel="shortcut icon" href="/favicon-32x32.png" type="image/png"/> 
```

我使用了一个带有透明层的 PNG 文件。一旦我这样做并上传了我的页面，IE 就会在下一页刷新时开始在选项卡（和快捷方式/书签）中正确显示图标。我仔细检查了一下，看起来 Chrome 和 Firefox 也很酷。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-06T21:43:44.913

我用

```
<link rel="icon"
      type="image/ico"
      href="Link Goes Here"> 
```

如果将网站图标放在文件夹中：

```
<link rel="icon"
      type="image/ico"
      herf="Folder/Subfolder" 
```

确保代码在 head 标签中。确保图像为 .ico 格式；否则它将无法正常工作。

# visual-studio-2010 - Visual Studio 中 Sharepoint 文件的版本历史记录

> ID：11310730
> 
> 赞同：3
> 
> 时间：2012-07-03T12:16:20.197
> 
> 标签：visual-studio-2010, sharepoint, version-control, sharepoint-2010

我已经在我们的 TFS 2010 中集成了 Sharepoint 2010 - 并通过 Visual Studio 2010 中的“团队资源管理器”访问文档。我可以打开和编辑所有文档（例如 docx）。但是我无法访问每个项目的版本历史记录，因为我可以对 TFS 源代码控制中的源代码项目进行访问。为此，我必须打开 Sharepoint 网站，导航到文档并阅读那里的历史记录。

是否有任何选项或插件可以直接在 Visual Studio 中获取共享点项目的版本历史记录？

谢谢，康拉德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T12:40:49.860

不幸的是，如果不直接在 Sharepoint 中打开文档库，则没有此选项。这是一个好主意，您应该在 Visual Studio 的 UserVoice 网站上列出它。我认为它会成为一个很棒的电动工具。 [http://visualstudio.uservoice.com/forums/121579-visual-studio](http://visualstudio.uservoice.com/forums/121579-visual-studio)

这是一个相关请求，用户希望能够从 TFS 工作项链接到特定版本。 [http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2052075-easier-method-for-associating-sharepoint-versioned](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2052075-easier-method-for-associating-sharepoint-versioned)

麦克风

# java - 如何在我的 Java 项目文件中找到我的文件的路径？

> ID：11310731
> 
> 赞同：1
> 
> 时间：2012-07-03T12:16:25.807
> 
> 标签：java, file, path

我在我的 Java 项目文件中放了一个文件，我想阅读它，但我如何找到 Java 的路径名。

在这里，我把它放在 C 驱动程序中，但我只想通过写文件名来查找路径。有它的功能吗？

```
 FileInputStream fstream1 = new FileInputStream("C:/en-GB.dic"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:20:59.250

如果该文件位于为您的项目生成的 jar 文件中（或通常在您的项目使用的类路径中），则在 package 下`com.foo.bar`，您可以使用

```
SomeClassOfYourProject.class.getResourceAsStream("/com/foo/bar/en-GB.dic"); 
```

如果它不在类路径中，并且您从目录启动应用程序（使用 java.exe）`c:\baz`，并且文件位于 下`c:\baz\boom\`，您可以使用

```
new FileInputStream("boom/en-GB.dic"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:22:50.083

将它放在你的类路径中，如果它是一个 web 应用程序`WEB-INF/classes/yourfile.ext`，如果它是一个独立的应用程序，把它放在`bin`你的应用程序的目录中（默认的类目录是 bin）。

然后您可以使用以下方式之一阅读。

```
InputStream in = this.getClass().getClassLoader().getResourceAsStream("yourfile.ext"); 
```

或者

```
InputStream in = this.getClass().getResourceAsStream("/yourfile.ext"); 
```

您可以在线阅读以上两种方法之间的差异。

# java - 如何以编程方式从 Selenium Grid 2 获取测试活动日志？

> ID：11310735
> 
> 赞同：2
> 
> 时间：2012-07-03T12:16:37.060
> 
> 标签：java, grid, selenium-webdriver

我正在尝试以编程方式启动 Selenium Grid2，而且我也知道 Grid API 有一个 LoggerManager。但我不确定如何为其实现自定义记录器或在 Grid Hub 端获取 selenium 节点日志。

任何一个，

> 我需要一种方法来获取 Selenium Grid 2 节点日志作为 Selenium Hub 日志的一部分

或者

> 我需要一种方法来在 Selenium Hub 端记录所有测试活动

测试活动是指对 JsonWire 休息服务和响应的所有调用的活动日志。

如何才能做到这一点？

我正在使用以下代码运行 Selenium Grid

```
import org.openqa.grid.web.Hub;
import org.openqa.grid.internal.utils.GridHubConfiguration;

public class GridHub {

    private String host = "localhost";
    private Integer port = 4444;
    Hub gridHub = null;
    GridHubConfiguration gridHubConfig = new GridHubConfiguration();

    GridHub() {
        gridHubConfig.setHost(host);
        gridHubConfig.setPort(port);
        gridHub = new Hub(gridHubConfig);        
            gridHub.start();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:43:29.173

SeleniumDriverResourceHandler.java 包含一个可能有帮助的 getLog 命令。

因此，您可以从 HUB 向节点发送 a`http://node/selenium-server/driver?cmd=getLog`或 getLogMessages，该节点将返回当前会话的日志 (LoggingManager.perSessionLogHandler().getLog(sessionId))

此时，您可以访问集线器上的节点日志。

希望这可以帮助？

# ruby - 红宝石套接字连接到外部

> ID：11310738
> 
> 赞同：0
> 
> 时间：2012-07-03T12:16:42.937
> 
> 标签：ruby, sockets, connection

我试图与以下 ruby​​ 代码建立联系

服务器

```
require 'socket'
puts "server"
socket = TCPServer.open(1000)
client = socket.accept
puts "connected" 
```

客户

```
require 'socket'

puts "client"
server= TCPSocket.open("172.30.1.2",1000)
puts "connected" 
```

但客户端总是说目标机器拒绝它。

两面都没有“连接”打印

当我将“172.30.1.2”更改为“localhost”时，它可以工作。

我想知道为什么我无法连接到自己

“172.30.1.2”是我的 IPv4 地址

当我在 cmd 上键入 ipconfig 时，

它说“172.30.1.2”是我的IP。

我也配置了 DMZ 和端口转发。

并且所有防火墙都关闭了。

我在 windows xp 和 windows 7 上试过。

有人能帮我吗？

（我想从外面连接到我的电脑。这就是我尝试“172.30.1.2”的原因）

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T13:15:55.377

为了创建服务器使用`TCPServer.open("172.30.1.2",1000)`

# regex - perl 正则表达式匹配表达式

> ID：11310742
> 
> 赞同：0
> 
> 时间：2012-07-03T12:16:59.643
> 
> 标签：regex, perl

我正在使用以下指令解析文件中以空格分隔的行：

```
($F1,$F2) = split(/\s/,$_); 
```

并排成一行

```
TEXT1 TEXT2 TEXT3 
```

我不仅`$F2`需要。我怎样才能做到这一点 ？`TEXT2 TEXT3``TEXT2`

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T12:22:05.347

[`split`可以传递第三个参数：LIMIT（即要拆分的字段数）。](http://perldoc.perl.org/functions/split.html)

```
($F1,$F2) = split(/\s/,$_,2); 
```

# opencv - OpenCV 流使用 H264 (mp4) 编解码器捕获 CAM

> ID：11310744
> 
> 赞同：7
> 
> 时间：2012-07-03T12:17:09.470
> 
> 标签：opencv, stream, ffmpeg, live555

我喜欢流式传输由 opencv 捕获的网络摄像头图片。我考虑使用 ffmpeg 和 live555 的解决方案（不幸的是，它们的文档记录不太好）。我的问题是：

1.  如何将捕获的图像转换为 H264 格式，以便图片/秒匹配。如果它在一个循环中，我会得到超过 25 张图片/秒，并且视频速度很快。

2.  我如何通过 rtp / rtps 或类似的方式在网络上直接流式传输转换后的 H264 流。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T12:28:53.540

1.  这是一个常见的问题。
    *   如果您不需要分发您的软件（私人使用/服务器端/开源），您可以使用使用[x264 编码器](http://www.videolan.org/developers/x264.html)编译的[FFMpeg](http://ffmpeg.org/)，在 FFMpeg 的配置脚本中有一个配置标志。
    *   如果您确实需要分发您的软件，我不知道任何 LGPL 许可库，我相信没有这样的库。您必须使用一些付费解决方案。
2.  您应该实现 DeviceSource.cpp，参见 DeviceSource.hh 并将其用作 FramedSource。

**编辑**：Apple 公开了视频编码器 API，允许在 iOS8 中访问 h264 帧流

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:11:34.023

有关如何使用 x264 和 Live555 编码和流式传输帧的示例，请参见以下内容：

1.  [spyPanda](https://code.launchpad.net/~alex-stevens/+junk/spyPanda)开源项目。
2.  [如何编写 Live555 FramedSource 以允许我流式传输 H.264 实时](https://stackoverflow.com/questions/13863673/how-to-write-a-live555-framedsource-to-allow-me-to-stream-h-264-live/14121172#14121172)SO 问题。

# python - 如何将一组 csv 文件转换为另一组 csv 文件（具有不同的文件名和格式）？

> ID：11310750
> 
> 赞同：1
> 
> 时间：2012-07-03T12:17:34.423
> 
> 标签：python, string, bash, shell, text

我有一些文件，由以下格式的日终库存数据组成：

文件名：NYSE_20120116.txt

```
<ticker>,<date>,<open>,<high>,<low>,<close>,<vol>
A,20120116,36.15,36.36,35.59,36.19,3327400
AA,20120116,10.73,10.78,10.53,10.64,20457600 
```

如何为每个符号创建文件？以A公司为例

文件名：A.txt

```
<ticker>,<date>,<open>,<high>,<low>,<close>,<vol>
A,20120116,36.15,36.36,35.59,36.19,3327400
A,20120117,39.76,40.39,39.7,39.99,4157900 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:27:55.703

您想在记录级别拆分第一个文件，然后根据第一个字段的值将每一行路由到不同的文件？

```
 # To skip first line, see later
 cat endday.txt | while read line; do
     # Careful with backslashes here - they're not quote signs
     # If supported, use:
     # symbol=$( echo "$line" | cut -f1 -d, )
     symbol=`echo "$line" | cut -f1 -d,`

     # If file is not there, create it with a header
     # if [ ! -r $symbol.txt ]; then
     #    head -n 1 endday.txt > $symbol.txt
     # fi
     echo "$line" >> $symbol.txt
 done 
```

效率不高：Perl 或 Python 会更好。

如果您在一个目录中有多个文件（请注意，您必须自己删除它们，否则它们将被一次又一次地处理......），您可以这样做：

```
 for file in *.txt; do
    echo "Now processing $file..."
    # A quick and dirty way of ignoring line number 1 --- start at line 2.
    tail -n +2 $file | while read line; do
       # Careful with backslashes here - they're not quote signs
       # If supported, use:
       # symbol=$( echo "$line" | cut -f1 -d, )
       symbol=`echo "$line" | cut -f1 -d,`

       # If file is not there, create it with a header
       # if [ ! -r $symbol.txt ]; then
       #    head -n 1 $file > $symbol.csv
       # fi
       # Output file is named .CSV so as not to create new .txt files
       # which this script might find
       echo "$line" >> $symbol.csv
    done
    # Change the name from .txt to .txt.ok, so it won't be found again
    mv $file $file.ok
    # or better move it elsewhere to avoid clogging this directory
    # mv $file /var/data/files/already-processed
 done 
```

# c# - 使用 JQuery Modal Dialoglog 触发服务器端控件

> ID：11310751
> 
> 赞同：0
> 
> 时间：2012-07-03T12:17:37.670
> 
> 标签：c#, jquery-ui, webforms, servercontrols

好的，所以我有一个 jquery 模式对话框。它接受一个输入，然后有一个确定和取消按钮。只需关闭对话框，取消就可以正常工作。当我真的希望它触发 OnClick 方法时，确定按钮触发 OnClientClick，这样我就可以进入服务器控件并使用 ASP.NET 将输入记录到数据库中。关于如何使用 jquery 完成此操作的任何想法？

旁注：我目前不在有代码的计算机旁，但我会尽快更新它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:31:55.227

你可以试试这个：

在表单上插入一个 ASP.NET 按钮，绑定到要触发的事件，然后使用 jQuery 执行 $('#your_button_ID').click(); 在对话框的“确定”事件上。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:19:17.767

在您的代码隐藏中创建一个静态函数并添加 [WebMethod] 属性，因此现在您可以从 Jquery 触发代码隐藏方法。

```
javascript:__doPostBack('IDOfYourControlButton','') 
```

这与按钮或链接按钮在 .NET 中用于触发 onClick 事件的方法相同

在你后面的代码中演示 webmethod 添加这个

```
[System.Web.Services.WebMethod]
public static string SayHi()
{
    return "Hi";
} 
```

在你的 aspx 文件中添加这个 javascript

```
<script>
        function GetHi() {

            PageMethods.SayHi(onComplete);
        }

        function onComplete(result) {
            alert(result);
        }

        GetHi();
</script> 
```

并且不要忘记在 yr site.master 或 aspx 页面中添加它

```
 <form runat="server">
    <asp:ScriptManager ID="scriptManager" EnablePageMethods="true" runat="server"/>
</form> 
```

# knockout.js - getParent Object from Array / Knockout / mapping.Plugin

> ID：11310754
> 
> 赞同：0
> 
> 时间：2012-07-03T12:17:55.510
> 
> 标签：knockout.js, knockout-mapping-plugin

看看小提琴： http: [//jsfiddle.net/kirtapatrik/LwBvc/](http://jsfiddle.net/kirtapatrik/LwBvc/)
如果孩子是数组，为什么我没有得到父对象？

感谢支持帕特里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:15:12.443

您没有得到“父”对象，因为您正在渲染一个可观察的数组项。可观察数组项的父项是可观察数组本身。

这正如文档所述：http: [//knockoutjs.com/documentation/plugins-mapping.html](http://knockoutjs.com/documentation/plugins-mapping.html)

> parent：这个孩子所属的父对象或数组

# android - 在警报中添加动态数量的复选框

> ID：11310756
> 
> 赞同：0
> 
> 时间：2012-07-03T12:18:11.127
> 
> 标签：android, android-alertdialog

我有一个要求，例如学生姓名将从数据库中获取并将其显示在警报框中。应该为该警报中的每个学生姓名显示一个复选框，以便用户可以从警报框中选择学生姓名。我已经完成了学生姓名。任何人都可以给出一个想法来显示每个学生的复选框

```
public void Show_friends()
{
         AlertDialog.Builder builder1 = new AlertDialog.Builder(this);
     try
     {
        builder1.setItems(paymentby,new DialogInterface.OnClickListener() 
        {
         public void onClick(DialogInterface dialog, int item) 
         {

         }
         }
        );
        AlertDialog alert = builder1.create();
        alert.show();

     }
     catch (Exception e) {
        System.out.println("Gesture exception caught");
    }
     System.out.println("================vij=========================inside if");

}
} 
```

这是我的代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:33:56.450

您将需要自定义对话框来执行此任务。看到[这个](http://www.mkyong.com/android/android-custom-dialog-example/)知道你怎么做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T04:50:26.810

```
 AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle("Select the Friends");

    builder.setMultiChoiceItems( paymentby,null, new OnMultiChoiceClickListener()
    {
        public void onClick (DialogInterface dialog, int which, boolean isChecked)
        {

        }
        } 
    ) ;

    builder.setPositiveButton("OK", new DialogInterface.OnClickListener()
    {   
        public void onClick(DialogInterface dialog, int id)
        {         

            }
        }
    );

    AlertDialog alert = builder.create();
    alert.show(); 
```

谢谢...

# java - 在postgresql中使用文本类型列转义双引号并通过jackson解析json

> ID：11310763
> 
> 赞同：3
> 
> 时间：2012-07-03T12:18:44.870
> 
> 标签：java, json, postgresql, jackson

我在 postgresql 中定义了下表：

```
 Column      |          Type          | Modifiers 
-----------------+------------------------+-----------
 id              | uuid                   | not null
 entity_snapshot | text                   | 
Indexes:
    "pk_id" PRIMARY KEY, btree (id) 
```

我想存储以下 JSON 字符串：

```
[ "org.test.MyUniqueId", {:   "uuid" : "f4b40050-9716-4346-bf84-8325fadd9876": } ] 
```

对于某些测试，我没有使用 Jackson 执行此操作，而是尝试手动键入 SQL，这是我的问题 - 我似乎无法正确处理。
我目前的尝试是：

```
insert into my_table(id,entity_snapshot) values ('d11d944e-6e78-11e1-aae1-52540015fc3f','[ \"org.test.MyUniqueId\", {:   \"uuid\" : \"f4b40050-9716-4346-bf84-8325fadd9876\": } ]'); 
```

当我从表中选择时，Procuedure 一个看起来像我需要的记录，但是当我尝试使用 Jackson 解析它时，我得到一个错误 -

```
org.apache.commons.lang.SerializationException: org.codehaus.jackson.JsonParseException: Unexpected character (':' (code 58)): was expecting double-quote to start field name 
```

不用说，如果通过我的 java 代码插入相同的记录，我可以对其进行解析，当用人眼查看记录时，它对我来说看起来是一样的。
你能告诉我我的 SQL 插入语句哪里错了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T12:42:41.330

您可以使用美元引用的字符串常量。详细信息在这里[Postgres 文档](http://www.postgresql.org/docs/8.2/static/sql-syntax-lexical.html)

在您的情况下，查询应如下所示

```
insert into my_table(id,entity_snapshot) values ('d11d944e-6e78-11e1-aae1-52540015fc3f',$$[ "org.test.MyUniqueId", {:   "uuid" : "f4b40050-9716-4346-bf84-8325fadd9876": } ]$$); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T14:35:47.383

单引号内的双引号不需要任何转义。

```
insert into my_table (id,entity_snapshot)
values 
(
   'd11d944e-6e78-11e1-aae1-52540015fc3f',
   '["org.test.MyUniqueId", {: "uuid" : "f4b40050-9716-4346-bf84-8325fadd9876": }]'
); 
```

会工作得很好：

```
postgres=> create table my_table (id uuid, entity_snapshot text);
创建表
时间：34,936 毫秒
postgres=> 插入 my_table (id,entity_snapshot)
postgres-> 值
postgres-> (
postgres(> 'd11d944e-6e78-11e1-aae1-52540015fc3f',
postgres（>'[“org.test.MyUniqueId”，{：“uuid”：“f4b40050-9716-4346-bf84-8325fadd9876”：}]'
postgres(>);
插入 0 1
时间：18,255 毫秒
postgres=>

```

# android - android应用程序中的VideoView全屏

> ID：11310764
> 
> 赞同：29
> 
> 时间：2012-07-03T12:18:47.073
> 
> 标签：android

我的应用程序中有一个视频视图。代码是这样的。

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/opsbuds"
    android:orientation="vertical">

    <TextView
        android:id="@+id/adtxt1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView"></TextView>

    <VideoView
        android:id="@+id/videoView11"
        android:layout_width="300dip"
        android:layout_height="250dip"
        android:layout_marginLeft="30dip"></VideoView>

    <LinearLayout
        android:id="@+id/llv11"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"></LinearLayout>

    <Button
        android:id="@+id/button1211"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="5dp"
        android:layout_marginTop="10dp"
        android:background="@drawable/button"
        android:text=" Continue "
        android:textColor="#800080"
        android:textSize="20dp"
        android:textStyle="bold"></Button>
</LinearLayout>
</ScrollView> 
```

xml 文件中提到了视频视图宽度和高度。我想要的是，一旦我按下一个按钮，videoview 应该全屏显示，一旦我按下返回按钮，videoview 应该回到它提到的大小。请帮忙？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-30T13:08:18.563

我必须让我的 VideoView 位于 RelativeLayout 中才能使选择的答案起作用。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <VideoView android:id="@+id/videoViewRelative"
         android:layout_alignParentTop="true"
         android:layout_alignParentBottom="true"
         android:layout_alignParentLeft="true"
         android:layout_alignParentRight="true"
         android:layout_width="fill_parent"
         android:layout_height="fill_parent">
    </VideoView>

</RelativeLayout> 
```

如此处给出：[Android - 如何拉伸视频以填充 VideoView 区域](https://binhvova.wordpress.com/2013/04/23/android-how-to-stretch-video-to-fill-videoview-area/ "Android - 如何拉伸视频以填充 VideoView 区域")在屏幕尺寸之间切换就像更改所选答案中给出的布局参数一样简单。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-07-03T12:27:42.153

这样设置全屏，

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics);
android.widget.LinearLayout.LayoutParams params = (android.widget.LinearLayout.LayoutParams) videoView.getLayoutParams();
params.width = metrics.widthPixels;
params.height = metrics.heightPixels;
params.leftMargin = 0;
videoView.setLayoutParams(params); 
```

并以这种方式恢复原始大小。

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics);
android.widget.LinearLayout.LayoutParams params = (android.widget.LinearLayout.LayoutParams) videoView.getLayoutParams();
params.width = (int)(300*metrics.density);
params.height = (int)(250*metrics.density);
params.leftMargin = 30;
videoView.setLayoutParams(params); 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2016-06-14T06:22:11.043

我已经这样做了：

检查这些参考屏幕截图。

[![在此处输入图像描述](../Images/395f28ef673041553637833a61db1c69.png)](https://i.stack.imgur.com/5F0MC.png)

添加类**FullScreenVideoView.java**：

```
import android.content.Context;
import android.util.AttributeSet;
import android.widget.VideoView;

public class FullScreenVideoView extends VideoView {
    public FullScreenVideoView(Context context) {
        super(context);
    }

    public FullScreenVideoView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public FullScreenVideoView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec){
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        setMeasuredDimension(widthMeasureSpec, heightMeasureSpec);
    }
} 
```

如何与**xml****绑定**：

 **```
<FrameLayout
   android:id="@+id/secondMedia"
   android:layout_width="match_parent"
   android:layout_height="match_parent">

     <com.my.package.customview.FullScreenVideoView
           android:layout_width="match_parent"
           android:layout_height="match_parent" 
           android:id="@+id/fullScreenVideoView"/>

</FrameLayout> 
```

希望这会帮助你。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2014-10-21T08:07:42.697

**第一种方法**

当您想为该活动全屏打开视频时，您必须在清单中设置主题属性。设置这个值是

```
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
```

**[在此处以编程方式更改主题](https://stackoverflow.com/questions/11562051/change-activitys-theme-programmatically)**

**第二种方法**

创建另一个 fullscreen.xml 如下所示并`setContentView(R.layout.fullscreen)`单击按钮

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <VideoView android:id="@+id/myvideoview"
        android:layout_width="fill_parent"
        android:layout_alignParentRight="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_alignParentBottom="true"
        android:layout_height="fill_parent">
    </VideoView>

</RelativeLayout> 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-07-03T12:26:12.473

在按钮上单击开始`native video player`，它将在以下位置打开`full screen`：

```
Intent intent = new Intent(Intent.ACTION_VIEW );
intent.setDataAndType(Uri.parse(path), "video/*");
startActivity(intent); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-09-08T06:59:26.940

下面的代码有效。

```
 getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

在调用 videoView.start() 之前添加此代码。在大多数情况下，视频活动以全屏模式运行。但是，如果标题栏仍然显示，则将清单中的主题更改为此。

```
 android:theme="@style/Theme.AppCompat.NoActionBar"> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-09-18T11:47:02.777

您可以通过创建两个单独的活动来实现它。假设第一个活动是 halfScreen 活动。在此活动中，您的视频视图尺寸较小。点击全屏视频按钮启动另一个活动“全屏活动”。在第二个活动中，视频视图应该与父布局匹配。您还可以从半屏暂停的位置开始全屏播放视频。在我的代码中，我已经实现了这一点。您也可以在半屏上恢复视频全屏活动的后按。这对我有用。希望它也对你有用。

```
Here is the code
half.xml

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#aa99cc"
    android:orientation="vertical" >

    <VideoView
        android:id="@+id/VideoViewhalf"
        android:layout_width="match_parent"
        android:layout_height="300dp" >
    </VideoView>

   <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/btnfullScreen"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="fullscreen" />

        <ProgressBar
            android:id="@+id/progressBar"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />

    </LinearLayout>

</LinearLayout>

HalfScreen activity
public class HalfScreen extends Activity {
    Button btn;
    VideoView videoView = null;
    final int REQUEST_CODE = 5000;
    final String videoToPlay = "http://bffmedia.com/bigbunny.mp4";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.half);
        videoView = (VideoView) findViewById(R.id.VideoViewhalf);
        final ProgressBar progressBar = (ProgressBar) findViewById(R.id.progressBar);
        btn = (Button) findViewById(R.id.btnfullScreen);

        Uri video = Uri.parse(videoToPlay);
        videoView.setVideoURI(video);
        videoView.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
            public void onPrepared(MediaPlayer mp) {
                progressBar.setVisibility(View.GONE);
                videoView.requestFocus();
                videoView.start();
            }
        });

        btn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent videointent = new Intent(HalfScreen.this,
                        FullScreen.class);
                videointent.putExtra("currenttime",
                        videoView.getCurrentPosition());
                videointent.putExtra("Url", videoToPlay);
                startActivityForResult(videointent, REQUEST_CODE);

            }
        });
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (resultCode == RESULT_OK && requestCode == REQUEST_CODE) {
            if (data.hasExtra("currenttime")) {
                int result = data.getExtras().getInt("currenttime", 0);
                if (result > 0) {
                    if (null != videoView) {
                        videoView.start();
                        videoView.seekTo(result);
                        ProgressBar progressBar = (ProgressBar) findViewById(R.id.progressBar);
                        progressBar.setVisibility(View.VISIBLE);

                    }
                }
            }
        }
    }
}

full.xml

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#ff99cc"
    android:orientation="vertical" >

    <VideoView
        android:id="@+id/VideoViewfull"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </VideoView>

</LinearLayout>

FullScreen Activity

public class FullScreen extends Activity {
    Button btn;
    VideoView videoView = null;
    int currenttime = 0;
    String Url = "";
    private static ProgressDialog progressDialog;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        Bundle extras = getIntent().getExtras();
        if (null != extras) {
            currenttime = extras.getInt("currenttime", 0);
            Url = extras.getString("Url");
        }
        setContentView(R.layout.full);
        progressDialog = ProgressDialog.show(this, "", "Loading...", true);
        videoView = (VideoView) findViewById(R.id.VideoViewfull);
        MediaController mediaController = new MediaController(this);
        mediaController.setAnchorView(videoView);
        Uri video = Uri.parse(Url);
        videoView.setMediaController(mediaController);
        videoView.setVideoURI(video);

        videoView.setOnPreparedListener(new OnPreparedListener() {

            public void onPrepared(MediaPlayer arg0) {
                progressDialog.dismiss();
                videoView.start();
                videoView.seekTo(currenttime);
            }
        });
    }

    @Override
    public void finish() {
        Intent data = new Intent();
        data.putExtra("currenttime", videoView.getCurrentPosition());
        setResult(RESULT_OK, data);
        super.finish();
    }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-01-16T22:06:03.493

我通过切换到横向并将布局参数设置为`MATCH_PARENT`. 就在切换到全屏模式之前，我们需要将当前的方向模式和`VideoView`参数存储在相应`defaultScreenOrientationMode`的`defaultVideoViewParams`变量中。这样我们就可以在退出视频全屏模式时使用它们。因此，当您想以全屏模式打开视频时，请使用`makeVideoFullScreen()`方法，退出 - `exitVideoFullScreen()`。

*请注意，我用于`RelativeLayout`my `VideoView`，在您的情况下，它可以是另一种布局类型。*

```
private RelativeLayout.LayoutParams defaultVideoViewParams;
private int defaultScreenOrientationMode;

// play video in fullscreen mode
private void makeVideoFullScreen() {

    defaultScreenOrientationMode = getResources().getConfiguration().orientation;
    defaultVideoViewParams = (LayoutParams) videoView.getLayoutParams();

    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

    videoView.postDelayed(new Runnable() {

        @Override
        public void run() {
            RelativeLayout.LayoutParams params = (RelativeLayout.LayoutParams) new RelativeLayout.LayoutParams(
                    RelativeLayout.LayoutParams.MATCH_PARENT,
                    RelativeLayout.LayoutParams.MATCH_PARENT);

            videoView.setLayoutParams(params);
            videoView.layout(10, 10, 10, 10);
        }
    }, 700);
}

// close fullscreen mode
private void exitVideoFullScreen() {
    setRequestedOrientation(defaultScreenOrientationMode);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED);

    videoView.postDelayed(new Runnable() {

        @Override
        public void run() {
            videoView.setLayoutParams(defaultVideoViewParams);
            videoView.layout(10, 10, 10, 10);
        }
    }, 700);
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-08-23T09:11:11.287

无论您是想保持视频的纵横比还是拉伸它以填充其父区域，使用正确的布局管理器都可以完成工作。

保持纵横比：

```
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="horizontal"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">

<VideoView
  android:id="@+id/videoView"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:layout_gravity="center"/>

</LinearLayout> 
```

**！！！要填写该字段：**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <VideoView android:id="@+id/videoViewRelative"
         android:layout_alignParentTop="true"
         android:layout_alignParentBottom="true"
         android:layout_alignParentLeft="true"
         android:layout_alignParentRight="true"
         android:layout_width="fill_parent"
         android:layout_height="fill_parent">
    </VideoView>

</RelativeLayout> 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-07-12T09:16:13.897

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics);
android.widget.LinearLayout.LayoutParams params = (android.widget.LinearLayout.LayoutParams) mVideoView.getLayoutParams();
params.width = (int) metrics.widthPixels;
params.height = (int) metrics.heightPixels;
mVideoView.setLayoutParams(params);

playVideo();
aspectRatio = VideoInfo.AR_4_3_FIT_PARENT;
mVideoView.getPlayer().aspectRatio(aspectRatio); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-03-12T02:30:07.293

在这里尝试下面的代码。

```
if (!isFullScreen())
        {
            Log.v("Full screen", "-----------is full screen------------");  
            setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE); 
            DisplayMetrics displaymetrics = new DisplayMetrics();
              getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
              int height = displaymetrics.heightPixels;
              int width = displaymetrics.widthPixels;
              android.widget.FrameLayout.LayoutParams params = (android.widget.FrameLayout.LayoutParams) videoSurface.getLayoutParams();
              params.width = width;
              params.height=height;
              params.setMargins(0, 0, 0, 0);

        }
        else{
            Log.v("Full screen", "-----------small screen------------");    

            DisplayMetrics displaymetrics = new DisplayMetrics();
              getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
              int height = displaymetrics.heightPixels;
              int width = displaymetrics.widthPixels;
              android.widget.FrameLayout.LayoutParams params = (android.widget.FrameLayout.LayoutParams) videoSurface.getLayoutParams();
              params.width = width;
              params.height=height / 3;
              params.setMargins(0, 0, 0, 0);
        } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-06-05T05:32:15.127

**此代码适用于全屏横向视频**

AndroidManifext.xml（设置方向）

```
 <activity
        android:name=".Video1"
        android:screenOrientation="landscape" /> 
```

Video1.java 代码：

```
import android.net.Uri;
import android.os.Bundle;
import android.support.v7.app.AppCompatActivity;
import android.view.WindowManager;
import android.widget.MediaController;
import android.widget.VideoView;

public class Video1 extends AppCompatActivity {

private VideoView videoView;
private MediaController mediaController;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_video1);

    videoView = findViewById(R.id.videoView);
    String fullScreen =  getIntent().getStringExtra("fullScreenInd");
    if("y".equals(fullScreen)){
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        getSupportActionBar().hide();
    }

    Uri videoUri = Uri.parse("android.resource://"+getPackageName()+"/"+R.raw.YOUR_VIDEO_NAME);

    videoView.setVideoURI(videoUri);

    mediaController = new FullScreenMediaController(this);
    mediaController.setAnchorView(videoView);

    videoView.setMediaController(mediaController);
    videoView.start();
    }
} 
```

FullScreenMediaControler.java 代码：

```
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.view.Gravity;
import android.view.View;
import android.widget.FrameLayout;
import android.widget.ImageButton;
import android.widget.MediaController;

public class FullScreenMediaController extends MediaController {

private ImageButton fullScreen;
private String isFullScreen;

public FullScreenMediaController(Context context) {
    super(context);
}

@Override
public void setAnchorView(View view) {

    super.setAnchorView(view);

    //image button for full screen to be added to media controller
    fullScreen = new ImageButton (super.getContext());

    FrameLayout.LayoutParams params = new FrameLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    params.gravity = Gravity.RIGHT;
    params.rightMargin = 80;
    addView(fullScreen, params);

    //fullscreen indicator from intent
    isFullScreen =  ((Activity)getContext()).getIntent().
            getStringExtra("fullScreenInd");

    if("y".equals(isFullScreen)){
        fullScreen.setImageResource(R.drawable.ic_fullscreen_exit);
    }else{
        fullScreen.setImageResource(R.drawable.ic_fullscreen);
    }

    //add listener to image button to handle full screen and exit full screen events
    fullScreen.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {

            Intent intent = new Intent(getContext(),Video1.class);

            if("y".equals(isFullScreen)){
                intent.putExtra("fullScreenInd", "");
            }else{
                intent.putExtra("fullScreenInd", "y");
            }
            ((Activity)getContext()).startActivity(intent);
        }
    });
  }
} 
```**

# python - 基于其他数组中的索引对numpy数组的值求和

> ID：11310766
> 
> 赞同：3
> 
> 时间：2012-07-03T12:18:53.393
> 
> 标签：python, numpy

假设我有以下数组：

```
N = 8
M = 4

a = np.zeros(M)
b = np.random.randint(M, size=N) # contains indices for a
c = np.random.rand(N) # contains random values 
```

我想`c`根据 中提供的索引对 的值求和`b`，并将它们存储在 中`a`。为此编写一个循环很简单：

```
for i, v in enumerate(b):
    a[v] += c[i] 
```

由于`N`在我的实际问题中可能会变得相当大，我想避免使用 python 循环，但我不知道如何将它写成一个 numpy 语句。谁能帮我吗？

好的，这里有一些示例值：

```
In [27]: b
Out[27]: array([0, 1, 2, 0, 2, 3, 1, 1])

In [28]: c
Out[28]: 
array([ 0.15517108,  0.84717734,  0.86019899,  0.62413489,  0.24357903,
        0.86015187,  0.85813481,  0.7071174 ])

In [30]: a
Out[30]: array([ 0.77930596,  2.41242955,  1.10377802,  0.86015187]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:33:36.967

```
import numpy as np

N = 8
M = 4
b = np.array([0, 1, 2, 0, 2, 3, 1, 1])
c = np.array([ 0.15517108,  0.84717734,  0.86019899,  0.62413489,  0.24357903, 0.86015187,  0.85813481,  0.7071174 ])

a = ((np.mgrid[:M,:N] == b)[0] * c).sum(axis=1) 
```

返回

```
array([ 0.77930597,  2.41242955,  1.10377802,  0.86015187]) 
```

# sql - 尝试同步时，Sql Azure 同步数据集不支持表的自定义数据类型，有什么解决方法吗？

> ID：11310769
> 
> 赞同：0
> 
> 时间：2012-07-03T12:19:05.460
> 
> 标签：sql, azure, ssis, dataset, sync

本地数据库有表，这些表的列类型是 UDT，因此在云上使用这些 UDT 创建了相同的 UDT 和表。

但是当尝试同步它们时，它的显示错误不支持 UDT，那么我是否遗漏了一些东西，或者是否有任何解决方法可以与 UDT 同步？

在这里，如果 SQL Azure 允许创建 UDT 并且还允许使用这些数据类型创建表，那么为什么不允许同步呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T18:28:31.613

仅供参考，“SQL Azure”现在称为“SQL 数据库”，因此如果您找到对 Windows Azure“SQL 数据库”的引用，您也可以考虑将其应用于您的要求。

SQL 数据库不支持用户定义的数据类型、扩展属性、Windows 身份验证或 USE 语句。

但是，**2010 年 11 月对 SQL Server 2008 R2 的更新包括对 SQL 数据库的支持**。生成脚本向导现在允许您为数据库版本 SQL 数据库编写脚本，以便生成的脚本直接兼容以在 SQL 数据库上执行。这样生成的脚本与 SQL 数据库兼容，无需进一步修改即可在 SQL 数据库上编译。因此，您的 UDDT 或自定义数据类型可以通过此迁移脚本转移到 SQL 数据库。

如果您的数据库是 SQL Server 2008 之前的版本，则可以使用本文中的“使用 SQL Server 2008 R2 之前的架构迁移”[部分](http://social.technet.microsoft.com/wiki/contents/articles/994.develop-and-deploy-with-windows-azure-sql-database.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:14:09.673

不幸的是，目前没有解决方法。数据同步服务主要基于 Sync Framework，它也不支持 UDT。不过，数据同步服务在最新版本中支持空间数据类型。

# php - 如何在 smarty 引擎中重用代码？

> ID：11310777
> 
> 赞同：1
> 
> 时间：2012-07-03T12:19:31.147
> 
> 标签：php, function, smarty

在smarty中，遇到这样的html代码。**

```
{section name=listAll loop=$scope} 
 (input id="a1" name="from" / >
 (input id="b1" name="from" / >
 (input id="c1" name="from" / >
{/section}

{section name=listAll loop=$scope} 
 (input id="a2" name="from" / >
 (input id="b2" name="from" / >
 (input id="c2" name="from" / >
{/section}

{section name=listAll loop=$scope} 
 (input id="a3" name="from" / >
 (input id="b3" name="from" / >
 (input id="c3" name="from" / >
{/section} 
```

我可以将其转移到如下函数：

```
 function RenderControl($i)
        {
        return '
        {section name=listAll loop=$scope} 
         (input id="a$i" name="from" / >
         (input id="b$i" name="from" / >
         (input id="c$i" name="from" / >
        {/section}
        } '; 
```

然后在 tpl 文件中调用它，例如：

```
 {RenderControl i=1}
    {RenderControl i=2}
    {RenderControl i=3} 
```

为什么以下内容不适用于 smarty tpl？$smarty->register_function('RenderHtml','RenderHtml'); 函数 RenderHtml($params){ 提取($params); // $html= ' {include file="tke-pre_bid_scopeworkModules/Section1_Factory_to_Price_Optional_Configurat‌​ion.tpl"} ' ; 返回 $html; }

{RenderHtml 数=12}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:28:10.340

您可能正在寻找[{function}](http://www.smarty.net/docs/en/language.function.function.tpl)，它可以让您从模板中定义简单的可重用文本生成器：

```
{function name=controls i=0}
  (input id="a{$i}" name="from" / >
  (input id="b{$i}" name="from" / >
  (input id="c{$i}" name="from" / >
{/function}

{controls i=1}
{controls i=2}
{controls i=3} 
```

根据您输入的结构，您甚至可能喜欢类似的东西

```
{function name=controls i=0}
  {$fields = ["a", "b", "c"]}
  {foreach $fields as $field}
    (input id="{$field}{$i}" name="from" / >
  {/foreach}
{/function} 
```

这是 Smarty3 的功能。Smarty2 没有模板功能。您可以将上述 {function} 的内容提取到一个单独的文件`{include file="controls.tpl" i=1}`中。或者，正如@Brett 所说，为它编写一个插件函数。

* * *

您问题的第二部分是关于以下代码

```
$smarty->register_function('RenderHtml','RenderHtml');

function RenderHtml($params){ 
  extract($params); 
  $html= '{include file="tke-pre_bid_scopeworkModules/Section1_Factory_to_Price_Optional_Configurat‌​ion.tpl"}'; 
  return $html;
} 
```

这不会像您期望的那样包含文件。无论这些插件函数返回什么，都会直接写入模板输出。没有什么能阻止你做一些事情

```
function RenderHtml($params, &$smarty){ 
  // create new smarty instance
  $t = new Smarty();
  // copy all values to new instance
  $t->assign($smarty->get_template_vars());
  // overwrite whatever was given in params
  $t->assign($params);
  // execute the template, returning the generated html
  return $t->fetch('tke-pre_bid_scopeworkModules/Section1_Factory_to_Price_Optional_Configurat‌​ion.tpl');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T12:21:41.643

您可能需要[http://www.smarty.net/docs/en/advanced.features.prefilters.tpl](http://www.smarty.net/docs/en/advanced.features.prefilters.tpl)以确保在处理之前对代码进行评估，因此您可以按照您的示例进行操作。

您还可以查看[http://www.smarty.net/docs/en/plugins.tpl](http://www.smarty.net/docs/en/plugins.tpl)

（以上为Smarty 3）

# xamarin.ios - 当我尝试从服务器获取一些数据时，Monotouch 发布构建崩溃。

> ID：11310780
> 
> 赞同：0
> 
> 时间：2012-07-03T12:19:39.237
> 
> 标签：xamarin.ios

在调试（设备上的开发模式）上它工作得很好，但是当我发布 ipa 时，它恰好在我尝试从服务器获取数据时崩溃。我指定该应用程序在发布模式下工作，但正是当我尝试获取数据时它崩溃了。

```
Date/Time:       2012-07-03 15:02:07.045 +0300
OS Version:      iPhone OS 5.1.1 (9B206)
Report Version:  104`enter code here`

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x37f4c32c __pthread_kill + 8
1   libsystem_c.dylib               0x33ddf208 pthread_kill + 48
2   libsystem_c.dylib               0x33dd8298 abort + 88
3   PrintStand                      0x01277ec6 0x1000 + 19361478
4   PrintStand                      0x012909a2 0x1000 + 19462562
5   libsystem_c.dylib               0x33de97e6 _sigtramp + 42
6   libsystem_c.dylib               0x33ddf208 pthread_kill + 48
7   libsystem_c.dylib               0x33dd8298 abort + 88
8   PrintStand                      0x01318eda 0x1000 + 20020954
9   PrintStand                      0x01318f16 0x1000 + 20021014
10  PrintStand                      0x0126dc3a 0x1000 + 19319866
11  PrintStand                      0x0126df04 0x1000 + 19320580
12  PrintStand                      0x012e176a 0x1000 + 19793770
13  PrintStand                      0x012e24f4 0x1000 + 19797236
14  PrintStand                      0x012e25b6 0x1000 + 19797430
15  PrintStand                      0x01279da6 0x1000 + 19369382
16  PrintStand                      0x01279f52 0x1000 + 19369810
17  PrintStand                      0x01278c24 0x1000 + 19364900
18  PrintStand                      0x011fd320 0x1000 + 18858784
19  PrintStand                      0x00d282d4 0x1000 + 13791956
20  PrintStand                      0x00d4da9c 0x1000 + 13945500
21  PrintStand                      0x00d31844 0x1000 + 13830212
22  PrintStand                      0x00d2816c 0x1000 + 13791596
23  PrintStand                      0x00d26fd4 0x1000 + 13787092
24  PrintStand                      0x00d25cac 0x1000 + 13782188
25  PrintStand                      0x00d25aac 0x1000 + 13781676
26  PrintStand                      0x00d2768c 0x1000 + 13788812
27  PrintStand                      0x00d2a370 0x1000 + 13800304
28  PrintStand                      0x00d28804 0x1000 + 13793284
29  PrintStand                      0x00d267c4 0x1000 + 13785028
30  PrintStand                      0x00d25c7c 0x1000 + 13782140
31  PrintStand                      0x00d25b68 0x1000 + 13781864
32  PrintStand                      0x00d284e8 0x1000 + 13792488
33  PrintStand                      0x00d4da9c 0x1000 + 13945500
34  PrintStand                      0x00d31844 0x1000 + 13830212
35  PrintStand                      0x00d2816c 0x1000 + 13791596
36  PrintStand                      0x00d26fd4 0x1000 + 13787092
37  PrintStand                      0x00d25cac 0x1000 + 13782188
38  PrintStand                      0x00d25aac 0x1000 + 13781676
39  PrintStand                      0x00d2768c 0x1000 + 13788812
40  PrintStand                      0x00d2a370 0x1000 + 13800304
41  PrintStand                      0x00d28804 0x1000 + 13793284
42  PrintStand                      0x00d267c4 0x1000 + 13785028
43  PrintStand                      0x00d25c7c 0x1000 + 13782140
44  PrintStand                      0x00d25b68 0x1000 + 13781864
45  PrintStand                      0x00d25654 0x1000 + 13780564
46  PrintStand                      0x00cfc25c 0x1000 + 13611612
47  PrintStand                      0x00cfc1d8 0x1000 + 13611480
48  PrintStand                      0x00cf9960 0x1000 + 13601120
49  PrintStand                      0x00cf981c 0x1000 + 13600796
50  PrintStand                      0x00cf9748 0x1000 + 13600584
51  PrintStand                      0x0103caec 0x1000 + 17021676
52  PrintStand                      0x0103e4ac 0x1000 + 17028268
53  PrintStand                      0x00bcd81c 0x1000 + 12371996
54  PrintStand                      0x011b7578 0x1000 + 18572664
55  PrintStand                      0x01265cd4 0x1000 + 19287252
56  PrintStand                      0x012e0f58 0x1000 + 19791704
57  PrintStand                      0x0132e170 0x1000 + 20107632
58  UIKit                           0x31861ef4 -[UITableView(UITableViewInternal) _createPreparedCellForGlobalRow:withIndexPath:] + 540
59  UIKit                           0x31860fd2 -[UITableView(_UITableViewPrivate) _updateVisibleCellsNow:] + 1070
60  UIKit                           0x3186075c -[UITableView layoutSubviews] + 200
61  UIKit                           0x31804f30 -[UIView(CALayerDelegate) layoutSublayersOfLayer:] + 176
62  CoreFoundation                  0x315331f4 -[NSObject performSelector:withObject:] + 36
63  QuartzCore                      0x35449a9e -[CALayer layoutSublayers] + 210
64  QuartzCore                      0x354496b6 CA::Layer::layout_if_needed(CA::Transaction*) + 210
65  QuartzCore                      0x3544d83c CA::Context::commit_transaction(CA::Transaction*) + 220
66  QuartzCore                      0x3544d578 CA::Transaction::commit() + 308
67  QuartzCore                      0x354454b2 CA::Transaction::observer_callback(__CFRunLoopObserver*, unsigned long, void*) + 50
68  CoreFoundation                  0x315a8b14 __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 12
69  CoreFoundation                  0x315a6d50 __CFRunLoopDoObservers + 252
70  CoreFoundation                  0x315a70aa __CFRunLoopRun + 754
71  CoreFoundation                  0x3152a49e CFRunLoopRunSpecific + 294
72  CoreFoundation                  0x3152a366 CFRunLoopRunInMode + 98
73  GraphicsServices                0x32a03432 GSEventRunModal + 130
74  UIKit                           0x3182fcce UIApplicationMain + 1074
75  PrintStand                      0x01002220 0x1000 + 16781856
76  PrintStand                      0x00bc37d8 0x1000 + 12330968
77  PrintStand                      0x011b7578 0x1000 + 18572664
78  PrintStand                      0x01265cd4 0x1000 + 19287252
79  PrintStand                      0x012e0f58 0x1000 + 19791704
80  PrintStand                      0x012e3c38 0x1000 + 19803192
81  PrintStand                      0x012e7588 0x1000 + 19817864
82  PrintStand                      0x0126a728 0x1000 + 19306280
83  PrintStand                      0x012628d6 0x1000 + 19273942
84  PrintStand                      0x00bb3854 0x1000 + 12265556 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:10:07.043

```
Incident Identifier: 3480F59E-A1C3-43EE-AACA-B6BA7804CCF8
CrashReporter Key:   a62caa0c7da6b2d1ddedda18b8354a223eb8d0b9
Hardware Model:      iPad2,1
Process:         PrintStand [8017]
Path:            /var/mobile/Applications/C51C71E3-8F48-4954-9D08-D79AE147069B/MediawirePrintStandMobilePresentation.app/PrintStand
Identifier:      PrintStand
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-07-03 16:07:15.743 +0300
OS Version:      iPhone OS 5.1.1 (9B206)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGABRT)
Exception Codes: KERN_INVALID_ADDRESS at 0x00000000
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x37f4c32c __pthread_kill + 8
1   libsystem_c.dylib               0x33ddf208 pthread_kill + 48
2   libsystem_c.dylib               0x33dd8298 abort + 88
3   PrintStand                      0x01276ec6 0x1000 + 19357382
4   PrintStand                      0x0128f9a2 0x1000 + 19458466
5   libsystem_c.dylib               0x33de97e6 _sigtramp + 42
6   libsystem_c.dylib               0x33ddf208 pthread_kill + 48
7   libsystem_c.dylib               0x33dd8298 abort + 88
8   PrintStand                      0x01317eda 0x1000 + 20016858
9   PrintStand                      0x01317efc 0x1000 + 20016892
10  PrintStand                      0x012627ea 0x1000 + 19273706
11  PrintStand                      0x01276a54 0x1000 + 19356244
12  PrintStand                      0x01276b22 0x1000 + 19356450
13  PrintStand                      0x0128e6c6 0x1000 + 19453638
14  ???                             0x02a71000 0 + 44503040
15  PrintStand                      0x00ca9be0 0x1000 + 13274080
16  PrintStand                      0x0110b798 0x1000 + 17868696
17  PrintStand                      0x01264cd4 0x1000 + 19283156
18  PrintStand                      0x012dff58 0x1000 + 19787608
19  PrintStand                      0x0132d170 0x1000 + 20103536
20  CoreFoundation                  0x3152e3f6 -[NSObject performSelector:withObject:withObject:] + 46
21  UIKit                           0x3181ce00 -[UIApplication sendAction:to:from:forEvent:] + 56
22  UIKit                           0x3181cdbc -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 24
23  UIKit                           0x3181cd9a -[UIControl sendAction:to:forEvent:] + 38
24  UIKit                           0x3181cb0a -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 486
25  UIKit                           0x3181d442 -[UIControl touchesEnded:withEvent:] + 470
26  UIKit                           0x3180fb80 _UIGestureRecognizerUpdate + 5216
27  CoreFoundation                  0x315a8b14 __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 12
28  CoreFoundation                  0x315a6d50 __CFRunLoopDoObservers + 252
29  CoreFoundation                  0x315a70aa __CFRunLoopRun + 754
30  CoreFoundation                  0x3152a49e CFRunLoopRunSpecific + 294
31  CoreFoundation                  0x3152a366 CFRunLoopRunInMode + 98
32  GraphicsServices                0x32a03432 GSEventRunModal + 130
33  UIKit                           0x3182fcce UIApplicationMain + 1074
34  PrintStand                      0x00cd473c 0x1000 + 13449020
35  PrintStand                      0x00bc2c08 0x1000 + 12327944
36  PrintStand                      0x0110b798 0x1000 + 17868696
37  PrintStand                      0x01264cd4 0x1000 + 19283156
38  PrintStand                      0x012dff58 0x1000 + 19787608
39  PrintStand                      0x012e2c38 0x1000 + 19799096
40  PrintStand                      0x012e6588 0x1000 + 19813768
41  PrintStand                      0x01269728 0x1000 + 19302184
42  PrintStand                      0x012618d6 0x1000 + 19269846
43  PrintStand                      0x00bb2c84 0x1000 + 12262532

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x37f3c3a8 kevent + 24
1   libdispatch.dylib               0x3477af04 _dispatch_mgr_invoke + 708
2   libdispatch.dylib               0x3477ac22 _dispatch_mgr_thread + 30

Thread 2:
0   libsystem_kernel.dylib          0x37f4ccd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x33d9af36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x33d9acc8 start_wqthread + 0

Thread 3 name:  WebThread
Thread 3:
0   libsystem_kernel.dylib          0x37f3c004 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x37f3c1fa mach_msg + 50
2   CoreFoundation                  0x315a83ec __CFRunLoopServiceMachPort + 120
3   CoreFoundation                  0x315a7124 __CFRunLoopRun + 876
4   CoreFoundation                  0x3152a49e CFRunLoopRunSpecific + 294
5   CoreFoundation                  0x3152a366 CFRunLoopRunInMode + 98
6   WebCore                         0x31d4ac9c _ZL12RunWebThreadPv + 396
7   libsystem_c.dylib               0x33da072e _pthread_start + 314
8   libsystem_c.dylib               0x33da05e8 thread_start + 0

Thread 4:
0   libsystem_kernel.dylib          0x37f4c628 __semwait_signal + 24
1   libsystem_c.dylib               0x33da4b1a nanosleep + 138
2   PrintStand                      0x0130cf60 0x1000 + 19971936
3   PrintStand                      0x012f38ba 0x1000 + 19867834
4   PrintStand                      0x012f9cee 0x1000 + 19893486
5   PrintStand                      0x0130da2a 0x1000 + 19974698
6   PrintStand                      0x01326a64 0x1000 + 20077156
7   libsystem_c.dylib               0x33da072e _pthread_start + 314
8   libsystem_c.dylib               0x33da05e8 thread_start + 0

Thread 5:
0   libsystem_kernel.dylib          0x37f3c06c semaphore_timedwait_trap + 8
1   PrintStand                      0x01312ff6 0x1000 + 19996662
2   PrintStand                      0x012f5724 0x1000 + 19875620
3   PrintStand                      0x012f9cee 0x1000 + 19893486
4   PrintStand                      0x0130da2a 0x1000 + 19974698
5   PrintStand                      0x01326a64 0x1000 + 20077156
6   libsystem_c.dylib               0x33da072e _pthread_start + 314
7   libsystem_c.dylib               0x33da05e8 thread_start + 0

Thread 6:
0   libsystem_kernel.dylib          0x37f3c3a8 kevent + 24
1   PrintStand                      0x012f438a 0x1000 + 19870602
2   PrintStand                      0x012f9cee 0x1000 + 19893486
3   PrintStand                      0x0130da2a 0x1000 + 19974698
4   PrintStand                      0x01326a64 0x1000 + 20077156
5   libsystem_c.dylib               0x33da072e _pthread_start + 314
6   libsystem_c.dylib               0x33da05e8 thread_start + 0

Thread 7:
0   libsystem_kernel.dylib          0x37f3c06c semaphore_timedwait_trap + 8
1   PrintStand                      0x01312ff6 0x1000 + 19996662
2   PrintStand                      0x012f5724 0x1000 + 19875620
3   PrintStand                      0x012f9cee 0x1000 + 19893486
4   PrintStand                      0x0130da2a 0x1000 + 19974698
5   PrintStand                      0x01326a64 0x1000 + 20077156
6   libsystem_c.dylib               0x33da072e _pthread_start + 314
7   libsystem_c.dylib               0x33da05e8 thread_start + 0

Thread 8:
0   libsystem_kernel.dylib          0x37f4ccd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x33d9af36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x33d9acc8 start_wqthread + 0

Thread 9:
0   libsystem_kernel.dylib          0x37f3c054 semaphore_wait_trap + 8
1   PrintStand                      0x01313054 0x1000 + 19996756
2   PrintStand                      0x012ada72 0x1000 + 19581554
3   PrintStand                      0x012f9cee 0x1000 + 19893486
4   PrintStand                      0x0130da2a 0x1000 + 19974698
5   PrintStand                      0x01326a64 0x1000 + 20077156
6   libsystem_c.dylib               0x33da072e _pthread_start + 314
7   libsystem_c.dylib               0x33da05e8 thread_start + 0

Thread 0 crashed with ARM Thread State:
    r0: 0x00000000    r1: 0x00000000      r2: 0x00000001      r3: 0x00000000
    r4: 0x00000006    r5: 0x3ed7ed98      r6: 0x01412612      r7: 0x2fdfd334
    r8: 0x00000000    r9: 0x00000000     r10: 0x01412630     r11: 0x02af74a4
    ip: 0x00000148    sp: 0x2fdfd328      lr: 0x33ddf20f      pc: 0x37f4c32c
  cpsr: 0x00000010

    enter code here 
```

# visual-studio-2010 - linq to sql：linq 查询问题

> ID：11310788
> 
> 赞同：1
> 
> 时间：2012-07-03T12:19:53.057
> 
> 标签：visual-studio-2010, linq, sql-server-2008, linq-to-sql

我有两张桌子

```
EmpInf
    EmpId,
    EmpName,
    Salary,
    DepartNumber.

Dept
    DeptNo,
    Deptname, 
```

我也有一个`listview1`和`dropdownlist1`哪个是必然的`EmpInf.EmpName`

在传递特定查询时

```
FilterControl.DataClasses1DataContext obj = new DataClasses1DataContext();
protected void DropDownList1_SelectedIndexChanged1(object sender, EventArgs e)
{
    var a = from r in obj.EmpInfs join s in obj.Dept1s on r.DeptNumber equals s.DeptNo where r.EmpName == "'" + DropDownList1.SelectedValue + "'" select s;

    ListView1.DataSource = a;
    ListView1.DataBind();   
} 
```

每当我从下拉列表中选择特定名称时，它都会返回**No data were returned。**我遗漏了哪些特定代码或是否有任何其他错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:41:02.263

放置一个断点`SelectedIndexChanged1`并查看 的值`SelectedValue`以确保`DropDownList1.SelectedValue`具有 Employee 名称。你也可以试试`DropDownList1.SelectedText`。

```
string selected = DropDownList1.SelectedValue.ToString();

// e = employee | d = department
var query =
            from   e in obj.EmpInfs
            join   d in obj.Dept1s on e.DeptNumber equals d.DeptNo
            where  e.EmpName == "'" + DropDownList1.SelectedValue + "'"
            select d; 
```

更改此行：

```
where  e.EmpName == "'" + DropDownList1.SelectedValue + "'" 
```

对此：

```
where  e.EmpName == selected 
```

好的，我在这里的最后一次尝试......在数据绑定之前执行此操作：

```
ListView1.DataSource = query.ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:53:01.453

这里的问题很可能是您在 Where 子句中的搜索条件上添加了单引号：

```
var a = from r in obj.EmpInfs 
        join s in obj.Dept1s on r.DeptNumber equals s.DeptNo 
        where r.EmpName == "'" + DropDownList1.SelectedValue + "'" 
        select s; 
```

假设 DropDownList1.SelectedValue 是“Smith”，那么您生成的 sql 将类似于：

```
SELECT *
FROM <tables>
WHERE EmpName = ''Smith'' 
```

注意双单引号。要仔细检查这一点，请在生成查询后放置一个断点，然后对其调用 .ToString() 以获取等效的 TSQL。要解决此问题，请从 LINQ 查询中删除“'”，因为它将自动为字符串参数添加：

```
var a = from r in obj.EmpInfs 
        join s in obj.Dept1s on r.DeptNumber equals s.DeptNo 
        where r.EmpName == DropDownList1.SelectedValue 
        select s; 
```

# facebook - 当我尝试使用 libcurl 上传图片时收到“消息”：“（#324）需要上传文件”

> ID：11310790
> 
> 赞同：1
> 
> 时间：2012-07-03T12:20:04.773
> 
> 标签：facebook, libcurl, image-uploading

我想将本地图片文件上传到 facebook。我使用 c++，所以我不能使用 facebook 提供的任何 SDK。我正在使用 libcurl。我可以将纯文本发布到提要，但无法上传图片。下面的一些代码：

```
char url[1024];
char data[1024];
strcpy(url,"https://graph.facebook.com/userid/photos");
sprintf(data,"access_token=%s&source=@%s&message=testPhotos",m_strAccessToken,picPath);

CURL *curl;
curl = curl_easy_init();
if(curl)
{
   curl_easy_setopt(curl, CURLOPT_POST, 1 );
   curl_easy_setopt(curl, CURLOPT_URL, url);
   curl_easy_setopt(curl, CURLOPT_POSTFIELDS, data);
   curl_easy_setopt(curl, CURLOPT_SSL_VERIFYPEER, 0);
   curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, ::ProcessResult);
} 
```

picPath 是 bmp 文件位于磁盘上的位置，例如“c:\file.bmp”

我总是得到这样的结果

```
 "error": {
"message": "(#324) Requires upload file", 
"type": "OAuthException", 
"code": 324 
```

}

如何正确执行此操作？

# asp.net - 在静态变量中缓存结果

> ID：11310794
> 
> 赞同：0
> 
> 时间：2012-07-03T12:20:16.497
> 
> 标签：asp.net, entity-framework, caching, entity-framework-4, static

我正在使用 Linq 查询从使用实体框架的 SQL 服务器中检索实体。当我更新实体时，EF 正在缓存结果。我怀疑这是因为 ObjectContext 在静态变量中（如下）。使用下面的代码刷新数据的唯一方法是调用一个方法并设置为何`_db`时`null`显示可能显示过时的数据（例如：在 GridView 中）。有没有办法阻止它缓存，或者添加某种结束请求处理程序来在我的数据层上调用此方法，而不是需要检测何时可能显示陈旧数据？

```
private static ServiceEntities _db;
protected static ServiceEntitiesDb
    {
        get
        {
            if (_db == null)
            {
                _db = new ServiceEntities();
                _db.Contacts.MergeOption = MergeOption.OverwriteChanges; // failed
            }
            return _db;
        }
    }

    public static IEnumerable<Contact> GetContactsByName(string name) {
        var items = Db.Contacts;
        var filteredName = items.Where(i => (i.Name??string.Empty).IndexOf(name) >=0);
        return filteredName;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:20:06.840

稍微冗长的解决方案（我想避免）是将其包装在 using 块中。IE：

```
public static IEnumerable<Contact> GetContactsByName(string name) {
        var items = Db.Contacts;
        var filteredName = items.Where(i => (i.Name??string.Empty).IndexOf(name) >=0);
        return filteredName;
} 
```

变成

```
public static IEnumerable<Contact> GetContactsByName(string name) {
    using (var db = new SomeContext()) {
        var items = db.Contacts;
        var filteredName = items.Where(i => (i.Name??string.Empty).IndexOf(name) >=0);
        return filteredName;
    }
} 
```

# ios - 使用 coredata 导入初始数据的方法

> ID：11310795
> 
> 赞同：2
> 
> 时间：2012-07-03T12:20:23.853
> 
> 标签：ios, core-data, iphonecoredatarecipes

我在 ios 应用程序中导入数据时遇到问题。

数据与 coredata 一起存储。我试图用一个按钮导入数据。点击后，将先存储在json格式的txt文件中的数据存储到sqllite文件中。

我的问题是，导入这么多数据非常慢，用户点击按钮或等待导入初始数据不友好。有没有更好的方法来导入数据？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:48:21.373

这取决于。例如，您可以只`– applicationDidFinishLaunching:`在用户触摸特定按钮时或当用户触摸特定按钮时导入数据。

在这两种情况下，我都会在后台导入数据。这使您可以避免 UI 冻结（如果您有大量数据）并显示一种进度指示器。也许用户会更高兴知道发生了什么。

要在后台导入数据，您可以使用新的 iOS 5 API for Core Data 或按照 Marcus Zarra 的[importing-and-displaying-large-data-sets-in-core-data/](http://www.cimgf.com/2011/08/22/importing-and-displaying-large-data-sets-in-core-data/)教程进行操作。

另一种方法是从预先填充的数据库开始。创建一个虚拟项目，在其中填充该数据库（使用您的 JSON 文件），然后在您的实际应用程序项目中使用该数据库。

希望有帮助。

**编辑**

> 在应用程序启动时导入数据对用户不友好。

为什么不？

> 所以我试图将数据 - db文件放入存档并将其发送到应用商店。这样，我想知道是否可以在测试期间获得db文件，即导入数据完成，初始数据可以接受。并将此测试数据库文件放入存档并发布到应用商店。所以用户不需要首先导入数据。只需使用测试数据的副本

我不确定我是否明白这里的意思。这里我的意思是[预加载和导入现有数据](http://www.raywenderlich.com/980/core-data-tutorial-how-to-preloadimport-existing-data)。当您将 db 文件提交到应用商店时，您需要将其与您的应用一起提供。例如在应用程序目录中。您也可以在捆绑包中发货。但在这种情况下要注意，因为 db 文件是只读的（如果你想修改，你需要移动到其他地方）。

我建议您创建一个虚拟项目，因为当我需要创建一个 prepolutade 数据库时，这是我个人的做法。这使您可以保持更清洁的项目。但是您也可以在实际项目中填充该数据库。如果您按照第一种方式，您可以简单地将 sql 文件移动到您的应用程序的应用程序目录中，然后让核心数据读取它。

# c - 在 C 中使用按位运算和指针算术将二进制转换为无符号整数

> ID：11310796
> 
> 赞同：0
> 
> 时间：2012-07-03T12:20:29.967
> 
> 标签：c, binary, bit-manipulation

我只能使用按位运算和指针运算来解决这个问题。我正在从二进制转换为无符号整数。

我正在编写的功能是：

```
unsigned int atob(const char* nptr); 
```

atob("101") 应该返回 5，atob("11000") 应该返回 24，atob("11$") 应该返回 3，atop("") 应该返回 0。

我对按位运算很陌生，所以我真的需要一些专门在该领域的帮助。

编辑：

**nptr 只能递增，不允许使用其他 inc/dec。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:27:11.123

```
unsigned bits2val(char *bits)
{
    unsigned val;

    for (val = 0; *bits; bits++) {
        if (*bits == '1') 
            val = (val << 1) | 1;
        else if (*bits == '0' ) 
            val <<= 1;
        else 
            break;
    }

    return val;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T12:36:02.987

这是我的示例实现，仅使用 shift 和 ors（假设您可以`++`用于字符串操作）：

```
unsigned atob(const char *input)
{
    unsigned result = 0;
    unsigned currentBit = 0;

    // we need to go right to left;
    const char *end = input;
    // make sure we only read '0's and '1's
    while ((*end == '0') || (*end == '1'))
    {
        end++;
    }

    while (--end >= input) {
        // check for overflow
        if ((currentBit >> 3) > sizeof(result))
            break;

        char isCurrentBitSet = *end == '1';
        unsigned setValue = (isCurrentBitSet << currentBit);
        result |= setValue;

        currentBit++;
    }

    return result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T12:23:07.390

从基础开始[http://www.wikihow.com/Convert-from-Decimal-to-Binary](http://www.wikihow.com/Convert-from-Decimal-to-Binary)

# javascript - jQuery 条件队列事件

> ID：11310798
> 
> 赞同：1
> 
> 时间：2012-07-03T12:20:34.797
> 
> 标签：javascript, jquery, events, queue, synchronize

我拥有的是 2 个函数（“编辑”和“保存”），它们是分别绑定到单击和模糊表格单元格事件的事件处理程序。基本上“编辑”用具有相同内容的输入替换单元格的内容，并保存相反，两者都使用一些ajax调用来更新数据库。

这很好用。问题是现在我想“链接” 2 个单元格，所以当我更改第一个单元格的值时，第二个单元格会根据第一个单元格的值进行更新。

这几乎可以工作，除了在一种情况下：假设我编辑单元格#1，对值进行一些更改，然后单击第二个。发生的事情是在单元格#1 上触发了模糊事件，调用了“保存”函数，这使第一个单元格恢复到具有新值的正常状态，并更改了单元格#2 的值。

但是在单元格#2 上也触发了单击事件，因为我只是单击了它，因此在“保存”完成并对单元格#2 进行更改之前，调用了“编辑”并开始处理。

我想要的是单元格#2 上的“编辑”在开始之前等待保存完成，因此它将具有正确的值。

我读了一些关于在 JS 等中同步事件的东西......但到目前为止我还没有成功地将它应用于我的问题。

谁能帮我 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:32:52.240

对于每个“编辑”操作，您可能应该应用一个前提条件，该前提条件要求之前的“保存”操作（如果有的话）是完整的。

例如：

```
$('...').click(function() {

    // precondition
    if(saveInProgress) return false;

    // .. you code to switch to edit mode ...

});

$('...').blur(function() {

    // precondition
    if(saveInProgress) return false;

    // AJAX call for saving
    doSave();

});

var saveInProgress = false;
function doSave() {

    saveInProgress = true;
    $.ajax(...,
        success: function() {
            // ... your code ...
            saveInProgress = false;
        },
        error: function() {
            // ... your code ...
            saveInProgress = false;
        }
    );
} 
```

# php - Codeigniter 忽略来自多个段的中间段

> ID：11310801
> 
> 赞同：0
> 
> 时间：2012-07-03T12:20:48.193
> 
> 标签：php, codeigniter, url, uri

我尝试了很多方法来解决这个问题，但没有一个有效。

假设我有一堂课：

```
class MyTestClass{
    function testPrint($a = '', $b = '', $c = '') 
    {
        echo '1: ' . $a . ', 2: ' . $b . ', 3: ' . $c;        
    }
} 
```

如果我使用这个 url 访问这个函数， `http://localhost/ci/index.php/myTestClass/testPrint/a/b/c`你会看到`1: a, 2: b, 3: c`输出，这很好。

但是如果我将 $b 分配给一个空字符串，则 url 将更改为`http://localhost/ci/index.php/myTestClass/testPrint/a//c`

输出将更改为`1: a, 2: c, 3:`似乎 CI 忽略了缺少的参数。

**问题是如何防止CI忽略uri中间的缺失参数？**

我现在的预期输出是 url`1: a, 2: , 3: c`

顺便说一句，我试图用来`$this->uri->segment(n)`保护参数位置，但它不起作用。

我尝试通过添加以下内容来更新 routes.php：

`$route['myTestClass/(:any)/(:any)/(:any)/(:any)'] = "myTestClass/$1/$2/$3/$4";`但这并没有改变任何东西。

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:36:39.360

我不确定在您的情况下这是否可行，但我会使用一个短的虚拟字符串（在本例中为 xyz），以防止必须处理`/ /`然后将其过滤掉。

`http://localhost/ci/index.php/myTestClass/testPrint/a/xyz/c`

```
if ($b == 'xyz')
{ 
   $b = ''
} 
```

如果可能，请尝试发布变量而不是使用 URI 段。这会让事情变得容易得多。希望这可以帮助。

更新：

既然不能 POST，那么[启用查询字符串](http://codeigniter.com/user_guide/general/urls.html)怎么样？

# android - ansroid.os.SystemProperties 在哪里存储它的键/值？

> ID：11310809
> 
> 赞同：8
> 
> 时间：2012-07-03T12:21:06.690
> 
> 标签：android

众所周知，我们可以使用`android.os.SystemProperties.set(String, String)`and`android.os.SystemProperties.get(String, String)`来设置和获取值，我的问题是这些`<key value>`对存储在哪里？Sqlite 数据库还是纯文本文件？如果是这样，我们可以在哪个目录找到它们？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-16T03:26:37.253

对于`persist.xxx`属性，它以属性名称作为文件名存储在 /data/property 下。对于其他非持久属性，它存储在共享内存中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T12:52:39.710

因为 Android 基于 Linux，所以无法从文件或数据库或类似的东西中读取这些设置，*因为它不存在。*

在启动设备时，内核会将环境变量列表存储到内存中。

每个由应用程序或您启动的进程都从其父进程克隆变量，并且可以定义自己的变量。

在 Linux 中，您可以访问存储在其中的虚拟文件，`/proc/'pid'/environ`但 1\. 不建议这样做，并且 2\. 在 android 文件系统中似乎没有这样的文件。

如果我的假设有误，请告诉我:)

# php - 从 Atom 获取条目的链接

> ID：11310819
> 
> 赞同：0
> 
> 时间：2012-07-03T12:22:02.173
> 
> 标签：php, xml, xpath, twitter

我有这个[推特提](http://api.twitter.com/1/statuses/user_timeline.atom?screen_name=shiplu)要。我正在尝试解析原始推文的链接。它是第一个`entry`。`feed`我想获取第一个元素的 url`http://twitter.com/shiplu/statuses/220057421899505664`内部`href`属性。`link`

我用过这个 xpath`/feed/entry[0]/link[@rel = "alternate" and @type = "text/html"]`

但它返回空字符串。

代码看起来像这样，

```
$link = $xml->xpath('/feed/entry[0]/link[@rel = "alternate" and @type = "text/html"]'); 
```

我想我快到了。谁能纠正我在这里做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:23:10.030

***编辑***- 根据下面的 Vaman 评论修复了答案

XPath 节点编号从 1 开始，此外，该提要使用具有命名空间的 Atom 格式 - 您应该执行以下操作：

```
/atom:feed/atom:entry[1]/atom:link[@rel = "alternate" and @type = "text/html"] 
```

其中`atom`前缀与`http://www.w3.org/2005/Atom`使用相关联：

```
$xml->registerXPathNamespace('atom', 'http://www.w3.org/2005/Atom'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T16:21:35.313

您指出的提要包含名称空间。Xpath 表达式也应该考虑命名空间。下面是一个功能齐全的表达式，虽然很长，但与所需的 href 匹配。

`((/*[namespace-uri()='http://www.w3.org/2005/Atom' and contains(name(),'feed')]/*[namespace-uri()='http://www.w3.org/2005/Atom' and contains(name(),'entry')])[1]/*[namespace-uri()='http://www.w3.org/2005/Atom' and contains(name(),'link') and @rel='alternate' and @type='text/html'] )[1]/@href`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T13:26:09.767

这个应该适合你：`/feed/entry[1]/link[@rel = "alternate"]`

# javascript - CSS3 Pie 在 MAMP 上随机失败

> ID：11310838
> 
> 赞同：0
> 
> 时间：2012-07-03T12:23:06.330
> 
> 标签：javascript, internet-explorer, css, mamp, css3pie

我对此感到非常困惑，我正在使用的一些本地文件夹 - 今天早上工作正常，现在突然无法渲染 CSS3 pie (.htc)。我正在通过 MAMP 上的一台计算机运行虚拟本地服务器，并通过 LAN 上的另一台计算机进行访问，而在此之前我从未遇到过 PIE 问题。

奇怪的是，我将我的 MAMP 本地 IP 切换到另一个文件夹的 IP，有时经过几次之后，PIE 会重新开始工作。但是，一旦我使用了被诅咒的文件夹，PIE 就会再次失败，并且很难将其恢复。工作中是否存在不良缓存或其他问题？

任何建议/步骤都会很棒！

# php - 我的错误是什么，因为我无法解决

> ID：11310841
> 
> 赞同：-1
> 
> 时间：2012-07-03T12:23:17.627
> 
> 标签：php, mysql, foreach, while-loop

只是一些代码，我想我可能对此有点愚蠢

基本上我希望它查看 uniqreference 相同的所有记录。获取每一个的问题并运行 foreach 语句，每次都替换 matterID

```
$compliance = mysql_query("SELECT matterid from Links where portalreference='".$uniqreference ."'");

while ($row = mysql_fetch_assoc($compliance)) {
    $matterID = $row['matterid'];

    foreach($row as $matterID2) {
       matterfield = $matterID;
       (mysql query here)
    } 
```

我哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:24:44.367

缺少`$`：

```
 matterfield = $matterID;
--^ 
```

# php - 根据条件加载php页面

> ID：11310843
> 
> 赞同：0
> 
> 时间：2012-07-03T12:23:29.293
> 
> 标签：php, conditional

我有一个 index.php 文件，其中包含 2 个文件

```
require("stats.php");
require("stats_encry.php"); 
```

1.  stats.php 有一些变量声明。
2.  stats_encry.php 有另一组变量声明。

现在，如果用户只是通过搜索或直接访问 index.php（通过访问 mysite.com/root/index.php），我希望索引加载 stats_encry.php

但是，如果用户转到 index.php?auth=jHh87fBinJ0Nj1EcDPOPxeXQe 我希望加载 stats.php 而不是 stats_encry.php

这样做的目的是防止某人意外进入 index.php 页面时看到某些内容。因此，如果我给某人索引文件的特定 url，并在最后添加一个值，他应该能够看到内容（将通过 stats.php 加载）

我该怎么做 index.php ？非常感谢任何帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:25:37.150

您可以检查`$_GET`：

```
if (isset($_GET['auth'])
{
  require 'stats_encry.php';
}
else
{
  require 'stats.php';
} 
```

# titanium - 如何将参数值发送到titnanium中的url

> ID：11310850
> 
> 赞同：1
> 
> 时间：2012-07-03T12:23:50.323
> 
> 标签：titanium, titanium-mobile

如何将参数添加到titannum中的url

```
var xhr = Ti.Network.createHTTPClient(); 
```

用户名和密码

abcd 是用户名 abcd@123 是密码

```
var authstr = 'Basic ' +Titanium.Utils.base64encode('abcd'+':'+ 'abcd@123'); 
xhr.setRequestHeader('Authorization', authstr);   

xhr.open("GET","http:\\domain name .. .. ");
    alert (xhr.open);
Ti.API.info("result " + xhr); 
```

我需要用用户名和密码附加我的网址！

我需要在titannum中打印总网址！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T01:23:14.423

I generally create the url by concatenating the params into the url like this..

```
 var api_url = "http://domain/?paramname=" + param + '&paramname2=' + param2;

  xhr.open('GET', api_url);
  xhr.send(); 
```

where param and param2 are variables holding the proper data

# algorithm - 查找一组数字是否可以加起来为 X 的算法，具有约束直方图

> ID：11310855
> 
> 赞同：1
> 
> 时间：2012-07-03T12:24:28.923
> 
> 标签：algorithm, math

（动机：考虑一个问题，您必须从可用球员中选择一支运动队。每个球员都有一定的技能水平与他们的薪水期望完全成正比，并且您希望该技能/薪水水平的总和与您的总工资帽。）

我需要编写以下函数：

```
 bool possibleAssignment(int N, int M, int T, vector<int> H); 
```

输入约束为：

*   `0 < N <= 50`
*   `0 < M <= 50`
*   `0 < T <= 2500`
*   `H.size() == N + 1`
*   福拉尔`i`_`0 <= H[i] <= M`

如果可以使用以下三个约束分配 M 个整数的数组 X，则 possibleAssign 返回 true：

1.  福拉尔`i`_`0 <= X[i] <= N`
2.  Forall ,`v`的元素个数<= H[v]`X``v`
3.  X的总和是T

我可以通过什么算法或方法实现 possibleAssign？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:33:53.090

这个问题似乎可以从[子集和问题](http://en.wikipedia.org/wiki/Subset_sum_problem)中减少，或者它是更知名的变体：[背包问题](http://en.wikipedia.org/wiki/Knapsack_problem)，它是 NP-Hard，因此没有已知的多项式解决方案。

然而，T 似乎足够小，幸运的是，有一个使用 DP 的问题的[伪多项式解决方案。](http://en.wikipedia.org/wiki/Knapsack_problem#Dynamic_Programming_Algorithm)

因为这个问题已经和背包问题很相似了，**所以我会尝试减少问题以适应背包问题**，然后调用 DP 算法来找到背包问题的最佳解决方案：

我首先过滤列表，只保留值为 v 的 H[v] 元素。现在，按如下方式设置元素：

```
value(x) = 1
weight(x) = x
Bag size = T 
```

这将使您继续前进 - 为您提供可以分配工资约束 T 的最大元素数量

# nhibernate - NHibernate with IQueryOver - 使用子查询和或条件创建 where-condition

> ID：11310858
> 
> 赞同：1
> 
> 时间：2012-07-03T12:24:31.643
> 
> 标签：nhibernate, subquery, criteria, queryover, icriteria

当我做

```
Acc accountAlias = null;
var subQuery = QueryOver.Of<Temp>()
               .Where(x=>x.IsAccepted==null)
               .And(x=>x.Account.Id==accountAlias.Id);

var results = session.QueryOver<Acc>(()=>accountAlias)
              .Where(x=>x.User.Id==65)
              .WithSubquery.WhereExists(subQuery); 
```

这将创建闲置的 sql：

```
select *
from Accounts a
where a.User_Id=65
and exists (
    select t.Account_Id
    from Temporary_Accounts t
    where t.IsAccepted is null and t.Account_Id=a.Account_Id) 
```

如何添加或条件，NHibernate 将生成闲置的 sql：

```
select *
from Accounts a
where a.User_Id=65 
and (a.Amount = 100 or exists (
    select t.Account_Id
    from Temporary_Accounts t
    where t.IsAccepted is null and t.Account_Id=a.Account_Id)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:35:09.907

未经测试，但类似 ​​tihs 的东西可能会奏效

```
Acc accountAlias = null;
var subQuery = QueryOver.Of<Temp>()
               .Where(x => x.IsAccepted == null)
               .And(x => x.Account.Id == accountAlias.Id);

var results = session.QueryOver<Acc>(()=>accountAlias)
                  .Where(Restrictions.Disjunction()
                     .Add(Subqueries.WhereExists(subQuery))
                     .Add(x => x.Amount == 100))
                  .And(x => x.User.Id = 65)
                  .List(); 
```

# php - 字符串之间的逻辑运算

> ID：11310859
> 
> 赞同：2
> 
> 时间：2012-07-03T12:24:33.117
> 
> 标签：php, string

假设您有一些字符串，我应该如何转换它们以便能够在 PHP 中对它们使用逻辑操作？甚至可能吗？

例：我想要

```
"x=1"&&"x=0" 
```

返回`false`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T21:45:36.727

**介绍**

我注意到您在字符串中同时具有逻辑[运算符](http://php.net/manual/en/language.operators.logical.php) `&&`和[赋值运算符](http://php.net/manual/en/language.operators.assignment.php)`=`，并且您想要评估在字符串中具有逻辑运算符的赋值。说真的，我不知道你是怎么到这里的，但这`very wrong`只是为了教育目的标签

**分解**

```
"x=1"  &&  "x=0" = False 
  ^    ^     ^
  |    |     | 
       |     |
X == 1 |     |
       |     |
      AND    |
             |
           X == 0 
```

上面的表达式永远是`false`因为`X`不能`equal`同时`0``1`

为了能够进行这样的评估，`PHP`您需要编写自己的函数，例如`logicalString` ，您可以在其中评估表达式，例如`logicalString("x=1")`或`logicalString("x=0")`

**假设**

```
$x = 1; // Imagine value of X 
```

**示例 1 &&**

```
// Start Evaluation with &&
if (logicalString("x=1") && logicalString("x=0")) {
    echo "&& - True\n";
} else {
    echo "&& - False\n";
} 
```

**输出 1**

```
&& - False 
```

**示例 2 - ||**

```
// Start Evaluation with ||
if (logicalString("x=1") || logicalString("x=0")) {
    echo "|| - True\n";
} else {
    echo "|| - False\n";
} 
```

**输出 2**

```
|| - True 
```

使用的功能（*[不要在生产中使用，请参阅为什么](https://stackoverflow.com/questions/1557787/are-global-variables-in-php-considered-bad-practice-if-so-why)*）

```
function logicalString($str) {
    parse_str($str, $v);
    foreach ( $v as $k => $var ) {
        if (! isset($GLOBALS[$k]) || $GLOBALS[$k] != $var)
            return false;
    }
    return true;
} 
```

[在 PHP 4.3.0 - 5.5.0alpha3 上查看在线演示](http://3v4l.org/Jm1uR)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T18:12:08.507

有了给定的信息，让我解释一下发生了什么？

```
if("x=1"&&"x=0")
{
  echo "true";
}
else 
{
  echo "false";
} 
```

它会输出

```
true 
```

你试图达到的目标是无效的。字符串不是逻辑表达式，逻辑表达式由一个或多个逻辑运算符和逻辑、数字或关系操作数组成。[阅读更多](http://php.net/manual/en/language.operators.logical.php)

上面代码的作用与下面相同

```
if("string1" && "string2")
{
  echo "true";
}
else 
{
  echo "false";
} 
```

只是它不关心里面有什么。它所关心的是有两个不为空的字符串。

```
if("" && "")
{
  echo "true";
}
else 
{
  echo "false";
} 
```

以上将返回`false`。

***结论***

字符串始终是字符串而不是逻辑运算符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T17:33:07.607

我认为完成任务的最佳方法是使用自定义函数槽[eval()](http://php.net/manual/en/function.eval.php)方法，如下所示：

```
<?php
function checkValues($var1, $var2) {
    if ($var1==1 && $var2==1) {
        echo "Both values are equal to 1";
    } else {
        echo "At least one value is not equal to 1";
    }
}

$x = 1;
$y = 1;
$z = 2;
$z3 = 1;

eval("checkValues($x, $y);"); // Both values are equal to 1
eval("checkValues($x, $z);"); // At least one value is not equal to 1

/* The eval parameter is a string so you can play with it.
 * Don't forget the semicolon ";";
 */
eval("checkValues($x, $z" . 3 . ");"); // Both values are equal to 1
?> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-20T06:15:49.620

你可以使用这个：

```
//Returns True if strings are equal, false otherwise
(bool)!strcmp($str1, $str2); 
```

把它包装在一个函数中，你就设置好了。

# jquery - Dynatree 展开选定节点的父节点

> ID：11310862
> 
> 赞同：4
> 
> 时间：2012-07-03T12:24:36.517
> 
> 标签：jquery, json, each, dynatree

我的页面上运行良好的 Dynatree。我正在使用 initAjax 来获取结构。当我生成我的 json 时，我在适当的地方包含***“select”：true***以选择复选框。大多数（所有）复选框都位于从根向下三个级别的深度。

我想扩展选定节点的父节点，以便用户在页面加载时可以看到选定的复选框。

我想我需要用 getSelectedNodes 对 onPostInit 函数做一些事情，但我无法确定代码？我不确定是否应该使用 each 语句来遍历选定的节点？任何帮助将不胜感激！

- 更新 -

我想到了！！

```
onPostInit: function(isReloading, isError) {
            var tree = $('#tree').dynatree('getTree');
            var selKeys = $.map(tree.getSelectedNodes(), function(node){
                node.makeVisible();
            });
         } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-12T21:32:32.290

略短的回复：

```
onPostInit: function() {
    $.map(this.getSelectedNodes(), function(node){
        node.makeVisible();
    });
} 
```

# python - 从具有运行脚本的目录中读取文件，而不是从调用脚本的位置调用目录位置，python

> ID：11310863
> 
> 赞同：0
> 
> 时间：2012-07-03T12:24:37.577
> 
> 标签：python, readfile, working-directory

假设我有以下

```
test/
    Main.py
test/one/
    One.py
    test1.txt
test/two/
    Two.py
    test2.txt 
```

我想要做的是，运行 Main.py 并调用 One.py 和 Two.py 并想要读取文件。由于包含 One.py 的目录有一个文件 test1.txt，我想读取该文件并且包含 Two.py 的目录有一个文件 test2.txt

这可以简单地通过

```
open("one/test1.txt", "r") 
```

并在两个文件中打开("two/test2.txt", "r")

有没有其他方法可以读取文件。这是我拿的简单案例。

我正面临这个问题。为此，我创建了设置对象并手动为该目录提供所需的位置，并将此设置对象传递给所有需要位置来读取文件的类

有不同的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:37:50.303

如果我正确理解您的问题，您想知道正在运行的 python 文件的目录吗？

`__file__`您可以在 Python 程序中访问特殊变量。它返回 python 文件的路径。

要在运行脚本的目录中打开命名文件，请使用：

```
import os
f = open(os.path.join(os.path.dirname(__file__), "filename.txt")) 
```

# android - 如何使用安卓模拟器键盘的按键事件？

> ID：11310865
> 
> 赞同：1
> 
> 时间：2012-07-03T12:24:51.657
> 
> 标签：android, textview, keyevent

我制作了简单的数学应用程序（计算器）。比如加减法等。所以我拿了三个 Editview，两个用于问题，一个用于答案。当用户按下 Android 模拟器的回车键时，我使用该`longKeyPressed`事件并获得结果。为此，我使用 entet key 的 keycode 并在 longKeyPressesd 方法中应用，但没有解决方案。我的代码是

```
@Override
public boolean onKeyLongPress(int keyCode, KeyEvent event) 
{
    switch (keyCode) 
    {
    case KeyEvent.KEYCODE_ENTER:
        if(!(txtAnswer.getText().toString().equals(" ")))
        {
            checkAnswer(Integer.parseInt(txtAnswer.getText().toString()),correctOption);
        }else
        {
            genHelper.showToast("Another evenet ::->"+event.getKeyCode());          

        }
        break;

    default:
        genHelper.showToast("Default key Pressed:->>->"+event.getKeyCode());
        break;
    }
    return super.onKeyLongPress(keyCode, event);
} 
```

genHelper 是我的通用类，用于可重用性目的。

现在今天我`OnEditorActionListener`用于查找结果，但键码模拟器 kaypad

我的新代码如下

```
txtOnes.setOnEditorActionListener(new OnEditorActionListener() 
                {   
                    public boolean onEditorAction(TextView v, int actionId, KeyEvent event) 
                    {

                        if (event != null&& (event.getKeyCode() == KeyEvent.KEYCODE_ENTER)) 
                         {
                             genHelper.showToast("Key Code-->"+event.getKeyCode());
                             genHelper.showToast("System Key Code-->"+KeyEvent.KEYCODE_ENTER);
                             if(txtTens.getText().toString().equals(""))
                                {               
                                    forTens=0;
                                }
                                else
                                {
                                    forTens=Integer.parseInt(txtTens.getText().toString());
                                }                           
                                forOnes=Integer.parseInt(txtOnes.getText().toString());
                                forOnes=forOnes+forTens;
                                txtAnswer.setText(String.valueOf(forOnes));

                             return true;
                         }else
                         {
                             genHelper.showErrorLog("Else part here ones");
                         }
                        return false;
                    }
                }); 
```

# android - android数据库中不存在列

> ID：11310869
> 
> 赞同：0
> 
> 时间：2012-07-03T12:25:01.960
> 
> 标签：android, database

在我的应用程序中，我创建了一个数据库，并尝试将值插入到该表中。但我收到以下错误：

```
 android.database.sqlite.SQLiteException: table income has no column named recurrence: , while compiling: INSERT INTO income(recurrence, salary, description) VALUES(?, ?, ?); 
```

我的代码是：

数据库创建：

```
"create table income(_id integer primary key autoincrement,"+"salary text not null,description text not null,"+"recurrence text not null);"; 
```

我的插入查询：

```
public long insertTitle(String income, String desc,String recurr)
{
ContentValues initialValues = new ContentValues();
initialValues.put(KEY_INCOME, income);
initialValues.put(KEY_DESC, desc);
initialValues.put(KEY_RECURR, recurr);
//initialValues.put(KEY_PUBLISHER, publisher);
return db.insert(DATABASE_TABLE, null, initialValues);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:38:47.720

尝试从 Android 设备中清除您的数据库。也许您的应用程序没有覆盖新数据库并使用旧数据库。这可能是此错误的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:46:17.520

不确定到底哪里出错了，但我建议你去检查你的数据库，使用`adb`. 使用以下步骤。

1.  打开命令提示符
2.  导航到您的 android sdk 文件夹-> 平台工具
3.  `adb -e shell`
4.  cd 数据/数据/your.package.name/databases
5.  sqlite3 YOUR_DATABASE.db
6.  现在运行`.tables`或`.schema income`命令
    或 `select * from income;`

你会知道你的表是否已经创建。

您还可以编写虚拟插入命令来检查它是否正常工作。

```
Insert into income values(1,"salary","desc","rec"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T13:11:47.570

你错过了一个“+”号：

放这个试试：

```
"create table income(_id integer primary key autoincrement,"+"salary text not null,"+"description text not null,"+"recurrence text not null);"; 
```

并且不要忘记在运行之前清除应用程序的数据。

# android - Android中的空闲模式是什么

> ID：11310871
> 
> 赞同：8
> 
> 时间：2012-07-03T12:25:06.913
> 
> 标签：android

android中的空闲模式是什么？是当我的手机屏幕关闭时还是没有应用程序在前台或其他情况下？

实际上我有一个要求，一旦手机处于空闲模式，就需要运行一些电源管理脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-07-08T16:35:28.133

根据[开发人员文档](https://developer.android.com/training/monitoring-device-state/doze-standby.html#testing_doze)，IDLE 意味着手机处于睡眠状态。打盹模式适用于 Android 6 及更高版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T12:39:27.173

空闲模式是当您的手机处于开机状态但您未使用手机且屏幕关闭（睡眠模式）时。此外，某些手机的空闲模式也可能意味着开机模式，无论何时使用手机，它都处于空闲模式。

> 实际上我有一个要求，一旦手机处于空闲模式，就需要运行一些电源管理脚本。

我不明白你问题的那一部分，你能澄清一下吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-22T12:35:48.933

很简单，空闲状态是您不使用设备时。

> IDLE状态是当Android设备闲置不用时，首先将屏幕调暗，然后关闭屏幕，最后关闭CPU。这可以防止设备电池快速耗尽。[进一步阅读。](https://medium.com/mindorks/you-have-to-know-more-about-doze-mode-3d80f016f8ad)

如果您需要在设备处于空闲模式时在后台处理一些工作，您可以使用[WorkManager](https://medium.com/androiddevelopers/workmanager-basics-beba51e94048)，因为它提供了一些有用的[约束](https://developer.android.com/reference/androidx/work/Constraints)。

# sql-server - 计算运行总额/运行余额

> ID：11310877
> 
> 赞同：58
> 
> 时间：2012-07-03T12:25:40.167
> 
> 标签：sql-server, tsql, cumulative-sum

我有一张桌子：

```
create table Transactions(Tid int,amt int) 
```

有 5 行：

```
insert into Transactions values(1, 100)
insert into Transactions values(2, -50)
insert into Transactions values(3, 100)
insert into Transactions values(4, -100)
insert into Transactions values(5, 200) 
```

期望的输出：

```
TID  amt  balance
--- ----- -------
1    100   100
2    -50    50
3    100   150
4   -100    50
5    200   250 
```

基本上，第一次记录余额将与`amt`第二次以后的余额相同，即先前余额+当前余额`amt`。我正在寻找一种最佳方法。我可以考虑使用函数或相关子查询，但不知道该怎么做。

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2012-07-03T14:51:57.730

对于那些不使用 SQL Server 2012 或更高版本的用户，游标可能是 CLR 之外最有效的*支持*和*保证方法。*还有其他方法，例如“古怪的更新”，它可能会稍微快一点，但不能保证在未来工作，当然还有基于集合的方法，随着表变大，具有双曲线性能配置文件，以及递归 CTE 方法，通常需要直接#tempdb I/O 或导致产生大致相同影响的溢出。

* * *

## INNER JOIN - 不要这样做：

缓慢的、基于集合的方法是以下形式：

```
SELECT t1.TID, t1.amt, RunningTotal = SUM(t2.amt)
FROM dbo.Transactions AS t1
INNER JOIN dbo.Transactions AS t2
  ON t1.TID >= t2.TID
GROUP BY t1.TID, t1.amt
ORDER BY t1.TID; 
```

这是慢的原因？随着表变大，每个增量行都需要读取表中的 n-1 行。这是指数级的，并且会出现故障、超时或只是愤怒的用户。

* * *

## 相关子查询 - 也不要这样做：

由于同样痛苦的原因，子查询表单同样痛苦。

```
SELECT TID, amt, RunningTotal = amt + COALESCE(
(
  SELECT SUM(amt)
    FROM dbo.Transactions AS i
    WHERE i.TID < o.TID), 0
)
FROM dbo.Transactions AS o
ORDER BY TID; 
```

* * *

## 古怪的更新 - 这样做需要您自担风险：

“古怪的更新”方法比上述方法更有效，但是没有记录该行为，没有关于顺序的保证，并且该行为今天可能有效，但将来可能会中断。我包括这个是因为它是一种流行的方法并且它很有效，但这并不意味着我认可它。我什至回答这个问题而不是将其作为副本关闭的主要原因是因为[另一个问题有一个古怪的更新作为接受的答案](https://stackoverflow.com/questions/1153879/how-do-i-calculate-a-running-total-in-sql-without-using-a-cursor)。

```
DECLARE @t TABLE
(
  TID INT PRIMARY KEY,
  amt INT,
  RunningTotal INT
);

DECLARE @RunningTotal INT = 0;

INSERT @t(TID, amt, RunningTotal)
  SELECT TID, amt, RunningTotal = 0
  FROM dbo.Transactions
  ORDER BY TID;

UPDATE @t
  SET @RunningTotal = RunningTotal = @RunningTotal + amt
  FROM @t;

SELECT TID, amt, RunningTotal
  FROM @t
  ORDER BY TID; 
```

* * *

## 递归 CTE

第一个依赖于 TID 是连续的，没有间隙：

```
;WITH x AS
(
  SELECT TID, amt, RunningTotal = amt
    FROM dbo.Transactions
    WHERE TID = 1
  UNION ALL
  SELECT y.TID, y.amt, x.RunningTotal + y.amt
   FROM x 
   INNER JOIN dbo.Transactions AS y
   ON y.TID = x.TID + 1
)
SELECT TID, amt, RunningTotal
  FROM x
  ORDER BY TID
  OPTION (MAXRECURSION 10000); 
```

如果你不能依赖这个，那么你可以使用这个变体，它只是使用 构建一个连续的序列`ROW_NUMBER()`：

```
;WITH y AS 
(
  SELECT TID, amt, rn = ROW_NUMBER() OVER (ORDER BY TID)
    FROM dbo.Transactions
), x AS
(
    SELECT TID, rn, amt, rt = amt
      FROM y
      WHERE rn = 1
    UNION ALL
    SELECT y.TID, y.rn, y.amt, x.rt + y.amt
      FROM x INNER JOIN y
      ON y.rn = x.rn + 1
)
SELECT TID, amt, RunningTotal = rt
  FROM x
  ORDER BY x.rn
  OPTION (MAXRECURSION 10000); 
```

根据数据的大小（例如我们不知道的列），您可能会发现更好的整体性能，方法是先将相关列填充到 #temp 表中，然后针对该列而不是基表进行处理：

```
CREATE TABLE #x
(
  rn  INT PRIMARY KEY,
  TID INT,
  amt INT
);

INSERT INTO #x (rn, TID, amt)
SELECT ROW_NUMBER() OVER (ORDER BY TID),
  TID, amt
FROM dbo.Transactions;

;WITH x AS
(
  SELECT TID, rn, amt, rt = amt
    FROM #x
    WHERE rn = 1
  UNION ALL
  SELECT y.TID, y.rn, y.amt, x.rt + y.amt
    FROM x INNER JOIN #x AS y
    ON y.rn = x.rn + 1
)
SELECT TID, amt, RunningTotal = rt
  FROM x
  ORDER BY TID
  OPTION (MAXRECURSION 10000);

DROP TABLE #x; 
```

只有第一种 CTE 方法可以提供与古怪更新相媲美的性能，但它对数据的性质做出了很大的假设（没有间隙）。其他两种方法将退回，在这些情况下，您也可以使用游标（如果您不能使用 CLR 并且您还没有使用 SQL Server 2012 或更高版本）。

* * *

## 光标

每个人都被告知游标是邪恶的，应该不惜一切代价避免它们，但这实际上超过了大多数其他支持的方法的性能，并且比古怪的更新更安全。我更喜欢游标解决方案的唯一方法是 2012 和 CLR 方法（如下）：

```
CREATE TABLE #x
(
  TID INT PRIMARY KEY, 
  amt INT, 
  rt INT
);

INSERT #x(TID, amt) 
  SELECT TID, amt
  FROM dbo.Transactions
  ORDER BY TID;

DECLARE @rt INT, @tid INT, @amt INT;
SET @rt = 0;

DECLARE c CURSOR LOCAL STATIC READ_ONLY FORWARD_ONLY
  FOR SELECT TID, amt FROM #x ORDER BY TID;

OPEN c;

FETCH c INTO @tid, @amt;

WHILE @@FETCH_STATUS = 0
BEGIN
  SET @rt = @rt + @amt;
  UPDATE #x SET rt = @rt WHERE TID = @tid;
  FETCH c INTO @tid, @amt;
END

CLOSE c; DEALLOCATE c;

SELECT TID, amt, RunningTotal = rt 
  FROM #x 
  ORDER BY TID;

DROP TABLE #x; 
```

* * *

## SQL Server 2012 或更高版本

SQL Server 2012 中引入的新窗口函数使这项任务变得更加容易（并且它的性能也比上述所有方法都好）：

```
SELECT TID, amt, 
  RunningTotal = SUM(amt) OVER (ORDER BY TID ROWS UNBOUNDED PRECEDING)
FROM dbo.Transactions
ORDER BY TID; 
```

请注意，在较大的数据集上，您会发现上面的性能比以下两个选项中的任何一个都好得多，因为 RANGE 使用磁盘假脱机（并且默认使用 RANGE）。然而，同样重要的是要注意行为和结果可能不同，因此在根据这种差异在它们之间做出决定之前，请确保它们都返回正确的结果。

```
SELECT TID, amt, 
  RunningTotal = SUM(amt) OVER (ORDER BY TID)
FROM dbo.Transactions
ORDER BY TID;

SELECT TID, amt, 
  RunningTotal = SUM(amt) OVER (ORDER BY TID RANGE UNBOUNDED PRECEDING)
FROM dbo.Transactions
ORDER BY TID; 
```

* * *

## CLR

为了完整起见，我提供了一个指向 Pavel Pawlowski 的 CLR 方法的链接，这是迄今为止 SQL Server 2012 之前版本（但显然不是 2000 版本）的首选方法。

[http://www.pawlowski.cz/2010/09/sql-server-and-fastest-running-totals-using-clr/](http://www.pawlowski.cz/2010/09/sql-server-and-fastest-running-totals-using-clr/)

* * *

## 结论

如果您使用的是 SQL Server 2012 或更高版本，则选择很明显 - 使用新`SUM() OVER()`构造（使用`ROWS`vs. `RANGE`）。对于早期版本，您需要比较替代方法在架构、数据上的性能，并考虑到与性能无关的因素，确定哪种方法适合您。这很可能是CLR方法。以下是我的建议，按优先顺序排列：

1.  `SUM() OVER() ... ROWS`, 如果在 2012 年或以上
2.  CLR 方法，如果可能的话
3.  如果可能，第一个递归 CTE 方法
4.  光标
5.  其他递归 CTE 方法
6.  古怪的更新
7.  加入和/或相关子查询

* * *

有关这些方法的性能比较的更多信息，请参阅[http://dba.stackexchange.com](http://dba.stackexchange.com)上的此问题：

[https://dba.stackexchange.com/questions/19507/running-total-with-count](https://dba.stackexchange.com/questions/19507/running-total-with-count)

* * *

我还在这里发布了有关这些比较的更多详细信息：

[http://www.sqlperformance.com/2012/07/t-sql-queries/running-totals](http://www.sqlperformance.com/2012/07/t-sql-queries/running-totals)

* * *

此外，对于分组/分区运行总计，请参阅以下帖子：

[http://sqlperformance.com/2014/01/t-sql-queries/grouped-running-totals](http://sqlperformance.com/2014/01/t-sql-queries/grouped-running-totals)

[分区导致运行总计查询](https://stackoverflow.com/questions/10832067/partitioning-results-in-a-running-totals-query)

[具有分组依据的多个运行总计](https://stackoverflow.com/questions/10368308/multiple-running-totals-with-group-by)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-03T12:32:57.490

如果您使用 2012 版，这里有一个解决方案

```
select *, sum(amt) over (order by Tid) as running_total from Transactions 
```

对于早期版本

```
select *,(select sum(amt) from Transactions where Tid<=t.Tid) as running_total from Transactions as t 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-20T20:54:32.953

在 SQL Server 2008+ 中

```
SELECT  T1.* ,
        T2.RunningSum
FROM    dbo.Transactions As T1
        CROSS APPLY ( SELECT    SUM(amt) AS RunningSum
                      FROM      dbo.Transactions AS CAT1
                      WHERE     ( CAT1.TId <= T1.TId )
                    ) AS T2 
```

在 SQL 服务器 2012+

```
SELECT  * ,
        SUM(T1.amt) OVER ( ORDER BY T1.TId 
                        ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW ) AS RunningTotal
FROM    dbo.Transactions AS t1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-06T16:58:25.767

我们在 2008R2 上，我使用变量和临时表。这也允许您在使用 case 语句计算每一行时执行自定义操作（即某些交易可能会有所不同，或者您可能只需要特定交易类型的总数）

```
DECLARE @RunningBalance int = 0
SELECT Tid, Amt, 0 AS RunningBalance
INTO #TxnTable
FROM Transactions
ORDER BY Tid

UPDATE #TxnTable
SET @RunningBalance = RunningBalance = @RunningBalance + Amt

SELECT * FROM #TxnTable
DROP TABLE #TxnTable 
```

我们有一个包含 230 万行的事务表，其中一个项目包含超过 3,300 个事务，并且针对它运行这种类型的查询根本不需要时间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-18T09:13:33.793

```
select v.ID
,CONVERT(VARCHAR(10), v.EntryDate, 103) + ' '  + convert(VARCHAR(8), v.EntryDate, 14) 
as EntryDate
,case
when v.CreditAmount<0
then
    ISNULL(v.CreditAmount,0) 
    else 
    0 
End  as credit
,case
when v.CreditAmount>0
then
    v.CreditAmount
    else
    0
End  as debit
,Balance = SUM(v.CreditAmount) OVER (ORDER BY v.ID ROWS UNBOUNDED PRECEDING)
      from VendorCredit v
    order by v.EntryDate desc 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-16T01:58:16.627

使用 2012`SUM`和`OVER`函数，您现在可以嵌套`sum`和`counts`.

```
SELECT date, sum(count(DISTINCT unique_id)) OVER (ORDER BY date) AS total_per_date
FROM dbo.table
GROUP BY date 
```

# service - 通过 Windows 服务锁定屏幕

> ID：11310881
> 
> 赞同：1
> 
> 时间：2012-07-03T12:25:56.903
> 
> 标签：service, process, locking, window, desktop

我想使用窗口服务锁定屏幕。我的操作系统是 win 7，我知道服务有一些权利问题，因此我做了以下实验，但我的实验都没有奏效。

我制作了一个新的 exe 文件并在 LockWorkStation 中调用。手动它会锁定屏幕，但从服务中调用此 exe 会导致访问被拒绝。

这是我的服务中的调用者代码

```
if (CreateProcess(folder.c_str(),NULL, NULL, NULL, TRUE, 0, NULL, NULL, &info, &processInfo))
{
        ::WaitForSingleObject(processInfo.hProcess, 1000);
        DWORD exit = 100;
        GetExitCodeProcess(processInfo.hProcess, &exit);

        CloseHandle(processInfo.hProcess);
        CloseHandle(processInfo.hThread);
} 
```

为了让它运行，我使用当前的 Windows 用户 ID 和密码登录了我的服务。仍然没有工作，然后我勾选了允许服务与桌面交互。使用它可以成功并且没有显示错误，但屏幕仍然没有被锁定。（我知道使用与桌面服务的交互是不安全的，但我在想是否有人对此有任何解决方案？）

# sql-server - SQL Server 中 varchar 中的多种语言

> ID：11310883
> 
> 赞同：2
> 
> 时间：2012-07-03T12:26:05.120
> 
> 标签：sql-server, multilingual, varchar, nvarchar

我们可以存储多语言文本`varchar`吗？我曾经相信，对于这些场景，我们需要一个`nvarchar`，但是当我尝试下面的代码时，它运行良好。

```
DECLARE @name VARCHAR(100)
SET @name='Hej mit navn er Vaibhav'
SELECT @name 
```

**所以我应该采取`varchar`或`nvarchar`存储多语言文本。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:28:13.833

`nvarchar`存储[Unicode](http://en.wikipedia.org/wiki/Unicode)字符（支持更多字符），`varchar`不存储。由于`'Hej mit navn er Vaibhav'`不包含任何 Unicode 字符，它工作得很好。

> 那么我应该使用 varchar 还是 nvarchar 来存储多语言文本。

这取决于你的情况。如果您有一个大型数据库并且您永远不需要存储额外的字符集，那么它会`nvarchar`占用两倍的空间，这是有道理的。但是，对于较小的数据库，空间可能不是问题，并且您可能更愿意使用额外的空间以允许将来使用 Unicode 字符。`varchar``varchar`

由于专门询问*多语言文本*，我会说您可能会遇到`varchar`无法存储的字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T12:29:31.960

使用 Nvarchar 数据类型

```
DECLARE @name NVARCHAR(100) 
SET @name=N'Hej mit navn er Vaibhav' 
SELECT @name 
```

# php - 统计生病的用户，然后根据服务年限取走表格

> ID：11310888
> 
> 赞同：1
> 
> 时间：2012-07-03T12:26:16.643
> 
> 标签：php, cakephp

我对 PHP 非常陌生，对 CakePHP 更陌生，这是我编写代码的目的，但我认为我的问题出在我的一些标准 PHP 代码上。

好的，现在这段代码大部分都在工作，但是当我选择的用户同时使用一天以上时，它似乎给了我一个错误的结果！

好的，所以它的意思是为选定的用户获得多年的服务，它确实可以（我认为，至少没有问题）。然后根据服务年限，我根据服务年限设置病假权利，全天和半天。

一旦我完成了代码应该让选定的用户生病，然后取消他们已经获得的权利，第一次是完整的，然后当它是空的时，把它从一半拿走。但是就像我说的，当用户连续休一天以上时，它仍然只休一天吗？

这可能是我开始我的 foreach 循环并进行计数的地方，不确定这是否正确？

请帮忙？？

```
 function sickDay($id = null) {
    if($this->CURRENT_USER['User']['role_id'] > 3) { //directors and admins
    /*if(empty($this->data) || !isset($this->data['Holiday']['id'])) {

    } else {*/
        //Caculate if it's a full pay, half pay or nothing
        //$data = $this->data['Holiday'];

        //Get Holidaytypes
        $types = $this->Holiday->find(
            'all',
            array(
                'conditions' => array(
                    'Holiday.holidaystype_id' => 3,
                    'Holiday.user_id' => $id
                )
            )
        );

        //Get starting date
        $contracts = $this->Holiday->User->Contract->find(
            'all',
            array(
                'conditions' => array(
                    'Contract.user_id' => $id //$data['user_id']
                ),
                'order' => array(
                    'Contract.startson' => 'ASC'
                )
            )
        );
        //Get How Many sick days
        foreach ($types as $key => $value) {

            $typesDataEnds =  strftime ("%u-%d-%Y", $types[$key]['Holiday']['endson']);
            $typesDataStarts = strftime ("%u-%d-%Y", $types[$key]['Holiday']['startson']);

            $SickTotal = count($typesDataEnds - $typesDataStarts);  
            //echo $SickTotal;

        //Get Contract Start & End Dates
        $start = array_shift($contracts);
        $end = array_pop($contracts);

        $endDate = $end['Contract']['endson'];
        $startDate = $start['Contract']['startson'];

        if (empty($endDate)) {
                $endDate = time('now');
        }
        if (!empty($startDate)) {
            $SortEnd = strftime("%Y", $endDate);
            $SortStart = strftime("%Y", $startDate);
            $YearsService = $SortEnd - $SortStart;

            if ($YearsService <= 1) {
                    $SetFullEntitlement = 5;
                    $SetHalfEntitlement = 5;
                    //echo 'one year';
            } elseif ($YearsService <= 2) {
                    $SetFullEntitlement = 10;
                    $SetHalfEntitlement = 10;
                    //echo 'two years';
            } elseif ($YearsService <= 5) {
                    $SetFullEntitlement = 20;
                    $SetHalfEntitlement = 20;
                    //echo 'up to five years';
            } elseif ($YearsService >= 6) {
                    $SetFullEntitlement = 30;
                    $SetHalfEntitlement = 30;
                    //echo 'five years or more';
            } else {
                    $SetFullEntitlement = 0;
                    $SetHalfEntitlement = 0;
                    //echo 'no sick pay';
            }
        } else {
            $YearsService = 0;
            //echo 'Sorry No Start Date For You Found!';
        }

        while ($SickTotal > 0) {
            if ($SetFullEntitlement != 0) {
                $SetFullEntitlement--;
            } elseif ($SetHalfEntitlement != 0) {
                $SetHalfEntitlement--;
            }
            $SickTotal--;
        }

        echo 'FullPay:';
        echo $SetFullEntitlement;
        echo '<br/><br/>Halfpay:';
        echo $SetHalfEntitlement;

        }

        //debug($SickTotal);
        die();  
        //$this->render('/artists/holidayslist');
    //} //End For if empty check
 } // End for if CURRENT_USER
} //End of Function 
```

* * *

更新

我理解你所说的，是的，我现在知道 %u 用于我需要它做的事情是错误的。现在我已经按照你说的做了，但是我为选定的用户返回 0，我知道应该有两个？

```
foreach ($types as $key => $value) {

    $typesDataEnds =  strtotime($types[$key]['Holiday']['endson']);
    $typesDataStarts = strtotime($types[$key]['Holiday']['startson']);

    //$typesDataEnds =  strftime ("%Y-%m-%d", $types[$key]['Holiday']['endson']);
    //$typesDataStarts = strftime ("%Y-%m-%d", $types[$key]['Holiday']['startson']);

    $sickTotal = floor(($typesDataEnds - $typesDataStarts) / 86400);

    echo 'testing: ';
    debug($sickTotal);

    die();

 does more.....

 } //end 
```

我做错了什么吗？

非常感谢您的帮助

格伦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T04:05:25.913

我在计算病假的那一行中发现了三个问题：

1.  您在计算之前格式化日期（格式错误，请参阅[文档](http://php.net/manual/en/function.strftime.php)以了解 的含义`%u`）。您需要数值进行计算。如果日期的格式可以通过以下方式解析，这应该可以工作[`strtotime`](http://php.net/manual/en/function.strtotime.php)：

    ```
    $end = strtotime($types[$key]['Holiday']['endson']);
    $start = strrotime($types[$key]['Holiday']['startson']); 
    ```

2.  然后你尝试减去两个字符串。那是行不通的。但是如果你使用`strtotime`它确实有效，因为你正在对整数进行操作：

    ```
    $sickTotal = floor(($end - $start) / 86400);
    // 86400 seconds in a day 
    ```

3.  不要[`count`](http://php.net/count)在结果上使用。这适用于数组和对象，当您将其他任何内容传递给它时，它会返回`1`（这解释了您看到的错误结果；您正在传递一个字符串）。

我已经为计算构建了一个[工作演示](http://codepad.org/AqD7i1Ec)。

# php - 替换部分 XML 节点值

> ID：11310891
> 
> 赞同：1
> 
> 时间：2012-07-03T12:26:30.990
> 
> 标签：php, xml

我正在尝试用另一个值替换 xml 节点值的一部分。例如，我的 xml 中有这个节点：

```
<eerste_kwartier>naam leeg</eerste_kwartier> 
```

或者例如：

```
<eerste_kwartier>leeg leeg</eerste_kwartier> 
```

在第一个示例中，我想用其他东西替换“leeg”值。在第二个中，我只想用其他东西替换第一个 'leeg' 值。有什么想法我应该怎么做？

提前致谢，

扬蒂门

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:37:43.780

正确的方法是使用 PHP 的[`DOMDocument`](http://php.net/DOMDocument)类来提取您需要的内容。这是一个有效的解决方案：

```
$str = '<eerste_kwartier>naam leeg</eerste_kwartier>';

$doc = new DOMDocument();
$fragment = $doc->createDocumentFragment();
$fragment->appendXML( $str);
$doc->appendChild( $fragment);

$xpath = new DOMXPath( $doc);
$node = $xpath->query( '/eerste_kwartier')->item(0);

$text = $doc->createTextNode( $node->textContent);
$node->nodeValue = ''; // Clear out the contents of the tag

// Get the text before and after the replacement
$start = strpos( $text->wholeText, 'leeg');
$before = $text->substringData( 0, $start);
$after = $text->substringData( $start + strlen( 'leeg'), strlen( $text->wholeText));

// Put the text back, minus the replacement, with something else added
$node->appendChild( $doc->createTextNode( trim( $before)));
$node->appendChild( $doc->createTextNode( "Something Else"));
$node->appendChild( $doc->createTextNode( $after));

echo htmlentities( $doc->saveXML()); 
```

这[输出](http://viper-7.com/X8my8p)：

```
<?xml version="1.0"?> <eerste_kwartier>naam Something Else</eerste_kwartier> 
```

对于第二个测试用例，它将[输出](http://viper-7.com/C0bUVz)：

```
<?xml version="1.0"?> <eerste_kwartier>Something Else leeg</eerste_kwartier> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:40:30.897

基本上，您可以通过 PHP 使用 DOM 来实现这一点。

给定这样的字符串中的 XML 格式：

```
 $xml = <<<EOX
<root>    
  <eerste_kwartier>naam leeg</eerste_kwartier>
  <eerste_kwartier>leeg leeg</eerste_kwartier>
</root>
EOX; 
```

您可以执行以下操作：

## 1 - 使用 PHP 和 DOM

使用 DOM，您可以使用 getElementsByTagName() 方法获取具有相同标签名称的元素列表，遍历该列表并应用您喜欢的文本转换。

例子：

```
// Load source XML
$xmlObj = new DOMDocument("1.0", "UTF-8");
$xmlObj->loadXML($xml);

// Obtain interesting nodes into a node list object
$nodeList = $xmlObj->getElementsByTagName('eerste_kwartier');

// Prepare destination XML object
$xmlObjResult = new DOMDocument("1.0", "UTF-8");
$rootElement = $xmlObjResult->createElement("root");

// Walk node list
for ($i = 0; $i < $nodeList->length; $i++) {
  $tmp = $nodeList->item($i)->nodeValue;
  // Use regular expressions for greater flexibility in selecting text to replace
  $tmp = preg_replace('/naam/', 'leeg', $tmp);
  // Prepare destination element
  $eerste_kwartier = $xmlObjResult->createElement("eerste_kwartier");
  $cdata = $xmlObjResult->createCDATASection($tmp);
  $eerste_kwartier->appendChild($cdata);
  $rootElement->appendChild($eerste_kwartier);
}

// Append root element to the document
$xmlObjResult->appendChild($rootElement);

// Enjoy your XML
echo $xmlObjResult->saveXML(); 
```

## 2 - 使用 PHP 和 DOMXPath

上面的示例可以很容易地更改为使用 XPath 的 query() 而不是 DOM 的 getElementsByTagName()。

所以你会这样做：

```
// Load source XML
$xmlObj = new DOMDocument("1.0", "UTF-8");
$xmlObj->loadXML($xml);

// Obtain interesting nodes into a node list object
$xpath = new DOMXPath($xmlObj);
$nodeList = $xpath->query("//eerste_kwartier");

// Prepare destination XML object
$xmlObjResult = new DOMDocument("1.0", "UTF-8");
$rootElement = $xmlObjResult->createElement("root");

// Walk node list
for ($i = 0; $i < $nodeList->length; $i++) {
  $tmp = $nodeList->item($i)->nodeValue;
  // Use regular expressions for greater flexibility in selecting text to replace
  $tmp = preg_replace('/naam/', 'leeg', $tmp);
  // Prepare destination element
  $eerste_kwartier = $xmlObjResult->createElement("eerste_kwartier");
  $cdata = $xmlObjResult->createCDATASection($tmp);
  $eerste_kwartier->appendChild($cdata);
  $rootElement->appendChild($eerste_kwartier);
}

// Append root element to the document
$xmlObjResult->appendChild($rootElement);

// Enjoy your XML
echo $xmlObjResult->saveXML(); 
```

## 结论

您肯定已经注意到这两个选项非常相似。

如果您在文档中的搜索解析为搜索相同的标签名称，我建议您使用选项 1；如果你的搜索应该比这更清晰，我建议选择 2，因为 XPath 有很多很好的武器来对抗 XML 搜索的复杂性（可以在[这里](http://www.w3schools.com/xpath/default.asp)找到 XPath 的简要介绍，但是有很多可用的材料谷歌搜索）。

我不会将 XSL 纳入图片，除非您应该对内容应用更高比例和清晰的转换，但以防万一：[http](http://htmlite.com/XML008.php) ://htmlite.com/XML008.php （一个非常简短的 XSLT 介绍教程，应该满足你的胃口）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-03T12:31:01.673

你不能使用 str_replace 函数吗？

```
$xml = str_replace('<eerste_kwartier>leeg leeg</eerste_kwartier>','<eerste_kwartier>somethingelse leeg</eerste_kwartier>',$xml); 
```

# ios - iOS Sqlite3 SQLITE_ERROR

> ID：11310893
> 
> 赞同：0
> 
> 时间：2012-07-03T12:26:43.427
> 
> 标签：ios, sqlite

我在 iOS 应用程序中有一个函数，它从数据库中读取一些数据。功能非常简单：

```
-(void) readCategories {
    sqlite3 *database;

    if([[NSFileManager defaultManager] fileExistsAtPath:databasePath]){
        if(sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK) {
            const char *sqlStatement = "SELECT * FROM Categories ORDER BY name COLLATE NOCASE ASC";
            sqlite3_stmt *compiledStatement;
            int errorCode = sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatement, NULL);

            if(errorCode == SQLITE_OK) {
                while(sqlite3_step(compiledStatement) == SQLITE_ROW) {
                    [categories addObject:[NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 1)]];
                }
            } else {
                 NSLog(@"Error reading categories. Code: %d, message: '%s'", errorCode,sqlite3_errmsg(database));
            }
            sqlite3_finalize(compiledStatement);
            sqlite3_close(database);
        } else {
            NSLog(@"Error opening DB");
        }
    } else {
        NSLog(@"DB does not exist.");
    }
} 
```

问题是错误代码始终是 SQLITE_ERROR，根据文档，它是：“SQL 错误或缺少数据库”。给出的消息是：'没有这样的表：类别'

现在，如果我查看计算机上的数据库文件，表格显然就在那里。我也可以在它上面运行完全相同的查询并且它工作正常。

有人对出了什么问题有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T14:08:24.853

`[[NSFileManager defaultManager] fileExistsAtPath:databasePath]`如果您在添加支票之前曾经运行过此代码`sqlite3_open`，那么如果没有找到，该标准将为您创建一个空白数据库。所以，

1.  通过模拟器菜单上的“重置内容和设置...”重置您的模拟器。这将清除过去可能创建的任何无关的数据库文件。（如果您在设备上执行此操作，请删除该应用程序，然后重新安装。）

2.  `sqlite3_open`如果找不到，该命令将创建空白数据库。为了安全起见，以后请`sqlite3_open_v2`改用，它永远不会创建空白数据库：

    ```
    if (sqlite3_open_v2([databasePath UTF8String], &database, SQLITE_OPEN_READWRITE, NULL) != SQLITE_OK) {
        // handle opening error here
    } 
    ```

    通过使用`sqlite3_open_v2`，它将确保在打开过程中永远不会创建数据库。

3.  如果您仍然遇到问题，请导航到您机器上的模拟器目录，即“~/Library/Application Support/iPhone Simulator”。（您可能必须通过在终端窗口中键入以下命令来取消隐藏您的库文件夹：

    ```
    chflags nohidden ~/Library 
    ```

    尝试检查那里的数据库（而不是 Xcode 项目中的版本）并查看数据库是否包含您期望的所有表。

4.  如果在完成所有这些操作后，您没有看到您的数据库被复制到您的模拟器/设备，请确保您已设置目标的构建阶段设置，以便通过“复制捆绑资源”包含数据库。

5.  正如其他人所建议的那样，无论何时获得`SQLITE_ERROR`，请始终通过`NSLog(@"%s SQLITE_ERROR '%s' (%1d)", __FUNCTION__, sqlite3_errmsg(database), sqlite3_errcode(database));`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:09:10.573

所以错误是它没有复制数据库文件。我仍然不知道为什么没有。幸运的是，我能够以编程方式创建数据库文件。这样做解决了问题。但是不知道为什么文件不会复制。

# magento - 添加新客户时的电子邮件通知 - Magento

> ID：11310894
> 
> 赞同：4
> 
> 时间：2012-07-03T12:26:45.750
> 
> 标签：magento

每当有新客户注册时，我想向我商店的联系电子邮件地址发送电子邮件通知。

我不想购买任何类型的扩展，所以请帮我这样做

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T13:57:34.967

最佳实践是使用 Magento 的事件系统。

**应用程序/etc/modules/Your_Module.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
    <modules>
        <Your_Module>
            <active>true</active>
            <codePool>local</codePool>
        </Your_Module>
    </modules>
</config> 
```

**app/core/local/Your/Module/etc/config.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
    <global>
        <models>
            <your_module>
                <class>Your_Module_Model</class>
            </your_module>
        </models>
    </global>
    <frontend>
        <events>
            <customer_save_after>
                <observers>
                    <your_module>
                        <type>model</type>
                        <class>your_module/observer</class>
                        <method>customerSaveAfter</method>
                    </your_module>
                </observers>
            </customer_save_after>
        </events>
    </frontend>
</config> 
```

**app/code/local/Your/Module/Model/Observer.php**

```
<?php

class Your_Module_Model_Observer
{
    public function customerSaveAfter(Varien_Event_Observer $o)
    {
        //Array of customer data
        $customerData = $o->getCustomer()->getData();

        //email address from System > Configuration > Contacts
        $contactEmail = Mage::getStoreConfig('contacts/email/recipient_email');

        //Mail sending logic here.
        /*
           EDIT: AlphaCentauri reminded me - Forgot to mention that
           you will want to test that the object is new. I **think**
           that you can do something like:
        */
        if (!$o->getCustomer()->getOrigData()) {
            //customer is new, otherwise it's an edit 
        }
    }
} 
```

**编辑：**请注意代码中的编辑 - 正如 AlphaCentauri 指出的那样，该`customer_save_after`事件会为插入和更新而触发。`_origData`条件逻辑应该允许您合并他的邮件逻辑。_origData 将是`null`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T16:41:26.410

它可以用 Magento 事件/观察者系统完美地完成。首先，注册你的模块。

**应用程序/etc/modules/Namespace_Modulename.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
    <modules>
        <Namespace_Modulename>
            <active>true</active>
            <codePool>local</codePool>
        </Namespace_Modulename>
    </modules>
</config> 
```

比为它写一个配置文件。

**应用程序/代码/本地/命名空间/模块名/etc/config.xml**

```
<?xml version="1.0"?>
<config>
    <modules>
        <Namespace_Modulename>
            <version>0.0.1</version>
        </Namespace_Modulename>
    </modules>
    <frontend>
        <events>
            <customer_register_success>
                <observers>
                    <unic_observer_name>
                        <type>model</type>
                        <class>unic_class_group_name/observer</class>
                        <method>customerRegisterSuccess</method>
                    </unic_observer_name>
                </observers>
            </customer_register_success>
        </events>
        <helpers>
            <unic_class_group_name>
                <class>Namespace_Modulename_Helper</class>
            </unic_class_group_name>
        </helpers>
    </frontend>
    <global>
        <models>
            <unic_class_group_name>
                <class>Namespace_Modulename_Model</class>
            </unic_class_group_name>
        </models>
        <template>
            <email>
                <notify_new_customer module="Namespace_Modulename">
                    <label>Template to notify administrator that new customer is registered</label>
                    <file>notify_new_customer.html</file>
                    <type>html</type>
                </notify_new_customer>
            </email>
        </template>
    </global>
</config> 
```

这里发生了一些事情：

1.  一个新的观察者被注册以触发节点中的事件`customer_register_success`（它在第 335 行发送`Mage_Customer_AccountController`） 。`frontend/events`它比使用 更好`customer_save_after`，因为每次保存客户时都会触发最后一个，不仅在他注册时；
2.  在 node.js 中注册了一个新的电子邮件模板`global/template/email`。允许我们使用它发送自定义电子邮件。

接下来创建一个电子邮件模板（文件）。

**app/locale/en_US/template/notify_new_customer.html**

```
Congratulations, a new customer has been registered:<br />
Name: {{var name}}<br />
Email: {{var email}}<br />
...<br /> 
```

之后定义一个观察者方法。

**app/code/local/Namespace/Modulename/Model/Observer.php**

```
class Namespace_Modulename_Model_Observer
{
    public function customerRegisterSuccess(Varien_Event_Observer $observer)
    {
        $emailTemplate  = Mage::getModel('core/email_template')
            ->loadDefault('notify_new_customer');
        $emailTemplate
            ->setSenderName(Mage::getStoreConfig('trans_email/ident_support/name'))
            ->setSenderEmail(Mage::getStoreConfig('trans_email/ident_support/email'))
            ->setTemplateSubject('New customer registered');
        $result = $emailTemplate->send(Mage::getStoreConfig('trans_email/ident_general/email'),(Mage::getStoreConfig('trans_email/ident_general/name'), $observer->getCustomer()->getData());
    }
} 
```

**编辑：**正如@benmarks 指出的那样，如果客户在结账时注册，此解决方案将不起作用。[此处](https://stackoverflow.com/a/5184440/1009697)描述了此行为的解决方案。但是，我认为，最好使用`_origData`@benmarks 建议的功能。因此，以他的[回答](https://stackoverflow.com/a/11312535/1009697)为指导来实现您的需求。

**有用的链接：**

*   [Magento 自定义电子邮件 • Incho](http://inchoo.net/ecommerce/magento/magento-custom-emails/)
*   [Magento - Wiki - 使用 Event/Observer 自定义 Magento](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/customizing_magento_using_event-observer_method)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T01:38:47.467

作为基于事件的方法的替代方案，您可以运行一个单独的基于 API 的脚本来获取新的（或更新的）客户并将他们通过电子邮件发送给您，您可能希望或可能不希望获得一个每天一次的列表，而不是也比每个客户的电子邮件。

好处：

*   Magento 商店中没有安装任何内容
*   不会为新的/更新的客户操作增加任何额外的处理或网络延迟
*   将一天内的所有电子邮件批量处理为一封电子邮件的机会

这是我最近使用的一个例子，它几乎正是你想要的，这就是为什么它引起了我的注意。代码[可在此处获得](https://github.com/aschroder/API-presentation2012)。

```
$client =
   new SoapClient('http://www.yourstore.com/magento/api/soap?wsdl');
 $session = $client->login('TEST_USER', 'TEST_PASSWORD');

 $since = date("Y-m-d", strtotime('-1 day'));
 // use created_at for only new customers
 $filters = array('updated_at' => array('from' => $since)); 

 $result = $client->call($session, 'customer.list', array($filters));

 $email = "New customers since: $since\n";

 foreach ($result as $customer) {
         $email .= $customer["firstname"] ." ".
                     $customer["lastname"] . ", " .
                     $customer["email"] . "\n";
 }

mail("customer-manager@yourstore.com", "Customer report for: $since", $email); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T12:56:48.653

您可以扩展`Mage/Customer/Resource/Customer.php`- 受保护的功能`_beforeSave(Varien_Object $customer)`

```
if ($result) {
   throw Mage::exception('Mage_Customer', Mage::helper('customer')->__('This customer email already exists'), Mage_Customer_Model_Customer::EXCEPTION_EMAIL_EXISTS);
} else {
    // SEND EMAIL - Use a custom template 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-24T10:41:06.007

您可以尝试使用此扩展程序获取每个新客户注册的通知电子邮件，包括可自定义的电子邮件模板。 [http://www.magentocommerce.com/magento-connect/customer-registration-notification.html](http://www.magentocommerce.com/magento-connect/customer-registration-notification.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-24T10:42:09.393

您可以尝试使用此扩展程序获取每个新客户注册的通知电子邮件，包括可自定义的电子邮件模板。[http://www.magentocommerce.com/magento-connect/customer-registration-notification.html](http://www.magentocommerce.com/magento-connect/customer-registration-notification.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-25T11:05:13.257

这是用于向管理员发送新客户电子邮件的代码，还将
文件覆盖
`\app\code\core\Mage\Customer\Model\Customer.php`
到本地
`\app\code\local\Mage\Customer\Model\Customer.php`

替换下面的函数

```
protected function _sendEmailTemplate($template, $sender, $templateParams = array(), $storeId = null)
    {
        /** @var $mailer Mage_Core_Model_Email_Template_Mailer */
        $mailer = Mage::getModel('core/email_template_mailer');
        $emailInfo = Mage::getModel('core/email_info');
        $emailInfo->addTo($this->getEmail(), $this->getName());
        $mailer->addEmailInfo($emailInfo);

        // Set all required params and send emails
        $mailer->setSender(Mage::getStoreConfig($sender, $storeId));
        $mailer->setStoreId($storeId);
        $mailer->setTemplateId(Mage::getStoreConfig($template, $storeId));
        $mailer->setTemplateParams($templateParams);
        $mailer->send();
        return $this;
    } 
```

至

```
protected function _sendEmailTemplate($template, $sender, $templateParams = array(), $storeId = null)
    {
        /** @var $mailer Mage_Core_Model_Email_Template_Mailer */
        $mailer = Mage::getModel('core/email_template_mailer');
        $emailInfo = Mage::getModel('core/email_info');
        $emailInfo->addTo($this->getEmail(), $this->getName());

        if($template="customer/create_account/email_template"){

            $emailInfo->addBcc(Mage::getStoreConfig('trans_email/ident_general/email'), $this->getName());
              //Add email address in Bcc you want also to send
        }

        $mailer->addEmailInfo($emailInfo);

        // Set all required params and send emails
        $mailer->setSender(Mage::getStoreConfig($sender, $storeId));
        $mailer->setStoreId($storeId);
        $mailer->setTemplateId(Mage::getStoreConfig($template, $storeId));
        $mailer->setTemplateParams($templateParams);
        $mailer->send();
        return $this;
    } 
```

# c++ - 如何获取变量的类型？

> ID：11310898
> 
> 赞同：198
> 
> 时间：2012-07-03T12:27:02.087
> 
> 标签：c++, variables, typeof

在 C++ 中，如何找到变量的类型？

* * *

## 回答 #1

> 赞同：237
> 
> 时间：2012-07-03T12:30:25.957

您可以使用[typeid 运算符](https://docs.microsoft.com/en-us/cpp/cpp/typeid-operator)：

```
#include <typeinfo>
...
cout << typeid(variable).name() << endl; 
```

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2016-08-08T16:14:46.150

对于静态断言，引入了 C++11 [`decltype`](https://en.cppreference.com/w/cpp/language/decltype)，这在某些场景中非常有用。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-07-03T12:31:21.990

如果你有一个变量

```
int k; 
```

您可以使用

```
cout << typeid(k).name() << endl; 
```

请参阅关于 SO 的以下线程：[类似问题](https://stackoverflow.com/questions/81870/print-variable-type-in-c)

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-07-03T13:33:28.247

C++ 和 Javascript 之间的主要区别在于 C++ 是一种静态类型的语言，而 javascript 是动态的。

在动态类型语言中，变量可以包含任何东西，并且它的类型由它所持有的值给出，每时每刻。在静态类型语言中，变量的类型是声明的，并且不能更改。

可以有动态分派和对象组合和子类型（继承和虚函数）以及静态分派和超类型（通过模板 CRTP），但无论如何编译器必须知道变量的类型。

如果您不知道它是什么或可能是什么，那是因为您设计了一些东西，因为该语言具有动态类型系统。

如果是这种情况，你最好重新考虑你的设计，因为它会进入一个不适合你使用的语言的土地（最喜欢带着毛毛虫在高速公路上行驶，或者带着汽车在水中行驶）

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-07-03T12:34:18.520

通常，想要在 C++ 中查找变量的类型是错误的问题。它往往是您从诸如 C 或 Pascal 之类的过程语言中携带的东西。

如果您想根据类型编写不同的行为，请尝试了解例如[函数重载](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=/com.ibm.xlcpp8a.doc/language/ref/cplr312.htm)和[对象继承](http://www.cs.bu.edu/teaching/cpp/inheritance/intro/)。在您使用 C++ 的第一天，这不会立即生效，但请坚持下去。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2016-05-25T00:16:33.193

我相信我有一个使用 typeid() 的有效用例，就像使用 sizeof() 一样有效。对于模板函数，我需要根据模板变量对代码进行特殊处理，以便提供最大的功能和灵活性。

它比使用多态更紧凑和可维护，为每种支持的类型创建一个函数实例。即使在那种情况下，我也可能使用这个技巧只编写一次函数体：

请注意，因为代码使用模板，所以下面的 switch 语句应该静态解析为一个代码块，优化所有错误情况，AFAIK。

考虑这个例子，如果 T 是一种类型而不是另一种类型，我们可能需要处理转换。我将它用于类专业化以访问硬件将使用 myClassA 或 myClassB 类型的硬件。在不匹配的情况下，我需要花时间转换数据。

```
switch ((typeid(T)) {
  case typeid(myClassA):
    // handle that case
    break;
  case typeid(myClassB):
    // handle that case
    break;
  case typeid(uint32_t):
    // handle that case
    break;
  default:
    // handle that case
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-07-03T12:31:30.850

```
#include <typeinfo>

...
string s = typeid(YourClass).name() 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-01-03T04:03:28.807

我不确定我的回答是否会有所帮助。

简短的回答是，您并不真的需要/想知道变量的类型来使用它。

如果您需要为静态变量指定类型，那么您可以简单地使用 auto。

在更复杂的情况下，您想在类或结构中使用“auto”，我建议使用带有 decltype 的模板。

例如，假设你正在使用别人的库，它有一个名为“unknown_var”的变量，你想把它放在一个向量或结构中，你完全可以这样做：

```
template <typename T>
struct my_struct {
    int some_field;
    T my_data;
};
vector<decltype(unknown_var)> complex_vector;
vector<my_struct<decltype(unknown_var)> > simple_vector 
```

希望这可以帮助。

编辑：为了更好地衡量，这是我能想到的最复杂的情​​况：拥有一个未知类型的全局变量。在这种情况下，您需要 c++14 和模板变量。

像这样的东西：

```
template<typename T> vector<T> global_var;

void random_func (auto unknown_var) {
    global_var<decltype(unknown_var)>.push_back(unknown_var);
} 
```

它仍然有点乏味，但它尽可能接近无类型语言。只要确保每当您引用模板变量时，始终将模板规范放在那里。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-04-05T00:40:10.693

如果您需要在类和已知类型之间进行比较，例如：

```
class Example{};
...
Example eg = Example(); 
```

您可以使用此比较线：

```
bool isType = string( typeid(eg).name() ).find("Example") != string::npos; 
```

它检查`typeid`名称是否包含字符串类型（typeid 名称具有其他损坏的数据，因此最好使用 a`s1.find(s2)`而不是`==`）。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-01-21T05:30:07.740

你绝对可以去`typeid(x).name()`哪里 x 是变量名。它实际上返回一个指向数据类型的 const char 指针。现在，看看下面的代码。

```
#include<bits/stdc++.h>
using namespace std;
int main()
{
    int n = 36;
    char c = 'A';
    double d = 1.2;
    if(*(typeid(n).name()) == 'i'){
        cout << "I am an Integer variable" << endl;
    }
    if(*((char *) typeid(d).name()) == 'd'){
        cout << "I am a Double variable" << endl;
    }
    if(*((char *) typeid(c).name()) == 'c'){
        cout << "I am a Char variable" << endl;
    }
    return 0;
} 
```

注意 first 和 second if 是如何工作的。

# php - Jquery / PhP / Joomla 选择两个组合框之一未更新

> ID：11310904
> 
> 赞同：3
> 
> 时间：2012-07-03T12:27:53.317
> 
> 标签：php, jquery, joomla, drop-down-menu

我正在制作一个`comboboxes/selects`页面上有 3 个的 Joomla 组件。1 种语言，2 种主题。如果您更改语言，其他两个将填充相同的数据（所选语言的主题），名称`selectbox`不同但其他方面相同。

我收到一个主题框的错误（因此 url 变红），但是没有任何逻辑会给出错误。在 Firebug 中，我得到了一个没有另一个的 HTML，这个得到了更新，但另一个没有任何回报。

如果我右键单击给出错误的萤火虫，然后“再次发送”，它将正常加载。他们是时间问题吗？

**语言选择框**的change事件：

 **```
jQuery('#cmbldcoi_ldlink_language').bind('change', function() {

    var cmbLangID = jQuery('#cmbldcoi_ldlink_language').val();

    if (cmbLangID  !=0) {

        getSubjectCmb_lang(cmbLangID, 'cmbldcoi_ldlink_subjects', '#ldlinksubjects');  
    }
}); 
```

请求 php 文件为选择创建 html 的函数：

```
function getSubjectCmb_lang(langID, cmbName, DivWhereIn) {
    var xdate = new Date().getTime();

     var url = 'index.php?option=com_ldadmin&view=ldadmin&format=raw&task=getcmbsubj_lang&langid=' + langID + '&cmbname=' + cmbName + '&'+ xdate;

     jQuery(DivWhereIn).load(url, function(){

     });
} 
```

并且在 php 文件中有一个与数据库的连接，以获取构建选择框的信息。我为此使用了一个可以的函数，因为它使所有我的选择框。选择框存在问题的唯一地方是在有 2 个选择需要在第三个更改时更改的页面上。我猜这是在 Jquery 中的某个地方出错了。我认为这与时间有关。但我愿意接受所有建议。

谢谢。

**更新：**

不，ID 和名称字段不同。它们被命名为：cmbldcoi_child cmbldcoi_parent

这是我的代码：

第一个组合框的更改事件使其他两个更改：

```
jQuery('#cmbldcoi_language_chain_subj').bind('change', function(){
        var langID = jQuery('#cmbldcoi_language_chain_subj').val();
        if (langID != 0){

            getSubjectCmb_lang(langID, 'cmbldcoi_child', '#div_cmbldcoi_child');
            getSubjectCmb_lang(langID, 'cmbldcoi_parent', '#div_cmbldcoi_parent');

        }
    }); 
```

}

函数 wicht 调用 php 文件从数据库中获取信息：

```
function getSubjectCmb_lang(langID, cmbName, DivWhereIn){
 var xdate = new Date().getTime();
 var url = 'index.php?option=com_ldadmin&view=ldadmin&format=raw&task=getcmbsubj_lang&langid=' + 
 langID + '&cmbname=' + cmbName + '&'+ xdate;

 jQuery(DivWhereIn).load(url, function(){

 });

 } 
```

PHP代码函数getcmbsubj_lang(){

```
 $langid  = JRequest::getVar('langid');                    

    if ($langid > 0 ){

        $langid = JRequest::getVar('langid');

    }else{

        $langid = 1;

    }                    

        $cmbName = JRequest::getVar('cmbname');

        //$lang_sufx  = self::get_#__sufx($langid);

    print ld_html::ld_create_cmb_html($cmbName, '#__ldcoi_subjects','id', 'subject_name', " WHERE id_language={$langid} ORDER BY subject_name" );

    } 
```

有一个名为 ld_html 的类，其中有一个创建组合框的功能。ld_html::ld_create_cmb_html() 它获取表名、id 字段、名称字段和可选的 where 子句。

如果只有一个组合框需要更新，这一切都很好。当有两个时它会出现问题。

谢谢您的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T22:50:53.913

我想您的两个选择框具有相同的 id `#ldlinksubjects`，因此它们可能会随机失败，或者两者都不起作用。你能更有表现力，或者给出完整的 JS 代码吗？**

# silverlight - WP7：SL/XNA：在 Silverlight 中显示 XNA 数据

> ID：11310906
> 
> 赞同：-1
> 
> 时间：2012-07-03T12:28:00.540
> 
> 标签：silverlight, windows-phone-7, xna

我正在开发 Silverlight/XNA 游戏。具有这样的结构：

*   我的**GamePlay**类继承自**InGamePage**。
*   其中**InGamePage**继承自**PhoneApplicationPage**。
*   InGamePage 有一个 OnLayoutUpdated 方法来渲染 SL 控件（使用 UIElementRenderer ）。

这是根据 SL/XNA[代码示例](http://create.msdn.com/en-US/education/catalog/sample/model_viewer_demo)

一切正常，直到我决定在 gamepage.xaml 创建一个文本块。我希望该 textBlock 显示一些静态游戏变量（例如英雄覆盖的距离）。

现在我应该在哪里写这一行：

```
debugTextBlock.Text = GameData.data.distanceCovered; 
```

以便文本块显示当前值。（我试图挂钩一个 LayoutUpdate 但它抛出 Application_UnhandledException 说“检测到布局周期。布局无法完成​​。”）

任何提示/链接都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:44:57.647

我认为简单地使用 Dispatcher 可能会起作用：

```
Dispatcher.BeginInvoke(()=>
{
debugTextBlock.Text = GameData.data.distanceCovered; 
}); 
```

# ruby - 如何使用 ruby 中的机械化点击网站的所有链接？

> ID：11310907
> 
> 赞同：1
> 
> 时间：2012-07-03T12:28:08.527
> 
> 标签：ruby, mechanize-ruby

我有一个小问题。我想点击某个网站上的一些链接。网站上有 31 个链接，每个链接代表一个日历条目。我只想找到一些链接并通过单击它们来更改“状态”，这样我就可以使这个日历保持最新。这就是我到目前为止所得到的。

```
require "rubygems"
require "mechanize"

agent = Mechanize.new
agent.get('http://funnysite.com/all_links.php')

available = agent.page.links_with(:href => %r{&status=0})

available.each do |link|
  agent.page.link_with(:text => link.text).click
end 
```

有没有更好更清晰的方法来写这个？此代码仅“有时”有效。有谁知道这个的正确实现？提前谢谢:)

# prestashop - prestashop 栏外特色产品

> ID：11310908
> 
> 赞同：0
> 
> 时间：2012-07-03T12:28:09.630
> 
> 标签：prestashop

在 Prestashop 中，如何在单独的 div、外栏和首页主体中展示特色产品？

```
<header>
    hook header
</header>
<container>
    <div central_column>
    .
    <!-- here is the featured products block -->
    .
    </div>
    <div right_column>
        hook right column
    </div>
</container>

<newdiv><--! here where i want to show featured products --></newdiv>

<footer>
    hook footer
</footer> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:23:05.273

您可以创建一个新钩子，并将该钩子放在您的`<newdiv>`.

之后，您需要编辑 /modules/homefeatured/homefeatured.php 并为您的新钩子添加一个钩子函数，例如

```
function hookYouNewHook($params)
{
    return $this->hookHome($params);
} 
```

最后一步是将 homefeatured 模块移植到你的新钩子上。

有很多关于如何创建新钩子以及如何转换模块的指南。

# c# - 如何禁用 TreeView 自动第一个节点选择

> ID：11310912
> 
> 赞同：4
> 
> 时间：2012-07-03T12:28:28.987
> 
> 标签：c#, .net, treeview

我在谷歌上搜索了一下，但找不到有用的东西。TreeView 的行为就像当您将一个节点添加到它的树时，默认情况下它将被选中，这意味着您应该始终拥有一个选定的节点，除了 Tree 为空的时刻。

有没有办法覆盖或禁用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-14T22:23:29.940

使用更高的tabindex 值——即一旦你的表单加载第一个tabstop 不应该是你的TreeView 控件。

```
TreeView1.TabIndex = 2; 
```

或者你也可以使用

```
TreeView1.TabStop = false; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:56:15.920

您可以尝试使用此代码

```
yourNode.SelectAction=TreeNodeSelectAction.None 
```

;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T05:22:43.570

哦，我刚刚得到你，你想没有选定的节点，对吧？
这很简单：

```
treeView1.SelectedNode = null; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T14:49:53.390

```
TreeView tv1 = new TreeView();  
TreeNode selected = tv1.SelectedNode;  
//do your add here  
tv1.SelectedNode = selected; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-27T09:32:39.207

我知道这个问题很古老，但我找到了一个比上面更好的解决方案。除非用户选择它，否则我通常不希望选择任何条目。我发现除了 OP 的案例自动选择之外，当 TreeView 位于折叠面板中时也会发生自动选择（出于某种原因）。

我的解决方案是使用该`BeforeSelect`事件。

```
private void GroupingTV_BeforeSelect(object sender, TreeViewCancelEventArgs e)
{
    // Prevent node selection by any other means than the user
    if (e.Action != TreeViewAction.ByMouse && e.Action != TreeViewAction.ByKeyboard)
    {
        e.Cancel = true;
    }

} 
```

当然，如果您需要通过代码触发选择，则需要使用在触发选择之前设置的额外标志来覆盖它：

```
Intentional = true;
GroupingTV.SelectedNode = node;
Intentional = false; 
```

```
private void GroupingTV_BeforeSelect(object sender, TreeViewCancelEventArgs e)
{
    // Prevent node selection by any other means than the user and intentional calls via code.
    if (!Intentional && e.Action != TreeViewAction.ByMouse && e.Action != TreeViewAction.ByKeyboard)
    {
        e.Cancel = true;
    }

} 
```

或者，如果您有很多树视图并且不想拥有大量标志，请暂时禁用处理程序：

```
GroupingTV.AfterSelect -= GroupingTV_BeforeSelect;
GroupingTV.SelectedNode = node;
GroupingTV_BeforeSelect += GroupingTV_BeforeSelect; 
```

我希望这可以帮助别人！

# windows-services - NServiceBus.Host.exe 作为 Windows 服务 log4net 问题

> ID：11310913
> 
> 赞同：0
> 
> 时间：2012-07-03T12:28:41.390
> 
> 标签：windows-services, log4net, nservicebus

我使用 NServiceBus 2.6。

我使用 log4net.config 文件并通过端点中的代码初始化日志记录工具：

```
SetLoggingLibrary.Log4Net(() => 
       XmlConfigurator.ConfigureAndWatch(new FileInfo("log4net.config"))); 
```

当我正常运行 NServiceBus.Host.exe 时，它​​记录良好，但是当我使用 /install 将其部署为 Windows 服务时，不再记录任何内容。

如果我使用基于代码的方式，它会起作用：

```
SetLoggingLibrary.Log4Net<RollingFileAppender>(...) 
```

任何想法为什么...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:54:19.727

将进程作为 Windows 服务运行时，默认情况下不会将当前目录设置为二进制文件所在的位置。这意味着当您查找“log4net.config”时，它实际上会在 c:\windows\system32 中搜索。

试试这个（在调用 SetLoggingLibrary 之前）：

```
System.IO.Directory.SetCurrentDirectory(AppDomain.CurrentDomain.BaseDirectory); 
```

或者，将您的代码修改为以下内容：

```
SetLoggingLibrary.Log4Net(() => 
   XmlConfigurator.ConfigureAndWatch(new FileInfo(Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "log4net.config")))); 
```

# security - 如何确保使用 Lighttpd 的视频流的安全性？

> ID：11310917
> 
> 赞同：0
> 
> 时间：2012-07-03T12:28:50.710
> 
> 标签：security, video-streaming, lighttpd

我需要流式传输服务器上存在的视频，例如 xyz.com。如果我访问视频的正确路径，每个人都可以看到该视频。我需要做的是创建一个与每个具有唯一视频 ID 的特定视频相对应的 MD5sum。

因此，从现在开始，如果用户像以前一样访问视频，即：

它不应该为以下加载。

> http://xyz.com/video.mp4

它应该只为以下网址加载

> http://xyz.com/video.mp4?md5=202cb962ac59075b964b07152d234b70

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:33:27.107

我认为您最好为此使用脚本语言，例如 php。但是，如果您坚持在 lighttpd 内部执行此操作，则可以使用 lua 使用 mod_magnet 执行此操作。

[http://redmine.lighttpd.net/projects/lighttpd/wiki/Docs:ModMagnet](http://redmine.lighttpd.net/projects/lighttpd/wiki/Docs:ModMagnet)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T07:35:28.870

Lighttpd 还提供了一个名为“SECDownload”的模块，它非常易于安装。它使您可以在有限的时间内提供 URL。

教程在这里： [http ://redmine.lighttpd.net/projects/1/wiki/Docs_ModSecDownload](http://redmine.lighttpd.net/projects/1/wiki/Docs_ModSecDownload)

这只会创建一个临时链接，url 不限于 IP。如果创建了一个 url，每个用户都可以访问它（至少如果您不采取任何措施来阻止这种情况）。

# java - 为什么 $4945932$ 的平方是负数？

> ID：11310919
> 
> 赞同：0
> 
> 时间：2012-07-03T12:28:57.563
> 
> 标签：java, sqr

我声明了一个整数 int i = 4945932; 它的平方是一些负随机数。这怎么可能？我究竟做错了什么？请帮助。在此先感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T12:31:21.193

[整数溢出。](https://en.wikipedia.org/wiki/Integer_overflow)Java int 不能大于 2,147,483,647；如果您尝试存储更大的数字，它会溢出。

如果您改为使用 a `long`，则可以存储更大的值，包括您尝试存储的值。如果需要更大的值，[`java.math.BigInteger`](http://docs.oracle.com/javase/6/docs/api/java/math/BigInteger.html)可以存储任意精度的整数；唯一的限制是您计算机的内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T12:30:26.627

它的发生是因为 int 的限制。[整数溢出。](http://www.mkyong.com/java/javas-silent-killer-buffer-overflow-careful/)

int 可以存储 4 个字节，有符号（二进制补码）。-2,147,483,648 至 2,147,483,647。

如果你写`int i= square(4945932)`它是 24462243348624 所以它会超过 int 的限制所以它表现异常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T12:43:30.267

您可以使用

```
long l = 4945932L;
System.out.println(l * l);
BigInteger bi = BigInteger.valueOf(4945932L);
System.out.println(bi.multiply(bi)); 
```

印刷

```
24462243348624
24462243348624 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T12:32:54.313

您超出了 int 的大小。如果要平方 4945932，则需要更改为 long。

# perl - NET::FTP 将命令放入 perl

> ID：11310922
> 
> 赞同：2
> 
> 时间：2012-07-03T12:29:04.683
> 
> 标签：perl, ftp

我正在尝试将文件还原到其原始位置。登录FTP服务器后，如何将其放到某个目录下。截至目前，它将进入根目录...

```
 $f = Net::FTP->new($server, Debug => 0);
    $f->login($username, $passwd) or &fail;
    $msg = "".$f->message."";
    $f->binary();
    $f->put($newfile) or &fail;
    &pass; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:44:46.507

首先尝试更改目录：

```
$f->cwd('/somedirectory') 
    or die "Cannot change working directory ", $ftp->message; 
```

从文档中：

```
cwd ( [ DIR ] )

Attempt to change directory to the directory given in $dir.  If
$dir is "..", the FTP "CDUP" command is used to attempt to move up
one directory. If no directory is given then an attempt is made to
change the directory to the root directory. 
```

# php - 如何在没有 onclick/onkeyup/onchange 等的情况下调用 Ajax 函数

> ID：11310923
> 
> 赞同：1
> 
> 时间：2012-07-03T12:29:05.903
> 
> 标签：php, jquery, mysql, ajax, jqmobi

我正在尝试包含一个 .php 文件，该文件将通过从 MySQL 数据库中挑选问题为我生成一个表单。我找到了许多调用这个函数的方法，我用 1 个参数（页码）调用了 getQuestions()。我已经看到了将使用 onchange 或按钮（onclick）等执行我的 php 文件的下拉菜单。但是有没有办法在没有这些的情况下使用我的功能？我只是希望它自动加载页面的其余部分，而无需任何不必要的交互。

不知道这是否重要，但我的页面是用 jQuery Mobile 制作的，所以它应该只在正确的页面/div-id 处于活动状态时才可见。

```
function getQuestions(str)
    { 
    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    xmlhttp.onreadystatechange=function()
      {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            document.getElementById("page_1").innerHTML=xmlhttp.responseText;
        }
      }
    xmlhttp.open("GET","generate_questions.php?p="+str,true);
    xmlhttp.send();
    } 
```

这些是我试图用来在 HTML 的其余部分中查看 .php 的函数（没有成功）

```
<script type="text/javascript">
                    $(document).ready(function() {
                    getQuestions(1);
                    });
                    </script>

window.onload = function() {
                    $("#page_1").load(getQuestions(1));
                    }

window.onload = function() {
                    getQuestions(1);
                    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T12:31:10.103

您可以使用文档就绪事件来加载其余内容：

```
$(document).ready(function() {
   // your code
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T12:34:01.320

你可以在`Window.onload or document.ready`活动中做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T12:43:40.837

您好，您可以通过以下方式调用代码而无需单击或更改

只需在脚本标记之间写下函数名称并在调用函数后创建该函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T13:08:57.653

似乎我通过将 php 代码分配给比最初计划的更小的 div 来解决我的问题。我不能将它分配给页面 id，而是分配给页面中较小的 div。奇怪的是，我似乎也无法在 php 代码中真正生成新的 div，所以这限制了它的使用。

# iphone - 拦截 UIEvents 并将它们传递给父元素

> ID：11310924
> 
> 赞同：1
> 
> 时间：2012-07-03T12:29:07.100
> 
> 标签：iphone, ios, uievent

我有一个有趣的场景。我有一个包含按钮的自定义 TableViewCell 类。我想做的是在自定义单元格类中捕获按钮的触摸事件，并为容器控件（ler）处理一个新事件。

原因是我有一个带有标记为“存档”按钮的单元格。现在，我不想处理自定义 TableViewController 中的单元格代码，而是首先拦截按钮调用，因为我需要隐藏存档按钮并告诉容器控件（或 TableViewController）处理“单元格 X 上发生了存档事件”。我不希望控制器知道细胞内发生了什么。这样我就有了一些可重用和更简洁的代码。

因此控制器应该能够接收事件并形成事件以确定涉及哪个单元，以便知道它需要删除哪个记录。我可以通过 NSNotificationCenter 类实现这一点，并让观察者为我处理它，但如果我可以将它作为一个事件提出来，那就太好了（我想，不知道你是否同意）。

这可以通过iOS开发完成吗？

我希望我的问题是有道理的。

谢谢

编辑：看来我被误解了。所以让我说清楚（除非这根本不可能），我不希望 TableViewController 知道单元格内的按钮。控制器需要接收单元生成的事件，因为它捕获了原始按钮触摸事件，并且从单元内部需要生成控制器可以捕获的新事件。类似于您在 .NET 世界中可以做的事情。但是，如果无法做到这一点，请告诉我。原因是为了更清洁和可重用的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:34:02.717

创建自定义表格视图单元格时，可以将回调附加到按钮按下事件。现在您可以将索引作为按钮的标记传递，从您的 uitableview 控制器中的数据源中删除项目。

重新加载表格视图，您就可以开始了。

希望这对您有所帮助。

```
myCell.archiveButton.tag = indexPath.row ; // This is the index in your data source

[myCell.archiveButton addTarget:self action:@selector(archiveItems:) forControlEvents: UIControlEventTouchUpInside];

void archiveItems:(id)sender {
    int index = sender.tag;
// Remove the item from your data source

[self.myTableview reloadData];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:36:42.597

是的，你可以做到。

首先，您必须将位置设置为该按钮的标签。然后您将为您的 ViewController 设置 Button 的目标，并像这样调用选择器方法。

```
[yourCustomCell.yourButton setTag:indexPath.row];//set position as tag to remember the position
[yourCustomCell.yourButton addTarget:self action:@selector(doArchive:) forControlEvents:UIControlEventTouchUpInside]; 
```

然后在你的`doArchive`方法中，获取标签，它实际上是这样的位置：

```
- (void)doArchive:(id)sender
{    
    int positon = sender.tag;
    // do something with positon and get the data from your Array at that position
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T07:09:19.337

除非有人能告诉我更好的方法，否则我会采用这种方法。

假设你有一个 TableViewController：

```
@interface CustomViewController : UITableViewController<ArchiveItemDelegate> ... 
```

你有一个自定义 TableViewCell：

```
@interface CustomCell : UITableViewCell ... 
```

使用下面的委托协议的委托属性。

现在我创建了一个协议：

```
@protocol ArchiveItemDelegate <NSObject>

-(void)archiveActionPerformed:(CustomCellData *)cellData onCell:(CustomCell *)cell;

@end 
```

在我的 CustomCell 实现中，我在存档按钮上附加了一个事件侦听器：

```
- (void)archiveButtonPressed:(UIButton *) sender forEvent:(UIEvent *)event {
    [self.delegate archiveActionPerformed:currentCellData onCell:self];
} 
```

现在在我的 TableViewController 中，我让它从 ArchiveItemDelegate 协议“继承”并实现它。

```
-(void)archiveActionPerformed:(CustomCellData *)cellData onCell:(CustomCell *)cell {
    // do whatever ...
} 
```

现在在我的“tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath”方法中，我只是将 TableViewController 附加到单元格。

```
cell.delegate = self; 
```

现在我的 TableViewController 不知道 Cell 的内部结构，并且当点击 Archive 按钮时，cell 会通知“归档事件”。这可能会“进化”一点，但现在我认为可以。如果有人有更好的解决方案，请告诉我。您可以看到我来自 .NET 空间；-)

# wcf - 在 WCF .NET 4.0 和 IIS 6 中，如何在没有 HTTP 重定向的情况下返回静态 WSDL 文件？

> ID：11310925
> 
> 赞同：1
> 
> 时间：2012-07-03T12:29:13.073
> 
> 标签：wcf, wsdl, iis-6

如标题中所述，我遇到了问题。一些背景信息。

有一个这样的 URL`https://external_server.something.xy/SomeService/Something`通过反向代理暴露给外界。

*   反向代理剥离 HTTPS 并将流量作为纯 HTTP 转发到 WCF 服务，并将 HTTPS 应用于响应。
*   绑定是 basicHttpBinding (with `<transport clientCredentialType="Basic" proxyCredentialType="None" realm="" />`)。

由于这个和一些合同原因，静态 WSDL 文件 (Something.wsdl) 被分发给客户端。唉，仍然有很多代码可以在没有分布式静态 WSDL 文件的情况下检索 WSDL，然后动态生成调用（无论出于何种原因）。

如果我在配置文件中设置，`<serviceMetadata httpGetEnabled="true" externalMetadataLocation="../Something.wsdl"/>`客户将受到**HTTP 307 临时重定向**的欢迎。

无论如何，通过一些研究，我发现设置 IIS 主机标头也会影响同一 IIS 上的许多其他应用程序。这是一个不可行的解决方案。我可以在 web.config 中配置什么，还是应该在服务器或反向代理上调查 URL 重写方案？

额外的好处是，如果我可以设置帮助页面上显示的 URL，使其不显示内部服务器（这样链接也可以工作！）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T22:27:53.580

我们遇到了类似的问题并通过简单地将静态 WSDL 放在路由器上（我认为这就是您所说的反向代理）并关闭服务本身的 serviceMetadata 来处理它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T05:57:23.647

为了回答我自己的问题，我（或我们）在反向代理上重新编写了请求，因此它对客户端和内部服务器是透明的。现在它截获对该服务的元数据查询，并将它们指向静态 WCF 文件（通过帮助页面中显示的 URI），然后返回该文件。

问题是当我使用[externalMetadaLocation](http://msdn.microsoft.com/en-us/library/ms731317.aspx)标记时，IIS 返回 HTTP 307，然后反向代理将其中继到客户端。当然，内部服务器不知道外部地址，因此重定向使用内部名称，因此存在问题。

我在想的另一个选择是编写一个与*Something*匹配的 REST 函数？**wsdl**是 Web 服务的一部分，因此它不会到达 WCF 元数据设施。在考虑了一段时间之后，我开始考虑使用[IWsdlExceportExtension](http://msdn.microsoft.com/en-us/library/system.servicemodel.description.iwsdlexportextension.aspx)来完成接收请求的工作，然后抓取文件并返回它（即，没有重定向）。

# java - 没有 getPackageManager 的 Android getPackageInfo

> ID：11310930
> 
> 赞同：4
> 
> 时间：2012-07-03T12:29:30.227
> 
> 标签：java, android

没有 getPackageManager 是否有可能获取 App 的 versionCode？我的问题是，我想要一个没有 Activity 的公共配置类，所以 getPackageManager() 不起作用。任何的想法？

我目前的代码：

```
PackageInfo pinfo;
try {
    pinfo = getPackageManager().getPackageInfo(getPackageName(), 0);
} catch (NameNotFoundException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
    pinfo = null;
}

appVersion = pinfo.versionCode; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:32:17.723

您必须将对公共类的引用`Context`（最好使用`getApplicationContext()`，以防止意外的内存泄漏）传递给公共`Configuration`类。没有其他方法可以检索`versionCode`您的应用程序。你必须使用`PackageManager`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T12:32:26.593

在非活动类的构造函数中获取一个[Context](http://developer.android.com/reference/android/content/Context.html)实例，并使用它来调用所有此类方法。

像这样的东西：

```
public class NonActivityClass implements SensorListener{
Context mContext;
public NonActivtiyClass(Context context) {
this.mContext = context;
}
//Rest of your code
} 
```

然后执行此操作以在您的 Activtiy 中创建该类的对象`onCreate()`：

```
NonActivityClass nac = new NonActivityClass(this); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-26T12:38:59.667

使用以下代码获取当前应用的应用版本代码：

```
public int getAppVersionCode() {
    return BuildConfig.VERSION_CODE;
} 
```

# asp.net - 如何避免下拉列表的selectedindexchanged后页面刷新？

> ID：11310933
> 
> 赞同：6
> 
> 时间：2012-07-03T12:29:49.593
> 
> 标签：asp.net, vb.net, visual-studio-2010, c#-4.0, ajaxcontroltoolkit

我正在使用更新面板和 ASP 下拉菜单。当我从下拉列表中选择任何值时，我会从依赖于该选定值的数据库中加载一些数据。但是，只要此选择更改，页面就会刷新。如何避免此页面刷新？我也尝试过 AsyncPostBackTrigger 但仍然出现此问题。

```
<asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server" EnablePartialRendering="false">
   </asp:ToolkitScriptManager>
        <asp:UpdatePanel ID="OuterUpdatePanel" runat="server">
            <ContentTemplate>
                <asp:DropDownList ID="ddList" CssClass="dropdown" Style="width: 200px !important;"
                 runat="server" AutoPostBack="true" OnSelectedIndexChanged="ddList_SelectedIndexChanged">
                </asp:DropDownList>
            </ContentTemplate>
        </asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T12:33:11.977

添加此项，如果您希望下拉列表触发 Ajax 调用而不刷新页面并且不删除`AutoPostBack="true"`

```
<Triggers> 
<asp:AsyncPostBackTrigger ControlID="ddList" EventName="SelectedIndexChanged" /> 
</Triggers> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T12:58:00.447

我相信你的问题的症结在于：

“当我从下拉列表中选择任何值时，我会从数据库中加载一些取决于此选定值的数据，每当刷新选择更改页面时，我都会遇到问题。”

有很多方法可以实现这一点，但可能需要进行一些重组才能产生预期的效果。一个相对简单的方法是：

(1) 重新组织您的页面，如下所示：

```
<asp:DropDownList ID="ddList" CssClass="dropdown" Style="width: 200px !important;" runat="server" AutoPostBack="false">
</asp:DropDownList>

<asp:UpdatePanel ID="OuterUpdatePanel" runat="server">
        <ContentTemplate>
        <!-- Content goes here -->
        </ContentTemplate>
</asp:UpdatePanel> 
```

(2) 添加脚本如下：

```
<script type="text/javascript">
function handleDDLChange() {
  __doPostBack($('div[id$="OuterUpdatePanel"]').attr('id'), 'ddlList_Changed_Or_Anything_Else_You_Might_Want_To_Key_Off_Of');
}

$('input[id$="ddlList"]').change( handleDDLChange );
</script> 
```

这是一种更“老派”的方法，但它应该可以解决您的问题。

编辑：以下说明了一种“非jQuery”方法，上述想法更加充实：

澳交所：

```
<asp:ScriptManager runat="server" />

<asp:DropDownList ID="ddlList" runat="server" onchange="handleDDLChange()">
    <asp:ListItem Text="text1" />
    <asp:ListItem Text="text2" />
</asp:DropDownList>

<script type="text/javascript">
    function handleDDLChange() {
        __doPostBack("<%= ddlList.ClientID %>", "ddlList_Changed_Or_Anything_Else_You_Might_Want_To_Key_Off_Of");
    }
</script>

 <asp:UpdatePanel ID="UpdatePanel1" runat="server">
   <ContentTemplate>
       <asp:Literal ID="litTest" runat="server" />
   </ContentTemplate>
</asp:UpdatePanel> 
```

代码隐藏：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        litTest.Text = "No postback";
    }
    else if (Request["__EVENTARGUMENT"] == "ddlList_Changed_Or_Anything_Else_You_Might_Want_To_Key_Off_Of")
    {
        litTest.Text = string.Format("Dropdown changed: {0}", ddlList.Text);
    }
    else
    {
        litTest.Text = "Postback for some other reason... :(";
    }
} 
```

# visual-studio-2010 - Visual Studio：将默认打开选项卡设置为 SolutionExplorer 而不是团队资源管理器

> ID：11310935
> 
> 赞同：2
> 
> 时间：2012-07-03T12:29:51.213
> 
> 标签：visual-studio-2010

当我打开任何解决方案时，它会将 TeamExplorer 显示为默认打开选项卡（可能是最后打开的选项卡）。但是我可以将解决方案资源管理器设置为所有解决方案的默认打开选项卡吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-07T20:27:31.703

我知道这很旧，但我想我至少想出了如何解决它。

我所做的只是更改选项卡的排列顺序。

**前**

![在此处输入图像描述](../Images/d2f632d5afd473cb877e95408e19fbf7.png)

**后**

![在此处输入图像描述](../Images/2b961ba2bf09aed657ca8b6b14045857.png)

现在解决方案资源管理器默认出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-02T14:39:29.487

1.  右键单击 Visual Studio 快捷方式并选择属性。
2.  您将在“快捷方式”选项卡下看到“目标”字段将包含类似于以下内容的文本：

    “C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\devenv.exe”

3.  附加如下所示的命令，然后单击应用按钮。

    "C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\devenv.exe" /Command View.TfsSourceControlExplorer

如果您的快捷方式在桌面上并固定在开始菜单上，您需要将此更改应用到两个快捷方式。我已验证上述步骤适用于 Visual Studio 版本 2008、2010、2012 和 2013。

# xslt - 如何根据 xslt 代码中的条件限制为标签添加属性

> ID：11310939
> 
> 赞同：3
> 
> 时间：2012-07-03T12:30:31.400
> 
> 标签：xslt, xslt-1.0

我们如何根据 xslt 中的某些条件创建属性。

我的输入 xml 有一个标签：

```
 <track external="http://mysite.com"  />
              or
           <track  local="/myfolder" /> 
```

并且在这个'track元素中出现了外部或本地属性，但没有出现任何一个，我必须将其转换为

```
 <a xhtml:href="@external value" xmlns="http://www.w3.org/1999/xhtml" /> 
```

如果 'track' 元素出现 'extrenal' 属性或进入

```
 <a xlink:href="@local value" xmlns="http://www.w3.org/1999/xlink" /> 
```

如果 'track' 元素出现 'local' 属性

XSLT 试过：

```
 <a xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:xlink="http://www.w3.org/1999/xlink">      

      <xsl:for-each select="child::*" >
        <xsl:choose>

          <xsl:when test="name()='track'">
             <xsl:if test="@local">
            <xsl:attribute name="xlink:href">

            <xsl:value-of select="@local" />
            </xsl:attribute>
            </xsl:if>
               <xsl:if test="@external">
            <xsl:attribute name="xhtml:href">

            <xsl:value-of select="@external" />
            </xsl:attribute>
            </xsl:if>
          </xsl:when>
        </xsl:choose>
      </xsl:for-each>

      </a> 
```

但是当我根据条件为“a”元素创建属性时引发异常。这在 XSLT 1.0 中不被接受，是否有任何方法可以根据 XSLT 1.0 中的某些条件为我的“a”元素显示属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T13:33:54.660

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xhtml="http://www.w3.org/1999/xhtml"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:my="my:my" exclude-result-prefixes="my">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <my:mappings>
  <map from="external" to="xhtml"/>
  <map from="local" to="xlink"/>
 </my:mappings>

 <xsl:variable name="vMaps" select="document('')/*/my:mappings/*"/>
 <xsl:variable name="vNamespaces" select="document('')/*/namespace::*"/>

 <xsl:template match="/*">
   <t><xsl:apply-templates/></t>
 </xsl:template>

 <xsl:template match="track">
     <xsl:element name="a"
       namespace="{$vNamespaces[name()=$vMaps[@from=name(current()/@*)]/@to]}">
       <xsl:apply-templates select="node()|@*"/>
   </xsl:element>
 </xsl:template>

 <xsl:template match="@*">
  <xsl:attribute name="{$vMaps[@from=name(current())]/@to}:href"
    namespace="{$vNamespaces[name()=$vMaps[@from=name(current())]/@to]}">
    <xsl:value-of select="."/>
  </xsl:attribute>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于此 XML 文档时**：

```
<t>
    <track external="http://mysite.com"  />
    <track  local="/myfolder" />
</t> 
```

**产生想要的正确结果：**

```
<t xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:xlink="http://www.w3.org/1999/xlink">
   <a xmlns="http://www.w3.org/1999/xhtml" xhtml:href="http://mysite.com"/>
   <a xmlns="http://www.w3.org/1999/xlink" xlink:href="/myfolder"/>
</t> 
```

**请注意**此解决方案具有一些独特的功能，例如：

1.  没有使用条件指令，因此代码更简单，更不容易出错。

2.  使用纯“推”式。

3.  产生了确切想要的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T12:41:26.923

没有什么可以阻止您在 XSLT 1.0 中有条件地添加属性。顺便说一句，在 XSLT 中避免使用 for-each 并改用模板。`track`这是节点的专用模板。

```
<xsl:template match='track'>

    <a xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:xlink="http://www.w3.org/1999/xlink">
        <xsl:if test="@local">
            <xsl:attribute name="xlink:href">
                    <xsl:value-of select="@local" />
            </xsl:attribute>
        </xsl:if>
        <xsl:if test="@external">
            <xsl:attribute name="xhtml:href">
                <xsl:value-of select="@external" />
            </xsl:attribute>
        </xsl:if>
    </a>

</xsl:template> 
```

不过，正如 Tim C 所提到的，更好的模式是通过不同的模板处理不同类型的传入属性。最重要的是，这更干净，因为您不会陷入条件块中。

```
<xsl:template match='track'>
    <a><xsl:apply-templates select='@*' /></a>
</xsl:template>

<xsl:template match='@local' xmlns:xlink="http://www.w3.org/1999/xlink">
    <xsl:attribute name="xlink:href">
            <xsl:value-of select="." />
    </xsl:attribute>
</xsl:template>

<xsl:template match='@external' xmlns:xhtml="http://www.w3.org/1999/xhtml">
    <xsl:attribute name="xhtml:href">
        <xsl:value-of select="." />
    </xsl:attribute>
</xsl:template> 
```

[您可以在此 XMLPlayground](http://www.xmlplayground.com/F8yufF)中看到这两种方法的实际应用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T12:44:14.177

您可能应该使用模板匹配来匹配相关情况。首先，不要使用**xsl:for-each**使用**xsl:apply-templates**

```
<xsl:apply-templates select="*" /> 
```

然后有单独的模板来匹配是否有**本地**或**外部**属性

```
<xsl:template match="track[@external]">
    <a xhtml:href="{@external}" />
</xsl:template>

<xsl:template match="track[@local]">
    <a xlink:href="{@local}" />
</xsl:template> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:xlink="http://www.w3.org/">
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="album">
        <p>
        <xsl:apply-templates select="*" />
        </p>
    </xsl:template>

    <xsl:template match="track[@external]">
        <a xhtml:href="{@external}" />
    </xsl:template>

    <xsl:template match="track[@local]">
        <a xlink:href="{@local}" />
    </xsl:template>
</xsl:stylesheet> 
```

应用于以下 XSLT 时

```
<album>
   <track external="http://mysite.com"/>
   <track local="/myfolder"/>
</album> 
```

以下是输出

```
<p xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:xlink="http://www.w3.org/">
   <a xhtml:href="http://mysite.com" />
   <a xlink:href="/myfolder" />
</p> 
```

# asp.net-mvc - ASP MVC 中的“@”是什么意思/做什么？

> ID：11310940
> 
> 赞同：4
> 
> 时间：2012-07-03T12:30:31.717
> 
> 标签：asp.net-mvc

我知道这是一个简单的问题，但我是 ASP MVC 的新手，在任何地方都找不到答案——我到处看到的“@”是什么？例子：

```
@{
    ViewBag.Title = "Welcome";
}

<h2>Welcome</h2>

<ul> 
   @for (int i=0; i < ViewBag.NumTimes; i++) { 
      <li>@ViewBag.Message</li> 
   } 
</ul> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T12:33:56.310

@ 是 Razor 引擎的语法元素，在 ASP.NET MVC 3 中使用。您的代码将显示不时出现的文本`ViewBag.Message` `ViewBag.NumTimes`。

ViewBag 属性是动态的，可以从控制器中填充。

看看[http://haacked.com/archive/2011/01/06/razor-syntax-quick-reference.aspx](http://haacked.com/archive/2011/01/06/razor-syntax-quick-reference.aspx)到 Razor 语法

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T12:35:06.343

可以说，它是在代码和 HTML 之间“切换”的符号。对于 Web 表单，使用 <% %> 语法。每当服务器遇到该符号时，它将执行代码（在您的情况下为 C#），并将其替换为 HTML。如果你曾经使用过 PHP，它等于

```
 <?php ?> 
```

标签。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T12:32:07.373

这是 Razor 视图引擎语法的一部分。您应该通过在搜索词中包含此内容来找到答案。从[MSDN 上的 Razor 页面](http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvc3razor.aspx)：

> '@' 是代码指令之前的魔术字符

# lwuit - 添加日历并在选择时突出显示日期

> ID：11310942
> 
> 赞同：0
> 
> 时间：2012-07-03T12:30:36.440
> 
> 标签：lwuit

我正在开发一个应用程序来查看表单中的日历，并且日历显示在屏幕上。但不突出选择，我使用的代码如下请帮助我

```
final Dialog dialogue = new Dialog();
                calendar = new Calendar();
                calendar.setFocus(true);
                /*calendar.setFocusable(true);
                calendar.setEnabled(true);*/
                calendar.setSelectedStyle(getSelectedStyle());

                calendar.getStyle().setBgColor(0xff0000);
                calendar.getStyle().setFont(FontUtils.PROPORTIONAL_FONT_PLAIN_SMALL);

                calendar.setMonthViewSelectedStyle(getSelectedStyle());
                calendar.setMonthViewUnSelectedStyle(getUnselectedStyle());

                calendar.getUnselectedStyle().setFont(FontUtils.PROPORTIONAL_FONT_PLAIN_SMALL);
                calendar.getSelectedStyle().setFont(FontUtils.PROPORTIONAL_FONT_BOLD_MEDIUM);
                calendar.getPressedStyle().setFont(FontUtils.PROPORTIONAL_FONT_BOLD_MEDIUM);
                calendar.getSelectedStyle().setFgColor(0xff0000);
                calendar.getPressedStyle().setFgColor(0xff0000);
                calendar.setUnselectedStyle(getSelectedStyle());
                dialogue.addComponent(calendar);
                dialogue.addCommand(new Command("Cancel") {

                    public void actionPerformed(ActionEvent evt) {
                        dialogue.dispose();
                    }
                });
                calendar.addFocusListener(new FocusListener() {

                    public void focusLost(Component paramComponent) {
                        // TODO Auto-generated method stub

                    }

                    public void focusGained(Component paramComponent) {
                        // TODO Auto-generated method stub
                        paramComponent.getSelectedStyle().setFgColor(0xff0000);
                        paramComponent.getPressedStyle().setFgColor(0xff0000);
                    }
                });
                calendar.addActionListener(new ActionListener() {

                    public void actionPerformed(ActionEvent ae) {
                        btnbirthday.setText(null);
                        btnbirthday.setText(formatingCalenderText(calendar.getDate().toString()));
                        dialogue.dispose();
                    }
                }); 
```

感谢和问候普拉纳夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:44:41.100

尝试使用这些 UIID 来改变这个组件的样式。CalendarDay、CalendarNavigation 和 CAlendarDay

# php - PHP 从 mysql_real_escape_string 更改为 PDO 准备语句

> ID：11310945
> 
> 赞同：1
> 
> 时间：2012-07-03T12:30:54.950
> 
> 标签：php, mysql

我目前`mysql_real_escape_string`在查询数据库时使用转义变量以防止 SQL 注入。例如，

```
 $keyword = mysql_real_escape_string($keyword);
        $guideline = mysql_real_escape_string($guideline);  
        mysql_query("INSERT INTO table1 VALUES('$keyword','$guideline')");

$get = mysql_query("SELECT * FROM table2 WHERE keyword='$keyword'");

  while($row = mysql_fetch_assoc($get)) {
  //code
  } 
```

在阅读了有关 SQL 注入预防的内容后，我读到这还不足以阻止 SQL 注入（现在要检查和纠正这么多代码），我应该使用 PDO 准备好的语句吗？我可以举一个例子来说明如何使用上面相同的 $variables 执行 PDO 准备语句吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T12:35:35.003

它真的很简单：

```
$db = new PDO($dsn, $user, $password);
$stmt = $db->prepare('INSERT INTO table1 VALUES(?,?)');
$stmt->execute(array($keyword, $guideline));
$stmt->close();

$stmt2 = $db->prepare('SELECT * FROM table2 WHERE keyword= ?');
$stmt->execute(array($keyword));
while(false !== ($row = $stmt->fetch())) {
   // do stuff
} 
```

请注意，您还可以使用命名占位符，这有助于使您的代码更具可读性，但更冗长：

```
$stmt2 = $db->prepare('SELECT * FROM table2 WHERE keyword= :keyword');
$stmt2->execute(array(':keyword' => $keyword)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T12:36:01.217

首先你必须创建一个 PDO 对象：

```
$dbh = new PDO("mysql:dbname=$dbname", $username, $password); 
```

然后有不同的方法可以将您的参数与您的查询相关联：

1.  作为一个论点`execute()`：

    ```
    $qry = $dbh->prepare("INSERT INTO table1 VALUES(?, ?)");
    $qry->execute(array($keyword, $guideline)); 
    ```

2.  通过绑定值（保留函数调用时分配的值）：

    ```
    $qry = $dbh->prepare("SELECT * FROM table2 WHERE keyword = ?");
    $qry->bindValue(1, $keyword);
    $qry->execute();

    while ($row = $qry->fetch()) {
      // code
    } 
    ```

3.  通过绑定参数（基础变量更改时更新）：

    ```
    $qry = $dbh->prepare("SELECT * FROM table2 WHERE keyword = ?");
    $qry->bindParam(1, $keyword);
    $qry->execute();

    while ($row = $qry->fetch()) {
      // code
    } 
    ```

您甚至可以使用命名占位符而不是匿名`?`：

```
$qry = $dbh->prepare("SELECT * FROM table2 WHERE keyword = :kw");
$qry->bindValue(":kw", $keyword); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T12:37:54.557

这个更有意义

```
<?php
$stmt = $dbh->prepare("INSERT INTO REGISTRY (name, value) VALUES (:name, :value)");
$stmt->bindParam(':name', $name);
$stmt->bindParam(':value', $value);

// insert one row
$name = 'one';
$value = 1;
$stmt->execute();

// insert another row with different values
$name = 'two';
$value = 2;
$stmt->execute();
?> 
```

[http://www.php.net/manual/en/pdo.prepared-statements.php](http://www.php.net/manual/en/pdo.prepared-statements.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T12:41:02.437

这就是我所做的，不是自称是忍者，而是已经做了一段时间了。

```
//connection
$conn = new PDO("mysql:host=$dbhost;dbname=$dbname",$dbuser,$dbpass);

//get Post data
$name = filter_input(INPUT_POST, $name, FILTER_SANITIZE_STRING);

//SQL
$SQL = $conn->prepare('SELECT * FROM users WHERE user_name=:name;');
$SQL->execute(array(':name' => $name));

//While Loop
while($names = $SQL->fetch(PDO::FETCH_OBJ){
 echo $names->user_email
} 
```

# c++ - 将一行 csv 文件拆分为 std::vector？

> ID：11310947
> 
> 赞同：4
> 
> 时间：2012-07-03T12:31:04.603
> 
> 标签：c++, csv, vector, std

我有一个函数可以逐行读取 CSV 文件。对于每一行，它将该行拆分为一个向量。执行此操作的代码是

```
 std::stringstream ss(sText);
    std::string item;

    while(std::getline(ss, item, ','))
    {
        m_vecFields.push_back(item);
    } 
```

这工作正常，除非它读取最后一个值为空白的行。例如，

```
text1,tex2, 
```

我希望它返回一个大小为 3 的向量，其中第三个值为空。但是，它只返回一个大小为 2 的向量。我该如何纠正这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T13:52:32.717

你可以用`boost::split`它来为你做这一切。
[http://www.boost.org/doc/libs/1_50_0/doc/html/string_algo/usage.html#id3207193](http://www.boost.org/doc/libs/1_50_0/doc/html/string_algo/usage.html#id3207193)

它具有您在一行中需要的行为。

## 示例 boost::split 代码

```
#include <iostream>
#include <vector>
#include <boost/algorithm/string.hpp>

using namespace std;

int main()
{
    vector<string> strs;

    boost::split(strs, "please split,this,csv,,line,", boost::is_any_of(","));

    for ( vector<string>::iterator it = strs.begin(); it < strs.end(); it++ )
        cout << "\"" << *it << "\"" << endl;

    return 0;
} 
```

## 结果

```
"please split"
"this"
"csv"
""
"line"
"" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T13:00:11.843

```
bool addEmptyLine = sText.back() == ',';

/* your code here */

if (addEmptyLine) m_vecFields.push_back(""); 
```

或者

```
sText += ',';     // text1, text2,,

/* your code */

assert(m_vecFields.size() == 3); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T13:32:21.057

您可以使用类似于此的功能：

```
template <class InIt, class OutIt>
void Split(InIt begin, InIt end, OutIt splits)
{
    InIt current = begin;
    while (begin != end)
    {
        if (*begin == ',')
        {
            *splits++ = std::string(current,begin);
            current = ++begin;
        }
        else
            ++begin;
    }
    *splits++ = std::string(current,begin);
} 
```

它将遍历字符串，每当遇到分隔符时，它将提取字符串并将其存储在拆分迭代器中。
有趣的部分是

*   当 current == 开始时，它将插入一个空字符串（测试用例：“text1,,tex2”）
*   最后一次插入保证总是有正确数量的元素。
    如果结尾有逗号，则会触发上一个项目符号点并添加一个空字符串，否则会将最后一个元素添加到向量中。

你可以像这样使用它：

```
std::stringstream ss(sText);
std::string item;
std::vector<std::string> m_vecFields;
while(std::getline(ss, item))
{
    Split(item.begin(), item.end(), std::back_inserter(m_vecFields));
}

std::for_each(m_vecFields.begin(), m_vecFields.end(), [](std::string& value)
{
    std::cout << value << std::endl;
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-05T14:45:55.680

[C++11 使得使用regex_token_iterator](http://www.cplusplus.com/reference/regex/regex_token_iterator/)处理转义逗号变得非常容易：

```
std::stringstream ss(sText);
std::string item;
const regex re{"((?:[^\\\\,]|\\\\.)*?)(?:,|$)"};

std::getline(ss, item)

m_vecFields.insert(m_vecFields.end(), sregex_token_iterator(item.begin(), item.end(), re, 1), sregex_token_iterator()); 
```

顺便说一句，如果您只是想`vector<string>`从 CSV构造一个，`string`例如`item`您可以这样做：

```
const regex re{"((?:[^\\\\,]|\\\\.)*?)(?:,|$)"};
vector<string> m_vecFields{sregex_token_iterator(item.begin(), item.end(), re, 1), sregex_token_iterator()}; 
```

[[现场示例](http://ideone.com/cyVOkZ)]

一些快速的解释`regex`可能是有序的。`(?:[^\\\\,]|\\\\.)`匹配转义字符或非`','`字符。（有关更多信息，请参见此处：[https](https://stackoverflow.com/a/7902016/2642059) ://stackoverflow.com/a/7902016/2642059 ）这`*?`意味着它不是贪婪匹配，因此它将在第*一次* `','`到达时停止。所有嵌套在一个捕获中，由最后一个参数 the `1`， to 选择`regex_token_iterator`。最后，`(?:,|$)`将匹配`','`-delimiter 或`string`.

# 为了使这个标准的 CSV 阅读器忽略空元素，可以更改正则表达式以仅匹配具有多个字符的字符串。

```
const regex re{"((?:[^\\\\,]|\\\\.)+?)(?:,|$)"}; 
```

请注意，`'+'`现在已经替换了`'*'`指示的 1 个或多个匹配字符。这将阻止它匹配以 .`item`结尾的字符串`','`。你可以在这里看到一个例子：http: [//ideone.com/W4n44W](http://ideone.com/W4n44W)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-22T16:17:39.910

解析 csv 文件的灵活解决方案：其中：

**source - CSV 文件的内容**

**分隔符 - CSV 分隔符，例如。',' ';'**

```
std::vector<std::string> csv_split(std::string source, char delimeter) {
    std::vector<std::string> ret;
    std::string word = "";
    int start = 0;

    bool inQuote = false;
    for(int i=0; i<source.size(); ++i){
        if(inQuote == false && source[i] == '"'){
            inQuote = true;
            continue;
        }
        if(inQuote == true && source[i] == '"'){
            if(source.size() > i && source[i+1] == '"'){
                ++i;
            } else {
                inQuote = false;
                continue;
            }
        }

        if(inQuote == false && source[i] == delimeter){
            ret.push_back(word);
            word = "";
        } else {
            word += source[i];
        }
    }
    ret.push_back(word);

    return ret;
} 
```

# jquery - 使用滚动单页网站

> ID：11310951
> 
> 赞同：2
> 
> 时间：2012-07-03T12:31:17.373
> 
> 标签：jquery, html

我正在开发一个单页网站，但`<a></a>`标签有问题。

我希望当用户单击 Div 时，他们会被带到页面的不同部分。目前我有`<a></a>`这样做的。

```
 '<a href="#divid">About</a>' 
```

css-tricks.com/examples/SmoothPageScroll/#two 这是我用来滚动页面的一个很好的例子

但是每次我将这些标签放在我的 div 中的图像周围时，所有 div click 属性都会停止工作。例子：

```
<div id="about-button" class="button">
    <a href="#about"><img src="images/menu-about.png"
                          alt="about" class="button"/></a>
</div> 
```

我可以说这是由于`a`标签位于 div 顶部而发生的。

我的问题是有没有办法让`<a>`标签位于或与 div 并排工作并且仍然有效？

或者如果没有办法做到这一点。我可以做的任何阅读或不使用''标签导航到页面特定部分的更好方法的示例

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:38:58.243

你可以尝试这样的事情：

```
$('a').click(function(e) {
   e.preventDefault();
   var scr = $('#target').offset().top; // top offset of the target element
    $('html, body').animate({scrollTop: scr}, 1000)
}) 
```

[演示](http://jsfiddle.net/UdK4h/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T13:23:07.780

与其尝试操纵 DOM 元素的工作方式，不如更改 jQuery 选择器更容易？[http://api.jquery.com/parent-selector/](http://api.jquery.com/parent-selector/)

# blackberry - 在黑莓应用程序中实例化一个给定 .class 文件的对象

> ID：11310956
> 
> 赞同：1
> 
> 时间：2012-07-03T12:31:28.403
> 
> 标签：blackberry, java-me, instantiation, .class-file

我正在编写一个黑莓应用程序 - 应用程序启动后，我需要从数据库中获取一个 .class 文件（或者可能是 .COD 文件之类的其他文件？）（我可能必须创建一个网页来获取文件）然后实例化它并调用它的方法......有人可以帮助我吗？请？！？

重点是让学生在手机上获取代码并查看方法会返回什么。老师会编写一个返回一些整数的简单编程方法。学生需要能够将该方法应用到应用程序中。他们可以看到代码并输入他们期望方法返回的内容。然后他们需要能够运行该方法，以便能够看到该方法返回什么......

基本上我希望能够对一些不在我的黑莓上的代码进行单元测试......

我看到了一个应用程序的广告，它做类似的事情......我该怎么做：.net for BlackBerry（C 和 VB.NET） 如果你正在学习 ASP.NET、C# 或 Visual Basic.NET，那么这个应用程序允许您在 BlackBerry® 上键入 .NET 代码，并在几秒钟内查看输出。这是试用 .NET 代码片段的绝佳方式，无需在 PC 上启动 Visual Studio。

使用此应用程序编写的代码存储在远程服务器上，因此可以从其他设备调用，因此可以与此应用程序的其他用户共享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:37:44.173

我认为您需要将应用程序二进制文件放在服务器上，以使您的学生能够通过 OTA 下载它们。（[http://blackberrystorm.wikidot.com/setup-blackberry-ota-applications](http://blackberrystorm.wikidot.com/setup-blackberry-ota-applications)）

然后，您可以使用全局事件在您的应用程序和其他应用程序之间进行通信。（[http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800332/800620/What_Is_-_Global_Events_and_Global_Event_Listeners.html?nodeid=800527&vernum=0](http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800332/800620/What_Is_-_Global_Events_and_Global_Event_Listeners.html?nodeid=800527&vernum=0)）

但是在设备上实时访问其他应用程序的方法..，我认为这是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T17:06:19.683

BlackBerry JVM 不支持反射，但是如果应用程序都扩展了在基础应用程序中定义的类，并且您可以在下载的软件中派生该类的完全限定名称，您可以执行类似的操作：

```
abstract public class MyDemoObject {
    abstract public void myDemoMethod();
} 
```

然后：

```
Class class = Class.forName("org.some.sample.ClassName");
MyDemoObject obj = (MyDemoObject)class.newInstance();
obj.myDemoMethod(); 
```

在下载的应用程序中：

```
package org.some.sample

public class ClassName extends MyDemoObject {
    public void myDemoMethod() {
        System.out.println("package org.some.sample.myDemoMethod()");
    }
} 
```

有点笨重，但它确实有效。myDemoMethod 将在基本应用程序的上下文中运行，这对于学习 BlackBerry OS 编程来说是不错的一课。

# c# - 如何使用 post-request 从 windows-forms 打开网站？

> ID：11310957
> 
> 赞同：2
> 
> 时间：2012-07-03T12:31:29.183
> 
> 标签：c#, winforms, forms, post

我正在写winforms applcation，c#。我想向网站发送后请求并让它在浏览器中打开，因为我使用网站使用表单加载一些文件。我知道 WebRequest 等等，我知道如何在不打开浏览器的情况下发送请求和获取响应。但是这样的事情怎么办？

upd ：真的没关系，它是winforms，它也可能只是控制台应用程序

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-07-03T12:33:08.433

使用win表单浏览器控件

# android - Eclipse JUNO 无法启动

> ID：11310970
> 
> 赞同：97
> 
> 时间：2012-07-03T12:31:58.077
> 
> 标签：android, eclipse, eclipse-plugin, crash-reports, eclipse-juno

当我启动 Eclipse 时，它​​没有启动。
出现错误并告诉我查看日志文件。
“查看日志文件：/Users/max/work/projects/.metadata/.log”

操作系统：MacOS 10.7.4
Eclipse：4.2 Juno
ADT：20

我的旧版本 Eclipse 启动时没有问题。

```
!SESSION 2012-07-03 16:22:48.261 -----------------------------------------------
eclipse.buildId=I20120608-1400
java.version=1.6.0_33
java.vendor=Apple Inc.
BootLoader constants: OS=macosx, ARCH=x86_64, WS=cocoa, NL=ru_RU
Framework arguments:  -product org.eclipse.epp.package.java.product -keyring /Users/max/.eclipse_keyring -showlocation
Command-line arguments:  -os macosx -ws cocoa -arch x86_64 -product org.eclipse.epp.package.java.product -keyring /Users/max/.eclipse_keyring -showlocation

!ENTRY org.eclipse.core.resources 2 10035 2012-07-03 16:22:50.101
!MESSAGE The workspace exited with unsaved changes in the previous session; refreshing workspace to recover changes.

!ENTRY org.eclipse.equinox.preferences 4 2 2012-07-03 16:22:56.457
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.equinox.preferences".
!STACK 0
java.lang.ExceptionInInitializerError
at org.eclipse.wb.internal.core.preferences.PreferenceInitializer.initializeDefaultPreferences(    PreferenceInitializer.java:50)
at org.eclipse.core.internal.preferences.PreferenceServiceRegistryHelper$1.run(PreferenceServiceRegistryHelper.java:300)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.core.internal.preferences.PreferenceServiceRegistryHelper.runInitializer(PreferenceServiceRegistryHelper.java:303)
at org.eclipse.core.internal.preferences.PreferenceServiceRegistryHelper.applyRuntimeDefaults(PreferenceServiceRegistryHelper.java:131)
at org.eclipse.core.internal.preferences.PreferencesService.applyRuntimeDefaults(PreferencesService.java:368)
at org.eclipse.core.internal.preferences.DefaultPreferences.applyRuntimeDefaults(DefaultPreferences.java:166)
at org.eclipse.core.internal.preferences.DefaultPreferences.load(DefaultPreferences.java:237)
at org.eclipse.core.internal.preferences.EclipsePreferences.create(EclipsePreferences.java:410)
at org.eclipse.core.internal.preferences.EclipsePreferences.internalNode(EclipsePreferences.java:663)
at org.eclipse.core.internal.preferences.EclipsePreferences.node(EclipsePreferences.java:805)
at org.eclipse.core.internal.preferences.AbstractScope.getNode(AbstractScope.java:38)
at org.eclipse.core.runtime.preferences.DefaultScope.getNode(DefaultScope.java:76)
at org.eclipse.ui.preferences.ScopedPreferenceStore.getDefaultPreferences(ScopedPreferenceStore.java:250)
at org.eclipse.ui.preferences.ScopedPreferenceStore.getPreferenceNodes(ScopedPreferenceStore.java:285)
at org.eclipse.ui.preferences.ScopedPreferenceStore.internalGet(ScopedPreferenceStore.java:475)
at org.eclipse.ui.preferences.ScopedPreferenceStore.getBoolean(ScopedPreferenceStore.java:387)
at org.eclipse.wb.internal.core.editor.describer.JavaSourceUiDescriber.isGUISource(JavaSourceUiDescriber.java:65)
at org.eclipse.wb.internal.core.editor.describer.JavaSourceUiDescriber.describe(JavaSourceUiDescriber.java:52)
at org.eclipse.core.internal.content.ContentTypeCatalog.describe(ContentTypeCatalog.java:218)
at org.eclipse.core.internal.content.ContentTypeCatalog.collectMatchingByContents(ContentTypeCatalog.java:190)
at org.eclipse.core.internal.content.ContentTypeCatalog.internalFindContentTypesFor(ContentTypeCatalog.java:403)
at org.eclipse.core.internal.content.ContentTypeCatalog.internalFindContentTypesFor(ContentTypeCatalog.java:450)
at org.eclipse.core.internal.content.ContentTypeCatalog.getDescriptionFor(ContentTypeCatalog.java:346)
at org.eclipse.core.internal.content.ContentTypeCatalog.getDescriptionFor(ContentTypeCatalog.java:360)
at org.eclipse.core.internal.content.ContentTypeMatcher.getDescriptionFor(ContentTypeMatcher.java:86)
at org.eclipse.core.internal.resources.ContentDescriptionManager.readDescription(ContentDescriptionManager.java:445)
at org.eclipse.core.internal.resources.ContentDescriptionManager.getDescriptionFor(ContentDescriptionManager.java:355)
at org.eclipse.core.internal.resources.File.internalGetCharset(File.java:246)
at org.eclipse.core.internal.resources.File.getCharset(File.java:207)
at org.eclipse.core.internal.resources.File.getCharset(File.java:194)
at org.eclipse.jdt.internal.core.util.Util.getResourceContentsAsCharArray(Util.java:1156)
at org.eclipse.jdt.internal.core.builder.SourceFile.getContents(SourceFile.java:79)
at org.eclipse.jdt.internal.compiler.ReadManager.run(ReadManager.java:173)
at java.lang.Thread.run(Thread.java:680)
Caused by: org.eclipse.swt.SWTException: Invalid thread access
at org.eclipse.swt.SWT.error(SWT.java:4361)
at org.eclipse.swt.SWT.error(SWT.java:4276)
at org.eclipse.swt.SWT.error(SWT.java:4247)
at org.eclipse.swt.widgets.Display.error(Display.java:1068)
at org.eclipse.swt.widgets.Display.checkDevice(Display.java:621)
at org.eclipse.swt.graphics.Device.getSystemFont(Device.java:476)
at org.eclipse.jface.preference.PreferenceConverter.<clinit>(PreferenceConverter.java:84)
... 35 more

!ENTRY org.eclipse.osgi 4 0 2012-07-03 16:22:59.978
!MESSAGE Application error
!STACK 1
java.lang.NoClassDefFoundError: Could not initialize class org.eclipse.jface.preference.PreferenceConverter
at org.eclipse.ui.internal.themes.ThemeElementHelper.installFont(ThemeElementHelper.java:103)
at org.eclipse.ui.internal.themes.ThemeElementHelper.populateRegistry(ThemeElementHelper.java:59)
at org.eclipse.ui.internal.Workbench$27.runWithException(Workbench.java:1550)
at org.eclipse.ui.internal.StartupThreading$StartupRunnable.run(StartupThreading.java:31)
at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135)
at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3944)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3621)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2478)
at org.eclipse.ui.internal.Workbench.access$7(Workbench.java:2386)
at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:583)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:540)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
at org.eclipse.equinox.launcher.Main.run(Main.java:1438)

!ENTRY org.eclipse.core.jobs 4 2 2012-07-03 16:23:05.824
!MESSAGE An internal error occurred during: "Android Library Update".
!STACK 0
java.lang.NullPointerException
at com.android.ide.eclipse.adt.AdtPlugin.getOutStream(AdtPlugin.java:1714)
at com.android.ide.eclipse.adt.internal.project.LibraryClasspathContainerInitializer.allocateLibraryContainer(LibraryClasspathContainerInitializer.java:264)
at com.android.ide.eclipse.adt.internal.project.LibraryClasspathContainerInitializer.updateProjects(LibraryClasspathContainerInitializer.java:81)
at com.android.ide.eclipse.adt.internal.sdk.Sdk$3$1.run(Sdk.java:1197)
at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)

!ENTRY com.android.ide.eclipse.adt 4 0 2012-07-03 16:23:05.998
!MESSAGE parseSdkContent failed
!STACK 0
java.lang.NullPointerException
at com.android.ide.eclipse.adt.AdtPlugin.getDisplay(AdtPlugin.java:334)
at com.android.ide.eclipse.adt.AdtPlugin$7.run(AdtPlugin.java:1422)
at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)

!ENTRY org.eclipse.core.jobs 2 2 2012-07-03 16:23:06.504
!MESSAGE Job found still running after platform shutdown.  Jobs should be canceled by the plugin that scheduled them during shutdown: com.android.ide.eclipse.adt.internal.sdk.Sdk$5

!ENTRY org.eclipse.core.jobs 2 2 2012-07-03 16:23:06.505
!MESSAGE Job found still running after platform shutdown.  Jobs should be canceled by the plugin that scheduled them during shutdown: com.android.ide.eclipse.adt.internal.sdk.Sdk$5 
```

* * *

## 回答 #1

> 赞同：203
> 
> 时间：2012-07-03T13:14:14.123

为我解决了这个问题：

```
rm YOUR_WORKSPACE/.metadata/.plugins/org.eclipse.core.resources/.snap 
```

信用： [http ://www.metod.si/job-found-still-running-after-platform-shutdown-eclipse/](http://www.metod.si/job-found-still-running-after-platform-shutdown-eclipse/)

* * *

## 回答 #2

> 赞同：158
> 
> 时间：2012-08-20T21:35:49.193

删除 .metadata/.plugins/org.eclipse.e4.workbench/workbench.xmi 解决了我的问题。

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2012-11-29T06:36:12.990

我必须按照其他答案中的建议删除以下两个文件才能解决我的问题，

*   `.metadata/.plugins/org.eclipse.core.resources/.snap`
*   `.metadata/.plugins/org.eclipse.e4.workbench/workbench.xmi`

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2013-04-03T18:51:57.417

使用 -clearPersistedState 开关从命令行运行 eclipse 为我修复了它：

```
$> eclipse -clearPersistedState 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-08-02T16:48:48.600

不幸的是，它对我不起作用，因为我没有*.snap*下

```
<home>/.metadata/.plugins/org.eclipse.core.resources 
```

我最终得到了以下序列：

```
cd <home>/.metadata
mv .plugins .plugins.failing
<start eclipse>
<exit eclipse>  <--- builds fresh .plugins
cp -r .plugins.failing/org.eclipse.core.resources .plugins/org.eclipse.core.resources  <-- restores existing projects 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-11-27T20:18:13.673

以下是帮助我解决问题的方法：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=389738](https://bugs.eclipse.org/bugs/show_bug.cgi?id=389738)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-06T18:04:29.050

我遇到了类似的问题，但在 Win7 - 64 上。删除 .snap 文件允许我进入 Eclipse，然后我必须通过 File-->Refresh 刷新我的资源文件。

快照文件位于：YOUR_PROJECT_DIR/.metadata/.plugins/org.eclipse.core.resources/.snap

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-11-14T08:55:41.513

我在 Windows 上两次遇到同样的问题：由于 ADT 插件，Eclipse 没有启动。

我使用 CCleaner 删除了临时文件并清理了注册表。然后它起作用了。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-24T11:56:14.437

我不得不重新安装我的 mercurial 插件，这对我来说是根本问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-09-18T12:40:28.227

和我一起，装载机在 MyLyn 上冻结了。在某处发现另一个问题，尝试删除工作区目录下的 .metadata/.mylyn 内容，让我能够再次加载工作区

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-10-09T13:31:45.253

如果您查看 eclipse.app 内容检查是否还有 eclipse.ini 发现某些更新会破坏此文件...

这就是我系统上的原因，从新版本中复制了它，它又可以工作了......

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-01-10T00:03:57.167

我刚刚重新启动了系统，它开始正常工作。

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2013-11-27T00:06:28.703

rm -f ~/.eclipse/ 对我有用！

# sql - 在 PL/SQL 存储过程中将多个变量传递给 WHERE 条件

> ID：11310975
> 
> 赞同：2
> 
> 时间：2012-07-03T12:32:15.923
> 
> 标签：sql, stored-procedures, plsql

传递参数时执行此代码块时出现问题。参数*rf*是要输入到 WHERE 子句中的变量列表。要输入的变量数量不是静态的。

```
create or replace
procedure test_pl(rf in varchar2)
IS 
counter number;

BEGIN
  select count(*) into counter from test_pl_imp where column_name in (rf);
  dbms_output.put_line(counter);
END; 
```

执行代码如下：

```
declare 
inparam varchar2(20) := 'xyz,ran,dom';
begin
goku.test_pl(inparam);
end;
/ 
```

我希望 WHERE 条件执行如下：

```
where column_name in ('xyz','ran','dom'); 
```

但它被视为`xyz,ran,dom`一个字符串本身被执行。

有没有办法实现它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T12:34:06.773

您可以分解字符串，或者最简单的方法是使用 INSTR。

```
rf := ',' || rf || ',';

SELECT
    COUNT(*)
INTO
    counter
FROM
    test_pl_imp
WHERE
    INSTR(rf, ',' || column_name || ',') > 0; 
```

如果您可以选择稍微重新设计它，我认为采用字符串数组并将其转换为 TABLE 以便您可以加入 test_pl_imp 将是一种更简洁的设计。

这可以按如下方式完成：

```
DECLARE
    l_array   goku.t_type := goku.t_type();
BEGIN
    l_array.extend(3);
    l_array(1) := 'xzy';
    l_array(2) := 'abc';
    l_array(2) := '123';

    goku.test_pl(l_array);
END; 
```

然后您的包规范将包括以下内容，因为您希望上述调用的类型和过程是公开的：

```
CREATE OR REPLACE PACKAGE goku
    TYPE r_type IS RECORD (
        search_term    VARCHAR2 (30)
    );

    TYPE t_type IS TABLE OF r_type;

    PROCEDURE test_pl(l_array IN t_type);
END goku; 
```

您的包裹体将类似于以下内容：

```
CREATE OR REPLACE PACKAGE BODY goku
    PROCEDURE test_pl(l_array IN t_type) IS
        v_counter NUMBER;
    BEGIN

        SELECT
            COUNT(tpi.*)
        INTO
            v_counter
        FROM
            test_pl_imp tpi
            , TABLE( CAST(l_array as r_type)) la
        WHERE
            tpi.column_name = la.search_term;

        DBMS_OUTPUT.PUT_LINE('Count :' || v_counter);
    END;
END goku; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T12:38:15.430

你可以做：

1.  将存储的 proc 查询转换为动态查询，并将值作为 '''abc''、''etc''' 传递
2.  实现一个拆分函数将字符串拆分为一个临时表并对其进行连接/查询。
3.  您可以使用 INSTR，但有一个技巧。

我在我工作的地方写了一个拆分函数，它非常适合这样的东西。

* * *

INSTR 技巧：您当前将逗号作为分隔符传递，这就是我在“技巧”中使用的，但您也可以使用分号。基本上，假设您想在 'abc,def' 中查找所有内容。您填充字符串以使其看起来像'，abc，def'，然后填充正在搜索的值，使其看起来像'，abc，'。这样，“abctest”和“testabc”就找不到了，而“abc”却找到了。

```
SELECT 
    COUNT(*) 
INTO 
    counter 
FROM 
    test_pl_imp 
WHERE 
    INSTR(',' + rf + ',', ',' + column_name + ',') > 0; 
```

抱歉，如果我对 PL/SQL 不够了解……我认为 + 符号必须是 ||，但我认为您明白了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T12:40:44.027

您将参数声明为单个字符串（varchar），然后它将被视为唯一字符串。您可以尝试拆分参数： http: [//www.codeproject.com/Articles/7938/SQL-User-Defined-Function-to-Parse-a-Delimited-Str](http://www.codeproject.com/Articles/7938/SQL-User-Defined-Function-to-Parse-a-Delimited-Str)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T13:20:49.970

您可以拆分输入字符串并使用临时表或表对象。这将允许优化器在您的列上使用索引。不要使用没有绑定的动态 SQL（出于安全和性能原因）。

这是一个带有表格对象的示例。设置（10g，因为它使用[REGEXP_SUBSTR](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions150.htm#SQLRF06303)）：

```
CREATE TYPE tab_varchar2 IS TABLE OF VARCHAR2(100);-- longest string
/
CREATE OR REPLACE PROCEDURE test_pl(rf IN VARCHAR2) IS
   lt tab_varchar2;
   counter NUMBER;
BEGIN
   -- split parameter
   SELECT rtrim(regexp_substr(str, '[^,]*,', 1, level), ',')
     BULK COLLECT INTO lt
     FROM (SELECT rf || ',' str FROM dual)
  CONNECT BY level <= length(str) - length(replace(str, ',', ''));
   -- your query
   SELECT count(*)
     INTO counter
     FROM test_pl_imp
    WHERE column_name IN (SELECT column_value FROM TABLE(lt));
   dbms_output.put_line(counter);
END;
/ 
```

# javascript - 如何将 DIV 文本转换为 HTML5 画布绘图

> ID：11310982
> 
> 赞同：1
> 
> 时间：2012-07-03T12:32:36.133
> 
> 标签：javascript, html, canvas

我正在开发一个需要将 HTML“工作区”（固定大小和包含文本和/或图像的绝对定位对象）转换为 HTML5 画布绘图的应用程序。由于画布绘图方法的实现，例如 .fillText()，我很难将元素的文本添加到画布中。也就是说，我无法让画布上的文本与原始工作区对象中的文本大小相同，尽管我正在检索所有使用的 CSS 规则：

```
c.font = obj.title.fontStyle+' '+obj.title.fontWeight+' '+obj.title.fontSize+'px + obj.title.fontFamily;

// c = drawing context 
```

顺便说一句，元素的字体大小以像素为单位。

该应用程序位于[http://picselbocs.com/projects/goalcandy/](http://picselbocs.com/projects/goalcandy/)。您需要使用“demo@demo.com”作为电子邮件输入和“demo”作为密码登录，然后从左侧添加一个具有标题的元素到工作区，然后按“转换为 PNG” . 您会注意到文本大小如何增加。

我该如何解决这个令人沮丧的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:39:12.047

这个问题听起来很有趣，但实际上完全是白痴！因此，一旦检测到问题并且解决方案在 2 秒内（字面意思）适用，答案就非常简单。问题不是跨浏览器问题，而是 Chrome 的缩放功能。我之前放大了我打开应用程序的窗口，但不知道它，这反过来又使画布绘图变得模糊。所以解决方案：缩小！ *%#$%#* $@~!@

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:06:59.273

这是画布绘图算法的一个限制，看起来你真的不能轻易解决这个问题。

请参阅此问题以供参考：[HTML5 的画布元素上的子像素抗锯齿文本](https://stackoverflow.com/questions/4550926/subpixel-anti-aliased-text-on-html5s-canvas-element)

# c++ - 部分排序一个数组，其中一些数字已经排序

> ID：11310991
> 
> 赞同：3
> 
> 时间：2012-07-03T12:33:01.677
> 
> 标签：c++, algorithm, sorting

我必须按降序对数组进行部分排序，其中一些数字可能已经排序。

他们是可以有效地做到这一点的任何功能还是任何有效的算法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T12:34:17.607

[**Timsort**](http://en.wikipedia.org/wiki/Timsort)是专门为这种情况设计的。

> Timsort 是一种混合排序算法，源自合并排序和插入排序，旨在在多种现实世界数据上表现良好。它是由 Tim Peters 于 2002 年发明的，用于 Python 编程语言。该算法找到已经排序的数据子集，并使用这些子集更有效地对数据进行排序。

另一种选择是[**Smoothsort**](http://en.wikipedia.org/wiki/Smoothsort)，它也被设计为利用部分排序的数据。

> 它是由 Edsger Dijkstra 在 1981 年开发的 heapsort 的变体。与 heapsort 一样，smoothsort 的上限是 O( *n* log *n* )。平滑排序的优点是，如果输入已经排序到某种程度，它会更接近 O( *n* ) 时间，而无论初始排序状态如何，*堆*排序平均 O( *nlogn )。*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:43:14.580

如果您在循环内进行排序，请考虑使用 treap 或红黑树。Treaps 平均速度快（但标准差较大），红黑树的操作时间可变性低（平均操作时间不如，但操作时间标准差低）。IOW，对于批处理应用程序使用treap，对于交互式应用程序，您可能需要一个红黑树，这样您的用户就不必偶尔等待很长时间。

如果你不是在循环中排序，那么 Timsort。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T13:56:05.490

`std::sort`一般来说。

尽管确切的实现细节是实现的质量，但良好的实现`std::sort`应该利用数据的部分排序特性。`libc++`例如，确实如此。

请注意，如果您知道排序的部分在哪里，您可以使用`std::inplace_merge`. 例如，假设这`v`是一个`vector`[1, 7) 被排序并且 [7, 10) 也被排序的，那么你可以使用`std::inplace_merge(v.begin() + 1, v.begin() + 7, v.begin() + 10)`但是这更容易出错。

至于结果的顺序：如果`<`不适合您，请随时提供您自己的比较功能。*

# c# - 从数据上下文获取存储过程：Linq 到 SQl

> ID：11310996
> 
> 赞同：3
> 
> 时间：2012-07-03T12:33:15.143
> 
> 标签：c#, .net, linq-to-sql, tdd

我在 SQL Server 中有一个名为 ParseXML 的存储过程。我有一个使用 LINQ to SQL 的存储库模式。我需要从存储库层调用存储过程。与**GetTable**方法不同，我们没有用于数据上下文的**GetStoredProcedure方法。**在这种情况下我们如何调用存储过程呢？

数据库代码

```
[global::System.Data.Linq.Mapping.FunctionAttribute(Name="dbo.ParseXML")]

    public ISingleResult<ParseXMLResult> ParseXML([global::System.Data.Linq.Mapping.ParameterAttribute(Name="InputXML", DbType="Xml")] System.Xml.Linq.XElement inputXML)
    {
        IExecuteResult result = this.ExecuteMethodCall(this, ((MethodInfo)(MethodInfo.GetCurrentMethod())), inputXML);
        return ((ISingleResult<ParseXMLResult>)(result.ReturnValue));
    } 
```

存储层

```
namespace RepositoryLayer
{
public interface ILijosBankRepository
{
    System.Data.Linq.DataContext Context { get; set; }
    List<DBML_Project.BankAccount> GetAllAccountsForUser(int userID);
    void UpdateBankAccountUsingStoredProcedure();

}

public class LijosSimpleBankRepository : ILijosBankRepository
{
    public System.Data.Linq.DataContext Context
    {
        get;
        set;
    }

    public List<DBML_Project.BankAccount> GetAllAccountsForUser(int userID)
    {
        IQueryable<DBML_Project.BankAccount> queryResultEntities = Context.GetTable<DBML_Project.BankAccount>().Where(p => p.AccountOwnerID == userID);
        return queryResultEntities.ToList();
    }

    public virtual void UpdateBankAccountUsingStoredProcedure()
    {
        //Context.GetStroedProcedures();
    }

}

} 
```

参考：

1.  [多个 UnitOfWorks、ISession 和存储库](https://stackoverflow.com/questions/6201960/multiple-unitofworks-isession-and-repositories)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:48:04.917

You can do something like this, calling the method using reflection:

```
var inputXML = GetXML(); 

var method = Context.GetType().GetMethod("ParseXML");

if(method == null) throw new InvalidOperationException("Defined DataContext does not have method ParseXML");

var result = method.Invoke(Context, new object[]{ inputXML }); 
```

If you are using c# 4.0, you can do:

```
var inputXML = GetXML(); 

dynamic dynamicContext = Context;

var result = (ISingleResult<ParseXMLResult>)dynamicContext.ParseXML(inputXML); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T21:10:48.110

让存储库的任何调用者知道特定方法调用是否会导致从文件、SQL 语句、存储过程中读取文本，甚至只是花园侏儒在文本终端上输入结果，这对 SOC 来说是一个相当大的突破。

`Context`为此，让您的财产公开无济于事。使用存储库的全部意义在于使消费者免受持久性问题的影响！

由于您似乎非常需要避免使用自定义类型`Context`，因此您可以省去很多麻烦，只需发出一个直接的老式 SQL 语句来执行您的存储过程。

考虑重构您的界面和逻辑，使其看起来更像这样：

```
public interface ILijosBankRepository
{
    List<DBML_Project.BankAccount> GetAllAccountsForUser(int userID);
    void UpdateBankAccount(/* params go here */);
    /* ...other query methods, etc... */

}
public class LijosBankRepository : ILijosBankRepository
{
     private readonly DataContext context { get; set;}
     public LijosBankRepository(DataContext ctx) { ... }

     public void UpdateBankAccount(string inputXml)
     {
          context.ExecuteCommand("ParseXML", inputXml);
     }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T12:58:32.870

C# 包装器是自定义`DataCcontext`派生类的一部分。你会这样打电话：

```
public virtual void UpdateBankAccountUsingStoredProcedure()
{
    var results = Context.ParseXML(...);
    ...
} 
```

# javascript - Javascript 树结构的 HTML 菜单 - 选择问题

> ID：11310997
> 
> 赞同：0
> 
> 时间：2012-07-03T12:33:24.277
> 
> 标签：javascript, jquery, html

我这里有一个情况：

这是我的菜单；它基本上是一个用于显示项目列表的 ul li 层次结构。

```
<ul id="treeMenu">

        <li id="Sites" class="contentContainer">
            <img src="images/plus.PNG">
            <input type="checkbox" value="Nichols San Juan Capistrano" id="Nichols San Juan Capistrano">Nichols San Juan Capistrano
            <br>

        <ul style="display: none" id="site1"> 

        <li id="Department" class="contentContainer">
            <img src="images/plus.PNG">
            <input type="checkbox" value="Endocrine Metabolism" id="Endocrine Metabolism">Endocrine Metabolism
            <br>

        <ul style="display: none" id="dept1">

            <li id="Instruments" class="contentContainer">
                <input type="checkbox" value="EZEMBN1" onclick="loadXMLInstrDoc(this)" id="EZEMBN1" name="instr">EZEMBN1
                <br>
            </li>

            <li id="Instruments" class="contentContainer">
                <input type="checkbox" value="EZEMTripti1" onclick="loadXMLInstrDoc(this)" id="EZEMTripti1" name="instr">EZEMTripti1
                <br>
            </li>

            <li id="Instruments" class="contentContainer">
                <input type="checkbox" value="EZEMTripti2" onclick="loadXMLInstrDoc(this)" id="EZEMTripti2" name="instr">EZEMTripti2
                <br>
            </li>

            <li id="Instruments" class="contentContainer">
                <input type="checkbox" value="EZEMTripti3" onclick="loadXMLInstrDoc(this)" id="EZEMTripti3" name="instr">EZEMTripti3
                <br>
            </li>

            <li id="Instruments" class="contentContainer">
                <input type="checkbox" value="EZEMTripti4" onclick="loadXMLInstrDoc(this)" id="EZEMTripti4" name="instr">EZEMTripti4
                <br>
            </li>

            <li id="Instruments" class="contentContainer">
                <input type="checkbox" value="EZEMMini1" onclick="loadXMLInstrDoc(this)" id="EZEMMini1" name="instr">EZEMMini1
                <br>
            </li>

            <li id="Instruments" class="contentContainer">
                <input type="checkbox" value="EZEMTripti5" onclick="loadXMLInstrDoc(this)" id="EZEMTripti5" name="instr">EZEMTripti5
                <br>
            </li>

            <li id="Instruments" class="contentContainer">
                <input type="checkbox" value="EZEMParul1" onclick="loadXMLInstrDoc(this)" id="EZEMParul1" name="instr">EZEMParul1
                <br>
            </li>

            <li id="Instruments" class="contentContainer">
                <input type="checkbox" value="EZEMPooja1" onclick="loadXMLInstrDoc(this)" id="EZEMPooja1" name="instr">EZEMPooja1
                <br>
            </li>

            <li id="Instruments" class="contentContainer">
                <input type="checkbox" value="EZEMRicha1" onclick="loadXMLInstrDoc(this)" id="EZEMRicha1" name="instr">EZEMRicha1
                <br>
            </li>

            <li id="Instruments" class="contentContainer">
                <input type="checkbox" value="EZEMPrahalad1" onclick="loadXMLInstrDoc(this)" id="EZEMPrahalad1" name="instr">EZEMPrahalad1
                <br>
            </li>

            <li id="Instruments" class="contentContainer">
                <input type="checkbox" value="Abhijeet123" onclick="loadXMLInstrDoc(this)" id="Abhijeet123" name="instr">Abhijeet123
                <br>
            </li>

        </ul>
        </li>

        </ul>
    </li>

        <li id="Sites" class="contentContainer">
            <img src="images/plus.PNG">
            <input type="checkbox" value="Nichols Valencia" id="Nichols Valencia">Nichols Valencia
            <br>

        <ul style="display: none" id="site2"> 

        <li id="Department" class="contentContainer">
            <img src="images/plus.PNG">
            <input type="checkbox" value="Automated Lab" id="Automated Lab">Automated Lab
            <br>

        <ul style="display: none" id="dept2">

            <li id="Instruments" class="contentContainer">
                <input type="checkbox" value="NEPH4" onclick="loadXMLInstrDoc(this)" id="NEPH4" name="instr">NEPH4
                <br>
            </li>

            <li id="Instruments" class="contentContainer">
                <input type="checkbox" value="SLIALTripti1" onclick="loadXMLInstrDoc(this)" id="SLIALTripti1" name="instr">SLIALTripti1
                <br>
            </li>

            <li id="Instruments" class="contentContainer">
                <input type="checkbox" value="SLIALBN1" onclick="loadXMLInstrDoc(this)" id="SLIALBN1" name="instr">SLIALBN1
                <br>
            </li>

            <li id="Instruments" class="contentContainer">
                <input type="checkbox" value="Neph5" onclick="loadXMLInstrDoc(this)" id="Neph5" name="instr">Neph5
                <br>
            </li>

        </ul>
        </li>

        </ul>
    </li>

        </ul> 
```

我需要点击一个 plus img 并且它的孩子有 style=display:none; 应更改为 display:block ，直到最后一级和其他`<li>`的

现在我这样做是为了`<li>`点击

```
 $(document).ready(function() {

            $("#treeMenu li").toggle(           

                  function() { // START FIRST CLICK FUNCTION
                      $(this).children('ul').slideDown()
                      if ($(this).hasClass('contentContainer')) { 
                          $(this).attr("checked","checked");  
                          $(this).removeClass('contentContainer').addClass('contentViewing');
                      }
                  }, // END FIRST CLICK FUNCTION

                  function() { // START SECOND CLICK FUNCTION
                      $(this).children('ul').slideUp()

                      if ($(this).hasClass('contentViewing')) {

                          $(this).removeClass('contentViewing').addClass('contentContainer');
                      }
                        } // END SECOND CLICK FUNCTIOn
                    ); // END TOGGLE FUNCTION 

        }); 
```

请有你的建议和解决方案流动......干杯！

请参考以下问题，这是我的要求：

```
http://stackoverflow.com/questions/11324224/javascript-create-3-level-tree-two-column-selection-boxes-html 
```