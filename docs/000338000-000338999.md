# StackOverflow 问答 000338000-000338999

# repository - 虚拟机管理

> ID：338001
> 
> 赞同：2
> 
> 时间：2008-12-03T17:29:52.850
> 
> 标签：repository, vmware, virtual-machine, virtualization

我正在寻找一种 VM 管理解决方案，它可以让我轻松地在企业 Intranet 上可访问的单个存储库中维护 VM。

我目前正在研究 VMware 的 vCenter、HP 的 Manager、Microsoft 的 VM Manager。vCenter 似乎需要 ESX 服务器，我对此不太满意。我还没有看其他人。

但是任何人都可以提出一个好的/简单的解决方案吗？我正在寻找的不仅仅是虚拟机的 SAN 空间，但同时我不想为此运行整个 ESX 服务器。有什么想法、建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-08T00:16:05.803

您是否有不想要 ESX Server 的原因？

vCenter 确实需要 ESX 服务器，但您始终可以运行 ESXi，它可以在本地运行并且可以由 vCenter 管理……而且最重要的是，ESXi 是免费的！

[http://www.vmware.com/products/esxi/](http://www.vmware.com/products/esxi/)

否则，您也可以使用 VMware Server [http://www.vmware.com/products/server/](http://www.vmware.com/products/server/)

我肯定会推荐 ESXi

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-24T18:52:16.803

无论您是使用 VMware ESXi（ESX 的免费版）还是成熟的 ESX，都是一个业务和可维护性决定。

就个人而言，在企业环境中，为确保我拥有管理工具、支持和维护而花费的 ESX 许可证成本是值得的。

如果它是我的个人计算机集合，那么我会选择 ESXi，因为我没有理由需要完整 ESX 许可证提供的支持和管理工具。

在我看来，获得 3 年支持的许可证费用为 2640 美元，这非常小。

( [http://store.vmware.com/servlet/ControllerServlet?Action=DisplayPage&Env=BASE&Locale=en_US&SiteID=vmware&id=ProductDetailsPage&productID=83581600](http://store.vmware.com/servlet/ControllerServlet?Action=DisplayPage&Env=BASE&Locale=en_US&SiteID=vmware&id=ProductDetailsPage&productID=83581600) )

# c# - WPF 中的 ComboBox 模板问题

> ID：338007
> 
> 赞同：3
> 
> 时间：2008-12-03T17:31:36.967
> 
> 标签：c#, wpf, listview, combobox, datatemplate

我有一个带有 ComboBox 的 DataTemplate 的列表视图。我希望 ComboBox 看起来像标签一样平坦，直到用户真正想要更改值。我之前有下面的例子，但我改变了一些东西，现在它不再工作了，我不知道为什么。

IsMouseOver 属性似乎无法正常工作，因为它仅在鼠标位于控件边界时才设置。

我该怎么做才能使这项工作正常进行？

这是一个片段：

 `````
 <CollectionViewSource x:Key="AccountCategories" />

    <ControlTemplate x:Key="FlatCombo" TargetType="{x:Type ComboBox}">
        <ContentControl
            Content="{TemplateBinding SelectionBoxItem}"
            ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
            ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"

            Margin="4,3,3,3" 
            />
    </ControlTemplate>

    <Style TargetType="{x:Type ComboBox}" x:Key="DropDown">
        <Setter Property="OverridesDefaultStyle" Value="False" />            
        <Style.Triggers> 
            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="IsMouseOver" Value="False" />                       
                    <Condition Property="IsFocused" Value="False"/>
                </MultiTrigger.Conditions>
                <Setter Property="Template" Value="{StaticResource FlatCombo}" />
            </MultiTrigger>
        </Style.Triggers>
    </Style>

    <DataTemplate x:Key="Category">
        <ComboBox IsSynchronizedWithCurrentItem="False" Style="{StaticResource DropDown}"
                                      ItemsSource="{Binding Source={StaticResource db}, Path=Categories}" DisplayMemberPath="Name" SelectedValuePath="Id" SelectedValue="{Binding Path=Category}" />
    </DataTemplate>
</Window.Resources>

<Grid>

    <ListView Margin="0,110,0,0" Name="lstCategories" ItemsSource="{Binding Source={StaticResource AccountCategories}}" Grid.RowSpan="2">
        <ListView.ItemContainerStyle>
            <Style TargetType="ListViewItem">
                <Setter Property="HorizontalContentAlignment" Value="Stretch" />
            </Style>
        </ListView.ItemContainerStyle>
        <ListView.View>
            <GridView>
                <GridViewColumn Header="Category" Width="100"  CellTemplate="{StaticResource Category}" />
                <GridViewColumn DisplayMemberBinding="{Binding Path=Balance}" Header="Balance" Width="100" />
            </GridView>
        </ListView.View>
    </ListView> 
````  `* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-03T18:26:08.760

我采用了您提供的代码，为集合提供了一些数据，它的工作方式就像您希望的那样。我建议使用[Snoop](http://blois.us/Snoop/)来查看是否有任何其他元素消耗您希望 ListView 处理的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-03T17:35:57.270

通常，当您遇到正确触发鼠标事件的问题时，这是由于缺少背景。如果您希望接收事件的元素对背景有空引用，则控件将不会接收事件；只有它下面的控件才会。尝试将 ContentControl 的背景设置为“透明”。那应该可以解决您的问题。

# python - 在 python 2.6 上为 PyLucene+JCC 构建的 Windows

> ID：338008
> 
> 赞同：6
> 
> 时间：2008-12-03T17:31:46.543
> 
> 标签：python, windows, pylucene, jcc

在哪里可以下载为 python 2.6 编译的 PyLucene+JCC Windows 版本？

何塞

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-07-29T17:51:26.370

我最终使用了[solr](http://lucene.apache.org/solr/)并使用 XML/JSON 连接它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-07-10T08:40:48.203

未经测试，但这里似乎有一个鸡蛋：

[http://code.google.com/p/pylucene-win32-binary/](http://code.google.com/p/pylucene-win32-binary/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T23:57:55.697

您可能希望查看[此最近的邮件列表帖子](http://mail-archives.apache.org/mod_mbox/lucene-pylucene-dev/200902.mbox/%3Calpine.OSX.2.00.0902181122530.1109@yuzu.local%3E) 和相关线程。还有一个[pylucene-dev](http://markmail.org/message/d6tfni5sdqywwfoy)线程似乎很合适。不幸的是，这些东西都没有你想要的。您仍然必须自己构建它。

如果您真的很慈善，您可以在弄清楚后发布步骤+二进制文件，但我不知道。

# reporting-services - SSRS 在数据选项卡和预览选项卡中的不同结果

> ID：338009
> 
> 赞同：11
> 
> 时间：2008-12-03T17:31:46.903
> 
> 标签：reporting-services

当我在 SQL Server Reporting Services 中构建的报告的“数据”选项卡中运行查询时，我得到了正确的结果（nov 和 dec 数据）。当我预览报告时，我得到了 10 月份的旧数据。这对我来说没有任何意义。我不确定发生了什么事。注意：数据在 Oracle 中。

这是我正在使用的日期过滤器

```
receipt_date + 2 <= SYSDATE 
```

该查询在 SQL Developer 和 Visual Studio 中 .rdl 设计器的“数据”选项卡中运行良好……只是在我运行报告时不在“预览”选项卡中……那是我获得 10 月数据的时候。

有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-05-19T08:26:58.353

SSRS 在本地缓存数据以供设计人员使用。仅当开发人员使用一组不同的参数在 VS.NET 中预览报表时，缓存的数据才会更新，在您的情况下，由于报表没有参数，这种情况永远不会发生。

要允许 SSRS 刷新缓存的数据，请导航到包含设计时 RDL 文件的目录并删除任何具有扩展名“.data”的文件。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-01-20T12:34:40.537

这为时已晚，但也许这可以在未来帮助其他人。

在开发 SQL Reporting Services 报表时，一个非常烦人的功能是，预览数据在测试报表时缓存在本地，而不是在每次运行时获取。即使显式刷新数据也不能总是解决这个问题。解决此问题的最可靠方法是删除与您的报告 RDL 文件关联的 .data 文件。这些数据文件与您的报告定义存储在同一文件夹中。

虽然您可以手动删除这些文件，但对 BIS 的以下 15 秒配置更改使删除所有数据缓存的过程像菜单选择一样简单。

让我们看看如何实现这一点。

在 Visual Studio 中 -->

1.  转到工具 - 外部工具...
2.  添加具有以下设置的新工具：

[![在此处输入图像描述](https://i.stack.imgur.com/HQPok.png)](https://i.stack.imgur.com/HQPok.png)

现在，每当您想删除报表数据缓存时，只需转到工具 - 清除报表数据缓存。

[![在此处输入图像描述](https://i.stack.imgur.com/37e24.png)](https://i.stack.imgur.com/37e24.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-07T21:35:35.853

唯一对我有用（在 2008 R2 中）是删除 .data 文件并重建报告。预览选项卡上的**刷新按钮不执行任何操作**，也不编辑 RSReportDesigner.config 文件（位于*C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\PublicAssemblies 中*）。非常令人沮丧。如果我更改查询或 sp 逻辑，我现在必须手动删除报表项目目录中的 .data 文件，以便查看数据的最新呈现。

希望这已在 SSRS 2012 数据工具中得到修复。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-02-16T16:43:34.953

请参阅链接 [http://connect.microsoft.com/SQLServer/feedback/details/522670/ssrs-turn-off-local-data-cache-in-bids#](http://connect.microsoft.com/SQLServer/feedback/details/522670/ssrs-turn-off-local-data-cache-in-bids#)

[http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/145ac9ac-b247-47d2-a787-98a8fcfad053](http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/145ac9ac-b247-47d2-a787-98a8fcfad053)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-06T00:36:16.127

尝试点击“预览”选项卡上的“刷新”按钮。

如果我理解正确，那与我的问题相同。

我可以在“报告数据”窗口中看到查询成功运行，但是每当我运行报告预览时，我都没有得到任何结果。

经过一番折腾后，我意识到，我需要做的就是点击刷新按钮（预览选项卡上的小图标）以使用新数据刷新预览。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-12-15T14:25:04.560

Greg 帖子中的链接指向此解决方法，在 Greg 发布后添加：http: [//blog.summitcloud.com/2010/05/disable-reporting-services-data-cache-in-development/](http://blog.summitcloud.com/2010/05/disable-reporting-services-data-cache-in-development/)这解释了哪个配置文件控制数据缓存，并表示刷新预览实际上可能会为您提供新数据。（我现在正在运行一个很长的查询，所以我还不知道这是否有效。）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-04T19:54:30.607

There are no report parameters.....the exact same sql is run everytime. I'm not sure what you mean when you ask if the report is a server report.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-12T16:42:37.173

我有一个我无法测试的理论。此报表未部署到报表管理器，而是从 Visual Studio 运行。我不知道这是否有区别。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-03T21:12:41.573

数据集的参数有什么不同吗？报告参数是否完全提供数据集？如果有，它们是什么？报告是服务器报告吗？如果是这样，服务器上设置的时间是多少？

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-04-24T02:39:21.770

为我按下 BIDS VS2010 中的刷新按钮不起作用。也没有删除缓存文件。我的问题是我没有行组 - 所以它只在报告中显示一个（旧）记录。

# java - .net/java 框架中的反对指南实施/用词不当的例子有哪些？

> ID：338024
> 
> 赞同：1
> 
> 时间：2008-12-03T17:36:14.133
> 
> 标签：java, .net

我记得.net 中的*Convert*类，它的命名不符合指南。还有更多的例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-03T17:40:08.150

在 Java 中，`java.lang.System.arraycopy`- 注意小写的第二个 c。

在`NullPointerException`Java 中也比`NullReferenceException`在 .NET 中更好。

`AppDomain`违反了*通常*不使用缩写的惯例。

`Control.ID`违反了将 Pascal 大小写 ID 转换为“Id”并将 Camel 大小写转换为“id”的显式约定。

编辑：由于大众的需求，还有更多……尽管它们的名字比违反约定更糟糕。

`SortedList`在 .NET 中 - 这解释了*实现*是什么，但没有给出关于*API*是什么的正确印象 - 字典。

`Type.MakeGenericType`- 它是一个*构造*类型。同上`MethodInfo.MakeGenericMethod`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-03T18:01:31.197

*   [IPEndPoint](http://msdn.microsoft.com/en-us/library/system.net.ipendpoint.aspx)打破了[复合词大写](http://msdn.microsoft.com/en-us/library/ms229043.aspx)指南（奇怪的是，它专门以端点为例）。
*   所有的 Interop 引用都是禁止的，因为它们是 Interoperability 的缩写。值得庆幸的是，他们把它们留给了 Interop。

我发誓有一个属性或什么东西完全拼错了，但我想不起来了。[但是， HTTP_REFERER](http://en.wikipedia.org/wiki/Referer)总是很有趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-03T17:55:32.657

```
java.util.Hashtable 
```

如果是`HashSet`和`HashMap`，那么应该是`HashTable`。

不违反准则，但我一直讨厌`UndoableEdit`

我的想法似乎将其解析为“ *Un(doable) edit* ”，意思是无法完成的编辑，而不是“ *UnDo -able Edit* ”的正确解释，意思是可以撤消的编辑。

# vb6 - 从 RegQueryValueEx 返回的连接字符串

> ID：338026
> 
> 赞同：0
> 
> 时间：2008-12-03T17:36:21.370
> 
> 标签：vb6, string-concatenation

我想从注册表中读取一个字符串值并将其与另一个特定字符串连接起来。我正在调用 RegQueryValueEx() ，如下所示：

```
Dim lResult As Long
Dim sLength As Long
Dim sString As String

sString = Space$(256)
sLength = 256

lResult = RegQueryValueEx(hKey, "MyKey", 0, REG_SZ, ByVal sString, sLength)
MsgBox sString & "blah-blah-blah" 
```

RegQueryValueEx() 工作正常，我在 sString 中获取所需的字符串，甚至可以使用 MsgBox 显示它。但是当我尝试将它与“some_string”连接时，我只显示了 sString。请帮帮我。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-03T18:11:53.327

字符串中可能有一个空字符，因为 VB 字符串将字符串的长度存储在内存中，就在字符串内容之前。在您的情况下，长度为 256。当您使用 RegQueryValueEx 加载内容时，它会以空值终止字符串（C 样式），但不会更改其指示的长度，因此在 VB 世界中它仍然是 256 个字符长。然后，当您附加第二个字符串时，它会附加在前 256 个字符之后，但 MsgBox 仅显示最多为空字符的内容。

因为 RegQueryValueEx 把实际数据的长度放在了 sLength 中，所以可以在 MsgBox 前面加上这一行

```
sString = Left$(sString, sLength) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-03T17:44:31.683

优先级问题，也许？试试怎么样：

```
MsgBox(sString & "blah-blah-blah") 
```

或者

```
Dim sDisplay as String
sDisplay = sString & "blah-blah"

MsgBox sDisplay 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-03T17:49:25.463

也许字符串包含一个 0 字符，所以它过早结束？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-03T18:03:12.830

您需要在最后摆脱空字符。我建议为 VB6 获取一个已经编写和测试过的[注册表模块](http://vb.mvps.org/samples/project.asp?id=RegSettings)。 [这是来自 vbnet 的另一个例子](http://vbnet.mvps.org/index.html?code/reg/regdefmailclient.htm) 但是如果你只是想摆脱空值，这里是我用过的一个。

```
Public Function StringFromBuffer(ByRef strBuffer As String) As String
' Extracts String From a Buffer (buffer is terminated with null)
' 06/30/2000 - WSR

Dim lngPos As Long

    ' attempt to find null character in buffer
    lngPos = InStr(1, strBuffer, vbNullChar)

    ' if found
    If lngPos > 0 Then

        ' return everything before it
        StringFromBuffer = Left$(strBuffer, lngPos - 1)

    ' if not found
    Else

        ' return whole string
        StringFromBuffer = strBuffer

    End If ' lngPos > 0

End Function ' StringFromBuffer 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-03T18:06:27.550

使用 Mid$ 和 sLength 从 sString 中提取字符串值。这样，由于额外的字符（例如空终止符“0”），您可以避免陌生感

请记住，当您处理 Win32 API 时，您必须牢记它假定 C 约定与 VB 约定不同。因此，您必须在发送之前进行一些清理。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-04T08:31:31.500

当我这样做时，它对我有用：

```
sString = Left$(sString, sLength-1) 
```

问题确实是字符串末尾的空字符。

多谢你们！

# linq-to-sql - sql server 2008 表值参数 linq2sql

> ID：338029
> 
> 赞同：4
> 
> 时间：2008-12-03T17:36:40.137
> 
> 标签：linq-to-sql, sql-server-2008, table-valued-parameters

有没有人尝试过这些。这支持吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-19T19:26:58.957

LINQ to SQL 中尚不支持表值参数。在 Microsoft 的 MSDN 论坛上有一些关于此的帖子：

> [DbType.Structured 不可用](http://social.msdn.microsoft.com/forums/en-US/adodotnetentityframework/thread/4d2957f6-9e3d-4396-9b3d-1c333245bd96/)
> 
> [SQL Server 2k8.用户定义的表类型。DbType 'Structured' 和 Type 'System.Object' 之间的映射](http://social.msdn.microsoft.com/Forums/en-US/linqprojectgeneral/thread/afdeec9a-5ffc-4f7e-a11a-ad34f4569db8)

第二个链接是指实体框架，但基本问题是相同的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-03T19:06:33.217

我实际上不得不自己尝试一下。:0

它似乎不受支持。使用 tvp 参数将存储过程添加到 dbml 文件时出现此错误

DBML1005：不支持函数 'dbo.spTestTableTypeParm' 的参数 'TVP' 中的 DbType 'Structured' 和类型 'System.Object' 之间的映射

可悲但真实，我认为这可能是 sql 2008 和 linq2sql 的杀手级功能

# unix - 如何检查特定目录的权限？

> ID：338037
> 
> 赞同：375
> 
> 时间：2008-12-03T17:37:48.653
> 
> 标签：unix, directory

我知道 using`ls -l "directory/directory/filename"`告诉我文件的权限。我如何在目录上做同样的事情？

我显然可以`ls -l`在层次结构中更高的目录上使用，然后滚动直到找到它，但这太痛苦了。如果我`ls -l`在实际目录上使用，它会提供其中文件的权限/信息，而不是实际目录的权限/信息。

我在 Mac OS X 10.5 和 Linux (Ubuntu Gutsy Gibbon) 的终端上都试过这个，结果是一样的。我应该使用某种标志吗？

* * *

## 回答 #1

> 赞同：491
> 
> 时间：2008-12-03T17:40:00.397

这是简短的答案：

```
$ ls -ld directory 
```

这是它的作用：

```
-d, --directory
    list directory entries instead of contents, and do not dereference symbolic links 
```

您可能对[*手册页*](http://en.wikipedia.org/wiki/Manpage)感兴趣。这就是这里所有的人都能得到他们好的答案的地方。

参考[*在线手册页*](https://www.kernel.org/doc/man-pages/)

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2008-12-03T17:46:11.927

`stat`如果您需要有关文件/目录的详细信息，也可以使用该命令。（正如你所说的那样，我准确地说你正在学习^^）

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2017-03-07T15:39:07.207

```
$ ls -ld directory 
```

`ls`是列表命令。

`-`表示命令选项的开始。

`l`要求提供包含权限的长列表。

`d`表示列表应该与命名目录本身有关；不是它的内容。如果没有给出目录名称，则列表输出将与当前目录有关。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2016-11-08T07:45:47.353

在 GNU/Linux 中，尝试使用`ls`, `namei`, `getfacl`, `stat`.

## 对于目录

```
[flying@lempstacker ~]$ ls -ldh /tmp
drwxrwxrwt. 23 root root 4.0K Nov  8 15:41 /tmp
[flying@lempstacker ~]$ namei -l /tmp
f: /tmp
dr-xr-xr-x root root /
drwxrwxrwt root root tmp
[flying@lempstacker ~]$ getfacl /tmp
getfacl: Removing leading '/' from absolute path names
# file: tmp
# owner: root
# group: root
# flags: --t
user::rwx
group::rwx
other::rwx

[flying@lempstacker ~]$ 
```

或者

```
[flying@lempstacker ~]$ stat -c "%a" /tmp
1777
[flying@lempstacker ~]$ stat -c "%n %a" /tmp
/tmp 1777
[flying@lempstacker ~]$ stat -c "%A" /tmp
drwxrwxrwt
[flying@lempstacker ~]$ stat -c "%n %A" /tmp
/tmp drwxrwxrwt
[flying@lempstacker ~]$ 
```

* * *

## 对于文件

```
[flying@lempstacker ~]$ ls -lh /tmp/anaconda.log
-rw-r--r-- 1 root root 0 Nov  8 08:31 /tmp/anaconda.log
[flying@lempstacker ~]$ namei -l /tmp/anaconda.log
f: /tmp/anaconda.log
dr-xr-xr-x root root /
drwxrwxrwt root root tmp
-rw-r--r-- root root anaconda.log
[flying@lempstacker ~]$ getfacl /tmp/anaconda.log
getfacl: Removing leading '/' from absolute path names
# file: tmp/anaconda.log
# owner: root
# group: root
user::rw-
group::r--
other::r--

[flying@lempstacker ~]$ 
```

或者

```
[flying@lempstacker ~]$ stat -c "%a" /tmp/anaconda.log
644
[flying@lempstacker ~]$ stat -c "%n %a" /tmp/anaconda.log
/tmp/anaconda.log 644
[flying@lempstacker ~]$ stat -c "%A" /tmp/anaconda.log
-rw-r--r--
[flying@lempstacker ~]$ stat -c "%n %A" /tmp/anaconda.log
/tmp/anaconda.log -rw-r--r--
[flying@lempstacker ~]$ 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2015-05-06T14:30:27.673

还有

```
getfacl /directory/directory/ 
```

其中包括 ACL

Linux ACL 的一个很好的介绍[here](https://serversforhackers.com/video/linux-acls)

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2018-09-19T21:49:22.427

这将显示文件及其权限

```
stat -c '%a - %n' directory/* 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-12-03T18:01:52.270

除了上面的帖子，我想指出“man ls”会给你一个很好的关于“ls”（List”命令的手册。

此外，使用 ls -la myFile 将列出并显示有关该文件的所有事实。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2013-07-01T16:36:39.870

在 OS X 上，您可以使用：

```
ls -lead 
```

e 选项显示 ACL。ACL 对于了解系统上的确切权限非常重要。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-12-13T05:31:27.143

ls -lstr

这显示了具有权限和 user:group 的普通 ls 视图

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-10-08T13:41:20.700

要检查文件的权限配置，请使用以下命令：

```
ls –l [file_name] 
```

要检查目录的权限配置，请使用以下命令：

```
ls –l [Directory-name] 
```

# ruby-on-rails - 如何在 Rails 中进行连接查询？

> ID：338044
> 
> 赞同：4
> 
> 时间：2008-12-03T17:40:57.820
> 
> 标签：ruby-on-rails, ruby

假设我有两个表，一个包含个人信息的学生主列表，以及一个班级学生注册列表。这两个表共享一个公共列，这是一个唯一标识学生的字符串，但它不是主键。

假设我想在一个页面上显示所有注册，以及来自学生（比如家乡）的一些个人数据。

我知道这将是一个 has_many 关系。主列表记录有许多注册。注册属于学生。

```
class Student < ActiveRecord::Base
    has_many :enrollments
end

class Enrollment < ActiveRecord::Base
   belongs_to :student
end 
```

这是两者之间的正确关系吗？如果是，我该如何对共享列进行连接查询？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-03T18:11:00.613

理想情况下，Rails 期待以下列：

```
Student table:
- id

Enrollment table:
- student_id 
```

这样做，你的关系应该有效。

然后尝试一下，进入 Rails 控制台并尝试一下：

```
@student = Student.first
@student.enrollments 
```

看看这个关于使用关联的伟大 Rails 参考：

[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-04T00:53:14.250

是的，ActiveRecord 将为您管理关系，但您也可以在搜索关系中的条件时指定联接。例如：

```
User.find(:all, :joins => :phone_numbers, :conditions => { :phone_numbers => {:name => 'business'} }) 
```

请注意，虽然仅在 Rails 2.2 中使用散列作为条件声明

但大多数情况下，只使用 ActiveRecord 关系`has_many`应该就可以了，正如上面的答案中提到的，你会使用它来调用对象，就好像它直接在模型上一样......`@student.enrollments`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-03T18:52:21.547

mwilliams 所说的内容以及在您遵循指南时确保您想要多对多关联。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-03T22:23:29.140

连接查询是通过 ActiveRecord 关联自动完成的。

# javascript - 有人有关于 Microsoft Kojax 的好信息吗？

> ID：338047
> 
> 赞同：-2
> 
> 时间：2008-12-03T17:41:59.533
> 
> 标签：javascript, visual-studio

SO 社区中是否有人有机会了解更多有关 Microsoft Kojax 的信息或接触过 Microsoft Kojax？现在还为时过早，但是否有任何关于这项技术的资源（可在网络上公开获得）？

[ZDNet 关于 Kojax 的文章](http://blogs.zdnet.com/microsoft/?p=1741)

来自文章：“根据我的消息来源，Kojax 是一个移动开发平台，它将允许 Microsoft 和第三方开发的小程序以类似 Ajax 的方式运行，使用 Visual Studio 工具和 JavaScript 的组合，在基于 Java 的手机。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-11T02:05:11.097

我认为微软不太可能在未来一年半内发布“Kojax”，特别是因为它甚至都没有在微软的 4 墙之外被讨论过。听起来基本上就像移动版的 Silverlight，考虑到几年后 Silverlight 仍然很原始，我不认为 Kojax 会是什么惊天动地的东西。

但我很想被证明是错误的。=)

# subsonic - 由于缺少依赖项，SubSonic“版本”失败

> ID：338050
> 
> 赞同：0
> 
> 时间：2008-12-03T17:42:49.097
> 
> 标签：subsonic

我正在使用 SubSonic 2.1 Final 但在使用 SubCommander 运行“版本”时遇到问题。我认为当我在本地计算机上安装 SQL Server 2008 并删除 2005 时，这个问题就开始了。

这是我得到的错误：

```
ERROR: Trying to execute Version
Error Message: System.IO.FileNotFoundException: Could not load file or assembly 'Microsoft.SqlServer.SmoEnum, Version=9.0.242.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91' or one of its dependencies. The system cannot find the file specified.
File name: 'Microsoft.SqlServer.SmoEnum, Version=9.0.242.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91'
   at Microsoft.SqlServer.Management.Smo.SqlSmoObject.GetDbCollation(String dbname)
   at Microsoft.SqlServer.Management.Smo.SqlSmoObject.GetDbComparer(Boolean inServer)
   at Microsoft.SqlServer.Management.Smo.SqlSmoObject.InitializeStringComparer()
   at Microsoft.SqlServer.Management.Smo.AbstractCollectionBase.get_StringComparer()
   at Microsoft.SqlServer.Management.Smo.SimpleObjectCollectionBase.InitInnerCollection()
   at Microsoft.SqlServer.Management.Smo.SmoCollectionBase.get_InternalStorage()
   at Microsoft.SqlServer.Management.Smo.SmoCollectionBase.GetObjectByKey(ObjectKeyBase key)
   at Microsoft.SqlServer.Management.Smo.DatabaseCollection.get_Item(String name)
   at SubSonic.SubCommander.DBScripter.ScriptSchema(String connectionString) in C:\svn\subsonicproject\trunk\SubCommander\DBScripter.cs:line 51
   at SubSonic.SubCommander.Program.ScriptSchema() in C:\svn\subsonicproject\trunk\SubCommander\Program.cs:line 696
   at SubSonic.SubCommander.Program.Main(String[] args) in C:\svn\subsonicproject\trunk\SubCommander\Program.cs:line 68 
```

任何人都知道如何使这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-04T19:51:39.133

您可能必须使用 SqlServer 2008 版本的 Microsoft.SqlServer.Management.Smo dll 编译 SubCommander

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-18T18:22:52.420

我通过下载最新的源代码并在我的机器上构建它来完成这项工作。现在效果很好。

# .net - ResourceDictionary 在单独的程序集中

> ID：338056
> 
> 赞同：257
> 
> 时间：2008-12-03T17:44:54.457
> 
> 标签：.net, wpf, xaml, controltemplate, resourcedictionary

我有想要在多个单独的应用程序中使用的资源字典文件（MenuTemplate.xaml、ButtonTemplate.xaml 等）。我可以将它们添加到应用程序的程序集中，但最好将这些资源编译到一个程序集中并让我的应用程序引用它，对吗？

构建资源程序集后，如何在我的应用程序的 App.xaml 中引用它？目前我使用 ResourceDictionary.MergedDictionaries 来合并各个字典文件。如果我将它们放在程序集中，如何在 xaml 中引用它们？

* * *

## 回答 #1

> 赞同：371
> 
> 时间：2008-12-03T20:15:51.097

查看[包 URI 语法](http://msdn.microsoft.com/en-us/library/aa970069(VS.85).aspx)。你想要这样的东西：

```
<ResourceDictionary Source="pack://application:,,,/YourAssembly;component/Subfolder/YourResourceFile.xaml"/> 
```

* * *

## 回答 #2

> 赞同：100
> 
> 时间：2010-03-27T10:01:11.500

一个例子，只是为了让这成为一个 15 秒的答案 -

假设您在名为“common”的 WPF 库中有“styles.xaml”，并且您想在主应用程序项目中使用它：

1.  将主项目的引用添加到“普通”项目
2.  您的 app.xaml 应包含：

* * *

```
<Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="pack://application:,,,/Common;component/styles.xaml"/>
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources> 
```

* * *

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2012-04-18T19:09:43.563

我正在使用 .NET 4.5，但无法正常工作……我正在使用 WPF 自定义控件库。这最终对我有用......

```
<ResourceDictionary Source="/MyAssembly;component/mytheme.xaml" /> 
```

**来源：** [http ://social.msdn.microsoft.com/Forums/en-US/wpf/thread/11a42336-8d87-4656-91a3-275413d3cc19](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/11a42336-8d87-4656-91a3-275413d3cc19)

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2013-03-30T01:37:00.963

仅资源 DLL 是您的选择。但除非您想在不重新编译应用程序的情况下修改资源，否则不一定需要。只有一个通用的 ResourceDictionary 文件也是一种选择。这取决于您更改资源的频率等。

```
<ResourceDictionary Source="pack://application:,,,/
     <MyAssembly>;component/<FolderStructureInAssembly>/<ResourceFile.xaml>"/> 
```

*MyAssembly* - 只是没有扩展名的程序集名称

*FolderStructureInAssembly* - 如果您的资源位于文件夹中，请指定文件夹结构

当您这样做时，最好也了解**[siteOfOrigin](http://msdn.microsoft.com/en-us/library/aa970069.aspx#The_Pack_URI_Scheme)**。

> WPF 支持两种权限：application:/// 和 siteoforigin:///。application:/// 权限标识在编译时已知的应用程序数据文件，包括资源和内容文件。siteoforigin:/// 权限标识原始文件的站点。每个权限的范围如下图所示。

![在此处输入图像描述](https://i.stack.imgur.com/XvY54.png)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-04-27T10:48:06.840

对于 UWP：

```
<ResourceDictionary Source="ms-appx:///##Namespace.External.Assembly##/##FOLDER##/##FILE##.xaml" /> 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-04-15T12:46:25.867

***使用 XAML：***

如果您知道其他`assembly`结构并想要***c#***`resources`代码，请使用以下代码：

 *```
 ResourceDictionary dictionary = new ResourceDictionary();
 dictionary.Source = new Uri("pack://application:,,,/WpfControlLibrary1;Component/RD1.xaml", UriKind.Absolute);
 foreach (var item in dictionary.Values)
 {
    //operations
 } 
```

**输出：**如果我们想使用`ResourceDictionary` `RD1.xaml`Project`WpfControlLibrary1`进入`StackOverflowApp`项目。

**项目结构**：

[![项目结构](https://i.stack.imgur.com/6hHuB.jpg)](https://i.stack.imgur.com/6hHuB.jpg)

**资源字典：** [![资源字典](https://i.stack.imgur.com/JIFgO.jpg)](https://i.stack.imgur.com/JIFgO.jpg)

**代码输出：**

[![输出](https://i.stack.imgur.com/vBQA6.jpg)](https://i.stack.imgur.com/vBQA6.jpg)

**PS：**所有`ResourceDictionary`文件都应该有`Build Action`' `Resource`'或' `Page`'。

***使用 C#：***

> 如果有人想要纯***c# 代码***中的解决方案，请查看我的[这个解决方案。](https://stackoverflow.com/questions/36675366/resourcedictionary-from-external-assembly-read-object-from-unmanagedmemorystrea)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-27T15:43:34.243

我知道我可能会去 WPF 地狱，但我喜欢保持简单。

*在我的名为MyCorp.Wpf.Dll*的“外部”WPF 项目中，我有一个名为 assets 的文件夹，其中包含我的资源字典

```
MyCorp.Wpf.Dll
|- Assets
   |- TextStyles.xaml
   |- Colours.axml 
```

假设我有这个**TextStyles.xaml**和我需要应用的 UI 字体样式，因为我需要 Windows 10/ 11 样式合规性

```
 <Style x:Key="Header" TargetType="TextBlock">
        <Setter Property="FontFamily" Value="Sego UI Light"/>
        <Setter Property="FontSize" Value="46" />
    </Style>

    <Style x:Key="Subheader" TargetType="TextBlock">
        <Setter Property="FontFamily" Value="Sego UI Light"/>
        <Setter Property="FontSize" Value="32" />
    </Style>
    <Style x:Key="Title" TargetType="TextBlock">
        <Setter Property="FontFamily" Value="Sego UI SemiLight"/>
        <Setter Property="FontSize" Value="24" />
    </Style>
    <Style x:Key="SubTitle" TargetType="TextBlock">
        <Setter Property="FontFamily" Value="Sego UI Normal"/>
        <Setter Property="FontSize" Value="20" />
    </Style>

    <Style x:Key="Base" TargetType="TextBlock">
        <Setter Property="FontFamily" Value="Sego Semibold"/>
        <Setter Property="FontSize" Value="15" />
    </Style>
    <Style x:Key="Body" TargetType="TextBlock">
        <Setter Property="FontFamily" Value="Sego Normal"/>
        <Setter Property="FontSize" Value="15" />
    </Style>
    <Style x:Key="Caption" TargetType="TextBlock">
        <Setter Property="FontFamily" Value="Sego Normal"/>
        <Setter Property="FontSize" Value="12" />
    </Style>   

</ResourceDictionary> 
```

这些风格在我的公司风格指南中，我正在到处重新唱它们

现在在我全新的应用程序中，我可以使用内部 NuGet 包源中的企业样式 DLL，或者我链接它，因为它恰好在我的解决方案中，使用以下资源字典

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    >
    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/MyCorp.Wpf;component/Assets/TextStyles.xaml"/>
        <ResourceDictionary Source="/MyCorp.Wpf;component/Assets/Styles.xaml"/>
        <ResourceDictionary Source="/MyCorp.Wpf;component/Assets/Brushes.xaml"/>
        <ResourceDictionary Source="/MyCorp.Wpf;component/Assets/ColorStyles.xaml"/>
    </ResourceDictionary.MergedDictionaries>
</ResourceDictionary> 
```

我不知道额外的**组件**来自哪里，我只知道我需要。然后在我的新应用程序中，我只是像这样链接它：

```
<Application x:Class="MyNew.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             StartupUri="MainWindow.xaml">
    <Application.Resources>
        <ResourceDictionary>

            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="ExternalResources.xaml"/>
            </ResourceDictionary.MergedDictionaries>

            <BooleanToVisibilityConverter x:Key="VisibilityConverter"/>
        </ResourceDictionary>
    </Application.Resources>
</Application> 
```

这样，我在**ExternalResources.xaml**中拥有所有外部链接，每个人都知道他们来自哪里并且更新它们很容易

然后我可以在我的窗口、页面和控件中使用外部资源定义

```
<syncfusion:ChromelessWindow x:Class="IDPS.ChromelessWindow1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:IDPS"
        xmlns:r="clr-namespace:IDPS.Wpf.Properties;assembly=IDPS.Wpf"                     
        xmlns:syncfusion="http://schemas.syncfusion.com/wpf"
        syncfusion:SfSkinManager.Theme="{syncfusion:SkinManagerExtension ThemeName=FluentDark}"
        mc:Ignorable="d"
       MinHeight="450" MinWidth="800">
    <Grid>
        <TextBlock Text="Hello world" Style="{StaticResource Title}"/>
    </Grid>
</syncfusion:ChromelessWindow> 
```

[![我的结果](https://i.stack.imgur.com/qvj8j.png)](https://i.stack.imgur.com/qvj8j.png)

# visual-studio - Visual Studio 2005 未构建解决方案

> ID：338057
> 
> 赞同：2
> 
> 时间：2008-12-03T17:44:57.203
> 
> 标签：visual-studio, visual-studio-2005

我有一个包含大约 20 个项目（使用 Devexpress 控件）的解决方案，当我进行正常的解决方案构建（ctrl-shift-B）时，它说一切都已成功完成，而实际上它什么也没做。要构建它，我必须右键单击解决方案并使用批量构建选项。

我已经尝试删除解决方案并从 TFS 重新获取，我什至已经重新安装了 VS！

有人知道出了什么问题吗？

抱歉应该添加也尝试从主菜单构建。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-03T17:51:16.693

我有过类似的问题。这是一个长镜头，但右键单击您的解决方案并转到属性-> 配置属性。检查以确保您的所有项目都选中了“构建”选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-03T17:48:09.740

也许 Ctrl+Shift+B 已分配给“检查以查看是否需要在构建之前”类型的功能之一？

检查键盘设置：

*   右键单击工具栏
*   在弹出菜单中选择自定义
*   单击对话框右下角的键盘按钮
*   在新对话框中，在“按下快捷键”中，在中心的右下方，按 Ctrl+Shift+B
*   验证它是否绑定到*Build.BuildSolution*

至少这对我来说是必然的。我注意到还有一个名为 Build.RebuildSolution 的操作，您应该进行试验。

# c# - 以编程方式将扫描仪创建的 PDF 拆分为单独的 PDF 文档

> ID：338063
> 
> 赞同：2
> 
> 时间：2008-12-03T17:46:28.637
> 
> 标签：c#, .net, vb.net, pdf, adobe

我有来自扫描仪的 PDF 文档。此 PDF 包含由工作人员填写并签署的一天工作表格。我想在每种表单类型上放置 OCR 文本的条形码或标准区域，以便可以根据表单类型以编程方式将批量扫描拆分为单独的 PDF 文档。

我想在 Microsoft .net 2.0 中执行此操作

如果没有可用的开源名称空间/dll，我可以购买完成任务所需的 Adob​​e 或其他名称空间/dll。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-03T17:51:42.573

不是免费或开源选项，但您也可以将[webSuperGoo 的 ABCPdf](http://www.webgoo.com/abcpdf-1.htm)作为 Adob​​e 的另一种替代品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-03T17:54:27.793

您可以研究 iTextSharp 库，它可以拆分 pdf 文件。但这对于阅读实际的pdf并不是很好。所以我不知道它怎么知道在哪里拆分它们。

有些公司已经为您这样做了。您可以研究 kwiktag 公司。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-03T17:54:43.673

iTextSharp 将帮助您将条形码拆分、重组和应用到 .NET 语言的 pdf 中。我不认为它可以 OCR 文档，但我没有看过（我使用了 Abby Fine Reader 引擎）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-03T19:21:24.700

从您的问题标题中，我假设您只需要拆分 PDF 文件并且它们已经是 OCR 了。有一些开源的 .NET PDF 库。我已经在自己的项目中成功使用了[PDFSharp](http://www.pdfsharp.com/PDFsharp/)。

这是一个快速片段，展示了如何使用 PDFSharp 从 PDF 文档中剔除每一页：

```
string filePath = @"c:\file.pdf";

using (PdfDocument ipdf = PdfReader.Open(filePath, PdfDocumentOpenMode.ReadOnly))
{
    int i = 1;
    foreach (PdfPage page in ipdf.Pages)
    {
        using (PdfDocument opdf = new PdfDocument())
        {
            opdf.Version = ipdf.Version;
            opdf.AddPage(page);

            opdf.Save("page " + i++ + ".pdf");
        }
    }
} 
```

假设您还需要访问文档中的文本以进行分组，您可以使用 PdfPage.Contents 属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-11-05T06:43:21.867

你可以使用几个，试试这些免费工具：

*   [PDF 工具包](http://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/)
*   [多价](http://multivalent.sourceforge.net/Tools/index.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-11-05T06:35:58.017

查看 hp 在 90 年代后期开发的 c++ ocr 引擎周围的[Tesseract .NET 包装器（v 2.04.0）](http://www.pixel-technology.com/freeware/tessnet2/)，它因其独创性而获奖

# visual-studio - Visual Studio 2008 解决方案中的最佳项目数是多少？

> ID：338067
> 
> 赞同：6
> 
> 时间：2008-12-03T17:46:53.550
> 
> 标签：visual-studio

Visual Studio 2008 解决方案中的最佳项目数是多少？

我们有一个 Visual Studio 2008 解决方案，目前大约有 50 个项目。随着解决方案中的大部分项目由主应用程序的插件程序集组成，它可能会继续增长。

如果在一个解决方案中看起来“项目太多”，那么您将如何确定哪些项目应该在一个解决方案中组合在一起？鉴于我们在一个解决方案中有大约 50 个项目的示例，其中大部分项目是插件并且插件的数量可能会增长，那么解决方案应该如何构建？所有插件都应该放在自己的解决方案中吗？当插件解决方案中的插件数量达到“太多”的神奇数字时，组织应该如何改变？

我们对解决方案中的这么多项目没有任何问题......它加载速度快，构建速度快，使用合理的内存量，并且不会导致 VS2008 崩溃或遇到任何 VS2008 错误。

我从 Microsoft 寻找文档（似乎没有），Google 搜索从“每个项目都有自己的解决方案”到“将所有项目放在一个解决方案中”的 yeild 建议。这两种极端似乎都是荒谬的。我正在中间寻找一些合理的指导。

Stackoverflow 上还有其他与您看到的[最大值相关的问题。](https://stackoverflow.com/questions/18871/what-is-the-biggest-vs-solution-youve-ever-seen)这与最佳状态不太一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-03T17:54:11.663

我想说您系统上的每一层至少需要一个项目。如果您需要更多项目，可能是设计问题。这意味着您可以“过度”设计或“不足”设计应用程序。

我现在使用以下层：

DataLayer - 负责底层数据结构（数据库）。在最新的案例中，在这个项目中有 LINQ 和部分类。

接口 - 所有接口都有一个层，这有助于扩展性，而不必依赖其他一些层来使用这些接口。

逻辑 - 这定义了自己，业务逻辑

GUI / Front - 图形用户界面（代码）

这些层是最小的其他层，可能是本地化和其他可能增长的项目。

但是更简单地简化为目录和命名空间，而不是用于许多项目！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-03T18:06:14.883

这类似于诸如“我应该在课堂上拥有多少功能？”之类的讨论。和“应该在自己的 .cs 文件中定义每个枚举吗？”。

我很想知道您的每个项目有多少类。您可以将您的课程、项目和解决方案视为组织单位。它们的存在是为了让您的生活更轻松，并允许您（和您的团队）将整个项目分解为可管理的概念块。

如果 VS2008 没有抱怨，并且您和您的开发人员对一个解决方案中的 50 个项目没有任何问题，那么我不会担心。

也就是说，这听起来确实是一个相当大的数字——但是我们对你的整个代码库的大小一无所知，所以很难进一步评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-03T17:55:22.470

显然，当您达到 500 时，您开始考虑“太多”，即使管理它也变得不切实际。

我可能会建议您分析“真正构成我的应用程序的内容”并将其打包为一个解决方案。插件很少被视为基本应用程序的一部分，而是基本功能的附加组件。

如果没有某些插件，应用程序将不再有用，则将这些插件包含在基本解决方案中。

其他插件可能按流派分组……很像 iPod 上的播放列表。每个插件在更一般的层面上实现了什么？（这些显然是修辞问题）我会将插件分组到自然组中 - 很像 PhotoShop 插件，因为它们在菜单上分组。即它们是否影响 3D、它们是否影响颜色、它们是否影响几何效果、它们是否影响失真等等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-03T18:36:01.470

当我看到速度变慢时，我倾向于创建一个引用依赖项目的构建版本（程序集）而不是项目文件（对于我不需要查看源代码的任何项目）的解决方案。我只为我正在做的项目开放源代码——当然没有人需要同时处理 50 个项目的源代码。

如果您已经在引用依赖程序集而不是源代码，那么我认为这只是一个问题或组织偏好（以您最容易理解和维护的方式组织）。

# php - 如何摆脱 FTP 支持版本控制

> ID：338073
> 
> 赞同：16
> 
> 时间：2008-12-03T17:50:22.467
> 
> 标签：php, svn, git, ftp, ssh

我听说现在使用 FTP 上传您的网站适用于 n00bs，但这是我在 8 年左右建立网站时所知道的唯一方法。显然现在所有的嗡嗡声都在使用版本控制系统，如 SVN 或 Git，并以某种方式使用 SSH 仅上传已更改的文件（如果我理解正确的话）。我想知道是否有人可以解释或指出我的“综合”指南。我需要安装什么，我的共享主机 (Dreamhost) 是否兼容？我目前在 WAMP 环境中开发。我从未使用过版本控制，也不知道从哪里开始。我通常使用 CakePHP 或 Zend 等框架进行开发。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-12-03T18:38:22.930

你把事情搞混了。*内部*使用版本控制系统在开发过程中跟踪您的代码。使用像 SVN 这样的集中式系统，您会定期将代码上传到 SVN 服务器，该服务器会跟踪已更改的内容，确保正确合并冲突的更改，并保留历史记录，以便您可以回滚更改。

分散式或分布式版本控制系统消除了一个中央服务器，而是允许每个代码副本跟踪其自己的更改历史，然后让您随意合并和组合这些单独的分支。

但是一旦你有了一个完整的产品，你可以以任何你喜欢的方式将它推送到生产服务器。FTP 无疑是这样做的一种选择。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-03T18:02:41.363

对于文件上传，您正在寻找的是[rsync](http://en.wikipedia.org/wiki/Rsync)。有一个称为[DeltaCopy](http://www.aboutmyip.com/AboutMyXApp/DeltaCopy.jsp)的 Windows 包装器， DreamHost wiki 有[说明](http://wiki.dreamhost.com/DeltaCopy)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-03T17:59:13.650

首先，您需要决定要用于版本控制的内容。我听说过关于 Git 的好消息，但我自己仍然是 SVN 用户。

Dreamhost 实际上让您可以使用他们的 webpanel 创建 SVN 存储库，那里非常热衷，我不记得了，但我认为他们有一些额外的非常好的功能可以提供帮助。

我建议充其量阅读或浏览一下：[http](http://www.svnbook.org) : //www.svnbook.org 如果您打算在 Git 上实际使用 SVN，它会非常全面。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-08T13:42:29.780

每个人都完全没有抓住重点。使用版本控制系统进行开发是一件很棒的事情，即使对于自己工作的开发人员来说也有很​​大的好处。这里的问题是关于使用版本控制系统进行部署。

这是一个更新的好主意，考虑一下像[Magento](http://www.magentocommerce.com/)这样的东西，它在基本安装中有 6,744 个文件，更不用说何时开始添加自己的皮肤，通常运行到大约 500 个文件。使用版本控制来部署类似这样的东西可以节省大量时间通过 FTP 上传这么多小文件，因为只发送修改过的文件。

除此之外，我从未真正尝试过这样的部署，因此我无法提供任何真实世界的体验，但是有几篇关于如何获得此设置的好文章，可以在[这里](http://arstechnica.com/articles/columns/linux/linux-20050406.ars)看到一篇好文章。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-03T17:58:12.403

这是一个 wiki，它应该为您提供有关将 Subversion 添加到 Dreamhost 所需的所有信息。

[http://wiki.dreamhost.com/index.php/Subversion](http://wiki.dreamhost.com/index.php/Subversion)

我现在在我的网站上使用了 Subversion，它确实让它变得更容易了。我在我的 Windows 机器上使用 Aptana 并通过该程序上传所有内容。它允许我比较旧版本，恢复它们，分支新版本等......

这是一个巨大的节省时间！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-08T13:55:48.240

我也使用 Zend Framework 进行开发，这里是我使用 FTP 和版本控制的方法。

在我的本地机器上，我安装了 Subversion 和 TortoiseSVN。

1.  如果我开始一个新项目，我会以我喜欢的方式**设置一个 SVN 存储库（我使用 trunk/branches/tags 系统）。**

2.  我将主干中**的初始工作副本签出**到本地 webroot 中的项目文件夹。

3.  我**在 Aptana 中创建了一个新项目，**并将项目路径设置为我在本地主机上的项目文件夹。

4.  **Aptana 了解**该项目是版本化的，并在每个文件上显示适当的图标。我可以直接在 Aptana 的文件树中执行许多版本控制功能，不需要任何 shell 甚至 Tortoise。

5.  一旦我有一个稳定的、可部署的应用程序版本，我就会**创建一个版本控制标签**。然后我做了一个导出（取消版本化）。

6.  然后**通过 FTP 上传**导出的应用程序。

无论如何，我现在就是这样做的，也许它可以澄清一些事情。欢迎提供有关改进程序的提示！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-03T18:37:54.820

Eric Sink 关于源代码控制的文章是了解基本概念的好地方。

[http://www.ericsink.com/scm/source_control.html](http://www.ericsink.com/scm/source_control.html)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-07-15T13:55:19.213

正如其他人所说，您可以在本地设置版本控制......或在您的主机上。我建议你做最适合你的事情。

您提到使用 Dreamhost。我支持那里的一个小站点，并且知道它们确实允许通过[scp](http://wiki.dreamhost.com/SCP)和[sftp](http://wiki.dreamhost.com/SFTP)上传。这将允许您使用加密的密码上传文件。（如果你不想，你不必*采用*版本控制方法！;-) 向下滚动我链接到的 sftp 页面，你会发现一些对 scp 和 sftp 客户端的建议。

FWIW，如果您使用的是 Windows，我已经使用[WinSCP](http://winscp.net/eng/index.php)多年并且喜欢它。另外，如果您想要完全登录访问，我建议[PuTTY](http://www.chiark.greenend.org.uk/~sgtatham/putty/)；它的完整下载还包括用于 sftp 和 scp 的基于命令行的客户端。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-03T18:02:09.087

使用ftp上传没有问题。唯一的缺点是密码以纯文本形式传输。

最好有一个本地版本控制系统，它可以让您轻松查看版本之间的更改，并快速恢复到旧版本，等等......

我认为不需要在共享主机上安装版本控制系统。只有当您想从不同的站点（在家、工作中、旅行时）访问版本控制系统时，它才能派上用场。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-07-15T13:30:37.737

有一个很棒的 bzr 插件，称为[bzr-upload](https://launchpad.net/bzr-upload)，专为您的用例而设计。bzr 非常轻量级（无需设置任何存储库）并且超级容易开始使用，即使您以前没有使用过任何类型的源代码控制。它是 bzr 的插件，每次您在本地机器上提交时，它都会将更改的文件 s/ftp 到您的网络主机。它不会推送所有版本控制信息，只会推送文件本身。

# sql-server - CAST 和 IsNumeric

> ID：338075
> 
> 赞同：29
> 
> 时间：2008-12-03T17:51:26.737
> 
> 标签：sql-server, sql-server-2005

为什么以下查询会返回“将数据类型 varchar 转换为 bigint 时出错”？IsNumeric 不会使 CAST 安全吗？我已经尝试了演员表中的每种数字数据类型，并得到相同的“错误转换...”错误。我不相信结果数字的大小是一个问题，因为溢出是一个不同的错误。

有趣的是，在管理工作室中，结果实际上会在错误再次出现之前显示在结果窗格中一瞬间。

```
SELECT CAST(myVarcharColumn AS bigint)  
FROM myTable  
WHERE IsNumeric(myVarcharColumn) = 1 AND myVarcharColumn IS NOT NULL  
GROUP BY myVarcharColumn 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2008-12-03T18:02:26.310

如果 varchar 值可以转换为任何数字类型，则 IsNumeric 返回 1。这包括 int、bigint、decimal、numeric、real 和 float。

科学记数法可能会给您带来问题。例如：

```
Declare @Temp Table(Data VarChar(20))

Insert Into @Temp Values(NULL)
Insert Into @Temp Values('1')
Insert Into @Temp Values('1e4')
Insert Into @Temp Values('Not a number')

Select Cast(Data as bigint)
From   @Temp
Where  IsNumeric(Data) = 1 And Data Is Not NULL 
```

IsNumeric 可以使用一个技巧，以便它为科学计数法的数字返回 0。您可以应用类似的技巧来防止十进制值。

IsNumeric(YourColumn + 'e0')

IsNumeric(YourColumn + '.0e0')

试试看。

```
SELECT CAST(myVarcharColumn AS bigint)
FROM myTable
WHERE IsNumeric(myVarcharColumn + '.0e0') = 1 AND myVarcharColumn IS NOT NULL
GROUP BY myVarcharColumn 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-02-14T03:20:36.610

## 背景：

我使用第 3 方数据库，该数据库不断接收来自其他第 3 方供应商的新数据。
解析出用于存储结果的可怕 varchar 字段是我的工作。
我们希望解析出尽可能多的数据，该解决方案向您展示了如何“清理”数据，以免忽略有效条目。

1.  一些结果是自由文本的。
2.  有些是枚举（是、否、蓝色、黑色等）。
3.  有些是整数。
4.  其他人使用小数。
5.  许多是百分比，如果将其转换为整数，以后可能会绊倒你。

如果我需要查询给定的十进制范围（比如 -1.4 到 3.6，如果适用），我的选择是有限的。
我更新了下面的查询以使用@GMastros 建议附加“e0”。
感谢@GMastros，这为我节省了额外的两行逻辑。

# 解决方案：

```
--NOTE: I'd recommend you use this to convert your numbers and store them in a separate table (or field).
--      This way you may reuse them when when working with legacy/3rd-party systems, instead of running these calculations on the fly each time.
SELECT Result.Type, Result.Value, Parsed.CleanValue, Converted.Number[Number - Decimal(38,4)],
       (CASE WHEN Result.Value IN ('0', '1', 'True', 'False') THEN CAST(Result.Value as Bit) ELSE NULL END)[Bit],--Cannot convert 1.0 to Bit, it must be in Integer format already.
       (CASE WHEN Converted.Number BETWEEN 0 AND 255 THEN CAST(Converted.Number as TinyInt) ELSE NULL END)[TinyInt],
       (CASE WHEN Converted.Number BETWEEN -32768 AND 32767 AND Result.Value LIKE '%\%%' ESCAPE '\' THEN CAST(Converted.Number / 100.0 as Decimal(9,4)) ELSE NULL END)[Percent],
       (CASE WHEN Converted.Number BETWEEN -32768 AND 32767 THEN CAST(Converted.Number as SmallInt) ELSE NULL END)[SmallInt],
       (CASE WHEN Converted.Number BETWEEN -214748.3648 AND 214748.3647 THEN CAST(Converted.Number as SmallMoney) ELSE NULL END)[SmallMoney],
       (CASE WHEN Converted.Number BETWEEN -2147483648 AND 2147483647 THEN CAST(Converted.Number as Int) ELSE NULL END)[Int],
       (CASE WHEN Converted.Number BETWEEN -2147483648 AND 2147483647 THEN CAST(CAST(Converted.Number as Decimal(10)) as Int) ELSE NULL END)[RoundInt],--Round Up or Down instead of Truncate.
       (CASE WHEN Converted.Number BETWEEN -922337203685477.5808 AND 922337203685477.5807 THEN CAST(Converted.Number as Money) ELSE NULL END)[Money],
       (CASE WHEN Converted.Number BETWEEN -9223372036854775808 AND 9223372036854775807 THEN CAST(Converted.Number as BigInt) ELSE NULL END)[BigInt],
       (CASE WHEN Parsed.CleanValue IN ('1', 'True', 'Yes', 'Y', 'Positive', 'Normal')   THEN CAST(1 as Bit)
             WHEN Parsed.CleanValue IN ('0', 'False', 'No', 'N', 'Negative', 'Abnormal') THEN CAST(0 as Bit) ELSE NULL END)[Enum],
       --I couln't use just Parsed.CleanValue LIKE '%e%' here because that would match on "True" and "Negative", so I also had to match on only allowable characters. - 02/13/2014 - MCR.
       (CASE WHEN ISNUMERIC(Parsed.CleanValue) = 1 AND Parsed.CleanValue LIKE '%e%' THEN Parsed.CleanValue ELSE NULL END)[Exponent]
  FROM
  (
    VALUES ('Null', NULL), ('EmptyString', ''), ('Spaces', ' - 2 . 8 % '),--Tabs and spaces mess up IsNumeric().
           ('Bit', '0'), ('TinyInt', '123'), ('Int', '123456789'), ('BigInt', '1234567890123456'),
           --('VeryLong', '12345678901234567890.1234567890'),
           ('VeryBig', '-1234567890123456789012345678901234.5678'),
           ('TooBig',  '-12345678901234567890123456789012345678.'),--34 (38-4) is the Longest length of an Integer supported by this query.
           ('VeryLong', '-1.2345678901234567890123456789012345678'),
           ('TooLong', '-12345678901234567890.1234567890123456789'),--38 Digits is the Longest length of a Number supported by the Decimal data type.
           ('VeryLong', '000000000000000000000000000000000000001.0000000000000000000000000000000000000'),--Works because Casting ignores leading zeroes.
           ('TooLong', '.000000000000000000000000000000000000000'),--Exceeds the 38 Digit limit for all Decimal types after the decimal-point.
           --Dot(.), Plus(+), Minus(-), Comma(,), DollarSign($), BackSlash(\), Tab(0x09), and Letter-E(e) all yeild false-posotives with IsNumeric().
           ('Decimal', '.'), ('Decimal', '.0'), ('Decimal', '3.99'),
           ('Positive', '+'), ('Positive', '+20'),
           ('Negative', '-'), ('Negative', '-45'), ('Negative', '- 1.23'),
           ('Comma', ','), ('Comma', '1,000'),
           ('Money', '$'), ('Money', '$10'),
           ('Percent', '%'), ('Percent', '110%'),--IsNumeric will kick out Percent(%) signs.
           ('BkSlash', '\'), ('Tab', CHAR(0x09)),--I've actually seen tab characters in our data.
           ('Exponent', 'e0'), ('Exponent', '100e-999'),--No SQL-Server datatype could hold this number, though it is real.
           ('Enum', 'True'), ('Enum', 'Negative')
  ) AS Result(Type, Value)--O is for Observation.
  CROSS APPLY
  ( --This Step is Optional.  If you have Very Long numbers with tons of leading zeros, then this is useful.  Otherwise is overkill if all the numbers you want have 38 or less digits.
    --Casting of trailing zeros count towards the max 38 digits Decimal can handle, yet Cast ignores leading-zeros.  This also cleans up leading/trailing spaces. - 02/25/2014 - MCR.
    SELECT LTRIM(RTRIM(SUBSTRING(Result.Value, PATINDEX('%[^0]%', Result.Value + '.'), LEN(Result.Value))))[Value]
  ) AS Trimmed
  CROSS APPLY
  (
    SELECT --You will need to filter out other Non-Keyboard ASCII characters (before Space(0x20) and after Lower-Case-z(0x7A)) if you still want them to be Cast as Numbers. - 02/15/2014 - MCR.
           REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(Trimmed.Value,--LTRIM(RTRIM(Result.Value)),
           (CHAR(0x0D) + CHAR(0x0A)), ''),--Believe it or not, we have people that press carriage return after entering in the value.
           CHAR(0x09), ''),--Apparently, as people tab through controls on a page, some of them inadvertently entered Tab's for values.
           ' ', ''),--By replacing spaces for values (like '- 2' to work), you open the door to values like '00 12 3' - your choice.
           '$', ''), ',', ''), '+', ''), '%', ''), '/', '')[CleanValue]
  ) AS Parsed--P is for Parsed.
  CROSS APPLY
  ( --NOTE: I do not like my Cross-Applies to feed into each other.
    --      I'm paranoid it might affect performance, but you may move this into the select above if you like. - 02/13/2014 - MCR.
    SELECT (CASE WHEN ISNUMERIC(Parsed.CleanValue + 'e0') = 1--By concatenating 'e0', I do not need to check for: Parsed.CleanValue NOT LIKE '%e%' AND Parsed.CleanValue NOT IN ('.', '-')
                 --  If you never plan to work with big numbers, then could use Decimal(19,4) would be best as it only uses 9 storage bytes compared to the 17 bytes that 38 precision requires.
                 --  This might help with performance, especially when converting a lot of data.
                  AND CHARINDEX('.', REPLACE(Parsed.CleanValue, '-', '')) - 1    <= (38-4)--This is the Longest Integer supported by Decimal(38,4)).
                  AND LEN(REPLACE(REPLACE(Parsed.CleanValue, '-', ''), '.', '')) <= 38--When casting to a Decimal (of any Precision) you cannot exceed 38 Digits. - 02/13/2014 - MCR.
                 THEN CAST(Parsed.CleanValue as Decimal(38,4))--Scale of 4 used is the max that Money has.  This is the biggest number SQL Server can hold.
                 ELSE NULL END)[Number]
  ) AS Converted--C is for Converted. 
```

## 输出：

下面的屏幕截图经过格式化和缩减以适合 StackOverflow。
实际结果有更多列。 ![MikeTeeVee 的 IsNumeric Casting](https://i.stack.imgur.com/r7Rsb.png)

## 研究：

每个查询旁边是结果。
有趣的是，IsNumeric 的缺点以及 CASTing 的局限性。
我展示了这一点，以便您可以看到编写上述查询的背景研究。
了解每个设计决策很重要（以防您考虑删减任何内容）。

```
SELECT ISNUMERIC('')--0\.  This is understandable, but your logic may want to default these to zero.
SELECT ISNUMERIC(' ')--0\.  This is understandable, but your logic may want to default these to zero.
SELECT ISNUMERIC('%')--0.
SELECT ISNUMERIC('1%')--0.
SELECT ISNUMERIC('e')--0.
SELECT ISNUMERIC('  ')--1\.  --Tab.
SELECT ISNUMERIC(CHAR(0x09))--1\.  --Tab.
SELECT ISNUMERIC(',')--1.
SELECT ISNUMERIC('.')--1.
SELECT ISNUMERIC('-')--1.
SELECT ISNUMERIC('+')--1.
SELECT ISNUMERIC('$')--1.
SELECT ISNUMERIC('\')--1\.  '
SELECT ISNUMERIC('e0')--1.
SELECT ISNUMERIC('100e-999')--1\.  No SQL-Server datatype could hold this number, though it is real.
SELECT ISNUMERIC('3000000000')--1\.  This is bigger than what an Int could hold, so code for these too.
SELECT ISNUMERIC('1234567890123456789012345678901234567890')--1\.  Note: This is larger than what the biggest Decimal(38) can hold.
SELECT ISNUMERIC('- 1')--1.
SELECT ISNUMERIC('  1  ')--1.
SELECT ISNUMERIC('True')--0.
SELECT ISNUMERIC('1/2')--0\.  No love for fractions.

SELECT CAST('e0'  as Int)--0\.  Surpise!  Casting to Decimal errors, but for Int is gives us zero, which is wrong.
SELECT CAST('0e0'  as Int)--0\.  Surpise!  Casting to Decimal errors, but for Int is gives us zero, which is wrong.
SELECT CAST(CHAR(0x09) as Decimal(12,2))--Error converting data type varchar to numeric.  --Tab.
SELECT CAST('   1' as Decimal(12,2))--Error converting data type varchar to numeric.  --Tab.
SELECT CAST(REPLACE('   1', CHAR(0x09), '') as Decimal(12,2))--Error converting data type varchar to numeric.  --Tab.
SELECT CAST(''  as Decimal(12,2))--Error converting data type varchar to numeric.
SELECT CAST(''  as Int)--0\.  Surpise!  Casting to Decimal errors, but for Int is gives us zero, which is wrong.
SELECT CAST(',' as Decimal(12,2))--Error converting data type varchar to numeric.
SELECT CAST('.' as Decimal(12,2))--Error converting data type varchar to numeric.
SELECT CAST('-' as Decimal(12,2))--Arithmetic overflow error converting varchar to data type numeric.
SELECT CAST('+' as Decimal(12,2))--Arithmetic overflow error converting varchar to data type numeric.
SELECT CAST('$' as Decimal(12,2))--Error converting data type varchar to numeric.
SELECT CAST('$1' as Decimal(12,2))--Error converting data type varchar to numeric.
SELECT CAST('1,000' as Decimal(12,2))--Error converting data type varchar to numeric.
SELECT CAST('- 1'   as Decimal(12,2))--Error converting data type varchar to numeric.  (Due to spaces).
SELECT CAST('  1  ' as Decimal(12,2))--1.00  Leading and trailing spaces are okay.
SELECT CAST('1.' as Decimal(12,2))--1.00
SELECT CAST('.1' as Decimal(12,2))--0.10
SELECT CAST('-1' as Decimal(12,2))--1.00
SELECT CAST('+1' as Decimal(12,2))--1.00
SELECT CAST('True'  as Bit)--1
SELECT CAST('False' as Bit)--0
--Proof: The Casting to Decimal cannot exceed 38 Digits, even if the precision is well below 38.
SELECT CAST('1234.5678901234567890123456789012345678' as Decimal(8,4))--1234.5679
SELECT CAST('1234.56789012345678901234567890123456789' as Decimal(8,4))--Arithmetic overflow error converting varchar to data type numeric.

--Proof: Casting of trailing zeros count towards the max 38 digits Decimal can handle, yet it ignores leading-zeros.
SELECT CAST('.00000000000000000000000000000000000000' as Decimal(8,4))--0.0000  --38 Digits after the decimal point.
SELECT CAST('000.00000000000000000000000000000000000000' as Decimal(8,4))--0.0000  --38 Digits after the decimal point and 3 zeros before the decimal point.
SELECT CAST('.000000000000000000000000000000000000000' as Decimal(8,4))--Arithmetic overflow error converting varchar to data type numeric.  --39 Digits after the decimal point.
SELECT CAST('1.00000000000000000000000000000000000000' as Decimal(8,4))--Arithmetic overflow error converting varchar to data type numeric.  --38 Digits after the decimal point and 1 non-zero before the decimal point.
SELECT CAST('000000000000000000000000000000000000001.0000000000000000000000000000000000000' as Decimal(8,4))--1.0000

--Caveats: When casting to an Integer:
SELECT CAST('3.0' as Int)--Conversion failed when converting the varchar value '3.0' to data type int.
--NOTE: When converting from character data to Int, you may want to do a double-conversion like so (if you want to Round your results first):
SELECT CAST(CAST('3.5'  as Decimal(10))   as Int)--4\.  Decimal(10) has no decimal precision, so it rounds it to 4 for us BEFORE converting to an Int.
SELECT CAST(CAST('3.5'  as Decimal(11,1)) as Int)--3\.  Decimal (11,1) HAS decimal precision, so it stays 3.5 before converting to an Int, which then truncates it.
--These are the best ways to go if you simply want to Truncate or Round.
SELECT CAST(CAST('3.99' as Decimal(10)) as Int)--3\.  Good Example of Rounding.
SELECT CAST(FLOOR('3.99') as Int)--3\.  Good Example fo Truncating. 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-12-03T17:55:51.317

试试这个，看看你是否仍然得到错误......

```
SELECT CAST(CASE 
            WHEN IsNumeric(myVarcharColumn) = 0
                THEN 0
            ELSE myVarcharColumn
            END AS BIGINT)
FROM myTable
WHERE IsNumeric(myVarcharColumn) = 1
    AND myVarcharColumn IS NOT NULL
GROUP BY myVarcharColumn 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-12-03T18:45:47.190

最好的解决方案是停止在 varchar 列中存储整数。显然存在一个数据问题，即数据可以解释为数字但不能这样转换。您需要找到存在问题的记录并修复它们，如果数据是可以而且应该修复的。根据您存储的内容以及为什么它是 varchar 开头，您可能需要修复查询而不是数据。但是，如果您首先找到正在破坏您当前查询的记录，这也将更容易做到。

如何做到这一点是个问题。使用 charindex 在数据中搜索小数位以查看是否有小数（除了 .0 会转换）相对容易。您还可以查找任何包含 e 或 $ 或任何其他字符的记录，这些字符可以根据已经给出的来源被解释为数字。如果您没有很多记录，则可能会通过快速的视觉扫描数据找到它，特别是如果您首先对该字段进行排序。

有时，当我一直坚持寻找导致查询失败的坏数据时，我会将数据放入临时表中，然后尝试分批处理（使用插值），直到找到导致查询失败的数据。从前 1000 条开始（不要忘记使用 order by，否则删除好的记录时不会得到相同的结果，如果有数百万条记录以较大的数字开头，1000 只是最好的猜测）。如果通过，删除那 1000 条记录并选择下一批。一旦失败，请选择较小的批次。一旦您找到一个可以轻松通过目视扫描的数字，您就会发现问题所在。当我有数百万条记录和一个奇怪的错误时，我已经能够相当快地找到问题记录，我没有任何查询

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-05T11:40:08.660

ISNUMERIC 只是......愚蠢。你应该使用它。以下所有情况都返回 1：

```
ISNUMERIC('-')
ISNUMERIC('.')
ISNUMERIC('-$.') 
```

对于任何整数类型，而不是使用：`ISNUMERIC(@Value) = 1` 只需使用：`(@Value NOT LIKE '[^0-9]') OR (@Value NOT LIKE '-[^0-9]'`

唯一好的解决方案是不使用 ISNUMERIC。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-12-03T17:58:42.217

尝试将其包装在一个案例中：

```
select CASE WHEN IsNumeric(mycolumn) = 1 THEN CAST(mycolumn as bigint) END
FROM stack_table
WHERE IsNumeric(mycolumn) = 1
GROUP BY mycolumn 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-12-03T18:22:32.730

根据[BOL](http://msdn.microsoft.com/en-us/library/ms186272.aspx) ISNUMERIC 在输入表达式计算为有效数值数据类型时返回 1；否则返回 0。

有效的数值数据类型包括：

*   整数
*   数字
*   大整数
*   钱
*   小字
*   小钱
*   微小的
*   漂浮
*   十进制
*   真实的

因此，正如其他人指出的那样，您将拥有一些通过**ISNUMERIC**测试但无法转换为 bigint 的数据

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-06-05T07:32:53.780

我有同样的问题，我在 2008 SQL 上想出了与 Im 一样的标量函数

```
ALTER Function [dbo].[IsInteger](@Value VarChar(18))
Returns Bit
As 
Begin

  Return IsNull(
     (Select Case When CharIndex('.', @Value) > 0 
                  Then 0
                  Else 1
             End
      Where IsNumeric(@Value + 'e0') = 1), 0)    
End 
```

如果你在 2012 年，你可以使用`TRY_CONVERT`

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-03-23T16:27:30.613

我在 MSSQL 2014 中遇到了同样的问题，由逗号而不是句号触发：isnumeric('9090,23') 给出 1; cast('9090,23' as float) 失败

我已将 ',' 替换为 '.'

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-01-05T18:29:12.843

有 DAX 函数（IsError 或 IfError）可以在这种情况下提供帮助，但我们的 SQL Server 2008 R2 上没有这些函数。看起来像是 SQL Server 的一些附加分析包。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2008-12-03T18:01:51.600

我遇到了这篇可能会有所帮助的博客文章。我以前没有遇到过这个问题，不确定在这种情况下它是否会对您有所帮助：

[http://dotmad.blogspot.com/2007/02/cannot-call-methods-on-bigint-error.html](http://dotmad.blogspot.com/2007/02/cannot-call-methods-on-bigint-error.html)

# windows - Windows 中的 64 位 Qt 和 Postgres 插件

> ID：338082
> 
> 赞同：3
> 
> 时间：2008-12-03T17:53:32.630
> 
> 标签：windows, qt, postgresql, 64-bit

我有一个使用 Postgres 插件的 32 位 Windows/Qt 应用程序。最近，我很想把这个应用程序变成一个 64 位应用程序。所以我检查了 Qt 文档的说明，成功地将 Qt 及其库构建为 64 位。现在的问题是 Postgres 不为 64 位 Windows 提供库！显然，Qt Postgres 插件不会编译。我用谷歌搜索了很多，没有找到任何解决方案，只是一堆无用的讨论存档帖子。那么，有没有办法让我在 Windows 中使用 Postgres 时将我的应用程序编译为真正的 64 位？

**ADDENUM** 问题不是在 Windows 上将 Postgres 作为真正的 64 位运行（[这无法完成](http://blog.hagander.net/archives/73-PostgreSQL-vs-64-bit-windows.html)）（我没有管理数据库，所以我什至不在乎），而是将我的 Qt 应用程序编译为 64 位（这从真正的 64 位中受益匪浅）。但由于它需要访问 Postgres DB，我做不到，Qt Postgres 插件将无法编译，我将无法访问 DB。

那么，我应该将与 Postgres 相关的内容分离到 32 位 DLL（我可以将 32 位 dll 与 64 位应用程序一起使用吗？），甚至是单独的可执行文件，还是可以使用其他一些框架来访问它。 ..？

**给我任何，甚至是肮脏的解决**这个问题的方法，并说明它可能有的利弊，以及它可能影响或破坏的其他内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-15T22:59:29.637

我即将在我的工作机器上安装 Vista 64，所以我也在查找这个。

基本上 - 不，Postrgresql 不会在 Windows 64 位（还）中编译，尽管它在 *nix 64 位中已经工作了多年。

我从 Windows 安装程序的一位维护者那里找到了这个[链接](http://blog.hagander.net/archives/73-PostgreSQL-vs-64-bit-windows.html)。

# .net - COM 互操作程序集加载顺序

> ID：338083
> 
> 赞同：7
> 
> 时间：2008-12-03T17:53:38.543
> 
> 标签：.net, interop, outlook, gac, assembly-loading

我在使用 Outlook 插件时遇到了非常奇怪的程序集参考问题和加载问题。以下是详细信息（说来话长：））：

我有一个旧的 Outlook 插件，使用 .Net 1.1 编写和构建。插件是使用其自己的应用程序域中的非托管 shim 加载的。使用 .Net 2.0 可以正常工作，即使用户机器上不存在 1.1。

该插件使用由 VS 2003 针对 Outlook 2000 创建的自定义 Outlook 互操作程序集，然后重建为强命名（就像我的插件一样）。

在插件项目中，我只引用了这个自定义互操作程序集，没有引用官方的 MS 互操作程序集。

当这个插件在 Outlook 2007 和 .Net 2.0 的环境中使用时，官方的 MS 互操作程序集安装在 GAC 中，出于某种原因，我看到插件加载并使用它们。

在 Connect 类的代码中，我有一个 using 指令：

```
using Outlook; 
```

这是我的自定义互操作程序集的命名空间。

在 Connect ctor 我有这些代码行（添加用于测试目的）：

```
Assembly.LoadFrom(PATHTOMYASSEMBLY + "Interop.Outlook.dll");
Type type = typeof(Outlook.ApplicationClass);
logger.Debug("Outlook.Application full type is: {0}", type.AssemblyQualifiedName); 
```

这输出：

> Outlook.Application 完整类型为：Outlook.ApplicationClass、Interop.Outlook、Version=9.0.0.0、Culture=neutral、PublicKeyToken=4cfbdc5349cf59d8

这正是我所期望的。

问题是，当调用 OnConnection(object application, Extensibility.ext_ConnectMode connectMode, object addInInst, ref System.Array custom) 时，我在日志中看到 MS 互操作（我有一个当前域的 AssemblyLoad 事件的挂钩）程序集也被加载：

```
private void app_domain_AssemblyLoad(object sender, AssemblyLoadEventArgs args)
{
    Assembly loadedAssembly = args.LoadedAssembly;
    logger.Debug("Assembly {0} is loaded from: {1}", loadedAssembly.FullName, loadedAssembly.GlobalAssemblyCache ? "GAC" : loadedAssembly.Location);
} 
```

输出：

> 程序集 Microsoft.Office.Interop.Outlook，Version=12.0.0.0，Culture=neutral，PublicKeyToken=71e9bce111e9429c 加载自：GAC

我的 OnConnection 方法是这样开始的：

```
public void OnConnection(object application, Extensibility.ext_ConnectMode connectMode, object addInInst, ref System.Array custom)
{
    Type type = application.GetType();
    logger.Debug("OnConnection application object's full type is: {0}", type.AssemblyQualifiedName);

    Outlook.Application applicationObject = (Outlook.Application)application; 
```

这输出：

> OnConnection 应用程序对象的完整类型是：Microsoft.Office.Interop.Outlook.ApplicationClass, Microsoft.Office.Interop.Outlook, Version=12.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c

这真的很奇怪，你可以在下一行看到我可以成功地转换到 Outlook.Application 没有任何问题。

我已经检查过 Reflector，我的程序集不以任何方式引用 Microsoft 的互操作程序集。我的 Interop.Outlook.dll 也是如此。

那么，有人知道发生了什么吗？这些问题的答案是什么：

1.  为什么它会加载 Microsoft 程序集？

2.  如何在不同程序集中定义的不相关类/接口之间进行转换？

注意：我创建了一个新插件，非常简单，它什么都不做，只是加载。我可以重现这个问题，所以真的，有谁知道 CLR 如何决定加载什么互操作以及从哪里加载。除了在 GAC 中，还有其他地方（注册表？？？）在 COM 对象和它所需的互操作之间存在链接？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-29T01:00:45.473

我想我在 Microsoft 的[Primary Interop Assemblies](http://msdn.microsoft.com/en-us/library/aa302338.aspx#whypriinterop_topic6)入门中找到了您问题的答案。PIA 在 Visual Studio 中的处理方式不同：

> 当用户尝试添加对已注册 PIA 的类型库的引用时，Visual Studio 将静默使用已注册的 PIA，而不是使用 Tlbimp 重新导入类型库。这可确保尽可能使用 PIA。

这意味着当你在项目中添加对你自己的 IA 的引用时，Visual Studio 会检查是否有为此 COM 对象注册的 PIA。Outlook PIA 在以下键下注册：

```
HKEY_CLASSES_ROOT\CLSID\{0006F023-0000-0000-C000-000000000046}\InprocServer32\12.0.0.0
    Assembly="Microsoft.Office.Interop.Outlook, Version=12.0.0.0, Culture=neutral, PublicKeyToken=71E9BCE111E9429C" 
```

据我了解，使用 regasm 工具取消注册 PIA 应该删除密钥并重新添加对您自己的 IA 的引用应该会产生预期的结果。

但是，如果有可用的 PIA，Microsoft 不建议使用自定义 IA。我不明白这个的确切原因，但我认为这可能与封送优化和具有独特的类型定义有关。

# python - Python 函数属性 - 使用和滥用

> ID：338101
> 
> 赞同：223
> 
> 时间：2008-12-03T17:56:45.387
> 
> 标签：python, function, attributes

没有多少人知道这个特性，但是 Python 的函数（和方法）可以有[属性](http://www.python.org/dev/peps/pep-0232/)。看哪：

```
>>> def foo(x):
...     pass
...     
>>> foo.score = 10
>>> dir(foo)
['__call__', '__class__', '__delattr__', '__dict__', '__doc__', '__get__', '__getattribute__', '__hash__', '__init__', '__module__', '__name__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__str__', 'func_closure', 'func_code', 'func_defaults', 'func_dict', 'func_doc', 'func_globals', 'func_name', 'score']
>>> foo.score
10
>>> foo.score += 1
>>> foo.score
11 
```

这个特性在 Python 中有哪些可能的用途和滥用？我知道的一个很好的用途是[PLY](http://www.dabeaz.com/ply/)使用文档字符串将语法规则与方法相关联。但是自定义属性呢？有充分的理由使用它们吗？

* * *

## 回答 #1

> 赞同：172
> 
> 时间：2008-12-03T18:06:51.230

我通常使用函数属性作为注释的存储。假设我想写，C#的风格（表示某个方法应该是Web服务接口的一部分）

```
class Foo(WebService):
    @webmethod
    def bar(self, arg1, arg2):
         ... 
```

然后我可以定义

```
def webmethod(func):
    func.is_webmethod = True
    return func 
```

然后，当 web 服务调用到达时，我查找方法，检查底层函数是否具有 is_webmethod 属性（实际值无关），如果方法不存在或不打算通过 web 调用，则拒绝服务。

* * *

## 回答 #2

> 赞同：142
> 
> 时间：2008-12-03T19:23:38.660

我将它们用作函数的静态变量。例如，给定以下 C 代码：

```
int fn(int i)
{
    static f = 1;
    f += i;
    return f;
} 
```

我可以在 Python 中类似地实现该函数：

```
def fn(i):
    fn.f += i
    return fn.f
fn.f = 1 
```

这肯定会落入频谱的“滥用”端。

* * *

## 回答 #3

> 赞同：60
> 
> 时间：2008-12-04T13:53:06.890

你可以用 JavaScript 的方式做对象......这没有意义，但它有效；）

```
>>> def FakeObject():
...   def test():
...     print "foo"
...   FakeObject.test = test
...   return FakeObject
>>> x = FakeObject()
>>> x.test()
foo 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2009-10-07T18:20:06.360

我很少使用它们，但它们非常方便：

```
def log(msg):
   log.logfile.write(msg) 
```

现在我可以`log`在整个模块中使用，只需通过设置来重定向输出`log.logfile`。有很多其他方法可以实现这一点，但这个轻巧且简单。虽然我第一次这样做时闻起来很有趣，但我开始相信它闻起来比使用全局`logfile`变量更好。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2008-12-03T20:27:41.853

函数属性可用于编写将代码和相关数据包装在一起的轻量级闭包：

```
#!/usr/bin/env python

SW_DELTA = 0
SW_MARK  = 1
SW_BASE  = 2

def stopwatch():
   import time

   def _sw( action = SW_DELTA ):

      if action == SW_DELTA:
         return time.time() - _sw._time

      elif action == SW_MARK:
         _sw._time = time.time()
         return _sw._time

      elif action == SW_BASE:
         return _sw._time

      else:
         raise NotImplementedError

   _sw._time = time.time() # time of creation

   return _sw

# test code
sw=stopwatch()
sw2=stopwatch()
import os
os.system("sleep 1")
print sw() # defaults to "SW_DELTA"
sw( SW_MARK )
os.system("sleep 2")
print sw()
print sw2() 
```

1.00934004784

2.00644397736

3.01593494415

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2015-03-26T18:50:05.743

我创建了这个辅助装饰器来轻松设置函数属性：

```
def with_attrs(**func_attrs):
    """Set attributes in the decorated function, at definition time.
    Only accepts keyword arguments.
    E.g.:
        @with_attrs(counter=0, something='boing')
        def count_it():
            count_it.counter += 1
        print count_it.counter
        print count_it.something
        # Out:
        # >>> 0
        # >>> 'boing'
    """
    def attr_decorator(fn):
        @wraps(fn)
        def wrapper(*args, **kwargs):
            return fn(*args, **kwargs)

        for attr, value in func_attrs.iteritems():
            setattr(wrapper, attr, value)

        return wrapper

    return attr_decorator 
```

一个用例是创建工厂集合并查询它们可以在函数元级别创建的数据类型。
例如（非常愚蠢的一个）：

```
@with_attrs(datatype=list)
def factory1():
    return [1, 2, 3]

@with_attrs(datatype=SomeClass)
def factory2():
    return SomeClass()

factories = [factory1, factory2]

def create(datatype):
    for f in factories:
        if f.datatype == datatype:
            return f()
    return None 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2008-12-04T08:43:52.723

有时我使用函数的属性来缓存已经计算的值。您还可以拥有一个泛化这种方法的通用装饰器。请注意此类函数的并发问题和副作用！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-01-16T18:25:23.187

我一直认为这可能的唯一原因是有一个合乎逻辑的地方可以放置文档字符串或其他类似的东西。我知道如果我将它用于任何生产代码，它会使大多数阅读它的人感到困惑。

# c - Windows 上是否有被视为行业标准的 C 编译器或 IDE？

> ID：338102
> 
> 赞同：23
> 
> 时间：2008-12-03T17:56:54.683
> 
> 标签：c, windows, ide, compiler-construction

听从[这篇文章的](http://stackoverflow.com/questions/1711/what-is-the-single-most-influential-book-every-programmer-should-read)建议，我购买了一本“C 编程语言”，并且很高兴地阅读了我的方法。

然而，我过去写的所有东西都被解释过了，我不知道去哪里寻找一个好的 C 编译器或 IDE（甚至有一个吗？）。谷歌搜索为 C++ 编译器提供了很多结果，我认为这不是一回事吗？哈哈。我想知道是否有被视为行业标准的 C 编译器或 IDE（有点像 Zend Studio 几乎是 PHP*的*IDE），或者至少有一个通常被认为是优质产品的编译器或 IDE .

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-01-09T02:18:19.817

我很惊讶没有人提到[Pelles C](http://www.smorgasbordet.com/pellesc/)。很棒的 Windows 小 C IDE；包括基于 LCC 的编译器。也就是说，[NetBeans 6.5](http://www.netbeans.org/downloads/index.html)对 C 和 C++ 提供了不错的支持，而且[Code::Blocks](http://www.codeblocks.org/)非常值得一试。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-12-03T18:03:21.847

嗯，Visual Studio 是 Windows 上的标准，并且有免费版本可用。然而，它确实有一堆微软特定的扩展。不过，对于学习来说，开发控制台应用程序非常容易，并且也非常接近标准的 K&R 风格 C。

然而，回到我曾经使用 Watcom 的那一天，这在当时也很不错。它比 Visual Studio 稀疏得多，但这对初学者来说可能是一个优势。我相信这些天在[http://www.openwatcom.org/index.php/Main_Page上也可以免费获得它](http://www.openwatcom.org/index.php/Main_Page)

如果您的主要操作系统是 Windows，我可能会建议您从它开始。

编辑：[新的实时网址](http://www.openwatcom.org/)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2008-12-03T18:01:50.507

大多数人使用 Microsoft Visual Studio 在 Windows 上进行开发。您可以在这里获得免费版本：http: [//www.microsoft.com/express/download/](http://www.microsoft.com/express/download/)。

通常 GCC 用于 Unix，并且通常包含在操作系统中。

C 和 C++ 非常相似，但 C++ 允许使用类。大多数 C++ 编译器都会编译 C 代码。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-12-03T18:09:56.967

我在大学时几乎只使用[DevC++进行 C\C++ 编程。](http://www.bloodshed.net/devcpp.html)[它与MinGW](http://en.wikipedia.org/wiki/MinGW)编译器捆绑在一起。设置和滚动非常容易。除此之外，我唯一的其他建议是 Visual Studio。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-12-03T18:01:35.580

GCC（GNU 编译器）和 vi/emacs（或 pico 用于超级新手）

附录：记住[C 不是 C++ 的子集](http://www.research.att.com/~bs/3rd_compat.pdf)，因此 C++ 编译器不一定合适。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-12-03T18:05:45.367

几乎所有 C++ 编译器都会编译 C 代码。

我建议使用 Microsoft Visual Studio。它有一个免费版本。

大多数 C 程序员喜欢拥有自己的编辑器并选择适合他们项目的编译器。这就是为什么您可以下载多个不同的 C 编译器，而不是直接在 IDE 中内置的编译器。

使用 Editplus 甚至记事本等编辑器很容易。一些更高级的编辑器具有语法高亮功能，可以在命令窗口中为您运行命令。

IDE 通常也支持多种语言。因此，当您厌倦了 C 并想转向 Python、Java、C++ 时，一些 IDE 可以帮助您做到这一点。我会调查这些：

*   Eclipse :: [http://www.eclipse.org/callisto/c-dev.php](http://www.eclipse.org/callisto/c-dev.php)
*   Microsoft Visual Studio :: [http://www.microsoft.com/express/](http://www.microsoft.com/express/)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-12-03T18:37:36.130

当您刚刚学习 C/C++ 编程时，我推荐[Quincy 。](http://www.codecutter.net/tools/quincy/)易于使用和创建用于轻松尝试小型 C/C++ 程序。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2008-12-12T07:55:33.563

您可以免费下载适用于 Windows的[Digital Mars C 编译器。](http://www.digitalmars.com/download/freecompiler.html)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-12-03T18:22:18.097

另一个不错的 IDE 是[CodeBlocks](http://www.codeblocks.org/)及其跨平台。试一试你可能会喜欢。我使用了一段时间，它为我正在做的事情（C 中的图像编辑器）提供了很好的结果，但它有一些错误。

对于 unix 开发，我一直喜欢使用 gcc 和编辑器……它只是让它变得有趣（在你​​习惯它之后）。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2008-12-04T22:20:46.973

对于**Windows**平台上的**c/c++** **编译器**，有[很多](http://www.zeusedit.com/forum/viewtopic.php?t=238)可供选择。

 **在 IDE 方面，[Zeus IDE](http://www.zeusedit.com)可以轻松配置为与其中任何一个一起使用。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-12-03T23:08:43.277

几年前我在学习 C 时使用了 DevC++。这是一个很棒的工具，虽然我有一段时间没有看到它，所以我不确定它现在处于什么状态。

[http://www.bloodshed.net/devcpp.html](http://www.bloodshed.net/devcpp.html)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-12-03T22:23:55.207

作为记录，我使用[TCC，即 Tiny C 编译器](http://bellard.org/tcc/ "微型 C 编译器")，来快速测试小代码。它可以生成exe和DLL。
您可能需要下载 Windows 标头：它有一个有限的子集，您可能需要更多。

Digital Mars 还有一个大小合理的免费 C/C++ 编译器。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-12-04T22:46:56.533

[GNU C](http://sourceforge.net/project/showfiles.php?group_id=2435)几乎是一个行业标准，即使它是一个 unixy 编译器。您也可以使用 Visual Studio，但请记住它不能很好地支持 C99。还有其他选择，比如 pcc（我真的很喜欢这个）、llvm（也很有趣）等，但这些通常需要一定程度的热情。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-12-10T19:15:43.927

免费国家网站有一个[免费的 C 编译器列表](http://www.thefreecountry.com/compilers/cpp.shtml)。其中许多适用于 Windows。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-12-03T18:04:54.480

您可以使用 C++ 编译器（例如 gcc）来编译您的 C 代码。这是一篇很好的文章，其中包含免费 C 编译器/IDE 的链接：

[http://computerprogramming.suite101.com/article.cfm/freeprogrammingtools](http://computerprogramming.suite101.com/article.cfm/freeprogrammingtools)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-12-03T18:24:16.860

仅仅因为白皮书有影响力，并不意味着它是一个很好的学习资源！

这可能是有史以来最糟糕的学习语言的方式。最重要的是，上次我检查它是不合理的昂贵。

这是一个完整的语言定义，并且擅长于此（这就是为什么它确实是最有影响力的编程书籍之一）。很长一段时间，它实际上是 C 的定义。

你可以考虑再写一本关于这个主题的书。

也就是说，你应该尝试很多不同的 IDE，看看你对什么感到满意。

事实上，一开始你可能想习惯 vi/emacs/notepad/make 和命令行编译，这会让你对你的环境有更深入的了解（如果它不了解你所追求的，那么你就是吠叫错误的语言树）。

当您正在研究不同的 IDE 时，我会尝试使用带有 ac 插件的 Eclipse 或 Netbeans。它们将成为最完整和最可靠的 IDE（可能除了微软的 IDE）并且独立于平台，因此当您决定使用 Mac 或 Linux 时，您不会被冷落。

# python - 如何使用 IPython 作为我的 Emacs Python 解释器？

> ID：338103
> 
> 赞同：11
> 
> 时间：2008-12-03T17:56:57.727
> 
> 标签：python, macos, configuration, emacs, ipython

我在 OS X 上运行 Emacs 22.1.1 和 IPython 0.9.1，我希望能够在 IPython 解释器中按需从我当前的缓冲区运行 Python 代码的行/方法/片段。

我需要做什么才能使它正常工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-15T13:16:17.157

此版本的 mac 版 emacs：

[http://emacsformacosx.com](http://emacsformacosx.com)

预装了 package.el。这允许您自动安装 emacs 包。有一个名为 ein 的包：

[http://tkf.github.io/emacs-ipython-notebook/](http://tkf.github.io/emacs-ipython-notebook/)

这使得从 emacs（包括笔记本）与 ipython 交互变得容易。

但是，从上述 emacs 的 24.3 版本开始，ein 不在默认包存储库中。如果您添加更多存储库，请按照：

[http://www.emacswiki.org/emacs/ELPA](http://www.emacswiki.org/emacs/ELPA)

即，将其添加到您的 ~/.emacs 文件中：

```
(setq package-archives '(("gnu" . "http://elpa.gnu.org/packages/")
                     ("marmalade" . "http://marmalade-repo.org/packages/")
                     ("melpa" . "http://melpa.milkbox.net/packages/"))) 
```

然后打电话

```
M-x package-refresh-contents 
```

您现在可以添加 ein 了：

```
M-x package-install <ret> ein 
```

唉，ein 的 MELPA 版本不适用于 ipython > 1.x，因此如果您使用的是 ipython 2.x，则需要更新版本的 ein：

[https://github.com/tkf/emacs-ipython-notebook/issues/137](https://github.com/tkf/emacs-ipython-notebook/issues/137)

所以克隆：

```
git clone https://github.com/millejoh/emacs-ipython-notebook.git 
```

将 lisp 子目录复制到合理的地方：

```
cp -r emacs-ipython-notebook/lisp ~/.emacs.d/einv2 
```

然后将其添加到您的 emacs 加载路径并加载它，方法是将其添加到您的 ~/.emacs：

```
(add-to-list 'load-path "~/.emacs.d/einv2")
  (require 'ein) 
```

最后，摆脱旧的 ein，它将保留依赖项：

```
M-x package-list-packages 
```

滚动到包列表中的 ein，然后：

```
M-x package-menu-mark-delete
M-x package-menu-execute 
```

重启 emacs，你就可以连接到你的 ipython notebook 服务器了：

```
M-x ein:notebooklist-open 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-10-22T13:31:59.283

ipython 也不会加载与 emacs 23.1.1 一起使用的官方 python.el

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-15T16:38:54.780

python-mode.el 原生支持 IPython。

只要确保 shebang 没有指向另一个解释器。

在这种情况下：

*   要么调用以“-ipython”结尾的命令，这将覆盖shebang
*   将“ipython”自定义为默认解释器并设置“py-force-py-shell-name-p”。这也可以通过菜单 Python/.../Switches 完成

# javascript - 避免 Javascript 竞争条件

> ID：338110
> 
> 赞同：27
> 
> 时间：2008-12-03T17:59:37.830
> 
> 标签：javascript, dom-events, race-condition

我的用户看到的基本上是一个精简版的电子表格。网格中的每一行都有文本框。当他们更改文本框中的值时，我正在对他们的输入执行验证，更新驱动网格的集合，并重新绘制页面上的小计。这一切都由`OnChange`每个文本框的事件处理。

当他们单击`Save`按钮时，我正在使用按钮的`OnClick`事件对金额执行一些最终验证，然后将他们的整个输入发送到 Web 服务，并保存它。

至少，如果他们通过表单切换到`Submit`按钮，就会发生这种情况。

问题是，如果他们输入一个值，然后立即单击保存按钮，在完成`SaveForm()`之前开始执行`UserInputChanged()`——竞争条件。我的代码不使用`setTimeout`，但我用它来模拟缓慢的`UserInputChanged`验证代码：

```
 <script>
  var amount = null;
  var currentControl = null;

  function UserInputChanged(control) {
      currentControl = control;
      // use setTimeout to simulate slow validation code
      setTimeout(ValidateAmount, 100);
  }

  function SaveForm() {
      // call web service to save value
      document.getElementById("SavedAmount").innerHTML = amount;
  }

  function ValidateAmount() {
      // various validationey functions here
      amount = currentControl.value; // save value to collection
      document.getElementById("Subtotal").innerHTML = amount;
  }
</script>

Amount:   <input type="text" onchange="UserInputChanged(this)">
Subtotal: <span id="Subtotal"></span>
<button onclick="SaveForm()">Save</button>
Saved amount: <span id="SavedAmount"></span> 
```

我认为我无法加快验证代码的速度——它非常轻量级，但显然速度很慢，以至于代码会在验证完成之前尝试调用 Web 服务。

在我的机器上，~95ms 是在保存代码开始之前验证代码是否执行之间的幻数。这可能更高或更低，具体取决于用户的计算机速度。

有谁知道如何处理这种情况？一位同事建议在验证代码运行时使用信号量，并在保存代码中使用繁忙循环等待信号量解锁 - 但我想避免在我的代码中使用任何类型的繁忙循环。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-12-03T18:08:24.160

使用信号量（我们称之为 StillNeedsValidating）。如果 SaveForm 函数发现 StillNeedsValidating 信号量已启动，则让它激活它自己的第二个信号量（我将在这里称为 FormNeedsSaving）并返回。当验证函数完成时，如果 FormNeedsSaving 信号量启动，它会自行调用 SaveForm 函数。

在 jankcode 中；

```
function UserInputChanged(control) {
    StillNeedsValidating = true;
    // do validation
    StillNeedsValidating = false;
    if (FormNeedsSaving) saveForm(); 
}

function SaveForm() {
    if (StillNeedsValidating) { FormNeedsSaving=true; return; }
    // call web service to save value
    FormNeedsSaving = false;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-12-03T18:10:48.307

在验证期间禁用保存按钮。作为验证的第一件事将其设置为禁用，并在完成时重新启用它。

例如

```
function UserInputChanged(control) {
    // --> disable button here --< 
    currentControl = control;
    // use setTimeout to simulate slow validation code (production code does not use setTimeout)
    setTimeout("ValidateAmount()", 100); 
} 
```

和

```
function ValidateAmount() {
    // various validationey functions here
    amount = currentControl.value; // save value to collection
    document.getElementById("Subtotal").innerHTML = amount; // update subtotals
    // --> enable button here if validation passes --<
} 
```

当您删除 setTimeout 并使验证成为一项功能时，您必须进行调整，但除非您的用户具有超人的反应能力，否则您应该很高兴。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-03T18:09:00.883

我认为超时会导致您的问题...如果这将是纯代码（没有异步 AJAX 调用、超时等），那么我认为 SaveForm 不会在 UserInputChanged 完成之前执行。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-12-03T18:13:50.187

信号量或互斥锁可能是最好的方法，但不要使用繁忙的循环，只需使用 a`setTimeout()`来模拟线程睡眠。像这样：

```
busy = false;

function UserInputChanged(control) {
    busy = true;
    currentControl = control;
    // use setTimeout to simulate slow validation code (production code does not use setTimeout)
    setTimeout("ValidateAmount()", 100); 
}

function SaveForm() {
    if(busy) 
    {
       setTimeout("SaveForm()", 10);
       return;
    }

    // call web service to save value
    document.getElementById("SavedAmount").innerHTML = amount;
}

function ValidateAmount() {
    // various validationey functions here
    amount = currentControl.value; // save value to collection
    document.getElementById("Subtotal").innerHTML = amount; // update subtotals
    busy = false;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-03T18:12:48.910

您可以设置一个循环函数来监视整个网格的状态并引发一个指示整个网格是否有效的事件。

然后，您的“提交表单”按钮将根据该状态启用或禁用自身。

哦，我现在看到了类似的回应——当然，这也有效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-09-17T17:47:25.077

在使用异步数据源时，您肯定会遇到竞争条件，因为 JavaScript 进程线程继续执行可能依赖于尚未从远程数据源返回的数据的指令。这就是我们有回调函数的原因。

在您的示例中，对验证代码的调用需要有一个回调函数，该函数可以在验证返回时执行某些操作。

但是，当制作具有复杂逻辑的东西或尝试排除故障或增强现有的一系列回调时，您可能会发疯。

这就是我创建 proto-q 库的原因：[http ://code.google.com/p/proto-q/](http://code.google.com/p/proto-q/)

如果您做了很多此类工作，请检查一下。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2008-12-03T19:55:30.747

您没有竞态条件，因为 javascript 是单线程的，所以 javascript 中不会发生竞态条件，因此 2 个线程不能相互干扰。

你举的例子不是一个很好的例子。setTimeout 调用会将被调用的函数放入 javascript 引擎中的队列中，稍后再运行。如果此时您单击保存按钮，则在保存完全完成后才会调用 setTimeout 函数。

您的 javascript 中可能发生的情况是 onClick 事件在调用 onChange 事件之前由 javascript 引擎调用。

作为提示，请记住 javascript 是单线程的，除非您使用 javascript 调试器（firebug、microsoft screipt 调试器）。这些程序拦截线程并暂停它。从那时起，其他线程（通过事件、setTimeout 调用或 XMLHttp 处理程序）可以运行，这使得 javascript 似乎可以同时运行多个线程。

# c# - C# 3.0 中的字符串作为 char[] 数组？

> ID：338111
> 
> 赞同：1
> 
> 时间：2008-12-03T17:59:54.910
> 
> 标签：c#, .net, c#-3.0

[C# 3.0 规范](http://msdn.microsoft.com/en-us/vcsharp/aa336809.aspx)在第10.6.1.3 节“输出参数”中有以下代码示例：

```
using System;
class Test
{
    static void SplitPath(string path, out string dir, out string name) {
        int i = path.Length;
        while (i > 0) {
            char ch = path[i – 1];
            if (ch == '\\' || ch == '/' || ch == ':') break;
            i--;
        }
        dir = path.Substring(0, i);
        name = path.Substring(i);
    }
    static void Main() {
        string dir, name;
        SplitPath("c:\\Windows\\System\\hello.txt", out dir, out name);
        Console.WriteLine(dir);
        Console.WriteLine(name);
    }
} 
```

我无法在 VS2005/C#2.0 中编译此代码。C# 3.0 中字符串的行为是否发生了变化，因此可以将字符串称为 char[] 数组而无需显式转换（语句“ch = path[i - 1]”）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-03T18:07:12.947

它是一个无效字符“-”。改成 '-'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-03T18:02:36.043

你遇到了什么错误？

System.String 自 .NET v1.0 起就有 [] 访问器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-03T18:04:09.317

根据 MSDN（[http://msdn.microsoft.com/en-us/library/362314fe](http://msdn.microsoft.com/en-us/library/362314fe(VS.71).aspx) (VS.71).aspx ），这在 .net 1.1 中甚至是可能的，您当然可以拥有

string myString = "菲利普·艾克伯格";

然后通过执行 myString[0] 访问第一个字符

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-03T18:05:55.477

您在代码块中看到的破折号是 em-dash 而不是减号。它们看起来很相似，但它们是不同的。无论您从何处剪切和粘贴代码，都会将其更改为不正确的字符。

```
char ch = path[i - 1]; 
```

完全有效（只要 - 是减号而不是破折号）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-03T18:07:24.303

在旁注中，为什么要像这样拆分路径和文件名？[在Path](http://msdn.microsoft.com/en-us/library/system.io.path_methods.aspx)类中有很多非常有用的功能可以为您做到这一点。

使用 Path.GetFileName() 作为文件名，使用 Path.GetDirectoryName() 作为目录名。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-03T18:09:41.710

它对我有用，但是您在问题中粘贴的代码有一个“m-dash”字符（十六进制 96）而不是一个减号（十六进制 2D）——也许是字体问题？

# c# - 运输程序集 fxcop 中的 .NET [SuppressMessage] 属性

> ID：338112
> 
> 赞同：8
> 
> 时间：2008-12-03T18:01:25.657
> 
> 标签：c#, .net, fxcop

我想知道人们（指公司/开发人员）是否真的关心在运输程序集中放置 [SuppressMessage] 属性。

在发布模式下在包含 CODE_ANALYSIS 的项目文件中创建单独的配置，然后在最终构建中将其拉出，这对我来说似乎是一种可以避免的开销。

如果不希望这些保留在最终程序集中但仍想在代码中使用它们，那么最好的策略是什么？并且将它们存储在 FxCop 项目文件中是否有任何优点/缺点？

[我来自 VS2008 Pro+FxCop 1.36，而不是 VS2008 Team System]

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-03T18:23:16.753

只有在编译期间存在 CODE_ANALYSIS 预处理器定义时，才会将 SuppressMessage 属性添加到您的代码中。您可以通过查看 Reflector.exe 中的属性定义来验证这一点。默认情况下，这未在 Release 中定义，因此不会影响生产代码。

通常，我只在定义了 CODE_ANALYSIS 的程序集的 DEBUG 版本上运行 FxCop。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-03T18:27:36.837

从大局来看，我认为这并不重要。由于这是一个属性（实际上是元数据），它不会影响代码性能。话虽如此，请记住属性中的信息可供任何使用像 Reflector 这样的反汇编程序的人使用。

将它们存储在 FxCop 项目文件中的问题是，您必须确保每个人都使用相同的项目文件，并且项目文件始终与项目一起传输（它已签入源代码管理，这意味着您必须每次都将其签出你想运行 FxCop）。

如果您不想在生产代码中使用 SuppressMessage 属性，则只需在运行 FxCop 的构建中定义 CODE_ANALYSIS 符号。这确实意味着在您的调试配置中定义它或添加其他配置。只有在定义符号时，这些属性才会编译到代码中。

从自动/夜间构建的角度来看，您可以使用定义了符号的配置进行构建，然后构建没有符号的生产版本，或者进行两次构建 - 一个定义了符号，运行 FxCop 以获取您的违规行为，然后另一个构建没有定义的符号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-03T18:06:59.890

我们有很多分散在生产代码中，我们并不特别在意。它不会影响性能，并且在一个类中具有一些看起来很糟糕的属性通常会激发尽可能删除它的动力。

# c# - C# assembly.load from a byte[] 问题

> ID：338116
> 
> 赞同：0
> 
> 时间：2008-12-03T18:01:49.090
> 
> 标签：c#, .net, assembly.load

我有一个 EXE 加载到一个字节数组中，我正在尝试使用 Assembly.Load 将它加载到一个程序集对象中。我在尝试加载时遇到错误。

这是导致异常的代码：

```
Assembly a = Assembly.Load(bin); 
```

bin 是我的字节数组，从 EXE 加载。

**这是我得到的例外：**

> 无法加载文件或程序集“从 calc_tester 加载的 109590 字节，版本 = 1.0.0.0，文化 = 中性，PublicKeyToken = null”或其依赖项之一。试图加载格式不正确的程序。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-03T18:06:16.973

确保您尝试加载的文件是 .NET 托管 exe/dll。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-03T18:05:22.390

我不确定，但因为它是一个 EXE，它可能会因为 EXE 中的非托管标头而失败？

为什么不只做一个 LoadFrom( 文件名 )？

# sql - 表命名困境：单数与复数名称

> ID：338156
> 
> 赞同：1647
> 
> 时间：2008-12-03T18:09:30.710
> 
> 标签：sql, sql-server, naming-conventions

学术界认为表名应该是它们存储属性的实体的单数。

我不喜欢任何需要在名称周围加上方括号的 T-SQL，但我已将一个`Users`表重命名为单数，永远判刑那些使用该表的人有时必须使用方括号。

我的直觉是保持单数更正确，但我的直觉也是括号表示不受欢迎的内容，例如列名中带有空格等。

我是该留下还是该离开？

* * *

## 回答 #1

> 赞同：2037
> 
> 时间：2011-04-30T10:56:16.553

我有同样的问题，在阅读了这里的所有答案后，我肯定会选择 SINGULAR，原因：

~~**原因 1**（概念）。你可以把装苹果的袋子想象成“AppleBag”，不管是0个、1个还是100万个苹果，它总是同一个袋子。表就是这样，容器，表名必须描述它包含什么，而不是它包含多少数据。此外，复数概念更多的是关于口语的一种（实际上是确定是否存在一种或多种）。~~

**原因 2**。（方便）。使用单数名称比使用复数名称更容易出现。对象可以有不规则复数或根本不复数，但总是有一个单数（除了少数例外，如新闻）。

*   顾客
*   命令
*   用户
*   地位
*   消息

**原因 3**。（审美和秩序）。特别是在 master-detail 场景中，这读起来更好，按名称对齐更好，并且有更多的逻辑顺序（Master first，Detail second）：

*   1.订购
*   2.订单详情

相比：

*   1.订单详情
*   2.订单

**原因 4**（简单）。总而言之，表名、主键、关系、实体类......最好只知道一个名称（单数）而不是两个（单数类、复数表、单数字段、单数-复数主从... .)

*   `Customer`
*   `Customer.CustomerID`
*   `CustomerAddress`
*   `public Class Customer {...}`
*   `SELECT FROM Customer WHERE CustomerID = 100`

一旦您知道您正在与“客户”打交道，您就可以确定您将使用同一个词来满足您所有的数据库交互需求。

**原因 5**。（全球化）。世界越来越小，你可能有一个不同国籍的团队，并不是每个人都以英语为母语。对于非英语母语的程序员来说，想到“Repository”比想到“Repositories”或者“Status”而不是“Statuses”会更容易。使用单数名称可以减少由拼写错误引起的错误，不必考虑“是孩子还是孩子？”从而节省时间，从而提高生产力。

**原因 6**。（为什么不？）。它甚至可以节省您的书写时间，节省您的磁盘空间，甚至让您的电脑键盘更耐用！

*   `SELECT Customer.CustomerName FROM Customer WHERE Customer.CustomerID = 100`
*   `SELECT Customers.CustomerName FROM Customers WHERE Customers.CustomerID = 103`

你已经保存了 3 个字母、3 个字节、3 个额外的键盘点击 :)

最后，您可以将那些与保留名称混淆的名称命名为：

*   用户 > 登录用户、应用用户、系统用户、CMSUser、...

或者使用臭名昭著的方括号 [User]

* * *

## 回答 #2

> 赞同：274
> 
> 时间：2008-12-03T21:09:15.450

如果您使用对象关系映射工具或将来我建议使用**Singular**。

像 LLBLGen 这样的一些工具可以在不改变表名本身的情况下自动将用户名等复数名称更正为用户。为什么这很重要？因为当它被映射时，您希望它看起来像 User.Name 而不是 Users.Name 或更糟的是我的一些旧数据库表命名为 tblUsers.strName ，这在代码中只是令人困惑。

我的新经验法则是判断它转换为对象后的外观。

我发现一个不符合我使用的新命名的表是 UsersInRoles。但总会有少数例外，即使在这种情况下，它看起来像 UsersInRoles.Username 一样好。

* * *

## 回答 #3

> 赞同：264
> 
> 时间：2008-12-03T19:31:01.157

就“标准”而言，其他人已经给出了很好的答案，但我只是想添加这个......“用户”（或“用户”）是否可能实际上并不是对表中保存的数据的完整描述? 并不是说您应该对表名和特异性过于疯狂，但也许像“Widget_Users”（其中“Widget”是您的应用程序或网站的名称）之类的东西会更合适。

* * *

## 回答 #4

> 赞同：258
> 
> 时间：2010-10-08T20:53:37.653

我更喜欢使用不变形的**名词**，它在英语中恰好是单数。

改变表名的数量会导致拼写问题（正如许多其他答案所示），但是因为表通常包含多行而选择这样做在语义上也充满了漏洞。如果我们考虑一种基于大小写变化名词的语言（大多数情况下），这一点会更加明显：

既然我们通常对行做一些事情，为什么不把名字放在宾格中呢？如果我们有一张写的比读的多的表，为什么不把名字放在与格中呢？这是一张表*，*为什么不使用属格呢？我们不会这样做，因为表被定义为一个抽象容器，无论其状态或使用如何，它都存在。在没有精确和绝对语义原因的情况下变形名词是胡说八道。

使用不变形的名词简单、合乎逻辑、规则且与语言无关。

* * *

## 回答 #5

> 赞同：135
> 
> 时间：2008-12-03T18:13:04.963

什么约定要求表具有单数名称？我一直以为是复数名字。

用户被添加到用户表中。

本站同意：http:
[//vyaskn.tripod.com/object_naming.htm#Tables](http://vyaskn.tripod.com/object_naming.htm#Tables)

这个网站不同意（但我不同意）：http:
[//justinsomnia.org/writings/naming_conventions.html](http://justinsomnia.org/writings/naming_conventions.html)

* * *

正如其他人所提到的：这些只是指导方针。选择一个适合您和您的公司/项目的约定并坚持下去。在单数和复数之间切换，或者有时是缩写词，有时不是，会更加麻烦。

* * *

## 回答 #6

> 赞同：94
> 
> 时间：2009-04-04T01:24:47.587

举个简单的例子：

```
SELECT Customer.Name, Customer.Address FROM Customer WHERE Customer.Name > "def" 
```

对比

```
SELECT Customers.Name, Customers.Address FROM Customers WHERE Customers.Name > "def" 
```

后者中的 SQL 听起来比前者更奇怪。

我投票给**单数**。

* * *

## 回答 #7

> 赞同：66
> 
> 时间：2009-01-02T23:38:53.480

我坚信在实体关系图中，实体应该用单数名称来反映，类似于单数的类名。一旦实例化，名称就反映了它的实例。因此，对于数据库，实体在制成表（实体或记录的集合）时是复数。Entity、User 做成表Users。我同意其他人的建议，也许可以将 User 名称改进为 Employee 或更适用于您的场景的名称。

这在 SQL 语句中更有意义，因为您正在从一组记录中进行选择，并且如果表名是单数，则它的读取效果不佳。

* * *

## 回答 #8

> 赞同：45
> 
> 时间：2008-12-05T01:15:51.303

对于表名和任何编程实体，我坚持使用**单数。**

原因？事实上，英语中有不规则复数形式，例如mouse *⇒mice* *andsheep ⇒sheep*。然后，如果我需要*收藏*，我就用*鼠标*或*羊*，然后继续。

它确实有助于突出多样性，我可以轻松地以编程方式确定事物集合的外观。

所以，我的规则是：一切都是奇异的，每一个事物的集合都是奇异的，并附加了一个*s 。*也有助于 ORM。

* * *

## 回答 #9

> 赞同：40
> 
> 时间：2009-04-30T21:03:40.927

恕我直言，表名应该是**复数**，如*Customers*。

如果类名映射到*Customers*表中的一行，则类名应该像*Customer一样是单数的。*

 ** * *

## 回答 #10

> 赞同：39
> 
> 时间：2010-12-21T12:49:12.437

单数。我不买任何涉及哪个最合乎逻辑的论点——每个人都认为他自己的偏好是最合乎逻辑的。无论你做什么都是一团糟，只需选择一个约定并坚持下去。我们正在尝试将具有高度不规则语法和语义（正常口语和书面语言）的语言映射到具有非常特定语义的高度规则 (SQL) 语法。

我的主要论点是我不认为表格是一个集合，而是关系。

因此，`AppUser`关系告诉哪些实体是`AppUsers`。

关系告诉我`AppUserGroup`哪些实体是`AppUserGroups`

该`AppUser_AppUserGroup`关系告诉我`AppUsers`和`AppUserGroups`是如何相关的。

`AppUserGroup_AppUserGroup`关系告诉我如何`AppUserGroups`和`AppUserGroups`相关（即组的成员）。

换句话说，当我考虑实体以及它们之间的关系时，我认为关系是单数的，但当然，当我考虑集合或集合中的实体时，集合或集合是复数的。

然后，在我的代码和数据库模式中，我使用单数。在文本描述中，我最终使用复数来增加可读性 - 然后使用字体等来区分表/关系名称和复数 s。

我喜欢认为它是杂乱无章的，但系统化的——这样，我想表达的关系总有一个系统生成的名称，这对我来说非常重要。

* * *

## 回答 #11

> 赞同：31
> 
> 时间：2008-12-03T20:23:56.417

我也会使用**复数形式**，并且在前面提到的*用户*困境中，我们确实采用了方括号方法。

我们这样做是为了在数据库架构和应用程序架构之间提供统一性，从根本上理解，*用户*表是*用户*值的集合，就像代码工件中的*用户*集合是*用户*对象的集合一样。

让我们的数据团队和我们的开发人员使用相同的概念语言（尽管并不总是相同的对象名称）可以更轻松地在他们之间传达想法。

* * *

## 回答 #12

> 赞同：24
> 
> 时间：2013-02-26T18:39:51.007

我个人更喜欢使用复数名称来表示一个集合，这对我的关系思维来说“听起来”更好。

此时此刻，我正在使用单数名称为我的公司定义数据模型，因为大多数工作人员都觉得它更舒服。有时你只需要让每个人的生活更轻松，而不是强加你的个人喜好。（这就是我在这个线程中结束的方式，以确认命名表的“最佳实践”应该是什么）

在阅读了该线程中的所有争论后，我得出了一个结论：

我喜欢我的蜂蜜煎饼，不管每个人最喜欢的口味是什么。但如果我为其他人做饭，我会尝试为他们提供他们喜欢的东西。

* * *

## 回答 #13

> 赞同：19
> 
> 时间：2009-01-02T23:48:27.063

单数。我会调用一个包含一堆用户行表示对象“用户”的数组，但该表是“用户表”。认为表只是它包含的行集是错误的，IMO；表是元数据，行集分层地附加到表上，而不是表本身。

当然，我一直都在使用 ORM，这有助于用复数表名编写的 ORM 代码看起来很愚蠢。

* * *

## 回答 #14

> 赞同：19
> 
> 时间：2010-09-17T20:10:33.747

实际上，我一直认为使用复数表名是流行的惯例。到目前为止，我一直使用复数。

我可以理解单数表名的论点，但对我来说**复数**更有意义。表名通常描述表包含的内容。在规范化数据库中，每个表都包含特定的数据集。每行都是一个实体，表包含许多实体。因此表名的复数形式。

一张汽车表的名称为*汽车*，每一行都是汽车。我承认以某种`table.field`方式指定表和字段是最佳实践，并且使用单数表名更具可读性。但是在以下两个示例中，前者更有意义：

```
SELECT * FROM cars WHERE color='blue'
SELECT * FROM car WHERE color='blue' 
```

老实说，我将重新考虑我在这件事上的立场，我将依赖我正在开发的组织使用的实际约定。但是，我认为对于我的个人惯例，我会坚持使用复数表名。对我来说这更有意义。

* * *

## 回答 #15

> 赞同：16
> 
> 时间：2008-12-03T19:28:09.897

我不喜欢复数表名，因为英语中的某些名词不可数（水、汤、现金），或者当您使其可数时含义会发生变化（鸡与鸡；肉与鸟）。我也不喜欢使用表名或列名的缩写，因为这样做会给已经很陡峭的学习曲线增加额外的斜率。

具有讽刺意味的是，我可能会因为[USER (Transac-SQL)](http://msdn.microsoft.com/en-us/library/ms186738.aspx)`User`而例外并调用它，因为如果我不需要的话，我也不喜欢在表格周围使用括号。`Users`

我还喜欢将所有 ID 列命名为`Id`, not `ChickenId`or `ChickensId`(复数的人对此做了什么？)。

所有这一切都是因为我对数据库系统没有适当的尊重，我只是出于习惯和懒惰而重新应用来自 OO 命名约定的一招一式知识，如[Java 的。](http://java.sun.com/docs/codeconv/html/CodeConventions.doc8.html)我希望对复杂的 SQL 有更好的 IDE 支持。

* * *

## 回答 #16

> 赞同：15
> 
> 时间：2008-12-03T19:24:11.123

我们运行类似的标准，在编写脚本时，我们要求 [ ] 围绕名称，并在适当的模式限定符处 - 主要是它对冲您的赌注，以防止未来通过 SQL 语法抢夺名称。

```
SELECT [Name] FROM [dbo].[Customer] WHERE [Location] = 'WA' 
```

这在过去拯救了我们的灵魂——我们的一些数据库系统从 SQL 6.0 到 SQL 2005 已经运行了 10 多年——远远超过了它们的预期寿命。

* * *

## 回答 #17

> 赞同：13
> 
> 时间：2008-12-03T20:20:57.187

服务器本身的系统`tables/views`（`SYSCAT.TABLES`、`dbo.sysindexes`、`ALL_TABLES`、`information_schema.columns`等）几乎总是复数形式。我想为了保持一致性，我会跟随他们的领导。

* * *

## 回答 #18

> 赞同：12
> 
> 时间：2009-01-02T23:50:58.603

我是单数表名的粉丝，因为它们使我使用 CASE 语法的 ER 图更易于阅读，但是通过阅读这些回复，我感觉它从未很好地流行起来？我个人喜欢它。当您使用单数表名、将动作动词添加到您的关系中并为每个关系形成良好的句子时，可以通过示例很好地概述模型的可读性。对于 20 个表的数据库来说，这有点矫枉过正，但是如果您有一个包含数百个表和复杂设计的数据库，如果没有一个可读性好的图表，您的开发人员将如何理解它？

[http://www.aisintl.com/case/method.html](http://www.aisintl.com/case/method.html)

至于为表和视图添加前缀，我绝对讨厌这种做法。在给他们可能的坏信息之前，不要给他们任何信息。任何在数据库中浏览对象的人都可以很容易地从视图中分辨出一个表，但是如果我有一个名为 tblUsers 的表，出于某种原因，我决定将来将其重组为两个表，以便统一它们以防止破坏旧代码我现在有一个名为 tblUsers 的视图。在这一点上，我留下了两个不吸引人的选项，留下一个以 tbl 前缀命名的视图，这可能会使一些开发人员感到困惑，或者强制重写另一层，无论是中间层还是应用程序，以引用我的新结构或命名 viewUsers。恕我直言，这否定了大部分观点的价值。

* * *

## 回答 #19

> 赞同：12
> 
> 时间：2009-11-25T21:23:00.943

表：复数

> 用户表中列出了多个用户。

型号：单数

> 可以从 users 表中选择单个用户。

控制器：复数

> [http://myapp.com/users](http://myapp.com/users)将列出多个用户。

无论如何，这就是我的看法。

* * *

## 回答 #20

> 赞同：12
> 
> 时间：2010-10-21T01:37:17.703

我总是使用单数，因为那是我被教导的。然而，在最近创建一个新模式时，很长一段时间以来，我第一次主动决定保持这个约定，仅仅是因为......它更短。在每个表名的末尾添加一个“s”对我来说就像在每个表名前面添加一个“tbl_”一样没用。

* * *

## 回答 #21

> 赞同：12
> 
> 时间：2012-11-02T21:48:21.003

如果我们查看`MS SQL Server's`系统表，Microsoft 分配的它们的名称在`plural`.

Oracle 的系统表以`singular`. 尽管其中一些是复数形式。Oracle 建议用户定义的表名使用复数形式。他们推荐一件事并遵循另一件事并没有多大意义。这两个软件巨头的架构师使用不同的约定来命名他们的表，也没有多大意义......毕竟，这些人是什么......博士？

我记得在学术界，建议是单一的。

例如，当我们说：

```
select OrderHeader.ID FROM OrderHeader WHERE OrderHeader.Reference = 'ABC123' 
```

也许 b/c 每个`ID`都是从特定的单行中选择的……？

* * *

## 回答 #22

> 赞同：10
> 
> 时间：2012-11-30T16:28:55.490

我曾经在 User 表中使用过“Dude”——同样的短字符数，与关键字没有冲突，仍然是对一般人的引用。如果我不担心可能会看到代码的闷头，我会保持这种状态。

* * *

## 回答 #23

> 赞同：9
> 
> 时间：2008-12-03T18:15:08.577

可能的替代方案：

*   重命名表 SystemUser
*   使用括号
*   保留复数表名。

IMO 使用括号在技术上是最安全的方法，尽管它有点麻烦。IMO 它是一个中的 6 个，另一个是六个，您的解决方案实际上归结为个人/团队的偏好。

* * *

## 回答 #24

> 赞同：9
> 
> 时间：2008-12-03T18:33:13.207

这可能有点多余，但我建议谨慎行事。重命名表不一定是坏事，但标准化就是这样；一个标准——这个数据库可能已经“标准化”了，但是很糟糕:)——我建议一致性是一个更好的目标，因为这个数据库已经存在并且可能它包含的不仅仅是 2 个表。

除非您可以标准化整个数据库，或者至少计划为此而努力，否则我怀疑表名只是冰山一角，并且专注于手头的任务，忍受命名不佳的对象的痛苦，可能会在你的最大利益——

实际的一致性有时是最好的标准...... :)

my2cents ---

* * *

## 回答 #25

> 赞同：9
> 
> 时间：2011-10-04T18:23:23.380

我的看法是语义取决于你如何定义你的容器。例如，“一袋苹果”或简单的“苹果”或“苹果袋”或“苹果”。

示例：一个“college”表可以包含 0 个或多个大学 一个“colleges”表可以包含 0 个或多个 collegues

```
a "student" table can contain 0 or more students 
a table of "students" can contain 0 or more students. 
```

我的结论是，两者都可以，但是您必须定义您（或与之交互的人）在引用表格时将如何处理；“ax 表”或“xs 表”

* * *

## 回答 #26

> 赞同：8
> 
> 时间：2008-12-03T19:11:59.587

正如其他人在这里提到的，约定应该是增加易用性和可读性的工具。不是用来折磨开发者的枷锁或俱乐部。

也就是说，我个人的偏好是对表和列都使用单数名称。这可能来自我的编程背景。类名通常是单数的，除非它们是某种集合。在我看来，我正在存储或读取相关表中的单个记录，所以单数对我来说很有意义。

这种做法还允许我为那些在我的对象之间存储多对多关系的表保留复数表名。

我也尽量避免在表名和列名中使用保留字。在这里有问题的情况下，违反用户的单数约定更有意义，以避免需要封装使用用户保留字的表。

我喜欢以有限的方式使用前缀（tbl 用于表名，sp_ 用于 proc 名称等），尽管许多人认为这会增加混乱。我也更喜欢 CamelBack 名称而不是下划线，因为我在输入名称时总是按 + 而不是 _。许多其他人不同意。

这是命名约定指南的另一个很好的链接：[http ://www.xaprb.com/blog/2008/10/26/the-power-of-a-good-sql-naming-convention/](http://www.xaprb.com/blog/2008/10/26/the-power-of-a-good-sql-naming-convention/)

请记住，您的约定中最重要的因素是它对与相关数据库交互的人有意义。在命名约定方面，没有“一环来统治他们”。

* * *

## 回答 #27

> 赞同：8
> 
> 时间：2010-03-10T11:08:31.973

我认为使用单数是我们在大学里教的。但同时您*可能会*争辩说，与面向对象编程不同，表不是其记录的实例。

由于英语中的复数不规则性，我想我现在倾向于使用单数。在德语中，由于没有一致的复数形式，情况更糟 - 有时如果没有前面的指定冠词（der/die/das），您无法判断一个单词是否是复数。而且在汉语中，无论如何也没有复数形式。

* * *

## 回答 #28

> 赞同：7
> 
> 时间：2008-12-03T18:17:47.183

我一直认为这是一个愚蠢的约定。我使用复数表名。

（我相信该策略背后的原因是它使 ORM 代码生成器更容易生成对象和集合类，因为从单数名称生成复数名称比反之更容易）

* * *

## 回答 #29

> 赞同：7
> 
> 时间：2012-05-27T18:51:53.647

我只对拼写相同的表名使用名词，无论是单数还是复数：

驼鹿 鱼 鹿 飞机 你 裤子 短裤 眼镜 剪刀 物种 后代

* * *

## 回答 #30

> 赞同：7
> 
> 时间：2013-02-18T04:32:25.273

我在之前的任何答案中都没有清楚地表达这一点。许多程序员在处理表时并没有考虑到正式的定义。我们经常用“记录”或“行”来直观地交流。但是，除了非规范化关系的一些例外情况外，通常在设计表时使非键属性和键之间的关系构成一个集合论函数。

函数可以定义为两个集合之间的叉积的子集，其中键集合的每个元素在映射*中最多出现一次。*因此，从这个角度产生的术语往往是单一的。人们在其他涉及函数的数学和计算理论（例如代数和 lambda 演算）中看到了相同的单数（或至少是非复数）约定。

* * *

## 回答 #31

> 赞同：5
> 
> 时间：2008-12-03T18:19:57.790

指导方针确实存在。这不是“一成不变”的，这就是为什么您可以选择忽略它们的原因。

我会说拥有复数表名在逻辑上更直观。毕竟，表是实体的集合。除了提到的其他替代方案外，我通常会在表名上看到前缀......

*   tbl用户
*   tblThis
*   tbl那
*   tblTheOther

我并不是说这是要走的路，我还看到我讨厌的表名中使用了很多空格。我什至遇到过带有愚蠢字符的字段名称，例如？好像说这个领域回答了一个问题。

* * *

## 回答 #32

> 赞同：5
> 
> 时间：2009-01-20T13:57:13.533

我只会给出我的意见，为什么我使用**单数**名称。

例如，我需要从用户那里获取所有字段：

```
-- Select every fields from 'user' table
SELECT * FROM user 
```

我需要 21 岁的用户的姓名：

```
-- Select every fields from 'user' table which have 21 years old
SELECT * FROM user WHERE age = '21' 
```

当然，复数方式也可以通过相同的方式使用，但是对于我的大脑来说，我真的认为这是正确的方式。

* * *

## 回答 #33

> 赞同：5
> 
> 时间：2012-11-30T16:24:34.540

表的 SQL 定义实际上是表的一个潜在行的定义，而不是集合。因此，该定义中使用的名称必须指定行的类型，而不是集合的名称。喜欢复数的人，因为它在他们的英语语句中读起来很好，需要开始更有逻辑地思考，并查看实际使用表格所涉及的所有逻辑和编程代码。这些注释中提到了使用单数表名的几个很好的理由。这些包括非常好的理由不使用复数表名。“读得好”根本不应该是任何理由，特别是因为有些人可能会以不同的方式阅读这个想法。

* * *

## 回答 #34

> 赞同：4
> 
> 时间：2008-12-03T20:16:01.267

如果你去会有麻烦，但如果你留下它会加倍。

我宁愿违背一些假定的非复数命名约定，也不愿用可能是保留字的东西来命名我的表。

* * *

## 回答 #35

> 赞同：3
> 
> 时间：2008-12-03T19:06:57.007

没有要求表名是单数的“约定”。

例如，我们在评级过程使用的数据库上有一个名为“REJECTS”的表，其中包含从一次程序运行中被拒绝的记录，我看不出有任何理由不对该表使用复数（将其命名为“ REJECT”会很有趣，或者过于乐观）。

关于其他问题（引号），它取决于 SQL 方言。Oracle 不需要为表名加上引号。

* * *

## 回答 #36

> 赞同：3
> 
> 时间：2009-11-23T14:34:39.593

我总是使用单数表名，但如前所述，最重要的是要保持一致并对所有名称使用相同的形式。

我不喜欢复数表名的地方是组合名称会变得很奇怪。例如，如果您有一个名为的表`Users`并且您想为用户存储属性，这将导致一个名为`UsersProperties`...

* * *

## 回答 #37

> 赞同：3
> 
> 时间：2012-04-09T20:39:20.963

TABLE 名称是表结构的一个定义。VIEW 或 QUERY 名称是（一个或多个）表的视图或查询的一个定义。TABLE、VIEW 或 QUERY 可能包含以下内容之一：

0 条记录 1 条记录 许多记录。

你到底为什么要在单个对象名称的末尾加上一个“s”？你想通过把这个's'放在对象名称的末尾来表示什么？

如果要区分，则添加'_tbl'。视图是“_vew”（不是愚蠢的“_v”约定）。

最少 3 个字符后缀 - 停止讨论。

表是一个数据库对象 - 与任何其他对象没有什么不同。

保存 3 个字符除了含义清晰外没有任何保存。

红色的 ;-）

* * *

## 回答 #38

> 赞同：3
> 
> 时间：2013-06-30T19:09:32.743

在寻找良好的命名约定时，会出现以下混淆，我应该命名：

1) 符合。**表包含**的内容， 例如：用户表。它总是会是复数的。所以，**用户**

2) 符合。**记录保存**的内容 例如：用户表中的记录将是单个用户。所以，**用户**。

现在，主要是 users_roles 的问题。案例1：根据。以第一个命名约定，users_roles 这个名字所暗示的，用户和他们的角色。

案例2：根据。到第二个命名约定，user_role 这个名字暗示了什么，用户和他的角色。

**良好的命名约定是为*实体关系提供额外的概念*，尤其是在存储多对多关系时**。

在这里，根据场景，我们应该识别为信息集。

在 users 表中，形成的所有集合都是唯一用户。在 Roles 表中，形成的所有集合都是唯一的角色。在用户和角色关系表中，用户集可以由不同的角色组成，这给出了**存储一对多关系**的想法。

```
I would prefer,
Users table => user
Roles table => role
users role relationship table => user_roles 
```

* * *

## 回答 #39

> 赞同：3
> 
> 时间：2013-08-30T14:07:16.997

两个网站上的论文不同，我认为你只需要选择你的一方。就个人而言，我更喜欢 Plurar 用于表命名，当然也更喜欢单数用于列命名。

我喜欢你如何阅读这个：

```
SELECT CustomerName FROM Customers WHERE CustomerID = 100; 
```

我们确实有 OOP，而且很棒，但大多数人继续使用关系数据库，而不是对象数据库。无需遵循关系数据库的 OOP 概念。

另一个例子，你有一个表 Teams，它保留了 TeamID、TeamColor 以及 PlayerID，并且对于一定数量的 PlayerID 将具有相同的 teamID 和 TeamColor...

球员属于哪支球队？

```
SELECT * FROM Teams WHERE PlayerID = X 
```

X Team的所有球员？

```
SELECT * FROM Players INNER JOIN Teams ON Players.PlayerID = Teams.PlayerID WHERE Teams.TeamID = X 
```

这一切对你来说听起来不错？

无论如何，还要看看 W3Schools 使用的命名约定：

[http://www.w3schools.com/sql/sql_join_inner.asp](http://www.w3schools.com/sql/sql_join_inner.asp)

* * *

## 回答 #40

> 赞同：2
> 
> 时间：2008-12-03T20:11:06.957

如果您使用 Zend Framework (PHP) 之类的某些框架，最好对表类使用复数，对行类使用单数。

因此，假设您创建了一个表对象 $users = new Users() 并将行类声明为 User 您也可以调用 new User() 。

现在，如果您对表名使用单数，则必须执行类似 new UserTable() 之类的操作，其中行是 new UserRow()。这对我来说看起来比只为表使用对象 Users() 和为行使用 User() 对象更笨拙。

* * *

## 回答 #41

> 赞同：1
> 
> 时间：2008-12-03T19:33:52.897

我通过将表命名为“Employee”（实际上是“Employees”）解决了同样的问题。我尽量远离与可能保留字的任何冲突。即使是“用户”对我来说也很接近。

# git - 在 git svn fetch 期间解包树对象的致命错误

> ID：338164
> 
> 赞同：15
> 
> 时间：2008-12-03T18:10:58.260
> 
> 标签：git, git-svn

当运行 get svn fetch 从上游 svn 存储库中提取最新的新分支时，我收到了这个错误：

```
$ git svn fetch
fatal: failed to unpack tree object 5ecb324e8b8fcb918acb253f33edc6ce49e49e0d
read-tree 5ecb324e8b8fcb918acb253f33edc6ce49e49e0d: command returned error: 128 
```

现在，在该本地 repo 上每次尝试 git svn 都会导致相同的错误。最初我正在运行 git 版本 1.5.6.4_0 并且在错误之后我尝试更新到 1.6.0.2_2 并且问题仍然存在。

有什么办法可以清理这种腐败吗？上游存储库的新 git svn 克隆很好，但我想保留我现有的设置。我浏览了文档并在谷歌上搜索了这个问题，但没有运气。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2010-12-21T22:32:55.447

我有同样的问题。这是由于 git-svn 无法以某种方式读取或处理的特定 SVN 版本。这是我按顺序尝试的：

1.  回退到已知有效的修订：`git svn reset -r 42`
2.  重试获取：`git svn fetch`— 获取从 42 到有罪的版本（比如 50）的每个修订，然后显示相同的错误消息。
3.  找父母：`git svn fetch --parent`——不要问我为什么。这会带来更多的修订。不知道它是否相关。
4.  重试获取：`git svn fetch`- 仍然不起作用。
5.  获取每个下一个修订：
    1.  `git svn fetch -r 50`— 工作。
    2.  `git svn fetch -r 51`— 虽然没有错误消息，但继续。
    3.  `git svn fetch -r xx`— 出现错误消息，这是错误的修订。别在意。
    4.  `git svn fetch -r xx+1`— 工作。
6.  重试获取：`git svn fetch`- 工作！开始获取更多修订。

这个过程应该被清理（可能在第一步附近），但它对我有用，而不必重新开始一个新的克隆。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T08:50:45.717

创建新的 SVN 分支后，我遇到了同样的错误消息。我能够通过删除完整的“.git/svn”目录并再次从 SVN 获取来解决该问题：

```
$ rm -rf .git/svn
$ git svn fetch
Rebuilding .git/svn/refs/remotes/trunk/.rev_map.1d5df120-ff1b-4f4f-af56-171ecbcc785d ... 
```

这再次从 SVN 获取所有提交并解决了错误。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-05T19:18:22.333

最可能的原因是文件或提交（树引用）已损坏或丢失。或者树本身可能已损坏。检查：

```
git fsck --unreachable HEAD $(cat .git/refs/heads/*) 
```

这将显示一堆你不关心的“悬空”文件；损坏的文件会报告“无效的 SHA1”或类似的东西。我不知道丢失的文件会如何报告。删除任何损坏的项目并`rsync`从您的上游存储库中替换它们。

# user-interface - 箭头在排序表中应该指向哪个方向？

> ID：338166
> 
> 赞同：52
> 
> 时间：2008-12-03T18:11:23.843
> 
> 标签：user-interface, datatable

在排序表中，通常有一个向上或向下箭头指示排序样式。但是，我在确定箭头应该指向哪个方向时遇到了一些麻烦。在 ASC 排序中，字符按 1-9A-Za-z 排序。箭头应该向上还是向下？

我在网上找到了两者的实现，所以这对我没有多大帮助：[向上](http://yoast.com/articles/sortable-table/)和[向下](http://www.frequency-decoder.com/demo/table-sort-revisited/dynamic/)（你必须先创建表）。

对此有硬性规定吗？我发现自己能够证明这两种实现的合理性。您使用哪种方法？哪个对您来说更直观，为什么？

**编辑：**你们中的一些人建议了替代实现，例如上升条或带有指示排序方向的箭头的字母。很棒的建议。我绝对愿意接受其他选择。模棱两可的越少越好。它可能很挑剔，但我真的希望用户的困惑最小或没有。

**编辑：**我现在最终选择了上升和下降的酒吧。它不是标准的，但似乎没有三角形那么模棱两可。当前的排序列显示三个条形，从小到大（从左到右）表示 ASC，反之则表示 DESC。默认情况下，其他可排序的列没有条，但将鼠标悬停在任何可排序的列标题（包括当前）上会显示条，说明如果单击该列标题，表格将如何排序。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2008-12-03T18:22:38.500

我不认为它们是箭头，而是当前状态的视觉记忆。因此，显示一个向下的三角形表示降序。它在视觉上与列表顶部的最大项目（三角形的底部）和底部的最小项目（三角形的点）的图标一致。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2008-12-03T18:27:42.657

我一直使用以下方法：

*   上升——向上的箭头
*   降序——箭头向下

在我看来，向上/向下箭头的视觉表示最准确地解释了排序顺序。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2008-12-04T22:31:00.603

我已经对此进行了可用性测试。对于箭头的含义，用户之间似乎没有一致的解释。我似乎记得甚至*每个用户*都不一致，认为向下箭头意味着在一种情况下上升，在另一种情况下下降。我尝试了左右箭头（“向前”与“向后”排序），但它们也未能得到一致的解释。我尝试显示当前状态并显示将产生的状态。都没有奏效。

起作用的是排序顺序的示意图文本描述：“A..Z”和“Z..A”用于 alpha，“1..9”和“9..1”用于数字，“1..12” ” 和“12..1” 用于日期（可用性测试使用 mm/dd/yy 日期格式）。

将此文本显示为只读，指示当前状态。在文本旁边放置一个按钮以设置或交换排序顺序。

没有尝试上升/下降条形图标，但我预计它会遇到“更大”不明确的问题。例如，过去的较旧日期是否比最近的日期更大（更早）或更小（更接近时间 0）？优先级 1 比优先级 2 大还是小？A级比B级大还是小？就此而言，除了极客之外，还有谁认为“Zuschlag”比“Abbott”大得多？当然，这并不是我个人的看法。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-12-03T18:44:25.040

由于某种原因，我觉得总是倒退。对我来说，向下箭头/三角形应该代表我通常阅读事物的方式（从上到下 -> 从 a 到 z），而向上箭头与我阅读事物的方式相反（从 z 到 a）。但这只是我，因为大多数流行的用户界面（Mac、Windows 等）都以另一种方式使用它，他们必须知道一些事情:)。

无论如何，与用户习惯保持一致是一个不错的选择。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-12-03T18:42:16.497

我最喜欢的实际上是 Excel 处理它的方式——不要使用箭头，而是使用自定义图标

```
A  |
Z  V 
```

对于升序排序和

```
Z  |
A  V 
```

用于降序排序。没有人会想知道您以哪种方式排序。

现在，如果您不能使用自定义图标而是需要一个可打印的字符，我会说人们很可能会被其中任何一个混淆。Windows对资源管理器使用“箭头的小部分对应较小的值”，即升序排序指向上方。但是许多其他来源假设箭头的底部从最低值开始并指向排序方向，坦率地说，这与其他任何事情一样有意义。换句话说，一半的用户可能不得不调整任何一种方式。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-05-23T11:18:19.247

[![在此处输入图像描述](https://i.stack.imgur.com/b0YFl.jpg)](https://i.stack.imgur.com/b0YFl.jpg)

**升序**：向上箭头
**降序**：向下箭头

**要记住的技巧：**

字母：

*   **升序**即ABCD
*   **降序即**DCBA****

 **数字：

*   A=1,B=2...Z=26。
*   升序 ABCD 所以 1 2 3 4 即从小到大
*   降序 DCBA 所以 4 3 2 1 即从大到小

日期：

*   日期实际上是转换为数字，它以日为基础增加，因此它再次适用于数字系统。今天比昨天大，今天比明天小。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-12-03T18:24:41.413

向上的箭头通常意味着更大或变大，因此应该用于升序。向下的箭头通常表示某物变小或变小，它应该用于降序。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2010-11-15T17:01:41.317

我喜欢：

*   向下箭头表示升序
*   向上箭头表示降序

为什么？因为感觉就像我刚刚对页面进行了排序。我点击了标题，它是“哇！从上到下排序”。为什么“从上到下”被称为升序，是因为随着计算机写入屏幕，数字/字母的价值会更高。下降则相反。但是，该列表实际上是从上到下从屏幕向下 - 从 a 到 z *。*当您以其他方式订购时，列表的开头位于屏幕底部。

因此，对于人类的物理心理逻辑——顺时针是关闭的，逆时针是打开的，忽略机器如何排序和输出数据，而是考虑人类可能如何排序数据是有意义的：从开始（最小值）和纸的顶部，然后前进到纸的末尾（最大值）。

开头最小的原因是因为 1 在 2 之前，而罗马字母表以 A 开头并以 Z 结尾。所以在这个时间点上，这对我们人类来说是一种默认值。我们从上到下，从左到右书写。这与惯用手和我们拿纸的方式有关——我想。我实际上不是人机界面专家。我只是想为什么它看起来更自然。KDE 人员是人机界面专家。看看氧气是如何完成的。

我认为可以的另一种方式是一个三角形，它实际上表明数据从最小到最大。同样，这是相当技术性的，乍一看，人类可能不会“明白”。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-12-03T18:14:56.690

我希望箭头显示当前状态（当列表当前上升时指向上方）。这是 Windows 资源管理器在详细信息视图中所做的。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2008-12-03T18:38:07.907

在经典的 Finder 中，Apple 没有使用箭头。相反，有一个小图标，看起来像三个（或四个？）增加或减少长度的水平线。乍一看，它就像一个三角形；但是当看它时，很明显它是变大还是变小。

其他 GUI（例如 KDE）使用三角形，但大多数人将它们解释为箭头，从而使信息模棱两可。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2008-12-03T18:56:09.277

您需要考虑的另一件事是箭头是表示当前排序方向还是单击箭头时将应用的排序方向。（从表格的内容来看并不总是很明显，因为每一列都有箭头）

很抱歉增加了混乱，但您需要考虑这一点。

可以通过在箭头上添加适当措辞的工具提示来部分地澄清这方面的问题。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2008-12-03T18:14:52.650

“这有什么硬性规定吗？” - 显然不是，因为你找到了两者的例子。

为了总体一致性，我会说箭头应该指向上升，向下指向下降。这与 Windows（在资源管理器中单击列标题）和 Office（在 Excel 中过滤/排序列）是一致的。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-12-03T18:29:17.817

在我看来，最好的检查地点是大型企业网站，如[亚马逊](http://www.amazon.co.uk)、[dabs](http://www.dabs.co.uk)等，因为这些将是用户最习惯的。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2013-04-29T11:08:20.273

我想每个人都同意箭头的方向需要用户思考它的含义。向下箭头是什么意思？AZ还是ZA？对日期进行排序是什么意思？只有当用户查看实际排序的数据时才清楚。

出于这个原因，我发现最好**不要使用任何方向指示**。足以表明行按特定列排序的事实。找出用户通常期望在第一次点击时对行进行排序的方式很重要。第二次单击反转顺序，第三次单击关闭排序。

我已经实现了几次，用户可以按照他们喜欢的方式按不同的列对行进行排序。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-01-16T03:07:15.900

请记住，**d** escending 是为**d** own 的。所以，我会使用向下箭头来下降。但是，无论如何，我总是对此感到困惑。我建议您改用字母，例如 AZ 和 ZA 而不是箭头。或者，将它们与箭头结合使用。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-03-07T22:58:50.570

没有硬性规定，但最好的方法是减少用户的明显复杂性，使用向下和向上箭头到术语“升序”和“降序”的最佳映射。

请注意，大多数非数字概念没有到“向上”或“向下”的强大自然映射。字典中的字母/单词是“向上”还是“向下”？日期和时间怎么样？在模棱两可的地方，我相信没有“正确”的答案 - 我建议允许“降序”表示更有用的排序顺序以保持一致性，因为用户在移动时可能会认为表格是“向下”的低头。撇开数字表示，因为大多数应用程序的用户不知道或不关心内部表示。因此，AZ 的字母排序可能是“降序”，而时间可能是最近的降序。好消息是，只要第一次点击给用户他们期望的排序行为，

关于正确排序“首先”（显示内容或在新列上排序）的挑战是该问题更重要的含义。信息的类型和预期用途决定了它应该排序。Alphabetic 应该始终默认 AZ，按照我的上述逻辑“降序”。数字因使用而异：表示顺序标识符的数字，例如，员工 ID 将升序 (1-10)，而按数量或价格排序通常会降序，以将最大值置于顶部。时间也有所不同 - 最近的在前（“降序”）通常有效，但在某些情况下，应该首先列出最旧的。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-06-28T00:40:15.010

这是一个高度自以为是的问题。但这是一个合乎逻辑的解决方案以及我选择它的原因：

*解决方案：*

如果使用箭头在表格列中显示排序顺序，最好使用向下箭头升序，反之亦然。

*原因：*

1.  如果我们指的是图片或图表，其中基于视觉和价值的遍历都在同一方向，使用“升序”或“降序”将达到预期目的。但是当涉及到表格时，主要的混淆来源是，这些值被遍历到更高的值（向上，但只是概念上的），但视觉遍历的方向是向下的。而且由于箭头是视觉线索（方向），因此使用它可能更容易让人们更好地理解方向遍历。

2.  对于许多人来说，升序和降序的概念在价值方面是可以理解的。但在某些情况下，该表的用户可能不知道这些概念。例如，从未上过学的人或小学生或对数字世界完全陌生的人。对他们来说，方向性的概念会更容易理解。如在 az 中，向上或向下。如 1-9 向上或向下。需要注意的是，受过教育或有经验的用户都可以理解它（第四个原因）。

3.  下一个原因是，无论我们是否是数字表格的高手，我们一直都在编写列表和表格。而且几乎在所有情况下，我们都是按升序向下写的。所以，它有点硬连线到我们的大脑。

4.  最后，在这个问题上的困惑一直存在，通用的方法总是更好。直到今天，我总是分析这些值是如何排序的，看它是升序还是降序。方向箭头从未达到其目的，因为它不可靠。对于受过教育或有经验的用户来说，立即知道订单将不是问题。但是，当我们创建一个通用标准时，我们必须确保每个可能的用户都“能够”理解它......

*我如何使用它：*

**我使用带尾箭头表示数字、字母或任何其他值，在沿该方向遍历时逐渐增加。**

由于值在增加（默认情况下），用户可以根据需要将其称为 Ascending，但箭头是向下的。这也有助于我对“单词集”进行排序（例如，表中记录的状态。它可能不是按字母数字顺序排序，而是按状态进展的顺序）。

希望这有帮助。

# ssl - 有些图片在http下不加载，但是在https下加载

> ID：338168
> 
> 赞同：0
> 
> 时间：2008-12-03T18:11:52.860
> 
> 标签：ssl, image, iis-6

我遇到了一个问题，网站上的某些图像在 https 下加载，但在 http 下不加载。

例如，如果您访问[https://www.mydomain.com/myimage.gif](https://www.mydomain.com/myimage.gif)，图像看起来很好，但如果您访问[http://www.mydomain.com/myimage.gif](http://www.mydomain.com/myimage.gif)图像返回一个 not发现错误。这只发生在某些图像上。无论哪种方式，其他图像都可以正常加载。即使与问题图像位于同一目录中的图像也可以正常加载。

我知道如果 SSL 设置不正确，我会看到类似的问题，但它始终存在于整个站点，而不是一些图像。

这是在 IIS6 服务器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-03T21:33:06.713

问题解决了。事实证明，https 站点是使用 SSL 端口下实际站点的物理副本创建的，这意味着该站点有 2 个版本在同一域名下提供服务，一个在端口 80 下，一个在端口 443 下。

出现此问题是因为有人更新了端口 443 站点。端口 80 站点中缺少的图像实际上不存在，导致 404 错误。

谢谢您的帮助。太糟糕了，这被修改了......我想这个问题不是严格意义上的编程问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-03T18:35:02.487

将评论移出以回答，希望它会得到回应：

> 这种行为在浏览器和/或 PC/Mac 上是否一致？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-03T21:06:03.913

尝试使用 Fiddler 查看加载页面时该特定图像发生了什么。

# excel - 如何自动合并单元格？

> ID：338185
> 
> 赞同：1
> 
> 时间：2008-12-03T18:15:18.280
> 
> 标签：excel, vba, excel-formula, merge

我有一个 Excel 表，其中包含多个项目 1、2、3 ...，每个项目都有子项目 1.1、1.2 等。我使用子项目列表作为我的关键列并使用 vlookups 填充主要项目，但只有显示每个主要项目一次。

```
/|    A    |    B     |    C     |
-+---------+----------+----------+
1| Item1   |  1.Note  |  Item1.1 |
2|         |          |  Item1.2 |
3|         |          |  Item1.3 |
4| Item2   |  2.Note  |  Item2.1 |
5|         |          |  Item2.2 |
6|         |          |  Item2.3 |
7|         |          |  Item2.4 |
8| Item3   |  3.Note  |  Item3.1 |
9|         |          |  Item3.2 |
0|         |          |  Item3.3 | 
```

列`C`是原始数据；`A`并且`B`是公式。

专栏`B`有注释，所以文字可能很长。我想包装笔记以占用所有可用的行。我可以通过选择`B1:B3`并合并它们来手动执行此操作，但是如果我将项目添加到 column ，它将不会更新`C`。

我不在乎单元格是合并还是只是包裹和重叠。

这可以在公式或 VBA 中完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-04T01:09:24.093

扩展 Jon Fournier 的答案，我更改了范围计算以查找非空白单元格并添加代码以关闭 Merge 抛出的警告对话框。我还将函数更改为公共，以便我可以从宏对话框中运行它。

```
Public Sub AutoMerge()

Dim LastRowToMergeTo As Long
Dim i As Long
Dim LastRow As Long

Application.DisplayAlerts = False

LastRow = Range("S" & CStr(Rows.Count)).End(xlUp).Row

For i = 2 To LastRow

    LastRowToMergeTo = i
    Do While (Len(Range("D" & CStr(LastRowToMergeTo + 1)).Value) = 0) And (LastRowToMergeTo <> LastRow)
        LastRowToMergeTo = LastRowToMergeTo + 1
    Loop

    With Range("D" & CStr(i) & ":D" & CStr(LastRowToMergeTo))
        .Merge
        .WrapText = True
        .VerticalAlignment = xlVAlignTop
    End With

    i = LastRowToMergeTo

Next i

Application.DisplayAlerts = True

End Sub 
```

Jon 的第二部分应该在每次重新计算时运行宏，它似乎不起作用，但对于我正在进行的少量更新而言，这对我来说并不重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-03T20:21:09.557

使用 VBA 可以做到这一点，我想我不知道你是否可以在没有 VBA 的情况下做到这一点。基本上你会做的是每次你的工作表计算你运行代码来重新合并单元格。

我构建了一个与您类似的简单电子表格，并将以下代码放入工作表的代码模块中：

```
Private Sub AutoMerge()

Dim LastRowToMergeTo As Long
Dim i As Long
Dim LastRow As Long

LastRow = Range("C" & CStr(Rows.Count)).End(xlUp).Row

For i = 2 To LastRow

    LastRowToMergeTo = Range("B" & CStr(i)).End(xlDown).Row - 1
    LastRowToMergeTo = Application.WorksheetFunction.Min(LastRowToMergeTo, LastRow)

    With Range("B" & CStr(i) & ":B" & CStr(LastRowToMergeTo))
        .Merge
        .WrapText = True
        .VerticalAlignment = xlVAlignTop
    End With

    i = LastRowToMergeTo

Next i

End Sub

Private Sub Worksheet_Calculate()
    AutoMerge
End Sub 
```

# objective-c - Cocoa/Objective-C 中的全局变量？

> ID：338195
> 
> 赞同：19
> 
> 时间：2008-12-03T18:20:29.987
> 
> 标签：objective-c, cocoa, global-variables

根据*Cocoa Programming for Mac OS X，第 3 版，*第 202 页（第 13 章）：

> 您将在应用程序的几个类中注册、阅读和设置默认值。为确保您始终使用相同的名称，您应该在单个文件中声明这些字符串，然后只需将该文件#import 到您使用这些名称的任何文件中。有几种方法可以做到这一点。例如，您可以使用 C 预处理器的 #define 命令，但大多数 Cocoa 程序员为此使用全局变量。

这真的是正确的最佳做法吗？全局变量？这对我来说似乎很疯狂——与我所学过的一切背道而驰。

更好的设计是定义了这些的简单单例类吗？还是走向全球真的是正确的最佳实践？考虑到许多人认为单身人士是穿着漂亮衣服的全球人，还有比这更好的模式吗？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2008-12-03T23:59:05.857

需要明确的是，建议创建*不可变*的全局变量，而不是内联字符串常量（难以重构且无编译时检查）或#defines（无编译时检查）。以下是您可以这样做的方法...

在 MyConstants.h 中：

```
extern NSString * const MyStringConstant; 
```

在 MyConstants.m 中：

```
NSString * const MyStringConstant = @"MyString"; 
```

然后在任何其他 .m 文件中：

```
#import "MyConstants.h"

...
[someObject someMethodTakingAString:MyStringConstant];
... 
```

这样，您可以在编译时检查您没有拼错字符串常量，您可以在比较常量时检查指针相等而不是字符串相等 [1]，并且调试更容易，因为常量有运行-时间字符串值。

[1] 在这种用法中，您本质上是使用指针值作为常量。碰巧那些特定的整数也指向可以在调试器中使用的字符串

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2008-12-03T18:26:15.170

全局变量或单例将在这里完成同样的事情。两者都可用于将 Cocoa 中的“关键”名称转换为编译器错误时不会引发编译器错误。这是主要目的。全局变量虽然需要更少的输入，但更容易一些。

而不是这样做：

```
[myArray setObject:theObject forKey:MyGlobalVariableKeyName]; 
```

您必须按照以下方式做一些事情：

```
[myArray setObject:theObject 
            forKey:[[MySingletonVariableClass getInstance] myVariableKeyName]; 
```

对于相同的效果，全局变量本质上是更少的输入。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2008-12-03T23:37:20.830

将其称为全局变量在技术上是正确的，但具有误导性。

它是一个全局常量——在范围内是全局的，但它是常量，因此从全局变量不好的意义上来说，它并不坏。

为了展示全局*常量*是如何常见、安全​​和众多的，请考虑以下全局常量示例：

*   课程中的每一堂课
*   每个#define
*   每个枚举
*   Cocoa 声明的几乎所有名称（不包括罕见的全局变量，如`NSApp`）。

唯一需要担心全局常量的时候是它们的名称过于通用（它们可能会污染全局命名空间）。因此，不要使用可能与任何内容冲突的名称（始终使用前缀并始终使名称特定于任务，例如`NSKeyValueObservingOptionNew`）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-03T18:37:20.420

我可以接受在编译时设置且永不更改的常量全局变量。如果你硬编码一个字符串，它是一样的，只是被编译器隐藏了。我会避免像瘟疫这样的可变全局变量。

请记住，Apple 本身也使用相同的技术。我期望定义的许多常量实际上是常量。如果标头可访问但框架不可访问，您将收到链接错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-11-21T08:39:02.777

建立在@Barry Wark 和@Matt Gallagher 的优秀答案的基础上，我的初步回应（见本答案的结尾）还有第三种方法，那就是使用宏/包含组合，确保您只键入一次变量名，并且因此它同时包含在 .h 和 .m 文件中。

**<编辑>**

“总有别的办法……”

在考虑了如何使它更简单，而不涉及额外的头文件之后，这里有一个使用嵌套宏的更简洁的方法。

**在 .h 文件中**

```
#define defineKeysIn_h_File(key)   extern NSString * const key; 
#define defineKeysIn_m_File(key)   NSString * const key = @#key; 

#define myKeyDefineKeys(defineKey) \
/**start of key list*/\
defineKey(myKeyABC);\
defineKey(myKeyXYZ);\
defineKey(myKey123);\
/*end of key list*/

myKeyDefineKeys(defineKeysIn_h_File); 
```

**在 .m 文件中**

```
myKeyDefineKeys(defineKeysIn_m_File); 
```

**实施说明**

您可以在多个标题中多次使用它，但是您需要将“myKeyDefineKeys”的名称更改为唯一的，我建议给它与您定义的键相同的前缀 - 为了我使用的示例“ myKey”贯穿始终。

在另一个文件中，我可能会使用“myOtherKeyDefineKeys”。

也不要乱用defineKeysIn_h_File 和defineKeysIn_m_File 宏，否则你会收到定义已更改的警告。

**<结束编辑>**

**原始答案，仍然有效，但没有改进**

首先，创建一个 vanilla.h 文件并删除默认的#ifdef 等，然后输入您的密钥，如下所示：（这是我为扩展 AVAudioPlayer 编写的类别的剪切和粘贴）

```
//  playFromConsts.h

define_key(AVAudioPlayer_key_player);
define_key(AVAudioPlayer_key_duration);
define_key(AVAudioPlayer_key_filename);
define_key(AVAudioPlayer_key_filepath);
define_key(AVAudioPlayer_key_fileurl);
define_key(AVAudioPlayer_key_urlString);
define_key(AVAudioPlayer_key_envelope);
define_key(AVAudioPlayer_key_startDate);
define_key(AVAudioPlayer_key_linkToPlayer);
define_key(AVAudioPlayer_key_linkFromPlayer);
define_key(AVAudioPlayer_key_linkToPlayerEnvelope);
define_key(AVAudioPlayer_key_linkFromPlayerEnvelope);
define_key(AVAudioPlayer_key_deviceStartTime);
define_key(AVAudioPlayer_key_currentVolume);
define_key(AVAudioPlayer_key_fadeFromVolume);
define_key(AVAudioPlayer_key_fadeToVolume);
define_key(AVAudioPlayer_key_fadeTime);
define_key(AVAudioPlayer_key_segueTime); 
```

然后在你的 normal.h 文件（你的@interface、@protocol 等被声明的地方）放置这 3 行（当然替换你的头文件）

```
#define define_key(x) extern NSString * const x; 
#include "playFromConsts.h"
#undef define_key 
```

最后在与“@interface .h”文件配对的 .m 文件中，放置以下 3 行：

```
#define define_key(x) NSString * const x = @#x; 
#include "playFromConsts.h"
#undef define_key 
```

注意“#include”而不是“#import”——我们实际上确实想多次包含这个文件。

这将完成所有肮脏的工作，并确保键是 NSString * const。

尾随; 是可选的，因为它包含在宏中，但我个人更喜欢它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-02-11T09:04:16.213

所以毕竟。我想出了3个文件。

**常量.h**

```
#define def_key(name) extern NSString *const name
#define def_int(name, value) extern int const name
#define def_type(type, name, value) extern type const name

#include "ConstantsDefs.h" 
```

**常数.m**

```
#import "Constants.h"

#undef def_key 
#define def_key(name) NSString *const name = @#name

#undef def_int
#define def_int(name, value) int const name = value

#undef def_type
#define def_type(type, name, value) type const name = value

#include "ConstantsDefs.h" 
```

**常量定义文件.h**

```
def_key(kStringConstant);
def_int(kIntConstant, 313373);
def_type(float, kFloatConstant, 313373.0f); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-03T18:51:01.970

这取决于您的软件设计。假设您有一个作业管理软件，并且您的“默认值”之一是可以保存各种项目的目录列表。

对于每个作业，您可以有一个 storagefile 成员，它是一个单例，在启动时加载用户首选位置。

或者，您可以拥有一个名为 User Preferences 的全局变量的 Storagefile 成员。仍然可以是单例，但在这种情况下并不重要。

对我来说，复杂的默认值（数十种不同类型的类）应该驻留在它们自己的模型可访问的“空间”中。

但是，可能有一些首选项对如何设置作业很重要，因此这些首选项需要存储在作业对象中，这样当您在另一个用户的应用程序中打开它时，它就会按预期工作。

同样，这取决于您的设计。

# open-source - 将聊天功能嵌入网站的可用解决方案有哪些？

> ID：338203
> 
> 赞同：1
> 
> 时间：2008-12-03T18:22:47.487
> 
> 标签：open-source, chat

我们希望在我们的网站上实现聊天，以便用户可以相互交流。

我们的一般要求是：

1.  它应该呈现在我们的网页上，但它可以呈现在 IFrame 或类似的东西中。我们网站的用户是公众的一部分，而不是内部团队，因此我们不希望他们必须安装单独的应用程序。

2.  用户应该能够在我们的网站上使用他们现有的帐户，而不必为聊天工具创建新帐户。如果我们与某个人（例如 Meebo）合作，我们不希望为合作伙伴共享大量用户信息。

3.  公共许可下的代码，但最好不是使用 GPL 许可的开源项目，但 BSD 或 MIT 许可（可能还有其他许可）是可以的。具有非公共许可证的廉价产品也可能没问题。

4.  我们希望很快实现这一点，并且我们真的不想构建自己的解决方案。

是否有人使用或熟悉可以满足部分或全部这些要求的解决方案？还有其他想法/建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-03T18:47:33.897

有不少。至于开源试试

[https://blueimp.net/ajax/](https://blueimp.net/ajax/)

如果您需要具有基于 Web 的扩展的重型聊天服务器，请查看

[http://www.igniterealtime.org](http://www.igniterealtime.org)

我们目前在 Windows 环境中内部使用它。我们在让它与 Active Directory 一起工作时遇到了一些问题，因此我们进行了 mySQL 安装。

为什么不花几块钱买（有时不重新发明轮子更便宜）

[http://www.aspnetajaxchat.com](http://www.aspnetajaxchat.com)

希望有帮助

# java - 为什么我不能在字符串上使用 switch 语句？

> ID：338206
> 
> 赞同：1036
> 
> 时间：2008-12-03T18:23:57.127
> 
> 标签：java, string, switch-statement

这个功能会被放入更高版本的 Java 中吗？

有人可以解释为什么我不能这样做，就像 Java`switch`声明的技术方式一样吗？

* * *

## 回答 #1

> 赞同：1020
> 
> 时间：2008-12-03T18:30:45.677

带有 case 的 Switch 语句`String`已在[Java SE 7](http://openjdk.java.net/projects/jdk7/features/)中实现，至少[在它们首次被请求 16 年后。](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=1223179)没有提供延迟的明确原因，但可能与性能有关。

## JDK 7 中的实现

该功能现在已`javac` [通过“脱糖”过程实现；](http://blogs.oracle.com/darcy/entry/project_coin_string_switch_anatomy)`String`在声明中使用常量的干净的高级语法`case`在编译时扩展为遵循模式的更复杂的代码。生成的代码使用一直存在的 JVM 指令。

一个`switch`with `String`case 在编译期间被翻译成两个开关。第一个将每个字符串映射到一个唯一的整数——它在原始开关中的位置。这是通过首先打开标签的哈希码来完成的。对应的 case 是一个`if`测试字符串相等性的语句；如果散列上有冲突，则测试是级联的`if-else-if`。第二个开关反映了原始源代码中的内容，但用它们对应的位置替换了案例标签。这个两步过程可以很容易地保留原始交换机的流量控制。

## JVM 中的开关

有关更多技术深度`switch`，您可以参考 JVM 规范，其中描述[了 switch 语句的编译](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-3.html#jvms-3.10)。简而言之，有两种不同的 JVM 指令可用于切换，具体取决于案例使用的常量的稀疏性。两者都依赖于对每种情况使用整数常量来有效执行。

如果常量是密集的，它们被用作指令指针表（即指令）的索引（在减去最小值之后）`tableswitch`。

如果常量是稀疏的，则执行正确大小写的二进制搜索——`lookupswitch`指令。

`switch`在对对象进行脱糖时`String`，可能会使用两个指令。适用于第`lookupswitch`一次打开哈希码找到机箱的原始位置。生成的序数自然适合 a `tableswitch`。

两条指令都要求分配给每种情况的整数常量在编译时进行排序。在运行时，虽然 的`O(1)`性能`tableswitch`通常比 的`O(log(n))`性能好`lookupswitch`，但需要进行一些分析以确定表是否足够密集以证明时空权衡的合理性。Bill Venners 写[了一篇很棒的文章](http://www.artima.com/underthehood/flowP.html)，更详细地介绍了这一点，并深入了解了其他 Java 流控制指令。

## 在 JDK 7 之前

在 JDK 7 之前，`enum`可以近似于`String`基于 - 的开关。这使用编译器在每种类型上生成[的静态方法。`valueOf`](http://docs.oracle.com/javase/specs/jls/se8/html/jls-8.html#jls-8.9.3)`enum`例如：

```
Pill p = Pill.valueOf(str);
switch(p) {
  case RED:  pop();  break;
  case BLUE: push(); break;
} 
```

* * *

## 回答 #2

> 赞同：129
> 
> 时间：2008-12-03T18:44:19.753

如果您的代码中有一个可以打开字符串的位置，那么最好将字符串重构为可以打开的可能值的枚举。当然，您可以将可能拥有的字符串值限制为枚举中的值，这可能需要也可能不需要。

当然你的枚举可以有一个“其他”的条目和一个 fromString(String) 方法，那么你可以有

```
ValueEnum enumval = ValueEnum.fromString(myString);
switch (enumval) {
   case MILK: lap(); break;
   case WATER: sip(); break;
   case BEER: quaff(); break;
   case OTHER: 
   default: dance(); break;
} 
```

* * *

## 回答 #3

> 赞同：91
> 
> 时间：2011-09-16T13:11:33.573

以下是基于 JeeBee 的帖子的完整示例，使用 java 枚举而不是使用自定义方法。

请注意，在 Java SE 7 及更高版本中，您可以在 switch 语句的表达式中使用 String 对象。

```
public class Main {

    /**
    * @param args the command line arguments
    */
    public static void main(String[] args) {

      String current = args[0];
      Days currentDay = Days.valueOf(current.toUpperCase());

      switch (currentDay) {
          case MONDAY:
          case TUESDAY:
          case WEDNESDAY:
              System.out.println("boring");
              break;
          case THURSDAY:
              System.out.println("getting better");
          case FRIDAY:
          case SATURDAY:
          case SUNDAY:
              System.out.println("much better");
              break;

      }
  }

  public enum Days {

    MONDAY,
    TUESDAY,
    WEDNESDAY,
    THURSDAY,
    FRIDAY,
    SATURDAY,
    SUNDAY
  }
} 
```

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2008-12-03T18:32:10.383

基于整数的开关可以优化为非常有效的代码。基于其他数据类型的开关只能编译成一系列 if() 语句。

出于这个原因，C 和 C++ 只允许在整数类型上进行切换，因为它对其他类型毫无意义。

C# 的设计者认为风格很重要，即使没有优势。

Java 的设计者显然像 C 的设计者一样思考。

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2015-04-09T06:30:08.267

自 1.7起直接使用的示例`String`也可能会显示：

```
public static void main(String[] args) {

    switch (args[0]) {
        case "Monday":
        case "Tuesday":
        case "Wednesday":
            System.out.println("boring");
            break;
        case "Thursday":
            System.out.println("getting better");
        case "Friday":
        case "Saturday":
        case "Sunday":
            System.out.println("much better");
            break;
    }

} 
```

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2008-12-03T20:49:42.213

James Curran 简洁地说：“基于整数的开关可以优化为非常有效的代码。基于其他数据类型的开关只能编译为一系列 if() 语句。因此，C 和 C++ 只允许对整数类型进行开关，因为它对其他类型毫无意义。”

我的观点，仅此而已，就是一旦你开始启用非基元，你就需要开始考虑“等于”与“==”。首先比较两个字符串可能是一个相当长的过程，增加了上面提到的性能问题。其次，如果要打开字符串，则需要打开忽略大小写的字符串，打开考虑/忽略语言环境的字符串，打开基于正则表达式的字符串....我会赞成一个可以节省大量时间的决定语言开发人员以程序员的少量时间为代价。

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2008-12-03T21:45:38.480

除了上述好的论点之外，我还要补充一点，今天很多人认为`switch`Java 的程序过去已经过时（回到 C 时代）。

我并不完全赞同这个观点，我认为`switch`在某些情况下它会有用处，至少是因为它的速度，而且无论如何它比`else if`我在一些代码中看到的一些级联数字要好......

但确实，值得看看你需要一个开关的情况，看看它是否不能被更 OO 的东西代替。例如 Java 1.5+ 中的枚举，可能是 HashTable 或其他一些集合（有时我很遗憾我们没有（匿名）函数作为一等公民，如在 Lua 中——它没有 switch——或 JavaScript），甚至是多态性。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2015-05-23T20:16:28.527

如果你没有使用JDK7或更高版本，你可以使用`hashCode()`它来模拟它。因为`String.hashCode()`通常对不同的字符串返回不同的值，并且总是对相等的字符串返回相同的值，所以它是相当可靠的（不同的字符串*可以*产生与注释中提到的@Lii 相同的哈希码，例如`"FB"`and `"Ea"`）参见[文档](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#hashCode() "字符串哈希码")。

因此，代码将如下所示：

```
String s = "<Your String>";

switch(s.hashCode()) {
case "Hello".hashCode(): break;
case "Goodbye".hashCode(): break;
} 
```

这样，您在技术上打开了一个`int`.

或者，您可以使用以下代码：

```
public final class Switch<T> {
    private final HashMap<T, Runnable> cases = new HashMap<T, Runnable>(0);

    public void addCase(T object, Runnable action) {
        this.cases.put(object, action);
    }

    public void SWITCH(T object) {
        for (T t : this.cases.keySet()) {
            if (object.equals(t)) { // This means that the class works with any object!
                this.cases.get(t).run();
                break;
            }
        }
    }
} 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2013-11-15T15:43:38.777

多年来，我们一直为此使用（n 开源）预处理器。

```
//#switch(target)
case "foo": code;
//#end 
```

预处理文件被命名为 Foo.jpp 并使用 ant 脚本处理成 Foo.java。

优点是它被处理成在 1.0 上运行的 Java（尽管通常我们只支持回 1.4）。此外，与使用枚举或其他变通方法来做这件事（很多字符串开关）相比，这样做要容易得多——代码更容易阅读、维护和理解。IIRC（此时无法提供统计数据或技术推理）它也比自然的 Java 等价物更快。

缺点是您没有编辑 Java，因此它需要更多的工作流程（编辑、处理、编译/测试），而且 IDE 将链接回 Java，这有点复杂（开关变成了一系列 if/else 逻辑步骤）并且不维护开关盒顺序。

我不建议将它用于 1.7+，但如果您想编写针对早期 JVM 的 Java（因为 Joe public 很少安装最新版本），它会很有用。

您可以[从 SVN](https://svn.code.sf.net/p/vexi/code/trunk/org.vexi-build.jpp)获取它或在线浏览[代码](https://svn.code.sf.net/p/vexi/code/trunk/org.vexi-build.jpp/src/main/java/org/vexi/build/jpp/)。您将需要[EBuild](http://ebuild-project.org)来按原样构建它。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2017-01-19T06:09:48.553

其他答案说这是在 Java 7 中添加的，并为早期版本提供了解决方法。这个答案试图回答“为什么”

Java 是对 C++ 过于复杂的反应。它被设计成一种简单干净的语言。

字符串在语言中得到了一些特殊情况处理，但我似乎很清楚，设计者试图将特殊大小写和语法糖的数量保持在最低限度。

由于字符串不是简单的原始类型，因此打开字符串在后台相当复杂。在设计 Java 时，这不是一个常见的功能，并且与极简设计并不完全吻合。尤其是当他们决定不对字符串使用特殊情况 == 时，如果 == 不使用 case，那么 case 会（并且是）有点奇怪。

在 1.0 和 1.4 之间，语言本身几乎保持不变。大多数对 Java 的增强都在库方面。

Java 5 改变了这一切，语言得到了极大的扩展。在版本 7 和 8 中进行了进一步的扩展。我预计这种态度的改变是由 C# 的兴起推动的

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-03-16T08:29:27.793

这个[答案](https://stackoverflow.com/a/338230/1366871)很好地解释了技术细节。我只是想使用 Java 12 [switch 表达式](https://docs.oracle.com/en/java/javase/13/language/switch-expressions.html)添加它，您可以使用以下语法来完成它：

```
String translation(String cat_language) {
    return switch (cat_language) {
        case "miau miau" -> "I am to run";
        case "miauuuh" -> "I am to sleep";
        case "mi...au?" ->  "leave me alone";
        default ->  "eat";
    };
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-02-09T10:39:17.953

[**JEP 354: Switch Expressions (Preview)**](https://openjdk.java.net/jeps/354) in JDK-13 和[**JEP 361: Switch Expressions (Standard)**](https://openjdk.java.net/jeps/361) in JDK-14 将扩展***switch 语句***，因此它可以用作***表达式***。

现在你可以：

*   *直接从switch 表达式*分配变量，
*   使用新形式的开关标签 ( `case L ->`)：

    > “case L ->”开关标签右侧的代码被限制为表达式、块或（为方便起见）throw 语句。

*   每个案例使用多个常量，用逗号分隔，
*   并且没有更多的价值*中断*：

    > 为了从 switch 表达式中产生一个值，`break`with value 语句被删除以支持`yield`语句。

因此，答案 ( [1](https://stackoverflow.com/a/7445174/7109598) , [2](https://stackoverflow.com/a/29531341/7109598) ) 中的演示可能如下所示：

```
 public static void main(String[] args) {
    switch (args[0]) {
      case "Monday", "Tuesday", "Wednesday" ->  System.out.println("boring");
      case "Thursday" -> System.out.println("getting better");
      case "Friday", "Saturday", "Sunday" -> System.out.println("much better");
    } 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-06-30T15:35:58.783

在 Java 11+ 中也可以使用变量。唯一的条件是它必须是一个常数。

例如：

```
final String LEFT = "left";
final String RIGHT = "right";
final String UP = "up";
final String DOWN = "down";

String var = ...;

switch (var) {
    case LEFT:
    case RIGHT:
    case DOWN:
    default:
        return 0;
} 
```

*PS。我没有在早期的 jdks 上尝试过这个。因此，如果那里也支持，请更新答案。*

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2017-06-01T06:33:28.257

不是很漂亮，但这是 Java 6 和下面的另一种方式：

```
String runFct = 
        queryType.equals("eq") ? "method1":
        queryType.equals("L_L")? "method2":
        queryType.equals("L_R")? "method3":
        queryType.equals("L_LR")? "method4":
            "method5";
Method m = this.getClass().getMethod(runFct);
m.invoke(this); 
```

# javascript - 正则表达式：从 json 列表中删除引号

> ID：338212
> 
> 赞同：0
> 
> 时间：2008-12-03T18:26:09.710
> 
> 标签：javascript, regex, json

我有一个 json 格式的对象数组：

```
[
    {
        "name": "obj1",
        "list": [
            "elem1",
            "elem2",
            "elem3"
        ]
    },
    {
        "name": "obj2",
        "list": [
            "elem4",
            "elem5",
            "elem6"
        ]
    }
] 
```

现在我想构建正则表达式以使用javascript从“列表”中的元素周围删除引号。

理想的结果：

```
[{"name":"obj1", "list":[elem1, elem2, elem3]},
 {"name":"obj2", "list":[elem4, elem5, elem6]}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-03T23:04:22.050

如果 [elem1, elem2, elem3] 要成为对 DOM 元素甚至是现有变量的引用，那么也许将您的 JSON 字符串转换为 JavaScript 对象，然后再替换这些字符串可能是更好的方法。

例如，如果它们都是 DOM 元素 id 值，那么在将 JSON 字符串转换为对象之后，您可以直接执行`object["list"][0] = document.getElementById(object["list"][0])`或对您的对象有意义的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-03T20:30:31.190

这有效，但它不是纯正则表达式：

```
var str = '[{"name":"obj1", "list":["elem1", "elem2", "elem3"]},'
        + '{"name":"obj2", "list":["elem4", "elem5", "elem6"]}]';
str = str.replace(/"list":\[[^\]]+\]/g, function (match) {
    return '"list":' + match.substring(7, match.length).replace(/([^\\])"/g, '$1');
});
document.write(str); 
```

基本上，它将过程分为两个：首先，查找列表子字符串；其次，删除其中的撇号。

如果 javascript 支持可变长度后视，您可以使用纯正则表达式来执行此操作，但它不支持。

根据 MrP 的建议，编辑为允许在列表元素中使用转义撇号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-07T05:24:51.547

这应该可以解决您描述的问题：

```
str = str.replace(/"(?=[^\[]*\])/g, ''); 
```

匹配引号后，前瞻检查前面是否有一个右方括号，但在它和当前位置之间没有左方括号。如果 JSON 格式正确，则意味着左括号在当前位置*之前，因此匹配发生在列表中。*

# .net - 为什么是 System.Web.UI 中的 Pair？

> ID：338216
> 
> 赞同：6
> 
> 时间：2008-12-03T18:27:21.080
> 
> 标签：.net, class

至少对我来说，Pair 课程是一门非常多用途的课程。那么微软为什么要把它放到 System.Web.UI 命名空间中呢？

有什么理由让我的小脑袋无法理解吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-03T18:28:52.233

它用于序列化视图状态（连同它的表亲 Triplet）。

我猜想它们不是基础库的一部分的原因（即使它们没有任何特定于 ASP.NET 的内容）是因为它们没有类型，所以它们不是很有用。

在基本库中包含无类型对和三元组，可能被视为鼓励“无类型”编程。

不过，类型化的元组可能很有用（我认为 F# 有它们）。我认为匿名类型涵盖了异构元组的大部分用例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-03T18:35:42.343

我不认为你会找到一个很好的理由。似乎它最初是由网络团队创建的，所以他们在他们的命名空间/程序集中创建了它。他们还为[AspNetHostingPermission添加了](http://msdn.microsoft.com/en-us/library/system.web.aspnethostingpermission.aspx)[LinkDemand](http://msdn.microsoft.com/en-us/library/system.security.permissions.securityaction.linkdemand.aspx)，这很不幸。

就其“预期用途”而言，MSDN 表示

> [ **Pair**类] 是在整个 ASP.NET 中以各种方式使用的实用程序类，例如在页面状态管理任务期间或在配置节处理程序中。
> ... **Pair**类可以在页面状态持久性实现中以多种方式使用
> 。最常见的用途是作为[ViewState](http://msdn.microsoft.com/en-us/library/system.web.ui.control.viewstate.aspx)和[ControlState](http://msdn.microsoft.com/en-us/library/system.web.ui.pagestatepersister.controlstate.aspx)集合的容器。在这种情况下，[First](http://msdn.microsoft.com/en-us/library/system.web.ui.pair.first.aspx)属性用于[ViewState](http://msdn.microsoft.com/en-us/library/system.web.ui.control.viewstate.aspx)，而[Second](http://msdn.microsoft.com/en-us/library/system.web.ui.pair.second.aspx)用于[ControlState](http://msdn.microsoft.com/en-us/library/system.web.ui.pagestatepersister.controlstate.aspx)。

 *** * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-12-06T15:56:45.747

这不能直接回答问题，但在 .NET 4 中，您可以并且可能应该使用[Tuple](http://msdn.microsoft.com/en-us/library/dd387036.aspx)。

为了回答这个问题，我认为将 Pair 放在 System.Web.UI 中只是一个错误，微软试图通过引入 Tuple 类来解决这个错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-24T18:28:14.057

上帝保佑我们应该有一个比字典更轻的类型 Pair 并且可以嵌入到类型列表中以便它是可索引的:)。当然，创建其中之一是无痛的，但是为什么。

# python - 以字符数设置 wxPython TextCtrl 的宽度

> ID：338217
> 
> 赞同：7
> 
> 时间：2008-12-03T18:27:25.730
> 
> 标签：python, wxpython

我的 wxPython 程序中有一个`TextCtrl`，我想将其宽度设置为正好 3 个字符。但是，手动设置其大小的唯一方法仅接受像素数。有没有办法指定字符而不是像素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-03T18:44:38.410

好像没有办法。但是，您可以使用`wxWindow::GetTextExtent`. 这是 C++ 代码，但可以很容易地适应 wxPython：

```
int x, y;
textCtrl->GetTextExtent(wxT("T"), &x, &y);
textCtrl->SetMinSize(wxSize(x * N + 10, -1));
textCtrl->SetMaxSize(wxSize(x * N + 10, -1));

/* re-layout the children*/
this->Layout(); 

/*  alternative to Layout, will resize the parent to fit around the new 
 *  size of the text control. */
this->GetSizer()->SetSizeHints(this);
this->Fit(); 
```

也就是说，你取一个合理宽度字符的大小（字体可能有可变宽度字符）并适当地乘以它，添加一些小的值来说明本机填充（例如，10px）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-03T18:42:41.597

意识到大多数字体是成比例的，这意味着每个字符可能采用不同的宽度。WWW 和 lll 都是 3 个字符，但它们需要不同大小的文本框。有些字体，比如Courier，是设计成固定宽度的，不会有这个问题。不幸的是，您可能无法控制在文本框中选择哪种字体。

如果您仍想尝试此操作，关键是获取字符的宽度（以像素为单位），将其乘以字符数，然后为字符周围的边框添加一些填充。您可能会发现这是一个很好的起点：

[http://docs.wxwidgets.org/stable/wx_wxdc.html#wxdcgetpartialtextextents](http://docs.wxwidgets.org/stable/wx_wxdc.html#wxdcgetpartialtextextents)

或者，正如 litb 建议的那样：

[http://docs.wxwidgets.org/2.4/wx_wxwindow.html#wxwindowgettextextent](http://docs.wxwidgets.org/2.4/wx_wxwindow.html#wxwindowgettextextent)

# apache-flex - AIR是否可以在下载视频时播放视频

> ID：338221
> 
> 赞同：5
> 
> 时间：2008-12-03T18:28:21.953
> 
> 标签：apache-flex, video, air, flv

这个想法是部分下载视频（从不同的服务器），但在视频文件完成之前开始播放。问题是 VideoDisplay 组件在打开以进行写入时不会读取视频文件，反之亦然：如果 VideoDisplay 播放视频，则无法写入...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-24T16:56:51.013

我知道我可能听起来完全题外话，但你应该确保你已经正确地考虑过通过 Flash Media Server、Wowza 或 Red5 进行视频流传输，然后再投入大量精力下载文件。只是一个想法..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-11T15:56:08.040

What about having multiple parts of the video, so playing can begin as soon as first part gets downloaded. So the parts have to be concatenated somehow at client side.

(Additionally, if one's connection is insufficient, showing a loading symbol is fine.)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-15T18:19:51.047

如果可以使用 Air 以共享模式打开文件。主流操作系统（Windows、Linux、MacOS）内置了此功能。

使用两个线程：

在线程 1（下载线程）中，以共享模式打开文件以允许从其他线程和进程读取。

在线程 2（播放器线程）中，以共享模式打开文件以允许从其他线程和进程读取和写入。

确保缓冲文件的开头，这样您的播放器将始终有一些东西可以播放，并且在播放不完整的文件时不会卡住。

# c# - asp.net中令人讨厌的异常

> ID：338225
> 
> 赞同：0
> 
> 时间：2008-12-03T18:29:28.987
> 
> 标签：c#, asp.net

每个人；我在asp.net中有这个问题，我有一个插入和修改数据的页面，在保存之前我会进行验证，如果它通过了我会保存数据，但如果没有，我会引发异常并显示它，函数是这样的；

```
protected void btnSave_Click(object sender, EventArgs e)
{
try
{
...
if(ValidData())
  //Save
  ...
else
  throw new Exception("Invalid data");
}
catch(Exception ex)
{
  // Javascript alert
  JSLiteral.Text = Utilities.JSAlert(ex.Message);
}
} 
```

问题是，在我引发异常并修复页面中的数据后，我再次单击保存按钮并保存，但在它再次向我显示异常消息及其烦人之前。即使保存了数据，我再次单击它也会再次显示来自异常的消息。

你知道这个问题的答案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-03T18:32:23.287

保存后是否将 JSLiteral 的值重置为空？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-03T18:32:24.033

关闭 JSLiteral 控件的视图状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-03T18:36:28.723

如果 JSLiteral 是服务器端控件并且它正在使用视图状态。然后你需要在保存成功时清除控件的状态。

您可以禁用控件的视图状态，例如 JSLiteral.EnableViewState =false;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-03T18:32:15.143

消息是否保存在文字的视图状态中？

如果数据有效，则将文字文本显式设置为空。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-03T18:32:24.940

我最初的猜测是 ViewState 会记住错误消息。尝试在 JSLiteral 控件上禁用 ViewState。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-03T18:36:27.507

在同一个函数中抛出和捕获异常基本上是没有意义的（异常旨在跨越调用级别）。如果你把它写成这样，一切可能会更好：

```
if(ValidData())
{
  //Save
}
 else
{  // Javascript alert
  JSLiteral.Text = Utilities.JSAlert(ex.Message);
} 
```

# sharepoint - Sharepoint 默认列表项详细信息视图

> ID：338235
> 
> 赞同：3
> 
> 时间：2008-12-03T18:31:33.227
> 
> 标签：sharepoint, web-parts

我有一个以指定格式呈现随机列表项（来自任何列表和列表类型）的 Web 部件。我希望 webpart 中显示的项目链接到它们的 ListItem 详细信息视图。但是，我看不到列表本身的属性，它可以告诉我列表的默认详细视图是什么视图（即博客列表详细信息是 Post.aspx）。这是否来自列表定义？我将如何以编程方式获取该信息？我试图避免根据列表类型对任何列表信息进行硬编码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-03T18:54:44.847

看看`SPList.Forms[PAGETYPE.PAGE_DISPLAYFORM].Url`。

我想这就是你要找的。您需要在查询字符串上附加 SPListItem.ID，以便它知道要显示哪个列表项。

```
using (SPWeb myWeb = GetMyWeb()) // GetMyWeb gets a reference to a SPWeb object
{
    SPList myList = GetMyList(myWeb); // GetMyList gets a reference to a SPList object
    SPListItem myItem = GetMyListItem(myList); // GetMyListItem gets a reference to a SPListItem object
    string url = String.Format("{0}/{1}?ID={2}",
        myWeb.Url,
        myList.Forms[PAGETYPE.PAGE_DISPLAYFORM].Url, 
        myItem.ID);
} 
```

附加到查询字符串也是一个很好的做法，`&Source=/url/to/current/page`这样当用户单击“编辑”或“显示”表单上的“取消/关闭”按钮时，他们将被重定向回他们离开的页面。

# .net - 如何在我的 web.config 文件中存储字典对象？

> ID：338242
> 
> 赞同：67
> 
> 时间：2008-12-03T18:32:29.837
> 
> 标签：.net, asp.net, dictionary, web-config

我想在我的网络配置文件中存储一个简单的键/值字符串字典。Visual Studio 可以轻松存储字符串集合（请参见下面的示例），但我不确定如何使用字典集合来完成。

```
 <ArrayOfString xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
          <string>value1</string>
          <string>value2</string>
          <string>value2</string>
        </ArrayOfString> 
```

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2008-12-03T18:49:25.373

为什么要重新发明轮子？[AppSettings](http://www.odetocode.com/Articles/345.aspx)部分专门用于在配置文件中存储类似字典的数据。

如果您不想在 AppSettings 部分中放置太多数据，则可以将相关值分组到自己的部分中，如下所示：

```
<configuration>
  <configSections>
    <section 
      name="MyDictionary" 
      type="System.Configuration.NameValueFileSectionHandler,System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
  </configSections>

  <MyDictionary>
     <add key="name1" value="value1" />
     <add key="name2" value="value2" />
     <add key="name3" value="value3" />
     <add key="name4" value="value4" />
  </MyDictionary>
</configuration> 
```

您可以使用访问此集合中的元素

```
using System.Collections.Specialized;
using System.Configuration;

public string GetName1()
{
    NameValueCollection section =
        (NameValueCollection)ConfigurationManager.GetSection("MyDictionary");
    return section["name1"];
} 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2010-07-20T20:20:56.673

朱丽叶的回答是正确的，但仅供参考，您还可以通过如下`.config`设置将其他配置放入外部文件中：`web.config`

```
<?xml version="1.0"?>
<configuration>
  <configSections>
    <!-- blah blah the default stuff here -->

    <!-- here, add your custom section -->
    <section name="DocTabMap" type="System.Configuration.NameValueFileSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
  </configSections>

  <!-- your custom section, but referenced in another file -->
  <DocTabMap file="CustomDocTabs.config" />

  <!-- etc, remainder of default web.config is here -->
</configuration> 
```

然后，你的`CustomDocTabs.config`样子是这样的：

```
<?xml version="1.0"?>
<DocTabMap>
  <add key="A" value="1" />
  <add key="B" value="2" />
  <add key="C" value="3" />
  <add key="D" value="4" />
</DocTabMap> 
```

现在您可以通过以下方式在代码中访问它：

```
NameValueCollection DocTabMap = ConfigurationManager.GetSection("DocTabMap") as NameValueCollection;
DocTabMap["A"] // == "B" 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-12-03T18:36:25.867

您需要实现一个自定义部分（请参阅[配置部分设计器](http://www.codeplex.com/csd)）。

你真正想要的......是接近这个的东西：

```
<MyDictionary>
  <add name="Something1" value="something else"/>
  <add name="Something2" value="something else"/>
  <add name="Something3" value="something else"/>
</MyDictionary> 
```

XmlAttribute“名称”是一个键，它不允许在后面的代码中有多个。同时，确保 Collection MyDictionary 也是一个 Dictionary。

您可以使用此工具完成所有这些工作，并根据需要填补空白。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2011-07-29T10:38:19.897

在应用程序设置中，我们可以使用 System.Collection.Specilized.StringCollection

```
<X.Properties.Settings>
  <setting name="ElementsList" serializeAs="Xml">
    <value>
      <ArrayOfString xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:xsd="http://www.w3.org/2001/XMLSchema">
        <string>Element1</string>
        <string>Element2</string>
      </ArrayOfString>
    </value>
  </setting>
</X.Properties.Settings> 
```

访问列表：

```
var element = Settings.Default.ElementsList[index] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-03T18:38:18.920

我不确定如何直接存储字典，但您可以轻松地使用字符串数组来存储字典。对于每个键值对，您将键保存为第一个字符串，将值保存为第二个。然后在重建字典时，您可以撤消此编码。

```
static Dictionary<string,string> ArrayToDictionary(string[] data) {
  var map = new Dictionary<string,string>();
  for ( var i=  0; i < data.Length; i+=2 ) {
    map.Add(data[i], data[i+1]);
  }
  return map;
} 
```

# mysql - 如何在 mysql 中启用跨数据库连接？

> ID：338251
> 
> 赞同：6
> 
> 时间：2008-12-03T18:36:43.713
> 
> 标签：mysql, mysql-error-1142

我正在尝试使用如下查询将一些数据从我的生产数据库移植到我的沙箱：

```
INSERT `dbsandbox`.`SomeTable`(Field1, Field2, Field3)
SELECT t.Field1, t.Field2, t.Field3
FROM `dbprod`.`SomeTable` t; 
```

当我尝试此跨数据库连接时，出现以下错误：

错误 1142 (42000): SELECT 命令拒绝用户 'myusername'@'server.domain.tdl' 用于表 'SomeTable'

有问题的用户对两个数据库的有问题的表都有权限。我在 unix mysql 客户端和 windows MySQL Query Browser 应用程序中都尝试过，结果相同。

我错过了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-11T18:59:02.853

事实证明这是一个权限问题。源数据库需要我使用的用户名的密码才能访问任何表。目标只要求用户名在本地主机上。

即使我每次在跨数据库查询的上下文中使用密码启动 MySQL 客户端，也会尝试另一个连接。此连接不记得我最初使用密码对客户端进行身份验证，因此从沙箱连接到生产数据库失败。显然，显式声明表的数据库名称有时也意味着需要另一个连接。

答案是从生产数据库启动查询，引用没有数据库限定符的本地表，然后插入沙盒数据库表。这次它奏效了：

使用数据库产品

插入`dbsandbox`。`SomeTable`(Field1, Field2, Field3) SELECT t.Field1, t.Field2, t.Field3 FROM `SomeTable`t;

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-03T18:52:15.837

听起来像是权限问题。通常，用户权限是以数据库方式在数据库上设置的，因此目标用户无权访问源。

首先确保您可以从源数据库中进行选择。

```
SELECT t.Field1, t.Field2, t.Field3
FROM `dbprod`.`SomeTable` t; 
```

那样有用吗？如果没有，那么您需要授予用户对源数据库的选择权限。

两个数据库都在/在同一台服务器上，对吗？

# compiler-errors - F1001 RAD STUDIO 2009 中的内部代码生成器错误

> ID：338253
> 
> 赞同：0
> 
> 时间：2008-12-03T18:37:06.973
> 
> 标签：compiler-errors, c++builder, c++builder-2009

我的代码中出现了这个毫无价值的错误。它非常一致，重新启动编译器没有做任何事情。有没有其他人解决过这个问题？

```
while( int CharPos = _Message.Pos(_What) )
{
    _Message.Insert( _With, CharPos);
    _Message.Delete(CharPos + 1, 1);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-03T19:15:59.000

你可以：

*   遵循[QC#66963](http://qc.codegear.com/wc/qcmain.aspx?d=66963)

*   在 qc.codegear.com 上搜索 F1001：[http ://dn.codegear.com/search?qall=f1001&sourcelang=cpp&allsites=y](http://dn.codegear.com/search?qall=f1001&sourcelang=cpp&allsites=y)

*   执行编译器文档中有关 F1001 的说明，即联系技术支持。

*   上述所有的 ：）

编辑：顺便说一句，您是否尝试过使用命令行编译器编译有问题的源文件（或至少一个仅包含 main() 和有问题代码的最小骨架文件）？从 IDE 编译时，BCB 往往会隐藏很多详细的错误信息——使用命令行编译器往往会显示真正的错误。不是万无一失，但值得一试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-03T18:42:45.230

嗯......显然，当您尝试在 while 循环的条件中声明一个 int 时，编译器会中断。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T00:59:19.983

这预计将在即将发布的 RAD Studio 2009 更新 3 中得到解决。

# wpf - 与内容相关的窗口大小

> ID：338258
> 
> 赞同：1
> 
> 时间：2008-12-03T18:38:01.527
> 
> 标签：wpf

关于我拥有的 Window，我有两个尺寸问题。基本布局是这样的

```
<Window MaxHeight="{DynamicResource {x:Static SystemParameters.VirtualScreenHeight}}"
        MaxWidth="{DynamicResource {x:Static SystemParameters.VirtualScreenWidth}}" 
        >
    <StackPanel>
        <DockPanel LastChildFill="False">
            <StackPanel DockPanel.Dock="Left"
                        Orientation="Horizontal">
                <!--Some buttons-->
            </StackPanel>
            <StackPanel DockPanel.Dock="Right"
                        Orientation="Horizontal">
                <!--Some buttons-->
            </StackPanel>
        </DockPanel>
        <ScrollViewer>
            <WrapPanel x:Name="Container">
            </WrapPanel>
        </ScrollViewer>
    </StackPanel>
</Window> 
```

1）如何使窗口水平方向不小于 DockPanel 的宽度？

2) 如何使 ScrollViewer 限制在 Window 范围内？它根据其内容调整自身大小，超出了 Window 的范围。
当我有的时候它有点用

```
<Window><ScrollViewer/></Window> 
```

，但我真的不希望滚动条内的 DockPanel 。在当前的形式中，它甚至迫使 Window 打破它的 MaxHeight。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-03T18:43:04.060

我建议您使用带有 * Lenght 的 Grid 而不是 DockPanel 和 StackPanel。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-03T20:13:30.837

只要摆脱那些`StackPanel`s。用 s 替换它们，`Grid`你应该会很好。的布局逻辑`StackPanel`是这样的，它将在某个方向（垂直于`StackPanel`s 方向）上为孩子们提供他们要求的尽可能多的空间。这就是为什么您会看到奇怪的布局问题。

# .net - Silverlight 中的 .Net 框架版本：无列表 .寻找方法？

> ID：338262
> 
> 赞同：4
> 
> 时间：2008-12-03T18:38:55.893
> 
> 标签：.net, silverlight, generics, extension-methods

今天我发现了一件让我伤心的事情：System.Generic.Collections.List 类型的对象没有很多我喜欢的有用的扩展方法，例如 Find、FindAll、FindIndex、Exists、RemoveAll 等.

VS2008 中的对象浏览器显示这些方法存在于我正在使用的 mscorlib 版本中，但如果我查看 ildasm 中的程序集，它们不存在。

我是否在这里遗漏了一些明显的东西，或者有什么方法可以让我的 Silverlight 应用程序使用它们？

另外，我想知道 Silverlight 的运行时与“真实”运行时之间是否有很好的参考。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-03T18:43:55.510

这里可能发生的是对象浏览器正在解析为普通的 2.0 mscorlib，而不是用于 silverlight 的版本。

SilverLight 应用程序缺少 Find 扩展方法并不奇怪。SilverLight 的 .Net 框架被剥离了很多，以使其足够小，以便用户快速下载。他们不得不进行一些艰难的削减，许多项目没有成功。

如果您需要该方法，为什么不自己添加呢？添加所有这些可能会在一段时间后变得很累，但它可以用来解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-03T18:56:57.417

只是一个要点：`Find`不是扩展方法。这是一个完全正常的实例方法。

`List<T>`然而， Silverlight中有些“遗漏”的部分并不完全让我感到惊讶。它*是*框架的精简版。不幸的是，我不知道有什么资源可以说明什么进什么出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-03T19:09:20.187

这是一场持久战，兄弟。我将我的 .Net API 和 Silverlight API 书签放在一起，因为我开发了很多 WPF 和 Silverlight 中使用的控件，而且似乎每次我想出一个实现功能的好主意时，我都会运行进入 Silverlight 不支持的基本内容。

我可以看到会议讨论什么得到印章。“我们需要这个 find() 方法做什么？我们有一个非常好的 LINQ 库。不见了！”

[Silverlight 参考](http://msdn.microsoft.com/en-us/library/cc838194(VS.95).aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-29T11:34:00.923

.Exists 仍然不存在作为 silverlight 版本中的扩展名

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-23T14:37:15.170

如果您还没有引用 System.Core 程序集并执行

```
using System.Linq; 
```

对于任何 IEnumerable，您将拥有许多扩展方法，可以做您需要的东西等等。

Microsoft 显然希望将 Silverlight 运行时保持在较小的下载范围内，从而避免重复实现。

原始框架中的许多东西在泛型和 .NET 2.0 中已经过时，在 .NET 3.0 和扩展方法中更多。我想你在 Silverlight 中找到的东西很好地暗示了未来的方向。他们遗漏的东西（比如 System.ComponentModel 中的很多东西）也将在原始框架中被弃用（当然除了服务器/数据库的东西）。

# cygwin - cygwin xterm 不响应键盘

> ID：338263
> 
> 赞同：0
> 
> 时间：2008-12-03T18:39:15.707
> 
> 标签：cygwin, xterm, rxvt

我的 cygwin xterm 没有响应键盘。

我能够运行 rxvt，但是当我启动其他 X 应用程序时，我遇到了同样的问题。

在 rxvt 命令提示符下，我得到以下信息：

```
$ xterm
xterm Xt error: Can't open display: :0 
```

我的 XWin.0.log 的内容是：

```
$ cat XWin.0.log 
Welcome to the XWin X Server
Vendor: The Cygwin/X Project
Release: 1.5.3.0 (10503000)

Contact: cygwin-xfree@cygwin.com

XWin was started with the following command line:

/usr/bin/XWin -multiwindow -clipboard -silent-dup-error 

ddxProcessArgument - Initializing default screens
winInitializeDefaultScreens - w 1440 h 900
winInitializeDefaultScreens - Returning

Fatal server error:
Server is already active for display 0
        If this server is no longer running, remove /tmp/.X0-lock
        and start again.

GetWindowProp - pWin or name was NULL
GetWindowProp - pWin or name was NULL
GetWindowProp - pWin or name was NULL
GetWindowProp - pWin or name was NULL
GetWindowProp - pWin or name was NULL
GetWindowProp - pWin or name was NULL
GetWindowProp - pWin or name was NULL
GetWindowProp - pWin or name was NULL 
```

删除 /tmp/.X0-lock 没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-03T18:59:18.397

看到[这个](http://x.cygwin.com/docs/faq/cygwin-x-faq.html#q-i-cant-type-anything)。

1.  首先通过右键单击系统托盘中的 X 图标并选择退出来停止服务器。

2.  运行位于 /usr/bin 中的 startxwin.bat 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-03T19:00:52.107

我脑海里的东西是“关闭Num Lock”。

我不确定为什么。

# php - Cookie 路径特殊字符

> ID：338267
> 
> 赞同：1
> 
> 时间：2008-12-03T18:40:30.493
> 
> 标签：php, http, cookies

我的应用程序需要为应用程序中的特定路径设置 cookie。例如（在 php 中）：

```
setcookie(*cookie_name*,*value*,*date*,"/subpath/subpath/unique_name");
setcookie(*cookie_name*,*value*,*date*,"/subpath/subpath/another unique name"); 
```

奇怪的是，第一个 setcookie 工作正常。第二个不会产生错误，当我在 Firefox 中查看我的 cookie 时，cookie 的值是正确的。但是，我无法在我的代码中访问它。我相信空格是造成问题的原因，但我还没有找到任何关于如何对 cookie 路径进行编码的文档或规范。

有没有人遇到过这个问题？有谁知道如何处理 cookie 路径中的特殊字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-03T20:56:41.420

我认为 cookie 中的空格没有问题。
也许你应该检查你如何读回你的价值......
我的阅读例程是：

```
function ReadCookie(name)
{
  name += '=';
  var parts = document.cookie.split(/;\s*/);
  for (var i = 0; i < parts.length; i++)
  {
    var part = parts[i];
    if (part.indexOf(name) == 0)
      return part.substring(name.length)
  }
  return null;
} 
```

显然，您唯一需要编码的是分号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-03T20:46:48.990

你在什么操作系统和网络服务器上运行？

您可以按照建议尝试 %20 或 + 编码空间。

另外，您尝试的路径是真实目录还是重写规则？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-03T20:29:39.057

无法访问网络服务器 atm。您还没有尝试过其中之一吗？

```
setcookie(*cookie_name*,*value*,*date*, "/subpath/subpath/another unique name/");
setcookie(*cookie_name*,*value*,*date*, urlencode("/subpath/subpath/another unique name"));
setcookie(*cookie_name*,*value*,*date*, rawurlencode("/subpath/subpath/another unique name")); 
```

我相信不同的浏览器和网络服务器可能会以不同的方式对待这些。我希望您不必在 url 中使用空格。

# javascript - 每分钟显示当前时间（使用 Prototype 的 Ajax.PeriodicalUpdater ？）

> ID：338269
> 
> 赞同：3
> 
> 时间：2008-12-03T18:41:27.107
> 
> 标签：javascript, prototypejs

我有一个显示页面打开时的当前时间的应用程序。我希望那个时间每 30 秒更新一次。我已经阅读了原型的 Ajax.PeriodicalUpdater ，这似乎是一个答案。这就是我使用 php 在页面加载时实现静态时间显示的方式：

```
 <tr>
      <td>
        <input class="standard" type="text" name="start_time" 
           value="<?php echo prev_end();?>">
             <!--prev_end is last end time from database-->
      </td>
        <td>
        <input class="standard" type="text" name="end_time" 
           value="<?php echo $now;?>">
            <!--$now = date("G:i");-->
      </td> 
```

这是我对原型的尝试：

```
<script type="javascript">
        new Ajax.PeriodicalUpdater("updater", "unow.php", {frequency : 30});    
        </script>
        ...
       <tr>
          <td>
            <input class="standard" type="text" name="start_time" 
               value="<?php echo prev_end();?>">
          </td>
            <td>
            <input id="updater" class="standard" type="text" name="end_time" 
               value="">
          </td> 
```

“unow.php”在哪里执行此操作

```
<?php
  $unow=date("G:i");
  echo $unow;
?> 
```

似乎我不需要回调将 unow.php 中的值放入输入“updater”，因为 PeriodicalUpdater 需要元素 id。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-03T19:02:51.040

除非您希望您的时间输出始终与服务器的时区匹配，否则您可以在客户端使用一些 Javascript 快速完成此操作，并完全跳过与服务器的联系。

```
<html>
<body onload="init();">
  <div id=time></div>
</body>
</html>
<script type=text/javascript>

function init()
{
    updateTime();
    window.setInterval(updateTime,30000);
}

function updateTime()
{
    var time = document.getElementById('time');
    time.innerText = new Date().toLocaleString();
}

</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-04T00:47:57.507

这可以在不访问服务器的情况下完成。Prototype 的 PeriodicalExecuter 类封装了 JavaScript 的 setInterval 函数，它允许您每 X 秒运行一次 JavaScript 函数。

**时间.html**

```
<html>
<head>
<title>Time</title>
<script type="text/javascript" src="time.js">
</head>
<body>
   <span id="timeDisplay"></span>
</body>
</html> 
```

**时间.js**

```
document.observe("dom:loaded", function() {
   new PeriodicalExecuter(updateTimeDisplay, 30);
});

updateTimeDisplay = function(pe) { // accepts the PeriodicalExecuter instance
   var now = new Date();
   $('timeDisplay').innerHTML = now.toString();
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-04T18:27:45.573

Prototype 的 Ajax.Updater 可能会更改元素的内容，而不是输入的值。

尝试更改

```
<input id="updater" class="standard" type="text" name="end_time" 
           value=""> 
```

到

```
 <span id="updater"></span> 
```

但正如其他人所建议的那样，每 30 秒访问一次服务器只是为了更新时间是矫枉过正的。如果您不想在服务器时区显示时间，只需在构建页面时使用服务器时间创建输入，并使用`setInterval`来自 javascript 的时间更新此时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-15T18:12:53.430

感谢您的输入。你们向我指出了javascript将时间输入输入框的本机能力。最后，[w3schools 的这个 24 小时时钟解决方案](http://www.w3schools.com/js/tryit.asp?filename=tryjs_timing_clock)对我有用。

```
<head>
<script type="text/javascript">
            function startTime()
            {
            var today=new Date();
            var h=today.getHours();
            var m=today.getMinutes();

            // add a zero in front of numbers<10
            m=checkTime(m);
            s=checkTime(s);
            document.getElementById('endtime').value=h+":"+m;
            t=setTimeout('startTime()',500);
            }

            function checkTime(i)
            {
            if (i<10)
              {
              i="0" + i;
              }
            return i;
            }
        </script>

    </head>
    <body onload="startTime()"> 
```

然后在体内：

```
<input id="endtime" class="standard" type="text" name="end_time" value=""> 
```

# c++ - 成员如何知道它是在哪个类实例中构造的？

> ID：338271
> 
> 赞同：0
> 
> 时间：2008-12-03T18:42:15.480
> 
> 标签：c++, constructor

```
 class C {
    public
      T x;
    }; 
```

x 的构造函数是否有一种优雅的方法可以**隐式**地知道它正在构造的 C 实例是什么？

* * *

我已经用一些肮脏的不优雅的机器实现了这种行为。我的 sqlite3 包装器需要这个。我不喜欢我见过的所有包装器，它们的 API IMO 丑陋且不方便。我想要这样的东西：

```
 class TestRecordset: public Recordset {
    public:
      // The order of fields declarations specifies column index of the field.
      // There is TestRecordset* pointer inside Field class, 
      // but it goes here indirectly  so I don't have to 
      // re-type all the fields in the constructor initializer list.
      Field<__int64> field1;
      Field<wstring> field2;
      Field<double> field3;

      // have TestRecordset* pointer too so only name of parameter is specified
      // in TestRecordset constructor
      Param<wstring> param;

      virtual string get_sql() {
        return "SELECT 1, '1', NULL FROM test_table WHERE param=:PARAM";
      }

      // try & unlock are there because of my dirty tricks.
      // I want to get rid of them.

      TestRecordset(wstring param_value)
      try : Recordset(open_database(L"test.db")), param("PARAM") {
        param = param_value;
       // I LOVE RAII but i cant use it here. 
       // Lock is set in Recordset constructor, 
       // not in TestRecordset constructor.
        unlock(this);
        fetch();
      } catch(...) {
        unlock(this);
        throw;
      }
    }; 
```

 ```I want to clarify the fact - it is a part of the *working* code. You *can* do this in C++. I just want to do it in a more nice way.

* * *

I've found a way to get rid of unlock and try block. I've remembered there is such a thing as thread local storage. Now I can write constructor as simple as that:`

```
 TestRecordset(wstring param_value): 
    Recordset(open_database(L"test.db")), param("PARAM") {
        param = param_value;
        fetch();
   } 
```

* * *

to dribeas: My objective is to avoid redundant and tedious typing. Without some tricks behind the scene I will have to type for each Field and Param:`

```
TestRecordset(wstring param_value): Recordset(open_database(L"test.db")), param(this, "PARAM"),
   field1(this, 0), field2(this, 1), field3(this, 2) { ... } 
```

它是多余的、丑陋的和不方便的。例如，如果我必须在 SELECT 中间添加新字段，我将不得不重写所有列号。关于您的帖子的一些注释：

1.  字段和参数由*它们*的默认构造函数初始化。
2.  构造函数中初始化程序的顺序无关紧要。字段始终按照其声明的顺序进行初始化。我已经使用这个事实来追踪字段的列索引
3.  首先构造基类。因此，当构造字段时，Recordset 中的内部字段列表已准备好由 Filed 默认构造函数使用。
4.  我不能在这里使用 RAII。*我需要在 Recorset 构造函数中获取锁，并在构造所有字段后*在 TestRecordset 构造函数中强制释放它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-03T18:46:52.493

不，对象不应该需要知道它们从哪里被使用才能工作。就 x 而言，它是 T 的一个实例。就是这样。根据它是 C 类的成员、D 类的成员、自动的、临时的等，它的行为并没有什么不同。

此外，即使 T 构造函数确实知道 C 的实例，该 C 实例也是不完整的，因为它当然还没有完成构造，因为它的成员还没有被构造。C++ 为您提供了很多机会，但在另一个类的构造函数中为您提供对不完整对象的引用并不是其中之一。

我唯一能想到的近似您的代码示例的方法是执行类似的操作

```
#define INIT_FIELDS field1(this), field2(this), field3(this) 
```

紧跟在字段列表之后，然后在初始化列表中使用 INIT_FIELDS 并 #undef 它。它仍然是重复的，但至少它都在一个地方。然而，这可能会让您的同事感到惊讶。

确保您不会忘记字段的另一种方法是从 Field 中删除零参数构造函数。同样，您仍然需要进行输入，但至少如果您忘记了某些内容，编译器会捕捉到它。我认为初始化列表的非 DRY 特性是 C++ 必须忍受的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-03T18:50:12.690

在逐个回答的基础上，您应该问的实际问题是：“我的解决方案设计有什么问题，它要求对象知道它们在哪里被实例化？”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-03T18:48:14.800

我不这么认为。

出于纯粹的好奇，这有什么关系？你有一个可以使用的上下文吗？

M。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-03T20:36:32.910

我对你的代码感兴趣。您评论说所有字段加上 param 属性都有指向 TestRecordSet 但它们不需要初始化的指针？还是问题的对象，如何避免在构造过程中必须传递 this 指针？

如果您想要避免在构造函数的初始化列表中添加所有字段，那么这是一个有缺陷的目标。您应该始终初始化初始化列表中的所有成员，并按照它们在类中声明的顺序执行此操作（这不是语言强制执行的，而是更多的全局学习经验）。

如果确实需要，您对 try 构造函数块的使用只是他仅推荐使用该功能（任何感兴趣的人阅读[GOTW#66 ）。](http://www.gotw.ca/gotw/066.htm)如果 RecordSet 成员已经被构造（并因此获得了锁）并且随后在构造函数中出现问题，那么[见下面的引用] RecordSet 将被销毁，如果它在内部使用 RAII 它将释放锁，所以我相信try/catch 可能并不真正需要。

C++03、15.2 异常处理/构造函数和析构函数

> 部分构造或部分销毁的对象将为其所有完全构造的子对象执行析构函数，即构造函数已完成执行且析构函数尚未开始执行的子对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-03T19:35:59.617

我一直在 C# 中尝试这样的事情——我使用反射来做这件事。

考虑为 C++ 获取反射或代码生成库来帮助您做您想做的事。

现在，我不能告诉你如何为 C++ 找到一个好的反射或代码生成库，但这是一个不同的问题！

# c - 为什么 printf() 在 sleep() 之前不打印任何内容？

> ID：338273
> 
> 赞同：22
> 
> 时间：2008-12-03T18:42:34.000
> 
> 标签：c, stdout, buffering

我只是在用 Kernighan 和 Ritchie 的书学习 C；我在第四章的基础知识（“功能和程序结构”）。前几天我对这个函数产生了好奇`sleep()`，所以试着像这样使用它：

```
#include <stdio.h>
#include <unistd.h>

int main(void)
{
  printf(" I like cows.");
  sleep(5);
  return 0;
} 
```

问题是程序的输出，它看起来像`sleep()`第一个然后是`printf()`，换句话说，它等待五秒钟然后打印字符串。所以我想，也许程序`sleep()`太快了，以至于它不能让`printf()`他的工作像我想要的那样完成，那就是打印字符串然后睡觉。

如何显示字符串然后让程序进入睡眠状态？编译器是 OpenBSD 4.3 中的 GCC 3.3.5 (propolice)。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2008-12-03T18:46:22.743

`printf()`写入`stdout`（默认输出流）通常是行缓冲的。缓冲区在`sleep`被调用时没有被刷新，所以没有显示任何内容，当程序退出时，所有流都会自动刷新，这就是它在退出之前打印的原因。打印换行符通常会导致流被刷新，或者您可以使用以下`fflush`功能：

```
int main(void)
{
  printf(" I like cows.\n");
  sleep(5);
  return 0;
} 
```

或者：

```
int main(void)
{
  printf(" I like cows.");
  fflush(stdout);
  sleep(5);
  return 0;
} 
```

如果您要打印到非行缓冲的流，如果`stdout`被重定向或者您正在写入文件，那么简单地打印换行符可能不起作用。在这种情况下，`fflush`如果您希望立即写入数据，则应该使用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-12-03T18:45:06.380

您的问题是 printf （以及使用 stdio 库写入标准输出（标准输出）的任何其他内容）被缓冲 - 如果它进入控制台，则缓冲行，如果进入文件，则缓冲大小。如果您在`fflush(stdout);`之后执行`printf`，它将执行您想要的操作。您可以尝试在字符串中添加换行符（'\n'），只要您不将标准输出重定向到文件，这将是正确的。

我不是 100% 确定，但我认为`stderr`没有缓冲，这可能会导致混淆，因为您可能会在`stderr`之前的输出之前看到您的输出`stdout`。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-12-03T18:47:16.297

缓冲意味着所有的输出都存储在一个地方（称为缓冲区），并在其中存在一定数量的数据后输出。这样做是出于效率原因。

一些（大多数？）实现在写入控制台时会在换行符后清除缓冲区，因此您也可以尝试

```
printf(" I like cows.\n"); 
```

而不是调用 fflush()

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-20T00:15:45.957

我实现了时间相遇如下；

```
for (int i = 1; i <= 60; i++) {
    printf("%02d", i);
    fflush(stdout);
    sleep(1);
    printf("\b\b");
} 
```

# c# - 如何获取班级名称

> ID：338274
> 
> 赞同：3
> 
> 时间：2008-12-03T18:42:36.900
> 
> 标签：c#, visual-studio-2008

好的，我有以下结构。基本上是一个插件架构

```
// assembly 1 - Base Class which contains the contract
public class BaseEntity {
  public string MyName() {
    // figure out the name of the deriving class
    // perhaps via reflection
  }
}

// assembly 2 - contains plugins based on the Base Class
public class BlueEntity : BaseEntity {}
public class YellowEntity : BaseEntity {}
public class GreenEntity : BaseEntity {}

// main console app
List<BaseEntity> plugins = Factory.GetMePluginList();

foreach (BaseEntity be in plugins) {
  Console.WriteLine(be.MyName);
} 
```

我想要声明

```
be.MyName 
```

告诉我对象是 BlueEntity、YellowEntity 还是 GreenEntity。重要的是 MyName 属性应该在基类中，因为我不想在每个插件中重新实现该属性。

这在 C# 中可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-03T18:49:08.790

我认为您可以通过 GetType 做到这一点：

```
public class BaseEntity {
    public string MyName() {
        return this.GetType().Name
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-03T18:51:14.060

```
public class BaseEntity {
  public string MyName() {
     return this.GetType().Name;
  }
} 
```

“this”将指向派生类，所以如果你这样做：

```
BaseEntity.MyName
"BaseEntity"

BlueEntitiy.MyName
"BlueEntity" 
```

编辑：Doh，高尔基打败了我。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-03T18:49:11.147

C# 实现了一种查看对象的方法，称为反射。这可以返回有关您正在使用的对象的信息。

GetType() 函数返回您调用它的类的名称。你可以像这样使用它：

```
return MyObject.GetType().Name; 
```

反射可以做很多事情。如果您想了解更多关于反射的信息，可以在以下网站上阅读：

*   [MSDN 反思文章](http://msdn.microsoft.com/en-us/library/ms173183(VS.80).aspx)
*   [奥莱分会](http://oreilly.com/catalog/progcsharp/chapter/ch18.html)
*   [代码源教程](http://www.codersource.net/csharp_tutorial_reflection.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-03T18:47:36.890

将您的 foreach 语句更改为以下内容

```
foreach (BaseEntity be in plugins) {
   Console.WriteLine(be.GetType().Name);
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-12-03T18:53:59.497

如果您没有覆盖该类的 ToString() 方法，那么您可以编写以下内容

```
string s = ToString().Split(',')[0];  // to get fully qualified class name... or,
s = s.Substring(s.LastIndexOf(".")+1); // to get just the actual class name itself 
```

使用您的代码：

```
// assembly 1 - Base Class which contains the contractpublic class BaseEntity 
  {  
      public virtual string MyName  // I changed to a property
      {    
          get { return MyFullyQualifiedName.Substring(
               MyFullyQualifiedName.LastIndexOf(".")+1); }
      }
       public virtual string MyFullyQualifiedName  // I changed to a property
      {    
          get { return ToString().Split(',')[0]; }
      }
 }
// assembly 2 - contains plugins based on the Base Class
 public class BlueEntity : BaseEntity {}
 public class YellowEntity : BaseEntity {}
 public class GreenEntity : BaseEntity {}
 // main console app
  List<BaseEntity> plugins = Factory.GetMePluginList();
  foreach (BaseEntity be in plugins) 
     {  Console.WriteLine(be.MyName);} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2008-12-03T18:46:55.223

试试这个模式

```
class BaseEntity {
  private readonly m_name as string;
  public Name { get { return m_name; } }
  protected BaseEntity(name as string) {
    m_name = name;
  }
}
class BlueEntity : BaseEntity {
  public BlueEntity() : base(typeof(BlueEntity).Name) {}
} 
```

# ruby-on-rails - 在 Rails 应用程序中实现 Web 服务客户端的最佳实践

> ID：338282
> 
> 赞同：2
> 
> 时间：2008-12-03T18:43:49.580
> 
> 标签：ruby-on-rails, ruby

在这种情况下，当我需要一个 Web 服务客户端，它会被一些动作控制器使用时，应该如何实现？由于它将有一些常量值（地址、参数名称）和会话密钥，每 30 分钟刷新一次，我猜存储在数据库中的模型不是最好的解决方案。最佳做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-03T19:01:46.503

将 Web 服务使用者构建为库并将其放置在 /lib 目录中。

我还推荐[HTTParty](http://railstips.org/2008/7/29/it-s-an-httparty-and-everyone-is-invited)非常简单地使用 Web 服务。您可以轻松地构建一个库来处理该任务，一个带有一些方法的简单类，然后将它扔到您的 /lib 目录中，然后就可以使用了。

祝你好运！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2008-12-08T14:00:42.520

Rails 1.x 曾经内置了“actionwebservices”，但它已从 Rails 2.x 中删除。我最后一次这样做是为了构建一个使用 XML-RPC 实现为类的 SSO 服务器。不幸的是，该代码未公开（在内部为我的雇主完成），但低于 1k LOC，包括。评论...纯红宝石。

现在，我可能会使用像[Sinatra](http://sinatra.rubyforge.org/)这样的轻量级框架或类似的框架。

# bash - 防止将重复项保存在 bash 历史记录中

> ID：338285
> 
> 赞同：50
> 
> 时间：2008-12-03T18:44:21.623
> 
> 标签：bash, command-line, cygwin, history

我试图防止`bash`将重复的命令保存到我的历史记录中。这是我所拥有的：

```
shopt -s histappend
export HISTIGNORE='&:ls:cd ~:cd ..:[bf]g:exit:h:history'
export HISTCONTROL=erasedups
export PROMPT_COMMAND='history -a' 
```

当我登录并`.bash_history`在内存中时，这可以正常工作。例如：

```
$ history
    1 vi .bashrc
    2 vi .alias
    3 cd /cygdrive
    4 cd ~jplemme
    5 vi .bashrc
    6 vi .alias

$ vi .bashrc

$ history
    1 vi .alias
    2 cd /cygdrive
    3 cd ~jplemme
    4 vi .alias
    5 vi .bashrc

$ vi .alias

$ history
    1 cd /cygdrive
    2 cd ~jplemme
    3 vi .bashrc
    4 vi .alias

$ exit 
```

但是当我重新登录时，我的历史文件如下所示：

```
$ history
    1 vi .bashrc
    2 vi .alias
    3 cd /cygdrive
    4 cd ~jplemme
    5 vi .bashrc
    6 vi .alias
    7 vi .bashrc
    8 vi .alias 
```

我究竟做错了什么？

编辑：从中删除`shopt`和`PROMPT_COMMAND`行`.bashrc`并不能解决问题。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2011-09-16T19:22:13.547

据我所知，不可能做你想做的事。我认为这是 bash 历史处理中的一个错误，可以改进。

```
export HISTCONTROL=ignoreboth:erasedups   # no duplicate entries
shopt -s histappend                       # append history file
export PROMPT_COMMAND="history -a"        # update histfile after every command 
```

这将使内存中的历史记录保持唯一，但是虽然它确实将多个会话的历史记录保存到同一个文件中，但它并没有保持文件本身的历史记录唯一。`history -a`会将新命令写入文件，除非它与之前的命令相同。它不会像`erasedups`设置在内存中那样执行完全重复数据删除。

要查看这种愚蠢的行为，请启动一个新的终端会话，检查历史记录，您会看到重复的条目，例如`ls`. 现在运行`ls`命令，所有重复的`ls`将从内存中的历史记录中删除，只留下最后一个。当您运行在历史文件中重复的命令时，内存中的历史会变短，但历史文件本身会继续增长。

我使用自己的脚本按需清理历史文件。

```
# remove duplicates while preserving input order
function dedup {
   awk '! x[$0]++' $@
}

# removes $HISTIGNORE commands from input
function remove_histignore {
   if [ -n "$HISTIGNORE" ]; then
      # replace : with |, then * with .*
      local IGNORE_PAT=`echo "$HISTIGNORE" | sed s/\:/\|/g | sed s/\*/\.\*/g`
      # negated grep removes matches
      grep -vx "$IGNORE_PAT" $@
   else
      cat $@
   fi
}

# clean up the history file by remove duplicates and commands matching
# $HISTIGNORE entries
function history_cleanup {
   local HISTFILE_SRC=~/.bash_history
   local HISTFILE_DST=/tmp/.$USER.bash_history.clean
   if [ -f $HISTFILE_SRC ]; then
      \cp $HISTFILE_SRC $HISTFILE_SRC.backup
      dedup $HISTFILE_SRC | remove_histignore >| $HISTFILE_DST
      \mv $HISTFILE_DST $HISTFILE_SRC
      chmod go-r $HISTFILE_SRC
      history -c
      history -r
   fi
} 
```

我很想听听更优雅的方法来做到这一点。

注意：如果您通过 HISTTIMEFORMAT 在历史记录中启用时间戳，该脚本将不起作用。

Bash 可以通过以下方式改善这种情况

1.  修复`history -a`仅在新数据与内存中的任何历史记录不匹配时才写入新数据，而不仅仅是最后一个。
2.  `erasedups`如果设置了设置，则在读取文件时去重历史记录。然后，新终端中的简单`history -w`程序将清理历史文件，而不是上面的愚蠢脚本。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-12-03T20:34:06.893

问题肯定是`histappend`。在我的系统上测试并确认。

我的相关环境是：

```
$ set | grep HIST
HISTFILE=/Users/hop/.bash_history
HISTFILESIZE=500
HISTIGNORE=' *:&:?:??'
HISTSIZE=500
$ export HISTCONTROL=erasedups
$ shopt | grep hist
cmdhist         on
histappend      off
histreedit      off
histverify      off
lithist         off 
```

现在想来，问题可能出在`history -a`. `history -w`应该写没有任何重复的当前历史记录，所以如果您不介意并发问题，请使用它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-12-03T19:17:04.710

```
export HISTCONTROL=ignoreboth 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2011-01-08T01:40:53.257

这是我用的..

```
[vanuganti@ ~]$ grep HIST .alias*
.alias:HISTCONTROL="erasedups"
.alias:HISTSIZE=20000
.alias:HISTIGNORE=ls:ll:"ls -altr":"ls -alt":la:l:pwd:exit:mc:su:df:clear:ps:h:history:"ls -al"
.alias:export HISTCONTROL HISTSIZE HISTIGNORE
[vanuganti@ ~]$ 
```

和工作

```
[vanuganti@ ~]$ pwd
/Users/XXX
[vanuganti@ ~]$ pwd
/Users/XXX
[vanuganti@ ~]$ history | grep pwd | wc -l
       1 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-01-08T18:23:09.280

在你的 .bash_profile 添加

```
alias hist="history -a && hist.py" 
```

然后将其作为 hist.py 放在您的路径上并使其可执行

```
#!/usr/bin/env python

from __future__ import print_function
import os, sys
home = os.getenv("HOME")
if not home :
    sys.exit(1)
lines = open(os.path.join(home, ".bash_history")).readlines()
history = []
for s in lines[:: -1] :
    s = s.rstrip()
    if s not in history :
        history.append(s)
print('\n'.join(history[:: -1])) 
```

现在当你想要短名单时，只需输入 hist

# sql-server - osql、isql 和 sqlcmd 有什么区别？

> ID：338293
> 
> 赞同：33
> 
> 时间：2008-12-03T18:45:47.690
> 
> 标签：sql-server, command-line

我有兴趣为 SQL Server 使用某种类似于 Oracle 的 SQL*Plus 的命令行实用程序。SQL Server 似乎有几个选项：osql、isql 和 sqlcmd。但是，我不太确定使用哪一个。

他们基本上都做同样的事情吗？是否有任何情况下使用其中一种优于其他情况？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2008-12-03T19:09:04.367

使用 sqlcmd——它是功能最全的产品。

*   **sqlcmd**：SQL Server 最新、最精美的命令行界面。
*   **isql**：与 SQL Server 进行命令行通信的较旧的 DB-Library（本机 SQL Server 协议）方式。
*   **osql**：与 SQL Server 进行命令行通信的较旧的、基于 ODBC 的方式。

**编辑：** 自从我几年前回答这个问题以来，时代已经发生了变化。如今，您还可以在 PowerShell 中使用[invoke-sqlcmd](http://technet.microsoft.com/en-us/library/cc281720.aspx) cmdlet。如果您习惯使用 PowerShell 或计划编写任何复杂的脚本，请改用它。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-12-03T19:09:52.773

我不确定你的问题的范围是什么，但我相信：

isql使用DB-Library与服务器通信，SQL2000后不再包含

osql 使用 ODBC 与服务器通信，SQL2005 后不再包含

sqlcmd 使用 OLE DB 与服务器通信，是目前推荐的命令行工具。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2011-08-26T09:53:54.507

如果您有 SQL SERVER 2005，最好使用 SQLCMD 而不是 OSQL 或 ISQL，否则使用 OSQL 而不是 ISQL。

微软之前已经宣布 ISQL 即将退出市场。果然，SQL Server 2005 RTM 中不包含 ISQL。OSQL 最终也将被淘汰，尽管它仍包含在 SQL Server 2005 二进制安装中。考虑到 SQL Server 的历史发布周期，也许 OSQL 会在 2010 年与我们告别。

SQLCMD 具有以下许多优点：

*   1) 性能方面
*   2) SQLCMD 支持参数化变量
*   3) SQLCMD 支持自定义编辑器
*   4) :XML [ONOFF]
*   5) :错误 STDERRSTDOUT
*   6) :Perftrace STDERRSTDOUT
*   7) 远程专用管理员连接 (DAC)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-11T09:33:16.740

有一个免费工具“SQLS *Plus”（在[http://www.memfix.com](http://www.memfix.com)*上），它与用于 SQL Server 的*Oracle SQL Plus 完全一样。*适用于所有 SQL Server 版本。

非常灵活的数据格式（设置行大小、页面大小等）、变量（var、&、&&）、假脱机、HTML 输出等 - 与 isql、osql 或 sqlcmd 相比，添加了许多功能

# .net - 将关键条目捕获到文本框中的数字和大写字母

> ID：338304
> 
> 赞同：1
> 
> 时间：2008-12-03T18:48:25.110
> 
> 标签：.net, wpf, vb.net

在 WPF 中，需要捕获在文本块中输入的键，以防止用户输入除数字、大写字母和导航键（退格键、箭头等）以外的任何内容。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-03T19:21:14.577

[首先，这里](http://www.codeplex.com/WPFDeveloperTools)有一个过滤的文本控件，可以进行简单的屏蔽

简单的方法是使用类似这样的方式处理 PreviewTextInput 事件。

```
Private Sub TextBox1_PreviewTextInput(ByVal sender As Object, ByVal e As System.Windows.Input.TextCompositionEventArgs) Handles TextBox1.PreviewTextInput
    Dim Character As Char = Convert.ToChar(e.Text)
    If Char.IsDigit(Character) Then
        e.Handled = False
    ElseIf Char.IsLetter(Character) And UCase(Character) = Character Then
        e.Handled = False
    Else
        e.Handled = True
    End If

End Sub 
```

# .net - 在 .NET 中使用带有 COM 对象的自定义字体

> ID：338314
> 
> 赞同：1
> 
> 时间：2008-12-03T18:50:21.160
> 
> 标签：.net, com, interop, fonts, esri

我正在尝试在 C# 中加载自定义字体，以便 COM 库（如 ESRI）和 GDI+ 可以使用它。

我想从磁盘加载字体，不想在系统上安装字体。

COM 字体的类型为 stdole.IFontDisp。

**编辑：**在 AddFontResourceEx 组合中使用 PrivateFontCollection 解决了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-03T19:43:59.757

您可以使用两个 GDI 函数

AddFontResource RemoveFontResource

详细[在这里](https://www.planet-source-code.com/vb/scripts/ShowCode.asp?txtCodeId=193&lngWId=1)

了解当您加载此字体时，其他应用程序将能够看到和使用该字体。如果您想使用 API，则没有其他方法可以解决此问题。添加字体后，您可以设置 IFontDisp（用于 COM）和 CFont（用于 GDI+）并使用它。

请注意，通过引用标准 OLE 类型可以找到 IFontDisp

# ubuntu - 什么是 makeinfo，我如何获得它？

> ID：338317
> 
> 赞同：271
> 
> 时间：2008-12-03T18:51:38.740
> 
> 标签：ubuntu, gcc, makefile, grep

我正在尝试构建 GNU grep，当我运行 make 时，我得到：

```
[snip]
/bin/bash: line 9: makeinfo: command not found 
```

什么是 makeinfo，我如何获得它？

（这是 Ubuntu，如果它有所作为）

* * *

## 回答 #1

> 赞同：428
> 
> 时间：2008-12-03T19:09:29.733

在（至少）Ubuntu中使用时`bash`，它会告诉您如果您输入命令并且在您的路径中找不到它，您需要安装什么包。我的终端说你需要安装 'texinfo' 包。

```
sudo apt-get install texinfo 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2014-01-01T14:13:21.670

对于 Centos ，我通过安装这些软件包来解决它。

```
yum install texi2html texinfo 
```

如果没有 makeinfo 条目，请不要担心。赶紧跑

```
make all 
```

您可以使用类似的方式为 ubuntu 执行此操作`sudo`。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-10-22T18:27:46.363

另一种选择是使用 apt-file (ie `apt-file search makeinfo`)。默认情况下，它可能会或可能不会安装在您的发行版中，但它是确定文件属于哪个包的好工具。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-03-20T03:37:57.610

需要安装texinfo。configure 仍然会缓存它的结果，所以它仍然会认为 makeinfo 丢失了。吹走您的源并从 tarball 中再次解压它。运行配置然后制作。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-11-11T10:47:29.923

如果您从头开始构建包：

*   从这里下载一个版本：[http ://www.gnu.org/software/texinfo/](http://www.gnu.org/software/texinfo/)
    *   在撰写本文时，版本 5.2 是最新的。
*   在此处了解如何构建：[http ://www.linuxfromscratch.org/lfs/view/stable/chapter05/texinfo.html](http://www.linuxfromscratch.org/lfs/view/stable/chapter05/texinfo.html)
    *   LFS 项目不断更新，但 texinfo 构建/安装说明很少更改。

具体来说，如果您`bash`从源代码构建，安装文档，包括手册页，将失败（静默）没有`makeinfo`可用。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-09-04T21:25:06.740

关于“什么是makeinfo”的几句话-其他答案很好地涵盖了“我如何得到它”。

[Texinfo 手册的“创建信息文件”](https://www.gnu.org/software/texinfo/manual/texinfo/html_node/Creating-an-Info-File.html)部分指出

> `makeinfo`是一个将 Texinfo 文件转换为 Info 文件、HTML 文件或纯文本的程序。

[Texinfo 主页](https://www.gnu.org/software/texinfo/)解释说，Texinfo 本身“是 GNU 项目的官方文档格式”，并且它“使用单个源文件生成多种格式的输出，包括在线和打印格式（dvi、html、info、pdf、 xml 等）”。

总结一下：Texinfo 是一种文档源文件格式，`makeinfo`是将 Texinfo 格式的源文件转换为所需输出的程序。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-07-07T19:24:02.750

在 SuSE linux 上，您可以使用以下命令安装 'texinfo'：

```
sudo zypper install texinfo 
```

在我的系统上，它显示正在下载大约 1000 MiB，因此请确保您有足够的可用空间。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-08-29T14:39:16.743

如果它没有出现在您的包管理器（即`apt-cache search texinfo`）中，甚至`apt-file search bin/makeinfo`没有帮助，您可能必须为您的包管理器启用非免费/受限包。

对于 ubuntu，`sudo $EDITOR /etc/apt/sources.list`并添加`restricted`.

```
deb http://archive.ubuntu.com/ubuntu bionic main restricted universe multiverse
deb http://archive.ubuntu.com/ubuntu bionic-security main
deb http://archive.ubuntu.com/ubuntu bionic-updates main 
```

对于 debian，`sudo $EDITOR /etc/apt/sources.list`并添加`non-free`. 如果你不想用非免费的东西弄乱包数据库，你甚至可以[在包级别上有偏好。](https://wiki.debian.org/AptPreferences)

之后，`sudo apt-get udpate`您应该找到所需的包。

# spring - 关于 JMX 的 @ManagedResource 注释的 Spring 问题

> ID：338331
> 
> 赞同：1
> 
> 时间：2008-12-03T18:55:46.327
> 
> 标签：spring, jmx, annotations

我想找出 org.springframework.ManagedResource 注释的属性在这个 JavaDoc 中看到的。我想了解每个参数，以便将其设置为正确的值。如果有人知道在哪里可以找到更多信息，我将不胜感激。

[http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/jmx/export/annotation/ManagedResource.html](http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/jmx/export/annotation/ManagedResource.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-01T11:10:27.840

这些在 JMX 规范中进行了描述，在其中提到了 MBean 的预定义属性、属性、操作和描述符的部分

检查[JMX 1.4 规范中文档的第 4.5 节](http://java.sun.com/javase/6/docs/technotes/guides/jmx/JMX_1_4_specification.pdf)

# php - 推荐一个好的 PHP wiki 引擎

> ID：338340
> 
> 赞同：8
> 
> 时间：2008-12-03T18:57:12.533
> 
> 标签：php, wiki, wiki-engine

我正在寻找一个易于嵌入现有 PHP 应用程序的小型 wiki 引擎。或者可能是一组库来处理所有典型的 wiki 功能。

目前我正在使用[ErfurtWiki](http://erfurtwiki.sourceforge.net/)，但它开始显示它的年龄。它自 2005 年以来一直没有更新，而且 sourceforge 上的一些页面似乎已被[黑客入侵](http://erfurtwiki.sourceforge.net/MailingList)。

我会将它包含在 GPLv2 应用程序中，因此与 GPL 兼容的许可证很重要。

编辑：

要更新，主要是我只是在寻找文本格式/解析器功能。我想自己处理存储、安全、修订历史等。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-03T19:19:57.277

我强烈推荐[MediaWiki](http://www.mediawiki.org/wiki/MediaWiki)，它是运行维基百科的 wiki 引擎。

编辑：根据您的评论，MediaWiki 是高度可嵌入的。多年来，我已将其集成到许多项目中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-03T19:29:39.490

我过去使用过[DokuWiki](http://www.dokuwiki.org/dokuwiki)，并且对它相当满意。它非常小，代码不是最干净的，但是放入您自己的身份验证方案（例如）以与现有用户系统集成并不难。

它是 GPL2，符合您的要求。它使用文件系统作为存储，因此可能无法很好地扩展，但对于具有不错功能集的基本 wiki 内容，它可能是您正在寻找的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-03T19:20:52.940

[Pear::Text_Wiki](http://pear.php.net/package/Text_Wiki)是另一种选择，尽管它只处理文本格式的情况。它自 2007 年 6 月以来一直没有更新，但包含几种 Wiki 格式（所有这些格式都有其他最新的发布日期）。

Text_Wiki 支持的格式有：

*   BBCode：最新发布：2006-12-23
*   CoWiki：最新发布：2007-01-02
*   克里奥尔语：最新发布：2007-08-01
*   独库：最新发布：2005-10-14
*   MediaWiki：最新发布：2006-04-10
*   Tiki：最新发布：2005-10-14

它具有 LGPL 许可证，因此包含在 GPL 项目中应该没有许可问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-03T19:50:51.910

我喜欢 DokuWiki，但 pmWiki 可能更适合你。这是所有 PHP wiki 的列表：http: [//www.wikimatrix.org/search.php? sid=183](http://www.wikimatrix.org/search.php?sid=183)

# c - 如何在 C 中集成测试网络应用程序

> ID：338347
> 
> 赞同：4
> 
> 时间：2008-12-03T18:58:22.860
> 
> 标签：c, unit-testing, integration-testing

当涉及到网络代码时，我从来没有以任何优雅或自动化的方式从单元测试转移到集成测试。

**所以我的问题是**：给定一个简单的基于单线程客户端/服务器的网络应用程序，您将如何将客户端和服务器集成到您当前最喜欢的测试套件中（我目前使用[check](http://check.sourceforge.net/)）。

我当然愿意改变单元测试套件来实现我的目标。

**编辑**：虽然我很欣赏答案，但我更多的是寻找一些将集成测试集成到我的单元测试框架中的神奇方法（如果可能的话）。就像如果可以应用*fork* () 或其他东西而不会产生太多副作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-03T21:54:04.220

另一种方法是使用虚拟服务器和虚拟客户端来模拟两端，它们只发送您想要测试的消息并验证响应是否符合预期。这些模拟服务器真的非常非常愚蠢：它们只需要读/写套接字并转储预设数据。如果易于解析，您可以通过模板化来自请求中数据的响应来稍微增加它们。

这里的胜利是你确切地知道模拟项目将要做什么（包括假超时，发送垃圾，无论你想要什么）。

使用 Perl 或 Python 套接字库来构建模拟服务器和客户端可能非常容易；如果您使用 Perl，您应该能够使用 CPAN 中非常强大的 Test:: 类来帮助完成实际的“完成这项工作”和报告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-03T22:10:43.017

`netcat`是测试网络服务器和客户端的好工具。

`man netcat`说那`netcat`是 TCP/IP 瑞士军刀。拥有使用`netcat`Victorinox 瑞士军刀的经验，我可以向您保证，`netcat`它比 Victorinox 好得多 - 我宁愿将它与 Leatherman 进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-03T20:08:46.727

我们构建我们的应用程序，以便核心代码在一个库中，而可执行文件是从 main.c（在我们的例子中实际上是 main.cxx）生成的，它只是一个启动服务器或客户端的非常薄的包装器。这让我们可以设置测试套件，这些套件可以在 proc 中实例化一个完整的服务器和客户端，并在它们使用正常的网络协议相互通信的情况下进行测试。它工作得很好。

如果您不能以这种方式构建事物，您可以使用 fork/CreateProcess 启动您通常的服务器可执行文件，然后让测试中的客户端代码与外部服务器通信。

# java - 架构 - 多个 Web 应用程序在相同的数据上运行

> ID：338362
> 
> 赞同：7
> 
> 时间：2008-12-03T19:01:49.107
> 
> 标签：java, architecture

我要求为以下 Java Web 应用程序提供合适的架构：

目标是构建多个对相同数据进行操作的 Web 应用程序。假设有一个银行系统，其中账户数据可以被不同的 Web 应用程序访问；客户（网上银行）、服务人员（主要是阅读）和账户管理部门（管理工具）都可以访问它。这些应用程序在不同机器上作为单独的 Web 应用程序运行，但它们使用相同的数据和一组常见的数据操作和搜索查询。

一种可能的方法是构建一个满足客户共同需求的核心应用程序，即数据存储、操作和搜索设施。然后客户端可以调用这个核心应用程序来满足他们的请求。要求是应用程序构建在 Wicket/Spring/Hibernate 堆栈之上作为 WAR。

为了得到一张图片，以下是我们想到的一些可能的方法：

A 整体方法。构建一个满足所有需求的大型 Web 应用程序（这不是一个真正的选择）

B API 方法。为数据访问/操作构建核心数据库访问 API (JAR)。每个 Web 应用程序都构建为一个单独的 WAR，它使用 API 访问数据库。没有单独的核心应用程序。

C RMI 方法。核心应用程序作为独立应用程序（可能是 WAR）运行，并通过 RMI（或 HttpInvoker）提供服务。

D WS 方法。与 C 类似，但将 RMI 替换为 Web 服务

E OSGi 方法。将所有组件构建为 OSGi 模块并在 OSGi 容器中运行。可能使用 SpringSource dm Server 或 ModuleFusion。由于某些原因，这种方法对我们来说不是一种选择......

希望我能把问题弄清楚。我们只是选择选项 B，但我对它不是很有信心。你有什么意见？还有其他解决方案吗？每种解决方案的缺点是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-03T19:50:15.313

我认为你必须朝相反的方向走——从下往上。当然，你必须来回验证一切都在播放，但这里是大方向：

想想你的数据——数据库方案，交易的重要性（例如在银行系统中，一切都与交易有关）等。

然后定义通用访问方法 - 从存储过程集到分布式事务引擎......

下一步是业务逻辑/演示 - 什么是可以概括的，什么是定制的主题。

最后阶段是界面、可视化和报告

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-03T19:39:27.363

B、C 和 D 都是完成同一件事的不同方式。

我的第一个想法是简单地将所有消费者代码连接到一个公共数据库。这当然是可行的，并且会消除您不想放在中间的代码。当然，缺点是如果架构发生变化，所有消费者都需要更新。

您可能要考虑的另一个解决方案是为每个消费者提供自己的数据库，使用某种复制来使它们保持同步。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-12T13:47:17.573

正如您在问题中所述，由于各种原因，A 和 E 似乎不在图片中。选项 A 将是一个巨大的应用程序，这将使将来的维护变得困难。

B、C 和 D 在架构上基本相同，因为它们涉及从各种 Web 应用程序远程访问公共库，唯一的区别是传输机制。如果可能的话，我建议在 EJB 3 或 Spring 中实现这一点，而不是使用您自己的 RMI 库，因为它们中的任何一个都为 RMI / Webservices 提供了一个很好的框架。

所以我认为这个问题基本上归结为以下两个选项：

1) 将业务和 DAO 层类作为一个通用 jar 包含在所有 Web 应用程序的部署中。

**好处：**

*   部署更容易。
*   由于无法远程访问其他服务器，因此应用程序最初会表现得更好。

**缺点：**

*   您不能专门向中间层（服务和 DAO 层）添加更多硬件，因为它包含在每个 Web 应用程序中。
*   由于没有远程接口，组织中的其他业务团队将无法访问您的业务服务。

2）将业务服务和DAO层类部署在单独的应用服务器中，远程暴露业务方法。

**好处：**

*   您可以根据调用它的各种 Web 应用程序的负载按需扩展业务服务和 DAO 层。
*   如果需要，组织中的其他应用程序可以使用您的接口。
*   更具可扩展性
*   您将获得 Java EE 的所有优势。

**缺点：**

*   更复杂的部署。
*   另一台服务器进行维护和监控。
*   可能会更慢，因为将通过网络进行呼叫，尽管这应该不是太大的问题。

在这两种情况下，如果接口发生更改，则客户端代码将需要更改，因此这不是决定的因素。事务应该在业务服务方法级别处理，所以这也不应该是一个因素。

我认为这也取决于应用程序的大小以及解决方案需要多大的可扩展性才能保证上述选项 2 的额外复杂性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-03T20:00:16.790

我认为您需要有一个单独的应用程序，所有客户端应用程序都将其用作其数据层。这样做的原因是您要确保他们都以相同的方式访问数据库。还有一些你可以进入数据库事务可能无法阻止的竞争条件。另一个原因是使用数据库作为 RPC 的一种形式是一种已知的反模式。如果您的所有应用程序都直接访问数据库，那么您几乎不可避免地会得到一些各种应用程序定期轮询的“事件”表……不要那样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-10T12:42:48.773

除了提供的响应之外，如果您正在考虑让多个应用程序同时使用数据库，请考虑将分布式缓存作为您解决方案的一部分。分布式缓存的美妙之处在于它可以被多个应用程序同时访问，除了是分布式的。我不确定这是否适用于所有 Java 变体，例如 Ehcache 等，因为我不是来自 Java 背景。

我们目前正在做的是将数据抽象到比以前更深的层次。我们现在有一个可以直接访问的 DAL，但是我们在 DAL 前面放置了一个“模型工厂”。模型工厂的目的是代理缓存和数据层，充当传递。因此，调用者总是调用模型工厂而不是直接调用 DAL 或缓存代码。这个抽象层基本上会在缓存未命中时从 DAL 中检索数据，而不会增加 API 的复杂性。

# windows - Windows从休眠状态恢复时如何运行任意代码？

> ID：338365
> 
> 赞同：2
> 
> 时间：2008-12-03T19:03:06.967
> 
> 标签：windows, winapi

当我的计算机从休眠状态恢复时（甚至在我登录之前），我需要运行一些代码。我使用的笔记本电脑有一个奇怪的问题。如果我在从休眠状态恢复时连接了外接显示器，则笔记本电脑会选择外接显示器作为主要视频设备，并且笔记本电脑屏幕保持空白。当有时两个显示器都无限期地保持空白时，这变得更加令人沮丧。

我正在考虑编写一些代码，以在计算机从休眠状态恢复时将活动显示切换回笔记本电脑屏幕。但是我需要从哪个 Windows 事件开始？

用于切换显示的内置热键也停止工作。到目前为止，我已经重新安装了几次操作系统，之后几天一切顺利，然后又回到了原点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-03T19:13:57.290

CodeProject 上的这篇[文章](http://www.codeproject.com/KB/system/OSEvents.aspx)讨论了与节能事件相关的各种 Windows 消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-03T19:12:58.353

我认为大多数笔记本电脑都有这个问题。这不是他们似乎能够在驱动程序/ACPI BIOS 中解决的问题。

我知道 Linux 允许您修改 ACPI 表，但我不记得这在 Windows 上是否可行。

Google 应该提供工具链接，您可以使用这些工具在 Windows 中检查笔记本电脑的 ACPI 表（MS 工具 IIRC）。

# c# - C# VS.NET 2008 更改每个配置的设置

> ID：338366
> 
> 赞同：3
> 
> 时间：2008-12-03T19:03:23.583
> 
> 标签：c#, .net, visual-studio-2008, appsettings

有没有办法让每个构建配置有不同的应用程序设置？

我希望能够批量构建一些具有不同设置的配置，而不必更改设置并构建、冲洗重复。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-05T10:20:35.243

我不太了解 appsettings 架构（我从未真正使用过它），但您可以使用一点 MSBuild 魔法为常量定义不同的值。

创建两个 .cs 文件，Constants1.cs 和 Constants2.cs（或以您的配置命名）。

在每个文件中，定义一个名为 Constants 的类（或其他）——但就像每个文件都是唯一的定义一样（即使用相同的类名）。通常，这应该只定义`public static readonly`字段——不要**使用**，`const`因为这会使您在部分构建时遇到麻烦。

现在卸载您的项目文件并编辑它。找到如下所示的条目：

```
    <编译包含="Constants1.cs" />
    <Compile Include="Constants2.cs" />

```

并像这样改变它们：

```
    <Compile Include="Constants1.cs" Condition="'$(Configuration)'=='Debug'" />
    <Compile Include="Constants2.cs" Condition="'$(Configuration)'=='Release'" />

```

最后保存并重新加载您的项目。现在，一次只会实际构建一个文件，具体取决于您的构建配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-03T19:15:13.667

您可以向项目添加预构建或构建后任务，您可以从那里访问 ConfigurationName。做类似“复制Web.config.debug Web.config”之类的事情会相当容易

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-03T22:50:09.583

除此之外，MS 还承诺在 VS 2010 中添加此功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-03T23:00:52.497

您在“应用程序设置”下是什么意思？调试或发布等每个配置的项目属性？或者他们每个人的 defirent app.conf 文件？

如果首先，您可以创建许多具有合适设置的配置，然后使用 Batch Build 依次构建它们。 [http://msdn.microsoft.com/en-us/library/169az28z.aspx](http://msdn.microsoft.com/en-us/library/169az28z.aspx)

或者如谷歌忍者所说，使用预构建任务：del Web.config app.config copy Web.config.Debug Web.config（在它之前创建多个配置文件）

# ruby-on-rails - 视图中日期范围的 Rails 配方

> ID：338379
> 
> 赞同：0
> 
> 时间：2008-12-03T19:07:35.930
> 
> 标签：ruby-on-rails

我需要从 UI 中获取日期范围，检索该范围内的记录并绘制图表。这是我的 Rails 视图中的相关部分。

```
<span>
    <%= check_box_tag :applyRange, @params[:applyRange]%>
    From
    <%= select_date Time.now, :prefix=>"fromDate"  %>
    To
    <%= select_date Time.now, :prefix=>"toDate" %>
</span> 
```

回到控制器/动作端，这是我必须做的以重建日期值（hack hack puts hack puts hack ...）

```
fromDate = Date.civil params[:fromDate]["year"].to_i, params[:fromDate]["month"].to_i, params[:fromDate]["day"].to_i 
```

**这只是感觉不对**。我可能也会让这些字段也有空格。在这种情况下，to_i 会绑定到 barf。这看起来像是以前必须做过无数次的事情。所以寻找一个好的食谱。我花了最后一个小时的大部分时间试图找出这个古怪的 rails helper。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-05T02:33:20.210

您可以创建一个将日期参数之一作为参数的方法：

```
def date_from_param(params)
  Date.parse("#{params[:year]}#{params[:month]}#{params[:day]}")
end 
```

然后执行以下操作：

```
from = date_from_param(params[:from_date])
to = date_from_param(params[:to_date]) 
```

然后，您可以将这些日期传递到您的查询中，以在该范围内选择您想要的记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-05T06:20:53.650

好吧，是的，但它是同一件事..提取到一种方法中。我的问题是它感觉不像 Ruby 方式。我希望有一种更简单的方法来提取由 select_date 标记表示的日期，似乎没有。

`params[:fromDate][:date]`返回一个 Date 对象会更好..因为我使用的目的

```
<%= select_date Time.now, :prefix=>"fromDate"  %> 
```

就是*选择一个日期*。呃，好吧..

# wcf - 如何告诉 WCF 跳过证书验证？

> ID：338385
> 
> 赞同：24
> 
> 时间：2008-12-03T19:09:31.900
> 
> 标签：wcf, silverlight, http, https, certificate

尝试在我的[Silverlight应用程序中对](http://en.wikipedia.org/wiki/Microsoft_Silverlight)[HTTPS](http://en.wikipedia.org/wiki/HTTP_Secure)端点进行[Web 服务](http://en.wikipedia.org/wiki/Web_service)调用会导致此错误：“找不到与具有绑定 WSHttpBinding 的端点的方案 https 匹配的基地址。注册的基地址方案是 [http]”

与此处发布的相同问题：

[http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/4c19271a-f5e6-4659-9e06-b556dbdcaf82/](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/4c19271a-f5e6-4659-9e06-b556dbdcaf82/)

因此，其中一个建议是：“另一个问题可能是证书名称和机器名称不一致，这导致[WCF](http://en.wikipedia.org/wiki/Windows_Communication_Foundation)出现问题。如果是这种情况，您可以告诉 WCF 跳过验证的证书。”

好吧，我**确实**收到了证书错误，因为这只是一个演示服务器。

这是我设置客户端的方式：

```
BasicHttpBinding binding = new BasicHttpBinding();
binding.Security.Mode = BasicHttpSecurityMode.Transport;
_ws = new AnnotationService.AnnotationClient(binding, new EndpointAddress(myAddress)); 
```

如何告诉 WCF 跳过验证？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-01-26T14:14:49.303

您可以通过允许承载 Silverlight 应用程序的 Web 服务器和远程 WCF 服务之间的**跨域通信在 Silverlight 中实现此目的。**

在这种情况下，您需要在托管 WCF 服务的域的根目录中放置一个[**clientaccesspolicy.xml文件：**](http://www.adobe.com/devnet/articles/crossdomain_policy_file_spec.html)

```
<?xml version="1.0" encoding="utf-8"?>
<access-policy>
  <cross-domain-access>
    <policy>
      <allow-from http-request-headers="SOAPAction">
        <domain uri="http://*"/>
      </allow-from>
      <grant-to>
        <resource path="/" include-subpaths="true"/>
      </grant-to>
    </policy>
  </cross-domain-access>
</access-policy> 
```

以下是[MSDN 对这种方法的陈述](http://msdn.microsoft.com/en-us/library/cc197955(v=vs.95).aspxhttp://msdn.microsoft.com/en-us/library/cc197955(v=vs.95).aspx)：

> 要允许从托管在 HTTP 应用程序上的任何 Silverlight 控件访问 HTTPS 服务，您需要将*<domain uri=”http://* ” />* 元素放在*<allow-from>*元素中。

我自己没有尝试过，但值得一试。另请务必查看以下资源以获取更多详细信息：

*   [使服务跨域边界可用](http://msdn.microsoft.com/en-us/library/cc197955(v=vs.95).aspxhttp://msdn.microsoft.com/en-us/library/cc197955(v=vs.95).aspx)
*   [在 Silverlight 客户端中配置 Web 服务使用](http://msdn.microsoft.com/en-us/library/cc197941(v=vs.95).aspx)

* * *

## 在 .NET 中禁用 X.509 证书验证

对于 .NET 应用程序，此示例 WCF 配置将禁用验证证书是否受信任以及它在客户端上是否仍然有效：

```
<system.serviceModel>
    <behaviors>
      <endpointBehaviors>
        <behavior name="DisableServiceCertificateValidation">
            <clientCredentials>
                <serviceCertificate>
                    <authentication certificateValidationMode="None"
                                    revocationMode="NoCheck" />
                </serviceCertificate>
            </clientCredentials>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <client>
      <endpoint address="http://localhost/MyService"
        behaviorConfiguration="DisableServiceCertificateValidation"
        binding="wsHttpBinding"
        contract="MyNamespace.IMyService"
        name="MyServiceWsHttp" />
    </client>
</system.serviceModel> 
```

**另一种解决方案**是提供自定义逻辑来验证服务提供的 X.509 证书。在这种情况下，您必须根据以下内容修改配置文件：

```
<system.serviceModel>
    <behaviors>
      <endpointBehaviors>
        <behavior name="DisableServiceCertificateValidation">
            <clientCredentials>
                <serviceCertificate>
                    <authentication certificateValidationMode="Custom"
                                    customCertificateValidatorType="MyCertificateValidator, Client"
                                    revocationMode="NoCheck" />
                </serviceCertificate>
            </clientCredentials>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <client>
      <endpoint address="http://localhost/MyService"
        behaviorConfiguration="DisableServiceCertificateValidation"
        binding="wsHttpBinding"
        contract="MyNamespace.IMyService"
        name="MyServiceWsHttp" />
    </client>
</system.serviceModel> 
```

然后创建一个派生自[X509CertificateValidator](http://msdn.microsoft.com/en-us/library/system.identitymodel.selectors.x509certificatevalidator.aspx)的类来实现您的自定义验证逻辑。

```
public class MyCertificateValidator : X509CertificateValidator
{
    public override void Validate(X509Certificate2 certificate)
    {
        // Add custom validation logic
        // Throw an exception to fail validation
    }
} 
```

与往常一样，您可以在 MSDN 上找到[更详细的示例。](http://msdn.microsoft.com/en-us/library/aa354512.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-03T20:26:56.940

这看起来不像是证书验证错误。它看起来像一个 web 服务配置错误。您可以在服务器上发布端点的配置吗？

WCF 服务默认不支持 SSL，您需要通过创建绑定配置并使用 bindingConfiguration 属性将端点指向它来启用传输安全性。

下面是一个支持 SSL 的示例绑定配置：

```
<bindings>
  <basicHttpBinding>
    <binding name="SecureTransport">
      <security mode="Transport">
        <transport clientCredentialType="None"/>
      </security>
    </binding>
  </basicHttpBinding>
</bindings> 
```

您的端点配置如下所示：

```
<endpoint address=""
   binding="basicHttpBinding"
   bindingConfiguration="SecureTransport"
   contract="MyServices.IWebService" /> 
```

# c# - : C# 构造函数中的 this(foo) 语法？

> ID：338398
> 
> 赞同：17
> 
> 时间：2008-12-03T19:16:02.963
> 
> 标签：c#, .net, constructor, constructor-chaining

时不时地，我会遇到以前见过但从未使用过的语法。这是其中之一。

有人可以在 C# 构造方法之后解释 ":this" 或 ":base" 的目的吗？

例如：

```
public MyClass(SomeArg arg) : this(new SomethingElse(), arg)
{
} 
```

我的直觉是它用于将默认参数映射到另一个构造函数方法。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-12-03T19:19:33.083

你基本上是对的。 `this()`在当前实例上调用构造函数，在当前实例上`base()`调用超类型的构造函数。它们通常用于处理构造函数重载，因此您可以添加其他选项而无需将其分解为单独的方法。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2008-12-03T19:21:36.743

你的直觉是对的。该语法用于调用同一类中的重载构造函数：

```
public class Test
{
    public Test() : this("Called from default constructor") { }
    public Test(String msg)
    {
        Console.WriteLine(msg);
    }
} 
```

以下代码：

```
public static void Main(String[] args)
{
    Test t1 = new Test();
    Test t2 = new Test("Called from Main function");
} 
```

输出以下内容

```
从默认构造函数调用
从主函数调用
```

同样，`: base(someParams)`用于调用基本构造函数。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-03T19:20:54.203

你是对的。

**: base(...)**调用基类的构造函数。

**: this(...)**调用定义类的另一个构造函数。大多数时候它只是作为一个门面工作。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-03T19:21:13.080

.NET 类中的每个构造函数都确保它所继承的类中的构造函数也被调用。

因此，如果您有以下课程：

```
public class Base { }
public class Something : Base { }
public class Else : Something { } 
```

那么 Else 中的构造函数会调用 Something 中的构造函数，它也会调用 Base 中的构造函数。

在基类中调用的构造函数（即，您所继承的构造函数）始终是无参数构造函数。

如果你没有，或者想要覆盖它，你可以通过指定基数（这里的一些参数）来覆盖它。这将在基类中选择正确的构造函数。

您还可以要求构造函数首先调用同一类中同一级别的另一个构造函数。这可用于避免在多个构造函数中重复构造函数代码。但最终，被调用的构造函数将调用基类中的构造函数。

我希望这是可以理解的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-03T19:22:15.480

确切地。将其称为构造函数链接，它用于解决 C# 无法执行默认参数的事实。

这在 IoC 中被大量使用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-12-03T19:25:19.700

如果我没记错的话是这样的：

```
public MyClass(SomeArg arg) : this(new SomethingElse(), arg) 
```

将会通知

```
public MyClass(SomethingElse arg, SomeArg arg1) : base or this or nothing 
```

这会一直持续到你有一个基地或什么都没有。

如果你有`base(....)`那个构造函数，它将调用带有给定参数（如果有的话）的基本构造函数，而它又可以委托给它自己的构造函数（同一个游戏）。

如果你什么都没有，那么会自动调用基类的无参数构造函数。

使用后`this(....)`，将使用与参数匹配的构造函数并执行其主体 - 除了已使用的构造函数的主体之外`this(....)`。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-12-03T19:25:51.260

是的你是对的。此语法用于让您的子类构造函数显式调用适当的自定义基类构造函数，而不是默认的。解释了您问题中的 this 关键字：

> this 关键字的另一种用途是强制一个构造函数调用另一个构造函数，以避免冗余的成员初始化逻辑。

在 Pro C# 2005 和 .NET 2.0 平台中，第 3 版，作者 Andrew Troelsen

# c++ - 在 C++ 中使用带有 sprintf() 的格式字符串的警告

> ID：338400
> 
> 赞同：2
> 
> 时间：2008-12-03T19:18:30.510
> 
> 标签：c++, types, format, printf

编译这一行

```
 long int sz;
    char tmpret[128];

    //take substring of c, translate in c string, convert to int, 
    //and multiply with 1024
    sz=atoi(c.substr(0,pos).c_str())*1024;

    snprintf(tmpret,128,"%l",sz); 
```

我在 snprintf 行上阅读了两个警告：

```
 warning: conversion lacks type at end of format
 warning: too many arguments for format 
```

为什么？指定类型（long int sz，和 snprintf 中的 %l），并且 snprintf 中的参数只有一个。有谁能够帮助我？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-03T19:23:07.507

您的格式缺少类型，因为 l 是“sizeof”修饰符。应该是 %ld

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-03T19:32:21.463

`boost::lexical_cast<string>(sz)`无论如何，要好得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-03T19:31:38.267

请参阅此[printf 格式说明符列表](http://www.cplusplus.com/reference/clibrary/cstdio/printf.html)

%l 的评论是：

> 该参数被解释为整数说明符（i、d、o、u、x 和 X）的 long int 或 unsigned long int，以及说明符 c 和 s 的宽字符或宽字符串。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-01-27T07:04:22.777

int sprintf ( char * str, const char * 格式, ... );

它不需要“str”的长度作为第二个参数。字符串指针/数组名称的名称就足够了。

# c - 运行用 C 编写的程序时，Cygwin1.dll '未找到'。如何让 Windows 找到它？

> ID：338406
> 
> 赞同：9
> 
> 时间：2008-12-03T19:20:04.237
> 
> 标签：c, eclipse

所以我正在尝试运行我的第一个用 C 编写的 hello world prog。我在 eclipse 中编译它并且没有收到任何错误，但是当我尝试运行它时，我得到：

“此应用程序无法启动，因为找不到 cygwin1.dll。”

我发现[这篇文章](http://dev.eclipse.org/newslists/news.eclipse.tools.cdt/msg08271.html)似乎表明我应该将它添加到 Windows PATH，我用[它](http://www.computerhope.com/issues/ch000549.htm)来做到这一点。所以现在我的环境变量中的“路径”在末尾附加了“;C:\cygwin\bin\cygwin1.dll”。仍然没有工作。任何人都知道我可能做错了什么？我的“程序”看起来像这样：

```
#include <stdio.h>

main()
{
    printf("hello, world\n");
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-12-03T19:21:34.387

PATH 环境变量需要包含包含 cygwin1.dll 的目录，而不是 cygwin1.dll 本身的路径。因此，只需确保 PATH 中包含字符串`"C:\cygwin\bin"`。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2008-12-03T19:43:01.850

顺便提一下，我恳请您不要盲目地将包含 cygwin1.dll 的目录添加到系统 PATH 中*。*路径是按顺序搜索的。如果您碰巧在路径中有较旧或较新版本的 Cygwin 运行时，则链接到 cygwin1.dll 的其他程序可能会严重中断（除非您知道您正在寻找不同的 DLL 版本，否则要弄清楚发生了什么并非易事.)

您应该做的是将 cygwin1.dll（和您的程序可能需要的其他 Cygwin DLL）复制到保存二进制文件的目录中，然后创建一个与可执行文件同名但`.local`附加的空（零字节长度）文件，即，如果您的可执行文件是`mytest.exe`，您创建一个名为`mytest.exe.local`. 这将告诉 PE 加载器*首先*在保存二进制文件的同一目录中查找所需的 DLL，从而避免以后出现很多麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-18T01:45:44.953

我有同样的问题......亚当罗森菲尔德的回答很好地解决了它。在我的电脑上，路径需要是`"C:\cygwin64\bin"`

第一次我没有意识到我的 cygwin 版本是 64 位的......但很明显，路径变量中的这些微小差异决定了它是否可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-03T18:50:51.087

添加：**`;C\cygwin64\bin`**到您的 Windows*系统*变量的**末尾。** *`PATH`*

 *此外，要编译以在**CMD**或**PowerShell**中使用，您可能需要使用：

```
x86_64-w64-mingw32-g++.exe -static -std=c++11 prog_name.cc -o prog_name.exe 
```

[（这会调用交叉编译器，如果已安装。）]

# visual-c++ - MSVC++ 2008 和 PSDK 编译器之间有区别（重新优化）吗？

> ID：338417
> 
> 赞同：0
> 
> 时间：2008-12-03T19:22:41.453
> 
> 标签：visual-c++, sdk, 64-bit

我刚刚在我的新系统上安装了适用于 Windows Server 2008 和 .NET 3.5 的 Platform SDK，并且第一次尝试为 WIN64 编译一个项目。该程序的 Unicode Release 版本是为 32 位构建的（使用不再可用的 Free Toolkit 中的优化编译器），大小约为 2.8 MB。使用来自最新 PSDK 的 amd64 编译器，程序大小超过 5 MB。

我最关心程序的大小，所以一切都是用 /O1 开关构建的。我期待程序在为 64 位构建时会变得更大，但不是那么多。大小更符合 Express 版本的构建，其中（某些）优化不可用。

PSDK 中的编译器和 MSVC 2008 Professional 中的编译器是否创建大小非常不同的程序？PSDK 中的编译器是否以相同的方式优化，甚至根本优化？

感谢您的任何见解。

**编辑：**

该程序和所有链接库都是在命令行上使用相同的 makefile.vc 构建的，因此编译设置不太可能存在差异。我基本上只是使用另一个命令文件来启动具有适当环境的 shell 以进行 64 位编译。

以下是应用程序的尺寸：

```
    VC++ 工具包 2003 32 位 cl.exe：13.10.3052 用于 80x86 2.916.352
    平台 SDK 32 位 cl.exe：15.00.30729.01 用于 80x86 2.881.536
    平台 SDK 64 位 cl.exe：15.00.21022.08 用于 x64 5.138.432

```

所以 64 位版本要大 78% :-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-03T19:56:24.363

由于代码方面的差异、静态数据等原因，64 位二进制文​​件将大于 32 位二进制文​​件。我们的项目有 7.1MB (x86) 和 10.7MB (x64)，这是相当大的数量代码。几乎翻倍听起来有点过分，除非你有很多指针大小的静态数据。

确保您使用 /OPT:REF 链接以丢弃任何未引用的符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-03T19:25:19.200

我高度怀疑它是优化器。程序大小的差异可能与调试信息和/或链接的静态库有关。确保您没有链接到您不需要的任何静态库。

# c++ - 如何在 PC/Visual C++ 上找出指针是否在堆栈上

> ID：338427
> 
> 赞同：2
> 
> 时间：2008-12-03T19:26:37.780
> 
> 标签：c++, c, visual-c++, pointers, low-level

[这是专门针对 PC/Visual C++ 的（尽管任何其他答案都会很有启发性:)）]

如何判断指针是否来自堆栈中的对象？例如：

```
int g_n = 0;

void F()
{
    int *pA = &s_n;
    ASSERT_IS_POINTER_ON_STACK(pA);
    int i = 0;
    int *pB = &i;
    ASSERT_IS_POINTER_ON_STACK(pB);
} 
```

所以只有第二个断言*（pB）*应该跳闸。我正在考虑使用一些内联汇编来确定它是否在 SS 段寄存器或类似的东西中。有谁知道是否有任何内置功能，或者一个简单的方法来做到这一点？

谢谢！钢筋混凝土

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-03T19:36:46.150

无论您做什么，它都将是非常特定于平台且不可移植的。假设您对此感到满意，请继续阅读。如果指针指向堆栈中的某个位置，它将位于当前堆栈指针`%esp`和堆栈顶部之间。

获取栈顶的一种方法是在`main()`. 但是，这有一些问题： - 堆栈的顶部实际上稍高一些，因为 C 运行时在进入之前会初始化堆栈`main()` - 在 C++ 中，全局对象的构造函数会在之前调用`main()` - 如果您的应用程序是多线程的，则每个线程都有自己的拥有独立的堆栈。在这种情况下，您需要一个线程局部变量来描述堆栈的基础

获取当前堆栈指针的一种方法是使用内联汇编：

```
uint32_t GetESP(void)
{
    uint32_t ret;
    asm
    {
        mov esp, ret
    }
    return ret;
} 
```

当心内联和优化！优化器可能会破坏此代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-03T19:37:59.207

我将第二个问题 - 为什么你需要知道？没有任何好处可以由此而来。

我认为这种方法可能有效，如果编译器通过指针比较做了合理的事情并且堆栈增长了：

```
static void * markerTop = NULL;

int main()
{
    char topOfStack;
    markerTop = &topOfStack;
    ...
}

bool IsOnStack(void * p)
{
    char bottomOfStack;
    void * markerBottom = &bottomOfStack;
    return (p > markerBottom) && (p < markerTop);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-03T19:37:06.883

从技术上讲，在便携式 C 中你无法知道。参数堆栈是一个硬件细节，在许多但不是所有编译器上都受到尊重。一些编译器会尽可能使用寄存器作为参数（例如，fastcall）。

如果您专门在 Windows NT 上工作，您希望通过调用 NtCurrentTeb() 来获取线程执行块。 [Joe Duffy 的博客](http://www.bluebytesoftware.com/blog/PermaLink,guid,eb98baaf-0837-498d-a1e7-e4e16788f912.aspx)有这方面的信息，您可以从中获取堆栈范围。你检查范围内的指针，你应该很高兴。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-06T00:09:11.887

由于您指定了 Visual C 和断言，我将假设您可以使用调试版本。在这种情况下，您可以利用此特定编译器放置的用于内存检查的栅栏：

```
#define IS_POINTER_TO_STACK(vp)   (*((int*)(vp)-1)==0xCCCCCCCC) 
```

在调试版本中的所有这些情况下都能正常工作：

```
#define ASSERT(v)  printf("assert: %d\n", v);  //so it doesn't really quit
int g_n = 0;
void test_indirectly(void* vp) {
    ASSERT(IS_POINTER_TO_STACK(vp));
}
void F() {
    int *pA = &g_n;
    ASSERT(IS_POINTER_TO_STACK(pA));         //0

    int i = 0;
    int j = 0;
    int *pB = &i;
    ASSERT(IS_POINTER_TO_STACK(pB));         //1
    ASSERT(IS_POINTER_TO_STACK(&j));         //1

    int *pC = (int*)malloc(sizeof(int));
    ASSERT(IS_POINTER_TO_STACK(pC));         //0
    free(pC);
    ASSERT(IS_POINTER_TO_STACK(pC));         //0
    pC = new int;
    ASSERT(IS_POINTER_TO_STACK(pC));         //0
    delete pC;

    char* s = "HelloSO";
    char w[6];
    ASSERT(IS_POINTER_TO_STACK("CONSTANT")); //0
    ASSERT(IS_POINTER_TO_STACK(s));          //0
    ASSERT(IS_POINTER_TO_STACK(&w[0]));      //1
    test_indirectly(&s);                     //1

    int* pD; //uninit
    ASSERT(IS_POINTER_TO_STACK(pD));    //runtime error check

} 
```

（除了最后一个由于未初始化的内存而导致运行时错误 - 但这仍然可以用于验证您的指针。）

这仅适用于 Debug 构建 - Release 构建对所有这些都报告错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-03T19:37:19.863

忽略“为什么”的问题......如果您可以控制顶部堆栈帧，一种简单的方法是将全局变量设置为堆栈对象的地址，然后使用一个函数来检查目标指针是否为在这个地址和它在堆栈上创建的变量的地址之间。

```
void* TopOfStack; // someone must populate this in the first stack frame

bool IsOnTheStack(void* p)
{
  int x;

  return (size_t) p < (size_t) TopOfTheStack &&
         (size_t) p > (size_t) &x;
} 
```

当然，这不适用于多个线程，除非您将 TopOfTheStack 线程设为本地。

编译器的堆栈优化也可能导致问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-03T21:14:00.993

对于 Visual C++ 或在现代 Windows（或古老的 32 位 OS/2）平台上运行的几乎任何东西，我都不相信，因为在这些平台上，堆栈是动态增长的，也就是说，只有在你的程序尝试访问所谓的保护页，即当前分配的堆栈块顶部的特制内存的 4 KB 块（无论如何对于 32 位 Windows）。当您的程序尝试访问此保护页时，操作系统会拦截生成的异常，并且 (1) 在当前分配的堆栈顶部上方映射一个正常的有效堆栈的新页面来代替它，并且 (2) 创建另一个保护页面就在新顶部的上方，因此它可以在以后根据需要增加堆栈。操作系统会这样做，直到堆栈达到其限制，并且通常此限制设置得非常高。

如果你的程序试图访问属于堆栈的未分配部分但位于保护页之上的任何地址，你的程序将崩溃，因为操作系统无法解释这一点。您的程序只是尝试访问其地址空间之外的内存，即使指针在理论上属于任务的堆栈段。

但是，如果您需要一种方法来查找地址是否属于堆栈的已分配部分（即“堆栈上的对象”），参考 Joe Duffy 的博客是不错的选择。只是不要使用那里描述的 StackLimit，使用其他已在此线程中描述的方法获取当前堆栈顶部，因此您对堆栈的已分配部分进行操作，而不是整个，可能部分未分配，一个

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-03T21:29:24.113

我同意那些说在不断调整堆栈大小的环境中很难可靠地做到这一点的人。

但至于“为什么？” 人——很有趣，我今天想在一个小型嵌入式平台上做这件事。我有一个函数，它接受一个指向对象的指针，然后在函数返回后保持该指针一段时间（因为它正在处理指针指向的数据）。

我不希望我的函数的调用者传入自动变量的地址，因为我不希望数据在仍在处理时被踩到。调用者必须传入静态数据或常量数据的地址，一个不错的“ASSERT_IS_ON_STACK()”宏可能是一个有用的提醒。

便携的？一点也不。可怕的糖果机界面？绝对地。

这就是小型嵌入式系统的本质——好的断言可以提供帮助。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2008-12-03T20:02:41.187

是的，我知道这是非常不可移植的，但这是为了让内部应用程序模仿其他硬件的功能来执行此操作。似乎线程执行块可能是要走的路。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2008-12-04T01:42:30.390

好的，至于“为什么”：

一些处理器的内存控制器既不能执行 DMA，也不能将内存映射到堆栈段或从堆栈段映射内存；所以在跨平台世界中，为了确保我不会从那里发送数据，跨平台断言非常有用。

# powershell - 有没有办法通过 Exchange PowerShell 查询谁是 activesync/bb 用户？

> ID：338428
> 
> 赞同：2
> 
> 时间：2008-12-03T19:26:54.253
> 
> 标签：powershell, blackberry, active-directory, exchange-server-2007, activesync

有没有办法查询 Exchange 2007 以区分谁是使用 powershell 交换插件的活动同步用户或黑莓用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-04T00:25:47.223

BBES 通常使用有权访问所有邮箱的服务帐户来执行此操作。您将需要查看 BBES 服务器本身以找出哪些用户处于活动状态，而不是 AD 或 Exchange。因为 BBES 由数据库支持，所以只需深入了解 dbo.UserStats 表即可查看其中的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-24T17:22:12.717

试试这个。

`Get-CASMailbox -resultsize unlimited | Where-Object {$_.ActiveSyncEnabled -eq "True" } | Select-Object SamAccountName,ActiveSyncEnabled`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-03T20:52:41.037

您可以查询以查看哪些邮箱启用了必要的权限 - 就像您可以查看哪些邮箱启用了 OWA 一样。这实际上不会告诉您谁在使用该功能，而只是告诉您谁可以使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-11T16:26:40.757

我确实从这个网站上找到了这个 vbscript。~~[http://blogs.technet.com/mjimenez/archive/2007/07/30/how-do-i-programmatically-disable-enable-microsoft-exchange-active-sync-for-all-of-my-mobile-用户.aspx](http://blogs.technet.com/mjimenez/archive/2007/07/30/how-do-i-programmatically-disable-enable-microsoft-exchange-active-sync-for-all-of-my-mobile-users.aspx)~~

```
'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
''
'' DISABLEEAS.VBS
''
'' Disables Exchange Server 2003 Active Sync for the specified OU in the default domain
''
'' usage: cscript disableeas
''
'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''

' Below are the values for the msExchOmaAdminWirelessEnable Exchange attribute that can be modified.
' 5 = disable EAS and keep OMA enabled.(default)
' 7 = disable all mobile features.
' 0 = enable all mobile features. (not recommended)

'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
'' Create log file instance
'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''

On Error Resume Next
Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objLogFile = objFSO.OpenTextFile("c:\disableeas.log", 2, True, 0)
If Err.Number <> 0 Then
  ' Attempt to create a log file failed. 
  On Error GoTo 0
  objLogFile.WriteLine "ERROR: Failed to create a log file.Program execution halted."
  WScript.Echo "ERROR: Failed to create a log file. Program execution halted."
  WScript.Quit
  objLogFile.Close
  Set objFSO = Nothing
Else
  ' Successfully Created Disableeas.log file. Restore normal error handling.
  On Error GoTo 0
  objLogFile.WriteLine "disableeas.log created successfully"
End If

'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
'' Determine DNS domain name
'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''

Set objRootDSE = GetObject("LDAP://rootDSE")
strDNSDomain = objRootDSE.Get("defaultNamingContext")
strBaseOU = "" 'SPECIFY AND ORGANIZATIONAL UNIT NAME HERE. FOR EXAMPLE 'OU=Production
If Err.Number <> 0 Then
  ' Attempt to bind to Active Directory Failed.
  On Error GoTo 0
  objLogFile.WriteLine "ERROR: Binding to Active Directory Failed. Program execution halted."
  WScript.Echo "ERROR: Binding to Active Directory Failed. Program execution halted."
  WScript.Quit
  objLogFile.Close
  Set objFSO = Nothing
Else
  ' Active Directory bind successful
  On Error GoTo 0
  objLogFile.WriteLine "Binding to Active Directory successful"
End If 

'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
'' Setup ADO for Active Directory
'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''

Set objCommand = CreateObject("ADODB.Command")
Set objConnection = CreateObject("ADODB.Connection")
objConnection.Provider = "ADsDSOObject"
objConnection.Open "Active Directory Provider"
objCommand.ActiveConnection = objConnection
If Err.Number <> 0 Then
  ' Attempt to search Active Directory Failed.
  On Error GoTo 0
  objLogFile.WriteLine "ERROR: ADO Setup for Active Directory Failed. Program execution halted."
  WScript.Echo "ERROR: ADO Setup for Active Directory Failed. Program execution halted."
  WScript.Quit
  objLogFile.Close
  Set objFSO = Nothing
Else
  ' ADO Active Directory setup successful
  On Error GoTo 0
  objLogFile.WriteLine "Active Directory setup successful"
End If 

' Test whether an OU is specified.
If strBaseOU <> "" Then
 strBase="<LDAP://" & strBaseOU & "," & strDNSDomain & ">"
Else strBase="<LDAP://" & strDNSDomain & ">"
End If
'strBase="<LDAP://" & strDNSDomain & ">"
wscript.echo strBase

'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
'' Search for users with defined filters
'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''

strFilter = "(&(objectCategory=person)(objectClass=user)(!msExchOmaAdminWirelessEnable=5)(mail=*)(userAccountControl=66048))"
strAttributes = "distinguishedName"
strQuery = strBase & ";" & strFilter & ";" & strAttributes & ";subtree"
objCommand.CommandText = strQuery
objCommand.Properties("Page Size") = 100
objCommand.Properties("Timeout") = 30
objCommand.Properties("Cache Results") = False
Set objRecordSet = objCommand.Execute
If Err.Number <> 0 Then
  ' Attempt to search within defined parameters failed.
  On Error GoTo 0
  objLogFile.WriteLine "Attempt to search within defined parameters failed. Program execution halted."
  WScript.Echo "ERROR: Attempt to search within defined parameters failed. Program execution halted."
  WScript.Quit
  objLogFile.Close
  Set objFSO = Nothing
Else
  ' Active Directory bind successful
  On Error GoTo 0
  objLogFile.WriteLine "Search within defined parameters was successful"
End If 

'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
'' Enuerate all users
'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''

Do Until objRecordSet.EOF
  strDN = objRecordSet.Fields("distinguishedName")
  Set objUser = GetObject("LDAP://" & strDN)
   On Error Resume Next
   objUser.Get("msExchOmaAdminWirelessEnable")
   On Error GoTo 0
    objUser.Put "msExchOmaAdminWirelessEnable", "5"
    objUser.SetInfo
       If Err.Number <> 0 Then
        On Error GoTo 0
 objLogFile.Writeline "ERROR: Unfortunately, the required mobile attribute generated an error can could not be set. Program execution halted."
        WScript.Echo "ERROR: Unfortunately, the required mobile attribute generated an error can could not be set. Program execution halted."
        Wscript.Quit
        objLogFile.Close
        Set objFSO = Nothing
       Else
        On Error GoTo 0
        objLogFile.Writeline "User mobile properties successfully modified: " & objUser.Name
     Wscript.Echo "User mobile properties successfully modified: " & objUser.Name
       End If
 '  End If
  objRecordSet.MoveNext
Loop

'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
'' Clean up
'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''

objLogFile.WriteLine "End Program"
Wscript.Echo "End Program"

objLogFile.Close 
```

我希望有一种方法可以由用户而不是你来做到这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-17T21:17:26.800

我发现powershell中有一个cmdlet可以描述activesync是否在线。

如果你运行 > get-casmailbox | 获取成员

我注意到列表中有一个 ActiveSyncEnabled 属性

# asp.net - Visual Studio 2008 有时无法打开 .aspx html 标记

> ID：338430
> 
> 赞同：4
> 
> 时间：2008-12-03T19:27:48.073
> 
> 标签：asp.net, visual-studio, visual-studio-2008

我时不时地遇到 Visual Studio Professional 2008 (SP1) 拒绝打开 aspx 页面的问题。我的网站位于 Web 应用程序项目中。

在解决方案资源管理器中双击 aspx 页面只会导致带有代码的树视图节点和 .designer.cs 折叠和展开，这几乎就像 VS 认为文件已经打开一样，但肯定不是。

我也尝试过右键单击 + 查看标记或查看设计器，但没有任何乐趣。我还尝试在解决方案资源管理器中卸载/重新加载项目，但这也不能解决问题，我实际上必须关闭整个解决方案然后重新打开（如果解决方案中有很多项目，这可能需要一段时间）。

这有时只发生在一两个文件上，其他文件打开时没有任何问题。其他人看到这个并且知道任何解决方法和原因吗？

干杯
凯夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-10-21T18:50:25.020

是的，我在 webproj 中只使用了一个 aspx 文件。我可以用记事本打开它，没有其他人对他们计算机上的文件有问题，而且它今天才开始发生在我身上。如果这很重要，我正在使用 SourceSafe。我尝试关闭并重新打开 VS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-12-10T21:24:36.513

您是否安装了任何附加功能/插件？我已经看到通过卸载 DevExpress 附加组件解决的此类问题

# asp.net - X509 公共证书和权限

> ID：338434
> 
> 赞同：0
> 
> 时间：2008-12-03T19:31:05.773
> 
> 标签：asp.net, iis, permissions, certificate, x509

我在 ASP.NET 应用程序中加载特定的 X509 证书时遇到了问题（即不通过 IIS 获取 https）。我已将其加载到本地计算机上的“个人”和“受信任的根”存储中（通过 MMC 管理单元），但无法从任一存储中加载它。

NETWORK SERVICE 帐户似乎没有读取/加载它的权限，因为当我将应用程序池身份更改为具有管理权限的用户时，我可以找到、加载和使用证书。

它只是一个公共证书，因此与带有私钥的证书不同，我看不到任何地方可以对其设置权限。

这很奇怪，因为我以前在这个应用程序中没有遇到过公共证书的问题。我可以看到这个公共证书和以前的公共证书（加载正常）的唯一区别是这个特定的公共证书已经由 Verisign 签名，因此有一个带有其他几个威瑞信证书的认证链。

在此先感谢，
查尔斯

仅供参考，我的开发环境只是我的带有 IIS7 的 Vista Business 机器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-03T19:49:00.167

已经有一段时间了，但我似乎记得我通过将证书导入*实体*商店解决了与权限相关的证书问题（安装证书时单击“显示实体商店”复选框）。

或者，您可以查看[FileMon](http://technet.microsoft.com/en-us/sysinternals/bb896642.aspx)或[ProcMon](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)并检查 NETWORK SERVICE 的访问被拒绝。这个 MSDN 页面列出了[存储在磁盘上的位置](http://msdn.microsoft.com/en-us/library/bb204778(VS.85).aspx#key_directories_and_files)。

仍然是一个模糊的答案，但希望这最终会导致一个解决方案......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-31T00:51:08.680

结合不同的想法。在您尝试使用管理员权限访问它之后，您如何使用“带有私钥的证书”一词以及“使用证书”的含义，我有点困惑。我猜您正在尝试执行以下操作之一：

*   获取证书的副本并执行诸如验证之类的操作，或使用它来加密某些内容。

*   *获取证书和*私钥的副本，并使用它来执行诸如签名之类的操作。

**所以......如果它是 #1**，我的第一个赌注是证书的设置在 ASP.NET 协议中搞砸了一些东西。威瑞信将配置用于以特定方式生成和签署证书的配置文件。这将提供您无法更改的证书设置，这可能会干扰上传证书。我会检查给您带来问题的证书与没有任何问题的证书，并查看证书上的扩展如何变化。您可以通过客户端中的 IE 证书预览窗格执行此操作。检查您在网上找到的任何不同设置 - 通常有关于 Microsoft 集成问题的已发布报告。

遗憾的是，如果您发现问题，您必须返回 Versign 并获取使用正确扩展名签名的新证书。如果您有公司帐户，请与他们的上层支持人员交谈，他们应该足够聪明，可以帮助您找到适用于您的工具的证书配置文件。

**如果是 #2** - 您可能已将证书的私钥设为不可导出。我假设您使用的是软件证书，并且您将 PKCS12 或其他证书存储文件上传到浏览器中。那时，它会询问您是否希望能够导出私钥。如果您说不（未选中该框），则私钥不会离开浏览器。

If you have the original certificate/private key storage file around, the answer is painless - delete the cert from your personal certificate store, and reupload it. Be sure to check the exportable box.

# git - 如何使用 Git 查看旧版本的文件？

> ID：338436
> 
> 赞同：1749
> 
> 时间：2008-12-03T19:31:48.377
> 
> 标签：git, git-history-graph

Git 中是否有命令可以查看（转储到标准输出，或转储到`$PAGER`或`$EDITOR`）特定文件的特定版本？

* * *

## 回答 #1

> 赞同：1991
> 
> 时间：2008-12-03T19:46:52.793

您可以使用`git show`来自存储库根目录的路径（`./`或`../`用于相对路径）：

```
$ git show REVISION:path/to/file 
```

替换`REVISION`为您的实际修订版（可以是 Git 提交 SHA、标签名称、分支名称、相对提交名称或任何其他在 Git 中识别提交的方式）

例如，要查看`<repository-root>/src/main.c`4 次提交前的文件版本，请使用：

```
$ git show HEAD~4:src/main.c 
```

即使在相对于当前目录的路径中，Windows 版 Git 也需要*正斜杠。*有关更多信息，请查看[`git-show`](https://git-scm.com/docs/git-show).

* * *

## 回答 #2

> 赞同：287
> 
> 时间：2013-03-07T17:05:24.470

*如果提交发生在过去 90 天内，则按*日期执行此操作如下所示：

```
git show HEAD@{2013-02-25}:./fileInCurrentDirectory.txt 
```

请注意，这`HEAD@{2013-02-25}`意味着此存储库中的“HEAD 位于 2013-02-25 的位置”（使用[reflog](http://git-scm.com/docs/git-reflog)），而不是“历史上此分支中 2013-02-25 之前的最后一次提交”。

这个很重要！这意味着，默认情况下，此方法仅适用于过去 90 天内的历史记录。否则，您需要这样做：

```
git show $(git rev-list -1 --before="2013-02-26" HEAD):./fileInCurrentDirectory.txt 
```

* * *

## 回答 #3

> 赞同：127
> 
> 时间：2012-12-19T18:21:57.967

如果你喜欢 GUI，你可以使用 gitk：

1.  开始 gitk：

    ```
    gitk /path/to/file 
    ```

2.  在屏幕顶部选择修订，例如通过描述或日期。默认情况下，屏幕的下半部分显示该版本的差异，（对应于“补丁”单选按钮）。

3.  要查看所选修订的文件：

    *   单击“树”单选按钮。这将显示该版本的文件树的根。
    *   深入到您的文件。

* * *

## 回答 #4

> 赞同：103
> 
> 时间：2016-11-03T11:21:50.763

您还可以使用[命令](https://git-scm.com/docs/git-show)`commit hash`指定一个（通常也称为`commit ID`）。[`git show`](https://git-scm.com/docs/git-show)

* * *

### 简而言之

`git show <commitHash>:/path/to/file`

* * *

### 一步步

1.  显示给定文件的所有更改的日志[`git log /path/to/file`](https://git-scm.com/book/en/v2/Git-Basics-Viewing-the-Commit-History)
2.  在显示的更改列表中，它显示了`commit hash`诸如`commit 06c98...`(06c98... 是提交哈希)
3.  复制`commit hash`
4.  `git show <commitHash>:/path/to/file`使用`commit hash`步骤 3 的和步骤 1 的运行命令`path/to/file`。

**注意：**`./`在指定相对路径时添加似乎很重要，即`git show b2f8be577166577c59b55e11cfff1404baf63a84:./flight-simulation/src/main/components/nav-horiz.html`.

* * *

## 回答 #5

> 赞同：50
> 
> 时间：2014-04-30T05:07:42.637

除了[Jim Hunziker](https://stackoverflow.com/a/15277342/567854)的回答，

您可以将修订版中的文件导出为，

```
git show HEAD@{2013-02-25}:./fileInCurrentDirectory.txt > old_fileInCurrentDirectory.txt 
```

希望这可以帮助 ：）

* * *

## 回答 #6

> 赞同：42
> 
> 时间：2018-12-13T06:05:00.390

***要快速查看与文件旧版本的差异：***

> `git show -1 filename.txt`> 与文件的最新版本进行比较
> 
> `git show -2 filename.txt`> 与第二次修订比较
> 
> `git show -3 fielname.txt` > 与最后第三次修订进行比较

* * *

## 回答 #7

> 赞同：30
> 
> 时间：2016-05-06T20:02:07.693

`git log -p`不仅会显示提交日志，还会显示每个提交的差异（合并提交除外）。然后您可以按`/`，输入文件名并按`enter`。按`n`或`p`转到下一个/上一个事件。这样，您不仅会看到文件中的更改，还会看到提交信息。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2020-01-26T00:16:47.517

**方式1：（**我更喜欢这种方式，不会丢失未提交的数据）

1.  使用以下命令查找提交 ID：`git reflog`

2.  列出提交的文件`git diff-tree --no-commit-id --name-only -r <commitHash>`

    例子：

    > `git diff-tree --no-commit-id --name-only -r d2f9ba4`
    > `d2f9ba4`是步骤 1 中的提交 ID。

3.  使用以下命令打开所需文件：

    `git show <commitHash>:/path/to/file`

    例子：

    > `git show d2f9ba4:Src/Ext/MoreSwiftUI/ListCustom.swift`
    > `Src/...`是步骤 2 中的文件路径。

* * *

**方式2：（**能够丢失未提交的数据）

1.  使用以下命令查找提交 ID：`git reflog`

2.  对此提交进行硬重置： `git reset --hard %commit ID%`

    例子：

    > `git reset --hard c14809fa`

3.  进行必要的更改并对所需的分支进行新的提交

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-10-30T17:01:27.827

您可以使用这样的脚本将文件的所有版本转储到单独的文件中：

例如

```
git_dump_all_versions_of_a_file.sh path/to/somefile.txt 
```

在此处获取[脚本](https://stackoverflow.com/a/32849134/26510)作为另一个类似问题的答案

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-12-07T10:54:05.813

**从给定版本中获取多个文件的助手**

当试图解决合并冲突时，这个助手非常有用：

```
#!/usr/bin/env python3

import argparse
import os
import subprocess

parser = argparse.ArgumentParser()
parser.add_argument('revision')
parser.add_argument('files', nargs='+')
args = parser.parse_args()
toplevel = subprocess.check_output(['git', 'rev-parse', '--show-toplevel']).rstrip().decode()
for path in args.files:
    file_relative = os.path.relpath(os.path.abspath(path), toplevel)
    base, ext = os.path.splitext(path)
    new_path = base + '.old' + ext
    with open(new_path, 'w') as f:
        subprocess.call(['git', 'show', '{}:./{}'.format(args.revision, path)], stdout=f) 
```

[GitHub 上游](https://github.com/cirosantilli/dotfiles/blob/a3fd52dab644a481b1736724c4fac7afcfd78317/home/bin/git-show-save).

用法：

```
git-show-save other-branch file1.c path/to/file2.cpp 
```

结果：以下包含文件的替代版本：

```
file1.old.c
path/to/file2.old.cpp 
```

这样，您可以保留文件扩展名，这样您的编辑就不会抱怨，并且可以轻松找到新文件旁边的旧文件。

# javascript - 带有命名锚点的 javascript select() 函数

> ID：338442
> 
> 赞同：1
> 
> 时间：2008-12-03T19:33:56.733
> 
> 标签：javascript, html, anchor, html-select

我想使用 JavaScript select() 函数突出显示表单上的文本字段，但首先我想使用命名锚点，以便页面滚动到正确的部分。以下代码在 Firefox 中运行良好，（除非您两次输入相同的值），但 IE 不允许在页面第二次加载时输入突出显示的文本（无需选项卡或单击）。我该如何解决这个问题，还是我做错了？

文件名：Test.html

```
<HTML>
<HEAD>
    <script>
    function setFocus() {   
        document.AForm.AText.select();
    }
    </script>

</HEAD>

<BODY onLoad="setFocus();">
    <br><br><br><br><br><br><br><br><br><br><br><br><br><br>
    <br><br><br><br><br><br><br><br><br><br><br><br><br><br>
    <br><br><br><br><br><br><br><br><br><br><br><br><br><br>
    <br><br><br><br><br><br><br><br><br><br><br><br><br><br>

    <a name="ATag"></a>
    <form name="AForm" id="AForm" action="Test.html#ATag" method="get">        
        <input type="text" name="AText" id="AText" value="Enter text here." >
        <input type="submit" value="OK">
    </form>

</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-03T22:13:14.103

据我所知，这似乎是 IE 中的一个错误。这似乎与时间有关。我找到了一个解决方法，但它不是很优雅，也没有让我知道可能出了什么问题。

也许其他用户会从我的工作中获得一些见解。无论如何，这对我有用：

```
function setFocus() {
  setTimeout(tryFocus,100);
}

function tryFocus() {
  document.AForm.AText.select();
} 
```

作为奖励，当您连续两次发送相同的值时，FireFox 无法正常工作的问题是它没有发送您的第二个 GET，因为它与前一个 GET 相同。你需要一个缓存破坏者。因此，将您的表单更改为如下所示：

```
<form name="AForm" id="AForm" action="index.html#ATag" method="get" onsubmit="bustCache();">
  <input type="text" name="AText" id="AText" value="Enter text here." >
  <input type="hidden" name="AHidden" id="AHidden" value="">
  <input type="submit" value="OK">
</form> 
```

将您的脚本更改为：

```
function setFocus() {
  setTimeout(tryFocus,100);
}

function tryFocus() {
  document.AForm.AText.select();
}

function bustCache() {
  document.AForm.AHidden.value = (new Date()).getTime();
} 
```

这远非完美，但应该适合您的目的。

# sql-server - SQL Server 中的“GRANT ALL TO 角色”

> ID：338445
> 
> 赞同：5
> 
> 时间：2008-12-03T19:36:03.673
> 
> 标签：sql-server, tsql

请有人解释一下以下语句在 SQL Server 2005 中的作用：

```
GRANT ALL TO pax_writer 
```

pax_writer 是先前使用语句创建的数据库角色

```
CREATE ROLE pax_writer AUTHORIZATION dbo 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-03T20:00:11.393

GRANT ALL TO "someone" 授予数据库中所有可用对象的所有权限。但我不确定这是否可以在 sql server 2005 中工作，就我而言，他们留下“GRANT ALL”只是为了向后兼容。

根据 sql server 2005 中的文章，工作方式如下：

1.  如果安全对象是数据库，“ALL”表示备份数据库、备份日志、创建数据库、创建默认值、创建函数、创建过程、创建规则、创建表和创建视图。
2.  如果安全对象是标量函数，“ALL”表示执行和引用。
3.  如果安全对象是表值函数，则“ALL”表示 DELETE、INSERT、REFERENCES、SELECT 和 UPDATE。
4.  如果安全对象是存储过程，则“ALL”表示 EXECUTE。
5.  如果安全对象是表，“ALL”表示 DELETE、INSERT、REFERENCES、SELECT 和 UPDATE。
6.  如果安全对象是视图，“ALL”表示 DELETE、INSERT、REFERENCES、SELECT 和 UPDATE。

希望有人能给出正确答案

[MSDN-授予](http://msdn.microsoft.com/en-us/library/ms187965.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-04T18:51:55.447

[授予数据库权限](http://msdn.microsoft.com/en-us/library/ms178569(SQL.90).aspx)

这是您唯一可以省略该`ON ThingsAndStuff`子句的情况。

> 全部
> 
> 此选项不会授予所有可能的权限。授予 ALL 等同于授予以下权限：BACKUP DATABASE、BACKUP LOG、CREATE DATABASE、CREATE DEFAULT、CREATE FUNCTION、CREATE PROCEDURE、CREATE RULE、CREATE TABLE 和 CREATE VIEW。

# python - TimedRotatingFileHandler 更改文件名？

> ID：338450
> 
> 赞同：23
> 
> 时间：2008-12-03T19:37:51.080
> 
> 标签：python, logging

我正在尝试实现 python 日志记录处理程序`TimedRotatingFileHandler`。

当它滚动到午夜时，它会在表单中附加当前日期`YYYY-MM-DD`。

```
LOGGING_MSG_FORMAT  = '%(name)-14s > [%(levelname)s] [%(asctime)s] : %(message)s'
LOGGING_DATE_FORMAT = '%Y-%m-%d %H:%M:%S'

logging.basicConfig(
            level=logging.DEBUG,
            format=LOGGING_MSG_FORMAT,
            datefmt=LOGGING_DATE_FORMAT
            )
root_logger = logging.getLogger('')
logger = logging.handlers.TimedRotatingFileHandler("C:\\logs\\Rotate_Test",'midnight',1)
root_logger.addHandler(logger)
while True:
    daemon_logger = logging.getLogger('TEST')
    daemon_logger.info("SDFKLDSKLFFJKLSDD")
    time.sleep(60) 
```

创建的第一个日志文件名为`Rotate_Test`，然后一旦滚动到第二天，它就会将文件名更改为当天的`Rotate_Test.YYYY-MM-DD`位置。`YYYY-MM-DD`

如何更改它更改文件名的方式？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2008-12-03T20:21:41.007

“我怎样才能改变它改变文件名的方式？”

由于没有记录，我选择阅读源代码。这是我通过阅读源代码得出的结论`logging/handlers.py`

```
handler = logging.handlers.TimedRotatingFileHandler("C:\\isis_ops\\logs\\Rotate_Test",'midnight',1)
handler.suffix = "%Y-%m-%d" # or anything else that strftime will allow
root_logger.addHandler(handler) 
```

后缀是格式化字符串。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-25T07:45:46.187

您可以按照上面的建议通过更改日志后缀来执行此操作，但您还需要更改 extMatch 变量以匹配后缀，以便它找到旋转的文件：

```
handler.suffix = "%Y%m%d"
handler.extMatch = re.compile(r"^\d{8}$") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-12-09T19:18:05.240

这个问题还有另一种方法：例如，我需要每天轮换日志，但它们必须以 %m%d%Y 格式命名...

所以我写了一个 TimedRotatingFileHandler 混音！

```
try:
    import codecs
except ImportError:
    codecs = None
import logging.handlers
import time
import os

class MyTimedRotatingFileHandler(logging.handlers.TimedRotatingFileHandler):
  def __init__(self,dir_log):
   self.dir_log = dir_log
   filename =  self.dir_log+time.strftime("%m%d%Y")+".txt" #dir_log here MUST be with os.sep on the end
   logging.handlers.TimedRotatingFileHandler.__init__(self,filename, when='midnight', interval=1, backupCount=0, encoding=None)
  def doRollover(self):
   """
   TimedRotatingFileHandler remix - rotates logs on daily basis, and filename of current logfile is time.strftime("%m%d%Y")+".txt" always
   """ 
   self.stream.close()
   # get the time that this sequence started at and make it a TimeTuple
   t = self.rolloverAt - self.interval
   timeTuple = time.localtime(t)
   self.baseFilename = self.dir_log+time.strftime("%m%d%Y")+".txt"
   if self.encoding:
     self.stream = codecs.open(self.baseFilename, 'w', self.encoding)
   else:
     self.stream = open(self.baseFilename, 'w')
   self.rolloverAt = self.rolloverAt + self.interval 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-04-22T12:37:09.973

在 Python 3.8 中，您可以更改提供的“self.namer”，以便在进行旋转时可以对文件名进行任何操作。像这样的东西：

```
def my_namer(default_name):
    # This will be called when doing the log rotation
    # default_name is the default filename that would be assigned, e.g. Rotate_Test.txt.YYYY-MM-DD
    # Do any manipulations to that name here, for example this changes the name to Rotate_Test.YYYY-MM-DD.txt
    base_filename, ext, date = default_name.split(".")
    return f"{base_filename}.{date}.{ext}"

logger = logging.handlers.TimedRotatingFileHandler("C:\\logs\\Rotate_Test",'midnight',1)
logger.namer = my_namer
root_logger.addHandler(logger) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-03T21:29:57.733

谢谢。

我看了看源码。

真的没有办法改变它的形式。由于操作后缀，只追加到文件名的末尾。以太方式，没有真正的方法来操纵完整的文件名，我希望的是你可以在哪里声明一个文件掩码，当它执行“RollOver”时，它将根据文件掩码创建一个新的文件名. 我只是要回到我最初的想法，就是杀死整个日志子系统并在它 RollsOver 时使用新文件名重新初始化它。

谢谢托。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-04T12:26:26.237

只是一个更新，我最终采用了不同的方法。

我发现修改文件输出的最简单方法是简单地使用 FileHandler，然后在需要进行翻转时。

我这样做：

```
if(current_time > old_time):
    for each in logging.getLogger('Debug').handlers:
      each.stream = open("C:\\NewOutput", 'a') 
```

这就是它的要点。花了很多时间四处寻找，但修改流是最简单的方法。

:)

# visual-studio-2008 - 带有 Visual C++ 速成版的 GUI 应用程序

> ID：338460
> 
> 赞同：2
> 
> 时间：2008-12-03T19:42:27.700
> 
> 标签：visual-studio-2008, user-interface, winapi, visual-c++, visual-studio-express

Visual C++ 2008 Express Edition 可以使用什么工具（最好是免费的）来创建 Win32 GUI 应用程序？如您所知，Express Edition 不包含 GUI 资源编辑器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-03T19:50:12.520

不会，但这不会阻止您创建 Win32 GUI 应用程序；您仍然可以在代码中执行此操作。

如果这对您没有吸引力，只需在 Google 上搜索“win32 资源编辑器”即可。有几个可用。任何创建 .rc 文件的工具都可以编译到您的 C++ 项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-03T22:50:34.200

[您可以使用WTL](http://wtl.sourceforge.net/)、[wxWidgets](http://www.wxwidgets.org/)或[Qt](http://trolltech.com/)库等创建 Win32 GUI 应用程序。这些已经在 StackOverflow 上的[这个问题中讨论过。](https://stackoverflow.com/questions/115045/good-c-gui-library-for-windows)请注意，正如我在[这个问题](https://stackoverflow.com/questions/316071/how-to-create-mfc-applications-with-vs-express08)中回答的那样，Express Edition 不包括 MFC，所以这不是您的选择。

我希望其他人能够推荐一个好的资源编辑器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-03T23:01:30.590

与您的答案有些不同，因为它不能与 Visual C++ 一起使用，但请查看 wxDevC++ ....它就像 Visual Studio，但具有我认为您正在寻找的拖放窗口创建。

# javascript - 如何在 Javascript 中进行日期比较？

> ID：338463
> 
> 赞同：115
> 
> 时间：2008-12-03T19:43:31.067
> 
> 标签：javascript, datetime

我想在 javascript 中比较两个日期。我一直在做一些研究，但我能找到的只是如何返回当前日期。我想比较与今天无关的 2 个不同的日期。我怎么做。

```
var startDate = Date(document.form1.Textbox2); 
```

* * *

## 回答 #1

> 赞同：231
> 
> 时间：2008-12-03T19:49:21.197

```
if (date1.getTime() > date2.getTime()) {
    alert("The first date is after the second date!");
} 
```

[引用日期对象](https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Date)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2011-05-27T07:06:59.950

```
new Date('1945/05/09').valueOf() < new Date('2011/05/09').valueOf() 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-12-03T19:50:26.670

JavaScript 的日期可以使用其他数据类型使用的相同比较运算符进行比较：>、<、<=、>=、==、!=、===、!==。

如果您有两个日期 A 和 B，则 A < B 如果 A 比 B 更早地回到过去。

但听起来你遇到的麻烦是将字符串转换为日期。您只需将字符串作为新日期的参数传递即可：

```
var someDate = new Date("12/03/2008"); 
```

或者，如果您想要的字符串是表单字段的值，看起来可能是：

```
var someDate = new Date(document.form1.Textbox2.value); 
```

如果该字符串不是 JavaScript 识别为日期的内容，您仍将获得一个 Date 对象，但它将是“无效的”。与另一个日期的任何比较都将返回 false。当转换为字符串时，它将变为“无效日期”。它的 getTime() 函数将返回 NaN，在日期本身调用 isNaN() 将返回 true；这是检查字符串是否为有效日期的简单方法。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-12-03T19:49:46.483

您可以在 Date 对象上使用 getTime() 方法来获取相对于 1970 年 1 月 1 日的时间戳（以毫秒为单位）。如果将两个日期转换为整数时间戳，则可以通过减去它们来比较差异。结果将以毫秒为单位，因此您只需除以 1000 秒，然后除以 60 分钟，等等。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-12-05T03:37:33.373

我宁愿使用 Date valueOf 方法而不是 === 或 !==

似乎 === 正在比较内部对象的引用，而与日期无关。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-12-19T22:16:55.640

```
function fn_DateCompare(DateA, DateB) {     // this function is good for dates > 01/01/1970

    var a = new Date(DateA);
    var b = new Date(DateB);

    var msDateA = Date.UTC(a.getFullYear(), a.getMonth()+1, a.getDate());
    var msDateB = Date.UTC(b.getFullYear(), b.getMonth()+1, b.getDate());

    if (parseFloat(msDateA) < parseFloat(msDateB))
      return -1;  // lt
    else if (parseFloat(msDateA) == parseFloat(msDateB))
      return 0;  // eq
    else if (parseFloat(msDateA) > parseFloat(msDateB))
      return 1;  // gt
    else
      return null;  // error
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-05-27T12:37:43.100

您可以尝试添加以下脚本代码来实现这一点：

```
if(CompareDates(smallDate,largeDate,'-') == 0) {
    alert('Selected date must be current date or previous date!');
return false;
}

function CompareDates(smallDate,largeDate,separator) {
    var smallDateArr = Array();
    var largeDateArr = Array(); 
    smallDateArr = smallDate.split(separator);
    largeDateArr = largeDate.split(separator);  
    var smallDt = smallDateArr[0];
    var smallMt = smallDateArr[1];
    var smallYr = smallDateArr[2];  
    var largeDt = largeDateArr[0];
    var largeMt = largeDateArr[1];
    var largeYr = largeDateArr[2];

    if(smallYr>largeYr) 
        return 0;
else if(smallYr<=largeYr && smallMt>largeMt)
    return 0;
else if(smallYr<=largeYr && smallMt==largeMt && smallDt>largeDt)
    return 0;
else 
    return 1;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-08-25T07:30:08.927

您可以尝试使用以下代码检查两个日期中哪个日期值最高，格式为 MM/DD/YYYY：

```
function d_check() {
    var dl_sdt=document.getElementIdBy("date_input_Id1").value; //date one
    var dl_endt=document.getElementIdBy("date_input_Id2").value; //date two

    if((dl_sdt.substr(6,4)) > (dl_endt.substr(6,4))) {
        alert("first date is greater");
        return false;
    }

    else if((((dl_sdt.substr(0,2)) > (dl_endt.
        substr(0,2)))&&(frdt(dl_sdt.substr(3,2)) > (dl_endt.substr(3,2))))||
        (((dl_sdt.substr(0,2)) > (dl_endt.substr(0,2)))&&
        ((dl_sdt.substr(3,2)) < (dl_endt.substr(3,2))))||
        (((dl_sdt.substr(0,2)) == (dl_endt.substr(0,2)))&&((dl_sdt.substr(3,2)) > 
        (dl_endt.substr(3,2))))) {
            alert("first date is greater");
        return false;
    }

    alert("second date is digher");
    return true;
} 
```

/*检查这个....创建一个表单并为两个日期输入提供 id。日期格式应该是 mm/dd/yyyy 或 mm-dd-yyyy 或 mm:dd:yyyy 或 mm.dd.yyyy 像这样. */

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-04T09:28:56.393

```
 function validateform()
    {
     if (trimAll(document.getElementById("<%=txtFromDate.ClientID %>").value) != "") {
   if (!isDate(trimAll(document.getElementById("<%=txtFromDate.ClientID %>").value)))
         msg = msg + "<li>Please enter valid From Date in mm/dd/yyyy format\n";
   else {
       var toDate = new Date();
       var txtdate = document.getElementById("<%=txtFromDate.ClientID %>").value;
       var d1 = new Date(txtdate)
   if (Date.parse(txtdate) > Date.parse(toDate)) {                   
         msg = msg + "<li>From date must be less than or equal to today's date\n";
   }
  }
}

     if (trimAll(document.getElementById("<%=txtToDate.ClientID %>").value) != "") {
            if (!isDate(trimAll(document.getElementById("<%=txtToDate.ClientID %>").value)))
                msg = msg + "<li>Please enter valid To Date in mm/dd/yyyy format\n";
            else {
                var toDate = new Date();
                var txtdate = document.getElementById("<%=txtToDate.ClientID %>").value;
                var d1 = new Date(txtdate)

                if (Date.parse(txtdate) > Date.parse(toDate)) {
                    msg = msg + "<li>To date must be less than or equal to today's date\n"; 
                  }
                 }
                } 
```

# visual-studio - 您是否使用各种 Visual Studio 2008 Team 版本中的任何功能？

> ID：338464
> 
> 赞同：1
> 
> 时间：2008-12-03T19:43:57.713
> 
> 标签：visual-studio

我们正在考虑 Visual Studio 许可，需要决定是否需要体系结构/数据库/测试版本的许可。有没有人对这些工具有足够的经验来说明它们是否有用？我喜欢一些具体的例子。

我还将接受提供各种版本概览的非 Microsoft 站点的链接。

**编辑：**澄清一下，我们大多数人已经拥有开发版许可证，问题是任何其他版本是否足以吸引某些人获得 Team Suite 许可证或 Arch/DB/Test 许可证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-03T20:01:18.770

当我们在源代码控制下获得包含 200 多个表的 2 个数据库并将数据库包含在持续集成构建中时，数据库版本证明对我们非常宝贵。此版本还包括数据和模式比较以及许多其他功能，这些功能真正改变了我们处理数据库的方式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-03T19:59:11.443

我使用的是开发者版；除了重要的一点，我不能谈论其他人。

回到 VSTS 2005，在 Team Foundation Server 中进行持续集成的唯一方法是编写测试列表。编写测试列表的唯一方法是让测试人员使用 VSTS，手动编写 XML，或者购买替换该功能的插件。我们最终以大约 100 块的价格[从 Ekobit 购买了 Test Manager](http://www.ekobit.com/testmngr.aspx)，效果很好（谢谢，伙计们！）。

现在，VSTS 2008 for Developers 具有创建测试列表的功能。因此，从开发人员的角度来看，VSTS for Developers 拥有我们需要的一切。我可以创建数据库并对它们进行一些有限的版本控制（通过数据库项目中的创建和更改脚本），创建测试（单元 etal），做一些架构工作（代码图）等。

再说一次，我没有用过 Architects、Database 或 Test 版本，所以我不能告诉你为什么你可能需要它们；我只能告诉你，开发者版允许我做我必须做的一切，即使不是以最巧妙或最有效的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-03T20:02:02.497

我最喜欢的 VS 升级版本是：

用于访问解决方案中所有断点的调试窗口。在他们被击中之前关闭你忘记的那些非常方便。

附加到 VS 的所有进程列表的进程窗口。

远程调试其他计算机。

SQL 调试。

还有很多其他的，但我认为我能做的最好的事情就是将您指向[此页面](http://msdn.microsoft.com/en-us/vstudio/products/cc149003.aspx)，该页面列出了版本之间的所有差异。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-03T20:02:55.880

就个人而言，使用 Team System 的唯一真正令人信服的原因是使用 Team Foundation Server（包括 CAL）。其他最有用的功能是：

*   单元测试 - 但它与使用 NUnit 或类似的 VS Pro 并没有太大区别。甚至 Microsoft 的 P&P 团队也提供了 NUnit 和 Microsoft 版本的单元测试。

*   代码分析，作为独立的 FxCop 提供。

我的建议是：

*   如果您可以就批量许可进行谈判，团队版可能不会贵很多，所以去吧。

*   如果您使用的是 TFS，请获取 Team Edition。

*   否则考虑使用专业版 + FxCop + NUnit。

# c++ - Visual Studio 2008 中是否有关于 C++ 编程的教程？

> ID：338467
> 
> 赞同：5
> 
> 时间：2008-12-03T19:45:09.613
> 
> 标签：c++, windows, visual-studio-2008

任何人都可以将我链接到当前实际上是最新的体面的 c++ 教程吗？我发现的几乎所有内容都适用于 2005 年，并且代码示例充满了错误，这些错误不会在我的 2008 版可视编译器中运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-03T19:56:49.450

*Accelerated C++*一书是学习 C++ 的良好开端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-03T19:54:16.333

这里有一个 Visual C++ 2008 Express Edition[介绍：Visual C++ 2008 Express 简介（视频）](http://msdn.microsoft.com/en-us/beginner/bb964629.aspx)。你会在这里找到关于标准 C++ 的好书清单：http: [//jcatki.no-ip.org](http://jcatki.no-ip.org:8080/fncpp/Resources#books) :8080/fncpp/Resources#books （这是 irc.freenode.org 上 ##c++ irc​​ 频道的网站） . 有关 C++ 和 Visual C++ 之间差异的说明，您可以阅读以下内容：http: [//www.comeaucomputing.com/techtalk/#vc](http://www.comeaucomputing.com/techtalk/#vc)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-03T19:54:44.320

多年来，C++ 并没有太大变化，即 www.vtc.com 的视频教程中的代码仍然适用，并且制作时间约为 2000 年。

但是，如果您专门寻找 Visual C++，那么您可能需要更新的教程，但如果您想学习 C++，请从小处着手，而不是使用 Visual C++。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-03T20:34:34.523

Visual C++® 2008：如何编程，第二版

不久前出现在 safari 上，看起来很适合介绍 Visual Studio 和 C++

# version-control - 版本控制是关于部署历史还是开发历史？

> ID：338469
> 
> 赞同：6
> 
> 时间：2008-12-03T19:46:43.743
> 
> 标签：version-control

...假设我检查了一些代码，进行一些开发或重构或其他任何事情.. 我只有在我完全满意时才检查它吗？...如果我在编码时改变主意怎么办？我可以回到以前的本地版本吗？有我当地的发展历史吗？

版本控制是关于部署历史还是开发历史？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-03T19:51:45.233

简短的回答。两者都是。

出于多种原因，您需要能够回滚到早期版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-03T19:53:21.297

两者都有，但主要是发展历史。主干不需要一直处于可部署状态——那太疯狂了。

相反，您提交 commit 提交，直到您准备好部署。然后，您标记/标记/分支您的存储库以指示部署了哪些代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-03T20:00:12.983

“版本控制是关于部署历史还是开发历史？”

两个都。

开发人员的修订/文件版本和部署的分支/标签/标签。

其中大部分取决于您组织的政策。

至于本地工作副本和修订 - 如果您有一个允许私有工作区/分支然后升级或分布式系统的 VCS，那么如果您签入错误代码并且您可以将 VCS 用于私有内容，这真的没关系你要。

对于集中式系统，您可能不想签入未经测试/不可编译的代码......

同样，这取决于您的组织。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-03T21:34:08.613

有趣的是，还没有人提到使用分支。

树枝是保持树干健康的好方法，同时不断检查你在做什么，无论是否损坏。把它想象成为代码分叉了一个新的时间线；主要时间线（主干）一直在工作并且一直在工作；分支可以是任何状态，而不会影响主干。

这使您可以尽早并经常提交，而不必担心是否弄乱了其他人，并保证您在开发某些东西时永远不会有“我走得太远且无法逆转”的时刻新的，或者如果您的本地磁盘应该死，我已经失去了一周。（不用说，您的存储库应该位于经常备份的地方！）

一旦你的代码正常工作，你可以将分支合并回主干，主干现在得到你的新代码；主干的新分支现在具有所有工作到现在的代码。

这是 git 对许多人的巨大吸引力：它非常容易分支和合并，这使得在需要时只需折腾一个新分支甚至分支分支变得非常容易。甚至 CVS 也可以进行分支和合并，尽管它要麻烦得多。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-03T19:53:03.437

呃，两个……

您应该在工作稳定的任何时候检查您的工作——这将在开发过程中发生很多*很多*次。

所有源存储库都有一个标签版本 - 您使用它来标记最终部署的发布版本。

所以主要是开发，但本质上也是发布的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-03T19:51:02.223

取决于您、您的团队和您的工具。例如，使用集中式版本控制系统，您不应该提交“损坏”或“不完整”的东西，而使用分布式版本控制系统则可以，如果这样做，您将获得优势。有关更详细（和有趣）的示例，请参见此处：http: [//bazaar-vcs.org/Workflows](http://bazaar-vcs.org/Workflows)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-03T19:52:23.390

我认为正确的答案可能是“取决于”:)

如果您在生产环境中使用版本控制，那么它与部署历史有关。如果您在开发中使用它，那就是关于开发历史。如果您在两个地方都使用相同的版本控制系统（并不少见），那么它可能会因分支而异。例如，您将拥有与开发有关的主干和功能分支，然后将它们分支到发布分支中，然后将其放到生产系统中。发布分支的历史显示部署历史。

一些版本控制系统，例如 git 和 mercurial，我认为 SVK（一个奇怪的修改过的 SVN）允许您拥有本地存储库，您可以从中获取以前的本地版本。AFAIK，如果您至少没有将更改提交到本地存储库，这些都不会允许您回滚。Eclipse 还允许您独立于版本控制系统回滚到以前的版本。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-03T20:20:19.933

版本控制是关于存储信息的安全和并发修改。即使使用版本控制软件，您仍然需要定义什么是版本以及什么是部署单元。没有它，版本控制只提供基本的回滚机制和许多低兴趣和微妙含义的选项。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-12-03T21:36:46.753

这两者之间的差距非常小。但是，如果正确使用版本控制，则它与源代码控制有关，即开发控制/历史记录。如果使用得当，您可以经常检查并获得一个不错的版本历史记录，它还可以用于跟踪您何时做了什么，用于时间报告并在发生错误时进行回退。

简短的回答是，正确使用时:)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-03T19:52:33.500

> ...假设我检查了一些代码，进行一些开发或重构或其他任何事情.. 我只有在我完全满意时才检查它吗？

这是个人喜好问题。当然，您可以签入无法编译的代码或您添加的功能不完整的地方。但是对于访问您的存储库的其他任何人（如果有的话）检查不起作用的文件可能会很痛苦。我认为这个问题的答案很大程度上取决于你项目的团队规模和团队的个性。

> 有我当地的发展历史吗？

取决于您使用的特定源代码控制系统。Git 允许您跟踪本地更改。

> 版本控制是关于部署历史还是开发历史？

开发历史，虽然我看不出是什么阻止了您在每次发布时将可部署文件和配置文件检查到存储库中（但是可能有更好的系统来跟踪这类事情）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-12-03T19:52:37.820

在签入方面，何时提交取决于您团队的政策。一些团队使用持续集成工具来确保当前版本的代码编译并通过测试，这意味着您通常不应该提交损坏的代码。在分支机构工作可以降低在这种情况下丢失工作的风险。

对于本地历史，您不能通过版本控制免费获得此功能，尽管一些 IDE 维护自己的本地历史。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-12-03T19:54:09.097

[Jeff](https://stackoverflow.com/users/1/jeff-atwood)认为您应该尽早[入住，经常入住](http://www.codinghorror.com/blog/archives/001165.html)。然后我就订阅了同样的想法。不过，我这样做的方式是使用我的主干作为“生产”安全的主要存储库，而我的分支是我进行所有开发的地方。这样我就可以随时检查我的所有更改，而不必担心它会投入生产。当我完成那个特定的增强后，我从那个分支合并到主干。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-12-03T20:39:39.660

入住时间和入住内容绝对是个人选择。可以帮助确定最佳选择的一些因素是您是使用中央版本控制系统还是分布式版本控制系统，以及是否有团队或个人在处理代码。

对于分布式系统，那么您签入的任何内容对您来说都是本地的，只有您选择推送给其他人的内容才是他们看到的内容，所以如果您因为经常签入而有一个损坏的树，这并不重要，而对于中央存储库，您应该如果要检查主干，那么只检查工作代码通常是一个好主意。如果您对树进行更新并且团队中的其他人破坏了代码，然后您的副本将不再编译，您会有什么感觉。在中央存储库设置中解决此问题的一种简单方法是分支主干代码，使您的更改经常提交，然后当您对它正常工作感到满意时，您可以将您的分支合并回主干。这样你就不会阻止主干始终处于可运行状态，这是保持它的有用状态。

关于回到以前的版本，如果它已被检入存储库，这不是问题。您可以通过查看提交日志然后使用相关命令返回到特定版本来返回任意多个版本。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2008-12-03T19:51:59.570

这取决于您的版本控制系统是如何使用的......

以我的经验，大多数公司在大多数意义上都使用它来记录部署历史。也就是说，只应放入工作代码。如果您签出某些内容，然后正在添加一个尚未工作的代码块 - 然后将其重新签入意味着有其他人签出的可能性一个坏掉的产品。

我遇到过公司使用它的情况，例如您每天早上检查您的代码以及您在一天结束时将其重新检查的任何状态。这样，如果其他人想要添加他们可以添加的东西，不管它目前处于什么状态......虽然我可以在逻辑中看到*一些*意义，但这对我不起作用。

# c# - selectedIndex 在回发期间丢失 - ASP.NET

> ID：338472
> 
> 赞同：5
> 
> 时间：2008-12-03T19:49:06.517
> 
> 标签：c#, .net, asp.net, viewstate

我有一个列表框控件：

```
 <asp:ListBox runat="server" id="lbox" autoPostBack="true" /> 

```

后面的代码类似于：

```
 private void Page_Load(object sender, System.EventArgs e)
{
    lbox.SelectedIndexChanged+=new EventHandler(lbox_SelectedIndexChanged);
    if(!Page.IsPostBack)
    {
        LoadData();     
    }
}
private LoadData()
{
    lbox.DataSource = foo();
    lbox.DataBind();
}
protected void lboxScorecard_SelectedIndexChanged(object sender, EventArgs e)
{
    int index = (sender as ListBox).selectedIndex;
} 

```

我的问题是，当我的页面收到回传时（当用户在列表框中进行选择时），选择总是“跳转”到列表框中的第一项，因此我的回调函数中的索引变量始终为 0。

看起来这可能是一个视图状态问题？如何修复它以使选择索引通过回发保持不变？

没有 ajax，这是 .NET 1.0。

谢谢。

**编辑 1** JohnIdol 让我更近了一步，如果我将数据源从原来的 DataTable 切换到 ArrayList，那么一切正常......会导致这种情况吗？

**编辑 2**事实证明，我的 DataTable 有多个相同的值，因此索引被视为与具有相同值的所有项目相同......感谢那些帮助的人！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-10T19:12:21.983

这里**真正的**问题是事件的顺序。当您在 page_load 中进行数据绑定时，您会覆盖发布的数据，这就是未在列表框中设置选择的原因。您可以通过将绑定逻辑移至 Page_Init 轻松克服这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-03T20:39:49.520

foo() 函数调用的输出是什么？

手动填充列表框，您可以将索引设置为您想要的任何内容（例如全部为 0） - 因此在某些情况下设置给定的数据源（我想指定索引的那个）可能会发生同样的事情。如果所有项目索引均为 0，则结​​果是未引发 SelectedIndexChanged 事件（索引未更改！）并且一切都搞砸了：回发选择将返回到列表中的第一个项目。

这可以解释它 - 我想不出其他任何东西 - 它在 .NET 2.0 上对我来说工作正常我正在使用带有字符串的 ArrayList 来填充 listBox。

我可以重现您的问题的唯一方法是将所有索引设置为 0。

我会说向 ListBox 添加一个手表并在运行时检查索引以确保它们不全为零。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-11-24T08:59:56.417

如果您的列表框项目相同，则所选索引将设置为 0。要纠正它，请设置不同的值`item.value`并`item.text`保持不变..然后所选索引将正确显示。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-03T21:09:56.213

数据绑定 DropDownLists/ListBoxes 很痛苦，因为它们经常绑定到错误的值。

我已经放弃使用 DataBind()，而只使用 Foreach 循环：

```
foreach (Item i in DataSet)
{
     listBox.Items.Add(etc);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-06-29T22:47:03.823

在 Page_Init 而不是 Page_Load 中加载数据。必须在 Page_init 期间填充数据才能在 PostBack 中使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-03T20:04:29.170

在我看来，您在每个页面加载时都创建了一个新的事件处理程序。这可能会导致问题。为什么不以声明方式附加事件处理程序：

```
<asp:ListBox runat="server" id="lbox" autoPostBack="true" OnSelectedIndexChanged="lbox_SelectedIndexChanged" /> 
```

另外，为什么不直接引用控件，而不是强制转换？

```
protected void lbox_SelectedIndexChanged(object sender, EventArgs e)
{
    int index = lbox.selectedIndex;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-03T21:08:33.220

也为我工作。您的 foo() 是否每次都返回相同的值？

顺便说一句：如果可能，您应该真正在 OnInit 中进行数据绑定（每次，而不仅仅是在 GET 上）。如果您在调用 base.OnInit(...) 之前执行此操作，则列表框的内容不必在视图状态和视图状态之间进行序列化和反序列化并通过线路发送到客户端（是的，您将点击数据库更多，但您将访问位于本地子网甚至同一台计算机上的系统。此外，数据库可能会缓存结果）。

如果你想构建高性能的网站，你需要仔细看看你使用 ViewState 的方式。我强烈推荐这篇文章：[真正理解 ViewState](http://weblogs.asp.net/infinitiesloop/archive/2006/08/03/truly-understanding-viewstate.aspx)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2008-12-03T20:24:28.957

您是否考虑过更早地加载数据 - 例如在页面/用户控件上的 OnInit 事件中。这发生在加载回发数据之前，因此在可以处理 on-change 之前？我相信这应该可行 - 但您可能想要关闭视图状态！

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2008-12-03T20:00:10.427

我不知道它是否有区别，但我通常将我的控件附加到首页上的事件而不是代码隐藏中。在您的示例中，我会这样做：

```
<asp:ListBox runat="server" id="lbox" autoPostBack="true" OnSelectedIndexChanged="lboxScorecard_SelectedIndexChanged"  /> 
```

除此之外，我会验证 ViewState 是否已启用。ViewState 可以在控件、页面甚至站点级别关闭。

# asp.net - 你能从请求变量中确定时区吗？

> ID：338482
> 
> 赞同：31
> 
> 时间：2008-12-03T19:50:28.387
> 
> 标签：asp.net, datetime, .net-3.5, timezone, globalization

有没有办法在服务器端进行时区偏移，通过 http 读取请求中的内容，而不是将所有内容发送给客户端并让它处理它？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2008-12-23T05:07:13.677

这更复杂，但我之前不得不求助于这种情况，因为机器和用户配置文件设置有时与访问者的偏好不匹配。例如，英国访问者从澳大利亚服务器临时访问您的网站。

1.  使用@balabaster 建议的地理定位服务（例如 MaxMind.com），以获取与其 IP 匹配的区域（最好使用 Global.Session_Start）。这对本地 ISP 来说是一个很好的匹配，但对 AOL 来说不是很好。将此偏移量存储在会话 cookie 中。

2.  或者在用户进入网站时使用 JavaScript 获取时区偏移量作为表单提交/重定向的一部分。这是浏览器的当前偏移量，但*不一定是访问者的首选区域。*将此值用作默认值；存储在另一个会话 cookie 中。

    ```
     <script type="text/javascript" language="JavaScript">
    var offset = new Date();
    document.write('<input type="hidden" id="clientTzOffset" name="clientTzOffset" value="' + offset.getTimezoneOffset() + '"/>');
    </script> 
    ```

3.  允许访问者通过持久性 cookie（对于匿名用户）和其帐户配置文件中的字段（如果经过身份验证）来更新区域。

来自的持久值 #3 会覆盖会话值。您还可以为经过身份验证的用户存储相同的持久 cookie，以便在他们登录之前显示时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-03T19:55:33.633

在 Page Unload...Request.ServerVariables 之前的任何事件中。如果您想要他们的物理时区，那么您检查他们的 IP 地址并使用 IP 到地理位置的转换工具。

我不确定是否有其他方法可以做到这一点，所以如果你需要他们的计算机配置的时区，它必须等待页面加载 javascript...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-04T08:56:34.750

我们可以在服务器端使用以下代码获取时区，而不是从客户端发送值。

```
private TimeZoneInfo GetRequestTimeZone()
    {
        TimeZoneInfo timeZoneInfo = null;
        DateTimeOffset localDateOffset;
        try
        {
            localDateOffset = new DateTimeOffset(Request.RequestContext.HttpContext.Timestamp, Request.RequestContext.HttpContext.Timestamp - Request.RequestContext.HttpContext.Timestamp.ToUniversalTime());
            timeZoneInfo = (from x in TimeZoneInfo.GetSystemTimeZones()
                            where x.BaseUtcOffset == localDateOffset.Offset
                            select x).FirstOrDefault();
        }
        catch (Exception)
        {
        }
        return timeZoneInfo;
    } 
```

谢谢...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-05T09:19:29.660

> 有没有办法在服务器端进行时区偏移，通过 http 读取请求中的内容，而不是将所有内容发送给客户端并让它处理它？

当我遇到与 WCF Web 服务相同的问题时，这是我提出的解决方案：

[如何让 WCF Web 服务返回用户本地时区的 DateTimes](https://stackoverflow.com/a/30503614/391605)

基本上，我得到我的 JavaScript/Angular 代码来确定用户的时区，然后将此值传递给我的 WCF Web 服务之一。

请注意我如何调用一个 Web 服务`getListOfRecords`，它采用一个参数，即时区偏移值。

```
$scope.loadSomeDatabaseRecords = function () {

    var d = new Date()
    var timezoneOffset = d.getTimezoneOffset();

    return $http({
        url: 'http://localhost:15021/Service1.svc/getListOfRecords/' + timezoneOffset,
        method: 'GET',
        async: true,
        cache: false,
        headers: { 'Accept': 'application/json', 'Pragma': 'no-cache' }
    }).success(function (data) {
        $scope.listScheduleLog = data.Results;
    });
} 
```

从那里，我的 C# 代码读取数据库记录，将该时区偏移量应用于 UTC`DateTime`值，并将其返回给客户端。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-08T09:12:53.737

下面是我如何使用 javascript 和 MVC 解决它：

首先，在主站点脚本上，我添加了以下代码：

```
var clientOffset = getCookie("_clientOffset");
var currentOffset = new Date().getTimezoneOffset() * -1;
var reloadForCookieRefresh = false;

if (clientOffset  == undefined || clientOffset == null || clientOffset != currentOffset) {
    setCookie("_clientOffset", currentOffset, 30);
    reloadForCookieRefresh = true;
}

if (reloadForCookieRefresh)
    window.location.reload();

function setCookie(name, value, days) {
    var expires = "";
    if (days) {
        var date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        expires = "; expires=" + date.toUTCString();
    }
    document.cookie = name + "=" + (value || "") + expires + "; path=/";
}

function getCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') c = c.substring(1, c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
    }
    return null;
} 
```

在操作过滤器内的服务器端：

```
public class SetCurrentRequestDataFilter : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext context)
    {
        // currentRequestService is registered by request using IoC container
        var currentRequestService = iocResolver.Resolve<ICurrentRequestService>();

        if (context.HttpContext.Request.Cookies.AllKeys.Contains("_clientOffset"))
        {
            currentRequestService.ClientOffset = int.Parse(context.HttpContext.Request.Cookies.Get("_clientOffset").Value);
        }

    }
} 
```

# flash - 通过单击按钮更改显示的 Flash 文件

> ID：338483
> 
> 赞同：-1
> 
> 时间：2008-12-03T19:50:48.197
> 
> 标签：flash

我在 Windows Vista 和 IE7 上。

这是我想做的：

1.  我有两个闪存文件：`page1.swf`和`page2.swf`. 它们只是杂志上的一页。
2.  展示`page1.swf`
3.  有一个显示“更改页面”的按钮
4.  当我单击按钮时；显示`page2.swf`而不是`page1.swf`（仅`page2.swf`，不是两个页面）就是这样。

如果有人可以给我一个脚本来做到这一点，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-03T19:57:47.700

此函数更改嵌入在元素中的 Flash：

```
function setFlashSrc(newSrc)    
    {          
        var flash='<OBJECT CLASSID="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" CODEBASE="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,29,0" WIDTH="210" HEIGHT="210">';          
        flash+='<PARAM NAME=movie VALUE="'+newSrc+'"><PARAM NAME=quality VALUE=high>';          
        flash+='<EMBED SRC="'+newSrc+'" QUALITY=high PLUGINSPAGE="http://www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash" ';          
        flash+='TYPE="application/x-shockwave-flash" WIDTH="210" HEIGHT="210">';          
        flash+='</EMBED>';          
        flash+='</OBJECT>';          
        document.getElementById("urelement").innerHTML=flash;    
        } 
```

根据需要替换 flash 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-03T20:13:59.900

要使用 JavaScript 管理页面中的 SWF 对象，我建议您使用[SWFObject](http://code.google.com/p/swfobject/)。

还要检查这个问题：[How to use javascript to swap swf in html?](https://stackoverflow.com/questions/291647/how-to-use-javascript-to-swap-swf-in-html)

# asp.net-mvc - 从 ASP.Net MVC 进行异步 WebService 调用

> ID：338499
> 
> 赞同：0
> 
> 时间：2008-12-03T19:54:25.197
> 
> 标签：asp.net-mvc, web-services, asp.net-ajax, webmethod

我会（如问题所述）想进行异步调用，最好使用 ASP.net AJAX。

WebMethod 的代码如下所示：

```
[WebMethod]
public void SendMail(string name, string email, string subject, string body)
{
  MailMessage toSend = new MailMessage(email, address@domain.com, subject, body);
  var smtp = new SmtpClient();
  smtp.Send(toSend);
} 
```

毫不奇怪，视图上的字段是：姓名、电子邮件、主题、正文。

在我尝试执行此操作时，我无法访问 WebMethod。服务参考已经到位，所以至少我没有搞砸。

谢谢您的帮助...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-03T20:09:48.050

这不是对您问题的回答，而是警告。我正在查看这个方法并想，“嗯，我想知道 ASP.NET 是否关心对这个 Web 方法的调用是来自您的站点还是来自其他地方？” 一个快速的谷歌搜索让我相信没有任何检查来确保某些冲洗者没有使用你的网络方法来实现他自己的恶意欲望（[这里有一篇关于这个的博客文章](http://softwaredevscott.spaces.live.com/Blog/cns!1A9E939F7373F3B7!484.entry)）。

因此，在开始这项工作之前，您可能需要考虑如何防止有人劫持您的网络方法向我发送伟哥电子邮件。因为如果我从您的网站收到伟哥电子邮件，我不会对您很满意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-03T20:25:12.077

[在这里](http://www.ajaxprojects.com/ajax/tutorialdetails.php?itemid=314)，您可以找到在 ASP.NET MVC 中使用 AJAX 调用异步方法的示例，其中包含以下元素

```
<% using (Ajax.Form("SendMail", new AjaxOptions { UpdateTargetId = "resultDiv" })) { %>

   <!-- Your form elements here... -->

<% } %> 
```

您可以在控制器方法中接收参数并从那里调用 web 服务。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2008-12-03T20:26:11.247

根据 MSDN 库

> 为了从脚本访问 Web 服务，它必须是一个 .asmx Web 服务，其 Web 服务类由 ScriptServiceAttribute 属性限定。要从脚本调用的各个方法必须使用 WebMethodAttribute 属性进行限定。

请参阅[http://msdn.microsoft.com/en-ca/library/bb398998.aspx](http://msdn.microsoft.com/en-ca/library/bb398998.aspx)

# c++ - C++0x - 什么时候？

> ID：338509
> 
> 赞同：5
> 
> 时间：2008-12-03T19:59:01.037
> 
> 标签：c++, c++11

> **可能的重复：**
> [C++0X 什么时候？](https://stackoverflow.com/questions/226061/c0x-when)
> [C++0x 什么时候完成？](https://stackoverflow.com/questions/5436139/when-will-c0x-be-finished)

[C++0x](http://en.wikipedia.org/wiki/C%2B%2B0x)什么时候发布？这里有人知道吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-03T20:19:19.857

**编辑**：我们现在有一个新标准：http: [//herbsutter.com/2011/08/12/we-have-an-international-standard-c0x-is-unanimously-approved/](http://herbsutter.com/2011/08/12/we-have-an-international-standard-c0x-is-unanimously-approved/)

* * *

**编辑**：FDIS 已经完成，所以正式它应该在几个月内发布。见：[http ://herbsutter.com/2011/03/25/we-have-fdis-trip-report-march-2011-c-standards-meeting/](http://herbsutter.com/2011/03/25/we-have-fdis-trip-report-march-2011-c-standards-meeting/)

* * *

Herb Sutter 作为当时 ISO C++ 委员会的召集人（直到最近），是一个有用的信息来源。

**编辑**请参阅他2010 年 3 月 13 日 的最新博客文章[，了解最新进展：C++0x 现在是最终委员会草案，并且...](http://herbsutter.wordpress.com/2010/03/13/trip-report-march-2010-iso-c-standards-meeting/)

*“……假设一切顺利，C++0x 最早可能在明年正式发布为 ISO C++ 2011，我们可以停止“x-is-hex”的笑话，开始称它为 C++11 。”*

PJ Plauger 已接任新召集人，但我希望 Herb 将继续提供有关委员会进展的最新信息 - 由于 Herb 也为 Microsoft 工作，因此可以提供有关 Microsoft 何时实现 C++0X 的早期线索。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-03T20:01:24.697

截止日期为**2009 年**。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-03T20:05:41.630

如[http://en.wikipedia.org/wiki/C%2B%2B0x](http://en.wikipedia.org/wiki/C%2B%2B0x)所述：

> ISO/IEC JTC1/SC22/WG21 C++ 标准委员会的目标是在 2009 年引入新标准（因此今天称为 C++0x 的标准将变为 C++09），这意味着该文件必须准备好批准2008 年 ISO 成员国。为了能够按时完成，委员会决定将精力集中在 2006 年之前引入的解决方案上，而忽略新的提案 [1]。

# apache - 将规则重写为 Zeus 服务器规则 (Codeigniter)

> ID：338511
> 
> 赞同：3
> 
> 时间：2008-12-03T19:59:13.830
> 
> 标签：apache, mod-rewrite, codeigniter, rewrite, zeus

我即将与 Codeigniter 支持的网站一起上线。我想从 url 中删除 index.php ，而不是这样：

```
http://www.mysite.com/index.php/controller 
```

我得到这样的东西：

```
http://www.mysite.com/controller 
```

到目前为止，非常简单。在过去，我使用了 Codeigniter 文档提供的 mod-rewrite 规则：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

这就像一个魅力。但是，对于这个站点，我不得不使用 Zeus Web 服务器而不是 Apache，而且我对它一点也不熟悉。Zeus 有自己的重写规则，例如：

```
RewriteCond %{REQUEST_FILENAME} !-f  
RewriteRule ^[^/]*\.html$ index.php 
```

会变成这样：

```
match URL into $ with ^/[^/]*\.html$
if matched then set URL = /index.php 
```

谁能帮我重写宙斯的第一条规则？非常感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-04T12:05:30.213

想通了-以下对我很有效：

```
map path into SCRATCH:DOCROOT from /

set SCRATCH:ORIG_URL = %{URL}
set SCRATCH:REQUEST_URI = %{URL}

look for file at %{SCRATCH:DOCROOT}%{SCRATCH:REQUEST_URI}
if not exists then look for dir at %{SCRATCH:REQUEST_URI}%{SCRATCH:REQUEST_URI}
if not exists then set URL = /index.php%{SCRATCH:REQUEST_URI} 
```

# shell - 将 Shoutcast 流延迟 12 小时（Linux/bash）

> ID：338516
> 
> 赞同：1
> 
> 时间：2008-12-03T20:00:13.063
> 
> 标签：shell, audio-recording, shoutcast

我住在世界的另一端（现在是 GMT+1，现在是 GMT+13），我想念我以前的地面广播电台。它有一个 Shoutcast 流，我想简单地将它延迟 12 小时，以便在我想收听它时它始终可用，以使其时区与我的时区同步的方式。

我将其设想为在我的服务器主机上运行的脚本。

一种天真的方法只是在环形缓冲区中分配足够的内存来存储整个 12 小时的延迟，并通过管道输入 streamripper 的输出。但是流是 128kbps 的 mp3，这意味着 (128/8) * 60 * 60 = ~56MB/小时，或者整个 12 小时缓冲区的 675MB，这并不是那么实用。另外，我可能不得不处理我的服务器主机，只是在某个超时后终止进程。

那么，有哪些实际可行的策略呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-03T20:05:46.513

你为什么不直接用 Ripshout 之类的流开膛手下载它呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-03T21:10:18.320

流开膛手将是简单的方式，也可能是正确的方式，但如果你想用程序员的方式来做......

*   大多数开发机器都有相当多的 RAM。你确定你不能腾出 675 MB 吗？
*   不是将输出存储在缓冲区中，而是不能将其存储在一个或多个文件中，比如一次一个小时？（本质上，您将编写自己的流开膛手）
*   如果您可以容忍质量损失，请将流转换为较低的比特率

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-04T14:24:57.840

为了回答我自己的问题，这里有一个脚本，它每 30 分钟启动一次 cron 作业。它将传入流以 5 分钟的块（或由 FILE_SECONDS 设置）转储到特定目录。块边界与时钟同步，直到当前时间块结束时才开始写入*，*因此正在运行的 cronjobs 可以重叠而不会加倍数据或留下间隙。文件被命名为 (epoch time % number of seconds in 24 hours).str 。

我还没有制作播放器，但计划是将输出目录设置为可通过网络访问的某个位置，并编写一个在本地运行的脚本，该脚本使用与此处相同的时间戳计算代码来顺序访问（时间戳 12 小时前).str，将它们重新组合在一起，然后在本地设置为广播服务器。然后我可以将我的音乐播放器指向[http://localhost:port](http://localhost:port)并获取它。

*编辑：具有超时和更好的错误条件检查的新版本，以及漂亮的日志文件。这目前在我的（便宜的）共享虚拟主机上运行顺利，没有问题。*

```
#!/usr/bin/python
import time
import urllib
import datetime
import os
import socket

# number of seconds for each file
FILE_SECONDS = 300

# run for 30 minutes
RUN_TIME = 60*30

# size in bytes of each read block
# 16384 = 1 second
BLOCK_SIZE = 16384

MAX_TIMEOUTS = 10

# where to save the files
OUTPUT_DIRECTORY = "dir/"
# URL for original stream
URL = "http://url/path:port"

debug = True
log = None
socket.setdefaulttimeout(10)

class DatestampedWriter:

    # output_path MUST have trailing '/'
    def __init__(self, output_path, run_seconds ):
        self.path = output_path
        self.file = None
        # needs to be -1 to avoid issue when 0 is a real timestamp
        self.curr_timestamp = -1
        self.running = False
        # don't start until the _end_ of the current time block
        # so calculate an initial timestamp as (now+FILE_SECONDS)
        self.initial_timestamp = self.CalcTimestamp( FILE_SECONDS )
        self.final_timestamp = self.CalcTimestamp( run_seconds )
        if debug:
            log = open(OUTPUT_DIRECTORY+"log_"+str(self.initial_timestamp)+".txt","w")
            log.write("initial timestamp "+str(self.initial_timestamp)+", final "+str(self.final_timestamp)+" (diff "+str(self.final_timestamp-self.initial_timestamp)+")\n")

        self.log = log

    def Shutdown(self):
        if self.file != None:
            self.file.close()

    # write out buf
    # returns True when we should stop
    def Write(self, buf):
        # check that we have the correct file open

        # get timestamp
        timestamp = self.CalcTimestamp()

        if not self.running :
            # should we start?
            if timestamp == self.initial_timestamp:
                if debug:
                    self.log.write( "starting running now\n" )
                    self.log.flush()
                self.running = True

        # should we open a new file?
        if self.running and timestamp != self.curr_timestamp:
            if debug:
                self.log.write( "new timestamp "+str(timestamp)+"\n" )
                self.log.flush()
            # close old file
            if ( self.file != None ):
                self.file.close()
            # time to stop?
            if ( self.curr_timestamp == self.final_timestamp ):
                if debug:
                    self.log.write( " -- time to stop\n" )
                    self.log.flush()
                self.running = False
                return True
            # open new file
            filename = self.path+str(timestamp)+".str"
            #if not os.path.exists(filename):
            self.file = open(filename, "w")
            self.curr_timestamp = int(timestamp)
            #else:
                # uh-oh
            #   if debug:
            #       self.log.write(" tried to open but failed, already there\n")
            #   self.running = False

        # now write bytes
        if self.running:
            #print("writing "+str(len(buf)))
            self.file.write( buf )

        return False

    def CalcTimestamp(self, seconds_offset=0):
        t = datetime.datetime.now()
        seconds = time.mktime(t.timetuple())+seconds_offset
        # FILE_SECONDS intervals, 24 hour days
        timestamp = seconds - ( seconds % FILE_SECONDS )
        timestamp = timestamp % 86400
        return int(timestamp)

writer = DatestampedWriter(OUTPUT_DIRECTORY, RUN_TIME)

writer_finished = False

# while been running for < (RUN_TIME + 5 minutes)
now = time.mktime(datetime.datetime.now().timetuple())
stop_time = now + RUN_TIME + 5*60
while not writer_finished and time.mktime(datetime.datetime.now().timetuple())<stop_time:

    now = time.mktime(datetime.datetime.now().timetuple())

    # open the stream
    if debug:
        writer.log.write("opening stream... "+str(now)+"/"+str(stop_time)+"\n")
        writer.log.flush()
    try:
        u = urllib.urlopen(URL)
    except socket.timeout:
        if debug:
            writer.log.write("timed out, sleeping 60 seconds\n")
            writer.log.flush()
        time.sleep(60)
        continue
    except IOError:
        if debug:
            writer.log.write("IOError, sleeping 60 seconds\n")
            writer.log.flush()
        time.sleep(60)
        continue
        # read 1 block of input
    buf = u.read(BLOCK_SIZE)

    timeouts = 0
    while len(buf) > 0 and not writer_finished and now<stop_time and timeouts<MAX_TIMEOUTS:
        # write to disc
        writer_finished = writer.Write(buf)

        # read 1 block of input
        try:
            buf = u.read(BLOCK_SIZE)
        except socket.timeout:
            # catch exception but do nothing about it
            if debug:
                writer.log.write("read timed out ("+str(timeouts)+")\n")
                writer.log.flush()
            timeouts = timeouts+1

        now = time.mktime(datetime.datetime.now().timetuple())
    # stream has closed,
    if debug:
        writer.log.write("read loop bailed out: timeouts "+str(timeouts)+", time "+str(now)+"\n")
        writer.log.flush()
    u.close();
    # sleep 1 second before trying to open the stream again
    time.sleep(1)

    now = time.mktime(datetime.datetime.now().timetuple())

writer.Shutdown() 
```

# jsp - 如何在 JSP 中使用 equals() 方法？

> ID：338518
> 
> 赞同：4
> 
> 时间：2008-12-03T20:00:28.553
> 
> 标签：jsp, jstl, el, equals

在我的 JSP 中，我需要使用该`equals()`方法测试两个对象。有没有办法使用 EL、JSTL 或其他标签库来做到这一点？由于团队规则，我不允许使用 scriptlet。

我尝试使用 JSTL`<c:if>`标记，但它似乎只使用`==`运算符。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-03T21:04:21.653

JSP 表达式语言运算符`==`（或其别名`eq`）执行与`equals`方法的比较，但如果其中一个对象是特殊类型（BigDecimal、BigInteger、Double、Float、Long、Integer、Short、Byte、Character、布尔值或字符串）。您不需要为此添加标签，只需`${a == b}`. 如果这不适合您的上下文，您能否发布更多信息？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-03T20:03:35.707

[J2EE 1.4 指南](http://java.sun.com/j2ee/1.4/docs/tutorial/doc/JSPIntro7.html)有一个例子。你必须设置你曾经的函数库，但它看起来并不难。

# wpf - GetLocalValueEnumerator() 不返回所有属性

> ID：338522
> 
> 赞同：4
> 
> 时间：2008-12-03T20:01:38.613
> 
> 标签：wpf, validation, data-binding

我正在尝试使用[Detecting WPF Validation Errors](https://stackoverflow.com/questions/127477/detecting-wpf-validation-errors)中的解决方案在我的 WPF 应用程序中执行验证。

```
public static bool IsValid(DependencyObject parent)
{
    // Validate all the bindings on the parent        
    bool valid = true;
    LocalValueEnumerator localValues = parent.GetLocalValueEnumerator();
    while (localValues.MoveNext())
    {
        LocalValueEntry entry = localValues.Current;
        if (BindingOperations.IsDataBound(parent, entry.Property))
        {
            Binding binding = BindingOperations.GetBinding(parent, entry.Property);
            foreach (ValidationRule rule in binding.ValidationRules)
            {
                ValidationResult result = rule.Validate(parent.GetValue(entry.Property), null);
                if (!result.IsValid)
                {
                    BindingExpression expression = BindingOperations.GetBindingExpression(parent, entry.Property);
                    System.Windows.Controls.Validation.MarkInvalid(expression, new ValidationError(rule, expression, result.ErrorContent, null));
                    valid = false;
                }
            }
        }
    }
    // Validate all the bindings on the children
    for (int i = 0; i != VisualTreeHelper.GetChildrenCount(parent); ++i)
    {
        DependencyObject child = VisualTreeHelper.GetChild(parent, i);
        if (!IsValid(child))
        {
            valid = false;
        }
    }
    return valid;
} 
```

我遇到的问题是，当我单步执行 TextBox 的代码时，我没有得到 Text 属性。我得到的唯一属性是“PageHeight”、“Instance”和“UndoManagerInstance”。因此，我无法验证 TextBox 上的绑定规则。

有谁知道为什么我不会得到正确的属性？是否有另一种方法可以强制对 WPF 中的控件进行验证？我找不到其他遇到此问题的人。

**更新：** 我要验证的 TextBoxes 在 DataTemplate 中。我发现如果我复制其中一个文本框并将其直接放在窗口中，我就能够获取数据。使用 Woodstock，我看到模板中 TextBoxes 的数据源是“ParentTemplate”，但对于模板外的 TextBox，它是“Local”。

所以，现在的问题是，我怎样才能获得DataTemplate*中控件的 DependencyProperties？*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2011-01-10T10:51:38.430

已经两年多了，但最近我用同样的方法在同样的问题上苦苦挣扎。

我对这个问题的解决方案是使用反射而不是使用 GetLocalValueEnumerator 来获取对象的所有 DependencyProperties，后者不能与 DataTemplates 一起工作。

代码：

```
 public static bool IsValid(DependencyObject parent)
    {
        // Validate all the bindings on the parent        
        bool valid = true;
        var infos = parent.GetType().GetFields(
                        BindingFlags.Public
                        | BindingFlags.FlattenHierarchy
                        | BindingFlags.Instance
                        | BindingFlags.Static).Where(f => f.FieldType == typeof(DependencyProperty));
        foreach (FieldInfo field in infos)
        {
            var dp = (DependencyProperty)field.GetValue(null);
            if (BindingOperations.IsDataBound(parent, dp))
            {
                Binding binding = BindingOperations.GetBinding(parent, dp);
                foreach (ValidationRule rule in binding.ValidationRules)
                {
                    ValidationResult result = rule.Validate(parent.GetValue(dp), null);
                    if (!result.IsValid)
                    {
                        BindingExpression expression = BindingOperations.GetBindingExpression(parent, dp);
                        Validation.MarkInvalid(expression, new ValidationError(rule, expression, result.ErrorContent, null));
                        valid = false;
                    }
                }
            }
        }
        // Validate all the bindings on the children
        for (int i = 0; i != VisualTreeHelper.GetChildrenCount(parent); ++i)
        {
            DependencyObject child = VisualTreeHelper.GetChild(parent, i);
            if (!IsValid(child))
            {
                valid = false;
            }
        }
        return valid;
    } 
```

此代码仅适用于对象拥有的属性，以将其扩展为可以使用此代码的附加属性：

```
 public static List<DependencyProperty> GetAttachedProperties(Object element)
    {
        List<DependencyProperty> attachedProperties = new List<DependencyProperty>();
        System.Windows.Markup.Primitives.MarkupObject markupObject = 
            System.Windows.Markup.Primitives.MarkupWriter.GetMarkupObjectFor(element);
        if (markupObject != null)
        {
            foreach (System.Windows.Markup.Primitives.MarkupProperty mp in markupObject.Properties)
            {
                if (mp.IsAttached)
                {
                    attachedProperties.Add(mp.DependencyProperty);
                }
            }
        }

        return attachedProperties;
    } 
```

# sql-server - SQL Server/Windows 集成安全对任何事情都有好处吗？

> ID：338535
> 
> 赞同：6
> 
> 时间：2008-12-03T20:11:17.237
> 
> 标签：sql-server, windows, integrated-security

Windows 用户权限和任何一组 SQL Server GRANT 之间的区别似乎是不相关的概念。通常情况下，它似乎实际上是使用数据库角色的伪登录来实现的；但这并不能有效地映射回 Windows 权限。假设单登录身份验证，为什么不使用最简单的数据库角色呢？

**编辑：**
到目前为止，我们已经获得了您不需要在应用程序中存储密码的单一好处；但这似乎更像是一个微不足道的有益结果，而不是设计目标；还有许多其他更直接的方法可以实现这一点，而无需紧密耦合两个宇宙的整个安全设备。

再次编辑：
除了单一登录和 SD 维护组的能力之外，没有其他人有任何好处可以建议，从而复制 SQL Server 中已经存在的组功能（基于相同的用户登录）？

小组问题有几个缺陷，包括假设 AD 经理同样有资格维护这两者；并且它排除了不属于 AD 的任何网络连接（从而将您锁定在 MS 技术中。）

用最佳实践的术语来说，你已经建立了系统的耦合，这通常被认为是一件坏事。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-04T19:12:40.850

其中许多已经说过或与以前的答案相似......使用AD集成：

a) 我不必担心有权访问任何给定应用程序的用户，我可以将其传递给安全人员。

b）我可以根据已经存在的组来限制表级别的访问，以及强制标准用户只能调用存储过程的能力。

c) 当开发人员离开我的小组时，我们不必更改所有数据库密码（即，如果您关心数据安全......）

d) 根据进行更改的用户进行自定义日志记录很容易。还有其他方法可以做到这一点，但我只是懒惰。

e) 与 IIS 身份验证集成。如果您已经在 Intranet 中使用 IE 和 IIS，这只会让生活变得更轻松。

注意：不使用它的原因要多得多，而且我在担任现在的职位之前从未使用过它。在这里，一切都已经在 AD 中排列好了……这只是我在数据库安全方面遇到的最简单的时间。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-03T21:08:41.253

使用集成安全性时，您的应用程序不需要了解或处理任何有关安全性的信息，此外，如果用户已经登录到您的域，他们也不需要登录到您的应用程序（假设您有模拟设置正确）。

最大的优势必须是使用 AD 组作为 SQL Server 中的登录名。通过这种方式，您可以让“帐户”组中的每个人都可以访问一组存储过程、表格等，而“经理”组中的每个人都可以访问不同的集合，所有这些都使用 AD。您的系统管理员无需进入 Management Studio 即可授予用户对您的应用程序的访问权限。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-04T16:50:27.330

我想这基本上归结为“不重新发明轮子”并利用“多眼”效应。

使用 Windows 身份验证，您可以利用 Windows 集成安全性的强大功能，如果您愿意，您可以在其上添加自己的东西。这是一个已经成熟的系统，已经过数百万次的测试，让您省去自己犯错误并在以后发现/解决错误的努力（以及您的客户的成本）。

然后很多人不断扫描 Windows 身份验证过程，检查漏洞，探索绕过它的方法等。当漏洞被公开披露并创建修复程序时，您的应用程序就获得了“免费”的安全增强.

在我目前的工作中，我们将 AD 组作为 SQL 登录名，因此我们根据 AD 组的成员资格分配 SQL 权限。所以 sys 工程组的所有成员都有一些权限，DBA 有其他，普通用户其他，主管其他等等。添加新用户或更改他们的权限是一件简单的事情，只需在 AD 完成一次，他们立即获得他们应该在数据库中获得的权限。

**帖子编辑**：

稍微扩展一下“重新发明轮子”：对于一个 AD 帐户，我可以拒绝登录到特定机器的权利 - 或者将其锁定在每台机器之外，除了一两台机器。我可以阻止他们同时登录超过 2 个工作站。我可以强制他们在一段时间后更改密码，并在其中强制执行一些最小强度。还有一些其他技巧，所有这些都提高了我系统的安全性。

对于 SQL S. 用户，您一无所有。我见过有人试图通过复杂的 SQL 作业或某种自制的守护程序来强制执行它们，在我看来，这正在重新发明已经发明的轮子。

然后你不能阻止用户 SA（或特权用户）从任何机器登录。曾经有人告诉我有一种巧妙的方法可以阻止对 SQL S 的暴力攻击，该 SQL S 的端口用于通过 Internet 进行远程登录——该站点的管理员实施了一项工作，每半小时更改一次 SA 的密码。如果是 SQL + Windows，他们可以简单地说他们希望管理员只从某些 boxen 登录，或者直接使用 Windows 身份验证，从而迫使任何人先通过 VPN。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-04T16:59:53.987

既然其他人都讨论过 Windows 身份验证的好处，我想我会玩 Devil's Advocate ......

允许帐户“Joe User”访问服务器意味着不仅可以连接您的应用程序，而且他还可以通过任何其他方式（SQL 工具、Excel、恶意软件等）连接。

使用 SQL 身份验证，您的应用程序可以作为特定用户运行，然后该应用程序可以处理数据库访问。因此，当“Joe User”运行您的应用程序时，该应用程序具有 SQL 访问权限……但“Joe User”本人没有，这意味着上述应用程序将无法隐式访问数据库。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-03T20:36:26.750

是的，当然，如果您将应用程序级别的数据访问层作为服务运行，则可以使用集成安全性与使用应用程序“服务帐户”登录到服务器的数据库进行对话......然后你没有；没有将用户密码存储在应用程序配置文件中，并且您不会在每次与数据库建立新连接时通过网络传递密码

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-12-03T21:13:06.597

集成安全性仅对 Intranet 应用程序真正有用。我见过的伪登录主要用于 Internet Web 应用程序。

无论如何，这不仅仅是不在您的应用程序中存储密码，因为希望您无论如何都会对密码进行加盐和哈希处理。还有：

1.  用户不必登录，这很重要，如果您一整天都偶尔跳入 web 应用程序，或者在有多个内部 web 应用程序的地方工作。

2.  用户管理是免费的，因为 IT 管理员只需在 Active Directory 中编辑用户。

3.  用户名和角色名在整个组织中是一致的。

4.  访问内部 Web 服务时，用户模拟是一种更安全的方法。（例如：一个互联网网站访问一个内部网 web 服务）

5.  Web 应用程序不需要对数据库做任何额外的用户授权，因为它都是无缝处理的。

6.  [编辑] 您还知道数据库对象中的用户。因此，您可以让视图只返回与其关联的行。（除非你为每个app用户创建一个新的SQLServer用户，这是不可能的，为每个app用户创建一个新的SQLServer用户也是不合理的）

集成安全性并不适合所有事情，但对于企业来说，有很多附加值。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-12-04T19:41:05.877

SQL 登录：通过线路混淆的明文密码

使用 NTLM 的 Windows 集成登录：通过网络传递的哈希

使用 Kerberos 的 Windows 集成登录：正确的安全身份验证。

如果您关心安全性，则只有一种选择。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-11-21T21:23:46.757

根据我的经验，当通过 SQL 身份验证连接时，大多数应用程序对数据库运行的查询的响应时间要快得多。消除因不断要求 AD 进行安全验证而产生的延迟。

性能明智的 SQL 身份验证 >> Windows 集成安全性。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-12-03T20:32:57.940

如果使用得当，我认为集成安全性很好。由于某些原因我无法理解，我工作过的很多公司都不太会使用 AD、SQL 权限和 IIS 安全模型。

如果您必须设计 SQL Server 权限系统，并且将其集成到 AD 中的关键要求，您可能会想出非常相似的东西。恕我直言。

我喜欢将用户分组到 AD 组中，然后在 SQL Server 中创建具有各种权限的组登录。人们不应该仅仅因为他们拥有连接到数据库的工具而拥有更多的数据访问权限。无论他们如何连接，他们都应该对数据拥有相同的权限。

根据 IIS 配置的建议，来宾用户（如匿名 Web 用户）应属于他们自己的 AD 组。让这个组只访问他们应该在数据库中访问的内容，有朝一日可以将数据从灾难中拯救出来。很难阅读源代码来确定数据是否受到保护，而调查数据库权限和安全配置要容易得多。

此外，非集成安全性很差，因为密码总是被分发，放入配置文件等。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-12-03T20:37:00.757

忽略事物的授权表/等方面，事物的登录方面非常有用，因为您的应用程序可以使用 Windows 身份验证连接到 SQL Server，这意味着

*您不必将数据库用户名和密码放在应用程序的某个文件中*

每当您将密码放入纯文本文件中时，都会存在安全风险。避免这种情况很棒。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-12-03T20:56:03.870

数据库可能具有细粒度的访问权限，每个用户都有许多不同的设置。这不仅是您只有一个用户可以访问应用程序的情况，而且是所有数据安全性。

如果我们谈论的是团队开发，那么可能会有用户组被授予对数据库的开发访问权限。该组中的每个用户都将是您的内部域的成员，并且拥有自己的密码，数据库管理员不应该管理甚至知道允许访问数据库。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-12-03T21:36:55.333

集成的安全性为用户访问 IMO 提供了更大的灵活性。例如，如果我的组织想要限制开发人员组可以访问服务器的时间，那么集成安全性是我最好的选择。

但这并不适合所有事情。

[编辑] 它也非常适合记录访问。如果我必须为大型组织中的每个新开发人员创建一个 SQL 登录名......它可能会停止发生并且登录名会被共享，那么我永远不会有能力将手指指向掉下一个傻瓜的能力桌子。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-12-04T18:18:06.403

如果您使用 sql server 身份验证，密码信息会以明文形式通过网络发送。集成安全没有这个问题。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-12-04T18:59:28.940

对于将在 AD 环境中运行的企业应用程序，使用 Windows 集成安全性绝对是正确的方法。您不希望已经在环境中通过身份验证的用户必须为您的应用管理一组单独的凭据。请注意，我们正在谈论**身份验证**......对于**授权**，您仍将使用 SQL Server 基于角色的安全性。

# asp.net - 如何在 asp.net 解决方案中整合配置文件？

> ID：338536
> 
> 赞同：1
> 
> 时间：2008-12-03T20:12:11.010
> 
> 标签：asp.net, configuration

我在大型 asp.net 解决方案中有几个项目和一个网站。在一些项目中，我有一个 app.config 文件，而在网站中，我有我的 web.config。在每个配置中，我指定了它们之间常见的几个东西，例如连接字符串。有没有办法将这些常见的项目合并到一个配置文件中，并从需要它们的各种项目中引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-03T20:14:59.350

您可以通过项目中的预/后编译步骤来执行此操作，以从解决方案目录中复制配置文件。

几年前，这是 scott hanselman 推荐的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-03T20:19:23.070

您可以在任何 .config 中引用外部配置文件（参见[http://www.peterprovost.org/blog/post/External-Config-Files-in-NET.aspx](http://www.peterprovost.org/blog/post/External-Config-Files-in-NET.aspx)）。

每个项目都有一个配置文件；这些文件以 [输出名称].config 的形式发布到 bin 目录（例如，MyCode.DLL、MyCode.DLL.config）。然后，您可以从主配置 (web.config) 中引用这些 .config 文件。

如果您发现您的配置文件没有找到正确的目的地，您可以执行 ChanChan 提到的编译后步骤。

# zend-framework - 是否可以在要使用 Zend_Config_Ini 解析的 ini 文件中指定数组

> ID：338537
> 
> 赞同：32
> 
> 时间：2008-12-03T20:13:26.703
> 
> 标签：zend-framework

有没有办法在 ini 文件中指定一维数组。

所以在我的ini中我想做

someproperty = [某物的数组]

我正在使用`Zend_Config_Ini`配置适配器（我更喜欢使用 ini 进行基本配置）。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2008-12-03T20:23:02.377

```
someproperty[] = a
someproperty[] = b
someproperty[] = c
someproperty[] = d
someproperty[] = e 
```

见：[http ://us.php.net/manual/en/function.parse-ini-file.php#75983](http://us.php.net/manual/en/function.parse-ini-file.php#75983)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-03T04:51:10.200

虽然没有记录，但这似乎也很有效：

```
foo[bar] = 5
foo[baz] = 6
hello[world] = 7 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-12-03T23:30:58.457

您可以使用分隔符来制作更多的子部分，它们可以作为另一个级别的对象 ($config->some->a) 或使用 $config->toArray() 呈现，它们可以变成多级大批。

结合上述两种技术来制作数组，分隔符如下：

```
some.a[] = a
some.a[] = b
some.b[] = c 
```

将给出您正在寻找的结果。

```
array('some' => array('a' => array(0 => 'a',
                                   1 => 'b'),
                      'b' => array(0 => 'c')
                     )); 
```

# c# - HashSet 有什么特别之处 在.NET 3.5 中？

> ID：338540
> 
> 赞同：2
> 
> 时间：2008-12-03T20:14:14.780
> 
> 标签：c#, .net, .net-3.5, code-snippets

这是一个有趣的谜题。

我下载了 Snippet Compiler 来尝试一些东西，并想编写以下代码：

```
using System;
using System.Collections.Generic;

public class MyClass
{
    public static void RunSnippet()
    {
        HashSet<int> h = new HashSet<int>();
    }
} 
```

但是上面的代码不能编译。我得到：

> “找不到类型或命名空间名称‘HashSet’（您是否缺少 using 指令或程序集引用？）”

显然我不是。它似乎找不到 HashSet，但它在 Systems.Collections.Generic 命名空间中找到了其他类型（例如 List、SortedDictionary）。

对此有何解释？据推测，片段编译器只是在幕后使用标准框架编译器......

我很想知道为什么这不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-03T20:17:00.220

是你的参考用途

命名空间：System.Collections.Generic

程序集：System.Core（在 System.Core.dll 中）

3.5版？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-03T20:15:57.163

检查 System.Core.dll Snippet Compiler 使用的版本。

# asp.net - 在属性窗口中显示可用的强类型资源类

> ID：338541
> 
> 赞同：2
> 
> 时间：2008-12-03T20:14:21.113
> 
> 标签：asp.net, custom-server-controls, design-time

作为我第一次尝试创建自定义控件，我正在扩展 Gridview Web 控件。

作为扩展的一部分，我将网格列标题的本地化封装在控件中。除其他外，我公开了几个属性来启用此功能：

bool AutoLocalizeColumnHeaders - 启用该功能

string HeaderResourceFile - 标识一个强类型资源类，从中获取标题文本

我正在重写 OnRowDataBound 处理程序并使用反射获取适当的 ResourceManager 来填充标题文本。这一切都很好，但我想在属性窗口中显示可用的强类型资源类列表供用户选择，而不是他们必须手动输入名称。

我创建了一个 TypeConverter 来显示一个下拉列表，在该下拉列表中显示可用的类，但不知道如何获取要显示的可用类名列表？

我已经尝试了很长一段时间没有成功，并且正处于失去理智的地步。我假设必须有某种方法可以使用反射来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-05T19:41:30.087

我想我现在已经找到了解决方案。

从 Page_Load 事件中运行以下内容给了我 Resource 类名称：

```
String[] resourceClassNames = (from type in assembly.GetTypes()
   where type.IsClass && type.Namespace.Equals("Resources")
   select type.Name).ToArray(); 
```

所以我想我可以从 TypeConverter 的 GetResourceFileNames(ITypeDescriptorContext context) 函数内部做类似的事情，使用 context 参数来获取正确的程序集。不幸的是，我似乎只能获得自定义控件的程序集或 System.Web 程序集。

因此，我创建了一个 UITypeEditor，它有一个 IServiceProvider 传递到 EditValue 例程中。由此我能够创建一个 ITypeDiscoveryService 实例，然后我用它从正确的程序集中获取所有类型：

```
public override object EditValue(ITypeDescriptorContext context, 
                                 IServiceProvider provider, object value)
{
    // Check if all the expected parameters are here
    if (context == null || context.Instance == null || provider == null)
    {
        // returning with the received value
        return base.EditValue(context, provider, value);
    }

    // Create the Discovery Service which will find all of the available classes
    ITypeDiscoveryService discoveryService = (ITypeDiscoveryService)provider.GetService(typeof(ITypeDiscoveryService));
    // This service will handle the DropDown functionality in the Property Grid
    _wfes = provider.GetService(typeof(IWindowsFormsEditorService)) as IWindowsFormsEditorService;

    // Create the DropDown control for displaying in the Properties Grid
    System.Windows.Forms.ListBox selectionControl = new System.Windows.Forms.ListBox();
    // Attach an eventhandler to close the list after an item has been selected
    selectionControl.SelectedIndexChanged += new EventHandler(selectionControl_SelectedIndexChanged);
    // Get all of the available types
    ICollection colTypes = discoveryService.GetTypes(typeof(object), true);
    // Enumerate the types and add the strongly typed
    // resource class names to the selectionControl
    foreach (Type t in colTypes)
    {
        if (t.IsClass && t.Namespace.Equals("Resources"))
        {
            selectionControl.Items.Add(t.Name);
        }
    }
    if (selectionControl.Items.Count == 0)
    {
        selectionControl.Items.Add("No Resources found");
    }
    // Display the UI editor combo
    _wfes.DropDownControl(selectionControl);

    // Return the new property value from the UI editor combo
    if (selectionControl.SelectedItem != null)
    {
        return selectionControl.SelectedItem.ToString();
    }
    else
    {
        return base.EditValue(context, provider, value);
    }
}

void selectionControl_SelectedIndexChanged(object sender, EventArgs e)
{
    _wfes.CloseDropDown();
} 
```

这似乎运作良好，尽管我希望有一种更时尚的方式来获取使用 LinQ 所需的类型，但我才刚刚开始研究 LinQ，并且在查询集合而不是查询时似乎无法获得正确的语法与前面的示例一样的数组。

如果有人可以建议可以做到这一点的 LinQ 语法，或者确实是完成整个事情的更好方法，那么它将是最受欢迎的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-07T14:56:54.637

在我之前发布的解决方案中，我想找到一种使用 LinQ 执行以下操作的方法：

```
 // Get all of the available types
    System.Collections.ICollection colTypes = discoveryService.GetTypes(typeof(object), true);
    // Enumerate the types and add the strongly typed resource class names to the selectionControl
    foreach (Type t in colTypes)
    {
        if (t.IsClass && t.Namespace.Equals("Resources"))
        {
            selectionControl.Items.Add(t.Name);
        }
    } 
```

这似乎做生意：

```
 // Get all of the available class names from the Resources namespace
    var resourceClassNames = from Type t in discoveryService.GetTypes(typeof(object), true)
                        where t.IsClass && t.Namespace.Equals("Resources")
                        select t.Name;

    selectionControl.Items.AddRange(resourceClassNames.ToArray()); 
```

它看起来确实干净多了，我猜它的性能会更好，因为它没有循环遍历所有可用的类型，检查符合我的代码标准的类型；虽然我认为 LinQ 会为我做这件事，尽管是以更有效的方式？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-05T18:25:31.597

有趣的想法。我想您的属性当前设置为字符串？我想知道您是否将您的属性设置为枚举，然后使用强类型资源类创建一个枚举，它是否足够聪明以在属性窗口中显示它们。它足够聪明，可以在后面的代码中显示它，看不出为什么它无法在属性窗口中加载它。

# .net - 如何在 WPF 和 WinForms 中设置 Identity 和 Principle 对象的类型

> ID：338556
> 
> 赞同：0
> 
> 时间：2008-12-03T20:19:47.517
> 
> 标签：.net, wpf, winforms

在 ASP.Net 中，当您使用母版页时，您可以为页面提供“MasterPage 类型”预处理器命令，如下所示：

```
<%@ MasterType VirtualPath="~/MasterPage.master" %> 
```

这用于让您访问在母版页的代码隐藏中定义的方法和属性。默认情况下，当您使用：

```
Page.MasterPage 
```

它返回基本的 MasterPage 类。如果您定义了**MasterType**，那么它将返回它作为您定义的母版页的类型 [而不是执行类似的操作：ctype(Page.MasterPage, MyMasterPage)]

我的问题是，如何在我的 WPF 应用程序中 为**Identity**和**Principle对象做类似的事情。**

基本上，我有自定义的 Identity 和 Principle 对象（它们收集了一些额外的数据字段），并且我不想每次我想访问这些额外的字段时都必须从公开的界面中显式地转换它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-04T01:08:48.930

如果您希望在 XAML 代码隐藏中使用它，您可以从 WPF Window 类继承并为 Principal 和 Identity 添加两个属性。这些属性可能是您的自定义主体和身份的类型。然后只需从该类继承所有 WPF Windows。

```
public class AppWindow : Window
{
    public MyPrincipal Principal
    {
        get { return (MyPrincipal)Thread.CurrentPrincipal; }
    }

    public MyIdentity Identity
    {
        get { return (MyIdentity)Thread.CurrentPrincipal.Identity; }
    }
} 
```

如果您想更广泛地访问这些项目，您可以创建一个具有静态属性的简单对象来做同样的事情。

# gcc - 从源代码构建 Gnuarm 工具链

> ID：338559
> 
> 赞同：1
> 
> 时间：2008-12-03T20:20:27.280
> 
> 标签：gcc, arm, gnu-toolchain

我想从 gnuarm.org 从源代码构建一个工具链。我不想使用二进制版本，因为我正在运行 x64 linux。你能指点我一些教程吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-05T11:30:33.027

以下是用于构建二进制包的默认命令/参数。下载源代码，解压缩并发布它们：

1.  cd [binutils-build]
2.  [binutils-source]/configure --target=arm-elf --prefix=[toolchain-prefix] --enable-interwork --enable-multilib --with-float=soft
3.  全部安装
4.  export PATH="$PATH:[工具链前缀]/bin"
5.  cd [gcc-build]
6.  [gcc-source]/configure --target=arm-elf --prefix=[toolchain-prefix] --enable-interwork --enable-multilib --with-float=soft --enable-languages="c,c++ " --with-newlib --with-headers=[newlib-source]/newlib/libc/include
7.  让所有 gcc 安装 gcc
8.  cd [newlib-build]
9.  [newlib-source]/configure --target=arm-elf --prefix=[toolchain-prefix] --enable-interwork --enable-multilib --with-float=soft
    10.  全部安装
    11.  cd [gcc-build]
    12.  全部安装
    13.  cd [gdb-build]
    14.  [gdb-source]/configure --target=arm-elf --prefix=[toolchain-prefix] --enable-interwork --enable-multilib --with-float=soft
    15.  全部安装

第 11-12 行似乎没有效果。不建议使用 gcc < 4.x，构建 binutils 可能会出现以下错误：

../../binutils-2.19/gas/config/tc-arm.c：在函数's_arm_unwind_save_mmxwr'中：../../binutils-2.19/gas/config/tc-arm.c:3459：错误：格式不是字符串文字，也没有格式参数

解决方案很简单，只需将“%s”作为第一个参数添加到有错误的行中，正如此处的补丁所建议的那样：http: [//www.mail-archive.com/bug-binutils@gnu.org/msg06475.html](http://www.mail-archive.com/bug-binutils@gnu.org/msg06475.html)

我无法建立洞察力，但我想可以用其他东西来调试它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-05T15:35:06.807

您需要安装*libx11-dev*来编译 Insight。

```
sudo apt-get install libx11-dev 
```

除此之外，您自己的答案也很好。

编辑：哦，你可能也想念 termcap，在这里得到它：[GNU Termcap](http://ftp://ftp.gnu.org/gnu/termcap/termcap-1.3.1.tar.gz)

Edit2：Configure 似乎对忽略返回值“ *'xxx'，使用属性 warn_unused_result* ”声明很严格，因此您可能需要修改选项或大约 12 个实例来捕获返回值以获得干净的构建。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2008-12-03T21:18:41.530

1.  下载“文件”下可用的资源
2.  打开包装
3.  转到每个解压缩的目录并键入：

    ./configure --help

    获取可用选项，然后运行

    ./configure [选项]

    制作

    检查

    进行安装

# visual-studio - 如何从现有解决方案 (.sln) 引导 NAnt 环境

> ID：338561
> 
> 赞同：2
> 
> 时间：2008-12-03T20:20:54.033
> 
> 标签：visual-studio, nant, auto-generate

我有一个混合了 .NET 和 C++ 项目的 Visual Studio 2005 解决方案 (.sln)。生成 .build 文件的最佳方法是什么，我需要使用 NAnt 运行我的构建过程。我是使用 NAnt 的新手，我不确定如何设置它。每次在任何项目中都有新的源文件时，我是否必须手动更新 .build 文件？是否有工具可以从 .sln 和 studio 项目文件生成 NAnt 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-03T20:36:03.973

我不知道从 sln 生成 .build 文件的方法。在[http://nant.sourceforge.net](http://nant.sourceforge.net)应该有不错的 .build 文件示例。

话虽如此，有两种方法可以从 NAnt 构建 .sln 文件。

*   签出 nant.sourceforge.net 或 nant-contrib 以获得内置或扩展任务来执行此操作
*   使用“exec”任务来编译 msbuild.exe 来构建 sln。

msbuild.exe 具有对 sln 文件的本机支持。您可以从命令行构建一个 sln 文件，如下所示：

```
msbuild.exe /p:Configuration=Debug /t:rebuild MySolution.sln 
```

msbuild.exe 可以在您的 .NET Framework 目录中找到（例如 C:\WINDOWS\Microsoft.NET\Framework\vX.XX.XXXX）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-12T22:16:53.523

使用 nant，您将不得不使用 EXEC 命令将解决方案文件发送到 msbuild。

其他人也遇到了同样的问题。

# javascript - Safari 和 Javascript - 同源策略？

> ID：338563
> 
> 赞同：0
> 
> 时间：2008-12-03T20:21:08.463
> 
> 标签：javascript, security, safari

我有一个 Javascript 可以更改链接中的主机以匹配当前的开发/测试服务器。

这是一个例子：

```
var ndomain = document.domain;
var mydomain = 'www.foo.com';
var alink = document.getElementsByTagName('a');
for (var i = 0; i < alink.length; i++) {
    if (alink[i].href.length > 0){
        if (alink[i].host.substr(0, mydomain.length) == mydomain){
            alink[i].host = ndomain;
        }
    }
} 
```

*[这会将对http://www.foo.com/page.html](http://www.foo.com/page.html)*的引用更改为*[http://level1.test.foo.com/page.html](http://level1.test.foo.com/page.html)*。

这适用于我测试过的所有浏览器，除了 Safari（Mac 或 Win）。我已经搜索并搜索了有关为什么以及我想出的最接近的原因是“同源政策”的信息。

根据我对同源策略的理解，这应该可行，因为一切都在*foo.com*域下。Safari 会更严格，因为我要去一个二级子域（例如*level1.test*）？

有人可以建议为什么这个过程在 Safari 中不起作用，或者我如何让它在 Safari 中起作用？

蒂亚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-03T22:19:38.600

第 5 行出现语法错误（3 个左括号，只有 2 个右括号）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-11T15:22:35.660

这应该与同源策略无关。

在谷歌浏览器中也可以看到同样的情况。两者都使用 WebKit，所以也许 WebKit DOM 接口是问题的关键。

在 Chrome 中运行问题中的 JS 不会更改链接中的主机。JS 调试器和 JS 控制台都不会报告任何问题。

尝试更改 anchor.host 属性会导致：

*   没有错误要报告
*   anchor.host 属性没有变化

这表明 anchor.host 属性出于某种原因是只读的。

anchor.href 属性看起来是可写的，所以这可能是你最好的选择。以下代码*将*起作用：

```
var ndomain = document.domain;
var mydomain = 'www.foo.com';
var alink = document.getElementsByTagName('a');
for (var i = 0; i < alink.length; i++) {
    if (alink[i].href.length > 0){
        if (alink[i].host.substr(0, mydomain.length) == mydomain){
            var currentHref = alink[i].getAttribute('href');
            var newHref = '';

            // Generate newHref based on currentHref and setting host as required

            alink[i].setAttribute('href', newHref);
        }
    }
} 
```

# asp.net - 将 GridView 控件中的 asp:ButtonField 转换为 asp:TemplateField

> ID：338567
> 
> 赞同：1
> 
> 时间：2008-12-03T20:22:25.170
> 
> 标签：asp.net, gridview, linkbutton, templatefield

我目前有一个网格视图，其中有一个 asp:ButtonField 作为列之一。命令的事件处理程序从命令参数中提取 gridview 的行 ID，并使用它来执行一些逻辑。我现在需要切换到使用此列的模板字段，并且想做这样的事情：

```
<asp:TemplateField HeaderText="Action">
    <ItemStyle HorizontalAlign="Center" />
        <ItemTemplate>
            <asp:LinkButton CommandName="myaction" CommandArgument="<%#Eval("id")%>" Text="do action" runat="server"/>
        </ItemTemplate>
 </asp:TemplateField> 
```

我的问题是 CommandArgument 属性 - 我不知道如何让它成为 GridView 中的行 ID。Eval("id") 不起作用 - 有谁知道行 id 属性的名称是什么？或者更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-03T20:37:47.277

在 Microsoft 的网站上查看此文档。

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowcommand.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowcommand.aspx)

您不需要绑定行 ID。命令参数用于事件参数，而不是行参数......如果这有意义的话。

我想我想说的是行 id 是隐式的。当您访问事件 CommandArgs 时，它应该针对您尝试引发的事件的特定内容。

即，如果您想分页，您将在 CommandArgument 中有“下一个”、“上一个”、“第一个”、“最后一个”或页码。

假设您有一个“删除”按钮或 ImageButton。它被用户点击；在回发时收到删除事件，并从行向上冒泡到网格，整个行对象作为参数传递。然后网格删除该行，就好像它是控件集合中的单个控件一样 - 因为它就是这样，表是表行的集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-07-07T12:46:37.720

```
CommandArgument="<%# CType(Container, GridViewRow).RowIndex %>" 
```

# java - 任何关于java中公钥加密的教程？

> ID：338578
> 
> 赞同：16
> 
> 时间：2008-12-03T20:28:18.170
> 
> 标签：java, public-key, encryption-asymmetric

我已经能够找到关于对称加密和散列的信息，但是我在查找关于 java 的任何类型的公钥加密的大量信息时遇到了很多麻烦。我想做的是制作一个非常简单的概念证明程序，它接受一个字符串（或者我想是一个文件），用公钥对其进行加密，然后用私钥对其进行解密。

任何教程链接或示例将不胜感激。我只想制作一些东西来演示如何在 Java 中使用公钥加密。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-12-03T20:53:16.997

通常，您使用公钥加密来加密对称密钥，部分原因是公钥加密非常慢。通常，您会向收件人发送以下内容，以便他们可以解密您的消息：

1.  对称密钥，用接收者的公钥加密。
2.  所用算法的参数，通常是对称密码的初始化向量。
3.  使用的加密算法的标识符。
4.  密文——实际消息，在对称密码下加密。

我发现[JCE 文档](http://java.sun.com/j2se/1.5.0/docs/guide/security/jce/JCERefGuide.html)中的示例代码足以让事情正常进行。

捆绑所有这些信息的标准格式是加密消息语法或 CMS，S/MIME 在电子邮件应用程序中使用它。我推荐使用[Bouncy Castle 的图书馆](http://www.bouncycastle.org/)；它们是可靠的，相当简单的，并且积极维护。参考文档有点弱，但它们确实提供了代码示例。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-12-03T20:36:56.967

网上有很多关于这方面的资源。基本上它围绕着 KeyPairGenerator 类。

有关示例程序，请参见[http://www.informit.com/articles/article.aspx?p=170967&seqNum=4 。](http://www.informit.com/articles/article.aspx?p=170967&seqNum=4)

# encryption - 简单套接字通信上的加密常用什么

> ID：338579
> 
> 赞同：0
> 
> 时间：2008-12-03T20:28:53.317
> 
> 标签：encryption, networking, sockets

我有 X 接口连接到通过公共网络进行通信的 Y 台计算机（想想大学和图书馆）。我正在研究用于加密我们之间传输的数据的通用行业标准技术。

我知道有 SSL，但我宁愿找到一种简单的技术，即“购买一次，安装无限”（试图降低我的可变成本）。我曾考虑过带有 Indy Sockets 的 OpenSSL，但我想对其他技术保持开放的心态。

我想找到一个解决方案，我可以向正在与之交流的供应商推销。该解决方案需要便宜的购买、安装和安全性。

外面有什么？正在使用什么？在代码中实现这些解决方案有多难？人们目前使用什么来加密简单的 Socket 到 Socket 通信？

**编辑：** 我目前使用 RAD Studio 2009。但是，我的供应商可以使用任何东西，从 Java、VS2008 到 4D 等其他东西。无论我发现什么，我都需要能够向所有人推销。我想加密整个流。但是，我担心我的供应商使用的一些旧技术可能无法使用 SSL。我也发布这个以确保我没有遗漏任何明显[的东西（比如 Microsoft Message Queue](http://www.microsoft.com/windowsserver2003/technologies/msmq/default.mspx)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-03T20:32:27.193

您似乎已经用 OpenSSL 回答了自己。

你在为什么平台编码？您使用什么语言？你想加密整个流吗？还是只是某些数据？

听起来您正在寻找比 OpenSSL“开箱即用”更容易使用的东西，不是吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-03T20:41:43.913

将 SSL 与免费证书一起使用——要么从[StartCom 之类的地方获取它们，要么颁发您自己的](https://stackoverflow.com/questions/292732/self-signed-ssl-cert-or-ca#292754). SSL 是标准，它被广泛使用，在大多数平台上都受支持，并且在管理得当时可以非常安全。

# crystal-reports - Crystal Reports - 水平页码

> ID：338583
> 
> 赞同：4
> 
> 时间：2008-12-03T20:29:51.037
> 
> 标签：crystal-reports

使用 Crystal Reports Developer XI

我有一个交叉表报告。交叉表可以水平跨越多个页面。对于 10 页宽和 3 页长的报告，我将页码显示为 '1-1 of 3' 到 '3-10 of 3' 但我希望能够将它们显示为 '1 of 30' 到 ' 30 的 30'。

不幸的是，Page N of M 字段仅显示垂直页码。在这种情况下，添加第 N 页，共 M 字段会在前十个水平页面中为我提供“第 1 页，共 3 页”，然后在接下来的 10 页中添加“第 2 页，共 3 页”，在最后 10 页中添加“第 3 页，共 3 页”页。

不幸的是，无论是否选择了“在水平页面上重复”属性，M 的第 N 页字段都会显示相同的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-12-29T21:27:30.217

在您的字段资源管理器中，转到**特殊字段-> 水平页码**并插入它。我自己从未使用过它，但它似乎是您需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-03T20:35:07.733

有一个名为“Page N of M”的特殊字段。将其拖到您的页面上，这应该会为您提供您所追求的编号方案。

**编辑添加：** 对不起，我阅读了您的帖子，但没有“阅读”您的帖子。问题是这些不是真正的页面，而是页面或虚拟页面的延续。如果您要使用 Page N of M 并在您的综合浏览量上右键单击它并转到格式编辑器会怎样。尝试从“通用”选项卡中选择“在水平页面上重复”，然后查看从中获得的行为类型。

否则，我不知道是否可以没有复杂的公式。

# iphone - NSString 的 initWithData:encoding: 返回类型问题

> ID：338598
> 
> 赞同：3
> 
> 时间：2008-12-03T20:35:39.933
> 
> 标签：iphone, objective-c, cocoa, cocoa-touch

我有几行琐碎的代码，如下所示：

```
NSData *dataReply;
NSString *stringReply;
dataReply = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
stringReply = [[NSString alloc] initWithData:dataReply encoding:NSUTF8StringEncoding]; 
```

这里的问题是， initWithData:encoding: 没有像文档声称的那样返回 NSString 的实例。我也尝试过使用 (NSString *) 进行显式转换，但运气不佳。当我尝试将 stringReply 传递给我用类型不匹配编写的方法时，这会给我编译器警告。鉴于我将所有警告都视为错误，我真的很想了解 stringReply 返回的内容以及如何将其强制为 NSString 类型。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-03T23:27:30.133

当您尝试在另一个位置使用 stringReply 时，编译器的“类型不匹配”与从 initWithData:encoding: 返回的对象无关，也与随后使用 stringReply 的位置有关。

例如，如果您在执行此操作时遇到类型不匹配：

```
SomeClass *someObject;
NSString *stringReply;
stringReply = [[NSString alloc] initWithData:dataReply encoding:NSUTF8StringEncoding];
[someObject methodWithString:stringReply]; 
```

问题*不*在于 initWithData:encoding: 返回错误的类型，而是以下之一：

*   methodWithString: 实际上并不需要一个 NSString*
*   methodWithString: 在使用之前没有正确声明/包含

如果 SomeClass 在头文件中前向声明（如 @class SomeClass）但随后从未包含在实现文件中，则通常会发生第二个选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-03T20:55:51.873

不太确定发生了什么，我运行了下面的代码并返回了一个 NSString 。用 nil 切换数据也可以正常工作。

```
const char* os = "12345";
NSString* str = [[NSString alloc] initWithData:[NSData dataWithBytes:os length:5 ] encoding:NSUTF8StringEncoding];  
NSLog(@"%@", str); 
```

如果你调试它，你能知道正在创建什么类型的对象吗？

如果您发布编译器警告可能会有所帮助。

# iis - 如何在公共服务器上运行 Trac？

> ID：338601
> 
> 赞同：0
> 
> 时间：2008-12-03T20:36:29.433
> 
> 标签：iis, trac, mod-python, isapi-redirect

由于 TFS 对于我们的项目来说太大了，我们想使用 subversion 和 Trac。宿主环境是 Windows 2003 和 IIS。

有一些选项：

1.  运行跟踪
2.  使用 mod_python 运行 Apache
3.  [使用AJP 协议](http://tomcat.apache.org/connectors-doc/ajp/ajpv13a.html)和 isapi-redirector运行 tracd

我们倾向于将 Trac 与 IIS 和 isapi-redirector 集成。你有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-03T20:44:53.660

您在问两个问题，我该如何运行它以及我会提出什么建议。

1.  我用 Apache 运行它。
2.  我建议这样做（不足为奇）。

我觉得使用 Web 服务器运行会给你更多的灵活性，而使用 Apache 运行会给你更多的可移植性。

另一方面，运行它的*事实*比你*如何*运行更重要。

干杯，格伦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-03T20:48:47.393

我们为 Trac 和 Svn (WebDAV) 运行 Apache 在端口 443 (https) 上监听，为公共网页运行 IIS 在端口 80 (http) 上监听。为 Trac 和 Svn 设置 Apache 非常简单并且有据可查。

# oracle - 将 int64 (SQL_BIGINT) 绑定为查询参数会导致在 Oracle 10g ODBC 中执行期间出错

> ID：338609
> 
> 赞同：4
> 
> 时间：2008-12-03T20:39:09.740
> 
> 标签：oracle, odbc, oracle10g

我在 Oracle 10g 上使用 ODBC 3.0 插入表失败，我不知道为什么。数据库在 Windows Server 2003 上。客户端在 Windows XP 上。

桌子：

```
CREATE TABLE test ( testcol NUMBER(20,0) NULL ); 
```

ODBC 调用：

```
SQLAllocHandle(SQL_HANDLE_STMT) = SQL_SUCCESS
SQLPrepare(INSERT INTO test (testcol) VALUES (?);) = SQL_SUCCESS

SQLINTEGER nStrLen = 0;
__int64 nInt64 = 99;
SQLBindParameter(hStatement, 1, SQL_PARAM_INPUT, 
    SQL_C_SBIGINT, SQL_BIGINT, 20, 0, &nInt64, 0, &nStrLen) = SQL_SUCCESS

SQLExecute() = SQL_ERROR
SQLGetDiagRec(1) = SQL_NO_DATA 
```

`SQLBindParameter`成功但随后`SQLExecute`失败。没有诊断消息。

我不得不求助于将 int64 写入字符串并将其绑定为字符串。这是绑定 int64 的唯一方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-14T23:16:15.390

[附录 G.1](http://download.oracle.com/docs/cd/B19306_01/server.102/b15658/app_odbc.htm)中的 Oracle 10g 管理指南说 Oracle 10g ODBC 驱动程序不**支持**或。`SQL_C_SBIGINT``SQL_C_UBIGINT`

像您一样，我们也发现在运行时`SQLExecute()`失败。并且调用`SQLGetDiagRec()`什么也不返回，而不是像`"Oracle 10g does not support SQL_C_SBIGINT"`. 呜呜……

无论如何，附录 G.1 并没有说明您***应该***如何将数据绑定到一个表中，该表的列定义为`NUMBER(20)`. 所以我们都必须猜测，并使用任何（未记录的）技术。如果附录 G.1 就“最佳”方式给出某种提示或建议，那就太好了。

如果将数字转换为字符串然后绑定对您有用，请坚持下去。

# javascript - 只有一个普通的 html 和 js 文件，我怎样才能强制一个指向 mp3 的链接下载而不是播放？

> ID：338616
> 
> 赞同：4
> 
> 时间：2008-12-03T20:41:15.880
> 
> 标签：javascript, html, mp3, media

我有一个指向媒体文件（如 mp3）的链接，我希望在用户单击它时下载它，而不是仅仅播放文件。我想到的页面只是一个普通的静态 html 页面。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-03T20:49:45.177

为了做到这一点，您需要`Content-disposition: attachment; filename=fname.ext`在发送文件之前以您喜欢的语言发送带有标题的标题。

在不了解诸如您对服务器配置的语言和控制权等细节的情况下，我无法为您提供更详细的说明。但是，您不能仅使用 html 和 javascript 来做到这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-03T20:54:08.600

远是我知道那是不可能的。如果无法设置适当的标题，浏览器将决定如何处理文件，通常是播放，您将不得不要求用户按下，右键单击+另存为。如果您可以访问服务器，则使用 .htacces 在 php 或 apache 中设置标头非常简单

```
<FilesMatch "\.(?i:mp3)$">
  ForceType 音频/mpeg
  标头集 Content-Disposition 附件
</文件匹配>

```

或者浏览器不会识别它是 MP3，甚至不会尝试打开它：

```
<FilesMatch "\.(?i:mp3)$">
  ForceType 应用程序/八位字节流
  标头集 Content-Disposition 附件
</文件匹配>

```

php头设置见： http: [//nl.php.net/header](http://nl.php.net/header)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-03T20:54:19.833

同意 smazurov 的观点，尽管内容处置可能会为您完成，但最终您无法控制媒体的呈现方式。这是有[问题的标头上的 RFC](http://www.ietf.org/rfc/rfc2183.txt)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-03T20:54:29.397

客户端 JavaScript 无法实现这一点（最近的功能是`document.execCommand('SaveAs')`，它只是保存了整个 html 页面）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-22T04:36:24.597

如果您希望他们被迫从链接下载它，则将`download`属性添加到链接元素（文件名可选）：

```
<a href="file.mp3" download="Song_Name.mp3">Download</a> 
```

如果您希望用户通过任何方式访问 URL 时都被迫下载文件，那么您就不走运了。仅使用 HTML 和 JS 是不可能的。正如其他人所说，您必须有权访问服务器才能在文件加载到浏览器之前影响文件的标题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-22T04:30:28.890

```
<a href="linkto.mp3" download>Download MP3 File </a> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2008-12-03T21:01:18.727

虽然这不是解决方案，但请将文件扩展名更改为 MP3 以外的任何内容。并且，要求用户在下载后重命名它。

# ftp - ftp传输rsync方式

> ID：338621
> 
> 赞同：18
> 
> 时间：2008-12-03T20:44:50.990
> 
> 标签：ftp, rsync

我经常从 ftp 服务器下载一个日志文件（顺便说一句，我无法控制它），每次下载整个文件似乎都相当冗长。

所以我正在寻找一个程序（linux-ish）或 Perl 模块，它以某种方式结合了 ftp 和 rsync，并且只“更新”文件。

日志文件不断增长。

周围有这样的吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-03-09T18:48:49.750

```
安装 curlftpfs（如果在 Windows 上，使用 cygwin）

# 创建本地挂载路径
mkdir -p /mnt/myftp

# 使用 curlftpfs 挂载目标 ftp 站点
curlftpfs -o allow_other ftp://myusername:mypassword@ftp.mydomain.com /mnt/myftp

# rsync 使用附加选项就地同步
# 使用长超时值作为第一个长阶段
#（就地比较）需要一段时间
rsync -rzvvv --inplace --append --progress --stats --timeout=7200 /mnt/myftp/path/to/source/file.log /path/to/local/destination/file.log

# 当你需要卸载 ftp 站点时
sudo 卸载 myftp

# 您也可以通过附加以下行从 /etc/fstab 挂载
# curlftpfs#myusername:mypassword@ftp.mydomain.com /mnt/myftp fuse allow_other,rw,user,noauto 0 0

＃ 参考：
# http://linux.byexamples.com/archives/344/mounting-ftp-host-to-local-directory-on-top-of-fuse/
# http://lists.samba.org/archive/rsync/2007-May/017762.html

```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-03T21:11:03.653

“恢复下载”不适用于您的情况吗？

假装您的传输上次中止并从您停止的地方重新开始下载

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-27T18:37:08.677

如[How to use rsync over FTP](https://serverfault.com/q/24622/15186)中所述，[lftp](http://lftp.yar.ru/)有一个镜像模式，这使得同步比 curlftpfs+rsync 更有效率

# apache - 为什么 IIS 不支持分块传输编码？

> ID：338624
> 
> 赞同：7
> 
> 时间：2008-12-03T20:45:42.033
> 
> 标签：apache, http, iis, chunked-encoding

我正在与 IIS Web 服务器建立 HTTP 连接，并发送一个 POST 请求，其中包含使用 Transfer-Encoding: chunked 编码的数据。当我这样做时，IIS 只是关闭连接，没有错误消息或状态代码。根据[HTTP 1.1 规范](https://www.rfc-editor.org/rfc/rfc2616#section-3.6.1)，

> 所有 HTTP/1.1 应用程序必须能够接收和解码“分块”传输编码

所以我不明白为什么它（a）不处理该编码和（b）它不发回状态码。如果我将请求更改为发送 Content-Length 而不是 Transfer-Encoding，则查询会成功，但这并不总是可能的。

当我对 Apache 尝试相同的操作时，我得到一个“需要 411 长度”状态和一条消息说“禁止分块传输编码”。

为什么这些服务器不支持这种编码？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-07-30T19:26:30.560

看看你的客户。

IIS 和 Apache 都支持使用分块传输编码的 POST 请求。[您可以使用curl 实用程序](http://curl.haxx.se/)验证这一点：

```
curl <upload-url> --form "upfile=@<local_file>" --header "Transfer-Encoding: chunked" 
```

[使用Wireshark](http://www.wireshark.org/)验证传输是否分块

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-03T21:13:32.867

我的理解是分块编码只能用于 HTTP 响应。分块的请求正文将具有与 1.0 服务器不兼容的属性，并且在任何情况下，用户代理都无法知道服务器是 1.0 服务器，直到它已经发送了请求。

但我同意从文档中不清楚。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-12-21T19:55:03.713

它是双向的。尝试将图像 2MB++ 上传到 photobucket 并记录它。他们的上传者上传分块到他们的 apache 服务器。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-12-03T21:22:11.103

我唯一的猜测是他们出于安全考虑没有实施它。在一个简单的解决方案中，很容易通过启动多个永不结束的分块传输来设置 DOS 攻击。一个可以解释 DOS 攻击的复杂解决方案可能不值得付出努力。

当然，我不能代表 Apache 或 IIS，您可以直接联系 Apache 团队：[http ://httpd.apache.org/bug_report.html](http://httpd.apache.org/bug_report.html)

我同意 MarkR 的观点，我一直认为分块编码只能用作响应，但文档确实使它听起来像是可以在请求或响应中使用。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-07-30T15:03:59.277

这个命令是来救我的！

> C:\Windows\System32\Inetsrv\Appcmd.exe 设置配置 -section:httpCompression
> -[name='gzip'].staticCompressionLevel:9 -[name='gzip'].dynamicCompressionLevel:4

拯救了我的一天......希望它可以帮助像我这样的人！

# apache-flex - Flex 分析 - [enterFrameEvent] 在做什么？

> ID：338626
> 
> 赞同：14
> 
> 时间：2008-12-03T20:45:55.013
> 
> 标签：apache-flex, profiling, enterframeevent

我的任务是发现（并可能修复）交付给我们的 Flex 应用程序的一些严重性能问题。当应用程序只是空闲并且不应该做任何事情时，它会持续占用 50% 到 100% 的 CPU。

我的第一步是运行 FlexBuilder 附带的分析器。我希望找到一些占用大部分时间的方法，告诉我瓶颈在哪里。然而，我得到了一些意想不到的东西。

排名前 4 位的方法是：

*   [enterFrameEvent] - 84% 累积，32% 自我时间
*   [reap] - 20% 累积和自我时间
*   [tincan] - 8% 累计和自拍时间
*   global.isNaN - 4% 累积时间和自时间

所有其他方法的累积时间和自身时间都小于 1%。

根据我在网上找到的内容，[括号中的方法] 是分析器在没有实际 Flex 方法要显示时列出的内容。我看到有人声称 [tincan] 是 RTMP 请求的处理，我假设 [reap] 是垃圾收集器。

有谁知道 [enterFrameEvent] 实际上在做什么？我认为它本质上是事件循环的“主要”功能，因此预计会有很高的累积时间。但是为什么自拍时间这么高呢？究竟发生了什么？我没想到播放器内部会占用这么多时间，尤其是因为应用程序中实际上没有发生任何事情（并且没有进行 UI 更新）。

有什么好方法可以深入了解正在发生的事情吗？我*知道*发生了一些不应该发生的事情（看起来一定有某种繁忙的等待或其他失控的循环），但是分析器没有给我任何我期望的结果。我的下一步将是开始在各个地方添加调试跟踪语句，以尝试跟踪实际发生的情况，但我觉得必须有更好的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-08T23:03:38.727

在 flex 项目中的 enterframe 处理程序上通常会发生一些事情。需要注意的一些事项

1.  手动 < mycomponent enterFrame="" > 事件响应或通过 component.addEventListener(Event.ENTER_FRAME, myfunc) 手动添加的事件响应

2.  callLater() 调用，这些在框架中发生很多，并且可能是跳下任意数量的兔子洞的副产品，开发人员倾向于使用这些来解决与时间相关的问题，有时糟糕的代码会导致这些继续调用每一帧。例如，在最新的 flex sdk 构建中出现了约 120 次 calllater()。

3.  最后，我不能保证 [enterframeEvent] 只处理特定于 enterframe 的事件回调，而不是计时器、鼠标等事件，因为 enterframes 发生在主事件循环期间，您可能会看到所有事件触发的累积结果来自主赛事池。我不是说这是正在发生的事情，但我也不能说这不是正在发生的事情，我对那里的内部结构知之甚少，无法确定。

/edit 也如前所述，从技术上讲，[enterFrameEvent] 应该在每个帧开始时在内部触发，但它不应该做任何事情，除非事件已明确附加到它以执行用户代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-16T18:27:22.803

如果将来有人遇到此帖子，请对其进行更新...

几个月后，EffectiveUI 的一些同事在他们的应用程序中遇到了这个确切的问题，因此对其进行了重新访问。我们发现，当使用 Flash 制作视觉资产、使用 STATEFUL SKINS 并使用 Flash/Flex 资产工具包将它们导出到 SWC 时，您会得到失控的 Flash 电影（可能是这种实现方式的内部因素，比如忘记放置帧中的 stop() 命令）。

除了进入并删除所有有状态的皮肤外，您显然无能为力。可以在这里找到一篇好的文章：

[http://patrickhansen.com/blog/index.php/2009/03/05/flex-stateful-skins-vs-stateless?blog=3](http://patrickhansen.com/blog/index.php/2009/03/05/flex-stateful-skins-vs-stateless?blog=3)

还有一个 JSFL 脚本，可用于将有状态皮肤转换为无状态皮肤：

[http://patrickhansen.com/blog/index.php/2009/04/08/stateful-to-stateless-jsfl-flash-command?blog=3](http://patrickhansen.com/blog/index.php/2009/04/08/stateful-to-stateless-jsfl-flash-command?blog=3)

希望这对某人有帮助！这是一个非常讨厌的、神秘的错误，但你可以解决它！

干杯

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-05T18:10:50.097

一些更新：除了监听事件和使用绑定之外，我们在应用程序中没有做任何事情......意思是，没有 ChangeWatchers，没有手动轮询......只是等待事件。我们一直连接到 FMS，因此有一些开销，但它是最小的。绑定在 Flex 中的效率不是很高，我们发现直接将 [Bindable] 元数据关键字添加到类（量很大，有很多类）是不好的。我们并没有做太多这方面的工作，但这是从您的应用中挤出更多性能的一种方式。如果您使用 [Bindable(event="usersUpdated")] 那么您可以控制绑定，并且它只会在您从类中的函数中 dispatchEvent(new Event("usersUpdated")) 时触发，即您的'用户'的设置器。

任何在 Flex 或 AIR 中使用过 System.gc() 的人都会告诉您 Flex 垃圾收集是个笑话。这是一个部分实现的功能，没有人信任它。这也有技巧......调用它两次，等待一帧，再次调用它。它可能会清理您的旧对象，但不要交叉手指……Flex 会做它想做的事。

此外，使用临时对象来减少触发的绑定数量。代替...

myUser.location = 新位置（）；myUser.location.state = "CO"; myUser.location.city = "丹佛";

做...

var tempLoc：位置=新位置（）；tempLoc.state =“一氧化碳”；tempLoc.city = "丹佛"; myUser.location = tempLoc；

前者会触发 3 个绑定到任何绑定到 location.* 的东西，而后者应该只触发 1 个绑定（实际上，由于 Flex 处理它的方式，它通常是额外的。）

除非您在视觉丰富的应用程序中拥有大量绑定，否则绑定不会杀死您的应用程序……绑定和渲染似乎是 Flex 最慢的工作。

另一个有趣的事情是：在 Flex Builder 中创建一个全新的 Flex3 应用程序并在浏览器中运行它。我们的测试表明，MacBookPro 上的 CPU 保持在 8-10% 之间（当应用程序空闲且浏览器窗口隐藏时）。 **我们的**应用程序现在以大约 20% 的速度稳定运行，虽然它为了处理视图更改等而峰值更高，但它总是回到接近 20% 的水平。我们最初的担忧是内存泄漏或某些东西失控，这会使 CPU 占用非常高，并使其徘徊在 40-50% 左右（同样，在 MBP 上……都是相对于这台机器而言的）。我们去掉了所有对 Degrafa 的引用，虽然我们注意到性能有了很大的提升，但这并不能说明一切。不过，空的 Flex 应用程序很有启发性 - Flex 本身始终占用 8-10% 的 CPU，即使在空闲时也是如此。

还有一个发现……如果使用 Mate，请小心处理切换视图的方式。通过在 MXML 中使用注入器和绑定，可以很容易地获得可用的资产并在不使用它们时隐藏和禁用它们，但 Flex 在隐藏/禁用事物方面并不是很聪明。最好即时创建视图，并在完成后销毁它们。即使初始创建可能需要更多时间，并且视图之间的等待时间也会更长，使用一些显示魔法（进度条、旋转磁盘等）来指示视图正在切换，等待视图上的 creationComplete，然后淡入其中。

此外，对于视觉丰富的应用程序，请远离 ViewStack。管理您自己的堆栈。

到目前为止，这个线程已经讨论了任何语言共有的基本性能问题，但 Flex 在许多方面都是一个非常特别的小男孩（“特别”并不总是被认为是积极的事情）。有无数的陷阱，因为它构建在一个非常可视化的平台上，但它是为 RIA 构建的，所以虽然 Flash Player 可以优化视频、动画等，但它不会优化 Flex 应用程序。不要期望 Flex 应用程序的性能与 Flash 应用程序相同。AS2 和 AS3 的 AVM（ActionScript 虚拟机）之间也有很大的不同。

这只是触及了 Flex 应用程序的性能问题和潜在收益的表面。这是一门黑暗的艺术，很容易看出原因。

代码，忍者。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-07-22T22:09:27.043

此链接解释了性能分析器中描述的每个 [function]：

[http://livedocs.adobe.com/flex/gumbo/html/WS6f97d7caa66ef6eb1e63e3d11b6c4d0d21-7edf.html](http://livedocs.adobe.com/flex/gumbo/html/WS6f97d7caa66ef6eb1e63e3d11b6c4d0d21-7edf.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-04T21:02:42.687

我认为您的问题出在其他地方。发生这种情况是因为 Flex 构建在 Flash 之上，而 Flash 触发该事件的频率与帧速率一样多（例如每秒 20-30 次）。

[http://www.adobe.com/support/flash/action_scripts/actionscript_dictionary/actionscript_dictionary546.html](http://www.adobe.com/support/flash/action_scripts/actionscript_dictionary/actionscript_dictionary546.html)

编辑：我并不是说您的解决方案是降低帧速率。仅当您注意到的事件是问题时，这才有效。我不相信这实际上是导致您减速的原因。可能是*调用*导致问题的函数......但该事件本身不是。应该会火很多。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-06-14T01:46:17.890

更新的 livedocs 链接：

[http://help.adobe.com/en_US/flashbuilder/using/WS6f97d7caa66ef6eb1e63e3d11b6c4d0d21-7edf.html](http://help.adobe.com/en_US/flashbuilder/using/WS6f97d7caa66ef6eb1e63e3d11b6c4d0d21-7edf.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-04T21:32:24.390

Justin, thanks for the reply. The issue is not with enterFrame executing, but rather with it trying to do too much in each iteration.

FYI: Coincidentally, the original poster and I are dealing with the same application. We have decided to remove all Degrafa resources in favor of ProgrammaticSkins. I'll report the findings here when we have completed this.

# delphi - 覆盖 Delphi 属性默认值的最简单方法是什么？

> ID：338628
> 
> 赞同：4
> 
> 时间：2008-12-03T20:47:06.290
> 
> 标签：delphi, properties, default-value

我正在尝试编写一个 TCustomDBGrid 后代，它的设计感觉就像一个 TListBox。我要更改的一件事是 Options 属性的默认值。TCustomDBGrid 将选项定义为：

```
property Options: TDBGridOptions read FOptions write SetOptions
  default [dgEditing, dgTitles, dgIndicator, dgColumnResize, dgColLines,
  dgRowLines, dgTabs, dgConfirmDelete, dgCancelOnExit]; 
```

试图在我的课堂上覆盖它

```
 property Options: TDBGridOptions default
     [dgTitles, dgTabs, dgRowSelect, dgAlwaysShowSelection, dgCancelOnExit]; 
```

不工作；编译器期望在类型之后**读取**或**写入**，而不是**default**。问题是，FOptions 和 SetOptions 在 TCustomDBGrid 中都被定义为私有的，不受保护的。

我是否必须编写自己的 get 和 set 方法来调用“ **inherited** Options”，还是有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-03T20:53:33.827

不要指定类型。然后您可以更改默认值。请记住，您还必须在构造函数中将 Options 属性设置为此默认值。下面的代码实际上并没有设置默认值，它只是让它知道当值是这样时不要流式传输属性值。

```
property Options default [dgTitles, dgTabs, dgRowSelect, dgAlwaysShowSelection, dgCancelOnExit]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-03T21:44:57.860

这在运行时创建的 dbgrid 中不起作用...请参阅此（来自 BDS 2006 上的 Delphi 语言指南）：

* * *

*属性值不会自动初始化为默认值。也就是说，默认指令仅控制何时将属性值保存到表单文件，而不控制新创建的实例上的属性初始值。*

* * *

对于设计时表单上的组件，我认为没有问题。但是在运行时创建的控件中，我认为对构造函数进行覆盖会更好（我的意思是更安全）：

```
constructor Create(Aowner:TComponent);
begin  
  inherited;
  Options := [dgTitles, dgTabs, dgRowSelect, dgAlwaysShowSelection, dgCancelOnExit];
end; 
```

为了使事情正确，请执行**默认**指令：

```
property Options default  [dgTitles, dgTabs, dgRowSelect, dgAlwaysShowSelection, 
                           dgCancelOnExit]; 
```

# xcode - 如何让 Xcode 在磁盘上的文件夹结构中复制项目组结构？

> ID：338652
> 
> 赞同：44
> 
> 时间：2008-12-03T20:57:16.207
> 
> 标签：xcode, configuration

我有一个具有以下组结构的 Xcode 项目：

```
ProjectName/
    Classes/
        class1.h
        class1.m
        class2.h
        class2.m
        ...
    XMLDocs/
        doc1.xml
        doc2.xml
        ...
    Resources/
        Info.plist
        MainMenu.xib
        ... 
```

等等等等。

我希望这也能在磁盘上的文件夹结构中表示：

```
ProjectFolder/
    Project.xcodeproj
    Classes/
        class1.h
        class1.m
        class2.h
        class2.m
        ...
    XMLDocs/
        doc1.xml
        doc2.xml
        ...
    Resources/
        Info.plist
        MainMenu.xib
        ... 
```

与根项目文件夹方法中的通常所有内容相反。

有没有办法做到这一点，而无需在磁盘上手动创建文件夹结构，然后必须将 Xcode 中的所有引用重新指向新位置？

如果您能告诉我如何在我创建新组或将文件添加到 Xcode 中的现有组时自动执行此操作，则可以加分。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2011-01-14T20:24:46.873

你*可以*在某种程度上做到这一点！每次创建新组时只需多做一个步骤（这是第一次，您将有很多事情要做！）：

[![Xcode 位置设置](https://i.stack.imgur.com/5k1qg.png)](https://i.stack.imgur.com/5k1qg.png)

每当您在 Xcode 中创建组时，立即选择它并打开右侧边栏。请注意其名称下方的“位置：”设置。单击“无”旁边的文件夹图标并将其设置为具有相同名称的新文件夹。

现在，每当您将文件添加到组中时，它们都会转到磁盘上的相应文件夹。哇！

不幸的是，在最初的时候，您将有很多文件移动工作要做。（当您更改组路径时，您的文件将全部变为红色，因为 Xcode 将开始在新文件夹中查找它们。您必须手动将它们从 Finder 中移动以修复它。）但是，有一个命令-line 工具为您执行此初始迁移：[https ://github.com/venmo/synx](https://github.com/venmo/synx)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-12-04T00:01:24.603

文件夹引用是您想要的。将文件拖动或添加到项目时，可以选择“为任何添加的文件夹创建文件夹引用”。选择它，你会得到你想要的行为。

[替代文字 http://img.skitch.com/20081203-prtxsp7c36ern4afxxdixy93sq.png](http://img.skitch.com/20081203-prtxsp7c36ern4afxxdixy93sq.png "截屏")

您可以尝试将项目的整个封闭文件夹添加为文件夹引用。那应该得到一切。或者单独添加对“类”、“资源”和“XML”的引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-12T07:26:23.883

Xcode9 解决了这个问题。默认情况下，会在磁盘上创建一个具有相应文件夹的新组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-06T04:39:14.043

Xcode 中没有“让我的磁盘看起来像我的项目结构”功能。

不过，您可以使用 AppleScript 自动执行该任务：您可以通过脚本检查和更改项目结构。因此，您只需要编写一个脚本来迭代项目结构并使文件夹层次结构看起来与项目结构相同，并同时调整 Xcode 的文件和组引用指向的位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-28T13:45:29.773

我发现如果您在 Xcode 中移动文件并同时按 [CMD]，则文件夹结构将与 Xcode 结构匹配。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-26T21:49:58.033

我创建了一个应用程序来解决这个问题并重新组织你的文件结构以匹配你在 Xcode 中得到的内容。 [https://apps.apple.com/gb/app/xsaviour/id1449886415?mt=12](https://apps.apple.com/gb/app/xsaviour/id1449886415?mt=12)

# windows - 可以在没有管理员权限的情况下在 IE 中安装 ActiveX 控件吗？

> ID：338657
> 
> 赞同：3
> 
> 时间：2008-12-03T20:59:44.860
> 
> 标签：windows, internet-explorer, activex

我正在开发一个需要 ActiveX 控件才能运行的 Web 应用程序。当用户具有管理员权限时，它安装得很好，但无法加载。这是设计使然，如果是这样，这是否记录在某个地方？（最好是 MSDN）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2011-09-19T15:35:18.127

实际上，这些答案都不是完全正确的。如果您以每个用户为基础安装 ActiveX 控件，则无需管理权限即可正常工作，无论用户所在的组如何。基本上这涉及将其安装到 HKEY_CURRENT_USER 而不是 HKEY_LOCAL_MACHINE。

根据您的 activex 控件编写的内容，这可能很容易，也可能很难更改；使用 ATL 9 这很容易，因为您只需要调用一个函数：

```
AtlSetPerUserRegistration(perUser); 
```

[FireBreath](https://www.firebreath.org)默认执行此操作，因此无需管理员权限即可安装插件/控件；它还[为旧版本的 ATL 提供了解决方法](https://github.com/firebreath/FireBreath/blob/master/src/ActiveXCore/axutil.cpp#L48)（ATL 9 是 VS 2008）。这都是 C++，所以如果你的控件是用别的东西写的，我不知道如何修复它，但这至少应该让你开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-03T21:03:01.970

**复杂的答案：是的。** 用户的帐户需要是提供注册库 (dll) 或控件 (ocx) 权限的组的一部分，或者需要直接分配权限。

**简单的回答：**不可以。只有具有安装 OCX 或 DLL 的管理权限的帐户才能安装 Active-X 控件（*默认情况下*，这些帐户是管理员、域管理员或高级用户组的一部分）。

编辑：我想这个问题已经改变了......是的，这是设计使然。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-10-23T05:37:19.433

如果将 Vista 与 IE8 一起使用，则可以。

[http://msdn.microsoft.com/en-us/library/dd433049%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/dd433049%28VS.85%29.aspx)

# .net - 你能舍入一个 .NET TimeSpan 对象吗？

> ID：338658
> 
> 赞同：27
> 
> 时间：2008-12-03T21:00:11.130
> 
> 标签：.net, datetime, timespan

你能舍入一个 .NET`TimeSpan`对象吗？

我的`Timespan`值为：00:00:00.6193789

有没有一种简单的方法可以将其保留为`TimeSpan`对象但将其舍入到
00:00:00.62 之类的东西？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2010-01-05T19:36:48.727

对不起，伙计们，但到目前为止的问题和流行的答案都是错误的***:-)***

这个问题是错误的，因为 Tyndall 要求一种***舍***入方法，但显示了一个***截断***示例。

Will Dean 的回答是错误的，因为它还解决了***truncation***而不是***rounding***。（我想人们可能会争辩说，这两个问题之一的答案是正确的，但让我们暂时把哲学放在一边……）

这是一个简单的***舍入***技术：

```
int precision = 2; // Specify how many digits past the decimal point
TimeSpan t1 = new TimeSpan(19365678); // sample input value

const int TIMESPAN_SIZE = 7; // it always has seven digits
// convert the digitsToShow into a rounding/truncating mask
int factor = (int)Math.Pow(10,(TIMESPAN_SIZE - precision));

Console.WriteLine("Input: " + t1);
TimeSpan truncatedTimeSpan = new TimeSpan(t1.Ticks - (t1.Ticks % factor));
Console.WriteLine("Truncated: " + truncatedTimeSpan);
TimeSpan roundedTimeSpan =
    new TimeSpan(((long)Math.Round((1.0*t1.Ticks/factor))*factor));
Console.WriteLine("Rounded: " + roundedTimeSpan); 
```

使用示例代码中的输入值和位数，这是输出：

```
Input: 00:00:01.9365678
Truncated: 00:00:01.9300000
Rounded: 00:00:01.9400000 
```

将精度从 2 位更改为 5 位，然后改为：

```
Input: 00:00:01.9365678
Truncated: 00:00:01.9365600
Rounded: 00:00:01.9365700 
```

甚至将其更改为 0 以获得此结果：

```
Input: 00:00:01.9365678
Truncated: 00:00:01
Rounded: 00:00:02 
```

最后，如果您只想对输出进行更多控制，请添加一些格式。这是一个示例，表明您可以将精度与显示的位数分开。精度再次设置为 2，但显示 3 位数字，如格式化控制字符串的最后一个参数中所指定：

```
Console.WriteLine("Rounded/formatted: " + 
  string.Format("{0:00}:{1:00}:{2:00}.{3:000}",
      roundedTimeSpan.Hours, roundedTimeSpan.Minutes,
      roundedTimeSpan.Seconds, roundedTimeSpan.Milliseconds));
// Input: 00:00:01.9365678
// Truncated: 00:00:01.9300000
// Rounded: 00:00:01.9400000
// Rounded/formatted: 00:00:01.940 
```

* * *

## 2010.01.06 更新：开箱即用的解决方案

如果您正在寻找想法，上述材料很有用；从那以后，我有时间为那些寻找即用型代码的人实施一个打包的解决方案。

**请注意，这是未注释的代码。带有 XML-doc-comments 的完整注释版本将在本季度末在我的[开源库中提供。](http://cleancode.sourceforge.net/)尽管我犹豫是否要像这样“原始”地发布它，但我认为它仍然对感兴趣的读者有所帮助。**

这段代码改进了我上面的代码，虽然它是四舍五入的，但仍然显示了 7 个位置，用零填充。这个完成的版本四舍五入并修剪到指定的位数。

这是一个示例调用：

```
Console.Write(new RoundedTimeSpan(19365678, 2).ToString());
// Result = 00:00:01.94 
```

这是完整的 RoundedTimeSpan.cs 文件：

```
using System;

namespace CleanCode.Data
{
    public struct RoundedTimeSpan
    {

        private const int TIMESPAN_SIZE = 7; // it always has seven digits

        private TimeSpan roundedTimeSpan;
        private int precision;

        public RoundedTimeSpan(long ticks, int precision)
        {
            if (precision < 0) { throw new ArgumentException("precision must be non-negative"); }
            this.precision = precision;
            int factor = (int)System.Math.Pow(10, (TIMESPAN_SIZE - precision));

            // This is only valid for rounding milliseconds-will *not* work on secs/mins/hrs!
            roundedTimeSpan = new TimeSpan(((long)System.Math.Round((1.0 * ticks / factor)) * factor));
        }

        public TimeSpan TimeSpan { get { return roundedTimeSpan; } }

        public override string ToString()
        {
            return ToString(precision);
        }

        public string ToString(int length)
        { // this method revised 2010.01.31
            int digitsToStrip = TIMESPAN_SIZE - length;
            string s = roundedTimeSpan.ToString();
            if (!s.Contains(".") && length == 0) { return s; }
            if (!s.Contains(".")) { s += "." + new string('0', TIMESPAN_SIZE); }
            int subLength = s.Length - digitsToStrip;
            return subLength < 0 ? "" : subLength > s.Length ? s : s.Substring(0, subLength);
        }
    }
} 
```

* * *

## 2010.02.01 更新：打包解决方案现已推出

我昨天刚刚发布了我的开源库的新版本，比预期的要早，包括我上面描述的 RoundedTimeSpan。代码在[这里](http://cleancode.sourceforge.net/wwwdoc/download.html)；对于 API 从[此处](http://cleancode.sourceforge.net/api/csharp/)开始，然后导航到命名空间`RoundedTimeSpan`下`CleanCode.Data`。CleanCode.DLL 库包括上面显示的代码，但在完成的包中提供了它。请注意，`ToString(int)`自从我在 2010.01.06 发布后，我对上述方法进行了轻微改进。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2016-09-28T09:20:47.527

**如果您四舍五入到整秒**，则最简单的单行：

```
public static TimeSpan RoundSeconds( TimeSpan span ) {
    return TimeSpan.FromSeconds( Math.Round( span.TotalSeconds ) );
} 
```

* * *

四舍五入到最多 3 位数字（例如十分之一、百分之一秒或**毫秒**：

```
public static TimeSpan RoundSeconds( TimeSpan span, int nDigits ) {
    // TimeSpan.FromSeconds rounds to nearest millisecond, so nDigits should be 3 or less - won't get good answer beyond 3 digits.
    Debug.Assert( nDigits <= 3 );
    return TimeSpan.FromSeconds( Math.Round( span.TotalSeconds, nDigits ) );
} 
```

* * *

对于 3 位以上的数字，它稍微复杂一些 - 但仍然是单线。这也可以用于 3 位或更少的数字 - 它是上面显示的版本的替代品：

```
public static TimeSpan RoundSeconds( TimeSpan span, int nDigits ) {
    return TimeSpan.FromTicks( (long)( Math.Round( span.TotalSeconds, nDigits ) * TimeSpan.TicksPerSecond) );
} 
```

如果你想要一个字符串（根据评论，这种技术最多只能工作 7 位数字）：

```
public static string RoundSecondsAsString( TimeSpan span, int nDigits ) {
    StringBuilder sb = new StringBuilder();
    for (int i = 0; i < nDigits; i++)
        sb.Append( "f" );
    return span.ToString( @"hh\:mm\:ss\." + sb );
} 
```

* * *

对于**一天中的时间**，小时和**分钟**，四舍五入：

```
public static TimeSpan RoundMinutes(TimeSpan span)
    {
        return TimeSpan.FromMinutes(Math.Round(span.TotalMinutes));
    } 
```

如果您有 DateTime，并且想要提取四舍五入的时间：

```
DateTime dt = DateTime.Now();
TimeSpan hhmm = RoundMinutes(dt.TimeOfDay); 
```

要显示四舍五入的 24 小时时间：

```
string hhmmStr = RoundMinutes(dt.TimeOfDay).ToString(@"hh\:mm"); 
```

以当前文化显示一天中的时间：

```
string hhmmStr = new DateTime().Add(RoundMinutes(dt.TimeOfDay)).ToShortTimeString(); 
```

* * *

学分：

cc1960 的答案显示使用了 FromSeconds，但他四舍五入到整秒。我的答案概括为指定的位数。

Ed 的回答建议使用格式字符串，并包含指向格式化文档的链接。

[Chris Marisic](https://stackoverflow.com/a/25329190/199364)展示了如何应用`ToShortTimeString`到 TimeSpan（首先转换为 a `DateTime`）。

* * *

舍入为其他单位的倍数，例如 1/30 秒：

```
 // Rounds span to multiple of "unitInSeconds".
    // NOTE: This will be close to the requested multiple,
    // but is not exact when unit cannot be exactly represented by a double.
    // e.g. "unitInSeconds = 1/30" isn't EXACTLY 1/30,
    // so the returned value won't be exactly a multiple of 1/30.
    public static double RoundMultipleAsSeconds( TimeSpan span, double unitInSeconds )
    {
        return unitInSeconds * Math.Round( span.TotalSeconds / unitInSeconds );
    }

    public static TimeSpan RoundMultipleAsTimeSpan( TimeSpan span, double unitInSeconds )
    {
        return TimeSpan.FromTicks( (long)(RoundMultipleAsSeconds( span, unitInSeconds ) * TimeSpan.TicksPerSecond) );

        // IF USE THIS: TimeSpan.FromSeconds rounds the result to nearest millisecond.
        //return TimeSpan.FromSeconds( RoundMultipleAsSeconds( span, unitInSeconds ) );
    }

    // Rounds "span / n".
    // NOTE: This version might be a hair closer in some cases,
    // but probably not enough to matter, and can only represent units that are "1 / N" seconds.
    public static double RoundOneOverNAsSeconds( TimeSpan span, double n )
    {
        return Math.Round( span.TotalSeconds * n ) / n;
    }

    public static TimeSpan RoundOneOverNAsTimeSpan( TimeSpan span, double n )
    {
        return TimeSpan.FromTicks( (long)(RoundOneOverNAsSeconds( span, n ) * TimeSpan.TicksPerSecond) );

        // IF USE THIS: TimeSpan.FromSeconds rounds the result to nearest millisecond.
        //return TimeSpan.FromSeconds( RoundOneOverNAsSeconds( span, n ) );
    } 
```

要使用其中一个来舍入到 1/30 秒的倍数：

```
 private void Test()
    {
        long ticks = (long) (987.654321 * TimeSpan.TicksPerSecond);
        TimeSpan span = TimeSpan.FromTicks( ticks );
        TestRound( span, 30 );
        TestRound( TimeSpan.FromSeconds( 987 ), 30 );
    }

    private static void TestRound(TimeSpan span, int n)
    {
        var answer1 = RoundMultipleAsSeconds( span, 1.0 / n );
        var answer2 = RoundMultipleAsTimeSpan( span, 1.0 / n );
        var answer3 = RoundOneOverNAsSeconds( span, n );
        var answer4 = RoundOneOverNAsTimeSpan( span, n );
    } 
```

在调试器中查看的结果：

```
// for 987.654321 seconds:
    answer1 987.66666666666663  double
    answer2 {00:16:27.6666666}  System.TimeSpan
    answer3 987.66666666666663  double
    answer4 {00:16:27.6666666}  System.TimeSpan

// for 987 seconds:
    answer1 987 double
    answer2 {00:16:27}  System.TimeSpan
    answer3 987 double
    answer4 {00:16:27}  System.TimeSpan 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2008-12-03T21:12:32.510

TimeSpan 只不过是“Ticks”成员的包装。从另一个 TimeSpan 的刻度的圆形版本创建一个新的 TimeSpan 非常容易。

```
TimeSpan t1 = new TimeSpan(2345678);
Console.WriteLine(t1);
TimeSpan t2 = new TimeSpan(t1.Ticks - (t1.Ticks % 100000));
Console.WriteLine(t2); 
```

给出：

```
00:00:00.2345678
00:00:00.2300000 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-12-16T23:17:22.943

鉴于一些关于四舍五入到秒的评论，我认为四舍五入到任何 TimeSpan 都会很好：

```
public static TimeSpan Round(this TimeSpan ts, TimeSpan rnd) {
    if (rnd == TimeSpan.Zero)
        return ts;
    else {
        var rndTicks = rnd.Ticks;
        var ansTicks = ts.Ticks + Math.Sign(ts.Ticks) * rndTicks / 2;
        return TimeSpan.FromTicks(ansTicks - ansTicks % rndTicks);
    }
}
public static TimeSpan Round(this TimeSpan ts) => ts.Round(TimeSpan.FromSeconds(1)); 
```

考虑到在处理小数单位（根据@ToolmakerSteve）时舍入到刻度的潜在不准确性，当您需要更高的精度并舍入到计算机小数秒时，我添加了一个小数舍入选项：

```
public static TimeSpan RoundToFraction(this TimeSpan ts, long num, long den) => (den == 0.0) ? TimeSpan.Zero : TimeSpan.FromTicks((long)Math.Round(Math.Round((double)ts.Ticks * (double)den / num / TimeSpan.TicksPerSecond) * (double)num / den * TimeSpan.TicksPerSecond));
public static TimeSpan RoundToFraction(this TimeSpan ts, long den) => (den == 0.0) ? TimeSpan.Zero : TimeSpan.FromTicks((long)(Math.Round((double)ts.Ticks * den / TimeSpan.TicksPerSecond) / den * TimeSpan.TicksPerSecond)); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-12-03T21:11:11.763

```
new TimeSpan(tmspan.Hours, tmspan.Minutes, tmspan.Seconds, (int)Math.Round(Convert.ToDouble(tmspan.Milliseconds / 10))); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-03T21:05:50.667

不确定 TimeSpan，但您可以在 DateTimes 上查看此帖子：http:
[//mikeinmadison.wordpress.com/2008/03/12/datetimeround/](http://mikeinmadison.wordpress.com/2008/03/12/datetimeround/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-02-19T10:52:06.923

这是一个很好的扩展方法：

```
 public static TimeSpan RoundToSeconds(this TimeSpan timespan, int seconds = 1)
    {
        long offset = (timespan.Ticks >= 0) ? TimeSpan.TicksPerSecond / 2 : TimeSpan.TicksPerSecond / -2;
        return TimeSpan.FromTicks((timespan.Ticks + offset) / TimeSpan.TicksPerSecond * TimeSpan.TicksPerSecond);
    } 
```

这里有一些例子：

```
DateTime dt1 = DateTime.Now.RoundToSeconds();  // round to full seconds
DateTime dt2 = DateTime.Now.RoundToSeconds(5 * 60);  // round to full 5 minutes 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-06-09T10:05:43.710

我的解决方案：

```
 static TimeSpan RoundToSec(TimeSpan ts)
    {
        return TimeSpan.FromSeconds((int)(ts.TotalSeconds));
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-06-26T12:18:11.153

将毫秒舍入到最接近的秒的另一种方法。

```
private const long TicksPer1000Milliseconds = 1000 * TimeSpan.TicksPerMillisecond;

// Round milliseconds to nearest second
// To round up, add the sub-second ticks required to reach the next second
// To round down, subtract the sub-second ticks
elapsedTime = new TimeSpan(elapsedTime.Ticks + (elapsedTime.Milliseconds >= 500 ? TicksPer1000Milliseconds - (elapsedTime.Ticks % TicksPer1000Milliseconds) : -(elapsedTime.Ticks % TicksPer1000Milliseconds))); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-06-30T00:30:03.987

如果您需要使用扩展方法`DateTime`，但仍想节省时间。就我而言，我想四舍五入。

```
public static DateTime RoundToMinute(this DateTime date)
    {
        return DateTime.MinValue.AddMinutes(Math.Round((date - DateTime.MinValue).TotalMinutes));
    } 
```

# language-agnostic - 如何在文本中搜索一个人的名字？（启发式）

> ID：338661
> 
> 赞同：4
> 
> 时间：2008-12-03T21:00:29.617
> 
> 标签：language-agnostic, search, heuristics

我有一个*巨大*的人名列表，我必须在一个*巨大的文本*中搜索。

只有*部分名称*可能出现在文本中。并且有可能*拼写错误*、*输入*错误或*缩写*。文本没有标记，所以我不知道文本中人名的开始位置。而且我不知道这个名字*是否会出现*在文本中。

例子：

我的列表中有**“Barack Hussein Obama”**，因此我必须检查以下文本中是否出现了该名称：

*   ...The candidate **Barack Obama** was elected the president of the United States... (incomplete)
*   ...The candidate **Barack Hussein** was elected the president of the United States... (incomplete)
*   ...The candidate **Barack HO** was elected the president of the United States... (abbreviated)
*   ...The candidate **Barack ObaNa** was elected the president of the United States... (misspelled)
*   ...The candidate **Barack OVama** was elected the president of the United States... (misstyped, B is next to V)
*   ......候选人**约翰麦凯恩**在选举中失败......（没有出现奥巴马的名字）

当然，它没有确定性的解决方案，但是......

对于这种搜索，什么是好的启发式方法？

如果必须，你会怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-23T20:51:59.310

你说它大约有200页。

将其分成 200 个单页 PDF。

把每一页放在 Mechanical Turk 上，连同名字列表。提供每页约 5 美元的奖励。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-03T21:12:34.773

将所有内容拆分为删除特殊字符（逗号、句点等）的空格。[然后使用soundex 之](http://en.wikipedia.org/wiki/Soundex)类的东西来处理拼写错误。或者，如果您需要搜索大量文档，则可以使用[lucene之类的东西。](http://lucene.apache.org/java/docs/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-20T16:05:55.270

你想要的是一个自然语言处理库。您正在尝试识别专有名词的子集。如果名称是专有名词的主要来源，那么如果混入相当数量的其他专有名词就容易了，但难度会更大。如果您使用 JAVA 编写代码，请查看 OpenNLP 或 C# SharpNLP。提取所有专有名词后，您可能可以使用 Wordnet 删除大多数非名称专有名词。您可以使用 wordnet 来识别名称的子部分，例如“John”，然后搜索相邻的标记以吸收名称的其他部分。你会遇到像“John Smith Industries”这样的问题。您将不得不查看您的基础数据，看看是否有您可以利用的功能来帮助缩小问题。

使用 NLP 解决方案是我见过的解决类似问题的唯一真正强大的技术。您可能仍然有问题，因为 200 页实际上相当小。理想情况下，您将拥有更多文本并能够使用更多统计技术来帮助消除名称和非名称之间的歧义。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-24T03:20:33.580

我会使用 C# 和 LINQ。我会标记空间上的所有单词，然后使用 LINQ 对文本进行排序（并可能使用 Distinct() 函数）来隔离我感兴趣的所有文本。在处理文本时，我会跟踪索引（您可以使用 LINQ），以便我可以重新定位原始文档中的文本 - 如果这是一个要求。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-03T21:15:38.590

乍一看，我要买一个索引服务器。lucene、FAST 或 Microsoft 索引服务器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-03T21:24:33.547

[SQL Server](http://msdn.microsoft.com/en-us/library/ms187384.aspx)和[Oracle](http://www.techonthenet.com/oracle/functions/soundex.php)都有内置的 SOUNDEX 函数。

此外，还有一个名为 DIFFERENCE 的 SQL Server 内置函数可以使用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-03T21:08:28.650

我能想到的最好方法是在 python [NLTK](http://nltk.sourceforge.net/index.php/Main_Page)中定义语法。但是，对于您想要的东西，它可能会变得非常复杂。

我会亲自使用正则表达式，同时通过一些编程生成排列列表。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2008-12-03T22:20:49.720

纯旧的正则表达式脚本将完成这项工作。

使用 Ruby，它非常快。阅读行并匹配单词。

干杯

# css - 如何“停靠” Silverlight 控件

> ID：338665
> 
> 赞同：1
> 
> 时间：2008-12-03T21:02:20.347
> 
> 标签：css, silverlight

有没有办法将 Silverlight 控件“停靠”到浏览器窗口？例如，我想在页面顶部有一个 HTML 标题，然后让 Silverlight 控件精确地占据窗口的其余部分，在调整窗口大小时巧妙地调整大小。

Visual Studio 创建的默认页面使用具有 100% 宽度和高度的样式来使 Silverlight 控件占据整个窗口。而且我可以轻松地修改该模板以按百分比拆分页面（例如 20% 的 HTML 标题和 80% 的 Silverlight 控件）。但我真正想要的是标题高度是静态的，并且 Silverlight 控件占据剩余窗口的 100%。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-03T21:42:17.600

您应该仍然可以使用您的 CSS 来执行此操作。只需将您的标题 DIV 设置为您想要的大小，然后 Silverlight 元素的容器 DIV 为 100%/100%

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-04T06:01:44.253

这是 JavaScript 中的解决方案。首先，您创建此函数：

```
<script type="text/javascript">
    function resizeSLHost()
    {
        var docHeight = document.body.offsetHeight;
        var pluginHeight = docHeight - 130;
        var slplugin = document.getElementById("silverlightControlHost");
        slplugin.style.height = pluginHeight + "px";
    }
</script> 
```

然后，在您的开始正文标签中，您说：

```
<body onload="resizeSLHost()" onresize="resizeSLHost()"> 
```

然后将标题 div 放在 Silverlight 主机 div 之前：

```
<div id="header" style="height:130px"></div>
<div id="silverlightControlHost">
    <object data="data:application/x-silverlight-2" type="application/x-silverlight-2" width="100%" height="100%">
        // the usual stuff here...
    </object>
    <iframe style='visibility:hidden;height:0;width:0;border:0px'></iframe>
</div> 
```

当然，resizeSLHost() 中从 docHeight 中减去的数字必须等于 header div 的高度。

这在 IE 7 和 Firefox 3.0.4 中对我有用。

# html - 有一个倒置的插入符号吗？

> ID：338667
> 
> 赞同：304
> 
> 时间：2008-12-03T21:03:02.047
> 
> 标签：html, sorting, user-interface, character-encoding, character

我必须维护大量经典的 ASP 页面，其中许多具有根本没有排序功能的表格数据。原始开发人员在数据库查询中使用的任何顺序都是您所坚持的。

我想对这些页面进行一些基本的排序，并且我正在使用javascript进行所有客户端操作。我已经完成了在给定方向上对给定列上的给定表格进行排序的基本脚本，只要表格受到我们在此处遵循的某些约定的限制，它就可以很好地工作。

我想为 UI 做的只是用插入符号 ( `^`) 指示排序方向和......什么？是否有与插入符号直接相反的特殊字符？这封信`v`不会完全消除它。或者，我可以使用其他字符配对吗？

* * *

## 回答 #1

> 赞同：508
> 
> 时间：2008-12-03T21:09:44.437

还有▲：[▲](http://www.fileformat.info/info/unicode/char/25b2/index.htm) 和 ▼：[▼](http://www.fileformat.info/info/unicode/char/25bc/index.htm)

* * *

## 回答 #2

> 赞同：262
> 
> 时间：2010-02-26T14:54:01.750

不要忘记`**∧**`(logical and) 和`**∨**`(logical or) 字符，这就是我用来指示排序方向的字符：HTML 实体[`&and;`](http://www.fileformat.info/info/unicode/char/2227/index.htm)&[`&or;`](http://www.fileformat.info/info/unicode/char/2228/index.htm)分别。

* * *

## 回答 #3

> 赞同：63
> 
> 时间：2008-12-03T21:10:12.717

总是有一个小写的“v”。但说真的，除了 Unicode，我能找到的只有`&darr`，看起来像↓。

* * *

## 回答 #4

> 赞同：49
> 
> 时间：2008-12-03T21:08:22.677

颠倒的抑扬符称为[caron](http://en.wikipedia.org/wiki/Caron)或 háček。

它在 HTML 的 TADS Latin-2 扩展中有一个 HTML 实体：`&caron;`看起来像这样：ˇ 不幸的是，它的大小/比例与 ^ 插入符号不同。

或者你可以使用 unicode `U+30C`。

* * *

## 回答 #5

> 赞同：30
> 
> 时间：2018-03-25T17:15:33.487

# ˅˅˅˅˅˅˅˅˅˅˅˅˅˅˅˅˅˅˅˅˅

 ˅˅˅ <strong>Hǝɹǝ,s ɐ ɯɐʇɔɥᴉuƃ sǝʇ˙ ˅˅˅<br> ˄˄˄ <strong>这是一个匹配集。˄˄˄</p>

# ˄˄˄˄˄˄˄˄˄˄˄˄˄˄˄˄˄˄˄˄˄˄˄

“实际尺寸”：`˅˄˅˄`  <br> **[[（更多信息）](https://unicode-search.net/unicode-namesearch.pl?term=ARROWHEAD)]**

* * *

# 编辑：*另一种选择...*

# ⋁⋁⋁⋁⋁⋁⋁⋁⋁⋁ [^(Unicode #8897 / U+22C1 ( [info](https://codepoints.net/U+22C1) ))]命名为 N-ARY LOGICAL OR

# ⋀⋀⋀⋀⋀⋀⋀⋀⋀⋀ [^(Unicode #8896 / U+22C0 ( [info](https://codepoints.net/U+22C0) ))]命名为 N-ARY LOGICAL AND

“真实大小”：`⋁⋀⋁⋀`

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2014-09-15T20:18:44.640

一个强大的选项 - 也可以提高创造力 - 是使用[方框绘图字符](http://jrgraphix.net/r/Unicode/2500-257F)设计您自己的角色。

想要一个向下指向的“插入符号”？这里有一个：╲╱

我最近发现了它们——我很高兴使用这种定制设计的字符来标记周围的东西:)。

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2008-12-03T21:09:50.877

您也许可以使用黑色三角形、Unicode 值 U+25b2 和 U+25bc。或者箭头，U+2191 和 U+2193。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2008-12-03T21:14:12.290

c# 代码

```
int i = 0;
char c = '↑';
i = (int)c;
Console.WriteLine(i); // prints 8593

int j = 0;
char d = '↓';
j = (int)d;
Console.WriteLine(j); // prints 8595 
```

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2017-05-31T19:46:21.063

您可能会考虑使用[Font Awesome](http://fontawesome.io)而不是使用 unicode 或其他图标

代码可以像（a）一样简单，包括令人敬畏的字体，例如`<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">`（b）制作一个按钮，例如`<button><i class="fa fa-arrow-down"></i></button>`

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2008-12-03T21:06:24.457

我会使用几个小图像。也会更好看。

或者，您可以尝试 Windows 附带的字符映射实用程序或尝试查看[此处](http://www.unicode.org/charts/)。

我见过的另一个解决方案是使用 Wingdings 字体作为符号。这有很多箭头。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2014-12-04T01:25:30.890

我做了下标大写和粗体V。它工作得很好（虽然需要一些努力，如果需要重复做的话）

句法：

```
<sub><strong>v</strong></sub> 
```

输出：
[**v**]

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2017-06-27T18:07:24.203

`^`按`shift`+生成的(Caret - or Ascii Circumflex)`6`似乎没有相反的 Ascii，即 Ascii Inverted Circumflex。

但是对于也具有键盘组合的替代字符配对，您可以使用：

^ (Circumflex) `shift`+ `alt`+`i`和
ˇ (Caron) `shift`+ `alt`+`t`

来源：[fileformat.info](http://www.fileformat.info/info/unicode/char/search.htm)

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2018-03-02T14:08:33.197

没有倒置的插入符号，但您可以使用 CSS 轻松旋转插入符号。这是一个看起来很完美的简单解决方案。按“运行代码片段”以查看它的运行情况：

```
.upsidedown {
transform:rotate(180deg); 
-webkit-transform:rotate(180deg);
-o-transform:rotate(180deg);
-ms-transform:rotate(180deg);
}
.upsidedown.caret {
display: inline-block; 
position:relative; 
bottom: 0.15em;
}
```

```
more items <span class="upsidedown caret">^</span>
```

请注意以下事项...

*   我对插入符号的位置做了一些修正，因为它通常很高（因此在旋转版本中很低）。你想把它向上移动一点。这个“小”是相对于字体大小的，因此是“em”。根据您的字体选择，您可能需要修改它以使其看起来不错。
*   此解决方案在 IE8 中不起作用。如果您想要 IE8 支持，您应该使用过滤器。IE8 支持在 2018 年并不真正需要也不常见。
*   如果您想将它与 Twitter Bootstrap 结合使用，请将类“caret”重命名为其他名称，例如“caret_down”（因为它与 Twitter Bootstrap 中的类名冲突）。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2019-04-15T12:40:01.197

[U+2304 向下箭头](http://www.fileformat.info/info/unicode/char/2304/index.htm)，在 HTML 中为 ⌄

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-04-26T20:45:51.843

您可以使用 document.write 在跨度内绘制一个 svg 路径吗？svg 的工作不需要 span，它只是确保 svg 与 carat 旁边的任何文本保持内联。我使用 margin-bottom 将其与文本垂直居中，但可能还有另一种方法可以做到这一点。这就是我在[博客侧导航](http://www.costonmission.com)（减去 js）上所做的。如果旁边没有文本，则不需要跨度或边距底部偏移。

```
<div id="ID"></div>

<script type="text/javascript">
var x = document.getElementById('ID');

// your "margin-bottom" is the negative of 1/2 of the font size (in this example the font size is 16px)
// change the "stroke=" to whatever color your font is too
x.innerHTML = document.write = '<span><svg style="margin-bottom: -8px; height: 30px; width: 25px;" viewBox="0,0,100,50"><path fill="transparent" stroke-width="4" stroke="black" d="M20 10 L50 40 L80 10"/></svg></span>';
</script> 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-01-09T19:15:58.047

如果您需要 React 应用程序的字体真棒，那么[React 图标](https://github.com/gorangajic/react-icons)是一个非常好的资源并且非常容易实现。它包括更多的库，而不仅仅是 font-awesome。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-04-08T21:59:41.610

所以我想要插入符号与 OWA 中的完全一样，所以我`office365icons.woff`从 `https://owa.example.com/owa/prem/15.1.1913.10/resources/styles/fonts/office365icons.woff`（必须登录才能这样做，通过浏览器这样做）下载，然后从网站上复制简化的样式：

```
 @font-face {
      font-family: 'Office365Icons';
      src: url('/fonts/office365icons.woff') format('woff');
      font-weight: normal;
      font-style: normal;
  }

  span.o-icon {
      font-family: 'Office365Icons';
      font-size: 14pt;
      line-height: 21px;
      color: #666;
  } 
```

最后：

```
<span class="o-icon">&#xe088;</span> 
```

# asp.net - ASP.Net 会从缓存数据集中删除单个表以释放内存吗？

> ID：338673
> 
> 赞同：0
> 
> 时间：2008-12-03T21:05:56.783
> 
> 标签：asp.net, caching, dataset

我有一个奇怪的零星问题。

我有返回 5 个小表的存储过程（例如状态下拉列表的 ID 和文本描述等）。代码调用它并将返回的数据集放入 ASP.Net 缓存中。调用单独的方法来从数据集中检索单个表，以将数据绑定到整个 Web 应用程序中的控件。

只有在我的 QA 服务器中，一张表才会消失。该表将用于一个测试场景；但是，下次运行相同的场景时，一个表为空。MIA 的表格总是相同的（准确地说是 5 个表格中的第 4 个）。

如果 ASP.Net WP 需要内存，它是否可以从缓存数据集中删除单个表，同时保持数据集的索引到位？

下面是缓存代码：

```
public static DataSet GetDropDownLists()
{
    DataSet ds = (DataSet)HttpContext.Current.Cache["DropDownListData"];

    if (null == ds)
    {
        // - Database Connection Information Here
        ds = db.ExecuteDataSet(CommandType.StoredProcedure, "Sel_DropDownListData");

        HttpContext.Current.Cache.Add("DropDownListData", ds, null, DateTime.Now.AddMinutes(20), TimeSpan.Zero, CacheItemPriority.Normal, null);
    }

    return ds;
} 
```

以下是返回空表的方法示例：

```
public static DataTable GetStatusList()
{
    return GetDropDownLists().Tables[3]; 
} 
```

同样，这只发生在我的 QA 服务器上，而不是当我的本地代码连接到 QA 数据库或单独服务器上的任何东西以进行我自己的开发测试时。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-03T21:18:16.133

ASP.NET 缓存只能直接作用于您在其 IEnumerable 列表中插入的对象。

如果您将对象的 List<> 添加为一个缓存项，它将保留整个列表或从缓存中丢弃整个列表。它永远不会绕过列表并从中删除单个项目。这同样适用于数据集中的表。

一定是其他东西弄乱了您的数据集。您确定表 #4 是否首先正确加载到您的 QA 服务器上（即，它不是空的吗？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-03T21:21:17.097

DataSet 被缓存的事实并不重要。

除了显式之外，不能从 DataSet 中删除表。

您必须进行调试以找出发生了什么，从逻辑上讲是以下之一：

*   该表已从数据集中显式删除

*   DataSet 已从缓存中删除并在没有表的情况下重新生成

# apache-flex - Flash 和 CORBA

> ID：338679
> 
> 赞同：3
> 
> 时间：2008-12-03T21:06:50.650
> 
> 标签：apache-flex, actionscript-3, actionscript, corba

如何让 AS3 和/或 Flex/AIR 应用程序与 CORBA 应用程序通信？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-03T18:57:39.810

在有人为 Flex 编写符合 CORBA 的库之前（您可能愿意自己动手​​；），您最好的选择可能是构建一个充当桥梁的“包装器”Web 服务（可通过标准 Flex WebService 对象访问）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-03T22:51:48.973

我认为您需要制作某种代理，例如您连接的 Java 服务器。我认为 AS3 没有任何 CORBA 库。虽然我可能是错的......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-03T17:26:37.503

据我所知，可以从 Flex 调用 Java（至少你会得到很多谷歌搜索结果 :-)）

鉴于如果你可以使用 Java ORB，我会建议做一个实验（我会推荐 JacORB（[http://www.jacorb.org/](http://www.jacorb.org/)），看看你是否可以从 flex 中使用它。

# sql - TSQL：没有值而不是 Null

> ID：338701
> 
> 赞同：3
> 
> 时间：2008-12-03T21:11:41.373
> 
> 标签：sql, sql-server, tsql, null

`null`由于一个奇怪的请求，如果没有价值，我无法放入数据库。我想知道我可以在存储过程中放置​​什么而不是`null`.

例如：

```
insert into blah (blah1) values (null) 
```

“blah1”是否有类似空或空的东西，而不是使用`null`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-03T21:15:14.487

我会拒绝这个奇怪的要求。这正是`NULL`SQL 中的用途，用于表示列中缺失或不适用的值。

请求者是否对 SQL 逻辑感到悲伤`NULL`？

**编辑：** 好的，我已经阅读了您的回复，其中包含有关此工作分配的更多详细信息（顺便说一句，通常您应该编辑原始问题，而不是在答案中发布更多信息）。

您必须将所有列声明为`NOT NULL`并在该列的数据类型的域中指定一个特殊值以表示“无值”。选择的适当值可能因具体情况而异，即零在`person_age`列中可能没有任何意义，但在列中可能有意义`items_in_stock`。

您应该记录每列的无值值。但我想他们也不相信文档。:-(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-03T21:16:00.633

取决于列的数据类型。对于数字（整数等），它可以是零 (0)，但如果是 varchar，那么它可以是一个空字符串 ("")。

我同意其他回应，即 NULL 最适合于此，因为它超越了所有表示没有值的数据类型。因此，零和空字符串可能作为一种解决方法/破解，但它们基本上仍然是实际值本身，可能具有除“不是值”之外的业务领域含义。

（如果只有 SQL 语言支持[“不适用”（N/A）值类型，它可以作为 NULL 的替代品](http://en.wikipedia.org/wiki/Null_(SQL)#Criticisms)......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-03T21:15:50.367

对于您存储的任何内容，null 是否都是有效值？

*   使用 INT32.MaxValue、空字符串或“XXXXXXXXXX”之类的哨兵值，并假设它永远不会是合法值
*   添加一个位列“存在”，您在插入的同时填充为 true。

**编辑：**但是，是的，我同意其他答案，即尝试更改要求可能比尝试解决问题更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-03T21:16:33.080

如果您使用的是 varchar 或等效字段，请使用空字符串。

如果您使用的是诸如 int 之类的数字字段，那么您将不得不强制用户输入数据，否则请提供一个表示 NULL 的值。

我不羡慕你的处境。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-03T21:28:45.333

NULL 作为分配值（例如插入到列中）和 NULL 作为 SQL 工件（对于 OUTER JOIN 的缺失记录中的字段）之间存在差异。这对这些用户来说可能是一个陌生的概念。很多人使用Access 或任何数据库，只是为了维护单表列表。）如果天真的用户更愿意使用替代方法来分配，我不会感到惊讶。虽然令人反感，但它应该可以正常工作。只要让他们使用他们想要的任何东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-03T21:58:34.087

不使用 NULL 值的要求有一定的有效性。当 NULL 值位于将包含在 JOIN 或 WHERE 子句中的字段或将被聚合的字段中时，它们可能会引起很多麻烦。

一些 SQL 实现（例如 MSSQL）不允许 NULLable 字段包含在索引中。

当评估 NULL 是否相等时，MSSQL 尤其会以意想不到的方式表现。当我们搜索最新的记录时，PaymentDue 字段中的 NULL 值是否与零相同？如果我们在表格中有名字而某人没有中间名怎么办。可以想象空字符串或 NULL 都可以存储，但是我们如何获得没有中间名的人的完整列表呢？

一般来说，我更喜欢避免使用 NULL 值。如果您不能使用数字（包括零）或字符串（包括前面提到的空字符串）来表示要存储的内容，那么您可能应该仔细查看您要存储的内容。也许您正试图在一个字段中传达多个数据。

# asp.net - 加载特定 UpdatePanel 后如何调用客户端 javascript 函数

> ID：338702
> 
> 赞同：32
> 
> 时间：2008-12-03T21:11:51.060
> 
> 标签：asp.net, javascript, ajax, updatepanel

## *加载特定*更新面板后，如何调用客户端 javascript 方法？

**`Sys.WebForms.PageRequestManager.getInstance().add_endRequest(EndRequestHandler)`**对我不起作用，因为这将在任何更新面板完成加载后触发，而且我找不到客户端方法来查找哪个是

**`ScriptManager.GetCurrent(Page).AsyncPostBackSourceElementID AsyncPostBackSourceElementID`**对我不起作用，因为这是一个服务器端对象，我想要客户端

ClientSide .Net 框架必须知道它正在更新哪个 UpdatePanel 才能更新正确的内容。肯定有办法参与这个事件吗？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2008-12-03T23:20:07.433

谢谢 - 两个很好的答案。最后我使用了客户端脚本“pageloaded”。这是谷歌没有向我透露的一种相当隐蔽的方法。对于那些感兴趣的人，此代码与 FireBug 一起使用，提供了一个很好的 PageLoaded 方法的演示，用于查找更新的面板：

```
<script type="text/javascript">
        $(document).ready(function() {
            panelsLoaded = 1;
            Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(PageLoaded)
        });

        function PageLoaded(sender, args) {
            console.log("I have occured " + panelsLoaded++ + " times!");

            var panelsCreated = args.get_panelsCreated();
            for (var i = 0; i < panelsCreated.length; i++) {
                console.log("Panels Updating: " + panelsCreated[i].id);
            }

            var panelsUpdated = args.get_panelsUpdated();
            for (var i = 0; i < panelsUpdated.length; i++) {
                console.log("Panels Updating: " + panelsUpdated[i].id);
            }
        }
    </script> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-12-03T21:42:29.860

您可以挂钩[PageRequestManager.beginRequest](http://msdn.microsoft.com/en-us/library/bb397432.aspx)事件并检查[BeginRequestEventArgs.postBackElement](http://msdn.microsoft.com/en-us/library/bb397485.aspx)属性。

请注意，它并没有*真正*为您提供 UpdatePanel，而是 UpdatePanel 内部的控件。不过，这应该足够好了。

编辑：更好的是，[PageRequestManager.pageLoaded](http://msdn.microsoft.com/en-us/library/bb397523.aspx)事件为您提供[PageLoadedEventArgs.panelsUpdated](http://msdn.microsoft.com/en-us/library/bb384016.aspx)（和[panelCreated](http://msdn.microsoft.com/en-us/library/bb397552.aspx)）属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-03T21:41:02.687

这可能是您的解决方案。

在 UpdatePanel 的 OnLoad 事件背后的代码中，注册一个启动脚本。

```
string scriptText = "alert('Bar!');";

ScriptManager.RegisterStartupScript(this.Page, this.GetType(), "foo", scriptText, true); 
```

# hierarchy - 您对本地计算机上的文件进行“folksonomy”标记的方法是什么？

> ID：338703
> 
> 赞同：3
> 
> 时间：2008-12-03T21:11:57.443
> 
> 标签：hierarchy, directory, tagging

早在“delicious”只是“del.icio.us”的时代，我以为每个人最终都明白了[Ontology 被高估](http://www.shirky.com/writings/ontology_overrated.html)了。

那么，为什么我仍然必须使用 sqlite 和一堆 ruby​​ 脚本来滚动我自己的标记系统来解决我自己的本地机器上的这个明显缺陷呢？我可以标记在线 Web 链接、博客文章、stackoverflow.com 上的问题以及各种以 Web 为中心的杂项，但在我接触到的少数几个操作系统中，这个非常基本的概念似乎仍然缺失（或严重瘫痪）采用。也许我只是使用了错误的操作系统？

从我在那里看到的情况来看，pickins 看起来很苗条。

你用什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-04T08:51:06.250

BeOS 操作系统在 1991 年就已经做到了这一点，当时它还没有在网络上流行起来——事实上，当时网络甚至还不存在。有几个受 BeFS 启发的继任者、重新实现和文件系统。包括它们的一些操作系统是[magnussoft ZETA](http://ZETA-OS.Com/ "magnussoft ZETA 操作系统")（已停产的 BeOS 继任者，使用原始 BeFS）、[Haiku OS](http://Haiku-OS.Org/ "俳句操作系统")（BeOS 的开源克隆，以前称为 OpenBeOS，使用 BeFS 的开源重新实现，称为 OpenBeFS）、[SkyOS](http://SkyOS.Org/ "天空操作系统")（专有受 BeOS 启发的商业操作系统，使用 OpenBeOS 的一个分支）和[Syllable](http://Syllable.Org/ "音节操作系统")（受 BeOS 启发的开源操作系统，以前称为 AtheOS，使用受 BeFS 启发的文件系统，称为 AtheOS FS）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-23T00:07:10.430

我不知道，但我同意。我最终组建了一个 MySQL 数据库来处理我的问题。（主要用于组织 JPEG 照片）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-23T16:03:09.003

我不使用标签，我只是没有自律一直这样做。我发现使用 Copernic Desktop Search 等桌面搜索工具进行搜索对我来说效果最好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-23T16:12:11.777

我发现如果我必须输入数据来查找文件，那么我不会这样做。想出好的标签并应用它们需要太多时间。我发现把我的东西放到我能记住的层次结构中并完成它要容易得多。层次结构可能并不完美，查找内容可能需要稍长的时间，但总比花费大量时间为我创建的每个文件输入标签要好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-27T17:34:28.883

您可能会对 GNOME/Nautilus 的一些部分标记解决方案感兴趣。

如果您为 Nautilus 安装 python 绑定，则可以安装 tracker-tags-tab 扩展，它允许您在您选择的文件上设置标签属性，然后使用 Tracker 在搜索中显示它们。

看看[http://svn.gnome.org/svn/tracker/trunk/python/nautilus/](http://svn.gnome.org/svn/tracker/trunk/python/nautilus/)和 python-nautilus 包。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-10T02:14:39.637

**Emacs 组织模式：** [youtube google tech talk](http://www.youtube.com/watch?v=oJTwQvgfgMM&feature=related)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-23T15:51:52.957

[http://pages.stern.nyu.edu/~marriaga/software/oyepa/](http://pages.stern.nyu.edu/~marriaga/software/oyepa/)

丑陋，但它的作品....还有，有发现;）

# c# - 在 C# 中使用 Queue.Synchronized 或 lock() 来确保线程安全会更好吗？

> ID：338712
> 
> 赞同：62
> 
> 时间：2008-12-03T21:13:34.553
> 
> 标签：c#, multithreading, queue

我有一个 Queue 对象，我需要确保它是线程安全的。使用这样的锁定对象会更好：

```
lock(myLockObject)
{
//do stuff with the queue
} 
```

还是建议像这样使用 Queue.Synchronized ：

```
Queue.Synchronized(myQueue).whatever_i_want_to_do(); 
```

通过阅读 MSDN 文档，它说我应该使用 Queue.Synchronized 使其成为线程安全的，但随后它给出了一个使用锁定对象的示例。来自 MSDN 文章：

> 为了保证 Queue 的线程安全，所有的操作都只能通过这个 wrapper 来完成。
> 
> 通过集合进行枚举本质上不是线程安全的过程。即使一个集合被同步，其他线程仍然可以修改该集合，这会导致枚举器抛出异常。为了保证枚举过程中的线程安全，您可以在整个枚举过程中锁定集合，也可以捕获其他线程更改导致的异常。

如果调用 Synchronized() 不能确保线程安全，那有什么意义呢？我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2008-12-03T21:25:12.517

就个人而言，我总是更喜欢锁定。这意味着*您*可以决定粒度。如果您只依赖 Synchronized 包装器，则每个单独的操作都是同步的，但如果您需要做不止一件事（例如遍历整个集合），则无论如何都需要锁定。为了简单起见，我更喜欢只记住一件事——适当地锁定！

编辑：如评论中所述，如果您*可以*使用更高级别的抽象，那就太好了。如果您*确实*使用了锁定，请小心使用它 - 记录您希望在哪里锁定的内容，并在尽可能短的时间内获取/释放锁定（更多的是为了正确性而不是性能）。避免在持有锁时调用未知代码，避免嵌套锁等。

在 .NET 4 中，对更高级别的抽象（包括无锁代码）提供了更多支持*。*无论哪种方式，我仍然不建议使用同步包装器。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2008-12-03T21:49:54.730

旧集合库中的方法存在一个主要问题`Synchronized`，因为它们同步的粒度级别太低（每个方法而不是每个工作单元）。

有一个带有同步队列的经典竞争条件，如下所示，您可以在其中检查`Count`出队是否安全，但随后该`Dequeue`方法会引发异常，指示队列为空。发生这种情况是因为每个单独的操作都是线程安全的，但是`Count`当您查询它和使用该值时，它的值可能会发生变化。

```
object item;
if (queue.Count > 0)
{
    // at this point another thread dequeues the last item, and then
    // the next line will throw an InvalidOperationException...
    item = queue.Dequeue();
} 
```

您可以使用手动锁定整个工作单元（即检查计数*并将*项目出列）安全地编写此代码，如下所示：

```
object item;
lock (queue)
{
    if (queue.Count > 0)
    {
        item = queue.Dequeue();
    }
} 
```

因此，由于您无法安全地将任何内容从同步队列中出列，因此我不会打扰它，只会使用手动锁定。

.NET 4.0 应该有一大堆正确实现的线程安全集合，但不幸的是，这还有将近一年的时间。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2008-12-03T21:19:41.217

对“线程安全集合”的需求与以原子方式对集合执行多个操作的需求之间经常存在紧张关系。

因此 Synchronized() 为您提供了一个集合，如果多个线程同时向其中添加项目，它不会自行破坏，但它不会神奇地为您提供一个知道在枚举期间没有其他人必须触摸它的集合。

除了枚举之外，诸如“这个项目已经在队列中了吗？不，那我会添加它”之类的常见操作也需要比队列更宽的同步。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-12-03T22:29:24.900

这样我们就不需要锁定队列来发现它是空的。

```
object item;
if (queue.Count > 0)
{
  lock (queue)
  {
    if (queue.Count > 0)
    {
       item = queue.Dequeue();
    }
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-03T21:17:14.107

我似乎很清楚，使用 lock(...) {...} 锁是正确的答案。

> **为了保证 Queue 的线程安全，所有的操作都只能通过这个 wrapper 来完成。**

如果其他线程在不使用 .Synchronized() 的情况下访问队列，那么您将陷入困境 - 除非您的所有队列访问都被锁定。

# java - 我可以在 Java 中写入 5GB 文件的末尾吗？

> ID：338719
> 
> 赞同：6
> 
> 时间：2008-12-03T21:15:03.753
> 
> 标签：java, file-io

我可以在 Java 中写入 5GB 文件的末尾吗？这个问题出现在我的办公室，没有人知道答案是什么。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-12-03T21:20:16.317

[使用RandomAccessFile](http://java.sun.com/javase/6/docs/api/java/io/RandomAccessFile.html)应该很容易做到这一点。像下面这样的东西应该可以工作：

```
String filename;

RandomAccessFile myFile = new RandomAccessFile(filename, "rw");

// Set write pointer to the end of the file
myFile.seek(myFile.length());

// Write to end of file here 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-03T21:18:07.897

是的。看看这个链接 RandomAccessFile

[http://java.sun.com/javase/6/docs/api/java/io/RandomAccessFile.html#seek(long)](http://java.sun.com/javase/6/docs/api/java/io/RandomAccessFile.html#seek(long))

也就是说，你打开文件，然后将位置设置到文件的末尾。并从那里开始写作。

告诉我们进展如何。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-03T21:26:19.347

实际上，这将取决于底层文件系统以及该平台上的 JVM 如何实现文件流。因为，如果文件大于 5GB，则无法使用 32 位操作系统打开整个文件并写入它，因为有 43 亿的限制（ 32^2 ）。

所以，答案很快就会是，是的，有可能，如果 Java 正确处理文件并且文件系统是一个好的文件系统:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-03T21:20:56.347

如果您只是意味着您需要附加到文件中，请查看

```
FileWriter(File file, boolean append) 
```

[FileWriter](http://java.sun.com/j2se/1.4.2/docs/api/java/io/FileWriter.html)类中的构造函数。

抱歉，我手头没有 5GB 的文件可供测试。:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-03T21:20:41.713

5GB？我想知道操作系统是否是一个更大的问题，但这值得怀疑。

理论上，您可以以附加模式打开文件。

```
OutputStream in = new java.io.FileOutputStream(fileName, true); 
```

并写到文件系统填满。

有关 char 数据，请参阅[Bill the Lizard](https://stackoverflow.com/questions/338719/can-i-write-to-the-end-of-a-5gb-file-in-java#338750)。

# visual-studio - Bazaar (bzr) 与 Visual Studio 的集成

> ID：338723
> 
> 赞同：12
> 
> 时间：2008-12-03T21:15:47.857
> 
> 标签：visual-studio, version-control, bazaar

在 Visual Studio 2008 中使用 Bazaar (bzr) 作为版本控制系统的最佳方式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-03T21:41:20.893

我发现最好的是[TortoiseBZR](http://bazaar-vcs.org/TortoiseBzr)和命令行 - 没有与 VS 集成。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-03T21:58:37.830

我什至不会打扰 TortoiseBZR；bzr 从命令行非常容易使用。

顺便说一句：我上次尝试它时，TortoiseBZR 曾经锁定 Windows 资源管理器，同时它转到远程存储库以确定文件的状态，不确定它是否仍然这样做......？[另请参阅此 SO 问题](https://stackoverflow.com/questions/151587/how-do-i-disable-tortoise-bzr)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-11-29T00:09:09.797

没有与 Visual Studio 的本机集成，但有一个很好的 GUI 应用程序，称为 Bazaar Explorer。它是官方独立安装程序的一部分，也可以作为 bzr 插件单独安装。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2011-07-01T11:53:28.240

旧的，我知道，但由于这显示在谷歌搜索的顶部，最好的集成方式是 Visual Studio 的外部工具、tbzrcommand.exe 和 bzr.exe 的组合。您可以设置诸如 Status 之类的内容以转到输出窗口，并设置诸如 Diff 之类的内容以转到 tbzrcommand GUI 窗口。

（我假设你已经在这里安装了 TortoiseBzr。）使用这些作为示例，在 VS 中打开 Tools->External Tools，然后添加。对于程序，浏览到 Bazaar 目录并选择 bzr.exe。将命令命名为状态。对于参数，键入“status”（无引号）。选择输出应定向到 vs 输出窗口，命令应在完成时终止。在代码控制下打开一个简单文件并在某处添加一个空格并保存，然后在外部工具下，选择状态以验证它是否显示为待处理的提交操作。（您可以稍后将它们添加到他们自己的菜单中，一旦它们起作用。）

接下来，添加另一个外部命令并将其命名为 Diff。对于程序，浏览到 Bazaar 目录，然后选择 tbzrcommand.exe。对于参数，键入“--command=diff --file=$(TargetPath)”（不带引号）。保留所有未选中的选项。然后，对于上面添加了空格的文件，在解决方案资源管理器窗口中选择它并选择工具-> 差异。应该会出现一个 TortoiseBzr 窗口（以及一个烦人的 DOS 窗口），并显示文件的工作版本和最新提交版本之间的差异。

对于需要注释的提交，您必须输入诸如“commit -m”（无引号）之类的参数并选中该框以提示输入参数（以允许输入提交的消息）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-21T22:12:02.627

[Launchpad 中有一个项目](https://code.launchpad.net/bzr-visualstudio)，但它看起来已经废弃了，当我下载它时，我无法构建它。

这是我对自己感兴趣的事情。在 IDE 中自动跟踪添加、删除和重命名是可行的方法。看状态也不错。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2011-08-06T01:51:21.237

如果您不需要 SCC 集成，只需要使用该工具的能力，请尝试本文中的设置：

[http://www.codeproject.com/KB/macros/Bazaar4VS.aspx](http://www.codeproject.com/KB/macros/Bazaar4VS.aspx)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-01T19:55:30.093

我已将 VisualHG 移植到 Bazaar： [https ://launchpad.net/visualbzr](https://launchpad.net/visualbzr)

它目前是 alpha 版本，仅针对 Visual Studio 2010 构建和测试，但常见操作应该可以正常工作。

编辑：这个插件没有太大进展，但它现在支持 Visual Studio 2012。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-01-13T09:48:47.600

Unified SCC 支持 bzr。它是商业的，但声称对 OSS 项目是免费的。

[统一SCC](http://aigenta.com/products/UnifiedScc.aspx "统一SCC")

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-08-24T12:35:58.407

我也在尝试使用它，发现Visual Studio有一个“外部工具”选项，可以在工具工具栏下找到。试用后，我发现可以创建指向 bzr.exe（或您可能想要使用的任何其他 exe 工具）的链接。然后，它要求争论。在这里你可以开始使用魔法。

对我来说，要直接提交更改，我创建了一个 commit -m "" 的论证，如果工作目录中存在一个 bzr 分支，它会在没有消息的情况下提交到 bzr 分支（为此，您还必须将起始目录更改为解决方案目录）。

我还使用类似的理念为我的启动板创建了一个推送命令

# wpf - 如何在运行时确定应用于对象的样式是否为默认样式？

> ID：338732
> 
> 赞同：1
> 
> 时间：2008-12-03T21:17:32.860
> 
> 标签：wpf, styles

**仅**当当前样式是默认样式时，我才希望能够在运行时将样式应用于对象。我不想覆盖任何用户定义的样式。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-03T22:16:17.483

看来你可以这样做：

```
DependencyPropertyHelper.GetValueSource(
    someControl, FrameworkElement.StyleProperty).BaseValueSource 
    == BaseValueSource.Default; 
```

您可以将其包装在这样的扩展方法中：

```
static public bool HasDefaultStyle(this FrameworkElement item)
{
    return DependencyPropertyHelper.GetValueSource(
        item, FrameworkElement.StyleProperty).BaseValueSource 
        == BaseValueSource.Default;
} 
```

然后你就可以打电话了`someControl.HasDefaultStyle()`。

另外，看看这篇文章： [WPF中的默认模板](http://www.interact-sw.co.uk/iangblog/2007/02/14/wpfdefaulttemplate)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2008-12-03T22:01:29.400

检查 DefaultStyleKeyProperty，它是任何自定义控件的静态属性。

```
string styleKeyName = DefaultStyleKeyProperty.Name; 
```

通常如果没有与控件关联的样式，则名称将为“DefaultStyleKey”

# iphone - iPhone 正确使用 Application Delegate

> ID：338734
> 
> 赞同：58
> 
> 时间：2008-12-03T21:17:55.887
> 
> 标签：iphone, objective-c, cocoa-touch

我希望能够通过我的应用程序中的任何位置引用某些状态/对象。例如，用户登录到他们的应用程序，我需要调用 Web 服务并检索用户信息。然后我希望能够从应用程序中的任何位置访问这些信息，如下所示：

```
myAppDelegate *delegate = [[UIApplication sharedApplication] delegate];
user = delegate.u; 
```

在应用程序委托中将实例变量设置为用户对象并在需要时从那里引用它是一种糟糕的方式吗？我通常在用户登录时将其设置在那里。

想听听专业人士如何处理这个问题。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2008-12-03T23:11:13.037

通常，您应该仅在以下情况下将事物连接到应用程序委托：

*   从与应用程序委托相同的 NIB 文件创建（即单窗口界面中的静态 UI 元素）
*   与通过应用程序委托传递的应用程序级事件处理相关联（如首选项窗口的菜单项）

对于其他所有内容，您应该创建一个管理对它们的访问的单例。

Jason Coco 建议通过应用程序控制器进行路由。在我的程序中，我通常会避免这种情况，因为我认为它把太多的责任放在了顶层——我认为事情应该尽可能自我管理，并且只有在需要同行之间的协调时才应该使用更高级别的管理——级模块。

我不会链接我自己的博客，但如果你用谷歌搜索我和单身人士，你可能会发现我写的一篇更详细的帖子。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2008-12-05T01:08:38.027

马特有点太谦虚了。他在这个主题上的帖子是我读过的最好的帖子之一，值得一个链接。 [http://cocoawithlove.com/2008/11/singletons-appdelegates-and-top-level.html](http://cocoawithlove.com/2008/11/singletons-appdelegates-and-top-level.html)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2008-12-03T21:45:12.460

我认为您的方法没有任何问题。我通常使用单例来处理这种情况：

```
// MyCommon.h:
@interface MyCommon
class MyCommon : NSObject
{
    int user;
};

@property(assign) int user;

+ (MyCommon *)singleton;

@end

// MyCommon.m:
@implementation MyCommon

static MyCommon * MyCommon_Singleton = nil;

+ (MyCommon *)singleton
{
    if (nil == MyCommon_Singleton)
    {
        MyCommon_Singleton = [[MyCommon_Singleton alloc] init];
    }

    return MyCommon_Singleton;
}
@end
```

然后`MyCommon`在我的应用程序中的任何地方使用单例，如下所示：

```
int user = [MyCommon singleton].user;
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-03T21:48:51.673

通常你会向你的应用程序的控制器询问这些信息，它会负责知道如何存储它/在任何存在的数据模型中查找它。您的应用程序的控制器可能与应用程序委托相同，也可能不同（在大多数简单的应用程序中，它是相同的）。

# sql - SQL LIKE '%value%' 的逆

> ID：338739
> 
> 赞同：5
> 
> 时间：2008-12-03T21:18:42.483
> 
> 标签：sql, mysql, database

我有一个包含域名的 MySQL 表：

```
+----+---------------+
| id | domain        |
+----+---------------+
|  1 | amazon.com    |
|  2 | google.com    |
|  3 | microsoft.com |
|    |     ...       |
+----+---------------+ 
```

我希望能够在此表中搜索完整的主机名（即“www.google.com”）。如果表格包含我将使用的完整 URL，则相反：

```
SELECT * FROM table WHERE domain LIKE '%google.com%' 
```

但逆向并不那么简单。我目前的想法是搜索完整的主机名，然后逐步剥离域的每个部分，然后再次搜索。（即搜索“www.google.com”，然后搜索“google.com”）

这不是特别有效或聪明，必须有更好的方法。我确信这是一个普遍的问题，而且毫无疑问很容易解决！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-12-03T21:22:57.997

您也可以使用右侧的列：

```
SELECT domain FROM table WHERE 'www.google.com' LIKE CONCAT('%', domain); 
```

或者

```
SELECT domain FROM table WHERE 'www.google.com' LIKE CONCAT('%', domain, '%'); 
```

它不是特别有效，但它确实有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-03T21:46:27.730

`mysql`您可以使用正则表达式 ( `RLIKE`) 来执行匹配。鉴于此能力，您可以执行以下操作：

```
SELECT * FROM table WHERE 'www.google.com' RLIKE domain; 
```

看起来这种方式`RLIKE`已经实现了，它甚至足够聪明地将该字段中的点（通常是通配符 in `regex`）视为文字点。

`MySQL's`包含正则表达式为您提供了非常强大的解析和搜索字符串的能力。如果您想了解更多关于正则表达式的信息，只需谷歌“ `regex`”。您还可以使用以下链接之一：

[http://en.wikipedia.org/wiki/Regular_expression](http://en.wikipedia.org/wiki/Regular_expression)

[http://www.regular-expressions.info/](http://www.regular-expressions.info/)

[http://www.codeproject.com/KB/string/re.aspx](http://www.codeproject.com/KB/string/re.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-03T21:27:19.050

您可以使用一些 SQL 字符串操作来生成等效的 string.EndsWith()：

```
SELECT * FROM table WHERE  
substring('www.google.com',
len('www.google.com') - len([domain]) ,
len([domain])+1) = [domain] 
```

# c# - 如何找到当前函数调用者的对象实例的类型？

> ID：338740
> 
> 赞同：7
> 
> 时间：2008-12-03T21:18:49.940
> 
> 标签：c#, .net, reflection, logging

目前我有函数 CreateLog() 用于在构造实例的类之后创建带有名称的 log4net 日志。通常用于：

```
class MessageReceiver
{
     protected ILog Log = Util.CreateLog();
     ...
} 
```

如果我们删除大量错误处理，则实现归结为：[编辑：请在本文中进一步阅读较长版本的 CreateLog。]

```
public ILog CreateLog()
{
        System.Diagnostics.StackFrame stackFrame = new System.Diagnostics.StackFrame(1);
        System.Reflection.MethodBase method = stackFrame.GetMethod();
        return CreateLogWithName(method.DeclaringType.FullName);
} 
```

问题是，如果我们将 MessageReceiver 继承到子类中，日志仍将使用 MessageReceiver 的名称，因为这是调用 CreateLog 的方法（构造函数）的声明类。

```
class IMReceiver : MessageReceiver
{ ... }

class EmailReceiver : MessageReceiver
{ ... } 
```

这两个类的实例将获得名称为“MessageReceiver”的日志，而我希望它们被命名为“IMReceiver”和“EmailReceiver”。

我知道这可以通过在调用 CreateLog 时传递对创建对象的引用来轻松完成（并且已经完成），因为对象上的 GetType() 方法可以满足我的要求。

有一些次要原因不喜欢添加参数，我个人对没有找到没有额外参数的解决方案感到不安。

有没有人可以告诉我如何实现从子类而不是声明类获取名称的零参数 CreateLog()？

编辑：

CreateLog 函数做的比上面提到的要多。每个实例有一个日志的原因是能够在日志文件中的不同实例之间有所不同。这是由 CreateLog/CreateLogWithName 对强制执行的。

扩展 CreateLog() 的功能以激发其存在。

```
public ILog CreateLog()
{
        System.Diagnostics.StackFrame stackFrame = new System.Diagnostics.StackFrame(1);
        System.Reflection.MethodBase method = stackFrame.GetMethod();
        Type type = method.DeclaringType;

        if (method.IsStatic)
        {
            return CreateLogWithName(type.FullName);
        }
        else
        {
            return CreateLogWithName(type.FullName + "-" + GetAndInstanceCountFor(type));
        }
} 
```

我也更喜欢写 ILog Log = Util.CreateLog(); 而不是每当我写一个新类时从另一个文件中复制一些长而神秘的行。我知道 Util.CreateLog 中使用的反射不能保证工作 - System.Reflection.MethodBase.GetCurrentMethod() 是否保证工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-03T21:56:02.783

通常，[MethodBase.ReflectedType](http://msdn.microsoft.com/en-us/library/system.reflection.memberinfo.reflectedtype.aspx)会有你的信息。但是，根据 MSDN [StackFrame.GetMethod](http://msdn.microsoft.com/en-us/library/system.diagnostics.stackframe.getmethod.aspx)：

> 当前正在执行的方法可能是从基类继承的，尽管它是在派生类中调用的。在这种情况下，GetMethod 返回的 MethodBase 对象的 ReflectedType 属性标识基类，而不是派生类。

这意味着你可能不走运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-04T00:11:22.180

我想你可能问错了问题。首先，记录器对于每个类应该是静态的——每个类都应该声明自己的记录器（以确保正确报告类名，并允许从配置文件中选择性地报告按项目或命名空间过滤的日志消息。

其次，您创建此方法似乎只是为了识别调用类的名称？如果是这样，我们使用粘贴到每个类中的样板代码：

```
private static ILog log = 
log4net.LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType); 
```

因为它是私有的，所以你确保你的继承类必须声明它们自己的记录器，而不是使用你的。因为它是静态的，所以您确保查找记录器的开销只发生一次。

如果您有不同的原因对 Util.CreateLog() 方法进行编码，我深表歉意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-03T21:24:44.343

> 有没有人可以告诉我如何实现从子类而不是声明类获取名称的零参数 CreateLog()？

我认为您无法通过查看堆栈框架来做到这一点。

虽然您的课程是，但对方法`IMReceiver`的调用在课程中。堆栈帧必须告诉你从哪里调用该方法，否则它不会有任何用处，所以它总是会说`CreateLog``MessageReceiver``MessageReceiver`

如果您`CreateLog`在您的和其他类中显式调用`IMReceiver`，那么它会起作用，因为堆栈框架显示了在派生类中调用的方法（因为它实际上是）。

这是我能想到的最好的事情：

```
class BaseClass{
  public Log log = Utils.CreateLog();
}
class DerivedClass : BaseClass {
  public DerivedClass() {
    log = Utils.CreateLog();
  }
} 
```

如果我们跟踪日志的创建，我们会得到：

```
new BaseClass();
# Log created for BaseClass

new DerivedClass();
# Log created for BaseClass
# Log created for DerivedClass 
```

第二个“为派生类创建的日志”会覆盖实例变量，因此您的代码将正常运行，您只需创建一个 BaseClass 日志，该日志会立即被丢弃。这对我来说似乎很笨拙和不好，我只是在构造函数中指定类型参数或使用泛型。

恕我直言，指定类型比在堆栈框架中四处寻找更干净

如果您可以在不查看堆栈帧的情况下获得它，那么您的选择会大大扩展

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-03T22:02:23.220

尝试 StackTrace.GetFrames 方法。它返回调用堆栈中所有 StackFrame 对象的数组。您的来电者应该在索引一。

```
class Program
{
    static void Main(string[] args)
    {
        Logger logger = new Logger();
        Caller caller = new Caller();
        caller.FirstMethod(logger);
        caller.SecondMethod(logger);
    }
}

public class Caller
{
    public void FirstMethod(Logger logger)
    {
        Console.Out.WriteLine("first");
        logger.Log();
    }

    public void SecondMethod(Logger logger)
    {
        Console.Out.WriteLine("second");
        logger.Log();
    }
}

public class Logger
{
    public void Log()
    {
        StackTrace trace = new StackTrace();
        var frames = trace.GetFrames();
        Console.Out.WriteLine(frames[1].GetMethod().Name);
    }
} 
```

这输出

第一第一方法 第二第二方法

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-13T17:33:25.563

走上堆栈检查基类 - 派生类关系。

```
 var type = new StackFrame(1).GetMethod().DeclaringType;
        foreach (var frame in new StackTrace(2).GetFrames())
            if (type != frame.GetMethod().DeclaringType.BaseType)
                break;
            else
                type = frame.GetMethod().DeclaringType;
        return CreateLogWithName(type.FullName); 
```

您可能需要检查检查的方法是否为构造函数。但是如果子类在构造函数之外的方法中实例化超类，可能仍然需要当前行为。

# javascript - 如何在有序列表中插入 DOM 元素（在 Dojo 中）？

> ID：338748
> 
> 赞同：1
> 
> 时间：2008-12-03T21:20:30.887
> 
> 标签：javascript, ajax, sorting, dojo, list

我正在尝试提交 AJAXy 并将生成的部分插入到我的列表中的适当位置。我可以想到几个选项，但没有一个是非常好的：

选项 1：返回 JSON，用 Javascript 进行渲染。这似乎是呈现这个的错误位置，特别是因为列表本身是在我的应用程序服务器中呈现的。不过，它的好处是可以轻松访问要排序的值 ( `response.full_name`)。

选项 2：返回一个 HTML 片段，解析出排序值。在 Javascript 中解析 HTML 可能比渲染它更糟糕。

选项 3：返回一个 HTML 片段，该片段还包含一个`<script>`被评估的部分。这可以将 DOM 节点添加到主列表，然后进行 JS 调用以将其自身插入到正确的位置。这里的缺点是 IE 在或被调用时不会评估`<script>`标签。`innerHTML``appendChild`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-03T21:55:30.897

我个人会做#1。将服务器端生成的 HTML 与客户端生成的 HTML 相结合并没有错，但如果这是一个复杂的过程，最好将其保存在一个地方（在您的情况下是在服务器上）。因此，您可能希望返回（作为 JSON）两个值：排序值和 HTML 片段。

之后就很简单了：找到位置，实例化片段（例如，使用[dojo.html.set() ），然后用](http://bugs.dojotoolkit.org/browser/dojo/trunk/html.js#L315)[dojo.place()](http://bugs.dojotoolkit.org/browser/dojo/trunk/_base/html.js#L142)放置它。或者直接就地实例化它。

# sharepoint - 如何应对对自定义开发的恐惧

> ID：338757
> 
> 赞同：8
> 
> 时间：2008-12-03T21:23:10.117
> 
> 标签：sharepoint, cots

我正在与我现在的雇主处理一个问题，这让我认真考虑在其他地方寻找工作。他们的印象是应该消除 100% 的定制开发并用 COTS 产品（例如 SharePoint）代替。虽然我意识到这不是一个现实的期望，但我发现不可能与持有这些观点的管理层争论我的观点。他们的论点通常涉及类似于 SharePoint 中已经存在的涵盖功能 X 的功能，因此涉及的风险较小，并且不必针对它进行测试。

例如，我们有一种情况，SharePoint 列表完全**无法**满足客户的期望和要求。但是，将这些数据保存在 SQL 数据库中很容易满足要求。然而，每当我们的开发团队建议超出 SharePoint 的边界时，管理层就会对每行代码如何增加项目的复杂性并增加风险感到愤怒。虽然在某些情况下确实如此，但并非总是如此。然而，他们的论点是，由于 SharePoint 提供了一种存储数据的机制，我们应该 100% 的时间使用它。不管它是否满足客户的要求。

我已经到了讨厌上班的地步，因为我经常被迫做我知道（100% 确定）不正确的事情，而这可以通过定制开发来解决。然而，在我工作的地方，这似乎是一个不可能的论点。

大家有没有遇到过类似的情况？如果是这样，您为应对这些挑战做了哪些工作？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-12-03T21:29:55.720

如果你不认同公司的愿景，如果你不能启发他们，那么可以肯定，现在是开始寻找的好时机。

您是否指出，在对客户没有帮助或缺少功能或无法使用的情况下强制执行“解决方案”存在风险？

也许想出解决和减轻他们感知到的风险的计划。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-12-03T21:32:31.627

你记录你的担忧并让你上面的人知道他们，然后你按照他们的要求去做。如果它不起作用，您有文档说明您提出了这些问题。但是试着让它按照他们的方式运作，所以看起来你不是在试图破坏他们的计划。他们承担了更大的风险，因此他们承担了更大的责任。尽你最大的努力让它按自己的方式工作，不要担心它。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-12-03T21:37:44.753

这听起来可能很糟糕，可能不是您想要的答案。我办公室里有一个鲜为人知的部门，叫做“臭鼬工厂”。人们根据自己的意愿（通常在午休时间或编译时间）决定编写有助于公司的小程序。有趣的是，结果不会“花费”公司任何东西。

对话通常是这样的：

“我们需要购买这个软件”-老板

“但是，我们已经有几个月的时间了。约翰，那天写的”-程序员

“？” -老板

很多时候，开发人员认为一个决定是不好的，只是创建了一个自动发生的并行过程。然后，当这些东西击中粉丝并且客户感到沮丧时，替代解决方案已经到位。

我有一个自动释放机的例子。开发人员用于创建这些自定义报告。随着我们客户的增加，开发人员的工作量也随之增加。问题是“为了让客户获得自定义报告，开发人员必须参与其中”。因此，当公司正在考虑聘请某人全职做报告或想办法让客户做报告时，我编写了一个自动发布机器，它会查找报告更改并将它们直接发布给客户。我还编写了一个实用程序，允许任何人对报告进行更改，这比开发人员所拥有的更易于使用。当老板宣布试图找到解决方案时，我告诉他已经到位，甚至他也可以对报告进行更改并发布。现在，每个人都可以更改报告，通常是管理层和客户支持做出这些改变。有趣的一面是开发人员不再参与其中。

去做就对了。如果你还是要戒烟，不妨试试。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-03T21:31:21.163

管理层是否有人拥有 SharePoint 中的股票？系统是总裁的弟弟开发的吗？

如果他们对改变有那么大的抵抗力，你应该在试图与他们争论之前找出真正的原因。他们可能会声称增加了复杂性、难度测试等，但如果你可以用一个表明他们立场的论点来反驳每一个论点，恕我直言，他们仍然不会讨论，那么你可能在争论错误的点。

如果他们由于非技术原因而被锁定在技术中，例如有人曾经读到 SharePoint 在任何技术情况下都是终极的（当然，除了 SharePoint = 好，他们不知道这篇文章在谈论什么）那么你不应该费心去争论并节省你的精力。为了找工作。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-12-03T21:32:58.070

向他们证明这一点。当需求要求一个可以通过多列排序处理 100,000 个项目的列表时 - 编写一个脚本，将 100,000 个测试项目添加到共享点列表中并让他们尝试，最好让“客户”请求列表监视。:-)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-12-03T21:35:37.283

如果我是你，我肯定会把我的简历公开。不仅你目前的经历令人沮丧，而且从长远来看，它真的会损害你的职业发展。考虑一下。当您在当前职位上与当前雇主苦苦挣扎时，其他开发人员正在采用新技术并扩展他们的经验。

开发人员之间存在意识形态差异以及公司对开发人员角色的看法。如果公开讨论和坦率让你一事无成，你不会因为缺乏努力而受到指责。对公司忠诚是一件好事，但关系需要是双向的。

可悲的是，最终可能会意识到他们的假设是错误的——但你不能等待那一天的到来。有时它永远不会到来。特别是（不要误会我的意思，我喜欢 SharePoint，因为它被用于它的用途），SharePoint 成为下一个 Access，因为阅读管理杂志的人看到了足够多的它，称它为弥赛亚。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-12-05T13:45:09.337

我发现通常没有办法仅仅通过谈话来“赢得”这些辩论。许多经理通过阅读面向管理的文章来形成对产品或解决方案的看法。看看你能不能找到一些反击文章。

如果您可以举出 SharePoint 无法做到的事情的示例，并展示如何通过自定义开发以**经济高效**的方式解决这些问题的示例，那么您就可以顺利进行。

错误是试图让这成为一个关于技术的对话，而不是关于效率、成本效益和可维护性的对话——这些都是会影响非技术经理考虑替代方案的口头禅和指标。

如果您可以为其中一些问题提供概念证明，那就更好了，眼睛糖果确实有助于在技术团队之外进行销售。

最后，祝你好运：）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-03T21:30:04.923

我在目前的工作中也在做同样的事情，没有简单的方法来处理这种情况。我所能做的就是吞下我的论点，因为他们无处可去，并按照我的管理层的要求去做。这将违背你的基本程序员本性，即为手头的任务使用最佳解决方案，并且可能会在此过程中构建一些很酷的东西，但由于他们是老板，这确实是你唯一的解决方案。您可以尝试在有证据的情况下找到使用自定义解决方案更有意义的案例。但如果你的老板和我的一样，在尖叫比赛开始之前它不会走得太远。唯一的其他解决方案是清理简历并找到新工作。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-12-03T21:34:06.367

从第一天开始，我就面临着同样的挑战。管理层自然不愿意将自定义代码添加到解决方案中。但是，在大多数情况下，可以解释为客户的正确解决方案将包含一些自定义代码。

请记住，如果您认为可以在通用代码库中包含自定义代码，那么老板可能会批准这个想法。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-12-03T21:36:34.350

我真切地感受到你的痛苦。

如果是我，我会利用业余时间收集证明我观点的信息，并以易于理解的方式记录下来。

如果他们只了解金钱，谈论金钱，如果他们只了解恐惧（因为害怕“那个”而做“这个”），利用恐惧，在“他们的”解决方案中为他们找到可怕的东西。

记录每一个新的实施、时间、金钱和出现的问题。并记录您的解决方案。

他们可能没有在他们的解决方案中看到问题，因为他们专注于在“您的”解决方案中没有问题。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-12-03T23:24:16.630

我曾在一个管理层在他们的方法上没有建设性的地方工作，没有你描述的那么糟糕，但已经够糟糕了。

有几个选项。一种是继续使用最佳的“物有所值”选项为客户做需要做的事情。您可能必须将开发人员作为一个团队聚集在一起，以使这种“公民抗命”发挥作用。

一个真正让粉丝大吃一惊的更有力的方法是去找客户（如果它是外部客户或者如果你想保住你的工作，不要这样做），并说明会发生什么如果 X 和 Y 的项目。这几乎是在讲学校外的故事，而且会很糟糕，但很有趣。

一个稍微好一点的方法是上链，找一个可以为你制造麻烦的赞助商。基本上落后于你的老板。这可能会奏效，但它将对您与管理层的关系产生可预测的结果。

最后也是最难的是找出那些认为任何自定义代码都是不好的观点的人，并让他们参与对话，找出他们从哪里得到的信念，并用例子来反驳。强调对话，因为您必须倾听并理解他们潜在的担忧（这与自定义代码本身无关），并且只有在您获得人们的信任后才能解决它们。

我不能告诉你哪种做事方式最有效，因为这在很大程度上取决于所涉及的个人。我所知道的是，你无法改变人，根据我的经验，迄今为止解决问题的最佳方法是离开并与不那么好的人一起工作......

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2010-06-25T17:38:44.130

不叫它自定义代码怎么样。相反，如果您将其称为“预期的 SharePoint 用户扩展”或其他名称，它可能会缓和围绕特定术语的误解。

此外，正如已经说过的，管理层正在推动这一议程可能还有其他隐藏的原因。最好不要过快地猜测这些，因为很多都是有效的。

Finally, there are alot of places that need development. it doesnt hurt to look for a better match.

good luck.

# graphics - 如何计算 glsl 中两条法线之间的角度？

> ID：338762
> 
> 赞同：6
> 
> 时间：2008-12-03T21:25:16.010
> 
> 标签：graphics, geometry, glsl, angle, fresnel

如何计算 glsl 中两条法线之间的角度？我正在尝试将菲涅耳效果添加到对象的外边缘（将该效果与 phong 着色相结合），我认为角度是我唯一缺少的东西。

片段着色器：

```
varying vec3 N;
varying vec3 v;

void main(void) {
  v = vec3(gl_ModelViewMatrix * gl_Vertex);
  N = normalize(gl_NormalMatrix * gl_Normal);
  gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;
} 
```

顶点着色器：

```
varying vec3 N;
varying vec3 v;

void main(void) {
  vec3 L = normalize(gl_LightSource[0].position.xyz - v);
  vec3 E = normalize(-v);
  vec3 R = normalize(-reflect(L,N));

  vec4 Iamb = gl_FrontLightProduct[0].ambient
  vec4 Idiff = gl_FrontLightProduct[0].diffuse * max(dot(N,L), 0.0);
  vec4 Ispec = gl_FrontLightProduct[0].specular * pow(max(dot(R,E),0.0), gl_FrontMaterial.shininess);
  vec4 Itot = gl_FrontLightModelProduct.sceneColor + Iamb + Idiff + Ispec;

  vec3 A = //calculate the angle between the lighting direction and the normal//
  float F = 0.33 + 0.67*(1-cos(A))*(1-cos(A))*(1-cos(A))*(1-cos(A))*(1-cos(A));
  vec4 white = {1.0, 1.0, 1.0, 1.0};

  gl_FragColor = F*white + (1.0-F)*Itot;
} 
```

不同的vec3

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-12-04T11:17:30.497

两个向量之间的点积将返回角度的余弦（在 GLSL 中它是 dot(a,b)）。取其反余弦将以弧度返回角度（在 GLSL 中为 acos(x)）。

点积很便宜，反余弦很贵。

然而，菲涅耳效应并不真正需要角度。仅在向量之间有点结果就足够了。菲涅耳效应有很多近似值，最便宜的一种是直接使用点。或将其平方（x * x），或提高到其他幂。

在上面的着色器中，看起来您只想将 dot 提高到 5 次方。就像是：

```
float oneMinusDot = 1.0 - dot(L, N);
float F = pow(oneMinusDot, 5.0); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-03T21:34:27.973

从两个向量的点积可以得到它们之间角度的余弦

```
cos A = DotProduct(v1, v2) / (Length(v1) * Length(v2)) 
```

使用它，您在计算 F 时不需要计算余弦。由于您的向量是单位向量，例如长度为 1，您甚至可以避免除法。

# wpf - 样式化 WPF 的 ListView 标题的悬停颜色

> ID：338763
> 
> 赞同：4
> 
> 时间：2008-12-03T21:26:09.737
> 
> 标签：wpf

任何人都知道如何设置 WPF ListView 的标题悬停颜色？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-12-03T22:35:53.543

您必须为该`GridView.ColumnHeaderContainerStyle`属性创建一个样式。通过为样式设置一些触发器来添加悬停效果。

例如：

```
 <ListView VerticalAlignment="Bottom" Height="63" IsSynchronizedWithCurrentItem="True">
        <ListView.View>
            <GridView ColumnHeaderContainerStyle="{StaticResource GridViewColumnHeaderStyle1}" >
                <GridViewColumn/>
            </GridView>
        </ListView.View>
    </ListView> 
```

并且可以像这样创建样式：

```
 <Style x:Key="GridViewColumnHeaderStyle1" TargetType="{x:Type GridViewColumnHeader}">
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="true">
                <Setter Property="Background" Value="Green"/>
            </Trigger>
        </Style.Triggers>
    </Style> 
```

# c# - ServiceController.Start(字符串[])

> ID：338766
> 
> 赞同：1
> 
> 时间：2008-12-03T21:26:20.347
> 
> 标签：c#

我正在尝试启动具有指定端口号的参数的服务。例如，使用 DOS 网络，我将执行以下操作：

```
net start "SERVICENAME" /"ARGUMENT" 
```

我如何在 C# 中使用 Service.Controller.Start() 做同样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-03T21:52:00.747

这应该有效：

```
var sc = new ServiceController() { Name = "SERVICENAME" };
sc.Start(new string[] { "ARGUMENT" });
sc.WaitForStatus(ServiceControllerStatus.Running); 
```

# python - 将python缩进从空格转换为制表符的工具？

> ID：338767
> 
> 赞同：11
> 
> 时间：2008-12-03T21:26:25.760
> 
> 标签：python, indentation

我有一些使用空格进行缩进的 .py 文件，我想将它们转换为制表符。

我可以使用正则表达式轻松地将某些东西拼凑在一起，但我可以想到几种这种方法可能会失败的边缘情况。是否有一种工具可以像 python 解释器一样通过解析文件和确定缩进级别来做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-12-03T21:31:56.123

如果要转换的文件不多，可以在[vim](http://www.vim.org/)中打开，然后使用`:retab`命令。

有关更多信息，请参阅[vim 文档](http://www.vim.org/htmldoc/usr_30.html#30.5)。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-12-03T22:10:01.007

Python 包含一个相反的脚本（制表符到空格）。这是`C:\Python24\Tools\Scripts\reindent.py`给我的

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-02-04T11:14:03.323

:retab 将用空格交换制表符，并且 :retab! 将用制表符交换空格。1 个制表符 = 4 个空格，4 个空格 = 1 个制表符，具体取决于您的制表符设置。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2010-02-14T00:37:51.507

If you use Linux, you might also play around with [unexpand](http://manpages.ubuntu.com/manpages/karmic/en/man1/unexpand.1.html):

> Convert blanks in each FILE to tabs, writing to standard output. With no FILE, or when FILE is -, read standard input.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-12-03T22:20:22.000

在 emacs 中，`M-x tabify`将尽可能将空格转换为制表符。您可能需要`tab-width`适当地设置变量。

我不知道这是否解决了您对空格的解释方式与 python 解释器相同的问题，但您始终可以加载 python-mode 并使用`M-x indent-region`.

# python - Python 错误“ImportError：未命名模块”

> ID：338768
> 
> 赞同：561
> 
> 时间：2008-12-03T21:26:28.253
> 
> 标签：python, importerror, python-import

Python 安装在本地目录中。

我的目录树如下所示：

```
(local directory)/site-packages/toolkit/interface.py 
```

我的代码在这里：

```
(local directory)/site-packages/toolkit/examples/mountain.py 
```

为了运行这个例子，我写了`python mountain.py`，在我的代码中：

```
from toolkit.interface import interface 
```

我得到了错误：

```
Traceback (most recent call last):
  File "mountain.py", line 28, in ?
    from toolkit.interface import interface
ImportError: No module named toolkit.interface 
```

我已经检查过了`sys.path`，那里有目录`/site-packages`。此外，我`__init__.py.bin`在工具包文件夹中有文件，以向 Python 表明这是一个包。`__init__.py.bin`我在示例目录中也有一个。

我不知道为什么 Python 在`sys.path`. 有任何想法吗？会不会是权限问题？我需要一些执行权限吗？

* * *

## 回答 #1

> 赞同：310
> 
> 时间：2008-12-04T00:17:40.203

根据您对 orip 帖子的评论，我想这就是发生的事情：

1.  您`__init__.py`在 Windows 上进行了编辑。
2.  Windows 编辑器添加了一些非打印的内容，可能是回车（Windows 中的行尾是 CR/LF；在 unix 中只有 LF），或者可能是 CTRL-Z（Windows 文件结尾）。
3.  您使用 WinSCP 将文件复制到您的 unix 机器上。
4.  WinSCP 想：“这有一些不是基本文本的东西；我会放一个 .bin 扩展名来表示二进制数据。”
5.  缺少的`__init__.py`（现在称为`__init__.py.bin`）意味着 python 不将工具包理解为一个包。
6.  您`__init__.py`在适当的目录中创建并且一切正常......？

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2008-12-03T21:50:15.477

做

```
(local directory)/site-packages/toolkit 
```

有`__init__.py`吗？

要使导入*遍历*您的目录，每个目录都必须有一个`__init__.py`文件。

* * *

## 回答 #3

> 赞同：79
> 
> 时间：2014-04-22T03:52:48.153

当我在 LPTHW 中做这个练习时，我遇到了非常相似的事情。我永远无法让 Python 识别出我调用的目录中有文件。但我最终能够让它工作。我所做的，以及我推荐的，是试试这个：

（注意：从您最初的帖子中，我假设您使用的是基于 *NIX 的机器并从命令行运行，因此此建议是针对此量身定制的。由于我运行 Ubuntu，这就是我所做的）

1.  将目录 (cd) 更改为文件所在目录*之上的目录。*在这种情况下，您尝试运行该`mountain.py`文件，并尝试调用`toolkit.interface.py`位于不同目录中的模块。在这种情况下，您将转到包含这两个文件的路径的目录（或者换句话说，这两个文件的路径共享的最近的目录）。在这种情况下是`toolkit`目录。

2.  当您在`tookit`目录中时，在命令行中输入这行代码：

    `export PYTHONPATH=.`

    这会将您的 PYTHONPATH 设置为“。”，这基本上意味着您的 PYTHONPATH 现在将在您当前所在的目录中查找任何被调用的文件（更重要的是，在您所在目录*的子目录分支*中。因此，它不仅会查看当前目录，还会查看当前目录中的所有**目录**）。

3.  在上述步骤中设置好 PYTHONPATH 后，从当前目录（`toolkit`目录）运行模块。Python 现在应该找到并加载您指定的模块。

希望这可以帮助。我自己对此感到非常沮丧。

* * *

## 回答 #4

> 赞同：42
> 
> 时间：2011-03-04T21:14:56.640

在 *nix 上，还要确保 PYTHONPATH 配置正确，尤其是它具有以下格式：

```
 .:/usr/local/lib/python 
```

（注意`.:`开头的，这样它也可以搜索当前目录。）

它也可能位于其他位置，具体取决于版本：

```
 .:/usr/lib/python
 .:/usr/lib/python2.6
 .:/usr/lib/python2.7 and etc. 
```

* * *

## 回答 #5

> 赞同：33
> 
> 时间：2019-02-08T16:57:17.503

您正在阅读此答案，说明您`__init__.py`在正确的位置，您已经安装了所有依赖项，并且您仍然获得`ImportError`.

我遇到了类似的问题，除了我的程序在使用 PyCharm 运行时运行良好，但是当我从终端运行时出现上述错误。进一步挖掘后，我发现`PYTHONPATH`没有项目目录的条目。因此，我设置`PYTHONPATH`的每个[Import 语句都适用于 PyCharm，但不适用于终端](https://stackoverflow.com/q/40304117/608639)：

```
export PYTHONPATH=$PYTHONPATH:`pwd`  (OR your project root directory) 
```

还有另一种方法可以使用`sys.path`as：

```
import sys
sys.path.insert(0,'<project directory>') OR
sys.path.append('<project directory>') 
```

您可以根据您希望搜索项目的顺序使用插入/追加。

* * *

## 回答 #6

> 赞同：25
> 
> 时间：2019-08-22T16:02:29.053

对我来说，这是一件非常愚蠢的事情。我使用安装库，`pip3 install`但正在运行我的程序，`python program.py`而不是`python3 program.py`.

* * *

## 回答 #7

> 赞同：24
> 
> 时间：2017-01-04T17:53:35.573

使用`PyCharm`（JetBrains 套件的一部分）您需要将脚本目录定义为 Source：
`Right Click > Mark Directory as > Sources Root`

* * *

## 回答 #8

> 赞同：23
> 
> 时间：2008-12-04T01:11:08.473

我自己解决了自己的问题，我会写一个错误的总结和解决方法：

该文件需要准确调用`__init__.py`。如果扩展名不同，例如我的情况，`.py.bin`则 Python 无法在目录中移动，然后找不到模块。要编辑文件，您需要使用 Linux 编辑器，例如[vi](http://en.wikipedia.org/wiki/Vi)或[nano](https://en.wikipedia.org/wiki/GNU_nano)。如果您使用 Windows 编辑器，这将写入一些隐藏字符。

另一个影响它的问题是我安装了另一个 Python 版本，所以如果有人正在使用本地安装的 python，请确保运行程序的 Python 安装是本地 Python。要检查这一点，只需执行`which python`，并查看可执行文件是否是您本地目录中的可执行文件。如果不是，请更改路径，但请确保本地 Python 目录在其他 Python 之前。

* * *

## 回答 #9

> 赞同：20
> 
> 时间：2017-09-18T15:30:28.033

一个简单的解决方案是使用 sudo 安装模块，`python -m pip install <library-name>`而不是`pip install <library-name>` 在管理员限制的情况下使用

* * *

## 回答 #10

> 赞同：18
> 
> 时间：2008-12-03T21:31:53.267

要将目录标记为包，您需要一个名为 的文件`__init__.py`，这有帮助吗？

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2019-05-11T19:34:13.363

对于所有仍然有这个问题的人。我相信 Pycharm 与导入混淆了。对我来说，当我写“从命名空间导入某些东西”时，前一行用红色下划线表示，表示存在错误，但有效。但是，''from .namespace import something' 没有下划线，但也不起作用。

尝试

```
try:
    from namespace import something 
except NameError:
    from .namespace import something 
```

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2009-01-07T14:22:01.090

是的。您需要包含`__init__.py`文件的目录，该文件是初始化包的文件。来，看看[这个](http://docs.python.org/tutorial/modules.html)。

> 需要 __init__.py 文件才能使 Python 将目录视为包含包；这样做是为了防止具有通用名称（例如字符串）的目录无意中隐藏了稍后出现在模块搜索路径上的有效模块。在最简单的情况下，__init__.py 可以只是一个空文件，但它也可以执行包的初始化代码或设置 __all__ 变量，稍后将介绍。

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2014-01-09T19:45:22.150

1.  您必须将文件 __ init__.py 放在与您要导入的文件相同的目录中。
2.  您不能尝试从 PYTHONPATH 上配置的 2 个文件夹中导入具有相同名称的文件。

例如：/etc/环境

PYTHONPATH=$PYTHONPATH:/opt/folder1:/opt/folder2

/opt/folder1/foo

/opt/folder2/foo

而且，如果您尝试导入 foo 文件，python 将不知道您想要哪个。

从 foo 导入 ... >>> 导入错误：没有名为 foo 的模块

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2014-09-06T11:17:22.883

我的两分钱：

![在此处输入图像描述](https://i.stack.imgur.com/oHpHx.jpg)

吐：

```
Traceback (most recent call last):
      File "bash\bash.py", line 454, in main
        import bosh
      File "Wrye Bash Launcher.pyw", line 63, in load_module
        mod = imp.load_source(fullname,filename+ext,fp)
      File "bash\bosh.py", line 69, in <module>
        from game.oblivion.RecordGroups import MobWorlds, MobDials, MobICells, \
    ImportError: No module named RecordGroups 
```

这让我很困惑 - 浏览了一些帖子和帖子，这些帖子暗示了丑陋的 syspath 黑客（正如你所看到的那样`__init__.py`）。事实证明，game/oblivion.py 和 game/oblivion 混淆了 python，它吐出了相当无用的“没有名为 RecordGroups 的模块”。我对记录此（同名）行为的解决方法和/或链接感兴趣-> EDIT（2017.01.24）-看看[如果我有一个模块和一个同名的包怎么办？](https://www.python.org/doc/essays/packages/)有趣的是，通常*包*优先，但显然我们的启动器违反了这一点。

编辑（2015.01.17）：我没有提到我们使用[这里](https://stackoverflow.com/questions/27193586/file-string-in-python-traceback/27202474#27202474)剖析的[自定义启动器](https://github.com/wrye-bash/wrye-bash/blob/dev/Mopy/Wrye%20Bash%20Launcher.pyw#L47-L80)。

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2016-07-21T18:51:03.467

通过编写解决了我的问题`print (sys.path)`，发现尽管进行了全新安装，但 python 仍在使用过时的软件包。删除这些使 python 自动使用正确的包。

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2017-05-02T06:41:36.897

如果您尝试了上面提供的所有方法但都失败了，那么您的模块可能与内置模块**同名。**或者，具有**相同名称**的模块存在于`sys.path`比您的模块具有高优先级的文件夹中。

要调试，请说出您的`from foo.bar import baz`抱怨`ImportError: No module named bar`。更改为`import foo; print foo`，这将显示 的路径`foo`。这是你所期望的吗？

如果不是，请重命名`foo`或使用[绝对导入](https://docs.python.org/3/whatsnew/2.5.html#pep-328)。

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2019-02-18T03:35:13.410

就我而言，因为我使用 PyCharm 和 PyCharm 为项目文件夹中的每个项目创建一个“venv”，但它只是 python 的一个迷你环境。虽然您已经在 Python 中安装了所需的库，但在您的自定义项目 'venv' 中，它不可用。这就是 PyCharm 中出现“ImportError: No module named xxxxxx”的真正原因。要解决此问题，您必须通过以下步骤将库添加到您的项目自定义环境中：

*   在 PyCharm 中，从菜单“文件”-> 设置
*   在设置对话框中，项目：XXXProject->Project Interpreter
*   单击“添加”按钮，它将显示“可用包”对话框
*   搜索您的库，单击“安装包”
*   然后，您需要的所有软件包都将安装在您的项目自定义“venv”文件夹中。

[![设置对话框](https://i.stack.imgur.com/SFpY9.png)](https://i.stack.imgur.com/SFpY9.png)

享受。

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2013-09-04T02:52:25.287

就我而言，问题是我正在链接到*debug* `python` & `boost::Python`，这要求扩展名是`FooLib_d.pyd`; 而不仅仅是`FooLib.pyd`; 重命名文件或更新`CMakeLists.txt`属性修复了错误。

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2014-05-30T22:50:26.000

Linux：导入的模块位于 /usr/local/lib/python2.7/dist-packages

如果您使用的是用 C 编译的模块，请不要忘记在 .so 文件之后对 .so 文件进行 chmod `sudo setup.py install`。

```
sudo chmod 755 /usr/local/lib/python2.7/dist-packages/*.so 
```

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2018-03-27T12:41:07.173

我的问题是我将带有`__init__.py`文件的目录添加到 PYTHONPATH，而实际上我需要添加它的父目录。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2014-08-08T08:36:19.993

在遇到同样的问题后，我发现我的解决方案是`pyc`从我的项目中删除所有文件，似乎这些缓存的文件以某种方式导致了这个错误。

我发现执行此操作的最简单方法是在 Windows 资源管理器中导航到我的项目文件夹并搜索`*.pyc`，然后选择所有 ( `Ctrl`+ `A`) 并删除它们 ( `Ctrl`+ `X`)。

可能我可以通过删除特定`pyc`文件来解决我的问题，但我从未尝试过

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2015-12-05T07:21:41.063

我遇到了同样的问题：`Import error`。此外，该库已 100% 正确安装。问题的根源是在我的 PC 上安装了 Python 3 版本（anaconda 数据包）。这就是为什么图书馆没有安装到正确的位置。之后，我只是在我的 IDE PyCharm 中更改为正确版本的 python。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2016-12-13T11:45:14.073

我有同样的错误。这是由于有人在与我的脚本相同的文件夹中创建了一个文件夹，该文件夹的名称与我从其他地方导入的模块冲突。它没有导入外部模块，而是查看了这个显然不包含预期模块的文件夹。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2018-05-27T23:49:12.480

我有同样的问题（Python 2.7 Linux），我找到了解决方案，我想分享它。就我而言，我的结构如下：

```
Booklet
-> __init__.py
-> Booklet.py
-> Question.py
default
-> __init_.py
-> main.py 
```

在“main.py”中，我尝试了以下所有组合均未成功：

```
from Booklet import Question
from Question import Question
from Booklet.Question import Question
from Booklet.Question import *
import Booklet.Question
# and many othet various combinations ... 
```

解决方案比我想象的要简单得多。我将文件夹“Booklet”重命名为“booklet”，就是这样。现在 Python 可以通过在“main.py”中使用代码来正常导入问题类：

```
from booklet.Booklet import Booklet
from booklet.Question import Question
from booklet.Question import AnotherClass 
```

由此我可以得出结论，像“booklet”这样的包名称（文件夹）必须以小写字母开头，否则 Python 会将其与类名和文件名混淆。

显然，这不是你的问题，但是*John Fouhy 的*回答非常好，而且这个线程几乎有任何可能导致这个问题的东西。所以，这是另一件事，我希望这可能对其他人有所帮助。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2018-06-29T22:57:55.227

就我而言，我包含了 package.egg 文件夹的路径，而不是下面的实际包。我将包复制到顶层并且它有效。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2019-03-13T12:30:30.863

这对我有用：`__init__.py`在父文件夹内创建文件（在你的情况下，在`site-packages`文件夹内）。并像这样导入：

```
from site-packages.toolkit.interface import interface 
```

希望它对你也有用！

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2020-01-17T15:07:56.060

在linux服务器尝试`dos2unix script_name`

（使用命令删除所有（如果有的话）`pyc`文件`find . -name '*.pyc' -delete`）

如果您在 Windows 上处理脚本，则重新运行

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2020-03-10T09:55:12.267

就我而言，我`sys.path.insert()`用来导入本地模块并`module not found`从不同的库中获取。我不得不把`sys.path.insert()`报告的进口量放在下面`module not found`。我想最好的做法是放在`sys.path.insert()`进口的底部。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2020-10-17T11:36:59.883

如果您使用安装脚本/实用程序（例如[setuptools](https://packaging.python.org/key_projects/#setuptools)）来部署您的软件包，请不要忘记将相应的文件/模块添加到安装程序中。

* * *

支持时，使用`find_packages()`或类似方式自动将新包添加到安装脚本。这绝对会让您免于头疼，*特别是*如果您将项目搁置一段时间，然后再添加一些东西。

```
import setuptools

setuptools.setup(
    name="example-pkg",
    version="0.0.1",
    author="Example Author",
    author_email="author@example.com",
    description="A small example package",
    packages=setuptools.find_packages(),
    classifiers=[
        "Programming Language :: Python :: 3",
        "Operating System :: OS Independent",
    ],
    python_requires='>=3.6',
) 
```

*（示例取自[setuptools 文档](https://setuptools.readthedocs.io/en/latest/userguide/package_discovery.html)）*

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2021-02-17T18:47:38.750

我发现更改别名文件夹 (Mac) 的名称（通过 GUI）可能会导致加载模块出现问题。如果更改了原始文件夹名称，请重新制作符号链接。我不确定这种行为有多普遍，但调试起来令人沮丧。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2021-04-12T06:59:22.727

我有一个类似的问题。我创建了一个名为`python3.6`.

```
conda create -n python3.6 python=3.6
pip install pandas 
```

一切正常，但是当我运行脚本时，发生了错误

```
ModuleNotFoundError: No module named 'pandas' 
```

我发现python包的元数据和pip的缓存已经更新了，但实际上并没有下载`pandas`包。所以我尝试通过 pip 重新安装，

```
pip uninstall pandas --no-cache-dir
pip install pandas 
```

这解决了它。

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2021-12-10T23:14:53.160

在 ubuntu`apt-get`安装程序中，python3 版本的包通常命名为

```
python3-XYZ 
```

和 python2 版本

```
python-XYZ 
```

根据经验，请尝试错误消息`python3-XYZ`中`python-XYZ`提到的包。请注意，`apt-get`依赖包有时也需要这个技巧，或者取而代之。

我对 python2.7 的烧瓶包有相同的错误消息，当我尝试时它消失了：

```
sudo apt-get install python-flask 
```

因此，尝试：

```
sudo apt-get install python-[YOURPYTHONVERION]-[YOURERRORPACKAGE] 
```

或检查提到的依赖项。

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2022-02-23T16:45:19.607

如答案中所述，使用 sys.path.append 对我有用。起初我认为它不起作用，直到我意识到我在目录路径之前有一个空格。因此，请确保您在路径之前没有拼写错误或空格

# java - Java 和 C++ 中的简单变量

> ID：338772
> 
> 赞同：5
> 
> 时间：2008-12-03T21:27:55.617
> 
> 标签：java, c++, primitive

我在一些材料中看到了这句话：

“在 Java 中，像 int 和 char 这样的简单数据类型的操作与在 C 中一样。”

我想知道实际上它们在 Java 和 C++ 中是不同的吗？

在 C++ 中，像 Java 中的原语这样的简单变量也被分配了一个内存地址，因此 C++ 中的这些原语类型也可以有一个指针。然而，Java 中的原语没有像对象那样分配内存地址。

我对么？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-03T21:31:18.573

几乎。

在 java 中，原语也被分配了内存，但这发生在内部，您无法获得引用。

第三个原因是为内存管理提供安全性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-03T22:19:39.067

在简单类型方面，Java 和 C++ 之间存在一些差异。内存分配是不同的，因为 Java 隐藏了显式指针和引用的概念。您只需创建简单类型并分配一个值。另一个区别是 Java 对每个简单类型检查[Java Simple Types](http://stuff.mit.edu/afs/sipb/project/iap/Archive/1999/java/slide.2.2.html)使用标准化的内存占用。另一方面，C++ 依赖于编译它的平台。另一点（我不知道这是否有区别）是分配给简单类型是线程安全的。我没有在 C++ 中做过任何多线程编程，所以我不确定这是否是一个考虑因素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T06:33:27.293

正确的。

在java中，您不能将引用（指针）传递给原始类型。//事实上Java中没有指针这种东西。

在 Java 中，原始类型只能按值传递。有一种解决方法，但除非您的情况需要，否则通常不建议这样做。您可以使用包装类。[何时使用包装类和原始类型](https://stackoverflow.com/questions/1570416/when-to-use-wrapper-class-and-primitive-type)

只有对象通过引用传递。

原始类型也分配在堆栈上，对象分配在堆上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-05T01:25:32.093

对于大多数基本的东西，它们的工作方式相同，但有很多细节差异。

*   Java 中没有无符号数字类型（除了 char，它在技术上但不是语义上的数字）
*   Java 的“原始类型”只能存在于堆栈上（作为局部变量）或堆上的对象内部，但不能直接存在于堆上。
*   char 类型非常不同——在 C 中，它被定义为包含一个字节（字节可能有也可能没有 8 位），而在 Java 中，它被定义为 16 位。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-12-03T21:33:35.200

原语存储在堆栈中并按值传递。

```
int x = 5;
int y = x;

y++;

// y = 6
// x = 5 
```

对象存储在堆上并通过引用传递。

```
Object a = new Object();
Object b = a;

b.someAction();

// A and B point to the same object and both have had the 'someAction()' performed 
```

我不知道这是否是你的要求，但我很无聊，想发布*一些东西*

# sql - 从 xls (Excel) 文件创建 SQL 表

> ID：338776
> 
> 赞同：5
> 
> 时间：2008-12-03T21:28:46.020
> 
> 标签：sql, excel, sql-server-2005, database-table

我正在尝试将 Excel 文档转换为 SQL 2005 中的表格。我找到了下面的链接，想知道它是否看起来像一个解决方案。如果是这样，@excel_full_file_name 语法是什么，路径相对于哪里？

[http://www.siccolo.com/Articles/SQLScripts/how-to-create-sql-to-convert-Excel_to_table.html](http://www.siccolo.com/Articles/SQLScripts/how-to-create-sql-to-convert-Excel_to_table.html)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-05T09:51:45.100

如果您只需要纯 sql 解决方案，则可以使用 BULK INSERT T-SQL 命令。您必须先将文件另存为 csv/text。

```
BULK 
INSERT YourDestinationTable
        FROM 'D:\YourFile.csv'
            WITH
    (
                FIELDTERMINATOR = ',',
                ROWTERMINATOR = '\n'
    )
GO 
```

或者，您可以再次尝试 OPENROWEST，这是一个纯 T-SQL 解决方案。

```
SELECT * FROM OPENROWSET('Microsoft.Jet.OLEDB.4.0',
'Excel 8.0;DATABASE=D:\YourExcelFile.xls', 'Select * from YourExcelFile') 
```

这实际上取决于您想要多少控制和灵活性，SSIS 路由将比这些方法更有优势。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-03T21:31:24.237

浏览代码，我希望它是 excel 文档的完整路径名：

例如：c:\path\to\my\excel\document.xls

虽然我还没有安装或运行它，所以我可能是错的 - 但乍一看似乎就是这样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-04T03:49:56.420

我建议使用 SSIS/DTS 包进行转换。这要容易得多。

[SSIS Excel 示例](https://web.archive.org/web/1/http://blogs.techrepublic%2ecom%2ecom/datacenter/?p=205)

** 请注意，此示例使用的是向导。您可以将 SSIS/DTS 包安排为要在 SQL 框上运行的作业。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-09T04:25:17.593

[此示例](http://cheeso.members.winisp.net/srcview.aspx?dir=MSOffice&file=CopyData-SqlToExcel-TwoOledbConnections.cs)将数据从 SQL 复制到 Excel。但这只是交换 OleDb 提供程序以使其在相反方向上工作的问题。

# asp.net - asp.net、javascript 和 silverlight 的共享本地化？

> ID：338777
> 
> 赞同：1
> 
> 时间：2008-12-03T21:28:46.817
> 
> 标签：asp.net, javascript, silverlight, localization

您如何本地化 ASP.NET + javascript + Silverlight？

我希望能够在 asp.net 页面、页面上的 javascript 和页面上的 Silverlight 对象中包含不同语言的相同文本。

我尝试过以下方法，但在实践中没有经验，我想听听您对它或替代方案的意见：

1) 创建一个类库 ( `ResourcesTest`) 并添加一个`Phrases.resx`包含一些字符串 ( `Hello='Hello'`) 的资源文件 ( ) 以及一个本地化版本 ( `Phrases.da.resx: Hello='Hej'`)。

2) 添加一个空的 javascript 文件 ( `PhrasesHandler.js`)。

3) 在 AssemblyInfo.cs 中执行此操作以允许 javascript/Silverlight 使用文本：

```
[程序集：WebResource("ResourcesTest.PhrasesHandler.js", "application/x-javascript")]
[程序集：ScriptResource("ResourcesTest.PhrasesHandler.js", "ResourcesTest.Phrases", "Phrases")]

```

4) 从 ASP.NET 代码隐藏 ( ) 引用资源`ResourcesTest.Phrases.Hello`，或者通过在网页中包含嵌入的 javascript 资源：

```
<asp:ScriptManager ID="sm1" runat="server">
    <脚本>
        <asp:ScriptReference Assembly="ResourcesTest" Name="ResourcesTest.PhrasesHandler.js" />
    </脚本>
</asp:ScriptManager>
```

然后从 javascript（例如`Phrases.Hello`）或 Silverlight 通过 javascript（`HtmlPage.Window.Eval("Phrases.Hello")`）访问文本。

我发现这种方法相当复杂，我担心处理这样的系统，但还没有找到在 ASP.NET、javascript 和 Silverlight 之间共享本地化/多语言资源的其他方法。

你？您如何本地化 ASP.NET + javascript + Silverlight ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-03T21:36:34.583

如果他们都可以接受 JSON 格式的数据，请使用它。

请参阅：[在 Javascript 中本地化字符串](https://stackoverflow.com/questions/104022/localize-strings-in-javascript)

# c++ - 如何用 Qt 插入空值？

> ID：338809
> 
> 赞同：15
> 
> 时间：2008-12-03T21:36:48.343
> 
> 标签：c++, sql, qt, null

请提示我，如何使用 Trolltech Qt 4.x SQL 类将空值插入表中？`QSqlQuery`，我猜，或者来自 QtNetwork 的其他内容。作为它的类比，在 .NET 中有一个`System.DbNull`类，它代表 sql NULL。

我应该为某个对象的属性使用什么类型，它可以同时保存空值和`QString`？在 C# 中，我可以使用`System.Object`.

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-12-03T21:41:11.267

从`QSqlQuery::addBindValue`文档：

> 要绑定 NULL 值，请使用 null QVariant；例如，如果要绑定字符串，请使用 QVariant(QVariant::String)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-25T14:53:49.557

回答第二个问题，`QString`可以为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-31T15:53:08.623

问题是针对 QT 4，但我认为值得一提的是，在 QT 5 中您只需传递一个 NULL 值。

# linux - 嵌入式 linux 的日志框架？

> ID：338813
> 
> 赞同：11
> 
> 时间：2008-12-03T21:38:00.120
> 
> 标签：linux, logging, embedded

我需要一个用于登录嵌入式 linux 的小型便携式框架。理想情况下，它将输出到文件或套接字，并且具有某种日志旋转/压缩也很好。

到目前为止，我已经找到了很多框架，但几乎所有的框架都具有令人生畏的构建过程或需要使用应用程序框架（例如 log4cxx 需要 Apache Portable Runtime，我宁愿不打扰...）。

只是在寻找简单而强大的东西，但我似乎找到的一切都很复杂，或者需要大量的二级垃圾才能运行。

建议？（如果答案是我自己的，那很好，但是......最好避免这种情况）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-04T13:52:38.640

使用[BusyBox中的](http://www.busybox.net/)[syslog(3)](http://www.manpagez.com/man/3/syslog/)和 syslogd 。BusyBox 精简后可以非常紧凑，并且不依赖于 libc 以外的任何东西。您可以删除您不想要的所有内容，因此完全可以将其**仅**用于日志记录。

 **我们在许多嵌入式系统上使用 BusyBox，包括 Linux 和 uClinux，并且发现它的日志记录工具非常可靠。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-12-07T20:46:28.393

我没有使用 log4cxx 模块的经验，但我在运行 Linux 的嵌入式目标上使用 APR（它基于 Atmel AT91SAM926x 处理器系列）。配置和编译非常简单（或多或少 ./configure --host=arm-none-linux-gnueabi），所以我不会害怕走 log4cxx 路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-18T19:58:51.807

也许您应该考虑花一些时间在一个好的日志框架上，因为这是您将在嵌入式 Linux 上使用的。... 和 printf ...

我做了一些东西，我可以在运行时启用/禁用每个模块的各种日志记录级别。

您是否尝试过在 Linux 上调试多线程应用程序？

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-03T21:51:58.703

在 C 中实现非常健壮的日志记录机制需要大约 1000 行代码（来自我们的代码库）。其中 90% 定义了不同的部分。这包括不同的宏`DBG_E DBG_W DBG_TRACE`等......并拆分为部分，调试级别和调试模块的运行时更改（不包括压缩，只是简单的打印抽象，可以以不同的方式实现文件/套接字/串行等......）。
我估计实施起来需要几天时间。不利的一面是你会花几天时间，你会得到一些对**你有用的东西**需求仅此而已，我了解您正在使用嵌入式平台，并且占用空间和内存使用很重要，最佳和优化的解决方案将是您编写的解决方案。我们投资了那几天。并在不同的产品/项目中使用它，并**根据实际需要**调整/改进过去的时间。通用解决方案的主要问题，它通常会做一些你需要的事情以及更多，这*通常*只是资源的腰部。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-04T09:11:48.767

我无法想象您的平台太小而无法包含 log4cxx 和 APR，大型库也不是，即使是最小的平台也可能有空间容纳它们。

您可以只使用 C 库提供的 syslog -busybox 提供了一个 syslog 守护程序（毫无疑问，如果您在一个非常小的平台上，您已经使用过）。我不知道busybox 的syslogd 是否可以登录网络，但它具有一定程度的灵活性。您可以非常简单地使用 shell 脚本进行日志轮换。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-25T12:16:21.883

使用**klogd**它读取内核日志消息（来自 /proc/kmsg 内核）接口并将这些消息重定向到适当的目录。您可以使用用户可配置的**syslogd**守护程序和 klogd，它将内核消息重定向到 /var/log/ 目录中的适当文件。例如，与邮件服务相关的日志将存储在**/var/log/main.log**中，与内核启动过程相关的日志将存储在**/var/log/boot.log**中。用户可以使用 syslogd 配置文件配置日志解析。

但是使用 syslogd 可能会导致您的系统性能下降，因为对于每条日志消息，syslog 守护程序都会执行磁盘操作以将该日志存储到适当的文件中

**日志序列**

**来自内核的消息** ---> **klogd**（从内核环形缓冲区访问消息）--> **syslogd** --> /var/log/*

# .net - ASP.NET MVC Web 应用程序中的控制器应该调用存储库、服务还是两者都调用？

> ID：338816
> 
> 赞同：19
> 
> 时间：2008-12-03T21:39:51.537
> 
> 标签：.net, asp.net-mvc

我的 ASP.NET MVC Web 应用程序中的控制器开始因业务逻辑而变得有点臃肿。Web 上的示例都显示了简单的控制器操作，这些操作只是将数据从存储库中拉出并将其传递给视图。但是，如果您还需要在此之上支持业务逻辑怎么办？

例如，完成订单的操作也需要发送电子邮件。我是否将其粘贴在控制器中并将此逻辑复制/粘贴到也履行订单的任何其他操作中？我的第一个直觉是创建一个像 OrderFulfillerService 这样的服务来处理所有这些逻辑并让控制器操作调用它。但是，对于简单的操作，例如从数据库中检索用户或订单列表，我想直接与存储库交互，而不是让该调用由服务包装。

这是可接受的设计模式吗？控制器操作在需要业务逻辑时调用服务，而在它们只需要数据访问时调用存储库？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2008-12-04T01:56:55.323

您的控制器（在 MVC 项目中）应该在 Service 项目中调用您的对象。服务项目是处理所有业务逻辑的地方。

一个很好的例子是：

```
public ActionResult Index()
{
    ProductServices productServices = new ProductServices();

    // top 10 products, for example.
    IList<Product> productList = productServices.GetProducts(10); 

    // Set this data into the custom viewdata.
    ViewData.Model = new ProductViewData
                         {
                             ProductList = productList;
                         };

    return View();
} 
```

或使用依赖注入（我的最爱）

```
// Field with the reference to all product services (aka. business logic)
private readonly ProductServices _productServices;

// 'Greedy' constructor, which Dependency Injection auto finds and therefore
// will use.
public ProductController(ProductServices productServices)
{
    _productServices = productServices;
}

public ActionResult Index()
{
    // top 10 products, for example.
    // NOTE: The services instance was automagically created by the DI
    //       so i din't have to worry about it NOT being instansiated.
    IList<Product> productList = _productServices.GetProducts(10); 

    // Set this data into the custom viewdata.
    ViewData.Model = new ProductViewData
                         {
                             ProductList = productList;
                         };

    return View();
} 
```

现在.. 什么是服务项目（或什么是 ProductServices）？那是一个带有您的业务逻辑的类库。例如。

```
public class ProductServices : IProductServices
{
    private readonly ProductRepository _productRepository;
    public ProductServices(ProductRepository productRepository)
    {
        _productRepository = productRepository;
    }

    public IList<Product> GetProducts(int numberOfProducts)
    {
        // GetProducts() and OrderByMostRecent() are custom linq helpers...
        return _productRepository.GetProducts()
            .OrderByMostRecent()
            .Take(numberOfProducts)
            .ToList();
    }
} 
```

但这可能都是如此顽固和令人困惑......所以 ServiceProduct 类的简单版本可能是（但我不会真的推荐）......

```
public class ProductServices
{
    public IList<Product> GetProducts(int numberOfProducts)
    {
        using (DB db = new Linq2SqlDb() )
        {
            return (from p in db.Products
                    orderby p.DateCreated ascending
                    select p).Take(10).ToList();
        }
    }
} 
```

所以你去。您可以看到所有逻辑都在服务项目中，这意味着您可以在其他地方重用该代码。

我从哪里学来的？

来自[Rob Conery](http://blog.wekeroad.com/ "Rob Conery 的主博客")的[MVC StoreFront](http://www.codeplex.com/mvcsamples/Release/ProjectReleases.aspx?ReleaseId=18861 "代码在这里")媒体和[教程](http://blog.wekeroad.com/mvc-storefront/ "Rob 的博客，但被 MVC Storefront 帖子和教程过滤")。自从切片面包以来最好的事情。他的教程通过完整的解决方案代码示例详细解释了（我做了什么）。他使用的是 SOO kewl 的依赖注入，现在我已经看到他在 MVC 中是如何使用它的。

HTH。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-23T10:38:31.793

我不确定是否要为此使用服务。

据我了解，DDD 的原则之一（我目前正在阅读）是域对象被组织成聚合，并且当您创建聚合根的实例时，它只能直接处理聚合中的对象（以帮助保持清晰的责任感）。

创建聚合应强制执行任何不变量等。

以客户类为例，客户可能是聚合根，聚合中的另一个类可能是地址。

现在，如果您想创建一个新客户，您应该能够使用客户构造函数或工厂来执行此操作。这样做应该返回一个在聚合边界内功能齐全的对象（因此它不能处理产品，因为它们不是聚合的一部分，但它可以处理地址）。

数据库是次要问题，仅在将聚合持久化到数据库或从数据库中检索它时才起作用。

为了避免直接与数据库交互，您可以创建一个 Repository 接口（如所讨论的），该接口给定 Customer 的实例（包括对 Address 的引用）应该能够将 Aggregate 持久保存到数据库。

关键是存储库接口是您的域模型/层的一部分（存储库的实现不是）。另一个因素是存储库可能最终应该调用相同的“创建”方法，就好像您正在创建一个新对象一样（以维护不变量等）。如果您使用的是构造函数，这很简单，因为无论如何当存储库从数据“创建”对象时，您最终都会调用构造函数。

应用层可以直接与域通信（包括存储库接口）。

所以如果你想创建一个对象的新实例，你可以例如

```
Customer customer = new Customer(); 
```

如果应用程序需要从存储库中检索客户的实例，我想不出什么特别的理由让它不调用......

```
Customer customer = _custRepository.GetById(1) 
```

或者...

```
Customer customer = _custRepository.GetByKey("AlanSmith1") 
```

最终它将得到一个 Customer 对象的实例，该实例在它自己的限制和规则内运行，就像它直接创建新的 Customer 对象一样。

我认为服务应该保留在您尝试使用的“事物”不是对象时。大多数规则（约束等）可以编写为域对象本身的一部分。

一个很好的例子是我目前正在阅读的 DDD Quickly pdf。在那里，它们对 Bookshelf 对象有一个约束，因此您只能添加书架可以包含的书籍数量。

在将书籍添加到 BookShelf 的 Book 对象集合之前，对 BookShelf 对象调用 AddBook 方法会检查是否有可用空间。一个简单的示例，但业务规则由域对象本身强制执行。

顺便说一句，我并不是说以上任何一个都是正确的！我现在正在努力解决这一切！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-04T00:24:00.800

在商业服务中看到很多这样的东西可能看起来很烦人：

```
public Customer GetCustomer(int id)
{
     return customerRepository.Get(id);
} 
```

并且很自然地有一种绕过服务的强烈冲动。但从长远来看，允许您的业务服务在控制器和存储库之间进行中介会更好。

现在，对于一个非常简单的 CRUD 类型的应用程序，您可以让您的控制器直接使用存储库，而不是通过业务服务。您仍然可以拥有像 EmailerService 之类的东西，但是 IMO 在获取和处理实体时，最好不要在控制器中混合和匹配业务服务和存储库调用。

至于让实体（业务对象）调用服务或任何基础设施组件，我不会那样做。我更喜欢保留实体 POCO 并且没有依赖关系。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-03T21:51:29.173

如果你打算有一个业务层，那么我认为最好*只*让业务层与数据层对话。我可以理解为什么在一个简单的用例中，您会让表示层（控制器）直接与数据层对话，但是一旦您确定需要一个独立的业务层，那么在更高级别混合使用两者就可以了是危险的。

例如，如果控制器 A 调用业务层中的一个方法来获取对象 A 的列表（并且此方法应用业务规则 - 可能是一些过滤或排序），但随后控制器 B 出现，需要相同的数据块怎么办？ ，却忘了业务层直接调用数据层？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-07-29T14:31:38.867

好吧，这完全取决于你，我喜欢让控制器尽可能简单，为了归档这个我需要将业务逻辑封装在一个单独的层中，这是最重要的，主要是你有 2 个选项，假设你正在使用 Linq2SQL 或实体框架：

*   您可以在保存更改之前使用扩展器方法和部分类来验证您的模型（钩子方法，您可以在 Scott Gu 的 Nerdinner 示例中看到一个示例）。

*   另一种方法（也是我最喜欢的，因为我觉得对应用程序流程有更多的控制权），是使用一个完全独立的层来处理业务逻辑，比如服务层（你可以在 asp.net 中的 Stephen Walther 的系列教程中看到这个方法/mvc 区域）。

使用这两种方法，您可以获得 DRY 并清理您原本凌乱的控制器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-03T21:49:44.963

你的业务逻辑应该封装在业务对象中——如果你有一个 Order 对象（你有，不是吗？），并且一个业务规则规定在 Order 完成时应该发送一封电子邮件，那么你的 Fulfill 方法（或者，如果更合适，IsFulfilled 的设置器）应该触发该操作。我可能会拥有将业务对象指向应用程序的适当电子邮件服务的配置信息，或者更一般地指向“通知程序”服务，以便可以在必要时/如果需要添加其他通知类型。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-04T01:31:08.573

如果我们能一遍又一遍地停止看到这个例子，那将会有所帮助......

```
public ActionResult Index()
{
  var widgetContext = new WidgetDataContext();
  var widgets = from w in widgetContext.Widget
                select w;
  return View(widgets);
} 
```

我确实意识到这对您的问题没有帮助，但它似乎是我认为可能会误导的许多演示软件的一部分。

# asp.net - ASP.NET：以编程方式设置 HTML 元素的样式

> ID：338817
> 
> 赞同：2
> 
> 时间：2008-12-03T21:40:53.250
> 
> 标签：asp.net, repeater, htmlgenericcontrol

我正在生成一个带有Repeater 控件的菜单，该控件绑定到XmlDataSource。

```
<asp:Repeater ID="myRepeater" runat="server" 
    DataSourceID="myDataSource" 
    onitemdatabound="myRepeater_ItemDataBound" 
    onitemcreated="myRepeater_ItemCreated">
    <HeaderTemplate>
        <ul class="menu_list">
    </HeaderTemplate>
    <ItemTemplate>
        <li id="liMenu" runat="server"><asp:HyperLink ID="hrefMenuItem" runat="server" Text='<%# XPath("@text")%>' NavigateUrl='<%# XPath("@href")%>'></asp:HyperLink></li>
    </ItemTemplate>
    <FooterTemplate>
        </ul>
    </FooterTemplate>
</asp:Repeater>
<asp:XmlDataSource runat="server" ID ="myDataSource" XPath="Menu/Items/*" EnableCaching="False" /> 
```

我希望能够根据鼠标悬停事件和当前选择的菜单项设置包含 LI 的样式。我通过 HtmlGenericControl 尝试过，但我收到一个错误，它是只读的。

```
protected void myRepeater_ItemDataBound(object sender, RepeaterItemEventArgs e)
        {
            if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
            {
                HyperLink hrefCurrentMenuLink = e.Item.FindControl("hrefMenuItem") as HyperLink;
                HtmlGenericControl l_genericControl = e.Item.FindControl("liMenu") as HtmlGenericControl;

                if ((hrefCurrentMenuLink != null) && (l_genericControl != null))
                {
                    string l_currentPage = GetCurrentWebPage();

                    if (String.Compare(Path.GetFileNameWithoutExtension(hrefCurrentMenuLink.NavigateUrl), l_currentPage, StringComparison.OrdinalIgnoreCase) == 0)
                        l_genericControl.Style = "on-nav";
                    else
                        l_genericControl.Style = "off-nav";

                    l_genericControl.Attributes.Add("onmouseover", "navOn(this)");
                    l_genericControl.Attributes.Add("onmouseout", "navOff(this)");
                }
            }
        } 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-03T21:46:57.403

style 属性是一个集合。做这个：

```
l_genericControl.Style.Add("css-name", "css-value") 
```

或者，如果您使用的是 CSS 类，则更改 CssClass 属性：

```
l_genericControl.CssClass = "on-nav"; 
```

如果您尝试使用 javascript 切换 CSS 类，请尝试以下操作（未经测试）：

```
l_genericControl.Attributes.Add("onmouseover", "this.className='on-nav';");
l_genericControl.Attributes.Add("onmouseout", "this.className='off-nav';"); 
```

如果您想使用 javascript 更改样式，这可能有效：

```
l_genericControl.Attributes.Add("onmouseover", "this.style.color='red'; this.style.backgroundColor='yellow';");
l_genericControl.Attributes.Add("onmouseout", "this.style.color='black'; this.style.backgroundColor='none';"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-03T22:13:28.863

在基本层面上，你可以这样做：

```
l_genericControl.Attributes["class"] = "on-nav"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-03T22:20:18.770

问题出在这部分：

```
l_genericControl.Style = "off-nav"; 
```

您可以通过应用 CssClass 来解决

```
// += to prevent overwriting a class you would set in the markup
l_genericControl.CssClass += "off-nav"; 
```

# svn - 颠覆外部是一种反模式吗？

> ID：338824
> 
> 赞同：69
> 
> 时间：2008-12-03T21:43:01.263
> 
> 标签：svn, version-control, anti-patterns, svn-externals

[Subversion 允许您使用externals](http://svnbook.red-bean.com/en/1.1/ch07s04.html)嵌入其他存储库的工作副本，从而允许在您的项目中轻松控制第三方库软件的版本。

虽然这些似乎非常适合库的重用和[供应商软件](http://svnbook.red-bean.com/en/1.1/ch07s05.html)的版本控制，但它们并非没有[批评者](https://stackoverflow.com/questions/222827/how-do-you-organize-your-version-control-repository#304036)：

> 请不要使用 Subversion 外部工具（或其他工具中的类似工具），它们是反模式，因此没有必要

使用外挂是否存在隐患？请解释为什么它们会被视为反模式。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2008-12-05T22:34:10.393

我是问题中引用的作者，该引用来自[先前的答案](https://stackoverflow.com/questions/222827/how-do-you-organize-your-version-control-repository#304036)。

杰森对我这样的简短陈述持怀疑态度并要求解释是正确的。当然，如果我完全解释了该答案中的所有内容，我将需要写一本书。

Mike 也正确地指出了`svn:external`类似功能的问题之一是目标源中的更改可能会破坏您自己的源，特别是如果该目标源位于您不拥有的存储库中。

在进一步解释我的评论时，让我首先说有一些“安全”的方式可以使用`svn:external`-like 功能，就像使用任何其他工具或功能一样。但是，我将其称为[反模式](http://c2.com/cgi/wiki?AntiPattern)，因为该功能更容易被滥用。根据我的经验，它一直被滥用，我发现自己不太可能以这种安全的方式使用它，也不推荐这种使用方式。请进一步注意，我不是贬低 Subversion 团队的意思——我喜欢 Subversion，尽管我计划继续前往 Bazaar。

此功能的主要问题是它鼓励并且通常用于将一个构建（“项目”）的源直接链接到另一个构建的源，或将项目链接到二进制文件（DLL、JAR 等）它取决于它。这些用法都不明智，它们构成了一种反模式。

正如我在另一个答案中所说，我相信软件构建的一个基本原则是每个项目都构建一个二进制或主要可交付成果。这可以被认为是[关注点分离](http://c2.com/cgi/wiki?SeparationOfConcerns)原则在构建过程中的应用。对于一个项目直接引用另一个项目的源代码尤其如此，这也违反了[封装](http://c2.com/cgi/wiki?EncapsulationDefinition)原则。这种违规的另一种形式是尝试通过递归调用子构建来创建构建层次结构以构建整个系统或子系统。Maven 强烈鼓励/强制执行这种行为，这是我不推荐它的众多原因之一。

最后，我发现有各种实际问题使此功能不可取。一方面，`svn:external`有一些有趣的行为特征（但细节暂时让我无法理解）。另一方面，我总是发现我需要这些依赖项对我的项目（构建过程）明确可见，而不是作为一些源代码控制元数据隐藏。

那么，使用此功能的“安全”方式是什么？我认为这是仅由一个人临时使用的情况，例如“配置”工作环境的一种方式。我可以看到程序员可能在存储库中创建自己的文件夹（或为每个程序员创建一个文件夹），他们将在其中配置`svn:external`指向他们当前正在处理的存储库的各个其他部分的链接。然后，签出该文件夹将创建他们所有当前项目的工作副本。添加或完成项目时，`svn:external`可以调整定义并适当更新工作副本。但是，我更喜欢不依赖于特定源代码控制系统的方法，例如使用调用检出的脚本来执行此操作。

作为记录，我最近一次接触到这个问题是在 2008 年夏天，`svn:external`在一个大规模使用的咨询客户那里——所有东西都被交叉链接以生成一个主工作副本。他们基于 Ant 和 Jython（用于 WebLogic）的构建脚本是在这个主工作副本之上构建的。最终结果：没有任何东西可以独立构建，实际上有几十个子项目，但没有一个可以安全地自行检查/工作。因此，在这个系统上的任何工作首先需要检出/更新超过 2 GB 的文件（他们也将二进制文件放入存储库中）。完成任何事情都是徒劳的，我在尝试了三个月后离开了（还有许多其他反模式）。

编辑：阐述递归构建 -

多年来（尤其是过去十年），我为财富 500 强公司和大型政府机构构建了庞大的系统，涉及数十个子项目，这些子项目排列在多个层次的目录层次结构中。我已经使用 Microsoft Visual Studio 项目/解决方案来组织基于 .NET 的系统，Ant 或 Maven 2 用于基于 Java 的系统，并且我已经开始将 distutils 和 setuptools (easyinstall) 用于基于 Python 的系统。这些系统还包括通常在 Oracle 或 Microsoft SQL Server 中的大型数据库。

我在设计这些大型构建以实现易用性和可重复性方面取得了巨大成功。我的设计标准是新开发人员可以在第一天出现，获得新工作站（可能直接来自戴尔，只需安装典型的操作系统），获得简单的设置文档（通常只有一页安装说明），并且能够在半天或更短的时间内完全设置工作站并从源头构建完整的系统，无人监督，无人协助。调用构建本身包括打开一个命令 shell，切换到源代码树的根目录，然后发出一条命令来构建所有内容。

尽管取得了成功，但构建如此庞大的构建系统需要非常小心并严格遵守可靠的设计原则，就像构建大规模的关键业务应用程序/系统一样。我发现一个关键部分是每个项目（生成单个工件/可交付成果）必须有一个构建脚本，该脚本必须有一个定义明确的接口（用于调用构建过程部分的命令），并且它必须能够正常运行单独从所有其他（子）项目。从历史上看，构建整个系统很容易，但很难/不可能只构建一个系统。直到最近我才学会仔细确保每个项目真正独立。

实际上，这意味着必须至少有两层构建脚本。最低层是生成每个交付物/工件的项目构建脚本。每个这样的脚本都驻留在其项目源代码树的根目录中（实际上，该脚本定义了它的项目源代码树），这些脚本对源代码控制一无所知，它们希望从命令行运行，它们引用项目中的所有相关内容到构建脚本，它们基于一些可配置的设置（环境变量、配置文件等）引用它们的外部依赖项（工具或二进制工件，没有其他源项目）。

构建脚本的第二层也打算从命令行调用，但这些都知道源代码控制。实际上，第二层通常是一个单独的脚本，它使用项目名称和版本调用，然后它将命名项目的源代码检出到新的临时目录（可能在命令行上指定）并调用其构建脚本。

可能需要更多变化来适应持续集成服务器、多个平台和各种发布场景。

有时，为了构建整个项目集的特定子集，需要调用第二层脚本（调用第一层）的第三层脚本。例如，每个开发人员可能都有自己的脚本来构建他们今天正在从事的项目。可能有一个脚本来构建所有内容以生成主文档或计算指标。

无论如何，我发现试图将系统视为项目的层次结构会适得其反。它将项目彼此联系在一起，因此它们不能单独自由构建，也不能在任意位置（持续集成服务器上的临时目录）或以任意顺序（假设满足依赖关系）构建。通常，尝试强制分层会破坏任何可能尝试的 IDE 集成。

最后，构建庞大的项目层次结构可能会过于消耗性能。例如，在 2007 年春天，我尝试使用 Ant 构建一个适度的源代码层次结构（Java 加 Oracle），但最终失败了，因为构建总是因 Java OutOfMemoryException 而中止。这是在具有 3.5 GB 交换空间的 2 GB RAM 工作站上，我已针对该工作站调整 JVM 以使用所有可用内存。应用程序/系统在代码量方面相对微不足道，但递归构建调用最终会耗尽内存，无论我给它多少内存。当然，它也需要很长时间才能执行（30-60 分钟很常见，在它中止之前）。我非常了解如何调整，但最终我只是超出了工具的限制（在这种情况下是 Java/Ant）。

所以帮自己一个忙，将您的构建构建为独立项目，然后将它们组合成一个完整的系统。保持轻便灵活。享受。

编辑：更多关于反模式

严格来说，反模式是一种常见的解决方案，看起来它解决了问题，但实际上并没有，因为它留下了重要的空白，或者因为它引入了额外的问题（通常比原始问题更糟糕）。解决方案必然涉及一个或多个工具以及将它们应用于手头问题的技术。因此，将工具或工具的特定功能称为反模式是一种延伸，似乎人们正在检测这种延伸并对此做出反应——这很公平。

另一方面，由于我们行业中的常见做法似乎是专注于工具而不是技术，因此受到关注的是工具/功能（在 StackOverflow 上对问题的随意调查似乎很容易说明）。我的评论，以及这个问题本身，都反映了这种做法。

然而，有时进行这种延伸似乎特别合理，例如在这种情况下。有些工具似乎会“引导”用户使用特定的技术来应用它们，以至于有些人认为[工具塑造了思想](http://c2.com/cgi/wiki?ProgrammingLanguagesShapeThoughts)（稍微改写了）。主要是本着这种精神，我建议这`svn:external`是一种反模式。

为了更严格地说明这个问题，反模式是设计一个构建解决方案，包括在源代码级别将项目捆绑在一起，或者隐式版本化项目之间的依赖关系，或者允许这种依赖关系隐式更改，因为这些调用中的每一个都非常负面结果。类似特征的性质`svn:external`使得避免这些负面后果非常困难。

正确处理项目之间的依赖关系涉及解决这些动态以及基本问题，并且工具和技术会导致不同的路径。应该考虑的一个例子是[Ivy](http://ant.apache.org/ivy/)，它以类似于 Maven 的方式提供帮助，但没有许多缺点。我正在研究 Ivy，加上 Ant，作为我对 Java 构建问题的短期解决方案。从长远来看，我希望将核心概念和功能整合到一个有助于多平台解决方案的开源工具中。

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2008-12-03T22:37:02.700

我认为这根本不是反模式。我在谷歌上做了一些快速搜索，基本上什么都没找到……没有人抱怨使用 svn:externals 是坏的或有害的。当然，您必须注意一些注意事项...而且您不应该将其大量散布到所有存储库中...但是至于原始引文，这只是他的个人（和主观）意见. 他从来没有真正讨论过 svn:externals，只是谴责它们是一种反模式。这种笼统的陈述没有任何支持或至少没有关于这个人是如何做出陈述的推理的，总是令人怀疑的。

也就是说，使用外部存在一些问题。就像迈克回答的那样，它们对于指向已发布软件的稳定分支非常有帮助……尤其是您已经控制的软件。我们在许多实用程序库等项目中内部使用它们。我们有一个小组负责增强实用程序库的基础并在此基础上工作，但该基础代码在多个项目中共享。我们不希望各个团队只检查实用程序项目代码，也不希望处理一百万个分支，所以对我们来说 svn:externals 工作得很好。对于某些人来说，他们可能不是答案。但是，我强烈不同意“请不要使用……”的说法，并且这些工具代表了一种反模式。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2008-12-03T21:56:18.320

使用 svn:externals 的主要风险是引用的存储库将被更改，从而破坏您的代码或引入安全漏洞。如果外部存储库也在您的控制之下，那么这可能是可以接受的。

就个人而言，我只使用 svn:externals 来指向我拥有的存储库的“稳定”分支。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2010-10-05T17:34:49.597

一个旧线程，但我想解决不断变化的外部可能会破坏您的代码的担忧。如前所述，这通常是由于对外部属性的错误使用造成的。几乎在所有情况下，外部引用都应指向外部存储库 URI 中的特定修订号。这可确保外部永远不会更改，除非您将其更改为指向不同的修订号。

对于我们在最终用户项目中用作外部的一些内部库，我发现在 Major.Minor 版本中创建库的标签很有用，我们不会强制执行任何重大更改。使用四点版本控制方案 (Major.Minor.BugFix.Build)，我们允许标签与 BugFix.Build 更改保持同步（同样，强制不发生重大更改）。这允许我们在没有修订号的情况下使用对标签的外部引用。如果发生重大或其他重大更改，则会创建一个新标签。

外部本身并不坏，但这并不能阻止人们创建它们的糟糕实现。无需太多研究，只需阅读一些文档，即可了解如何安全有效地使用它们。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2008-12-05T22:54:21.647

如果纯外部是一种反模式，因为它可能会破坏您的存储库，那么具有显式修订的版本不应该。

摘自[svn 书](http://svnbook.red-bean.com/en/1.0/ch07s03.html)：

> 外部定义是本地目录到版本化资源的 URL**（可能还有特定修订版）**的映射。

我认为这完全取决于您使用该功能的目的，它本身并不是反模式。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2008-12-05T23:40:59.977

subversion externals 存在明显的缺陷，但我们似乎合理地成功地使用了它们来包含当前项目所依赖的库（我们自己的和供应商的）。所以我不认为它们是“反模式”。对我来说重要的使用点是：

*   它们指向另一个项目的特定修订或标签（绝不是头）。
*   它们被插入到远离其自己的源代码等的当前项目中（例如，在称为“支持文件”的子目录中）。
*   它们仅引用其他项目的“接口”文件（例如包含文件夹）和二进制库（即我们没有获得其他项目的完整源代码）。

我也会对这种安排的任何重大风险以及更好的方法感兴趣。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-12-05T23:51:37.040

除非你说出*为什么*会这样，否则说*a 是 b*不会使*a* a *b成立。*

 *我在 subversion 中看到的外部引用的主要缺陷是，当您更新工作副本时，不能保证存储库存在。

Subversion 外部引用可以被使用，也可以被滥用，而这个*特性本身*只不过是*一个特性*。它不能说是*一种模式*，也不能说是一种*反模式*。

我已经阅读了您引用的人的答案，我必须说我不同意。如果您的项目需要来自存储库的文件版本 XYZ，外部 subversion 参考可以轻松地为您提供。

是的，您可以通过不具体指定您需要哪个版本的参考来错误地使用它。这会给你带来麻烦吗？可能！

它是反模式吗？这要看情况。如果您按照您引用的文本作者提供的链接，即。[在这里](http://c2.com/cgi/wiki?AntiPattern)，然后没有。*可以*使用某些东西来提供糟糕的解决方案并不会使这样做的整个方法*成为反模式*。如果这是规则，那么我会说编程语言大体上都是反模式，因为在每种编程语言中，你*都可以做出糟糕的解决方案*。

# windows-mobile - 紧凑框架中是否存在在暂停和恢复时触发的事件？

> ID：338833
> 
> 赞同：2
> 
> 时间：2008-12-03T21:45:26.733
> 
> 标签：windows-mobile, compact-framework

还是我必须调用本机代码？
我不想要电源状态……我想要，但我不想一直轮询它，宁愿触发事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-03T21:58:06.943

不，那里没有。通常，应用程序完全不知道电源状态。当设备挂起时，代码只是停止执行。当您恢复时，它会在它停止的确切位置重新开始。

您可以连接到[电源管理系统](http://msdn.microsoft.com/en-us/library/ms902997.aspx)以获取通知，但请注意您没有时间实际做出反应，因此您的代码可能无法真正处理“进入睡眠”事件，直到它再次唤醒。

[这两种状态转换都在Smart Device Framework](http://www.smartdeviceframework.com)的[OpenNETCF.WindowsCE.PowerManager](http://opennetcf.com/library/sdf/html/d3976aad-f969-c1e4-0dc4-dc146d338857.htm)类的托管函数中公开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-19T05:05:25.190

如果您绝对需要知道设备何时暂停，最好的替代方法是在无人值守模式下运行您的程序。而不是暂停您的设备将更改为无人值守的电源状态。那是您对设备要暂停的警告。在设备挂起之前执行您需要做的任何工作，然后释放您的无人值守请求（注意，如果其他程序正在请求无人值守模式，那么设备可能永远不会挂起！）。

有关无人值守模式的更多信息，请参阅[http://www.codeproject.com/KB/mobile/WiMoPower1.aspx](http://www.codeproject.com/KB/mobile/WiMoPower1.aspx)

有关获取电源更改通知的示例，请参见[http://www.codeproject.com/KB/mobile/WiMoQueue.aspx](http://www.codeproject.com/KB/mobile/WiMoQueue.aspx)

# asp.net - 在没有可见空间的情况下包装 GridView 文本

> ID：338836
> 
> 赞同：5
> 
> 时间：2008-12-03T21:45:40.870
> 
> 标签：asp.net, html, gridview

我有一个包含多个字段的 GridView，其中一个字段可能具有疯狂的广泛价值，如下所示：

啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊

如果*这种*事情在现场，我希望它包装。

我可以很容易地每隔 50 个字符左右在代码中插入一个字符……但是什么字符？如果我使用**\r\n**或**空格**等，那么有时设置不会换行（因为不同行的 50 个字符更宽），我会得到这样的结果：

嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯
嗯嗯嗯
嗯嗯

我不希望这些空间出现；如果可以的话，我只希望该行在此处换行，否则什么也不显示：

嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯
嗯嗯嗯
嗯

另外，如果可能的话，我宁愿*打开*HtmlEncode 。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-31T05:34:04.537

ItemStyle-Wrap="true" ItemStyle-Width="100" 不适用于一个没有空格的长单词。

**找到了解决方案：**

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
            {
                if (e.Row.RowType == DataControlRowType.DataRow)
                {
                    e.Row.Cells[1].Attributes.Add("style", "word-break:break-all;word-wrap:break-word");
                }
            } 
```

其中 Cells[1] 是要包装的列。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-03T22:01:51.070

将这些 CSS 行粘贴到一个类中，并将该类粘贴到您的网格项目中

```
white-space: -moz-pre-wrap; /* Mozilla, supported since 1999 */
white-space: -pre-wrap; /* Opera 4 - 6 */ 
white-space: -o-pre-wrap; /* Opera 7 */ 
white-space: pre-wrap; /* CSS3 */ 
word-wrap: break-word; /* IE 5.5+ */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-03T21:56:26.137

你可以在这里做一些事情。

一种选择是将有问题的列更改为 TemplateColumn，并在其中放置一个 div，并能够生成滚动条。我*真的*建议不要这样做。

如果您使用 CRLF (\r\n)，那么您需要将其包装到**PRE**标签中，并且您希望将字体事实更改为等宽字体（例如 Courier），以便 50 个字符始终是相同的长度。

如果您想要一个 HTML 解决方案，那么只需将**BR**标记插入文本的适当位置即可。

现在，您还需要确保您正在检查字符串的长度（确保它大于您的幻数长度），并且它不包含空格（因为空格将允许换行） , 在插入 CRLF 或 BR 之前。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-08-05T15:04:57.273

您可以在 GridView 中使用以下模板字段属性

```
ItemStyle-Wrap="true" ItemStyle-Width="100" 
```

您必须设置宽度，否则文本将不会被换行。

# sql - nvarchar(256)....？

> ID：338853
> 
> 赞同：6
> 
> 时间：2008-12-03T21:48:36.947
> 
> 标签：sql, sql-server

为什么 nvarchar(256) 似乎是 SQL Server 中用户名的标准？

任何返回用户名的系统函数都返回 nvarchar(256)，ASP 成员资格提供程序使用 nvarchar(256)

256 似乎是一个奇数（是的，我知道它是偶数......） - 255 我可以理解（1 字节地址），但 256 对我来说没有意义。

谁能解释一下？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-12-03T21:52:25.630

作为程序员，我们自动从 0 开始计数，但在这种情况下，nvarchar(0) 表示没有字符。原来 256 是你的漂亮整数 2^8。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-03T21:56:30.237

2^8 是 256，而不是 255。

很多时候你会看到从 0 到 255 的编号方案，当你包含 0 时，这是 256 个数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-07T21:25:48.220

经验表明，在一段时间内的各种数据库中，256 似乎是字符串字段最大长度的最小值。如果它回到 dBASE，我不会感到惊讶。

# mysql - Mysql“魔术”捕获选择语句的所有列

> ID：338856
> 
> 赞同：0
> 
> 时间：2008-12-03T21:49:52.577
> 
> 标签：mysql, select, where

有没有办法让我做这样的选择

```
select * from attributes where product_id = 500 
```

会回来

```
id  name     description
 1  wheel    round and black
 2  horn     makes loud noise
 3  window   solid object you can see through 
```

和查询

```
select * from attributes where product_id = 234 
```

将返回与对该表的任何查询相同的结果。

现在显然我可以删除 where 子句并继续我的一天。但这涉及编辑我真的不想修改的代码，所以我试图在数据库级别修复这个问题。

那么是否有一种“神奇”的方式来忽略 where 子句中的内容并使用视图或其他东西返回我想要的任何内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-03T21:59:35.490

即使有可能，我怀疑它会起作用。这两个 WHERE 子句都希望返回一个东西，因此代码可能只使用返回的第一行，而不是全部。

它还将为数据库提供一种行为，使未来的开发人员竭尽全力试图理解。

正确执行并修复代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-03T22:05:54.713

或者您可以传递“product_id”而不是整数，如果没有代码检查...所以查询将变为：

select * from attributes where product_id = product_id;

这会给你表格中的每一行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-04T08:51:30.930

如果您无法编辑查询，也许您可​​以附加到它？你可以坚持

```
OR 1=1 
```

最后。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-03T22:59:15.510

您可能能够使用结果集元数据来获得所需的内容，但结果集不会有字段描述。从准备好的查询中获取结果集元数据的特定 API 因编程语言而异，而且您还没有说明您使用的是哪种语言。

您可以查询产品表的[INFORMATION_SCHEMA](http://dev.mysql.com/doc/refman/5.1/en/columns-table.html)。

```
SELECT ordinal_position, column_name, column_comment
FROM INFORMATION_SCHEMA.columns
WHERE table_name = 'products' AND schema_name = 'mydatabase'; 
```

您可以将数据库重组为[实体-属性-值](http://en.wikipedia.org/wiki/Entity-attribute-value_model)设计，但这比修复代码要雄心勃勃得多。

或者您可以完全放弃 SQL 数据库，而使用像[RDF](http://www.openrdf.org/about.jsp)这样的语义数据存储，它允许您以与查询数据相同的方式查询实体的元数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-04T00:19:22.197

就这个想法而言，我总是对做事的疯狂方式感兴趣。我认为我能想出的最佳解决方案是使用一个视图，该视图使用产品表获取所有产品，然后使用属性表获取属性，因此每个可能的产品都被考虑在内，所有产品都会得到相同的结果

# language-agnostic - 可运行的伪代码？

> ID：338867
> 
> 赞同：3
> 
> 时间：2008-12-03T21:52:44.973
> 
> 标签：language-agnostic, translation, pseudocode, transpiler

我正在尝试为以下想法确定现有技术：

1) 用户使用称为 (insert_name_here) 的语言键入一些代码；

2) 用户从知名输出候选列表（javascript、ruby、perl、python）中选择目标语言；

3) 处理器将 insert_name_here 翻译成目标语言的可运行代码；

4) 处理器然后使用基于所选语言的相关系统调用运行代码

这样做的原因是因为在从 insert_name_here 到所有受支持的目标语言的所有语言结构之间存在预先建立的 1 对 1 映射。

（**免责声明：**这显然不会产生针对目标语言量身定制的“优雅”代码。它只是做了一个可运行的基本翻译。目的是让开发人员在几种不同的语言用于那些他们不想重新发明轮子但出于某种原因需要在特定项目中使用特定语言的情况。）

这已经存在了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-03T21:57:34.433

.NET CLR 的设计使得 C++.Net、C#.Net 和 VB.Net 都可以编译为相同的机器语言，并且您可以将该 CLI“反编译”回这些语言中的任何一种。

所以是的，我会说它已经存在，尽管不完全像你描述的那样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-03T22:05:36.350

有适用于不同语言的转换器。您将遇到的问题是处理库。虽然语言语句之间的映射可能很容易，但找到库函数之间的映射将非常困难。

我不太确定这种类型的代码生成器会有多大用处。为什么你想用一种语言写一些东西，然后立即将它转换成另一种语言？我可以看到将图表或模型转换为代码的第 4 代语言的基本原理，但我并没有真正看到您的努力的意义。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-04T08:22:57.603

*是的，确实*存在将程序从一种表示形式转换为另一种表示形式的程序。它被称为“编译器”。

至于您的问题是否总是可能的：只要您的目标语言至少与源语言一样强大，那么就有可能。因此，如果您的目标语言是图灵完备的，那么*总是*有可能的，因为没有比图灵完备的语言更强大的语言了。

但是，不需要一个愚蠢的 1:1 映射。

例如：将 CIL 字节码编译为 JavaScript 源代码的 Microsoft Volta 编译器有一个问题：.NET 有线程，而 JavaScript 没有。但是您可以实现带有延续的线程。好吧，JavaScript 也没有延续，但是您可以实现带有异常的延续。因此，Volta 将 CIL 转换为 CPS，然后在异常情况下实现 CPS。（较新版本的 JavaScript 具有生成器形式的半协同程序；这些也可以使用，但 Volta 旨在跨广泛的 JavaScript 版本工作，显然包括 Internet Explorer 中的 JScript。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-03T23:07:36.537

这似乎有点奇怪。如果您以最常见的形式使用术语“现有技术”，那么您正在讨论一个可能获得专利的想法。如果**是**这种情况，您有：

1/ 发表了这个想法，开始计时专利申请 - 我假设，也许是错误的，你在美国 其他司法管辖区可能有其他规则。

2/ 告诉整个星球你的想法，这意味着尝试申请专利几乎没有用，除非你行动得很快。

如果您没有考虑为此申请专利，而只是在外行意义上使用“现有技术”一词，我深表歉意。我在一家非常重视专利的公司工作，它非常详细地向我们灌输了在提交之前我们可以对信息进行的处理。

话虽如此，可专利的想法必须是新颖的、有用的和非显而易见的。我认为您的想法不会通过其中的第三个，因为您正在描述一种语言翻译器，该翻译器将具有许多 pascal-to-c 和 fortran-to-c 转换器的现有技术。

一线希望是您的想法能够生成多种输出语言中的一种（p2c 和 f2c 不这样做），但我认为即使是这样，交叉编译器（如 gcc）也会涵盖源到许多不同的对象语言之一。

IBM 有一个名为 Visual Age Generator 的产品，您可以在其中使用一种（专有）语言进行编码，并将其转换为 COBOL/C/Java/其他语言，以在从 PC 到大型系统 z 大型机的不同目标平台上运行，所以这是您的第一个问题（考虑为世界上最大的专利商 IBM 已经在使用的想法申请专利）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-03T23:54:37.830

成吨的。p2c、f2c 以及 C++ 和 Objective C 的原始实现立即让我印象深刻。除此之外，很难将您所描述的内容与任何编译器区分开来，尤其是对于我们这些老家伙，他们的编译器无论如何都会生成 ASM 代码以进行中间表示。

# .net - 是否可以使用 ODP 11 xcopy 部署而不更改 PATH？

> ID：338875
> 
> 赞同：1
> 
> 时间：2008-12-03T21:56:04.793
> 
> 标签：.net, oracle, odp.net

我有一个使用 Oracle.DataAccess 进行连接的应用程序。我已经发现使用 ODAC 11 和 xcopy 部署可以减少占用空间。这已经是一个很大的胜利。

不过，理想情况下，我们希望不必更改任何路径变量，并将所有 ODAC 文件放在应用程序文件夹下的子目录中。是否可以在不更改 PATH 变量的情况下执行此操作？有没有办法设置一个临时 PATH 变量？我们可以将所有必要的文件复制到应用程序文件夹吗？

总体思路是，我们希望尽可能地将 ODAC 文件与可能在同一客户端上运行的其他应用程序隔离开来。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-03T22:13:03.793

[System.Environment.SetEnvironmentVariable](http://msdn.microsoft.com/en-us/library/z46c489x.aspx)允许您修改进程环境块。不过，对于臭名昭著的 PITA Oracle 来说，这是否足够，尚无定论。;)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-04T08:47:43.183

正如[Mark](https://stackoverflow.com/users/2199/mark-brackett) [建议](https://stackoverflow.com/questions/338875/is-it-possible-to-use-odp-11-xcopy-deployment-and-not-change-the-path#338937)的那样，您始终可以让您的应用程序更改当前进程的环境变量。请注意，显然，您必须在进行任何 ODP .NET 调用之前执行此操作。

另请注意，如果您只需要纯 ODP .NET 功能，我的意思是您特别不需要：

*   分布式事务 ( [TransactionScope](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx) )。
*   ODBC。
*   OLEDB。

如果是这种情况，您只能将[Oracle Instant Client](http://www.oracle.com/technology/software/tech/oci/instantclient/htdocs/winsoft.html)与您的应用程序一起分发。有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/70602/what-is-the-minimum-client-footprint-required-to-connect-c-to-an-oracle-database)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-13T17:09:33.577

更改环境变量是一个很好的技巧，但只是为了学术完整性，我认为[嵌入程序集解析](https://stackoverflow.com/questions/96732/embedding-a-dll-to-be-used-by-another)实际上是解决这个问题的“正确”方法，即使它是更多的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-09-01T07:04:11.700

是的，您可以，有关详细信息，请参阅[http://ora-00001.blogspot.com/2010/01/odpnet-minimal-non-intrusive-install.html](http://ora-00001.blogspot.com/2010/01/odpnet-minimal-non-intrusive-install.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-09-13T14:18:01.190

如前所述，[这个](https://stackoverflow.com/questions/70602/what-is-the-minimum-client-footprint-required-to-connect-c-to-an-oracle-database)StackOverflow 问题讨论了如何实现您的目标。[这个](https://stackoverflow.com/questions/70602/what-is-the-minimum-client-footprint-required-to-connect-c-to-an-oracle-database/70901#70901)答案相当不错。我评论了那个答案，我能够使用 Easy Connect 连接字符串并在我的生产机器和我的开发机器上使用相同的二进制文件，只需将 Instant Client Lite DLL 和 Oracle.DataAccess.dll 复制到生产中的应用程序文件夹机器。在我的开发机器上，我安装了完整的 Oracle 客户端。这种方式根本不需要修改路径语句。

# database-design - 为什么要使用散列来为大量文件创建路径名？

> ID：338880
> 
> 赞同：3
> 
> 时间：2008-12-03T21:56:48.787
> 
> 标签：database-design, data-structures, design-patterns

我注意到在许多情况下，应用程序或数据库使用必须确定路径和文件名来存储文件/blob 的集合。我相信预期的结果是路径永远不会太深，或者文件夹太满的情况 - 文件夹中的文件（或文件夹）过多会导致访问速度变慢。

编辑：示例通常是数字图书馆或存储库，尽管我能想到的最简单的示例（可以在大约 30 秒内安装）是[Zotero 文档/引文数据库。](http://zotero.org)

为什么要这样做？

编辑：感谢 Mat 的回答——这种使用哈希创建文件路径的技术有名称吗？它是一种*模式*吗？我想阅读更多内容，但未能在[ACM 数字图书馆中找到任何内容](http://portal.acm.org/portal.cfm)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-03T22:20:24.137

### 哈希/B:树

当您只打算使用“=”运算符进行搜索时，散列的优点是可以更快地查看。

如果您要使用“<”或“>”之类的内容或“=”以外的任何其他内容，您将需要使用 B:Tree，因为它能够进行这种搜索。

### 目录结构

如果您有数十万个文件要存储在文件系统上，并且将它们全部放在一个目录中，那么您将达到目录 inode 变得如此庞大以至于需要几分钟才能从中添加/删除文件的地步该目录，您甚至可能会遇到 inode 无法放入内存的情况，并且您将无法添加/删除甚至触摸该目录。

您可以放心，对于散列方法 foo，foo("something") 将始终返回相同的内容，例如“grbezi”。现在，您使用该哈希的一部分来存储文件，例如，在 gr/be/something 中。下次您需要该文件时，您只需计算哈希值，它就会直接可用。另外，你会得到一个事实，一个好的散列函数，散列空间中的散列分布非常好，而且对于大量的文件，它们会在层次结构中均匀分布，从而分担负载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-03T23:47:35.723

我认为我们需要更仔细地了解您正在尝试做的事情。一般来说，哈希和 B-Tree 抽象地提供了两个常见的操作：“插入项目”和“搜索项目”。只要散列函数表现良好，散列就会在*O(1)时间内*[渐近地](https://stackoverflow.com/questions/331295/worst-case-time-complexity-for-an-algorithm#331743)执行它们（尽管在大多数情况下，针对特定工作负载的表现非常糟糕的散列可能与*O(n)*一样糟糕。） AB 树相比之下，插入和搜索都需要*O(log n)时间。*因此*，如果这些是您执行的唯一操作*，哈希表是更快的选择（如果您必须自己编写它，它比实现 B 树要简单得多。）

 ***当您想要添加操作时，踢球者就会出现。如果您想做任何需要排序的事情（例如，按键顺序读取元素），则必须做其他事情，最简单的方法是复制键并对其进行排序，然后使用该临时表访问键。问题是排序的时间复杂度是*O(n log n)*，所以如果你必须经常这样做，哈希表不再具有性能优势。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-03T22:00:29.560

检查哈希比遍历 B 树要快。因此，如果进行频繁的存在性检查，此方法可能很有用。除此之外，我不太了解这种情况，因为哈希表不保留顺序或层次结构。因此，如果需要单独遍历目录，则在其中存储目录结构似乎不可行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-03T22:30:02.120

哈希还赋予路径名唯一性。很少有名字冲突。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-12-07T20:41:17.020

尤其是 Zotero，它实际上使用了 8 个字符的字母数字唯一 ID。它们不是与底层文件相关的任何内容的哈希，它们实际上对应于 Zotero 数据库中附件的密钥（也用于使用 Zotero API 访问文件及其元数据）。该密钥在本地 Zotero 实例中保证是唯一的（嗯，对于项目少于 2821109907457 项的库），并且它与一个库密钥连接，以便为更大的 Zotero 世界中的附件创建一个全局唯一的密钥。文件系统中的密钥在很大程度上用于解决名称冲突和特殊字符。

My understanding is that many of the UUIDs you see around the library and repository world are similar in justification-- they're less collision-prone than autoincrementing numeric IDs, making many things a good deal simpler, but they aren't, in contrast to the proper SHA1 hashes used as commit identifiers in git, necessarily a hash.

# .net - 监控 .NET 线程

> ID：338884
> 
> 赞同：5
> 
> 时间：2008-12-03T21:57:29.377
> 
> 标签：.net, multithreading, visualvm

有什么方法可以像 VisualVM 对 Java 那样在 .NET 运行时监视/记录线程交互？目前我没有特定的需求，但我认为很高兴看到我的应用程序中的所有线程如何交互。

![https://visualvm.dev.java.net/images/threads.png](https://visualvm.dev.java.net/images/threads.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-03T23:08:15.833

我对 Java 中的 VisualVM 不熟悉....但是....

如果您尝试以编程方式完成此操作...请查看 WMI 性能计数器。我目前正在和他们一起工作！

[MSDN 链接到 WMI 性能计数器](http://msdn.microsoft.com/en-us/library/aa392397(VS.85).aspx)

*请记住*，如果您尝试查看性能计数器，请使用 Visual Studio .NET 中的服务器资源管理器。您可以查看您的机器（或给定机器）上的所有性能计数器，以及它们的相关属性。

对于性能计数器值检索，请查看此链接： [计数器值检索的 MSDN 链接](http://msdn.microsoft.com/en-us/library/xb29hack.aspx)

有关更改和检索性能计数器值的演练，请查看此链接： [更改/检索性能计数器值的 MSDN 链接](http://msdn.microsoft.com/en-us/library/s155t6ta(VS.71).aspx)

如果您不尝试以编程方式执行此操作，并且只想查看 Windows 性能监视器工具 (Perfmon)，则必须从“控制面板”的“管理工具”菜单中调用它（在“性能下”）...或。 ...要打开 PerfMon，只需转到“开始”菜单，选择“运行”并键入 perfmon。

这是一个可视化监控线程和进程的好工具。不过，这不是以编程方式完成的，更多的是出于管理和查看目的，而不是构建信息/工具供 .NET 应用程序使用/检索。Perfmon 工具与您帖子中的 VisualVM 工具的屏幕截图/图像几乎相同。

这是 Windows Perfmon 的链接：十大计数器：

[性能链接](http://adminfoo.net/2007/04/windows-perfmon-top-ten-counters.html)

希望这可以帮助您朝着正确的方向前进……干杯！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-03T22:41:04.797

.NET[诊断 C# 线程监视应用程序](http://www.codeproject.com/KB/dotnet/threadmonitor.aspx)似乎可以满足您的需求

编辑：如果您是 C# 新手，那么您可能需要[专门为 Java Developers查看一个](http://en.csharp-online.net/CSharp_FAQ:_What_is_the_difference_between_CSharp_and_Java_threads)[简洁的 wiki](http://en.csharp-online.net/)。

# java - Java 泛型：泛型类型仅定义为返回类型

> ID：338887
> 
> 赞同：71
> 
> 时间：2008-12-03T21:58:00.517
> 
> 标签：java, generics, java-5

我正在查看 GWT 的一些 GXT 代码，我遇到了泛型的这种使用，我在 Java 教程中找不到另一个示例。[`com.extjs.gxt.ui.client.data.BaseModelData`](http://extjs.com/deploy/gxtdocs/com/extjs/gxt/ui/client/data/BaseModelData.html)如果您想查看所有代码，则类名是。以下是重要部分：

```
private RpcMap map;

public <X> X get(String property) {
  if (allowNestedValues && NestedModelUtil.isNestedProperty(property)) {
    return (X)NestedModelUtil.getNestedValue(this, property);
  }
  return map == null ? null : (X) map.get(property);
} 
```

`X`在类中的任何其他地方或层次结构中的任何地方都没有定义，当我在 Eclipse 中点击“转到声明”时，它只是转到`<X>`公共方法签名中的。

我尝试使用以下两个示例调用此方法，看看会发生什么：

```
public Date getExpiredate() {
    return  get("expiredate");
}

public String getSubject() {
    return  get("subject");
} 
```

它们编译并且不显示错误或警告。我认为至少我必须做一个演员才能让它发挥作用。

这是否意味着泛型允许一个神奇的返回值，它可以是任何东西，并且会在运行时爆炸？这似乎与泛型应该做的背道而驰。任何人都可以向我解释这一点，并可能给我一个链接到一些解释这个更好一点的文档吗？我已经阅读了 Sun 关于泛型的 23 页 pdf，每个返回值示例都是在类级别定义的，或者在传入的参数之一中定义。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2008-12-03T22:05:41.700

该方法返回您期望的任何类型（`<X>`在方法中定义并且绝对无界）。

这是非常非常危险的，因为没有规定返回类型实际上与返回值匹配。

这样做的唯一优点是您不必强制转换可以返回任何类型的通用查找方法的返回值。

我会说：小心使用这样的结构，因为你几乎失去了所有类型安全性，并且只获得了你不必在每次调用`get()`.

是的：这几乎是一种黑魔法，它在运行时爆炸并打破了泛型应该实现的整个想法。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2008-12-03T22:02:53.643

类型在方法上声明。就是“ `<X>`”的意思。然后类型的范围仅限于方法，并且与特定调用相关。您的测试代码编译的原因是编译器试图确定类型，并且只有在不能确定时才会抱怨。在某些情况下，您必须明确。

例如，声明[`Collections.emptySet()`](http://java.sun.com/javase/6/docs/api/java/util/Collections.html#emptySet())为

```
public static final <T> Set<T> emptySet() 
```

在这种情况下，编译器可以猜测：

```
Set<String> s = Collections.emptySet(); 
```

但如果不能，您必须输入：

```
Collections.<String>emptySet(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2011-09-27T14:38:59.480

我只是想用 GXT 类来解决同样的问题。具体来说，我试图调用具有以下签名的方法：

```
class Model {
    public <X> X get(String property) { ... }
} 
```

要从您的代码中调用上述方法并将 X 转换为字符串，我执行以下操作：

```
public String myMethod(Data data) {
    Model model = new Model(data);
    return model.<String>get("status");
} 
```

上面的代码将调用 get 方法并告诉它 X 返回的类型应该作为字符串返回。

在方法与您在同一个类中的情况下，我发现我必须用“this.”来调用它。例如：

```
this.<String>get("status"); 
```

正如其他人所说，这对 GXT 团队来说是相当草率和危险的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-03T22:05:02.607

有趣的注释，来自[RpcMap (GXT API 1.2)](http://extjs.com/deploy/gxtdocs/com/extjs/gxt/ui/client/data/RpcMap.html#get(java.lang.Object))

获取标题：

```
public java.lang.Object get(java.lang.Object key) 
```

在那里有一个未实例化的通用参数`<X>`具有相同的效果，只是您不必到处都说“对象”。我同意另一张海报，这很草率而且有点危险。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-03T22:17:24.003

BaseModelData 在编译时会引发未经检查的警告，因为它是不安全的。像这样使用，您的代码将在运行时抛出 ClassCastException，即使它本身没有任何警告。

```
public String getExpireDate() {
  return  get("expiredate");
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-21T13:02:00.510

是的，这很危险。通常，您会像这样保护此代码：

```
<X> getProperty(String name, Class<X> clazz) {
   X foo = (X) whatever(name);
   assert clazz.isAssignableFrom(foo);
   return foo;
}

String getString(String name) {
  return getProperty(name, String.class);
}

int getInt(String name) {
  return getProperty(name, Integer.class);
} 
```

# windows - deltree 发生了什么事，它的替代品是什么？

> ID：338895
> 
> 赞同：84
> 
> 时间：2008-12-03T21:59:56.423
> 
> 标签：windows, batch-file, cmd, dos

在早期版本的 MS-DOS 中——我想说的是版本 7，但我可能错了——有一个`deltree`命令，它递归地从给定路径中删除所有子目录和文件。

`deltree`不再存在，但`del`似乎没有继承删除树的能力。`del /s`删除文件，但不删除文件夹。

如何轻松（即，在一个命令中）从批处理文件中删除一棵树？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-01-15T19:57:45.067

正如其他人所提到的，该`rd`命令具有`/s`递归删除子目录的开关。您可以将它与`/q`开关结合使用以强制删除子目录（及其内容）而不提示

```
rd /s /q c:\foobar 
```

每个人都缺少的是，它`rd`并*不能*完全替代谷歌搜索返回的`deltree`似乎（[几乎](http://www.technofileonline.com/texts/bkdeltree98.html)）每一页，因为`windows deltree`您会相信。该`deltree`命令适用于目录**和文件**，使其成为一个方便的通用删除命令。即以下两项均有效：

```
deltree /y c:\foobar
deltree /y c:\baz.txt 
```

但是`rd`（毫不奇怪）*仅适用于目录*。因此，只有这些命令中的第一个是有效的，而第二个给出错误并保持文件未被删除：

```
rd /s /q c:\foobar
rd /s /q c:\baz.txt 
```

此外，该`del`命令仅适用于文件，而不适用于目录，因此只有第二个命令有效，而第一个给出错误：

```
del /f /q c:\foobar
del /f /q c:\baz.txt 
```

没有内置的方法来删除文件和目录，就像使用`deltree`. 单独使用`rd`and`del`充其量是不方便的，因为它需要区分文件系统对象（文件/文件夹名称）是文件还是目录，这并不总是可行或实用的。

您可以从以前的操作系统复制该`deltree`命令，但它仅适用于 32 位版本的 Windows，因为它是 16 位 DOS 命令（即使在 Windows 9x 中）。

另一种选择是创建一个同时调用`del`和的批处理文件`rd`；像这样的东西：

```
::deltree.bat

@echo off
rd  %* 2> nul
del %* 2> nul 
```

你会这样称呼它：

```
deltree.bat /s /q /f c:\foobar
deltree.bat /s /q /f c:\baz.txt 
```

这同时调用`rd`and `del`，传入参数并将输出重定向到`nul`以避免其中一个总是会发出的错误。

您可能希望自定义行为以适应或简化参数或允许错误消息，但即便如此，它也不理想，也不能直接替代`deltree`.

另一种方法是获取第三方工具，尽管找到一个是搜索查询制作的真正练习。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2008-12-03T22:07:48.280

它被替换为命令：RMDIR 或 RD

使用 /S 删除所有子目录

用 /Q 安静地使用它

例子：

```
RMDIR /S /Q Folder2Delete
RD /S /Q Folder2Delete 
```

文档：

*   [维基百科上的 DELTREE](http://en.wikipedia.org/wiki/Deltree)
*   [维基百科上的 RMDIR](http://en.wikipedia.org/wiki/Rmdir)
*   [微软的 RMDIR](http://technet.microsoft.com/en-us/library/bb490990.aspx)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-03-28T00:04:33.077

怀着怀旧之情，我编写了自己的 deltree.exe。它适用于目录和文件，并使用 SHFileOperation() 来提高速度。

[https://github.com/ai7/toolbox/tree/master/deltree](https://github.com/ai7/toolbox/tree/master/deltree)

```
deltree v1.01 [Mar 27 2015, 16:31:02] (gcc 4.9.1)

Usage: deltree [options] <path> ...

Options:
  -y    yes, suppresses prompting for confirmation
  -s    silent, do not display any progress dialog
  -n    do nothing, simulate the operation
  -f    force, no prompting/silent (for rm compatibility)
  -r    ignored (for rm compatibility)

Delete directories and all the subdirectories and files in it. 
```

它需要通配符，你可以像 unix rm 一样使用它：

```
deltree -rf * 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-12-03T22:02:44.720

```
rmdir /s /q directory 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-02-16T14:26:48.430

如今，您可以使用 Powershell 执行相同的任务：

```
powershell -Command "Remove-Item 'PathToMyDirectory\*' -Recurse -Force" 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-12-03T22:08:07.920

```
$帮助研发
移除（删除）一个目录。

RMDIR [/S] [/Q] [驱动器:]路径
RD [/S] [/Q] [驱动器:]路径

    /S 删除指定目录下的所有目录和文件
            除了目录本身。用于删除目录
            树。

    /Q 安静模式，不询问是否可以用 /S 删除目录树

```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-01-10T17:04:39.660

实际上，现代 Windows 操作系统中的 RMDIR 和 RD 命令将 Win 98 的 RD 和 Deltree 命令合并在一个命令中。这是一个内部命令，这就是您找不到任何 RD.exe 和 RMDIR.exe 的原因。

通过键入此“RD /？” 在没有双引号的 cmd 中，您将得到您想要的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-06-09T21:42:33.750

递归删除目录及其所有内容

```
rd /s MY_DOOMED_DIR 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-08-17T02:35:26.123

用这个：

```
cd (your directory here)
del *.* /f /s /q 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-10-01T08:18:48.403

删除所有文件和子目录

```
cd /d Directory && rd /s /q .\ 
```

# protocols - 远程进程启动/关闭的简单协议

> ID：338910
> 
> 赞同：0
> 
> 时间：2008-12-03T22:03:49.850
> 
> 标签：protocols, process-management, remote-process

我正在寻找一种简单的协议来从一个管理应用程序控制远程进程。远程进程将在 Windows 和 Linux (x86) 上运行。

是否有用于管理远程进程的简单协议，我可以找到在 Windows 和 Linux 上运行的守护进程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-03T22:21:18.410

我认为 ssh 是远程管理的“瑞士军刀”。然后，通过 ssh 进行通信的自定义脚本可以进行进程管理。在 Windows 上，我将 ssh 作为[Cygwin](http://www.cygwin.com/)的一部分安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-03T23:09:43.913

在 Windows 上，您可以使用 shutdown.exe \\remote_name [/y] [/c]

[http://support.microsoft.com/kb/317371](http://support.microsoft.com/kb/317371)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-04T08:27:33.600

谢谢内森。

Windows 用户也可以使用以下软件包代替 Cygwin：[http ://sshwindows.sourceforge.net/](http://sshwindows.sourceforge.net/)

# yahoo - 雅虎管道 - 任何组合项目的方式？

> ID：338912
> 
> 赞同：4
> 
> 时间：2008-12-03T22:04:39.003
> 
> 标签：yahoo, yahoo-pipes

我正在处理管道并且在合并两个项目列表时遇到了麻烦。

```
List 1:
[0] letter - a
[1] letter - b
[2] letter - c

List 2:
[1] word - apple
[2] word - banana
[3] word - cake 
```

我想要发出以下内容的东西：

```
List 3:
[1] letter - a
    word - apple
[2] letter - b
    word - banana
[3] letter - c
    word - cake 
```

我一生都无法弄清楚如何进行这个简单的操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-22T16:46:18.103

你问的是在 Yahoo Pipes 中做的冗长而复杂的事情。如果您仍然想解决问题，这是我的解决方案：

在此示例中，列表 1 是 Yahoo 搜索“apples”，列表 2 是 Yahoo 搜索“oranges”。

1.  主管以数字列表[开头](http://pipes.yahoo.com/pipes/pipe.edit?_id=dN3Kj0TQ3RGOQHxfQBJ3AQ)。该列表被剪裁为列表 1 的长度。
2.  然后对于每个数字 n，[将列表 1 的第 n 个项目](http://pipes.yahoo.com/pipes/pipe.edit#aNjs2ETQ3RGEU_FYQBJ3AQ)附加到编号项目。
3.  然后对于每个数字 n，[将列表 2 的第 n 项](http://pipes.yahoo.com/pipes/pipe.edit#7CccDUXQ3RG5327zBB50VA)附加到编号项。

完成的。

你可能想清理一下。添加适当的标题，删除数字值等。

笔记：

1.  我使用了[alto maltés](http://pipes.yahoo.com/pipes/person.info?eyuid=BFSiVIoypHc8yva5CXQMmG0aaQ--)的数字列表。它不是 Yahoo Pipes 的一部分，因此它可能会停止工作。
2.  我使用了两个第 n 项管道。也许这可以简化。
3.  如果 List 2 比 List 1 短，则使用 List 2 的最后一个元素。如有必要，这应该很容易更改。

# vb.net - 工具提示控件如何通过新属性增强表单上的所有控件？

> ID：338924
> 
> 赞同：2
> 
> 时间：2008-12-03T22:08:31.557
> 
> 标签：vb.net, winforms, components

在回答另一个问题时，我开始想知道如何像 ToolTip 控件一样向表单中的所有控件添加新属性。

例如，我可以使用它来向所有文本框添加一个“IsDirty”标志，只需将组件添加到表单中，它就会为每个文本框处理这个。

当向窗体添加工具提示控件时，所有控件都会神奇地获得一个新属性“工具提示上的工具提示”，该属性可以通过编程方式和在设计视图中进行设置。

我希望能够像那样做自己的增强器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-03T22:14:50.497

它是一个[Extender Provider](http://msdn.microsoft.com/en-us/library/ms171835.aspx)。

# flash - 如何将可变参数作为扩展列表传递给方法？

> ID：338927
> 
> 赞同：3
> 
> 时间：2008-12-03T22:09:17.373
> 
> 标签：flash, variadic-functions

给定以下 Flash 方法：

```
function sendToJava(name:String, ... args)
{
  ExternalInterface.call("sendCommand", name, args);
} 
```

如何确保 ExternalInterface.call() 以扩展形式解释 args？现在，如果我将一个列表传递给“args”，则该列表将被 ExternalInterface.call() 解释为“Object[]”类型的单个参数。当参数到达 Java 时，我无法区分以逗号分隔的多个参数与包含逗号作为其值的一部分的单个参数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-24T21:00:56.293

一个小错字。它应该是：

```
function sendToJava(name:String, ... args)
{
  // See Array.unshift()
  args.unshift("sendCommand", name);

  // See Function.apply()
  ExternalInterface.call.apply(null, args);
} 
```

只需将“数组”更改为“应用”

无论如何，非常感谢您发布此内容。你是救生员！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-03T22:38:37.110

我在 IRC 上找到了答案 :)

```
function sendToJava(name:String, ... args)
{
  // See Array.unshift()
  args.unshift("sendCommand", name);

  // See Function.apply()
  ExternalInterface.call.array(null, args);
} 
```

# php - PHP、MSSQL2005 和代码页

> ID：338928
> 
> 赞同：1
> 
> 时间：2008-12-03T22:09:36.123
> 
> 标签：php, sql-server, encoding, codepages

我有一个访问 MSSQL2005 数据库的 php 脚本，从中读取一些数据并将结果通过邮件发送。

在某些列名和字段本身中都有特殊字符。

当我通过浏览器（网络服务器 iis）访问脚本时，查询会正确执行，并且邮件的内容（对于我的观众）正确编码。但是，当我从控制台执行 php 时，查询失败（由于列名中的特殊字符）。如果我将查询中的特殊字符替换为对 chr() 的调用和 latin-1 中的字符代码，则查询将正确执行，但结果也以 latin-1 编码，因此无法在邮件中正确显示。为什么 PHP/MSSQL 驱动程序/……在这两种情况下使用不同的编码？有办法解决吗？

如果您想知道，我需要控制台，因为我想使用 SQLAgent（或 taskmanager 或其他）安排脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-13T03:08:54.710

根据您在数据库中的字符类型，我猜这可能是控制台限制。如果您`chcp`在控制台中键入，您将看到活动代码页是什么，它可能类似于[CP437](http://en.wikipedia.org/wiki/Code_page_437) ，也称为扩展 ASCII。如果此代码页中有字符，例如 UTF8，您可能会遇到问题。`chcp 65001`您可以通过键入切换到 UTF8来更改当前活动的代码页。

您可能还想根据所需的字符将默认 Raster 字体更改为 Lucida Console，因为并非所有字体都支持扩展字符（右键单击命令提示符窗口的标题、属性、字体）。

As already said, PHP's unicode support is not ideal, but you can manage to do it in PHP5 with a few well placed function call of [utf8_decode](http://php.net/utf8_decode). The secret of character encoding is to understand well what is the current encoding of **all** the tools you are using: database, database connection, current bytes in your PHP variable, your output to the console screen, your email's body encoding, your email client, and so on...

For everything that have special characters, in our modern days, something like UTF8 is often recommended. Make sure everything along the way is set to UTF8 and convert only where necessary.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-03T22:42:07.417

PHP 对非英语世界的糟糕支持是众所周知的。我从未使用过包含基本 ASCII 领域之外的字符的数据库，但显然你已经有一个解决方法，而且似乎你只需要忍受它。

如果您想更进一步，您可以： 1\. 编写一个包含所有特殊字符及其 CHR 等效项的数组 2\. foreach 数组和 str_replace 查询

但是，如果查询是硬编码的，我想你所拥有的很好。另外，请确保您使用的是最新的 PHP，至少 4.4.x，总有一个更改已修复，但我浏览了 4.xx 发行说明，我没有看到任何与您的问题相关的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-13T01:14:08.187

关于 PHP 字符串要记住的是它们是字节流。如果您想以正确的字符集获取数据（无论您在做什么），您必须通过某种函数或过滤器明确地执行此操作。这都是相当低级的。

根据您的设置，您可能需要知道数据库中字符串的内部字符集，但至少您需要知道数据库发送给 PHP 的字符集（因为，记住，对于 PHP，它只是一个流字节）。

然后你必须知道目标字符集（并且可能指定它，无论如何你都应该这样做）。例如，假设您从数据库中获取 utf-8，但希望发送 latin-1（因此 base64 或 q-printable 编码为“Content-transfer-encoding”）：

```
$send_string = base64_encode(utf8_decode($database_string)); 
```

当然在这种情况下，您必须知道所有 utf-8 字符都存在于 latin-1 字符集中，并且您可能并不真正想要 base64（不幸的是 PHP 没有一个好的 q-printable 编码功能，虽然奇怪的是，它确实用于解码），如果你不是在谈论 utf-8 <=> latin-1 你会想改用 mbstring 函数。

至于控制台，当您从控制台输入特殊字符时，您必须知道 PHP 会得到什么，这可能取决于 shell 和/或 PHP 设置。但请记住，PHP 仅将字符串理解为字节字节字节，您应该能够解决它。

# windows - 如何在右键菜单中添加条目？

> ID：338931
> 
> 赞同：4
> 
> 时间：2008-12-03T22:10:40.117
> 
> 标签：windows, language-agnostic, menu

我不太确定如何用谷歌搜索这个。我想知道如何在 Windows 系统的右键菜单中添加一个条目。诸如 "Open with ..." 或 "Archive with ..." 之类的东西。我更喜欢在 Windows XP 下工作的解决方案。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-12-03T22:37:27.690

在注册表中，HKEY CLASSES ROOT 包含您需要的东西。

具体来说

```
(any file)
HKEY_CLASSES_ROOT\*\shellex\ContextMenuHandlers 

(any folder)
HKEY_CLASSES_ROOT\Directory\shell
HKEY_CLASSES_ROOT\Directory\shellex\ContextMenuHandlers 
```

当您卸载驱动程序时，旧的 nvidia 右键单击​​桌面功能会从文件夹中删除“新”。所以我必须弄清楚如何恢复它。

祝你好运。

# c# - 解压文件错误

> ID：338934
> 
> 赞同：1
> 
> 时间：2008-12-03T22:11:11.520
> 
> 标签：c#, xml

[我正在使用来自www.icsharpcode.net](http://www.icsharpcode.net)的 SharpZipLib 开源 .net 库

我的目标是解压缩 xml 文件并将其读入数据集。但是，将文件读入数据集时出现以下错误：“根级别的数据无效。第 1 行，位置 1。” 我相信正在发生的事情是由于以下原因，解压缩代码没有释放文件。

1.) 如果我解压缩文件并退出应用程序。当我重新启动应用程序时，我可以将解压缩的文件读入数据集中。2.）如果我在写出 xml 文件后立即读取它（没有压缩），那么它工作正常。
3.）如果我将数据集写入 xml，将其压缩，解压缩，然后尝试将其读回我得到异常。

下面的代码非常简单。UnZipFile 将返回刚刚解压缩的文件的名称。在此调用的正下方是将其读入数据集的调用。变量 fileToRead 是新解压缩的 xml 文件的完整路径。

```
string fileToRead = UnZipFile(filepath, DOViewerUploadStoreArea);
ds.ReadXml(fileToRead )

private string UnZipFile(string file, string dirToUnzipTo)
{

       string unzippedfile = "";

        try
        {
            ZipInputStream s = new ZipInputStream(File.OpenRead(file));
            ZipEntry myEntry;
            string tmpEntry = String.Empty;
            while ((myEntry = s.GetNextEntry()) != null)
            {
                string directoryName = dirToUnzipTo;
                string fileName = Path.GetFileName(myEntry.Name);
                string fileWDir = directoryName + fileName;
                unzippedfile = fileWDir;

                FileStream streamWriter = File.Create(fileWDir);
                int size = 4096;
                byte[] data = new byte[4096];
                while (true)
                {
                    size = s.Read(data, 0, data.Length);
                    if (size > 0) { streamWriter.Write(data, 0, size); }
                    else { break; }
                }
                streamWriter.Close();
            }
            s.Close();
        }
        catch (Exception ex)
        {
            LogStatus.WriteErrorLog(ex, "ERROR", "DOViewer.UnZipFile");

        }
        return (unzippedfile);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-03T22:34:01.363

那么，最终的文件是什么样的呢？（与原版相比）。您没有显示邮政编码，这可能是难题的一部分，尤其是当您部分吞下异常时。

我也会尝试确保一切`IDisposable`都是`Dispose()`d，最好是通过`using`; 另外-如果问题出在路径构造上，请使用`Path.Combine`. 请注意，如果`myEntry.Name`包含子目录，则需要手动创建它们。

这就是我所拥有的 - 它适用于解压缩 ICSharpCode.SharpZipLib.dll：

```
 private string UnZipFile(string file, string dirToUnzipTo)
    {

        string unzippedfile = "";

        try
        {
            using(Stream inStream = File.OpenRead(file))
            using (ZipInputStream s = new ZipInputStream(inStream))
            {
                ZipEntry myEntry;
                byte[] data = new byte[4096];
                while ((myEntry = s.GetNextEntry()) != null)
                {
                    string fileWDir = Path.Combine(dirToUnzipTo, myEntry.Name);
                    string dir = Path.GetDirectoryName(fileWDir);
                    // note only supports a single level of sub-directories...
                    if (!Directory.Exists(dir)) Directory.CreateDirectory(dir);
                    unzippedfile = fileWDir; // note; returns last file if multiple

                    using (FileStream outStream = File.Create(fileWDir))
                    {
                        int size;
                        while ((size = s.Read(data, 0, data.Length)) > 0)
                        {
                            outStream.Write(data, 0, size);
                        }
                        outStream.Close();
                    }
                }
                s.Close();
            }

        }
        catch (Exception ex)
        {
            Console.WriteLine(ex);

        }
        return (unzippedfile);
    } 
```

也可能是问题出在编写 zip 的代码中，或者出在读取生成文件的代码中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-04T00:12:08.107

我使用 TextPad 将原始版本与最终版本进行了比较，它们是相同的。我还重写了代码以利用 using。这是代码。我的问题似乎集中在文件锁定或其他方面。如果我解压缩文件退出应用程序，然后启动它会读取 find。

```
private string UnZipFile(string file, string dirToUnzipTo)
    {
        string unzippedfile = "";

        try
        {
            using (ZipInputStream s = new ZipInputStream(File.OpenRead(file)))
            {

                ZipEntry theEntry;
                while ((theEntry = s.GetNextEntry()) != null)
                {
                    string directoryName = dirToUnzipTo;
                    string fileName = Path.GetFileName(theEntry.Name);
                    string fileWDir = directoryName + fileName;
                    unzippedfile = fileWDir;

                    if (fileName != String.Empty)
                    {
                        using (FileStream streamWriter = File.Create(fileWDir))
                        {
                            int size = 2048;
                            byte[] data = new byte[2048];
                            while (true)
                            {
                                size = s.Read(data, 0, data.Length);
                                if (size > 0)
                                {
                                    streamWriter.Write(data, 0, size);
                                }
                                else
                                {
                                    break;
                                }
                            }
                        }
                    }
                }
            }
        }
        catch (Exception ex)
        {
            LogStatus.WriteErrorLog(ex, "ERROR", "DOViewer.UnZipFile");

        }
        return (unzippedfile);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T16:01:30.220

使用 DotNetZip 实现这一点要简单得多。

```
using (ZipFile zip = ZipFile.Read(ExistingZipFile))
{
     zip.ExtractAll(TargetDirectory);       
} 
```

如果您想决定要提取哪些文件....

```
using (ZipFile zip = ZipFile.Read(ExistingZipFile))
{
    foreach (ZipEntry e in zip)
    {
        if (wantThisFile(e.FileName)) e.Extract(TargetDirectory);
    }
} 
```

如果您想在提取过程中覆盖现有文件：

```
using (ZipFile zip = ZipFile.Read(ExistingZipFile))
{
     zip.ExtractAll(TargetDirectory, ExtractExistingFileAction.OverwriteSilently);
} 
```

或者，要提取受密码保护的条目：

```
using (ZipFile zip = ZipFile.Read(ExistingZipFile))
{
     zip.Password = "Shhhh, Very Secret!";
     zip.ExtractAll(TargetDirectory, ExtractExistingFileAction.OverwriteSilently);
} 
```

# .net - 绑定到 DataGridView - 有没有办法“绑定”单元格的背景颜色？

> ID：338935
> 
> 赞同：19
> 
> 时间：2008-12-03T22:11:39.147
> 
> 标签：.net, winforms, data-binding, datagridview

我将列表绑定到 DataGridView。SomeObject 类的一个属性是状态码（例如 Red、Yellow、Green）。我可以轻松地将状态“绑定”到单元格的背景颜色吗？绑定到工具提示怎么样？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2008-12-04T09:51:36.300

您可以为 DataGridView 的 CellFormatting 事件编写一个处理程序来自定义背景颜色。这是一个工作示例（您需要将 DataGridView 拖到默认窗体上，然后双击 CellFormatting 事件以创建处理程序）：

```
using System.Drawing;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        private BindingSource _source = new BindingSource();

        public Form1()
        {
            InitializeComponent();

            _source.Add(new MyData(Status.Amber, "Item A"));
            _source.Add(new MyData(Status.Red, "Item B"));
            _source.Add(new MyData(Status.Green, "Item C"));
            _source.Add(new MyData(Status.Green, "Item D"));

            dataGridView1.DataSource = _source;
            dataGridView1.Columns[0].Visible = false;
        }

        private void dataGridView1_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
        {
            if (e.ColumnIndex == 1)
            {
                DataGridView dgv = sender as DataGridView;
                MyData data = dgv.Rows[e.RowIndex].DataBoundItem as MyData;

                switch (data.Status)
                {
                    case Status.Green:
                        e.CellStyle.BackColor = Color.Green;
                        break;
                    case Status.Amber:
                        e.CellStyle.BackColor = Color.Orange;
                        break;
                    case Status.Red:
                        e.CellStyle.BackColor = Color.Red;
                        break;
                }
            }
        }
    }

    public class MyData
    {
        public Status Status { get; set; }
        public string Text { get; set; }

        public MyData(Status status, string text)
        {
            Status = status;
            Text = text;
        }
    }

    public enum Status
    {
        Green,
        Amber,
        Red
    }
} 
```

为简单起见，此处的对象仅具有状态和文本。我为这些对象的示例集创建了一个 BindingSource，然后将其用作 DataGridView 的数据源。默认情况下，网格会在您绑定时自动生成列，因此无需手动执行此操作。我还隐藏了绑定到状态值的第一列，因为我们将改为为文本单元格着色。

为了实际进行绘画，我们响应 CellFormatting 事件。我们通过转换 sender 来获得对 DataGridView 的引用，然后使用 DataGridViewCellFormattingEventArgs 对象的 RowIndex 属性来获取数据项本身（每个 Row 都有一个 DataBoundItem 属性，可以方便地为我们提供这个）。由于 DataBoundItem 是一个对象类型，我们需要将它转换为我们的特定类型，然后我们才能真正获得 Status 属性本身......唷！

我没有任何工具提示编程经验，但我认为您应该响应 MouseHover 事件，然后努力发现从哪一行开始。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-04T09:49:43.857

开箱即用，任何 DataGridViewColumn 只能绑定到 DataSource 中对象的一个​​属性，属性的名称由每个 DataGridViewColumn 的 DataPropertyName 给出（您将拥有特定的列类型，例如：DataGridViewTextBoxColumn，...） .

您可以使用 DataGridView.CellFormatting 事件根据数据绑定项更改单元格的样式。在该事件的DataGridViewCellFormattingEventArgs 中获取行索引，从那里可以获取当前对象（行的源）。从那里，您可以使用对象的任何属性来影响您的单元格。

一个好的起点（类似的想法）：[这里](http://www.developer-corner.com/Resources/KnowledgeBase/tabid/118/articleType/ArticleView/articleId/28/DataGridView-how-to-bind-nested-objects.aspx)

第二个想法是开发您自己的 DataGridViewColumn 类型并为您需要绑定的其他内容添加属性。例如，与它具有内置 DataPropertyName 的方式相同，您可以添加自己的：BackgroundColorPropertyName。[可以在此处](http://msdn.microsoft.com/en-us/library/ms180996.aspx)找到构建自定义 DataGridViewColumns 的起点。

# c# - 当服务托管在 IIS 下时，如何为 WCF ServiceHost 事件创建侦听器？

> ID：338940
> 
> 赞同：3
> 
> 时间：2008-12-03T22:13:44.540
> 
> 标签：c#, wcf, iis

我有一个将托管在 IIS 下的 WCF 服务。现在我有一些在服务构造函数中创建的资源（连接）。当托管服务的 IIS 关闭或重置时，我需要释放这些资源。这些不是每次客户端断开连接时我都会清除的资源，但它们是应用程序范围的资源，只有在服务本身或 IIS 关闭时才会释放。

我看到另一个帖子，有人提到他创建了一个监听器来捕获`ServiceHost`. 有人可以帮我弄清楚如何处理`ServiceHost`并捕获 IIS 重置或 IIS 关闭事件并释放 WCF 服务中的资源吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-04T03:23:25.540

您可以在包含资源的类上使用 IDisposable 模式和终结器。

在卸载 AppDomain 时，所有对象都已完成，如果引用资源（此类连接）的对象具有终结器，则将调用终结器，您可以在该点关闭/处置资源。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-04T10:15:15.940

好吧，我没有想法，但我认为[这篇文章](http://msdn.microsoft.com/en-us/library/bb332338.aspx)包含你在章节中的答案：“在 IIS 中访问 ServiceHost”。看来您需要构建自己的 HostFactory，因为开箱即用的 IIS 使用标准 HostFactory 并实际控制主机的创建和销毁。通过提供您自己的 HostFactory，您可以添加自己的代码来控制初始化和销毁​​...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-03T22:40:53.300

WCF 服务和 IIS 托管的全部意义在于实现可伸缩性并允许轻松托管。尽管您可以连接到 ServiceHostBase 类公开的事件（请参见[此处](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicehostbase_events.aspx)），但我建议您不要这样做，并分析您是否真的需要这些共享资源。要求您重新考虑的主要原因是：共享资源需要是线程安全的（IIS 可以同时处理许多请求），因此这会为您的应用程序的可扩展性造成瓶颈；其次，最好您的服务是无状态的，这包括（我猜）共享资源（或应用程序范围的资源）的使用。

# jira - JIRA api 的.NET 包装器？

> ID：338944
> 
> 赞同：13
> 
> 时间：2008-12-03T22:15:12.510
> 
> 标签：jira

我正在研究 JIRA 实现，需要使用 API。

有谁知道 JIRA SOAP API 的现有 .NET 包装器？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-02-24T08:34:46.497

在 Visual Studio .NET 项目中，右键单击项目引用并选择“添加服务引用”，输入 JIRA 的 WSDL 描述符的 URL ( [http://your_installation/rpc/soap/jiraservice-v1.wsdl](http://your_installation/rpc/soap/jiraservice-v1.wsdl) )，Visual Studio 将自动生成用于访问 JIRA SOAP API 的 .NET 类。

参数名称不是特别有意义，因此您首先需要大量参考文档。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2011-05-15T15:25:26.990

在 Visual Studio .Net 2010 中，选择菜单项目和添加服务引用。在对话框中选择高级选项。**然后在新对话框中选择 Add Web Reference。** [http://localhost:8080/rpc/soap/jirasoapservice-v2?wsdl](http://localhost:8080/rpc/soap/jirasoapservice-v2?wsdl)其中*localhost:8080*是您安装的 jira。我没有让它在 VS2010 中工作，只是添加服务参考。然后它只创建没有任何参数的方法。例如，登录方法声称没有参数，尽管 [文档]( [http://docs.atlassian.com/software/jira/docs/api/rpc-jira-plugin/latest/com/atlassian/jira/rpc/ soap/JiraSoapService.html#login(java.lang.String](http://docs.atlassian.com/software/jira/docs/api/rpc-jira-plugin/latest/com/atlassian/jira/rpc/soap/JiraSoapService.html#login(java.lang.String) , java.lang.String)) 说应该有一个用户和一个密码参数。看到这个[jira论坛](http://forums.atlassian.com/thread.jspa?threadID=47883)有关此事的更多信息。我不需要使用旧程序 Wsdl.exe。但我没有得到任何参数的智能感知，而不是它是什么样的类型：

```
this.JiraSrvTalker.createIssue(string In0 and,RemoteIssue In1) 
```

要知道第一个参数应该是来自的令牌

```
this.LoginToken = this.JiraSrvTalker.login(JiraAdmin, JiraAdminPwd); 
```

你必须检查文档。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2011-08-23T07:46:13.610

使用服务引用时，我也无法获取方法的参数。我必须做的是一个奇怪的“添加网络参考”技巧。

1.  添加服务参考
2.  点击左下角的“高级...”
3.  单击左下角的“添加 Web 引用...”
    1.  `http://<servername>/rpc/soap/jirasoapservice-v2?wsdl`

您现在将在服务引用下拥有一个“Web 引用”文件夹，`<servername>`名称为 。

```
var jira = new com.myserver.JiraSoapServiceService();
var loginToken = jira.login("user", "pass");
var issue = new com.myserver.RemoteIssue();
jira.createIssue(loginToken, issue); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-04-19T08:50:18.040

JIRA SOAP API 已被[弃用](https://developer.atlassian.com/jiradev/latest-updates/soap-and-xml-rpc-api-deprecation-notice)。所以请改用 REST API。

这是 JIRA REST API .NET 包装器：[Atlassian.Net SDK](https://bitbucket.org/farmas/atlassian.net-sdk)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-20T19:36:17.117

根据此页面[https://developer.atlassian.com/jiradev/support/archive/jira-rpc-services/creating-a-jira-soap-client/remote-api-soap-examples](https://developer.atlassian.com/jiradev/support/archive/jira-rpc-services/creating-a-jira-soap-client/remote-api-soap-examples)，JIRA SOAP API 已被弃用，并根据此页面[https://developer.atlassian.com/jiradev/latest-updates/soap-and-xml-rpc-api-deprecation-notice](https://developer.atlassian.com/jiradev/latest-updates/soap-and-xml-rpc-api-deprecation-notice)，从 JIRA 7.0+ 中完全删除。

我建议使用 JIRA REST API。

# c++ - 我可能在 Visual Studio 2005 中收到此“未定义符号”错误的一些原因（包括屏幕截图）

> ID：338945
> 
> 赞同：1
> 
> 时间：2008-12-03T22:15:21.823
> 
> 标签：c++, visual-studio-2005, debugging, visual-c++-2005

在调试我的 VS2005 项目时，当我尝试进入返回它正在努力处理的*vScenarioDescriptions*局部变量的函数时，我收到以下错误...

*[图片不再可用 http://people.ict.usc.edu/~crotchett/images/symbolnotdefined.JPG](http://people.ict.usc.edu/~crotchett/images/symbolnotdefined.JPG)*

当我继续浏览代码并进入函数时，似乎我在其他局部变量中也遇到了这个错误。有任何想法吗？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-03T22:52:44.697

模块编译时是否启用了优化？

如果是这样，则`vScenarioDescription`可能实际上并不存在于内存中。在 VS2008 中，我没有收到消息框错误，变量根本不会显示在“本地”窗口中，如果我尝试观看它，观看窗口会显示：

> CXX0017：错误：未找到符号“名称”

我没有安装 VS2005，所以我不知道它是否会弹出一个消息框，就像你看到的那样，或者表现得像 VS2008。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-04T04:37:10.100

在我看来，可能有几个：

*   符号信息可能已损坏。尝试对整个解决方案进行干净的重建。
*   如果解决方案中有多个项目，请检查配置管理器（构建菜单），如果它们都在调试设置中。比如说，某些 DLL 或某些组件可能处于不包含任何调试信息的发布模式。
*   如果您使用某些 3rd 方库 (DLL)，它们可能根本没有调试信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-03T22:18:38.337

这可能是命名空间问题。`namespace::`如果您尝试监视的符号位于命名空间内，请尝试在调试器监视窗口中的符号之前添加。

# .net - 什么是托管 C++ 等效于 C# using 语句

> ID：338950
> 
> 赞同：23
> 
> 时间：2008-12-03T22:16:21.180
> 
> 标签：.net, managed-c++, using-statement

如何在托管 C++ 中编写以下 C# 代码

```
void Foo()
{
    using (SqlConnection con = new SqlConnection("connectionStringGoesHere"))
    {
         //do stuff
    }
} 
```

**澄清：** 对于托管对象。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2008-12-04T07:47:12.433

假设您的意思是 C++/CLI（不是旧的托管 C++），以下是您的选择：

(1) 使用自动/基于堆栈的对象模拟 using-Block：

```
{
  SqlConnection conn(connectionString);
} 
```

这将在下一个封闭块结束时调用“conn”对象的析构函数。无论这是封闭函数，还是您手动添加以限制范围的块都无关紧要。

（2）显式调用“Dispose”，即销毁对象：

```
SqlConnection^ conn = nullptr;
try
{
  conn = gcnew SqlConnection(conntectionString);

}
finally
{
  if (conn != nullptr)
    delete conn;
} 
```

第一个将是“使用”的直接替代品。第二个是一个选项，通常您不需要这样做，除非您有选择地将引用传递给其他地方。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-04T02:21:53.463

在托管 C++ 中，只需使用堆栈语义即可。

```
void Foo(){
   SqlConnection con("connectionStringGoesHere");
    //do stuff
} 
```

当 con 超出范围时，将调用“析构函数”，即 Dispose()。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-23T13:21:28.467

你可以用 auto_ptr 风格做*类似的事情：*

```
void foo()
{
    using( Foo, p, gcnew Foo() )
    {
        p->x = 100;
    }
} 
```

具有以下内容：

```
template <typename T>
public ref class using_auto_ptr
{
public:
    using_auto_ptr(T ^p) : m_p(p),m_use(1) {}
    ~using_auto_ptr() { delete m_p; }
    T^ operator -> () { return m_p; }
    int m_use;
private:
    T ^ m_p;
};

#define using(CLASS,VAR,ALLOC) \
    for ( using_auto_ptr<CLASS> VAR(ALLOC); VAR.m_use; --VAR.m_use) 
```

以供参考：

```
public ref class Foo
{
public:
    Foo() : x(0) {}
    ~Foo()
    {
    }
    int x;
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-29T20:07:48.900

```
#include <iostream>

using namespace std;

class Disposable{
private:
    int disposed=0;
public:
    int notDisposed(){
        return !disposed;
    }

    void doDispose(){
        disposed = true;
        dispose();
    }

    virtual void dispose(){}

};

class Connection : public Disposable {

private:
    Connection *previous=nullptr;
public:
    static Connection *instance;

    Connection(){
        previous=instance;
        instance=this;
    }

    void dispose(){
        delete instance;
        instance = previous;
    }
};

Connection *Connection::instance=nullptr;

#define using(obj) for(Disposable *__tmpPtr=obj;__tmpPtr->notDisposed();__tmpPtr->doDispose())

int Execute(const char* query){
    if(Connection::instance == nullptr){
        cout << "------- No Connection -------" << endl;
        cout << query << endl;
        cout << "------------------------------" << endl;
        cout << endl;

        return -1;//throw some Exception
    }

    cout << "------ Execution Result ------" << endl;
    cout << query << endl;
    cout << "------------------------------" << endl;
    cout << endl;

    return 0;
}

int main(int argc, const char * argv[]) {

    using(new Connection())
    {
        Execute("SELECT King FROM goats");//out of the scope
    }

    Execute("SELECT * FROM goats");//in the scope

} 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2008-12-03T23:17:06.753

如果您担心限制变量的生命周期而不是自动处置，您可以随时将其放入自己的范围：

```
void Foo()
{
    {
        SqlConnection con = new SqlConnection("connectionStringGoesHere");
        // do stuff
        // delete it before end of scope of course!
    }
} 
```

# command-line - 如果从命令行启动，则输出到命令行

> ID：338951
> 
> 赞同：7
> 
> 时间：2008-12-03T22:16:22.443
> 
> 标签：command-line, .net-2.0

我正在编写一个应用程序，它既可以作为标准 WinForms 应用程序启动，也可以从命令行以无人参与模式启动。该应用程序是使用 VS 2k5 标准 WinForms 模板构建的。

从命令行执行应用程序时，我希望它输出可以由执行应用程序的脚本捕获的信息。当我直接从 Console.WriteLine() 执行此操作时，不会出现输出，尽管可以通过管道将其捕获到文件中。

另一方面，我可以通过在 kernel32 的 AllocConsole() 上执行 P/Invoke 来强制应用程序弹出第二个控制台。不过，这不是我想要的。我希望输出出现在调用应用程序的同一窗口中。

这是允许我从命令行弹出控制台的显着代码：

```
<STAThread()> Public Shared Sub Main()

    If My.Application.CommandLineArgs.Count = 0 Then
        Dim frm As New ISECMMParamUtilForm()
        frm.ShowDialog()
    Else
        Try
            ConsoleControl.AllocConsole()
            Dim exMan As New UnattendedExecutionManager(ConvertArgs())
            IsInConsoleMode = True
            OutputMessage("Application started.")
            If Not exMan.SetSettings() Then
                OutputMessage("Execution failed.")
            End If
        Catch ex As Exception
            Console.WriteLine(ex.ToString())
        Finally
            ConsoleControl.FreeConsole()
        End Try

    End If

End Sub

Public Shared Sub OutputMessage(ByVal msg As String, Optional ByVal isError As Boolean = False)
    Trace.WriteLine(msg)
    If IsInConsoleMode Then
        Console.WriteLine(msg)
    End If

    If isError Then
        EventLog.WriteEntry("ISE CMM Param Util", msg, EventLogEntryType.Error)
    Else
        EventLog.WriteEntry("ISE CMM Param Util", msg, EventLogEntryType.Information)
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-01-06T00:47:07.507

Raymond Chen 最近发布了（问题在 SO 上发布一个月后）一篇关于此的简短文章：

[如何编写可以作为控制台或 GUI 应用程序运行的程序？](http://blogs.msdn.com/oldnewthing/archive/2009/01/01/9259142.aspx)

> 你不能，但你可以试着伪造它。
> 
> 每个 PE 应用程序在其头文件中包含一个字段，该字段指定它被设计为在哪个子系统下运行。您可以说 `IMAGE_SUBSYSTEM_WINDOWS_GUI`将自己标记为 Windows GUI 应用程序，也可以说 `IMAGE_SUBSYSTEM_WINDOWS_CUI`您是控制台应用程序。如果您是 GUI 应用程序，那么程序将在没有控制台的情况下运行。
> 
> 子系统决定内核如何为程序准备执行环境。如果程序被标记为在控制台子系统中运行，那么内核会将程序的控制台连接到其父级的控制台，如果父级没有控制台，则创建一个新的控制台。（这是一个不完整的描述，但细节与讨论无关。）另一方面，如果程序被标记为作为 GUI 应用程序运行，那么内核将在没有任何控制台的情况下运行程序。

在那篇文章中，他指出了张俊峰的另一篇文章，该文章讨论了几个程序（Visual Studio 和 ildasm）如何实现这种行为：

[如何将应用程序同时作为 GUI 和控制台应用程序？](http://blogs.msdn.com/junfeng/archive/2004/02/06/68531.aspx)

> 在 VisualStudio 的情况下，实际上有两个二进制文件：devenv.com 和 devenv.exe。Devenv.com 是一个控制台应用程序。Devenv.exe 是一个 GUI 应用程序。当您键入 devenv 时，由于 Win32 探测规则，将执行 devenv.com。如果没有输入，devenv.com 将启动 devenv.exe，然后自行退出。如果有输入，devenv.com 会将它们作为普通控制台应用程序处理。
> 
> 在 ildasm 的情况下，只有一个二进制文件：ildasm.exe。它首先被编译为 GUI 应用程序。后来使用editbin.exe 将其标记为控制台子系统。在其主要方法中，它确定是否需要以控制台模式或 GUI 模式运行。如果需要以 GUI 模式运行，它会以 GUI 应用程序的形式重新启动。

在对 Raymond Chen 的文章的评论中，老年人在[张俊峰](http://blogs.msdn.com/oldnewthing/archive/2009/01/01/9259142.aspx#9262858)对 Visual Studio 工作原理的简要描述中添加了以下内容：

> devenv.com 是一个通用的控制台模式存根应用程序。当它运行时，它会创建三个管道来重定向控制台的标准输入、标准输出和标准错误。然后它会找到自己的名称（通常是 devenv.com），将“.com”替换为“.exe”，并使用标准输入管道的读取端和标准输出的写入端启动新应用程序（即 devenv.exe）和 stderr 管道作为标准句柄。然后它只是坐下来等待 devenv.exe 退出并在控制台和管道之间复制数据。
> 
> 因此，即使 devenv.exe 是一个 gui 应用程序，它也可以使用其标准句柄读取和写入“父”控制台。
> 
> 您可以通过将其重命名为 myapp.com 自己将 devenv.com 用于 myapp.exe。但你不能在实践中，因为它属于 MS。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-04T00:17:02.153

**更新1：**

正如 Michael Burr 回答中所说，[Raymond Chen](http://blogs.msdn.com/oldnewthing/)最近[发表了一篇关于此的短文](http://blogs.msdn.com/oldnewthing/archive/2009/01/01/9259142.aspx)。我很高兴看到我的猜测并非完全错误。

**更新0：**

免责声明：这个“答案”主要是猜测。我发布它只是因为已经有足够的时间来确定没有多少人能够回答看起来像一个基本问题的答案。

我认为应用程序是 gui 还是控制台的“决定”是在编译时而不是在运行时做出的。因此，如果您将应用程序编译为 gui 应用程序，即使您不显示 gui，它仍然是一个 gui 应用程序并且没有控制台。如果您选择将其编译为控制台应用程序，那么在进入 gui“模式”之前，您至少会有一个控制台窗口闪烁。而且我不知道在托管代码中是否可行。

我认为问题是根本性的，因为控制台应用程序必须“控制”调用控制台应用程序。它必须在子应用程序的代码运行之前这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-05T12:37:09.003

如果您想检查您的应用程序是否从 .NET 中的命令行启动，您可以使用`Console.GetCursorPosition()`. 这样做的原因是，当您从命令行启动它时，光标会从初始点 ( `(0, 0)`) 移开，因为您在终端中输入了某些内容（应用程序的名称）。您可以通过相等检查（C# 中的代码）来做到这一点：

```
class Program
{
    public static void Main
    {
        if (Console.GetCursorPosition() == (0, 0))
        {
            //something GUI
        }
        else
        {
            //something not GUI
        }
    }
} 
```

**注意：您必须将输出类型设置为控制台应用程序，因为其他输出类型会`Console.GetCursorPosition()`引发异常。**

# mysql - MySQL（InnoDB）：需要删除列，以及伴随的外键约束和索引

> ID：338978
> 
> 赞同：10
> 
> 时间：2008-12-03T22:25:05.673
> 
> 标签：mysql, innodb, mysql-error-1025, mysql-error-1091

这是我的桌子：

```
CREATE TABLE `alums_alumphoto` (  
  `id` int(11) NOT NULL auto_increment,  
  `alum_id` int(11) NOT NULL,  
  `photo_id` int(11) default NULL,  
  `media_id` int(11) default NULL,  
  `updated` datetime NOT NULL,  
  PRIMARY KEY  (`id`),  
  KEY `alums_alumphoto_alum_id` (`alum_id`),  
  KEY `alums_alumphoto_photo_id` (`photo_id`),  
  KEY `alums_alumphoto_media_id` (`media_id`),  
  CONSTRAINT `alums_alumphoto_ibfk_1` FOREIGN KEY (`media_id`) REFERENCES `media_mediaitem` (`id`),  
  CONSTRAINT `alum_id_refs_id_706915ea` FOREIGN KEY (`alum_id`) REFERENCES `alums_alum` (`id`),  
  CONSTRAINT `photo_id_refs_id_63282119` FOREIGN KEY (`photo_id`) REFERENCES `media_mediaitem` (`id`)  
) ENGINE=InnoDB AUTO_INCREMENT=63 DEFAULT CHARSET=utf8 
```

我想删除 column `photo_id`，这可能还需要删除外键约束和索引。

问题是当我尝试删除列时出现错误：

```
错误 1025 (HY000): 将 '.\dbname\#sql-670_c5c' 重命名为 '.\dbname\alums_alumphoto' 时出错 (errno: 150)
```

...当我尝试删除索引（与上面相同）时，以及当我尝试删除外键约束时：

```
错误 1091 (42000): 不能 DROP 'photo_id_refs_id_63282119'; 检查列/键是否存在）
```

我应该按照什么顺序进行所有这些操作？我应该使用什么精确的命令？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2008-12-04T14:13:57.440

确切地说，试试这个：

首先删除外键或约束：

```
ALTER TABLE `alums_alumphoto` DROP FOREIGN KEY `photo_id_refs_id_63282119`; 
```

前面的命令删除列上的外键约束。现在您可以删除列`photo_id`（删除列时 MySQL 删除了索引）：

```
ALTER TABLE `alums_alumphoto` DROP COLUMN `photo_id`; 
```

或者，您可以将这两个操作合并为一个：

```
ALTER TABLE `alums_alumphoto` 
   DROP FOREIGN KEY `photo_id_refs_id_63282119` , 
   DROP COLUMN `photo_id`; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-12-03T22:42:29.193

确定的是制作一个重复的表。

```
> CREATE TABLE alums_alumphoto_new LIKE alums_alumphoto;
> ALTER TABLE .... // Drop constraint
> ALTER TABLE .... // Drop KEY
> ALTER TABLE .... // Drop the column
> INSERT INTO alums_alumphoto_new (SELECT id, alum_id, photo_id, media_id, updated FROM alums_alumphoto);
> RENAME TABLE alums_alumphoto TO alums_alumphoto_old, alums_alumphoto_new TO alums_alumphoto; 
```

如果执行 RENAME TABLE 时出错，则其他一些表可能具有引用该表的外键约束，在这种情况下，整个方法是愚蠢的。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-17T18:20:59.293

尝试结合使用 DROP KEY 和 DROP FOREIGN KEY 语句。

```
ALTER TABLE `alums_alumphoto` 
    DROP KEY KEY `alums_alumphoto_photo_id`,
    DROP FOREIGN KEY `photo_id_refs_id_63282119`;

ALTER TABLE `alums_alumphoto` 
    DROP COLUMN `photo_id`; 
```

# apache - 在网站根目录和子目录中的 .htaccess 中使用 mod_rewrite

> ID：338981
> 
> 赞同：0
> 
> 时间：2008-12-03T22:25:58.477
> 
> 标签：apache, .htaccess, mod-rewrite

我的困境：

在我网站根目录的 .htaccess 中：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.example\.com [NC]
RewriteRule ^(.*)$ http://www.example.com/$1 [R=301,L] 
```

在 .htaccess 中的子目录 /foo

```
RewriteEngine On
RewriteRule ^page1\.html$ /foo/page2.html [R=301] 
```

首先，我试图确保所有请求都包括开头的 www。第二，我将对 foo 子目录中 page1.html 的请求重定向到 page2.html，也在该子目录中。

在我的浏览器中，尝试访问：

[http://www.example.com/foo/page2.html](http://www.example.com/foo/page2.html) <== 有效，很好

[http://www.example.com/foo/page1.html](http://www.example.com/foo/page1.html) <== 重定向到[http://www.example.com/foo/page2.html](http://www.example.com/foo/page2.html)，很好

[http://example.com/foo/page1.html](http://example.com/foo/page1.html) <== 重定向到[http://www.example.com/foo/page2.html](http://www.example.com/foo/page2.html)，很好

**[http://example.com/foo/page2.html](http://example.com/foo/page2.html) <== 没有发生重定向，不好**

==> 应该重定向到：http://**www.**example.com/foo/page2.html

通过实验，网站根目录中的 .htaccess 文件中的重定向规则似乎只对对该子目录中的页面的请求生效，**如果**该子目录不包含 .htaccess 文件，或者它包含并指定了一个确实需要的重写规则此特定请求的效果。

**谁能看到我做错了什么？**我怎样才能获得粘贴 www 的重写规则。如果它缺少为[http://example.com/foo/page2.html](http://example.com/foo/page2.html)触发？

* * *

谢谢你，这有效！

作为记录，然后我不得不将站点根目录中文件中的重写规则更改为：

```
RewriteRule ^.*$ http://www.example.com%{REQUEST_URI} [R=301,L] 
```

这很好。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-04T00:51:39.387

您在中缺少以下指令`foo/.htaccess`：

```
RewriteOptions inherit 
```

参看。[文档](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewriteoptions)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-03T23:58:35.017

我不确定为什么中的规则`/.htaccess`不适用于`/foo/.htaccess`. 通常，`.htaccess`文件将继承目录结构的规则，这可能会导致各种奇怪的事情。但是，对于您的特定解决方案，您可以将所有相关规则放在您的父`.htaccess`文件中，如下所示：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.example\.com [NC]
RewriteRule ^(.*)$ http://www.example.com/$1 [R=301,L]
RewriteRule ^foo/page1\.html$ /foo/page2.html [R=301] 
```

# linq-to-sql - LINQ To 实体和延迟加载

> ID：338986
> 
> 赞同：9
> 
> 时间：2008-12-03T22:27:37.227
> 
> 标签：linq-to-sql, linq-to-entities

在今天的一篇[有争议的博客文章](http://www.hackification.com/2008/12/03/linq-to-entities-the-blackberry-storm-of-orms/)中，Hackification 对新的 LINQ To Entities 框架中似乎存在的错误发表了看法：

> 假设我搜索客户：
> 
> ```
> var alice = data.Customers.First( c => c.Name == "Alice" ); 
> ```
> 
> 很好，效果很好。现在让我们看看我是否能找到她的订单之一：
> 
> ```
>  var order = ( from o in alice.Orders
>           where o.Item == "Item_Name"
>           select o ).FirstOrDefault(); 
> ```
> 
> LINQ-to-SQL 将找到子行。LINQ-to-Entities 将不返回任何内容。
> 
> 现在假设我遍历数据库中的所有订单：
> 
> ```
> foreach( var order in data.Orders ) { 
> Console.WriteLine( "Order: " + order.Item ); } 
> ```
> 
> 现在重复我的搜索：
> 
> ```
> var order = ( from o in alice.Orders
>           where o.Item == "Item_Name"
>           select o ).FirstOrDefault(); 
> ```
> 
> 哇！LINQ-to-Entities 突然告诉我子对象存在，尽管之前告诉我它不存在！

我最初的反应是这一定是一个错误，但经过进一步考虑（并[得到 ADO.NET 团队的支持](http://www.infoq.com/news/2008/12/Lazy-Loading)），我意识到这种行为是由实体框架引起的，而不是在 Alice 被拉出时延迟加载 Orders 子查询数据上下文。

这是因为 order 是一个 LINQ-To-Object 查询：

```
var order = ( from o in alice.Orders
      where o.Item == "Item_Name"
      select o ).FirstOrDefault(); 
```

并且没有以任何方式访问数据上下文，而他的 foreach 循环：

```
 foreach( var order in data.Orders ) 
```

正在访问数据上下文。

LINQ-To-SQL 实际上为 Orders 创建了延迟加载的属性，以便在访问时执行另一个查询，LINQ to Entities 让您手动检索相关数据。

现在，我不是 ORM 的忠实粉丝，这正是原因。我发现，为了让您想要的所有数据触手可及，他们会在您背后重复执行查询，例如，上面的 linq-to-sql 查询可能会为每行客户运行一个额外的查询以获取订单.

然而，EF 不这样做似乎主要违反了最小意外原则。虽然它在技术上是正确的做事方式（您应该运行第二个查询来检索订单，或从视图中检索所有内容），但它的行为不像您对 ORM 所期望的那样。

**那么，这是好的框架设计吗？还是微软在为我们考虑这个问题？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-12-18T15:39:16.203

乔恩，

我也一直在玩 linq to entity。在赶上 linq to SQL 之前还有很长的路要走。对于每个类型继承的表，我不得不使用 linq 到实体。我最近发现了一篇很好的文章，它在这里解释了整个 1 公司 2 种不同的 ORM[技术](http://www.infoq.com/news/2008/11/DLINQ-Future)。

但是，您可以通过以下方式进行延迟加载：

```
// Lazy Load Orders 
var alice2 = data.Customers.First(c => c.Name == "Alice");

// Should Load the Orders
if (!alice2.Orders.IsLoaded)
    alice2.Orders.Load(); 
```

或者您可以只在原始查询中包含订单：

```
// Include Orders in original query
var alice = data.Customers.Include("Orders").First(c => c.Name == "Alice");

// Should already be loaded
if (!alice.Orders.IsLoaded)
    alice.Orders.Load(); 
```

希望能帮助到你。

戴夫

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-03T22:48:52.083

> 那么，这是好的框架设计吗？还是微软在为我们考虑这个问题？

好吧，让我们分析一下——微软所做的所有想法，我们不必真的让我们成为更懒惰的程序员。但总的来说，它确实让我们更有效率（在大多数情况下）。那么*他们是**在*想太多，还是只是在为我们*考虑*？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-03T22:43:28.490

如果 LINQ-to-Sql 和 LINQ-to-Entities 来自两家不同的公司，那将是可以接受的差异——没有法律规定所有 LINQ-To-Whatevers 都必须以相同的方式实现。

然而，他们都来自微软——**我们不需要对他们的内部开发团队和流程有深入的了解，就可以知道如何使用表面上看起来完全一样的两种不同的东西**。

ORM 有自己的位置，并且确实填补了人们试图完成工作的空白，但是 ORM 的使用者必须确切地知道他们的 ORM 是如何完成工作的——把它当作一个不可穿透的黑匣子只会给你带来麻烦。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-02-26T17:17:23.220

在这个问题上浪费了几天时间，我很同情。

“错误”（如果有的话）是有一种合理的倾向，即期望抽象层将与这类问题隔离开来。从 LINQ 到实体，再到数据库层，更是如此。

例如，必须从 MS-SQL（使用 LingToSQL）切换到 MySQL（使用 LinqToEntities），人们会认为 LINQ 至少是相同的，如果不仅仅是为了节省重新编写程序的成本的话逻辑。

仅仅因为引擎盖下的持久性机制发生了变化，就不得不用 .Load() 和/或 LINQ 用 .Include() 乱扔代码似乎有点令人不安，尤其是在静默失败的情况下。LINQ 层至少应该表现一致。

许多 ORM 框架使用代理对象来透明地动态加载惰性对象，而不是仅仅返回 null，尽管我会对集合未加载异常感到满意。

我倾向于不接受他们故意为您的利益而做的借口；其他 ORM 框架让您可以根据需要注释您是想要预先加载还是延迟加载。在这里也可以这样做。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-03T22:37:30.780

我不太了解 ORM，但作为 LinqToSql 和 LinqToEntities 的用户，我希望当您尝试查询 Alice 的订单时，它会在您进行 linq 查询时为您执行额外的查询（而不是不查询任何内容或查询每一行的所有内容）。

期待似乎很自然

```
from o in alice.Orders where o.Item == "Item_Name" select o 
```

考虑到这是人们首先使用 ORM 的原因之一（以简化数据访问）。

我对 LinqToEntities 的了解越多，我就越认为 LinqToSql 能够充分满足大多数开发人员的需求。我通常只需要一个一对一的表映射。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-09T22:01:29.630

尽管您不必了解 Microsoft 的内部开发团队和流程，但事实是这两种技术是两种完全不同的野兽。

为简单起见，LINQ to SQL 的设计决策是隐式延迟加载集合。ADO.NET Entity Framework 团队**不想**在用户不知情的情况下执行查询，因此他们将 API 设计为在第一个版本中显式加载。

LINQ to SQL 已移交给 ADO.NET 团队，因此您可能会看到未来 API 的整合，或者 LINQ to SQL 被折叠到实体框架中，或者您可能会看到 LINQ to SQL 因忽视而萎缩并最终被弃用.

# actionscript-3 - 闪存/AS3；获取/设置电影剪辑的绝对位置？

> ID：338988
> 
> 赞同：1
> 
> 时间：2008-12-03T22:27:54.590
> 
> 标签：actionscript-3, flash, actionscript

如何在 Flash/AS3 中获取/设置 MovieClip 的绝对位置？绝对，我的意思是它相对于舞台原点的位置。

我目前有这个二传手：

```
class MyMovieClip extends MovieClip
{
  function set xAbs(var x:Number):void
  {
    this.x = -(this.parent.localToGlobal(new Point()).x) + x;
  } 
} 
```

这似乎可行，但我觉得它需要舞台左对齐。

但是，我没有工作的吸气剂。这不起作用：

```
public function get xAbs():Number 
{
  return -(this.parent.localToGlobal(new Point()).x) + this.x; // Doesn't work
} 
```

我的目标是找到一个可行的解决方案，并且适用于所有舞台对齐，但这很棘手。我在与浏览器窗口大小相关的舞台上使用它。

编辑：这适用于左上对齐的阶段；不确定其他人：

```
public function get AbsX():Number 
{
    return this.localToGlobal(new Point(0, 0)).x;
}       
public function get AbsY():Number 
{
    return this.localToGlobal(new Point(0, 0)).y;
}       
public function set AbsX(x:Number):void
{
    this.x = x - this.parent.localToGlobal(new Point(0, 0)).x;
}
public function set AbsY(y:Number):void
{
    this.y = y - this.parent.localToGlobal(new Point(0, 0)).y;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-03T23:06:39.333

两件事情：

为什么要减法？

```
var x=this.parent.localToGlobal(new Point(this.x,0)).x; 
```

应该已经给出了正确的结果。如果父剪辑被缩放，您的计算将被缩放因子关闭......

只是在黑暗中拍摄，但您可以添加一个`globalToLocal(this.stage)`来补偿对齐问题？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2010-03-10T02:35:52.513

太感谢了！！！！

要获得与舞台使用相关的对象位置：

*   (对象为 DisplayObject).localToGlobal(new Point()).x;
*   (对象为 DisplayObject).localToGlobal(new Point()).y;

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-04T09:07:09.400

同意 moritzstefaner 的观点，您不需要减法阶段，但是对于您的 setter，我实际上认为您应该使用 globalToLocal，并使用 localToGlobal 作为您的 getter。这些将负责缩放和旋转以及位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-02-13T05:15:50.450

我不能使用 localToGlobal 作为替代解决方案是在你想要的范围内获得鼠标的位置：

```
mynestesprite.addEventListener (MouseEvent.MOUSE_OVER, myover)
function myover(e:MouseEvent){
    // e.target.parent.parent ....
     trace ( e.target.parent.parent.mouseX, e.target.parent.parent.mouseY)
} 
```*******`********``